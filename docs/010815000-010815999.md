# StackOverflow 问答 10815000-10815999

# android - 选中复选框时，Android 应用程序中的 Twitter 登录页面

> ID：10815001
> 
> 赞同：1
> 
> 时间：2012-05-30T11:04:49.340
> 
> 标签：android, twitter

嗨，我需要 twitter 登录屏幕。当我选中复选框时，我需要获取 Twitter 登录页面。

请帮助我作为示例代码。

**编辑：**

我试过这个，但让力量接近。这是我的日志：

```
05-30 17:02:30.901: E/AndroidRuntime(3222): FATAL EXCEPTION: main
05-30 17:02:30.901: E/AndroidRuntime(3222): java.lang.VerifyError: com.android.twitter.TwitterApp
05-30 17:02:30.901: E/AndroidRuntime(3222):     at com.android.twitter.TwitterActivity.onCreate(TwitterActivity.java:34)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.os.Looper.loop(Looper.java:123)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at java.lang.reflect.Method.invokeNative(Native Method)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at java.lang.reflect.Method.invoke(Method.java:521)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-30 17:02:30.901: E/AndroidRuntime(3222):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你的高级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T06:22:50.760

只需检查您的 jar 是否在 lib 文件夹或 libs 文件夹中。我也遇到了同样的问题，我只是将 jar 从 lib 更改为 libs，问题就解决了。我希望它也适合你。

# java - 从 Android ListView 中删除项目

> ID：10815004
> 
> 赞同：1
> 
> 时间：2012-05-30T11:04:55.890
> 
> 标签：java, android, listview, sharedpreferences

我为 ListView 创建了一个上下文菜单。长按 ListView 中的项目时，将出现一个包含两个选项（编辑和删除）的上下文菜单。我的目的是，当单击删除时，只会将 ListView 中的选定项目从列表中删除。但我不知道为什么完成此操作后列表中的所有项目都会被删除。

下面是我的代码行。**你能提供一点帮助吗？**如果您能根据我的代码给出说明，那就太好了。

非常感谢您提前。

```
public class HistoryView extends Activity {
private static final String HISTORY_TAG = "[AppName - HistoryView] ";
private ListView mLSTHistory = null;
private ArrayList<String> lstDict = null;
private ArrayList<Integer> lstId = null;
private ArrayAdapter<String> aptList = null;
private ArrayList<String> mWordHistory = null;
private SharedPreferences prefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.history);
    prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

    if (prefs.getBoolean("saveHistory", true))
    {
        String strHistory = prefs.getString("history", "");
        Log.i(HISTORY_TAG, "History loaded");
        if (strHistory != null && !strHistory.equals(""))
        {
            mWordHistory = new ArrayList<String>(Arrays.asList(strHistory.split(",")));
        }
        else
        {
            mWordHistory = new ArrayList<String>();
        }
    }
    else
    {
        mWordHistory = new ArrayList<String>();
    }

    Log.d(HISTORY_TAG,"mWordHistory = " + mWordHistory.size());

    if (lstDict == null)
    {
        lstDict = new ArrayList<String>();
        lstId = new ArrayList<Integer>();
        aptList = new ArrayAdapter<String>(getApplicationContext(),R.layout.customlist);
    }
    lstDict.clear();
    lstId.clear();
    aptList.clear();
    if (mWordHistory != null && mWordHistory.size() > 0)
    {
        try
        {
            for (int i=0; i < mWordHistory.size(); i++)
            {
                Log.i(HISTORY_TAG,"item = " + mWordHistory.get(i));
                String arrPart[] = mWordHistory.get(i).split("::");
                if (arrPart.length == 3)
                {
                    //Log.i(CONTENT_TAG, "loaded content " +arrPart.length + ", wordId = " + arrPart[1]);
                    //Log.i(CONTENT_TAG, "loaded 0");
                    lstDict.add(i,arrPart[0]);
                    //Log.i(CONTENT_TAG, "loaded 1");
                    lstId.add(i,Integer.parseInt(arrPart[1]));
                    //Log.i(CONTENT_TAG, "loaded 2");
                    aptList.add(arrPart[2]);
                }
                else
                {
                    Log.i(HISTORY_TAG,"Wrong entry: " + mWordHistory.get(i));
                }
            } 
        }
        catch (Exception ex)
        {
            Log.i(HISTORY_TAG,"Wrong entry found!");
        }
    }

    mLSTHistory = (ListView) findViewById(R.id.lstHistory); 
    registerForContextMenu(mLSTHistory);
    mLSTHistory.setAdapter(aptList);

    mLSTHistory.setOnItemClickListener(new AdapterView.OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> arg0, View v, int arg2, long arg3)
        {
            Intent i = new Intent();
            i.putExtra("dict", lstDict.get(arg2));
            i.putExtra("wordId", lstId.get(arg2));
            setResult(RESULT_OK,i);
            finish();
        }
    });
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.context_menu, menu);
}
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {
        case R.id.edit:
            editItem(info.id);
            return true;
        case R.id.delete:
            deleteItem(info.id);
            return true;
        default:
            return super.onContextItemSelected(item);
    }
    }
private void deleteItem(long id) {
    // TODO Auto-generated method stub
    mWordHistory.clear();
    aptList.clear();
    mLSTHistory.setAdapter(aptList);
    SharedPreferences.Editor editor = prefs.edit();
    editor.putString("history", "");
    editor.commit();
    setResult(RESULT_OK);
    finish();
    }
private void editItem(long id) {
    //Edit item...
    }
} 
```

* * *

**更新：**

感谢**raju**，它现在可以工作了（从列表中删除了选定的项目）。但是，所选项目不会从 SharedPreferences 中删除。这就是重新加载列表时它会重新出现的原因。

我使用以下代码行将项目保存到 SharedPreferences。谁能告诉我如何更新 SharedPreferences 以便它反映使用 raju 的代码行从列表中删除项目时的更改。非常感谢你。

```
if (prefs.getBoolean("saveHistory", true) && mWordHistory != null && mWordHistory.size() >= 1)
        prefs =   PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        StringBuilder sbHistory = new StringBuilder();
        for (String item : mWordHistory)
        {
            sbHistory.append(item);
            sbHistory.append(",");

        String strHistory = sbHistory.substring(0, sbHistory.length()-1);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString("history", strHistory);
        editor.commit();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:10:18.670

```
aptList.clear(); 
```

此行清除适配器......所以所有项目都被删除......而不是使用

```
 aptlist.remove(//the selected item); 
```

代替这个

```
 deleteItem(info.id); 
```

放

```
 String content =getListView().getItemAtPosition(info.position);
   aptList.remove(content);
   aptList.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:00:42.743

我听从了您的建议，就我而言，它如下所示；

活动类中的适配器声明：

```
 private MyObjectAdapter adapter; 
```

在活动类的 onCreate 中创建适配器并设置适配器：

```
adapter = new MyObjectAdapter(MainActivity.this, MyObject.getList(this));
setListAdapter(adapter); 
```

getList 是我自己的方法。

从列表视图中删除项目的代码

```
MyObject myObjectToRemove = (MyObject)getListView().getItemAtPosition(positionAtList);
adapter.remove(myObjectToRemove);
adapter.notifyDataSetChanged(); 
```

# makefile - Makefile：使用一个命令的输出作为另一个命令的参数

> ID：10815005
> 
> 赞同：0
> 
> 时间：2012-05-30T11:05:06.297
> 
> 标签：makefile, io-redirection

作为构建过程的一部分，Make 创建了几个`.tgz`文件：

```
blah_1.tgz blah_2.tgz .... blah_n.tgz 
```

如何`rsync`在每个文件上调用另一个命令（例如，）？

在 bash 中，我会：

```
for file in `ls *.tgz`' do rsync $file DESTINATION; done 
```

或者：

```
ls | grep tgz | xargs rsync {} DESTINATION 
```

但是熟悉的 bash 语法似乎不符合 Make。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:34:00.293

嗯......这样的事情应该可以工作：

```
TGZ_FILES := blah_1.tgz blah_2.tgz .... blah_n.tgz
RSYNC_TARGETS := $(TGZ_FILES:%=rsync-%)

all : $(RSYNC_TARGETS)

.PHONY : $(RSYNC_TARGETS)
$(RSYNC_TARGETS) : rsync-% : %
    rsync $* DESTINATION

# Omit the following rule
# if .tgz files are made somewhere else (outside Make),
# and you assume they are always up-to-date
$(TGZ_FILES) : %.tgz : ...
    # rule to make each .tgz file 
```

此示例使用 GNU Make 的以下功能：

*   [替代参考](http://www.gnu.org/software/make/manual/make.html#Substitution-Refs)( `$(TGZ_FILES:%=rsync-%)`)
*   [静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)( `$(RSYNC_TARGETS) : rsync-% : %`)
*   [虚假目标](http://www.gnu.org/software/make/manual/make.html#Phony-Targets)( `.PHONY : $(RSYNC_TARGETS)`)
*   [自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)( `$*`)

# javascript - Jquery 父母的跨度

> ID：10815007
> 
> 赞同：0
> 
> 时间：2012-05-30T11:05:11.140
> 
> 标签：javascript, jquery, html

如何将文本输出到父级`<div>`？`<span>`我究竟做错了什么？如果有比使用 span 和 更好的解决方案`.parent()`，请告诉我。

**HTML：**

```
<div>
<span></span> <!--the span where i want to output "troll" and "dwarf"-->
<a href="#" class="heroes" alt="troll">Icon</a>
<a href="#" class="heroes" alt="dwarf">Icon</a>
</div>

<div>
<span></span <!--the span where i want to output "witch"-->
><a href="#" class="heroes" alt="witch">Icon</a>
</div>

<div> 
<span></span> <!--etc...-->
<a href="#" class="heroes" alt="barbarian">Icon</a>
</div>

<div>
<span></span>
<a href="#" class="heroes" alt="necromancer">Icon</a>
</div> 
```

**JS：**

```
$('.heroes').hover(function() {
    var hero = $(this).attr('alt');
    $(this).parent('span').text(hero);
}, function() {
    $(this).parent('span').text("");
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:06:51.480

```
$(this).siblings('span').text(hero); 
```

跨度是锚的兄弟，而不是父。

缩进你的 HTML，你很容易看到它：

```
<div> <!--The parent of the span and anchors!-->
    <span></span> <!--Sibling of the anchors!-->
    <a href="#" class="heroes" alt="troll">Icon</a>
    <a href="#" class="heroes" alt="dwarf">Icon</a>
</div> 
```

[**现场演示**](http://jsfiddle.net/cXr29/3/)

**注意：** `alt`不是锚的有效 HTML 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:07:57.887

利用：

```
$(this).closest('div').find('span').text(hero); 
```

`<span>`是兄弟不是您的链接的父级，您可以根据实际`<div>`父级找到它。

# c++ - 重载下标运算符导致访问冲突

> ID：10815008
> 
> 赞同：0
> 
> 时间：2012-05-30T11:05:15.553
> 
> 标签：c++, operator-overloading

使用自写的 Buffer 类时出现访问冲突错误：

```
template<typename T> 
class Buffer {
public:
    Buffer(T *data, size_t len);
    Buffer(size_t len);

    size_t len();

    operator T*();
    T& operator[] (const int x) const {
        return this->data[x];
    };

private:
    T *data;
    size_t _len;
};

int main() {
    Buffer<char> b("123", 3);
    b[0] = 0; // This line causes "Access violation writing location 0x003c8830".

    return 0;
} 
```

这是为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:09:14.357

导致问题的代码不在帖子中，但很可能是您的构造函数：如果将指针分配给`data`member `data`，则将字符串常量存储在类中。然后`main`比的代码尝试写入不可写内存，导致访问冲突。

您可以修复构造函数以避免此问题：

```
Buffer(T *dataIn, size_t len) {
    data = new T[len];
    memcpy(data, dataIn, len*sizeof(T));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:10:52.430

`"123"`是存储在只读内存中的字符串文字，
当您这样做时：

```
b[0] = 0 
```

您正在尝试写入只读内存，从而调用**Undefined Behavior**。

您需要分配动态内存，`data`以便它***拥有内存***，然后您的代码修改拥有的内存，而不是它不拥有的不可写内存。
另外，请确保您遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T11:10:55.410

诸如“123”之类的字符串文字是不可写的。当您执行 b[0] = 0; 时，您尝试为其分配一个值；

此外，字符串文字有一个终止 NULL 字符，使 4 变长。

您可以专门化您的构造函数来复制 const char 输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T11:11:32.180

您没有显示构造函数的定义，但我敢打赌您正在使用赋值运算符将 C 字符串复制到`Buffer::data`. 相反，您需要使用`strcpy()`. 此外，您需要分配 3 + 1 个字节`Buffer::data`以确保您有足够的空间用于 nul 终止符。

# perl - 如何使用 Perl 检查文件是否打开？

> ID：10815012
> 
> 赞同：6
> 
> 时间：2012-05-30T11:05:42.017
> 
> 标签：perl, file

给定文件的名称，我如何确定该文件当前是打开还是正在使用？（我说的是文件而不是 Perl 文件句柄。）

请注意，我正在寻找一种通用的 Perl 解决方案，而不是特定于操作系统的解决方案。至少，我想要在 Windows 和基于 GNU/Linux 的系统上都可以工作的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T11:44:46.757

POSIX 没有提供任何方法来做到这一点。因此，鉴于当前可用的便携式 O/S 接口，没有便携式解决方案是可能的。

您必须制定一些更高级别的方法，为开放位提供单点访问。就像锁定文件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:11:10.790

请参阅以下片段（仅限 Linux/Unix，您不会告诉我们您运行的是哪个操作系统）：

在单行中：

```
perl -e 'my $file = $ARGV[0]; print "file $file is opened" if `lsof $file`;' FILE 
```

在脚本中：

```
#!/usr/bin/env perl -w

use strict;

my $file = $ARGV[0];
print "file $file is opened\n" if `lsof $file`; 
```

运行它：

```
./script.pl FILENAME 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T19:00:14.740

尝试[标量::Util](https://metacpan.org/pod/Scalar::Util)

[Scalar::Util](http://search.cpan.org/%7Epevans/Scalar-List-Utils-1.27/lib/Scalar/Util.pm)模块[`openhandle()`](http://perldoc.perl.org/Scalar/Util.html#openhandle)为此提供了功能。与[fileno()](http://perldoc.perl.org/functions/fileno.html)不同，它处理与操作系统文件句柄无关的 perl 文件句柄。与[tell()](http://perldoc.perl.org/functions/tell.html)不同，它在未打开的文件句柄上使用时不会产生警告来自模块的[文档](http://perldoc.perl.org/Scalar/Util.html#openhandle)：

> 开口手柄 FH
> 
> ```
> Returns FH if FH may be used as a filehandle and is open, or FH is a tied handle. Otherwise "undef" is returned.
> 
>    $fh = openhandle(*STDIN);           # \*STDIN
>    $fh = openhandle(\*STDIN);          # \*STDIN
>    $fh = openhandle(*NOTOPEN);         # undef
>    $fh = openhandle("scalar");         # undef 
> ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T11:41:59.473

试试这个

```
use strict;
open(IN, ">test");
print IN "Hello";
close(IN);
if(fileno(IN) == undef )
{
    print "File is CLOSED\n";
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-20T17:11:56.690

我知道已经有一段时间了，但是对于 Windows，我很幸运地通过尝试锁定文件来检测正在写入的文件（没什么特别的 - 只需打开以供读取，使用 Perl 内部群并关闭文件）。这似乎甚至适用于网络文件。我不太确定这是否适用于 Linux（它可能在写入时），我不知道它是否可以检测到其他文件读取器。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-22T01:51:14.527

我阅读了大量帖子，但没有找到我正在寻找的解决方案。就我而言，我有一个 for 循环创建和关闭大量文件。我想检查我创建的文件处理程序是否打开。这就是你的做法

```
use IO::Handle;

if (something matches create a file)
{
  open( $signoff_report_html, '>', "$val21");
}
elsif ( ... )
{
  #keep doing amazing stuff
}
else
{
   if ($signoff_report_html->opened()) 
   {    
      #file is ok
      print "File is opened and ready\n";       
  }
  else 
  {
      print "File was closed ... ";
  }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-12-11T16:38:12.543

尝试重命名文件，如果打开会失败。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-01T12:08:14.617

我意识到您不想打开文件句柄，但这可能是 IMO 最简单的方法：

```
open my $myfh, '<', $my_file or die "Couldn't open $my_file: $!"; 
```

# entity-framework-4 - 在 Ado.NET 模拟生成器之后，日期时间不存在

> ID：10815019
> 
> 赞同：1
> 
> 时间：2012-05-30T11:06:10.663
> 
> 标签：entity-framework-4, ado.net, mocking

我正在使用 ADO.NET 模拟上下文生成器从 EDMX 文件生成我的实体类，以便我可以在单元测试中使用它们。但是，在生成实体并尝试构建项目后，出现以下错误：

```
The type name 'DateTime' does not exist in the type 'MyProject.Models.System' 
```

在代码中，日期时间属性以以下格式声明：

```
public virtual System.DateTime LastActive 
```

如果我将 System.DateTime 更改为 DateTime，错误就会清除。不幸的是，这是不切实际的，因为它们有很多，而且下次我重新生成时它们会被覆盖。

为什么我会收到此错误，我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:11:19.433

看起来问题在于您有一个名为`System`. 这是一个非常糟糕的主意——它会导致这个问题无处不在。（有关更多详细信息，请参阅[Eric Lippert 关于此主题的博文](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)……）

最具体的声明方式是：

```
public virtual global::System.DateTime LastActive { get; set; } 
```

如果您可以更改生成器来创建它，那应该没问题......但就个人而言，`System`如果可能的话，我只会将类型更改为其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T07:44:45.443

最近遇到了同样的问题并偶然发现了这个问题，Jon Skeets 的回答帮助我确定了问题，但是有一个比编辑 *.tt 文件更简单的解决方案，如果你去设计器，你可以调用你的实体/类/模型除了 system 之外的其他东西，同时仍然有一个名为 system 的表。

对我来说，更改表名不是一种选择，因为我没有提供数据库，我只是对其进行编码。

1.  在设计器中打开 .edmx 文件

2.  找到名为 system 的表

3.  右键单击并选择属性或单击它并查看右下角

4.  在“一般”类别下找到属性“名称”并将其命名为不同于表的名称。

5.  右键单击 .edmx 文件并选择“运行自定义工具”

对我来说，这解决了 13 000 多个错误

如果有人知道如何在不使用设计器的情况下更改实体的名称，请在评论中写下。

# facebook-like - Facebook Like 按钮图片丢失

> ID：10815026
> 
> 赞同：0
> 
> 时间：2012-05-30T11:06:32.137
> 
> 标签：facebook-like

我试图理解为什么当用户点击我网站上的“赞”按钮时我的图片没有显示。调试器显示正确的图像，但当您喜欢该页面时，它不会在 Facebook 中显示。这是网址。

[http://www.pausethis.com/Home/Video?video=http://www.youtube.com/embed/-cZ7OT7BmM8?wmode=opaque&id=95&VId=-cZ7OT7BmM8](http://www.pausethis.com/Home/Video?video=http://www.youtube.com/embed/-cZ7OT7BmM8?wmode=opaque&id=95&VId=-cZ7OT7BmM8)

有任何想法吗？

类似脸书

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:58:45.870

刚刚测试了这个。当您喜欢该链接时，图像确实会出现。但是，页面的标题（即`og:title`）不正确。它打印一个 URL 而不是实际的标题或有用的东西。

![喜欢截图](../Images/96ccc2e502da86175bcfef9a57ea6736.png)

# database - wp7列表框选定项目选择另一个表中的项目

> ID：10815028
> 
> 赞同：0
> 
> 时间：2012-05-30T11:06:44.990
> 
> 标签：database, windows-phone-7, listbox, selecteditem

是否可以让列表框选中项目以显示另一个表中的单个项目。

例如，存在一个带有排名和名称的列表框的表 我希望列表框中的选定项目使用来自选定项目的名称来显示有关位于另一个表中的玩家的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:28:28.763

是的，可以通过以下方式实现：

```
listboxname.items.add(listbox2) 
```

# mysql - MySQL Workbench 编辑表数据是只读的

> ID：10815029
> 
> 赞同：97
> 
> 时间：2012-05-30T11:06:46.160
> 
> 标签：mysql, mysql-workbench

在 MySQL Workbench 5.2.37 中尝试编辑表数据时，它处于只读模式。

仅当表具有主键时才可编辑。

有没有解决方法来处理没有主键的表？

谢谢

作为建议之一，我尝试升级 WB 5.2.40。但是这个问题仍然存在..请任何人帮忙..

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-01T16:21:44.950

我假设表有一个主键。首先尝试运行解锁表命令以查看是否可以修复它。

如果所有其他方法都失败了，您可以更改表以创建一个具有自动增量的新主键列，这有望修复它。完成后，您应该能够毫无问题地删除该列。

与往常一样，您希望在更改表格之前进行备份。:)

注意：如果这是您的问题，MySQL 工作台无法在没有主键的情况下工作。但是，如果您有一个多对多表，您可以将两个列都设置为主键，这样您就可以编辑数据。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-05-08T09:24:00.487

如果表没有定义主键或唯一的不可为空，则 MySql 工作台无法编辑数据。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-23T14:42:25.917

如果您为数据库连接设置默认架构，则 Select 将以只读模式运行，直到您明确设置架构

```
USE mydb;
SELECT * FROM mytable 
```

这也将在编辑模式下运行：

```
SELECT * FROM mydb.mytable 
```

(MySql 5.2.42 / MacOsX)

我希望这有帮助。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-03-04T10:54:08.457

这是MySQLWorkbench 中的[*已知限制（您不能在没有 PK 的情况下编辑表）：*](https://dev.mysql.com/doc/relnotes/workbench/en/wb-news-5-2-36.html)

## 编辑表格：

**方法 1：（** 在某些情况下该方法不起作用）
右键单击对象浏览器中的表，然后从那里选择编辑表数据选项。

**方法2：**
我宁愿建议你添加主键而不是：

```
ALTER TABLE `your_table_name` ADD PRIMARY KEY (`column_name`); 
```

你可能想先删除现有的行：

```
Truncate table your_table_name 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-10-08T10:51:04.843

将鼠标悬停在 mysql 工作台中的“只读”图标上会显示一个工具提示，解释为什么它不能被编辑。就我而言，它说只能编辑具有主键或唯一不可为空列的表。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-30T18:38:19.103

即使在选择主键时，我也遇到了只读问题。我最终发现这是一个外壳问题。显然，PK 列的大小写必须与表中定义的相同。使用：windows上的workbench 6.3

只读

选择leadid,firstname,lastname,datecreated FROM Lead;

允许编辑

SELECT LeadID,firstname,lastname,datecreated FROM Lead;

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-11-13T13:42:50.860

在 MySQL Workbench 中，您需要一个 INDEX 来编辑，不需要它是 PK（尽管添加 PK 也是一种解决方案）。

您可以制作常规 INDEX 或复合 INDEX。这就是 MySQL WB 修复只读问题所需的全部内容（我有 v. 6.2 和 MariaDB v. 10.1.4）：

只需右键单击表，选择“更改表...”，然后转到“索引”选项卡。在左侧窗格中为您的索引输入自定义名称，并在中间窗格中选中一个（确保值是唯一的）或多个字段（只需确保组合是唯一的）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-30T11:14:11.643

根据[这个错误](http://bugs.mysql.com/bug.php?id=62893)，对于某些人来说，这个问题在 Workbench 5.2.38 中得到了修复，对于其他人来说可能是 5.2.39——你能[升级](http://www.mysql.com/downloads/workbench/)到最新版本（5.2.40）吗？

或者，可以使用以下方法解决：

```
SELECT *,'' FROM my_table 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-27T20:22:33.433

如果您的表处于只读模式，则首先检查是主键。如果没有定义主键，添加如下，

> ALTER TABLE `scema_here`.table_name_here 添加主键 ( `your primary key here`);

干杯！:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-19T22:34:13.223

在 Manitoba 的帖子的指导下，我找到了另一个解决方案。总而言之，解决方案是：

1.  使用 USE 命令

    ```
    USE mydb;
    SELECT * FROM mytable 
    ```

2.  使用显式模式前缀：

    ```
    SELECT * FROM mydb.mytable 
    ```

3.  图形用户界面

    在对象浏览器“SCHEMAS”窗格中，如果您遇到相同问题，所有数据库图标最初都不会突出显示。因此，您可以右键单击要设为默认的数据库图标，选择“设置为默认模式”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-20T14:14:19.823

1.）您必须使主键唯一，然后您应该可以进行编辑。

右键单击“蓝色”模式中的表 - > ALTER TABLE，查找您的primert键（PK），然后只需选中复选框UN，AI应该已经被选中。之后只需应用，您应该能够编辑表格数据。

2.）您还需要在您的选择语句中包含主键

Nr 1 并不是真正必要的，而是一个很好的做法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-24T03:40:37.180

如果您的查询有任何 JOIN，Mysql Workbench 将不允许您更改表，即使您的结果都来自单个表。

例如，以下查询

```
SELECT u.* FROM users u JOIN passwords p ON u.id=p.user_id WHERE p.password IS NULL; 
```

将不允许您编辑结果或添加行，即使结果仅限于一个表。您必须专门执行以下操作：

```
SELECT * FROM users WHERE id=1012; 
```

然后您可以编辑该行并将行添加到表中。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-04T09:08:21.060

当您通过连接两个表进行获取时，MySQL 将以只读模式运行，并且两个表中的列包含在结果中。然后你不能直接更新值。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-09-17T23:15:19.057

是的，我发现 MySQL 也无法编辑结果表。通常，连接其他表的结果表没有主键。我听说其他人建议将结果表放在另一个表中，但更好的解决方案是使用可以编辑结果表的 Dbeaver。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-04-20T19:38:46.757

[![在此处输入图像描述](../Images/790704ad06848638c70a6b710fb11e48.png)](https://i.stack.imgur.com/ITXNl.png)

**取消选中标记的检查，它将启用网格编辑**

# gnuplot - 所有点 y 值在 gnuplot 上未定义

> ID：10815033
> 
> 赞同：13
> 
> 时间：2012-05-30T11:06:56.333
> 
> 标签：gnuplot

为什么当我制作这个 gnuplot 代码时它可以工作：

```
set terminal postscript enhanced color
set output '../figs/ins_local.ps'

set title "Result"

set logscale y
set xrange [50:100]
set xtics 5

#set xlabel "Insertion"
#set ylabel "Time (in microseconds) "

plot sin(x) 
```

但是当我改变`plot sin(x)`时：

```
plot "../myFile.final" with lines title "Somethings" lw 3  linecolor rgb "#29CC6A" 
```

我有这个错误：

```
plot "../myFile.final" with lines title "Somethings" lw 3  linecolor rgb "#29CC6A"
                                                                                              ^
"local.gnuplot", line 16: all points y value undefined 
```

我只有一栏！它代表`yrange`。`xrange`由行数表示！我的数据点示例：

```
125456
130000
150000 
```

x 的第一个点是 1，x 的第二个点是 2，最后一个是 3。现在我想用 50、55、60 的比例来表示这个 1、2、3！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T12:08:29.843

这里有一些可能出错的地方——没有看到你的数据文件就不可能知道。我能想到的一对是：

第 2 列中的所有数据点都小于或等于 0（您收到错误消息，因为 log(0) 未定义）

您在第一列中没有 50 到 100 之间的任何点。在这种情况下，您的所有数据点都被剪裁出绘图范围，因为`set xrange [50:100]`

您的数据文件只有 1 列...在这种情况下，gnuplot 看不到任何 y 值。（更改为`plot '../myFile.final' u 1 ...`）

**编辑**

好的，既然我看到了你的数据文件，问题肯定是你有`set xrange [50:60]`，但你的数据的 xrange 只从 0 运行到 2（gnuplot 从 0 开始数据文件索引）。解决此问题的最简单方法是使用伪列 0。伪列 0 只是从 0 开始的行号（如果你这样做，这就是 gnuplot 在 x 轴上绘制的内容`plot 'blah.txt' using 1`。这是一个示例：

```
scale_x(x,xmin,xmax,datamin,datamax)=xmin+(xmax-xmin)/(datamax-datamin)*x
plot 'test.dat' using (scale_x($0,50,60,0,2)):1 w lines title "scaled xrange" 
```

请注意，如果您不知道 using 规范是如何工作的，则以 $ 开头的数字是对该整列的元素操作。例如：

```
plot 'foo.bar' using 1:($2+$3) 
```

将绘制第一列加上数据文件每一行中第二个和第三个元素的总和。

此解决方案假定您知道数据文件中 x 的最大值（在这种情况下，即 3-1=2 -- [三点，0,1,2]）。如果您不知道数据点的数量，您可以使用 shell 魔术或直接从 gnuplot 获得。第一种方法更容易一些，虽然不那么便携。我将同时显示：

```
XMAX=`wc -l datafile | awk '{print $1-1}'` 
scale_x(x,xmin,xmax,datamin,datamax)=xmin+(xmax-xmin)/(datamax-datamin)*x
plot 'test.dat' using (scale_x($0,50,60,0,XMAX)):1 w lines title "scaled xrange" 
```

第二种方式，我们需要对数据进行两次传递，让 gnuplot 获取最大值：

```
set term push  #save terminal settings
set term unknown #use unknown terminal -- doesn't actually make a plot, only collects stats
plot 'test.dat' u 0:1 #collect stats
set term pop   #restore terminal settings
XMIN=GPVAL_X_MIN #should be 0, set during our first plot command
XMAX=GPVAL_X_MAX #should be number of lines-1, collected during first plot command
scale_x(x,xmin,xmax,datamin,datamax)=xmin+(xmax-xmin)/(datamax-datamin)*x
plot 'test.dat' using (scale_x($0,50,60,XMIN,XMAX)):1 w lines title "scaled xrange" 
```

我想为了完整起见，我应该说这在 gnuplot 4.6 中也更容易做到（我现在没有安装它，所以下一部分只是来自我对文档的理解）：

```
stats 'test.dat' using 0:1 name "test_stats"
#at this point, your xmin/xmax are stored in the variables "test_stats_x_min"/max
XMIN=test_stats_x_min
XMAX=test_stats_x_max
scale_x(x,xmin,xmax,datamin,datamax)=xmin+(xmax-xmin)/(datamax-datamin)*x
plot 'test.dat' using (scale_x($0,50,60,XMIN,XMAX)):1 w lines title "scaled xrange" 
```

Gnuplot 4.6 看起来很酷。我可能很快就会开始玩它。

# java - 调用 setVisible(true) 时组件不会显示

> ID：10815035
> 
> 赞同：1
> 
> 时间：2012-05-30T11:07:08.353
> 
> 标签：java, swing

现在我无法弄清楚是什么导致了这个问题。

我写了一个小的（也许很傻！）字典程序，它加载一个序列化的哈希映射对象（其中存储了词义对）并显示用户输入的词的含义。

最初我让它完全加载对象然后显示 GUI，但加载对象需要 3 秒，所以我认为显示 gui 并让用户输入单词会更好，同时对象单独加载线程，如果用户更快地键入单词（即在加载对象之前），则会出现一个对话框，显示“正在加载..”，并且在加载对象并向用户显示含义时关闭。

问题是 - 只出现对话框，消息 - “正在加载......”没有出现，好像它是透明的......

继承人的代码：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.io.*;

class Dict implements Runnable {

    HashMap hm = null;
    JTextField ji;
    JTextArea jo;
    JFrame jfobj;

    public void run() {
        try {
            FileInputStream fis = new FileInputStream("serialhm");
            ObjectInputStream ois = new ObjectInputStream(fis);
            Thread.currentThread().sleep(3000);// on an average it takes 3 secs to read the object, i made it sleep because the serialhm file i provided has only one word - "break"
            hm = (HashMap) ois.readObject();
            ois.close();
        } catch (Exception e) {

            System.exit(0);
        }
    }

    public void print_meaning() {
        final JDialog dial = new JDialog();
        dial.setEnabled(true);
        dial.setModal(false);
        dial.setSize(200, 200);
        dial.setLocationRelativeTo(null);
        dial.getContentPane().add(new JLabel("loading......please wait"));
        dial.pack();
        if (hm == null) {

            dial.setVisible(true);//is not showing the message,only the dialog box is shown
            while (true) {
                if (hm != null) {
                    dial.setVisible(false);
                    dial.dispose();
                    break;
                }
            }
        }

        String word = ji.getText();
        String meaning = "";
        ArrayList al1 = (ArrayList) hm.get(word);
        if (al1 == null) {
            JOptionPane.showMessageDialog(jfobj, "word unavailable");
            ji.setText("");
            jo.setText("");

        } else {
            for (int i = 0; i < al1.size(); i++) {
                meaning = meaning + "\n" + (String) al1.get(i);
            }

            jo.setText(meaning + "\n");
            ji.selectAll();
        }

    }

    public void gui() {
        jfobj = new JFrame();
        Font font1 = new Font(Font.SERIF, Font.PLAIN, 17);

        jo = new JTextArea(15, 30);
        jo.setEditable(false);
        jo.setFont(font1);
        jo.setLineWrap(true);
        jo.setWrapStyleWord(true);

        JScrollPane scrollPane = new JScrollPane(jo, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);

        ji = new JTextField(30);
        ji.setFont(font1);

        GridBagLayout gridBag = new GridBagLayout();
        Container contentPane = jfobj.getContentPane();
        contentPane.setLayout(gridBag);

        GridBagConstraints gridCons1 = new GridBagConstraints();
        gridCons1.gridwidth = GridBagConstraints.REMAINDER;
        gridCons1.fill = GridBagConstraints.HORIZONTAL;
        contentPane.add(ji, gridCons1);

        GridBagConstraints gridCons2 = new GridBagConstraints();
        gridCons2.weightx = 1.0;
        gridCons2.weighty = 1.0;
        contentPane.add(scrollPane, gridCons2);

        ji.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                print_meaning();
            }
        });
        jfobj.addWindowListener(new WindowAdapter() {

            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        jfobj.pack();
        jfobj.setVisible(true);
    }

    public static void main(String[] args) throws Exception {

        Dict dobj = new Dict();
        Thread t = new Thread(dobj);
        t.start();
        dobj.gui();

    }
} 
```

这是具有序列化哈希图对象的文件（'serialhm'）： [http ://www.mediafire.com/?rc5nda0qs8891xv](http://www.mediafire.com/?rc5nda0qs8891xv)

为简单起见，它只是一个单字哈希图，而这本词典中唯一的词是 - “break”

另外，请原谅我糟糕的设计。谢谢。

如果有人需要完整的 hashmap 对象序列化文件，我也会上传，它有 203000 字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:14:51.540

好的，将`while(true)`块移动到一个新线程并进行细微更改，现在它很好，完全按照我的意愿运行。

# java - 使用 Netty 编写的有效方法

> ID：10815036
> 
> 赞同：1
> 
> 时间：2012-05-30T11:07:10.060
> 
> 标签：java, netty

当我将对象写入网络时，Netty 是否为我提供了避免缓冲区复制的任何方法？在`Channel.write(Object)`我的理解中，这个对象是通过编码器（返回 ChannelBuffer 副本）。这基本上意味着对于每条消息，我最终都会创建一个缓冲区副本，最终创建大量短暂的缓冲区对象

Netty 可以为我提供一个可重用的 ChannelBuffer，我用字节填充它并将这些字节直接写入网络吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:52:28.180

Netty 已经回收了缓冲区，你不需要关心这个。

此外，编码器/解码器只是您自己编写的，Netty 只能处理**ChannelBuffer**对象，如果您将 ChannelBuffer 写入您的通道，则它周围没有魔法，它的内容直接写入输出。

您可以（并且应该）做的是创建您需要的确切大小的缓冲区，以避免在向缓冲区加载数据时分配动态缓冲区。

# jstl - 如何仅使用 JSTL 以“MMM-YY”格式获取当前日期

> ID：10815038
> 
> 赞同：-2
> 
> 时间：2012-05-30T11:07:17.143
> 
> 标签：jstl

我想要一个包含上述指定格式的当前日期的 var，请使用亲切的帮助。

从以前的问题中找到解决方案，我也会避免使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:27:31.663

```
<fmt:formatDate value="${currentDate}" pattern="MMM-yy" var="currentDateAsString"/> 
```

请参阅[http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html)。

# android - Android - 如何发送崩溃报告？

> ID：10815049
> 
> 赞同：14
> 
> 时间：2012-05-30T11:07:50.187
> 
> 标签：android, google-play, crash-reports

似乎从 Android 2.2 开始，有一个发送崩溃报告的新功能，如链接中所述：

*   [http://www.androidcentral.com/new-android-app-crash-report-tool-already-and-running](http://www.androidcentral.com/new-android-app-crash-report-tool-already-and-running)
*   [http://android-developers.blogspot.com/2010/05/google-feedback-for-android.html](http://android-developers.blogspot.com/2010/05/google-feedback-for-android.html)
*   [http://developer.android.com/sdk/android-2.2-highlights.html](http://developer.android.com/sdk/android-2.2-highlights.html)
*   [http://www.youtube.com/watch?v=o8unC9bA4O8](http://www.youtube.com/watch?v=o8unC9bA4O8)

如何使用此功能？从市场（又名 Google Play 商店）下载的每个应用程序都是自动的吗？在哪里可以找到有关此功能的更多信息？

此外，是否可以自定义发送的内容，也许通过使用 DefaultExceptionHandler，并放入我们自己的崩溃描述？

**注意：**我知道有很多用于发送崩溃报告的工具（如[ACRA](http://code.google.com/p/acra/)），但我希望先检查是否可以使用已经给出的内容。

**编辑：**我已经成功修改了进一步传递的异常，希望这也会改变发送到谷歌开发者网站的报告。

这是与此相关的示例代码：

```
private static class DefaultExceptionHandler implements java.lang.Thread.UncaughtExceptionHandler
...
@Override
public void uncaughtException(Thread t, Throwable e)
{
  final StackTraceElement[] exceptionStackTrace = e.getStackTrace();
  Exception exception = new Exception("my new exception!", e);
  final StackTraceElement[] newExceptionStackTrace = new StackTraceElement[exceptionStackTrace.length + 1];
  System.arraycopy(exceptionStackTrace, 0, newExceptionStackTrace, 1, exceptionStackTrace.length);
  newExceptionStackTrace[0] = new StackTraceElement("TEST CLASS", "TEST METHOD", "TEST FILE", 0);
  exception.setStackTrace(newExceptionStackTrace);
_defaultUEH.uncaughtException(t, exception); //this will hopefully call the default handling of the exception for reporting
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:20:44.487

您所描述的听起来像是内置功能，据我所知，您无法自定义此功能。数据将发送到上传应用程序的 googlePlay 开发帐户。我见过 Sense 或 Custom Roms 进行的自定义。获取您自己的日志的唯一方法是使用`DefaultErrorHandler`您提到的。作为一个好习惯，我会检查你是否可以自己捕获错误（也许将它记录在某个地方）。如果不是，我会重新抛出这个错误，让用户有机会给你提示，他做了什么

# javascript - drupal网站中的谷歌分析：事件不起作用

> ID：10815050
> 
> 赞同：1
> 
> 时间：2012-05-30T11:07:53.180
> 
> 标签：javascript, drupal, google-analytics

我有一个带有谷歌分析模块的 drupal 6 站点。除非我尝试使用以下代码跟踪特定事件，否则所有跟踪都已正确设置：

```
<a href="xxxx/xxxx" onclick="_gaq.push(['_trackEvent', 'Main Clicks', 'title', ' nid 4204']);">xxxxxxx</a> 
```

我查看了这个旧链接： [http](http://www.johnandcailin.com/blog/cailin/drupal-google-analytics-and-event-tracking) ://www.johnandcailin.com/blog/cailin/drupal-google-analytics-and-event-tracking 但我检查了一下，我的 GA 代码在前面

# date - 如何将“今天”和“昨天”等相对日期转换为 XQuery 日期对象？

> ID：10815054
> 
> 赞同：5
> 
> 时间：2012-05-30T11:08:06.190
> 
> 标签：date, xquery

XQuery 有一组用于日期转换的有用函数。但是如何将“今天”和“昨天”等相对日期转换为实际日期？

例如，“今天，17:33”应转换为“2012-05-30”，“昨天，22:13”应转换为“2012-05-29”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T11:55:05.343

# 1.解析日期字符串

解析日期字符串。我提供了一个小函数，它拆分表示日期的单词并解析它。我为日期添加了一些更方便的名称，但如果需要，您可以轻松添加更多名称，请注意我转换为小写！它使用[XQuery 日期和时间函数](http://www.xqueryfunctions.com/xq/c0002.html)来计算匹配日期。

```
declare function local:from-relative-date($string as xs:string) as xs:date {
    switch (lower-case(substring-before($string, ",")))
        case "today"                return current-date()
        case "yesterday"            return current-date() - xs:dayTimeDuration('P1D')
        case "day before yesterday" return current-date() - 2 * xs:dayTimeDuration('P1D')       
        case "tomorrow"             return current-date() + xs:dayTimeDuration('P1D')       
        case "day after tomorrow"   return current-date() + 2 * xs:dayTimeDuration('P1D')       
        default                     return error(xs:QName("XPTY0004"), "Unknown Date")
}; 
```

# 2.格式化日期

现在使用 XQuery 3.0 函数[`format-date(...)`](http://www.w3.org/TR/xpath-functions-30/#func-format-date)（我希望您的 XQuery 引擎支持它，我在本示例中使用的 BaseX 支持）来格式化您需要的日期字符串：

```
format-date(local:from-relative-date("Yesterday, 22:13"), "[Y]-[M00]-[D00]") 
```

如果没有，您将不得不使用[`year-from-date(...)`](http://www.xqueryfunctions.com/xq/fn_year-from-date.html)并根据[月份](http://www.xqueryfunctions.com/xq/fn_month-from-date.html)和[日期](http://www.xqueryfunctions.com/xq/fn_day-from-date.html)的功能，使用一些数字格式并自己连接。

# java - Java EE 6 - SEAM + EJB 集成/3 层架构

> ID：10815058
> 
> 赞同：2
> 
> 时间：2012-05-30T11:08:15.260
> 
> 标签：java, jakarta-ee, n-tier-architecture, seam3

我一直在使用 JSF 2.1 和 EJB 3.1。到目前为止，我的应用程序有这样的流程：

1.  Facelets 模板
2.  @ManagedBean 连接到 .xhtml 页面
3.  @Stateless EJB bean，使用 EntityManager 从数据库等获取实体
4.  EJB bean 通过@EJB 注入到@ManagedBean

所以基本上对于 1 个实体类，我有 2 个类和 1 个 xhtml 页面。

现在，我正在使用 SEAM 3（焊料、面、安全和验证模块）开始新项目。如何简化申请流程？我可以在 JSF bean 中使用 EntityManager 并获取所有 EJB 功能，如事务等吗？如何组织我的项目（实体类、bean 类、服务类）？感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:47:11.590

> 如何简化申请流程？

从您所写的内容来看，我认为您没有一些复杂的架构。

> 我可以在 JSF bean 中使用 EntityManager 并获取所有 EJB 功能，如事务等吗？

如果这是可能的，你为什么要这样做？

> 如何组织我的项目（实体类、bean 类、服务类）？

我会说你的应用程序组织不应该改变。

# vb.net - 声明一个字节变量

> ID：10815060
> 
> 赞同：1
> 
> 时间：2012-05-30T11:08:18.233
> 
> 标签：vb.net, declaration

我们可以像这样声明一个字节变量，十六进制'88'

```
Dim bytes = New Byte() { &H88 } 
```

我的情况， 88 被分配给一个变量，十六进制值

如何用变量十六进制值声明字节？

```
Dim bytes = New Byte() { &H & hexvalue } 
```

以上抛出语法错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:41:10.850

&H 仅用于通过其十六进制值定义常量，因此 &H88 实际上是 136。

如果要将十六进制输入转换为字节，则可以使用它（ Long 和 Int 也支持 Parse，因此它们也是可行的）：

```
Dim q( ) As Byte = New Byte( ){ Byte.Parse( hexvalue, System.Globalization.NumberStyles.HexNumber ) } 
```

如果你这样做，你甚至不需要领先的 &h 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:56:58.613

`hexvalue`如果变量（在您的示例中）是一个字符串，那么 Kogitsune 的答案是一个非常好的答案。但是，如果`hexvalue`是数字类型（`Integer`、`Long`等），您可以简单地将值转换为 a `Byte`with `CType`。例如：

```
Dim bytes = New Byte() { CType(hexvalue, Byte) } 
```

# html - 在容器底部定位浮动跨度

> ID：10815062
> 
> 赞同：0
> 
> 时间：2012-05-30T11:08:22.120
> 
> 标签：html, css

如何将 Span 定位在其容器的底部？

到目前为止我所拥有的：http: [//jsfiddle.net/wRbax/2/](http://jsfiddle.net/wRbax/2/)
我希望`.box`始终处于底部`.td`

**CSS**

```
.td {
    vertical-align: top;
    color: white;
    border: 1px solid black;
}

.value {
    padding: 2px;
    text-align: center;
    background: blue;
    float: left;
}

.box {;
    padding: 2px;
    background: red;
} 
```

**HTML**

```
<table>
    <tr>
        <td class="td">
            <span class="value">Value 1</span>
            <span class="box">X</span>
        </td>
        <td class="td">
            <span class="value">Value<br>2</span>
            <span class="box">X</span>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:34:23.637

您还可以将以下规则添加到 html 中的框类中：-

显示：块；

[http://jsfiddle.net/LMgRa/](http://jsfiddle.net/LMgRa/)

但如前所述，您可以通过使用 div 来实现相同的目的。马特

更新：试试这个：- [http://jsfiddle.net/LMgRa/1/](http://jsfiddle.net/LMgRa/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:23:37.247

看到这个工作示例

[http://jsfiddle.net/wRbax/19/](http://jsfiddle.net/wRbax/19/)

用 div 替换 span

# sql - 减去两个 SELECT 语句以产生一个结果？

> ID：10815063
> 
> 赞同：1
> 
> 时间：2012-05-30T11:08:23.697
> 
> 标签：sql, sql-server

我确实找到了这篇文章：[如何从两个选择语句中减去值](https://stackoverflow.com/questions/2611174/how-do-i-subtract-values-from-two-select-statements)

但我无法让它在 SQL-Server 2008 上运行。

我有两个基本的 SELECT 语句。没有 GROUP BY 或任何东西，只有一个 SELECT、FROM 和 WHERE。

我想从另一个中减去这些 SELECT 中的一个。两者都返回一行和一列。

有人可以帮忙吗？

```
SELECT 
    ((SELECT Field1 AS BaseBase FROM Table1
        WHERE Field2 = 'something' 
        AND Field3 = 
           (SELECT Field4 FROM SEL_Function('something','something')) as tab1)
      -     
    ((SELECT Field5 FROM SEL_Function('something','something') as tab2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:28:11.417

好吧，我不认为交叉应用是必要的小提琴不会允许功能，但请查看这个小提琴。您将希望用该函数替换同名的表。我认为您被别名和括号不匹配的组合所困扰。

[http://sqlfiddle.com/#!3/dc72f/13](http://sqlfiddle.com/#!3/dc72f/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:14:13.157

在提供的链接中有

```
select v1.Value1 - v2.Value2 from ((bla) AS v1 CROSS JOIN (blubb) AS v2 
```

我会翻译成这个（在你的情况下）

```
SELECT tab1.BaseBase - tab2.Minus FROM 
((SELECT Field1 AS BaseBase FROM Table1
    WHERE Field2 = 'something' 
    AND Field3 = 
       (SELECT Field4 FROM SEL_Function('something','something')) as tab1
CROSS JOIN 
(SELECT Field5 AS Minus FROM SEL_Function('something','something')) as tab2) 
```

如评论中所述，建议指定受影响的表。但是，我认为它可能会起作用（我手头没有测试系统 :( ）也没有那些明确的定义，因为名称是唯一的。

# asp.net - ASP.NET MVC 3 Razor 是否输出缓冲区视图？

> ID：10815064
> 
> 赞同：3
> 
> 时间：2012-05-26T21:48:49.163
> 
> 标签：asp.net, asp.net-mvc-3, razor

在 ASP.NET MVC 3 Razor 中，您可以指定页面标题：

```
@{
    ViewBag.Title = "Title";
} 
```

现在，假设我们有一个布局页面：

```
<title>@ViewBag.Title | Website</title> 
```

当 ASP 渲染一个页面时，它需要输出一些布局页面 HTML，然后是视图 HTML，然后是布局页面的其余部分 HTML。

为了输出布局页面 HTML 的前半部分，ASP.NET 需要知道`ViewBag.title`视图中赋予的值。因此，ASP.NET 需要解析视图中的 Razor 代码。但是，ASP.NET 还不能输出视图的 HTML 代码，因为它仍在输出布局页面的 HTML 代码。那么 ASP.NET 是否将视图的 HTML 输出存储在缓冲区中？这似乎是一种不好的做法，但我想不出任何其他方法可以有效地将视图的标题放入布局页面输出中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T11:46:42.723

> 当 ASP 渲染一个页面时，它需要输出一些布局页面 HTML，然后是视图 HTML，然后是布局页面的其余部分 HTML。

这就是呈现 Web 表单的方式。但是，由于您描述的问题（以及其他一些问题），mvc 会由内而外呈现。

所以内部视图首先渲染到一个临时缓冲区。然后是布局页面。这种渲染一直持续到到达最外面的布局页面，然后将缓冲区写入响应流并刷新。

这在 90% 的情况下（估计）不会导致任何问题，但是如果您需要及早刷新响应，这将导致头痛。

仅供参考，可以通过以下方式访问视图的缓冲区：

```
HtmlHelper.ViewContext.Writer 
```

所以要回答你的问题，是的 - 它确实缓冲视图。

# android - 列表视图多项选择

> ID：10815067
> 
> 赞同：0
> 
> 时间：2012-05-30T11:08:36.747
> 
> 标签：android, listview

我使用具有多项选择的列表视图，并覆盖了里面的搜索方法。我对项目有问题，因为在滚动期间项目的位置发生了变化。我认为问题来自布局，因为当布局仅包含列表视图时，它可以正常工作。但是，当我使用下面的布局时，滚动期间检查的项目的位置会发生变化。

有人可以帮忙吗？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/button1" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <ListView
        android:id="@+id/MyListView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:08:20.583

您需要在适配器中设置一个对象来跟踪复选框的状态。您还没有显示您的适配器代码，所以我将从我的一些代码中提取一个示例（这是使用光标，它可以适应 ArrayAdapter）

在自定义适配器中设置一个数组：

```
private Cursor c; 
public static int[] checked; 
```

在您的构造函数中，将光标设置为本地 var 并调用一个方法：

```
CursorAdapter_EditText.c = c; 
initializeChecked(); 
```

方法（使用 0 = 未选中）：

```
public static void initializeChecked() { 
    checked = new int[c.getCount()]; 
    int i = 0; 
    while (i < c.getCount()) { 
        checked[i] = 0; 
        i++; 
    } 
} 
```

在您`getView`使用数组来设置复选框状态：

```
checkBox = (CheckBox) view.findViewById(R.id.CheckBox); 
if (checked(position) == 0) { 
    checkBox.setChecked(false); 
} else { 
    checkBox.setChecked(true); 
} 
```

当您更改复选框的状态时，您还需要添加代码`checkBox.setOnCheckedChangeListener`以更改数组中的状态。

# android - 丰富的 UI 工具包，这个应用程序是使用自定义绘图表技术还是标准表 [android]

> ID：10815072
> 
> 赞同：0
> 
> 时间：2012-05-30T11:08:51.613
> 
> 标签：android

我是 Android 开源平台编程的新手，最近创建了一个显示苦盏国际机场航班信息的应用程序。它使用 http 请求从服务器获取 XML 数据并将其显示在列表中。

我想问你关于 Google play 上的一款应用程序的外观和感觉，它具有漂亮丰富的 UI 外观。您可以通过以下 URL [https://play.google.com/store/apps/details?id=ru.cybertek.airport.timetable](https://play.google.com/store/apps/details?id=ru.cybertek.airport.timetable) 或此处[http://flights-info.ru/ 访问](http://flights-info.ru/)Google play 上的此应用程序 和截图也在这里 ![在此处输入图像描述](../Images/a25525e202c19f61f92e1a84a0eef242.png)

所以我的问题是：

*   该应用程序是否使用 Canvas 在表格中绘制飞行？
*   他们使用了哪些字体？
*   是否可以使用表格等标准组件创建此飞行表？
*   我需要学习 Android 图形编程来创建这样的应用程序吗？？？

我的应用程序看起来像这样 ![在此处输入图像描述](../Images/c1bfaf6c7330149b1f9f28a347452305.png)

另外，我想知道是否有任何丰富的 UI 框架、Android 工具包可以简化应用程序开发过程？？？欢迎链接资源！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:20:19.247

关于你的问题：

*该应用程序是否使用 Canvas 在表格中绘制飞行？*
这只能由作者来回答（也许逆向工程可以回答这个问题，但我不确定）。

*他们使用了哪些字体？*
这看起来像自定义字体。您最好在专门为设计师设计的网站上问这个问题，或者使用字体识别，比如[这个](http://www.myfonts.com/WhatTheFont/)。要在 Android 结帐上使用自定义字体，请执行以下操作：[https ://stackoverflow.com/a/3203719/200272](https://stackoverflow.com/a/3203719/200272)

*是否可以使用表格等标准组件创建此飞行表？*
我认为可以做到。

*我需要学习 Android 图形编程来创建这样的应用程序吗？？？* 如果通过图形您的意思是“OpenGL”，那么我会说不。无需使用 OpenGL。

*另外，我想知道是否有任何丰富的 UI 框架、Android 工具包可以简化应用程序开发过程？？？*[您可以在这里](https://github.com/commonsguy)
找到几个自定义控件。如果您想开发移动 Web 应用程序，有许多框架（Jquery mobile、Sencha、PhoneGap 等）。

# php - 如何显示从 PHP 到 jQuery 的参数？

> ID：10815074
> 
> 赞同：1
> 
> 时间：2012-05-30T11:08:54.220
> 
> 标签：php, jquery, ajax

在 jquery 代码中使用`success: function(data)`，当我从 PHP 中检索数据时，我无法`str"=>$dataString`在 jQuery 代码中显示参数。

```
success: function(data) {
    alert(data[0]);
    $("#display").html(data[str]);
} 
```

ajax.php：

```
<?php
  if (isset($_POST['dataString'])) {
    $dataString=$_POST['dataString'];
    echo (array("str"=>$dataString));
  } else {$_POST['dataString']="";}
?>

    <html>
    <head>
    <link rel="stylesheet" type="text/css" href="./public/stylesheets/stylesheets.css"  >
    <script type="text/javascript" src="./public/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" >
    $(document).ready(function() {
      var dataString;
      $("#valueforajax").blur(function() {
        dataString = $.trim(this.value);
        if (dataString){
        // until here it works
          $.ajax({
            type: "POST",
            dataType: 'html',
            url: "ajax.php",
            data: 'dataString=' + dataString,
            //{"dataString": dataString}
            cache: false,
            success: function(data) {
              alert(data[0]);
              $("#display").html(data[str]);
            }
          });
        }
      });
    });
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
  <title>mange panel</title>
  </head>
  <body>
    <br>Type value for test in ajax<input id="valueforajax" type=text name='ajaxtest'>
    <div id="display">show</div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:13:29.137

如果我了解您想将 php 数组返回给 Jquery 并在那里使用它？

如果是这样 json_encode php 中的数组，然后将其返回给 javascript，那么您应该可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:25:22.137

ajax.php

```
<?php
  if (isset($_POST['dataString'])) {
     echo $_POST['dataString'];
     exit(0);  //this will supress html output
  }
  else {
   //do nothing
  }
?> 
```

* * *

```
 $.ajax({
    type: "POST",
    dataType: 'html',
    url: "ajax.php",
    data: 'dataString=' + dataString, //{"dataString": dataString}
    cache: false,
    success: function(data)
    {
       alert(data);
       $("#display").html(data);
       }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:21:51.847

我相信来自服务器的响应应该是一个 json 字符串或者只是一个字符串。

```
<?php
   if (isset($_POST['dataString'])) {
     $dataString=$_POST['dataString'];
     echo json_encode(array("str"=>$dataString));
     exit(0);
    }
     else {
        echo json_encode(array("str"=>""));
        exit(0); //you don't want rest of html in respose too.
    }

?> 
```

并在成功

```
var obj = jQuery.parseJSON(data);
alert( obj.str); 
```

# php - 无法使用 SwiftMailer 发送电子邮件

> ID：10815076
> 
> 赞同：0
> 
> 时间：2012-05-30T11:09:08.330
> 
> 标签：php, ubuntu, swiftmailer

我正在尝试使用 SwiftMailer 使用以下 php 代码发送电子邮件。

```
$transport = Swift_SmtpTransport::newInstance('smtp.domain.com', 25);
$transport->setUsername(getenv('USER_NAME'));
$transport->setPassword(getenv('PASSWORD'));
$swift = Swift_Mailer::newInstance($transport);

$mail = Swift_Message::newInstance();
$mail->setSubject('Hello');
$mail->setFrom(array('sender@domain.com' => 'Sender Name' ));
$mail->setTo(array('receiver@domain.com' => 'Receiver Name'));
$mail->setBody('some message');

$result = $swift->send($mail, $failures);

if ($result)
{
    echo "Message successfully sent!";
}
else
{
    echo "There was an error:\n";
    print_r($failures);
} 
```

以下错误即将到来......

> 有一个错误：
> 
> 数组（ [0] => receiver@domain.com ）

我正在使用 Mandrill 作为 SMTP ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:27:21.707

确保您使用真实的电子邮件地址，而不是 receiver@domain.com 和 sender@domain.com。

另一件事 - 您可能需要设置 SMTP 服务器、用户名和密码才能从您的服务器发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:10:13.173

如果变量名还不存在，它将被初始化为一个空数组，然后将失败添加到该数组中。如果变量已经存在，它将被类型转换为一个数组，并且失败将被添加到其中。

# objective-c - NSTable 和 NSMutableArray 排序

> ID：10815077
> 
> 赞同：4
> 
> 时间：2012-05-30T11:09:08.460
> 
> 标签：objective-c, cocoa, sorting, nsmutablearray, nssortdescriptor

我有一个要排序的 NSTableView。数据源是一个 NSMutableArray，其中包含自定义类的实例。

```
-(void)tableView:(NSTableView *)tableView sortDescriptorsDidChange: (NSArray *)oldDescriptors 
```

我正在使用上述内容，以便我可以跟踪用户何时按下表格的标题。我正在使用以下方法进行排序：

```
NSSortDescriptor *sortDescriptor;
sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"make" ascending:bool_asc_desc] autorelease];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray;
sortedArray = [ads_printers_array sortedArrayUsingDescriptors:sortDescriptors]; 
```

我想知道的是如何传递被按下的表格列？这将允许我更改 initWithKey:@"make" （使用 if 语句），以便我可以根据单击的标题进行排序。

谢谢。

PS我尝试了以下方法：

```
if ([ads_rdp_driver_table selectedColumn] == tc_make) 
```

ads_rdp_driver_table 是我的 NSTableView，tc_make 是我定义的 NSTableColumn。但是，我收到此错误：

ISO C++ 禁止指针和整数之间的比较

如果我能找出错误，我想这可能会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:24:04.203

NSTableView的`selectedColumn`方法返回所选列的索引（不是指向它的指针），这就是您收到编译错误的原因。要获得实际的列，请尝试这样的事情（代码我包含错误，我逐字输入）：

```
NSTableColumn * selectedColumn = (NSTableColumn *)[[tableView tableColumns] objectAtIndex: [tableView selectedColumn]];
NSLog(@"Column identifier: %@", [selectedColumn identifier]); 
```

# c# - 将 48 添加到字符串编号

> ID：10815085
> 
> 赞同：2
> 
> 时间：2012-05-30T11:09:35.970
> 
> 标签：c#

我在 C# 中有一个这样的字符串：

```
string only_number; 
```

我给它赋值=`40`

当我检查时`only_number[0]`，我得到`52`
当我检查时`only_number[1]`，我得到`48`

为什么将 48 添加到当前位置的字符？请建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T11:11:09.007

字符串基本上是`char[]`. 所以你看到的是字符 4 和 0 的 ASCII 值。

**证明： 4 和 0 之间的差异 = 52 和 48 之间的差异。**

因为它是一个字符串，所以你没有分配它 40。而是你分配了它`"40"`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T11:11:43.477

你看到的是 '4' 和 '0' 的 ASCII 码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T11:22:27.957

这不是为角色添加 48。您看到的是字符代码，数字字符在 Unicode 中从 48 开始：

```
'0' = 48
'1' = 49
'2' = 50
'3' = 51
'4' = 52
'5' = 53
'6' = 54
'7' = 55
'8' = 56
'9' = 57 
```

字符串是一系列`char`值，每个`char`值都是一个 16 位整数，基本上代表 Unicode 字符集中的一个代码点。

当您从中读取时，`only_number[0]`您会得到一个`char`值，它`'4'`的字符代码是 52。所以，您所做的是从字符串中读取一个字符，然后在显示之前将其转换为整数。

所以：

```
char c = only_number[0];
Console.WriteLine(c); // displays 4

int n = (int)only_number[0]; // cast to integer
Console.WriteLine(n); // displays 52

int m = only_number[0]; // the cast is not needed, but the value is cast anyway
Console.WriteLine(m); // displays 52 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T11:11:47.640

您正在访问此字符串，它正在为您的两个字符“4”和“0”中的每一个输出 ASCII 字符代码 - 请参见此处：

[http://www.theasciicode.com.ar/ascii-control-characters/null-character-ascii-code-0.html](http://www.theasciicode.com.ar/ascii-control-characters/null-character-ascii-code-0.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T11:13:32.180

`string`是的`array`，`chars`所以，这就是你收到这些结果的原因，它基本上显示`ASCII`'4'和'0'。

# javascript - Brightcove 视频模板LoadHandler 未触发

> ID：10815086
> 
> 赞同：3
> 
> 时间：2012-05-30T11:09:36.813
> 
> 标签：javascript, events, brightcove

好吧，我整个下午都在为 BrightCove API 苦苦挣扎，我真的不知道出了什么问题。

我遵循了 Brightcove 提供的所有内容，并为智能播放器启用了 javascript api。但是 templateLoadHandler 只是没有触发。真是让我抓狂！

这是我的代码

```
<!doctype html>
<html>
<head>
<title>Brightcove video API demo</title>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="jBrightCove.js"></script>
</head>

<body>

    <h2>Brightcove Video Cloud Demo</h2>

    <!-- Start of Brightcove Player -->

    <div style="display:none">

    </div>

    <!--
    By use of this code snippet, I agree to the Brightcove Publisher T and C 
    found at https://accounts.brightcove.com/en/terms-and-conditions/. 
    -->

    <script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

    <object id="myExperience1655503405001" class="BrightcoveExperience">
      <param name="bgcolor" value="#FFFFFF" />
      <param name="width" value="480" />
      <param name="height" value="270" />
      <param name="playerID" value="1655260200001" />
      <param name="playerKey" value="AQ~~,AAABgXJq-HE~,N7Kwgwyc9ubOnOKgNwEM8Jm-tJbp_nzt" />
      <param name="isVid" value="true" />
      <param name="isUI" value="true" />
      <param name="dynamicStreaming" value="true" />

      <param name="@videoPlayer" value="ref:spring" />
      <param name="includeAPI" value="true" />
      <param name="templateLoadHandler" value="myTemplateLoaded" />
    </object>

    <script type="text/javascript">
    // this piece of code is from BrightCove template

    var player;

    var modVP;
    var modExp;
    var modCon;
    ////

     //
    function myTemplateLoaded(experienceID) {
        alert("123");
        player = brightcove.api.getExperience(experienceID);
        modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
        modExp = player.getModule(brightcove.api.modules.APIModules.EXPERIENCE);
        modCon = player.getModule(brightcove.api.modules.APIModules.CONTENT);

    }
</script>

</body>
</html> 
```

如果事件被触发，则会显示警报。但从来没有......任何人都知道它为什么不工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:58:12.110

我在没有 jquery 和 jBrightcove.js 的情况下运行了您的代码（因为我没有它们）。它工作得很好。如果它对您不起作用，我猜想 jBrightcove.js 脚本中的某些内容与您的代码之间存在冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T12:22:28.997

您是否尝试过将处理程序移到 HTML 代码上方？它对我有用。另外，我必须将“crossdomain.xml”文件添加到我的 Web 服务器根目录才能正常工作。您可能不需要它，但包括它以防万一。

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>

<!-- Read this: www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html -->

<!-- Most restrictive policy: -->
    <allow-access-from domain="admin.brightcove.com"/>

<!-- Least restrictive policy: -->
<!--
    <site-control permitted-cross-domain-policies="all"/>
    <allow-access-from domain="*" to-ports="*" secure="false"/>
    <allow-http-request-headers-from domain="*" headers="*" secure="false"/>
-->
<!--
  If you host a crossdomain.xml file with allow-access-from domain="*"
  and don’t understand all of the points described here, you probably
  have a nasty security vulnerability. ~ simon willison
-->

</cross-domain-policy> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T19:39:29.613

在这种情况下，亚历克斯似乎有错误的帐户类型。我不是这种情况。我在 Brightcove 论坛上发现**代码需要从网络服务器运行**。在我将网站上的代码添加到我的本地 XAMPP 安装后，它就像宣传的那样工作。这是我找到信息的网址：

[http://forum.brightcove.com/t5/Media-APIs/templateLoadHandler-not-fired/td-p/19585](http://forum.brightcove.com/t5/Media-APIs/templateLoadHandler-not-fired/td-p/19585)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T03:50:34.937

对于有同样顽固问题的后来者：[这](https://gist.github.com/bcls/7893440)是一个工作演示，把它修剪一下，看看什么对你有用。

PS，demo中缺失脚本的src应该是：[http ://docs.brightcove.com/en/scripts/secondsToTime.js](http://docs.brightcove.com/en/scripts/secondsToTime.js)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T15:12:39.867

确保在 Brightcove 中为每种播放器类型启用了 SmartPLayer API。如果不在 Brightcove 面板中更改此设置，templateLoadHandler 和 templateReadyHandler 将不会触发。

# dozer - 推土机 - 如何仅映射基类

> ID：10815087
> 
> 赞同：0
> 
> 时间：2012-05-30T11:09:40.850
> 
> 标签：dozer

我有 ClassA、ClassB、ClassC，其中：

```
ClassB extends ClassA
ClassC extends ClassA 
```

我想在我的推土机配置中只映射 ClassA 并写了这个：

```
<mapping wildcard="false">
        <class-a>ClassA</class-a>
        <class-b>ClassA</class-b>
        <field custom-converter="MyConverter">
            <a>value</a>
            <b>value</b>
        </field>
    </mapping> 
```

但是，当我执行 mapper.map(instB, instB) 时，来自 ClassA 的自定义转换器永远不会被调用。

谢谢！

# android - 回收 getView 忘记查看状态

> ID：10815090
> 
> 赞同：1
> 
> 时间：2012-05-30T11:09:44.623
> 
> 标签：android, android-listview

我的问题是我有一个带有复选框可见性的列表视图，当清除按钮被选中时复选框变得可见我正在查看复选框的状态，但问题是当复选框被选中时，它调用 onCheckChange() 并执行设置状态的工作，但是当我的视图再次将它重新设置为商店状态并再次调用我的 onCheckChanged，我不知道为什么当我向上滚动时它不会恢复我的检查状态......这是我的代码

```
public View getView(int position,View convertView,ViewGroup parent)
    {
        final int currentPosition=position;

        View row=convertView;

        if(row==null)
        {
            LayoutInflater inflater=((Activity)context).getLayoutInflater();
            row=inflater.inflate(layoutResourceId, parent,false);
            holder=new Feedbacks();
            holder.lvGuestName=(TextView)row.findViewById(R.id.guestName);
            holder.checkBox=(CheckBox)row.findViewById(R.id.clearCheck);

            row.setTag(holder);

        }       
        else
        {               
            holder=(Feedbacks)row.getTag();             
        }

        if(showCheckbox)
        {
            holder.checkBox.setVisibility(View.VISIBLE);        
        }
        else
        {
            holder.checkBox.setVisibility(View.GONE);
        }
        holder.lvGuestName.setText(feedbackList.get(position).getGuestName());          
        holder.checkBox.setChecked(checks.get(position));
        holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                if(isChecked)
                {
                    checks.put(currentPosition, true);

                }
                else
                {
                    checks.put(currentPosition, false);             
                }

            }                   

        }); 
        return row;                                     

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T22:03:47.590

尝试使用这个。

```
holder.checkBox.setTag(position);

holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            Integer currentPosition = Integer.parseInt(buttonView.getTag().toString());
            if(isChecked)
            {
                checks.put(currentPosition, true);

            }
            else
            {
                checks.put(currentPosition, false);             
            }

        }                   

    }); 
```

也不需要使用新的视图“行”。重新使用 convertView 而不是 row 并返回它。您在此处使用 View 是在浪费内存。所以只需重用convertView。

# python - Python - 处理来自 STDIN 的输入而不转换为整数（SPOJ INOUTEST）

> ID：10815091
> 
> 赞同：1
> 
> 时间：2012-05-30T11:09:58.083
> 
> 标签：python, string, io, integer

我试图解决这个[http://www.spoj.pl/problems/INOUTEST/](http://www.spoj.pl/problems/INOUTEST/)问题。

INPUT：输入的第一行包含一个整数 N (1 ≤ N ≤ 106)，表示接下来的行数。这些行中的每一行都包含两个以空格分隔的整数 a 和 b (|a|, |b| ≤ 40,000)。

输出：对于每一对 a 和 b，写一行包含 a × b 值的输出。我的代码运行到 17.03 秒：

```
import sys
import psyco
psyco.full()

def main():
    s = sys.stdin
    t = int(s.readline())
    for l in s:
        n, m = map(int, l.split())
        print n*m

if __name__ == '__main__':
    main() 
```

然后我变了

```
t = int(s.readline()) 
```

至

```
t = s.readline() 
```

一直运行到 16.62 秒。这让我意识到，我将字符串转换为整数的次数越少，我的代码运行速度就越快。最快的解决方案是大约 2.5 秒。我对此很好奇，因为我用 python 解决了 SPOJ 中的所有问题并且我正在努力学习。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:59:25.100

通过在 for 循环中不使用地图，我设法将您的时间缩短了 4 秒（降至 12.52）。相反，我只是以我能想到的最直接的方式将每一行输入转换为两个整数。

```
ab = line.split()
a = int(ab[0])
b = int(ab[1]) 
```

您的解决方案与我提出的解决方案之间的唯一其他区别是我使用`raw_input()`而不是`s.readline()`读取输入的初始行（要遵循的测试用例的数量）。由于这只执行一次，我怀疑它会对运行时间产生可衡量的影响。

# android - 创建多行 TextView

> ID：10815093
> 
> 赞同：4
> 
> 时间：2012-05-30T11:09:58.373
> 
> 标签：android, textview

我有一个`TextView`应该是 4 行长的。

```
First line text should be "YES"
Second Line ="No"
Third Line = "true"
Fourth line + "false" 
```

这怎么能用一个来完成`TextView`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-30T11:25:47.773

尝试关注**多行**TextView。

```
<TextView 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:maxLines="4" 
    android:singleLine="false" 
    android:text="YES\nNo\ntrue\nfalse" /> 
```

您可以尝试`\n`在下一行设置文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:14:39.883

试试这个：

```
<TextView android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:lines="4"
    android:text="YES\nNo\ntrue\nfalse" /> 
```

# android - Android：阻止用户启动应用程序或使用操作系统

> ID：10815094
> 
> 赞同：2
> 
> 时间：2012-05-30T11:10:08.593
> 
> 标签：android

是否有可能让应用程序在设备上运行，使其成为唯一可以运行的应用程序，并且完全阻止用户使用操作系统？点击 Home 键或 Back 按钮不会退出应用程序并允许用户访问任何内容。如果设备启动，则只有此应用程序会运行。

这在设备安装在企业中以用于销售点的情况下或设备可能在公共场所充当终端的情况下是可取的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:12:35.170

您可以通过编写应用程序来替换主屏幕（启动器）来实现您所描述的内容。从那里，您可以控制其他应用程序的运行。

Android SDK 有一个可用的 Launcher 项目，您可以从该项目开始。

小心允许某些方法运行更强大的应用程序（即使它只是启用 ADB 访问）——否则您可能会使您的设备处于需要恢复出厂设置的状态，然后才能对其进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:14:43.100

是的，您可以覆盖返回和主页按钮的行为。

启动应用程序，覆盖所有按钮，用户无法退出应用程序，邪恶，但应该在您的场景中工作。

[信息在这里](https://stackoverflow.com/questions/2162182/android-is-it-possible-to-disable-the-click-of-home-button)

# iphone - 单击表格单元 umageview 时手动更改表格单元图像视图

> ID：10815096
> 
> 赞同：0
> 
> 时间：2012-05-30T11:10:09.553
> 
> 标签：iphone, ios, ios4

我有一个问题。如果我想在单击特定表格单元格图像视图时更改表格单元格图像视图图像。这该怎么做？最初，所有行在图像视图中都具有相同的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:13:38.200

你应该使用`didSelectRowAtIndexPath:`方法。在那里，您可以添加一些检查并更改您需要的任何内容。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:20:02.427

为此，您将需要使用 didSelectRowAtIndexPath 方法。从 didSelectRowAtIndexPath 为选定的单元格设置一些标志。在将图像分配给所有单元格并为所选单元格分配不同图像时，在 cellForRowAtIndexPath 方法中检查此标志。然后，您可以从 didSelectRowAtIndexPath 本身重新加载表。

希望这可以帮助。

# clojure - Clojure 中的 reduce 是等价的吗，它的函数需要 3 个参数？

> ID：10815097
> 
> 赞同：3
> 
> 时间：2012-05-30T11:10:14.207
> 
> 标签：clojure

我想知道 Clojure 中是否有与此等效的函数：

```
(defn reduce-1 [f val coll]
  (loop [[head & tail] coll
           out val]
      (if head
        (recur tail (f out head tail))
        out))) 
```

请注意，这与通常的 'reduce 不同，因为 'tail 被传递给 'f。

我正在使用这个概念（递归地收集列表中第一个和其余列表的交互），以至于我开始怀疑是否有一个标准函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:31:48.030

你可以使用`iterate`.

```
(defn reduce-with-tail
  [f initial coll]
  (->> (seq coll)
    (iterate next)
    (take-while identity)
    (reduce (fn [initial [head & tail]] (f initial head tail)) initial))) 
```

# mongodb - MongoDB MMS-Agent 错误消息

> ID：10815101
> 
> 赞同：3
> 
> 时间：2012-05-30T11:10:45.793
> 
> 标签：mongodb

对于我在 Ubuntu 系统上新安装的 MongoDB，我还安装了 MMS-Agent，但运行几分钟后会显示以下消息。

问题是什么？

```
xx@ubuntu12Dev:~/mms-agent$ python agent.py
2012-05-29 22:54:22,319 INFO 启动代理父进程 - 版本：1.4.1
2012-05-29 22:54:22,320 信息启动代理父进程-版本：1.4.1
2012-05-29 22:54:27,409 INFO 启动代理进程 - 版本 1.4.1
2012-05-29 22:54:27,414 信息启动代理进程-父 pid：2877-版本：1.4.1
2012-05-29 22:56:31,391 INFO 开始非阻塞统计监控：ubuntu12Dev:27017
2012-05-29 22:56:31,393 INFO 开始阻止统计信息监控：ubuntu12Dev:27017
2012-05-29 22:56:31,393 INFO 开始 munin 监控：ubuntu12Dev:4949
2012-05-29 23:04:37,040 错误升级检查问题：回溯（最近一次通话）：
  运行中的文件“agent.py”，第 190 行
    res = urllib2.urlopen( self.settings.version_url % { 'key' : self.settings.mms_key } )
  文件“/usr/lib/python2.7/urllib2.py”，第 126 行，在 urlopen
    return _opener.open（网址，数据，超时）
  文件“/usr/lib/python2.7/urllib2.py”，第 400 行，打开
    响应 = self._open（请求，数据）
  _open 中的文件“/usr/lib/python2.7/urllib2.py”，第 418 行
    '_open'，请求）
  _call_chain 中的文件“/usr/lib/python2.7/urllib2.py”，第 378 行
    结果 = 函数（*args）
  https_open 中的文件“/usr/lib/python2.7/urllib2.py”，第 1215 行
    返回 self.do_open(httplib.HTTPSConnection, req)
  文件“/usr/lib/python2.7/urllib2.py”，第 1177 行，在 do_open
    引发 URLError(err)
网址错误：

```

# php - 从 .txt 中提取文本的多个部分

> ID：10815122
> 
> 赞同：0
> 
> 时间：2012-05-30T11:11:43.860
> 
> 标签：php

我之前已经将一个字符串保存到 .txt 中，如下所示：

```
$text = "<div class='highlight'><div><p>".$date.".</p> <h1> ".$heading."</h1>".$textbox."</div></div>"; 
```

我现在想提取`$date`，`$heading`并`$textbox`从 txtfile 回到变量，以进行编辑，但我不知道如何做到这一点。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:17:09.037

您需要使用 DOM 解析器来解析 HTML。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

从上述网站发布的代码。

```
$html = file_get_html('http://www.google.com/');

// 查找所有图像
foreach($html->find('img') as $element)
       回声 $element->src 。' 
';

// 查找所有链接
foreach($html->find('a') as $element)
       回声 $element->href 。' 
'; 

```

或 PHP 的 DOM

```
$str = file_get_contents("a.txt");
   $DOM = 新的 DOMDocument;
   $DOM->loadHTML($str);//获取所有H1
   $items = $DOM->getElementsByTagName('h1');

//显示所有H1文本
   for ($i = 0; $i < $items->length; $i++)
        回声 $items->item($i)->nodeValue 。" 
";
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:16:35.243

[编辑-阅读评论后，似乎正则表达式不是要走的路。请尝试使用 SimpleHtmlDom 解析器]

```
$html = new simple_html_dom();
$html->load($yourstring);
$date = $html->find('p')->innertext;
$heading = $html->find('h1')->innertext;
$textbox = $html->find('div div')->innertext; 
```

您可以在此处找到 Simple Html Dom 的文档 - [http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

一种效率较低的方法 - preg_match('#

（。*）。*（。*）。*(.*)#', $text, $matches); $date = $matches[0]; $heading = $matches[1]; $文本框 = $matches[2];

# java - 如何为绘图制作黑色背景和红色？

> ID：10815126
> 
> 赞同：0
> 
> 时间：2012-05-30T11:12:11.893
> 
> 标签：java, android

我一直在开发绘图应用程序。我有以下主要活动的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    Display display = getWindow().getWindowManager().getDefaultDisplay();
    mMainView = new MyView(this, display.getWidth(), display.getHeight());
    setContentView(mMainView);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);

    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 }, 0.4f, 6, 3.5f);
    mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
} 
```

以及用于绘图的自定义视图的代码：

```
public class MyView extends View {

    private static final float TOUCH_TOLERANCE = 4;
    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Bitmap mBitmap;
    private Canvas mCanvas;
    private Path mPath;
    private Paint mBitmapPaint;

    private float mX, mY;

    public MyView(Context context, int width, int height) {
        super(context);

        this.setDrawingCacheEnabled(true);
        mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(0xFF000000);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }

    public void clearView() {
        mBitmap.eraseColor(Color.TRANSPARENT);
    }

    public Bitmap getState() {
        return mBitmap;
    }

    private void touchStart(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touchMove(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
        }
    }

    private void touchUp() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touchStart(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touchMove(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touchUp();
            invalidate();
            break;
        }
        return true;
    }
} 
```

所以，因为如果我尝试使用位图压缩将生成的位图保存为 jpeg 文件，那么一切都很好，但是如果我尝试保存为 png 文件，我将获得具有透明背景（白色）和红色图片的文件。我需要我可以使用带有黑色背景和红色图片的 JPEG/PNG 进行保存。保存代码很好，不用担心。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:28:22.270

您可以在位图上绘制一个黑色矩形，如下所示：

```
Bitmap myBitmap = Bitmap.createBitmap(width, height, ...);
Canvas mCanvas = new Canvas(myBitmap);

// create a black rectangle
final int color = 0xffffffff;
final Paint p1 = new Paint();
final Rect rect = new Rect(0, 0, width, height);
final RectF rectF = new RectF(rect);

// draw it to the canvas
mCanvas.drawARGB(0, 0, 0, 0);
p1.setColor(color);
mCanvas.drawRect(rectF, p1); 
```

那应该强制使用黑色背景，您可以在画布上叠加其他位图，最后使用 myBitmap 导出为 png。我认为您现在拥有的黑色背景是 jpeg 默认值，因为它没有透明度。

# jquery - ajax statusCode 的 jQuery 默认值

> ID：10815132
> 
> 赞同：10
> 
> 时间：2012-05-30T11:12:46.217
> 
> 标签：jquery, default, http-status-codes

据我了解，使用 ajax 处理错误结果的一种可能性是：

```
$.ajax({
    url: someUrl,
    type: 'POST',
    success: function(data) {},
    error: function(jqXHR, exception) {
        if (jqXHR.status === 0) {
            alert('Not connect.\n Verify Network.');
        } else if (jqXHR.status == 404) {
            alert('Requested page not found. [404]');
        } else if (jqXHR.status == 500) {
            alert('Internal Server Error [500].');
        } else if (exception === 'parsererror') {
            alert('Requested JSON parse failed.');
        } else if (exception === 'timeout') {
            alert('Time out error.');
        } else if (exception === 'abort') {
            alert('Ajax request aborted.');
        } else {
            alert('Uncaught Error.\n' + jqXHR.responseText);
        }
    }
}); 
```

或使用`statusCode`以使其更具可读性：

```
$.ajax({
    url: someUrl,
    type: 'POST',
    statusCode: {
        200: function(data) {
                   :
                   :
             },
        401: function() {
                   :
                   :
             },
              :
              : 
```

**我的问题是：**
是否有可能使用`statusCode`并有一个默认的失败？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-26T23:53:01.300

不在 statusCode 参数中。但那是因为如果你想抓住一切，这是一种更好（更精简）的方式：

```
complete: function(jqXHR, textStatus) {
    switch (jqXHR.status) {
        case 200:
            alert("200 received! yay!");
            break;
        case 404:
            alert("404 received! boo!");
            break;
        default:
            alert("I don't know what I just got but it ain't good!");
    }
} 
```

# php - PHP GET 字符串与explode 和if 语句

> ID：10815133
> 
> 赞同：0
> 
> 时间：2012-05-30T11:12:52.647
> 
> 标签：php, redirect, if-statement, get, explode

我正在写我认为是一个简单的脚本，但我被卡住了。

场景是我想从 GET 请求中创建 2 个字符串。

例如：domain.com/script.php?Client=A12345

在 script.php 中，它需要获取“客户端”并创建 2 个变量。一个是 $brand，需要从 URL 中获取 A 或 B。另一个是 $id ，它需要从 URL 中获取 12345 。

现在，在它拥有这两个变量 $brand 和 $id 之后，它需要有一个 if 语句来根据品牌重定向，如下所示

```
if ($brand=="A") {
header('Location: http://a.com');
}
if ($brand=="B") {
header('Location: http://b.com'); 
```

在每个 URL 的末尾，我想附加 $id，但我不确定如何执行此操作。

因此，例如，我将在 domain.com/script?Client=A1234 访问脚本，它需要将我重定向到 a.com/12345

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:21:53.143

```
$fullCode = $_REQUEST['Client'];
if(strpos($fullCode, 'A') !== false) {
   $exp = explode('A',$fullcode);
   header('Location: http://a.com/' . $exp[1]);
}
else if(strpos($fullCode, 'B') !== false) {
   $exp = explode('B',$fullcode);
   header('Location: http://b.com/' . $exp[1]);
}
else {
   die('No letter occurence');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:03:44.670

如果出于某种目的您想使用爆炸，那么您需要有一个分隔符。让我们以“_”作为分隔符，因此您的示例将是这样的：domain.com/script.php?Client=A_12345

```
$yourstring = explode("_",$_GET["Client"]);

echo $yourstring[0];
//will output A 
echo $yourstring[1];
//will output 12345

//your simple controller could be something like this
switch($yourstring[0]){
case: 'A':
    header('Location: http://a.com?id='.$yourstring[1]);
    exit();
    break;

case: 'B':
    header('Location: http://b.com?id='.$yourstring[1]);
    exit();
    break;

default:
//etc
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:48:08.263

```
$brand = strtolower($_GET['Client'][0]);
$id    = substr($_GET['Client'], 1);

header("Location: http://{$brand}.com/{$id}"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:19:14.720

你可以轻松做到，

```
$value = $_GET['Client'];

$brand = substr($value, 0, 1);

$rest  = substr($value, 1, strlen($brand)-1); 
```

现在您有了 $brand 字符串中的第一个字符，您可以执行 if 语句并按照您想要的方式重定向...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:19:31.983

你的意思是这样吗？

**注意：**
这仅适用于品牌只有 1 个字符长的情况。如果不是这样，请举出更好的例子。

```
<?php

$client = $_GET['Client'];
$brand = strtolower(substr($client, 0, 1));
$id = substr($client, 1);

if ($brand == 'a')
{
    header("Location: http://a.com/$id");
}
elseif ($brand == 'b')
{
    header("Location: http://b.com/$id");
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T11:24:30.430

尝试使用：

```
preg_match("/([A-Z])(\d*)/",$_GET['Client'],$matches); 
```

`$matches[1]`将包含这封信`$matches[2]`并将包含您的 ID。

然后你可以使用：

```
if ($matches[1]=="A")
{
    header('Location: http://a.com/{$matches[2]}');
}
if ($matches[1]=="B")
{
    header('Location: http://b.com/{$matches[2]}');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T11:27:40.363

建议你也可以试试

```
$requested = $_GET["Client"];
$domain = trim(preg_replace('/[^a-zA-Z]/',' ', $requested)); // replace non-alphabets with space
$brand = trim(preg_replace('/[a-zA-Z]/',' ', $requested)); // replace non-numerics with space
$redirect_url = 'http://' . $domain . '/' . $brand;
header('Location:' . $redirect_url); 
```

但是，如果您可以将域名和品牌作为两个单独的参数获取并在重定向它们之前单独清理它们以防止从单个参数中提取它们的开销，那就更好了。

注意：当域名本身有数字时，此表达式可能无用，因为客户端是通过大量验证获得的，并且在现实中需要进行卫生处理。

# google-maps - 我的图像的 Google Maps API

> ID：10815135
> 
> 赞同：0
> 
> 时间：2012-05-30T11:12:56.930
> 
> 标签：google-maps

我有自己的自定义技术地图，我希望将图像与 Google Maps API 集成，以提供更丰富的类似于 Google Map 的体验来导航我的材料。

谁能提供一些关于如何最好地做到这一点的想法？为了将我的自定义图像与 Maps API 一起使用，我需要查看哪些步骤？有没有可能。

类似的例子是谷歌为月球或火星所做的事情——但这种方法对其他人开放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:27:26.117

看起来您想使用自定义投影创建自定义地图类型： [https](https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes) ://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes https://developers.google.com/maps/documentation/javascript/地图类型#Projections

您需要的所有信息都在文档中。

# bing - 必应地图中图钉中类型的 veshape

> ID：10815136
> 
> 赞同：3
> 
> 时间：2012-05-30T11:13:02.820
> 
> 标签：bing

我正在制作一个网站，其中有 veshape 类型的图钉和网格视图旁边的 bing 地图。现在图钉是可拖动的，可以拖动地图的外侧。我想要在 gridview 上放置图钉的拖放功能。当图钉在 gridview 上放置时，我想要一条图钉信息和图钉所在的网格当前行。我如何做到这一点？

# objective-c - iOS - 使用设备方向更改视图

> ID：10815137
> 
> 赞同：0
> 
> 时间：2012-05-30T11:13:08.373
> 
> 标签：objective-c, ios, view, orientation-changes

我正在使用 iOS5 和情节提要。我有两个具有两个不同标识符的视图。我想在更改设备方向时更改视图。这是我的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if(((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || 
        (interfaceOrientation == UIInterfaceOrientationLandscapeRight))){

        self.view = [self.storyboard instantiateViewControllerWithIdentifier:@"Landscape"];

    }
    else if(((interfaceOrientation == UIInterfaceOrientationPortrait) || 
              (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown))){

        self.view = [self.storyboard instantiateViewControllerWithIdentifier:@"Portrait"];

    }

    return YES;
} 
```

但应用程序崩溃。哪个是问题？

编辑：如果我添加两个 uiview 并在旋转设备时将两个 id 放入 uiview 它会崩溃。这是代码：

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

}

- (void) orientationChanged:(id)object
{  
    portraitView = [self.storyboard instantiateViewControllerWithIdentifier:@"TermoregolatoreTop"];
    landscapeView = [self.storyboard instantiateViewControllerWithIdentifier:@"Landscape"];

    UIInterfaceOrientation interfaceOrientation = [[object object] orientation];

    if (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) 
    {

        self.view = self.portraitView;
    } 
    else 
    {

        self.view = self.landscapeView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:26:27.357

`UIDeviceOrientationDidChangeNotification`释放视图控制器时，您必须删除观察者。

发生崩溃是因为该通知是在最有可能已从内存中删除的类上触发的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:14:48.413

```
self.view = [self.storyboard instantiateViewControllerWithIdentifier:@"Portrait"]; 
```

将返回`id`a`UIViewController`并且您将其分配给 a `UIView`。

# android - 来自数据库的 Android SimpleCursorAdapter ID

> ID：10815147
> 
> 赞同：2
> 
> 时间：2012-05-30T11:13:37.680
> 
> 标签：android, database, sqlite, simplecursoradapter

我在开发的应用程序中遇到了一些问题。所以，我所有的表都有主键的 _id 字段，我使用 SimpleCursorAdapter 将它们绑定到 ListViews 和 Spinners。我想知道的是如何使 ListView 或 Spinner 选定项与相应行具有相同的 ID？

奇怪的是，这适用于 ContextMenu，我直接使用 NotePad 示例：

```
AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
info.id 
```

此 ID 字段与表上的**RowID**相同，我可以很好地删除项目，但是当我尝试这样的事情时：

```
getListView().setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> adapter, View view,
                int position, long arg) {
            Intent i = new Intent(getApplicationContext(),
                    FuelingList.class);
            long id = view.getId(); 
```

ID 字段是一些随机的橡胶状。所以我的问题是，在第一个代码位中，*AdapterContextMenuInfo*获取的 Id 是什么，我如何在代码的其他部分检索它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:29:41.803

既然您知道您正在使用 a `SimpleCursorAdapter`，那么在您的`onItemClick`方法中，您可以调用

```
public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) {
   String value = ((SimpleCursorAdapter) adapter.getAdapter()).getCursor().getString(COLUMN_INDEX);
} 
```

`COLUMN_INDEX`您要从游标中当前选择的行中获取的列中的位置。

或者，调用

```
adapter.getAdapter().getItem(position) 
```

然后将其转换为 a `Cursor`，也可以。

注意 1：`AdapterView`实际上是您的`ListView`.

注意 2：由于您在适配器上使用`SimpleCursorAdapter`then返回定位在您指定的行`getItem(position)``Cursor`

注意 3：当您拥有 时`Cursor`，您可以通过提供列索引（基于 0）或使用`cursor.getString(cursor.getColumnIndex("COLUMN_NAME"))`

注意 4：根据 Barak 的评论，`arg`参数是使用时 _ID 字段的值 a `CursorAdapter`，如果您只需要知道 row `_ID`，那么只需使用该`arg`值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:45:32.213

由于您使用的是 SimpleCursorAdapter，因此 onItemClick 会将数据库行 ID 传递给您。

```
 public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) 
```

该`long arg`部分实际上是数据库中的行 ID。

所以你的代码应该是：

```
getListView().setOnItemClickListener(new OnItemClickListener() { 
     public void onItemClick(AdapterView<?> adapter, View view, 
            int position, long arg) { 
        Intent i = new Intent(getApplicationContext(), 
                FuelingList.class); 
        long id = arg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:12:53.720

您可以将行的ID存储在arraylist中并从arraylist的相应位置获取行的ID。这对我有用..

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    Intent intent=new Intent(this , Details.class);
    Bundle extras = new Bundle();
    extras.putLong("ID", IDList.get(position));
    intent.putExtras(extras);
    startActivityForResult(intent, SHOW_DETAILS);

} 
```

您可以使用 listview.setonitenclicklistener ... 希望对您有所帮助

# python - 附加到覆盖先前值的元组

> ID：10815149
> 
> 赞同：3
> 
> 时间：2012-05-30T11:13:38.460
> 
> 标签：python, append, tuples, arcpy

我正在使用 arcpy 来获取形状文件的所有折线。`SearchCursor`返回一个光标，以便我可以遍历形状文件的所有功能。问题是我想保存游标返回的所有对象以供以后使用。

```
import arcpy
from arcpy import env

env.workspace = r"C:\GIS Data\GIS data"

desc = arcpy.Describe("River.shp")
shapefieldname = desc.ShapeFieldName

rows = arcpy.SearchCursor("River.shp")

featureList = ()

for row in rows:
    feat = row.getValue(shapefieldname)

    featureList = featureList + (feat, )

    print "%i %i" % (featureList[-1].firstPoint.X, featureList[-1].firstPoint.Y)
    print "%i %i" % (featureList[-1].lastPoint.X, featureList[-1].lastPoint.Y)

    print

print "---------------------------------------------------------------"

for feat in featureList:
    print "%i %i" % (feat.firstPoint.X, feat.firstPoint.Y)
    print "%i %i" % (feat.lastPoint.X, feat.lastPoint.Y)
    print 
```

元组应该包含游标返回的所有对象。但它只有最后一个元素重复`size`元组次数。

> 3610930 2135882 3611593 2134453
> 
> 3611806 2134981 3611593 2134453
> 
> 3614160 2136164 3617432 2131734
> 
> 3611593 2134453 3617432 2131734
> 
> 3617432 2131734 3620568 2127591
> 
> 3620568 2127591 3620785 2127423
> 
> 3617980 2126657 3620568 2127591
> 
> 3616768 2129454 3617948 2126649
> 
> 3617948 2126649 3617980 2126657
> 
> 3615102 2128889 3617587 2126510
> 
> 3617587 2126510 3617948 2126649
> 
> 3617624 2126416 3617980 2126657
> 
> 3613129 2128176 3615155 2125617
> 
> 3615155 2125617 3617587 2126510
> 
> 3615086 2125515 3615155 2125617
> 
> * * *
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617
> 
> 3615086 2125515 3615155 2125617

起初，我已经尝试过使用列表。当我使用“append()”方法时，也为列表找到了相同的输出。由于元组是不可变的数据结构，如何`+`覆盖元组之前的所有元素。虽然这段代码是为 arcpy 编写的，但我猜这个问题不是 arcgis 特有的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:19:44.497

这表明`row.getValue()`不断返回对*同一对象的*引用，并不断更新。

要验证，请尝试在第一个循环中打印`id(feat)`,`id(feat.firstPoint)`并`id(feat.lastPoint)`查看迭代之间是否有任何 id 保持不变。如果他们中的任何一个这样做，那是你的问题。

> 由于 tuple 是不可变的数据结构，如何 + 覆盖 tuple 之前的所有元素。

它没有。元组是不可变的，因为您不能在不创建新元组的情况下添加或删除元素。您也不能更改元组元素的值。但是，如果该元素是对可变对象的引用，您可以自由修改对象本身。这就是我怀疑这里发生的事情：您对同一个对象有多个引用；当您修改一个时，它们似乎都发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T01:03:08.867

您可以将其作为单行列表理解来执行：

```
import arcpy
from arcpy import env

env.workspace = r"C:\GIS Data\GIS data"

desc = arcpy.Describe("River.shp")
shapefieldname = desc.ShapeFieldName

rows = arcpy.SearchCursor("River.shp")

feature_list = [row.getValue( shapefieldname ) for row in rows] 
```

在此示例中，“feature_list”将是您的形状字段值的列表。

# jasper-reports - Jasper IReport 4.5.1 - 如何修复 Ireport 组件的位置，例如“静态文本”或“文本字段”

> ID：10815150
> 
> 赞同：1
> 
> 时间：2012-05-30T11:13:40.307
> 
> 标签：jasper-reports, ireport

我想设计一个模板/报告，其中某些组件的位置变为静态或冻结。任何使用我的 jrxml 文件的人都不能在设计时重新定位它。他可以添加/删除新字段，但不能修改我冻结的组件。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:30:06.283

不。.jrxml 只是一个文本文件（一个 XML 文件）。iReport 中没有将其锁定的功能。

您可以通过从 .jrxml 中抽象出用户来实现这样的功能。例如，在 JasperReports Server 中，您可以让用户布局报表，但服务器总是将一些固定的东西放入最终报表中。

# php - 如何在静态块中包含 JavaScript？

> ID：10815151
> 
> 赞同：1
> 
> 时间：2012-05-30T11:13:47.073
> 
> 标签：php, javascript, html, magento

我在后端有一个带有标识符的静态块，`veri-sign`我想在其中显示 verisign 徽标，单击该徽标会将用户带到 verisign 证书页面。

这是我在后端静态块中的代码

```
 <div id="left-block1-verisign" style="border: 2px solid #f4f5e9; width: 180px; padding: 5px;">
       <p style="font-size: 18px; font-family: Verdana, Geneva, sans-serif; margin-left: 8px; color: #4e2488;">Safe &amp; Secure</p>
      <script src="https://seal.verisign.com/getseal?host_name=www.mysite.com&amp;size=S&amp;use_flash=NO&amp;use_transparent=NO&amp;lang=en"></script>
      </div> 
```

我`page.xml`像这样在左列的文件中调用这个静态块，

```
 <block type="cms/block" name="cms_test_block4">
           <action method="setBlockId"><block_id>veri-sign</block_id></action>
      </block> 
```

该块在没有 Verisign 徽标和“安全可靠”的情况下显示良好。我在不同的论坛上浏览了很多帖子，但从未真正从那里得到答案。

我使用 Firebug 来查看它是否包含我的 Javascript。它包括该`<script>`行，但不包括其中的javascript，就是这样，

```
 <script src="https://seal.verisign.com/getseal?host_name=www.mysite.com&size=S& use_flash=NO&use_transparent=NO&lang=en">
    <!--
     dn="www.mysite.com";
     lang="en";
     tpt="opaque";
     vrsn_style="WW";
     splash_url="https://trustsealinfo.verisign.com";
     rStr="";
     seal_url="https://seal.verisign.com";
      u1=splash_url+"/splash?form_file=fdf/splash.fdf&dn="+dn+"&lang="+lang;u2=seal_url+"/getseal?at=0&sealid=2&dn="+dn+"&lang="+lang+rStr;var sopener;function vrsn_splash(){if(sopener&&!sopener.closed){sopener.focus();}else{tbar="location=yes,status=yes,resizable=yes,scrollbars=yes,width=560,height=500";var sw=window.open(u1,'VRSN_Splash',tbar);if(sw){sw.focus();sopener=sw;}}}
     var ver=-1;var v_ua=navigator.userAgent.toLowerCase();var re=new RegExp("msie ([0-9]{1,}[\.0-9]{0,})");if(re.exec(v_ua)!==null){ver=parseFloat(RegExp.$1);}
     var v_old_ie=(v_ua.indexOf("msie")!=-1);if(v_old_ie){v_old_ie=ver<5;}
     function v_mact(e){var s;if(document.addEventListener){s=(e.target.name=="seal");   
     if(s){vrsn_splash();return false;}}else if(document.captureEvents){var tgt=e.target.toString();s=(tgt.indexOf("splash")!=-1);if(s){vrsn_splash();return false;}}
     ......
     N wHOLE LOAD of VERISIGN COde
    -->
   </script>
   <a tabindex="-1" href="javascript:vrsn_splash()">
   <img border="true" alt="Click to Verify - This site has chosen an SSL Certificate to improve Web site security" oncontextmenu="return false;" src="https://seal.verisign.com/getseal?at=0&sealid=2&dn=www.mysite.com&lang=en" name="seal">
   </a> 
```

它既不包括脚本中的代码，也不包括图像和`<a>`标签。

我不知道脚本是否需要通过page.xml文件添加？但如果是这样的话，它怎么知道它应该从我的块中执行。

我在这里有点困惑，需要一些帮助。我确信一定有人成功地做到了这一点（包括你的magento网站上的威瑞信证书），只是我正在通过一个静态块做。

我在静态块中也有一个 twitter 提要，它具有运行良好的外部 twitter JavaScript。但威瑞信标志没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:08:47.390

你可以用另一种方式来做这件事。

您需要遵循下面给出的这种方式：

1.  将您的静态块调用到任何自定义 PHTML 文件。
2.  在此 PHTML 文件中添加您的脚本部分。
3.  您可以使用`Page.xml`.

希望它对你有用！

# delphi - 从祖先的祖先继承方法

> ID：10815152
> 
> 赞同：2
> 
> 时间：2012-05-30T11:13:49.957
> 
> 标签：delphi, delphi-2006

我正在开发一个源自商业组件套件的组件，并且遇到了我以前从未考虑过的挑战。考虑以下代码片段：

```
TMyClass = class
protected
  procedure SomeMethod; virtual;
end;

TMyClass1 = class(TMyClass)
protected
  procedure SomeMethod; override;
end;

TMyMode = (mmOne, mmTwo);
TMyClass2 = class(TMyClass1)
private
  FMode: TMyMode;
protected
  procedure SomeMethod; override;
public
  property Mode: TMyMode read FMode write FMode;
end;

...

procedure TMyClass2.SomeMethod;
begin
  if FMode = mmOne then inherited SomeMethod
                   else inherited TMyClass.SomeMethod;
end; 
```

所以如果Mode = mmOne那么我照常继承，但如果是mmTwo，我仍然想继承我祖先祖先的代码，而不是祖先引入的代码。我已经尝试了上述方法，但没有成功，而且由于我以前从未遇到过这种情况，我认为这是不可能的。有接盘侠吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T11:19:02.670

您可以使用类助手执行此操作：

```
type
  TA = class
  public
    procedure X; virtual;
  end;

  TB = class(TA)
  public
    procedure X; override;
  end;

  TA_Helper = class helper for TA
    procedure A_X;
  end;

  TC = class(TB)
  public
    procedure X; override;
  end;

procedure TA.X;
begin
  // ...
end;

procedure TB.X;
begin
  // ...
end;

procedure TA_Helper.A_X;
begin
  inherited X; // TA.X
end;

procedure TC.X;
begin
  A_X;
  inherited X; // TB.X
end; 
```

我认为 D2006 中存在类助手，但如果它们不存在，您也可以使用 hack 达到相同的效果：

```
// ...
  TA_Helper = class(TA)
    procedure A_X;
  end;
// ...
procedure TC.X;
begin
  TA_Helper(Self).A_X;
  inherited X; // TB.X
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T13:44:03.753

此任务还有另一种解决方案，没有类助手或其他方法（如@hvd 答案）。`self`您可以获取基类方法代码地址并使用Data-pointer: updated code调用它
**，无需 rtti**

```
unit Unit4;

interface
type
    TA = class(TObject)
      protected
        procedure Test(); virtual;
    end;

    TB = class(TA)
      protected
        procedure Test(); override;
    end;

    TC = class(TB)
      public
        procedure Test(); override;
    end;

implementation

procedure TA.Test;
begin
    writeln('TA.Test()');
end;

procedure TB.Test;
begin
    writeln('TB.Test');
end;

procedure TC.Test;
var TATest : procedure of object;
begin
    writeln('TC.Test();');
    writeln('call inherited TB: ');
    inherited Test();

    writeln('call inherited TA:');
    TMethod(TATest).Data := self;
    TMethod(TATest).Code := @TA.Test;
    TATest();
end;
end. 
```

# jquery - ajaxStart 在 Google Chrome 中忽略 .show()

> ID：10815154
> 
> 赞同：3
> 
> 时间：2012-05-30T11:13:54.843
> 
> 标签：jquery, ajax, google-chrome

我有一个 jQuery $.ajax 调用，它在所有主流浏览器中都能正常工作。

此外，我使用 .ajaxStart 和 .ajaxStop 函数在我的页面上制作一个不可见的 div，上面写着“正在加载...”，可见。

问题是，虽然 ,ajaxStart 和 .ajaxStop 事件触发没有任何问题（我从 console.log() 检查它），但 ajaxStart 中 jQuery 的 .show 事件在 Google Chrome 中完全被忽略。

这是代码：

```
$("#loadMsg").ajaxStart(function(){
   console.log('ajaxstart');
   // the next command is ignored ONLY in Google Chrome
   $(this).show(0);
}); 

$.ajax({
  url:"xxx.php",
  type:"POST",
  data:"id="+id,
  async:false,
  success:function(data)
  {
     console.log(data); 
  }
});  

$("#loadMsg").ajaxStop(function(){
  console.log('ajaxfinish');
  $(this).hide(0);
}); 
```

我已经尝试过：

```
$("#loadMsg").show(0);  
$("#loadMsg").fadeIn();  
$("#loadMsg").css("display","block");  
$("#loadMsg").css("display","inline"); 
```

等等

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T21:34:17.260

经过2天的努力，我终于找到了解决方案。我上面发布的整个代码都在一个函数中，它通过成功属性将 xxx.php 的结果返回给主代码。

问题是当我使用**async:true**选项时，该函数立即返回返回值，而无需等待 ajax 完成请求。所以返回的值总是一个“未定义”的值，而不是 xxx.php 的正确结果。

**仅当 ajax 请求完成时，异步运行 ajax 并继续执行其余代码**的解决方案是将整个代码放在成功参数中。

我将尝试通过以下示例说明清楚：

**无效的代码：**

```
function foo()
{

 if call_ajax_request()=="true"
  {
    //execute code A
    // never had the chance to be executed because call_ajax_request() 
    // was always undefined
  }

}

function call_ajax_request()
{

  var return_value;

  $.ajax({
  url:"xxx.php",
  type:"POST",
  data:"z="+y,
  success:function(data)
    {
           return_value = data;
        }
    }); 

    //return_value was always "undefined" because the flow didn't wait
   // for ajax to complete (async mode)
   return return_value;
} 
```

**最终完成工作的代码：**

```
function foo()
{

  $.ajax({
   url:"xxx.php",
   type:"POST",
   data:"z="+y,
   success:function(data)
     {
            return_value = data;

            //here, the following code won't be executed 
            //as long as ajax hasn't been completed.

            if (return_value=="true")
            {
               //execute code A
            }
         }
   }); 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:37:25.400

您不能使用 async:false 执行此操作，这将导致浏览器挂起，直到请求完成。与其尝试使用 async:false，我敦促您考虑重新设计您的项目，使其异步工作。

# php - Symfony 从路由获取对象不起作用

> ID：10815155
> 
> 赞同：1
> 
> 时间：2012-05-30T11:14:01.367
> 
> 标签：php, symfony1, doctrine, symfony-1.4, doctrine-1.2

最近我将数据库表的一列更改为另一列。在我执行迁移原则后：

```
$this->getRoute()->getObject() 
```

我返回了一个错误：

> “SQLSTATE [42S22]：找不到列：‘字段列表’中的 1054 列‘p.price_discount’未知”

如果我：

```
ProductTable::getInstance()->find(1); 
```

一切正常！

我清空了 1000 次缓存并构建了 - 所有这些。

我的 schema.yml：

```
Product:
  tableName: products
  actAs:
    Timestampable:
      created:
        name: created_at
        type: timestamp
        form: d-m-Y H:i:s
    I18n:
      fields: [title, subtitle, description, datasheet, returns_shippings, inspiration, use_care]
      actAs:
        Sluggable: { fields: [title], uniqueBy: [lang, title] }
  columns:
    id:
      type: integer(4)
      primary: true
      notnull: true
      autoincrement: true
    ref:
      type: string(45)
      unique: true
      notnull: true
    active:
      type: boolean
      notnull: true
      default: 0
    new:
      type: boolean
      notnull: true
      default: 0
    title:
      type: string(45)
    subtitle:
      type: string(45)
    inspiration: clob
    use_care: clob
    brand:
      type: string(45)
    description:
      type: clob(65535)
    datasheet:
      type: clob(65535)
    returns_shippings:
      type: clob(65535)
    price:
      type: float
      notnull: true
      default: 0
    votes:
      type: integer
      notnull: true
      default: 0
    weight:
      type: float
      notnull:  true
      default:  0
    iva_id:
      type: integer(4)
      notnull: true
  relations:
    Iva:
      class: Iva
      local: iva_id
      foreign: id
      foreignAlias: Products
    Styles:
      foreignAlias: Products
      class: Style
      refClass: StyleProduct
      onDelete: CASCADE
    Categories:
      foreignAlias: Products
      class: Category
      refClass: CategoryProduct
      onDelete: CASCADE
    RelatedProducts:
      foreignAlias: Products
      class: Product
      refClass: RelatedProduct
      local: product_id
      foreign: product_id1
      onDelete: CASCADE 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:57:22.443

你最后的评论是对的。

[Doctrine 查询缓存](http://readthedocs.org/docs/doctrine/en/latest/en/manual/caching.html?highlight=query%20cache#query-cache)使用 apc 作为后端来存储映射 DQL 请求 => SQL 请求，这很难计算，并且几乎永远不会改变：当你改变你的模型时它会改变。

例如，如果添加一列，以下查询在转换为 SQL 时会给出不同的结果：`SELECT * FROM User u`

这是因为 SQL 请求列出了所有字段，所以变成了

```
SELECT name, email FROM user 
```

应该成为

```
SELECT name FROM user 
```

删除电子邮件列后，但不会因为查询缓存。

# flash - 我可以使用 alivepdf 从外部读取现有的 pdf 吗？

> ID：10815156
> 
> 赞同：0
> 
> 时间：2012-05-30T11:14:04.547
> 
> 标签：flash, apache-flex, actionscript, air, alivepdf

作为标题，任何关于alivepdf的详细文档都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:35:33.153

AlivePDF 包含模板支持，允许您导入现有的 PDF 文档并将其用作模板，这是非常有趣且非常受欢迎的功能。这仅适用于 Adob​​e AIR 应用程序。

# jquery - 使用 jquery $.ajax 提交表单 - 更改表单的视图

> ID：10815164
> 
> 赞同：1
> 
> 时间：2012-05-30T11:14:19.630
> 
> 标签：jquery, html, css, ajax

我这是我页面上的表单列表示例：http: [//jsfiddle.net/GSC3x/](http://jsfiddle.net/GSC3x/)

它工作得很好，但是当我的页面上有很多列表项时，它对用户很不友好。单击列表项之一后，我想更改显示表单的方式。

我希望它在某种程度上，当我单击该项目时，表单显示在页面的中心，并且当表单打开时其他列表项是不可见的 - 当我再次单击我之前单击的项目时 - 它应该返回正常列表视图 - 怎么做？

@@UPDATE - 添加了超专业的图像来展示它应该如何工作！: ]

![在此处输入图像描述](../Images/6fee54ffe2cd94fe24e4c0a0738cb936.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:27:22.593

试试我的代码...

CSS 附加在下面

```
ul{
    position:relative;
}

.centerDiv{
    position:absolute;
    z-index:1000;
    top:0px;
    left:30px;
}​ 
```

和 Javascript

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function(e){
       if( $(e.target).next(".slidingDiv").css('display') != 'block'){
            $(".slidingDiv").hide();
            $(".show_hide").hide();
            $(e.target).show();
            $(e.target).next(".slidingDiv").addClass("centerDiv");
            $(e.target).next(".slidingDiv").slideToggle();
       }else{
              $(".slidingDiv").hide();
                $(".show_hide").show();
       }   
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:33:19.197

```
$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

        $('.show_hide').click(function(e){
             $('.show_hide').not($(this)).next(".slidingDiv").hide();
             $(e.target).next(".slidingDiv").slideToggle();
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:36:22.450

而不是 `$(e.target).next(".slidingDiv").slideToggle();`您可以添加下面的代码以将表单动画到中心。

```
var t=( $(window).height() - $(this).next(".slidingDiv").height() ) /2+$(window).scrollTop();
var l= ($(window).width() - $(this).next(".slidingDiv").width() ) / 2+$(window).scrollLeft();         
$(e.target).next(".slidingDiv").css('position','absolute');
$(e.target).next(".slidingDiv").animate({
left: l,
top: t,
}, 500).show();
}); 
```

# diff - 归档连续的 beta 版本：如何节省硬盘空间？

> ID：10815165
> 
> 赞同：1
> 
> 时间：2012-05-30T11:14:24.687
> 
> 标签：diff, patch, archive, beta, rar

我存档了正在进行的工作的连续版本：

MySoftware-v1.01beta.rar [2 GB]

MySoftware-v1.02beta.rar [2 GB]

MySoftware-v1.03beta.rar [2 GB]

MySoftware-v1.04beta.rar [2 GB]

等等

*大量文件被修改，因此不可能只备份修改过的文件：大部分文件每次都被修改。*

**如何做一个只保存“差异”的.rar文件** （我应该使用“补丁”还是“差异”之类的东西？->我从未使用过它们）。有很多“差异”工具，好吧，但是结果文件不会是.rar，它只会是一个“差异文件”：所以每次我想重新打开这样的档案时，我都会必须“去差异化”它，然后我才会再次拥有一个 .rar。

我在 Windows 上，如果可能的话，我想使用 winrar 或命令行工具（如果不需要第三方软件那就太好了）。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:40:11.183

你说你的产品 90% 是 .wav 文件。由于两个不同的 wav 文件上的差异可能会产生巨大的差异，因此这不太可能为您节省任何空间。.wav 文件也不是*真正*可压缩的，因此 zip 或 rar 也可能没有太大帮助。

但是，如果像我们大多数程序员一样，您从前一个版本中派生出您的下一个产品版本，主要是保持文件不变（无论是源文件还是 .wav 文件），那么您真正想要做的只是存储，对于每个版本，更改的文件。这在备份/压缩领域称为“重复数据删除”。

您可以自己组织一个复杂的计划来执行此操作。（例如，您的自我建议“使用 winrar 执行此操作”）。但是，如果您使用一个体面的“源代码控制系统”（SVN 或 GIT 就可以），这将在您签入更改的文件时自动发生（并且不要重新签入未更改的文件）。这些工具通过跟踪版本之间的“差异”来工作；您可以告诉工具跟踪文本（“差异”）样式差异，或者简单地存储整个内容。

此外，由于您的个人版本占用 2GB，我会在 2 或 4 TB（外部）驱动器上浪费 100 美元。在最坏的情况下，这应该会持续大约 1000 次迭代。（SVN/GIT 可能会进一步扩展这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:25:53.273

你真的应该使用[源代码控制系统](http://en.wikipedia.org/wiki/Source_control)。一个流行的称为“ [git](http://en.wikipedia.org/wiki/Git_%28software%29) ”。还有许多其他人，每个人都有自己的长处和短处，关于哪个“最好”的辩论是漫长而乏味的。

源代码控制系统负责存储和管理文件的修订。实际方法各不相同，但作为使用版本控制的程序员，您“签入”文件进行存储和版本控制，用修订号“标记”它们，然后“签出”文件进行修改。

如果你曾经使用 'svn' 或 'cvs' 从 Internet 下载源代码，我的意思就是这种类型的东西。

源代码控制系统通常使用某种差异系统来仅存储修改文件之间的差异。它的目的是让您不必考虑复制和备份文件 - 您所要做的就是确保正确备份您的“存储库”。

此外，作为一个额外的优势，您可以对源文件进行更改并始终进行备份，以防您的更改需要恢复。因此，假设您想尝试一个新的文件处理系统，您可以使用源代码控制系统来创建一个测试（或任何您想称呼它的）“分支”，并在其中进行所有更改，而不会损坏软件的工作副本. 如果更改很好，您可以将更改“合并”到存储库的非测试分支中。

# python - Python请求url编码不起作用

> ID：10815168
> 
> 赞同：1
> 
> 时间：2012-05-30T11:14:42.047
> 
> 标签：python, http, web-scraping, python-requests

直接来自 python 请求示例是这个片段：

```
payload = {'key1': 'value1', 'key2': 'value2'}  
r = requests.get("http://httpbin.org/get", params=payload)  
print r.url  
u'http://httpbin.org/get?key2=value2&key1=value1' 
```

但是当我尝试从网站中提取数据时（使用请求 0.13.0）：

```
payload = {'one' : 'one', 'two' : 'two' }  
r = requests.get("http://[ip_removed]/clubs/pairs_results/personal.php", params=payload)
print r.url  
http://[ip_removed]/clubs/pairs_results/ 
```

那根本没有正确编码。想法？

编辑：看起来该站点发出 302 重定向。我该如何处理以获得与我的浏览器将看到的相同的 html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:48:31.673

该站点仅在`HTTP 302`此处执行 -redirect 操作`requests`，因此您最终将访问与最初请求不同的 url。这不是错误，而是预期的行为。

如果您不希望这样，您可以`allow_redirects=False`在发送请求时添加关键字参数。

顺便说一句：即使您删除了 IP，Google 搜索`inurl:...`也会快速显示您在此处谈论的网站...

# php - 如何在 Magento 的不同页面上更改网格中的产品数量？

> ID：10815175
> 
> 赞同：0
> 
> 时间：2012-05-30T11:14:53.083
> 
> 标签：php, magento, e-commerce

这是我的问题。在我的商店中，设计是有一个 3 列的网格来显示多行的产品。但是，在主页上，我希望它只在一行上显示 4 列网格。我该怎么做呢？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:09:43.117

网格输出

```
<ul> <li> 
```

类型输出，所以它应该只是覆盖页面上的 css 的问题。可能如果您在主页上的块周围放置一个 div 包装器并覆盖控制网格的 css，您会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:57:32.253

您可以在布局 xml 中找到解决方案。

转到“design/frontend/base/default/layout/catalog.xml”找到“ `<catalog_category_default>`”标签。定义网格列号的几个子标签如下：

```
<action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
<action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
<action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
<action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
<action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action> 
```

例如，最后一行表示当“目录类别”页面的布局为 3 列时，网格将连续显示 3 个产品。

# android - Android WebView 未正确加载本地 html 字符串

> ID：10815180
> 
> 赞同：3
> 
> 时间：2012-05-30T11:15:02.127
> 
> 标签：android, html, android-webview

我正在做一个项目，我正在接收一些我应该在`WebView`. 问题是 html 字符串仅包含正文部分，没有任何标签`<html>, <head>, <body>`，当我尝试在 webView 中显示接收到的字符串时，结果显示从服务器接收到的 html 字符串中包含的标签。

这是我收到的和正在做的一些例子：

从服务器收到的 Html 字符串：

`05-30 14:02:56.785: D/(16970): body : &lt;p align=&#039;justify&#039;&gt;The so-called Fiscal Compact is unlikely to be approved by the Latvian parliament in the second and final reading as four opposition MPs said that they would not back the initiative, local media reported on Tuesday evening. The second reading is scheduled for May 31\. Under local legislation, the bill should be backed by 67 MPs in the 100-seat parliament, though the ruling coalition controls only 56 seats and depends on the opposition Union of Greens and Farmers (ZZS) to approve it. During the first reading 68 MPs backed the bill. The four MPs from ZZS will meet PM Dombrovskis later today to discuss the issue. They want more clarity about the country&rsquo;s participation in neighboring Lithuania&rsquo;s nuclear power plant project. Previously, ZZS said it extends its support on condition that the government fights for higher subsidies for farmers in the 2014-2020 EU budget framework.&lt;/p&gt;`

这是我的代码：

```
String bodyTxt = cursor.getString(cursor.getColumnIndex("body"));
Log.d("","body : "+bodyTxt);
String newBody = "<html><body>" + bodyTxt + "</body></html>";
body.loadDataWithBaseURL(null, newBody, "text/html", "utf-8", null); 
```

结果是这样的：

![结果](../Images/9fefa0d4b7ef8763c89add6b15e08c55.png)

我试过使用`body.loadData(newBody, "text/html", "UTF-8");` ，但这种方式甚至没有显示结果。

那么我做错了什么想法，我该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:47:35.100

正如我从您的日志中看到的那样，您收到的 html 标签不是带有`<`符号，而是像`&gt;`. 我想如果你在你的 html 字符串中替换这些字符，它会正常工作。试试这个 ：

```
 String bodyTxt = cursor.getString(cursor.getColumnIndex("body"));
        String replaced = bodyTxt.replace("&lt;","<");
        Log.d("","replaced : "+replaced);
        String replaced2 = replaced.replace("&gt;", ">");
        Log.d("","replaced2 : "+replaced2);
        Log.d("","body : "+bodyTxt);
        String newBody = "<html><body>" + replaced2 + "</body></html>";
        body.loadDataWithBaseURL(null, newBody, "text/html", "utf-8", null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T14:13:50.713

你可以用这个

```
webview.loadData(Html.fromHtml(htmlData),"text/html","utf-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:21:35.717

我就是这样做的；

```
String htmlContent = "<html><body>hello</body></html>";
WebView wv = (WebView) findViewById(R.id.my_view);
wv.loadData(htmlContent, "text/html", "UTF-8"); 
```

调查数据在数据库中的外观，所有“<>”等都用“<”引用，这可能是您要寻找的问题。

# hadoop - 如何找出当前 map reduce 任务正在运行或即将为给定作业运行的从节点的 IP？

> ID：10815181
> 
> 赞同：0
> 
> 时间：2012-05-30T11:15:02.877
> 
> 标签：hadoop

我想找出当前 map reduce 作业正在运行或即将为给定作业运行的从节点的 IP。有什么方法可以做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:14:10.163

对于任何作业，您都可以通过 Job Scheduler Web UI 查看正在运行的任务列表 - 这将详细说明正在运行任务的节点。

至于任务将在哪里运行 - 这不一定要提前决定。当节点上的插槽可用时，作业调度程序（根据您的需要有一些行为不同的数字）识别将在该节点上运行的作业任务（基于许多标准，希望尽可能尊重数据局部性）并指示该节点上的任务跟踪器运行特定任务。

以编程方式，查看 JobClient 类的 javadocs，它应该能够获取有关正在运行的任务及其节点名称的信息（您可能需要进行 DNS 查找以获取我想象的实际 IP）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:39:16.730

Hadoop 附带了几个 Web 界面，默认情况下（请参阅 conf/hadoop-default.xml）在这些位置可用
`http://localhost:50030/ – web UI for MapReduce job tracker(s`：） `http://localhost:50060/ – web UI for task tracker(s)` `http://localhost:50070/ – web UI for HDFS name node(s)`

感谢@Chris .. 以编程方式查看 JobClient 类的 javadocs，它应该能够获取有关正在运行的任务及其节点名称的信息。

# html - 在 HTML 页面底部添加空格

> ID：10815188
> 
> 赞同：16
> 
> 时间：2012-05-30T11:15:47.010
> 
> 标签：html, css

我正在尝试创建一个网站，其中标题栏和页脚都位于固定位置，即标题栏始终位于顶部，页脚始终位于底部。

这产生了问题，我需要将页面上的内容向上推送，以便页面页脚不会与内容重叠。我需要在内容的底部添加一些空间，以便在用户滚动到页面底部时不会发生重叠。我试图向`margin-bottom`最底部的 DIV 添加一个 css 属性，以便在页面底部添加一些空间，这适用于使用`margin-top`css 属性的最顶部的 DIV，但不适用于底部。

这是我网站的主要结构，没有内容：

```
<html>
<head>
</head>
<body>
    <div class="CONTAINER">
        <div class="PAGENAVBAR">
        </div>
        <div class='CATEGORYNAVBAR'>
        </div>
        <div class='PAGE_CONTENT'>      
            <div class="LEFTCONTAINER">
            </div>

            <div class="RIGHTCONTAINER">
            </div>
        </div>
        <div class="PAGEFOOTER">
        </div>
    </div>
</body> 
```

有人可以建议一种方法来达到这种效果吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-04-17T23:36:50.260

我发现这很有效：

```
body {
    padding-bottom: 50px;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T11:20:27.740

margin-bottom 移动整个元素，尝试 padding-bottom 代替。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:20:47.900

将 padding-bottom 添加到最后一个元素应该这样做，或者您可以将 padding-bottom 添加到容器元素，请记住，如果您在 css 中设置了它，它将被添加到高度

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T11:17:50.867

使用段落来做到这一点。[html段落](http://www.w3schools.com/html/html_paragraphs.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:21:35.950

尝试使用 'padding-bottom' 代替。与“margin-bottom”相比，这种行为在不同浏览器中的行为更加一致。

但请注意，如果您在任何计算中使用它，这将增加相关元素的整体高度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T11:27:29.353

我会给`PAGE_CONTENT`一个`margin-bottom`；`overflow:hidden`如果您的`LEFTCONTAINER`and`RIGHT_CONTAINER`浮动，您可能还需要提供它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-29T13:04:18.453

在 css 中为容器类赋予 margin-bottom 属性。

```
.container{
    margin-bottom:100px;
} 
```

# visual-studio-2010 - 图钉 PositionOrigin 的设置器在 Visual Studio 和 Expression Blend 中引发错误

> ID：10815190
> 
> 赞同：0
> 
> 时间：2012-05-30T11:15:55.687
> 
> 标签：visual-studio-2010, windows-phone-7, xaml, expression-blend

好的。这应该很简单，但我找不到答案。

[这个答案](https://stackoverflow.com/a/4696061/359059)显示了如何将样式用于图钉，尤其是。设置图钉的原点。我无法弄清楚以下代码有什么问题。（应正确定义 XMLNS。）

```
<Style x:Key="OwnLocationStyle"
       TargetType="Microsoft_Phone_Controls_Maps:Pushpin">
    <Setter Property="Template" Value="{StaticResource OwnLocationTemplate}"/>
    <Setter Property="PositionOrigin" Value="BottomCenter"/>
</Style> 
```

此代码在模拟器上运行良好，但在 Expression Blend 中出现错误：

> 属性“PositionOrigin”不是 DependencyProperty。要在标记中使用，非附加属性必须通过可访问的实例属性“PositionOrigin”在目标类型上公开。对于附加属性，声明类型必须提供静态“GetPositionOrigin”和“SetPositionOrigin”方法。

Visual Studio 2010 给出以下错误：对象引用未设置为对象的实例，带有`Property="PositionOrigin"`蓝色下划线。

该怎么办？我不明白为什么它会编译和运行并且编辑器会抛出错误/警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:20:28.010

好的。因此，PositionOrigin 似乎不是 Pushpin 风格的一部分。您需要在代码中单独设置：

```
OwnLocation = new Pushpin()
{
    Style = App.Current.Resources["OwnLocationStyle"] as Style,
    PositionOrigin = PositionOrigin.BottomCenter
}; 
```

奇怪的是，它有点像风格的一部分。行为和现在完全一样。

# jquery - 如何使用 jQuery 生成等待弹出窗口

> ID：10815191
> 
> 赞同：-1
> 
> 时间：2012-05-30T11:16:05.043
> 
> 标签：jquery, android, jquery-mobile

我为此遇到了很多网站，但我没有得到任何想法。

任何人都能够逐步解释......在Android中使用jQuery**生成等待弹出窗口。**

**我想在加载联系人时弹出一个...**

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-30T12:32:55.147

检查这个

```
 function ShowPopup_click() {       
        $.mobile.loadingMessageTextVisible = true;
        $.mobile.loadingMessage = "Loading...";
        $.mobile.showPageLoadingMsg();
    }

 function HidePopup_click(){
        $.mobile.hidePageLoadingMsg();
    } 
```

参考：http: [//jsfiddle.net/7fxQf/25/](http://jsfiddle.net/7fxQf/25/)

# php - 从 Wordpress 中的外部脚本访问 cookie？

> ID：10815192
> 
> 赞同：0
> 
> 时间：2012-05-30T11:16:08.463
> 
> 标签：php, wordpress, cookies, wordpress-theming

我正在融合 Wordpress 安装和非常自定义的商店解决方案，该解决方案放置在 WP 安装域上它自己的文件夹（“/shop/”）中。

/shop/ 中的所有页面通过包含 wp_load.php 和 WP 函数来加载 Wordpresses 页眉和页脚等。

但是，当我从 /shop/ 文件夹中的 PHP 脚本设置 cookie 时，我无法在 wordpress 主题文件中检索它...

```
var_dump($_COOKIE["orderID"]); 
```

返回 /shop/ 内的值，但在常规 WP 页面上返回 NULL。

我的 /shop/ 页面中有我的自定义 cookie 参数 + WP 的东西，但常规的 WP 页面只有它自己的信息。

我猜WP以某种方式覆盖了我的cookie？任何人都可以提示我正确的方向吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:51:06.173

默认情况下，通过 PHP 设置的 cookie 只能从设置 cookie 的路径读取，因此在这种情况下，cookie 只能从 /shop/ url 中看到。看一下`path`php [set cookie](http://php.net/set_cookie)函数的参数，你需要将它设置为`/`

从文档中：

> **path** - cookie 可用的服务器上的路径。如果设置为“/”，cookie 将在整个域中可用。如果设置为 '/foo/'，则 cookie 将仅在 /foo/ 目录和域的 /foo/bar/ 等所有子目录中可用。默认值是设置 cookie 的当前目录。

# javascript - 仅在帧速率允许时才在 html5 画布中渲染特殊效果

> ID：10815193
> 
> 赞同：2
> 
> 时间：2012-05-30T11:16:11.407
> 
> 标签：javascript, html, render, game-loop

我设置我的游戏循环如下：

```
 window.requestAnimFrame = (function(){
        return  window.requestAnimationFrame   ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame    ||
            window.oRequestAnimationFrame      ||
            window.msRequestAnimationFrame     ||
            function( callback ){
                window.setTimeout(callback, 1000 / 60);
            };
    })();
    (function gameLoop() {
        var time                =   new Date().getTime();
        var dt                  =   (time - prevFTime) / 1000.0;
        prevFTime               =   time;

        state.effectsOn         =   dt > 1 / 60.0 ? true : false;
        state.effectsOn         =   false;

        //game rendering logic goes here

        window.requestAnimFrame(gameLoop);
    })(); 
```

现在我想要做的是，如果这个`effectsOn`变量被设置为良好的帧率，那么我将在我的游戏中渲染一些特殊效果。如果没有，我将直接跳过渲染那些特殊效果。

但我明显的问题是 if`dt>1/60`和 effectsOn 设置为 true。我将渲染特殊效果，这将导致渲染时间增加，因此有可能`dt < 1/60`使 effectsOn 变为 false。

有没有什么好的替代方法来实现我想要做的事情？

在最坏的情况下，我可以在我的主菜单中放置一个复选框之类的东西，让用户决定是否渲染特殊效果......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:20:24.233

最初只保留特殊效果。

如果在第一`n`帧之后平均渲染时间太长，请关闭它们，然后再关闭它们。

# iphone - iTunes Connect 物理应用内购买

> ID：10815195
> 
> 赞同：4
> 
> 时间：2012-05-30T11:16:16.607
> 
> 标签：iphone, in-app-purchase, app-store-connect

我知道苹果不允许在应用程序内购买实体商品，但我可以做这样的事情吗，当用户点击购买按钮时，我将使用网络视图加载网站的网址，如亚马逊等，然后用户可以从那里购买他想要的产品。苹果会允许吗？请。指导问候萨阿德

# c++ - 单击左上角的应用程序图标时如何禁用和启用窗口刷新？

> ID：10815196
> 
> 赞同：0
> 
> 时间：2012-05-30T11:16:17.727
> 
> 标签：c++, mfc, window

单击左上角的应用程序图标时如何禁用和启用窗口刷新？

例如，在窗口中，每个 .exe 的左上角都有一个图标，当我们右键单击该图标时，某些应用程序会停止刷新其窗口（例如，如果应用程序具有文本输入，当您左键单击左上角图标，文本输入中的光标将停止闪烁），对于其他一些应用程序，当您左键单击左上角图标时，应用程序窗口仍然会刷新，如何启用或禁用此功能？

欢迎任何代码示例，问题很紧急，请提供帮助。

感谢一个迷路。哇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:51:22.157

这是用 Windows 实现的标准菜单行为。最好不要覆盖它，因为它真的很痛苦。您还可以放置一个等待逻辑（使用 WaitForSingleObject）或休眠一段时间，但这会使应用程序无响应。

如果你能解释一下目的，我们也许能更好地帮助你。

# ssl - Erlang 在内存中获取 SSL 连接的确切大小

> ID：10815198
> 
> 赞同：2
> 
> 时间：2012-05-30T11:16:25.387
> 
> 标签：ssl, erlang, size

erlang 中有没有办法准确获取 SSL 连接需要多少内存？

现在我有点猜测通过将内存中的整个 beam.smp 大小（减去初始化大小）除以连接的客户端数量......

我正在使用 R15B01

SSL 连接由 gen_server 处理，执行

```
process_info(spawn(Fun), memory). 
```

在 gc 调用后给我：

```
{memory,2108} 
```

这显然不包含 SSL 套接字连接大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:04:23.287

问题是即使处理单个 SSL 连接，Erlang 也会启动几个单独的进程（证书数据库、ssl 管理器、ssl 会话等），并且每个进程都可能有一个单独的数据存储。因此，很难给出一个明确的答案，每个连接需要多少内存，因为有很多地方保存有关连接的簿记信息。

如果您需要估算，我会执行以下操作：

1.  如[http://pdincau.wordpress.com/2011/06/22/a-brief-introduction-to-ssl-with-erlang/中所述启动 SSL 服务器和 SSL 客户端](http://pdincau.wordpress.com/2011/06/22/a-brief-introduction-to-ssl-with-erlang/)
2.  保存`TotalMemory1 = proplists:get_value(total, memory()).`在服务器会话中。
3.  试图从一个单独的客户端会话中再打开 99 个客户端连接。
4.  计算出来的`TotalMemory2 = proplists:get_value(total, memory()).`
5.  通过除法找出单个连接占用的内存量`(TotalMemory2 - TotalMemory1)/99`。

# git - 如何更新 Git 克隆

> ID：10815203
> 
> 赞同：69
> 
> 时间：2012-05-30T11:16:40.040
> 
> 标签：git

我已经开始使用 Git。我已经在我的本地系统上克隆了 repo。我在本地机器上进行更改并用于`git push`更新远程仓库。它工作正常。

我有一个快速查询如何从远程更新我的克隆。我试过了`git remote update`。它不起作用，没有出现新的变化。我只是想在开始工作之前确保我有最近的 repo 副本。如何更新克隆？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-30T11:17:56.447

如果要获取+合并，请运行

```
git pull 
```

如果您只想获取：

```
git fetch 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-09-15T08:09:08.110

```
git pull origin master 
```

这会将您的 master 同步到中央仓库，如果新分支被推送到中央仓库，它也会更新您的克隆副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-24T20:09:38.920

在 Android Studio 中，它的 VCS 然后 Pull 然后 Master

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-13T18:41:49.873

在当前的 GitHub 命名法中，“master”被替换为“main”，所以使用的命令是`git pull origin main`

# excel - 将 Excel 连接到 Access

> ID：10815204
> 
> 赞同：2
> 
> 时间：2012-05-30T11:16:40.163
> 
> 标签：excel, ms-access

我正在尝试在具有以下查询的数据库上连接 excel。

```
SELECT * FROM Products WHERE Order = [Enter Order] 
```

但 excel 似乎找不到这个查询。它只显示实际表和其他不使用参数的查询。

有没有办法在使用参数的查询上连接 excel？我正在使用 MS-Excel 2007。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:46:09.070

一些笔记。

> “必须在 Microsoft Query 中创建参数查询。”

[自定义参数查询](http://office.microsoft.com/en-us/excel-help/customize-a-parameter-query-HP005199548.aspx)
[使用 Microsoft Query 检索外部数据](http://office.microsoft.com/en-us/excel-help/use-microsoft-query-to-retrieve-external-data-HA010099664.aspx)

ADODB 和 VBA

```
''Ref: Microsoft ActiveX Data Objects x.x Library
Dim cmd As New ADODB.Command
Dim conn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim prm As ADODB.Parameter
Dim strConn As String

strConn = "Provider = Microsoft.ACE.OLEDB.12.0;" _
        & "Data Source=z:\docs\test.accdb"

conn.Open strConn

cmd.ActiveConnection = conn
cmd.CommandText = "Query4"
cmd.CommandType = adCmdStoredProc
Set prm = cmd.CreateParameter("EnterText", adVarWChar, adParamInput, 50)
cmd.Parameters.Append prm
cmd.Parameters("EnterText").Value = ActiveWorkbook.Sheets("Sheet5").[A2]

'Execute the Stored Procedure
Set rs = cmd.Execute
ActiveWorkbook.Sheets("Sheet8").Cells(2, 1).CopyFromRecordset rs
'Close the connection
conn.Close 
```

# lucene.net - 在具有多个 Web 服务器的现有 .NET/SQL Server 堆栈上实施 Lucene - 在数据库中存储索引？

> ID：10815206
> 
> 赞同：17
> 
> 时间：2012-05-30T11:16:51.173
> 
> 标签：lucene.net

这篇文章为我提供了大量信息：
[Implement Lucene on Existing .NET / SQL Server stack with multiple webservers](https://stackoverflow.com/questions/6532429/implement-lucene-on-existing-net-sql-server-stack-with-multiple-webservers/6533703#6533703)

我想继续通过询问实现 Lucene 目录的概念，该目录将索引持久保存到数据库（在我的情况下为 SQL Server） - 如果有人有一个 SWAG 的努力会有所帮助。

我可以看到 Java 领域有这个（例如 Compass），我真的希望 Stackoverflow 的人可能会考虑这个？对于任何反馈，我们都表示感谢。

我的菜鸟想法是，将索引持久化到数据库将是解决“分布”问题的一种方法。因此，与其实现消息传递（由于部署限制，我的软件无法实现），或者调度（没问题 - 产品人员总是在决定“当前”索引数据必须如何做决定时感到不安），IndexReader 重新打开（ ) 将有效地更新任何服务器节点上的索引快照。

如果数据库并发/负载不是要解决的问题的核心，这是否可行？- 我们的使用侧重于促进对字段的不同数据分析，从而促进不同形式的匹配。

我们的部署架构/限制实际上不允许我们坚持使用专用服务器 ala SOLR，因此这种分发概念已被我们打折。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:34:49.620

您等待多少索引更改？您想何时阅读索引？（在应用程序启动时？）将索引放入数据库并在创建索引时“下载”它可能会消耗太多资源。

不确定您的部署限制，但您能否为您的机器提供共享文件空间（例如 SMB/NFS 共享或类似的，甚至是基于 SAN 的解决方案）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:51:29.003

我会有点害怕数据库中索引的性能问题。看看[弹性搜索](http://www.elasticsearch.org/)。它是指南针的继任者。它需要 Java，但为您的 .NET 解决方案提供了一个非常简洁的 REST 接口。Elasticsearch 支持多个节点之间的分布和复制。您可以在网络服务器节点上运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-01T16:22:40.437

此解决方案将破坏索引的性能，因为它必须从数据库中检索它。我强烈建议转向更新/更好的替代方案，即 Solr（例如使用[Solr.NET](https://github.com/SolrNet/SolrNet/blob/master/Documentation/README.md)）或 ElasticSearch（使用[NEST](https://www.elastic.co/guide/en/elasticsearch/client/net-api/5.x/index.html)）

Solr 是 Lucene 索引的高级接口/管理器，为您解决了简化的配置、集群、复制等问题。好消息是，如果你有一些经验。使用 Lucene，这不会是那么大的一步

ElasticSearch 是一种不同的方法，但它并不难学。

# c# - 从使用 POP 协议 C# 下载的消息中存储 UID

> ID：10815212
> 
> 赞同：1
> 
> 时间：2012-05-30T11:17:05.387
> 
> 标签：c#, sql, pop3, uid, openpop

我在这里问您以下问题：使用 OpenPop.Net 库时，如何将 POP 服务器中消息的唯一 ID 存储到我的数据库中？这是“FetchMessage”功能：

```
public static List<OpenPop.Mime.Message> FetchUnseenMessages(string hostname, int port, bool useSsl, string username, string password, List<string> seenUids)
    {
        // The client disconnects from the server when being disposed
        using (Pop3Client client = new Pop3Client())
        {
            // Connect to the server
            client.Connect(hostname, port, useSsl);

            // Authenticate ourselves towards the server
            client.Authenticate(username, password, AuthenticationMethod.UsernameAndPassword);

            // Fetch all the current uids seen
            List<string> uids = client.GetMessageUids();

            // Create a list we can return with all new messages
            List<OpenPop.Mime.Message> newMessages = new List<OpenPop.Mime.Message>();

            // All the new messages not seen by the POP3 client
            for (int i = 0; i < uids.Count; i++)
            {
                string currentUidOnServer = uids[i];
                if (!seenUids.Contains(currentUidOnServer))
                {
                    // We have not seen this message before.
                    // Download it and add this new uid to seen uids

                    // the uids list is in messageNumber order - meaning that the first
                    // uid in the list has messageNumber of 1, and the second has 
                    // messageNumber 2\. Therefore we can fetch the message using
                    // i + 1 since messageNumber should be in range [1, messageCount]
                    OpenPop.Mime.Message unseenMessage = client.GetMessage(i + 1);

                    // Add the message to the new messages
                    newMessages.Add(unseenMessage);

                    // Add the uid to the seen uids, as it has now been seen
                    seenUids.Add(currentUidOnServer);
                }
            }

            // Return our new found messages
            return newMessages;
        }
    } 
```

这是“GetEMail”功能的一部分（调用上述功能的那个）（评论也是葡萄牙语......）：

```
//primeiro obter informação de contas
        SqlCeConnection Con = conecao.ligardb(); //ligar a base de dados
        Con.Open();
        string myQuery = "SELECT * FROM Contas"; //construir query
        SqlCeCommand myCommand = new SqlCeCommand(myQuery, Con); //construir comando
        SqlCeDataReader myDataReader = myCommand.ExecuteReader(); //executar comando e armazenar informações

        while (myDataReader.Read()) //ler data reader repetidamente
        {
            int tipo = Convert.ToInt32(myDataReader["Tipo"]); //obter tipo de conta
            bool seguro = Convert.ToBoolean(myDataReader["Seguro"]); //obter se e seguro ou nao
            int idConta = Convert.ToInt32(myDataReader["ID"]); //obter id de conta

            if (tipo == 1 && seguro == false) //POP3 sem SSL
            {
                string hostname = Convert.ToString(myDataReader["Serv_Recep"]); //obter servidor de recepçao
                string user = Convert.ToString(myDataReader["User"]); //obter id de utilizador
                string pass = Convert.ToString(myDataReader["Pass"]); //obter pass de utilizador

                List<string> Uids = new List<string>(); //lista para obter e-mails ja obtidos

                //Obter pasta
                string query_pasta = "SELECT id FROM Pastas WHERE idContas=@id AND Nome=@nome";
                SqlCeCommand cmd_pasta = new SqlCeCommand(query_pasta, Con);
                cmd_pasta.Parameters.AddWithValue("@id", idConta);
                cmd_pasta.Parameters.AddWithValue("@nome", "Recebidas");

                SqlCeDataReader dr_pasta = cmd_pasta.ExecuteReader();
                dr_pasta.Read();
                int idPasta = Convert.ToInt32(dr_pasta["id"]);

                //obrer e-mails ja obtidos
                string query = "SELECT Uids FROM Mensagens WHERE Conta=@id AND Pasta=@pasta"; //contruir query
                SqlCeCommand command = new SqlCeCommand(query, Con); //construir comando
                //atribuir parametros
                command.Parameters.AddWithValue("@id", idConta);
                command.Parameters.AddWithValue("@pasta", idPasta);

                SqlCeDataReader datareader = command.ExecuteReader(); //executar e ler comando

                while (datareader.Read()) //ler datareader
                {
                    string ids = Convert.ToString(datareader["Uids"]); //obter uid
                    Uids.Add(ids); //adicionar uid

                }

                List<OpenPop.Mime.Message> NewMessage = new List<OpenPop.Mime.Message>(); //criar lista de mensagens
                NewMessage = FetchUnseenMessages(hostname, 110, false, user, pass, Uids); //obter mensagens

                for (int y = 0; y < NewMessage.Count; y++)
                {
                    //Guardar mensagem em disco
                    string file_name = NewMessage[y].Headers.MessageId;
                    file_name = file_name + ".eml";

                    string path = System.Environment.GetFolderPath(Environment.SpecialFolder.Personal) + "\\izzy_mail\\" + Convert.ToString(myDataReader["Endereço"]) + "\\Recebidos\\"; //Criar directorioa de destino do .eml
                    if (!Directory.Exists(path))
                    {
                        Directory.CreateDirectory(path);

                    }

                    path = path + file_name;

                    FileStream File = System.IO.File.Create(path);

                    NewMessage[y].Save(File);

                    //Guardar na base de dados
                    string assunto = NewMessage[y].Headers.Subject;//obter assunto
                    string origem = NewMessage[y].Headers.From.Address; //obter origem
                    string uid = NewMessage[y].Headers.MessageId; //obter id da mensagem
                    //criar nova query
                    string query_ins = "INSERT INTO Mensagens (Assunto, De, Pasta, Uri, Uids, Conta) VALUES (@assunto, @de, @pasta, @uri, @uid, @id)"; //contruir query
                    SqlCeCommand cmd_ins = new SqlCeCommand(query_ins, Con); //construir comando
                    //parametrizar o comando
                    cmd_ins.Parameters.AddWithValue("@assunto", assunto);
                    cmd_ins.Parameters.AddWithValue("@de", origem);
                    cmd_ins.Parameters.AddWithValue("@id", idConta);
                    cmd_ins.Parameters.AddWithValue("@pasta", idPasta);
                    cmd_ins.Parameters.AddWithValue("@uid", uid);
                    cmd_ins.Parameters.AddWithValue("@uri", path);

                    cmd_ins.ExecuteNonQuery(); //Executar insert

                }

            }
            else if 
```

所以有人知道如何解决我的问题吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T06:25:53.917

建立数据库连接：

```
protected void Page_Load(object sender, EventArgs e)
    {
        //connection to db;
    } 
```

创建以下存储过程：

```
CREATE PROCEDURE dbo.getAllSeenUuids

AS
    SELECT uuid FROM seenUuids
    RETURN

CREATE PROCEDURE dbo.saveToSeenUuids
    (@seenUuid varchar(50))
AS
    INSERT INTO seenUuids (uuid) VALUES (@seenUuid)
    RETURN 
```

将以下内容添加到函数中`FetchUnseenMessages`：

```
DataSet ds = new DataSet();
ds = DB.ExecuteQuery_SP("getAllSeenUuids");
List<string> uuids = pop3Client.GetMessageUids();
List<string> listSeenUuids = new List<string>();
List<string> newListSeenUuids = new List<string>();
List<Message> newMessages = new List<Message>();
List<string> listUnreadUuids = new List<string>();
for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
{
    listSeenUuids.Add(ds.Tables[0].Rows[i][0].ToString());
}
for (int i = uuids.Count - 1; i >= 0; i--)
{
    if (!listSeenUuids.Contains(uuids[i]))
    {
        Message unseenMessage = pop3Client.GetMessage(i + 1);
        newMessages.Add(unseenMessage);
        object[,] parArray = new object[,] { { "@seenUuid", uuids[i] } };
        //Call Stored Procedure_SP("saveToSeenUuids", parArray);
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-08T11:28:30.397

我创建了一个包含 uid 和消息的结构：

```
 private struct mailwithuid
    {
        public OpenPop.Mime.Message mail;
        public string uid;
        public mailwithuid(OpenPop.Mime.Message _mail,string _uid)
        {
            mail = _mail;
            uid = _uid;
        }
    } 
```

并修改了 FetchUnseenMessages() 函数：

```
 private List<mailwithuid> FetchUnseenMessages(string hostname, int port, bool useSsl, string username, string password, List<string> seenUids)
    {
        using (Pop3Client client = new Pop3Client())
        {
            client.Connect(hostname, port, useSsl);
            client.Authenticate(username, password);

            List<string> uids = client.GetMessageUids();

            List<mailwithuid> newMessages = new List<mailwithuid>();

            for (int i = 0; i < uids.Count; i++)
            {
                string currentUidOnServer = uids[i];
                if (!seenUids.Contains(currentUidOnServer))
                {
                    OpenPop.Mime.Message unseenMessage = client.GetMessage(i + 1);
                    newMessages.Add(new mailwithuid(unseenMessage, currentUidOnServer));
                    seenUids.Add(currentUidOnServer);
                }
            }
            return newMessages;
        }
    } 
```

最后，我可以从我的代码中访问消息和 uid：

```
 List<mailwithuid> newmessages = FetchUnseenMessages("x", 110, false, "x@x", "x", volt);
        foreach (mailwithuid u2 in newmessages)
        {
            OpenPop.Mime.Message u = u2.mail;
            string uid = u2.uid;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:57:51.270

So, with the help of Ben I've come to this solution:

1.  I've created a public list named UID
2.  Added the following code after newMessage.Add() in the FetchUnseenMessages() function:

    Uid.Add(currentUidOnServer);

3.  Replaced

    string uid = NewMessage[y].Headers.MessageId; //obter id da mensagem

With:

```
string uid = Uid[y]; //obter id da mensagem 
```

And now it works!

# node.js - nodejs日志文件在哪里？

> ID：10815218
> 
> 赞同：134
> 
> 时间：2012-05-30T11:17:32.487
> 
> 标签：node.js

我找不到存储 nodejs 日志文件的地方。因为在我的节点服务器中我有“分段错误”，我想查看日志文件以获取更多信息......

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-05-30T11:21:19.173

没有日志文件。每个 node.js“应用程序”都是一个单独的实体。默认情况下，它会将错误记录到 STDERR 并输出到 STDOUT。当您从 shell 运行它以记录到文件时，您可以更改它。

```
node my_app.js > my_app_log.log 2> my_app_err.log 
```

或者（推荐），您可以手动或使用许多日志库之一在应用程序中添加日志记录：

*   [温斯顿](https://github.com/flatiron/winston)
*   [log4js](https://github.com/nomiddlename/log4js-node)
*   ...

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-20T20:15:16.940

你可能对[永远感兴趣。](https://github.com/nodejitsu/forever)它将运行带有日志记录选项的 .js-File 24/7。以下是帮助文本中的两个片段：

> [Long Running Process] forever 进程将继续运行，将日志消息输出到控制台。前任。永远 -o out.log -e err.log my-script.js

和

> [守护进程]永久进程将作为守护进程运行，这将使目标进程在后台启动。这对于在不使用 nohup 的情况下远程启动简单的 node.js 脚本非常有用。建议使用 -o -l, & -e 启动。前任。永远开始 -l forever.log -o out.log -e err.log my-daemon.js 永远停止 my-daemon.js

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-06T21:32:54.413

如果您在开发中使用 docker，您可以在另一个 shell 中执行此操作： docker attach running_node_app_container_name

这将向您显示 STDOUT 和 STDERR。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-31T06:43:35.710

对于 nodejs 日志文件，您可以使用 winston 和 morgan 代替您的 console.log() 语句，用户 winston.log() 或其他 winston 方法来记录。要使用 winston 和 morgan，您需要使用 npm 安装它们。示例： npm i -S winston npm i -S morgan

然后在你的项目中创建一个名为 winston 的文件夹，然后在该文件夹中创建一个 config.js 并复制下面给出的代码。

```
const appRoot = require('app-root-path');
const winston = require('winston');

// define the custom settings for each transport (file, console)
const options = {
  file: {
    level: 'info',
    filename: `${appRoot}/logs/app.log`,
    handleExceptions: true,
    json: true,
    maxsize: 5242880, // 5MB
    maxFiles: 5,
    colorize: false,
  },
  console: {
    level: 'debug',
    handleExceptions: true,
    json: false,
    colorize: true,
  },
};

// instantiate a new Winston Logger with the settings defined above
let logger;
if (process.env.logging === 'off') {
  logger = winston.createLogger({
    transports: [
      new winston.transports.File(options.file),
    ],
    exitOnError: false, // do not exit on handled exceptions
  });
} else {
  logger = winston.createLogger({
    transports: [
      new winston.transports.File(options.file),
      new winston.transports.Console(options.console),
    ],
    exitOnError: false, // do not exit on handled exceptions
  });
}

// create a stream object with a 'write' function that will be used by `morgan`
logger.stream = {
  write(message) {
    logger.info(message);
  },
};

module.exports = logger; 
```

复制上述代码后，创建一个名为 logs 的文件夹，与 winston 或任何您想要的位置平行，并在该日志文件夹中创建一个文件 app.log。返回 config.js 并将第 5 行“filename: `${appRoot}/logs/app.log`”中的路径设置为您创建的相应 app.log。

在此之后转到您的 index.js 并在其中包含以下代码。

```
const morgan = require('morgan');
const winston = require('./winston/config');
const express = require('express');
const app = express();
app.use(morgan('combined', { stream: winston.stream }));

winston.info('You have successfully started working with winston and morgan'); 
```

# ruby-on-rails - nginx、passenger、rails：没有要加载的文件--bundler

> ID：10815226
> 
> 赞同：5
> 
> 时间：2012-05-30T11:18:12.253
> 
> 标签：ruby-on-rails, nginx, passenger

我为在 nginx 上运行的 rails 应用程序设置了一个 OSX 网络服务器。当我手动启动服务器时，rails 应用程序工作正常，但是当我重新启动服务器时，我总是收到乘客错误消息

> 没有要加载的文件--bundler

我想这与我手动设置的启动守护进程有关：

```
# /Library/LaunchDaemons/org.nginx.ngnx.plist

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>nginx</string>
    <key>UserName</key>
    <string>MyUser</string>
    <key>ProgramArguments</key>
    <array>
        <string>/usr/local/Cellar/nginx/1.0.11/sbin/nginx</string>
        <string>-g</string>
        <string>daemon off;</string>
    </array>
    <key>KeepAlive</key>
    <true/>
    <key>NetworkState</key>
    <true/>
    <key>LaunchOnlyOnce</key>
    <true/>
</dict>
</plist> 
```

如您所见，我`MyUser`在 plist 中用作 UserName。nginx 服务器在启动后启动并以 MyUser 身份运行，但我收到此错误消息。

当我在命令行上重新启动它时，`sudo nginx -s stop && nginx`一切正常。

任何想法为什么？

***编辑***

我的 nginx.conf 看起来像这样：

```
env GEM_HOME=/usr/local/rvm/gems/ruby-1.9.2-p290@rails311/gems;
worker_processes 1;

events {
  worker_connections 1024;
}

http {
  include mime.types;
  default_type application/octet-stream;
  sendfile on;
  keepalive_timeout     60 60;
  send_timeout          120;

  recursive_error_pages on;

  error_log  /var/log/nginx/error.log;
  access_log  /var/log/nginx/access.log;

  gzip on;
  gzip_http_version 1.1;
  gzip_comp_level 4;
  gzip_proxied any;
  gzip_vary on;
  gzip_min_length 1100;
  gzip_buffers 32 16k;

  #server_tokens off;
  tcp_nopush    on;
  tcp_nodelay   on;
  keepalive_requests 0;

  passenger_default_user eveadmin;
  passenger_default_group staff;
  passenger_root /usr/local/rvm/gems/ruby-1.9.2-p290@rails311/gems/passenger-3.0.12;
  passenger_ruby /usr/local/rvm/rubies/ruby-1.9.2-p290/bin/ruby;

  server {
     listen 8444;
     #server_name intranet.local;
     root /Users/eveadmin/rails/intranet/public;
     passenger_enabled on;
     rails_env development;
  }
} 
```

![我得到的错误](../Images/fa9399112a6762069431b38c929f678b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:10:08.473

安装 ruby​​gems 或 bundler 时是否使用了 sudo？如果是这样，请尝试在本地重新安装它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:50:26.147

我在使用 bundler 时也遇到过这个问题。在某些环境中，如果我使用 sudo 运行 bundle，我会收到您所看到的错误，如果我在没有 sudo 的情况下运行它，那么它可以正常工作。

我相信这可能是因为您的`$PATH`和`$GEM_HOME`变量未设置 b/c 您的用户的 shell 环境（可能是 bash）未加载。也许你应该把你的命令改成这样：

```
/bin/bash -l -c '/usr/local/Cellar/nginx/1.0.11/sbin/nginx' 
```

如果这不起作用，您是否尝试过将 UserName 键从启动守护程序中取出，看看会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T12:25:56.920

尝试在你的 nginx.conf 中设置passenger_default_user 和passenger_default_group。

默认值为nobody，这可能会导致您的问题。

有关详细信息，请参阅[Phusion 乘客用户指南](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerDefaultUser)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T10:40:22.603

我的 2 美分：尝试在 nginx 配置中设置 GEM_HOME 环境变量。

# javascript - 使用 scrollview 插件的 Div scolling

> ID：10815227
> 
> 赞同：-1
> 
> 时间：2012-05-30T11:18:17.770
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jquerymobile，我想单独滚动每个 div，例如：

```
 <div data-role="content">
    <div id="1"></div>
    <div id="2"></div>
   </div> 
```

现在我想要那个，`div#1 scroll left - right` & `div#2 scroll top - bottom`。我正在使用滚动视图插件，但我无法做到这一点。任何人都可以通过一些示例代码帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:50:39.783

我假设您将它与实验性的 jQuery Mobile 滚动视图一起使用。

您可以将 data-scroll 属性的值设置为`data-scroll="y"`或`data-scroll="x"`将滚动方向设置为垂直或水平。

# mongodb - 在版本 2 之前的版本中使用 mongodb 中的逻辑和运算符进行查询

> ID：10815228
> 
> 赞同：-1
> 
> 时间：2012-05-30T11:18:30.930
> 
> 标签：mongodb

你能告诉我，如果是这样的：

```
db.subscribers.find({ LISTID: 59,  {$and : [ {field: { $in: ['English', 'Spanish']} }, 
                                             {field: {$nin: ['Chinese']}}] }} 
```

可以重写以在 2 之前的 mongodb 版本中工作吗？或者在这些版本中不可能进行这样的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:20:24.283

正如您在文档中所读到的，此运算符仅适用于 v2.0+。因此，在以前的版本中，它根本不存在。

您可以升级您的 mongod，也可以获取源代码并自己实现运算符。

# jquery - jQuery克隆的对象没有被拾取

> ID：10815235
> 
> 赞同：0
> 
> 时间：2012-05-30T11:18:59.603
> 
> 标签：jquery, clone

我有两个表，两个表中的每一行都有`<td>`一个复选框。目前，当在第二个表上检查某些内容时，它会复制该行（使用`.clone()`）。当第一个表中的一行未被选中时，它应该从第一个表中删除。

这对于页面生成时第一个表中的行非常有效。但是克隆的行不会触发 jQuery，我想知道我应该采取什么方法来解决这个问题。

这是jsfiddle：http: [//jsfiddle.net/3BZp4/21/](http://jsfiddle.net/3BZp4/21/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:22:24.360

`true`作为第[一个参数`.clone`](http://api.jquery.com/clone/)传递以确保已经在这些元素上注册的事件也被复制。

见[http://jsfiddle.net/alnitak/Kr248/](http://jsfiddle.net/alnitak/Kr248/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:24:52.297

像这样将 true 传递给 clone() API，`.clone(true)`以便复制事件处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:22:46.637

发生这种情况是因为选择器 like`$('#featured tbody tr td input.checkbox').on(...)`只能用于`tr`已经在页面中，所以尝试以这种方式进行更改

```
$('#featured').on('change', 'input.checkbox', function(e) {
...
}) 
```

和

```
$('#offers').on('change', 'input.checkbox', function (e) {
...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:23:27.583

您可以使用[live](http://api.jquery.com/live/)而不是[on](http://api.jquery.com/on/)来解决您的问题

# ios - 显示启动画面而不是快照

> ID：10815241
> 
> 赞同：1
> 
> 时间：2012-05-30T11:19:19.397
> 
> 标签：ios, background, splash-screen, snapshot, default.png

我的问题是应用程序在挂起模式下打开时显示的初始屏幕。

当应用程序关闭并打开它时，我会看到 Default.png 启动屏幕，这正是我所需要的。

但是，如果我将它发送到后台并重新打开它，我会看到我所在的最后一个屏幕的快照，并且我想看到启动屏幕。

我什至考虑过在进入后台时强制应用程序退出，但我宁愿显示快照而不是这样做。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:23:47.050

您无法更改应用程序启动 ( **Default.png** ) 或进入前台时显示的图像（先前应用程序状态的快照）。

问问自己，每次应用程序进入前台时显示启动屏幕如何改善用户体验？

* * *

编辑：这是一个解决方法的猜测：

根据您在下面的评论，听起来您说如果用户总是回到主操作屏幕就可以了。在该`applicationWillResignActive:`方法中，您能否检查用户在哪个屏幕上，如果它不是主操作屏幕，请移回该屏幕......然后快照将是主操作屏幕（也许！）

# php - JSONP没有给出任何响应

> ID：10815242
> 
> 赞同：0
> 
> 时间：2012-05-30T11:19:27.527
> 
> 标签：php, javascript, json, jsonp

以下是我的代码：

```
$.ajax({
              url: url,
              type: 'GET',
              dataType: 'jsonp',
              error: function(xhr, status, error) {
                       alert("xhr="+xhr+"  status="+status+"   Error="+error);
                     },
                     success: function(jsonp) { 
                       alert("success");
                     }
      }); 
```

网址包含位于我所做的外部服务器上的 php 文件`echo json_encode($array);`

响应显示在 firebug net 选项卡中，但警报显示以下错误：

**xhr=[object Object] status=parsererror Error=Error: jQuery17209610263814778152_1338375769339 未被调用。alert 未显示成功**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:26:32.297

试试这个：

```
echo $_GET["callback"] . "(" . json_encode( $array ) . ");"; 
```

# android - 使用 android 中的 ActionBarsherlock 选项卡选择选项卡时在活动之间切换

> ID：10815247
> 
> 赞同：1
> 
> 时间：2012-05-30T11:19:50.860
> 
> 标签：android, tabs, actionbarsherlock

我正在使用 ActionBarsherlock 库在操作栏中使用选项卡。选择选项卡时如何在活动之间切换。我的代码如下

```
public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        DetailFragment fragment =   (DetailFragment) getSupportFragmentManager()
        .findFragmentById(R.id.detailFragment);

        getSupportActionBar().setDisplayShowHomeEnabled(false);
        getSupportActionBar().setDisplayShowTitleEnabled(false);
        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        for (int i = 1; i <= 5; i++) 
        {
            ImageView myMediaImg;   
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setCustomView(R.layout.tab);
            tab.setTabListener(this);
            if(i==1)
            {

                myMediaImg = (ImageView) tab.getCustomView().findViewById(R.id.sk_abs__tab_icon);
                myMediaImg.setImageResource(R.drawable.ic_launcher);
                tab.setTag("tab1");

            }   
            if(i==2)
            {
                myMediaImg = (ImageView) tab.getCustomView().findViewById(R.id.sk_abs__tab_icon);
                myMediaImg.setImageResource(R.drawable.ic_launcher);
                tab.setTag("tab2");

            }
            if(i==3)
            {
                myMediaImg = (ImageView) tab.getCustomView().findViewById(R.id.sk_abs__tab_icon);
                myMediaImg.setImageResource(R.drawable.ic_launcher);
                tab.setTag("tab3");

            }
            if(i==4)
            {
                myMediaImg = (ImageView) tab.getCustomView().findViewById(R.id.sk_abs__tab_icon);
                myMediaImg.setImageResource(R.drawable.ic_launcher);
                tab.setTag("tab4");

            }
            if(i==5)
            {
                myMediaImg = (ImageView) tab.getCustomView().findViewById(R.id.sk_abs__tab_icon);
                myMediaImg.setImageResource(R.drawable.ic_launcher);
                tab.setTag("tab5");

            }
            getSupportActionBar().addTab(tab);
        }

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {

        if(tab.getTag().equals("tab1"))
        {
            Intent intent = new Intent(Activity1.this,Activity1.class);
            startActivity(intent);
        }
        if(tab.getTag().equals("tab2"))
        {
            Intent intent =new Intent(Activity1.this,Activity2.class);
            startActivity(intent);
        }
        if(tab.getTag().equals("tab3"))
        {
            Intent intent = new Intent(Activity1.this,Activity3.class);
            startActivity(intent);
        }
        if(tab.getTag().equals("tab4"))
        {
            Intent intent = new Intent(Activity1.this,Activity4.class);
            startActivity(intent);
        }
        if(tab.getTag().equals("tab5"))
        {
            Intent intent = new Intent(Activity1.this,Activity5.class);
            startActivity(intent);
        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    } 
```

当我运行应用程序 Activity1 反复切换（从 logcat 获得）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:57:26.693

根据他们[在这里](https://groups.google.com/group/actionbarsherlock/browse_thread/thread/641762536860de8a/a1004be22dae45d9)所说的，这将无法使用选项卡在活动之间导航。:( 但如果你找到了解决方案，请让我更新。谢谢。

# c# - 使用 c# 测试 smtp 邮件服务器的可用性

> ID：10815251
> 
> 赞同：2
> 
> 时间：2012-05-30T11:20:04.200
> 
> 标签：c#, asp.net-mvc-3, smtp, ping

我有一个用 C# 编写的 MVC3 Web 应用程序。我正在使用 McvMailer 从应用程序中发送电子邮件，一切正常。

我遇到的问题是我们的 smtp 服务器不在托管应用程序的 Web 服务器附近，并且有时 smtp 服务器可能不可用。

在为用户提供发送电子邮件的选项之前，我需要能够检测 smtp 服务器是否可用。到目前为止，我想出的最好方法是使用本文中@John Leidegren 回答的解决方案来 ping smtp[服务器](https://stackoverflow.com/questions/614336/check-if-a-server-is-available)。

但是，路由器似乎正在响应 ping 而不是 smtp 服务器。请记住，服务器不可用的主要原因是互联网连接失败，如果必须，我可能会接受这个解决方案，但如果我能在尝试之前确保 smtp 服务的可用性，那就太好了发送电子邮件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:23:08.167

是的，ping 是一个好的开始，但要确定 SMTP 网关是否可用，请通过 SMTP 端口发出 HELO 命令。

我会尝试找到一个很好的例子。

编辑：

你很幸运。这是一个用 C# 编写的完整的 TELNET 客户端。 [https://www.nuget.org/packages/Telnet](https://www.nuget.org/packages/Telnet)

# android - 如何从 Android 平板电脑 ping 服务器

> ID：10815252
> 
> 赞同：2
> 
> 时间：2012-05-30T11:20:06.950
> 
> 标签：android, ping, inetaddress

我正在尝试编写一个 android 平板电脑应用程序，它扫描本地网络中的一组 ip 地址并检查它们是否正在使用或活动。我正在使用

```
InetAddress.getByName(ipAd).isReachable(100) 
```

但是当我检查日志时，它在网络上的某些计算机上返回 false 和 true。我尝试手动 ping 机器，它就像一个魅力，但从 android 设备并非所有计算机都返回 true。我还允许本地网络中机器的防火墙上的 ICMP ping 请求。

有人对此有任何想法吗？

提前致谢

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T22:13:59.100

我设法解决了。我所做的是我发送了一条广播消息并实现了一个 UDPListener。它回复了我的广播消息。

提前感谢您的帮助

干杯

# android - 如何在 Android 地图上制作动画叠加图钉

> ID：10815255
> 
> 赞同：1
> 
> 时间：2012-05-30T11:20:23.310
> 
> 标签：android, android-animation, android-maps

我正在地图上显示图标的数量，现在我希望这些图标应该闪烁，请指导我如何操作。我们可以使用两个图像来表示亮度和暗度，但主要问题是如何更改该叠加图像或如何在该图像上放置动画以使其闪烁。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:24:12.550

如果您将 ImageView 用于图标，则将其放在可绘制的 xml 下方并用作 Imageview src。

```
<animation-list   android:id="@+id/my_animation" android:oneshot="false" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/image1" android:duration="150" />
    <item android:drawable="@drawable/image2" android:duration="150" />
 </animation-list> 
```

并使用下面的代码来设置动画

```
 ImageView img = (ImageView)findViewById(R.id.imageView);
 AnimationDrawable frameAnimation =    (AnimationDrawable)img.getDrawable();
 frameAnimation.setCallback(img);
 frameAnimation.setVisible(true, true);
 frameAnimation.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:27:03.130

您必须制作自定义视图并将其用作地图叠加层。

告诉它的 OnDraw() 在 500 毫秒后使整个视图无效，并且每次再次绘制时都使用替代图像。

此链接可能对您有帮助：

[http://blog.pocketjourney.com/2008/03/19/tutorial-2-mapview-google-map-hit-testing-for-display-of-popup-windows/](http://blog.pocketjourney.com/2008/03/19/tutorial-2-mapview-google-map-hit-testing-for-display-of-popup-windows/)

# android - 如何在android的列表视图中显示两个字符串数组值

> ID：10815260
> 
> 赞同：0
> 
> 时间：2012-05-30T11:20:43.847
> 
> 标签：android

我在列表视图中的两列有两个字符串数组值。如何在列表视图中显示两个字符串数组值？如果使用点击行我需要更新值有人能告诉我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:48:23.463

使用自定义列表视图的以下链接

[自定义列表视图](http://www.mkyong.com/android/android-listview-example/)

# mysql - 有没有办法在mysql中只获取字符串的数字元素？

> ID：10815265
> 
> 赞同：1
> 
> 时间：2012-05-30T11:21:05.200
> 
> 标签：mysql

我希望让客户更轻松地搜索电话/手机/传真号码等内容。为此，我想在比较搜索值和数据库中的相关列之前删除任何非数字字符。我正在使用[这些函数](http://venerableagents.wordpress.com/2011/01/29/mysql-numeric-functions/)来仅获取 mysql 中字符串的数字元素，但是当我使用它们时，它们会减慢我的查询速度。

有什么办法可以做到不让我的运行时间飞得很高吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:36:00.027

您的查询时间爆炸式增长的原因是因为任何此类功能的使用都会使您无法使用任何索引。由于您不是直接在字段上搜索，而是在函数的输出上进行搜索，因此 mySQL 无法使用索引来执行查询。

这是除了您必须为每条记录计算函数输出这一事实之外的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:39:59.980

如果您有访问权限和权限，则绕过这些运行时的最佳方法是添加一个包含您正在过滤的内容的新列。添加一个 WRITE 触发器以使用剥离的值填充列，运行一个脚本，为所有记录更新一次字段。添加索引并包含新列。然后，在您的应用程序中，使用新列搜索电话的数字值。缺点是表模式更改和业务逻辑和/或数据抽象层的添加代码。

# prolog - 同步作业

> ID：10815267
> 
> 赞同：0
> 
> 时间：2012-05-30T11:21:12.660
> 
> 标签：prolog

我有两个功能；

```
 foo ( A, B, C ) 

  bar ( D, E, F ) 
```

我想 ;

```
 | --------- |
foo         foo 
started    finished

             | -------  |
            bar        bar 
          started    finished

                        | ------ |
                        ^^^^^^^^^^
                         concatenate two list namely C and F 
```

如何同步这两个功能以便按顺序工作？

你能举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:47:42.033

```
foo(A,B,C), bar(D,E,F), append(C,F,Result). 
```

# mysql - 在每列中查找最常见的值

> ID：10815268
> 
> 赞同：2
> 
> 时间：2012-05-30T11:21:14.743
> 
> 标签：mysql, max

下面是我在 table 中的内容`myTable`。

```
+--------+--------+--------+--------+
| value1 | value2 | value3 | value4 |
+--------+--------+--------+--------+
|   9    |   4    |   3    |   3    |
|   1    |   2    |   9    |   3    |
|   1    |   2    |   3    |   4    |
|   1    |   2    |   3    |   4    |
+--------+--------+--------+--------+ 
```

我想要输出为

```
+--------+--------+--------+--------+
| value1 | value2 | value3 | value4 |
+--------+--------+--------+--------+
|   1    |   2    |   3    |   4    |
+--------+--------+--------+--------+ 
```

`value1=1`因为 1 在该列中是三次。

`value2=2`因为 2 在该列中是三次。

`value3=3`因为 3 在该列中是三次。

`value4=4`因为 4 在该列中是两倍，这是该列中所有常见数字的最大数量。

**注意**：`value4`最常见的值为 3 和 4。在输出中我应该得到 4，因为 4 是 3,4 中最大的。

我可以在mysql中实现这一点吗？

## 更新 1

## [SQL Fiddle 上的表](http://sqlfiddle.com/#!3/c3434)

## 更新 2

我也在此处列出答案，因此无需继续使用 js-fiddle。（根据@ypercube 的回答）

```
SELECT
  ( SELECT value1
    FROM myTable
    GROUP BY value1
    ORDER BY COUNT(*) DESC
           , value1 DESC
    LIMIT 1
  ) AS value1,

  ( SELECT value2
    FROM myTable
    GROUP BY value2
    ORDER BY COUNT(*) DESC
           , value2 DESC
    LIMIT 1
  ) AS value2,

  ( SELECT value3
    FROM myTable
    GROUP BY value3
    ORDER BY COUNT(*) DESC
           , value3 DESC
    LIMIT 1
  ) AS value3,

  ( SELECT value4
    FROM myTable
    GROUP BY value4
    ORDER BY COUNT(*) DESC
           , value4 DESC
    LIMIT 1
  ) AS value4
; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:31:30.103

```
SELECT
  ( SELECT value1
    FROM myTable
    GROUP BY value1
    ORDER BY COUNT(*) DESC
           , value1 DESC
    LIMIT 1
  ) AS value1,

  ( SELECT value2
    FROM myTable
    GROUP BY value2
    ORDER BY COUNT(*) DESC
           , value2 DESC
    LIMIT 1
  ) AS value2,
...
  ( SELECT valueN
    FROM myTable
    GROUP BY valueN
    ORDER BY COUNT(*) DESC
           , valueN DESC
    LIMIT 1
  ) AS valueN
; 
```

SQL-Fiddle：[test-2](http://sqlfiddle.com/#!2/97226/1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T11:29:24.847

这可能不是存储数据的理想方式。
您可能需要考虑使用键值对来规范化 4 列。
（这意味着每列一行）

（您可以使用 UNION 来实现您正在寻找的东西）

```
(select value1, null, null, null from TABLE group by value1 order by count(*) desc, value1 desc limit 1)
union
(select null, value2, null, null from TABLE group by value2 order by count(*) desc, value2 desc limit 1)
union
(select null, null, value3, null from TABLE group by value3 order by count(*) desc, value3 desc limit 1)
union
(select null, null, null, value4 from TABLE group by value4 order by count(*) desc, value4 desc limit 1) 
```

# css - CSS3 rotateY 过渡未正确围绕 y 轴旋转

> ID：10815269
> 
> 赞同：0
> 
> 时间：2012-05-30T11:21:16.420
> 
> 标签：css, css-transitions

我有以下代码：http: [//jsfiddle.net/RFMxG/1/](http://jsfiddle.net/RFMxG/1/)

当过渡运行时，您可以在左侧看到大约 20-30 像素的填充。尽管我已经将变换原点设置为 0,0,0，但它仍然没有正确地绕 y 轴旋转。在动画过程中，蓝色框的左边缘应始终与左边缘齐平。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T02:40:31.513

好吧，这里有一大堆问题：

1) CSS 变换不能使用过渡动画。如果您查看 W3C的可转换属性[列表](http://www.w3.org/TR/css3-transitions/)，您会注意到 transform 不存在。

2)`-webkit-perspective`只影响它所应用的元素的子元素，而不影响元素本身。阅读有关此内容的 Safari[博客](http://www.webkit.org/blog/386/3d-transforms/)：

> -webkit-perspective 的有趣之处在于它不会直接影响元素。相反，它会影响该元素的变换后代的 3D 变换的外观；您可以将其视为添加一个变换，该变换将乘以后代变换。这允许这些后代在他们四处走动时共享相同的视角。

3) 你发布了一个小提琴真是太棒了，但由于这是一个 CSS 问题，为了将来的参考，如果你清除所有的 javascript，并且只使用一组浏览器前缀，它会容易得多。帮助我们帮助你！

4）您可能想要使用的是动画。这是您的小提琴的高度修改版本，适用于悬停：

[http://jsfiddle.net/RFMxG/4/](http://jsfiddle.net/RFMxG/4/)

5) 如果 javascript 是您的技能组合，并且您完全关心浏览器兼容性（当然是您！），我强烈建议您使用[jstween](http://www.jstween.org/)制作这些类型的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:40:48.703

是的，所以解决方案实际上是由于需要在动画开始之前设置变换原点（不能在设置 -webkit-transform 属性的同时设置）。

我已经更新了小提琴以证明它现在可以正常工作。 [http://jsfiddle.net/RFMxG/5/](http://jsfiddle.net/RFMxG/5/)

# javascript - 对象数组中的javascript唯一键值

> ID：10815270
> 
> 赞同：0
> 
> 时间：2012-05-30T11:21:17.270
> 
> 标签：javascript, arrays, key, unique, associative

我需要找出对象数组中是否存在具有特定键的对象：值例如，如果我需要键“id”是唯一的：

```
arr=[
     {id:1,  attr1:'435',attr2:'sdg'},
     {id:2,  attr3:'4x35',attr2:'sdg'}
    ];

a={id:1,attr2:'nnsklnf'};
b={id:3,attr3:'kldfmlkdblng'};

function isHaveSimilar(_a,_array){
 // ... ???
}

isHaveSimilar(a,arr); // true
isHaveSimilar(b,arr); // false 
```

也许有比粗鲁检查每个元素更简单的方法？谢谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:39:51.683

```
function hasSimilar(needle, haystack) {
  for (item in haystack) {
    if (haystack[item].id == needle.id) {
      return true;
    }
  }
  return false;
}

hasSimilar(a, arr); // true
hasSimilar(b, arr); // false 
```

# c++ - 将对象从文档类传递到 MFC 中的对话框

> ID：10815272
> 
> 赞同：1
> 
> 时间：2012-05-30T11:21:22.630
> 
> 标签：c++, mfc

我有一个文档类，它有一个连接到数据库的对象。文档类有一个对话框，它是从一个包含组合框的菜单中产生的。我目前正在使用 OnInitDialog 设置组合框中的项目，但想使用数据库连接。

将数据库连接对象提供给对话框对象的最佳方式是什么？我认为我不能将它作为参数传递，如果我在构造后提供它，我可能会错过对 OnInitDialog 的调用。有没有办法找到父对象并调用 getMethod 来获取数据库对象，还是我完全走错了轨道，应该尝试完全不同的东西？

谢谢你的帮助，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:49:37.153

通常，您会将对话框子类化以创建自定义构造函数，其中包括您想要处理的任何对象，例如您的数据库对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:38:16.803

您应该在对话框的构造函数中传递数据库连接对象。修改对话框构造函数或相应地添加另一个构造函数。您可以将对话框的其他普通构造函数声明为私有，因此传递数据库连接成为对话框的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:54:43.033

我不确定您所指的体系结构，即文档类中的对话框，但我认为您可以在对话框类中添加一个用于数据库连接的成员变量，然后在对话框构造函数中或 `dlg->dbConnection = dbConn;`在调用 DoModal 或 ShowWindow 之前设置数据库连接变量

# jquery - 从 Django 表单 AJAX 中获取 POST 数据

> ID：10815278
> 
> 赞同：1
> 
> 时间：2012-05-30T11:21:36.187
> 
> 标签：jquery, ajax, django, forms

我将在 Django 中获取参数形式的 AJAX 请求，这就是我正在做的事情：

**base.html：**

```
<form method="POST">{% csrf_token %}
First name: <input type="text">
<input type="submit" value="Register" id="register">
</form> 
```

**主.js：**

```
$(document).ready(function(){
    $("#register").live("click", function(e){
        $.post("/", {
            name: "MY TEXT",
        });
    });
}); 
```

**视图.py：**

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.core.context_processors import csrf

def home(request):
    if request.method == 'POST':
        print request.POST['name']
    return render_to_response('registration.html', {},
    context_instance=RequestContext(request)) 
```

是的，我知道此时我的 JS 没有从文本表单中获取真实数据，它只发送一个静态文本“MY TEXT”。但是当我按下按钮时，我得到 **“MultiValueDictKeyError at /“Key 'name' not found in”**

我做错了什么？

我改变了我的代码：main.js

```
$(document).ready(function(){
    $("#register").live("click", function(e){
        e.preventDefault();
        $.post("/", {
           name:'MY TEXT'
        });
    });
}); 
```

base.html：

```
<form method="POST">{% csrf_token %}
    First name: <input type="text" name="name">
    <br>
    <input type="submit" value="Register" id="register">
</form> 
```

**它有效**，谢谢！

虽然，我有两个问题：

1.  在这种情况下，我在哪里发送“我的文本”？我提到它从名称字段返回实际数据并且不返回“我的文本”
2.  页面仍在重新加载。我想让它完全是 AJAX。我的意思是创建一个 python 函数来将来自 POST 请求的数据添加到 MySQL 数据库，并将操作结果返回给 AJAX 脚本。一切都无需重新加载页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:39:33.840

发生的事情是您没有阻止浏览器的默认`submit`操作发生。因此，您的 Ajax POST 已完成，但随后浏览器本身立即 POST - 而且，正如 Michal 指出的那样，您的表单不包含`name`字段，因此查找失败。

你需要做两件事来解决这个问题。首先，`e.preventDefault();`在你的 JS 点击方法中使用。`request.is_ajax()`其次，在视图顶部检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:50:25.937

使用“e.preventDefault()”阻止表单提交。此外，最好绑定到表单以防用户按 Enter 而不是单击：

base.html

```
<form method="POST" id="register">{% csrf_token %}
First name: <input type="text">
<input type="submit" value="Register">
</form> 
```

main.js

```
$(document).ready(function(){
    $("#register").live("submit", function(e){
        $.post("/", {
            name: "MY TEXT",
        });
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T11:34:25.213

我想问题是你没有在 html 中命名文本输入：

```
<input type="text" name="name"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:44:44.490

我认为应该是

```
$.post("../save_note/", {
        data:'name=MY TEXT'
    }); 
```

和

```
if 'name' in request.POST: 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:48:05.993

您可以设置一个更强大的表单提交函数来做同样的事情，而不是使用点击处理程序。返回 false 取消默认提交行为。

```
$("form").submit(function() {
    $.post("/", {
        name: "MY TEXT",
    });

    return false;
}); 
```

# javascript - 奇怪的 jQuery UI 滑块行为

> ID：10815283
> 
> 赞同：2
> 
> 时间：2012-05-30T11:22:00.553
> 
> 标签：javascript, jquery, jquery-ui

我正在开发一个简单的单页网站，并且正在集成[jQuery UI Slider](http://jqueryui.com/demos/slider/)。我将其集成到的网站是：[网站](http://rolandgroza.com/projects/chaoscod3r/)。

看起来我的滑块有点问题。如果您在使用左右箭头（或左右键盘键）导航时仔细观察滑块，您会注意到当向后退时，在最后一步之前，最小范围会跳到手柄前面几个像素（背景图片 ）。

并且附加到句柄的动画属性在使用鼠标光标移动句柄时不起作用，例如句柄位于位置 0 并且您单击最后一个位置，通常它应该动画到最后一个位置但是它跳到那里。

有人可以告诉我如何修复这些错误吗？我尝试为第一个问题处理 CSS，但似乎不是因为这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T11:10:56.200

1.  “最小范围跳到手柄前面”-我在这里减少了错误：http: [//jsfiddle.net/jefferyto/Gd5dn/](http://jsfiddle.net/jefferyto/Gd5dn/)

    这是动画非像素值时的[错误；](http://bugs.jquery.com/ticket/7109)`jQuery.animate()`滑块使用百分比。在动画之前，jQuery 将元素的起始值（以像素为单位）转换为结束值的单位，并将这个非 px 起始值分配给元素（jQuery 1.7.2（未缩小）中的第 8601-8605 行）。

    对于较小的最终值（如 0%），计算存在缺陷，因此范围的起始宽度大于应有的宽度。

    我已经打开了一个带有修复的[拉取请求；](https://github.com/jquery/jquery/pull/808)相同的修复可以应用于当前稳定版本的 jQuery。

    **更新：**您可以在此处找到修复此错误的插件（适用于 jQuery 1.7.2）：http: [//jsfiddle.net/jefferyto/zbkQX/](http://jsfiddle.net/jefferyto/zbkQX/)

    从（顶部）复制

    ```
    // Start jQuery.animate() fix 
    ```

    to（在测试代码之前）

    ```
    // End jQuery.animate() fix 
    ```

    如果您将此代码粘贴到您的 plugins.js 中，它应该可以工作。

2.  “它应该动画到最后一个位置，但它会跳到那里” - 这是因为 Slider 和 jPages 插件与循环回调连接。

    当用户单击滑块时，Slider 会触发一个`slide`事件，然后为手柄和范围设置动画。事件`slide`处理程序调用 jPages 以更改到新页面。jPages 调用其分配的回调函数，将当前页码传回给 Slider。滑块设置其值并开始为手柄/范围设置动画。

    事件结束后`slide`，Slider 返回动画手柄和范围（这实际上是第二次动画）。Slider`.stop(1, 1)`在动画之前调用元素，这会导致第一个动画停止并立即跳转到其结束值。（第二个`.animate()`什么都不做，因为元素已经在正确的位置。）

    （我希望这是有道理的 ：-） ）

    我建议在 jPages 回调中添加逻辑，以便仅当触发器不是来自 Slider 时才使用新页码调用 Slider。

    **更新：**我认为您需要更新两个回调：

    对于滑块：

    ```
    slide: function(event, ui) {
        if (!self.paging) {
            self.paging = true;
            $(self.shop_navigation_class).jPages(ui.value);
            self.paging = false;
        }
    } 
    ```

    对于 jPage：

    ```
    callback: function(pages) {
        var data = {
            current_page: pages.current,
            total_pages: pages.count
        }
        self.set_local_storage_data(self.data_key, JSON.stringify(data));
        if (!self.paging) {
            self.paging = true;
            $(self.shop_slider_class).slider("value", pages.current);
            self.paging = false;
        }
    } 
    ```

    请让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:32:38.713

最简单的答案可能*是不使用 jQueryUI 的滑块*。

查看您的代码后，您似乎很容易在 JS 和 CSS 方面具备足够的能力，可以自己复制其外观和核心行为，并使其完全按照您的意愿工作。

# multithreading - I/O 线程中的 SimpleChannelUpstreamHandler await*() 导致死锁

> ID：10815285
> 
> 赞同：1
> 
> 时间：2012-05-30T11:22:06.870
> 
> 标签：multithreading, netty

在我的 Netty`SimpleChannelUpstreamHandler`中，当我收到一条消息时，我需要启动与另一个 Netty 服务器的连接并转发消息。但是，在启动第二个连接时，我使用：

```
ChannelFuture channelFuture = clientBootstrap.connect(new InetSocketAddress(host, port));
hannelFuture.awaitUninterruptibly(); 
```

这会导致以下错误：

```
java.lang.IllegalStateException: await*() in I/O thread causes a dead lock or sudden performance drop. Use addListener() instead or call await*() from a different thread.
    at org.jboss.netty.channel.DefaultChannelFuture.checkDeadLock(DefaultChannelFuture.java:314)
    at org.jboss.netty.channel.DefaultChannelFuture.awaitUninterruptibly(DefaultChannelFuture.java:226)
    at com.my.NettyClient.start(NettyClient.java:204)
  ....
  at com.my.MyChannelUpstreamHandler.messageReceived(MyChannelUpstreamHandler.java:52) 
```

开始第二次连接的最佳方式是什么？我应该执行以下操作吗？：

```
 @Override
    public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {

        ExecutorService executorService = Executors.newSingleThreadExecutor();

        executorService.submit(new Runnable() {

            @Override
            public void run() {
                // Connect to another Netty Server...

                // Forward on message...
            }
        });

        executorService.shutdown();
... 
```

在收到的每条消息上启动一个新线程是否浪费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:11:38.570

查看代理示例以了解如何在不阻塞的情况下执行此操作：

[http://netty.io/docs/stable/xref/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.html](http://netty.io/docs/stable/xref/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.html)

# python - 用户是否在 Google 上注册并在之后被重定向回该网站？

> ID：10815286
> 
> 赞同：0
> 
> 时间：2012-05-30T11:22:07.650
> 
> 标签：python, google-app-engine

我正在使用带有 python 的 GAE，我可以要求用户使用 Google 登录：

`loginURL = (users.create_login_url(self.request.path))`

这给了我一个链接，让用户*登录*并重定向到我的网站。但是有些用户没有 Google ID，有没有办法让他们**注册**一个并被重定向到我的网站？

我知道没有：

`signupURL = (users.create_signup_url(self.request.path))`

这就是我正在寻找的那种东西，要求用户注册并在她完成后快速重定向她。

非常感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:38:42.267

当您的用户访问登录 url 时，顶部有一个红色的 SIGN UP 按钮。他们可以去那里注册。

我也花了一秒钟才找到，不幸的是您无法更改登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:04:46.057

实际上，可以将用户引导到订阅页面。这有点棘手：

您登录的链接如下所示：

```
https://www.google.com/accounts/ServiceLogin?service=ah&passive=true&continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttp://study-wise.appspot.com/login&ltmpl=gm&shdf=ChULEgZhaG5hbWUaCVN0dWR5V2lzZQwSAmFoIhRSjkTO01_PtfPG9VN12NFsbyludCgBMhQrFIvLEm2lqCc65PvVrBca1skQRA 
```

在我的情况下：[http](http://study-wise.appspot.com/login) ://study-wise.appspot.com/login是应用程序的 url。shdf 似乎是谷歌用来跟踪请求的一些关键。但我没有找到任何关于它的线索

现在注册链接将是：

```
https://accounts.google.com/NewAccount?continue=https%3A%2F%2Fappengine.google.com%2F_ah%2Fconflogin%3Fcontinue%3Dhttp%3A%2F%2Fstudy-wise.appspot.com%2Flogin&shdf=ChULEgZhaG5hbWUaCVN0dWR5V2lzZQwSAmFoIhRSjkTO01_PtfPG9VN12NFsbyludCgBMhQrFIvLEm2lqCc65PvVrBca1skQRA&service=ah&ltmpl=gm 
```

网址：

```
https://www.google.com/accounts/ServiceLogin 
```

被替换为

```
https://accounts.google.com/NewAccount 
```

和

```
passive=true 
```

已被删除。据我所知，没有进行其他更改。

这是我写的python函数：

```
def login2Subscribe(link):
    return link.replace('https://www.google.com/accounts/ServiceLogin', 'https://accounts.google.com/NewAccount').replace('passive=true', '') 
```

你可以像这样使用它：

```
viewVals['subscribe'] = login2Subscribe(users.create_login_url("/login")) 
```

# ios - 如何获取从 `UIImagePickerController` 接收到的图像的压缩文件大小？

> ID：10815292
> 
> 赞同：3
> 
> 时间：2012-05-30T11:22:29.907
> 
> 标签：ios

我想知道`UIImagePickerController`camara 或 library 拍摄的图像大小。有什么办法可以找到吗？

要求就像，

如果图像大小超过 1 MB，我想压缩它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:38:51.537

尝试这个：

```
CGFloat compression = 0.8f;
CGFloat maxCompression = 0.1f;
int maxFileSize = 1024;
UIImage *img =[UIImage imageNamed:@"anyimg.jpg"];
NSData *imageData = UIImageJPEGRepresentation(img, compression);

while ([imageData length] > maxFileSize && compression > maxCompression)
{
    compression -= 0.1;
    imageData = UIImageJPEGRepresentation(img, compression);
    NSLog(@"%d",[imageData length]);
}
NSLog(@"image size %d",[imageData length]); 
```

获取图像大小：
`NSData *data_size = UIImagePNGRepresentation(yourImage);`
`int image_size =[data_size length];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:32:53.280

愿此代码为您工作。它不会为您提供字节或 mb 大小的图像。但是此代码根据您的自定义尺寸（如 100x200）为您提供图像。

```
@implementation UIImage (CS_Extensions)
    - (UIImage *)imageByScalingProportionallyToSize:(CGSize)targetSize {

        UIImage *sourceImage = self;
        UIImage *newImage = nil;

        CGSize imageSize = sourceImage.size;
        CGFloat width = imageSize.width;
        CGFloat height = imageSize.height;

        CGFloat targetWidth = targetSize.width;
        CGFloat targetHeight = targetSize.height;

        CGFloat scaleFactor = 0.0;
        CGFloat scaledWidth = targetWidth;
        CGFloat scaledHeight = targetHeight;

        CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

        if (CGSizeEqualToSize(imageSize, targetSize) == NO) {

            CGFloat widthFactor = targetWidth / width;
            CGFloat heightFactor = targetHeight / height;

            if (widthFactor < heightFactor)
                scaleFactor = widthFactor;
            else
                scaleFactor = heightFactor;

            scaledWidth  = width * scaleFactor;
            scaledHeight = height * scaleFactor;

            // center the image

            if (widthFactor < heightFactor) {
                thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
            } else if (widthFactor > heightFactor) {
                thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
            }
        }

        // this is actually the interesting part:

        UIGraphicsBeginImageContext(targetSize);

        CGRect thumbnailRect = CGRectZero;
        thumbnailRect.origin = thumbnailPoint;
        thumbnailRect.size.width  = scaledWidth;
        thumbnailRect.size.height = scaledHeight;

        [sourceImage drawInRect:thumbnailRect];

        newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        if(newImage == nil) NSLog(@"could not scale image");

        return newImage ;
    }
    @end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:33:02.577

如果您有路径，您可以询问文件管理器：

```
attributesOfItemAtPath:error: 
```

键 'NSFileSize' 是您在字典中查找的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T16:18:38.773

如果你有像**jinx**说的那样的路径，你可以这样做

```
NSNumber *theFileSize = [NSNumber numberWithInt:0];
NSFileManager * filemanager = [NSFileManager defaultManager];

if([filemanager fileExistsAtPath:fullFilePath])
{
    NSDictionary * attributes = [filemanager attributesOfItemAtPath:fullFilePath error:nil];
    theFileSize = [attributes objectForKey:NSFileSize];
}

[self convertbyteToKB_MB:[theFileSize  intValue]; 
```

...

```
-(NSString*)convertbyteToKB_MB:(int)byte 
{
NSString    *retSize = [NSString stringWithFormat:@"%d bytes",byte];
float       fByte = byte;
if (byte > 1024)
{
    //Kilobytes
    fByte = fByte / 1024;
    retSize = [NSString stringWithFormat:@"%.1f KB",fByte];
}

if (fByte > 1024)
{
    //Megabytes
    fByte = fByte / 1024;
    retSize = [NSString stringWithFormat:@"%.1f MB",fByte]; 
}

return retSize;
} 
```

# sql - mssql中的select case语句错误

> ID：10815293
> 
> 赞同：0
> 
> 时间：2012-05-30T11:22:39.257
> 
> 标签：sql, sql-server, sql-server-2008

```
SELECT top 1 
    case 
        when VR = -99999.99 
        then 0 
        else cast((VR*1.732) as decimal(38,3)) 
    end 
FROM pseb.dbo.datasource 
where FeederID=5003
order by datetime desc 
```

上面的查询工作正常，但我需要返回 varchar 值 '--' 而不是返回 0

如果我喜欢那样

```
SELECT top 1 
    case 
        when VR = -99999.99 
        then '--' 
        else cast((VR*1.732) as decimal(38,3)) 
    end 
FROM pseb.dbo.datasource 
where FeederID=5003
order by datetime desc 
```

意味着它返回以下错误：

> 消息 8114，级别 16，状态 5，第 1 行将数据类型 varchar 转换为数字时出错。

请帮我解决它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:26:08.257

问题是您从同一列返回两种不同的数据类型。SQL Server 的规则是数字类型[优先](http://msdn.microsoft.com/en-us/library/ms190309.aspx "数据类型优先级 (Transact-SQL)")于字符串类型，即在像您这样的情况下，字符串被转换为数字，*而不是*相反。

因此，要解决此问题，您可以将您的号码转换为字符串。

一种选择是执行以下操作：

```
SELECT top 1 
   case when VR = -99999.99 then '--' 
    else 
     cast
      ( 
        cast((VR*1.732) as decimal(38,3)
      ) 
     as varchar(50)) 
    end 
  FROM pseb.dbo.datasource where FeederID=5003 order by datetime desc 
```

# iphone - APNs Urban Airship 客户端集成的 Xcode 4.0 中没有此类文件或目录编译器错误？

> ID：10815295
> 
> 赞同：0
> 
> 时间：2012-05-30T11:22:42.690
> 
> 标签：iphone, ios, compiler-errors, apple-push-notifications, urbanairship.com

我正在尝试基于 Urban Airship 集成 Apple 推送通知服务，我正在尝试实现这两个链接[FirstLink](https://www.urbanairship.com/docs/airship_lib.html)和[SecondLinks](http://www.jc-evans.com/uploads/Urban_Airship_Instructions.txt) 。不幸的是，我遇到了错误![在此处输入图像描述](../Images/a40472e56c0f49791afb17bf1bb26b8a.png)。没有这样的文件或目录，我尝试在我的项目中删除并再次拖动 Airship 文件夹，然后退出并打开`Xcode`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:19:25.407

最后我发现了错误请参考[这个](https://support.urbanairship.com/customer/portal/questions/51394-could-you-possibly-make-the-installation-instructions-more-vague-)

# scala - 无法访问Scala中对象的属性

> ID：10815303
> 
> 赞同：1
> 
> 时间：2012-05-30T11:23:16.070
> 
> 标签：scala, jpa, playframework

我有对象`user`。在我看来，我可以检索`user.name` `user.email`等...但我无法检索`user.service.name`，它返回空白而`User.service.id`返回 id 正确。

`Service`是一个对象，`user`并且`service`与`@ManyToOne`fetch eager 相关。

任何想法？

我有课`User`

```
Public class User extends Model {
    @Id
    @GeneratedValue
    Public Integer id;
    @Constraints.Required
    @Column(nullable = false)
    Public string nom;
    @Constraints.Required
    Public string password;

    @ManyToOne
    public Service service;
} 
```

和类`Service`

```
@Entity
Public class Service extends Model {
     @Id
     @GeneratedValue
     Public Integer id;
     @Column(unique = true, nullable = false)
     @Constraints.Required
     public String nom;
     @OneToMany(mappedBy = "service")
     Public Set<User> users = new LinkedHashSet<User>();
} 
```

在我的`listUser.scala.html`我有这个

```
@for(user <- currentPage.getList) {
     <tr>
          <td>@user.nom</td>
          <td>@user.service.nom</td>
     </tr>

} 
```

# javascript - 在构建文件上需要 js 组合

> ID：10815305
> 
> 赞同：0
> 
> 时间：2012-05-30T11:23:25.040
> 
> 标签：javascript, requirejs

我在我的单页应用程序中使用 require js，我想知道是否可以将所有模块、供应商库（jQuery、Underscore、Backbone）组合在一个文件中，因为这会加速我的应用程序。

```
app
  css
  html
    homepage
       main.html
       login.html
       signup.html
  js
    build.js
    libs
        jquery.js
        backbone.js
        underscore.js
        require.js
    modules
       collections
       models
       views
       main
          main.js
          app.js
          router.js
app-build 
```

我的构建配置文件目前是：

```
({
    appDir: '../',
    baseUrl: 'js/modules',
    mainConfigFile: 'modules/main/main.js',
    dir: '../../app-build',
    optimize: 'uglify',
    uglify: {
        toplevel: true,
        ascii_only: true,
        beautify: true,
        max_line_length: 1000
    },
    preserveLicenseComments: true,
    logLevel: 0
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:24:52.333

我当然不是这方面的专家，但我确实设法让这个项目为我的一个项目工作，诚然，主要是通过反复试验。

我发现我需要创建一个/两个，`appdir`并且`baseUrl`是一个包含我的代码和库代码的目录 - 在你的情况下，这将是`./app/js`或`./app`（取决于你是否还想要组合你的模板）。

我还提供了各种库函数的路径。

让它工作后，我真的应该回去看看什么是真正需要的，什么是货物崇拜编码。现在我有更紧迫的代码要写......

为了您的兴趣，我包括了我的选项：注意我正在从 node.js 优化`rjs.optimize(...)`。

```
var options = {
  baseUrl: "./site/app",
  appdir: "./site/app",
  name: "js/main",
  out: "main-built.js",
  paths: {
    jQuery: 'js/libs/jquery/jquery',
    Underscore: 'js/libs/underscore/underscore',
    Backbone: 'js/libs/backbone/backbone',
    Handlebars: 'js/libs/handlebars/handlebars',
    templates: 'templates'
  }
}; 
```

我不希望这是正确的答案，但希望它会引导您到有用的地方。

# javascript - Deferred.pipe() 可以防止调用后续的 .done 和 .fail 吗？

> ID：10815308
> 
> 赞同：0
> 
> 时间：2012-05-30T11:23:28.773
> 
> 标签：javascript, jquery, jquery-deferred, deferred

我有两个处理程序：onSuccess 和 onFailure，但有时（当服务器决定这样做时）我希望阻止它们中的任何一个运行。我知道我可以从 and 中返回一些“忽略”来在and处理程序`.pipe()`中对其进行测试，但是有没有更优雅的方法，比如在?`.done()``.fail()``this``.pipe()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:00:58.033

你能提供更多关于你的案子的细节吗？

什么时候`onFailure`应该调用呢？如果你的服务器调用失败，你怎么能知道你是否需要按你的要求调用什么？

如果我理解您的要求，您希望避免在所有方法`onSuccess`和`onFailure`. 一种方法可以是添加一个中间`.pipe`调用并返回一个新的承诺，具体取决于您的服务器回答是否做某事。

# c# - 对休眠 n+1 警报消息感到困惑

> ID：10815315
> 
> 赞同：2
> 
> 时间：2012-05-30T11:24:03.760
> 
> 标签：c#, linq, nhibernate, orm

在我的查询中，我试图选择所有实体（其中 20 个）并像这样遍历集合

```
List<Domain.Property> data = session.Query<Domain.Property>().ToList();

PropertyViewModel viewModel;
List<PropertyViewModel> listOfViewModels = new List<PropertyViewModel>();

foreach (Domain.Property prop in data)
{
    viewModel = new PropertyViewModel()
    {
        AdType = prop.AdType.ToString(), 
        CityName = prop.CityName, 
        ContructionYear = prop.ConstructionYear, 
        Photo = prop.Photos.First()

    };
}
listOfViewModels.Add(viewModel); 
```

每个属性必须有一张或多张照片，我只需要第一张，所以我使用 Photos.First()

当这一行被注释掉时 Photo = prop.Photos.First() nhib。探查器报告加载了 20 个实体，这很好（来自第一个查询的实体）。

但是随着 Photo = prop.Photos.First() 加载的实体增加到 65 个实体，这个数字应该约为。等于属性+照片集。

谁能指出正确的方向？

在 nhib 中。生成的sql有

```
SELECT photos0_.PropertyId    as PropertyId1_,
       photos0_.Id            as Id1_,
       photos0_.Id            as Id1_0_,
       photos0_.ImageData     as ImageData1_0_,
       photos0_.ImageMimeType as ImageMim3_1_0_,
       photos0_.PropertyId    as PropertyId1_0_
FROM   Photo photos0_
WHERE  photos0_.PropertyId = 117 /* @p0 */ 
```

**标记为 SELECT N+1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:26:08.627

对于每个属性（单个查询以获取它们的列表），您正在执行另一个查询以获取第一张照片。`Photos`在您尝试访问它并导致第二次查询之前，不会填充该集合。

作为原始查询的一部分加入照片表，以将其减少为单个查询。

# python - 在 python 中有没有办法用 is_text_present() 方法验证网页上是否存在某些正则表达式？

> ID：10815317
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:08.460
> 
> 标签：python, regex, selenium

python中有没有一种方法可以验证`is_text_present()`网页上是否存在某些正则表达式？

例如我做了正则表达式：

```
 p= re.compile('Today:\s\w') 
```

使用时：

```
 try: self.failUnless(sel.is_text_present(p))
 except AssertionError, e: self.verificationErrors.append(str(e))
 time.sleep(10) 
```

我得到一个例外。不明白为什么？

```
sel = self.selenium 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:47:52.590

[文档](http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/doc/python/selenium.selenium-class.html)没有提到该方法将接受已编译的正则表达式。相反，您可以将正则表达式作为前缀为`rexeg:`. 尝试这个：

```
p = r"regex:Today:\s\w" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T22:02:37.687

有一个正[`assertRegex()`](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRegex)则[`assertNotRegex()`](https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertNotRegex)表达式搜索匹配的测试。

示例用法：

```
errors = "(?i)Example|MySQL|not a valid|error"
self.assertNotRegex(self.driver.page_source, errors) 
```

# macos - 在 Mac OS X 上定位 .app / 使用 XCode 4.3 运行 PackageMaker 的正确方法

> ID：10815319
> 
> 赞同：2
> 
> 时间：2012-05-30T11:24:20.967
> 
> 标签：macos, xcode4.3, packagemaker

*背景：*

在 Mac OS X 上，可以使用它`open -a PackageMaker`来运行`PackageMaker.app`，与它的确切位置无关。

由于 XCode 4.3 不再安装`/Developer/usr/bin/packagemaker`，我想`PackageMaker.app/Contents/MacOS/PackageMaker`在 shell 脚本中运行。问题是我不能依赖用户可以放置的任何标准位置`PackageMaker.app`。我想确保该脚本可以在任何已`PackageMaker.app`“安装”的机器上运行，即使它位于用户家中。

*问题：*

如何确定`open -a AnyApp`发射的位置`AnyApp.app`？或者可能存在其他一些命令来`Contents/MacOS`从`.app`具有指定名称的内部运行二进制文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:10:04.193

PackageMaker 仍然存在，并且确实得到了 Apple 的支持。

你只需要安装它。

要找到它，请访问[http://developer.apple.com/xcode](http://developer.apple.com/xcode)，然后单击“寻找其他开发人员工具？[查看下载](http://developer.apple.com/downloads/)”链接。

在那里，您将遇到比以往更多的预发布操作系统和 SDK。*取消选中除*“开发者工具”之外的所有下载类别（“应用程序”、“iOS”、“Safari”等） 。然后在剩余的可下载文件中查找第一个“Xcode 辅助工具”链接。

我现在看到的那个日期是 2012 年 2 月，包含 PackageMaker、剪贴板查看器、CrashReporterPrefs、帮助索引器、重复我之后、SRLanguageModeler 和 SleepX。

一旦你安装了它，你就会在一个可预测的地方恢复 PackageMaker。

# php - 删除提要的描述标签内的上下文链接而不丢失价值

> ID：10815320
> 
> 赞同：-1
> 
> 时间：2012-05-30T11:24:21.827
> 
> 标签：php, xml, parsing, replace, feed

我想知道是否可以删除 XML 提要的 <description> 标记内的所有上下文链接。

这是我在 PHP 文件中得到的内容：

```
<?php
    header('Content-type: text/xml');
    $url = "http://www.Example.com/articles.rss";
    $page = file($url);

    foreach ($page as $part)
    {
        echo $part;
    }
?> 
```

查看 XML 提要的屏幕截图：

![http://i.stack.imgur.com/VTsBf.jpg](../Images/233c00cd0f7e768ff6b94ffe20d7c974.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:03:52.010

使用 preg_replace 查找链接并用空行替换它们。

匹配开始`<a>`标签，然后关闭`</a>`：

```
foreach ($page as $part)
{
  $part = preg_replace("/<a\b[^>]*>/", "", $part);
  $part = preg_replace("/<\/a>/", "", $part);
  echo $part;
} 
```

现场演示：[http ://www.rubular.com/r/9dWWxbhzLn](http://www.rubular.com/r/9dWWxbhzLn)

# android - 最具体的 NFC-Tag-Intent-Filter 可能吗？

> ID：10815321
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:30.123
> 
> 标签：android, nfc, intentfilter

我想检测所有具有特定前缀的纯文本 NDEF-NFC-Tags（例如`"mytagprefix1234567890"`。我可以用于此 senario 的最具体的意图过滤器是什么，以确保我的应用程序在读取此类时具有最高优先级标签？只能为 Smart-Poster-URI-Tags 定义数据方案，对吗？

我目前正在使用

```
 <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="text/plain" />
        </intent-filter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:10:18.810

如果您正在控制标签内容，看起来就像您一样，为什么不使用自定义 mime 类型或 uri？

没有更具体的过滤方法，因为文本记录被映射到文本/纯 mime 类型，这是非常普遍的。

# android - Android - 自定义 SeekBar - 搜索栏底部不必要的空白

> ID：10815323
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:35.193
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我需要自定义搜索栏。为此，我使用了一个`layer-list`XML 文件，然后将其设置为 seekbar 的背景。
对于`@android:id/background`我正在使用位图，对于`secondaryProgress`和`progress`，我正在使用形状。
这是 XML 背景文件：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@android:id/background">
        <bitmap
            android:src="@drawable/progressbar_bg"
            android:tileMode="repeat" />

    </item>
    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <solid android:color="#B2B2B2" />

                <corners android:radius="5dp" />
            </shape>
        </clip>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <solid android:color="#E00072" />

                <corners android:radius="5dp" />
            </shape>
        </clip>
    </item>

</layer-list> 
```

以下是我声明 SeekBar 的方式：

```
<SeekBar
                android:id="@+id/seekBar1"
                android:thumb="@drawable/progressbar_thumb"                
                android:progressDrawable="@drawable/custom_seek_bar"
                android:background="@drawable/progressbar_bg"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:layout_toLeftOf="@id/video_total_time"
                android:layout_toRightOf="@id/video_time_played" /> 
```

问题是 SeekBar 高度不会缩小到新高度，我希望它与背景图像的高度相等。相反，我看到一个充满空白的区域。

![在此处输入图像描述](../Images/34d5769f2493bd511136752b8c6e02e1.png)

你知道空白是从哪里来的，以及如何摆脱它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:02:46.727

该问题已通过对`@android:id/background`项目使用 9-patch 而不是位图来解决。

```
 <item android:id="@android:id/background">
        <nine-patch
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:dither="true"
            android:src="@drawable/progressbar_backg" />
 </item> 
```

# java - 如何在 tomcat 或 jboss 中运行 Web 服务端点类

> ID：10815324
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:39.430
> 
> 标签：java, eclipse, web-services, endpoint

我使用以下链接创建了 Web 服务 [http://www.ibm.com/developerworks/webservices/tutorials/ws-eclipse-javase1/section2.html](http://www.ibm.com/developerworks/webservices/tutorials/ws-eclipse-javase1/section2.html)

当我在 Eclipse 中将端点发布类作为 java 应用程序运行时（在我的情况下它是 runservice.java），Web 服务运行良好。

我已经为同一个 web 服务客户端创建了一个客户端，该客户端正在与 web 服务正确通信。

我想用 jboss 或没有 eclipse 的 tomcat 运行这个端点类，可以这样做。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:27:18.107

请注意，本教程声明它是关于如何运行“独立 Web 服务应用程序”的教程。由于您创建的不是 Java Web 应用程序，而是 JavaSE 应用程序，因此您将无法将其部署到应用程序服务器。为此，您必须创建一个 java Web 应用程序。

[Eclipse WS 教程](http://www.eclipse.org/webtools/jst/components/ws/M3/tutorials/BottomUpWebService.html)

# css - 在css中覆盖其他项目的项目是否有负边距的替代方法？

> ID：10815325
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:41.707
> 
> 标签：css

我有这样的标记：

```
<p>Image caption</p><img /> 
```

p 是一个内联块。

我希望标题覆盖图像，而不是将图像推到左侧。通常我使用 margin-right -"x"px; 来执行此操作，但由于我不知道图像标题的宽度，我不能使用这种技术。有什么好的选择吗？（文本有背景色，所以我不能使用块元素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:38:23.477

您是否考虑过绝对定位相对定位的 div 内的项目？

例如，将 p 和 img 包装在一个 div 中并添加 position:relative 到 div 然后添加 position:absolute 到 p 和 img 并左或右定位这些元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:27:51.903

在它周围放一个`div`：

```
<div><p>Image caption</p><img /></div> 
```

指定 的宽度`div`并允许 位于 的`img`顶部`p`。然后，您可以`padding: 0 auto;`在 div 上使用以使图像居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:36:43.597

我会将 p 和 img 包装在一个 div 中。

```
<div>
<p>Image caption</p>
<img /> 
</div> 
```

然后使用以下样式：

```
div {
  position: relative;
  float:left;
}
p {
  position: absolute;
  top: 20px;
  left: 10px;
} 
```

您可以相应地调整顶部和左侧的值，如果您愿意，还可以使用底部或右侧而不是顶部和左侧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T11:42:36.423

另一种选择是使用固定大小的 div 并将您的图像用作背景？这样，任何文本都将被覆盖，而无需使用绝对定位和相对定位。垫

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T11:43:41.883

此处编写的解决方案不适用于我的网站（尽管在技术上是正确的）

我的解决方案是

```
<p>
    <span>Image caption<span>
</p>
<img /> 
```

进而

```
p{
    display:block;
    margin-right -100%;
} 
```

一些额外的标记，但希望它会帮助有人走上和我一样的道路！

# javascript - 将类别树转换为平面列表的算法

> ID：10815326
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:42.520
> 
> 标签：javascript, c++, algorithm, logic

我正在尝试将类别树转换为平面列表。

在类别中，任何类别都可以有 n 个级别的子类别。

```
For Ex.:

Category1
-SubCategory1
-SubCategory2
--SubCategor1
---SubCategory1
---SubCategory2
----SubCategory1
----SubCategory2
---SubCategory3
--SubCategory2
-SubCategory3

Category2
-SubCategory1
--SubCategory1
---SubCategory1
----SubCategory1
---SubCategory3
-SubCategory3

...etc and so on. 
```

语言不是障碍我只是想制定循环/嵌套循环来创建此逻辑以将其转换为扁平列表。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:31:07.513

您的平面列表中的每个条目都将是您的树的一个节点，因为它是根据深度优先搜索访问的。有关更多信息，请[参阅此处](http://en.wikipedia.org/wiki/Depth_first_search)

编辑：原始帖子被编辑了几次。最初，它看起来像 OP 在一个平面列表之后，因为那将是 BFS 的输出，但在后来的编辑之后，看起来 OP 在一个平面列表之后，因为那将是 DFS 的输出。更一般的情况是“平面列表的每个条目都将是树的一个节点，因为某些遍历函数（例如 BFS 或 DFS）会访问该节点。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:30:40.067

我不知道您所说的平面列表是什么意思，但是您可以在递归访问子类别时使用堆栈（实现方式，它可以是 STL 向量）来存储当前进度。

我上面提到的“当前进度”应该存储你当前访问的是哪个子类，以便你返回时可以继续访问其他子类。

如果你可以制定一个递归算法，你可以用这种形式重写它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:48:02.937

[您可以使用递归 + std::copy](http://www.cplusplus.com/reference/algorithm/copy/)函数轻松完成此操作。

# android - 如何识别我的应用程序是否被用户设置为默认？

> ID：10815327
> 
> 赞同：2
> 
> 时间：2012-05-30T11:24:46.233
> 
> 标签：android, android-intent

在设备上安装我的主屏幕应用程序“X”后，当用户按下主屏幕按钮时，系统会提示他使用**默认操作**Android 对话框在默认主屏幕和我的 X 应用程序之间进行选择。

我的用例是继续提示用户 - 虽然很少，但使用此默认操作对话框，直到他选择我的应用程序作为默认值。

1.  我可以使用**ACTION_MAIN**意图进行提示。
2.  问题是我应该什么时候停止提示？
    我怎么知道我的 X 应用程序现在是默认应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T13:44:07.460

假设您有一个应用程序 X，其清单中有以下声明

```
<activity android:name=".MyActivity"
       android:label="@string/app_name">
    <!-- filter: This activity can be the default view action for a row in
         RawContacts -->
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <data android:mimeType="vnd.android.cursor.item/raw_contact" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

要检查此应用程序是否是“默认选项”（在此示例*中为任何内容*），您只需：

```
/**
 * Returns true if the supplied component name is the preferred activity
 * for any action.
 * @param component The ComponentName of your Activity, e.g. 
 *    Activity#getComponentName().
 */
boolean isDefault(ComponentName component) {
    ArrayList<ComponentName> components = new ArrayList<ComponentName>();
    ArrayList<IntentFilter> filters = new ArrayList<IntentFilter>();
    getPackageManager().getPreferredActivities(filters, components, null);
    return components.contains(component);
} 
```

# ruby - Windows 上的 Ruby gems 主页

> ID：10815328
> 
> 赞同：4
> 
> 时间：2012-05-30T11:24:46.793
> 
> 标签：ruby, windows, rubygems

我为 Windows 安装了 ruby​​，然后安装了 ruby​​gems，但是在尝试使用 ruby​​gems 安装 bundler 时出现以下错误。

```
C:\Users\tgandrews\Ruby\rubygems-1.8.24>gem install bundler --verbose --debug
Exception `NameError' at C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/command_manager.rb:177 - uninitialized constant Gem::Commands::InstallCommand
Exception `Errno::ENOENT' at C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:54 - No such file or directory - Z:/
ERROR:  While executing gem ... (Errno::ENOENT)
    No such file or directory - Z:/
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:54:in `stat'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:54:in `initialize'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:43:in `new'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb:43:in `fetcher'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency_installer.rb:110:in `find_gems_with_sources'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency_installer.rb:228:in `find_spec_by_name_and_version'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency_installer.rb:259:in `install'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/commands/install_command.rb:121:in `block in execute'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/commands/install_command.rb:115:in `each'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/commands/install_command.rb:115:in `execute'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/command.rb:278:in `invoke'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/command_manager.rb:147:in `process_args'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/command_manager.rb:117:in `run'
        C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:65:in `run'
        C:/Ruby193/bin/gem:30:in `<main>' 
```

我的 gem env 返回以下内容

```
C:\Users\tgandrews\Ruby\rubygems-1.8.24>gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i386-mingw32]
  - INSTALLATION DIRECTORY: C:/Ruby193/lib/ruby/gems/1.9.1
  - RUBY EXECUTABLE: C:/Ruby193/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/Ruby193/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-mingw32
  - GEM PATHS:
     - C:/Ruby193/lib/ruby/gems/1.9.1
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T16:54:58.427

这可能是由网络驱动器和环境变量（如`HOME`,`HOMEDRIVE`和/或）的错误配置引起的`HOMEPATH`

请参阅 RubyInstaller 故障排除部分的以下部分：

[https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-network_drive_home](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-network_drive_home)

# hosting - 应用程序实例的 Windows 托管环境？

> ID：10815329
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:47.947
> 
> 标签：hosting, production-environment

我的团队开发了一个服务器应用程序，每个客户都有自己的服务器应用程序实例，该实例托管在我们的数据中心本地。应用程序打开远程客户端使用的许多 TCP、UDP、SIP 和 RTP 连接。

我有一些关于托管服务器实例的问题，在当前情况下，我们使用通过自行开发的“主机控制器”执行的 exe 文件，使用 System.Diagnostics.Process 命名空间来运行实例。

这样做的原因是应用程序的各个实例在崩溃等情况下不应影响其他实例。

这是托管的好选择吗？是否有任何一种类似于 IIS 的用于托管这些应用程序的基础架构，或者我也可以在 IIS 中托管这些应用程序？

我正在为这些服务器应用程序寻找更稳定的托管解决方案，我一直在寻找有关该主题的先前线程，但没有找到任何好的答案。该公司希望在本地托管应用程序，因此基于云的解决方案在这里不是正确的答案。

感谢所有答案，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:14:17.953

看看你的问题，我相信你的数据中心已经有一个托管服务器。您要问的是……您的开发方法（例如为每个远程连接创建单独的实例）是否合适？我对吗？或者您需要帮助找出正确的托管类型（VPS、经销商、云或专用）？

我相信将实例彼此分离是一个非常好的主意......但它会增加服务器上的负载。

# profiling - 管理 %SYS.PTools.SQLStats 数据

> ID：10815330
> 
> 赞同：1
> 
> 时间：2012-05-30T11:24:49.827
> 
> 标签：profiling, intersystems-cache

我需要使用 Caché 数据库分析应用程序，并且我正在尝试为此使用[CacheMonitor](http://www.cachemonitor.de/)。

我启用了查询统计信息（我想 CacheMonitor 在`DO SetSQLStats^%apiSQL(3)`内部执行），两天后，我的服务器磁盘空间不足。恐怕其中的数据太多`%SYS.PTools.SQLQuery`，`%SYS.PTools.SQLStats`我想腾出一些空间。

是否有任何管理工具来管理这些数据？如何从 sql 统计信息中删除数据？

注意：我对 Caché 的了解几乎为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:39:41.863

听起来这是一个非常普遍的问题，即如何删除全局然后回收磁盘空间。

要删除数据，您应该能够使用 SQL 删除语句来清除 %SYS.PTools.SQLStats（应该更大）和/或 %SYS.PTools.SQLQuery。

由于这是缓存，您也可以从命令行中终止全局。我没有使用这些类，但是查看 ^oddDEF 中的类定义，它似乎将数据存储在 ^%SYS.PTools.SQLQueryD、^%SYS.PTools.SQLQueryI 和 ^%SYS.PTools.SQLQueryS（其中是标准的默认存储，所以无论如何这都是可能的）。

如果您只想删除其中的一部分，则需要为它制作自己的 SQL。

一旦它们被删除，您就需要实际收缩数据库（像大多数数据库一样，它可以动态增长但不会自动放弃任何空间）。有关执行此操作的一种方法的示例，请参[见此参考。](http://docs.intersystems.com/documentation/cache/cache52/PDFS/AGBC_Gblockcopy.pdf)基本思想在第 3 页 - 您可以创建一个新数据库，然后将所有数据复制到其中，然后在确定不需要它时删除旧数据库。不要忘记先做备份。

为了在将来更容易做到这一点，您可以使用全局映射功能将 %SYS.PTools 全局变量保存到它们自己的新数据库中。然后，当您想缩小该数据库时，您可以将其替换为新数据库，而无需复制所有数据（如 %SYS.PTools.SQLStats 的类文档中所建议的那样）。

# asp.net - ASP.Net OutputCacheProvider 奇怪的行为

> ID：10815331
> 
> 赞同：0
> 
> 时间：2012-05-30T11:24:50.020
> 
> 标签：asp.net, outputcache

我已经根据我在 Internet 上找到的示例实现了一个简单的基于文件的自定义 OutputCacheProvider。

代码如下：

```
using System;
using System.Configuration;
using System.IO;
using System.Web;
using System.Web.Caching;
using System.Xml.Serialization;

using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;
using System.Diagnostics;
using System.Collections.Generic;
using System.Security.Cryptography;
using System.Text;

namespace SimpleCachedProvider
{
    public class FileCacheProvider : OutputCacheProvider {
        private string _cachePath;

        void WriteToFile(String filename, String contents) {
            FileStream fs = new FileStream(filename, FileMode.OpenOrCreate, FileAccess.Write);
            StreamWriter w = new StreamWriter(fs, System.Text.Encoding.GetEncoding(1253));

            w.BaseStream.Seek(0, SeekOrigin.Begin);
            w.BaseStream.SetLength(0);
            w.Write(contents);
            w.Flush();
            w.Close();
        }

        void AppendToFile(String filename, String contents) {
            if (contents.ToLower().IndexOf("ss2.aspx") >= 0 || contents.ToLower().IndexOf("default.aspx") >= 0) {
                FileStream fs = new FileStream(filename, FileMode.OpenOrCreate, FileAccess.Write);
                StreamWriter w = new StreamWriter(fs, System.Text.Encoding.GetEncoding(1253));

                w.BaseStream.Seek(0, SeekOrigin.End);
                w.Write(contents);
                w.Flush();
                w.Close();
            }
        }

        private string CachePath {
            get {
                if (!string.IsNullOrEmpty(_cachePath))
                    return _cachePath;

                _cachePath = ConfigurationManager.AppSettings["OutputCachePath"];
                var context = HttpContext.Current;

                if (context != null) {
                    _cachePath = context.Server.MapPath(_cachePath);
                    if (!_cachePath.EndsWith("\\"))
                        _cachePath += "\\";
                }

                return _cachePath;
            }
        }

        public override object Add(string key, object entry, DateTime utcExpiry) {
            var path = GetPathFromKey(key);

            AppendToFile(CachePath + "info.txt", "ADD: " + key + " (" + path + ")\r\n");

            if (File.Exists(path)) {
                AppendToFile(CachePath + "info.txt", "ADD: " + key + " (" + path + ") already exists. Will be returned.\r\n");
                return entry;
            }

            AppendToFile(CachePath + "info.txt", "ADD: " + key + " (" + path + ") does not exists. Will be created.\r\n");
            using (var file = File.OpenWrite(path)) {
                var item = new CacheItem { Expires = utcExpiry, Item = entry };
                var formatter = new BinaryFormatter();
                formatter.Serialize(file, item);
                AppendToFile(CachePath + "info.txt", "ADD: " + key + " (" + path + ") saved to disk.\r\n");
            }

            return entry;
        }

        public override void Set(string key, object entry, DateTime utcExpiry) {
            var item = new CacheItem { Expires = utcExpiry, Item = entry };
            var path = GetPathFromKey(key);

            AppendToFile(CachePath + "info.txt", "Set: " + key + " (" + path + ") requested.\r\n");

            using (var file = File.OpenWrite(path)) {
                var formatter = new BinaryFormatter();
                formatter.Serialize(file, item);
                AppendToFile(CachePath + "info.txt", "Set: " + key + " (" + path + "): " + utcExpiry.ToLocalTime().ToString("dd/MM/yyyy HH:mm:ss") + " saved to disk.\r\n");
            }
        }

        public override object Get(string key) {
            var path = GetPathFromKey(key);

            AppendToFile(CachePath + "info.txt", "Get: Querying " + key + " (" + path + ")\r\n");

            if (!File.Exists(path)) {
                AppendToFile(CachePath + "info.txt", "Get: " + key + " (" + path + ") not found.\r\n");
                return null;
            }

            CacheItem item = null;

            using (var file = File.OpenRead(path)) {
                var formatter = new BinaryFormatter();
                item = (CacheItem)formatter.Deserialize(file);
                AppendToFile(CachePath + "info.txt", "Get: " + key + " (" + path + ") retrieved.\r\n");
            }

            if (item == null || item.Expires <= DateTime.Now.ToUniversalTime()) {
                AppendToFile(CachePath + "info.txt", "Get: " + key + " (" + path + ") deleted due to expiration.\r\n");
                Remove(key);
                return null;
            }

            AppendToFile(CachePath + "info.txt", "Get: " + key + " (" + path + ") retrieved and used\r\n");

            return item.Item;
        }

        public override void Remove(string key) {
            var path = GetPathFromKey(key);

            AppendToFile(CachePath + "info.txt", "Remove: " + key + " (" + path + ") requested.\r\n");

            if (File.Exists(path)) {
                AppendToFile(CachePath + "info.txt", "Remove: " + key + " (" + path + ") executed.\r\n");
                File.Delete(path);
            }
        }

        private string GetPathFromKey(string key) {
            return CachePath + MD5(key) + ".txt";
        }

        private string MD5(string s) {
            MD5CryptoServiceProvider provider;
            provider = new MD5CryptoServiceProvider();
            byte[] bytes = Encoding.UTF8.GetBytes(s);
            StringBuilder builder = new StringBuilder();

            bytes = provider.ComputeHash(bytes);

            foreach (byte b in bytes)
                builder.Append(b.ToString("x2").ToLower());

            return builder.ToString();
        }
    }
} 
```

然后我创建了一个带有标题的 .aspx

```
<%@ OutputCache Duration="3600" Location="Server" VaryByParam="*" %> 
```

我已将默认输出缓存提供程序更改为我的 web.config。

奇怪的行为是页面没有被缓存。相反，这是我的调试信息的示例输出。看起来：

1.  从缓存中检索页面并发送回 ASP.Net
2.  紧接着 ASP.Net 调用 Remove() 方法到我的页面
3.  最后 ASP.Net 调用 Set() 并更新页面 - 没有有效的缓存

    获取：查询a2/ss2.aspx (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\7394fd15241e5b7f5c437ddf28dcd0e5.txt)

    获取：a2/ss2.aspx (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\7394fd15241e5b7f5c437ddf28dcd0e5.txt) 已检索。

    获取：a2/ss2.aspx (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\7394fd15241e5b7f5c437ddf28dcd0e5.txt) 检索并使用

    获取：查询a2/ss2.aspxHQFCNmycustom2VDE（C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt）

    获取：a2/ss2.aspxHQFCNmycustom2VDE (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt) 检索。

    获取：a2/ss2.aspxHQFCNmycustom2VDE (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt) 检索并使用

    删除：a2/ss2.aspxHQFCNmycustom2VDE (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt) 请求。

    删除：已执行 a2/ss2.aspxHQFCNmycustom2VDE (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt)。

    添加：a2/ss2.aspx (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\7394fd15241e5b7f5c437ddf28dcd0e5.txt)

    添加：a2/ss2.aspx (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\7394fd15241e5b7f5c437ddf28dcd0e5.txt) 已经存在。将被退回。

    设置：a2/ss2.aspxHQFCNmycustom2VDE (C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt) 请求。

    设置：a2/ss2.aspxHQFCNmycustom2VDE（C:\eShopKey\ASP.Net\Shops\myshoe_dev\Cache\3e72454ab3f36e4cfe3964e5063be622.txt）：30/05/2012 15:07:27 保存到磁盘。

所以我的问题：

1.  为什么 ASP.Net 不断使我的页面无效？
2.  ASP.Net 何时调用 Remove() 和 Set() 方法？我还没有找到任何相关信息。
3.  如果我重命名页面并使用此变体缓存工作！这太奇怪了。

请注意，如果我使用默认的 ASP.Net outputcacheprovider 缓存按预期工作。

* * *

我发现发生了什么但无法修复它：

假设我打开页面：[http ://www.mydomain.com/mypage.aspx?param1=1](http://www.mydomain.com/mypage.aspx?param1=1)

ASP.Net 向我的 OutputCacheProvider 发送 2 个连续的 GET 请求：

*   一个用于页面 mypage.aspx
*   另一个用于同一页面，但附加了查询字符串参数

在我看来，第一个请求与第二个请求以某种方式相关，例如标头。

只要我使用相同的查询字符串连续调用同一页面，缓存就会按预期工作。

如果我调用下一页：[http ://www.mydomain.com/mypage.aspx?param1=2](http://www.mydomain.com/mypage.aspx?param1=2)

然后初始化相同的 2 步 GET 序列。ASP.Net 发送 2 个 GET 请求，一个用于不带参数的页面，一个用于带参数的页面。

然后在缓存中找到第一个 GET 请求（对于没有参数的页面）并返回给 ASP.Net。但不知何故与第二个无关。它与调用的第一个变体有关（param1=1）。

因此，尽管如此，如果第二个请求之前已经被缓存，ASP.Net 认为缓存的页面无效并再次请求添加/设置。

总而言之，在给定时刻，您似乎只能将页面的一个变体放入缓存中。所有先前缓存的变体都将失效，因为该页面将再次使用其他参数调用。

无法检查第一个 GET 请求与什么相关，因为 ASP.NET 使用相同的密钥来检索它。

所以我的新问题：

*   为什么 ASP.Net 将每个页面的 2 个请求发送到自定义输出缓存提供程序？有人知道吗？
*   我怎样才能克服这种奇怪的行为？
*   AspNetInternalProvider 是否具有相同的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:26:09.587

我找到了解决方案！问题出在 Add 方法上。它必须写在所有提供者上，如下所示：

```
public override object Add(string key, object entry, DateTime utcExpiry) {
        String vKey = TransformKey(key);

        object res = Get(key);
        if (res == null) {
            Set(key, entry, utcExpiry);
            return entry;
        }

        return res;
    } 
```

TransformKey 方法只是根据密钥（例如密钥的 MD5 哈希）返回一个安全字符串（没有坏字符的字符串）。在我的第一个发布的代码上寻找一个实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:53:08.950

第一个请求返回一个对象`System.Web.Caching.CachedVary`，第二个请求返回`System.Web.Caching.OutputCacheEntry`。根据object的名字，第一个是for `OutputCache`，第二个是page的数据。

如果您有任何问题，请发送电子邮件至shengzhengshan@hotmail.com

希望它可以帮助你！

阿米尔·盛

# jquery - 如果父 div 隐藏在 .blur() 上，则无法单击链接

> ID：10815333
> 
> 赞同：0
> 
> 时间：2012-05-30T11:25:05.693
> 
> 标签：jquery, hyperlink, click

我在#anotherdiv 中有链接

但是根据设计 #anotherdiv 在取消选择 #thediv 时会隐藏。

当我单击链接时，如何在隐藏父 div 之前触发它？

谢谢！

```
$('#thediv').livequery("blur", function(e){
             $('#anotherdiv').hide();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:29:07.907

您可能会尝试延迟`hide()`一点：

```
$('#thediv').livequery("blur", function(e){
    setTimeout(function() { $('#anotherdiv').hide() }, 50);
}); 
```

# jquery - PrototypeJS 中的 jQuery 淡入淡出函数

> ID：10815334
> 
> 赞同：1
> 
> 时间：2012-05-30T11:25:07.057
> 
> 标签：jquery, prototypejs

我是原型的新手。如何在 Prototype 中编写以下 jQuery 代码？提前致谢..

```
$('#lessonid').fadeIn(function(){
   $('.exercise').css('margin-bottom', '0px');        
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:35:30.273

据我所知，PrototypeJS 库没有内置任何动画/效果方法。您可以使用[Scriptaculous](http://madrobby.github.com/scriptaculous/)，它是 Prototype 的附加组件。这将允许您使用以下[`fade`](http://madrobby.github.com/scriptaculous/effect-fade/)方法执行以下操作：

```
$('lessonid').fade({
    from: 0, 
    to: 1,
    afterFinish: function() {
        $$('.exercise').setStyle({
            marginBottom: 0
        });
    }
}); 
```

# java - netbeans + svn + 部署工作流程

> ID：10815339
> 
> 赞同：2
> 
> 时间：2012-05-30T11:25:23.237
> 
> 标签：java, svn, netbeans

我几乎没有使用netbeans和svn的经验，所以如果我错了，请轻轻纠正我。我来自使用 python/vim/git，所以工作流程明智对我来说是陌生的。

目前，我使用 Netbeans 的 svn 插件从远程存储库中签出我的项目。该项目有几个组件，如 Web 服务，还有一个摆动客户端和业务逻辑。

假设我需要使用 Web 服务和 Swing 客户端，我是否为每个服务创建单独的项目，并将项目作为参考导入？

最后，目前我正在使用 netbeans 在本地 glassfish 服务器上测试 webapp。如何在远程测试服务器上进行部署，以便我的团队成员可以使用和测试 Web 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:45:30.810

如果所有单独的组件都是 svn 中同一个项目的一部分，那么，不，您应该只在 netbeans 中创建一个项目。从 svn 签出项目，一旦 netbeans 签出项目，当它确实从现有源中选择项目时，它应该提示您创建一个 netbeans 项目，按照向导步骤操作，您的项目将被创建。您必须将已签出到 netbeans 中新创建的项目中的项目所需的任何外部 jar 导入。注意：Netbenas 将为新创建的项目创建一个 build.xml 文件，因此请确保除非需要，否则不要将该 build.xml 文件提交到存储库中。

要在 netbeans 中设置远程服务器，请转到工具-> 服务器，选择添加服务器，选择服务器类型（glassfish、tomcat 等），然后使用向导输入服务器的相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:35:08.653

第一个问题“假设我需要使用 Web 服务和 Swing 客户端，我是否为每个服务创建单独的项目，并将项目作为参考导入？”

这实际上取决于您的架构 - 这些组件的耦合程度。您使用什么包装系统也很重要？例如，如果您使用 Maven，您可以轻松地调整项目并定义模块之间的依赖关系。看看[这个](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects)了解详情。我指的是 maven，因为它内置在 Netbeans 中。

关于您的测试，您基本上有两个选择：

a) 把你的玻璃鱼暴露给你的朋友

b) 远程打包和部署你的项目——这真的不能直接给出答案——取决于你的基础设施、远程服务器在哪里、部署包有多大、应用程序服务器在热部署方面的行为等。

我建议尝试第一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:56:22.967

**SVN**帮助您将项目保存在存储库中的多个版本中。
您可以随时从存储库中签出。
签出后，您将使用本地计算机某处保存目录中的项目。
现在，您可以继续开发项目，同时您的朋友也可以继续这样做，并且每当您认为您已经完成了足够的更改或开发时，然后在验证您自己的项目副本后，您可以将更改提交到存储库.
提交后，每个人都可以在存储库中看到更改，因此任何人都可以访问存储库中项目的更新版本。
**请注意**，除非您这样做，否则不会删除早期版本。
您的朋友还可以从存储库中签出项目的副本，他们可以将其与现有的项目合并，他们也可以提交更改。
同时，您可以让您的朋友通过签出项目并部署在他们的本地服务器上来检查您开发的代码。

我希望它能给你一个更好的画面。

# linux - Bash：如何从数字中获取字节？

> ID：10815340
> 
> 赞同：0
> 
> 时间：2012-05-30T11:25:28.393
> 
> 标签：linux, bash, casting, busybox

我想将一个数字转换为其等效的字节。目前我这样做：

```
echo $((0xe0)) | hexdump -c 
```

我得到这个输出：

```
0000000   2   2   4  \n 
```

我想要得到的是：

```
0000000 e0 
```

我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:37:17.203

你可以试试：

```
printf '\xe0'

echo -ne '\xe0' 
```

# javascript - Firebug 更改 Firefox 3.6 的 Javascript 环境

> ID：10815348
> 
> 赞同：0
> 
> 时间：2012-05-30T11:25:54.327
> 
> 标签：javascript, jquery, firefox, firebug

我正在使用 Firebug 1.7.3 对 Firefox 3.6.21 中的站点进行一些调试。当页面首次加载时，我尝试执行的 Javascript 根本不会加载。我打开 Firebug 看看问题出在哪里，我点击重新加载，突然它开始工作了。

我不知道这里发生了什么。

```
function initStations() {
  //console.log("in stations")
  ringContainer = $("#ringContainer");
  ringWidth = ringHeight = ringContainer.innerWidth();
  //console.log(ringWidth + " " + ringHeight);
  originX = (ringWidth / 2) - 0;
  originY = (ringHeight / 2);
  radius = originY + 20;
  //console.log(originX + " " + originY + " " + radius);
  // get the ul containing the stations
  stationList = $("#stationList");
  // an array of the li elements
  stationLiElems = $("#stationList li");
  // how many stations
  length = stationLiElems.size();
  // distance between stations in degrees
  spacing = (360 / length)
  // 360 degrees in circle divided by the number of stations
  // array of stations
  stations = [];
  // debug
  //console.log(stationList);
  stationLiElems.each(function(index, element) {
  //console.log(index +" - "+ spacing);
  stations[index] = {
    'element' : element,
    // http://stackoverflow.com/questions/925118/algorithm-for-finding-out-pixel-coordinates-on-a-circumference-of-a-circle
    'x' : originX + radius * Math.sin(spacing * index * 0.0174532925 ),
    'y' : originY + radius * Math.cos(spacing * index * 0.0174532925 )
  }
  $(element).css({'top' : stations[index].y , 'left' : stations[index].x });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:57:23.703

有同样的问题，删除 console.log 为我解决了这个问题。我看到您已将其注释掉，但请检查您没有在其他地方使用它。

# ruby-on-rails - Ruby on Rails - 将参数传递到 routes.rb 中的 301 重定向

> ID：10815349
> 
> 赞同：7
> 
> 时间：2012-05-30T11:25:55.210
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-routing

我想在 routes.rb 中更改我现有的“游戏”路由，但由于 SEO，我还需要为旧链接设置 301 重定向。

我的旧路由：

```
match 'games/:permalink/:id/(:page)' => 'games#show' 
```

新路由：

```
match 'gierki/:permalink/(:page)' => 'games#show' 
```

这是我试图做的重定向：

```
match 'games/:permalink/:id/(:page)' => redirect {|params| "/gierki/#{params[:permalink]}" + params[:page].nil? ? "" : "/#{params[:page]}" } 
```

上面的重定向不起作用，这是一个错误：

```
wrong number of arguments (1 for 2) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T11:48:19.417

尝试像这样：

```
match 'games/:permalink/:id/(:page)' => redirect {|params,request| "/gierki/#{params[:permalink]}" + params[:page].nil? ? "" : "/#{params[:page]}" } 
```

看看它是否有效。

# ruby-on-rails - ruby 中 array.count 的意外行为

> ID：10815356
> 
> 赞同：0
> 
> 时间：2012-05-30T11:26:17.227
> 
> 标签：ruby-on-rails

嗨，当我放置这样的订阅者数组时，我正在使用 Rails3

```
 @subscribers = User.all 
```

并把它给了我这个数组

```
 [#<User id: 62, is_activated: true, subscriber: "TEST_DB2", ports_order: 100, created_at: "2012-05-21 14:47:48">, #<User id: 66, is_activated: true, subscriber: "JOHI", ports_order: 100, created_at: "2012-05-22 12:06:19">, #<User id: 68, is_activated: true, subscriber: "ALI-NAQWI", ports_order: 100, created_at: "2012-05-24 11:01:22">] 
```

当我发出命令@subscribers.count #it 给我 0 计数

为什么？？？？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:30:54.583

尝试使用长度，这可能是 AREL 中的错误 :)

说明他是想偷懒做点什么。他正在归还代理对象，因此那里可能会出现问题。长度将始终适用于您的结果值 ~ 数组。

# liferay-6 - 在liferay searchcontainer中对多个列标题进行排序

> ID：10815357
> 
> 赞同：1
> 
> 时间：2012-05-30T11:26:23.837
> 
> 标签：liferay-6

我在 liferay 6.0.6 中对 liferay searchcontainer 的单列标题进行了排序。现在我想以 asc 或 desc 顺序对多个字段应用排序，即 FirstName、LastName、Date。谁能帮帮我..

提前致谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T04:39:01.013

**视图.jsp**

```
<%
PortalPreferences portalPrefs = PortletPreferencesFactoryUtil.getPortalPreferences(request);
String orderByCol = ParamUtil.getString(request, "orderByCol");
String orderByType = ParamUtil.getString(request, "orderByType");
System.out.println("Col  "+ orderByCol);

if (Validator.isNotNull(orderByCol) && Validator.isNotNull(orderByType)) {
portalPrefs.setValue("NAME_SPACE", "order-by-col", orderByCol);
portalPrefs.setValue("NAME_SPACE", "order-by-type", orderByType);

} else {

orderByCol = portalPrefs.getValue("NAME_SPACE", "order-by-col", "Date");
orderByType = portalPrefs.getValue("NAME_SPACE", "order-by-type", "asc");

}
 %>

 <liferay-ui:search-container  delta='20' emptyResultsMessage="No Form Submitted" orderByCol="<%= orderByCol %>" orderByType="<%= orderByType %>">

 <liferay-ui:search-container-results>

<%
            List<User> userList = UserLocalServiceUtil.getUsers(-1,-1);
            OrderByComparator orderByComparator =       
           CustomComparatorUtil.getUserOrderByComparator(orderByCol, orderByType);        

           Collections.sort(userList,orderByComparator);

          results = ListUtil.subList(userList, searchContainer.getStart(),   
                     searchContainer.getEnd());

               if (userList.size()< total)
                {total = userList.size();
                }

               pageContext.setAttribute("results", results);
               pageContext.setAttribute("total", total);

 %>

 </liferay-ui:search-container-results>

    <liferay-ui:search-container-row
     className="com.liferay.portal.model.User"

     modelVar="user">

     <liferay-ui:search-container-column-text
      name="Screen Name"
      property="screenName"
      orderable="<%= true %>"
      orderableProperty="screenName"
     />

      <liferay-ui:search-container-column-text
      name="Email"
      property="emailAddress"
      orderable="<%= true %>"
     orderableProperty="emailAddress"
     />

      <liferay-ui:search-container-column-text
      name="Date"
      property="createDate"
      orderable="<%= true %>"

     />

   </liferay-ui:search-container-row>

    <liferay-ui:search-iterator />

</liferay-ui:search-container> 
```

**CustomComparatorUtil**

```
public static OrderByComparator getUserOrderByComparator(
               String orderByCol, String orderByType) {

               boolean orderByAsc = false;

               if (orderByType.equals("asc")) {
               orderByAsc = true;
               }

               OrderByComparator orderByComparator = null;

                System.out.println("Custom "+ orderByCol);
               if (orderByCol.equalsIgnoreCase("screenName")) {
                   System.out.println("1");
                orderByComparator = new FirstNameComparator(orderByAsc);
               }
               else if (orderByCol.equalsIgnoreCase("emailAddress")) {
                   System.out.println("2");
                orderByComparator = new EmailComparator(orderByAsc);
               }
               else if (orderByCol.equalsIgnoreCase("Date")) {
                 System.out.println("3");
                orderByComparator = new DateComparator(orderByAsc);
               }/*
               else if (orderByCol.equalsIgnoreCase("Job Title")) {

                orderByComparator = new JobTitleComparator(orderByAsc);
               }*/

               return orderByComparator;
               } 
```

**名字比较器**

公共静态字符串 ORDER_BY_ASC = "状态 ASC";

```
 public static String ORDER_BY_DESC = "status DESC";

  public FirstNameComparator()
  {
   this(false);
  }

  public FirstNameComparator(boolean asc) {
   _asc = asc;
  }

 public int compare(Object obj1, Object obj2) {

   User instance1 = (User) obj1;
   User instance2 = (User) obj2;

   int value = instance1.getFirstName().toLowerCase().compareTo(instance2.getFirstName().toLowerCase());

   if(_asc)
   {
    return value;
   } else
   {
    return -value;
   }

 }

 public String getOrderBy() {

  if (_asc) {
   return ORDER_BY_ASC;
  }
  else {
   return ORDER_BY_DESC;
  }
  }

 private boolean _asc; 
```

}

同样，您可以为电子邮件地址和日期上课..

# ajax - ajax 响应刷新 url 而不是追加？

> ID：10815361
> 
> 赞同：0
> 
> 时间：2012-05-30T11:26:47.917
> 
> 标签：ajax, codeigniter

我有一个关于 ajax 的问题，我对它很陌生，所以不确定最好的程序。无论如何，我已将 ajax 合并到我的 CodeIgniter 应用程序中，但我有可能有 2 种不同的响应，我不太确定如何在我的 ajax 中处理这个问题。

除了将我的结果附加到 div 之外，我可以不只是刷新 url 吗？

在我的控制器中，我有表单验证，当它为 false 时，我想刷新以显示我的错误，但如果它返回 true，我想显示新页面，如果这有意义吗？

看法

```
$.post("<?php echo base_url(); ?>part-one",
   $("form").serialize(),
   function(result){
      // if errors show this
      $("#error").html(result);

      // if there are no errors how do I check the response to refresh the page to a new url?
   }, "html"
); 
```

控制器

```
if($this->form_validation->run() == FALSE){
   $data['content'] = "part_one";
   $this->load->view('template', $data);
} else {
   $data['content'] = "part_two";
   $this->load->view('template', $data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:00:27.443

如果您想重新加载页面，您可以这样做；

```
$.ajax({
        url: url,
        type: 'post',
        data: data,
        success: function(data) {
            location.reload();       
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:21:13.527

如果我理解你的话，那么这段代码可以帮助你......

```
 $.post("<?php echo base_url(); ?>part-one",
   $("form").serialize(),
   function(result){
      // if errors show this
      $("#error").html(result);
if(result =='false condition response')
{ 
   window.location.reload()
}
if(result == 'True Conditon response')
{
window.location.href('URL of the page')
}

    // if there are no errors how do I check the response to refresh the page to a new url?
   }, "html"
); 
```

# javascript - ie8：未知的运行时错误

> ID：10815362
> 
> 赞同：2
> 
> 时间：2012-05-30T11:26:56.243
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我只有在ie8才有这个问题

这是我的 javascript 代码

```
var bustcacheparameter="" ;

function createRequestObject(){
    try {
        xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
    }   catch(e)    {
        alert('Sorry, but your browser doesn\'t support XMLHttpRequest.');
    };
    return xmlhttp;
};
function ajaxpage(url, containerid){
    var page_request = createRequestObject();

    if (bustcachevar) bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime()
    page_request.open('GET', url+bustcacheparameter, true)
    page_request.send(null)

    page_request.onreadystatechange=function(){
        loadpage(page_request, containerid)
    }
}
function loadpage(page_request, containerid){
    if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1)) {
        document.getElementById(containerid).innerHTML=page_request.responseText;
    };
}
function LoadMonth(month, year) {
    ajaxpage("calendar.php?month="+month+"&year="+year, "Calendar")
}
LoadMonth(); 
```

**我用ie测试仪知道这个错误** `line : 26 char : 6 unknown runtime error`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:11:00.357

试试这个 ; 它用于兼容性问题，即

我希望它有帮助

[AJAX 支持](http://www.szajkowski.com/ajaxsample.html)

```
 function createXMLHttpRequest()
{
  var xmlhttp, bComplete = false;
  try { xmlhttp = new ActiveXObject("Msxml2.XMLHTTP"); }
  catch (e) { try { xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); }
  catch (e) { try { xmlhttp = new XMLHttpRequest(); }
  catch (e) { xmlhttp = false; }}}
  if (!xmlhttp) return null;
  this.connect = function(sURL, sMethod, sVars, fnDone)
  {
    if (!xmlhttp) return false;
    bComplete = false;
    sMethod = sMethod.toUpperCase();

    try {
      if (sMethod == "GET")
      {
        xmlhttp.open(sMethod, sURL+"?"+sVars, true);
        sVars = "";
      }
      else
      {
        xmlhttp.open(sMethod, sURL, true);
        xmlhttp.setRequestHeader("Method", "POST "+sURL+" HTTP/1.1");
        xmlhttp.setRequestHeader("Content-Type",
          "application/x-www-form-urlencoded");
      }
      xmlhttp.onreadystatechange = function(){
        if (xmlhttp.readyState == 4 && !bComplete)
        {
          bComplete = true;
          fnDone(xmlhttp);
        }};
      xmlhttp.send(sVars);
    }
    catch(z) { return false; }
    return true;
  };
  return this;
}

function getModIndex(val) {
    var divEle = "IndexDiv" + val;
    var request = createXMLHttpRequest();

    if ( !request ) { 
    alert( request )
    return false
    }

    var callback = function( oXML ) {
    document.getElementById( divEle ).innerHTML = oXML.responseText;
    }

    request.connect(
    '../ajax/ajax-GetIndex.php',
    'POST',
    'id=' + val,
    callback
    );
} 
```

# go - 向现有（标准）类型添加新方法

> ID：10815367
> 
> 赞同：6
> 
> 时间：2012-05-30T11:27:03.243
> 
> 标签：go

`ReadBytes`我正在编写一些代码，这些代码需要包中的方法几乎可以满足的功能`bufio`。具体来说，该方法从 a 读取，`Reader`直到遇到特定字节。我需要一些可以读取的内容，直到它遇到几个字节中的一个（主要是空格、换行符和制表符）。

我查看了库的源代码，如果我可以访问`bufio`结构使用的内部缓冲区，我知道该怎么做。有什么办法可以“猴子补丁”包并添加另一种或两种方法吗？或者另一种方式来获得我需要的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T11:47:29.073

这种方法的一些东西（注意：未经测试的代码）：

```
type reader struct{
        *bufio.Reader // 'reader' inherits all bufio.Reader methods
}

func newReader(rd io.Reader) reader {
        return reader{bufio.NewReader(rd)}
}

// Override bufio.Reader.ReadBytes
func (r reader) ReadBytes(delim byte) (line []byte, err error) {
        // here goes the monkey patch
}

// Or

// Add a new method to bufio.Reader
func (r reader) ReadBytesEx(delims []byte) (line []byte, err error) {
        // here goes the new code
} 
```

编辑：我应该注意到这*无助*于访问原始包内部（非导出实体）。感谢 Abhay 在您的评论中指出这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:52:40.933

通常最好使用包 API 来解决问题。但是，如果您有令人信服的理由访问未导出的功能，请复制包源并将其破解。BSD 风格的许可证与它们一样自由。

# regex - 清理正则表达式以匹配内部文本

> ID：10815375
> 
> 赞同：1
> 
> 时间：2012-05-30T11:27:47.300
> 
> 标签：regex, innertext

我正在使用以下正则表达式解析标记以匹配标记元素的内部文本。

```
(?<=<*>)[^<]+(?=<[^>]*>) 
```

我想对此进行优化以删除空白处的匹配项。例如：>空格\n等<

例如：

```
<div>
     <div>TargetMatch</div>
</div> 
```

目标命中：

1.  目标匹配

实际匹配：

1.  " "
2.  目标匹配

有任何想法吗？

斯莱伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:32:54.333

图案：`>\s+<`

替代品：`><`

# wpf - 如何在 WPF 中实现“查找下一个”功能？

> ID：10815376
> 
> 赞同：0
> 
> 时间：2012-05-30T11:27:49.500
> 
> 标签：wpf, find

如何实现“查找下一个”功能？我有一种方法可以集体提供搜索结果，但我想实现“查找下一个”功能，我想从顶部逐个查找所需的搜索文本。单击按钮将显示第一次出现，第二次单击将显示第二次出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:34:02.367

试试这样

```
int lastindex = 0;
string str = "cd ce ce cesd cd sd cd";
str.IndexOf("cd", lastindex + 1); 
```

# rcp - 构建 RCP 应用程序时在 Tycho 中进行 p2.inf 过滤

> ID：10815378
> 
> 赞同：2
> 
> 时间：2012-05-30T11:27:53.820
> 
> 标签：rcp, p2, tycho

我正在使用 tycho 构建一个 RCP 应用程序。RCP 应用程序使用 p2 及其自更新功能在 p2.inf 文件中配置存储库。奇迹般有效。

现在我想在 p2.inf 文件中引入一个占位符 ${updatesiteurl} 并根据其构建的环境将其替换为 URL。但不幸的是，它被替换为空字符串而不是环境变量，我猜这是因为 tycho 或 p2 导演替换了一些转义字符（例如“：”，例如 ${58}）。

有什么想法可以解决这个问题吗？我考虑过明确声明资源插件并将其绑定到较早的构建阶段，但这也不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:28:14.200

最终起作用的是：我将 p2.inf 文件移动到目录 /p2 并让 maven 资源插件将替换文件复制到 /target 中的临时文件夹中。现在复制任务将文件在稍后阶段复制（为什么这在同一阶段没有工作......）到根目录，即 .product 文件所在的位置，因为两者都必须在同一个目录中（具有相同的前缀）。最后`clean`删除根目录下的p2.inf文件...

# iphone - 如何在 tableview 中添加一些行而不覆盖同一位置？

> ID：10815379
> 
> 赞同：0
> 
> 时间：2012-05-30T11:28:05.370
> 
> 标签：iphone, tableview

每个身体。我是iphone开发的新人。我希望你的帮助。

我尝试向 TabelView 添加一些标签。

代码如下。

```
UITableView *tableView = [[UITableView alloc]init];
for ( int j = 0; j < 3; j++ )
{
     UILabel *label = [[UILabel alloc]init];
     label.text = [NSString stringWithFormat:@"sample"];
     label.frame = CGRectMake (10, 10, 100, 30);
     [tableView addSubview:label];

     [label release];
}

[tableView release]; 
```

但是，结果，我看到了一些奇怪的东西。它仅在 tableView 的第一个索引中添加。所以它在索引中被覆盖。有什么问题？我能怎么做 ？它不是一个初始化函数，我想动态添加一些行。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:34:22.903

这不是你这样做的方式。阅读这些教程，他们会帮助你

[http://mobile.tutsplus.com/tutorials/iphone/uitableview/](http://mobile.tutsplus.com/tutorials/iphone/uitableview/)

[http://www.codeproject.com/Articles/79239/iPhone-Programming-Tutorial-UITableView-Hello-Worl](http://www.codeproject.com/Articles/79239/iPhone-Programming-Tutorial-UITableView-Hello-Worl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:16:55.153

我假设您正在正确填充您的表格视图（使用数据源方法）。如果您不是，那么您需要紧急阅读[Apple 文档](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)（即使您是，您也应该阅读它们！）

要将新行插入表中，请更新数据源（例如，字符串数组），然后使用

```
-[UITableView insertRowsAtIndexPaths:withRowAnimation:] 
```

# objective-c - 特定对象的 nsnotification

> ID：10815381
> 
> 赞同：2
> 
> 时间：2012-05-30T11:28:16.300
> 
> 标签：objective-c, ios, ios5

我正在使用 xcode 和 Objective c 开发 ios 应用程序 ios 5+。好的，目前正在搞乱 nsnotifications，我只需要一些澄清，因为我有点困惑。假设我有一个视图控制器，我添加了一个观察者喜欢这样

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(showContent:) name:kTPSShowContentNotification object:self]; 
```

其中对象设置为self。我认为这意味着它仅在从该对象发送时才从该通知中查找。我错了吗？

在代码的其他地方我正在发布这样的通知

```
 [[NSNotificationCenter defaultCenter] postNotificationName:kTPSShowContentNotification object:currentVC]; 
```

其中 currentVC 是最初设置观察者的视图控制器。我认为这就是捕获该通知所需的全部内容，因为该帖子告诉通知中心从该视图控制器发送它。但它没有抓住它，我不确定为什么。如果在添加观察者时我将对象设置为 nil，那么它会捕获它，但所有其他视图控制器（如果有）也具有该通知的观察者。有没有办法解决 ？我接近这个完全错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:38:49.263

要仅从 *ObjectSendingNotification* 对象接收通知，您应该编写：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(showContent:) name:kTPSShowContentNotification object:theObjectSendingNotification]; 
```

并且对象发送通知应该以这种方式发送

```
 [[NSNotificationCenter defaultCenter] postNotificationName:kTPSShowContentNotification object:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:39:15.327

如果我做对了，您想发布并从同一个控制器获得通知。所以你可以做这样的事情：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(showContent:) name:kTPSShowContentNotification object:self];

 [[NSNotificationCenter defaultCenter] postNotificationName:kTPSShowContentNotification object:self]; 
```

但如果你的`currentVC`ivar 指向同一个控制器，它应该确实有效。你说它不起作用的事实让我相信它没有指向你的控制器的同一个实例。

# android - Android UDP 客户端没有收到 DatagramPacket

> ID：10815383
> 
> 赞同：0
> 
> 时间：2012-05-30T11:28:21.947
> 
> 标签：android, sockets, udp

WiBro，用作服务器模块和客户端 Nexus Galaxy ICS。两台机器都是3g UDP通讯。服务器将只返回已执行接收到的数据。

dSocket.send(sendPacket) 是一种流畅的通信。但是，我们有一个问题。dSocket.receive (recvPacket) 不接收数据。

服务器发送的数据包是错误的？如果客户端接收到的数据包是错误的？服务器发送数据但是，电信设备被采取保存的情况？

当只发送一个数据包时，客户端没有问题。但是在接收代码执行后，客户端出现了问题。

```
private class ClientThread implements Runnable{

    @SuppressWarnings("finally")
    @Override
    public void run() {
        // TODO Auto-generated method stub
        DatagramSocket dSocket = null;
        try{
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress.toString());
            Log.d(TAG, "Connecting");
            Log.d(TAG, "IP :::: " + serverAddr.toString());
            dSocket = new DatagramSocket(SERVERPORT);
            dSocket.setSoTimeout(5000);
            byte[] arr_RecvPacket = new byte[1024];
            connected = true;
            while(connected){
                try{
                    Log.d(TAG, "Sending Command :::: ( " + String.valueOf(i));
                    String strPacket = "Hey Server ( " + String.valueOf(i);
                    byte[] arr_Packet = strPacket.getBytes();
                    sendPacket = new DatagramPacket(arr_Packet, arr_Packet.length, serverAddr, SERVERPORT);
                    dSocket.send(sendPacket);
                    Log.d(TAG, "C:Send");
                    i++;
                    Log.d(TAG, "C:Make Recv Packet....");
                    recvPacket = new DatagramPacket(arr_RecvPacket, arr_RecvPacket.length);
                    Log.d(TAG, "C:Recving...");
                    dSocket.receive(recvPacket);
                    handler.sendEmptyMessage(0x01);
                    Thread.sleep(4000);
                }catch(Exception e){
                    e.printStackTrace();
                    Log.d(TAG, "S:Error");
                }
            }
            Log.d(TAG, "S:DataSocket close");
            dSocket.close();
        }catch(Exception e){
            Log.d(TAG, "C:Error");
            e.printStackTrace();
            connected = false;
        }finally{
            connected = false;
            if(dSocket != null){
                dSocket.close();
            }
            return;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:52:30.880

> 服务器发送的数据包是错误的？

可能。没有看到就很难说。它应该将回复发送回嵌入在传入数据报中的 IP：端口。最简单的方法是重用它，只需更改数据。

> 客户端接收到的数据包是错误的？

看起来不错。

> 服务器发送数据但是，电信设备被采取保存的情况？

我不知道这是什么意思。

# html - ARGB Hex颜色在css html中不起作用

> ID：10815384
> 
> 赞同：22
> 
> 时间：2012-05-30T11:28:21.990
> 
> 标签：html, css, background-color, argb

为什么这个 ARGB 十六进制不起作用？

```
<td style="background-color: #FFFF9980"> 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-30T11:30:04.393

使用`rgba(255,153,128,1.0)`而不是您的十六进制值（尽管如果那真的是 ARGB 它与`#ff9980`in相同`RGB`- 如果您的意思是 RGBA 那么您将需要`rgba(255,255,153,0.5)`）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T08:50:28.740

[CSS3 规范](http://www.w3.org/TR/css3-color/#rgba-color)说：

> 与 RGB 值不同，RGBA 值没有十六进制表示法。

所以你将不得不使用`rgba(255,153,128,1.0)`上面提到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-11T11:12:04.273

# ARGB 十六进制颜色

RGBA 颜色值是具有 Alpha 通道的 RGB 颜色值的扩展 - 它指定颜色的不透明度。

RGBA 颜色值通过以下方式指定：rgba(red, green, blue, alpha)。alpha 参数是一个介于 0.0（完全透明）和 1.0（完全不透明）之间的数字。

```
<td style="background-color: rgba(255, 0, 0, 0.2);"> 
```

```
#p1 {background-color:rgba(255,0,0,0.3);}
#p2 {background-color:rgba(0,255,0,0.3);}
#p3 {background-color:rgba(0,0,255,0.3);}
#p4 {background-color:rgba(192,192,192,0.3);}
#p5 {background-color:rgba(255,255,0,0.3);}
#p6 {background-color:rgba(255,0,255,0.3);}
```

```
<h1>Define Colors With RGBA Values</h1>

<p id="p1">Red</p>
<p id="p2">Green</p>
<p id="p3">Blue</p>
<p id="p4">Grey</p>
<p id="p5">Yellow</p>
<p id="p6">Cerise</p>
```

# c# - 如何使这个 linq to sql 交易成功

> ID：10815388
> 
> 赞同：0
> 
> 时间：2012-05-30T11:28:34.107
> 
> 标签：c#, linq-to-sql, foreign-keys

如何在这个 linq to sql 代码中添加事务

```
MyDBDataContext DB = new MyDBDataContext();
            SurveyClient objMaster = new SurveyClient();
            objMaster.SurveyID = int.Parse(dtQuestions.Rows[0]["SurveyID"].ToString());
            MembershipUser myObject = Membership.GetUser();
            myObject.ProviderUserKey.ToString();
            objMaster.UserID = Guid.Parse(myObject.ProviderUserKey.ToString());  //Guid.Parse("993a109d-a0c7-4946-a8da-99fb594f3ce2");// current userID
            objMaster.SurveyDate = DateTime.Now;
            DB.SurveyClients.InsertOnSubmit(objMaster);
           // DB.SubmitChanges();

            foreach (DataRow dr in dtQuestions.Rows)
            {
                int currQueScore = GetAnswerScore(dr["AnswerType"].ToString().Trim(), dr["ClientAnswerValue"].ToString().Trim());
                dr["ClientAnswerScore"] = currQueScore;
                myScore += currQueScore;
                SurveyClientAnswer objDetail = new SurveyClientAnswer();
                objDetail.SurveyClientID = objMaster.SurveyClientID;
                objDetail.QuestionID = int.Parse(dr["QuestionID"].ToString());
                objDetail.Answer = dr["ClientAnswerValue"].ToString();
                objDetail.Score = int.Parse(dr["ClientAnswerScore"].ToString());
                DB.SurveyClientAnswers.InsertOnSubmit(objDetail);
               // DB.SubmitChanges();
            }
            objMaster.FinalScore = myScore;
            DB.SubmitChanges(); 
```

当我评论两个 DB.SubmitChanges() 时，它会抛出错误

```
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_SurveyClientAnswers_SurveyClientAnswers". The conflict occurred in database "NEXLEV", table "dbo.SurveyClient", column 'SurveyClientID'.
The statement has been terminated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:25:08.397

您走在正确的道路上，但是考虑了太多“面向数据库”。

实际上 objMaster 还没有 ID，这就是问题所在。但是在 Linq 中，您不应该将主 ID 分配给细节，而是将主 ID 分配给细节实体类（或相反）：

Sohe的问题是这一行：

```
objDetail.SurveyClientID = objMaster.SurveyClientID; 
```

它应该改为

```
objDetail.SurveyClient = objMaster; 
```

在这种情况下，不需要事务管理，因为它可以在一个 SubmitChanges() 中工作，Linq 会为你添加事务，它也足够聪明，可以以正确的方式管理 ID 的设置

[假设：您在数据库中设置了外键约束]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:35:06.723

您没有分配 objMaster.SurveyClientID，因为它不在数据库中，并且在您将其分配给您的 SurveyClientAnwser 时没有 ID。第一个（注释的） DB.SubmitChanges() 确实将更改发送到数据库，并且 objMaster.SurveyClientID 将被分配（在您的数据库中自动分配）。然后 objDetail.SurveyClientID = objMaster.SurveyClientID; 行确实为您的 SurveyClientAnwser 分配了一个真实的 ID。

要进行一项交易，您必须制定一个交易范围：

```
 MyDBDataContext DB = new MyDBDataContext();
  using (TransactionScope ts = new TransactionScope())
  {
      SurveyClient objMaster = new SurveyClient();
      objMaster.SurveyID = int.Parse(dtQuestions.Rows[0]["SurveyID"].ToString());
      MembershipUser myObject = Membership.GetUser();
      myObject.ProviderUserKey.ToString();
      objMaster.UserID = Guid.Parse(myObject.ProviderUserKey.ToString());  //Guid.Parse("993a109d-a0c7-4946-a8da-99fb594f3ce2");// current userID                  
      objMaster.SurveyDate = DateTime.Now;                  DB.SurveyClients.InsertOnSubmit(objMaster);
      DB.SubmitChanges();
      foreach (DataRow dr in dtQuestions.Rows)                 
      {
            int currQueScore = GetAnswerScore(dr["AnswerType"].ToString().Trim(), dr["ClientAnswerValue"].ToString().Trim()); 
            dr["ClientAnswerScore"] = currQueScore;
            myScore += currQueScore;  
            SurveyClientAnswer objDetail = new SurveyClientAnswer();                      
            objDetail.SurveyClientID = objMaster.SurveyClientID;   
            objDetail.QuestionID = int.Parse(dr["QuestionID"].ToString()); 
            objDetail.Answer = dr["ClientAnswerValue"].ToString(); 
            objDetail.Score = int.Parse(dr["ClientAnswerScore"].ToString());       
            DB.SurveyClientAnswers.InsertOnSubmit(objDetail);
            // DB.SubmitChanges(); //no need for this one
      }
      objMaster.FinalScore = myScore;
      DB.SubmitChanges();      

      ts.Complete();
  } 
```

# php - php preg_match 错误信息

> ID：10815390
> 
> 赞同：0
> 
> 时间：2012-05-30T11:28:44.230
> 
> 标签：php, regex

我想使用 REGEX 匹配一个字符串，它遵循以下语法：

```
Text/number 
```

所以我的`preg_match()`功能是...

```
if(preg_match("/[^A-Za-z/0-9]$/ ", $folio))
$err[] = "Wrong value, it's should be lik: C/455"; 
```

但是收到错误消息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:30:41.483

试试这个：

```
$folio = "Text/15";
if(preg_match('~[a-z]/[\d]~i', $folio))
    echo "match";
else
    echo "no match"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:33:33.127

您需要`/`使用`\`. 数字也是文本的子集，您需要将其包含在文本部分中。您需要一个或多个文本/数字字符，因此`+`需要 a。

它加起来就是以下语句：

```
if(preg_match("/^[A-Za-z0-9]+\/[0-9]+$/", $folio)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:32:20.173

您需要转义 / 或使用不同的字符来包围正则表达式，例如：

```
if(preg_match("@[^A-Za-z/0-9]$@ ", $folio)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T11:33:59.210

```
if ( ! preg_match('/\b[a-z]+\/[0-9]+\b/i', $folio)) {
  $err[] = "Wrong value, it's should be like this: C/455";
} 
```

# ubuntu - 无法在 Ubuntu 上将 ElasticSearch 作为服务运行

> ID：10815392
> 
> 赞同：12
> 
> 时间：2012-05-30T11:28:50.123
> 
> 标签：ubuntu, service, elasticsearch

[我正在尝试按照正常的设置指南](http://www.elasticsearch.org/tutorials/2010/07/01/setting-up-elasticsearch.html)启动并运行 ElasticSearch 。

在我的 Macbook 上一切都运行良好，但我正在尝试在 Ubuntu 11.04 服务器上做同样的事情。

运行`/usr/local/elasticsearch/bin/elasticsearch -f`有效，我得到了`curl http://localhost:9200`.

然而，当我尝试将 ElasticSearch 作为服务启动时，这是我得到的（我已经安装了服务包装器）：

```
$ rcelasticsearch start

Starting ElasticSearch...
Waiting for ElasticSearch.............................
WARNING: ElasticSearch may have failed to start. 
```

果然`rcelasticsearch status`说`ElasticSearch is not running`localhost:9200 无法访问。

任何想法可能是什么问题？

编辑：服务日志说：

```
Launching a JVM...
JVM exited while loading the application.
Error occurred during initialization of VM
Could not reserve enough space for object heap 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-30T12:41:11.743

服务器实例没有足够的内存用于默认的 ElasticSearch 服务包装器设置。为了解决这个问题，我编辑`/usr/local/elasticsearch/bin/service/elasticsearch.conf`并`ES_HEAP_SIZE`从 1024 更改为 512

# jquery - 覆盖中心位置不起作用

> ID：10815393
> 
> 赞同：1
> 
> 时间：2012-05-30T11:28:53.233
> 
> 标签：jquery, css, jquery-tools

我使用 jQuery Tools 来实现叠加效果。这听起来很奇怪，但是当第一次打开叠加层时，它并没有像预期的那样居中，而是一直位于左侧。如果我关闭链接并再次打开它，这次它是居中的？？不知道这里发生了什么...

```
$(function() {
        $("a[rel]").overlay({ 
            mask: '#000',
            top: 'center', 
            left: 'center',
            onBeforeLoad: function() {
                // grab wrapper element inside content
                var wrap = this.getOverlay().find(".contentWrap");
                // load the page specified in the trigger
                wrap.load(this.getTrigger().attr("href"), function(){initialize();});
            }
        });
    }); 
<a href="default.cs.asp?Process=ViewCheckinMap" rel="#overlay">clik to map</a>
<!-- overlayed element -->
<div class="apple_overlay" id="overlay">
  <!-- the external content is loaded inside this tag -->
  <div class="contentWrap"></div>
</div>
<style>
  /* use a semi-transparent image for the overlay */
  #overlay {
    background-image:url(/media/img/overlay/transparent.png);
    color:#efefef;
    height:450px;
  }
  /* container for external content. uses vertical scrollbar, if needed */
  div.contentWrap {
    height:400px;
    width:960px;
    background: #FFF;
  }
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:22:11.077

你只需要让你的`#overlay`位置：相对并添加一个设定的宽度：

```
#overlay {
    position:relative;
    width:480px;
} 
```

宽度可以是任何你想要的，但它确实需要一个宽度。

# ssl - 如何制定 SSL 证书请求以被授予认证机构能力？

> ID：10815396
> 
> 赞同：0
> 
> 时间：2012-05-30T11:29:12.033
> 
> 标签：ssl, ssl-certificate, self-signed

我知道如何创建自签名 SSL 证书，但必须如何制定证书请求，以便认证机构授予证书签署证书的能力？

假设我是一家公司的网络运营主管。不同的 IT 部门有自己的网络，他们可以证明其他人可以连接到，但我必须授予他们的证书签署证书的能力，而不是他们创建自己的自签名证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:23:14.923

将属性和其他信息设置到证书中所涉及的大部分工作都是管理性的。

您不必担心证书请求本身。任何体面的 CA 都会撕开它收到的证书请求，以提取公钥并将其与它想要形成证书的任何信息相关联。它应该只插入以下信息片段：(a) 它已经能够通过其他方式验证（例如域验证，或大量纸质表格，......）和 (b) 它愿意担保（并且可能负责在一定程度上，取决于条款和条件）。

一些知名的 CA 有计划成为中间 CA。他们会向您颁发这样的 CA 证书。（希望这些计划很难注册……）

如果您正在部署自己的内部 CA 并需要中间 CA，则您颁发的中间 CA 证书应该将基本约束扩展[的`cA`布尔值设置为 true（请参阅 RFC 5280）](https://www.rfc-editor.org/rfc/rfc5280#section-4.2.1.9)。（这不是证书请求的问题，而是您颁发的证书。）

# vb.net - 自动将下载的文件放在下载扩展后缀的 bsed 文件夹中

> ID：10815398
> 
> 赞同：0
> 
> 时间：2012-05-30T11:29:16.620
> 
> 标签：vb.net, browser, file-extension

我正在为工作制作一个简单的网络浏览器，我想知道是否可以将特定扩展名的文件保存到特定文件中。

我目前在下载文件时使用谷歌浏览器，它将这个（不管扩展名）放在下载文件夹中，而不问我在哪里下载这个。

除了扩展名为 .dwg 的下载文件会自动放置在名为 DWG DOWNLOADS 的文件夹中之外，我也想实现同样的效果……</p>

如何在 vb.net 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:07:15.007

在任何浏览器中，您都有一个配置部分。

在 Firefox 中，您拥有`browser.download.useDownloadDir;true`并且`browser.download.folderList;1`

您可以添加自己的配置以允许不同的保存文件夹路径，并根据您上传的文件的扩展名动态修改它们。

在地址栏中使用 about:config 查看 Web 浏览器配置的完整列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:32:54.063

不确定您要问什么，但如果您实际上是在制作网络浏览器，只需检查您请求下载的文件的扩展名。如果扩展名为“.dwg”，则将文件保存到您想要的文件夹中。

如果您想将 Google Chrome 下载自动移动到不同的目录，您可以使用`FileSystemWatcher`来监控 Chrome 下载目录中的新文件，并根据每个文件的扩展名将它们移动到另一个文件夹。

# php - 使网页计数器在重定向中工作

> ID：10815401
> 
> 赞同：0
> 
> 时间：2012-05-30T11:29:32.603
> 
> 标签：php, jsp, counter

我正在编写一个将用户重定向到页面的 php 程序。（类似于链接缩短器）我想在不使用 mysql 等的情况下计算页面访问量，所以我选择使用像 hisstats 这样的页面计数器服务，但要使这些服务正常工作网页必须由用户打开，并且必须在用户浏览器中运行 jsp 或嵌入式 Flash。但是我的程序将用户重定向到另一个不属于我的页面，并且我的域上的页面不会被打开！有没有办法让这些计数器工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:35:57.683

*您通常*不能强制用户调用计数器 URL。特别是当您通过 http 重定向客户端时。您可以将命中保存在纯文件或任何其他数据库中。

您还应该知道，当您使用请等待重定向消息时，用户可能会使用广告拦截器阻止计数器。直接设置重定向。

# c++ - 在 C++ 中为 OS X 分发动态库

> ID：10815404
> 
> 赞同：1
> 
> 时间：2012-05-30T11:29:38.280
> 
> 标签：c++, xcode, opencv, shared-libraries

我编写了一个关键依赖于 OpenCV 的程序。我已经从最新的稳定版本编译了 OpenCV，现在想分发这个程序，以确保人们不需要自己编译 OpenCV。程序本身是使用 g++ 编译的。

我尝试了很多方法来解决这个问题：

1.  将 OpenCV 编译为静态库是可行的，但我无法将我的程序静态链接到这些库，因为 OS X 中的某些库无法静态链接；我在这里找到了这个信息：[Mac OS 上的混合静态和动态链接](https://stackoverflow.com/questions/4576235/mixed-static-and-dynamic-link-on-mac-os)

2.  我试图转移到 XCode，在那里我将它用作命令行项目。我将搜索路径和安装位置设置为@rpath，并添加了一个构建阶段以将文件复制到可执行文件。我用 otool 验证了编译文件是否具有正确的链接，但它在干净的机器（没有 OpenCV 库的机器）上仍然失败，并出现“找不到库 @rpath/libopencv ...”错误。（是的，所有的 Mac 都使用 Lion，所以 @rpath 应该可以工作）。在这里找到了这个答案：[Xcode 一直在错误的路径上搜索 dylib](https://stackoverflow.com/questions/4876740/xcode-keeps-searching-dylib-at-wrong-path)

我在编译文件和库上从 runnig otool -L 得到的结果是 `@rpath/libopencv_core.2.4.dylib (compatibility version 2.4.0, current version 2.4.0) /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0) /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)`

所以......我做错了什么？以及如何将这些库与我的程序一起分发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:32:56.937

您应该使用框架（[关于框架的 SO 问题](https://stackoverflow.com/questions/4618027/what-exactly-is-a-framework-in-mac-os-x-framework-folders)）。将应用程序使用的所有内容合并到一个文件夹中，然后链接到 XCode 项目中的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:59:06.953

我最近必须这样做才能在小程序中运行 JavaCV。此命令应该完成工作：

```
BADPATH=/opt/local/lib  # in the case of MacPorts, change as necessary
for f in libopencv*2.4.dylib; do install_name_tool $f -id @rpath/$f \
    -add_rpath /opt/local/lib/ -add_rpath /usr/local/lib/ -add_rpath @loader_path/. \
    -change $BADPATH/libopencv_core.2.4.dylib @rpath/libopencv_core.2.4.dylib \
    -change $BADPATH/libopencv_calib3d.2.4.dylib @rpath/libopencv_calib3d.2.4.dylib \
    -change $BADPATH/libopencv_features2d.2.4.dylib @rpath/libopencv_features2d.2.4.dylib \
    -change $BADPATH/libopencv_flann.2.4.dylib @rpath/libopencv_flann.2.4.dylib \
    -change $BADPATH/libopencv_gpu.2.4.dylib @rpath/libopencv_gpu.2.4.dylib \
    -change $BADPATH/libopencv_highgui.2.4.dylib @rpath/libopencv_highgui.2.4.dylib \
    -change $BADPATH/libopencv_imgproc.2.4.dylib @rpath/libopencv_imgproc.2.4.dylib \
    -change $BADPATH/libopencv_legacy.2.4.dylib @rpath/libopencv_legacy.2.4.dylib \
    -change $BADPATH/libopencv_ml.2.4.dylib @rpath/libopencv_ml.2.4.dylib \
    -change $BADPATH/libopencv_nonfree.2.4.dylib @rpath/libopencv_nonfree.2.4.dylib \
    -change $BADPATH/libopencv_objdetect.2.4.dylib @rpath/libopencv_objdetect.2.4.dylib \
    -change $BADPATH/libopencv_photo.2.4.dylib @rpath/libopencv_photo.2.4.dylib \
    -change $BADPATH/libopencv_video.2.4.dylib @rpath/libopencv_video.2.4.dylib; done 
```

并将您的软件与这些和所需的“-rpath”选项重新链接。

# facebook - 在 Facebook 上查询用户新闻提要的最快方法

> ID：10815410
> 
> 赞同：0
> 
> 时间：2012-05-30T11:30:05.313
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-fql

作为我正在做的应用程序的一部分，我们需要检索用户 facebook 新闻提要（最好是大约 150 个帖子）。

```
 var client = new FacebookClient(accessToken);
 result = client.Get(connection); 
```

以上大约需要 2 秒

但是，当我将查询增加到 150 个帖子时

```
 var client = new FacebookClient(accessToken);
  result = client.Get(connection, new { fields = "name,from,story,message,picture,comments", limit = count }); 
```

现在需要 6-8 秒。这不是嵌套查询，所以我认为 FQL 不会给我带来性能提升是否正确？这种响应时间是我所希望的最好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:51:11.630

进行多个查询可能会更好。您可以将每个请求异步触发到服务器并逐步加载数据。因此，第一次调用会在约 2 秒内加载帖子，然后在约 4 秒后您将从 Facebook 获得第二批数据。重复，直到您获得所需数量的帖子。

这将意味着用户可以更快地查看数据，而您的应用程序会处理较小的数据块。

注意编码循环并考虑失败。即，如果呼叫失败重试呼叫或优雅地失败。

# configuration - OSGi 声明式服务和配置管理

> ID：10815411
> 
> 赞同：4
> 
> 时间：2012-05-30T11:30:16.907
> 
> 标签：configuration, osgi, declarative-services

我正在编写与声明性服务使用捆绑在一起的内容。对于配置，我在 DS 声明中使用属性。这些道具通常可以由 Config Admin 更改，但它们不会持久化。容器重启后，组件具有默认值。

我正在使用这样的配置管理员：

```
Configuration c = configurationAdmin.getConfiguration(UserAgent.SERVICE_PID, null);
System.out.println(c.getProperties()); // every time is null!
Dictionary props = new Hashtable();
props.put(UserAgent.PROPERTY_PORT, 5555);
c.update(props); 
```

在组件中我有：

```
// ...

@Modified
public void updated(ComponentContext context) {
    config = context.getProperties();
    init();
}

@Activate
protected void activate(ComponentContext context) {
    config = context.getProperties();
    init();
}
//... 
```

我正在使用 Felix，属性文件存储在缓存中

```
service.bundleLocation="file:bundles/cz.b2m.osgi.phonus.core_1.0.0.SNAPSHOT.jar"
service.pid="cz.b2m.osgi.phonus.sip"
port=I"5555" 
```

但是重启后没有加载。我做错了什么？感谢所有提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:11:24.687

Problem was in Pax Runner which every restart (clean) erased the data folder of Config Admin bundle.

To make sure that Pax Runner does not clear the data, you can use the `--usePersistedState=true` flag.

# java - jsp web应用程序相对路径

> ID：10815414
> 
> 赞同：1
> 
> 时间：2012-05-30T11:30:21.117
> 
> 标签：java, eclipse, jakarta-ee, amazon-web-services, relative-path

我想通过 Eclipse 在 AWS Java Web 项目的 Java 类中打开一个文件。

我的文件在一个名为“res”的文件夹中

我试过这个

```
BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream("res\\txtFile.txt"), "UTF-8")); 
```

但不工作！

我有

> java.io.FileNotFoundException: res\txtFile.txt (系统找不到指定的路径)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:46:55.830

如果文件在 weapp 中，则需要 ServletContext.getResourceAsStream 或 Class.getResourceAsStream。如果它在文件系统的其他地方，您可能应该使用绝对路径。像您使用的相对路径是相对于您的应用服务器启动的目录解析的，可能不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:38:39.577

我解决了！！

使用此代码在任何地方获取项目的绝对路径

```
 String AbsolutePath = new File("").getAbsolutePath(); 
```

然后添加您需要的相对路径。

# android - 如何在具有共享首选项的图像按钮中显示图像？

> ID：10815416
> 
> 赞同：0
> 
> 时间：2012-05-30T11:30:30.680
> 
> 标签：android, image, sharedpreferences

在我的一项活动中，您可以单击图像按钮，然后会打开一个对话框，要求您打开图库。打开后，您可以单击图库中的这些图像之一。

我想要将单击的图像设置为图像按钮的图像。即使用户关闭应用程序，该图像也应该保留在那里（当他再次打开应用程序时，所选图像应该仍然存在）。

我选择使用共享偏好来完成所有这些工作，但无法让它发挥作用。单击图库中的图像时出现错误。有什么建议么？？

更新：我收到的错误是：不幸的是，进程 com.myname.android 已停止

这是我的代码，从 onActivityResult 开始：

```
private String selectedImagePath;
private String mFileName;

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == PICK_FROM_FILE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

            Log.v("IMAGE PATH====>>>> ",selectedImagePath);
        }
        storePath();
        retrievePath();
        convertPathToImage();
    }
}

private void storePath() {
    final SharedPreferences sPreference = getSharedPreferences(
            "pref_key", MODE_PRIVATE);
    final Editor spEditor = sPreference.edit();
    spEditor.putString("img_path", mFileName);
    spEditor.commit();
}

private void retrievePath() {
    final SharedPreferences sharedPreference = getSharedPreferences(
            "pref_key", MODE_PRIVATE);
    if (sharedPreference.contains("img_path")) {
        mFileName = sharedPreference.getString("img_path",
                null);
    }
}

private void convertPathToImage() {
    File imgFile = new  File(mFileName);
    if(imgFile.exists()){

        Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

        ImageButton myImage = (ImageButton) findViewById(R.id.image);
        myImage.setImageBitmap(myBitmap);

    }
} 
```

这是 LogCat：

```
05-30 15:27:14.567: D/dalvikvm(634): GC_CONCURRENT freed 1K, 3% free 11478K/11783K, paused 5ms+4ms
05-30 15:27:14.597: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:14.617: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:14.926: D/gralloc_goldfish(634): Emulator without GPU emulation detected.
05-30 15:27:26.767: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:26.877: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:30.616: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:30.626: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:32.086: W/IInputConnectionWrapper(634): showStatusIcon on inactive InputConnection
05-30 15:27:33.366: E/ActivityThread(634): Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@4155da80 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-30 15:27:33.366: E/ActivityThread(634): android.app.IntentReceiverLeaked: Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@4155da80 that was originally registered here. Are you missing a call to unregisterReceiver()?
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1043)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ContextImpl.registerReceiver(ContextImpl.java:1030)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ContextImpl.registerReceiver(ContextImpl.java:1024)
05-30 15:27:33.366: E/ActivityThread(634):  at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:341)
05-30 15:27:33.366: E/ActivityThread(634):  at com.android.internal.content.PackageMonitor.register(PackageMonitor.java:65)
05-30 15:27:33.366: E/ActivityThread(634):  at com.android.internal.app.ResolverActivity.onCreate(ResolverActivity.java:99)
05-30 15:27:33.366: E/ActivityThread(634):  at com.android.internal.app.ChooserActivity.onCreate(ChooserActivity.java:53)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.Activity.performCreate(Activity.java:4465)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-30 15:27:33.366: E/ActivityThread(634):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 15:27:33.366: E/ActivityThread(634):  at android.os.Looper.loop(Looper.java:137)
05-30 15:27:33.366: E/ActivityThread(634):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-30 15:27:33.366: E/ActivityThread(634):  at java.lang.reflect.Method.invokeNative(Native Method)
05-30 15:27:33.366: E/ActivityThread(634):  at java.lang.reflect.Method.invoke(Method.java:511)
05-30 15:27:33.366: E/ActivityThread(634):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-30 15:27:33.366: E/ActivityThread(634):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-30 15:27:33.366: E/ActivityThread(634):  at dalvik.system.NativeStart.main(Native Method)
05-30 15:27:35.987: V/IMAGE PATH====>>>>(634): /mnt/sdcard/Mercedes_SLS_AMG.jpg
05-30 15:27:36.176: D/AndroidRuntime(634): Shutting down VM
05-30 15:27:36.176: W/dalvikvm(634): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-30 15:27:36.206: E/AndroidRuntime(634): FATAL EXCEPTION: main
05-30 15:27:36.206: E/AndroidRuntime(634): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=Intent { dat=content://media/external/images/media/20 }} to activity {com.xyz.android.taskreminder/com.xyz.android.taskreminder.ReminderEditActivity}: java.lang.NullPointerException
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.ActivityThread.access$1100(ActivityThread.java:123)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.os.Looper.loop(Looper.java:137)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-30 15:27:36.206: E/AndroidRuntime(634):  at java.lang.reflect.Method.invokeNative(Native Method)
05-30 15:27:36.206: E/AndroidRuntime(634):  at java.lang.reflect.Method.invoke(Method.java:511)
05-30 15:27:36.206: E/AndroidRuntime(634):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-30 15:27:36.206: E/AndroidRuntime(634):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-30 15:27:36.206: E/AndroidRuntime(634):  at dalvik.system.NativeStart.main(Native Method)
05-30 15:27:36.206: E/AndroidRuntime(634): Caused by: java.lang.NullPointerException
05-30 15:27:36.206: E/AndroidRuntime(634):  at java.io.File.fixSlashes(File.java:185)
05-30 15:27:36.206: E/AndroidRuntime(634):  at java.io.File.<init>(File.java:134)
05-30 15:27:36.206: E/AndroidRuntime(634):  at com.xyz.android.taskreminder.ReminderEditActivity.convertPathToImage(ReminderEditActivity.java:249)
05-30 15:27:36.206: E/AndroidRuntime(634):  at com.xyz.android.taskreminder.ReminderEditActivity.onActivityResult(ReminderEditActivity.java:227)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.Activity.dispatchActivityResult(Activity.java:4649)
05-30 15:27:36.206: E/AndroidRuntime(634):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
05-30 15:27:36.206: E/AndroidRuntime(634):  ... 11 more
05-30 15:27:36.376: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:36.396: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:36.787: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:36.847: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:37.386: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:37.406: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:37.887: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:37.947: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:38.396: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:38.416: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:38.897: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:38.927: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:39.406: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:39.426: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:39.917: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:39.927: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:40.426: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:40.446: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:40.917: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:40.947: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:41.426: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:41.447: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:41.937: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:41.977: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:42.446: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:42.467: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:42.937: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:42.956: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:43.446: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:43.467: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:43.947: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:43.976: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:44.456: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:44.477: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:44.966: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:44.986: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt'
05-30 15:27:45.466: I/dalvikvm(634): threadid=3: reacting to signal 3
05-30 15:27:45.487: I/dalvikvm(634): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:03:05.843

```
Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@4155da80 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

这可能是Android中的一个错误。请参阅[http://code.google.com/p/android/issues/detail?id=29399](http://code.google.com/p/android/issues/detail?id=29399)。它不应该影响应用程序，但它仍然应该能够从图库中获取结果。

```
05-30 15:27:36.206: E/AndroidRuntime(634): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=Intent { dat=content://media/external/images/media/20 }} to activity {com.ndroidstudios.android.taskreminder/com.ndroidstudios.android.taskreminder.ReminderEditActivity}: java.lang.NullPointerException
...
05-30 15:27:36.206: E/AndroidRuntime(634): Caused by: java.lang.NullPointerException 
```

这就是问题。当您尝试使用它来创建新文件时，mFileName 为空。在retrievePath 中，当您尝试将“img_path”从您的偏好中拉出时，默认值为null，所以我猜它在那里被设置为null。签入调试器以确保 mFileName 已根据您的首选项设置为有效的字符串。

# c# - 使用后期绑定创建和填充 Excel 工作表

> ID：10815425
> 
> 赞同：2
> 
> 时间：2012-05-30T11:30:59.510
> 
> 标签：c#, excel, .net-4.0, interop, late-binding

我一直在查看 Microsoft 支持页面[Binding for Office automation servers with Visual C# .NET](http://support.microsoft.com/kb/302902)以尝试创建 Excel 工作表，用数据表中的值填充它，并将其保存到机器上。

我有一个使用早期绑定并简单地循环遍历项目的实现，但我不知道如何通过后期绑定实现这一点，我需要能够嵌入互操作类型以使应用程序版本独立于关于 MS Office。

如何使用后期绑定将数据表中的行添加到新的 Excel 工作表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:01:21.310

我建议编写一个界面并抽象数据填充步骤和 excel 步骤。这样你就可以有一个系统来实现与 excel 的早期绑定来做事，然后有一个引擎使用这个接口来填充 excel 工作表。第 2 步是使用后期绑定而不是早期绑定编写接口的第二个实现。然后，您只需在创建接口时将代码中的第一个实现替换为第二个实现。

在代码中，您只会创建 1 个对象，即接口本身。但是，在创建它时，您可以将其分配为实现该接口的任何其他类/实现......这是我自己的代码中的一个示例：

```
ISpreadsheetControl SSInterface;
if (conditionCheck())
    SSInterface = new ExcelImplementer();
else
    SSInterface = new OpenOfficeImplementer(); 
```

我只在放置数据或更改页面设置等时使用 1 个对象 SSInterface……无论我实现了什么……但它可以根据我在加载时分配给接口的类以两种不同的方式执行此操作时间。

至于“如何”的细节和细节......我发现您提供的链接中的第二个示例确实非常有帮助。这都是关于类型和调用的。困难在于在任何给定时间跟踪您正在使用的内容。这是使其更难使用的原因之一，也是首先提取早期绑定实现的一个很好的理由。这样，您可以在编写第二个时看到您需要的所有方法名称及其参数列表。

我还想补充一点：对您的问题的非常简单而简短的回答是“完全按照您已经做的方式去做”您只需更改“如何”调用填充数据的方法......以及所有其余的 excel 互操作实现以及它。

**更新**

我认为这可能会满足您的要求，尽管它足够混乱，我建议将其（实际上两种操作，一个可以调用另一个）放入它自己的单独方法中，某处。

```
//Get a range object that contains the cell.
Parameters = new Object[2];
Parameters[0] = iRow + 1;
Parameters[1] = iCol;
objRange_Late = objSheet_Late.GetType().InvokeMember( "Cells",
    BindingFlags.GetProperty, null, objSheet_Late, Parameters );

//Write value in cell
Parameters = new Object[1];
Parameters[0] = row[col.ColumnName];
objRange_Late.GetType().InvokeMember( "Value", BindingFlags.SetProperty, 
    null, objRange_Late, Parameters ); 
```

我不得不承认，我现在没有可以测试它的实现，但根据我所知道的，这应该可以工作。如果“单元格”不起作用，我也会使用与“范围”相同的代码......我实际上不知道那个是否接受数字输入。

[链接到单元格属性描述 (msdn)](http://msdn.microsoft.com/en-us/library/ff194567.aspx)

您可能还想稍微探索一下整个系统，它可以帮助您找到一些您可能正在寻找的东西。

**经过测试**托管成功创建和测试上述代码，它完美运行。

# django - 如何在管理站点的输入表单之前放置 一些文本？

> ID：10815427
> 
> 赞同：1
> 
> 时间：2012-05-30T11:31:06.320
> 
> 标签：django, django-forms, django-admin

如何在文本输入之前放置一些文本，例如用户 ID？我需要这样的东西

![小样](../Images/dd96e65e5f28b594da1ab70bc70a8c53.png)

代码是一个 DecimalField

我应该创建一个全新的小部件吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:51:10.433

您需要自定义`ModelAdmin`类和表单小部件，例如

```
from django import forms
from django.utils.safestring import mark_safe

class ModelAdminFoo(admin.ModelAdmin):
    def formfield_for_dbfield(self, db_field, **kwargs):
         request = kwargs['request']
         if db_field.name == 'code':
             # You could put following customized widget elsewhere
             class Widget(forms.TextInput):
                 def render(self, *args, **kwargs):
                     return mark_safe('%d - ' % request.user.pk) + super(Widget, self).render(*args, **kwargs)
             kwargs['widget']= Widget()
         return super(ModelAdminFoo, self).formfield_for_dbfield(db_field, **kwargs) 
```

# c# - 为什么这个 foreach 循环的 LINQ 版本会抛出 NotSupportedException（“NotSupportedException”）？

> ID：10815434
> 
> 赞同：1
> 
> 时间：2012-05-30T11:31:39.383
> 
> 标签：c#, linq-to-sql

我有一行抛出 System.NotSupportedException 的 LINQ 代码。

```
 return unconvertedUrls
                   .Select(potentialQueryURL => ConvertPotentialQueryURLToSeed(potentialQueryURL))
                   .Where(id => id > 0)
                   .ToList(); 
```

异常消息是“方法 'Int32 ConvertPotentialQueryURLToSeed(SeedsSQLConnector.PotentialQueryURL)' 没有支持的 SQL 转换”

然而，简单转换为 foreach 循环运行没有问题。

```
 var result = new List<int>();
        foreach (var potentialQueryURL in unconvertedUrls)
        {
            var id = ConvertPotentialQueryURLToSeed(potentialQueryURL);
            if (id > 0)
            {
                result.Add(id);
            }
        }
        return result; 
```

出了什么问题，为什么？

========== 编辑 ==========

奇怪的是，一位同事提出了另一个同样有效的修复方法。看起来 LINQ 正在将 ConvertPotentialQueryURLToSeed 传递给数据库！无论如何，这是另一个解决方法，即将 .ToList() 添加到前面的语句中：

```
 var unconvertedUrls = (from url in _DataContext.PotentialQueryURLs
                               where !convertedUrlIds.Contains(url.Id)
                               select url).ToList();
        return unconvertedUrls
                   .Select(potentialQueryURL => ConvertPotentialQueryURLToSeed(potentialQueryURL))
                   .Where(id => id > 0)
                   .ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:37:58.297

原因是 LINQ to SQL 不执行查询的代码，而是尝试将其转换为 SQL 语句。因为它不知道`ConvertPotentialQueryURLToSeed`此转换失败。

foreach 之所以有效，是因为在这种情况下，该方法`ConvertPotentialQueryURLToSeed`不会在被转换为 SQL 的 LINQ 查询部分中使用。

`ToList`具有相同原因的版本起作用：`ToList`从数据库中的查询中获取数据。从那时起，您正在处理普通的 C# 对象，也就是 LINQ to Objects。

# iphone - 如何制作圆形 UIPickerView (iPhone/iPad)？

> ID：10815435
> 
> 赞同：21
> 
> 时间：2012-05-30T11:31:40.720
> 
> 标签：iphone, ios, uipickerview

我已经对这个问题进行了很多研究，但是我仍然不清楚这是否可能。基本上我想做的是创建一个`UIPickerView`连续的，你可以永远旋转它并且你永远不会到达它的结尾（因为最后一个值后面跟着第一个值）。

我在网上浏览了一下，似乎有各种各样的黑客来达到预期的效果。然而，许多这些解决方案似乎增加了行数，`UIPickerView`以诱使用户认为它`UIPickerView`是连续的（然而，实际上，如果他们继续滚动，他们最终会到达终点）。

我所追求的是一种创建真正无限的 UIPickerView 的方法，因为如果你持续滚动几天、几周、几个月或几年，你将永远不会到达终点。如果解决方案是黑客攻击，我不会太介意，因为我知道 Apple 尚未提供实现该效果的方法。

请有人就这样做的方式提出建议（或至少指出我正确的方向）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T10:39:39.723

我真的认为，您可以使用本机 UIPickerView 进行的唯一破解如下所述：

[你如何让 UIPickerView 组件环绕？](https://stackoverflow.com/questions/214441/how-do-you-make-an-uipickerview-component-wrap-around)

另一种制作真正循环选择器的方法是自己实现它。

我看到了用 cocos2d 实现的选择器，它是基于 OpenGL 的。我认为，如果你真的需要，你可以尝试使用 UIKit 来实现。

或者干脆忘记它并使用具有可重复内容的 NSIntegerMax 行创建一个选择器。我认为没有人会旋转到最后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T09:56:53.643

[在这里](http://www.maddyhome.com/forums/viewtopic.php?f=12&t=32&start=0)`UIPickerView`找到运行良好且很容易实现 的自定义类

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-15T02:08:23.877

没有一个本地选择器可以包装（无论如何都不是iOS7.1。）你可以通过以下方式来伪造它：

```
NSArray *picks = @[ @"zero", @"one", @"two", @"three" ]; // 4 entries

// ...

- (NSInteger)pickerView:(UIPickerView *)pickerView 
numberOfRowsInComponent:(NSInteger)component
{
    return (3 * [picks count]); // we're very tricky, displaying only
                                // ...the SECOND set of entries, to
                                // ... give the impression of wrap-around
}

// ...

- (NSString *)pickerView:(UIPickerView *)pickerView 
             titleForRow:(NSInteger)row 
            forComponent:(NSInteger)component
{
    // All "3" sets of entries have the same values;
    // this is what gives the appearance of wrap-around.
    int titleRow = row % [picks count];
    return [picks objectAtIndex: titleRow];
}

// ...

- (void)pickerView:(UIPickerView *)pickerView 
      didSelectRow:(NSInteger)row 
       inComponent:(NSInteger)component
{
    // If the wheel turns to outside our 2nd-set range,
    // ...set it to the matching item in the 2nd set.
    // In this way, we always display what looks like a wrap-around.
    int count = [picks count];
    if ((row <  count)
    ||  (row > (count * 2) )
    {
        [pickerView selectRow: (row % count) inComponent: component animated: NO];
    }
} 
```

当然，您必须进行调整以适应您的需求，但这是它的基本要点。

祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T17:55:23.553

这是可能的。这是你如何做到的。首先设置一个定时器。让我们假设`int maxNumber`一个实例变量设置为某个任意值。

```
- ( void) viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
   [self.timer invalidate];
   self.timer = [NSTimer scheduledTimerWithTimeInterval:0.01 target:self    selector:@selector(timerFireMethod:) userInfo:nil repeats:YES];

}

- (void) viewWillDisappear:(BOOL)animated{
   [self.timer invalidate];
   [super viewWillDisappear:animated];
}

- (void)viewDidLoad
{
 [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
 [self.infinitePickerView selectRow:(int)maxNumber*5 inComponent:0 animated:YES];
} 
```

在计时器触发方法中，检查是否显示了 uipickerview 的任何“边缘”视图。

```
- (void)timerFireMethod:(NSTimer*)theTimer{
int rowSelected = [self.infinitePickerView selectedRowInComponent:0];    
for (int i=0; i<= 20; i++) {
    UIView * viewBelow = [self.infinitePickerView viewForRow:i forComponent:0];
    UIView * viewAbove = [self.infinitePickerView viewForRow:maxNumber*10-20+i forComponent:0];
    if(viewBelow!=nil || viewAbove!=nil){
        int middlePosition = maxNumber * 5 + (rowSelected % maxNumber);
        [self.infinitePickerView selectRow:middlePosition inComponent:0 animated:NO];
        break;
    }
}
} 
```

请注意，这是有效的，因为`[self.infinitePickerView viewForRow:i forComponent:0];`仅当 UIView 可见时才返回它。

当然你`UIPickerViewDelegate`必须使用类似

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
   return  maxNumber * 10; //returning a large number
}

 //You cannot use this method
/*
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row  forComponent:(NSInteger)component{}
 You have to use the method below in lieu of it
*/

 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view{

 UILabel * label;

 if (!view) {
    label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0,  self.infinitePickerView.bounds.size.width, 30)];
}else {
    label = (UILabel *) view;     
}
[label setText:[NSString stringWithFormat:@" %d", row % maxNumber]];
return label;
} 
```

希望这有效！：） 祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:51:04.570

嗯..我一直在环顾四周，有几个链接指向一些可能性，最突出的是这个：[滥用 Pickerview](http://www.timespace.org/2008/07/11/the-abusive-pickerview/)，基本思想是你用 3 组数据填充 pickerview 并开始中心集。每当用户滚动到顶部或底部集的中心时，您将行值设置回中心集的中心！这似乎比列出一个很长的清单更真实，这会产生无限的错觉。对于解决无限pickerview问题，此解决方案可能是最有效和最简单的！希望这有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T01:45:30.753

It seems to me that solutions requiring large amounts of data be stuffed into the pickerView are wasteful. The following solution uses smarts instead of memory.

The only rows that need to be populated are the rows visible in the view and the row immediately preceding the first one and the row immediately following the last one. When the user scrolls a component, pickerView:titleForRow:forComponent: is called for each row that scrolls by.

So the solution is to update the data in pickerView:titleForRow:forComponent: and then call the appropriate method to reload the data so that it is there when the pickerview scrolls one more tick.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-27T21:34:00.560

一个非常简单的解决方案，它会让你认为选择器视图没有尽头，通过扩大数组并使模数从数组中选择对应的项目

```
override func viewDidLoad(){
    super.viewDidLoad()
    self.yourArray.selectRow((yourArray.count*100)/2, inComponent: 0, animated: false)
}

func pickerView(_ pickerView: UIPickerView, numberOfRowaInComponent component: Int) -> Int{
    return yourArray.count*100
}

func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int)->String{
    return yourArray[row % yourArray.count]
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-14T06:31:46.467

我制作了一个基于`UIScrollView`. 并且基于这个tableView，我重新实现了`UIPickerView`. 你可能对此感兴趣。而且这个picker view拥有所有的特性`UIPickerView`，而且还提供了很多新的特性，自定义这个picker view就容易多了。

[https://github.com/danleechina/DLPickerView](https://github.com/danleechina/DLPickerView)

请注意，这个 DLPickerView 循环滚动实际上是循环滚动。所有的魔法都是因为另一个班级而发生的`DLTableView`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-06T12:55:49.360

我使用 pickerView Selection 创建了一个圆形：

```
 import UIKit
   class ViewController:        
 UIViewController,UIPickerViewDelegate,UIPickerViewDataSource
{
@IBOutlet weak var picker: UIPickerView!
@IBOutlet weak var myLabel: UILabel!

let numbers = [0,1,2,3,4,5,6,7,8,9]

override func viewDidLoad()
{
    super.viewDidLoad()
    // A.Select Second Row
    picker.selectRow(1, inComponent: 0, animated: false)
}
func numberOfComponents(in pickerView: UIPickerView) -> Int
{
    return 1
}
func pickerView(_ pickerView: UIPickerView, numberOfRowsInComponent component: Int) -> Int
{
     //B. Add 2 rows to your array count  
    return numbers.count + 2
}
func pickerView(_ pickerView: UIPickerView, titleForRow row: Int, forComponent component: Int) -> String?
{
    var rowTitle = ""
    switch row
    {
    case 0:
        // C. Set first row title to last component of the array.
         // This row is not visible to the user as it is hidden by the        

         //selection in ViewDidLoad
        rowTitle = "\(numbers.last!)"
    case numbers.count + 1:
        //D. Set last row title to first array component
        rowTitle = "\(numbers.first!)"
    default:
        // E. Remember [row - 1] to avoid errors
        rowTitle = "\(numbers[row - 1])"
    }
    return rowTitle
}
func pickerView(_ pickerView: UIPickerView, didSelectRow row: Int, inComponent component: Int)
{
    var theText = ""
    switch row
    {
    case 0:
      //F. Select Row at array count to load the last row
        pickerView.selectRow(numbers.count , inComponent: 0, animated: false)
        theText = = "\(numbers.last!)"
    case numbers.count + 1:
     //G. This Selection will set the picker to initial state
        pickerView.selectRow(1, inComponent: 0, animated: false)
        theText = "\(numbers.first!)"
    default:
        theText = "\(numbers[row - 1])"
    }
    myLabel.text = theText

}

  } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-02T15:42:40.613

我知道这是一个老问题，但我只是在我自己的项目中实现它时才发现它。

只需使用 Morion 的方法处理具有重复内容的大量项目，然后每次停止滚动时，重置行。任何人都知道你作弊的唯一方法是，如果他们连续滚动而不中断，直到它停止，从不调用 didSelectRow 函数。这需要一些奉献精神！

不管你怎么做，在我看来它会感觉有点hacky，这一定是最简单的hack......

# mysql - MySQL存储过程不会获取整个表

> ID：10815437
> 
> 赞同：3
> 
> 时间：2012-05-30T11:31:47.630
> 
> 标签：mysql, stored-procedures, phpmyadmin

首先我尝试了这个，（MySQL/phpmyadmin）

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `tempcheck`() NO SQL 

BEGIN 
SET @query_string = 'SELECT * FROM properties'; 
PREPARE query_statement FROM @query_string; 
EXECUTE query_statement; 
DEALLOCATE PREPARE query_statement; 

END 
```

这只是获取表“属性”的第一条记录。该表具有多个值。当我 sqlquery 'select * from properties;' 它返回整个表。

我什至试过这个简单的方法

```
BEGIN

SELECT * FROM properties';

END 
```

尝试了许多stackoverflow问答。他们都建议我做一个临时表。即使我这样做了，当它首先不返回整个表时，它将如何返回整个表。一个 mysql 存储过程实际上是否可以返回整个表。如果可以，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:11:59.807

伙计们感谢大家的帮助。我的一位同事帮我解决了这个问题。显然这是 phpmyadmin 中的一个错误。phpmyadmin 不会返回超过一条记录

# c# - 在 C# 中反序列化不同类型对象的多个 JSON 数组

> ID：10815439
> 
> 赞同：1
> 
> 时间：2012-05-30T11:31:55.270
> 
> 标签：c#, java, asp.net, json, arrays

我有一个 JSON 字符串，其中包含固定数量的不同对象数组（在 Java 中使用`JSONObjects`and创建`JSONArrays`）：

```
[
  [ //The first type of object
    {
      "Initials":"MUS"
    },
    {
      "Initials":"NA"
    }
  ],
  [ //The second type
    {
      "ToolId":17
    },
    {
      ...
    }
  ]
  ... //etc.
] 
```

所以我创建了一些虚拟类，它们具有与数组中的对象对应的属性，它们有效：

```
private class DummyEmployee
{
    public string Initials { get; set; }
}
//etc. 
```

但我无法弄清楚容器类应该如何设计。我是这样做的：

```
private class DataContainer
{
    public List<DummyEmployee> Employees { get; set; }
    public List<DummySecondType> SecondTypes { get; set; }
    //etc.
} 
```

这就是我尝试反序列化 JSON 数据的方式：

```
JavaScriptSerializer ser = new JavaScriptSerializer();

string jsonDataFromClient = ...;

DataContainer jsonData = ser.Deserialize<DataContainer>(jsonDataFromClient); 
```

它不起作用。传递数据时出现以下错误： `Type 'GUI.ValidateLoginData+DataContainer' is not supported for deserialization of an array.`

关于反序列化不同对象数组的问题，我找不到任何其他主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:40:49.467

是的，我不会
注意到在您的 javascript 对象中基本上是一个数组，并且因为 javascript 是一种动态语言，所以它是一个有效的数组
，因为 c# 不是，所以数组（或列表）必须包含相同类型的对象。但是，如果您仍然需要实现这一点并且您可以控制您的 JSON 结构，请将其编辑为此

```
{
  Employees:[ //The first type of object
    {
      "Initials":"MUS"
    },
    {
      "Initials":"NA"
    }
  ],
  SecondTypes:[ //The second type
    {
      "ToolId":17
    },
    {
      ...
    }
  ]
  ... //etc.
} 
```

并且您当前的 c# 对象可能会正确映射。

如果您无法控制 JSON 结构，那么您必须在 c#
**UPDATE 中使用动态对象：-**对于您无法控制 JSON 结构（或者您不想编辑它）的情况。
尝试将您的 JSON 对象反序列化为动态类型的数组
**UPDATE 2:-**因为您很好奇尝试将现有的 JSON 结构反序列化为类型的对象，`List<List<dynamic>>`虽然我没有尝试过，但它应该可以正常工作。
但是，此解决方案的一个缺点是您将无法区分两种不同类型的对象，`Employee`即`SecondTypes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:36:42.197

使用此在线工具为您创建 C# 类。然后，您可以根据需要微调类（名称等）。至少，您可以了解您正在创建的模型类是否正确。

[JSON 到 C#](http://json2csharp.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:38:00.827

您是否将 [Serializable] 属性添加到您的 DataContainer？

# php - $_POST 中的“wGeT”关键字

> ID：10815449
> 
> 赞同：0
> 
> 时间：2012-05-30T11:32:32.677
> 
> 标签：php, http, browser

我正在开发一个小型应用程序，管理员可以在其中在后端插入批量折扣券代码。在前端，网站访问者可以一一获取这些代码。为了在后端插入优惠券代码，我为管理员提供了一个 Textarea，他可以在其中一次插入所有优惠券代码。一切正常，直到我得到一个独特的优惠券代码**"XXXXXX-XXX-XXX-wGeT"**。

我有一个简单的 HTML 表单，使用 POST 方法提交。提交此优惠券代码后，浏览器会在响应中向我发送“501-方法未实现”错误。问题在于代码中的“wGet”关键字。我知道 wget 是一个 linux 命令，但在这里我将它作为 POST 中的文本发送。服务器只是向我发送 501 错误。我用谷歌搜索了很多，但没有任何运气。在提交表单之前，如何转义这个“wGeT”关键字？

编辑：

```
<?php
if($_REQUEST){
    echo '<pre>';
    print_r($_REQUEST);
    echo '</pre>';
}
?>
<html>
    <head>
        <title>Wget Demo</title>
    </head>
    <body>
        <form name="frmCodes" method="POST">
            <textarea name="voucher_codes"></textarea>
            <input type="submit" name="btnSubmit"/>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T11:51:51.517

我认为马里奥的评论是对的，它可能是mod_security。

默认行为将扫描 POST 数据（请参阅 /etc/httpd/conf/modsecurity.conf ）

```
SecFilterScanPOST On 
```

wget 被阻止

```
# WEB-ATTACKS wget command attempt
SecFilter "wget\x20" 
```

通过在此 SecFilter 前面加上 # 注释掉它（或将 SecFilterScanPOST 设置为 Off）并重新启动 apache 以查看它是否解决了它。

或使用相应目录中的[.htaccess文件，其中包含：](http://en.wikipedia.org/wiki/Htaccess)

```
<IfModule mod_security.c>
# Turn the filtering engine On or Off or DynamicOnly for cgi/php/etc
SecFilterEngine On

# Should mod_security inspect POST payloads
SecFilterScanPOST Off

# this rule allows wget but logs it so you can verify it if necessary
SecFilter "wget\x20" "log,pass"
</ifModule> 
```

我把这两个选项都放进去了，这样你就可以稍微玩一下[了](http://www.modsecurity.org/documentation/modsecurity-apache/1.9.3/html-multipage/index.html)

[轻微编辑：向.htaccess](http://en.wikipedia.org/wiki/Htaccess)添加了一个 wget 允许但记录规则，这将允许您将 SecFilterScanPOST 设置为 On

# parallel-processing - 带 ksp 导轨的 PETSc 求解线性系统

> ID：10815450
> 
> 赞同：6
> 
> 时间：2012-05-30T11:32:33.367
> 
> 标签：parallel-processing, mpi, linear-equation, petsc

我开始使用 PETSc 库来并行求解线性方程组。我已经安装了所有软件包，构建并成功运行了 petsc/src/ksp/ksp/examples/tutorials/ 文件夹中的示例，例如 ex.c

但是我不明白如何通过从文件中读取它们来填充矩阵 A、X 和 B。

这里我提供 ex2.c 文件中的代码：

```
/* Program usage:  mpiexec -n <procs> ex2 [-help] [all PETSc options] */ 

static char help[] = "Solves a linear system in parallel with KSP.\n\
Input parameters include:\n\
  -random_exact_sol : use a random exact solution vector\n\
  -view_exact_sol   : write exact solution vector to stdout\n\
  -m <mesh_x>       : number of mesh points in x-direction\n\
  -n <mesh_n>       : number of mesh points in y-direction\n\n";

/*T
   Concepts: KSP^basic parallel example;
   Concepts: KSP^Laplacian, 2d
   Concepts: Laplacian, 2d
   Processors: n
T*/

/* 
  Include "petscksp.h" so that we can use KSP solvers.  Note that this file
  automatically includes:
     petscsys.h       - base PETSc routines   petscvec.h - vectors
     petscmat.h - matrices
     petscis.h     - index sets            petscksp.h - Krylov subspace methods
     petscviewer.h - viewers               petscpc.h  - preconditioners
*/
#include <C:\PETSC\include\petscksp.h>

#undef __FUNCT__
#define __FUNCT__ "main"
int main(int argc,char **args)
{
  Vec            x,b,u;  /* approx solution, RHS, exact solution */
  Mat            A;        /* linear system matrix */
  KSP            ksp;     /* linear solver context */
  PetscRandom    rctx;     /* random number generator context */
  PetscReal      norm;     /* norm of solution error */
  PetscInt       i,j,Ii,J,Istart,Iend,m = 8,n = 7,its;
  PetscErrorCode ierr;
  PetscBool      flg = PETSC_FALSE;
  PetscScalar    v;
#if defined(PETSC_USE_LOG)
  PetscLogStage  stage;
#endif

  PetscInitialize(&argc,&args,(char *)0,help);
  ierr = PetscOptionsGetInt(PETSC_NULL,"-m",&m,PETSC_NULL);CHKERRQ(ierr);
  ierr = PetscOptionsGetInt(PETSC_NULL,"-n",&n,PETSC_NULL);CHKERRQ(ierr);
  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
         Compute the matrix and right-hand-side vector that define
         the linear system, Ax = b.
     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
  /* 
     Create parallel matrix, specifying only its global dimensions.
     When using MatCreate(), the matrix format can be specified at
     runtime. Also, the parallel partitioning of the matrix is
     determined by PETSc at runtime.

     Performance tuning note:  For problems of substantial size,
     preallocation of matrix memory is crucial for attaining good 
     performance. See the matrix chapter of the users manual for details.
  */
  ierr = MatCreate(PETSC_COMM_WORLD,&A);CHKERRQ(ierr);
  ierr = MatSetSizes(A,PETSC_DECIDE,PETSC_DECIDE,m*n,m*n);CHKERRQ(ierr);
  ierr = MatSetFromOptions(A);CHKERRQ(ierr);
  ierr = MatMPIAIJSetPreallocation(A,5,PETSC_NULL,5,PETSC_NULL);CHKERRQ(ierr);
  ierr = MatSeqAIJSetPreallocation(A,5,PETSC_NULL);CHKERRQ(ierr);

  /* 
     Currently, all PETSc parallel matrix formats are partitioned by
     contiguous chunks of rows across the processors.  Determine which
     rows of the matrix are locally owned. 
  */
  ierr = MatGetOwnershipRange(A,&Istart,&Iend);CHKERRQ(ierr);

  /* 
     Set matrix elements for the 2-D, five-point stencil in parallel.
      - Each processor needs to insert only elements that it owns
        locally (but any non-local elements will be sent to the
        appropriate processor during matrix assembly). 
      - Always specify global rows and columns of matrix entries.

     Note: this uses the less common natural ordering that orders first
     all the unknowns for x = h then for x = 2h etc; Hence you see J = Ii +- n
     instead of J = I +- m as you might expect. The more standard ordering
     would first do all variables for y = h, then y = 2h etc.

   */
  ierr = PetscLogStageRegister("Assembly", &stage);CHKERRQ(ierr);
  ierr = PetscLogStagePush(stage);CHKERRQ(ierr);
  for (Ii=Istart; Ii<Iend; Ii++) { 
    v = -1.0; i = Ii/n; j = Ii - i*n;  
    if (i>0)   {J = Ii - n; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);}
    if (i<m-1) {J = Ii + n; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);}
    if (j>0)   {J = Ii - 1; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);}
    if (j<n-1) {J = Ii + 1; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);}
    v = 4.0; ierr = MatSetValues(A,1,&Ii,1,&Ii,&v,INSERT_VALUES);CHKERRQ(ierr);
  }

  /* 
     Assemble matrix, using the 2-step process:
       MatAssemblyBegin(), MatAssemblyEnd()
     Computations can be done while messages are in transition
     by placing code between these two statements.
  */
  ierr = MatAssemblyBegin(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);
  ierr = MatAssemblyEnd(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);
  ierr = PetscLogStagePop();CHKERRQ(ierr);

  /* A is symmetric. Set symmetric flag to enable ICC/Cholesky preconditioner */
  ierr = MatSetOption(A,MAT_SYMMETRIC,PETSC_TRUE);CHKERRQ(ierr);

  /* 
     Create parallel vectors.
      - We form 1 vector from scratch and then duplicate as needed.
      - When using VecCreate(), VecSetSizes and VecSetFromOptions()
        in this example, we specify only the
        vector's global dimension; the parallel partitioning is determined
        at runtime. 
      - When solving a linear system, the vectors and matrices MUST
        be partitioned accordingly.  PETSc automatically generates
        appropriately partitioned matrices and vectors when MatCreate()
        and VecCreate() are used with the same communicator.  
      - The user can alternatively specify the local vector and matrix
        dimensions when more sophisticated partitioning is needed
        (replacing the PETSC_DECIDE argument in the VecSetSizes() statement
        below).
  */
  ierr = VecCreate(PETSC_COMM_WORLD,&u);CHKERRQ(ierr);
  ierr = VecSetSizes(u,PETSC_DECIDE,m*n);CHKERRQ(ierr);
  ierr = VecSetFromOptions(u);CHKERRQ(ierr);
  ierr = VecDuplicate(u,&b);CHKERRQ(ierr); 
  ierr = VecDuplicate(b,&x);CHKERRQ(ierr);

  /* 
     Set exact solution; then compute right-hand-side vector.
     By default we use an exact solution of a vector with all
     elements of 1.0;  Alternatively, using the runtime option
     -random_sol forms a solution vector with random components.
  */
  ierr = PetscOptionsGetBool(PETSC_NULL,"-random_exact_sol",&flg,PETSC_NULL);CHKERRQ(ierr);
  if (flg) {
    ierr = PetscRandomCreate(PETSC_COMM_WORLD,&rctx);CHKERRQ(ierr);
    ierr = PetscRandomSetFromOptions(rctx);CHKERRQ(ierr);
    ierr = VecSetRandom(u,rctx);CHKERRQ(ierr);
    ierr = PetscRandomDestroy(&rctx);CHKERRQ(ierr);
  } else {
    ierr = VecSet(u,1.0);CHKERRQ(ierr);
  }
  ierr = MatMult(A,u,b);CHKERRQ(ierr);

  /*
     View the exact solution vector if desired
  */
  flg  = PETSC_FALSE;
  ierr = PetscOptionsGetBool(PETSC_NULL,"-view_exact_sol",&flg,PETSC_NULL);CHKERRQ(ierr);
  if (flg) {ierr = VecView(u,PETSC_VIEWER_STDOUT_WORLD);CHKERRQ(ierr);}

  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
                Create the linear solver and set various options
     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */

  /* 
     Create linear solver context
  */
  ierr = KSPCreate(PETSC_COMM_WORLD,&ksp);CHKERRQ(ierr);

  /* 
     Set operators. Here the matrix that defines the linear system
     also serves as the preconditioning matrix.
  */
  ierr = KSPSetOperators(ksp,A,A,DIFFERENT_NONZERO_PATTERN);CHKERRQ(ierr);

  /* 
     Set linear solver defaults for this problem (optional).
     - By extracting the KSP and PC contexts from the KSP context,
       we can then directly call any KSP and PC routines to set
       various options.
     - The following two statements are optional; all of these
       parameters could alternatively be specified at runtime via
       KSPSetFromOptions().  All of these defaults can be
       overridden at runtime, as indicated below.
  */
  ierr = KSPSetTolerances(ksp,1.e-2/((m+1)*(n+1)),1.e-50,PETSC_DEFAULT,
                          PETSC_DEFAULT);CHKERRQ(ierr);

  /* 
    Set runtime options, e.g.,
        -ksp_type <type> -pc_type <type> -ksp_monitor -ksp_rtol <rtol>
    These options will override those specified above as long as
    KSPSetFromOptions() is called _after_ any other customization
    routines.
  */
  ierr = KSPSetFromOptions(ksp);CHKERRQ(ierr);

  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
                      Solve the linear system
     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */

  ierr = KSPSolve(ksp,b,x);CHKERRQ(ierr);

  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
                      Check solution and clean up
     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */

  /* 
     Check the error
  */
  ierr = VecAXPY(x,-1.0,u);CHKERRQ(ierr);
  ierr = VecNorm(x,NORM_2,&norm);CHKERRQ(ierr);
  ierr = KSPGetIterationNumber(ksp,&its);CHKERRQ(ierr);
  /* Scale the norm */
  /*  norm *= sqrt(1.0/((m+1)*(n+1))); */

  /*
     Print convergence information.  PetscPrintf() produces a single 
     print statement from all processes that share a communicator.
     An alternative is PetscFPrintf(), which prints to a file.
  */
  ierr = PetscPrintf(PETSC_COMM_WORLD,"Norm of error %A iterations %D\n",
                     norm,its);CHKERRQ(ierr);

  /*
     Free work space.  All PETSc objects should be destroyed when they
     are no longer needed.
  */
  ierr = KSPDestroy(&ksp);CHKERRQ(ierr);
  ierr = VecDestroy(&u);CHKERRQ(ierr);  ierr = VecDestroy(&x);CHKERRQ(ierr);
  ierr = VecDestroy(&b);CHKERRQ(ierr);  ierr = MatDestroy(&A);CHKERRQ(ierr);

  /*
     Always call PetscFinalize() before exiting a program.  This routine
       - finalizes the PETSc libraries as well as MPI
       - provides summary and diagnostic information if certain runtime
         options are chosen (e.g., -log_summary). 
  */
  ierr = PetscFinalize();
  return 0;
} 
```

有人知道如何在示例中填充自己的矩阵吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T16:57:51.157

是的，当你开始时，这可能有点令人生畏。[从 2006 年开始，此](http://acts.nersc.gov/events/Workshop2006/slides/Knepley.pdf) [ACTS](http://acts.nersc.gov/)教程中有一个很好的流程演练；PetSC 网页上[列出](http://www.mcs.anl.gov/petsc/documentation/tutorials/index.html)的教程通常都很好。

这其中的关键部分是：

```
 ierr = MatCreate(PETSC_COMM_WORLD,&A);CHKERRQ(ierr); 
```

实际创建 PetSC 矩阵对象`Mat A`；

```
 ierr = MatSetSizes(A,PETSC_DECIDE,PETSC_DECIDE,m*n,m*n);CHKERRQ(ierr); 
```

设置尺寸；在这里，矩阵是，因为它是在2d 网格`m*n x m*n`上操作的模板`m x n`

```
 ierr = MatSetFromOptions(A);CHKERRQ(ierr); 
```

如果您想控制 A 的设置方式，这只需要您在运行时提供的任何 PetSC 命令行选项并将它们应用于矩阵；否则，您可以将[`MatCreateMPIAIJ()`](http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatCreateMPIAIJ.html) 其创建为 AIJ 格式矩阵（默认值），如果它是密集矩阵，则可以使用[MatCreateMPIDense() 。](http://www.mcs.anl.gov/petsc/petsc-current/docs/manualpages/Mat/MatCreateMPIDense.html)

```
 ierr = MatMPIAIJSetPreallocation(A,5,PETSC_NULL,5,PETSC_NULL);CHKERRQ(ierr);
  ierr = MatSeqAIJSetPreallocation(A,5,PETSC_NULL);CHKERRQ(ierr); 
```

现在我们已经得到了一个 AIJ 矩阵，这些调用只是预先分配了稀疏矩阵，假设每行有 5 个非零。这是为了性能。请注意，必须调用 MPI 和 Seq 函数以确保它适用于 1 个处理器和多个处理器；这似乎总是很奇怪，但是你去吧。

好的，既然矩阵已经全部设置好了，我们就从这里开始深入探讨问题的实质。

首先，我们找出这个特定进程拥有哪些行。分布是按行的，这对于典型的稀疏矩阵来说是一个很好的分布。

```
 ierr = MatGetOwnershipRange(A,&Istart,&Iend);CHKERRQ(ierr); 
```

所以在这个调用之后，每个处理器都有自己的 Istart 和 Iend 版本，并且它的这个处理器的工作是更新从 Istart 开始到 Iend 之前结束的行*，*正如你在这个 for 循环中看到的那样：

```
 for (Ii=Istart; Ii<Iend; Ii++) { 
    v = -1.0; i = Ii/n; j = Ii - i*n; 
```

好的，所以如果我们在 row 上操作`Ii`，这对应于网格位置`(i,j)`where`i = Ii/n`和`j = Ii % n`。例如，网格位置`(i,j)`对应于 row `Ii = i*n + j`。说得通？

我将在这里去掉 if 语句，因为它们很重要，但它们只是处理边界值，它们使事情变得更加复杂。

在这一行中，对角线上有一个 +4，对应于`(i-1,j)`、`(i+1,j)`、`(i,j-1)`和的列有 -1 `(i,j+1)`。假设我们还没有为这些（例如，`1 < i < m-1`和`1 < j < n-1`）离开网格的末端，这意味着

```
 J = Ii - n; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);
    J = Ii + n; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);
    J = Ii - 1; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);
    J = Ii + 1; ierr = MatSetValues(A,1,&Ii,1,&J,&v,INSERT_VALUES);CHKERRQ(ierr);

    v = 4.0; ierr = MatSetValues(A,1,&Ii,1,&Ii,&v,INSERT_VALUES);CHKERRQ(ierr);
  } 
```

我取出的 if 语句只是避免设置这些值，如果它们不存在，并且`CHKERRQ`宏只是打印出一个有用的错误 if `ierr != 0`，例如 set values 调用失败（因为我们试图设置一个无效值）。

现在我们已经设置了本地值；`MatAssembly`调用开始通信以确保在处理器之间交换任何必要的值。如果你有任何不相关的工作要做，它可能会卡在 Begin 和 End 之间以尝试重叠通信和计算：

```
 ierr = MatAssemblyBegin(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr);
  ierr = MatAssemblyEnd(A,MAT_FINAL_ASSEMBLY);CHKERRQ(ierr); 
```

现在你已经完成了，可以调用你的求解器了。

所以一个典型的工作流程是：

*   创建矩阵 ( `MatCreate`)
*   设置其大小 ( `MatSetSizes`)
*   设置各种矩阵选项（`MatSetFromOptions`是一个不错的选择，而不是硬编码的东西）
*   对于稀疏矩阵，将预分配设置为对每行非零数的合理猜测；您可以使用单个值（如此处）或使用表示每行非零数的数组（此处用 填充`PETSC_NULL`）来执行此操作： ( `MatMPIAIJSetPreallocation`, `MatSeqAIJSetPreallocation`)
*   找出哪些行是您的责任： ( `MatGetOwnershipRange`)
*   设置值（每个值调用`MatSetValues`一次，或传入一大块值；`INSERT_VALUES`设置新元素，`ADD_VALUES`增加任何现有元素）
*   然后进行组装 ( `MatAssemblyBegin`, `MatAssemblyEnd`)。

其他更复杂的用例也是可能的。

# gcc - 使用较旧的 libc 编译（未找到版本“GLIBC_2.14”）

> ID：10815453
> 
> 赞同：40
> 
> 时间：2012-05-30T11:32:46.350
> 
> 标签：gcc, linker, shared-libraries

我必须在当前的 ubuntu (12.04) 上编译一个程序。然后，该程序应在使用 CentOS 和旧内核 (2.6.18) 的集群上运行。不幸的是，我无法直接在集群上编译。如果我只是编译和复制程序而不做任何更改，我会收到错误消息“内核太旧”。

按照我的理解，其原因与其说是内核版本，不如说是用于编译的libc版本。因此，我尝试编译我的程序，动态链接集群中的 libc 并静态链接其他所有内容。

**研究**

SO上已经有很多关于这个的问题，但没有一个答案真的对我有用。所以这是我对该主题的研究：

*   [这个问题](https://stackoverflow.com/questions/6941332/anticipate-kernel-too-old-errors-between-2-6-16-and-2-6-26-kernel-versions)解释了 Kernel too old 消息的原因
*   [这个问题](https://stackoverflow.com/questions/10170651/how-do-i-compile-code-for-a-setup-with-older-linux-kernel)类似但更专业，没有答案
*   [此处](https://stackoverflow.com/questions/8127589/run-a-c-executable-in-another-distro)提出的静态链接不起作用，因为集群上的 libc 太旧了。一个答案还提到使用旧的 libc 进行构建，但没有解释如何做到这一点。
*   [一种方法](https://stackoverflow.com/questions/2079717/how-do-i-build-an-app-for-an-old-linux-distribution-and-avoid-the-fatal-kernel)是在运行旧操作系统的 VM 中编译。这有效但很复杂。我还读到[你不应该静态链接 libc](http://gcc.gnu.org/ml/gcc/2009-07/msg00299.html)
*   [显然](https://stackoverflow.com/questions/2728552/link-to-a-different-libc-file)可以[使用](https://stackoverflow.com/questions/4099013/link-to-provided-glibc)该选项编译不同的 libc 版本，`-rpath`但这对我不起作用（见下文）

**当前状态**

我将以下文件从集群复制到目录中`/path/to/copied/libs`

*   libc-2.5.so
*   libgcc_s.so.1
*   libstdc++.so.6

并正在使用选项进行编译`-nodefaultlibs -Xlinker -rpath=/path/to/copied/libs -Wl,-Bstatic,-lrt,-lboost_system,-lboost_filesystem -Wl,-Bdynamic,-lc,-lstdc++,-lgcc_s`

ldd 在编译后的二进制文件上的输出是

```
mybin: /path/to/copied/libs/libc.so.6: version `GLIBC_2.14' not found (required by mybin)
mybin: /path/to/copied/libs/libstdc++.so.6: version `GLIBCXX_3.4.15' not found (required by mybin)
linux-vdso.so.1 =>  (0x00007ffff36bb000)
libc.so.6 => /path/to/copied/libs/libc.so.6 (0x00007fbe3789a000)
libstdc++.so.6 => /path/to/copied/libs/libstdc++.so.6 (0x00007fbe37599000)
libgcc_s.so.1 => /path/to/copied/libs/libgcc_s.so.1 (0x00007fbe3738b000)
/lib64/ld-linux-x86-64.so.2 (0x00007fbe37bf3000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fbe37071000) 
```

我对这个错误有些困惑，因为它使用了正确的路径（即来自集群的 libc），但仍然抱怨缺少 glibc 版本。在集群上运行 ldd 时，它返回`not a dynamic executable`并运行二进制文件会导致上述两个相同的错误。看起来还包括其他库（linux-vdso.so.1、ld-linux-x86-64.so.2 和 libm.so.6）。我也应该使用旧版本吗？

所以现在我有两个主要问题：

*   这甚至是正确的方法吗？
*   如果是：如何正确链接旧的 libc？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T06:21:00.670

看到[这个](https://stackoverflow.com/a/8658468/50617)答案。

> 这甚至是正确的方法吗

不：您不能像链接命令那样使用*不匹配*的 glibc 版本。您使用`crt0.o`和`ld-linux.so`来自*新*的（系统安装的）libc，但`libc.so.6`来自旧的（从集群复制）libc。那是行不通的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:17:30.693

`-rpath`设置 DT_RPATH 标记但不告诉链接器在那里寻找库，你想要`-L`的。

# asp.net-mvc - RequireJS 如何处理多个页面和部分视图？

> ID：10815454
> 
> 赞同：41
> 
> 时间：2012-05-30T11:32:51.573
> 
> 标签：asp.net-mvc, requirejs

我正在研究**RequireJS**，但我不确定某些事情。

我了解如何使用`main.js`. 但是我是否需要添加任何逻辑来处理这些依赖项`main.js`？

对我来说，`main.js`这似乎是一个 document.ready 状态，当文档加载时你在那里输入逻辑，对吧？

对于其他页面和部分视图，我是否需要创建多个`main.js`，或者我可以只引用来自视图的依赖项中的加载函数`<script>`吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-30T13:10:02.873

**更新**- 我添加了一个将 RequireJS 与模块化 HTML 组件一起使用的示例。包含构建工具示例 - [https://github.com/simonsmith/modular-html-requirejs](https://github.com/simonsmith/modular-html-requirejs)

我还写了一篇关于此的博客文章 - [http://simonsmith.io/modular-html-components-with-requirejs/](http://simonsmith.io/modular-html-components-with-requirejs/)

* * *

仅`main.js`用于所有内容的方法[可能更适合单页应用程序](https://twitter.com/jrburke/status/191266657526747137)。

我处理这种情况的方式是只在`main.js`文件中包含通用的站点范围的 JS：

**在每一页上：**

```
<script src="require.js" data-main="main"></script> 
```

**main.js**

```
require.config({
// config options
});

require(['jquery', 'common/ajaxLoader', 'common/someOtherModule'], function($, ajax, otherModule) {
    // Modules that do stuff on every page are instantiated here 
}); 
```

**page1.html**

```
<script>
    require(['scripts/page1']);
</script> 
```

**page1.js**

```
require(['jquery', 'page1Module'], function($, module){
    // page1 specific stuff here
}); 
```

上面的例子只是处理它的几种方法之一。请注意[加载纯 JavaScript 文件和加载模块之间的区别](http://requirejs.org/docs/api.html#jsfiles)。

我遵循的一条经验法则是将所有可重用的模块（或类，如果它更容易概念化的话）`define`与它们自己的依赖项等一起保存在 a 中，然后`require`用来抓取这些模块，使用它们的方法或以某种方式与它们交互。

使用这种模式几乎肯定需要使用 domReady 模块[，它是 RequireJS 的一个单独插件](http://requirejs.org/docs/download.html#domReady)。[例如，在 jQuery](https://twitter.com/jrburke/status/205332720589619201)中使用它而不是 ready 函数，因为它允许模块在 DOM 准备好之前开始下载，从而减少了代码执行的等待时间。

**编辑**您可能希望在 RequireJS 存储库中[看到另一个多页面应用程序示例](https://github.com/requirejs/example-multipage)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-19T14:25:03.333

我最近完成了在 ASP.NET MVC 应用程序中使用自动构建优化设置 RequrieJS 的练习。有很多有用的博客文章，例如 Simon 的文章，都是很好的参考。从 ASP.NET 的角度来看，我发现在为多页 ASP.NET 应用程序配置 RequireJS 优化器方面最有用的方法之一是[让 RequireJS 与 ASP.NET MVC 配合得很好](http://www.novanet.no/blog/yngve-bakken-nilsen/dates/2013/6/making-requirejs-play-nice-with-aspnet-mvc/)。

使用已有的大量信息，我[在 GitHub 上建立了我自己的 ASP.NET MVC RequireJS 示例](https://github.com/SparkSoftware/example-requirejs)。包含的大部分内容与已经存在的示例类似，但是为了解决部分视图和多页面需要依赖项的问题，我采取了稍微不同的方法。

**_Layout.cshtml**

与现有示例最显着的区别是创建了一个自定义[RequireViewPage](https://github.com/SparkSoftware/example-requirejs/blob/master/src/Example/Controllers/RequireViewPage.cs)，它公开了将配置数据传递给 RequrieJS 的方法以及参考页面特定的 require 依赖项。

所以你的 _Layout.cshtml 看起来很像你所期望的：

```
<head>
    ...
    @RenderModuleConfig()
    <script type="text/javascript" src="@Url.Script("vendor/require.js")" data-main="main"></script>
</head>
<body>
    ... 
```

**视图和部分**

为了连接视图（在我的情况下是淘汰视图模型），已在 _Layout.cshtml 的底部添加了[一个额外的脚本片段](https://github.com/SparkSoftware/example-requirejs/blob/master/src/Example/Content/js/vendor/knockout/knockout.postbox.js)，如下所示

```
 ...
    @RenderSection("scripts", required: false)
    <script type="text/javascript">require(['main'], function () { require(['lib/knockout/knockout.require']); });</script>
</body> 
```

这将确保对于任何视图依赖项，主模块已被加载（假设 main 的依赖项已在其中定义`main.js`，然后允许通过数据属性连接视图特定的依赖项。

```
<div data-require="@MainModule"> ... </div>
<div data-require="@Module("address")"> ... </div>
<div data-require="view\home\index\model"> ... </div> 
```

* * *

有关设计和选择的完整说明，请参阅[GitHub 上的 README](https://github.com/SparkSoftware/example-requirejs)

# android - Android 在 SurfaceView 周围应用边框

> ID：10815462
> 
> 赞同：1
> 
> 时间：2012-05-30T11:33:10.417
> 
> 标签：android

我有一个`SurfaceView`我想显示一个`20dp`大小的边框，该边框将围绕`SurfaceView`. 我需要`16:9`纵横比的“SurfaceView”，所以我保持了比例`SurfaceView`的`161x286`大小`16:9`。

为了在表面视图周围显示边框，我在 XML 中有以下实现。

```
<RelativeLayout 
    android:id="@+id/my_surface_view_holder"
    android:layout_height="161dp"
    android:layout_width="286dp"
    android:padding="20dp"
    android:focusable="true"
    android:clickable="true"
    android:background="#fff"
    >
    <SurfaceView 
        android:id="@+id/video_surface_view"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" />
</RelativeLayout> 
```

上面的代码正确显示了边框，`SurfaceView`但它打破了视频的 16:9 宽高比，因为我已经`20dp`为显示边框提供了填充。

如果我根据边框大小调整纵横比，则边框设置不均匀，顶部/底部不同，左/右不同。

那么我如何通过保持其纵横比保持在 161x286 大小来显示 SurfaceView 周围的边框。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T12:54:33.403

我找到了方法，这很简单。我将 SurfaceView 的大小设置为 161X286，然后将 RelativeLayout 设置为包含宽度和高度的包装，然后将填充设置为显示 SurfaceView 周围边框的 RelativeLayout。

所以我的 SurfaceView 保持 16:9 的纵横比，并且它有 RelativeLayout 作为它的背景边框。

感谢大家的意见。

# java - 在 Spring MVC 中有条件地渲染 HTML

> ID：10815464
> 
> 赞同：3
> 
> 时间：2012-05-30T11:33:13.630
> 
> 标签：java, spring, spring-mvc

是否有任何标签可以有条件地呈现 HTML 块。例如：Struts 有：

```
<logic:present name="someForm" property="someProperty">
    //Code block
</logic:present> 
```

例如：JSF 有：

```
<h:panelGrid rendered="#{not empty someList}">
    //Some code block
</h:panelGrid> 
```

Spring MVC中有类似的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T11:34:23.823

普通的旧 JSTL 来拯救你！

Spring MVC 的美妙之处在于它不像其他框架那样添加大量冗余标签库。您始终可以依赖 JSTL 进行此类检查，这是 JSP 规范的一部分。

```
<c:if test="${not empty someList}">

</c:if> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T11:35:00.900

[JSTL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL3.html)：

```
<c:if test="${!empty someForm.someProperty}">

</c:if> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:37:28.063

你可以使用通用的 JSP/JSTL 标签库

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<c:choose>
        <c:when test="${condition}">
            something
        </c:when>
        <c:otherwise>
            something else
        </c:otherwise>
    </c:choose> 
```

或者

```
<c:if test="${condition}">
        something
    </c:if> 
```

使用 c:if 据我所知没有其他条件

# iphone - 在应用程序中解析 JSON 提要的问题

> ID：10815468
> 
> 赞同：-4
> 
> 时间：2012-05-30T11:33:33.407
> 
> 标签：iphone, objective-c, ios, json

以下 JSON 提要包含订单。

当每个订单不包含密钥（不能使用 objectForKey）时，如何检索每个订单？在左括号和第一个大括号之间没有键。

```
[ <-----
    { <-----
        "person": {
            "address": "My road",
            "city": "My City",
            "name": "My Name",
        },
        "orderDate": "30.05.2012 10:27",
        "orderId": 10001,
        "orderlines": [
            {
                "unit": {
                    "unitId": "RA005",
                    "name": "My Unit name",
                },
                "id": 10007,
                "deliveryInfo": {
                    "count": 1,
                    "date": "30.05.2012",
                    "format": "MY_FORMAT",
                },
                "sum": 0,
                "details": "Testing",
                "priority": 3,
            }
        ],
        "received": true,
        "status": "REGISTERED",
        "sumPrice": 0
    },
    {
        "person": {
            "address": "My road 2",
            "city": "My City 2",
            "name": "My Name 2",
        },
        "orderDate": "30.04.2012 10:27",
        "orderId": 10002,
        "orderlines": [
            {
                "unit": {
                    "unitId": "RA006",
                    "name": "My Unit name 2",
                },
                "id": 10008,
                "deliveryInfo": {
                    "count": 2,
                    "date": "01.06.2012",
                    "format": "MY_FORMAT",
                },
                "sum": 0,
                "details": "Testing",
                "priority": 2,
            }
        ],
        "received": true,
        "status": "REGISTERED",
        "sumPrice": 0
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:38:36.177

每当你看到 [] （方括号），它代表数组。所以使用索引处的对象来返回索引处。一种方法是将对象传递到数组中

```
NSMutableArray *arr = (NSMutableArray*) jsonData; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:40:22.737

因为你的 json 的根是一个数组，

```
NSError *e = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options: NSJSONReadingMutableContainers error: &e];

if (!jsonArray) {
  NSLog(@"Error parsing JSON: %@", e);
} else {
   for(NSDictionary *item in jsonArray) {
      NSLog(@"Item: %@", item);
   }
} 
```

# ruby-on-rails - 如何在rails 3中使用虾生成pdf文件

> ID：10815471
> 
> 赞同：0
> 
> 时间：2012-05-30T11:33:50.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-plugins

现在我正在使用 rails 3.0.0 版本。我已经安装了 prawn gem。请告诉我。如何在 rails 代码中生成 pdf 文件以及如何将该 pdf 文件保存在公共文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:36:56.783

你看过这个教程吗？ [http://railscasts.com/episodes/153-pdfs-with-prawn](http://railscasts.com/episodes/153-pdfs-with-prawn)

# android - 如何在android中的同一个按钮单击上调用多个事件

> ID：10815473
> 
> 赞同：-1
> 
> 时间：2012-05-30T11:33:52.210
> 
> 标签：android

我正在尝试在我的活动的左右两端制作 2 个箭头按钮，其中我有 5 个图标/图像，单击任何箭头按钮我想在活动页面上显示一些文本，同时突出显示相关页面上的图标与文本。当我两次单击相同的箭头按钮时，它应该显示一些其他文本并突出显示序列之后的另一个图标。我不想每次单击按钮时都更改活动。我应该怎么做。请帮助它有点紧急...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:46:57.400

在youtube上看到这个[项目](http://www.youtube.com/watch?v=mGwG8-chUEM)基本上它使用与你想要的相同的方法，除了它只在图像之间切换，你可以通过使用视图切换器来改进它，用于包含图像视图和文本视图的视图，源也被附加并且项目在之间切换也使用触摸手势的图像：

# c++ - 获取垃圾文本。如何将字符数组变量转换为 LPARAM 类型？

> ID：10815480
> 
> 赞同：1
> 
> 时间：2012-05-30T11:34:19.450
> 
> 标签：c++, windows, char, sendmessage

无论从文件中检索到什么数据，我都需要在文本框中显示文本。

在 Windows 应用程序中按下特定按钮（**IDB_SHOW_BUTTON**）时，我正在执行以下操作：-

```
case IDB_SHOW_BUTTON:{  
   char buf[1000];  
   vReadFileFromHardisk(buf); //storing the read data of file to buffer
   SendMessage(editHwnd,WM_SETTEXT,NULL,(LPARAM)buf);//Due to this, I get junk text.
}
break; 
```

我正在从文件中读取数据并将其存储到缓冲区中。我不明白为什么每次单击按钮时都会收到垃圾文本。

当我更改**SendMessage的****第四个参数**时，即如下所述，我在按下特定按钮时得到正确的输出：-

 **```
SendMessage(editHwnd,WM_SETTEXT,NULL,(LPARAM)L"My First Edit Window"); 
```

请让我知道如何在将数据存储到**buf**并通过**SendMessage**发送相同的情况下显示正确的文本。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:46:04.280

看到工作示例中的“L”了吗？您正在将一个窄字符串传递给一个需要 Unicode 的函数。

你需要要么

1.  将您读入的文本转换为 Unicode - 您可以使用[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072.aspx)等来执行此操作；您需要知道输入的编码是什么，例如 UTF-8
2.  发送消息的窄格式 WM_SETTEXTA，以对您已阅读的数据使用当前系统编码
3.  将程序设置从 Unicode 更改为多字节（但不要这样做）

我强烈推荐 1 并习惯在整个程序中使用 Unicode（又名 UTF-16）。**

# php - .htaccess 重定向如果根目录、index.php、不是文件或目录

> ID：10815486
> 
> 赞同：1
> 
> 时间：2012-05-30T11:34:28.860
> 
> 标签：php, apache, .htaccess, rewrite

目前我有一个处理请求的控制器（使用友好的 URL）。要重定向到此控制器，我使用以下 .htaccess：

```
 RewriteEngine on

 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d

 RewriteRule ^(.*)$ __controller.php?p=$1 [L,QSA] 
```

然后我有一个**index.php**重定向到 /home 这是主页（我强制这样做，所以主页也使用控制器）：

```
<?php
header('Location: home', true, 301);
exit();
?> 
```

但是，如果文件是 index.php 或者它是根域，我也希望它发送到这个控制器（因为我不再希望主页是 www.test.com/home 而只是 www.test.com )，因此以下每一项都将通过控制器：

www.test.com/friendly-url/123/post-topic （目前有效）

但是也：

www.test.com/index.php 和 www.test.com

显然，由于 index.php 文件存在，因此最后 2 个条件目前不起作用，因此 .htaccess 不会通过控制器发送它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:43:54.597

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^index.php$ /home [L,R=301,QSA]
RewriteRule ^$ __controller.php?p=home [L,QSA]
RewriteRule ^(.*)$ __controller.php?p=$1 [L,QSA] 
```

你在找这个吗？

那么你不需要PHP重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:50:25.727

将您的 .htaccess 代码替换为：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule (?!^index\.php/?$)^(.+)$ __controller.php?p=$1 [L,QSA,NC] 
```

# excel - EXCEL Graphs - change the graph TYPE dynamically

> ID：10815487
> 
> 赞同：0
> 
> 时间：2012-05-30T11:34:38.867
> 
> 标签：excel, graph, vba

Wanted a way to change a graph type dynamically( without using VB script, is it even possible?) - say from bar to line or pie.

this will be triggered when a user clicks on a radio button or a drop down or any other way.

Beginner,Kindly help

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:36:16.930

The best thing to do is create a simple chart, record a macro, and change the chart to several different types. Look at the recorded macro and you'll see the code you need to change the chart dynamically.

Here are a couple of examples that change the chart type, assuming your chart is called "Chart 1":

```
Sub ApplyPieChart()
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.ChartType = xlPie
End Sub

Sub ApplyBarChart()
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.ChartType = xlBarClustered
End Sub 
```

You can then assign these macros to a button, a hyperlink, or whatever else you want.

Note that you can't change chart types with formulas. You will need to use VBA.

# php - 防止通过直接访问发送 PHP 表单，允许使用 AJAX

> ID：10815488
> 
> 赞同：0
> 
> 时间：2012-05-30T11:34:41.617
> 
> 标签：php, javascript, ajax

我有一个脚本，每次有人通过 Facebook 评论框发表评论时都会触发一封电子邮件。Fb.event.subscribe 在我的服务器上触发对 mail.php 的 ajax 调用，它会向我的电子邮件地址发送一封电子邮件以通知新评论。我如何使这更安全并直接阻止对 mail.php 的访问？

```
 FB.Event.subscribe('comment.create', function (response) {
            var domain = "<?= $_SERVER['SERVER_NAME']; ?>";
            var url = "<?= $currentUrl ?>";
                alert("comment added");

                            var xmlhttp;
                            if (window.XMLHttpRequest)
                              {// code for IE7+, Firefox, Chrome, Opera, Safari
                              xmlhttp=new XMLHttpRequest();
                              }
                            else
                              {// code for IE6, IE5
                              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                              }

                            xmlhttp.open("GET","http://" + domain + "/mail.php?url=" + url,true);
                            xmlhttp.send();

        });

** ---------- here is mail.php -------- **

<?php 
    $to = "MY EMAIL HERE";
    $subject = "New Comment Added";
    $message = "New Comment posted here: " . $_GET['url'] ;
    $from = "MY EMAIL HERE";
    $headers = "From:" . $from;
    //mail($to,$subject,$message,$headers);
    //echo  $_GET['accesstoken'] ;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:38:05.873

你不可以做这个。如果您允许客户端`mail.php`使用客户端代码进行访问，那么任何人都可以使用脚本访问它。你可以尽可能多地混淆它，但如果有人真的想知道如何访问它，他们会的。

**编辑**：基本规则是，如果它可以由人类在浏览器中完成，那么它可以由计算机在脚本中完成。该规则唯一的半对立点是验证码，但即使这些现在也可以被规避。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:47:05.487

您可以像这样在 php 脚本中添加标头检查：

```
<?php
  if (!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    //send email
  }
?> 
```

# asp.net - .NET 验证它是否是一个帖子

> ID：10815489
> 
> 赞同：0
> 
> 时间：2012-05-30T11:34:45.907
> 
> 标签：asp.net, asp.net-mvc-4

根据指南，它说我只需在方法名称之前添加 Post 即可。但是，当我尝试它不起作用时。但是，如果我`[HttpPost]`在方法名称上方添加，那么它会按预期工作。

我想知道 PostMyMethodName() 是否也可以工作。还是我正在阅读的指南有误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:40:19.260

我猜你说的是 ASP.NET MVC 中的 ActionFilter 属性。`[HttpPost]`操作过滤器属性用于限制操作方法，以便该方法仅处理 HTTP POST 请求。因此，您必须在控制器的操作方法名称之前使用它来处理用于该操作的表单帖子。如果您没有提及任何 Action 过滤器，它将被视为 HTTP `GET`([HttpGet])

# c# - 在 C# 中单击数据库中的按钮时加载前 20 个项目，然后加载接下来的 20 个项目

> ID：10815498
> 
> 赞同：1
> 
> 时间：2012-05-30T11:35:21.837
> 
> 标签：c#, asp.net, asp.net-mvc-3

我想做一些类似分页的事情。假设我们的数据库中有 100 个联系人。当我的索引页面第一次加载时，它会从数据库中加载 20 个联系人项目。页面末尾有一个“更多”按钮。当用户单击该按钮时，我想从数据库中加载接下来的 20 个项目并将它们显示在已显示的联系人下方。

```
 public ActionResult Index(int no)
 {
     var contacts = GetContactFromDB(no) //no is used to know what is the current page number
 }

 public IList<Contact> GetContactFromDB(int pagenumber)
 {
      // here  write the query to get next 20 items 
  } 
```

我想我忘了说的一件事是我不想丢失前 20 个。我的意思是当用户单击按钮时，接下来的 20 个联系人将使用 AJAX 请求从数据库中获取并附加那些新的前一个联系人之后的 20 个联系人...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:37:37.687

只需使用 Linq 中的[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)和[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)扩展方法的组合：

```
return Contacts.Skip(PageSize * pageNumber).Take(PageSize).ToList(); 
```

注意：这没有考虑到你如何获得`Contacts`. 但我想你已经知道了:) 另外，它假设它`pageNumber`是基于 0 的。
如果您使用的是 Linq-To-SQL 或 Linq-To-Entities，对 和 的调用`Skip`也`Take`将被转换为最终数据库查询的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:38:01.903

干得好

```
public IList<Contact> GetContactFromDB(int pagenumber)
 {
      return context.Contacts.OrderBy(p=>p).Skip(pagenumber*10).Take(10).ToList();
 } 
```

您可以使用您想要的联系人类的任何字段进行排序。

此外，我建议您将要在每个页面中显示的联系人数量（在本例中为 10）存储在某个常量中。它将使您的代码更通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:41:21.590

在 asp.net 表单中，我会用当前索引 (20, 40) 隐藏，并且总是从 x-20 到 x。

# mysql - MySQL 更新查询花费了太多时间

> ID：10815502
> 
> 赞同：0
> 
> 时间：2012-05-30T11:35:35.143
> 
> 标签：mysql

我有两张表，分别称为 Stops 和 Stop_Times，它们与旅行社有关。停止有 8K 记录和 Stop_Times 表有 320 万条记录。当我执行 UPDATE 查询时，它需要太多时间。花了 3.5-4 小时，但仍然没有更新记录。我的查询是 -

```
UPDATE Stops
   JOIN Stop_Times ON Stops.stop_id = Stop_Times.stop_id
SET
   Stops.route_type = Stop_Times.route_type,
   Stops.agency_id = Stop_Times.agency_id
WHERE Stops.location_type = 0 
```

对于这两个表，我使用的是 MyISAM 存储引擎。我为 Stops 和 Stop_Times 表编制了索引。

我在 Linux CentOs 上运行这个查询。

有什么办法可以提高 UPDATE 查询的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:12:32.437

您可能希望仔细考虑在您的应用程序中更新具有非常大数据集的小型 (8K) 表意味着什么。

从您提供给我们的少量信息中无法猜测您的业务逻辑。您的`UPDATE`查询看起来像是在敲击 Stops 表中的行，冗余地更新每一行数万次。

通常，当从大表创建小表时，对大表的查询是某种摘要查询，包含`GROUP BY`或`DISTINCT`关键字。此查询应生成正确的行数以更新较小的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:12:43.987

您可以尝试以下查询 -

```
UPDATE
Stops AS s
LEFT JOIN (
    SELECT
        route_type, agency_id, stop_id
    FROM
        Stop_Times
    GROUP BY
        stop_id
) AS st ON
    st.stop_id = s.stop_id
SET s.route_type = st.route_type, s.agency_id = st.agency_id 
```

# security - EJB3 安全性：如何跟踪登录用户？

> ID：10815504
> 
> 赞同：0
> 
> 时间：2012-05-30T11:35:36.347
> 
> 标签：security, jakarta-ee, architecture, ejb-3.1

我有一个作为服务层的 EJB 3 应用程序和一个作为其客户端的 Tapestry 5 Web 应用程序。EJB 应该提供一个会话外观以供 Web 应用程序使用。

要执行 EJB 层中定义的操作，用户需要通过 Web 界面登录。我必须具有实体级别的安全性，因此 Java EE 声明式安全性对我来说用处不大。

我应该如何在这种设置中实现安全性？我宁愿在 EJB 层上实现它，然后在 Web 应用程序中实现它，以防我切换客户端。

我可以在 Web 应用程序中使用 http 会话来存储用户会话，然后在每个无状态 EJB 调用中传递用户对象。

```
public void doStuff(params, User user); 
```

有状态会话 bean 是这里的解决方案吗？

编辑：通过实体级安全性，我的意思是行级安全性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:26:37.983

实体级安全性到底是什么意思？

如果我理解正确，您可以使用登录用户直接从您的 Web 应用程序调用您的 SLSB？

如果是这样：编写一个将 SessionContext 作为资源注入的 Inteceptor 并使用此 Interceptor 注释您的 SLSB ...用户，如果出现问题，直接从拦截器抛出异常，而不会将其发送到您的 SLSB）。

# r - 如何重塑列表中的 data.frames？

> ID：10815511
> 
> 赞同：0
> 
> 时间：2012-05-30T11:36:26.550
> 
> 标签：r, reshape, transpose, reshape2

我有一个这样的清单

```
A <- data.frame(a = c(1, 2), b = c(3, 4))
B <- data.frame(c = c(1, 2), d = c(3, 4))
g <- list(var1 = A, var2 = B) 
```

生产

```
> g
$var1
  a b
1 1 3
2 2 4

$var2
  c d
1 1 3
2 2 4 
```

现在我想像这样转置列表元素

```
lapply(g, function(x) data.frame(t(x))) 
```

但这会产生 a、b、cd 作为行名，这不是我想要的

```
> lapply(g, function(x) data.frame(t(x)))
$var1
  X1 X2
a  1  2
b  3  4

$var2
  X1 X2
c  1  2
d  3  4 
```

我想在这些 data.frames 中为 a、b、c 和 d 生成一个新列。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:41:09.887

第 1 点：如果您要转置数据，这很可能意味着您应该使用数组，而不是 data.frames。

但是，如果这**确实**是您想要做的，那么只需`cbind()`在列名中：

```
lapply(g, function(x) as.data.frame(cbind(colnames(x), t(x))))
$var1
  V1 V2 V3
a  a  1  2
b  b  3  4

$var2
  V1 V2 V3
c  c  1  2
d  d  3  4 
```

# socket.io - 如何限制并发连接数？

> ID：10815517
> 
> 赞同：3
> 
> 时间：2012-05-30T11:36:42.543
> 
> 标签：socket.io

如果我使用 express 和 socket.io 运行 nodejs 服务器，如何将并发连接数限制为任意数量？即：在握手期间，检查是否达到限制，如果是，拒绝连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:43:39.150

在您的`connection`事件处理程序中，您可以检查以下值：

```
io.sockets.clients().length 
```

并据此决定做什么。如果您只想要连接的客户端：

```
io.sockets.clients().filter(function(s) {return !s.disconnected;}).length 
```

# java - Java 矩阵库

> ID：10815518
> 
> 赞同：33
> 
> 时间：2012-05-30T11:36:43.223
> 
> 标签：java, matrix, colt

我想知道是否有任何著名的 Java 矩阵库，例如 Colt 或 EJML，实际上提供了与 MatLab 类似的功能？例如，我似乎在他们的 API 简单方法的定义中找不到任何地方可以将两个矩阵/向量相加或相减，这似乎是最常用的操作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-05-05T19:55:12.273

一些用于线性代数的 Java 库是：

*   阿帕奇公共数学：[http ://commons.apache.org/proper/commons-math/](http://commons.apache.org/proper/commons-math/)
*   jeigen - eigen 的包装器 - [https://github.com/hughperkins/jeigen](https://github.com/hughperkins/jeigen)（包括复杂且很少发现的功能，如矩阵指数和矩阵对数）
*   jblas [http://mikiobraun.github.io/jblas/](http://mikiobraun.github.io/jblas/)（还具有矩阵指数等更复杂的功能，也非常快）。
*   柯尔特[http://acs.lbl.gov/software/colt/](http://acs.lbl.gov/software/colt/)
*   JAMA [http://math.nist.gov/javanumerics/jama/](http://math.nist.gov/javanumerics/jama/)
*   UJMP - [http://sourceforge.net/projects/ujmp/](http://sourceforge.net/projects/ujmp/)

**编辑**也许我们可以在遇到任何人时扩展此列表，并且您知道-世界在不断发展：

*   ojAlgo - [http://ojalgo.org/](http://ojalgo.org/)有有希望的基准
*   高效的 Java 矩阵库 (EJML) - [http://ejml.org](http://ejml.org)
*   ParallelColt - [https://sites.google.com/site/piotrwendykier/software/parallelcolt](https://sites.google.com/site/piotrwendykier/software/parallelcolt)
*   la4j - [http://la4j.org/](http://la4j.org/)
*   MTJ - [https://github.com/fommil/matrix-toolkits-java](https://github.com/fommil/matrix-toolkits-java)
*   nd4j - [https://nd4j.org/](https://nd4j.org/)允许您选择底层的本机实现，如 cuda 或 openBlas

*注意：*就个人而言：我在自己的项目（[http://www.finmath.net](http://www.finmath.net)）中使用 Apache Commons Math 和 Colt。虽然公共数学得到了积极发展，但我发现 Colt 在某些任务（如特征值分解）中仍然更快。出于这个原因，我使用了某种包装器，它允许我快速切换底层库（我只需要一些东西，比如求解方程组和特征值分解）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-30T11:47:02.027

试试 Apache Commons 数学库。org.apache.commons.math3.linear 包包含你想要的函数。[主页](http://commons.apache.org/math/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:44:53.337

COLT 的接口为您提供了一个通用的 OP: [`assign(matrix, function)`](http://acs.lbl.gov/software/colt/api/cern/colt/matrix/DoubleMatrix2D.html#assign%28cern.colt.matrix.DoubleMatrix2D,%20cern.colt.function.DoubleDoubleFunction%29)，您可以使用它来添加或减去矩阵和向量。

正如 javadocs`assign()`所说：

> 将函数的结果分配给每个单元格； `x[row,col] =function(x[row,col],y[row,col])`.

因此，通过使用加法函数`function`- 您可以添加矩阵。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T07:44:37.543

还有一个[la4j](http://la4j.org)库支持函数式编程特性作为函子。您可以使用带有手动高阶功能的 transform() 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T11:42:48.877

你可以用[这个](http://sourceforge.net/projects/linearmath/)。它非常简单并提供基本的矩阵运算。

您可以添加/减去/乘以等 2d 矩阵和向量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-02T00:46:43.763

您可以尝试我的新 Java 库（与 Java 6+ 兼容），它可用于各种应用程序，特别是用于执行多线程矩阵计算（使用多线程扩展 JAMA；目前比可用的开源库快 30%） . 你可以在 GitHub 上查看：

[https://github.com/b-io/io.barras/tree/master/java/jupiter](https://github.com/b-io/io.barras/tree/master/java/jupiter)

请注意，每个项目都是相互独立的，并且都在非常宽松的 MIT 许可证下。

# jquery - 在链接上扩展搜索栏

> ID：10815520
> 
> 赞同：1
> 
> 时间：2012-05-30T11:36:47.550
> 
> 标签：jquery, forms, search, css, expand

我试图让搜索输入扩展焦点，同时隐藏父 div 中的其他内容。

在这里看到它：http: [//jsfiddle.net/QF7ra/2/](http://jsfiddle.net/QF7ra/2/)

它有点工作，但我需要父 div 始终保持相同的大小。

谢谢，克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:08:27.723

这个：http: [//jsfiddle.net/pVmWE/](http://jsfiddle.net/pVmWE/)

# c# - Protobuf-net 在每个字节之前用 '00' 序列化 byte[] 数据

> ID：10815527
> 
> 赞同：1
> 
> 时间：2012-05-30T11:37:16.187
> 
> 标签：c#, serialization, protobuf-net

我正在使用带有 .Net20 版本的 protobuf-net r480 的 Visual Studio 2005。

我尝试遵循一个示例并使用字符串、枚举、int 和字节 [] 数据序列化一个类，如下所示

```
[ProtoContract]
public class Proto_DemoMessage {
    public enum ESSCommandType : int {
        ClientServer = 0,
        Broadcast = 10,
        Assign = 11,
    }

    [ProtoMember(1, IsRequired = false)]
    public string Name;
    [ProtoMember(3, IsRequired = true)]
    public ESSCommandType CommandType;
    [ProtoMember(4, IsRequired = false)]
    public int Code;
    [ProtoMember(5, IsRequired = false)]
    public byte[] BytesData;

    public byte[] Serialize(){
        byte[] b = null;
        using (MemoryStream ms = new MemoryStream()) {
            Serializer.Serialize<Proto_DemoMessage>(ms, this);
            b = new byte[ms.Position];
            byte[] fullB = ms.GetBuffer();
            Array.Copy(fullB, b, b.Length);
        }
        return b;
    } 
```

并为每个字段赋值，如下所示

```
Proto_DemoMessage inner_message = new Proto_DemoMessage();
inner_message.Name = "innerName";
inner_message.CommandType = Proto_DemoMessage.ESSCommandType.Broadcast;
inner_message.Code = 11;
inner_message.BytesData = System.Text.Encoding.Unicode.GetBytes("1234567890"); 
```

调用 inner_message.Serialize() 后，我将结果 byte[] 写入文件。当我以 HEX 模式打开文件进行验证时，我发现 byte[] 中的每个字节后面都有一个 00 填充。结果是：

```
2A 14 31 00 32 00 33 00 34 00 35 00 36 00 37 00 38 00 39 00 30 00 
```

是不是我做错了什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:44:26.417

一切都好。您的字符串以 UTF-16 编码。在这种编码中，所有字符（至少）都是两个字节宽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:53:35.060

当我检查这些零是否确实是因为 Unicode 编码时，我还检查了 UTF8 是否更紧凑（正如预期的那样），所以使用

```
inner_message.BytesData = System.Text.Encoding.UTF8.GetBytes("1234567890"); 
```

可能会做一些好事。

**upd**`string` ：或者按照 Marc Gravell 的建议真正使用属性。

# wcf - 在 wcf 客户端 app.config 错误（自主机）中找不到端点元素

> ID：10815529
> 
> 赞同：0
> 
> 时间：2012-05-30T11:37:24.710
> 
> 标签：wcf, wcf-data-services, wcf-binding, wcf-client

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="ep1" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:57582/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="ep1" contract="ServiceReference1.IService1"
                name="ep1" />
        </client>
    </system.serviceModel>
</configuration> 
```

这是我在自动生成的 app.config 文件中对客户端端点的配置，但我仍然收到以下错误： **在 ServiceModel 客户端配置部分中找不到名称为“ep1”和合同“ServiceReference1.IService1”的端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此名称匹配的端点元素。**

我正在使用::

```
Service1Client wcf = new Service1Client("ep1") 
```

![在此处输入图像描述](../Images/f73f14c47c59a04ed63d1e2502a734ab.png)

* * *

它现在可以工作了。我刚刚在 web.config 中定义了来自自动生成的 app.config 文件的整个解决方案的客户端端点。它现在可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:41:28.407

如果这是一个 Windows 应用程序项目，您需要添加一个“应用程序配置文件”（保留名称为 app.config），如果您的项目根目录中已经有一个，没问题。

如果它是一个 Web 项目 - 那么您需要将其定位为 web.config。

接下来，将上述配置复制到该配置，然后重新构建并运行。然后它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:37:16.553

几乎可以肯定的是，您正在运行的代码正在从没有定义此端点的配置文件中读取。您确定您正在从构建输出位置查看配置文件吗？

我的猜测是您需要在配置文件上设置 copy local = true 。

# c# - 我返回集合的 Asp.net mvc 操作生成包含 system.linq.Enumerable 的 url，如何删除它们

> ID：10815531
> 
> 赞同：1
> 
> 时间：2012-05-30T11:37:34.770
> 
> 标签：c#, asp.net-mvc, url-rewriting

我有一个 mvc 应用程序，它基本上生成视图，这些视图基本上是集合但特定类型的集合..so ie

```
IEnumerable<IType> 
```

现在我的网址包含这样的东西

www.site/home/section/param?System.Linq.Enumerable%.....

我想在节后删除任何内容。

我已经尝试过 routeMap 但无法省略 system.linq 等。请有任何想法或帮助

这是我的操作方法

```
public ActionResult Whatever(IEnumerable<IType> whatever)
        {
            return View(whatever);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:02:28.710

上面的问题非常有趣，我花了一段时间才回到我之前编写的 mvc 应用程序。答案很简单，但并不明显。

在当前的 mvc3 中，即使您将对象作为匿名类型传递，将您的视图映射到您的视图模型，它总是会计算出集合类型并以某种方式将其附加到 url，在这种情况下，它将整个案例附加到 url

[http://www.website.com/param=system.linq.enumerable.where.select](http://www.website.com/param=system.linq.enumerable.where.select) ..

任何正确的方法是将其包装在 routevaluedictionary

new RouteValueDictionary(new { controller = Constants.HOMECONTROLLER, action = Constants.APPLYAPP }));

如果您将任何东西从一个动作传递到另一个动作，请使用这个

```
return new RedirectToRouteResult(Constants.DEFAULTROUTE,
                     new RouteValueDictionary(new { controller = Constants.HOMECONTROLLER, action = Constants.APPLYAPP })); 
```

而不是 RedirecttoAction，因为这似乎会导致上面的 url。

感谢 MattyTommo 的帮助，但在我的情况下它无关紧要，但它可能对其他人有帮助。我根本无法将 mattytommo 的回复标记为答案，因为它实际上误解了我的要求，也许我的要求不正确但也误导了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:46:11.043

你不能在 URL 中传递这样的集合，你不应该`RouteValueDictionary`在重定向时将它们添加到。只需发送一些基本信息，这些信息可以帮助您在重定向到的操作中获得所需的信息。

**编辑：**根据您的代码，我们可以看到您的操作方法采用一个`IEnumerable`，因此无论您在哪里调用此操作，您都在传递它。你**不能这样做**，你必须在 action 方法中生成你的列表。尝试类似：

```
public ActionResult Whatever()
{
    List<IType> whatever = new List<IType>();

    //populate your list here, then we can return it

    return View(whatever);
} 
```

# wordpress - WordPress，评论回复在最后一条消息下，而不是在回复的评论下

> ID：10815533
> 
> 赞同：2
> 
> 时间：2012-05-30T11:37:36.957
> 
> 标签：wordpress, comments, wordpress-theming

我尝试创建一个 WordPress 主题，但遇到了几个问题。

我尝试使用 comment_reply_link 但根本没有用，我打算通过添加以下代码来手动创建链接：

```
<?php
    $permalink = get_permalink() . "?replytocom=" . get_comment_ID() . "#comments-form";
    $onclick = "return addComment.moveForm('comment-" . get_comment_ID() . "', '" . get_comment_ID() . "', 'comments-form', '" . get_the_ID() . "')";
?>
<a href="<?php echo $permalink; ?>" onclick="<?php echo $onclick; ?>">
    <?php _e('Reply', 'z'); ?>
</a> 
```

此外，我已将评论回复排入队列并正确加载。

我的自定义回复链接工作正常。当我单击回复链接时，表单会移动到我的评论下，但在我提交评论后，回复不会放在回复的评论下，而是放在评论的末尾。

**注意**：在我的评论表单中，我输入了以下代码：

```
<input type='hidden' name='comment_post_ID' value='<?php the_ID(); ?>' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' /> 
```

通过使用 Chrome 控制台，我看到字段 comment_parent 值已更新为回复的评论 ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:57:54.580

好的，我真的不知道如何帮助您解决您的特殊问题，但我可以为您的自定义评论模板提供一些指导，该模板运行完美！我使用 ThemeShaper [http://themeshaper.com/2009/07/01/wordpress-theme-comments-template-tutorial/](http://themeshaper.com/2009/07/01/wordpress-theme-comments-template-tutorial/)的 Ian Stewart 教程制作我的评论模板。首先，comments.php 文件如下所示：

```
<?php
/**
 * @package WordPress
 * @subpackage Default_Theme
 */

// Do not delete these lines
    if (!empty($_SERVER['SCRIPT_FILENAME']) && 'comments.php' == basename($_SERVER['SCRIPT_FILENAME']))
        die ('Please do not load this page directly. Thanks!');

    if ( post_password_required() ) { ?>
        <p class="nocomments">This post is password protected. Enter the password to view comments.</p>
    <?php
        return;
    }
?>

<!-- You can start editing here. -->

<?php if ( have_comments() ) : ?>
    <h3 id="comments"><?php comments_number('No hay Respuestas', 'Hay 1 Respuesta', 'Hay % Respuestas' );?></h3>

    <ol class="commentlist">
        <?php wp_list_comments('type=comment&callback=advanced_comment'); //this is the important part that ensures we call our custom comment layout defined above 
                ?>
    </ol>
    <div class="clear"></div>
    <div class="comment-navigation">
        <div class="older"><?php previous_comments_link() ?></div>
        <div class="newer"><?php next_comments_link() ?></div>
    </div>
 <?php else : // this is displayed if there are no comments so far ?>

    <?php if ( comments_open() ) : ?>
        <!-- If comments are open, but there are no comments. -->

     <?php else : // comments are closed ?>
        <!-- If comments are closed. -->
        <p class="nocomments">Los comentarios están cerrados.</p>

    <?php endif; ?>
<?php endif; ?>

<?php if ( comments_open() ) : ?>

<div id="respond">

<h3><?php comment_form_title( 'Comentar', 'Responder %s' ); ?></h3>

<div class="cancel-comment-reply">
    <small><?php cancel_comment_reply_link(); ?></small>
</div>

<?php if ( get_option('comment_registration') && !is_user_logged_in() ) : ?>
<p>Debes iniciar sesión para poder comentar.</p>
<a href="http://dfine.me?loginGoogle=1&redirect=http://dfine.me" onclick="window.location = 'http://dfine.me?loginGoogle=1&redirect='+window.location.href; return false;"><div class="new-google-btn new-google-3 new-google-default-anim"><div class="new-google-3-1"><div class="new-google-3-1-1">Iniciar Sesión</div></div></div></a>
<a href="http://dfine.me?loginFacebook=1&redirect=http://dfine.me" onclick="window.location = 'http://dfine.me?loginFacebook=1&redirect='+window.location.href; return false;"><div class="new-fb-btn new-fb-3 new-fb-default-anim"><div class="new-fb-3-1"><div class="new-fb-3-1-1">Iniciar Sesión</div></div></div></a>

<?php else : ?>

<form action="<?php echo get_option('siteurl'); ?>/wp-comments-post.php" method="post" id="commentform">

<?php if ( is_user_logged_in() ) : ?>

<p>Sesión iniciada por <a href="<?php echo get_option('siteurl'); ?>/wp-admin/profile.php"><?php echo $user_identity; ?></a>. <br><a href="<?php echo wp_logout_url(get_permalink()); ?>" title="Cerrar sesión">Cerrar sesión &raquo;</a></p>

<?php else : //this is where we setup the comment input forums ?>

<?php endif; ?>

<!--<p><small><strong>XHTML:</strong> You can use these tags: <code><?php echo allowed_tags(); ?></code></small></p>-->

<p><textarea name="comment" id="comment" cols="90%" rows="10" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Post" />
<?php comment_id_fields(); ?>
</p>
<?php do_action('comment_form', $post->ID); ?>

</form>

<?php endif; // If registration required and not logged in ?>
</div>

<?php endif; // if you delete this the sky will fall on your head ?> 
```

我更改了登录部分，因为我使用 Nextend Connect Facebook 和 Google 插件。functions.php 中的函数：

```
function advanced_comment($comment, $args, $depth) {
   $GLOBALS['comment'] = $comment; ?>

<li <?php comment_class(); ?> id="li-comment-<?php comment_ID() ?>">
   <div class="comment-author vcard">
     <?php echo get_avatar($comment,$size='90',$default='<path_to_url>' ); ?>
     <small class="comment-date"><?php printf(__('%1$s at %2$s'), get_comment_date(),  get_comment_time()) ?></small>     
     <div class="comment-meta"<a href="<?php the_author_meta( 'user_url'); ?>"><?php printf(__('%s'), get_comment_author_link()) ?></a> dice:<?php edit_comment_link(__('(Edit)'),'  ','') ?></div>
     </div>
     <div class="clear"></div>

     <?php /*if ($comment->comment_approved == '0') : ?>
       <em><?php _e('Your comment is awaiting moderation.') ?></em>
       <br />
     <?php endif; */?>

     <div class="comment-text"> 
         <?php comment_text() ?>
         <div class="reply">
      <?php comment_reply_link(array_merge( $args, array('depth' => $depth, 'max_depth' => $args['max_depth'], 'login_text' => "Responder"))) ?>
       <?php delete_comment_link(get_comment_ID()); ?>
   </div>
     </div>
   <div class="clear"></div>
<?php } 
```

还有这个：

```
function delete_comment_link($id) {
  if (current_user_can('edit_post')) {
    echo '- <a href="'.admin_url("comment.php?action=cdc&c=$id").'"> Eliminar</a> ';
    echo '- <a href="'.admin_url("comment.php?action=cdc&dt=spam&c=$id").'"> Spam</a>';
  }
} 
```

另外，我对核心comment-template.php 做了一些小的修改，在“回复”链接旁边添加了一张图片。评论模板.php：

```
if ( get_option('comment_registration') && !$user_ID )
        $link = '<a rel="nofollow" class="comment-reply-login" href="' . esc_url( wp_login_url( get_permalink() ) ) . '"><img src="' . $direccion_sitio . '/images/reply.png" alt="Responder" style="margin-right:5px;">' . $login_text . '</a>';
    else
        $link = "<a class='comment-reply-link' href='" . esc_url( add_query_arg( 'replytocom', $comment->comment_ID ) ) . "#" . $respond_id . "' onclick='return addComment.moveForm(\"$add_below-$comment->comment_ID\", \"$comment->comment_ID\", \"$respond_id\", \"$post->ID\")'><img src='" . $direccion_sitio . "/images/reply.png' alt='Responder' style='margin-right:5px;'>$reply_text</a>";
    return apply_filters('comment_reply_link', $before . $link . $after, $args, $comment, $post); 
```

最后，CSS！

```
/*Comentarios*/
.comments-template{
    width: 730px;
    display: inline-block;
    margin: 10px 0;
    padding-top: 20px;
    border-top: 3px dotted #CCC;
}

#comments{
    padding-bottom: 10px;
    border-bottom: 1px solid #EEE;
}

.commentlist{
    margin: 15px 0;
}

.comment-meta{
    padding: 5px 10px 1px 0;
    border-bottom: 1px dashed lightGrey;
    margin-bottom: 5px;
    display: inline-block;
}

.comment-meta .url{
    font-family: 'Franklin Gothic Book Italic', sans-serif;
    font-size: 1.1em;
    font-weight: 700;
}

.comment-text{
    padding: 5px 0 35px 0;
    min-height: 65px;
    position: relative;
    border-bottom: 1px solid #EEE;
    margin-bottom: 10px;
}
.comment-date{
    display: block;
    padding-top: 5px;
    font-size: 0.7em;
    color: #7E7E7E;
    font-style: italic; 
}
.comments-template .avatar-90{
    float: left;
    padding: 5px 15px 10px 0;
}
.reply{
    position: absolute;
    bottom: 10px;
    right: 10px;
}
.depth-2{
    margin-left: 105px;
}
.depth-3{
    margin-left: 210px;
}
#respond{
    margin-bottom: 30px;    
}
/*Fin Comentarios*/ 
```

如果我做对了，你的主要问题是特定评论的答案没有正确显示，所以也许你需要查看你的 CSS，在我的例子中，是 .depth 类。

如果您想测试我的自定义评论模板，您可以访问[http://dfine.me](http://dfine.me)并评论任何帖子中的任何内容。我在 Wordpress 首选项中的配置是只允许 1 个嵌套评论。希望这可以帮助！PS：对于混合的“英语-西班牙语”陈述感到抱歉......

# php - 我想在 Zend Framework 1.11 中使用 Symfony EventDispatcher

> ID：10815536
> 
> 赞同：0
> 
> 时间：2012-05-30T11:37:58.143
> 
> 标签：php, zend-framework, symfony1, event-dispatching

我想（需要）在 Zend Framework 1.11 中使用 Symfony EventDispatcher 我在 zf 的引导程序中加载了 EventDispatcher...

```
public function run()
    {
        require APPLICATION_PATH . 
                '/../library/Symfony/Component/EventDispatcher/EventDispatcher.php';
        $dispatcher = new \Symfony\Component\EventDispatcher\EventDispatcher();

        $dispatcher->dispatch("bootstrap.prerun", null);

        parent::run();

        $dispatcher->dispatch("bootstrap.postrun", null);

    } 
```

我的问题是，如何在 ZF 控制器中使用它？

感谢您的任何帮助。此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:27:13.143

我正在回复这个问题，因为我的问题是了解如何集成这两个框架，以便我可以让 Symfony 的 EventDispatcher 在我的所有 ZF 应用程序（包括模块）上工作。

这是我的解决方案：在引导程序上..

```
public function run()
{
    $dispatcher = $this->getResource("Far_Resource_EventDispatcher");

    $dispatcher->dispatch("bootstrap.prerun", null);

    $listener = new DM_Service_StockListener();

    $dispatcher->addListener(
            "equipment.new", 
            array($listener, 'onEquipment') 
            );

    parent::run();

    $dispatcher->dispatch("bootstrap.postrun", null);

} 
```

我为 EventDispatcher 创建了一个资源，以这种方式进行实例化，它可以由引导程序全局访问，并且可以启动具有资源。资源代码为：

```
class Far_Resource_EventDispatcher extends Zend_Application_Resource_ResourceAbstract
{
    private $_dispatcher = null;

    public function init()
    {
        if ($this->_dispatcher === null ) {
            require APPLICATION_PATH . 
                '/../library/Symfony/Component/EventDispatcher/EventDispatcher.php';

            $dispatcher = new \Symfony\Component\EventDispatcher\EventDispatcher();
        } else {
            $dispatcher = $this->_dispatcher;
        }
        $this->getBootstrap()->eventDispatcher = $dispatcher;

        return $dispatcher;

    }
} 
```

在 application.ini 我设置

```
pluginPaths.Far_Resource_EventDispatcher = APPLICATION_PATH "/../library/Far/Resource/EventDispatcher.php"
resources.Far_Resource_EventDispatcher = true; 
```

我用这个例子来说明如何创建资源： [http ://blog.madarco.net/327/how-to-make-your-own-zend-framework-resource-plugin/](http://blog.madarco.net/327/how-to-make-your-own-zend-framework-resource-plugin/)

我仍在从事这项工作，但看起来它在第一次测试中运行良好......

# javascript - 如何使用 Javascript 或 jQuery 获取背景颜色？

> ID：10815542
> 
> 赞同：0
> 
> 时间：2012-05-30T11:38:06.797
> 
> 标签：javascript, jquery, css, colors

我有一个`iframe`，如果背景是黑色，我想设置白色，反之亦然。我试图通过以下方式获取背景颜色：

```
$("#id").css('background') 
```

和

```
$("#id").css('background-color') 
```

和

```
$("#id").css('backgroundColor') 
```

但它们都返回透明。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:46:16.853

您需要查看 iframe 主体的背景，而不是`<iframe>`元素本身的背景。

```
var bgcolor = $(document.getElementById('iframeId').contentWindow.document.body).css('background-color'); 
```

（如果 iframe 内容来自与您不同的域，则不起作用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:47:38.980

我认为你可以走父母，直到你得到一个不透明的背景颜色：

```
var elm = $("#id")[0],
    bg;

do {

    bg = $(elm).css( "backgroundColor" );
    elm = elm.parentNode;
} while( elm && bg.toLowerCase() === "transparent" );

console.log( bg ); 
```

# python - Pylint 在输出中显示无效的变量名

> ID：10815549
> 
> 赞同：58
> 
> 时间：2012-05-30T11:38:25.043
> 
> 标签：python, pylint

我制作了一个简单的 python 脚本来在网站上发布数据。

```
#Imports

url_to_short = sys.argv[1]

post_url = 'https://www.googleapis.com/urlshortener/v1/url'
headers = {'Content-Type': 'application/json'}

data = {'longUrl': url_to_short}
post_data = json.dumps(data)

req = urllib2.Request(post_url, post_data, headers)
resp = urllib2.urlopen(req)

if resp.getcode() == 200:  
    content = json.loads(resp.read())

#Other stuff 
```

现在我想让我们用`pylint`工具检查我的脚本的编码标准。

我的`pylint`输出如下：

```
************* Module post
C:  1,0: Missing docstring
C:  6,0: Invalid name "url_to_short" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
C:  8,0: Invalid name "post_url" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
C:  9,0: Invalid name "headers" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)

# Other stuff 
```

现在，我的问题是为什么`pylint`将我的变量名显示为`Invalid name`. 以这种方式命名变量是错误的编码约定。

我[完整的 pylint 输出](http://pastie.org/3994703)。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-30T11:45:30.557

由于您的代码不包含在类或函数中，因此期望这些变量是[常量](http://www.python.org/dev/peps/pep-0008/#constants)，因此它们应该是大写的。

您可以阅读[PEP8](http://www.python.org/dev/peps/pep-0008/)以获取更多信息。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-30T11:47:17.997

编辑：正如其他人所提到的，pylint 期望全局变量应该是大写的。如果警告真的困扰你，你可以通过将这样的小片段包装`main()`在 -function 中然后使用`if __name__ == "__main__"`-convention 来规避它们。或者，如果您关心，您可以修改 pylint 用于验证变量名称的正则表达式。

来自 Pylint 的[开发人员](http://www.logilab.org/4736)。

> 在这种情况下，Pylint 告诉我这些变量似乎是常量，应该全部大写。该规则实际上是 Logilab 中创建 Pylint 的人员所特有的命名约定。这就是他们选择命名这些变量的方式。您也可以创建自己的内部命名约定，但出于本教程的目的，我们希望坚持 PEP-8 标准。在这种情况下，我声明的变量应该遵循所有小写的约定。适当的规则类似于：“应该匹配 [a-z_][a-z0-9_]{2,30}$”。注意正则表达式中的小写字母（az 与 AZ）

您可以通过运行来测试它： `pylint --const-rgx='[a-z_][a-z0-9_]{2,30}$' x.py`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-30T11:46:51.027

这是因为`url_to_short`是在全局命名空间中声明的，而 pylint 需要将全局变量（例如常量）命名为`ALL_UPPERCASE`.
因此，它会检查您的变量名称是否与用于全局变量的正则表达式匹配，即：（`(([A-Z_][A-Z0-9_]*)|(__.*__))$`注意`A-Z`范围）。因此`Invalid name`错误。

# objective-c - 在 UITableView 数据源中使用“commitEditingStyle”时显示另一个按钮

> ID：10815550
> 
> 赞同：0
> 
> 时间：2012-05-30T11:38:29.323
> 
> 标签：objective-c, ios

我想在默认的“删除”按钮下方显示一个“编辑”按钮，当您在表格的数据源上实现“commitEditingStyle”时，该按钮会在单元格上显示一个滑动手势。

这是否可能仅通过实现“commitEditingStyle”或者我必须实现我自己的方式来显示单元格上的按钮？如果是，我将如何处理提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:20:30.533

是的，您必须`UITableViewCells`通过自定义`UITableViewCells`.

就您的要求而言，我认为在“删除”按钮下方显示“编辑”按钮不是一个好主意，因为一个接一个地垂直容纳两个按钮可能会让用户失望，无法做出所需的触摸动作。

我的意思是说，用户可能想要触摸编辑，但由于连续放置自定义编辑/删除按钮，删除按钮可能会被点击，这也是危险且不可接受的。当然，它会导致用户每次进行任何编辑时都要小心谨慎。

# sql - SQL过程 - 根据其他表上的计数更改表列的值

> ID：10815552
> 
> 赞同：3
> 
> 时间：2012-05-30T11:38:44.083
> 
> 标签：sql, sql-server

我有两张桌子，`property`和`component`。`component.id_property = property.id`.

我正在尝试创建一个过程，它计算所选属性上的组件，如果所选属性没有组件，它会更改`property.id_state`为 1。

```
create PROCEDURE property_statement_change AS
BEGIN
declare @value int;

select 
    @value = count(c.value)
from
    component c
where
    c.id_property = 1
group by c.id_property

IF (@value = 0)
  UPDATE property
  SET id_state = 1
  WHERE property.id = 1
END 
```

如果我执行存储的产品，它不会改变任何东西，但选择和更新也可以正常工作。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:00:24.413

就像评论中所说的那样，值是 NULL 而不是 0，所以这里是代码：

```
create PROCEDURE property_statement_change AS
BEGIN
declare @value int;

select 
    @value = count(c.value)
from
    component c
where
    c.id_property = 1
group by c.id_property

IF (@value is NULL)
  UPDATE property
  SET id_state = 1
  WHERE property.id = 1
END 
```

# c++ - 如何在深度缓冲区中获取先前的值？

> ID：10815557
> 
> 赞同：0
> 
> 时间：2012-05-30T11:39:14.163
> 
> 标签：c++, opengl, glsl, depth-buffer

我怎么能做下一个算法？：

```
if(Color.a < 0.9)
    gl_FragDepth = gl_PrevFragDepth;
else
    gl_FragDepth = gl_FragCoord.z; 
```

我可以 `glDepthMask(false);`用`alpha < 1`. 如果多边形有像素`alpha = 1`并且`alpha < 1`我有不正确的渲染图片。我需要它来呈现包含任何 alpha 值的文本掩码！

我不能使用深度纹理，因为我需要实时使用深度缓冲区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:59:28.517

> 我怎么能做下一个算法？：

在 OpenGL-4 中，您可以使用片段着色器中的深度纹理写入来做到这一点。但是性能会很糟糕，因为 GPU 针对收集访问进行了优化，而不是分散访问，但是这正是您想要做的。

使用 OpenGL-3 及以下您无法做到这一点。对不起。

# c# - 哪个更好？数组、ArrayList 或 List （在性能和速度方面）

> ID：10815565
> 
> 赞同：22
> 
> 时间：2012-05-30T11:39:37.637
> 
> 标签：c#, arrays, performance, list, arraylist

我需要快速处理我的页面。要添加的值的计数将是动态的。

以上哪一项是首选？有正当理由的支持。

编辑：例如：

```
string str = "a,b,c"; //Count of the number of elements in str is not fixed
string[] arr = str.Split(','); 
```

或者，

```
ArrayList al = new ArrayList();
al.Add(str.Split(',')); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-30T11:53:47.980

`List<T>`通常应该优先于`ArrayList`

*   值类型更快，因为它避免了装箱。
*   强类型元素

如果您希望向调用者公开的列表是不可变的，则两者都支持`List<T>`和`ArrayList`：

```
List<T>.AsReadOnly()
ArrayList.ReadOnly(ArrayList list); 
```

您的问题询问在 and 之间`ArrayList`进行选择`List<T>`，但是您的示例显示了一个数组，两者都不是。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-30T11:40:40.247

“不可变”集合的数组， `List<T>`用于可变集合。

*   “不可变”集合 - 仅在创建时更改，稍后阅读。
*   可变集合 - 一直有很多变化

性能统计数据（Array vs List vs ReadonlyCollection）：

```
 Array                List        ReadOnlyCollection         Penalties      Method
00:00:01.3932446    00:00:01.6677450    00:00:06.2444633    1 vs  1,2  vs  4,5   Generate
00:00:00.1856069    00:00:01.0291365    00:00:02.0674881    1 vs  5,5  vs 11,1   Sum
00:00:00.4350745    00:00:00.9422126    00:00:04.5994937    1 vs  2,2  vs 10,6   BlockCopy
00:00:00.2029309    00:00:00.4272936    00:00:02.2941122    1 vs  2,1  vs 11,3   Sort 
```

源代码：

```
interface IMethods<T>
{
  T Generate(int size, Func<int, int> generator);
   int Sum(T items);
   T BlockCopy(T items);
   T Sort(T items);
}

class ArrayMethods:IMethods<int[]>
{
  public int[] Generate(int size, Func<int, int> generator)
  {
    var items = new int[size];
    for (var i = 0; i < items.Length; ++i)
      items[i] = generator(i);
    return items;
  }
  public int Sum(int[] items)
  {
    int sum = 0;
    foreach (var item in items)
      sum += item;
    return sum;
  }
  public int[] BlockCopy(int[] items)
  {
    var res = new int[items.Length / 2];
    Buffer.BlockCopy(items, items.Length / 4 * sizeof(int), res, 0, res.Length * sizeof(int));
    return res;
  }
  public int[] Sort(int[] items)
  {
    var res = new int[items.Length];
    Buffer.BlockCopy(items, 0, res, 0, items.Length * sizeof(int));
    return res;
  }
}
class ListMethods : IMethods<List<int>>
{
  public List<int> Generate(int size, Func<int, int> generator)
  {
    var items = new List<int>(size);
    for (var i = 0; i < size; ++i)
      items.Add(generator(i));
    return items;
  }
  public int Sum(List<int> items)
  {
    int sum = 0;
    foreach (var item in items)
      sum += item;
    return sum;
  }
  public List<int> BlockCopy(List<int> items)
  {
    var count = items.Count / 2;
    var res = new List<int>(count);
    var start = items.Count / 4;
    for (var i = 0; i < count; ++i)
      res.Add(items[start + i]);
    return res;
  }
  public List<int> Sort(List<int> items)
  {
    var res = new List<int>(items);
    res.Sort();
    return res;
  }
}
class ReadOnlyCollectionMethods:IMethods<ReadOnlyCollection<int>>
{
  public ReadOnlyCollection<int> Generate(int size, Func<int, int> generator)
  {
    return new ReadOnlyCollection<int>(Enumerable.Range(0, size).Select(generator).ToList());
  }

  public int Sum(ReadOnlyCollection<int> items)
  {
    int sum = 0;
    foreach (var item in items)
      sum += item;
    return sum;
  }

  public ReadOnlyCollection<int> BlockCopy(ReadOnlyCollection<int> items)
  {
    return new ReadOnlyCollection<int>(items.Skip(items.Count / 4).Take(items.Count / 2).ToArray());
  }
  public ReadOnlyCollection<int> Sort(ReadOnlyCollection<int> items)
  {
    return new ReadOnlyCollection<int>(items.OrderBy(s => s).ToList());
  }
}

static class Program
{
  static Tuple<string, TimeSpan>[] CheckPerformance<T>(IMethods<T> methods) where T:class
  {
    var stats = new List<Tuple<string, TimeSpan>>();

    T source = null;
    foreach (var info in new[] 
      { 
        new {Name = "Generate", Method = new Func<T, T>(items => methods.Generate(10000000, i => i % 2 == 0 ? -i : i))}, 
        new {Name = "Sum", Method =  new Func<T, T>(items => {Console.WriteLine(methods.Sum(items));return items;})}, 
        new {Name = "BlockCopy", Method = new Func<T, T>(items => methods.BlockCopy(items))}, 
        new {Name = "Sort", Method = new Func<T, T>(items => methods.BlockCopy(items))}, 
        new {Name = "Sum", Method =  new Func<T, T>(items => {Console.WriteLine(methods.Sum(items));return items;})}, 
      }
     )
    {
      int count = 10;
      var stopwatch = new Stopwatch();
      stopwatch.Start();
      T res = null;
      for (var i = 0; i < count; ++i)
        res = info.Method(source);
      stopwatch.Stop();
      source = res;
      stats.Add(new Tuple<string, TimeSpan>(info.Name, stopwatch.Elapsed));
    }
    return stats.ToArray();
  }

  static void Main()
  {
    var arrayStats = CheckPerformance(new ArrayMethods());
    var listStats = CheckPerformance(new ListMethods());
    var rcStats = CheckPerformance(new ReadOnlyCollectionMethods());

    Console.WriteLine("       Array                List        ReadOnlyCollection         Penalties      Method");
    for(var i = 0; i < arrayStats.Length; ++i)
    {
      Console.WriteLine("{0}    {1}    {2}    1 vs {3,4:f1}  vs {4,4:f1}   {5}", arrayStats[i].Item2, listStats[i].Item2, rcStats[i].Item2, 
        listStats[i].Item2.TotalSeconds / arrayStats[i].Item2.TotalSeconds,
        rcStats[i].Item2.TotalSeconds / arrayStats[i].Item2.TotalSeconds, arrayStats[i].Item1);
    }
  } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-30T11:43:20.887

`List <T>` 总是会比 arrayList 快。`List <T>'s`不必将添加到它们的值装箱。

`ArrayList`仅“接受”对象，这意味着虽然您可以将任何想要的对象添加到列表中，但必须将其装箱（由 CLR 隐式），然后在需要时必须再次拆箱（由您显式）价值。

编辑：[这是一个不错的链接](http://allantech.blogspot.com/2007/03/performance-arraylist-vs-list.html)

# c# - 将数据从客户端发送到服务器有效，但服务器到客户端不

> ID：10815566
> 
> 赞同：1
> 
> 时间：2012-05-30T11:39:41.433
> 
> 标签：c#, sockets, chat, tcpclient

我知道`Flush`对网络流进行操作什么都不做，

这就是为什么我定义`StreamWriter`了将网络流作为构造函数参数，然后我试图向客户端发送信件`S`以告诉他他的连接成功。

```
private StreamReader srReceiver;
private StreamWriter swSender;

// Occures when a new client is accepted
private void AcceptClient()
{
    srReceiver = new System.IO.StreamReader(TcpClient.GetStream());
    swSender = new System.IO.StreamWriter(TcpClient.GetStream());

    if (TcpClient.Available > 0)
    {
            char [] buff0 = new char[TcpClient.Available];

            // Read the account information from the client
            srReceiver.Read(buff0, 0, TcpClient.Available);

            sUserNumber = new string(buff0);

            // We got a response from the client
            if (!string.IsNullOrEmpty(sUserNumber))
            {
                OraEntities Ent = new OraEntities();

                var user = Ent.USERS.FirstOrDefault(usr => usr.USER_NUMBER == sUserNumber);

                // Check user validity
                if (user == null)
                {
                    Console.WriteLine("No user has this number: " + sUserNumber);
                    return;
                }
                else
                {
                    // Add the user to Active Users List and start listening for messages from him
                    Server.AddUser(this, sUserNumber);

                    // S means connected successfully
                    swSender.WriteLine("S");
                    swSender.Flush();

                    // Start the new tread that hosts the listener
                    thrReceive = new Thread(HandleInput);
                    thrReceive.Start();
                }
            }
            else
            {
                CloseConnection();
                return;
            }
    }
} 
```

但是在线上没有发送任何内容（没有运行时异常）。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:16:26.183

这是我的测试代码，显示它有效：

服务器：

```
namespace SocketTestServer
{
    class Program
    {
        static void Main(string[] args)
        {
            TcpListener lis = new TcpListener(IPAddress.Parse("127.0.0.1"), 2509);
            lis.Start();
            lis.BeginAcceptTcpClient(new AsyncCallback(acceptClient), lis);
            Console.ReadKey();
        }

        private static void acceptClient(IAsyncResult ar)
        {
            TcpListener lis = ar.AsyncState as TcpListener;
            using (TcpClient cli = lis.EndAcceptTcpClient(ar))
            {
                using (NetworkStream ns = cli.GetStream())
                {
                    byte[] toSend = Encoding.ASCII.GetBytes("S\r\n");
                    ns.Write(toSend, 0, toSend.Length);
                    Console.WriteLine("Client connected");
                }
            }
        }
    }
} 
```

客户：

```
namespace SocketTestClient
{
    class Program
    {
        static void Main(string[] args)
        {
            using (TcpClient client = new TcpClient())
            {
                client.Connect(IPAddress.Parse("127.0.0.1"), 2509);
                using (NetworkStream ns = client.GetStream())
                {
                    StreamReader sr = new StreamReader(ns);
                    Console.WriteLine(sr.ReadLine());
                    Console.ReadLine();
                }
            }

        }
    }
} 
```

下面的屏幕截图显示工作：

![客户端/服务器工作截图](../Images/aaf8aa4598ee041c8fc25c11f8af1d31.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:32:04.043

我昨天遇到了类似的问题。下面是 [从套接字读取数据、发送响应和关闭](https://stackoverflow.com/questions/10806577/read-data-from-socket-send-response-and-close)的问题。

这是最后一个答案，虽然我需要等待 2 天，但无法接受。

希望这会有所帮助

# forms - 有没有办法在 symfony2 中围绕输入包装标签？

> ID：10815568
> 
> 赞同：7
> 
> 时间：2012-05-30T11:39:46.363
> 
> 标签：forms, symfony, label, twig

关于 symfony2 表单组件及其模板的问题：

我有一堆复选框可以设置样式（一个表单行中大约有 10 个）。通常我以`<label>`这种方式使用标签：`<label><input/> some text</label>`但我找不到在表单模板（form_div_layout.html.twig）中更改它的方法。我什至找不到将任何标签包装在输入小部件及其标签周围的方法，而且我总是以这样的标记结束：`<input/> <some_tag><label>some text</label></some_tag>`或者`<some_tag><input/></some_tag> <label>some text</label>`至少可以说这不是很有用......

谷歌了很多，但找不到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T21:58:29.917

Whistlegreg 是正确的，您需要覆盖树枝表单模板。但是，您不需要删除该`{% block generic_label %}`块。如果您需要有关如何覆盖模板的帮助，请参阅他的回答。

为了用标签包装复选框输入标签，第一步是覆盖`{% block choice_widget %}`块并从打印出单独标签`{{ form_label(child) }}`的部分中删除该行。`{% if expanded %}`

```
{% block choice_widget %}
{% spaceless %}
    {% if expanded %}
        <div {{ block('widget_container_attributes') }}>
        {% for child in form %}
            {{ form_widget(child) }}
        {#  {{ form_label(child) }} <--------------------- remove this line #}  
        {% endfor %}
        </div>
    {% else %}
    <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
        {% if empty_value is not none %}
            <option value="">{{ empty_value|trans }}</option>
        {% endif %}
        {% if preferred_choices|length > 0 %}
            {% set options = preferred_choices %}
            {{ block('widget_choice_options') }}
            {% if choices|length > 0 and separator is not none %}
                <option disabled="disabled">{{ separator }}</option>
            {% endif %}
        {% endif %}
        {% set options = choices %}
        {{ block('widget_choice_options') }}
    </select>
    {% endif %}
{% endspaceless %}
{% endblock choice_widget %} 
```

现在您只需要处理打印`{% block checkbox_widget %}`块中的标签。

```
{% block checkbox_widget %}
{% spaceless %}
    <label  for="{{ id }}"><input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock checkbox_widget %} 
```

您将需要这样做，`{% block radio_widget %}`因为它现在不会有标签。

```
{% block radio_widget %}
{% spaceless %}
    <label  for="{{ id }}"><input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />{{ label|trans }}</label>
{% endspaceless %}
{% endblock radio_widget %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T17:31:30.277

我认为这就是你要找的东西： [http ://symfony.com/doc/current/book/templating.html#overriding-bundle-templates](http://symfony.com/doc/current/book/templating.html#overriding-bundle-templates)

您可以通过在 app/resources 文件夹中创建另一个同名文件来覆盖任何默认的树枝模板。

在您的情况下，您想覆盖 form_div_layout.html.twig 模板，将其从捆绑包复制到 app/Resources/TwigBundle/views/Form/form_div_layout.html.twig，自定义，symfony 将使用它而不是默认值。

编辑：一旦您覆盖了模板，您可以修改`{% block checkbox_widget %}`以使用 twig vars 用标签标签包装输入

```
<label{% for attrname,attrvalue in attr %} {{attrname}}="{{attrvalue}}"{% endfor %}>
  {{label|trans }} 
  <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} /> 
</label> 
```

您还需要删除“generic_label”定义，这意味着每个其他块都需要修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T16:58:05.913

可以为特定表单小部件类型的行定义块，例如`{% block checkbox_row %}`. 我在这里发现了这个：http: [//forum.symfony-project.org/viewtopic.php?f=23 &t=57986#p153546](http://forum.symfony-project.org/viewtopic.php?f=23&t=57986#p153546)

然后将标签包裹在复选框的小部件周围所需的所有内容如下：

```
{% block checkbox_row %}
{% spaceless %}
    <div>
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        <label{% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>{{ label|trans({}, translation_domain) }}
        {{ form_widget(form) }}
        {% if label is empty %}
            {% set label = name|humanize %}
        {% endif %}
        </label>
        {{ form_errors(form) }}
    </div>
{% endspaceless %}
{% endblock checkbox_row %} 
```

标签代码已从 复制并粘贴`{% block form_label %}`。当我使用 Zurb 的 Foundation 框架时，我已将表单错误放在小部件下方。

单选按钮的代码更复杂，因为`{% block radio_row %}`它似乎不存在，所以你必须接受 Whistlegreg 的建议并编辑该`{% block choice_widget %}`块，在 Symfony 2.1 中这实际上是现在的`{% block choice_widget_expanded %}`. 这是我的代码：

```
{% block choice_widget_expanded %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
    {% for child in form %}
        {% set child_label = child.get('label') %}
        {% if child_label is not sameas(false) %}
            {% set child_id = child.get('id') %}
            {% set child_compound = child.get('compound') %}
            {% set child_required = child.get('required') %}
            {% set child_label_attr = child.get('label_attr') %}
            {% if not child_compound %}
                {% set child_label_attr = child_label_attr|merge({'for': child_id}) %}
            {% endif %}
            {% if child_required %}
                {% set child_label_attr = child_label_attr|merge({'class': (child_label_attr.class|default('') ~ ' required')|trim}) %}
            {% endif %}
            <label{% for attrname, attrvalue in child_label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
        {% endif %}
        {{ form_widget(child) }}
        {% if child_label is not sameas(false) %}
            {% if child_label is empty %}
                {% set child_label = name|humanize %}
            {% endif %}
            {{ child_label|trans({}, translation_domain) }}
            </label>
        {% endif %}
    {% endfor %}
    </div>
{% endspaceless %}
{% endblock choice_widget_expanded %} 
```

在 Symfony 2.1.9 DEV 中测试和工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T18:48:15.607

我认为您可以通过更改 form_row 块来做到这一点。

尝试这样的事情：

```
{% block form_row %}
{% spaceless %}
    <label>
        {{ form_widget(form) }}
    </label>
{% endspaceless %}
{% endblock form_row %} 
```

但请注意，这绝对不是一个非常灵活的解决方案......
您可能应该只将它用于特定类型，而不是全部使用。
无论如何，您必须使用`form_row`它才能正常工作。

# php - 在 php 类中使用 PDO 连接

> ID：10815571
> 
> 赞同：0
> 
> 时间：2012-05-30T11:39:58.543
> 
> 标签：php, pdo

我正在努力获得一些我认为应该很容易工作的东西。我创建了一个使用 PDO 连接到数据库的类，并希望最初只创建一个函数来将直接 SQL 查询传递给它。

```
class PDO_MySQL
{
    private $_db;
    private $connection_string;

    public function __construct()
    {
        $this->_db = new PDO($this->connection_string, DB_USERNAME, DB_PASSWORD);
    }
    public function DB_Query($sql)
    {
        $query = $this->_db->query($sql);
        return $query;
    }
} 
```

然后在我的代码中：

```
$db = new PDO_MySQL();
$people = $db->DB_Query("SELECT * FROM about_us");
print_r($people); 
```

但这又回来了

```
PDOStatement Object ( [queryString] => SELECT * FROM about_us ) 
```

当我正在寻找它以返回结果集时。

连接字符串已设置并且连接很好我刚刚删除了这篇文章的多余代码。

第二个问题，这是最好的方法吗？我正在从 MySQLi 和非基于类的脚本中迁移出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:48:37.363

代替

```
public function DB_Query($sql)
{
    $query = $this->_db->query($sql);
    return $query;
} 
```

你所要做的：

```
public function DB_Query($sql)
{
    $query = $this->_db->prepare($sql);
    $query->execute();
    return $query->fetchAll();
} 
```

因为

> PDO::query — 执行 SQL 语句，将结果集作为 PDOStatement 对象返回

# android - Facebook API 在应用程序/服务器上加载好友列表

> ID：10815572
> 
> 赞同：0
> 
> 时间：2012-05-30T11:39:59.450
> 
> 标签：android, asp.net, ios, facebook, facebook-graph-api

我正在开发一个应用程序，包括用于用户登录的 facebook 单点登录程序。

该应用程序包含许多社交交互点，这些点依赖于向用户提供已经在使用该应用程序的朋友列表并显示来自我的后端的数据以与每个朋友一起使用。

我很好奇人们的事情是这样做的最佳过程......

一种单独的方法，我的应用程序从 fb 加载朋友列表，然后在我的后端查询我需要与每个朋友一起显示的数据。

或者...

当用户首次登录并在服务器上执行好友查找并将批次交付给用户时，将身份验证令牌传递给服务器。

显然，第二个*应该*在客户端提供更流畅的体验，前提是服务器没有任何理由与 fb 通信缓慢。但是，将身份验证令牌扔给服务器 a) 是否安全？b）如果在服务器/客户端而不是另一个上发布新令牌，则会导致同步问题。

干杯

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:47:50.057

如何使用 ajax /`FB.api`获取好友列表，并将用户 ID 发送到服务器进行查找。您可以使用 ajax 发送数据并将数据异步加载回您的网站。

整个过程是异步完成的，因此不会影响用户对网站的体验。缓存会话的数据，这样您就不必重复调用/查找相同的数据。

# asp.net - 存储全球网站设置的最佳和最简单的地方在哪里

> ID：10815575
> 
> 赞同：0
> 
> 时间：2012-05-30T09:05:52.530
> 
> 标签：asp.net

我只是在内部 IIS7.5 专用服务器上为客户端（由 SQL 数据库支持的 ASP.NET VB）组装了一个内部数据系统。

我想将某些全局设置（例如新闻文章的年龄限制、管理员联系人等）存储在不在数据库中的文件中（即避免不必要的数据库查询）

存放这个的最佳地点在哪里？全球.asax？应用程序配置？还是自定义 XML 文件？我将如何在运行时导入这些？（可能是会话变量）

预计到达时间：另外 - 设置必须可在站点内编辑，即我尚未构建的管理部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:48:27.413

如果您需要这些设置是可编辑的，那么存储它们的最简单的地方就是在数据库表中。您已经在构建一个层来进出 CRUD 操作，因此添加这个小额外内容不会妨碍您。这也将帮助您保持 web.config 干净，并且您的支持库不需要内置额外的 app.config。

资源文件和嵌入式 app.config 文件不可编辑，因此这些首选方法不符合您的要求。您不希望人们直接（甚至通过界面）访问 web.config，因为对 web.config 的更改会导致应用程序池回收。自定义 XML 文件可以工作，但您必须构建一个单独的解析引擎才能进出它。虽然这很简单，但由于您已经为数据库的其余部分构建了访问接口，因此没有必要这样做。

如果您真的讨厌自己，您可以将两者组合成一个自定义 xml 文件，作为 XElement 存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:54:54.037

感谢您的建议。

我决定最简单的方法是在 global.asax 中设置会话变量，因为细节可能一年只需要更改几次

# javascript - Div 切换 onKeyup 并保持可见 Javascript 和 JQuery

> ID：10815576
> 
> 赞同：0
> 
> 时间：2012-05-30T11:40:14.973
> 
> 标签：javascript, jquery, toggle, onkeyup

这是我的问题：

我目前正在设计一个用于验证密码安全级别的 JavaScript 函数。输入密码后，我使用 jQuery 切换 div 的显示（默认情况下不可见），其中包含句子“您的密码是”+给定的安全级别。

一切正常，除了我`onKeyUp event`在密码输入中使用 来触发我的 div 出现。但是，自然地，按下的每个键都会切换我的 div 的可见性。结果：在密码输入中按下每个第一个键，我的 div 出现，按下下一个键，它又消失了。有没有办法在按下第一个键时切换一次 div 并防止它在按下下一个键时消失？

这是代码：

```
function password1Security()

{
    var pwd1 = document.getElementById("password1");
    var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
    var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
    var pwdsft = document.getElementById("passwordSafetyLevel1");
    {
        if (strongRegex.test(pwd1.value))
        {
            pwdsft.innerHTML = '<span style="color:green;">Safe</span>'
        } 
        else if (mediumRegex.test(pwd1.value)) 
        {
            pwdsft.innerHTML = '<span style="color:orange;">Quite Safe</span>'
        } 
        else 
        {
            pwdsft.innerHTML = '<span style="color:red;">Unsafe</span>'
        };
    }
};

<input name="password1" 
        id="password1" 
        type="password" 
        size="15" 
        maxlength="20" 
        style="width:500px; height:30px;" 
        onKeyUp="showPassSafety1()" />
<br/>
<span name="passwordSafety1" 
        id="passwordSafety1" 
        style="font-size:12pt; display:none;">Your password is <b name="passwordSafetyLevel1" id="passwordSafetyLevel1"></b>.
< /span>
<br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:49:37.820

您可以使用 jQuery`.one()`事件处理程序。 [http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:08:37.427

我相信您正在某个地方设置您的`passwordSafety1`跨度的可见性。

当你这样做时，你应该检查`length`你的`document.getElementById("password1").value`并设置它是否可见，例如取决于这个长度；避免在 none 和 block 之间切换。

# database - 实施可延期的验证

> ID：10815594
> 
> 赞同：1
> 
> 时间：2012-05-30T11:41:21.480
> 
> 标签：database, relational-database, data-modeling

我面临的任务：

输入：数据模型，通过 20 - 30 个关系表（SQL DB）呈现巨大的实体。有很多约束+参考数据链接。

任务：添加草稿模式支持，这意味着我可以在任何状态下保存对象（无需填写所有必要的字段、破坏约束等）。当我发布对象时，我必须针对所有约束对其进行验证。

有人知道如何实施草稿模式的好方法吗？由于我与客户的合同，非关系数据库并非如此。

我一直在考虑：重复表，从所有重复项中删除验证，并在同一事务中将行移动到原始表。这种方法闻起来很臭。在我的系统中，所有对象都可以序列化为 XML，我可以将它们的状态保存到 DB wile Draft 模式，再次闻起来不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:35:10.283

简单的回答：

```
CHECK (is_draft OR (condition_one AND condition_two AND condition_three)) 
```

# objective-c - 当绑定的 NSArrayController 选择是多个时，如何禁用 NSMenuItem？

> ID：10815597
> 
> 赞同：1
> 
> 时间：2012-05-30T11:41:37.980
> 
> 标签：objective-c, cocoa, interface-builder

这就是我根据 NSArrayController 中的项目选择启用/禁用 NSMenuItem 的方式。

![在此处输入图像描述](../Images/90e16b0c78739de614c30b1f66c7b925.png)

However I would like to disable the NSMenuItem in one more case: when the selection is multiple. 换句话说，如果选择了多个项目，则应将其禁用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:37:27.477

@bijan 的 transformValue: 方法可以改进：

```
- (id)transformedValue:(id)value{

    if(value == nil)
    {
        return @(NO);
    }

    if([value respondsToSelector:@selector(unsignedIntegerValue)] == NO)
    {
        return @(NO);
    }

    NSUInteger count = [value unsignedIntegerValue];
    return @(count > 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:14:05.913

您可以为此子类化 NSValueTransformer！

实现看起来像这样：

```
@implementation CountToEnabledTransformer

+ (Class)transformedValueClass {

    return [NSNumber class];
}
+ (BOOL)allowsReverseTransformation {

    return NO;
}
- (id)transformedValue:(id)value{

    int count = value;
    BOOL boolValue = 0;

    if ((count > 1) || (count == 0)) {
        boolValue = 0;
    }else {
        boolValue = 1;
    }

    NSNumber *boolNumber = [NSNumber numberWithBool:boolValue];

return boolNumber;
}
@end 
```

它接受`@count`值，执行 if 语句并返回适当的布尔值，以将您的`enabled`属性绑定到。

不要忘记注册你新创建的 NSValueTransformer 子类：

```
[NSValueTransformer setValueTransformer:[[CountToEnabledTransformer alloc] init] forName:@"CountToEnabledTransformer"]; 
```

这样做的好地方是`- (void)applicationDidFinishLaunching`，所以它已经注册了，当你 nib 尝试绑定它时！

之后，只需在 IB 绑定检查器的相应文本字段中输入 NSValueTranformer 的子类名称。

# css - 选择框中的水平滚动条不起作用

> ID：10815607
> 
> 赞同：0
> 
> 时间：2012-05-30T11:42:42.323
> 
> 标签：css, ruby-on-rails, scrollbar

尝试在选择框中添加水平滚动条。选择框的某些项目有大文本，我看不到。所以我尝试按如下方式添加css类：

```
.selector_box{
    overflow:auto;
}

<div class="label_input">
    <%= f.label(:sample, "Books *", :class => 'label_required_field') %>
    <%= f.collection_select(:sample, @books.all, :id, :name, {:multiple => true, :class => 'selector_box'} )%>
</div> 
```

上面的代码对我不起作用，也找不到设置水平滚动条的方法。那么如何添加水平滚动条以选择具有自动调整大小的框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:32:40.143

给你的选择框一个宽度，而不是溢出：自动；有溢出：滚动；

# html - 需要文字平铺在 WordPress 网站上

> ID：10815608
> 
> 赞同：0
> 
> 时间：2012-05-29T19:29:37.323
> 
> 标签：html, wordpress

我正在为一个朋友开发一个网站，我需要一些 HTML 帮助。我需要将标题平放在标题图像上，但我自己似乎无法到达一行。有什么帮助吗？我尝试了几种不同的方法，但没有任何效果。网址是[leschwaller.com](http://leschwaller.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:37:34.727

`margin-right: 270px;`从`site-title:`样式中删除。约 509 行`http://leschwaller.com/wp-content/themes/twentyeleven/style.css`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:38:16.737

在你的 style.css 你需要改变

```
#site-title {
margin-right: 270px;
padding: 3.65625em 0 0;
} 
```

至

```
#site-title {
margin-right: 10px;
padding: 3.65625em 0 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:55:52.483

其他两个答案是正确的，因为 CSS 规则需要减少边距。

但是，如果您试图让图像出现在网站标题的正下方，那么您仍然可以在其中有一行用于网站描述。查看页面的源代码，您会看到`<h2>`导致该间隙出现的空白。

有两种方法可以摆脱它 - 快速而肮脏的方法，以及正确的方法。快速而肮脏的方法是简单地用 CSS 隐藏它：

```
#site-description { display: none; } 
```

*正确的方法*是在 Wordpress中创建一个[子主题](http://codex.wordpress.org/Child_Themes)并对其进行修改以`<h2>`从标记中删除。

大致来说，这就是你要做的：

*   在您的 wp-content/themes 文件夹中创建一个新目录，您可以随意命名它（例如“作者”）。
*   在该目录中创建一个 style.css 文件

并把它放在它的顶部：

```
/*
Theme Name:     Author
Theme URI:      http://leschwaller.com/
Description:    Child theme for the Twenty Eleven theme 
Author:         Your name here
Author URI:     http://example.com/about/
Template:       twentyeleven
Version:        0.1.0
*/ 
```

这将这个主题设置为 TwentyEleven 的*子*主题，无论如何您都在使用它。*对此*主题进行任何您想要的修改。这样，当 Wordpress 有更新时，它会更新 TwentyEleven 而不会覆盖您的更改。但是，您可以获得 TwentyEleven 中内置的所有功能。

为此，只需将TwentyEleven 主题目录中的**header.php**复制到新的主题目录中，然后删除`<h2>`. 它在该文件的第 75 行。由于这是一个子主题，它将“继承”TwentyEleven 的其余部分，所以其他一切都会像以前一样工作。

# wcf - 用户未通过身份验证时查询 wcf 数据服务元数据

> ID：10815612
> 
> 赞同：2
> 
> 时间：2012-05-30T11:42:48.027
> 
> 标签：wcf, wcf-data-services

我需要允许用户浏览我的 wcf 数据服务元数据。在`CreateDataSource`我检查用户是否经过身份验证的覆盖中。但是，如果我请求服务获取元数据，我仍然会遇到异常，如果未经授权，用户将无法进入。

有没有一种方法可以在不进行身份验证的情况下向用户提供我的元数据？

# iphone - 如何关闭视图——Xcode

> ID：10815616
> 
> 赞同：0
> 
> 时间：2012-05-30T11:42:58.737
> 
> 标签：iphone, objective-c, macos, uiview

我创建了一个基于 NSWindowController 的窗口，它被调用...

```
view2Controller = [[View2Controller alloc] initWithWindowNibName:@"View2"];
[view2Controller showWindow:self]; 
```

这很好用，而且我有一个正常工作的窗口。
现在我需要关闭它。

```
exit(0); // closes the entire application
close(0); // does is in the documentation, but it nothing 
```

我找到了一个建议使用..

```
[self dismissModalViewControllerAnimated:YES]; 
```

，但这似乎仅适用于 UI 视图，并会产生错误。

我怎样才能关闭我在这里的窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:00:11.097

您似乎混淆了 OS X 和 iOS 编程。两者都运行 Objective-c，但只有 OS X 使用**initWithWindowNibName**。从您的标签来看，您似乎正在为 iPhone 开发。

查看有关处理**UIViews**和**UIViewControllers**的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:53:19.517

尝试`[view2Controller removeFromSuperview];`

在您的情况下，我会使用基于视图的应用程序。窗口和视图的区别在于窗口模板不创建视图控制器类和相关的用户界面文件（.xib）。它只是给你一个空白窗口。在 iOS 中只能有 1 个窗口，但可以在该窗口上显示多个视图。

基于视图的模板完成了基于窗口的模板所做的一切，此外它还创建了一个视图控制器类和该类的 xib 文件。此外，它将第一个视图控制器添加到您的窗口中。在 iOS 中，当您想要显示另一个视图时，您几乎肯定会想要另一个视图控制器类。视图控制器类可以轻松地在自身之上添加额外的视图。

由于 Window 模板为您提供 0 开头，而 View 模板为您提供 1 开头，并且您的两个视图最终需要 2，因此从 View 模板开始您的工作量会减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:22:50.087

如果你正在使用 UIWindow 你应该看看[这个](https://stackoverflow.com/questions/4544489/how-to-remove-a-uiwindow)。但是您正在使用 UIViewController，有两种解决方案：

1.）如果您`UIViewController`以 modalViewController 的形式呈现

```
[myViewController dismissModalViewControllerAnimated:YES]; 
```

2.)否则，如果您`UIViewController`从其他 UIViewController 或 UIWindow 导航，您应该尝试以下操作：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

如果你正在使用 UIView，你应该使用：`[myView removeFromSuperView];`

# django - Jenkins Cobertura 插件“源代码不可用”

> ID：10815617
> 
> 赞同：8
> 
> 时间：2012-05-30T11:43:12.337
> 
> 标签：django, continuous-integration, jenkins, code-coverage, cobertura

我正在使用**Jenkins 版本。1.466**与**Jenkins Cobertura 插件版本。1.5** . 我为 Django 项目生成了覆盖率报告。所有图表看起来都不错，但是当我想查看源代码时，我会收到警告消息：

```
Source code is unavailable. Some possible reasons are:
    This is not the most recent build (to save on disk space, this plugin only keepsthe     most recent builds source code).
    Cobertura found the source code but did not provide enough information to locate the source code.
    Cobertura could not find the source code, so this plugin has no hope of finding it. 
```

使用以下步骤生成覆盖率报告：

```
coverage run manage.py test --noinput
coverage xml -o ../reports/coverage.xml 
```

我尝试使用：

```
sed 's/filename="/filename="my\/path\//g' coverage.xml > coverage2.xml 
```

但没有帮助，Cobertura 插件没有找到不具有相对或绝对路径的源代码。

PS 如果我将源代码放入*cobertura*目录会出现一些奇怪的问题 - 显示源代码但未突出显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-09T11:02:21.303

输出 xml 文件必须与`coverage`运行的文件夹位于同一文件夹中，因此：

```
coverage xml -o coverage.xml 
```

对源文件夹的引用被放入`coverage.xml`，如果输出文件被放入另一个文件夹，对源文件夹的引用将不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:51:32.467

您是否选中了“丢弃旧版本”或某种重新克隆并从头开始选项？如果没有，您可能需要查看存档工件并将您的覆盖文件添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-05T07:40:32.597

尽管我的 .xml 位于正确的位置，但我遇到了同样的问题（源代码不可用）。这仅仅是因为我在 Jenkins 中选择了错误的构建后操作。

我首先选择了`Publish Coverage Report`，但只`Publish Cobertura Coverage Report`允许访问文件内容。

# wordpress - 我可以用 Wordpress 做到这一点吗？

> ID：10815621
> 
> 赞同：0
> 
> 时间：2012-05-30T11:43:22.970
> 
> 标签：wordpress

我正在尝试建立一个相当简单的网站，并想知道我是否可以使用 Wordpress。该网站的主要部分将是三个下拉框，其中前两个框由固定的数据列表填充。最后一个下拉列表将根据基于第二个框中的选择的特定列表进行填充。具有三个选择的网页将被提交，一个简单的算法将基于这些选择运行，并根据算法的输出显示一个网页。显示的网页也将由算法中的一些数据填充。 

我可以用 Wordpress 做到这一点吗？ 

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:00:32.463

嗯，您所描述的（3 个输入框在提交表单和输出某些值之间具有简单的 AJAX 依赖关系）听起来您根本不应该使用 CMS。在您的情况下，我可能会构建一个简单的 HTML 文件，使用 JQuery 等公共 JavaScript 库包含一些 AJAX 逻辑，并在服务器上使用 PHP 等脚本语言处理表单提交。

当然，您可以将 Wordpress 用于任何类型的网站，但如果您没有具有稳定新内容流的真实页面，我不明白您为什么要费心设置它。

# r - 在r中同时（并行）在后台运行多个作业

> ID：10815622
> 
> 赞同：5
> 
> 时间：2012-05-30T11:43:34.303
> 
> 标签：r, parallel-processing

我想运行一个需要大量时间的程序。我想编写一个可以并行运行的函数（我是 Windows 中的图形界面用户）。该函数将任务划分为 n 个子任务，并执行最终的共识任务。我想并行运行 n 个任务（在同一程序窗口中同时），然后合并输出。下面只是一个例子：

```
ptm <- proc.time()
j1 <- cov(mtcars[1:10,], use="complete.obs") # job 1
j2 <- cov(mtcars[11:20,], use="complete.obs") # job 2
j3 <- cov(mtcars[21:32,], use="complete.obs") # job 3
proc.time() - ptm

out <- list (j1 = j1, j2 = j2, j3 = j3) 
```

我知道在 unix 中“&”通常允许作业在后台运行。R中有类似的方法吗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:40:40.443

您可以使用`mclapply`或`clusterApply` 并行启动多个功能。它们实际上并不在后台：R 将等到它们全部完成（就像您`wait`在 Unix shell 中使用 , 在后台启动进程之后一样）。

```
library(parallel)
tasks <- list(
  job1 = function() cov(mtcars[1:10,],  use="complete.obs"),
  job2 = function() cov(mtcars[11:20,], use="complete.obs"),
  job3 = function() cov(mtcars[21:32,], use="complete.obs"),
  # To check that the computations are indeed running in parallel.
  job4 = function() for (i in 1:5) { cat("4"); Sys.sleep(1) },
  job5 = function() for (i in 1:5) { cat("5"); Sys.sleep(1) },
  job6 = function() for (i in 1:5) { cat("6"); Sys.sleep(1) }
)

# Using fork()
out <- mclapply( 
  tasks, 
  function(f) f(), 
  mc.cores = length(tasks) 
)

# Equivalently: create a cluster and destroy it.
# (This may work on Windows as well.)
cl <- makeCluster( length(tasks) )
out <- clusterApply( 
  cl,
  tasks,
  function(f) f()
)
stopCluster(cl) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:24:19.560

我在使用`plyr`包函数和由`snow`. 在[一篇博文](http://www.numbertheory.nl/2011/11/14/parallelization-using-plyr-loading-objects-and-packages-into-worker-nodes/)中，我描述了如何做到这一点。在 R 2.14 之后，并行处理是通过`parallel`包分发的 R 核心的一部分。我没有尝试让 plyr 使用由 生成的后端`parallel`，但我认为这应该可以。

# visual-studio-2010 - TFS VS2010 构建代理许可

> ID：10815623
> 
> 赞同：0
> 
> 时间：2012-05-30T11:43:37.480
> 
> 标签：visual-studio-2010, tfs, licensing, continuous-integration

我只是想知道是否有人可以对这个问题给出具体的答案。

我们刚刚将 TFS 安装到开发服务器上，为了正确构建我们的 Web 项目，我们还需要在其中安装 VS2010 的副本（如 MS 所述）。

有谁知道 MSDN 许可证是否会涵盖它，因为它不是“生产”机器？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:30:52.773

VS 2010[许可白皮书](http://www.microsoft.com/en-us/download/details.aspx?id=13350)有一个关于 Team Foundation Build 方案的部分。在我阅读时，定义构建的开发人员需要拥有适当的 VS 许可证，仅此而已。构建机器不需要额外的 VS 许可证。

# c# - System.Data.DataColumn 中可为空的唯一约束

> ID：10815629
> 
> 赞同：1
> 
> 时间：2012-05-30T11:43:58.297
> 
> 标签：c#, asp.net, .net, database, unique-constraint

在我的数据库中，我有一个这样的表

```
table foo
int pk
int someFK NULL 
```

在 someFK 上具有外键约束，在 someFK 上具有唯一约束。这意味着在我拥有的 MySQL 数据库中，除非我在 someFK 中指定 NULL，否则在相应的表中当然必须有一行。但是，即使打开了唯一约束，我也可以在 someFK 中有几行带有 NULL 的行。

在我的代码中，我使用 System.Data 命名空间并这样做：

```
DataTable table = new DataTable("Foo");

DataColumn col = null;

DataColumn[] primaryKey = new DataColumn[1];

col = table.Columns.Add(FooPropertyName, typeof(int));
col.Unique = true;
col.AutoIncrement = true;
primaryKey[0] = col;
table.PrimaryKey = primaryKey;

col = table.Columns.Add(SomeFkPropertyName, typeof(int));
col.Unique = true;
col.AutoIncrement = false; 
```

但是，如果我将两个 DataRows 添加到我的 DataTable 中，并且这两个具有不同的主键但在 someFK 列上都有 DBNull，我会收到一条错误消息 Exception Type: System.Data.ConstraintException Exception Message: Column 'somefk' is constrained to是独一无二的。值 '' 已经存在。

这不是我所期望的，所以我想知道是否有人知道如何解决这个问题（不删除独特的属性）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:00:00.077

您需要告诉 DataTable 空值被接受。

```
col = table.Columns.Add(SomeFkPropertyName, typeof(int)); 
col.Unique = true; 
col.AutoIncrement = false; 
col.AllowDBNull = true; 
```

更多在这里[AllowDBNull](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.allowdbnull.aspx)

**编辑 1**

你是对的还是坏了，

```
 var table = new DataTable("Foo");
        table.Columns.AddRange(new []
        {
            new DataColumn("FooPropertyName", typeof(int))
            {
                Unique = true,
                AutoIncrement = true
            },
            new DataColumn("SomeFkPropertyName")
            {
                Unique = true,
                AllowDBNull = true
            },
        });
        table.PrimaryKey = new[] {table.Columns[0]};

        table.Rows.Add(0, 0);
        table.Rows.Add(1, 1);
        table.Rows.Add(2, DBNull.Value);
        table.Rows.Add(3, DBNull.Value); // Exception here 
```

**编辑 2**

这也不起作用：/

```
private class MyDbNull
{
    public static MyDbNull Value = new MyDbNull();
    public override bool Equals(object obj)
    {
        return false;
    }

    public override int GetHashCode()
    {
        return 0;
    }
}

table.Rows.Add(2, MyDbNull.Value);
table.Rows.Add(3, MyDbNull.Value); 
```

# linux - 在目录中查找文件但不在子目录中搜索

> ID：10815632
> 
> 赞同：0
> 
> 时间：2012-05-30T11:44:13.087
> 
> 标签：linux, find

我有一个目录 LOG 的问题。因为那里有这么多的文件和目录。我想找到并删除以 PS 开头的文件。但它不应该检查子目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:47:56.560

使用`find`带有 `maxdepth`选项的工具：

```
find LOG-PATH -maxdepth 1 -regextype "posix-egrep" -regex '.*/PS.*' -type f -exec rm {} \; 
```

# c# - DotNetZip - 在 C# 中调用 Save(stream) 之前计算最终的 zip 大小

> ID：10815633
> 
> 赞同：7
> 
> 时间：2012-05-30T11:44:13.080
> 
> 标签：c#, dotnetzip

使用 DotNetZip 时，是否可以在调用 Save(stream) 之前获得最终的 zip 文件大小？我有一个应用程序（窗口服务），其中包流大小超过 100MB，然后将保存包并将即将到来的文件添加到新包中。

我[对 Web 应用程序有同样的问题，](https://stackoverflow.com/questions/5402497/dotnetzip-calculate-final-zip-size-before-calling-savestream)但不明白答案。在保存到 I/O 系统之前，有什么方法可以在 DotnetZip 中找到 zip 流的大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T11:20:43.640

我得到了解决方案。这是代码。现在我将创建大小小于 100MB 的包。

```
using System;
using System.Collections;
using System.IO;
using Ionic.Zip;
using Ionic.Zlib;

namespace ZipFileSize1
{
    /// <summary>
    /// This source code is generate the specified size Packages from the directory.
    /// </summary>
    class Program
    {
        /// <summary>
        /// The size of Package(100MB).
        /// </summary>
        public static long m_packageSize = 1024 * 1024 * 100;

        /// <summary>
        ///  Main method of program class.
        /// </summary>
        /// <param name="args">Command line argument</param>
        static void Main(string[] args)
        {
            Console.WriteLine("Enter Directory Full Name for Compression : ");
            var dir = Console.ReadLine();
            Console.WriteLine("Zip File saved Location Directory Name : ");
            var savedir = Console.ReadLine();

            //generate the random zip files.

            var zipFile = Path.Combine(savedir, DateTime.Now.Ticks + ".zip");
            ZipFiles(dir, savedir);

            Console.ReadLine();
        }

        /// <summary>
        /// This method generate the package as per the <c>PackageSize</c> declare.
        /// Currently <c>PackageSize</c> is 100MB.
        /// </summary>
        /// <param name="inputFolderPath">Input folder Path.</param>
        /// <param name="outputFolderandFile">Output folder Path.</param>
        public static void ZipFiles(string inputFolderPath, string outputFolderandFile)
        {
            ArrayList ar = GenerateFileList(inputFolderPath); // generate file list
            int trimLength = (Directory.GetParent(inputFolderPath)).ToString().Length;
            // find number of chars to remove   // from original file path
            trimLength += 1; //remove '\'

            // Output file stream of package.
            FileStream ostream;
            byte[] obuffer;

            // Output Zip file name.
            string outPath = Path.Combine(outputFolderandFile, DateTime.Now.Ticks + ".zip");

            ZipOutputStream oZipStream = new ZipOutputStream(File.Create(outPath), true); // create zip stream

            // Compression level of zip file.
            oZipStream.CompressionLevel = CompressionLevel.Default;

            // Initialize the zip entry object.
            ZipEntry oZipEntry = new ZipEntry();

            // numbers of files in file list.
            var counter = ar.Count;
            try
            {
                using (ZipFile zip = new ZipFile())
                {
                    Array.Sort(ar.ToArray());  // Sort the file list array.
                    foreach (string Fil in ar.ToArray()) // for each file, generate a zip entry
                    {
                        if (!Fil.EndsWith(@"/")) // if a file ends with '/' its a directory
                        {

                            if (!zip.ContainsEntry(Path.GetFullPath(Fil.ToString())))
                            {
                                oZipEntry = zip.AddEntry(Path.GetFullPath(Fil.ToString()), Fil.Remove(0, trimLength));
                                counter--;
                                try
                                {
                                    if (counter > 0)
                                    {
                                        if (oZipStream.Position < m_packageSize)
                                        {
                                            oZipStream.PutNextEntry(oZipEntry.FileName);
                                            ostream = File.OpenRead(Fil);
                                            obuffer = new byte[ostream.Length];
                                            ostream.Read(obuffer, 0, obuffer.Length);
                                            oZipStream.Write(obuffer, 0, obuffer.Length);
                                        }

                                        if (oZipStream.Position > m_packageSize)
                                        {
                                            zip.RemoveEntry(oZipEntry);
                                            oZipStream.Flush();
                                            oZipStream.Close(); // close the zip stream.
                                            outPath = Path.Combine(outputFolderandFile, DateTime.Now.Ticks + ".zip"); // create new output zip file when package size.
                                            oZipStream = new ZipOutputStream(File.Create(outPath), true); // create zip stream                                                
                                        }
                                    }
                                    else
                                    {
                                        Console.WriteLine("No more file existed in directory");
                                    }
                                }
                                catch (Exception ex)
                                {
                                    Console.WriteLine(ex.Message);
                                    zip.RemoveEntry(oZipEntry.FileName);
                                }

                            }
                            else
                            {
                                Console.WriteLine("File Existed {0} in Zip {1}", Path.GetFullPath(Fil.ToString()), outPath);
                            }
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);

            }
            finally
            {
                oZipStream.Flush();
                oZipStream.Close();// close stream
                Console.WriteLine("Remain Files{0}", counter);
            }
        }

        /// <summary>
        /// This method return the list of files from the directory
        /// Also read the child directory also, but not add the 0 length file.
        /// </summary>
        /// <param name="Dir">Name of directory.</param>
        /// <returns>return the list of all files including into subdirectory files </returns>
        private static ArrayList GenerateFileList(string Dir)
        {
            ArrayList fils = new ArrayList();

            foreach (string file in Directory.GetFiles(Dir, "*.*", SearchOption.AllDirectories)) // add each file in directory
            {
                if (File.ReadAllBytes(file).Length > 0)
                    fils.Add(file);
            }

            return fils; // return file list
        }      
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:53:37.770

> 不明白答案

答案很清楚，但需要对压缩有一些基本的了解。以[LZW](http://en.wikipedia.org/wiki/LZW)为例。

归结为：压缩引擎在压缩所有源数据之前不知道压缩数据的最终大小。你宁愿不想这样做两次。

正如dotnetzip的[文档](http://cheeso.members.winisp.net/DNZHelp/html/287c3ad6-dd63-648c-fccd-35662c59e595.htm)`ZipFile.Save()`中所解释的，压缩仅在调用.

# java - log4j:WARN 在 jboss6 中找不到记录器的附加程序

> ID：10815636
> 
> 赞同：0
> 
> 时间：2012-05-30T11:44:25.473
> 
> 标签：java, jboss6.x

我正在尝试在 jboss6 中部署应用程序服务器，当我启动 jboss 时它工作正常，但是当我将请求从客户端发送到服务器时，它会给出错误**ERROR: log4j:WARN No appenders could be found for logger (com.cdac.AsyncResponseComponent.准备提交响应）。**错误所以请帮助我。

我的 server.log 如下所示。

```
**Server.log**

2012-05-30 16:30:24,490 INFO  [org.apache.coyote.http11.Http11Protocol] (Thread-2) Starting Coyote HTTP/1.1 on http-127.0.0.1-7001
2012-05-30 16:30:24,497 INFO  [org.apache.coyote.ajp.AjpProtocol] (Thread-2) Starting Coyote AJP/1.3 on ajp-127.0.0.1-8009
2012-05-30 16:30:24,505 INFO  [org.jboss.bootstrap.impl.base.server.AbstractServer] (Thread-2) JBossAS [6.0.0.Final "Neo"] Started in 3m:32s:844ms

2012-05-30 16:33:51,904 INFO  [STDOUT] (http-127.0.0.1-7001-1) BusinessClass::sendResponse Starts...
2012-05-30 16:33:51,908 INFO  [STDOUT] (http-127.0.0.1-7001-1) Got Initial Context
2012-05-30 16:33:52,156 INFO  [STDOUT] (http-127.0.0.1-7001-1) BusinessClass::sendResponse Starts...
2012-05-30 16:33:52,156 INFO  [STDOUT] (http-127.0.0.1-7001-1) Got Home object
2012-05-30 16:33:52,475 INFO  [STDOUT] (http-127.0.0.1-7001-1) Got Remote object
2012-05-30 16:33:52,476 INFO  [STDOUT] (http-127.0.0.1-7001-1) Hi 1
2012-05-30 16:33:52,613 INFO  [STDOUT] (http-127.0.0.1-7001-1) Hi 2
2012-05-30 16:33:52,613 INFO  [STDOUT] (http-127.0.0.1-7001-1) calling EJB
2012-05-30 16:33:52,614 INFO  [STDOUT] (http-127.0.0.1-7001-1) Hi 3
2012-05-30 16:33:53,658 INFO  [STDOUT] (http-127.0.0.1-7001-1)  i am in bean 
**2012-05-30 16:33:53,867 ERROR [STDERR] (http-127.0.0.1-7001-1) log4j:WARN No appenders could be found for logger (com.cdac.AsyncResponseComponent.PrepareSubmitResponse).
2012-05-30 16:33:53,867 ERROR [STDERR] (http-127.0.0.1-7001-1) log4j:WARN Please initialize the log4j system properly.**
2012-05-30 16:33:53,868 ERROR [STDERR] (http-127.0.0.1-7001-1) log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
2012-05-30 16:33:54,327 ERROR [org.jboss.ejb.plugins.LogInterceptor] (http-127.0.0.1-7001-1) Unexpected Error in method: public abstract com.cdac.messages.async.ReturnResponse com.cdac.AsyncSPResponse.SPResponseEJBRemote.makeSubmitResponse(com.cdac.messages.async.CommitResponse) throws java.rmi.RemoteException,org.apache.xmlbeans.XmlException,java.lang.Exception: java.lang.LinkageError: loader constraint violation: when resolving interface method "org.apache.xmlbeans.impl.values.TypeStore.add_element_user(Ljavax/xml/namespace/QName;)Lorg/apache/xmlbeans/impl/values/TypeStoreUser;" the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, in/gov/mit/www/egov/schema/nsdg/spi/impl/SubmitDocumentDocument1Impl, and the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) for resolved class, org/apache/xmlbeans/impl/values/TypeStore, have different Class objects for the type javax/xml/namespace/QName used in the signature
    at in.gov.mit.www.egov.schema.nsdg.spi.impl.SubmitDocumentDocument1Impl.addNewSubmitDocument(SubmitDocumentDocument1Impl.java:72) [:]
    at com.cdac.AsyncResponseComponent.PrepareSubmitResponse.processSubmitResponse(PrepareSubmitResponse.java:74) [:]
    at com.cdac.AsyncSPResponse.SPResponseEJBBean.makeSubmitResponse(SPResponseEJBBean.java:74) [:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_30]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_30]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_30]
    at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_30]
    at org.jboss.invocation.Invocation.performCall(Invocation.java:386) [:6.0.0.Final]
    at org.jboss.ejb.StatelessSessionContainer$ContainerInterceptor.invoke(StatelessSessionContainer.java:233) [:6.0.0.Final]
    at org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:156) [:6.0.0.Final]
    at org.jboss.ejb.plugins.CallValidationInterceptor.invoke(CallValidationInterceptor.java:63) [:6.0.0.Final]
    at org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:121) [:6.0.0.Final]
    at org.jboss.ejb.plugins.AbstractTxInterceptorBMT.invokeNext(AbstractTxInterceptorBMT.java:173) [:6.0.0.Final]
    at org.jboss.ejb.plugins.TxInterceptorBMT.invoke(TxInterceptorBMT.java:77) [:6.0.0.Final]
    at org.jboss.ejb.plugins.StatelessSessionInstanceInterceptor.invoke(StatelessSessionInstanceInterceptor.java:173) [:6.0.0.Final]
    at org.jboss.ejb.plugins.SecurityInterceptor.process(SecurityInterceptor.java:228) [:6.0.0.Final]
    at org.jboss.ejb.plugins.SecurityInterceptor.invoke(SecurityInterceptor.java:211) [:6.0.0.Final]
    at org.jboss.ejb.plugins.security.PreSecurityInterceptor.process(PreSecurityInterceptor.java:97) [:6.0.0.Final]
    at org.jboss.ejb.plugins.security.PreSecurityInterceptor.invoke(PreSecurityInterceptor.java:81) [:6.0.0.Final]
    at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:205) [:6.0.0.Final]
    at org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:138) [:6.0.0.Final]
    at org.jboss.ejb.SessionContainer.internalInvoke(SessionContainer.java:650) [:6.0.0.Final]
    at org.jboss.ejb.Container.invoke(Container.java:1072) [:6.0.0.Final]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_30]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_30]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_30]
    at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_30]
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157) [:6.0.0.GA]
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) [:6.0.0.GA]
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88) [:6.0.0.GA]
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:271) [:6.0.0.GA]
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:670) [:6.0.0.GA]
    at org.jboss.invocation.local.LocalInvoker$MBeanServerAction.invoke(LocalInvoker.java:169) [:6.0.0.Final]
    at org.jboss.invocation.local.LocalInvoker.invoke(LocalInvoker.java:118) [:6.0.0.Final]
    at org.jboss.invocation.InvokerInterceptor.invokeLocalMarshalled(InvokerInterceptor.java:295) [:6.0.0.Final]
    at org.jboss.invocation.MarshallingInvokerInterceptor.invoke(MarshallingInvokerInterceptor.java:61) [:6.0.0.Final]
    at org.jboss.proxy.TransactionInterceptor.invoke(TransactionInterceptor.java:61) [:6.0.0.Final]
    at org.jboss.proxy.ejb.SecurityContextInterceptor.invoke(SecurityContextInterceptor.java:64) [:6.0.0.Final]
    at org.jboss.proxy.SecurityInterceptor.invoke(SecurityInterceptor.java:68) [:6.0.0.Final]
    at org.jboss.proxy.ejb.StatelessSessionInterceptor.invoke(StatelessSessionInterceptor.java:112) [:6.0.0.Final]
    at org.jboss.proxy.ClientContainer.invoke(ClientContainer.java:101) [:6.0.0.Final]
    at $Proxy148.makeSubmitResponse(Unknown Source) at org.apache.jsp.response_jsp._jspService(response_jsp.java:149)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [:6.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [:6.0.0.Final]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [:6.0.0.Final]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [:6.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.0.0.Final]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.0.0.Final]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [:6.0.0.Final]
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.0.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.0.0.Final]
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.0.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [:6.0.0.Final]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.0.0.Final]
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.0.0.Final]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.0.0.Final]
    at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.0.0.Final]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.0.0.Final]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.0.0.Final]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.0.0.Final]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.0.0.Final]
    at java.lang.Thread.run(Thread.java:662) [:1.6.0_30]

2012-05-30 16:33:54,419 ERROR [STDERR] (http-127.0.0.1-7001-1) java.rmi.ServerError: Unexpected Error; nested exception is: 
2012-05-30 16:33:54,420 ERROR [STDERR] (http-127.0.0.1-7001-1)  java.lang.LinkageError: loader constraint violation: when resolving interface method "org.apache.xmlbeans.impl.values.TypeStore.add_element_user(Ljavax/xml/namespace/QName;)Lorg/apache/xmlbeans/impl/values/TypeStoreUser;" the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, in/gov/mit/www/egov/schema/nsdg/spi/impl/SubmitDocumentDocument1Impl, and the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) for resolved class, org/apache/xmlbeans/impl/values/TypeStore, have different Class objects for the type javax/xml/namespace/QName used in the signature
2012-05-30 16:33:54,421 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.LogInterceptor.handleException(LogInterceptor.java:434)
2012-05-30 16:33:54,421 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:209)
2012-05-30 16:33:54,422 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFinderInterceptor.java:138)
2012-05-30 16:33:54,423 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.SessionContainer.internalInvoke(SessionContainer.java:650)
2012-05-30 16:33:54,424 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.Container.invoke(Container.java:1072)
2012-05-30 16:33:54,424 ERROR [STDERR] (http-127.0.0.1-7001-1)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-05-30 16:33:54,424 ERROR [STDERR] (http-127.0.0.1-7001-1)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
2012-05-30 16:33:54,425 ERROR [STDERR] (http-127.0.0.1-7001-1)  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
2012-05-30 16:33:54,425 ERROR [STDERR] (http-127.0.0.1-7001-1)  at java.lang.reflect.Method.invoke(Method.java:597)
2012-05-30 16:33:54,426 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
2012-05-30 16:33:54,426 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
2012-05-30 16:33:54,426 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
2012-05-30 16:33:54,427 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:271)
2012-05-30 16:33:54,427 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:670)
2012-05-30 16:33:54,428 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.invocation.local.LocalInvoker$MBeanServerAction.invoke(LocalInvoker.java:169)
2012-05-30 16:33:54,428 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.invocation.local.LocalInvoker.invoke(LocalInvoker.java:118)
2012-05-30 16:33:54,428 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.invocation.InvokerInterceptor.invokeLocalMarshalled(InvokerInterceptor.java:295)
2012-05-30 16:33:54,429 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.invocation.MarshallingInvokerInterceptor.invoke(MarshallingInvokerInterceptor.java:61)
2012-05-30 16:33:54,429 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.proxy.TransactionInterceptor.invoke(TransactionInterceptor.java:61)
2012-05-30 16:33:54,430 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.proxy.ejb.SecurityContextInterceptor.invoke(SecurityContextInterceptor.java:64)
2012-05-30 16:33:54,430 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.proxy.SecurityInterceptor.invoke(SecurityInterceptor.java:68)
2012-05-30 16:33:54,431 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.proxy.ejb.StatelessSessionInterceptor.invoke(StatelessSessionInterceptor.java:112)
2012-05-30 16:33:54,431 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.proxy.ClientContainer.invoke(ClientContainer.java:101)
2012-05-30 16:33:54,431 ERROR [STDERR] (http-127.0.0.1-7001-1)  at $Proxy148.makeSubmitResponse(Unknown Source)
2012-05-30 16:33:54,431 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.jsp.response_jsp._jspService(response_jsp.java:149)
2012-05-30 16:33:54,432 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
2012-05-30 16:33:54,432 ERROR [STDERR] (http-127.0.0.1-7001-1)  at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
2012-05-30 16:33:54,432 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
2012-05-30 16:33:54,433 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
2012-05-30 16:33:54,433 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
2012-05-30 16:33:54,433 ERROR [STDERR] (http-127.0.0.1-7001-1)  at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
2012-05-30 16:33:54,434 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324)
2012-05-30 16:33:54,434 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242)
2012-05-30 16:33:54,434 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
2012-05-30 16:33:54,434 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
2012-05-30 16:33:54,435 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181)
2012-05-30 16:33:54,435 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285)
2012-05-30 16:33:54,435 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261)
2012-05-30 16:33:54,436 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88)
2012-05-30 16:33:54,436 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100)
2012-05-30 16:33:54,436 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
2012-05-30 16:33:54,436 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
2012-05-30 16:33:54,437 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
2012-05-30 16:33:54,437 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
2012-05-30 16:33:54,437 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53)
2012-05-30 16:33:54,438 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362)
2012-05-30 16:33:54,438 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
2012-05-30 16:33:54,438 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654)
2012-05-30 16:33:54,439 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951)
2012-05-30 16:33:54,439 ERROR [STDERR] (http-127.0.0.1-7001-1)  at java.lang.Thread.run(Thread.java:662)
2012-05-30 16:33:54,439 ERROR [STDERR] (http-127.0.0.1-7001-1) Caused by: java.lang.LinkageError: loader constraint violation: when resolving interface method "org.apache.xmlbeans.impl.values.TypeStore.add_element_user(Ljavax/xml/namespace/QName;)Lorg/apache/xmlbeans/impl/values/TypeStoreUser;" the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, in/gov/mit/www/egov/schema/nsdg/spi/impl/SubmitDocumentDocument1Impl, and the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) for resolved class, org/apache/xmlbeans/impl/values/TypeStore, have different Class objects for the type javax/xml/namespace/QName used in the signature
2012-05-30 16:33:54,440 ERROR [STDERR] (http-127.0.0.1-7001-1)  at in.gov.mit.www.egov.schema.nsdg.spi.impl.SubmitDocumentDocument1Impl.addNewSubmitDocument(SubmitDocumentDocument1Impl.java:72)
2012-05-30 16:33:54,440 ERROR [STDERR] (http-127.0.0.1-7001-1)  at com.cdac.AsyncResponseComponent.PrepareSubmitResponse.processSubmitResponse(PrepareSubmitResponse.java:74)
2012-05-30 16:33:54,440 ERROR [STDERR] (http-127.0.0.1-7001-1)  at com.cdac.AsyncSPResponse.SPResponseEJBBean.makeSubmitResponse(SPResponseEJBBean.java:74)
2012-05-30 16:33:54,440 ERROR [STDERR] (http-127.0.0.1-7001-1)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-05-30 16:33:54,441 ERROR [STDERR] (http-127.0.0.1-7001-1)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
2012-05-30 16:33:54,441 ERROR [STDERR] (http-127.0.0.1-7001-1)  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
2012-05-30 16:33:54,441 ERROR [STDERR] (http-127.0.0.1-7001-1)  at java.lang.reflect.Method.invoke(Method.java:597)
2012-05-30 16:33:54,442 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.invocation.Invocation.performCall(Invocation.java:386)
2012-05-30 16:33:54,442 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.StatelessSessionContainer$ContainerInterceptor.invoke(StatelessSessionContainer.java:233)
2012-05-30 16:33:54,443 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:156)
2012-05-30 16:33:54,443 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.CallValidationInterceptor.invoke(CallValidationInterceptor.java:63)
2012-05-30 16:33:54,443 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:121)
2012-05-30 16:33:54,443 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.AbstractTxInterceptorBMT.invokeNext(AbstractTxInterceptorBMT.java:173)
2012-05-30 16:33:54,444 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.TxInterceptorBMT.invoke(TxInterceptorBMT.java:77)
2012-05-30 16:33:54,444 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.StatelessSessionInstanceInterceptor.invoke(StatelessSessionInstanceInterceptor.java:173)
2012-05-30 16:33:54,444 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.SecurityInterceptor.process(SecurityInterceptor.java:228)
2012-05-30 16:33:54,445 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.SecurityInterceptor.invoke(SecurityInterceptor.java:211)
2012-05-30 16:33:54,445 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.security.PreSecurityInterceptor.process(PreSecurityInterceptor.java:97)
2012-05-30 16:33:54,445 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.security.PreSecurityInterceptor.invoke(PreSecurityInterceptor.java:81)
2012-05-30 16:33:54,447 ERROR [STDERR] (http-127.0.0.1-7001-1)  at org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:205)
2012-05-30 16:33:54,447 ERROR [STDERR] (http-127.0.0.1-7001-1)  ... 48 more

----------
## Heading ##

if any one have some time please help me thanks. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:57:29.727

您应该将 log4j.properties/xml 放在您的应用程序类路径中，或者在服务器上设置一个指向该文件所在位置的 jndi 资源（例如“log4jUrl”），然后查找该 url 并配置您的记录器：

```
PropertyConfigurator.configure(yourUrl) 
```

# php - 创建一个类别数组，但排除“包含在导航中”= OFF 类别

> ID：10815638
> 
> 赞同：1
> 
> 时间：2012-05-30T11:44:26.980
> 
> 标签：php, magento

以下代码创建一个类别数组。我怎样才能只获取设置为“包含在导航中”= ON 的类别

```
public function toOptionArray()
{
    if (! isset($this->_options))
    {
        $options = array(
            array(
                'label' => Mage::helper('vertnav')->__('Store base'),
                'value' => 'root',
            ),
            array(
                'label' => Mage::helper('vertnav')->__('Current category children'),
                'value' => 'current',
            ),
            array(
                'label' => Mage::helper('vertnav')->__('Same level as current category'),
                'value' => 'siblings',
            ),
        );
        $resource = Mage::getModel('catalog/category')->getResource();
        $select = $resource->getReadConnection()->select()->reset()
            ->from($resource->getTable('catalog/category'), new Zend_Db_Expr('MAX(`level`)'));
        $maxDepth = $resource->getReadConnection()->fetchOne($select);
        for ($i = 2; $i < $maxDepth; $i++)
        {
            $options[] = array(
                'label' => Mage::helper('vertnav')->__('Category Level %d', $i),
                'value' => $i,
            );
        }
        $this->_options = $options;
    }
    return $this->_options;
}

public function getAllOptions()
{
    return $this->toOptionArray();
} 
```

此代码是导航扩展的一部分，它为 magento 中的类别创建垂直导航。但不幸的是，无论它们是否设置为“包含在导航中”= ON 或 OFF，它都会显示所有类别。

希望有人能给我一个提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:28:01.817

这是应该起作用的东西

```
$categoryCollection = Mage::getModel('catalog/category')
->getCollection()
->addAttributeToFilter('include_in_menu' , 1)
->addAttributeToSort('level' , 'DESC');

$maxDepth = $categoryCollection->getFirstItem()->getLevel(); 
```

这里的关键是属性过滤器`include_in_menu`，它将仅搜索包含在菜单中选项设置为是的类别。然后按级别从大到小排序，用`getFirstItem()`方法得到第一个。

由于 magento 易于加载机制，没有性能问题。

# css - 可折叠柱

> ID：10815639
> 
> 赞同：0
> 
> 时间：2012-05-30T11:44:43.390
> 
> 标签：css, jsp

我有一个要求。谁能帮我解决这个问题。

我有一个宽度为 350px 的列（td）。如果该列的内容超过，则将相邻列的值推到右侧。所以我正在尝试实现一个可折叠的列（显示/隐藏）。该列应仅显示适合 350px 宽度的内容，其余内容应在单击该列中的“显示”链接时显示。我怎样才能做到这一点？

我没有遇到任何符合我要求的例子。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:39:49.767

以下是我的代码的一部分。我正在尝试为第二个 td 实现可折叠列。

```
<table style="width:760px; line-height: 25px; font-weight:bold; padding:8px; margin-top: 3px; margin-bottom: 3px;" cellpadding="0" cellspacing="0">
                        <tr>
                            <td style="border-top: 1px dotted #0A7A48; border-bottom: 1px dotted #0A7A48; ">
                                <table style="width:760px; line-height: 25px; font-weight:bold;" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td style="width:60px; text-align:left; color:#000; padding-left: 3px;"> Qty </td>
                                        <td style="width:390px; text-align:left; color:#000;"> Part# / Description </td>
                                        <td style="width:210px; text-align:left; padding-left: 3px; color:#000;"> Manufacturer </td>
                                        <td style="width:50px; color:#000;"><span style="width:48px;"> &nbsp; </span></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    <tr><td>

                        <s:iterator value="readQuoteList" var="entry">
                            <s:iterator value="#entry.value" var="arrayList">
                                <table style="width:760px; line-height: 25px; font-weight:bold;" cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td style="width:60px; text-align:left; padding-left: 3px;"><s:property value="qtyordered"/></td>
                                        <td style="width:390px; text-align:left; padding-left: 3px;"><s:property value="shortDesc"/></td>
                                        <td style="width:210px; text-align:left; padding-left: 30px;"><s:property value="manufacturerName"/></td>
                                        <td style="width:50px; color:#0A7A48; float: right;"><a style="cursor: pointer;" onclick="removeItem('<s:property value="#entry.key"/>')">Remove</a></td>
                                    </tr>
                                </table>
                            </s:iterator>
                        </s:iterator>

                    </td></tr>
                    <tr><td align="center">
                        <table cellpadding="0" cellspacing="0"><tr>
                            <td style="padding-right:5px;"><a class="productDetailbutton" style="text-decoration:none; float: right; cursor:pointer;" onclick="saveHashListItm();">
        <span id="saveHashListItm">Save List</span></a></td>
                            <td><a class="productDetailbutton" style="text-decoration:none; float: right; cursor:pointer;" onclick="removeAllItem()">
        <span>Remove</span></a></td>
                        </tr></table>
                    </td></tr>
                </table> 
```

# c# - 在 C# 中避免 NullReferenceException 的优雅方法

> ID：10815641
> 
> 赞同：7
> 
> 时间：2012-05-30T11:44:45.950
> 
> 标签：c#, .net, syntax, web

我想做这个

```
var path = HttpContext.Current.Request.ApplicationPath; 
```

如果沿途的任何属性为空，我希望路径为空，或者“”会更好。

没有三元组有没有一种优雅的方法来做到这一点？

理想情况下，我希望这种行为（没有可怕的性能和丑陋）字符串路径；

```
try
{
    path = HttpContext.Current.Request.ApplicationPath;
}
catch
{
    path = null;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T11:49:27.730

### [编辑]

C# 6 不久前发布了，它附带了 null-propagating operator `?.`，这将简化您的案例：

```
var path = HttpContext?.Current?.Request?.ApplicationPath 
```

由于历史原因，可以在下面找到以前语言版本的答案。

* * *

我猜您正在寻找 Groovy 的安全取消引用运算符`?.`，而您[不是第一个。](https://stackoverflow.com/questions/4244225/c-sharp-if-null-then-null-expression) 从链接的主题来看，我个人最喜欢的解决方案是[这个](https://stackoverflow.com/a/4244582/1180426)（[那个](https://stackoverflow.com/a/4847955/1180426)看起来也很不错）。然后你可以这样做：

```
var path = HttpContext.IfNotNull(x => x.Current).IfNotNull(x => x.Request).IfNotNull(x => x.ApplicationPath); 
```

您总是可以稍微缩短函数名称。如果表达式中的任何对象为 null，这将返回 null，否则返回 ApplicationPath。对于值类型，您必须在最后执行一次空检查。无论如何，到目前为止没有其他方法，除非您想在每个级别上检查 null。

这是上面使用的扩展方法：

```
 public static class Extensions
    {
    // safe null-check.
    public static TOut IfNotNull<TIn, TOut>(this TIn v, Func<TIn, TOut> f) 
            where TIn : class  
            where TOut: class 
            { 
                    if (v == null) return null; 
                    return f(v); 
            }       
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T12:15:04.610

**更新（2014 年 11 月）**

C# 6 包含称为[Null Propagation Operator](https://roslyn.codeplex.com/discussions/540883)的东西，这意味着对此有语言支持。您的示例可以用 C# 6 编写如下：

```
var path = HttpContext?.Current?.Request?.ApplicationPath; 
```

如果任何部分包含 null，则完整的表达式将返回 null。

* * *

你可以这样写：

```
string value = NullHelpers.GetValueOrNull(
    () => HttpContext.Current.Request.ApplicationPath); 
```

实现这`NullHelpers.GetValueOrNull`一点的最简单方法可能是这样的：

```
public static T GetValueOrNull<T>(Func<T> valueProvider) 
    where T : class
{
    try
    {
        return valueProvider();
    }
    catch (NullReferenceException)
    {
        return null;
    }
} 
```

但到目前为止，解决这个问题的最酷方法是使用表达式树：

```
public static T GetValueOrNull<T>(
    Expression<Func<T>> valueProvider) 
    where T : class
{
    var expression = (MemberExpression)
        ((MemberExpression)valueProvider.Body).Expression;

    var members = new List<MemberExpression>();

    while (expression != null)
    {
        members.Add(expression);

        expression = 
            (MemberExpression)expression.Expression;
    }

    members.Reverse();

    foreach (var member in members)
    {
        var func = Expression.Lambda<Func<object>>(member).Compile();

        if (func() == null)
        {
            return null;
        }
    }

    return valueProvider.Compile()();
} 
```

这也是最慢的处理方式，因为每次调用都会执行一次或多次 JIT 编译器调用，但是...

它仍然很酷;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:48:44.807

最短且性能最高的路径是对每个级别执行空值检查。为了重用，您可以将该代码包装到辅助函数或扩展方法中。这将使您可以通过该功能安全地访问它，但仍会始终执行空检查。

例子：

```
public void DoSomething()
{
  // Get the path, which may be null, using the extension method
  var contextPath = HttpContext.Current.RequestPath;
}

public static class HttpContextExtensions
{
  public static string RequestPath(this HttpContext context)
  {
    if (context == null || context.Request == null)
    {
      return default(string);
    }

    return context.Request.ApplicationPath;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T12:35:01.700

2012 年 5 月，当您提出问题时，我没有看到比您提供的 try ... catch 更简单的解决方案。唯一的选择 - 使用“if”或“？”检查每个部分是否为空。看起来更丑（但可能更快一点）。

要么你必须写：

```
path = HttpContext!=null 
    ? (HttpContext.Current!=null 
            ? (HttpContext.Current.Request!=null 
                    ?(HttpContext.Current.Request.ApplicationPath!=null 
                            ? HttpContext.Current.Request.ApplicationPath 
                            : null) 
                    : null) 
            : null) 
    : null; 
```

或者：

```
if (HttpContext == null || HttpContext.Current == null 
    || HttpContext.Current.Request == null 
    || HttpContext.Current.Request.ApplicationPath  == null)
    path = null;
else
    path = HttpContext.Current.Request.ApplicationPath; 
```

两者都在没有异常处理的情况下这样做。请注意，两者都使用“快捷方式”来中止检查是否找到任何空值。

* * *

**更新（2017 年 12 月）：** 从**C# 版本 6 及更高版本开始，**您可以使用更好的解决方案，即所谓的`Elvis`-Operator（也称为空合并运算符`?.`和`x?[i]`用于数组）。上面的例子

```
path = HttpContext!=null 
    ? (HttpContext.Current!=null 
            ? (HttpContext.Current.Request!=null 
                    ?(HttpContext.Current.Request.ApplicationPath!=null 
                            ? HttpContext.Current.Request.ApplicationPath 
                            : null) 
                    : null) 
            : null) 
    : null; 
```

**这样看起来好多了：**

```
path = HttpContext?.Current?.Request?.ApplicationPath; 
```

这完全一样，恕我直言，不仅仅是“只是”语法糖。结合附加的`?? value`，您可以轻松地用`null`其他值替换，例如

```
path = (HttpContext?.Current?.Request?.ApplicationPath) ?? ""; 
```

`path`如果无法获得非空值，这会使变量为空。

# c# - 最轻量级的 .NET 集合

> ID：10815645
> 
> 赞同：16
> 
> 时间：2012-05-30T11:45:15.613
> 
> 标签：c#, .net, c#-4.0

我想知道 .NET 中的集合实现有什么区别。

例如，我经常使用`List<int>`etc 来存储项目列表。但是我只需要一个物品容器，我想我不需要所有的功能`List`。我只需要一个包含**put**方法的容器，并允许客户端代码遍历容器。

`IEnumerable<T>`有没有在 .NET中实现的更快、更轻量级的集合实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T11:51:47.340

实现的最轻量级的容器`IEnumerable<T>`是类型化数组。它没有`Add`方法（因此不会像列表那样动态调整大小），但是如果您预先知道想要多少元素，您可以定义数组并在给定位置插入元素。

```
var myArray = new int[10];
myArray[0] = 123;
myArray[1] = 234; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:35:17.227

如果您只需要添加和迭代，我相信链表是最轻量级的。我还没有看过 Stack 的实现，很容易创建一个不需要太多空间的。这是一个相当幼稚的解决方案，可以针对大小进行优化。我的观点是实现轻量级集合很简单

```
public class Stack<T>{
   readonly T _head;
   readonly Stack<T> _tail;
   public Stack(T head,Stack<T> tail){
       _head = head;
       _tail = tail;
   }

   public Stack<T> Push(T element){
       return new Stack<T>(element,this);
   }

   public IEnumerator<T> GetEnumerator(){
         yield return _head;
         var current = _tail;
         while(_tail != null){
             yield return current._head;
             current = current._tail;
         }
   }
} 
```

在性能方面，这将比使用预分配数组的实现慢，因为分配给一个元素比新建一个新对象要快，并且取决于例如如何填充内部数组。清单是这实际上可能会占用更多空间，但是可以通过每次只使用一个新元素来更新一个新数组来换取性能开销，但这在性能方面具有显着的开销。您还可以选择两者之间的平衡，在大多数情况下为许多新元素保留足够的空间会过度分配内存，但在大多数情况下会提高性能。

```
public class Stack<T>{
   T[] _heads;
   T[] _tail;
   int _next;
   public Stack(T head,T[] tail){
       _heads = new T[tail.length];
       _next = _heads.Length -2; 
       _heads[_heads.Length -1] = head;
       _tail = tail;
   }

   public void Push(T element){
        if(_next < 0){
            var length = _heads.Length;
            var _new = new T[length * 2];
            _heads = new T[length * 2];                
            _next = length * 2-1;
            Array.Copy(_heads,_new,length);
            Array.Copy(_tails,0,_new,length,length);
            _tails = _new;
        } else{
            _heads[_next--] = element;
        }
   }

   public IEnumerator<T> GetEnumerator(){
         yield return _head;
         var current = _tail;
         while(_tail != null){
             yield return current._head;
             current = current._tail;
         }
   }
} 
```

并且您基本上回到了 List 等集合所具有的平衡。它建立在一个内部阵列上，该阵列通常太大而无法在不浪费太多内存的情况下进行高速添加。

因此，与所有优化问题一样，它实际上取决于您希望优化的内容。如果您愿意牺牲性能，您通常可以优化内存，反之亦然

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:47:37.567

您究竟在收藏中存储了什么？如果它是一个类型 ( `T`)，那么`List<T>`你最好的选择是。

对于非泛型类型，考虑使用 a `HashSet`，它们在某些情况下可以显着提高性能。

**正如@RuneFS 所说，正如您要求迭代和放置一样。迭代 HashSet 与迭代 List 是相等的（ish），但是将对象添加到 HashSet 比将其添加到列表中要慢（比较哈希），并且功能也不等效（哈希集中的不同哈希）。**

# java - Java：守护进程：thread.join() 未完成，之前在一个线程中抛出异常

> ID：10815646
> 
> 赞同：0
> 
> 时间：2012-05-30T11:45:19.700
> 
> 标签：java, multithreading, exception, daemon, runnable

我写了一个 Java Daemon（一个实现 Daemon 和 Runnable 的类），现在我面临以下问题：

在 init() 我创建了一个新线程。`Thread thread = new Thread(this);` 在 start() 中，我启动了新线程。`thread.start()`. 在运行中我做了很多不同的事情......然后发生异常。（在我的情况下：NullPointerException。）。

现在发生的事情是我在 run() 中捕获了异常并调用了 stop()。我在那里打电话`thread.join()`，但这永远不会结束，也不会抛出 InterruptedException。我怎么解决这个问题？

在 run() 中，我在 while 循环中做一些事情

```
private Thread thread;

public void init() {
    // if init is successful: this.thread = new Thread(this);
    // if init is not successful: call stop()
}

public void run() {
  try{
  // do something
  while (!this.stopping)
  {
      // do somthing
  }
  } catch (Exception e) {
      //do something and then call stop()
  }
}

public void stop() {
    this.stopping = true;
    thread.join(); // catch InterruptedException if it did not work
    // do some more things
} 
```

这就是引发异常的地方。停止是不稳定的，一旦调用停止，我就将其设置为 true。

谢谢 ：-）

* * *

我得到了很多答案，但我仍然没有解决这个问题。每个人都说我不应该在我的 run() 或 init() 方法中手动调用 stop()。我的问题是，当 init() 或 run() 中发生异常时，我想真正*停止*程序。完成它，使程序不再运行。我不知道如何在不调用 stop() 的情况下实现这一点。简单地等到 run() 完成是行不通的，因为它会停止并且 stop() 永远不会被调用。我还不确定如何处理异常问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:06:27.577

打电话`stop`就好了。人们警告你不要打电话`Thread.stop()`，你没有这样做。你**正在**做的是调用`join`你想加入的同一个线程——这当然会导致死锁。你有

```
catch (Exception e) {
  //do something and then call stop()
} 
```

所以这意味着您**确实**`stop`是从该`run`方法调用的。那是错误的。它毫无例外地工作，因为那时你没有进入catch-block。您需要在该 catch 块中编写的所有内容就是`break;`中断 while 循环。

顺便说一句，您根本不需要引用`Thread`- 这只是令人困惑的事情。如果您需要访问正在执行您的方法的`Thread`实例`run`，您只需调用`Thread.currentThread()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:04:20.673

你永远不应该叫停。只需从运行返回或从运行抛出异常，线程将自行停止。Thread.join 意味着从某个想要等待守护线程完成的线程调用。例如，如果主线程收到要关闭的消息，它可能会通知守护进程停止（而不是通过调用 stop），然后使用 join 等待守护进程实际停止。[这里](http://download.oracle.com/javase/tutorial/essential/concurrency/)有一个教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T01:33:13.900

很难确切知道哪里出了问题，因为您的示例仍然只是一些代码。我附上了我能写的最简单的多线程程序。主线程每 100 毫秒打印一次“main”。另一个线程每 100 毫秒打印一次“其他”，直到停止。主线程在 10 次迭代后停止另一个线程。你能解释一下这个程序没有做什么你想让你做的吗？我们可以改变它，直到它这样做。

```
public class Main {

    private Thread thread;
    private Other other;

    public static void main(String args[]) throws InterruptedException {
        Main main = new Main();
        main.run();
    }

    public void run() {
        other = new Other();
        thread = new Thread(other);
        thread.start();
        for (int i = 0; i < 10; i++) {
            System.out.println("main");
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                System.out.println("interrupted waiting for sleep in main");
            }
        }
        stop();
    }

    public void stop() {
        other.stopping = true;
        try {
            thread.join();
        } catch (InterruptedException e) {
            System.out.println("interrupted waiting for other to join main");
        }
    }

}

class Other implements Runnable {

    volatile boolean stopping;

    @Override
    public void run() {
        while (!stopping) {
            System.out.println("other");
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                System.out.println("interrupted waiting for sleep in other");
            }
        }
    }

} 
```

# css - 为什么我的 CSS 媒体查询被忽略或覆盖？

> ID：10815651
> 
> 赞同：8
> 
> 时间：2012-05-30T11:45:43.670
> 
> 标签：css, html, media-queries, responsive-design, fluid-layout

这快把我逼疯了！我在 Stackoverflow 上查看了一些问题，发现 ID 元素优先于类元素（很高兴知道，但我觉得这不是我的问题）。这是我正在努力解决的导航菜单。（我使用最大宽度顺便说一句）

这是我的 NAV 的通用 CSS：

```
nav{ float:right; margin-left:2%;}
nav ul{ float:left; list-style:none; width:100%;}
nav ul li{ float:left; margin-left:5px; }
nav a{ display:inline-block; float:left; color:#f0f0f0; text-transform:uppercase; 
font-family:TrumpGothicWestRegular; font-size:1.5em; padding: 100px 20px 20px 20px; } 
```

现在，当视口低于 1140 像素时，我希望 CSS 像这样更改菜单：

```
nav ul li{ float:left;}
nav a{ float:left; display:inline-block; padding: 20px 20px 20px 20px;} 
```

所以基本上菜单会向左浮动，顶部填充较少。

当视口低于 800 像素时，我希望 CSS 像这样更改菜单：

```
nav ul li{ float:none;}
nav a{ float:none; padding: 20px 20px 20px 20px;} 
```

如您所见，我只将 NAV Float 更改为 NONE

现在，当我测试它时，GENERAL CSS 工作正常，以及当视口低于 1140 像素时，但一旦我低于 800 像素，NAV 仍然浮动到左边！！？？好像是继承了1140px的CSS媒体查询？有任何想法吗？

更新：这就是我定义媒体查询的方式

```
<link rel="stylesheet" media="only screen and (max-width: 800px), only screen and 
(max-device-width: 800px)" href="small-device800.css" />
<link rel="stylesheet" media="only screen and (max-width: 1140px), only screen and 
(max-device-width: 1140px)" href="small-device1140.css" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T12:16:57.563

也许您的媒体查询有问题？尝试这样的事情：

```
@media all and (min-width: 1140px) {
    nav ul li { float:left; }
}

@media all and (max-width: 1139px) and (min-width: 800px) {
    nav ul li { float:left; }
}

@media all and (max-width: 799px) {
    nav ul li { }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-20T15:26:38.527

我遇到了类似的问题，我将所有@media 查询放入一个名为“响应式”的单独样式表中，并且在我开始将新的响应式 CSS 和元素导入现有网站之前，它一切正常。

我必须开始添加 !important 到 @media 查询中包含的几乎每一行 CSS。然后我更改了 CSS 文件的加载顺序，并将名为“响应式”的文件移到列表中的最后一个加载，然后一切都开始正常工作，我不再需要在行后使用 !important 语句的CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:36:49.247

这是您的测试用例的 jsFiddle .. [http://jsfiddle.net/RJm3c/1/](http://jsfiddle.net/RJm3c/1/)

[http://jsfiddle.net/RJm3c/1/embedded/result/](http://jsfiddle.net/RJm3c/1/embedded/result/) <--调整浏览器大小以查看结果

CSS：

```
 nav{ float:right; margin-left:2%;}
  nav ul{ float:left; list-style:none; width:100%;}
  nav ul li{ float:left; margin-left:5px; }
  nav a{ display:inline-block; float:left; text-transform:uppercase;}
  /*for test only*/
  body{ background-color: green}

  @media only screen and (max-width: 1140px), only screen and (max-device-width: 1140px) {
    nav ul li{ float:none;}
    nav a{ float:none; padding: 20px 20px 20px 20px;}
    /*for test only*/
    body{ background-color: red}
  }

  @media only screen and (max-width: 800px), only screen and (max-device-width: 800px) {
    nav ul li{ float:left;}
    nav a{ float:left; display:inline-block; padding: 20px 20px 20px 20px;}
    /*for test only*/
    body{ background-color: blue}
  } 
```

​</p>

# javascript - Omniture 如何访问 s_code.js 生成器

> ID：10815652
> 
> 赞同：0
> 
> 时间：2012-05-30T11:45:45.833
> 
> 标签：javascript, web-analytics, adobe-analytics

我在 developer.omniture.com 和 adobe.com 创建了一个帐户。但是我浪费了时间，因为要访问 s_code.js 生成器，我应该登录到[https://my.omniture.com/login/](https://my.omniture.com/login/)。如何在那里创建测试帐户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:11:52.993

只有注册用户才能登录 SiteCatalyst 界面。您将需要联系您正在为其工作的客户并请求登录，或者您可以联系omniture 销售团队以请求演示。

# c# - “表 2”中的实体参与“外键”关系。找到了 0 个相关的“表 1”

> ID：10815653
> 
> 赞同：1
> 
> 时间：2012-05-30T11:45:51.837
> 
> 标签：c#, .net, entity-framework, edmx

我目前正在研究.NET 中的实体框架。当我通过调用“SaveChanges”方法尝试保存 mu 更改的实体时。它给了我错误：

“表 2”中的实体参与“FK_Table2_Table1”关系。找到 0 个相关的“表 1”。预计有 1 个“表 1”。

当我从数据库生成实体模型并且 .edmx 文件向我显示这两个表之间的关系时，为什么会发生此错误。

# php - 如何遍历返回的 SQL 结果 - nextRecord()

> ID：10815671
> 
> 赞同：0
> 
> 时间：2012-05-30T11:47:12.453
> 
> 标签：php, sql, sql-server, stored-procedures, yii

我有一个从 MSSQL 数据库返回多个结果集的存储过程。我遇到的问题是遍历每个结果集。似乎 Yii 没有推进到下一个结果集来遍历行。这是一个例子：

结果 1：

```
TOTAL
-----
999 
```

结果 2：

```
ID |NAME
---|----
0  | Jon
1  | Bob
2  | Sarah
3  | Pete 
```

这是我在 Yii 中进行这项工作的尝试。

```
//create the call to stored proc

$command=parent::$db->createCommand("exec sp_showUsers");    

//run the query      

$dataReader = $command->query();

//For the current object assign the row to a variable

while (($row = $dataReader->read()) !== false){

      //if the row has a total column

      if(isset($row['total'])){
           $total = $row['total'];
      }
 }

//Test if there is another result 

$usersExist = $dataReader->nextResult();

//$dataReader->next(); - REMOVED AS NOT NEEDED

if($usersExist){
     $userTable = array();
     $i = 0;
     while (($userRow = $dataReader->read())!== false){
            //add each row to a temporary array

            $userTable[$i] = $userRow['id'];
            $i++;
     }
 }

 ... 
```

`->next()`即使已调用该方法，这似乎也不会遍历第二个结果集？任何帮助将不胜感激！谢谢。

Ps 存储过程确实有效，我可以使用普通 PHP 和`sqlsrv_next_result()`方法循环遍历结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:22:09.537

在代码中，为什么

`$dataReader->nextResult()`将返回一个`CDbDataReader`对象。

因此，您使用`$dataReader->next();`它只会移动第一个结果的指针。您必须移动`nextResult()`调用返回的指针。

我认为，

`$dataReader=$dataReader->next();`

会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-06T09:48:24.583

我找到了答案。正是我们将参数绑定到我们的存储过程的方式弄乱了我们的结果。我们不需要 $dataReader->next(); 一点也不。所以上面的代码一切正常。我希望这可以帮助那些在 Yii 中使用 SQL Server 存储过程的人。:) 以防万一有人需要存储过程调用示例：

```
$command=parent::$db->createCommand("exec sp_showUsers :pageNumber, :pageSize, :sortOrder, :viewAll");

$command->bindParam(":pageSize", $pageSize, PDO::PARAM_INT); 
$command->bindParam(":pageNumber", $pageNumber, PDO::PARAM_INT); 
$command->bindParam(":sortOrder", $sortOrder, PDO::PARAM_STR); 
$command->bindParam(":viewAll", $viewAll, PDO::PARAM_BOOL); 

$dataReader = $command->query(); 
```

# .net - 哪些设计决策导致 StackOverflowException 在 .NET 2.0+ 中无法捕获？

> ID：10815674
> 
> 赞同：8
> 
> 时间：2012-05-30T11:47:19.647
> 
> 标签：.net, clr, stack-overflow

据我所知，没有根本原因`StackOverflowException`应该是无法捕获的。然而它确实如此。

线程堆栈的最大大小默认为 1MB 或 4MB，具体取决于位数，但该空间仅保留。在实际需要那么多堆栈之前，它不会被提交（因此只使用虚拟地址空间）。

据我所知，为什么它无法捕获背后的基本想法是，到那时你已经用完了*所有*堆栈，因此除了为堆栈外条件精心设计的代码之外，无法真正执行任何东西*。*但这需要一个明显的解决方案：在我们用完*所有*堆栈空间`StackOverflowException` *之前抛出！*

 *为什么不这样做？我能想到的唯一远程合理的原因是，决定这将消耗的额外*虚拟地址空间*（不是真正的内存使用，请注意！）不值得让这个异常可捕获。

还有其他我没有考虑的问题吗？

我觉得我不得不问，因为大多数解决这个问题的答案似乎都暗示不可能让它正常工作，*这*就是.NET 让它们无法捕获的原因。

* * *

可捕获变体的确切实现细节似乎并不重要，但这只是一个想法。首先，将默认保留堆栈大小加倍，但将异常设置为在 1MB 使用时触发。到目前为止，这与现有方法完全相同。但是当达到阈值时，不要抛出无法捕获的异常，而是抛出一个可捕获的异常，同时将阈值增加到 1.5MB。如果捕获到异常并且我们再次突破限制，请将其设置为 1.75MB。然后是 1.875MB。等等。每个嵌套和处理的异常都会获得越来越少的额外堆栈空间来处理，直到我们接近 2MB 以要求抛出无法捕获的变体。

为了在成功处理 StackOverflowException 后降低阈值，让我们将内存页面标记为我们刚刚通过的堆栈大小的一半（在第一个实例中为 0.5MB）以在写入时出错。当我们回到堆栈使用水平时，故障处理程序将几乎完全被触发，因此它并不昂贵。处理程序将检查实际堆栈大小并在适当时将阈值放回原处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:06:14.373

我不知道为什么它从 1.1 更改为 2.0（希望 Eric 有时会发表评论），但我怀疑是因为这样的情况：

```
public bool Count(int64 i)
{
    try
    {
        // somewhere in here a stack overflow exception is thrown
        if(i < int64.MaxValue)
            return Count(i+1);
        else
            return true;
    } Catch(StackOverflowException soEx)
    {
        HandleError(soEx);
    }
}

public void HandleError(Exception ex)
{
    // error handling code here
} 
```

你实际上也会在你的行中抛出一个异常，`HandleError(soEx);`因为它在堆栈太满之前停止了。

我怀疑这就是他们选择使堆栈溢出异常无法捕获的原因，因为您无法捕获它然后调用该捕获块中的任何方法。

至于你的建议，他们不希望有一个堆栈大小和一个有效的堆栈大小，因为这会使事情复杂化，我怀疑他们也不希望有一个可变的堆栈大小。这些事情中的任何一个都会使框架过于复杂，并且只提供部分解决方案，为了争论，如果你的代码是：

```
public void HandleError(Exception ex)
{
    try
    {
        HandleError(soEx);
    } Catch(StackOverflowException soEx)
    {
        HandleError(soEx);
    }
} 
```

使用变量堆栈并且无法真正防止 StackOverflowException 被捕获，这会导致其他东西崩溃。

所以让它更容易和更可预测的是它只是抛出并且无法捕捉。

编辑：[这个答案](https://stackoverflow.com/a/1599238/288747)指出了您仍然*可以*在 CLR 2.0+ 中捕获 StackOverflowExceptions的唯一情况*

# swing - How to build a panel dynamically with Griffon

> ID：10815675
> 
> 赞同：1
> 
> 时间：2012-05-30T11:47:28.280
> 
> 标签：swing, panel, griffon

I have a panel in a griffon view

MyAppView.groovy

```
panel(id: 'tabpanelWest', constraints: WEST, border: emptyBorder(6)) {
        boxLayout(axis: BoxLayout.Y_AXIS)
        button('Add', actionPerformed: controller.addToggleButton)
        toggleButton(new JToggleButton('Secretaría',imageIcon('/onbutton.png'), true), itemStateChanged: controller.toggleRly)
        toggleButton(new JToggleButton('Hall Entrada',imageIcon('/onbutton.png'), true), itemStateChanged: controller.toggleRly)
} 
```

In my MyAppController.groovy I have the next closures:

```
 def toggleRly = { evt ->
        def toggleButton = evt.source
        def status = toggleButton.isSelected() ? 1 : 0
        // Calls to a service which does some stuff
        URL url = status ? app.getResourceAsURL('onbutton.png') : app.getResourceAsURL('offbutton.png')        
        toggleButton.setIcon(new ImageIcon(url))
        toggleButton.setSelected(status ? true : false)       
  }

  def addToggleButton = { evt ->
      execInsideUIAsync {
        URL url = app.getResourceAsURL('onbutton.png')
        def panel = view.tabpanelWest
        def jtogglebutton = new JToggleButton('Secretaría',new ImageIcon(url), true)
        panel.add(jtogglebutton) 
        panel.revalidate()
      }
 } 
```

I want to add dynamically toggle buttons to my panel when the user submits a form which is going to be part of the UI. In the above example i use a simple button.

The *addToogleButton* closure adds a *JTogglebutton* but I do not know how can i attach a listener such as the one of the view *"itemStateChanged: controller.toggleRly*)" so that when it is clicked my controller closure toggleRly is called.

I have tried unsuccessfully with

```
panel.add(new SwingBuilder().edt {toggleButton(jtogglebutton, itemStateChanged: view.controller.toggleRly)}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:09:45.647

You can use SwingBuilder DSL for [components](http://groovy.codehaus.org/Alphabetical+Widgets+List) directly ([JToggleButton](http://groovy.codehaus.org/SwingBuilder.toggleButton))

Try this:

```
def addToggleButton = { evt ->
      edt {
        def panel = view.tabpanelWest
        def jtogglebutton = toggleButton(text:'Secretaria', selected:true, itemStateChanged: toggleRly)
        panel.add(jtogglebutton)
        panel.revalidate()
      }
 } 
```

# c# - 使用 iTextSharp 制作两个相同的 PDF

> ID：10815678
> 
> 赞同：5
> 
> 时间：2012-05-30T11:47:36.807
> 
> 标签：c#, pdf, itext

我想克隆一个 pdf，并在复制期间或之后的某个时间点对文档进行细微更改。

我设法用页面做到了这一点，但我也在尝试复制所有元数据、表单字段、acrofields 等。

我将如何使用 iTextSharp 做到这一点？

```
Document document = new Document(); 
FileStream fs = new FileStream(OutputFile, FileMode.Create, FileAccess.Write, FileShare.None)
PdfCopy copy = new PdfCopy(document, fs);
document.Open();
for (int i = 1; i <= reader.NumberOfPages; i++)
{
    PdfImportedPage importedPage = copy.GetImportedPage(reader, i);
    copy.AddPage(importedPage);
}
copy.Outlines = SimpleBookmark.GetBookmark(reader);                

fs.Flush();

PdfCopyFields copyf = new PdfCopyFields(fs); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T03:31:15.817

您不能使用 iTextSharp 制作相同字节的副本。您可以使用 System.IO.File.Copy 制作相同的副本。

然后，您可以使用 iTextSharp 打开它以对副本进行进一步调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T15:09:07.907

您使用`PdfCopy`基于解决方案的解决方案。

但是，对于您的任务，即获取单个 PDF 并对其应用一些更改，需要适当的解决方案`PdfStamper`。看起来像这样：

```
PdfReader reader = ...;
[...apply changes using PdfReader methods...]
FileStream fs = new FileStream(OutputFile, FileMode.Create, FileAccess.Write, FileShare.None)
PdfStamper stamper = new PdfStamper(reader, fs);
[...apply changes using PdfStamper methods...]
stamper.Close(); 
```

# java - JSF 页面无法使用 Openshift 在 Internet Explorer 中查看，但在本地主机和 Chrome 上工作

> ID：10815686
> 
> 赞同：1
> 
> 时间：2012-05-30T11:48:01.467
> 
> 标签：java, internet-explorer, jsf, google-chrome, openshift

我最近使用 openshift 上传了我的第一个 JSF 站点。

我的 JSF 网站上有一个命令按钮，如下所示：

```
 <h:commandButton id="submitProduct3" image="images/vouchericon.png" 
                        action="#{UserBean.clearInfo()}" value="product1"   /> 
```

与 bean 相关联：

```
 public String clearInfo()
  {
    String pageReturn = "inputForm";

this.firstName = null;
this.lastName = null;
this.addressLine1 = null;
this.addressLine2 = null;
this.city = null;
this.county = null;
this.country = null;
this.postCode = null;
this.email = null;
this.paypalEmail = null;
this.voucherCode = null;

return pageReturn;
 } 
```

这在我的本地主机上的 IE、Firefox 和 Chrome 以及 openshift 上的 Firefox 和 Chrome 中都可以正常工作，但是当我在网站上线后单击 IE 上的按钮时，我收到以下错误：

```
An Error Occurred:
viewId:/tabletsHome.xhtml - View /tabletsHome.xhtml could not be restored.
+- Stack Trace
javax.faces.application.ViewExpiredException: viewId:/tabletsHome.xhtml - View     /tabletsHome.xhtml could not be restored.
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:679) 
```

请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:35:19.350

HHHmmmm 我的猜测是它可能是 Jboss on openshift (HAProxy) 前面的 Apache 代理。这会让我觉得这是您的本地实例和 OpenShift 实例之间的唯一区别。你在本地运行 JBoss 吗？

# asp.net - Cookies 是否有替代方法来记住用户的选择？

> ID：10815690
> 
> 赞同：2
> 
> 时间：2012-05-30T11:48:12.163
> 
> 标签：asp.net, html, cookies, httpcookie

我们（可能）在荷兰制定了即将出台的法律，我必须询问用户是否允许我在我的网站上使用 cookie。现在，当他们说“是”时，这很容易，因为我可以将其存储在 cookie 中。

你可以看到它的到来：当他们说“不”时，我怎么能记住用户的选择？

我只将 cookie 用于 Google 分析，所以我可以接受“不”的答案，并且不想每次访问都用相同的问题激怒“不”的说者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:52:10.897

也许支持浏览器中的[本地存储](http://en.wikipedia.org/wiki/Web_storage#localStorage)或多或少永久持久化

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T11:53:02.717

您将需要`url-rewritting`用作后备方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T11:52:07.990

那么您可以使用 html5 的 localstorage/sessionstorage 对象来满足您的要求。这些在所有现代浏览器上都得到了很好的支持。访问[此处](http://diveintohtml5.info/storage.html)了解有关 HTML5 存储的更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T12:02:31.453

您可以使用**本地存储**

请检查这个

1.  [为什么选择本地存储](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)
2.  [如何使用本地存储](http://www.w3schools.com/html5/html5_webstorage.asp)

# arrays - 许多指示不同状态的 GUI 控件

> ID：10815692
> 
> 赞同：6
> 
> 时间：2012-05-30T11:48:19.683
> 
> 标签：arrays, performance, user-interface, controls

这个问题非常开放，可能这个问题的答案将取决于系统，但平均来说，哪个是显示不同状态的大型矩阵（比如 128 个元素）的最佳方式？

*   为每个单元格创建一个控件，让 GUI 库处理所有事件和内容（在 Windows 128 HWND:s 中）
*   使用较低级别的图形基元绘制整个矩阵

内存/CPU性能是否因选择而异？我的应用程序中每个单元格的状态数为 4，因此它们每个需要 2 位来表示它们的状态。每个单元格将由与状态相关的图像表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T06:34:21.443

当然有区别。我将尝试说明这一点以及它所基于的假设。

1.  控件的成本 = 控件的内存 + 控件的事件处理程序 + 控件的引用 + 事件管道中的一个额外控件

2.  每个单元映射的“严格”控制的好处。概念上干净，简单的代码，最容易思考。

3.  紧密映射的成本：将每个控件的成本乘以单元格的数量。

我将要建议的替代方案假设紧密映射和松散的“单环”映射之间的成本增量很重要。

**替代方案**：只需添加一个仅在您呈现的整个矩阵视图的范围内为事件注册的控件，有一段代码来确定指针位置和对应的单元格，然后根据用户仅更新该单元格那里的互动。

这样做的好处是您只获得一个额外控制的边际成本，但处理整个矩阵的交互的好处。边际收益或这种控制比单一的严格控制要高得多。Aldo，实现成本很小，因为它是一种常见的模式并且不太难。

祝你好运！

# r - 为什么子集不适用于与列名相同的向量名称？

> ID：10815696
> 
> 赞同：3
> 
> 时间：2012-05-30T11:48:31.687
> 
> 标签：r, subset

我遇到了子集函数的一个令人困惑的“功能”（使用列名作为子集的向量名称不起作用）：

```
data(iris)
Species <- unique(iris$Species)
i <- 2
Species[i]
subset(iris, subset = Species == Species[i])

sp <- unique(iris$Species)
sp[i]
subset(iris, subset = Species == sp[i]) 
```

有人可以解释一下，这里发生了什么，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T11:55:50.767

`subset()`将首先在数据框中查看您提到的任何对象，因此在您的第一个示例中`Species[i]`返回“setosa”（与 相同`iris$Species[i]`）。只有当您指定的对象在数据框中找不到时，R 才会在父帧中查找并在那里找到正确的对象。

所以这一切都有效，你只是不明白它是如何工作的。您可以在帮助文件中阅读此内容：

> 请注意，将在数据框中评估子集，因此可以（按名称）将列称为表达式中的变量（参见示例）。

**这是怎么回事？**

原因是以下代码行`subset()`：

```
e <- substitute(subset)
r <- eval(e, x, parent.frame()) 
```

*   `subset`（或`e`）在您的示例中`Species == Species[i]`
*   `x`在你的例子中`iris`
*   `parent.frame()`在您的示例中返回全局环境。

`eval`调用,的第二个参数`x`被调用`envir`。它是评估表达式的环境（或列表或数据框，...）。在您的情况下， R 评估`Species == Species[i]` *inside* `x`，这是您的数据框。

第三个参数`parent.frame()`是外壳。这是包含您指定的数据框 als 环境的环境，并且是 R 在数据框中找不到变量的情况下将查找的地方。

也可以看看 ？`eval`

# jquery - HTML 5 中的音频和文字级别突出显示

> ID：10815698
> 
> 赞同：0
> 
> 时间：2012-05-30T11:48:39.137
> 
> 标签：jquery, html

如何在 HTML5 中同步音频和相应的文本突出显示？jquery/Javascript 会做音频和文本同步吗？如果是，请分享您的想法...

提前致谢...

马丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:40:02.117

您需要在服务器端预处理音频文件，以便在说出相应单词时创建单词索引和挂钟时间的 JSON 列表。

然后在客户端，加载这个 JSON。开始音频播放并使用 MediaElement timeupdate 事件挂钩来跟踪音频的进度。

`<span>`然后当 timeupdate 报告的时间通过相应的单词索引时，通过将它们包裹起来并更改它们的 CSS 类来突出显示这些单词。

# wpf - WPF DataGrid SelectionChanged 行颜色

> ID：10815701
> 
> 赞同：0
> 
> 时间：2012-05-30T11:48:51.327
> 
> 标签：wpf, datagrid, colors, row, selectionchanged

如果 WPF DataGrid 的 SelectionChanged 事件中的条件为真，我想更改整行的颜色。如果我使用 arg DataGridRowEventArgs e，我可以更改 LoadingRow 事件中的颜色。我可以使用 e.Row.Background = new SolidColorBrush(Colors.White)。但这在 SelectionChangedEvent 中不起作用。如何从 DataGrid 转换为 DataGridRow 以使用 DataGridRow.Row.Background = new SolidColorBrush(Colors.White)？感谢您的理解。

```
 private void grd_SelectionChanged(object sender, SelectionChangedEventArgs e)
     {

         int iIndex = grd.SelectedIndex;
         SolidColorBrush myColor = new SolidColorBrush(Colors.Tomato);

         if (grd.SelectedItem != null)
         {
             // var datagridrow = grd.SelectedItem as DataGridRow; --> dosent'work
             var drw = grd.SelectedItem as DataRowView;

             DataRow row = drw.Row;
             if (Convert.ToBoolean(row["Checkbox"]) == true)
             {
                 row["Checkbox"] = false;
             }
             else
             {
                 row["Checkbox"] = true;    
                 // change the background color of the row too what ever  
                 // white red blue                          
              }
         }
    } 
```

==================================================== ===============================

这是 xaml 和代码。十分感谢

**主窗口.xaml.cs**

```
 namespace DataGridBrushRowColor
    {

       public partial class MainWindow : Window
    {
    public MainWindow()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        CreateTable myDog = new CreateTable();
        // Lade Daten
        dataGrid1.AutoGenerateColumns = true;

        DataView myView = new DataView(myDog.DogOutput);
        dataGrid1.DataContext = myView;            
    }

    private void dataGrid1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var rowview = dataGrid1.SelectedItem as DataRowView;
        if (rowview != null)
        { 
            DataRow row = rowview.Row;
            if (Convert.ToBoolean(rowview["Choice"]) == true)
            {
                row["Choice"] = false;
            }
            else
            {
                row["Choice"] = true;
                // Color the whole row red

            }
        }

     }
     }
     } 
```

**主窗口.xaml**

```
 <Window x:Class="DataGridBrushRowColor.MainWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     Title="MainWindow" Height="350" Width="525">
    <Grid>
    <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Left" Name="dataGrid1" VerticalAlignment="Top" Height="243" Width="503" ItemsSource="{Binding}" SelectionChanged="dataGrid1_SelectionChanged" >

    </DataGrid>
    <Button Content="Button" Height="26" HorizontalAlignment="Left" Margin="12,249,0,0" Name="button1" VerticalAlignment="Top" Width="100" Click="button1_Click" />
</Grid> 
```

**创建表.cs**

```
 namespace DataGridBrushRowColor
    {
        class CreateTable
        {
            DataTable dtDog;

    public DataTable DogOutput
    {
        get
        {
            return dtDog;
        }
    }

    public CreateTable()
    {
        // Here we create a DataTable with four columns.
        DataTable table = new DataTable();
        table.Columns.Add("Choice", typeof(Boolean));
        table.Columns.Add("Weight", typeof(int));
        table.Columns.Add("Name", typeof(string));
        table.Columns.Add("Breed", typeof(string));
        table.Columns.Add("Date", typeof(DateTime));

        // Here we add five DataRows.            
        table.Rows.Add(false,57, "Koko", "Shar Pei", DateTime.Now);
        table.Rows.Add(false,130, "Fido", "Bullmastiff", DateTime.Now);
        table.Rows.Add(false, 92, "Alex", "Anatolian Shepherd Dog", DateTime.Now);
        table.Rows.Add(false, 25, "Charles", "Cavalier King Charles Spaniel", DateTime.Now);
        table.Rows.Add(false, 7, "Candy", "Yorkshire Terrier", DateTime.Now);
        dtDog = table;

    }

    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:13:57.293

您可以通过使用样式和触发器来实现相同的目标，如下所示。

```
 <Window.Resources>
        <local:MyColorConverter x:Key="colorconverter" />
        <Style TargetType="{x:Type DataGridRow}">
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{Binding Converter={StaticResource colorconverter}}" /> 
                 </Trigger>              
            </Style.Triggers>
        </Style>
    </Window.Resources> 
```

..chagnes 背后的代码

```
public class MainWindow:Windows
{
your codes.
}

 public class MyColorConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            SolidColorBrush brush = new SolidColorBrush(Colors.Black);
            bool result = false;
            if (value != null)
            {
                DataRowView drv = value as DataRowView;
                try
                {
                    if (drv != null)
                        if (Boolean.TryParse(drv.Row["Choice"].ToString(), out result))
                        {
                            if (result)
                                brush = new SolidColorBrush(Colors.Red);

                            else if (result == false)
                                brush = new SolidColorBrush(Colors.YellowGreen);
                        }
                }
                catch { }
            }
            return brush;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

# tfs - Team Foundation Server MSSCCI 提供程序缓慢问题

> ID：10815704
> 
> 赞同：0
> 
> 时间：2012-05-30T11:49:01.040
> 
> 标签：tfs, plsqldeveloper, msscci

我已经安装了 Team Foundation Server MSSCCI Provider 2010 并使用它将 Oracle PL/SQL 开发人员（版本 7.1.5）连接到 TFS 2010。

现在的问题是需要 TFS 的操作（签入、签出……等）非常慢，导致 PL/SQL 环境挂起一段时间（在某些情况下挂起超过 5分钟）。

我的问题是，这是 MSSCCI 的一个已知问题吗？以及我可以做些什么来克服缓慢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:18:37.523

请在 msdn 论坛[http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol](http://social.msdn.microsoft.com/Forums/en-US/tfsversioncontrol)上提出这个问题，因为从事 msscci 的开发人员正在积极监控它。Afaik，Oracle Pl/SQL 未使用 msscci 提供程序进行测试，因此这将是一个新问题。最可能的问题是Oracle Developer非常频繁地查询文件状态，每次都命中服务器，您可以使用跟踪来确认它（http://blogs.msdn.com/b/michalma/archive/2006/12/08 /tracing-in-tfs-msscci-provider.aspx)

# virtualbox - virtual box : 无法从访客系统的浏览器访问主机系统的 wamp phpmyadmin

> ID：10815705
> 
> 赞同：0
> 
> 时间：2012-05-30T11:49:01.087
> 
> 标签：virtualbox

我安装了一个虚拟机，并在其中安装了 Windows 7。我的主机在 XP 上运行。我想从客户操作系统的浏览器（即 9）访问我的 magento 项目，但我无法做到。虽然我可以访问 wamp 索引页面和 phpinfo（通过使用主机 ip）。只有当我尝试访问我的 magento 项目文件或 phpmyadmin 时，浏览器才会显示消息“无法显示网页”。

有人可以告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:23:10.577

确保没有设置安全设置来阻止来自除 localhost (127.0.0.1) 之外的任何其他地方的请求，就像防火墙一样。您需要允许主机虚拟网卡 IP 地址。

phpMyAdmin 中的阻止设置示例：http: [//www.factsandpeople.com/facts-mainmenu-5/18-php/65-allowing-only-local-users-to-phpmyadmin](http://www.factsandpeople.com/facts-mainmenu-5/18-php/65-allowing-only-local-users-to-phpmyadmin)

Apache 中的阻止设置示例： [http ://www.cyberciti.biz/faq/apache-restrict-access-based-on-ip-address-to-selected-directories/](http://www.cyberciti.biz/faq/apache-restrict-access-based-on-ip-address-to-selected-directories/)

我不是magento，但很有可能有类似的设置。

# zend-framework - YouTube API：私人视频访问

> ID：10815708
> 
> 赞同：1
> 
> 时间：2012-05-30T11:49:24.953
> 
> 标签：zend-framework, youtube, youtube-api, gdata

我知道通过设置[yt:private](https://developers.google.com/youtube/2.0/reference?hl=en-EN#youtube_data_api_tag_yt%3aprivate)或[yt:accessControl](https://developers.google.com/youtube/2.0/reference?hl=en-EN#youtube_data_api_tag_yt%3aaccessControl)标签来控制视频的隐私设置（公开、私密、不公开）。但是，对于 YouTube 视频，当它设置为私有时，可以通过电子邮件地址列表或 YouTube 用户名允许访问[视频](http://support.google.com/youtube/bin/answer.py?hl=en-GB&answer=157177)。

有没有办法通过 API 设置这个允许列表？

如果有人知道使用 Zend Gdata 库的解决方案，这将受到欢迎，因为这是我用来与 YouTube API 交互的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:13:04.440

YouTube API 团队的一名成员表示，这不是 API 支持的功能，他们也没有看到它被添加。

[见讨论。](https://groups.google.com/forum/#!topic/youtube-api-gdata/LkfDtwxjWp8/discussion)

# apache - 拒绝直接访问文件，但允许 php 和 html 从 .htaccess 读取它

> ID：10815712
> 
> 赞同：3
> 
> 时间：2012-05-30T11:49:43.720
> 
> 标签：apache, .htaccess

我需要知道如何拒绝访问图像文件夹，但只允许从 php/html 读取它。

我认为最好的方法是在该文件夹中使用 .htaccess 之类的

```
deny from all
Options -indexes
AddHandler cgi-script .php .htm .html .sh
Options -ExecCGI 
```

但这不起作用，因为我必须在根文件夹中具有以下 .htaccess

```
<FilesMatch "\.(gif|jpe?g|doc?x|pdf|zip|png)$">
AddHandler cgi-script .php .htm .html .sh
Allow from all
</FilesMatch>
<Files 403.shtml>
order allow,deny
allow from all
</Files> 
```

解决方案

```
RewriteCond %{HTTP_HOST} ^xxx.com$
RewriteRule ^/?$ "http\:\/\/www\.xxx\.com\/index\.php" [R=301,L] 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?xxx\.com/.*$ [NC]
RewriteRule _files/photo/([^/]+)\.(gif|png|jpg)$ - [F] 
```

也没有工作...？有专家吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:58:09.393

用这个替换你现有的代码：

```
RewriteCond %{HTTP_HOST} ^xxx\.com$
RewriteRule ^$ http://www.xxx.com/index.php [R=301,L] 

RewriteCond %{HTTP_REFERER} !^http://(www\.)?xxx\.com/ [NC] 
RewriteRule ^_files/photo/[^.]+\.(jpe?g|gif|bmp|png)$ - [F,NC] 
```

# jquery - javascript、事件传播和输入字段

> ID：10815714
> 
> 赞同：0
> 
> 时间：2012-05-30T11:49:47.240
> 
> 标签：jquery, click, stoppropagation

所以我有一个输入字段，当你用鼠标与之交互时，它基本上不起作用。这是因为：

*   加载后通过在编辑模式下展开该项目来创建输入
*   为了展开项目，我们在 li 上使用 click 事件，它是标题的父级，被输入替换
*   由于应用程序的工作方式，我们需要使用 live 而不是 click，这会阻止使用 stopPropagation()

所以我们正在使用：

```
$('li').live("click",function(e) {
    if ($(e.target).is('input') ) { return; }

    // do stuff
}); 
```

然后正因为如此，显然每当鼠标尝试单击输入时，无论是移动光标，突出显示其内容等，它都会忽略它。

如果我删除目标行，当我单击输入时，它会关闭 li。

**所以...我的问题：**知道如何在不关闭 li 的情况下使输入可点击，并且仍然能够使用 live 而不是点击吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:16:20.403

您仍然可以使用`e.stopImmediatePropagation()`：

[http://jsfiddle.net/NJ9cb/](http://jsfiddle.net/NJ9cb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:06:24.293

嗨，如果我说得对，您想阻止事件传播，但您不能使用 stopPropagation() 方法。检查 live 方法的文档，如果你想停止传播，你的方法应该返回 false；

查看实时方法的 api 文档：[live()](http://api.jquery.com/live/)

# android - 如何在 TextView 中设置文本？

> ID：10815718
> 
> 赞同：0
> 
> 时间：2012-05-30T11:50:12.503
> 
> 标签：android, textview, android-activity

我有 2 个活动，这是第二个活动的布局（摘录）：

```
<TextView
            android:id="@+id/user"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
<TextView
            android:id="@+id/city"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" /> 
```

在第一个 Activity 中从 JSON 解析相应的值，并调用第二个 Activity 中的函数 setValues：

```
String user = oj.getString("user");
String city = oj.getString("city");

act2.setValues(user, city); 
```

在第二个 Activity 中，代码如下所示：

```
user = (TextView) findViewById(R.id.user);
city = (TextView) findViewById(R.id.city);

public void setValues(String user, String city) {
    Log.d("user", user); // THIS IS BEING RETURNED
    this.user.setText(user);
    this.city.setText(city);
} 
```

正在调用此函数并返回“用户”，但`TextView`s 中的文本没有更改。

**使用可运行：**

```
Intent intent = new Intent(this, Act2.class);
startActivity(intent);
run();

public void run() {
    Log.d("run", "it's running"); // IS RETURNED
    desc.setValues(user, city);
}

// SECOND ACTIVITY
public void setValues(String user, String city) {
    Log.d("user", user); // IS RETURNED

    this.user.setText(user);
    this.city.setText(city);
} 
```

不幸的是，结果仍然是一样的：TextViews 仍然是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:17:24.843

在这里我们不能在您的场景中使用意图吗？

android使用意图....

沃格拉文章

在活动 1-

```
Intent i = new Intent(this, ActivityTwo.class);
i.putExtra("Value1", "This value one for ActivityTwo ");
i.putExtra("Value2", "This value two ActivityTwo");

startActivity(i); 
```

在活动 2 中 - 在 onCreate 函数中

```
Bundle extras = getIntent().getExtras();

if (extras == null) {
        return;
        }
// Get data via the key
String value1 = extras.getString(Intent.EXTRA_TEXT);
if (value1 != null) {
    // Do something with the data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:24:24.283

确保该`setValues()`方法在**UIThread**上运行。请参阅：[无痛线程](http://developer.android.com/resources/articles/painless-threading.html)和[进程和线程](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)。

# python - SSH 使用子进程模块的 linux 机器

> ID：10815723
> 
> 赞同：1
> 
> 时间：2012-05-30T11:50:35.947
> 
> 标签：python, subprocess, fabric, paramiko, pexpect

我有一个要求，我需要执行以下操作

我需要 ssh 到一个 linux 机器，运行一个命令，取回输出，我需要做一些操作。

这可以通过python子进程模块实现吗？

基本上我需要一个 .py 代码，我将在其中提供 IP 地址、用户名和密码以连接到 linux 机器并运行命令并获取输出。

这也可以通过 Python 中可用的任何其他模块实现。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:23:34.687

你的问题被标记为“paramiko”，那么你为什么不直接使用它呢？

> 我需要 ssh 到一个 linux 机器，运行一个命令，取回输出，我需要做一些操作。

**ssh 到 linux 机器（或任何其他 ssh 服务器）：**

```
>>> import paramiko
>>> ssh=paramiko.SSHClient()
>>> ssh.load_system_host_keys()
>>> ssh.connect(hostname='localhost', username='haiprasan86', password='secret')
>>> print ssh
<paramiko.SSHClient object at 0xdf2590> 
```

**运行命令：**

```
>>> _, out, err = ssh.exec_command('ls -l /etc/passwd')
>>> # block until remote command completes
>>> status = out.channel.recv_exit_status()
>>> print status
0 
```

**取回输出：**

```
>>> print out.readlines()
['-rw-r--r--. 1 root root 2351 Mar 27 10:57 /etc/passwd\n'] 
```

我不知道你想做什么操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:53:06.710

如果它只是一个命令，您可以简单地将其附加到命令行：

```
ssh user@host "echo foo" 
```

然后会返回 foo. 如果您`ssh-agent`在远程主机的 -file 中使用您的公钥，`~/.ssh/authorized_keys`那么您甚至不需要询问密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:54:27.090

其他选项是[结构](http://fabric.readthedocs.org/)，或者如果您需要与远程命令交互，[fexpect](http://ilogue.com/jasper/blog/fexpect--dealing-with-prompts-in-fabric-with-pexpect/)。

# c# - 缺少组的 SPGroupCollection

> ID：10815725
> 
> 赞同：0
> 
> 时间：2012-05-30T11:50:36.367
> 
> 标签：c#, sharepoint-2010

我试图在 SP 2010 中获得一个用户组。我目前有五个组，但是当我使用`oSPWeb.Groups`. 任何人都知道这是否有任何安全或其他原因？

代码：

```
 using (SPSite oSPsite = new SPSite(_serverUrl))
            {

                using (SPWeb oSPWeb = oSPsite.OpenWeb())
                {

                                SPGroup spGroup = oSPWeb.Groups["AIT Owners"];

                    }   

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:05:15.580

是的，有一个安全原因。[Groups](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.groups.aspx)属性将仅返回已在网站内分配权限的组，而[SiteGroups](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.sitegroups)属性将返回网站集中的所有组。

有关更多信息，有[许多博客文章](http://www.google.com/search?num=100&hl=en&q=spweb%20%22groups%22%20%22sitegroups%22%20difference%20OR%20vs)涵盖了差异。

# ruby-on-rails - Rake 中的任务与“rails”下的任务背后的逻辑是什么

> ID：10815731
> 
> 赞同：3
> 
> 时间：2012-05-30T11:50:54.453
> 
> 标签：ruby-on-rails, rake

我试图掌握一些任务背后的逻辑是“rails”，而其他的，大多数，被发现是 rake 任务。为什么`rails server`而不是`rake server`例如？

我可以理解，在 rake 中无法进行引导：毕竟，在开始使用 rake 之前，您首先需要一个*rakefile和其他要求。*因此，使用二进制文件创建项目`rails`似乎只是实用的。

但是为什么`generate`, `server`,`console`却不是`migrate`or `assets`？我看不出逻辑。有没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:06:24.713

IMO`rails`脚本用于“实时”控制台使用，例如在开发期间。

这些`rake`任务是更“自动化”的任务，例如，可能作为构建或部署周期的一部分运行，例如由 CI 服务器运行。一些 rake 任务可能会将 rails/etc 分组。命令一起（如测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:03:58.757

脚本是开发时一些常见任务的`rake`实用程序/构建工具。例如，您需要进行部署、运行测试、数据库内容、截断日志文件、编译资产……您可以创建自己的自定义 rake 脚本。

`rails`脚本是用于 gem 的位于 script 目录下的 ruby​​ 文件`rails`。这就是宝石的作用。Rails 是一个 ruby​​ Web 框架，因此该命令`rails`用于启动`rails`应用程序，转到`rails`控制台，`generate`文件。它在您安装 gem 时捆绑在一起。

您可以将`rails`命令`bundle`视为捆绑程序的命令。`bundle install`, `bundle update`...都与解决gem依赖有关。`rspec`运行测试的命令...

有些 gem 有一个可执行脚本，例如`rails`, `bundler`, `capistrano`, `whenever`, `rspec`。其他一些宝石没有，例如`builder`，`will_paginate`....

您可以查看如何将可执行文件添加到 gem，[http ://guides.rubygems.org/make-your-own-gem/#adding-an-executable](http://guides.rubygems.org/make-your-own-gem/#adding-an-executable)

# php - 在 php 中插入 mysql 查询时出现未知列错误？

> ID：10815732
> 
> 赞同：0
> 
> 时间：2012-05-30T11:50:54.640
> 
> 标签：php, mysql, insert

尽管阅读了很多帖子，但我无法解决此错误-“字段列表”中的字段文件名，类别可能具有的未知列“alt.atheism1111”。在数字或单词中间，我使用 phpmyadmin 作为数据库

```
function insert_rec($cat,$file,$wordid,$synsetid,$seqno)
{
    $cat=mysql_real_escape_string($cat);
    $file=mysql_real_escape_string($file);
    $wordid=mysql_real_escape_string($wordid);
    $synsetid=mysql_real_escape_string($synsetid);
    $seqno=mysql_real_escape_string($seqno);
    echo $cat."  ". $file ."  ". $wordid."  " . $synsetid."  " . $seqno;
     $sql="INSERT  INTO `wordnet50`.`table`  (`category`,`filename`,`wordid`,`synsetid`,`seqno`) VALUES (`" . $cat . "`,`" . $file. "`,`" . $wordid. " `,`" . $synsetid . "`,`" .$seqno . "`)";
     $result=mysql_query($sql);

    if(!$result)
    {
    die(mysql_error()); 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:54:48.410

```
$sql="INSERT  INTO `wordnet50`.`table`  (`category`,`filename`,`wordid`,`synsetid`,`seqno`) VALUES (`" . $cat . "`,`" . $file. "`,`" . $wordid. " `,`" . $synsetid . "`,`" .$seqno . "`)"; 
```

您只需从上述查询中的值中删除“`”并将其替换为“'”（单引号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T11:55:37.680

对字段名称使用反引号，对值使用单引号。

```
$sql = "INSERT INTO `wordnet50`.`table` (`category`,`filename`,`wordid`,`synsetid`,`seqno`)
        VALUES ('$cat', '$file', '$wordid', '$synsetid', '$seqno')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T11:57:01.623

它应该用单引号而不是反引号括起来。

```
$sql = "INSERT  INTO `wordnet50`.`table`  (`category`,`filename`,`wordid`,`synsetid`,`seqno`) VALUES ('" . $cat . "','" . $file. "','" . $wordid. "','" . $synsetid . "','" .$seqno . "')"; 
```

`BackTick`转义**[MYSQL Reserved WORDS](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)**。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-30T12:01:26.347

如果您可以发布您的数据库架构，那么它会很容易检查，截至目前，您似乎有一个字段为 alt.atheism1111，它可以成为显示停止器

或使用这个：

```
 $sql = "INSERT INTO `wordnet50`.`table` (`category`,`filename`,`wordid`,`synsetid`,`seqno`)
    VALUES ('$cat', '$file', '$wordid', '$synsetid', '$seqno')"; 
```

# android - 如何使用 sax 显示 XML 解析

> ID：10815733
> 
> 赞同：1
> 
> 时间：2012-05-30T11:51:04.573
> 
> 标签：android, xml-parsing, saxparser

我想使用这个 URL 的 SAX 创建 xml 解析

```
http://news.google.com/?output=rss 
```

但我收到了错误，请检查并让我知道我在哪里出错，或者如果我的问题有其他解决方案。

我在这一行的 GoogleNewsSaxActivity.class 中遇到错误

```
for (int i = 0; i < baseParserData.getTitle().size(); i++) { 
```

我的代码如下。

GoogleNewsSaxActivity.class

```
public class GoogleNewsSaxActivity extends Activity {

BaseFeedParser baseParserData;

 ArrayList<HashMap<String, String>> items = new ArrayList<HashMap<String, String>>();
    private myAdapter rssadaptor = null;
    ListView lview;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try {
        SAXParserFactory saxPF = SAXParserFactory.newInstance();
        SAXParser saxP = saxPF.newSAXParser();
        XMLReader xmlR = saxP.getXMLReader();

        URL url = new URL("http://news.google.com/?output=rss");                                                            

        RssHandler myXMLHandler = new RssHandler();
        xmlR.setContentHandler(myXMLHandler);

        xmlR.parse(new InputSource(url.openStream()));

    } catch (Exception e) {
        System.out.println(e);
    }

    baseParserData = RssHandler.baseParserData;

    /** 
     * Run a for loop to set All the TextViews with text until 
     * the size of the array is reached.
     * 
     **/
    for (int i = 0; i < baseParserData.getTitle().size(); i++) {

        System.out.println("value of i==============>" + i);
        HashMap<String, String> map = new HashMap<String, String>();

        map.put("title", baseParserData.getTitle().get(i));
        //map.put("Artist", baseParserData.getArtist().get(i));
        //map.put("Contry", baseParserData.getCountry().get(i));

        items.add(map);

        rssadaptor = new myAdapter(GoogleNewsSaxActivity.this, items);
    }

    lview = (ListView) findViewById(R.id.listView);

    // Getting adapter by passing xml data ArrayList
    rssadaptor = new myAdapter(this, items);
    lview.setAdapter(rssadaptor);

}
} 
```

RssHandler.class

```
public class RssHandler extends DefaultHandler{

/*private List<BaseFeedParser> messages;
//private Message currentMessage;
private StringBuilder builder;*/

String elementValue = null;
Boolean elementOn = false;
public static BaseFeedParser baseParserData = null;

public static BaseFeedParser getBaseParserData() {

    return baseParserData;
}
public static void setBaseParserData(BaseFeedParser baseParserData) {

    RssHandler.baseParserData = baseParserData;
}

/*public List<BaseFeedParser> getMessages(){
    return this.messages;
}*/

@Override
public void startElement(String uri, String localName, String name,
        Attributes attributes) throws SAXException {
    elementOn = true;

    System.out.println("Hello this is startElement : =========>");

    if (localName.equals(BaseFeedParser.CHANNEL))
    {
        baseParserData = new BaseFeedParser();
    } else if (localName.equals(BaseFeedParser.ITEM)) {

    }
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    if (elementOn) {
        elementValue = new String(ch, start, length);
        elementOn = false;
    }

}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    elementOn = false;

    /** 
     * Sets the values after retrieving the values from the XML tags
     * */ 
    if (localName.equalsIgnoreCase(BaseFeedParser.TITLE))
        baseParserData.setTitle(elementValue);
    else if (localName.equalsIgnoreCase(BaseFeedParser.LINK))
        baseParserData.setLink(elementValue);
    else if (localName.equalsIgnoreCase(BaseFeedParser.PUB_DATE))
        baseParserData.setPubDate(elementValue);
    else if (localName.equalsIgnoreCase(BaseFeedParser.DESCRIPTION))
        baseParserData.setDescription(elementValue);

}

} 
```

还有另外两个类 BaseFeedParser.class 和 myAdapter.class ，BaseFeedParser 类包含 Getters/Setters 方法，myadapter 是自定义列表视图的适配器类。

谢谢。

在 LOGCAT 中显示错误

```
05-31 09:42:25.693: I/System.out(279): java.net.SocketException: Permission denied
05-31 09:42:25.713: D/AndroidRuntime(279): Shutting down VM
05-31 09:42:25.713: W/dalvikvm(279): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-31 09:42:25.752: E/AndroidRuntime(279): FATAL EXCEPTION: main
05-31 09:42:25.752: E/AndroidRuntime(279): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rahul.android.sax/com.rahul.android.sax.GoogleNewsSaxActivity}: java.lang.NullPointerException
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 09:42:25.752: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 09:42:25.752: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)
05-31 09:42:25.752: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 09:42:25.752: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 09:42:25.752: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method)
05-31 09:42:25.752: E/AndroidRuntime(279): Caused by: java.lang.NullPointerException
05-31 09:42:25.752: E/AndroidRuntime(279):  at com.rahul.android.sax.GoogleNewsSaxActivity.onCreate(GoogleNewsSaxActivity.java:61)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-31 09:42:25.752: E/AndroidRuntime(279):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-31 09:42:25.752: E/AndroidRuntime(279):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:51:17.887

为此使用下面的代码。

站点列表.java

```
public class SitesList {

    /** Variables */
    private ArrayList<String> name = new ArrayList<String>();
    private ArrayList<String> website = new ArrayList<String>();
    private ArrayList<String> pubdate = new ArrayList<String>();
    private ArrayList<String> desc = new ArrayList<String>();

    /**
     * In Setter method default it will return arraylist change that to add
     */

    public ArrayList<String> getName() {
        return name;
    }

    public void setName(String name) {
        this.name.add(name);
    }

    public ArrayList<String> getWebsite() {
        return website;
    }

    public void setWebsite(String website) {
        this.website.add(website);
    }

    public ArrayList<String> getPubdate() {
        return pubdate;
    }

    public void setPubdate(String pubdate) {
        this.pubdate.add(pubdate);
    }

    public ArrayList<String> getDesc() {
        return desc;
    }

    public void setDesc(String desc) {
        this.desc.add(desc);
    }

} 
```

MyXMLHandler.java

```
public class MyXMLHandler extends DefaultHandler {

    Boolean currentElement = false;
    String currentValue = null;
    public static SitesList sitesList = null;

    public static SitesList getSitesList() {
        return sitesList;
    }

    public static void setSitesList(SitesList sitesList) {
        MyXMLHandler.sitesList = sitesList;
    }

    /**
     * Called when tag starts ( ex:- <name>AndroidPeople</name> -- <name> )
     */
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        currentElement = true;

        if (localName.equals("channel")) {
            /** Start */
            sitesList = new SitesList();
        }

    }

    /**
     * Called when tag closing ( ex:- <name>AndroidPeople</name> -- </name> )
     */
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        currentElement = false;

        /** set value */
        if (localName.equalsIgnoreCase("title")) {
            sitesList.setName(currentValue);
        } else if (localName.equalsIgnoreCase("link")) {
            sitesList.setWebsite(currentValue);
        } else if (localName.equalsIgnoreCase("pubDate")) {
            sitesList.setPubdate(currentValue);
        } else if (localName.equalsIgnoreCase("description")) {
            sitesList.setDesc(currentValue);
        }
    }

    /**
     * Called to get tag characters ( ex:- <name>AndroidPeople</name> -- to get
     * AndroidPeople Character )
     */
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (currentElement) {
            currentValue = new String(ch, start, length);
            currentElement = false;
        }

    }

} 
```

MainActivity.java

```
public class MainActivity extends Activity {
    SitesList sitesList = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView name[];
        TextView website[];
        TextView pubdate[];
        TextView desc[];

        try {

            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            /** Send URL to parse XML Tags */
            URL sourceUrl = new URL(
                    "http://news.google.com/?output=rss");

            /** Create handler to handle XML Tags ( extends DefaultHandler ) */
            MyXMLHandler myXMLHandler = new MyXMLHandler();
            xr.setContentHandler(myXMLHandler);
            xr.parse(new InputSource(sourceUrl.openStream()));

        } catch (Exception e) {
            System.out.println("XML Pasing Exception = " + e);
        }

        /** Get result from MyXMLHandler SitlesList Object */
        sitesList = MyXMLHandler.sitesList;

        /** Assign textview array lenght by arraylist size */
        name = new TextView[sitesList.getName().size()];
        website = new TextView[sitesList.getWebsite().size()];
        pubdate = new TextView[sitesList.getPubdate().size()];
        desc = new TextView[sitesList.getDesc().size()];

        System.out.println("Hello Name size is:- " +sitesList.getName().size());
        System.out.println("Hello website size is:- " +sitesList.getWebsite().size());
        System.out.println("Hello pubdate size is:- " +sitesList.getPubdate().size());
        System.out.println("Hello desc size is:- " +sitesList.getDesc().size());

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < sitesList.getName().size(); i++) {
            name[i] = new TextView(this);
            name[i].setText("Name is = " + sitesList.getName().get(i));
            website[i] = new TextView(this);
            website[i].setText("Link is = " + sitesList.getWebsite().get(i));

            layout.addView(name[i]);
            layout.addView(website[i]);
        }

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < sitesList.getPubdate().size(); i++) {
            pubdate[i] = new TextView(this);
            pubdate[i].setText("Pub date is = "
                    + sitesList.getPubdate().get(i));

            desc[i] = new TextView(this);
            desc[i].setText("Desc is = "
                    + sitesList.getDesc().get(i));

            layout.addView(pubdate[i]);
            layout.addView(desc[i]);
        }

        /** Set the layout view to display */
        setContentView(layout);

    }
} 
```

# jquery - jQuery 图像加载插件

> ID：10815736
> 
> 赞同：0
> 
> 时间：2012-05-30T11:51:17.367
> 
> 标签：jquery

jQuery 图像加载插件

大家好

我正在尝试创建一个带有缩略图的简单幻灯片库。

我正在使用循环插件来创建幻灯片和缩略图

[http://www.ttmt.org.uk/gallerytest/](http://www.ttmt.org.uk/gallerytest/)

缩略图位于窗口底部的粘性页脚中。

我希望幻灯片图像填充窗口的其余部分并在调整窗口大小时进行缩放。

我正在用这个功能做这个

```
 function resizeImg() {
      $('#slideshow img').css({'height':$('#wrap').height()-footerHeight,'width':'auto'});
    } 
```

目前，这在调整窗口大小时有效，但在首次加载图像时无效。

我需要在加载图像时调用该函数。

我发现 imagesloaded 插件看起来可以工作 - [https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

我的问题是我看不到如何在我的代码中使用该插件。

谁能解释我如何使用 imagesloaded 插件来调用我的 resizeImg 函数。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>
      <!--jQuery-->
      <script type="text/javascript" src="js/jquery1.7.2.js"></script>
      <script type="text/javascript" src="js/cycle.js"></script>
      <!--CSS-->

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }
        ul{
          list-style:none;
        }
        /**/
        html, body {
            height:100%;
            text-align:center;
        }
        #wrap {
            margin:auto;
            min-height:100%;
            margin-top:-100px;
            text-align:left;
        }
        * html #wrap {
            height:100%
        }
        #header {
            background:red;
            border-top:100px solid #fff; 
        }
        #footer {
            background:#eee;
            margin:auto;
            height:100px;
            clear:both;
        }
        /**/
        #slideshow img{
          margin:0 0 0 55px;
          height:100%;
        }

        div#thumbWrap {
          position: relative;
          height: 100px;
          width: 500px;
          overflow: auto;
          margin:0 0 0 50px;
        }
        ul#thumbs {
          display: block;
          width: 2000px;
          padding: 15px 0 0 15px;
        }
        ul#thumbs li {
          display: block;
          float: left;
          padding: 0 4px;
        }
        ul#thumbs a {
          display: block;
          text-decoration: none;
        }
        ul#thumbs img {
          border: 3px #fff solid;
        }
        ul#thumbs a:hover img {
          opacity: 0.5;
        }
        #slideshow img { display: none }
        #slideshow img.first { display: block }
      </style>

      </head>

    <body>
      <div id="wrap">
        <div id="header">

        </div><!-- #header -->
        <div id="slideshow">
          <img src="images/plane01.jpg" alt="" class="first"/>
          <img src="images/plane02.jpg" alt="" />
          <img src="images/plane03.jpg" alt="" />
          <img src="images/plane04.jpg" alt="" />
          <img src="images/plane05.jpg" alt="" />
          <img src="images/plane06.jpg" alt="" />
          <img src="images/plane07.jpg" alt="" />
          <img src="images/plane08.jpg" alt="" />
          <img src="images/plane09.jpg" alt="" />
          <img src="images/plane10.jpg" alt="" />
        </div><!-- #content -->
      </div><!-- #wrap -->

      <div id="footer">
          <div id="thumbWrap">
            <ul id="thumbs">

            </ul>
          </div>
      </div>

      <script type="text/javascript">

        $(window).load(function() { 

          resizeImg();
          /*-cycle
          */
          $('#slideshow').cycle({ 
              fx:     'fade', 
              speed:  'fast', 
              timeout: 0, 
              pager:  '#thumbs', 
              before: resizeImg(),

              pagerAnchorBuilder: function(idx, slide) { 
                  return '<li><a href="#"><img src="' + slide.src + '" width="auto" height="50" /></a></li>'; 
              } 
          });
          /*-thumbnailScroll
          */
          var div = $('div#thumbWrap'), ul = $('ul#thumbs'), ulPadding = 15;
          var divWidth = div.width();
          div.css('overflow','hidden');
          var lastLi = ul.find('li:last-child');
          div.mousemove(function(e){   
            var ulWidth = lastLi[0].offsetLeft + lastLi.outerWidth() + ulPadding;        
            var left = (e.pageX - div.offset().left) * (ulWidth-divWidth) / divWidth;         
            div.scrollLeft(left);         
          });

          var footerHeight = $('#footer').height();

          function resizeImg() {
            $('#slideshow img').css({'height':$('#wrap').height()-footerHeight,'width':'auto'});
          }

          $(window)
            .scroll(resizeImg)
            .resize(resizeImg)
            .onload(resizeImg)
        });

      </script>

    </body>

    </html> 
```

- - - - 更新 - - - - -

我现在几乎可以正常工作了。

[http://www.ttmt.org.uk/gallerytest/](http://www.ttmt.org.uk/gallerytest/)

imagesLoaded 插件在加载时调整第一张图像的大小，然后我使用

```
after: resizeImg 
```

在循环函数中调用图像加载后的调整大小函数。

我留下的问题是在图像加载后调用 resizeImg 函数时图像大小的跳跃。

任何人都可以找到解决这种尺寸跳跃的方法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:06:33.353

您可以试试这个（在 $(window).load(...) 事件处理程序中添加此代码）-->

```
$('#slideshow').imagesLoaded( function( $images, $proper, $broken ) {
  // callback provides three arguments:
  // $images: the jQuery object with all images
  // $proper: the jQuery object with properly loaded images
  // $broken: the jQuery object with broken images
  // `this` is a jQuery object of container
  console.log( $images.length + ' images total have been loaded in ' + this );
  console.log( $proper.length + ' properly loaded images' );
  console.log( $broken.length + ' broken images' );
resizeImg(); //<<-- At this point in time, all images are loaded in slideshow container
}); 
```

另外处理[`after`](http://jquery.malsup.com/cycle/options.html)循环插件的回调和调用resizeImg();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:07:03.800

在 resizeImg 中，首先尝试使用 window 而不是“#wrap”来获得最大高度以将图像缩放到：

```
function resizeImg() {
    $('#slideshow img').css({'height':$(window).height()-footerHeight,'width':'auto'});
} 
```

要使用 imagesLoaded 插件，在将脚本添加到其他脚本之后，您可以在窗口滚动、调整大小和 onload 处理程序之后尝试此行：

```
$('#slideshow img').imagesLoaded(resizeImg); 
```

# mysql - MySQL嵌套查询查找错误

> ID：10815741
> 
> 赞同：1
> 
> 时间：2012-05-30T11:51:44.323
> 
> 标签：mysql

我正在尝试使用嵌套查询来避免发出两个不同的查询。我的嵌套查询如下所示；

```
INSERT INTO roles (
   _id, 
   user_id,
   user_role)
VALUES (
((SELECT _id FROM roles ORDER BY _id DESC LIMIT 1)+1), '454', 'USER') 
```

但是当我执行时，我得到了；

> 查找错误 - MySQL 数据库错误：您无法在 FROM 子句中指定目标表“角色”进行更新

此查询是否有任何解决方法，或者我根本无法在同一张表上进行插入和选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:52:50.313

如果你使用 MySQL >= 4.0.14，你可以使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)：

```
INSERT INTO roles (
  _id, 
 user_id,
 user_role
)
SELECT _id + 1, '454', 'USER' FROM roles ORDER BY _id DESC LIMIT 1 
```

但是，看起来您可能只是想制作您的`_id`专栏[`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)，然后不为其提供任何价值。MySQL 将完成剩下的工作：

```
ALTER TABLE roles MODIFY _id INT AUTO_INCREMENT;
INSERT INTO roles (user_id, user_role) VALUES (454, 'USER'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T11:54:08.440

```
INSERT INTO roles 
SELECT _id+1,'454', 'USER' FROM roles ORDER BY _id DESC LIMIT 1 
```

# android - 想要在触摸事件上旋转 min3d 库的 3d 图像

> ID：10815744
> 
> 赞同：6
> 
> 时间：2012-05-30T11:51:53.233
> 
> 标签：android, 3d, image-rotation, min3d

我`min3d` `library`从 google.com 获得了示例代码和示例。

它工作完美，甚至可以使用更改后的图像。

现在我想`.obj`用触摸事件旋转文件，比如用手指触摸旋转汽车。因为它在`gl.rotation`方法中使用动画对象，所以很难理解。我不知道该怎么做，请给我解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-26T09:15:05.780

您可以按如下方式添加触摸事件

```
public boolean onTouchEvent(MotionEvent e) {
  //Your code goes here
  return true;
} 
```

如果您不确定如何在触摸事件上旋转，您可以点击此链接[https://code.google.com/p/min3d/issues/detail?id=70](https://code.google.com/p/min3d/issues/detail?id=70)

# c# - 如何在 Visual Studio Web 安装程序中添加自述文件？

> ID：10815745
> 
> 赞同：5
> 
> 时间：2012-05-30T11:51:54.687
> 
> 标签：c#, asp.net, installation

我们如何在使用 Visual Studio 创建的 Web 安装程序中添加自述文件。安装产品后，自述文件的路径应显示在控制面板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:34:17.830

您可以轻松地添加自述文件，方法是创建自述文件并将其放入应用程序中，方法`contents`是找到其中`text file`、`solutions explorer`右键单击然后转到`properties`。

在属性更改`build action`为`content`，我假设您希望`copy if newer`选择`copy to output folder`

从这里只需进入`file system`您的`Installer project`，`application folder`然后右键单击应用程序文件夹中的空白区域，`panel, add, project output`最后`content files`

这会将您的文本文件放在客户端计算机上安装它的文件夹中，我假设您已经制作了文本文件，如果不是简单地通过右键单击您的项目、添加项目、常规选项卡然后文本来创建一个文件。

*编辑*

谢谢您的回复，点击您的项目，然后选择属性并选择`application`选项卡，您可以通过单击更改所有信息`Assembly Information...`

*编辑 2*

有一个名为 bizTalk 的微软应用程序可以为您完成大部分工作，这里有一个包含更多信息的链接[http://msdn.microsoft.com/en-us/library/aa561017.aspx](http://msdn.microsoft.com/en-us/library/aa561017.aspx)

*编辑 3*

经过大量搜索后，我能做的最好的事情就是为您提供一个路径，该路径将打开一个文件夹供您放置自述文件？

如果您想这样做并修改此路径是否可以编辑，则在安装程序的文件系统中，右键单击并按`add special folder`，然后按自定义文件夹，将其命名为您喜欢的名称，例如 ReadMeFolder? 然后右键单击并转到其属性，将 DefaultLocation 更改为您喜欢的任何内容，但给它一个 ARPREADME 的属性，一旦您构建并安装它，从这里开始，此文件夹路径将位于“自述文件”选项卡下在您的添加和删除程序中，将有一种方法可以更改它，以便它可以定位一个文件，我会再做一些搜索，看看我是否可以让它打开文件而不是包含文件夹

将文件夹属性设置为 ARP.... 因为 ARP 代表添加删除程序，在这里您可以将文件夹设置为与控制面板添加和删除程序有关的某些事情。

# android - Android：我可以在 onpause() 中调用我的 onresume() 吗？

> ID：10815746
> 
> 赞同：0
> 
> 时间：2012-05-30T11:52:01.513
> 
> 标签：android

我希望在我的应用程序进入后台之前，用户应该得到一个对话框，询问我是否要退出这个应用程序。如果用户选择否，那么我希望他应该再次恢复到我的应用程序，而不是启动另一个应用程序。那么，在android中可以吗？一种解决方案可能是这样的，我在**onpause()**或**onstop()中调用****onresume** () 。但这可以做到吗。请帮帮我。

 ***** * *

我的代码是这样的： -

```
public void onPause() {
       AlertDialog.Builder builder = new AlertDialog.Builder(this);
       builder.setMessage("Do you want to quit");
       builder.setCancelable(false);
       builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            MytestprojectActivity.this.finish();
        }
    });

       builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        }
    });

       AlertDialog alert = builder.create();
       alert.show();
       super.onPause(); 
} 
```

首先，我基本上想看看它是否在调用 onpause() 时运行。所以，我得到的是它暂停了我的活动，转到另一个活动，当我的活动重新开始时，它会向我显示对话框。我错过了什么。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:58:57.600

这很简单：

```
public void onBackPressed() {

       final Builder builder = new Builder(this);
        builder.setTitle(R.string.caption);
        builder.setMessage("Do you really want to exit?");
        builder.setPositiveButton(android.R.string.ok, new OnClickListener() {
            @Override
            public void onClick(final DialogInterface dialog, final int which) {
                 Intent intent = new Intent(YourActivity.this, YourActivity.class);
                     intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

                     startActivity(intent);
                     YourActivity.this.finish();
                     dialog.dismiss();

            }
        });
        builder.setNegativeButton(android.R.string.cancel,
                new OnClickListener() {
                    @Override
                    public void onClick(final DialogInterface dialog,
                            final int which) {
                                                  dialog.dismiss();
                    }
                });
        final AlertDialog dialog = builder.create();
        dialog.show(); 
```

}

这应该可以解决您的问题:)

更新：当您的应用程序在后台运行时，肯定会调用 onPause()。因此，在您的 onPause() 中编写此对话框，然后将负按钮的 onClick 调用 startActivity()，意图为 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT。****

# java - 从 InputStream 中读取数据

> ID：10815750
> 
> 赞同：1
> 
> 时间：2012-05-30T11:52:22.160
> 
> 标签：java, io

从`InputStream`使用 API 调用读取数据时，它看起来就像服务器中的流缓冲区已填充，并且此溢出导致与流的断开连接。

有什么方法可以读取多个线程的流，还是有其他解决方案可以避免断开连接？

我正在使用以下代码：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(inputStream, 100*1024),"utf-8"),100*1024);
String line = reader.readLine();
while (line != null) {
    //pooling to thread
    line = reader.readLine();
} 
```

# ubuntu - 在虚拟服务器上重新映射键

> ID：10815754
> 
> 赞同：4
> 
> 时间：2012-05-30T11:52:53.940
> 
> 标签：ubuntu, virtualbox, vagrant, xmodmap

我正在使用 Vagrant 在我的 Mac 上运行一个虚拟 Ubuntu 盒子（它在后台使用 VirtualBox）。当我登录到虚拟框时，我想重新映射我的大写锁定键以逃避，但否则保持未映射。我在登录到该框时尝试使用 xmodmap，如下所述：

[http://ubuntuforums.org/showthread.php?t=263385](http://ubuntuforums.org/showthread.php?t=263385)

当我运行 xmodmap 时，我收到此错误：

`xmodmap: unable to open display ''`

我觉得这与我基本上是远程进入虚拟盒子的事实有关，但就我的理解而言，我对此毫无疑问也是错误的。我能做些什么来完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:06:43.837

在 ubuntu 上登录一个终端，设置 DISPLAY=localhost:0.0 然后在该终端上的 vm 上运行 xmodmap。

X display 分两部分运行：你的程序的客户端，xterm 或 xmodmap 和服务器，与（虚拟）显示对话的进程。xmodmap 告诉 x 服务器以不同的方式解释键。

你会这样做，就像你坐在直接运行 ubuntu 的机器上一样。xmodmap 发生在 vm 上并修改在虚拟机上运行的 x 服务器。...正如上面的评论所暗示的。

如果要通过 ssh 进入 vm，关键是正确设置 DISPLAY 变量。它必须告诉 Xmodmap 在哪里可以找到 x 服务器。

对不起，我没有时间测试这个确切的情况。评论问题。-克里斯

# c# - 如何检测匿名配置文件

> ID：10815765
> 
> 赞同：4
> 
> 时间：2012-05-30T11:53:41.053
> 
> 标签：c#, asp.net, .net, asp.net-membership, asp.net-profiles

我正在学习如何在 .NET 中使用 Membership 和 Role 附带的 Profile。但是，我不确定设置值的链的顶部在哪里：

```
//Q1\. Does it mean I set auth manually when loading user, or create it if not already exists? 
//Or am I meant to get the isauth value from somewhere and pass it in?
var currentUserProfile = ProfileBase.Create(Membership.GetUser().UserName, isauth);
var anyUserProfile = ProfileBase.Create(strNewUser, isauth);
//isauth: true to indicate the user is authenticated;
//        false to indicate the user is anonymous. 
```

并获得价值：

```
//Q2\. Are res1 and res2 below reflecting the same thing?
//Gets a value that indicates whether the user has been authenticated
bool res1 = HttpContext.Current.User.Identity.IsAuthenticated;
//Gets a value indicating whether the user profile is for an anonymous user
bool res2 = HttpContext.Current.Profile.IsAnonymous; 
```

我对他们每个人的身份验证/匿名关系感到困惑。哪一种是获取/设置用户进行身份验证或匿名的正确方法？我的目标是让匿名用户和经过身份验证的用户都拥有个人资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T07:27:37.253

和不同`res1`，`res2`因为它的值取决于 IIS 配置中的设置。

您可以在 IIS 中启用“匿名访问”以将匿名身份与用户帐户绑定

> 来自 Codeproject：
> 如果您在 IIS6 中以匿名模式运行此代码，您将不会获得如下所示的详细信息。 ![在此处输入图像描述](../Images/a6eb7c3ba2bf63fdc07947684ec0ac64.png)

看看下面关于 asp.net 身份验证和授权的文章：http:
[//www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization](http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization)

在 IIS7 中，您可以导航到安全 >> 身份验证，如下所示：

![在此处输入图像描述](../Images/36eee96b2896079afec179803582d11f.png)

![在此处输入图像描述](../Images/cada79deaba1f9be5f6e23acfdea81e7.png)

# spotify - Spotify 应用程序标签 - 更新缓存

> ID：10815766
> 
> 赞同：0
> 
> 时间：2012-05-30T11:53:41.163
> 
> 标签：spotify

如果 href 包含 spotifyURI，我正在尝试在选项卡播放列表中显示 div。这将用于在选项卡下显示播放列表。

一步一步这是我的问题：

1.  单击播放列表选项卡，然后单击“我的播放列表1”。
2.  href 显示在播放列表选项卡下的播放列表容器中。（到目前为止完美）
3.  单击开始选项卡，然后单击播放列表选项卡。
4.  不再显示播放列表列表，而是再次显示播放列表容器。那么最后使用的url被缓存了吗？
5.  然后，如果再次单击播放列表选项卡，则 url 将被“重置”，播放列表列表将显示并隐藏播放列表容器。

我希望 4\. 立即显示播放列表。有没有办法重置或我错过了什么？

```
<script>
$(document).ready(function() {
    sp = getSpotifyApi(1);   
    var m = sp.require("sp://import/scripts/api/models");
    updateTabs();
    m.application.observe(m.EVENT.ARGUMENTSCHANGED, updateTabs);
    function updateTabs() 
    {   
        console.log(m.application.arguments);
        var args = m.application.arguments;
        $('.section').hide();
        if (args[1] == "spotify") $("#playlist").html("args:"+args).show();
        else $("#"+args[0]).show();
    }
});
</script>

<div id="playlist" class="section">Container for playlist content</div> 
<div id="start" class="section">Welcome</div>  
<div id="playlists" class="section"> 
My <a href="spotify:app:tabtest:playlists:spotify:user:_username_:playlist_uri1">playlist1</a>
My <a href="spotify:app:tabtest:playlists:spotify:user:_username_:playlist_uri2">playlist2</a>
</div> 
```

非常感谢所有回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:58:07.897

以下是我将如何继续使用 JQuery。

首先，您需要使用 Localstorage ：

```
var stor = sp.require("sp://import/scripts/storage"); 
```

然后，例如，如果您获得播放列表列表，则可以像这样构建列表

```
for (var i=0; i<d.playlists.length; i++) {
$('#playlists').append('My <a id="p' + i + '"href="'+ d.playlists[i] +'">playlist1</a>');
$('#playlists #p'+i).live('click', function(e) {
e.preventdefault();
stor.set('choosenplaylist', d.playlists[i]);
});
} 
```

这是现在用于更改 tad 时的存储：

```
if (!stor.get('choosenplaylist')=='') {
location.href=stor.get('choosenplaylist');
} 
```

好的，这是一个建议，需要针对您的应用进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:07:18.843

我现在尝试这个，我可以重现你的错误（我猜这是一个错误，我认为标签*应该*替换 url）

但是，在修复之前，我最好的猜测是在事件处理程序中捕获播放列表链接并取消原始事件，在取消后用适当的播放列表视图替换内容。

[标签测试代码（在 gist.github.com 上）](https://gist.github.com/2875694)

我已经从事件处理程序中抽象出实际的视图绑定，并添加了一个单击事件钩子来调用抽象视图绑定器而不是“真实”绑定器，这也支持深度链接到应用程序

# iphone - 通过objective-c从azure表生成身份验证头

> ID：10815770
> 
> 赞同：3
> 
> 时间：2012-05-30T11:54:03.683
> 
> 标签：iphone, objective-c, azure, icloud

我正在从 iCloud 获取数据，为此我需要生成一个标头（天蓝色表存储）。

我为此使用了下面的代码，它正在生成标题。但是当我在我的项目中使用这些标头时，它显示“确保授权标头的值正确形成，包括签名。”

我用谷歌搜索了很多代码并尝试了很多代码，但都是徒劳的。

任何人都可以请帮我解决我在这段代码中出错的地方。

```
-(id)generat
{
    NSString *messageToSign = [NSString stringWithFormat:@"%@/%@/%@", dateString,AZURE_ACCOUNT_NAME, tableName];

    NSString *key = @"asasasasasasasasasasasasasasasasasasasasas==";

    const char *cKey = [key cStringUsingEncoding:NSUTF8StringEncoding];

    const char *cData = [messageToSign cStringUsingEncoding:NSUTF8StringEncoding];

    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];

    CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);

    NSData *HMAC = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];

    NSString *hash = [Base64 encode:HMAC];

    NSLog(@"Encoded hash: %@", hash);

    NSURL *url=[NSURL URLWithString: @"http://my url"];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [request addValue:[NSString stringWithFormat:@"SharedKeyLite %@:%@",AZURE_ACCOUNT_NAME, hash] forHTTPHeaderField:@"Authorization"];

    [request addValue:dateString forHTTPHeaderField:@"x-ms-date"];

    [request addValue:@"application/atom+xml, application/xml"forHTTPHeaderField:@"Accept"];

    [request addValue:@"UTF-8" forHTTPHeaderField:@"Accept-Charset"];

    NSLog(@"Headers: %@", [request allHTTPHeaderFields]);

    NSLog(@"URL: %@", [[request URL] absoluteString]);
     return request; 
}

-(NSString*)rfc1123String:(NSDate *)date
{
    static NSDateFormatter *df = nil;
    if(df == nil)
    {
        df = [[NSDateFormatter alloc] init];
        df.locale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease];
        df.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
        df.dateFormat = @"EEE',' dd MMM yyyy HH':'mm':'ss 'GMT'";
    }
    return [df stringFromDate:date];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:38:30.947

看起来您可能缺少换行符：

```
NSString *messageToSign = [NSString stringWithFormat:@"%@/%@/%@", dateString,AZURE_ACCOUNT_NAME, tableName]; 
```

我不知道Objective-C，但我希望格式是`@"%@\n/%@/%@"`（如果这就是字符串文字中的换行符在这种编程语言中的工作方式）。

另外，我认为您将需要这两个标题：

```
DataServiceVersion:1.0;NetFx
MaxDataServiceVersion:1.0;NetFx 
```

**编辑**：在我看来，这些标头可能出现在您代码的另一部分中。您可能还需要`x-ms-version`标头（也可能出现在代码的其他地方）。**/编辑**

我不能凭良心*不*指出将存储密钥放在客户端（如电话）上是个坏主意。任何获得您的应用程序的人都可以提取密钥并使用它来删除您的所有数据、上传他们的私人 DVD 收藏等。您的存储密钥是一个秘密，因此永远不应该分发给客户。

# javascript - 保存数据 asp.net 后单击按钮显示警报消息

> ID：10815773
> 
> 赞同：2
> 
> 时间：2012-05-30T11:54:22.230
> 
> 标签：javascript, asp.net, alert, code-behind

我想在单击按钮时将记录保存到数据库后显示一条消息“已成功添加”，该按钮已经具有用于对数据进行某些验证的 JS 函数。我尝试了以下代码，但没有显示任何内容。

```
ScriptManager.RegisterStartupScript(this, typeof(Page), "Alert",
"<script>alert('" + "Successfully added" + "');</script>", false); 
```

如何在结束保存过程的弹出窗口中显示成功消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:02:14.520

`Response.Write("<script>alert('Successfully added');</script>");` 在后面的按钮代码上使用 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:09:34.587

试试这个，

```
System.Web.HttpContext.Current.Response.Write("<script language=\"JavaScript\">alert(\"write here what you want\")</script>"); 
```

# java - 本地人工任务服务 jBPM

> ID：10815779
> 
> 赞同：2
> 
> 时间：2012-05-30T11:54:51.613
> 
> 标签：java, workflow, jbpm

我正在使用 jBPM 5.3.0，但是当我尝试为人工任务实现 LocalTask​​Service 时遇到问题。

我试试这段代码：

```
 org.jbpm.task.service.TaskService taskService = new org.jbpm.task.service.TaskService(getEntityManagerFactory(), SystemEventListenerFactory.getSystemEventListener());
        SyncWSHumanTaskHandler syncWSHumanTaskHandler = new SyncWSHumanTaskHandler();
        syncWSHumanTaskHandler.setLocal(true);
        TaskService localTaskService = new LocalTaskService(taskService);
        syncWSHumanTaskHandler.setClient(localTaskService);
        getKnowledgeSession().getWorkItemManager().registerWorkItemHandler("Human Task", syncWSHumanTaskHandler); 
```

但似乎 SyncWSHumanTaskHandler 已被弃用。

所以我想知道是否有人在 jBPM 的最后一个版本中实现它并有一些示例。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:48:10.563

您总是可以找到显示功能的单元测试： [https ://github.com/droolsjbpm/jbpm/blob/master/jbpm-human-task/jbpm-human-task-core/src/test/java/org/jbpm /process/workitem/wsht/local/sync/WSHumanTaskHandlerLocalSyncTest.java](https://github.com/droolsjbpm/jbpm/blob/master/jbpm-human-task/jbpm-human-task-core/src/test/java/org/jbpm/process/workitem/wsht/local/sync/WSHumanTaskHandlerLocalSyncTest.java) 该测试显示了如何使用新类。正如我已经在这里回答的那样： [https ://community.jboss.org/message/738956](https://community.jboss.org/message/738956)

我们正在尝试使所有实现与所有传输以及异步和同步实现的名称保持一致。新的人工任务 WorkItemHandler 被称为：AbstractHTWorkItemHandler -> GenericHTWorkItemHandler & AsyncGenericHTWorkItemHandler -> 然后是不同传输的具体实现：LocalHTWorkItemHandler、HornetQHTWorkItemHandler 和 Mina...

使用 LocalTask​​Service 是可以的。干杯

# actionscript-3 - AS3-Spod 示例或教程？或任何其他 AS3 ORM

> ID：10815780
> 
> 赞同：0
> 
> 时间：2012-05-30T11:54:52.280
> 
> 标签：actionscript-3, orm, air

有人对 as3-spod 有任何经验吗？我从 github 和 as3-signals 下载了源代码并开始尝试它，但是我需要很长时间才能通过反复试验来了解该框架，并且可能会错过很多最佳实践。该框架看起来不错，但缺少示例。git页面没有很多关于那个的信息......

如果有人知道我可以在有任何文档的纯 AS3 项目上使用的其他 AIR ORM，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:40:35.063

我希望做一个问题评论要求澄清，但我还没有足够的声誉！所以我会尽量回答。

我正在为我的应用程序使用 as3-spod。它非常可靠，而且大部分都给了我想要的东西。不过，这并不是很理想。我真正想要的是更类似于 ActiveRecord 的东西，或者让您通过以流畅的语法连接条件来生成查询的原始东西。

但是，如果您没有使用 Flex（我没有使用，您也没有使用），那么您的选择就很有限，因为大多数其他 AS3 ORM 都依赖于 Flex 框架的某些部分。除了 as3-spod，我能找到的唯一可能是[Christophe Coenraets 的概念验证，](http://coenraets.org/blog/2008/12/using-the-sqlite-database-access-api-in-air-part-3-annotation-based-orm-framework/)但正如他所指出的，将其开发成一个成熟的 ORM 需要做很多工作：

> 这仍然是一个简单的概念证明，绝不是生产就绪的 ORM 解决方案。

我还没有时间。

你说得对，as3-spod 的文档记录很差。我猜你想看的主要课程是 SpodTable。它来自您执行插入、选择等操作。单个对象的更新可以从对象本身完成。注意 SpodTable 上的各种信号（select、selectAll 等）。要开始使用它，只需使用元数据标记模型类，然后从您的 SpodDatabase 实例调用 createTable(MyModelClass)。

我对 as3-spod 的主要抱怨是这些（我列出了它们，这样你就不会寻找不存在的功能，我浪费了相当多的时间！）：

*   它异步工作。不管你的实际 SQLConnection 是同步打开还是异步打开；你必须听信号。这意味着您不能检索记录然后以相同的方法立即使用它们，您必须听取信号。我倾向于在应用程序启动时进行大量选择，然后过滤内存中的数据，而不是进行复杂的查询。很烦人。

*   小心数字列的空值。我看不到使用 as3-spod 为列设置 NULL 或 NOT NULL 的方法；它似乎总是使它们不为空，如果您尝试从具有空字段的对象中插入一行，这将导致错误。

*   没有迁移系统（a la Rails）。我正在努力推出自己的产品，因为这是我的基本功能（这是我正在开发的移动应用程序）。

祝你好运！如果您还希望我介绍任何其他具体内容，请在评论中告诉我，我可以扩展此答案。

**编辑** 我刚刚注意到[AS3SQLite](https://github.com/pranavh/AS3SQLite/)的存在。还没有使用它，但看起来还有其他可能性:)

# python - redis send_command 找不到错误

> ID：10815782
> 
> 赞同：0
> 
> 时间：2012-05-30T11:55:06.713
> 
> 标签：python, redis

使用 redis 并遵循[http://nullege.com/codes/search/redis.Redis.send_command中的教程](http://nullege.com/codes/search/redis.Redis.send_command)

尝试此示例时：

```
results = r.send_command(
        'ZRANGEBYSCORE %s 0 %s LIMIT 0 %s\r\n' % (
            qk,
            ts,
            limit 
```

就我而言，我得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Redis' object has no attribute 'send_command' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:36:47.093

而 redis.Redis 没有方法 send_command()。这是 Connection 类的一个方法。 [https://github.com/andymccurdy/redis-py/blob/master/redis/connection.py](https://github.com/andymccurdy/redis-py/blob/master/redis/connection.py)

# c++ - 这是 sqrt 函数中的错误吗

> ID：10815783
> 
> 赞同：3
> 
> 时间：2012-05-30T11:55:20.910
> 
> 标签：c++, assembly, x86, standard-library, x87

`sqrt`我创建了一个应用程序来计算 64 位范围内的素数，所以当我尝试使用来自的函数计算 64 位数的平方根时，`math.h`我发现答案不准确，例如当输入是`~0ull`答案应该是`~0u`但我得到的`0x100000000`一个是不正确的，所以我决定使用汇编 x86 语言创建我自己的版本，看看这是否是一个错误，这是我的功能：

```
inline unsigned prime_isqrt(unsigned long long value)
{
    const unsigned one = 1;
    const unsigned two = 2;

    __asm
    {
        test dword ptr [value+4], 0x80000000
        jz ZERO
        mov eax, dword ptr [value]
        mov ecx, dword ptr [value + 4]

        shrd eax, ecx, 1
        shr  ecx, 1
        mov  dword ptr [value],eax 
        mov  dword ptr [value+4],ecx

        fild value
        fimul two
        fiadd one
        jmp REST
ZERO: 
        fild value
REST: 
        fsqrt
        fisttp value
        mov eax, dword ptr [value]
    }
} 
```

输入是奇数以获得其平方根。当我用相同的输入测试我的函数时，结果是一样的。

我不明白为什么这些函数会围绕结果，或者具体为什么`sqrt`指令会围绕结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T12:16:21.277

`sqrt`不四舍五入 - 当您将整数转换为双精度时您会这样做。双精度不能代表 64 位整数可以不损失精度的所有数字。特别是从 2 ^(53)开始，有多个整数将表示为相同的双精度值。

因此，如果将大于 2 ^(53)的整数转换为双精度数，则会丢失一些最低有效位，这就是为什么`(double)(~0ull)`是 18446744073709552000.0，而不是 18446744073709551615.0（或者更准确地说，后者实际上等于前者，因为它们代表相同的双精度数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:12:33.297

您对正在调用的 C++ 函数不是很清楚。`sqrt`是一个重载的名字。你可能想要`sqrt(double(~0ull))`. 没有`sqrt`需要`unsigned long long`.

# c - 在 C 中循环以使 RScript 更高效的性能

> ID：10815789
> 
> 赞同：0
> 
> 时间：2012-05-30T11:56:04.700
> 
> 标签：c, performance, r, loops

我正在尝试计算 100 行 x 2500 列的表中每行之间的成对差异数。

我有一个小的 RScript 可以做到这一点，但运行时间（显然）非常高！我正在尝试用 C 编写一个循环，但我不断收到错误（compileCode）。

您知道如何将以下循环“转换”为 C 吗？

```
pw.dist <- function (vec1, vec2) {

return( length(which(vec1!=vec2)) )

}

N.row <- dim(table)[1]
pw.dist.table <- array( dim = c(dim(table)[1], dim(table)[1]))

for (i in 1:N.row) {
    for (j in 1:N.row) {
        pw.dist.table[i,j] <- pw.dist(table[i,-c(1)], table[j,-c(1)])
    }
} 
```

我正在尝试类似的东西：

```
sig <- signature(N.row="integer", table="integer", pw.dist.table="integer")
code <- "
  for( int i = 0; i < (*N.row) - 1; i++ ) {
    for( int j = i + 1; j < *N.row; j++ ) {
      int pw.dist.table = table[j] - table[i];
    }
  }
"
f <- cfunction( sig, code, convention=".C" ) 
```

在编程方面，我是一个完全的新手！

提前致谢。JMFA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:15:43.323

在尝试优化代码之前，检查时间花在哪里总是一个好主意。

```
Rprof()
... # Your loops
Rprof(NULL)
summaryRprof() 
```

在你的情况下，循环并不慢，但你的距离函数是。

```
$by.total
                    total.time total.pct self.time self.pct
"pw.dist"                37.98     98.85      0.54     1.41
"which"                  37.44     97.45     34.02    88.55
"!="                      3.12      8.12      3.12     8.12 
```

您可以按如下方式重写它（需要 1 秒）。

```
# Sample data
n <- 100
k <- 2500
d <- matrix(sample(1:10, n*k, replace=TRUE), nr=n, nc=k)
# Function to compute the number of differences
f <- function(i,j) sum(d[i,]!=d[j,])
# You could use a loop, instead of outer,
# it should not make a big difference.
d2 <- outer( 1:n, 1:n, Vectorize(f) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:03:13.703

上面的文森特有正确的想法。此外，您可以利用矩阵在 R 中的工作方式并获得更快的结果：

```
n <- 100
k <- 2500
d <- matrix(sample(1:10, n*k, replace=TRUE), nr=n, nc=k)
system.time(d2 <- outer( 1:n, 1:n, Vectorize(f) ))
#precompute transpose of matrix - you can just replace 
#dt with t(d) if you want to avoid this
system.time(dt <- t(d))
system.time(sapply(1:n, function(i) colSums( dt[,i] != dt))) 
```

输出：

```
#> system.time(d2 <- outer( 1:n, 1:n, Vectorize(f) ))
#   user  system elapsed 
#    0.4     0.0     0.4 
#> system.time(dt <- t(d))
#   user  system elapsed 
#      0       0       0 
#> system.time(sapply(1:n, function(i) colSums( dt[,i] != dt)))
#   user  system elapsed 
#   0.08    0.00    0.08 
```

# javascript - 文本对齐不起作用

> ID：10815790
> 
> 赞同：1
> 
> 时间：2012-05-30T11:56:05.980
> 
> 标签：javascript, html, css

我有以下 HTML 代码。[http://jsfiddle.net/Lijo/wJX9C/](http://jsfiddle.net/Lijo/wJX9C/)

我需要将内容（“HAI”和按钮）对齐为中心对齐。我们如何纠正它？

注意：需要在IE7、Chrome下运行

```
<html>
<div id="popup"  class="popup">
       <div id = "poupContentLine1" class="poupContentLine">
            HAI
       </div>
       <div id = "poupContentLine2" class="poupContentLine">
            <input type="submit" name="ctl00$detailContentPlaceholder$btnClose" value="CLOSE" id="detailContentPlaceholder_btnClose" />
       </div>
</div>
</html> 
```

风格

```
.popup 
{
  width:530px;
  background-color:#ffffff;
  border:3px solid Orange;
  padding: 10px 5px 10px 5px;
  margin: 0px 0px 0px 0px;
}

poupContentLine
{
    width:530px; 
    height:auto;
    text-align:center;
    margin: 0px 0px 0px 0px;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T11:57:08.243

你错过了一个`.`

```
.poupContentLine 
```

因为它是一个类名——例如小提琴：http: [//jsfiddle.net/wJX9C/2/](http://jsfiddle.net/wJX9C/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:01:41.837

首先，去掉`popupcontentline`样式；这是不必要的。然后添加`text-align: center`到`.popup`. 此外，将其缩短为`margin: 0;`（与您的问题无关，但所有这些“0”都不是必需的，并延长您的代码。）

示例：http: [//jsfiddle.net/wJX9C/10/](http://jsfiddle.net/wJX9C/10/)

```
.popup
{
    width:530px;
    background-color:#ffffff;
    border:3px solid Orange;
    padding: 10px 5px 10px 5px;
    margin: 0;
    text-align:center;
} 
```

注意：HTML 也可以简化，但我没有做任何事情。

# google-places-api - 如何在 google places api 中获取评论以及如何在评分下方显示评论消息

> ID：10815794
> 
> 赞同：1
> 
> 时间：2012-05-30T11:56:18.237
> 
> 标签：google-places-api

我写了申请找到我的位置附近的特定地点。我从我的应用程序中获得了评级。如何获取特定地点的评论和评论消息。

我在我的代码中从下面这一行得到了评分

```
var ratings = '{"rating":"' + details.rating + '"}'; 
```

如何从 Google API 获取评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T00:14:53.313

Google Places API 当前不支持此功能。[此处](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2477)的 Places API 问题跟踪器中有一个功能请求。请单击“星号”图标以获取有关未来更改的通知，并让我们知道您有兴趣看到它得到解决。

# asp.net - 第 3 方 dll 的程序集绑定失败

> ID：10815796
> 
> 赞同：2
> 
> 时间：2012-05-30T11:56:24.697
> 
> 标签：asp.net, .net, .net-assembly

我正在使用第 3 方 DLL。该 dll 没有强名称，因此我对其进行了签名。我将签名的 DLL 粘贴到我的应用程序的 Layouts Mapped 文件夹中并添加了参考。在运行时，我收到此 DLL 的文件未找到异常。我使用 fuslogvw 来跟踪程序集绑定失败日志。我将在下面粘贴，请指导我。我是.net 的新手

```
*** Assembly Binder Log Entry  (5/30/2012 @ 5:12:13 PM) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v2.0.50727\mscorwks.dll
Running under executable  c:\windows\system32\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = NT AUTHORITY\NETWORK SERVICE
LOG: DisplayName = ExcelLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b182d73c05ed7959
 (Fully-specified)
LOG: Appbase = file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/
LOG: Initial PrivatePath = C:\inetpub\wwwroot\wss\VirtualDirectories\2000\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\4782bf2e
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Temporary ASP.NET Files\root\4782bf2e
LOG: AppName = cf0ac865
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\inetpub\wwwroot\wss\VirtualDirectories\2000\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework64\v2.0.50727\Aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/4782bf2e/cf0ac865/ExcelLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/4782bf2e/cf0ac865/ExcelLibrary/ExcelLibrary.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/bin/ExcelLibrary.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/bin/ExcelLibrary/ExcelLibrary.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/_app_bin/ExcelLibrary.DLL.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/_app_bin/ExcelLibrary/ExcelLibrary.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/4782bf2e/cf0ac865/ExcelLibrary.EXE.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v2.0.50727/Temporary ASP.NET Files/root/4782bf2e/cf0ac865/ExcelLibrary/ExcelLibrary.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/bin/ExcelLibrary.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/bin/ExcelLibrary/ExcelLibrary.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/_app_bin/ExcelLibrary.EXE.
LOG: Attempting download of new URL file:///C:/inetpub/wwwroot/wss/VirtualDirectories/2000/_app_bin/ExcelLibrary/ExcelLibrary.EXE.
LOG: All probing URLs attempted and failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:15:17.260

看起来您正试图在 64 位系统上绑定 32 位第 3 方本机 DLL。注册 DLL 的 x64 版本或更改要为 x86 目标编译的项目。

# c++ - 如何分解向量并将其值用作函数的参数？

> ID：10815797
> 
> 赞同：3
> 
> 时间：2012-05-30T11:56:28.710
> 
> 标签：c++, oracle, boost, vector

我目前正在做的是：

```
std::vector<sometype> myparams;
...
while (...)
  myparams.push_back(somevalue);
...

somefunction(myparams[0], myparams[1], myparams[2], otherargument); 
```

我有许多接受 1 到 100 个参数的函数的实现。我无法更改 somefunction 但是我想知道是否有更漂亮的方式来使用它，因此无论 myparams 的大小如何，都可以通过创建另一个函数/宏来接受向量作为参数并使用向量的所有值调用 somefunction作为论据。

任何的想法 ？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:43:48.537

好吧，你不应该真的这样做，但是你去吧:) 使用 boost::preprocessor：

```
#include "stdafx.h"
#include <vector>

void somefunction(int p1)
    { std::cout << p1 << " " << std::endl;}
void somefunction(int p1, int p2) 
    { std::cout << p1 << " " << p2 << std::endl;}
void somefunction(int p1, int p2, int p3) 
    { std::cout << p1 << " " << p2 << " " << p3 << std::endl;}
void somefunction(int p1, int p2, int p3, int p4)
    { std::cout << p1 << " " << p2 << " " << p3 << " " << p4 << std::endl;}

#define MAX_ARGS 4

#include <boost/preprocessor/repetition.hpp>

void UnpackVector(const std::vector<int> &v)
{
    #define MACRO(z, n, _) \
    case n: somefunction(\
    BOOST_PP_ENUM_BINARY_PARAMS(BOOST_PP_INC(n), v[,]BOOST_PP_INTERCEPT) \
    );break;

    switch(v.size() - 1)
    {
        BOOST_PP_REPEAT(MAX_ARGS, MACRO, nil)
    }
}

void Run()
{
    int v_[] = { 42, 41, 40, 39 };
    std::vector<int> v(v_, v_ + sizeof(v_) / sizeof(int));

    UnpackVector(v);
} 
```

只是为了笑声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:03:37.000

真的不可能。C++ 中的每个函数调用表达式都有固定数量的参数。因此，必须有 100 个函数调用表达式。IE

```
switch (myparams.size()) {
  case 0: somefunction(); break;
  case 1: somefunction(myparams[0]); break;
  case 2: somefunction(myparams[0], myparams[1]); break;
  // etc. 
```

您可能需要为此使用[Boost Preprocessor](http://www.boostpro.com/mplbook/preprocessor.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:02:01.510

如果一组参数经常一起使用，为什么不将它们存储在 a 中`struct`并围绕接受该结构的现有函数进行包装？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:07:56.507

你可以让一些函数接受一对迭代器；这样你得到 0 ... infinity 参数都具有相同的签名。

# video - MPEG-4 和 alpha 透明度 - 正在进行的传奇

> ID：10815805
> 
> 赞同：6
> 
> 时间：2012-05-30T11:57:05.537
> 
> 标签：video, ffmpeg, codec, mpeg-4

我想对以下问题达成某种明确的答案：

1.  基于 MPEG-4 的编解码器是否支持 alpha 透明度？
2.  有什么方法可以合理地确定 的输出中没有 alpha 通道`ffprobe`？

我在这个主题上找到了一些链接：

*   [https://stackoverflow.com/a/5057631/476716](https://stackoverflow.com/a/5057631/476716)

> 此外，基于 H.264 的 QuickTime 电影现在支持透明 Alpha 层（H.264 规范的可选部分）。

*   [http://software.intel.com/en-us/articles/alpha-channel-support-in-the-h264-decoder-in-ipp/](http://software.intel.com/en-us/articles/alpha-channel-support-in-the-h264-decoder-in-ipp/)

> 英特尔® 集成性能基元 6.0 版本现在提供对 H.264 解码器中 alpha 通道的支持。

*   [http://forums.creativecow.net/readpost/335/30475](http://forums.creativecow.net/readpost/335/30475)

> MPEG4 Simple Studio Profile 支持辅助通道，可用于 alpha 或深度 - 甚至可能用于位移、运动矢量、法线等。

但是，我从未见过具体的例子，或者关于如何使用这些已宣布的功能的任何细节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T18:17:38.240

简短的回答是 h.264 不支持 alpha 通道，因为没有解码器/编码器支持该功能。有关更多信息，请参阅此[creativecow 论坛帖子](http://forums.creativecow.net/thread/2/987656)。虽然 alpha 通道在 h.264 视频本身中不起作用，但可以使用 2 个不同的 h.264 视频来获得相同的效果。有关更多信息，请参阅我在 creativecow 论坛上的帖子。

# google-chrome - 更改谷歌浏览器桌面通知的大小

> ID：10815808
> 
> 赞同：3
> 
> 时间：2012-05-30T11:57:41.620
> 
> 标签：google-chrome, google-chrome-extension, notifications

有什么方法可以改变通知窗口的大小吗？我的意思是[这些通知](http://code.google.com/chrome/extensions/notifications.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:06:42.423

没有发现它记录在案，但根据反复试验，它似乎是水平固定大小（284 像素），垂直灵活（最大 144 像素）。任何更大的东西，你都会得到（非常丑陋的）滚动条。

您可能还想查看：

[Chrome 通知的大小](https://stackoverflow.com/questions/10761641/size-of-chrome-notifications/10761802#10761802)

我还注意到“Twitter Notifier”扩展有同样的问题（当推文有时溢出时滚动条）。

# jquery - 由 jquery 从 picasa 加载的图像上的灯箱

> ID：10815809
> 
> 赞同：0
> 
> 时间：2012-05-30T11:57:51.140
> 
> 标签：jquery, html, jquery-delegate

我有一个从 Picasa 相册加载图像的 jquery 插件。但是当我试图添加灯箱时，它不起作用。我已经阅读了一些我们可以在 dom 加载后加载内容时在 jquery 中使用 .delegat 或 .live 或 .on 的地方。但我很困惑。

这是正常情况下的实际代码：

```
jQuery("#ts-display-portfolio a").prettyPhoto({
   animationSpeed:'slow',
   theme:'facebook',
   slideshow:2000
 }); 
```

这是我试图做的，我相信它是错误的：

```
 $(document).delegate(
     "#ts-display-portfolio a", 
     "prettyPhoto", 
     function(){ 
         animationSpeed:'slow',
         theme:'facebook',
         slideshow:2000;
 }); 
```

html是这样的

```
<a href="img/IMG_3884_large.JPG" >
<img  src="img/IMG_3884.JPG">
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:21:50.967

首先，您提供的代码不是很清楚。什么是什么？

但是，如果我理解正确的话，问题是 Picasa 插件生成的 HTML 在 lightBox 插件实例化之前还没有准备好。

来自灯箱网站的代码：

```
$(function() {
$('#gallery a').lightBox({fixedNavigation:true});
}); 
```

所以你需要做两件事：

1) 确保包含照片的元素具有正确的标识符（类或 ID）。在这种情况下，ID 为“gallery” 2) 在加载完成后放置此代码（在 Picasa 脚本中）

```
 $('#gallery a').lightBox({fixedNavigation:true}); 
```

# c++ - Linux 串口读取 - 我可以更改输入缓冲区的大小吗？

> ID：10815811
> 
> 赞同：10
> 
> 时间：2012-05-30T11:57:52.017
> 
> 标签：c++, linux, serial-port

我正在用 C++ 在 Ubuntu Linux 上编写一个应用程序来从串行端口读取数据。它通过我的代码调用成功运行`select()`，然后`ioctl(fd,FIONREAD,&bytes_avail)`在最终使用`read()`.

我的问题是：每次`select`返回数据时，可用字节数报告为 8。我猜这是在某处设置的缓冲区大小，当该缓冲区已满时，select 会向用户返回通知。

作为开发人员，我是 Linux 的新手（但对 C++ 并不陌生），我曾尝试研究（但没有成功）是否可以更改此缓冲区的大小，或者我的假设是否正确。在我的应用程序中，时间很关键，只要读取缓冲区上有新字节，我就需要收到警报。在不深入研究内核代码的情况下，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T13:42:56.443

您想使用`TIOCSSERIAL`允许更改接收缓冲区深度和发送缓冲区深度（除其他外）的串行 IOCTL。最大值取决于您的硬件，但如果使用 16550A，则最大缓冲区深度为 14。

[您可以在此处](http://blog.csdn.net/sno_guo/article/details/17799739)找到与您想要执行的操作类似的代码

原来的链接坏了：[http](http://www.groupsrv.com/linux/about57282.html) ://www.groupsrv.com/linux/about57282.html 在我写另一个或找到更好的例子之前，新的将不得不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:04:36.987

您可以尝试使用 termios 结构的 c_cc 成员的 VMIN 和 VTIME 值。[这里](http://www.linux-tutorial.info/modules.php?name=Howto&pagename=Serial-Programming-HOWTO/index.html)有一些信息，尤其是在第 3.2 节中。

# android - Android Facebook 授权 - 安装官方 Facebook 应用时无法登录

> ID：10815813
> 
> 赞同：10
> 
> 时间：2012-05-30T11:58:08.377
> 
> 标签：android, facebook, authentication, login

我需要登录 Facebook 并获取电子邮件等相同的字段。我使用 Facebook SDK，并在 developers.facebook 中设置我的 Android 密钥哈希并设置“为 Android SSO 配置”。在模拟器和某些设备中，应用程序运行良好。

但是，如果设备上安装了官方 Facebook 应用程序，我的应用程序将无法工作：我按下登录按钮，但我没有看到一个带有 web 视图的对话框，要求我输入密码和登录名。看起来 Stack Overflow 问题*[Using facebook.authorize with the Android SDK does not call onActivityResult](https://stackoverflow.com/questions/8955120)*或 Stack Overflow 问题*[Android Facebook API 单点登录中的问题？](https://stackoverflow.com/questions/8813815)*，但我不明白如何解决它。

### 我的代码

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    this.facebookConnector.getFacebook().authorizeCallback(requestCode, resultCode, data);
}

public void getAccessToken() {
    SessionEvents.AuthListener listener = new SessionEvents.AuthListener() {
        @Override
        public void onAuthSucceed() {
            setupAccessToken(facebookConnector.getFacebook().getAccessToken());
        }

        @Override
        public void onAuthFail(String error) {
            Toast.makeText(getApplicationContext(), getString(R.string.error_login), Toast.LENGTH_SHORT).show();
        }
    };

    SessionEvents.addAuthListener(listener);
    facebookConnector.login();
} 
```

### facebook连接器代码

```
public class FacebookConnector {
    public void login() {
        if (!facebook.isSessionValid()) {
            facebook.authorize(this.activity, this.permissions, new LoginDialogListener());
        }
    }

    private final class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            SessionEvents.onLoginSuccess();
        }

        public void onFacebookError(FacebookError error) {
            SessionEvents.onLoginError(error.getMessage());
        }

        public void onError(DialogError error) {
            SessionEvents.onLoginError(error.getMessage());
        }

        public void onCancel() {
            SessionEvents.onLoginError("Action Canceled");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-30T12:32:58.443

请更新您的应用程序的以下代码。它会解决你的问题。

```
public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:09:55.890

我和你有同样的问题。最后，我用这个解决了：

打开 Facebook SDK 提供的 Facebook.java，然后将其更改如下：

```
public void authorize(Activity activity, String[] permissions,
                      int activityCode, final DialogListener listener) {
    boolean singleSignOnStarted = false;

    mAuthDialogListener = listener;

    /*
    // Prefer single sign-on, where available.
    if (activityCode >= 0) {
        singleSignOnStarted = startSingleSignOn(activity, mAppId,
                                                permissions, activityCode);
    }
    // Otherwise fall back to the traditional dialog.
    if (!singleSignOnStarted) {
    */

    startDialogAuth(activity, permissions);

    // }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:10:03.050

这只是一个疯狂的猜测，但不是这样：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    this.facebookConnector.getFacebook().authorizeCallback(requestCode, resultCode, data);
} 
```

尝试：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    this.facebookConnector.getFacebook().authorizeCallback(requestCode, resultCode, data);
} 
```

由于您没有调用父方法，因此某些事情可能无法按预期工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T16:44:54.790

```
private static Session openActiveSession(Activity activity, boolean allowLoginUI, StatusCallback callback, List<String> permissions) {
    OpenRequest openRequest = new OpenRequest(activity).setPermissions(permissions).setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO).setCallback(callback);
    Session session = new Session.Builder(activity).build();
    if (SessionState.CREATED_TOKEN_LOADED.equals(session.getState()) || allowLoginUI) {
        Session.setActiveSession(session);
        session.openForRead(openRequest);
        return session;
    }
    return null;
} 
```

像这样编辑你的 openactivesession 函数

# jquery-plugins - 数据类型显示错误的列过滤器：使用数据表

> ID：10815816
> 
> 赞同：0
> 
> 时间：2012-05-30T11:58:11.480
> 
> 标签：jquery-plugins

我已经使用此代码为每个字段生成搜索框。但它在**.columnFilter({** . 如何解决这个问题

```
<script type="text/javascript" charset="utf-8">
//initialisation code
    $(document).ready(function() {
        $('#example').dataTable( {
             "sPaginationType": "full_numbers",
             .columnFilter({
        sPlaceHolder: "head:before",
        aoColumns: [ {
                type: "select",
                values: [ 'Gecko', 'Trident', 'KHTML', 
                          'Misc', 'Presto', 'Webkit', 'Tasman']
                 },
                 { type: "text" },
                 { type: "number" },
                 { type: "date-range" },
                 { type: "number-range" }
            ]

        } );
    } );

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:43:30.503

看起来像一个javascript语法问题。尝试更改为：

```
 $(document).ready(function() {
    $('#example').dataTable( {
         "sPaginationType": "full_numbers"
    })
         .columnFilter({
    sPlaceHolder: "head:before",
    aoColumns: [ {
            type: "select",
            values: [ 'Gecko', 'Trident', 'KHTML', 
                      'Misc', 'Presto', 'Webkit', 'Tasman']
             },
             { type: "text" },
             { type: "number" },
             { type: "date-range" },
             { type: "number-range" }
        ]

    } );
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:36:51.413

`$(document).ready(function(){ $('#example').dataTable().columnFilter(); }`)

确保您在 .columnFilter 之前关闭了 dataTable() 括号。

希望它有效。

# android - 去除非应用网站中的安卓输入橙色边框

> ID：10815818
> 
> 赞同：3
> 
> 时间：2012-05-30T11:58:18.863
> 
> 标签：android, input, border, outline

我正在开发一个用于移动设备的主网站版本。我正在尝试从输入文本字段中删除橙色边框...

到目前为止，我尝试了这个:`-webkit-tap-highlight-color: rgba(255, 255, 255, 0);`和`outline:none;`! `border:0px`important.. 它只适用于 Chrome 桌面而不是 Android。

请注意，我不是在开发应用程序，所以我无法使用这个`EditView`东西..

即使不可能，也会感谢任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:26:34.210

简短的回答，你不能。唯一的技巧是使对象不是 href 链接或输入按钮。但是你在 CSS 中所做的任何事情都不会覆盖它。这很烦人。

对于其他一切，使用这个：

> -webkit-tap-highlight-color:rgba(0,0,0,0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T10:39:45.640

这个 CSS 对我有用：

```
*:focus  
{  
    outline: none;  
} 
```

# c# - 将 HTML 嵌入 System.ComponentModel.DescriptionAttribute.Description

> ID：10815820
> 
> 赞同：1
> 
> 时间：2012-05-30T11:58:20.827
> 
> 标签：c#, wcf, .net-4.0

我正在尝试将 HTML（特别是 href）嵌入到 DescriptionAttribute 中，以将自动生成的 WCF 帮助文档中的链接添加到描述所涉及数据结构的更详细的 SandCastle 生成页面。类似于以下内容：

```
[Description(
    "Creates jobs. A detailed description of the Jobs data structure can " +
    "be found <a href=\"http://www.example.com/api/docs/jobs\">here.</a>")]
[WebInvoke(UriTemplate = "Jobs", Method = "POST")]
public Jobs CreateJobs(Jobs jobs)
{
    ...
} 
```

这会在生成的文档中生成以下 HTML，并将我的嵌入 HTML 编码为字符实体：

```
<td>Creates jobs. A detailed description of the Jobs data structure can be found &lt;a href="http://www.example.com/api/docs/jobs\"&gt;here.&lt;/a&gt;</td> 
```

**完全**像这样呈现：

> 创造就业机会。可以在<a href="http://www.example.com/api/docs/jobs\">这里找到 Jobs 数据结构的详细说明。</a>

但我希望它像这样呈现：

> 创造就业机会。Jobs 数据结构的详细描述可以在[这里找到。](http://www.example.com/api/docs/jobs)

我想知道是否可以覆盖 Description 属性以删除字符实体，所以我尝试了这个：

```
class HtmlDescriptionAttribute : System.ComponentModel.DescriptionAttribute
{
    public override string Description
    {
        get
        {
            string description = base.Description;
            //
            // Remove encoding from description here
            //
            return description;
        }
    }

    public HtmlDescriptionAttribute() : base() { }
    public HtmlDescriptionAttribute(string description) : base(description) { }
} 
```

但是在被覆盖的属性中设置一个断点，我发现在这个阶段它还没有被编码。因此，调用此属性的任何内容都可能是添加编码。

有谁知道是否/如何做到这一点？

谢谢！

# javascript - ui.item.parent() 不返回 ul

> ID：10815822
> 
> 赞同：2
> 
> 时间：2012-05-30T11:58:39.063
> 
> 标签：javascript, jquery, jquery-ui-sortable

我正在使用 jQuery UI 的可排序插件。这是我的代码：

```
 $(element).sortable({
        handle: ".handle",
        placeholder: "drophover",
        connectWith: '.day ul',
        helper: "clone",
        scroll: false,
        revert: 100,
 receive: function (event, ui) {
    //ui.item.parent doesn't return ul in console.log. However ui.item outputs li in //console.log
}); 
```

**编辑：**

如果我这样做`$(ui.item).parent()`，它仍然不起作用。附件是来自我的 console.log 的图像

![在此处输入图像描述](../Images/9d6600aeeddebe762ef35b8d5ab30f3d.png)

请注意`ul`没有输出，我的长度是`0`.

**第二次编辑：**看起来我们无法在可排序的“接收”事件中获取父级。如果我在更新中尝试它，它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:00:58.593

代替：

```
ui.item.parent 
```

尝试使用 jQuery 函数：

```
$(ui.item).parent() 
```

您正在使用`parent`，但在 jQuery 中没有像这样命名的*属性。*虽然有功能[`parent()`](http://api.jquery.com/parent/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:07:59.880

在`receive`回调中，只需使用`this`. 它等于您将其放入的容器。在 jQuery 形式中，它只是`$(this)`.

# apache-flex - flex 3.0 中的组织结构图

> ID：10815824
> 
> 赞同：1
> 
> 时间：2012-05-30T11:58:51.217
> 
> 标签：apache-flex, hibernate, ejb-3.0, jaas

目前我们在我们的项目中使用 flex 3.0，我也是 flex 的新手。我们想展示组织结构图。所以在谷歌搜索了很多之后，我从 yFiles 和 IBM ilog 中找到了一些组织结构图示例。但它们都支持 flex 4.0。所以任何人都可以帮助我或为使用 flex 3.0 的组织结构图提供任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:05:51.920

我过去曾为此使用过 KAP Lap 的产品。效果很好。

[http://lab.kapit.fr/default/kaileo/](http://lab.kapit.fr/default/kalileo/)

# java - 一个函数多次调用：为什么？以及不当使用通过 C 的线程？

> ID：10815827
> 
> 赞同：0
> 
> 时间：2012-05-30T11:58:58.813
> 
> 标签：java, c, multithreading, winapi, java-native-interface

通过以下代码，我尝试实现一个简单的击键捕捉器。当用户点击一个键时，他会收到通知。Java 代码加载`dll`运行该`DllMain`方法的方法，并从该方法开始一个新线程。

Java 代码在静态块中加载一个库。`dll`具有`DllMain`执行和打印一些语句的方法。它还从`DllMain`. 在休眠 2 毫秒的 java 程序中也启动了一个新线程。从输出看来，`DllMain`,`installHook`被多次调用。这是为什么 ？问题是什么 ？

虽然在点击键时会通知用户，但为什么多次调用相同的函数？我认为我已经实现了该功能`installHook`或以一种糟糕的方式实现了线程逻辑。

*Java 代码：*

```
package keylogger;

public class TestKeys {
private static int i = 0;
private native void setWinHook();
private native void unregisterWinHook();

public static void main(String args[]) {

    //TestKeys o = new TestKeys();

    System.out.println("After the call to load library !");

    Runnable r = new Runnable() {
        @Override
        public void run() {
            try {
                System.out.println("Sleeping...");
                Thread.sleep(2);
            }catch(Exception exc) {
                exc.printStackTrace();
            }
        }
    };
    new Thread(r,"new thread").start();       
}

static {
    System.loadLibrary("MyHook");
}
} 
```

*C代码：*

```
#include <stdio.h>
#include <windows.h>
#include <w32api.h>
#include "keylogger_TestKeys.h"

static HHOOK handleKeyboardHook = NULL;
HINSTANCE hInst = NULL;
static DWORD hookThreadId = 0;
static HANDLE hookThreadHandle = NULL;
BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved);

static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
 printf("You pressed the key !\n");
 return CallNextHookEx(handleKeyboardHook, nCode, wParam, lParam);
}

BOOL WINAPI DllMain( HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) {
  LPTHREAD_START_ROUTINE lpStartAddress = &installHook;
  printf("From DllMain : %u\n",fwdReason);
  hookThreadHandle = CreateThread(NULL, 0, lpStartAddress, NULL, 0, &hookThreadId);
  if(hookThreadHandle == NULL) {
    printf("\nhookThreadHandle is NULL\n");
  }
  return TRUE;
}

JNIEXPORT void JNICALL Java_keylogger_TestKeys_unregisterWinHook
 (JNIEnv *env, jobject obj) {
   if(handleKeyboardHook != NULL) {
    UnhookWindowsHookEx(handleKeyboardHook);
    printf("Keyboard hook successfully unregistered !");
   } else {
      printf("Coudn't Unhook the keyboard hook !");
     }
} 

BOOL WINAPI installHook(HINSTANCE hinstDLL, DWORD fwdReason, LPVOID lpvReserved) {
printf("From installHook : %u",fwdReason);
handleKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, LowLevelKeyboardProc, hinstDLL, 0);
MSG msg;

while(GetMessage(&msg, NULL, 0, 0))
{
  TranslateMessage(&msg);
  DispatchMessage(&msg);
}
return msg.wParam; 
```

}

*输出 ：*

```
From DllMain : 1
From DllMain : 2
From installHook : 66321916From DllMain : 2
After the call to load library !From installHook : 65797624
From DllMain : 2
From installHook : 67304108From DllMain : 2
From installHook : 60423404From DllMain : 2
From installHook : 67893304From DllMain : 2
From installHook : 68484828From DllMain : 2
From installHook : 69204012From DllMain : 2 
From installHook : 61799988From DllMain : 2
From installHook : 62847812From DllMain : 2
From DllMain : 2
Sleeping... 
From installHook : 71695184From DllMain : 2
From installHook : 70907884From DllMain : 2
From installHook : 70581032From DllMain : 2
From installHook : 72219984From DllMain : 2
From installHook : 73071020From DllMain : 2
From installHook : 66649544From DllMain : 2
From installHook : 73399648From DllMain : 3
From DllMain : 2
From DllMain : 3
From installHook : 73858604From DllMain : 2
From DllMain : 3
From installHook : 75955548From DllMain : 3
From DllMain : 2
From installHook : 72548100From DllMain : 2
From installHook : 74643796From DllMain : 2
From installHook : 75560952From DllMain : 3
From DllMain : 2
From installHook : 71236420From DllMain : 2
From installHook : 74316888From DllMain : 2
From installHook : 77265476From DllMain : 0

hookThreadHandle is NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:15:16.690

从[`DllMain`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)文档中：

> 动态链接库 (DLL) 的可选入口点。当系统启动或终止**进程或线程**时，它会使用进程的第一个线程为每个加载的 DLL 调用入口点函数。当使用 LoadLibrary 和 FreeLibrary 函数加载或卸载 DLL 时，系统还会调用 DLL 的入口点函数。

由于您在该函数中创建了一个线程，因此您基本上在那里有一个无限循环 - `DllMain`（在加载时）创建一个线程，`DllMain`所谓的，启动一个线程，`DllMain`所谓的......

仔细阅读该文档，如果原因不是`DLL_PROCESS_ATTACH`（`1`），您可能不应该做任何事情。（我实际上不确定从该程序启动线程是否合法。）

# linux - 如何使用 monit 轮询多个 pid

> ID：10815828
> 
> 赞同：0
> 
> 时间：2012-05-30T11:59:05.807
> 
> 标签：linux

我有一个产生多个 pid 的脚本，输出如下内容：

```
processname.eth4.pid
processname.eth5.pid
processname.eth8.pid 
```

目前我正在监控这样的个人pid：

```
check process perl
    with pidfile /var/run/processname.eth4.pid
    start = "/usr/bin/perl /usr/local/etc/script.pl"
    stop = "/bin/cat /var/run/processname.eth4.pid  | /usr/bin/xargs kill -9" 
```

有没有一种方法`monit`可以轮询多个 pid 而无需对单个 pid 使用多个语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:15:58.177

您可能`trap check_children SIGCHLD`会收到通知`SIGCHLD`并定义函数`check_children`来检测哪些进程仍然存在，哪些进程不存在。

输入`help trap`bash 以获取更多信息。

# ruby-on-rails - 使用 ruby racer 进行捆绑安装时出错

> ID：10815831
> 
> 赞同：1
> 
> 时间：2012-05-30T11:59:14.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, ruby-1.9.3

在为我的应用程序安装 Bundle 时，我收到与 therubyracer (0.9.4) 相关的错误。

这是错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/kpvarma/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for main() in -lpthread... yes
checking for main() in -lobjc... yes
creating Makefile

make
compiling rr.cpp
clang: warning: argument unused during compilation: '-rdynamic'
rr.cpp:48:1: warning: control reaches end of non-void function [-Wreturn-type]
}
^
rr.cpp:151:44: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
    return String::New(RSTRING_PTR(value), RSTRING_LEN(value));
                                           ^~~~~~~~~~~~~~~~~~
/Users/kpvarma/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:674:6: note: expanded from macro 'RSTRING_LEN'
     RSTRING_EMBED_LEN(str) : \
     ^
/Users/kpvarma/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:670:6: note: expanded from macro 'RSTRING_EMBED_LEN'
     (long)((RBASIC(str)->flags >> RSTRING_EMBED_LEN_SHIFT) & \
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
rr.cpp:151:44: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
    return String::New(RSTRING_PTR(value), RSTRING_LEN(value));
                                           ^~~~~~~~~~~~~~~~~~
/Users/kpvarma/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:675:28: note: expanded from macro 'RSTRING_LEN'
     RSTRING(str)->as.heap.len)
                           ^
3 warnings generated.
compiling v8.cpp
clang: warning: argument unused during compilation: '-rdynamic'
compiling v8_array.cpp
clang: warning: argument unused during compilation: '-rdynamic'
compiling v8_callbacks.cpp
clang: warning: argument unused during compilation: '-rdynamic'
compiling v8_context.cpp
clang: warning: argument unused during compilation: '-rdynamic'
compiling v8_date.cpp
clang: warning: argument unused during compilation: '-rdynamic'
compiling v8_debug.cpp
clang: warning: argument unused during compilation: '-rdynamic'
compiling v8_exception.cpp
clang: warning: argument unused during compilation: '-rdynamic'
v8_exception.cpp:15:8: warning: unused function 'segfault' [-Wunused-function]
  void segfault(int sig) {
       ^
1 warning generated.
compiling v8_external.cpp
clang: warning: argument unused during compilation: '-rdynamic'
v8_external.cpp:10:9: warning: unused variable 'references' [-Wunused-variable]
  VALUE references;
        ^
1 warning generated.
compiling v8_function.cpp
clang: warning: argument unused during compilation: '-rdynamic'
v8_function.cpp:24:23: error: variable length array of non-POD element type 'Handle<v8::Value>'
    Handle<Value> argv[argc];
                      ^
v8_function.cpp:36:23: error: variable length array of non-POD element type 'Handle<v8::Value>'
    Handle<Value> argv[argc];
                      ^
2 errors generated.
make: *** [v8_function.o] Error 1

Gem files will remain installed in /Users/kpvarma/.rvm/gems/ruby-1.9.3-p194/gems/therubyracer-0.9.4 for inspection.
Results logged to /Users/kpvarma/.rvm/gems/ruby-1.9.3-p194/gems/therubyracer-0.9.4/ext/v8/gem_make.out
An error occured while installing therubyracer (0.9.4), and Bundler cannot continue.
Make sure that `gem install therubyracer -v '0.9.4'` succeeds before bundling. 
```

我在 Mac 上使用 ruby​​-1.9.3-p194。

谁能帮帮我？

谢谢问候

# java - ireport 本地化

> ID：10815833
> 
> 赞同：1
> 
> 时间：2012-05-30T11:59:21.530
> 
> 标签：java, jasper-reports

我正在尝试使用属性文件中的属性创建动态消息，并将查询结果中的值合并到其中。

例如：嗨！这是**迪内什**

为了在报告中显示此消息，我将创建一个属性文件，例如 test.properties。它将包含味精=嗨！这是{0}

然后在运行报告时，我会将参数字符串作为“Dinesh”传递以替换 {0}

我们遵循这个过程来在 JSP 中显示动态消息。如何在 iReport 中实现它？

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:33:37.143

我找到了解决方案！:)

我们可以将其用作：

味精（str（“味精”），“Dinesh”）

我们可以用 $F{test2} 之类的变量替换直接字符串“Dinesh”。其中 $F{test2} 是从 sql 查询返回的字段。

# scala - 接口中的所有/大多数方法都应该返回选项吗？

> ID：10815834
> 
> 赞同：4
> 
> 时间：2012-05-30T11:59:22.187
> 
> 标签：scala, functional-programming

将所有可能存在未来实现的接口（特征）方法设置为返回选项的无效参数是否是一种好习惯？

让我举个例子。如果我要实现一个具有特征的概率分布库

```
trait Similarity {
   def getDensity(): Double
} 
```

由于大多数分布不是在整个真实空间上定义的，因此总是存在一些非法参数，例如高斯分布的非正方差。如果我理解正确，我应该返回 an`Option[Double]`而不是 a`Double`并抛出一个`IllegalArgumentException`.

我认为大多数函数/计算也是如此。在这种情况下，什么是“最佳实践”？恐怕这会使图书馆过于笨拙。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:11:49.937

I wouldn't throw an IllegalArgumentException as it is not the arguments that are the problem, but the state of the object. If it were to be an exception, IllegalStateException would match.

However, the real answer depends on what you expect the caller to do in the case of a problem.

If they would themselves throw an exception, that's what you should do, saving them the bother.

If they would do something different based on the answer being impossible, an Option[Double] is a good indicator.

A possibility worth knowing of, but less likely to be useful, is Double.NaN, effectively a Null Object but for Doubles.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:48:58.933

答案主要是风格和意图的问题。

*如果错误实际上是异常情况*，则抛出异常实际上并没有错。如果您决定沿着抛出异常的道路前进，我建议您抛出一个[`ArithmeticException`](http://docs.oracle.com/javase/7/docs/api/java/lang/ArithmeticException.html)，或您编写的它的某个子类，因为这更能说明问题所在。

这是一种可能经常发生的错误，最好由调用者处理吗？还是这种情况更罕见，最好在上层处理？或者甚至可能是一些更基本错误的指标，例如数据或编码问题？

相比之下，整数除以 0 确实是无效的，但是每次除以时都强迫每个人都处理这个问题会很快变老。当您确定您提供的数据不会引发异常时，尤其如此。想象写作`x / 2 + 5`：

```
// normally
x / 2 + 5

// divide returns Option[Int]
(x / 2).map(_ + 5).get

// divide returns Either[ArithmeticException, Int]
(x / 2).right.map(_ + 5).right.get 
```

如果这个错误是调用者可以并且应该处理的，那么`Option[Double]`或者`Either[someErrorClass, Double]`会很好。

`Option`如果您不在乎它为什么失败/无效，那就太好了，就是这样。呼叫者也很容易处理。

`Either`如果它失败的原因有多种，那就太好了，调用者知道原因很重要。不过，这可能比 处理起来稍微困难一些`Option`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:09:14.513

除了已经给出的答案：

`Option`类型并不总是唯一的选择。并且让大多数接口返回 an`Option`当然是不可取的。通常，仅在*调用者可以期望方法有时返回“无”的*情况下才需要。

设计一个好的 API 需要更多的思考。看看你的特质和职业。如果他们不能提供这个或那个财产，他们是否完整？- 如果没有某个属性它们是不完整的，那么该属性不应该是一个`Option`值。相反，您可能会说：如果无法提供该属性，那么该对象将属于不同的类型。

举个例子，考虑一个代表棋盘游戏地图的网格。每个字段都由一个`Cell`数据类型表示。一些单元格可能有颜色。

API 的第一个版本可能如下所示：

```
trait Cell {
  def color:Color
} 
```

现在，在某些时候，您会注意到某些单元格没有颜色。例如，空单元格。或者只包含文本的单元格，这些文本应该以默认的 GUI 颜色呈现。

所以你最终会考虑这个版本：

```
trait Cell {
  def color:Option[Color] = None
} 
```

现在，如果需要，每个`Cell`实现都可以自由地覆盖该`color`属性。但这不是唯一可能的解决方案。

想想这个替代方案：

```
trait Cell { }
trait ColoredCell extends Cell {
  def color:Color
} 
```

现在，单元格的*类型*决定了它是否有颜色，有色单元格必须有颜色。

UI 层上的一些代码可能包含这样的片段：

```
...
val cell:Cell = grid cellAt coordinates
val uiComponent:JComponent = ...
cell match {
  case coloredCell:ColoredCell => uiComponent setColor coloredCell.color
  case _ => // No color assigned
} 
```

这种方法最适用于不可变对象。它们永远不会改变，而是返回一个代表修改后的版本的新实例。

例如，每个单元格可能都有一个设置颜色的方法：

```
trait Cell {
  def withColor(color:Color):ColoredCell
} 
```

*它返回一个新单元格，它表示该*单元格的副本，具有不同的颜色。当然，我们已经知道这将是 的一个实例`ColoredCell`，所以我们将它放在方法契约中。

有时，这种方法可以很好地工作，但您应该事先仔细检查它与您的模型的匹配程度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T12:31:10.950

一般来说，对于一个 API，如果它总是被定义，我会返回 Double，如果它有时对于有效的输入值是未定义的，我会返回 Option[Double]。如果对于无效输入未定义，我将使用 Either[someError,Double] ，其中将为无效输入返回 Left 。（或来自 scalaz 的验证，类似于两者）。

我认为我永远不会返回 null 或抛出异常。如果要返回 Left 指示错误的 Either，则左侧的错误可以是 Throwable（例如 IllegalArgumentException 或 IllegalStateException），但我会避免抛出它。

# c# - InstanceContextMode.Single 和 maxConcurrentSessions 之间的关系

> ID：10815836
> 
> 赞同：0
> 
> 时间：2012-05-30T11:59:24.823
> 
> 标签：c#, wcf

我开发了一个具有以下 instanceContextMode **[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]的 WCF 服务**

现在通过跟踪服务，我知道它会引发以下错误。• 在第一次出现错误时，它会给出以下消息：**已达到最大挂起连接数。** • 在第二次出现时，它给出以下消息：**系统达到为节流阀“MaxConcurrentConnections”设置的限制。此节流阀的限制设置为 200。可以通过修改服务节流阀元素中的属性“maxConcurrentSessions”来更改节流阀值。**

为了解决这个错误，我需要设置 serviceThrottling。

我想了解 InstanceContextMode.Single 和 maxConcurrentSesstions 之间的关系，因为我已经将 InstanceContextMode 设置为 single，然后它也给了我关于 MaxConCurrentSessions 的错误。

请指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:12:02.550

会话和实例化是两个不同的东西。经常会出现混淆，因为您可以使用 PerSession 实例化，它为每个会话创建一个实例。但是，无论实例化模型如何，会话都可以存在

我写了几篇关于这个的博客文章

[WCF 中的会话](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,af6e6325-2e30-42e3-acb9-57e1363fa51e.aspx)

[实例化和线程化](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,1efac821-2b89-47bb-9d27-48f0d6347914.aspx)

这应该有助于澄清关系

# php - Restler 映射受保护的方法

> ID：10815837
> 
> 赞同：0
> 
> 时间：2012-05-30T11:59:26.120
> 
> 标签：php, restler

我正在使用 Restler 2.1.5，并且我有一个索引方法受保护的类。

```
protected function index($id){
//do something
} 
```

我添加了新的受保护方法，但无法调用该方法。

```
protected function method(){
//do stuff
} 
```

当我打电话`http://localhost/api/index.php/class?key=foo` 时它运行一切正常

但是当我打电话 `http://localhost/api/index.php/method?key=foo` 给我找不到

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T23:49:14.920

那是因为你看错地方了！

请尝试以下网址

`http://localhost/api/index.php/class/method?key=foo`

如果您不传递`''`（空白字符串）作为`$r->addAPIClass()`类名称的第二个参数，则该类名称将包含在路由中，因此您也需要将其包含在您的 url 中

您还应该了解优先级的歧义和顺序，阅读[此主题](https://github.com/Luracast/Restler/issues/10)将对您有所帮助

# linux - CFS 调度程序：更改任务的 vruntime 以减慢它的速度

> ID：10815839
> 
> 赞同：2
> 
> 时间：2012-05-30T11:59:28.563
> 
> 标签：linux, linux-kernel, scheduling

我想以某种方式修改 cfs，对于特定进程 id（将在运行时由 sysctl 或 /proc 文件系统定义）vruntime（任务运行的时间量和红黑树的索引） cfs) 被人为地增强，因此 cfs 认为该进程已经运行了很长时间，而实际上它已经运行了，比如说，一半的时间。

我想实现必须使用通常每个 cpu 50% 的相同进程的目标，并让它们使用例如 10% 和 90% ......

想法？如果我只是去编辑vruntime，那么红黑树会搞砸，应该使用什么函数来调整sched_entity中任务的vruntime？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:27:44.397

您不需要在内核中执行此操作。（您的最终目标不是欺骗 cfs）。如果我理解，您需要使特定进程以较低的 CPU 使用率运行。

1.  您可以以较低的调度优先级启动特定进程。

    nice -n 10 your_process 参数

    您可以输入“man nice”以获取更多信息

2.  如果您可以更改特定进程的代码，则可以`nice()`在代码中使用。您也可以键入`man 2 nice`以获取更多信息

3.  您可以使用 cgroup/cpu 来实现它。

    mount -t cgroup -ocpu cgroup /cgroup

    然后使用它。

我建议第一个。

最后，如果您坚持使用内核，您可以尝试使用 __dequeue_entity() 将实体出列并更改 vruntime，然后使用 __enqueue_entity() 将其插入回来。这只是一个提示，可能是错误的，没有人喜欢suck hack，这不是我的答案。

# firefox - 如何在Firefox中检查预检结果缓存的内容

> ID：10815842
> 
> 赞同：18
> 
> 时间：2012-05-30T11:59:36.493
> 
> 标签：firefox, cors

Firefox 是否支持[http://www.w3.org/TR/cors/#preflight-result-cache](http://www.w3.org/TR/cors/#preflight-result-cache)如果支持：

1.  如何查看其内容？
2.  如何从资源缓存中单独清除它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T18:04:44.990

Mozilla 没有提供太多信息，但它看起来像是被缓存了，但是那个缓存没有一个很好的界面来清除它。（[https://bugzilla.mozilla.org/show_bug.cgi?id=803438](https://bugzilla.mozilla.org/show_bug.cgi?id=803438)展示了改变缓存列表的格式，所以它必须存在！）

话虽如此，如果您可以控制服务器，则可以指定 Access-Control-Max-Age 以强制最长寿命。请参阅[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。

这个对相关问题的回答也表明谷歌浏览器将缓存限制为 5 分钟：[https](https://stackoverflow.com/a/12021982/1180785) ://stackoverflow.com/a/12021982/1180785 。

更新：Mozilla 有 24 小时的限制：http: [//monsur.hossa.in/2012/09/07/thoughts-on-the-cors-preflight-cache.html](http://monsur.hossa.in/2012/09/07/thoughts-on-the-cors-preflight-cache.html)（他链接到的行号超出了-日期；现在是 844）。又翻看他引用的代码，好像是在浏览器关闭的时候就清空了，但是没有别的办法可以清空。不过我可能弄错了。

# actionscript-3 - 如何在 flex 中添加数组列表（从 blazeDS 获取）作为树节点

> ID：10815847
> 
> 赞同：0
> 
> 时间：2012-05-30T12:00:09.593
> 
> 标签：actionscript-3, apache-flex, tree, blazeds

我想将数组列表（从 blazeDS 获取）作为节点添加到树中。单击特定节点后，相关列表将从服务层调用。我已经这样做了，但它不是作为同一树中的子节点出现的。

```
<mx:Tree x="45" y="61" id="tree" change="tree_changeHandler(event)" creationComplete="tree_creationCompleteHandler(event)" dataProvider="{getReporteesResult2.lastResult}" labelField="mgrName" width="409"></mx:Tree> 
```

AS3 代码：

下面的函数将数据显示为树中的叶子图标。

```
protected function tree_creationCompleteHandler(event:FlexEvent):void
        {
            getReporteesResult2.token = managerList.getReportees("rjacoby");

        } 
```

单击节点时，服务正在运行，并且我也在获取 rjacoby 下的相关数据。

```
protected function tree_changeHandler(event:Event):void
        {
            managerId=event.currentTarget.selectedItem.mgrId;
            Alert.show(managerId);
            getReporteesResult3.token = managerList.getReportees(managerId); 
```

我希望这些数据应显示为 rjacoby 的子项，并在同一棵树中显示文件夹图标。我怎么能得到那个。请帮忙。

谢谢里米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:01:52.837

树中的每个节点都有一个名为*children*的属性，它是一个数组。该节点的所有子节点都将在此属性内。在您的情况下，当您将分支节点 (rjacoby) 添加到树中时，还要为其创建一个**children[]**。当响应返回时，将您的新项目添加到该节点的 children[] 中。

如果您想要更多控制权，您可以考虑编写一个 TreeUtility 类，该类将使用一些经典算法（广度搜索等）并帮助您遍历整个树。我为平面数据来自服务层的场景之一编写了一个这样的类，我需要创建放置在树中的分层对象。

# android - 创建 TextView-> EditTextVIew 垂直列表的最佳方法？

> ID：10815849
> 
> 赞同：1
> 
> 时间：2012-05-30T12:00:10.763
> 
> 标签：android, android-layout, android-widget

我正在尝试创建 TextView -> EditTextView 的垂直列表。我需要这个来创建一个小输入表单。我尝试使用 2 个垂直线性布局，它们是水平线性布局的子级。然后我将 TextViews 添加到第一个容器，将 EditableTextViews 添加到第二个容器。问题是文本视图的高度与 EditTextView 的高度无关，因此它们无法正确垂直对齐。实现这一目标的最佳方法是什么？使用表格？我很好奇人们如何有效地实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:07:00.620

如果我理解你，你可以使用一个列表视图，其中包含左侧的 textView 和右侧的 Edit 文本

行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/ListItem1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_weight="1" />
    <EditText
        android:id="@+id/edittext1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:selectAllOnFocus="true"
        android:textSize="15dp" 
        android:layout_weight="1" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:17:19.840

您可以将 ListView 与这样的行布局一起使用：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/ListItem1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_weight="1" />
    <EditText
        android:id="@+id/edittext1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:selectAllOnFocus="true"
        android:textSize="15dp" 
        android:layout_weight="1" />
</LinearLayout> 
```

这将在左侧创建一个文本视图，在右侧创建一个编辑文本，每个将占用一半的可用空间。（调整重量数字，让一个比另一个多一些空间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:02:12.603

如果需要，可以使用重力对齐中心............

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-30T12:11:01.177

例如，您可以使用垂直线性布局作为父级并向其添加许多水平线性布局，每个布局都包含 TextView 和 EditableTextView

# android - 如何删除android冰淇淋三明治中的软按钮/菜单？

> ID：10815857
> 
> 赞同：4
> 
> 时间：2012-05-30T12:00:35.650
> 
> 标签：android, android-layout, android-4.0-ice-cream-sandwich

我正在开发一个个人应用程序，它在全屏上应该隐藏底部窗格中的标准菜单按钮。是否需要我将手放在操作系统代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T00:09:39.747

音乐！

您可以通过以下方法隐藏软按钮：

在 super.onCreate(savedInstanceState) 你应该使用 getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);

但是在与屏幕进行任何交互之后，它就会出现。此行为仅在平板电脑中出现，要解决此问题，您应该使用变通解决方案，如：

[根设备](http://forum.xda-developers.com/showthread.php?t=1886460)

[安装并运行 Busybox](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)

[安装隐藏栏](https://github.com/ppareit/HideBar)

更新：来自 Google Play 的另一个免费应用程序，[全屏隐藏菜单/软按钮！](https://play.google.com/store/apps/details?id=de.tsorn.FullScreen&hl=en)

# ruby-on-rails - 使用轮胎宝石为特定领域设置 Elasticsearch 分析器

> ID：10815859
> 
> 赞同：2
> 
> 时间：2012-05-30T12:00:43.700
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一个 Resource 对象，它具有以下字段：**title**、**description**和**body**。

使用轮胎宝石，我想使用标准分析器进行**标题**和**描述**，但对于**身体**领域，我想使用雪球分析器。

所以在我的*resource.rb*文件中，我有以下代码：

```
mapping do
  indexes :title, type: 'string', :index => :not_analyzed, :store => true
  indexes :description, type: 'string'
  indexes :body, type: 'string', :analyzer => 'snowball'
end

def self.search(params)
  search_query = params[:query]

  tire.search(page: params[:page], per_page: 15) do |s|
    s.query { string params[:query], default_operator: "AND"} if params[:query].present?
    # do i need another line here specifically for description?
    #s.query { string "body:#{params[:query]}", analyzer: 'snowball'} if params[:query].present?
  end
end 
```

我将映射中的分析器设置为雪球。我验证这是否有效，因为如果我运行以下命令：

```
curl -XGET localhost:9200/example/_search?q=body:cook 
```

它将返回烹饪、煮熟等。

但是我希望能够通过以下查询

```
curl -XGET localhost:9200/example/_search?q=cooking 
```

我希望elasticsearch在**标题**和**描述字段中搜索单词***cooking* ，并在**body**中搜索单词*cook*。

 *******这可能吗？而且因为我是整个搜索游戏的新手，这甚至是个好主意吗？还是我只是一个在火坑上玩弄汽油罐的人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:16:12.113

When you are not specifying a field in your query the [_all](http://www.elasticsearch.org/guide/reference/mapping/all-field.html) field is searched. The _all field contains copy of all fields and it is using the default analyzer. It's possible to change the default analyzer to snowball as it's explained in [How do I set the default analyzer for elastic search with tire?](https://stackoverflow.com/questions/9670016/how-do-i-set-the-default-analyzer-for-elastic-search-with-tire) And it's also possible to control which fields are included into the _all field.*******

# boost - websocketpp/boost：端点上的 SIGSEGV.get_connection(uri)

> ID：10815866
> 
> 赞同：3
> 
> 时间：2012-05-30T12:01:10.877
> 
> 标签：boost, connection, websocket, segmentation-fault

我正在使用 C++ 开发一个负载测试应用程序，该应用程序旨在测试 - 除其他外 - 我们的音频服务器的流媒体功能。对于这个客户，我使用 websocketpp 并遵循这个[例子](https://github.com/zaphoyd/websocketpp/tree/master/examples/chat_client "websocketpp chat_client 示例")。

我总是在行中得到一个 sigsegv

```
con = endpoint.get_connection(connection_string); 
```

我的 Workthread::Work 方法。

主应用程序在伪代码中看起来像这样

```
namespace blah
{
    TestmanagerClass::run()
    {
        start (additional) threads until limit n is reached;
        call workthread::work() method of each thread;
        handle finished threads;
        goto 1;
    }
} 
```

这是 WorkThread::work()，我用伪代码替换了身份验证代码......

```
namespace blah {
void WorkThread::work()
{
    AudioStreamHandlerPtr handler(new AudioStreamHandler());
    websocketpp::client::connection_ptr con;
    websocketpp::client endpoint(handler);

    try
    {
        // authenticate
        // get login/access token from webservice

        if( !worksOutFine )
        {
            logError();
        }
        else
        { // got access token :D

            // now obtain session token from session service

            if( !worksOutFine )
            {
                logError();
            }
            else
            { // process this session's calls

                std::string connection_string = "ws://localhost";//boost::str(boost::format("ws://%1%/data?user_id=%2%&session_token=%3%") % serverAddressNoPort % session_.userId % sessionToken);
                std::cout << "CONNECTIONSTRING " << connection_string << std::endl;
                con = endpoint.get_connection(connection_string);
                std::cout << "1" << std::endl;
                endpoint.connect(con);
                std::cout << "2" << std::endl;
                boost::thread t(boost::bind(& websocketpp::client::run, &endpoint, false));
                more code....
}
} 
```

连接字符串的输出是最后一个起作用的东西。“1”没有被输出，但出现了 sigsegv。

这是传递给端点构造函数的处理程序代码：

标题：

```
#ifndef __AUDIOSTREAMHANDLER_H__
#define __AUDIOSTREAMHANDLER_H__

#include <boost/shared_ptr.hpp>

#include <websocketpp/roles/client.hpp>
#include <websocketpp/websocketpp.hpp>

namespace blah
{
class AudioStreamHandler : public websocketpp::client::handler
{
    private:
        connection_ptr con_;

    public:
        AudioStreamHandler();
        virtual ~AudioStreamHandler();

        void on_fail(connection_ptr con);
        void on_open(connection_ptr con);
        void on_close(connection_ptr con);
        void on_message(connection_ptr con, message_ptr msg);
        void send(const std::string &msg);
        void close();
};

typedef boost::shared_ptr<AudioStreamHandler> AudioStreamHandlerPtr;
}

#endif  //__AUDIOSTREAMHANDLER_H__ 
```

执行：

```
#include "AudioStreamHandler.h"

namespace blah
{
AudioStreamHandler::AudioStreamHandler()
{
}

AudioStreamHandler::~AudioStreamHandler()
{
}

void AudioStreamHandler::on_fail(connection_ptr con)
{
    std::cout << ">>>>>>>>>>>>>>>>>>>>>>>>>>>>> WebSocket connection failed <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<" << std::endl;
}

void AudioStreamHandler::on_open(connection_ptr con)
{
    con_ = con;
    std::cout << ">>>>>>>>>>>>>>>>>>>>>>>>>>>>> WebSocket connection established <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<" << std::endl;
}

void AudioStreamHandler::on_close(connection_ptr con)
{
    con_ = websocketpp::client::connection_ptr();
    std::cout << "WebSocket connection terminated" << std::endl;
}

void AudioStreamHandler::on_message(connection_ptr con, message_ptr msg)
{
    std::cout << "Got WebSocket message: " << msg->get_payload() << std::endl;
}

void AudioStreamHandler::send(const std::string &msg)
{
    if( con_ ) {
        std::cerr << "Error: no connected session" << std::endl;
        return;
    }

    if( msg == "/close" ) {
        close();
    } else {
        con_->send(msg);
    }
}

void AudioStreamHandler::close() {
    if( !con_ ) {
        std::cerr << "Error: no connected session" << std::endl;
        return;
    }
    con_->close(websocketpp::close::status::GOING_AWAY,"");
}
} 
```

最后是我从 gdb 获得的堆栈跟踪：

```
(gdb) where
#0  0x00000000004aeabd in boost::re_detail::perl_matcher<char const*,         std::allocator<boost::sub_match<char const*> >, boost::regex_traits<char,   boost::cpp_regex_traits<char> > >::match_all_states() ()
#1  0x00000000004af293 in boost::re_detail::perl_matcher<char const*, std::allocator<boost::sub_match<char const*> >, boost::regex_traits<char, boost::cpp_regex_traits<char> > >::match_imp() ()
#2  0x00000000004afeb4 in bool boost::regex_match<char const*, std::allocator<boost::sub_match<char const*> >, char, boost::regex_traits<char, boost::cpp_regex_traits<char> > >(char const*, char const*, boost::match_results<char const*, std::allocator<boost::sub_match<char const*> > >&, boost::basic_regex<char, boost::regex_traits<char, boost::cpp_regex_traits<char> > > const&, boost::regex_constants::_match_flags) ()
#3  0x00000000004a9c47 in websocketpp::uri::uri(std::string const&) ()
#4  0x0000000000441254 in websocketpp::role::client<websocketpp::endpoint<websocketpp::role::client, websocketpp::socket::plain, websocketpp::log::logger> >::get_connection(std::string const&) (this=0x7ffff2501450)
at /usr/include/c++/4.4/bits/stl_vector.h:313
#5  0x0000000000426130 in blah::WorkThread::work (this=0x7c4250) at workthread.cpp:93
#6  0x000000000049658d in boost::_mfi::mf0<void, blah::WorkThread>::operator()(blah::WorkThread*) const (this=0x789cc8) at /usr/include/c++/4.4/ext/new_allocator.h:66
#7  0x0000000000495ffc in void boost::_bi::list1<boost::_bi::value<blah::WorkThread*> >::operator()<boost::_mfi::mf0<void, blah::WorkThread>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, blah::WorkThread>&, boost::_bi::list0&, int) (this=0x789cd8) at /usr/include/c++/4.4/ext/new_allocator.h:66
#8  0x00000000004957eb in boost::_bi::bind_t<void, boost::_mfi::mf0<void,   blah::WorkThread>, boost::_bi::list1<boost::_bi::value<blah::WorkThread*> > >::operator()() (this=0x800000) at /usr/include/c++/4.4/ext/new_allocator.h:66
#9  0x0000000000493a26 in boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, blah::WorkThread>, boost::_bi::list1<boost::_bi::value<blah::WorkThread*> > > >::run() (this=0x789b40)
at /usr/include/c++/4.4/ext/new_allocator.h:66
#10 0x00007ffff79b1693 in thread_proxy () from /usr/lib/libboost_thread.so.1.49.0
#11 0x00007ffff5ade9ca in start_thread (arg=<value optimized out>) at pthread_create.c:300
#12 0x00007ffff5ddbcdd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#13 0x0000000000000000 in ?? () 
```

我已经尝试过使用 boost 的调试版本，但没有得到更多的错误信息。我是简单地使用“ws://localhost”还是真正的连接字符串/uri也没有关系。

有没有人遇到过同样的问题或者有人知道我在这里做错了什么？非常感谢任何帮助。感谢您花时间阅读这篇长文。

# inno-setup - 在 Inno Setup 中禁用静默和非常静默卸载

> ID：10815873
> 
> 赞同：2
> 
> 时间：2012-05-30T12:01:38.843
> 
> 标签：inno-setup

是否可以在 Inno Setup 中禁用静默和非常静默卸载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:39:17.033

您不能直接禁用它，但您可以检查它是否在静默模式下运行并在`InitializeSetup()`/`InitialiseUninstall()`事件功能期间显示消息/退出。

```
function InitializeSetup(): Boolean;
begin
  // Default to OK
  result := true;

  // If it's in silent mode, exit
  if WizardSilent() then
  begin
    MsgBox('This setup doesn''t support silent installations.', mbInformation, MB_OK);
    result := false;
  end;
end; 
```

或卸载：

```
function InitializeUninstall(): Boolean;
begin
  // Default to OK
  result := true;

  // If it's in silent mode, exit
  if UninstallSilent() then
  begin
    MsgBox('This setup doesn''t support silent uninstallation.', mbInformation, MB_OK);
    result := false;
  end;
end; 
```

（未经测试的空气代码）

如果您想以静默方式 (??? :o) 在非静默模式下重新运行设置，您可以在`InitializeSetup`if 块中使用它：

```
ShellExecAsOriginalUser('', ExpandConstant('{srcexe}'), '', '',  SW_SHOWNORMAL, ewNoWait, 0); 
```

请注意，这还将删除传递的任何其他参数并再次提示提升。

# mysql - 这两个查询有区别吗？

> ID：10815876
> 
> 赞同：0
> 
> 时间：2012-05-30T12:02:03.367
> 
> 标签：mysql

好吧，我认为这个问题很简单，但我找不到令人满意的答案。这两个查询有区别吗？

```
SELECT * FROM table WHERE column1 = 'x' OR column2 = 'x'

SELECT * FROM table WHERE (column1 = 'x' OR column2 = 'x') 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:05:49.683

当 AND 运算符还有一个条件时，括号的作用将很有用。否则执行计划除了语法没有区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:05:34.440

除了我上面[的评论之外，手册](http://dev.mysql.com/doc/en/where-optimizations.html)还解释了：

> MySQL执行的一些优化如下：
> 
> *   删除不必要的括号：
>     
>     
>     
>     ```
>        ((a AND b) AND c OR (((a AND b) AND (c AND d))))
>     -> (a AND b AND c) OR (a AND b AND c AND d)
>     ```

所以不，没有任何区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T12:09:27.623

现在您的查询**没有**区别。

`AND`如果您的查询中存在添加条件，则会有所不同。

例如

```
SELECT * FROM table WHERE id=1 AND column1 = 'x' OR column2 = 'x' 
```

和

```
SELECT * FROM table WHERE id=1 AND (column1 = 'x' OR column2 = 'x') 
```

### 笔记

```
SELECT * FROM table WHERE id=1 AND column1 = 'x' OR column2 = 'x' 
```

相当于

```
SELECT * FROM table WHERE (id=1 AND column1 = 'x') OR column2 = 'x' 
```

## 希望你能有所作为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T12:03:49.627

不，没有任何区别。

[在此处](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax.html)查看更多 MySQL 语法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T12:05:25.767

不，它是一样的。只要只有两个条件，大括号就没有多大意义。

# version-control - 如何拒绝推送到尚未批准的 master 分支？

> ID：10815877
> 
> 赞同：4
> 
> 时间：2012-05-30T12:02:04.350
> 
> 标签：version-control, phabricator

如果相应的提交尚未在 Phabricator 中获得批准，我如何拒绝在主分支上收到推送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:21:06.973

Phabricator 本身处理此问题的方式是使用名为*Cowboy Commits*的 Herald 规则：

当提交被推送到 Phabricator、Libphutil、Arcanist 或 Diviner 存储库并且它没有差异修订时，它会触发项目*Cowboy Commits*中的审计。

这仍然需要有人观看*Cowboy Commits*项目，但它至少突出了它们，以便可以快速解决它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:07:26.257

如果您使用“arc land”推送到主分支，则只有在其批准后才会批准推送。如果在没有使用“arc land”的情况下进行推送，则在向上游推送之前无法对其进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:52:08.463

您可以使用预提交挂钩来检查 Phabricator 中的状态，或确保提交消息符合 Phabricator 模板 - 这将防止意外提交。我不确定这将如何工作的确切细节，但这可能是一种通用方法。

# android - 不同的屏幕方向

> ID：10815881
> 
> 赞同：4
> 
> 时间：2012-05-30T12:02:15.370
> 
> 标签：android, android-layout, android-orientation

除了 android-layouts 之外，我还需要一些帮助。对于示例：

实际上，我使用了一个名为 daily.xml 的视图。这些视图包含一个翻转器，如果用户愿意，它会以编程方式填充 5 个 ListViews 来翻转。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/background">

    <de.oszimtcc.timetableview.TimetableFlipperView
        android:id="@+id/flipper"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_margin="20dp"
        android:background="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent" >
    </de.oszimtcc.timetableview.TimetableFlipperView>
</LinearLayout> 
```

TimetableScreen.java 中的翻转器

```
 activity.setContentView(R.layout.daily);
    Log.i(TimetableApplication.LOG_TAG,"Start create Timetable-Aplication");
    activity.setContentView(R.layout.daily);   

    activity.inflater = LayoutInflater.from(this.activity);     
    flipper = (TimetableFlipperView) activity.findViewById(R.id.flipper); 
    dayListView = (ListView) activity.findViewById(R.id.dayListView);
    flipper.AddContent(**Content to show **); 
```

现在，我想添加一个横向模式。在这些模式下，我不会有这样的鳍状肢，因为有足够的空间在水平线性布局上显示所有 ListView。所以我创建了一个布局土地资源文件夹并每天添加另一个。 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:background="@drawable/background">

<de.oszimtcc.timetableview.BlockListView
    android:id="@+id/dayListViewMonday"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" 
    android:padding="5dp"
    android:listSelector="@drawable/day_selector"
    android:background="@android:color/transparent"
android:cacheColorHint="@android:color/transparent">
</de.oszimtcc.timetableview.BlockListView>

...the same ListView again for 4 times, with different android:id...

</LinearLayout> 
```

但是我怎样才能将它处理到我的 TimetableScreen.java 类中？因为没有翻转器，我不能使用我的默认构造函数来初始化类。我应该在每次调用 onCreate 时调用不同的方法还是有更好的可能性处理它？

非常感谢库奇！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:35:50.267

您可以使用`getResources().getConfiguration().orientation`, 来确定屏幕方向。如果它是横向模式，请不要初始化翻转器变量。我刚刚在您的代码中添加了一行，***检查 if 控制语句***。

```
 activity.setContentView(R.layout.daily);
Log.i(TimetableApplication.LOG_TAG,"Start create Timetable-Aplication");
activity.setContentView(R.layout.daily);   

if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_POTRAIT) {   //Check this statement
activity.inflater = LayoutInflater.from(this.activity);     
flipper = (TimetableFlipperView) activity.findViewById(R.id.flipper); 
dayListView = (ListView) activity.findViewById(R.id.dayListView);
flipper.AddContent(**Content to show **);
} else {
//Code for Landscape mode
} 
```

# c - mxmlDelete() 用法

> ID：10815883
> 
> 赞同：0
> 
> 时间：2012-05-30T12:02:17.007
> 
> 标签：c, xml, mini-xml

我使用[mxml](http://www.minixml.org/index.php "小型 XML")库来解析 C 语言中的 XML 文件。我使用以下代码将我的 XML 加载到缓冲区中：

```
mxml_node_t *tree; 
tree = mxmlLoadString(NULL,XMLbuf,MXML_OPAQUE_CALLBACK); 
```

XML 文件很复杂，但目前这无关紧要。

我的问题是：什么时候应该释放 mxml 库函数使用的内存？

一劳永逸地使用这样的代码是否足够：

```
mxmlDelete(tree); 
```

或者我必须对我的每个节点重复这一点，`XML.(mxmlDelete(node1);mxmlDelete(node2);`直到我到达`mxmlDelete(tree);`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:25:47.010

[文档](http://www.minixml.org/documentation.php/reference.html#mxmlDelete)清楚地说明了答案：

> 删除一个节点及其所有子节点。

因此，如果您在顶级节点（树的根）上调用它，则应该完成。

# jquery - 如何动态地将 Html 表转换为 Jquery 表？

> ID：10815889
> 
> 赞同：2
> 
> 时间：2012-05-30T12:02:41.137
> 
> 标签：jquery, html-table

我是 jQuery 的新手。我需要在 jQuery 中动态生成表。

是否有任何工具可用于 jQuery 生成 Html 表？如何将 html 代码中的表格转换为 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:04:09.173

```
var $table = $("<table></table>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:07:47.520

```
$('#your_html_element_id').after
  ('<table><tr><td>...</td></tr><tr><td>...</td></tr></table>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:16:26.643

我有一种感觉，您想使用 jquery 小部件从表中创建一个数据网格。如果是这样的话，你需要做的第一件事就是学会写更多的描述性问题:)

第二件事是搜索 jquery 数据网格。[http://bit.ly/JPqUBb](http://bit.ly/JPqUBb)

过去我在使用 ingrid、flexigrid 和 jqgrid 时运气不错，它们都非常易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T18:41:57.817

对于使用 JQuery 创建表，我建议使用 datatables 插件：

```
http://datatables.net/ 
```

它有很多功能，文档很棒。

# entity-framework-4 - 实体框架 POCO T4 有时会创建一个 EntityCollection，有时会创建一个 FixUpCollection

> ID：10815890
> 
> 赞同：4
> 
> 时间：2012-05-30T12:02:41.300
> 
> 标签：entity-framework-4, poco, t4

我遇到了一个由 POCO T4 模板创建的实体框架 POCO 的奇怪问题——对于某些对象，它们的集合属性创建`EntityCollection`为`FixUpCollection`.

我发现这三个类对产品层次结构进行建模；`ProductGroup`,`Platform`和`Product`. 每个`ProductGroup`都有`Platform`s 的集合，每个`Platform`都有 s 的集合`Product`。所有的关系都是双向的。每个类的集合 getter 和 setter 完全相同，因为它们是由 T4 模板生成的，所以它们看起来（例如）如下所示：

```
public virtual ICollection<Platform> Platforms
{
    get
    {
        if (_platforms == null)
        {
            var newCollection = new FixupCollection<Platform>();
            newCollection.CollectionChanged += FixupPlatforms;
            _platforms = newCollection;
        }
        return _platforms;
    }
    set { ... }
} 
```

有趣的是，*所有*on`Product`和的集合`Platform`都被创建为`EntityCollection`s，而*所有*on 的集合`ProductGroup`都被创建为`FixUpCollection`sie 当代码第一次进入 (eg) 的 getter 时`Platform.Products`，该`_products`字段已经填充了 an `EntityCollection`，但是当它第一次进入上面显示的 getter`_platforms`为 null 并且 a`FixupCollection`被创建并随后填充。延迟加载在这两种情况下都有效，它只是以两种不同的方式工作。

该`Entities`对象启用了延迟加载和代理创建。`Product`,`Platform`和`CoreProduct`对象都是`Entity.DynamicProxies`命名空间中的动态 EF 代理。我试过急切地加载`Platform`and `ProductGroup`，这没有任何区别。我看不出模型查看器中类的设置方式有什么不同。

这让我很头疼，因为其中一个集合`ProductGroup`包含数千个对象，我想查询那个集合。据我所知（如果我错了，请纠正我）如果`FixUpCollection`不将所有对象加载到内存中，我就无法查询 a ，`EntityCollection`因为我可以使用[`CreateSourceQuery()`](http://msdn.microsoft.com/en-us/library/bb896438.aspx). 有没有人见过这种行为？我在某处缺少某些设置吗？任何指示或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:10:41.613

> I can't query a FixUpCollection without loading all the objects into memory, which is not the case for an EntityCollection.

There is no difference between `FixUpCollection` and `EntityCollection` in terms of querying. `EntityCollection` is used by dynamic proxy for lazy loading and if you try to query on the property of this type, lazy loading will still load all records and query will be executed as Linq-to-objects.

Your problem is most probably related to [violating some rule](http://msdn.microsoft.com/en-us/library/dd468057) for creating lazy loding proxy.

# c# - C# 格式化网格汇总值

> ID：10815893
> 
> 赞同：2
> 
> 时间：2012-05-30T12:02:48.863
> 
> 标签：c#, devexpress, footer, summary

我正在使用 DevExpress，我创建了网格，制作了可见的网格页脚，当您在页脚上单击右键时，我可以选择显示每列的摘要，弹出菜单，您可以在其中选择摘要类型。例如最小值，最大值，总和等。我想知道是否可以格式化显示的值，以这种方式设置摘要？因为，当我设置摘要以显示最大值时，它显示“MAX = 10.0200”，但我只想看到“MAX = 10.02”。

```
this.colCostPrice.Summary.AddRange(new DevExpress.XtraGrid.GridSummaryItem[] {
   new DevExpress.XtraGrid.GridColumnSummaryItem(DevExpress.Data.SummaryItemType.Sum,
                                  "CostPrice", "SUM={0:n2}")}); 
```

有代码，如何放置默认摘要（SUM），但是当您选择摘要时，我之前描述的方式，不需要初始化摘要，因为格式是自动设置的。

在本文档中选择摘要类型（观看 Group Summary Context Menus ） [http://documentation.devexpress.com/#WindowsForms/CustomDocument700](http://documentation.devexpress.com/#WindowsForms/CustomDocument700)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:01:17.157

如果您希望有两位小数，请使用“f2”格式字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-19T18:08:54.973

用这个：`DisplayFormat = "{0:#,###.00}"`

# haskell - Haskell 函数反转函数调用

> ID：10815896
> 
> 赞同：9
> 
> 时间：2012-05-30T12:03:06.650
> 
> 标签：haskell

我有一个`\x f -> f x`在操作中使用的 lambda `foldM`，其中`x`是一个值，而`f :: a -> b`.

有没有内置函数可以做到这一点？

我可以更换吗

```
foldM (\x f -> f x) ... 
```

和一些`f'`

```
foldM f' ... 
```

我以为`flip`会这样做，但它需要三个参数 ( `flip :: (a -> b -> c) -> b -> a -> c`)

它可能类似于`|>`F#。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T12:07:05.970

您可以使用`flip id`or `flip ($)`（这`($)`只是`id`功能的特殊之处）：

```
Prelude> flip id 3 (+2)
5
Prelude> flip ($) 7 (>10)
False 
```

这是偏应用的一个有趣用法：`id f x`作为`f`一个函数只是`f x`. 显然，这*也*与 相同，您正在寻找的功能也是`(flip id) x f`如此。`flip id`

如果您喜欢冒险，请尝试手动推断`flip id`或推断类型。`flip ($)`很有趣 ：）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T12:04:58.473

是的，它被称为`flip :: (a -> b -> c) -> b -> a -> c`，例如`flip (>) 3 5 == True`。有关 hackage 的更多信息和来源：[翻转](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3aflip)。

您想要的只是反转函数应用程序的参数，对吗？好吧，既然`($)`是函数应用程序，通过使用翻转你可以编写`flip ($) :: b -> (b -> c) -> c`. 让我们看看会发生什么。这是两个前奏功能的来源：

```
-- from Hackage:
($)                     :: (a -> b) -> a -> b
f $ x                   =  f x

-- from Hackage:
flip                    :: (a -> b -> c) -> b -> a -> c
flip f x y              =  f y x 
```

所以，基本上如果你把类型放在一起，`flip ($)`就变成了

```
flip ($) :: 
  b        ->    -- type of x, argument of y and second argument of ($)
  (b -> c) ->    -- type of y, function applied by ($) as its first argument
  c        ->    -- result of the application "y x" 
```

如果您遵循函数的实际定义：

```
flip ($) = (\f x y -> f y x) ($)    -- from flip's def.
         = \x y -> ($) y x          -- partial application
         = y x                      -- from ($)'s def. 
```

# python - 从字符串中提取路径和文件的最有效方法

> ID：10815900
> 
> 赞同：3
> 
> 时间：2012-05-30T12:03:41.623
> 
> 标签：python, substring

我是 python 新手，只是想知道 python 执行以下操作的最佳方法是什么：

```
file='/var/log/test.txt'
==action== 
```

在==action==之后，我想获取路径和文件，如下所示：

```
path='/var/log'
file_name='test.txt' 
```

我不是问如何做到这一点，我问的是使用最少代码行的最有效方法。

=编辑=

如果我的 file='test.txt' 而不是 file='/var/log/test.txt' 怎么办。我更可能期望：

```
path='.'
path='test.txt' 
```

以外

```
path=''
file_name='test.txt' 
```

那有什么秘诀呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T12:07:21.903

```
file = '/var/log/test.txt'
path, file_name = os.path.split(file) 
```

产量：

```
path
'/var/log'

file_name
'test.txt' 
```

要使用[os.path.split()](http://docs.python.org/library/os.path.html?highlight=os.path.split#os.path.split)需要`import os`. 我不得不认为 Python 库尽可能高效。

要响应更新/编辑，如果未指定路径并且您需要`.`for 路径，请添加：

```
if not path: path = '.' 
```

IE，

```
file = 'test.txt'
path, file_name = os.path.split(file)
if not path: path = '.' 
```

给出：

```
path
'.'

file_name
'test.txt' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T12:07:24.137

你应该看看的[文档](http://docs.python.org/library/os.path.html)，`os.path`有一个`split`功能，例如：

```
path, file_name = os.path.split('/var/log/test/txt') 
```

# perl - Parse::RecDescent 性能问题

> ID：10815907
> 
> 赞同：1
> 
> 时间：2012-05-30T12:03:53.530
> 
> 标签：perl, parse-recdescent

我正在使用 Parse::RecDescent 来解析 Cisco IOS ACL 中的行。ACL用在大型网络的边缘路由器上，所以它包含了政府规定的近8k条线路。我正在遍历每一行并将值放入哈希中。虽然它是 8k 行，但我仍然花费超过 14 秒来解析这些行？这听起来合理吗？对我来说似乎很慢。使用散列与其他数据结构是否有一些开销？

样本输入：（大约 8k 个或类似的）

```
deny   ip 2.3.4.5 0.0.0.7 any log-input
deny   ip 5.6.7.8 0.0.0.255 any log-input
deny   ip host 9.10.11.12 any log-input
deny   ip 13.14.15.16 0.0.31.255 any log-input
permit tcp host 17.18.19.20 host 21.22.23.24 eq bgp
permit icmp 25.26.0.0 0.0.255.255 27.28.0.0 0.0.255.255 
```

这是我的整个解析器：

```
package AccessList::Parser;

use strict;
use warnings;
use Carp;
use Scalar::Util 'blessed';
use Parse::RecDescent;

our $VERSION = '0.05';

sub new {
    my ($class) = @_;
    my $self = { PARSER => undef, };
    bless $self, $class;
    $self->_init();
    return $self;
}

sub _init {
    my ($self) = @_;
    $self->{PARSER} = Parse::RecDescent->new( $self->_grammar() );
}

sub parse {
    my ( $self, $string ) = @_;
    defined ($string) or confess "blank line received";
    my $tree = $self->{PARSER}->startrule($string);
    defined($tree) or confess "unrecognized line\n";
    return visit($tree);
}

#
# Finished tests
#

sub visit {
    my ($node) = @_;

    my $Rule_To_Key_Map = {
        "acl_action"              => 1,
        "acl_protocol"            => 1,
        "acl_src_ip"              => 1,
        "acl_src_port"            => 1,
        "acl_dst_ip"              => 1,
        "acl_dst_port"            => 1,
        "acl_remark"              => 1
    };

    my $parent_key;
    my $result;

    # set s of explored vertices
    my %seen;

    #stack is all neighbors of s
    my @stack;
    push @stack, [ $node, $parent_key ];

    my $key;

    while (@stack) {

        my $rec = pop @stack;

        $node       = $rec->[0];
        $parent_key = $rec->[1];    #undef for root

        next if ( $seen{$node}++ );

        my $rule_id = ref($node);

        if ( exists( $Rule_To_Key_Map->{$rule_id} ) ) {
            $parent_key = $rule_id;
        }

        foreach my $key ( keys %$node ) {
            next if ( $key eq "EOL" );
            my $next = $node->{$key};
            if ( blessed($next) ) {
                if ( exists( $next->{__VALUE__} ) ) {
                    #print ref($node), " ", ref($next), " ", $next->{__VALUE__},"\n";
                    my $rule  = ref($node);
                    my $token = $next->{__VALUE__};
                    $result->{$parent_key} = $token;
                    #print $rule, " ", $result->{$rule}, "\n";
                }
                push @stack, [ $next, $parent_key ];
                #push @stack, $next;
            }
        }
    }
    return $result;
}

sub _grammar {
    my ($self) = @_;

    my $grammar = q{
<autotree>

startrule :
        access_list EOL
    |   acl_remark EOL
    |   <error>

#
# access-lists
#

access_list : acl_action

acl_remark :
        "remark" REMARKS

acl_action :
        ACTIONS acl_protocol

#
# protocol options
#

acl_protocol :
        PROTOCOL acl_src_ip

#
# access-list source IP addresses
#

acl_src_ip :
        address acl_dst_ip
    |   address acl_src_port

#
# access-list source ports
#

acl_src_port : 
        port acl_dst_ip

#
# access-list destination IP address
#

acl_dst_ip :
        address acl_dst_port
    |   address acl_options
    | address CONNECTION_TYPE
    | address LAYER3_OPTIONS
    | IPRANGE

#
# access-list destination ports
#

acl_dst_port : 
        port acl_options
    |   acl_icmp_type acl_options

#
# icmp_types
#

acl_icmp_type :
       ICMP_TYPE

#
# access-list options
#

acl_options :
      acl_logging LAYER3_OPTIONS
    |   acl_logging
    |   EOL
    |   <error>

acl_logging :
            "log-input"
    |       "log"

#
# IP address types
#
# "object" should be fine here because "object" can not  
# be used to specify ports 

address :
        "host" IPADDRESS
    |   "host" NAME
    |   IPNETWORK
    | WILDCARD_NETWORK
    |   ANY

#
# port types
#

port :
        port_eq
    |   port_range
    |   port_gt
    |   port_lt
    |   port_neq

port_eq :
    "eq" PORT_ID

port_range :
    "range" PORT_RANGE

port_gt :
    "gt" PORT_GT

port_lt :
    "lt" PORT_LT

port_neq :
    "neq" <error: neq is unsupported>

#
# Token Definitions
#

STRING :
        /\S+/

DIGIT :
        /\d+/

NAME :
        /((^|\s[a-zA-Z])(\.|[0-9a-zA-Z_-]+)+)/

RULE_REF :
        /\S+/

ANY:
        "any"

IPADDRESS :
        /((\d{1,3})((\.)(\d{1,3})){3})/

MASK :
        /(((255\.){3}(255|254|252|248|240|224|192|128|0+))|((255\.){2}(255|254|252|248|240|224|192|128|0+)\.0)|((255\.)(255|254|252|248|240|224|192|128|0+)(\.0+){2})|((255|254|252|248|240|224|192|128|0+)(\.0+){3}))/

INVERSE_MASK :
        /(0+|1|3|7|15|31|63|127|255)((\.)(255|127|63|31|15|7|3|1|0)){3}/

WILDCARD_NETWORK :
        /((\d{1,3})((\.)(\d{1,3})){3}) (0+|1|3|7|15|31|63|127|255)((\.)(255|127|63|31|15|7|3|1|0)){3}/

IPNETWORK :
        /((\d{1,3})((\.)(\d{1,3})){3}) (((255\.){3}(255|254|252|248|240|224|192|128|0+))|((255\.){2}(255|254|252|248|240|224|192|128|0+)\.0)|((255\.)(255|254|252|248|240|224|192|128|0+)(\.0+){2})|((255|254|252|248|240|224|192|128|0+)(\.0+){3}))/

IPRANGE :
        /((\d{1,3})((\.)(\d{1,3})){3}) ((\d{1,3})((\.)(\d{1,3})){3})/

PROTOCOL :
        /\d+/ | "ahp" | "eigrp" | "esp" | "gre" | "icmp" | "icmp6" | "igmp" 
    | "igrp" | "ip" | "ipinip" | "ipsec" | "nos" | "ospf" | "pcp" 
    | "pim" | "pptp" | "snp" | "tcp" | "udp" | "41" 

GROUP_PROTOCOL :
        "tcp-udp" | "tcp" | "udp"

ICMP_TYPE : 
        /\d+/ | "alternate-address" | "conversion-error" | "echo-reply" | "echo"
    | "information-reply" | "information-request" | "mask-reply" | "mask-request"
    | "mobile-redirect" | "parameter-problem" | "redirect" | "router-advertisement"
    | "router-solicitation" | "source-quench" | "time-exceeded" | "timestamp-reply"
    | "timestamp-request" | "traceroute" | "unreachable"

CONNECTION_TYPE:
        "established"

LAYER3_OPTIONS:
        "fragments" | "packet-too-big"

PORT_ID :
        /\S+/

PORT_GT :
        /\S+/
{
    bless {__VALUE__=>"$item[1] 65535"}, $item[0]
}

PORT_LT :
        /\S+/
{
    bless {__VALUE__=>"1 $item[1]"}, $item[0]
}

PORT_RANGE :
        /\S+ \S+/

ACTIONS :
        "permit"
    |   "deny"

REMARKS :
        /.*$/

LOG_LEVEL :
        /\d+/ | "emergencies" | "alerts" | "critical" | "errors" 
    | "warnings" | "notifications" | "informational" | "debugging"
    | "disable"

EOL :
        /$/ 
};

    return $grammar;
}

1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:21:34.433

性能问题：

*   分解出常见的前缀（例如`address`in `acl_dst_ip`，`IPRANGE`in `acl_dst_ip`）
*   删除不必要的规则（例如`access_list`）

功能问题：

*   您错误地将`remarkfoo`其视为`remark`. 其他地方也有类似错误。
*   您允许标记之间的换行符，但这似乎并不理想。
*   当您应该有更允许的空白定义时，您只允许在某些标记之间使用单个空格。
*   相同的规则视为`0.0.127.4 0.0.127.255`“从 0.0.127.4 到 0.0.127.255”和“从 0.0.0.0 到 0.0.127.255”。（第一个发现获胜，因此将其视为“从 0.0.0.0 到 0.0.127.255”。）甚至不应该在解析器中进行区分。

我开始修复你的代码。（完全未经测试）

```
# make_parser.pl

use strict;
use warnings;

use Parse::RecDescent qw( );

my $grammar = <<'__EOI__';

   {
      use strict;
      use warnings;

      use Socket qw( inet_aton );

      my %protocol_names = map { $_ => 1 } qw(
         ahp   eigrp  esp     gre    icmp  icmp6  igmp
         igrp  ip     ipinip  ipsec  nos   ospf   pcp
         pim   pptp   snp     tcp    udp
      );

      my %protocol_group_names = map { $_ => 1 } qw(
         tcp-udp  tcp  udp
      );

      my %icmp_type_names = map { $_ => 1 } qw(
         alternate-address    conversion-error     echo-reply     echo
         information-reply    information-request  mask-reply     mask-request
         mobile-redirect      parameter-problem    redirect       router-advertisement
         router-solicitation  source-quench        time-exceeded  timestamp-reply
         timestamp-request    traceroute           unreachable
      );

      sub parse_ipv4_addr {
         my ($addr) = @_;
         return inet_aton($addr);
      }
   }

   parse            : <skip: qr/[ \t]*/> line(s) /\Z/ { $item[2] }

   line             : line_body /\n|\Z/ { $item[1] }

   line_body        : PERMIT <commit> permit_deny_args { [ $item[1], $item[3] ] }
                    | DENY   <commit> permit_deny_args { [ $item[1], $item[3] ] }
                    | REMARK <commit> /[^\n]*/         { 0 }
                    | /[ \t]+/                         { 0 }

   permit_deny_args : protocol permit_deny_src permit_deny_dst { [ @item[1,2,3] ] }

   permit_deny_src  : addrs ports { [ @item[1, 2] ] }

   permit_deny_dst  : ...

   addrs            : HOST      <commit> ( IPv4_ADDR | DOMAIN ) { [ host  => $item[3]           ] }
                    | IPv4_ADDR <commit> IPv4_ADDR              { [ range => $item[1], $item[3] ] }
                    | ANY       <commit>                        { [ any   =>                    ] }

   ports            : EQ    <commit> IDENT       { [ permit => $item[2], $item[2] ] }
                    | NEQ   <commit> IDENT       { [ deny   => $item[2], $item[2] ] }
                    | GT    <commit> IDENT       { [ deny   => 1,        $item[2] ] }
                    | LT    <commit> IDENT       { [ deny   => $item[2], 65535    ] }
                    | RANGE <commit> IDENT IDENT { [ permit => $item[2], $item[3] ] }
                    |                            { [ permit => 1,        65535    ] }

   # Rules that match simply return what they match (i.e. no type info is returned).

   PROTOCOL_NAME    : IDENT { $protocol_names{$item[1]} ? $item[1] : undef }

   DOMAIN           : ...

   IPv4_ADDR        : /[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/ { parse_ipv4_addr($item[1]) }

   # Keywords
   REMARK           : IDENT { $item[1] eq 'remark' ? $item[1] : undef }
   PERMIT           : IDENT { $item[1] eq 'permit' ? $item[1] : undef }
   DENY             : IDENT { $item[1] eq 'deny'   ? $item[1] : undef }
   ANY              : IDENT { $item[1] eq 'any'    ? $item[1] : undef }
   EQ               : IDENT { $item[1] eq 'eq'     ? $item[1] : undef }
   NEQ              : IDENT { $item[1] eq 'neq'    ? $item[1] : undef }
   LT               : IDENT { $item[1] eq 'lt'     ? $item[1] : undef }
   GT               : IDENT { $item[1] eq 'gt'     ? $item[1] : undef }

   IDENT            : /[a-zA-Z][a-zA-Z0-9_]*/

__EOI__

Parse::RecDescent->Precompile($grammar, 'Parser')
    or die("Bad grammar\n"); 
```

运行上面的文件，然后你可以使用解析如下：

```
# test.pl

use strict;
use warnings;

use Data::Dumper qw( Dumper );
use Parser       qw( );

my $text = '...';

my $parser = Parser->new();

print(Dumper($parser->parse($text))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:36:52.193

Parse::RecDescent 很慢。更重要的是，递归下降解析器往往很慢。大幅提高速度的最佳方法是切换到不同的解析器，例如像[Parse::Yapp](https://metacpan.org/module/Parse%3a%3aYapp)这样的 LALR 解析器。

如果您想尝试一种不那么激烈的方法，请参阅[优化语法](https://metacpan.org/module/Parse%3a%3aRecDescent%3a%3aFAQ%3a%3aOriginal#OPTIMIZING-YOUR-GRAMMARS)的指南。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T14:01:58.007

If you don't where your application is slow, sounds like you need to profile it. And [Devel::NYTProf](https://metacpan.org/module/Devel%3a%3aNYTProf) is the profiler of choice these days.

# c++ - 为什么要为地址运算符和引用声明符共享与号 (&) 的使用？

> ID：10815918
> 
> 赞同：8
> 
> 时间：2012-05-30T12:04:32.883
> 
> 标签：c++, pointers, reference, standards, ampersand

在 C++ 中，和号字符 ( `&`) 可用于获取左值、函数指示符或限定名称的地址。.

```
int y;
int* p_to_y = &y; 
```

该字符在 C++ 中作为引用声明符有共同用途。.

```
int y;
int& y_alias = y; 
```

在粗略了解C后学习C++时，这种双重用法让我很困惑！我知道使用该符号的上下文有很大的不同，但鉴于引用和指针是不应混淆的重要概念，任何人都可以提出为什么`&`被回收而不是使用新的替代符号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:08:44.213

> 谁能建议为什么`&`被回收

因为`&y`和`int&`两者在某种程度上都是“关于地址”的：一个创建一个指针，它是内存地址的薄抽象，另一个表示一个引用，就像一个永远不会为空的指针。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T12:16:27.230

首先，别担心，你很快就会克服这种困惑。

可能有多种原因：

*   从逻辑上讲，它们以某种方式相连。引用的行为类似于指针，它是对象的地址。

*   没有很多免费符号。看着我的键盘顶行，我只能看到……嗯，只有`$`和`@`。我个人也不喜欢，但这可能只是因为我习惯了`&`。

*   您提供的反理由可以被视为支持理由 - 即不要在语言中添加另一个符号。想一想 - C++ 中可用的大多数符号也可以在 C 中使用。其目的可能是让从 C 迁移的人们获得平滑的学习曲线。由于`&`在逻辑上与引用的概念相关，因此它是最合适的。

# jsf - Primefaces：向数据表添加新行给出错误：启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel

> ID：10815919
> 
> 赞同：2
> 
> 时间：2012-05-30T12:04:37.010
> 
> 标签：jsf, datatable, primefaces

我有一个数据表，我想在其中添加一个新行。这样做时，我收到以下错误 javax.servlet.ServletException：启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel。

我该如何解决我的问题？

这是在我的 xhtml

```
<h:commandLink  action="#{workOrderDetail.addOrderItem}" >
        <img src="${path.staticRootUrl}images/add.png" border="0" alt="${msg.workorderdetail_neworderitem}" title="${msg.workorderdetail_neworderitem}"/>
     </h:commandLink>
<p:dataTable styleClass="ptable100" id="orderItems" var="orderItem" value="#{workOrderDetail.orderItems}" width="100%" height="200" widgetVar="results"
     emptyMessage="#{msg.all_lists_no_records_found}" selection="#{workOrderDetail.selectedOrderItem}" selectionMode="single" onRowSelectUpdate=":detail:sub"
     rowKey="#{orderItem.id}"
<p:ajax event="rowSelect"  update=":detail:sub" /> 
```

这是我的 bean 代码

```
List<IMWSOrderItem> orderList = null;
public void addOrderItem() throws MWSException {
  IMWSOrderItem newOrderItem = getWorkOrder().getMWSOrder().getMWSOrderItem_Set().getNewMWSOrderItem();      
  getWorkOrder().getMWSOrder().getMWSOrderItem_Set().addMWSOrderItem(newOrderItem);
  orderList = null;   
}
public List<IMWSOrderItem> getOrderItems() throws MWSException {
  if (orderList == null) {
     orderList = new ArrayList(Arrays.asList(getWorkOrder().getMWSOrder().getMWSOrderItem_Set().getMWSOrderItems()));
  }
  return orderList;
}
public IMWSOrderItem getSelectedOrderItem() {
  return selectedOrderItem;
}
public void setSelectedOrderItem(IMWSOrderItem newSelectedOrderItem) {
  this.selectedOrderItem = newSelectedOrderItem;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T11:12:07.540

好的，找到问题了。添加新项目时，其 ID 默认为 null，并将 id 用作 rowkey。所以我在添加一个新的时将 id 初始化为 -1 并且它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-22T14:07:48.367

无需将 id 设置为 -1，只需编写如下函数：

`public int getRowKey(Integer id) { return id!=null?id:-1; }`

并从 @rowKey 中的 el 表达式调用它

# macos - 如何将“使用 twitter 登录”功能与 API 集成，例如带有 OAuth 的 MAC OS X 中的 MGTwitterengine

> ID：10815920
> 
> 赞同：0
> 
> 时间：2012-05-30T12:04:39.870
> 
> 标签：macos, cocoa, twitter, twitter-oauth, mgtwitterengine

我是 Cocoa 的新手，想开发一个应用程序，可以使用通过 twitter 登录功能来验证用户身份。有适用于 IOS 的 API 和示例代码，但对于 Mac 来说很少，而且仅限于发送推文。我想在哪里打开 webview，用户可以在其中输入 twitter 凭据并允许应用程序，因此我可以继续访问其他网页。

如果有人可以帮助我，我将非常感激。我会非常感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:21:37.503

最后，我得到了 MAC OS 中这个 twitter 集成的解决方案。

github上的以下链接也是如此。

[https://github.com/yourhead/OAuth_ObjC_Test_App](https://github.com/yourhead/OAuth_ObjC_Test_App)

# spring - 在spring mvc中得到这个“请求的资源不可用”的原因是什么？

> ID：10815924
> 
> 赞同：0
> 
> 时间：2012-05-30T12:05:18.250
> 
> 标签：spring, hibernate, resources

我正在开发一个spring mvc应用程序。直到现在我只是调用控制器，而控制器又
显示了login.jsp页面。项目运行成功。

但是当我想用 hibernate 添加数据库连接时，web.xml 类中没有任何改变。我在
dispatcher-servlet.xml 中添加了新的东西，为我的 DTO 和
服务类提供了所需的注释。

现在，当我运行项目时，它说`The Requested Resource is not available`。
我认为如果我的 dispatcher-servlet.xml 由于添加了有关
休眠连接和映射的新内容而出现任何问题，那么至少应该调用 <welcome-file> 中的 index.jsp
。但是没有。

任何人都可以指定我遇到此问题的可能原因是什么。
这是我的 dispatcher-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:lang="http://www.springframework.org/schema/lang"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

<context:component-scan base-package="com.alw" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean>

//codes below I added later  

<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
    p:location="/WEB-INF/jdbc.properties" />

<bean id="dataSource"
    class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
    p:driverClassName="${jdbc.driverClassName}"
    p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
    p:password="${jdbc.password}" />

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="configurationClass">
        <value>org.hibernate.cfg.AnnotationConfiguration</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.current_session_context_class">
                thread
            </prop>
        </props>
    </property>
</bean>

<tx:annotation-driven />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:12:01.163

问题可能是因为您的 dispatcher-servlet.xml 中的视图解析器代码 -

```
<bean id="viewResolver"     class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="prefix"><value>/WEB-INF/pages/</value></property>
  <property name="suffix"><value>.jsp</value></property>
</bean> 
```

在您进行更改之前，此代码是否也存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:17:41.537

这通常意味着启动 Web 应用程序时出现上游错误，并且整个 Web 应用程序初始化失败。不过，您肯定会在日志中注意到类似的内容。

# android - 可以为tablelayout中的动态文本和图像创建lazyadapter

> ID：10815928
> 
> 赞同：1
> 
> 时间：2012-05-30T12:05:40.287
> 
> 标签：android, android-tablelayout, android-lazyadapter

我想在不使用 listview 的情况下为表格布局创建适配器并在表格布局中使用它是可能的，因为当我找到用于 tablelayout 的 arrayadapter 时，什么都没有找到所有都可以使用 listview 但我有一个表格布局，所以任何与此相关的教程或 stackoverflow 问题都比告诉我；很紧急

# ruby-on-rails - Ruby 1.8.7 each_with_index 索引偏移量

> ID：10815930
> 
> 赞同：1
> 
> 时间：2012-05-30T12:05:47.770
> 
> 标签：ruby-on-rails, ruby, ruby-enterprise-edition

`each_with_index`在 ruby​​ 1.8.7 中的集合上使用时，如何指定从哪个索引开始？

```
collection.each_with_index do |element, index = 1|
  #do smth
end 
```

像这样使用它会产生以下错误：

```
syntax error, unexpected '=', expecting '|'
collection.each_with_index do |element, i = 1| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:08:30.373

试试这个：

```
collection[4..-1].each_with_index do |element, index|
  #do smth
end 
```

这个例子将从第五个元素开始。

# xml - html5 离线搜索器 - 有可能吗？

> ID：10815932
> 
> 赞同：1
> 
> 时间：2012-05-30T12:05:52.060
> 
> 标签：xml, html, local-storage

我在使用离线搜索器时遇到了**html5 本地存储**问题，该搜索器旨在从 USB 驱动器或 CD 运行。

我有一个 XML 文件，大小为 66 MB，我将它导入到本地存储中，我可以在其中进行一些查询以进行搜索。但问题是，我（或任何用户）第一次访问页面需要大约**6 分钟**才能从 xml 导入所有内容。有没有其他方法可以减少时间或其他方法来创建数据库以进行离线搜索？

提前致谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:12:27.533

根据您需要支持的浏览器，您可能可以使用 sqlite 而不是本地存储。如果你这样做了，你可能会直接向用户发送一个 sqlite 文件，这至少可以消除导入文件的需要。

使用 json 而不是 xml 的建议是一个很好的建议。您还可以考虑将数据分解为几个异步请求，以便在用户执行其他操作时分几批填充数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:12:59.680

您可以尝试使用工人来填充本地存储。

看[这个例子](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples_start.htm#jssamples/exp_webstorage.html)。他们将地图图块加载到本地存储中。可能与您的 xml 文件大小相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T12:07:01.663

改用 JSON；这应该减少文件大小和解析时间。

但是，它仍然会很慢。
您确实需要使用数据库。

# c# - 服务器客户端远程处理

> ID：10815933
> 
> 赞同：0
> 
> 时间：2012-05-30T12:05:58.577
> 
> 标签：c#, .net-remoting

我正在从服务器读取

```
 MessageTable msg = (MessageTable)Activator.GetObject(typeof(MessageTable), portFormat, WellKnownObjectMode.Singleton); 
```

如果服务器正在运行，那么它会返回带有值和方法的 msg 对象。

它从不返回空消息，无论服务器是否正在运行，但是当服务器不可用时，调用它的方法会引发异常，然后如何检查服务器是否正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:49:33.470

即使您找到允许您检查服务器是否响应的方法，如果服务器在您调用 IsOnline() 和调用您要调用的方法之间脱机怎么办？

我认为您应该在进行远程调用的任何地方处理此异常。

如果您仍然想找到一种方法来了解服务器是否在线，您可以在 MessageTable 类中添加一个不执行任何操作的 Ping() 方法。如果你发现一些有用的东西，你也可以在[RemotingServices类中检查。](http://msdn.microsoft.com/library/system.runtime.remoting.remotingservices.aspx)也许使用 RealProxy...

# button - 需要重定向的页面的 Google+ 按钮

> ID：10815935
> 
> 赞同：0
> 
> 时间：2012-05-30T12:06:03.100
> 
> 标签：button, redirect, google-plus

我正在尝试将 Google+ 按钮添加到我的所有域，但是当单击该按钮时，我从 google 收到错误消息（警告三角形中的红色感叹号）

我已经尝试了很多事情并制定了以下内容。

当点击按钮验证网站时，Google+ 将尝试访问我的网站。我的网站在这一点上失败了。

原因是我们有多个域和一个跨站点会话脚本，它要求我们在用户第一次访问新域时将其转发到我们的会话服务器，然后将用户转发回他们尝试的域访问。

为了转发用户，我正在使用 PHP 函数 header("Location: " . SESSION_SERVER);

当 Google 获得请求重定向的标头时，它会失败，因此我的网站无法被 +1。

我对 Google+ 验证机器人的了解是它没有启用 cookie，并且它使用标准的 google chrome 用户代理（如果我错了，请纠正我）

我认为解决方案是能够检测到 google+ bot 并且不重定向它，或者有一种重定向它的方法，而不会干扰通过 bot 验证过程的站点。

（哦，我正在测试的网站是[http://www.taxicode.com](http://www.taxicode.com)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:55:20.437

我们不久前解决了这个问题，所以我认为发布解决方案是合适的。

我们发现 Google+ 机器人设置了服务器属性 HTTP_X_GOOG_SOURCE。这使我们能够检测到它并停止重定向。

在 PHP 中：

if (isset($_SERVER['HTTP_X_GOOG_SOURCE'])) {

```
// Don't redirect 
```

}

# php - DragHandle 在 TableDnD JQuery 插件中不起作用

> ID：10815936
> 
> 赞同：1
> 
> 时间：2012-05-30T12:06:11.057
> 
> 标签：php, jquery, tablednd

我正在使用 tablednd 插件拖放我的表格行，一切对我来说都很好，但是当我尝试使用 DragHandle 属性时，行既不是可拖动的，也不是处理程序

我的脚本是

```
<script type="text/javascript">
        $(document).ready(function() {
            $('#sort').tableDnD({
                onDrop: function(table, row) {
                  alert(row.id);
                }, 
                            dragHandle: ".dragHandle"
            });
        });
        </script> 
```

当我移除拖动手柄时它可以工作，当我包含它时它不起作用。

任何想法为什么它不起作用

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:33:32.790

您可能使用的是旧版本（可能是 0.4 版）。

从 GitHub 下载插件后，我遇到了同样的问题。好像你得到的是旧版本，而不是当前的 0.7

顺便说一句：dragHandle: ***".dragHandle"*** 是正确的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T12:12:02.370

`.`在拖动句柄之前删除

```
 $('#sort').tableDnD({
            onDrop: function(table, row) {
              alert(row.id);
            }, 
            dragHandle: "dragHandle"
   }); 
```

[在此处](http://code.google.com/p/tablednd/source/browse/trunk/index.html?spec=svn12&r=12)查看示例

# azure - SQL Azure Catch Storage 最大大小错误？

> ID：10815939
> 
> 赞同：3
> 
> 时间：2012-05-30T12:06:22.310
> 
> 标签：azure, data-access-layer, azure-sql-database

我正在本地 SQL Server 2012 实例上开发数据库，​​并计划在本地测试/使用后将其迁移到 Azure。.NET 数据访问层代码有多个 catch{} 块，但我也想在数据库超过其最大大小时捕获错误。引发的确切错误类型是什么，捕捉它的最聪明方法是什么？如果发生这种情况，我会想向管理员发送电子邮件。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T12:11:59.880

You'll need to check the number on the exception:

```
try
{
    // ...
}
catch (SqlException sqlException)
{
    switch (sqlException.Number)
    {
        // The database has reached its size quota. Partition or delete data,
        // drop indexes, or consult the documentation for possible resolutions. 
        case 40544:
            break;
    }
} 
```

Reference: [http://blogs.msdn.com/b/sqlazure/archive/2010/08/10/10048453.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/08/10/10048453.aspx)

# android - 导出一个 APK 库项目，并在另一个 Android 项目中使用

> ID：10815943
> 
> 赞同：5
> 
> 时间：2012-05-30T12:06:34.643
> 
> 标签：android, eclipse, android-library

今天我的**最终**项目设置有一个 Android 库依赖项。**该 Android 库依赖项项目与最终**项目位于同一工作区中。

我想将该库项目及其**SOURCES 和 ANDROID RESOURCES****导出**到一些**存档**、jar、apk、apklib 中，任何可以让我将该文件添加为依赖项的东西，而不是被迫包含/签出项目及其**源和资源**到工作区。

 ******我知道 Maven 可以解决这个问题，但这不是我的目标，我试图让简单的 Eclipse Android 项目能够将 Android 库添加为依赖项。

（我不介意在 Eclipse 中使用 Maven 生成的 apklib 和非 Maven Android 项目，但我想那将毫无意义......）

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:17:43.437

好了朋友们，

据我调查，没有办法做到这一点。我必须为此找到解决方案，否则我的[Cyborg](http://cyborg-framework.blogspot.co.il/2012/05/what-is-cyborg.html)发行版将是地狱。

我将不得不编写一个脚本来为我做到这一点......

如果事情发生了变化，并且 ADT 会决定变得有意义，请告诉我...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:47:55.880

> 您可以创建一个“常规”Java 项目并从那里导入 Android.jar。然后，您将可以访问 SDK 中的每个组件。然后，您可以将您的项目导出为 jar... 并从您的 Android 应用程序加载它。这很好用，而且它似乎是一种非常简单的方法。

[创建一个用于分发的 Android Jar 库](https://stackoverflow.com/questions/5014128/create-an-android-jar-library-for-distribution)******

# java - 使用 maven 创建 JVM 时出错

> ID：10815944
> 
> 赞同：3
> 
> 时间：2012-05-30T12:06:36.093
> 
> 标签：java, maven, jvm

`Could not create the Java virtual machine`当我这样做时，我收到一条错误消息`mvn clean install`。我现在该怎么办？我应该改变什么`pom.xml`吗？我的 java version-1.6 和 maven version-3.0.2，都设置在`pom.xml`

错误是::

```
[ERROR] Failure executing javac,  but could not parse the error:
[ERROR] Could not create the Java virtual machine.
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal o
rg.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on
 project accelerator-common: Compilation failure
Failure executing javac,  but could not parse the error:
Could not create the Java virtual machine.

        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:213)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation fail
ure
Failure executing javac,  but could not parse the error:
Could not create the Java virtual machine.

        at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompiler
Mojo.java:656)
        at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:209)
        ... 19 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:12:11.973

您需要找出它无法创建它的原因。一个常见的原因是使用了无效的命令行选项。例如`M2_OPTS=-Xmx1m`会给你这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T12:12:53.260

请检查您在 mvn clean 命令中指定的 java 系统属性，例如 -Xmx 或 -Xms。我想命令和内存大小之间可能有一个空格。即您可能指定 了**-Xmx 128**而应该是**-Xmx128**。虽然这是一个疯狂的猜测

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:40:22.223

您是从 Eclipse 或 Netbeans 等 IDE 中使用它吗？

如果是这样，您可以：

*   将 JAVA_HOME 设置为指向您的 JDK。
*   在 IDE 中配置 Maven 选项以使用 Maven 安装而不是捆绑安装。
*   将 Java 运行时配置为使用 JDK 而不是 JRE。

**在 Eclipse 中配置 Maven 安装**

*   转到窗口 > 首选项 > Maven > 安装。
*   添加您的 Maven 安装。单击`Add`并选择您的 Maven 安装目录。
*   选择它作为您的 Maven 安装。

**在 Eclipse 中配置已安装的 JRE 选项**

*   转到窗口 > 首选项 > Java > 已安装的 JRE。
*   添加一个指向 JDK 主目录的标准 VM。
*   没有 VM 参数。当然，如果你有任何你可以添加它们。
*   将其标记为您的 JRE。

默认情况下，Eclipse 使用来自 Maven 插件的嵌入式 Maven 安装，有时使用非 JDK JRE 作为默认 Java 运行时。

因此，使其工作的步骤是安装 JDK，设置 JAVA_HOME，将 Maven 解压到一个目录，然后在 Eclipse 中更改 Maven 安装并将 JRE 指向 JDK JRE。

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T05:23:08.943

`JAVA_HOME`还将您的环境变量与环境中的 JAVA_HOME\bin匹配`PATH`。它应该是相同的拱型。

我遇到了这个问题。我有 16GB 内存，即使在设置`set MAVEN_OPTS=-Xmx1024m`了几次 maven 执行后它也无法工作并给出错误。

```
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

# twitter-bootstrap - 将 Bootstrap Typeahead 匹配器设置为不区分大小写

> ID：10815959
> 
> 赞同：6
> 
> 时间：2012-05-30T12:07:26.983
> 
> 标签：twitter-bootstrap, typeahead

我需要将 Twitter Bootstrap Typeahead 插件中的匹配器设置为不区分大小写。Bootstrap 文档指定需要将一个函数传递给 typeahead 选项，但没有指定该函数应该是什么。

如果有人能告诉我如何做到这一点，我将不胜感激。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T12:43:22.230

`matcher`是`typeahead`函数参数中的一个选项。从文档中：

> 用于确定查询是否与项目匹配的方法。接受单个参数，即测试查询所依据的项目。使用 this.query 访问当前查询。如果查询匹配，则返回布尔值 true。

所以，它看起来像这样：

```
$('.typeahead').typeahead({
    matcher: function(item) {
        // Here, the item variable is the item to check for matching.
        // Use this.query to get the current query.
        // return true to signify that the item was matched.
        return true
    }
}) 
```

它还在文档中说此回调的默认行为是`case insensitive`匹配器。因此，您的需求应该开箱即用。

# c# - 遍历/转换表达式树的好例子

> ID：10815960
> 
> 赞同：0
> 
> 时间：2012-05-30T12:07:46.057
> 
> 标签：c#, linq

我想标题说明了我在寻找什么。这是我正在努力实现的一个例子。

我有实体（其中一些在运行时使用 CodeDom 生成）

```
public abstract class Content
{
    public virtual Page Parent { get; set; }
    public virtual ISet<Property> Properties { get; set; }
    // T GetPropertyValue<T>(string)
    // SetPropertyValue(string, object)
}
public abstract class Page : Content
{
    public virtual string Path { get; set; }
}
// Generated with CodeDom
public class Post : Page
{
    public virtual string Text 
    { 
        get
        {
            // get value from Properties
            return GetPropertyValue<string>("Text");
        }   
        set
        {
            // set value to Properties
            SetPropertyValue("Text", value);
        }
    }
} 
```

我正在使用 NHibernate 来查询项目。
问题：我不能`Post.Text`在 Where 子句中使用。
解决方案：创建自己的扩展方法，将 lambda 表达式转换为另一种格式。

例如查询

```
var posts = session.Query<Post>().Filter(p => 
    p.Parent.Path.StartsWith("/blogs/programming/") && 
    p.Text.Contains("hello")); 
```

可以转换为以下任一

```
public static IQueryable<T> Filter<T>(this IQueryable<T> query, Expression<Func<T, bool>> filterExpr)
{
    return query.Where(p => 
        p.Parent.Path.StartsWith("/blogs/programming/") &&
        p.Properties.OfType<StringProperty>().Any(p2 => 
            p2.Name == "Text" && 
            p2.StringValue.Contains("hello")));
}

public static IQueryable<T> Filter<T>(this IQueryable<T> query, Expression<Func<T, bool>> filterExpr)
{
    var ids1 = session.Query<Content>().Where(p => 
                p.Parent.Path.StartsWith("/blogs/programming/"))
                .Select(p => p.Id);
    var ids2 = session.Query<StringProperty>().Where(p => 
                p.Name == "Text" && 
                p.StringValue.Contains("hello"))
                .Select(p => p.Content.Id);
    var ids = ids1.Intersect(ids2);
    return query.Where(p => ids.Contains(p.Id));
} 
```

有什么好的不平凡的例子或开源项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:43:28.547

也许你可以看看 Brahma，我的 LINQ to OpenCL 翻译器。[http://brahma.codeolex.com](http://brahma.codeolex.com)

它所做的事情与您想要实现的目标非常相似。

希望这可以帮助！

# php - 在不运行控制台命令的情况下清理缓存的最佳方法是什么？

> ID：10815962
> 
> 赞同：13
> 
> 时间：2012-05-30T12:07:52.943
> 
> 标签：php, caching, symfony

在我的项目的管理面板中，我编写了更改要使用的数据库名称的功能。我在 中写入了新的数据库名称`parameters.ini`，之后必须清理缓存以加载新配置。

在不运行控制台命令的情况下清理缓存的最佳方法是什么？

或者是否有另一种最佳实践如何更改当前数据库。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T12:19:54.717

您可以通过以下方式使用控制台命令`exec()`：

```
exec("php /my/project/app/console cache:clear --env=prod"); 
```

或者，如果您不想使用控制台命令，则 只需清空*cache/文件夹。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-03T11:46:37.193

您可以调用此操作来清除缓存：

```
/**
 * @Route("/cache/clear", name="adyax_cache_clear")
 */
  public function cacheClearAction(Request $request) {
    $input = new \Symfony\Component\Console\Input\ArgvInput(array('console','cache:clear'));
    $application = new \Symfony\Bundle\FrameworkBundle\Console\Application($this->get('kernel'));
    $application->run($input);
   } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-23T07:01:38.827

最近的最佳方式（2017 年）。我在控制器中创建这个：

```
use Symfony\Component\Console\Input\ArrayInput;
use Symfony\Bundle\FrameworkBundle\Console\Application;
use Symfony\Component\Console\Output\BufferedOutput;

/**
 * Refresh Cache
 */
public function refreshRoutes()
{
    $kernel = $this->container->get('kernel');

    $application = new Application($kernel);
    $application->setAutoExit(false);

    $input = new ArrayInput([
        'command' => 'cache:clear',
        '--env'   => 'prod',
    ]);

    $output = new BufferedOutput();
    $application->run($input, $output);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-25T12:29:01.340

`Success`我的页面渲染操作。它在关闭时清除缓存。

```
public function clearCacheAction(Request $request)
{ 
    $dir = $this->get('kernel')->getRootDir() . '/cache';
    register_shutdown_function(function() use ($dir) {
        `rm -rf $dir/*`;
    });
    return $this->render('SomeBundle:SomePart:clearCache.html.twig');
} 
```

注意，如果你没有`session:`在 config.yml 中配置，你会丢失会话。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-07T12:16:01.813

@HelpNeeder 的回答很好，但是 ClearCache 命令没有使用给定的 --env 选项。相反，它使用的是应用程序正在运行的当前内核。

因此，要使其与您调用控制器的环境以外的其他环境一起工作，您需要稍微调整代码（我无法编辑他的答案，它说编辑队列已满）所以这里有一个更完整的答案：

```
//YourBundle:YourController

use Symfony\Component\Console\Input\ArrayInput;
use Symfony\Bundle\FrameworkBundle\Console\Application;
use Symfony\Component\Console\Output\BufferedOutput;

public function clearCacheAction($env = 'dev', $debug = true)
{
    $kernel = new \AppKernel($env, $debug);

    $application = new Application($kernel);
    $application->setAutoExit(false);

    $input = new ArrayInput([
        'command' => 'cache:clear'
    ]);

    $output = new BufferedOutput();
    $application->run($input, $output);

    return $this->render('someTwigTemplateHere', array('output' => $output->fetch()));
} 
```

然后配置路由：

```
cache_clear_dev:
    path:     /_cache/clear/dev
    defaults: { _controller: YourBundle:YourController:clearCache, env: 'dev', debug: true }

cache_clear_prod:
    path:     /_cache/clear/prod
    defaults: { _controller: YourBundle:YourController:clearCache, env: 'prod', debug: false } 
```

现在，您可以在 twig 模板中使用 {{ output }} 输出命令的结果。

如果您有访问控制，不要忘记将此路由的权限设置为 SUPER_ADMIN 或其他东西，您不希望管理员以外的任何人都能够清除缓存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-25T18:27:10.367

我正在以这种方式清除缓存：

```
$fs = new Filesystem();
$fs->remove($this->getParameter('kernel.cache_dir')); 
```

[https://gist.github.com/basdek/5501165](https://gist.github.com/basdek/5501165)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-02-17T13:55:30.763

尽管他的回答或多或少已经过时，[但他的建议](http://fabien.potencier.org/a-symfony-tip-clear-the-cache-without-the-command-line.html)在今天仍然有用：

> 答案非常简单。
> 
> 所有缓存文件都存储在项目根目录中的单个 cache/ 目录中。
> 
> 因此，要清除缓存，您只需删除 cache/ 下的所有文件和目录。symfony 足够聪明，可以在它不存在的情况下重新创建它需要的目录结构。
> 
> **Fabien Potencier**，**2007 年11 月 3 日**

因此，按照他的建议，我编写了一个函数来做到这一点：

```
/**
* @Route("/cache/clear", name="maintenance_cache_clear")
*/
public function cacheClearAction(Request $request)
{
    $kernel=$this->get('kernel');

    $root_dir = $kernel->getRootDir();

    $cache_dir = $kernel->getCacheDir();

    $success = $this->delTree($cache_dir);

    return new Response('...');
} 
```

where`delTree($dir_name)`可以是递归删除目录树的任何函数。只需查看 PHP`rmdir`函数的用户贡献说明，[就有很多建议](http://se1.php.net/manual/en/function.rmdir.php#110489)。

# ios - 通过 XMPP 聊天时显示头像

> ID：10815966
> 
> 赞同：10
> 
> 时间：2012-05-30T12:08:28.070
> 
> 标签：ios, xmppframework

我能够通过 XMPP 在 imageview 中显示头像。

但是当我删除应用程序并从那时起重新启动它时，我没有通过方法获取图像数据

```
 - (NSData *)photoDataForJID:(XMPPJID *)jid 
```

# rubymotion - Rubymotion Dispatch 提前退出

> ID：10815972
> 
> 赞同：3
> 
> 时间：2012-05-30T12:08:37.847
> 
> 标签：rubymotion

我在 Rubymotion 中执行了一个相当普通的调度队列，但它显然很早就退出了。它永远不会通过 initWithContentsOfURL 调用。但是，删除 Dispatch::Queue 包装器并将调用放在主线程中是可行的。

模拟器中的应用程序退出时没有堆栈跟踪或出现问题的指示。我是否误用了调度队列？

```
def foo
  Dispatch::Queue.concurrent.async do
    error_ptr = Pointer.new(:object)
    data = NSData.alloc.initWithContentsOfURL(
      NSURL.URLWithString(url), options:NSDataReadingUncached, error:error_ptr)
    unless data
      p error_ptr[0]
      return
    end
    json = NSJSONSerialization.JSONObjectWithData(data, options:0, error:error_ptr)
    unless json
      presentError error_ptr[0]
      return
    end
    Dispatch::Queue.main.sync { print_results(json) }
  end
end

def print_results(json)
  p "#{json}"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:45:37.930

现在看来 RubyMotion 没有正确地保留调度块之外的局部变量，所以可能会得到一个 EXEC_BAD_ACCESS 并崩溃。以下失败：

```
foo = "some value"
Dispatch::Queue.concurrent.async do
    puts foo
end 
```

但是，以下两个*将*起作用：

```
@foo = "some value"
Dispatch::Queue.concurrent.async do
    puts @foo
end 
```

并且：

```
foo = "some value"
foo.retain
Dispatch::Queue.concurrent.async do
    puts foo
    foo.release
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:21:20.350

我想我找到了这个问题。这是因为我在方法中声明了 url

```
def foo
url = "www.google.com"
  Dispatch
    take action on url
  end
end 
```

通过将 url 声明移动到 Dispatch 线程，它可以工作。我认为这是一个方法局部变量在任务有时间执行之前超出范围的问题。

```
def foo
  Dispatch
    url = "www.google.com"
    take action on url
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T08:18:13.023

就我而言，在 RubyMotion 2.5 中在方法中声明 url 很好，但`EXC_BAD_ACCESS`由于应用程序名称和整个代码中的 unicode 字符，我的应用程序会崩溃，有时还会出现其他错误消息。修复编码头和更改应用程序名称解决了我的问题。令人惊讶的是，该应用程序运行良好，仅在我调用时崩溃`initWithContentsOfURL`。

# .net - sqlexpress 本地数据库管理员密码

> ID：10815975
> 
> 赞同：13
> 
> 时间：2012-05-30T12:08:51.680
> 
> 标签：.net, sql-server, installation, webmatrix

我正在尝试使用 Webmatrix 在我的本地计算机（Windows Vista）上安装一些 .Net 电子商务项目。他们中的一些人要求提供数据库管理员用户名和密码，但我不知道这些是什么。

任何人都可以帮我解决这个问题。请参阅图片，这是安装过程的屏幕截图。

![安装过程截图](../Images/8d862d78a4b5e25e0936dc9364743880.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T12:29:05.653

默认情况下，SQLEXPRESS 安装使用 Windows 身份验证。在服务器属性的安全选项卡上的管理工作室中，您只能选择“SQL Server 和 Windows 身份验证”，然后接受“sa”帐户。如果您不记得自己输入了密码，您可能需要设置/重置此帐户的密码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-06-19T12:55:57.480

在您的客户端（SQL Server Management Studio）中，您必须：

1.  更改登录用户“sa”的密码
2.  为用户“sa”启用登录
3.  确保启用 SQL Server 身份验证

## 1.更改登录用户“sa”的密码

安全 > 登录 > sa（右键单击）> 属性 > 常规 > 密码和确认密码

## 2.启用用户“sa”的登录

安全 > 登录 > sa（右键单击）> 属性 > 状态 > 登录，点击启用

## 3\. 确保启用 SQL Server 身份验证

右键单击服务器 > 属性 > 安全 > 服务器身份验证，单击 SQL Server 和 Windows 身份验证模式

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T13:32:28.813

我遇到了同样的问题，我执行了以下步骤来解决问题：

1.  以管理员身份打开 Sql Server Management Studio

2.  使用 Windows 身份验证登录到 .\SQLEXPRESS

3.  转到安全选项卡->登录->更改“sa”密码，然后按确定

4.  在 WebMatrix 中使用新创建的密码，您应该都已设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T12:25:08.810

从 SQL 2005 开始，Express 版本安装了 Windows 身份验证。在配置中（管理工作室，连接服务器并选择数据库属性）你可以激活sql内部认证然后（默认停用，用户sa没有密码）。

因此，如果您无法连接它，您可能需要激活它并为用户 sa 设置密码。

# sql-server-2008 - SQL Server 和 SQL Azure 的统一登录/帐户包装器？

> ID：10815977
> 
> 赞同：1
> 
> 时间：2012-05-30T12:08:58.080
> 
> 标签：sql-server-2008, security, azure, azure-sql-database

我有多个数据库，它们将作为本地 SQL Server 2012 数据库以及 SQL Azure 数据库存在。我了解登录/角色的处理方式存在一些差异。是否存在某种“包装器”，或者用于管理两种类型的 SQL Server 之间安全性的良好规则/模式？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T02:43:50.560

从安全的角度来看，有一些区别：

*   SQL Azure 仅支持 SQL Server 身份验证，不支持集成身份验证。因此，需要用户名/密码。
*   SQL Azure 大约进行身份验证检查。每 60 分钟一次，这意味着如果您更改密码，请求可能不会在一段时间内失败。
*   关于创建和删除数据库、登录名和用户有一些特定的限制。

我认为您不需要包装器。您只需要了解 SQL Azure 的微妙之处（[在此处](http://msdn.microsoft.com/en-us/library/windowsazure/ff394108#authentication)记录）。至于连接字符串的差异：除了存储多个连接字符串之外，您实际上不需要做太多事情。

# java - 将 Tess4J 作为 Eclipse 中的库包含到 Java 项目中

> ID：10815978
> 
> 赞同：7
> 
> 时间：2012-05-30T12:09:08.090
> 
> 标签：java, android, ocr, tesseract

到目前为止，我有一个空且干净的 Eclipse Java 项目。我必须做什么才能`Tess4J`用作我想要开发的 Web 服务的库？ *甚至可以将它用作 Android 项目的库吗？（会走捷径很多）*`.tif`我遇到了一个关于 android 的问题。

Tess4J 是原生代码的包装器，因为 tesseract-ocr 是用 C/C++ 编写的。我到目前为止。但是如何将此包装器包含到我的项目中？

在我决定放弃之前，我已经用谷歌搜索了很多`tesseract.Net`，因为这个项目的维护/记录很差，会迫使我使用 C#（这没关系），但我没能让它工作，所以我不得不默认为 C/C++（这是不行的）；）

我现在有点迷路，所以欢迎任何帮助。问候。

**编辑：按照[这里](http://sourceforge.net/projects/tess4j/forums/forum/1202294/topic/4506433)提到的步骤（来自 nguyenq 的回答）**

1：新的 Eclipse 工作区

2：创建了一个名为的新目录`lib`

3：复制`\Tess4J\dist\tess4j.jar`,`\Tess4J\lib\jna.jar`并`\Tess4J\lib\jai_imageio.jar`放入`lib`(2)

4：在Eclipse中新建一个Java项目

5：在项目属性（4）中，我将（3）中的.jars添加到Java构建路径作为库下的外部jars

6：我将目录复制到项目根目录`\tessdata`中`libtesseract302.dll``\workspace\project\`

7：我创建了一个新类`Main`并实例化了一个`Tesseract1 tesseract = new Tesseract1();`用于测试

8：我运行应用程序但抛出异常：`Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable to load library 'libtesseract302' Module not found`

**编辑2：**

7.1：我创建了一个新类`Main`并实例化了一个`Tesseract tesseract = new Tesseract.getInstance();`用于测试（来源：[here](http://tess4j.sourceforge.net/codesample.html)）

8.1：到目前为止看起来还不错，但没有实现逻辑，只是尝试构建它。

**编辑3：**

9：不，不工作。仍然 UnsatisfiedLinkError。这可能是关于 32 位与 64 位的问题吗？我正在开发 Win7 64 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T01:23:53.613

按照以下链接中描述的步骤让 Tess4J 在 Eclipse 中运行：

[http://sourceforge.net/projects/tess4j/forums/forum/1202294/topic/4506433](http://sourceforge.net/projects/tess4j/forums/forum/1202294/topic/4506433)

我不确定该库是否会在 Android 上运行，因为平台上的 JNA 支持似乎还没有。

如果您想要 Tesseract 3.01 的 .NET 包装器，请查看[https://github.com/charlesw/tesseract-ocr-dotnet](https://github.com/charlesw/tesseract-ocr-dotnet)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:32:44.063

出现这个问题是因为 .dll 库不支持 64 位版本的 Eclipse 和 JDK（带 JRE）。您必须安装 32 位版本的 JDK 和 Eclipse 并再次重复此过程。对我来说工作得很好。

# android - 设置 sd 卡歌曲为来电提示音

> ID：10815982
> 
> 赞同：3
> 
> 时间：2012-05-30T12:09:36.740
> 
> 标签：android, sms, android-contacts

我的应用程序中的消息音更改存在问题。我需要为电话中的特定联系人更改消息音（与我们为不同的联系人设置不同的铃声相同）。所以基本上首先我需要知道这是否可能，如果是，那么给出一些提示。提前致谢。下面是对我不起作用的代码。

```
File k = new File(path, "mysong.mp3"); // path is a file to /sdcard/media/ringtone

ContentValues values = new ContentValues();
values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
values.put(MediaStore.MediaColumns.TITLE, "My Song title");
values.put(MediaStore.MediaColumns.SIZE, 215454);
values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
values.put(MediaStore.Audio.Media.ARTIST, "Madonna");
values.put(MediaStore.Audio.Media.DURATION, 230);
values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
values.put(MediaStore.Audio.Media.IS_ALARM, false);
values.put(MediaStore.Audio.Media.IS_MUSIC, false);

//Insert it into the database
Uri uri = MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath());
Uri newUri = main.getContentResolver().insert(uri, values);

RingtoneManager.setActualDefaultRingtoneUri(
myActivity,
RingtoneManager.TYPE_RINGTONE,
newUri
); 
```

# asp.net-mvc-4 - Knockoutjs，SPA，MVC 4 如何将数据从 Knockoutjs 传递到控制器？

> ID：10815984
> 
> 赞同：1
> 
> 时间：2012-05-30T12:09:47.130
> 
> 标签：asp.net-mvc-4, singlepage, knockout-2.0

我正在使用 knockoutjs 和 MVC，我真的不知道如何将数据从 Knockoutjs 传递到 Controller。我尝试使用

```
 self.NextButton = function () {
        $.post("/User/MyAction', self.uUserSet);
    } 
```

但不工作。请告诉我如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:24:23.733

有几种方法可以从 Knockout 将数据返回到 MVC 控制器。

一篇很好的文章展示了这一点，即[来自 JavaScript 函数的 MVC jQuery 提交表单（无页面刷新）](https://stackoverflow.com/questions/1720020/mvc-jquery-submit-form-without-page-refresh-from-javascript-function)。

Steve Sanderson 于 2 月在荷兰的 TechDays 上做了一个演讲，他演示了使用重命名的 RIA/JS 库（现为 Upshot.js）将数据从 Knockout 传递到 MVC（或实际上是到新的 WebAPI）。Upshot 确实有一些挑战，但它提供了一个很好的解决方案。非常值得研究。

[http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)

[这是我发布的关于使用 Upshot 的一些挑战的问题和答案。[https://stackoverflow.com/questions/10711637/what-would-make-entity-framework-upshot-believe-my-object-graph-contains-cycl]](https://stackoverflow.com/questions/10711637/what-would-make-entity-framework-upshot-believe-my-object-graph-contains-cycl) 您还可以在 Knockout 主网站上找到信息（和示例） ( [http://knockoutjs.com/](http://knockoutjs.com/) ) 和 Ryan Niemeyer 的博客 ( [http://www.knockmeout.net/](http://www.knockmeout.net/) )。

您可能还想看看 JSON.NET。[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# java - 在函数内添加后结果不正确

> ID：10815986
> 
> 赞同：2
> 
> 时间：2012-05-30T12:09:54.893
> 
> 标签：java

我有一个没有返回正确答案的 java 程序，我不知道为什么。这是代码：

```
public class hello {
    public static void main(String[] args) {
        int a =5;
        doubleNumbers(a);
        System.out.println(" 5 doubled is:"+a);
    }

    private static void doubleNumbers(int a) {
        a = 5*2;
    }
} 
```

这是我在 helloWorld 之后的第一个 java 程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T12:12:16.347

Java 是[按值传递的](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_value)，这意味着传递给函数的变量不会在函数之外更改。

由于这是作业，我不会向您展示解决方案，而只是告诉您返回计算的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T12:11:45.647

you're not returning anything from your method

change it to

```
 private static int doubleNumbers(int a) { 
return a * 2; 
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:14:20.443

I would change the method `doubleNumbers` to return the result of the calculation, so it would look something like this:

```
private static void doubleNumbers(int a) {
    return a*2;
} 
```

And then change the lines in the main method:

```
int a = 5;
a = doubleNumbers(a); 
```

Also, `doubleNumbers` would only ever return 10 in the original implementation. You need to use the `a` variable you passed in, as the above code shows.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T12:19:54.577

您的代码有两个问题。首先，您应该更改 doubleNumbers 方法以返回某些内容，接下来您应该将 print 语句更改为打印返回值的位置。

例如（在伪代码中，所以你必须考虑一下！）：

```
method doCalculation{
....
return calculated answer
}

main{
....
Print(doCalculation)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T12:13:39.290

primitive types in Java passed by value not by reference. You need Object-type to pass it by reference try this:

```
 private static void doubleNumbers(Integer a) {
a = a*2;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T12:14:15.020

There are 2 obvious problems:

1.  You do not assign the return value of `doubleNumbers()` to any variable.
2.  `doubleNumbers()` does not return a value (replace `void`with `int`)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T12:14:37.453

```
public class hello {

     public static void main(String[] args) 
     {
       int a =5;
       a = doubleNumbers(a);

       System.out.println(" 5 doubled is:"+a);

     }

     private static int doubleNumbers(int a) {
       return a*2;
     }

} 
```

每个变量都有一个上下文，默认情况下仅限于使用它的函数。

您`a`的`doubleNumbers()`功能与第一个不同。

您需要返回结果，并将其分配给您的原始`a`变量

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T14:20:12.683

更好的方法是将 double Numbers() 方法从 更改`void`为 ，`int`以便它可以返回，也不是仅`a`打印 ，而是打印该方法，因为现在它将加倍`a`. 我还添加了扫描仪，因此程序不仅可以加倍 5，还可以输入任何数字。

```
public class Hello {
  public static void main(String[] args) {
    Scanner myScn = new Scanner(System.in);
    System.out.println("Please enter a number: ");
    int a = myScn.nextInt();
    //doubleNumbers(a);
    System.out.println(a+ " doubled is:"+doubleNumbers(a));

  }

  private static int doubleNumbers(int a) {
    int x = a*2;
        return x;
  }
} 
```

# java - 使用 GSON 解析 JSON 时出错以及如何访问 JSON 的内部元素

> ID：10815989
> 
> 赞同：0
> 
> 时间：2012-05-30T12:09:59.117
> 
> 标签：java, json, gson

我有这个 JSON

```
{"A":"valA",
"B":["valB"],
"C":"valC",
"D":"valD",
"data":[{
    "data1":"dval1",
    "data2":"dval2",
    "data3":"dval3",
        "data4":"dval4",}],
"F":"valF"} 
```

Java 对象：

```
public class ABCDObject {
        private String A;
        private String B;
        private String C;
        private String D;
        private List<String> data = new ArrayList<String>(){
                {
                        add("data1");
                        add("data2");
                        add("data3");
                        add("data4");
                        }
                };
        private String F;

        //getters for the above A,B,C,D, and F 
                public List<String> getData() {
                return data;
        } 
```

主班

```
Gson gson = new Gson();
        ABCDObject abcdObj = gson.fromJson(response, ABCDObject.class); 
```

我正在尝试访问 C 的值

```
abcdObj.getC(); 
```

我收到错误 com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected a string but was BEGIN_ARRAY at line 9 column 17

另一个问题是如何访问data的值-->data1等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:15:00.960

JSON 与对象不匹配，包括：

*   `B`是 JSON 中的一个数组，并且是一个字符串`ABCDObject`
*   `data`是 JSON 中具有四个属性的对象数组，以及`ABCDObject`.

* * *

*用示例编辑*

使用以下两个类，并修复格式错误的 JSON（data4 后的虚假逗号），这可以按预期工作。

**数据**- 保存“数据”数组的每个元素，每个数据对象有四个数据字段。

```
public class Data {
    private String data1;
    private String data2;
    private String data3;
    private String data4;
    // Plus getters, setters, toString
} 
```

**JsonHolder** - 封装整个 JSON 对象。

```
import java.util.List;

public class JsonHolder {
    private String A;
    private List<String> B;
    private String C;
    private String D;
    private List<Data> data;
    private String F;
    // Plus getters, setters, toString
} 
```

**完整性检查**

```
public static void main(String[] args) {
    Gson gson = new Gson();
    JsonHolder json = gson.fromJson(JSON_STRING, JsonHolder.class);
    System.out.println(json);
} 
```

**输出**

```
JsonHolder{A='valA', B=[valB], C='valC', D='valD', data=[Data{data1='dval1', data2='dval2', data3='dval3', data4='dval4'}], F='valF'} 
```

请注意，在这种情况下，尝试通过[using`JsonReader.setLenient(true)`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/stream/JsonReader.html#setLenient%28boolean%29)解决格式错误的 JSON 是行不通的；它仅在数组（集合）末尾处理额外的逗号，而不是在您的示例 JSON 包含的对象本身中。

# xml - 使用 XSLT 为 xml 属性生成增量 ID

> ID：10815992
> 
> 赞同：0
> 
> 时间：2012-05-30T12:10:25.507
> 
> 标签：xml, xslt

我有以下 XSL。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
        <xsl:template match="/">
            <xsl:element name="root">
                <xsl:apply-templates select="ModelDefinition/ContainerSpecNode"/>
            </xsl:element>
        </xsl:template>
        <xsl:template match="ContainerSpecNode">
            <xsl:element name="item">
                <xsl:attribute name="id"><xsl:value-of select="@specId"/></xsl:attribute>
                <xsl:attribute name="pathId"><xsl:value-of select="@pathId"/></xsl:attribute>
                <xsl:attribute name="specId"><xsl:value-of select="@specId"/></xsl:attribute>
                <xsl:attribute name="rel"><xsl:value-of select="@specType"/></xsl:attribute>
                <xsl:element name="content">
                    <xsl:element name="name">
                        <xsl:value-of select="shortName"/>
                        <xsl:if test="(@minimumCardinalityCount = '0') or (@maximumCardinalityCount != '1')"> [<xsl:value-of select="@minimumCardinalityCount"/>..<xsl:value-of select="@maximumCardinalityCount"/>]</xsl:if>
                    </xsl:element>
                </xsl:element>
                <xsl:apply-templates select="propertySpecs/PropertySpecNode">
                    <xsl:sort select="shortName"/>
                </xsl:apply-templates>
            </xsl:element>
        </xsl:template>
</xsl:stylesheet> 
```

在这里，我想为每个 containerSpecNode 的 Item 元素的 ID 属性创建增量唯一编号，就像 "Tree_node_1" ， "Tree_Node_2" 等等......在这里我修改了这样的代码。

```
. . . . . .
<xsl:element name="item">
<xsl:variable name="count">
            <xsl:number/>
            </xsl:variable>
            <xsl:attribute name="id"><xsl:value-of select="'Tree_Node_'"/><xsl:value-of select="$count+1"/></xsl:attribute> 
```

它会增加计数值，但不是针对所有 ContainerSpecNode。某些 ID 具有重复值。

我想为每个 ContainerSpecNode 创建。我怎样才能做到这一点。我可以使用 for-each 循环吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:34:36.650

**您接近正确的解决方案**。

**只需更换**：

```
<xsl:variable name="count">             
  <xsl:number/>             
</xsl:variable> 
```

**与**：

```
<xsl:variable name="count" select=
     "count(preceding::ContainerSpecNode | ancestor::ContainerSpecNode) +1"/> 
```

# c# - 将以前的 url 存储在查询字符串中的巧妙方法（ASP.NET C#）

> ID：10815993
> 
> 赞同：2
> 
> 时间：2012-05-30T12:10:25.820
> 
> 标签：c#, asp.net, query-string

我正在寻找一种聪明的方法来将以前的 url（以正确的顺序）存储在我存储在查询字符串中的值（最好是整数）中。

例如，我有 4 页。您可以从每个页面导航到另一个页面，也可以循环导航。

```
public enum Pages
    {
        [Url("/_layouts/A.aspx")]
        A = 1,
        [Url("/_layouts/B.aspx")]
        B = 2,
        [Url("/_layouts/C.aspx")]
        C = 3,
        [Url("/_layouts/D.aspx")]
        D = 4,
    } 
```

我想存储在我的查询字符串中的值是例如'Ref=123456'。根据这个值，我应该知道前一页是什么，还知道这之前的页面是什么，并且顺序正确！

首先我考虑使用标志枚举，但后来我陷入了循环......你可以从 (A->B->C->D->A->C->A->B->A ->....）

任何人都知道一个好的解决方案？

**-- 更新 --**
在这个例子中，我使用了 Pages，这可能不是最好的例子（想不出更好的东西 :-)），但我在 QueryString 中确实需要这个，所以我可以参考这个从另一个网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:20:33.923

也许我过度简化了这一点，但为什么不将它们存储在一个列表中，并在每次用户进入新页面时继续添加，只需添加到您的列表中。然后，当您想弄清楚他们去过哪里时，您只需从列表末尾倒数即可。

```
var pages=new List<int>();
pages.Add(1);
pages.Add(2);

int previousPage= pages[pages.count-2];// -2 because -1 would be the last page, I think
MessageBox.Show(previousPage.ToString()); 
```

应该显示1；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:26:00.117

我看到这两个部分

1.  获取导航所需的 url 列表
2.  提供导航显示。

我个人认为将其存储在查询字符串中是一个糟糕的主意。查询字符串只需要前一个和下一个步骤键，它可以像 url 集合中的上一个和下一个索引一样简单。

在屏幕上以某种方式向用户显示 url 将提供一个很好的用户体验。在这种情况下，您需要枚举显示文本和 url。以最简单的形式

```
var steps = new[] {
    new {Name = "", Url = ""},
    new {Name = "", Url = ""},
    new {Name = "", Url = ""},
    ...
}; 
```

然后可以将其存储在会话中并用于从一个资源导航到下一个资源。在某些时候，您需要清除/重置会话中的步骤。

正如@Pete 在评论中提到的那样。“聪明”不是你想要的。我认为您的意思是简单且可维护的:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:27:49.913

使用堆栈解决了我的感觉，每当用户从一个页面导航到另一个页面时，只需将当前页面路径推送到堆栈上，当用户单击取消按钮时，从堆栈中读取上一页并将他重定向到那里。

有一个类`PreviousPath`，其中有一个属性 Path

```
public class PreviousPath
{
    public string Path { get; set; }
} 
```

并且有一个 Stack 的这个类。

```
System.Collections.Generic.Stack<PageFrame> PageStack { get; set; } 
```

在上下文中维护此堆栈。

当用户从一个页面导航到另一个页面时推送路径：

```
public void CurrentPath(string url)
    {
        // Push the current page on to the navigation stack
        if (PageStack == null)
        {
            PageStack = new Stack<PreviousPath>();
        }

        var pageFrame = new PageFrame { Path = url };
        PageStack.Push(pageFrame);
        }

    } 
```

当您想返回一页时，只需从堆栈中弹出路径：

```
public string GetPreviousPage()
    {
        string url;
        if (PageStack != null && PageStack.Count > 0)
        {
            url = PageStack.Pop().Path;
        }
        else
        {
            url = "/default.aspx";
        }
        return Redirect(url);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T12:24:59.010

我编写了一个导航框架，可能会对您有所帮助，[http://navigation.codeplex.com/](http://navigation.codeplex.com/)

第一步是配置您的页面：

```
<state key="A" page="~/A.aspx">
    <transition key="AB" to="B">
    <transition key="AC" to="C">
</state>
<state key="B" page="~/B.aspx">
    <transition key="BA" to="A">
    <transition key="BC" to="C">
</state>
<state key="C" page="~/C.aspx">
    <transition key="CA" to="A">
    <transition key="CB" to="B">
</state> 
```

然后，在代码中从 A.aspx 移动到 B.aspx：

```
StateController.Navigate("AB"); 
```

从 B.aspx 移动到 C.aspx：

```
StateController.Navigate("BC"); 
```

并从 C 移回 A：

```
StateController.NavigateBack(2); 
```

数字 2 被传递是因为你需要返回 2 页，如果你想从 C 回到 B，你会传递 1。

由于我处理循环的方式，我不认为它完全符合您的要求。例如，如果你从 A->B->C->B 得到，那么我不允许你回到 C，只能回到 A。这是因为我一看到重复的页面（在这个如果是 B），然后我将历史记录截断为该页面的原始出现（这会阻止列表变得无限长）。

如果您有兴趣或需要任何帮助，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T12:35:17.347

每个人的建议都很棒，但是我从您的问题中得到的是，您可能希望存储此值并在将来读回它。

如上所述，其他人的建议对于临时解决方案非常有用，但在使用尽可能少的信息存储路径时就不那么好了。

也就是说，使用您的解决方案是可行的，但它仅限于一组手动页面。

考虑到这一点，我认为你是在正确的轨道上。

在每个页面上，您都会有指向其他页面的链接。您知道这些页面链接到 a、b、c 或 d，因此您可以：

```
<a href="~/a.aspx?Ref=<%= Request.QueryString["Ref"]; %><%= (string)(int)Pages.B; %>">Go to page A</a> 
```

每个页面都将包含指向其他页面的链接，您只需将当前页面 ID 附加到 Ref QueryString。

随着您的前进，它将为您构建路径。

编辑：出于阅读目的，您可能需要稍微更改它。而不是 ?Ref=123456789

您可能需要分隔页面以防止单编号页面与双编号页面发生冲突。

即 ?Ref=1,2,3,4,5,6,7,8

```
<a href="~/a.aspx?Ref=<%= Request.QueryString["Ref"]; %>,<%= (string)(int)Pages.B; %>">Go to page A</a> 
```

然后你可以使用：

```
string[] pages = Request.QueryString["Ref"].Split(','); 
```

# android - Jquery mobile listview with filter shows wrong results

> ID：10815997
> 
> 赞同：1
> 
> 时间：2012-05-30T12:10:44.780
> 
> 标签：android, iphone, jquery-mobile

I am working on jquery mobile to build some apps which requires listview with filter option , my database has more than 300 records to show in the listview , if i type any values in the search text box it shows repeated records in the listview even though i dont have any duplicate items in the database.

So i checked with jquery mobile wiki site example using given below link there also same thing is happening please some help me

[http://jquerymobile.com/test/docs/lists/lists-performance.html](http://jquerymobile.com/test/docs/lists/lists-performance.html)

go to that link type "bm" in the search box -> it shows all the list view rows as BMW ???

Highly appreciated your time and effort to help me on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:58:08.287

我的错误是在没有清除数据库条目的情况下，我在上面添加记录，这就是问题导致这些重复的问题

# c# - Directory is not empty error in c#

> ID：10815998
> 
> 赞同：5
> 
> 时间：2012-05-30T12:10:51.457
> 
> 标签：c#

In my example I am trying to delete the folders under a particular folder. My folder structure like this... `C:\Export\MyDir1\MyDir2\MyDir3\MyDir4\MyDir5` This structure will come on the fly. Next time when I run my application it should check for `C:\Export\MyDir1` directory and delete if exists. I written like this

```
private static string getExportPath(string exportTargetPath, string parentIssue)
        {
            string exportPath = Path.Combine(exportTargetPath, parentIssue);
            if (Directory.Exists(exportPath))
            {
                string[] files = Directory.GetFiles(exportPath);
                string[] dirs = Directory.GetDirectories(exportTargetPath);

                File.SetAttributes(exportTargetPath, FileAttributes.Normal);
                Directory.Delete(exportTargetPath,false);
            }

            return exportPath;
        } 
```

I checked with the issue posted in this sit [Issue](https://stackoverflow.com/questions/329355/cannot-delete-directory-with-directory-deletepath-true) I tried with this one but can't get solution. As per the suggested answer for this question, when i try to iterate through the directories then it is going to infinite loop. Where I done the mistake? Could any one help me?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T12:13:23.313

执行递归删除：`Directory.Delete(exportTargetPath, true);`

[MSDN](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)特别指出，如果出现以下情况，您将收到 IOException：

> path指定的目录是只读的，**或者recursive为false且path不是空目录。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T12:13:20.100

[Directory.Delete](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)的第二个参数被命名为“递归”是有原因的。尝试将其设置为 true。

# c# - Add xsd files to the data directory of the office clickonce deployment

> ID：10815999
> 
> 赞同：1
> 
> 时间：2012-05-30T12:10:59.510
> 
> 标签：c#, excel, vba, vsto, clickonce

I have the deployed excel document solution to the server using clickonce. xsd files are not being deployed though i have added these files in my solution and kept the properties as

> BuidAction:Content and Copy to Output Directory:Copy Always

on client machine. I have also added xml files which are deployed successfully on client machine in data directory with same properties as defined above.

Also i Have kept the Customization updates(Publish Tab) property to Check everytime the customization runs still when i publish new vwersion i m getting following error

> Customization could not be loaded because the application domain could not be created

Any suggessions ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T04:24:25.340

使用 VSTO 应用程序和 ClickOnce，您无法像使用客户端应用程序那样指定文件的部署位置。XML 文件会自动部署到 DataDirectory，无论您是否愿意，XSD 文件不会部署到 DataDirectory，它们将包含在本地。

因此，如果您需要将它们包含在同一个文件夹中，我建议您将 xml 文件重命名为 .xml.txt，以便将它们与应用程序的其余部分一起部署，而不是部署到数据目录中，然后让您的加载项启动时重命名它们。那会奏效吗？