# StackOverflow 问答 12364000-12364999

# linq - 使用 LINQ 或循环对相对接近的值进行分组

> ID：12364000
> 
> 赞同：4
> 
> 时间：2012-09-11T06:35:12.573
> 
> 标签：linq, loops, linq-group

我想这将比 C# 更多的数学。我有一个浮点值数组，其中大多数值属于为数不多的紧凑范围之一。这是一个示例（下限=0，上限=612）：

```
3.4,5.0,6.1, 
144.0,144.14,145.0,147.0, 
273.77,275.19,279.0, 
399.4,399.91,401.45, 
533.26,537.0,538.9 
```

这是一个包含 16 个值的数组，只是将它们分开以显示那些“组”。我需要做的是以某种方式对它们进行分组，使用 Linq 或手动循环或其他方式，以便这些接近的值属于一个组。

像除以 10（或 100）这样的简单数学运算是行不通的，因为 399 与 401 属于不同的组（上例中的第 4 组）。另一种方法是创建某种直方图，但我在这里寻找一些简单的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:52:25.543

如果元素在前一个值的某个增量（默认为 4）内，则这是一种对元素进行分组的方法：

```
IEnumerable<IEnumerable<double>> GetClusters(IEnumerable<double> data,
                                             double delta = 4.0)
{
    var cluster = new List<double>();
    foreach (var item in data.OrderBy(x=>x))
    {
        if (cluster.Count > 0 && item > cluster[cluster.Count - 1] + delta)
        {
            yield return cluster;
            cluster = new List<double>();
        }
        cluster.Add(item);
    }
    if (cluster.Count > 0)
        yield return cluster;
} 
```

您可以通过更改您的用途来调整算法`cluster[cluster.Count - 1] + delta`。例如，您可以使用

*   `cluster[0] + delta`- 集群中第一个元素的增量
*   `cluster.Average() + delta`- 到目前为止的集群平均值的增量
*   `cluster[cluster.Count / 2] + delta`- 距离集群中位数的增量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:09:56.013

`GroupBy`使用自定义比较器进行聚类的另一个想法

```
var numbers = new float[]
    {
       3.4f, 5.0f, 6.1f, 144.0f, 144.14f, 145.0f, 
       147.0f, 273.77f, 275.19f, 279.0f, 399.4f, 399.91f, 401.45f,
       49, 50, 51,
       533.26f, 537.0f, 538.9f
    };

foreach (var group in numbers.GroupBy(i => i, new ClosenessComparer(4f)))
    Console.WriteLine(string.Join(", ", group)); 
```

和习俗`ClosenessComparer`：

```
public class ClosenessComparer : IEqualityComparer<float>
{
    private readonly float delta;

    public ClosenessComparer(float delta)
    {
        this.delta = delta;
    }

    public bool Equals(float x, float y)
    {
        return Math.Abs((x + y)/ 2f - y) < delta;
    }

    public int GetHashCode(float obj)
    {
        return 0;
    }
} 
```

和输出：

```
1: 3,4 5 6,1
2: 144 144,14 145 147
3: 273,77 275,19 279
4: 399,4 399,91 401,45
6: 49 50 51
5: 533,26 537 538,9 
```

# javascript - 使用javascript取消选中页面加载上的所有复选框

> ID：12364007
> 
> 赞同：4
> 
> 时间：2012-09-11T06:35:53.807
> 
> 标签：javascript

我正在使用以下代码，但它不起作用。告诉我是否有任何建议。我希望在加载页面时取消选中所有复选框。我有以下代码，但它不起作用：

```
 window.onload = function abc() {
     document.getElementsByTagName('input')[0].focus();
 } 
```

```
<tr>
    <td>
        <input type="checkbox" ID="cb1" value="29500" onclick="if(this.checked){ cbcheck(this) } else { cbuncheck(this)}" /> Laptop
    </td>
    <td>
        <a href="#" id="a1" onmouseover="showimage('a1','laptop1');"  >Show Image</a>
        <img src="Images/laptop.jpg" id="laptop1" alt="" style="display:none; width:150px; height:150px;" onmouseout="hideimage('a1','laptop1');" class="right"/>
    </td>
 </tr>
 <tr>
     <td>
          <input type="checkbox" ID="cb2" value="10500" onclick="if(this.checked){ cbcheck(this) } else { cbuncheck(this)}" /> Mobile
     </td>
     <td>
          <a href="#" id="a2" onmouseover="showimage('a2','mobile1');"  >Show Image</a>
          <img src="Images/mobile.jpg" id="mobile1" alt="" style="display:none; width:150px; height:150px;"   onmouseout="hideimage('a2','mobile1');" />
     </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T06:41:14.863

在页面加载事件上调用此函数

```
function UncheckAll(){ 
      var w = document.getElementsByTagName('input'); 
      for(var i = 0; i < w.length; i++){ 
        if(w[i].type=='checkbox'){ 
          w[i].checked = false; 
        }
      }
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T06:41:02.583

我没有看到您的代码试图取消选中这些框。你只是想专注于一个元素。

```
window.onload = function abc() {
    document.getElementsByTagName('input')[0].focus();
    var a = document.getElementById('form_name').getElementsByTagName('input');
    for (var i=0;i<a.length;i++) {
        if (a[i].type == 'checkbox') a[i].checked = false;
    }
} 
```

我还建议您尝试一下[JQuery](http://jquery.com/)。上面的代码在 JQuery 中就像这样：

```
$(document).ready(function(){
    $('#formID input[type=checkbox]').attr('checked',false);
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T06:41:27.597

你应该试试

```
window.onload = function(){
   var checkboxes = document.getElementsByTagName("INPUT");

   for(var x=0; x<checkboxes.length; x++)
   {
      if(checkboxes[x].type == "checkbox")
      {
          checkboxes[x].checked = false;
      }
   }

} 
```

如果你可以使用 jQuery，你可以试试

```
$(function(){
    $('input[type=checkbox]').prop("checked", false);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-30T21:24:42.533

展示新技术的新答案。Vanilla JS 现在在 2015 年：

```
var list = document.querySelectorAll('input[type=checkbox]');
for (var item of list) {
    item.checked = false;
} 
```

紧凑的单行变体：

```
for(var i of document.querySelectorAll('[type=checkbox]')) { i.checked = false; } 
```

这直接来自[NodeList MDN 文档](https://developer.mozilla.org/en/docs/Web/API/NodeList#Example)示例。querySelectorAll 提供的列表是一个`NodeList`，`for...of`循环是一个用于迭代属性值的新语句，它是 2015 ECMAScript 6 标准的一部分——有关浏览器兼容性，请参见[此处](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of#Browser_compatibility)。

# android - LocationManager 可以像 AlarmManager 一样“唤醒”我的应用程序吗？

> ID：12364008
> 
> 赞同：1
> 
> 时间：2012-09-11T06:35:56.537
> 
> 标签：android, locationmanager

背景：我的应用程序应该每 X 秒获取一次其地理位置，并将该位置发送到服务器。服务器以新的间隔 X' 进行响应，从现在开始，应用程序应该每 X' 秒获取一次其地理位置，依此类推。应用程序应该无限期地运行。

问题：AlarmManager 可以在特定时间执行我的应用程序代码，即使我的应用程序当前没有运行。LocationManager 可以做同样的事情，还是我应该让我的服务在后台运行并在每次操作系统杀死它时“重新创建”？ [本文](http://www.androidguys.com/2009/09/09/diamonds-are-forever-services-are-not/)提倡前一种方法，但我不确定是否可以使用 LocationManager 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:48:37.037

您需要创建一个实现“onlocationchanged”侦听器的服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:05:53.293

您可以使用使用 检查此答案`BroadcastReceiver`的 AlarmManager定义一个： [https ://stackoverflow.com/a/7709140/779408](https://stackoverflow.com/a/7709140/779408)`AlarmManager.ELAPSED_REALTIME_WAKEUP`

那里有一个解决方案。

# javascript - 通过 JavaScript 捕获和更改默认 alert() 行为

> ID：12364015
> 
> 赞同：3
> 
> 时间：2012-09-11T06:36:36.010
> 
> 标签：javascript, jquery, html, alert, appmobi

很久以前我做过类似的事情，我捕获了警报并阻止了基于默认浏览器的警报框弹出并用一种或另一种模式替换它。然而，自从我这样做以来已经很久了，我无法从我的旧代码中找到任何参考，我目前也无法通过谷歌找到任何相关的内容。所以..我希望这里有人可以帮助我并帮助我。我还没有尝试过任何东西，所以不要问我尝试了什么。除了花费最后一个小时左右在谷歌上搜索任何类似于我模糊记忆中的代码片段的不同短语之外，我空手而归。我知道，这是一个质量很差的问题，但同时我相信其他人也会很高兴知道答案。

在我的情况下，我想要做的就是捕获将触发该`alert()`框的事件并将其中的消息传递给另一个通知变体。目前我正在与其他几个人在 appmobi 中做一些工作，我想`alert()`捕获它然后使用

`AppMobi.notification.alert(message,title,buttontext);`作为默认操作`alert()`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T06:39:20.470

您可以简单地覆盖警报方法：

```
window.alert = function(msg) {
   // whatever you want to do with 'msg' here
}; 
```

请注意，这不会有常规的阻塞行为`alert`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:43:33.133

正如其他人指出的那样，它可以被覆盖 - 只要记住它`AppMobi.notification.alert`需要*三个*参数。如果它具有回退默认值，我不会感到惊讶，但比抱歉更安全：

```
//alert is a native code function that we may need elsewhere
window.legacyAlert = window.alert;
window.alert = function(_msg) {
  AppMobi.notification.alert(_msg, 'Alert', 'OK');//or whatever
}; 
```

这会覆盖全局方法。或者，您可能需要仅在代码的某些部分使用闭包覆盖它：

```
alert('this is a vanilla js alert');
(function(alert) {
    alert('this alert has been overridden');
})(AppMobi.notification.alert);
alert('this is another vanilla js alert'); 
```

[摆弄](http://jsfiddle.net/ovfiddle/ZxBsF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T06:41:18.843

```
window.alert = function(message,title,buttontext) {
   AppMobi.notification.alert(message,title,buttontext); 
}; 
```

# sql-server - 递归 SQL 查询

> ID：12364022
> 
> 赞同：0
> 
> 时间：2012-09-11T06:36:58.597
> 
> 标签：sql-server, sql-server-2008, tsql, recursion

我有一些混乱的数据集，我需要获取特定父帐户的所有子帐户。

表格如下

> 代码 (PK)、姓名、ParentCode

没有外键

从我可以看到如果一个帐户没有父级，ParentCode 是一个空字符串，或者它被设置为与代码相同。

我一直在尝试关注[http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)但它似乎正在返回所有数据，而且我无法弄清楚我该怎么做只需一个帐户即可获得孩子。

```
WITH DirectReports (ParentCus, Code, Name, Level)
AS
(
    SELECT ParentCode, Code, Name, 0 AS Level
    FROM Customers
      WHERE Code = ParentCode OR Code = ''
    UNION ALL

    SELECT c.ParentCode, c.Code, c.Name, level + 1
    FROM Customers AS C
    INNER JOIN DirectReports AS d
        ON c.ParentCode = d.Code
        where c.Code != d.Code
)
SELECT ParentCus, Code, Name, Level
FROM DirectReports 
```

***编辑*** 要清楚，我需要能够将我的函数传递给代码并返回所有（递归）帐户子帐户。

***最终代码*** 我不得不对答案稍作改动，但这是最终的工作代码

```
declare @t table(code varchar(10), name varchar(10), parentcode varchar(10))
insert @t values(1, 'navn1', '1')
insert @t values(2, 'navn2', '')
insert @t values(3, 'navn3', 1)
insert @t values(4, 'navn4', 3)
insert @t values(5, 'navn5',4)
insert @t values(6, 'navn6', 2)
insert @t values(7, 'navn7', 3)

declare @code varchar(10) -- or however code/parentcode is declared
set @code = '1'           -- the parentcode you are trying to isolate

;WITH DirectReports (ParentCus, Code, Name, Level)
AS
(
    SELECT ParentCode, Code, Name, 0 AS Level
    FROM @t Customers
    -- this picks the chosen code
      WHERE Code = @code and (Code = ParentCode OR PARENTCode = '')
    UNION ALL
    SELECT c.ParentCode, c.Code, c.Name, level + 1
    FROM
        (select * from @t where  code !=  parentcode) --had to do this to account for an infinate loop
        as C
    INNER JOIN DirectReports AS d
        ON c.ParentCode = d.Code

)
SELECT ParentCus, Code, Name, Level
FROM DirectReports
-- level > 0: to ensure child accounts only
where level > 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:36:12.720

您需要指定所需的代码。此示例使用 @t 替换您的表客户

```
declare @t table(code varchar(10), name varchar(10), parentcode varchar(10))
insert @t values(1, 'navn1', '')
insert @t values(2, 'navn2', '')
insert @t values(3, 'navn3', 1)

declare @code varchar(10) -- or however code/parentcode is declared
set @code = '1'           -- the parentcode you are trying to isolate

;WITH DirectReports (ParentCus, Code, Name, Level)
AS
(
    SELECT ParentCode, Code, Name, 0 AS Level
    FROM @t Customers
    -- this picks the chosen code
      WHERE Code = @code and (Code = ParentCode OR PARENTCode = '')
    UNION ALL
    SELECT c.ParentCode, c.Code, c.Name, level + 1
    FROM @t C
    INNER JOIN DirectReports AS d
        ON c.ParentCode = d.Code
    -- added to prevent infinite loop, 
    -- I should point out that when this happens, you have bad data in your base
    WHERE c.ParentCode <> c.Code
)
SELECT ParentCus, Code, Name, Level
FROM DirectReports
-- level > 0: to ensure child accounts only
-- level < 100:to prevent infinite loops caused by circular references
where level > 0 and level < 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:42:10.387

```
;With CTE as 
(
select ParentCode, Code, Name,row_number() over (order by (select 0)) as rn from Customers
)

,DirectReports as (ParentCus, Code, Name, Level)
AS
(
    SELECT rn,ParentCode, Code, Name, 0 AS Level
    FROM CTE WHERE rn=1 and (Code = ParentCode OR Code = '')
    UNION ALL

    SELECT c.ParentCode, c.Code, c.Name, level + 1
    FROM CTE AS C
    INNER JOIN DirectReports AS d
        ON c.ParentCode = d.Code and c.rn=d.rn+1
        where c.Code != d.Code
)
SELECT ParentCus, Code, Name, Level
FROM DirectReports 
```

# django - django-admin 内联模型

> ID：12364028
> 
> 赞同：1
> 
> 时间：2012-09-11T06:37:19.753
> 
> 标签：django, django-models, django-admin

我是 django 的新手，我正在尝试创建一个使用现有数据库的应用程序（因此无法更改数据库）。

我有以下型号：

```
class Person(models.Model):
  person_identity = models.OneToOneField("Identity", primary_key=True)
  login           = models.CharField(max_length=1200)
  name            = models.CharField(max_length=300, blank=False)

class Identity(models.Model):
  # auto generated ID-field DB: id bigint(20) PK, UI, AI, NN
  last_used = models.DateTimeField(null=True, blank=True)
  blocked   = models.IntegerField()

class IdentityAccessToken(models.Model):
    identity      = models.ForeignKey("Identity")
    accesstoken   = models.ForeignKey("AccessToken")
    cycle         = models.DateTimeField(null=True, blank=True)

class AccessToken(models.Model):
  id          = models.IntegerField(primary_key=True)
  token       = models.CharField(max_length=120)
  description = models.CharField(max_length=765, blank=True) 
```

我已经为我的人员模型设置了管理员，并且我想显示一个包含所显示人员的访问令牌的内联。由于该人具有身份模型和 PK，但访问令牌指的是该身份，我不知道如何处理。

有没有做这些事情的最佳实践？

# mule - 如何从 Mule 3 入站文件端点传递 java.io.File

> ID：12364030
> 
> 赞同：1
> 
> 时间：2012-09-11T06:37:43.013
> 
> 标签：mule

使用 Mule 3，我如何将`java.io.File`对象有效负载从入站文件端点传递到 Groovy 脚本而不是文件的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:18:14.973

您需要关闭流式传输并覆盖文件连接器上的默认消息工厂：

```
<file:connector name="fileConnector" streaming="false" autoDelete="false">
    <service-overrides messageFactory="org.mule.transport.file.FileMuleMessageFactory" />
</file:connector> 
```

请注意，您可以在开始之前或完成处理后移动/删除文件，否则 Mule 会一次又一次地轮询它。

# c - 如何为二维浮点数组重新分配内存？

> ID：12364031
> 
> 赞同：3
> 
> 时间：2012-09-11T06:37:51.760
> 
> 标签：c, malloc, realloc

我尝试了以下方法来重新分配一个 2D`float`数组，其大小从 2X2 变为 3X3。代码会抛出一段`segfault`时间试图`realloc`记忆`weights[2]`.

```
num_vertices = 2;
float **weights = malloc(num_vertices*sizeof(float *));      // weight array matrix
for(i = 0; i < num_vertices; i++){
    weights[i] = malloc(num_vertices*sizeof(float));
}

num_vertices = 3;
weights = realloc(weights, num_vertices*sizeof(float *));      // weight array matrix
for(i = 0; i < num_vertices; i++){       
    weights[i] = realloc(weights[i], num_vertices*sizeof(float));
} 
```

当然，我可以一次又一次地`free`使用 2D 数组`malloc`，但我一直在寻找更优雅的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T06:42:43.037

The problem is that `weights[2]` contains garbage after you realloc `weights`.

You probably want to do something like this:

```
new_vertices = 3;
weights = realloc(weights, new_vertices*sizeof(float *));
for(i = 0; i < new_vertices; i++)
{
    if (i >= num_vertices)
        weights[i] = NULL;
    weights[i] = realloc(weights[i], new_vertices*sizeof(float));
}
num_vertices = new_vertices; 
```

Note that you have a potential memory leak if realloc ever fails. Since you have no error checking yet though this probably doesn't matter for now.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T06:43:08.330

The realloc of `weights[2]` is trying to realloc unallocated memory, since `weights[2]` was never assigned any pointer.

Usually, if you want a 2D array, just use `wegihts[width*y + x]` to index into the array, instead of making an array of pointers.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T06:43:28.727

您不能循环到*新*的顶点计数，因为外部数组的那部分尚未分配并且包含未初始化的数据。而是循环到新的`num_vertices - 1`并重新分配，然后创建一个全新的`weights[num_verticees - 1]`.

# xslt - 如何在xslt中将double值转换为指数

> ID：12364032
> 
> 赞同：0
> 
> 时间：2012-09-11T06:37:58.760
> 
> 标签：xslt, exponential

我需要使用 xslt 将 double 值转换为指数值，我认为我们可以使用 format-number 函数来做到这一点，但我不知道如何使用它进行转换，所以任何人都可以帮助我。

谢谢，@nag

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:06:10.393

XSLT 1.0 不支持科学计数法输出，XSLT 2.0 支持非常有限。（在 XSLT 2.0 中，从 double 到 string 的转换使用科学记数法来表示 1e-6 到 1e+6 范围之外的绝对值，并且无法控制这一点，尽管您可以通过十进制转换完全避免它。）

# java - 在 servlet 中创建 json 对象

> ID：12364036
> 
> 赞同：1
> 
> 时间：2012-09-11T06:38:18.577
> 
> 标签：java, android, json, servlets

我想将检索到的数据从服务器发送到我的 Android 客户端......我使用了一个 json 对象来做到这一点。这是我的 servlet 代码。

```
import java.io.IOException; 
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

    public class AvailabilityResponse extends HttpServlet {

@Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {

    response.setContentType("application/json");
    PrintWriter out=response.getWriter();

        String br_id;
        br_id=request.getParameter("branchname");

    try{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection con=DriverManager.getConnection("jdbc:mysql://localhost:8888/atmlivedetails","root","root");  
            Statement st=con.createStatement();
            ResultSet rs=st.executeQuery("select atmbrno, atmbrname  from location_stat where act_brname='"+br_id+"'");
            while(rs.next()){

        String s = rs.getString("atmbrno");
        String t = rs.getString("atmbrname");

        JSONObject arrayObj = new JSONObject();

        arrayObj.put("atmbrno",s);
        arrayObj.put("atmbrname",t);

        out.print(arrayObj);
        }
        rs.close ();
        st.close ();
           }
    catch(Exception e){
            out.print(e);
    }

} 
```

}

这是我的android端代码..

```
import java.util.ArrayList;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.ParseException;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.ClientProtocolException;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.os.Bundle;

public class CheckAvailability extends Activity{

Button but1,but2;
EditText brName;
TextView txt1;
String text;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.availability);

    brName =(EditText)findViewById(R.id.editText1);
    but1 = (Button)findViewById(R.id.button5); 
    but2 = (Button)findViewById(R.id.button6);
    txt1 = (TextView)findViewById(R.id.textView3);

    but1.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v){

            String result = null;
            InputStream is = null;
            StringBuilder sb=null;

           ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

           postParameters.add(new BasicNameValuePair("branchname", brName.getText().toString()));

        //http post
                  try{
                      HttpClient httpclient = new DefaultHttpClient();
                      HttpPost httppost = new HttpPost("http://10.0.2.2:8080/hello/AvailabilityResponse");
                      httppost.setEntity(new UrlEncodedFormEntity(postParameters));
                      HttpResponse response = httpclient.execute(httppost);
                      HttpEntity entity = response.getEntity();
                      is = entity.getContent();
                  }catch(Exception e){
                      Log.e("log_tag", "Error in http connection"+e.toString());
                  }

        //convert response to string
                  try{
                       BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                       sb = new StringBuilder();
                       sb.append(reader.readLine() + "\n");
                       String line="0";

                             while ((line = reader.readLine()) != null) {
                                 sb.append(line + "\n");
                             }
                             is.close();
                             result=sb.toString();

                  }catch(Exception e){
                        Log.e("log_tag", "Error converting result "+e.toString());
                         }

              //paring data
                        String atm_id;
                        String atm_name;

                        try{
                        JSONArray jArray = new JSONArray(result);
                        JSONObject json_data=null;

                        for(int i=0;i<jArray.length();i++){
                                json_data = jArray.getJSONObject(i);
                                atm_id=json_data.getString("atmbrno");
                                atm_name=json_data.getString("atmbrname");

                              //txt1.setText(atm_name);
                        }

                        }catch(JSONException e1){
                            Toast.makeText(getBaseContext(), "No DATA Found", Toast.LENGTH_LONG).show();

                        }catch (ParseException e1){
                            e1.printStackTrace();
                        }

        }
}); 
```

} }

但是当我运行它时，它总是给我“未找到数据”异常......任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:14:20.447

您的 servlet 仅返回 N 个 JSON 对象。但是您对该 JSON 数组的响应可能是错误的，请在您的 servlet 中尝试此代码

```
try{
   Class.forName("com.mysql.jdbc.Driver").newInstance();
   Connection con=DriverManager.getConnection("jdbc:mysql://localhost:8888/atmlivedetails","root","root");  
            Statement st=con.createStatement();
            ResultSet rs=st.executeQuery("select atmbrno, atmbrname  from location_stat where act_brname='"+br_id+"'");
            int i=0;
            JSONArray jArray = new JSONArray();
            while(rs.next()){

        String s = rs.getString("atmbrno");
        String t = rs.getString("atmbrname");

        JSONObject arrayObj = new JSONObject();

        arrayObj.put("atmbrno",s);
        arrayObj.put("atmbrname",t);

        jArray.add(i,arrayObj);
        i++;
        }
        rs.close ();
        st.close ();
        out.print(jArray);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:56:50.593

在处理 json 字符串（转换为 json 对象）之前打印来自服务器的响应，以便您可以跟踪实际原因。你实际上得到了 json 异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:58:12.153

写入后`outputstream`，您需要`Printwriter`像这样关闭对象。

```
out.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T11:22:40.027

您需要将 json-lib-2.4-jdk15.jar 文件添加到您的项目类路径中，并使用以下代码创建 JSON 对象。

```
 JSONObject jsonData = new JSONObject();
    jsonData.put("key1", "value1");
    jsonData.put("key2", "value2");
    jsonData.put("key3", "value3");
    System.out.println("JSON data: "+jsonData.toString()); 
```

控制台你会得到输出： JSON 数据：{"key1":"value1","key2":"value2","key3":"value3"}

# java - 合并一个实体，更改其id，再次合并，导致“映射到数据库中的主键列。不允许更新”错误

> ID：12364051
> 
> 赞同：10
> 
> 时间：2012-09-11T06:39:24.027
> 
> 标签：java, hibernate, jakarta-ee, jpa, eclipselink

我有一个 JPA 程序，其中 EclipseLink 是持久性提供程序。当我合并用户实体、更改其 ID 并尝试再次合并相同的用户实例时，会引发错误。我重写我的代码以最简单的方式说明我的问题。

```
User user = userManager.find(1);
userManager.merge(user);
System.out.println("User is managed? "+userManager.contains(user);
user.setId(2);
userManager.merge(user); 
```

上面的代码不在事务上下文中。userManager 是一个注入了 EntityManager 的无状态会话 bean。执行时，控制台打印：

```
User is managed? false

Exception [EclipseLink-7251] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The attribute [id] of class [demo.model.User] is mapped to a primary key column in the database. Updates are not allowed. 
```

异常发生在第二次 merge() 调用。

如果我创建一个新用户，设置它的 ID 并合并它，它可以工作：

```
User user = userManager.find(1);
userManager.merge(user);
System.out.println("User is managed? "+userManager.contains(user);
User newUser = new User();
newUser.setId(2);
userManager.merge(newUser); 
```

那么第一种情况和第二种情况有什么区别呢？根据 JPA 规范，只要实体处于分离状态，合并就应该成功，对吧？（假设存在 ID=2 的实体）

为什么 EclipseLink 提供者似乎对用户实体之前已合并的事实感到困扰？

更新：这似乎是 EclipseLink 的一个错误。我已将持久性提供程序从 EclipseLink 替换为 Hibernate：

我改变

```
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> 
```

到

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
```

没有抛出任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:51:12.090

原因是`Id`可以插入/定义 - 正如您在第二个示例中所做的那样，但没有更改/更新 - 正如您在第一个示例中尝试的那样。JPA 提供程序尝试在数据库中反映更改并失败。

JPA 2 规范 §2.4 说

> 应用程序不得更改主键的值。如果发生这种情况，则行为未定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T05:26:52.517

这似乎是 EclipseLink 的一个错误。我已将持久性提供程序从 EclipseLink 更改为 Hibernate：

从

```
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> 
```

到

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
```

没有抛出任何错误。

EclipseLink 的版本是 2.3.2。（随最新的 Glassfish 应用程序服务器 3.1.2 一起提供）。

截至目前，hibernate 的最新版本是 4.1.7。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-17T17:26:04.803

`<property name="eclipselink.weaving.internal" value="false"/>`根据 [http://blogs.nologin.es/rickyepoderi/index.php?/archives/95-Weaving-Problem-in-EclipseLink.html](http://blogs.nologin.es/rickyepoderi/index.php?/archives/95-Weaving-Problem-in-EclipseLink.html)在 persistence.xml 中尝试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-24T20:40:22.817

这个答案晚了4年，但无论如何。

您可以通过使用 SQL 或**JPQL**或**Criteria API**执行定期**更新查询**来更新它。我觉得最后一个是最好的。

 ****这是一个可以解决问题的代码示例。我在类似的情况下尝试过它，它适用于 EclipseLink。

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaUpdate<User> cu = cb.createCriteriaUpdate(User.class);
Root<User> c = cu.from(User.class);
cu.set(User_.id, newId).where(    cb.equal(c.get(User_.id), oldId)    );
em.createQuery(cu).executeUpdate(); 
```

而不是*User_.id*您可以将字段名称作为字符串传递，例如*"id"*。

另一个例子[http://www.thoughts-on-java.org/criteria-updatedelete-easy-way-to/](http://www.thoughts-on-java.org/criteria-updatedelete-easy-way-to/)****

# jquery - $.mobile.changePage 未正确加载下一个动态页面

> ID：12364054
> 
> 赞同：1
> 
> 时间：2012-09-11T06:39:27.967
> 
> 标签：jquery, json, windows-phone-7, cordova, jquery-mobile

我正在使用 jQuery mobile 和 PhoneGap(1.9.0) 开发 windows mobile 7 应用程序。我在应用程序中有多个 html 页面，所有页面中的数据都是通过 JSON 解析加载的，需要存储一些数据。所以我使用localStorage进行数据存储（因为windows浏览器还不支持通过phonegap的数据库）。在 Windows 浏览器中，本地存储仅适用于 phonegap 的 deviceready 事件。

```
document.addEventListener("deviceready", mymethod, false);

function mymethod(){

} 
```

一切都很好，除了当我在页面之间导航时首先出现白屏，然后出现新页面。这看起来很糟糕。

我使用`window.location.href='page2.html';` （每种方法都可以正常工作，但在页面之间导航有延迟）

在屏幕之间导航。

但是当我使用

```
$.mobile.changePage("page2.html"); 
```

然后白屏会消失，但我的 deviceready 方法将不起作用，并且会出现带有一些静态数据（页眉和页脚）的空白屏幕。请告诉我哪里错了。我应该如何使用`$.mobile.changePage("page2.html");`，在下一页中，我的页面加载了来自本地存储或 json 解析的内容。或使用 `window.location.href='page2.html';`但没有白色闪屏。

我希望你们都明白我的问题。
有没有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:50:44.800

您应该使用`$.mobile.changePage("page2.html");`jqm 将使用 Ajax 加载此页面（并且可以进行很好的转换）。不会再有 deviceready 事件（当您停留在页面中时），但您可以`pageshow`在页面显示时捕获事件。

（来自文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)）

```
$( 'div' ).live( 'pageshow',function(event, ui){
  alert( 'This page was just hidden: '+ ui.prevPage);
}); 
```

# android - 仅当活动在后台时才显示来自谷歌聊天活动的通知

> ID：12364057
> 
> 赞同：0
> 
> 时间：2012-09-11T06:39:36.117
> 
> 标签：android

这是一个谷歌聊天应用程序。当我收到来自 Google Chat 的消息时，我想在活动处于后台时将其作为通知显示在状态栏中。

我尝试在方法中设置布尔值，`onPause()`但它不起作用。

```
public void addMessage(String chatid, String msg) {
    // I want to the execute this line only when the activity is in background
    notify.getCurrentActivity(getApplicationContext(), msg, fromName, chatid);
}

public void getCurrentActivity(Context context, String msg){
    showNotification(context, msg, fromName, fromChatID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:30:31.400

我自己找出解决方案

私有 int 密钥；// 声明为全局

受保护的无效 onPause

{

键=1；

super.onpause();

}

受保护的无效 onResume{

键=0；

超级.onResume();

}

public void addMessage(String chatid, String msg) {

如果（键==1）

{

notify.getCurrentActivity(getApplicationContext(), msg, fromName, chatid);

}

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:44:37.843

尝试在下面做

```
try{
    boolean foregroud = new ForegroundCheckTask().execute(context).get();

        if(foregroud)
        {
            //app is foreground 
        }

        else
        {
            //app is not foreground         }
    }catch(Exception e)
    {
        e.toString();
    } 
```

在下面添加异步

```
 //Foreground check
class ForegroundCheckTask extends AsyncTask<Context, Void, Boolean> {

      @Override
      protected Boolean doInBackground(Context... params) {
        final Context context = params[0].getApplicationContext();
        return isAppOnForeground(context);
      }

      private boolean isAppOnForeground(Context context) {
        ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        List<RunningAppProcessInfo> appProcesses = activityManager.getRunningAppProcesses();
        if (appProcesses == null) {
          return false;
        }
        final String packageName = context.getPackageName();
        for (RunningAppProcessInfo appProcess : appProcesses) {
          if (appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND && appProcess.processName.equals(packageName)) {
            return true;
          }
        }
        return false;
      }
    } 
```

# c# - .Net 的 Java AST 解析器

> ID：12364059
> 
> 赞同：3
> 
> 时间：2012-09-11T06:39:58.813
> 
> 标签：c#, java, .net, abstract-syntax-tree

我正在寻找一个解析器，它可以从 java 代码中提取抽象语法树。解析器必须在 .Net 下工作 - 我需要从 C# 运行它。我知道 ANTLR，但我没有找到任何可以将 AST 生成为树（而不是平面列表）的语法。谁能帮我 ？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:12:43.100

不确定它是否有帮助，但[JavaCC](http://javacc.java.net/)可以为您生成 AST，它有一些 Java 语法定义（像[这样](http://java.net/projects/javacc/downloads/download/contrib/grammars/Java1.5.zip)，但看看[替代品](http://java.net/projects/javacc/downloads/directory/contrib/grammars)），并且开发人员[最近添加了 C++ 代码生成](http://comments.gmane.org/gmane.comp.java.javacc.user/2079)。您可能可以与 C# 链接。

# ruby - 更改 ruby on rails 的基本配置

> ID：12364061
> 
> 赞同：0
> 
> 时间：2012-09-11T06:40:07.340
> 
> 标签：ruby, ruby-on-rails-3, gem

两个简单的问题，如何更改 ruby​​ on rails 的基本配置？
我需要添加两件事：
我想默认使用mysql，现在我使用这个命令：

```
rails new projet_name -d mysql 
```

以及如何默认添加gem？
我使用瘦服务器，我希望它默认包含在我的 gem 文件中。

我查看我的系统，但我没有找到骨架

```
atmoner-laptop:~/$ whereis ruby
ruby: /usr/bin/ruby
/usr/bin/ruby1.8 
/usr/lib/ruby 
/usr/bin/X11/ruby 
/usr/bin/X11/ruby1.8 
/usr/share/man/man1/ruby.1.gz 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:44:09.730

rails 提供了使用骨架模板的可能性。快速搜索给了我[http://www.railsboost.com/templates/new](http://www.railsboost.com/templates/new)和[http://railsapps.github.com/rails-composer/](http://railsapps.github.com/rails-composer/)，但我知道还有很多其他的，其中一个主题可能更适合满足您的需求。

# android - 即使在初始化后视图也是空的

> ID：12364067
> 
> 赞同：-1
> 
> 时间：2012-09-11T06:40:45.250
> 
> 标签：android, android-listview, nullpointerexception

我的代码中有一个`listview`，我想设置`adapter`它。

但问题是，即使在初始化之后`listview`，它仍然是**null**导致`nullPointerException`. （我通过记录和调试检查了它）

我无法从该 xml 访问任何视图。

我错过了什么？任何帮助表示赞赏。

**xml**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:scrollbars="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ListView
            android:id="@+id/lvToday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:divider="#FFF"
            android:dividerHeight="2dp" />

        <ListView
            android:id="@+id/lvTomorrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/lvToday"
            android:divider="#FFF"
            android:dividerHeight="2dp" />
    </RelativeLayout>

</ScrollView> 
```

* * *

**活动文件**

```
public class DashboardActivity extends Activity {

ListView lvToday, lvTomorrow;
TextView lblCall;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dashboard);
    init();
}

private void init() {
    lvToday = (ListView) findViewById(R.id.lvToday);
    lvTomorrow = (ListView) findViewById(R.id.lvTomorrow);

    TodayAppAdapter adapter = new TodayAppAdapter(DashboardActivity.this,
            DashboardActivity.this);
                // This line is giving NULL
    lvToday.setAdapter(adapter);

    TomorrowAppAdapter adapter1 = new TomorrowAppAdapter(
            DashboardActivity.this, DashboardActivity.this);
                // This line is giving NULL
    lvTomorrow.setAdapter(adapter1);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:58:36.287

1）测试eclipse菜单：Project -> Clean...

2) 如果您的 xml 布局有多个版本（例如 layout-large、layout-xlarge...），请检查它们是否都有您的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:43:52.103

您的布局中缺少 TextView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:55:36.163

把`String []` 你的适配器的名字一起放在你的

```
OnDraw() 
```

方法

# php - 来自外部脚本的 Drupal 7 自定义 db_query？

> ID：12364068
> 
> 赞同：0
> 
> 时间：2012-09-11T06:40:53.850
> 
> 标签：php, drupal, drupal-nodes

我正在使用外部脚本通过调用适当的 Drupal 标头和引导程序来制作Node // `Insert`。我包括了如下调用（在 Drupal 根目录下的脚本中）：`Edit``Delete`

```
define('DRUPAL_ROOT', getcwd());
require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);
require_once DRUPAL_ROOT . '/' . variable_get('password_inc', 'includes/password.inc');
require_once drupal_get_path('module', 'biblio') . '/includes/biblio.contributors.inc'; 
```

实际上它工作正常`Node Actions (node_load, node_save)`，`SELECT db_query`但**对于**.`DELETE Queries`

我的意思是，`node_load()` `node_save()` `db_query("SELECT ..."`已经在工作了..
但完全**不能**与：

```
db_query("DELETE FROM {biblio} WHERE nid = %d", $nid); 
```

..即使我使用了以下方式：

```
$deleted = db_delete('biblio')
          ->condition('nid', $nid)
          ->execute(); 
```

又不工作了。而且，即使我不能使用 DIRECT PURE PHP MYSQL 查询，例如：

```
$mysql_connection = mysql_connect(MYSERVER, USERNAME, PASSW);
mysql_select_db(MYDATABASE, $mysql_connection);
mysql_query("DELETE FROM biblio WHERE nid=`".$nid."`"); 
```

我的上帝！怎么了？
实际上，我正在尝试通过使用外部脚本来解决 BIBLIO 模块及其项目。

请问我现在该怎么办？

我的另一个问题是，我们不能直接将这些查询用于其他表中的项目，而不是`node`表。因为正如我现在所注意到的，`node_delete`它也`node`仅用于桌子内的物品。我们不能将它`node_delete`用于其他表格，例如`biblio`表格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:35:59.327

调用`db_query()`or`db_delete()`不起作用，因为 Drupal 在不知道开始使用哪个数据库引擎的情况下无法加载包含数据库 API 函数或类的必要包含文件。该信息通常从用于运行 Drupal的[settings.php文件中读取。](https://api.drupal.org/api/drupal/sites!default!default.settings.php/7)从外部脚本调用数据库 API 时，您需要提供该信息。

请注意，这`db_query("DELETE FROM {biblio} WHERE nid = %d", $nid);`是 Drupal 6 代码；对于 Drupal 7，您应该使用`db_delete()`.

# xml - 如何在 xslt 1.0 中对 NodeItem 进行分组？

> ID：12364070
> 
> 赞同：0
> 
> 时间：2012-09-11T06:41:00.077
> 
> 标签：xml, xslt, xslt-1.0

输入 xml：

```
<Root>
    <RootHeader>Header</RootHeader>
    <Reference>
        <name>RefName</name>
        <value>Header001</value>
    </Reference>

    <NodeNumber>1</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <NodeNumber>2</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>101</value>
    </Reference>

    <NodeNumber>3</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>101</value>
    </Reference>

    <NodeNumber>4</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <NodeNumber>5</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>102</value>
    </Reference>
</Root> 
```

预期输出：

```
<Root>
    <RootHeader>Header</RootHeader>
    <Reference>
        <name>RefName</name>
        <value>Header001</value>
    </Reference>

    <GroupingSequenceNumber>1</GroupingSequenceNumber>
    <NodeNumber>1</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <GroupingSequenceNumber>1</GroupingSequenceNumber>
    <NodeNumber>2</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>101</value>
    </Reference>

    <GroupingSequenceNumber>2</GroupingSequenceNumber>
    <NodeNumber>3</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <GroupingSequenceNumber>3</GroupingSequenceNumber>
    <NodeNumber>4</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <GroupingSequenceNumber>1</GroupingSequenceNumber>
    <NodeNumber>5</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>102</value>
    </Reference>
</Root> 
```

如何根据根/参考/值进行分组并在输出中添加分组序列号？

分组中应排除标题中的引用。意味着分组应该在出现 NodeNumber 之后开始。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:54:44.600

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:key name="kRefs" match="Reference[preceding-sibling::NodeNumber]" use="value" />

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="
      @* | node()[not(self::Reference[preceding-sibling::NodeNumber])][not(self::NodeNumber)]" />
    <xsl:for-each select="
        Reference[preceding-sibling::NodeNumber]
                 [generate-id() = generate-id(key('kRefs',value)[1])]">
       <xsl:comment>Start of group for value <xsl:value-of select="value" /></xsl:comment> 
       <xsl:apply-templates select="key('kRefs',value)" />            
       <xsl:comment>End of group</xsl:comment>   
    </xsl:for-each>               
  </xsl:copy>
</xsl:template>

<xsl:template match="Reference[preceding-sibling::NodeNumber]" >
  <GroupingSequenceNumber><xsl:value-of select="position()" /></GroupingSequenceNumber>
  <xsl:copy-of select=".|preceding-sibling::NodeNumber[1]" />
</xsl:template>

</xsl:stylesheet> 
```

...当应用于此输入时...

```
<Root>
    <RootHeader>Header</RootHeader>
    <Reference>
        <name>RefName</name>
        <value>Header001</value>
    </Reference>

    <NodeNumber>1</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <NodeNumber>2</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>101</value>
    </Reference>

    <NodeNumber>3</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>101</value>
    </Reference>

    <NodeNumber>4</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>100</value>
    </Reference>

    <NodeNumber>5</NodeNumber>
    <Reference>
        <name>RefName</name>
        <value>102</value>
    </Reference>
</Root> 
```

...产量...

```
<Root>
  <RootHeader>Header</RootHeader>
  <Reference>
    <name>RefName</name>
    <value>Header001</value>
  </Reference>
  <!--Start of group for value 100-->
  <GroupingSequenceNumber>1</GroupingSequenceNumber>
  <NodeNumber>1</NodeNumber>
  <Reference>
    <name>RefName</name>
    <value>100</value>
  </Reference>
  <GroupingSequenceNumber>2</GroupingSequenceNumber>
  <NodeNumber>4</NodeNumber>
  <Reference>
    <name>RefName</name>
    <value>100</value>
  </Reference>
  <!--End of group-->
  <!--Start of group for value 101-->
  <GroupingSequenceNumber>1</GroupingSequenceNumber>
  <NodeNumber>2</NodeNumber>
  <Reference>
    <name>RefName</name>
    <value>101</value>
  </Reference>
  <GroupingSequenceNumber>2</GroupingSequenceNumber>
  <NodeNumber>3</NodeNumber>
  <Reference>
    <name>RefName</name>
    <value>101</value>
  </Reference>
  <!--End of group-->
  <!--Start of group for value 102-->
  <GroupingSequenceNumber>1</GroupingSequenceNumber>
  <NodeNumber>5</NodeNumber>
  <Reference>
    <name>RefName</name>
    <value>102</value>
  </Reference>
  <!--End of group-->
</Root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:03:56.700

[这与您之前在 xslt 1.0 中对 xml 节点进行分组的](https://stackoverflow.com/questions/12354471/grouping-of-xml-nodes-in-xslt-1-0)问题非常相似

但是，在这种情况下，您确实希望匹配**NodeNumber元素，并通过查看****Reference**元素后面的值来计算它们。

```
<xsl:variable name="Ref" select="following-sibling::Reference[1]/value"/>
<GroupingSequenceNumber>
   <xsl:number count="NodeNumber[following-sibling::Reference[1]/value = $Ref]"/>
</GroupingSequenceNumber> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="NodeNumber">
      <xsl:variable name="Ref" select="following-sibling::Reference[1]/value"/>
      <GroupingSequenceNumber>
         <xsl:number count="NodeNumber[following-sibling::Reference[1]/value = $Ref]"/>
      </GroupingSequenceNumber>
      <xsl:copy-of select="."/>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例输入文档时，将输出以下内容

```
<Root>
   <RootHeader>Header</RootHeader>
   <Reference>
      <name>RefName</name>
      <value>Header001</value>
   </Reference>
   <GroupingSequenceNumber>1</GroupingSequenceNumber>
   <NodeNumber>1</NodeNumber>
   <Reference>
      <name>RefName</name>
      <value>100</value>
   </Reference>
   <GroupingSequenceNumber>1</GroupingSequenceNumber>
   <NodeNumber>2</NodeNumber>
   <Reference>
      <name>RefName</name>
      <value>101</value>
   </Reference>
   <GroupingSequenceNumber>2</GroupingSequenceNumber>
   <NodeNumber>3</NodeNumber>
   <Reference>
      <name>RefName</name>
      <value>101</value>
   </Reference>
   <GroupingSequenceNumber>2</GroupingSequenceNumber>
   <NodeNumber>4</NodeNumber>
   <Reference>
      <name>RefName</name>
      <value>100</value>
   </Reference>
   <GroupingSequenceNumber>1</GroupingSequenceNumber>
   <NodeNumber>5</NodeNumber>
   <Reference>
      <name>RefName</name>
      <value>102</value>
   </Reference>
</Root> 
```

# c++ - 为什么使用两个 sizeof 来检查一个类是否是默认可构造的，而一个却不行？

> ID：12364074
> 
> 赞同：19
> 
> 时间：2012-09-11T06:41:12.253
> 
> 标签：c++, templates, metaprogramming

我使用了“ [Is there a way to test a C++ class是否具有默认构造函数（编译器提供的类型特征除外）？](https://stackoverflow.com/a/2770326/854731) ”中的代码。

我稍微修改了它以适用于我所有的测试用例：

```
template< class T >
class is_default_constructible {
    typedef int yes;
    typedef char no;

    // the second version does not work
#if 1
    template<int x, int y> class is_equal {};
    template<int x> class is_equal<x,x> { typedef void type; };

    template< class U >
    static yes sfinae( typename is_equal< sizeof U(), sizeof U() >::type * );
#else
    template<int x> class is_okay { typedef void type; };

    template< class U >
    static yes sfinae( typename is_okay< sizeof U() >::type * );
#endif

    template< class U >
    static no sfinae( ... );

public:
    enum { value = sizeof( sfinae<T>(0) ) == sizeof(yes) };
}; 
```

为什么它可以与两个模板参数版本一起正常工作，但不能与普通版本（ set `#if 0`）一起工作？这是编译器错误吗？我正在使用 Visual Studio 2010。

我使用了以下测试：

```
BOOST_STATIC_ASSERT( is_default_constructible<int>::value );
BOOST_STATIC_ASSERT( is_default_constructible<bool>::value );
BOOST_STATIC_ASSERT( is_default_constructible<std::string>::value );
BOOST_STATIC_ASSERT( !is_default_constructible<int[100]>::value );

BOOST_STATIC_ASSERT( is_default_constructible<const std::string>::value );

struct NotDefaultConstructible {
    const int x;
    NotDefaultConstructible( int a ) : x(a) {}
};

BOOST_STATIC_ASSERT( !is_default_constructible<NotDefaultConstructible>::value );

struct DefaultConstructible {
    const int x;

    DefaultConstructible() : x(0) {}
};

BOOST_STATIC_ASSERT( is_default_constructible<DefaultConstructible>::value ); 
```

我真的很茫然：

1.  另一个版本的两个测试失败：`int[100]`和`NotDefaultConstructible`. 所有测试都使用两个模板参数版本成功。
2.  Visual Studio 2010 不支持`std::is_default_constructible`. 但是，我的问题是关于为什么这两种实现有任何差异以及为什么一种有效而另一种无效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T20:30:35.320

（DS 之前的回答对我的回答有很大影响。）

首先，请注意您拥有`class is_okay { typedef void type; }`，即`type`是 的私人成员`is_okay`。这意味着它实际上在课堂之外是不可见的，因此

```
template< class U >
static yes sfinae( typename is_equal< sizeof U(), sizeof U() >::type * ); 
```

永远不会成功。但是，SFINAE 在 C++98 中最初并不适用于这种情况；直到 DR 1170 的决议“访问检查 [开始] 作为替换过程的一部分完成”。[[1]](https://blogs.oracle.com/pcarlini/entry/c_11_tidbits_access_control)

> （令人惊讶的是，Paolo Carlini 仅在 10 天前写了那篇博客文章，所以你提出这个问题的时机是无可挑剔的。在这种情况下，根据 Carlini 的说法，4.8 之前的 GCC 在 SFINAE 期间根本没有进行访问检查。所以这就解释了为什么您没有看到 GCC 抱怨 . 的私有性`type`。您必须使用不到两周前的树顶 GCC，才能看到正确的行为。）

Clang（树顶）在`-std=c++11`模式下遵循 DR，但在其默认 C++03 模式下给出预期错误（即 Clang 在 C++03 模式下不遵循 DR）。这有点奇怪，但也许他们这样做是为了向后兼容。

但*无论如何*，你实际上并不想`type`一开始就保持私密。你要写的是`struct is_equal`and `struct is_okay`。

通过此更改，Clang 将通过您的所有测试用例。GCC 4.6.1 也通过了所有的测试用例，*除了*. `int[100]`GCC 认为这*没*`int[100]`问题，而您却断言这不好。

 *但是您的代码的另一个问题是它没有测试您认为它正在测试的内容。C++ 标准第 8.5#10 条非常清楚地说：[[2]](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)

> 初始化器是一组空括号的对象，即 ，`()`应进行值初始化。

因此，当您编写 时`sizeof U()`，您不是在测试是否`U`可以*默认*初始化；您正在测试它是否可以进行*值*初始化！

...还是你？至少在我的一些测试用例中，GCC 的错误消息表明它`U()`被解释为一种类型的名称——“函数返回`U`”——*这*就是`int[100]`行为不同的原因。我看不出这种行为是如何有效的，但我真的不明白这里的语法细节。

如果你真的想测试*默认*初始化，你应该使用`sizeof *new U`你目前拥有的任何地方`sizeof U()`。

顺便说一句，`int[100]` ***是***默认初始化的，句号。该标准清楚地说明了默认初始化数组类型的含义。

最后，我想知道代码中古怪行为的一个原因是否是您试图将一个未修饰`0`的（类型为`int`）传递给一个函数，该函数的重载集包括一个函数获取`void *`和一个获取`...`。在这种情况下，如果编译器选择了错误的编译器，我完全可以理解。最好建议您尝试传递`0`给函数 take `int`。

综上所述，这是您的代码版本，在 ToT Clang 和 GCC 4.6.1 中都非常适合我（即没有断言失败）。

```
template< class T >
class is_default_constructible {
    typedef int yes;
    typedef char no;

    template<int x> struct is_okay { typedef int type; };

    template< class U >
    static yes sfinae( typename is_okay< sizeof (*new U) >::type );

    template< class U >
    static no sfinae( ... );

public:
    enum { value = sizeof( sfinae<T>(0) ) == sizeof(yes) };
};

#if __has_feature(cxx_static_assert)
#define BOOST_STATIC_ASSERT(x) static_assert(x, "or fail")
#else
#define dummy2(line) dummy ## line
#define dummy(line) dummy2(line)
#define BOOST_STATIC_ASSERT(x) int dummy(__COUNTER__)[(x) - 1]
#endif

#include <string>

BOOST_STATIC_ASSERT( !is_default_constructible<int()>::value );
BOOST_STATIC_ASSERT( is_default_constructible<bool>::value );
BOOST_STATIC_ASSERT( is_default_constructible<std::string>::value );
BOOST_STATIC_ASSERT( is_default_constructible<int[100]>::value );

BOOST_STATIC_ASSERT( is_default_constructible<const std::string>::value );

struct NotDefaultConstructible {
    const int x;
    NotDefaultConstructible( int a ) : x(a) {}
};

BOOST_STATIC_ASSERT( !is_default_constructible<NotDefaultConstructible>::value );

struct DefaultConstructible {
    const int x;

    DefaultConstructible() : x(0) {}
};

BOOST_STATIC_ASSERT( is_default_constructible<DefaultConstructible>::value ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T07:40:02.383

这似乎几乎可以肯定是编译器的工件（错误），因为 g++ 的行为（和失败）不同。我只能猜测为什么 VS 行为不同，但一个似乎合理的猜测是这个类：

```
template<int x> class is_okay { typedef void type; }; 
```

无论模板参数如何，都具有相同的定义，因此编译器在分析时可能会跳过一步`static sfinae( typename is_okay< sizeof U() >::type * );`并认为它定义良好，而没有仔细查看`is_okay`. 所以它认为一切都是默认可构造的。

`is_okay::type`我不知道为什么 VS 和 g++ 都不会被私有化所困扰。似乎他们俩都应该是。

另一方面，g++ 将两个版本视为等效。然而，在这两种情况下，它都会给出不同的错误`int[100]`。关于它是否应该是默认构造的，这是有争议的。你似乎认为不应该。g++47`std::is_default_constructible`认为是！要获得该行为（这可能更标准），您可以在行中`T`替换`typename boost::remove_all_extents<T>::type`为`enum`。*

# c++ - 用增强精神解析布尔表达式

ID：12364081

赞同：2

时间：2012-09-11T06:42:00.090

标签：c++, parsing, boost

# mysql - 如何在 MySQL 中实现 initcap 功能？

> ID：12364086
> 
> 赞同：8
> 
> 时间：2012-09-11T06:42:27.583
> 
> 标签：mysql

我需要`initcap`用于区域名称的功能。有没有办法在 MySQL 中实现这一点？

*   非洲
*   印度次大陆
*   美国西海岸
*   欧洲/英国

这样的结果可以吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T06:56:44.950

有时我在 MySQL 中寻找一个内置的 initcap/ucfirst 函数，但不幸的是找不到这样的字符串函数，所以决定自己编写.. 感谢 MySQL 社区成员纠正了我的函数中的错误并将其发布回来.

```
DELIMITER $$

DROP FUNCTION IF EXISTS `test`.`initcap`$$

CREATE FUNCTION `initcap`(x char(30)) RETURNS char(30) CHARSET utf8
READS SQL DATA
DETERMINISTIC
BEGIN
SET @str='';
SET @l_str='';
WHILE x REGEXP ' ' DO
SELECT SUBSTRING_INDEX(x, ' ', 1) INTO @l_str;
SELECT SUBSTRING(x, LOCATE(' ', x)+1) INTO x;
SELECT CONCAT(@str, ' ', CONCAT(UPPER(SUBSTRING(@l_str,1,1)),LOWER(SUBSTRING(@l_str,2)))) INTO @str;
END WHILE;
RETURN LTRIM(CONCAT(@str, ' ', CONCAT(UPPER(SUBSTRING(x,1,1)),LOWER(SUBSTRING(x,2)))));
END$$

DELIMITER ;

Usage: 

select initcap('This is test string'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-20T20:52:34.733

```
DELIMITER $$

CREATE
   FUNCTION `test`.`initcap`(input VARCHAR(255))
   RETURNS VARCHAR(255) 
BEGIN
DECLARE len INT;
DECLARE i INT;

SET len   = CHAR_LENGTH(input);
SET input = LOWER(input);
SET i = 0;

WHILE (i < len) DO
    IF (MID(input,i,1) = ' ' OR i = 0) THEN
        IF (i < len) THEN
            SET input = CONCAT(
                LEFT(input,i),
                UPPER(MID(input,i + 1,1)),
                RIGHT(input,len - i - 1)
            );
        END IF;
    END IF;
    SET i = i + 1;
END WHILE;

RETURN input;
END$$

DELIMITER ; 
```

用法： `initcap("hello world")` 输出： `Hello World`

用法： `initcap("HELLO WORLD")` 输出：`Hello World`

这会将字符串中每个单词的首字母转换为大写字母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:52:26.447

```
DELIMITER $$

DROP FUNCTION IF EXISTS `test`.`initcap`$$

CREATE FUNCTION `initcap`(x char(30)) RETURNS char(30) CHARSET utf8
BEGIN
SET @str='';
SET @l_str='';
WHILE x REGEXP ' ' DO
SELECT SUBSTRING_INDEX(x, ' ', 1) INTO @l_str;
SELECT SUBSTRING(x, LOCATE(' ', x)+1) INTO x;
SELECT CONCAT(@str, ' ', CONCAT(UPPER(SUBSTRING(@l_str,1,1)),LOWER(SUBSTRING(@l_str,2)))) INTO @str;
END WHILE;
RETURN LTRIM(CONCAT(@str, ' ', CONCAT(UPPER(SUBSTRING(x,1,1)),LOWER(SUBSTRING(x,2)))));
END$$

DELIMITER ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-31T20:06:52.973

```
CREATE FUNCTION `upperfirst`(x varchar(255)) RETURNS varchar(255) CHARSET latin1

RETURN concat( upper(substring(x,1,1)),lower(substring(x,2)) ); 
```

# regex - 如何在 Java 中使用正则表达式引用多个 url

> ID：12364087
> 
> 赞同：0
> 
> 时间：2012-09-11T06:42:34.913
> 
> 标签：regex, url, artifactory

我基本上是在尝试对工件进行 REST 调用以获取有关存储库的 json 响应。
我的 URL 类似于“http://127.0.0.1:8081/artifactory/api/storage/deploy/”，其中**deploy**是我的存储库。
现在我想获取有关名称**以 - deploy 开头的**所有存储库的信息。

如何修改 url 以获取有关名称以 deploy 开头的存储库的信息？

是否可以这样做，而无需获取所有存储库名称然后进行过滤？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:48:11.997

我想这不是 java 问题，而是你的休息服务支持这种行为的问题。即你的rest api必须提供一种方法来通过正则表达式获取所有存储库的列表。
我不认为这可以通过除暴力链接之外的任何方式通过 java 解决。

# ruby-on-rails-3.2 - Rails3：没有渲染或重定向的动作

> ID：12364091
> 
> 赞同：1
> 
> 时间：2012-09-11T06:42:53.837
> 
> 标签：ruby-on-rails-3.2

基本上我想要做的（它可能没有意义）是使用没有视图的动作，没有渲染等等。这个想法是我会有很多动作来执行不同的操作并返回 OK 或 KO，当 OK 时我将重定向到我的 OK 页面，当 KO 时我将重定向到 KO 页面。

当然，我可以在操作中处理这些重定向，但是由于我所有的操作都将共享重定向，我想在一些继承自 ActionController 的 ApplicationController 内的环绕过滤器中处理它，例如

```
around_filter :my_filter
def around_filter
    check same stuff for all the actions
    return = yield
    if return == ok
        redirect_to ok_page
    else
       redirect to ko_page
      end
end 
```

但是我当然会遇到双重渲染错误或缺少模板错误，因为我无法在没有任何视图的情况下保持操作。所以问题......有没有办法做到这一点？只在一个地方处理所有重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:56:13.513

好的，这很容易......我只需要在我的 ApplicationController 上创建一个新函数，比如

```
def after_finish
    if result
        redirect_to ok_page
    else
        redirect_to ko_page
    end
end 
```

并在没有渲染或重定向之前在每个动作上调用该函数，很容易！

# php - Inserting a manual page-break in a pdf document - PHP

> ID：12364093
> 
> 赞同：3
> 
> 时间：2012-09-11T06:43:01.060
> 
> 标签：php, pdf-generation, fpdf, page-break

I have 3 arrays ($PSA, $NP and $OP) which I use to generate a pdf. The function I use to generate the pdf is given below. The problem is, all the values in the arrays cannot be contained in one page so there is a need to add page breaks, but when i try to SetAutoPageBreak to TRUE the pdf fail to load. When it is set to False (like in the method) I get only the first page of values(rest is cut-off). Is there a way to manually set page breaks? I could use a condition like:
`if($pdf->getPageHeight()-$GetY() < 5) add a page break;`
but not sure where to put the code (I'd have to check for the condition before each line is output??) Thank You!

```
function generate_pvr($PSA, $NP, $OP, $FROM, $TO){
        $heading = 'Test [ From: '.$FROM.' To: '.$TO.' ]';
        $border = 0;

        $pdf = new TTPDF('P','mm','A4');
        $pdf->setMargins(0,0);
        $pdf->SetAutoPageBreak(FALSE);
        $pdf->AddPage();
        $adjust_x = 0;
        $adjust_y = 0;

        //Heading
        $pdf->SetFont('','B',12);
        $pdf->setXY( Misc::AdjustXY(30, $adjust_x), Misc::AdjustXY(20, $adjust_y) );
        $pdf->Cell(30,15,$heading, $border, 0);

        $block_adjust_y = 45;
        $block_adjust_x = 40;

        //PA entries
        foreach( $PSA as $key=>$value ) {             
            $block_adjust_y = $block_adjust_y + 5;
            $pdf->setXY( Misc::AdjustXY($block_adjust_x, $adjust_x), Misc::AdjustXY($block_adjust_y, $adjust_y) );
            $pdf->SetFont('','B',12);
            $pdf->Cell(45,5, $key, $border, 0, 'L');
            $pdf->setXY( Misc::AdjustXY($block_adjust_x + 20, $adjust_x), Misc::AdjustXY($block_adjust_y + 10, $adjust_y) );
            $pdf->SetFont('','I',10);
            $pdf->Cell(45,5, 'Emp#', $border, 0, 'L');
            $pdf->Cell(45,5, 'Employee Name', $border, 0, 'L');
            $pdf->Cell(45,5, 'Amount', $border, 0, 'R');
            $block_adjust_y = $block_adjust_y + 15;

            foreach ($value as $key2=>$value2){
                        $pdf->setXY( Misc::AdjustXY($block_adjust_x+20, $adjust_x), Misc::AdjustXY($block_adjust_y + 5, $adjust_y) );
                        $pdf->SetFont('','',10);
                        $pdf->Cell(45,5, $value2['emp_num'], $border, 0, 'L');
                        $pdf->Cell(45,5, $value2['user_name'], $border, 0, 'L');
                        $pdf->Cell(45,5, TTi18n::formatNumber( $value2['amount'] ), $border, 0, 'R');
                        $sumpsa = $sumpsa + $value2['amount'];
                        $block_adjust_y = $block_adjust_y + 5;

            }
            $pdf->setXY( Misc::AdjustXY($block_adjust_x+20, $adjust_x), Misc::AdjustXY($block_adjust_y + 5, $adjust_y) );
            $pdf->SetFont('','B',10);
            $pdf->Cell(90,5, 'Total', $border, 0, 'C');
            $pdf->Cell(45,5, TTi18n::formatNumber( $sumpsa ), $border, 0, 'R');
            $sumpsa = 0;
            $block_adjust_y = $block_adjust_y + 10;

    }

        //NP entries
        $pdf->setXY( Misc::AdjustXY($block_adjust_x, $adjust_x), Misc::AdjustXY($block_adjust_y + 5, $adjust_y) );
        $pdf->SetFont('','B',12);
        $pdf->Cell(45,5, 'NP', $border, 0, 'L');
        $pdf->setXY( Misc::AdjustXY($block_adjust_x + 20, $adjust_x), Misc::AdjustXY($block_adjust_y + 15, $adjust_y) );
        $pdf->SetFont('','I',10);
        $pdf->Cell(45,5, 'Emp#', $border, 0, 'L');
        $pdf->Cell(45,5, 'Employee Name', $border, 0, 'L');
        $pdf->Cell(45,5, 'Amount', $border, 0, 'R');
        $block_adjust_y = $block_adjust_y + 15;
        foreach ($NP as $keynp => $valuenp){
            $pdf->setXY( Misc::AdjustXY($block_adjust_x+20, $adjust_x), Misc::AdjustXY($block_adjust_y + 10, $adjust_y) );
            $pdf->SetFont('','',10);
            $pdf->Cell(45,5, $valuenp['employee_number'], $border, 0, 'L');
            $pdf->Cell(45,5, $valuenp['user_name'], $border, 0, 'L');
            $pdf->Cell(45,5, TTi18n::formatNumber( $valuenp['amount'] ), $border, 0, 'R');
            $sum_nopay = $sum_nopay + $valuenp['amount'];
            $block_adjust_y = $block_adjust_y + 5;
        }
        $pdf->setXY( Misc::AdjustXY($block_adjust_x+20, $adjust_x), Misc::AdjustXY($block_adjust_y + 10, $adjust_y) );
        $pdf->SetFont('','B',10);
        $pdf->Cell(90,5, 'Variation Total', $border, 0, 'C');
        $pdf->Cell(45,5, TTi18n::formatNumber( $sum_nopay ), $border, 0, 'R');
        $sum_nopay = 0;
        $block_adjust_y = $block_adjust_y + 10;

        //OP entries
        $pdf->setXY( Misc::AdjustXY($block_adjust_x, $adjust_x), Misc::AdjustXY($block_adjust_y + 5, $adjust_y) );
        $pdf->SetFont('','B',12);
        $pdf->Cell(45,5, 'Over Pay', $border, 0, 'L');
        $pdf->setXY( Misc::AdjustXY($block_adjust_x + 20, $adjust_x), Misc::AdjustXY($block_adjust_y + 15, $adjust_y) );
        $pdf->SetFont('','I',10);
        $pdf->Cell(45,5, 'Emp#', $border, 0, 'L');
        $pdf->Cell(45,5, 'Employee Name', $border, 0, 'L');
        $pdf->Cell(45,5, 'Amount', $border, 0, 'R');
        $block_adjust_y = $block_adjust_y + 15;
        foreach ($OP as $keyop => $valueop){
            $pdf->setXY( Misc::AdjustXY($block_adjust_x+20, $adjust_x), Misc::AdjustXY($block_adjust_y + 10, $adjust_y) );
            $pdf->SetFont('','',10);
            $pdf->Cell(45,5, $valueop['employee_number'], $border, 0, 'L');
            $pdf->Cell(45,5, $valueop['user_name'], $border, 0, 'L');
            $pdf->Cell(45,5, TTi18n::formatNumber( $valueop['amount'] ), $border, 0, 'R');
            $sum_overpay = $sum_overpay + $valueop['amount'];
            $block_adjust_y = $block_adjust_y + 5;
        }
        $pdf->setXY( Misc::AdjustXY($block_adjust_x+20, $adjust_x), Misc::AdjustXY($block_adjust_y + 10, $adjust_y) );
        $pdf->SetFont('','B',10);
        $pdf->Cell(90,5, 'Variation Total', $border, 0, 'C');
        $pdf->Cell(45,5, TTi18n::formatNumber( $sum_overpay ), $border, 0, 'R');
        $sum_overpay = 0;
        $block_adjust_y = $block_adjust_y + 10;            

        return $pdf->Output('','S');
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:51:45.630

使用以下代码添加页面。

```
$pdf->AddPage(); 
```

使用上述代码后，对 FPDF 类的后续调用将呈现在新页面中。

# c# - 具有多个线程的 OracleBulkCopy

> ID：12364096
> 
> 赞同：5
> 
> 时间：2012-09-11T06:43:17.177
> 
> 标签：c#, .net, multithreading

我有五个线程。他们同时在同一张表 (EXCEL_DATA)中执行**OracleBulkCopy （每条记录 100 万条记录）。**但是在某个时间点，我遇到了以下错误：

> **ORA-00604: 递归 SQL 级别 1 发生错误 ORA-00054: 资源繁忙并使用指定的 NOWAIT 获取**

我正在为 OracleBulkCopy 使用以下代码：

```
using (OracleConnection con = new OracleConnection(ConnectionString))
                {
                    con.Open();
                    using (var bulkcopy = new OracleBulkCopy(con, options))
                    {
                        OracleTransaction tran = 
                            con.BeginTransaction(IsolationLevel.ReadCommitted);
                        bulkcopy.DestinationTableName = DestinationTable;
                        foreach (var mapping in columnMappings)
                            bulkcopy.ColumnMappings.Add(mapping);
                        bulkcopy.BulkCopyTimeout = TimeOut.Value;
                        try
                        {
                            bulkcopy.WriteToServer(dataTable);
                            tran.Commit();
                        }
                        catch (Exception ex)
                        {
                            tran.Rollback();
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T06:52:26.697

听起来表或部分被锁定（在批量复制期间非常合理，特别是因为您有一个显式事务），这会阻止其他插入竞争批量复制。这听起来并不令人惊讶。我能说的最好的事情是......“不要那样做”。特别是，这是一个 IO-bound 操作，您的主要阻塞很可能是网络，次要限制是后端服务器 - 这也是遵守您指定的 ACID 规则所*必需的。*由于这些原因，并行执行这些操作不太可能带来任何显着的性能优势，但***很***可能由于阻塞而导致超时。

所以：而不是并行地做这些......串联地做它们。

# java - 返回一个默认的时间戳对象而不是 null

> ID：12364103
> 
> 赞同：5
> 
> 时间：2012-09-11T06:43:46.833
> 
> 标签：java, mysql, eclipse

我有一个时间戳对象-

```
java.sql.Timestamp time = null; 
```

我在数据库表中有一个`datetime`值`val_time`。

```
val_time datetime 
```

情况是，在执行操作时，它`val_time`没有得到更新（这在我的情况下很正常）。从数据库读取时，日期时间值自然为空。所以时间戳对象也将为空。**我的问题是 -**我们可以得到一些除 null 以外的默认值吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T06:45:48.310

由于您在使用 mysql 的标签中声明，我建议您在查询中使用 IFNULL 语句来获取默认值而不是 NULL 。

```
SELECT IFNULL(colname, your-default-value) FROM xyz; 
```

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

# android - 如何消除android中两个textview之间的差距

> ID：12364105
> 
> 赞同：1
> 
> 时间：2012-09-11T06:43:48.983
> 
> 标签：android, listview

如何消除两个列表视图之间的差距？

[http://imgur.com/ty72B](http://imgur.com/ty72B)

***我如何消除欢迎 Sajid Ali 和_* ____**线之间的差距？

下面是我的代码

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lblUnabletoProceed"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:text="aaaa" />

    <TextView
        android:id="@+id/lblWelcome"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:layout_marginLeft="180dip"

        android:text="Welcome Sajid Ali"
        android:textColor="#FFCC00" />

    <TextView
        android:paddingTop="0dip"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:layout_marginLeft="180dip"
        android:text="___________________ "

        android:textColor="#99CC00" />

    <TextView
        android:id="@+id/lblYouraccountbalance"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:layout_marginLeft="180dip"
        android:text=""
        android:textColor="#FFCC00" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:45:54.317

减少或删除除第一个以外的所有文本视图上的 android:layout_marginLeft="180dip"。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T06:48:53.460

1) 删除`android:layout_weight="..."`

2）在您的布局中使用此代码：

```
android:layout_marginLeft="-3dip"
android:layout_marginRight="-3dip"
android:layout_marginTop="-3dip"
android:layout_marginBottom="-3dip" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T06:52:42.853

`18dp`在参数中删除`android:layout_height="18dp"` 并更改为`wrap_content`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T06:51:45.823

在您的文本之间尝试 dis 查看它将在您的 xml 中工作

```
 <View android:layout_width="fill_parent" android:layout_height="1dip" android:background="#EFEFEF" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T07:15:53.943

简单易行的解决方案：将重力设置为欢迎文本的底部，并将重力设置为*_* _文本的顶部

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T06:54:04.803

只需添加`android:marginTop`到您的`"___________" TextView`并分配一个负值。例如`-10dp`。

但是好吧，添加一个`View`with`background`和 height`1dp`或者`2dp`看起来更优雅。考虑使用它，而不是`TextView`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T06:48:38.197

减少布局*高度以消除欢迎 Sajid Ali 和***线**

 **```
 android:layout_height="10dp" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T06:50:45.717

您首先将布局高度更改`wrap_content`为行使用视图而不是文本视图。

```
<View
   android:id="@+id/view1"
   android:layout_marginLeft="180dip"
   android:layout_width="wrap_content"
   android:layout_height="2dip"
   android:background="#FFCC00" /> 
```

![在此处输入图像描述](../Images/b1f364795808b63356a36a25a7e0ace5.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-11T07:08:03.747

```
use View for line
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lblUnabletoProceed"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:text="aaaa" />

    <TextView
        android:id="@+id/lblWelcome"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:layout_marginLeft="180dip"

        android:text="Welcome Sajid Ali"
        android:textColor="#FFCC00" />

    <View
        android:id="@+id/Hline1"
        android:layout_width="fill_parent"
        android:layout_height="2dp"
        android:background="#99CC00" 
         android:layout_marginLeft="180dip"/>

    <TextView
        android:id="@+id/lblYouraccountbalance"
        android:layout_width="wrap_content"
        android:layout_height="18dp"
        android:layout_marginLeft="180dip"
        android:text=""
        android:textColor="#FFCC00" />
    </LinearLayout> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-11T07:09:43.330

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" android:background="#EFEFEF"
android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:background="#EFEFEF"
    android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical"
    android:paddingLeft="5px" android:paddingRight="5px" >
        <TableLayout android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:background="#EFEFEF" android:paddingLeft="2px" android:paddingRight="2px">

        <TableRow>
        <TextView style="@style/newFormCss.hdrLabel" />
        <TextView android:layout_weight="1.0"/>
        </TableRow>

        <TableRow android:gravity="right" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TextView android:text="Welcome Sajid Ali :"  android:textStyle="bold" android:textColor="#e68c10" android:gravity="top"/>

        </TableRow>
        <TableRow android:gravity="right" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TextView android:text="---------------------------"  android:textStyle="bold" android:textColor="#e68c10" android:gravity="top"/>

        </TableRow>

                <TableRow android:gravity="right" android:layout_width="fill_parent" android:layout_height="wrap_content">
        <TextView android:text="Valance: 66+5+6"  android:textStyle="bold" android:textColor="#e68c10" android:gravity="top"/>

        </TableRow>
            </TableLayout>
    </LinearLayout>
</ScrollView> 
```**

# reporting-services - 在 SQL Server 2012 中启用电源视图

> ID：12364107
> 
> 赞同：1
> 
> 时间：2012-09-11T06:43:50.073
> 
> 标签：reporting-services, ssrs-2008, sql-server-2012-express

我已经在我的系统中安装了 SQL Server 2012，现在我想为报告服务启用电源视图。我不知道该怎么做。你能告诉我一步一步的安装过程吗...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T21:58:25.150

[安装 SSRS 2012 的分步指南](http://gallery.technet.microsoft.com/office/Instalating-and-Configuring-9a38de94)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:23:59.443

[http://blogs.msdn.com/b/karang/archive/2012/04/13/step-by-step-guide-of-installing-power-view-with-powerpivot-2012.aspx](http://blogs.msdn.com/b/karang/archive/2012/04/13/step-by-step-guide-of-installing-power-view-with-powerpivot-2012.aspx)

# image - 如何使用 PyGI 在 Python3 中自动调整图像大小？

> ID：12364112
> 
> 赞同：5
> 
> 时间：2012-09-11T06:43:54.177
> 
> 标签：image, python-3.x, resize, gtk, introspection

虽然我找到了这个问题的部分和间接答案（例如，参见[这个链接](https://stackoverflow.com/questions/4939734/automatic-image-scaling-on-resize-with-pygtk)），但我在这里发布这个是因为把拼图的零碎拼凑起来花了我一些时间，而且我认为其他人可能会找到我的使用的努力。

那么，如何在 GTK+ 中实现父窗口大小调整时按钮上的图像无缝调整大小呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T06:50:26.870

问题中发布的链接中为 PyGTK 提供的解决方案在带有 GTK3 的 Python-GI 中不起作用，尽管使用 ScrolledWindow 代替通常的 Box 的技巧非常有用。

这是我在按钮上获取图像以随容器调整大小的最小工作解决方案。

```
from gi.repository import Gtk, Gdk, GdkPixbuf

class ButtonWindow(Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title="Button Demo")
        self.set_border_width(10)
        self.connect("delete-event", Gtk.main_quit)
        self.connect("check_resize", self.on_check_resize)

        self.box = Gtk.ScrolledWindow()
        self.box.set_policy(Gtk.PolicyType.ALWAYS,
                       Gtk.PolicyType.ALWAYS)
        self.add(self.box)

        self.click = Gtk.Button()
        self.box.add_with_viewport(self.click)

        self.pixbuf = GdkPixbuf.Pixbuf().new_from_file('gtk-logo-rgb.jpg')
        self.image = Gtk.Image().new_from_pixbuf(self.pixbuf)
        self.click.add(self.image)

    def resizeImage(self, x, y):
        print('Resizing Image to ('+str(x)+','+str(y)+')....')
        pixbuf = self.pixbuf.scale_simple(x, y,
                                          GdkPixbuf.InterpType.BILINEAR)
        self.image.set_from_pixbuf(pixbuf)

    def on_check_resize(self, window):
        print("Checking resize....")

        boxAllocation = self.box.get_allocation()
        self.click.set_allocation(boxAllocation)
        self.resizeImage(boxAllocation.width-10,
                         boxAllocation.height-10)

win = ButtonWindow()
win.show_all()
Gtk.main() 
```

（宽度和高度上的 -10 是为了适应按钮中的内部边框和填充。我试着摆弄这个以获得更大的按钮图像，但结果看起来不太好。）

本例中使用的 jpeg 文件可以从[这里](http://ftp5.jp.netbsd.org/pub/X/gimp/users/timj/gtk-logo-rgb.jpg)下载。

我欢迎有关如何执行此操作的进一步建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T10:21:34.367

`self.image = Gtk.Image().new_from_pixbuf(self.pixbuf)` 应该是： `self.image = Gtk.Image().set_from_pixbuf(self.pixbuf)`

您正在创建两次新图像。

# entity-framework - 是否可以使用 Entity Framework 4.1 (EF4.1) 实现字段级乐观并发

> ID：12364114
> 
> 赞同：1
> 
> 时间：2012-09-11T06:43:58.830
> 
> 标签：entity-framework, concurrency, entity-framework-4.1, optimistic-locking

我所有的应用程序都使用字段级乐观并发。

这通过跟踪原始数据库值并在原始值、更新值和当前数据库值之间执行 3 路比较来确定 (a) 用户更新了什么和 (b) 其他用户更新了什么。

我的应用程序将字段分组在一行中，并允许多个用户更新同一行中的不同组而不会发生冲突。

这是因为不同部门处理相同记录的不同字段是很常见的。

EF4.1似乎只支持非常基础的基于整行的并发模型！这意味着当没有任何冲突时，用户将面临无休止的冲突......

是否可以覆盖内置行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:07:15.623

> 是否可以覆盖内置行为？

它只是您的应用程序逻辑，您可以在`SaveChanges`覆盖中实现它。您只需要三组值：

```
public override int SaveChanges() {
    foreach (var entry in ChangeTracker.Entries()
                                       .Where(e => e.State == EntityState.Modified) {
        // Original values:
        DbPropertyValues originalValues = entry.OriginalValues;
        // Current values:
        DbPropertyValues currentValues = entry.CurrentValues;
        // Database values:
        DbPropertyValues dbValues = entry.GetDatabaseValues();

        // Perform your logic here
    }

    return base.SaveChanges();
} 
```

# javascript - Javascript 数组动态

> ID：12364120
> 
> 赞同：0
> 
> 时间：2012-09-11T06:44:26.407
> 
> 标签：javascript

如何使用javascript在具有动态键和动态值的数组中创建动态数组？

例如，请查看以下我想要的内容：

```
Studentslist  
  Student Info 1
      "name" => "varun",
      "age" => "24"

  Student Info 2
      "name" => "Kumar",
      "age" => "25" 
```

添加有关此问题的更多信息

我有一个像这样的单选按钮

```
<input type="radio" value="student1" id="student1" name="student1group1"/>
<input type="radio" value="student2" id="student1" name="student1group1"/>

<input type="radio" value="student3" id="student2" name="student1group2"/>
<input type="radio" value="student4" id="student2" name="student1group2"/> 
```

当单击任何单选按钮时，我需要在数组中设置一个数组，例如在单击`student1group1`2 个单选按钮中的任何一个时，我需要获取如下所示的数组

```
Studentslist  
  Student Info 1
          "name" => clicked value of the radio button, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:48:48.940

试试这个

```
var Studentslist = [{name:"varun",age:"24"}, {name:"Kumar",age:"25"}]

alert(Studentslist.length)  //=>2

alert(Studentslist[0].name)  //=>varun

alert(Studentslist[1].age)  //=>25

Studentslist.push({name:"nickname",age:"30"})  //=>
//[{ name="varun", age="24"},{ name="Kumar", age="25"},{ name="nickname", age="30"}] 
```

使用 JQuery 进行动态处理（每次单击复选框后更改数据）

```
var Studentslist = new Array();

$(function(){
    $("input[type='radio']").click(function(){
      if ($(this).is(":checked")) {          
        Studentslist[$(this).attr('name')] = {value:$(this).attr('value'), id:$(this).attr('id')}
      }
    })
})

//console.log (Studentslist['student1group1']) //=>   { value="student1", id="student1"}
//console.log (Studentslist['student1group2']) //=>   { value="student3", id="student3"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:53:05.870

你可以试试这个

```
var Studentslist  = [];

var student = {name:"varun", age:24 }

Studentslist.push(student);

student = {name:"Kumar", age:25};

Studentslist.push(student);

student = {name:"Varun Kumar", age:26}

Studentslist.push(student); 
```

要获取学生详细信息，您可以尝试。

```
for(var x in Studentslist)
{
    alert(x.name);
} 
```

使用单选按钮，您可以尝试

```
<input type="radio" value="student1" id="student1" name="student1group1"/>
<input type="radio" value="student2" id="student1" name="student1group1"/>

<input type="radio" value="student3" id="student2" name="student1group2"/>
<input type="radio" value="student4" id="student2" name="student1group2"/> 
```

javascript：

```
var Studentslist  = [];

window.onload = function(){
    var allinputs = document.getElementsByTagName("input");
    for(var x in allinputs)
    {
       if(x.type == "radio")
       {
          x.onclick = function() {
             if(this.checked){
               var student = {name: x.value };
               Studentslist.push(student);
             }
          }
       }
    }
} 
```

您可以调用此方法进行警报。

```
function CheckStudentDetails
{
    for(var x =0;x<Studentslist.length; x++)
    {
        for(var y in Studentslist[x])
        {
             alert(Studentslist[x][y]);
        }
    }

} 
```

# wpf - WPF/Metro 风格：使 ListView 只显示完整的项目

> ID：12364127
> 
> 赞同：3
> 
> 时间：2012-09-11T06:44:53.463
> 
> 标签：wpf, listview, microsoft-metro, items

在我的 Metro 应用程序中，我有一个包含一定数量项目（比如 25 个）的数据源。我有一个显示这些项目的 ListView。我的问题是 ListView 的大小允许它显示 6.5 个项目，因此它显示的最后一个项目被切成两半。如果分辨率发生变化，它可能会显示 4 个项目，或 8.2 个项目，或其他任何内容。我想要的是 ListView 准确显示适合控件高度的项目数，而不是剪裁最后一个项目。

现在，我看到了两种可能的半解决方案，但都不是最优的：

1.  将 ListView 的高度设置为项目大小的倍数的固定高度。这不会随着分辨率的变化而缩放。

2.  限制数据源中的项目数。这也不能扩展。

所以我的问题是，我怎样才能让 ListView 只显示完整的项目（所有边缘都在视口/列表视图内的项目），并隐藏其余的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:24:08.273

ListView 继承自 ItemsControl，因此一种更优化的解决方案包括在 ItemsPanel 中注入自定义面板（通过自定义剪辑显示覆盖度量）

像这样的东西（对不起，我没有尝试编译）：

```
protected override Size MeasureOverride(Size constraint)
{
 if (this.VisualChildrenCount <= 0)
  return base.MeasureOverride(constraint);
 var size = ne Size(constraint.Width,0);
 for(int i = 0; i < this.visualChildrenCount; i++)
 {
  child.Measure(size);
  if(size.height + child.desiredSize > constraint.height)
   break;
  size.Height += child.DesiredSize;
 }
 return size;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T07:24:18.123

我的最终解决方案是结合@NovitchiS 和@JesuX 的建议。

我创建了一个堆栈面板覆盖，并监听了 LayoutUpdated 事件。我的最终解决方案：

```
class HeightLimitedStackPanel : StackPanel
{
    public HeightLimitedStackPanel() : base()
    {
        this.LayoutUpdated += OnLayoutUpdated;
    }

    double GetSizeOfVisibleChildren(double parentHeight)
    {
        double currentSize = 0;
        bool hasBreaked = false;
        for (int i = 0; i < Children.Count; i++)
        {
            var child = Children[i];
            if (currentSize + child.DesiredSize.Height > parentHeight)
            {
                hasBreaked = true;
                break;
            }
            currentSize += child.DesiredSize.Height;
        }
        if (hasBreaked) return currentSize;

        return parentHeight;
    }

    double ParentHeight
    {
        get 
        {
            ItemsPresenter parent = VisualTreeHelper.GetParent(this) as ItemsPresenter;
            if (parent == null)
                return 0;

            return parent.ActualHeight;
        }
    }

    double previousHeight = 0;
    int previousChildCount = 0;
    protected void OnLayoutUpdated(object sender, object e)
    {
        double height = ParentHeight;
        if (height == previousHeight && previousChildCount == Children.Count) return;
        previousHeight = height;
        previousChildCount = Children.Count;

        this.Height = GetSizeOfVisibleChildren(height);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T13:30:52.837

@JesuX 的答案是更好的方法——如果做得正确的话。以下`ListView`子类对我来说很好：

```
public sealed class IntegralItemsListView : ListView
{
    protected override Size MeasureOverride(Size availableSize)
    {
        Size size = base.MeasureOverride(availableSize);
        double height = 0;
        if (Items != null)
        {
            for (int i = 0; i < Items.Count; ++i)
            {
                UIElement itemContainer = (UIElement)ContainerFromIndex(i);
                if (itemContainer == null)
                {
                    break;
                }

                itemContainer.Measure(availableSize);
                double childHeight = itemContainer.DesiredSize.Height;
                if (height + childHeight > size.Height)
                {
                    break;
                }

                height += childHeight;
            }
        }

        size.Height = height;
        return size;
    }
} 
```

一个警告——如果你把 an`IntegralItemsListView`放入 a`Grid`中，它将有

```
VerticalAlignment="Stretch" 
```

默认情况下，这违背了此类的目的。

另外：如果项目的高度一致，则该方法显然可以简化：

```
protected override Size MeasureOverride(Size availableSize)
{
    Size size = base.MeasureOverride(availableSize);
    size.Height = (int)(size.Height / ItemHeight) * ItemHeight;
    return size;
} 
```

# java - 有没有办法让 RFT 脚本在 java eclipse 中运行？

> ID：12364129
> 
> 赞同：-1
> 
> 时间：2012-09-11T06:45:07.630
> 
> 标签：java, rft

我正在尝试将我的 RFT java 文件移动到 eclipse 并将所有需要的 jar 文件导入 eclipse.. 这会像我在 RFT 环境中运行它以进行测试时那样运行我的 RFT 脚本吗？

请帮忙。哈里卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T21:47:29.510

不，不会的。RFT 是带有一些专有位的 Eclipse 发行版。您不能在 RFT 环境之外运行您的 RFT 测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:17:42.627

您可以通过另一种方式将您的项目从 Eclipse 集成到 RFT 中。

# c - 带有指针的意外结果

> ID：12364131
> 
> 赞同：0
> 
> 时间：2012-09-11T06:45:17.903
> 
> 标签：c, pointers, pass-by-reference

首先，如果你们以前都看过这个，请道歉。我尽我最大的努力尝试在这里和其他地方找到答案。

我是 C 的新手，但我仍然在思考指针并有效地使用它们。

代码（为简洁而编辑）：

```
void getInFile(char fileName[], FILE *inFile) {
    inFile = fopen(fileName, "r");
    if(inFile == NULL) {
        printf("Error1");
    }
}

void function(FILE *inFile) {
    if(inFile == NULL) {
        printf("Error2");
    }
}

int main(int argc, char *argv[]) {
    FILE *inFile = 0;
    getInFile(argv[2], inFile);
    function(inFile);
} 
```

如所写，运行程序会给出错误2。如果我将 getInFile 从 void 更改为 FILE* 返回类型，并且在 main 方法中有：

```
inFile = getInFile(argv[2], inFile); 
```

这是我错误地使用指针的例子还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T06:47:14.010

您需要传递 FILE 指针的地址，以便函数“getInFile”可以修改它。像这样：

```
void getInFile(char fileName[], FILE **inFile) {
    *inFile = fopen(fileName, "r");
    if(*inFile == NULL) {
        printf("Error1");
    }
} 
```

然后在 main 中调用它：

```
getInFile(argv[2], &inFile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:48:58.563

```
void getInFile(char fileName[], FILE *inFile) {
    inFile = fopen(fileName, "r");
    if(inFile == NULL) {
        printf("Error1");
    }
} 
```

您将`inFile`参数作为参数传递 - 它是按值传递的，无论您是否在函数内部对其进行修改，都对其*副本*进行操作，因此更改不会暴露给函数外部的世界。尝试传递它的地址（即双指针）：

```
void getInFile(char fileName[], FILE **inFile) {
    *inFile = fopen(fileName, "r");
    if (*inFile == NULL) {
        printf("Error1");
    }
}

FILE *ptr;
getInFile("Filename", &ptr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T06:50:25.910

如果要更改 C 函数中的某些内容，则需要将指针传递给它并更改其指向的内容。例如：

```
void xyzzy (int x, int *py) {
    x = 42;
    *py = 42;
}
:
x = y = 0;
xyzzy (x, &y); 
```

将导致`x`仍然持有 0 和`y`持有 42。那是因为传递了 的*副本*，`x`而不是真正的`x`. 您对该副本所做的任何更改都不会反映给调用者。

*还*传递了指向 y 的指针的副本（C 始终是按值传递而不是按引用传递）但是，由于该副本和原始`&y`指向*相同* `y`，所以它起作用了。

* * *

现在，您也必须将其应用于指针。如果要更改指针，则需要将*指针*传递给该指针并取消引用它，例如：

```
void getInFile (char fileName[], FILE **pInFile) {
    *pInFile = fopen (fileName, "r");
    if (*pInFile == NULL) {
        printf("Error1");
    }
}
:
FILE *inFile = NULL;
getInFile (argv[2], &inFile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T06:49:34.750

getFile 中的分配对调用者没有可见的影响。您需要制作 getFile(FILE **infile) 并将分配更改为 *infile = fopen

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T06:52:20.827

getInFile(argv[2], **inFile** ); 在这里，inFile 是函数的输入参数。该功能不会改变它。如果 inFile 实际指向了某个东西，函数当然会改变指向的变量，但是指针本身是不能改变的。

所有参数都是如此，它们本身永远无法更改，如果您希望某些内容可以更改，则必须给它一个指针。

# ruby - 获取rails 3.2中每个用户ID的最新记录

> ID：12364133
> 
> 赞同：0
> 
> 时间：2012-09-11T06:45:29.963
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有用户名称，位置，created_at 作为表中的重要字段。我想为每个用户检索最新位置，即，我想要这样的东西：

```
username    location       created_at
abc         New York       2012-08-18 16:18:57
xyz         Mexico city    2012-08-18 16:18:57
abc         Atlanta        2012-08-11 16:18:57 
```

唯一的输入是用户标识的 UId(1,2) 数组。请帮助我完成此操作。我只想知道如何使用活动记录查询接口编写查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:16:28.690

通常，这应该是解决此类问题的标准方法：

```
SELECT l1.user, l1.location
FROM locations l1
LEFT JOIN locations l2 ON l1.user = l2.user AND l2.created_at > l1.created_at
WHERE l2.id IS NULL 
```

这个想法是将表与自身连接起来，并找到那些没有相同`user`和**更大** `created_at`行的行。

当然，你`(user, created_at)`的桌子上应该有索引。

现在您应该看到它在 AR 界面中是如何表示的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:32:08.070

什么时候

```
u_id 
```

是用户 ID 的数组，那么

```
u_id.map{|i| User.find(i).location} 
```

应该是用户位置的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:43:17.577

您可以使用

```
User.where(:uid => [1,2,3]).maximum('location') 
```

这将创建类似的东西

```
SELECT MAX(`users`.`location`) AS max_id FROM `users` WHERE `users`.`id` IN (1, 2,3) 
```

# php - 在 PHP 中使用工厂模式创建对象

> ID：12364135
> 
> 赞同：2
> 
> 时间：2012-09-11T06:45:42.700
> 
> 标签：php, design-patterns, factory

我是 PHP 编程新手，正在尝试做一个基本的工厂模式。我正在尝试使用方法和构造函数创建一个类实例。

```
$ abstract class Car {
   public $type;
   public function getType(){
   echo $this->type;
   }
  }

 //Class that holds all the details on how to make a Honda.
 class Honda extends Car{
      public  $type = "Honda";
   }

 class CarFactory {
    const HONDA = "Honda";
    public  function __construct($carType){
    switch($carType){
        case self::HONDA:
            return new Honda();
            break;
    }
    die("Car isn't recognized.");
    }

 }

 $Honda = new CarFactory(carFactory::HONDA);
 var_dump($Honda); 
```

结果是 CarFactory 类的对象。为什么它不创建本田类型的对象，因为返回类型是本田类型的对象？是因为我使用的是构造函数吗？

但是，如果我在 CarFactory 中使用如下方法，它会创建一个 Honda 类型的对象

```
 class CarFactory {
    const HONDA = "Honda";
      public static function createCar($carType){
        switch($carType){
            case self::HONDA:
             return new Honda();
            break;
    }
    die("Car isn't recognized.");
  }
    $carFactory = new CarFactory();
    //Create a Car
    $Honda = $carFactory->createCar(CarFactory::HONDA);
    var_dump($Honda); 

} 
```

提前致谢。SV

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:46:25.043

```
 abstract class Car {
   public static function createCar(){
        try
        { 
          // PHP 5.3+ support
          return new static;
        } 
        catch (Exception $e)
        {
           // in case child does not exists
        }
   }
} 

class Honda extends Car { 

}

$honda = Honda::createCar();
var_dump($honda); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T07:25:02.333

构造函数不能返回值。他们可以只创建他们所在的类的对象。您可以像这样使您的第二个代码更短：

```
// Actually you don't need to create a new factory if your creation method is static
$Honda = $carFactory::createCar(CarFactory::HONDA); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T06:50:36.360

在您的构造函数中，您尝试返回一辆新车的实例。构造函数不返回任何值，而是在创建对象期间调用。PHP 确保`new`关键字总是返回构造类的实例。

因为`CreateCar`是静态的，所以调用应该是这样的：

```
$carFactory = new CarFactory();

// Now create a Car
$Honda = $carFactory::createCar(CarFactory::HONDA);
var_dump($Honda); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T19:34:24.097

您需要做的是直接使用静态类方法而不启动对象（$carFactory）：

```
$honda = CarFactory::createCar(CarFactory::HONDA); 
```

# c++ - C++ IOCP 服务器容器信息

> ID：12364139
> 
> 赞同：1
> 
> 时间：2012-09-11T06:45:52.667
> 
> 标签：c++, iocp

关于如何在维护 KISS 的同时使用 IO 类型的架构实际包含大量连接，我一直在脑海中传递一些想法。通过网络上的示例，似乎大多数使用带有 CONTAINING_RECORD 的双/单链表。而且，作为 IO 服务器的新手（尽管每天都在改进），我也将链表容器用于 IO 架构。

我的问题是，为什么我不能只构建一个大数组并使用 CONTAINING_RECORD，而不是为我的连接使用单/双链表？我可以使用 STL 向量吗？那行得通吗？此外，还有哪些其他类型的容器最适合大型 IO 服务器。

我正在为我的游戏服务器重写服务器架构（经过多次修改），并且这次希望朝着正确的方向前进，因为 id 而不是在不久的将来再次重写它。

感谢您的时间，并回复。

编辑：目前我的服务器架构是（简而言之）：

```
Main thread listening and accepting -> Pass over the socket into a container.
Worker threads(2-3) grab IO events for the container of sockets.
Worker threads Read/Write Data on that container. 
```

主线程和工作线程都使用链表。我想摆脱这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:21:35.573

您的“连接列表”可能会从任何位置删除，而不仅仅是结尾。对于`std::vector`，删除中间的元素是 O(N) 操作，但对于链表，它可以是 O(1)。（对于单链表，这并不简单，可能需要不方便的 API）。

`std::map`可能是一个有趣的选择，因为它提供了`O(log N)`元素的查找和删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:07:18.710

与所有数据结构一样，它在很大程度上取决于您想用它做什么。

在之前的工作中，我大部分时间都花在了一个巨大的多线程 C++ 服务器上，在它的 Windows 版本中，它使用了 IO 完成端口（Solaris 后端使用 /dev/poll，这在几个基本方面并没有那么不同）。它使用文件描述符作为键值，将与连接相关的数据结构存储在类似`map`STL 之前的结构中。因此，每当我们在连接上得到一个事件时，我们都可以通过 IO 层传递给我们的描述符来查找它的相关数据结构。新连接很容易处理 - 只需在字典中添加一个条目 - 并且关闭的连接也可以非常简单地清理。

自然地，必须小心对这些结构的跨线程访问和操作顺序——因为 IO 本质上是有效的，所以操作的顺序是至关重要的。幸运的是，IOCP 在将套接字放回 CP 之前不会在另一个线程上为同一个套接字提供另一个事件，但是 Solaris 实现还必须保留一个将文件描述符链接到工作线程的结构，以确保我们只处理每个套接字一次一个事件，并且按照严格的顺序，我们还尝试将套接字的后续事件注入同一个线程，以避免不得不将套接字的结构潜在地切换到另一个处理器上，这对缓存命中率来说是一场灾难。

基本的总结是，我们发现一个设计合理的字典类对这类事情非常有用。

# linux - BusyBox：如何将 udev 的 imple 功能替换为 mdev？

> ID：12364141
> 
> 赞同：0
> 
> 时间：2012-09-11T06:45:54.133
> 
> 标签：linux, embedded-linux, udev, busybox

我在板上运行智能嵌入式 Linux，我想创建设备文件，为此我需要 udev。但是 Udev 需要很多其他的小程序或库。所以问题是：

**如何用 mdev 替换 udev 的 imple 功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:32:39.640

`mdev`是的一部分`busybox`。您可以重新编译busybox并将其安装到您的根文件系统，也可以`udev`从根文件系统中删除您的文件

您可以按照此[线程](http://blackfin.uclinux.org/gf/project/uclinux-dist/forum/?_forum_action=ForumMessageBrowse&thread_id=39605&action=ForumBrowse)来配置和编写您的自定义`mdev`规则。

谢谢

# asp.net-mvc-3 - Using IIS 7.5 Express to launch MVC 3 application, gives HTTP Error 404.20 - Not Found

> ID：12364145
> 
> 赞同：2
> 
> 时间：2012-09-11T06:46:11.567
> 
> 标签：asp.net-mvc-3, routing, iis-7.5, http-status-code-404, iis-express

I have an existing MVC3 application and I want to run that using IIS 7.5 express. When I try to do that I get the following error:

```
HTTP Error 404.20 - Not Found
No default document.
Most likely causes:
•A default document is not configured for the site.
•The URL contains a typographical error.
•Directory browsing is not enabled. 
```

If I create a new MVC application and run that, it works fine. I compared the route maps and did not see any difference For my application:

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Program", action = "List", id = UrlParameter.Optional } // Parameter defaults
            );
        } 
```

For the sample application:

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );
        } 
```

The controller and action mentioned are available.

I also looked at `applicationhost.config` file and saw default documents as:

```
<defaultDocument enabled="true">
            <files>
                <add value="Default.htm" />
                <add value="Default.asp" />
                <add value="index.htm" />
                <add value="index.html" />
                <add value="iisstart.htm" />
                <add value="default.aspx" />
            </files>
        </defaultDocument> 
```

Any suggestions on how to fix this error?

# gwt - Adding gwt project to existing java servlet 3 project

> ID：12364149
> 
> 赞同：2
> 
> 时间：2012-09-11T06:46:35.180
> 
> 标签：gwt, servlets, servlet-3.0

I have a standalone gwt project with RPC built with Maven. I also have java servlet 3.0 project. Both the servlet and gwt projects have war packaging but I want to have only one war file so I changed the packaging of the gwt project to `jar` and included it in my servlet project.

Now I have a problem understanding how to wire everything together.

Do I need to migrate gwt project's `web.xml` into the main project `web.xml` file ? How do I redirect to my gwt project entry `index.html` ?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:36:18.613

您可以使用`uberwar`包装和[cargo-maven2-plugin](http://cargo.codehaus.org/Merging+WAR+files)合并两个`*.war`

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <version>1.2.4</version>
            <extensions>true</extensions>
            <configuration>
                <descriptor>src/assemble/merge.xml</descriptor>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# jquery - Textarea 提交回车

> ID：12364151
> 
> 赞同：1
> 
> 时间：2012-09-11T06:46:53.003
> 
> 标签：jquery, forms, validation

我有一个表格。当你按下回车键时。表格将提交。但现在我有一个问题。当我点击文本区域中的输入按钮时。然后表单将提交。但是在文本区域中，输入必须是输入。

我怎样才能解决这个问题？这是我的代码：

```
form.keypress(function(e) {
    if (e.which == enter) {
        e.preventDefault();
        $(this).find('[type=submit]').click();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:49:11.567

像这样试试

```
form.submit(function(e) {
    e.preventDefault();              
    $(this).find('[type=submit]').click();
    $("form").submit();       
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:08:57.043

尝试

```
$("input:submit").live('click',function(){         
     $("form").submit();
}) 
```

# python - 南 - 如何强制某些迁移？

> ID：12364157
> 
> 赞同：25
> 
> 时间：2012-09-11T06:47:17.777
> 
> 标签：python, django, django-south

我有一个迁移 003，它创建了一个新表，但由于某种原因，South 在执行该迁移后没有创建一个新表：我正在执行以下命令：

```
[kelp@web187 goals]$ python2.7 manage.py migrate main 0003_auto__add_nudge
Running migrations for main:
 - Migrating backwards to just after 0003_auto__add_nudge.
 < main:0006_auto__add_field_nudge_status 
```

但我收到以下错误：

```
django.db.utils.DatabaseError: relation "main_nudge" does not exist 
```

它不存在，因为迁移 003 应该创建它。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-09-11T08:04:10.430

看起来你已经伪造了 migration 0006 向前，你也应该向后伪造它：

```
manage.py migrate --fake yourapp 0005 
```

这会将当前迁移设置为 0005。

显然，您想迁移回 0002：

```
manage.py migrate --fake yourapp 0002 
```

然后从 0003 重新开始：

```
manage.py migrate yourapp 
```

# jquery-mobile - jQuery Mobile：用 vclick 事件替换点击事件

> ID：12364159
> 
> 赞同：5
> 
> 时间：2012-09-11T06:47:30.607
> 
> 标签：jquery-mobile

有没有办法用jQuery mobile中的vclick事件替换所有点击事件？

到目前为止，我发现的唯一解决方案是注册一个 vclick 事件，如下所示

```
$('a').bind("vclick", function (ev) {
  // Do Some stuff
  ev.preventDefault();
}); 
```

问题是这个解决方案不会阻止 jQuery 移动点击事件触发，所以点击会被触发两次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T21:56:39.883

出于某种原因，我得到了以下工作：

```
$('a').bind('vclick click',function(e){
  e.preventDefault();
   //do some stuff//
 }) 
```

如果没有 e.preventDefault() 事件会触发两次。有了它，它只会触发一次（但确实会触发）

这与您所说的相似，但可能更全面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T11:22:38.763

```
$("#elementId").bind('vclick',function(event){
event.preventDefault();
 //your code..
}); 
```

这工作正常。

# c# - 模型属性格式

> ID：12364163
> 
> 赞同：3
> 
> 时间：2012-09-11T06:47:35.783
> 
> 标签：c#, asp.net-mvc

我有一个具有 DateTime 属性的模型：

```
[DisplayName("Updated")]
public DateTime lastUpdatedDate { get; set; } 
```

目前，我认为我错误地处理了视图中日期时间的格式。

```
<tr>
    <td>@Html.LabelFor(m=>m.lastUpdatedDate)</td>
    <td>@Html.Label(Model.lastUpdatedDate.ToLongDateString())</td>
</tr> 
```

我确信这是错误的。首先，我应该在模型中进行格式化，然后返回字符串（在用于显示日期的模型中 - 更新模型需要控件的 DateTime 类型）？但它变得复杂 - 时区。我是否应该在获取的模型中操纵日期时间的值（基于用户在注册时选择的时区）？.. 事物？（叫什么？吸气剂？？呵呵）。

在我学习 MVC 的同时，试图让我的代码易于使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:19:46.230

如果你想优雅地处理时区，我建议你阅读这个[答案](https://stackoverflow.com/a/7583604/122005)。为了简单地格式化模型中的 DateTime 属性，请使用 [DisplayFormat] 属性对其进行装饰：

```
[DisplayName("Updated")]
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
public DateTime lastUpdatedDate { get; set; } 
```

在您看来：

```
@Html.DisplayFor(x => x.lastUpdatedDate) 
```

# javascript - 如何使用 javascript 命名空间？

> ID：12364165
> 
> 赞同：0
> 
> 时间：2012-09-11T06:47:42.417
> 
> 标签：javascript, namespaces, titanium

我将 aes.js 和 aesctr.js 与我的 FirstWindow.js 放在同一个文件夹中，我为如何使用这些命名空间感到困惑。

如果我们实际上不使用（伪代码）#include 命名空间，那么它实际上是如何创建的？

我的工作：

```
aesctr = aesctr || {};
var aes = require('aes.js'); 
Titanium.include('aes.js')
Titanium.include('aesctr.js') 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:26:28.553

请参阅在 Titanium 中使用命名空间模式的[示例。](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Coding_Strategies-section-29004891_CodingStrategies-Namespacedpatternwithselfcallingfunctions)

另外，请注意 Appcelerator 建议使用[CommonJS](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Coding_Strategies-section-29004891_CodingStrategies-CommonJSmodules)来构建代码结构，而不是全局命名空间。[在此处](http://docs.appcelerator.com/titanium/2.1/index.html#!/guide/Mobile_Best_Practices-section-29004793_MobileBestPractices-ApplicationsshallbemodularandobjectorientedusingCommonJSmodules)查看有关 CommonJS 最佳实践的更多信息。

# java - Appengine blobstore 作为文件系统的限制和问题

> ID：12364167
> 
> 赞同：0
> 
> 时间：2012-09-11T06:47:47.503
> 
> 标签：java, google-app-engine, blobstore

在接下来的几天里，我必须开始编写一些报告生成功能。我需要 write 调用是原子的，并让我知道存储时是否出现故障。

appengine 上的一项实验性功能允许将 blobstore 用作文件系统。（[https://developers.google.com/appengine/docs/java/blobstore/overview](https://developers.google.com/appengine/docs/java/blobstore/overview)）。

我有以下问题：

1) 使用如图所示的文件服务api，是否有任何额外费用？唯一受到影响的配额是 Blobstore 中的数据量吗？

2) 数据是在哪一点实际写入的？我在这个例子中使用 out.close()?

3）在写通道上使用closeFinally()后，可以重新打开并追加数据吗？（不，答案在[Create CSV file 并保存到 Blobstore](https://stackoverflow.com/questions/9671252/create-csv-file-and-save-to-blobstore)）

4）如果写通道打开了，还能读取数据吗？是否需要最终确定？

5) 写操作是原子的吗？即，在写入写入通道时，是否有可能发生故障并最终丢失数据？

6) 当写入通道未最终确定时，这些数据存储在哪里？

7) 如果未最终确定，写入通道中的数据是否会过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:55:03.700

1.  每天的写入量（或写入的数据）是有限制的，它是无证的 AFAIK，但非常高。没有额外的变化。
2.  该文件在 closeFinally 上传输到 blobstore。
3.  blobstore 是不可变的。您不能附加 blob。
4.  您只能从已完成的 blob 中读取。
5.  是的，如果您不最终确定文件，它将完全丢失。
6.  在实例 AFAICT 的内存中。
7.  是的，见#5

# php - PHP数组未设置（）行为 - 最后一个数组键仍然存在？

> ID：12364172
> 
> 赞同：0
> 
> 时间：2012-09-11T06:47:58.373
> 
> 标签：php, arrays

我有一个由几个字符串（HTTP 地址）构成的数组，我在其上运行 PHP 过滤器和`unset()`删除无效 URL 的方法。但是，最后一个数组项永远不会被删除 - 我不知道为什么，或者我如何解决这个问题。我希望你们能提供帮助。

```
$url1 = "http://localhost/work/project/scrapes/1.html";
$url2 = "";
$url3 = "";

$urls = array($url1, $url2, $url3);

for($x = 0; $x < sizeof($urls); $x++){
    if(!filter_var($urls[$x], FILTER_VALIDATE_URL)){
        unset($urls[$x]);
    }
}

print_r() gives me this:

Array ( [0] => http://localhost/work/project/scrapes/1.html [2] => ) 
```

我不知道为什么`$urls[2]`仍然存在，为什么它没有被删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T06:53:29.890

因为您是`size()`动态计算的 - 只要您删除元素，它就会减少。所以解决方法是在循环之前获取大小：

```
$url1 = "http://localhost/work/project/scrapes/1.html";
$url2 = "";
$url3 = "";

$urls = array($url1, $url2, $url3);
$size = sizeof($urls); // <----

for($x = 0; $x < $size; $x++){
    if(!filter_var($urls[$x], FILTER_VALIDATE_URL)){
        unset($urls[$x]);
    }
}

var_dump($urls); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T06:55:27.837

那是因为您在每次迭代中计算数组的大小。

通过迭代：

1.  sizeof($urls) = 3, $x = 0, $x < sizeof($urls) TRUE unset($urls[0]);

2.  sizeof($urls) = 2, $x = 1, $x < sizeof($urls) TRUE unset($urls[1]);

3.  sizeof($urls) = 1, $x = 2, $x < sizeof($urls) FALSE ...不再执行代码

在开始循环之前保存数组的长度

```
$length = sizeof($urls);

for($x = 0; $x < $length; $x++){
} 
```

# java - 如何为 RadioGroupFieldEditor 设置默认值

> ID：12364173
> 
> 赞同：1
> 
> 时间：2012-09-11T06:47:59.417
> 
> 标签：java, swt

我的班级中有一个 RadioGroupFieldEditor 字段。我想设置默认值。可能吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:54:43.653

据我了解，您可以使用`doLoadDefault()`. 您可以设置首选项存储`setPreferenceStore()`- 请参阅[Javadoc](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fpreference%2FRadioGroupFieldEditor.html)

# c# - 解码 RTP 数据包 G.729

> ID：12364178
> 
> 赞同：0
> 
> 时间：2012-09-11T06:48:32.927
> 
> 标签：c#, rtp, decoding, packets

我有一个包含 RTP 数据包的字节数组。

我没有使用 SIP 客户端，我只有阵列。

是否可以选择解码 g.729 中的数据包，然后录制语音并将其保存到 WAV 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:50:18.073

你可以在这里找到一些帮助：

[http://www.koders.com/csharp/fid5FF057FB1D01EBB06AE9B0DFF096CA01A572D167.aspx](http://www.koders.com/csharp/fid5FF057FB1D01EBB06AE9B0DFF096CA01A572D167.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:51:27.750

您需要一个 g.729 解码器来解码 rtp 数据包中的有效负载。据我所知，大胆有能力完成这项工作。使用wireshark从rtp流中提取原始数据，然后解码音频数据......这应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:28:32.627

将 rtp 字节数组写入原始文件。然后，您可以使用带有 g729 decode 命令的 ffmpeg.exe 将该文件转换为 mp3。

```
ffmpeg.exe -f alaw -ar 8000  -i " + rawFile + ".raw " + rawFile + ".mp3 
```

以上是转换为 mp3 的命令。

祝一切顺利。

# jquery - jQuery 选择器不适用于兄弟姐妹？

> ID：12364196
> 
> 赞同：0
> 
> 时间：2012-09-11T06:49:39.150
> 
> 标签：jquery, css-selectors

我有一个带有锚标签的多级菜单。我的问题是让 jQuery 选择器正常工作。

工作代码：

```
$(this)
    .closest('li')
    .siblings('li.open')
    .children('a')
    .children('i')
    .toggleClass('class1')
    .toggleClass('class2'); 
```

它应该是什么：

```
$(this)
    .closest('li')
    .siblings('li.open > a > i')
    .toggleClass('class1')
    .toggleClass('class2'); 
```

但即使这样也行不通：

```
$(this)
    .closest('li')
    .siblings('li.open a i')
    .toggleClass('class1')
    .toggleClass('class2'); 
```

我想以文本形式执行的操作：onClick 事件以锚标记为目标。我希望他的父母 LI 的兄弟姐妹的锚点中的 i-Tags - 听起来很棒的上帝 - 切换两个不同的类。

HTML

```
<ul>
    <li>
        <a><i class="class1"></i>Label</a>
        <ul>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
        </ul>
    </li>
    <li class="open">
        <a><i class="class1"></i>Label</a>
        <ul>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
            <li>
                <a><i class="class1"></i>Label</a>
            </li>
        </ul>
    </li>
    <li>
        <a><i class="class1"></i>Label</a>
    </li>
    <li>
        <a><i class="class1"></i>Label</a>
    </li>
    <li>
        <a><i class="class1"></i>Label</a>
    </li>
    <li>
        <a><i class="class1"></i>Label</a>
    </li>
    <li>
        <a><i class="class1"></i>Label</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:56:38.767

我认为它不起作用的原因是因为

```
('li.open > a > i') 
```

不是兄弟姐妹

```
$(this).closest('li') 
```

li 的兄弟是另一个 li。

你可以试试

```
$(this).closest('li').sibling('li.open').find('a > i').toggleClass('blah'); 
```

为什么你不能使用你发布的第一段代码？

# javascript - 对象问题

> ID：12364209
> 
> 赞同：1
> 
> 时间：2012-09-11T06:50:38.477
> 
> 标签：javascript, arrays, object

基本上我遇到了一些我确定是超级简单但我不知道该怎么称呼它的问题，因此我在寻找答案时遇到了麻烦。:(

基本上，假设我已经声明了一个对象，即`var meow = {};`然后我决定通过执行类似这样的操作在其中创建一个对象，`meow.cutekitten = {};`这一切都是直截了当的，我最终得到了一个在其中调用的对象`cutekitten`。

我的问题是，如果我已经声明`cutekitten`为变量并且我想使用该变量的内容作为这个新对象的名称而不是变量名称，该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:55:00.890

```
var propertyName = "cutekitten";
var meow = {};
meow[ propertyName ] = {}; 
```

# spring - 在 Spring MVC 中，如何获取包含片段的完整请求 URL，例如 http://stackoverflow.com/myquestion#test=1234

> ID：12364210
> 
> 赞同：3
> 
> 时间：2012-09-11T06:50:37.527
> 
> 标签：spring, spring-mvc

我想知道如何获取我需要的完整请求 url #test=1234 但仅使用 HttpServletRequest request.getRequestURI() 或 request.getRequestURL().toString() 返回路径，例如[https://stackoverflow.com/myquestion](https://stackoverflow.com/myquestion) 帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T06:59:37.020

`#test=123`称为锚。并且 Anchors 不提交到服务器，它们只驻留在 Broswer

@看：

*   [如何在 HTTP GET 中获取锚点名称？](https://stackoverflow.com/questions/6745993/how-to-get-the-anchor-name-in-http-get)
*   [检索 ASP.Net 的 URL 中的锚链接](https://stackoverflow.com/questions/774136/retrieving-anchor-link-in-url-for-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:43:52.227

在请求资源时，客户端不会将锚点或 URL 片段发送到服务器。锚点或片段用于识别资源内的位置，而不是服务器上的不同资源。

片段 URL 不是 URL 的一部分。您可以使用 javascript 获取锚点并将它们保存在 cookie 中以保留它们。

```
var anchor = window.location.hash; 
```

# java - 切换到旧版本的 Maven

> ID：12364211
> 
> 赞同：1
> 
> 时间：2012-09-11T06:50:39.543
> 
> 标签：java, maven, maven-2, maven-3

我正在尝试使用 Maven 构建一个项目，但我不知道 Maven。
无论如何，我遇到了一个问题，我在一个链接中找到了使用旧版本的 Maven。所以我这样做了，因为该项目的说明无论如何都是 2.0.9 左右。
但现在我不确定如何进行。我在我`user.home`的目录下看到一个`.m2`带有存储库目录的文件夹。
我应该删除这个还是不删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:56:26.007

该`.m2`文件夹包含下载的工件和一些其他存储库信息，它们不依赖于使用的 Maven 版本。所以你不需要删除任何东西，只需使用你选择的 maven 二进制文件。

编辑：工件的内容 - `.jars`,`.poms`等`.boms`由工件本身定义，这些工件本身可以通过存储库/目录访问。您的`.pom`项目引用了所需的工件。maven 二进制文件将工件（并在此处执行许多其他的 OT 操作）下载到本地缓存 -`.m2`目录。关键是，无论您使用什么版本的 Maven 二进制文件，工件都保持不变。

您当然可以删除您的存储库。只要您有互联网连接，maven 就会再次下载工件。但是除了更长的初始构建时间和一些流量之外，删除没有任何好处。

有时，从 repo 中删除某些元数据是有意义的，比如`.lastUpdated`文件。仅当 maven 无法找到您确定在您的存储库中的依赖项时，才建议这样做。然后就可以运行了
`find ./ -name "*.lastUpdated" -exec rm {} \;`。

# animation - 黑莓中的 Horizo ntalFieldManager 动画

> ID：12364216
> 
> 赞同：1
> 
> 时间：2012-09-11T06:50:52.907
> 
> 标签：animation, blackberry, java-me

我可以为 Blackberry 中的 Horizo​​ntalFieldManager 设置动画吗？我在屏幕的底部栏中有一个按钮，并且有一组图像以水平布局显示在按钮上方。

当我点击按钮时，应该会有滑入滑出的效果，并且图像一个接一个地出现。

任何人都可以建议我任何教程或链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:47:05.813

我认为工作方法将是实现您自己的自定义位图字段并将其放在您想要按下的按钮上方。按下按钮时，拦截此事件并更新自定义位图字段的内容。

[这是一个示例，如何使用 RIM SDK 创建自定义字段](http://docs.blackberry.com/en/developers/deliverables/11958/Create_a_custom_field_508117_11.jsp)。

# android - 自定义控件/将 XML 膨胀到 Android 布局上？

> ID：12364219
> 
> 赞同：0
> 
> 时间：2012-09-11T06:51:03.907
> 
> 标签：android, android-layout, custom-controls, android-custom-view, custom-view

我有一个标准布局，我必须在运行时使用许多控件/视图（即 TextView / EditText）填充它，具体取决于从 REST 服务返回的产品数量。

当然，我希望在运行时添加到布局中的控件需要包含许多视图（textview、edittext）等。我正在考虑使用自定义控件来提供我需要的所有控件，但我不确定。

我的另一个想法是将现有 XML 膨胀到我的布局中，但我不确定这是否可能，或者是否可以控制 ID 名称，或者我是否会控制 ID 名称 - 插入超过 1 个会导致重复的 ID？

我将尝试详细解释我正在尝试做什么，我们可以将它包装在一个 for 循环中进行测试，它将从 1 到 5 计数，因此我的布局中将填充 5 个控件。

自定义控件将有一个描述产品的 TextView。编辑文本，用户可以使用虚拟键盘和 EditText 右侧的微调控件自由输入数字数量，这将允许增加 EdtiText 值。

所以一切都很简单吧？:-) 但是我能否将所有这些控件归类为 1 个特定视图，并且我需要在我的布局中添加其中的一些，因此如果有 5 个产品，则将有 5 个自定义控件，每个自定义控件都包含控件，即 TextView、EditText 和 Spinner .

我怎样才能做到这一点？

我看到的示例是从 VIEW 继承的，但我需要我的 VIEW (CUSTOM CONTROL) 作为许多其他控件的容器，然后才能将这个新的自定义控件动态添加到我的 Activity 布局中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:54:14.620

使用带有自定义适配器的 ListView 怎么样...
检查[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)
[http://www.framentos.com/en/android-tutorial/2012/07/16 /listview-in-android-using-custom-listadapter-and-viewcache/](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:54:11.170

您可能希望将 ListView 与自定义适配器一起使用，并使用来自服务的信息更新适配器。

# php - php 中的报表查看器

> ID：12364222
> 
> 赞同：2
> 
> 时间：2012-09-11T06:51:28.610
> 
> 标签：php, sql-server-2008, reporting-services

我已成功配置**SSRS 报告服务器**并连接我的 PHP 应用程序以从中呈现报告。我跟着[这个链接](http://blogs.msdn.com/b/brian_swan/archive/2010/05/04/getting-started-with-sql-server-reporting-services-ssrs-and-php.aspx)。现在我需要的是一个报表查看器插件，它可以处理分页、导出等（就像 .Net 中的报表查看器控件一样）。有什么可用于 PHP 的吗？

基本上，我希望使用 SSRS 显示的每个报告都会自动生成如下图所示的内容

![.NET 中的 ReportViewer 工具栏](../Images/62bb853542d9c5fcbafc7cbe782d680a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T00:17:53.217

我有一个工作项目，我们必须做一些类似于你所要求的事情。我无法发布我为工作所做的事情，但我愿意回答问题以帮助您入门或遇到困难。我还没有发现任何商业行为可以做到这一点。我假设您的报告是表格的，对于如何使用列表、图表或仪表来制作复杂的报告，我没有答案。

如果您正在处理单个表格结果，那么我最终解决此问题的方法是将报告呈现为 xml，并使用 xpath 解析来自报告服务的响应以构建自定义表对象。我构建了一个自定义 RenderAs 函数，该函数将调用 RenderAsXml 函数并构建定义表中的列和数据的对象。然后，我使用了一个 javascript 表库，它采用从 xml 结果构建的 xml 或 json 结构。我们使用的表库是 DataTables，一个 jquery 插件。它允许您向其传递一个 json 对象并将其转换为表格。 [数据表](https://datatables.net/)

# django - 制作 buildout 下载包 oauth2、python-openid 和 django-social-auth

> ID：12364223
> 
> 赞同：0
> 
> 时间：2012-09-11T06:51:31.280
> 
> 标签：django, buildout

我一直在与构建脚本没有下载某些包而所有其他包都正确下载的问题作斗争。

我的构建脚本在这里：

```
[buildout]
parts = python
        django
        djangoprod
        fabric
        celery

download-cache = downloads
prefer-final = true
install-from-cache = true
#      PIL

# newest=false says "don't check every time to see if there's a newer
# version.  This makes running bin/buildout much faster.
#
# If you want to pull in the latest version of everything, run
# bin/buildout -n
newest=false

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = django
       adodbapi
       ${django:eggs}
extra-paths =
       ${buildout:directory}

[django]
recipe = djangorecipe
version = 1.2.3
settings = development
eggs = south
       django-celery
       django-celery-email
       django-debug-toolbar
       simplejson
       sorl-thumbnail
       psycopg2
       oauth2
       python-openid
       django-social-auth
project = project

[djangoprod]
# We have 2 rules for django here because we want the WSGI script to use
# production settings and bin/django (commandline) to use development
# settings.
recipe = djangorecipe
version = ${django:version}
wsgi = true
wsgilog = /var/www/roonga/logs/wsgi.log
settings = production
eggs = ${django:eggs}
project = ${django:project}
extra-paths =
       ${django:extra-paths}

[south]
# http://south.aeracode.org/
recipe = zc.recipe.egg
version = newest

[fabric]
# http://docs.fabfile.org/0.9.2/
recipe = zc.recipe.egg
version = newest

[celery]
# http://celeryproject.org/
recipe = zc.recipe.egg

[celerymon]
# http://pypi.python.org/pypi/celerymon/0.2.0
recipe = zc.recipe.egg
version = newest

[django-celery]
# http://pypi.python.org/pypi/django-celery
recipe = zc.recipe.egg
version = newest

[django-celery-email]
# http://pypi.python.org/pypi/django-celery-email
recipe = zc.recipe.egg
version = newest

[django-debug-toolbar]
# http://github.com/robhudson/django-debug-toolbar
recipe = zc.recipe.egg
version = newest

[simplejson]
# http://pypi.python.org/pypi/simplejson/
recipe = zc.recipe.egg
version = newest

[sorl-thumbnail]
# http://thumbnail.sorl.net/docs/
recipe = zc.recipe.egg
version = newest

[psycopg2]
recipe = zc.recipe.egg
version = newest

[oauth2]
# http://pypi.python.org/pypi/oauth2/
recipe = zc.recipe.egg
version = newest

[python-openid]
# http://pypi.python.org/pypi/python-openid/
recipe = zc.recipe.egg
version = newest

[django-social-auth]
# http://pypi.python.org/pypi/django-social-auth/
recipe = zc.recipe.egg
version = newest 
```

下载失败的包是 oauth2、python-openid 和 django-social-auth。错误消息总是：

```
Couldn't find index page for <package_name> (maybe misspelled?)
Getting distribution for <package_name>.
While:
  Installing django.
  Getting distribution for <package_name>.
Error: Couldn't find a distribution for <package_name>. 
```

我已经分别尝试过每个包，但总是失败。我也尝试过直接放入链接并指定部分，但仍然没有得到任何结果。

提前感谢任何人可以提供的任何帮助。

导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:37:11.430

你有：

```
install-from-cache = true 
```

这意味着如果这些包不在您的缓存中，您的构建将失败。取消设置该选项，它应该可以按预期工作。

# c# - C#.Net 中图形的光学标记或字符识别

> ID：12364224
> 
> 赞同：0
> 
> 时间：2012-09-11T06:51:31.590
> 
> 标签：c#, ocr, optical-mark-recognition

在这种情况下不知道从什么开始我必须从以下 tiff 图像中提取红色块图像![在此处输入图像描述](../Images/b5e1ab774f8d489cddadc6295f5a781f.png)

提取后，我必须阅读图表并获得如下输出：- 如果 1 - 下班 2 - 卧铺泊位 3 - 驾驶 4 - 上班，则下图应为 22222243333131331332222。应该使用什么算法我使用 C# 作为编程语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:34:20.717

也许 MODI 会帮助你：

[http://www.codeproject.com/Articles/29172/Converting-Images-to-Text-using-Office-2007-OCR-Op](http://www.codeproject.com/Articles/29172/Converting-Images-to-Text-using-Office-2007-OCR-Op)

**更新：**

我认为，您尝试了正确的方式（AForge.net）。使用 AForge.Math.Geometry.SimpleShapeChecker 类，您将找到所有矩形。我会再试一次。

**更新**

使用 Aforge.net，您可以比较两个图像。在您的问题中，您需要将每个单元格与原始空单元格（标准单元格）进行比较。并按相似度排序，所以前 24 个单元格是您需要的（最不相似的单元格）。

像这样：

```
private void ProccessBitmap(Bitmap img, Bitmap original_cell)
    {
        int cellWidth = img.Width / 24;
        int cellHeight = img.Height / 4;
        IList<KeyValuePair<float, Rectangle>> table = new List<KeyValuePair<float, Rectangle>>();
        Bitmap cell;
        Rectangle rect;

        AForge.Imaging.ExhaustiveTemplateMatching tm = new AForge.Imaging.ExhaustiveTemplateMatching(0);

        for (int rowIndex = 0; rowIndex < 4; rowIndex++)
        {
            for (int colIndex = 0; colIndex < 24; colIndex++)
            {
                rect = new Rectangle(colIndex * cellWidth, rowIndex * cellHeight, cellWidth, cellHeight);

                cell = img.Clone(rect, img.PixelFormat);

                var matchings = tm.ProcessImage(original_cell, cell);
                table.Add(new KeyValuePair<float, Rectangle>(matchings[0].Similarity, rect));

                cell.Dispose();
            }
        }

        using (Graphics gr = Graphics.FromImage(img))
        {
            gr.DrawRectangles(new Pen(Color.Red, 3.0f), table.OrderBy(a => a.Key).Take(24).Select(a => a.Value).ToArray());
        }

        pictureBox1.Image = img;
    } 
```

# c# - SQL 数据库中的多个条目而不是一个条目。（可能是由于会话？）

> ID：12364230
> 
> 赞同：2
> 
> 时间：2012-09-11T06:51:55.763
> 
> 标签：c#, sql-server, asp.net-4.0

我在我的网络应用程序中使用了会话。

我在使用用户 ID 登录时设置会话。

有时，当一个用户使用我的 Web 应用程序发布他们的问题时，条目将出现在那个特定的用户 ID 上，而另一个条目也将出现在任何随机用户 ID 上。

因此，多个条目将存在于 sql 的同一个表中。（这种情况随机发生）（这种情况发生 - 当 2-3 个用户尝试访问同一事物时）

有时它需要任何其他/随机用户 ID（可能以前登录的用户 ID）并使用任何用户 ID 插入数据。

有时一个用户想查看他的活动日志，以便他能够看到另一个用户的活动或所有用户的活动或他自己的活动。这也是随机发生的。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:57:23.837

您是否使用静态类对象进行数据库事务？这是由于静态对象而发生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:38:42.187

如果您想在您的 asp.net 网络应用程序中使用会话，请不要使用以下方法创建会话。

```
Session["username"]=usernametxt.Text;//or assign it from dataset 
```

但是使用类和函数来创建会话，并为此使用 get 和 set 方法。

```
set { HttpContext.Current.Session["username"] = value; } 
```

确保

这只是一个例子。

# mysql - 替换数据库中的值

> ID：12364231
> 
> 赞同：1
> 
> 时间：2012-09-11T06:52:03.483
> 
> 标签：mysql, database

在导入我的数据库时，我意识到我犯了一个错误，并以 1k 而不是 1000 和 1m 而不是 1000000 的格式导入了一些数字。

我确实看到了这个：

```
UPDATE YourTable
    SET YourColumn = REPLACE(YourColumn, '%', ''); 
```

但是，这会产生一个问题，看看如何使用 1.25k 而不是 1250 我会得到 1.25000

解决此问题的可能方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:54:16.067

使用`CASE`语句：

```
update yourtable
set yourcolumn = 
case when length(yourcolumn) <> 
          length(replace(yourcolumn, 'k', '')) 
then
   replace(yourcolumn, 'k', '') * 1000 
else when length(yourcolumn) <> 
          length(replace(yourcolumn, 'm', '')) 
then
   replace(yourcolumn, 'm', '') * 1000000
else
   yourcolumn 
end 
```

**编辑**：我假设 yourcolumn 是一个字符列而不是数字。

# javascript - 如何通过悬停或鼠标悬停同时更改多个（至少两个）不同跨度或div的突出显示颜色？

> ID：12364232
> 
> 赞同：0
> 
> 时间：2012-09-11T06:52:02.990
> 
> 标签：javascript, css

我正在处理有时具有相互关联的不同部分的文本内容，我想让用户将鼠标悬停/鼠标悬停在任何相关部分上，并相应地以相同的突出显示同时突出所有相关部分颜色。

在将内容生成为 HTML 之前，假设我确实拥有所有关于哪些部分相关的信息（在服务器上），那么最快的方法是什么。即，我可以放入适当的 css 或 javascript 以在每页的基础上临时获得所需的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:21:40.993

如果我理解你的问题，这可以很容易地使用 jquery 来完成。

首先，我会设置带有属性的 html 元素。我正在使用`thisisfor`，你可以使用（[几乎](http://www.w3.org/TR/html4/index/attributes.html)）任何东西。因此，如果您可以在服务器端预先确定每个项目属于哪个“组”，则可以使用您选择的属性对它们进行分类，然后是任何“组”。

**html**

```
<div class="hoverme" thisisfor="group3">What group are we in?</div>
<div class="hoverme" thisisfor="group3">What group are we in?</div>
<div class="hoverme" thisisfor="group2">What group are we in?</div>
<div class="hoverme" thisisfor="group4">What group are we in?</div> 
```

然后，使用 jquery，您可以设置一个悬停事件来检查一个属性，`thisisfor`在我们的例子中是该属性：

**jQuery**

```
$("[thisisfor]").hover(function(){ /* anything with 'thisisfor' attribute */

    var group = $(this).attr('thisisfor');  /* store its value as variable 'group' */

    $("[thisisfor="+ group +"]").html(group);  /* all with this group that was hovered....change the text (or whatever your plan is) */

});​ 
```

**[看我的例子](http://jsfiddle.net/F66F7/2/)**

但是，是的，使用属性的可能性是无穷无尽的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T19:36:49.910

最快的方法是在你的 body 或顶部容器元素上切换一个类，并以这样的方式定义 CSS，使其后代被更正颜色/突出显示等。这将比从关联中的每个元素添加/删除类更快。

例如：如果所有相关元素都有类“rel-1”，那么你可以有一个 CSS 定义，如：

```
body.rel-1 .rel-1 {
    background-color: #ddd;
    /* .. other styles */
} 
```

并将鼠标悬停在任何带有 class 的元素上`rel-1`，在 body/container 元素中切换相同的类。

例如：

```
$('.rel-1').mouseover(function() {
    $(body).addClass('rel-1');
});

$('.rel-1').mouseout(function() {
    $(body).removeClass();
}); 
```

等等..

# javascript - ASP.NET MVC，在文本框旁边显示文本

> ID：12364233
> 
> 赞同：0
> 
> 时间：2012-09-11T06:52:12.743
> 
> 标签：javascript, jquery, ajax

如何使用 jQuery 在文本框旁边显示文本，例如如果没有在表单中输入名称，所以在单击提交按钮后，它将在名称文本框旁边显示文本，我不想为此使用验证，我正在使用简单的 jQuery 编码检查文本框值..？这是我的代码..

```
$('#btnAddContact').click(function () {
        if ($("#name").val().length <= 0) {
             $("#name").val("");
             $("#name").focus();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:58:26.660

我认为您正在尝试用于验证消息显示

1.  然后将文本框放在一个div中
2.  `float:left`在css中添加到文本框
3.  然后将内容写入 div，或者您可以在该 div 中创建标签或跨度并将 css`float:right`应用于该跨度或标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:59:02.027

只需在名称旁边放置一个隐藏的 div 并将其显示在您的函数上：

```
<div id="errorName" style="display:none">Name can't be empty</div> 
```

然后是函数：

```
$('#btnAddContact').click(function () {
    if ($("#name").val().length <= 0) {
         $("#errorName").fadeIn();
         $("#name").val("");
         $("#name").focus();
    }
    else
       $("errorName").fadeOut();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:00:03.727

`name`如果它不存在，将在它之后添加一个新的 div 。

```
$('#btnAddContact').click(function () {
  var msg = $('#name-message');
  if (msg.length == 0) {
      msg = $('<div id="name-message"></div>')
      $('#name').after(msg);
  }

  msg.html('Opps. Error!');   
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:00:25.210

你可以像这样轻松地做到这一点

```
$('#btnAddContact').click(function () {
        if ($("#name").val().length <= 0) {
             $("#name").val("");
             $("#name").after('<span>Please enter name</span>');
             $("#name").focus();
        }
}); 
```

# c# - 有没有办法实现无锁静态配置数据？

> ID：12364239
> 
> 赞同：0
> 
> 时间：2012-09-11T06:52:27.760
> 
> 标签：c#, lock-free, static-content

```
public class MyConfigurationData
{
   public double[] Data1 { get; set; }
   public double[] Data2 { get; set; }
}
public class MyClass
{
   private static object SyncObject = new object();
   private static MyConfigurationData = null;
   private static MyClass()
   {
      lock(SyncObject)
      {
         //Initialize Configuration Data
         //This operation is bit slow as it needs to query the DB to retreive configuration data
      }
   }
   public static MyMethodWhichNeedsConfigurationData()
   {
      lock(SyncObject)
      {
          //Multilple threads can call this method
          //I lock only to an extent where I attempt to read the configuration data
      }
   }
} 
```

在我的应用程序中，我只需要创建一次配置数据并多次使用它。换句话说，我写一次，读很多次。而且，我想确保在写操作完成之前不会发生读取。换句话说，我不想将 MyConfigurationData 读取为 NULL。

我所知道的是静态构造函数在 AppDomain 中只调用一次。但是，当我准备配置数据时，如果任何线程试图读取这些数据，我将如何确保同步有效？最后，我想提高我的读取操作的性能。

我可以以无锁的方式实现我的目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:00:35.270

来自[MSDN](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)：

> 静态构造函数用于初始化任何静态数据，或执行只需要执行一次的特定操作。在创建第一个实例或引用任何静态成员之前自动调用它。

所以你不需要`lock`在你的代码中使用，它实际上是线程安全的。在引用之前调用您的静态构造函数`MyMethodWhichNeedsConfigurationData`。

```
public class MyClass
{
   private static MyConfigurationData = null;
   private static MyClass()
   {
   }

   public static MyMethodWhichNeedsConfigurationData()
   {
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T07:04:28.403

只要您只*读取*数据，它就应该是线程安全的。很少有数据结构在*读取*时不是线程安全的（明显的反例可能包括延迟加载）。请注意，静态构造函数由运行时自动同步，因此您无需担心运行“初始化配置数据”步骤的多个线程。

所以：只要没有任何东西改变数据，你就已经安全了。您还可以通过将数据隐藏在不可变接口后面来使其更难出错，即

```
public class ConfigurationData {
    // or some similar immutable API...
    public double GetData1(int index) { return data1[index]; }
    public double GetData2(int index) { return data2[index]; }

    private readonly double[] data1, data2;

    public ConfigurationData(double[] data1, double[] data2) {
        this.data1 = data1;
        this.data2 = data2;
    }
} 
```

然后你不需要任何锁：

```
public class MyClass
{
   private static MyConfigurationData;
   private static MyClass()
   {
     //Initialize Configuration Data
       MyConfigurationData = ...
     //This operation is bit slow as it needs to query the DB to retreive configuration data
   }
   public static MyMethodWhichNeedsConfigurationData()
   {          //Multilple threads can call this method
      var config = MyConfigurationData;

   }
} 
```

请注意，删除锁可以提高*并行性*；它不会改变原始单线程性能。

那就是说：我应该建议*一般*不要使用静态数据；它使测试变得非常困难，并且如果您的需求发生变化，那么执行多租户之类的事情就会变得很棘手。*拥有*单个配置实例可能更谨慎，但将其作为某种形式的*context*传递到系统中。不过，这两种方法都可以成功使用——这只是需要注意的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:02:01.823

我认为您应该使用单例模式并将配置初始化逻辑放在“GetInstance”方法中，该方法将返回您的类的实例。

这样，您就不需要任何读取锁定机制。

# php - Symfony2，提高查询性能

> ID：12364245
> 
> 赞同：3
> 
> 时间：2012-09-11T06:52:37.430
> 
> 标签：php, performance, symfony, doctrine, dql

有人知道如何提高此查询的性能吗？

我正在使用**学说 DQL 模型**，这是代码
（没有分页捆绑需要 5-6 秒）

**控制器：**

```
 $data = $this->getDoctrine()
                ->getEntityManager('sparcs')
                ->getRepository('TruckingMainBundle:BCT_CNTR_EVENTS')
                ->findOperationReport(Convert::serializeToArray($request->getContent())); 
```

**存储方法：**

```
 public function findOperationReport($condition = array()) {

  $data = $condition['record'];
  $move_types = array();

  $result = $this->createQueryBuilder("sp")
                    ->addSelect("sp");

  // move types
  if(isset($data['vessel_discharge'])) {
      //$move_types[] = $this->container->getParameter('MOVE_TYPE.VESSEL_DIS');
       $move_types[] = 'VY';
  }
  if(isset($data['vessel_loading'])) {
      //$move_types[] = $this->container->getParameter('MOVE_TYPE.VESSEL_LOAD');
       $move_types[] = 'YV';
  }      
  if(isset($data['truck_out'])) {
      $move_types[] = 'TC';
  }    
  if(isset($data['truck_in'])) {
      $move_types[] = 'CT';
  }  
  if(isset($data['stuffing'])) {
      //$move_types[] = 'CT';
  }  
  if(isset($data['unstuffing'])) {
      //$move_types[] = 'CT';
  } 
  if(isset($data['rail_in'])) {
      $move_types[] = 'YR';
  }  
  if(isset($data['rail_out'])) {
      $move_types[] = 'RY';
  } 
  if(count($move_types) > 0) {
       $result->andWhere('sp.move_type IN (:move_type)')
               ->setParameter('move_type',$move_types);

  } else {
      $result->andWhere("1 = 2");
  }

 //container types
 if(isset($data['empty']) && isset($data['full'])) {
     //skipping
 }
 elseif (isset($data['empty'])) {
    $result->andWhere('sp.ctnr_status = :ctnr_status')
           ->setParameter('ctnr_status',self::CTNR_EMPTY);
}
elseif (isset($data['full'])) {
    $result->andWhere('sp.ctnr_status = :ctnr_status')
           ->setParameter('ctnr_status',self::CTNR_FULL);

    if(isset($data['weight_from'])) {
        $result->andWhere("cast(replace([weight],',','.') as float) :weight_from")
               ->setParameter('weight_from',$data['weight_from']);
        echo 'weight from';
    }
    if(isset($data['weight_to'])) {
        $result->andWhere('sp.weight <= :weight_to')
               ->setParameter('weight_to',(string)$data['weight_to']);
    }

}       

/*
//excpetion
$result->andWhere('sp.move_type NOT IN (:move_type_not)')
       ->setParameter('move_type_not',array('TY','YT'));     

  */     
 if(isset($data['today']) || isset($data['yesterday'])) {
     //yesterday
     if(isset($data['yesterday'])) {
        $yesterday = new \DateTime(date("Ymd"));
        $interval = new \DateInterval("P1D");
        $interval->invert = 1;
        $yesterday->add($interval);
     }

     //yesterday + today
    if(isset($data['today']) && isset($data['yesterday'])) {
        $result->andWhere('sp.move_time >= :yesterday')
                ->setParameter('yesterday',$yesterday->format("Ymd000000"));
    } 
    elseif(isset($data['yesterday'])) {
        $result->andWhere('sp.move_time >= :yesterday_from AND sp.move_time <= :yesterday_to')
                ->setParameter('yesterday_from',$yesterday->format("Ymd000000"))
                ->setParameter('yesterday_to',$yesterday->format("Ymd235959"));
     }
     elseif(isset($data['today'])) {
        $result->andWhere("sp.move_time = :today")
                ->setParameter('today',date("Ymd000000"));   
     } 
    } 
    else {
       //date conditions
       $date_from =  new \DateTime(strtotime($data['date_from']));
       $date_to =  new \DateTime(strtotime($data['date_to']));

       $result->andWhere("sp.move_time >= :date_from")
               ->setParameter('date_from',$date_from->format("Ymd000000"));
       $result->andWhere("sp.move_time <= :date_to")
               ->setParameter('date_to',$date_to->format("Ymd235959"));
    }
    //booking
    if(isset($data['booking']) && !empty($data['booking'])) {
       $result->andWhere("sp.booking = :booking")
               ->setParameter('booking',$data['booking']);   
    }

    //is reffer
    if(isset($data['reefer'])) {
       $result->andWhere("sp.reefer_flag = :reefer")
               ->setParameter('reefer','Y');   
    }

    //is damage
    if(isset($data['damage'])) {
       $result->andWhere("sp.hazards <> ''");  //$result->expr()->neq("sp.hazards","")  
    }

    //specific_type
    if(isset($data['specific_type'])) {
        /*
        $result->andWhere("sp.equip_type <> :specific_type")
                 ->setParameter('specific_type',$data['specific_type']);
         *
         */
    }

    //specific_type
    if(isset($data['container_type_20']) && isset($data['container_type_40'])) {
        //$result->andWhere("sp.equip_type <> :specific_type")
        //         ->setParameter('specific_type',$data['specific_type']);
    }
    elseif(isset($data['container_type_20'])) {
              $result->andWhere($result->expr()->substring('sp.equip_type',1,1)." = :equip_type")
                       ->setParameter('equip_type',2);
    }
    elseif(isset($data['container_type_40'])) {
              $result->andWhere($result->expr()->substring('sp.equip_type',1,1)." = :equip_type")
                       ->setParameter('equip_type',4);
    }
   return $result->setMaxResults(30)->getQuery(); 
```

}

如果我使用 KnpPaginationBundle ，则需要超过 27 秒）

```
 $paginator = $this->get('knp_paginator');

        $pagination = $paginator->paginate(
            $data,
            2/*page number*/,
            10/*limit per page*/
        ); 
```

我可以在没有 KnpPaginatorBundle 的情况下执行本机 sql 查询（并且需要 0.333 毫秒）

```
 //START
    $query = $this->getDoctrine()
                ->getEntityManager('sparcs')->getConnection()->executeQuery (
    'SELECT *
        FROM   (SELECT Row_number()
                         OVER (
                           ORDER BY (SELECT 0)) AS "doctrine_rownum",
                       b0_.id                   AS id0,
                       b0_.container            AS container1,
                       b0_.container_use_key    AS container_use_key2,
                       b0_.line                 AS line3,
                       b0_.billable_line        AS billable_line4,
                       b0_.move_time            AS move_time5,
                       b0_.move_type            AS move_type6,
                       b0_.pos_from             AS pos_from7,
                       b0_.pos_to               AS pos_to8,
                       b0_.rotation_nbr         AS rotation_nbr9,
                       b0_.from_che             AS from_che10,
                       b0_.to_che               AS to_che11,
                       b0_.from_che_kind        AS from_che_kind12,
                       b0_.to_che_kind          AS to_che_kind13,
                       b0_.from_che_op          AS from_che_op14,
                       b0_.to_che_op            AS to_che_op15,
                       b0_.pow                  AS pow16,
                       b0_.internal_truck       AS internal_truck17,
                       b0_.lifter               AS lifter18,
                       b0_.quay_crane           AS quay_crane19,
                       b0_.license_plate        AS license_plate20,
                       b0_.trucker_id           AS trucker_id21,
                       b0_.trucker_name         AS trucker_name22,
                       b0_.arrv_qual            AS arrv_qual23,
                       b0_.arrv_carrier         AS arrv_carrier24,
                       b0_.dept_qual            AS dept_qual25,
                       b0_.dept_carrier         AS dept_carrier26,
                       b0_.invoyage             AS invoyage27,
                       b0_.outvoyage            AS outvoyage28,
                       b0_.lloyds_code          AS lloyds_code29,
                       b0_.load_port            AS load_port30,
                       b0_.disch_port           AS disch_port31,
                       b0_.destination          AS destination32,
                       b0_.equip_type           AS equip_type33,
                       b0_.bundle               AS bundle34,
                       b0_.ctnr_category        AS ctnr_category35,
                       b0_.ctnr_status          AS ctnr_status36,
                       b0_.ctnr_stopped         AS ctnr_stopped37,
                       b0_.commodity            AS commodity38,
                       b0_.weight               AS weight39,
                       b0_.damage               AS damage40,
                       b0_.reefer_temp          AS reefer_temp41,
                       b0_.reefer_flag          AS reefer_flag42,
                       b0_.damage_details       AS damage_details43,
                       b0_.seal_1               AS seal_144,
                       b0_.railcar_id           AS railcar_id45,
                       b0_.dwell_time           AS dwell_time46,
                       b0_.special_stow         AS special_stow47,
                       b0_.service              AS service48,
                       b0_.booking              AS booking49,
                       b0_.release_note         AS release_note50,
                       b0_.cmr_number           AS cmr_number51,
                       b0_.forwarding_agent     AS forwarding_agent52,
                       b0_.cargo_agent          AS cargo_agent53,
                       b0_.invoice_number       AS invoice_number54,
                       b0_.invoice_status       AS invoice_status55,
                       b0_.last_flag            AS last_flag56,
                       b0_.sparcs_user          AS sparcs_user57,
                       b0_.program              AS program58,
                       b0_.id                   AS id59,
                       b0_.container            AS container60,
                       b0_.container_use_key    AS container_use_key61,
                       b0_.line                 AS line62,
                       b0_.billable_line        AS billable_line63,
                       b0_.move_time            AS move_time64,
                       b0_.move_type            AS move_type65,
                       b0_.pos_from             AS pos_from66,
                       b0_.pos_to               AS pos_to67,
                       b0_.rotation_nbr         AS rotation_nbr68,
                       b0_.from_che             AS from_che69,
                       b0_.to_che               AS to_che70,
                       b0_.from_che_kind        AS from_che_kind71,
                       b0_.to_che_kind          AS to_che_kind72,
                       b0_.from_che_op          AS from_che_op73,
                       b0_.to_che_op            AS to_che_op74,
                       b0_.pow                  AS pow75,
                       b0_.internal_truck       AS internal_truck76,
                       b0_.lifter               AS lifter77,
                       b0_.quay_crane           AS quay_crane78,
                       b0_.license_plate        AS license_plate79,
                       b0_.trucker_id           AS trucker_id80,
                       b0_.trucker_name         AS trucker_name81,
                       b0_.arrv_qual            AS arrv_qual82,
                       b0_.arrv_carrier         AS arrv_carrier83,
                       b0_.dept_qual            AS dept_qual84,
                       b0_.dept_carrier         AS dept_carrier85,
                       b0_.invoyage             AS invoyage86,
                       b0_.outvoyage            AS outvoyage87,
                       b0_.lloyds_code          AS lloyds_code88,
                       b0_.load_port            AS load_port89,
                       b0_.disch_port           AS disch_port90,
                       b0_.destination          AS destination91,
                       b0_.equip_type           AS equip_type92,
                       b0_.bundle               AS bundle93,
                       b0_.ctnr_category        AS ctnr_category94,
                       b0_.ctnr_status          AS ctnr_status95,
                       b0_.ctnr_stopped         AS ctnr_stopped96,
                       b0_.commodity            AS commodity97,
                       b0_.weight               AS weight98,
                       b0_.damage               AS damage99,
                       b0_.reefer_temp          AS reefer_temp100,
                       b0_.reefer_flag          AS reefer_flag101,
                       b0_.damage_details       AS damage_details102,
                       b0_.seal_1               AS seal_1103,
                       b0_.railcar_id           AS railcar_id104,
                       b0_.dwell_time           AS dwell_time105,
                       b0_.special_stow         AS special_stow106,
                       b0_.service              AS service107,
                       b0_.booking              AS booking108,
                       b0_.release_note         AS release_note109,
                       b0_.cmr_number           AS cmr_number110,
                       b0_.forwarding_agent     AS forwarding_agent111,
                       b0_.cargo_agent          AS cargo_agent112,
                       b0_.invoice_number       AS invoice_number113,
                       b0_.invoice_status       AS invoice_status114,
                       b0_.last_flag            AS last_flag115,
                       b0_.sparcs_user          AS sparcs_user116,
                       b0_.program              AS program117
                FROM   bct_cntr_events b0_
                WHERE  b0_.move_type IN ( \'YY\',\'YV\',\'VY\',\'TY\' )
                       AND b0_.move_time >= \'20120910000000\'
                       AND b0_.move_time <= \'20120912300000\') AS doctrine_tbl
        WHERE  "doctrine_rownum" BETWEEN 11 AND 20  '                    
                    )->fetchAll(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:06:47.843

1.  考虑将 memcache 添加为缓存驱动程序。
2.  考虑停止将结果水合到实体对象（时间和 CPU 消耗）

    $query->getResult(Query::HYDRATE_ARRAY);

3.  避免使用通配符字符串的条件。
4.  试试 PagerFanta。

# javascript - Phonegap：获取访问令牌时通过LinkedIn登录错误

> ID：12364246
> 
> 赞同：0
> 
> 时间：2012-09-11T06:52:40.147
> 
> 标签：javascript, cordova, oauth, linkedin

我正在尝试使用以下链接[Login through LinkedIn 来实现 Login through LinkedIn](https://gist.github.com/efc88a38da25ff4e9283) 。

下面是我的代码`

```
 var oauth_info = {};
            var consumer_key = "";
           var shared_secret = "";
            var oauth = OAuthSimple(consumer_key, shared_secret);

            function parse_response(response) {
                response.replace(new RegExp("([^?=&]+)(=([^&]*))?", "g"), function($0, $1, $2, $3) { oauth_info[$1] = $3; });
                console.log("oauth_token1="+oauth_info.oauth_token);
            }

            function linkedInLogin()
            {

                var url = oauth.sign({action: "GET", path: "https://api.linkedin.com/uas/oauth/requestToken", parameters: {oauth_callback: "http://www.example.com/"}}).signed_url;
                console.log("url==="+url);
                $.ajax(
                       {
                       url:url,
                       data: {},
                       success: function(data){
                       console.log("inside success");
                       console.log("response==="+data);
                       parse_response(data);
                      console.log("oauth_token2="+oauth_info.oauth_token);
                       var params = data;
                        params = params.split('&');
                       for (var i = 0; i < params.length; i++) {
                       var y = params[i].split('=');
                       if(y[0] === 'oauth_token') {
                       localStorage.oauth_token = y[1];
                       console.log("oauth_token=="+localStorage.oauth_token);
                       }
                       if(y[0]==='oauth_token_secret')
                       {
                       localStorage.oauth_token_secret=y[1];
                       console.log("oauth_token_secret=="+localStorage.oauth_token_secret);
                       }
                       }

                       step2();
                       },
                       error: function(error) {
                       console.log("error");
                       client_browser.close();
                       },
                       dataType: 'text',
                       type: 'GET'
                       });                    
            }
            function step2()
           {

                var authoriseurl='https://www.linkedin.com/uas/oauth/authenticate?oauth_token='+oauth_info.oauth_token+'';                    
                window.plugins.childBrowser.showWebPage(authoriseurl);
                window.plugins.childBrowser.onLocationChange = function(loc){
                    console.log("on loc changed");
                    linkedInChanged(loc);
                };

            }

            function linkedInChanged(loc)
            {
                console.log("inside loc changed");
               if (loc.indexOf("http://www.example.com/") > -1) { 
                  window.plugins.childBrowser.close(); 
                    console.log("oauth_token3="+oauth_info.oauth_token);
                   var index, verifier = '';            
                   var params = loc.substr(loc.indexOf('?') + 1);
                   params = params.split('&');
                   for (var i = 0; i < params.length; i++) {
                      var y = params[i].split('=');
                       if(y[0] === 'oauth_verifier') {
                           verifier = y[1];
                           console.log("verifier===="+verifier);
                       }

                   }
                   var acces_url= access_token_url(verifier);
                   oauth.reset();
                   console.log("oauth_token4="+oauth_info.oauth_token);
                   //console.log("oauth_info"+oauth_info[0][0]+"===="+oauth_info[0][1]);
                   //var url = oauth.sign({action: "GET", path: "https://api.linkedin.com/uas/oauth/accessToken", parameters: {oauth_verifier: verifier}, signatures: oauth_info}).signed_url; 
                   console.log("access _url="+acces_url);

                   $.ajax(
                          {
                          url:acces_url,
                          data: {},
                          success: function(data){
                          console.log("inside access token success");
                         console.log("response==="+data);
                          var params = data;
                          params = params.split('&');
                          for (var i = 0; i < params.length; i++) {
                          var y = params[i].split('=');
                          if(y[0] === 'oauth_token') {
                          localStorage.linkedIn_access_Token = y[1];
                          console.log("linkedIn_access_Token=="+localStorage.linkedIn_access_Token);
                          }
                          if(y[0]==='oauth_token_secret')
                          {
                          localStorage.linkedIn_access_secret=y[1];
                          console.log("linkedIn_access_secret=="+localStorage.linkedIn_access_secret);
                          }
                          }
                          },
                         error: function(error){
                          console.log("error=="+error.responseText);
                          },
                          dataType: 'text',
                          type: 'GET'
                          });   

               }
            }

            function get_url_vars_from_string(url) {
                var vars = [], hash;
                var hashes = url.slice(url.indexOf('?') + 1).split('&');
                for(var i = 0; i < hashes.length; i++)
                {
                    hash = hashes[i].split('=');
                    vars.push(hash[0]);
                    vars[hash[0]] = hash[1];
                }
                return vars;

            }

            function access_token_url(pin) {
                oauth.reset();  
                //alert(oauth_info.oauth_token);
                var url = oauth.sign({action: "GET", path: "https://api.linkedin.com/uas/oauth/accessToken", parameters: {oauth_verifier: pin}, signatures: oauth_info}).signed_url;
               // alert("url="+url);

               return url;
            } 
```

` 单击按钮时，将调用linkedInLogin 方法。我无法从此代码中获取访问令牌。访问令牌的 ajax 调用导致错误 oauth_problem=token_rejected

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:31:24.080

我遇到了同样的问题，并发现问题出在哪里。

所以，我来请求accessToken，并且必须生成签名。当我调用 OAuth.completeRequest() - 这是生成签名的地方 - 我传递了两个参数，第二个是一个包含四个东西的对象（前两个是应用程序设置，接下来两个来自我的第一个请求，对于请求令牌）：

1.  api 密钥。
2.  api 的秘密。
3.  请求令牌。
4.  请求令牌秘密。

第四个在我这边丢失了。这就是问题所在。

另外 - 我正在使用这个 OAuth 库 - [http://oauth.googlecode.com/svn/code/javascript/oauth.js](http://oauth.googlecode.com/svn/code/javascript/oauth.js)，所以你端的方法/函数可能有完全不同的名称。但你有这个想法。

希望这可以帮助 ;）

# sql-server - 在 Microsoft SQL Server 中删除和重新创建数据库

> ID：12364250
> 
> 赞同：60
> 
> 时间：2012-09-11T06:52:43.987
> 
> 标签：sql-server, sql-server-2008

我正在使用 Microsoft SQL Server 2008 R2 SP1 进行试验和学习。我有一个数据库，在那里我做了很多实验。现在我想删除并重新创建它。所以我从数据库中提取创建脚本，删除它，然后使用脚本重新创建它。令我惊讶的是，所有的桌子、钥匙等都还在。如何删除数据库，以便我可以从头开始重建数据库？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-09-11T06:58:23.713

```
USE master
IF EXISTS(select * from sys.databases where name='yourDBname')
DROP DATABASE yourDBname

CREATE DATABASE yourDBname 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-11-21T08:18:33.030

+1 给 AnandPhadke 的部分代码

此代码将关闭与数据库的所有活动连接，然后将其删除

```
WHILE EXISTS(select NULL from sys.databases where name='YourDBName')
BEGIN
    DECLARE @SQL varchar(max)
    SELECT @SQL = COALESCE(@SQL,'') + 'Kill ' + Convert(varchar, SPId) + ';'
    FROM MASTER..SysProcesses
    WHERE DBId = DB_ID(N'YourDBName') AND SPId <> @@SPId
    EXEC(@SQL)
    DROP DATABASE [YourDBName]
END
GO

CREATE DATABASE YourDBName
GO 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-02-10T20:20:09.807

要求多次键入 DBName 很容易出错，在某些时候执行时会出现不一致的条目和意想不到的后果。

我更喜欢 AnandPhadke 或 Pierre 提供的各种支持的答案。

```
DECLARE @DBName varchar(50) = 'YourDatabaseName'
USE master
IF EXISTS(select * from sys.databases where name= @DBName)
EXEC('DROP DATABASE ' + @DBName)

EXEC('CREATE DATABASE ' + @DBName) 
```

或者

```
DECLARE @DBName varchar(50) = 'YourDatabaseName'
WHILE EXISTS(select NULL from sys.databases where name = @DBName )
BEGIN
    DECLARE @SQL varchar(max)
    SELECT @SQL = COALESCE(@SQL,'') + 'Kill ' + Convert(varchar, SPId) + ';' FROM MASTER..SysProcesses WHERE DBId = DB_ID(@DBName) AND SPId <> @@SPId
    EXEC(@SQL)
    EXEC('DROP DATABASE ' + @DBName)
END
GO 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-11-17T02:27:53.550

SQL Server 2016（及更高版本）支持一行和原子（？）语法`DROP DATABASE IF EXISTS database_name`

参考：[https ://msdn.microsoft.com/en-us/library/ms178613.aspx](https://msdn.microsoft.com/en-us/library/ms178613.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T06:56:51.263

> 我从数据库中提取创建脚本

这将为数据库中的所有内容（表、键等）提取创建脚本。如果您只是想创建一个空数据库，只需运行`CREATE DATABASE <dbname>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-06T16:00:20.233

这对我最有效：

```
if exists (select name from sys.databases where name='YourDBName')
alter database YourDBName set single_user with rollback immediate
go
if exists (select name from sys.databases where name='YourDBName')
drop database YourDBName 
```

# java - Spring MVC 中 showForm 方法的替代方法

> ID：12364251
> 
> 赞同：0
> 
> 时间：2012-09-11T06:52:49.687
> 
> 标签：java, spring-mvc

我正在将我的应用程序从 spring mvc 2 转换为 spring mvc 3。我使用`showForm(HttpServletRequest request, HttpServletResponse response, BindException errors)` [的是 doc 中给出的](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/web/servlet/mvc/SimpleFormController.html#showForm%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20org.springframework.validation.BindException%29)。我在 Spring mvc 3 中找不到它的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:01:49.623

返回到您的模型属性的相同视图，它会很好用。

# javascript - 在哪里存储用于 Backbone.js 的 HTML 模板

> ID：12364254
> 
> 赞同：0
> 
> 时间：2012-09-11T06:53:06.753
> 
> 标签：javascript, templates, backbone.js, middleman

我目前正在使用 Backbone.js 和 Middleman 开发一个静态站点（没有后端或服务器的东西）。该网站没有任何动态内容，只有纯 html 代码。但它有一些页面之间的过渡和一些 Javascript 效果。

所以我想利用 Backbones Router 来记录历史，并希望将视图动态地附加到带有 Backbone 视图的 DOM 中。到现在为止还挺好。

现在我想知道在哪里存储站点的 HTML 部分，以便 Backbone 可以使用它。使用内联脚本标签，我觉得它太乱了，所以我想把它换成不同的 HTML 文件。现在我可以通过 requirejs 动态加载 HTML 文件，但我认为将所有 HTML 内容打包到一个 JS 文件中并在有人第一次访问该页面时加载它会更好。

这样的事情怎么可能做到？或者有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:01:00.137

如果您正在开发 HTML5 应用程序，那么您可以使用应用程序离线缓存来获取所有必要的 HTML 文件和其他资源。它涉及编写缓存清单文件。

以下网站很好地描述了离线功能并编写了清单文件：[http](http://diveintohtml5.info/offline.html) ://diveintohtml5.info/offline.html 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:09:41.820

就我个人而言，我将主干的所有部分分开在不同的文件夹中。因此，对于模板，我将它们中的每一个都放在模板文件夹中的单独文件中。这样，在开发时一切都是干净的。我使用“文本！”加载它们。require.js 中的功能。

当我想将项目投入开发时，我使用 require.js 的优化部分，它为我缩小和组合所有文件。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T11:02:29.597

经过大量研究，我这样做：

*   将模板作为 .jst.ejs 存储在模板文件夹中
*   将它们包含在 Sprockets 中
*   使用 JST 加载模板

在主干中，我使用视图类来扩展新视图并使用模板：

```
App.Views.Layout.Logo = Backbone.Views.extend({
  template: JST['templates/layout/logo'],
  el: "#logo",
}); 
```

# javascript - javascript 是否可以在 IE 中读取本地文件？

> ID：12364259
> 
> 赞同：3
> 
> 时间：2012-09-11T06:53:35.717
> 
> 标签：javascript, html, internet-explorer, internet-explorer-9

FileReader 允许在 Chrome 中读取本地文件。

```
function readMultipleFiles(evt) {
    var files = evt.target.files;

    if (files) {
        for (var i = 0, f; f = files[i]; i++) {
            var r = new FileReader();
            r.onload = (function (f) {
                return function (e) {
                    var contents = e.target.result;
                    document.getElementById("output").innerHTML = contents;
                };
            })(f);
            r.readAsText(f);
        }
    } else {
        alert("Failed to load files");
    }
}
document.getElementById('fileinput').addEventListener('change', readMultipleFiles, false);​ 
```

[在 jsfiddle.net 上运行示例](http://jsfiddle.net/bHfEk/61/)

但是这个例子在 Internet Explorer 9
中不起作用。IE9 是否支持 File API？
如果是 - 我应该怎么做才能在 IE9 中读取本地文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T06:58:53.727

您可以使用[ActiveX 的 FileSystemObject。](http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=vs.85%29.aspx)

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var a = fso.CreateTextFile("c:\\testfile.txt", true);
a.WriteLine("This is a test.");
a.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:56:11.500

如果您制作一个超文本应用程序 (.hta)，您将能够创建 ActiveX 对象`FileSystemObject`，它可以让您访问本地文件系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T06:56:51.547

一般没有。读取本地文件是一种严重的安全违规行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T06:56:01.137

> IE9 是否支持文件 API？

[不，它没有](http://caniuse.com/#feat=fileapi)。

> 如果是 - 我应该怎么做才能在 IE9 中读取本地文件？

你的意思是*如果没有*？如果是这样，那么您可以使用 ActiveX 或只是通知用户他的浏览器不支持您网站的此功能，并允许他将文件上传到服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-27T00:28:03.873

好像是`FileSystemObject`个隐藏的怪物。。

```
var fso, file, fileName = '/file.txt', fileContents = '';
if (fileName) {
    fso = new ActiveXObject('Scripting.FileSystemObject');
    // don't worry about 'camelCase' typing, works both
    if (fso.fileExists(fileName)) {
        file = fso.openTextFile(fileName, 1);
        fileContents = file.readAll();
        // or loop over lines
        // while (!file.atEndOfStream) {
        //     fileContents += file.readLine();
        // }
        file.close();
    }
} 
```

更多信息：[https ://msdn.microsoft.com/en-us/library/314cz14s(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/314cz14s(v=vs.85).aspx)

# android - 视图和子视图之间的区别 - Android

> ID：12364262
> 
> 赞同：5
> 
> 时间：2012-09-11T06:53:41.940
> 
> 标签：android, view, android-view

Android中的视图和子视图有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:56:07.847

没有所谓的“子视图”这样的东西，它只是用来指代另一个视图中的视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T06:57:28.163

View 是小部件的基类，用于创建交互式 UI 组件（按钮、文本字段等）。如果我们在另一个视图中插入一个视图，它就会变成一个子视图，就像一个包含按钮视图的线性布局，这里的按钮是一个子视图

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T13:52:38.367

就像维奈所说，没有这样的事情。但是您有包含其他视图的 ViewGroup。例如，LinearLayout、RelativeLayout 等都是从该类派生的。如果您愿意，可以在此处阅读更多相关信息：http: [//developer.android.com/reference/android/view/ViewGroup.html](http://developer.android.com/reference/android/view/ViewGroup.html)

# c# - 如何在 c#/xaml Metro 应用程序中对最后修改的文件进行排序？

> ID：12364264
> 
> 赞同：1
> 
> 时间：2012-09-11T06:53:43.323
> 
> 标签：c#, xaml, gridview, microsoft-metro, windows-runtime

我正在开发一个应用程序，它将显示已在 gridview 中修改的最后 9 个文件。Gridview 项目显示文件名和最后修改日期。最新修改的文​​件应该是第一个，然后是降序的其他文件。我知道有[DateModified](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.basicproperties.datemodified.aspx)属性，但这不是 StorageFile 类的属性。那么如何使用它来对文件进行排序呢？我正在使用 GetFilesAsync() 方法来获取所有文件（返回 IReadOnlyList），但它按字母顺序返回文件。我的文件在文档库中。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:57:02.593

您可以处理 Async get file Completed 事件并重新排序列表并将其绑定到网格。由于您拥有 DateModified 属性，这没什么大不了的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:55:33.227

假设您有一个实例`StorageFile`，然后您可以在循环中调用[GetBasicPropertiesAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.getbasicpropertiesasync.aspx "GetBasicPropertiesAsync")方法，并在`BasicProperties`检索到所有对象后，[对您的（可观察的）集合进行排序](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5909dbcc-9a9f-4260-bc36-de4aa9bbd383/)，如果您的集合绑定到列表视图，您会自动看到它正确显示，一旦集合被排序。

# java - 求 n+1,n+2.... 的数字之和，当 n 的数字之和给出时

> ID：12364268
> 
> 赞同：4
> 
> 时间：2012-09-11T06:53:58.477
> 
> 标签：java, algorithm, math, sum, digits

我们可以很容易地计算给定数字的数字总和，但是是否有任何数学公式或模式可以用来确定下一个数字的总和，而不必一次又一次地对所有数字求和？

例如

```
Sum of 1234 = 1+2+3+4 = 10
Sum of 1235 = 1+2+3+5 = 11
Sum of 1236 = 1+2+3+6 = 12 
```

我可以在这里看到某种模式，但无法提出任何有效的数学算法。

我使用下面的方法来计算数字的总和：

```
public int sum(long n) {  
    int sum = 0;   
    while (n != 0) {    
        sum += n % 10;
        n /= 10;  
    }  
    return sum;  
} 
```

这工作正常，但它是 CPU 密集型的。我想更快地做到这一点。如果我有一个数字序列，假设`10->19`我只需要数 10 的数字，然后为每个数字加一个，直到 19。

如果我已经有了以前数字的总和，是否有任何有效的方法来计算数字的总和？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T07:01:29.733

```
DigitSum(n+1) = DigitSum(n) + 1 - (9 * NumberOfEndingZeros(n+1)) 
```

* * *

如果你想找到的不是`t`连续数字的数字和，而是`t`连续数字的数字和（n + 1，n + 2，...，n + t），它更简单。

```
Sum(DigitSum(i)) for i = n+1 to n+t = a(n+t) - a(n) 
```

其中`a(i)`是来自整数序列百科全书的[A037123](http://oeis.org/A037123)序列，它有几个公式。我认为这会很快：

```
a(n) = (1/2) * ( (n+1) * (n - 18 * sum{k>0, floor(n/10^k)} )
               + 9 * sum{k>0, (1+floor(n/10^k))*floor(n/10^k)*10^k}
               ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T07:12:55.893

最快的方法是提取每个数字并随时添加。

```
public static void main(String... args) {
    // check values
    int runs = 1000000;
    for (int i = 100; i < runs; i++) {
        int sum = sumDigits(i - 1);
        int sum1 = sumDigits(i);
        int sum2 = sumDigits(sum, i);
        if (sum1 != sum2) throw new AssertionError(i + ": " + sum1 + " != " + sum2);
    }
    long start = System.nanoTime();
    for (int i = 0; i < runs; i++) {
        int sum = sumDigits(i);
        // prevent optimising away.
        if (sum < 0) throw new AssertionError();
    }
    long time = System.nanoTime() - start;
    System.out.printf("sumDigits took an average of %,d ns%n", time / runs);
    long start2 = System.nanoTime();
    int lastSum = 0;
    for (int i = 0; i < runs; i++) {
        int sum = sumDigits(lastSum, i);
        lastSum = sum;
        // prevent optimising away.
        if (sum < 0) throw new AssertionError();
    }
    long time2 = System.nanoTime() - start2;
    System.out.printf("sumDigits using previous value took an average of %,d ns%n", time2 / runs);

    long large = Long.MAX_VALUE - runs - 1;

    long start3 = System.nanoTime();
    for (int i = 0; i < runs; i++) {
        int sum = sumDigits(large + i);
        // prevent optimising away.
        if (sum < 0) throw new AssertionError();
    }
    long time3 = System.nanoTime() - start3;
    System.out.printf("sumDigits took an average of %,d ns%n", time3 / runs);
    long start4 = System.nanoTime();
    int lastSum2 = sumDigits(large);
    for (int i = 0; i < runs; i++) {
        int sum = sumDigits(lastSum2, large + i);
        lastSum2 = sum;
        // prevent optimising away.
        if (sum < 0) throw new AssertionError();
    }
    long time4 = System.nanoTime() - start4;
    System.out.printf("sumDigits using previous value took an average of %,d ns%n", time4 / runs);

}

public static int sumDigits(long n) {
    int sum = 0;
    do {
        sum += n % 10;
        n /= 10;
    } while (n > 0);
    return sum;
}

public static int sumDigits(int prevSum, long n) {
    while (n > 0 && n % 10 == 0) {
        prevSum -= 9;
        n /= 10;
    }
    return prevSum + 1;
} 
```

印刷

```
sumDigits took an average of 32 ns
sumDigits using previous value took an average of 10 ns
sumDigits took an average of 79 ns
sumDigits using previous value took an average of 7 ns 
```

对于较大的值，它可以节省大约 70 ns。它给你的代码增加了一些复杂性。您必须使用第一个 sumDigit 来引导总和，因为您无法从 1 一直数到 10^18。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:59:05.760

让我们表示一个数字的数字总和`n`是`s(n)`

`s(49) = 13`

`s(94) = 13`

但是`49+1 = 50`哪个`s(50) = 5`，`94+1 = 95`哪个`s(95) = 14`。因此，如果您只知道 的位数之和`n`是 13，那么对于 的位数之和，您至少有两个不同的可能答案`n+1`。 *您需要一些有关 n 的附加信息*。

我确实认为关键是知道如果 n 以 9 结尾，`s(n+1)`则最多为 s(n) - 9。（啊，这就是 ypercube 的答案所在。）所以如果你有 xxxx9（最后一个 x 不是9） `s(xxxx9 + 1) = s(xxxx9) - 9 + 1`，。如果您有 xxx99,`s(xxx99 + 1) = s(xxx99) - 18 + 1`等。

因此，如果您计算范围内的所有 10、100、数千等，可能会加快这一速度。

（再次，我看到 ypercube 击败了我）。看起来这正是 A037123 的公式所做的（但从 0 到 n）。（让我们称之为`a(n)`）

所以最后，既然你想要从 n 到 n+r 的数字总和，而*不是*从 1 到 n 的总和，我们需要看看我们是否可以推导出一个公式范围`ss(n,n+r)`

*这*似乎很简单

`ss(n,n+r) = a(n+r) - a(n-1)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T17:28:10.030

**[这是来自维基百科](http://en.wikipedia.org/wiki/Digit_sum)**的公式：

![这是公式](../Images/a74651b6412bd35757f6ce09be25f0ac.png)

这是我在 Java 中的实现：

```
public static int digitSum(int x) {
    return IntStream.rangeClosed(0, (int) Math.log10(x)) // From zero to the number of digits of x in base 10...
               .map(n -> (x % (int) Math.pow(10, n + 1) -  x % (int) Math.pow(10, n)) / (int) Math.pow(10, n)) // ...yield each digit...
               .sum() // and sum;
} 
```

# sql - 预防触发

> ID：12364269
> 
> 赞同：-1
> 
> 时间：2012-09-11T06:54:00.877
> 
> 标签：sql, oracle, triggers, insert, date-arithmetic

我有一张这样的桌子：

```
StudentID  Student Name   Birthdate Student Birthplace Gender Height Weight 
--------- --------------- --------- ------------------ ------ ------ ------ 
83        Adam Stone      30-JUN-94 Towson, USA        M      193    88               
84        Stephanie Love  17-JUN-93 KL,Malaysia        F      176    67                 
85        Rachel Kim      17-FEB-92 Seoul, South Korea F      179    56 
```

如何编写触发器以防止 15 岁以下的任何学生被存储在学生表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:21:46.700

你有一个出生日期。因此，您需要确定 DoB 至少在今天之前 16 年。有多种不同的方法可以做到这一点；这是一个使用[区间文字](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements003.htm#i38598)的。

```
create or replace trigger students_biur
     before insert or update on students for each row 
begin
    if (:new.student_birthdate + INTERVAL '15' YEAR ) < sysdate
    then 
         raise_application_error( -20000, 'This student is too young be registered.');     
    end if;
end; 
```

此触发器还检查更新，以防止后续更改使学生无效。

* * *

触发器名称`students_biur`只是我使用的约定：带有后缀的表名称表示 *B*efore *I*nsert *U*pdate 用于每个 *R*ow。

RAISE_APPLICATION_ERROR 是一个标准过程，用于通过消息引发用户定义的异常。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/errors.htm#LNPLS99960)。

Oracle 为用户定义的错误保留 -20999 到 -20000 的范围；任何其他数字都可能与 oracle 定义的异常发生冲突。

# php - PHP 高级图像上传处理。没有交互式 jQuery 裁剪器

> ID：12364270
> 
> 赞同：-2
> 
> 时间：2012-09-11T06:54:02.697
> 
> 标签：php, image, upload, resize, crop

我正在寻找一种先进的一体化 PHP 脚本，它可以自动完成从图片上传到文件处理和保存的所有操作。*但我不想要这样一个带有交互式 jQuery 裁剪工具*的[脚本](http://www.webmotionuk.co.uk/jquery/image_upload_crop.php)。

这些是我正在寻找的功能：

1.  基本 HTML 上传表单（或 jquery）
2.  文件验证（jpg 或 png）
3.  如果超出最大宽度，则调整文件大小
4.  3种不同尺寸的裁剪文件
5.  将服务器上的所有内容保存在正确的文件夹中（原始或调整大小的图像 + 3 个裁剪）

我检查了数百个脚本和网站，但似乎没有一个真正适合这个方案。谁能给我一些相同或相似的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:27:20.770

不能给你一个 php 脚本.. 但我推荐这个服务：[https ://transloadit.com](https://transloadit.com)

# javascript - 对 Web URL 的 Ajax 调用导致 javascript 错误

> ID：12364272
> 
> 赞同：1
> 
> 时间：2012-09-11T06:54:04.293
> 
> 标签：javascript, ajax

我们一直在为我们的应用程序使用 Ajax 调用，并且它在服务器域中的 url 上运行良好。但是，当我在网络上使用 ajax 调用 url 时，我发现它在没有正确错误消息的情况下失败。我在网上搜索了给定的详细信息，但找不到任何合理的原因或解决此问题的方法。

我的代码是一个简单的 ajax 调用，如下所示。

```
var url = "http://www.google.com";
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    alert('done');
    }
  };
xmlhttp.open("GET",url,true);
xmlhttp.send(); 
```

如果 url 来自服务器域，则可以正常工作，但是当这是像 google 这样的开放 Internet url 时，它会在不同的浏览器中出现不同的行为而失败。

在 IE9 中，xmlhttp.open("GET",url,true) 给出“Javascript 错误：访问被拒绝”并且 xmlhttp.status 变为“由于错误 c00c023f 无法完成操作”

在 Chrome 和 FF 中，日志中没有显示错误，但是 xmlhttp.status 变为 0

在所有情况下，ajax 调用都不成功。

这种问题的原因可能是什么？我认为这不是网络问题，因为如果直接在浏览器上尝试，我可以访问 google url。那么，什么可能会阻止它从浏览器尝试 ajax 调用呢？

问候 Vijay.K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:57:20.877

跨域查询在 IE 9、Chrome、Firefox 中不起作用。这是一个安全问题。但是，为什么你仍然使用 XHR？你可以使用jQuery的真棒[`$.ajax`](http://api.jquery.com/jQuery.ajax/)吧？为此，您可以简单地使用这种方式：

```
$(document).ready(function(){
    $.ajax({
        url: "http://www.google.com/",
        success: function(){
           alert("Done!");
        }
    });
}); 
```

这里的问题是您正在尝试访问跨域，这是一种安全违规，并且`0`无论您做什么，状态都会始终返回。检查小提琴。

### 小提琴：http: [//jsfiddle.net/uazqY/](http://jsfiddle.net/uazqY/)

# javascript - jQuery 1.7.2：.on() 在一个页面上工作，在另一个页面上不工作

> ID：12364280
> 
> 赞同：1
> 
> 时间：2012-09-11T06:54:48.367
> 
> 标签：javascript, jquery, javascript-events

我有以下一段代码，它在一个页面上工作，在另一个页面上不起作用，尽管两个页面上的 html 标记是相同的

### JS

```
$("#books_list").on('click', '.load-more-books', function(event) {
  // Some stuffs
}); 
```

### html

```
<div id="book_list">
...
</div>
<a href="..." class="load-more-books">More books</a> 
```

即使在 Chrome 浏览器控制台事件中输入 JS 代码后也没有绑定。

谁能帮我解决这个问题，我做错了什么？

谢谢， 苏丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:01:17.147

您指定的选择器意味着它`.load-more-books`必须是它的后代`#book_list`才能工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T07:03:20.720

升级到 jQuery 1.8.1 并查看结果

# maven - Maven 未能执行目标 org.apache.maven.plugins:maven-jar-plugin

> ID：12364296
> 
> 赞同：16
> 
> 时间：2012-09-11T06:55:45.917
> 
> 标签：maven, maven-jar-plugin

如下所示，运行时出现错误`mvn package`

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:2.3.1:jar (default-jar) on project hello-world: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:2.3.1:jar failed: Unable to load the mojo 'jar' in the plugin 'org.apache.maven.plugins:maven-jar-plugin:2.3.1'. A required class is missing: org/codehaus/plexus/components/io/resources/PlexusIoResourceCollection
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.apache.maven.plugins:maven-jar-plugin:2.3.1
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/maven/repository/org/apache/maven/plugins/maven-jar-plugin/2.3.1/maven-jar-plugin-2.3.1.jar
[ERROR] urls[1] = file:/C:/maven/repository/junit/junit/3.8.1/junit-3.8.1.jar
[ERROR] urls[2] = file:/C:/maven/repository/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.jar
[ERROR] urls[3] = file:/C:/maven/repository/org/codehaus/plexus/plexus-archiver/1.0/plexus-archiver-1.0.jar
[ERROR] urls[4] = file:/C:/maven/repository/commons-lang/commons-lang/2.1/commons-lang-2.1.jar
[ERROR] urls[5] = file:/C:/maven/repository/org/codehaus/plexus/plexus-utils/2.0.5/plexus-utils-2.0.5.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR] 
[ERROR] -----------------------------------------------------: org.codehaus.plexus.components.io.resources.PlexusIoResourceCollection
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException 
```

这是我的 pom.xml。我摆脱了不必要的东西，但它仍然没有工作..

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>sds.jetty.simple</groupId>
<artifactId>hello-world</artifactId>
<version>1.0</version>
<packaging>jar</packaging>
<name>Jetty HelloWorld</name>

<properties>
    <jettyVersion>8.1.2.v20120308</jettyVersion>
</properties>

<dependencies>
    <dependency>
        <groupId>org.eclipse.jetty</groupId>
        <artifactId>jetty-server</artifactId>
        <version>${jettyVersion}</version>
    </dependency>
</dependencies>

<build>
</build>
</project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T15:38:39.123

尝试删除到文件夹

```
.m2\repository\org\apache\maven\plugins\maven-jar-plugin 
```

在您的文件系统上。您的插件 jar 可能已损坏。

如果这不起作用，请尝试删除 jetty-server 文件夹（相同原因）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:16:22.557

我曾经遇到过类似的问题。原来是maven 3问题。切换到 maven 2.2.1 后，我的构建运行良好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-27T14:20:02.560

甚至面临这个问题。只需删除 .m2/repository 文件夹并再次构建项目即可解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:18:13.823

它[适用](http://pastebin.com/syQUZych)于您的示例 POM 文件，问题应该出在其他地方。

你确定那里没有连接问题吗？您的防病毒软件不会阻止您下载工件？您的本地存储库中的条目是否已损坏？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-27T04:48:21.490

这是 Maven 3.3.1 和 3.3.3 中未解决的问题；[https://issues.apache.org/jira/browse/MNG-5787](https://issues.apache.org/jira/browse/MNG-5787) 我升级到 3.3.9 并开始工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-10T17:25:56.447

使用 maven 3.6.3 版我遇到了同样的错误。就我而言，这不是 Maven 的问题。但是我在 src/resource 文件夹中复制了一个非常大的文件夹（5 GB）。删除垃圾文件夹后，一切正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-05T16:32:19.903

1.我会建议你完全删除.m2文件夹

2.然后做maven->更新项目。

3.Maven安装

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-28T19:49:37.657

我最近遇到了这个问题，我只需要从 .m2/repository 中删除文件夹并重新运行 pom。有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-19T14:50:57.973

用 Java 8 而不是 Java 6 编译已经解决了我的问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-02-25T21:11:36.170

对我们来说，这是因为 Eclipse / Maven 自动将我们的 JDK 更改为 1.5（从 1.8）。手动改回 1.8 解决了这个问题。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-11-15T10:31:00.683

maven 无法即时解决的依赖项中应该存在一些问题。尝试在您的项目根目录上运行此命令。

```
mvn dependency:tree 
```

这应该可以解决所有依赖问题并帮助您运行应用程序

# jquery - 如何在不调整大小的情况下在 div 中显示图像

> ID：12364298
> 
> 赞同：1
> 
> 时间：2012-09-11T06:55:52.813
> 
> 标签：jquery, html, css, image

我有一个**160x160**像素的 div。我想在这个 div 中显示图像。我想在不调整大小的情况下在 div 中显示图像。

*   如果图像小于 div，则在 div 的中心显示图像而不调整大小。
*   如果图像大于 div，则在 div 中显示图像的中心部分而不调整其大小。

这个 div 就像现实世界中的一个窗口。您可以根据窗口的大小从该窗口查看视图。

我想你能理解这个吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T07:02:42.303

只需使用这样的简单背景图像：

```
div {background:url(image.jpg) 50% 50% no-repeat; height:160px; width:160px} 
```

如果你想使用实际的`<img>`，你可以这样做：

```
<div><img src="image.jpg" /></div>​​​​​​​​​​​​​

div {position:relative; text-align:center; overflow:hidden; height:160px; width:160px}
img {position:absolute; left:50%; margin-left:-250px}​ 
```

图像宽度的一半在哪里`margin-left`- 仅在您提前知道图像尺寸时才有效。如果您不知道，您可以获取图像大小并使用 JavaScript 执行此操作吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T06:57:23.993

```
<div><img src="yourimage.jpg" /></div>

div{width:auto; margin:0 auto}
div img{max-width:100%} 
```

max-width 将最大宽度作为图像的原始尺寸。即使您调整窗口大小，您也可以看到较小图像的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:30:52.110

**我想这就是你需要的......**

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style type="text/css">
            #imageLoader{
                border:1px solid #B0B0B0;
                height:160px;
                width:160px;
                background-image: url('images/Science.png');
                background-position:center center;
                background-repeat:no-repeat;
                background-clip:content-box;
            }
        </style>
    </head>
    <body>
        <div id="imageLoader" style="">
        </div>
    </body>
</html> 
```

**相应地更改图像名称...**

**这是我的** [小提琴](http://jsfiddle.net/vijaysarin/BgKg9/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T07:03:33.150

您还可以将图像设置为背景

```
background: url('image.png') no-repeat center center; 
```

这是一个例子：http: [//jsfiddle.net/H5U3H/](http://jsfiddle.net/H5U3H/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T07:02:08.317

最好的方法是将图像设置为 div 的背景图像。

```
div { 
    background: transparent url(path/to/image.jpg) no-repeat center 0; 
    width: 160px; 
    height: 160px; 
} 
```

如果图像大于 div，它将使图像居中，否则它将在 div 的（水平）中心显示图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-25T08:14:34.907

我对此的看法，您不需要使用 transform / top / left 知道图像的宽度：

```
<div style=" overflow: hidden; width: 160px; height: 160px">
  <img src='https://images.pexels.com/photos/67636/rose-blue-flower-rose-blooms-67636.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500' style="position: relative; left: 50%; top: 50%; transform: translate(-50%, -50%)"/>
</div>
```

# vb.net - 设置我的应用程序以打开我的自定义文件类型？

> ID：12364299
> 
> 赞同：1
> 
> 时间：2012-09-11T06:55:57.460
> 
> 标签：vb.net, visual-studio-2010, deployment

在我的应用程序中，我创建了自己的文件类型，基本上它只是一个带有我自己扩展名的普通文本文件。现在我的问题是我希望能够让我的应用程序在用户计算机上打开这些文件。因此，当用户单击他们从我的应用程序中保存的文件时，它将仅在我的应用程序中打开。我将使用 clickonce 来部署我的应用程序，它是否已经具有此功能？我的应用程序在 vb.net 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:01:26.113

您可以查看[**如何：为 ClickOnce 应用程序创建文件关联**](http://msdn.microsoft.com/en-us/library/bb892924.aspx)。在站点内有一个描述*如何手动设置它。* **在 VS**中，您可以*按照以下步骤*进行设置：

1.  打开*项目的上下文菜单*（在解决方案资源管理器中右键单击项目）
2.  去`Publish`
3.  *选项*
4.  *文件关联*

在那里您可以设置所有必要的关联。您还应该在 SO 上查看[**ClickOnce 文件关联！**](https://stackoverflow.com/questions/1759850/clickonce-file-association)（*注意*：访问文件名以打开`AppDomain.CurrentDomain.SetupInformation.ActivationArguments.ActivationData`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:59:44.570

[您可以在此处](http://msdn.microsoft.com/en-us/library/bb892924.aspx)找到答案，即为单击一次应用程序创建文件关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:00:31.573

尝试这个。希望它有你想要的一切。访问[http://www.c-sharpcorner.com/UploadFile/scottlysle/CustomFileType12082006000848AM/CustomFileType.aspx](http://www.c-sharpcorner.com/UploadFile/scottlysle/CustomFileType12082006000848AM/CustomFileType.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:06:47.310

你的问题由两个部分组成（我猜）

第一个是如何创建文件关联第二个是如何在应用运行时打开文件回答第一个 [文件关联VB.NET](http://www.codeproject.com/Articles/18594/File-Association-in-VB-NET)

第二个是当您打开您使用应用程序保存的文件时：

```
If My.Application.CommandLineArgs < 0 Then
MessageBox.Show("No File dragged into the application's executable!")
Else
Messagebox.Show("File " & My.Application.CommandLineArgs(0) & " is ready to open!")
End If 
```

您可以使用

> My.Application.CommandLineArgs(0)

作为文件路径

最好的祝愿

# javascript - 如何在javascript中显示两年之间的所有闰年

> ID：12364304
> 
> 赞同：0
> 
> 时间：2012-09-11T06:56:13.217
> 
> 标签：javascript, leap-year

如何创建一个 HTML 页面，该页面接受用户在文本字段中输入的 1900 年到 2012 年之间的整数。当用户按下“显示”按钮时，在 JavaScript 中创建的函数应该能够显示输入整数和之间的所有闰年2012 年。

**例子：**

当用户在文本字段中输入“1970”时，结果为：

```
1972年
1976年
1980
1984年
1988年
1992
1996
2000
2004年
2008年

```

我有这样的代码

```
var str = '';
var i;

for ( i = 1970; i < 2012; i += 1 ) {    
    if ( new Date( i, 1, 29 ).getMonth() === 1 ) {
        str += '<p>' + i + '</p>';
    }
}

document.body.innerHTML = str; 
```

我不明白如何将此功能绑定到按钮？​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:11:52.470

我假设您要计算1582 年引入的[公历](http://en.wikipedia.org/wiki/Gregorian_calendar)中闰年的年份。在公历中，400 年中有 97 个闰年。

可以被 4 整除的每一年，但不是 100，但 400 是闰年。1600 和 2000 是，但不是 1700、1800、1900。

这是一个考虑到公历闰年所有规则的解决方案：

```
for (var i=1890; i < 2010; ++i) {
  if (!(i%4)&&(i%100)||!(i%400) ) console.log(i);
} 
```

规则也可以写成

```
( ( (year % 4) == 0) && ( (year % 100) !== 0)) || ( (year % 400) ==0) 
```

为了能够将此绑定到按钮，您必须将其放在函数中：

```
function printLeapYears() {
   //Do your thing here
} 
```

然后你必须将它绑定到你的按钮。例如

```
<button type="button" onclick="printLeapYears()">print leap years</button> 
```

还有其他方法可以将功能绑定到按钮。由于这是一个家庭作业问题，我不知道您是否熟悉 ids，`document.getElementById`但这个解决方案可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:13:43.550

Just for fun, here's an approach that just tests years divisible by four:

```
function getLeapYears(start, end) {
    var startYear = Math.ceil(start / 4) * 4;
    var endYear = Math.floor(end / 4) * 4;
    var leapYears = [];

    if (isNaN(startYear) || isNaN(endYear)) return ['Invalid input'];

    while (startYear <= endYear) {
      if ( startYear % 100 || !(startYear % 400)) {
        leapYears.push(startYear);
      }
      startYear += 4;
    }
    return leapYears.length? leapYears : ['None']; 
} 
```

And here's one way (some might say not "best practice") to put it in a page:

```
Start year: <input id="i0"><br>
End year: <input id="i1"><br>
<button onclick="
  var start = document.getElementById('i0');
  var end = document.getElementById('i1');
  var el =  document.getElementById('s0');
  if (start && end && el) {
    el.innerHTML = getLeapYears(start.value, end.value).join('<br>');
  }
">List leapyears</button><br>

<span id="s0"></span> 
```

# ios - Screen shot of UIImageView after rotation

> ID：12364305
> 
> 赞同：0
> 
> 时间：2012-09-11T06:56:16.957
> 
> 标签：ios, uiimageview, screenshot

I want to take screen shot of a UIImageView after rotate it through some angle. I use this code,but I get screenshot which is particaly cut from boundries means I am unable to get full screen shot. Here imgDisplayImage is my instance of UIInageVew,lastRotation is total Rotation angle

```
// Create a graphics context with the target size
// On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
// On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
CGSize imageSize = self.imgDisplayImage.frame.size;
if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSaveGState(context);

CGContextTranslateCTM(context, [self.imgDisplayImage center].x, [self.imgDisplayImage center].y);
CGContextRotateCTM(context, lastRotation);
CGContextTranslateCTM(context,
                      -self.imgDisplayImage.frame.size.width * [[self.imgDisplayImage layer] anchorPoint].x,
                      -self.imgDisplayImage.frame.size.height * [[self.imgDisplayImage layer] anchorPoint].y);

    [self.imgDisplayImage.layer renderInContext:context];
CGContextRestoreGState(context);

// Retrieve the screenshot image
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(screenshot, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:47:16.697

Try using the following code. Here Mailimage is the final screenshot

```
- (UIImage*)screenshot
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows])
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    Mailimage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return Mailimage;

} 
```

# jquery - 从 json 中获取数据并检查是否在数组中可用

> ID：12364307
> 
> 赞同：0
> 
> 时间：2012-09-11T06:56:23.933
> 
> 标签：jquery, ajax, arrays, json

我有以下代码来使用 ajax 获取 json 响应。从回复中，我选择了“prodId”。页面加载时会有更多响应进入页面，每个响应将包含不同的“prodId”。我需要检查“prodId”是否已经收到。我已经在上面收到了 prodId 的页面中有一些 div。

我是处理数组的新手。要记住的一件事是所有 json 响应都来自页面加载本身。因此，在获得第一个响应后，我需要检查是否有任何重复的响应即将到来，并且应该避免它。请帮帮我

```
$.ajax({
  type: "GET",
  dataType: "jsonp",

success: function(data){
  prodId = data.prodID;
  //populate this data in page
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:59:58.237

向元素添加一些内容，以帮助您根据`prodID`. 元素 ID 很适合这里，但如果您为此使用其他东西，只需添加另一个类。

```
newElement.addClass('prod-' + data.prodID); 
```

然后在决定是否向 DOM 添加新元素时，只需检查是否：

```
if($('.prod-' + data.prodID).length == 0) { ... } 
```

您当然可以制作一个本地字典并在内存中而不是在 DOM 中执行查找：

```
var addedProducts = {}; 
```

每次向 DOM 添加元素时：

```
addedProducts[data.prodID] = newElement; 
```

在决定是否向 DOM 添加元素时：

```
if(!addedProducts.hasOwnProperty(data.prodID)) { ... } 
```

* * *

完整的代码可能如下所示：

```
success: function(data){
  prodId = data.prodID;

  if($('.prod-' + prodId).length == 0) {
     var newElement = $('<div/>').html(some content as determined by data);
     newElement.addClass('prod-' + prodId);
     newElement.appendTo('body');
  }
}); 
```

当然，如何创建元素以及将它们附加到何处取决于您想要实现的目标。我相信您在“在页面中填充此数据”评论下已经解决了这个问题。您需要添加的只是`addClass`调用和包装`if`.

# java - 在java中执行linux终端命令？

> ID：12364315
> 
> 赞同：2
> 
> 时间：2012-09-11T06:56:47.567
> 
> 标签：java, linux, sox

我正在尝试从 java 执行 SOX 命令，但不幸的是它每次都返回错误。不过，其他所有 SOX 命令都可以正常工作！这是代码：

```
class Simple {
    public static void main(String args[]) throws IOException, Exception {
        Process p;
        BufferedReader br;
        String co = "sox speech_16.wav -p pad 0 2.5 | sox - -m speech_16.wav speech_output.wav";
        p = Runtime.getRuntime().exec(co);
        br = new BufferedReader(new InputStreamReader(p.getInputStream()));
            int returnCode = p.waitFor();
        System.out.println("reurn code : "+returnCode);         
    }
} 
```

当我在终端中执行相同的 sox 命令时，它工作正常。实在看不懂是什么问题！！是不是因为'|' 象征？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T07:10:30.137

问题是 Runtime.exec() 不理解诸如“|”之类的 shell 概念。而是尝试：

```
Runtime.getRuntime().exec("/bin/sh", "-c", co); 
```

问题是 exec 直接运行二进制文件而不调用 shell。“|” 字符只被 shell 识别，sox 不识别。“-c”告诉外壳程序运行单个命令，并将整个命令作为单个参数传递。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T07:19:21.333

这可能与执行命令的环境有关，可能是以下任何一种：

*   `sox`找不到可执行文件（将完整路径放在命令中）
*   用户没有运行`sox`命令的权限（检查文件权限中的执行位）
*   `sox`当您从 Java 运行命令时，未初始化所需的某些环境变量（检查 sox 文档）
*   如果`speech_16.wav`是输入文件，`sox`则无法找到该文件（将 .wav 文件的完整路径添加到命令）
*   如果`sox`需要创建一个输出文件，那么它没有权限这样做，要么是由于目录权限，要么是因为存在无法覆盖该名称的现有文件，或者是由于文件系统上的空间不足。

# ruby-on-rails - 毁了？返回 nil 而不是 true

> ID：12364316
> 
> 赞同：0
> 
> 时间：2012-09-11T06:56:49.190
> 
> 标签：ruby-on-rails, nested-attributes

我正在`accepts_nested_attributes_for`使用`:allow_destroy => true`.

删除对象时，我可以看到该属性`_destroy`被标记为`true`，但是当我使用 来检查我的对象时`object.destroyed?`，我得到`nil`的不是`true`。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:01:11.463

从[文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)：

> 现在，当您将 _destroy 键添加到属性散列时，其值为 true，您将销毁关联的模型：
> 
> member.avatar_attributes = { :id => '2', :_destroy => '1' } member.avatar.marked_for_destruction? # => 真

`destroyed?`在这里检查对象是否真的被破坏了：

```
foo = Foo.first
foo.destroyed #=> false
foo.destroy
foo.destroyed? #=> true 
```

# android - Android 模拟器上的外语支持

> ID：12364322
> 
> 赞同：0
> 
> 时间：2012-09-11T06:57:05.463
> 
> 标签：android, character-encoding, emulation

我正在开发一个土耳其语的 android 程序。当我编译时，模拟器无法对土耳其字母进行编码。

例如，在菜单上应写“Liman Giriş Çıkış Bilgisi”。但是，有一些不相关的字符代替了“ş”、“ç”、“ı”字母：

![http://i.imgur.com/WGLmO.png](../Images/48099f47188a5a0ad257c4e2e50f45c7.png)

我在 Windows 7 中工作。在 Ubuntu 上没有问题。

可能是什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:12:57.360

更改模拟器语言的两种解决方案：

打开`Menu -> Settings -> Language & Keyboard -> Select Locale -> set any locale here`

或以编程方式如下：

```
Locale locale = null;
Configuration config=null;
config = getBaseContext().getResources().getConfiguration();
locale = new Locale("tr");
Locale.setDefault(locale);
config.locale = locale; 
```

# java - LongPress 可以在移动事件后触发吗？

> ID：12364327
> 
> 赞同：2
> 
> 时间：2012-09-11T06:57:13.683
> 
> 标签：java, android, android-screen, android-gesture

我正在开发一个简单的 android 应用程序，我的要求是，

**“在屏幕上发生一些移动事件（MotionEvent.ACTION_MOVE 为真）之后，如果用户在没有从屏幕上取下手指的地方停止移动几秒钟，则需要执行一些操作。”**

*我了解到 LongPress 是在触发向下事件后用户不进行任何移动时触发的东西（MotionEvent.ACTION_DOWN）。*

那么有什么方法可以在屏幕中移动后触发 LongPress 吗？

或者我应该为相同的功能创建自己的监听器？

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T09:30:52.070

想法是`cancel`每次您在屏幕上移动手指时都会设置计时器（`MotionEvent.ACTION_MOVE`）。当您在一段时间后停止移动时，例如 3 秒后，将执行计时器代码，您可以在其中执行长按任务。如果您停止移动一段时间并在经过时间（3 秒）之前再次开始移动，则再次设置新的计时器，依此类推。希望它可以帮助你。

```
timer = new Timer();

public boolean onTouchEvent(MotionEvent event) 
{
    switch(event.getAction()) 
    {
        case MotionEvent.ACTION_DOWN:
             break;

        case MotionEvent.ACTION_MOVE:
             timer.cancel();
             timer = null;
             timer = new Timer();
             timer.schedule(new TimerTask() 
             {                  
                @Override
                public void run() {
                    // do your long press task here
                }
             }, 3000);
             break;

        case MotionEvent.ACTION_UP:
             timer.cancel();
             timer = null;
             break;
    }
    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:10:16.870

恐怕你必须自己做。默认实现是只有在没有 Move 事件时才触发长按事件

关键是用`System.getCurrentTime()`在`onTouchEvent()`

如何？

在`onTouch()`

*   寻找 Motion_DOWN 事件，

    *   注意（在`long`变量中设置）触摸事件的时间。（使用`System.getCurrentTime()`）
    *   设置一个布尔值（说`isClicked`真）
    *   启动一个计时器任务，在 x 毫秒后执行（其中 x 是您的 longClick 的持续时间），如果`isClicked`仍然为真。将其视为您的 onLongClick 侦听器

--

*   在 Motion_UP 事件上
    *   将 isClicked 设置为 false。

编辑：我错过了一个重要步骤：

*   在 Motion_MOVE 事件上
    *   重启定时器任务（即取消+启动）

# jquery - jQuery UI 如何向我的 DOM 添加元素

> ID：12364328
> 
> 赞同：1
> 
> 时间：2012-09-11T06:57:16.147
> 
> 标签：jquery, html

我有一个 login.php 文件

```
 <div class="content tabs">
  </div> 
```

然后将该 login.php 刷新到输出 html 文件

```
 switch ($temp) {
            case 'php':
                ob_start();
                include_once($file);
                $content = @ob_get_contents();
                ob_end_clean();
                break; 
```

但是，当我检查来自 login.php 的 login.html 页面时，

```
 <div class="content tabs ui-tabs ui-widget-control ui-corner-all">
  </div> 
```

如您所见，login.php 的 div 已从 jquery ui 元素中插入了 ui-tabs ui-widget..等。谁做的？哪个文件将它们插入到 div 中？它不在任何 javascript 文件、css 样式表中。但谁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:09:18.593

这些类是由 Jquery UI CSS 框架添加的。这些默认类添加到每个小部件的顶部容器中。

[http://jqueryui.com/docs/Theming/API](http://jqueryui.com/docs/Theming/API)

[http://code.jquery.com/ui/1.9.0-rc.1/jquery-ui.js](http://code.jquery.com/ui/1.9.0-rc.1/jquery-ui.js)

希望这可以帮助。

谢谢阿克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:03:21.017

好吧，这是由 jquery UI 动态添加的与您使用的功能相关的类。

# database - java.sql.SQLException: Container 560 not found with Derby

> ID：12364330
> 
> 赞同：1
> 
> 时间：2012-09-11T06:57:19.783
> 
> 标签：database, jdbc, derby

我在 Derby 上遇到数据库异常。错误堆栈如下，代码在“”行。

代码：

```
 String[] types = { "TABLE", "ALIAS", "SYNONYM" };
    DatabaseMetaData dmeta = null;
    //... 
    //...

    int n = 0;
    String tblName = null;
    try {
        dmeta = connection.getMetaData();
        rs = dmeta.getTables(null, schema, null, types); 
```

// 这是行 DatabaseImpl.java:861
// ~~~~~~~~~ 这个方法发生错误

```
 while (rs.next()) {
            //...
            //...
        }
    } catch (SQLException e) {
        ServiceLogger.logError(e);
    } finally {
        try {
            rs.close();
        } catch (Exception e1) {
        }
    } 
```

错误：

```
java.sql.SQLException: The exception 'java.sql.SQLException: Container 560 not found.' was thrown while evaluating an expression.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.DatabaseMetaData.getTables(Unknown Source)
    at jet.server.db.core.DatabaseImpl.loadTables(DatabaseImpl.java:861)
        ...
        // here, some lines were cut by me.
        ...
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.apache.derby.client.am.SqlException: The exception 'java.sql.SQLException: Container 560 not found.' was thrown while evaluating an expression.
    at org.apache.derby.client.am.Statement.completeExecute(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parseEXCSQLSTTreply(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.readExecuteCall(Unknown Source)
    at org.apache.derby.client.net.StatementReply.readExecuteCall(Unknown Source)
    at org.apache.derby.client.net.NetStatement.readExecuteCall_(Unknown Source)
    at org.apache.derby.client.am.Statement.readExecuteCall(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.flowExecute(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.executeQueryX(Unknown Source)
    at org.apache.derby.client.am.DatabaseMetaData.executeCatalogQuery(Unknown Source)
    at org.apache.derby.client.am.DatabaseMetaData.getTablesX(Unknown Source)
    ... 32 more
Caused by: org.apache.derby.client.am.SqlException: Container 560 not found.
    ... 42 more 
```

错误之后，又抛出一个错误：

```
 java.sql.SQLNonTransientConnectionException: No current connection.
at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
at org.apache.derby.client.am.Connection.getAutoCommit(Unknown Source)
at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at jet.server.db.core.ConnectorManager$ConnectionPool$ConnectionInvocationHandler.invoke(ConnectorManager.java:888)
at $Proxy5.getAutoCommit(Unknown Source)
at jet.server.db.adapter.DB.execute(DB.java:758)
at jet.server.db.adapter.DB.createTable(DB.java:784)
...
// ...
...
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)
 Caused by: org.apache.derby.client.am.SqlException: No current connection.
at org.apache.derby.client.am.Connection.checkForClosedConnection(Unknown Source)
... 39 more 
```

# android - Viewpager 无法正常工作

> ID：12364335
> 
> 赞同：1
> 
> 时间：2012-09-11T06:57:23.870
> 
> 标签：android, android-viewpager, soundpool, fragmentpageradapter

我想在选择页面时在 viewpager 上显示消息和播放声音。我正在看到下一条消息。如果选择了页面（图片 1 - 声音 2，图片 2 - 声音 3...），我想在选择页面时播放声音（图片 1-声音 1，图片 2-声音 2，...）问题出在哪里？谢谢，

浏览器；

```
package com.example.messages;
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
public class Pictures extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturespage);
 MyPagerAdapter adapter = new MyPagerAdapter();
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(0); 
}
}; 
```

我的页面适配器；

```
package com.example.messages;
import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;
import android.media.SoundPool.OnLoadCompleteListener;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Toast;

public class MyPagerAdapter extends  PagerAdapter{

SoundPool snd;
int sound1,sound2,sound3;
boolean loaded = false;

public int getCount() {
    return 6;
}

public Object instantiateItem(View collection, int position) {
    View view=null;
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    // Set volume rocker mode to media volume
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    snd = new SoundPool(6, AudioManager.STREAM_MUSIC, 0);
    snd.setOnLoadCompleteListener(new OnLoadCompleteListener() {
      public void onLoadComplete(SoundPool soundPool, int sampleId,
          int status) {
        loaded = true;
      }
    });
    sound1 = snd.load(collection.getContext(), R.raw.sound1, 1);
    sound2 = snd.load(collection.getContext(), R.raw.sound2, 1);
    sound3 = snd.load(collection.getContext(), R.raw.sound3, 1);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.picture1;//
        view = inflater.inflate(resId, null);
        if (loaded) {
            snd.play(sound1, 1, 1, 1, 0, 1f);
            Toast.makeText(collection.getContext(), "Sound1", Toast.LENGTH_SHORT).show();
          }

        break;
    case 1:
        resId = R.layout.picture2; //    
        view = inflater.inflate(resId, null);
        if (loaded) {
            snd.play(sound2, 1, 1, 1, 0, 1f);
            Toast.makeText(collection.getContext(), "Sound2", Toast.LENGTH_SHORT).show();
          }
        break;
    case 2:
        resId = R.layout.picture3;//
        view = inflater.inflate(resId, null);
        if (loaded) {
            snd.play(sound3, 1, 1, 1, 0, 1f);
            Toast.makeText(collection.getContext(), "Sound3", Toast.LENGTH_SHORT).show();
          }
        break;
    case 3:
        resId = R.layout.picture4;//
        view = inflater.inflate(resId, null);
        Toast.makeText(collection.getContext(), "Test4", Toast.LENGTH_SHORT).show();
        break;
    case 4:
        resId = R.layout.picture5;//
        view = inflater.inflate(resId, null);
        Toast.makeText(collection.getContext(), "Test5", Toast.LENGTH_SHORT).show();

        break;
    case 5:
        resId = R.layout.picture6;//
        view = inflater.inflate(resId, null);
        Toast.makeText(collection.getContext(), "Test6", Toast.LENGTH_SHORT).show();
        break;
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@SuppressWarnings("unused")
private Context getApplicationContext() {
    // TODO Auto-generated method stub
    return null;
}

private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("unused")
private Context getBaseContext() {
    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings("unused")
private PagerAdapter findViewById(int myfivepanelpager) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

public static Integer getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:05:42.467

请尝试设置一个`ViewPager` `setOnPageChangeListener`，然后`onPageSelected`您将能够获得具体页面。

# android - 来自android活动的LaunchMode singleTask

> ID：12364336
> 
> 赞同：0
> 
> 时间：2012-09-11T06:57:27.053
> 
> 标签：android, android-activity, manifest

我添加到一个活动`android:launchMode="singleTask"`以逃避内存消耗问题（解释：该活动包含位图&假设我在后台堆栈中有该活动，当我收到我的广播意图并打开该活动时->我有 2 个相同的活动正在消耗内存由于他们的位图）

```
<activity android:name=".activity.XActivity" android:launchMode="singleTask"> 
```

但是现在我有其他问题，该活动是主要活动，因此每次单击应用程序图标都会重新启动应用程序（在某种意义上，如果没有此属性，单击应用程序图标会将应用程序的当前活动置于前面）

我怎么能逃脱呢？我在发送意图时也尝试了一些标志组合..但没有太大成功..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:01:55.180

这可能会对您有所帮助。

```
 notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

# svn - 删除文件后无法将文件提交到 SVN（意外）

> ID：12364346
> 
> 赞同：1
> 
> 时间：2012-09-11T06:58:35.880
> 
> 标签：svn, refactoring, tortoisesvn

我完全卡住了，无法将更改提交到 SVN 存储库，问题可能是在删除或移动文件后，在非同步模式下使用 IDE 并进行一些重构时引起的。

每当我尝试签入某个文件时，都会收到以下错误：

```
Replacing: SomeFile  
: SomeFile  
Error: Commit failed (details follow):  
Error: File  
Error: SomeFile  
Error: is out of date  
Error: SomePath  
Error: path not found  
Error: You have to update your working copy first. 
```

最新版本的 TortoiseSVN、命令行客户端和 IDE 内置客户端仍然存在类似错误。

我已经检查过了，`SomePath`确实已从存储库中删除，但 SVN 客户端坚持在尝试提交时尝试更新它`SomeFile`。更新完成OK，但这并不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:31:29.620

一种解决方法：

在新文件夹中签出 repo，将您的工作放在那里，提交它们，然后删除旧文件夹并将新文件夹复制到那里，或者只是重新签出 repo。

顺便说一句：覆盖旧文件夹并合并 .svn 文件夹可能会导致未知问题，因为它不是一个干净的文件夹......（也许干净也许不是，谁知道:)）

# sql-server - 在没有任何唯一列的循环中插入记录

> ID：12364351
> 
> 赞同：0
> 
> 时间：2012-09-11T06:59:00.293
> 
> 标签：sql-server, sql-server-2008

例如，我有下表，它没有任何标识或唯一列：

```
create table tbl_test ( first_name nvarchar(255), last_name nvarchar(255),
                        [address] nvarchar(255))  
Insert tbl_test values ('Andrei','Corovei','str Meteor') 
Insert tbl_test values ('Pop','Ionut','str Meteor') 
Insert tbl_test values ('Whitehead','John','str Lunii') 
Insert tbl_test values ('Grisham','Robert','str Corcoduselor') 
Insert tbl_test values ('Eugen','Johnesco','str Prunelor') 
```

我可以使用以下语法将上表中的行插入到另一个表中：

```
select * into tbl_test_loop from tbl_test 
```

这将一次性插入所有记录。

我可以在批量计数为 2 的循环中插入上述结果，而不是一次性插入而不创建任何 Identity 或 rownumber 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:30:08.023

```
Declare @loopcount int
Declare @rcount int
Declare @idn int
Declare @iteration int
Declare @strsql varchar(1000)

select @loopcount=2,@idn=1
select @rcount=count(*) from tbl_test
SET @iteration=(@rcount/@loopcount)+(@rcount%@loopcount)

while(@idn<=@iteration)
BEGIN
SET @strsql='INSERT INTO tbl_test_loop select top '+cast(@loopcount as varchar(2))+' * from tbl_test t where not exists(select * from tbl_test_loop l where l.first_name = t.first_name  and l.last_name = t.last_name  and l.[address] = t.[address])'
exec(@strsql)
select 'inserted '+cast(@loopcount as varchar(2))
SET @idn=@idn+1
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:05:58.323

```
 select tbl_test.* into tbl_test_loop from tbl_test, ( select 1 as loop union select 2) v 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:04:37.187

试试 NTILE，不需要循环：

```
select NTILE(3) OVER( ORDER BY ( SELECT 1 ) ) x, * 
into tbl_test_loop 
from tbl_test 
```

# jquery - jquery .submit + 再次请求同一个文件

> ID：12364354
> 
> 赞同：1
> 
> 时间：2012-09-11T06:59:09.983
> 
> 标签：jquery, html

> **可能重复：**
> [使用带有 .change() 事件的输入类型 =“file”字段上传文件并不总是在 IE 和 Chrome 中触发](https://stackoverflow.com/questions/10214947/upload-files-using-input-type-file-field-with-change-event-not-always-firin)

我有以下代码使用 .submit() 成功上传图像

```
// Photo Upload Form - AutoUpload
$('input#file').change(function() {
    var maxsize = '20971520';
    var fileExtension = $(this)
                            .val()
                            .split('.')
                            .pop()
                            .toLowerCase();

    if(this.files[0].size > maxsize) {
        $('h4#maxFileSizeExceeded').show();

    }else if($.inArray(fileExtension, ['gif','png','jpg','jpeg']) == -1) {
        $('h4#fileTypeNotAllowed').show();

    }else{
        if(pushState == '0') {
            $('div#uploadPercentage').hide();
            $('img#uploadGifLoaderHTML4').fadeIn('fast');
        }
        $('form#joinPhotoUploadForm').submit();
        jcrop_api.destroy();

        $('div#croppingBackgroundContainer').fadeIn(1000);
        $('div#cropBoxWrapper').css('margin-left', '0px');
    }
}); 
```

我遇到的问题是，如果用户再次请求相同的文件，则没有更改并且提交不会触发。

有没有办法再次请求同一个文件，或者再次知道它的同一个文件，或者可以对输入 type="file" 进行某种重置？

********************* 更新

```
 <form action="scripts/php/photo_processing.php?page=join&section=precrop" id="joinPhotoUploadForm" enctype="multipart/form-data">
        <input type="file" name="file" id="file"><br>
      </form> 
```

用户单击浏览按钮并可以选择图像。如果用户选择不同的图像，图像将上传。但是，如果用户选择相同的图像，.change() 函数根本不会触发。我假设是因为它保持与以前相同的状态。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:24:44.813

如果相同的文件被选中，`input[type=file]`则不会调用该`change`事件，因为没有更改。添加一个按钮以再次触发您的代码或使用`submit`表单上的事件。

# javascript - 在窗口内添加滚动条

> ID：12364356
> 
> 赞同：0
> 
> 时间：2012-09-11T06:59:31.577
> 
> 标签：javascript

我在同一页面中有 3 个手风琴。在手风琴的上面有标题页。我希望标题页应该变得静止，并且在手风琴的部分有一个滚动条。所以当我滚动页面时，只有内页会滚动整个页面 .suggest 使用 javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:10:18.530

如果您更喜欢 jquery，这是一个不错的选择 **jquery.tinyscrollbar.min.js**

对于更多的东西冲浪这个链接太[链接](http://baijs.nl/tinyscrollbar/)

# iphone - Iphone：消息中没有警报的APNS

> ID：12364364
> 
> 赞同：0
> 
> 时间：2012-09-11T07:00:00.200
> 
> 标签：iphone, objective-c, alert, apple-push-notifications

如果消息是在服务器没有发出警报的情况下发送的，当应用程序在前台运行时，有没有办法处理该消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:05:14.543

当您的应用程序运行时，所有通知都会发送到应用程序委托：

`- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo`

# prolog - Prolog中的分类列表

> ID：12364367
> 
> 赞同：0
> 
> 时间：2012-09-11T07:00:06.083
> 
> 标签：prolog, dcg

好的，所以我正在为算术方程编写解析器。例如，我在列表中获取输入，`"10+20" = [49,48,43,50,48]`然后将所有数字转换为相应的数字，例如`[49,48,43,50,48] = [1,0,43,2,0]`，从那里我想将大于 10 的整数重新组合在一起。

从 ascii -> 数字转换我使用 maplist 和 number_codes 进行转换。

我的一种方法是遍历列表，如果它是 0-9 将其存储在一个变量中，然后检查下一个数字，0-9 将它附加到另一个变量等等，直到我点击一个运算符。我似乎不能简单地附加数字。这是我当前的代码。

```
expression(L) :-
    maplist(chars, L, Ls).

chars(C, N) :-
    (
        C >= "0", "9" >= C -> number_codes(N, [C]);
        N is C
    ). 
```

不确定是否有一种简单的方法可以添加到我的代码中（据我所知，maplist 只返回一个与传入的列表长度相等的列表，但我可能会弄错）。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:01:29.620

我前段时间用表达式解析器[回答了。](https://stackoverflow.com/a/7828855/874024)

它将向您展示如何将 DCG 用于实际任务，我希望您会欣赏这种方法的通用性和简单性。

SWI-Prolog 只需要一个库谓词，[编号](http://www.swi-prolog.org/pldoc/doc_for?object=dcg_basics:number//1)//1，在 Sicstus 中很容易实现。如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:01:08.680

是的，`maplist`只“返回”一个等长的列表。此外，`maplist`仅将谓词应用于一个元素（基本上它与上下文无关）。因此，不可能做你想做的事情（将运算符之间的数字组合成一个数字），`maplist`你必须自己编写递归。

但是，您可以做一些比所有这些来回转换更容易的事情：

```
expression(L, E):-
    string_to_atom(L,A),
    atom_to_term(A,E,[]). 
```

像这样工作：

```
2 ?- expression("1+2",E).
E = 1+2.

3 ?- expression("1+2",E), X is E.
E = 1+2, X = 3.

4 ?- expression("1+2",E), X+Y =  E.
E = 1+2, X = 1, Y = 2.

5 ?- expression("1+2+3",E), X+Y =  E.
E = 1+2+3, X = 1+2, Y = 3. 
```

自然地，如果你想要一个包含所有相关数字的列表，你将不得不做一些递归的事情，但这有点微不足道。

但是，如果您仍想进行转换，我建议检查定句语法；它将大大简化任务。

# java - 当我将多个客户端同时连接到 Java 服务器时，套接字写入错误

> ID：12364375
> 
> 赞同：1
> 
> 时间：2012-09-11T07:00:39.360
> 
> 标签：java, sockets, serversocket

我正在创建一个桌面应用程序，其中多个客户端必须使用它们之间的套接字连接连接到服务器。我成功连接了它们，但是当我将多个客户端同时连接到服务器时出现问题，服务器出现错误“**套接字写入错误**”我的代码在下面请建议我一个答案..

```
public class SocketConnection implements Runnable {
    // password of oracle database

    ServerSocket serverSocket = null;
    Socket socket = null;
    DataInputStream dataInputStream = null;
    DataOutputStream dataOutputStream = null;
    Socket clientSocket = null;
    DBConnection dbConnection;

    public SocketConnection() {
        // TODO Auto-generated constructor stub

        dbConnection = new DBConnection();

        if (con != null) {

            serverSocket = dbConnection.createSocket();

            if (serverSocket != null) {

                System.out.println("Server Started. Looking for the connections.");
                System.out.println("Listening Port:8888.......");
            }

            Thread t = new Thread(this);
            t.start();
        }

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (true) {
            try {
                clientSocket = serverSocket.accept();
                System.out.println("Connection Accepted");
                Connect m_connect = new Connect(clientSocket);

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

    }

    public class Connect implements Runnable {
        Socket clientSocket = null;
        Thread t = null;
        private ResultSet res1;
        private ResultSet res2;
        Statement stmt;
        private File mkFolder;

        public Connect(Socket clientSocke) {
            // TODO Auto-generated constructor stub
            this.clientSocket = clientSocke;

            try {

                stmt = con.createStatement();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {

            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }
            t = new Thread(this);
            t.start();
        }

        @Override
        public void run() {

            try {
                dataInputStream = new DataInputStream(
                        clientSocket.getInputStream());
                dataOutputStream = new DataOutputStream(
                        clientSocket.getOutputStream());
                System.out.println("Connection established::"
                        + clientSocket.getInetAddress());
                String pass = dataInputStream.readUTF();
                System.out.println(pass);
                if (pass.equals("1")) {
                    //here is read n write operation

                } else if (pass.equals("3")) {

                    //here is read n write operation

                } else if (pass.equals("2")) {

                    //here is read n write operation

                } else if (pass.equals("4")) {
                    //here is read n write operation

                } else if (pass.equals("5")) {
                    //here is read n write operation

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                if (socket != null) {
                    try {
                        socket.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                if (dataOutputStream != null) {
                    try {
                        dataOutputStream.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                if (dataInputStream != null) {
                    try {
                        dataInputStream.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                if (stmt != null) {
                    try {
                        stmt.close();
                    } catch (SQLException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-11T07:58:03.980

为什么你以这种低级的方式这样做？选择一个有据可查的 API 并通过它进行通信！

您是否已经阅读过这样的文章：[Multithread client server chat on sockets。负载测试。接收失败](https://stackoverflow.com/questions/11123530/multithread-client-server-chat-on-sockets-load-test-recv-failed/11716222#11716222)

# mongodb - 为什么 $in 比 $all 快得多？

> ID：12364377
> 
> 赞同：0
> 
> 时间：2012-09-11T07:01:03.243
> 
> 标签：mongodb, indexing

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^soto/, /^nasi/] } }).limit(200);

db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$in" : [/^soto/, /^nasi/] } }).limit(200); 
```

这是结果

```
/* 88 */
{
  "ts" : ISODate("2012-09-11T06:57:26.801Z"),
  "op" : "query",
  "ns" : "newisikota.tablebusiness",
  "query" : {
    "LongitudeLatitude" : {
      "$nearSphere" : [106.772835, -6.186753],
      "$maxDistance" : 0.053980478460939611
    },
    "Prominent" : {
      "$gte" : 15.0
    },
    "indexContents" : {
      "$all" : [/^soto/, /^nasi/]
    }
  },
  "ntoreturn" : 200,
  "nscanned" : 48,
  "nreturned" : 48,
  "responseLength" : 60002,
  "millis" : 3821,
  "client" : "127.0.0.1",
  "user" : ""
}

/* 89 */
{
  "ts" : ISODate("2012-09-11T06:57:43.147Z"),
  "op" : "query",
  "ns" : "newisikota.tablebusiness",
  "query" : {
    "LongitudeLatitude" : {
      "$nearSphere" : [106.772835, -6.186753],
      "$maxDistance" : 0.053980478460939611
    },
    "Prominent" : {
      "$gte" : 15.0
    },
    "indexContents" : {
      "$in" : [/^soto/, /^nasi/]
    }
  },
  "ntoreturn" : 200,
  "nscanned" : 200,
  "nreturned" : 200,
  "responseLength" : 249598,
  "millis" : 320,
  "client" : "127.0.0.1",
  "user" : ""
} 
```

注意：$all 查询可以偶尔运行 26 秒。

解释结果如下：

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^soto/, /^nasi/] } }).limit(200).explain();

{
        "cursor" : "GeoSearchCursor",
        "nscanned" : 48,
        **"nscannedObjects" : 48,**
        "n" : 48,
        "millis" : 8563,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {
        }
}
>

db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$in" : [/^soto/, /^nasi/] } }).limit(200).explain();
{
        "cursor" : "GeoSearchCursor",
        "nscanned" : 200,
        **"nscannedObjects" : 200,**
        "n" : 200,
        "millis" : 516,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {
        }
} 
```

请注意，$in 搜索会扫描更多对象。

最坏的情况是最坏的情况，mongdob 可以进行 $in 搜索，然后过滤掉。比例应该不会很大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:59:46.137

您正在将苹果与橙子进行比较。两个查询返回不同的结果。$all 表示字段值应匹配所有输入，而 $in 表示字段值应匹配任何一个值。$all 是和，$in 是或。

结合 $limit - 与 in 相比，$all 查询将需要查看更多文档才能找到匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:07:32.960

我在[为什么在 mongodb 中使用 $all 慢得多？](https://stackoverflow.com/questions/12524175/why-using-all-in-mongodb-is-much-slower)

这次我只用了一个词。因此，$in 和 $all 之间应该没有区别。它们都是等价的。

仍然 $all 慢得多。

事实证明，根据这个答案，mongodb 本身存在一个错误。

[https://jira.mongodb.org/browse/SERVER-1748](https://jira.mongodb.org/browse/SERVER-1748)

我想在问题解决之前我根本不会使用 $all 。

对于所有其他答案，您自己尝试过吗？

# facebook - 有没有办法改变应用程序的路径？

> ID：12364381
> 
> 赞同：0
> 
> 时间：2012-09-11T07:01:13.933
> 
> 标签：facebook

标题中的问题。当我创建应用程序时，我保留了默认名称而不是名称，并且应用程序现在正在使用该应用程序。URL 中的 ID。有没有办法改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:10:02.793

您应该能够转到您的应用设置仪表板并更改应用的命名空间 - 这也将代表您的应用的新 URL。

# node.js - 我应该为此使用 node.js 吗？

> ID：12364391
> 
> 赞同：0
> 
> 时间：2012-09-11T07:02:03.777
> 
> 标签：node.js, web, panel, administration

我的问题很简单。我开始开发一个相当大的项目，并意识到 node.js 可能是一个可行的解决方案。由于我还是 node 新手，因此无法确定它是否适合我，所以我决定在这里问。

项目：它基本上是游戏服务器提供商的管理解决方案。它包括一个 Web 管理面板以及用于控制一切的服务器组件。

我的疑问是我是否应该使用 node 作为**面板**。

它将需要数据的生命更新（套接字可以派上用场），我们计划将其开发为“单页”类型的应用程序。
拥有它节点意味着它将能够异步执行任务并且它自己（而不是，比如说，php和cronjobs）
它将被分发。使其成为节点将使这变得容易。除了节点和简单的“npm install”之外没有依赖项。
它将有多个人连接到它并同时使用它。

节点是否能够很好地处理这些多个连接？性能方面，它会是一个不错的选择吗？node（也许还有[Derby](http://derbyjs.com//)）是否足以构建一个好的 Web 面板？我对我提出的任何观点是正确的，还是我错过了什么？

谢谢您的帮助！

真诚的-安塔里亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:38:17.440

好吧，您确实回答了一些问题。由于异步任务节点可以承担相当多的连接负载，因此它应该可以处理您的应用程序。我不知道德比，但[快递](http://expressjs.com/)也适合你的任务。

此外，当一个节点服务器不足时，您始终可以部署下一个节点服务器并在它们之间创建一些通信。由于节点是轻量级的，它可以完成这项工作。

> 节点是否能够很好地处理这些多个连接？

是的。

> 性能方面，它会是一个不错的选择吗？

是的。

> node（也许还有 Derby）是否足以构建一个好的 Web 面板？

是的。

> 我对任何一点都是正确的

你对他们所有人都是正确的。

我认为节点足以胜任这项工作。

# java - 禁用后在 jButton 上执行的操作

> ID：12364396
> 
> 赞同：3
> 
> 时间：2012-09-11T07:02:18.720
> 
> 标签：java, swing, concurrency, jbutton, event-dispatch-thread

我有使用 Swing 的示例代码。

```
package playerlist;

import java.awt.FlowLayout;
import javax.swing.*;
import java.awt.event.*;

public class Sample extends JFrame{
    private JButton button1;
    private JButton button2;

    public Sample(){
        super();
        setTitle("Sample JFrame");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        button1 = new JButton("Button 1");
        button2 = new JButton("Button 2");

        button1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                button1ActionPerformed(e);
            }
        });
        button2.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                button2ActionPerformed(e);
            }
        });

        setLayout(new FlowLayout());

        add(button1);
        add(button2);
        pack();
    }

    private void button1ActionPerformed(ActionEvent ae){
        button1.setEnabled(false);
        button2.setEnabled(false);
        try{
              Thread.sleep(5000);
        }catch(Exception e){

        }
        System.out.println("*** Button 1 Clicked ***");
        button1.setEnabled(true);
        button2.setEnabled(true);
    }

    private void button2ActionPerformed(ActionEvent ae){
        button1.setEnabled(false);
        button2.setEnabled(false);
        try{
            Thread.sleep(5000);
        }catch(Exception e){

        }
        // I have disabled this button from button 1's action, but still when I click this button within
        // 5 seconds, actions of this button is performed
        System.out.println("*** Button 2 Clicked ***");
        button1.setEnabled(true);
        button2.setEnabled(true);
    }

    public static void main(String [] args){
        new Sample().setVisible(true);
    }
} 
```

我想要 - 当我单击 button1 时（当 button1 的动作开始时）， button1 和 button2 应该被禁用（如果我单击禁用的按钮，则不应执行任何操作）。我已经使用 setEnabled(false) 禁用了这两个按钮。当 button1 的动作完成时，两个按钮都应该被​​启用。但是在我的代码中，这不起作用，即使在禁用按钮之后，也会对禁用的按钮执行操作。在 button1 的操作中，我禁用了两个按钮并使用 sleep 方法暂停执行（用于模拟繁重的工作）5 秒，但在 5 秒内如果我单击任何按钮，它们的操作将在 button1 的操作完成后触发。请帮我。我提供了示例代码，当您运行它时，单击按钮 1 后，立即单击按钮 2，执行两个按钮的操作。我想当我按下任何按钮时，按钮的点击动作会做繁重的工作，同时我将禁用所有按钮，因此无法执行其他操作。当第一个动作完成时，我将启用所有按钮。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:07:52.893

*   代码逻辑可能是正确的，

*   但是有一个错误，你被[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)`Thread.sleep(int)`阻塞了

*   必须更改`Thread.sleep(int)`为[摇摆定时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

*   然后第一步是[JButton#setEnabled(false)](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)，其余代码应从[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)调用的[Swing Action触发](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:11:21.680

我通过运行要在单击新线程上的按钮时执行的任务来完成这项工作。

# solr - 在 Solr 中存储数组

> ID：12364398
> 
> 赞同：9
> 
> 时间：2012-09-11T07:02:33.210
> 
> 标签：solr

如何将一组值存储在 Solr 索引中？我特别想制定一个 schema.xml 文件。

考虑以下潜在的 Solr 文档：

```
ID: 351
Name: Beatles
Members:
    1) Name: John
       Instrument: Guitar
    2) Name: Paul
       Instrument: Guitar
    3) Name: George
       Instrument: Bass
    4) Name: Ringo
       Instrument: Drums 
```

在 MySQL 中，我将有三个表，如下所示：

```
Bands:
    BandID
    Name
People:
    PersonID
    Name
    Instrument
BandsPeople:
    BandID references Bands(BandID)
    PersonID references People(PersonID) 
```

**忽略一个人可能属于多个乐队的概念和 MySQL 方法的其他优点，我的目标是学习如何在 Solr 中存储数组。乐队只是一个例子，可能不是一个很好的例子！**

拥有多个 s 的明显方法`Member`是一个 multiValued 字段：

```
<field name="member" stored="true" type="string" multiValued="true" indexed="true"/> 
```

但是，该 multiValued 字段本身需要具有子值。我没有看到任何关于如何制定模式的文档。请注意，我使用的是 Solr 4。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T20:36:20.770

有几个答案，但遗憾的是没有一个使用`multivalued`.

*   利用 lucene 的嵌套文档（可能性能不佳）
*   每个选项使用一个文档对文档进行大量非规范化。然后使用 Lucene 的 Grouping 功能。（这是“SOLR/Lucene 方式”。）
*   遵循带有偏移量建议的跨度查询和术语向量@以下博客： http: [//blog.griddynamics.com/2011/06/solr-experience-search-parent-child.html](http://blog.griddynamics.com/2011/06/solr-experience-search-parent-child.html) http://blog.griddynamics.com/ 2011/07/solr-experience-search-parent-child.html [http://blog.griddynamics.com/2011/10/solr-experience-search-parent-child.html](http://blog.griddynamics.com/2011/10/solr-experience-search-parent-child.html)
*   创建索引的方面名称。

对于索引方面名称，您的数据（一个文档）将如下所示：

```
id="351" band="Beatles" 
   member_0="John" instrument_0="Guitar" 
   member_1="Paul" instrument_1="Guitar" 
   ... 
```

对于相对较短的列表（少于数百个），后者在您的文档大小和复杂性方面是最简单的，但就搜索而言，会将问题强加给客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:13:50.860

Lucene 已经加入，因此您可以使用它们来近似 db 架构，但需要注意一些警告，请参阅[Grouping and Joining in Lucene/Solr](http://www.slideshare.net/lucenerevolution/grouping-and-joining-in-lucenesolr)。Solr 最终也将获得访问权限，检查[正在进行的工作](https://issues.apache.org/jira/browse/SOLR-3076)

# php - Ajax POST 请求未通过 PHP

> ID：12364404
> 
> 赞同：0
> 
> 时间：2012-09-11T07:02:46.750
> 
> 标签：php, javascript, jquery

我正在使用 Ajax 向我的 php 文件发送 HTTP POST 请求，但没有得到想要的结果。$_POST 和 $_GET 都是空的。我想我忽略了一些东西，但我不知道是什么。

这是我触发请求的代码：

```
this.save = function() {

    alert(ko.toJSON([this.name, this.description, this.pages]));
    $.ajax("x", {
        data: ko.toJSON([this.name, this.description, this.pages]),
        type: "post", contentType: "application/json",
        success: function(result) { alert(result) },
        error : function(jqXHR, textStatus, errorThrown) { alert(textStatus + errorThrown)}
    });
}; 
```

请注意，我在第 3 行警告 JSON。该 JSON 是正确的，因此第 5 行的输入是有效的。

我在 PHP 中的测试方法：

```
header('Content-type: application/json; charset=utf-8');
echo json_encode(array_merge($_POST, $_GET));
exit; 
```

我得到的响应是一个空数组。

*   我测试了输入（见上文）；
*   我知道 Ajax 调用本身会成功，如果我将 PHP 示例中的第二行替换`json_encode(array('success' => true));`为我的页面中的第二行 - 所以 URL 是正确的。
*   我用 GET 和 POST 测试了它，得到了类似的负面结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:06:10.347

您正在发送 JSON 请求，这就是 $_POST 和 $_GET 都为空的原因。尝试像这样发送数据：

```
$.ajax("x", {
    data: { data: [this.name, this.description, this.pages] },
    type: "post", 
    success: function(result) { alert(result) },
    error : function(jqXHR, textStatus, errorThrown) { alert(textStatus + errorThrown)}
}); 
```

现在看看里面`$_POST["data"]`。

或者如果您需要使用 JSON 请求，则需要将其反序列化回您的 PHP 文件中：

```
$.ajax("x", {
    data: { data: ko.toJSON([this.name, this.description, this.pages]) },
    type: "post", 
    success: function(result) { alert(result) },
    error : function(jqXHR, textStatus, errorThrown) { alert(textStatus + errorThrown)}
}); 
```

然后解码：

```
$json = $_POST['json'];
$data = json_decode($json); 
```

如果你想在 POST 正文中发送纯 JSON 请求：

```
$.ajax("x", {
    data: ko.toJSON([this.name, this.description, this.pages]),
    type: "post", 
    contentType: 'application/json',
    success: function(result) { alert(result) },
    error : function(jqXHR, textStatus, errorThrown) { alert(textStatus + errorThrown)}
}); 
```

进而：

```
$data = json_decode(file_get_contents("php://input")); 
```

请注意，这`php://input`是一个只读流，允许您从请求正文中读取原始数据。

# sugarcrm - 如何在 SugarCRM 中有条件地隐藏详细视图上的按钮？

> ID：12364406
> 
> 赞同：2
> 
> 时间：2012-09-11T07:03:03.417
> 
> 标签：sugarcrm

**如何在 SugarCRM 中有条件地隐藏详细视图上的按钮？**

具体细节：

假设在帐户模块中我想从 DetailView 页面有条件地隐藏删除按钮，那么我可以在哪里放置显示/隐藏条件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:41:25.583

对于 SugarCRM Pro 版本

您应该编辑**custom/modules/MODULE_NAME/metadata/detailviewdefs.php**文件并根据需要更改**$viewdefs[$module_name]['DetailView']['templateMeta']['form']**数组。默认情况下，该数组对于几乎所有模块都是空的。

例子：

```
// Place this code on the end of a file.

// This line remove all buttons
$viewdefs[$module_name]['DetailView']['templateMeta']['form']['buttons'] = array();

// This will add some buttons according to your conditions:
if (condition for edit button = true)
    $viewdefs[$module_name]['DetailView']['templateMeta']['form']['buttons'][] = 'EDIT';
if (condition for duplicate button = true)
    $viewdefs[$module_name]['DetailView']['templateMeta']['form']['buttons'][] = 'DUPLICATE';
if (condition for delete button = true)
    $viewdefs[$module_name]['DetailView']['templateMeta']['form']['buttons'][] = 'DELETE'; 
```

每次更改此文件时，请记住运行管理 -> 修复 -> 快速修复和重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:16:13.660

您应该可以在 /custom/modules/Account/metadata/detailviewdefs.php 中修改它

添加到这个类似：

```
if (your condition) {
    unset($viewdefs['Accounts']['DetailView']['templateMeta']['form']['buttons'][2])
    //2 being the index of the DELETE button
} 
```

然后你需要运行：Admin -> Repair -> Quick Repair and Rebuild

# login - SugarCRM - 普通用户类型用户无法登录

> ID：12364414
> 
> 赞同：0
> 
> 时间：2012-09-11T07:03:20.480
> 
> 标签：login, sugarcrm

我正在运行 SugarCRM，并且能够使用超级管理员帐户登录和注销。我创建了一个普通用户类型的新用户并定义了密码，因为我取消了密码的自动生成。

即使我通过数据库更改密码，我也无法登录。但是，如果我将类型更改为管理员，该用户现在可以登录。这是为什么？我希望它只是普通用户。

问候， 罗内尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:50:51.447

在 6.5.x 版本中，我发现密码规则有问题。也许是这样。转到 config.php 并查看密码设置数组。有一个 minpwdlenght 和一个 oneupper。将 'oneuppper' 更改为 'false' 并将 minpwdlenght 匹配到您想要的长度。

这解决了我的问题。

# iphone - 带有帧数组的 CABasicAnimation

> ID：12364415
> 
> 赞同：0
> 
> 时间：2012-09-11T07:03:24.383
> 
> 标签：iphone, objective-c, ios, calayer, cabasicanimation

我有一个`CABasicAnimation`带有 a`.fromValue`和 a`.toValue`的带有 202 个图像的 PNG 图像移动并一张一张地显示它们

我也曾经`CALayer`拿着 image.png

它按顺序传递所有图像的问题我想按我将放入的帧显示图像`NSArray`

这是我的代码：

```
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"sampleIndex"];
anim.fromValue = [NSNumber numberWithInt:1];
anim.toValue = [NSNumber numberWithInt:203];
anim.duration = 1.75f;
anim.repeatCount = HUGE_VALF;
anim.autoreverses = YES; 
[myImage addAnimation:anim forKey:nil]; 
```

帧数组是：

```
frames =   (753, 377, 798, 422)  ,
  (706, 377, 751, 422)  ,
  (659, 377, 704, 422)  ,
  (612, 377, 657, 422)  ,
  (565, 377, 610, 422)  ,
  (518, 377, 563, 422)  ,
  (518, 424, 563, 468)  ,
  (471, 424, 516, 468)  ,
  (424, 424, 469, 468)  ,
  (471, 377, 516, 422)  ,
  (424, 377, 469, 422)  ,
  (377, 377, 422, 422)  ,
  (330, 377, 375, 422)  , 
```

等等 ....

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:33:57.933

与您的帧数组类似，您可以将所有需要的图像（帧）添加到 UIImageView。这是示例：

```
NSArray *images = [NSArray arrayWithObjects: 
              [UIImage imageNamed:@"frame753.png"],
              [UIImage imageNamed:@"frame377.png"],
              [UIImage imageNamed:@"frame798.png"], 

              nil];
yourImageView.animationImages = images; 
yourImageView.animationDuration = 1.75; 
yourImageView.animationRepeatCount = 0;
[yourImageViewstartAnimating]; 
```

希望这可以帮助。

# node.js - node.js mongodb 关闭连接

> ID：12364417
> 
> 赞同：8
> 
> 时间：2012-09-11T07:03:33.567
> 
> 标签：node.js, mongodb

我正在尝试将 node.js 与 mongodb 一起使用，并按照[http://howtonode.org/express-mongodb上的教程进行操作](http://howtonode.org/express-mongodb)

打开连接的代码是

```
ArticleProvider = function(host, port) {
 this.db= new Db('node-mongo-blog', new Server(host, port, {auto_reconnect: true}, {}));
 this.db.open(function(){});
}; 
```

但是我看不到任何连接被关闭。但是当我在 mongo 控制台上看到日志时，我可以看到这些连接打开并在一段时间后关闭。

连接会自动关闭吗？当大量客户端尝试访问服务器时会出现问题吗？应该在哪里关闭连接？

谢谢

图科

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:19:17.003

在该示例应用程序中，仅创建一个`ArticleProvider`对象供应用程序在服务请求时共享。该对象的构造函数打开一个数据库连接，该连接在应用程序终止之前不会关闭（这很好）。

所以你应该看到的是，每次启动应用程序时都会获得一个新的 mongo 连接，但无论有多少客户端访问服务器，都不会建立额外的连接。在你终止你的应用程序后不久，你应该会看到它的连接在 mongo 端消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:32:25.263

`node-mongodb-native`为 Db 对象提供了一个关闭方法，您可以在完成后通过调用它来关闭连接。

```
var that = this;
this.db.open(function(){
    // do db work here

    // close the connection
    that.db.close();
}); 
```

如果您不关闭连接，事件循环会保持连接打开并且您的进程不会退出。如果您正在构建一个不会终止进程的 Web 服务器，则无需关闭连接。

`node-mongodb-native`可以在[https://github.com/mongodb/node-mongodb-native](https://github.com/mongodb/node-mongodb-native)上找到更好的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T23:12:37.520

请记住将 db.close 放在最后执行的回调中，以便在所有回调完成之前打开连接。否则，它会给出一个错误，例如

```
/usr/local/lib/node_modules/mongodb/lib/utils.js:97
    process.nextTick(function() { throw err; });
                                        ^
Error
    at Error.MongoError (/usr/local/lib/node_modules/mongodb/node_modules/mongodb-core/lib/error.js:13:17)
    at Server.destroy (/usr/local/lib/node_modules/mongodb/node_modules/mongodb-core/lib/topologies/server.js:629:47)
    at Server.close (/usr/local/lib/node_modules/mongodb/lib/server.js:344:17)
    at Db.close (/usr/local/lib/node_modules/mongodb/lib/db.js:267:19) 
```

# c# - 如何将csv文件保存到数据库中？

> ID：12364418
> 
> 赞同：-1
> 
> 时间：2012-09-11T07:03:35.253
> 
> 标签：c#, asp.net

我正在使用 C# 在 asp.net 中制作一个窗口应用程序。我想浏览和导入 .csv 文件并将其保存在数据库中。我已经完成了导入部分。现在，我应该如何将它保存在数据库中？我是这门语言的新手，所以请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:09:00.500

一旦有了文件上传机制（例如，使用 FileUpload 控件），只需遍历服务器上 CSV 文件中的行，使用现有的 CSV 阅读器将它们解析为字段（不要尝试编写您的除非您的数据完全微不足道，否则您将不会处理所有边缘情况），并且只需使用您选择的调用约定对您的数据库执行一堆 SQL INSERT 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:11:41.393

您可以使用 ADO.NET，您需要查找 Data Adapters 等。

如果您将电子表格导入数据表或数据集，您可以使用数据适配器使用 INSERT 命令填充数据库中的表。

查找[http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.aspx)

希望这可以帮助。

# twitter-bootstrap - 如何使用 Twitter Bootstrap 获得 2600 像素和 25 列宽的整洁表格？

> ID：12364419
> 
> 赞同：1
> 
> 时间：2012-09-11T07:03:36.720
> 
> 标签：twitter-bootstrap

我有一个有 25 列的表格，总共大约 2600 像素宽。

现在，我的结构如下所述 - 但它在该`content`区域之外流动，并且每列中的内容未正确对齐。事实上，应该在一行中的内容出现在每行的 2 或 3 上。它通常看起来不整洁。

我怀疑这是因为 Twitter Bootstrap 是为较小的数据集设计的——尤其是表格。

但是有没有人知道如何让这张桌子看起来不笨重？

```
<div class="container-fluid">
        <div class="content">
           <div class="row-fluid">
            <div class="span12">

              <h2>Home</h2>

<table class="table table-striped table-hover table-condensed">
  <thead>
    <tr>
      <th>Name</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Co. Name</th>
      <th>Co. Phone</th>
      <th>Co. Size</th>    
      <th>Co. Type</th>    
      <th>City</th>
      .
      .
      .    
    </tr>
  </thead>  

  <tr>
    <td>John F Kennedy</td>
    <td>87698765</td>
    <td>jfk@email.com</td>
     <!-- Begin Firm Info Here -->
        <td>Acme Inc</td>
        <td>(876) 987-6543</td>
       .
       .
       .
    </tr>
   </table>

      </div>
    </div>
  </div>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T07:48:46.913

为避免换行，您可以使用

```
.the-table {
    white-space: nowrap;
    max-width: none;
    width: auto;
} 
```

这将强制在容器上水平滚动`<table>`（或者如果该容器可以扩展，则在浏览器中）。所以，如果你想控制它的布局，你可以在`<table>`里面放一个`<div>`with`overflow: auto`和一个 set `width`。您可以使用带有额外类的 Bootstrap“跨度”：

```
.the-container {
    overflow: auto;
    /* width cames from spanN class */
} 
```

# servlets - 从 servlet 向 servlet 发送请求

> ID：12364420
> 
> 赞同：0
> 
> 时间：2012-09-11T07:03:39.107
> 
> 标签：servlets

这里的场景是，来自源 servlet 的请求向目标 servlet 发送对象请求。它似乎卡在发送到目的地

```
request.setAttribute("products", products);
RequestDispatcher dispatcher = request.getRequestDispatcher("/shop");
dispatcher.forward(request, response); 
```

我确实尝试过 dispatcher.include 甚至根本不工作。当我使用 response.sendRedirect() 时，请求发送良好。但是在这种情况下，我必须设置会话，我只想发送一个正常的请求，所以对此有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T06:09:16.243

如果您需要将请求从一个 servlet 转发到另一个 servlet，您只需提供 servlet 别名（您在 web.xml 文件中配置的名称）作为 request.dispatcher（servlet 的别名）的输入，无需提供“/”

```
like,

request.setAttribute("products", products);
RequestDispatcher dispatcher = request.getRequestDispatcher("shop");
dispatcher.forward(request, response); 
```

# java - document.applet.method 在 Mounatin Lion 上使用 safari 6 + JDK7 引发异常

> ID：12364421
> 
> 赞同：0
> 
> 时间：2012-09-11T07:03:49.203
> 
> 标签：java, javascript, applet, safari6

我想获取 Java 供应商和版本信息。

最近我在 mac mountain lion 和 document.MyApplet.getJavaVendor() 中安装了 java 1.7.0.7，当我运行下面的 HTML 文件时抛出异常（类型错误“未定义”不是函数），如下面的 safari 6 中所述。

但同样适用于 java 1.6.0.35。

在未加载小程序之前，它会抛出上面提到的异常，但是一旦加载了小程序，它应该会按预期获取信息。

**附加信息：**我什至尝试对 Firefox 做同样的事情，它在两个 JRE 上都可以正常工作。

小程序 HTML 代码：

```
<applet name="MyApplet" codebase = "./code/" archive="MyApplet.jar" code="MyApplet.class" width="1" height="1" style="border-width:0;" MAYSCRIPT=true>
    <PARAM NAME="type" VALUE="application/x-java-applet;version=1.4"/>
    <PARAM NAME="cache_option" VALUE="plugin"/>
    <PARAM NAME="cache_archive" VALUE="MyApplet.jar"/>
    <PARAM NAME="cache_version" VALUE="5.6.3.1"/>
    <PARAM NAME="scriptable" VALUE="true"/>
    <PARAM name="codebase_lookup" value="false"/>
</applet> 
```

Java脚本代码：

```
function verifyJRE() {

    try {
        var tmpVendor = document.MyApplet.getJavaVendor();
        var tmpVersion = document.MyApplet.getJavaVersion();

        var strJavaVendor = new String( tmpVendor);
        var strJavaVersion = new String( tmpVersion);

        if ( (strJavaVendor.indexOf("Apple") != -1) || (strJavaVendor.indexOf("Sun") != -1) || (strJavaVendor.indexOf("Oracle") != -1)) {
             // Do something;
        } else {
             // Do Something;                   }
    } catch (e) {
        iCount++;
        if (iCount < 10)
             // waiting for Applet to Load;
             setTimeout('verifyJRE()', 200);
        else {
             // logout from application;
    }
} 
```

小程序代码：

```
import java.applet.Applet;
import java.io.PrintStream;

public class MyApplet extends java.applet.Applet {

    private String strJavaVendor;
    private String strJavaVersion;

    public MyApplet() {
    }    

    public void init() {
        strJavaVendor = System.getProperty("java.vendor");
        strJavaVersion = System.getProperty("java.version");
    }

    public String getJavaVendor() {
        System.out.println(new StringBuilder("Java Vendor is: ").append(strJavaVendor).toString());
        return strJavaVendor;
    }

    public String getJavaVersion() {
        System.out.println(new StringBuilder("Java Version is: ").append(strJavaVersion).toString());
        return strJavaVersion;
    }
} 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:34:04.773

**Apple OSX 10.8.2**和**Safari 6.0.1**更新解决了问题

# sql - 每月获得另一个周末

> ID：12364423
> 
> 赞同：3
> 
> 时间：2012-09-11T07:03:51.820
> 
> 标签：sql, sql-server, sql-server-2008, linq-to-sql

我想检查一组日期值是否落在任何一个月的第一个或第三个或第五个星期一。如何在 SQL Server 2008 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:08:21.297

好的，这可以很容易地用几个条件来表达：

```
WHERE
    DATEPART(weekday,DateToCheck) = DATEPART(weekday,'20120910') AND
    (
        DATEPART(day,DateToCheck) between 1 and 7 OR
        DATEPART(day,DateToCheck) between 15 and 21 OR
        DATEPART(day,DateToCheck) between 29 and 31
    ) 
```

（我`DATEPART(weekday,...`按照上面的方法进行检查，这样我就不必知道服务器上的日期设置是什么——我只是根据“已知良好”星期一检查该值）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T07:46:46.913

尝试这个：

```
 SELECT  * 
 FROM    <your_table>
 WHERE   datename(weekday,<date_col>)='Monday'
 AND     DATEPART(day,<date_col>)/7 in (0,2,4) 
```

# html - 带有凭据的跨域请求不起作用

> ID：12364424
> 
> 赞同：1
> 
> 时间：2012-09-11T07:03:52.180
> 
> 标签：html, jquery

我正在开发一个身份验证网站，用于对来自 Web 服务的数据进行身份验证。我的网站在本地运行，并且 Web 服务在不同的域上运行，例如：test.abc.com。如果身份验证成功，则将响应存储在 cookie 中。

如果数据在 cookie 中可用且未过期，则在第二次调用中不要求身份验证，但需要从后端验证用户。为此，我使用下面的代码。

```
 $.ajax({
    url:"https://test.abc.com/test/DummyTest",              
    method:"GET",
    dataType:"json",
    beforeSend: function(xhr){
        xhr.withCredentials = true;
    },
    success:function(data){
        alert(Success);
    },
    error:function(xhr,err){
    alert("Error");
 }); 
```

我正在使用 jquery1.6

我检查了浏览器选项，cookie 与我的 localhost ip(160.225.230.50) 地址一起存储。但网络服务在不同的域（abc.com）。第二次访问时，我得到了错误响应。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:18:54.550

为此，您的身份验证页面应发送`Access-Control-Allow-Origin`和`Access-Control-Allow-Credentials`标题。

使用`Access-Control-Allow-Credentials: true`时不能设置`Access-Control-Allow-Origin`通配符，但需要指定来源：`Access-Control-Allow-Origin: https://abc.com`

此外，还有一种更简单的方法来设置 xhr 字段：

```
$.ajax({
  xhrFields: {
    withCredentials: true
  },
  type: 'POST',
  url: ...
}); 
```

# ios - ios 搜索栏在连接缓慢时移动到播放器的中心

> ID：12364425
> 
> 赞同：1
> 
> 时间：2012-09-11T07:04:03.337
> 
> 标签：ios, video-streaming, mpmovieplayercontroller

我正在播放直播内容。但是如果不是全屏模式，搜索栏会移动到播放器的中心。我观察到当网络连接速度较慢时会发生这种情况。有人对此有解决方案吗？

我想通知用户网络连接速度很慢。

```
self.movieController = [[[MPMoviePlayerController alloc]
        initWithContentURL: inURL] autorelease];
movieController.shouldAutoplay = YES;
[movieController play]; 
```

# html - 为什么更改 JSP 和 HTML 中的代码后结果还是一样？

> ID：12364428
> 
> 赞同：0
> 
> 时间：2012-09-11T07:04:10.930
> 
> 标签：html, sql, jsp, tomcat

我正在使用 JSP、HTML、SQL server 2005 和 Tomcat 服务器。我的问题是有时即使我更改代码，结果也会与以前相同。关闭所有内容后它保持不变，但如果我更改文件名，结果会更新。为什么会发生这种情况我真的不明白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:55:29.410

这也发生在我身上，主要是在从 IDE（例如 Eclipse）运行项目时，JSP 中的更改没有得到反映。

默认情况下，tomcat 在开发模式下启动，这意味着当检测到更改时重新编译 JSP 派生的 servlet。

Tomcat将JSP文件的修改日期与该JSP对应的编译类的修改时间进行比较，如果较新，则在执行之前重新动态编译。所以，这就是tomcat动态编译JSP的方式。

> 为什么会发生这种情况我真的不明白？

当您重命名 JSP 并运行时，它会找到新名称并将 JSP 编译为 servlet。

当您可能看不到较新版本的页面时，可能还有另一个原因是客户端缓存。简单地按 CTRL+R / CTRL+F5 或清除缓存通常有效。

在 JSP 中，您可以`<META HTTP-EQUIV="Pragma" CONTENT="no-cache">`向缓存页面添加 no。

PS虽然，我得到了你的问题，但我建议提供适当的描述。

# iphone - 检查 NSDictionary 是否可以存档后崩溃

> ID：12364433
> 
> 赞同：0
> 
> 时间：2012-09-11T07:04:28.480
> 
> 标签：iphone, objective-c, ios, xcode, nskeyedarchiver

我有以下代码来创建一个 NSDictionary ，然后在归档时检查它的所有值（和它本身）是否为 nil：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *openbook = [defaults objectForKey:@"OpenBookKey"];
NSString *book = [NSString stringWithFormat:@"UploadedWB%@", openbook];

Reachability *reachability = [Reachability reachabilityForInternetConnection];
NetworkStatus internetStatus = [reachability currentReachabilityStatus];
if (internetStatus != NotReachable) {

[activityIndicator setHidden:NO];
[activityIndicator startAnimating];

NSLog(@"Sending data to cloud");

NSInteger integer = [[defaults objectForKey:@"CurrentIndex"] integerValue];

NSArray *paths = NSSearchPathForDirectoriesInDomains
(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *fileName = [NSString stringWithFormat:@"%@/BVAuthors.txt",
                      documentsDirectory];

NSString *fileName1 = [NSString stringWithFormat:@"%@/BVImages.txt",
                      documentsDirectory];

NSString *fileName2 = [NSString stringWithFormat:@"%@/BVTitles.txt",
                       documentsDirectory];

NSMutableArray *authors = [NSMutableArray arrayWithContentsOfFile:fileName];
NSMutableArray *images = [NSMutableArray arrayWithContentsOfFile:fileName1];
NSMutableArray *titles = [NSMutableArray arrayWithContentsOfFile:fileName2];

NSString *author = [authors objectAtIndex:integer];
UIImage *image = [images objectAtIndex:integer];
NSString *title = [titles objectAtIndex:integer];

NSLog(@"Sending %@ by %@", title, author);

NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:_pages, @"pagesarray", _pagessavedbg, @"pagessavedbgarray", author, @"author", image, @"image", title, @"title", nil];

// NSLog(@"DICT: %@", dict);

if([NSKeyedArchiver archivedDataWithRootObject:dict] != NULL)
{

NSData *data = [NSKeyedArchiver archivedDataWithRootObject:dict];

NSLog(@"Here the data is used, but it crashes before this point");

}

else

{

  NSLog(@"This is never called :(");

}

} 
```

我总是崩溃`[NSKeyedArchiver archivedDataWithRootObject:dict] != NULL`并出现以下错误：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSArrayM: 0x1e8a8fd0> was mutated while being enumerated.'
*** First throw call stack:
(0x38e8c6c3 0x3b0a597f 0x38e8c1a5 0x3b1b0527 0x3b1b02b9 0x3b1af04f 0x3b1b0537 0x3b1ea455 0x3b1af04f 0x3b1ae8f5 0xcfeaf 0x3b24d6bd 0x388dc351 0x388dc218)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:08:21.497

你是在一个周期内这样做吗？（暂时或暂时？）。因为对于外观：

```
'*** Collection <__NSArrayM: 0x1e8a8fd0> was mutated while being enumerated.' 
```

似乎是这样。

# java - Android：片段如何获取Activity的全局变量

> ID：12364434
> 
> 赞同：37
> 
> 时间：2012-09-11T07:04:28.183
> 
> 标签：java, android, variables, android-fragments

我有一个带有全局变量 int x 的活动，片段如何获取其活动的变量 x 的当前值？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-09-11T07:05:28.620

将 var 设置为`public static`，或使用

```
((MyActivity)getActivity()).getX() 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-11T11:24:12.987

使用公共静态变量并不是在活动和片段之间进行通信的最佳方式。查看[此答案](https://stackoverflow.com/a/20521851/3681880)以了解其他方式：

[Android 文档](http://developer.android.com/training/basics/fragments/communicating.html)建议在Fragment 想要与 Activity 通信时使用接口。当 Activity 想要与 Fragment 通信时，Activity 应该获取对 Fragment 的引用（使用[findFragmentById](http://developer.android.com/reference/android/support/v4/app/FragmentManager.html#findFragmentById%28int%29)），然后调用 Fragment 的公共方法。

这样做的原因是片段与它们所在的活动分离。它们可以在任何活动中重用。如果您从片段中直接访问父 Activity 或其全局变量之一，您将无法再在不同的 Activity 中使用该片段。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-06-19T11:27:25.383

**科特林版本**：

```
(activity as MyActivity).x 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-04T06:34:09.057

```
***In your Activity
==================
Bundle args = new Bundle();
args.putInt("something", Whatever you want to pass);
fragA.setArguments(args);

In your Fragment
==================
 Bundle args = getArguments();
//whatever you want to get ,get it here.
//for example integer given     
    int index = args.getInt("index", 0); 
```

# birt - Birt 报告多参数

> ID：12364440
> 
> 赞同：2
> 
> 时间：2012-09-11T07:04:57.443
> 
> 标签：birt

目前我正在使用 Birt Report 从我的系统生成报告。我正在使用输入参数将参数从我的系统发送到 Birt Report。问题是当我试图从我的系统发送多个参数时。

示例：Birt Report 中一个参数的 SQL 语句

```
select column1 from table1 where column2 = ? 
```

当我将此查询用于一个参数时，它可以工作。

我现在想要达到的目标，

```
select column1 from table1 where column2 = ? AND column1 = ? 
```

我试过这样的SQL

```
select column1 from table1 where column2 = params["column2"].value AND column1 = params["column1"].value 
```

我已经在数据集和报告参数处创建了参数，但它仍然无法工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:45:00.000

如果您有一个或多个参数，则没有区别。在“编辑数据集”对话框中，将您的查询添加到“查询”部分，`?` 然后切换到“参数”部分并​​使用“默认值”`params["prmName"].value`或更简单的“链接到报告参数”添加参数`prmName`

例如你的例子

询问

```
select column1 from table1 where column2 = ? AND column1 = ? 
```

参数

```
Name      Data Type     Direction     Default Value       Linked To Report Parameter  
column2   Decimal       Input                             column2
column1   Decimal       Input                             column1 
```

您可以上下移动参数。参数`?`按此顺序与您的查询中的 相匹配。名字无关...

# java - android/java中的校验和计算

> ID：12364445
> 
> 赞同：8
> 
> 时间：2012-09-11T07:05:10.543
> 
> 标签：java, android

我在android/java中写了一个校验和计算函数。功能如下

```
void CalculateCheckSum( byte[] bytes ){
     short CheckSum = 0, i = 0;
     for( i = 0; i < bytes.length; i++ ){
        CheckSum = (short) ((short)CheckSum + (short)bytes[i]);
     }

     Log.i("Checksum", Integer.toHexString(CheckSum));
} 
```

用于计算校验和的输入值为 0xEF、0x01、0xEF、0x01、0x33、0x0C、0xB8、0xE5、0xFC、0x34、0xFF、0xFF、0xFF、0xFF、0xFF、0xFF、0xFF、0xFF。我手动计算了校验和值，结果是 0xCE4。使用上述函数时，我得到的答案为 0xFFFFFFE4。我的计算是否有任何错误，如果是，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:31:34.817

使用调试器并调试您的代码。不过，一般来说，如果你不断地添加东西，即使你使用 an`int`或 a `long`，它也一定会在某些时候溢出，所以你会得到意想不到的结果。最好使用标准校验和算法或已经可用的类之一，例如`CRC32`或`Adler31`。至于您的代码，您似乎将结果视为整数，那么为什么`short`首先要转换为？

`int`Java 使用's进行所有算术计算，因此您`byte`的 s 被转换为`int`不适合字节的那些将看起来像`int`'s: `ffffffef`(-17)。自然，您只需要实际的字节值，因此您需要使用`(0xff & b)`. 所以你的循环比变成这样：

```
 int checkSum = 0;

  for(byte b : bytes){
    checkSum += (0xff & b);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T07:57:26.297

这里的问题是`(short)`演员阵容`bytes[i]`。它扩展了标志。您应该更改`(short)bytes[i]`为`(bytes[i] & 0xff)`. 这会给你正确的答案。

与大多数其他答案相反，它与字节溢出无关。您也不必更改数组类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:45:28.763

正如 aprian 上面提到的，虽然 byte 具有十六进制值所需的 8 位，但它只能存储 -128 到 127 之间的值。因此，在这种情况下，一个快速简单的解决方案是使用下一个更大的原语`short`。

```
short shorts[] = {0xEF, 0x01, 0xEF, 0x01, 0x33, 0x0C, 0xB8, 0xE5, 0xFC, 0x34, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};

int checkSum = 0;

for( short s : shorts){
    checkSum = checkSum + s;
}

System.out.println("Checksum: " + Integer.toHexString(checkSum)); 
```

这给了我输出：

```
Checksum: ce4 
```

当然，这意味着您可能必须`byte array`事先进行转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T07:25:22.553

`byte`根据[Java Docs](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Byte.html) ：

> 一个字节的值介于`2^(-7)`和`(2^7)-1`（-128 到 127）之间。

但是您的值`0xEF`（十进制 239）已经达到一个字节的限制。这就是总和给出错误数字的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T08:01:19.897

最后我得到了...

更正的代码

```
void CalculateCheckSum( byte[] bytes ){
         short CheckSum = 0, i = 0;
         for( i = 0; i < bytes.length; i++){
              CheckSum += (short)(bytes[i] & 0xFF);
         }
         Log.i("Checksum", Integer.toHexString(CheckSum));
    } 
```

感谢aprian和其他人

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-11T07:37:56.530

如果使用以下方法转换整数，则应使用整数作为输入：

```
 String CalculateCheckSum( Integer[] bytes ){
        Integer CheckSum = 0, i = 0;
        for( i = 0; i < bytes.length; i++ ){
            CheckSum += bytes[i];
        }
        return Integer.toHexString(CheckSum);
    } 
```

这将返回预期的 0xCE4 希望这解决了您的问题

# php - 使用 DOM php 解析事件属性

> ID：12364450
> 
> 赞同：-2
> 
> 时间：2012-09-11T07:05:18.307
> 
> 标签：php, dom

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我想知道我们如何使用 DOM php 解析事件属性？例如

```
<body onload="javascript:PopWin('http://google.com')"> 
```

我需要获取 onload 事件属性中的链接。是否可以？

不使用 preg_match 并解析整个 html。使用 DOMDocument，我们可以使用 getAttribute('src') 或 getAttribute('href') 获取所有其他属性，如“src”、“href”等。有没有类似的方法来获取事件属性？应捕获“onload”事件中出现的任何链接

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:29:37.710

DOM php API 中没有任何方法可以为您提供`onload`属性中的 URL，因此您必须使用我在下面建议的方法（或类似方法）。但首先获取属性：

```
$body = "<body onload=\"javascript:PopWin('http://google.com')\"></body>";

$doc = new DOMDocument(); 
$doc->loadHTML($body);

$bodyElements = $doc->getElementsByTagName("body"); 
$body = $bodyElements->item(0);

$attribute = $body->getAttribute('onload');

echo $attribute; // outputs: javascript:PopWin('https://google.com') 
```

一旦你得到了，你可以使用一个简单的正则表达式来提取 URL：

```
(?:.+?)(https?://[\w\d.&?=]+)(?:.+?) 
```

像这样：

```
$mathes = array();
preg_match('`(?:.+?)(?<url>https?://[\w\d.&?=]+)(?:.+?)`', $attribute, $matches);

echo $matches['url']; // outputs https://google.com 
```

# php - 使用相同的代码 apache 在单个 ip 上托管多个站点

> ID：12364451
> 
> 赞同：0
> 
> 时间：2012-09-11T07:05:21.387
> 
> 标签：php, apache, web-hosting

其实我有一个关于网络托管的想法。问题是我有两个不同的游戏网站，它们托管在单个 IP 但不同的代码上。代码也是一样的。意味着我为不同的网站创建了 2 个数据库和 2 个 FTP。两个站点的目录结构和内容相同。

在这里我有一个疑问，我可以使用相同的 FTP 来托管许多网站。就像我添加任何内容一样，添加的内容应该反映在所有网站中。是否可以通过 Apache 托管网站。因为对于每个网站，如果我上传内容，所有网站的磁盘空间使用都会占用更多空间。任何人都可以建议我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:12:30.080

请阅读这篇关于域重定向的博文：

[http://www.site5.com/blog/apache/htaccess/redirect-to-blog/20090427/](http://www.site5.com/blog/apache/htaccess/redirect-to-blog/20090427/)

您可以在主机上创建 2 个子文件夹，然后让 .htaccess 重定向到正确的文件夹。

# clojure - 如何在 mustache / ring 中定义公共路由或后续路由

> ID：12364456
> 
> 赞同：0
> 
> 时间：2012-09-11T07:05:27.580
> 
> 标签：clojure, ring

我有两条小胡子路由，基本上是*[http://localhost](http://localhost)*和*http:localhost/*路由，它们指向相同的功能 -

```
[""]  (-> (index) response constantly)
["/"] (-> (index) response constantly) 
```

我如何能 -

1.  是否可以同时指定这两条路线，例如 ["" "/"]，因为它们彼此跟随？
2.  是否可以从一个路由重定向到另一个 ex [""] (redirect "/") ？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:13:14.013

路由是一个处理程序，只是一个函数。你可以使用`ring.util.response/redirect`

# java - 带有协议缓冲区的 JAX-RS 教程应用程序

> ID：12364463
> 
> 赞同：2
> 
> 时间：2012-09-11T07:05:59.570
> 
> 标签：java, rest, jersey, protocol-buffers, grizzly

我正在研究 REST 和协议缓冲区 atm。因此，我找到了创建示例应用程序的 [this][1] 教程

不幸的是，我遇到了要导入的库的问题，我无法解决：

在这一行：

```
return GrizzlyServerFactory.create(uri, initParams); 
```

我收到语法错误：

```
The method create(URI, ResourceConfig) in the type
GrizzlyServerFactory is not applicable for the arguments (URI,
Map<String,String>) 
```

GrizzlyServerFactory 在我导入的这个库中：

```
import com.sun.jersey.api.container.grizzly.GrizzlyServerFactory; 
```

作为参考，我将整个课程粘贴在这里：

```
package com.sampullara.jaxrsprotobuf.tutorial;

import java.io.IOException;
import java.net.URI;
import java.util.HashMap;
import java.util.Map;

import javax.ws.rs.core.UriBuilder;

import com.sun.grizzly.http.SelectorThread;
import com.sun.jersey.api.container.grizzly.GrizzlyServerFactory;
import com.sun.jersey.api.core.ResourceConfig;

public class Main {
    public static final URI BASE_URI = UriBuilder.fromUri("http://localhost/").port(9998).build();

    public static void main(String[] args) throws IOException {
        System.out.println("Starting grizzly...");
        URI uri = BASE_URI;
        SelectorThread threadSelector = createServer(uri);
        System.out.println(String.format("Try out %sperson\nHit enter to stop it...", uri));
        System.in.read();
        threadSelector.stopEndpoint();
    }

    public static SelectorThread createServer(URI uri) throws IOException {
        Map<String, String> initParams = new HashMap<String, String>();
        initParams.put("com.sun.jersey.config.property.packages", "com.sampullara");

        // error happens in next line - constructor doesnt exist with the given parameters
        return GrizzlyServerFactory.create(uri, initParams);
    }
} 
```

编辑1：

我修改了代码，但仍然无法正常工作：

```
public static SelectorThread createServer(URI uri) throws IOException {
    //Map<String, String> initParams = new HashMap<String, String>();
    //initParams.put("com.sun.jersey.config.property.packages", "com.sampullara");
    // original code: return GrizzlyServerFactory.create(uri, initParams);

    DefaultResourceConfig rscfg = new DefaultResourceConfig();
    return GrizzlyServerFactory.create( uri , rscfg );
} 
```

Eclipse 向我抛出以下运行时错误：

> SCHWERWIEGEND：ResourceConfig 实例不包含任何根资源类。线程“main”com.sun.jersey.api.container.ContainerException 中的异常：ResourceConfig 实例不包含任何根资源类。在 com.sun.jersey.server.impl.application.RootResourceUriRules.(RootResourceUriRules.java:99) 在 com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1300) 在 com.sun。 jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:163) 在 com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:769) 在 com.sun.jersey。 server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:765) 在 com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193) 在 com.sun。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:10:05.513

[`GrizzlyServerFactory.create`](http://jersey.java.net/nonav/apidocs/1.1.5/jersey/com/sun/jersey/api/container/grizzly/GrizzlyServerFactory.html#create%28java.net.URI,%20com.sun.jersey.api.core.ResourceConfig%29)接受两个参数：

1.  `java.net.URI`
2.  [`com.sun.jersey.api.core.ResourceConfig`](http://jersey.java.net/nonav/apidocs/1.1.5/jersey/com/sun/jersey/api/core/ResourceConfig.html)

用作`Map<String, String>`第二个参数是错误的。

有关处理. [_](https://stackoverflow.com/questions/9306198/publishing-jersey-service-instance-to-grizzly)`GrizzlyServerFactory`

# firefox - Chrome 自动保存扩展 - Firefox 替代品？

> ID：12364464
> 
> 赞同：1
> 
> 时间：2012-09-11T07:06:05.360
> 
> 标签：firefox, google-chrome, save, autosave

我刚刚看到了那个扩展，我几乎爱上了。作为一个对 css 知识最少的人，我厌倦了发送垃圾邮件 CTRL + S、alt 选项卡、检查浏览器、alt 选项卡返回 IDE 并继续开发/设计循环。

Firefox 上 Chrome 的自动保存扩展是否有任何替代方案？我不想为了它放弃我多年心爱的 Firefox。

如果 Firefox 上不存在这样的扩展，我也愿意接受第三方工具的想法。基本上，我想直接从 Firefox Developer Tool 编辑我的 CSS/Javascript 文件以即时查看结果，最重要的是，我希望它能够自动保存它们。（或者按 CTRL + S，因为这是我们多年来都习惯做的事情）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:51:55.140

CSS 更新器

[http://www.cssupdater.com](http://www.cssupdater.com)

# ant - 通过调用 shell 脚本设置 ant 属性？

> ID：12364467
> 
> 赞同：7
> 
> 时间：2012-09-11T07:06:27.187
> 
> 标签：ant, properties

有没有办法通过捕获 shellscript 的输出来设置 ant 属性？（或其他蚂蚁任务）

像这样的东西：

```
<property name="foo">
    <value>
        <exec executable="bar" />
    </value>
</property> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T08:22:32.520

从[ANT 执行任务](http://ant.apache.org/manual/Tasks/exec.html)

1.  设置`output`属性：*要写入输出的文件的名称。*
2.  正如 Marble 所建议的那样 - 设置`outputproperty`

当我测试它们时，它们是相互排斥的。所以一次只设置其中的一个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-11T07:09:02.033

似乎 exec 任务有一个 outputproperty-property，如下所示：

```
<exec executable="bar" outputproperty="foo" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-24T15:16:51.953

为了扩展@Nim 的答案，可以使用`arg`标签生成复杂的命令：

```
<exec executable="/usr/bin/git" outputproperty="git.branch">
  <arg value="rev-parse"/>
  <arg value="--abbrev-ref"/>
  <arg value="HEAD"/>
</exec> 
```

这可以稍后引用，例如：

```
<attribute name="Git-Branch" value="${git.branch}"/> 
```

# javascript - 如何从“.js”文件运行 url？

> ID：12364472
> 
> 赞同：1
> 
> 时间：2012-09-11T07:06:54.953
> 
> 标签：javascript, asp.net-mvc

环境：Visual Studio 2012、MVC4、Razor、Internet 应用程序。我正在使用 eBay API，我想显示搜索结果 (JSON)。我有一个带有代码的视图页面...

```
<script>
function _cb_findItemsByKeywords(root)
{
  var items = root.findItemsByKeywordsResponse[0].searchResult[0].item || [];
  var html = [];
  html.push('<table width="100%" border="0" cellspacing="0" cellpadding="3"><tbody>');

  for (var i = 0; i < items.length; ++i)  
  {
    var item     = items[i];
    var title    = item.title;
    var pic      = item.galleryURL;
    var viewitem = item.viewItemURL;

    if (null != title && null != viewitem)
    {
      html.push('<tr><td>' + '<img src="' + pic + '" border="0">' + '</td>' + 
        '<td><a href="' + viewitem + '" target="_blank">' + title + '</a></td></tr>');
    }
  }
  html.push('</tbody></table>');
  document.getElementById("results").innerHTML = html.join("");
}
</script> 
```

“.js”文件中的这一行：

```
var url = "http://ebay.com?..." 
```

打开此查看页面时，如何自动从“.js”文件执行此 url？（此 url 向 Ebay 服务器发送请求并接收数据，将显示在此查看页面上。）

我会稍微改变一个问题...如果我从“查看”页面运行此代码，一切正常：

```
<script src=http://ebay.com?... </script> 
```

如何从“.js”文件中接收这部分（“http://ebay.com?...”作为变量）？可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:12:30.613

例如，如果您只想发送请求，则可以将图像添加到 DOM 中`src`。

如果您想从请求中接收数据，您将不得不进行 AJAX 调用。这在不同浏览器中的处理方式完全不同，因此使用框架（例如 jQuery）是一个好主意。

但是，由于 URL 与您的域不同，因此您将无法通过常规 AJAX 请求访问它。您必须参考所谓的 JSONP 请求。这要求您获取的文档以特定方式格式化以允许这样做。[如果不是，由于Same-Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)，JavaScript 根本不会允许这种交互。

JSONP 要求远程文档具有以下格式：

```
someCallbackFunction(javaScriptObjectWithData); 
```

如果是这样，您将能够将该 URL 作为 DOM 包含一个脚本文件，`src`该文档的内容一旦获取，将立即在您的浏览器中执行。那时您应该已经指定了一个名称与文档中正在进行的回调匹配的回调函数（这通常是您可以通过原始请求中的查询字符串指定的内容）。

如果由于远程文档的格式，这些选项都对您不可用，那么您将不得不从服务器端请求文档。如果您自己无权访问服务器端环境，为了做到这一点，可以选择使用其他人的服务器。Yahoo 的自定义查询语言——YQL——可用于查询远程文档的内容，而 YQL*可*通过 JSONP 获得，因此您可以通过它们转发您的请求。

[请参阅这篇关于将 YQL 与 JSONP 结合使用的帖子](http://james.padolsey.com/javascript/using-yql-with-jsonp)

* * *

更新，现在您已经添加了更多数据，[eBay API 可用于 JSONP](http://developer.ebay.com/devzone/finding/howto/gettingstarted_js_nv_json/gettingstarted_js_nv_json.html)，我认为这就是您正在寻找的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:35:07.847

解决...

```
<script src="/Scripts/ebay.js" type="text/javascript"></script>
<script>
    s = document.createElement( 'script' );
    s.src = url;
    document.body.appendChild( s );
</script> 
```

# ruby-on-rails - 通过 CloudFront 提供 CSS 文件时出错，直接从源端正常工作

> ID：12364473
> 
> 赞同：1
> 
> 时间：2012-09-11T07:06:57.000
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, amazon-cloudfront

我正在通过自定义域 www.shmocket.com 在 Heroku 上运行 Rails 3.2 应用程序。我使用 www.shmocket.com 作为唯一来源设置了 CloudFront 分配。它的备用域名是`cdn.shmocket.com`，它被简单地配置为 CloudFront 分配 URL 的 CNAME `d3n87gn5nko8eq.cloudfront.net`。

当我通过 CloudFront 请求资产时，Rails 应用程序给我一个错误：

```
> curl http://cdn.shmocket.com/assets/application-dce210940d2cd3c699c4809800ae2f0b.css

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
  <HEAD><TITLE>Internal Server Error</TITLE></HEAD>
  <BODY>
    <H1>Internal Server Error</H1>
    undefined method `each' for nil:NilClass
    <HR>
    <ADDRESS>
     WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at
     www.shmocket.com:80
    </ADDRESS>
  </BODY>
</HTML>
curl: (18) transfer closed with 100318 bytes remaining to read 
```

在 Rails 日志文件中：

```
2012-09-11T06:53:28+00:00 app[web.1]: [2012-09-11 06:53:28] ERROR NoMethodError: undefined method `each' for nil:NilClass
2012-09-11T06:53:28+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:71:in `service'
2012-09-11T06:53:28+00:00 app[web.1]:   /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
2012-09-11T06:53:28+00:00 app[web.1]:   /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
2012-09-11T06:53:28+00:00 app[web.1]:   /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
2012-09-11T06:53:28+00:00 heroku[router]: GET www.shmocket.com/assets/application-dce210940d2cd3c699c4809800ae2f0b.css dyno=web.1 queue=0 wait=0ms service=18ms status=500 bytes=325 
```

直接访问[http://www.shmocket.com/assets/application-dce210940d2cd3c699c4809800ae2f0b.css](http://www.shmocket.com/assets/application-dce210940d2cd3c699c4809800ae2f0b.css)可以正常工作。

使用真正的CloudFront域时也会出现同样的错误，即[http://d3n87gn5nko8eq.cloudfront.net/assets/application-dce210940d2cd3c699c4809800ae2f0b.css](http://d3n87gn5nko8eq.cloudfront.net/assets/application-dce210940d2cd3c699c4809800ae2f0b.css)

CloudFront 配置：

[http://screencast.com/t/A62AKBGX](http://screencast.com/t/A62AKBGX)
[http://screencast.com/t/u9Grgj5i](http://screencast.com/t/u9Grgj5i)
[http://screencast.com/t/vzRduwxor50v](http://screencast.com/t/vzRduwxor50v)

老实说，我很困惑，根本不知道是什么原因造成的。我怀疑我忽略了一些明显的东西......

任何建议表示赞赏...

编辑：

有人建议某些中间件对 CloudFront 发送的标头做出奇怪的反应。我没有手动包含任何中间件并检查了使用的宝石列表，我也看不到任何东西：

```
source :rubygems

ruby '1.9.3'

gem 'rails', '~> 3.2.8'
gem 'haml', '~> 3.2.0.beta.3'
gem 'jquery-rails', '2.0.2'
gem 'slim_migrations', '~> 3.2.1'
gem 'redis', '~> 2.2.2'
gem 'redis-rails', '~> 3.2.3'
gem 'memoizer', '~> 1.0.1'
gem 'marginalia', '~> 1.1.0'
gem 'awesome_print', '~> 1.0.2'
gem 'log_buddy', '~> 0.7.0'
gem 'squeel', '~> 1.0.9'
gem 'airbrake', '~> 3.1.2'
gem 'httparty', '~> 0.8.3'
gem 'ember-rails', '~> 0.7.0'

group :assets do
  gem 'oily_png', '~> 1.0.2'
  gem 'bootstrap-sass', github: 'dszczyt/bootstrap-sass'
  gem 'font_awesome', '~> 2.0.0'
  gem 'sass-rails', '~> 3.2.5'
  gem 'compass-rails', '~> 1.0.3'
  gem 'coffee-rails', '~> 3.2.2'
  gem 'uglifier', '~> 1.2.7'
end

group :development do
  gem 'heroku', '~> 2.30.5'
  gem 'annotate', '~> 2.5.0'
  gem 'foreman', '~> 0.57.0'
  gem 'quiet_assets', '~> 1.0.1'
  gem 'sextant', '~> 0.1.3'
  gem 'right_aws', '~> 3.0.4'
end

group :development, :test do
  gem 'mysql2', '~> 0.3.12b4'
end

group :production do
  gem 'pg', '~> 0.14.0'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T06:50:45.467

看起来这是一个带有 Heroku 的 Rack::Cache + Dalli gem
[https://github.com/rails/rails/issues/8366的问题](https://github.com/rails/rails/issues/8366)

禁用 Rack::Cache 从 production.rb 中加载解决了这个问题：

```
config.action_dispatch.rack_cache = nil 
```

# php - .text() jquery 函数从月份中删除前导零

> ID：12364476
> 
> 赞同：1
> 
> 时间：2012-09-11T07:07:28.823
> 
> 标签：php, jquery, date, concatenation, zero

我正在生成一个参考号，使用`jQuery`并`Php`包含：一个静态字符串、一个动态字母、月份和年份中的日期以及自动生成的 ID。

我将这四个元素连接起来，如下所示。

```
$("#refno").text("ABC" + str + <?php echo date('Y') ?>  + <?php echo date('m')?>  + <?php echo $id -> id + 1; ?>); 
```

`str`是动态字母，通过从下拉列表中选择来设置。我需要以`mm`例如格式输出月份`09 for September`。

挑战是，该月中的前导零在生成的参考编号中被截断。例如，而不是`ABCR20120923`我得到`ABCR2012923`. 然而，当我`echo date('m')` 09 输出。

虽然我可以选择将`if statement`零连接到单个字符月份，但我想了解为什么`zero`会被截断以及如何显示它。

谢谢。帮助赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:11:11.247

09 本身被视为整数 - 前导零的数字没有意义。

```
$("#refno").text("ABC" + str + <?php echo date('Y') ?>  + "<?php echo date('m')?>"  + <?php echo $id -> id + 1; ?>); 
```

添加引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:13:13.983

尝试将您的月份作为字符串而不是数字传递

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:14:38.677

将您的内容存储在一个变量中并进行零填充（zfill），看看这个，

[如何在 JavaScript 中输出带有前导零的整数](https://stackoverflow.com/questions/2998784/how-to-output-integers-with-leading-zeros-in-javascript)

# php - Magento 从 adminthtml 页面重定向到前端操作

> ID：12364478
> 
> 赞同：2
> 
> 时间：2012-09-11T07:07:40.457
> 
> 标签：php, magento, redirect, observer-pattern, magento-1.7

在[这篇文章](http://inchoo.net/ecommerce/magento/dispatching-before-and-after-events-to-magento-core-actions/)之后，我终于设法通过扩展`Magento_Adminhtml_Controller_Action`并在它之前执行一些操作来捕获一个事件。但现在我正在尝试改进它，以便我可以捕获在管理面板上触发的另一个事件，并从那里将一个数组通过`request`变量传递给前端的另一个事件。我有这些 SO 问题/答案，[在这里](https://stackoverflow.com/questions/12265714/redirecting-from-admin-page-to-a-postaction-on-frontend)和[这里，](https://stackoverflow.com/questions/9749005/magento-redirect-customer-from-observer-method)但我无法实现我所需要的。我已经测试了`observer code`使用`die()`以确保执行线程进入正确的调用并且没问题。我正在使用 AlanStorm 的 CommerceBug，以防它可以用来解决这个问题。

这是我的 Observer.php 代码。

```
<?php
class Dts_Videotestimonials_Model_Observer {

    public function hookToAdminhtmlControllerActionPreDispatch($observer)
    {
        if($observer->getEvent()->getControllerAction()->getFullActionName() == 'videotestimonials_adminhtml_videotestimonialsbackend_post')
        {
            // dispatching our own event before action upload video is run and sending parameters we need
            Mage::dispatchEvent("upload_video_before", array('request' => $observer->getControllerAction()->getRequest()));
        }
    }

    public function hookToUploadVideoBefore($observer)
    {
        //Hooking to our own event
        $request = $observer->getEvent()->getRequest()->getParams();
        // do something with product

        $user = Mage::getSingleton('admin/session');
        $userName = $user->getUser()->getFirstname();
        $userEmail = $user->getUser()->getEmail();

        $request['product_id'] = "16"; #$_product->getId(),
        $request['author_email'] = $userEmail;
        $request['author_name'] = $userName;
        $request['video_link'] = "http://www.youtube.com/watch?v=y435u6kfExA&feature=youtube_gdata_player";
        $request['video_type']  = "link";
        $request['title'] = "AT&T Phone Nokia 2610";
        $request['comment'] = "this is a comment";
        Mage::dispatchEvent("vidtest_youtube_post", $request);
    }
} 
```

**编辑：**

这是完整的 config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Dts_Videotestimonials>
            <version>0.1.0</version>
        </Dts_Videotestimonials>
    </modules>
    <global>
        <models>
          <videotestimonials>
            <class>Dts_Videotestimonials_Model</class>
            <resourceModel>videotestimonials_mysql4</resourceModel>
          </videotestimonials>
        </models>
        <events>
            <controller_action_predispatch>
                <observers>
                    <controller_action_before>
                        <type>singleton</type>
                        <class>videotestimonials/observer</class>
                        <method>hookToAdminhtmlControllerActionPreDispatch</method>
                    </controller_action_before>
                </observers>
            </controller_action_predispatch>
            <upload_video_before>
                <observers>
                    <upload_video_before>
                        <type>singleton</type>
                        <class>videotestimonials/observer</class>
                        <method>hookToUploadVideoBefore</method>
                    </upload_video_before>
                </observers>
            </upload_video_before>
        </events>
        <helpers>
            <videotestimonials>
                <class>Dts_Videotestimonials_Helper</class>
            </videotestimonials>
        </helpers>
        <blocks>
          <videotestimonials>
            <class>Dts_Videotestimonials_Block</class>
          </videotestimonials>
        </blocks>
    </global>
    <admin>
        <routers>
          <videotestimonials>
            <use>admin</use>
            <args>
              <module>Dts_Videotestimonials</module>
              <frontName>videotestimonials</frontName>
            </args>
          </videotestimonials>
        </routers>
    </admin>
    <adminhtml>
        <menu>
          <videotestimonials module="videotestimonials">
            <title>Videotestimonials</title>
            <sort_order>100</sort_order>
            <children>
              <videotestimonialsbackend module="videotestimonials">
                <title>VideoTestimonials_Admin</title>
                <sort_order>0</sort_order>
                <action>videotestimonials/adminhtml_videotestimonialsbackend</action>
              </videotestimonialsbackend>
              <pending_video translate="title">
                  <title>Videos pendientes</title>
                  <sort_order>20</sort_order>
                  <action>videotestimonials/adminhtml_pendingvideos/pending</action>
              </pending_video>          
            </children>
          </videotestimonials>
        </menu>
        <acl>
          <resources>
            <all>
              <title>Allow Everything</title>
            </all>
            <admin>
              <children>
                <videotestimonials translate="title" module="videotestimonials">
                  <title>Videotestimonials</title>
                  <sort_order>1000</sort_order>
                  <children>
                    <videotestimonialsbackend translate="title">
                        <title>VideoTestimonials_Admin</title>
                    </videotestimonialsbackend>
                    <pending_video translate="title">
                      <title>Videos pendientes</title>
                      <sort_order>20</sort_order>
                    </pending_video>
                  </children>
                </videotestimonials>
              </children>
            </admin>
          </resources>
        </acl>
        <layout>
          <updates>
            <videotestimonials>
              <file>videotestimonials.xml</file>
            </videotestimonials>
          </updates>
        </layout>
    </adminhtml>
    <crontab>
        <jobs>            
            <videotestimonials_videotestimonialscron>
                <schedule><cron_expr>59 0 * */1 0</cron_expr></schedule>
                <run><model>videotestimonials/cron::VideoTestimonialscron</model></run>
            </videotestimonials_videotestimonialscron>
        </jobs>
    </crontab>
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T14:58:25.973

这是正在发生的事情。您的管理控制器配置错误。将控制器包含在管理部分的正确方法是这样（您需要更改模块名称以匹配您的）：

```
<?xml version="1.0" ?>

<config>
    <modules>
        <Video_Awesome>
            <version>0.0.1</version>
        </Video_Awesome>
    </modules>
    <global>
        <models>
            <Video_Awesome>
                <class>Video_Awesome_Model</class>
                <!-- No resource model used currently -->
            </Video_Awesome>
        </models>
        <events>
            <controller_action_predispatch>
                <observers>
                    <controller_action_before>
                        <type>singleton</type>
                        <class>Video_Awesome/Observer</class>
                        <method>controllerActionPredispatch</method>
                    </controller_action_before>
                </observers>
            </controller_action_predispatch>
            <upload_video_before>
                <observers>
                    <Video_Awesome>
                        <type>singleton</type>
                        <class>Video_Awesome/Observer</class>
                        <method>uploadVideoBefore</method>
                    </Video_Awesome>
                </observers>
            </upload_video_before>
        </events>
    </global>

    <admin>
        <routers>
            <adminhtml>
            <!-- we are not creating our own router, but tapping into the adminhtml router -->
                <args>
                    <modules>
                        <!-- Your module name, and then
                        the path to the controller (minus
                        the controllers folder name). So,
                        in this instance, I put the router
                        in a "Adminhtml" folder inside of
                        the controllers folder, like thus:
        Video/Awesome/controllers/Adminhtml/videotestimonialsController.php -->
                        <Video_Awesome before="Mage_Adminhtml">Video_Awesome_Adminhtml</Video_Awesome>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
</config> 
```

`getEvent`然后，在您的路由器中（在获取控制器操作之前您不需要调用）：

```
public function controllerActionPredispatch ($observer)
{
    if($observer->getControllerAction()->getFullActionName() == 'adminhtml_videotestimonials_post') {
        // dispatching our own event before action upload video is run and sending parameters we need
    Mage::dispatchEvent("upload_video_before", array('request' => $observer->getControllerAction()->getRequest()));
    }
} 
```

最后，听起来好像您没有针对 Magento 开发的调试设置。我强烈推荐一个。我使用 PHPStorm（我在公司中没有任何股份 - 这不是广告 :)，而且效果非常好。在那里设置一个断点，看看变量是什么。

我还建议使用`adminhtml_controller_action_predispatch_start`, 而不是 global `controller_action_predispatch`，因为它只会在后端触发（性能差异非常非常小）。

另外，作为一个小旁注，我在您的 中看到，您`config.xml`在那里指定了菜单项/acl。你可能不知道，但那是不推荐使用的功能，那些项目应该放在它`adminhtml.xml`.

# c# - 跟踪 ADO.Net 的使用情况？

> ID：12364481
> 
> 赞同：0
> 
> 时间：2012-09-11T07:07:56.010
> 
> 标签：c#, ado.net

是否可以在没有后编译技术的情况下跟踪我的应用程序使用的库对 ADO.Net 的使用情况？

当所有 ADO.Net 对象都是库的私有对象时，以及当存在我可以从外部访问的 ADO.Net 对象时，我都感兴趣。

这些库是控制自己的数据库连接的第三方库。这不是我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:55:57.390

不切实际的建议，但您能否在 TCP 级别代理与数据库服务器的连接，并以这种方式计算统计信息？

即实现一个 TCP 服务器，它在 TCP 端口 1433 上侦听来自您的应用程序的连接，连接字符串被更改为指向您的代理而不是服务器。收到后，打开到原始 SQL Server 的 TCP 连接，并在应用程序和服务器之间透明地传递流量。这使您有机会记录连接数、传输的数据、连接持续时间等统计信息。

或者，仅使用 Wireshark 之类的工具分析被测 TCP 流量是否就足够了？

# php - 在 MySQL 中使用链接动态排序

> ID：12364482
> 
> 赞同：0
> 
> 时间：2012-09-11T07:07:57.053
> 
> 标签：php, mysql, html, sorting

我有一个 MySQL 查询，我试图在单击链接时动态排序。

我的链接看起来像这样

```
 <form action="topics.php" method="get" class="form">
                   <label class="label">Order Table By</label>
                    <li><a href="topics.php?sort=ID">ID</a></li>
                    <li><a href="topics.php?sort=Title">Title</a></li>
                    <li><a href="topics.php?sort=TAGS">Tags</a></li>
                    <li><a href="topics.php?sort=VIEWS">Views</a></li>
                 </form> 
```

MySQL 查询如下所示：

```
<?php

        $order = mysql_real_escape_string($_GET['sort']);          
$topics = mysql_query("SELECT topic_id AS 'ID', topic_head AS 'Title', 
                              topic_tags AS 'TAGS', topic_views AS 'VIEWS',
                       FROM forum_topics 
                       WHERE topic_id > 0 ORDER BY '$order' DESC") or die (mysql_error()); 
```

当我单击上面的任何链接时，没有任何反应。没有显示错误，没有进行排序。问题可能出在哪里？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:10:23.123

在您创建 MySQL 查询之前，您是按`$_SESSION['order']`而不是按排序，`$order...`我建议您`$_SESSION['order']`用`$order`or替换。`$_SESSION['order'] = $order`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:14:56.000

```
error_reporting(E_ALL); 
```

将其添加到您的代码中。[http://php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

如果您仔细查看您的代码，您会发现您正在使用`$_SESSION[order]`而不是`$_SESSION['order']` **注意引号**

**真正的问题是：**

在第 1 行您定义了`$order`，而不是`$_SESSION['order']`。

我的建议是：获得一个合适的 IDE，像[PhpStorm](http://www.jetbrains.com/phpstorm/)或[Netbeans](http://netbeans.org/)这样的合适的 IDE会突出你犯的很多错误，比如拼写错误和未使用的变量。当您无法记住变量时，它会变得很方便；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:19:23.397

试试这个：

```
<?php
  $sortParams = ('ID','Title','Tags','Views');
  $order = mysql_real_escape_string($_GET['sort']);
  if(!in_arrray($order,$sortParams))
  {
    $order = 'ID';//Assuming by default you sorting by ID
  }  
  $topics = mysql_query("SELECT topic_id AS 'ID', topic_head AS 'Title', 
        topic_tags AS 'TAGS', topic_views AS 'VIEWS',
        FROM forum_topics 
        WHERE topic_id > 0 ORDER BY $order DESC") or die (mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:13:54.000

`$_SESSION[order]`是除 之外的另一个变量`$order`。它们是不同的，所以你所做的不会订购任何东西，除非你`$_SESSION[order]`用变量替换你的`$order`或者它们共享相同的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T07:27:34.330

问题是你有引号`$order`，所以它是按文字字符串排序的，而不是一列。将它们更改为反引号。

```
 WHERE topic_id > 0 ORDER BY `$order` DESC" 
```

# java - 在抽象类中提供 DI 方法

> ID：12364484
> 
> 赞同：9
> 
> 时间：2012-09-11T07:07:59.857
> 
> 标签：java, osgi, bnd

在大多数情况下，我有很多组件具有要由 OSGi 声明式服务注入的相同类。这些服务将用于执行一些对所有派生组件都相同的逻辑。因此，为避免重复代码，最好使用抽象类。是否有可能将 DI 引用方法（设置/取消设置）移动到抽象类。我正在使用Bnd。

例如：

```
@Component 
public class B implements IA {
   private ServiceC sc;

   @Reference
   public void setServiceC(ServiceC sc) {
      this.sc = sc;
   }  

   public void execute() {
      String result = executeSomethingDependendOnServiceC();

      // do something with result
   }

   protected String executeSomethingDependendOnServiceC() {
      // execute some logic
   }     
}

@Component 
public class D implements IA {
   private ServiceC sc;

   @Reference
   public void setServiceC(ServiceC sc) {
      this.sc = sc;
   } 

   public void execute() {
      String result = executeSomethingDependendOnServiceC();

      // do something different with result
   }

   protected String executeSomethingDependendOnServiceC() {
      // execute some logic
   }      
} 
```

我想将 setter`ServiceC`和方法移动`executeSomethingDependendOnServiceC()`到抽象类。但是它在 OSGi 中与 Bnd 注释的关系如何。只是用@Component 注释类是行不通的，因为`A`并且`D`会创建抽象类的不同实例，而@Component 也正在创建一个实例。

也许有人遇到同样的问题，并给我一些建议，解决方法可能是什么样子。至少一个最佳实践解决方案也可以:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:46:52.430

DS 注释必须在为组件实例化的类上。不支持对超类的注释。有一个建议在未来的规范版本中更改。

您可以做的是将方法移动到超类，但您需要在子类中简单地覆盖该方法，以便您可以在子类中对其进行注释。

# ios - 由于错误的 Xcode 文件夹管理，iPad 中的图像不可见

> ID：12364486
> 
> 赞同：1
> 
> 时间：2012-09-11T07:08:08.583
> 
> 标签：ios, xcode, ipad

我有一个小问题。当我在模拟器中启动我的应用程序时，它工作得很好，但是当我在我的 iPad 上启动它时，我看不到按钮的图像。背景还行。图像 1.jpg 已显示，但在 iPad 上不可见 General 文件夹中的图像（如轮廓按钮）。其他屏幕中的 Glasses.png 等其他图像也可以正常显示。图像 1.jpg 是通过代码定义的：

```
- (void)viewDidLoad
{
[super viewDidLoad];
[mainImgae setImage:[UIImage imageNamed: @"Iview images/Bike/100/comp/1.jpg"]];
} 
```

以及通过情节提要选择的按钮的其他图像。我认为我的文件夹管理是错误的，但我必须在文件夹中管理它，所以它们将在我的项目文件夹中的文件夹中。

![在此处输入图像描述](../Images/db38eec08e43fc87bf815a59fafae4f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:26:46.917

```
[mainImgae setImage:[UIImage imageNamed: @"1.jpg"]]; 
```

这足以为 mainimage 放置图像。，。

# android - Android GCM-清单文件和注册

> ID：12364491
> 
> 赞同：2
> 
> 时间：2012-09-11T07:08:41.887
> 
> 标签：android, google-cloud-messaging

我之前用 GCM 实现了一个项目。我现在想创建一个新项目，我需要一个新的项目 ID，我得到了它，但现在我无法注册。是关于项目ID的吗？或者我可以使用以前的项目 ID 吗？

最后一个问题：

```
<category android:name="my_app_package" />   

<permission android:name="my_app_package.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="my_app_package.permission.C2D_MESSAGE" /> 
```

什么是应用程序包名称？它在清单文件的顶部吗？还是包含 GCM java 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:21:28.797

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <!-- GCM requires Android SDK version 2.2 (API level 8) or above. -->
    <!-- The targetSdkVersion is optional, but it's always a good practice
         to target higher versions. -->
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>

    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!--
     Creates a custom permission so only this app can receive its messages.

     NOTE: the permission *must* be called PACKAGE.permission.C2D_MESSAGE,
           where PACKAGE is the application's package name.
    -->
    <permission
        android:name="com.ketan.demo.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <uses-permission
        android:name="com.ketan.demo.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive data message. -->
    <uses-permission
        android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- Main activity. -->
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.ketan.demo.DemoActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!--
          BroadcastReceiver that will receive intents from GCM
          services and handle them to the custom IntentService.

          The com.google.android.c2dm.permission.SEND permission is necessary
          so only GCM services can send data messages for the app.
        -->
        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.ketan.demo" />
            </intent-filter>
        </receiver>

        <!--
          Application-specific subclass of GCMBaseIntentService that will
          handle received messages.

          By default, it must be named .GCMIntentService, unless the
          application uses a custom BroadcastReceiver that redefines its name.
        -->
        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

我已经实现了 GCM，所以请参考清单文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:21:03.783

首先，如果您想再次注册 - 您应该取消注册。

gcm服务需要app包。用它注册你的 GCMBroadcastReceiver。

```
<receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="my_app_package" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:23:12.280

是的，您可以使用以前的 projectID，但是当您发送通知时，使用 projectID 的其他应用程序也可以收到通知，如果您之前注册了它。

您应该能够使用新的项目 ID。也许你做错了什么。再检查一次。

对于您的第二个问题， app_package 是您的应用程序的主包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:24:41.793

首先，您必须点击 GCM [http://developer.android.com/guide/google/gcm/gs.html的此链接](http://developer.android.com/guide/google/gcm/gs.html)

每个项目都有 GCM 的包名称和项目 ID。如果您未指定项目的包名称，则可以使用以前的项目 ID 进行通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-28T22:53:11.477

如果您没有从注册中得到响应。主要原因之一是您的清单文件配置不正确...尤其是正确地给出“package_name”（您的应用程序包名称，如 com.xxx.yyy）。

# xml - Magento：上次查看的产品仅显示父类别

> ID：12364493
> 
> 赞同：1
> 
> 时间：2012-09-11T07:08:59.653
> 
> 标签：xml, magento, catalog, magento-1.7

我们做了一个葡萄酒网店： http: [//www.christianwinecellars.com/nl/assortiment/](http://www.christianwinecellars.com/nl/assortiment/) 问题是最后查看的产品只出现在具有子类别的类别的右栏中。因此，当您查看产品时，它会出现在法国的 /assortiment/ en 上。

这就是它在 local.xml 中的完成方式

```
<catalog_category_layered>
    <update handle="page_two_columns_left" />

    <reference name="right">
        <action method="unsetChild"><name>right.reports.product.viewed</name></action>
    </reference>

    <reference name="left">
        <action method="unsetChild"><name>currency</name></action>
        <action method="unsetChild"><name>catalog.leftnav</name></action>
        <block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/>
        <block type="reports/product_viewed" name="right.reports.product.viewed" template="reports/product_viewed.phtml" />
    </reference>
</catalog_category_layered> 
```

有谁知道为什么这不会出现在每个类别中？所有类别都是分层的（是锚点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:43:03.013

我从您使用 Magento 1.7 的标签中了解到...根据：`app/design/frontend/base/default/layout/reports.xml`

```
<layout version="0.1.0">
    <default>
        <!-- Mage_Reports -->
        <reference name="right">
            <block type="reports/product_viewed" before="right.permanent.callout" name="right.reports.product.viewed" template="reports/product_viewed.phtml" />
            <block type="reports/product_compared" before="right.permanent.callout" name="right.reports.product.compared" template="reports/product_compared.phtml" />
        </reference>
    </default>

    <catalog_category_layered_nochildren translate="label">
        <label>Catalog Category (Without Subcategories)</label>
        <remove name="right.reports.product.viewed" />
        <reference name="right">
            <block type="reports/product_viewed" before="right.permanent.callout" name="left.reports.product.viewed" template="reports/product_viewed.phtml" />
        </reference>
    </catalog_category_layered_nochildren>
</layout> 
```

所以，也有`catalog_category_layered_nochildren`。

# c - 如何在 C 函数中自动生成双指针参数？

> ID：12364495
> 
> 赞同：2
> 
> 时间：2012-09-11T07:09:09.257
> 
> 标签：c, pointers

我有一个名为 make5 的简单函数，它使 2d 矩阵中的每个元素都等于 5，如下所示：

```
int make5(int r, int c, double **d)
{
  int i, j;

  for (i = 0; i < r; i++) {
    for (j = 0; j < c; j++) {
      d[i][j] = 5;
    }
  }

  return 0;
} 
```

我希望能够使用以下调用在不同的矩阵上运行此函数：

```
make5(2, 3, a);
make5(2, 4, b); 
```

其中 a 和 b 已被声明为指向数组数组的指针。但是当我尝试这个时，我不断收到分段错误错误。如何更改 make5 以便可以在 a 和 b 上运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:24:57.280

该功能工作得很好。您必须错误地分配内存或将错误的参数传递给函数。

工作示例：

```
#include <stdio.h>
#include <stdlib.h>

int make5(int r, int c, double **d)
{
  int i, j;

  for (i = 0; i < r; i++) {
    for (j = 0; j < c; j++) {
      d[i][j] = 5;
    }
  }

  return 0;
}

#define ROWS 4
#define COLS 3

int main(void)
{
  double** p = malloc(ROWS * sizeof(double*));
  int i, j;

  for (i = 0; i < ROWS; i++)
    p[i] = malloc(COLS * sizeof(double));

  for (i = 0; i < ROWS; i++)
    for (j = 0; j < COLS; j++)
      p[i][j] = 1;

  for (i = 0; i < ROWS; i++)
  {
    for (j = 0; j < COLS; j++)
      printf("%f ", p[i][j]);
    printf("\n");
  }

  make5(ROWS, COLS, p);

  for (i = 0; i < ROWS; i++)
  {
    for (j = 0; j < COLS; j++)
      printf("%f ", p[i][j]);
    printf("\n");
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/UmfOq)）：

```
1.000000 1.000000 1.000000 
1.000000 1.000000 1.000000 
1.000000 1.000000 1.000000 
1.000000 1.000000 1.000000 
5.000000 5.000000 5.000000 
5.000000 5.000000 5.000000 
5.000000 5.000000 5.000000 
5.000000 5.000000 5.000000 
```

# jquery - $(function (){}) 和 (function ($){}) 的区别

> ID：12364496
> 
> 赞同：3
> 
> 时间：2012-09-11T07:09:14.063
> 
> 标签：jquery, jquery-plugins

我对它的实际含义感到非常困惑

```
(function ($){})(jQuery) 
//in plugin 
```

和

```
$(function (){})
//in page. 
```

请让我明白这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:04:06.620

这个：

```
(function ($){})(jQuery) 
```

...是一个被定义然后立即调用的函数，其中 JQuery 对象作为参数传入。这`$`是对 JQuery 的引用，然后您可以在函数中使用它。这相当于：

```
var myFunc = function ($){};
myFunc(jQuery); 
```

这个：

```
$(function (){}) 
```

...是*对*JQuery 的调用，传入一个函数，一旦文档完成加载，它应该执行该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:14:20.947

```
$(function(){}); === $(document).ready(function(){});. 
```

以上两者都是一样的。

其中，`(function($){ .... })(jQuery);`是编写插件的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:25:51.117

这两者是不一样的。下面将清楚地解释每一件事，

```
(function($){
  /* code here runs instantly*/
  $('document').ready(function(){ // this function is exactly the same as the one below
        /* code here runs when dom is ready */
  });
  $(function(){ // this function is exactly the same as the one above.
        /* code here runs when dom is ready */
  }
)(jQuery); // jQuery is a parameter of function($) {} 
```

参考：http: [//forum.jquery.com/topic/what-s-the-difference-between-function-code-jquery-and-document-ready-function-code](http://forum.jquery.com/topic/what-s-the-difference-between-function-code-jquery-and-document-ready-function-code)

# background - Cocos2d for iOS：理解 z 层

> ID：12364498
> 
> 赞同：2
> 
> 时间：2012-09-11T07:09:22.063
> 
> 标签：background, cocos2d-iphone, layer

我有一个 GameScene，在 z:0 处添加了敌人和玩家精灵。我在 z:-1 向 GameScene 添加了一个背景层，这对于主背景效果很好。唯一的事情是我想展示一些云，为此他们应该在 z:1 尊重玩家和敌人的精灵。

我的方法是在背景层的 z:2 处添加云，但这还不够好，因为它们仍然出现在敌人和玩家精灵的下方。

我会认为 z 值 (2) 将被添加到背景层 z 值 (-1) 导致 z:1 的绝对 (与 GameScene 父层相比) z 值，因此高于 z:0敌人和玩家精灵。

显然我错了。

然后我观察到，当我将精灵添加到图层时，如果在同一图层中，最后添加的精灵将显示在之前的精灵之上（例如，在玩家精灵之后添加敌人将在玩家精灵之上显示敌人）。我想这是避免奇怪的图形效果（两个图像混合颜色的叠加）的惯例。**这个对吗？**

现在，我唯一的解决方案是拥有多个背景层（一个用于云层，一个用于实际背景地形），并将它们添加到 GameScene 的不同 z 水平。这是正确的吗？这样做的缺点是我必须维护逻辑上相似的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:37:35.010

这是即将发布的[Cocos2D Essential Reference中](http://www.learn-cocos2d.com/blog)[关于绘制顺序如何](http://www.learn-cocos2d.com/files/cocos2d-essential-reference-sample/Influencing_the_Draw_Order.html)在 cocos2d 中工作的示例章节（有关此内容的更多信息，请关注我的博客）。

以下是绘制顺序如何工作的简短摘要：

*   其中节点具有相同的父节点：节点从最低到最高 zOrder 绘制
*   其中节点具有相同的父节点和相同的 zOrder：节点按照添加为子节点的顺序绘制
*   不同父节点的绘制顺序与其父节点的绘制顺序相同

最重要的是，zOrder 只影响同级别的子节点。如果您的场景中有两个子节点 A 和 B，并且首先绘制 A，则 A 的所有子节点也会绘制在节点 B 下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:12:26.297

`zPosition`Morion 清楚地回答了您对s的疑问`CCNode`。但是，我还想为您的第二个问题添加答案。

有两个背景层`GameScene`是正确的，特别是如果云和地形不交互或共享相同的代码。恕我直言，这实际上在代码分离和模块化方面会更好。

但是，如果您想将它们归为一类（由于某种原因），那么您所要做的就是调用：

```
// Don't call this in the init, since the parent is obviously nil there...
[[self parent] addChild:cloud z:kBackgroundLayerCloudsZ tag:kBackgroundLayerCloudsTag]; 
```

请注意，我们只调用父级来添加子级，并且我们有预定义的常量来帮助我们维护图层。如果您在稍后阶段想要添加一个中间背景层，请更改常量并为新层添加一个新的。

我经常使用这种方法，但是TBH，我认为在您的情况下，两个类会更好。我使用这种方法的情况是当我**必须**将精灵分成层（为了更好的可维护性、代码分离等），同时来自不同层的精灵是交错的（有时来自 layer1 的精灵是上面，有时来自 layer2 的精灵在上面）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T08:59:31.317

在绘制元素时按顺序绘制，等于 zOrder 属性，我的意思是，zOrder -3 的项目将在 zOrder -2 的项目之前绘制，zOrder 1 的项目将在 zOrder 0 的项目之后绘制，依此类推。所有 zOrder 都在一个节点内工作，因为所有节点的内容都在它的`draw`方法中绘制。检查 CCNode 的`visit`方法，您可以在代码中看到它。

因此，您可以创建不同的图层，以便能够将具有不同“深度”的游戏对象添加到您的场景中。例如背景层、障碍层、敌人和英雄层、奖励层等。

# asp.net - 使用域名通过局域网访问网站

> ID：12364501
> 
> 赞同：1
> 
> 时间：2012-09-11T07:09:25.403
> 
> 标签：asp.net, iis-7, web

我使用 Visual Studio 2010 Express 创建了一个网站，并将其粘贴在里面`C:\intpub\wwwroot\`。我有 iis7 的 Windows7 家庭高级版。现在在 IIS 管理器中，我将该目录转换为名为**newapp**的应用程序。
现在要访问我正在使用的这个应用程序，`http://localhost/newapp/`并且在我正在使用的 LAN 上`http://ipaddress/newapp/`。它工作完美。
我想在 每次不指定**IP 地址的情况下访问此应用程序。**我怎样才能用一些域名替换IP地址来访问网站？例如，`http://somename.com/newapp/`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:06:50.617

**注意：请在进行任何更改之前保留现有主机文件的备份副本**

以管理员身份打开记事本或类似软件，然后导航至：

```
C:\Windows\System32\drivers\etc 
```

并打开主机文件。

输入您的 ip 地址，如下所示

```
 102.54.94.97     rhino.acme.com 
```

现在在您的网络浏览器中输入映射的主机名

# javascript - 如何获取动态克隆的表格文本框值？

> ID：12364504
> 
> 赞同：1
> 
> 时间：2012-09-11T07:09:42.577
> 
> 标签：javascript, jquery, html, css

全部，

我有一个表，我通过单击按钮进行克隆，在克隆表之后，我需要在克隆表和父表中进行少量计算。我的问题是我无法对每个附加（克隆）表进行计算。我的意思是我写了一个模糊函数来使用文本框值进行计算，但是当我克隆表时，因为所有文本框的类名都相同，在父表和克隆表中，我的结果显示在所有文本框中而不是表的相应部分。这是我的表格和我正在关注的 jquery 代码。

```
 <html>
  <body>
   <table>
   <tbody>
    <tr><td>
<table width="95%" border="0" cellspacing="5" cellpadding="5" style="margin-left:10px;"  id="product">
    <thead><tr>
          <td class="mandatory"> * Product Name </td>
          <td class="label">   Qty.in Stock</td>
          <td class="mandatory">* Qty </td>
          <td class="mandatory">* Unit Price</td>
          <td class="mandatory">* List Price</td>
          <td class="mandatory">*  Total</td>

      </tr>
    </thead>
    <tbody class="product_details" id="tbody_product">
    <tr class="tr_product_details">
    <td> 
          <input type="text" name="txtproductName[]"  id="product-name" />
          <a href=""> 
          <img width="17" height="16" src="images/Products_small.gif"> </a>
          <input type="hidden" name="productid[]"  id="productid" />

    </td>
    <td> 
        <input type="text" name="txtqtyStock[]" id="productstock" />
    </td>
    <td>
        <input type="text" name="txtQty" id="product-quatity" class="product-qty" value="3" />
    </td>
    <td>
        <input type="text" name="txtUnitPrice[]" id="product-price" />
    </td>
    <td>
        <input type="text" name="txtListPrice[]" id="product-list-price" class="product-list-price" 
         />
    </td>
    <td><div style="margin-left:120px;">
        <input type="text" name="txtTotal[]" size="10" class="total-price" />
        </div>
    </td>

    </tr>
    <tr>
    <td colspan="5"> <a href="javascript:;" class="anchor-blue product-description" id="product-description"><img width="17" height="16" src="images/spacer.gif">Product Description </a></td>
    </tr>
    <tr>
    <td colspan="5"><textarea style="width:65%" maxlength="250" rows="3" cols="30" name="txtProductDescription[]" id="textarea-product-description"></textarea> 
    </td>
    <td colspan="1" class="tbl">
        <table >
        <tr>
            <td><a href="javascript:;" class="anchor-blue discount">Discount: </a></td>
            <td> <input type="text" name="txtProductDiscount[]" size="10" class="product-discount"  /></td>
        </tr>
        <tr>
            <td class="label">Total After Discount: </td>
            <td> <input type="text" name="txtAfterDiscount[]" size="10" class="total-after-discount" /></td>
        </tr>
        <tr>
            <td> <a href="javascript:;" class="anchor-blue tax">Tax: </a></td>
            <td><input type="text" name="txtProductTax[]" size="10"  /> 
            </td>
        </tr>
        <tr>
            <td class="label"> Net Total: </td>
            <td><input type="text" name="txtNetTotal[]" size="10" class="net-total" /> </td>

        </tr>

      </table>

      </td>
  </tr>

</tbody>
     </table>
   <table align="left" style="margin-left:20px;">
    <tr>
      <td><input type="button" id="btnaddProduct" value="Add Product" class="button"/> </td>
    </tr>
  </table>
</body>
</html> 
```

还有我正在使用的脚本：

```
 <script type="text/javascript">

$(document).ready(function () {

              var parent_qty_id = $("#product tbody:first").attr('id'); 
                var qty_attr = parent_qty_id+" tr:first .product-qty";

                $("#"+qty_attr+" .product-qty").bind("blur change",function(){  
                var product_qty = $(this).val(), product_list_price = $('#product tr td .product-list-price').val(),total;
                 total = product_qty *  product_list_price;
                // alert( $(this).children().children().attr("class"));
                 // $(this).children().children().attr("class");
                  var val = $(this).children();
                  $(val).val(total+'.00');
  });

                    $("#btnaddProduct").click(function() {
                    var count = ($("tbody .product_details").length) + 1;
                    var tblid =  $("#product tbody:first").attr('id');
                    var newid = tblid+"_"+count;
                    $('#product tbody:first').clone(true).insertAfter('#product > tbody:last').attr("id",newid);

                    $('table#product > tbody:last > tr:first input').val(' ');
                    $('table#product > tbody:last > tr:last input').val(' ');
                    $(":text.product-qty").last().val(); 
                    return false;
                    });

                 });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:54:14.370

```
$("#"+qty_attr+" .product-qty") 
```

出来是空的（没有选择元素），因为您已经添加`.product-qty`到.`parent_qty_id``qty_attr`

```
$("#"+qty_attr) 
```

作品。

您的代码中还有很多其他错误导致模糊/更改例程运行两次等。我已经对其进行了一些清理：

```
$(document).ready(function () {
    var parent_qty_id = $("#product tbody:first").attr('id'); 
    var qty_attr = parent_qty_id+" tr:first .product-qty";

    $("#"+qty_attr).blur(function(){  
        var product_qty = $(this).val(), product_list_price = $('#product tr td .product-list-price').val(),total;
        total = product_qty *  product_list_price;
        var val = $(this).children();
        $(val).val(total+'.00');
    });

    $("#btnaddProduct").click(function(e) { 
        e.preventDefault();
        var count = ($("tbody .product_details").length) + 1;
        var tblid =  $("#product tbody:first").attr('id');
        var newid = tblid+"_"+count;
        $('#product tbody:first').clone(true).insertAfter('#product > tbody:last').attr("id",newid);

        $('table#product > tbody:last > tr:first input').val(' ');
        $('table#product > tbody:last > tr:last input').val(' ');
        $(":text.product-qty").last().val(); 
    });

}); 
```

可能需要进一步调整。

# perl - 在 perl 脚本中使用 export 和 perl -c

> ID：12364506
> 
> 赞同：-2
> 
> 时间：2012-09-11T07:10:02.633
> 
> 标签：perl, environment-variables

由于导出不能与 Perl 脚本一起使用，因此我使用了环境变量。

此代码不会返回任何错误，但`perl -c`检查 .pm 文件语法的命令不会打印输出。

```
myscript.pl

$ENV{'PATH'}='C:/Users/abc/Desktop/mno/wwwww/scripts/lib/perl/';

system("perl -c ContentModifySeasonPassOverlayRecord.pm"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:47:06.517

让我再猜一下你想做什么：

您想批量检查所有 Perl 模块的语法，可能是在一个 cronjob 中。您用来执行此操作的脚本位于您的工作目录（您的框架所在的位置）之外的某个位置。您要检查的脚本也位于其他地方。

您需要做的是`perl -c`从 lib（框架）所在的位置运行命令，以便运行时脚本的工作目录具有 lib 文件。您需要在调用之前**[更改](http://perldoc.perl.org/functions/chdir.html)工作目录**`perl -c`，并且需要在调用中**包含脚本的完整路径**。

```
#!/usr/bin/perl
use strict; use warnings;
# Change current working directory to where the framework is
chdir('/home/user/Desktop/QWARTS-0.6/autoinfra/lib/perl/');

# Run the perl -c command for each of your scripts you want to check
foreach my $script (qw(ContentModifySeasonPassOverlayRecord.pm otherfiles.pm)) {
  system("perl -c /path/to/your/scripts/$script");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:19:25.763

```
#!/usr/bin/perl
use warnings;
use strict;
system("perl -c /root/.cpan/build/DateTime-TimeZone-1.31-oqQt_7/lib/DateTime/TimeZone/America/Noronha.pm"); 
```

没看懂怎么不行？

```
# ./errr.pl 
/root/.cpan/build/DateTime-TimeZone-1.31-oqQt_7/lib/DateTime/TimeZone/America/Noronha.pm syntax OK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:22:14.473

我认为您在 perl 脚本中执行 perl 脚本的方法是错误的，这是在 perl 脚本中执行 perl 脚本的正确方法

```
use strict;
use warnings;
use IPC::System::Simple qw(system capture);

 # Run a command, wait until it finishes, and make sure it works.
 # Output from this program goes directly to STDOUT, and it can take input
 # from your STDIN if required.
 system($^X, "yourscript.pl", @ARGS);

 # Run a command, wait until it finishes, and make sure it works.
 # The output of this command is captured into $results.
 my $results = capture($^X, "yourscript.pl", @ARGS); 
```

并且要检查模块中的错误，您可以在 perl 脚本中“使用”该模块并以通常的方式运行该脚本，如果它有错误，它将抛出到 stdout

如果您想测试大量 perl 模块，您可以为此目的构建一个 shell 脚本。

```
#!/bin/sh
// List all modules 
MODULES="Data::Dumper Foobar::Test"

for i in $MODULES ; do
if $(perl -M$i -e '1;' >/dev/null 2>&1 ); do
echo "Ok."
else
echo "No." 
fi
done 
```

# mysql - 如何将“前 10”列表从 SQL 转换为 NoSQL

> ID：12364517
> 
> 赞同：2
> 
> 时间：2012-09-11T07:10:33.890
> 
> 标签：mysql, nosql, redis, ranking

我有一个当前使用 MySQL 的在线游戏。我有一个看起来像这样的 Player 表：

```
create table player (
    id integer primary key,
    name varchar(50),
    score integer
); 
```

我在“分数”列上有一个索引，并显示如下排名：

```
select id, name, score from player order by score desc limit 100 
```

我想将我的系统迁移到 Redis（或者，如果其他 NoSQL 更适用于此类问题，请告知）。所以我想知道如何有效地显示这种排名表？

AFAICT，这可能是 Map/Reduce 工作？我对 Map/Reduce 几乎一无所知，尽管我阅读了一些我仍然不太了解的文档，因为我无法找到任何现实生活中的例子。

有人可以给我一个粗略的例子，如何在 Redis 中进行上述查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:44:58.343

在 redis 中，您可以使用排序集 ( [http://redis.io/commands#sorted_set](http://redis.io/commands#sorted_set) ) 当您在排序集中对项目进行评分时，您可以通过调用获得前 N 个`ZRANGE players 0 N`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:32:46.010

好问题 - 在 MongoDB 中，您必须使用 group() 函数来返回这种类型的查询：

```
select id, name, score from player order by score desc limit 100 
```

可能看起来像这样：

```
db.player.group(
           {key: { id:true, name:true },
            reduce: function(obj,prev) { if(prev.cmax<obj.score) prev.cmax = obj.score; },
            initial: { cmax: 0 } // some initial value
            }); 
```

使用基于 MapReduce 的方法可能是最好的，请参阅：

*   [http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)
*   [http://cookbook.mongodb.org/patterns/finding_max_and_min_values_for_a_key/](http://cookbook.mongodb.org/patterns/finding_max_and_min_values_for_a_key/)

# php - parse_url 函数 php

> ID：12364521
> 
> 赞同：0
> 
> 时间：2012-09-11T07:10:46.050
> 
> 标签：php, parsing, url

我正在使用 php 的 parse_url 从我的 urls 内容中提取 tlds。比我有一个顶级域数组，如果它们匹配，它们将与提取的顶级域进行比较。

```
 $url = parse_url($tag->getAttribute('href'));

  if (in_array($url['host'], $affi_urls) || $url['host'] == "www.example.com"){   

    $tag->setAttribute('href', '/redirect.php?url='.$href);       

   } 
```

如果 ur['host'] 包含顶级域，这可以正常工作。如果 url['host'] 是相对路径而不是那里的大混乱。

```
/redirect.php?url=/example/test 
```

我怎么能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:14:10.537

您应该对 url 参数进行编码。

```
$tag->setAttribute('href', '/redirect.php?url='.urlencode($href)); 
```

然后通过 获取数据后`parse_url`，使用[urldecode](http://www.php.net/manual/en/function.urldecode.php)对数据进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:22:38.773

您需要保存正在处理的页面的主机名。如果`$url['host']`为空，则使用该主机名代替它。

# php - 覆盖 $_SESSION 变量类型时的奇怪问题

> ID：12364524
> 
> 赞同：5
> 
> 时间：2012-09-11T07:10:56.423
> 
> 标签：php, session, overwrite

我已经将问题的症结总结得尽可能简短：

一个简单的脚本：

```
<?php
session_start();

$_SESSION['user']="logged"; 
```

然后覆盖

```
$_SESSION['user']=0; 
```

并显示 $_SESSION 内容

```
var_dump($_SESSION); 
```

显示 $_SESSION['user'] is '0' - 当然因为它刚刚被覆盖

**但是**现在看

```
if ($_SESSION['user']=="logged"){
    echo "logged";
}
else{
    echo "unlogged";
} 
```

输出“记录”....

似乎变量类型的变化只是肤浅的 - 我不知道我做错了什么..我需要使用 === 比较来包括检查类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:15:37.577

确实，你需要做严格的比较===

那是因为 PHP 尝试将您的字符串转换为数字，因此“记录”传递为 0

然后 0 == 0

*   （int）“记录”= 0
*   (int) "1logged" = 1
*   (int) "logged1" = 0

[http://www.php.net/manual/en/language.types.type-juggling.php](http://www.php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:16:10.400

这是正常的，因为：

```
(int)"logged" = 0 
```

所以`0 = 0`

你需要做严格的比较

```
if ($_SESSION['user'] === "logged") 
```

# python - 导入模块失败

> ID：12364526
> 
> 赞同：2
> 
> 时间：2012-09-11T07:11:09.357
> 
> 标签：python, module

我使用的版本是python2.7，使用脚本时出现错误，但在命令行中可以使用。

```
from twisted.internet import protocol, reactor 
```

和错误：

```
ravjqpejcnngpig.eqo/re/fgh/ocr
Traceback (most recent call last):
  File "./tsTclntTW.py", line 5, in <module>
    from twisted.internet import protocol, reactor
  File "/usr/local/lib/python2.7/dist-packages/twisted/__init__.py", line 18, in <module>
    from zope.interface import Interface
  File "/usr/local/lib/python2.7/dist-packages/zope.interface-4.0.1-py2.7-linux-x86_64.egg/zope/__init__.py", line 3, in <module>
    import pkg_resources
  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 698, in <module>
    self.callbacks.append(callback)
  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 701, in Environment

  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 96, in get_supported_platform
    distutils.util.get_platform() normally reports the minimum version
  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 222, in get_build_platform
    # fallback for MacPorts
  File "/usr/lib/python2.7/distutils/util.py", line 65, in get_platform
    osname = string.lower(osname)
AttributeError: 'module' object has no attribute 'lower'
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 64, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in <module>
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 18, in <module>
    import problem_report
  File "/usr/lib/python2.7/dist-packages/problem_report.py", line 16, in <module>
    from email.mime.multipart import MIMEMultipart
  File "/usr/lib/python2.7/email/mime/multipart.py", line 9, in <module>
    from email.mime.base import MIMEBase
  File "/usr/lib/python2.7/email/mime/base.py", line 9, in <module>
    from email import message
  File "/usr/lib/python2.7/email/message.py", line 16, in <module>
    import email.charset
  File "/usr/lib/python2.7/email/charset.py", line 14, in <module>
    import email.quoprimime
  File "/usr/lib/python2.7/email/quoprimime.py", line 48, in <module>
    from string import hexdigits
ImportError: cannot import name hexdigits

Original exception was:
Traceback (most recent call last):
  File "./tsTclntTW.py", line 5, in <module>
    from twisted.internet import protocol, reactor
  File "/usr/local/lib/python2.7/dist-packages/twisted/__init__.py", line 18, in <module>
    from zope.interface import Interface
  File "/usr/local/lib/python2.7/dist-packages/zope.interface-4.0.1-py2.7-linux-x86_64.egg/zope/__init__.py", line 3, in <module>
    import pkg_resources
  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 698, in <module>
    self.callbacks.append(callback)
  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 701, in Environment

  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 96, in get_supported_platform
    distutils.util.get_platform() normally reports the minimum version
  File "/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py", line 222, in get_build_platform
    # fallback for MacPorts
  File "/usr/lib/python2.7/distutils/util.py", line 65, in get_platform
    osname = string.lower(osname)
AttributeError: 'module' object has no attribute 'lower' 
```

我已经重新安装了我使用的 Python，但它不起作用，我在 Ubuntu 12.04 中。我也有

```
grep ravjqpejcnngpig.eqo/re/fgh/ocr . -R -n 
```

下`/usr/lib/python2.7`但没有返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:21:26.970

也许你`string`的项目中有一个命名的模块，它隐藏了同名的库模块。

* * *

编辑：要找出答案，请将其添加到您的脚本中，就在失败的导入语句之前：

```
import string
print string.__file__ 
```

# c# - 创建自定义 RichTextBox 控件

> ID：12364527
> 
> 赞同：2
> 
> 时间：2012-09-11T07:11:09.830
> 
> 标签：c#, winforms, custom-controls, controls, richtextbox

我相信需要`RichTextBox`在 C# 中创建自定义。一种这样的：

![自定义 C# RichTextBox](../Images/f6d989a006f81fd53b39425c4fc2ad1c.png)

我承认它甚至可能不必是`RichTextBox`，但经过一些研究，我认为这将是最简单的方法。我需要的功能是每行的图标、复选框和文本格式。我的程序将处理文本的每一行并标记正确、不正确的行，并删除在进一步工作中不需要的行，同时显示当前处理的行并允许用户自由编辑一些行（这里：*大约 3 000*之前的行将不可编辑，但该行下的那些将）。

那有什么问题呢？我不知道如何完成它。我已经看过有关如何在[附近制作带有图标或复选框](http://www.vbaccelerator.com/home/NET/Code/Controls/ListBox_and_ComboBox/TextBox_Icon/article.asp)[的单行的`textBox`](http://www.vbaccelerator.com/home/NET/Code/Controls/ListBox_and_ComboBox/TextBox_Icon/article.asp)教程，但我不知道如何制作这两者以及多行文本框（因此我可以自由滚动并且一切都可以流畅地工作）。我也读过一些关于 SO 的问题，但都没有帮助我。

我只是不知道如何开始，我意识到这不会是 5 分钟的工作，但我愿意这样做。到目前为止，我只能创建派生自 的自定义控件`RichTextBox`，但我不知道哪些方法以及如何覆盖。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:23:17.763

尝试使用[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser)控制来代替[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox)。

您可以通过为其设置正确的代码来添加`CheckBoxes`和编辑内容。`HTML`

设置每个`TextBox`或`CheckBoxe`s id 并使用[`GetElementsByTagName`](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementsbytagname)or[`GetElementById`](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementbyid)访问内部元素以获取或设置其属性或值。

# ios - 如何为 ios 编译 JRTPLIB

> ID：12364530
> 
> 赞同：3
> 
> 时间：2012-09-11T07:11:20.313
> 
> 标签：ios

我建立了一个用于发送或接收音频数据的项目，并倾向于使用 RTP 协议。所以我正在尝试编译我从网上下载的 JRTPLIB，它是由 C++ 编写的，但我不知道。我是这些新手。

有谁知道如何编译能够在 ios 上使用的 JRTPLIB？如果给出详细的步骤，我将不胜感激。

# javascript - 防止 jQuery Mobile 中的 ajax 缓存

> ID：12364537
> 
> 赞同：2
> 
> 时间：2012-09-11T07:11:47.103
> 
> 标签：javascript, android, ajax, cordova, jquery-mobile

我发现了与 jQuery 相关的类似问题。我的目标是弄清楚如何防止 jQueryMobile 和 PhoneGap 中的缓存（我使用 JSONP）。我正在做一些动态填充列表视图的 ajax 调用。每次初始化页面（pageinit）时，我都想查询 Web 服务。在我的 android 设备上，新查询后，每次我进入页面时都会将数据添加到列表视图中。它不会删除，每次我访问该页面时，我都会添加一个副本。我认为它与缓存有关。我在我的代码中添加了类似的内容：

```
$(document).bind('pageinit', function() {
    $.ajaxSetup ({
        cache: false
     });
}); 
```

它可以防止在我的 Chrome 和 Safari 浏览器中缓存，但它不适用于 Android 设备。如何防止在 Android 设备中缓存？

PS。您可能会发现这个问题类似，但又不一样： [如何防止来自 jQuery Ajax 的缓存？](https://stackoverflow.com/questions/3002410/how-to-prevent-caching-from-jquery-ajax)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:14:47.783

[只需从Math.random](http://www.w3schools.com/jsref/jsref_random.asp)函数创建一个随机值，并在每次发出 ajax 请求时将其作为参数发送。它将始终避免缓存。

```
var myRand = Math.floor((Math.random()*1000)+1);
$.ajax({
  url: 'ajax/test.html', para: myRand , 
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

# c# - Winforms进度条显示和中断

> ID：12364542
> 
> 赞同：1
> 
> 时间：2012-09-11T07:11:57.663
> 
> 标签：c#, json, winforms

我在 C# 中有一个 Windows 窗体应用程序。在这个应用程序中，我使用了一个进度条来显示与外部 Web 服务器的通信。如何在与 Web 服务器通信时顺利更新它。响应是一个 json 对象（假设请求成功），我无法访问 URL 中的任何其他资源。即使在请求错误的情况下，响应也始终是 json 对象。我想在将请求发布到服务器时填充进度条，并在成功响应的情况下收到 json。

PS：我有 JSON 解析方法来确定它是否是成功响应，如果响应不成功，我想中断进度条。

# xml - 是否可以让 Tokenizer 命名空间感知（使用 Splitter 时）

> ID：12364548
> 
> 赞同：2
> 
> 时间：2012-09-11T07:12:18.960
> 
> 标签：xml, apache-camel, xml-namespaces

我们有一个应用程序，我们正在处理非常大的 xml 文件 (3GB+)。对于拆分，我们使用 Tokenizer。我们收到的 xml 有不同的命名空间前缀或根本不使用前缀。Tokenizer 是否可以处理这个问题？我发现的唯一一件事是使用 inheritNamespaceTagName 属性继承默认命名空间，但不幸的是，当使用命名空间前缀时它不起作用。

谢谢你的帮助！

样品 1：

```
<foo:orders xmnls:foo="http://foo.com">
  <foo:order id="1">Camel in Action</order>
  <foo:order id="1">ActiveMQ in Action</order>
  <foo:order id="1">DSL in Action</order>
</foo:orders> 
```

样本 2：

```
<bar:orders xmnls:foo="http://foo.com">
  <bar:order id="1">Camel in Action</order>
  <bar:order id="1">ActiveMQ in Action</order>
  <bar:order id="1">DSL in Action</order>
</bar:orders> 
```

我们的路线：

```
 <route id="orderProcessorRoute">
      <from uri="file:process-xml?delete=true"/>
      <split streaming="true">
          <tokenize token="order" xml="true"/>
          <to uri="bean:xmlParseBean"/>
          <to uri="vm:orderAggregator"/>
      </split>
     <to uri="file:backup"/>
 </route> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:34:54.887

请参阅选项 inheritNamespaceTagName，记录在：[http](http://camel.apache.org/splitter.html) ://camel.apache.org/splitter.html 。所以在你的情况下应该是：

```
<tokenize token="order" inheritNamespaceTagName="orders" xml="true"/> 
```

试试看。

您可以找到几篇关于如何使用 Camel 拆分大型 XML 文件的博客文章的链接。链接在此页面：[http](http://camel.apache.org/articles) ://camel.apache.org/articles 。第二个是关于骆驼税，这是一种使用 JAXB 注释的 pojo 对数据建模的不同方法。

此外，我们正在开发一个 camel-vtdxml 组件。它还可以使用 vtd-xml 库拆分大型 XML 文件。详见：[http ://camel.apache.org/vtd-xml](http://camel.apache.org/vtd-xml)

# svn - SVN 开关覆盖工作副本

> ID：12364552
> 
> 赞同：0
> 
> 时间：2012-09-11T07:12:40.347
> 
> 标签：svn

我刚刚开始使用 SVN，刚刚遇到了一个奇怪的 SVN 开关问题，我无法找到答案。长话短说：我有一个最新版本的应用程序的工作副本，我存储在 /my repo/tags/versionnumber 中。做了一些错误修复并计划对 Trunk 进行检查以将其部署到我的舞台环境中。

但是，在进行 svn 切换时，它不仅将 repo 路径更改为 /my repo/trunk/，而且还进行了结帐（或其他操作）并覆盖了我的本地更改。主干和标签也具有相同的修订号，根据我所阅读的内容，这应该是不可能的。

以下是一个示例输出（从瑞典语翻译，所以如果有什么听起来很奇怪，你知道为什么）：

```
>svn info
>
>URL: svn+ssh://user@server/my repo/tags/versionnumber
......
>Revision: 8
.....
>Latest change in revision: 6

> svn switch svn+ssh://user@server/my repo/trunk/
> password ********
>
>D    log
>D    logparse.php
>U    document_root/js/standard.js
......
>Updated to revision 8
>
>svn info
>URL: svn+ssh://user@server/my repo/trunk
......
>Revision: 8
.....
>Latest change in revision: 8 
```

当我切换回来时也会发生同样的情况。然后它将添加之前删除的文件（如果它们存在于主干中）并“更新”两者中存在的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:39:14.273

这是 svn switch 的预期行为。它所做的是将您的工作副本切换到您要切换到的分支的 HEAD 修订版（本质上是对当前工作副本的分支的检出）。

如果您的本地更改与您要更改的分支上的任何内容都不冲突，那么它们将被单独留下。如果有冲突，svn 会告诉你。

当您进行提交并且修订号增加时，该修订号是整个存储库的新修订号，而不仅仅是您正在处理的分支。这就是为什么主干和标签具有相同的修订号的原因。这也是 svn 的预期行为。

查看本书了解更多详情：[http](http://svnbook.red-bean.com/) ://svnbook.red-bean.com/ （提供免费在线版本）。

# asp.net - 控件集合无法修改错误？ASP.NET?

> ID：12364554
> 
> 赞同：2
> 
> 时间：2012-09-11T07:12:42.937
> 
> 标签：asp.net

在 Web 应用程序中，当我尝试放置 ajax 日历扩展器时，我收到此错误：

`Error:The Controls collection cannot be modified because the control contains code blocks (i.e. <% ... %>) .`

当我删除该 ajax 日历扩展器时，它工作正常，当我放置 ajax 日历扩展器时，它显示此错误。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:20:15.637

无需回答，但仍然检查： [this post](http://www.aspdotnet-suresh.com/2011/12/aspnet-controls-collection-cannot-be.html)

第二种方法对我有用。

# java - 使用 DefaultHTTPClient 时如何显示所有 HTTP 标头？

> ID：12364555
> 
> 赞同：10
> 
> 时间：2012-09-11T07:12:45.427
> 
> 标签：java, apache-httpclient-4.x

使用`DefaultHttpClient()`Apache Commons HTTP Client 时，是否可以在控制台输出中显示完整请求以进行调试？

我的应用程序有问题，我觉得调试它的最简单方法是检查`DefaultHTTPClient`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T07:32:16.460

您可以像这样获取所有标题：

```
Enumeration headerNames = request.getHeaderNames();
while(headerNames.hasMoreElements()) {
  String headerName = (String)headerNames.nextElement();
  out.println("" + headerName);
  out.println("" + request.getHeader(headerName));
} 
```

有关更多信息，请参阅[本教程](https://web.archive.org/web/20120831110929/http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Request-Headers.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-05T18:58:39.497

是的，这是示例代码：

```
 import java.util.Arrays;
    import org.apache.http.Header;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpGet;
    ...
    HttpResponse response;
    ...
    HttpGet httpGet = new HttpGet(serviceURL);
    response = httpclient.execute(httpGet);
    ...
    // Print all headers
    List<Header> httpHeaders = Arrays.asList(response.getAllHeaders());        
    for (Header header : httpHeaders) {
        System.out.println("Headers.. name,value:"+header.getName() + "," + header.getValue());
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-12T05:38:04.840

来自 StackOverflow 上的另一个答案。这可以通过启用 Apache HTTP 客户端的调试日志来轻松完成：

```
java.util.logging.Logger.getLogger("org.apache.http.wire").setLevel(java.util.logging.Level.FINEST);
java.util.logging.Logger.getLogger("org.apache.http.headers").setLevel(java.util.logging.Level.FINEST);

System.setProperty("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.SimpleLog");
System.setProperty("org.apache.commons.logging.simplelog.showdatetime", "true");
System.setProperty("org.apache.commons.logging.simplelog.log.httpclient.wire", "debug");
System.setProperty("org.apache.commons.logging.simplelog.log.org.apache.http", "debug");
System.setProperty("org.apache.commons.logging.simplelog.log.org.apache.http.headers", "debug"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:27:46.027

当您执行请求时，您正在传递某个 HttpRequest 对象。它有方法`getAllHeaders()`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-02-21T17:54:59.323

如果您使用*Logback*作为您的日志记录框架，请将以下配置添加到您的`logback.xml`/`logback-test.xml`文件中：

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration scan="true">

    <!-- more config -->

    <logger name="org.apache.http" level="DEBUG"/>

    <!-- more config -->

</configuration> 
```

添加此配置后，Logback 的日志附加程序现在将显示有关 HTTP 请求和响应标头的有用的 HttpClient 相关信息，等等。

# asp.net - asp CompareValidator 不接受有效日期

> ID：12364556
> 
> 赞同：0
> 
> 时间：2012-09-11T07:12:46.940
> 
> 标签：asp.net, comparevalidator

具有运算符数据类型检查和数据类型作为日期的 ASP CompareValidator 不接受以下日期：2013 年 3 月 29 日和 2012 年 3 月 30 日。这是一个已知的错误？下面是验证。

```
<asp:CompareValidator ID="comparevalidator" runat="server" ErrorMessage="invalid date" Text="*" Operator="DataTypeCheck" Type="Date"  ControlToValidate="txtUserName"></asp:CompareValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:39:44.027

这取决于您的网络服务器的区域设置。

如果你想覆盖这些，你可以这样做：

_ 对于 web.config 中的所有页面

```
<globalization uiCulture="en-US" culture="en-US" /> 
```

_ 通过设置 @Page 指令的属性为单个页面

```
<%@ Page UICulture="en-US" Culture="en-US" %> 
```

# java - 位串：检查一个位串是否是另一个位串的子集

> ID：12364566
> 
> 赞同：8
> 
> 时间：2012-09-11T07:13:47.923
> 
> 标签：java, algorithm, bytearray, byte

我将一组英文字母表示为 26 位位串。第一位对应于'a'，设置位对应于'b'，依此类推。因此，
字符串 ab 表示为 11000000000000000000000000
现在，给定两个位串，我想检查位串 1 是否是位串 2 的子集。也就是说，在所有位置位串 1 都有一个“1”，位串 2 也应该有一个'1'。这意味着 string1 中的所有字符也存在于 string2 中。有人可以让我知道最好的方法吗？
我知道一个简单的方法如下：遍历位string1并检查位string2中的相应位。但是，我想知道这是否可以使用一些位运算符以更有效的方式完成

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T07:16:37.903

如果您真的只使用 26 位，您可以使用一个整数（32 位）来表示位集，并使用[按位与](http://en.wikipedia.org/wiki/Bitwise_operation#AND)(&) 运算符来获得两个集的[交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。

如果`a & b == a`,`a`是`b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:15:38.413

如果您要使用`BitSet`而不是`byte`，则可以使用`and`or`xor`运算符。

`BitSet``shift`有各种位操作，不幸的是，除了。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html#xor%28java.util.BitSet%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html#xor%28java.util.BitSet%29)

第一组`xor`第二组应该是0。

由于您只使用 26 个字符，因此您也可以使用简单的`int`. 仅设置各个位有点混乱：

```
a |= 1 << offset; 
```

# php - 无法使用 Windows Azure SDK for PHP 查询 RoleEnvironment

> ID：12364573
> 
> 赞同：3
> 
> 时间：2012-09-11T07:14:10.040
> 
> 标签：php, azure, sdk, azure-role-environment

我在使用来自 Github 的最新（在撰写本文时）[PHP SDK 从](https://github.com/windowsazure/azure-sdk-for-php)Windows Azure 运行时获取数据时遇到问题。这是我在我们的一个托管服务上运行的测试：

```
<?php

include 'WindowsAzure/WindowsAzure.php';
use \WindowsAzure\ServiceRuntime\RoleEnvironment;
use \WindowsAzure\ServiceRuntime\Internal\RoleEnvironmentNotAvailableException;

try {
    echo RoleEnvironment::getDeploymentId();
}
catch (RoleEnvironmentNotAvailableException $Exception) {
    die('Failed to find deployment id');
} 
```

总是抛出 RoleEnvironmentNotAvailableException。查看源代码，它似乎尝试通过命名管道（\.\pipe\WindowsAzureRuntime）发送命令。我是否需要在 ServiceConfiguration.csdef/cscfg 中指定某些内容才能访问此命名管道？

任何建议都将受到欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:01:41.763

从 MS EMEA 开发人员支持处得到确认，当前 SDK 不支持此功能。他们建议与上述 jonnu 类似的解决方法 - 使用以前的 SDK 功能进行角色环境/配置设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T19:23:28.767

ServiceRuntime API 仅在 Cloud 上运行，因此如果此代码片段在本地计算机上运行，​​它会如您所指出的那样引发异常。此外，如果您想调试您的 ServiceRuntime 代码，您必须将您的服务部署到 WA，然后使用[远程桌面连接](https://www.windowsazure.com/en-us/develop/php/common-tasks/enable-remote-desktop/)来访问云机器并调试您的代码。

# sitefinity-4 - Sitefinity 4.3 A/B 测试

> ID：12364575
> 
> 赞同：0
> 
> 时间：2012-09-11T07:14:16.477
> 
> 标签：sitefinity-4

我正在为我组织的网站使用 Sitefinity 4.3。

我们有一个主页，在上面我们展示了我们的投资组合滑块，它有图像、文本和描述。

投资组合详细信息在数据库中。我应该如何对这部分进行 A/B 测试，就像我们创建另一个页面一样，源也将在数据库中。

请指导如何在这种情况下进行 A/B 测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:11:56.187

谷歌实验是一种简单的方法来做到这一点。Telerik 的网站上有一篇博客文章强调了它（尽管该博客使用的是 5.x）

[http://www.sitefinity.com/blogs/grisha-karanikolovs-blog/2013/04/12/ab-and-multivariate-testing-with-sitefinity-cms-and-google-experiments](http://www.sitefinity.com/blogs/grisha-karanikolovs-blog/2013/04/12/a-b-and-multivariate-testing-with-sitefinity-cms-and-google-experiments)

# iphone - 扩展 NSMutableData 类

> ID：12364580
> 
> 赞同：1
> 
> 时间：2012-09-11T07:14:29.660
> 
> 标签：iphone, nsmutabledata

我的问题很简单。我想在 iOS 中扩展 NSMutableData 类并覆盖 NSMutableData 中定义的一些方法。例如，我想用我自己的包装器实现覆盖 writeToFile 函数。是否有可能做到这一点？

我的 TestNSMutableData.h

```
@interface TestNSMutableData : NSMutableData
-(BOOL)writeToFile:(NSString*)path atomically:(BOOL)useAuxiliaryFile;
@end 
```

我的 TestNSMutableData.m

```
@implementation TestNSMutableData
-(BOOL)writeToFile:(NSString*)path atomically:(BOOL)useAuxiliaryFile{
  //Some activity on the data and modifying it
  return [self writeToFile:path atomically:useAuxiliaryFile];
} 
```

当我尝试在我的一个项目中使用 TestNSMutableData 时

```
TestNSMutableData myData;
myData = [TestNSMutableData alloc]init];
[myData writeToFile:path atomically:YES] 
```

我收到如下错误

> NSInvalidArgumentException'- 原因' *** - 仅为抽象类定义的长度。定义 -[TestNSMutableData 长度] ！

是否有可能覆盖 Native 类中定义的方法，例如 NSMutableData ？

**更新** 我为 writeTofile 创建 NSString 类类别方法

我的实现是

```
-(BOOL)writeToFile:(NSString*)path atomically:(BOOL)useAuxiliary encoding:(NSStringEncoding)enc error:(NSError**)error{

 //Manipulating NSString 
  self = manipulatedString;
  return [super writeToFile....];

} 
```

我收到警告“NSObject 可能无法响应‘writeToFile’函数。这在技术上是正确的，因为 NSString 是从 NSObject 派生的，而 NSObject 没有 writeToFile 函数。

我想要的是在文件中写入操纵的字符串，而不是实际的字符串。

有没有办法从上述函数调用 NSString writeToFile 方法。

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:29:07.507

`NSMutableData`可能是一个[类簇](https://stackoverflow.com/questions/1844158/what-exactly-is-a-so-called-class-cluster-in-objective-c)，使得子类化有点[困难](http://www.mikeash.com/pyblog/friday-qa-2010-03-12-subclassing-class-clusters.html)。为什么不使用类别来添加自定义`-writeToFile`方法呢？

# ios - 无法更新 sqlite3 中的列值

> ID：12364586
> 
> 赞同：1
> 
> 时间：2012-09-11T07:15:10.620
> 
> 标签：ios, cocoa-touch, sqlite

我是 iPhone 编程的新手，希望有人能够帮助我解决我几天来一直在尝试解决的问题。我创建了一个数据库和一个表。在我的程序中，它包含 5 个字段，我将其中两个字段设置为零。后来我出于某种目的将这些字段更新为一个。但问题是我无法将字段值设置为 1。我将粘贴下面的代码：

```
NSString *querySQL = [NSString stringWithFormat: @"UPDATE TODOLIST_03 SET DELETEROW ='1' WHERE TASK=\"%@\"", cellText1];

const char *query_stmt = [querySQL UTF8String];

if (sqlite3_prepare_v2(TODOLIST_03_DB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
{   
    if (sqlite3_step(statement) == SQLITE_ROW)
    {
        .........   
    }
} 
```

谁能告诉我查询中的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:35:11.730

尝试以下：

```
const char *sqlQuery="UPDATE TODOLIST_03 SET DELETEROW ='1' WHERE TASK= ?";

if(sqlite3_prepare_v2(database, sqlQuery,-1, &queryStatement, NULL) == SQLITE_OK)
{   
    sqlite3_bind_text(queryStatement, 1, [cellText UTF8String], -1, NULL);     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:38:38.143

你把数据库文件放在什么路径？如果将数据库文件放在与项目相同的路径下，则无法写入，例如应将其放在沙箱中`NSHomeDocument`可写入的位置，并且可以修改如下代码以跟踪错误：

```
NSError *err;

if (sqlite3_prepare_v2(TODOLIST_03_DB, query_stmt, -1, &statement, &err) == SQLITE_OK)
{   
    if(err)
    {
        // NSLog error or what.
    }
} 
```

# jquery - 如何使用 jquery.validate.js 进行号码验证？

> ID：12364587
> 
> 赞同：1
> 
> 时间：2012-09-11T07:15:12.340
> 
> 标签：jquery, jquery-validate, validation

我正在使用[jQuery Validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，并希望使用固定数量的数字验证输入字段，中间有一个破折号，如下所示：**XXXXXX-XXXX**。我知道如何验证数字，但如何让插件验证这种特定格式？！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T07:18:31.473

你可以使用正则表达式。添加自定义验证器方法，如下[所示](https://stackoverflow.com/questions/280759/jquery-validate-how-to-add-a-rule-for-regular-expression-validation)：

```
$.validator.addMethod(
    "regex",
    function(value, element, regexp) {
        var re = new RegExp(regexp);
        return re.test(value);
    },
    "Please check your input."
); 
```

然后将其附加到您需要验证的输入元素：

```
$('#id_of_textbox').rules('add', { regex: '^[0-9]{6}-[0-9]{4}$' }) 
```

或者如果您将其与表单一起使用：

```
$('#id_of_form').validate({
    rules: {
        name_of_textbox: {
            regex: '^[0-9]{6}-[0-9]{4}$'
        }
    },
    messages: {
        name_of_textbox: {
            regex: 'Please provide a valid input for this field'
        }
    }
}); 
```

这是一个[现场演示](http://jsfiddle.net/66QtT/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:18:04.750

您可以使用 Javascript 进行 Regest 和基本一样的操作。同样，您也可以将 regest 包含在 jquery 插件中。

# android - 如何更改系统警报设置文本动态

> ID：12364591
> 
> 赞同：10
> 
> 时间：2012-09-11T07:15:26.457
> 
> 标签：android, text, alarm, lockscreen

嗨，我正在创建一个应用程序来显示来自服务的警报计数，并且当我的屏幕锁定时我必须更新它。

但我得到了一个输出但它没有更新任何人都可以帮助我

![这是我的输出](../Images/93874d46c3f5ddbe28cbf3fca4f296ef.png)

这是我用于在锁定屏幕中显示文本的代码

```
 String message ="New alarm :"+ alarmnew.size()+"\n old alarm :"+alarmold.size();
 Settings.System.putString(this.getContentResolver(),
         Settings.System.NEXT_ALARM_FORMATTED, message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:55:15.830

为此，您首先需要解锁屏幕，然后更新显示并再次锁定屏幕。您可以使用**window.addFlags(LayoutParams.FLAG_DISMISS_KEYGUARD) 锁定或解锁屏幕；和 DevicePolicyManager lockNow()**方法。

实际上，当屏幕锁定时，您的应用程序会转到 onPause() 但应用程序的服务会在后台运行时继续运行。因此，要解决您的问题，您需要在几分之一秒内唤醒您的应用程序，然后更新屏幕，然后再次锁定屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:17:11.730

伙计们，感谢@dd619他的概念，我终于找到了这个问题的答案

我使用的概念是首先我需要解锁屏幕然后更新显示并再次锁定屏幕。

这是我对这个应用程序的最终编码

```
{
Context context= getApplicationContext();

KeyguardManager _guard = (KeyguardManager) context.getSystemService(Context.KEYGUARD_SERVICE);
KeyguardLock _keyguardLock = _guard.newKeyguardLock("KeyguardLockWrapper");
        //to disable
_keyguardLock.disableKeyguard();

 String message ="New alarm :"+ alarmnew.size()+"\n old alarm :"+alarmold.size();
 Settings.System.putString(this.getContentResolver(),
         Settings.System.NEXT_ALARM_FORMATTED, message);

         //to enable
 _keyguardLock.reenableKeyguard();
} 
```

# javascript - 脚本标签在 HTML 文档中的位置 - & 具有不同的行为

> ID：12364598
> 
> 赞同：0
> 
> 时间：2012-09-11T07:15:46.190
> 
> 标签：javascript, jquery, html, backbone.js

我有这段 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Backbone.js Demos</title>
</head>
<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
  <script src="app.js"></script>

<script type="x-tmpl" id="list_tmpl">
    <span><%= part1 %><%= part2 %></span>
    <a href="#swappy" class='swap'>[SWAP]</a>
    <span>&nbsp;</span>
    <a href="#del" class='remove'>[DELETE]</a>
</body>
</html> 
```

当脚本标签在`body`标签之间时，我的脚本可以正常工作。但是，如果我将所有脚本标签移至`head`，它们将停止工作。我很困惑为什么。这种行为有什么原因吗？谢谢大家的时间和帮助！

**编辑：应用程序**

```
(function($){

    Backbone.sync = function (method, model, success, error){
        success();
    };

    var Item = Backbone.Model.extend({
        defaults: {
            part1: 'Hello',
            part2: 'World'
        }
    });

    var ItemList = Backbone.Collection.extend({
        model: Item
    });

    var ItemView = Backbone.View.extend({
        tagName: 'li',

        events: {
            'click .swap': 'swap',
            'click .remove': 'remove'
        },

        initialize: function(){
            _.bindAll(this, 'render', 'unrender', 'swap', 'remove');

            this.model.bind('change', this.render);
            this.model.bind('remove', this.unrender);
        },

        render: function(){
            $(this.el).html(_.template($('#list_tmpl').html(), this.model.toJSON()));
            return this;
        },

        unrender: function(){
            $(this.el).remove();
        },

        swap: function(){
            var swapped = {
                part1: this.model.get('part2'),
                part2: this.model.get('part1')
            };

            this.model.set(swapped);
        },

        remove: function(){
            this.model.destroy();
        }
    });

    var AppView = Backbone.View.extend({
        el: $('body'),

        events: {
            'click #add': 'addItem'
        },

        initialize: function (){
            this.counter = 0;

            _.bindAll(this, 'render', 'addItem', 'appendItem');

            this.collection = new ItemList();
            this.collection.bind('add', this.appendItem);

            this.render();
        },

        render: function(){
            $(this.el).append("<button id='add'>Add Item</button>");
            $(this.el).append("<ul id='todoList'/>");
        },

        addItem: function(){
            this.counter++;
            var item = new Item();
            item.set({
                part2: item.get('part2') + this.counter
            });

            this.collection.add(item);
        },

        appendItem: function(item){
            var itemView = new ItemView({
                model: item
            });

            $('#todoList', this.el).append(itemView.render().el);
        }
    });

    var Tasker = new AppView();
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T07:49:51.013

解决这个问题的最简单方法是启动你的 app.js

```
$(function() { 
```

代替

```
(function($){ 
```

比 jQuery 在 DOM 可用后执行脚本。比您可以将脚本留在脑海中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T07:21:26.860

当 js 文件在加载后使用 body 时会发生这种行为，因此它们必须嵌入到 body 中。

您可以将 jquery、json 和下划线文件放在头部。

其他文件，你必须检查它们在加载时是否没有调用body。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:35:16.767

您必须在正文末尾添加 app.js，因为它使用页面中元素的属性。

**使用此标记。始终关闭脚本标签。**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Backbone.js Demos</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>
</head>
<body>
    <script type="x-tmpl" id="list_tmpl">
    <span><%= part1 %><%= part2 %></span>
    <a href="#swappy" class='swap'>[SWAP]</a>
    <span>&nbsp;</span>
    <a href="#del" class='remove'>[DELETE]</a>
    </script>
    <script src="app.js"></script>
</body>
</html> 
```

# facebook - Twitter链接错误

> ID：12364600
> 
> 赞同：0
> 
> 时间：2012-09-11T07:15:49.917
> 
> 标签：facebook, twitter

昨天我在 Facebook 上启动了一个新应用程序。今天我收到消息，当人们将链接复制到 Twitter 时，他们会收到错误消息。这就是你得到的：

```
{
   "error": {
      "message": "Unknown path components: /your_namespace:your_action",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

这是什么意思？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:14:58.810

您实际上是在将 POST 操作链接发送到 Twitter 吗？为什么？

我认为您误解了 Open Graph 的工作原理。基本上，当用户使用您的服务执行操作时，您应该是唯一的发布操作。您可以使用服务器端或客户端语言向 https://graph.facebook.com/me/namespace 发布请求（当您单击链接时，您的浏览器实际上会发出 GET 请求，而不是 POST）[： action?access_token=ACCESS_TOKEN&OBJECT_PATH=OBJECT_URL](https://graph.facebook.com/me/namespace:action?access_token=ACCESS_TOKEN&OBJECT_PATH=OBJECT_URL)

请注意，您需要创建一个应用程序，使用它来验证用户以获取访问令牌并设置您的自定义操作/对象。在您实际使用它们之前，这些都需要获得批准。

您应该首先查看示例应用程序以了解它们是如何工作的：[https ://developers.facebook.com/docs/samples/](https://developers.facebook.com/docs/samples/)

# mysql - 带有 WHERE 子句的 MySql 内连接

> ID：12364602
> 
> 赞同：53
> 
> 时间：2012-09-11T07:15:58.890
> 
> 标签：mysql, sql, where-clause, mysql-error-1064

这是我的代码：

```
 SELECT table1.f_id  FROM table1 WHERE table1.f_com_id = '430' AND      
 table1.f_status = 'Submitted' 
 INNER JOIN table2
 ON table2.f_id = table1.f_id
 where table2.f_type = 'InProcess' 
```

我需要来自`table1`与 430 关联的所有 id`f_com_id`和已提交状态的信息，并且类型应该仅在存储在其他表中的进程中（`table2`）

`f_id`是`p_key`和`f_key`在两个表中。
但这给了我错误，我想我把`WHERE`子句放错了，如何解决。？

> 错误消息：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“INNER JOIN table2 ON table2.f_id =”附近使用正确的语法

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-11T07:16:59.053

是的你是对的。你把`WHERE`子句放错了。您只能`WHERE`在单个查询中使用一个子句，因此请尝试`AND`以下多个条件：

```
 SELECT table1.f_id  FROM table1 
   INNER JOIN table2
     ON table2.f_id = table1.f_id
 WHERE table2.f_type = 'InProcess'
   AND f_com_id = '430'
   AND f_status = 'Submitted' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T07:21:30.803

1.更改WHERE子句前的INNER JOIN。
2\. 你有两个不允许的 WHERE。

试试这个：

> ```
> 从表 1 中选择表 1.f_id
>   内连接表2
>      开（table2.f_id = table1.f_id AND table2.f_type = 'InProcess'）
>    WHERE table1.f_com_id = '430' AND table1.f_status = '提交'
> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:17:53.470

你只能写一个 where 子句。

```
 SELECT table1.f_id  FROM table1
 INNER JOIN table2
 ON table2.f_id = table1.f_id
 where table1.f_com_id = '430' AND      
 table1.f_status = 'Submitted' AND table2.f_type = 'InProcess' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:22:12.010

您正在使用两个`WHERE`子句，但只允许一个子句。像这样使用它：

```
SELECT table1.f_id FROM table1
INNER JOIN table2 ON table2.f_id = table1.f_id
WHERE
  table1.f_com_id = '430'
  AND table1.f_status = 'Submitted'
  AND table2.f_type = 'InProcess' 
```

# r - 在ggplot2中添加带有图例的任意系列？

> ID：12364604
> 
> 赞同：1
> 
> 时间：2012-09-11T07:16:08.747
> 
> 标签：r, ggplot2, legend

我有一堆数据 - 三个时间序列（模型组均值），按组着色，标准差由 geom_ribbon 表示。默认情况下，他们有一个很好的传说。我也有一个时间序列的观察，我想覆盖在图上（没有 geom_ribbon），如下所示：

```
df <- data.frame(year=1991:2010, group=c(rep('group1',20), rep('group2',20), rep('group3',20)), mean=c(cumsum(abs(rnorm(20))),cumsum(abs(rnorm(20))),cumsum(abs(rnorm(20)))),sd=3+rnorm(60))
obs_df <- data.frame(year=1991:2010, value=cumsum(abs(rnorm(20))))
ggplot(df, aes(x=year, y=mean)) + geom_line(aes(colour=group)) + geom_ribbon(aes(ymax=mean+sd, ymin=mean-sd, fill=group), alpha = 0.2) +geom_line(data=obs_df, aes(x=year, y=value)) 
```

但是观察结果确实出现在图例上，因为它没有着色（我想要黑色）。如何将 obs 添加到图例中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T07:49:41.203

首先，创建 和 的组合数据`df`框`obs_df`：

```
dat <- rbind(df, data.frame(year = obs_df$year,  
                  group = "obs", mean = obs_df$value, sd = 0)) 
```

阴谋：

```
ggplot(dat, aes(x=year, y=mean)) +
geom_line(aes(colour=group)) +
geom_ribbon(aes(ymax=mean+sd, ymin=mean-sd, fill=group), alpha = 0.2) +
scale_colour_manual(values = c("red", "green", "blue", "black")) +
scale_fill_manual(values = c("red", "green", "blue", NA)) 
```

![阴谋](../Images/84c303aac257939db80be8d4b478ef22.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:49:09.470

我猜你在构建“obs_df”时犯了一个错误。如果您使用`year = 1991:2010`它创建它，则在其余数据的上下文中更有意义，并且它会为您提供您希望在`ggplot`调用不变的情况下获得的图。

# jquery - 禁用jquery中的链接按钮

> ID：12364606
> 
> 赞同：0
> 
> 时间：2012-09-11T07:16:09.423
> 
> 标签：jquery, asp.net-mvc, button

我在我的网站中使用了链接按钮。在启动“删除”按钮应禁用。单击“添加”按钮后，它将被启用。但我达不到。我不知道我犯了什么错误。任何人请纠正？

```
enter code here

if ($('.' + inputContainerCss).length < 3) {
    //    if ($('.' + inputContainerCss).length < 2) {
    $('#' + btnDelId).attr('disabled', 'disabled');
}

  $('#' + btnAddId).click(function () {
    var num = $('.' + inputContainerCss).length; // how many "duplicatable" input fields we currently have
    var newNum = new Number(num + 1);   // the numeric ID of the new input field being added

    // create the new element via clone(), and manipulate it's ID using newNum value
    var newElem = $('#' + inputContainerIdPrefix + num).clone().attr('id', inputContainerIdPrefix + newNum);

    // manipulate the name/id values of the input inside the new element
    //newElem.children(':first').attr('id', firstChildInputIdPrefix + newNum).attr('name', firstChildInputIdPrefix + newNum);

    newElem.children().each(function () {
        var idPrefix = $(this).attr('id').substring(0, $(this).attr('id').length - 1);
        var namePrefix = $(this).attr('name').substring(0, $(this).attr('name').length - 1);
        $(this).attr('id', idPrefix + newNum).attr('name', namePrefix + newNum);
    })

    // insert the new element after the last "duplicatable" input field
    $('#' + inputContainerIdPrefix + num).after(newElem);

    // enable the "remove" button
    $('#' + btnDelId).attr('disabled', ''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:36:15.763

这不是您的编码问题。您必须为此添加一些 jquery 文件，

[只需单击链接并下载它。](http://jquery.com/download/)

# asp.net - 如何在 iTextsharp 阅读之前检查元数据是否存在

> ID：12364608
> 
> 赞同：0
> 
> 时间：2012-09-11T07:16:27.100
> 
> 标签：asp.net, vb.net, pdf, metadata, itextsharp

我的应用程序需要读取 pdf 文件的元数据（例如作者、关键字等）。

我的功能如下：

```
Public Sub ReadPDF(PdfFileName As String)

Dim reader As PdfReader = New PdfReader(PdfFileName)

pdf_keyword = ""

'Read PDF metadata
pdf_keyword = reader.Info("Keywords")

End Sub 
```

以上方法可以很好地获取关键字。但它会返回错误“字典中不存在给定的键。” 如果 pdf 中不存在元数据“关键字”。那么我如何在阅读之前检查是否存在任何“关键字”元数据？

坦斯克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:33:54.737

```
If reader.Info.ContainsKey("Keywords") Then
    pdf_keyword = reader.Info("Keywords")
End If 
```

# sql - 可靠的 SELECT + UPDATE 的事务与行标记

> ID：12364610
> 
> 赞同：1
> 
> 时间：2012-09-11T07:16:35.740
> 
> 标签：sql, postgresql, concurrency, transactions

### 问题：

给定表`table_a`和`table_b`，我需要在更新时可靠地（同时）执行这样的操作`table_a`：

1.  `SELECT`一些行来自`table_a`.
2.  在应用程序代码中计算一些东西。
3.  `UPDATE`中的一排`table_b`。

我需要防止发生这样的事情（称之为场景 A），`table_b`最终反映的是旧版本`table_a`：

*   `worker1`从中获取行`table_a`。
*   `table_a`已更新。
*   `worker2`从中获取行`table_a`。
*   `worker2`更新`table_b`。
*   `worker1`更新`table_b`。

但这很好（称之为场景 B），因为`table_b`最终处于正确的状态：

*   `worker1`从中获取行`table_a`。
*   `table_a`已更新。
*   `worker2`从中获取行`table_a`。
*   `worker1`更新`table_b`。
*   `worker2`更新`table_b`。

### 交易：

一种解决方案是将整个事物包装在`REPEATABLE READ`事务中。then`worker1`的事务在场景 A 中`worker2`失败，在场景 B 中的事务失败。没有办法区分场景，唯一的选择是重试失败的事务。

但在这两种情况下都是浪费：在场景 A 中，我们宁愿不重试`worker1`的事务，因为`table_b`已经完全更新了。在场景 B 中，我们宁愿`worker2`一开始就不要失败的事务，因为它正在做正确的事情。

### 行标记：

`table_b`如果我们从一开始就知道行的主键( `:b_id`) 并且每个工作人员都有一些唯一的 ID ( `:worker_id`)，我们可以尝试其他方法。在步骤 1 之前添加一`mark`列`table_b`并让每个工作人员执行此操作：

```
UPDATE table_b SET mark = :worker_id WHERE id = :b_id; 
```

然后在第 3 步中添加一个`WHERE`子句：

```
UPDATE table_b SET ... WHERE ... AND mark = :worker_id; 
```

现在`worker1`，根据需要，在两种情况下都不会在步骤 3 中更新任何行。

**行标记在这里是一种合理的方法吗？**我缺少什么缺点？这个问题的“规范”解决方案是什么？

*澄清：*我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:29:22.260

在表 b 上使用事务和 SELECT ... FOR UPDATE。

这将导致行锁定，这将阻止工人 2 更新表 b，直到工人 1 提交。如果您使用 select for update 开始您的工作流程，那么在 worker 1 提交之前，worker 2 无法启动。

第二种方法（可能更好）是将更新包装在一个执行 select 的语句中，因此它是一个语句，并且会自动处理锁定。

行标记需要作为一个想法被丢弃，因为工人 2 在工人 1 提交之前不会看到标记的行......

# javascript - Javascript 如何知道变量是什么类型？

> ID：12364614
> 
> 赞同：5
> 
> 时间：2012-09-11T07:16:55.467
> 
> 标签：javascript, types

我不知道为什么在过去几年我从来没有问过自己这个问题，但突然间我找不到自己或谷歌的任何答案。

众所周知，Javascript 没有变量类型。真是一件好事。但不知何故，它必须确定类型并使用它。

```
var a = 1;
var b = 2.0;
var c = 'c';
var d = "Hello World!"; 
```

所以我们拥有的是一个 Integer、Double/Float、Character、String（可以拆解为 char*）

我知道 JS 与运行时解释器一起工作，但考虑到逻辑和“类型”必须以任何方式实现..

那么 Javascript 解释器如何识别并在内部处理变量呢？在我的想象中，假设我会编写 C++，我会想到一种模板和容器，以及一些重载运算符的逻辑，并尝试检查它到底是什么。但这并没有想到最后。

请与我分享您的知识:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:26:11.620

JavaScript 根据值分配设置变量类型。例如，当 JavaScript 遇到以下代码时，它知道`myVariable`应该是 number 类型：

```
var myVariable = 10; 
```

同样，JavaScript 将在以下示例中检测到变量类型为字符串：

```
var myVariable = "Hello World!"; 
```

JavaScript 也比许多其他编程语言灵活得多。对于 Java 等语言，必须在创建变量时将其声明为特定类型，并且一旦创建，该类型就无法更改。这称为**[强类型](http://timkadlec.com/2008/04/an-objective-look-at-javascript-2-0-strong-typing/)**。另一方面，JavaScript 允许随时更改变量的类型，只需分配一个不同类型的值（通常称为**[松散类型](http://blog.jeremymartin.name/2008/03/understanding-loose-typing-in.html)**）。

以下示例是 JavaScript 中变量的完全有效使用。在创建时，变量显然是 number 类型。稍后将字符串分配给此变量会将类型从数字更改为字符串。

```
var myVariable = 10;
myVariable = "This is now a string type variable"; 
```

变量的**数据类型是 JavaScript 脚本引擎对**变量当前持有的数据类型的解释。一个字符串变量保存一个字符串；一个数字变量保存一个数字值，依此类推。然而，与许多其他语言不同，在 JavaScript 中，同一个变量可以保存不同类型的数据，所有这些都在同一个应用程序中。这是一个由术语松散类型和动态类型所知的概念，这两者都意味着 JavaScript 变量可以根据上下文在不同时间保存不同的数据类型。

**完整的文章在这里：[http ://www.techotopia.com/index.php/JavaScript_Variable_Types](http://www.techotopia.com/index.php/JavaScript_Variable_Types)**

**另一篇可能对您有所帮助的文章：http: [//oreilly.com/javascript/excerpts/learning-javascript/javascript-datatypes-variables.html](http://oreilly.com/javascript/excerpts/learning-javascript/javascript-datatypes-variables.html)**

**有用的链接：**

**[ECMAScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)**

**[ECMAScript BNF 语法](http://www.antlr.org/grammar/1153976512034/ecmascriptA3.g)**

**[JAVAScript BNF 语法](http://www.antlr.org/grammar/1206736738015/JavaScript.g)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:25:45.803

我可以在[ES5 规范](http://es5.github.com/#x8)中找到的唯一有用的行是：

> 在本规范中，符号“Type(x)”用作“x 的类型”的简写，其中“type”是指本节中定义的 ECMAScript 语言和规范类型。

我*假设*当运行时需要执行需要知道某个值类型的操作时，它会[根据规范](http://es5.github.com/#A.1)中为每种类型定义的语法检查该值，直到找到匹配项。

例如，布尔文字的语法如下：

> *布尔文字*::
> 
> ```
>  true 
>   false 
> ```

如果该值完全`true`或完全正确`false`（例如没有引号），则该值是布尔类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:32:54.943

JavaScript 本身确实有类型，并且在内部，每个赋值都会接收到适当的类型。在您的示例`var foo = 2.0;`中，类型将为`float`. 程序员不必担心太多（起初），因为 JS 的*类型*很松散（！== 无类型）。
这意味着如果我要将数字字符串与浮点数进行比较，引擎会将字符串强制转换为数字，以便可以执行比较。

不过，松散类型语言和强类型语言之间的主要区别不是类型强制。在 C(++) 中转换为您需要的类型是很常见的，在某些情况下，值会自动转换为正确的类型（`2/2.0 == 2.0/2.0 == 1.0`==> int 隐式转换为浮点数）。松散类型语言和强类型语言之间的主要区别在于您声明了一个具有不同类型的变量：

```
int i = 0;//ok
//Later:
i = 'a';//<-- cannot assign char to int 
```

而 JS 允许你这样做：

```
var i = 1;//int
i = 1.123;//float
i = 'c';//char, or even strings
i = new Date();//objects 
```

`typeof`但是，正如, `instanceof`, `parseFloat`, `parseInt`, ...这样的功能/关键字`toString`所暗示的：存在类型，它们只是更灵活一点。并且变量不限于单一类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:40:34.910

想象实现的一种简单方法是所有值都保存在对象中，并且所有变量都是指针......在 C++ 中：

```
struct Value
{
    int type;
    Value(int type) : type(type) { }
    virtual ~Value() { }

    virtual std::string toString() = 0;
};

struct String : Value
{
    std::string x;
    String(const std::string& x) : Value(STRING_TYPE), x(x) { }
    virtual std::string toString()
    {
        return x;
    }
};

struct Number : Value
{
    double x;
    Number(double x) : Value(NUMBER_TYPE), x(x) { }
    ...
};

struct Object : Value
{
    // NOTE: A javascript object is stored as a map from property
    //       names to Value*, not Value. The key is a string but
    //       the value can be anything
    std::map<std::string, Value *> x;
    Object() : Value(OBJECT_TYPE), x(x) { }
    ...
}; 
```

例如，每当必须执行操作时（例如`a+b`），您需要检查变量指向的对象的类型以决定要做什么。

请注意，这是一个超简单的解释......今天的 javascript 比这更复杂和优化，但你应该能够得到一个粗略的画面。

# c# - EF 5.0 和动态连接字符串？

> ID：12364617
> 
> 赞同：8
> 
> 时间：2012-09-11T07:17:02.127
> 
> 标签：c#, sql, entity-framework, connection-string

现在有一件事让我发疯。

我的（数据库优先）EF 模型需要一个动态连接字符串（服务器的 IP 地址可能会不时更改）。

因此，在较旧的 EF 版本中，您可以通过构造函数传递连接字符串，但这在 5.0 中似乎是不可能的。

到目前为止我所阅读的内容，您可以更改您的数据模板，但是每次您重新生成模型等时都会被覆盖，所以不是最好的方法。

另一件事是 SQLConnectionFactory，但这似乎根本不起作用， `(Database.DefaultConnectionFactory = new SqlConnectionFactory( ... )`似乎被完全忽略了）。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-11T07:34:00.697

正如 petro 所提到的，您可以使用所需的构造函数创建部分类。

例如：

```
public partial class MyContext : DbContext
{
    public MyContext(string connectionString) : base(connectionString) {}
} 
```

# java - Java 1.6 分段错误 11 (OSX 10.7.4)

> ID：12364620
> 
> 赞同：6
> 
> 时间：2012-09-11T07:17:26.810
> 
> 标签：java, macos, osx-lion, segmentation-fault, llvm-gcc

我有 .jar 文件，它在运行时读取我在 OSX 中使用 GCC 编译器编译的一个 .dylib 库。

应用程序在 OSX 10.6.8 上运行没有任何问题。

爪哇版：

> java 版本“1.6.0_33”Java(TM) SE 运行时环境（内部版本 1.6.0_33-b10-424-10M3720）Java HotSpot(TM) 64 位服务器 VM（内部版本 20.8-b01-424，混合模式）

海合会版本：

> i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.1.00）

我使用 64 位 Java 和 .jar 需要的库，这些库是为 x86_64 编译的。因此，在 Snow Leopard 上，一切运行良好。

我现在将我的应用程序切换到 OSX 10.7.4。在那里我尝试了 2 个不同的 Java 版本：

第一个 Java 版本（与 Snow Leopard 相同）：

> java 版本“1.6.0_33”Java(TM) SE 运行时环境（内部版本 1.6.0_33-b10-424-10M3720）Java HotSpot(TM) 64 位服务器 VM（内部版本 20.8-b01-424，混合模式）

第二个 Java 版本（今天更新）：

> java 版本“1.6.0_35”Java(TM) SE 运行时环境（构建 1.6.0_35-b10-428-11M3811）Java HotSpot(TM) 64 位服务器 VM（构建 20.10-b01-428，混合模式）

海合会版本：

> i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.9.00）

我首先尝试使用在 Snow Leopard 上编译的 .dylib 运行应用程序，但出现此错误：

> **位置 0x0 的无效内存访问 rip=0x7fff894aa697 分段错误：11**

还有没有导致应用程序崩溃的新行，但它们没有显示在 Snow Leopard 上：

```
java[1366] <Error>: CGContextGetCTM: invalid context 0x0
java[1366] <Error>: CGContextSetBaseCTM: invalid context 0x0
java[1366] <Error>: CGContextGetCTM: invalid context 0x0
java[1366] <Error>: CGContextSetBaseCTM: invalid context 0x0 
```

在这次崩溃之后，我尝试在 Lion 上使用 GCC 重新编译依赖项 .dylib，但这并没有改变。我仍然收到分段错误：11 错误。

我在网上读到过这个错误，据我所知，它经常出现在 Lion 上，因为 Java 更新可能搞砸了一些东西，但由于我对 Java 不太熟悉 - 有没有人遇到过这些问题，如果是，有没有办法解决这个问题？

非常感谢。

* * *

**[编辑 #1：在 OSX 10.7.4 上尝试使用 Java 7]**

使用 Java 7 运行 .jar 时，再次发生崩溃，这是错误报告：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007fff894aa697, pid=1471, tid=31503
#
# JRE version: 7.0_07-b10
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.3-b01 mixed mode bsd-amd64 compressed oops)
# Problematic frame:
# C  [CoreFoundation+0x2a697]  CFSetGetValue+0x17
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# An error report file with more information is saved as:
# /Users/username/Desktop/executable/hs_err_pid1471.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
Abort trap: 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:24:49.897

使用 Mac OS X 10.8.2 和 Java 6 安装后，问题就消失了。我正在阅读有关此问题的信息，并了解到 Java 6 和 Mac OS X 10.7.4 存在一些问题。就我而言，我只是在等待在 10.8.2 上测试应用程序以检查它是否仅在 10.7.4 上产生这些错误，并且看起来这些错误仅在 10.7.4 上发生。

通过操作系统升级，问题得到解决，在这种情况下，这对我来说已经足够好。

此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T23:53:34.563

我今天在 OS X 10.8.2 上遇到了这个问题，所以等待更新没有帮助。我能够通过为 OS X 重新安装 Java 来修复它。

我没有费心尝试卸载搞砸的java，我只是重新下载了它并安装了它。这是我安装的版本：

[适用于 OS X 10.8 的 Java](http://support.apple.com/kb/DL1572)

如果您不在 10.8(Mountain Lion) 上，那么您可能需要不同的下载。它可以在同一个站点上找到。希望这可以帮助某人。

# c# - struct 是存储一组值的好选择吗？

> ID：12364621
> 
> 赞同：1
> 
> 时间：2012-09-11T07:17:31.417
> 
> 标签：c#, class, struct

考虑以下 C# 类：

```
public class Person
{
    public string Name {get;set}
    public int Age {get;set}
} 
```

我只会使用它来传递具有单个参数的函数中的几个变量 - 使用结构会是更好的方法吗？

编辑：我不在乎值是否改变，无论如何它们都不应该改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:24:41.947

从 Eric Lippert 优秀[的“堆栈是一个实现细节”](http://blogs.msdn.com/b/ericlippert/archive/2009/04/27/the-stack-is-an-implementation-detail.aspx)的底部：

> 我总是根据类型在*语义上*表示值还是在*语义*上对某物的引用来选择值类型与引用类型。

也就是说，如何在两个`Person`变量之间定义相等 - 如果它们包含相同的*值*，或者它们是对单个实例的两个引用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:20:10.073

这取决于您的要求。如果您不想继承并且不想在对象中进行任何修改（因为它的值类型），那么您可以继续使用 struct.

否则类在所有方面都是最好的，尤其是应用继承概念。

这可能是重复的：[哪个最适合数据存储结构/类？](https://stackoverflow.com/questions/1951186/which-is-best-for-data-store-struct-classes?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:21:17.860

这取决于您对传入值后应该发生什么的期望。如果您不关心函数调用完成后保留的值的更改，则可以将其设为结构，但如果您希望使用 person 参数进行更改并且调用者应该看到它的函数，请使用班级 。

此外，如果这是域模型/数据层的一部分，我会坚持使用一个类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T07:25:31.357

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms173109.aspx)：

> 类是引用类型。当创建类的对象时，分配给该对象的变量只保存对该内存的引用。当对象引用分配给新变量时，新变量引用原始对象。通过一个变量所做的更改会反映在另一个变量中，因为它们都引用相同的数据。
> 
> 结构是一种值类型。创建结构时，分配给结构的变量保存结构的实际数据。当结构被分配给一个新变量时，它被复制。因此，新变量和原始变量包含相同数据的两个单独副本。对一个副本所做的更改不会影响另一个副本。
> 
> 通常，类用于建模更复杂的行为，或在创建类对象后要修改的数据。结构最适合主要包含在创建结构后不打算修改的数据的小型数据结构。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T07:25:38.650

我的经验法则；

*   使用一个类，直到你需要数百万并且需要一个结构来节省存储空间

其中，使用结构会使这不起作用；

*   列表[x].Name =“新名称”；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T20:12:11.713

我的倾向是使用带有公共字段（而不是属性）的简单结构。这种结构的美妙之处在于，除了字段的名称和类型之外，它们的行为都相同。给定一个带有暴露字段`MyPeople[]`的结构数组，可以知道它不会对. 相比之下，如果是一个其他相同的类，则不会有这样的保证。即使是具有读写属性的结构，如果不查看其定义，人们也不会知道该属性实际上是否会像结构字段一样运行，或者它是否会访问存储在类对象中的内容。`Person``Name``MyPeople[0].Name = "George";``MyPeople[1].Name``Person``Person``Name`

请注意，可能导致人们普遍偏爱属性而不是字段的原因不适用于简单的结构。如果一个对象`Fred`拥有一个`George`类类型的字段，并且已经向外部世界公开了一个对其所引用的对象的引用，那么唯一`Fred`可以知道`George`的属性在其不知情或同意的情况下不会改变的唯一方法是类`George`不会让这些属性改变，至少不让`Fred`知道（在许多情况下，最简单的方法`George`是简单地承诺它不会让其属性在任何情况下改变）。相比之下，如果`Fred`持有一个`Ronald`暴露字段结构类型的字段，那么任何`Ronald`' 字段都不会改变`Fred`的知情和同意。由于没有人`Fred`可以操纵这些字段，并且由于`Fred`知道它对结构的要求，因此最简单的方法就是让`Fred`负责维护任何所需的不变量。

# php - PHP：如何在生产中运行采样分析器？

> ID：12364622
> 
> 赞同：5
> 
> 时间：2012-09-11T07:17:35.773
> 
> 标签：php, performance, profiling, production-environment

**生产环境：**`mod_php`在 64 位 Linux 上运行 Apache 2.2 和 5.3 的工作机器集群前面的负载平衡器/HTTP 反向代理。所有工作机器都运行相同的完全自定义的 PHP 代码，并与单个后端 PostgreSQL 数据库通信。PHP 代码经过优化，可以在与数据库对话时花费 CPU。已验证数据库机器仍有大量空闲。

**我正在寻找：**采样分析器，它可以通过 PID 附加到 PHP 进程并定期停止进程（例如使用`SIGSTOP`），通过内存检查收集 PHP 堆栈并继续进程（例如使用`SIGCONT`）。停止周期应该是可调的，但我认为停止间隔应该在 1-10 毫秒左右。

单个工作机器 PHP 进程预计将始终在不到 100 毫秒的时间内运行单个请求。我最感兴趣的是为那些花费超过 100 毫秒的进程收集配置文件数据。最好的情况是在请求开始时通知采样分析器，如果处理请求的 PHP 进程在 100 毫秒后仍在运行，则开始以 1 毫秒的间隔收集样本。这样，任何正常运行的进程都将在没有中断的情况下运行到最后，并且我仍然可以获得有问题的情况的配置文件。

**是否存在这种用于 PHP 的采样分析器？**目的是不使用检测分析器，因为开销太高并且检测会混淆统计信息（在那里，完成了）。

我已经知道 XHProf 和 Xdebug，但据我所知，它们都在检测分析器并影响 PHP 程序的实际操作码。我非常喜欢运行普通 PHP 操作码的东西。

我所知道的最接近的工作是使用 HipHop 运行 PHP 代码，并对 C/C++ 代码使用采样分析器，但我还没有准备好将软件移植到 HipHop。在这种情况下，分析结果将仅代表 HipHop，而不是 mod_php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:17:37.883

尽管 XHProf如果启用（通过调用的函数，而不仅仅是启用扩展）**确实会**增加请求的开销，但它会根据您使用的标志而有所不同。我最近测量了这一点，发现只有 XHPROF_FLAGS_MEMORY 是最小开销的最佳选择：

[http://rpubs.com/msonnabaum/xhprof_overhead](http://rpubs.com/msonnabaum/xhprof_overhead)

我只是在少量请求上运行 XHProf，如下所示：

```
<?php
function xhprof_enabled() {
  if (mt_rand(1, 300) == 1) {
    xhprof_enable(XHPROF_FLAGS_MEMORY);
  }
} 
```

但与 xdebug 不同的是，简单地启用扩展似乎根本不会增加任何开销。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T02:04:55.877

我不会在生产环境中运行任何分析器工具。测试服务器用于运行分析器和负载测试。

# c++ - boost::bind 与 boost::asio 一起。boost::bind 不起作用，从示例中复制

> ID：12364625
> 
> 赞同：2
> 
> 时间：2012-09-11T07:17:47.763
> 
> 标签：c++, boost, boost-asio, boost-bind

有人能告诉我为什么这不能编译吗？早在 2007 年，我基本上从 Kholkoff ( [http://lists.boost.org/Archives/boost/2007/04/120339.php](http://lists.boost.org/Archives/boost/2007/04/120339.php) ) 的一个示例中复制了它，关于超时套接字中的 reads() ：

```
void CClient::setResult(boost::optional<boost::system::error_code>*
                         a,boost::system::error_code b)
{
    *a = b;
} 
```

我像这样绑定（）它：

```
timer.async_wait(boost::bind(&CClient::setResult, &timer_result, _1)); 
```

gcc 打印的错误对我来说是不可读的：

```
static assertion failed: WaitHandler type requirements not met  remote_server       line 499, external location: /usr/include/boost/asio/basic_deadline_timer.hpp   C/C++ Problem
no match for call to ‘(boost::_bi::bind_t<boost::_bi::unspecified, void (CClient::*)(boost::optional<boost::system::error_code>*, boost::system::error_code), boost::_bi::list2<boost::_bi::value<boost::optional<boost::system::error_code>*>, boost::arg<1> > >) (const boost::system::error_code&)’  remote_server       line 499, external location: /usr/include/boost/asio/basic_deadline_timer.hpp   C/C++ Problem
‘void (CClient::*)(boost::optional<boost::system::error_code>*, boost::system::error_code)’ is not a class, struct, or union type   remote_server       line 69, external location: /usr/include/boost/bind/bind.hpp    C/C++ Problem
make: *** No rule to make target `all'.             C/C++ Problem
make: *** [src/CClient.o] Error 1   remote_server           C/C++ Problem
  required from ‘class boost::_bi::bind_t<boost::_bi::unspecified, void (CClient::*)(boost::optional<boost::system::error_code>*, boost::system::error_code), boost::_bi::list2<boost::_bi::value<boost::optional<boost::system::error_code>*>, boost::arg<1> > >’  remote_server       line 15, external location: /usr/include/boost/bind/bind_template.hpp   C/C++ Problem
  required from here    CClient.cpp /remote_server/src  line 93 C/C++ Problem 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:24:16.437

怎么样

```
timer.async_wait(boost::bind(&CClient::setResult, this, &timer_result, _1)); 
```

`setResult`是成员函数，如果你使用`async_wait`in `CClient`，或者使用一些类型的对象`CClient`而不是`this`.

# php - 为 php 安装 bzip2

> ID：12364628
> 
> 赞同：3
> 
> 时间：2012-09-11T07:18:03.290
> 
> 标签：php, linux, centos, bzip2

我有一个带有 CentOs 和 PHP 5.3.16 的服务器，我想让 bzip2 与 php 一起使用。我从其原始站点下载并安装了 bzip2，`/usr/local/bin`并编辑了`configuration.php5`文件并将其包含`--with-bz2=/usr/local/bin`在其中。但在我`make install`说之后：

> 无法加载动态库/usr/local/bin/php/extensions/no-debug-non-zts-20090626/bz2.so

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:24:26.817

哎呀，我似乎不应该在 php.ini 文件中设置 extensions=bz2.so 。

删除它解决了这个问题。

# geometry - 将点变换到另一个坐标

> ID：12364631
> 
> 赞同：0
> 
> 时间：2012-09-11T07:18:23.740
> 
> 标签：geometry, transform

建议这里有 3 个点，(x0,y0),(x1,y1),(x2,y2)

```
O = (x0,y0)
e1 = (x1-x0,y1-y0)
e2 = (x2-x0,y2-y0) 
```

3 可以新建坐标（O,e1,e2）

这是一个点（x，y）

如何计算（O，e1，e2）中的点位置？请写下公式，谢谢。

曾经我记得，但现在我忘记了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:58:45.953

让我们称新坐标`a`和`b`。

在旧坐标系中，该点将为`O+a*e1+b*e2`。由于它应该是同一个点`(x,y)`，我们有两个线性方程：

```
x=Ox+a*e1x+b*e2x
y=Oy+a*e1y+b*e2y 
```

`a`除了和之外的一切`b`都是已知的，两个未知数，两个方程 - 如果 e1 和 e2 不平行，则存在解。

该系统可以通过矩阵求逆来求解`( (e1x,e2x) , (e1y,e2y) )`，或者通过从第一个方程表示`a`并将`b`其代入第二个方程来求解。

# svn - Hudson：更改默认标签 URL

> ID：12364632
> 
> 赞同：1
> 
> 时间：2012-09-11T07:18:25.530
> 
> 标签：svn, hudson, tagging

我目前正在我们公司环境中配置 hudson，我发现了一个小问题。我们正在使用 SVN，我真的很想更改标记此构建页面中的默认标记 URL。我们使用 ANT 进行构建，我在其中指定目标以从存储文件的文件中加载版本信息。

有没有办法将此变量从 ANT 传递给 hudson 并将其用于标记 URL？我们真的希望不必手动编写每个标签的版本号。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:35:41.873

我不知道改变内置功能的方法

现在，您有两个我能想到的可能选项。

*   使用 Subversion 标记插件
    [https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Tagging+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Tagging+Plugin)
    这将在每次成功构建时触发。

*   如果您只想手动标记选择性构建，请尝试使用 Promotions
    [http://wiki.hudson-ci.org/display/HUDSON/Promoted+Builds+Plugin](http://wiki.hudson-ci.org/display/HUDSON/Promoted+Builds+Plugin)
    配置手动升级过程，并在那里运行自定义脚本来标记 SVN
    This实际上是我个人在我的设置中使用的

# java - 为什么 Java ActionListener 不起作用？

> ID：12364634
> 
> 赞同：3
> 
> 时间：2012-09-11T07:18:36.323
> 
> 标签：java, swing, awt, actionlistener

伙计们，我打算实现一个简单的按钮 ActionListener 但它似乎不起作用。附上java代码如下.....程序打算响应用户的点击动作并改变JLabel的上下文

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Frame extends JFrame implements ActionListener {

    public JButton btn = new JButton("Click");
    public JLabel display = new JLabel("null");
    public JPanel mainPanel = new JPanel();

    public Frame() {

        mainPanel.add(btn);
        mainPanel.add(display);

        add(mainPanel);
    }

    public void actionPerformed(ActionEvent e) {

        if (e.getSource() == btn) {
            display.setText("it works");
            System.out.println("it works");
        }
    }

    public static void main(String[] args) {

        Frame testFrame = new Frame();
        testFrame.pack();
        testFrame.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T07:21:40.087

您的 actionlistener（JFrame 本身）没有添加[addActionListener](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#addActionListener%28java.awt.event.ActionListener%29)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T07:22:15.793

您应该将 ActionListner 添加到按钮

```
public Frame(){

    mainPanel.add(btn);
    mainPanel.add(display);
    btn.addActionListener(this);
    add(mainPanel);
} 
```

# mysql - MySQL数据库的正则表达式

> ID：12364635
> 
> 赞同：1
> 
> 时间：2012-09-11T07:18:41.850
> 
> 标签：mysql, sql

我有一个表 emp_skills，其中 emp_id 和 Skill_id 作为两列。现在，

```
SELECT * FROM emp_skills where skill_id REGEXP '^[2,3]$' 
```

输出具有 2 或 3 或两者兼有的人的 emp_id。我想要的是那些同时具有 2 和 3 作为其 Skill_id 的 emp_id。Skill_id 是整数

上述查询的示例输出

```
EMP_ID     SKILL_ID
401        2   
405        2
401        3
405        3
407        3 
```

现在我想要的只是前四行，因为 407 没有 2 作为 Skill_id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:23:55.243

从你的短语来看`both 2 and 3 as their skill_id`，我认为你不需要`regex`这个。您只需要`count`,`group by`和`having`

```
SELECT EMP_ID
FROM emp_skills
WHERE skill_ID IN (2,3)     
GROUP BY EMP_ID
HAVING COUNT(EMP_ID) = 2    -- the total number of skill_ID 
```

`where`您需要将记录数与子句中提供的 id 总数相匹配。

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/49409/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:22:42.820

假设`skill_id`为`INTEGER`列，那么这可以通过使用`IN`子句轻松实现：

```
SELECT * 
FROM emp_skills 
WHERE skill_id IN(2,3); 
```

# c# - 如何绘制和处理一些 3D 点？

> ID：12364639
> 
> 赞同：1
> 
> 时间：2012-09-11T07:19:05.317
> 
> 标签：c#, c#-4.0, graphics, 3d, drawing

我有一些观点，比如

```
1,2,3
1,1,1
2,3,4
2,5,6
9,10,2
66,43,23 
```

我想在页面中绘制并查看它们，但我不知道该怎么做。我读了一些关于 XNA 的文章，但我认为有更好的方法。你能帮助我吗？

**更新**

我想像 3DMax 那样模拟 3D 点。这意味着具有 3d 形状，并且可以从各个角度进行查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:09:53.900

您需要的是一个 3d 图形绘图 API。

主要有2个：

*   OpenGL
*   直接3D

OpenGL 是跨平台的，用于 Android 和 iPhone 等移动设备。

Direct3D 是 Microsoft 特定的，通常仅适用于 Windows 平台。

不要*高估*构建跨平台应用程序的价值。如果是小宠物项目，以后不打算跨平台，*不要因为跨平台就选择难度更高的API*。

[通过 GLUT 从 C++ 开始编程 OpenGL 很容易](http://bobobobo.wordpress.com/2008/02/09/getting-started-with-glut/)，并且[网络上有大量简单的示例](http://user.xmission.com/~nate/tutors.html)

您还可以通过 XNA 使用 Direct3D，这也很容易上手。[youtube 上](http://www.youtube.com/watch?v=b_QqcFimkkg)有大量的 XNA 4.0 教程（我没看过，它只有一个非常绿色的点赞栏！）还有[msdn 教程](http://msdn.microsoft.com/en-us/library/bb203894.aspx)

# c# - 无法将事件源重新注册到新的自定义事件日志

> ID：12364643
> 
> 赞同：2
> 
> 时间：2012-09-11T07:19:13.773
> 
> 标签：c#, c#-4.0, logging, windows-7, event-log

我使用以下方法创建了一个事件日志源：

```
if (!EventLog.SourceExists(EventLogSource)) EventLog.CreateEventSource(EventLogSource); 
```

因此，使用 EventLogSource 的每个日志条目都会进入“应用程序”。然后我希望所有使用 EventLogSource 的条目进入另一个自定义日志；所以我删除了它们，然后使用新的自定义日志创建了源：

```
try { EventLog.DeleteEventSource(EventLogSource); }
catch { }
try { EventLog.Delete(EventLogName); }
catch { }

...
if (!EventLog.SourceExists(EventLogSource)) EventLog.CreateEventSource(EventLogSource, EventLogName);
while (!EventLog.SourceExists(EventLogSource)) { } 
```

但是当我使用 EventLogSource 登录时，条目仍然会进入“应用程序”而不是 EventLogName。

笔记：

我在评论中写了这个，我认为它有助于更​​好地描述我的问题：在 Windows 事件查看器中，您会看到“Windows 日志”和“应用程序”在其下。树中有另一个名为“应用程序和服务日志”的节点，我想在该节点下创建一个自定义日志。我可以成功地做到这一点。问题是以前注册到“应用程序”的事件源无法从“应用程序”中取消注册并在我自己的“MyCustomLog”中重新注册。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:42:18.827

Windows 中的事件系统缓存了一些关于源的信息。这意味着如果您删除一个源并重新添加它，它将继续记录到它最初使用的同一日志中。

没有记录的方法可以强制事件系统清除此缓存。我知道的唯一方法是重新启动机器 - 所以你需要删除源，重新启动，然后重新创建源。

# c - 如何在 C 中使用 pthread_join 控制线程数？

> ID：12364644
> 
> 赞同：0
> 
> 时间：2012-09-11T07:19:14.337
> 
> 标签：c, multithreading, pthreads, pthread-join

我创建了一个 C 程序，它将从文本文件中读取 20000 个字符串，并将其发送到其他程序。我用了一段时间来循环这个文本文件并创建线程，将文本发送到另一个程序。但我只希望 4 个线程工作。所以我使用了一个计数器并不断递减它，以及一个 if 条件来检查计数器，当它被设置为 1 时，我为之前的线程调用了 pthread_join。我想先完成这 4 个线程，然后新的 4 个线程来获取新的文本文件字符串。但它没有按我的需要工作。它仅每第 4 个线程处理 4 次。并且不会从文本文件中提取所有记录。

程序：-

```
int Read_record()
{
    printf("Inside Read_record()\n");
    pthread_t threads;
    int rc;
    char l_record[300];
    int thNum=4;

    while(1){
        MEMSET(g_record);

        if(fgets(g_record,300,g_r_fp)==NULL){
            printf("End of File.\n");
            break;
        }else{
            //printf("%s",g_record);
            printf("%s",g_record);
            rc = pthread_create(&threads, NULL, &Get_report, (void *)g_record);

            if (rc){
                printf("ERROR; return code from pthread_create() is %d\n", rc);
                exit(-1);
            }

            thNum--;
        }

        if(thNum==0){ 
            pthread_join(threads, NULL); 
            thNum=4;
        }
    }

    return 0;
} 
```

输入文本文件包含：1 2 3 4 5 6 7 8 9 10 11 12 13 14

输出来了：-

```
Inside Read_record()
1
2
3
4
Inside Get_report, wget 4

Inside Get_report, wget 4

Inside Get_report, wget 4

Inside Get_report, wget 4

5
6
7
8
Inside Get_report, wget 8

Inside Get_report, wget 8

Inside Get_report, wget 8

Inside Get_report, wget 8

9
10
11
12
Inside Get_report, wget 12

Inside Get_report, wget 12

Inside Get_report, wget 12

Inside Get_report, wget 12

13
14
15
16
Inside Get_report, wget 16

Inside Get_report, wget 16

Inside Get_report, wget 16

Inside Get_report, wget 16

17
18
19
20
Inside Get_report, wget 20

Inside Get_report, wget 20

Inside Get_report, wget 20

Inside Get_report, wget 20

End of File. 
```

期望输出：-

```
Inside Get_report, wget 1
Inside Get_report, wget 2
Inside Get_report, wget 3
Inside Get_report, wget 4

Inside Get_report, wget 5
Inside Get_report, wget 6
Inside Get_report, wget 7
Inside Get_report, wget 8

Inside Get_report, wget 9
Inside Get_report, wget 10
Inside Get_report, wget 11
Inside Get_report, wget 12.
and so on.. 
```

请注意，我只想在系统中创建 4 个线程。不止于此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:28:23.833

听起来您需要的是一个线程池，您可以创建一个由 4 个线程组成的池，并通过队列将工作传达给它们。主线程将读取队列中的文件并将作业（带有要处理的文本行的对象/结构）排入队列。线程将从队列中取出一个作业，处理该作业，然后获得另一个作业。

线程不应该在只处理一项工作后退出，而是循环直到被告知停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:31:29.370

您的程序结构存在根本性问题。这是我认为你想要的：

1.  让 main 方法读取字符串
2.  让 main 方法创建 4 个线程（将它们存储在数组或其他东西中）
3.  实现某种形式的共享内存将数据发送到 4 个线程
4.  您可能需要某种形式的同步。
5.  工作完成后终止并加入所有 4 个线程

希望这能让你走上线程的美妙世界

这实际上是另一个帖子中提到的[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)

我发现[了这个关于线程的精彩教程](https://computing.llnl.gov/tutorials/pthreads/)，我只查看了索引表，但似乎涵盖了您需要的所有内容。

# javascript - Javascript form.submit() 方法是如何工作的？

> ID：12364649
> 
> 赞同：-4
> 
> 时间：2012-09-11T07:19:32.490
> 
> 标签：javascript, web-scraping

我想废弃一个在修改`<select>`具有属性的网站后更改内容的网站`onchange="this.form.submit()"`。所以我需要知道它是如何`form.submit()`工作的，这样我才能模拟它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:20:54.127

它所做的只是提交父表单，就像单击`<input type="submit" />`按钮通常会发生的那样。

# winapi - 使用 win API 从 Win XP OS 检索键盘布局的语言名称

> ID：12364659
> 
> 赞同：3
> 
> 时间：2012-09-11T07:20:20.730
> 
> 标签：winapi, mfc

我正在 WIn XP 上使用 VC6 开发应用程序。使用 GetKeyBoardLayoutList() 和 GetLocalInfo() API 从系统检索默认输入语言列表。

以下是代码。

```
`UINT uLayouts; 
char szBuf[512];
HKL  *lpList = NULL;
uLayouts = GetKeyboardLayoutList(0, NULL);
lpList   = (HKL*)LocalAlloc(LPTR, (uLayouts * sizeof(HKL)));
uLayouts = GetKeyboardLayoutList(uLayouts, lpList);
for(UINT i = 0; i < uLayouts; i++)
{
    DWORD temp = (UINT)lpList[i] & 0xffffffff;
    GetLocaleInfo(MAKELCID(temp,SORT_DEFAULT), LOCALE_SLANGUAGE , szBuf, 512);
}` 
```

在 szBuf 中，我将输入语言名称设为“英语（美国）”，而操作系统中的实际名称为“英语（美国）-美国”

我们如何才能获得操作系统中存在的输入语言的确切名称？我们也尝试使用不同的标志，例如，

> LOCALE_SENGLANGUAGE //英语
> 
> LOCALE_ILANGUAGE、LOCALE_SLANGUAGE、LOCALE_ICOUNTRY、LOCALE_SABBREVLANGNAME、LOCALE_SNATIVELANGNAME、LOCALE_SABBREVCTRYNAME、LOCALE_SNATIVECTRYNAME

但是无法获取确切的语言名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:52:22.113

用这个：

```
 LOCALE_IMEASURE // 0 = metric, 1 = US 
```

# javascript - 如何使用 Jquery 在视频结尾显示海报图像？

> ID：12364661
> 
> 赞同：1
> 
> 时间：2012-09-11T07:20:26.950
> 
> 标签：javascript, jquery, html, html5-video

我的 HTML5 视频控制 API 有了形状。但是现在客户要求我在播放视频后显示海报。

现在有一个深黑色的背景。

请让我知道我该怎么做。

```
<video width="640" height="360" x-webkit-airplay="allow" poster="asserts/poster.png" preload="" tabindex="0" class="video1">
    <source data-quality="sd" src="http://media.jilion.com/videos/demo/midnight_sun_sv1_360p.mp4"></source>
    <source data-quality="hd" src="http://media.jilion.com/videos/demo/midnight_sun_sv1_720p.mp4"></source>            
    <source data-quality="sd" src="http://media.jilion.com/videos/demo/midnight_sun_sv1_360p.webm"></source>
    <source data-quality="hd" src="http://media.jilion.com/videos/demo/midnight_sun_sv1_720p.webm"></source>            
</video> 
```

播放/暂停的 Jquery 功能是：

```
/* Play/Pause */
    var gPlay = function() {
        if($hdVideo.attr('paused') == false) {
            $hdVideo[0].pause();
            $video_main_control.removeClass("hd-video-main-control-none");
            $hdVideo[0].poster.show();
        }
        else {
            $hdVideo[0].play();
            $video_main_control.addClass("hd-video-main-control-none");
        }
    };
    $video_main_control.click(gPlay);
    $hd_play_btn.click(gPlay);
    $hdVideo.click(gPlay);
    $hdVideo.bind('play', function() {
        $hd_play_btn.addClass('hd-paused-button');
            });
            $hdVideo.bind('pause', function() {
                $hd_play_btn.removeClass('hd-paused-button');
            });
    $hdVideo.bind('ended', function() {
                $hd_play_btn.removeClass('hd-paused-button');
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:46:38.070

```
<video width="640" height="360" x-webkit-airplay="allow" poster="asserts/poster.png" preload="" tabindex="0" class="video1" id="video_elem">       
</video>

var showBanner = function () {
    // Show your banner
};
document.getElementById("video_elem").addEventListener("ended",showBanner, false ); 
```

为此，视频 api 已**“结束”事件。**参考：[https ://developer.mozilla.org/en-US/docs/DOM/Media_events](https://developer.mozilla.org/en-US/docs/DOM/Media_events)

# asp.net - 将 Asp.net Ajax Control Toolkit 与 Twitter 引导程序混合使用会产生冲突或问题吗？

> ID：12364666
> 
> 赞同：0
> 
> 时间：2012-09-11T07:21:08.557
> 
> 标签：asp.net, asp.net-ajax, twitter-bootstrap, ajaxcontroltoolkit

以前有人混合过这两个吗？混合了 twitter 引导程序和 ajax 控制工具包控件的更新面板是否会出现问题？使用一个或另一个 ajax 函数时有任何冲突吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:24:45.907

现在我看到了一个相当大的问题。

*   如果您有带有 ajaxToolkit:ToolkitScriptManager 的母版页，它会强制您将其包含在带有 runat="server" 的表单中。问题是，稍后当您想使用带有 twitter 引导表单的类（用于登录、数据输入等）的小表单时，html 验证会警告您不能将表单放入表单中，例如 chrome 会删除内部表单标签...如果你用 div 标签替换 forms 标签并应用 twitter bootstrap 表单的类，它会丢失 twitter bootstrap css 给表单元素的边距底部......

# php - PHP比较没有strtotime的日期

> ID：12364670
> 
> 赞同：1
> 
> 时间：2012-09-11T07:21:22.250
> 
> 标签：php, string, date, strtotime

我很惊讶。我忘了包括 strtotime 但意识到它在任何情况下都有效。为什么这行得通？

```
 if($_POST['active_to'] == ''  || $_POST['active_to'] >= '2038-01-19'){
        $postproduct->active_to = '2025-07-31';
    }else{
        $postproduct->active_to = $_POST['active_to'];
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T07:24:21.387

因为 YYYY-MM-DD 格式恰好在使用字符串比较时按相同的顺序排序。

如果你使用，比如说，`DD-MM-YYYY`格式，它就行不通。同样，如果您使用的是 YYYY-MD 格式（不需要前导零），它也不起作用（因为*在*字符串排序之后）`"2010-5-10"`。 *`"2010-12-10"`*

 *`"2010-10-05"`大于`"2000-10-05"`不是因为`2010`> `2000`，而是因为`"20"`=`"20"`和`"1"`> `"0"`。两个字符串之间不同的第一个字符恰好按正确的顺序排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T07:24:28.180

因为字符串将按词法逐个字符进行比较。

*   大于? `2`_`2`
*   如果不是，`0`大于`0`？
*   如果不， ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:24:33.817

您可以仅直接比较日期，`greater then` `less then`或者`equal`因为它是一个字符串。

只要您`YYYY-MM-DD`只有格式的日期。因为`YYYY-MM-DD`将始终以增量格式更改。

请记住格式。否则你必须使用`strtotime`函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:26:22.003

你比较字符串。在此操作中，字符串被转换为数字。如果你有 format `Y-m-d`，它工作得很好，因为首先是年，它是最大值（Y*365 天），然后是月，然后是天。

在某些情况下，由于月份中的天数不相等等原因，结果可能无效。

参考： http: [//php.net/manual/en/language.operators.comparison.php#language.operators.comparison.types](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.types)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T07:26:17.937

IT 之所以有效，是因为您正在进行字符串比较，`or`只要该条件为真，该比较就会在某个条件下工作。*

# asp.net - GridView RowCommand 事件在 UpdatePanel 中触发两次

> ID：12364671
> 
> 赞同：0
> 
> 时间：2012-09-11T07:21:23.163
> 
> 标签：asp.net, gridview, updatepanel, rowcommand

最近两天我遇到了一个奇怪的问题。在 UpdatePanel 中使用时，我的 gridview 的 rowcommand 事件会触发两次。如果我在更新面板之外使用它。它按预期工作。谁能指导我如何解决这个问题。

我的示例代码如下：ASPX

```
<asp:UpdatePanel ID="upDescription2" runat="server" UpdateMode="Conditional">
    <Triggers>
         <asp:AsyncPostBackTrigge`enter code here`r ControlID="ddlDescription1"    EventName="SelectedIndexChanged" />
    </Triggers>
    <ContentTemplate>
         <asp:DropDownList ID="ddlDescription2" runat="server" Width="70%" AutoPostBack="True"                                                                OnSelectedIndexChanged="ddlDescription2_SelectedIndexChanged">
    </asp:DropDownList>
    </ContentTemplate>
</asp:UpdatePanel>

<asp:UpdatePanel ID="upGrdView" runat="server" UpdateMode="Conditional">
       <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlDescription2" EventName="SelectedIndexChanged" />
       </Triggers>
             <ContentTemplate>
                   <asp:GridView ID="grdView" runat="server" CssClass="grd" AutoGenerateColumns="False"
                        OnRowCommand="grdView_RowCommand" OnRowDataBound="grdView_RowDataBound">
                        <Columns>
                        <asp:ImageButton ID="btnRemove" runat="server" CommandName="remove"/>
                       Blah Column
                       Blah Column
                       Blah Column
                       Blah Column
                      </Columns>
                   </asp:GridView>
     </ContentTemplate>
</asp:UpdatePanel> 
```

C＃：

```
protected void ddlDescription2_SelectedIndexChanged(object sender, EventArgs e)
{
     BindGrid();
}

protected void grdView_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("Remove"))
    {
        RemoveRow(e.CommandArgument);  
    }
} 
```

问候乌斯曼·哈立德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:33:58.103

我已经解决了这个问题。现在我使用 ImageButton 的 Click 事件，而不是使用 RowCommand 事件。它只发射一次。

# asp.net - ASP.net 防止用户单击本地链接时出现白页闪烁

> ID：12364676
> 
> 赞同：1
> 
> 时间：2012-09-11T07:21:29.710
> 
> 标签：asp.net, twitter-bootstrap, asp.net-ajax, master-pages

例如，在此页面[http://twitter.github.com/bootstrap/base-css.html](http://twitter.github.com/bootstrap/base-css.html)中，当您单击导航栏中的每个链接时，浏览器会加载所需的页面，而不会先闪烁空白页面（类似于 Ajax）。在我们的网站中，点击导航栏时它会闪烁

我们正在使用 MasterPages、Twitter BootStrap、ASP.net Framework 4

使用不同的浏览器测试我们的网站，它是在 Chrome 中进行的，但在 Firefox 和 IE9 中没有，引导网站在它们中的任何一个中都没有这个问题......

# c# - 使用 DateTime 和 Employee 计数，然后用 0 填充其余数字

> ID：12364678
> 
> 赞同：0
> 
> 时间：2012-09-11T07:21:33.737
> 
> 标签：c#, datetime, counter

我正在尝试创建一个简单的 Employee 类，该类增加每个创建的员工实例的员工计数。这非常简单，除了我被要求创建应使用当前年份（使用 DateTime 对象）和当前员工计数用前导零填充来构造的员工编号，以便员工编号始终为 8 个字符长，例如，如果在 2013 年创建了第十名员工，则员工编号将为 20130010。您不必每年都重置员工计数器。

现在我已经完成了整个

```
string year = DateTime.Now.ToString(); 
```

并增加了员工人数，但我很困惑如何用 0 填补剩余的空白。

任何帮助将不胜感激，因为这太令人沮丧了，因为它可能是一个非常简单的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:27:51.993

它应该很简单。

但一定要使用年份而不是完整的日期。

下面的代码片段：

```
string id = DateTime.Now.Year.ToString() + 10.ToString("0000"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T07:28:01.100

如果我理解正确，您可能只想在号码中添加前导零。

```
string year = DateTime.Now.Year.ToString();
int EmpNumber = 1;
string newNumber = year + EmpNumber.ToString("D4"); 
```

输出将是：`"20120001"`

您可能会看到：[如何：用前导零填充数字](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:30:00.493

你想使用这样的东西：

```
var employeeId = string.Format("{0}{1:D4}", DateTime.Now.Year, runningNumber); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:32:42.310

您需要查看[String.PadLeft](http://msdn.microsoft.com/en-us/library/system.string.padleft.aspx)方法。

`string employeeId = string.Concat(DateTime.Now.Year.ToString(), (lastEmployeeId + 1).ToString().PadLeft(4, '0');`

您可能需要考虑使用 Oracle 序列或 SQLServer auto_increment，因为您可能会遇到线程/同步问题（即同时创建两个员工并分配相同的员工 ID）。

此外，仅当事实证明有必要时，才应将员工数量作为优化来进行。如果您没有性能问题，您可以使用`COUNT`（在数据库或内存中`List<Employee>`）语句来获取员工数量。

跟踪员工名单和员工人数违反了[单一事实来源](http://en.wikipedia.org/wiki/Single_Source_of_Truth)。我向你保证，一旦事情变得更复杂，你就会遇到麻烦：在某些时候，这两个计数会（出于某种原因）不同......

# android - 如何在 Android 应用程序中实现 Google Analytics？

> ID：12364688
> 
> 赞同：2
> 
> 时间：2012-09-11T07:22:01.727
> 
> 标签：android, google-analytics

我想在 Android 中为我的示例应用程序实现 Google Analytics。如何查看服务器中的数据或分析更改以及如何将自定义变量发送到服务器端。之后我该怎么办？

```
public class TestActivity extends Activity {

  GoogleAnalyticsTracker tracker;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    tracker = GoogleAnalyticsTracker.getInstance();

    // Start the tracker in manual dispatch mode...
    tracker.startNewSession("UA-34709489-1", this);
    tracker.trackPageView("/HomeScreen"); 
    // ...alternatively, the tracker can be started with a dispatch interval (in seconds).
    //tracker.startNewSession("UA-YOUR-ACCOUNT-HERE", 20, this);

    setContentView(R.layout.main);
    Button createEventButton = (Button)findViewById(R.id.NewEventButton);
    createEventButton.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
        tracker.trackEvent(
            "Clicks",  // Category
            "Button",  // Action
            "clicked", // Label
            77);       // Value
      }
    });

    Button createPageButton = (Button)findViewById(R.id.NewPageButton);
    createPageButton.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
        // Add a Custom Variable to this pageview, with name of "Medium" and value "MobileApp"
        tracker.setCustomVar(1, "Navigation Type", "Button click",2);
        tracker.trackPageView("/testApplicationHomeScreen");
      }
    });

    Button quitButton = (Button)findViewById(R.id.QuitButton);
    quitButton.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
        finish();
      }
    });

    Button dispatchButton = (Button)findViewById(R.id.DispatchButton);
    dispatchButton.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
        // Manually start a dispatch, not needed if the tracker was started with a dispatch
        // interval.
        tracker.dispatch();
      }
    });
  }

  @Override
  protected void onDestroy() {
    super.onDestroy();
    // Stop the tracker when it is no longer needed.
    tracker.stopSession();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:27:30.487

请参考：[适用于 Android 的 Google Analytics（分析）](https://developers.google.com/analytics/devguides/collection/android/)

具体来说，除了包含上面链接中的解析jar外，还需要使用以下代码：

```
import android.content.Context;
import com.google.android.apps.analytics.GoogleAnalyticsTracker;

/**
 * @description Google analytics This class is used to create Google Analytics
 *              tracker instance. This will track actions performed in the
 *              application.
 */
 public final class GoogleAnalytics {

private static GoogleAnalyticsTracker tracker;
private static GoogleAnalytics googleAnalytics = null;
private final static int VALUE = -1;
private final static String CATEGORY = "Application Name";

/**
 * 
 * @param context
 * @return
 */
public static GoogleAnalytics getGoogleAnalyticsInstance(Context context) {
    if (googleAnalytics == null) {
        googleAnalytics = new GoogleAnalytics(context);
        tracker = GoogleAnalyticsTracker.getInstance();
        tracker.startNewSession(--enter your reg number here--, 10, context);
    }
    return googleAnalytics;

}

private GoogleAnalytics(Context context) {
}

/**
 * Stop current session
 */
public void stopSession() {
    tracker.stopSession();
    googleAnalytics = null;
}

/**
 * Tracks Event of actions performed
 * 
 * @param action
 * @param label
 */
public void trackEvent(String action, String label) {
    tracker.trackEvent(CATEGORY, // Category
            action, // Action
            label, // Label
            VALUE);
}
   } 
```

现在，您需要在任何需要跟踪事件的地方调用：

```
GoogleAnalytics.getGoogleAnalyticsInstance(this).trackEvent("Event Name", "Event Desc"); 
```

要获取您的应用程序注册号，请参阅： [注册 Google Analytics](http://www.google.com/analytics/)

当您想要结束单个会话时，还请记住调用以下命令：

```
GoogleAnalytics.getGoogleAnalyticsInstance(this).stopSession(); 
```

# c# - 计算圆中的坐标

> ID：12364690
> 
> 赞同：2
> 
> 时间：2012-09-11T07:22:07.617
> 
> 标签：c#, wpf, math

我在按钮中间画了一个假想的圆圈。

圆的半径是`Height/2`if`Height>Width`或`Width/2`if `Width>Height`。现在我必须计算这个圆中的坐标（以像素为单位）。这个想法是，如果例如鼠标光标悬停在那个圆圈上，就会发生一些事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:26:13.820

计算每个坐标是多余的；只是比较到中心的*距离*。例如：

```
int radius = 5; // whatever

int deltaX = originX - mouseX, deltaY = originY - mouseY;

// compare the square distance, to avoid an unnecessary square-root
if((deltaX * deltaX) + (deltaY * deltaY) <= (radius * radius)) {
    // inside the circle, or on the edge
} 
```

为了避免一些数学问题，您还可以进行快速边界框检查，即检查*矩形*区域（只是加法/减法）。这可以组合使用，即

*   检查边界框
    *   如果它不在边界框内，它肯定不在圆圈内
    *   如果它*在*边界框中，请进行数学计算以比较平方距离

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T07:26:30.850

当满足这个方程时，你就在圆圈内：

```
Math.pow(mouse_pos_x-center_circle_x,2)+Math.pow(mouse_pos_y-center_circle_y,2)<Math.pow(radius,2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:27:06.607

根据定义，圆的面积是距离等于或小于圆心的一组点。

要测试一个点是否在一个圆内，您必须做的就是计算它与中心点之间的距离。如果该距离小于圆的半径，则该点在圆内。

```
double Distance(Point p1, Point p2)
{
    int x = p1.X - p2.X;
    int y = p1.Y - p2.Y;
    return Math.Sqrt(x * x + y * y);   
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T07:28:14.217

您可以使用下一个条件：

```
x^2+y^2<R^2 
```

其中 R - 半径，所有这些点都在圆圈中。

# javascript - 煎茶触摸：5个简单的问题

> ID：12364692
> 
> 赞同：0
> 
> 时间：2012-09-11T07:22:10.883
> 
> 标签：javascript, html, touch, extjs

我是sencha touch的新手，我有一些简单的问题。我不需要 100% 的工作代码作为答案，但如果有人能指出我正确的方向，那就太好了。但请记住，煎茶触摸对我来说是新的。我使用 sensha touch 1.x。

让我先解释一下我的应用程序是做什么的。它显示了一个包含项目的列表（通过 json 代理从数据库中获取）。您可以点击显示表单的项目。然后，您可以更新或删除该项目。在列表屏幕上，您还可以添加新项目。非常简单 ：-）

**以下是我的问题：**

**1/ 日期选择器字段：**

表格中有一个`datepickerfield`. 默认格式为`month/day/year`. 我住在欧洲所以甲酸盐应该是`day/month/year`。有了`slotorder`，我可以改变这一点。但是该字段本身仍然具有错误的格式。我试图用一个听众来解决这个问题：

```
change: function() {
this.fieldEl.dom.value = this.getValue().format('d/m/Y'); 
} 
```

这在选择日期时有效。但是当从列表中点击一个项目时，`datepickerfield`仍然是错误的格式。我尝试使用其他侦听器，例如`afterrender`,`scope`等。但没有任何效果。

**2/ 数字字段：**

在模型中我有一个字段`duration`。它属于`time`sql 表中的类型。所以格式是`hh:mm:ss`. 在表格中我有 3 `numberfields`。一个小时，一个分钟，一个秒。

当从列表中点击一个项目时，如何将字段`duration`分成 3 个部分并填写 3 个部分`numberfields`？

**3/ 上下文选择域**

在表单中有一个`selectfield`取决于登录用户的值。如果用户 1 已登录，则值应为`x`, `y`, `z`。如果用户 2 已登录，则值应为`x`、`a`、`b`等。

因此，在打开表单时，`selectfield`应预先填写数据。它应该从服务器调用一个函数来获取正确的数据。如何做到这一点？

**4/ 像推特一样刷新列表**

我希望列表在到达末尾时获取其他项目（如 twitter）。我在网上找到了一些东西：`PullRefresh`插件。但我不能让它工作。

有任何想法吗？

**5/ 样式列表**

是否可以单独设置列表中的每个项目的样式？您可以使用`styleHtmlCls`, 等，但它会为整个列表设置样式。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:21:30.960

对于那些感兴趣的人，我的解决方案。

1/ 这`code Ext.apply(Ext.util.Format, {defaultDateFormat: 'd/m/Y'});`设置了应用程序中所有日期的格式。

2/ 我在模型 3 中创建了额外的字段。它是字段“duration”的 3 个“转换”字段，格式为“hh:mm:ss”。这是代码（字段 duration_m 和 duration_s 相同）：

```
name: 'duration_h', 
            convert: function(value, record) 
{
           var duration= record.get('duration'), 
                 splits    = duration.split(":"), 
                 duration_h = splits[0];
           return duration_h;             
} 
```

在我的表单中，我现在使用 3 个数字字段链接到这 3 个额外字段。保存数据时不要忘记执行 PHP 代码：model.set('duration_h', ''); 否则，这些字段不会在模型中设置并保持为空。

3/ 和 4/ 我还没有解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:42:02.793

1 - 这很容易设置：

```
picker: {
slotOrder: ["day","month","year"]
} 
```

2 - 我不明白 2 更清楚

3 - 您需要为此使用本地存储

4 - 分页试试这个链接[sencha list paging plugin](https://stackoverflow.com/questions/7321446/sencha-list-paging-plugin)

5 - 您不能直接为每个项目设置不同的样式，但您可以通过设置其样式配置为列表中的每个项目定义样式

# websocket - 安全 websocket 与不安全 websocket 的成本

> ID：12364698
> 
> 赞同：14
> 
> 时间：2012-09-11T07:22:39.763
> 
> 标签：websocket

我目前正在开发一个使用 WebSockets 的基于浏览器的多人游戏。我的首要任务是低延迟以及与各种平台和网络设置的兼容性。

但我正在做密码认证。我也有聊天功能，我认为我的球员的隐私很重要。所以我认为我可以通过切换到基于 TLS 的 websockets 来提高安全性和隐私性。我的问题是：

1.  Web 套接字连接的 TLS 加密将如何影响性能？请注意，我经常发送非常小但非常重要的消息。
2.  wss:// 会在 ws:// 工作的任何环境中工作，还是我需要一个后备机制？

或者我的用例在应用程序级别实施加密可能更明智？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T10:21:24.280

由于代理和其他中介不理解或主动阻止 WebSocket，WSS 将在比 WS 更广泛的网络环境中工作。

关于 TLS 引入的额外延迟，我希望它与您从 WAN 连接获得的延迟（大约 10-250 毫秒 RTT）相比微不足道。

关于带宽，由于 TLS 使用对称密码进行有效负载加密，我预计不会有任何开销。

TLS 显然会消耗 CPU 周期，但考虑到当今的 CPU 能力，这通常不是问题。

实施自己的加密没有意义..除非您关心端到端隐私..但是无论如何您将无法在服务器端做任何事情（除了分派给其他客户端）。

简而言之：选择 WSS。

我写了一篇关于 WebSocket 开销的博客文章（包括与 TLS 与非 TLS 的比较）：[http ://tavendo.com/blog/post/dissecting-websocket-overhead/](http://tavendo.com/blog/post/dissecting-websocket-overhead/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:40:01.960

几年前我进行了一项性能研究，结果表明 Internet 上的 SSL 仅比纯文本慢 3 倍。由于硬件速度的提高，我预计从那时起差距会缩小。

当 SSL 已经存在时，我当然*不*建议您实施自己的加密。您没有理由相信它会比 SSL 更快，而且您几乎肯定会引入 SSL 中不存在的安全漏洞。

# inno-setup - Inno Setup 搜索 CD 上的特定文件，检索确切的文件路径并将值返回到 [Files]-Section

> ID：12364700
> 
> 赞同：2
> 
> 时间：2012-09-11T07:22:45.113
> 
> 标签：inno-setup

我想为 2 张 CD 上的旧程序制作安装程序，我想直接从光盘安装文件。

启动时，安装程​​序应检查是否存在某个文件，这意味着第一张 CD 已插入 cd rom 驱动器。这是该任务的代码：

```
[Files]
Source: {code: ??? }; Destination: {app}; flags:external;

[Code]
procedure InitializeWizard();
begin
  if not FileExists('A:\Resource\CD1.GOB') xor
         FileExists('B:\Resource\CD1.GOB') xor
         // and so on, for every drive letter...
         FileExists('Z:\Resource\CD1.GOB') then
         Repeat
           if MsgBox('Insert the first CD!', mbInformation, MB_OKCANCEL) = IDCANCEL then
           ExitProcess(0);
         Until  FileExists('A:\Resource\CD1.GOB') or
                FileExists('B:\Resource\CD1.GOB') or
                // going through all letters again...
                FileExists('Z:\Resource\CD1.GOB') = true; 
```

所以这按预期工作。如果未插入 CD，因此找不到文件，将显示一条消息，要求用户插入 CD。

但我想知道是否有更好的方法来增加驱动器号，因为这是一团糟。

其次，如何保存完整的文件路径并将其传递给 [Files] 部分？

我希望你能帮我解决这个问题！

更新：

我再次尝试并想出了这个：

```
procedure CurPageChanged(CurPageID: Integer);
begin
  if CurPageId = wpWelcome then
  begin
    WizardForm.NextButton.Enabled := False; 
    repeat
      for i:=0 to 31 do
        dstr := (Chr(Ord('A') + i) + ':\Resource\CD1.gob');
    until FileExists(dstr);
    WizardForm.NextButton.Enabled := True; 
  end;
end; 
```

但是使用此代码安装程序会在开始时冻结并且即使已插入 CD 也不会响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:30:22.083

像这样的东西应该做你需要的：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Files]
Source: {code:GetFileSource}; DestDir: {app}; flags:external;

[Code]
#ifdef UNICODE
  #define AW "W"
#else
  #define AW "A"
#endif
type
  TDriveType = (
    dtUnknown,
    dtNoRootDir,
    dtRemovable,
    dtFixed,
    dtRemote,
    dtCDROM,
    dtRAMDisk
  );
  TDriveTypes = set of TDriveType;
function GetDriveType(lpRootPathName: string): UINT;
  external 'GetDriveType{#AW}@kernel32.dll stdcall';
function GetLogicalDriveStrings(nBufferLength: DWORD; lpBuffer: string): DWORD;
  external 'GetLogicalDriveStrings{#AW}@kernel32.dll stdcall';

var
  FileSource: string;

#ifndef UNICODE
function IntToDriveType(Value: UINT): TDriveType;
begin
  Result := dtUnknown;
  case Value of
    1: Result := dtNoRootDir;
    2: Result := dtRemovable;
    3: Result := dtFixed;
    4: Result := dtRemote;
    5: Result := dtCDROM;
    6: Result := dtRAMDisk;
  end;
end;
#endif

function GetLogicalDrives(var ADrives: array of string; 
  AFilter: TDriveTypes): Integer;
var
  S: string;
  I: Integer;
  DriveRoot: string;
begin
  Result := 0;
  SetArrayLength(ADrives, 0);

  I := GetLogicalDriveStrings(0, #0);
  if I > 0 then
  begin
    SetLength(S, I);
    if GetLogicalDriveStrings(Length(S), S) > 0 then
    begin
      S := TrimRight(S);
      I := Pos(#0, S);
      while I > 0 do
      begin
        DriveRoot := Copy(S, 1, I - 1);
        #ifdef UNICODE
        if (AFilter = []) or
          (TDriveType(GetDriveType(DriveRoot)) in AFilter) then
        #else
        if (AFilter = []) or
          (IntToDriveType(GetDriveType(DriveRoot)) in AFilter) then
        #endif
        begin
          SetArrayLength(ADrives, GetArrayLength(ADrives) + 1);
          #ifdef UNICODE
          ADrives[High(ADrives)] := DriveRoot;
          #else
          ADrives[GetArrayLength(ADrives) - 1] := DriveRoot;
          #endif
        end;
        Delete(S, 1, I);
        I := Pos(#0, S);
      end;
      Result := GetArrayLength(ADrives);
    end;
  end;
end;

function GetFileSource(Value: string): string;
begin
  // file source path passed to the [Files] section
  Result := FileSource;
end;

procedure InitializeWizard;
var
  I: Integer;
  DriveCount: Integer;
  DriveArray: array of string;
begin
  // the function will fill the DriveArray only with CDROM
  // drives and returns the count of found drives
  DriveCount := GetLogicalDrives(DriveArray, [dtCDROM]);
  // here you have an array of CD-ROM drives so iterate it
  // search for a file you need and when you find it, pass
  // the path to the FileSource variable, which will later
  // be queried to get the source to the file in [Files]
  for I := 0 to DriveCount - 1 do
  begin
    if FileExists(DriveArray[I] + 'Resource\CD1.GOB') then
    begin
      FileSource := DriveArray[I] + 'Resource\CD1.GOB';
      Break;
    end;
  end;
  MsgBox('File was found on path: ' + FileSource, mbInformation, MB_OK);
end; 
```

# ruby-on-rails - 在 Rails_admin 中配置管理员

> ID：12364702
> 
> 赞同：0
> 
> 时间：2012-09-11T07:22:51.630
> 
> 标签：ruby-on-rails, admin

所以我实现了 rails admin gem，即使使用 cancan gem，我也无法找到密码保护 localhost:3000/admin 的方法

有人可以给我一个分步指南吗？我真的找不到管理面板的视图或控制器，所以我不确定如何用密码保护它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:16:37.647

此页面描述了您应该如何使用 Cancan：[https ://github.com/sferik/rails_admin/wiki/CanCan](https://github.com/sferik/rails_admin/wiki/CanCan)

```
# in config/initializers/rails_admin.rb
RailsAdmin.config do |config|
  config.authorize_with :cancan
end 
```

他们的能力.rb 示例可能比您需要的多一点，这是我的：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? :admin
      can :manage, :all
      can :access, :rails_admin   # grant access to rails_admin
      can :dashboard              # grant access to the dashboard
    end
  end

end 
```

然后，您必须将管理员角色授予用户。

您可以在 rails 控制台执行此操作：

```
user = User.find(1) #find user with ID 1
user.add_role :admin #assign role
user.has_role? :admin #should evaluate to True 
```

# c# - jpeg 未在服务器上加载 Response.Outputstream

> ID：12364710
> 
> 赞同：0
> 
> 时间：2012-09-11T07:23:25.353
> 
> 标签：c#, asp.net

我正在开发一个 ASP.net 2.0 c# 项目，我正在创建一个基本的验证码脚本。html 看起来像这样：

```
<img height="30" width="80" alt="" src="Captcha.aspx" /> 
```

这是 Captcha.aspx 背后的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Bitmap objBMP = new System.Drawing.Bitmap(60, 20);
        Graphics objGraphics = System.Drawing.Graphics.FromImage(objBMP);
        objGraphics.Clear( ColorTranslator.FromHtml( "#054196" ) );

        objGraphics.TextRenderingHint = TextRenderingHint.AntiAlias;

        // configure the text
        Font objFont = new Font("Arial", 8, FontStyle.Bold);
        string randomStr = "";
        int[] myIntArray = new int[5];
        int x;

        // randomise the text
        Random autoRand = new Random();

        for (x = 0; x < 5; x++)
        {
            myIntArray[x] = System.Convert.ToInt32(autoRand.Next(0, 9));
            randomStr += (myIntArray[x].ToString());
        }

        //add string to session
        Session.Add("randomStr", randomStr);

        // draw the text
        objGraphics.DrawString( randomStr, objFont, Brushes.White, 3, 3);

        // Set the content type and return the image
        Response.ContentType = "image/jpeg";
        Encoder quality = Encoder.Quality;
        EncoderParameter qualityParam = new EncoderParameter(quality, 100L);
        EncoderParameters encParams = new EncoderParameters( 1 );
        encParams.Param[0] = qualityParam;
        ImageCodecInfo jpgEncoder = GetEncoder(ImageFormat.Jpeg);
        objBMP.Save(Response.OutputStream, jpgEncoder, encParams);

        objFont.Dispose();
        objGraphics.Dispose();
        objBMP.Dispose();
        Response.Flush();
    }

    private ImageCodecInfo GetEncoder(ImageFormat format)
    {

        ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();

        foreach (ImageCodecInfo codec in codecs)
        {
            if (codec.FormatID == format.Guid)
            {
                return codec;
            }
        }
        return null;
    } 
```

这在我的本地机器上运行良好，但是当上传到我们的开发服务器时它失败了。由于我在项目中的角色，我无法直接访问开发服务器进行调试，所以这有点反复试验。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:55:01.923

事实证明，由于某种原因，服务器不喜欢 aspx 页面。所以我将验证码移到了 ashx 文件中，然后它就起作用了！

# javascript - 如何使用 ember.js 在目标旁边传递当前上下文中的信息

> ID：12364711
> 
> 赞同：0
> 
> 时间：2012-09-11T07:23:28.213
> 
> 标签：javascript, ember.js

我确实有一个视图，它遍历对象集合并打印简单的资源名称以及操作：

```
{{#each resource in resources}}
  <li><a {{action showResource resource}}>{{resource.name}}</a></li>
{{/each}} 
```

资源来自具有以下结构的模型：

```
{
   supported: ['a', 'b', 'c'],
   resources: [
      {
         id: 1,
         name: 'resource 1'
      }
   ]
} 
```

我现在的问题是，如何在 showResource 函数中获得“支持”属性？（showResource 函数本身在路由器中定义，并转换到新路由）。

```
...
showResource: Ember.Route.transitionTo('resource'),
...
resource: Ember.Route.extend({
route: '/resources/:resourceId',
connectOutlets: function(router, context) {
    router.get('projectController').connectOutlet('resource', TL.Resource.loadResource(context['id']));
} 
```

在呈现的新视图中，我现在确实需要访问先前模型的受支持属性。所以我打算以如下方式在connectOutlet中传递它：

```
router.get('projectController')
      .connectOutlet('resource', {supported: ???, resource: TL.Resource.loadResource(context['id'])}); 
```

我的问题是如何访问受支持的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:00:24.930

一种方法可能是将资源和支持的数组组合成一个对象，用于循环中的“上下文”。

```
var Resource = Ember.Object.extend({
    resource: null,
    supported: null
}); 
```

然后在您的视图/控制器中定义：

```
combinedResources: function() {
    var combined = [];
    this.get('resources').forEach(function(resource) {
        combined.push(Resource.create({
            resource: resource,
            supported: supported
        }))
    });

    return combined;
}.property('resources', 'supported') 
```

现在在模板中

```
{{#each resource in combinedResources}}
    <li><a {{action showResource resource}}>{{resource.resource.name}}</a></li>
{{/each}} 
```

# c# - OleDbConnection.Close() 不起作用

> ID：12364733
> 
> 赞同：0
> 
> 时间：2012-09-11T07:24:58.993
> 
> 标签：c#, oledb, oledbconnection

我有一种方法可以在本地 MDB-Acces 文件中插入一些数据。使用此代码可以正常工作：

```
try
{
   foreach (DataRow rowS99 in dtS99.Rows)
   {
      con.Open();
      da.InsertCommand = con.CreateCommand();
      da.InsertCommand.Parameters.AddWithValue("@wertListName", rowS99["WertListName"]);
      da.InsertCommand.Parameters.AddWithValue("@key", rowS99["Key"]);
      da.InsertCommand.Parameters.AddWithValue("@bezeichner", rowS99["Bezeichner"]);
      da.InsertCommand.Parameters.AddWithValue("@keyAufbereitet", rowS99["KeyAufbereitet"]);
      da.InsertCommand.CommandText = sql;
      da.InsertCommand.ExecuteNonQuery();
      con.Close();
   }
   check = true;
} 
```

当我将 Open 和 Close 方法放在 foreach 循环之外时，代码可以工作，但是用于连接的本地文件已经用 Visual Studio 打开，因此我无法删除或移动它。连接的状态表示之后`con.Close()`它已关闭。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:36:19.077

您不需要在循环中打开和关闭连接。如果您的表中有 500 行，那么您将打开和关闭连接 500 次，这不是最佳做法。

您的连接应该在循环之前的 Try 语句中打开，并在处理完所有行后关闭。

我认为你最好使用 Update() 函数而不是你上面做的方法。

您可以消除循环遍历每一行的需要。

[http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)

使用此功能，您只需调用 Update() 方法即可添加、编辑和删除行。您将需要设置所有 3 个命令，UPDATE、INSERT、DELETE。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:31:04.697

`IDbConnection.Close`默认情况下，该方法只是将连接返回到连接池。它不会关闭物理连接（网络连接或文件）。您可以禁用连接池（但这会降低应用程序的效率），或清除连接池（请参阅 参考资料[`OleDbConnection.ReleaseObjectPool`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.releaseobjectpool.aspx)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:31:08.810

试着放进`con.close`去`finally()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T15:18:57.387

```
try
{
 con.Open();
 foreach (DataRow rowS99 in dtS99.Rows)
 {
  da.InsertCommand = con.CreateCommand();
  da.InsertCommand.Parameters.AddWithValue("@wertListName", rowS99["WertListName"]);
  da.InsertCommand.Parameters.AddWithValue("@key", rowS99["Key"]);
  da.InsertCommand.Parameters.AddWithValue("@bezeichner", rowS99["Bezeichner"]);
  da.InsertCommand.Parameters.AddWithValue("@keyAufbereitet", rowS99["KeyAufbereitet"]);
  da.InsertCommand.CommandText = sql;
  da.InsertCommand.ExecuteNonQuery();
 }
 con.Close();
 check = true;
 OleDb.OleDbConnection.ReleaseObjectPool();
 GC.Collect();  // I know attation
} 
```

为我工作

# ember.js - Emberjs Data 以后如何加载 hasMany-Data

> ID：12364734
> 
> 赞同：7
> 
> 时间：2012-09-11T07:25:10.867
> 
> 标签：ember.js, ember-data

我有以下 Emberjs 数据模型：

```
App.File = DS.Model.extend({
  like: DS.attr('boolean'),
  comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
  file: DS.belongsTo('App.File'),
  comment: DS.attr('string')
}); 
```

并预加载：

```
 App.store.load(App.File, {id: 1, like: false}); 
```

现在我想，如果我得到这样的评论：

```
var f = App.store.find(App.File, 1);
var c = f.get("comments"); 
```

var c 是一个空的 EmberArray，并且向服务器发送了一个请求。但我没有收到请求？为什么以及如何做？我真的不想预加载评论。

此外，如果我添加评论，还要同时更改文件：

```
f.get("comments").createRecord({comment: "test"});
f.set("like", true);
App.store.commit(); 
```

两个请求被发送到服务器。但是，如果我随后返回以下 JSON（用于文件）：

```
{ "id": 1, like: true } 
```

我的第一个可见评论再次消失。为什么？我该怎么办？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:28:43.973

*关于您问题的第一部分：*您应该在文件数据中填充评论 ID：

```
App.store.load(App.File, {id: 1, like: false, comments: [1, 2, 3]}); 
```

所以评论会在需要时被延迟加载。

*关于第二部分：*您当然不会序列化来自服务器的回复的评论 ID，因此评论会被重置，因为您描述的是一个空的评论列表。

您至少应该返回之前显示的评论 ID...这两个问题是相互关联的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:41:11.523

看起来这个问题的*部分*答案是使用`DS.Adapter.findAssociation(...)`适配器中的方法。但是，当从服务器再次加载父记录时，我遇到了与您相同的问题——所有子记录都被删除了。

我已经发布了[我自己的问题](https://stackoverflow.com/questions/13699796/ember-data-loading-hasmany-association-on-demand)，看看我是否可以解决这个问题。如果这个问题得到了回答，它也可能是你的答案。

# excel - 宏：如何浏览excel文件和读取数据

> ID：12364735
> 
> 赞同：0
> 
> 时间：2012-09-11T07:25:14.003
> 
> 标签：excel, file, vba

我分三步编写宏脚本：

通过浏览读取 excel 文件 - 转换为 xml 格式 - 通过浏览将 xml 文件导出到特定路径。我知道如何通过浏览导出。

```
Set objShell = CreateObject("Shell.application")
Set objFolder = objShell.BrowseForFolder(0, "choose the path you want to export the xml file", 0, 0) 
```

但这一个是browseforfolder。

如何浏览文件？如果我想通过浏览导入excel数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:13:58.713

要打开“打开文件”对话框，我使用以下命令：

```
FileOpenName = Application.GetOpenFilename(fileFilter:="All files (*.*), *.*") 
```

然后你将需要以下来打开文件

```
Open FileOpenName For (Binary|Write) as #1
   'Do writing operations here
Close #1 
```

# python - 这是使 mysql 在 django 应用程序中与 gevent 良好配合的最佳选择

> ID：12364736
> 
> 赞同：2
> 
> 时间：2012-09-11T07:25:19.267
> 
> 标签：python, mysql, django, gevent, gunicorn

我有一个在 gunicorn 上运行的 django 应用程序，以 mysql 作为数据库。我添加了 gevent 以处理多个文件上传，但我不确定让 gevent 与 mysql 数据库良好配合的最佳驱动程序选项是什么。

（请注意数据库已经包含大量数据，所以迁移到 postgres 是一个没有吸引力的选择）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:01:13.600

您可能想使用 pymysql，因为它可以进行猴子补丁。我自己还没有使用过它，但这是 Cody Soyland 今年早些时候在 DjangoCon 上名为“Django on Gevent”的演示文稿的 YouTube 视频：[http ://www.youtube.com/watch?v=nocGRsytBkk](http://www.youtube.com/watch?v=nocGRsytBkk)

Pymysql 可以在这里找到：[https ://github.com/petehunt/PyMySQL](https://github.com/petehunt/PyMySQL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:34:05.287

您是否检查了[使用 Gevent 的项目](http://code.google.com/p/gevent/wiki/ProjectsUsingGevent)？

**编辑**：根据上面的页面 gevent-MySQL 不再支持。这使得[ultramysql](https://github.com/esnme/ultramysql)成为唯一可行的选择。

# java - 在 eclipse 中运行 java 应用程序与直接运行有什么不同？

> ID：12364746
> 
> 赞同：1
> 
> 时间：2012-09-11T07:25:50.233
> 
> 标签：java, eclipse, java-native-interface

我正在开发一个 java 应用程序，它使用一个使用 JNI 的 dll。

dll仍在开发中，所以我猜它有一些内存问题。

当我使用 Eclipse 的运行对话框运行我的应用程序时，应用程序非常不稳定并且很可能崩溃。当我从 Eclipse 外部启动相同的应用程序时，应用程序运行更加稳定。仍然有崩溃，但要少得多。

还有两个问题：

当应用程序作为 Debug 运行时有什么区别？

dll分配的内存不是虚拟机的内存。因此影响虚拟机内存的参数（如 -Xmx）不会影响 dll 的内存分配。这个说法正确吗？

提前感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:32:26.340

这并不能完全回答您的问题，但听起来类似于我在从 Java 运行本机代码时遇到的问题。

如果以一种方式运行应用程序似乎比另一种方式更稳定，那么您的系统上可能安装了多个 JVM，而 Eclipse 使用的 JVM 与从命令行使用的方式不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:56:15.500

请详细说明“不稳定”。您收到哪些类型的错误？

正如 codebox 所建议的，我还将确保它与运行的 JVM 版本相同。

您可以通过在启动时打印 JRE 信息来做到这一点：

```
System.out.println("Vendor: " + System.getProperty("java.vendor") + ", Version: " + System.getProperty("java.version")); 
```

要在 Eclipse 中更改 JRE 版本，请转到：Window -> Preferences -> Java -> Installed JREs

# php - Wordpress 基于类别的搜索

> ID：12364750
> 
> 赞同：0
> 
> 时间：2012-09-11T07:26:13.487
> 
> 标签：php, wordpress

正常搜索工作正常，但我需要根据 wordpress 中的类别进行搜索。例如..假设我有两个名为“汽车”和“公共汽车”的类别，如果我选择汽车类别，那么搜索应该显示汽车类别的结果，如果我选择了公共汽车类别，那么搜索应该显示公共汽车类别的结果。

截至目前我正在使用此代码

```
<?php wp_dropdown_categories('show_option_all='.__('All Categories',        'appthemes').'&hierarchical='.get_option('cp_cat_hierarchy').'&hide_empty='.get_option('cp_    cat_hide_empty').'&depth='.get_option('cp_search_depth').'&show_count='.get_option('cp_cat_    count').'&pad_counts='.get_option('cp_cat_count').'&orderby=name&title_li=&use_desc_for_tit    le=1&tab_index=2&name=scat&selected='.cp_get_search_catid().'&class=searchbar&taxonomy='.AP    P_TAX_CAT); ?> 
```

此代码在 Classipress 主题中使用

谢谢肖比特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:26:21.130

有几种方法可以实现这一点，您必须用下面的代码替换 searchform.php 中的标准 WordPress 搜索表单。

这将启用基于类别的搜索。

```
<form role="search" method="get" id="searchform" action="<?php bloginfo('siteurl'); ?>">
<div>
<label class="screen-reader-text" for="s">Search for:</label>
<input type="text" value="" name="s" id="s" /> 
in <?php wp_dropdown_categories( 'show_option_all=All Categories' ); ?> 
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form> 
```

# java - 从 Eclipse 中的项目运行 cmd 命令

> ID：12364755
> 
> 赞同：-2
> 
> 时间：2012-09-11T07:26:40.647
> 
> 标签：java, windows, eclipse, process, cmd

我有一个程序，它由 cmd 命令运行。

我想从我的 Eclipse (Java) 项目中调用它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:41:27.673

**Java 5 或更新版本：**

看看[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

**对于旧版本：**

```
Runtime.getRuntime().exec(command); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:28:55.657

```
By "External Tools"\"External Tools Configuration" ;) 
```

或者试试

```
Runtime.getRuntime().exec(command) 
```

# c# - 通过 Visual Studio 2010 调试 DirectShow

> ID：12364760
> 
> 赞同：0
> 
> 时间：2012-09-11T07:26:59.913
> 
> 标签：c#, windows, directshow, 64-bit, directshow.net

我正在使用 Visual Studio 2010，我的电脑是 Win 7 和 x64。我成功构建了一个基于 DirectShow 的 COM 对象，它是一个虚拟摄像头，现在 Skype 或 YahooMessenger 等应用程序可以看到我的虚拟网络摄像头。我现在想知道的是通过 Visual Studio 2010 调试代码。感谢您提供任何帮助。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:59:28.613

在调试模式下编译，注册您的过滤器调试版本（使用 regsvr32），转到您的项目属性 -> 调试并让命令指向您要在其中使用过滤器的应用程序（无论是 Skype 还是 YM）。然后转到调试-> 开始调试。

# php - 表单输入字段

> ID：12364765
> 
> 赞同：0
> 
> 时间：2012-09-11T07:27:17.450
> 
> 标签：php, forms, validation

我有一个表单，它从数据库中获取它的值，并在提交时检查这些值是否为空。当前正在填写这些值，但检查时未注册为存在。

简化形式代码：

```
if( isset($_SESSION['ERRMSG_ARR']) && is_array($_SESSION['ERRMSG_ARR']) && count($_SESSION['ERRMSG_ARR']) >0 ) {
 echo '<ul class="err">';
foreach($_SESSION['ERRMSG_ARR'] as $msg) {
    echo '<li>',$msg,'</li>'; 
}
echo '</ul>';
unset($_SESSION['ERRMSG_ARR']);
}
<form action="addStudent.php" method="post" >
 <?php
     $result = mysql_query("SELECT firstname, lastname FROM members WHERE login='$_SESSION[SESS_LOGIN]'");
    $row = mysql_fetch_array($result);
 ?>
Student Name: <input type="text" name="student" value="<?php echo $row['firstname'] . ' ' . $row['lastname']; ?>" >
<input type="submit" value="Submit" >
</form> 
```

检查值是否为空的代码：

```
$errmsg_arr = array();
$errflag = false;
function clean($str) {
   $str = @trim($str);
   if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
   return mysql_real_escape_string($str);
  } 
$student = clean($_POST['student']);

if($student == '') {
$errmsg_arr[] = 'Please add student name.';
$errflag = true;
} 

if($errflag) {
$_SESSION['ERRMSG_ARR'] = $errmsg_arr;
session_write_close();
header("location: classSignUp.php);
    exit();
} 
```

真正让我困惑的是，这是在我的本地主机上运行的，现在当我尝试传输代码时它已经停止工作。我不认为这是我的数据库的问题，因为值正在填写到表单中，只是在我提交时没有显示为具有值。

# php - Firebug 在 Codeigniter 应用程序中破坏会话变量

> ID：12364775
> 
> 赞同：1
> 
> 时间：2012-09-11T07:27:57.017
> 
> 标签：php, codeigniter, firebug

好吧，我在这里遇到了奇怪的问题。我有一个需要用户登录的 codeigniter 2 Web 应用程序。

当我从一页跳到另一页时，我的会话运行良好。但是当我打开 Firebug 并尝试跳转到另一个页面时，我又回到了登录页面。

每次我打开萤火虫时都会发生这种情况，但如果没有打开它就可以正常工作。我不知道发生了什么。

为什么打开 Firebug 时 Codeigniter 会话不起作用？

任何帮助将不胜感激。

**编辑：**

我有两个使用 Codeigniter 制作的独立应用程序。两者都有相同的问题。

PS我在我的本地机器上遇到了这个问题，还没有签入远程服务器。

谢谢，萨宾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:18:05.757

如果您有用户代理的会话过滤，那就是问题所在。firebug 添加了额外的东西，可能导致 CI​​ 认为您的会话已被劫持。

如果您在全球范围内安装了 firebug，您可能会注意到一些网站出于这个原因会告诉您禁用他们网站的插件（例如 gmail）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T01:22:57.380

此外，如果会话未设置，请在 cookie_domain 中尝试几个不同的值。将其设置为空对我有用。看来 codeigniter 试图为您填写值 ($config['cookie_domain'] = "";)

# java - 定义一个地图层类java

> ID：12364778
> 
> 赞同：1
> 
> 时间：2012-09-11T07:28:03.423
> 
> 标签：java, android, class, object, layer

我正在寻找定义一个地图图层类。我想知道的是：这看起来对吗？基本上我所追求的是在一个图层对象下定义一组几何图形。

但是由于我缺乏经验，我可能错过了一些可以使这项工作顺利进行的事情。

我打算稍后使用 OpenGL 将其放到屏幕上。

任何建议将不胜感激！

```
import java.util.ArrayList;

public class layer {

    //Properties for a layer
    double mbrMinX;
    double mbrMinY;
    double mbrMaxX;
    double mbrMaxY;

    double zoom_level_min;
    double zoom_level_max;

    ArrayList<geometries> geometries;

    public class geometries {

        public class point {
            double dX;
            double dY;

            public point(double cX, double cY) {
                this.dX = cX;
                this.dY = cY;
            }
        }

        public class polyline {

            ArrayList<point> polylineList;

            public polyline(point p) {
                this.polylineList.add(p);
            }
        }

        public class polygon {

            ArrayList<point> polygonList;

            public polygon(point p) {
                this.polygonList.add(p);
            }
        }

        public class multipoint {

            ArrayList<point> multipointList;

            public multipoint(point p) {
                this.multipointList.add(p);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:35:16.873

几个问题：

java 中对类对象的声明和其他引用应该大写。
示例： `public class Layer {...}` 示例： `public Polyline(Point p) {...}`

此外，您的 ArrayList 对象已声明，但未实例化。
例子： `ArrayList<Point> polygonlist = new ArrayList<Point>();`

最后，整体结构对于java来说有点奇怪。通常，在java中，每个类都包含在它自己的文件中。在这种情况下，您已经定义了嵌套的“内部”类，这很好，但通常只有当内部类只与外部类相关时才会这样做。

您可能还想查看用于图形的标准 java api，它是一个用于绘制点、线等的扩展标准库。

# actionscript-3 - 访问（到目前为止）未定义的属性 AS3

> ID：12364787
> 
> 赞同：1
> 
> 时间：2012-09-11T07:28:48.917
> 
> 标签：actionscript-3, undefined

我有一个函数可以在满足某些其他条件后在屏幕上创建一个指针。我有一个单独的函数用于在屏幕上移动指针（因为第一个函数和第二个函数的条件是互斥的）。据我所知，问题在于，在加载电影闪光灯时，会立即查看主时间轴上的所有代码，并意识到我的第二个函数，即移动指针的函数，正在引用指针的 .x 和 .y即使指针不存在。在第一个函数执行并创建指针之前，第二个函数的条件会阻止它发生。

我的问题是，是否有任何命令可以用来告诉 flash“pointer.x 和 pointer.y 尚不存在，但是当你需要它们时，它们会，所以冷静”还是我需要开始隐藏代码在movieclip本身还是什么？我对 AS3 还是很陌生，所以我的方法不是最...有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:19:50.757

是的，有一些。您进入第二个功能并检查：

```
if (!pointer) return; 
```

这将检查“指针”是否存在，并且不为空或未定义。基本上这是正确的编程方法，首先检查对象的可用性，然后访问它们。

# grails - 如何调用另一个类的枚举？

> ID：12364790
> 
> 赞同：3
> 
> 时间：2012-09-11T07:28:57.530
> 
> 标签：grails, enums

我目前正在从事一个 grails 项目。我在某个项目文件夹中创建了一个枚举，并希望从位于另一个项目文件夹中的类中访问它。我的枚举看起来像这样：

```
public enum Options {  

OPTION_1("Option_1"),
OPTION_2("Option_2"),
OPTION_3("Option_3");

final String option;

Options(String option) {
    this.option = option;
} 
```

}

现在，我在从应用程序中的某个类调用该枚举时遇到问题。例如：

```
Response{
option = new Option.OPTION_1("Option_1") //not sure on how to call an enum
} 
```

但是我在这里想要做的是将枚举分配给 Response {} 部分中的属性选项..

我将如何正确地做到这一点？请帮忙？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T07:34:33.183

枚举是预定义的对象，它会有一个私有构造函数，你不能用 new 创建一个新实例。你只需要调用 Option.OPTION_1;

```
Response{
option = Option.OPTION_1; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T07:33:34.817

您只需要引用它，因为`Options.OPTION_1`枚举没有新内容。

```
Option option = Options.OPTION_1; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T07:33:39.767

您不能实例化枚举对象，唯一的实例由您在枚举类中定义。

所以正确的做法是：

```
Response {
    option = Options.OPTION_1;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T07:39:34.973

您不能创建枚举的新实例。没有必要，因为它只能保存固定数量的值。`option = new Option.OPTION_1("Option_1")`也会这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T07:33:04.277

应该管用。

```
Response{
def option = Option.OPTION_1;
} 
```

相关链接[groovy 中的枚举](http://groovy.codehaus.org/Using+Enums)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T07:35:54.900

不知道其中的 grails 部分，但您的用法`enum`似乎不正确

如果你有一个枚举

```
public enum Day {
    SUNDAY, MONDAY, TUESDAY, WEDNESDAY,
    THURSDAY, FRIDAY, SATURDAY 
} 
```

`Day.MONDAY`您可以使用,`Day.SUNDAY`等访问单个值。

请检查[java 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

# javascript - 如何在 if 和 javascript 中使用 AND 语句？

> ID：12364798
> 
> 赞同：14
> 
> 时间：2012-09-11T07:29:29.630
> 
> 标签：javascript

大家好，我正在尝试运行多个 javascript 并使用 AND 语句。当用户单击 value="1986" 的选项并单击 value="3" 的其他选项时，会出现一些文本。我在 if 语句中使用了 AND 语句，但它不起作用。这是我的代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script></script>
    <script type="text/javascript">
$(document).ready(function() {

    $('#main').on('change', '.select-box', function() {

        if ($(".select-box option[value='3']").attr('selected') & $(".select-box option[value='1986']").attr('selected')) {

            $('#demo').html("Hello World");

        }

    });

});
    </script>
<script type="text/javascript">

var x="",i;
for(i=1986;i<2013;i++)
{
x=x + "<option value='"+i+"'> " + i + "</option>";
}
$(document).ready(function() {
document.getElementById("demo2").innerHTML="<select class='select-box'>"+x+"</select>";
});
</script>

</head>
<body>  
    <p id="demo2"></p>
    <div id="main">
<select class="select-box">
      <option value="0">alert</option>
      <option value="1">alert to</option>
      <option value="2">no alert</option>
      <option value="3">best alert</option>
    </select> 
<p><br/>
    <div id="demo"></div>

    </div>

    </body> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T07:31:14.927

要使用 AND 语句，它应该是`&&`.

因此，对于您的 if 语句，它应该是

```
if ($(".select-box option[value='3']").attr('selected') && $(".select-box option[value='1986']").attr('selected')) {
            $('#demo').html("Hello World");
} 
```

[这](http://www.w3schools.com/js/js_comparisons.asp)是有关布尔逻辑的更多信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T07:30:56.950

你需要使用`&&`

```
if ($(".select-box option[value='3']").attr('selected') && $(".select-box option[value='1986']").attr('selected'))
________________________________________________________^ 
```

逻辑运算符：

```
&& = and
|| = or
!  = not 
```

并且您必须从第一个更改选择类，`select`否则您将无法同时获得它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-05T23:35:18.940

第二个（外）括号似乎也很重要。

# python - 如何将一些生成的测试标记为 xfail/skip？

> ID：12364801
> 
> 赞同：5
> 
> 时间：2012-09-11T07:29:42.543
> 
> 标签：python, testing, pytest

使用 py.test 我经常生成测试，其中一些测试用例预计会失败。如何将它们标记为 xfail？如果我把它`@py.test.mark.xfail`放在测试函数上，这意味着它的所有实例都是 xfail。如果我`py.test.xfail()`在测试中执行它实际上未通过测试，而不仅仅是将其标记为 xfail。我可以用 metafunc 做些什么来添加这个标记吗？

例如

```
# code - function with a bug :)

def evenHigherThanSquare(n):
    return n**2

# test file

def pytest_generate_tests(metafunc):
    data = [
        (2, 4),
        (3, 10), # should be xfail
        (4, 16),
        (5, 26), # should be xfail
        ]
    for input, expected in data:
        if metafunc.function is test_evenHigherThanSquare:
            metafunc.addcall(funcargs=dict(input=input, expected=expected))

def test_evenHigherThanSquare(input, expected):
    assert evenHigherThanSquare(input) == expected 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:10:32.423

当然，您可以使用[funcarg 工厂](http://pytest.org/latest/funcargs.html)来[应用 xfail 标记](http://pytest.org/latest/funcargs.html#_pytest.python.FuncargRequest.applymarker) [（从 1.3.2 开始）](http://pytest.org/latest/changelog.html#changes-between-1-3-1-and-1-3-2)：

```
def pytest_generate_tests(metafunc):
    data = [
        # input # output # is expected to fail?
        (2, 4, False),
        (3, 10, True),
        (4, 16, False),
        (5, 26, True),
        ]
    for input, expected, xfail in data:
        if metafunc.function is test_evenHigherThanSquare:
            metafunc.addcall(funcargs=dict(input=input, expected=expected),
                             param=xfail)

def pytest_funcarg__xfail(request):
    if request.param:
        request.applymarker(py.test.mark.xfail)

def test_evenHigherThanSquare(input, expected, xfail):
    assert evenHigherThanSquare(input) == expected 
```

在这里，我们使用未使用的`xfail`参数来`test_evenHigherThanSquare`触发`pytest_funcarg__xfail`对每个测试项的调用；它使用`param`提供的内容`metafunc.addcall`来决定是否使测试失败。

Funcarg 工厂更常用于生成在收集时创建成本高昂的参数，但应用标记也是完全支持的用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-22T10:19:14.770

这是另一种方式：

```
def evenHigherThanSquare(n):
    return n ** 2

# test file

def pytest_generate_tests(metafunc):
    data = [
        pytest.param(2, 4, marks=[]),
        pytest.param(3, 10, marks=[pytest.mark.xfail]),
        pytest.param(4, 16, marks=[]),
        pytest.param(5, 26, marks=[pytest.mark.xfail]),
    ]
    if metafunc.function is test_evenHigherThanSquare:
        metafunc.parametrize("input, expected", data)

def test_evenHigherThanSquare(input, expected):
    assert evenHigherThanSquare(input) == expected 
```

# sql-server - SQL Server 2005 密码更改

> ID：12364802
> 
> 赞同：0
> 
> 时间：2012-09-11T07:29:45.930
> 
> 标签：sql-server

我有一个 mssql 2005 和软件（由 Visual Basic 6 编写），该软件连接到 mssql.（本地），但问题是“sa”用户密码每天都在变化！编写此软件的公司不会给我们密码。而且 Windows 身份验证不起作用，我认为他们也删除了 Windows 用户。

我在 msdn 上搜索...我在 LAN 中发现，来自客户端的数据包以 SSL 类型加密并发送到 mssql，并在特定数据包中包含数据库的用户名和密码，如果该用户和密码相同使用 db user&pass 它可以完全访问 db。

1.  我使用了回溯和 metasploit，但它使用字典进行攻击，但对我没有帮助。
2.  我使用wireshark 找到那个特定的数据包，然后我想我找到了它（99% 我确定）但是那个数据包有很多不明确的字符，我找不到那些。
3.  你认为如果我使用 SSLSTRIP 制作假证书然后在客户端和服务器之间使用它（作为网关）我可以得到吗？如何？
4.  我可以使用单用户模式将任何用户添加到 mssql 吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:33:57.330

你完全是从错误的角度来解决这个问题的。你有一个额外的软件包，以防止访问你的数据。你的问题是供应商，抛弃他。使用不同的软件，它背后有一个合理的供应商。

以下是 MSDN 官方批准的方法，用于重新获得对已锁定管理员的 SQL Server 的访问权限：[当系统管理员被锁定时连接到 SQL Server](http://msdn.microsoft.com/en-us/library/dd207004.aspx)

# jquery - 事件发生但脚本直到事件发生两次才执行

> ID：12364805
> 
> 赞同：1
> 
> 时间：2012-09-11T07:29:55.773
> 
> 标签：jquery, jquery-ui, datepicker

当下拉列表具有特定的选定值时，我希望将日历设置为输入字段。我面临的问题是事件发生但脚本直到单击发生多次才执行，我尝试`click`但`focus`结果相同！

这是我的代码

```
 <select name="selectKey" id="selectKey">
   <option value="1" >mail no</option>
   <option value="2" > mail type</option>
   <option value="3"  selected="selected"> mail date</option>
   <option value="4" >title</option>
</select>

<input type="text" name="srchTxt" id="srchTxt" value=""> 
```

这是js

```
$(document).ready(function() {

 $('input[name=srchTxt]').bind('focus', function(event) {
    // event.stopPropagation();

    if ($("select[name='selectKey']").children(':selected').val() == 3) {  
        console.log('ysssssssssssssss');
        $('input[name=srchTxt]').datepicker({
            //   showWeek: true,
            firstDay: 1,
            dateFormat: 'dd/mm/yy'
        })
    }
   });
});​ 
```

这是一个演示[http://jsfiddle.net/VAvwG/](http://jsfiddle.net/VAvwG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:37:45.003

只是添加`.datepicker('show')`到最后

```
$(document).ready(function() {
    $('input[name=srchTxt]').bind('focus', function(event) {
        if ($("select[name='selectKey']").val() == 3) {  
            $('input[name=srchTxt]').datepicker({
                firstDay: 1,
                dateFormat: 'dd/mm/yy'
            }).datepicker('show')
        }
    });
}); 
```

[http://jsfiddle.net/VAvwG/3/](http://jsfiddle.net/VAvwG/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:42:42.817

那是因为您第一次关注输入时`datepicker`并没有添加它。为什么不使用更改事件？

```
$(document).ready(function() {
    $('#selectKey').on('change', function(event) {
        if (this.value == 3) {
            $('#srchTxt').datepicker({
                firstDay: 1,
                dateFormat: 'dd/mm/yy'
            })
        }
    }).change()
}); 
```

[http://jsfiddle.net/VAvwG/5/](http://jsfiddle.net/VAvwG/5/)

# c++ - 类中移动构造函数的位置/顺序很重要？模板化转换运算符与移动构造函数结合使用

> ID：12364806
> 
> 赞同：3
> 
> 时间：2012-09-11T07:29:58.780
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, visual-studio-2012

这看起来像一个编译器错误，但案例是如此简单我有点怀疑，所以我正在寻找一个确认。VS2010 和 VS2012 均可重现。下面的示例无法编译。给出此错误：

> 错误 1 ​​错误 C2440：“类型转换”：无法从“ConvertibleToAny”转换为“OtherType<_Ty>”test.cpp 40

如果将移动构造函数的位置移动到构造函数`OtherType(ThisType &&)`之上`OtherType( int )`，它会突然编译。

```
#include "stdafx.h"
#include <string>

using namespace std;

template<class _Ty>
struct OtherType
{
  typedef OtherType<_Ty>  ThisType;

  OtherType()
  { 
  }

  OtherType( int )
  { 
  }

  // The move constructor
  OtherType(ThisType && )
  {
  }
};

struct ConvertibleToAny
{    
  template <class AnyType>
  operator AnyType()
  {
    return AnyType();
  }
};

int _tmain(int argc, _TCHAR* argv[])
{

  (OtherType<wstring>) ConvertibleToAny();

    return 0;
} 
```

这是一个错误还是这是预期的行为？如果符合预期，请引用 C++11 规范中的相关段落。我已经在 Microsoft Connect 上将此作为错误发布，[请单击此处将其打开](https://connect.microsoft.com/VisualStudio/feedback/details/762036/position-order-of-move-constructor-within-class-matters-templated-cast-operator-fails-when-used-in-conjunction-with-move-constructor#details)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T12:07:15.153

你的表情

```
(OtherType<wstring>) ConvertibleToAny() 
```

是从临时用户定义类型到用户定义类型的一元显式转换 (5.4)，按照 5.4:4 解释为`static_cast`：

```
static_cast<OtherType<wstring>>(ConvertibleToAny()) 
```

每个 5.2.9:4 具有初始化临时变量的有效性`t`：

```
OtherType<wstring> t(ConvertibleToAny()) 
```

这是*直接初始化*(8.5:15)，因此 (8.5:16) 根据 13.3.1.3 中的规则，所有单参数构造函数都`OtherType`参与重载决议。

在 13.3:2 之后，the`int`和 move 构造函数都可用并且根据 13.3.2 是可行的，因此对于单个参数，我们有两个可能的隐式转换序列 (13.3.3.1)：

```
ConvertibleToAny [temporary] -> int
ConvertibleToAny [temporary] -> OtherType<wstring> && 
```

在 13.3.3.1.2 之后，这些序列之间没有排序，因此没有最佳可行函数，重载决议失败 (13.3:3)，并且程序格式错误。

* * *

如果转换函数 (12.3.2) 是`explicit`(12.3.2:2) 则只考虑直接初始化。尽管隐式转换序列 (13.3.3.1) 是隐式转换 (4:3)，因此涉及复制初始化，但 12.3.2:2 示例中标准的意图显然是在这种情况下应考虑显式转换函数; 因此，重载解决方案似乎再次失败。

# oracle - Oracle：如何删除特定分区的子分区

> ID：12364808
> 
> 赞同：7
> 
> 时间：2012-09-11T07:30:10.220
> 
> 标签：oracle, oracle11g, partitioning, database-partitioning

我正在使用带有间隔分区和列表子分区的 oracle 11 表，如下所示（简化）：

```
CREATE TABLE LOG
(
  ID NUMBER(15, 0) NOT NULL PRIMARY KEY
, MSG_TIME DATE NOT NULL
, MSG_NR VARCHAR2(16 BYTE)
) PARTITION BY RANGE (MSG_TIME) INTERVAL (NUMTOYMINTERVAL (1,'MONTH'))
  SUBPARTITION BY LIST (MSG_NR)
    SUBPARTITION TEMPLATE (
     SUBPARTITION login VALUES ('FOO')
   , SUBPARTITION others VALUES (DEFAULT)
   )
   (PARTITION oldvalues VALUES LESS THAN (TO_DATE('01-01-2010','DD-MM-YYYY'))); 
```

如何在不知道子分区的（系统生成的）名称的情况下删除特定月份的特定子分区？有一种语法[“alter table ... drop subpartition for (subpartition_key_value , ...)”](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_3001.htm#i2131072)，但我看不到指定删除子分区的月份的方法。[分区管理指南](http://docs.oracle.com/cd/B28359_01/server.111/b32024/part_admin.htm#autoId44)也没有给出任何示例。8-}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:40:09.413

您可以使用元数据表来获取特定的子分区名称：

```
SQL> insert into log values (1, sysdate, 'FOO');

1 row(s) inserted.

SQL> SELECT p.partition_name, s.subpartition_name, p.high_value, s.high_value
  2    FROM    user_tab_partitions p
  3         JOIN
  4            user_tab_subpartitions s
  5         ON s.table_name = p.table_name
  6        AND s.partition_name = p.partition_name
  7        AND p.table_name = 'LOG';

PARTITION_NAME  SUBPARTITION_NAME  HIGH_VALUE   HIGH_VALUE
--------------- ------------------ ------------ ----------
OLDVALUES       OLDVALUES_OTHERS   2010-01-01   DEFAULT
OLDVALUES       OLDVALUES_LOGIN    2010-01-01   'FOO'
SYS_P469754     SYS_SUBP469753     2012-10-01   DEFAULT
SYS_P469754     SYS_SUBP469752     2012-10-01   'FOO'

SQL> alter table log drop subpartition SYS_SUBP469752;

Table altered. 
```

如果您想动态删除一个分区，那么在视图中找到它可能会很棘手，`ALL_TAB_SUBPARTITIONS`因为该`HIGH_VALUE`列可能不容易查询。在这种情况下，您可以使用[`DBMS_ROWID`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_rowid.htm#CIHCAIFH)来查找`object_id`给定行的子分区：

```
SQL> insert into log values (4, sysdate, 'FOO');

1 row(s) inserted.

SQL> DECLARE
  2     l_rowid_in         ROWID;
  3     l_rowid_type       NUMBER;
  4     l_object_number    NUMBER;
  5     l_relative_fno     NUMBER;
  6     l_block_number     NUMBER;
  7     l_row_number       NUMBER;
  8  BEGIN
  9     SELECT rowid INTO l_rowid_in FROM log WHERE id = 4;
 10     dbms_rowid.rowid_info(rowid_in       =>l_rowid_in     ,
 11                           rowid_type     =>l_rowid_type   ,
 12                           object_number  =>l_object_number,
 13                           relative_fno   =>l_relative_fno ,
 14                           block_number   =>l_block_number ,
 15                           row_number     =>l_row_number   );
 16     dbms_output.put_line('object_number ='||l_object_number);
 17  END;
 18  /

object_number =15838049

SQL> select object_name, subobject_name, object_type 
  2    from all_objects where object_id = '15838049';

OBJECT_NAME     SUBOBJECT_NAME  OBJECT_TYPE
--------------- --------------- ------------------
LOG             SYS_SUBP469757  TABLE SUBPARTITION 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T12:17:14.703

事实证明，“subpartition for”语法确实有效，尽管这似乎是 Oracle 不想告诉你的秘密。:-)

```
ALTER TABLE TB_LOG_MESSAGE DROP SUBPARTITION FOR 
      (TO_DATE('01.02.2010','DD.MM.YYYY'), 'FOO') 
```

这将删除包含 MSG_TIME 2010/02/01 和 MSG_NR FOO 的子分区。（没有必要存在具有此确切 MSG_TIME 和 MSG_NR 的实际行。但是，如果没有这样的子分区，则会引发错误。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T20:04:18.627

感谢您的帖子-它对我非常有用。

尽管在上面的脚本中进行了一项观察，以识别分区并将其删除：

`object_id`返回的不是`dbms_rowid.rowid_info`表的`object_id`。`all_objects`它实际上是`data_object_id`. 据观察，通常这些 id 匹配。但是，在多次截断分区表后，这些 id 在我的数据库中出现了分歧。因此，改用`data_object_id`来找出分区的名称可能是合理的：

```
select object_name, subobject_name, object_type 
from all_objects where data_object_id = '15838049';

From the table description of ALL_OBJECTS: 
```

OBJECT_ID 对象的对象编号 DATA_OBJECT_ID 包含对象的段的对象编号

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_rowid.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_rowid.htm)

在上述链接中提供的示例代码中，`DBMS_ROWID.ROWID_OBJECT(row_id)`用于派生由 给出的相同信息`dbms_rowid.rowid_info`。但是，围绕此示例的文档提到它是来自 ROWID 的数据对象编号。

> 例子
> 
> 此示例返回 EMP 表中一行的 ROWID，使用 DBMS_ROWID 包中的 ROWID_OBJECT 函数从 ROWID 中提取数据对象编号，然后显示对象编号：
> 
> DECLARE object_no INTEGER; row_id ROWID；... BEGIN
> SELECT ROWID INTO row_id FROM emp WHERE empno = 7499; object_no := DBMS_ROWID.ROWID_OBJECT(row_id); DBMS_OUTPUT.PUT_LINE('obj.#是'|| object_no); ...

# php - 在 wordpress 中使用全局 $wpdp 调用博客类别

> ID：12364810
> 
> 赞同：0
> 
> 时间：2012-09-11T07:30:13.950
> 
> 标签：php, mysql, wordpress

我正在创建一个类别小部件，这样我就可以只在我想要的页面上拥有博客类别，因此它更适合我的主题:)

无论如何，这里是小部件编码，我认为还可以，但我无法测试它，因为我不确定如何调用链接，调用哪一列。

```
class ubl_blog_cats extends WP_Widget {

    public function __construct() {
        parent::__construct(
          'ubl_blog_cats',
          'UBL Blog Categories',
          array( 'description' => __( 'Displays The Bog Categories'))
        );
    }

    public function form( $instance ) { 

        $title = (isset( $instance[ 'title' ])) ? $instance['title' ] : 'Blog Categories'; ?> 

        <p>
            <label for="<?php echo $this->get_field_id( 'title' ); ?>"><?php _e( 'Title:' ); ?></label>
            <input class="widefat" id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" type="text" value="<?php echo esc_attr( $title ); ?>" />
        </p>

<?php }

    public function update( $new_instance, $old_instance ) {
        $instance = array();
        $instance['title'] = strip_tags( $new_instance['title'] );
        return $instance;
    }

    public function widget( $args, $instance ) {

        global $wpdb;

        extract( $args );

        $title = apply_filters( 'widget_title', $instance['title'] );

        if ( ! empty( $title ) ) echo '<div class="widget_title" id="widget">' . $title . '</div>';

        $ublmostpop = new $wpdb->get_results("
        SELECT * 
        FROM wp_term_relationships 
        LEFT JOIN wp_term_taxonomy 
        ON (wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id) 
        LEFT JOIN wp_terms on wp_term_taxonomy.term_taxonomy_id = wp_terms.term_id 
        WHERE wp_term_taxonomy.taxonomy = 'category' 
        GROUP BY wp_term_taxonomy.term_id");

        echo '<div class="navcat"><ul>';

        foreach($ublmostpop as $ublmp){ ?>

                <li><a href="" title=""></a></li>

        <?php } ?>

        </ul></div>

<?php 
        wp_reset_postdata();
        echo $after_widget;

    }

}

register_widget( 'ubl_blog_cats' );

?> 
```

另外请让我知道这个小部件是否不起作用:)

# directx - 好像我的像素着色器没有被调用

> ID：12364812
> 
> 赞同：2
> 
> 时间：2012-09-11T07:30:23.693
> 
> 标签：directx, hlsl, vertex-shader, pixel-shader

我一直在搞乱 DirectX，而且我一直在研究我的这个奇怪的想法已经有一段时间了。似乎我的像素着色器由于某种奇怪的原因没有被调用。我不知道这是否可能，或者这是我的一些愚蠢的错误。代码如下（我从教程中复制了大部分内容。）

着色器（HLSL）代码如下：

```
/*
********************************************************************************************************
*   Constant Buffers (Can only change per render call).
********************************************************************************************************
*/
cbuffer SConstantBuffer : register( b0 )
{
    float3 origin;
    float3 direction;
    float planeDistance;
    int screenWidth;
    int screenHeight;
};

/*
********************************************************************************************************
*   Input and Output Structures
********************************************************************************************************
*/
struct VS_INPUT
{
    float3 position     :   POSITION;
    float4 color        :   COLOR;
};

struct VS_OUTPUT
{
    float4 position     :   SV_POSITION;
    float4 color        :   COLOR;
};

/*
********************************************************************************************************
*   Vertex Shader main
********************************************************************************************************
*/
VS_OUTPUT VS( VS_INPUT input )
{
    VS_OUTPUT output = (VS_OUTPUT)0;

    float param_d;
    float3 pixelPoint;
    float3 zAxis = { 0.0, 0.0, 1.0 };
    float3 planeOrigin = origin + (direction * planeDistance);
    float3 pointDirection = (input.position - origin) / length( (input.position - origin) );

    param_d = dot( (planeOrigin - origin), direction ) / dot( pointDirection, direction );
    pixelPoint = ( pointDirection * param_d ) + origin;

    output.position.xyz = cross ( pixelPoint, direction );
    output.position.x = output.position.x * 5.0;
    output.position.y = output.position.y * 5.0;
    output.position.z = 20.0;
    output.position.w = output.position.z;

    output.color = input.color;

    return output;
}

/*
********************************************************************************************************
*   Pixel Shader main
********************************************************************************************************
*/
float4 PS( VS_OUTPUT input ) : SV_Target
{
    return float4( 1.0, 1.0, 1.0, 1.0); //input.color;
} 
```

DirectX 初始化和渲染代码如下：

```
#include "Renderer.h"

CRenderer::CRenderer ( )
{
    this->m_dxDevice = NULL;
    this->m_dxDeviceContext = NULL;
    this->m_dxRenderTargetView = NULL;
    this->m_dxSwapChain = NULL;
    this->m_dxBackBuffer = NULL;
    this->m_dxVertexLayout = NULL;
    this->m_dxVertexBuffer = NULL;
    this->m_dxPixelShader = NULL;
    this->m_dxConstantBuffer = NULL;
}

HRESULT CompileShaderFromFile( WCHAR* szFileName, LPCSTR szEntryPoint, LPCSTR szShaderModel, ID3DBlob** ppBlobOut )
{
    HRESULT hr = S_OK;

    DWORD dwShaderFlags = D3DCOMPILE_ENABLE_STRICTNESS;
#if defined( DEBUG ) || defined( _DEBUG )
    // Set the D3DCOMPILE_DEBUG flag to embed debug information in the shaders.
    // Setting this flag improves the shader debugging experience, but still allows 
    // the shaders to be optimized and to run exactly the way they will run in 
    // the release configuration of this program.
    dwShaderFlags |= D3DCOMPILE_DEBUG;
#endif

    ID3DBlob* pErrorBlob;
    hr = D3DX11CompileFromFile( szFileName, NULL, NULL, szEntryPoint, szShaderModel, 
        dwShaderFlags, 0, NULL, ppBlobOut, &pErrorBlob, NULL );
    if( FAILED(hr) )
    {
        if( pErrorBlob != NULL )
            OutputDebugStringA( (char*)pErrorBlob->GetBufferPointer() );
        if( pErrorBlob ) pErrorBlob->Release();
        return hr;
    }
    if( pErrorBlob ) pErrorBlob->Release();

    return S_OK;
}

HRESULT CRenderer::InitDevice ( HWND arg_hWnd )
{
    HRESULT status = S_OK;
    this->m_hWnd = arg_hWnd;

    RECT rctWindowSize;
    GetClientRect( arg_hWnd, &rctWindowSize );
    UINT dWidth = rctWindowSize.right - rctWindowSize.left;
    UINT dHeight = rctWindowSize.bottom - rctWindowSize.top;

    UINT dCreateDeviceFlag = 0;
#ifdef _DEBUG
    dCreateDeviceFlag |= D3D11_CREATE_DEVICE_DEBUG;
#endif _DEBUG

    D3D_DRIVER_TYPE pDriverType [] = 
    {
        D3D_DRIVER_TYPE_HARDWARE,
        D3D_DRIVER_TYPE_WARP,
        D3D_DRIVER_TYPE_REFERENCE
    };
    UINT numDriverType = ARRAYSIZE(pDriverType);

    D3D_FEATURE_LEVEL pFeatureLevel [] =
    {
        D3D_FEATURE_LEVEL_11_0,
        D3D_FEATURE_LEVEL_10_1,
        D3D_FEATURE_LEVEL_10_0
    };
    UINT numFeatureLevel = ARRAYSIZE(pFeatureLevel);

    //Fillout Device Descriptor
    DXGI_SWAP_CHAIN_DESC objSwapChainDesc;
    ZeroMemory(&objSwapChainDesc, sizeof(objSwapChainDesc));
    objSwapChainDesc.BufferCount = 1;
    objSwapChainDesc.BufferDesc.Width = dWidth;
    objSwapChainDesc.BufferDesc.Height = dHeight;
    objSwapChainDesc.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    objSwapChainDesc.BufferDesc.RefreshRate.Numerator = 60;
    objSwapChainDesc.BufferDesc.RefreshRate.Denominator = 1;
    objSwapChainDesc.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    objSwapChainDesc.OutputWindow = this->m_hWnd;
    objSwapChainDesc.SampleDesc.Count = 1;
    objSwapChainDesc.SampleDesc.Quality = 0;
    objSwapChainDesc.Windowed = true;

    //Parse and create the appropriate type of device
    for ( UINT driverTypeIndex = 0; driverTypeIndex < numDriverType; driverTypeIndex++ )
    {
        this->m_objDriverType = pDriverType[driverTypeIndex];
        status = D3D11CreateDeviceAndSwapChain ( NULL, 
                                                 this->m_objDriverType, 
                                                 NULL, 
                                                 dCreateDeviceFlag, 
                                                 pFeatureLevel, 
                                                 numFeatureLevel, 
                                                 D3D11_SDK_VERSION,
                                                 &objSwapChainDesc, 
                                                 &(this->m_dxSwapChain), 
                                                 &(this->m_dxDevice), 
                                                 &(this->m_objFeatureLevel), 
                                                 &(this->m_dxDeviceContext) );
        if ( SUCCEEDED(status) )
            break;
    }
    if ( FAILED(status) )
        return status;

    //Create a render traget
    this->m_dxBackBuffer = NULL;
    status = this->m_dxSwapChain->GetBuffer ( 0, __uuidof(ID3D11Texture2D), (LPVOID*)(&this->m_dxBackBuffer) );
    if ( FAILED(status) )
        return status;

    status = this->m_dxDevice->CreateRenderTargetView ( this->m_dxBackBuffer, NULL, &(this->m_dxRenderTargetView) );
    if ( FAILED(status) )
        return status;

    //CreatDepth Stencil
    D3D11_TEXTURE2D_DESC objDepthStencilDesc;
    ZeroMemory(&objDepthStencilDesc, sizeof(objDepthStencilDesc));

    D3D11_DEPTH_STENCIL_VIEW_DESC objDepthStencilViewDesc;
    ZeroMemory(&objDepthStencilViewDesc, sizeof(objDepthStencilViewDesc));

    objDepthStencilDesc.Width = dWidth;
    objDepthStencilDesc.Height = dHeight;
    objDepthStencilDesc.MipLevels = 1;
    objDepthStencilDesc.ArraySize = 1;
    objDepthStencilDesc.Format = DXGI_FORMAT_D24_UNORM_S8_UINT;
    objDepthStencilDesc.SampleDesc.Count = 1;
    objDepthStencilDesc.SampleDesc.Quality = 0;
    objDepthStencilDesc.Usage = D3D11_USAGE_DEFAULT;
    objDepthStencilDesc.BindFlags = D3D11_BIND_DEPTH_STENCIL;
    objDepthStencilDesc.MiscFlags = 0;
    objDepthStencilDesc.CPUAccessFlags = 0;

    status = this->m_dxDevice->CreateTexture2D ( 
                                                &objDepthStencilDesc, 
                                                NULL,
                                                &(this->m_dxDepthStencilBuffer)
                                                );
    if ( FAILED(status) )
        return status;

    objDepthStencilViewDesc.Format = objDepthStencilDesc.Format;
    objDepthStencilViewDesc.ViewDimension = D3D11_DSV_DIMENSION_TEXTURE2D;
    objDepthStencilViewDesc.Texture2D.MipSlice = 0;

    status = this->m_dxDevice->CreateDepthStencilView ( 
                                                       this->m_dxDepthStencilBuffer,
                                                       &objDepthStencilViewDesc,
                                                       &(this->m_dxDepthStencilView)
                                                      );
    if ( FAILED(status) )
        return status;

    this->m_dxDeviceContext->OMSetRenderTargets ( 1, &(this->m_dxRenderTargetView), this->m_dxDepthStencilView );

    //Set View Port (Can be commented out;
    this->m_objViewport.Width       = (FLOAT)dWidth;
    this->m_objViewport.Height      = (FLOAT)dHeight;
    this->m_objViewport.MinDepth    = 0.0;
    this->m_objViewport.MaxDepth    = 1.0;
    this->m_objViewport.TopLeftX    = 0;
    this->m_objViewport.TopLeftY    = 0;

    this->m_dxDeviceContext->RSSetViewports ( 1, &(this->m_objViewport) );

    //Setting up Shaders
    //Compiling Vertex Shader file
    ID3DBlob * dxVSBlob = NULL;
    status = CompileShaderFromFile ( L"RTShaders.fx", "VS", "vs_4_0", &dxVSBlob );
    if (FAILED (status))
    {
        dxVSBlob->Release ( );
        return status;
    }

    //Creating Compiled Shader
    status = this->m_dxDevice->CreateVertexShader ( dxVSBlob->GetBufferPointer ( ), 
                                                    dxVSBlob->GetBufferSize ( ),
                                                    NULL,
                                                    &(this->m_dxVertexShader) );
    if( FAILED(status) )
    {
        dxVSBlob->Release ( );
        return status;
    }

    //Describe Layout
    D3D11_INPUT_ELEMENT_DESC layout [] =
    {
        {
            "POSITION",
            0,
            DXGI_FORMAT_R32G32B32_FLOAT,
            0,
            0,
            D3D11_INPUT_PER_VERTEX_DATA,
            0
        },
/*      {
            "NORMAL",
            0,
            DXGI_FORMAT_R32G32B32A32_FLOAT,
            0,
            16,
            D3D11_INPUT_PER_VERTEX_DATA,
            0
        },
*/      {
            "COLOR",
            0,
            DXGI_FORMAT_R32G32B32_FLOAT,
            0,
            12,                             //NEED TO CHANGE THIS TO 32 WHEN UNCOMMENTING THE ABOVE BLOCK
            D3D11_INPUT_PER_VERTEX_DATA,
            0
        },
    };
    UINT numElements = ARRAYSIZE(layout);

    //Create Layout
    status = this->m_dxDevice->CreateInputLayout ( layout, 
                                                   numElements, 
                                                   dxVSBlob->GetBufferPointer ( ), 
                                                   dxVSBlob->GetBufferSize ( ), 
                                                   &(this->m_dxVertexLayout) );
    dxVSBlob->Release ( );
    dxVSBlob = NULL;
    if ( FAILED(status) )
    {
        return status;
    }

    //Set Vertex Layout to the pipeline
    this->m_dxDeviceContext->IASetInputLayout ( this->m_dxVertexLayout );

    //Compiling Pixel Shader File
    ID3DBlob * dxPSBlob = NULL;
    status = CompileShaderFromFile ( L"RTShaders.fx", "PS", "ps_4_0", &dxPSBlob );
    if ( FAILED(status) )
    {
        if ( dxPSBlob )
            dxPSBlob->Release ( );
        return status;
    }

    //Creating Compiled Pixel Shader
    status = this->m_dxDevice->CreatePixelShader ( 
                                                 dxPSBlob->GetBufferPointer ( ),
                                                 dxPSBlob->GetBufferSize ( ),
                                                 NULL,
                                                 &(this->m_dxPixelShader)
                                                 );
    dxPSBlob->Release ( );
    dxPSBlob = NULL;
    if ( FAILED(status) )
    {
        return status;
    }

    return S_OK;
}
HRESULT CRenderer::CreateVertexBuffer ( )
{
    HRESULT status = S_OK;

    D3D11_BUFFER_DESC objBufferDesc;
    D3D11_SUBRESOURCE_DATA objSubresData;
    UINT dStride = sizeof (SVertex);
    UINT dOffset = 0;

    ZeroMemory(&objBufferDesc, sizeof(objBufferDesc));
    ZeroMemory(&objSubresData, sizeof(objSubresData));

    objBufferDesc.ByteWidth = sizeof(SVertex) * 1681;
    objBufferDesc.Usage = D3D11_USAGE_DEFAULT;
    objBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
    objBufferDesc.CPUAccessFlags = 0;

    objSubresData.pSysMem = pVertexData;

    status = this->m_dxDevice->CreateBuffer (
                                            &objBufferDesc,
                                            &objSubresData,
                                            &(this->m_dxVertexBuffer)
                                            );
    if ( FAILED(status) )
        return status;

    this->m_dxDeviceContext->IASetVertexBuffers ( 0, 1, &(this->m_dxVertexBuffer), &dStride, &dOffset );

    this->m_dxDeviceContext->IASetPrimitiveTopology ( D3D11_PRIMITIVE_TOPOLOGY_POINTLIST );

    return S_OK;
}

HRESULT CRenderer::CreateConstantBuffer ( )
{
    HRESULT status = S_OK;

    D3D11_BUFFER_DESC objBufferDesc;

    ZeroMemory(&objBufferDesc, sizeof(objBufferDesc));

    objBufferDesc.ByteWidth = sizeof(SConstantBuffer) + (16 - sizeof(SConstantBuffer)%16);
    objBufferDesc.Usage = D3D11_USAGE_DEFAULT;
    objBufferDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
    objBufferDesc.CPUAccessFlags = 0;

    status = this->m_dxDevice->CreateBuffer (
                                            &objBufferDesc,
                                            NULL,
                                            &(this->m_dxConstantBuffer)
                                            );

    return status;
}

HRESULT CRenderer::Render ( )
{
    HRESULT status = S_OK;
    RECT screenRect;
    SConstantBuffer objConstBuffer;

    float pClearColor [4] = { 0.0f, 0.125f, 0.5f, 1.0f };

    this->m_dxDeviceContext->ClearRenderTargetView ( this->m_dxRenderTargetView, pClearColor );
    this->m_dxDeviceContext->ClearDepthStencilView ( this->m_dxDepthStencilView, D3D11_CLEAR_DEPTH, 1.0f, 0 );

    GetClientRect ( this->m_hWnd, &screenRect );
    objConstBuffer.f4Origin = XMFLOAT3 ( 0.0f, 0.0f, 0.0f );
    objConstBuffer.f4Direction = XMFLOAT3 ( 0.0f, 0.0f, 1.0f );
    objConstBuffer.fDistanceFromPlane = 2.0f;
    objConstBuffer.dScreenWidth = screenRect.right - screenRect.left;
    objConstBuffer.dScreenHeight = screenRect.bottom - screenRect.top;
    this->m_dxDeviceContext->UpdateSubresource ( this->m_dxConstantBuffer, 0, NULL, &objConstBuffer, 0, 0 );

    this->m_dxDeviceContext->VSSetShader ( this->m_dxVertexShader, NULL, 0 );
    this->m_dxDeviceContext->VSSetConstantBuffers ( 0, 1, &(this->m_dxConstantBuffer) );
    this->m_dxDeviceContext->PSSetShader ( this->m_dxPixelShader, NULL, 0 );
    this->m_dxDeviceContext->Draw ( 1680, 0 );

    this->m_dxSwapChain->Present ( 0, 0 );

    return status;
}

CRenderer::~CRenderer ( )
{
    if ( this->m_dxDeviceContext ) 
        this->m_dxDeviceContext->ClearState ( );

    if ( this->m_dxPixelShader )
        this->m_dxPixelShader->Release ( );
    this->m_dxPixelShader = NULL;

    if ( this->m_dxVertexLayout )
        this->m_dxVertexLayout->Release ( );
    this->m_dxVertexLayout = NULL;

    if ( this->m_dxVertexBuffer )
        this->m_dxVertexBuffer->Release ( );
    this->m_dxVertexBuffer = NULL;

    if ( this->m_dxDepthStencilBuffer )
        this->m_dxDepthStencilBuffer->Release ( );
    this->m_dxDepthStencilBuffer = NULL;

    if ( this->m_dxDepthStencilView )
        this->m_dxDepthStencilView->Release ( );
    this->m_dxDepthStencilView = NULL;

    if ( this->m_dxRenderTargetView )
        this->m_dxRenderTargetView->Release ( );
    this->m_dxRenderTargetView = NULL;

    if ( this->m_dxBackBuffer->Release ( ) )
        this->m_dxBackBuffer->Release ( );
    this->m_dxBackBuffer = NULL;

    if ( this->m_dxSwapChain )
        this->m_dxSwapChain->Release ( );
    this->m_dxSwapChain = NULL;

    if ( this->m_dxDeviceContext )
        this->m_dxDeviceContext->Release ( );
    this->m_dxDeviceContext = NULL;

    if ( this->m_dxDevice )
        this->m_dxDevice->Release ( );
    this->m_dxDevice = NULL;
} 
```

什么都没有在屏幕上渲染，我应该看到点或一个大的白色补丁，但我看到的只是渲染目标已清除。我一直在运行 Pix，PreVS 和 PostVS 转换看起来不错。请帮忙！

# java - 使用 Java 检查 Selenium WebDriver 中元素的位置

> ID：12364814
> 
> 赞同：1
> 
> 时间：2012-09-11T07:30:33.887
> 
> 标签：java, position, element, selenium-webdriver

我想检查我正在处理的 Web 应用程序上元素的位置。这是一个稳定的应用程序，因此职位不会发生太大变化。在网上搜索后，我找到了这个方法：

> `Point getLocation()`
> 
> 页面上的哪个位置是渲染元素的左上角？
> 
> 返回：一个点，包含元素左上角的位置

在玩了一点之后，我意识到位置取决于窗口大小和屏幕分辨率（虽然我在某个地方读过它，但我仍然检查它只是为了确保它是真的）。

还有其他方法吗？我有很多元素，因此仅根据一组分辨率和窗口尺寸存储一些值会很棘手。那将是很多工作。

最后，在视觉方面，没有什么比手动测试更好的了：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:54:55.783

它*必须*取决于窗口大小，因为页面的布局会随着窗口大小而变化。

你所要求的本质上是：

> 我是否可以像窗口无限宽和无限高一样获得页面上元素的位置，以便结果是静态的？

不，对不起，你不能那样做，因为你可能是第一个想做这样事情的人。你要求的职位毫无意义。此外，这些数字很可能因浏览器而异。

我相信你有两个选择：

1.  为此测试设置固定的窗口大小。如果您每次都以 1024*768 像素运行测试，它通常不会中断。在这种情况下，您的职位不应该改变，您会得到结果。
    *   奖励想法：您可以获得页面的屏幕截图并比较图像。如果页面的内容或多或少是静态的，您的屏幕截图将始终相同，因此您可以将其与参考屏幕截图进行比较。
2.  不要检查绝对数字，例如尝试检查 a 是否`WebElement`包含正确的文本、图像（以及图像是否已加载），甚至[a 是否在`WebElement`视觉上包含在 another 中`WebElement`](https://stackoverflow.com/q/10018621/1273080)。

# algorithm - 找到包含所有负循环的最小子图

> ID：12364815
> 
> 赞同：4
> 
> 时间：2012-09-11T07:30:45.750
> 
> 标签：algorithm, math, cycle, graph-theory, discrete-mathematics

我遇到了以下问题：给定一个加权有向图 G，我想构建 G 的最小子图，其中包含 G 的所有负（简单）循环。

我确实知道如何使用 Bellman-Ford 找到负循环，而且我知道有向图中的简单循环数是指数级的。

解决这个问题的一种天真的方法是简单地迭代所有简单的循环并选择那些是负数的，但我觉得可能存在多项式时间算法。我通过 Google 找到的大多数文章都是关于寻找（而不是全部）负循环的。

我希望在这里找到一些关于 stackoverflow 的专家，他们可能会为多项式时间解决方案提供一些提示，或者提示证明它不能在多项式时间内解决。

提前谢谢了！

干杯，罗伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:31:00.683

对于任何对类似问题感兴趣或陷入困境的人：它是 NP 完全的。感谢 wich 将我指向 cstheory 中的线程。

要了解它为什么是 NP 完全的，首先观察问题可以表述如下：给定一个具有 N 个顶点和 G 上的边 E 的加权有向图 G，找出 E 是否位于（简单）负循环上。如果是，E 应该在子图 H 中。如果不是，它不应该在 H 中。

现在，让边 E 为 E = (u, v)，权重为 w。我们想知道是否存在一条从 v 到 u 且总权重为 W 且 W + w < 0 的路径。如果我们可以在多项式时间内做到这一点，我们也可以在多项式时间内解决哈密顿循环问题：

为边 E 分配 N - 1.00001 的权重。为图中的所有其他边分配 -1 的权重。现在，图的唯一负循环 E 所在的循环是包含所有顶点的循环（该循环的权重为 -0.00001），因此是哈密顿循环。

非常感谢您的思考！

# macos - 无线黑客？cmd登录奇怪

> ID：12364816
> 
> 赞同：0
> 
> 时间：2012-09-11T07:30:47.130
> 
> 标签：macos, cmd, wireless

运行macpro并一直使用公共无线。我打开我的 cmd 并看到这些命令已经运行： sudo echo AUTHENTICATED ; 须藤-k；回声 AUTHENTIKILL ; echo PROCESSEDAUTHENTICATION export PS1="" echo ALLDONE;sudo -k sudo nice -n -10 $'/\101\160\160\154\151\143\141\164\151\157\156\163/\106\ 151\154\145\123\141\154\166\141\147\145\56\141\160\160/\103\157\156\164\145\156\164\163/\122\145\ 163\157\165\162\143\145\163'/SHarvest;sudo -k;echo DONEXT

我也在这台机器上运行 mamp，所以消息可能来自那台机器？没有把握！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:35:20.227

您是否在计算机上运行[过 SubRosaSoft 的 FileSalvage](http://subrosasoft.com/software/filesalvage)（用于恢复已删除文件的程序）？如果您有，这可能是其正常操作的一部分（奇怪的转义字符串转换为“/Applications/FileSalvage.app/Contents/Resources/SHarvest”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:40:24.940

我从未见过这些，但快速的谷歌搜索告诉我你应该进行调查，因为你的系统可能会受到损害。从未见过 MAMP 做这样的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T22:15:09.063

使用公共无线网络时需要小心，因为其中一些可能被黑客控制，一个坐在同一个网络中嗅探本地区域以寻找易受攻击的操作系统，或者专门免费放置无线接入点来引诱受害者，以便我们可以看到所有流量，执行中间人攻击（在许多情况下，即使 SSL/TLS 也无济于事）。因此，查看您的命令历史记录，我假设他们可能已经访问了您的 Box，并希望检索信息或建立可靠的连接。那些奇怪的数字很可能是 shellcode。无论如何，如上所述进一步调查，更改您的密码，祝您好运！

# url - ColdFusion：#URLSessionFormat("index.cfm?foo=bar")# -> 禁用 cookie 时 URL 中的两个问号

> ID：12364824
> 
> 赞同：1
> 
> 时间：2012-09-11T07:31:12.507
> 
> 标签：url, coldfusion, session-variables, session-cookies

我的表格看起来像这样：

```
 <form name="foo_contact" action="<CFOUTPUT>#URLSessionFormat("index.cfm?foo=bar")#</CFOUTPUT>"> 
```

当我禁用 cookie 并提交表单时，我的 URL 如下所示： `index.cfm?foo=bar?CFID=12345&CFTOKEN=12312312`这不是我所期望的。它应该读`index.cfm?foo=bar&CFID=12345&CFTOKEN=12312312`

我在这里做错了吗？我是否需要自己编写一个函数来修复它，或者我错过了一个简单的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:20:44.603

简单选项 - 改用隐藏形式 var。

```
<form name="foo_contact" action="<CFOUTPUT>#URLSessionFormat("index.cfm")#</CFOUTPUT>">
    <input type="hidden" name="foo" value="bar" /> 
```

替代选项 - 之后将相关更改`?`为`&`：

```
<cfset ActionUrl = URLSessionFormat("index.cfm?foo=bar")
    .replaceFirst('(?<!^index\.cfm)\?','&') />

<form name="foo_contact" action="<cfoutput>#ActionUrl#</cfoutput>"> 
```

这`.replaceFirst`使用带有负后向（`(?<!`..`)`部分）的正则表达式来查找第一个`?`不在前面的`index.cfm`并替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:04:53.387

你应该这样写：

```
#URLSessionFormat("index.cfm")#&foo=bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:01:58.670

使用 CFID 和 CFTOKEN 时需要注意潜在的安全问题。这些问题可以通过简单地使用 J2EE 会话管理来解决。[以下是ColdFusion 文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0c35c-7fef.html)的摘录：

**客户端标识符和安全性**

以下客户端标识符问题可能具有安全隐患：

*   确保 CFToken 标识符的唯一性和复杂性
*   限制会话标识符的可用性

下一节将讨论这些问题。

**确保 CFToken 的唯一性和安全性**

默认情况下，ColdFusion 在 CFToken 标识符中使用八位随机数。在大多数情况下，这种 CFToken 格式为用户提供了唯一、安全的标识符。（在 ColdFusion 中，生成此数字的方法使用加密强度随机数生成器，该生成器仅在服务器启动时播种。）

但是，在 ColdFusion Administrator 中，您可以启用“设置”页面来生成更复杂的 CFToken 标识符。如果您启用将 UUID 用于 cftoken 选项，ColdFusion 通过将 16 位随机十六进制数字添加到 ColdFusion UUID 来创建 CFToken 值。生成的 CFToken 标识符类似于以下内容：

```
3ee6c307a7278c7b-5278BEA6-1030-C351-3E33390F2EAD02B9 
```

**提供会话安全**

ColdFusion 对客户端范围和标准会话范围使用相同的客户端标识符。由于 CFToken 和 CFID 值用于在一段时间内识别客户端，因此它们通常保存为用户浏览器上的 cookie。这些 cookie 一直存在，直到客户端的浏览器删除它们，这可能是相当长的时间。因此，与 ColdFusion 为每个会话使用不同的用户标识符相比，黑客可以更多地访问这些变量。

拥有用户 CFToken 和 CFID cookie 的黑客可以通过在用户会话期间使用被盗的 CFToken 和 CFID cookie 访问网页来访问用户数据。虽然这种情况不太可能发生，但理论上是可能的。

您可以通过选择 ColdFusion 管理员内存变量页面上的使用 J2EE 会话变量选项来消除此漏洞。J2EE 会话管理机制为每个会话创建一个新的会话标识符，并且不使用 CFToken 或 CFID cookie 值。

**与安全相关的更改**

当您升级到 ColdFusion 9 升级 1 时，以下与安全相关的规范适用：

*   CFID、CFTOKEN 和 jsessionid 标记为 httpOnly。这减少了会话信息在跨站点脚本 (XSS) 攻击中受损的机会。
*   将会话 cookie 的以下系统属性设置为 httpOnly：Dcoldfusion.sessioncookie.httponly=true
*   会话 cookie 是否支持 httpOnly 取决于您使用的应用程序服务器：

    *   对于 Tomcat/JBoss，JSESSIONID 不支持 httpOnly
    *   在 JRun 上，在 jvm.config 文件中添加系统属性 Dcoldfusion.sessioncookie.httponly=true
    *   对于其他应用程序服务器，有关 httpOnly 对会话 cookie 的支持的详细信息，请参阅相关文档。

# linux - 如何比较 umask

> ID：12364827
> 
> 赞同：0
> 
> 时间：2012-09-11T07:31:26.563
> 
> 标签：linux, shell, unix, interactive

我正在尝试比较`umask`用户的。我在进行比较时遇到错误。我正在使用的代码是

```
val=`su - user -c "umask" | tail -2 | sed -n "/[0-9]/p"`
if [ $val -eq 744 ]
then

   echo "477 found."

fi 
```

当我执行此操作时，我收到如下错误：

```
sh: ^[H: A test command parameter is not valid. 
```

我已经`=`在比较命令中尝试过，但它仍然无法正常工作。

请提出任何建议。

问候。

* * *

`val`已初始化为`0`.

我以root身份运行它，所以没有登录。

我也尝试过引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:35:47.003

您应该在测试表达式中引用变量名：

```
if [ "$val" -eq 744 ] 
```

请参阅[此处](http://wiki.bash-hackers.org/syntax/quoting)了解原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:10:27.973

您的代码在我的机器上运行良好，我可以建议的唯一解决方案是使用稍微不同的语法，有时不同的 bash 版本会抱怨一种语法并接受另一种语法：

```
val=`su - user -c "umask" | tail -2 | sed -n "/[0-9]/p"`
if [[ $val -eq 477 ]] ; then
   echo "477 found."
fi 
```

[在这里](http://mywiki.wooledge.org/BashFAQ/031)查看`[ cond ]`和之间的区别`[[ cond ]]`。

# django - 如何从 django 模板重置缓存？

> ID：12364828
> 
> 赞同：1
> 
> 时间：2012-09-11T07:31:26.547
> 
> 标签：django, apache

我在 django 上有网站。我更改了应用程序代码。但是没有效果。（重置Apache）。它可能取决于缓存模板：

```
TEMPLATE_LOADERS = (
    'dbtemplates.loader.Loader',
    ('django.template.loaders.cached.Loader', (
            'django.template.loaders.filesystem.Loader',
            'django.template.loaders.app_directories.Loader',
    )), 
```

但我不知道如何刷新，删除，或重置缓存。谢谢帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T11:45:30.867

```
from django.template.loader import template_source_loaders

def reset_template_cache():
    if not template_source_loaders:
        return

    for loader in template_source_loaders:
        loader.reset() 
```

你去吧:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:00:42.333

这只是我的直觉，但我认为这个缓存模板在数据库中。

删除dbtemplates，我认为你没有任何问题....但只是直觉

PS：“dbtemplates.loader.Loader”是魔鬼

# android - 出现进度对话框时如何在后台显示另一个活动？

> ID：12364831
> 
> 赞同：0
> 
> 时间：2012-09-11T07:31:29.987
> 
> 标签：android, view

我正在开发一个 Android 应用程序。有一个`Activity`显示`Button`。
当一个按钮被按下时，`ProgressDialog`应该出现并且后面`ProgressDialog`应该有另一个应该打开的 Activity。
我想要其他活动，而不是按钮所在的 Activity。我怎样才能做到这一点？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.gamemenu);

    TextView tvStart = (TextView)findViewById(R.id.start);
    //TextView tvSettings = (TextView)findViewById(R.id.settings);
    TextView tvAbout = (TextView)findViewById(R.id.instruction);
    TextView tvExit = (TextView)findViewById(R.id.exit);

    tvStart.setOnClickListener(this);
    //tvSettings.setOnClickListener(this);
    tvAbout.setOnClickListener(this);
    tvExit.setOnClickListener(this);

}

public void onClick(View v) {

    switch(v.getId()){

    case R.id.start:

        ProgressDialog pd=new ProgressDialog(StartMenu.this);  
        pd=ProgressDialog.show(StartMenu.this,"Loading","Please Wait",false);  
        Handler handler=new Handler();
           Runnable gotologin=new Runnable() 
           {
           public void run() 
           {
            startActivity(new Intent(StartMenu.this,AndroidGame.class));
            finish();
           }
           };
           handler.postDelayed(gotologin, 3000);       
           pd.dismiss();    
        //   finish();     
          break;
     // Intent iStart = new Intent(getApplicationContext(), AndroidGame.class );
    //  startActivity(iStart);
    //  break;

    /*case R.id.settings:
        Intent iSettings = new Intent(getApplicationContext(), GameSettings.class );
        startActivity(iSettings);
        break;*/

    case R.id.instruction:
        Intent inInstructions = new Intent(getApplicationContext(), Instructions.class );
        startActivity(inInstructions);
        break;

    case R.id.exit:
        ((Activity)v.getContext()).finish();
        //this.finish();

        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:34:37.290

您不能像在属于上一个活动的窗口的上面那样在后台加载另一个活动。

在您的情况下，我建议您在单击按钮时加载第二个活动。但是，在您的第二个活动中，只要您愿意，就可以显示所需的进度对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:40:35.720

你可以用这种方式显示`ProgressDialog`。但是，我不认为这个 progressDialog 会被视为新的 Activity 会在你可以显示之前加载到屏幕上`ProgressDialog`。

```
ProgressDialog pd=new ProgressDialog(ActivityName.this);  
Button n=new Button(ActivityName.this);  
n.setOnClickListener(new OnClickListener() {  
@Override  
public void onClick(View v) {  

       pd=ProgressDialog.show(ActivityName.this,"Loading","Please Wait",false);  
       Intent i=new Intent(ActivityName.this,TargetActivityName.class)  
       startActivity(i);  
       pd.dismiss();    
       finish();     
   }  
}); 
```

如果您想根据`ProgressDialog`您的要求显示点击时间，您可以使用`Handler`'s 来实现，这将在预先确定的时间后加载新的 Activity。

将保持 3 秒的示例`ProgressDialog`示例**如下**：

```
ProgressDialog pd=new ProgressDialog(ActivityName.this);  
Button n=new Button(ActivityName.this);  
n.setOnClickListener(new OnClickListener() {  
@Override  
public void onClick(View v) {  

   pd=ProgressDialog.show(ActivityName.this,"Loading","Please Wait",false);  

   Handler handler=new Handler();
   Runnable gotologin=new Runnable() 
   {
   public void run() 
   {
    startActivity(new Intent(ActivityName.this, TargetActivityName.class));
    finish();
   }
   };
   handler.postDelayed(gotologin, 3000);       
   pd.dismiss();    
   finish();     
  }  
}); 
```

# 必填答案：

```
ProgressDialog pd;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.gamemenu);

    pd=new ProgressDialog(StartMenu.this);   // Edited here

    TextView tvStart = (TextView)findViewById(R.id.start);
    //TextView tvSettings = (TextView)findViewById(R.id.settings);
    TextView tvAbout = (TextView)findViewById(R.id.instruction);
    TextView tvExit = (TextView)findViewById(R.id.exit);

    tvStart.setOnClickListener(this);
    //tvSettings.setOnClickListener(this);
    tvAbout.setOnClickListener(this);
    tvExit.setOnClickListener(this);

}

public void onClick(View v) {

    switch(v.getId()){

    case R.id.start:

         runOnUiThread(new Runnable() {

         @Override
           public void run() {
              pd=ProgressDialog.show(StartMenu.this,"Loading","Please Wait",false);  
              Handler handler=new Handler();
               Runnable gotologin=new Runnable() 
               {
                public void run() 
                {
                  startActivity(new Intent(StartMenu.this,AndroidGame.class));
                  finish();
                }
               };
              handler.postDelayed(gotologin, 3000);       
              pd.dismiss();    
              finish();  

            }
      });
      //     break;
     // Intent iStart = new Intent(getApplicationContext(), AndroidGame.class );
    //  startActivity(iStart);
    //  break;

    /*case R.id.settings:
        Intent iSettings = new Intent(getApplicationContext(), GameSettings.class );
        startActivity(iSettings);
        break;*/

    case R.id.instruction:
        Intent inInstructions = new Intent(getApplicationContext(), Instructions.class );
        startActivity(inInstructions);
        break;

    case R.id.exit:
        ((Activity)v.getContext()).finish();
        //this.finish();

        break;
    }

} 
```

# objective-c - 拉动以显示 iOS 中隐藏的类似导航栏的菜单？如 GetPocket App 中所见

> ID：12364838
> 
> 赞同：5
> 
> 时间：2012-09-11T07:32:05.653
> 
> 标签：objective-c, ios, xcode, uiscrollview, uitextview

我一直在为这个让自己发疯。这可能是我需要退后一步并找出实现这一点的最简单方法的事情之一。在这方面也找不到任何东西。我用谷歌搜索了这个。

在 Pocket App 中，当您下拉菜单时，它会像 searchBar 一样显示自己。在这种情况下，当您将人造杆拉过中点时，如果您松开它，它会显示弹簧就位。如果它在中点之前释放，则该条将弹回并隐藏。如此处所示

![在此处输入图像描述](../Images/41ae46cfdd95e74944cd353166a39cf0.png)

就我而言，我一直在尝试复制它，但没有运气。就我而言，我在 UIViewController 视图中有一个 UITextView 。我想我都错了。

我可以让它与隐藏的 UIScrollView 一起工作，方法是在屏幕外启动它，然后当我按下按钮时，UIScrollView 会显示出来。问题是这种方法涵盖了所有内容，所以我必须调整和重新布局一堆视图。这可能在 UITableView 中吗？我希望它是一个拉动作，只是想在这个栏中放置一些 TextStrings/Labels。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T07:56:02.393

感觉就像您需要一个 UIScrollView（或 UITableView）并将您想要显示的菜单放在顶部（例如，在表格视图标题中），然后获取用于滚动的委托回调。

```
UIScrollViewDelegate
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

您可能还需要注意一些拖动委托回调

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate 
```

您最初可以通过将内容偏移设置为菜单的高度来隐藏菜单，然后捕获委托回调以进行滚动，如果滚动已超过菜单大小的一半，则使用动画设置内容偏移。

```
- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:29:53.643

如果我正确理解您的目标，则不需要滚动视图。

我要做的是有一个简单`UIView`的包含你需要的所有东西并将它放在可见区域之外。这将是您的下拉视图。`UIPanGestureRecognizer`然后在您的视图中添加一个`UIViewController`并使用它来跟踪手指的移动并相应地更新下拉视图的框架。然后在这个更新方法中，您只需检查位置是否超过了某个阈值，如果是，则让下拉视图捕捉到其最终位置（当然使用动画）。

如果您不熟悉`UIPanGestureRecognizer`这里有一个非常好的教程： [http ://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

# windows - 批处理 IF 导致小时不显示

> ID：12364841
> 
> 赞同：0
> 
> 时间：2012-09-11T07:32:10.110
> 
> 标签：windows, batch-file, cmd, backup

我有一个脚本，它执行一个简单的 XCOPY 例程来备份我们所有的公司文件：

```
@echo off
IF %time:~0,2% GTR 7 (
    IF %time:~0,2% LSS 21 (

    XCOPY "R:\Sage Src" "S:\lastdata" /D /Y /E /R /K /C /H /I >> S:\sageBackupLog-%date:~-4,4%-%date:~-7,2%-%date:~-10,2%-hour%time:~0,2%.txt

    XCOPY "R:\importantStuff" "V:\lastdata" /D /Y /E /R /K /C /H /I 
    EXIT /B 0
    )
) 
```

但是自从将它全部包装在两个 IF 语句中之后，它就不再输出小时了。

我试过`set %hour%=%time:~0,2%`了，但它不起作用，返回一个无效的参数错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:56:22.907

这里有两个主要问题。

首先，将您的`set`命令更改为：（`set hour=%time:~0,2%`不`hour`包含`%`-signs）

接下来的事情是，像 9:00 点这样具有一位数小时值的时间将打印如下：

```
" 9:00:00.00" 
```

第一个数字前面有一个前导空格。这是您的错误消息的原因，因为您的文件名可能会解析为：

```
sageBackupLog-2012-09-11-hour 9.txt 
```

这实际上形成了两个参数，因为名称没有包含在`"`

为了克服这个问题并在这些时间打印前导零，您可以使用第二条`set`语句进行字符串替换，将空格更改为零：

```
set hour=%time:~0,2%
set hour=%hour: =0% 
```

然后，您可以安全地使用`%hour%`而不是`%time:~0,2%`在您的脚本中。

希望有帮助。

# android - 如何检查滚动视图是否存在

> ID：12364843
> 
> 赞同：1
> 
> 时间：2012-09-11T07:32:18.003
> 
> 标签：android, if-statement

我想知道如何检查 if 语句是否存在 scrollView。创建 scollView 的当前代码如下。任何帮助都感激不尽 ：）

代码：

```
public void tickBox(int i){
    //Create GUI
    LinearLayout mainView = (LinearLayout) findViewById(R.id.MainLayout);
    ScrollView sc = new ScrollView(this);
    sc.setId(i + 100);
    if (/*If statement to be made*/){
        mainView.addView(sc);
    }
    //My other code
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:35:28.890

它可以是：

```
if (mainView.findViewById(i + 100) == null){
    mainView.addView(sc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:34:45.010

```
if ( sc != null ) {
        mainView.addView(sc);
    } 
```

# magento - Magento 结帐计费部分

> ID：12364845
> 
> 赞同：2
> 
> 时间：2012-09-11T07:32:26.397
> 
> 标签：magento, prototypejs

我在 billing.phtml 中遇到了这段代码

```
 var billing = new Billing('co-billing-form', '<?php echo $this->getUrl('checkout/onepage/getAddress') ?>address/', '<?php echo $this->getUrl('checkout/onepage/saveBilling') ?>'); 
```

是方法`address`的参数`getAddress()`吗？或者是其他东西？

如何查看 的值`address`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:31:57.413

是`address`的，是`Mage_Checkout_OnepageController::getAddressAction()`.

要在提交时查看其价值，请使用 Firebug、Fiddler 等 HTTP 监控工具。

或者更改`getAddressAction()`方法并将值写入日志文件。例如像这样：

```
public function getAddressAction()
{
    if ($this->_expireAjax()) {
        return;
    }
    $addressId = $this->getRequest()->getParam('address', false);
    error_log('$addressId = ' . print_r($addressId, true), 3, '__my.log');
    // :
} 
```

# logging - PlasticSCM 服务器日志记录问题（以及无法运行守护程序）

> ID：12364846
> 
> 赞同：1
> 
> 时间：2012-09-11T07:32:31.703
> 
> 标签：logging, error-logging, plasticscm

我刚刚在 Centos 5 下安装了 PlasticSCM。包括依赖项在内的所有内容都安装在服务器上，看起来干净整洁，但软件拒绝启动并且根本不会写入任何日志文件内容。

运行 PlasticSCM 时，我使用以下命令：

```
./plasticsd start 
```

大约一分钟过去了，然后它响应：

> 启动 PlasticSCM 服务器：无法启动 PlasticSCM 服务器。请查看放置在塑料服务器位置的plastic.server.log 文件以获取更多详细信息。

系统将创建一组空白日志文件，并且不会写入其中任何一个。

有任何想法吗？

FWIW，我在 Cent 6 系统上进行了完全相同的安装，一切运行完美。我看不出两者之间有任何区别，所以这让我更加困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:09:47.963

尝试运行“sudo ./plasticsd start”命令，如果没有权限，您将遇到大量配置文件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T18:19:22.307

万一有人想知道这里发生了什么。事实证明，该问题与尝试在 CentOS 5 下运行时出现的无法解决的错误有关。我们将服务器升级到 CentOS 6 以解决问题。

# android - 如何设置 FrameLayout fill_parent 的宽度并始终具有固定的高度比例？

> ID：12364847
> 
> 赞同：0
> 
> 时间：2012-09-11T07:32:35.633
> 
> 标签：android, android-layout

我看到一些关于“ImageView”的问题，但我需要一个`FrameLayout`.

我有一个 FrameLayout，我需要它的`width:height`= `2:1`，宽度是`fill_parent`. 框架布局中有很多图像视图，我可以设置它们`width=fill_parent`和`height=fill_parent`.

我没有找到方法来做到这一点，请帮助。

我的xml代码是：

```
<FrameLayout
        android:id="@+id/cardView"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:layout_centerInParent="true">
    <ImageView
            android:id="@+id/frameView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scaleType="fitXY"
            android:src="@drawable/card_style1"
            />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:17:50.767

看看这是不是你想要的：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);
    final FrameLayout target = (FrameLayout) findViewById(R.id.frame_id);
    target.post(new Runnable() {

        @Override
        public void run() {             
            int width = target.getWidth();
            int height = width / 2;                
            LayoutParams lp = target.getLayoutParams(); 
            lp.height = height;
            target.setLayoutParams(lp);
        }

    });
} 
```

# delphi-7 - 缺少@InitializeRecord

> ID：12364849
> 
> 赞同：1
> 
> 时间：2012-09-11T07:32:39.047
> 
> 标签：delphi-7, pascal, delphi

我正在开发一个带有简约 system.pas /sysinit.pas 的 delphi 7 项目当我尝试在我的项目中使用记录时，我的编译器会出现此错误：

```
System unit out of date or corrupted: missing '@InitializeRecord' 
```

由于我试图用纯帕斯卡/无 RTL 编程，有没有办法手动启用/调用记录的初始化？！

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T08:23:05.907

Delphi 编译器依赖于一些“内在函数”，这些函数由生成的代码调用。

例如，当您在代码中定义 a 时，即使您不使用任何 RTL `record`，Delphi 编译器也会生成对 的调用。`InitializeRecord`这`string`与动态数组处理相同。

因此，您将无法绕过和忽略这些函数，因为它们应该由编译器本身存在。

Delphi 并不意味着剥离低级 RTL 单元。在某些情况下，我已经这样做了：

*   对于我们的[LVCL 单元](http://synopse.info/fossil/dir?name=LVCL)（类似于您的期望），我们[增强的 RTL 文件](http://synopse.info/forum/viewforum.php?id=6)可以编译，特别是在定义 LVCL 条件时被剥离；
*   对于[基于 DWPL 的项目](http://sourceforge.net/projects/dwpl/)，使用 Delphi 编译器以 DOS 为目标；
*   TORO[内核](http://torokerneleng.blogspot.fr)。

*FreePascal*在剥离系统单元时要好得多。由于它甚至针对[嵌入式系统](http://wiki.freepascal.org/Embedded)，因此您可以选择剥离字符串支持、FPU 甚至整个堆进程。

# c# - 替换特定字符后的字符数

> ID：12364852
> 
> 赞同：8
> 
> 时间：2012-09-11T07:32:39.217
> 
> 标签：c#, string, replace, braille

我正在创建一个将文本转换为盲文的应用程序。转换为盲文不是问题，但我不知道如何将其转换回来。

示例 1：将数字转换为盲文

```
1     = #a
123   = #abc
12 45 = #ab #de 
```

示例 2：将大写字母转换为盲文

```
Jonas = ,jonas
JONAS = ,,jonas 
```

我在将盲文恢复正常时遇到问题。我不能只是将每个转换`a`为`1`等等。可以检查数字`#`，然后将其后的字符更改为下一个空格，但我不知道如何。字母前的逗号更难与文本中的其他逗号分开。

这是我转换为盲文的课程：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Drawing;

namespace BrailleConverter
{
    class convertingBraille
    {
        public Font getIndexBrailleFont()
        {
            return new Font("Index Braille Font", (float)28.5, FontStyle.Regular);
        }

        public Font getPrintableFontToEmbosser()
        {
            return new Font("Lucida Console", (float)28.5, FontStyle.Regular);
            //return new Font("Index Black Text Font", (float)28.5, FontStyle.Regular);
        }

        public string convertCapitalsToUnderscore(string text)
        {
            if (string.IsNullOrEmpty(text))
            {
                return "";
            }

            text = " " + text;

            text = text.Replace('.', '\'');
            text = text.Replace(',', '1');
            text = text.Replace('?', '5');
            text = text.Replace('!', '6');
            text = text.Replace(':', '3');
            text = text.Replace('=', '7');
            text = text.Replace('+', '4');
            text = text.Replace('*', '9');
            text = text.Replace('é', '=');

            StringBuilder newText = new StringBuilder(text.Length * 2);
            newText.Append(text[0]);

            bool firstCapLetterInWord = true;

            for (int i = 1; i < text.Length; i++)
            {
                char letter = text[i]; // Aktuell bokstav
                char nextLetter = ' '; // Nästa bokstav

                try
                {
                    nextLetter = text[i + 1];
                }
                catch
                {

                }

                // Är det stor bokstav?
                if (char.IsUpper(letter))
                {
                    // Är nästa bokstav stor?
                    if (char.IsUpper(nextLetter))
                    {
                        // Är det början av ett helt ord med caps?
                        if (firstCapLetterInWord)
                        {
                            newText.Append(",,"); // 2 st understräck framför ordet

                            firstCapLetterInWord = false; // Ändra så att inte nästa bokstav får 2 st understräck
                        }
                    }
                    else // Annars bara ett understräck
                    {
                        if (firstCapLetterInWord)
                        {
                            newText.Append(","); // Sätt understräck framför bokstav
                        }

                        firstCapLetterInWord = true; // Förbereda för nästa capsord
                    }
                }

                newText.Append(text[i]);
            }

            string finishedText = newText.ToString().TrimStart(); // Ta bort mellanslaget i början

            finishedText = finishedText.ToLower();

            finishedText = finishedText.Replace('å', '*');
            finishedText = finishedText.Replace('ä', '>');
            finishedText = finishedText.Replace('ö', '[');

            return finishedText;
        }

        public string convertNumbersToBrailleNumbers(string text)
        {
            if (string.IsNullOrEmpty(text))
            {
                return "";
            }

            text = " " + text;

            StringBuilder newText = new StringBuilder(text.Length * 2);
            newText.Append(text[0]);

            bool firstNumberInNumber = true;

            for (int i = 1; i < text.Length; i++)
            {
                char letter = text[i]; // Aktuell tecken
                char nextLetter = ' '; // Nästa tecken

                try
                {
                    nextLetter = text[i + 1];
                }
                catch
                {

                }

                char convertedChar = text[i];

                // Är tecknet en siffra?
                if (char.IsNumber(letter))
                {
                    // Är nästa tecken en siffra?
                    if (char.IsNumber(nextLetter))
                    {
                        // Är det början av ett flertaligt nummer?
                        if (firstNumberInNumber)
                        {
                            newText.Append('#'); // Brädkors framför nummret

                            firstNumberInNumber = false; // Ändra så att inte nästa siffra får brädkors
                        }
                    }
                    else // Annars bara ett understräck
                    {
                        if (firstNumberInNumber)
                        {
                            newText.Append('#'); // Sätt brädkors framför siffran

                        }

                        firstNumberInNumber = true; // Förbereda för nästa flertaliga nummer
                    }
                }

                newText.Append(convertedChar);
            }

            string finishedText = newText.ToString().TrimStart();

            finishedText = finishedText.Replace('1', 'a');
            finishedText = finishedText.Replace('2', 'b');
            finishedText = finishedText.Replace('3', 'c');
            finishedText = finishedText.Replace('4', 'd');
            finishedText = finishedText.Replace('5', 'e');
            finishedText = finishedText.Replace('6', 'f');
            finishedText = finishedText.Replace('7', 'g');
            finishedText = finishedText.Replace('8', 'h');
            finishedText = finishedText.Replace('9', 'i');
            finishedText = finishedText.Replace('0', 'j');

            return finishedText;
        }

        public string convertBackToPrint(string oldText)
        {
            string newText = oldText.Replace(",", "");
            newText = newText.Replace("#", "");
            newText = newText.Replace("*", "å");
            newText = newText.Replace(">", "ä");
            newText = newText.Replace("[", "ö");
            newText = newText.Replace('\'', '.');
            newText = newText.Replace('1', ',');
            newText = newText.Replace('5', '?');
            newText = newText.Replace('6', '!');
            newText = newText.Replace('3', ':');
            newText = newText.Replace('7', '=');
            newText = newText.Replace('4', '+');
            newText = newText.Replace('9', '*');
            newText = newText.Replace('=', 'é');

            return newText;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:24:25.983

考虑到这一点，也许您真正想做的是实现自己的编码，称为从基类`PrintableSwedishBrailleAsciiEncoding`继承之类的东西。[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)

```
using System.Text;

public sealed PrintableSwedishBrailleAsciiEncoding : Encoding
{
    ...
} 
```

这将最大限度地提高代码的可重复性，并使您能够简单地使用框架的其余部分来完成您的工作。

* * *

针对您对我现在已删除的答案的评论，我想您是在问，

> 如何替换某个字符，后跟任意数量的非空白字符，直到第一个空白字符。或者，更一般地说，以某个字符开头的整个单词？

因此，您可以使用类似这样的正则[表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)`#`，我认为这将匹配 a后跟许多非空白字符。

```
var numberMatcher = new Regex(@"#\w+")
var firstMatch = numberMatcher.Match(yourText)

var alteredMatch = SomeTextAlteringFunction(firstMatch);

var yourNewText = numberMatcher.Replace(yourText, alteredMatch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:18:00.867

这是我的解决方案（非常感谢 Jodrell）

```
 public string convertBackToPrint(string oldText)
        {
            string newText = oldText.Replace(",", "");
            newText = newText.Replace("*", "å");
            newText = newText.Replace(">", "ä");
            newText = newText.Replace("[", "ö");
            newText = newText.Replace('\'', '.');
            newText = newText.Replace('1', ',');
            newText = newText.Replace('5', '?');
            newText = newText.Replace('6', '!');
            newText = newText.Replace('3', ':');
            newText = newText.Replace('7', '=');
            newText = newText.Replace('4', '+');
            newText = newText.Replace('9', '*');
            newText = newText.Replace('=', 'é');

            var numberMatcher = new Regex(@"#\w+");
            var firstMatch = numberMatcher.Match(newText);
            string alteredMatch = convertToNum(firstMatch.ToString());
            string yourNewText = numberMatcher.Replace(newText, alteredMatch);

            return yourNewText;
        }

        private string convertToNum(string oldText)
        {
            string newText = "";

            newText = oldText.Replace("a", "1");
            newText = newText.Replace("b", "2");
            newText = newText.Replace("c", "3");
            newText = newText.Replace("d", "4");
            newText = newText.Replace("e", "5");
            newText = newText.Replace("f", "6");
            newText = newText.Replace("g", "7");
            newText = newText.Replace("h", "8");
            newText = newText.Replace("i", "9");
            newText = newText.Replace("j", "0");
            newText = newText.Replace("#", "");

            return newText;
        } 
```

# php - 如何在 symfony2 中为 ajax 请求将视图文件呈现为 json 对象

> ID：12364855
> 
> 赞同：1
> 
> 时间：2012-09-11T07:32:46.303
> 
> 标签：php, ajax, symfony

我有一个登录过程的操作。现在我想对正常登录过程和 ajax 请求使用相同的操作。

```
 /**
         * @Route("/sponsor/login", name="sponsor_login", options={"expose"=true})
         * @Template("SponsorBundle::login.html.twig")
         * @return array
         */
         public function loginAction()
         {} 
```

我希望此操作为 xmlhttp 请求和普通 http 请求呈现不同的视图文件。我该怎么做？我想在 json 对象中传递视图文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:18:10.983

你可以这样做：

```
return $this->getRequest()->isXmlHttpRequest()
 ? $this->render(.... "form.html.twig" ....)
 : $this->render(... full page that will include the form ...) ; 
```

或者

```
if ($this->getRequest()->isXmlHttpRequest()){
  $template = "form.html.twig" ;
  $params = ....
} else {
  $template = "login.html.twig" ;
  $params = ....
}

return $this->render($template, $params) ; 
```

# c# - 需要帮助将代码从 couchdb 转换为 couchbase

> ID：12364858
> 
> 赞同：0
> 
> 时间：2012-09-11T07:32:56.837
> 
> 标签：c#, couchdb, couchbase

我对 couchbase 和 couchdb 有相同的看法。视图的名称是“TotalPosts”我在下面粘贴我的视图代码：

这是地图：

```
 function(doc) {
    emit("Total", 1);
        emit("TotalParticipants", doc.participants.length);
        if(doc.status == "1"){
            emit("Open", 1);
        } else if(doc.status == "2") {
            emit("Wah", parseInt(doc.wah_points));
        }
    } 
```

这是减少代码：

```
function (key, values, rereduce) {
    return sum(values);
} 
```

视图的结果将是这样的：

```
核心价值

打开 7
共 8 个
参加者总数 20
哇 50

```

现在我可以使用以下代码在 couchdb 中执行和检索视图结果：

```
public IEnumerable<Newtonsoft.Json.Linq.JToken> GetAllStatistics()
         {
             oCouchDB.SetDefaultDesignDoc("Statistics");

             ViewOptions voStats = new ViewOptions();
             voStats.GroupLevel = 1;
             voStats.Stale = true;

             var results = oCouchDB.View("TotalPosts", voStats);

             return results.Rows;

        } 
```

现在这是我的 couchbase 代码：

```
public IEnumerable<Newtonsoft.Json.Linq.JToken> GetAllStatistics()
         {
             var results = oCouchbase.GetView("Statistics", "TotalPosts");
             return-----// what is the equivalent code here

        } 
```

请帮帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:05:48.673

Couchbase 像 CouchDB 一样返回一个 JSON 对象。应该使用相同的代码，或者检查“结果”变量以查看里面的内容。

# dependencies - Gradle 无法解析依赖组：org.apache.httpcomponents，模块：httpmime

> ID：12364861
> 
> 赞同：1
> 
> 时间：2012-09-11T07:33:21.243
> 
> 标签：dependencies, gradle

我正在编写 java 后端测试用例来检查服务器上的不同 post/get 操作。我必须使用 http post 方法上传文件，我使用此链接作为参考： [How to upload a file using Java HttpClient library working with PHP](https://stackoverflow.com/questions/1067655/how-to-upload-a-file-using-java-httpclient-library-working-with-php-strange-pr)。

我在 gradle.build 文件中指定外部依赖项 gradle build 无法解析外部依赖项 httpmime。

任务'：test-fwk：generateClasspath'的gradle build执行失败。

> 无法解析配置 ':test-fwk:default' 的所有依赖项。找不到组：org.apache.httpcomponents，模块：httpmime，版本：4.1.3

我在 build.gradle 文件中使用编译组：'org.apache.httpcomponents'，名称：'httpmime'，版本：'4.1.3'。org.apache.httpcomponents:httpclient 和 httpcore 等其他依赖项已成功解决。

我花了很多时间试图找到解决方案。如果有人知道这个问题，请回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T19:44:27.310

这个最小的构建脚本用于引用 httpmime 依赖项，与 Gradle 1.2 一起运行

```
apply plugin: 'java'
repositories{
    mavenCentral()
}
dependencies{
    compile group: 'org.apache.httpcomponents', name: 'httpmime', version: '4.1.3'
} 
```

# asp.net - Response.Redirect() 后不显示标签

> ID：12364862
> 
> 赞同：0
> 
> 时间：2012-09-11T07:33:24.677
> 
> 标签：asp.net, visual-studio-2010, session

首先我有检查状态的登录表单（Najava.aspx）：

```
if (Session["Status"].ToString() == "0")
        {
            Response.Redirect("Najava.aspx");
            Label3.Text = "You waiting activation!";
        } 
```

有了这个，我检查用户是否没有被激活。我再次重定向到登录表单，我喜欢在标签中显示文本，但标签在重定向后不显示文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:36:05.517

一种可能性是将文本设置`Page_Load`在`Najava.aspx`. 如果您只需要有条件地显示它，那么您可以在重定向时传递一个查询字符串参数，然后仅在此参数存在时才显示标签：

```
if (Session["Status"].ToString() == "0")
{
    Response.Redirect("Najava.aspx?waitingactivation=true");
} 
```

然后在以下`Page_Load`事件中`Najava.aspx`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(Request["waitingactivation"]))
    {
        Label3.Text = "You waiting activation!";
    }
} 
```

您也可以考虑使用[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)。

# php - Server2Go 不保存我的数据库

> ID：12364872
> 
> 赞同：0
> 
> 时间：2012-09-11T07:33:58.363
> 
> 标签：php, mysql, apache, server2go

我在我的电脑上运行 server2go。这是我的一些客户的项目。当我使用 server2go 在 phpmyadmin 中创建数据库时，不会保存数据库。所以每次我重新启动时，我都必须创建一个数据库。如何保存数据库以及应该在 pms_config.ini 文件上更改哪些设置。我已更改 LocalMirror=0 并且 MirrorFolder 仍然为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:46:47.150

Server2Go 最初是在只读 CD 上运行的，因此默认设置不会保存 MySQL 数据库更改。如果要配置服务器以保留所有设置，则需要编辑 pms_config.ini 以使 LocalMirror=0、OverwriteLocalMirror=0 和 DeleteDatabaseFiles=0。在继续之前进行此编辑，否则您将丢失所有配置。完成后，打开 phpMyAdmin 并以 root 身份登录，无需任何密码。

# gwt - AutoBean 中的@Category

> ID：12364874
> 
> 赞同：0
> 
> 时间：2012-09-11T07:34:01.017
> 
> 标签：gwt, requestfactory

我完全迷失了试图理解 AutoBean 的 @Category 注释。有人可以告诉我它究竟是如何使用的吗？

我也浏览了 wiki 中的示例。我的疑惑是这样的。

假设我在客户端有一个扩展实体代理的代理接口，并且我想在该接口中插入一个非 setter/getter 方法，我该怎么做？

```
@ProxyFor( value = CacheStrategy.class )
public interface CacheStrategyProxy extends EntityProxy
{
// setters and getters

   CacheStrategyProxy  fetchObject(int id);
}

@Category(CacheStrategyProxyCategory.class)
interface MyFactory extends AutoBeanFactory {
          AutoBean<CacheStrategyProxy> fetchObject();
}

class CacheStrategyProxyCategory {
      public static CacheStrategyProxy fetchObject (AutoBean<CacheStrategyProxy> instance, int id) {
                 // return data
    }
} 
```

我将所有这些都写在我的 CacheStrategyProxy 文件中。但我仍然收到错误“只允许设置器和获取器”。如果我在这里做了一些愚蠢的事情，请原谅我。我对这个世界完全陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:45:10.993

`@Category`不能与 Request Factory 一起使用（至少[目前不能](https://groups.google.com/d/topic/google-web-toolkit/IkoTd85mvas/discussion)）。

Request Factory 使用 AutoBeans（您的代理将是 AutoBean 实例），但 AutoBeanFactory（实际上是工厂）是 RequestFactory 内部的，您无法调整它们。

# c# - 制作 Gridview 列中心和右对齐 (MiddleRight)

> ID：12364876
> 
> 赞同：7
> 
> 时间：2012-09-11T07:34:17.567
> 
> 标签：c#, asp.net, gridview, alignment

我需要将网格视图中的值对齐到中心和右侧。因为我需要对齐货币。

其他列需要居中对齐和左对齐。

你能帮我做这个吗？

我目前正在这样做。

```
<asp:TemplateField ItemStyle-HorizontalAlign="Right" HeaderText="Amount">
    <ItemTemplate>Rs.<%# Eval("Payable_Bill_Amount","{0:n}")%></ItemTemplate>
</asp:TemplateField> 
```

这使内容完全正确。我需要将内容对齐到正确的位置，但也需要像我们所做的计算一样居中

前任：

```
 Required          Current

|    10.00  |   |     10.00|

|   110.00  |   |    110.00| 

|  1210.00  |   |   1210.00|
---------- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:13:32.967

如何使用将它们对齐到右侧

```
ItemStyle-HorizontalAlign="Right" 
```

然后使用 CSS 填充在单元格中的值边缘周围添加一些空间？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-06T06:16:12.920

以上接受的答案对我不起作用。尽管我没有按照上面的答案在代码中尝试它，但我尝试在 aspx 页面中使用等效项（这不起作用）。

```
<asp:BoundField etc>
  <ItemStyle etc />
  <HeaderStyle HorizontalAlign="Right" />
</asp:BoundField> 
```

对我有用的是

```
<HeaderStyle CssClass="colHeader-RightAlign" /> 
```

并在`<head>`

```
<style type="text/css">
    .colHeader-RightAlign {
        text-align:right !important;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:43:14.220

**已编辑**

这就是你需要的。

```
 GridView1.Columns[0].ItemStyle.HorizontalAlign = HorizontalAlign.Right;
 GridView1.Columns[0].ItemStyle.VerticalAlign = VerticalAlign.Middle; 
```

这应该有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-14T12:41:14.577

试试这个进行 perticuler 列对齐

```
protected void myGridView_RowDataBound(object o, GridViewRowEventArgs e)
{
        // Set the alignment of cells containing numeric data.
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            e.Row.Cells[4].HorizontalAlign = HorizontalAlign.Right;
            e.Row.Cells[6].HorizontalAlign = HorizontalAlign.Right;
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-23T13:16:37.967

```
 <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" />
 <RowStyle HorizontalAlign="Center" VerticalAlign="Middle" /> 
```

# jquery - 如何将此函数绑定到尚未创建的元素？

> ID：12364879
> 
> 赞同：1
> 
> 时间：2012-09-11T07:34:25.243
> 
> 标签：jquery, bind, autosize

我正在尝试使此自动调整大小功能起作用。如果我在页面加载之前创建 textarea 它工作正常：

```
$(document).ready(function(){
    $('.hellothere').autosize();  
}); 
```

但是，如果我稍后在页面加载后使用 jQuery 创建 textarea，它不会绑定到这个函数，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:36:44.223

你不能，你需要`.autosize()`为每个新创建的文本区域调用。如果这是事件绑定，你可以`delegate()`，但你正在初始化一个插件，它需要有实际的元素才能使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T07:39:39.967

您需要为每个新创建的文本区域调用 .autosize()。

或者您可以使用 liveQuery 一个 jquery 插件，这是一个很棒的插件，并且自动将自动调整大小应用于每个新创建的元素。

[http://docs.jquery.com/Plugins/livequery](http://docs.jquery.com/Plugins/livequery)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T07:40:05.050

你可以试试[livequery](http://docs.jquery.com/Plugins/livequery)

```
$(document).ready(function(){
    $('.hellothere').livequery(function() {
       $(this).autosize();
    });  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T22:26:15.357

我认为**.on()**是您正在寻找的：[链接](http://api.jquery.com/on/)

将实时事件处理程序附加到选择（无论它们是否存在）。

```
$(function(){

    // Attach a listener to all paragraphs
    $('body').on(('click', 'p', function(event){
        $(this).css('color', 'blue');
    });

    // Dynamically add a paragraph
    $('body').append('<p>Hello World!</p>');

}); 
```

但是，既然您无论如何都在使用 jQuery 添加 textarea，为什么不在插入后立即调用**.autosize()**呢？

```
$('body').append('<textarea class="hellothere"></textarea>').autosize(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T06:57:20.940

要绑定尚未加载到页面上的元素，请针对您的 jQuery 版本使用其中之一。

```
 $("a.offsite").live("click", function(){ alert("Goodbye!"); }); // jQuery 1.3+
 $(document).delegate("a.offsite", "click", function(){ alert("Goodbye!"); }); // jQuery 1.4.3+
 $(document).on("click", "a.offsite", function(){ alert("Goodbye!"); }); // jQuery 1.7+ 
```

引用者：

[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-11T07:44:32.180

使用某人提供的部分答案，然后删除，这有效：

```
 $('.hellothere').live('click',function(){  $(this).autosize(); }) 
```

# jquery - jQuery 滑块无法在第一页加载时加载？

> ID：12364884
> 
> 赞同：0
> 
> 时间：2012-09-11T07:34:37.483
> 
> 标签：jquery

我主页上的滑块有自己的想法，当我第一次访问网站时很少正确加载。[http://www.dailyshowbusiness.com](http://www.dailyshowbusiness.com)

滑块应该有 1 个大图像和下面 3 个较小的（选择）图像，通常当我输入域并按 Enter 时，我只能看到 3 个较小的图像，而不是主图像。

现在，如果我单击另一个页面，然后单击主页，则插件会正确加载。

为什么第一次加载不出来。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:41:24.190

将此代码放入文档准备功能

```
$(document).ready(function(){

$('#carousel').infiniteCarousel({
    transitionSpeed: 800,
    displayTime: 10000,
    displayProgressRing: false,
    progressRingColorOpacity: '0,0,0,.5',
    progressRingBackgroundOn: false,
    thumbnailType: 'images',
    easeLeft: 'linear',
    easeRight:'linear',
    imagePath: './addons/shared_addons/themes/dailyshowbiz/img/',
    inView: 1,
    margin: 0,
    advance: 1,
    customClass: 'myCarousel',
    showControls: false,
    autoHideCaptions: false,
    autoPilot: true,
    prevNextInternal: true,
    internalThumbnails: false,
    enableKeyboardNav: false
});

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:42:36.670

在这个文件`http://www.dailyshowbusiness.com/addons/shared_addons/themes/dailyshowbiz/js/scripts.js`
第 1 行
尝试为滑块设置一个固定高度（500 像素）或调用该函数`window.load`。

问题是：当图像还没有加载时，插件设置`height = 0px`所以你根本看不到它。

# javascript - localStorage 数据存储时间

> ID：12364887
> 
> 赞同：1
> 
> 时间：2012-09-11T07:35:05.957
> 
> 标签：javascript, cordova, jquery-mobile

我在 jQM 和 PhoneGap 中使用 localStorage。如果我不手动删除localStorage，它会存储多长时间？什么时候删除？

我想知道它在运行 Android 和 iOS 的移动设备上是如何工作的。我发现iOS浏览器偶尔会清除它的观点，这是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:14:36.317

本地存储是持久的。它将被存储，直到您卸载应用程序或手动清除它。

# android - Android JSON 不解析所有数据

> ID：12364889
> 
> 赞同：0
> 
> 时间：2012-09-11T07:35:08.887
> 
> 标签：android, json, listview

我已经解析了一个 JSON 文件，然后将一个数组从 JSON 保存到一个字符串，并将其传递给下一个要解析的活动，但我有一个问题，即列表视图只显示第一组位置而不显示任何其他位置。

JSON 片段：

```
{
title: World Rover Scout Moot
locations: [
{
address: Kandersteg, Switzerland
latitude: 46.483742
longitude: 7.663157
name: 01st World Rover Moot (1921)
}
{
address: IngarÃ¶, Sweden
latitude: 59.25235
longitude: 18.465536
name: 02nd World Rover Moot (1925)
}
{
address: Monzie, Scotland
latitude: 56.404182
longitude: -3.818855
name: 03rd World Rover Moot (1939)
}
{
address: Skjak, Norway
latitude: 61.898525
longitude: 8.369957
name: 04th World Rover Moot (1949)
}
{
address: Kandersteg, Switzerland
latitude: 46.483742
longitude: 7.663157
name: 05th World Rover Moot (1953)
}
{
address: Sutton Coldfield, UK
latitude: 52.558769
longitude: -1.802851
name: 06th World Rover Moot (1957)
}
{
address: Melbourne, Australia
latitude: -37.814251
longitude: 144.963165
name: 07th World Rover Moot (1961)
}
{
address: Melbourne, Australia
latitude: -37.814251
longitude: 144.963165
name: 08th World Rover Moot (1990-91)
}
{
address: Kandersteg, Switzerland
latitude: 46.483669
longitude: 7.663095
name: 09th World Rover Moot (1953)
}
{
address: Ransberg, Sweden
latitude: 58.454601
longitude: 14.226012
name: 10th World Moot (1996)
}
{ 
address: Mexico
latitude: 19.691061
longitude: -98.805557
name: 11th World Scout Moot (2000)
}
{
address: Hualien, Taiwan
latitude: 23.987925
longitude: 121.612175
name: 12th World Scout Moot (2004)
}
{
address: Nairobi, Kenya
latitude: -1.312558
longitude: 36.769932
name: 13th World Scout Moot
}
]
},

{
title: World Scout Interreligious Symposium
locations: [
{
address: Kampala, Uganda
latitude: 0.239059
longitude: 32.623615
name: 3rd World Scout Interreligious Symposium
}
]
} 
```

源代码：

```
public class SingleMapSet  extends Activity {
final String KEY_MAPS = "maps";

static final String KEY_MAPSETMAPSET = "";
static final String KEY_MAPNAME = "name";
static final String KEY_MAPLOCATION = "address";
static final String KEY_MAPLONG = "longitude";
static final String KEY_MAPLAT = "latitude";
ListView list;
org.scouts.android.maps.MapsetAdapter adapter;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.playlists);
    TextView lblTitle = (TextView) findViewById(R.id.actionbar);
    lblTitle.setText(R.string.maps);

    Intent in = getIntent();
    String mapset = in.getStringExtra(KEY_MAPSETMAPSET);
    mapset = mapset.substring(1);
    mapset = mapset.substring(0, mapset.length() - 1);

    final ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    String jsonString = null;
    try {
        jsonString = mapset;
    } catch (IllegalStateException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    JSONObject json = null;
    try {
        json = new JSONObject(jsonString);
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

           try{

               JSONArray  jsonArray = json.getJSONArray("locations");
               for(int i=0;i < jsonArray.length();i++){                     

            HashMap<String, String> map = new HashMap<String, String>();
            JSONObject maps = jsonArray.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put(KEY_MAPNAME, maps.getString(KEY_MAPNAME));
            map.put(KEY_MAPLOCATION, maps.getString(KEY_MAPLOCATION));
            map.put(KEY_MAPLONG, maps.getString("longitude"));
            map.put(KEY_MAPLAT, maps.getString("latitude"));

            mylist.add(map);

        }
           }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
           }
           list=(ListView)findViewById(R.id.playlistlist);          
           adapter=new org.scouts.android.maps.MapsetAdapter (this, mylist);        
           list.setAdapter(adapter);
           list.setOnItemClickListener(new OnItemClickListener() {

               public void onItemClick(AdapterView<?> parent, View view, int position,
                       long id) {

                   HashMap<String, String> map = mylist.get(position);

                   Intent in = new Intent(SingleMapSet.this, org.scouts.android.maps.SingleMapSet.class);
                   in.putExtra(KEY_MAPNAME, map.get(KEY_MAPNAME));
                   in.putExtra(KEY_MAPLOCATION, map.get(KEY_MAPLOCATION));
                   in.putExtra(KEY_MAPLONG, map.get(KEY_MAPLONG));
                   in.putExtra(KEY_MAPLAT, map.get(KEY_MAPLAT));

                startActivity(in);

            }
        });
    }

                };      ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:27:18.903

首先删除这一行 mapset = mapset.substring(1); mapset = mapset.substring(0, mapset.length() - 1);

并尝试这种方式

```
 JSONObject jOBj;
 JSONArray  jsonArray;
 JSONArray jarray=new JSONArray(mapset);

 for(int j=0;j<jarray.length();j++){
       jOBj=jarray.getJSONObject(j)
       jsonArray = jOBj.getJSONArray("locations");
         for(int i=0;i < jsonArray.length();i++){                     

           HashMap<String, String> map = new HashMap<String, String>();
           JSONObject maps = jsonArray.getJSONObject(i);

           map.put("id",  String.valueOf(i));
           map.put(KEY_MAPNAME, maps.getString(KEY_MAPNAME));
           map.put(KEY_MAPLOCATION, maps.getString(KEY_MAPLOCATION));
           map.put(KEY_MAPLONG, maps.getString("longitude"));
           map.put(KEY_MAPLAT, maps.getString("latitude"));

           mylist.add(map);

    }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:05:20.770

首先，您的 JSON 中似乎缺少某些内容。它似乎是一个数组，但 [] 不存在。（它是你在开始时用 2 个子字符串删除的吗？）

然后，您可能会做的是：

```
JSONArray json = new JSONArray(jsonString); // Note that it is supposed to be an Array 
```

进而

```
for(int j=0;j < json.length();j++){
    JSONArray jsonArray = json.getJSONObject(j).getJSONArray("location");
    // From here proceed as you did 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T07:42:53.330

您必须使用 AsyncTask 来解析 json。有一些解析链接可以帮助你

[链接1](http://ugirusgiarto.wordpress.com/2011/10/27/json-php-mysql-with-asynctask-progressdialog/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T08:06:52.340

我不知道，你说的“第一组”是什么意思。您是指`mylist`对象的第一个元素吗？（就像`position = 0`所有的时间一样？）

“jsonarray”的大小是否正确？

您可以尝试改用 google gson 库。它将数据解析为指定的对象，或者在这种情况下，解析为对象列表，但我认为它不会改变任何东西。

# sql - 使用 ADO .NET 调用 SQL 函数

> ID：12364891
> 
> 赞同：3
> 
> 时间：2012-09-11T07:35:14.887
> 
> 标签：sql, vb.net, function, stored-procedures, ado.net

我想要在 SQL Server 中创建的调用函数，它接收两个参数并返回一个整数。当我调用存储过程时，我使用以下代码：

```
 sqlcmd.CommandType = CommandType.StoredProcedure
    sqlcmd.CommandText = "PROCEDURE_NAME"

    sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@param1", Utilities.NothingToDBNull(user)))
    sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@param2", Utilities.NothingToDBNull(password)))
    da = New SqlClient.SqlDataAdapter()
    da.SelectCommand = sqlcmd
    table = New DataTable()
    da.Fill(table) 
```

在这种情况下，我有一个存储过程返回的表。如果我想使用返回标量值的函数而不是存储过程，会发生什么变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T07:44:08.167

您不能直接调用该函数，只有`StoredProcedure`, `Text`( *query* )，并且`TableDirect`是允许的。既然您已经接触过存储过程，为什么不创建一个具有该功能的过程呢？

在您的 C# 代码中，您可以使用`ExecuteScalar`命令对象的

```
sqlcmd.CommandType = CommandType.StoredProcedure
sqlcmd.CommandText = "PROCEDURE_NAME"
sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@param1", Utilities.NothingToDBNull(user)))
sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@param2", Utilities.NothingToDBNull(password)))

Dim obj as Object = sqlcmd.ExecuteScalar() 
' obj hold now the value from the stored procedure. 
```

你的存储过程现在应该是这样的，

```
CREATE PROCEDURE PROCEDURE_NAME
    @param1 VARCHAR(15),
    @param2 VARCHAR(15)
AS
BEGIN
    SELECT function_name(@param1, @param2)
    FROM...
    WHERE....
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:34:08.503

如果要返回单个值，可以使用 SELECT 查询调用该函数

sql服务器代码

```
CREATE FUNCTION Test
(
  @p1 varchar(10),
  @p2 varchar(10)
)
RETURNS varchar(20)
AS
BEGIN
  RETURN @p1 + @p2
END 
```

vb.net代码

```
Using cnn As New SqlClient.SqlConnection("Your Connection String")
  Using cmd As New SqlClient.SqlCommand("SELECT dbo.Test(@p1,@p2)", cnn)
    cmd.Parameters.AddWithValue("@p1", "1")
    cmd.Parameters.AddWithValue("@p2", "2")

    Try
      cnn.Open()
      Console.WriteLine(cmd.ExecuteScalar.ToString)  //returns 12
    Catch ex As Exception
      Console.WriteLine(ex.Message)
    End Try
  End Using
End Using 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T15:46:33.007

如果要将存储过程中的值作为单行、单列结果集返回，请使用该[`SqlCommand.ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)方法。

我的首选方法是实际使用已用 TSQL`RETURN`语句相应编写的存储过程的返回值，然后调用[`SqlCommand.ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx).

MSDN 上都提供了示例，但针对您的具体情况，

```
Dim returnValue As SomeValidType

Using connection = New SqlConnection(connectionString))
    SqlCommand command = New SqlCommand() With _
        {
            CommandType = CommandType.StoredProcedure, _
            CommandText = "PROCEDURE_NAME" _
        }

    command.Parameters.Add(New SqlParameter() With _
        {
            Name = "@RC", _
            DBType = SomeSQLType, _
            Direction = ParameterDirection.ReturnValue  _ // The important bit
        }
    command.AddWithValue("@param1", Utilities.NothingToDBNull(user))
    command.AddWithValue("@param2", Utilities.NothingToDBNull(password))

    command.Connection.Open()
    command.ExecuteNonQuery()

    returnValue = CType(command.Parameters["@RC"].Value, SomeValidType)
End Using 
```

* * *

顺便说一句，您会注意到在 .Net 4.5 中有这些函数的方便异步版本，但我担心这超出了问题的范围。

# linux - BusyBox：制作过程中出错

> ID：12364893
> 
> 赞同：1
> 
> 时间：2012-09-11T07:35:24.347
> 
> 标签：linux, embedded-linux, udev, busybox

我尝试在带有 PowerPc 的嵌入式系统上安装 BusyBox 1.20.2。起初我想尝试使用默认配置。所以这是命令

```
make defconfig
make 
```

这是结果：

```
ma-bash-3.2# make
  CC      miscutils/ubi_tools.o
miscutils/ubi_tools.c: In function 'ubi_tools_main':
miscutils/ubi_tools.c:137: error: 'UBI_DEV_NUM_AUTO' undeclared (first use in this function)
miscutils/ubi_tools.c:137: error: (Each undeclared identifier is reported only once
miscutils/ubi_tools.c:137: error: for each function it appears in.)
miscutils/ubi_tools.c:157: error: storage size of 'req' isn't known
miscutils/ubi_tools.c:165: error: 'UBI_IOCATT' undeclared (first use in this function)
miscutils/ubi_tools.c:157: warning: unused variable 'req'
miscutils/ubi_tools.c:171: error: 'UBI_IOCDET' undeclared (first use in this function)
make[1]: *** [miscutils/ubi_tools.o] Error 1
make: *** [miscutils] Error 2 
```

如何解决该错误？

我可以禁用这个`ubi_tool`吗？这会产生什么影响以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:49:30.083

删除 .config 中的这些行：

```
CONFIG_UBIATTACH=y
CONFIG_UBIDETACH=y
CONFIG_UBIMKVOL=y
CONFIG_UBIRMVOL=y
CONFIG_UBIRSVOL=y
CONFIG_UBIUPDATEVOL=y 
```

你不会支持ubifs。

# objective-c - 如何在 Xcode 的 if 语句中将图像设置为光标？

> ID：12364895
> 
> 赞同：0
> 
> 时间：2012-09-11T07:35:29.423
> 
> 标签：objective-c, xcode, image, cursor

我有以下代码：

```
if (conditions) {
    [NSCursor pop];
    [[NSCursor closedHandCursor] push];
} 
```

因此，如果 if 循环中的条件为真，我的光标将变为 closedHandCursor。现在我想用图像来改变它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:38:17.117

使用以下初始化程序来初始化 NSCursor：

```
- (id)initWithImage:(NSImage *)newImage hotSpot:(NSPoint)aPoint 
```

出现在 NSCursor 课程中，如果有帮助，请告诉我...

# iphone - 一个具有两个目标的 Xcode - 但 Localizable.string 文件的选择不同

> ID：12364896
> 
> 赞同：3
> 
> 时间：2012-09-11T07:35:33.980
> 
> 标签：iphone, ios, xcode

是否可以以某种方式将不同的 localizable.strings 文件关联到同一项目的不同目标。

例如：

target1 有英语和法语，而 target 2 有英语和德语？

对于像 *.m 或 *.h 这样的“普通”文件，可以设置 Target Membership - 但我没有找到针对不同语言特定 Localizable.strings 文件的内容。

我想如果这是不可能的，我真的必须在创建 ipa 提交之前手动配置 Localizable.strings 文件——这肯定不是最好的方法。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:08:17.633

请检查 es 扩展部分，您应该会看到 Target Membership 部分，就像以前用于其他文件一样：

![在此处输入图像描述](../Images/46a97c3c0f23ab38adbbaeb9a8679957.png)

# c# - 出现错误：Antlr.Runtime.MismatchedTokenException

> ID：12364899
> 
> 赞同：0
> 
> 时间：2012-09-11T07:35:51.497
> 
> 标签：c#, hibernate, nhibernate

我得到一个`Error: MismatchedTokenException(-1!=104)`

如果我使用该查询，则会出现错误：

```
String hql2 = "UPDATE Buchung as b " +
              "set SERIENE = SERIENE + 1 " +
              "where ID in (SELECT rr.Buchung from Raumreservierung rr " +
              "where CHECK_IN_HAPPEND = :CheckInHappend and SERIENBOOKUID = :SerieID)"; 
```

有人能帮我吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T14:48:41.423

尝试将别名放在 where 条件中

```
String hql2 = "UPDATE Buchung as b " +
    "set SERIENE = SERIENE + 1 " +
    "where ID in (SELECT rr.Buchung from Raumreservierung rr " +
    "where rr.CHECK_IN_HAPPEND = :CheckInHappend and rr.SERIENBOOKUID = :SerieID)"; 
```

# objective-c - 在 Objective C 中登录时记住数据

> ID：12364901
> 
> 赞同：1
> 
> 时间：2012-09-11T07:35:57.920
> 
> 标签：objective-c, macos, cocoa

我是新来的，我只是在 Mac 应用程序上开发。我有登录表格，我想记住数据（用户名，密码）以便下次运行而不填写数据，然后单击sing in。请帮助。预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:39:42.863

如果是用户名和密码等敏感数据，您应该使用钥匙串。

查看 OSX 的[钥匙串编程指南](https://developer.apple.com/library/mac/#documentation/security/conceptual/keychainServConcepts/02concepts/concepts.html)

[SSKeychain](https://github.com/samsoffes/sskeychain)是一个出色的 Objective-C 包装器，适用于 iOS 和 OSX，并简化了钥匙串编程。

# android - Android：以编程方式恢复出厂设置？

> ID：12364902
> 
> 赞同：1
> 
> 时间：2012-09-11T07:35:58.550
> 
> 标签：android, adb

我可以完全访问 Android 系统。我拥有所有超级用户权限，可以从我的任何应用程序中执行所有操作。我只想实现一项功能，我需要在不将用户重定向到 PRIVACY_SETTINGS 的情况下重置设备。如果有人知道如何实现这一点，请与我分享。

它有点紧急。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:37:08.077

您可以使用设备管理员。[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)它允许您擦除所有数据。API 演示中有一个很好的示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T07:51:40.120

以编程方式：[https](https://stackoverflow.com/a/11885303/1257591) : //stackoverflow.com/a/11885303/1257591 它显示了两种方法，一种是 Mighter 提到的实现，另一种是针对旧设备的方法（android 版本 < 2.2）

ADB：[https](https://stackoverflow.com/a/10829600/1257591) ://stackoverflow.com/a/10829600/1257591 包含 adb 命令和示例。从您问题的标签来看，这可能是您正在寻找的答案。

# c# - 如何分析 Windows 服务（一种简单的方法）？

> ID：12364907
> 
> 赞同：2
> 
> 时间：2012-09-11T07:36:07.537
> 
> 标签：c#, windows-services

我需要分析一个用 C Sharp 制作的 Windows 服务，我想知道 Windows 7 Professional 中是否有任何允许它的工具。或一些易于设置的免费应用程序。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T07:38:14.193

Perfview：[http](http://www.microsoft.com/en-us/download/details.aspx?id=28567) ://www.microsoft.com/en-us/download/details.aspx?id=28567 ，基于 ETW。

# php - 在 PHP 中读取一个半 csv 的文件

> ID：12364908
> 
> 赞同：2
> 
> 时间：2012-09-11T07:36:13.150
> 
> 标签：php, file, csv

我想用PHP读取一个文件，文件结构如下：

```
text1,text2,text3,.................

...................................

...................................

...................................

...................................

WORD;

NUMBER

col1; col2; col3; [CSV part of the file starts from here]

value1; value2; value3 
```

我想读取文件的**CSV 部分**并将其插入 MySql 数据库。我寻找`fgetCsv`但无法这样做。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:05:54.610

您为什么不尝试读取文件的最后一行并计算分隔符的数量。之后读取文件的每一行，直到遇到具有适当数量的分隔符的行。一旦发生这种情况，从该行开始创建一个新字符串并将其解析为 csv。

```
$arr = @file('foo.php');
$lastLine = $arr[count($arr)-1];
$delimiterCount = substr_count($lastLine,";");
$csvStarted=false;
$csvString="";
foreach($line in $arr) {
    if($csvStarted) {
        $csvString += $line + "\r\n";
    } else {
        if(substr_count($line,";")==$delimiterCount) {
            $csvStarted=true;
            $csvString += $line + "\r\n";
        }
    }
} 
```

代码效率不高，但能给你一个想法。一旦你找到 CSV 部分的开始，你就可以打破循环并内爆数组的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:58:17.093

我有一个类似的文件，我需要解析并写入几列。我决定逐行读取文件，使用`fgetcsv`：

```
exec('wc -L file.tmp',$res,$stat);
$length = (int)($stat === 0 ? $res[0] : 200);
$fh = fopen('file.tmp','r');
$fields = false;
while($line = fgetcsv($fh,$length,';'))
{
    if (count($line) <= 1)//not more than one semi-colon
    {
        continue;//not part of csv-section, read on
    }
    if (!$fields)
    {
        $fields = $line;//<-- first line of CSV === columns
        continue;
    }
    //$line should be what you need here.
} 
```

现在，就我而言，我决定将结果写入一个新的 csv 文件，并使用`LOAD LOCAL INFILE`. [你可以在这里阅读结果](https://stackoverflow.com/questions/10478861/importing-multiple-csv-files-to-mysql-tables)如何;-)

# c - 从linux中的proc文件解析地址数组

> ID：12364911
> 
> 赞同：0
> 
> 时间：2012-09-11T07:36:23.260
> 
> 标签：c, linux, linux-kernel

我正在向 proc 条目写入可变数量的地址，例如

`echo num_addr addr1 addr2 addr3... addr_n > /proc/memory_address`

（`num_addr`地址的数量在哪里），例如

`echo 2 0x1100 0x3300 > /proc/memory_address`

如何解析函数内部对应于 echo /proc/memory_address 的这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:33:27.207

```
#include <string.h>
#include <stdio.h>

int main()
{
        char *str= "5          0x333    0x232323 555 22323 2323";
        char *entptr;
        int nCount;
        int i;
        unsigned long ulArr[5];

        printf("\n String: %s", str);

        nCount = strtol(str, &entptr, 10);

        printf("\n NCount is %d", nCount);

        printf(" Endptr = %s", entptr);

        while(*entptr == ' ' || *entptr == '0' || *entptr == 'x' || *entptr == '\t') entptr++;

        i = 0;
        while(i<nCount)
        {
                str = entptr;
                ulArr[i] = strtol(str, &entptr, 10);
                printf("\n ulArr[%d] = %u", i, ulArr[i]);

                printf(" Endptr = %s", entptr);
                while(*entptr == ' ' || *entptr == '0' || *entptr == 'x' || *entptr == '\t') entptr++;
                printf(" Endptr = %s", entptr);
                //while(*entptr != ' ' && *entptr!='\0') entptr++;
                i++;
        }
        return 0;
} 
```

# php - 怎么优化呢？

> ID：12364913
> 
> 赞同：0
> 
> 时间：2012-09-11T07:36:28.280
> 
> 标签：php, image, optimization, foreach, erase

我尝试减少页面的加载时间。

我已经确定了问题的根源：

```
foreach (glob($dir . 'medium/' . $curRef . '*.jpg') as $file)
  $urlMed = $file;
if (empty($urlMed))
 $urlMed = $dir . 'medium/no-image.jpg'; 
```

仍然可以使用其他功能并“擦除”“foreach”循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:41:17.953

你的`foreach`循环没有做任何有意义的事情。最后`$urlMed`包含循环的最后一个值（`$urlMed = end(glob($dir.'medium/'.$curRef.'*.jpg'));`）。

要检查目录中是否存在 JPG 文件，您可以简单地检查`glob`（未找到匹配时返回空数组）的结果：`if(!count(glob($dir.'medium/'.$curRef.'*.jpg'))) 'no-image.jpg';`

# android - SAX 解析器在解析特殊字符“:”时出错

> ID：12364916
> 
> 赞同：0
> 
> 时间：2012-09-11T07:36:48.347
> 
> 标签：android

```
 <media:group>
       <media:content type="video/mp4"   
                      url="http://cdn2.junctiontv.net/dmv/roku/ChiroDiniTumiJeAmar2997fps800kbpsForIPTV.mp4" 
                      bitrate="800" 
                      duration="8100"/>
    </media:group>
    <media:thumbnail 
            url="http://cdn2.junctiontv.net/dmv/images/ChiroDiniTumiJeAmar158x204.png"/> 
```

我正在尝试使用 SAX Parser 解析这个 xml。但是由于标签中的 : 而出现错误。但是，如果我替换 remove ：即更改为正常工作。但问题是，如果我这样做，则会在 url 中出现错误，因为 : 在 http 之后被删除。

有什么解决办法？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:27:37.697

这是一个合适的代码。将此代码添加到任何 SAX Parser 代码，包含 http:// 和 https:// 的 xml 都可以被解析。

```
 String text10=text9.replaceAll(":", "");                 //text9 is any valid  url with http:// or https://  or both

        String text11="",text12="",text13="",text14="";

        if(text10.contains("http//"))
        {
        text14=text10.replaceAll("http//", "http://");

        }

        if(text10.contains("https//"))
        {
         text14=text10.replaceAll("https//", "https://");

        }

        if(text10.contains("https//") && (text10.contains("http//")))
        {
            if(text10.contains("http//"))
            {
            text13=text10.replaceAll("http//", "http://");
            }
            if(text13.contains("https//"))
            {
             text14=text13.replaceAll("https//", "https://");
            }

        }

        System.out.println("This is demo text     " + text14); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:00:02.503

终于设法做到了……在一个回合的过程中。如果代码只包含 http://，它工作正常

```
 String text2=text1.replaceAll(":", "");
  String text3=text2.replaceAll("http", "http:"); 
```

将这两行添加到我的代码中，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:56:39.253

不使用 SAXparder，而是使用

```
android.util.Xml.parse(InputStream,Xml.Encoding.ISO_8859_1, DefaultHandler); 
```

为了解决这个问题...

# java - 填写所有 Jtable 字段后启用 Jbutton

> ID：12364921
> 
> 赞同：0
> 
> 时间：2012-09-11T07:37:18.700
> 
> 标签：java, swing, jtable, jbutton

我有一个带有可编辑字段的 Jtable 和一个 Jbutton。我希望我的按钮被禁用，直到所有表格字段都被填满。填写完所有字段后，我希望启用该按钮。我怎样才能做到这一点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:41:40.947

两个选项：

*   实现一个 TableModelListener 检查是否满足条件，如果满足则启用/禁用按钮
*   实现一个自定义的 TableModel，它自己进行检查，如果没有/填充，则触发 PropertyChange。收听该属性并根据需要启用/禁用

后者是更好的选择，因为它真的取决于模型来决定自己的状态。

# cryptography - 我应该保护/隐藏 Diffie-Hellmann 的素数和基数吗？

> ID：12364923
> 
> 赞同：0
> 
> 时间：2012-09-11T07:37:25.600
> 
> 标签：cryptography, public-key-encryption, encryption-asymmetric, diffie-hellman

我们知道 DH 算法基于 2 个大素数，它们被称为[素数和基数](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)

我正在编写实现 DH 密钥交换算法的应用程序。从安全的角度来看，我应该注意保护素数和基数吗？如果我不这样做会有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:46:33.513

素数和基数是公共值，您不需要注意该值的安全性

该值相当于 RSA 中的公钥

# c# - 如何将 PdfPTable 插入现有的 PDF 模板？

> ID：12364926
> 
> 赞同：3
> 
> 时间：2012-09-11T07:37:36.333
> 
> 标签：c#, pdf, itextsharp, pdfptable, pdfstamper

**更新：**

经过一番讨论，我们决定使用 TeX，特别是与 windows 兼容的[MiKTeX](http://www.miktex.org/)。我们意识到，即使我们可以通过微观管理布局来格式化动态加长表格（这似乎不可能，或者像计算每行的行高一样乏味），还有其他动态控件，例如大文本框，我们也会需要进行微观管理，因此我们决定即时生成整个文档。考虑到这一点，使用 TeX 是显而易见的选择，因为它的强大功能和我们之前的经验，现在一周后，我很高兴我们这样做了，因为我们所有的报告都是动态生成的，并且背后的代码是干净的最小。

**原来的：**

我有一个使用 LiveCycle 生成的 pdf 表单模板，我想填写它（pdfstamper）并添加一些表格（pdfptable），但事实证明它比我最初想象的要困难。

我打开一个 pdf 并使用 pdfstamper 编辑静态字段：

```
using (var outputPDF1 = new MemoryStream())
{
    var pdfReader = new PdfReader(pdf);
    var pdfStamper = new PdfStamper(pdfReader, outputPDF1);
    var pdfFields = pdfStamper.AcroFields;

    pdfFields.SetField("Field1", "Value1"); 
```

这是直截了当和清楚的。

然后我尝试添加一个表格，该表格将从多个页面的设定位置开始。这里有一个3 岁的尝试，它使用了更旧版本的 itextsharp，而且非常手动[。](http://itext-general.2136553.n4.nabble.com/add-PdfPTable-into-Columntext-into-an-existing-PDF-File-td2168764.html)

该代码的关键是使用 GetOverContent 在生成的表格中插入 ColumnText 但这需要知道表格高度并手动将表格切割成合适的大小

```
 var cb = pdfStamper.GetOverContent(1);
    var ct = new ColumnText(cb);
    ct.Alignment = Element.ALIGN_CENTER; 
    ct.SetSimpleColumn(36, 36, PageSize.A4.Width-36, PageSize.A4.Height-300); 
    ct.AddElement(table);
    ct.Go(); 
```

还有另一个答案 [Itextsharp：在一个页面上调整 2 个元素，](https://stackoverflow.com/questions/7590071/itextsharp-adjust-2-elements-on-exactly-one-page/7601244#7601244) 仅限于单个页表。它可以是可扩展的，但您似乎还必须在后续页面上计算页眉/页脚。

以及同一个大方向上的各种悬而未决的问题：

[将动态表添加到 pdf 模板](https://stackoverflow.com/questions/11016002/adding-a-dynamic-table-to-an-pdf-template)

[itextsharp 将 Pdfptable 放在所需位置](https://stackoverflow.com/questions/9321867/itextsharp-place-pdfptable-at-desired-position)

所以我的问题是，目前使用所见即所得编辑器静态创建 pdf 并对其进行修改以添加动态大小的内容（例如表格或任意长度的文本）的最佳方法是什么？如果我们可以使用 WYSIWYG LiveCycle 来使模板正常工作，我不想从头开始生成一个，但是如果为 pdf 模板格式化表格比动态生成整个表格需要更多的努力，那么我宁愿使用 itextsharp 即时生成整个 pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:06:58.110

首先：如果您不展平表单，您的代码将永远无法工作。在使用 LiveCycle Designer 创建的文档中，PDF 充当 XML 的容器。PdfPTable 可用于创建与 XML 非常不同的 PDF 语法。

其次：在您的代码示例中，您将在第一页的现有内容上添加一个表格。这是你的意图吗？为什么不使用表格创建一个单独的文档，然后将从头创建的文档与已填写并扁平化的表单合并？您是否假设现有内容会重排？在这种情况下，您不懂 PDF，请多阅读一些内容。

假设您正在使用以下代码：

```
var cb = pdfStamper.GetOverContent(1);
var ct = new ColumnText(cb);
ct.Alignment = Element.ALIGN_CENTER; 
ct.SetSimpleColumn(36, 36, PageSize.A4.Width-36, PageSize.A4.Height-300); 
ct.AddElement(table);
ct.Go(); 
```

如果这对您来说很好，除非表格不适合一页，为什么不插入第二页？你指的是一个有一行的例子：

```
int status = ct.go(); 
```

您应该使用 status 的值来确定表格是否适合该列。只要表格没有完全呈现，您就应该插入页面，并将表格的一部分添加到这些新页面中。

当然：如果你调整你的形式，你的设计会更好，而不是发明一些“混合”方法。

# objective-c - uiview动画完成块中的递归会导致堆栈溢出吗？

> ID：12364930
> 
> 赞同：1
> 
> 时间：2012-09-11T07:37:55.910
> 
> 标签：objective-c, cocoa-touch, uiview, uiviewanimation

我想做一个无休止的动画（例如，让一个视图在两个位置之间无休止地移动）

我想知道这是否是递归，是否会导致堆栈溢出？伪代码：

```
-(void)doAnimation {
    [UIView animateWithDuration:1.0
            delay:0.0
            options:(UIViewAnimationOptionCurveEaseIn | UIViewAnimationOptionAllowUserInteraction)
            animations:^{
                if(view is at Position A){ 
                    set frame to Postion B;
                }else{
                    set frame to Positon A;
                }
            }
            completion:^(BOOL finished){
                [self doAnimation];
            }
     ];
} 
```

提前致谢

狮子座

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T07:49:04.200

当你的完成被调用时，调用堆栈已经展开到主运行循环，所以，不，你不会得到任何堆栈溢出，只是一些无限动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:03:00.693

这是执行重复动画的错误方法。查看动画选项`UIViewAnimationOptionRepeat`，`UIViewAnimationOptionAutoreverse`而不是（[文档，请参阅末尾的常量](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)）您的动画可以重写如下：

```
-(void)doAnimation {
    [UIView animateWithDuration:1.0
            delay:0.0
            options:(UIViewAnimationOptionCurveEaseIn | UIViewAnimationOptionAllowUserInteraction |UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse)
            animations:^{
                set frame to Position B;
                }
            }
            completion:nil
            }
     ];
} 
```

假设您的视图从位置 A 开始。

# jsf-2 - ValueExpression：如何获取基础对象？

> ID：12364936
> 
> 赞同：1
> 
> 时间：2012-09-11T07:38:24.550
> 
> 标签：jsf-2, el

```
@FacesValidator("uniqueValidator")
public class UniqueValidator implements Validator
{
    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException
    {
        if(context == null)
        {
            throw new NullPointerException();
        }
        if(component == null)
        {
            throw new NullPointerException();
        }

        ValueExpression valueExpression = component.getValueExpression("value");
        if(valueExpression == null)
        {
            return;
        }

        ValueReference valueReference = valueExpression.getValueReference(context.getELContext());
        if(valueReference == null)
        {
            return;
        }

        Object base = valueReference.getBase();
        Object property = valueReference.getProperty();

        Tracer.out(base, property);

        .....
    }
} 
```

并且`ValueReference`始终为**空**。

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T12:50:50.913

谢谢 BeanValidator :)

```
public class ValueExpressionAnalyzer
{
    public static ValueReference getReference(ELContext elContext, ValueExpression expression)
    {
        InterceptingResolver resolver = new InterceptingResolver(elContext.getELResolver());

        try
        {
            expression.setValue(new InterceptingContext(elContext, resolver), null);
        }
        catch(ELException ele)
        {
            return null;
        }

        ValueReference reference = resolver.getValueReference();
        if(reference != null)
        {
            Object base = reference.getBase();
            if(base instanceof CompositeComponentExpressionHolder)
            {
                ValueExpression ve = ((CompositeComponentExpressionHolder) base).getExpression((String) reference.getProperty());
                if(ve != null)
                {
                    reference = getReference(elContext, ve);
                }
            }
        }
        return reference;
    }

    private static class InterceptingContext extends ELContext
    {
        private final ELContext context;
        private final ELResolver resolver;

        public InterceptingContext(ELContext context, ELResolver resolver)
        {
            this.context = context;
            this.resolver = resolver;
        }

        // punch in our new ELResolver
        @Override
        public ELResolver getELResolver()
        {
            return resolver;
        }

        // The rest of the methods simply delegate to the existing context

        @Override
        public Object getContext(Class key)
        {
            return context.getContext(key);
        }

        @Override
        public Locale getLocale()
        {
            return context.getLocale();
        }

        @Override
        public boolean isPropertyResolved()
        {
            return context.isPropertyResolved();
        }

        @Override
        public void putContext(Class key, Object contextObject)
        {
            context.putContext(key, contextObject);
        }

        @Override
        public void setLocale(Locale locale)
        {
            context.setLocale(locale);
        }

        @Override
        public void setPropertyResolved(boolean resolved)
        {
            context.setPropertyResolved(resolved);
        }

        @Override
        public FunctionMapper getFunctionMapper()
        {
            return context.getFunctionMapper();
        }

        @Override
        public VariableMapper getVariableMapper()
        {
            return context.getVariableMapper();
        }
    }

    private static class InterceptingResolver extends ELResolver
    {
        private final ELResolver delegate;
        private ValueReference valueReference;

        public InterceptingResolver(ELResolver delegate)
        {
            this.delegate = delegate;
        }

        public ValueReference getValueReference()
        {
            return valueReference;
        }

        // Capture the base and property rather than write the value
        @Override
        public void setValue(ELContext context, Object base, Object property, Object value)
        {
            if(base != null && property != null)
            {
                context.setPropertyResolved(true);
                valueReference = new ValueReference(base, property.toString());
            }
        }

        // The rest of the methods simply delegate to the existing context

        @Override
        public Object getValue(ELContext context, Object base, Object property)
        {
            return delegate.getValue(context, base, property);
        }

        @Override
        public Class<?> getType(ELContext context, Object base, Object property)
        {
            return delegate.getType(context, base, property);
        }

        @Override
        public boolean isReadOnly(ELContext context, Object base, Object property)
        {
            return delegate.isReadOnly(context, base, property);
        }

        @Override
        public Iterator<FeatureDescriptor> getFeatureDescriptors(ELContext context, Object base)
        {
            return delegate.getFeatureDescriptors(context, base);
        }

        @Override
        public Class<?> getCommonPropertyType(ELContext context, Object base)
        {
            return delegate.getCommonPropertyType(context, base);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-07T20:34:25.637

看看 Omnifaces ExpressionInspector。似乎在 JSF 2.x 中它没有实现并且总是返回 null。

[https://showcase.omnifaces.org/el/ExpressionInspector](https://showcase.omnifaces.org/el/ExpressionInspector)

# jsf - 来自字符串的 JSF 舍入值

> ID：12364939
> 
> 赞同：3
> 
> 时间：2012-09-11T07:38:39.827
> 
> 标签：jsf

我有一个 JSF 1.2 视图，它是一种报告生成器。用户可以选择一个查询，配置一些值，然后请求数据库并收集数据。之后可以在数据表中查看数据，最后导出到 Excel。到目前为止工作正常。

根据查询，列具有不同的类型，其中一种是 Double。Double 值现在应该四舍五入...

由于有很多行（数万或数十万），我将所有数据收集为字符串以避免耗时的类型转换。这很好，因为要导出到 Excel，我也需要字符串（写入 Office XML）。

但是现在四舍五入了。在数据表中，双打应该四舍五入。如果我有一个 Double，我可以轻松地使用 f:convertNumber，但我没有。

我的想法是一个字符串转换器，它分析它是否是一个数值，然后格式化字符串。（性能并不那么关键，因为分页数据表中只有 30 条左右的记录）。我将如何做到这一点？

任何（其他）建议？谢谢！
标记

编辑：
现在解决了

```
 public class ReportStringConverter implements Converter {

  DecimalFormat f = new DecimalFormat("#0.00");  

  public Object getAsObject(FacesContext context, UIComponent component, String value)        {
    return value;
  }

  public String getAsString(FacesContext context, UIComponent component, Object value) {
    if (isNumeric(value.toString())) {
      return f.format(Double.parseDouble(value.toString()));
    } else {
      return value.toString();
    }
  }

  private boolean isNumeric(String s) {
    try {
      double d = Double.parseDouble(s);
    } catch (NumberFormatException e) {
      return false;
    }
    return true;
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:58:20.450

您可以使用表达式语言通过添加将字符串转换为数字`0`（例如：）`#{'35.75' + 0}`。这使您可以简单地使用`f:convertNumber`.

```
<h:outputText value="#{'35.75' + 0}">
  <f:convertNumber pattern="0"/>
</h:outputText> 
```

# css - HTML 对象标签给出一个行间距

> ID：12364940
> 
> 赞同：0
> 
> 时间：2012-09-11T07:38:42.340
> 
> 标签：css, html

我想在我的应用程序中使用 html 对象标签，但我不想给它任何宽度或高度。

现在，当我渲染页面时，它给了我一个行空间。

我已使用以下 CSS 属性来消除此空间，但没有任何效果

```
margin:0px;
padding:0px;
border:0px; 
```

有人可以告诉我为什么我一直有这一行空间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:16:03.257

我已将以下样式属性添加到我的 html 对象标记中，它解决了问题

不透明度：1；背景颜色：#000000；宽度：0px；高度：0px；位置：绝对；可见性：隐藏；字体大小：0px；顶部：-50px；边框：无；

# android - Android：SP（缩放独立像素）似乎不起作用，在每个设备上看起来确实不同

> ID：12364942
> 
> 赞同：1
> 
> 时间：2012-09-11T07:39:01.137
> 
> 标签：android, android-layout, android-emulator

我一定是做错了什么

我有一个布局 xml 和线性布局，这个线性布局有 2 个按钮（相当大），并且重力设置为线性布局的垂直和水平中心。在我为 Nexus One 3.7 设计的屏幕上看起来很棒

所以在eclipse中我将nexus one（使用下拉菜单）更改为10.1屏幕，一切都显示正常，但我的按钮太小了，它们似乎没有保持外观和感觉大小..

难道我做错了什么..

我想要做的是让我的屏幕在任何设备上看起来几乎相同 - 我虽然 SP 是要走的路？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:59:05.470

所以我在 Galaxy Tab 和 Tab 10.1" 之间切换时也遇到了同样的问题。Android 将每个屏幕分类为 bin，并相应地使用 SP。尝试在两个屏幕上运行以下代码：

```
Display d = getWindowManager().getDefaultDisplay();
DisplayMetrics dm = new DisplayMetrics();
d.getMetrics(dm);
Log.d("DISPLAYINFO", "Classified density: " + dm.densityDpi + ", scaled density: " + dm.scaledDensity + ", actual densities: x: " + dm.xdpi + ", y: " + dm.ydpi); 
```

您可能会看到较小的平板电脑被分类在更高密度的垃圾箱中，因此一切都被放大以尝试看起来相同。这有点烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:19:30.257

我怀疑按钮缩放到正确的像素数，但是当您切换到平板电脑视图时，设计师正在缩小图像以适合 10.1" 屏幕。如果您单击设计师左上角的小图标，数字 1 在圆圈内，您将看到像素以 1:1 映射时的外观

Scale Indepent Pixel（或Density Independent Pixel）有利于抵消不同屏幕（像素）密度的影响。因此，您所做的比较不是正确的。要真正看到使用 DIP（或 SIP）时的效果，您应该比较物理尺寸大致相同但屏幕密度不同的两个屏幕上的布局外观。（尝试两个按钮，一个宽度指定为 x px 宽度，另一个宽度指定为 x dp。

此外，如果您真的希望根据屏幕的物理尺寸确定按钮大小，这是一种方法。不要在 SIP 中指定大小，而是为该值指定一个“dimen”资源。然后，您可以为大屏幕和小屏幕指定不同的尺寸值。

dimen 的用法示例：将宽度指定为： `android:layout_width="@dimen/view_width"`

然后创建一个文件 res/values/dimens.xml

```
<resources>
    <dimen name="view_width">10dp</dimen>
</resources> 
```

创建另一个文件 res/values-large/dimens.xml

```
<resources>
    <dimen name="view_width">20dp</dimen>
</resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T07:45:11.307

如果您忘记定义`<uses-sdk>`in `AndroidManifest.xml`，您可能会看到与布局等相关的奇怪问题。

因此`AndroidManifest.xml`，首先检查一下是否定义了以下示例：

```
<uses-sdk android:minSdkVersion="5"
          android:targetSdkVersion="9" /> 
```

如果问题仍然存在，请发布您的资源xml，以便检查代码。

# x11 - 在 x11 下，如何安装一个钩子程序来监控发布到事件队列的事件

> ID：12364943
> 
> 赞同：0
> 
> 时间：2012-09-11T07:39:02.197
> 
> 标签：x11

在 x11 下，如何安装一个挂钩过程来监控发布到事件队列的消息。正如我们所知，我们可以在 win32 下使用 func SetWindowsHookEx 和 WH_GETMESSAGE 挂钩程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T00:40:32.770

您很可能需要[XSelectInput](http://tronche.com/gui/x/xlib/event-handling/XSelectInput.html)。当服务器端发生某些事件时，xserver 根据目标窗口事件掩码决定通知谁。与其他窗口属性不同，每个更改窗口事件掩码的客户端都有自己的副本，服务器会通知所有设置了窗口事件掩码的客户端。这样，您可以选择，例如根窗口的曝光事件掩码，并在根窗口矩形无效时接收事件 - 类似于在 win32 api 中设置 WM_PAINT 挂钩。

# forms - 如何通过 Microsoft Dynamics CRM 中的 URL 查看特定帐户的发票？

> ID：12364953
> 
> 赞同：0
> 
> 时间：2012-09-11T07:39:38.840
> 
> 标签：forms, iframe, crm, microsoft-dynamics

我正在尝试在表单中添加一个 iframe 以查看将显示与该帐户相关联的所有发票的帐户。我已经阅读[了](http://msdn.microsoft.com/en-us/library/gg328483.aspx)有关通过 URL 访问特定表单的 MSDN 页面，我可以实现，但是将生成的 URL 复制到我在表单上创建的 iframe 会产生错误消息。

我想知道我想要完成的工作是否可行，如果可以，我应该如何格式化 URL，以便只显示连接到正在打开的用户帐户的发票。如果可以的话，我稍后会添加更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:45:18.020

我认为你真正想要做的是添加一个子网格。这与 iFrame 不同，iFrame 通常包含 Web 资源或 Web 上的页面链接。专门存在一个子网格来显示相关记录 - 例如，显示表单主体上的左侧关系链接。

[我认为这篇文章应该告诉你该怎么做。](http://blog.customereffective.com/blog/2010/10/form-sub-grids-in-dynamics-crm-2011.html)

编辑 - 基于 Jacks 评论：

因此，Crm 无法通过开箱即用的功能轻松处理这种情况。但你确实有几个选择。我认为这些都不是完美的解决方案，所以我会让你选择。

1.  子网格实际上只运行一些 FetchXml，您可以使用 JavaScript 更改此 FetchXml，因此您可以更改视图以返回不直接相关的记录。[绿色圣经](http://crmgreenbible.blogspot.co.uk/2011/07/crm-2011-change-subgrid-fetchxml.html)有一个例子，虽然这看起来不像它的支持。

2.  在 iFrame 中使用报表。

3.  使用插件，我自己没有这样做，但一位同事告诉我，可以在检索消息上粘贴一个插件，并基本上更改视图使用的查询或结果。

4.  在发票和帐户之间创建第二个关系。然后，每当您将发票链接到客户时，还要使用该客户填充此新关系（工作流将执行），并且每当创建链接到联系人的发票时，使用该联系人的父客户填充新关系（再次工作流程会做）。然后将您的子网格建立在这个新关系上。这种方法不是最干净的，但它可能是最快和最容易实现的。

# sql-server - 多答案问题的最佳数据库模型是什么

> ID：12364960
> 
> 赞同：2
> 
> 时间：2012-09-11T07:40:25.597
> 
> 标签：sql-server, database, database-design

我需要将多个答案问题存储在数据库（MSSQL）中，但我无法决定什么是最好的方法。我应该将问题存储在一个表中，将所有答案存储在另一个表中，将正确答案存储在第三个表中吗？他们都应该在同一张桌子上吗？

我很想听听你的想法

谢谢

阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:54:28.823

对我来说，在你的情况下，最好的方法是将问题和答案放在单独的表格中。如果您的问题有多个答案，并且您可能想在很多问题中使用一个答案，那么这是最好的方法。您还应该添加适合特定问题的答案的表格。

这样，您就没有数据库中的数据冗余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:00:11.553

每个概念或实体都应该在自己的表中。

*   问题表中的问题
*   答案表中的答案，其 QuestionID 带有指示其正确或错误的布尔字段（除非答案可以属于多个问题？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T08:25:09.697

我同意波迪卢斯卡。表中的每个实体。如果所有或任何答案都可以“典型化”（即不是“免费答案”），请添加一个“典型化答案”表格，将其与表格问题相关联（以防止有人选择不适用的“典型化答案”。在表格“用户答案”将其与表“问题”相关联，如果某些记录（或答案）包含未“典型化”，您可以用表示“正确”或“错误”的布尔列对其进行标记。希望对您有所帮助。

# android - 如何防止重新启动 Android Tabhost 中的一项活动？

> ID：12364961
> 
> 赞同：0
> 
> 时间：2012-09-11T07:40:29.670
> 
> 标签：android, android-tabhost, android-orientation

在我的应用程序中，我有一个选项卡主机和 3 个活动 A、B、C 作为选项卡内容。当方向更改时，当前活动正在重新启动。活动 B，有一个网络视图，我正在动态加载一些视频链接。当用户点击这些视频时，它们就会被播放。当方向改变时，B 正在重新启动，这使我的网络视图清晰也无法从停止位置恢复视频。为此，我想阻止仅活动 B 重新启动（这只是一种情况，但我有许多其他正当理由不杀死活动 B）。

我想要的是如何防止只有“B”被破坏和重新创建。我尝试`public void onConfigurationChanged(Configuration newConfig)`
在 tabhost 活动和 Activty "B" 中都覆盖。但它正在调用 Activity B 的 onCreate 方法以及 onConfigurationChanged。在 B 中调用 onCreate，使我的视图刷新并丢失 B 活动的状态。所以，**简而言之，有什么方法可以防止销毁/创建（第二次）被调用为 android 选项卡主机中的一项活动。**提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-11T07:47:46.177

您需要限制方向更改，否则一旦方向更改，活动将重新启动。

要限制方向更改，您需要在清单文件中为您正在使用的所有活动添加此行，否则您可以将其添加到应用程序本身。

```
<activity android:name="A"
              android:configChanges="orientation|keyboardHidden"></activity> 
<activity android:name="B"
              android:configChanges="orientation|keyboardHidden"></activity> 
<activity android:name="C"
              android:configChanges="orientation|keyboardHidden"></activity> 
```

# jquery - 如何在加载网格后立即在jquery中创建一个函数

> ID：12364962
> 
> 赞同：0
> 
> 时间：2012-09-11T07:40:30.120
> 
> 标签：jquery, gridview

我有一个简单的 gridview，我想在 jquery 中创建一个在加载网格后立即执行的函数。

我正在尝试使用：live and ready，但它不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:41:58.620

尝试

```
$("#grid_view_id").load() 
```

# objective-c - CoreData 循环更改关系

> ID：12364963
> 
> 赞同：3
> 
> 时间：2012-09-11T07:40:32.163
> 
> 标签：objective-c, ios, core-data, relationship

我有一个像这样的简单模型：

```
item  category --> category 
      <--- items 
```

和以下数据：

```
item A -> category blue
item B -> category blue
item C -> category blue
item D -> category green
item E -> category green 
```

我想要实现的是将所有类别为绿色的项目更改为蓝色。

以下代码仅产生错误：

已经存在两个类别：

```
blueCategory
greenCategory

for (Item *aItem in [greenCategory.items]) {
    [aItem setCategory:blueCategory];
} 
```

错误：

> 'NSGenericException'，原因：' *** Collection <_NSFaultingMutableSet: 0x8a0ef70> 在枚举时发生了变异。'

我的问题是：如何更改循环中项目的类别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:50:46.977

问题是当你循环遍历它时，你不能像你的集合那样改变（变异）一个集合`greenCategory.items`，这就是你在改变集合中项目的类别时所做的事情。您需要做的是创建一个单独的集合并对其进行循环。

```
NSArray *greenCategoryItemsArray = [greenCategory.items allObjects];

for (Item *aItem in greenCategoryItemsArray) {
    [aItem setCategory:blueCategory];
} 
```

# c# - 实时视频录制 wp7

> ID：12364966
> 
> 赞同：0
> 
> 时间：2012-09-11T07:40:39.137
> 
> 标签：c#, silverlight, windows-phone-7, streaming, recording

我需要创建实时视频录制：在视频录制过程中，视频流在服务器上转换，而不在设备上保存视频。但我找不到实现这一点的方法。有没有办法在 Windows Phone 上创建这样的视频录制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:43:21.630

Windows Phone 相机 API 允许您访问原始视频流。首先阅读有关此 API 的教程，如下所示：

[Windows Phone 7.5 - 操作相机流](http://www.silverlightshow.net/items/Windows-Phone-7.5-Manipulating-camera-stream.aspx)

# sql - 使用表单中的文本框在表格中输入数据

> ID：12364967
> 
> 赞同：0
> 
> 时间：2012-09-11T07:40:38.593
> 
> 标签：sql, database, vba, ms-access

我正在尝试创建一个表单，使用户能够使用文本框更改表中的数据。我对 VBA 和 SQL 的了解有限，但我尝试使用 SQL。

```
UPDATE WIP SET WIP.[Current Stock] = [WIP]![Current Stock]
WHERE (((WIP.[Part Code])=[Forms]![Stock In]!Text27)); 
```

这是我想出的，但它似乎不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:48:14.253

你试过谷歌吗？[http://www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

您的 SQL 更新语句的逻辑可能不正确。您正在尝试为与您在文本框中键入的内容相等的任何行设置为`Current Stock`...如果您不输入存在于 中的内容，您将得到“0 行将被更改”。`Current Stock``Part Code``Part Code`

尝试更改您的代码以匹配以下内容（如上面的链接）：

```
UPDATE table_to_update
SET column_to_update=value_to_enter
WHERE criteria_column=criteria_value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:26:27.050

尝试：

```
UPDATE WIP SET WIP.[Current Stock] = [Forms]![Stock In]![Current Stock] 
WHERE WIP.[Part Code]=[Forms]![Stock In]![Text27] 
```

或者

```
UPDATE WIP SET WIP.[Current Stock] =  
       WIP.[Current Stock]+[Forms]![Stock In]![Current Stock] 
WHERE WIP.[Part Code]=[Forms]![Stock In]![Text27] 
```

* * *

重新评论

猜测，我会想象：

```
UPDATE WIP SET WIP.[Current Stock] 
       = [WIP]![Current Stock] + [Forms]![Stock In]![Text27]
WHERE WIP.[Part Code]=[Forms]![Stock In]![Combo19] 
```

或者

```
UPDATE WIP SET WIP.[Current Stock] = [Forms]![Stock In]![Text27]
WHERE WIP.[Part Code]=[Forms]![Stock In]![Combo19] 
```

# android-webview - Jelly Bean webview 应用程序无法完美响应 touchend 事件

> ID：12364971
> 
> 赞同：4
> 
> 时间：2012-09-11T07:40:51.180
> 
> 标签：android-webview, android-4.2-jelly-bean

我的 webview 应用程序适用于比 Jelly Bean 更早的 android 版本中的 touchend 事件。但是在 Jelly Bean 中，touchend 事件是不可靠的。特别是在可滚动的 div 上，有时不会触发 touchend 事件，整个应用程序停止响应任何 touchend 事件，我收到带有标签“webcoreglue”和文本“不应该发生：没有基于 rect 的测试节点”的日志消息找到”现在在我滚动一点之后，它开始正常响应 touchend。请帮忙。

HTML

```
<div id="srpanel" class="panel">
    <div class="main sr-list">
        <div class="sr-list-item-action">
        </div>
    </div>
</div> 
```

JS

```
$('.sr-list-item-action').bind('touchend', function(){
//some code
}); 
```

我在 for 循环中为列表中的每个项目使用 div 'sr-list-item-action'。因此，单击列表中的某个项目仅在某些情况下有效。否则，当它不起作用时，整个屏幕实际上会被冻结并停止接收任何 touchend 事件，直到我滚动为止。我观察到的另一件事是，`$(document).scrollTop();`当我转到列表的下一页时，这种情况发生得更多。不确定这是否相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:44:40.517

有完全相同的问题。经过许多不眠之夜，这救了我：

```
window,html,body {
    overflow-x:hidden !important;
    -webkit-overflow-scrolling: touch !important;
    overflow: scroll !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T23:52:07.667

在绑定中将所有“touchend”更改为“click”。这对我有用。此链接很有帮助：[Android WebView JellyBean -> 不应发生：未找到基于 rect 的测试节点](https://stackoverflow.com/questions/12090899/android-webview-jellybean-should-not-happen-no-rect-based-test-nodes-found)

# mysql - mysql - 按多列分组并求和

> ID：12364974
> 
> 赞同：2
> 
> 时间：2012-09-11T07:41:03.973
> 
> 标签：mysql, join, sum

我在弄清楚以下 mysql 查询时遇到了一些麻烦。

这是一种时间跟踪，用户根据他们所做的任务有一定的费率。而且我需要有一个摘要，以便我知道在周末向用户支付什么费用。

```
-----------tSessions---------------------------
|id      |userid  |typeid  |session_length_min
-----------------------------------------------
|1       |1       |1       |30
-----------------------------------------------
|2       |1       |1       |45
-----------------------------------------------
|3       |1       |2       |(null)
-----------------------------------------------
|4       |2       |2       |(null)
-----------------------------------------------

-----------tUsers-----------------------------------------------------------------------------------
|id      |name  |rate_cleaning_30_min   |rate_cleaning_45_min   |rate_kitchenwork  |rate_dogwalking
----------------------------------------------------------------------------------------------------
|1       |Tom   |30                     |50                     |40                |20
----------------------------------------------------------------------------------------------------
|2       |Joe   |35                     |60                     |45                |20
----------------------------------------------------------------------------------------------------
|3       |Dave  |40                     |60                     |30                |10
----------------------------------------------------------------------------------------------------

-----------tTypes----------------
|id      |name
---------------------------------
|1       |Cleaning
---------------------------------
|2       |Kitchenwork
---------------------------------
|3       |Dogwalking
---------------------------------

============== Required Result ====================
|username   |sessioncount   |amount_to_pay
---------------------------------------------------
|Tom        |2              |120
---------------------------------------------------
|Joe        |1              |45
--------------------------------------------------- 
```

如果我的方法不太成功，则下面的查询是一个：

```
SELECT
tSessions.id,
tSessions.userid,
tSessions.typeid,
tSessions.session_length_min,
SUM(tUsers.rate_cleaning_30_min) AS rate_cleaning_30_min_sum,
SUM(tUsers.rate_cleaning_45_min) AS rate_cleaning_45_min_sum,
SUM(tUsers.rate_kitchenwork) AS rate_kitchenwork,
SUM(tUsers.rate_dogwalking) AS rate_dogwalking,
Count(*) AS sessioncount,
FROM
tSessions
INNER JOIN tUsers ON tSessions.userid = tUsers.id
WHERE WEEKOFYEAR(FROM_UNIXTIME(datetime))=WEEKOFYEAR(NOW())-1
GROUP BY
tSessions.userid,
tSessions.typeid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:51:48.090

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/1c62b/4)：

```
select tUsers.Name,
count(*) as sessioncount,
sum(
if(typeid=1,
          if(session_length_min<=30,rate_cleaning_30_min,
            rate_cleaning_45_min) 
          ,0)
+
  if(typeid=2,rate_kitchenwork,0)
+
 if(typeid=3,rate_dogwalking,0)
) as amount_to_pay

from
tSessions
left join tUsers on tSessions.userid=tUsers.id
group by tUsers.Name 
```

但是你的基础方案不好。如果您需要添加或删除任务类型怎么办。您应该将 tUsers 和 Task 的价格分开。只需添加新表 tRates 并修改 tTypes：

```
 -----------tTypes----------------
    |id      |name
    ---------------------------------
    |1       |Cleaning 30 min
    ---------------------------------
    |2       |Kitchenwork
    ---------------------------------
    |3       |Dogwalking
    ---------------------------------
    |4       |Cleaning 45 min
    ---------------------------------

-----------tSessions--------
|id      |userid  |typeid  |
----------------------------
|1       |1       |1       |
----------------------------
|2       |1       |4       |
----------------------------
|3       |1       |2       |
----------------------------
|4       |2       |2       |
----------------------------

-----------tUsers-----------------
|id      |name  |
-----------------
|1       |Tom   |
-----------------
|2       |Joe   |
-----------------
|3       |Dave  |
-----------------

and add tRates table with USER<->TASKS rates:

-----------tRates--------
|id      |userid  |typeid  | rate   |
---------------------------------------
|1       |1       |1       |30      |
--------------------------------------
|2       |1       |2       |40      |
--------------------------------------
|3       |1       |3       |20      |
--------------------------------------
|4       |1       |4       |50      |
--------------------------------------
|5       |2       |1       |35      |
--------------------------------------
|6       |2       |2       |45      |
--------------------------------------
|7       |2       |3       |20      |
--------------------------------------
|8       |2       |4       |60      |
--------------------------------------
|9       |3       |1       |40      |
--------------------------------------
|10      |3       |2       |30      |
--------------------------------------
|11      |3       |3       |10      |
--------------------------------------
|12      |3       |4       |60      |
-------------------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:56:32.317

我相信这里的问题是您的数据没有正确写入。
首先，您需要一个费率表：

```
创建表`trates`（
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `type_id` int(11) NOT NULL,
  `rate` int(11) 默认为空，
  主键（`id`），
  唯一键 `unique` (`user_id`,`type_id`)
)
```

用每人正确的费率填充表格：

```
INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Tom'),(SELECT id FROM ttypes WHERE NAME = 'Cleaning'),30);
 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Tom'),(SELECT id FROM ttypes WHERE NAME = 'Kitchenwork'),40);
 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Tom'),(SELECT id FROM ttypes WHERE NAME = 'Dogwalking'),20);

 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Joe'),(SELECT id FROM ttypes WHERE NAME = 'Cleaning'),35);
 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Joe'),(SELECT id FROM ttypes WHERE NAME = 'Kitchenwork'),45);
 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Joe'),(SELECT id FROM ttypes WHERE NAME = 'Dogwalking'),20);

 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Dave'),(SELECT id FROM ttypes WHERE NAME = 'Cleaning'),40);
 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Dave'),(SELECT id FROM ttypes WHERE NAME = 'Kitchenwork'),30);
 INSERT INTO trates VALUES (NULL,(SELECT id FROM tusers WHERE NAME = 'Dave'),(SELECT id FROM ttypes WHERE NAME = 'Dogwalking'),10);

```

接下来，这里的费率类型有问题，因为您指的是2个组合数据-工作类型+工作时间
清洗30分钟
清洗45分钟
是不是意味着只能在这两个中进行清洗？
其他任务可以是 30 和 45 分钟吗？
费率通常是每小时，这意味着如果费率是每小时 20 美元并且一个人工作 120 分钟，则应该是 TimeSpent/60*PayPerHourRate (120/60*20)

如果始终是 30 和 45 分钟，我建议添加对您的类型表的价值：

```
身份证名称
1 清洁30m
2 厨房工作
3 遛狗
4 清洁45m
```

从这一点来看，总结数据很容易:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:23:37.743

您的表格设计存在一些问题，即...如果您在“tTypes”表格中再添加一行，那么您必须在“tUsers”表格中添加一列。那不是一个好的设计。

我稍微修改了您的“tUsers”表并添加了一个名为“trates”的表

新的 tUses 表结构如下所示

![在此处输入图像描述](../Images/ba34356973c6dd54092caedbd882033f.png)

新的 'trates' 表会像

![在此处输入图像描述](../Images/4ba78e12978c68affa520fb6cefde79b.png)

下面给出了创建新“汇率”表的脚本

```
CREATE TABLE `trates` (
    `id` INT(10) NOT NULL AUTO_INCREMENT,
    `typeid` INT(11) NOT NULL DEFAULT '0',
    `userid` INT(11) NOT NULL DEFAULT '0',
    `rate` INT(11) NOT NULL DEFAULT '0',
    PRIMARY KEY (`id`)
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=13; 
```

下面给出了将数据插入“trats”表的脚本

```
INSERT INTO `trates` (`id`, `typeid`, `userid`, `rate`) VALUES
    (1, 1, 1, 30),
    (2, 2, 1, 50),
    (3, 3, 1, 40),
    (4, 4, 1, 20),
    (5, 1, 2, 35),
    (6, 2, 2, 60),
    (7, 3, 2, 45),
    (8, 4, 2, 20),
    (9, 1, 3, 40),
    (10, 2, 3, 60),
    (11, 3, 3, 30),
    (12, 3, 3, 10); 
```

**这种设计的优点是，如果您在“tTypes”表中再添加一种类型，那么您只需在“trates”表中插入一行，而不是在旧表中创建一列。**

我使用了相同的 'tSessions' 和 'tTypes' 表..

创建我的新表后，您可以使用以下查询来获得所需的结果

```
select usr.name, (select  count(distinct userid,typeid) 
 from tsessions tsess where
 tsess.userid=usr.id ) as 'sessioncount', sum(rate) as 'amount_to_pay'
 from tusers usr,trates rts,tsessions sess1 where rts.userid=usr.id
  and rts.typeid=sess1.typeid and sess1.userid=usr.id  
group by usr.name 
```

![在此处输入图像描述](../Images/6091c0f2f91ebe399de974fc99686737.png)

汤姆的 sessioncount 是 3，因为我在 'tTypes' 表中为 'cleaning_30_min' 和 'cleaning_45_min' 添加了单独的行。在这种情况下，我认为 3 是正确的会话数

# java - 获取一台linux机器的所有ipaddress

> ID：12364975
> 
> 赞同：0
> 
> 时间：2012-09-11T07:41:07.720
> 
> 标签：java, networking

如何使用 Java 获取 Linux 机器的所有 IP 地址？

我的设备有两个 IP 地址，但是在尝试使用以下方法获取所有 IP 地址时，它只会返回一个主 IP 地址。同一段代码适用于 Windows。

```
InetAddress myAddr = InetAddress.getLocalHost();
System.out.println("myaddr::::" + myAddr.getHostName());
InetAddress localAddress[] = InetAddress.getAllByName(myAddr.getHostName());
int len = localAddress.length;
for(int i = 0; i < len; i++)
{
  String localaddress = localAddress[i].getHostAddress().trim();
  System.out.println("localaddress::::" + localaddress);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:49:10.340

我相信你应该看看 Java 的 NetworkInterfaces 类。您将查询所有可用接口并枚举它们以获取分配给每个接口的详细信息（在您的情况下为 IP 地址）。

[您可以在此处](http://docs.oracle.com/javase/tutorial/networking/nifs/listing.html)找到示例和说明

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T16:31:45.013

试试这个，你可以得到

```
 InetAddress address = InetAddress.getLocalHost();
 NetworkInterface neti = NetworkInterface.getByInetAddress(address);
 byte macadd[] = neti.getHardwareAddress();
 System.out.println(macadd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T08:57:18.880

试试这个，

```
import java.io.*;
import java.net.*;
import java.util.*;
import static java.lang.System.out;

public class ListNets {

public static void main(String args[]) throws SocketException, UnknownHostException {
     System.out.println(System.getProperty("os.name"));
     Enumeration<NetworkInterface> nets = NetworkInterface.getNetworkInterfaces();
    for (NetworkInterface netint : Collections.list(nets))
        displayInterfaceInformation(netint);     
}

static void displayInterfaceInformation(NetworkInterface netint) throws SocketException {
    out.printf("Display name: %s\n", netint.getDisplayName());
    out.printf("Name: %s\n", netint.getName());
    Enumeration<InetAddress> inetAddresses = netint.getInetAddresses();
    for (InetAddress inetAddress : Collections.list(inetAddresses)) {

        out.printf("InetAddress: %s\n", inetAddress);
    }
    out.printf("\n");
 }
} 
```

# python - 如何从窗口中删除 Tkinter 小部件？

> ID：12364981
> 
> 赞同：61
> 
> 时间：2012-09-11T07:41:19.010
> 
> 标签：python, tkinter

我有一个`tkinter`想要动态更改的小部件列表。

如何从窗口中删除小部件？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-11T07:49:10.860

您可以调用[`pack_forget`](http://effbot.org/tkinterbook/pack.htm#Tkinter.Pack.pack_forget-method)以删除一个小部件（如果您使用[`pack`](http://effbot.org/tkinterbook/pack.htm)将其添加到窗口中）。

例子：

```
from tkinter import *

root = Tk()

b = Button(root, text="Delete me", command=lambda: b.pack_forget())
b.pack()

root.mainloop() 
```

如果您使用`pack_forget`，您可以稍后再次显示小部件再次调用`pack`。如果您想永久删除它，请调用`destroy`小部件（然后您将无法重新添加它）。

如果您使用该[`grid`](http://infohost.nmt.edu/tcc/help/pubs/tkinter/layout-mgt.html#grid)方法，您可以使用或[`grid_forget`](http://effbot.org/tkinterbook/grid.htm#Tkinter.Grid.grid_forget-method)隐藏*小*部件。`grid_remove`

 ** * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-07-06T17:28:31.863

您可以这样做的一种方法是从需要清除的框架中​​获取从属列表，并根据您的需要销毁或“隐藏”它们。要获得清晰的框架，您可以这样做：

```
from tkinter import *

root = Tk()

def clear():
    list = root.grid_slaves()
    for l in list:
        l.destroy()

Label(root,text='Hello World!').grid(row=0)
Button(root,text='Clear',command=clear).grid(row=1)

root.mainloop() 
```

您应该调用`grid_slaves()`,`pack_slaves()`或`slaves()`取决于您用于将小部件添加到框架的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-05T17:18:47.090

您只需使用该`destroy()`方法删除指定的小部件，如下所示：

```
lbl = tk.Label(....)

btn = tk.Button(....., command=lambda: lbl.destroy()) 
```

使用它，您可以完全销毁特定的小部件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-27T01:21:30.197

您说您有一个要动态更改的小部件列表。您想重用和重新配置现有的小部件，还是创建所有新的小部件并删除旧的小部件？它影响答案。

如果您想重用现有的小部件，只需重新配置它们。或者，如果你只是想暂时隐藏其中一些，使用相应的“忘记”方法来隐藏它们。如果你用调用映射它们，你会用（或只是）调用`pack()`隐藏。因此，隐藏网格小部件和放置的小部件。`pack_forget()``forget()``grid_forget()``place_forget()`

如果您不打算重复使用这些小部件，您可以通过直接`destroy()`调用来销毁它们，例如`widget.destroy()`，以释放资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-24T10:53:35.553

* * *

```
clear_btm=Button(master,text="Clear") #this button will delete the widgets 
clear_btm["command"] = lambda one = button1, two = text1, three = entry1: clear(one,two,three) #pass the widgets
clear_btm.pack()

def clear(*widgets):
    for widget in widgets:
        widget.destroy() #finally we are deleting the widgets. 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-22T11:24:27.237

您可以在小部件上使用忘记方法

```
from tkinter import *

root = Tk()

b = Button(root, text="Delete me", command=b.forget)
b.pack()

b['command'] = b.forget

root.mainloop() 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-10-26T16:08:37.780

今天我在python3中使用tkinter gui库学习了一些简单而好的点击事件处理，我想在这个线程中分享。

```
from tkinter import *

cnt = 0

def MsgClick(event):
    children = root.winfo_children()
    for child in children:
        # print("type of widget is : " + str(type(child)))
        if str(type(child)) == "<class 'tkinter.Message'>":
            # print("Here Message widget will destroy")
            child.destroy()
            return

def MsgMotion(event):
  print("Mouse position: (%s %s)" % (event.x, event.y))
  return

def ButtonClick(event):
    global cnt, msg
    cnt += 1
    msg = Message(root, text="you just clicked the button..." + str(cnt) + "...time...")
    msg.config(bg='lightgreen', font=('times', 24, 'italic'))
    msg.bind("<Button-1>", MsgClick)
    msg.bind("<Motion>", MsgMotion)
    msg.pack()
    #print(type(msg)) tkinter.Message

def ButtonDoubleClick(event):
    import sys; sys.exit()

root = Tk()

root.title("My First GUI App in Python")
root.minsize(width=300, height=300)
root.maxsize(width=400, height=350)
button = Button(
    root, text="Click Me!", width=40, height=3
)
button.pack()
button.bind("<Button-1>", ButtonClick)
button.bind("<Double-1>", ButtonDoubleClick)

root.mainloop() 
```

希望它会帮助某人...

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-06-06T11:37:27.430

我发现当小部件是函数的`grid_remove`一部分并且是另一个函数的一部分时，它不会删除标签。在这个例子中...

```
def somefunction(self):
    Label(self, text=" ").grid(row = 0, column = 0)
    self.text_ent = Entry(self)
    self.text_ent.grid(row = 1, column = 0)
def someotherfunction(self):
    somefunction.text_ent.grid_remove() 
```

...没有删除标签的有效方法。

我能找到的唯一解决方案是为标签命名并使其全局化：

```
def somefunction(self):
    global label
    label = Label(self, text=" ")
    label.grid(row = 0, column = 0)
    self.text_ent = Entry(self)
    self.text_ent.grid(row = 1, column = 0)
def someotherfunction(self):
    global label
    somefunction.text_ent.grid_remove()
    label.grid_remove() 
```

当我遇到这个问题时，涉及到一个类，一个函数在类中，一个不在，所以我不确定`global label`上面是否真的需要这些行。*

# java - Android 指南：多窗格布局

> ID：12364986
> 
> 赞同：5
> 
> 时间：2012-09-11T07:41:37.093
> 
> 标签：java, android

我有一个带有搜索选项的屏幕。单击一个选项具有显示对话框或重定向到另一个屏幕的效果，这就是为什么我不能使用“设置”应用程序方法：在右侧显示下一个屏幕。

在平板电脑上，我的屏幕如下所示：

![在此处输入图像描述](../Images/52c2a2ae93ee05ebd337a86081115900.png)

这不是很整洁。我想我们都读过 wooonderful 的 Android 设计指南，它只为最简单的问题提供解决方案，例如转弯：

![在此处输入图像描述](../Images/0bcb8809f0e39ce1508fdd5e3f59b4a9.png)

进入：

![在此处输入图像描述](../Images/fd35dd991c62b1e9bd63fa3e02d94b8f.png)

除了“在同一屏幕中添加列表视图和详细信息视图，哟”之外，我没有发现多窗格布局的指南。我应该将我的 ListView 拆分成更小的 ListView（ListView 中的每个部分）吗？是否有其他应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T08:05:25.263

在类似的问题中有很多链接：

[有多少活动与片段？](https://stackoverflow.com/questions/12363790/how-many-activities-vs-fragments/12364574)

这里还有一些：

*   [http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)

*   [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

*   [何时使用活动转换与动态片段的模式](https://stackoverflow.com/questions/7718242/patterns-when-to-use-activity-transition-vs-dynamic-fragments)

*   [Android - 我需要对片段与活动和视图进行一些说明](https://stackoverflow.com/questions/10478233/android-need-some-clarifications-of-fragments-vs-activities-and-views)

*   [Android中的活动或片段？](https://stackoverflow.com/questions/11794784/activities-or-fragments-in-android)

*   [多片段和活动交互设计](https://stackoverflow.com/questions/11701208/multiple-fragments-and-activities-interaction-design)

此外，是的，您当然可以将您的 ListViews 拆分为更小的 ListViews。片段也应该使这更容易维护。

您还可以查看`ActionBar`选项卡——这里也有很多信息：

[http://developer.android.com/training/design-navigation/descendant-lateral.html](http://developer.android.com/training/design-navigation/descendant-lateral.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:47:34.793

从技术上讲，我相信，最简单的方法是使用 Fragments。[Pro Android 4](https://rads.stackoverflow.com/amzn/click/com/1430239301)书中有一个布局非常相似的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T07:52:51.037

我相信在这种情况下你会发现 Fragment 类很方便。更多信息在这里：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# android - android谷歌地图视图上两个地理点之间的路径

> ID：12364989
> 
> 赞同：0
> 
> 时间：2012-09-11T07:41:53.753
> 
> 标签：android, google-maps

我正在尝试在我的 android 应用程序上获取两个地理点之间的路径，我不需要任何行车路线 - 只是路径。我已经发现自己是在两个地理点之间画直线（http://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview）。是否有可能获得实际路径？我的意思是我可以真正走的路径，道路路径 - 不仅仅是两个地理点之间的直线而不解析谷歌地图的网络 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T05:19:17.297

我认为最好的解决方案是调用 android 内部地图活动来显示两个地理点之间的路线。请参考以下代码：

```
String uri = "http://maps.google.com/maps?saddr=" + currentLatitude+","+currentLongitude+"&daddr="+fixedLatitude+","+fixedLongitude;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

它被称为内置地图活动，并在当前和固定之间绘制路线`latitude`路径`longitude`。

# sql - 在 sql server 2008 中将数据类型 varchar 转换为数字时出错

> ID：12364992
> 
> 赞同：2
> 
> 时间：2012-09-11T07:41:59.807
> 
> 标签：sql, sql-server-2008

我在 Sql server 中运行一个查询并收到错误“将数据类型 varchar 转换为数字时出错”。请在下面找到我正在查询数据库的查询。

```
SELECT   Limit = (Case isnull(PR009000.COVERAGE ,null)
     When isnull('UM',null) then        
        (Case
            When 'SPLIT' = 'CSL' then  ( select UMLimitTypeDes from CASeleUMLimitType where UMCoverageTypeCd =( 'SPLIT' )  
                 and UMLimitTypeCd=(Select top 1 USAMNT02 From PR006000 Where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA' )
                 and StateCd= (select top 1 RATESTE  from PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1) )
            When 'SPLIT' = 'SL' then (select UMLimitTypeDes from CASeleUMLimitType where UMCoverageTypeCd=( 'SPLIT' )  
                 and UMLimitTypeCd=(Select top 1 USAMNT02 From PR006000 Where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
                 and StateCd=(select top 1 RATESTE  from PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1))
            When 'SPLIT' = 'BI' then (select UMLimitTypeDes   from CASeleUMLimitType where UMCoverageTypeCd=( 'SPLIT' )  
                 and UMLimitTypeCd =cast((Select top 1 USAMNT03 From PR006000 Where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA' ) AS varchar(100))
                 and StateCd =cast((select top 1 RATESTE  from PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1) AS varchar(100)))
            When 'SPLIT' = 'N' or 'SPLIT' = 'SPLIT' then ( select top 1 isnull(UMLimitTypeDes,null) from CASeleUMLimitType where UMCoverageTypeCd=( 'SPLIT' )  
                 and UMLimitTypeCd=(Select top 1 isnull(USAMNT03,null) From PR006000 Where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0' and MCO = '05' and LOC= '00' and INSLINE = 'CA' )
                 and StateCd=(select  top 1 isnull(RATESTE,null)  from PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1) )
            When 'SPLIT' = 'PD' then (

                select isnull(UMLimitTypeDes,null) from CASeleUMLimitType where UMCoverageTypeCd=( 'SPLIT' )  
                 and UMLimitTypeCd=(Select top 1 isnull(USAMNT04,null) From PR006000 Where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
                 and StateCd=(select top 1 isnull(RATESTE,null)  from PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1))  

        End )
     When isnull('UN',null) then        
        (Case
            When 'SPLIT' = 'CSL' then
                (Select isnull(USAMNT02,null) From PR009000 Where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and coverage='UN')
            When 'SPLIT' = 'BI' then
                (Select isnull(USAMNT03,null) From PR009000 Where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and INSLINE = 'CA' and coverage='UN')
            When 'SPLIT' = 'N' then
                (Select isnull(USAMNT03,null) From PR009000 Where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and INSLINE = 'CA' and coverage='UN')    

        End )

 When 'DOC-MP' then
     (Select USCDE14 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
 When 'DOC-UM' then
     (Select USIND06 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
 When 'DOC-UN' then
     (Select USIND05 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
 When 'DOCUMP' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='DOCUMP')
 When 'DOCUNP' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='DOCUNP')
 When 'DTHBEN' then
     (Select USAMNT03 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='DTHBEN')
 When 'HIRE' then
     (Select USAMNT05 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
 When 'HIREUM' then
     (Select USIND09 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
 When 'HIREUN' then
     (Select USIND12 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
     When 'LIAB' then
     (Select USAMNT05 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )
     When 'MEDPAY' then
     (Select USCDE02 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )         
     When 'NONUM' then
     (Select USCDE08 From PR006000 where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA'  )         
     When 'SOUND' then
     (Select USAMNT03 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='SOUND')         
     When 'TRLCMP' then
     (Select USAMNT03 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='TRLCMP')         
     When 'TRLCOL' then
     (Select USAMNT03 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='TRLCOL')         
     When 'TRLSP' then
     (Select USAMNT03 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='TRLSP')         
     When 'UMPD' then
     (Select USAMNT01 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='UMPD')         
     When 'REG-UM' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='REG-UM')     
     When 'REG-UN' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='REG-UN')     
     When 'REG-L' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='REG-L')     
     When 'REG-MP' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='REG-MP')     
     When 'REG-PIP' then
     (Select USAMNT04 From PR009000 where SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 and insline = 'CA' and coverage='REG-PIP')          

    Else
    ( Select '-1' )
    End )
     FROM PR009000 WHERE SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 
```

这里的 PR009000 是有这些数据的表。

```
select *  FROM PR009000 WHERE SYMBOL='CPP' AND POLNUM=0001148 AND MODULE=00 AND LOC=00 AND MCO=05 AND PCO=05 AND UNTRECNUM=1 
```

这是查询中使用的另一个表

```
Select * From PR006000 Where Symbol= 'CPP' and POLNUM = '0001148' and MODULE = '0 ' and MCO = '05' and LOC= '00' and INSLINE = 'CA' 
```

请让我知道问题出在哪里以及应该采取什么解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T07:50:39.063

我们不知道您的表定义，我不会尝试解析您的查询。但问题几乎可以肯定是从概念上讲，你有类似的东西：

```
CASE
   WHEN Condition 1 THEN <decimal value>
   WHEN Condition 2 THEN <string value>
END 
```

问题是一个`CASE` *表达式*必须有一个单一的、定义良好的数据类型的结果。每个`THEN`子句都必须返回这个单一类型的值，或者转换为它。

当您有多种类型时，SQL Server 将使用各种优先规则来选择类型。在这种情况下，它选择了数字类型，并且无法将字符串转换为数字。

解决这个问题的通常方法是：

```
CASE
   WHEN Condition 1 THEN CONVERT(varchar(200),<decimal value>)
   WHEN Condition 2 THEN <string value>
END 
```

所以现在 SQL Server 会将所有内容都保存为字符串。

# yii - 一个模块可以有自己的配置文件吗？

> ID：12364998
> 
> 赞同：5
> 
> 时间：2012-09-11T07:42:17.627
> 
> 标签：yii

我只是想知道我们是否可以在模块中添加一个扩展 main.conf 的配置文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:16:48.300

它确实，已经。在 CWebModule 中通过 $this->setComponents 如下：

```
<?php

    class AccountModule extends CWebModule
    {
        public function init()
        {
            // this method is called when the module is being created
            // you may place code here to customize the module or the application

            $this->setComponents(array(
                'errorHandler' => array(
                        'errorAction' => 'module/default/error'),
                'defaultController' => 'default',
                'user' => array(
                        'class' => 'ModuleWebUser',
                        'allowAutoLogin'=>true,
                        'loginUrl' => Yii::app()->createUrl('module/default/login'),
                )
            ));

            // import the module-level models and components or any other components..
            $this->setImport(array(
                'module.models.*',
                'module.components.*',
            ));
        }
} ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:21:23.563

这样做的方法是在主配置数组的 params 项中为您的模块/等创建一个数组项。

看这个论坛帖子：[http ://www.yiiframework.com/forum/index.php/topic/24617-custom-configuration/](http://www.yiiframework.com/forum/index.php/topic/24617-custom-configuration/)

如果您希望您的配置位于单独的文件中，您可以将其与配置文件中的主配置数组合并！像这样的东西应该工作：

```
include("custom_config.php"); // define $array_from_custom_conf inside this file
return array_merge(
   array(/*main_config_array from main.php*/),
   $array_from_custom_conf
); 
```

如果您将自定义配置数组作为第二个参数，它还将覆盖主配置中的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T08:58:17.650

我从来没有这样做过，但是：

*   当前的解决方案在[wiki 文章](http://www.yiiframework.com/wiki/52/encapsulate-db-and-module-configurations/)中提供。
*   关于这个“功能请求”，在 Yii 的论坛上已经提出请求也就不足为奇了。见[这里](http://www.yiiframework.com/forum/index.php/topic/21854-modules/)和[这里](http://www.yiiframework.com/forum/index.php/topic/34026-configurationdi-container/)。

# sql - Oracle 获取最近一小时内更新的记录

> ID：12364999
> 
> 赞同：20
> 
> 时间：2012-09-11T07:42:20.460
> 
> 标签：sql, oracle, date-arithmetic

以下是我在过去一小时内运行以获取更新的查询。

```
select count(*) 
from my_table 
where last_updated_date between to_date(to_char(sysdate,'YYYY-MM-DD HH24'))-1/24 and to_date(to_char(sysdate,'YYYY-MM-DD HH24')); 
```

我们的数据库是 oracle，它失败了

```
ORA-01861: literal does not match format string
01861\. 00000 -  "literal does not match format string"
*Cause:    Literals in the input must be the same length as literals in
           the format string (with the exception of leading whitespace).  If the
           "FX" modifier has been toggled on, the literal must match exactly,
           with no extra whitespace.
*Action:   Correct the format string to match the literal. 
```

这次失败的原因是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-11T07:45:12.227

只需从 sysdate 中减去 1/24 即可得到 1 小时前的时间

```
select count(*) from my_table where last_updated_date >= (sysdate-1/24) 
```