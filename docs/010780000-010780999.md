# StackOverflow 问答 10780000-10780999

# java - Android SQLite Delete 没有改变任何东西

> ID：10780000
> 
> 赞同：2
> 
> 时间：2012-05-28T06:04:29.013
> 
> 标签：java, android, sqlite

我的 SQL 类中有以下方法：

```
public void deleteEntry(int idnum) {
     dbSQL.delete(DATABASE_TABLE, KEY_ROWID + " = 0", null);
} 
```

我通常给它一个，`idnum`但出于测试目的，我只是把一个 0 放在那里。语法明智，有什么理由为什么这不起作用？我什么都试过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:17:47.370

假设这`KEY_ROWID`是一个自动递增的主键，您输入的第一条记录将具有 value `1`，而不是`0`。

话虽如此，您的`delete`方法不起作用的原因很可能是因为没有 value 记录`0`。

* * *

## 编辑＃1：

如果我是你，我会卸载并重新安装你的应用程序并从头开始。要么，要么`adb`用来分析你的 SQLite 数据库的内容（使用模拟器，如果你没有根设备）。您可以在磁盘上`/data/data/[package name]/databases/database_name.db`（或类似的位置）找到数据库文件。

找出为什么事情在这一点上不起作用的最好方法是分析数据库的内容。否则，您将只是猜测和检查，直到某些东西似乎起作用……即使那样，您也可能无法确定您的实现是否 100% 正确。

* * *

## 编辑#2：

作为使用模拟器和/或根设备分析数据库文件的替代方法，您可以对数据库中的**所有**数据执行查询，然后使用类中[`dumpCursor`](http://tinyurl.com/7zwkqc3)提供的方法[`DatabaseUtils`](http://developer.android.com/reference/android/database/DatabaseUtils.html)打印 to 的`Cursor`内容`System.out`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T06:11:29.360

你应该使用这个版本，

```
public void deleteEntry(int idnum) {
     dbSQL.delete(DATABASE_TABLE, KEY_ROWID + " = ?", new String[] {"0"});
} 
```

使用`0`它可能无法正常工作，因为如果该列是`INTEGER`并且`AUTOINCREMENT`它将开始以更大的值计数，`0`因此没有`0`要删除的 KEY_ROWID 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:07:08.303

改成，

```
public void deleteEntry(int idnum) {
      dbSQL.delete(DATABASE_TABLE, KEY_ROWID+"=?", new Integer[]{idnum});
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T06:13:41.123

如果您的 KEY_ROWID 列是字符串，则必须使用

```
public void deleteEntry(int idnum) {
     dbSQL.delete(DATABASE_TABLE, KEY_ROWID + " = '0'", null);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:24:38.933

感谢大家的帮助，但我只是使用我构建的方法获得了一些运气，该方法获取 id 并返回与该条目关联的名称，并且它现在成功删除了相应的项目。

# eclipse - 在 Eclipse 上构建 Lucene

> ID：10780007
> 
> 赞同：0
> 
> 时间：2012-05-28T06:05:45.340
> 
> 标签：eclipse, lucene

有没有人在 Eclipse 中成功构建了 Lucene？我正在尝试构建 Lucene3.6 并在 Eclipse 中出现一些黄色错误，然后我可以运行演示，但我无法运行 Junit 测试。任何人都可以帮助我吗？我对 Lucene 和 Eclipse 都是全新的......非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:38:53.490

我自己解决了这个问题。基本上需要在 Lucene 3.6 中链接测试框架工作

# ruby-on-rails - Rails 中的搜索功能

> ID：10780008
> 
> 赞同：0
> 
> 时间：2012-05-28T06:05:54.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, controller

**我有工作安置模型，我想实现应该是关键字搜索的搜索功能，即我的意思是即使您在搜索中键入任何关键字，并且如果它存在于工作安置表的数据库中，它应该显示结果。**

目前我正在使用以下代码，它只匹配 1 个字段，即公司名称和类别，如 params[:category]。以下是我的 jobplacementcontroller/index 操作的代码

```
if params[:search]
      @search_condition = "%" + params[:search] + "%"
      @searchresult = Jobplacement.where(['name LIKE ? and category = ?', @search_condition ,params[:category]])
else 
     @searchresult = ""
end 
```

**同样在上面的代码中，虽然我已经给出了类别的条件，但它没有正确执行。当我进行搜索时，它给出的结果与名称字段匹配，但它没有评估 params[:category] ​​条件。它显示所有记录，即使它们不在参数[：类别]。**

* * *

以下是我的就业模型中的字段：

```
t.string   "name"
t.string   "designation"
t.string   "qualification"
t.integer  "years_of_exp"
t.string   "location"
t.integer  "noofpost"
t.string   "jobprofile"
t.string   "salaryoffered"
t.string   "contactperson"
t.string   "employmenttype"
t.text     "address"
t.string   "city"
t.string   "state"
t.string   "country"
t.integer  "contactno"
t.string   "website"
t.text     "aboutcompany" 
```

**因此，当我在搜索中输入任何关键字时，如果它与任何字段的数据匹配，它应该返回该数据。我该怎么做...我该如何解决这个 params[:category] ​​错误以及我如何进行匹配的关键字搜索就业模型数据库中存在的任何记录，而不仅仅是 1 个字段。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:13:00.257

查看[Thinking Sphinx](http://freelancing-god.github.com/ts/en/quickstart.html)，它可以解决您的问题，并具有更多功能，例如子字符串搜索、通配符支持等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:25:15.980

使用 squeel gem [http://erniemiller.org/projects/squeel/](http://erniemiller.org/projects/squeel/) 你可以简单地做：

```
terms = params[:search].split 
Jobplacement.where {name.eq(params[:category]) & (name.like_any(terms) | designation.like_any(terms) | qualification.like_any(terms) <...>) } 
```

# android - 对 Android 4.0 上的 gethostbyname 有任何想法吗？

> ID：10780010
> 
> 赞同：0
> 
> 时间：2012-05-28T06:06:09.713
> 
> 标签：android, c++, dns, wifi, gethostbyname

当用户切换 wifi 网络时，我们的 apk 将自动连接到服务器。它将调用 gethostbyname 来首先找到服务器的 ip，然后连接到该 ip。所有这些代码都是用 C++ 编写的。一切都在 Android 4.0 之前运行。但是在Android 4.0中，gethostbyname在切换wifi网络后返回服务器的原始ip。所以apk的连接超时。唯一可能的解决方案是重新启动 apk。但是 java 代码 InetAddress.getAllByName 工作正常。那么 Android 4.0 在 C 中的 gethostbyname 有什么问题呢？

# java - 关于数据库的条形图

> ID：10780011
> 
> 赞同：0
> 
> 时间：2012-05-28T06:06:17.533
> 
> 标签：java, mysql, jsp, jfreechart

这是我的表（在 mysql 中）：

```
mysql> select device from user_management;
+--------+
| device |
+--------+
| APPLE  |
| HTC    |
| HTC    |
| NOKIA  |
| APPLE  |
| APPLE  |
+--------+
6 rows in set (0.00 sec) 
```

我的代码是

```
<%
String query1 = "select device,count(device) from user_management where  device='"+APPLE+"'";
JDBCCategoryDataset dataset = new JDBCCategoryDataset("jdbc:mysql://localhost:8080/apps","com.mysql.jdbc.Driver","root","root");
dataset.executeQuery(query1);
System.out.println("query1");
JFreeChart chart = ChartFactory.createBarChart3D("Device  Statictics","Device","Count",dataset,PlotOrientation.VERTICAL,true,true,false);
try
{
ChartUtilities.saveChartAsJPEG(new File("D:/dvc.png"),chart,500,400);
}
catch(IOException e)
{
System.out.println(".....there is a problem in your chart. ");
}
%> 
```

并且基于设备名称（APPLE，NOKIA，SAMSUNG），我想创建一个条形图，显示“设备编号 VS 设备”。我想在 jsp 页面中显示这个。

您的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:50:01.710

`GROUP BY`在您的查询中使用。

```
SELECT device, count(device) FROM user_management GROUP BY device; 
```

使用查询从 构建合适的 JDBC 数据集`org.jfree.data.jdbc`，并使用该数据集创建图表。

# html - HTML5 本地存储和对浏览器的影响/加载

> ID：10780012
> 
> 赞同：3
> 
> 时间：2012-05-28T06:06:21.090
> 
> 标签：html, browser, local-storage

我对 WebSQL、WebStorage/LocalStorage 和 indexedDB 等 HTML5 存储技术以及在较小程度上的 appCache 有疑问。

考虑到 chrome（我的默认浏览器）的情况，这些商店都维护在 chrome 浏览器自己的目录中。它们会影响浏览器的启动时间吗？一位同事说，当存储大量数据时，浏览器速度变慢或行为缓慢。

找不到有关这些技术如何影响浏览器工作的参考资料，所以如果有任何堆栈者可以指导我，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:09:32.097

注意：WebSQL API 已经失效（它基于 sqlite 而不是通用 API，因此被 Mozilla 团队判断为不可取，将使用[索引数据库 API](http://en.wikipedia.org/wiki/Indexed_Database_API)，但您可能应该等待它得到更多支持） .

LocalStorage 很好，我在所有 Web 应用程序中都使用它，没有问题，也没有可测量的启动时间。但保留它以用于参数、偏好等，因为唯一可靠的存储始终是服务器端。由于多种原因（例如，用户使用其他浏览器或计算机），本地存储可能会被删除、丢失、修改、不可读。在我看来，大型本地存储对用户来说是一种负担，因此不是很正确（这可能是这个大小受到限制的原因）。

顺便说一句，合理的本地存储没有理由以可衡量的方式减慢浏览器的启动速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:17:03.577

我同意dystroy；通常，如果方法正确，本地存储是无害的。另一方面，非常不鼓励在浏览器中存储**大量数据。**它不会降低浏览器的整体性能，但会降低使用它的网络应用程序的速度（据我所知，Chrome 在调用“所有者应用程序”时会动态获取本地存储值）。

# c++ - 如何获取选定的树视图项目文本

> ID：10780015
> 
> 赞同：3
> 
> 时间：2012-05-28T06:06:50.227
> 
> 标签：c++, winapi

我正在使用 WINAPI Treeview 来显示一些数据。当我选择一个电视项目时，我必须获取选定的 TV_ITEM 文本。我正在使用以下代码

```
case WM_NOTIFY:
 switch( ((LPNMHDR)lParam)->code)
 {
 case TVN_SELCHANGED:
  {
         NMTREEVIEW* pnmtv = (LPNMTREEVIEW)lParam;
         LPTSTR str = (pnmtv->itemNew.pszText);
         MessageBox( hWnd, str,"load",MB_OK );
  }
  break;                        
} 
```

我无法得到正确的值，我得到了某种垃圾值。MessageBox 显示某种特殊字符（那些不在键盘上）

任何人都可以帮助我，如何获取所选项目的文本。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:21:04.807

您是否阅读过有关 TVN_SELCHANGED 的文档？它从未提及 pszText。你需要

```
TVITEM item;
item.hItem = pnmtv->itemNew.hItem;
item.mask = TVIF_TEXT;
item.pszText = // allocate buffer
item.cchTextMax = // length of buffer
::SendMessage(hWnd, TVM_GETITEM, 0, (LPARAM)&item); 
```

然后你会得到 item.pszText

PS 如果您使用 Windows API，您多久看到一次 Windows 为您分配和管理字符串？它只是不会发生。

# java - 选择列表中的项目后在面板上设置标签

> ID：10780024
> 
> 赞同：2
> 
> 时间：2012-05-28T06:07:27.900
> 
> 标签：java, swing, jlabel, layout-manager

为什么标签不显示？

```
package javaapplication4;

import java.awt.Color;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.GridBagLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JButton;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class settingPanel extends javax.swing.JPanel {
    static JPanel con = new JPanel();
    static JFrame frame = new JFrame();
    JLabel jLabel1 = new JLabel();
    public JEditorPane htmlvi = new JEditorPane();

    /** Creates new form settingPanel */
    public settingPanel() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jList1 = new javax.swing.JList();

        jList1.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4",
                    "Item 5" };

            public int getSize() {
                return strings.length;
            }

            public Object getElementAt(int i) {
                return strings[i];
            }
        });
        jList1.addListSelectionListener(new javax.swing.event.ListSelectionListener() {
            public void valueChanged(javax.swing.event.ListSelectionEvent evt) {
                jList1ValueChanged(evt);
            }
        });
        jScrollPane1.setViewportView(jList1);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(
                jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(jPanel1Layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addGroup(
                jPanel1Layout
                        .createSequentialGroup()
                        .addComponent(jScrollPane1,
                                javax.swing.GroupLayout.PREFERRED_SIZE, 70,
                                javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap(325, Short.MAX_VALUE)));
        jPanel1Layout.setVerticalGroup(jPanel1Layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addComponent(
                jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 272,
                Short.MAX_VALUE));

        jTabbedPane1.addTab("tab1", jPanel1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addComponent(
                jTabbedPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 400,
                Short.MAX_VALUE));
        layout.setVerticalGroup(layout.createParallelGroup(
                javax.swing.GroupLayout.Alignment.LEADING).addComponent(
                jTabbedPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 300,
                Short.MAX_VALUE));
    }// </editor-fold>

    private void addpanel() {
        JPanel pnl = new JPanel();
        pnl.setOpaque(false);
        pnl.setLayout(new GridBagLayout());
        pnl.add(new JButton());
        pnl.setVisible(true);
        jPanel1.setLocation(10, 30);
        jPanel1.add(pnl);
    }

    private void jList1ValueChanged(javax.swing.event.ListSelectionEvent evt) {

        JLabel write = new JLabel();

        // if(evt.getValueIsAdjusting()){
        String read = "<html><h2>" + jList1.getSelectedValue().toString()
                + "<UL>USB";
        addpanel();

        jPanel1.add(write);

    }

    // Variables declaration - do not modify
    private javax.swing.JList jList1;
    public static javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTabbedPane jTabbedPane1;

    // End of variables declaration
    public static void main(String args[]) {

        frame.add(new settingPanel());
        // jPanel2.setLayout(new GridBagLayout());
        // jPanel2.add(new JButton());
        // jPanel2.setVisible(false);
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(3);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:36:34.570

您将 JLabel 添加到 jPanel1，它使用 GroupLayout 来显示其组件。GroupLayout 需要知道每个组件必须放置在其垂直和水平组中的哪个位置，并且它不知道将新标签放在哪里，因为您没有告诉。

我非常怀疑您的最终目标是在每次选择更改时向您的 GUI 添加一个新标签。您可能应该在 GUI 初始化时添加一个带有默认文本的唯一标签，并在选择更改时更改此标签的文本。

# twitter-bootstrap - Bootstrap：将按钮组添加到导航栏？

> ID：10780032
> 
> 赞同：11
> 
> 时间：2012-05-28T06:08:15.297
> 
> 标签：twitter-bootstrap

`btn-group`添加to `navbar`in是否容易`bootstrap`？`btn`很好，但当`btn-group/div`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-28T05:14:39.820

在 Bootstrap3 中，您可以`navbar-btn`向按钮添加一个类以使它们垂直对齐，即使在`btn-group`.

[http://getbootstrap.com/components/#navbar-buttons](http://getbootstrap.com/components/#navbar-buttons)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T05:18:06.723

将按钮组包含在表单中并使用`form-inline`该类。

这是一个[例子](http://jsfiddle.net/gptZg/)

# android - Android背景没有填满屏幕

> ID：10780038
> 
> 赞同：0
> 
> 时间：2012-05-28T06:09:13.500
> 
> 标签：android, background-image

我有一个带有 tabHost 的应用程序；在其中一个选项卡上，我有一张背景图片，但图片没有填满整个屏幕：

![bgnd图像](../Images/0c32649d9afbb4dcec9133fb1afbab9c.png)

我的图像是 480 x 800 像素

我的 home.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/home_bgnd">
</LinearLayout> 
```

如何修复此代码以使图像覆盖整个屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:13:20.503

在您的 XML 中使用 ImageView 并设置`android:scaleType="fitXY"`为使其延伸到其父布局。作为父布局，我建议你使用`FrameLayout`这样图像可以作为它的背景。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/your_source"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">

        <!-- your other views here -->

    </LinearLayout>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:14:49.423

在这种情况下，您似乎正在使用 tabhost，您必须查看您拥有 tabhost 的 xml 布局。

检查包含视图中的填充`android:id="@android:id/tabcontent"`并从那里删除该填充或边距。

# nstimer - 如何使用 Iphone sdk 中的音频队列播放 .wav 文件

> ID：10780045
> 
> 赞同：0
> 
> 时间：2012-05-28T06:09:33.290
> 
> 标签：nstimer, core-audio, audioqueue, audio-player

我是 ios 应用程序开发的新手，现在我正在做一个需要准确计时的音乐项目。所以我决定使用音频队列 API 来播放我的声音文件，它存在于 .wav 格式的主包中，它我已经为此苦苦挣扎了 2 周，任何人都可以帮我解决这个问题。

如果有人为此向我发送了一些示例代码，那么这对我来说将是一个很大的帮助。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:10:13.510

Apple 的 SpeakHere 示例应用程序展示了如何使用 Audio Queue API 进行录音和播放。

# android - 如何在网格视图中对元素进行排序

> ID：10780050
> 
> 赞同：1
> 
> 时间：2012-05-28T06:10:06.743
> 
> 标签：android, xml, gridview

我有一个网格视图适配器，所有内容都在这段代码中：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View v = convertView; 
    CheckBox check = null;
    ImageView pic = null;

    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
    LayoutInflater vi = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.check_box_and_imageview, null);
     } 

    pic = (ImageView)v.findViewById(R.id.imageView);
    check = (CheckBox) v.findViewById(R.id.checkBox);
    check.setTag(position);

    ImageLoader loader = new ImageLoader(mContext);

    //this loads image from given url
    loader.DisplayImage(url[position], pic);
    return v;

} 
```

在这里，我创建了一个带有复选框和图像视图的视图。存在问题，因为图像视图的大小不同，并且 gridview 通过大小复选框和图像视图进行对齐。但我想通过复选框订购元素。

为了更好地解释我想要做的将显示这张图片：

![在此处输入图像描述](../Images/092b85c67a285d6e77f8d89ea4d9a60e.png)

这是我想做的。我的图像视图大小不一样。现在我将说明它的外观：

![在此处输入图像描述](../Images/d7c62387a6a20414534e5adbb27c29de.png)

所以这不适合我。我想对齐不是所有的复选框和图像视图。但只是复选框将位于复选框下方。

那么这不可能与网格视图有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:21:11.717

*   检查 convertView 是否为空：
*   如果它是空的，是时候为这个 GridView 的元素膨胀一个新的视图了。您还可以使用持有者模式来缓存查找组成视图（而不是每次都使用 findViewById 搜索）（您使用 setTag 元素来膨胀视图，但它是来自节点数据元素的一条数据？！？你打算怎么做跟它有什么关系？！？）

# php - 如何迭代 PHP $_FILES 数组？

> ID：10780055
> 
> 赞同：4
> 
> 时间：2012-05-28T06:10:54.343
> 
> 标签：php, file-upload

这可能是个愚蠢的问题，但是 PHP 数组 $_FILES 的格式非常奇怪，我以前从未使用过。有人可以告诉我如何以理智的方式迭代这个数组吗？我曾经迭代对象或对象之类的数组，但这种格式对我来说很奇怪。有没有办法像对象数组一样迭代这个数组？

```
( [attachments] => 
    Array ( 
        [name] => Array ( 
            [0] => test1.png 
            [1] => test2.png 
        ) 
        [type] => Array ( 
            [0] => image/png 
            [1] => image/png 
        ) 
        [tmp_name] => Array ( 
            [0] => /tmp/phpmFkEUe 
            [1] => /tmp/phpbLtZRw 
        )
        [error] => Array ( 
            [0] => 0 
            [1] => 0 
        ) 
        [size] => Array ( 
            [0] => 9855 
            [1] => 3002 
        ) 
    ) 
) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T06:15:47.193

哇，这确实很奇怪，你`<input type="file" name="attachments[]" />`在标记中使用吗？如果你有能力改变那些使用 unique `name=`，你就不会有那种奇怪的格式......

要直接回答您的问题，请尝试：

```
$len = count($_FILES['attachments']['name']);

for($i = 0; $i < $len; $i++) {
   $fileSize = $_FILES['attachments']['size'][$i];
   // change size to whatever key you need - error, tmp_name etc
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T06:31:55.300

我一直认为这种结构是无稽之谈。因此，每当我使用多输入文件字段时，我都会这样做：

```
$files = array_map('RemapFilesArray'
    (array) $_FILES['attachments']['name'],
    (array) $_FILES['attachments']['type'],
    (array) $_FILES['attachments']['tmp_name'],
    (array) $_FILES['attachments']['error'],
    (array) $_FILES['attachments']['size']
);

function RemapFilesArray($name, $type, $tmp_name, $error, $size)
{
    return array(
        'name' => $name,
        'type' => $type,
        'tmp_name' => $tmp_name,
        'error' => $error,
        'size' => $size,
    );
} 
```

然后，您将拥有一个可以迭代的数组，其中的每个项目都将是一个关联数组，其结构与您通过普通的单个文件输入获得的结构相同。所以，如果你已经有一些处理这些的函数，你可以将这些项目中的每一个传递给它，它不需要任何修改。

顺便说一句，将所有输入转换为数组的原因是，即使您忘记将`[]`文件输入的名称放在文件名上，它也能正常工作（当然，在这种情况下您只会得到一个文件，但这比破坏要好）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T06:15:48.667

最简单的方法是：

```
$files = $_FILES['attachments']['name'];
$count = 0;
foreach ($files as $file) {
     $file_name = $file;
     $file_type = $_FILES['attachments']['type'][$count];
     $file_size = $_FILES['attachments']['size'][$count];
     ...
     ...

     ++$count;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-28T06:16:01.097

这是迭代 $_FILES 的唯一方法。

```
foreach ($_FILES['attachments']['tmp_name'] as $k => $v) {
  echo $_FILES['attachments']['name'][$k];
  echo $_FILES['attachments']['type'][$k];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T06:19:29.753

这边走？

```
foreach((array)$_FILES["attachments"] as $val) {
   foreach((array)$val["name"] as $name) {
      // $name = "test1.png",...
   }
   foreach((array)$val["type"] as $type) {
      // $type = "imagepng",...
   }   
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-08T14:48:10.847

我在做多部分表格时遇到了同样的问题。基本上我需要先用'isset'检查是否有任何文件上传，然后检查每个文件并执行所有必要的条件。

最快的方法是选择一个数组索引元素，如 ['tmp_name'] 并使用 foreach 循环：

```
if(isset($_FILES['attachments']) {
   foreach($_FILES['attachments']['tmp_name'] as $key => $value) {
      //do stuff you need/like
   }
} 
```

使用数组进行多个文件上传的主要原因是最终它更容易处理和迭代。如果您使用像附件 1、附件 2 这样的唯一名称，您会在更复杂的情况下遇到许多问题。例如，我有不同附件类别的其他上传字段。

`$_FILES`当然，如果您发现整个数组有问题，您可以使用一种方法，如前所述，将数组修复为更巧妙的形式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-28T06:22:47.303

我试过小示范，看看

```
<html>
<body>
<form enctype="multipart/form-data" method="post">
<input type="file" name="file[]" />
<input type="file" name="file[]" />

<input type="submit" name="submit" />
</form>
<body>
</html>
<?php
if($_SERVER['REQUEST_METHOD']=='POST'){
    foreach ($_FILES as $k=>$v){
   if(is_array($v)){
       foreach ($v as $sk=>$sv){ 
                $arr[$sk][$k]=$sv;
        }
       }
    }
  echo "<pre>";
  print_r($arr);
 }
?> 
```

输出

```
Array
(
    [name] => Array
        (
            [file] => Array
                (
                    [0] => 4_Milestone text (1).doc
                    [1] => 2x5 ko condolence ad.jpg
                )

        )

    [type] => Array
        (
            [file] => Array
                (
                    [0] => application/msword
                    [1] => image/jpeg
                )

        )

    [tmp_name] => Array
        (
            [file] => Array
                (
                    [0] => C:\xampp\tmp\php15EF.tmp
                    [1] => C:\xampp\tmp\php163E.tmp
                )

        )

    [error] => Array
        (
            [file] => Array
                (
                    [0] => 0
                    [1] => 0
                )

        )

    [size] => Array
        (
            [file] => Array
                (
                    [0] => 20480
                    [1] => 56642
                )

        )

) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-28T06:33:49.833

在这里你去：下面的函数将帮助您简化文件上传，您将能够处理它类似于文件的单个上传而不是多个文件上传。

**HTML: (form.html)**

```
<form method="post" action="post.php" enctype="multipart/form-data">
<input type="file" name="attachment[]" />
<input type="file" name="attachment[]" />
<input type="file" name="attachment[]" />
<input type="submit" value="Upload" /> 
```

**PHP: (post.php)**

```
<?php
function simplifyMultiFileArray($files = array())
{
    $sFiles = array();
    if(is_array($files) && count($files) > 0)
    {
        foreach($files as $key => $file)
        {
            foreach($file as $index => $attr)
            {
                $sFiles[$index][$key] = $attr;
            }
        }
    }
    return $sFiles;
}

$sFiles = simplifyMultiFileArray($_FILES['attachment']);
echo '<pre>';
print_r($sFiles);
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-03T15:47:23.140

有很多方法可以清理 $_FILES 数组并使其更合理。这是我的首选方式：

```
foreach ($_FILES as $fieldname => $keys)
{
    foreach ($keys as $key => $list)
    {
        foreach ($list as $no => $value)
        {
            $files[$fieldname][$no][$key] = $value;
        }
    }
} 
```

# codeigniter - 在 codeigniter 的表单验证中使用多个回调

> ID：10780058
> 
> 赞同：2
> 
> 时间：2012-05-28T06:11:20.053
> 
> 标签：codeigniter

我将定义表单验证规则的逻辑分离到一个库中。我想在单个表单元素上应用多个回调函数。

```
$this->form_validation->set_rules('email', 'email', 'callback_db_check|callback_valid_email'); 
```

现在我不知道该怎么做。因为它不起作用我的意思是多个回调不起作用。但是，如果我定义单个回调它的工作正常。

```
function db_check(){
    $this->CI->form_validation->set_message('db_check', 'Not found in db');
}

function valid_email(){
    $this->CI->form_validation->set_message('db_check', 'Invalid email');
} 
```

这只是示例代码。我扩展了表单验证库，以便我可以从我的库中定义和调用验证逻辑。有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:35:44.380

```
$this->CI->form_validation->set_rules('email' , 'Email' , 'required|valid_email|max_length[255]|callback_email|callback_call_db'); 
```

ps您的回调应始终返回true或false（您的示例不返回任何内容）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T06:59:10.133

您可以在单个元素中应用多个回调函数

可以使用格式设置验证规则

`$this->form_validation->set_rules('email', 'email', 'callback_db_check|callback_valid_email');`

并且回调函数必须返回 true 或 false 。

```
function db_check($user) 
     {

        $sql=$this->db->query("select * from user where email like '%$user%' ");
        if($sql->num_rows()>0)
        {
             return true;
        }
             else
        {

        $this->form_validation->set_message('db_check', 'Not found in db');
        return FALSE;
        }

     }

 function valid_email($user) 
      {

            if(//condition)
            {
                 return true;
            }
                      else
            {

            $this->form_validation->set_message('valid_email', 'In valid email');
            return FALSE;
            }

      } 
```

在用户端

```
<div class="field_main">
<div class="fi_title">E-Mail Address *:</div>
<input type="text" id="email" name="email"  value="<? echo set_value('email');?>" class="field_class" />
<? echo form_error('email','<div class="error">', '</div>');?>
</div> 
```

# iphone - 目标c中的贝塞尔曲线使用coreplot

> ID：10780060
> 
> 赞同：0
> 
> 时间：2012-05-28T06:11:30.610
> 
> 标签：iphone, ios, core-plot, bezier

我正在该应用程序中在 iPhone 中开发一个应用程序我想要使用核心绘图框架工作的平滑曲线。任何人都可以建议如何实现平滑曲线

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:34:35.360

`CPTScatterPlotInterpolationCurved`在 1.0 版本之后添加了新的插值模式。它将在散点图中的每个点之间绘制贝塞尔曲线。您可以通过使用 Mercurial 拉取最新代码或等待下一个版本来获得对它的支持。

# drupal - Drupal 7 多个视图显示在一页上

> ID：10780063
> 
> 赞同：0
> 
> 时间：2012-05-28T06:11:58.790
> 
> 标签：drupal, drupal-7, views, drupal-views

只是一个快速的，我相信它很容易，尽管它让我发疯。

我有一个我开发的自定义主题。我提出了几种不同的观点。出于某种原因，我的博客和颜色框同时显示在我创建的颜色框和博客页面上。

我只希望 Colorbox 视图显示在一个页面上，而另一个视图显示在它自己的页面上。由于某种原因，它们都显示在同一页面上。

感谢您调查这些人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:30:22.157

您以哪种方法显示视图？是在 BLOCK 还是 PAGE 中？？这可能是我认为的页面。所以请编辑该块并确保它没有在所有页面中列出

# iphone - RGB颜色代码在iphone应用程序中不显示颜色

> ID：10780065
> 
> 赞同：0
> 
> 时间：2012-05-28T06:12:26.293
> 
> 标签：iphone, xcode

我正在为我的栏使用 RGB 颜色代码在 iphone 应用程序中显示，但它们没有显示任何颜色我从 photoshop 获取这些代码值但是当我使用它们时它们在 iphone 应用程序中没有显示任何颜色

对于第一行，我有来自 photoshop 的 RGB 代码是 255.192,0

```
 color=[UIColor colorWithRed:255 green:192 blue:0 alpha:0 ]; 
```

对于第二行，我有来自 photoshop 的 RGB 代码是 195,214,155

```
 color=[UIColor colorWithRed:195 green:214 blue:155 alpha:0]; 
```

对于第三行，我有来自 photoshop 的 RGB 代码是 49,133,156

```
 color=[UIColor colorWithRed:49 green:133 blue:156 alpha:0 ]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:15:59.223

的参数`colorWithRed:green:blue:alpha`是介于 0 和 1 之间的浮点值。因此您必须将所有数字除以 255，例如：

```
color = [UIColor colorWithRed:1.0f green:0.75f blue:0f alpha:1f]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T06:18:14.820

尝试像这样将您的 alpha 值设置为 1`[UIColor colorWithRed:255/255 green:192/255 blue:0 alpha:1 ];'`

alpha 是颜色的透明度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:17:23.290

iOS 上的 RGB 值仅介于 0 和 1 之间，因此您必须将所需的色调除以`255.0f`如下：

```
UIColor *color=[UIColor colorWithRed:255.0f/255.0f green:192.0f/255.0f blue:0.0f alpha:0.0f]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T06:19:31.453

换行

```
color=[UIColor colorWithRed:255 green:192 blue:0 alpha:0 ]; 
```

到

```
color=[UIColor colorWithRed:(255/255.0) green:(192/255.0) blue:0 alpha:0 ]; 
```

我不知道 alpha 但我相信它应该是**1**

# svn - 用于 Tortoise 客户端的 Windows 的 Subversion 服务器 (SVN)

> ID：10780066
> 
> 赞同：13
> 
> 时间：2012-05-28T06:12:48.820
> 
> 标签：svn, version-control, tortoisesvn

我的问题是这样的： [Subversion Server to use on Windows](https://stackoverflow.com/questions/615866/subversion-server-to-use-on-windows)

唯一的问题是它太旧了，我可以看到 Windows 上的 Subversion 服务器需要 Apache 之类的东西。我在找：

*   Windows 7 64x（不是 Windows 服务器）
*   带有免费商业许可证或 GNU 的 SVN 服务器
*   这适用于乌龟客户端
*   这不需要任何服务器或插件，只需一个应用程序或服务即可。
*   有工作统计。

如果建议的应用程序适用于此要求，请在回答或评论之前进行审核。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T06:18:58.530

[Visual SVN Server](http://www.visualsvn.com/server/)满足你的所有要求（除了最后一个，我不明白）。

*   与 Windows 7 x64 兼容
*   免费商业许可证（据我了解）
*   与 TortoiseSVN 一起使用
*   我认为它需要 Apache，但它以一种我无法轻易察觉的方式嵌入。无论如何，它是一项 Windows 服务，而且设置起来非常简单。

它最后一次更新是在大约两周前（2012-05-18），所以不是很旧。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T15:34:02.150

[没有人提到使用svnserve](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.svnserve.html)创建基于 svn:// 的存储库，而不是巨大的 3-rd 方应用程序：

*   svnserve 是任何 Subverson 安装的一部分
*   它很小
*   它有简单快速的启动
*   不需要漫长而复杂的配置步骤
*   可以作为服务工作

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T09:45:14.220

根据您的要求（我认为您的列表不完整），仅使用 TortoiseSVN 可能就足够了。

那么要求应该包括：

*   我是 Subversion 存储库的唯一用户。
*   所有用户都可以访问服务器。
*   您不希望拥有限制对存储库部分访问的访问规则。

然后您可以执行以下操作：

*   使用命令[“在此处创建存储库”](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-qs-guide.html#tsvn-qs-repo)在服务器上创建一个新的 subversion 存储库。
*   通过提供类似 URL 的方式来[检查该存储库](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-qs-guide.html#tsvn-qs-wc)`file:///c:/svn_repos/trunk/`（这当然取决于存储库的位置）。

要获取存储库的统计信息，您可以使用独立于您操作存储库的方式的[StatsSVN 。](http://wiki.statsvn.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T09:49:31.313

[uberSVN](http://ubersvn.com)满足您的所有要求，以及更多位。

*   Windows 7 64x（不是 Windows 服务器）
*   带有免费商业许可证或 GNU 的 SVN 服务器
*   这适用于乌龟客户端
*   无需任何服务器或插件即可工作，只需一个应用程序或服务 - SVN 需要 apache，但这是作为 uberSVN 的一部分安装和运行的
*   那有工作的静态。- 您可以查看和评论人们所做的工作，并且为用户团队提供了一些额外的社交功能

# xpages - 在 Xpages 中查看过滤

> ID：10780070
> 
> 赞同：1
> 
> 时间：2012-05-28T06:13:21.783
> 
> 标签：xpages, lotus-domino

我一直在尝试按第二个排序列过滤视图，但到目前为止它不起作用。（我的基础视图按第一列排序，按升序分类和排序，第二列也按升序排序）我该如何解决这个问题？我不想再为此过滤创建一个视图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:51:06.120

要按多个键进行过滤，您需要使用带有要过滤的键的 Java 向量。这是一个将过滤器应用于 sessionScope 变量的示例，然后您将其用于视图的 keys 属性：

```
var vArray = new java.util.Vector();
vArray.addElement("key1");
vArray.addElement("key2");
sessionScope.put('viewFilter', vArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:18:22.750

对于搜索功能，我们有两种不同的方式。一个是像操作系统级别的普通搜索。另一个是全索引搜索。

请点击以下链接，你会得到更好的主意，

```
[Search Query][1]

  [1]: http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPagesViewControlAddFullTextSearch.htm 
```

# asp.net-mvc-3 - SOLR 搜索未显示有效结果

> ID：10780073
> 
> 赞同：0
> 
> 时间：2012-05-28T06:13:28.893
> 
> 标签：asp.net-mvc-3, solr, solrnet

我使用 SOLR 作为我的应用程序的搜索引擎。但现在它没有显示出正确的结果。

在我的模式文件中，有一列`SubscriptionIds`包含多个带有分隔符的值。它们存储为,,4588,,4585,,6966,,4855,

同样，还有另一列`ABCId`包含单个值 SKJJ54855

当我发起查询时：

```
ABCId:(SKJJ54855) 
```

它向我显示了订阅值为 ,,4588,,4585,,6966,,4855 的记录，

但是当我发起查询时：

```
SubscriptionIds: (,4855,) && ABCId:(SKJJ54855) 
```

它没有给我结果！！！！

还有一种情况，当我发起查询时： SubscriptionIds: (,6966,) && ABCId:(SKJJ54855)

它让我得到结果...供您参考 (,6966,) 在 SubscriptionIds 列表中排在倒数第二位。

为什么它的行为如此奇怪.!!!

我的 Schema.xml 文件中的某些部分。

```
 <fieldType name="textgen" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

<field name="SubscriptionIds" type="textgen" indexed="true" stored="true" />

<fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
<field name="ABCId" type="string" indexed="true" stored="true"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:51:38.553

我的建议是使该字段具有`SubscriptionIds`多值，并分别存储许多 ID。这将比逗号分隔的列表更能代表实际数据。将其更改为：

```
<field name="SubscriptionIds" type="int" indexed="true" stored="true" multiValued="true" /> 
```

并更改您的索引代码以将多个 ID 添加到 SubscriptionIds 字段。

# ios - iPhone 设备：找不到此可执行文件的有效配置文件

> ID：10780074
> 
> 赞同：0
> 
> 时间：2012-05-28T06:13:35.997
> 
> 标签：ios

尝试使用应用程序加载器加载我的应用程序时遇到问题。

尝试使用应用程序加载器加载 .zip 文件时收到错误消息...

“应用程序包装必须以 .app /var/folders//5g/.... 结尾”

我做了产品/存档，但存档是灰色的……我既不能从 Xcode 也不能从应用程序加载器加载我的应用程序。我是 iOS 新手...我查看了我的应用程序文件，但没有看到任何 .app 文件。是吗？我已经使用情节提要创建了一个应用程序......有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:33:00.603

使用 Application Loader 时，您需要上传 .app 文件。您拥有的 ipa（或 .zip）文件是一个存档，其中包含一个目录 ( `Payload`)，其中 .app 文件具有您的应用程序的名称。这就是您需要从 Application Loader 上传的文件

要从 XCode 上传它，您需要将其存档，或者转到 Organize->Archives 并从那里选择提交到 AppStore。

如果您`Archive`从菜单中禁用了该选项，则`Product`需要`iOS Device`在运行目标下拉菜单中选择作为目标。您现在可能已经`iPad/iPhone Simulator X.X`选择了。

希望这可以帮助。

# javascript - 使用 JavaScript 重定向到指定页面

> ID：10780079
> 
> 赞同：0
> 
> 时间：2012-05-28T06:14:08.050
> 
> 标签：javascript

有什么方法可以让我在页面上使用 javascript 将页面上存在的任何 url 重定向到某个特定站点。

例如，在 HTML 页面上，我说存在 10 个 url。我可以在 HTML 页面中添加一个 javascript，这样如果有人点击该页面上的任何 url，它就会被重定向到指定的页面。

谢谢。

编辑：：

我的场景是我在一个页面上有一些 13k 链接，并且我在页面上突出显示了术语，即使在页面上也单击了任何链接，该词也会在该页面上突出显示。为了做到这一点，我处理每个 url 并向其中添加更多信息，以考虑我的服务器 perl 脚本，它可以完成突出显示的工作。但是现在由于页面上的链接很多，处理页面需要时间，页面渲染时间较长。所以我想要一个可以通过将信息添加到服务器上的 perl 脚本来传递任何链接的 javascript。

我尝试在服务器端将页面分成几部分并并行处理，但没有太大改进。

欢迎任何其他解决方案或建议。感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:16:59.290

您可以`preventDefault`在 click 事件处理程序中使用来防止默认行为（打开链接），并用于`location.href`重定向到新页面。

如果您使用的是 jQuery：

```
$(".links").click(function(event){
    event.preventDefault();
    location.href = "http://google.com";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:25:20.690

您可以使用以下 jQuery 块执行此操作：

```
$(document).ready(function () {
    $('#urlId').live('click', function (e) {
        e.preventDefault(); //Stops the link from opening
        window.location.href = "/specifiedPage"; // Changes the location of the page
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:27:07.753

您可以在所有内容前面创建一个“防护玻璃”div 并处理该 div 上的点击事件。这样做的好处是不接触页面，因此在删除 div 后，任何东西都可以恢复正常。

只需确保在 div 背景上放置非完全透明的颜色，因为我发现如果 div 完全透明，Internet Explorer 会忽略事件。

类似的东西`rgba(0,0,0,0.001)`就足够了。

# android - 为什么在 Android 的 Geoloqi API 中不调用 onPushMessageReceived()？

> ID：10780080
> 
> 赞同：1
> 
> 时间：2012-05-28T06:14:22.017
> 
> 标签：android, geolocation, push-notification, android-c2dm, geofencing

在我的 android 应用程序中，我使用最新的 Geoloqi API 来实现 Geofence 概念。当用户进入他通知的某个区域时，为此我使用 Push Notifications.in GeoReceiver 类三个回调方法正在调用但不是 onPushMessageReceived()。请帮助我该怎么办？我正在使用当前位置创建触发器是否需要手动进入区域，或者因为我已经在该位置它没有调用？注意：我在 assets/geoloqi.properties 文件中提供了所需的凭据。当在 logcat 中启动应用程序“成功注册 C2DM 服务”消息时也会显示。我的代码：

GeoloqiExampleActivity.java

```
public class GeoloqiExampleActivity extends Activity{
    String TAG = "Geoloqi Example";

     private LQService mService;
     private boolean mBound;
     GeoReceiver geoReceiver = new GeoReceiver();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent intent = new Intent(this, LQService.class);
        startService(intent);
    }

    @Override
    public void onResume() {
        super.onResume();

        // Bind to the tracking service so we can call public methods on it
        Intent intent = new Intent(this, LQService.class);
        bindService(intent, mConnection, 0);

        // Wire up the sample location receiver
        final IntentFilter filter = new IntentFilter();
        filter.addAction(GeoReceiver.ACTION_LOCATION_CHANGED);
        filter.addAction(GeoReceiver.ACTION_TRACKER_PROFILE_CHANGED);
        filter.addAction(GeoReceiver.ACTION_LOCATION_UPLOADED);
        filter.addAction(GeoReceiver.ACTION_PUSH_MESSAGE_RECEIVED);
        registerReceiver(geoReceiver, filter);

    }

    @Override
    public void onPause() {
        super.onPause();

        // Unbind from LQService
        if (mBound) {
            unbindService(mConnection);
            mBound = false;
        }
        // Unregister our location receiver
        unregisterReceiver(geoReceiver);
    }
    public void sendRequest() {

         // Performing a Trigger POST request
        if (mService != null) {
            LQSession session = mService.getSession();
            LQTracker tracker = mService.getTracker();
            tracker.setSession(session);
            // Build your request
            JSONObject trigger = new JSONObject();
            try {
                trigger.put("text", "Popcornapps");
                trigger.put("type", "message");
                trigger.put("latitude", 17.42557068);
                trigger.put("longitude",  78.42022822);
                trigger.put("radius", 500);
                trigger.put("place_name", "Banjara Hills");
            } catch (JSONException e) {
               Log.d(TAG, e.getMessage());
            }

            // Send the request
            session.runPostRequest("trigger/create", trigger, new OnRunApiRequestListener() {
                @Override
                public void onSuccess(LQSession session, HttpResponse response) {

                    Toast.makeText(GeoloqiExampleActivity.this, "Success", Toast.LENGTH_SHORT).show();
                    try {
                        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
                        StringBuilder s = new StringBuilder();
                        String sResponse;
                        while ((sResponse = reader.readLine()) != null) {
                            s = s.append(sResponse);
                        }
                    String result = s.toString().trim();
                    Log.d("On success Result", result);

                    } catch (UnsupportedEncodingException e) {
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                @Override
                public void onFailure(LQSession session, LQException e) {
                    Log.e(TAG, e.getMessage());
                    Toast.makeText(GeoloqiExampleActivity.this, "Fail", Toast.LENGTH_LONG).show();
                }
                @Override
                public void onComplete(LQSession session, HttpResponse response, StatusLine status) {
                    Toast.makeText(GeoloqiExampleActivity.this, "Complete", Toast.LENGTH_LONG).show();
                }
            });
        } else{
            Toast.makeText(this, "service null", Toast.LENGTH_LONG).show();
        }
    }

     /** Defines callbacks for service binding, passed to bindService() */
    private ServiceConnection mConnection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            try {
                // We've bound to LocalService, cast the IBinder and get LocalService instance.
                LQBinder binder = (LQBinder) service;
                mService = binder.getService();
                mBound = true;
                sendRequest();//Sending API Request
            } catch (ClassCastException e) {
            }
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            mBound = false;
        }
    };
} 
```

GeoReceiver.java

```
public class GeoReceiver extends LQBroadcastReceiver {

    @Override
    public void onLocationChanged(Context arg0, Location arg1) {
        Toast.makeText(arg0, "Loc Changed ", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onPushMessageReceived(Context context, Bundle data) {
        Toast.makeText(context, "Push Msg Received ", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onLocationUploaded(Context arg0, int arg1) {
        Toast.makeText(arg0, "Location Uploaded ", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onTrackerProfileChanged(Context arg0, LQTrackerProfile oldp,
            LQTrackerProfile newp) {
        Toast.makeText(arg0, "onTrackerProfileChanged ",Toast.LENGTH_SHORT).show();
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pop.geoloqi"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />

    <permission
        android:name="com.pop.geoloqi.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.pop.geoloqi.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

         <activity
            android:name=".GeoloqiExampleActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name="com.geoloqi.android.sdk.service.LQService"
            android:exported="false" />

        <receiver
            android:name=".GeoReceiver"
            android:enabled="false"
            android:exported="false" >
            <intent-filter>
                <action android:name="com.geoloqi.android.sdk.action.LOCATION_CHANGED" />
            </intent-filter>
        </receiver>
        <receiver
            android:name="com.geoloqi.android.sdk.receiver.LQDeviceMessagingReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.pop.geoloqi" />
            </intent-filter>
        </receiver>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:16:56.100

Geoloqi Android SDK 的早期版本中存在错误。如果您更新到[最新版本](https://github.com/geoloqi/Geoloqi-Android-SDK)，应该可以解决此问题。

# javascript - 使用 javascript/jquery 从字符串中获取整数值

> ID：10780087
> 
> 赞同：42
> 
> 时间：2012-05-28T06:14:52.653
> 
> 标签：javascript, jquery

这些是我拥有的字符串：

```
"test123.00"
"yes50.00" 
```

我想将 123.00 与 50.00 相加。

我怎样才能做到这一点？

我使用了命令 parseInt() 但它在警报框中显示 NaN 错误。

这是代码：

```
 str1 = "test123.00";
 str2 = "yes50.00";
 total = parseInt(str1)+parseInt(str2);
 alert(total); 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-28T06:17:20.273

只需这样做，您需要删除“数字”和“。”以外的字符。形成您的字符串将为您工作

```
yourString = yourString.replace ( /[^\d.]/g, '' ); 
```

你的最终代码将是

```
 str1 = "test123.00".replace ( /[^\d.]/g, '' );
  str2 = "yes50.00".replace ( /[^\d.]/g, '' );
  total = parseInt(str1, 10) + parseInt(str2, 10);
  alert(total); 
```

### [演示](http://jsfiddle.net/zrr2q/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T06:17:57.490

要使 parseInt 起作用，您的字符串应该只有数字数据。像这样的东西：

```
 str1 = "123.00";
 str2 = "50.00";
 total = parseInt(str1)+parseInt(str2);
 alert(total); 
```

您可以在开始处理它们之前拆分字符串吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T06:29:56.197

```
str1 = "test123.00";
str2 = "yes50.00";
intStr1 = str1.replace(/[A-Za-z$-]/g, "");
intStr2 = str2.replace(/[A-Za-z$-]/g, "");
total = parseInt(intStr1)+parseInt(intStr2);

alert(total); 
```

工作[Jsfiddle](http://jsfiddle.net/fosterz/v8rBG/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-28T06:19:32.617

这在逻辑上可能吗？？..我想你必须采取的方法是这样的：

```
Str1 ="test123.00"
Str2 ="yes50.00" 
```

`test`除非您在两者之间有分隔符，否则这将无法解决`123.00`

```
eg: Str1 = "test-123.00" 
```

然后你可以这样拆分

```
Str2 = Str1.split("-"); 
```

这将返回一个用“-”分割的单词数组

然后你可以做得到`parseFloat(Str2[1])`浮动值，即`123.00`

# asp.net-mvc-3 - DropDownListFor 的验证在 MVC3 中不起作用？

> ID：10780090
> 
> 赞同：3
> 
> 时间：2012-05-28T06:15:25.620
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

验证适用于其他输入类型的文本元素，但不适用于 DropDownListFor

**类购买输入属性代码**

```
[Required]
public string LedgerId { get; set; } 
```

**类视图模型代码**

```
PurchaseViewModel purchaseVM = new PurchaseViewModel
{
    // PurchaseInput=purchaseInput,
    Ledger = uw.LedgerRepository.Get().Select(x => new SelectListItem { Value = x.Id.ToString(), Text = x.LedgerName }),
}; 
```

**看法**

```
<div class="column">
    <div  class="labelField">
        @Html.LabelFor(model => model.PurchaseInput.LedgerId, "Party")
    </div>   
    <div class="ItemField">
        @Html.DropDownListFor(model => model.PurchaseInput.LedgerId, new SelectList(Model.Ledger, "Value", "Text"))
        @Html.ValidationMessageFor(model => model.PurchaseInput.LedgerId)
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:20:21.960

从表面上看，您的选择列表中似乎没有空项目。仅当用户选择字符串长度为零的下拉项时才会触发验证。如果您检查 Html 源代码，您是否可以在下拉列表中看到验证属性（取决于您是否使用不显眼的验证）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:28:22.270

尽管这是一种解决方法，但至少它会触发某种验证。尝试：

```
@Html.DropDownListFor(model => model.PurchaseInput.LedgerId, new SelectList(Model.Ledger, "Value", "Text"), new { @class = "required" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:55:02.693

是的，DropDownListFor 的验证存在问题。看看这个链接。他们从元数据手动获取验证数据 - [http://forums.asp.net/t/1649193.aspx](http://forums.asp.net/t/1649193.aspx)

# objective-c - 如何为 IBAction-XCode4 编写单元测试用例

> ID：10780091
> 
> 赞同：3
> 
> 时间：2012-05-28T06:15:26.337
> 
> 标签：objective-c, unit-testing, xcode4

我想编写一个单元测试用例来测试 IBAction 中的代码是否正确执行。我做了一个示例来编写逻辑测试，它工作正常。我没有找到任何在 Xcode 4 中编写应用程序测试的教程或指南。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:47:48.153

我忘了查看苹果网站的示例。这是参考的好链接。

[https://developer.apple.com/library/mac/#samplecode/UnitTests/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011742](https://developer.apple.com/library/mac/#samplecode/UnitTests/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011742)

# java - PrimeFaces 3.2 selsectOneMenu valueChangeListener 不起作用

> ID：10780093
> 
> 赞同：0
> 
> 时间：2012-05-28T06:15:38.367
> 
> 标签：java, jakarta-ee, primefaces

我希望根据下拉列表项的选择来检索列表。为此，我正在使用以下不起作用的代码：

```
<p:selectOneMenu style="width: 150px" value="#{watchBean.exchange}">
                <f:selectItem itemLabel="NSE" itemValue="nse"/>
                <f:selectItem itemLabel="BSE" itemValue="bse"/>            
                <p:ajax event="change" update=":frm" listener="#{watchBean.doScripList}" />
            </p:selectOneMenu> 
```

豆代码：

```
 public void doScripList(ValueChangeEvent e)
{

    sl=getAllScripByExchange((String)e.getNewValue());  //sl is of type List<MasterScrip>
} 
```

当我调试时，我看到事件没有被触发并且我收到以下错误：

```
javax.el.MethodNotFoundException: Method not found: beans.watchBean@9ac2e4.doScripList(javax.faces.event.AjaxBehaviorEvent)
at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155)... 
```

当我省略 p:ajax 时，'exchange' 类型也不是 get/set 是什么导致了这个问题？它的解决方案是什么？

**编辑** 将方法重命名为 wow() 仍然是相同的错误：

```
 javax.el.MethodNotFoundException: Method not found: beans.watchBean@1732d83.wow(javax.faces.event.AjaxBehaviorEvent) 
```

**编辑**：托管bean代码

```
 import java.util.List;
import javax.inject.Named;
import javax.enterprise.context.RequestScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
import javax.xml.ws.WebServiceRef;
import service.MasterScrip;
import service.StatelessWebService_Service;
@Named(value = "watchBean")
@RequestScoped
public class watchBean {
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
    private StatelessWebService_Service service;

    /** Creates a new instance of watchBean */
    public watchBean() {
    }
    String uname,scripSym,exchange;
    Integer scripID;
    List<UserTrack> ut;
List<MasterScrip> sl;
    public List<MasterScrip> getSl() {
        return sl;
    }

    public void setSl(List<MasterScrip> sl) {
        this.sl = sl;
    }

    public String getExchange() {
        return exchange;
    }

    public void setExchange(String exchange) {
        sl=getAllScripByExchange(exchange);
        this.exchange = exchange;
    }
public void wow(ValueChangeEvent e)
{    
    sl=getAllScripByExchange((String)e.getNewValue());
   // setSl(sl);
    //FacesContext.getCurrentInstance().renderResponse();

    // sl=getAllScripByExchange(exchange);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:58:02.480

尝试改变

```
<p:ajax event="change" update=":frm" listener="#{watchBean.doScripList}" /> 
```

至

```
<p:ajax event="change" update=":frm" listener="#{watchBean.doScripList()}" /> 
```

在方法末尾添加括号。

JSF 正在您的支持 bean 中寻找一个方法`setDoScripList`，但是当在末尾添加括号时，您将`doScripList`显式调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:44:25.997

遇到与您相同的问题，但我发现 valueChangeListener

```
public void doScripList(ValueChangeEvent e) 
```

仅在您使用`<f:ajax>`tag 时有效，而在您使用`<p:ajax>`. 但是由于 selectOneMenu 是 type `<p:selectOneMenu>`，所以`<f:ajax>`不起作用。

我通过删除参数来解决问题`ValueChangeEvent e`并且它有效。`<p:ajax>`所以在标签的情况下尝试一个无参数的监听器。

```
public void doScripList()
{
    sl=getAllScripByExchange(getExchangeName());
} 
```

注意：这里没有 event 参数，它通过调用相应的 setter 方法设置新值，并且您可以在侦听器中访问更新的值。对于这种情况，您还需要像这样向 selectOneMenu 提供 id：

```
<p:selectOneMenu id="exchangeName" style="width: 150px" value="#{watchBean.exchange}">
  ...
</p:selectOneMenu> 
```

然后在 Bean 类中为 exchangeName 添加 get 和 set 方法：

```
private String exchangeName;

public String getExchangeName(){
   return exchangeName;
}

public void setExchangeName(String exchangeName) {
    this.exchangeName = exchangeName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:00:30.743

这是 primefaces 3.2 的错误，请将您的代码替换为以下内容。

```
 <h:selectOneMenu style="width: 150px" value="#{watchBean.exchange}" valueChangeListener="#{watchBean.doScripList}" onchange="submit()">
       <f:selectItem itemLabel="NSE" itemValue="nse"/>
       <f:selectItem itemLabel="BSE" itemValue="bse"/>            
   </h:selectOneMenu> 
```

在这里更改您的方法；

```
 public void doScripList(ValueChangeEvent e){
     sl = getAllScripByExchange((String)e.getNewValue());
     setAllScriptExchange(sl);  //please write setAllScriptExchange method yourself
     FacesContext.getCurrentInstance().renderResponse();
  } 
```

由于 onchange 事件，您的页面已重新加载。

# jquery - jQuery-ui 和迂回冲突

> ID：10780100
> 
> 赞同：3
> 
> 时间：2012-05-28T06:16:01.517
> 
> 标签：jquery, jquery-ui

我有一个`jquery-ui`用于手风琴菜单的网页，以及用于图像列表的 jquery 环形交叉路口。然而，jquery-ui 似乎与回旋动画相冲突：

[https://dl.dropbox.com/u/31272696/ex2.html](https://dl.dropbox.com/u/31272696/ex2.html)

[https://dl.dropbox.com/u/31272696/ex2.html](https://dl.dropbox.com/u/31272696/ex2.html)

任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:16:58.177

jQuery UI 有一些内置的动画效果，这些效果与迂回的代码混在一起。我通过下载没有效果的自定义构建的 jQuery UI 解决了这个问题。

问题仍应缩小到确切的冲突内容，以及是否可以在不遗漏 UI 效果的情况下解决问题。我仍然希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-02T08:35:25.790

我通过在 jquery-ui 之后添加 jquery easing 来修复它：

```
<script src="lib/jquery/dist/jquery.js"></script>
<script src="lib/jquery-ui/jquery-ui.js"></script>
<script src="lib/jquery-easing/jquery.easing.min.js"></script>
<script src="lib/jquery-roundabout/jquery.roundabout.revision.js"></script> 
```

# java - 将 HashMap 转换为 ArrayList

> ID：10780111
> 
> 赞同：48
> 
> 时间：2012-05-28T06:17:06.427
> 
> 标签：java, generics, collections

我只想将 transitionHash 映射值移动到 cardholderDataRecords 数组列表中。

```
HashMap<String,ExceptionLifeCycleDataBean> transitionHash = new HashMap<String,ExceptionLifeCycleDataBean>();

ArrayList<ExceptionLifeCycleDataBean> cardholderDataRecords = new ArrayList<ExceptionLifeCycleDataBean>(); 
```

我正在做

```
cardholderDataRecords.add((ExceptionLifeCycleDataBean) transitionHash.values()); 
```

它在扔

```
java.lang.ClassCastException: java.util.HashMap$Values cannot be cast to com.reportss.bean.ExceptionLifeCycleDataBean 
```

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-05-28T06:19:53.190

您正在尝试将*值的集合*转换为单个`ExceptionLifeCycleDataBean`.

你可以很容易地得到这个列表：

```
List<ExceptionLifeCycleDataBean> beans =
    new ArrayList<ExceptionLifeCycleDataBean>(transitionHash.values()); 
```

或者添加到现有集合中，使用：

```
cardholderDataRecords.addAll(transitionHash.values()); 
```

不需要演员表。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2017-05-09T06:17:05.417

将数据 HashSet 转换为数组列表

```
ArrayList<ExceptionLifeCycleDataBean> cardholderDataRecords = new ArrayList<ExceptionLifeCycleDataBean>(transitionHash); 
```

同样的方式，您可以将 ArrayList 转换为 Hashmap。

# c# - 用户登录后，我的应用程序如何记住用户名和密码？

> ID：10780112
> 
> 赞同：2
> 
> 时间：2012-05-28T06:17:10.410
> 
> 标签：c#, windows-phone-7.1

当用户选中“记住我”时，我想保存用户名和密码。用户下次应该可以直接登录。做这个的最好方式是什么？

我尝试了隔离存储，但可能我写的代码不正确。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:46:16.497

关于如何[在 Windows Phone 应用程序中加密数据](http://msdn.microsoft.com/en-us/library/hh487164%28v=vs.92%29.aspx)有一个很好的方法- 可能值得将该代码与您的代码进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:26:35.123

最好和最安全的方法是存储唯一 ID，该 ID 仅与您正在与之交谈的服务器相关，作为 cookie。

算法：

1.  从用户那里获取用户名和密码

2.  检查用户的真实性。

3.  如果通过身份验证，则生成与该用户相关的唯一 ID 并将其存储在服务器上。

4.  将此唯一 ID 传递给客户端并将其存储在 cookie 中。设置最大年龄

5.  下次用户访问您的网站时。检查服务器上的唯一 ID，并检查其年龄以及发布时间

6.  如果一切顺利，则授予用户访问权限

# android - 在 Android 中通过 AccountManager.removeAccount() 删除 Skype 帐户

> ID：10780125
> 
> 赞同：0
> 
> 时间：2012-05-28T06:18:27.257
> 
> 标签：android, accountmanager

我正在尝试`AccountManager`在我的 Android 手机上使用 Accounts 并想编写一个应用程序来删除一些帐户。我的代码适用于 facebook 帐户，但在 Skype 帐户上失败。

有关如何删除此类帐户的任何线索（当然除了打开 xml 并删除所需的行）

```
result=accountManager.removeAccount(Account, null, null); 

remove_result=result.getResult(); //-> true for a facebook account , false for a skype account . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:57:36.617

如果某些帐户需要用于其他用途（例如 Android Market 等），您可能会被禁止删除它们。IIRC，执行此检查的代码是系统级的，因此您无法更改它。不知道为什么它禁止您删除 Skype 帐户。检查 logcat 输出，可能有一些提示。

# java - 在 jboss AS 7.1 中打开任何 seam 应用程序页面后，此网页出现重定向循环错误

> ID：10780127
> 
> 赞同：0
> 
> 时间：2012-05-28T06:18:37.433
> 
> 标签：java, jboss7.x, seam2

我的项目使用的是seam 2.2.2 Final，应用服务器是Jboss 7.1。经过漫长的部署过程，终于可以部署成功了。但是当我尝试在浏览器中打开它时，我收到如下错误：

> “此网页有重定向循环
> 
> “http://localhost:8080/integration/debug.seam?cid=2”的网页导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。”。

我怎么解决这个问题？

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>integration</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.seam</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>org.jboss.jbossfaces.JSF_CONFIG_NAME</param-name>
    <param-value>Mojarra-1.2</param-value>
  </context-param>
  <context-param>
    <param-name>org.richfaces.SKIN</param-name>
    <param-value>blueSky</param-value>
  </context-param>
  <listener>
    <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
  </listener>
  <filter>
    <filter-name>Seam Filter</filter-name>
    <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>Seam Filter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <servlet>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <url-pattern>/seam/resource/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>facelets.DEVELOPMENT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
  </context-param>
  <security-constraint>
    <display-name>Restrict raw XHTML Documents</display-name>
    <web-resource-collection>
      <web-resource-name>XHTML</web-resource-name>
      <url-pattern>*.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint/>
  </security-constraint>
</web-app> 
```

这是我的persistence.xml。我认为persistence.xml 的配置是正确的。

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Persistence deployment descriptor for dev profile -->
<persistence xmlns="http://java.sun.com/xml/ns/persistence" 
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" 
             version="1.0">

   <persistence-unit name="integration" transaction-type="JTA">
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <jta-data-source>java:jboss/integrationDSJNDI</jta-data-source>
      <properties>
         <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>
         <property name="hibernate.hbm2ddl.auto" value="update"/>
         <property name="hibernate.show_sql" value="true"/>
         <property name="hibernate.format_sql" value="true"/>
         <property name="jboss.entity.manager.factory.jndi.name" value="java:/integrationEntityManagerFactory"/>
      </properties>
   </persistence-unit>

</persistence> 
```

罐子清单

```
antlr-2.7.6.jar
antlr-runtime-3.1.1.jar
commons-beanutils-1.7.0.jar
commons-collections-3.2.jar
commons-digester-1.8.jar
commons-logging-1.0.4.jar
dom4j-1.6.1.jar
drools-api-5.0.1.jar
drools-core-5.0.1.jar
gwt-servlet-2.3.0.jar
hibernate-core-3.3.0.SP1.jar
hibernate-validator-3.1.0.GA.jar
drools-compiler-5.0.1.jar
itext-2.1.2.jar
itext-rtf-2.1.2.jar
jboss-el-1.0_02.CR5.jar
jboss-seam-2.2.1.Final.jar
jboss-seam-debug-2.2.1.Final.jar
jboss-seam-ioc-2.2.1.Final.jar
jboss-seam-jul-2.2.1.Final.jar
jboss-seam-mail-2.2.1.Final.jar
jboss-seam-pdf-2.2.1.Final.jar
jboss-seam-remoting-2.2.1.Final.jar
jboss-seam-ui-2.2.1.Final.jar
jbpm-jpdl-3.2.2.jar
json-20080701.jar
jta-1.1.jar
mvel2-2.0.10.jar
richfaces-api-3.3.3.Final.jar
richfaces-impl-3.3.3.Final.jar
richfaces-ui-3.3.3.Final.jar
xml-apis-1.0.b2.jar
xstream-1.3.1.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:26:18.537

这个问题是由于缺少 jsf-facelet 依赖造成的。解决将以下代码添加到您的 pom.xml

```
 <dependency>
    <groupId>com.sun.facelets</groupId>
    <artifactId>jsf-facelets</artifactId>
    <version>1.1.15</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:06:16.517

使用解决方案 1 [https://community.jboss.org/thread/206184](https://community.jboss.org/thread/206184)

> 我解决了这个问题，将 debug.xhtml 从 jboss-seam-debug.jar 复制到根 web src 路径。

使用解决方案 2 [https://issues.jboss.org/browse/JBSEAM-4864](https://issues.jboss.org/browse/JBSEAM-4864)

> 将 META-INF/debug.xhtml 移动到 META-INF/resources/debug.xhtml 应该有助于解决异常。在 jboss-seam-debug.jar 2.3.0 中修复它

# android - Android 片段和单独的线程

> ID：10780128
> 
> 赞同：7
> 
> 时间：2012-05-28T06:18:40.840
> 
> 标签：android, multithreading, android-fragments

我正在使用 android ViewPager：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

此类允许您基本上将一堆 View 或 Fragment 拍成一个组并轻松翻阅它们。当我尝试创建一个单独的线程来随机打乱视图时，就会出现我的问题。

我扩展了一个线程，该线程将在我通过参数传入的 ViewPager 上调用[setCurrentItem 。](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setCurrentItem%28int,%20boolean%29 "设置当前项")当我这样做时，我收到了这个：

```
java.lang.IllegalStateException: Must be called from main thread of process 
```

我想我要做的就是从我的活动片段中调用一个方法来解决这个问题，所以我创建了 changePageFromActivity 来完成这项肮脏的工作，并通过将我的活动传递给我的线程来调用它。但这也没有用。以下是完整的堆栈跟踪：

```
 FATAL EXCEPTION: Thread-11
 java.lang.IllegalStateException: Must be called from main thread of process
at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1392)
at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
at android.support.v4.app.FragmentStatePagerAdapter.finishUpdate(FragmentStatePagerAdapter.java:160)
at android.support.v4.view.ViewPager.populate(ViewPager.java:804)
at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:433)
at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:405)
at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:397)
at com.lyansoft.music_visualizer.MusicVisualizerActivity.changePageFromActivity(MusicVisualizerActivity.java:144)
at com.lyansoft.music_visualizer.ShuffleThread.run(ShuffleThread.java:38) 
```

在做了一些研究之后，我收集到片段很容易被破坏并导致不同的线程，因此为了防止出现任何问题，ViewPager 只是确保必须从主活动中调用我想要的方法。

所以我的问题是：

是否可以按照以下方式注入一些东西

```
run() { while(condition) { methodIWantHere(); sleep(timeout); } } 
```

在我的主要活动的线程中而不破坏它？

或者

什么是更好的设计模式来实现我想要的效果？（即以一致的指定间隔更改视图）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T06:32:31.790

A[`Handler`](http://developer.android.com/reference/android/os/Handler.html)将是一个显而易见的选择。

```
final Runnable changeView = new Runnable()
{
    public void run() 
    {
        methodIWantHere();
        handler.postDelayed(this, timeout);
    }
};

handler.postDelayed(changeView, timeout); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-28T06:37:12.130

尝试使用

```
runOnUiThread(Runnable action). 
```

# cakephp - 在 cake php 的 app 文件夹中创建一个控制器？

> ID：10780129
> 
> 赞同：0
> 
> 时间：2012-05-28T06:18:42.680
> 
> 标签：cakephp, cakephp-1.3

如何在 cake php 的 app 文件夹中创建控制器？

```
class AppSessionController extends AppController {

} 
```

我想创建另一个与 AppController 并行的控制器，然后我想用 AppController 扩展它

新创建的控制器可以扩展到整个应用程序（应用程序/控制器中的所有控制器）。

可能吗 ？

编辑：在应用程序/控制器中

```
class customController extends AppSessionController {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:32:43.060

我不明白你为什么不在 AppController 中实现它，但如果你真的有需要，你可以做两件事之一

一个）

```
class AppController extends CustomController {}
CustomController extends Controller {} 
```

二）

```
class CustomController extends AppController {}
Update all controllers to extend CustomController 
```

或者，如果它只是在功能上很常见，也许一个组件会做，然后将组件添加到 AppController

# php - 无法执行删除查询

> ID：10780130
> 
> 赞同：0
> 
> 时间：2012-05-28T06:18:45.457
> 
> 标签：php, sql

我有两张桌子：`details`和`Product`

这两个表都有一个字段`user_id`。它是表顺序中的主键，并且在表产品中我创建了一个外键。我执行以下查询。最初，这些表有两条记录，一条是`user_id=11`和，另一条是`user_id=12` 我执行了以下脚本

```
// making the database connection
$db2=mysql_connect("localhost","root","");
mysql_select_db("my_requests",$db2);
$query=mysql_query("SELECT details.*,product.* FROM details INNER JOIN product ON details.user_id = product.user_id"); 

while($row=mysql_fetch_array($query)){
$id=$row['user_id'];
echo "$id";

$query1=mysql_query("DELETE FROM details WHERE details.user_id=$id");    
$query2=mysql_query("DELETE FROM product WHERE product.user_id=$id");
} 
```

在执行时，它只是删除了 user_id=12 的记录。当我再次尝试执行它时，它既没有回显任何内容，也没有删除剩余的记录。

请纠正。抱歉英语不好。

我在循环结束时打印了这个：

> printf("删除的记录：%d\n", mysql_affected_rows());

它没有显示任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:29:52.347

尝试使用 `mysql_affected_rows()`这种方式，您可以确定如果 Rows 正在删除，即使没有行受到影响，DELETE 查询也会成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:38:50.393

```
mysql_affected_rows() to check affected id 
```

and i think your database do not have anything to display on second run

# java - WSImports 指定类的包名

> ID：10780136
> 
> 赞同：0
> 
> 时间：2012-05-28T06:19:18.953
> 
> 标签：java, web-services, java-metro-framework

我有以下场景，我有两个包，分别是 com.ws.a 和 com.ws.b。
这两个包都有网络服务类。com.ws.a 包含类 TestServoceA，它具有返回类 TestA 的方法。
我想将此生成的类传递给 com.ws.b 中的 TestServiceB。

但是`wsimport`工具会为这两个包生成两个不同的类，例如：
com.ws.a.TestA 和
com.ws.b.TestA

我只想生成一个类 com.ws.a.TestA 作为代理并在两个命名空间中使用它。我怎样才能做到这一点？如果自定义绑定可以帮助我，请举个例子。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:04:08.270

wsimport 将使用 JAXB 进行数据绑定，请按照此文档指定自定义绑定：

[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html)

# gwt - SC.say 位置问题

> ID：10780143
> 
> 赞同：1
> 
> 时间：2012-05-28T06:19:51.623
> 
> 标签：gwt, smartgwt

我目前面临修复 SC.say 在屏幕上弹出的位置的问题。此弹出窗口的默认行为是可以的，如 ，它位于屏幕的中心。但是，一旦您将此弹出窗口拖动到屏幕的一角，然后，下次弹出此弹出窗口时，它就会出现在您将其拖动到的同一个角落。当用户开始拖动它时，此弹出窗口的默认行为（就位置而言）会发生变化。有没有办法切换回默认行为而不管用户将这个弹出窗口拖到哪里？我检查了这个 SC 类的 javadoc，但找不到任何函数可以让我们指定这个弹出窗口应该出现的位置。

SmartGWT 版本：3.0 GWT 版本：2.4 浏览器：Firefox、IE、Chrome、Safari

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:23:32.057

如果您没有找到简单的解决方案，我认为最简单的方法是自己做一个“SC.say”。

复制内置对话框然后添加您自己的功能非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:40:50.253

有些东西可以帮助你

```
Canvas popUp = Canvas.getById("isc_globalWarn_body");
popUp.setTop(where it was);
popUp.setLeft(.......);
popUp.setWidth(...);
etc..... 
```

我在网上某处的帖子上找到了带有控制台的 id 和 Canvas 静态方法，我不记得在哪里。

# forms - 如何取消使用表单提交的文件上传？

> ID：10780146
> 
> 赞同：1
> 
> 时间：2012-05-28T06:19:57.727
> 
> 标签：forms, gwt, gxt

我正在使用 com.extjs.gxt.ui.client.widget.form.FormPanel；用于文件上传。代码如下：

```
FormPanel panel = new FormPanel();
file = new FileUploadField();
file.setName("uploadedfile");
file.setFieldLabel("File");

FlexTable fileTable = new FlexTable();
fileTable.setWidget(0, 0, file);
panel.add(fileTable);

Button submitButton = new Button("Save");
panel.addButton(submitButton);

submitButton.addListener(Events.Select,
new Listener<ButtonEvent>() {
        @Override
        public void handleEvent(ButtonEvent be) {
        panel.setAction(<someactionUrl>);
        panel.submit(); 
}
}); 
```

表单提交文件上传开始后，我显示一个带有取消按钮的进度条。当用户单击取消按钮时，我想中止文件上传（表单提交请求）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T14:40:42.367

为了能够取消表单提交，您必须导航或删除包含提交表单的页面。为了无缝地实现这一点，您必须更改提交方式。

提交时：

1.  深度克隆正在上传的表单元素
2.  将克隆的 input[type=file] 元素交换为原始元素。
3.  创建一个 iframe
4.  将 iframe 添加到 DOM
5.  将克隆的表单附加到 iframe
6.  将 iframe 的 id 和表单的目标设置为通用的唯一值
7.  提交克隆的表格

取消：

1.  删除 iframe。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T15:43:09.490

您可以查看[gwt-upload](http://code.google.com/p/gwtupload/)。我已经看到基于 gwt-upload 的示例，您可以在其中取消文件的上传。

# java - 在 mvn 测试期间连接 JVM

> ID：10780151
> 
> 赞同：0
> 
> 时间：2012-05-28T06:20:23.787
> 
> 标签：java, jvm

嗨：我有一个包含 10,000 个 Junit 测试用例的应用程序。上周，当我添加新代码时，我注意到有很多 Java heap out of memory 单元测试用例错误。1）一种方法是重新检查我添加的代码。2）我在单元测试用例期间连接JVM，然后得到堆转储。有人可以提示我在 2) 的情况下如何做吗？

我使用windows、maven、J2SE。

基本上我知道我应该给 Java 命令什么样的参数，但我不知道我应该把这些参数放在 pom xml 的什么地方。

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.4.2</version>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:24:58.407

您可以设置 jvm 属性 -XX:-HeapDumpOnOutOfMemoryError (http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html) 并将其设置为 surefire (http://maven. apache.org/plugins/maven-surefire-plugin/test-mojo.html#argLine)
或者，您可以使用 jmap 按需转储进程的内存。
请参阅 jps（获取 pid）和 jmap 文档
[http://docs.oracle.com/javase/6/docs/technotes/tools/share/jps.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jps.html)
[http://docs.oracle.com/javase/6/ docs/technotes/tools/share/jmap.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)

# c# - C# 请求网页失败但使用 Web 浏览器成功（仔细检查了标题和 cookie）

> ID：10780153
> 
> 赞同：2
> 
> 时间：2012-05-28T06:20:53.060
> 
> 标签：c#, webrequest

我的朋友正在使用 C# 编写一个用于请求网页的简单程序。但是，他在尝试请求指定网页时遇到了问题。他已经尝试在请求中设置所有的标头和cookie，但仍然出现超时异常。示例网页是[https://my.ooma.com](https://my.ooma.com)

这是代码：

```
string url = "https://my.ooma.com";
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Timeout = 30000;
request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5";
request.Method = "GET";
request.CookieContainer = new CookieContainer();
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
request.Headers.Add("Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3");
request.Headers.Add("Accept-Encoding:gzip,deflate,sdch");
request.Headers.Add("Accept-Language:en-US,en;q=0.8");
request.KeepAlive = true;                 

WebResponse myResponse = request.GetResponse();
StreamReader sr = new StreamReader(myResponse.GetResponseStream());
string result = sr.ReadToEnd();
sr.Close();
myResponse.Close(); 
```

所有标题与使用 Chrome 浏览网页时相同。而且他没有看到使用 Chrome 开发者工具设置的任何 cookie。有人可以使用 C# 成功请求页面吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:52:20.823

对不起，来晚了。以下代码片段应该可以正常工作。我还尝试使用包含“getodds.xgi”的旧网址，它也运行良好。服务器对仅使用安全超文本传输​​协议 (HTTPS) 方案的连接使用安全套接字层 (SSL) 协议。

如果它们只是为了获得响应，则不需要设置任何 UserAgent 或 Header。

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
WebRequest request = WebRequest.Create("http://my.ooma.com/");
string htmlResponse = string.Empty;
using (WebResponse response = request.GetResponse())
{
     using (StreamReader reader = new StreamReader(response.GetResponseStream()))
     {
         htmlResponse = reader.ReadToEnd();
         reader.Close();
     }
     response.Close();
} 
```

# c# - EF 4.1+ 可以在函数导入上生成可选参数吗？

> ID：10780155
> 
> 赞同：0
> 
> 时间：2012-05-28T06:21:09.497
> 
> 标签：c#, entity-framework, entity-framework-4.1

我有一个函数导入到具有几个可选 SQL 参数的 SQL Proc。

```
CREATE PROC dbo.SomeProc ( @mandatoryField INT, 
                           @optionalField1 INT = NULL, 
                           @optionalField2 DATETIME = NULL ... ) 
```

但是，在导入后，在我的 DbContext 上生成的方法上，EF 创建如下签名：

```
 public virtual ObjectResult<SomeType> SomeProc(int mandatoryField, 
                                                   Nullable<int> optionalField1, 
                                                   Nullable<DateTime> optionalField2, ...) 
```

这意味着当我调用 proc 时，我需要提供显式空值，从而导致代码繁琐：

```
context.SomeProc(valueOfMandatoryField, null, null, ...) 
```

有没有办法让 EF 在函数导入映射中使用 C# 可选参数（即使这意味着直接破解 SSDL / CSDL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:21:29.473

SSDL 和 CSDL 中的“Parameter”元素在创建“FunctionImport”时没有“DefaultValue”属性。我认为，做你想做的最简单的方法是为生成的上下文类编写自定义扩展方法：

```
public static class MyContext_Extensions
{
    public static ObjectResult<Nullable<global::System.Int32>> SomeProc(this MyContext context,
        Nullable<global::System.Int32> mandatoryField, 
        Nullable<global::System.Int32> optionalField1 = null, 
        Nullable<global::System.DateTime> optionalField2 = null)
    {
        return context.SomeProc(mandatoryField, optionalField1, optionalField2);
    }
} 
```

...或添加不带最后一个参数的重载（上下文类是部分的）以排除歧义：

```
public partial class MyContext
{
    public ObjectResult<Nullable<global::System.Int32>> SomeProc(
        Nullable<global::System.Int32> mandatoryField,
        Nullable<global::System.Int32> optionalField1 = null)
    {
        return this.SomeProc(mandatoryField, optionalField1, null);
    }
} 
```

...或者如果您使用 POCO 实体生成器，请修改 T4 模板。

# java - Java 中的 ISO-8859-1 到 UTF-8

> ID：10780156
> 
> 赞同：1
> 
> 时间：2012-05-28T06:21:11.017
> 
> 标签：java, encoding, character-encoding

包含哈瓦那 (UTF-8) 的 XML 被发送到服务 A。

服务 A 将其发送给服务 B。

该字符串被编码为 å“ˆç”¦é‚£ (ISO-8859-1)。

我如何将它编码回哈瓦那？考虑到 Java 中的所有字符串都是 UTF-16。服务 B 必须将其比较为哈瓦那而不是 å“ˆç”¦é‚£。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:29:02.377

当您读取文本文件时，您必须使用用于创建文件的实际编码来读取它。如果您指定适当的编码，您将在内存中获得正确的字符。因此，如果相同的文件（语义上）存在于两个版本（UTF-8 编码和 ISO-8859-1）中，则使用 UTF-8 读取第一个文件，使用 ISO-8859-1 读取第二个文件将导致完全相同内存中的字符。

只有首先在 ISO-8859-1 中对文件进行编码是有意义的，上述情况才是正确的。UTF-8 能够存储每个 unicode 字符。但 ISO-8859-1 只能编码一小部分 unicode 字符（西方语言字符）。您发布的字符在我看来就像中文，而且我认为在 ISO-8859-1 中对它们进行编码甚至都不可能丢失所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T07:36:10.557

我认为您误诊了问题：

> 包含哈瓦那 (UTF-8) 的 XML 被发送到服务 A。

好的 ...

> 服务 A 将其发送给服务 B。

好的 ...

> 该字符串被转换为 å“ˆç”¦é‚£ (ISO-8859-1)。

这是不正确的。该字符串尚未“转换”。相反，它是用错误的字符编码解码的。具体来说，它看起来很像采用 UTF-8 编码的字节，并假设它们是 ISO-8859-1 编码的，并相应地对其进行解码。

你能解开这个吗？这取决于错误解码首先发生的位置。如果它发生在服务 B 中，那么您应该能够将数据源重新标记为 UTF-8，然后正确解码。另一方面，如果第一个错误解码发生在服务 A 中，那么您可能会很不走运。错误的解码可能会导致数据丢失，因为无法识别的代码会被其他字符替换。如果发生这种情况，原始数据将永远消失。

无论哪种情况，解决此问题的最佳方法是找出混淆了错误字符编码的原因，然后修复它。也许需要修复 XML 以指定字符集/编码。或许，需要更正传输机制（例如 HTTP 请求或响应）以包含正确的文档编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:34:10.100

使用 writer 和 reader 编码/解码您的输入/输出流：

```
String yourText = "...";
InputStream yourInputStream = ...;
Writer out = new OutputStreamWriter(youInputStream, "UTF-8");

out.write(yourText); 
```

读者也一样。

# lua - 在 Corona SDK 中用颜色填充多边形形状

> ID：10780158
> 
> 赞同：0
> 
> 时间：2012-05-28T06:21:17.100
> 
> 标签：lua, coronasdk

我需要在 Corona SDK 中绘制填充特殊颜色的形状。我正在尝试绘制矢量图，其中的形状将像建筑物一样。问题是 display.newLine() 重新调整的对象没有 setFillColor() 方法。因此，矢量形状是空的（我通过它看到背景），只能通过 line:setColor() 更改笔触颜色。如何用颜色填充多边形形状？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:54:24.173

有一些多边形填充算法。

在这里阅读：http: [//alienryderflex.com/polygon_fill/](http://alienryderflex.com/polygon_fill/) http://www.siggraph.org/education/materials/HyperGraph/scanline/outprims/polygon6.htm

代码交换中有一个很好的实现！ [http://developer.anscamobile.com/code/polygon-fill-and-point-polygon-detection](http://developer.anscamobile.com/code/polygon-fill-and-point-polygon-detection)

# c++ - 如何将特定字体提及为 Windows 中特定 unicode 值的默认字体？

> ID：10780161
> 
> 赞同：3
> 
> 时间：2012-05-28T06:21:47.313
> 
> 标签：c++, winapi, unicode, fonts

我正在使用 c++ 制作一个 win32 应用程序。使用默认字体时，系统会负责显示非英文符号，例如印地语中的字符。但是，对于一些特殊符号，比如印度卢比符号（₹），它只显示一个正方形（我认为表示当前符号无法显示）。我已经安装了能够显示符号的 Rupakara 字体。
我想知道有什么方法可以提到，如果符号来自货币范围，我希望使用 Rupakara 字体，否则使用默认系统字体。因此，外观将是无论用户键入什么，他都会获得相同的正确符号。我知道我可以单独检查值是否在该范围内，但我希望有一个 API 调用将其设置为在此范围内使用此字体，因为我稍后也可以使用它为不同范围设置其他字体。
请让我知道是否需要任何进一步的详细信息，或者是否有其他方法可以做到这一点，而无需明确检查每个字符所属的范围并设置相同的字体。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:57:38.160

Microsoft Windows*不* [替代字体](http://en.wikipedia.org/wiki/Font_substitution)。

您的选择是：

1.  编辑您当前使用的字体并在此处合并此字符（例如使用 FontForge）。确保相关字体的许可证允许您这样做。
2.  使用进行字体替换的文本渲染引擎。这意味着您将无法使用内置的 Windows 功能，例如默认文本框和文本呈现功能。

# javascript - 使用 jQuery 查找唯一属性更新子值

> ID：10780162
> 
> 赞同：1
> 
> 时间：2012-05-28T06:21:49.330
> 
> 标签：javascript, jquery

我想更新以下内容：

```
<a data-fb="4dfsdgdsgsdfgsdfgcf08" class="fb-like" href="#">
<span class="like-icon">Likes:</span> 10</a> 
```

我希望使用从 Web 服务返回的结果来更新值“10”，我将结果存储在一个名为 fbNumber 的变量中。data-fb 属性是唯一的，所以我希望搜索它并更新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:24:40.297

一个简单的`.replace`似乎就足够了。您可以使用该方法获取当前内容`.html`，并将在其中找到的任何数字序列替换为您的新数字：

```
var fbNumber = 23;

$("a[data-fb='4dfsdgdsgsdfgsdfgcf08']").html(function(i,v){
    return v.replace( /([0-9]+)/, fbNumber );
});​​​​​ 
```

小提琴：http: [//jsfiddle.net/GbqJg/](http://jsfiddle.net/GbqJg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:24:41.057

```
$("[data-fb='4dfsdgdsgsdfgsdfgcf08']").html("<span class=\"like-icon\">Likes:</span> "+ fbNumber); 
```

# python - 如何在非默认的python版本上安装库模块

> ID：10780165
> 
> 赞同：1
> 
> 时间：2012-05-28T06:22:04.623
> 
> 标签：python

我默认有python 2.7和2.6，但我需要在python 2.6上安装一些模块。但默认情况下它安装在2.7上。知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:33:45.663

如果在安装包时显式调用 Python 2.6 Binary，它将安装到该实例。所以代替`python setup.py install`你会做`/path/to/python26 setup.py install`。

# android - 在 android 的 Facebook 墙上发布视频

> ID：10780172
> 
> 赞同：1
> 
> 时间：2012-05-28T06:22:40.957
> 
> 标签：android, facebook-graph-api

我只想从我的 android 应用程序将此视频发布到 Facebook 墙上。当用户在 facebook 上点击它时，该视频应该在线播放。我该怎么做？

我的代码：

```
byte[] data = null;
String dataPath = "My Video URL here";
String dataMsg = "Your video description here.";
Bundle param;
facebook = new Facebook(FB_APP_ID);
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
InputStream is = null;
try {
    is = new FileInputStream(dataPath);
    data = readBytes(is);
    param = new Bundle();
    param.putString("message", dataMsg);
    param.putByteArray("video", data);
    mAsyncRunner.request("me/videos", param, "POST", new fbRequestListener(), null);
}
catch (FileNotFoundException e) {
   e.printStackTrace();
}
catch (IOException e) {
   e.printStackTrace();
}

public byte[] readBytes(InputStream inputStream) throws IOException {
    // This dynamically extends to take the bytes you read.
    ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

    // This is storage overwritten on each iteration with bytes.
    int bufferSize = 1024;
    byte[] buffer = new byte[bufferSize];

    // We need to know how may bytes were read to write them to the byteBuffer.
    int len = 0;
    while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
    }

    // And then we can return your byte array.
    return byteBuffer.toByteArray();
} 
```

# iphone - 显示特定类型的最新 UIAlertView

> ID：10780178
> 
> 赞同：2
> 
> 时间：2012-05-28T06:23:22.717
> 
> 标签：iphone, ios, uialertview, uilocalnotification

给定：

在我的应用程序中有“n”（假设 A、B、C ......）数量的不同事件（预定的 UILocalNotification）。每个事件都将被重复触发，对于每个触发的事件，我想显示一个 UIAlertView。

目标 ：

对于每个事件，如果用户错过了之前的警报消息，则应该只向用户显示一个“最新的”UIAlertView。

例子：

我想安排以下药物

A 在上午 8:00、下午 2:00 和下午 6:00

B 在上午 9:00、下午 2:00 和晚上 7:00

和

C , D ......等等......

所以，如果我一整天都没有看到警报消息......晚上 8:00 PM ，应该有

只有“n”个警报消息，其中“n = 药物数量”。

显示为

A->“下午 6:00 吃药 A”

B->“晚上7:00吃药B”

提前致谢

--

阿努帕姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:34:10.197

如果没有看到您是如何启动警报的，很难准确地说出，但是在您显示警报的方法中，检查该事件的警报是否在屏幕上，如果是，则将其关闭。

# javascript - 下拉框逻辑，使用javascript进行加减

> ID：10780180
> 
> 赞同：0
> 
> 时间：2012-05-28T06:23:33.257
> 
> 标签：javascript, html

我只是想找出做某事的最佳方法。在我的页面上，我有 2 个下拉框和一个总文本字段。

当我从下拉框中选择一个选项时，我希望相应地更新总数，我认为到目前为止我已经这样做了，但是我没有考虑他们是否改变主意并再次更改相同的下拉框。

我的 HTML 页面看起来像这样

```
<body>
<div id = "form">
<form id = "test">
<p>
<label>Case:</label>
<select id="box1" onchange="code(1)">
  <option value="0.00">No Case - $0.00</option>
  <option value="300.00">Case 1 - $300.00</option>
  <option value="100.00">Case 2 - $100.00</option>
  <option value="600.00">Case 3 - $600.00</option>
  <option value="50.00">Case 4 - $50.00</option>
</select>

<label>Color:</label>
<select id="box2" onchange="code(2)">
    <option value="20.00">Red - $20.00</option>
    <option value="50.00">Green - $50.00</option>
</select>
<input type="text" name="cost" id="cost" onfocus="this.blur()"/>    
</p>
</form>
</div>
</body> 
```

我的 javascript 看起来像这样

```
function code(num){
var boxnum = "box"+num;

if (boxnum == "box1")
{
var b = document.getElementById("box1");
}
else if(boxnum == "box2")
{
var b = document.getElementById("box2");
}

var boxcost = b.options[b.selectedIndex].value;
var cost = document.getElementById('cost').value;
cost = parseFloat(cost) + parseFloat(boxcost)
document.getElementById('cost').value = cost;
} 
```

就目前而言，我可以从 box1 中选择案例 3，它会增加 600 美元，但如果我改变主意然后说没有案例，它只会在 600 中添加 0。

抱歉，如果它是一个非常明显的问题，只是整天都在努力让它工作并且有点脑死。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:49:22.330

您总是将当前成本单元添加到刚刚更改的任何值 - 无论哪个值更改，您都应该将这两个`box`值相加。

```
function code() {   // forget the parameter

    var box1 = document.getElementById('box1');
    var box2 = document.getElementById('box2');
    var cost = document.getElementById('cost');

    var total = parseFloat(box1.value) + parseFloat(box2.value);
    cost.value = total;
} 
```

不需要使用`selectedIndex`，直接使用选项的`value`属性即可。

[在http://jsfiddle.net/J4zyy/](http://jsfiddle.net/J4zyy/)工作演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:54:19.567

要做的事情是保留先前值的记录，以便您可以减去它。这需要在一个全局变量中，以便在函数调用之间进行维护。

从先前的零值开始，每次`select`更改时，减去先前的值并添加当前值。

```
var prevboxcost = 0;
function code(num){
    var boxnum = "box"+num;
    if (boxnum == "box1")
    {
    var b = document.getElementById("box1");
    }
    else if(boxnum == "box2")
    {
    var b = document.getElementById("box2");
    }

    var boxcost = parseFloat(b.options[b.selectedIndex].value);
    var cost = parseFloat(document.getElementById('cost').value);
    // do the addition but subtract the old value
    cost = cost + boxcost - prevboxcost;
    // now set prev variable so you can subtract it next time round
    prevboxcost = boxcost;
    document.getElementById('cost').value = cost;
} 
```

我可能会传递`this`给该函数，因为那是`select`元素本身，您不需要找到它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T06:46:11.020

如果我理解正确，您想根据所选列表值更新文本框值

```
<select id="box1">
<option value="0.00">No Case - $0.00</option>
<option value="300.00">Case 1 - $300.00</option>
<option value="100.00">Case 2 - $100.00</option>
<option value="600.00">Case 3 - $600.00</option>
<option value="50.00">Case 4 - $50.00</option>
</select>
<select id="box2">
<option value="20.00">Red - $20.00</option>
<option value="50.00">Green - $50.00</option>
</select>
<input type="text" name="cost" id="cost"/> 
```

你可以使用 Jquery 代码，我只是建议如果你在这里使用 jquery 会很容易

```
$('#box2').change(function(){
  total = parseInt($("#box1 option:selected").val())+parseInt($("#box2 option:selected").val());
$('#cost').val(total);
});
$('#box1').change(function(){
  $('#cost').val($("#box1 option:selected").val());
}); 
```

工作示例[jsfiddle](http://jsfiddle.net/fosterz/v8rBG/3/)

# matlab - MATLAB dct2/idct2 与 dctmtx

> ID：10780181
> 
> 赞同：2
> 
> 时间：2012-05-28T06:23:34.700
> 
> 标签：matlab, dct

在 MATLAB 中有两种计算 DCT 及其逆的替代方法。一个是`dct2`/ `idct2`，另一个是由 计算的变换矩阵`dctmtx`。为什么有一种基于矩阵乘法的替代方法`dctmtx`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:29:37.213

“如果 A 是正方形，则 A 的二维 DCT 可以计算为 D*A*D'。这种计算有时比使用 dct2 更快，尤其是在计算大量小 DCT 时，因为 D 需要只决定了一次。”

在哪里`D = dctmtx(n)`

来源： http: [//www.mathworks.com/help/toolbox/images/ref/dctmtx.html](http://www.mathworks.com/help/toolbox/images/ref/dctmtx.html)

# html - 用于解析 HTML 的 mxml 库

> ID：10780183
> 
> 赞同：1
> 
> 时间：2012-05-28T06:23:39.520
> 
> 标签：html, c

我想知道是否可以使用嵌入式库 mxml（它处理 XML 文件）来解析 HTML 文件？我说的是嵌入式 linux cgi 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:46:15.827

如果页面是`XHTML`格式 - 那么可能是。但如果它只是普通`HTML`的，那么可能不会 - 因为在 html 中可能有未封闭的元素，根据定义，这些元素是格式错误的 xml，因此 xml 解析器会对其进行咆哮。

# jquery - CSS主题对jquery更改无效

> ID：10780186
> 
> 赞同：0
> 
> 时间：2012-05-28T06:23:49.010
> 
> 标签：jquery, css, themes

我在 jquery 中使用 css 主题时遇到了一个非常奇怪的问题。

我在网页上应用了自定义 css 主题，页面看起来很棒。现在我已经使用 jquery 执行了一些操作。就像点击一个复选框一样，其他复选框被选中，一些被禁用。

奇怪的是，页面看起来还是一样的。也就是说，选中/禁用的复选框仍然具有与 jquery 操作之前相同的图像。

我的同事告诉我，我必须在每次 jquery 操作后应用 css 类。就像每次选中/取消选中复选框一样

是这样还是我做错了什么？我的印象是，一旦安装了主题，css 就会保持一致。

有什么建议么 ...

谢谢..

编辑 ：

代码很广泛，但我附上了 uniform-default.css 文件和用于应用的 js 文件。如果您需要更多代码，请告诉我。

```
/* Global Declaration */
div.selector, 
div.selector span, 
div.checker span,
div.radio span, 
div.uploader, 
div.uploader span.action,
div.button,
div.button span {
  background-image: url(../resources/images/sprite.png);
  background-repeat: no-repeat;
  -webkit-font-smoothing: antialiased;

}

.selector, 
.radio, 
.checker, 
.uploader,
.button, 
.selector *, 
.radio *, 
.checker *, 
.uploader *,
.button *{
  margin: 0;
  padding: 0;
}

/* INPUT & TEXTAREA */

input.text,
input.email, 
input.password,
textarea.uniform {
  padding: 2px;
  background:#fff url('../resources/images/bg-input-focus.png') repeat-x 0px 0px;
  background:#fff url('../resources/images/bg-input.png') repeat-x 0px 0px;
  border:1px solid #b7b7b7;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  outline: 0;
}

input.text:focus,
input.email:focus,
input.password:focus,
textarea.uniform:focus {
  -webkit-box-shadow: 0px 0px 4px rgba(0,0,0,0.3);
  -moz-box-shadow: 0px 0px 4px rgba(0,0,0,0.3);
  box-shadow: 0px 0px 4px rgba(0,0,0,0.3);
  border-color: #ababab;
  background:#fff url('../resources/images/bg-input-focus.png') repeat-x 0px 0px;
}
input.text[disabled], input.password[disabled], textarea.uniform[disabled], select[disabled]{color: #999; border:1px solid #dfdfdf;padding: 2px; background-color:#f3f3f3;}
/* SPRITES */

/* Select */

div.selector {
  background-position: -485px -130px;
  line-height: 26px;
  height: 26px;
}

div.selector span {
  background-position: right 0px;
  height: 26px;
  line-height: 26px;
}

div.selector select {
  /* change these to adjust positioning of select element */
  top: 0px;
  left: 0px;

}

div.selector:active, 
div.selector.active {
  background-position: -485px -156px;
}

div.selector:active span, 
div.selector.active span {
  background-position: right -26px;
}

div.selector.focus, div.selector.hover, div.selector:hover {
  background-position: -485px -182px;
}

div.selector.focus span, div.selector.hover span, div.selector:hover span {
  background-position: right -52px;
}

div.selector.focus:active,
div.selector.focus.active,
div.selector:hover:active,
div.selector.active:hover {
  background-position: -485px -208px;
}

div.selector.focus:active span,
div.selector:hover:active span,
div.selector.active:hover span,
div.selector.focus.active span {
  background-position: right -78px;
}

div.selector.disabled {
  background-position: -485px -234px;
}

div.selector.disabled span {
  background-position: right -104px;
}

/* Checkbox */

div.checker {
  width: 19px;
  height: 19px;
}

div.checker input {
  width: 19px;
  height: 19px;
}

div.checker span {
  background-position: 0px -260px;
  height: 19px;
  width: 19px;
}

div.checker:active span, 
div.checker.active span {
  background-position: -19px -260px;
}

div.checker.focus span,
div.checker:hover span {
  background-position: -38px -260px;
}

div.checker.focus:active span,
div.checker:active:hover span,
div.checker.active:hover span,
div.checker.focus.active span {
  background-position: -57px -260px;
}

div.checker span.checked {
  background-position: -76px -260px;
}

div.checker:active span.checked, 
div.checker.active span.checked {
  background-position: -95px -260px;
}

div.checker.focus span.checked,
div.checker:hover span.checked {
  background-position: -114px -260px;
}

div.checker.focus:active span.checked,
div.checker:hover:active span.checked,
div.checker.active:hover span.checked,
div.checker.active.focus span.checked {
  background-position: -133px -260px;
}

div.checker.disabled span,
div.checker.disabled:active span,
div.checker.disabled.active span {
  background-position: -152px -260px;
}

div.checker.disabled span.checked,
div.checker.disabled:active span.checked,
div.checker.disabled.active span.checked {
  background-position: -171px -260px;
}

/* Radio */

div.radio {
  width: 18px;
  height: 18px;
}

div.radio input {
  width: 18px;
  height: 18px;
}

div.radio span {
  height: 18px;
  width: 18px;
  background-position: 0px -279px;
}

div.radio:active span, 
div.radio.active span {
  background-position: -18px -279px;
}

div.radio.focus span, 
div.radio:hover span {
  background-position: -36px -279px;
}

div.radio.focus:active span,
div.radio:active:hover span,
div.radio.active:hover span,
div.radio.active.focus span {
  background-position: -54px -279px;
}

div.radio span.checked {
  background-position: -72px -279px;
}

div.radio:active span.checked,
div.radio.active span.checked {
  background-position: -90px -279px;
}

div.radio.focus span.checked, div.radio:hover span.checked {
  background-position: -108px -279px;
}

div.radio.focus:active span.checked, 
div.radio:hover:active span.checked,
div.radio.focus.active span.checked,
div.radio.active:hover span.checked {
  background-position: -126px -279px;
}

div.radio.disabled span,
div.radio.disabled:active span,
div.radio.disabled.active span {
  background-position: -144px -279px;
}

div.radio.disabled span.checked,
div.radio.disabled:active span.checked,
div.radio.disabled.active span.checked {
  background-position: -162px -279px;
}

/* Uploader */

div.uploader {
  background-position: 0px -297px;
  height: 28px;
}

div.uploader span.action {
  background-position: right -409px;
  height: 24px;
  line-height: 24px;
}

div.uploader span.filename {
  height: 24px;
  /* change this line to adjust positioning of filename area */
  margin: 2px 0px 2px 2px;
  line-height: 24px;
}

div.uploader.focus,
div.uploader.hover,
div.uploader:hover {
  background-position: 0px -353px;
}

div.uploader.focus span.action,
div.uploader.hover span.action,
div.uploader:hover span.action {
  background-position: right -437px;
}

div.uploader.active span.action,
div.uploader:active span.action {
  background-position: right -465px;
}

div.uploader.focus.active span.action,
div.uploader:focus.active span.action,
div.uploader.focus:active span.action,
div.uploader:focus:active span.action {
  background-position: right -493px;
}

div.uploader.disabled {
  background-position: 0px -325px;
}

div.uploader.disabled span.action {
  background-position: right -381px;
}

div.button {
  background-position: 0px -523px;
}

div.button span {
  background-position: right -643px;
}

div.button.focus,
div.button:focus,
div.button:hover,
div.button.hover {
  background-position: 0px -553px;
}

div.button.focus span,
div.button:focus span,
div.button:hover span,
div.button.hover span {
  background-position: right -673px; 
}

div.button.active,
div.button:active {
  background-position: 0px -583px;
}

div.button.active span,
div.button:active span {
  background-position: right -703px;
  color: #555;
}

div.button.disabled,
div.button:disabled {
  background-position: 0px -613px;
}

div.button.disabled span,
div.button:disabled span {
  background-position: right -733px;
  color: #bbb;
  cursor: default;
}

/* PRESENTATION */

/* Button */

div.button {
  height: 30px;
}

 ........... some more content here ......

div.selector span {
  padding: 0px 25px 0px 2px;
  cursor: pointer;
}

div.selector span {
  color: #666;
 /* width: 158px;*/
 text-align:left;
  text-shadow: 0 1px 0 #fff;
}

div.selector.disabled span {
  color: #bbb;
}

/* Checker */
div.checker {
 /* margin-right: 5px;*/
}

/* Radio */
div.radio {
  margin-right: 3px;
}

/* Uploader */
div.uploader {
  width: 190px;
  cursor: pointer;
}

div.uploader span.action {
  width: 85px;
  text-align: center;
  text-shadow: #fff 0px 1px 0px;
  background-color: #fff;
  font-size: 11px;
  font-weight: bold;
}

div.uploader span.filename {
  color: #777;
  width: 82px;
  border-right: solid 1px #bbb;
  font-size: 11px;
}

div.uploader input {
  width: 190px;
}

div.uploader.disabled span.action {
  color: #aaa;
}

div.uploader.disabled span.filename {
  border-color: #ddd;
  color: #aaa;
}
/*

CORE FUNCTIONALITY 

Not advised to edit stuff below this line
-----------------------------------------------------
*/

.selector, 
.checker, 
.button, 
.radio, 
.uploader {
  display: -moz-inline-box;
  display: inline-block;
  vertical-align: middle;
  zoom: 1;
  *display: inline;
}

.selector select:focus, .radio input:focus, .checker input:focus, .uploader input:focus {
  outline: 0;
}

/* Button */

div.button a,
div.button button,
div.button input {
  position: absolute;
}

div.button {
  cursor: pointer;
  position: relative;
}

div.button span {
  display: -moz-inline-box;
  display: inline-block;
  line-height: 1;
  text-align: center;
}

/* Select */

div.selector {
  position: relative;
  padding-left: 8px;
  overflow: hidden;
}

div.selector span {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

div.selector select {
  position: absolute;
  opacity: 0;
  filter: alpha(opacity:0);
  height: 25px;
  border: none;
  background: none;
}

/* Checker */

div.checker {
  position: relative;
}

div.checker span {
  display: -moz-inline-box;
  display: inline-block;
  text-align: center;
}

div.checker input {
  opacity: 0;
  filter: alpha(opacity:0);
  display: inline-block;
  background: none;
}

    /* Radio */

div.radio {
  position: relative;
}

div.radio span {
  display: -moz-inline-box;
  display: inline-block;
  text-align: center;
}

div.radio input {
  opacity: 0;
  filter: alpha(opacity:0);
  text-align: center;
  display: inline-block;
  background: none;
}

/* Uploader */

div.uploader {
  position: relative;
  overflow: hidden;
  cursor: default;
}

div.uploader span.action {
  float: left;
  display: inline;
  padding: 2px 0px;
  overflow: hidden;
  cursor: pointer;
}

div.uploader span.filename {
  padding: 0px 10px;
  float: left;
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: default;
}

div.uploader input {
  opacity: 0;
  filter: alpha(opacity:0);
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  float: right;
  height: 25px;
  border: none;
  cursor: default;    
    } 
```

**并且它的js附在下面**

```
(function($) {
  $.uniform = {
    options: {
      selectClass:   'selector',
      radioClass: 'radio',
      checkboxClass: 'checker',
      fileClass: 'uploader',
      filenameClass: 'filename',
      fileBtnClass: 'action',
      fileDefaultText: 'No file selected',
      fileBtnText: 'Browse',
      checkedClass: 'checked',
      focusClass: 'focus',
      disabledClass: 'disabled',
     // buttonClass: 'button',
      activeClass: 'active',
      hoverClass: 'hover',
      useID: true,
      idPrefix: 'uniform',
      resetSelector: false,
      autoHide: true
    },
    elements: []
  };

  if($.browser.msie && $.browser.version < 7){
    $.support.selectOpacity = false;
  }else{
    $.support.selectOpacity = true;
  }

  $.fn.uniform = function(options) {

    options = $.extend($.uniform.options, options);

    var el = this;
    //code for specifying a reset button
    if(options.resetSelector != false){
      $(options.resetSelector).mouseup(function(){
        function resetThis(){
          $.uniform.update(el);
        }
        setTimeout(resetThis, 10);
      });
    }

    function doInput(elem){
      $el = $(elem);
      $el.addClass($el.attr("type"));
      storeElement(elem);
    }

    function doTextarea(elem){
      $(elem).addClass("uniform");
      storeElement(elem);
    }

     function doSelect(elem){
      var $el = $(elem);

      var divTag = $('<div />'),
          spanTag = $('<span />');

      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.selectClass);

      if(options.useID && elem.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+elem.attr("id"));
      }

      var selected = elem.find(":selected:first");
      if(selected.length == 0){
        selected = elem.find("option:first");
      }
      spanTag.html(selected.html());

      elem.css('opacity', 0);
      elem.wrap(divTag);
      elem.before(spanTag);

      //redefine variables
      divTag = elem.parent("div");
      spanTag = elem.siblings("span");

      elem.bind({
        "change.uniform": function() {
          spanTag.text(elem.find(":selected").html());
          divTag.removeClass(options.activeClass);
        },
        "focus.uniform": function() {
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function() {
          divTag.removeClass(options.focusClass);
          divTag.removeClass(options.activeClass);
        },
        "mousedown.uniform touchbegin.uniform": function() {
          divTag.addClass(options.activeClass);
        },
        "mouseup.uniform touchend.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "click.uniform touchend.uniform": function(){
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        },
        "keyup.uniform": function(){
          spanTag.text(elem.find(":selected").html());
        }
      });

      //handle disabled state
      if($(elem).attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }
      $.uniform.noSelect(spanTag);

      storeElement(elem);

    }

    function doCheckbox(elem){
      var $el = $(elem);

      var divTag = $('<div />'),
          spanTag = $('<span />');

      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.checkboxClass);

      //assign the id of the element
      if(options.useID && elem.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+elem.attr("id"));
      }

      //wrap with the proper elements
      $(elem).wrap(divTag);
      $(elem).wrap(spanTag);

      //redefine variables
      spanTag = elem.parent();
      divTag = spanTag.parent();

      //hide normal input and add focus classes
      $(elem)
      .css("opacity", 0)
      .bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        },
        "click.uniform touchend.uniform": function(){
          if(!$(elem).attr("checked")){
            //box was just unchecked, uncheck span
            spanTag.removeClass(options.checkedClass);
          }else{
            //box was just checked, check span.
            spanTag.addClass(options.checkedClass);
          }
        },
        "mousedown.uniform touchbegin.uniform": function() {
          divTag.addClass(options.activeClass);
        },
        "mouseup.uniform touchend.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        }
      });

      //handle defaults
      if($(elem).attr("checked")){
        //box is checked by default, check our box
        spanTag.addClass(options.checkedClass);
      }

      //handle disabled state
      if($(elem).attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }

      storeElement(elem);
    }

    function doRadio(elem){
      var $el = $(elem);

      var divTag = $('<div />'),
          spanTag = $('<span />');

      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.radioClass);

      if(options.useID && elem.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+elem.attr("id"));
      }

      //wrap with the proper elements
      $(elem).wrap(divTag);
      $(elem).wrap(spanTag);

      //redefine variables
      spanTag = elem.parent();
      divTag = spanTag.parent();

      //hide normal input and add focus classes
      $(elem)
      .css("opacity", 0)
      .bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        },
        "click.uniform touchend.uniform": function(){
          if(!$(elem).attr("checked")){
            //box was just unchecked, uncheck span
            spanTag.removeClass(options.checkedClass);
          }else{
            //box was just checked, check span
            var classes = options.radioClass.split(" ")[0];
            $("." + classes + " span." + options.checkedClass + ":has([name='" + $(elem).attr('name') + "'])").removeClass(options.checkedClass);
            spanTag.addClass(options.checkedClass);
          }
        },
        "mousedown.uniform touchend.uniform": function() {
          if(!$(elem).is(":disabled")){
            divTag.addClass(options.activeClass);
          }
        },
        "mouseup.uniform touchbegin.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform touchend.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        }
      });

      //handle defaults
      if($(elem).attr("checked")){
        //box is checked by default, check span
        spanTag.addClass(options.checkedClass);
      }
      //handle disabled state
      if($(elem).attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }

      storeElement(elem);

    }

    function doFile(elem){
      //sanitize input
      var $el = $(elem);

      var divTag = $('<div />'),
          filenameTag = $('<span>'+options.fileDefaultText+'</span>'),
          btnTag = $('<span>'+options.fileBtnText+'</span>');

      if(!$el.css("display") == "none" && options.autoHide){
        divTag.hide();
      }

      divTag.addClass(options.fileClass);
      filenameTag.addClass(options.filenameClass);
      btnTag.addClass(options.fileBtnClass);

      if(options.useID && $el.attr("id") != ""){
        divTag.attr("id", options.idPrefix+"-"+$el.attr("id"));
      }

      //wrap with the proper elements
      $el.wrap(divTag);
      $el.after(btnTag);
      $el.after(filenameTag);

      //redefine variables
      divTag = $el.closest("div");
      filenameTag = $el.siblings("."+options.filenameClass);
      btnTag = $el.siblings("."+options.fileBtnClass);

      //set the size
      if(!$el.attr("size")){
        var divWidth = divTag.width();
        //$el.css("width", divWidth);
        $el.attr("size", divWidth/10);
      }

      //actions
      var setFilename = function()
      {
        var filename = $el.val();
        if (filename === '')
        {
          filename = options.fileDefaultText;
        }
        else
        {
          filename = filename.split(/[\/\\]+/);
          filename = filename[(filename.length-1)];
        }
        filenameTag.text(filename);
      };

      // Account for input saved across refreshes
      setFilename();

      $el
      .css("opacity", 0)
      .bind({
        "focus.uniform": function(){
          divTag.addClass(options.focusClass);
        },
        "blur.uniform": function(){
          divTag.removeClass(options.focusClass);
        },
        "mousedown.uniform": function() {
          if(!$(elem).is(":disabled")){
            divTag.addClass(options.activeClass);
          }
        },
        "mouseup.uniform": function() {
          divTag.removeClass(options.activeClass);
        },
        "mouseenter.uniform": function() {
          divTag.addClass(options.hoverClass);
        },
        "mouseleave.uniform": function() {
          divTag.removeClass(options.hoverClass);
          divTag.removeClass(options.activeClass);
        }
      });

      // IE7 doesn't fire onChange until blur or second fire.
      if ($.browser.msie){
        // IE considers browser chrome blocking I/O, so it
        // suspends tiemouts until after the file has been selected.
        $el.bind('click.uniform.ie7', function() {
          setTimeout(setFilename, 0);
        });
      }else{
        // All other browsers behave properly
        $el.bind('change.uniform', setFilename);
      }

      //handle defaults
      if($el.attr("disabled")){
        //box is checked by default, check our box
        divTag.addClass(options.disabledClass);
      }

      $.uniform.noSelect(filenameTag);
      $.uniform.noSelect(btnTag);

      storeElement(elem);

    }

    $.uniform.restore = function(elem){
      if(elem == undefined){
        elem = $($.uniform.elements);
      }

      $(elem).each(function(){
        if($(this).is(":checkbox")){
          //unwrap from span and div
          $(this).unwrap().unwrap();
        }else if($(this).is("select")){
          //remove sibling span
          $(this).siblings("span").remove();
          //unwrap parent div
          $(this).unwrap();
        }else if($(this).is(":radio")){
          //unwrap from span and div
          $(this).unwrap().unwrap();
        }else if($(this).is(":file")){
          //remove sibling spans
          $(this).siblings("span").remove();
          //unwrap parent div
          $(this).unwrap();
        }else if($(this).is("button, :submit, :reset, a, input[type='button']")){
          //unwrap from span and div
          $(this).unwrap().unwrap();
        }

        //unbind events
        $(this).unbind(".uniform");

        //reset inline style
        $(this).css("opacity", "1");

        //remove item from list of uniformed elements
        var index = $.inArray($(elem), $.uniform.elements);
        $.uniform.elements.splice(index, 1);
      });
    };

    function storeElement(elem){
      //store this element in our global array
      elem = $(elem).get();
      if(elem.length > 1){
        $.each(elem, function(i, val){
          $.uniform.elements.push(val);
        });
      }else{
        $.uniform.elements.push(elem);
      }
    }

    //noSelect v1.0
    $.uniform.noSelect = function(elem) {
      function f() {
       return false;
      };
      $(elem).each(function() {
       this.onselectstart = this.ondragstart = f; // Webkit & IE
       $(this)
        .mousedown(f) // Webkit & Opera
        .css({ MozUserSelect: 'none' }); // Firefox
      });
     };

    $.uniform.update = function(elem){
      if(elem == undefined){
        elem = $($.uniform.elements);
      }
      //sanitize input
      elem = $(elem);

      elem.each(function(){
        //do to each item in the selector
        //function to reset all classes
        var $e = $(this);

        if($e.is("select")){
          //element is a select
          var spanTag = $e.siblings("span");
          var divTag = $e.parent("div");

          divTag.removeClass(options.hoverClass+" "+options.focusClass+" "+options.activeClass);

          //reset current selected text
          spanTag.html($e.find(":selected").html());

          if($e.is(":disabled")){
            divTag.addClass(options.disabledClass);
          }else{
            divTag.removeClass(options.disabledClass);
          }

        }else if($e.is(":checkbox")){
          //element is a checkbox
          var spanTag 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:29:01.230

您是否在 JS 之前检查了 CSS 是否已加载？

```
<head>
  <!-- import css -->
  <!-- import jquery -->
</head>
<body>
<!--
Your awesome page
-->
...
...
<!-- JS affecting the DOM should be called after all the elements gets rendered -->
</body> 
```

# iphone - UITableViewCell子类中的UITextView，如何保持数据与视图分离

> ID：10780189
> 
> 赞同：0
> 
> 时间：2012-05-28T06:24:01.167
> 
> 标签：iphone, ios, model-view-controller

所以我不知道遵循 MVC 的最佳方式是什么。与地址簿应用程序类似，我想要一个能够编辑笔记的 UITableViewcell。我想我会用 UITableViewCell 子类中的 UITextView 来做到这一点。我的子类只是将其作为一个属性，以及一个标有“注释”的标签。我可以看到一些我需要考虑的用例，

1）当他们完成编辑并点击外部或点击返回。
2）当文本超出单元格的大小时，我需要调整单元格的大小。

因为我的 UITextView 在 IB 中，有没有一种好方法来定义 UITextView 的委托方法，因为我的 UITableView 在另一个 ViewController 子类中？比如我如何将这些信息传回？

或者，最好在代码中创建我的 UITableViewCell 子类，因为它只是几个项目，所以我的所有委托和调整代码都在视图控制器类中完成？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:53:25.557

文本字段编辑完成后，您可以将其值存储在控制器中的某个字典中。您可以使用单元格的 indexPath 作为此字典中的键。这样，您就不会因出列单元格而丢失数据。

要调整单元格大小，您必须调用 reloadData 方法并更改整个 tableView 的 rowHeight 属性或实现 tableView:heightForRowAtIndexPath: 委托方法以将所需的行高设置为当前单元格。

我从 iOS 3.1 开始就没有使用 UIKit，所以我的答案的第二部分可能已经过时了，但我希望它会对你有所帮助 =)

# jquery - 如何将两个参数传递给jsonpCallback

> ID：10780190
> 
> 赞同：0
> 
> 时间：2012-05-28T06:24:04.820
> 
> 标签：jquery, json

嗨 下面是通过 jquery 中的 ajax 调用我调用函数 1:"setEmailAFriendCount" 的代码，我们在其中发送具有 json 数据类型的变量，但我想从 ajax 调用调用相同的函数但需要向它发送额外的字符串参数.

很迷茫，怎么寄。磷

```
function getEmailAFriendCountDynamic(ArticleURL, Id) {
        alert('Hi');
        var location = ArticleURL;
        if (location.indexOf('?') >= 0) {
            location = location.substring(0, location.indexOf('?'));
        }

        $.ajax({
            url: 'http://contactimporter.mercola.com/EmailArticleCount.aspx?url=' + location,
            dataType: "jsonp",
            jsonpCallback: "setEmailAFriendCount"
        });
    }
Function 1:

function setEmailAFriendCount(json) {
        $('#MyTextbox').text(json.count);
    }
Function 2:
    function setEmailAFriendCount(json,emailtofrdclientid) {
        $('#' + emailtofrdclientid + '').text(" : " + json.count);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:43:23.200

```
function getEmailAFriendCountDynamic(ArticleURL, Id) {
        alert('Hi');
        var location = ArticleURL,
            self = this;
        if (location.indexOf('?') >= 0) {
            location = location.substring(0, location.indexOf('?'));
        }

        $.ajax({
            url: 'http://contactimporter.mercola.com/EmailArticleCount.aspx?url=' + location,
            dataType: "jsonp",
            jsonpCallback: "setEmailAFriendCount",
            success: function(jData) {
                 self.setEmailAFriendCount(jData, Id);
              }
        });
    }

Function 1:

function setEmailAFriendCount(json) {
        $('#MyTextbox').text(json.count);
    }
Function 2:
    function setEmailAFriendCount(json,emailtofrdclientid) {
        $('#' + emailtofrdclientid + '').text(" : " + json.count);
    } 
```

我认为这段代码就是你要找的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:28:14.070

回调参数是在服务器端创建的。如果您想返回多个参数，则返回一个**json**对象，该对象具有您需要的多个参数。返回应该获取该对象并正确解析它。为了向服务器发送一个多参数，发送一个 json 对象并在`data`属性下传递它。

```
$.ajax({
  type: "[GET/POST]",
  url: "[your url]",
  data: { name: "John", location: "Boston" }, //your object here
  success: function(data) {
    //parse your json return data here
  }
}); 
```

更多关于[jQuery ajax](http://api.jquery.com/jQuery.ajax/)的信息在这里。

# proxy - 如何在浏览器的代理中使用带有“自动代理配置 URL”（即 .pac 文件）的 jmeter Http 代理服务器进行记录

> ID：10780193
> 
> 赞同：1
> 
> 时间：2012-05-28T06:24:21.903
> 
> 标签：proxy, jmeter

在 Jmeter 中，我无法从我们公司的代理服务器记录任何外部网站。如果我不知道如何在 Jmeter 中配置它以进行成功录制，我必须在浏览器中使用选项“自动代理配置 URL”（即一个 .pac 文件）。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:26:32.237

PAC 字段包含由浏览器执行的 javascript，以决定他们想要使用哪个代理 URL。JMeter 不是浏览器，因此它不会运行此代码。解决方案是简单地解析这个脚本返回哪个代理并将这个值直接输入到 JMeter 中，您可以使用大多数浏览器上的开发工具来执行此操作，或者只是询问 IT 部门。那个维护告诉你直接地址的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:37:39.910

1.  与Jmeter 邮件存档中[的解决方案相同的问题。](http://jmeter.512774.n5.nabble.com/Newbie-Not-able-to-record-the-script-under-corporate-proxy-td5139668.html)
2.  [Jmeter：使用代理服务器](http://jmeter.apache.org/usermanual/get-started.html#proxy_server)。

# sql-server - 使用 GROUP BY 时需要从表中返回所有列

> ID：10780195
> 
> 赞同：5
> 
> 时间：2012-05-28T06:24:31.813
> 
> 标签：sql-server, tsql

我有一张桌子，假设它有四列 `Id, Name, Cell_no, Cat_id`。我需要返回计数`Cat_id`大于的所有列`1`。

该组应该在`Cell_no`和上完成`Name`。到目前为止我做了什么..

```
select Cell_no, COUNT(Cat_id)
from TableName
group by Cell_Number
having COUNT(Cat_id) > 1 
```

但我需要的是这样的东西。

```
select * 
from TableName
group by Cell_Number
having COUNT(Cat_id) > 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:39:48.620

Pratik's answer is good but rather than using the `IN` operator (which only works for single values) you will need to `JOIN` back to the result set like this

```
SELECT t.* 
FROM tableName t
INNER JOIN      
    (SELECT Cell_no, Name 
    FROM TableName
    GROUP BY Cell_no , Name
    HAVING COUNT(Cat_id) > 1) filter
    ON t.Cell_no = filter.Cell_no AND t.Name = filter.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:28:50.553

您只需要修改您的查询，如下所示 -

```
select * from tableName where (Cell_no, Name) in (
          select Cell_no, Name from TableName
           Group by Cell_no , Name
           having COUNT(Cat_id) > 1
           ) 
```

如问题所问，您想按 Cell_no 和 Name 进行分组。如果是这样，您需要更改对按列分组的查询并选择部分..正如我所提到的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:32:42.540

这个版本只需要对数据进行一次传递：

```
SELECT *
FROM   (SELECT a.*
              ,COUNT(cat_id) OVER (PARTITION BY cell_no)
               AS count_cat_id_not_null
        FROM   TableName a)
WHERE  count_cat_id_not_null > 1; 
```

# joomla - 需要joomla1.5中的统计模块

> ID：10780200
> 
> 赞同：0
> 
> 时间：2012-05-28T06:24:50.253
> 
> 标签：joomla, popup, joomla1.5, visitor-statistic

我需要一个模块来显示今天、昨天、星期、月份和总数的详细访问统计信息，这些统计信息可以在鼠标悬停事件时显示为弹出窗口。我的 joomla 版本是 1.5 。有什么可以做的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:58:07.267

我们的服务器上有几十个 Joomla1.5 站点，我们在[j4age](http://www.ecomize.com/en/j4age.html)或[Joomla Extensions](http://extensions.joomla.org/extensions/site-management/analytics/site-analytics/11750)上找到的与您所要求的相似的最全面的统计数据。它为任何数量的客户电话会议节省了时间。我无法谈论弹出窗口是如何工作的，因为我们已经将它与我们所有的其他统计数据集成在一起，但是数据就在那里，并且是一种很好的格式，可以与 mootools 或 jQuery 等用于数据弹出窗口的东西一起使用。

# cakephp - 在 cakephp 中的 Paypal 中导入 HttpSocket

> ID：10780204
> 
> 赞同：0
> 
> 时间：2012-05-28T06:25:17.580
> 
> 标签：cakephp, paypal, paypal-ipn

嗯，这就是我得到的。我这里有一行代码在我的 CakePHP-paypal 集成中导入 HttpSocket。

它位于我的 /app/PaypalIpn/Model/DataSource/PaypalIpnSource.php 中。这里是：

```
function __construct(){
    if (!class_exists('HttpSocket')) {
        if(App::uses('HttpSocket', 'Network/Http')){
            $this->log('http socket imported','paypal');    
        }
    }
        else{
            $this->log('http socket not imported','paypal');
        }
    $this->Http = new HttpSocket();
  } 
```

顺便说一句，我的 HttpSocket.php 位于此处：

```
C:\xampp\htdocs\wifidrivescanportal\lib\Cake\Network\Http\HttpSocket.php 
```

所以每次我尝试在我的 HttpSocket.php 中访问这个函数时：

```
public function post($uri = null, $data = array(), $request = array()) {
     //$this->log('entered post in http socket','paypal');
     $request = Set::merge(array('method' => 'POST', 'uri' => $uri, 'body' => $data), $request);
     return $this->request($request);
} 
```

通过我的 PaypalIpnSource.php 中的这行代码：

```
function isValid($data){
    // .... other codes
    $response = $this->Http->post($server, $data);
    return $response;
} 
```

什么都没发生。尽管我表示它在 /app/PaypalIpn/Model/DataSource/PaypalIpnSource.php 中的某些部分特别是在某些部分中记录了某些内容，但它没有记录任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:38:38.797

调试 HttpSocket 类中的原始响应数据。在 1.3 中，我过去遇到过几个案例，我在这门课上遇到了同样的问题。

在此行之后尝试[http://api13.cakephp.org/view_source/http-socket/#l-292](http://api13.cakephp.org/view_source/http-socket/#l-292) debug($this->request['raw']) 。

原始数据可能包含 1.3 类无法获取的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T00:37:32.030

好吧，这就是我所做的这些代码行

```
function isValid($data){
    // .... other codes
    $response = $this->Http->post($server, $data);
    return $response;
} 
```

我是这样做的：

```
function isValid($data){
    // .... other codes
    return $this->Http->post($server, $data);
} 
```

不太确定差异，但它是这样解决的。一旦我完成了在 cakephp 中的 paypal 集成，我会确保我会为像我这样的初学者提供教程。希望我能以这种方式提供帮助。我的下一个目标是使用 ppcrypto 进行加密。

# macos - 为什么 TrueType 字体在 Mac 上只使用“二次曲线”？

> ID：10780207
> 
> 赞同：1
> 
> 时间：2012-05-28T06:25:30.127
> 
> 标签：macos, cocoa, core-graphics, core-text, truetype

我使用下面的代码提取了 TrueType 字体的路径元素。

问题是由 描述的曲线`element->type`只有`kCGPathElementAddQuadCurveToPoint`2 个点（低质量）的类型。为什么没有任何元素使用更高质量的`kCGPathElementAddCurveToPoint`类型（3分）？

有人有想法吗？

```
int count = 0;
void applierFunction(void *info, const CGPathElement *element)
{
    int point_count;
    switch (element->type)
    {
        case kCGPathElementMoveToPoint:
            point_count = 1;
            break;
        case kCGPathElementAddLineToPoint:
            point_count = 1;
            break;
        case kCGPathElementAddQuadCurveToPoint:
            point_count = 2;
            break;
        case kCGPathElementAddCurveToPoint:
            point_count = 3;
            break;
        case kCGPathElementCloseSubpath:
            point_count = 0;
            break;
    }
    count+=point_count;
    printf("%u.:\n", count);
    for (int i = 0; i<point_count; i++) {
        switch (element->type) {
            case kCGPathElementMoveToPoint:
                printf("kCGPathElementMoveToPoint\n");
                break;
            case kCGPathElementAddLineToPoint:
                printf("kCGPathElementAddLineToPoint\n");
                break;
            case kCGPathElementAddQuadCurveToPoint:
                printf("kCGPathElementAddQuadCurveToPoint\n");
                break;
            case kCGPathElementAddCurveToPoint:
                printf("kCGPathElementAddCurveToPoint\n");
                break;
            case kCGPathElementCloseSubpath:
                printf("kCGPathElementCloseSubpath\n");
                break;
            default:
                printf("unknown path type\n");
        }
    }
}

void extractStringPathElements()
{
    CFStringRef str = CFSTR("Q");
    CFStringRef strFont = CFSTR("Arial");
    CTFontRef font = CTFontCreateWithName(strFont, 500, NULL);
    CFStringRef keys[] = {kCTFontAttributeName};
    CFTypeRef values[] = {font};
    CFDictionaryRef attr = CFDictionaryCreate(NULL, (const void **)&keys,
                                                (const void **)&values, sizeof(keys) / sizeof(keys[0]),
                                                &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
    CFAttributedStringRef attrString =
    CFAttributedStringCreate(NULL, str, attr);
    CFRelease(attr);
    CTLineRef line = CTLineCreateWithAttributedString(attrString);
    CFArrayRef runs = CTLineGetGlyphRuns(line);
    long runCount = CFArrayGetCount(runs);
    for (int ri = 0; ri < runCount; ri++) {
        ::CTRunRef run = (::CTRunRef)CFArrayGetValueAtIndex(runs, ri);
        long glyphCount = CTRunGetGlyphCount(run);
        const unsigned short *glyphs = CTRunGetGlyphsPtr(run);
        for (int gi = 0; gi < glyphCount; gi++) {
            ::CGPathRef path = CTFontCreatePathForGlyph(font, glyphs[gi], NULL);
            CGPathApply(path, 0, applierFunction);
            printf("glyph %u has %u elements.\n", glyphs[gi], count);
            CGPathRelease(path);
        }
    }
    CFRelease(line);
    CFRelease(attrString);
    CFRelease(font);

}

int main (int argc, const char * argv[])
{
    extractStringPathElements();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T06:39:40.977

TrueType 没有三次贝塞尔曲线。它仅限于二次贝塞尔曲线。TrueType 就是这样指定的。

# hadoop - 将数据节点添加到 hadoop 集群

> ID：10780208
> 
> 赞同：5
> 
> 时间：2012-05-28T06:25:43.407
> 
> 标签：hadoop

当我通过 using 启动 hadoopnode1 时`start-all.sh`，它成功地启动了 master 和 slave 上的服务（请参见 slave 的 jps 命令输出）。但是当我尝试在管理屏幕中查看活动节点时，从节点没有出现。即使我`hadoop fs -ls /`从 master 运行命令它运行完美，但从 salve 它显示错误消息

```
@hadoopnode2:~/hadoop-0.20.2/conf$ hadoop fs -ls /
12/05/28 01:14:20 INFO ipc.Client: Retrying connect to server: hadoopnode1/192.168.1.120:8020\. Already tried 0 time(s).
12/05/28 01:14:21 INFO ipc.Client: Retrying connect to server: hadoopnode1/192.168.1.120:8020\. Already tried 1 time(s).
12/05/28 01:14:22 INFO ipc.Client: Retrying connect to server: hadoopnode1/192.168.1.120:8020\. Already tried 2 time(s).
12/05/28 01:14:23 INFO ipc.Client: Retrying connect to server: hadoopnode1/192.168.1.120:8020\. Already tried 3 time(s).
.
.
.
12/05/28 01:14:29 INFO ipc.Client: Retrying connect to server: hadoopnode1/192.168.1.120:8020\. Already tried 10 time(s). 
```

看起来从属节点（hadoopnode2）无法找到/连接主节点（hadoopnode1）

请指出我缺少什么？

这是主节点和从节点的设置 - PS - 运行相同版本的 Linux 和 Hadoop 和 SSH 的主节点和从节点运行良好，因为我可以从主节点启动从节点

主机（hadoopnode1）和从机（hadoopnode2）上的 core-site.xml、hdfs-site.xml 和 mapred-site.xml 的设置也相同

操作系统 - Ubuntu 10 Hadoop 版本 -

```
oop@hadoopnode1:~/hadoop-0.20.2/conf$ hadoop version
Hadoop 0.20.2
Subversion https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20 -r 911707
Compiled by chrisdo on Fri Feb 19 08:07:34 UTC 2010 
```

-- 主（hadoopnode1）

```
hadoop@hadoopnode1:~/hadoop-0.20.2/conf$ uname -a
Linux hadoopnode1 2.6.35-32-generic #67-Ubuntu SMP Mon Mar 5 19:35:26 UTC 2012 i686 GNU/Linux

hadoop@hadoopnode1:~/hadoop-0.20.2/conf$ jps
9923 Jps
7555 NameNode
8133 TaskTracker
7897 SecondaryNameNode
7728 DataNode
7971 JobTracker

masters -> hadoopnode1
slaves -> hadoopnode1
hadoopnode2 
```

--奴隶（hadoopnode2）

```
hadoop@hadoopnode2:~/hadoop-0.20.2/conf$ uname -a
Linux hadoopnode2 2.6.35-32-generic #67-Ubuntu SMP Mon Mar 5 19:35:26 UTC 2012 i686 GNU/Linux

hadoop@hadoopnode2:~/hadoop-0.20.2/conf$ jps
1959 DataNode
2631 Jps
2108 TaskTracker

masters - hadoopnode1

core-site.xml
hadoop@hadoopnode2:~/hadoop-0.20.2/conf$ cat core-site.xml
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
        <property>
                <name>hadoop.tmp.dir</name>
                <value>/var/tmp/hadoop/hadoop-${user.name}</value>
                <description>A base for other temp directories</description>
        </property>

        <property>
                <name>fs.default.name</name>
                <value>hdfs://hadoopnode1:8020</value>
                <description>The name of the default file system</description>
        </property>

</configuration>

hadoop@hadoopnode2:~/hadoop-0.20.2/conf$ cat mapred-site.xml
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
        <property>
                <name>mapred.job.tracker</name>
                <value>hadoopnode1:8021</value>
                <description>The host and port that the MapReduce job tracker runs at.If "local", then jobs are run in process as a single map</description>
        </property>
</configuration>

hadoop@hadoopnode2:~/hadoop-0.20.2/conf$ cat hdfs-site.xml
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
        <property>
                <name>dfs.replication</name>
                <value>2</value>
                <description>Default block replication</description>
        </property>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T14:56:11.203

通过 sudo jps 检查您的服务，不应显示您需要执行的操作

```
Restart Hadoop
Go to /app/hadoop/tmp/dfs/name/current
Open VERSION (i.e. by vim VERSION)
Record namespaceID
Go to /app/hadoop/tmp/dfs/data/current
Open VERSION (i.e. by vim VERSION)
Replace the namespaceID with the namespaceID you recorded in step 4. 
```

这应该工作。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T10:55:02.680

在 Web GUI 上，您可以看到集群拥有的节点数。如果您看到的少于您的预期，请确保 master 上的 /etc/hosts 文件仅作为主机（对于 2 节点集群）。

```
192.168.0.1 master
192.168.0.2 slave 
```

如果你看到任何 127.0..... ip 然后注释掉，因为 Hadoop 会首先将它们视为主机。我有上面的问题，我用上面的方法解决了。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T03:29:10.843

实际上，您的情况有两个错误。

```
can't connect to hadoop master node from slave 
```

那是网络问题。测试它： curl 192.168.1.120:8020 。

正常响应： curl：（52）来自服务器的空回复

就我而言，我得到主机未找到错误。所以看看防火墙设置

```
data node down: 
```

那是hadoop的问题。Raze2dust 的方法很好。如果您在日志中看到 Incompatible namespaceIDs 错误，这是另一种方法：

停止 hadoop 并编辑 /current/VERSION 中 namespaceID 的值以匹配当前 namenode 的值，然后启动 hadoop。

您始终可以使用以下方法检查可用的数据节点：`hadoop fsck /`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T06:31:22.567

检查名称节点和数据节点日志。（应该在`$HADOOP_HOME/logs/`）。最可能的问题可能是名称节点和数据节点 ID 不匹配。从所有节点中删除`hadoop.tmp.dir`并再次格式化 namenode ( `$HADOOP_HOME/bin/hadoop namenode -format`)，然后重试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T09:14:30.963

将新节点主机名添加到从文件并在新节点上启动数据节点和任务跟踪器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T07:35:49.853

我认为在从站 2 中。从站 2 应该侦听同一个端口 8020，而不是侦听 8021。

# java - BigInteger 的困难

> ID：10780209
> 
> 赞同：2
> 
> 时间：2012-05-28T06:25:58.320
> 
> 标签：java, biginteger, factorial

我正在尝试使用 Recursion 和 BigIntegers 进行阶乘，但 eclipse 抱怨 BigInteger。我知道这个程序应该很简单，但它让我头疼。这是代码。

```
import java.util.Scanner;
import java.math.BigInteger;

public class Factorial
{
    public static void main(String[] args) 
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter integer");
        BigInteger n = input.nextBigInteger();
        System.out.println("Factorial of " + n + " is "  + fact(n));

    }

    public static  int fact(BigInteger n)
    {
        if(n ==0)
        {
            return 1;
        }
        else
        {
            return n * fact(n-1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T06:27:46.893

`BigInteger`不支持比较 using`==`和乘法 using `*`。相反，您必须调用`BigInteger`类 ([`equals()`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#equals%28java.lang.Object%29)和[`multipy()`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#multiply%28java.math.BigInteger%29)) 的适当方法。

另请注意，存在[`BigInteger.ZERO`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#ZERO)和[`BigInteger.ONE`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#ONE)。

最后，您的方法的*返回类型*`fact`应该是`BigInteger`and not `int`。无论您希望*参数*是类型`BigInteger`还是`int`取决于您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T06:31:47.557

除了@aix 提到的关于调用算术的内容之外`BigInteger`-我还可以看到此代码的另一个问题。

您的方法签名是

```
public static  int fact(BigInteger n) 
```

这是有问题的——阶乘增长很快，所以你很可能会溢出结果。
我*想*你真正想要的是：

```
public static  BigInteger fact(int n) 
```

这更有意义，因为返回值可能应该是`BigInteger`（因为它增长很快）而不是参数，或者可能是两者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T06:31:13.290

Java 不支持运算符重载。因此，用户定义的类不支持 + 和 ==，只有一个例外是 java.lang.String 支持 +。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T06:30:32.417

我相信你不能简单地在 BigInteger 对象上使用算术运算符。尝试将他们的方法用于算术过程，例如比较、减法、乘法等。

参考文献在[这里给出](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)

# jquery - Jquery UI Timepicker 不能使用相同的 ID/名称输入

> ID：10780210
> 
> 赞同：0
> 
> 时间：2012-05-28T06:26:12.367
> 
> 标签：jquery, jquery-ui, timepicker

[http://jsfiddle.net/cblaze22/Duzr4/1/](http://jsfiddle.net/cblaze22/Duzr4/1/)

有没有办法让[http://fgelinas.com/code/timepicker/](http://fgelinas.com/code/timepicker/)可以很好地处理具有相同 ID/名称的输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:37:41.103

不，你不能强迫 jQuery 很好地处理无效的 HTML 具有重复`id`属性的文档是无效的；从[精细规范](http://www.w3.org/TR/html5/global-attributes.html#the-id-attribute)：

> *3.2.3.1 id 属性*
> [...]
> 该值在元素的主子树中的所有 ID 中必须是唯一的

在您的情况下，*主子树*可能是您的整个页面。

修复您的 HTML 以不重复`id`属性并切换到不同的选择器：

```
$('input[name=test]').timepicker(); 
```

或向您的 s 添加一个类`<input>`并选择该类：

```
<input name="test" type="text" class="timepicker" />
<input name="test" type="text" class="timepicker" /> 
```

和：

```
$('.timepicker').timepicker(); 
```

演示：http: [//jsfiddle.net/ambiguous/VhBXK/](http://jsfiddle.net/ambiguous/VhBXK/)

​</p>

# iphone - MDM 中的证书混淆

> ID：10780212
> 
> 赞同：1
> 
> 时间：2012-05-28T06:26:24.350
> 
> 标签：iphone, ios, apple-push-notifications, mdm

我能够开发一个 mdm 解决方案。

当我将代理从开发人员帐户的配置文件移动到企业帐户的内部分发配置文件时，我开始遇到问题。

现在我完全混淆了哪个证书在哪里使用？

请指导我他是在以下地方使用的证书：

1.  注册资料的凭证部分中的证书（它的 BI 是 com.apple.mgmt._*吗* ？或者可以是任何类似 com.abc.mdm 的证书？或者它是客户收到的证书）
2.  用于唤醒设备的证书 .pem 文件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T04:15:00.383

您需要使用您的 iOS 企业开发者帐户和代理帐户的凭据。

*   按照此页面[http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)然后验证一些事情，使用此命令从 customerPrivateKey.pem 中删除密码

    openssl rsa -in customerPrivateKey.pem -out PlainKey.pem

*   验证从[https://identity.apple.com/pushcert/下载的 .pem 证书](https://identity.apple.com/pushcert/)

    您可以将此 .pem 安装在 Mac 的钥匙串中，然后查看获取信息，并且证书应该有 com.apple.mgmt.External.b503419d-1e2a-a60f-7451-5b8832b5a9cb，您可以在生成注册 mobileconfig 时将其用作推送主题.

*   然后使用此命令合并从门户[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的 APNS 证书（例如 CustomerCompanyName.pem）

    cat CustomerCompanyName.pem PlainKey.pem > PlainCert.pem

现在可以将 PlainCert.pem 用作 APNS/MDM 证书。

请参阅[Identity.p12](https://stackoverflow.com/questions/10491789/how-to-deploy-a-mdm-check-in-sever/10670590#10670590)和相应的密码，您必须在凭据部分使用这些密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:01:11.147

1) 它必须是 com.apple.mgmt._ 但这不是来自供应门户 - 您可以在此处设置的只是您的供应商证书。看[这里](https://stackoverflow.com/a/10348759/1132403)

2) 证书用于连接到 APNS 服务，但您应该从[Apple Push Certificates Portal获取此证书](http://www.google.co.uk/url?sa=t&rct=j&q=apns%20cert%20portal&source=web&cd=4&ved=0CF8QFjAD&url=https://identity.apple.com/pushcert/&ei=uITDT92vEMyt8QPn4PjRCg&usg=AFQjCNFXQ1eEUH_KhS0OnoDUzPbDv1W6eg&sig2=pmBLoNcTlWjKeAAGC7PA8w)

# bash - grep 和 sed 捕获文件中的参数

> ID：10780215
> 
> 赞同：0
> 
> 时间：2012-05-28T06:26:34.307
> 
> 标签：bash, shell, scripting, sed

我有一条线，其中包含一些我想要获取的参数。做这个的最好方式是什么？

示例行是：

```
l1_user_instr hits=0035191479 misses=0000013657
l1_user_data hits=0009562889 misses=0001215170 
```

我想编写一个脚本来提供`hits=xx`特定`miss=yy`的配置。

```
grep l1_user_instr_hits | sed ? 
```

我不是 sed 方面的专家，因此也不是这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:57:26.783

目前尚不完全清楚您在寻找什么，但从其他答案中的评论来看，我认为您希望能够获得命中数或未命中数，仅此而已。例如，在查找配置“l1_user_data”的命中时，您希望输出准确为：

`0009562889`

一个简单的事情（你可以添加一个更好的界面）是这样的：

```
awk -v f=3 -v c=l1_user_instr -F ' *|=' '$0 ~ c {print $f}' input 
```

通过设置 FS 来分割行`=`以及空白，我们将命中数设为 3，未命中数设为 5。将变量 c 设置为要匹配的字符串，并将 f 设置为要显示的字段（3 或 5）。请注意，您可能希望在 FS 中处理制表符和空格（可以/应该做很多事情来改进此界面，但对于一次性的，这很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:44:26.437

也许`awk`会适合您的需求。尝试这个：

```
awk '/l1_user_instr/ { print $2,$3 }' file.txt 
```

结果：

```
hits=0035191479 misses=0000013657 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:02:11.233

```
while IFS=" =" read -r type _ hits _ misses
do
    echo "Type: $type, Hits: $hits, Misses: $misses"
done < inputfile 
```

Example output:

```
Type: l1_user_instr, Hits: 0035191479, Misses: 0000013657
Type: l1_user_data, Hits: 0009562889, Misses: 0001215170 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T07:21:12.967

与`sed`（如果我得到正确的你想要的）：

```
sed '/l1_user_instr/ s/.*\(hits=\d\+\) \(misses=\d\+\)[^0-9]*$/\1\n\2/;q' INPUTFILE 
```

基本上它将搜索匹配的`l1_user_instr`行，并在该行上创建两个组以匹配所需的数据，然后将它们打印成新的行分隔，然后退出。解决方案类似`awk`：

```
awk '/l1_user_instr/ {printf("%s\n%s\n",$2,$3) ; exit}' INPUTFILE 
```

# design-patterns - 在这种情况下哪个更好？可重用性或冗余

> ID：10780220
> 
> 赞同：1
> 
> 时间：2012-05-28T06:27:15.257
> 
> 标签：design-patterns, language-agnostic

我有一个页面，用户将在其中查看基于产品 ID 的产品详细信息。管理员也可以看到相同的页面。我有一个模板来呈现 html。

管理员将对该页面拥有更多控制权，例如，他可以编辑、删除等等。用户可以看到它并购买。

**案例1：通过添加条件使用相同的模板，根据用户显示内容**
优点
1）当我们需要修改模板或主题时，它很容易。
2) 可重用性

缺点
1）当有许多条件并且需要大量时间来调试任何问题时，它会变得复杂。
2) 该模板中的任何错误都会影响管理页面和用户页面。

**案例2：使用不同的模板**
优点
1）当有许多复杂的条件时它很容易。
2）它使代码独立。管理模板中的错误不会影响用户模板

缺点
1）当我们必须修改模板或主题时，这是一个问题。（额外的依赖）

哪个是更好的选择？什么是正确的策略？

应该根据复杂性自适应吗？我想看看你对此的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:35:47.720

我将创建一个包含用户和管理员之间重叠的共享库。然后，使用装饰器模式添加管理功能。

通过装饰底座，您可以避免管理部分中的错误影响用户。因此，您在添加功能的同时保留了可重用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:30:40.127

为什么不使用工厂或抽象工厂模式来解决这类问题......因为这两种模式处理对象系列......并降低复杂性并使您的代码易于维护......

示例：[抽象工厂](http://www.oodesign.com/abstract-factory-pattern.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:06:43.793

You should have your design like this:
1\. Suppose your product page has 2 buttons
2\. Purchase button - For common user
3\. Ship item button - For admin
4\. Now showing this button should not be dependent on whether user is admin or not, but on whether u want to show that component that page

you should have `PageModel` class which has 2 boolean attributes

```
boolean showPurchaseButton
boolean showShipButton 
```

you should have only one template/page creation code. In template class, u should add components to page like this:

```
if(showPurchaseButton){
//add purchase button to template
}
if(showShipButton){
//add ship button to template
} 
```

while creating page, you can populate PageModel depending on user like this:

```
//common user
PageModel model = new PageModel()
model.setshowPurchaseButton(true);
model.setshowShipButton(false);

//for admin user
PageModel model = new PageModel()
model.setshowPurchaseButton(false);
model.setshowShipButton(true);

//while creating your template pass this model to it. 
```

This way u'll have flexibilty to add as many components to ur template. and also debugging will become easy because , when populating values in page model, u'll get idea that what components u r showing for which user. this section of code will act as ur control panel.

# git - 如何将多个 Git 提交（已推送）还原到已发布的存储库？

> ID：10780228
> 
> 赞同：93
> 
> 时间：2012-05-28T06:27:49.910
> 
> 标签：git, version-control

git新手，已经搞砸了。

我已经提交并将一些更改推送到远程开发机器。我需要恢复旧版本，但要保持“糟糕的进展”，以继续在单独的分支上工作；

我在想这样做：

1.  **创建一个**名为：“tested-thing”的本地分支
2.  **将本地存储库恢复**到它工作的状态*（希望有意义的提交会有所帮助）*；
3.  **推送到远程**

4.  *完成测试事物的测试*

5.  **将“测试的东西”**合并****到开发中****
***   **推送到远程****

 **在第 3 步和第 5 步之间，其他开发人员可能会提交和推送，恐怕这可能会导致“合并悲剧” - 无论如何，这可能是正确的方法吗？

**更新：**

**这里的主要问题在于2）**

在这里，关于主题：“将工作分解为主题分支” [http://learn.github.com/p/undoing.html](http://learn.github.com/p/undoing.html)

他们建议：

1.  $ git 分支测试
2.  $ git reset --hard a6b4c974

通过这样做，其他开发人员仍然可以：

`$ git commit`（在开发分支上）

我可以**结帐以测试**并解决它，直到**合并**时间。

尽管您有所有选择，但这感觉是一种很好的方法。但是，没有说明在我们推送之后是否可以这样做？

请注意以下几点：*由于我进行了这些更改并且我搞砸了所有事情，**所以到目前为止没有其他人在存储库上工作过**。所以，如果我恢复工作目录，没有人会注意到。*

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-05-28T06:51:01.930

### 问题

您可以使用许多工作流程。要点是不要在已发布的分支中破坏历史记录，除非您已与可能使用该分支并愿意对每个人的克隆进行手术的每个人进行了沟通。如果可以避免，最好不要这样做。

### 已发布分支的解决方案

您概述的步骤有优点。如果您需要 dev 分支立即稳定，请这样做。您有许多[使用 Git 进行调试](http://git-scm.com/book/en/Git-Tools-Debugging-with-Git)的工具，它们将帮助您找到正确的分支点，然后您可以恢复上次稳定提交和 HEAD 之间的所有提交。

以相反的顺序一次还原提交一个，或使用`<first_bad_commit>..<last_bad_commit>`范围。哈希是指定提交范围的最简单方法，但还有其他表示法。例如，如果您推送了 5 个错误提交，您可以使用以下命令恢复它们：

```
# Revert a series using ancestor notation.
git revert --no-edit dev~5..dev

# Revert a series using commit hashes.
git revert --no-edit ffffffff..12345678 
```

这将按顺序将反向补丁应用到您的工作目录，反向工作到您的已知良好提交。使用**--no-edit**标志，在应用每个反向补丁后，将自动提交对工作目录的更改。

有关`man 1 git-revert`更多选项，以及`man 7 gitrevisions`指定要恢复的提交的不同方法，请参阅。

或者，您可以分支您的 HEAD，按照需要的方式修复问题，然后重新合并。与此同时，您的构建将被破坏，但这在某些情况下可能是有意义的。

### 危险地带

当然，如果您*绝对确定*自从您的错误推送以来没有人从存储库中拉出，并且如果远程是一个**裸存储库**，那么您可以执行非快进提交。

```
git reset --hard <last_good_commit>
git push --force 
```

这将使您的系统和上游主机上的 reflog 保持完整，但您的错误提交将从可直接访问的历史记录中消失，并且不会在拉取时传播。您的旧更改将一直保留，直到存储库被修剪，但只有 Git 忍者才能看到或恢复您错误地提交。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-28T07:51:33.193

如果您已经将内容推送到远程服务器（并且您有其他开发人员在同一个远程分支上工作），那么要记住的重要一点是您不想重写历史记录

**不要使用 git reset --hard**

您需要还原更改，否则任何在其历史记录中已删除提交的签出都将在下次推送时将它们添加回远程存储库；并且任何其他结帐将在此后的下一次拉动中将它们拉入。

如果您*尚未*将更改推送到遥控器，则可以使用

```
git reset --hard <hash> 
```

如果您*已*推送更改，但确定没有人拉取更改，您可以使用

```
git reset --hard
git push -f 
```

如果您*已*推送更改，并且有人将其拉入结帐，您仍然可以这样做，但其他团队成员/结帐需要协作：

```
(you) git reset --hard <hash>
(you) git push -f

(them) git fetch
(them) git reset --hard origin/branch 
```

但总的来说，这会变成一团糟。所以，还原：

**要删除的提交是最新的**

这可能是最常见的情况，你做了一些事情——你把它们推出来，然后意识到它们不应该存在。

首先，您需要确定要返回的提交，您可以这样做：

```
git log 
```

只需在更改之前查找提交，并注意提交哈希。`-n`您可以使用以下标志将日志限制为最近的提交：`git log -n 5`

然后将您的分支重置为您希望其他开发人员看到的状态：

```
git revert  <hash of first borked commit>..HEAD 
```

最后一步是创建您自己的本地分支以重新应用您恢复的更改：

```
git branch my-new-branch
git checkout my-new-branch
git revert <hash of each revert commit> . 
```

继续工作`my-new-branch`直到完成，然后将其合并到您的主要开发分支中。

**要删除的提交与其他提交混合在一起**

如果您要还原的提交不是全部在一起，那么单独还原它们可能是最简单的。再次使用`git log`查找要删除的提交，然后：

```
git revert <hash>
git revert <another hash>
.. 
```

然后，再次创建您的分支以继续您的工作：

```
git branch my-new-branch
git checkout my-new-branch
git revert <hash of each revert commit> . 
```

再一次，当你完成时，破解并合并。

你应该最终得到一个看起来像这样的提交历史`my-new-branch`

```
2012-05-28 10:11 AD7six             o [my-new-branch] Revert "Revert "another mistake""
2012-05-28 10:11 AD7six             o Revert "Revert "committing a mistake""
2012-05-28 10:09 AD7six             o [master] Revert "committing a mistake"
2012-05-28 10:09 AD7six             o Revert "another mistake"
2012-05-28 10:08 AD7six             o another mistake
2012-05-28 10:08 AD7six             o committing a mistake
2012-05-28 10:05 Bob                I XYZ nearly works 
```

**更好的方式®**

尤其是现在您已经意识到多个开发人员在同一个分支中工作的危险，请考虑*始终*在您的工作中使用功能分支。这意味着在分支中工作直到完成某些事情，然后才将其合并到您的主分支。还可以考虑使用[git-flow](https://github.com/nvie/gitflow)等工具以一致的方式自动创建分支。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-08-20T14:38:10.243

```
git revert HEAD -m 1 
```

在上面的代码行中。“最后一个参数代表”

*   1 - 恢复一个提交。2 - 恢复上次提交。n - 恢复最后 n 次提交

* * *

或者

> git reset --hard siriwjdd**

# java - 是否可以对蚂蚁任务进行子类化？

> ID：10780229
> 
> 赞同：1
> 
> 时间：2012-05-28T06:28:02.690
> 
> 标签：java, ant

我编写了一个 ant 任务来在 NetBeans 中运行我的项目（我正在使用一个自由格式的 java 项目）。现在我想写一个调试任务。调试任务与运行任务几乎相同，只是添加了一些属性。我可以子类化运行任务并添加额外的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:43:50.090

由于 Ant 任务实现是一个 Java 类，因此 Ant 任务可以像任何其他 Java 类一样被子类化。但是，测试任务的常用方法是同时编写[JUnit](http://www.junit.org/)和[AntUnit](http://ant.apache.org/antlibs/antunit/)测试。

例如，看一下正在[测试](http://svn.apache.org/viewvc/ant/core/trunk/src/tests/)的 Apache Ant 源代码。

# sql - 从带参数的集合返回函数插入表

> ID：10780232
> 
> 赞同：3
> 
> 时间：2012-05-28T06:28:15.770
> 
> 标签：sql, postgresql, composite-types

这可能很简单，但无法弄清楚。

我有表摘要和`GetSummary`返回行作为摘要集的函数。我可以这样查询

```
SELECT GetSummary(arg1, arg2)
GetSummary
-----------
(val1, val2, val3) 
```

像这样返回实际列：

```
SELECT * FROM GetSummary(arg1, arg2)
col1  |   col2   | col3
------------------------
val1  |   val2   | val3 
```

插入摘要工作正常：

```
INSERT INTO Summary (SELECT * FROM GetSummary(arg1, arg2));
INSERT 0 1 
```

但我不知道如何根据其他表中的列一次插入几行。我想做这样的事情：

```
INSERT INTO Summary (SELECT FROM GetSummary(OtherTable.x, OtherTable.y)
FROM OtherTable WHERE <some query>); 
```

失败是因为`SELECT FROM GetSummary ..`不返回汇总表行。查询`SELECT * FROM GetSummary ..`会这样做，但我不知道如何编写查询。

**编辑**

发布后几分钟偶然发现解决方案。正确的语法是

```
INSERT INTO Summary (SELECT (GetSummary(OtherTable.x, OtherTable.y)).*
FROM OtherTable WHERE <some query>); 
```

(X).* 符号将选择扩展到列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T20:44:38.020

附加到问题的解决方案仍然存在语法错误。它应该是：

```
INSERT INTO Summary
SELECT (GetSummary(o.x, o.y)).*
FROM   OtherTable o
WHERE  <some condition>; 
```

必须：
- 只有一个`FROM`。

可选：
- 需要的周围没有括号`SELECT`。
- 表别名以简化语法。

[**访问复合类型**](http://www.postgresql.org/docs/current/interactive/rowtypes.html#AEN7249)的手册。

* * *

此外，您的函数似乎应该返回*一行*（或不返回）。*如果*是这种情况，您应该删除子句**`SETOF`**中的。`RETURNS`做到这一点：

```
CREATE FUNCTION getsummary( ... ) 将
   摘要返回为...

```

# yii - CGridView 显示两个表中的数据？

> ID：10780234
> 
> 赞同：2
> 
> 时间：2012-05-28T06:28:22.347
> 
> 标签：yii

我想设置一个 CGridView。我希望在一个视图中显示来自 2 个不同表的数据。数据来自一个名为 student 的表和另一个名为 employee 的表。

员工由学生推荐（reg_no）

## 学生桌

reg_no（主键） s_name 部门 f_name

## 员工表

e_no（主键） e_name 设计工资 reg_no（外键）

我想在单个网格视图中显示来自学生的 (reg_no,s_name,f_name) 和来自员工表的 (design,salary)，任何人都可以给出一个想法或任何教程，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T11:41:28.413

首先确保您的模型和关系定义正确。检查模型以确保存在关系。例如，您的员工模型中应该有这样的条目；

```
function relations() {
    return array(
        'reg_no'=>array( self::BELONGS_TO, 'Student', 'reg_no' ),
    );
} 
```

在 CGridView 中使用 CActiveDataProvider 而不是数组作为数据源。

```
$this->widget('zii.widgets.grid.CGridView', array(
'dataProvider'=>$model->searchEmplyees(),
 .......
 ....... 
```

向您的模型添加另一个搜索条件，将数据作为 CActiveDataProvider 返回。

```
public function seachEmployees()
{
    $criteria=new CDbCriteria;
    $criteria->alias = 'i';
    $criteria->compare('id',$this->id);
    .......
            ....... 
    $criteria->join= 'JOIN 'your table name' d ON (i.id=d.id)';

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
        'sort'=>array(
            'defaultOrder'=>'order_in_sna ASC',
        ),
    ));
} 
```

我刚刚输入了这段代码供您参考，以便您了解 Yii 是如何为您处理所有这些的。[这是另一个很好的例子，同样来自 Yii 框架站点](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)。

# javascript - 带有 JsViews 的 JsRender - 视图为空或不是对象

> ID：10780247
> 
> 赞同：0
> 
> 时间：2012-05-28T06:29:40.513
> 
> 标签：javascript, jsrender, jsviews

我正在尝试在向导中实现一个真正的 JsViews 基本示例，包括 jquery.observable 和 jquery.views

但我得到这个错误x-browser。“视图为空或不是对象”。中断发生在 jsRender 中，但我有其他模板代码使用 jsRender 工作正常，它只包含 jquery.observable $ jquery.views。有没有人有一个使用 jsRender / jsViews 的简单绑定示例的 jsfiddle。不需要详细视图，只是从模型中删除项目的最简单示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:51:20.677

我在[此处](http://borismoore.github.com/jsviews/demos/jQueryConfDemosOct2011/07_observable2.html)的简单“可观察集合更改”示例中添加了“删除” 。（代码在[这里](https://github.com/BorisMoore/jsviews/blob/master/demos/jQueryConfDemosOct2011/07_observable2.html)）。

# wpf - MVVM 限制代码背后？

> ID：10780256
> 
> 赞同：1
> 
> 时间：2012-05-28T06:30:27.203
> 
> 标签：wpf, mvvm, code-behind

在 WPF 中使用 MVVM 模型是否会限制程序员在后面编写代码？避免 Code behind 会导致很多复杂性，但另一方面，耦合会成为一个问题。那么什么更好呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T06:36:01.087

MVVM 模型不会限制您在后面编写代码。

它所提倡的是 View 应该只依赖于 ViewModel（以及 Model 上的 ViewModel）

因此，如果您在其背后编写代码实际上是在实现 ViewModel，那么您就是在创建从 ViewModel 到 View 的依赖关系。

仅查看相关内容的代码是可以的

使用后面的代码时你失去的东西是该代码的简单（单元）测试。

**编辑**

MVVM 世界中的一个常见表达是“仅 XAML”。尽管我喜欢一个简短、活泼的陈述，但它往往会偏离 MVVM 试图解决的实际问题以及它试图解决它的方式。

只要您坚持使 View 依赖于 ViewModel 和 Model 上的 ViewModel 并努力实现（单元）可测试性，那么您就走在了正确的轨道上。

**编辑 2**

在处理事件的视图中应该只做两件事：改变视图本身或使用绑定通知视图模型发生了变化。应通过在 ViewModel 上实现 INotifyPropertyChanged 来通知 VIEW ViewModel 中的更改。

以类似的方式，ViewModel 可以通过将 ViewModel 命令绑定到视图来响应视图中的事件。

WPF 按钮有一个可以使用的 Command 属性。它在单击按钮时执行。

如果控件没有 Command 属性，或者您想在引发不同事件时执行命令，您所要做的就是将事件转换为 ICommand 的执行。

Microsoft 已经在 Blend SDK 中提供了一个实现。[从这篇文章](http://blogs.msdn.com/b/luc/archive/2010/11/18/executing-a-command-from-an-event-of-your-choice.aspx)：

```
... xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity..."
<Slider
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="ValueChanged">
            <i:InvokeCommandAction Command="{Binding MyCommand}"
                                   CommandParameter="{Binding Text, ElementName=textBox}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Slider> 
```

[以及关于命令与事件触发器的讨论](http://blog.tonysneed.com/2011/07/22/commands-versus-event-triggers-in-mvvm/)

# regex - grep 异常但排除特定异常

> ID：10780260
> 
> 赞同：5
> 
> 时间：2012-05-28T06:30:53.303
> 
> 标签：regex, shell, unix, grep

我目前正在从文件中匹配“异常”，并在使用前后输出 10 行：

> grep -C 10 "[.*异常"

但是现在我想排除某些特定的异常，比如***AAAException***和***BBBException***，我该怎么做呢？它可以通过

> grep -v "AAAException" | grep -C 10 "[.*异常"

但是，如果在文件中，我在其他异常的 10 行内有***AAAException***，则该行将不会包含在输出中，这不是我想要的。我怎么能不匹配***AAAException***，但如果它发生在其他异常的 10 行内，​​它仍然会包含在输出中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:49:25.577

如果你有`grep -P`，你可以指定一个否定的后向断言。

```
grep -C 10 -P '\[.*(?<!AAA|BBB)Exception' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:40:22.070

如果您的正匹配模式**异常**是一个单词，即没有在其他字母之前/之后，那么您可以使用单词边界。

```
$ grep -C 10 '\<NullPointerException\>\|\<SessionTimeoutException\>' 
```

# c# - 我的服务器在存储过程中被异常挂起。超时已过

> ID：10780268
> 
> 赞同：2
> 
> 时间：2012-05-28T06:31:36.340
> 
> 标签：c#, .net, sql-server, sql-server-2008

我在一个存储过程中写了一个游标，基本上是这样的：

```
OPEN curr

    Fetch NEXT FROM curr into @ID, @IsCC, @JurisdictionID

    While @@FETCH_STATUS = 0
    Begin
        --Code for Update and Insert operations
         Fetch NEXT FROM curr into @ID, @IsCC, @JurisdictionID
    End

    CLOSE curr
    DEALLOCATE  curr 
```

现在在 While 循环中，我为外键违规的插入语句之一获得了异常。所以我修复了它，但是在这个异常之后，当我尝试运行我的应用程序时，它甚至无法运行最简单的查询，而且我不断得到`Timeout expired`. 只有在我重新启动我的 Sql Server 服务之后，一切似乎才能正常启动。

我的猜测是语句 CLOSE 和 DEALLOCATE 在我遇到异常后没有运行。如果发生这种情况我该怎么办？我害怕如果在生产中发生这种情况我会像一块土豆一样被砸碎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:42:09.673

我不确定，您的代码看起来如何，但是如果人们的异常处理不好，并且与数据库的连接仍然存在，通常人们会得到这种类型的行为。

如果这两个命令没有运行，您应该仅从此代码中获得以下异常： 通过创建：名称为“curr”的游标已存在。

并且通过开头：光标已经打开。

我认为您应该使数据库级别的异常处理更加安全。

# javascript - JavaScript Timer 倒计时注销

> ID：10780274
> 
> 赞同：1
> 
> 时间：2012-05-28T06:32:14.833
> 
> 标签：javascript, jquery, time, timeout

我正在尝试在 JS 中创建一个倒数计时器，它将每分钟更改一次字段的值（一开始是 20，然后将其更改为 19、18、17 等），但它无法正常工作。它不是每 60 秒改变一次值，但我觉得它是随机的（有时它在 15 秒后第一次改变值，另一次是 53）。知道我做错了什么吗？这是代码：

```
function getTimeNow(){
    var Time = new Date;
    return Time.getHours()*60*60+Time.getMinutes()*60 + Time.getSeconds();
}

    var start = getTimeNow();
    var start_point = start%60;
    var target = start+60*20;

function TimeOut(){
    if((getTimeNow()-start)%60 == start_point && target>getTimeNow()){
       var temp = jQuery('.Timer').html();
       temp-=1;
       jQuery('.Timer').html(temp);
    }
    setTimeout(TimeOut,1000);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:40:38.620

您不能指望调用计时器函数的确切时间。您需要将逻辑更改为对时间变化更具弹性的东西...

```
setInterval(function(){count.innerText = count.innerText - 1;},
            60*1000); 
```

这也短了很多...

# php - 保存表单提交与保存按键

> ID：10780275
> 
> 赞同：0
> 
> 时间：2012-05-28T06:32:15.290
> 
> 标签：php, database, keypress

我使用 PHP 作为脚本语言，使用 mySQL 作为数据库。**我想知道在表单提交**时保存到数据库中是否比在每次**按键**时保存更好。在可用性/用户体验和性能方面哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:38:46.707

每次按键都保存意味着：

1.  您需要一个能够处理更多请求的服务器
2.  您将需要比*每次*按键都更智能的逻辑，因为大多数人按键的速度比大多数连接往返 HTTP 请求的速度要快。可能类似于“每 30 秒，但前提是数据已更改，但延迟到收到最后一个请求的响应（或超时）”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:41:16.547

节省按键绝对是一个非常糟糕的主意！具有 10 个字段的典型表单将需要至少 100 次数据库调用。不是很理想。即使从用户体验的角度来看；但是您可以创建一个 setTimeout 来保存用户输入，例如，每 30 秒一次（例如，在第一个字段更改后，setTimeout 将被初始化）。

# windows - Windows - 无法强制关闭网络文件句柄 - 无法关闭系统 (Pid 4) 文件句柄

> ID：10780276
> 
> 赞同：7
> 
> 时间：2012-05-28T06:32:16.690
> 
> 标签：windows

首先，很抱歉这个问题很长，但我想提供足够的细节。

# 概要：

在 Windows 中似乎无法强制关闭通过网络共享打开的文件句柄。因此，无法移动/重命名/删除通过网络共享打开的文件。我正在使用Win 7。

# 问题：

任何人都可以看到我做错了什么，或者有人可以确认这是预期的，并且无法强制关闭系统文件句柄（始终在 pid 4 上，例如与对文件的网络共享访问相关的那些句柄）。

# 背景：

我们有访问日志文件的远程网络客户端用户。我们需要滚动日志文件，使其不会变得太大。我们无法滚动日志文件，因为该文件被报告为正在使用。

# 重新创建问题：

## 0)

以管理员身份执行所有操作

## 1)

创建一个新目录并共享它

## 2)

在新目录中创建一个文件

## 3)

通过文件共享编辑文件，该文件往往会像 MS Word 那样获得文件锁定。所以开始/运行然后输入 \YourHostName 然后选择您创建的文件共享，然后导航到文件并使用 Word 编辑它。这是为了模拟远程用户/主机锁定文件。

## 4)

列出打开的文件句柄，我们可以看到下面的2

C:>句柄 C:\Log\MyLockedFile.txt

Handle v3.46 版权所有 (C) 1997-2011 Mark Russinovich Sysinternals - www.sysinternals.com

系统 pid：4 类型：文件 3E64：C:\Log\MyLockedFile.txt 系统 pid：4 类型：文件 5E48：C:\Log\MyLockedFile.txt

## 5)

尝试关闭文件句柄，这里我们看到尝试关闭失败。

C:>句柄-c 3E64 -p 4

Handle v3.46 版权所有 (C) 1997-2011 Mark Russinovich Sysinternals - www.sysinternals.com

3E64: 文件 (R--) C:\Log\MyLockedFile.txt 在系统 (PID 4) 中关闭句柄 3E64？(y/n) y 关闭句柄时出错：句柄无效。

## 6)

列出网络文件句柄，这里我们看到打开的网络共享文件。

C:>打开文件/查询-v

信息：需要启用系统全局标志“维护对象列表”才能查看本地打开的文件。见 Openfiles /? 了解更多信息。

通过本地共享点远程打开的文件：

按类型访问的主机名 ID #Locks 打开模式 打开文件（路径\可执行文件） 14693W7N 67109233 myuser1 Windows 0 写入 + 读取 C:\Log\MyLockedFile.txt 14693W7N 495 myuser1 Windows 0 读取 C:\Log\

## 7)

关闭/断开文件句柄，在这里它似乎工作

C:>openfiles /disconnect /a * /OP C:\Log\MyLockedFile.txt

成功：与打开文件“C:\Log\MyLockedFile.txt”的连接已终止。

## 8)

即使尝试删除系统文件句柄，它仍然处于活动状态。

C:>句柄 C:\Log\MyLockedFile.txt

Handle v3.46 版权所有 (C) 1997-2011 Mark Russinovich Sysinternals - www.sysinternals.com

系统 pid：4 类型：文件 3E64：C:\Log\MyLockedFile.txt

## 9)

该文件无法移动/重命名，因为它仍在使用中

C:>move C:\Log\MyLockedFile.txt C:\Log\MyLockedFile.txt.newName 进程无法访问该文件，因为它正被另一个进程使用。0 个文件已移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T13:43:57.857

只是作为答案发布，因为看到这个问题悬而未决（嘿，碰巧，正好一年？）

[首先，这里](https://serverfault.com/questions/1966/how-do-you-find-what-process-is-holding-a-file-open-in-windows/15695#15695)有一个关于这个主题的非常有趣的讨论（我想是关于 NTFS）。如果您阅读了上面的链接，您可以得到很好的提示，了解为什么某些句柄似乎永远“挂起”打开，以及为什么“强制关闭”不是一个好主意。

“handle -c”给出无效句柄错误的原因可能与在本地和远程运行“句柄”有关，即在网络驱动器物理连接到的机器上（？）

出于我自己的目的，在我自己的场景中，我最终强制关闭了一个句柄（只是因为我想以一种快速而肮脏的方式关闭它——使用你提到的 Sysinternals 工具，即“psexec”和“handle”（不需要指定用户和密码，假设我以管理员角色登录，我猜）：

```
rem To list the open handles
psexec \\someserver -c handle /accepteula some_filename

rem To force close a particular handle
psexec \\someserver -c handle /accepteula -c 3F9C -p 4 
```

但是，当再次远程运行句柄命令并没有给出任何结果（没有打开的句柄）时，我试图删除的文件夹仍然被锁定。一段时间后（我还尝试使用“net use f: /delete”断开有问题的网络共享，但无济于事，因为它“正在被活动进程访问”） - 我发现我自己的本地机器是仍然保留该目录的打开句柄 - 实际上我强制关闭的句柄来自我自己的机器。我使用 Process Explorer GUI 关闭它们没有问题，这应该等于在命令提示符下使用“句柄”。之后，可以删除有问题的文件夹。

# asp.net - SecurityException - 共享主机上的 Dapper

> ID：10780278
> 
> 赞同：5
> 
> 时间：2012-05-28T06:32:33.517
> 
> 标签：asp.net, .net-4.0, shared-hosting, dapper, securityexception

对于我当前的项目，我使用 Dapper。一切都很完美。然后我需要将它部署在共享主机上。结果可以在这里看到（复制 YSOD）：

> 说明：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。
> 
> 异常详细信息：System.Security.SecurityException：请求“System.Security.Permissions.ReflectionPermission，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

堆栈跟踪

> [SecurityException：请求'System.Security.Permissions.ReflectionPermission，mscorlib，Version = 4.0.0.0，Culture = Neutral，PublicKeyToken = b77a5c561934e089'类型的权限失败。] System.Security.CodeAccessSecurityEngine.Check（对象需求，StackCrawlMark和stackMark , Boolean isPermSet) +0
> System.Security.CodeAccessSecurityEngine.Check(CodeAccessPermission cap, StackCrawlMark& stackMark) +31
> System.Security.CodeAccessPermission.Demand() +46
> System.Reflection.Emit.DynamicMethod.PerformSecurityCheck(Type owner, StackCrawlMark& stackMark, Boolean跳过可见性）+9461551
> System.Reflection.Emit.DynamicMethod..ctor(String name, Type returnType, Type[] parameterTypes, Type owner, Boolean skipVisibility) +40 Dapperx.SqlMapper.CreateParamInfoGenerator(Identity identity) +537 Dapperx.SqlMapper.GetCacheInfo(Identity identity) +376 Dapperx.d__13 1..ctor(IEnumerable 1 源) +58 Dapperx.SqlMapper.Query(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Boolean buffered, Nullable 1 commandType) +199 ...`1.MoveNext() +644
> System.Collections.Generic.List``1 collection) +327 System.Linq.Enumerable.ToList(IEnumerable`
> `1 commandTimeout, Nullable`

有什么方法可以解决它（在.NET 4.0中）？据我了解到目前为止我所阅读的内容，提供者必须允许 IIS 反射的某些部分，这可能对他们构成安全风险......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:05:12.983

在 Medium Trust 中不允许使用 Dapper 使用的 Reflection.Emit。

您应该找到提供完全信任的托管服务提供商。 [discountasp.net](https://www.discountasp.net/)是我以前用过的一个。

# javascript - 使用 SuperScrollorama + Greensocks 的动画滚动

> ID：10780279
> 
> 赞同：2
> 
> 时间：2012-05-28T06:32:37.517
> 
> 标签：javascript, jquery, scroll, vertical-scrolling, gsap

我在解决 Javascript 动画滚动问题时遇到了一些麻烦。

我正在使用构建在 Greensock JS 补间库之上的 SuperScrollorama Jquery 插件。

我所追求的基本效果是“固定”一个部分，然后使用垂直滚动来展开一些内容，然后在内容完全展开后“取消固定”该部分，这样用户就可以滚动 - 即[http:// blueribbondesign.com.au/example/](http://blueribbondesign.com.au/example/)

但是，当我尝试将相同的效果一个接一个地应用于多个部分时，一切都被破坏了：固定元素下方的“未固定”内容被推离屏幕，并且在执行动画时似乎错误计算了元素的高度反向（即向上滚动页面）。- 即[http://blueribbondesign.com.au/example2/](http://blueribbondesign.com.au/example2/)

我一直在无休止地摆弄“position:fixed”和“pin-spacer”div，并尝试将 Superscrollorama 插件附加到各种包含元素，但仍然无法弄清楚如何让它工作。

非常感谢来自网络优秀众包思想的任何帮助，

干杯，

田纳西州。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T23:48:03.197

我自己一直在处理这个问题。发生的情况是在被固定的部分上方放置了一个空白 div 间隔，其高度是您在 pin() 函数中定义的高度。其次，固定的元素获得一个位置：固定分配给它。这两件事都允许滚动条在元素保持固定的同时继续向下滚动页面。反过来，由于该间隔 div 的高度，您在该部分下方的任何内容都会被撞倒。

如果您的固定元素水平居中，首先给它一个 left:50%, margin-left:-{width/2}px 以修复它推向左边缘。

接下来，您必须检测 pin/unpin 事件（由插件作为“anim”附加的参数提供），并更改下面的部分以切换固定/相对位置。当您将该底层部分更改为固定位置时，请务必将其“顶部”属性设置为固定元素的高度。一旦固定的元素变为未固定，将其更改回相对定位。这有任何意义吗？

似乎不同的技术需要不同的修复，但这些都是我要注意的……固定定位，然后使用 pin/unpin 事件进行调整。

# android - 放大缩小图像

> ID：10780282
> 
> 赞同：1
> 
> 时间：2012-05-28T06:32:47.277
> 
> 标签：android, zooming

我必须通过用两根手指拉伸来显示需要放大的图像。并用相同的过程缩小。

```
/** Calculate the mid point of the first two fingers */
private void midPoint(PointF point, WrapMotionEvent event) {
float x = event.getX(0) + event.getX(1);
float y = event.getY(0) + event.getY(1);
point.set(x / 2, y / 2);
} 
```

它不工作。任何好的链接或教程来研究它？？？

# java - JAVA_HOME 不指向 JDK：无法启动谷歌应用引擎

> ID：10780283
> 
> 赞同：4
> 
> 时间：2012-05-28T06:32:48.400
> 
> 标签：java, google-app-engine, web-applications, netbeans

当我尝试在谷歌应用服务器上的 netbeans 中运行示例项目时，出现以下错误。服务器没有启动。如果存在这些错误，我该如何解决？我正在使用 netbeans 7.1

```
BUILD FAILED
W:\UnderTest\NetbeansCurrent\Guestbook\nbproject\build-impl.xml:550: The following error occurred while executing this line:
W:\UnderTest\NetbeansCurrent\Guestbook\nbproject\build-impl.xml:300: Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "C:\Program Files\Java\jre7" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:36:54.297

安装 jdk 并将环境变量中的 JAVA_HOME 设置为安装 jdk 的路径。目前它指向jre。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:52:53.490

试试这个 - 临时

**视窗**

```
netbeans.exe --jdkhome "c:\JDK\path" 
```

**Unix**

```
 netbeans --jdkhome /usr/bin/yourjdk 
```

**如果要永久设置该选项，**可以在`netbeans.conf`文件中进行。和改变。

```
# Default location of JDK, can be overridden by using --jdkhome <dir>:
netbeans_jdkhome="c:\your\JDK\path" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:41:29.363

将听到可能的解决方案：[在 netbeans 中设置 jdk 路径，](http://netbeans.org/kb/docs/java/javase-jdk7.html) 或者，如果您在 windows env 中设置 JAVA_HOME，则使用 %JAVA_HOME%

# javascript - 使用 javascript 检测域名的重复 URL

> ID：10780284
> 
> 赞同：2
> 
> 时间：2012-05-28T06:32:48.790
> 
> 标签：javascript, url, dns

我想编写一个检查重复 url 的代码，但是一个简单的字符串匹配将不起作用，例如`string1 == string2`. 以以下 url 为例：

1.  www.facebook.com/authorProfile
2.  facebook.com/authorProfile
3.  [http://www.facebook.com/authorProfile](http://www.facebook.com/authorProfile)
4.  [http://facebook.com/authorProfile](http://facebook.com/authorProfile)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:42:38.247

```
function extract(str){
    var patterns = [
        "http://www.",
        "http://",
        "www."
    ];
    for(var i=0, len=patterns.length; i < len; i++){
        var pattern = patterns[i];
        if(str.indexOf(pattern) == 0)
            return str.substring(pattern.length);
    }
    return str;
} 
```

这会将所有这些链接转换为`facebook.com/authorProfile`样式，以便您可以比较它们。

```
links = [
    "www.facebook.com/authorProfile",
    "facebook.com/authorProfile",
    "http://www.facebook.com/authorProfile",
    "http://facebook.com/authorProfile"
];

for(var i=0, len=links.length; i<len; i++){
    console.log( extract(links[i]) );
}
// will produce 4 "facebook.com/authorProfile" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:03:46.410

如何使用 javascript 正则表达式？基本上，删除 http:// 和 www。

```
.replace(/www.|http:\/\//g, ''); 
```

例子：

```
var s1 = 'www.facebook.com/authorProfile';
var s2 = 'facebook.com/authorProfile';
var s3 = 'http://www.facebook.com/authorProfile';
var s4 = 'http://facebook.com/authorProfile';

s1.replace(/www.|http:\/\//g, '');
s2.replace(/www.|http:\/\//g, '');
s3.replace(/www.|http:\/\//g, '');
s4.replace(/www.|http:\/\//g, ''); 
```

都变成：

```
facebook.com/authorProfile 
```

# ios - 解除分配后检查回调内的对象

> ID：10780288
> 
> 赞同：1
> 
> 时间：2012-05-28T06:33:02.653
> 
> 标签：ios, uitableview, exc-bad-access

当我试图解释这一点时，请耐心等待。

我在 UITableViewCell 中有一个 HJManagedImageV 实例。我将它的回调设置为 self，一个 UIVIewController 实现所需的协议（HJManagedImageVDelegate）。

当我快速离开这个控制器时，回调最终会在不再存在的对象上触发。（HJManagedImageV 保留其代表。）

问题是在回调内部，如果没有获得 EXC_BAD_ACCESS，我无法检查对象是否有效。

```
-(void)managedImageSet:(HJManagedImageV*)mi {

    mi.callbackOnSetImage = nil;

    if(mi != nil && mi.image != nil) { // EXC_BAD_ACCESS when checking mi.image
        [mi setImage:[mi.image roundedCornerImage:9 borderSize:0]];
    }
} 
```

这是崩溃时的 mi：

```
mi  HJManagedImageV *   0x0022fae0
    UIView  UIView  
    oid id  0x00000000
    url NSURL * 0x00000000
    moHandler   HJMOHandler *   0x00000000
    image   UIImage *   0x00000000
    imageView   UIImageView *   0x00000000
    callbackOnSetImage  id  0x00000000
    callbackOnCancel    id  0x00000000
    callbackOnError id  0x00000000
    isCancelled BOOL    false
    loadingWheel    UIActivityIndicatorView *   0x00000000
    onImageTap  NSInvocation *  0x00000000
    index   int -1
    modification    int 0 
```

我很困惑为什么检查 mi.image 会让我崩溃。我还能如何判断 mi 是否仍然可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:19:12.367

使用委托模式的对象的寿命不会超过其委托，这是一种很好的设计实践。但是，如果这是不必要的坏事，则应确保在解除分配委托时将对象的委托 ivar 设置为 nil。

换句话说，委托经常碰巧是他们的对象的所有者。然后，如果他们希望自己的孩子活得更久，那么所有者有责任清除代表 ivars。

# iphone - 如何访问从情节提要加载的视图控制器的属性？

> ID：10780289
> 
> 赞同：3
> 
> 时间：2012-05-28T06:33:18.593
> 
> 标签：iphone, cocoa, storyboard

我有一个这样创建的视图控制器实例`instantiateViewControllerWithIdentifier`：

```
TBSCTestController* testController = [self.storyboard instantiateViewControllerWithIdentifier: @"OTP"]; 
```

`TBSCTestController`有一个`IBOutlet`名为的属性`label`，它与情节提要中的标签挂钩：

![IBOutlet albel](../Images/19c286a74ed8512deec5f15f957e47a1.png)

我想修改`label`使用此代码的文本，但没有任何变化：

```
testController.label.text = @"newText";
[self.view addSubview: testController.view]; 
```

是一个有效的`testController`实例，但它`label`是零。我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T07:47:47.863

你`UILabel`是`nil`因为你已经实例化了你的控制器，但它没有加载它的视图。控制器的视图层次结构在您第一次请求访问其视图时加载。因此，正如@lnafziger 所建议的那样（尽管出于这个确切原因它**应该**很重要），如果您切换两条线，它将起作用。所以：

```
[self.view addSubview: testController.view];  
testController.label.text = @"newText"; 
```

作为说明这一点的一个例子，即使这个也可以：

```
// Just an example. There is no need to do it like this...
UIView *aView = testController.view;
testController.label.text = @"newText";
[self.view addSubview: testController.view]; 
```

或者这个：

```
[testController loadView];
testController.label.text = @"newText";
[self.view addSubview: testController.view]; 
```

# php - 更新记录而不刷新我网站上的所有页面

> ID：10780290
> 
> 赞同：0
> 
> 时间：2012-05-28T06:33:25.673
> 
> 标签：php, jquery, ajax

如何在不刷新页面的情况下更新记录，我有一个系统，我想更新记录，在 0 和 1 之间更改其状态，以打开或关闭功能。这是我打开或关闭它的表格：

```
<table class="tablesorter" cellspacing="0">
    <thead>
        <tr>
            <th></th>
            <th>nane</th>
            <th>time</th>
            <th>out</th>
            <th>enter</th>
            <th>
                <div align="center">admin</div>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <?php $qu_req=mysql_query( "select * from `exit_request` where `date`='$date_now' order by id desc "); while($row_req=mysql_fetch_row($qu_req)){ ?>
        <tr>
            <td>
                <input type="checkbox">
            </td>
            <td><a href="show_exit_req.php?id=<?php print($row_req[0]); ?>" class="style9" onclick="NewWindow(this.href,'name','400','300','yes');return false"><?php print($row_req[1]); ?></a>
            </td>
            <td>
                <?php print($row_req[2]); ?>
            </td>
            <td>
                <?php print($row_req[6]); ?>
            </td>
            <td>
                <?php print($row_req[7]); ?>
            </td>
            <td>
                <div align="center">
                    <input name="<?php print(" chk_exit ".$row_req[0]); ?>" type="radio" value="0" <?php if($row_req[3]==0){print( 'checked');} ?>/>
                    <label>accept</label>
                    <input name="<?php print(" chk_exit ".$row_req[0]); ?>" type="radio" value="1" <?php if($row_req[3]==1){print( 'checked');} ?>/>
                    <label>not acept</label>
                </div>
            </td>
            <td>
                <input class="alt_btn" name="send" type="submit" value="رد الادارة" />
            </td>
        </tr>
        <? } ?>
    </tbody>
</table> 
```

更新代码

```
if(isset($_POST['send'])){
    $qu=mysql_query("select * from `exit_request` ");
    while($row=mysql_fetch_row($qu)){
        $id=$row[0];
        $chk_str="chk_exit".$id;
        $chk_str=$$chk_str;
        //if($chk_str==1)
        mysql_query("update `exit_request` set `accept`='$chk_str' where id=$id");
        print('<meta http-equiv="refresh" content="0;URL=index.php" />');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:43:54.777

您可以使用 AJAX 请求发布您的表单序列化内容，如许多关于网络 AJAX 的教程中所见，如果您需要在请求发送到 PHP 后更新表单的内容，请尝试将 JSON 数据发送回表单并解析/更新表单，这将使您在不更改页面的情况下**更新数据。**

该过程取决于您如何编写表单处理，您可以使用[jQuery](http://jquery.com/)处理您的 AJAX 请求，请参阅文档以获取示例，另请参阅[json_encode](http://php.net/manual/en/function.json-encode.php)用于表单处理的 php 端，使用[jQuery UI](http://jqueryui.com/)制作对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:50:08.693

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:54:02.400

您可以在[此处](http://www.w3schools.com/php/php_ajax_database.asp)找到示例或[查看此](http://www.w3schools.com/php/php_ajax_poll.asp) 网络中有很多示例可用。 **在stackoverflow中参考这个问题[我如何在innerhtml中使用ajax和php更新mysql数据库](https://stackoverflow.com/questions/853185/how-do-i-update-mysql-database-with-ajax-and-php-in-innerhtml)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:04:51.827

这是我为一个小型聊天框编写的一些代码，用于提交新的聊天帖子：

```
$("#shout").keypress(function(e) {
        if(e.keyCode == 13) {
            $.ajax({
                url: "http://example.com/api.php",
                contentType: "text/html; charset=ISO-8859-1",
                data: {
                    action: "shout",
                    message: $("#shout").val()
                },
                success: function() {
                    $("#shout").val("");
                }
            })
        }
    }); 
```

只要您在带有 id 喊叫的输入字段上按 Enter，这将从输入字段中获取值，将其放入 AJAX 请求中，然后发送它。此外，在成功发送后，它会清除输入字段。

action & data 指定 URL 调用的 GET 参数（即[http://example.com/api.php?action=shout&message=valueFromInputFieldGoeshere](http://example.com/api.php?action=shout&message=valueFromInputFieldGoeshere)）。但是你也可以使用 post，看看[.ajax()](http://api.jquery.com/jQuery.ajax/)的选项。

希望这能让您了解如何将数据发送到服务器。

这是相应的代码，用于检查聊天框是否有新帖子，如果是，则加载它们。

```
$(document).ready(function() {
            var lastShout;

            // This one gets the timestamp of the last chat entry
            $.ajax({
                url: "http://example.com/api.php",
                contentType: "text/html; charset=ISO-8859-1",
                async: false,
                data: {
                    action: "lastshout"
                },
                success: function(data) {
                    lastShout = data + 0
                }
            })

            // This one loads the content of the chatbox containing the posts
            $.ajax({
                url: "http://example.com/api.php",
                contentType: "text/html; charset=ISO-8859-1",
                data: {
                    action: "getshouts"
                },
                success: function(data) {
                    $("#shouts").html(data);
                }
            })

            // This will be executed every 5 seconds. It takes the timestamp from the beginning, asks the server again for the latest timestamp
            // and then checks if the response timestamp is higher than the timestamp from the beginning.
            // If so, he'll pull the chatbox content and put it into the specified div
            setInterval(function() {
                $.ajax({
                    url: "http://example.com/api.php",
                    contentType: "text/html; charset=ISO-8859-1",
                    async: false,
                    data: {
                        action: "lastshout"
                    },
                    success: function(data) {
                        data = data + 0
                        if(data > lastShout) {
                            lastShout = data;

                            $.ajax({
                                url: "http://example.com/api.php",
                                data: {
                                    action: "getshouts",
                                    init: 1
                                },
                                success: function(data) {
                                    if(data != "") {
                                        $("#shouts").html(data);
                                    }
                                }
                            })
                        }
                    }
                })

            }, 5000)
        }) 
```

# iphone - 在导航栏中使用 UISegmentController 显示地址簿

> ID：10780299
> 
> 赞同：0
> 
> 时间：2012-05-28T06:34:09.297
> 
> 标签：iphone, ios, addressbook, uisegmentedcontrol, mainwindow

**任务 ：**

```
I want to show my all contact in one UItable and Which parts all contacts  with UISegmentcontroller which is in Nevigationbar.

My Application is Tabbar Application so When I show my UISegmentController I have to add it in my Mainwindow xib . Becoz of that I cant access my Contactview data from app delegate file . 
```

我想让我的通讯录看起来像名为“Viber [(http://itunes.apple.com/in/app/viber-free-phone-calls-text/id382617920?mt=8)](http://itunes.apple.com/in/app/viber-free-phone-calls-text/id382617920?mt=8) ”的应用程序

..

所以只需要帮助在我的 MainWindow.xib 添加那个 UISegmentController 。它显示在那里，但我无法从那里访问我的 IBAction 功能，也无法从我的 ContactviewController.m 获取数据

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:36:02.787

我猜你是用你的xib中的IBAction附加touchupinside。用 valueChanged 事件附加它。

# ruby-on-rails - Rails - 如何检查 24 小时前模型的记录数

> ID：10780304
> 
> 赞同：1
> 
> 时间：2012-05-28T06:34:26.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想显示某个模型的记录总数的变化率。所以我需要知道，在任何给定时间，24 小时前有多少，现在有多少。一条记录很可能会被用户删除，所以我不能只使用超过 24 小时的现有记录的值。

有没有一种简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:22:16.090

```
class Item < ActiveRecord::Base
  scope :since, lambda {|time| where("created_at > ?", time) }
  scope :during_last, lambda {|time| where("created_at > ?", (Time.now - time)) }
end

Item.since(Time.now - 24.hours).count
Item.since(24.hours.ago).count
Item.during_last(24.hours).count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:54:48.093

好吧，您可以对 column 进行计数`created_at`。

```
def count_rate(model, time=DateTime.now)
  current_count = model.count(:conditions => ["created_at < ?", time])
  last_24_hours_count = model.count(:conditions => ["created_at < ?", time-24.hours])

  current_count - last_24_hours_count
end 
```

此方法将给定的记录与过去 24 小时进行比较。

好吧，如果用户已经删除了这些记录，您应该创建另一个表并使用(only )`Rate(date, hour, count)`每小时记录一次。`observer``after_create`

```
def after_create
  rate = Rate.find_or_initialize_by(Date.today.to_s, Time.now.hour)
  rate.increment(:count)
  rate.save!
end 
```

在这个观察者中，如果它按日期和小时找到现有记录，它只会增加计数列。您还将列上的默认值添加为零`count`。稍后，您可以按日期和小时从该表中查询数据。

# android - 在 setOnClickListener 上强制关闭错误（来自 hello Android book 第 3.5 节的示例）

> ID：10780305
> 
> 赞同：-1
> 
> 时间：2012-05-28T06:34:32.700
> 
> 标签：android, onclicklistener, forceclose

我在单击按钮时开始新活动时遇到问题，这是我的代码：

```
package test.project;

import android.app.Activity;
import android.os.Bundle;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;

public class TestActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

  View aboutButton = findViewById(R.id.about_content);
        aboutButton.setOnClickListener(this);
    }
public void onClick(View v) {
        switch (v.getId()) {
        case R.id.about_content:
        Intent i = new Intent(this, testit.class);
        startActivity(i);
        break;
        // More buttons go here (if any) ...
        }
    }
} 
```

谁能帮我纠正这个错误

错误线

```
aboutButton.setOnClickListener(this); 
```

Main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click here" android:layout_gravity="center"
android:text="Click here" android:layout_gravity="center" android:layout_marginTop="30dip"/>
</LinearLayout> 
```

包含 about_content 的 XML 文件是

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dip" >
    <TextView
        android:id="@+id/about_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/about_text" />
</ScrollView> 
```

about_content 已在此处定义

```
<TextView
            android:id="@+id/about_content"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/about_text" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:36:49.537

很可能您在 main.xml中没有任何具有 id的内容`about_content`，这将创建 NullPointerException。

此外，如果`aboutButton`应该是一个传统的按钮，那么你应该使用这个：

```
Button aboutButton = (Button) findViewById(R.id.about_content); 
```

**添加**

因为`aboutButton`是 TextView，所以使用这个：

```
TextView aboutButton = (TextView) findViewById(R.id.about_content); 
```

但是这个 TextView*必须*在传递给 setContentView() 的布局中，否则 findViewById() 将返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:37:42.680

好吧，你没有发布你的 logcat 输出，但由于这是初学者的常见错误，我会大胆猜测并说你可能得到了一个`NullPointerException`.

您对 的调用`findViewById`可能正在返回`null`，这意味着系统找不到与 给定的 id 关联的视图`R.id.about_content`。我会仔细检查您的 XML 布局是否有拼写错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:17:12.940

那是因为您设置内容视图的“main.xml”...不包含 about_content TextView，它在您发布的另一个 xml 中...

注意：您只能访问 setContentView(R.layout.yourlayout) xml 中存在的那些 R.id ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:25:11.907

您制作`setContentView(R.layout.main);`但`main.xml`不包括 View 有 id = `R.id.about_content`。如果你用它来代替`findViewById(R.id.button1);`它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T07:39:18.773

这是解决方案

```
Button aboutButton = (Button)findViewById(R.id.about_content); 
```

并且不要忘记添加`testit Activity in Android Manifest`

# php - 我如何在 cake php 1.3 或 1.2 中使用 cake php 2.x 的实用程序类？

> ID：10780309
> 
> 赞同：0
> 
> 时间：2012-05-28T06:34:58.857
> 
> 标签：php, cakephp-1.3, backwards-compatibility, cakephp-2.1

目前我正在开发一个从 cakephp 1.2 开始的项目，我发现实用程序类（如 2.x 版中的 File 类）发生了一些变化，所以我想将这个类与 cake 1.2 或 1.3 一起使用。

如果可能，请让我知道这个类文件所依赖的其他类是什么。

# silverlight - 我们如何在 Silverlight 中发现 Color 为空？

> ID：10780310
> 
> 赞同：2
> 
> 时间：2012-05-28T06:35:05.143
> 
> 标签：silverlight

我的自定义类中有一个`Color`属性。我们如何在 Silverlight 中找到 Color 为 Empty ？. 在 Wpf 中，我们有属性`IsEmpty`....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:03:43.743

对象的`Color`默认值为`#00000000`。您可以检查其 A、R、G、B 值。这些都是0。

以下可能性：

```
Color cl = new Color();//here A,R,G,B all are 0 
```

然后：

```
Color cl;//same case
if(cl.A==0 && cl.R==0 && cl.G==0 && cl.B==0)
{
  //do work here
} 
```

然后：

```
Color cl = Colors.Transparent;//This one is easier for comparison like in following condition
if(cl == Colors.Transparent)
{
  //do work here
} 
```

# php - 在 PHP 中以不同的方式选择关联数组中的元素

> ID：10780311
> 
> 赞同：4
> 
> 时间：2012-05-28T06:35:09.290
> 
> 标签：php, arrays, associative-array

好的，我在 PHP 中有这种关联数组

```
$arr = array(
    "fruit_aac" => "apple",
    "fruit_2de" => "banana",
    "fruit_ade" => "grapes",
    "other_add" => "sugar",
    "other_nut" => "coconut",
); 
```

现在我想要的是只选择以 key 开头的元素`fruit_`。这怎么可能？我可以使用正则表达式吗？或任何可用的 PHP 数组函数？有什么解决方法吗？请为您的解决方案举一些例子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:38:17.563

```
$fruits = array();
foreach ($arr as $key => $value) {
    if (strpos($key, 'fruit_') === 0) {
        $fruits[$key] = $value;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T06:39:03.490

一种解决方案如下：

```
foreach($arr as $key => $value){
     if(strpos($key, "fruit_") === 0) {
         ...
         ...
     }
} 
```

=== 确保在位置 0 找到字符串，因为 strpos 也可以在未找到字符串时返回 FALSE。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T06:47:40.847

你试一下：

```
function filter($var) {

    return strpos($var, 'fruit_') !== false;

}

$arr = array(
    "fruit_aac"=>"apple",
    "fruit_2de"=>"banana",
    "fruit_ade"=>"grapes",
    "other_add"=>"sugar",
    "other_nut"=>"coconut",
);

print_r(array_flip(array_filter(array_flip($arr), 'filter'))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T07:34:26.283

如果您想尝试正则表达式，那么您可以尝试下面给出的代码...

```
$arr = array("fruit_aac"=>"apple",
    "fruit_2de"=>"banana",
    "fruit_ade"=>"grapes",
    "other_add"=>"sugar",
    "other_nut"=>"coconut",
);

$arr2 = array();

foreach($arr AS $index=>$array){
if(preg_match("/^fruit_.*/", $index)){
        $arr2[$index] = $array;
}
}

print_r($arr2); 
```

我希望它对你有帮助。

谢谢

# iphone - 检查应用程序是否可以在越狱设备上运行

> ID：10780312
> 
> 赞同：0
> 
> 时间：2012-05-28T06:35:13.633
> 
> 标签：iphone

我有一个免费的应用程序，希望在有新版本时通知用户升级应用程序。但我需要检测该应用程序是否可以在越狱设备上运行。有没有办法检查应用程序是否可以在越狱设备上运行？我尝试阅读 Info.plist 的信息，但失败了。

欢迎任何评论

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:58:33.890

将以下代码添加到 AppDelegate 的`didFinishLaunchingWithOptions`方法中。这将识别出越狱的设备并做任何你想做的事情。

```
NSBundle *bundle = [NSBundle mainBundle];
NSDictionary *info = [bundle infoDictionary];

if ([info objectForKey: @"SignerIdentity"] != nil) {
        NSLog(@"jail broken");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:50:03.957

越狱允许 iOS 用户获得对操作系统的 root 访问权限（[维基百科](http://en.wikipedia.org/wiki/IOS_jailbreaking "维基")）。这意味着您的应用程序可以在越狱设备上访问具有 root 权限的文件系统。只需尝试访问沙盒之外的任何文件（创建、修改等）。如果可能，设备已越狱。

# c# - 如何检查用户是否在基于表单的身份验证中登录

> ID：10780313
> 
> 赞同：10
> 
> 时间：2012-05-28T06:35:19.090
> 
> 标签：c#, asp.net, asp.net-membership, forms-authentication

我想在我的网站中手动实现基于表单的身份验证。

我正在使用`Web.config`文件进行数据存储

```
<authentication mode="Forms">
  <forms loginUrl="~/Login.aspx" 
         name=".ASPXAUTH"
         path="/"
         requireSSL="false"
         slidingExpiration="true"
         defaultUrl="~/Admin/OrderHistory.aspx"
         cookieless="UseDeviceProfile"
         enableCrossAppRedirects="false"
         >
    <credentials passwordFormat="Clear">
      <user name="Admin" password="adm123$"/>
      <user name="Administrator" password="adm234%"/>
    </credentials>
  </forms>
</authentication>
<authorization>
  <deny users ="?" />
  <allow users = "*" />
</authorization> 
```

`Login.aspx`我使用 ASP.NET 登录控件获取用户名和密码的根级别有一个页面。

一切正常，但是当用户`logged in`手动转到`login.aspx`页面时，它不会将用户重定向到 defaultUrl 页面。

如果他已登录并手动进入 login.aspx 页面，我想将用户重定向到特定页面/defaultUrl 页面

怎么做？

## 登录按钮-点击

```
if (FormsAuthentication.Authenticate(LoginUser.UserName, LoginUser.Password))
    {
        FormsAuthentication.RedirectFromLoginPage(LoginUser.UserName, true);

    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-28T06:40:22.087

```
 if(HttpContext.Current.User.Identity.IsAuthenticated)
    {

    //Redirect to Default page
    Response.Redirect("default.aspx");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:39:31.477

我通常为此使用会话策略。

如果建立了会话，则将用户重定向到特定页面，或者引导他登录。

您可以在此处参考更多信息[http://asp.net-tutorials.com/state/sessions/](http://asp.net-tutorials.com/state/sessions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T04:42:49.060

在 web.config 文件中使用表单属性 defaulturl="xyz.aspx"(你的 URL)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T13:38:28.517

```
 protected void Page_Load(object sender, EventArgs e)
    {  
        if (!Request.UrlReferrer.Equals("http://localhost:1360/login_page.aspx"))
        {
            Response.Redirect("ERROR ==>? 404");
        }
    } 
```

# matlab - 如何在matlab中为簇分配标签

> ID：10780324
> 
> 赞同：-1
> 
> 时间：2012-05-28T06:36:36.640
> 
> 标签：matlab, plot

我有一个 50 点的数据集，我把它分成三个集群并绘制它们。我们如何标记这些集群..

```
 symbs= {'r+','g.','bv','m*','ko'};
    figure;
    hold on
    for i = 1: length(I)
    plot(X(I(i),1),X(I(i),2),symbs{i},'MarkerSize',20)
    plot(X(C==i,1),X(C==i,2),symbs{i})

    end 
```

我只想给那些绘制的集群打标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:06:34.463

**Approach 1:** Create a [legend](http://www.mathworks.com/help/techdoc/ref/legend.html)

```
symbs= {'r+','g.','bv','m*','ko'};
figure;
hold on
for i = 1: length(I)
    plot(X(I(i),1),X(I(i),2),symbs{i},'MarkerSize',20)
    plot(X(C==i,1),X(C==i,2),symbs{i})
end

labels = {'Cluster 1','Cluster 2','Cluster 3','Cluster 4','Cluster 5'};
legend(labels); 
```

Since you're plotting two graphics objects with each symbol, you will (probably) find that this doesn't look quite right: There will be two repetitions of each symbol in the legend rather than one. To solve this, store the [handles](http://www.mathworks.com/help/techdoc/learn_matlab/f3-15974.html) of one of the sets of objects, and use the handles as the first argument to `legend`.

```
for i = 1: length(I)
    h(i) = plot(X(I(i),1),X(I(i),2),symbs{i},'MarkerSize',20);
    plot(X(C==i,1),X(C==i,2),symbs{i})
end

labels = {'Cluster 1','Cluster 2','Cluster 3','Cluster 4','Cluster 5'};
legend(h, labels(1:length(h)) ); 
```

**Approach 2:** Use [annotation](http://www.mathworks.com/help/techdoc/ref/annotation.html)

Annotation lets you do things like draw arrows or place text boxes containing identifying information onto your plots. See the link for the options, and an example.

# extjs4 - 花费太多时间在 Extjs4 中加载 TreeGrid

> ID：10780330
> 
> 赞同：0
> 
> 时间：2012-05-28T06:37:24.113
> 
> 标签：extjs4

实际上我面临一个我不确定它来自哪里的问题？因为我是 Extjs 的新手，

所以我使用的是 Extjs4 的 TreeGrid。我有一个组合框，我必须在其中选择一个选项并执行搜索操作。搜索时它将填充 TreeGrid。

但是当我有一个巨大的 xml 文件需要填充到 TreeGrid 时，我遇到了问题。它花费了太多时间。那么任何人都可以帮助我确定问题所在吗？

在小型 xml 文件的情况下，它运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:44:35.893

我也发现加载大文件的问题。如果您的文件太大，请不要坚持使用 XML。尝试使用 JSON 格式。它会在大文件上表现得更好。要读取 XML，您需要解析它，读取 XML 文档中的节点、属性和子节点，然后使用您找到的数据。

使用 JSON 很容易获取数据，因为它已经是原生 javascript。不需要解析器或代理——您需要做的就是快速而简单地循环遍历数据。 [http://think2loud.com/680-json-xml/](http://think2loud.com/680-json-xml/)

# javascript - 如何在每个循环中处理 jQuery 中的第 n 个元素？

> ID：10780332
> 
> 赞同：0
> 
> 时间：2012-05-28T06:37:25.360
> 
> 标签：javascript, jquery-selectors, jquery

`each`我正在循环中处理一系列元素

```
function test(){
  $('#first li').each(function(n){$(this).//here is the jQuery effects for nth li
  \\ here I want to process nth li of id="second" too
}); 
```

我怎样才能同时处理另一个 id 的第 n 个元素？

例如，我想为`li`DIV 的第一个 s`first`和`second`;制作 jQuery 效果。然后`li`是两个 DIV 的第二个。

```
<div id="first">
  <ul>
    <li>something</li>
    <li>something</li>
    <li>something</li>
  </ul>
</div>

<div id="second">
  <ul>
    <li>to be effect with 1st li of FIRST</li>
    <li>to be effect with 2nd li of FIRST</li>
    <li>to be effect with 3rd li of FIRST</li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:39:57.593

```
var $first =$('#first li');

var $second = $('#second li');

$second.each(function(n){
    $(this).fadeOut();
    $first.eq(n).fadeOut();
}); 
```

[**现场演示**](http://jsfiddle.net/HdkJ5/1)

* * *

笔记：

```
<div id="first>
<div id="second> 
```

应该：

```
<div id="first">
<div id="second">

"first => "first"
"second => "second" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:40:27.560

.each() 提供索引作为第一个参数。它是基于零的索引。 [http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:41:00.367

```
function test(){
  $('#first li').each(function(index, element){
      $(this).bar(); // or $(element).bar();
      $('#second li').eq(index).doSomething();
  });
} 
```

`<div id="first> and <div id="second>`应该`<div id="first"> and <div id="second">`

# jquery - 将 Ajax-jQuery 应用于动态创建的行 - 在 Yii 中

> ID：10780336
> 
> 赞同：0
> 
> 时间：2012-05-28T06:37:50.403
> 
> 标签：jquery, dynamic, yii

如果有人能给我一些想法，我已经尝试了一切，但一无所获。

我得到了 cJUIcomplete 工作 bt 我正在做的事情 - 库存管理

打折形式-我的想法以类似的方式建造

产品名称 - 未结库存 - 数量 - 价格 - 总计（添加新行）

在产品名称文本框中，我使用 CJUIcomplete 从 n 个列表中搜索产品名称。

当我选择任何产品时，开放库存和价格字段应显示相应产品模型中选择的产品的值。

请在这个问题上帮助我。

谢谢德文达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:55:30.243

在没有看到任何实际代码的情况下，很难知道事情在哪里。

```
$('#myGridId').on('click', 'thead tr th:last-child a', function() {
//Do something here.
}); 
```

# facebook - Facebook 无法分析我的网页以确定共享链接的有用图像等

> ID：10780340
> 
> 赞同：0
> 
> 时间：2012-05-28T06:38:01.977
> 
> 标签：facebook, html, debugging, facebook-opengraph

我正在努力确保通过 Facebook 共享链接提供有意义的信息，这些链接指向我网站上的 HTML5 页面。现在，链接只是显示为一个 URL，没有描述或附带的图像。

我一直在使用开放图形标签在页面上提供元数据。

我一直在尝试使用[Facebook 调试工具](http://developers.facebook.com/tools/debug)检查网站上的页面，但该工具没有从被检查的页面中获取任何数据。

例如，我尝试调试页面：[http](http://www.gaiaguide.info/do/Hierarchy) ://www.gaiaguide.info/do/Hierarchy 它响应错误：“无法从 URL 检索数据。”

调试工具提供的graph API数据有以下值：

```
{
   "error": {
      "message": "An unknown error has occurred.",
      "type": "OAuthException",
      "code": 1
   }
} 
```

当我查看 Facebook 刮板看到的页面时，我得到的只是以下内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> 
```

缺少整个 HTML 内容。更奇怪的是，它甚至与我要测试的页面的文档类型不同。

我不清楚为什么会引发 OAuthException。该页面对外部源可见以进行验证。例如，我在一个 HTML5 验证站点上验证了该页面，它肯定会看到整个页面内容。

我已经尝试过来自同一服务器的同一 IP 地址上的其他站点的 URL，它们很好。在将用于构建共享链接的信息集中提供了适当的图像和摘要。

我发现在 Facebook 调试器上验证良好的其他 HTML5 页面。

我试图从页面中删除 og:* 元标记，以查看它们是否导致 Facebook 认为该网站应该需要某种用户身份验证，但这并没有影响问题。

我试图删除负责将图标共享到页面的“sharethis.com”标记和 Javascript，但这也没有任何效果。

任何对应该是一个简单问题的见解将不胜感激。

谢谢

杰夫小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:14:54.527

我可以在您的页面上看到的唯一问题是 HTML 代码顶部的空白区域。我复制了您的页面 (http://www.webniraj.com/hierarchy.html)，并在删除文件开头的奇数字符后将其通过调试器。

之后页面似乎正常工作：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.webniraj.com%2Fhierarchy.html](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.webniraj.com%2Fhierarchy.html)

# ruby-on-rails - 向数据库插入新记录时出错

> ID：10780341
> 
> 赞同：0
> 
> 时间：2012-05-28T06:38:04.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我在 Ubuntu 上使用 Rails 3.2.3，下面是我的模式文件和模型文件代码：

***架构.rb***

```
ActiveRecord::Schema.define(:version => 20120528062318) do

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "password_digest"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true

end 
```

***用户.rb***

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  valides :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

我尝试使用以下命令从 Rails 控制台向数据库输入新记录：User.create(name: 'Hilal Agil', email: 'hilaal@me.com', password: 'welcome', password_confirmation: 'welcome' ) 我收到以下错误：

```
NoMethodError: undefined method `valides' for #<Class:0xaeba6cc>
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
        from /home/hilarl/workspace/twitster/app/models/user.rb:17:in `<class:User>'
        from /home/hilarl/workspace/twitster/app/models/user.rb:12:in `<top (required)>'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_consta
nt'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in `block in const_miss
ing'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from (irb):2
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
        from /home/hilarl/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'1.9.3p194 :003 > 
```

知道我在这里做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:40:44.107

你有一个错字。这一行：

```
valides :name, presence: true, length: { maximum: 50 } 
```

应该这样说：

```
validates :name, presence: true, length: { maximum: 50 } 
```

如果您查看错误消息，您会看到它告诉您您正在尝试调用一个不存在的方法名称验证。

# jquery - QuickSand Script not showing correctly in IE 7

> ID：10780350
> 
> 赞同：0
> 
> 时间：2012-05-28T06:38:57.217
> 
> 标签：jquery, css, quicksand

I have an edited version of quicksand in my website, it shows correctly on all browsers or at least chrome opera and firefox. However, on IE I get css problems. when i was using the static version the css showed correctly even on IE , did not change any css just added quicksand effect, but it did mess up the display allthough all the animations work great.. please go to this website [http://www.jonathansconstruction.com/galleryie.php](http://www.jonathansconstruction.com/galleryie.php) the quicksand code is as follow:

```
$(document).ready(function(){

var items = $('.photo_show figure'),
    itemsByTags = {};

// Looping though all the li items:

items.each(function(i){
    var elem = $(this),
        tags = elem.data('tags').split(',');

    // Adding a data-id attribute. Required by the Quicksand plugin:
    elem.attr('data-id',i);

    $.each(tags,function(key,value){

        // Removing extra whitespace:
        value = $.trim(value);

        if(!(value in itemsByTags)){
            // Create an empty array to hold this item:
            itemsByTags[value] = [];
        }

        // Each item is added to one array per tag:
        itemsByTags[value].push(elem);
    });

});

// Creating the "Everything" option in the menu:
createList('View All',items);

// Looping though the arrays in itemsByTags:
$.each(itemsByTags,function(k,v){
    createList(k,v);
});

$('#gallery_menu nav a').live('click',function(e){
    var link = $(this);

    link.addClass('current').siblings().removeClass('current');

    // Using the Quicksand plugin to animate the li items.
    // It uses data('list') defined by our createList function:

    $('.photo_show').quicksand(link.data('list').find('figure'), function(){

adjustHeight = 'dynamic';
initLytebox();

       });
    e.preventDefault();
});

$('#gallery_menu nav a:first').click();

function createList(text,items){

    // This is a helper function that takes the
    // text of a menu button and array of li items

    // Creating an empty unordered list:
    var figure = $('<figure>',{'class':'hidden'});

    $.each(items,function(){
        // Creating a copy of each li item
        // and adding it to the list:

        $(this).clone().appendTo(figure);
    });

    figure.appendTo('.photo_show');

    // Creating a menu item. The unordered list is added
    // as a data parameter (available via .data('list'):

    var a = $('<a>',{
        html: text,
        href:'#',
        data: {list:figure}
    }).appendTo('#gallery_menu nav');
}
 }); 
```

Please go to the URL above and check on IE 7, and other , also I put a screenshow of how it looks like in IE please visit here: [http://i49.tinypic.com/25tj2bl.jpg](http://i49.tinypic.com/25tj2bl.jpg) this is how it appears on IE7 and screenshot on other browsers is on the comments of this question : Any Help is appreciated.. I'm new to jquery and its plugins and sometimes the syntax gets me confused...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:34:02.397

您用于**Body 部分**的**line-height**太小，这会剪裁标题部分**Gallery Pictures**中看到的风格化字体文本。

 ****在您的自定义`styleie.css`文件中更改高度的值，如下所示：

```
line-height:2.12em 
```

出于某种奇怪的原因，IE 要求它比标准 CSS 文件中使用的相同值更大。如果需要，检查父元素是否影响这些子元素。

**编辑：**毕竟不需要更改上面的 line-height 。在同一行中有一个错字：

```
display:inline:block; 
```

将其更改为：

```
display:inline-block; 
```****

# date - 获取给定月份的结束日期

> ID：10780374
> 
> 赞同：0
> 
> 时间：2012-05-28T06:41:22.787
> 
> 标签：date, php

出于某种计算目的，我需要获取给定月份的结束日期，

我怎么能在 PHP 中做到这一点，我尝试使用 date() 函数，但它没有用。

我用这个：

```
date($year.'-'.$month.'-t'); 
```

但这给出了当前月份的结束日期。我想我在某个地方错了，我找不到我要去哪里错了。

如果我将年份设为 2012 并将月份设为 03，那么它必须显示为 2012-03-31。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:46:03.423

此代码将为您提供特定月份的最后一天。

```
$datetocheck = "2012-03-01";
$lastday = date('t',strtotime($datetocheck)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T06:48:46.040

您想用以下方式替换您的`date()`电话：

```
date('Y-m-t', strtotime($year.'-'.$month.'-01')); 
```

第一个参数 to`date()`是您要返回的格式，第二个参数必须是 unix 时间戳（或不传递以使用当前时间戳）。在您的情况下，您可以使用函数生成时间戳`strtotime()`，将日期字符串传递给它，其中包含年、月和 01 日。它将返回相同的年份和月份，但`-t`格式中的 将替换为该月的最后一天。

如果您只想返回没有年份和月份的月份的最后一天：

```
date('t', strtotime($year.'-'.$month.'-01')); 
```

只需`'t'`用作您的格式字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:47:28.490

这个月：

```
echo date('Y-m-t'); 
```

任何月份：

```
echo date('Y-m-t', strtotime("$year-$month-1")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T06:45:27.827

试试下面的代码。

```
$m = '03';//
$y = '2012'; //

$first_date = date('Y-m-d',mktime(0, 0, 0, $m , 1, $y));

$last_day   = date('t',strtotime($first_date));
$last_date = date('Y-m-d',mktime(0, 0, 0, $m ,$last_day, $y)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:45:47.963

```
function lastday($month = '', $year = '') {
   if (empty($month)) {
      $month = date('m');
   }
   if (empty($year)) {
      $year = date('Y');
   }
   $result = strtotime("{$year}-{$month}-01");
   $result = strtotime('-1 second', strtotime('+1 month', $result));
   return date('Y-m-d', $result);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T06:46:23.327

```
 function firstOfMonth() {
return date("Y-m-d", strtotime(date('m').'/01/'.date('Y').' 00:00:00')). 'T00:00:00';}

function lastOfMonth() {
return date("Y-m-d", strtotime('-1 second',strtotime('+1 month',strtotime(date('m').'/01/'.date('Y').' 00:00:00')))). 'T23:59:59';}

$date1 = firstOfMonth();
$date2  = lastOfMonth(); 
```

试试这个，这会给你当前月份的开始和结束日期。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T06:47:03.483

```
date("Y-m-d",strtotime("-1 day" ,strtotime("+1 month",strtotime(date("m")."-01-".date("Y"))))); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-28T06:52:05.630

```
function getEndDate($year, $month)
{
   $day = array(1=>31,2=>28,3=>31,4=>30,5=>31,6=>30,7=>31,8=>31,9=>30,10=>31,11=>30,12=>31);
   if($year%100 == 0)
   {
       if($year%400 == 0)
         $day[$month] = 29;
   }
   else if($year%4 == 0)
       $day[$month] = 29;

   return "{$year}-{$month}-{$day[$month]}";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-11T04:03:28.603

如果您使用的是 PHP >= 5.2，我强烈建议您使用新的 DateTime 对象。例如如下：

```
$a_date = "2012-03-23";
$date = new DateTime($a_date);
$date->modify('last day of this month');
echo $date->format('Y-m-d'); 
```

# iphone - 在 iOS 上，如果 CALayer 的子类与空显示方法一起使用，那么应用似乎进入了无限循环？

> ID：10780376
> 
> 赞同：0
> 
> 时间：2012-05-28T06:41:33.077
> 
> 标签：iphone, ios, uiview, core-animation, calayer

`FooView`如果使用that subclasses创建了 Single View 应用程序`UIView`，然后执行

```
NSLog(@"hello"); 
```

in `drawRect`，然后打印出来。

如果我创建一个`CALayer`被调用的子类`CoolLayer`，并将这个方法添加到`FooView.m`：

```
+(Class) layerClass {
    return [CoolLayer class];
} 
```

`FooView.m`在's的末尾`drawRect`，做一个

```
NSLog(@"layer's class is %@", self.layer.class); 
```

然后`CoolLayer`被打印。所以现在视图的底层是`CoolLayer`.

但是当以下添加到`CoolLayer.m`：

```
-(void) display {

} 
```

这是自动调用以重绘图层的方法（类似于`drawRect`），然后没有`NSLog`打印任何内容。可能是应用程序进入了无限循环。（即使`touchesBegan`是打印出 NSLog 消息的我也没有打印）。如果断点设置在`display`，它会停在那里一次，但是当我继续程序时，它将永远不会再到达`display`。这有什么问题，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:14:37.413

这听起来不像是无限循环。如果您处于无限循环中，您的应用程序将冻结，几秒钟后，跳板应用程序会因无响应而终止它。

在您的图层上调用 setNeedsDisplay 或 setNeedsDisplayInRect 以使其“变脏”并要求再次绘制。请注意，您不必再调用 setNeedsDisplay，因为重新渲染图层并将其内容推送到屏幕上需要大量工作。仅在某些内容发生更改时显示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:36:16.377

图层的显示方法不会被再次调用，除非图层是脏的，即设置为需要重新显示。这通常是一件好事，这就是为什么您不会看到该方法被多次调用的原因。

此外，显示的正常实现将调用该`drawInContext:`方法。由于您在子类中覆盖它，`drawRect:`因此永远不会调用视图的方法。您需要复制 的标准行为，或者在您自己的实现中`CALayer`调用超类的方法。`display`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T22:20:24.957

您在这里看不到无限循环。如果你是，正如邓肯所指出的那样，你最终会因为看门狗定时器或无限递归而崩溃，这在你在调试器中看到的堆栈跟踪中会立即显而易见。

如果您将 NSLog 放入 UIView 的`-drawRect:`方法中，然后使用您自己的自定义 CALayer 覆盖其默认图层类，该 CALayer`-drawRect:`将不再调用您的 UIView。绘图现在将由您的自定义支持层处理。

正如核心动画编程指南的“[通过子类化提供 CALayer 内容](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/ProvidingCALayerContent.html#//apple_ref/doc/uid/TP40006642-SW8)`-display`”小节中所述，如果您想以某种方式`contents`为您的图层自定义 CGImageRef，您通常会在您的 CALayer 中覆盖。通常，`-drawInContext:`如果您想在您的 CALayer 中渲染自定义 Quartz 绘图，您将被覆盖。使您的覆盖`-display`方法完全空白，并且不向属性写入任何内容，这`contents`不是标准行为，因此您看到这样做的奇怪结果并不奇怪。

根据您最近的一系列问题，我强烈建议您停下来花一些时间阅读 Core Animation Programming Guide 并查看一些涉及 CALayers 的示例代码，然后再继续。

# wpf - WPF 组合框动态绑定

> ID：10780380
> 
> 赞同：0
> 
> 时间：2012-05-28T06:42:00.290
> 
> 标签：wpf, combobox, wpfdatagrid, dynamic-binding

我在数据网格edititemtemplate中有一个组合框，我在组合框加载事件中编写了一些代码，例如：

**代码：**

```
private void cmbGFld_Loaded(object sender, RoutedEventArgs e)
        {
            ComboBox cmb = (ComboBox)sender; 
            cmb.ItemsSource = FieldsList.GetFieldList();
            ConditionField cData = condLists[FieldGrid.SelectedIndex];
            cmb.SelectedItem = cData.FieldType;
        } 
```

**XAML 代码：**

```
<toolkit:DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate x:Name="editTemplate">
                                            <ComboBox Loaded="cmbGFld_Loaded" BorderBrush="Transparent" SelectedItem="{Binding Path=FieldType}" SelectedValuePath="Name" BorderThickness="0" FontSize="13" FontStyle="Italic" FontWeight="Normal" Foreground="DimGray" x:Name="cmbGFld" Template="{StaticResource ComboBoxTemplate2}">
                                                <ComboBox.Resources>
                                                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}">Green</SolidColorBrush>
                                                </ComboBox.Resources>
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock HorizontalAlignment="Left"  Text="{Binding Name}"/>
                                        </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>

                                        </DataTemplate>
                                    </toolkit:DataGridTemplateColumn.CellEditingTemplate> 
```

但问题是，当我尝试编辑组合框时，它没有显示已选择的组合框，任何人都可以帮助我。

谢谢，@nag。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:13:47.540

`cmb.SelectedItem = cData.FieldType;`不带in试试`cmbGFld_Loaded()`。这将覆盖`SelectedItem="{Binding Path=FieldType}"`XAML 中的绑定。而是在绑定的 FieldType 属性中设置所选项目。我不知道您的应用程序，但类似：

```
FieldType = condLists[FieldGrid.SelectedIndex].FieldType; 
```

# .htaccess - 内部服务器错误 joomla 1.5

> ID：10780392
> 
> 赞同：1
> 
> 时间：2012-05-28T06:42:57.217
> 
> 标签：.htaccess, joomla1.5, internal-server-error

请在 joomla 1.5 中帮助我。我的网站出现内部服务器错误，请给我正确的解决方法。

错误日志：

```
/home/xxx/public_html/.htaccess: Option FollowSymLinks not allowed here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:47:04.017

在 .htaccess 文件中，尝试注释该行：

```
Options +FollowSymLinks 
```

该错误可能是因为 apache httpd 主虚拟主机配置不允许您使用`Options`.

# image-processing - OpenCV：在 x 轴上查找峰值位置的优化方法

> ID：10780393
> 
> 赞同：-1
> 
> 时间：2012-05-28T06:42:58.137
> 
> 标签：image-processing, opencv, opencvdotnet

要检测下图中峰值的位置（在 x 轴上）

![在此处输入图像描述](../Images/96df337eda974213996a004dc230183e.png)

如果图像是垂直的，我会应用 CvMinMax 来定位峰值。但由于这里是水平的，我面临着困难。有没有办法可以使用 CvMinMax 来定位这个峰值？（我不想旋转图像）

作为最后一个选项，我必须搜索每一列，我不想这样做，因为这将非常昂贵。有没有优化的方法来搜索这些峰值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:35:05.827

这是一个快速的方法：

1.  使用 . 一次获取所有列的总和`cv.Reduce`。这给了我们一个列和的向量。
2.  阈值这个向量，所以它实际上是二进制的。
3.  在垂直轴上翻转图像。
4.  使用`cv.MinMaxLoc`，它报告从左侧找到的第一个最小值和第一个最大值的位置（由于图像是二进制的，它为我们提供了第一个非零值）。
5.  计算列位置。

这里它是用python实现的，应该很容易转换成C，因为它们都是内置的opencv函数。

```
def find_left_max4(im):
    sums = cv.CreateImage((im.width, 1), cv.IPL_DEPTH_32F, 1)
    cv.Reduce(im, sums, dim=0, op=cv.CV_REDUCE_SUM)
    cv.Threshold(sums, sums,200, 255, cv.CV_THRESH_BINARY)
    cv.Flip(sums, flipMode=1)
    return sums.width - cv.MinMaxLoc(sums)[3][0] - 1

im = cv.LoadImage('zfUHp.jpg',cv.CV_LOAD_IMAGE_GRAYSCALE)
print find_right_max4(im)
#Output:
324 
```

我认为您无法在速度上击败这种方法。对于我的慢速计算机，它的时钟速度为 54 µs（比我之前的帖子快十倍）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:04:57.483

逐行访问图像的像素并使用简单的距离方法。我希望你也不需要代码。

# java - Android以编程方式强制关闭处理

> ID：10780396
> 
> 赞同：0
> 
> 时间：2012-05-28T06:43:11.787
> 
> 标签：java, android, forceclose

我正在开发安卓应用程序。我想要的是处理强制关闭错误，即当发生强制关闭时，我可以执行某个操作而不是强制关闭弹出窗口外观。例如，在 forceclose 上调用方法

```
public void forcecloseoccurs(){
Toast.show("force closed");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:46:48.017

你不能直接控制强制关闭弹出。在您的日志中检查导致强制关闭的错误/异常是什么。例如，如果它的 NullPointerException，您应该尝试处理它。

# reverse-engineering - PDB 文件中不存在导出的别名符号（RegisterClipboardFormat 具有 RegisterWindowMessage 内部名称）

> ID：10780402
> 
> 赞同：2
> 
> 时间：2012-05-28T06:43:51.023
> 
> 标签：reverse-engineering, windbg, symbols, debug-symbols, systems-programming

我正在尝试在 user32 中设置断点！RegisterClipboardFormat 显然，此函数已导出（链接 /dump /exports - 它就在那里）。在从 Microsoft 符号服务器下载 PDB 文件之前，我能够找到这个函数：

```
0:001> lm m user32
start    end
76eb0000 76fcf000   USER32     (export symbols)       c:\Windows\system32\USER32.dll

0:001> x user32!RegisterClipboardFormat*
76ec4eae USER32!RegisterClipboardFormatA (<no parameter info>)
76ec6ffa USER32!RegisterClipboardFormatW (<no parameter info>) 
```

没问题。我能够“购买”任何这些功能。但是当我从 Microsoft PDB 服务器下载 PDB 符号时：

```
0:001> 
start    end        module name
76d50000 76e6f000   USER32     (pdb symbols)          c:\symbols\user32.pdb\561A146545614951BDB6282F2E3522F72\user32.pdb

0:000> x user32!RegisterClipboardFormat 
```

WinDBG 找不到符号。但是，它可以找到 RegisterWindowMesssage：

```
0:000> x user32!RegisterWindowMessage*
76d64eae          USER32!RegisterWindowMessageA = <no type information>
76d66ffa          USER32!RegisterWindowMessageW = <no type information> 
```

请注意，这些函数具有相同的地址（这是在 Windows 8 上。不确定以前的版本）。这可能是通过优化器或在 DEF 文件中实现的（EXPORT 部分中的 func1=func2）。'link /dump /exports' 显示 RegisterWindowMessage 和 RegisterClipboardFormat 具有相同的 RVA。

问题是我在这上面花了太多时间。所以我的问题是：

1.  是否有一种简单的方法，从 WinDBG 中找出丢失的别名导出符号。
2.  假设我只想打破 RegisterClipboardFormatW。如果我没记错的话，应该有一个 JMP 指令（在调用模块导入表中）。我如何找到那个符号？有没有办法在所有调用模块中找到这个条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:21:31.647

由于`RegisterWindowMessage`和`RegisterClipboardFormat`具有相同的 RVA，因此它们共享相同的实现。显然，Windows 对这两者没有任何区别，剪贴板格式和窗口消息共享相同的标识符域。

对于您的第一个问题——如何找出哪个实现函数对应于导出的函数。（假设您已修复符号）首先找出导出的 RVA：

```
C:\>link /dump /exports C:\Windows\Syswow64\user32.dll |findstr RegisterClipboardFormat
   2104  24F 00020AFA RegisterClipboardFormatA
   2105  250 00019EBD RegisterClipboardFormatW 
```

然后在 WinDbg 中找到加载 DLL 的起始地址。命令`lm`或`lml`列出所有模块，你只需要找到你所追求的模块：

```
0:001> lml
start    end        module name
75460000 75560000   USER32 
```

使用 RVA 作为起始地址的偏移量，获取与其对应的符号：

```
0:002> ln 75460000+00020AFA
(75480afa)   USER32!RegisterWindowMessageA   |  (75480b4a)   USER32!MsgWaitForMultipleObjects
Exact matches:
0:002> ln 75460000+00019EBD
(75479ebd)   USER32!RegisterWindowMessageW   |  (75479eea)   USER32!NtUserGetProcessWindowStation
Exact matches: 
```

所以在这里我们实际上发现RegisterClipboardFormat实际上调用了RegisterWindowMessage。

你的第二个问题——如何只在 RegisterClipboardFormat 上放置断点，而不是在 RegisterWindowMessage 上。通常这是不可能的，因为它们共享相同的实现。例如，您的应用程序可能会调用`GetProcAddress("RegisterClipboardFormat")`，您将很难确定它是否调用了一个函数或另一个函数。但是，如果您知道调用是通过导入的函数进行的，那么您可以这样做。所有导入的函数都在应用程序的导入地址表中声明。如果在导入地址表的条目上放置*访问*断点，则可以在调用之前中断。这可能是特定于编译器的，但我知道 Visual C++ 将符号名称分配给导入地址表中的条目。在这种情况下，放置断点很容易：

```
ba r4 MyModule!_imp_RegisterClipboardFormatA 
```

# sql - 创建过滤索引

> ID：10780407
> 
> 赞同：1
> 
> 时间：2012-05-28T06:44:20.790
> 
> 标签：sql, sql-server-2008

我想在 (Column1 = Column2) 条件下创建过滤索引：

```
CREATE NONCLUSTERED INDEX [IX_Document_IsBalanced]
ON [ACC].[Document] ([DocumentID] ASC)
WHERE SumCredit = SumDebit
ON [PRIMARY]
GO 
```

错误消息是：

> 关键字“with”附近的语法不正确

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T06:57:28.397

文档在这个问题上相当混乱，但你不能真正创建一个在这个条件下过滤的索引（因为它不能用于过滤统计信息）。

文档说：

> 过滤谓词使用简单的比较逻辑

没有明确定义“简单”，但实际上“简单”意味着“可供过滤统计信息使用”。两者有相同的限制。

统计数据只能使用等式、范围和列表中的常量。这意味着您只能使用以下谓词：

```
column = const
column > const
column < const
column IN (const1, const1) 
```

及其变体（`BETWEEN`等），可能与`AND`（甚至不是`OR`）结合。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-05-28T06:48:23.420

过滤索引是 SQL Server 2012 功能 - 这是MSDN 关于语法的[文档](http://msdn.microsoft.com/en-us/library/cc280372.aspx)

例如：

```
CREATE NONCLUSTERED INDEX FIBillOfMaterialsWithEndDate
    ON Production.BillOfMaterials (ComponentID, StartDate)
    WHERE EndDate IS NOT NULL ;
GO 
```

# bash - 如何在bash中匹配多个单词

> ID：10780410
> 
> 赞同：1
> 
> 时间：2012-05-28T06:44:28.387
> 
> 标签：bash

我想列出名称模式如 [max|min].txt 的文件，因此 `ls [max|min].txt`在 bash shell 中执行，但它不起作用，我得到的错误消息是： **ls: cannot access [max: No such file或目录**

那么完成这项工作的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:47:04.380

方括号用于字符匹配，竖线用于管道。您正在寻找[**大括号扩展**](http://wiki.bash-hackers.org/syntax/expansion/brace)。

```
ls {max,min}.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T12:43:20.443

Bash 有一个名为的 shell 选项`extglob`，您可以使用命令启用该选项`shopt -s extglob`。这将允许您使用模式格式`@(pattern-list)`，其中`pattern-list`管道分隔的模式列表。它将与文件名匹配，并排除任何与文件名不匹配的模式，就像`[abc]`范围表达式一样。Bash 也有大括号扩展，但这似乎不是您所要求的，因为大括号扩展与文件名不匹配，也不像通配符或范围表达式那样扩展。

```
$ shopt -s extglob
$ touch max.txt min.txt
$ echo @(max|min).txt
max.txt min.txt
$ echo @(min|mid|max).txt
max.txt min.txt
$ echo {min,mid,max}.txt
min.txt mid.txt max.txt 
```

关于上面的命令序列有几点需要注意：

1.  `echo @(mid|min|max).txt`不输出`mid.txt`，因为没有匹配的文件。
2.  `echo @(min|mid|max).txt`以与通配符扩展相同的方式重新排序要排序的输出。
3.  `echo {min,mid,max}.txt`是大括号扩展并按给定顺序输出所有元素。

# c# - C# 处理 HEX 值和二进制转换

> ID：10780411
> 
> 赞同：2
> 
> 时间：2012-05-28T06:44:33.987
> 
> 标签：c#, namespaces, binary, hex

有没有办法处理十六进制值（例如，异或值和移位字节）我需要整个程序只处理十六进制，如果输入是二进制的，则将其转换为十六进制。

1.  有十六进制命名空间吗？
2.  除了使用字符串之外，还有其他方法可以表示 HEX 吗？

因为我需要计算零和一的数量（对于我正在执行的一些测试），*而*无需将其转换为二进制。所以不管它看起来如何，只要有一种方法可以将它作为 HEX 来处理。

我需要知道可能性和我的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:56:42.370

十六进制、二进制和十进制是同一对象的不同面，即整数。

将十六进制解析为 int 是这样完成的：

```
int i = int.Parse( "FFFFFF", System.Globalization.NumberStyles.HexNumber ); 
```

将 int 转换为十六进制字符串是这样完成的：

```
string s = i.ToString("x"); 
```

可以使用十六进制表示法在 C# 中定义数字：

```
int i = 0xFFFFFF; 
```

[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)也可用于存储字节。它确实具有 AND、OR、XOR 和 NOT 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:51:30.433

你还没有真正清楚你的输入和输出要求是什么，这很家庭作业，但是：

```
 var x = 0x1111L;

        /// number of bits that are on
        var ones = 0;

        /// number of bits that are off
        var zeros = 0;

        var bitLength = Marshal.SizeOf(x) * 8;

        while (x > 0)
        {
            if ((x & 1) > 0)
            {
                ones++;
            }
            x >>= 1;
        }

        zeros = bitLength - ones;

        Console.WriteLine("{0} bits are on, {1} are off", ones, zeros); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:10:27.730

十六进制（base-16），十进制（base-10），八进制（base-8）等对计算机没有任何*意义。*想让计算机“使用 HEX”工作是……毫无意义。

处理原始数据最合适的数据格式是原语，例如`byte`（可能在 a 中`byte[]`），或者（可以说更好）在更大的复合中，例如`int`/ `long`（通过允许您使用多个值，可以节省很多性能同时）。当然，如果您***决定***使用`string`（我不推荐），对于诸如“二进制位计数”之类的事情，您可以简单地通过预先计算每个 0- 中设置的位数来在字符级别处理它9，AF，并且只是针对该值进行查找。

不，没有“HEX”命名空间，因为它是多余的。十六进制**只是一个数字**；不管我们这些意志薄弱的肉体人类怎么想，这个数字都是一样的。同样，您可以使用类似的预先生成的查找来更改/更改数字，或通过以下方式即时更改：

```
int i = Convert.ToInt32("f3", 16); // hex to Int32
string hex = i.ToString("x2"); // Int32 to hex 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-03T17:25:35.397

这是一些“手动”方法

```
static void ConvertBinToHex(string hexadecimal)
{
    if (hexadecimal.Length == 0)
        return;

    string binary = string.Empty;

    for (int i = 0; i < hexadecimal.Length; i++)
    {
        switch (hexadecimal[i])
        {
            case '0': binary += "0000"; break;
            case '1': binary += "0001"; break;
            case '2': binary += "0010"; break;
            case '3': binary += "0011"; break;
            case '4': binary += "0100"; break;
            case '5': binary += "0101"; break;
            case '6': binary += "0110"; break;
            case '7': binary += "0111"; break;
            case '8': binary += "1000"; break;
            case '9': binary += "1001"; break;
            case 'A': binary += "1010"; break;
            case 'B': binary += "1011"; break;
            case 'C': binary += "1100"; break;
            case 'D': binary += "1101"; break;
            case 'E': binary += "1110"; break;
            case 'F': binary += "1111"; break;

            default:
                break;
        }
    }

    //remove leading zero's
    binary = binary.Trim('0');
    Console.WriteLine(binary);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:52:03.603

可能[`BitArray`](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)是您正在寻找的。

# android - 膨胀类 android.support.v4.view.ViewPager 时出错

> ID：10780413
> 
> 赞同：18
> 
> 时间：2012-05-28T06:44:34.593
> 
> 标签：android, android-viewpager, inflate-exception

我一直在尝试为我的应用程序创建一个寻呼机，该应用程序在`<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="15" />`我根据[这篇博客文章](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)编写的代码上运行。

**寻呼机活动的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/instructionsViewPager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
</LinearLayout> 
```

**适配器代码：**

```
public class MyPagerAdapter extends PagerAdapter {

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 2;
    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return (arg0 == ((View) arg1));
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        LayoutInflater inflater = (LayoutInflater) container.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;
        switch (position) {
        case 1:
            resId = R.layout.instructions_page1;
            break;
        case 2:
            resId = R.layout.instructions_page2;
            break;
        }
        View view = inflater.inflate(resId, null);
        ((ViewPager) container).addView(view, 0);
        return view;
    }
} 
```

**活动代码**

```
public class Instructions extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.instructions);

        MyPagerAdapter adapter = new MyPagerAdapter();
        ViewPager pager = (ViewPager) findViewById(R.id.instructionsViewPager);
        pager.setAdapter(adapter);
        pager.setCurrentItem(0);
    }
} 
```

出于某种原因，当我运行这个应用程序时，我得到以下错误列表：

```
05-28 09:38:54.535: E/AndroidRuntime(18658): FATAL EXCEPTION: main
05-28 09:38:54.535: E/AndroidRuntime(18658): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thepoosh/com.thepoosh.Instructions}: android.view.InflateException: Binary XML file line #7: Error inflating class android.support.v4.view.ViewPager
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.os.Looper.loop(Looper.java:123)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at java.lang.reflect.Method.invokeNative(Native Method)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at java.lang.reflect.Method.invoke(Method.java:507)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at dalvik.system.NativeStart.main(Native Method)
05-28 09:38:54.535: E/AndroidRuntime(18658): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class android.support.v4.view.ViewPager
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.Activity.setContentView(Activity.java:1663)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at com.thepoosh.Instructions.onCreate(Instructions.java:11)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-28 09:38:54.535: E/AndroidRuntime(18658):    ... 11 more
05-28 09:38:54.535: E/AndroidRuntime(18658): Caused by: java.lang.ClassNotFoundException: android.support.v4.view.ViewPager in loader dalvik.system.PathClassLoader[/data/app/com.thepoosh-1.apk]
05-28 09:38:54.535: E/AndroidRuntime(18658):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
05-28 09:38:54.535: E/AndroidRuntime(18658):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
05-28 09:38:54.535: E/AndroidRuntime(18658):    ... 20 more 
```

所以，我知道它失败了，因为我正在使用`android.support.v4.view.ViewPager`，我尝试使用它并更改为普通`ViewPager`和导入`android.support.v13`，但它没有帮助......

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-13T12:32:42.800

去`Project → Properties → Java Build Path`比选择`Order and Export tab`。

将`android-support-v4.jar`库设置为选中并将其置于列表顶部。并清理和重建..它适用于大多数情况

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2019-12-27T17:31:31.047

我只是用这个替换了代码并且它有效

```
 <androidx.viewpager.widget.ViewPager
        android:id="@+id/main_tabPager"
        android:layout_width="match_parent"> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-28T07:54:31.730

确保将库放在项目中的公共文件夹中，例如 libs。

右键单击 jar，然后选择 Build Path，然后单击 Add to Build Path。

这会将您的库添加到您的项目中。如果一切正确，您可以在名为“Referenced Libraries”的项目中生成的“文件夹”中看到它

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-17T02:05:27.843

当我们使用新的 adt JARS 时，应该放在名为“libs”的文件夹中

然后 libs --> 用作源文件夹
和你的 jar > 添加到构建路径。

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# java - 如何在字节数组的开头添加空间

> ID：10780414
> 
> 赞同：0
> 
> 时间：2012-05-28T06:44:47.370
> 
> 标签：java, arrays

我有这种方法可以在字节数组的开头添加空格。问题是我不确定这是否是这个任务最快的实现。是否有一些选项可以更快地添加空间？如果是，请在此处添加一些解决方案

```
public static byte[] doplnMezery(byte[] item, int numberOfSpaces) {
    int lenghtOfItem = item.length;

    for (int i = lenghtOfItem; i < numberOfSpaces; i++) {
        item = ArrayUtils.add(item, 0, (byte) 32);
    }
    return item;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:47:55.813

这似乎效率低下，因为该`add`方法的运行速度不能超过线性时间。你在这里得到的是一个二次算法。

像这样的东西应该更快（线性时间复杂度）。

```
public static byte[] doplnMezery(byte[] item, int numberOfSpaces) {
    byte[] result = new byte[item.length + numberOfSpaces];
    Arrays.fill(result, 0, numberOfSpaces, (byte) 32);
    System.arraycopy(item, 0, result, numberOfSpaces, item.length);        
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:53:54.793

试试这个代码（JUnit 测试） - 它*增加了*7 个空格来`items`生成`items2`数组：

```
@Test
public void test1() throws Exception
{
    byte[] items = new byte[] { 0x01, 0x02, 0x03 };
    byte[] items2 = new byte[3 + 7];

    System.arraycopy(items, 0, items2, 7, items.length);
    Arrays.fill(items2, 0, 7, (byte)' ');

    assertArrayEquals(new byte[] { 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x01, 0x02, 0x03 } , items2);
} 
```

# .htaccess - 带有产品名称的 Codeigniter 路由 URL 到产品 ID

> ID：10780416
> 
> 赞同：0
> 
> 时间：2012-05-28T06:45:00.223
> 
> 标签：.htaccess, codeigniter

我需要将这样的 URL 重定向`http://mysite.com/store/store-name`到`http://mysite.com/stores/products/store-id`. 请注意，我需要从数据库中获取商店 ID。那么是否可以在 routes.php 中进行 db 操作？

在文档中，语法为 as `$route['store/:any']`。如何获取这里提到的第二个参数的值`:any`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:27:44.047

通过路由运行数据库查询实际上没有任何好的或简单的方法。但是，您可以在控制器功能的开头进行验证。

我想你`store-name`是某种产品的蛞蝓？基本上，您可以验证值是否为数字，如果没有，则通过 slug 找到然后重定向。

**配置/路由.php**

```
$route["store/(.*)"] = 'stores/products/$1';
/* () and $1 together passes the values */ 
```

**控制器/stores.php**

```
/* Class etc. */

function products($mix) {

    if (is_numeric($mix))
        $int_id = $mix;
    else {

        $row = $this->get_where('products', array('slug' => $mix))->row();

        $this->load->helper('url');
        redirect("stores/products/{$row->id}");

    }

    /* Do stuff with the $int_id */

} 
```

这假设您有：

*   一个名为**products的表**
*   名为**id**的列，它是您的产品 id
*   一个名为**slug**的列，它基于您的`store-name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:11:02.113

*CodeIgniter 路由一切皆有*可能。这一切都在你编码它的方式。CI 中的路由*非常*灵活。除了标准 CI 通配符 (:any)(:num) 之外，您还可以使用正则表达式。如果需要，您甚至可以为路径变量添加前缀或后缀：

```
$route['store/(:any)'] = "redircontroller/redirfunction/$1";
// for instance the namelookup method of the mystores controller
$route['stores/products/(:any)'] = "mystores/namelookup/$1"; 
```

您可以通过在路由值中定义变量来获得第二个参数（以及第三个等），这些变量将传递给您定义的控制器方法。如果你的新网址中的“产品”也是一个变体，你应该在那里开始你的通配符表达式。您还可以使用 URI 类 ($this->uri->segment(n)) 从 url 中提取参数。

但是，您不会在 routes.php 中进行数据库操作。您在路由到的控制器中执行数据库操作。我的猜测是，您必须使用查询中 url 中使用的任何内容来匹配商店 ID。在任何情况下，您使用路由文件的路径都是用户将看到的路径。要进行重定向，您必须接受原始路径，然后将用户重定向到新路径，如下所示：

```
// in some controller that's attached to the original url
    public function redirfunct($var){
        $this->load->helper('url');
        redirect(base_url('stores/products/' . $var));
    } 
```

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:31:38.023

我参加聚会可能有点晚了，但我可能有一个替代建议。

我将以下内容用于我的路线：

```
http://mysite.com/store/1/store-name 
```

原因是...根据您的方法，如果您创建

```
http://mysite.com/store/store-name 
```

但是在一段时间后（毫无疑问，Google 已将您的页面编入索引），您决定出于何种原因将商店名称更改为“Wonderful store name”，您自然会将链接更改为

```
http://mysite.com/store/wonderful-store-name 
```

这会杀死您的 SEO 和任何索引链接。

我使用[http://mysite.com/store/1/store-name](http://mysite.com/store/1/store-name)的解决方案意味着您可以更改`store-name`为您想要的任何内容，但它始终引用`1`意味着用户仍将看到相关页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:07:08.763

是的，这很简单，您只需要显示 ID 而不是名称，您必须像 storeName > Click to view details

使它成为

storeId> 点击查看详情

当您将参数传递给数据库时，更改 mysql 的检查，将其更改为 id 而不是 name ，这可能类似于“select yourRequiredColumn from table_name where id=".parameter."

谢谢

# iphone - iphone-核心数据错误“NSInvalidArgumentException”，原因：“未实现的谓词 SQL 生成”

> ID：10780417
> 
> 赞同：2
> 
> 时间：2012-05-28T06:45:02.207
> 
> 标签：iphone, sqlite, core-data, nsfetchrequest

我是 iphone 开发的新手。我正在尝试使用 iphone 核心数据存储一些数据。当我尝试保存时，我收到了类似的错误。

```
Detected an attempt to call a symbol in system libraries that is not present on the         
_Unwind_Resume called from function -[NSSQLAdapter    
 _newSelectStatementWithFetchRequest:ignoreInheritance:] in image CoreData.

2012-05-28 12:05:38.179 FYPV1[6460:207] *** Terminating app due to uncaught exception
 'NSInvalidArgumentException', reason: 'Unimplemented SQL generation for predicate 
(surname MATCHES $search_surname)'
*** Call stack at first throw:
(
0   CoreFoundation                      0x02668b99 __exceptionPreprocess + 185
1   libobjc.A.dylib                     0x027b840e objc_exception_throw + 47
2   CoreData                            0x0003be86 -[NSSQLGenerator generateSQLStatementForFetchRequest:ignoreInheritance:countOnly:] + 1254
3   CoreData                            0x0003b6f0 -[NSSQLAdapter _newSelectStatementWithFetchRequest:ignoreInheritance:] + 480
4   CoreData                            0x0003b501 -[NSSQLAdapter newSelectStatementWithFetchRequest:] + 49
5   CoreData                            0x0003b3ae -[NSSQLCore newRowsForFetchPlan:] + 430
6   CoreData                            0x0003ab09 -[NSSQLCore objectsForFetchRequest:inContext:] + 297
7   CoreData                            0x0003a6fe -[NSSQLCore executeRequest:withContext:error:] + 206
8   CoreData                            0x000e891c -[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1084
9   CoreData                            0x00037897 -[NSManagedObjectContext executeFetchRequest:error:] + 359
10  FYPV1                               0x0000715f -[Contacts saveContacts:] + 367
11  UIKit                               0x001fc7f8 -[UIApplication sendAction:to:from:forEvent:] + 119
12  UIKit                               0x00287de0 -[UIControl sendAction:to:forEvent:] + 67
13  UIKit                               0x0028a262 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
14  UIKit                               0x00288e0f -[UIControl touchesEnded:withEvent:] + 458
15  UIKit                               0x002203d0 -[UIWindow _sendTouchesForEvent:] + 567
16  UIKit                               0x00201cb4 -[UIApplication sendEvent:] + 447
17  UIKit                               0x002069bf _UIApplicationHandleEvent + 7672
18  GraphicsServices                    0x02f48822 PurpleEventCallback + 1550
19  CoreFoundation                      0x02649ff4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
20  CoreFoundation                      0x025aa807 __CFRunLoopDoSource1 + 215
21  CoreFoundation                      0x025a7a93 __CFRunLoopRun + 979
22  CoreFoundation                      0x025a7350 CFRunLoopRunSpecific + 208
23  CoreFoundation                      0x025a7271 CFRunLoopRunInMode + 97
24  GraphicsServices                    0x02f4700c GSEventRunModal + 217
25  GraphicsServices                    0x02f470d1 GSEventRun + 115
26  UIKit                               0x0020aaf2 UIApplicationMain + 1160
27  FYPV1                               0x00001e59 main + 121
28  FYPV1                               0x00001dd5 start + 53
)
terminate called after throwing an instance of 'NSException' 
```

如何解决这个问题呢 。

这是我保存数据的代码。

```
 NSError *error;  

    NSDictionary *subs = [NSDictionary 
                          dictionaryWithObjectsAndKeys:fetchContact.first_name, @"search_firstname",fetchContact.surname,@"search_surname", nil];

    NSFetchRequest *fetchRequestCheckNil = 
    [managedObjectModel fetchRequestFromTemplateWithName:
     @"Fetchaddcontact" substitutionVariables:subs];

    NSArray *fetchedObjects=[context executeFetchRequest:fetchRequestCheckNil error:nil];
    if ([fetchedObjects count]>0) {
        for (ENTITYADDCONTACTS *contactDetails
             in fetchedObjects) {

            [self updateDBModel:contactDetails];
        }
    }
else {   
    ENTITYADDCONTACTS *contactDetails;
    contactDetails = [NSEntityDescription
                      insertNewObjectForEntityForName:@"ENTITYADDCONTACTS" 
                      inManagedObjectContext:context]; 
    [self updateDBModel:contactDetails];
    }

if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:11:20.547

根据[谓词编程指南](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)约束和限制部分，您不能将 MATCHES 关键字与 sqlite 持久存储一起使用。

引用：

> 匹配运算符使用正则表达式，因此 Core Data 的 SQL 存储不支持 - 尽管它确实适用于内存过滤。

在你的情况下，我会使用 BEGINSWITH 或 LIKE。请注意，BEGINSWITH 具有性能优势，因此我建议尽可能使用它。

以下是字符串的可用谓词比较：

> 默认情况下，字符串比较区分大小写和变音符号。您可以使用方括号中的关键字符 c 和 d 来修改运算符，以分别指定不区分大小写和变音符号，例如 firstName BEGINSWITH[cd] $FIRST_NAME。
> 
> **开始于**
> 
> 左边的表达式从右边的表达式开始。
> 
> **包含**
> 
> 左侧表达式包含右侧表达式。
> 
> **以。。结束**
> 
> 左边的表达式以右边的表达式结束。
> 
> **喜欢**
> 
> 左边的表达式等于右边的表达式： ? 和 * 允许作为通配符，在哪里？匹配 1 个字符， * 匹配 0 个或更多字符。在 Mac OS X v10.4 中，通配符与换行符不匹配。
> 
> **火柴**
> 
> 根据 ICU v3，左侧表达式使用正则表达式样式比较等于右侧表达式（有关更多详细信息，请参阅 ICU 正则表达式用户指南）。

这里的例外是 MATCHES，正如我之前所说，它不能与 sqlite 持久存储一起使用。除此之外，您可以使用纯 == 进行严格的相等比较。

# c# - Request.UserAgent 和 Request.Browser 有什么区别？

> ID：10780418
> 
> 赞同：10
> 
> 时间：2012-05-28T06:45:06.793
> 
> 标签：c#, asp.net, request, user-agent

下面是我的代码：

```
 User_Info.Add(!string.IsNullOrEmpty(Request.UserAgent) ? Request.UserAgent : string.Empty);//4:UserAgent

    HttpBrowserCapabilities browser = Request.Browser;
    User_Info.Add(!string.IsNullOrEmpty(browser.Browser) ?  "Name : " + browser.Browser + " | " +
                                                            "Type : " + browser.Type + " | " +
                                                            "MajorVersion  : " + browser.MajorVersion + " | " +
                                                            "MinorVersion  : " + browser.MinorVersion : string.Empty);//5:UserBrowser 
```

Request.UserAgent 和 Request.Browser 有什么区别？
我无法理解那些 UserAgent 字符串！
你能举一些例子和解释吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T07:42:38.080

[UserAgent](http://msdn.microsoft.com/en-us/library/system.web.httprequest.useragent.aspx)为您提供有关浏览器的原始字符串。它可能看起来像这样：

> 用户代理 :: Mozilla/4.0（兼容；MSIE 6.0b；Windows NT 5.1；.NET CLR 1.0.2914）

[Request.Browser](http://msdn.microsoft.com/en-us/library/system.web.httprequest.browser%28v=vs.80%29.aspx)将为您提供 HttpBrowserCapabilities 对象，该对象将包含浏览器版本信息以及有关浏览器功能的一些额外信息。例如：

1.  浏览器是否支持 Frames
2.  如果它支持cookies？
3.  支持 JavaScript 吗？
4.  支持 Java 小程序 ? 等等

看下面的示例代码：

```
HttpBrowserCapabilities bc = Request.Browser;
Response.Write("<p>Browser Capabilities:</p>");
Response.Write("Type = " + bc.Type + "<br>");
Response.Write("Name = " + bc.Browser + "<br>");
Response.Write("Version = " + bc.Version + "<br>");
Response.Write("Major Version = " + bc.MajorVersion + "<br>");
Response.Write("Minor Version = " + bc.MinorVersion + "<br>");
Response.Write("Platform = " + bc.Platform + "<br>");
Response.Write("Is Beta = " + bc.Beta + "<br>");
Response.Write("Is Crawler = " + bc.Crawler + "<br>");
Response.Write("Is AOL = " + bc.AOL + "<br>");
Response.Write("Is Win16 = " + bc.Win16 + "<br>");
Response.Write("Is Win32 = " + bc.Win32 + "<br>");
Response.Write("Supports Frames = " + bc.Frames + "<br>");
Response.Write("Supports Tables = " + bc.Tables + "<br>");
Response.Write("Supports Cookies = " + bc.Cookies + "<br>");
Response.Write("Supports VB Script = " + bc.VBScript + "<br>");
Response.Write("Supports JavaScript = " + bc.JavaScript + "<br>");
Response.Write("Supports Java Applets = " + bc.JavaApplets + "<br>");
Response.Write("Supports ActiveX Controls = " + bc.ActiveXControls + "<br>");
Response.Write("CDF = " + bc.CDF + "<br>"); 
```

为了将浏览器版本与用户代理进行比较，您必须使用字符串操作（包含），而如果`Request.Browser`您可以与属性进行比较。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T06:53:09.617

Request.Browser 与 Request.UserAgent 不同。UserAgent 获取客户端浏览器的原始用户代理字符串，[Request.Browser](http://www.4guysfromrolla.com/articles/120402-1.aspx)获取有关浏览器功能的信息。您不会使用[UserAgent 字符串](http://msdn.microsoft.com/en-us/library/ms537503%28VS.85%29.aspx)获得所有浏览器功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:05:10.420

`Request.UserAgent`有点神秘，需要解析以确定访问者正在使用的浏览器。此外，它不包含浏览器支持的 JavaScript 版本，或者浏览器是否支持 CSS 2.0 样式表等信息

该`Request.Browser`属性是 HttpBrowserCapabilities 对象的一个​​实例，提供所有信息...

参考：[http ://www.4guysfromrolla.com/articles/120402-1.aspx](http://www.4guysfromrolla.com/articles/120402-1.aspx)

# windows-phone-7 - 如何在不运行应用程序的情况下获取 windows phone 的当前位置？

> ID：10780420
> 
> 赞同：1
> 
> 时间：2012-05-28T06:45:26.963
> 
> 标签：windows-phone-7, push-notification, mpns

我开发了一个向用户发送通知的 Windows Phone 应用程序。有一个通过 mspn 发送通知的云服务和一个在 windows phone 上运行的应用程序。我的云服务会根据手机的当前位置发送通知。windows phone 中运行的应用程序需要每 12 小时在云服务上注册一次设备的当前位置。我的应用程序不会 24 小时运行。那么如何每 12 小时更新一次设备的位置呢？我可以在后台运行我的应用程序吗？有没有人遇到过类似的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:52:55.863

您可以在后台运行定期代理。更多信息可以在 MSDN 上找到：

*   [Windows Phone 后台代理概述](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29.aspx)
*   [如何：为 Windows Phone 实现后台代理](http://msdn.microsoft.com/en-us/library/hh202941%28v=vs.92%29.aspx)

当您想在后台代理中使用 GeoCoordinateWatcher 时，您必须了解一些限制：

> 此 API 用于获取设备的地理坐标，支持在后台代理中使用，但它使用缓存的位置值而不是实时数据。缓存的位置值由设备每 15 分钟更新一次。

# python - 拆分功能 - 避免最后一个空白

> ID：10780423
> 
> 赞同：16
> 
> 时间：2012-05-28T06:45:58.197
> 
> 标签：python, split

我对如何使用拆分功能有疑问。

```
str = 'James;Joseph;Arun;'
str.split(';') 
```

我得到了结果`['James', 'Joseph', 'Arun', '']`

我需要输出为`['James', 'Joseph', 'Arun']`

最好的方法是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-28T06:47:46.250

要删除所有空字符串，您可以使用列表推导：

```
>>> [x for x in my_str.split(';') if x] 
```

或者过滤器/布尔技巧：

```
>>> filter(bool, my_str.split(';')) 
```

请注意，这还将删除列表开头或中间的空字符串，而不仅仅是结尾。

*   [从字符串列表中删除空字符串](https://stackoverflow.com/questions/3845423/remove-empty-strings-from-a-list-of-strings)

如果您只想删除最后的空字符串，您可以`rstrip`在拆分之前使用。

```
>>> my_str.rstrip(';').split(';') 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-28T06:48:51.397

First remove `;` from the right edge of the string:

```
s.rstrip(';').split(';') 
```

You can also use `filter()` (which will filter off also empty elements that weren't found at the end of the string). But the above is really the cleanest approach in my opinion, when you want to avoid empty element at the end, resulting from "`;`" characters occuring at the end of the string.

**EDIT**: Actually more accurate than the above (where the above is still more accurate than using `filter()`) is the following approach:

```
(s[:-1] if s.endswith(';') else s).split(';') 
```

This will remove only the last element, and only if it would be created empty.

Testing all three solutions you will see, that they give different results:

```
>>> def test_solution(solution):
    cases = [
        'James;Joseph;Arun;',
        'James;;Arun',
        'James;Joseph;Arun',
        ';James;Joseph;Arun',
        'James;Joseph;;;',
        ';;;',
        ]
    for case in cases:
        print '%r => %r' % (case, solution(case))

>>> test_solution(lambda s: s.split(';'))  # original solution
'James;Joseph;Arun;' => ['James', 'Joseph', 'Arun', '']
'James;;Arun' => ['James', '', 'Arun']
'James;Joseph;Arun' => ['James', 'Joseph', 'Arun']
';James;Joseph;Arun' => ['', 'James', 'Joseph', 'Arun']
'James;Joseph;;;' => ['James', 'Joseph', '', '', '']
';;;' => ['', '', '', '']
>>> test_solution(lambda s: filter(bool, s.split(';')))
'James;Joseph;Arun;' => ['James', 'Joseph', 'Arun']
'James;;Arun' => ['James', 'Arun']
'James;Joseph;Arun' => ['James', 'Joseph', 'Arun']
';James;Joseph;Arun' => ['James', 'Joseph', 'Arun']
'James;Joseph;;;' => ['James', 'Joseph']
';;;' => []
>>> test_solution(lambda s: s.rstrip(';').split(';'))
'James;Joseph;Arun;' => ['James', 'Joseph', 'Arun']
'James;;Arun' => ['James', '', 'Arun']
'James;Joseph;Arun' => ['James', 'Joseph', 'Arun']
';James;Joseph;Arun' => ['', 'James', 'Joseph', 'Arun']
'James;Joseph;;;' => ['James', 'Joseph']
';;;' => ['']
>>> test_solution(lambda s: (s[:-1] if s.endswith(';') else s).split(';'))
'James;Joseph;Arun;' => ['James', 'Joseph', 'Arun']
'James;;Arun' => ['James', '', 'Arun']
'James;Joseph;Arun' => ['James', 'Joseph', 'Arun']
';James;Joseph;Arun' => ['', 'James', 'Joseph', 'Arun']
'James;Joseph;;;' => ['James', 'Joseph', '', '']
';;;' => ['', '', ''] 
```

# compression - 为什么 JPEG 压缩按 8x8 块处理图像？

> ID：10780425
> 
> 赞同：8
> 
> 时间：2012-05-28T06:46:03.100
> 
> 标签：compression, jpeg, dct

为什么 JPEG 压缩按 8x8 块处理图像，而不是对整个图像应用离散余弦变换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T19:11:14.750

经过多次其他尺寸的实验后选择了 8 X 8。

实验的结论是： 1\. 任何大于 8 X 8 的矩阵都更难进行数学运算（如变换等）或不受硬件支持或需要更长的时间。2\. 任何小于 8 X 8 的矩阵都没有足够的信息来继续流水线。这会导致压缩图像的质量很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:13:42.220

因为，这将需要“永远”来解码。我现在不完全记得了，但我认为您至少需要与块中的像素一样多的系数。如果您将整个图像编码为单个块，我认为您需要针对每个像素迭代所有 DCT 系数。

我不太擅长大 O 计算，但我猜复杂度会是 O（“永远”）。;-)

对于现代视频编解码器，我认为他们已经开始使用 16x16 块。

# android - 活动中的滑动效应

> ID：10780433
> 
> 赞同：2
> 
> 时间：2012-05-28T06:46:16.870
> 
> 标签：android, android-layout, android-widget

> **可能重复：**
> [Android 从左到右的幻灯片动画](https://stackoverflow.com/questions/5151591/android-left-to-right-slide-animation)

我想在活动布局中实现滑动（滑动的多个屏幕）外观，就像我们在 android 主屏幕中一样。活动中的相同类型的外观。请提供一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:50:54.917

您正在寻找 ViewPager 实现。这是一个关于它的讨论。

*   [android viewPager 实现](https://stackoverflow.com/q/7244813/603744enter)
*   [http://geekyouup.blogspot.com/2011/07/viewpager-example-from-paug.html](http://geekyouup.blogspot.com/2011/07/viewpager-example-from-paug.html)

[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)看起来就像一个画廊，一次只有一个元素可见性。对于每个页面，您必须扩充自己的布局，以便您可以使用所需的元素对其进行自定义。

# ajax - 访问 sencha 上的父对象

> ID：10780438
> 
> 赞同：0
> 
> 时间：2012-05-28T06:46:53.157
> 
> 标签：ajax, templates, mobile, extjs

当 ajax 调用成功时，我需要更新 sencha 模板。示例代码如下

```
Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    tpl: '<p> {username} </p>',
    initComponent: function(){
        //Be sure to use the var keyword for planet earth, otherwise its declared as a global variable
        //var planetEarth = { name: "Earth", mass: 1.00 };
       //this.setHtml(this.getTpl().apply(planetEarth));
         Ext.Ajax.request( 
        {    
            waitMsg: 'Bitte warten...', 
            url: 'http://localhost:8000/api/casta/user/?format=json', 

            success:function(response,options){ 
                //var responseData = Ext.util.JSON.decode(response.responseText); 
                  this.setHtml(this.getTpl().apply(response.responseText));
            }                       
        } 
        ); 
    }
}); 
```

错误控制台

```
this.getTpl is not a function
[Break On This Error]   

this.setHtml(this.getTpl().apply(response.responseText)); 
```

我`success`需要更新模板，但问题是 this.getTpl 在内联函数内部未定义`success:function`。它是在 之后定义的`initcomponent`。我需要在里面调用它`success`。有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:04:22.977

它不是真正的父母。你不能爬上dom来得到它，但是......

```
Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    tpl: '<p> {username} </p>',
    initComponent: function(){
        //Be sure to use the var keyword for planet earth, otherwise its declared as a global variable
        //var planetEarth = { name: "Earth", mass: 1.00 };
       //this.setHtml(this.getTpl().apply(planetEarth));
       var me = this;
         Ext.Ajax.request( 
        {    
            waitMsg: 'Bitte warten...', 
            url: 'http://localhost:8000/api/casta/user/?format=json', 

            success:function(response,options){ 
                //var responseData = Ext.util.JSON.decode(response.responseText); 
                  me.setHtml(me.getTpl().apply(response.responseText));
            }                       
        } 
        ); 
    }
}); 
```

去阅读闭包。

# java - 你认为最好的策略是创建一个临时 XML 文件，使用 FTP 发送它，然后在 Web 应用程序中删除它？

> ID：10780445
> 
> 赞同：0
> 
> 时间：2012-05-28T06:47:42.620
> 
> 标签：java, spring, ftp

我正在使用 Spring 创建一个 Web 应用程序。一项要求是在处理了创建 XML 文档的客户端请求之后，然后通过 FTP 将 XML 发送到 FTP 服务器，然后删除该文件。你认为最好的策略是创建一个临时 XML 文件，用 FTP 发送它然后删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:57:11.623

您根本不需要临时文件。如果你的xml文件不大，可以使用DOM在内存中创建文档，然后直接写入到FTP流中。使用 Apache commons-net 更轻松地进行 ftp 上传。

# android - 请求有关 unistall 的反馈

> ID：10780448
> 
> 赞同：0
> 
> 时间：2012-05-28T06:47:55.263
> 
> 标签：android

当用户在他的设备上卸载应用程序时，有没有办法向用户请求反馈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:53:31.187

是的

您可以使用“android.intent.action.PACKAGE_REMOVED”广播已删除的应用程序包。

[如何实现广播接收器以卸载设备中的特定应用程序？](https://stackoverflow.com/questions/4815028/how-implement-broadcastrecevier-for-uninstall-particular-application-in-device)

# storyboard - 在情节提要中的视图控制器之间传递数据

> ID：10780450
> 
> 赞同：1
> 
> 时间：2012-05-28T06:47:57.923
> 
> 标签：storyboard, viewcontroller, segue, pass-data

有两个带有嵌入式导航控制器的视图控制器。第一个有一个表格视图。第二个，名为“AfterTableViewController”，其中有一个标签。

我希望能够`prepareForSegue`在第一个视图控制器实现文件中的方法中设置标签。

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   AfterTableViewController *afc = (AfterTableViewController*) segue.destinationViewController;
    afc.title = @"the title"; // this works
    afc.theLabel.text = @"hello"; // this doesn't work
} 
```

我应该如何设置标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:56:27.500

看到您只是尝试设置标签的文本值，最好在 AfterTableViewController 中为此 UILabel 的文本创建另一个 NSString 属性，**然后**在构造*theLabel*时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:51:17.770

您必须确保在 中添加`theLabel`为（合成的）属性`AfterTableViewController`才能使其正常工作。

# c++ - Reg Sqlite binding

> ID：10780456
> 
> 赞同：0
> 
> 时间：2012-05-28T06:48:24.420
> 
> 标签：c++, sqlite

i am working on sqlite db using c++ front end. when i try to bind variable in the query , it is giving the following error.

here is the code

```
 for(vector<vector<string> >::iterator it = result.begin(); it < result.end(); ++it)
            {
                vector<string> row = *it;                     
                **sqlite3_bind_text(statement,2,[row.at(1) string],-1, SQLITE_TRANSIENT);**                     
                int result = sqlite3_step(statement);
            } 
```

bolded line is giving the problem which is " cannot convert ‘Database::InitialSync()::’ to ‘const char*’ for argument ‘3’ to ‘int sqlite3_bind_text(sqlite3_stmt*, int, const char*, int, void (*)(void*))’"

Can anybody help me in this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:05:55.070

您有语法错误，只需使用

```
sqlite3_bind_text(statement,2, row[1].c_str(), -1, SQLITE_TRANSIENT); 
```

如果您需要从“行”数组中提取第一个（不是第零个）值。

如果我误解了你的意思，请澄清你想做的事情，而不仅仅是这个编译错误。我的意思是你想绑定什么参数。

# android - Failed to display Admob in small screen

> ID：10780458
> 
> 赞同：1
> 
> 时间：2012-05-28T06:48:31.293
> 
> 标签：android, admob

The admob work fine where the device's width 320 but smaller than that it will not display.

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/layout_adsmob"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_marginTop="10px"
android:background="#00ffffff"
android:visibility="gone" >

<com.google.ads.AdView
    android:id="@+id/adsmob"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="SMART_BANNER"
    ads:adUnitId="MY_AD_UNIT_ID"
    ads:loadAdOnCreate="true"
    ads:testDevices="TEST_EMULATOR,TEST_DEVICE_ID" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-04T10:53:36.673

您将根元素的可见性设置为`gone`。在 XML 文件中设置任何元素的可见性也会隐藏标记的子元素。

只是根本不设置可见性。默认为`VISIBLE`，因此无需手动设置

如果这是有意的，并且您希望在加载广告之前使其不可见，请以编程方式更改可见性：

```
someView.setVisibility(View.VISIBLE); 
```

# ruby - Not able to install a gem file?

> ID：10780461
> 
> 赞同：1
> 
> 时间：2012-05-28T06:48:36.543
> 
> 标签：ruby, rubygems

Hi People I am trying to install a gem file through command prompt on MAC using the following command "gem install filename" but whenever I try to execute the command I get the following error

WARNING: Installing to ~/.gem since /Library/Ruby/Gems/1.8 and /usr/bin aren't both writable. WARNING: You don't have /Users/hemmanshu/.gem/ruby/1.8/bin in your PATH, gem executables will not run. ERROR: Error installing frank-cucumber-0.8.14: cucumber requires gherkin (~> 2.10.0, runtime)

every time I try to execute this command the same thing pops up.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:59:36.973

您需要以超级用户权限安装 gems，因此您应该使用

```
sudo gem install [gemname] 
```

代替

```
gem install [gemname] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:58:34.790

你试试sudo。像“sudo gem 安装文件名”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T07:49:55.860

...大多数情况下这是一个 PATH 问题，假设您像我一样使用 zshell，然后将此行添加到`~/.zshrc`文件末尾 `export PATH="$PATH:$HOME/.gem/ruby/2.1.0/bin"` 如果您使用 bash 作为默认 shell，则将此行添加到`~/.bashrc`文件末尾 `export PATH="$PATH:$HOME/.gem/ruby/2.1.0/bin"`

对于您的情况，它将是这样的： `export PATH="$PATH:$HOME/.gem/ruby/1.8/bin`

最后不要忘记通过`source ~/.zshrc`z-shell 或`source ~/.bashrc`bash-shell 重新加载 shell。我认为这对某人有帮助。

# vim - Vim：管道寄存器到外部命令

> ID：10780469
> 
> 赞同：8
> 
> 时间：2012-05-28T06:49:17.147
> 
> 标签：vim

如何将寄存器的内容通过管道传输到外部命令的标准输入？我凭直觉尝试了以下方法，但它不起作用（尽管可以说明我的需要）：

```
:"0w !some_command 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T09:29:19.947

如果寄存器的内容没有碰巧包含 NULL，那么它很简单

```
call system('some_command', getreg('r', 1, 1) + (getregtype('r') isnot# 'v' ? [''] : [])) 
```

. 如果您知道自己没有可以用来`@r`代替`getreg()`调用的 NUL，则此表格还将保留可能恰好存在于寄存器中的 NUL。请注意，`getreg('r', 1, 1)`即使您以逐行模式复制文本，也不会有尾随换行符，这就是我写`+ (getregtype('r') isnot# 'v' ? [''] : [])`添加它的原因（表单`@r`没有这个问题）。

# date - HQL：仅在 2 个月前过滤查询

> ID：10780471
> 
> 赞同：0
> 
> 时间：2012-05-28T06:49:43.747
> 
> 标签：date, hql

我想问一下，如何将此 postgres 查询转换为 HQL ：

select * from transactions where **trans_time >= date(now() - 60 * interval '1 day')**

如何将该查询（粗体）转换为 hql？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:56:04.380

```
Calendar minDate = Calendar.getInstance();
minDate.add(Calendar.DATE, -60);
String hql = "select t from Transaction t where t.transactionTime >= :minDate";
List<Transaction> result = session.createQuery(hql)
                                  .setTimestamp("minDate", cal.getTime())
                                  .list(); 
```

# javafx-2 - 在 JavaFX 2.1 中，按钮图像未显示

> ID：10780474
> 
> 赞同：0
> 
> 时间：2012-05-28T06:50:04.863
> 
> 标签：javafx-2

JavaFX 2.1：

我的带有图像的按钮在 JavaFX 2.0 中工作正常。升级到JavaFX 2.1，图像消失了。

这是代码：

```
Button aButton = new Button("Test");
String iconPath = "/com/abc/res/toolbar/Help.gif";
Image aIcon = new Image(
    getClass().getResourceAsStream(iconPath), 18, 18, false, false);
aButton.setGraphic(new ImageView(aIcon)); 
```

这适用于 JavaFX 2.0。它在 JavaFX 2.1 下不起作用。为了使图形显示出来，我必须删除 re-size 功能。

```
Image aIcon = new Image(getClass().getResourceAsStream(iconPath)); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:53:07.587

未显示调整大小图像的按钮图形似乎是一种回归 - 要修复它，请使用您的示例代码和示例图像向[http://javafx-jira.kenai.com提交错误。](http://javafx-jira.kenai.com)

作为一种解决方法，在构造函数中加载图像而不调整它的大小，并在`ImageView`via`imageView.fitWidth()`和中调整加载的图像的大小`imageView.fitHeight()`。

# php - Free road distance calculator web service similar to Google Distance Matrix API

> ID：10780477
> 
> 赞同：0
> 
> 时间：2012-05-28T06:50:11.537
> 
> 标签：php, web-services, google-maps, google-api

As of now I am using Google's distance Matrix API for one of my project.

That is [http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false)

It works fine, but the problem is, its not free after a certain quota.

So I just want to know, is there any other webservice which provides reliable distance calculator service for free?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-06-18T20:06:19.233

多年来，Google API 的价格急剧上涨。有许多具有成本效益的替代品可供选择。以下是其中一些：

-[汤姆汤姆](https://www.tomtom.com/en_us/drive/maps-services/maps/)

- [DistanceMatrixApi.com](https://www.distancematrixapi.com/)

-[地图盒](https://www.mapbox.com/)

-[这里](https://www.here.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:15:26.327

您可以从这里使用脚本 - [http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-14T14:35:49.557

有一种替代方案的成本比 Google API 便宜得多。试试[DistanceMatrix AI](https://distancematrix.ai/?utm_source=SFlow&utm_medium=Answer&utm_campaign=Dev_2)。此 API 考虑交通状况，计算驾驶、步行和骑自行车模式的距离。

联系创作者，他们会免费向您发送试用版。

免责声明：我在创建此 API 的公司工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T11:27:35.067

您可以使用谷歌的[路线服务](https://developers.google.com/maps/documentation/directions/)，连同路线，它还返回距离。

# java - Wicket 和 servlet 过滤器身份验证 - 有没有更好的方法？

> ID：10780478
> 
> 赞同：0
> 
> 时间：2012-05-28T06:50:13.320
> 
> 标签：java, authentication, wicket

我们的应用程序正在使用 Wicket。我们使用 Wicket 自己的表单来处理身份验证，主要好处是网站的外观保持一致。

我们认为我们无法进行容器身份验证，因为我们的应用程序允许用户在中途切换身份验证机制，而 Jetty 本身无论如何都会产生相当多的摩擦，只是让简单的身份验证在容器级别工作。

所以我们最终通过过滤器实现了身份验证（那里有很多很好的例子。）

现在我发现通过这样做，Wicket 身份验证被稍微破坏了。发生的事情是：

1.  匿名用户将访问该站点。
2.  安全筛选器确定用户未通过身份验证并重定向到登录。
3.  Wicket 呈现登录页面。
4.  用户登录。
5.  Wicket 将帖子处理到登录表单并将用户重定向回来。
6.  安全过滤器确定用户未通过身份验证并重定向...

我查看了 AuthenticatedWebSession 的子类，希望找到某种方法可以获取 HttpSession 并设置一个会话属性，然后可以从过滤器中检查该属性。但是，我一生都无法找到一种方法来做到这一点。

我采取的做法是制作*另一个过滤器*，编码如下：

```
public class StealWicketUserFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        // Nothing to initialise.
    }

    @Override
    public void doFilter(ServletRequest servletRequest,
                         ServletResponse servletResponse,
                         FilterChain filterChain) throws IOException, ServletException
    {
        filterChain.doFilter(servletRequest, servletResponse);

        HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;
        if ("POST".equals(httpServletRequest.getMethod()) &&
                "/sign_in".equals(httpServletRequest.getRequestURI())) {
            HttpSession session = httpServletRequest.getSession();
            ServerUser currentUser = (ServerUser)
                session.getAttribute("wicket:webUIServlet:currentUser");
            if (currentUser != null) {
                session.setAttribute(CombinedSecurityFilter.CURRENT_USER_ATTRIBUTE,
                                     currentUser);
            }
        }
        else if ("/sign_out".equals(httpServletRequest.getRequestURI())) {
            HttpSession session = httpServletRequest.getSession();
            session.removeAttribute(CombinedSecurityFilter.CURRENT_USER_ATTRIBUTE);
        }
    }

    @Override
    public void destroy() {
        // Nothing to destroy.
    }
} 
```

这当然有效（并且将继续有效，直到 Wicket 更改它们存储会话属性的前缀。）

我想我想知道这是否是一个坏主意以及是否有“适当的 Wicket 方式”来做这种事情。

至于我们不单独使用 Wicket 身份验证的原因 - 原因是我们希望支持 SPNEGO 身份验证和可能的其他外部身份验证类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:43:15.040

你可以得到你的`HttpSession`，尽管通过`Request`而不是`Session`。

你需要的是：

```
WebRequest req = (WebRequest)RequestCycle.get().getRequest();
HttpSession session = req.getHttpServletRequest().getSession(); 
```

但是，我很确定 Wicket 身份验证并没有以如此明显的方式被破坏，所以我可能会尝试找出导致此故障的原因。

# java - Use CSS and JavaScript in Java desktop application program

> ID：10780479
> 
> 赞同：1
> 
> 时间：2012-05-28T06:50:16.103
> 
> 标签：java, javascript, html, swing, css

Can I use CSS or other web technologies in a Java desktop application by any means?

Note: I know as I used they are web based resources, but I want to know the ways it can be used in a Java desktop application.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:14:21.807

您可以在 Java 桌面应用程序中使用 CSS，但不能使用 JavaScript。这是链接，您可以了解如何在 Swing 应用程序中使用 CSS。

1.  [http://today.java.net/pub/a/today/2003/10/14/swingcss.html](http://today.java.net/pub/a/today/2003/10/14/swingcss.html)

2.  [http://tutiez.com/how-to-use-css-style-or-stylesheet-in-java-swing-jeditorpane.html](http://tutiez.com/how-to-use-css-style-or-stylesheet-in-java-swing-jeditorpane.html)

就个人而言，我建议在您的应用程序中使用“外观”功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-05T13:54:27.793

如另一个答案所述，您可以使用 CSS。`ScriptEngine`您还可以通过 Java 的类来使用 JavaScript 。

这是文档： [https ://docs.oracle.com/javase/7/docs/technotes/guides/scripting/programmer_guide/](https://docs.oracle.com/javase/7/docs/technotes/guides/scripting/programmer_guide/)

# php - PHP - Remove any numbers before any letters

> ID：10780480
> 
> 赞同：2
> 
> 时间：2012-05-28T06:50:18.320
> 
> 标签：php, regex, numbers, expression

I am processing addresses, but I just want to remove the Street Number, eg

`123 Fake St`

I use the following regular expression `/[^a-z ]/i'` which works fine and results in

`Fake St`

However sometimes I have addresses such as

`M4 Western Distributor Fwy`

How would I keep the M4 part? Because if I run my regular expression it turns into

`M Western Distributor Fwy`

Any help would be appreciated, cheers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:54:54.650

利用

```
/\b[^a-z ]+\b/i 
```

作为你的正则表达式。这将匹配以单词边界为界的一个或多个非字母的任何出现。实际上，如果您只想删除数字，您应该使用

```
/\b[\d]+\b/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:58:47.690

尝试

```
/^[0-9 ]+(?=[^\d]+)/i 
```

这匹配后跟除数字以外的任何数字的所有数字，测试：

```
$subject = '123 Fake St';
var_dump(preg_replace('/^[0-9 ]+(?=[^\d]+)/i', '', $subject));

$subject = 'M4 Western Distributor Fwy';
var_dump(preg_replace('/^[0-9 ]+(?=[^\d]+)/i', '', $subject)); 
```

输出：

```
string(7) "Fake St"
string(26) "M4 Western Distributor Fwy" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:01:36.410

有时非正则表达式方法也值得

```
$test="123 Fake St";
    $arr=explode(" ",$test);
    if(ctype_digit($arr[0])){
        $test=str_replace($arr[0],"",$test);
    }
echo $test; 
```

# java - Adding annotations to JAXB-generated classes which depend on information in XSD

> ID：10780481
> 
> 赞同：4
> 
> 时间：2012-05-28T06:50:18.290
> 
> 标签：java, xml, jaxb, annox

I have a WSDL + XSD that needs to be turned into Java classes. That's pretty simple - `wsimport` will handle that without issue. However, I also need to be able to add annotations to the generated classes, and those annotations need to contain information that is contained in the XSD (in particular, they need to reference the `xsd:maxLength` or `xsd:length` properties).

Why? Because I plan to transform them into a flat file afterwards, using [Bindy](http://camel.apache.org/bindy.html). For reference, I know that I can use [Annox](http://confluence.highsource.org/display/J2B/Annotate+Plugin) to add custom annotations to the generated classes, but as far as I'm aware, that would require that either all annotations are identical, with all parameters being identical, or specifying annotations for each element individually, with no way to specify the annotation once along with some way (e.g. xpath) of specifying that the value of one of the parameters should be different for each element.

That is, given a schema extract like

```
<xsd:element name="smapleRequest">
    <xsd:sequence>
         <xsd:element name="ELEMENT_ONE">
             <xsd:simpleType>
                 <xsd:restriction base="xsd:string">
                     <xsd:length value="3" />
                 </xsd:restriction>
             </xsd:simpleType>
         </xsd:element>
         <xsd:element name="ELEMENT_TWO">
             <xsd:simpleType>
                 <xsd:restriction base="xsd:string">
                     <xsd:maxLength value="8" />
                 </xsd:restriction>
             </xsd:simpleType>
         </xsd:element>
    </xsd:sequence>
</xsd:element> 
```

I would like to see classes that look this:

```
.
.
.
@FixedLengthRecord
public class SampleRequest {

    @XmlElement(name = "ELEMENT_ONE", required = true)
    @DataField(pos = 1, length=3)
    protected String elementOne;

    @XmlElement(name = "ELEMENT_TWO", required = true)
    @DataField(pos = 4, length=8)
    protected String elementTwo;
    .
    .
    .
} 
```

Ideally, I would like to be able to do this without having to duplicate all the information from the XSD into the JAXB Binding File. I mean, I could, but with potentially hundreds of elements per web service method, and dozens of methods, that would get very, very old very, very fast. At that point, I would probably have to use another tool to generate the XSD and JAXB binding file(s) from the COBOL!

So, does anyone know if this is possible? Have I just missed something in Annox? Or am I just asking for too much here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:37:29.380

你有几个选择：XJC 插件是一种途径，而 Annox 看起来很有趣。但是我不是专家，所以我会让其他人与您一起探索。

我建议您考虑的另一条路线，如果您遇到第一个问题，是通过[注释处理](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#processing)（以前是 apt 工具，现在是 javac 工具的一部分）对生成的 JAXB 源进行后处理，以访问 XSD 并附加您的即时注释。不确定这是否适用于您的所有情况，但在您给出的示例中，JAXB 生成的注释应该足以构造一个 XPath 表达式来读取相应的 XML 元素类型特征。假设您的需求基本上围绕字段长度，那应该是少数用例和 XPath 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-26T10:17:21.667

要自动添加`XJsr303Annotations`注释，您可以使用`xjc`插件[https://github.com/krasa/krasa-jaxb-tools](https://github.com/krasa/krasa-jaxb-tools)

有关详细信息，请参阅我的答案[在从 Java JAXB 注释类生成的模式中生成 XSD 限制](https://stackoverflow.com/questions/32403146/generation-of-xsd-restrictions-in-a-schema-generated-from-java-jaxb-annotated-cl/54325025#54325025)。

# xml - 具有外部引用的 xml 文档

> ID：10780482
> 
> 赞同：0
> 
> 时间：2012-05-28T06:50:18.967
> 
> 标签：xml, xsd, entityreference

有没有一种方法可以让 xml 文档引用在同一台机器上的其他 xml 文件中定义的变量/元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:30:16.527

当然，像这样：

外部.xml：

```
<!DOCTYPE outer [
    <!ELEMENT outer ANY>
    <!ENTITY inner SYSTEM "inner.xml" >
]>
<outer>
    &inner;
    &inner;
</outer> 
```

内部.xml

```
<inner/> 
```

# matlab - matlab transposing & sorting in embedded IF statements

> ID：10780483
> 
> 赞同：0
> 
> 时间：2012-05-28T06:50:28.960
> 
> 标签：matlab

I've been stumped trying to create an if,else loop that transposes the following:

```
Subject: Date: Result:
AAA 02/01/12 10
AAA 02/02/12 12
AAA 02/03/12 14
BBB 02/01/12 25
BBB 02/02/12 26
BBB 02/03/12 27
CCC 01/01/12 66
CCC 01/02/12 70
CCC 01/03/12 75 
```

I desire the information to be transposed across columns as depicted below:

```
SUBJECT 01/01/12 01/02/12 01/03/12 02/01/12 02/02/12 02/03/12
AAA RESULT
BBB RESULT
CCC RESULT 
```

There should only be one date per column and one subject per row. The result will match its respective subject and placed in its appropriate cell. The data can consist anywhere from a few subject to thousands of subjects, dates, and results. Some results may consist of non numerical values (NaN). Also, the subjects and dates may me in any random order and subjects may consist of numeric and string characters.

UPDATE @amro & superbest

If I had a text file with the date format:800317==mar/17/1980, How would I import this and modify the codes you've written? THanks again.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:54:03.103

如果您将数据存储在[数据集数组](http://www.mathworks.com/help/toolbox/stats/datasetclass.html)对象中，那么[unstack](http://www.mathworks.com/help/toolbox/stats/dataset.unstack.html)方法就是您要查找的方法（有时称为高到宽转换）。

* * *

我制定了一个简单的示例，展示了如何在没有数据集类的情况下执行此操作：

```
%# cell array: subjects, dates, values
data = {
    'AA' '2012-05-01' 0.1
    'AA' '2012-05-03' 0.2
    'BB' '2012-05-02' 0.3
    'CC' '2012-05-01' 0.4
    'CC' '2012-05-02' 0.5
    'CC' '2012-05-03' 0.6
};

[subjects,~,subjectsMap] = unique(data(:,1));
[dates,~,datesMap] = unique(data(:,2));
M = nan(numel(subjects),numel(dates));
for i=1:numel(subjects)
    %# get all rows with subject == subject_i
    rIdx = (subjectsMap == i);
    %# fill values at this row for the specified columns
    M(i,datesMap(rIdx)) = cell2mat(data(rIdx,3));
end

D = cell(size(M)+1);
D(2:end,2:end) = num2cell(M);       %# fill values
D(1,2:end) = dates;                 %# column headers
D(2:end,1) = subjects;              %# row headers 
```

这是转换之前（高）和之后（宽）的数据：

```
>> data
data = 
    'AA'    '2012-05-01'    [0.1]
    'AA'    '2012-05-03'    [0.2]
    'BB'    '2012-05-02'    [0.3]
    'CC'    '2012-05-01'    [0.4]
    'CC'    '2012-05-02'    [0.5]
    'CC'    '2012-05-03'    [0.6]

>> D
D = 
      []    '2012-05-01'    '2012-05-02'    '2012-05-03'
    'AA'    [       0.1]    [       NaN]    [       0.2]
    'BB'    [       NaN]    [       0.3]    [       NaN]
    'CC'    [       0.4]    [       0.5]    [       0.6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:42:28.813

这是一个应该做你想做的脚本：

```
% Clean up
clc
clear

% Hardcoded example input
input = {
    'AAA'    '02/01/12'    10
    'AAA'    '02/02/12'    12
    'AAA'    '02/03/12'    14
    'BBB'    '02/01/12'    25
    'BBB'    '02/02/12'    26
    'BBB'    '02/03/12'    27
    'CCC'    '01/01/12'    66
    'CCC'    '01/02/12'    70
    'CCC'    '01/03/12'    75
    };

% Figure out how many rows and columns there will be
header_row = unique(input(:, 2));
header_col = unique(input(:, 1));

% Pre-allocation for better performance
output = cell(length(header_col), length(header_row));

% Rearrange the array
for i = 1:size(input, 1)
    % Find to which date and subject this element belongs
    subject = find(strcmp(header_col, input{i, 1}));
    date = find(strcmp(header_row, input{i, 2}));

    % Put the value in the appropriate slot
    output{subject, date} = input{i, 3};
end

% Add header columns and rows and print the result
result = [['SUBJECT' header_row']; [header_col output]]; 
```

# asp.net - How to stop reloading of page so that transaction don't take place twice?

> ID：10780484
> 
> 赞同：1
> 
> 时间：2012-05-28T06:50:34.420
> 
> 标签：asp.net

I am working on an authorize.net payment system, the problem I am facing is: if some user done with transaction once, and he clicks on reload page or reload tab, then his money is cut twice.

So I want to avoid this reload and transaction more than once until he does transaction from the beginning.

Also I am having problem with go forward and go back how to avoid last values for this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:01:02.063

One easy trick is to use ajax call, so even if its reload the page, its only see the new status after the payment.

So what you do, you have a page that you show the current status of the payment, when the user click on the button to pay you send them request with ajax call - at the same time the button show a way message, after the end of the payment you reload the page, with the new information's.

In general you must have a unique number for each transaction, and a state flag of this transaction. You allow only one action per transaction. If the user press the key and go to the payment immediate you change the status of this transaction (using mutex to avoid the double submit even at that point) and after that you do not allow the same request aka reload the page.

The full process of payment is done in steps that are not allow to stop and go back (or repeat a step). In case that you need to go back you create a new process with new id and must repeat all the steps from the beginning. This way is done by paypal, amazon, google.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:02:39.187

经典的解决方案是

1.  您将数据保存在 page1.aspx
2.  在 page2.aspx 上成功保存数据显示结果（重定向到 Page2.aspx ）

因此，即使他刷新它也会重新加载 page2.aspx，并且您的交易不会被复制希望它有帮助:)

PS。您可能希望禁用/隐藏 Page1.aspx onclientclick 上的保存按钮，以便用户无法单击两次按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:10:06.303

如果您使用 asp.net C# 进行交易，请不要在付款后停留在同一页面上，这不是一个好习惯。收到服务器的成功响应后，立即重定向到支付成功页面。

即使您没有收到成功响应或交易失败，也不要停留在页面上，重定向到某个说明交易失败的页面。

也尽量不要在事务页面上存储数据（视图状态），也不要编写需要 !IsPostBack 块的代码。

阅读 authorize.net 的各种可用最佳实践，包括：

[https://developer.authorize.net/integration/fifteenminutes/csharp](https://developer.authorize.net/integration/fifteenminutes/csharp)

[http://www.authorize.net/files/developerbestpractices.pdf](http://www.authorize.net/files/developerbestpractices.pdf)

并写出最好的代码。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-28T07:03:49.440

将代码放在`(!Page.IsPostback)`块中，这样它只会发生一次。

# node.js - 如何设计一个可扩展的 rpc 调用监听器？

> ID：10780485
> 
> 赞同：2
> 
> 时间：2012-05-28T06:50:47.130
> 
> 标签：node.js, scalability, xml-rpc, json-rpc

我必须监听 rpc 调用，将它们堆叠在某个地方，处理它们并回答。问题是它们不会一来就跑。响应是接收到的每个 rpc 调用的 ACK。问题是我想以一种方式设计它，我可以让许多侦听服务器在同一个调用堆栈中写入，并在它们到来时将它们堆积起来。

我的目标是尽可能多地接听电话。我应该如何实现这一目标？

我的主要技术是 Perl 和 node.js，但会使用任何开源软件来完成这项任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:30:24.150

听起来任何类型的作业队列都可以满足您的需要；我个人非常喜欢将[Redis](http://redis.io/)用于此类事情。由于 Redis 列表维护插入顺序，您可以简单地[将](http://redis.io/commands/lpush)您的 RPC 调用信息从任意数量的 Web 服务器侦听 RPC 调用，以及其他地方（在另一个进程/另一台机器上，我假设）[RPOP](http://redis.io/commands/rpop)（或[BRPOP](http://redis.io/commands/brpop)）关闭并处理它们。

由于 Node.js 使用完全异步 IO，假设您没有在 RPC 侦听器中进行大量处理（也就是说，您只是在侦听请求、发送 ACK 并推送到 Redis），我的猜测是 Node在这方面将*非常*有效。

将 Redis 用于队列：如果要确保在发生灾难性故障时不会丢失作业，则需要实现更多逻辑；来自[RPOPLPUSH](http://redis.io/commands/rpoplpush)文档：

> **模式：可靠队列**
> 
> Redis 通常用作消息传递服务器，以实现处理后台作业或其他类型的消息传递任务。一种简单的队列形式通常是在生产者端将值推送到一个列表中，并在消费者端使用 RPOP（使用轮询）或 BRPOP 等待这个值，如果客户端通过阻塞操作得到更好的服务。
> 
> 但是，在这种情况下，获得的队列是不可靠的，因为消息可能会丢失，例如在网络问题或消费者在收到消息后崩溃但仍需处理的情况下。
> 
> RPOPLPUSH（或阻塞变体的 BRPOPLPUSH）提供了一种避免此问题的方法：消费者获取消息并同时将其推送到处理列表中。一旦消息被处理，它将使用 LREM 命令从处理列表中删除消息。
> 
> 额外的客户端可能会监视处理列表中停留时间过长的项目，并在需要时将那些超时的项目再次推送到队列中。

# javascript - Redirect to other window JS

> ID：10780486
> 
> 赞同：0
> 
> 时间：2012-05-28T06:50:51.737
> 
> 标签：javascript, asp.net, html

I'm having problem in redirecting at JS. Here's the situation: the current directory of the html code is : `http://localhost:7927/MyWeb/Catch%20the%20bird%20game/GAME1.html`

I want to change the directory to

```
'http://localhost:7927/MyWeb/games.htm' 
```

I tried using window.location("games.htm"); but it will redirect to that directory:

`http://localhost:7927/MyWeb/Catch%20the%20bird%20game/GAME1.html/games.htm`

What's the solution? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:52:34.833

你可以试试：

```
window.location("../games.htm"); 
```

或者：

```
window.location("/MyWeb/games.htm"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:51:58.130

你应该使用

```
window.location.href = "/myweb/games.htm" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:58:10.917

利用

```
window.location = 'http://localhost:7927/MyWeb/games.htm'; 
```

或者只是这个

```
window.location = '/MyWeb/games.htm'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:07:17.787

我通常使用

```
window.location.href = ... 
```

或者

```
window.location.replace(...); 
```

另请查看此[SO 帖子](https://stackoverflow.com/questions/1865837/whats-the-difference-between-window-location-and-window-location-replace)。

# javascript - .jqm 不是函数

> ID：10780493
> 
> 赞同：0
> 
> 时间：2012-05-28T06:51:24.200
> 
> 标签：javascript, jquery, javascript-events

我在 jqm 函数中遇到问题

```
 <span class="smaller gray">[ <span class="blueonly"><a href="javascript:void(0)" rel="nofollow" onclick="javascript:jQuery(\'#saved_search_modal\').jqm({modal: false}).jqmShow();" >' . $phrase['_save_as_favorite_search'] . '</a></span> ]</span>'; 
```

根据上述功能，当我单击保存搜索链接时，它会引发错误显示

```
jQuery("#saved_search_modal").jqm is not a function 
```

为什么会这样......请任何人建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:09:13.757

试试这个

```
$(document).ready(function(){
// write your code here, related to jqm.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:58:09.203

您应该检查您的插件是否已正确且及时地加载。您可以为此使用firebug for Firefox（或其他浏览器的任何其他等效项）

检查 NET 选项卡以查看您的外部文件是否已正确加载，并在尝试使用它们之前使用调试器查看它们是否已加载。

请注意，像上面这样的内联代码会使调试变得更加困难。我强烈建议您将您的 javascript 从您的标记中分离出来，并将其放入外部文件中。

# android - case statmenet 里面应该写什么代码

> ID：10780494
> 
> 赞同：-2
> 
> 时间：2012-05-28T06:51:37.803
> 
> 标签：android

当我点击它时，我在android中创建了一个按钮checkdata，它没有做任何事情......

```
switch(v.getId()){

        case R.id.Button01add:
            showDialog(DIALOG_ID);
            break;

        case R.id.Button01check:
             break;
        } 
```

当我单击添加时，它会弹出一些对话框，就像我想显示保存在数据库中的图像一样，当我单击检查按钮时，这是我的 checkdata.java

```
public class CheckData extends ListActivity  {     
    TextView selection;
    DataManipulator dm;
    private DataManipulator DbHelper;
private Object testFruit;
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.check);
    dm = new DataManipulator(this);

    LinearLayout layout = new LinearLayout(this);
    ImageView image = new ImageView(this);
    DbHelper = new DataManipulator(this);

    DbHelper.open();
    DbHelper.createFruitEntry((Fruit) testFruit);
    DbHelper.close();

    testFruit = null;

    DbHelper.open();
    testFruit = DbHelper.getFirstFruitFromDB();
    DbHelper.close();

    image.setImageBitmap(((Fruit) testFruit).getBitmap());

    ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(
                                    LinearLayout.LayoutParams.WRAP_CONTENT,
                                    LinearLayout.LayoutParams.WRAP_CONTENT);

    setContentView(layout);
    addContentView(image, params);
} 
```

}

在这个案例语句之间应该写什么，以便我可以看到保存在数据库中的图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:57:45.600

```
public class TestActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

  Button aboutButton =(Button)findViewById(R.id.about_content);
        aboutButton.setOnClickListener(this);
    }
public void onClick(View v) {
        switch (v.getId()) {
        case R.id.about_content:
        break;
        // More buttons go here (if any) ...
        }
    }
} 
```

试试上面的代码。

# php - Doctrine2 - 使用外键列作为普通字段

> ID：10780495
> 
> 赞同：4
> 
> 时间：2012-05-28T06:51:43.233
> 
> 标签：php, orm, doctrine-orm, foreign-key-relationship

有没有办法在教义中有这样的东西：

```
class Entity {

    /**
     * @Column(name="related_entity_id")
     */
    private $relatedEntityId;

    /**
     * @ManyToOne(targetEntity="RelatedEntitiy")
     * @JoinColumn(name="related_entity_id", referencedColumnName="id")
     */ 
    private $relatedEntity;
} 
```

我想做的事情是这样的：

调用 Entity::setRelatedEntityId($someId)，并持久化实体，并让实体通过调用 Entity::getRelatedEntity() 返回相关实体。

相关实体是从一个表中选择的，该表将受到严格限制，并且在运行时永远不会动态增长，因此相关实体 ID 的数量是有限的。

在创建新实体时，我想设置相关实体​​ id，但不必从数据库中获取整个相关实体。

据我测试，它不起作用，因为如果我设置了relatedEntityId 而不是relatedEntity，Doctrine 会自动将related_entity_id 列设置为null，因为基本上没有建立任何关系。

我也尝试过这样做：

删除relatedEntityId 属性，并使用

```
Entity::setRelatedEntity(new RelatedEntity($relEntId)) 
```

RelatedEntity 的构造函数将设置 id，但不会设置其他值。我不想持久化相关实体（它的值已经在数据库中为给定的 $relEntId 设置），但是这次 Doctrine 在刷新时发出错误信号，因为它有一个未持久化的实体。

基本上，我想做的是在不知道相关实体的 ID 的情况下创建关系。如果有其他方法可以做到这一点，请分享。

提前致谢

编辑：

我找到了解决方法。由于 RelatedEntities 将是一组有限的不可变对象，因此我执行了以下操作：

1.  使用 entityManager 查找所有相关实体；
2.  将列表注入将创建新实体的对象
3.  创建新实体时，从列表中选择一个相关实体作为其相关实体

我会把这个问题留一两天，以防有人想出更好的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:12:29.137

使用实体代理：

```
Entity::setRelatedEntity($entityManager->getReference('RelatedEntity', $relEntId)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T07:00:46.653

我不认为这应该像你描述的那样工作:)

您添加的实体必须是 Doctrine 托管对象，这意味着您必须首先使用`find()`方法族自己加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:13:53.160

根据我对 Doctrine 2 的经验，这里进一步阐述[http://ssmusoke.wordpress.com/2012/03/25/doctrine2-day-3-proxies-associations-relationships/](http://ssmusoke.wordpress.com/2012/03/25/doctrine2-day-3-proxies-associations-relationships/)

我的方法如下：

a) 只有 $relatedEntity 属性

b) 添加一个 getRelatedEntityId() 函数，该函数从 $relatedEntity 返回 id 值

c) 添加一个 setRelatedEntityId() 来设置 $relatedEntity 对象 - 您可能需要从数据库中加载它，当您只有相关实体的 id 时，可以避免污染其他层

d) 添加 getRelatedEntity() 和 setRelatedEntity() 函数

底线：您不能拥有外键列和映射属性的属性，因为 Doctrine 会混淆

# collections - dijit.WidgetSet domNode

> ID：10780497
> 
> 赞同：0
> 
> 时间：2012-05-28T06:51:47.150
> 
> 标签：collections, dojo, widget

我的自定义小部件有一个`collection`基于 AJAX 响应构建的子小部件。所以我需要维护一个`array`子小部件并将`domNode`这些小部件附加到其父小部件的`domNode`.

我可以使用一个`dijit.WidgetSet`集合，`child widgets`但没有`dijit.WidgetSet.domNodes()`方法来获取所有小部件的 domNodes。也不`dijit.WidgetSet`关心子节点在其`parent DomNode`

还有其他`class`人可以这样做吗？例如，将子类`dijit.WidgetSet`化来处理附加到父 domNode 是对 Wheel 的重新发明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:52:45.457

如果您使用 dijit._Container 扩展您的父级，您可以通过调用来获取您的小部件集`parent.getChildren()`。小部件返回的顺序是它们被添加到父级（`parent.addChild()`）的顺序，而不是 DOM 同级引擎的顺序。但是，一旦您使用解析器，这个 ofc 将是相同的。好吧，任何小部件都会实现 getChildren，但 _Container 类的不同之处在于，`addChild: function(/*dijit._Widget*/ widget, /*int?*/ insertIndex)`and`removeChild: function(/*Widget|int*/ widget)`函数非常漂亮。如果在添加子项时放置一个 insertIndex，则兄弟关系是可以管理的。

考虑到 domNodes，使用 dijit，我们可以“超越” DOM 并在小部件层中工作——这只是一个 JS 包装。可链接的函数 '.domNodes()' 在 dojo 中的任何地方都不存在，您需要调用类似于以下内容：

```
parent.getChildren().forEach(function(childWidget) {
  var domNode = childWidget.domNode;
  ...
}); 

// this would get nowhere as the return child-set is merely a 'stupid' array
parent.getChildren().set("attribute", "value"); 
```

这是上面 foreach 的一个可爱的小包装，使用 dijit/map

```
// retreives an array of the actual domNodes of widgetset
dijit.registry.map(function(widget){return widget.domNode;}).forEach(
    // uses hitch to allow passing parameters without wrapping in new function
    dojo.hitch( 
        window,            // on random scope
        dojo.addClass,     // calling function
        "imTheChildDomNode"// arguments[0]
    )
); 
```

# eclipse - 将 eclipse tomcat 项目移动到独立 tomcat

> ID：10780499
> 
> 赞同：0
> 
> 时间：2012-05-28T06:52:02.103
> 
> 标签：eclipse, tomcat, deployment

我已经在 Eclipse 中完成了一个项目，并且我能够在 Eclipse 环境中部署和使用 servlet。我的 servlet 都是从 `http://localhost:8080/Report/ServletName`. 我将此项目导出为 .WAR 文件。如何在我的 ubuntu 机器上的 tomcat 6 设置中部署这个 WAR。并且这些 servlet 是否仍然可以在相同的地址（`http://localhost:8080/Report/ServletName`）上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:08:36.383

您将战争文件放在`webapps`Tomcat 的文件夹中。有关在 tomcat 中部署的文档，请参阅[http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html](http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html)。如果 war 文件名为`Reports.war`，则 Web 应用程序将在`/Report/`上下文路径下可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:08:48.207

所有 Tomcat 部署方法都在这里详细解释：http: [//tomcat.apache.org/tomcat-6.0-doc/deployer-howto.html#Deployment_on_Tomcat_startup](http://tomcat.apache.org/tomcat-6.0-doc/deployer-howto.html#Deployment_on_Tomcat_startup)。

不过，我建议使用 Tomcat 管理器。

部署地址将根据您的 WAR 文件的名称而变化。

# google-closure-library - depswriter.py 抱怨“命令行太长”

> ID：10780502
> 
> 赞同：1
> 
> 时间：2012-05-28T06:52:21.073
> 
> 标签：google-closure-library

我尝试在 Windows 7 中使用 'closure-library\closure\bin\build\depswriter.py' 创建 deps.js 文件。我的 python 版本是 2.7.3。它抱怨“命令行太长”。

它在 Linux 中运行良好。

使其在Windows中工作的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:50:54.530

要解决[Windows 命令行限制](http://support.microsoft.com/kb/830473)，`depswriter.py`您可以使用以下标志递归扫描目录中的 JavaScript 文件：

```
--root               A root directory to scan for JS source files. Paths of JS 
                     files in generated deps file will be relative to this path. 
                     This flag may be specified multiple times.  

--root_with_prefix   A root directory to scan for JS source files, plus a prefix
                     (if either contains a space, surround with quotes).  Paths 
                     in generated deps file will be relative to the root, but 
                     preceded by the prefix. This flag may be specified multiple 
                     times. 
```

在许多情况下，可以使用一个`--root`标志指定整个项目。

# java - Maven 程序集插件在 jenkins 中重新下载依赖项

> ID：10780503
> 
> 赞同：6
> 
> 时间：2012-05-28T06:52:26.887
> 
> 标签：java, maven, jenkins, lwjgl, slick2d

出于某种原因，每次我尝试使用 Jenkins 构建项目时，maven 似乎都在尝试下载项目的依赖项。有几个问题。第一个是它根本不应该这样做，另一个问题是它甚至没有尝试从正确的 repo 下载它们，这意味着它必须等待它们中的每一个超时。

我可以自己运行 mvn clean package 并在大约 4 秒内构建它，因为所有依赖项都在我的本地 .m2 存储库中。Jenkins 安装在本地并且正在共享这个 maven 存储库，所以我不知道为什么它的行为不同。看来 jenkins 正在发出带有 -B 和 -f 标志的 maven 命令，并且使用的是 install 而不是 package 但即使我自己这样做，它也会在几秒钟内完成，而由于所有超时，Jenkins 需要大约 8 分钟它必须等待。

我标记了 Slick2d 和 lwjgl 库，因为我认为这与它们有关，因为它们不在公共 maven 存储库中，我必须手动将它们的存储库添加到 pom 中。

还可能值得注意的是构建完成并成功，唯一的区别是 Jenkins 在超时上花费了 8 分钟，而我自己在几秒钟内完成。

此外，当我最初试图弄清楚这一点时，当我尝试手动进行时也会发生这种情况。在我添加 Maven Natives Repository 后它停止了这样做，但我不知道为什么 Jenkins 仍在花时间，因为它们共享相同的本地存储库和

更新：在试图找出发生了什么之后，我似乎已经将其范围缩小到与 maven 程序集插件相关，因为如果我从我的 pom 中取出那部分，它就可以正常工作。

这是我的 pom 文件的相关部分：

```
<repositories>
    <repository>
        <id>slick</id>
        <name>slick</name>
        <url>http://slick.cokeandcode.com/mavenrepo</url>
    </repository>
    <repository>
        <id>mavenNatives</id>
        <name>Maven Natives Repository</name>
        <url>http://mavennatives.googlecode.com/svn/repo</url>
    </repository>
    <repository>
        <id>nolat.org</id>
        <name>Nolat</name>
        <url>https://raw.github.com/Talon876/repo/master/releases</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>
    <dependency>
        <groupId>org.nolat</groupId>
        <artifactId>toolkit</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.lwjgl.lwjgl</groupId>
        <artifactId>lwjgl</artifactId>
        <version>2.8.3</version>
    </dependency>
    <dependency>
        <groupId>slick</groupId>
        <artifactId>slick</artifactId>
        <version>274</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        [...]
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <id>jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <descriptorRefs>
                            <descriptorRef>jar-with-dependencies</descriptorRef>
                        </descriptorRefs>
                        <archive>
                            <manifest>
                                <mainClass>${main}</mainClass>
                                <addClasspath>true</addClasspath>
                            </manifest>
                        </archive>
                        <appendAssemblyId>false</appendAssemblyId>
                    </configuration>
                </execution>
                <execution>
                    <id>dist</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <descriptors>
                            <descriptor>src/META-INF/dist.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
 </build> 
```

这里是 Jenkins 控制台的相关部分（每条下载线都是在放弃和继续之前放置一段时间的地方）：

```
[JENKINS] Recording test results
mojoStarted org.apache.maven.plugins:maven-jar-plugin:2.3.2(default-jar)
[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ Falldown ---
mojoSucceeded org.apache.maven.plugins:maven-jar-plugin:2.3.2(default-jar)
mojoStarted org.apache.maven.plugins:maven-assembly-plugin:2.3(jar-with-dependencies)
[INFO] 
[INFO] --- maven-assembly-plugin:2.3:single (jar-with-dependencies) @ Falldown ---
Downloading: http://slick.cokeandcode.com/mavenrepo/phys2d/phys2d/060408/phys2d-    060408.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/phys2d/phys2d/060408/phys2d-060408.pom
Downloading:     https://raw.github.com/Talon876/repo/master/releases/phys2d/phys2d/060408/phys2d-060408.pom
Downloading: http://repo.maven.apache.org/maven2/phys2d/phys2d/060408/phys2d-060408.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/org/lwjgl/lwjgl/2.1.0/lwjgl-2.1.0.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/org/lwjgl/lwjgl/2.1.0/lwjgl-  2.1.0.pom
Downloading:    https://raw.github.com/Talon876/repo/master/releases/org/lwjgl/lwjgl/2.1.0/lwjgl-2.1.0.pom
Downloading: http://repo.maven.apache.org/maven2/org/lwjgl/lwjgl/2.1.0/lwjgl-2.1.0.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/org/lwjgl/lwjgl-jinput/2.1.0/lwjgl-jinput-2.1.0.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/org/lwjgl/lwjgl-   jinput/2.1.0/lwjgl-jinput-2.1.0.pom
Downloading: https://raw.github.com/Talon876/repo/master/releases/org/lwjgl/lwjgl- jinput/2.1.0/lwjgl-jinput-2.1.0.pom
Downloading: http://repo.maven.apache.org/maven2/org/lwjgl/lwjgl-jinput/2.1.0/lwjgl-jinput-2.1.0.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/org/lwjgl/lwjgl-native/2.1.0/lwjgl-native-2.1.0.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/org/lwjgl/lwjgl-native/2.1.0/lwjgl-native-2.1.0.pom
Downloading: https://raw.github.com/Talon876/repo/master/releases/org/lwjgl/lwjgl-native/2.1.0/lwjgl-native-2.1.0.pom
Downloading: http://repo.maven.apache.org/maven2/org/lwjgl/lwjgl-native/2.1.0/lwjgl-native-2.1.0.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/javax/jnlp/jnlp/1.2/jnlp-1.2.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/javax/jnlp/jnlp/1.2/jnlp-1.2.pom
Downloading: https://raw.github.com/Talon876/repo/master/releases/javax/jnlp/jnlp/1.2/jnlp-1.2.pom
Downloading: http://repo.maven.apache.org/maven2/javax/jnlp/jnlp/1.2/jnlp-1.2.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/ibxm/ibxm/unknown/ibxm-unknown.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/ibxm/ibxm/unknown/ibxm-unknown.pom
Downloading: https://raw.github.com/Talon876/repo/master/releases/ibxm/ibxm/unknown/ibxm-unknown.pom
Downloading: http://repo.maven.apache.org/maven2/ibxm/ibxm/unknown/ibxm-unknown.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/jcraft/jogg/0.0.7/jogg-0.0.7.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/jcraft/jogg/0.0.7/jogg-0.0.7.pom
Downloading: https://raw.github.com/Talon876/repo/master/releases/jcraft/jogg/0.0.7/jogg-0.0.7.pom
Downloading: http://repo.maven.apache.org/maven2/jcraft/jogg/0.0.7/jogg-0.0.7.pom
Downloading: http://slick.cokeandcode.com/mavenrepo/jcraft/jorbis/0.0.15/jorbis-0.0.15.pom
Downloading: http://mavennatives.googlecode.com/svn/repo/jcraft/jorbis/0.0.15/jorbis-0.0.15.pom
Downloading: https://raw.github.com/Talon876/repo/master/releases/jcraft/jorbis/0.0.15/jorbis-0.0.15.pom
Downloading: http://repo.maven.apache.org/maven2/jcraft/jorbis/0.0.15/jorbis-0.0.15.pom
[WARNING] Artifact: org.nolat:Falldown:jar:1.0-SNAPSHOT references the same file as the assembly destination file. Moving it to a temporary location for inclusion.
[INFO] META-INF/ already added, skipping
[INFO] META-INF/MANIFEST.MF already added, skipping
[INFO] org/ already added, skipping
...and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:42:06.167

获得稳定的 Maven 构建的第一步是使用 Maven 存储库管理器，例如[Nexus](http://www.sonatype.org/nexus/)。

*   安装 Maven 存储库管理器（如 Jenkins，如果您是唯一的开发人员，您可以在本地安装 Nexus）
*   [将 Maven 配置为使用单个 Nexus 组](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)。您必须为每个用户执行此操作，如果您有专门的系统用户来运行 Jenkins（推荐的方法），也为 Jenkins 用户执行此操作。如果您使用的 Maven 存储库管理器与 Nexus 不同，请查看文档。
*   仅在 Maven 存储库管理器中定义存储库。您的 POM 中没有存储库部分！

完成此操作后，请检查行为并告诉我们您是否有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T23:28:08.227

似乎 maven 程序集插件是尝试下载东西的原因，所以我用 maven shade 插件替换了它，它让我可以排除一些我想排除的文件。不确定这是否一定是最好的解决方案，但它适用于我的情况。最终将我的构建时间从 8 分钟减少到 25 秒。

这是我在取出程序集插件的 jar-with-dependencies 部分后添加到我的 pom 中的。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>1.6</version>
            <configuration>
                <createDependencyReducedPom>false</createDependencyReducedPom>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>
                            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>${main}</mainClass>
                            </transformer>
                        </transformers>
                        <filters>
                            <filter>
                                <artifact>*:*</artifact>
                                <excludes>
                                    <exclude>*.dll</exclude>
                                    <exclude>*.so</exclude>
                                    <exclude>*.jnilib</exclude>
                                </excludes>
                            </filter>
                        </filters>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# java - 包含所有组件的 JTable

> ID：10780506
> 
> 赞同：0
> 
> 时间：2012-05-28T06:52:40.140
> 
> 标签：java, swing, jtable

这是我的 JTable 代码，我打算让它包含所有组件，如 ComboBox、JSpinner、JRadioButton、JTextfeiled 等

但我最终得到了这个，表头没有出现，我不能编辑列。请指出我的错误，因为我尝试了很多并且已经放弃了

```
import java.awt.*;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.*;
import javax.swing.table.*;

public class TableComponent extends JFrame
{   
    JTable dataTable = null;
    public int changeRow = -1, changeColumn = -1;
    public JRadioButton radioButton = new JRadioButton();

    public void init() {
        JPanel upperPanel = setMainPanel();

        super.getContentPane().removeAll();
        Container content = super.getContentPane();
        content.setLayout(new BorderLayout());
        content.add(upperPanel, BorderLayout.CENTER);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setSize(800, 400);
        setVisible(true);
    }

    public static void main(String[] args) {
        TableComponent tableComponent = new TableComponent();
        tableComponent.init();
    }

    // This function set the main Panel
    private JPanel setMainPanel() {
        dataTable = createTable();

        dataTable = setTableProp(dataTable);

        JPanel panel = new JPanel(new BorderLayout(5, 10));

        //Get the screen size
        Toolkit toolkit = Toolkit.getDefaultToolkit();
        Dimension screenSize = toolkit.getScreenSize();

        panel.add(dataTable, BorderLayout.CENTER);

        return panel;
    }

    private JTable createTable()
    {
        String[] columnName = {"", "Name", "Radio", "Text", "Combo", "Spiner"};
        String []s={"01:1mS","02:2mS","04:4mS","06:6mS"}; 
        Object[][] data = new Object[5][6];
        for (int i = 0; i < 5; i++) {
            data[i][0] = new Boolean(false);
            data[i][1] = "Column 1";
            data[i][2] = new CustomRadio(false);
            data[i][3] = new CustomTextField("Test");
            data[i][4] = new CustomCombo(s);
            data[i][5] = new CustomSpiner();
        }

        AbstractTableModel model = new MyTableModel(data, columnName);
        JTable table = new JTable(model);

        return table;
    }

    // This function set the child table properties
    private JTable setTableProp(JTable table)
    {
        JTableHeader tableHeader = table.getTableHeader();
        tableHeader.setBackground(Color.WHITE);
        tableHeader.setForeground(Color.gray);

        table.setTableHeader(tableHeader);

        TableColumn tc = null;

        for (int j = 1; j < table.getColumnCount(); j++) {
            tc = table.getColumnModel().getColumn(j);

            if (j == 1) {
                tc.setCellRenderer(new ColumnRenderer());
            } else if (j == 2) {
                tc.setCellRenderer(new RadioButtonRenderer());
            } else if (j == 3) {
                tc.setCellRenderer(new TextFieldRenderer());
            } else if (j == 4) {
                tc.setCellRenderer(new ComboRenderer());
            } else if (j == 5) {
                tc.setCellRenderer(new SpinerRenderer());
            }
        }
        return table;
    }

    //This is the Abstract Table Model class
    class MyTableModel extends AbstractTableModel {

        private String[] columnName = null;
        private Object[][] data = null;

        MyTableModel(Object[][] data, String[] columnName) {
            this.data = data;
            this.columnName = columnName;
        }

        public int getColumnCount() {
            return columnName.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnName[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        /*
         * JTable uses this method to determine the default renderer/
         * editor for each cell.  If we didn't implement this method,
         * then the first column would contain text ("true"/"false"),
         * rather than a check box.
         */
        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        public boolean isCellEditable(int row, int col) {
        //    if (col == 1)
                return true;
    //        else
    //          return false;
        }

        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
        }
    }

    class ColumnRenderer extends DefaultTableCellRenderer {
            public ColumnRenderer() {
            super();
        }

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Component cell = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            return cell;
        }
    }

    class RadioButtonRenderer implements TableCellRenderer, ItemListener {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            if (value == null) {
                return null;
            }

            CustomRadio radio = (CustomRadio) value;

            return radio;
        }

        public void itemStateChanged(ItemEvent e) {}
    }

    class TextFieldRenderer implements TableCellRenderer {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
                if (value == null) {
                    return null;
                }

                CustomTextField customTextField = (CustomTextField) value;

                return customTextField;
            }
    }

    class ComboRenderer implements TableCellRenderer {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            if (value == null) {
                return null;
            }

            CustomCombo customCombo = (CustomCombo) value;

            return customCombo;
        }
    }

    class SpinerRenderer implements TableCellRenderer {

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            if (value == null) {
                return null;
            }

            CustomSpiner customSpiner = (CustomSpiner) value;

            return customSpiner;
        }
    }

    class CustomRadio extends JRadioButton {
        public CustomRadio(boolean isSel) {
            super();
            this.setSelected(isSel);
        }

        public CustomRadio(ButtonGroup btnGroup, boolean isSel) {
            this(isSel);
            btnGroup.add(this);
        }
    }

    class CustomTextField extends JTextField {
        public CustomTextField(String dataVal) {
            super();
        }
    }

    class CustomCombo extends JComboBox {
        public CustomCombo(String[] s) {

            super(s);
        }
    }

    class CustomSpiner extends JSpinner {
        public CustomSpiner() {
            super();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:03:09.273

JTable 不应该包含组件。它应该包含数据（字符串、整数、布尔值、日期等）。渲染器的目标是使用一个组件（多个单元格的相同实例）将这些数据转换为视觉对象（标签、单选按钮、图标……）。编辑器的目标是能够在可编辑的组件中显示数据，接受新值，并使用最终用户输入的数据更改数据的值。

不要将组件存储在 JTable 中。如果默认设置不适合您的需要，请配置渲染器和/或编辑器以渲染/编辑数据。

这在[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中都有解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T07:07:37.173

> 表头没有出现，也无法编辑列，请指出我的错误，因为我尝试了很多并放弃了

[这个问题在JTable 教程 Concepts: Editors and Renderers](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)和[Using Other Editors](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)中有非常详细的描述

1.  [组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)

2.  [JSpinner](https://stackoverflow.com/a/10616768/714968)

3.  [JRadioButton](https://stackoverflow.com/a/10616768/714968)

4.  [JTextField，JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#validtext)

如果不了解渲染器和编辑器的工作原理，这些链接将无法帮助您

# javascript - 如何在 OpenCart 中延迟内联脚本

> ID：10780514
> 
> 赞同：0
> 
> 时间：2012-05-28T06:53:10.433
> 
> 标签：javascript, jquery, opencart

如果您曾经使用过 OpenCart，并且您是正确标记和优化的忠实拥护者，那么您已经知道***它是多么痛苦。

整个模板都有内联js，因为它依赖于模板中的php变量来执行js。

我目前正在开发 OC 的 HTML5 分支，它将所有这些废话从模板中移出，并将所有链接的 js 文件移动到它们应该在的页面底部。

问题是有一个客户现在想要这个，并且正确移动所有这些脚本需要数周时间，所以我试图找到一种可靠的方法来推迟内联脚本，以便它只会在所有文件都执行后执行加载在底部。

我尝试在 script 标签上使用 defer，但 Chrome 仍然会在找到它后立即执行它，我想大多数其他浏览器也会这样做。

例如这里的轮播模块：

```
<div id="carousel<?php echo $module; ?>" class="es-carousel-wrapper">
   <div class="es-carousel">
      <ul>
      <?php foreach ($banners as $banner) { ?>
         <li>
             <a href="<?php echo $banner['link']; ?>">
                 <img src="<?php echo $banner['image']; ?>" 
                    alt="<?php echo $banner['title']; ?>" 
                    title="<?php echo $banner['title']; ?>" />
             </a>
         </li>
      <?php } ?>
      </ul>
   </div>
</div>
<script type="text/javascript" defer>
    $('#carousel<?php echo $module; ?>').elastislide({
        speed       : 450,
        easing      : '',
        imageW      : 290,
        <?php if ($limit > 3): ?>
        minItems    : <?php echo $scroll; ?>
        <?php else: ?>
        minItems    : 1
        <?php endif ?>
     });
     $(window).triggerHandler('resize.elastislide');
</script> 
```

如您所见，将其保留在模板页面中并仅使用 php 中的变量要容易得多，显然正确的方法是将变量实现到 js 中并稍后调用它们，这就是我为另一个客户端所做的，但这需要很长时间。

有没有一种可靠的方法可以使用 defer 来实现这一点？

谢谢。

-文斯

# iphone - 如何在iphone中设置选定日期的闹钟？

> ID：10780517
> 
> 赞同：4
> 
> 时间：2012-05-28T06:53:18.817
> 
> 标签：iphone, ios, nsnotificationcenter, nsnotifications

我想为一周中的选定日期设置闹钟。

它可能是工作日（周一、周二、周三、周四或周五）、周末（周六、周日）或每天。

我如何使用本地通知来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:21:22.423

如果您有时间每天都必须触发通知，则应该这样做

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [[NSDateComponents alloc] init];
    for (NSMutableArray * arrDay in self.namaztimes) {
        NSLog(@"Alarm Array: %@", arrDay);
        int count=[arrDay count];
        if(!count){
            continue;
        }

        int day =0;
        int month=0;
        int year=0;
        int hour =0;
        int minutes=0;

        //  NSArray *arrDates=[[NSMutableArray alloc] initWithCapacity:1];
        for ( int i=0;i<3;i++) {
            NSString * dayTime=[arrDay objectAtIndex:i ];
            if (i==0) {
                day = [dayTime intValue];    
            }else if(i==1){
                month = [dayTime intValue];                    
            }else if(i==2){
                year = [dayTime intValue];    

            }
        }
        for ( int i=3;i<count;i++) {
            NSString * dayTime=[arrDay objectAtIndex:i ];
            hour = [[dayTime substringToIndex:2] intValue];
            minutes = [[dayTime substringFromIndex:3] intValue];

            [components setDay:day];
            [components setMonth:month];
            [components setYear:year];
            [components setMinute:minutes];
            [components setHour:hour];

            NSDate *myNewDate = [calendar dateFromComponents:components];

            [self scheduleNotificationForDate:myNewDate];

        }
    }

    [components release];
    [calendar release]; 
```

然后从这里它将连接到主通知触发方法
`[self scheduleNotificationForDate:myNewDate];`

```
-(void) scheduleNotificationForDate: (NSDate*)date {
    /* Here we cancel all previously scheduled notifications */
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    UILocalNotification *localNotification = [[UILocalNotification alloc] init];
    localNotification.fireDate = date;
    NSLog(@"Notification will be shown on: %@ ",localNotification.fireDate);

    localNotification.timeZone = [NSTimeZone defaultTimeZone];
    localNotification.alertBody = @"Your Notification Text"; //[NSString stringWithFormat:@"%@",date];
    localNotification.alertAction = NSLocalizedString(@"View details", nil);

    /* Here we set notification sound and badge on the app's icon "-1" 
     means that number indicator on the badge will be decreased by one 
     - so there will be no badge on the icon */

    localNotification.repeatInterval = NSDayCalendarUnit;
    localNotification.soundName = UILocalNotificationDefaultSoundName;
    localNotification.applicationIconBadgeNumber = -1;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T15:13:23.917

我知道这个问题很久以前就被问过了，我添加这个是因为它会对某些人有所帮助。

如果您想通知选定的日期，请按照本[教程](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)进行操作。这会很有帮助。

# python - 导入持久模块时出错

> ID：10780523
> 
> 赞同：1
> 
> 时间：2012-05-28T06:53:48.253
> 
> 标签：python, wxpython

我正在使用 fedora 和 wxpython 版本 2.8.12。在尝试导入 wx.lib.agw.persist 时，我收到一条错误消息，提示 Import Error: No module persist。默认情况下，wxPython 是否不存在该模块，如果不是，我如何安装此模块？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:14:39.613

`wx.lib.agw.persist`是 2.8.12.1 中的新功能。

# c++ - 关于 EOF 和 Reader/Writer 同步

> ID：10780530
> 
> 赞同：0
> 
> 时间：2012-05-28T06:54:45.457
> 
> 标签：c++, file, io, eof, read-write

> 块引用

操作系统如何知道作家仍在写作。?...文件的EOF工作流程是什么（关闭文件句柄，如^D或^z）？如果 EOF 从未被写入会发生什么？

如果读者的阅读速度快于作家的写作速度会怎样？速率不匹配会导致死锁吗？

其他不需要的情况可能是什么？

操作系统在读取文件时如何计算 EOF？

-尼基尔

PS：当前的操作系统是 windows，但我也不介意在 unix 上学习有趣的功能。

> 块引用

**有关问题的更多编辑和更多信息**

现在我知道 EOF 不是字符，所以它不能写在文件的数据上。IF OS 使用 File_size 确定 EOF，就像 @saurabh 指出的那样。

(->)**读取时的 EOF**（可能由存储在相应文件系统的驱动器表中的文件大小确定）

*   进程也会不断轮询文件表的文件大小以确定 EOF，因为可能存在文件大小不固定的情况。
*   据我所知，当您阅读 **超出**EOF（在我们的案例中为文件大小）时会遇到 EOF。假设 writer 间歇性地写入而 reader 正在读取块的情况。所以如果读者试图阅读比可用块更多的内容，会抛出 EOF 吗？但是 Writer 还没有发出 EOF 信号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:13:16.500

1.  直到程序不关闭文件。操作系统假定文件可以读/写或两者兼而有之（取决于打开文件的模式）。

2.  EOF 什么都不是，但操作系统从文件的大小中知道它。可以说，您的文件大小为 100 字节，并且您要求从第 99 字节读取并要求再请求 6 个字节，然后操作系统知道该文件只有第 100 个字节，因此它将返回 EOF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:40:16.227

如果您正在从一个进程写入文件并从另一个进程读取文件，则可能需要考虑使用管道。这些是专门为您的目的而设计的特殊文件：您只能在一端写入，在另一端读取，如果没有任何数据要读取，则读取器会阻塞或收到通知......
是的，没有特殊的 EOF标记。如果使用普通文件并且您不太喜欢头痛，请不要同时从多个进程中处理它们。

# c - GDB 检查内存权限

> ID：10780540
> 
> 赞同：19
> 
> 时间：2012-05-28T06:55:32.423
> 
> 标签：c, linux, gcc, gdb, virtual-address-space

我在内存中有一个地址，我想找出该内存地址的权限（r/w/x）。

例如

```
char *s = "hello"; 
```

这里，字符串文字“hello”存储在只读存储器中。通过 gdb 运行程序时，是否有可能检查该内存地址的权限（是否允许仅读取等）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T07:16:51.770

您可以先找到`s`指向的位置：

```
(gdb) print s
$6 = 0x400dbc "foo" 
```

然后找到它所在的部分：

```
(gdb) maintenance info sections
Exec file:
    `/home/mfukar/tmp', file type elf64-x86-64.
    ...sections...
    0x00400db8->0x00400dfb at 0x00000db8: .rodata ALLOC LOAD READONLY DATA HAS_CONTENTS
    ...more sections... 
```

并寻找`READONLY`旗帜。

或者，查看您正在调试的进程的 pid`/proc/PID/maps`在哪里`PID`，您可以使用`info proc`.

# c++ - 矢量插入（）错误：矢量迭代器偏移超出范围

> ID：10780541
> 
> 赞同：0
> 
> 时间：2012-05-28T06:55:34.073
> 
> 标签：c++, vector

出于某种原因，这对我不起作用。它给了我向量迭代器超出范围的错误。

```
directory_entry TDE("Path");
vector <directory_entry> Temp;
Temp.push_back(TDE);

User_Data->DPath.insert(User_Data->DPath.begin(), Temp.begin(), Temp.end()); 
```

但是，这行得通，

```
vector <directory_entry> DPath;
directory_entry TDE("Path");
vector <directory_entry> Temp;
Temp.push_back(TDE);

DPath.insert(DPath.begin(), Temp.begin(), Temp.end()); 
```

我认为 User_Data->DPath 没有任何问题，因为我可以推送/弹出并访问其中的元素。但是由于某种原因，我无法缝合能够在其上使用插入而不会出现超出范围的错误。

有谁知道这可能是为什么？

**编辑：**出现一个弹出窗口，调试断言失败。它在向量头文件中给了我一行 1111 和一条消息“表达式：向量迭代器超出范围”。如果我确保 User_Data->DPath 中至少有一个元素，然后从 .begin+1 开始，我会得到“表达式：向量迭代器+偏移量超出范围”，它给了我向量头文件的第 157 行.

**编辑：** 你可能都是对的。g_new0 函数进行内存分配[http://developer.gnome.org/glib/2.32/glib-Memory-Allocation.html#g-new0](http://developer.gnome.org/glib/2.32/glib-Memory-Allocation.html#g-new0)

> struct_type ：要分配的元素的类型。n_structs ：要分配的元素数量。返回：指向已分配内存的指针，转换为指向 struct_type 的指针。

```
typedef struct {
    vector <directory_entry> DPath;
}State;

static gboolian select_dir (ClutterActor *actor, ClutterEvent *event, g_pointer data){
    State *User_Data = (State*)data;

    directory_entry Temp(Path);
    User_Data->DPath.push_back(Temp);

    ...
    return TRUE;
}

int main( argc, char*argv[]){
State *data = g_new0 (State, 1); 

...  

 g_signal_connect(Cluter_Actor, "button-event", G_CALLBACK(select_dir), data)

 ...

 clutter_main();
 g_free(data);
 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:18:29.897

`g_new0`不是替代品`new`

`new`做两件事：为对象分配内存，并调用对象的构造函数。`g_new0`只做第一个，分配内存。如果要使用，则需要显式调用对象的构造函数`g_new0`。这是使用“placement new”完成的：

```
State *data = g_new0 (State, 1); 
new (data) State;  // placement new - calls the constructor 
```

调用`State`的构造函数很重要的原因是它依次调用了`vector<directory_entry>`State 成员的构造函数，这就是初始化向量的原因。如果不正确初始化向量，您将无法使用它。

请注意，由于您显式调用构造函数，因此您还需要在释放内存之前显式调用析构函数：

```
data->~State();  // call destructor
g_free(data);    // free the memory 
```

* * *

`g_new0`您使用而不是 just是否有原因`new`？

```
State *data = new State;
...   // use data
delete data; 
```

# nsdate - 如何使用 Audio Queue API 播放歌曲以找到歌曲节拍的准确时间

> ID：10780543
> 
> 赞同：0
> 
> 时间：2012-05-28T06:56:02.353
> 
> 标签：nsdate, nstimer, core-audio, audioqueue, audio-player

现在我正在做一个需要准确计时的音乐项目。我已经使用了 NSTimer，NSdate，但是在播放节拍时我得到了延迟（节拍，即**tik tok**）所以我决定使用音频队列 API 来播放我的声音文件存在于 .wav 格式的主捆绑包中，我已经为此苦苦挣扎了 2 周，任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:18:16.580

使用未压缩的声音和单个音频队列，持续运行。不要在节拍之间停下来。而是混合每个 Tock 声音（等）的原始 PCM 样本，以分开一些确切数量的样本。在两者之间播放静音（零）。这将产生亚毫秒级的精确计时。

# iphone - UITextview dataDetectorTypeAddress - 在不同应用程序中打开的地图

> ID：10780545
> 
> 赞同：0
> 
> 时间：2012-05-28T06:56:14.650
> 
> 标签：iphone, ios, nsstring, uitextview, datadetectortypes

我刚刚了解到 UITextViews 的一个很棒的 ios 功能，即[UITextview dataDetectorTypes](http://mobiledevelopertips.com/user-interface/creating-clickable-hyperlinks-from-a-url-phone-number-or-address.html)。将文本显示为链接非常有用。

然而，我注意到一件事。当字符串是物理地址时，Google Map 会打开，这是合适的，但在不同的应用程序中。

有什么方法可以在我们的应用程序中打开该谷歌地图，而不是进入打开地图的默认 iOS 应用程序？这样我就可以从地图返回我的应用程序。有没有可以控制这个的委托方法？现在我必须最小化应用程序（使其在后台运行）并再次打开它看起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:29:09.983

很简单，你需要子类化`UIApplication`，覆盖它`openURL:`并将应用程序类名传递给目标，`main.m` `int main(...)`如下所示：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, @"MyApplication", NSStringFromClass([MyAppDelegate class]));
    }
} 
```

拦截您可以返回的 url，`NO`用于`maps:`不启动`Maps`应用程序并以您希望的任何方式处理地址的方案。

* * *

1.  在项目中创建一个新的类子类化`UIApplication`
2.  添加以下要覆盖的方法：

    -(BOOL)openURL:(NSURL *)url { NSLog(@"Open %@", [url absoluteString]);

    ```
    // do something if the url scheme is maps:
    return NO; 
    ```

    }

3.  在目标`main.m`文件中更改默认`int main(int argc, char *argv[])`实现以使其使用您的`UIApplication`类，它应该如下所示：

    #import < UIKit/UIKit.h> //去掉前导空格进行编译

    #import "LXAppDelegate.h"

    #import "LXapp.h"

    int main(int argc, char *argv[]) {

    ```
    @autoreleasepool {
        return UIApplicationMain(argc, argv, NSStringFromClass([MyUIApplication class]), NSStringFromClass([MyAppDelegate class]));
    } 
    ```

    }

那不是为了`ARC`（我从不使用它），请参阅[UIApplicationMain](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIApplicationMain)文档以了解发生了什么以及应该为 ARC 支持更改哪些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:30:50.807

您应该使用另一种解决方案来解决您的问题。

如果您使用 dataDetectorTypes，链接总是首先在内置应用程序中打开。

您可以使用按钮和自定义字符串进行操作，如下所示：

*   将您的文本推送到 UIButton 中。

*   使您的文本显示为与 NSAtributedSring 的链接作为这个问题，使用 UIButton 而不是 UITextView：

[uitextview 中的文本下划线](https://stackoverflow.com/questions/10309609/underline-text-inside-uitextview)

*   当用户单击它时为您的按钮执行操作。

祝你好运！

# c++ - C++和OpenCV的图像比较方法

> ID：10780547
> 
> 赞同：10
> 
> 时间：2012-05-28T06:56:23.460
> 
> 标签：c++, image-processing, opencv, image-comparison

我是**OpenCV**的新手。我想知道我们是否可以比较两张图像（一张是由*Photoshop*制作的图像，即源图像，另一张是从相机拍摄的），看看它们是否相同。我尝试使用模板匹配来比较图像。这没用。您能告诉我我们可以使用哪些其他程序进行这种比较吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T08:33:23.913

根据您的目的，可以通过不同的方式比较图像：

*   如果您只想比较两个图像是否大致相等（有一些亮度差异），但具有相同的视角和相机视图，您可以简单地计算每个色带的像素到像素平方差。如果两个图像上的平方和小于图像匹配的阈值，否则不匹配。
*   如果一个图像是另一个图像的黑白变体，则需要转换彩色图像（参见例如[http://www.johndcook.com/blog/2009/08/24/algorithms-convert-color-grayscale](http://www.johndcook.com/blog/2009/08/24/algorithms-convert-color-grayscale)）。Afterwarts 只需执行上述步骤。
*   如果一个图像是另一个图像的子图像，则需要对两个图像进行配准。这意味着确定将子图像放置在较大图像上所需的比例、可能的旋转和 XY 平移（有关配准图像的方法，请参阅：Pluim、JPW、Maintz、JBA、Viergever、MA、基于互信息的配准医学图像：一项调查，IEEE Transactions on Medical Imaging，2003 年，第 22 卷，第 8 期，第 986 – 1004 页）
*   如果您有透视差异，则需要一种算法来校正一个图像以尽可能匹配另一个图像。例如， 从第 15 页及以后的[http://javaanpr.sourceforge.net/anpr.pdf中查看偏移校正的方法。](http://javaanpr.sourceforge.net/anpr.pdf)

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T08:19:32.430

你应该试试 SIFT。您将 SIFT 应用于您的标记（图像保存在内存中），您会得到一些描述符（可以识别的点）。然后，您可以对相机帧使用 FAST 算法，以便在相机图像中找到标记的对应关键点。你有很多关于这个话题的话题：

[如何在 OpenCV 中使用 SIFT 提取的特征在目标对象周围得到一个矩形](https://stackoverflow.com/questions/8896771/how-to-get-a-rectangle-around-the-target-object-using-the-features-extracted-by)

[如何使用 SIFT 和 OpenCV 在图像中搜索对象？](https://stackoverflow.com/questions/4658390/how-to-search-the-image-for-an-object-with-sift-and-opencv)

[OpenCV - 使用 SURF 描述符和 BruteForceMatcher 进行对象匹配](https://stackoverflow.com/questions/7296915/opencv-object-matching-using-surf-descriptors-and-bruteforcematcher)

祝你好运

# android - 在线程内使用 toast 和 setText() 发布消息

> ID：10780548
> 
> 赞同：0
> 
> 时间：2012-05-28T06:56:24.617
> 
> 标签：android

当 readline!= null 时，我想在线程内使用 setText() 方法发布一些消息，但我发现错误。我无法显示 toast 并使用 setText() 方法。

```
public void run(){

    Looper.myLooper();
    Looper.prepare();

    try {           
        while(!((line = in.readLine()).equalsIgnoreCase("quit"))){              
            if(line.isEmpty()){
                System.out.println("there is no message");
            }else{                      

     Toast.makeText(this, "Message= " + line , Toast.LENGTH_SHORT).show();
                msgbox.setText(line);
            }               
        }           
    } catch (IOException e) {
        e.printStackTrace();
        System.out.println("Gagal mengirim ACK ke server");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:01:52.877

除了 UI 线程之外，您不能在任何线程中显示 toast 。您可以为此使用处理程序或 runOnUiThread 。

```
 activity.runOnUiThread(new Runnable() {
public void run() {
    Toast.makeText(youractivity.this, "Message= " + line , Toast.LENGTH_SHORT).show();
            msgbox.setText(line);
}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T07:02:52.457

你的错误是什么？

这段代码可以解决吗？

```
 try {       

            final StringBuffer strMessage = new StringBuffer();

        while(!((line = in.readLine()).equalsIgnoreCase("quit"))){              
            if(line.isEmpty()){
                System.out.println("there is no message");
            }else{                      

            strMessage.append(line)

            this.runOnUiThread(new Runnable() {
        public void run() {
            Toast.makeText(YourActivity.this, "Message= " + line , Toast.LENGTH_SHORT).show();
             msgbox.setText(strMessage.toString());
            //...
                    }
                });

            }               
        }           
    } catch (IOException e) {
        e.printStackTrace();
        System.out.println("Gagal mengirim ACK ke server");
    } 
```

runOnUiThread(...) 在 UI 线程上运行指定的操作。如果当前线程是 UI 线程，则立即执行该操作。如果当前线程不是 UI 线程，则将动作发布到 UI 线程的事件队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:01:11.137

您不能从非主线程更新您的 UI。您要么使用[处理程序和线程](http://www.vogella.com/articles/AndroidPerformance/article.html)。

或者干脆试试他的，像这样为Activity创建一个obj，

`Activity activityobj= yourActivity;`并在你的 run() 中使用它，

```
public void run(){

Looper.myLooper();
Looper.prepare();

try {           
    while(!((line = in.readLine()).equalsIgnoreCase("quit"))){              
        if(line.isEmpty()){
            System.out.println("there is no message");
        }else{                      
     activityObj.runOnUiThread(new Runnable() {

        @Override
        public void run() {
Toast.makeText(this, "Message= " + line ,Toast.LENGTH_SHORT).show();
            msgbox.setText(line);

        }
    });

        }               
    }           
} catch (IOException e) {
    e.printStackTrace();
    System.out.println("Gagal mengirim ACK ke server");
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:08:08.497

试试这个，

1）在你的类中创建一个处理程序：

```
private Handler mHandler = new Handler() {

    public void handleMessage(android.os.Message msg) {

        Toast.makeText(this, "Message= " + line ,Toast.LENGTH_SHORT).show();
        msgbox.setText(line);
    }
}; 
```

2）修改您的代码如下：

```
public void run(){

Looper.myLooper();
Looper.prepare();

try {           
    while(!((line = in.readLine()).equalsIgnoreCase("quit"))){              
        if(line.isEmpty()){
            System.out.println("there is no message");
        }else{                      
           mHandler.sendEmptyMessage(0);
        }               
    }           
} catch (IOException e) {
    e.printStackTrace();
    System.out.println("Gagal mengirim ACK ke server");
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T07:15:13.513

这里是

```
Handler handler = new Handler();    
public void run(){
Looper.myLooper();
Looper.prepare();
try {           
    while(!((line = in.readLine()).equalsIgnoreCase("quit"))){              
        if(line.isEmpty()){
            System.out.println("there is no message");
        }else{                      
  handler.post(new Runnable() {

                    @Override
                    public void run() {
                         Toast.makeText(this, "Message= " + line , Toast.LENGTH_SHORT).show();
            msgbox.setText(line);
                    }
                });

        }               
    }           
} catch (IOException e) {
    e.printStackTrace();
    System.out.println("Gagal mengirim ACK ke server");
}

} 
```

# java - 将从 Flash 网络摄像头捕获的图像从 Flash 阶段发送到基于 Java 的服务器

> ID：10780555
> 
> 赞同：0
> 
> 时间：2012-05-28T06:57:13.043
> 
> 标签：java, flash, jsp

我有一个 jsp 应用程序，它让最终用户从网络摄像头捕获图像，我使用 Flash 访问用户网络摄像头来触发它。到现在为止它很好并且也成功地从网络摄像头捕获图像但它仍然处于闪存阶段，所以我彻底搜索了这个然后我遇到了一个网站“xarg.org”，在那里我得到了网络摄像头插件，它可以将网络摄像头图像捕捉到 html画布（仅适用于 IE 9 和 mozila FF 以及其他支持 HTML 5 的浏览器）并将其发布为网络服务器，但为此他们使用我不会说的 PHP，我希望它使用 JSP 来完成。我需要从捕获的闪存阶段读取位图数据并希望将其转换为图像/字节数组以便将其传递给 JSP？是否有任何像 PHP 这样的 jsp 脚本可以将图像发布到服务器并存储在数据库中？我想做的是有意义的，否则它不会

```
<object id="whatever" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="282" height="180"codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0">
<param name="src" value="./swf/jscam.swf"/>
<param name="bgcolor" value="#FFFFFF"/>
<param name="quality" value="best"/>
<embed name="whatever" src="./swf/jscam.swf" width="282" height="180" bgcolor="#FFFFFF" quality="best" pluginspage="http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
</embed>
</object> 
```

这是我用来访问用户网络摄像头的代码，现在我想捕获网络摄像头的位图并将其发布/保存到本地主机的任何目录，但使用 JSP 而不是 PHP。有许多使用 PHP 的示例。

# android - 如何在 SD 卡中创建私人文件夹

> ID：10780559
> 
> 赞同：13
> 
> 时间：2012-05-28T06:57:47.940
> 
> 标签：android, sqlite

我的应用程序用于安全目的。因此，从我的应用程序用户捕获所有照片都存储在一个文件夹中的照片，该文件夹不应从任何其他应用程序访问，并且在设备连接到计算机系统时不应授予访问权限。如果用户想查看这些图像，他应该只能从我的应用程序访问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T07:05:21.747

根据本[指南](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)，您可以将文件直接保存在设备的内部存储中。默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。当用户卸载您的应用程序时，这些文件将被删除。例如：

```
String FILENAME = "hello_file";
String string = "hello world!";
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

MODE_PRIVATE 将创建文件（或替换同名文件）并使其对您的应用程序私有。其他可用模式包括：MODE_APPEND、MODE_WORLD_READABLE 和 MODE_WORLD_WRITEABLE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T07:03:34.950

AFAIK 的唯一方法是访问`encrypt`您存储的文件。没有办法阻止用户安装 sdcard 来访问存储在其中的每个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:04:26.377

根据这个相关问题，您只能在内部存储中创建受保护的文件（而不是在 SD 上）...

[创建任何其他应用程序都无法访问的文件夹](https://stackoverflow.com/questions/5632769/create-folder-than-can-not-accessible-by-any-other-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:04:41.190

尝试以下解决方案：

[如何以隐藏模式存储文件](https://stackoverflow.com/questions/5482639/how-to-store-a-file-in-hidden-mode)

虽然这不完全是你想要的，我怀疑它是否可能。最好的选择是将其隐藏，但也适用于约束（适用于 linux 而不适用于 Windows，其他应用程序仍然可以访问该文件夹）

[如何在android中隐藏sdcard的文件夹](https://stackoverflow.com/questions/8149103/how-to-hide-the-folder-of-sdcard-in-android)

[如何使文件隐藏在android sd卡中？](https://stackoverflow.com/questions/1129644/how-to-make-a-file-hidden-in-android-sd-card)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T07:04:46.417

当设备连接到 pc 时，不可能不访问该文件夹。在 sdcard 上也不可能，但是您可以对只能从您的应用程序打开的图像使用不同的格式，或者您可以加密图像。或者，如果您想隐藏图像以使其不显示到图库中，您可以在文件夹中放置一个名为“.nomedia”的空白文件。但如果您阅读有关 WRITE_EXTERNEL_STORAGE 权限的文档，这不可能是因为您会明白我在说什么。:)

# php - 如何使用 PHP 解析具有多个 xml 声明的 xml 文件？（几个 XML 文件的串联）

> ID：10780560
> 
> 赞同：3
> 
> 时间：2012-05-28T06:57:48.037
> 
> 标签：php, xml

xml的格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE >
<root>
 <node>
  <element1></element1>
  <element2></element2>
  <element3></element2>
  <element4></element3>  
</node>
</root>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE >
<root>
 <node>
  <element1></element1>
  <element2></element2>
  <element3></element2>
  <element4></element3>  
</node>
</root> 
```

以及之后的几个 xml 声明。顺便说一句，文件大小为 500MB。我想寻求帮助如何解析这个文件而不用 PHP 把它分解成不同的文件。

任何帮助，将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:10:17.537

如果您不想拆分文件，则必须在内存中使用它。鉴于您的文件大小为 500MB，这可能会出现问题。无论如何，一种选择是从所有文档中删除 XML Prolog 和 DocType，然后像这样加载整个内容：

```
$dom = new DOMDocument;
$dom->loadXML(
    sprintf(
        '<?xml version="1.0" encoding="UTF-8"?>%s' .
        '<!DOCTYPE >%s' . 
        '<roots>%s</roots>',
        PHP_EOL, 
        PHP_EOL, 
        str_replace(
            array(
                '<?xml version="1.0" encoding="UTF-8"?>', 
                '<!DOCTYPE >'
            ),
            '',
            file_get_contents('/path/to/your/file.xml')
        )
    )
); 
```

这将使它成为一个只有一个 XML prolog 和一个 DocType 的巨大 XML 文件（注意我假设 DocType 对于文件中的所有文档都是相同的）。然后，您可以通过遍历各个根元素来处理文件。

# javascript - jquery 2 divs儿童比较

> ID：10780562
> 
> 赞同：2
> 
> 时间：2012-05-28T06:58:04.060
> 
> 标签：javascript, jquery

我有 2 个元素（ div ）：

**一世**

```
<div id="1">
 <div >
  <img /> <img />
  <span> </span>
   . 
   .
 <div>
 <div>
  <p></p>
  .
  .
 </div> 
 .
 .
</div> 
```

**二**

```
<div id="2">
 <div >
  <img />
  <span></span>
  <h1></h1>
  . 
  .
 <div>
 . 
 .
</div> 
```

两个 div 都有`different number of child`，那些孩子也有`different number of there subchilds`。**我的问题**是，与 div#1 相比，我想比较这 2 个 div 并访问 div#2 中存在的所有不相似元素。我如何使用 jquery 方法并尽可能高效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:16:50.227

这对您来说是一个好的开始：

```
function compare(o1, o2){
 var arr = [];
 $(o1).each(function(i1){        
     var match = false;
     $(o2).each(function(i2){            
         if ( $("o1:eq("+i1+")").html() == $("o2:eq("+i2+")").html() )
             match = true;
     });
     if ( !match )
         arr.push($("o1:eq("+i1+")")[0]);        
 });
 return arr;
} 
```

您检查每个元素并寻找匹配项。推入数组中所有不匹配的元素并返回数组。
请注意，它比较每个给定对象的第一个孩子。
称之为：

```
var diffs = compare(div1,div2); 
```

# silverlight - Silverlight 中的数据绑定

> ID：10780565
> 
> 赞同：1
> 
> 时间：2012-05-28T06:58:19.797
> 
> 标签：silverlight, data-binding

我有一个包含 3 个字符串的类

例如：

```
class abc
        {

            public string a, b, c;

            public abc(string d, string e, string f)
            {
                a = d;
                b = e;
                c = f;
            }

       };

private void button1_Click(object sender, RoutedEventArgs e)
        {
            abc obj = new abc("abc1","abc2","abc3");

            var MainPage1 = new MainPage();
            MainPage1.DataContext = obj;
        } 
```

当我尝试绑定到文本块时，它不会绑定

```
<TextBlock Height="23" HorizontalAlignment="Left" Margin="201,66,0,0" Name="textBlock1" **Text="{Binding Path=a}"** VerticalAlignment="Top" />
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="201,107,0,0" Name="textBlock2" **Text="{Binding Path=b}"** VerticalAlignment="Top" />
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="201,156,0,0" Name="textBlock3" **Text="{Binding Path=c}"** VerticalAlignment="Top" /> 
```

我想我错过了一些东西，但需要帮助才能找到它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:01:43.027

您不允许绑定到字段，使其成为您的类的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:01:39.343

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms743643)：数据绑定引擎支持任何公共语言运行时 (CLR) 对象的公共属性、子属性以及索引器。

所以使用属性而不是公共字段：

```
public class abc
{

   public string a { get; set; }
   public string b { get; set; }
   public string c { get; set; }

   public abc(string d, string e, string f)
   {
      a = d;
      b = e;
      c = f;
   }

} 
```

`DataContext`现在您可以在 MainPage 的构造函数中将其设置为eg：

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();

        abc obj = new abc("abc1", "abc2", "abc3");

        this.DataContext = obj;
    }
} 
```

# php - 如何在 PHP 中按行长限制文本？

> ID：10780570
> 
> 赞同：3
> 
> 时间：2012-05-28T06:58:51.233
> 
> 标签：php, codeigniter

我目前正在开发一个 CMS，并希望添加通过行长限制文本摘录的功能。假设我想控制文本的显示并通过控制显示的文本行数来确保所有块的高度相同。

有没有人知道任何预先编写的功能或文章可以帮助我入门？将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:59:37.363

您可以使用本机[`wordwrap()`](http://php.net/manual/en/function.wordwrap.php)函数来控制每行允许多少个字符。此功能还允许您通过分解中断序列上的结果并将任意数量的结果数组值粘合在一起来限制要显示的行数。

```
$s = "This is the long string I wish to wrap to multiple lines.";

list( $one, $two ) = explode( PHP_EOL, wordwrap( $s, 25, PHP_EOL ) );

# This is the long string I wish to wrap to multiple...
echo "$one $two..."; 
```

在这里，我将每行限制为最多 25 个字符。然后我把前两行打印出来，一个接一个。

演示：[http ://codepad.org/8aCusZGQ](http://codepad.org/8aCusZGQ)

# xcode - 如何获取解析值？

> ID：10780577
> 
> 赞同：0
> 
> 时间：2012-05-28T06:59:44.990
> 
> 标签：xcode, json, ios5, nsdictionary

我正在编写以下代码。

```
NSDictionary* json = [NSJSONSerialization
    JSONObjectWithData:responseData 
 options:kNilOptions error:&error];

NSLog(@"%@",json); 
```

印刷的字典是

```
(
        {
        Contents =         (
                        {
                Id = 2;
                LastUpdated = "/Date(1338048712847+0000)/";
                Title = "Webinar: HP & MS solutions for Mid-Market";
                Url = "http://infra2apps.blob.core.windows.net/content/VMMM019-HP-MS_MidMarket.wmv";
            },
                        {
                Id = 1;
                LastUpdated = "/Date(1338048712773+0000)/";
                Title = "Webinar: Private Cloud with HP & MS";
                Url = "http://infra2apps.blob.core.windows.net/content/VMPC012-HPMS_PrivateCloud.wmv";
            }
        );
        Id = 1;
        ImageUrl = "http://infra2apps.blob.core.windows.net/eventapp/black-microsoft-logo.jpg";
        Name = "Unified Communications & Collaborations";
        Sessions =         (
                        {
                Description = "Microsoft Lync delivers Unified Communication to help People connect in new ways, anytime, anywhere. Learn how HP and Microsoft are helping customers transform their business infrastrucutre and gain greater productivity by making every communication an interaction that is more collaborative and engaging.";
                EndDate = "/Date(1275822000000+0000)/";
                FriendlyName = TB3257;
                Id = 1;
                Location = "Building N-4105";
                Speakers =                 (
                                        {
                        Company = Microsoft;
                        Email = "johndoe@microsoft.com";
                        Name = "John Doe";
                        Title = "Group Manager";
                    }
                );
                StartDate = "/Date(1275818400000+0000)/";
                Title = "Connecting People in New Ways with Microsoft Lync";
            },
                        {
                Description = "Microsoft Lync delivers Unified Communication to help People connect in new ways, anytime, anywhere. Learn how HP and Microsoft are helping customers transform their business infrastrucutre and gain greater productivity by making every communication an interaction that is more collaborative and engaging.";
                EndDate = "/Date(1275825600000+0000)/";
                FriendlyName = TB3258;
                Id = 2;
                Location = "Building N-4105";
                Speakers =                 (
                                        {
                        Company = HP;
                        Email = "janedoe@hp.com";
                        Name = "Jane Doe";
                        Title = "Vice President";
                    },
                                        {
                        Company = Microsoft;
                        Email = "johndoe@microsoft.com";
                        Name = "John Doe";
                        Title = "Group Manager";
                    }
                );
                StartDate = "/Date(1275822000000+0000)/";
                Title = "Connecting People in New Ways with Microsoft Lync - Part 2";
            }
        );
    }, 
```

....ETC

然后将内容值存储到另一个字典中，然后我存储到一个数组中。下面的代码是存储数组id

```
 NSDictionary *boothmenucontents = [json valueForKey: @"Contents"]; 
  NSMutableArray *dictResponseboothmenucontentsArray = [[NSMutableArray alloc] initWithObjects: boothmenucontents,nil];
 for(int i = 0; i<[dictResponseboothmenucontentsArray count]; i++)

    {
        NSMutableArray *IdArrayboothmenucontentes=[[dictResponseboothmenucontentsArray objectAtIndex:i] valueForKey:@"Id"];

        NSLog(@"id array is %@",IdArrayboothmenucontentes);
        for(int k=0;k<[IdArrayboothmenucontentes count];k++)
        {
            NSString * strcontentId= [NSString stringWithFormat:@"%@",[IdArrayboothmenucontentes objectAtIndex:k]]; 

            NSLog(@"strcontentId%@",strcontentId);
            label.text=strcontentId;
            [boothmenuidarrayvalues addObject:strcontentId];

            NSLog(@"%@",boothmenuidarrayvalues);

        }

    } 
```

最后我打印了boothmenuidarrayvalues

它像这样打印

```
 "(\n    2,\n    1\n)",
    "(\n    4,\n    3\n)",
    "(\n    6,\n    5\n)",
    "(\n    8,\n    7\n)",
    "(\n    10,\n    9\n)",
    "(\n    12,\n    11\n)" 
```

但我只想打印一次内容 ID，但它会连续打印两次。可能是我采用了错误的方法，请告诉我如何为该响应提供自己的根。

请帮我.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:22:42.447

也许它会帮助你。

```
NSMutableArray *contenstsArray = [contentsDictionary ValueForKey:@"Contents"]; //Suppose you already brought all the json data into contentsDictionary
NSMutableArray *idArray = [[NSMutableArray alloc] init];
for(NSMutableDictionary *idDic in contenstsArray) {
   NSString *idString = [idDic valueForKey:@"Id"];
   [idArray addObject:];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T00:56:17.143

这一行看起来不对：

```
NSMutableArray *IdArrayboothmenucontentes=[[dictResponseboothmenucontentsArray objectAtIndex:i] valueForKey:@"Id"]; 
```

我不确定你期望它做什么，但它看起来是在 dictResponseboothmenucontentsArray 中获取第 i 个对象，这是一个字典，然后使用键“Id”获取该字典中的对象，即一个数字，所以 IdArrayboothmenucontentes 现在包含一个 NSNumber，而不是一个数组。

# vb.net - 专注于工具条按钮 vb.net

> ID：10780580
> 
> 赞同：0
> 
> 时间：2012-05-28T07:00:02.973
> 
> 标签：vb.net, focus, toolbar, toolstrip, toolstripbutton

我创建了一个带有一些按钮的工具条。我有一个包含一些对象（如文本框、复选框、按钮等）的表单，当我将焦点放在最后一项上时，当我完成编译时，我需要使用键盘上的选项卡来关注工具条上的保存按钮。

谁能告诉我该怎么做？因为工具条上没有焦点选项。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:41:40.610

您需要覆盖 Tab 键处理。假设您的最后一个控件是 Button3，工具条按钮是 SaveButton，那么代码如下所示：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As Message, ByVal keyData As Keys) As Boolean
    If keyData = Keys.Tab AndAlso Me.ActiveControl Is Button3 Then
        ToolStrip1.Focus()
        SaveButton.Select()
        Return True
    End If
    Return MyBase.ProcessCmdKey(msg, keyData)
End Function 
```

根据需要进行调整以使用您的特定控件。

# sql-server - could not convert varchar to datetime in SQL server

> ID：10780587
> 
> 赞同：0
> 
> 时间：2012-05-28T07:00:50.070
> 
> 标签：sql-server

In my database i got problem when converting varchar to datetime due to different format of datetime as per below.

> Conversion failed when converting date and/or time from character string.

I have 2 select clause as per below

> Select Getutcdate()
> Select top 1 localmachinetime from perfmon

both return following format respectively

> 2012-05-28 06:54:45.753>
> 
> 28-05-2012 03:03:07

and when i try to convert it to datetime using CAST then it gives me error in second case as per below.

> The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:05:36.347

You can use [`convert`](http://msdn.microsoft.com/en-us/library/ms187928.aspx?ppud=4) with a Date/Time style.

```
convert(datetime, '28-05-2012 03:03:07', 105) 
```

# maven - 使用 jenkins 启动多个 selenium 测试用例

> ID：10780588
> 
> 赞同：1
> 
> 时间：2012-05-28T07:00:53.380
> 
> 标签：maven, jenkins, selenium-webdriver

我是使用詹金斯的新手。

我正在使用 jenkins 通过 maven 项目构建。在构建过程之后，我需要运行大约 5 个 selenium2 测试用例。每个测试用例大约需要 20 分钟才能完成，如果我一个接一个地运行一个测试用例，则完成所有测试用例大约需要 100 分钟。

我想知道是否可以一次启动所有测试用例，以便节省时间。

目前我的 pom.xml 如下 -

```
<plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <junitArtifactName>junit:junit</junitArtifactName>
          <includes>
                 <include>**/*Test*.java</include>
          </includes>
        </configuration>        

</plugin> 
```

请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:34:31.233

从 Jenkins 并行运行测试的最佳方式是 Selenium Grid。

您可以在此处找到有关网格的信息：http: [//selenium-grid.seleniumhq.org/](http://selenium-grid.seleniumhq.org/)

Jenkins 插件在这里：[https ://wiki.jenkins-ci.org/display/JENKINS/Selenium+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Selenium+Plugin)

# windows - CSS 在启用 BE 压缩 Typo3 4.5.5+ 和任何 Windows 浏览器时不断消失？

> ID：10780590
> 
> 赞同：0
> 
> 时间：2012-05-28T07:00:53.590
> 
> 标签：windows, firefox, google-chrome, opera, typo3

在我的 TYPO3 4.5.5、4.6.8、4.7.0 安装中，我启用了 BE 压缩，并将文件类型 css.gzip 和 js.gzip 添加到 gzip 编码中，但它似乎只在我使用 Linux 时才有效加载后端。当我从 Windows 框中加载后端时，后端 css 不断消失，就像这个问题一样：[Typo3 backend css 不断消失？](https://stackoverflow.com/questions/7068286/typo3-backend-css-keeps-disappearing). 我已经安装了 lighttpd 和 xdebug。我该如何追踪这个问题？我能做些什么更好？当我加载 BE 时，css 消失了，我看到白色背景和所有链接，或者 css 消失了，我只看到灰色背景？Opera、Firefox、Chrome 和 IE 都会发生这种情况，但仅限于 Windows。它在我的带有 Opera 的 vmware Linux 中运行良好。

这是我在 Windows 中收到的 html 文档的开头：

```
 <link rel="stylesheet" type="text/css" href="../typo3temp/compressor/ext-all-notheme-448c172dae3b05a28e37e929acd3dfbd.css.gzip?1338165817" media="all">
     <link rel="stylesheet" type="text/css" href="../typo3temp/compressor/xtheme-t3skin-b1eb282b32815f23ab802d5f31be8d32.css.gzip?1338165817" media="all">
     <link rel="stylesheet" type="text/css" href="../typo3temp/compressor/merged-13c77c78c44baff349c74df3ad74c358-2f57f69c13098471b93b4fa184d2bf2c.css.gzip?1338198129" media="all">
     <link rel="stylesheet" type="text/css" href="../typo3temp/compressor/opendocs-452c8b724f6c5a4422f90810531ca5a5.css.gzip?1338166068" media="all">  

     <script src="../typo3temp/compressor/prototype-8eb6a2a9407e9463f08359cc9bad4c87.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/effects-7755a9120837eb7b8dff7c8dd2348199.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/builder-4fb5884be8295df97135419557d212dd.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/effects-7755a9120837eb7b8dff7c8dd2348199.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/dragdrop-57bf1a5e32454608dbccbef2d2662a48.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/controls-722f428342d0f41d9510f8acd197ea7f.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/scriptaculous-8f7107540a1c9b395c16bfcafedf2cd2.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/ext-base-c203c25c05d8ccea2297e64c157fc2be.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/ext-all-97d26ae0274f2fc5953506492a4c41d4.js.gzip" type="text/javascript"></script>
     <script src="../typo3temp/compressor/ext-lang-de-6eab6fa8f67816fcbfac59dc46c48f64.js.gzip" type="text/javascript" charset="utf-8"></script> 
```

这是我的 lighttpd 规则：

```
 $HTTP["url"] =~ "\.js\.gzip$" {
    setenv.add-response-header = ("Content-Encoding" => "x-gzip")
    mimetype.assign = ( "js.gzip" => ".gzip" )
 }

 $HTTP["url"] =~ "\.css\.gzip$" {
      setenv.add-response-header = ("Content-Encoding" => "x-gzip")
      mimetype.assign = ( "css.gzip" => ".gzip" )
 }

 compress.allowed-encodings = ( "gzip", "deflate")
 compress.cache-dir = "/tmp/lighttpdcompress/"
 compress.filetype  = ( "text/html", "text/plain", "text/css", "text/xml", 
 "application/x-javascript" ) 
```

这是我来自 backend.php 的响应标头：

```
 Cache-Control  max-age=1728000, no-cache, must-revalidate
 Connection         close
 Content-Encoding   gzip
 Content-Type   text/html;charset=utf-8
 Date   Wed, 30 May 2012 12:17:50 GMT
 Expires    Tue, 19 Jun 2012 12:17:49 GMT, 0
 Last-Modified  Wed, 30 May 2012 12:17:49 GMT
 Pragma no-cache
 Server lighttpd/1.4.29
 Transfer-Encoding  chunked
 Vary   Accept-Encoding
 X-Powered-By   PHP/5.3.8 
```

这是我的请求标头：

```
 Accept text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
 Accept-Encoding    gzip, deflate
 Accept-Language    en-us,en;q=0.5
 Connection keep-alive
 Host   XXXX
 Referer    XXXX
 User-Agent Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 
```

这是我在登录屏幕上的帖子：

```
 challenge  XXXXXX
 commandLI  Login
 interface  backend
 loginRefresh   
 login_status   login
 p_field    
 redirect_url   backend.php
 userident  XXXXX
 username   XXXXX 
```

加载后我只能看到一个空的灰色屏幕，但使用 firebug 我可以看到所有源代码和 css 文件都已加载到我的浏览器中？我的后端真的只适用于 Linux 和 Opera（也许是 Firefox）？？？

编辑：我用 Firefox 12 和 Windows 7 Ultimate 检查了一个虚拟机，它工作正常？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:35:49.650

检查您的 HTTP 标头。他们是正确的吗？可能您的 .htaccess 规则无法正常工作。

[您可以使用Firefox Plugin Live HTTP Headers](http://livehttpheaders.mozdev.org/)跟踪标头。或者您可以使用像[webscarab](https://www.owasp.org/index.php/Category%3aOWASP_WebScarab_Project)这样的代理来跟踪 HTTP。

# android - BroadcastReceiver：活动从广播活动中获取数据

> ID：10780591
> 
> 赞同：0
> 
> 时间：2012-05-28T07:00:54.737
> 
> 标签：android, broadcastreceiver

我有 ActivityA 可以打开/关闭 BroadcastReceiver。当 ActivityA 打开/注册 BroadcastReceiver 时，其他活动能否获得广播？我不希望每个活动都注册一个 BroadcastReceiver，有什么办法吗？当我退出 ActivityA 时，我不会取消注册`broadcastTest`。

在我的 ActivityA 我有这个

```
 private BroadcastReceiver broadcastTest = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                // broadcast something here
           }
   } 
```

例如 ActivityB 将如何获得广播？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:10:42.397

你想要的是一个进程范围的广播接收器。所以我认为你应该在你的应用程序对象中注册/注销你的广播接收器。或者您可以在您的 AndroidManifest.xml 中声明它，然后接收者决定是否响应该广播事件。

# jquery - JQuery Mobile：如何在拆分视图中实现选择方法，以在详细信息视图中显示相应选定行的信息和详细信息

> ID：10780593
> 
> 赞同：0
> 
> 时间：2012-05-28T07:01:04.803
> 
> 标签：jquery, iphone, jquery-mobile, cordova, uisplitviewcontroller

我已按照链接**`Split view model`**中***`Jquery mobile + phone gap`***的说明实施：

[http://www.youtube.com/watch?v=qnNyHPWRz-Y](http://www.youtube.com/watch?v=qnNyHPWRz-Y)。

在**JQuery mobile中****为 iPad**实现拆分视图非常容易

 **并且需要 2-3 分钟来实现一个**`split view using jQuery mobile+ phone gap in iPad`**.

```
 <body> 
        <div data-role="page" data-theme="e" data-content-theme="d">

            <div data-role="header">
                JQuery Split View using link http://www.youtube.com/watch?v=qnNyHPWRz-Y
            </div>

            <div data-role="content">

                <!--- Right side view------>
                <div class="content-secondary">
                    <h3>Root View</h3>
                    <ul data-role="listview">
                        <li>Ashford Ridge Mine</li>
                        <li>Ashland Gold Mine</li>
                        <li>Brodford mine</li>
                        <li>Big Horn Mine</li>
                        <li>Elko pass</li>
                        <li>Emerad pine Gold</li>
                    </ul>
                </div>

                <!--- Right side view------>
                <div class="content-primary">
                    <h3>Details View</h3>
                    <p>
                    Detail VIEWS goes here......            
                    </p>
                </div>

            </div>

        </div>

    </body> 
```

我需要实现左侧根视图的选择方法

作为***`when we click a row in left side table it to display corresponding selected row's information and details in right side details view.`***

![在此处输入图像描述][1] 但是**`how to implement did select method to the left side root view`**

到***`display corresponding selected row's information and details in right side details view in the form of table views.`***

或者***`please provide me a good tutorial for Split view using jQuery mobile phone gap in iPhone`***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:21:53.907

试试这个...

```
$('ul[data-role="listview"] li').click(function() {
    var li_text = $(this).text();
    $.ajax({
       url:'<url to get detail from li text>',
       data : 'data='+li_text,
       success: function(result) {
           $('.content-primary').find('p').get(0).html(result);
       } // <-- add this
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:44:33.493

另一种方法是使用 css 显示和隐藏 div。也可以有更好的方法来做到这一点。由我的 2 美分！

splitwin.html

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Another Page</title>     
    <link rel="stylesheet" href="css/jquery.mobile-1.0.css" />
    <link rel="stylesheet" href="css/jqm-docs.css" />
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.0.js"></script>
    <script type="text/javascript" src="js/demo.js"></script>
</head> 
<body>

 <body>
    <div data-role="page" data-theme="e" data-content-theme="d">
        <div data-role="header">
            JQuery Split View using link http://www.youtube.com/watch?v=qnNyHPWRz-Y
        </div>
        <div data-role="content">
            <!--- Right side view------>
            <div class="content-secondary">
                <h3>Root View</h3>
                <ul data-role="listview">
                    <li>
                        <a href="#" id="Ashford">Ashford Ridge Mine</a>
                    </li>
                    <li>
                        <a href="#" id="Ashland">Ashland Gold Mine</a>
                    </li>
                    <li>
                        Brodford mine
                    </li>
                    <li>
                        Big Horn Mine
                    </li>
                    <li>
                        Elko pass
                    </li>
                    <li>
                        Emerad pine Gold
                    </li>
                </ul>
            </div>
            <!--- Right side view------>
            <div class="content-primary">
                <h3>Details View</h3>
                <p>
                    Detail VIEWS goes here......
                    <div id="link1" style="display:none">
                        Clicked 
                        Ashford Ridge Mine
                    </div>
                        <div id="link2" style="display:none">
                        Clicked 
                        Ashland Gold Mine
                    </div>
                </p>
            </div>
        </div>
    </div>
        </body> 

</body>
</html> 
```

演示.js

```
$('a#Ashford').live('click', function() {
    $("div#link2").hide();  
    $("div#link1").show();  
});

$('a#Ashland').live('click', function() {
    $("div#link1").hide();  
    $("div#link2").show();  
}); 
```**

# javascript - 在网格中使用 rowTemplate 时如何使剑道网格可编辑？

> ID：10780612
> 
> 赞同：2
> 
> 时间：2012-05-28T07:03:06.107
> 
> 标签：javascript, jquery, html

我在剑道网格中使用 rowTemplate。我没有找到任何正确的样本来编辑样本（使用行模板）在剑道网格中使用行模板时是否有任何方法可以编辑单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:38:40.513

我在[这里](http://jsfiddle.net/jbristowe/WMyYL/)发布了一个简单的例子。

# mysql - 如何避免mysql主键约束错误

> ID：10780614
> 
> 赞同：0
> 
> 时间：2012-05-28T07:03:13.277
> 
> 标签：mysql

我有一个 Mysql 表。

*   请求 - Request_id、Request_message

用户在 HTML 表单中填写 Request_message 后，用户单击提交按钮。我将从 requests 表中生成一个请求 ID，然后添加该行。（表中有两次命中，一次用于获取最后一个 request_id，一次用于将行添加到表中）。我想避免这种情况。

此外，假设同时有 7-8 个用户点击提交按钮，他们将从表中获得相同的最后一个 request_id。他们会将 1 添加到最后一个 request_id，并尝试添加该行。除了一个都得到**主键约束错误**..如何避免这种情况？

请提供您的建议。

谢谢德维什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:06:59.963

使用[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)作为主键。

***编辑：*** 如果您不对列使用整数类型，那么另一种解决方案是使用行级锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:07:46.637

使用 sp 在表中插入记录。

或者

对表中的主键使用自动编号字段。

或者

利用

```
 INSERTINTO request 
            (Request_id, 
             Request_message) 
VALUES      ( (SELECT 'REQ' + Lpad(Ifnull(Max(Request_id) + 1, 0), 4, 0) 
               FROM   request), 
              yourMessage) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:08:00.720

对于第一个问题，你可以做这样的事情

```
INSERT INTO request (Request_id,Request_message) VALUES (
   (SELECT MAX(Request_id) FROM request), yourMessage) 
```

或者更好，您可以使用pk的[自动增量](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

此外，如果您要求 DBMS 的所有增量/插入问题，您可以避免直接与 pk 相关的问题

# c# - 在 C# datagridview winform 顶部添加另一个列标题

> ID：10780615
> 
> 赞同：0
> 
> 时间：2012-05-28T07:03:17.423
> 
> 标签：c#, winforms, datagridview

我有一个有很多列（大约 40 列）的有界数据网格视图，我想知道是否可以在使用 SQL 查询创建的默认标题之上添加另一个列标题。所以它看起来像一个带有一些跨列的多行列标题。

我通过绘制自定义列标题看到了一些解决方案，但它们涉及创建所有列。如果我保留使用 SQL 查询创建的默认标题并在其顶部添加一个跨栏，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:45:36.053

`DataGridView`不支持跨栏。您将需要查看第三方、自定义渲染或停在网格上方的第二个控件。

# ios - 如何从 iOS 中的另一个 C 函数访问 C 函数

> ID：10780625
> 
> 赞同：0
> 
> 时间：2012-05-28T07:04:18.343
> 
> 标签：ios, function, function-declaration

我正在尝试为 AURenderCallback inputProc 分配一个函数

```
int setupRemoteIO(audio unit etc){
    inProc.inputProc = playerCallback
} 
```

但它表示 playerCallback 未在此范围内声明，尽管 playerCallback 与 setupRemoteIO 存在于同一文件和类中。

播放器回调是这样的

```
static OSStatus playerCallback(void *inRefCon etc) 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:07:32.900

在 C 语言中，您需要在第一次使用之前声明一个函数，即在文件中高于您尝试使用该函数的位置。这就是为什么包含文件通常聚集在文件顶部的原因。头文件中声明的所有符号都将在包含文件的整个代码中可用。

在这种情况下，这意味着您的回调声明：

```
static OSStatus playerCallback(void *inRefCon etc); 
```

必须出现在您的`setupRemoteIO()`函数之前，以便编译器在您使用它时知道该函数存在。

当您使用 iOS 时，我还要指出，在最近的编译器中，此限制*不适*用于 Objective-C 方法。它曾经：你只能使用已经见过的方法选择器。但是在较新版本的 Clang 中，Objective-C 方法可以使用稍后在同一文件中声明的选择器而不会出错。

# python - 使用 PyMix，将 m.em() 的最终迭代保存到向量或其他东西

> ID：10780626
> 
> 赞同：0
> 
> 时间：2012-05-28T07:04:20.763
> 
> 标签：python, statistics, packages, mixture-model

我正在使用 pymix 包来解决混合模型。

```
 m = mixture.MixtureModel(3,[0.1,0.8,0.1], [n1,n2,n3])

        # Resolver el Mixture model

        m.EM(data,100,0.1) 
```

之后我不能做

```
 print m 
```

我可以看到 3 个高斯混合的最终均值和标准差。问题是我想访问这些手段和标准来进行一些计算，但不知道如何做到这一点，m.EM() 从最后一次迭代返回一个后验矩阵和对数似然的元组，但显然不是这些均值和标准差，我这里有什么遗漏吗？提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:25:03.627

我对 PyMix 一无所知，但`print m`调用`m.__str__()`，[源代码](http://pymix.org/docu/mixture-pysrc.html#MixtureModel.__str__)可供您随时查看每个值的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T00:34:04.133

我想出了如何通过以下方式提取均值和标准差：

```
x1 = str(m.components[index])
x2 = x1[26:-2].split(",")
mean, stdev = list(map(float,x2)) 
```

我的 x1 抓取 'ProductDist: \n Normal: [mean, stdev]\n' 当你'打印 m' 时打印。x2 将 'mean, stdev' 抓取到一个数组中，最后一行将 mean 和 stdev 的字符串版本映射到浮点数。

# ios - Interface Builder 插座已连接，但代码没有？

> ID：10780629
> 
> 赞同：1
> 
> 时间：2012-05-28T07:04:28.183
> 
> 标签：ios, interface-builder, iboutlet

这一定是我见过的最奇怪的事情。因此，我将从使用 IB 创建的对象中设置一个事件处理程序，然后我将编写一些代码，例如：

```
[connectedObjectViaIB setBackgroundColor:[UIColor blackColor]]; 
```

也试过：

```
connectedObjectViaIB.backgroundColor = [UIColor blackColor]; 
```

即使事件处理程序被调用，并且确实通过了这段代码（用断点测试），背景也没有被设置。插座似乎没有连接，即使它看起来是。这发生在其他几个 IB 对象和其他属性设置器上。有人经历过吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:13:20.643

从它的声音来看（代码正在运行，但没有看到任何变化），您调用此代码为时过早。

在视图控制器中，只有在运行基础之后，才会连接任何出口`viewDidLoad`。在此之前，所有出口变量的值将为零。

像您这样的代码不起作用的常见情况是从`prepareForSegue`方法调用时 - 目标视图控制器的视图尚未加载，因此出口为零。

另一个是在初始化一个新控制器之后——同样，视图还没有加载。

# java - 有没有办法获取 JList 中的所有元素？

> ID：10780643
> 
> 赞同：15
> 
> 时间：2012-05-28T07:05:49.080
> 
> 标签：java, swing, list, jlist

我想知道是否有办法检索已添加到 JList 的所有元素的列表。例如，我希望 JList 从自定义单元格渲染器返回一个数组或字符串或 JLabels 列表。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T07:11:25.033

您可以使用[getModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#getModel%28%29)方法获取[ListModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListModel.html)。然后使用`getElementAt`and`getSize`方法来构建数组或列表或任何你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-07T17:56:51.220

是的当然。你`getElementAt()`有一个循环。

例子：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.WindowConstants;

public class Jlist {
    JFrame frame;
    JList<String> list;
    JButton button;

    public Jlist(){
        init();
    }

    public void init(){
        frame = new JFrame("Sample");
        frame.setSize(300, 300);
        frame.setLayout(new  BorderLayout(30, 30));

        DefaultListModel<String> model = new DefaultListModel<>();
        model.addElement("A");
        model.addElement("B");
        model.addElement("C");
        model.addElement("D");
        model.addElement("E");

        list = new JList<>();

        list.setModel(model);
        JScrollPane pane = new JScrollPane(list);
        pane.setViewportView(list);

        button = new JButton("Get");
        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                buttonActionPerformed();
            }
        });

        frame.add(pane, BorderLayout.NORTH);
        frame.add(button, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
    public void buttonActionPerformed(){
        for(int i = 0; i< list.getModel().getSize();i++){
            System.out.println(list.getModel().getElementAt(i));
        }
    }
    public static void main(String[] args) {
        new Jlist();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T11:11:57.023

试试这个...

```
 String[] myArray = new String[50];
    for (int i = 0; i < jList1.getModel().getSize(); i++) {
             myArray[i] = String.valueOf(jList1.getModel().getElementAt(i));
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-25T11:45:53.693

我还没有看到任何人使用最简洁的方式来做到这一点。假设您使用的是 Java 8+：

```
IntStream.range(0,listModel.size()).mapToObj(listModel::get).collect(Collectors.toList()); 
```

我个人更喜欢它而不是任何循环方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-11T07:46:44.747

我们还可以使用消息对话框从 JList（命名）myL 中获取元素，因此您可以使用以下方法对 JButton 对象执行操作。

```
String item = myL.getSelectedValue();
if( item == null ){
    JOptionPane.showMessageDialog(null,  "Not selected yet");
}else{
    JOptionPane.showMessageDialog(null, item);
} 
```

# asp.net - ASP.Net 应用程序的快速 Out-Proc 缓存

> ID：10780646
> 
> 赞同：1
> 
> 时间：2012-05-28T07:06:04.223
> 
> 标签：asp.net, caching

我需要针对 ASP.Net 应用程序的 Out-Proc 缓存的建议。

进程内`HttpRuntime.Cache`缓存不能由多个 w3wp.exe 进程共享。

我知道这个主题有一些开源项目，比如[http://www.sharedcache.com/cms/](http://www.sharedcache.com/cms/)

但问题是—— 1\. 需要序列化来存储/获取缓存的数据，这对于大对象实例来说很慢。2\. ASP.Net 框架中的某些类型不允许序列化，例如`RouteColltion`类。

您对没有序列化的快速 Out-Proc 缓存解决方案有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-28T13:47:09.727

使用 out-proc 缓存时，序列化是不可避免的，因为对我来说对象是从一个进程传输到另一个进程（可能在另一台机器上），如果不序列化对象就无法完成。

然而，为了降低序列化的性能成本，基于 .net 的分布式缓存解决方案[NCache](http://www.alachisoft.com/ncache/)提供了[紧凑序列化](http://www.alachisoft.com/support/support_articles/using-ncache-compact-serialization.html)功能。顾名思义，紧凑序列化提供了对象的优化序列化，与原生 .Net 序列化相比，字节数更少。从而减少了从进程外缓存传输或接收数据所需的通信时间。

# gcc - 带有 uclibc 的 ARM gentoo crossdev：需要 OABI 而不是 EABI

> ID：10780648
> 
> 赞同：5
> 
> 时间：2012-05-28T07:06:11.833
> 
> 标签：gcc, arm, gentoo, cross-compiling, uclibc

任何人都可以帮助解决我的 ARM + GCC + UCLIBC 与 crossdev 的链接问题吗？

也在这里发布到 Gentoo 论坛：[http ://forums.gentoo.org/viewtopic-t-925012.html](http://forums.gentoo.org/viewtopic-t-925012.html)

最近，我被分配到一个项目，该项目具有使用带有 OABI 的旧 GCC 开发的可执行文件。作为参考，这是一个在系统上运行良好的可执行文件的 readelf 头输出：

```
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 61 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            ARM
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0x9464
  Start of program headers:          52 (bytes into file)
  Start of section headers:          540956 (bytes into file)
  Flags:                             0x202, has entry point, GNU EABI, software FP
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         6
  Size of section headers:           40 (bytes)
  Number of section headers:         35
  Section header string table index: 32 
```

我使用 crossdev 和最新的 gcc/binutils/linux-headers/etc 创建了一个交叉编译器。并与 EABI。

```
$ crossdev arm-softfloat-linux-uclibceabi 
```

我很高兴地开始使用该交叉编译器在我的本地文件夹中填充可执行文件，只是后来在我的硬件上尝试了可执行文件并发现我最终遇到了分段错误。我意识到，只是通过相当多的谷歌搜索，我真的需要为 uclibc 拥有旧的、遗留的 ABI：OABI。我以前的交叉编译器是从大约 2005 年开始的。

作为另一个参考点，我的 eabi 可执行文件从 readelf 生成的头文件看起来有点像这样：

```
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0x8130
  Start of program headers:          52 (bytes into file)
  Start of section headers:          21284 (bytes into file)
  Flags:                             0x5000002, has entry point, Version5 EABI
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         7
  Size of section headers:           40 (bytes)
  Number of section headers:         21
  Section header string table index: 18 
```

虽然机器是相同的，但分段错误不提供在目标上执行二进制文件的方法。

在谷歌搜索更多之后，我发现可能有一种方法可以使用 eabi 编译器为遗留系统生成一些代码。当我运行这个命令时，我很高兴：

```
$ arm-softfloat-linux-uclibceabi-gcc -mabi=apcs-gnu -static -c -o /mnt/arm_uclibc/tmp/test /mnt/arm/tmp/test.c && readelf -h /mnt/arm_uclibc/tmp/test 
```

我最终得到：

```
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 61 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            ARM
  ABI Version:                       0
  Type:                              REL (Relocatable file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0x0
  Start of program headers:          0 (bytes into file)
  Start of section headers:          248 (bytes into file)
  Flags:                             0x600, GNU EABI, software FP, VFP
  Size of this header:               52 (bytes)
  Size of program headers:           0 (bytes)
  Number of program headers:         0
  Size of section headers:           40 (bytes)
  Number of section headers:         12
  Section header string table index: 9 
```

在这一点上，我开始坐立不安，我决定尝试使用 -mabi=apcs-gnu 创建一个可执行文件，

```
arm-softfloat-linux-uclibceabi-gcc -mabi=apcs-gnu -static -o /mnt/arm_uclibc/tmp/test /mnt/arm/tmp/test.c 
```

我得到一个链接器错误：

```
/usr/libexec/gcc/arm-softfloat-linux-uclibceabi/ld: error: Source object /tmp/ccDq2f6R.o has EABI version 0, but target /mnt/arm_uclibc/tmp/test has EABI version 5
/usr/libexec/gcc/arm-softfloat-linux-uclibceabi/ld: failed to merge target specific data of file /tmp/ccDq2f6R.o
collect2: ld returned 1 exit status 
```

**问题**：这让我相信我的 EABI 不正确，我需要 OABI。是对的吗？

我相信是这样，于是开始通过crossdev研究uclibc：

```
$ crossdev arm-softfloat-linux-uclibc -P -v 
```

我很高兴地报告说，被编译成某种对象二进制文件的文件具有正确的 elf 标头。所以我想这就是我想要的。

但是这在编译 uclibc 时会死掉，如下所示：

```
make[1]: `lib/ld-uClibc.so' is up to date.
  LD libuClibc-0.9.33.2.so
libc/libc_so.a(_fpmaxtostr.os): In function `_fpmaxtostr':
_fpmaxtostr.c:(.text+0xbc): undefined reference to `__nedf2'
_fpmaxtostr.c:(.text+0xe0): undefined reference to `__eqdf2'
_fpmaxtostr.c:(.text+0xfc): undefined reference to `__divdf3'
_fpmaxtostr.c:(.text+0x108): undefined reference to `__ltdf2'
_fpmaxtostr.c:(.text+0x17c): undefined reference to `__muldf3'
_fpmaxtostr.c:(.text+0x348): undefined reference to `__gedf2'
_fpmaxtostr.c:(.text+0x40c): undefined reference to `__fixunsdfsi'
libc/libc_so.a(__psfs_do_numeric.os): In function `__psfs_do_numeric':
__psfs_do_numeric.c:(.text+0x534): undefined reference to `__truncdfsf2'
libc/libc_so.a(close.oS):(.ARM.exidx+0x0): undefined reference to `__aeabi_unwind_cpp_pr0'
collect2: ld returned 1 exit status
make: *** [lib/libc.so] Error 1 
```

如果我正确地分解了错误，我相信

1) arm Makefile.arch 没有正确构建 __aeabi_unwind_cpp_pr0 因为该文件仅在设置 EABI 时构建：

```
$ find . -name 'Makefile.arch' -exec grep -i -H -n 'pr1' "{}" \;
./uclibc-0.9.33.2/work/uClibc-0.9.33.2/libc/sysdeps/linux/arm/Makefile.arch:45: $(ARCH_OUT)/aeabi_sighandlers.os $(ARCH_OUT)/aeabi_unwind_cpp_pr1.o
$ find . -name 'aeabi_unwind_cpp_pr1.c*'
./uclibc-0.9.33.2/work/uClibc-0.9.33.2/libc/sysdeps/linux/arm/aeabi_unwind_cpp_pr1.c
$ cat ./uclibc-0.9.33.2/work/uClibc-0.9.33.2/libc/sysdeps/linux/arm/aeabi_unwind_cpp_pr1.c
#include <stdlib.h>

attribute_hidden void __aeabi_unwind_cpp_pr0 (void);
attribute_hidden void __aeabi_unwind_cpp_pr0 (void)
{
}

attribute_hidden void __aeabi_unwind_cpp_pr1 (void);
attribute_hidden void __aeabi_unwind_cpp_pr1 (void)
{
}

attribute_hidden void __aeabi_unwind_cpp_pr2 (void);
attribute_hidden void __aeabi_unwind_cpp_pr2 (void)
{
} 
```

我相信这个错误的修复是：

```
--- Makefile.arch.old   2012-05-28 00:43:52.918708833 -0500
+++ Makefile.arch.new   2012-05-28 00:44:30.658708443 -0500
@@ -42,5 +42,6 @@
 libc-static-y += $(ARCH_OUT)/aeabi_lcsts.o $(ARCH_OUT)/aeabi_math.o \
        $(ARCH_OUT)/aeabi_sighandlers.o
 libc-nonshared-y += $(ARCH_OUT)/aeabi_lcsts.os $(ARCH_OUT)/aeabi_math.os \
-       $(ARCH_OUT)/aeabi_sighandlers.os $(ARCH_OUT)/aeabi_unwind_cpp_pr1.o
+       $(ARCH_OUT)/aeabi_sighandlers.os
 endif
+libc-nonshared-y += $(ARCH_OUT)/aeabi_unwind_cpp_pr1.o 
```

2) gcc 中的软浮点数也没有被链接器正确包含。在这一点上，我真的不知道为什么。

```
$ find . -name '*.c' -exec grep -i -H -n nedf2 "{}" \;
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/mips/mips.c:11123:       set_optab_libfunc (ne_optab, DFmode, "__mips16_nedf2");
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/eqdf2.c:51:strong_alias(__eqdf2, __nedf2);
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/testsuite/gcc.c-torture/execute/gofast.c:32:int nedf2 (double a, double b) { return a != b; }
./gcc-4.5.3-r2/work/gcc-4.5.3/libgcc/config/rx/rx-abi-functions.c:41:int _COM_CMPNEd (double a, double b) { return __nedf2 (a, b) != 0; }
$ ls ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/
README    double.h       extendsftf2.c  fixsfti.c     fixunssfdi.c  floatdisf.c  floattitf.c    floatuntidf.c  lesf2.c   negtf2.c     single.h      trunctfdf2.c
adddf3.c  eqdf2.c        extendxftf2.c  fixtfdi.c     fixunssfsi.c  floatditf.c  floatundidf.c  floatuntisf.c  letf2.c   op-1.h       soft-fp.h     trunctfsf2.c
addsf3.c  eqsf2.c        fixdfdi.c      fixtfsi.c     fixunssfti.c  floatsidf.c  floatundisf.c  floatuntitf.c  muldf3.c  op-2.h       subdf3.c      trunctfxf2.c
addtf3.c  eqtf2.c        fixdfsi.c      fixtfti.c     fixunstfdi.c  floatsisf.c  floatunditf.c  gedf2.c        mulsf3.c  op-4.h       subsf3.c      unorddf2.c
divdf3.c  extenddftf2.c  fixdfti.c      fixunsdfdi.c  fixunstfsi.c  floatsitf.c  floatunsidf.c  gesf2.c        multf3.c  op-8.h       subtf3.c      unordsf2.c
divsf3.c  extended.h     fixsfdi.c      fixunsdfsi.c  fixunstfti.c  floattidf.c  floatunsisf.c  getf2.c        negdf2.c  op-common.h  t-softfp      unordtf2.c
divtf3.c  extendsfdf2.c  fixsfsi.c      fixunsdfti.c  floatdidf.c   floattisf.c  floatunsitf.c  ledf2.c        negsf2.c  quad.h       truncdfsf2.c
$ grep -i -H -n nedf2 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/eqdf2.c:51:strong_alias(__eqdf2, __nedf2);
$ grep -i -H -n eqdf2 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/eqdf2.c:35:CMPtype __eqdf2(DFtype a, DFtype b)
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/eqdf2.c:51:strong_alias(__eqdf2, __nedf2);
$ grep -i -H -n divdf3 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/divdf3.c:35:DFtype __divdf3(DFtype a, DFtype b)
$ grep -i -H -n ltdf2 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/ledf2.c:51:strong_alias(__ledf2, __ltdf2);
$ grep -i -H -n muldf3 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/muldf3.c:35:DFtype __muldf3(DFtype a, DFtype b)
$ grep -i -H -n gedf2 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/gedf2.c:35:CMPtype __gedf2(DFtype a, DFtype b)
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/gedf2.c:51:strong_alias(__gedf2, __gtdf2);
$ grep -i -H -n fixunsdfsi ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/fixunsdfsi.c:35:USItype __fixunsdfsi(DFtype a)
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/t-softfp:71:softfp_func_list := $(filter-out floatdidf floatdisf fixunsdfsi fixunssfsi \
$ grep -i -H -n truncdfsf2 ./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/*
./gcc-4.5.3-r2/work/gcc-4.5.3/gcc/config/soft-fp/truncdfsf2.c:36:SFtype __truncdfsf2(DFtype a) 
```

所以我试图强制 GCC 为软浮点构建，并在稍后在 uclibc 的构建中获得链接：

```
$ UCLIBC_CPU=ARM926T ACCEPT_KEYWORDS="arm" CPU_CFLAGS="-marm -march=armv5te -mtune=arm926ej-s -mabi=apcs-gnu -mno-thumb" EXTRA_FLAGS="-msoft-float -mfloat-abi=soft" UCLIBC_EXTRA_CFLAGS="${CPU_CFLAGS} ${EXTRA_CFLAGS}" STAGE1_CFLAGS="${EXTRA_CFLAGS}" CFLAGS="${EXTRA_CFLAGS}" crossdev -A arm -t arm-softfloat-linux-uclibc -P -v 
```

然后我检查了是否在任何日志中使用了 -msoft-float 和 -mfloat-abi=soft 进行编译。

```
$ find . -name '*.log' -exec grep -i -H -n msoft-float "{}" \;
<nothing>
$ find . -name '*.log'
./work/build/arm-softfloat-linux-uclibc/libgcc/config.log
./work/build/libcpp/config.log
./work/build/gcc/config.log
./work/build/fixincludes/config.log
./work/build/intl/config.log
./work/build/build-x86_64-pc-linux-gnu/libiberty/config.log
./work/build/build-x86_64-pc-linux-gnu/fixincludes/config.log
./work/build/libdecnumber/config.log
./work/build/libiberty/config.log
./work/build/config.log
./work/gcc-4.5.3/contrib/reghunt/examples/29478.log
./work/gcc-4.5.3/contrib/reghunt/examples/29906a.log
./work/gcc-4.5.3/contrib/reghunt/examples/29906b.log
./work/gcc-4.5.3/contrib/reghunt/examples/28970.log
./work/gcc-4.5.3/contrib/reghunt/examples/29106.log
./work/gcc-4.5.3/contrib/reghunt/examples/30643.log
./temp/elibtool.log
./temp/epatch_user.log
./temp/epatch.log
./temp/eclass-debug.log
./temp/build.log 
```

但我确实注意到 --with-float=soft 是在 config.log 中设置的，所以这让我相信应该已经生成了浮点数。
我注意到 gcc 的编译选项中的 -D__GCC_FLOAT_NOT_NEEDED 。

我对 GCC 进行了回归，以查看中断发生的位置。

1.  gcc 4.x 不适用于 uclibc。-- 从 4.4.4-r2 开始，uclibc 与 gcc 的链接失败 -- 在 4.4.4 之前，gcc 似乎没有
2.  如果使用 USE=-nptl，gcc-3.4.6-r2 确实可以工作

作为参考，我跑了：binutils: 2.22-r1 Linux Header: 3.3, 3.4 uclibc: 0.9.33.2 gcc: 3.2.3-r4, 3.3.6-r1, 3.4.6-r2, 4.1.4-r1, 4.3.3 -r2、4.4.2、4.4.4-r2、4.4.5、4.4.6-r1、4.4.7、4.5.3-r2、4.6.0、4.6.1-r1、4.6.2、4.6.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T03:18:53.770

我最终搬到了 gcc-4.7.0。最终的构建是：

*   binutils-2.22-r1
*   gcc-4.7.0
*   linux-headers-3.4
*   uclibc-0.9.33.2

我的工作 crossdev arm-softfloat-linux-uclibc 编译器命令如下所示：

```
#!/usr/bin/env sh
CHOST=${CHOST-arm-softfloat-linux-uclibc}
USE="-nptl" \
crossdev -t ${CHOST} \
 -A arm -P "--digest" \
 --g 4.7.0 --genv 'EXTRA_ECONF="--enable-obsolete --with-cpu=arm926ej-s \
                   --without-system-libunwind --with-mode=arm \
                   --with-abi=apcs-gnu --with-float-abi=soft"' \
 --lenv 'UCLIBC_CPU="ARM926T" \
         UCLIBC_EXTRA_CFLAGS="-marm -mcpu=arm926ej-s"' 
```

上述选项可能并非全部都需要，但请注意，gcc 的下一个主要版本将淘汰 uclibc 的 OABI，除非他们最终得到愿意保持更新的开发人员。至少两年没有一个。

另外，我没有使用 gcc 启用 nptl。我认为可以在不启用 nptl 的情况下进行 crossdev 构建阶段 3，然后使用 nptl 进行最终的 gcc，但我没有对二进制文件进行任何测试以证明这实际上插入了 nptl。

不幸的是，gcc 和 uclibc 开箱即用并不好。我还意识到我需要一些补丁来修复我发现的错误。

为了让我自己更轻松，我最终还创建了一个补丁文件夹，因此我不必使用 ebuilds 创建一个全新的覆盖。在执行emerge期间，这让我可以即时添加补丁。在大多数情况下，这将适用于大多数软件包。我仍在使用 Python 以使其顺利编译。

创建补丁文件夹：

```
$ mkdir /etc/portage/patches 
```

更新portage bashrc：

```
File:  /etc/portage/bashrc
#!/usr/bin/env sh
[[ $(basename $(readlink -f $PORTAGE_CONFIGROOT/etc/make.profile)) == "embedded" ]] && . ${PORTDIR}/profiles/base/profile.bashrc

post_src_install() {
    [[ -d ${D} ]] || return 0
    [[ ${E_MACHINE} == "" ]] && return 0
    cmdline=""
    for EM in $E_MACHINE; do
        cmdline+=" -e ^${EM}[[:space:]]";
    done
    output="$( cd ${D} && scanelf -RmyBF%a . | grep -v ${cmdline} )"
    [[ $output != "" ]] && { echo; echo "* Wrong EM_TYPE. Expected ${E_MACHINE}"; echo -e "${output}"; echo; exit 1; }
}

# We don't run this on the assumption that when you're
# emerging binary packages, it's into a runtime ROOT
# rather than build development ROOT.  The former doesn't
# want hacking while the latter does.  
if [[ $EBUILD_PHASE == "postinst" ]]; then
    [[ $SYSROOT == $ROOT ]] && cross-fix-root ${CHOST}
fi

eecho() {
    #[ "$NOCOLOR" = "false" ] && echo -ne '\e[1;34m>\e[1;36m>\e[1;35m>\e[0m ' || echo -n ">>> "
    echo -ne '\e[1;34m>\e[1;36m>\e[1;35m>\e[0m ' || echo -n ">>> "
    echo "$*"
}

run_autopatch () {
    #echo ">>> --------------------------------------------------------------------"
    #echo ">>>"
    #echo ">>>  Phase: $EBUILD_PHASE"
    #echo ">>>"
    #echo ">>> --------------------------------------------------------------------"

    patchit="no"
    if [[ $EBUILD_PHASE == prepare ]]; then
    patchit="yes"
    elif [[ $EBUILD_PHASE == configure ]]; then
    patchit="yes"
    elif [[ $EBUILD_PHASE == compile ]]; then
    patchit="yes"
    fi

    if [[ $patchit != "no" ]]; then
#           echo ">>> Patching"
    [[ ! -d "$PATCH_OVERLAY" ]] && echo "PATCH_OVERLAY is not a directory: $PATCH_OVERLAY" && return 0;
    [[ ! -r ${ROOT}etc/portage/bashrc.autopatch ]] && echo "Couldn't read autopatch script: ${ROOT}/etc/portage/bashrc.autopatch" && return 0;
    source ${ROOT}etc/portage/bashrc.autopatch
    fi
}

if [[ " ${FEATURES} " == *" autopatch "* ]] || [[ $AUTOPATCH="yes" ]]; then
    run_autopatch
fi 
```

还需要创建 bashrc.autopatch。

```
File:  /etc/portage/bashrc.autopatch
#!/usr/bin/env sh
# <solar@gentoo> 2005
# Distributed under the terms of the GNU General Public License v2
# $Header: $
# updated by brian bruggeman

autopatch() {
local diff level p patches patched 

[[ ! -d "$PATCH_OVERLAY" ]] && return 0

patches=$(ls -1 ${PATCH_OVERLAY}/${CATEGORY}/${PN}/${PN}-*.{patch,diff} 2>/dev/null)
[[ $patches == "" ]] && echo "No patches found: ${PATCH_OVERLAY}/${CATEGORY}/${PN}/${PN}-*.patch" && return 0

    if [[ -d $S ]] && [[ -e $S ]]; then
    cd $S
else
    echo ">>> Couldn't cd to $S"
fi

    echo -e ' \e[0;36m*\e[0m '"Applying Autopatches from $PATCH_OVERLAY ..."
for p in ${patches}; do
    p=$(basename $p)
    diff=${PATCH_OVERLAY}/${CATEGORY}/${PN}/${p}
    if [[ -e $diff ]] && [ ! -e ${S}/.${p} ]; then
        patched=0
        for level in 0 1 2 3 4; do
            if [[ $patched == 0 ]]; then
                patch -g0 --dry -p${level} >/dev/null < $diff
                if [ $? = 0 ]; then
                    echo -e ' \e[0;36m*\e[0m '"  (-p${level}) ${p}"
                    patch -g0 -p${level} < $diff > /dev/null && patched=1
                    touch $S/.${p}
                fi
            fi
        done
        [[ $patched != 1 ]] && echo "!!! FAILED auto patching $p"
    else
        [[ ! -e $diff ]] && echo "!!! $diff does not exist, unable to auto patch"
    fi
done
    echo -e ' \e[0;36m*\e[0m '"Done with patching auto patches ..."
cd $OLDPWD
}

PATH=$PATH:/usr/sbin:/usr/bin:/bin:/sbin
autopatch 
```

为 gcc 创建补丁：

```
$ cd /etc/portage/packages
$ mkdir -p cross-arm-softfloat-linux-uclibc/gcc-4.7.0
$ cd cross-arm-softfloat-linux-uclibc/gcc-4.7.0
$ touch gcc-4.7.0-softfloat.patch

File: /etc/portage/packages/cross-arm-softfloat-linux-uclibc/gcc-4.7.0/gcc-4.7.0-softfloat.patch
Index: gcc/config/arm/linux-elf.h
===================================================================
--- gcc/config/arm/linux-elf.h  2011-04-11 13:46:05.000000000 -0500
+++ gcc/config/arm/linux-elf.h.new  2012-05-31 14:24:14.465545128 -0500
@@ -48,7 +48,7 @@

 #undef  MULTILIB_DEFAULTS
 #define MULTILIB_DEFAULTS \
-   { "marm", "mlittle-endian", "mfloat-abi=hard", "mno-thumb-interwork" }
+   { "marm", "mlittle-endian", "mfloat-abi=soft", "mno-thumb-interwork" }

 /* Now we define the strings used to build the spec file.  */
 #undef  LIB_SPEC
@@ -57,7 +57,7 @@
    %{shared:-lc} \
    %{!shared:%{profile:-lc_p}%{!profile:-lc}}"

-#define LIBGCC_SPEC "%{mfloat-abi=soft*:-lfloat} -lgcc"
+#define LIBGCC_SPEC "-lgcc"

 #define GLIBC_DYNAMIC_LINKER "/lib/ld-linux.so.2"

Index: libgcc/config/arm/t-linux
===================================================================
--- ./libgcc/config/arm/t-linux 2011-11-02 10:23:48.000000000 -0500
+++ ./libgcc/config/arm/t-linux.new 2012-05-31 14:29:57.715541608 -0500
@@ -1,6 +1,10 @@
 LIB1ASMSRC = arm/lib1funcs.S
 LIB1ASMFUNCS = _udivsi3 _divsi3 _umodsi3 _modsi3 _dvmd_lnx _clzsi2 _clzdi2 \
-   _arm_addsubdf3 _arm_addsubsf3
+   _arm_addsubdf3 _arm_addsubsf3 \
+   _arm_negdf2 _arm_muldivdf3 _arm_cmpdf2 _arm_unorddf2 \
+   _arm_fixdfsi _arm_fixunsdfsi _arm_truncdfsf2 \
+   _arm_negsf2 _arm_muldivsf3 _arm_cmpsf2 _arm_unordsf2 \
+   _arm_fixsfsi _arm_fixunssfsi

 # Just for these, we omit the frame pointer since it makes such a big
 # difference. 
```

为 uclibc 创建补丁：

```
$ cd /etc/portage/packages
$ mkdir -p cross-arm-softfloat-linux-uclibc/uclibc
$ cd cross-arm-softfloat-linux-uclibc/uclibc
$ touch uclibc-0.9.33.2-unwind-fixes.patch

File: /etc/portage/packages/cross-arm-softfloat-linux-uclibc/uclibc/uclibc-0.9.33.2-unwind-fixes.patch
Index: libc/sysdeps/linux/arm/Makefile.arch
===================================================================
--- ./libc/sysdeps/linux/arm/Makefile.arch  2012-05-15 02:20:09.000000000 -0500
+++ ./libc/sysdeps/linux/arm/Makefile.arch.new  2012-05-31 00:43:11.176050458 -0500
@@ -42,5 +42,6 @@
 libc-static-y += $(ARCH_OUT)/aeabi_lcsts.o $(ARCH_OUT)/aeabi_math.o \
    $(ARCH_OUT)/aeabi_sighandlers.o
 libc-nonshared-y += $(ARCH_OUT)/aeabi_lcsts.os $(ARCH_OUT)/aeabi_math.os \
-   $(ARCH_OUT)/aeabi_sighandlers.os $(ARCH_OUT)/aeabi_unwind_cpp_pr1.o
+   $(ARCH_OUT)/aeabi_sighandlers.os
 endif
+libc-nonshared-y += $(ARCH_OUT)/aeabi_unwind_cpp_pr1.o
Index: libc/sysdeps/linux/arm/unwind.h
===================================================================
--- ./libc/sysdeps/linux/arm/unwind.h   2012-05-31 00:57:39.356041552 -0500
+++ ./libc/sysdeps/linux/arm/unwind.h.new   2012-05-31 01:04:55.436037080 -0500
@@ -34,6 +34,8 @@

 #define __ARM_EABI_UNWINDER__ 1

+#include <stdlib.h>
+
 #ifdef __cplusplus
 extern "C" {
 #endif
@@ -211,7 +213,7 @@
    _Unwind_Control_Block *, struct _Unwind_Context *, void *);
   _Unwind_Reason_Code _Unwind_ForcedUnwind (_Unwind_Control_Block *,
                        _Unwind_Stop_Fn, void *);
-  _Unwind_Word _Unwind_GetCFA (struct _Unwind_Context *);
+  extern _Unwind_Word _Unwind_GetCFA (struct _Unwind_Context *);
   void _Unwind_Complete(_Unwind_Control_Block *ucbp);
   void _Unwind_DeleteException (_Unwind_Exception *); 
```

# ruby-on-rails - 在视图中加载记录时遇到问题

> ID：10780649
> 
> 赞同：0
> 
> 时间：2012-05-28T07:06:25.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我在视图中使用按 ID 查找来加载记录时遇到问题。我可以使用 rails 控制台从命令行加载它，但我似乎无法在浏览器视图中加载它。

***我的控制器文件：***

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
  end
end 
```

***模型文件***

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }
  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

***查看文件***

```
<%= @user.name %> 
```

***路线文件***

```
Twitster::Application.routes.draw do

  resources :users

  match "/about", to: 'home#about'

  match "/contact", to: 'home#contact'

  match "/help", to: 'home#help'

  root :to => 'home#index'

end 
```

这是我在浏览器中遇到的错误：

> 用户控制器中的 NoMethodError#show
> 
> 未定义的方法“键？” 对于零：NilClass
> 
> Rails.root：/home/hilarl/workspace/twitster 应用程序跟踪 | 框架跟踪 | 全跟踪
> 
> 要求
> 
> 参数：
> 
> {"id"=>"1"}
> 
> 显示会话转储
> 
> 显示环境转储响应
> 
> 标题：
> 
> 没有任何

这是“完整跟踪”中的代码：

```
actionpack (3.2.3) lib/action_controller/metal/hide_actions.rb:36:in `visible_action?'
actionpack (3.2.3) lib/action_controller/metal/hide_actions.rb:18:in `method_for_action'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:14:in `method_for_action'
actionpack (3.2.3) lib/action_controller/metal/compatibility.rb:61:in `method_for_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:115:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__27655154__call__142737833__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我似乎无法让它工作。请问有什么帮助吗？

* * *

我的主布局文件中有一个错误，其中我有一些部分，并且我的部分路径错误，这导致了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:11:07.600

要解决它，我认为您必须重新启动 rails 服务器。

# database - 在 Web 服务器主机上使用 EFCodeFirst 创建数据库

> ID：10780650
> 
> 赞同：0
> 
> 时间：2012-05-28T07:06:29.453
> 
> 标签：database, ef-code-first, webserver

在本地系统上使用 EFCodeFirst 创建数据库已经完成。但是，当尝试在 Web 服务器主机上创建数据库时，它会给出错误“创建数据库权限被拒绝”。

我无法找出其中的实际问题。

一切正常，如果我在任何其他本地系统上使用 EFcodefirst 创建数据库，但它不适用于 Web 服务器主机。

请帮忙！

谢谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:56:28.287

因为您在共享网络服务器主机上的架构不是“dbo”。所以你不能或者你没有足够的权限来创建数据库（这是EF代码的默认行为，当它找不到连接字符串指定的数据库时）。你有 3 个选择（至少）：

*   请求更高的权限（这是不幸的）
*   首先创建一个新的空数据库，或者要求（主机）这样做，然后在连接字符串中指定其详细信息。
*   或者只是关闭数据库迁移并手动执行所有操作（设置`Database.SetInitializer<MyContext>(null);`）。

# android - 在警报对话框中显示倒计时

> ID：10780651
> 
> 赞同：8
> 
> 时间：2012-05-28T07:06:34.117
> 
> 标签：android, timer, android-alertdialog

我如何在我的警报框中显示倒数计时器。我想通知用户会话将在 5 分钟后结束，并在警报弹出框中显示正在运行的计时器..

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-28T07:12:44.393

你应该有一个`alertDialog`弹出框：

```
alertDialog = new AlertDialog.Builder(this).create();  
alertDialog.setTitle("Alert 3");  
alertDialog.setMessage("00:10");
alertDialog.show();   // 

new CountDownTimer(10000, 1000) {
    @Override
    public void onTick(long millisUntilFinished) {
       alertDialog.setMessage("00:"+ (millisUntilFinished/1000));
    }

    @Override
    public void onFinish() {
        info.setVisibility(View.GONE);
    }
}.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:15:29.107

在对话框布局中放置一个 TextView。然后使用 Handler.postDelayed() 方法（或 CountDownTimer，或 Timer，或 [...]），刷新 TextView 上显示的值。

# flash - 无论浏览器是否支持 Flash，都会自动下载后备 html5 视频

> ID：10780652
> 
> 赞同：1
> 
> 时间：2012-05-28T07:06:57.253
> 
> 标签：flash, html5-video, fallback

我有一个 html 页面，它使用带有 html5 后备的 flash 对象来播放媒体。我在加载页面时观察到的是，如果浏览器支持提供的 html5 视频类型，无论是否安装了 flash，总是会下载 html5 视频。

在我看来，这完全是浪费，因为如果您的浏览器支持 Flash，您将永远无法回退到 html5，但是，仍然会下载整个 html5 媒体。当您的网络状况不佳时，它也可能会影响您的闪光灯的观看质量。

另外，对于我之前的问题，[如果在使用 flash 到 html5 回退时将 html5 自动播放设置为 true，则两个播放器都会播放](https://stackoverflow.com/questions/10779129/both-player-will-playback-if-set-html5-autoplay-to-be-true-when-using-flash-to-h)，我使用过

```
$(document).ready(function(){
        if (swfobject.hasFlashPlayerVersion("9.0.18")) {
                        var video = document.getElementsByTagName("video")[0];
                        var audio = document.getElementsByTagName("audio")[0];
                        if (video != null) {video.parentNode.removeChild(video);}
                        if (audio != null) {audio.parentNode.removeChild(video);}
        }
    }); 
```

检测浏览器的Flash版本。如果浏览器支持 Flash，则视频/音频部分将从 html 页面中删除。

它似乎部分解决了我的问题，因为下载将在中途停止，但我仍然认为这不是一个好的解决方案，因为媒体仍被部分下载。

我想知道是否有人对这方面有一些见解？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:20:17.347

使用 CSS 将视频对象的显示属性设置为“无”。如果视频不可见，则不会加载视频。在您检查了 flash 之后，您可以将其设置为通过 JavaScript 显示，它将开始加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:10:43.090

也许摆脱准备好的，只在页面加载时进行，这样它就不会等待其他所有事情，然后才能确定是否存在闪存。

然而就个人而言，您是否考虑过反过来做，如果不支持 HTML5，则退回到 Flash？

看看[这个](http://jquery.lukelutman.com/plugins/flash/)，因为它与您正在寻找的相似。

# jqgrid - 调整 jqgrid 中最后一列的大小

> ID：10780664
> 
> 赞同：3
> 
> 时间：2012-05-28T07:08:12.407
> 
> 标签：jqgrid

jqgrid 中似乎有一个错误，[无法调整最后一列的大小](http://www.trirand.com/blog/?page_id=393/help/how-to-resize-the-last-column.)。

这似乎是 2009 年提出的一个相当老的问题。我看了看，最新的 jqGrid 示例似乎有这个问题......但我发现最后一列可以拖动以调整网格本身的大小。请参阅[此处](http://www.trirand.com/blog/jqgrid/jqgrid.html)转到 3.6 中的新增功能部分。任何指针，如果这已经修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:59:50.370

似乎我找到了解决方案。只能在标题包装器 (div.ui-jqgrid-hbox) 的区域内调整最后一列的大小。在外层空间调整大小过程中失去焦点。由于存在一些默认为 20 像素的 padding-right 区域，因此只能在这小部分中增加大小。此外，我们需要暂时取消 table wrapper 的影响，因为他也会导致停止调整大小的过程。

这是我的解决方案。我假设，您的表包装器 id 是`gbox_DataTable_u`：

1：CSS：定义新的宽填充右区域：

`.ui-jqgrid .ui-jqgrid-hbox {float: left; padding-right: 10000px;}`

2：将 2 个事件附加到您的网格中：

`resizeStart:function(event, index){ $('#gbox_DataTable_u').width($('#gbox_DataTable_u').outerWidth() + 10000);}`

`resizeStop: function(width, index) {$('#gbox_DataTable_u').width($('#DataTable_u').outerWidth());}`

工作台示例：http: [//www.design.atplogic.co.il/aman/philips/users.htm#](http://www.design.atplogic.co.il/aman/philips/users.htm#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T08:44:38.347

我发现最好的方法是在网格末尾添加一个空的不可调整大小的列。我只是在执行 jqgrid 构造函数之前通过扩展 colModel 手动进行。唯一的问题是 - 到目前为止，我无法让它不可拖动。

这是一个例子：

```
colModel.push({align: "left", editable: false, hidden: false, index: "ghostCol", label: " ", name: "ghostCol", resizable: false, sortable: false, type: "text", width: 50}); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T06:45:52.027

经过2天的挣扎......我终于找到了解决方法。似乎jqGrid在dragMove事件中计算了调整大小的对象，它使用传递的事件对象来获取鼠标的位置并计算调整大小列的新宽度。但是，当拖动超出网格的边界时，dragMove 事件停止拍摄......所以我的解决方法是简单地修改 jqGrid 以在 dragEnd 事件中再次计算调整对象的大小。这是修改后的代码

首先找到dragEnd 事件。

```
...
dragEnd: function(e) { // add a new input parameter
this.hDiv.style.cursor = "default";
if(this.resizing) {
    this.dragMove(e); // call dragMove event to calculate resize object 
... 
```

然后找到触发dragEvent的mouseup事件...

```
...
$(document).mouseup(function (e) { //  get the event object
if(grid.resizing) { grid.dragEnd(e); return false;}// pass event to dragEnv
    return true;
});
... 
```

然后列应该能够调整到鼠标指向的任何位置。
希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:39:50.113

我试图用 resizeStop 调整最后一列的大小，我像其他人说的那样做了一些技巧。希望它有所帮助。

> resizeStop(width, index) { var amGrid = $("#jsonmap"), colModel = $("#jsonmap").jqGrid('getGridParam','colModel'); var oW = $oldWidths[索引]; var cW = colModel[index+1].width+ downCalSize(oW,width); $oldWidths[index+1] = cW; $oldWidths[索引] = 宽度；
> 
> $('.ui-jqgrid-labels > th:eq('+(index+1)+')').css('width',cW); $('#jsonmap .jqgfirstrow > td:eq('+(index+1)+')').css('width',cW); var w = amGrid.jqGrid('getGridParam', 'width'); $('.ui-jqgrid-htable').css("宽度",w); $('.ui-jqgrid-btable').css("宽度",w); }

我仍在寻找一种通用的方法，可以在一页中处理更多表格并且不会相互影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T15:34:34.627

尽管您必须在“RTL Support”示例中从右侧调整大小，但它对我来说也可以调整大小，这似乎是有道理的。

另请注意，如果您使用的是 Chrome，则存在导致水平滚动条出现的 jqGrid 错误 - 请参阅[jqgrid-does-not-render-correctly-in-chrome-chrome-frame](https://stackoverflow.com/questions/10588587/jqgrid-does-not-render-correctly-in-chrome-chrome-frame)。此问题已得到解决，但演示页面尚未更新。而且它肯定会使最后一列的大小调整看起来不起作用，因为您必须一直滚动到右侧才能调整最后一列的大小。

# mysql - 格式化mysql查询输出

> ID：10780665
> 
> 赞同：0
> 
> 时间：2012-05-28T07:08:14.160
> 
> 标签：mysql, sql

在我的查询中，我想检查具有指定权限的用户是否存在。目前我正在使用以下查询。它将检索具有指定条件的授权用户的行。

```
select a.ixUserAuthorization from tblechecklistuserroleassignmentxref r
inner join tblechecklistuserrole u on u.ixUserRole=r.ixUserRole and u.sname='Initiator'
inner join tblechecklistuserauthorization a on a.ixUserAuthorization=r.ixUserAuthorization
and a.ixcustomer='1'and a.ixprogram='1'and a.ixworkpackage='1'and a.ixactivity='1' and a.ixUser='626e28e8-e67a-4d11-8d2c-129d0ab79e96'; 
```

如果返回任何行，我想将结果显示为 true，如果上述查询没有返回任何行，我想将结果显示为 false。

如何修改以获得结果为 true 或 false 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:11:10.177

```
SELECT CASE 
         WHEN Count(*) >= 1 THEN 'true' 
         ELSE 'false' 
       END AS Answer 
FROM   (SELECT a.ixUserAuthorization 
        FROM   tblechecklistuserroleassignmentxref r 
               INNER JOIN tblechecklistuserrole u 
                 ON u.ixUserRole = r.ixUserRole 
                    AND u.sname = 'Initiator' 
               INNER JOIN tblechecklistuserauthorization a 
                 ON a.ixUserAuthorization = r.ixUserAuthorization 
                    AND a.ixcustomer = '1' 
                    AND a.ixprogram = '1' 
                    AND a.ixworkpackage = '1' 
                    AND a.ixactivity = '1' 
                    AND a.ixUser = '626e28e8-e67a-4d11-8d2c-129d0ab79e96') a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:13:21.517

使用函数 mysql_num_rows

前任：

```
if(mysql_num_rows($result))
  echo "true";
else
   echo "false"; 
```

其中 $result 是您的查询结果

# php - 当我加载外部网站的内容时，Javascript 没有加载

> ID：10780666
> 
> 赞同：0
> 
> 时间：2012-05-28T07:08:15.447
> 
> 标签：php, javascript, jquery, ajax

我有一个页面，我通过 Jquery Post 方法将外部网站内容加载到我的 PHP 文件（由于跨站点问题），看起来像这样。（back.php）

```
$url = $_POST['url'];
echo file_get_contents($url); 
```

我的 HTML 代码看起来像这样

```
 $.post ("back.php",
    {
        url : "http://www.ralphlauren.com/product/index.jsp?productId=2130294&cp=1760781.1760809&ab=ln_men_cs1_polos&parentPage=family"
    }
    ,
    function (data)
    {

        document.getElementById ("output").innerHTML =  data;
    }
); 
```

网站内容加载正常，但脚本没有加载，因为我在更改任何应该执行脚本的选项时遇到错误。

我尝试了不同的方法，但没有用。

我怎样才能实现也加载脚本。

**编辑** 看起来我的问题不清楚。

问题是，给定 URL 的内容和脚本正在我的页面中加载。外部 URL 包含一些未执行的嵌入式脚本。

这是外部站点的示例

```
<html>
<body>
Hello
<script>
alert("This is some message"); 
</script>
</body>
</html> 
```

现在，如果我们直接在浏览器中运行此页面，它会显示文本“Hello”以及警报消息，但是当我通过上述方法（POST/Jquery）加载此文件时，它显示“Hello”但不显示警报消息（意味着，不执行 javascript）。

请帮助我执行该脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:32:40.703

执行时应该使用`$(function() { })`加载js！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:16:41.103

将带有元素的 HTML 加载到页面中不是很稳定。这将无法跨浏览器工作，因为某些浏览器不会在外部页面中运行 onload（使用 ajax 获取）。

所以不要这样做，在你的回调操作中运行你需要的javascript `$.post`。

**编辑** 也看[这个](https://stackoverflow.com/questions/2176279/javascript-wont-execute-after-load/2176703#2176703)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:19:08.223

不知道为什么你的不工作，但试试这个，似乎工作得很好：

```
<?php 
if($_SERVER['REQUEST_METHOD']=='POST' && $_POST['url']){
    header('Content-Type: text/html');
    echo file_get_contents($_POST['url']);
    die;
}
?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<head>
<title></title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" charset="utf-8"></script>

<script charset="utf-8" type="text/javascript">
$(function() {
    $.post ("back.php",{
        url : "http://www.ralphlauren.com/product/index.jsp?productId=2130294&cp=1760781.1760809&ab=ln_men_cs1_polos&parentPage=family"
    },function (data){
        document.getElementById ("output").innerHTML =  data;
    });
});
</script>

</head>
<body>

<div id="output"></div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:23:22.967

错误可能由以下原因引起：

*   可能是您忘记加载 jQuery 库。

*   您忘记将代码包装在准备好的 DOM 中，即。`$(function() { })`

*   如果您尝试从不同的域检索数据，那么您应该尝试使用`jsonp` 类型请求。

# java - 表单的CXF方法声明

> ID：10780668
> 
> 赞同：0
> 
> 时间：2012-05-28T07:08:38.460
> 
> 标签：java, forms, cxf

这可能是一个简单的，但我似乎无法确定下来。
我有一个包含 2 个字段、文本和文件的简单表单，即

```
<form>
  <input type="text" name="textfield">
  <input type="file" name="filefield">
</form> 
```

捕获它的 CXF 方法声明是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:10:56.907

您可以像这样创建简单的 Web 服务：

```
@WebService
public class SimpleWs
{
    @WebMethod
    public String upload(String textfield, byte[] filefield) {
        // ...
        return "OK";
    }
} 
```

并按照CXF 网站上的[这些说明进行操作。](http://cxf.apache.org/docs/a-simple-jax-ws-service.html)

# android - 在 android 中使用 twitter 向关注者发送直接消息

> ID：10780673
> 
> 赞同：0
> 
> 时间：2012-05-28T07:09:21.040
> 
> 标签：android, twitter

我想通过我的 android 应用程序向我的一位 Twitter 追随者发送直接消息。

我可以通过以下代码使用 twitter4j api 获取所有关注者的 user_ids 列表。

```
int[] followers=mTwitter.getFollowersList();

for(int i=0;i<followers.length;i++){
Log.e("follower name :",String.valueOf(followers[i]));
} 
```

但我不知道如何向追随者发送直接消息。

有可能吗，怎么做？

谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:12:32.397

[http://twitter4j.org/en/code-examples.html#directMessage](http://twitter4j.org/en/code-examples.html#directMessage)

# android - 如何使用计时器结束开始时间？我需要 00:59 到 00:00 我如何使用代码？

> ID：10780679
> 
> 赞同：-2
> 
> 时间：2012-05-28T07:09:53.667
> 
> 标签：android, timer

如何使用计时器结束开始时间？我需要 00:59 到 00:00 我如何使用代码？

crm.setText("00:40");

crm.start();

crm.stop();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T21:08:48.040

如果您正在寻找一种方法，请尝试实现 CountDownTimer android 类。这是一个简单的例子：

```
 new CountDownTimer(30000, 1000) { //the timer runs for 30 seconds in this case
     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

希望这可以帮助！

# iphone - 如何从另一个类调用函数并从当前类重新加载该视图？

> ID：10780682
> 
> 赞同：0
> 
> 时间：2012-05-28T07:10:17.607
> 
> 标签：iphone, ios, ios5, xcode4.3

我正在开发一个使用凹凸技术的应用程序。我确实有四个选项卡，其中一个是表格视图。我在应用程序委托类中编写了这个凹凸 API，以便当应用程序打开时它应该能够传输数据。传输功能正常工作。但问题是我将数据插入 sq-lite 并且来自 sqlite 的数据显示在选项卡栏项目视图之一中。因此，当用户选择此选项卡栏项目并接收数据时，我会喜欢插入并使用新更改重新加载视图。正如在插入之前所说的那样，我正在工作。但问题是重新加载视图。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:55:38.693

您可以在插入/编辑记录时使用 NSOperation 在后台执行插入并发布通知。将侦听器添加到您正在显示数据的视图控制器。

因此，每当控制器收到通知时，它都会调用该方法从数据库中重新加载数据。

```
@implementation MyClass

- (void) dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [super dealloc];
}

- (id) init
{
    self = [super init];
    if (!self) return nil;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadData:) name:@"COREDATA_OBJECT_EDITED" object:nil];

    return self;
}

- (void) reloadData:(NSNotification *) notification
{
    if ([[notification name] isEqualToString:@"COREDATA_OBJECT_EDITED"])
        {
            //load records from database and reload tableview
        }
}

@end

//Method where you are saving data objects in some other class

- (void) saveDataObject
{

    //Save Data object, if saved successfully then post notification to listener to reload the data
    // All instances of MyClass will be notified
    [[NSNotificationCenter defaultCenter] postNotificationName:@"COREDATA_OBJECT_EDITED" object:self];

} 
```

# php - FB 开发 - 上传照片到用户的个人资料

> ID：10780685
> 
> 赞同：0
> 
> 时间：2012-05-28T07:10:36.037
> 
> 标签：php, facebook, facebook-graph-api, upload, facebook-php-sdk

你能告诉我我做错了什么吗？我使用 PHP。尝试将照片上传到用户个人资料中。我获得了权限并且它有效。但是上传不起作用，我尝试了很多方法。那么我做错了什么？

```
 <?php

   include_once 'facebook.php';

       $facebook = new Facebook(array(
       'appId'  => 'ID',
       'secret' => 'SECRET',
       'cookie' => true,
       'domain' => 'DOMAIN',
       'fileUpload' => 'true'
       ));

      $session = $facebook->getSession();

      if (!$session) {

       $loginUrl = $facebook->getLoginUrl(array(
        'canvas' => 1,
        'fbconnect' => 1,
        'display' => 'page',
        'req_perms' => 'user_likes, publish_stream',
        'next' => 'NEXTURL'
   ));

      echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";

    } else{

     try {

       $uid = $facebook->getUser();
       $me = $facebook->api('/me');
       $token = $session['access_token'];//here I get the token from the $session array
       $album_id = 'ALBUM ID';  /// what should I write here?

       //upload your photo
     $file= 'logo.png';
    $args = array(
       'message' => 'Photo from app',
    );
    $args[basename($file)] = '@' . realpath($file);

   $ch = curl_init();
  $url = 'https://graph.facebook.com/'.$album_id.'/photos?access_token='.$token;
   curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_HEADER, false);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
   curl_setopt($ch, CURLOPT_POST, true);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
   $data = curl_exec($ch);

  //returns the id of the photo you just uploaded
  print_r(json_decode($data,true));

  } catch(FacebookApiException $e){
  echo "Error:" . print_r($e, true);
  }
  }
  ?> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:31:18.563

您必须将属性 fileUpload==true 添加到 Facebook 对象：

```
$facebook = new Facebook(array(
    'appId'  => 'ID',
    'secret' => 'SECRET',
    'cookie' => true,
    'domain' => 'DOMAIN',
    'fileUpload' => true
)); 
```

更新：

我总是使用此代码上传照片：

```
$photo= $facebook->api(array('method'=>'photos.upload',
            'caption'=>SOME_TEXT,
            'file'=>'@'.$file)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:05:12.280

你可以试试这个：

```
$args = array('message' => $mess,
  );
  $args['image'] = '@' . realpath($file.".jpeg");

  $facebook->setFileUploadSupport(true);
     try
     {
        if(!isset($_GET['a']))
            {
            $data = $facebook->api('/me/photos', 'post', $args);
            }
          //  echo "<br/>Image posted. <a href=\"http://www.facebook.com/photo.php?fbid=".$data['id']."\" target=\"_blank\">Click here to view</a>. Thanks for using this application.";
      }
      catch(FacebookApiException $e)
      {
        var_dump($e);
      } 
```

这是工作代码的直接摘录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:32:45.137

试试这个

```
$args = array('message' => 'Photo Upload');
$args['image'] = '@' . realpath($FILE_PATH);
$data = $facebook->api("/{$album_id}/photos", 'post', $args); 
```

注意：如果您想创建一个与应用名称相同的新专辑名称并在那里上传，那么您必须使用

```
$facebook->api("/me/photos", 'post', $args); 
```

# r - 如何在 xts 中读取时间序列？

> ID：10780694
> 
> 赞同：3
> 
> 时间：2012-05-28T07:11:10.023
> 
> 标签：r, time-series, xts

我有这个时间序列数据：

```
 "timestamp"          "depth" "from_sensor_to_river_bottom" "Depth_from_river_surface_to_bottom"
"1" "2012-05-23 18:30:12-05" 16.4 17.16 0.760000000000002
"2" "2012-05-23 18:15:08-05" 16.38 17.16 0.780000000000001
"3" "2012-05-23 18:00:03-05" 16.39 17.16 0.77
"4" "2012-05-23 17:45:13-05" 16.35 17.16 0.809999999999999
"5" "2012-05-23 17:30:08-05" 16.37 17.16 0.789999999999999 
```

我正在使用以下代码：

```
d <- read.table(Name[1], header=TRUE)  #Name[1] is text file containing data

d <- read.zoo(d,
 format="'%Y-%m-%d %H:%M:%S'", 
 FUN=as.POSIXct  ) 
```

它给了我这个错误：

```
Error in read.zoo(d, format = "'%Y-%m-%d %H:%M:%S'", FUN = as.POSIXct) : 
 index has 5 bad entries at data rows: 1 2 3 4 5 
```

我希望在这个问题上得到帮助。谢谢您的考虑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:40:30.297

您的时间戳数据包含格式错误的时区数据，即`-05`每个时间戳的结尾。

从`?strptime`我了解到，您可以使用`%z`格式化带符号的时区偏移量，它应该是带符号的四位数字，例如`-0500`.

```
%z
Signed offset in hours and minutes from UTC, so -0800 is 8 hours behind UTC. 
```

因此，这是一种解决方法，可将缺失添加`00`到您的时间戳中：

重新创建您的数据：

```
dat <- '
"timestamp" "depth" "from_sensor_to_river_bottom" "Depth_from_river_surface_to_bottom"
"1" "2012-05-23 18:30:12-05" 16.4 17.16 0.760000000000002
"2" "2012-05-23 18:15:08-05" 16.38 17.16 0.780000000000001
"3" "2012-05-23 18:00:03-05" 16.39 17.16 0.77
"4" "2012-05-23 17:45:13-05" 16.35 17.16 0.809999999999999
"5" "2012-05-23 17:30:08-05" 16.37 17.16 0.789999999999999
' 
```

添加缺失的零：

```
x <- read.table(text=dat, header=TRUE)
x$timestamp <- paste(x$timestamp, "00", sep="")
x$timestamp <- as.POSIXct(x$timestamp, format="%Y-%m-%d %H:%M:%S%z")
x 
```

转换为动物园

```
library(zoo)
as.zoo(x)
  timestamp           depth from_sensor_to_river_bottom Depth_from_river_surface_to_bottom
1 2012-05-24 00:30:12 16.40 17.16                       0.76                              
2 2012-05-24 00:15:08 16.38 17.16                       0.78                              
3 2012-05-24 00:00:03 16.39 17.16                       0.77                              
4 2012-05-23 23:45:13 16.35 17.16                       0.81                              
5 2012-05-23 23:30:08 16.37 17.16                       0.79 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T10:57:36.893

这适用于帖子中的数据，前提是可以忽略`-05`每个日期/时间结束时的 。（要从文件中读取，请使用注释掉的行。）

```
Lines <- '"timestamp"          "depth" "from_sensor_to_river_bottom" "Depth_from_river_surface_to_bottom"
"1" "2012-05-23 18:30:12-05" 16.4 17.16 0.760000000000002
"2" "2012-05-23 18:15:08-05" 16.38 17.16 0.780000000000001
"3" "2012-05-23 18:00:03-05" 16.39 17.16 0.77
"4" "2012-05-23 17:45:13-05" 16.35 17.16 0.809999999999999
"5" "2012-05-23 17:30:08-05" 16.37 17.16 0.789999999999999'

library(zoo)
# z <- read.zoo("myfile.txt", tz = "")
z <- read.zoo(text = Lines, tz = "") 
```

上述代码的输出是：

```
> z
                    depth from_sensor_to_river_bottom Depth_from_river_surface_to_bottom
2012-05-23 17:30:08 16.37                       17.16                               0.79
2012-05-23 17:45:13 16.35                       17.16                               0.81
2012-05-23 18:00:03 16.39                       17.16                               0.77
2012-05-23 18:15:08 16.38                       17.16                               0.78
2012-05-23 18:30:12 16.40                       17.16                               0.76 
```

有关更多信息，请尝试[?read.zoo](http://finzi.psych.upenn.edu/R/library/zoo/html/read.zoo.html)和[?read.table](http://finzi.psych.upenn.edu/R/library/utils/html/read.table.html)以及[vignette("zoo-read")](http://cran.r-project.org/web/packages/zoo/vignettes/zoo-read.pdf)。最后一个是一个完整的文档，重点是给出`read.zoo`示例。

编辑：添加了评论链接。

# iphone - ASIHTTPRequest 请求取消

> ID：10780696
> 
> 赞同：4
> 
> 时间：2012-05-28T07:11:13.950
> 
> 标签：iphone, objective-c, xcode, asihttprequest

我一直在使用 ASIHTTPRequest 来获取数据，我想取消请求我是怎么做的？我这样做的代码就像这样..

```
-(void) serachData{
   NSURL *url= [NSURL URLWithString:self.safestring];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setTimeOutSeconds:7200];
    [request setDelegate:self];
    [request startAsynchronous];
}

 - (NSMutableDictionary *)requestFinished:(ASIHTTPRequest *)request
 {
   NSLog(@"requestFinished");
    NSString *responseString = [request responseString];
    SBJsonParser *json = [[SBJsonParser alloc] init];
    NSMutableArray *array = [[NSMutableArray alloc] initWithObjects[jsonobjectWithString:responseString], nil];
     NSLog(@"array %@",array);
  }

  - (void)requestFailed:(ASIHTTPRequest *)request{
 NSLog(@"requestFailed");
 } 
```

//如果我按下取消按钮（当 requestFinished /requestFailed 方法正在处理中）然后 ASIHTTPRequest 失败并完成方法停止 /abort！我该怎么做？？

```
 -(IBAction)CancleREquest:(id)sender{
NSLog(@"CancleREquest");
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T07:18:53.310

然后您**取消特定的 ASIHTTPRequest**：

```
if(![yourASIHTTPRequest isCancelled]) 
{
    // Cancels an asynchronous request
    [yourASIHTTPRequest cancel];
    // Cancels an asynchronous request, clearing all delegates and blocks first
    [yourASIHTTPRequest clearDelegatesAndCancel];
} 
```

注意：要**取消所有** **ASIHTTPRequest**，然后：

```
for (ASIHTTPRequest *request in ASIHTTPRequest.sharedQueue.operations)
{
  if(![request isCancelled]) 
  {
     [request cancel];
     [request setDelegate:nil];
  }
} 
```

**编辑**：不推荐使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)，因为`ASIHTTPRequest`它自 2011 年 3 月以来没有更新。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-20T10:31:49.687

不错的简单版本：

```
for (ASIHTTPRequest *request in ASIHTTPRequest.sharedQueue.operations){
    [request cancel];
    [request setDelegate:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:14:10.197

我建议您在控制器的 ivar/属性中保留对挂起请求的引用，然后`cancel`从您的按钮处理程序将消息发送给它。

```
//-- in your  class interface:
@property (nonatomic, assign) ASIFormDataRequest *request;

....

//-- in your  class implementation:
@synthesize request;

.....

-(void) serachData{
   NSURL *url= [NSURL URLWithString:self.safestring];
   self.request = [ASIFormDataRequest requestWithURL:url];
   [self.request setTimeOutSeconds:7200];
   [self.request setDelegate:self];
   [self.request startAsynchronous];
}

-(IBAction)CancleREquest:(id)sender{
   [self.request cancel];
   NSLog(@"request Canceled");
} 
```

但是，取消时您有多种选择；来自[ASIHTTPRequest 文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)：

> 取消异步请求
> 
> 要取消异步请求（使用 [request startAsynchronous] 启动的请求或在您创建的队列中运行的请求），请调用 [request cancel]。请注意，您不能取消同步请求。
> 
> 请注意，当您取消请求时，该请求会将其视为错误，并将调用您的委托和/或队列的失败委托方法。如果您不希望这种行为，请在调用取消之前将您的委托设置为 nil，或者改用 clearDelegatesAndCancel 方法。
> 
> ```
>  // Cancels an asynchronous request
>             [request cancel]
> 
>             // Cancels an asynchronous request, clearing all delegates and blocks first
>             [request clearDelegatesAndCancel]; 
> ```

# arm - 使用 CPU、GPU 和 ARM CPU 的异构计算

> ID：10780697
> 
> 赞同：0
> 
> 时间：2012-05-28T07:11:17.770
> 
> 标签：arm, opencl, gpu, pyopencl

在我的 opencl 应用程序中，我有一个控制应用程序部分、一个图形应用程序部分和一些串行应用程序部分，如下所示：

![在此处输入图像描述](../Images/a9f8857b6b8e1d93e5325dc4cbd40b53.png)

所有这些应用程序都是并行运行的。

到目前为止，我已经编写了在 CPU 和 GPU 上同时运行的应用程序。如上图所示，有没有一种方法可以将 ARM 与 CPU（Intel）和 GPU（ATI）并行使用？

# iphone - 跨度在锚标记内阻止 iPhone 上 Safari 的点击事件

> ID：10780702
> 
> 赞同：9
> 
> 时间：2012-05-28T07:11:25.913
> 
> 标签：iphone, html, css, safari, sencha-touch-2

我将一个普通链接设置为类似于我们基于 Sencha Touch 2 的移动应用程序中的按钮，但我遇到了大多数链接在 iPhone 上的 Safari 中不起作用的问题。

链接是一个普通`<a>`标签，其内部`<span>`元素包含标签文本。元素上有填充`<a>`，允许注册点击。看起来内部`<span>`正在阻止点击在父锚中注册为链接点击，并且它的背景是透明的。

这是标记：

```
<a href="http://test-site.xx/full-site-page?param=value" class="x-button-normal x-button btn-profile">
    <span class="x-button-label">View profile on full site</span>
</a> 
```

在 Chrome 中对此进行测试不会出现任何问题，即单击跨度会导致跟随父超链接。两者都是基于 Webkit 的浏览器。我们的一位测试人员还在 Macbook 上的 Safari 中进行了测试，没有出现任何问题；我还使用 Wacom Bamboo 平板电脑在 Chrome 中对此进行了测试，没有任何问题。这只是移动设备上的一个问题（在 iPhone 和 Android 2.2 上测试过）——这就是我们的目标。

我可以在`<span>`元素上设置一个 CSS 属性以允许点击进入父超链接吗？理想情况下，我想避免通过 JavaScript 设置事件。关于为什么这不能像我预期的那样工作的任何想法？

**更新**：以下是 Chrome 开发者控制台报告的内部跨度的样式：

```
-webkit-box-align: center;
-webkit-box-flex: 1;
-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
-webkit-user-drag: none;
-webkit-user-select: none;
background-attachment: scroll;
background-clip: border-box;
background-color: transparent;
background-image: none;
background-origin: padding-box;
border-bottom-color: white;
border-bottom-style: none;
border-bottom-width: 0px;
border-left-color: white;
border-left-style: none;
border-left-width: 0px;
border-right-color: white;
border-right-style: none;
border-right-width: 0px;
border-top-color: white;
border-top-style: none;
border-top-width: 0px;
box-shadow: none;
box-sizing: border-box;
color: white;
cursor: auto;
display: inline;
font-family: 'Helvetica Neue', HelveticaNeue, Helvetica-Neue, Helvetica, 'BBAlpha Sans', sans-serif;
font-size: 18px;
font-weight: bold;
height: auto;
line-height: 21px;
overflow-x: hidden;
overflow-y: hidden;
padding-bottom: 0px;
padding-left: 0px;
padding-right: 0px;
padding-top: 0px;
position: static;
text-align: center;
text-decoration: none;
text-overflow: ellipsis;
white-space: nowrap;
width: auto; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T04:08:14.763

解决了这个问题，感谢[这篇文章](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements/4839672#4839672)提到了以下 CSS 属性：

```
pointer-events: none; 
```

将此添加到内部的样式（以及在我的第二条评论中提到的`<span>`内部浮动）允许这些通过点击传递到父超链接。`<img>`

奇怪的是，Sencha Touch 2 似乎干扰了 DOM，不知道具体是什么。在一个完全静态的 HTML 页面（没有 JavaScript，更不用说 Sencha Touch 2）上模拟一个类似样式的按钮并没有在移动设备上表现出最初的问题。

简单情况下的另一个选择（单个`<span>`，没有浮动图像）是重构样式以消除对内部的需要`<span>`，尽管这对于更复杂的情况是不可行的：

```
<a class="attachment" href="/someRepository/someDownload.pdf">
    <img src="/images/fileExtension-pdf.png" alt="Attachment"/>
    <span class="title">Title of download</span>
    <span class="size">xxx kB</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:25:13.163

我认为这与 Sencha Touch 防止缩放有关。他们在代码中添加了防止默认大多数 touchstart 事件（这会终止链接的使用）。锚点有一个例外，但锚点的子节点没有（因此点击锚点本身可以​​正常工作，但不能点击锚点内的跨度）。我能够在我的应用程序启动方法中对 quickfix 进行修补：

```
Ext.Viewport.setPreventZooming(false); // unbind any existing handler
Ext.Viewport.doPreventZooming = Ext.Function.createInterceptor(Ext.Viewport.doPreventZooming, function(e){
    return !Ext.fly(e.target).findParent('a');
    });
Ext.Viewport.setPreventZooming(true); 
```

上面的代码没有任何保证（没有在 Android 上测试过，我怀疑它效率很低）。我也将此报告为错误：[http ://www.sencha.com/forum/showthread.php?215032-Links-are-prevented-when-tapping-on-children](http://www.sencha.com/forum/showthread.php?215032-Links-are-prevented-when-tapping-on-children)

# html - 使用 HTML 进行代码注释和预览

> ID：10780705
> 
> 赞同：1
> 
> 时间：2012-05-28T07:11:42.973
> 
> 标签：html, code-snippets

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

[http://angularjs.org/#/list](http://angularjs.org/#/list)（基础篇）

基本上，我想知道那里有什么工具可以让我创造他们那里的东西。我真正喜欢的是 angularJS，因为我需要一种方法来允许在我的代码片段中添加注释。

所以，基本上。我的问题是这样的：

他们如何创建注释以在代码中的某些位置工作（因此您将鼠标悬停在突出显示上），是从库中创建的。如果是这样，这个库在哪里找到？我在网上找到了一些，但它们看起来都像糟糕的便签纸，我想要像这样更时尚的东西。

最后，我如何让行号工作？

谢谢你。

亚历克斯。

# c++ - 尝试读取文本文件，使用 XOR 加密，然后将其写入新的文本文件

> ID：10780706
> 
> 赞同：0
> 
> 时间：2012-05-28T07:12:07.017
> 
> 标签：c++, encryption, bit-manipulation, xor

我正在尝试设计一个程序，它将打开任何文本文件，将其读入字符串，用 XOR 加密字符串，并将字符串写入新的文本文件。下面的代码有效，但会产生多个“系统哔声”。

我的疯狂猜测是我没有正确处理空格？我不确定。任何想法我做错了什么？

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    ifstream inFile;
    ofstream outFile;

    // Define variables
    string fileName,
        key = "seacrest out";

    // Input
    cout << "Please enter the name of the file you wish to encrypt: ";
    cin >> fileName;
    cout << endl;

    inFile.open(fileName, ios::in | ios::binary);
    string str((istreambuf_iterator<char>(inFile)), istreambuf_iterator<char>()); // Reads a text file into a single string.
    inFile.close();
    cout << "The file has been read into memory as follows:" << endl;   
    cout << str << endl;
    system("pause");

    // Encryption
    cout << "The file has been encrypted as follows:" << endl;
    for (unsigned x = 0; x < str.size(); x++)           // Steps through the characters of the string.
        str[x] ^= key[x % key.size()];                  // Cycles through a multi-character encryption key, and encrypts the character using an XOR bitwise encryption.
    cout << str << endl;                                // This code works, but I get system beeps. Something is still wrong.

    // Write Encrypted File
    cout << "Please enter the file name to save the encrypted file under: ";
    cin >> fileName;
    cout << endl;

    outFile.open(fileName, ios::out | ios::binary);
    outFile.write(str.c_str(), str.size());         // Writes the string to the binary file by first converting it to a C-String using the .c_str member function.

    system("pause");

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T13:58:04.850

尝试自己做的荣誉。问题是您没有仔细处理某些字符，例如空格可能会尝试打印出来

> 字符 d=(字符)(7);
> 
> printf("%c\n",d);

这被称为钟字符。这是 XOR 加密的简单实现，但我建议编写您自己的版本

[http://programmingconsole.blogspot.in/2013/10/xor-encryption-for-alphabets.html](http://programmingconsole.blogspot.in/2013/10/xor-encryption-for-alphabets.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T07:18:47.603

您听到的那些哔声是文件中等于 0x07 的字节。您可以通过不在控制台中打印二进制文件的内容来摆脱这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:15:06.350

当你用一些随机键异或字节时，你会得到一些不寻常的字节序列。这些字节序列恰好对应于一些不可打印的字符，您可以通过将它们发送到控制台来使控制台发出哔哔声。

如果您删除该行

```
cout << str << endl; 
```

您会发现您的控制台不再发出哔哔声，因为您没有打印控制台解释为哔哔声命令的错误字节序列。

如果您的控制台设置为 ASCII 模式（我认为这是因为您有`system("PAUSE")`这表明您在 Windows 上，除非您明确设置它 IIRC，否则控制台不是 Unicode），那么那些不可打印的字符都是小于 0x1F 的字节和字节0x7F，导致控制台发出蜂鸣声的字符是 0x7（称为“bell”）。

## **tl;博士**

您在加密数据中得到一些 0x7 字节，导致控制台在打印时发出哔哔声。删除`cout << str << endl;`以修复它。

# security - 是否可以检查从应用程序外部传递给 VB6 应用程序的命令行参数

> ID：10780709
> 
> 赞同：1
> 
> 时间：2012-05-28T07:12:25.097
> 
> 标签：security, vb6, command-line-arguments, piracy-prevention, piracy-protection

我有一个 VB6 应用程序，它在 VB6 中有一个许可模块，用于检查经过身份验证的用户。如果身份验证成功，此应用程序将使用身份验证信息调用主应用程序。现在，我想通过命令行参数以加密格式将信息从许可应用程序传递到主应用程序。主应用程序将读取命令行参数并检查用户是否经过身份验证。由于用户可以直接打开主应用程序并在没有许可证的情况下使用它，因此需要在主应用程序中进行身份验证。

我担心这种方法的安全级别。在 Web 应用程序中，我们可以使用 fiddler 等各种工具来检查和查看 Web 应用程序发出的请求/响应。**是否有用户可以检查或查看传递给/从 VB6 应用程序的命令行参数的工具？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T09:58:03.973

可以看到这一点的工具的一个示例是[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)。命令行参数将与 exe 的完整路径一起显示在详细信息列中。从[Windows Vista](http://en.wikipedia.org/wiki/Windows_Task_Manager#Windows_Vista_changes)开始，这些值也可以显示在任务管理器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:13:31.480

是的，在 VB6 中，您可以使用`Command$`查看命令行参数，类似地，几乎所有的编程语言和技术都会有这样的命令/工具来查看命令行参数。可以用他/她自己的 exe 替换您的 exe，然后打印（如 MessageBox）命令行参数。

现在，要么更改问题的标题，要么发布新问题以获取有关安全模型的一些建议。最好先google一下这个模型和其他好的模型的风险

**编辑**

如果您的意思是“在应用程序之外”，那么我认为替换 exe 可以工作，只要一个人具有这样的访问权限，即他/她可以用他/她自己的替换您的应用程序的 exe，这只会转储参数。

# javascript - 如何按值将数组分配给另一个变量javascript

> ID：10780714
> 
> 赞同：1
> 
> 时间：2012-05-28T07:12:44.003
> 
> 标签：javascript, jquery, arrays, object

我有一个数组`channel_chunk`

```
var channel = "global/private/user/updates/user_following/publisher_id/subcriber_id";

channel_chunk = channel.split("/"), 
```

我将此数组分配给另一个变量

```
var new_arr =  channel_chunk ; 
```

问题是

当我改变

```
new_arr[0]  = "test"; 
```

`channel_chunk[0]`也变成`test`

所以我认为它是在我分配时通过引用传递的，我想`channel_chunk`按值分配给`new_arr`。

我知道`jQuery.extend` 会有所帮助。但是在这种情况下我使用的是纯 JavaScript，所以我不能使用它，是否有内置函数可以在 JavaScript 中执行此操作。请帮忙............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:17:48.713

获取数组（部分）的（浅）副本的“官方”方式是[`.slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)：

```
var new_arr = channel_chunk.slice(0); 
```

[ 它被称为“浅”副本，因为其中的任何对象或数组仍将引用原始副本，但数组本身是一个全新的副本。当您使用不会影响您的字符串原语时。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:16:51.897

您将需要创建一个新数组。一个简单的方法就是不带 args 的 concat：

```
var new_arr = channel_chunk.concat(); 
```

现在修改 new_arr 对 channel_chunk 没有影响。

# android - 如何在android中设置具有相应值的复选框和微调器

> ID：10780716
> 
> 赞同：0
> 
> 时间：2012-05-28T07:12:44.487
> 
> 标签：android, checkbox, spinner

我正在尝试操作复选框并使用相应的微调器并将值发送到下一页。

在这里，如果首先选中 asia 复选框并从第一个称为 asia spinner 的国家中选择一个。与检查欧洲相同，也检查并从欧洲微调器中选择一个国家。

如果我单击 setdetails 按钮，然后转到下一页并设置两个选中国家/地区的所有详细信息。并将所有国家/地区的详细信息保存在数据库中。

这里有一些示例图片，显示了我的问题。 ![在此处输入图像描述](../Images/665c9a7eb9e0f3035806c08d4d1ccf6c.png) ![在此处输入图像描述](../Images/270e62c1b50aa004270d6eaab338d4b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:21:55.387

首先，您为微调器提供一个适配器来填充它的值，如下所示：

```
 ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, list);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(dataAdapter); 
```

然后得到检查值你写：

```
String selectedParent = parentSpinner.getSelectedItem().toString(); 
```

要设置值，请执行以下操作：

```
parentSpinner.setSelection(i); 
```

其中 i 是您提供的列表中的索引（即 0 表示“列表中的第一个元素”）。

要将这些值传递给下一个活动，您可以使用 set extras 到 Intent：

```
Intent i = new Intent(TaskViewActivity.this, TaskViewActivity.class);
i.putExtra("status", status);
TaskViewActivity.this.startActivityForResult(i, 0); 
```

要从您调用的活动中获取它们，请执行以下操作：

```
Bundle extras = getIntent().getExtras();
task_id = extras.getLong("status"); 
```

我希望这会有所帮助！

# php - 在特定元素上重新排列数组

> ID：10780718
> 
> 赞同：-6
> 
> 时间：2012-05-28T07:12:51.983
> 
> 标签：php, arrays

我需要将数组项的顺序更改为预定义的顺序。

原始数组是

```
$order = array(3136,3121,3147,3125);

Array
(
    [3121] => Array
        (
            [0] => 311
            [1] => 311>
            [2] => First Level
        )

    [3125] => Array
        (
            [0] => 312
            [1] => 312>
            [2] => Ids
        )

    [3136] => Array
        (
            [0] => 313
            [1] => 313>
            [2] => Insurance
        )

    [3147] => Array
        (
            [0] => 314
            [1] => 314>
            [2] => Property
        )
) 
```

需要像下面这样生成，

```
Array
(
    [3136] => Array
        (
            [0] => 313
            [1] => 313>
            [2] => Insurance
        )
    [3121] => Array
        (
            [0] => 311
            [1] => 311>
            [2] => First Level
        )
    [3147] => Array
        (
            [0] => 314
            [1] => 314>
            [2] => Property
        )
    [3125] => Array
        (
            [0] => 312
            [1] => 312>
            [2] => Ids
        )

) 
```

base 将是数组元素的键，在 3136 元素之后 3121 将被推送然后 3147 等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:28:38.927

只是一个猜测：

```
$order = array(3136,3121,3147);
$new_arr =array();
foreach ($order as $key){
    if ($old_array[$key])
        $new_arr[$key]=$old_array[$key];
} 
```

# c++ - 对共享数据的线程安全访问 - 读/写实际上发生并且没有重新排序发生

> ID：10780728
> 
> 赞同：2
> 
> 时间：2012-05-28T07:13:30.243
> 
> 标签：c++, multithreading, compiler-construction, thread-safety, volatile

从这里：[https ://stackoverflow.com/a/2485177/462608](https://stackoverflow.com/a/2485177/462608)

> 对于共享数据的线程安全访问，我们需要保证
> **读/写确实发生**（编译器不会只是将值存储在寄存器中，而是将更新主内存推迟到很久以后）
> **不会发生重新排序。**假设我们使用 volatile 变量作为标志来指示某些数据是否已准备好被读取。在我们的代码中，我们只是在准备好数据后设置了标志，所以一切看起来都很好。但是如果指令被重新排序以便首先设置标志怎么办？

*   在哪些情况下，编译器会将值存储在寄存器中并推迟更新主存？ *[关于上述报价]*
*   上述引文所说的“重新排序”是什么？在什么情况下会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:29:30.430

**问：**在哪些情况下编译器会将值存储在寄存器中并延迟更新主存？

**答：（**这是一个广泛而开放的问题，可能不太适合 stackoverflow 格式。）简短的回答是，只要源语言的语义（每个标签的 C++）允许它并且编译器认为它是有利可图。

**问：**以上引用所说的“重新订购”是什么？

**答：**编译器和/或 CPU 发出加载和存储指令的顺序不同于原始程序源的一对一翻译所规定的顺序。

**问：**在什么情况下会发生？

**A：**对于编译器，与第一个问题的答案类似，只要原始程序语义允许并且编译器认为它是有利可图的。对于 CPU，情况类似，只要原始（单线程！）结果相同，CPU 就可以根据架构内存模型对内存访问进行重新排序。例如，编译器和 CPU 都可以尝试尽早提升负载，因为负载延迟通常对性能至关重要。

为了强制执行更严格的排序，例如为了实现同步原语，CPU 提供了各种*原子*和/或*栅栏*指令，并且编译器可以根据编译器和源语言提供禁止重新排序的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:50:13.357

嗯...在搜索“volatile”关键字时发现了这一点..lol 1\. 即使使用缓存，寄存器访问也比内存快得多。例如，如果您有以下内容：

```
for(i = 0; i < 10000; i++)
{
// whatever...
} 
```

如果变量 i 存储在寄存器中，则循环获得更好的性能。所以一些编译器可能会生成将 i 存储在寄存器中的代码。在循环结束之前，对该变量的更新可能不会发生在内存中。甚至完全有可能 i 永远不会写入内存（例如，i 以后永远不会使用）或溢出到循环体内（例如，内部有一个更重的嵌套循环需要优化，并且没有更多的寄存器）。该技术称为寄存器分配。只要语言标准允许，通常没有优化器规则。它有很多不同的算法。当它发生时很难回答。这就是janneb这么说的原因。如果一个变量没有及时更新，对于多线程代码来说可能真的很糟糕。例如，如果您有这样的代码：

```
bool objRead = false;
createThread(prepareObj);  // objReady will be turn on in prepareObj thread.
while(!objReady) Sleep(100);
obj->doSomething(); 
```

优化器可能生成只测试 objReady 一次的代码（当控制流进入循环时），因为它在循环内部没有改变。这就是为什么我们需要确保读写真的像我们在多线程代码中设计的那样发生。

重新排序比寄存器分配更复杂。编译器和您的 CPU 都可能会更改代码的执行顺序。

```
void prepareObj()
{
obj = &something;
objReady = true;
} 
```

对于prepareObj函数的观点，不管是先设置objReady还是先设置obj指针都没有关系。由于不同的原因，编译器和 CPU 可能会颠倒两条指令的顺序，例如特定 CPU 流水线的更好并行性、更好的缓存命中数据局部性。您可以阅读 janneb 建议的《计算机体系结构：定量方法》一书。如果我没记错的话，附录 A 是关于重新排序的（如果没有，请转到附录 B 或 C..lol）。

# wif - WIF-ID1014：签名无效。数据可能已被篡改

> ID：10780729
> 
> 赞同：8
> 
> 时间：2012-05-28T07:13:43.413
> 
> 标签：wif, federated-identity, windows-identity, ws-federation

我一直在使用 WIF 来验证我们的新网站，STS 基于 starter-sts 实现。

为了使它能够在负载平衡环境中正常工作，我在 global.asax 中使用了以下内容来覆盖默认证书行为。

```
void onServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
        {
            List<CookieTransform> sessionTransforms = new List<CookieTransform>(new CookieTransform[] 
            { 
                new DeflateCookieTransform(), 
                new RsaEncryptionCookieTransform(e.ServiceConfiguration.ServiceCertificate),
                new RsaSignatureCookieTransform(e.ServiceConfiguration.ServiceCertificate)
            });

            SessionSecurityTokenHandler sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());
            e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);
        } 
```

这一切都在工作，人们已经成功地使用了这个系统，但是我们时不时地得到一个爆炸：

**ID1014：签名无效。数据可能已被篡改。**

在事件日志中，所以我打开了 WIF 跟踪并在日志中看到了以下内容。

**ID1074：尝试使用 ProtectedData API 加密 cookie 时发生 CryptographicException（有关详细信息，请参阅内部异常）。如果您使用的是 IIS 7.5，这可能是由于应用程序池上的 loadUserProfile 设置设置为 false。**

我有一种感觉，正如我所想的那样，这让我走上了一条黑暗的小巷，因为我已经将实现更改为使用 RSA，这不应该影响我。

有什么想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T20:49:19.287

浏览器 cookie 使用“旧”机制 - DPAPI 进行加密。因此，当服务器尝试解密 cookie 时，它​​会失败 - 您的代码现在使用 RSA，而不是 DPAPI。

作为一种解决方法，清除浏览器缓存，应用程序将按预期开始运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:55:10.333

我更改了实现以修改 onkencreated 方法中的超时。这可以防止重新发布。

```
protected override void OnSessionSecurityTokenCreated(Microsoft.IdentityModel.Web.SessionSecurityTokenCreatedEventArgs args)
        {
            args.SessionToken = FederatedAuthentication.SessionAuthenticationModule.CreateSessionSecurityToken(
                args.SessionToken.ClaimsPrincipal,
                args.SessionToken.Context,
                DateTime.UtcNow,
                DateTime.UtcNow.AddDays(365),
                true
                );
            //base.OnSessionSecurityTokenCreated(args);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T19:16:09.120

您是否尝试将 loadUserProfile 选项设置为 true？问题是否仍然存在？

（在 IIS 中选择应用程序池，然后单击右侧的“高级设置”。“加载用户配置文件”在“进程模型”部分）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T20:07:07.820

您的错误间歇性发生，再加上您的跟踪中显示的 DPAPI 异常，这表明您实际上并未覆盖 cookie 转换，并且您的服务仍在使用 DPAPI。

这可能是一个长镜头，但在您的代码片段中，我注意到您的方法覆盖“onServiceConfigurationCreated”以小写 o 开头。这样的错字确实会阻止您正确覆盖默认 WIF 行为。

# java - 无法在谷歌应用引擎上部署应用程序：appengine-web.xml 不包含 元素

> ID：10780732
> 
> 赞同：8
> 
> 时间：2012-05-28T07:13:58.787
> 
> 标签：java, google-app-engine, exception, netbeans

当我单击以在 netbeans 的 google app 引擎上部署应用程序时，这些是产生的错误消息。让我告诉你，最初，可能我输入了错误的密码并且应用程序无法部署。但是现在当我单击部署应用程序时，它不会询问我电子邮件或密码。

无论如何，我该如何解决这些错误？

```
Reading application configuration data...
Bad configuration: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
Please see the logs [C:\Users\user\AppData\Local\Temp\appcfg6534187344911851576.log] for further information.
May 28, 2012 12:35:54 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed W:/UnderTest/NetbeansCurrent/Guestbook/build/web\WEB-INF/appengine-web.xml
May 28, 2012 12:35:54 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
SEVERE: Received exception processing W:/UnderTest/NetbeansCurrent/Guestbook/build/web\WEB-INF/appengine-web.xml
com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
at com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79)
at com.google.appengine.tools.admin.Application.<init>(Application.java:139)
at com.google.appengine.tools.admin.Application.readApplication(Application.java:225)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:145)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:69)
at com.google.appengine.tools.admin.AppCfg.main(AppCfg.java:65) 
```

**编辑：** 我在linux中尝试了同样的事情，这次我输入了正确的密码。然后我也得到了以下例外：

```
May 28, 2012 1:26:51 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed /home/non-admin/NetBeansProjects/Guestbook/build/web/WEB-INF/appengine-web.xml
May 28, 2012 1:26:51 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
SEVERE: Received exception processing /home/non-admin/NetBeansProjects/Guestbook/build/web/WEB-INF/appengine-web.xml
com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
at  com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79)
at com.google.appengine.tools.admin.Application.<init>(Application.java:139)
at com.google.appengine.tools.admin.Application.readApplication(Application.java:225)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:145)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:69)
at com.google.appengine.tools.admin.AppCfg.main(AppCfg.java:65)
Bad configuration: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
Please see the logs [/tmp/appcfg6804971430427378027.log] for further information.
Reading application configuration data...
 May 28, 2012 1:41:52 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed /home/non-admin/NetBeansProjects/Guestbook/build/web/WEB-INF/appengine-web.xml
May 28, 2012 1:41:52 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
SEVERE: Received exception processing /home/non-admin/NetBeansProjects/Guestbook/build/web/WEB-INF/appengine-web.xml
com.google.apphosting.utils.config.AppEngineConfigException: appengine-web.xml does not contain a <threadsafe> element.
See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
You probably want to enable concurrent requests.
at com.google.apphosting.utils.config.AppEngineWebXmlReader.readAppEngineWebXml(AppEngineWebXmlReader.java:79)
at com.google.appengine.tools.admin.Application.<init>(Application.java:139)
at com.google.appengine.tools.admin.Application.readApplication(Application.java:225)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:145)
at com.google.appengine.tools.admin.AppCfg.<init>(AppCfg.java:69)
at com.google.appengine.tools.admin.AppCfg.main(AppCfg.java:65)
 Bad configuration: appengine-web.xml does not contain a <threadsafe> element.
 See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.
 You probably want to enable concurrent requests.
 Please see the logs [/tmp/appcfg8910063489276425896.log] for further information. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T10:36:14.237

以@alex 所说的话为基础......

你有你的第一个错误日志

`Bad configuration: appengine-web.xml does not contain a <threadsafe> element. See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.`

第一行

`Bad configuration: appengine-web.xml does not contain a <threadsafe> element.`

告诉你什么是错的。第二行

`See http://code.google.com/appengine/docs/java/config/appconfig.html#Using_Concurrent_Requests for more information.`

指示要研究 GAE 文档的哪一部分来解决您的问题。

我必须承认，错误日志条目非常清晰且很有帮助。我希望更多人可以遵循这里为您制作的示例。如果您仍然被卡住，请您具体说明您被卡住的地方吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T08:31:27.473

只需添加

`<threadsafe>true</threadsafe>`

到您的 war/WEB-INF/appengine-web.xml

就像这样：

```
 <?xml version="1.0" encoding="UTF-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
<application></application>
<version>1</version>
<threadsafe>true</threadsafe> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T14:57:12.537

我认为您已将此线程安全属性添加到 web.xml 而不是 appengin-web.xml。确保将其添加到 appenginweb.xml。谢谢。

# php - 如何从 PHP 脚本在日志中写入 $stmt？

> ID：10780736
> 
> 赞同：1
> 
> 时间：2012-05-28T07:14:14.927
> 
> 标签：php, apple-push-notifications

我不知道 PHP 脚本。基本上是一个 iPhone 应用程序开发人员。我想从服务器发送 Apple 推送通知。我正在关注本教程的 APNS 流程[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)。我使用 api.php 脚本将值存储在 MySQL 表中。

我想知道下面几行发生了什么。

```
 $stmt = $this->pdo->prepare('SELECT * FROM usersTable WHERE udid = ? LIMIT 1');
        $stmt->execute(array($udid));
        $user = $stmt->fetch(PDO::FETCH_OBJ);

        writeToLog('handleMessage SELECT * FROM usersTable WHERE udid = ? LIMIT 1');

        if ($user !== false)
        {
            // Put the sender's name and the message text into the JSON payload
            // for the push notification.
            $payload = $this->makePayload($user->nickname, $text);

            writeToLog('handleMessage Payload: ' . $payload);

            // Find the device tokens for all other users who are registered
            // for this secret code. We exclude the device token of the sender
            // of the message, so he will not get a push notification. We also
            // exclude users who have not submitted a valid device token yet.
            $stmt = $this->pdo->prepare("SELECT device_token FROM usersTable WHERE secret_code = ? AND device_token <> ? AND device_token <> '0'");
            $stmt->execute(array($user->secret_code, $user->device_token));
            $tokens = $stmt->fetchAll(PDO::FETCH_COLUMN);
                writeToLog('handleMessage Tokens: ' . $tokens); // It is showing value like 'Array'

            // Send out a push notification to each of these devices.
                    // If the senders secret code is differ from registered secret code this foreach loop won't execute
            foreach ($tokens as $token)
            {
                writeToLog('Sending payload and token to addPushNotification Function');
                writeToLog('token in foreach loop token: ' . $token);
                $this->addPushNotification($token, $payload);
            }
        } 
```

我希望任何人都可以理解这个 PHP 脚本的功能。如何在日志文件中打印 $stmt 和 $tokens？你能解释一下这些线路发生了什么吗？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:22:27.820

改变

`writeToLog('handleMessage Tokens: ' . $tokens);`

至

`writeToLog('handleMessage Tokens: ' . print_r($tokens, 1));`

# java - 使用java从FTP下载图片

> ID：10780740
> 
> 赞同：1
> 
> 时间：2012-05-28T07:14:29.660
> 
> 标签：java

我得到了起始 url，得到了一个 for() 但现在不知道如何使用 webclient 来下载它们，有人可以帮忙吗？需要哪些“进口”？我正在使用-

```
System.in.WebClient client = new WebClient();  
byte [] bytedata = client.DownloadData(url);
client.DownloadFile(url,downloadPath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:17:17.650

您必须使用库在 java 中使用 FTP 来获取文件。

最常见的是公地之一：[http ://commons.apache.org/net/](http://commons.apache.org/net/)

# c# - 如何计算asp.net中两个项目模板绑定值的差异？

> ID：10780745
> 
> 赞同：-2
> 
> 时间：2012-05-28T07:14:41.943
> 
> 标签：c#, asp.net

我不确定我是否选择了正确的词来问这个问题。但是，这是我的代码

```
<asp:GridView ID="dgvJobCostList" runat="server" CellPadding="4" ForeColor="#333333" style="font-family:Verdana;font-size:10px;" AutoGenerateColumns="False" OnSelectedIndexChanged="dgvJobCostList_SelectedIndexChanged">
                <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#999999" />
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                <Columns>
                    <asp:TemplateField HeaderText="Valid From">
                        <ItemTemplate>
                            <asp:Label ID="lblRateEffectiveFrom" runat="server" Text='<%# Bind("RateEffectiveFrom") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Shipper">
                        <ItemTemplate>
                            <%--<asp:Label ID="lblShipperName" runat="server" Text='<%# Bind("ShipperName") %>'></asp:Label>--%>
                            <%--<asp:Label ID="lblShipperName" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "Shipper.ShipperName") %>'></asp:Label>--%>
                            <asp:Label ID="lblShipperName" runat="server" Text='<%# ((BOJobInfo)Container.DataItem).oShipper.ShipperName %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Consignee">
                        <ItemTemplate>
                            <%--<asp:Label ID="lblConsigneeName" runat="server" Text='<%# Bind("ConsigneeName") %>'></asp:Label>--%>
                            <asp:Label ID="lblConsigneeName" runat="server" Text='<%# ((BOJobInfo)Container.DataItem).oConsignee.ConsigneeName %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Income">
                        <ItemTemplate>
                            <asp:Label ID="lblTotalIncome" runat="server" Text='<%# Bind("TotalIncome") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Cost">
                        <ItemTemplate>
                            <asp:Label ID="lblTotalCost" runat="server" Text='<%# Bind("TotalCost") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="CM1">
                        <ItemTemplate>
                            <asp:Label ID="lblTotalCM1" runat="server" Text='<%# Bind("TotalIncome" - "TotalCost") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

我的问题是
1。我想计算收入和成本的差异并将结果显示在 CM1 模板中。
2\. 我想将“RateEffectiveFrom”的日期格式化为“dd-MMM-yyyy”，目前显示的内容类似于“dd-MM-yyyy hh:mm:ss AM/PM”。
请像以前一样提供帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:36:17.063

如果您想不使用 RowDataBound ，您可以执行以下操作：

```
<label id="cm1Label"><%# DataBinder.Eval(Container.DataItem, "TotalIncome") - DataBinder.Eval(Container.DataItem, "TotalCost")%></label> 
```

或者在服务器上编写一个小的公共静态函数，它会根据传递的值给你差异

```
Text='<%# GetDifference(Eval("TotalIncome"),Eval("TotalCost"))%>' 
```

对于日期，您可以执行以下操作：

```
'<%# Convert.ToDateTime(Eval("RateEffectiveFrom")).ToString("dd/MM/yyyy")%>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:01:02.430

这是我的方式，

```
 public decimal GetOrders(decimal order)
    {
        totalOrders += order;
        return order;
    }
    public decimal GetOrdersTotal()
    {
        return totalOrders;
    } 
```

和，

```
<ItemTemplate>
 <%# GetOrders(decimal.Parse(Eval("OrderTotal").ToString())).ToString("N2")%>
</ItemTemplate>
<FooterTemplate>
<%# GetOrdersTotal().ToString("N2")%>
</FooterTemplate> 
```

对于日期，您可以使用相同的东西，或使用网格属性中的格式函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:19:48.317

为网格视图编写服务器端 RowDataBound 事件

使用 e.Row.FindControl 查找模板控件，例如

```
protected void dgvJobCostList_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
    Label lblRateEffectiveFrom = ((Label)e.Row.FindControl("lblRateEffectiveFrom"));

    //Use following line to change the date format in RowDataBound after finding the control

    lblRateEffectiveFrom .Text = lblRateEffectiveFrom .Text.ToString(dd-MMM-yyyy")
       //do what ever you want to do here using the value of your label
  } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T08:34:30.720

谢谢**@Rahul R** .，虽然您提供的代码示例需要很少的修改，但这些确实给了我解决问题的想法。因此，我会将您的答案标记为“答案”。这是我目前正在使用的代码

**对于问题 1。**

```
<asp:TemplateField HeaderText="Income">
    <ItemTemplate>
        <asp:Label ID="lblTotalIncome" runat="server" Text='<%# Bind("TotalIncome") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Cost">
    <ItemTemplate>
        <asp:Label ID="lblTotalCost" runat="server" Text='<%# Bind("TotalCost") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="CM1">
    <ItemTemplate>
        <asp:Label ID="lblTotalCM1" runat="server" Text='<%# Convert.ToDouble(DataBinder.Eval(Container.DataItem, "TotalIncome")) - Convert.ToDouble(DataBinder.Eval(Container.DataItem, "TotalCost"))%>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

**对于问题 2。**

```
<asp:TemplateField HeaderText="Valid From">
                                <ItemTemplate>
                                    <asp:Label ID="lblRateEffectiveFrom" runat="server" Text='<%# Eval("RateEffectiveFrom", "{0:dd-MMM-yyyy}") %>'></asp:Label>
                                </ItemTemplate>
                            </asp:TemplateField> 
```

还要感谢 Rana 和 Rizvi 分享您的想法。谢谢。

# java - 递归搜索Java中的目录

> ID：10780747
> 
> 赞同：7
> 
> 时间：2012-05-28T07:14:52.140
> 
> 标签：java, search, directory, find

在 Java 中查找具有特定名称的目录的最佳方法是什么？我要查找的目录可以位于当前目录或其子目录之一中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-11T03:15:52.587

在 Java 8 中通过[流 API](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)：

```
Optional<Path> hit = Files.walk(myPath)
   .filter(file -> file.getFileName().equals(myName))
   .findAny(); 
```

#walk 是惰性的，因此任何[短路终端操作](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps)都会优化所需的 IO。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T07:25:01.000

要遍历文件树，可以使用[FileVisitor接口。](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileVisitor.html)请看[教程](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)。另请参阅[查找示例代码](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/essential/io/examples/Find.java)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T07:19:20.427

您的解决方案将包括使用`File.listFiles(String)`

[`java.io.File`API 参考](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-28T07:28:14.150

正如你提到的递归应该满足这个要求

```
import java.io.File;

public class CheckFile {

    private static boolean foundFolder = false;

    public static void main(String[] args) {
        File dir = new File("currentdirectory");
        findDirectory(dir);
    }

    private static void findDirectory(File parentDirectory) {
        if(foundFolder) {
            return;
        }
        File[] files = parentDirectory.listFiles();
        for (File file : files) {
            if (file.isFile()) {
                continue;
            }
            if (file.getName().equals("folderNameToFind")) {
                foundFolder = true;
                break;
            }
            if(file.isDirectory()) {
               findDirectory(file);
            }
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T07:23:43.857

分而治之？一种天真的方法：对于每个目录，您可以启动一个任务，它执行以下操作：

1.  列出每个目录
2.  如果列表包含匹配的目录，则打印并退出应用程序
3.  为每个目录启动一个任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T07:25:21.940

就像是：

```
public static final File findIt(File rootDir, String fileName) {
    File[] files = rootDir.listFiles();
    List<File> directories = new ArrayList<File>(files.length);
    for (File file : files) {
        if (file.getName().equals(fileName)) {
            return file;
        } else if (file.isDirectory()) {
            directories.add(file);
        }
    }

    for (File directory : directories) {
        File file = findIt(directory);
        if (file != null) {
            return file;
        }
    }

    return null;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-08T12:04:37.287

或者，您应该使用递归搜索文件的概念，直到找到： 这是代码：

```
String name; //to hold the search file name

public String listFolder(File dir) {
    int flag;
    File[] subDirs = dir.listFiles(new FileFilter() {
        @Override
        public boolean accept(File pathname) {
            return pathname.isDirectory();
        }
    });
    System.out.println("File of Directory: " + dir.getAbsolutePath());
    flag = Listfile(dir);
    if (flag == 0) {
        System.out.println("File Found in THe Directory: " + dir.getAbsolutePath());
        Speak("File Found in THe Directory: !!" + dir.getAbsolutePath());
        return dir.getAbsolutePath();
    }
    for (File folder : subDirs) {
        listFolder(folder);
    }
    return null;
}

private int Listfile(File dir) {
    boolean ch = false;
    File[] files = dir.listFiles();
    for (File file : files) {
        Listfile(file);
        if (file.getName().indexOf(name.toLowerCase()) != -1) {//check all in lower case
            System.out.println(name + "Found Sucessfully!!");
            ch = true;

        }
    }
    if (ch) {
        return 1;
    } else {
        return 0;
    }
} 
```

# jquery - 如何进行同步 JSONP 跨域调用

> ID：10780750
> 
> 赞同：4
> 
> 时间：2012-05-28T07:15:16.663
> 
> 标签：jquery, cross-domain

我被同步跨域调用卡住了。

在我的应用程序的早期，我们进行了域调用，所以没有问题

我早期用于拨打电话的 javascript 代码如下：

```
function EKXMLProvider(oDropdown, sDefault, sXML, sFilterUrl, fireRequestOnce)
{
    var oXMLHTTP, i, length, oData, sValue, sDisplay, sName, sMatch, oRegExp;

    if (!oDropdown)
        return;

    // XMLHTTP Object to retrieve the xml document
    oXMLHTTP = this.createXMLHttpRequest();
    this.FilterUrl = sFilterUrl;
    if (sFilterUrl != previousFilterUrl){
        oXMLHTTP.open("GET", sFilterUrl, false);
        oXMLHTTP.send(null);
        sFilterData = oXMLHTTP.responseText
        previousFilterUrl = sFilterUrl;
    }
    if(!fireRequestOnce ||(fireRequestOnce && retrievedData == null))
    {
        this.documentUrl = sXML;
        oXMLHTTP.open("GET", this.documentUrl, false);
        oXMLHTTP.send(null);

        oData = oXMLHTTP.responseXML.documentElement.childNodes;

        if(fireRequestOnce)
            retrievedData = oData;
    }
    else if(retrievedData != null)
    {
        oData = retrievedData;
    }
    this.suggestData = new Array();

    // Filter out all 2 and 3 letter codes (airport, city, country)
    oRegExp = new RegExp("\\s+\\(\\w{2,3}\\)", "gi");
    var iCount = 0    
    for (i = 0, length = oData.length; i < length; i++)
    {
        sValue = oData[i].attributes.getNamedItem("v").value;
        sDisplay = oData[i].attributes.getNamedItem("d").value;
        sName = oData[i].attributes.getNamedItem("n").value;
        //sMatch = oData[i].attributes.getNamedItem("m").value;
        sMatch = oData[i].attributes.getNamedItem("e").value;

        if (sFilterData.search(sValue) != -1){
            this.suggestData[iCount] = new EKSuggestData(sName + " (" + sValue + ")", sDisplay, sValue, sMatch, sMatch.replace(oRegExp, ""));
            iCount++;
        }
    }

    // Call the inherited class
    EKSuggestProvider.call(this, oDropdown, sDefault);
} 
```

现在，当我们将调用移动到不同的域时，我们需要进行跨域调用，我将上面的跨域代码更改如下：

```
function EKXMLProvider(oDropdown, sDefault, sXML, sFilterUrl, fireRequestOnce)
{
    var oXMLHTTP, i, length, oData, sValue, sDisplay, sName, sMatch, oRegExp;
    var qr = "&jsonpcall=true";
    if (!oDropdown)
        return;

    // XMLHTTP Object to retrieve the xml document
    oXMLHTTP = this.createXMLHttpRequest();

    this.FilterUrl = sFilterUrl;

    if (sFilterUrl != previousFilterUrl){
    //alert(sFilterUrl);
        //oXMLHTTP.open("GET", sFilterUrl, false);
        //oXMLHTTP.send(null);
        //sFilterData = oXMLHTTP.responseText

        // queue up an ajax request
        $.ajax({
        url: sFilterUrl + qr,
        type: "GET",
        cache: true,
        async:false,
        contentType: "application/javascript; charset=utf-8",
        dataType: "jsonp",
        jsonpCallback: "airport", 
        success: function(data, textStatus, jqXHR) 
        {               
            if (data.airport[0] != '')
            {
                    sFilterData = data.airport[0];
            } 
        }
        });

        previousFilterUrl = sFilterUrl;        
    }

    if(!fireRequestOnce ||(fireRequestOnce && retrievedData == null))
    {
        //alert(sXML);
        this.documentUrl = sXML;
        //oXMLHTTP.open("GET", this.documentUrl, false);
        //oXMLHTTP.send(null);

        // queue up an ajax request
          $.ajax({
            url: sXML + qr,
            type: "GET",
            async:false,
            cache: true,
            contentType: "application/javascript; charset=utf-8",
            dataType: "jsonp",
            jsonpCallback: "airportxml", 
            success: function(data, textStatus, jqXHR) 
            {                 
                  var xmlDoc = $.parseXML(data.myresult);
                oData = xmlDoc.documentElement.childNodes; 
                alert(oData);
            }
            });

        //oData = oXMLHTTP.responseXML.documentElement.childNodes;

         if(fireRequestOnce)
             retrievedData = oData;
    }
    else if(retrievedData != null)
    {
        oData = retrievedData;
    }
    this.suggestData = new Array();

      // Filter out all 2 and 3 letter codes (airport, city, country)
      oRegExp = new RegExp("\\s+\\(\\w{2,3}\\)", "gi");
      var iCount = 0    
    for (i = 0, length = oData.length; i < length; i++)
    {
        sValue = oData[i].attributes.getNamedItem("v").value;
        sDisplay = oData[i].attributes.getNamedItem("d").value;
        sName = oData[i].attributes.getNamedItem("n").value;
        //sMatch = oData[i].attributes.getNamedItem("m").value;
        sMatch = oData[i].attributes.getNamedItem("e").value;

          if (sFilterData.search(sValue) != -1){
            this.suggestData[iCount] = new EKSuggestData(sName + " (" + sValue + ")", sDisplay, sValue, sMatch, sMatch.replace(oRegExp, ""));
            iCount++;
        }
    }

    // Call the inherited class
    EKSuggestProvider.call(this, oDropdown, sDefault);
} 
```

当我在调用中输入“async:false”时，上面的 Jquery 更改工作正常，但是据我所知，我们不能在跨域中进行同步调用，如果我更改为“async:true”，调用就会开始出错在线上，`( for (i = 0, length = oData.length; i < length; i++))`因为 Odata 需要在第二个“airportxml”上填写，而且似乎两个调用都相互依赖，所以每当第一个调用发送时，它同时也用于下一个调用。

我也为此使用了ajaxQueue，但没有运气。

请建议我需要做哪些更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T23:48:58.020

正如 zi42 和[`jQuery.ajax()`文档](http://api.jquery.com/jquery.ajax/)所解释的那样，“跨域请求和`dataType: "jsonp"`请求不支持同步操作。”

这不是一件坏事，因为同步调用往往会导致糟糕的用户体验，因为它会锁定浏览器直到响应返回，所以即使使用标准 Ajax，我也会避免进行同步调用。易于实施。您想连续进行两次同步调用，这样会更糟。

在评论中建议的解决方法 zi42 - 对您自己的域进行同步 Ajax 调用，然后从您的服务器进行跨域调用 - 如果您真的希望它是同步的，您可以采用的最佳方法。

另一种明显的方法是重组你的代码，使其异步工作，方法是将你想要在每个 jsonp 请求之后执行的操作放入成功回调中。也就是说，在第一个 jsonp 请求的成功回调中，您将继续发出第二个 jsonp 请求。在第二个成功回调中，您将进行任何最终处理。如果您需要将最终结果传递给代码的另一部分，则将 Ajax 代码放在一个以回调为参数的函数中：

```
function doMyAjaxCalls(callbackFunc) {
   // make first request
   $.ajax({
      ...
      dataType: "jsonp",
      success: function(data, textStatus, jqXHR) {
         // do something with first response, then
         // make second request              
         $.ajax({
            ...
            dataType: "jsonp",
            success: function(data, textStatus, jqXHR) {
               // do something with second response, then
               // do final processing, then
               callbackFunc(dataHere);
            }
         });
      }
   });
}

doMyAjaxCalls(function(response) {
   // do something with response
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T07:23:55.900

当您使用 JSONP 时，请求不是通过 XHR 完成的，而是通过向`<script>`DOM 添加实际标签来完成的。这就是为什么你不能让它同步。这根本不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T07:26:10.693

另一种选择是阻止 UI（不阻止执行）。

使用[BlockUI 之](http://malsup.com/jquery/block/)类的东西，它会使屏幕“变灰”，直到您的通话结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-23T14:01:17.097

我是新的 JQuery 和 Ajax。当我遇到类似问题时，一个对我有用的选项是将数据类型从 JSONP 转换为 text 和 async:false。现在您只需要相应地解析文本中的响应。

```
$.ajax({
        url: url,
        timeout: 600000,
        dataType: "text",
        async:false,
        success: function (data) {
            console.log(data);
        },
        error: function (xhr, textStatus, errorThrown) {
            console.log('failed to download);
            console.log("error: " + errorThrown);
        } 
```

# mysql - MySQL如何设置root用户密码

> ID：10780751
> 
> 赞同：2
> 
> 时间：2012-05-28T07:15:16.750
> 
> 标签：mysql, root

我从官方网站下载了 MySQL 无安装包并将其安装在 Windows 7 上。

它工作得很好，但是当我运行时，`mysql.exe`我可以在没有任何密码的情况下以 root 身份使用这些工具。

我正在使用 Windows 7 32 位，并且正在使用`mysql-noinstall-5.0.96`.

我希望 root 用户有一个安全的密码。我想创建一个 root 用户或更新现有的 root 用户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T08:39:26.440

你用过的安装包我没用过。但是，您可以尝试以下方法。首先检查root用户是否存在。

执行以下代码：

```
 SELECT User
        , Host
        , Password
 FROM mysql.user
 WHERE User='root' 
```

这将返回具有 root 用户 ID 的用户列表。您应该在那里列出至少一个 root 用户。如果我是正确的，您将看到 root 列出，但密码列将为 NULL 或 BLANK。

您现在需要为 root 用户设置密码。有几种方法可以做到这一点，第一种方法是使用 SET_PASSWORD 方法。

SET_PASSWORD 方法示例：

```
 SET PASSWORD FOR 'root'@'localhost' = PASSWORD('newpwd'); 
```

另一种常用的方法是 UPDATE 方法。

UPDATE 方法的示例：

```
 UPDATE mysql.user SET Password = PASSWORD('newpwd')
 WHERE User = 'root';
 FLUSH PRIVILEGES; 
```

此方法将直接更新 mysql.user 表，您需要运行 FLUSH PRIVILEGES 以确保重置系统安全性。

如果您没有 root 用户，则需要创建它。

此链接值得阅读[https://dev.mysql.com/doc/refman/5.5/en/default-privileges.html](https://dev.mysql.com/doc/refman/5.5/en/default-privileges.html)，因为它向您展示了有关默认设置等的所有信息。

如果您需要创建新用户，请查看以下链接[http://dev.mysql.com/doc/refman/5.1/en/create-user.html](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T01:51:04.293

**MySQL如何设置root用户密码：**

1.  转到 phpmyadmin，您应该会看到用户名/密码登录。

2.  以 root 身份登录。如果您在安装 mysql 期间从未设置过 root 密码，则密码为空。如果您确实设置了一个，并且忘记了它是什么，请阅读：[http](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html) ://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html或吹走mysql并重新安装，同时注意设置密码对话框。

3.  现在您在 phpmyadmin 中以 root 身份登录。

4.  在常规设置下单击“更改密码”链接。

5.  您会看到一个密码重置弹出框，输入您的密码两次以确认并按“开始”。

6.  现在更改了 root 密码。

# jquery - 根据计数器的值淡入/淡出文本

> ID：10780756
> 
> 赞同：0
> 
> 时间：2012-05-28T07:15:59.370
> 
> 标签：jquery

我有这个标记： -

```
<textarea id="TextBox1"></textarea>
<span id="validator"></span> 
```

以及以下 jQuery：-

```
jQuery('#TextBox1').live('input', function() {
    var charLength = $(this).val().length;
    $('#validator').html(charLength + ' of 250 characters used');
    if ($(this).val().length > 250) {
        $('#validator').html('<strong>You may only have up to 250 characters !</strong>');
    } 
}); 
```

这工作正常。

我希望修改上面的 jQuery，以便`#validator`在它出现时淡入淡出，如果长度下降到 0 也会淡出（目前不这样做，消息留在屏幕上）。

**编辑：**忘了补充，我也有以下功能： -

```
jQuery.fn.fadeInOrOut = function(status) {
    return status ? this.fadeIn() : this.fadeOut();
}; 
```

我尝试了以下方法，但似乎没有任何效果：-

```
$('#validator').html(charLength + ' of 250 characters used').fadeInOrOut(!! charLength); 
```

和...

```
$('#validator').html(charLength + ' of 250 characters used');
$('#validator').fadeInOrOut(!! charLength); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:26:06.913

看到这个：http: [//jsfiddle.net/CsXU8/3/](http://jsfiddle.net/CsXU8/3/)

您需要隐藏验证器 onload（使用 css）。否则它不能淡入。

所以在你的css中添加这一行：

```
#validator {display:none} 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:27:25.457

`#validator`设置to的样式，`display:none` 然后使用它

```
jQuery('#TextBox1').live('input', function() {
    var charLength = $(this).val().length;
    $('#validator').html(charLength + ' of 250 characters used');    
    if ($(this).val().length > 250) {
        $('#validator').html('<strong>You may only have up to 250 characters !</strong>');
    }
    $('#validator').fadeIn(200);
    if(charLength == 0)
    $('#validator').fadeOut(200); 
}); 
```

# iphone - iPhone中UIWebView上的翻页动画

> ID：10780757
> 
> 赞同：1
> 
> 时间：2012-05-28T07:16:05.733
> 
> 标签：iphone, ipad, animation, uiwebview, epub

我是`iPad`开发人员的新手，

我正在使用 UIWebView`iPhone`来显示`EPUB`内容，但我想实现类似于书籍的翻页动画。

我看过很多翻页效果的demo，但都是和view not相关的`UIWebView`，例如：[see demo](https://nodeload.github.com/brow/leaves/zipball/master) 我要实现这个翻页效果。上`UIWebView`

这可能吗？还是我应该停止做梦。

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:19:47.680

看这个教程

[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:29:22.367

我认为您最好使用 quatrzcore 框架来加载 epub 内容。然后您可以通过将每个页面制作为图像来简单地实现这种翻转动画。github中的叶子是这样做的一个很好的例子

# c# - 生成http子状态码

> ID：10780758
> 
> 赞同：1
> 
> 时间：2012-05-28T07:16:10.650
> 
> 标签：c#, iis-7.5, http-status-codes

如何在 C# 中生成 http 子状态代码，出现类似 500.13 的错误？下面的代码不起作用。它显示错误 500 页面而不是错误 500.13 页面

```
Response.StatusCode = 500;
Response.SubStatusCode = 13;
Response.End(); 
```

这也是 web.config

```
<system.webServer>
   <httpErrors errorMode="Custom" existingResponse="Replace" defaultResponseMode="File"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:11:49.487

*是否*有“500.13”页面之类的东西？[文档`SubStatusCode`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.substatuscode.aspx)说

> 无论是否配置了跟踪，代码都不会作为对请求的最终响应的一部分发送。

看起来子状态代码只出现在服务器日志中。你检查过那些吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-14T06:47:24.410

如果您正在考虑向客户端发送子状态代码，那么您必须设置一个标头，如下所示：

```
Response.AddHeader("X-Substatus", 13); 
```

显然，它不会在任何地方显示为 500.13，而是在**您**生成的消息中。

# c# - 如何在 MVC3 中使用选定的 DDL 值填充我的字符串属性

> ID：10780766
> 
> 赞同：1
> 
> 时间：2012-05-28T07:16:59.193
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

* * *

我有一个具有标量字符串属性“已澄清”的实体。

澄清可以有值，“是”或“否”。

在我的 ViewModel 中，我有以下属性。

```
public SelectList ClarifiedTypes { get; set; }
public string Clarified { get; set; } 
```

在我的 Get 操作方法中，我完成了以下操作：

```
 model.ClarifiedTypes =
                new SelectList(
                new[] { new { Value = "1", Text = "Ja" }, new { Value = "2", Text = "Nej" }, },
                "Value",
                "Text"); 
```

在我看来，这就是我制作 DDL 的方式：

```
 <div class="editor-field">
                @Html.DropDownListFor(x => x.ClarifiedTypes, Model.ClarifiedTypes, "Välj alternativ")
 </div> 
```

现在我的问题是在 Post 操作方法中。

在某种程度上，我需要用从 Model.ClarifiedTypes 中选择的值填充我的 Model.Clarified ，然后执行“ entity.Clarified = Model.Clarified ”。我不知道该怎么做。

我努力了：

```
Model.Clarified = Model.ClarifiedTypes.selectedvalue.ToString();
Goalcard.Clarified = model.Clarified 
```

但我收到一个错误：

```
No parameterless constructor defined for this object. 
```

我想要实现的是用户应该能够在 DDL 中选择是或否值，然后该值应该填充到我的实体属性中。

任何帮助表示赞赏！

提前致谢

更新：

我收到此错误

o 为此对象定义的无参数构造函数。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.MissingMethodException：没有为此对象定义无参数构造函数。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:20:31.223

你应该写

```
@Html.DropDownListFor(x => x.Clarified, Model.ClarifiedTypes, "Välj alternativ") 
```

并且从下拉列表中选择的值将在`Model.Clarified`您提交表单时进入

为了使模型绑定能够工作，您的模型应该具有默认构造函数，否则 mvc 将无法创建模型并绑定它。

如果您无法在模型上恢复默认构造函数，请创建自定义模型绑定器或更好，为其创建单独的视图模型。

# javascript - 如何在java脚本中获取节点内部文本？

> ID：10780769
> 
> 赞同：7
> 
> 时间：2012-05-28T07:17:13.240
> 
> 标签：javascript, jquery, xml, dom, xpath

我有一个 XML 格式的字符串。如下所示：

```
<gt>
    <st>sample1</st>
    <tt>sample2</tt>                    
    <tt>sample3</tt>
</gt> 
```

我需要在 Java 脚本文件中获取节点值。我怎样才能获得价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:27:12.857

使用[`.parseXML()`](http://api.jquery.com/jQuery.parseXML/).

```
var xmldom = $.parseXML('<gt><st>sample1</st><tt>sample2</tt><tt>sample3</tt></gt>');

console.log($(xmldom).find('gt *')); 
```

这将找到下的所有节点`<gt>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:29:09.203

试试这个代码：

```
var xml = "<gt><st>sample1</st><tt>sample2</tt><tt>sample3</tt></gt>",
    xmlDoc = $.parseXML(xml),
    $xml = $( xmlDoc ),
    $st = $xml.find( "st" );

alert( $st.text() ); 
```

参见[js fiddle 示例](http://jsfiddle.net/3Rtnd/1/)

# android - AsyncTask 没有立即返回结果

> ID：10780775
> 
> 赞同：1
> 
> 时间：2012-05-28T07:18:04.040
> 
> 标签：android, sockets, android-asynctask

在阅读了几篇关于 ASYNCTASK 的帖子并在开发者页面上阅读之后，我想出了以下代码，并将其分配给一个按钮：

```
private class TalkToServerTask extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        String response = "";
        try {
            InetAddress serverAddr = InetAddress.getByName(params[0]);
            Socket s = new Socket(serverAddr, Integer.valueOf(params[1]));

            PrintWriter out = new PrintWriter(new BufferedWriter(
                    new OutputStreamWriter(s.getOutputStream())), true);

            // WHERE YOU ISSUE THE COMMANDS

            out.println(params[2]);
            // BufferedReader input = new BufferedReader(
            // new InputStreamReader(s.getInputStream()));

            DataInputStream dataInputStream = null;
            dataInputStream = new DataInputStream(s.getInputStream());
            st = dataInputStream.readLine().toString();
            // String st = s.readLine();
            // st = input.readLine();
            // read line(s)

            s.close();
            return st;

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        serverresponse = result;
    }

} 
```

想法是，当单击按钮时，ASyncTask 将单词“getDomains”发送到在我的服务器上运行的控制台应用程序，服务器对此进行操作并发送回一个字符串，其中包含在电子邮件服务器上创建的域列表。

我已经验证服务器正在接收命令“getdomains”，然后它又以管道分隔的域字符串进行回复。然而，问题是，我设置了一个 Toast 来弹出套接字事务的结果，而 toast 什么也没显示。如果我再次点击按钮，Toast 会显示域列表。对我来说，似乎套接字首先返回一个空的

这是按钮代码：

```
case R.id.btnDomains:
            SharedPreferences sp = PreferenceManager
                    .getDefaultSharedPreferences(this);
            IpAddress = sp.getString("ipaddress", "0.0.0.0");
            Serverport = sp.getString("tcpport", "12345");
            buttonpressed = "domains";
            // TalkToServerTask task = new TalkToServerTask();
            new TalkToServerTask().execute(IpAddress, Serverport, "getDomains");

            Intent buttonActivity = new Intent(MainActivity.this, Rules.class);
            buttonActivity.putExtra(MainActivity.DOMAINLIST, serverresponse);

            Toast.makeText(getApplicationContext(), serverresponse,
                    Toast.LENGTH_SHORT).show(); 
```

变量“serverresponse”最初显示为空，但随后显示服务器列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:29:48.447

正如 Thepoosh 提到的，AsyncTask 正在一个单独的线程上工作。

因此，当您第一次按下按钮时，线程正在执行并且尚未得到结果。

您应该做的是在 onPostExecute 方法中显示数据。此外，您应该将上下文传递给您的 AsyncTask。

```
public TalkToServerTask(Context context)  {
    this.context = context;
}

@Override
protected void onPostExecute(String result) {
    Intent buttonActivity = new Intent(context, Rules.class);
    buttonActivity.putExtra(MainActivity.DOMAINLIST, result);

    Toast.makeText(context.getApplicationContext(), result, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:28:12.720

你只需要稍微改变你的代码，

你需要移动这 3 行，

```
Intent buttonActivity = new Intent(MainActivity.this, Rules.class); 
buttonActivity.putExtra(MainActivity.DOMAINLIST, serverresponse); 
// and also the line to startActivity() as well.
Toast.makeText(getApplicationContext(), serverresponse, 
                    Toast.LENGTH_SHORT).show(); 
```

从你`Switch..case`到你写过`onPostExecute`的地方`AsyncTask``serverresponse = result`

那是因为 AsyncTask 在不同的线程中运行，而您在 Swtich 中执行...情况下，下一行代码不会在 AsyncTask 完成之前执行，所以所有依赖代码都应该写在任务的 onPostExecute .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:39:33.723

`AsynTask`在与 UI 线程不同的线程上运行。所以有2个线程并行运行。当您尝试在主 UI 线程上显示列表时，`AsynTask`仍在准备获取列表，或者可能在其自己的线程中创建套接字。因此列表数据仍然是空的。

的`postexecute`方法`Asynctask`在主 UI 线程上运行，因此在其中更新 UI 是安全且正确的。

# android - 如何在运行时在自定义视图中画线？

> ID：10780777
> 
> 赞同：4
> 
> 时间：2012-05-28T07:18:08.883
> 
> 标签：android, line, draw

我正在尝试使用触摸方法画一条线。

我希望当用户触摸特定点然后拖动手指时，应该画线。

使用`canvas.drawLine(_,_,_,_,_ );`不是画线。因为`onDraw`只工作一次。

我的主要问题是“如何在运行时不使用画线`onDraw()`？”

编辑 ：

```
public class DrawView  extends View {
    int radius=30;
    int initialX =0;
    int initialY=0;
    int finalX=0;
    int finalY=0;
    private Point currentPoint;
    private int index;
    static ArrayList<Point> pointListDrawView = new ArrayList<Point>();

    public DrawView(Context context, ArrayList<Point> pointList) {
        super(context);
        // TODO Auto-generated constructor stub
        this.setBackgroundColor(Color.WHITE);
        //pointListDrawView = pointList;

        pointListDrawView.add(pt(600,200));

        pointListDrawView.add(pt(500,200));
        pointListDrawView.add(pt(400,200));
        pointListDrawView.add(pt(400,300));

        pointListDrawView.add(pt(400,400));
        pointListDrawView.add(pt(500,400));
        pointListDrawView.add(pt(400,400));

        pointListDrawView.add(pt(400,500));
        pointListDrawView.add(pt(400,600));
        pointListDrawView.add(pt(500,600));
        pointListDrawView.add(pt(600,600));

    }
    private Point pt(int i, int j) {
        // TODO Auto-generated method stub
        Point P = new Point(i, j);
        return P ;
    }
    Paint paint= new Paint();
    Canvas universalCanvas;
    @Override 
    protected void onDraw(final Canvas canvas) {

            paint.setColor(Color.GREEN);
            paint.setStrokeWidth(10);
            for(int i=0; i<pointListDrawView.size();i++){
            canvas.drawCircle(pointListDrawView.get(i).x, pointListDrawView.get(i).y, 15, paint);
            }
            universalCanvas = canvas;
    //      drawLines(canvas);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub

        int i =0;

        switch (event.getAction()){

        case MotionEvent.ACTION_DOWN:
                if(((event.getX()>pointListDrawView.get(i).x-radius) && (event.getX()<pointListDrawView.get(i).x+radius) && (event.getY()>pointListDrawView.get(i).y-radius) && (event.getY()<pointListDrawView.get(i).y+radius)))

                {
                    Log.d("touch", "touched correct point");
                    initialX=pointListDrawView.get(i).x;
                    initialY=pointListDrawView.get(i).y;

                } 

                else{
                    Log.d("touch", "touch discarded");
                return false;
                }
        break;

        case MotionEvent.ACTION_MOVE:
                universalCanvas.drawLine(initialX, initialY, event.getX(), event.getY(), paint);

                break;

        case MotionEvent.ACTION_UP:
                if(((event.getX()>pointListDrawView.get(i+1).x-radius) && (event.getX()<pointListDrawView.get(i+1).x+radius) && (event.getY()>pointListDrawView.get(i+1).y-radius) && (event.getY()<pointListDrawView.get(i+1).y+radius)))
                {
                    finalX=pointListDrawView.get(i+1).x;
                    finalY=pointListDrawView.get(i+1).y;
                    universalCanvas.drawLine(initialX,initialY, finalX,finalY, paint);
                    Log.d("touch", "line drawn");
                    return true;
                }
                else
                {
                    Log.d("touch", "correct point touched and discarded");
                    return false;
                }

        default:
            break;

        }
        invalidate();
        return true;

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T08:01:57.707

I just write this code for you. Check if it helps.

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.PointF;
import android.view.MotionEvent;
import android.view.View;

public class TestView extends View
{

    private Paint paint;
    private PointF startPoint, endPoint;
    private boolean isDrawing;

    public TestView(Context context)
    {
        super(context);
        init();
    }

    private void init()
    {
        paint = new Paint();
        paint.setColor(Color.RED);
        paint.setStyle(Style.STROKE);
        paint.setStrokeWidth(2);
        paint.setAntiAlias(true);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        if(isDrawing)
        {
            canvas.drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y, paint);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        switch (event.getAction())
        {
            case MotionEvent.ACTION_DOWN:
                startPoint = new PointF(event.getX(), event.getY());
                endPoint = new PointF();
                isDrawing = true;
                break;
            case MotionEvent.ACTION_MOVE:
                if(isDrawing)
                {
                    endPoint.x = event.getX();
                    endPoint.y = event.getY();
                    invalidate();
                }
                break;
            case MotionEvent.ACTION_UP:
                if(isDrawing)
                {
                    endPoint.x = event.getX();
                    endPoint.y = event.getY();
                    isDrawing = false;
                    invalidate();
                }
                break;
            default:
                break;
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:54:07.883

有两种解决方法：

1.  坏而简单（这是您问题的答案：“如何在运行时绘制一条线而不使用 onDraw()？”） - 子类 ImageView 并在位图上绘制然后更新 ImageView
2.  好，还有更多的工作 - 在 onTouchEvent 中存储触摸历史记录不要在那里绘制，我的意思是存储每个 ACTION_DOWN ACTION_MOVE（请记住多点触控，因此将触摸的 id 存储在 ACTION_DOWN 并在 ACTION_MOVE/ACTION_UP 中验证它）！仅对 DOWN UP 和 MOVE 调用无效。在方法 onDraw 中绘制这段历史。在编辑中，您已经迈出了很好的一步，但您确实在那里绘图。

# netbeans-7 - 如何为我自己的模块创建文件（bundle.properties、html）的语言环境 jar 文件

> ID：10780778
> 
> 赞同：1
> 
> 时间：2012-05-28T07:18:25.700
> 
> 标签：netbeans-7, language-translation

他们的任何构建脚本都可以从 netbean 模块中提取所有不同的语言环境包文件并构建语言环境 jar 文件并复制到语言环境文件夹。

# joomla - 谁能告诉我这里使用的模块

> ID：10780780
> 
> 赞同：0
> 
> 时间：2012-05-28T07:18:36.760
> 
> 标签：joomla, module, joomla-template

谁能告诉我这里使用的模块..在右侧边栏的这个站点中。当我们向下滚动页面时，它会在悬停时展开并浮动。[http://www.annualreport2011.wartsila.com/](http://www.annualreport2011.wartsila.com/)

我想与我的 joomla 模板一起使用。我搜索但没有运气..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:27:22.640

你可以试试这个模块[http://www.marcofolio.net/joomla/mfslidebar_sliding_sidebar_for_joomla_modules.html](http://www.marcofolio.net/joomla/mfslidebar_sliding_sidebar_for_joomla_modules.html)，虽然我没有用过这个。您还可以从所有这些[http://extensions.joomla.org/extensions/style-a-design/modules-panel/page2](http://extensions.joomla.org/extensions/style-a-design/modules-panel/page2.There)中检查一个模块。没有找到您可以通过 jquery 折叠菜单或 div 执行此操作的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:36:02.337

这不是 Joomla！网站 这是一个[Crasmanager CMS](http://www.crasman.fi/en/)网站。

# php - COUNT (*) 语句提示

> ID：10780787
> 
> 赞同：-3
> 
> 时间：2012-05-28T07:19:33.090
> 
> 标签：php, mysql

我有一张表，其中包括以下字段：
`country, price and units`
我试图用它`SELECT COUNT(*)`来获取每个国家/地区的总和，售出多少单位。
MySQL 的正确说法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:20:16.390

```
SELECT  country, SUM(units)
FROM    mytable
GROUP BY country 
```

# google-maps - 无法获取谷歌地图边界

> ID：10780799
> 
> 赞同：1
> 
> 时间：2012-05-28T07:20:44.180
> 
> 标签：google-maps, jquery-plugins

我正在使用[geocomplete](http://ubilabs.github.com/geocomplete/)来加载地图。我的问题是，有没有办法得到地图的界限。我以前用

```
var bounds = results[0].geometry.bounds; 
```

要获得界限在这里不起作用，我的代码如下

```
 $("#textfield").geocomplete({
              map: ".map_canvas",
              details: "form",
              types: ["geocode", "establishment"]
            })

          .bind("geocode:result", function(event, result){
            alert(result.geometry.bounds);
                alert(result.bounds);

          }) 
```

两个警报都显示“未定义”作为值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:09:32.543

要获取地图，您可以执行以下操作：

```
var map = $("#textfield").geocomplete("map") 
```

那么你应该可以使用

```
map.getBounds() 
```

或任何其他内置的谷歌地图 api 方法。

**编辑：**在下载的脚本中找到了这个，有一个例子'Api'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:03:37.950

您可以使用：`Map.getBounds()`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#Map)。您的问题中没有足够的代码来说明`result`原因`null`；如果你可以包含一些额外的代码、一个链接，或者可能设置一个[jsFiddle](http://jsfiddle.net/)，它会让每个人都更深入地了解。

# email - 找不到蛋糕php邮件功能助手

> ID：10780802
> 
> 赞同：2
> 
> 时间：2012-05-28T07:21:09.443
> 
> 标签：email, cakephp, helpers, view-helpers

3 我在发送邮件时遇到错误。下面我提到了我的代码。

在控制器文件中 var $components = array('RequestHandler', 'Filter','Image','Email','Captcha','RandomHelper');

然后在我的函数中我写了 $this->Email->from = $from;

```
$this->Email->subject = 'Approval Form: ';

$this->Email->delivery = 'debug';

$this->Email->template = 'adminemail';

$this->Email->sendAs = 'html';

$this->Email->send(); 
```

我不想使用 SMTP 发送邮件。当我运行此代码时，错误是缺少帮助文件，它告诉我“错误：无法找到或不存在帮助文件 app/views/helpers/email.php。” 任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:57:48.027

电子邮件不是助手，它是 1.3 中的一个组件，在 2.0 中有 CakeEmail

您不在组件属性中加载帮助程序，请使用 public $helpers = array('MyHelper');

Helpers 在 $helpers 属性中加载时没有“Helper”后缀。

看起来您不知道 MVC 是什么，也不知道帮助程序和组件之间的区别是什么。我建议您阅读有关 MVC 和 CakePHPs 不同部分的信息，例如组件和助手之间的区别以及行为之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:17:39.750

如果您使用的是这个版本的 CakePHP，请参考关于[CakeMail的 CakePHP 2.x 文档或关于](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)[电子邮件核心组件](http://book.cakephp.org/1.3/en/view/1283/Email)的 CakePHP 1.3 文档。

(Cake)Email 从来都不是 Helper，[Helper](http://book.cakephp.org/2.0/en/views/helpers.html)是[Views](http://book.cakephp.org/2.0/en/views.html)的，[Component](http://book.cakephp.org/2.0/en/controllers/components.html)是[Controllers](http://book.cakephp.org/2.0/en/controllers.html)的，[Behavior](http://book.cakephp.org/2.0/en/models/behaviors.html)是[Models](http://book.cakephp.org/2.0/en/models.html)的。

它们允许您将部分逻辑外部化以在其他地方重用它。

在[Views](http://book.cakephp.org/2.0/en/views.html)中，您还可以将[Elements](http://book.cakephp.org/2.0/en/views.html#elements)用于您经常使用的元素。

# java - 如何从 JTable 中获取选定的 RadioButton

> ID：10780807
> 
> 赞同：1
> 
> 时间：2012-05-28T07:21:35.053
> 
> 标签：java, swing, jtable, jradiobutton, buttongroup

我正在处理程序，我需要从 Jtable 中获取选定的单选按钮

我找到了一个我正在研究的例子

有课

第一个：

```
 import java.awt.Component;
  import java.awt.event.ItemEvent;
  import java.awt.event.ItemListener;

 import javax.swing.DefaultCellEditor;
 import javax.swing.JCheckBox;
 import javax.swing.JRadioButton;
 import javax.swing.JTable;
 import javax.swing.table.TableCellRenderer;

 class RadioButtonRenderer implements TableCellRenderer {
   public Component getTableCellRendererComponent(JTable table, Object value,
       boolean isSelected, boolean hasFocus, int row, int column) {
     if (value == null)
       return null;
     return (Component) value;
   }
 }

 class RadioButtonEditor extends DefaultCellEditor implements ItemListener {
   /**
     * 
      */
     private static final long serialVersionUID = 1L;
 private JRadioButton button;

   public RadioButtonEditor(JCheckBox checkBox) {
     super(checkBox);
   }

   public Component getTableCellEditorComponent(JTable table, Object value,
       boolean isSelected, int row, int column) {
     if (value == null)
       return null;
     button = (JRadioButton) value;
     button.addItemListener(this);
          return (Component) value;
   }

   public Object getCellEditorValue() {
     button.removeItemListener(this);
     return button;
   }

   public void itemStateChanged(ItemEvent e) {
     super.fireEditingStopped();
   }
 } 
```

第二类是：

```
 package TP2;
     import java.awt.event.ActionEvent;
              import java.awt.event.ActionListener;
     import java.awt.event.ItemEvent;

     import javax.swing.ButtonGroup;
     import javax.swing.ButtonModel;
     import javax.swing.JButton;
     import javax.swing.JCheckBox;
     import javax.swing.JFrame;
     import javax.swing.JPanel;
     import javax.swing.JRadioButton;
     import javax.swing.JScrollPane;
     import javax.swing.JTable;
     import javax.swing.JToggleButton;
     import javax.swing.event.TableModelEvent;
     import javax.swing.table.DefaultTableModel;

     import net.miginfocom.swing.MigLayout;

     public class tablesDesEtudiants extends JFrame {

           public tablesDesEtudiants(Object[][] objt) {
             super("List des etudiants");

           //  UIDefaults ui = UIManager.getLookAndFeel().getDefaults();

            // UIManager.put("RadioButton.focus", ui.getColor("control"));

             DefaultTableModel dm = new DefaultTableModel();
             dm.setDataVector(objt , new Object[]                           {"Nom","Prénom","Année","Succs","Type","Select"});

             JTable table = new JTable(dm) {
               public void tableChanged(TableModelEvent e) {
                 super.tableChanged(e);
                 repaint();
      }
    };
    final ButtonGroup group1 = new ButtonGroup();
    for(int i =0 ; i<objt.length;i++){
    if(objt[i][1]!=null)

        group1.add((JRadioButton) dm.getValueAt(i, 5));
    }
   // System.out.println(objt.length);

    table.getColumn("Select").setCellRenderer(new RadioButtonRenderer());
    table.getColumn("Select").setCellRenderer(new RadioButtonRenderer());
    table.getColumn("Select").setCellRenderer(new RadioButtonRenderer());
    table.getColumn("Select").setCellRenderer(new RadioButtonRenderer());
    table.getColumn("Select").setCellRenderer(new RadioButtonRenderer());
    table.getColumn("Select").setCellEditor(new RadioButtonEditor(new JCheckBox()));

   JScrollPane scroll = new JScrollPane(table);

   JButton bView = new JButton("View");
   bView.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            ButtonModel choix   = group1.getSelection();
            if (choix != null) {

            System.out.println( choix.getActionCommand());
                            }
            else System.out.println("nullll");
        }
    });

   JPanel  pp =new JPanel();
   MigLayout layout = new MigLayout(

          "",           // Layout Constraints
          "[][]20[]",   // Column constraints
          "[]20[]");    // Row constraint

      pp.setLayout(layout);
      pp.add(scroll,"cell 1 2");

      pp.add(bView,"cell 2 3");
   getContentPane().add(pp);

    setSize(600, 400);
    setVisible(true);

  }

 /* public static void main(String[] args) {
    JRadioButtonTableExample frame = new JRadioButtonTableExample();
    frame.addWindowListener(new WindowAdapter() {
      public void windowClosing(WindowEvent e) {
        System.exit(0);
      }
    });
  }*/
} 
```

在第二堂课中，我试图在 ButtonGroup 上添加所有单选按钮，如下所示：

```
 final ButtonGroup group1 = new ButtonGroup();
    for(int i =0 ; i<objt.length;i++){
    if(objt[i][1]!=null)

        group1.add((JRadioButton) dm.getValueAt(i, 5));
    } 
```

我的问题是我无法选择 RadioButton ：

```
 ButtonModel choix  = group1.getSelection();
            if (choix != null) {

            System.out.println( choix.getActionCommand());
                            }
            else System.out.println("nullll");
        } 
```

我总是得到nullll

任何帮助请！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:25:00.253

阅读我对[这个问题](https://stackoverflow.com/questions/10780506/jtable-containing-all-components/10780613#10780613)的回答。您不应该将组件存储在表中。存储布尔值。然后，您应该配置一个渲染器以将布尔值显示为单选按钮，并配置一个编辑器来更改选中单元格的值以及先前选中的单元格的值。并了解渲染器的相同实例用于渲染/编辑同一类的*所有单元格。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T07:24:00.347

*   我认为这并不容易，对于 ButtonGroup 中`TableCellEditor`的[JRadioButtons](https://stackoverflow.com/a/10616768/714968)

*   `JCheckBox`尽可能使用

*   使用`JComboBox`as`TableCellEditor`而不是`JRadioButtons`在`ButtonGroup`if 是可能的，对于 TableCellRenderer 你可以`JRadioButtons`在`ButtonGroup`

# java - 记录球衣的 JSON 请求和响应

> ID：10780808
> 
> 赞同：11
> 
> 时间：2012-05-28T07:21:38.680
> 
> 标签：java, jersey, aop, jax-rs, aspectj

我有一个 JAVA Web 应用程序，它公开了 RESTful api。我的要求是记录服务器处理的所有 JSON 请求和响应。是否有类似`-Dcom.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.dump=true`JAX-WS 的参数？

我也在探索 AOP 方法。我应该在 AOP 模式中添加什么方法签名？

我将 Tomcat 服务器和球衣用于 JAX-RS 实现。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T07:46:20.243

使用[LoggingFilter](http://jersey.java.net/nonav/apidocs/latest/jersey/index.html?com/sun/jersey/api/client/filter/LoggingFilter.html)。只需将以下内容添加到您的 web.xml 中：

```
<init-param>
  <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
  <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
</init-param>
<init-param>
  <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
  <param-value>com.sun.jersey.api.container.filter.LoggingFilter</param-value>
</init-param> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T21:53:31.057

```
<!-- Enable Jersey tracing support in Glassfish -->
<init-param>
    <param-name>jersey.config.server.provider.classnames</param-name>
    <param-value>org.glassfish.jersey.filter.LoggingFilter</param-value>
</init-param> 
```

这对我有用（泽西 2.x）

# java - Android发送socket：这两种初始化socket的方法有什么区别？

> ID：10780815
> 
> 赞同：1
> 
> 时间：2012-05-28T07:22:30.253
> 
> 标签：java, android, sockets

方法一：

```
InetAddress addr = InetAddress.getByName("192.168.0.101");
int port = 18250;
Socket socket = new Socket(addr, port); 
```

方法二：

```
Socket socket = new Socket("192.168.0.101",18250); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:33:16.117

他们是一样的：

java源代码：

```
public
class Socket {

...

    public Socket(String host, int port)
    throws UnknownHostException, IOException
    {
    this(host != null ? new InetSocketAddress(host, port) :
         new InetSocketAddress(InetAddress.getByName(null), port),
         (SocketAddress) null, true);
    }

    public Socket(InetAddress address, int port) throws IOException {
    this(address != null ? new InetSocketAddress(address, port) : null, 
         (SocketAddress) null, true);
    }

...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:32:50.873

对于 HelloWorld 风格的项目，它们之间没有太大区别。在较大的项目中，使用方法 1 可能有一些优势。如果您已经有一个 InetAddress 对象，那么通过使用 Socket(InetAddress, int) 构造函数可以避免让 Socket 类检查字符串是否是正确的 Internet 地址。

# java - Android 应用程序中的 UnknownHostException 警告

> ID：10780816
> 
> 赞同：0
> 
> 时间：2012-05-28T07:22:46.073
> 
> 标签：java, android, android-layout, android-widget

我正在开发一个使用 Web 服务并调用 API 来发送请求和获取响应的 android 应用程序。

我的应用程序以前运行良好，但现在当我开始我的应用程序并尝试登录（应用程序的第一页）时，这显示以下警告和异常

我的应用程序代码行是：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("requestXml", envelope1);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        Object response = null;
        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            response = envelope.getResponse();
            authenticationLoginResponse = response.toString();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

我在以下行收到警告：

androidHttpTransport.call(SOAP_ACTION, 信封);

完整的警告日志是：

```
05-28 17:09:06.819: W/System.err(1771): java.net.UnknownHostException: capsconnect.phasestreamtest.com
05-28 17:09:06.822: W/System.err(1771):     at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
05-28 17:09:06.832: W/System.err(1771):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
05-28 17:09:06.832: W/System.err(1771):     at java.net.InetAddress.getAllByName(InetAddress.java:256)
05-28 17:09:06.832: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
05-28 17:09:06.832: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
05-28 17:09:06.832: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
05-28 17:09:06.842: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
05-28 17:09:06.842: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
05-28 17:09:06.853: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
05-28 17:09:06.853: W/System.err(1771):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
05-28 17:09:06.853: W/System.err(1771):     at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
05-28 17:09:06.853: W/System.err(1771):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:152)
05-28 17:09:06.853: W/System.err(1771):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
05-28 17:09:06.853: W/System.err(1771):     at commerce.app.lib.login.LoginScreen.performBackgroundProcess(LoginScreen.java:273)
05-28 17:09:06.862: W/System.err(1771):     at commerce.app.lib.login.LoginScreen.access$2(LoginScreen.java:233)
05-28 17:09:06.862: W/System.err(1771):     at commerce.app.lib.login.LoginScreen$1$1.run(LoginScreen.java:219)
05-28 17:09:06.862: W/System.err(1771): java.lang.NullPointerException
05-28 17:09:06.862: W/System.err(1771):     at java.io.StringReader.<init>(StringReader.java:46)
05-28 17:09:06.872: W/System.err(1771):     at commerce.app.lib.login.LoginScreen.performBackgroundProcess(LoginScreen.java:285)
05-28 17:09:06.872: W/System.err(1771):     at commerce.app.lib.login.LoginScreen.access$2(LoginScreen.java:233)
05-28 17:09:06.872: W/System.err(1771):     at commerce.app.lib.login.LoginScreen$1$1.run(LoginScreen.java:219) 
```

几天前该项目运行良好时，任何人都可以提出为什么现在出现此错误的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:26:02.530

`UnknownHostException` 抛出 表示无法确定主机的 IP 地址。因此，请检查连接问题或者您是否可以访问服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:31:10.163

看起来你的程序崩溃的原因不是“UnknownHostException”，而是你调用 Log.e() 方法的方式。双击其中一条红线：

> AndroidRuntime(11689): 在 android.util.Log.e(Log.java:230) 05-16 01:32:56.280:
> 
> AndroidRuntime(11689)：在 commerce.app.lib.login.LoginScreen$1$1.run

并查看您的 IDE（Eclipse？）是否会将您带到代码中的行。那些是导致问题的。否则，只需检查所有输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:30:31.757

检查这些：

也许您的代码中的 Web 服务地址已更改，或者 Web 服务主机现在已关闭，或者您在设备上设置了任何代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:31:05.553

你必须是硬编码服务器IP。如果您使用 LAN 连接通过路由器进行测试，请再次检查服务器 IP 并在您的应用程序中更改它。当通过路由器连接时，IP 会定期更改。这可能是导致 unKnownHostException 的原因之一

# ruby - 具有无关访问的哈希

> ID：10780817
> 
> 赞同：31
> 
> 时间：2012-05-28T07:22:52.050
> 
> 标签：ruby

我有一个非 Rails 项目，我在其中从 YAML 文件加载一些设置：

```
config = YAML::load(File.open("#{LOG_ROOT}/config/database.yml")) 
```

我只能访问这个哈希值`config["host"]`，`config["username"]`等等。

我想要冷漠的访问，所以我可以同时使用`:host`和`"host"`。

原因是，我将这个哈希传递给的项目中的一个 gem 似乎正在使用符号访问它，但它目前失败了。

在这种情况下，创建具有无关访问权限的哈希的最佳方法是什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-28T09:01:10.053

通过安装 Active Support gem，您只会损失几 kB 的磁盘空间。在您的代码中，您只需要所需的功能：

```
require 'active_support/core_ext/hash/indifferent_access' 
```

这样一来，您就可以确保您没有得到任何其他东西来弄乱您的命名空间。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-28T14:51:52.603

让配置哈希返回键的字符串化版本的值：

```
config = {"host"=>"value1", "Username"=>"Tom"}
config.default_proc = proc{|h, k| h.key?(k.to_s) ? h[k.to_s] : nil}
p config[:host] #=> "value1" 
```

每次在`default_proc`散列中找不到键时运行。请注意，这只是冷漠访问的一半：如果密钥存在，`config["host"]`将导致 nil 。`:host`如果这也必须工作：

```
config.default_proc = proc do |h, k|
   case k
     when String then sym = k.to_sym; h[sym] if h.key?(sym)
     when Symbol then str = k.to_s; h[str] if h.key?(str)
   end
end 
```

请参阅有关此方法限制的评论（tltr：单独的值`:a`和`'a'`是可能的，不考虑`Hash.delete`和其他）。

# php - cakephp 2.0 和翻译行为

> ID：10780819
> 
> 赞同：1
> 
> 时间：2012-05-28T07:23:06.757
> 
> 标签：php, cakephp, translation, cakephp-2.0

我有一个名为“Country”的模型，数据库表名为“countries”。

国家模式如下：

```
<?
class Country extends CountryAppModel {     
    public $name = 'Country';
    public $actsAs = array(
        'Translate' => array('title', 'description')
    );
}
?> 
```

引用 CakeBook 2.0 (http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html)

> 在为 TranslateBehavior 定义要翻译的字段时，请务必从已翻译模型的架构中省略这些字段。如果您保留这些字段，则在使用回退语言环境检索数据时可能会出现问题。

所以我从“国家”表中删除了标题和描述字段。当然，我有命令行创建的 i18n 表（确保我有更新的版本）

当我尝试使用以下代码保存时，没有任何反应，没有保存在数据库中：

```
$this->Country->locale = $_POST['language'];
$this->Country->create();
$this->Country->save($this->request->data) 
```

任何想法我做错了什么？

我通过了“模型”类的 save() 方法，它没有执行任何更新/创建命令，因为除了 primaryKey (id) 之外，“国家”表的架构中没有其他字段 - 不应该save() 也适用于可翻译字段？

# linux - 停止 BufferOverflow - NASM 输入

> ID：10780820
> 
> 赞同：0
> 
> 时间：2012-05-28T07:23:13.357
> 
> 标签：linux, assembly, input, nasm, buffer-overflow

我正在尝试使用 NASM 向 Linux 中的终端编写一些基本的输入/输出代码。我想允许用户输入数据，但我的问题是如果用户输入的数据多于缓冲区长度，我会遇到缓冲区溢出。我正在尝试检查输入的数据是否大于缓冲区长度，如果是，则要求用户再次“输入数据：”。

这是我当前的代码：

```
SECTION .bss
        BUFFLENGTH equ 8 ;The max length of our Buffer
        Buff: resb BUFFLENGTH ;The buffer itself 
SECTION .data
 Prompt: db "Enter Data: ",10
 PromptLen: equ $-Prompt
SECTION .text 

    global _start
_start:

DisplayPrompt:
       mov eax, 4
       mov ebx, 1
       mov ecx, Prompt 
       mov edx, PromptLen
       int 80h
Read:
       mov eax, 3 ;Specify sys_read call
       mov ebx, 0; Specify File Descriptor 0 : STDIN (Default to keyboard input)
       mov ecx, Buff; pass offset of the buffer to read to
       mov edx, BUFFLENGTH ; Tell sys_read to read BUFFLEN 
       int 80h ;make kernel call
       mov esi, eax
       cmp byte[ecx+esi], BUFFLENGTH ;compare the returned bufferSize to BUFFLENGTH
       jnbe DisplayPrompt ;Jump If Not Below or Equal To BUFFLENGTH

Write:
       mov edx, eax ;grab the size of the buffer that was used (charachter length)
       mov eax, 4 ;specify sys_write
       mov ebx, 1 ; specify File Descriptor 1: STDOUT 
       mov ecx, Buff ;pass the offset of the Buffer 
       int 80h ;make kernel call

Exit:
       mov eax, 1 ; Code for Exit syscall
       mov ebx, 0 ; Exit code { = 0; Program ran OK }
       int 80h ; make kernel call 
```

我相信我的错误在于我如何比较数据，这里：

```
 mov esi, eax
       cmp byte[ecx+esi], BUFFLENGTH ;compare the returned bufferSize to BUFFLENGTH
       jnbe DisplayPrompt ;Jump If Not Below or Equal To BUFFLENGTH 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:03:33.443

您在这里所说的“缓冲区溢出”不是缓冲区溢出的常见定义。如果我理解正确，您在这种情况下考虑的“缓冲区溢出”是“数据溢出到终端而不是限制用户输入的数据不超过缓冲区长度”。但实际上，用户不能输入超过缓冲区长度的数据。发生的事情是您的 read() 从标准输入读取 8 个字节，而剩余的字节“仍然”在标准输入中，当您的程序退出时 bash 会从其中读取，并且“\n”处的“\n”使其尝试执行“溢出字节”就像你打电话给他们一样。没有理由改变它，因为它根本不是安全问题。用户不能以这种方式以程序所有者的身份执行命令。如果你真的想摆脱这个，你可以使用 malloc() 来分配一个“足够大”的缓冲区。这样，无论用户输入多少，缓冲区都会足够大（取决于您拥有多少 RAM 等），您将不会再看到那些“溢出字节”。

# asp.net - 如何从数组或数组列表中添加、删除和检索值？

> ID：10780823
> 
> 赞同：2
> 
> 时间：2012-05-28T07:23:23.030
> 
> 标签：asp.net

我想在数组中动态添加元素。大小不固定。我应该使用arraylist还是数组？数据类型相同。我从类型为int的数据库中添加值。那么我应该使用哪种数据类型？如何添加和删除来自数组或数组列表的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:25:43.930

使用 Generic List 而不是 ArrayList 来避免类型转换的开销。

[见样品](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

# c# - c# windows应用程序中如何查看asp网页

> ID：10780828
> 
> 赞同：0
> 
> 时间：2012-05-28T07:23:54.700
> 
> 标签：c#, asp.net, windows, integration, localhost

我正在开发一个 Windows 应用程序，我需要加载一些本地 asp .net 网页。
我怎么能这样做？实际上我需要一个与我的应用程序一起使用的本地服务器应用程序，然后我可以在我的 Windows 应用程序中运行 asp .net 网页。
坦克为您的帮助
我可以使用 asp .net 开发服务器作为组件来处理我的应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:46:57.897

[IIS Express](http://learn.iis.net/page.aspx/868/iis-express-overview/)是一个独立的 IIS 实例，可以部署给用户（有一个 .MSI）。

根据链接页面，IIS Express 是一个围绕“可托管 Web 核心”的包装器 - 听起来它可能更符合您的需求 - 但我根本没有对此进行调查，因此无法评论所涉及的内容在使用它。

* * *

顺便说一句，我不得不同意这是一个有点奇怪的要求——你可能想澄清一下。

# php - 单击下拉菜单中的项目时自动获取文本框中的值

> ID：10780831
> 
> 赞同：-3
> 
> 时间：2012-05-28T07:24:03.763
> 
> 标签：php, javascript

我有一个文本框和下拉列表框。在下拉列表框中，我有根据设备具有不同价格的设备列表。用户将设备用于租用天数。现在我使用 php 函数计算租金的价格。

现在我想要的是，通过使用 php.ini 在 html 表单中调用该函数，在单击下拉列表框中的相应项目时在文本框中显示该受尊重的计算值。

谁能帮我用这个例子解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:36:28.510

尚未对其进行测试，并且由于您没有提供更多信息，因此这是基于 php 作为源文件，当使用 2 个参数调用时，它会回显价格：

```
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
        $("#items").change(function() {
            $.ajax({
                url: "http://url/data.php",
                data: {
                    selectedItem: $("#items").val(),
                    days: $("#days").val()
                },
                success: function() {
                    $("#total").html(data)
                }
            }
        }
    </script>
</head>
<body>
<form>
    <input id="days" value="1" />
    <select id="items">
        <option value="1">Object 1</option>
        <option value="2">Object 2</option>
    </select>

    Calculated costs: <span id="total"></span>
</form>
</body> 
```

# cakephp - 根据某些条件在cake php中加载组件

> ID：10780833
> 
> 赞同：0
> 
> 时间：2012-05-28T07:24:46.427
> 
> 标签：cakephp, cakephp-1.3

在 app_controller.php

```
 var $components = array('Session', 'Component1', 'Component2'); 
```

我想避免加载所有组件时`$this->params['prefix'] == admin`，仅

```
var $components = array('Session'); 
```

那里够了。。

怎么做 ？

是否可以不为特定控制器方法加载组件

```
class PagesController extends AppController
{

    function search()
    {
    // avoid loading  of components ('Component1' and  'Component2') here which is loaded in app_controller  '$components' array
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:44:48.017

然后您可以覆盖构造函数（如果信息很快就可用）：

```
public function __construct(CakeRequest $request = null, CakeResponse $response = null) {
    if ($this->params['prefix'] == 'admin') {
        $this->components[] = 'Session';
    }
    parent::__construct($request, $response);
} 
```

但是 IMO 只为管理员包含会话组件有点愚蠢（因为编程的开销远远超出了您通过它获得的收益）

PS：还有手动（可能更清洁）的方式：

```
public function beforeFilter(){
    parent::beforeFilter();
    if ($this->params['prefix'] == 'admin') {
        $this->Session = $this->Components->load('Session');
    }
} 
```

# jquery - jQuery获取对象的标识符？

> ID：10780840
> 
> 赞同：0
> 
> 时间：2012-05-28T07:25:00.923
> 
> 标签：jquery, jquery-plugins

我试图让一个工具提示在悬停时保持不变，但我不知道任何可以识别它的东西。有什么方法可以找到任何标识符，以便我可以在 mouseout 而不是链接的 mouseout 时关闭它？

它与我的另一个问题有关（关于工具提示更具体）：[如何使工具提示保持不变，以便可以单击其中的链接](https://stackoverflow.com/questions/10735301/how-to-make-tooltipsy-staying-so-a-link-in-it-can-be-clicked/)

**编辑**：我正在使用[Tooltipsy](http://tooltipsy.com/)创建工具提示（但如果有人可以建议另一个可以为我执行此操作的 jQuery 插件，我可能会更改。

我想要的是，如果我有鼠标，工具提示会保留，而不是当鼠标离开调用工具提示的元素时它会消失。工具提示应包含可点击的链接。

js：

```
# NOTE: The hide property is only for me to make it stay longer, so that the links are clickable. It is not an accepted soloution.
$('.order_tooltip').tooltipsy({
    delay: 0,
    offset: [0,-1],
    hide: function (e, $el) { 
        window.setTimeout(
            function() {
                $el.hide();
            },
            1000
        );
    }
}); 
```

html:

```
<a href="/order/ordernr/{{ item.order_nr }}"
    title="Tooltip content" 
    class="order_tooltip" 
>link</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:59:34.293

我没能得到标识符，迫不及待，所以我改用另一个工具提示插件，称为[simpletip](http://craigsworks.com/projects/simpletip/)，它提供了我需要的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:51:19.567

```
<a onmouseover="youtipsyobject().show();" onmouseout="youtipsyobject().hide()">link</a> 
```

并默认隐藏。

# java - 相互依赖的 Java 类

> ID：10780853
> 
> 赞同：3
> 
> 时间：2012-05-28T07:25:50.347
> 
> 标签：java, oop

我正在学习 Play 框架。我对代表仓库-库存商品-产品数据模型的三个类感到困惑：

```
public class Product {
  public Long ean; 
  public String name;
  public String description;
  public String toString() {
    return name;
  }
}

public class Warehouse {
  public String name;
  public List<StockItem> stock = new ArrayList<>(); 
  public String toString() {
    return name;
  }
}

public class StockItem {
  public Warehouse warehouse; 
  public Product product; 
  public Long quantity;
  public String toString() {
    return String.format("%d %s", quantity, product);
  }
} 
```

类*Warehouse*依赖于类*StockItem*。类*StockItem*取决于类*Product*和*Warehouse*。

如何理解这种关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:31:35.257

`Warehouse`是一个容器类，它有很多项目 -`StockItem`的。所以`Warehouse`知道`StockItem`并且每个人都`StockItem`知道`Warehouse`它属于什么。
就像是：

```
Warehouse warehouse = new Warehouse();
StockItem item1 = new StockItem();
item1.warehouse = warehouse;
warehouse.stock.add(item1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:31:30.680

仓库包含许多 StockItems。虽然没有检查，但 StockItem 只能属于一个 Warehouse。（仓库 1 --- 许多 StockItem）

StockItem 是特定产品（不能同时是 2 种类型！！！）。（StockItem many -- 1 Product：请注意，同一产品可以有很多 StockItem 对象）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:32:02.833

> ***类 Warehouse 依赖于类 StockItem。StockItem 类取决于 Product 和 Warehouse 类。***

`Warehouse`提及的实施`StockItem`：

```
public class Warehouse {
    ...
    public List<StockItem> stock = new ArrayList<>();
    ...
} 
```

因此它*取决于*那个类。没有`StockItem`您将无法编译和使用`Warehouse`. 关系就是这样理解的。

`StockItem`vs`Product`和 也是如此`Warehouse`：

```
public class StockItem {
    ...
    public Warehouse warehouse;
    public Product product; 
    ...
} 
```

没有`Product`您将无法编译和使用`StockItem`.

# string - 使用 在名单上 不更新模型值

> ID：10780858
> 
> 赞同：9
> 
> 时间：2012-05-28T07:26:19.333
> 
> 标签：string, list, jsf, jsf-2, uirepeat

这是场景（简化）：

有一个`mrBean`带有成员和适当的 getter/setter 的 bean（称为它）：

```
private List<String> rootContext;

public void addContextItem() {
    rootContext.add("");
} 
```

JSF 代码：

```
<h:form id="a_form">
            <ui:repeat value="#{mrBean.stringList}" var="stringItem">
                    <h:inputText value="#{stringItem}" />
            </ui:repeat>
            <h:commandButton value="Add" action="#{mrBean.addContextItem}">
                <f:ajax render="@form" execute="@form"></f:ajax>
            </h:commandButton>
</h:form> 
```

问题是，当单击“添加”按钮时，在 中输入的`<h:inputText/>`代表字符串的值`stringList`没有被执行。

实际上，`mrBean.stringList`setter ( `setStringList(List<String> stringList)`) 永远不会被调用。

知道为什么吗？

一些信息 - 我在 Tomcat 6 上使用 MyFaces JSF 2.0。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-28T11:39:52.020

该类`String`是不可变的，并且没有值的设置器。getter 基本上就是`Object#toString()`方法。

您需要直接获取/设置值`List`。您可以通过可用的列表索引来做到这一点`<ui:repeat varStatus>`。

```
<ui:repeat value="#{mrBean.stringList}" varStatus="loop">
    <h:inputText value="#{mrBean.stringList[loop.index]}" />
</ui:repeat> 
```

你不需要一个二传手`stringList`。EL 将通过 获取项目`List#get(index)`并设置项目`List#add(index,item)`。

# algorithm - 如何导航网格

> ID：10780859
> 
> 赞同：-1
> 
> 时间：2012-05-28T07:26:21.253
> 
> 标签：algorithm, graph, graph-algorithm

假设我有以下网格：

![网格轮廓 0,0 .. 3,5](../Images/5e09266eb150ae0747bce0326156bcac.png)

我似乎无法弄清楚如何使用从左下角开始的 for 循环来导航它。单元格的顺序应该是

```
0,5 => 0,4 => 1,5 => 1,4 => 0,3 => 2,5, => 1,3 => 2,4 => 2,3... 
```

另一种可视化方式：

```
(1) 0,5 => 
(2) 0,4 => (1,5) (1,4)
(3) 0,3 => (2,5) (1,3) (2,4) (2,3)
(4) 0,2 => (3,5) (1,2) (3,4) (2,2) (3,3) (3,2) 
```

所以这是我看到的模式：

1.  要开始每个循环，取前面的循环值 (x,y) 并将其设为 (x, y-1)
2.  于是出现了这样的模式： (+1, y) (x,-1) (+1, y) (x, -1) ，因此您可以提取旧值并交替增加 x 和减少 y。

for 循环是这个工作的错误工具吗？

是否有一个聪明的算法可以做到这样我不必提取以前的值并且可以计算它们？我在这里吠叫错误的树吗？我应该以不同的方式处理它（正确吗？）？

**编辑：**

这是绘制路径的尝试。不确定这是否更有意义：

![在此处输入图像描述](../Images/f1068b5f7fe26fcdcb03011dcaec78ba.png)

这个想法是从第一个单元格的左下角开始的。上一个单元格，然后在它们形成直角时交替。形成完整的直角后，向上一个单元格并交替形成一个新的直角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:47:01.607

可能的解决方案，针对非方形网格进行了编辑：

```
for(startY = maxY, startY >= 0; startY++)
{
    x1 = 0;
    y1 = startY;
    x2 = 5 - startY;
    y2 = 5;

    while(!(x1 == x2 && y1 == y2))
    {
        if(x1 <= maxX)
            //Point 1 is x1, y1

        if(y2 >= 0)
            //Point 2 is x2, y2

        x1++;
        y2--;
    }

    if(x1 <= maxX)
        //Final point is x1, y1
} 
```

因此，您在 while 循环的每次迭代中计算两个点，并在路径的该部分的其余点之后通过 for 循环的每次迭代计算最后一个对角点。

# gcc - 构建一个继承自 QWidget 但未定义 _ZTVXYYY 的类

> ID：10780861
> 
> 赞同：0
> 
> 时间：2012-05-28T07:26:22.010
> 
> 标签：gcc, qt5

我正在 qtbase/example/widgets 下构建analogClock（类AnalogClock：公共QWidget）示例应用程序，但带有以下未定义符号：_ZTV11AnalogClock...

我 objdump -t analogClock.exe 试图找到引用这个符号的人，但没有找到......

MORE INFO：只要类继承自QWidget，并构造一个对象，那么就会有一个未定义的符号_ZTVXYYY，其中X是类名的长度，YYY是类名。

所以你能帮忙指出这个 _ZTVXYYY 符号是什么吗？以及如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:28:39.927

这是由于 Makefile 不是由正确的 qmake 工具生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-29T10:30:25.480

正如@thincal 所说，如果Qt 项目没有正确配置，qmake 会生成不正确的Makefile。

例如，如果我正在编写一个继承自 QWidget 的 PLUGIN，我必须：

*   `Q_OBJECT`在类定义的顶部添加宏；
*   添加`CONFIG += plugin`项目配置文件（带`.pro`后缀）。

# gis - 带过滤器的 WFS 请求层 (GML)

> ID：10780862
> 
> 赞同：1
> 
> 时间：2012-05-28T07:26:24.840
> 
> 标签：gis, geoserver

是否有一种解决方案可以使用过滤器从 Geoserver 请求 GML 层，例如使用`bbox`：

```
http://localhost:8080/geoserver/tiger/ows?service=WFS&version=1.0.0&
request=GetFeature&typeName=tiger:poi&maxFeatures=50&
bbox=-74.0104611,40.70758763,-74.00153046439813,40.719885123828675 
```

结果将根据`bbox`用户输入的参数对边界框（纬度/经度）进行特定过滤。

**结果：**

```
<wfs:FeatureCollection xsi:schemaLocation="http://www.census.gov http://127.0.0.1:8080/geoserver/tiger/wfs?service=WFS&version=1.0.0&request=DescribeFeatureType&typeName=tiger%3Apoi http://www.opengis.net/wfs http://127.0.0.1:8080/geoserver/schemas/wfs/1.0.0/WFS-basic.xsd">
    <gml:boundedBy>
        <gml:null>unknown</gml:null>
    </gml:boundedBy>
    <gml:featureMember>
        <tiger:poi fid="poi.4">
            <tiger:the_geom>
                <gml:Point srsName="http://www.opengis.net/gml/srs/epsg.xml#4326"><gml:coordinates decimal="." cs="," ts=" ">-74.00857344,40.71194565</gml:coordinates></gml:Point>
            </tiger:the_geom>
            <tiger:NAME>lox</tiger:NAME>
            <tiger:THUMBNAIL>pics/22037884-Ti.jpg</tiger:THUMBNAIL>
            <tiger:MAINPAGE>pics/22037884-L.jpg</tiger:MAINPAGE>
         </tiger:poi></gml:featureMember>
</wfs:FeatureCollection> 
```

**现在的问题，我想根据 过滤数据`<tiger:NAME>lox</tiger:NAME>`，已经尝试`tiger:NAME=lox`在请求时输入作为参数，结果就像不输入参数时一样。有解决方案吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:03:34.997

基于[WFS-Request](http://osgeo-org.1560.n6.nabble.com/Filter-Encoding-with-Spatial-Filter-within-WFS-Request-td4230814.html)和[Geoserver Filter](http://docs.geoserver.org/latest/en/user/styling/sld-reference/filters.html)中的带有空间过滤器的过滤器编码。我发现有一个参数命名`filter`，值可以这样输入：

`http://localhost:8080/geoserver/tiger/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=tiger:poi&maxFeatures=2&filter=<PropertyIsEqualTo><PropertyName>NAME</PropertyName><Literal>lox</Literal></PropertyIsEqualTo>`

# css - 破碎的解决方法与-moz-transform？Firefox 中似乎存在一个错误（已标记为已解决，但在我的 FF12 上失败）导致 <select>元素在使用 -moz-transform 更改其位置时无法正常工作。这可以用这个简单的测试用例来复制： div { -moz-transform:translate(380px,140px); } ID：10780864 赞同：3 时间：2012-05-28T07:26:51.410 标签：css, firefox 回答 #1 赞同：0 时间：2012-05-28T23:41:05.133 我以前在编辑过的元素上遇到过这样的问题transform，我用一些 JavaScript 和额外的 CSS 解决了它。 document.addEventListener("transitionend", function(event) { var style = event.target.style; if (event.propertyName.substr(-14) == "transitionend") { style.position = "absolute"; style.left = "200px"; } }); 您需要绑定mozTransitionEnd,webkitTransitionEnd等。</select>

# excel - 我想自动复制最多 10,000 条记录并保存到 csv 文件中的 excel 工作

> ID：10780869
> 
> 赞同：0
> 
> 时间：2012-05-28T07:27:24.127
> 
> 标签：excel, vba

我有一个包含 50,000 条记录的 excel 文件，其中包含列名（EmailID、FirstName 和 Checksum）。我正在从中复制 10,000 条记录并保存在 csv 文件中。我这样做是为了手动创建 5 个 csv 文件，即将 50,000 条记录分成 10,000 条。

我想做自动化这项工作。我想编写一个宏，它将在特定位置创建 csv 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:08:26.387

如果幸运的话，您的数据如下所示：

![在此处输入图像描述](../Images/8b22b64860ffdbe25a0cbd8c392e060c.png)

并且您不需要在 .CSV 中进行花哨的格式设置，您可以在记录集上使用 .GetString(, cnStep, ...) 并使用一些正则表达式来修复引号，如概念证明脚本所示：

```
' want-to-automate-excel-work-of-copying-records-upto-10000-each-and-save-into-csv

Option Explicit

Const adClipString = 2
Const cnStep       = 3

Dim goFS : Set goFS = CreateObject( "Scripting.FileSystemObject" )

WScript.Quit demoMain()

Function demoMain()
  demoMain = 0 ' assume success

  Dim reClean : Set reClean = New RegExp
  reClean.Global    = True
  reClean.Multiline = True
  reClean.Pattern   = """(\d+)$"
  Dim reQuote : Set reQuote = New RegExp
  reQuote.Global    = True
  reQuote.Multiline = True
  reQuote.Pattern   = "^(.)"
  Dim sDDir   : sDDir       = "..\Data\SplitToCsv"
  Dim sXFSpec : sXFSpec     = goFS.BuildPath(sDDir, "SplitToCsv.xls")
  Dim oXDb    : Set oXDb    = CreateObject("ADODB.Connection")
  ' based on: !! http://www.connectionstrings.com/excel
  oXDb.open Join(Array(     _
        "Provider=Microsoft.Jet.OLEDB.4.0" _
      , "Data Source=" & sXFSpec           _
      , "Extended Properties="""           _
          & Join(Array(     _
                "Excel 8.0" _
              , "HDR=Yes"   _
              , "IMEX=1"    _
            ), ";" )        _
          & """"            _
  ), ";")
  Dim oRs : Set oRs = oXDb.Execute("SELECT * FROM [Everybody]")
  Dim sFs : sFs     = getRsFNames(oRs)
  Dim nR  : nR      = 1
  Do Until oRs.EOF
     Dim s : s = reQuote.Replace( _
                      reClean.Replace( _
                           oRs.GetString(adClipString, cnStep, """,""", vbCrLf) _
                         , "$1" _
                      ) _
                    , """$1" _
                 )
     Dim f : f = goFS.BuildPath(sDDir, "R" & nR & "ff.csv")
     WScript.Echo f
     WScript.Echo s
     goFS.CreateTextFile(f, True).Write sFs & vbCrLf & s
     nR = nR + cnStep
  Loop

  oXDb.Close

  WScript.Echo goFS.OpenTextFile(f).ReadAll()
End Function ' demoMain

Function getRsFNames(oRs)
  ReDim a(oRs.Fields.Count - 1)
  Dim f
  For f = 0 To UBound(a)
      a(f) = """" & oRs.Fields(f).Name & """"
  Next
  getRsFNames = Join(a, ",")
End Function ' getRsFNames 
```

输出：

```
cscript 10780869.vbs
..\Data\SplitToCsv\R1ff.csv
"EM1","FN1",1
"EM2","FN2",2
"EM3","FN3",3

..\Data\SplitToCsv\R4ff.csv
"EM4","FN4",4
"EM5","FN5",5
"EM6","FN6",6

..\Data\SplitToCsv\R7ff.csv
"EM7","FN7",7

"EmailID","FirstName","Checksum"
"EM7","FN7",7 
```

我试图让您轻松修改连接字符串；根据您的安装，您可能需要更改版本号和/或属性名称。

您可能会注意到图片中的“OpenOffice”——这是这种方法的一个优点：它甚至可以在没有 Excel 的计算机上工作。

**PS：**当问题仍被标记为 vbscript 时，我写了这个答案。

# java - Spring注入资源字段失败

> ID：10780872
> 
> 赞同：4
> 
> 时间：2012-05-28T07:27:37.677
> 
> 标签：java, spring

我有一个`BaseDAO`和一些子类，例如：`UserDaoImpl`，，`OrderDaoImpl`现在在一个`BaseService`

```
public abstract class Baservice{

    @Resource
    private BaseDao basedao;
    //something crud operate.....
}

@Service
public UserService extends BaseService{
   //....
} 
```

如何配置我可以将真正的子类传递给 basedao 的 Spring

我遇到了一个例外

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of resource fields failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [com.cloudking.trafficmonitor.BaseDAO] is defined: expected single matching bean but found 3: [roleDAO, userDAO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:32:32.100

看来您有 3 个扩展类，`BaseDAO`所以它们都是`BaseDao`（IS A）

您需要使用`name` 的属性`@Resource`

例如：

```
@Component
public RoleDao extends BaseDao{/* some code*/} 
```

和

```
@Component
public UserDao extends BaseDao{/* some code*/} 
```

现在如果你想注入`UserDao`那么

```
@Resource(name="userDao")
BaseDao baseDao 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:33:30.773

采用`@Qualifier("UserDaoImpl")`

或使用`@Resource(name="UserDaoImpl")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:36:30.397

您的应用程序无法找到 bean BaseDAO。您需要用@Component（或@Service，不确定这个）注释BaseDAO

# c++ - 这段代码中这条毯子的含义是什么？

> ID：10780882
> 
> 赞同：0
> 
> 时间：2012-05-28T07:28:26.487
> 
> 标签：c++, operator-keyword

```
WaveTrack *track = (WaveTrack *) iter.First(); 
```

我不明白毯子在这里的含义。如果有人可以更多地解释整个代码句子的含义，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:29:37.020

`WaveTrack`它用 的值初始化一个指针`iter.First()`。这`(WaveTrack*)`是一个C风格的演员表。如果`iter.First()`返回不同类型的指针，它将被强制转换为`WaveTrack`指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:40:17.593

如果您的问题中“毯子”一词的意思是“空间”，那么我会说它是为了便于阅读。

太多的代码压缩让人难以理解。

在像 C 或 C++ 这样频繁使用指针的语言中，清楚地编写内容是至关重要的，并且每种类型转换都必须是可见的。

# c# - 派生方法比c#中的覆盖更强？

> ID：10780883
> 
> 赞同：4
> 
> 时间：2012-05-28T07:28:30.117
> 
> 标签：c#, .net, .net-4.0, clr

（*又是一个烦人的问题……*）

在之前问过**[这个](https://stackoverflow.com/questions/10462021/covariance-beats-concrete-type)**之后 - （这部分与我的问题有关） - 我得到了答案：

> 请参阅 C# 4 规范的第 7.6.5.1 节：
> 
> 候选方法集减少为仅包含来自最派生类型的方法：对于集中的每个方法 CF，其中 C 是声明方法 F 的类型，从 C 的基类型中声明的所有方法都将从中删除集。

行。

我有这个代码：//`.Dump() is like a WriteLine command...`

```
 public class Base
    {
        public void Foo(string strings)  { "1".Dump();}
        public virtual void  Foo(object strings)  { "2".Dump();}
    }

    public class Child : Base
    {

        public override void  Foo(object strings)  { "4".Dump();}
    } 
```

但是这段代码：

```
Child c = new Child();
c.Foo("d"); 
```

发出：`"1"`

可是等等 ...

我们不是说过`is reduced to contain only methods from the most derived types:`吗？

Child 有 1 个来自其父亲的函数`public void Foo(string strings)`和一个**NEARER 覆盖函数**。

那么他为什么选择它的基地功能呢？继承的函数是否比覆盖更接近？

是否与覆盖在运行时有关？

请帮忙。

## 编辑

这种情况呢？

```
public class Base
    {    
        public virtual void  Foo(int x)  { "1".Dump();}
    }

    public class Child : Base
    {
        public override void  Foo(int x)  { "2".Dump();}
        public void Foo(object x) { "3".Dump();}    
    }

void Main()
{
    Child c = new Child();
    c.Foo(6); //emits "3"
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T07:35:31.303

那是因为你的孩子拿了一个物体。

```
public class Child : Base
{
    public override void Foo(object strings)  { "4".Dump();}
} 
```

使其成为字符串，然后将调用子项。

```
public class Child : Base
{
    public override void Foo(string strings)  { "4".Dump();}
} 
```

**为什么这个？**

因为编译器看到孩子有`object`参数，所以在基类中它必须转换`string`为字符串，它很容易作为字符串使用。

所以它称基数为一。

虽然覆盖函数在子类中更接近。但是这里的规则在孩子和基地是不同的。孩子有对象，基地有字符串。如果两者都有`object`或两者都有，这是公平的`string.`

我在 Jon Skeet 的[C# in Depth Overloading 部分读到了这个](http://csharpindepth.com/Articles/General/Overloading.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T07:45:54.673

这里有两个概念被混淆，重载和覆盖。重载是为同名函数提供多个签名并**根据该签名**选择一个来调用的概念。覆盖是在派生类中重新定义方法的概念。

子类是否覆盖其中一个方法定义与调用哪个函数完全无关，因为它不会更改任一方法的签名。根据定义和构造，**重写方法不能更改它的签名**。

因此，如果签名未更改，则基于签名确定要调用的正确函数的机制将用于父类和子类。

**更新**

[事实上，正如 Eric Lippert 在他的博客](http://blogs.msdn.com/b/ericlippert/archive/2007/09/04/future-breaking-changes-part-three.aspx)中指出的那样，它还有更多内容。事实上，如果子类中存在与*重载*匹配的方法，它将不会在基类中查找任何方法。原因是理智的——避免破坏性的变化——但是当你同时拥有基类和子类时，结果有点不合逻辑。

我只能附和 Jon Skeet：“鉴于这种奇怪，我的建议是避免跨越继承边界重载……至少对于如果你扁平化层次结构，一个给定调用可能适用于多个方法的方法”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:35:57.810

您在此处看到 **最佳匹配规则**。

您将`string`类似的参数传递给`Foo(..)`函数。

基类有一个`Foo(string..)`，子类，相反，*没有*。因此，在*这种*情况下，最终选择了 base 的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T07:36:00.657

我认为这里的基类方法是根据它的`dataType`

As`c.Foo("d");`与基类方法完全匹配，并且没有任何方法被覆盖，`derived class`因此调用了基类方法。

# iphone - 目标c在点之后和之前获取子字符串

> ID：10780885
> 
> 赞同：8
> 
> 时间：2012-05-28T07:28:42.360
> 
> 标签：iphone, objective-c

我有一个像 112.1 或 102.2 之类的字符串现在我想使用目标 c 在点之前和点之后获取子字符串，这意味着我想获得 2 个像 112 和 1 这样的子字符串。请指导。问候萨德。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T07:30:13.387

尝试以下操作：

```
NSArray *arrayWithTwoStrings = [yourString componentsSeparatedByString:@"."]; 
```

使用此方法，您将获得包含由“。”分隔的字符串组件的 NSArray。字符串，即“112”和“1”为“112.1”字符串。之后，您可以使用数组的`objectAtIndex:`方法访问它们。

PS 另请注意，如果您要使用这些字符串的数值，可能会有更好的解决方案

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-28T07:31:35.270

```
NSString *str = yourstr;  
NSArray *Array = [str componentsSeparatedByString:@"."];        
NSString *t = [Array objectAtIndex:0];  
NSString *t1 = [Array objectAtindex:1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:30:54.163

```
NSArray* components = [yourString componentsSeparatedByString:@"."]; 
```

# android - 关闭一个安卓应用程序？

> ID：10780887
> 
> 赞同：1
> 
> 时间：2012-05-28T07:28:50.797
> 
> 标签：android, android-activity

嗨，我想知道如何关闭 Android 中的应用程序。其实我有想法通过使用finish（）方法我们可以关闭当前的活动。但我想要的是，下面的代码定义了剩余的......

主.java

```
 Handler handle=new Handler();

    handle.postDelayed(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            startActivity(new  Intent(ZzzzzProjActivity.this,Second.class));
        }
    }, 3000); 
```

二.java

```
/*** same above code***/ 
```

第三个.java

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        Toast.makeText(getApplicationContext(), "backbutton", 30).show();
        finish();

    }
    return super.onKeyDown(keyCode, event);

} 
```

根据来到 Third.java 后的以下代码，当我单击返回按钮时，它正在导航回 Second.java 页面。但我想要的是我的应用程序需要完全关闭。谁能帮我这个....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:37:08.900

您可以创建一个对话框活动，询问用户是否要退出。在您可以设置的意图中

```
Intent.FLAG_ACTIVITY_CLEAR_TOP 
```

它将清除堆栈中的所有内容并关闭您的应用程序。或者你可以按照@user1208720 的建议去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:33:49.640

为了实现，当您从当前活动调用另一个活动时，您应该完成当前活动，例如当您从第一个活动调用 second.class 时，您应该完成第一个活动，依此类推......，

即当你调用另一个activity.class时你应该完成currentActivity.class

像

CurrentActivity.this.finish();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T07:48:52.400

使用该代码完成您的应用程序

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
    startMain.addCategory(Intent.CATEGORY_HOME);
    startMain.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(startMain); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T07:37:36.670

在您离开时完成每项活动。就像这样，每当您单击返回时，没有以前的活动，因此应用程序将退出。

另一种方法（通常不推荐用于 Android）是使用“System.exit(0);”

# customization - 用户可定制的门户软件

> ID：10780889
> 
> 赞同：0
> 
> 时间：2012-05-28T07:28:53.110
> 
> 标签：customization, portlet, portal

我对允许用户通过以下方式自定义其体验的门户软件感兴趣： * 在页面上根据需要布置 portlet * 选择要显示的 portlet

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:21:01.620

我应该说 Liferay 在 Portal 的个性化方面是最好的。它提供

1) 用户页面（私人级别） 2) 用户页面（公共级别，与他人共享） 3) 社区（现在的网站，页面组，与多个用户共享） 4) 主题、配色方案（个性化到页面级别）5)页面布局（个性化到页面级别） 6）权限（可以设置级别门户、站点、组、用户、页面、portlet）

——菲利克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:41:46.973

在 Java JSR-286 世界中，您应该尝试[Liferay](http://www.liferay.com/)或[eXo Platform](http://www.exoplatform.com/company/en/home)。这些确实是最好的开源门户。他们做你需要的。

您还可以查看 IBM [Websphere Portal](http://www-01.ibm.com/software/websphere/portal/)或 Oracle 购买的多个门户之一。

[在此处输入链接描述](http://jcp.org/en/jsr/detail?id=286)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:42:39.887

微软相关技术我可以帮你，也许别人可以补充其他厂商的\开源。

如果您使用的是 ASP.net 2.0 及更高版本，它具有“Web 部件”的概念，允许开发人员构建可配置、可重用的组件。这是一个框架，因此您仍然需要使用框架提供的概念来开发解决方案。

如果您对开发解决方案不感兴趣，MS 有一个名为“SharePoint Foundation”的产品，它是一个免费产品（也有更面向企业的付费版本），它构建在 ASP.net 之上，并提供这些概念的实现（在许多其他功能中）。在 SharePoint 中，开发人员可以像在 asp.net 中一样创建 Web 部件，SP 还允许轻松创建站点和页面。用户可以将 Web 部件添加到页面。Web 部件通过 Web 部件库分发。SharePoint 还附带了许多 Web 部件，并且有一个大型的 SharePoint 开发人员社区，您可以在其中找到免费的开源 Web 部件。此外，在 SP 中，每个用户都可以根据自己的喜好个性化页面中 Web 部件的布局（如果您不想允许，可以禁用此功能）。

# actionscript-3 - 根据Flash&AS3中MovieClip的y位置改变“alpha”、“scale”和“depth”

> ID：10780890
> 
> 赞同：0
> 
> 时间：2012-05-28T07:28:58.800
> 
> 标签：actionscript-3, flash

我正在制作一个交互式幻灯片，所有图像幻灯片都自动在 swf 的开头。

第一步是成功的，我让所有的电影剪辑都相对于圆心运行，代码在这里

```
var menu:Sprite = new Sprite();
menu.x = 275;
menu.y  =180;
menu.addEventListener(Event.ENTER_FRAME,moveMenu);
addChild(menu);

var disX:Number = 200;
var disY:Number = 10;
var speed:Number = 0;

initMenu(3)

function initMenu(n:int){
      for(var i:int;i<n;i++){
         var mc:MovieClip = new IconMenu();
         mc.scaleX = mc.scaleY = .5;
         menu.addChild(mc);
       }

}

function moveMenu(e:Event):void{
    var iconCount = menu.numChildren;
    var depthArray:Array = new Array();
    var angle:Number = 360/iconCount;

    for(var z:int;z<iconCount;z++){
        var mc:MovieClip = MovieClip(menu.getChildAt(z));
        mc.gotoAndStop(z+1);
        mc.x = cosD(speed+angle*z)*disX;
        mc.y = sinD(speed+angle*z)*disY;
    }
    speed+=2;

} 
```

但在此之后，我无法计算其他值，如“alpha”、“scale”和“depth”，以使幻灯片更逼真

所有三个值都应该根据 计算**`mc.y`**，因为我认为应该有**透视效果**

我对 Flash 和 Actionscript3 真的很陌生，有人可以在这里帮助我吗？！

**真的非常感谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:36:30.630

希望对您有所帮助。

* * *

**阿尔法**和**规模**：

上 -> 低
下 -> 高

```
mc.alpha = mc.y / menu.height;

mc.scaleX = mc.scaleY = mc.y / menu.height; 
```

上 -> 高
下 -> 低

```
mc.alpha = 1 - mc.y / menu.height;

mc.scaleX = mc.scaleY = 1 - mc.y / menu.height; 
```

* * *

**深度**：

上 -> 后面
下 -> 前面

```
for(var i:int = menu.numChildren - 1; i > -1; i--)
{
  var mc1:MovieClip = menu.getChildAt(i) as MovieClip;
  var mc2:MovieClip = menu.getChildAt(i) as MovieClip;

  if(mc1.y < mc2.y)
  {
    if(menu.getChildIndex(mc1) > menu.getChildIndex(mc2))
    {
      menu.swapChildren(mc1, mc2);
    }
  }
} 
```

上 -> 前面
下 -> 后面

```
for(var i:int = menu.numChildren - 1; i > -1; i--)
{
  var mc1:MovieClip = menu.getChildAt(i) as MovieClip;
  var mc2:MovieClip = menu.getChildAt(i) as MovieClip;

  if(mc1.y > mc2.y)
  {
    if(menu.getChildIndex(mc1) < menu.getChildIndex(mc2))
    {
      menu.swapChildren(mc1, mc2);
    }
  }
} 
```

# javascript - Javascript For Loop 中的连续 Ajax 调用 - 播放列表

> ID：10780898
> 
> 赞同：1
> 
> 时间：2012-05-28T07:29:38.080
> 
> 标签：javascript, ajax, for-loop, playlist

请帮忙！！当我搜索这个时，我看到了很多混合的结果，没有一个适用于此。我的目标基本上是将随机且动态填充的歌曲列表转换为播放列表，以便每首歌曲一个接一个地播放，并且 youtube 或 soundcloud 的 iframe 按顺序排列。

我有一个从 youtube 和 soundcloud api 填充的简单歌曲列表，它输出到无序列表。当列表中的每首歌曲被加载到浏览器中时，它的锚标签会被赋予一个 id。

```
//List Item
echo "<a id=\"" . $i . "\" href=\"javascript:void(0)\" onclick=\"play_clicked('youtube',".$i.",".$song_count.")\">
                            <li class = \"song\">"; 
```

列表中的第一首歌曲的 id 为 0，第二首歌曲的 id 为 1，依此类推。每首歌曲的媒体 ID 在加载时也会一次“推送”到一个 JavaScript 数组，因此歌曲的锚标记的 ID 对应于保存歌曲媒体 ID 的数组中的键。

```
echo 
'<script type="text/javascript">

track_id_array.push("'.$vid_id.'");

</script>'; 
```

我创建了一个在单击歌曲时调用的 javascript 函数：

```
function play_clicked(api_type,clicked_key,song_count) 
```

该函数接收 api 类型的参数 - soundcloud 或 youtube、锚点 id 或单击的媒体 id 所在的数组键，然后是列表中有多少首歌曲。有一个 for 循环遍历媒体 ID 数组：

```
for (var i=clicked_key; i<=song_count; i++){ 
```

所以我从点击歌曲的 id 开始循环，目标是继续遍历点击歌曲之后的歌曲。首先，我检查媒体 ID 是否存在于数组中：

```
if(window.track_id_array[i]) 
```

如果存在，它应该保存媒体的 id - 例如 youtube id - 6_8ZZtL6qmM。然后我检查它是 soundcloud 还是 youtube 歌曲，根据哪个，我将带有 ajax 的媒体 id 发送到一个 php 脚本，该脚本会将 id 嵌入到 soundcloud 或 youtube 的 html5 iframe 嵌入小部件中，如下所示：

```
$vid_id = $_GET[id];

//Youtube player embed
echo '<iframe width="498" height="280" src="http://www.youtube.com/embed/'.$vid_id. '?autoplay=1" frameborder="0" allowfullscreen></iframe>
'; 
```

然后我将此 html 返回到我的主页中的 div，歌曲将在相应的小部件中播放。我想象的实现播放列表目标的方式是从循环中单击的歌曲的 id/key 开始，从数组中检索该键的媒体 id，检查 api 类型，进行正确的 ajax 调用，设置超时对于歌曲的长度，然后在歌曲播放完毕后让循环继续到数组中的下一个键，这样它就会从列表中的下一首歌曲或数组中的 id 开始该过程。

Javascript 真的不是我的强项，我讨厌为此必须使用客户端代码。我的问题是，我在这里描述的方法是否可行，或者我是不是走错了路？我只想在循环中一个接一个地进行 ajax 调用，因此它们不会同时发生。这是我的全部功能，我得到了一些奇怪的结果。它播放列表中的最后一首歌曲并跳过所有其他歌曲。任何解释也许是为什么？再次，我真的不擅长使用 javascript，非常感谢您的帮助！

```
//play clicked track and those following
function play_clicked(api_type,clicked_key,song_count){

function showPlayTrack() {
                    if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        var outLink = xhr.responseText;
                    }
                    else {
                        var outLink = "There was a problem with the request" + xhr.status;
                    }
                    }
                    var vis = parent.document.getElementById("play_content");

                    vis.innerHTML = outLink;

                    setTimeout(300000);
}   

for (var i=clicked_key;i<=song_count;i++){

    if(window.track_id_array[i]){

        if(api_type == "scloud"){

                var soundcloud_id = window.track_id_array[i];

                if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
                }
                else {
                    if (window.ActiveXObject) {
                        try {
                            xhr = new ActiveXObject("Microsoft.XMLHTTP");
                        }
                        catch (e) { 
                        }
                    }
                }

                if (xhr) {
                    xhr.onreadystatechange = showPlayTrack;
                    xhr.open("GET", "getsoundcloud.php?streamurl="+soundcloud_id, true);

                }
                else {
                    alert("Sorry, but I could't create an XMLHttpRequest");
                }

        }else if (api_type == "youtube"){

            var vid_id = window.track_id_array[i];

            if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
                }
                else {
                    if (window.ActiveXObject) {
                        try {
                            xhr = new ActiveXObject("Microsoft.XMLHTTP");
                        }
                        catch (e) { 
                        }
                    }
                }

                if (xhr) {
                    xhr.onreadystatechange = showPlayTrack;
                    xhr.open("GET", "getyoutube.php?streamurl="+vid_id, true);
                    xhr.send(null);

                }
                else {
                    alert("Sorry, but I could't create an XMLHttpRequest");
                }

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:03:56.290

好的，所以我通过使用递归函数调用解决了这个问题。单击时我调用播放函数，它读取媒体 ID、检查 api 类型、递增密钥并调用 ajax 以获取 iframe。ajax 的成功函数然后将 iframe 返回到适当的 div，等待歌曲的长度，然后以递增的键作为参数再次调用初始播放函数。还有一些小事情需要解决，比如如果用户在媒体中搜索时增加或减少时间，但在大多数情况下，这是一个很棒的播放列表解决方案！

# c - 在 C 中分隔可以具有任意空格的字符串

> ID：10780899
> 
> 赞同：1
> 
> 时间：2012-05-28T07:29:41.660
> 
> 标签：c, whitespace, c-strings

我有一个字符串数组，我需要将每个字符串分成几个不同的部分。字符串可能有也可能没有任意空格和制表符。

```
Example string:
str[0]: "   apple  e     3   a     a fruit    "
I need it to become:
word[0] = "apple"
row[0] = "e"
column[0] = "3"
direction[0] = "a"
clue[0] = "a fruit" 
```

所以我需要删除任何前导/尾随空格，以及字段之间的任何空格（线索字段除外。线索内的空格需要保留）。我真的不知道该怎么做。我有一些基本的想法，但我不知道如何去实现它们，或者它们是否可行（编码新手并且非常无能）。到目前为止，我尝试过的所有东西要么无法编译，要么不起作用。

我最近尝试拉出第一个字段：

```
for (i=0; i<MAX_LENGTH; i++) {
   for (j=0; j<MAX_INPUT; j++) {
      if (isSpace(&input[i][j]) == FALSE) {
      //if whitespace is not present, find the location of the next
      //space and copy the string up til there
         static int n = j;

         for (n=0; n<MAX_INPUT; n++) {
            if (isSpace(&input[i][n]) == TRUE) {
               strncpy(word[i],&input[i][j],(n-j));
               //printf("Word[%d]: %s\n",i,word[i]);
               break;
            }
         }

      }
   }
} 
```

对它不起作用并不感到惊讶。我还没有完全解决这个问题。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:33:49.140

您当前的代码似乎太复杂了。这是一个三步算法，如果我编写它，我将实现它：

1.  而当前字符是空格：移动到下一个字符；
2.  而当前字符不是空格：将其附加到输出并移动到下一个字符；
3.  重复步骤 1 和 2，直到到达输入字符串的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:58:16.837

只需使用 sscanf 读取由空格分隔的“单词”：

```
char str[][100] = { "   apple  e     3   a     a fruit    ", ... }
char word[100][100],row[100][100],column[100][100],direction[100][100],clue[100][100];
int i;

for( i=0; i<...; ++i )
  sscanf(str[i],"%s%s%s%s%[^\n]",word[i],row[i],column[i],direction[i],clue[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T11:00:10.413

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

char *trimEnd(char *str){
    char *p;
    if(str == NULL || *str == '\0') return str;
    p=str+strlen(str);
    while(isspace(*--p) && p >= str){
        *p = '\0';
    }
    return str;
}

int main(){
    char str[100][100] = { "   apple  e     3   a     a fruit    " };
    char word[100][100], row[100][100], column[100][100], direction[100][100], clue[100][100];
    const char *delim= " \t";
    int i;
    const dataSize = 1;//for sample

    for(i=0;i<dataSize;++i){
        char *pwk, *p = strdup(str[i]);
        strcpy(word[i], strtok(p, delim));
        strcpy(row[i], strtok(NULL, delim));
        strcpy(column[i],strtok(NULL, delim));
        strcpy(direction[i], pwk=strtok(NULL, delim));
        pwk = pwk+strlen(pwk)+1;
        strcpy(clue[i], trimEnd(pwk+strspn(pwk, delim)));
fprintf(stderr,"DEBUG:%s,%s,%s,%s,%s.",word[i],row[i],column[i],direction[i],clue[i]);
        free(p);
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T07:38:51.707

您可以使用该`strtok_r`功能。
它将字符串分解为标记，由您选择的任何内容分隔。

```
const char *delim= " \t";
char *tok = NULL;

word[0] = strtok_r(str[0],delim,&tok);
row[0] = strtok_r(NULL,delim,&tok);
column[0] = strtok_r(NULL,delim,&tok);
direction[0] = strtok_r(NULL,delim,&tok);
clue[0] = strtok_r(NULL,"",&tok);  // delim="" - won't break by whitespace 
```

# ruby-on-rails - Rails 中的 Active Record 是驱动程序吗？

> ID：10780903
> 
> 赞同：0
> 
> 时间：2012-05-28T07:30:01.957
> 
> 标签：ruby-on-rails, database, database-connection

我知道我们使用 Active Record 与 DB 交互。我的问题是，如果 Rails 中的 Active Record 是驱动程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:39:40.493

不，不是。[ActiveRecord](http://ar.rubyonrails.org/)只是一个将 ORM 功能添加到您的数据的库。它为您提供了在数据库表中封装一行并向其中添加业务逻辑的对象。AR 还为您提供了一些其他出色的方法来巧妙地处理您的数据及其关系，主要是让您不知道那里不同数据库的细节。

AR 不提供用于 db 连接的驱动程序，它们特定于您使用的数据库。有一些专门用于连接不同数据库的库，例如用于连接 MySQL 的 mysql2 驱动程序，其他数据库也类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:38:55.180

简而言之，ActiveRecord 不仅仅是驱动程序。驱动程序是 gems mysql, pg, sqlite ... ActiveRecors 就像抽象数据库驱动程序的 ORM。[维基](http://en.wikipedia.org/wiki/Object-relational_mapping)

# tfs - 使用 MSDeploy 将控制台应用程序部署到 DMZ 服务器

> ID：10780904
> 
> 赞同：6
> 
> 时间：2012-05-28T07:30:03.763
> 
> 标签：tfs, msbuild, tfsbuild, msdeploy

我正在尝试使用 MSBuild 和 Team Foundation Server 的自动部署将控制台应用程序部署到 DMZ 服务器上的文件夹。

我已经在同一台服务器上部署了多个站点，并且效果很好。我尝试了多种方法，但未部署文件。

首先，我尝试以与我的网站相同的方式部署控制台应用程序，即：

```
<MSBuild
    Projects="$(SolutionRoot)\MySolution.sln"
    Properties="AllowUntrustedCertificate=True;AuthType=Basic;
    Configuration=DEBUG;CreatePackageOnPublish=True;                                
    DeployIisAppPath=Default Website/dummy.dev.myapp;
    DeployOnBuild=True;DeployTarget=MsDeployPublish;
    MSDeployPublishMethod=WMSvc;
    MsDeployServiceUrl=https://xxx.xxx.xxx.xxx:8172/MsDeploy.axd;
    UserName=userid;Password=password;UseMsdeployExe=True"
/> 
```

没有成功。

*编辑：不返回错误消息。一切似乎都很顺利。*

然后，我还尝试按如下方式部署控制台应用程序：

```
<Exec Command="&quot;C:\Program Files\IIS\Microsoft Web Deploy V2\MSDeploy.exe&quot; 
                -verb:sync 
                -source:contentpath=&quot;$(OutDir)\MyApp.Precompiled&quot; 
                -dest:contentpath=&quot;D:\dev.myapp&quot;,computername=xxx.xxx.xxx.xxx,username=userid,password=password" 
                ContinueOnError="false" /> 
```

我实际上也尝试使用计算机名作为`https://xxx.xxx.xxx.xxx:8172/MsDeploy.axd`.

*编辑：以下是我得到的。EXEC：FileOrFolderNotFound EXEC：无法创建“contentPath”类型和路径“E:\Builds\1...\dev.myapp”的对象。执行：路径 '\?\E:\Builds\1...\dev.myapp' 无效。执行：1\. E:\Builds\1...\BuildType\Targets\Deploy.targets (142)：命令“C:\Program Files\IIS\Microsoft Web Deploy V2\MSDeploy.exe”-verb:sync -source:contentpath="E:\Builds\1...\dev.myapp" -dest:contentpath="D:\dev.myapp",computername=https://xxx.xxx.xxx.xxx:8172/ MsDeploy.axd,username=userid,password=password" 以代码 -1 退出。我意识到我还没有阅读所有错误，我真的需要 UNC 路径吗？*

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T08:55:26.517

我终于找到了如何让它工作。

```
<Exec Command="&quot;C:\Program Files\IIS\Microsoft Web Deploy V2\MSDeploy.exe&quot; 
            -verb:sync 
            -source:contentpath=&quot;$(OutDir)\MyApp.Precompiled&quot; 
            -dest:contentpath=&quot;D:\dev.myapp&quot;,computername=https://xxx.xxx.xxx.xxx:8172/MsDeploy.axd,username=userid,password=password,authtype=Basic 
            -allowUntrusted=True" 
            ContinueOnError="false" /> 
```

我将计算机名更改为**computername=https://xxx.xxx.xxx.xxx:8172/MsDeploy.axd**，添加了**authtype=Basic**和**allowUntrusted=True**，瞧，它起作用了。

对于第一个选项出了什么问题，没有任何形式的反馈是非常令人沮丧的。但是当我使用第二种选择时，我得到了可以使用的反馈。

如果有人知道如何使用 MSBuild 任务完成这项工作，请随时赐教。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T01:18:16.130

尝试[使用 dirPath](http://technet.microsoft.com/en-us/library/ee207412)提供程序而不是 contentPath，它的行为更像是文件夹同步而不是 IIS 网站部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T15:04:41.663

考虑到使用 EXEC 任务进行同步，您是否确保您的 csproj（或 vbproj）文件中有**Microsoft.WebApplication.targets ？**我可以看到它只是忽略了没有包含正确目标文件的 msbuild 任务。

例如，在我的 Web 服务项目文件中，我在我的 csproj 文件的底部有这个

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

# actionscript-3 - 使用 flex 4 和动作脚本 3 动态更改 textarea 和面板中每一行的颜色

> ID：10780906
> 
> 赞同：0
> 
> 时间：2012-05-28T07:30:12.527
> 
> 标签：actionscript-3, flex4

我使用 flex 4 和动作脚本 3 为 android 设备创建了一个简单的文本聊天应用程序。在文本聊天中，我提供了更改字体颜色的选项。我使用“TextInput”输入文本消息，使用“Textarea”显示聊天消息。当我改变文本的颜色时，“textarea”颜色中的所有行都在改变。

```
textoutput.setStyle("color",textInput.getStyle("color"));
textoutput.text += userNameInput.text + ": " + msg + "\n";" 
```

这是我使用的代码。但我需要更改“textarea”中每一行的颜色。另一方面，我创建了用于显示聊天的面板，并为消息动态创建了标签，并且动态地更改了颜色，但所有行都合并在同一行中。我需要为面板窗口中的每个动态标签添加换行符。

```
var mylabel:Label=new Label();
mylabel.setStyle("color",textInput.getStyle("color"));
mylabel.text += userNameInput.text + ": " + msg +      "\n";
        panelId.addElement(mylabel);" 
```

这是我用于将动态标签添加到 Panel 中的代码。任何人都可以建议我解决这个问题的任何一个想法，这对我来说应该非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:37:33.183

以下是一些可能有用的信息，来自[http://help.adobe.com/en_US/as3/dev/WS8d7bb3e8da6fb92f-20050207122bd5f80cb-7ff5.html](http://help.adobe.com/en_US/as3/dev/WS8d7bb3e8da6fb92f-20050207122bd5f80cb-7ff5.html)

格式化文本字段中的文本范围

flash.text.TextField 类的一个有用方法是 setTextFormat() 方法。使用 setTextFormat()，您可以为文本字段的一部分内容分配特定属性以响应用户输入，例如需要提醒用户某些条目是必需的或更改段落小节的重点的表单当用户选择部分文本时，文本字段中的文本数量。

以下示例在用户单击文本字段时对一系列字符使用 TextField.setTextFormat() 来更改 myTextField 部分内容的外观：

```
var myTextField:TextField = new TextField(); 
myTextField.text = "No matter where you click on this text field the TEXT IN ALL CAPS changes format."; 
myTextField.autoSize = TextFieldAutoSize.LEFT; 
addChild(myTextField); 
addEventListener(MouseEvent.CLICK, changeText); 
var myformat:TextFormat = new TextFormat(); 
myformat.color = 0xFF0000; 
myformat.size = 18; 
myformat.underline = true; 

function changeText(event:MouseEvent):void 
{ 

 myTextField.setTextFormat(myformat, 49, 65); 
} 
```

# ios - 使用 UIPageControl 显示 3 个不同的视图

> ID：10780912
> 
> 赞同：2
> 
> 时间：2012-05-28T07:31:01.217
> 
> 标签：ios, uiview, uipagecontrol

我想使用显示 3 个不同的视图`UIPageControl`。我该怎么做？请提出一些指导方针或一些示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T19:04:17.603

您可以通过本教程[http://www.wannabegeek.com/?p=168](http://www.wannabegeek.com/?p=168)

# php - CGridView 编码的值

> ID：10780917
> 
> 赞同：1
> 
> 时间：2012-05-28T07:31:14.460
> 
> 标签：php, yii, cgridview

我在这里关注文档[http://www.yiiframework.com/wiki/278/cgridview-render-customized-complex-datacolumns/](http://www.yiiframework.com/wiki/278/cgridview-render-customized-complex-datacolumns/)

所以我有以下看法

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'item-table-grid',
'dataProvider'=>$model->search(),
'itemsCssClass'=>'item-table-grid',
'columns'=>array(
    'customer_name',
    array(
        'name'=>'Edit',
        'value'=>array($model, 'editLink'),
    ),
),
)); 
```

这是模型中的editLink函数

```
public function editLink($data, $row) {
    $link = '';
    if ($data->is_draft) {
        $link = '<a href="customer/update/'.$data->id.'">Edit</a>';
    }
    return $link;
} 
```

我遇到的问题是返回值被编码所以我得到 <a href=...>

有没有办法告诉 CGridView 不要对值进行编码？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:38:30.963

解决方案 A：

```
array(
    'name'=>'Edit',
    'type' => 'raw',
    'value'=>array($model, 'editLink'),
), 
```

B：（不够好）

```
array(
    'name' => 'Edit',
    'class' => 'CLinkColumn',
    'urlExpression' => '$data->is_draft ? "customer/update/{$data->id}" : "#disabled"',
    'label' => 'edit',
), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:15:01.757

试试这个 ..

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'item-table-grid',
'dataProvider'=>$model->search(),
'itemsCssClass'=>'item-table-grid',
'columns'=>array(
    'customer_name',
    array(
'name'=>'Edit',
'type' => 'raw',
'value'=>array($model, 'editLink'), 
```

), ), ));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:35:46.523

```
my code in CGridView

array(
        'name'=>'Post Content',
        'value'=>array($model,'postContent'),
        'type'=>'html',
        'htmlOptions'=>array('width'=>'380'),
    ),

in Model I have the following method

public function postContent($data){
    echo $data->content;
}

 it works fine but when i click on another page of my pagination
then it doesn't works means it work only on Index page first time opened...

plz any solution....??? 
```

# asp.net - 500 - 内部服务器错误 - asp.net

> ID：10780918
> 
> 赞同：0
> 
> 时间：2012-05-28T07:31:15.367
> 
> 标签：asp.net, web

`500 Internal Server Error`加载我的新 asp.net 应用程序时，我得到了。

有人告诉我这可能是我的`web.config`。如果是这样，我已经附上它，希望有人能够帮助我。

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <customErrors mode="Off"/>
    <!-- 
             Set compilation debug="true" to insert debugging 
             symbols into the compiled page. Because this 
             affects performance, set this value to true only 
             during development.
         -->
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <!--
             The <authentication> section enables configuration 
             of the security authentication mode used by 
             ASP.NET to identify an incoming user. 
         -->
    <authentication mode="Forms"/>
    <!--
             The <customErrors> section enables configuration 
             of what to do if/when an unhandled error occurs 
             during the execution of a request. Specifically, 
             it enables developers to configure html error pages 
             to be displayed in place of a error stack trace.

         <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
             <error statusCode="403" redirect="NoAccess.htm" />
             <error statusCode="404" redirect="FileNotFound.htm" />
         </customErrors>
         -->
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <!-- 
         The system.webServer section is required for running ASP.NET AJAX under Internet
         Information Services 7.0\.  It is not necessary for previous version of IIS.
     -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule"/>
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory"/>
      <remove name="ScriptHandlerFactoryAppServices"/>
      <remove name="ScriptResource"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:08:54.397

`>`在集会上被遗忘了

```
 >
  </assemblies> 
```

如果您仍然继续收到 500 错误，请阅读此答案

[部署网站：500 - 内部服务器错误](https://stackoverflow.com/questions/5385714/deploying-website-500-internal-server-error/5385884#5385884)

说明如何获取有关真正错误的详细信息，而不是一般消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:12:43.530

我已经编辑了 Question 中给出的 Xml，从中删除了几个额外的 > 字符，包括 @Aristos 的遗忘 > 建议 >，请检查新格式化的 web.config

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T07:30:10.617

500 错误是一种通用的服务器端错误，它可能指示多种情况（编译问题、异常等）。由于重复的自定义标题“X-Content-Type-Options”，我们遇到了此类问题。

```
<httpProtocol>
  <customHeaders>
<remove name="X-Content-Type-Options" />
    <add name="X-Content-Type-Options" value="nosniff" />
     -----------------------------
     -----------------------------
    <add name="X-Content-Type-Options" value="nosniff" />
  </customHeaders>
</httpProtocol> 
```

如果您不确定其他代码或配置更改，请尝试在 web.config 文件中启用错误描述。

```
<configuration>
 <system.webServer>
      <httpErrors errorMode="Detailed" />
  </system.webServer>
  <system.web>
      <customErrors mode="Off" />
      <compilation debug="true" />
  </system.web>
 </configuration> 
```

# java - 加载并连接到 mysql jdbc 驱动程序运行时

> ID：10780919
> 
> 赞同：2
> 
> 时间：2012-05-28T07:31:15.750
> 
> 标签：java, mysql, runtime

我目前正在处理需要加载 mysql 驱动程序运行时并使用 java 连接到数据库的需求。

我`URLClassLoader`用来加载jar文件

```
File f = new File("D:/Pallavi/workspace/WarInstallation/mysql-connector-java-5.0.4-bin.jar"); //Jar path

URLClassLoader urlCl = new URLClassLoader(new URL[] { f.toURL()},System.class.getClassLoader()); 
Class sqldriver = urlCl.loadClass("com.mysql.jdbc.Driver"); // Runtime loading

Driver ds = (Driver) sqldriver.newInstance(); //Compilation failing as "sqldriver" class of type Driver is not found

//I am using now java.sql.Driver to remove the compilation error

sqldriver = Class.forName("com.mysql.jdbc.Driver", true, sqldriver.getClassLoader()).newInstance(); //Runtime fail.. "Driver" Class not Found Exception. 
```

尽管该类加载良好，但无论我尝试使用哪种驱动程序，我都无法建立数据库连接（找不到适合的驱动程序...）。

请提出一种加载 jdbc " `com.mysql.jdbc.Driver`" 类运行时的方法。如果您需要任何进一步的信息，请告诉我，因为这很紧急。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T22:27:01.467

在回答您的问题之前，我有三个问题：

1.  **声明 1**：

    `ya, I have set the classpath of mysql jar in the environment variables, do we need to set it through system properties?`

    **Q1** : 为什么要依赖自定义类加载器，当一个类可以从类路径中随时提供给 System 类加载器？
    您不需要显式的类路径`mysql***.jar`来使用自定义类加载器。

2.  **声明 2**：

    `Class sqldriver = urlCl.loadClass("com.mysql.jdbc.Driver"); // Runtime loading
    //Compilation failing as "sqldriver" class of type Driver is not found
    Driver ds = (Driver) sqldriver.newInstance();`

    **Q2**：声明*`Compilation failing ...`*非常矛盾。您的编译器是否正在寻找这样的类来生成您的类！？
    我确定不是。可能是错误是在运行时使用`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`. 而且我还怀疑评论应该与您下面的*声明 3*一起使用。
    如果是`CNFE`，则您的文件路径`mysql***.jar`错误。先修好。

3.  **声明 3**：

    `//I am using now java.sql.Driver to remove the compilation error
    //Runtime fail.. "Driver" Class not Found Exception. sqldriver = Class.forName("com.mysql.jdbc.Driver", true, sqldriver.getClassLoader()).newInstance();`

    **Q3**：声称*`... "Driver" Class not Found Exception`*是可疑的。因为，这个语句不会被编译。那么它怎么可能是*运行时失败。..* !?
    我还怀疑评论应该与您上面的*声明 2*一起使用。
    在这里，您需要在分配给变量之前调用`newInstance()`然后强制转换。因为只返回一个[与给定字符串名称的类或接口关联的对象](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)。 如果上述*声明 2*中的问题得到修复，您可以应用此修复来进一步测试。 `java.sql.Driver``sqlDriver``Class.forName( ...`[`Class`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)

 *让我希望你能澄清这些陈述。

* * *

我在下面有一个工作示例代码，并为您显示了经过测试的输出。

```
import java.io.File; // and others as required

public class MySQLDriveClassLoader {
  public static void main( String [] args ) throws Exception {
    //File f = new File( "/home/ravinder/soft-dump/mysql-connector-java-5.1.18-bin.jar" );
    File f = new File( "E:\\Soft_Dump\\mysql-connector-java-5.0.4\\mysql-connector-java-5.0.4-bin.jar" );
    URLClassLoader urlCl = new URLClassLoader( new URL[] { f.toURI().toURL() }, System.class.getClassLoader() );

    Class mySqlDriver = urlCl.loadClass( "com.mysql.jdbc.Driver" );

    //*** Start: DEBUG *************************
    //mySqlDriver.con // On pressing CTRL+SPACEBAR, after .con, IDE shows "No default proposals"
    // meaning it still is not an instance of Driver, and hence can't call a method from Driver class.

    //Incompatible conditional operand types Class and Driver
    //System.out.println( mySqlDriver instanceof java.sql.Driver ) );

    System.out.println( "mySqlDriver: " + mySqlDriver );
    System.out.println( "Is this interface? = " + mySqlDriver.isInterface() );

    Class interfaces[] = mySqlDriver.getInterfaces();
    int i = 1;
    for( Class _interface : interfaces ) {
      System.out.println( "Implemented Interface Name " + ( i++ ) + " = " + _interface.getName() );
    } // for(...)

    Constructor constructors[] = mySqlDriver.getConstructors();
    for( Constructor constructor : constructors ) {
      System.out.println( "Constructor Name = " + constructor.getName() );
      System.out.println( "Is Constructor Accessible? = " + constructor.isAccessible() );
    } // for(...)
    //*** End  : DEBUG *************************

    Driver sqlDriverInstance = ( Driver ) mySqlDriver.newInstance();
    System.out.println( "sqlDriverInstance: " + sqlDriverInstance );

    Connection con = null;
    try {
      /******************************************************************
      // You may fail to register the above driver
      // hence don't depend on DriverManager to get Connected
      //DriverManager.registerDriver( sqlDriverInstance );
      //Driver driver = DriverManager.getDriver( "com.mysql.jdbc.Driver" ); // ( "jdbc:mysql" );
      Enumeration<Driver> enumDrivers = DriverManager.getDrivers();
      while ( enumDrivers.hasMoreElements() ) {
        Driver driver = enumDrivers.nextElement();
        System.out.println( "driver: " + driver );
      } // while drivers
      //******************************************************************/

      String dbUrl = "jdbc:mysql://:3306/test";
      Properties userDbCredentials = new Properties();
      userDbCredentials.put( "user", "root" );
      userDbCredentials.put( "password", "password" );

      // No suitable driver found for ...
      //con = DriverManager.getConnection( dbUrl, "root", "password" );

      // safely use driver to connect
      con = sqlDriverInstance.connect( dbUrl, userDbCredentials );
      System.out.println( "con: " + con );

      Statement stmt = con.createStatement();
      String sql = "select now()";
      ResultSet rs = stmt.executeQuery( sql );
      if ( rs.next() ) {
        System.out.println( rs.getString( 1 ) );
      } // if rs
    } catch( Exception e ) {
      e.printStackTrace(); // only for quick debug
    } finally {
      try { if ( con != null ) con.close(); } catch ( Exception ignoreThis ) {}
    }
  } // psvm(...)
} // class MySQLDriveClassLoader 
```

成功编译并运行，产生以下输出：

```
mySqlDriver: class com.mysql.jdbc.Driver
Is this interface? = false
Implemented Interface Name 1 = java.sql.Driver
Constructor Name = com.mysql.jdbc.Driver
Is Constructor Accessible? = false
sqlDriverInstance: com.mysql.jdbc.Driver@1270b73
con: com.mysql.jdbc.Connection@32fb4f
2012-05-29 03:52:12.0 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T08:15:01.410

`DriverManager`忽略在运行时加载的类，它只适用于由系统类加载器加载的类。

您可以创建一个 Dummy 驱动程序类来封装您的实际数据库驱动程序。源代码可以在[这里](http://www.kfu.com/~nsayer/Java/dyn-jdbc.html)找到。

无关：

[`File.toURL`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#toURL%28%29)`File`已弃用，而是使用`toURL`on获取 URL`URI`

```
URLClassLoader urlCl = new URLClassLoader(new URL[] { f.toURI().toURL()},System.class.getClassLoader()); 
```*

# c# - XPS 文件中是否可以有密码，以便只有授权的 C# 代码才能在 WPF 文档查看器中打开它？

> ID：10780921
> 
> 赞同：1
> 
> 时间：2012-05-28T07:31:28.307
> 
> 标签：c#, wpf, xps, documentviewer

我们都听说 XPS 是微软对 Adob​​e PDF 的回应。由于 PDF 文件有密码功能，所以我想知道 XPS 文件中是否也有这样的功能。

**为什么和我想要它：-**

我需要显示一些以 XPS 格式存储在文件系统中的书籍。我不希望用户在没有我的应用程序的情况下打开它们，因为在我的应用程序中我有文档查看器，我在其中禁用了打印和复制。

现在我可以在这些 XPS 文件中提供密码，这样它们就不能在我的应用程序之外打开了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:58:17.050

我也在寻找这样的东西。最后我知道 XPS 文件是 xml 格式的文件。它也是全球知名的，因此如果您了解如何保护的知识。比它自己还不太安全。可能是您更改了这些文件的扩展名。为此，我为这些文件创建了一个自定义文件扩展名并提供了我自己的加密，然后我只能在我的 wpf 应用程序中打开这些文件。这是一些可以帮助您的链接。

[http://msdn.microsoft.com/en-us/library/ms748388.aspx](http://msdn.microsoft.com/en-us/library/ms748388.aspx)

[http://msdn.microsoft.com/en-us/magazine/cc163664.aspx](http://msdn.microsoft.com/en-us/magazine/cc163664.aspx)

[http://xpsreader.codeplex.com/](http://xpsreader.codeplex.com/)

[http://www.ericsink.com/wpf3d/B_Printing.html](http://www.ericsink.com/wpf3d/B_Printing.html)

[http://blogs.msdn.com/b/ptallett/archive/2006/05/11/595612.aspx](http://blogs.msdn.com/b/ptallett/archive/2006/05/11/595612.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:36:39.780

你可能会看

[加密服务](http://msdn.microsoft.com/en-us/library/92f9ye3s.aspx)

您的应用程序中将拥有解密密钥（证书）。但他们可能会破解您的应用程序以提取证书。

涉及更多，但使用 RMS，您可以锁定 XPS 文档。您组织的知识产权应该是安全且高度安全的。Active Directory 权限管理服务 (AD RMS) 是 Windows Server 2008 R2 的一个组件，可帮助确保只有需要查看文件的个人才能查看文件。AD RMS 可以通过识别用户对文件的权限来保护文件。可以配置权限以允许用户打开、修改、打印、转发或对权限管理信息采取其他操作。借助 AD RMS，您现在可以保护分布在网络之外的数据。

[SecureXPS](http://windows.microsoft.com/en-US/windows-vista/Set-permissions-for-an-XPS-document)

# html - 不被 css 覆盖的链接

> ID：10780926
> 
> 赞同：2
> 
> 时间：2012-05-28T07:31:43.967
> 
> 标签：html, css

在我的 CSS 中，我有一个带有 id 的主容器`main`。在 CSS 中，它看起来像这样：

```
#main a:hover, #main a:active, #main a:focus {
    background: none repeat scroll 0 0 #095197;
    color: #FFFFFF;
} 
```

特别是`div`我希望链接样式有所不同：

```
.main_list_div .text_div .mainbt a.bt {
    width: 100px;
    height: 26px;
    background: url(../image/bt.png) no-repeat;
    display: block;
    margin-top: 22px;
    text-decoration: none
}
.main_list_div .text_div .mainbt a.bt:hover,
.main_list_div .text_div div.mainbt link.bt:hover {
    width: 100px;
    height: 26px;
    background: url(../image/bth.png) no-repeat;
    display: block;
    margin-top: 22px;
    text-decoration: none;
    background-color: transparent
} 
```

我的 HTML 是：

```
<div class="main_list_div">         
    <div class="image_div"><img src="images/directory/1338033387.jpg"></div>
    <div class="text_div">
        <div class="company_name">Yahoo India</div> 
        <div class="category_name">Manufacturers of Primary Category / Secondary Category / Secondary Category</div> 
        <div class="mainbt"><a href="directory-list/yahoo/yahoo-india.html" class="bt"></a></div>
    </div>

    <div class="clear"></div>
</div> 
```

问题是`a (link)`被覆盖但`a:hover`不是。我该如何覆盖`a:hover`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:42:24.000

I think that the issue is that the first rule `#main a:hover` has higher precedence that the second rule `.main_list_div .text_div .mainbt a.bt:hover`. If I recall correctly id selectors have a weight of 100, class and attribute selectors a weight of 10 and element selectors a weight of 1, the rule with the highest precedence wins - if there are rules with the same precedence then the position that the rules are defined is used to determine the outcome. In your example the first rule would have a precedence of 111, the second 51.

As mentioned in other answers you don't have a `.mainbt` element.

Just found another SO answer that [explains precedence in more detail](https://stackoverflow.com/a/667585/540765).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T07:35:20.120

似乎`mainbt`任何地方都没有带类的元素。所以css选择器将不匹配。

您可能应该使用如下选择器：

```
.main_list_div .text_div a.bt:hover { ... } 
```

# entity-framework - 将实体框架与 monodroid 一起使用？

> ID：10780927
> 
> 赞同：0
> 
> 时间：2012-05-28T07:31:54.507
> 
> 标签：entity-framework, xamarin.android

我看过一些文档建议 monodroid 可以支持实体管理器。这是真的？我记得读过monodroid是基于2.0框架的，而实体框架似乎是3.5及以上的技术，所以我在这里有点困惑。有没有人有这方面的经验？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:37:57.797

好吧，在花了大约一个小时寻找这些信息之后，我一发布消息 D 就找到了答案。

不支持。可在此处检查 monodroid 可用的功能：

[http://support.xamarin.com/customer/portal/articles/375825-how-does-mono-compare-to-net-4-0-](http://support.xamarin.com/customer/portal/articles/375825-how-does-mono-compare-to-net-4-0-)

# celery - 为什么我的芹菜开始几天后占用高CPU？

> ID：10780931
> 
> 赞同：1
> 
> 时间：2012-05-28T07:32:22.737
> 
> 标签：celery

当我启动 celeryd 并运行两三天时，每次总是占用非常高的 cpu（大约 100%）。

同时，任务的处理速度非常慢（20-30 秒）。

这是我的 celeryconfig.py：

```
BROKER_URL = "mongodb://mongodb_server:27017/celery"                                                                                                                                                        
CELERY_RESULT_BACKEND = "mongodb"                                                
CELERY_IMPORTS = ("cate.tasks",)                                                 

CELERY_SEND_TASK_ERROR_EMAILS = True                                             
ADMINS = (                                                                       
        ("...", "..."),                                             
    )                                                                            

SERVER_EMAIL = "dev-no-reply@ele.me"                                             

#ETA_CELERY_PRECISION = 0.1                                                      
#CELERY_DISABLE_RATE_LIMIT = True                                                
CELERY_MAX_TASKS_PER_CHILD = 1                                                   
CELERY_IGNORE_RESULT = True                                                      
CELERYD_PREFETCH_MULTIPLIER = 1                                                  
#CELERYD_FORCE_EXECV = True                                                      
CELERY_SEND_EVENTS = True                                                        

#CELERY_ENABLE_UTC = True                                                        
#CELERY_TIMEZONE = "Asia/Shanghai"                                               

CELERY_ROUTES = {"cate.tasks.push_ios_message": {"queue": "push_ios_message"}} 
```

# excel - 如何使用 Userform 对两个数字求和并将其输出到 MsgBox 中？

> ID：10780939
> 
> 赞同：1
> 
> 时间：2012-05-28T07:33:05.503
> 
> 标签：excel, vba, userform

我创建了一个带有三个文本框的用户表单。

第一个文本框用于输入第一个数字，第二个文本框用于输入第二个数字，最后一个是结果。

我创建了一个名为Calculate 的按钮。

我有 textbox1 的代码：

```
Private Sub TextBox1_Change()
Dim a As Integer
a = Val(TextBox1.Text)
End Sub 
```

这对于textbox2：

```
Private Sub TextBox2_Change()
Dim b As Integer
b = Val(TextBox2.Text)
End Sub 
```

我有一个显示结果的按钮

```
Private Sub CommandButton1_Click()
Dim c As Integer
c = a + b
MsgBox (c)
End Sub 
```

我为 textbox1 输入 1，为 textbox2 输入 2，1+2 将是 3，但在 MsgBox 中我看到 0。这是为什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:58:29.350

我不会将框的值分配给变量（除非它们是全局变量，否则变量生命的范围是例程，因此变量将在 sub() for each 结束后消失，所以当命令按钮事件发生时，变量不再存在），直接引用它们即可。只需为您的命令按钮添加它，它就可以完成这项工作。

```
Private Sub CommandButton1_Click()

MsgBox(TextBox1.Value + TextBox2.Value)

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T01:36:01.587

变量的声明必须是一般的，它不应该在子...

* * *

```
Dim a As Integer
Dim c As Double
Dim b As Integer

Private Sub CommandButton1_Click()
 c = a + b
 MsgBox (c)

End Sub

Private Sub TextBox1_Change()
a = Val(TextBox1.Text)
End Sub

Private Sub TextBox2_Change()
b = Val(TextBox2.Text)
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T09:25:07.133

```
Private Sub Calculate_Click()
Dim a As Integer
Dim b As Integer
Dim c As Integer
a = Val(`TextBox1.Text`)
b = Val(`TextBox2.Text`)
c = a + b
MsgBox (c)
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-08T13:41:32.937

```
Dim a As Double
Dim b As Double
Dim c As Double

Private Sub CommandButton1_Click()

a = Val(TextBox1.Text)
b = Val(TextBox2.Text)

c = a + b

MsgBox (c)

End Sub 
```

# php - Firefox 抱怨有效的 json ......不可见的无效字符？

> ID：10780944
> 
> 赞同：0
> 
> 时间：2012-05-28T07:33:32.603
> 
> 标签：php, javascript, special-characters, json

我正在编写一个需要将 2D 数组作为 json 加载到 js 变量中的 php 脚本。首先我制作数组，然后使用 json_encode 将其转换为字符串。然后我运行一点 js 让它在客户端可以访问。像这样：

```
$sBaseData = Filters::$sFilterBaseTypeData;
$sBaseData = str_replace('\r',' ',$sBaseData);
$sBaseData = str_replace('\n',' ',$sBaseData);
$sBaseData = str_replace('\t',' ',$sBaseData);

echo <<<HTML
    <script type="text/javascript">
        var validation_data = JSON.parse('$sBaseData');
    </script>
HTML; 
```

Firefox 在这里抱怨一个意外的字符：

```
var validation_data = JSON.parse('{"enumeration":{"js":"","msg":""},"date":{"js":" var parts = widget.value.split('-'); var d = new Date(parts[0],parts[1],parts[2]); PASS = (d.getDay()>=1); ","msg":"Invalid date. Please Enter a date in the format: YYYY-MM-DD"},"text":{"js":"","msg":"what did you do?"},"integer":{"js":"if (isNaN(widget.value)) { PASS = false; } else { intVal = parseInt(widget.value); PASS = (widget.value == intVal); } ","msg":"Please enter an integer value"},"decimal":{"js":"PASS = isNaN(widget.value); ","msg":"Please enter a number"},"group":{"js":"","msg":""},"dealer":{"js":"","msg":""}}') 
```

我尝试使用[http://jsonlint.com/](http://jsonlint.com/)来找出哪个角色有问题，但它说这一切都有效且精彩。我替换了一些导致问题的字符，还有什么我应该替换的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:36:46.483

呃...

> ```
> var parts = widget.value.split('-'); 
> ```

把它放在一个使用单引号的字符串中会破坏它。[使用 JSON 编码器输出您的 JavaScript 文字](https://stackoverflow.com/a/10290293/20862)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:41:16.720

问题是您`'`在使用`'`引用字符串时在字符串中。

如果你的 json 字符串是有效的，你甚至不需要解析它。以下将起作用。

```
echo <<<HTML
    <script type="text/javascript">
        var validation_data = {$sBaseData};
    </script>
HTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:41:59.760

您的 JSON 是有效的，但在您的 js 代码中，简单的引号关闭了解析函数的参数。

试试这样：

```
"date":{"js":" var parts = widget.value.split(\'-\'); 
```

# javascript - 无法使用 Firefox 以外的 javascript 读取 XML 文件

> ID：10780948
> 
> 赞同：0
> 
> 时间：2012-05-28T07:34:16.440
> 
> 标签：javascript, xml, firefox, xmlhttprequest

我正在使用以下代码来读取外部 xml 文件：

```
if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari

   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.open("GET","myxmlfile.xml",false);
 xmlhttp.send();
 xmlDoc=xmlhttp.responseXML; 
```

但是上面的代码似乎只适用于 Firefox 而不是 Chrome/IE/Opera。

在 Chrome 中，我在控制台中收到错误，因为不允许跨域访问，但我的 xml 文件、js 文件和 html 文件都在我本地硬盘驱动器的同一个文件夹中。

对此有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:03:48.237

您可能在没有 http 服务器的情况下在本地测试它。

从根本上来说，ajax 请求必须使用同一个域，如果您向不同的站点发出 ajax 请求，它将被浏览器阻止（这是一种安全功能，可以防止人们从其他网站读取浏览器所有者的数据）。大多数浏览器以相同的方式阻止对本地文件系统的访问，以防止（例如）恶意电子邮件附件。你会得到一个错误，比如`XMLHttpRequest cannot load file:///path/to/your/data.html. Origin null is not allowed by Access-Control-Allow-Origin.`

如果您在 Linux 或 Mac 上或安装了 python 启动 http 服务器的最简单方法是使用`python -m SimpleHTTPServer`html 文件根目录中的命令，那么您可以`http://localhost:8000/file.html`在 Windows 上查看它们，那么您可能需要配置 IIS （请记住，默认情况下 IIS 不支持某些文件扩展名`.json`，因此您可能必须对其进行配置）。

如果您仍然希望/需要在本地测试而不必摆弄 http 服务器，那么您可以运行 Chrome `--allow-file-access-from-files`（更新 Chrome exe 的快捷方式或使用此开关从终端运行 Chrome）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:44:37.870

如前所述，您需要将文件放在 http 服务器中才能正确测试。您可以使用本地 Apache 实例对其进行正确测试。这样，浏览器就不会阻止您的 ajax 调用。

# android - 从列表中删除多个项目

> ID：10780952
> 
> 赞同：-1
> 
> 时间：2012-05-28T07:34:45.517
> 
> 标签：android, list

我制作了一个带有复选框的自定义适配器，我想从列表中删除选中的项目。

即使我尝试过

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(),
                    android.R.layout.simple_list_item_multiple_choice, <Array Items>); 
```

但未能删除多个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:44:02.837

除了刷新您的列表视图之外，我实际上想不出其他任何东西：

> this.expAdapter.notifyDataSetChanged();

因为我自己正在处理列表视图并且数据删除很好。无需重新创建任何东西，只需确保您正在修改适配器正在使用的数据源（而不是它的副本，例如）并在完成后通知他您更改了数据。

# spring - Spring MVC 和 Spring Data Rest

> ID：10780953
> 
> 赞同：2
> 
> 时间：2012-05-28T07:35:02.287
> 
> 标签：spring, model-view-controller, spring-data-rest

我需要同时使用 Spring-Data-Rest 1.0.0.M2 在 Spring MVC 应用程序中创建一个控制器。我已经在 web.xml 中创建了两个 servlet，它们在单独时可以正常工作，但在我想将它们一起加载时就不行了。我可以同时使用网络层吗？如何正确设置配置？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:08:41.540

此链接说明如何将 Spring-Data-Rest 添加到现有 Spring MVC 应用程序： [https ://github.com/SpringSource/spring-data-rest/wiki/Adding-Spring-Data-REST-to-an-existing- Spring-MVC-应用程序](https://github.com/SpringSource/spring-data-rest/wiki/Adding-Spring-Data-REST-to-an-existing-Spring-MVC-Application)

# iphone - 创建一个圆形骰子并检测一个数字，当骰子停止滚动时，该数字作为结果出现在指定位置

> ID：10780956
> 
> 赞同：0
> 
> 时间：2012-05-28T07:35:17.937
> 
> 标签：iphone, objective-c, ios, image-rotation, dice

我正在开发一个应用程序，其中有一个圆形骰子，例如：当我单击图像的中心时，它会旋转

在第一个图像中是在旋转之前表示初始状态，第二个图像是在旋转图像之后，并且在这个数字 3 中显示在结果指针上。我的问题是如果掷骰子是数字 3，如何检测结果。我想要出现在结果箭头上的数字。

在按钮点击我做： -

创建一个像角度一样的随机数。并将图像旋转到该角度。

```
-(IBAction)diceButtonClicked:(id)sender
{
    float angle=arc4random()%360;
    NSLog(@"%f",angle);
    toAngle=angle;
    if (fromAngle+toAngle<360) {
        toAngle=fromAngle+toAngle;
    }
    else
    {
        if (toAngle<30) {

            toAngle=angle+30;
        }
        else
        {
            toAngle=angle;
        }
    }
     [self rotateDiceMethod];

  }

My logic for image rotation:-

  [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut]; 
   diceNumbers.transform = CGAffineTransformRotate(startTransform,toAngle);
    [UIView commitAnimations];
    startTransform=diceNumbers.transform;
    fromAngle=toAngle; 
```

请任何人帮助我如何知道我的骰子的结果是什么，或者我应该遵循什么方法来实现我所需的功能。

任何建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:50:26.847

您知道旋转的确切角度。最简单的方法是检测旋转的角度并得到相应的值。

例如：

```
- (int)getDiceValue  {
   // Total 6 number, so 360/6 = 60 deg for each number and make sure totalRotatedAngle is from 0 to 359
   if (totalRotatedAngle < 30 || totalRotatedAngle >= 300)  {return 1;}
   else if (totalRotatedAngle >= 30 && totalRotatedAngle < 90)  {return 6;}
   ...
} 
```

还有一件事，CGAffineTransformRotate 将弧度值作为参数。因此，您必须在转换之前将旋转角度从度数转换为弧度。

# sql - ExecuteStoreQuery 和“WHERE IN ({0})

> ID：10780958
> 
> 赞同：0
> 
> 时间：2012-05-28T07:35:23.680
> 
> 标签：sql, executestorequery

我得到以下代码：

```
string query = "select * from dbo.Personnel where PersonnelId in ({0})";
string param = "1, 2";
var test = model.ExecuteStoreQuery<Personnel>(query, param).ToList(); 
```

我收到以下错误：“将 nvarchar 值 '1, 2' 转换为数据类型 int 时转换失败。”...

有谁知道如何解决这个问题？我想要的是`select * from dbo.Personnel where PersonnelId in (1, 2)`，但数字可以是任何数字......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:04:56.497

Don't send param to `ExecuteStoreQuery`, just replace `{0}` with `param`

```
string param = "1, 2";
string query = string.Format("select * from dbo.Personnel where PersonnelId in ({0})", param); 
```

or

```
string query = "select * from dbo.Personnel where PersonnelId in ({0})";
query = query.Replace("{0}",param);

var test = model.ExecuteStoreQuery<Personnel>(query).ToList(); 
```

# php - “包含”文件未运行查询

> ID：10780959
> 
> 赞同：0
> 
> 时间：2012-05-28T07:35:29.477
> 
> 标签：php, browser, include

我以前从未见过这种情况，甚至不确定我能否正确解释它，但我迫切需要一个解决方案。

我的网站使用页眉和页脚文件。当您直接从浏览器访问文件时，它们可以正常工作。但是当我使用“include”函数通过另一个文件访问它们时，对文件的查询不起作用。就我而言，页眉和页脚文件需要确定查看器是否已登录。这些文件本身就可以正常工作。如果我直接通过浏览器访问文件（按地址：website/html/header.php），查询功能和结果是正确的。如果我去我的 index.php 页面，它使用： include("$webpath/html/header.php"); header.php 文件中的查询不返回正确的数据。

我最近刚刚将该网站转移到一个新的虚拟主机。这些文件在以前的虚拟主机上运行良好，所以我假设它是虚拟主机中的设置或其他东西？虽然我在控制面板中没有看到任何与此相关的内容，但网络主机发誓它应该可以正常运行。

有任何想法吗？我将不胜感激任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:51:38.160

你总是可以这样做：

```
<?php 
function loadContent($file){
    if(!file_exists($file)){die($file.' not found.');}
    ob_start();
    require($file);
    $return = ob_get_contents();
    ob_end_clean();
    return $return;
}

echo loadContent("$webpath/html/header.php");
?> 
```

# .net - 如何从同一个 EXE 应用程序中同时引用 x86 和任何 CPU 程序集？

> ID：10780972
> 
> 赞同：3
> 
> 时间：2012-05-28T07:36:27.207
> 
> 标签：.net, .net-assembly, target-platform

我有两个第 3 方集会。一个是为 x86 目标编译的，另一个是为任何 CPU 编译的。有没有办法从同一个应用程序中使用它们。

现在我的应用程序编译成功但无法运行。我尝试为 x86 和 Any CPU 构建我的 EXE 文件，但没有运气。我可以使用**corflags**更改目标平台位，但程序集已签名，我不想更改它们的签名。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T07:41:02.397

*您可以引用它们 - 但只有在条目 .exe 程序集设置为 x86或*设置为任何 CPU 并在 x86 机器上运行时，应用程序才会运行。在 IIS 托管进程的情况下，位数由 IIS 本身决定。

举例来说 - 我刚刚创建了这个 vs2010 解决方案：[https ://docs.google.com/open?id=0Bw_NnV9fhgmgSGxGOEZXSnVsd1k](https://docs.google.com/open?id=0Bw_NnV9fhgmgSGxGOEZXSnVsd1k)

控制台应用程序可以是 x86/Any APU 并引用两个库 - 一个是 x86，一个是 Any CPU。

如果您将 exe 设置为 x86 并在 x64 上运行它，那么它工作正常（显然它在 x86 上工作没有问题）。但是，如果您将 exe 设置为 Any CPU 并在 x64 上运行它，它将崩溃（带有`BadImageFormatException`）。同样，在 x86 上运行它仍然可以工作。

入口程序集的风格决定了进程的位数；因此可以加载的任何程序集的预期位数。

在您的情况下，您关注的程序集可能不一定是问题 -*他们*引用的程序集。这个例外可能会告诉你更多。

# c# - 当应用程序通过任务管理器或系统重新启动被杀死时如何优雅地退出 C# 应用程序

> ID：10780984
> 
> 赞同：0
> 
> 时间：2012-05-28T07:37:37.283
> 
> 标签：c#, winforms, shutdown

我有一个 C# Windows 应用程序，当他登录到应用程序时将用户标记为已登录数据库，并在他退出应用程序时将他标记为已注销。

我的问题是当用户通过任务管理器杀死应用程序或系统重新启动而不注销应用程序时，我的应用程序没有将用户标记为在数据库中注销。

在这两种情况下，有没有办法将用户标记为已注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:10:15.893

您无法通过这种方式解决最初的问题（在数据库中将用户标记为已注销）。考虑另一种解决方案，例如数据库表中的某个日期时间列，每个登录用户都会定期更新该列，告诉您的应用程序用户还活着。

# ruby-on-rails - 如何在 Rails 3.0.0 中安装 Prawn gem

> ID：10780986
> 
> 赞同：0
> 
> 时间：2012-05-28T07:37:52.337
> 
> 标签：ruby-on-rails

我正在使用导轨 3.0.0。我试图安装虾宝石。但我不知道如何安装。请帮我安装那个gem。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:51:53.283

您应该使用 *prawn_rails* gem。您只需将它包含在您的 Gemfile 中，如下所示：

```
gem 'prawn_rails' 
```

然后运行`bundle install`。在此处查看自述文件部分：[https ://github.com/Whoops/prawn-rails](https://github.com/Whoops/prawn-rails)

# java - Apache wicket：如何显式更新表单？

> ID：10780988
> 
> 赞同：0
> 
> 时间：2012-05-28T07:38:06.363
> 
> 标签：java, validation, wicket

我在页面上遇到 ListView 和验证问题。

我有 ListView，在它下面有 TextField，用户可以在其中输入值。我的页面上有“发布”和“草稿保存”按钮。发布是一个按钮，其中显示弹出窗口（ModalWindow），用户应在其中确认输入的数据。保存草稿是在不确认的情况下保存。两者都是 SecuredAjaxLink 对象。

当用户在 TextField 中输入数据时，它会保存在 ListView 中，但整个列表不会更新，因为用户应该按下下面的按钮 Add。还行吧。

问题是，我有业务验证，用户输入的信息会检查一些规则。当验证失败时，所有字段（包含错误信息）都会用 css 突出显示。要从 TextField 显式添加值到 ListView 我正在做

```
target.addComponent(form); 
```

这是在数据进入验证之前执行的。所以所有字段都更新了。这适用于发布按钮（带有确认模态窗口），但不适用于没有弹出窗口的链接。据我了解，目标的生命周期有问题，但我坚持下去。

也许有人有类似的东西或知道答案？

如何在不使用弹出窗口的情况下更新页面？

这是代码：草稿链接：

```
add(new SecuredAjaxSubmitLink(LinkNames.savelaterLink.toString(), form,
                RoleController.CONTROLLER.getAccessController()) {
            @Override
            public void onSubmit(AjaxRequestTarget target, Form form) {
                target.addComponent(form);
                insert(appl, false, form, target, new MainMenu(getString("accept.application.draft.success.message")), trail, checkbox);
            } 
```

发布链接：

```
add(new CustomAjaxSubmitLink(LinkNames.submitLink.toString(), form,
                RoleController.CONTROLLER.getAccessController()) {
            @Override
            protected void onSubmit(AjaxRequestTarget target, Form form) {
                target.addComponent(form);
                publishPopup.show(target);
            }
        });

publishPopup.setWindowClosedCallback(new ModalWindow.WindowClosedCallback() {
            public void onClose(AjaxRequestTarget target) {
                if (ApplicationInsertActionPanel.this.getSelectedAction() != null
                        && ApplicationInsertActionPanel.this.getSelectedAction().equals(Action.CONFIRM)) {
                    insert(appl,
                            true,
                            form,
                            target,
                            new MainMenu(ApplicationInsertActionPanel.this
                                    .getString("accept.application.publish.success.message")), trail, checkbox);
                }

            }
        }); 
```

我已经添加

```
@Override
            protected void onError(final AjaxRequestTarget target, Form<?> form)
            {
                super.onError(target, form);
                target.addComponent(form); 
```

到我的草稿链接，但页面仍未完全更新。我想这是因为目标的生命周期没有结束，就像我使用弹出窗口时它正在结束一样。弹出窗口正在打开“新页面”并且可以更新旧目标，但是当我不使用弹出窗口时，页面保持原样。所以现在我正在考虑一些解决方法来结束目标生命周期。我在考虑没有任何功能的透明弹出窗口，但确实是非常肮脏的解决方案。

有任何想法吗？谢谢！}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:43:36.783

我的英语不太好，我不完全理解你的帖子。是吗：在文本字段中键入单词->其中一个提交按钮->单词出现在列表视图上？如果你想验证输入为什么不使用继承自的类`IValidator.class`

如果你想更新你的表单，你可以在你的表单中添加一个 updatebehaviour

```
final AjaxFormSubmitBehavior            formbehavior    = new AjaxFormSubmitBehavior("onChange") {
    @Override
    protected void onError(AjaxRequestTarget arg0) {
        arg0.add(getForm());
    }

    @Override
    protected void onSubmit(AjaxRequestTarget arg0) {
        arg0.add(getForm());
    }
}; 
```

然后您可以将此行为添加到您的表单或将其扩展到您的需要

```
form.add(formbehavior) 
```

我不知道您的问题是否与我的回答有关，但我想您想知道如何在不加载新页面的情况下更新表单。

# sql-server - sql server 默认过程权限

> ID：10780990
> 
> 赞同：1
> 
> 时间：2012-05-28T07:38:29.653
> 
> 标签：sql-server, stored-procedures, permissions, create-table

我想知道 sql server 存储过程的默认权限是什么。例如，我在数据库中创建了一个用户，但除了执行权限之外没有授予任何角色或权限，例如：

```
GRANT EXECUTE ON SCHEMA :: [dbo] TO [newUser] 
```

后来我（作为**sa**登录）创建了一个存储过程，它只从表中进行选择，例如：

```
CREATE PROCEDURE dbo.selectX AS
BEGIN
 SELECT ID, NAME FROM MyTable
END 
```

我的用户 [ **newUser** ] 可以执行并查看 select 语句的结果，例如：

```
EXEC dbo.selectX 
```

到目前为止，我可以假设存储过程具有我的用户没有的默认权限。我尝试了其他 dmls，如**UPDATE**、**INSERT**、**DELETE**并且用户成功地执行了程序。但！当我使用 ddl 创建一个过程作为创建表时 .. 例如：

```
CREATE PROCEDURE dbo.crtNT AS
BEGIN

    CREATE TABLE del(id int) --for test
END 
```

并且当 newUser 执行此过程时，会发生如下错误：

```
CREATE TABLE permission denied in database 'MyDb' 
```

这是我的问题：**默认情况下，存储过程是否对 DML(select, insert, update vs.) 有权限，但对 DDL(create, drop table vs.) 没有权限**？因为我在联机丛书或其他任何地方都没有看到任何关于这种情况的解释。任何意见都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:22:28.773

您的假设是正确的，即 DDL 语句的处理方式不同。

带有 DML 语句的过程通过[所有权链接](http://msdn.microsoft.com/en-us/library/ms188676%28v=sql.105%29.aspx)[`EXECUTE AS`](http://msdn.microsoft.com/en-us/library/ms178106%28v=sql.105%29.aspx)机制工作，但是正如文档中的引用所述

> 请记住，所有权链接仅适用于 DML 语句。

# objective-c - 发出 http 请求

> ID：10780992
> 
> 赞同：0
> 
> 时间：2012-05-28T07:38:42.083
> 
> 标签：objective-c, iphone, xcode, ipad

我对 xcode 完全陌生。我想在详细视图中显示一些文本。单击该链接时，应将其定向到该链接的详细视图本身。我需要为此发出http请求。有人可以指导我完成这个吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:40:11.230

使用内置于 iOS 库中的 NSUrlConnection，另一个是 ASIHTTP 第三方库。谷歌他们两个，看看一些教程。

# javascript - 我们如何通过 JSP scriptlet 获取 JavaScript 数组

> ID：10780996
> 
> 赞同：2
> 
> 时间：2012-05-28T07:38:58.027
> 
> 标签：javascript, jsp

我需要由 Java 类返回的 JavaScript 数组/多维，

```
<script type="text/javascript">
     var strComboValue  = <%=DBComboOptions.getOptions(combos)%>;
</script> 
```

这里，`strComboValue`是一个 JavaScript 变量和`DBComboOptions.getOptions(combos)`Java 类中的返回数组。现在我想要 JavaScript 中的那个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:29:32.490

只需让 Java/JSP 打印一个语法上有效的 JS 数组语法。请记住，Java/JSP 和 JavaScript 不会同步运行。Java/JSP 将 HTML 作为一个整体生成，`String`而 JS 只是其中的一部分。一旦从 Java/JSP 检索到所有 HTML 输出，JS 最终会在 Web 浏览器中运行。

假设您最终想要以下有效的 JS 数组语法：

```
<script type="text/javascript">
    var strComboValue = [ "one", "two", "three" ];
</script> 
```

然后您应该相应地编写您的 Java/JSP 代码，以便它准确地打印该语法：

```
<script type="text/javascript">
    var strComboValue = [ 
<% 
    String[] options = DBComboOptions.getOptions(combos);
    for (int i = 0; i < options.length; i++) {
%>
        "<%= options[i] %>"
<%
        if (i + 1 < options.length) {
%>
            ,
<%
        }
    }
%>
    ];
</script> 
```

它只是非常不可读（不仅因为使用[老式的](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files) *脚本*而不是标记库）。然而，更简单的是获取像[Google Gson](http://code.google.com/p/google-gson/)这样的 JSON（JavaScript 对象表示法）库并创建一个附加方法`getOptionsAsJson()`，该方法执行以下操作：

```
public getOptionsAsJson(Object value) {
    return new Gson().toJson(getOptions(value));
} 
```

最后改用它：

```
<script type="text/javascript">
    var strComboValue = <%=DBComboOptions.getOptionsAsJson(combos)%>;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:43:31.087

你可以使用 json 库，在[http://json.org](http://json.org)上有很多 json 库，即

```
int[] arr = new int [] {1,2,3}; // java 
```

转换成：

```
var arr = [1,2,3];  // javascript 
```

# wpf - 从 WPF 中提取文本

> ID：10780998
> 
> 赞同：0
> 
> 时间：2012-05-28T07:39:04.613
> 
> 标签：wpf, text

我有一些包含文本的 xaml 文件，这个文本在模式中，比如这个路径和画布我需要一种将它们转换为行文本的方法；谢谢你

```
<Path Data="M603.0815,627.8994C590.7485,627.8994,580.7505,617.9014,580.7505,605.5674C580.7505,593.2354,590.7485,583.2374,603.0815,583.2374C615.4145,583.2374,625.4115,593.2354,625.4115,605.5674C625.4115,617.9014,615.4145,627.8994,603.0815,627.8994z" Height="45.677" Canvas.Left="504.149" StrokeStartLineCap="Flat" Stretch="Fill" StrokeEndLineCap="Flat" Stroke="White" StrokeThickness="1.015" StrokeMiterLimit="4" StrokeLineJoin="Miter" Canvas.Top="482.064" Width="45.676"/>
            <Canvas Height="45.311" Canvas.Left="500.553" Opacity="0.7599949836730957" Canvas.Top="478.508" Width="45.309">
                <Canvas Height="45.311" Canvas.Left="0" Canvas.Top="0" Width="45.309">
                    <Canvas.Clip>
                        <PathGeometry Figures="M584.42,624.485 C574.056,614.12 574.055,597.314 584.42,586.948 C594.786,576.583 611.591,576.583 621.956,586.948 z" FillRule="Nonzero">
                            <PathGeometry.Transform>
                                <MatrixTransform Matrix="1,0,0,1,-576.646606445313,-579.174255371094"/>
                            </PathGeometry.Transform>
                        </PathGeometry>
                    </Canvas.Clip>
                    <Path Data="F1M584.42,624.485C574.056,614.12,574.055,597.314,584.42,586.948C594.786,576.583,611.591,576.583,621.956,586.948z" Height="45.311" Canvas.Left="0" Stretch="Fill" Canvas.Top="0" Width="45.309">
                        <Path.Fill>
                            <LinearGradientBrush EndPoint="0.562,0.679" StartPoint="0.454,0.215">
                                <GradientStop Color="White" Offset="0"/>
                                <GradientStop Color="White" Offset="1"/>
                            </LinearGradientBrush>
                        </Path.Fill>
                        <Path.OpacityMask>
                            <LinearGradientBrush EndPoint="0.562,0.679" StartPoint="0.454,0.215">
                                <GradientStop Color="Black" Offset="0"/>
                                <GradientStop Color="sc#0.6782913, 0, 0, 0" Offset="0.080963134765625"/>
                                <GradientStop Color="sc#0.4013089, 0, 0, 0" Offset="0.18010848760604858"/>
                                <GradientStop Color="sc#0.178047657, 0, 0, 0" Offset="0.31294554471969604"/>
                                <GradientStop Color="sc#0.02753514, 0, 0, 0" Offset="0.54220128059387207"/>
                                <GradientStop Color="sc#0, 0, 0, 0" Offset="1"/>
                                <GradientStop Color="sc#0, 0, 0, 0" Offset="1"/>
                            </LinearGradientBrush>
                        </Path.OpacityMask>
                    </Path>
                </Canvas>
            </Canvas>
            <Path Data="F1M232.805,421.572C229.604,421.572,226.683,422.892,224.564,425.017L224.564,425.017C222.448,427.145,221.128,430.081,221.128,433.312L221.128,433.312L221.128,439.382L221.128,472.247C221.128,475.478,222.446,478.415,224.566,480.544L224.566,480.544C226.683,482.667,229.599,483.987,232.807,483.987L232.807,483.987L327.873,483.987C331.076,483.987,333.995,482.667,336.113,480.544L336.113,480.544C338.232,478.415,339.548,475.478,339.548,472.247L339.548,472.247L339.548,453.323L339.548,447.284L339.548,433.312C339.548,430.081,338.233,427.145,336.111,425.017L336.111,425.017C333.995,422.892,331.078,421.572,327.873,421.572L327.873,421.572z M222.652,460.445L222.652,433.312C222.652,430.513,223.792,427.968,225.632,426.124L225.632,426.124C227.471,424.275,230.009,423.128,232.805,423.128L232.805,423.128L327.873,423.128C330.667,423.128,333.206,424.275,335.048,426.124L335.048,426.124C336.883,427.968,338.026,430.513,338.026,433.312L338.026,433.312L338.026,447.284L338.024,453.323L338.024,472.247C338.024,475.046,336.884,477.591,335.047,479.434L335.047,479.434C333.206,481.285,330.667,482.43,327.873,482.43L327.873,482.43L232.807,482.43C230.011,482.43,227.471,481.285,225.63,479.434L225.63,479.434C223.792,477.591,222.652,475.046,222.652,472.247L222.652,472.247z" Height="62.415" Canvas.Left="145.034" Stretch="Fill" Canvas.Top="320.906" Width="118.42">
                <Path.Fill>
                    <LinearGradientBrush EndPoint="0.5,0" StartPoint="0.5,1">
                        <GradientStop Color="White" Offset="0"/>
                        <GradientStop Color="White" Offset="0.080001801252365112"/>
                        <GradientStop Color="#FF878687" Offset="0.69325298070907593"/>
                        <GradientStop Color="sc#1, 0.307234675, 0.303684026, 0.307234675" Offset="0.88050458675388654"/>
                        <GradientStop Color="sc#1, 0.448453128, 0.445626259, 0.448453128" Offset="0.92941428201599052"/>
                        <GradientStop Color="sc#1, 0.6357934, 0.6339267, 0.6357934" Offset="0.96216528915308075"/>
                        <GradientStop Color="sc#1, 0.859842, 0.8591236, 0.859842" Offset="0.98765014041117993"/>
                        <GradientStop Color="White" Offset="1"/>
                        <GradientStop Color="White" Offset="1"/>
                    </LinearGradientBrush>
                </Path.Fill>
            </Path>
            <Canvas Height="57.274" Canvas.Left="147.674" Opacity="0.5" Canvas.Top="323.477" Width="113.02">
                <Canvas Height="57.274" Canvas.Left="0" Opacity="0.38999900221824646" Canvas.Top="0" Width="113.02">
                    <Path Data="M336.788,456.73L336.788,434.419C336.788,428.765,332.133,424.143,326.449,424.143L320.519,424.143L305.105,424.143L234.111,424.143C228.425,424.143,223.769,428.765,223.769,434.419L223.769,456.73L223.768,439.382L223.768,471.14C223.768,476.795,228.422,481.417,234.107,481.417L240.037,481.417L255.451,481.417L326.444,481.417C332.128,481.417,336.783,476.795,336.783,471.14L336.783,439.382z" Height="57.274" Canvas.Left="0" Stretch="Fill" Canvas.Top="0" Width="113.02">
                        <Path.Fill>
                            <LinearGradientBrush EndPoint="-0.039,0.5" StartPoint="1.213,0.5">
                                <GradientStop Color="White" Offset="0"/>
                                <GradientStop Color="#FFC5C5C5" Offset="0.69325298070907593"/>
                                <GradientStop Color="sc#1, 0.5962005, 0.5962005, 0.5962005" Offset="0.88050458675388654"/>
                                <GradientStop Color="sc#1, 0.678514, 0.678514, 0.678514" Offset="0.92941428201599052"/>
                                <GradientStop Color="sc#1, 0.787711, 0.787711, 0.787711" Offset="0.96216528915308075"/>
                                <GradientStop Color="sc#1, 0.9183046, 0.9183046, 0.9183046" Offset="0.98765014041117993"/>
                                <GradientStop Color="White" Offset="1"/>
                                <GradientStop Color="White" Offset="1"/>
                            </LinearGradientBrush>
                        </Path.Fill>
                    </Path>
                </Canvas>
            </Canvas>
            <Canvas Height="46.997" Canvas.Left="147.674" Canvas.Top="323.477" Width="113.02">
                <Canvas.Clip>
                    <PathGeometry Figures="M320.519,424.143 L305.105,424.143 L234.112,424.143 C228.425,424.143 223.769,428.765 223.769,434.419 L223.769,434.419 L223.769,456.731 L223.768,439.382 L223.768,471.14 C243.672,458.167 336.788,434.419 336.788,434.419 L336.788,434.419 C336.788,428.765 332.133,424.143 326.449,424.143 L326.449,424.143 z" FillRule="Nonzero">
                        <PathGeometry.Transform>
                            <MatrixTransform Matrix="1,0,0,1,-223.768005371094,-424.143005371094"/>
                        </PathGeometry.Transform>
                    </PathGeometry>
                </Canvas.Clip>
                <Path Data="F1M320.519,424.143L305.105,424.143L234.112,424.143C228.425,424.143,223.769,428.765,223.769,434.419L223.769,434.419L223.769,456.731L223.768,439.382L223.768,471.14C243.672,458.167,336.788,434.419,336.788,434.419L336.788,434.419C336.788,428.765,332.133,424.143,326.449,424.143L326.449,424.143z" Height="46.997" Canvas.Left="0" Stretch="Fill" Canvas.Top="0" Width="113.02">
                    <Path.Fill>
                        <LinearGradientBrush EndPoint="-0.039,0.5" StartPoint="1.213,0.5">
                            <GradientStop Color="White" Offset="0"/>
                            <GradientStop Color="White" Offset="1"/>
                        </LinearGradientBrush>
                    </Path.Fill>
                    <Path.OpacityMask>
                        <LinearGradientBrush EndPoint="-0.039,0.5" StartPoint="1.213,0.5">
                            <GradientStop Color="Black" Offset="0"/>
                            <GradientStop Color="sc#0.5, 0, 0, 0" Offset="0.22740978002548218"/>
                            <GradientStop Color="sc#0, 0, 0, 0" Offset="1"/>
                        </LinearGradientBrush>
                    </Path.OpacityMask>
                </Path>
            </Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:56:58.243

看看它是如何在名为 locbaml 的 Microsoft 示例应用程序中完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:47:29.500

您可能需要考虑将 XmlDataProvider 与合适的 XPath 或 XslTransform 之类的

```
<?xml version="1.0"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="text()">
   <xsl:copy />
</xsl:template>

</xsl:stylesheet> 
```