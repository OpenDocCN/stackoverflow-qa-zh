# StackOverflow 问答 12370000-12370999

# c++ - 检测超出数组访问冲突

> ID：12370002
> 
> 赞同：3
> 
> 时间：2012-09-11T12:42:44.320
> 
> 标签：c++, c, memory-management, gdb

我已经修改了模拟器的一小部分，但我遇到了奇怪的分段错误。GDB 显示错误出现在我未修改的类中。我猜我的代码在访问自己的数组时存在内存访问冲突，从而破坏了其他数组的内容（在程序内存空间中分配）。是否有任何调试工具来检测超出数组范围但在程序空间内的访问？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T12:44:15.320

简而言之，[Valgrind](http://valgrind.org/)会做到这一点。只需运行它`valgrind /path/to/executable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:47:07.123

您正在寻找[valgrind](http://valgrind.org)。

它至少在大多数 linux 发行版上都可以作为一个包使用，并且会检测内存访问。

只需使用 valgrind 启动程序：

`valgrind ./program`

# jquery-mobile - jQuery移动页面转换在外部页面上不起作用

> ID：12370003
> 
> 赞同：0
> 
> 时间：2012-09-11T12:42:44.837
> 
> 标签：jquery-mobile

我在我的应用程序（HTML5 移动应用程序）中使用 jQuery 移动页面转换功能：

```
<a href="test.html" data-transition="slide">abc</a> 
```

但它不工作。出现一个带有旋转图像和加载消息的弹出窗口，但什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T06:55:32.983

添加属性

```
rel="external"

<a href="test.html" data-transition="slide" rel="external">abc</a> 
```

> 这将加载外部页面.. 但你不能指望页面过渡动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:12:06.307

如果加载图标出现在页面加载上（甚至在点击链接之前），那么您几乎可以肯定在您的调用页面中有一个 JS 错误。

检查以下内容：

*   您的 JQM 包括正在以正确的顺序调用
    [http://jquerymobile.com/demos/1.1.1/docs/about/getting-started.html](http://jquerymobile.com/demos/1.1.1/docs/about/getting-started.html)
*   检查控制台中的错误

JQM 网站可能相当古怪，而且很难提供完整的样本。如果可能，请显示您的标签和控制台输出的片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:56:45.720

这应该有效。

但就您而言，我认为您可能没有使用正确的 jquery mobile`CSS`和`JS`files。

参考**[现场演示](http://jsfiddle.net/SivaCharan/rfjfQ/1/)**

有关详细信息，请参阅**[页面转换](http://jquerymobile.com/test/docs/pages/page-transitions.html)**

# django - Django / vBulletin 单点登录

> ID：12370005
> 
> 赞同：3
> 
> 时间：2012-09-11T12:42:47.080
> 
> 标签：django, single-sign-on, django-authentication, vbulletin

为同一域上的 Django 项目和 vBulletin 板进行单点登录 (SSO) 的最简单方法是什么？

我有一个现有的 vBulletin 用户数据库。我研究了 Django 的[RemoteUserBackend](https://docs.djangoproject.com/en/dev/howto/auth-remote-user/)和 vBulletin 的[vBSSO](http://www.vbulletin.org/forum/showthread.php?t=270517)，但我还没有找到完整的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T01:54:07.977

我不了解 Django，但是当您遇到这样的事情时，请搜索“bridges”。很有可能有人已经为您做到了。

这三个信息来源也可以帮助您完成自己的桥梁：

**Drupal 桥**
[http://drupalcode.org/project/drupalvb.git/blob/9b5ab7b93043edfc2fe09c083cc9108344e26577:/drupalvb.inc.php](http://drupalcode.org/project/drupalvb.git/blob/9b5ab7b93043edfc2fe09c083cc9108344e26577:/drupalvb.inc.php)

**CakePHP 桥**
[https://github.com/ceeram/static_bakery/blob/master/src/articles/2010/01/Vbulletin-Bridge-For-CakePHP.rst](https://github.com/ceeram/static_bakery/blob/master/src/articles/2010/01/Vbulletin-Bridge-For-CakePHP.rst)

**通用桥**
[http://www.saurdo.com/11/11/utilizing-the-vbulletin-database-in-your-main-site](http://www.saurdo.com/11/11/utilizing-the-vbulletin-database-in-your-main-site)

基本上，您需要查看 cookie 并匹配 vBulletin DB 中的会话哈希以确保用户已登录，然后您可以收集所有用户信息。

引用做 Generig Bridge 的第三个链接：

```
/* Check if session exist then return user id*/
function get_session($hash){

    dbconnect();

    $hash = mysql_real_escape_string($hash);

    $ip = implode('.', array_slice(explode('.', $_SERVER['REMOTE_ADDR']), 0, 4 - 1));
    $newidhash = md5($_SERVER['HTTP_USER_AGENT'] . $ip);

    $query = "SELECT * FROM session WHERE sessionhash = '".$hash."' LIMIT 1";
    $result = mysql_query($query);   

    if(mysql_num_rows($result) > 0){
        $row = mysql_fetch_array($result);

        $sessionhash = $row['sessionhash'];
        $idhash = $row['idhash'];
        $userid = $row['userid'];
        $lastactive = $row['lastactivity'];

        return ($idhash == $newidhash && (time() - $lastactive) < 900) ? $userid : false;
    }
    return false;   
} 
```

检查数据库中的 cookie 值：

```
function get_cookie($id, $pass){

    dbconnect();

    $id = mysql_real_escape_string($id);

    $query = "SELECT * FROM user WHERE userid = ".$id." LIMIT 1";
    $result = mysql_query($query);  

    if(mysql_num_rows($result) > 0){
        $row = mysql_fetch_array($result);
        $dbpass = $row['password'];

        // vb might change the salt from time to time. can be found in the /includes/functions.php file
        if(md5($dbpass . '0d582e0835ec6697262764ae6cb467fb') == $pass){
            return $id;
        }
    }
    return false;   
} 
```

将其全部包装起来以确定用户是否已登录：

```
function check_login(){
    if(isset($_COOKIE['bb_userid']) && isset($_COOKIE['bb_password'])){
        if(get_cookie($_COOKIE['bb_userid'], $_COOKIE['bb_password'])){
            return $_COOKIE['bb_userid'];
        }
    }
    if(isset($_COOKIE['bb_sessionhash'])){
        if(get_session($_COOKIE['bb_sessionhash'])){
            return get_session($_COOKIE['bb_sessionhash']);
        }
    }
    return false;
} 
```

检索要显示的用户信息：

```
function user_info($id){
    dbconnect();
    $result = mysql_query("SELECT * FROM user WHERE userid = ".mysql_real_escape_string($id)." LIMIT 1";);
    return mysql_fetch_array($result);
} 
```

最后，在某处使用上述功能。像这样：

```
if($li = check_login()){
    dbconnect();
    $uinfo = user_info($li);

    $q_lastactivity = "UPDATE user SET lastactivity = '".time()."' WHERE userid = ".$li." LIMIT 1";
    mysql_query($q_lastactivity);

    if((time() - $uinfo['lastactivity']) > 900){
        $q_lastvisit = "UPDATE user SET lastvisit = '".$uinfo['lastactivity']."' WHERE userid = ".$li." LIMIT 1";
        mysql_query($q_lastvisit);  }
} 
```

我希望它可以帮助你取得一些进展。

# jsf - p:dataTable 和 p:columns 自定义宽度

> ID：12370006
> 
> 赞同：0
> 
> 时间：2012-09-11T12:42:51.310
> 
> 标签：jsf, primefaces

我有一个通过 `p:columns`标签包含动态列的数据表，并希望为每列指定不同的宽度。

我的代码如下

```
<p:dataTable id="scheduleDataTable" value="#{scheduleMB.scheduledRecords}" var="sched" rows="10">
        <p:columns value="#{scheduleMB.columns}" var="column" columnIndexVar="colIndex" styleClass="day-column">  
            <f:facet name="header">
                #{column.header}
            </f:facet>

            #{sched[column.property]}
        </p:columns>  
    </p:dataTable> 
```

在css文件中我有宽度

```
.ui-state-default .day-column{
 width: 150px !important;
} 
```

我什至试过 styld="width:150px;" 它们都不起作用，列是用默认值绘制的。

但我想要不同的列宽，我该怎么做。我尝试在 styleClass="col1,col2" 中指定多个 css，在 facet 中指定

```
<f:facet name="style">
    #{column.size}
</f:facet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T15:45:44.240

您可以使用 EL width="#{column.width}" 设置每列的宽度。您的列类需要具有宽度属性。

```
<p:dataTable id="scheduleDataTable" value="#{scheduleMB.scheduledRecords}" var="sched" rows="10">
    <p:columns value="#{scheduleMB.columns}" var="column" 
      width="#{column.width}" 
      columnIndexVar="colIndex" styleClass="day-column">  
        <f:facet name="header">
            #{column.header}
        </f:facet>

        #{sched[column.property]}
    </p:columns>  
</p:dataTable> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:45:44.120

为 PrimeFaces 设置列宽的官方方法是使用无单位整数`DataTable`定义元素的`width`属性。`column`像这样：

```
<p:column width="70">
    <h:outputText value="#{element.prop}" />
</p:column> 
```

您可以使用 EL 让控制器定义宽度。

该建议适用于 PF 的 3.3 和 3.4 版本，对于较旧的版本可能有所不同。在最近的几次版本更新中，细节已经改变了好几次，所以你可能还想查阅[迁移指南](http://code.google.com/p/primefaces/wiki/MigrationGuide)

# ruby-on-rails - Heroku 给出“我们很抱歉，但出了点问题。” 错误。但是应用程序在开发机器上工作

> ID：12370008
> 
> 赞同：0
> 
> 时间：2012-09-11T12:42:52.790
> 
> 标签：ruby-on-rails, heroku

我刚刚创建了一个简单的 rails 应用程序并将其推送到 heroku。在我的系统中，它工作正常。但是在 Heroku 中，如果我访问主页，我会收到错误消息“我们很抱歉，但出了点问题。”。这是我的heroku日志...我该如何解决？

```
 2012-09-11T12:12:03+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
    2012-09-11T12:12:03+00:00 app[web.1]: 
    2012-09-11T12:12:03+00:00 heroku[router]: GET evening-tor-7280.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=556ms status=500 bytes=643
    2012-09-11T12:12:04+00:00 heroku[router]: GET evening-tor-7280.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=12ms status=200 bytes=0
    2012-09-11T12:28:55+00:00 app[web.1]: 
    2012-09-11T12:28:55+00:00 app[web.1]: 
    2012-09-11T12:28:55+00:00 app[web.1]: Started GET "/" for 113.59.222.3 at 2012-09-11 12:28:55 +0000
    2012-09-11T12:28:55+00:00 app[web.1]: 
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
    2012-09-11T12:28:55+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:67:in `rescue in call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:61:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__512560152559991210__call__407393761818664548__callbacks'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
    2012-09-11T12:28:55+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
    2012-09-11T12:28:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
    2012-09-11T12:28:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
    2012-09-11T12:28:55+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
    2012-09-11T12:28:55+00:00 app[web.1]: 
    2012-09-11T12:28:55+00:00 app[web.1]: 
    2012-09-11T12:28:55+00:00 heroku[router]: GET evening-tor-7280.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=7ms status=500 bytes=643
    2012-09-11T12:28:55+00:00 heroku[router]: GET evening-tor-7280.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=6ms status=304 bytes=0
    2012-09-11T12:36:13+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by pubudu.th@gmail.com
    2012-09-11T12:36:16+00:00 heroku[run.1]: Awaiting client
    2012-09-11T12:36:16+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
    2012-09-11T12:36:16+00:00 heroku[run.1]: State changed from starting to up
    2012-09-11T12:36:22+00:00 heroku[run.1]: Client connection closed. Sending SIGHUP to all processes
    2012-09-11T12:36:23+00:00 heroku[run.1]: Process exited with status 1
    2012-09-11T12:36:23+00:00 heroku[run.1]: State changed from up to complete
    2012-09-11T12:36:34+00:00 app[web.1]: 
    2012-09-11T12:36:34+00:00 app[web.1]: 
    2012-09-11T12:36:34+00:00 app[web.1]: Started GET "/" for 113.59.222.3 at 2012-09-11 12:36:34 +0000
    2012-09-11T12:36:34+00:00 app[web.1]: 
    2012-09-11T12:36:34+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:61:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:67:in `rescue in call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__512560152559991210__call__407393761818664548__callbacks'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
    2012-09-11T12:36:34+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
    2012-09-11T12:36:34+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
    2012-09-11T12:36:34+00:00 app[web.1]: 
    2012-09-11T12:36:34+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
    2012-09-11T12:36:34+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
    2012-09-11T12:36:34+00:00 app[web.1]: 
    2012-09-11T12:36:34+00:00 heroku[router]: GET evening-tor-7280.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=8ms status=500 bytes=643
    2012-09-11T12:36:34+00:00 heroku[router]: GET evening-tor-7280.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=38ms status=304 bytes=0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:24:59.817

您的应用程序正在寻找连接到数据库，请查看`ActiveRecord::ConnectionNotEstablished`您的日志。

将提供和`pg`之间连接的 gem添加到您的 gemfile 中，Heroku 应该会自动连接。`AR``postgres`

# android - 快速单击按钮时对话框打开两次

> ID：12370010
> 
> 赞同：13
> 
> 时间：2012-09-11T12:43:01.547
> 
> 标签：android, button, android-alertdialog

我有`Button`，单击时会显示`Dialog`. 一切都像一个魅力，但如果我双击按钮或快速单击按钮，`Dialog`打开两三下。我必须单击后退按钮两次或三次才能关闭`Dialog`.

我已经搜索了有关*SO*的相关问题，但大多数答案都建议**禁用按钮或使用变量并将其设置为 true 和 false**，这不是我的要求。

如果有人知道如何解决这个问题，请帮助我。

**我用过的代码**

```
// Delete item on click of delete button
holder.butDelete.setOnClickListener(new OnClickListener() {         
@Override
    public void onClick(View v) {
        Dialog passwordDialog = new Dialog(SettingsActivity.this);      
        passwordDialog.show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T12:53:11.293

您只需检查**您的`Dialog`是否已显示**：

```
Dialog passwordDialog = new Dialog(SettingsActivity.this);
holder.butDelete.setOnClickListener(new OnClickListener() {           
    @Override
    public void onClick(View v) {                  
        if(!passwordDialog.isShowing()) {
            passwordDialog.show();
        }
    }
}); 
```

**更新：**

如果这在您的情况下不起作用，那么在您的活动中**全局声明**：

```
Dialog passwordDialog = null; 
```

并`Button`点击：

```
holder.butDelete.setOnClickListener(new OnClickListener() {           
    @Override
    public void onClick(View v) {                  
        if(passwordDialog == null) {
            passwordDialog = new Dialog(SettingsActivity.this); 
            passwordDialog.show(); 
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-19T10:10:00.800

全球宣布：

```
private Boolean dialogShownOnce = false;
private mDialog dia; 
```

你`dialog.show();`的名字在哪里：

```
dia = new mDialog(getContext());

if (!dia.isShowing() && !dialogShownOnce) {
    dia.show();
    dialogShownOnce = true;
}

dia.setOnDismissListener(new DialogInterface.OnDismissListener() {
    @Override
    public void onDismiss(DialogInterface dialog) {
        dialogShownOnce = false;
    }
}); 
```

mDialog 不必是全局的，但我调用`mDialog.dismiss()`了一些超出本地范围的接口。

仍然使用 a `Boolean`，但我不明白为什么不能使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-30T06:39:23.123

将此代码放在您要显示对话框的位置，它会根据其标签名称检查是否存在对话框。

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
Fragment prevFragment = getFragmentManager().findFragmentByTag("dialog");
if (prevFragment != null) {
    return;
}

MyDialog dialog = MyDialog.newInstance();
dialog.show(ft, "dialog"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-05T12:38:19.067

我遇到了同样的问题。这就是我修复它的方式

```
private AlertDialog.Builder alertDialogBuilder;
private AlertDialog alertDialog; 
```

全局声明上述变量

```
alertDialogBuilder = new AlertDialog.Builder(this); 
```

然后像上面一样在**OnCreate**方法中创建**alertDialogBu​​ilder**

 **```
 private void AlertDialogMessage(){
        alertDialogBuilder.setMessage("Internet disconnected!");
        alertDialogBuilder.setCancelable(true);
        alertDialogBuilder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        alertDialog = alertDialogBuilder.create();
   } 
```

我们刚刚在这个函数中烘焙了我们的警报对话框。**在OnCreate**方法中调用此函数。
它应该在**alertDialogBu​​ilder**创建语句之后调用。之后在您的按钮**OnClickListener 中将其**放在下面的代码中。

```
 if (!alertDialog.isShowing()){
        alertDialog.show();
   } 
```

而已。它解决了我的问题。希望它也能解决您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-24T16:20:26.797

调用该`show()`方法时需要一点时间才能`isShowing()`返回*true*。
起初，它返回*false*，因为对话入口动画尚未完成。我的解决方案是构建对话框类的新实现。

```
public class ObedientDialog extends Dialog{

    private boolean showing;

    public ObedientDialog(Context context) {

        setOnCancelListener(new OnCancelListener() {
            @Override
            public void onCancel(DialogInterface dialog) {
                showing=false;
            }});

        setOnDismissListener(new OnDismissListener() {
            @Override
            public void onDismiss(DialogInterface dialog) {
                showing=false;
            }});
    }

    @Override
    public void show() {
        if (!showing) super.show();
        showing=true;
    }

    public boolean isShowing(){
        return showing;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T12:47:34.127

单击按钮后禁用该按钮，并在取消对话框后再次启用该按钮。像下面

```
 holder.butDelete.setOnClickListener(new OnClickListener()
            {           
                @Override
                public void onClick(View v)
                {   
                    holder.butDelete.setEnabled(false);
                    Dialog passwordDialog = new Dialog(SettingsActivity.this);      
                    passwordDialog.show();
                }
            }); 
```

如果它不起作用，您必须获取一个布尔变量并使用它来显示和取消对话框。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-02T09:59:49.473

您也可以使用下面给出的代码

```
 private long mLastClickTime = 0;

public boolean isSingleClick() {
            if (SystemClock.elapsedRealtime() - mLastClickTime < 1000) {
                return false;
            }
            mLastClickTime = SystemClock.elapsedRealtime();
            return true;
        }

    if(isSingleClick){
    openDialog();
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-11T12:50:21.267

您可能应该通过覆盖`onCreateDialog()`方法然后调用`showDialog()`. 那会解决你的问题。

见[http://developer.android.com/reference/android/app/Activity.html#onCreateDialog(int, android.os.Bundle)](http://developer.android.com/reference/android/app/Activity.html#onCreateDialog%28int,%20android.os.Bundle%29)

> 用于创建由活动为您管理（保存和恢复）的对话框的回调。默认实现调用 onCreateDialog(int) 以实现兼容性。如果您的目标是 HONEYCOMB 或更高版本，请考虑改用 DialogFragment。

例子：

```
public class TestActivity extends Activity {

private static final int TEST_DIALOG_ID = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    showDialog(TEST_DIALOG_ID);
}

@Override
protected Dialog onCreateDialog(int id) {
    if(id == TEST_DIALOG_ID) {
        Dialog passwordDialog = new Dialog(this);      
        return passwordDialog;
    }
    return super.onCreateDialog(id);
}

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-05-06T09:46:57.197

尝试这个。

**步骤 1.**将对话框对象声明为实例变量或全局变量

```
 private MediaPlayerDialog dialog; 
```

**第 2 步。**现在将下面的代码放入您的按钮单击中。

```
 if (dialog == null || (!dialog.isVisible())) {
        dialog = new MediaPlayerDialog();
        dialog.setData(songListDatas, selectPosition);
        dialog.show(getSupportFragmentManager(), dialog.getClass().getName().toString());
    } 
```

**注意：** `MediaPlayer`是我的自定义`DialogFragment`，您可以根据您的要求进行更改。

**祝你好运**

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-09-11T12:54:43.793

试试这样...

```
Dialog passwordDialog = new Dialog(SettingsActivity.this);

holder.butDelete.setOnClickListener(new OnClickListener()
{           
            @Override
            public void onClick(View v)
            {                         
                if(!passwordDialog.isShowing()) {   
                   passwordDialog.show();
                }
            }
}); 
```**

# uitableview - 如何将 GMGridView 放入 UITableViewCell 的方法？

> ID：12370011
> 
> 赞同：1
> 
> 时间：2012-09-11T12:43:03.357
> 
> 标签：uitableview, cell, gmgridview, gmgridviewcell

我不知道我应该如何将 GMGridView（仅限水平）放入 UITableViewCell，我尝试添加为子视图，但它搞砸了......有什么想法吗？

代码其实很简单...

```
HorizontalGridViewController *pics = [[HorizontalGridViewController alloc] init];
[pics setPicsArray: picsArray];
[cell addSubview:[pics view]]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:13:03.303

您需要将框架设置`gridViewController`为仅在单元格内部的东西，否则它可能会完全离开单元格而根本不会显示，或者它可能会进入内部然后再次进入外部并且看起来完全不稳定。

# eclipse - 无法使用 Flash Builder 4.6 构建项目

> ID：12370012
> 
> 赞同：0
> 
> 时间：2012-09-11T12:43:04.273
> 
> 标签：eclipse, apache-flex, flexbuilder, flash-builder

每当我进行构建或清理构建时，都会出现以下错误：

```
An internal error occured during:"Searching for Markers" 
```

在具有 8 GB RAM 的 Windows 7 上使用 Flash Builder 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:15:35.603

您是否尝试过 Project > Clean...？我总是遇到内部构建错误，甚至更奇怪的错误是，如果不从源属性中删除 @Embed('') 位，就无法嵌入半打左右的图像。Project > Clean... 几乎每次都会修复它。不幸的是，有几次它没有，我最终不得不重新安装 Flash Builder，这是一个非常痛苦的过程。

编辑：哎呀。这可能是您所指的“干净构建”。我在想这是你试图构建的一个普通项目，但它失败了。我的错。

# php - PHP和C语言中的增量运算符

> ID：12370018
> 
> 赞同：0
> 
> 时间：2012-09-11T12:43:26.833
> 
> 标签：php, c, math, increment

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

关于增量运算符，我遇到了一个奇怪的问题。

我在 PHP 和 C 中得到相同表达式的不同输出。

`In C language`

```
main()
{
    int i = 5;
    printf("%d", i++*i++); // output 25;
} 
```

`In PHP`

```
$i = 5;
echo $i++*$i++; // output 30 
```

谁能解释这种奇怪的行为？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:45:28.020

在 C 中，结果是未定义的，因为两个操作数中的任何一个都可以先求值，因此第二次读取它是错误的。

而且，在 PHP 中，如果结果是 42 等待对 php.ini 进行一些更改，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:45:28.080

在这种风格中使用时，的行为`++`是未定义的，因为您不确切知道`++`操作何时发生以及值何时从`x++`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:44:53.240

这是一个优先事项。看看[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:52:18.617

这是未定义的行为，因为当作为函数参数传递时，`i++`或`++i`或`--i`或`i--`不按任何特定顺序递增/递减。

不仅如此，如果我没记错的话，我相信这`printf("%d", i++*i++);`只是输出`5*5`然后增加`i`两次。

记住`++i`操作前的增量，操作`i++`后的增量。考虑这段代码：

```
int i, x = 5;

int i = x++;   // i is now equal to 5 and x is equal to 6 because the increment happened after the = operation.
x = 5;         //set x back to 5
i = ++x;       //i is now equal to 6 and x is equal to 6 because the increment happened before the = operation. 
```

情况就是这样，`C`但我不能保证`PHP`。

# android - 如何仅在用户注册之前显示表单注册。

> ID：12370019
> 
> 赞同：2
> 
> 时间：2012-09-11T12:43:30.590
> 
> 标签：android, registration, launch

**我有什么**：我的 apk 有应有的任务。一个帐户的注册和我的apk的主菜单。

**我想要什么**：第一次启动应用程序时，必须显示注册表格。用户完成注册后（通过服务器检查），将启动应用程序菜单。（因此下次表单注册将不再启动。）

**问题**：我该怎么做？有人可以告诉我怎么做吗？一些教程或一些代码片段？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:47:35.803

为此目的使用共享偏好。像这样在表单注册的 oncreat() 方法中使用它

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub!!
    super.onCreate(savedInstanceState);

        SharedPreferences versionfile  = getSharedPreferences(PREFS_NAME,Context.MODE_PRIVATE);
         boolean  isRegister =versionfile.getString("Registration",false);
         if(isRegister){
                 setContentView(R.id.yourRegistrationlayout)
         }else
                      //Start menu Activity

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:56:55.807

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。保存这些首选项以用于此目的。

```
class MainMenu extends Activity {
  protected static final String PREFS_USER = "user";

  @Override
  public void onStart() {
    super.onStart(); //don't forget this, because you must call parent onStart method
    SharedPreferences prefs = getSharedPreferences( PREFS_FILE, 0);
    String userKey = prefs.getString("userKey", null );

    //if user key is not set yet, you should open registration Activity
    if (userKey == null) {
      Intent intent = new Intent(this, Registration.class);
      startActivity(intent);
    }
  }
} 
```

O 使用 onStart 方法，因为完成后需要重新检查用户注册。

然后用户成功注册，你可以设置用户密钥这个代码：

```
SharedPreferences prefs = getSharedPreferences( PREFS_FILE, 0);
prefs.edit().putString("userKey", userKey ).commit(); 
```

另外，你可以结合[startActivityforResult](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

一些额外的参考和解释可以在[这里找到](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:46:01.460

使用[共享偏好](http://developer.android.com/reference/android/content/SharedPreferences.html)来[存储](http://developer.android.com/guide/topics/data/data-storage.html)信息，无论用户是否已经注册。根据此节目注册或直接进入主菜单。

```
public static final String PREFS_NAME = "PrefLogFile";
public static final String PREF_REGISTERED = "registered";
final SharedPreferences pref = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    // sets righr preferences

    boolean registered = pref.getBoolean(PREF_REGISTERED, false);
    if (registered) {
        //go to main menu here
    }else{
     //do registration here

   //after registration is complete do this:       
   pref.edit().putBoolean(PREF_REGISTERED, true).commit();

    } 
```

# winforms - 如何将属性添加到 .bak 文件中，当我们右键单击时可能可见并且可见？

> ID：12370023
> 
> 赞同：2
> 
> 时间：2012-09-11T12:43:43.433
> 
> 标签：winforms

在文件系统上，是否可以以编程方式将元属性（当我们右键单击文件并在属性选项卡中可见时出现的属性）添加到 .BAK 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:19:03.270

对的，这是可能的。您需要读取文件的元数据，然后创建一个 .BAK 文件以编程方式编写它们。

# .net - Windbg 发生获取时间异常

> ID：12370026
> 
> 赞同：1
> 
> 时间：2012-09-11T12:43:51.400
> 
> 标签：.net, windbg

我知道命令 !dumpheap -type Exception 将显示所有异常，如下所示

```
.foreach (ex {!dumpheap -type Exception -short}){.echo "********";!pe ${ex} } 
```

然而，在我目前正在尝试调试的应用程序中，它看起来好像发生了级联效应，其中一个异常已跨多个线程触发了 29 个其他异常。有什么方法可以确定哪个是第一个发生的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:13:16.190

我一直面临这种困惑。但在所有情况下，内存地址较高的异常都是最后发生的异常。

因此，所有这 29 个异常中内存地址最低的异常是第一个发生的异常

![请参见下图示例](../Images/3d42e916aaac090d42f2abbe60032cd9.png)

# magento - 如何在 Magento 的产品列表中显示评级摘要？

> ID：12370028
> 
> 赞同：6
> 
> 时间：2012-09-11T12:44:06.270
> 
> 标签：magento, review

我正在使用这个网址：http: [//xhtmlandcsshelp.blogspot.in/2010/12/get-products-from-particular-category.html](http://xhtmlandcsshelp.blogspot.in/2010/12/get-products-from-particular-category.html)

我需要在主页上显示特定类别 id 的产品

所以我使用了那个网址，我已经添加了，

```
$model->load($_prdIds);
$pname = $model->getName(); 
```

但是评分摘要星如何显示？任何人都可以帮助我吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T21:19:43.180

在 Magento 1.7.0.1 上测试和工作

* * *

![主页上的评论](../Images/1ca59b75ef1ab3b5b4fc08d518d37f8a.png)

* * *

```
<?php
    /**
     * Instanciate reviews helper
     */
    $this->_reviewsHelperBlock = $this->getLayout()->createBlock('review/helper');

    /**
     * Get products for your category
     */
    $products = Mage::getModel('catalog/category')->load(YOUR_CATEGORY_ID)->getProductCollection();

    /**
     * Loop thru products
     */
    foreach($products as $product) {
        $product = Mage::getModel('catalog/product')->load($product->getId());
        echo $product->getName();

        /**
         * Display review summary with stars.
         * If correctly configured in back-office: Catalog > Reviews and Ratings > Manage Ratings
         */
        echo $this->_reviewsHelperBlock->getSummaryHtml($product, false, false);

        echo '<hr/>';
    }
?> 
```

# vb.net - 如何使linq显示两年前的记录

> ID：12370030
> 
> 赞同：0
> 
> 时间：2012-09-11T12:44:09.283
> 
> 标签：vb.net, linq

如何进行 linq 查询以获取过去 2 年的记录。现在的主要问题是数据网格加载到许多记录并且速度变慢，所以我试图通过获取过去 2 年的记录来减少这个数量。我已经搜索过，但似乎不知道我可以使用或应该使用什么。我记得在 Mysql 中做过，但我似乎在 Linq 中找不到这些选项。我很确定 linq 也可以，但我不知道怎么做。

那么有人可以帮我解决这个问题吗？

```
 dim getRecord = (From rec in DB.table
                 Where rec.date ....  ' no idea
                 Select rec.date).ToList() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:50:01.980

你可以尝试类似的东西

```
Where rec.date > DateTime.Now.AddYears(-2) 
```

如果您有大量记录，请不要忘记在日期列上添加索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:49:17.667

```
Dim twoYearsAgo = DateTime.Now.AddYears(-2);
dim getRecord = (From rec in DB.table 
                 Where rec.date >= twoYearsAgo
                 Select rec.date).ToList() 
```

# vb.net - 使用 Microsoft.Office.Interop.Word 时在新页面上强制段落

> ID：12370034
> 
> 赞同：0
> 
> 时间：2012-09-11T12:44:16.367
> 
> 标签：vb.net, interop, ms-word

我有以下 VB.Net 代码来创建 Microsoft Word 文档。如何强制“第二段”。在下一页（新页面）？

```
Imports Word = Microsoft.Office.Interop.Word

Dim wordApp As Word._Application = New  _
    Word.ApplicationClass()

    Dim wordDoc As Word._Document = _
        wordApp.Documents.Add()

    Dim para As Word.Paragraph = wordDoc.Paragraphs.Add()
    para.Range.Text = "First Paragraph."
    para.Range.InsertParagraphAfter()

    para.Range.Text = "Second Paragraph."
    para.Range.InsertParagraphAfter() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:31:40.620

您可以使用 InsertBreak 开始一个新页面：

```
 Selection.InsertBreak 
```

[WdBreakType 枚举](http://msdn.microsoft.com/en-us/library/office/ff195905.aspx)

# ruby - 如何编写二次计算器？

> ID：12370036
> 
> 赞同：-2
> 
> 时间：2012-09-11T12:44:27.223
> 
> 标签：ruby, calculator, quadratic

这是我的二次计算器的代码：

```
puts "A?"
a = gets.to_f
puts "B?"
b = gets.to_f
puts "C?"
c = gets.to_f

d = (-b + (((b**2) - (4*a*c))**(1/2)))/(2*a)
puts d

f = (-b - (((b**2) - (4*a*c))**(1/2)))/(2*a)
puts f 
```

然而，答案并不总是正确的。

例如，我没有得到虚数。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:44:54.220

您正在使用实数进行所有计算。你需要`require 'complex'` 得到复数。我保留了您的程序结构并向其中添加了复数。

另一件事，在您的程序中，您有 1/2，但由于它们是整数，因此此除法结果为 0，因为整数除法会丢弃小数结果（例如，7/2 是 3）。

```
#!/usr/bin/ruby

require 'complex'

# very small real number, consider anything smaller than this to
# be zero
EPSILON = 1e-12

def print_complex(n)
    # break n into real and imaginary parts
    real = n.real
    imag = n.imag

    # convert really small numbers to zero
    real = 0.0 if real.abs < EPSILON
    imag = 0.0 if imag.abs < EPSILON

    # if the imaginary part is zero, print as a real
    if n.imag == 0.0
       puts real
    else
       puts Complex(real, imag)
    end
end

puts "A?"
a = gets.to_f

puts "B?"
b = gets.to_f

puts "C?"
c = gets.to_f

# Turn the real numbers into complex numbers
ac = Complex(a, 0)
bc = Complex(b, 0)
cc = Complex(c, 0)

dc = (-bc + (((bc**2) - (4*ac*cc))**(1.0/2)))/(2*ac)
print_complex(dc)

fc = (-bc - (((bc**2) - (4*ac*cc))**(1.0/2)))/(2*ac)
print_complex(fc) 
```

# c#-4.0 - 使用 >,>=,<,<= 运算符的实体框架字符串数据类型：Lambda 表达式

> ID：12370037
> 
> 赞同：3
> 
> 时间：2012-09-11T12:44:44.743
> 
> 标签：c#-4.0, lambda

我正在处理动态 Lambda 表达式查询，而不使用 API。

如果用户将 FieldName 选择为“AddressLine1”，将 Operator 选择为 >= FieldValue 作为“K”，它应该将结果返回为以 K 和 L、M 到 Z 系列开头的所有 AddressLine1 字段值。

这是代码，它适用于整数数据类型：

```
public static Expression CreateBinaryExpression(Expression argLeft, Expression argRight, operatorType opType) {
    switch ((operatorType)opType) {    
        case operatorType.Greater:
            return Expression.GreaterThan(argLeft, argRight);
        case operatorType.GreaterEqual:
            return Expression.GreaterThanOrEqual(argLeft, argRight);
        ...
    }
} 
```

如何修改代码以使用大于等于运算符的字符串数据类型。我正在为此寻找表达方式。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:22:45.410

您可以使用以下[`String.Compare()`](http://msdn.microsoft.com/en-us/library/84787k22.aspx)方法：

```
return String.Compare(argLeft, argRight) >= 0; 
```

`Compare()`如果 strA 小于 strB，则返回 <0，相等时返回 0，如果 strA 大于 strB，则返回 >0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:40:16.650

从这里得到解决方案

[使用表达式树的动态 Linq 2 Sql 引发异常“二进制运算符小于未为 System.String 和 System.String 定义”](https://stackoverflow.com/questions/2061398/dynamic-linq-2-sql-using-expressions-trees-raising-exception-binary-operator-le)

开关（（操作员类型）操作类型）{

```
 case operatorType.Greater: return Expression.GreaterThan(
                            Expression.Call(typeof(string),
                            "Compare", null, new[] { argLeft, argRight }),
                             Expression.Constant(0, typeof(int)));

} 
```

# svg - JavaFX：如何使用 SVG 的矩阵变换

> ID：12370038
> 
> 赞同：1
> 
> 时间：2012-09-11T12:44:45.243
> 
> 标签：svg, javafx-2

又是我 ：）

我今天的问题集中在 SVG 上。在 SVG 中，您可以将标签中的不同`<path>`元素分组`<g>`，以便能够一次调用所有路径的转换。此外，还有一些转换/操作只能在组上调用，而不是直接在路径上调用。

我有一个 SVG 源需要在我的 UI 中显示，其中包含如上所述的不同元素。所以我有类似的东西：

```
<g id="myId" transform="matrix(-1,2.4336e-008,-2.4336e-008,-1,2163.78,1161.93)">
  <path .../>
</g> 
```

目前我正在使用 SVGPath 和 Stackpane，效果很好。我只是想知道如何处理矩阵转换？由于没有相应的 SVGGroup 类，我想我必须自己实现这个，[这里](http://www.w3.org/TR/SVG11/coords.html#TransformMatrixDefined)描述了规则。

我是在正确的道路上还是我又错过了什么？您是否会建议[使用图像](https://stackoverflow.com/questions/6854601/load-svg-file-in-javafx-2-0)而不是处理 SVG 的东西（尽管我不知道这在这种关于矩阵转换的特殊情况下会有什么帮助）。

一如既往，任何建议都值得赞赏:)

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:12:54.063

You can use FX transforms:

```
 SVGPath path = new SVGPath();
    path.setContent("M50,50 L100,50 L100,100 L50,50 Z");
    path.getTransforms().add(
         Transform.affine(-1,2.4336e-008,-2.4336e-008,-1,2163.78,1161.93)); 
```

Your numbers are a bit extreme, but for simple transforms I've tried `matrix` parameters are the same as `Transform#affine` ones.

# c# - 当我用 C# 知道字符串中的第一个和最后一个字符时如何创建子字符串？

> ID：12370039
> 
> 赞同：0
> 
> 时间：2012-09-11T12:44:46.210
> 
> 标签：c#, string, substring

我是 C# 新手，请帮助以高效的 C# 方式编写。

案例（总是第一个字符是'-'，最后一个是'>'）：

示例 1：

```
input:   bdfdfd-wr>
output:  wr 
```

示例 2：

```
input:   -dsdsds-sdsds-grtt>
output:  grtt 
```

示例 3：

```
input:   -dsdsds-sdsds-grtt>><>>dfdfdfd
output:  grtt 
```

示例 4：

```
input:   -dsdsds-sdsds-grtt>><->>df-d=fdfd
output:  grtt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:49:16.550

```
string example = "-dsdsds-sdsds-grtt>";
int lastIndexOfHyphen = example.LastIndexOf("-");
int indexOfBracket = example.IndexOf(">", lastIndexOfHyphen);
string substr = example.Substring(lastIndexOfHyphen + 1, indexOfBracket - lastIndexOfHyphen - 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:29:42.147

LINQ 风格：

```
var output = input.Split('>').First().Split('-').Last(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T12:49:19.133

我可以想到两种方法：

*   使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)，例如`-([a-z]+)>`. 结果将在[Match](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)`.Groups[1]`中。
*   使用[IndexOf](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)查找`>`，使用[LastIndexOf](http://msdn.microsoft.com/en-us/library/system.string.lastindexof)查找最后一个破折号，然后使用[Substring](http://msdn.microsoft.com/en-us/library/system.string.substring)获取单词。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:49:56.013

您可以使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)。

* * *

**例子：**

```
var r = new Regex(@"-(\w*)>");

var inputs = new [] { "bdfdfd-wr>",
                      "-dsdsds-sdsds-grtt>",
                      "-dsdsds-sdsds-grtt>><>>dfdfdfd",
                      "-dsdsds-sdsds-grtt>><->>df-d=fdfd" };

foreach(var i in inputs)
    Console.WriteLine(r.Match(i).Groups[1].Value); 
```

**输出：**

> wr
> grtt
> grtt
> grtt

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T12:52:54.013

```
 string s = "-dsdsds-sdsds-grtt>";
        string output = null;
        if (s.Contains(">"))
        {
            output = s.Split(new string[] { ">" }, 
                             StringSplitOptions.RemoveEmptyEntries)
                      .FirstOrDefault(i => i.Contains("-"));
            if (output != null)
                output = output.Substring(output.LastIndexOf("-") + 1);
        } 
```

返回包裹在 - 和 > 中的第一行文本。如果输入的是`"-dsdsds-sdsds-grtt>asdas-asq>"`，它会返回`grtt`；for `-dsdsds-sdsds-grtt>><>>dfdfdfd`-`grtt`也返回

[在那里](http://msdn.microsoft.com/en-us/library/system.string.aspx)你可以找到很多处理字符串的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T12:52:54.730

```
 string input = "-dsdsds-sdsds-grtt>";
     int startInd = input.LastIndexOf('-');
     int endInd = input.IndexOf('>', startInd);
     string result;
     if (startInd < endInd) 
         result = input.Substring(startInd + 1, endInd - startInd - 1); 
```

编辑：

```
 string input = "-dsdsds-sdsds-grtt>><->>df-d=fdfd";
    string str = input.Substring(0, input.IndexOf('>'));
    string result = str.Substring(str.LastIndexOf('-') + 1); 
```

使用 linq 似乎也是一个不错的选择：

```
var result = input.Split('>').First().Split('-').Last(); 
```

# java - 如何从 Jython 脚本中的列表中随机获取一个值？

> ID：12370042
> 
> 赞同：1
> 
> 时间：2012-09-11T12:44:50.453
> 
> 标签：java, python, jython, grinder

```
lists = portTest.lists(arg1, arg2) 

// this returns the lists from webservice in java  
//  public String[] list1; 
//  public String[] list2;public String[] list3;

// i want to get the random element in the list,
// not the first, second or any selected item. 
elementinthelist = lists.list1[0] 
```

如何从列表中生成随机元素

我正在用 Jython 编写测试脚本。我正在使用 Grinder 工具调用服务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:54:36.523

在 Python 中，使用[random.choice](http://docs.python.org/library/random.html#random.choice)：

```
import random
elementinthelist = random.choice(lists.list1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:48:05.080

在 0（包括）和列表长度（不包括）之间选择一个随机整数。

在常规 Java 中，这看起来像

```
Random rand = new Random();
int randIx = rand.nextInt(lists.size());
Object element = lists.get(randIx); 
```

# symfony - 我的 composer.json 文件在生产环境中应该是什么样子？

> ID：12370046
> 
> 赞同：7
> 
> 时间：2012-09-11T12:44:56.017
> 
> 标签：symfony, symfony-2.1, production, composer-php

我有一个 Symfony 2.1 项目，通过 composer 安装了额外的包。我想将它部署到我的生产服务器，但我想知道是否需要更改`composer.json`文件中的任何内容。这是我当前的文件内容：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.1",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",

        "friendsofsymfony/user-bundle": "*",
        "knplabs/knp-paginator-bundle": "dev-master",
        "ornicar/gravatar-bundle": "dev-master",
        "liip/url-auto-converter-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

我应该更改`minimum-stability`设置吗？

我应该将每个要求都修复为单个版本，不使用通配符还是“dev-master”？

我应该在[http://packagist.org/](http://packagist.org/)上搜索每个依赖项的最后一个稳定版本吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T13:32:11.000

我认为最重要的是您的 composer.lock，而不是 composer.json。

在测试服务器上部署您的应用程序`php composer.phar install`，然后运行测试以确保一切正常。如果确实没问题，只需与 composer.lock 一起部署在生产服务器上。

这样，您的部门将与您的测试服务器完全相同。如果您有多个前端服务器，这也很有用，composer.lock 将确保每个人都使用完全相同的代码。

你说

> 我应该将每个要求都修复为单个版本，不使用通配符还是“dev-master”？

这是 composer.lock “修复”一切的作用。composer.json 是关于声明依赖关系，并处理版本之间可能的不兼容性。默认情况下，您应该坚持使用稳定版本，除非您在开发分支中需要一些花哨的新功能，或者尚未合并的错误修复。

因此，您应该对 composer.lock 进行版本控制，这样更容易自动部署。

# wpf - 将 DynamicResource 绑定到 BasedOn 样式

> ID：12370052
> 
> 赞同：2
> 
> 时间：2012-09-11T12:45:21.483
> 
> 标签：wpf, xaml

我的要求是在具有以下情况的文本框上应用多种样式：

1.  我在另一个文件中有一种样式（例如**MyTextStyle ）说“** *Generic.xaml* ”
2.  我的文本框在*ABC.xaml*
3.  我想对这个文本框应用一些触发器，所以我必须使用 Textbox.Style
4.  我也想申请“ **MyTextStyle** ”

当我这样做时，它给了我错误，我无法将 DynamicResource 应用于 BasedOn：

```
<TextBox.Style>
                    <Style BasedOn="{DynamicResource MyTextStyle}" TargetType="{x:Type TextBox}">
                        <Setter Property="Text" Value="{Binding SelectedCall.Name}" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedCall.Name}" Value="N/A">
                                <Setter Property="Text" Value="" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style> 
```

请建议我一些解决方案，以便我可以应用此 Dynamicresource 以及我的 datatrigger 样式

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:21:43.583

改成`DynamicResource`这样`StaticResource`：

```
<Style BasedOn="{StaticResource MyTextStyle}" TargetType="{x:Type TextBox}"> 
```

在 BasedOn 中故意不允许 DynamicResource。

**编辑：** 你得到“找不到名为'EmptyTextBoxStyle'的资源”，因为应用程序找不到这个特定的静态资源。为了帮助应用程序找到它，您需要使用 MergedDictionary。以下是如何在例如 Window 中使用它的示例：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Generic.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

在另一个 ResourceDictionary 中，您应该按以下方式使用它：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/Generic.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

您需要以这种方式引用包含 EmptyTextBoxStyle 样式定义的 ResourceDictionary。例如，如果在 Generic.xaml 文件中声明了“EmptyTextBoxStyle”，并且您在 ABC.xaml 中使用它，则可以只使用上述 XAML（当然，您需要根据项目结构更新 Source 属性）。

# ruby-on-rails - OmniAuth Strategies Facebook NoAuthorizationCodeError（必须传递“code”参数或签名请求（通过“signed_request”参数）：

> ID：12370056
> 
> 赞同：18
> 
> 时间：2012-09-11T12:45:35.210
> 
> 标签：ruby-on-rails, facebook, facebook-javascript-sdk, omniauth

我收到一个错误：

```
 OmniAuth::Strategies::Facebook::NoAuthorizationCodeError (must pass either a 
`code` parameter or a signed request (via `signed_request` parameter or a 
`fbsr_XXX` cookie)): 
```

它不会一直来。它会时不时地来，由空气制动通知。

谷歌搜索上有很多链接，但找不到合适的解决方案..有人吗？初始化程序目录下的omniauth.rb：

```
OmniAuth.config.logger = Rails.logger
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'], {:client_options => {:ssl => {:ca_path => "/etc/ssl/certs"}}, :scope => 'user_about_me,email,publish_actions,user_location,publish_stream,offline_access,user_interests,user_likes,user_hometown', :display => 'popup'}      

  OmniAuth.config.on_failure = Proc.new do |env|
    #this will invoke the omniauth_failure action in SessionsController.
    "SessionsController".constantize.action(:omniauth_failure).call(env)
  end         
end 
```

PS：我正在使用带有[facebook-omniauth 的facebook javascript sdk](https://github.com/mkdynamic/omniauth-facebook)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-23T21:06:08.367

我最近在使用带有omniauth-facebook 的FB JS SDK 时遇到了这个错误。我通过使用 GET 发送 signed_request 参数来修复它，如下所示：

```
$(document).bind("fb.loaded", function() {
  FB.getLoginStatus(function(response) {

    console.log('FB STATUS: ' + response.status);
    if(response.status == "connected") {

      console.log("FB AUTHED");

      location.href =
        '/auth/facebook/callback?' +
        $.param({ signed_request: response.authResponse.signedRequest })
      });

    }
  });
}); 
```

当用户在已经登录 FB 而不是您的网站时访问您的网站时，就会出现这种情况。经常需要对omniauth回调的后续请求进行签名：

```
Request URL:
http://localhost:3000/auth/facebook/callback?signed_request=QXZa2TPs8JiSgSAQkrS7Y7ObPZQDYLcU_JNvD6Wru_o.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiJBUURjQXdZUdVOMEFmd1RCbjRDQWp4eHpKcWRoRllOS1owLVZpa2pKTUQxSU1UbHJzbmEyMVNUUUtOLWl6b1dJOXJVRWUyWTBNd3ViZ1JxcmZJQmVMRDNOREI2M1EwREtqVzJCeVxTU2ZMR1foWlVwOEVlX0dMVUtwYUlqcWlaQ2FSc1h5c0NBNHdyZDBxbk4taU1haWp2cVFIX19QdUhxaldFcUtYZDc1LS1oZmptcTg4QVVuemVJdDJ4S2VOd3VPZG9vOGtaQkZlZmctZ2FDMk9CNl8wZ24iLCJpc3N1ZWRfYXQiOjEzNTg5NzQ4NzMsInVzZXJfaWQiOiIxMDYwMTg4NyJ9` 
```

如果使用 AJAX，你需要这样的东西：

```
 $.get(
        '/auth/facebook/callback',
        { signed_request: response.authResponse.signedRequest },
        function(json) {
          alert("received logged in response");
      }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-05T10:25:11.457

### 当你得到错误

*   如果您的应用程序处于沙盒模式并且您尝试使用未在您的应用程序的开发人员角色中列出的真实用户登录，您将收到此错误。一旦您创建了测试用户并改为使用这些用户，它就会起作用。

*   在相反的情况下，您也会收到此错误：您在以测试用户身份登录 facebook 时尝试登录您的生产应用程序。你会得到那个错误，在我的 url 中我也得到了非常清晰的信息：

`error_code=2102&error_message=User+is+not+a+test+user+owned+by+the+application`

### 如何创建测试用户

要创建测试用户，请在[developers.facebook.com](http://developers.facebook.com)的应用程序配置中单击*编辑设置 > 开发人员角色*，然后单击 *测试用户*部分。创建用户后，单击设置密码并记下其 facebook id，单击 时您可以看到该 id 。然后使用这些凭据以沙盒模式登录您的应用程序。`create`*`Set Password``modify`*

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-20T21:37:27.857

刚刚通过将 gems 更新为：

```
gem "omniauth", "~> 1.1.1"
gem "omniauth-facebook", "~> 1.4.1" 
```

这才是真正的症结所在。但如果你需要它，我的 routes.rb 设置：

```
match "/auth/failure" => redirect("/") 
```

我的omniauth.rb是

```
OmniAuth.config.on_failure = Proc.new { |env|
  OmniAuth::FailureEndpoint.new(env).redirect_to_failure
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-03T05:34:26.090

我得到了同样的错误。我尝试了上述解决方案，但它对我不起作用。所以我禁用了沙盒模式，然后它按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-06T02:54:29.927

Facebook 已将 API 更新到 v.2.0，这会导致 fb 登录错误。解决方案是有一个隐私政策页面，并将该链接放在 facebook 开发人员网站的应用程序详细信息下的隐私政策链接上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-02T19:56:46.613

不设置`cookie: true`会`FB.init`导致这个问题。*

# python - Paramiko - ssh 服务器在命令执行期间死机 -> 挂起

> ID：12370057
> 
> 赞同：3
> 
> 时间：2012-09-11T12:45:36.600
> 
> 标签：python, ssh, timeout, paramiko, python-2.x

我正在使用 paramiko 在 python 2.7 中编写一个小自动化软件。有可能在执行期间远程机器（ssh 服务器）死机，我的 paramiko 客户端无法识别它并挂在 recv_exit_status() 方法上。如果我为通道或传输设置超时，它什么也不做。transport.set_keepalive() 也没有帮助。

```
channel = transport.open_session()
channel.exec_command(cmd)
exit_code = channel.recv_exit_status() 
```

我认为另一种方法也可能很好：

```
transport.set_keepalive(1)
channel = transport.open_session()
channel.exec_command(cmd)
while not channel.exit_status_ready():
    time.sleep(1)
    print "waiting", str(transport.is_active())
exit_code = channel.recv_exit_status() 
```

但是 is_active() 总是返回 True，它永远不会变为 False，即使在半分钟后...不允许这样做（主要是从专业角度来看）。另外，我知道主动轮询通常是不好的编程技术，但我还是尝试过......谢谢大家的帮助

# jsp - 英国有没有成功的jsp网站？

> ID：12370058
> 
> 赞同：-4
> 
> 时间：2012-09-11T12:45:37.053
> 
> 标签：jsp

我想知道你能否给我一些来自英国的网页，这些网页在 JSP 上运行并且在公众中广为人知。由于我现在正在从事的工作，我对英国而不是其他国家特别感兴趣。还不能说细节；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:56:38.017

我认为这个会击败所有其他网站：[http ://www.ibm.com/uk/en/](http://www.ibm.com/uk/en/)

# css - 我的浮动 Div 没有对齐

> ID：12370062
> 
> 赞同：0
> 
> 时间：2012-09-11T12:45:52.387
> 
> 标签：css, html, css-float, position, block

我正在尝试制作一个不错的 CSS 菜单栏。问题在于每个按钮是在它自己的元素中还是在

*   元素，无论哪种方式，它总是做这个有趣的步进事情：

    如果你去 www.adversign.co.za/steps.jpg

    我试过浮动：左；我已经用 clear:both 试过了；我已经用 display:inline-block 试过了；以及显示：块；但我所做的一切似乎都没有将 div 的顶部对齐在相同的高度。

    请有人帮忙。我的代码是这样的：

    ```
    <div id="list">
    <li><a href="index.html">&nbsp;</a></li>
    <li><a href="about.html">&nbsp;</a></li>
    </div> 
    ```

    和 CSS：

    ```
    #list a { 
    float:left; 
    display: inline; 
    list-style:none; 
    background:url(images/home1.png) no-repeat; 
    background-position:top left; 
    width:104px; 
    height:109px; 
    font-size:1px; 
    color:#000; 
    text-decoration:none; 
    margin-left:0px;
    } 
    #list a:hover{ 
    background:url(images/home2.png) no-repeat; 
    text-decoration:none; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:50:34.017

试试 display:inline-block;

[http://jsfiddle.net/VkHVd/](http://jsfiddle.net/VkHVd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:53:59.503

看看[http://css-tricks.com/prevent-menu-stepdown/](http://css-tricks.com/prevent-menu-stepdown/)

你说你试过`display: inline-block;`了`display: block;`

但不是`display: inline;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:06:03.527

您可以在 li 元素上使用带有 float:left 的 ul

[http://jsfiddle.net/pB7rt/2/](http://jsfiddle.net/pB7rt/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:49:44.463

你的 HTML 是错误的。你有

```
<div id="list">
<li><a href="index.html">&nbsp;</a></li>
<li><a href="about.html">&nbsp;</a></li>
</div> 
```

代替

```
<ul id="list">
<li><a href="index.html">&nbsp;</a></li>
<li><a href="about.html">&nbsp;</a></li>
</ul> 
```

顺便说一句：您可以删除 display: inline，因为 float: left 无论如何都会使其阻塞。

这是带有您的版本的 jsfiddle：[您的版本](http://jsfiddle.net/RubQe/)
这是带有 ul 而不是 div 的 jsfiddle：[正确的版本](http://jsfiddle.net/RubQe/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-07T23:37:06.103

我自己找到了最好的方法，完全忘记了我在这个论坛上问过这个问题。

```
<ul id="list">
<li><a href="index.html">&nbsp;</a></li>
<li><a href="about.html">&nbsp;</a></li>
</ul> 
```

是我拥有 HTML 的方式，我只是在问题中输入错误。

我现在知道像这样做我的 CSS

```
ul#list li {
   float:left;
...etc.
} 
```

然后为按钮设置样式

```
ul#list li a {
display:block;
...etc
} 
```

将鼠标悬停在 li 上：

```
ul#list li:hover a {
} 
```

# web-services - webservices：如何初始化 javax.xml.ws.Holder

> ID：12370065
> 
> 赞同：0
> 
> 时间：2012-09-11T12:46:02.417
> 
> 标签：web-services

我是网络服务的新手。我想知道如何使用

> javax.xml.ws.Holder

任何人请帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:19:02.300

```
foo(@WebParam(name = "flag", mode = WebParam.Mode.OUT) Holder<Boolean> flag) 
```

然后在 foo 体内

```
flag.value=true; 
```

# node.js - Sphinx 和 node.js 客户端

> ID：12370066
> 
> 赞同：2
> 
> 时间：2012-09-11T12:46:05.663
> 
> 标签：node.js, sphinx

好的，Sphinx 似乎是目前最愚蠢的应用程序。

首先，命令

```
search "test" 
```

从不工作，并且是一个常见问题，给出以下错误：

```
index 'test1': search error: . 
```

然后，如果我使用 node.js 客户端，我会收到错误消息：

```
Error: Error: connect ECONNREFUSED
Connection ERROR: Error: connect ECONNREFUSED
Connected, sending query
RESULTS: undefined
closed
Connection ERROR: Error: The socket has closed due to an unknown error 
```

好吧，我说。让我们检查一下日志。没什么，只是这个：

```
[Tue Sep 11 14:38:54.406 2012] [ 3769] accepting connections 
```

任何有类似问题的人？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:21:58.827

您是否有防火墙阻止访问您搜索过的端口？

您是否尝试过 test.php 或 test.py - 而不是使用“搜索”

# elasticsearch - 确保在 Elasticsearch 中的索引上设置了设置和映射

> ID：12370071
> 
> 赞同：1
> 
> 时间：2012-09-11T12:46:28.923
> 
> 标签：elasticsearch

为了确保我的 Elasticsearch 索引具有正确的设置和映射，我有以下代码：

```
if (client.admin().indices().prepareExists(Index).execute().actionGet().exists()) {            
    client.admin().indices().prepareClose(Index).execute().actionGet();
    client.admin().indices().prepareUpdateSettings(Index).setSettings(settings.string()).execute().actionGet();
    client.admin().indices().prepareOpen(Index).execute().actionGet();
    client.admin().indices().prepareDeleteMapping(Index).setType(Type).execute().actionGet();
    client.admin().indices().preparePutMapping(Index).setType(Type).setSource(mapping).execute().actionGet();
} else {
    client.admin().indices().prepareCreate(Index).addMapping(Type, mapping).setSettings(settings).execute().actionGet();
} 
```

更新设置和映射似乎有点傻，即使它们已经很好了。不过，我不知道如何以更聪明的方式做事。有什么建议么？

非常感谢，

斯廷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:28:18.577

您可以检索当前设置和映射，并在尝试更新它们之前确保它们是正确的。

```
ClusterStateResponse response = client.admin().cluster().prepareState()                
    .setFilterAll()
    .setFilterMetaData(false)
    .setFilterIndices(index)
    .execute().actionGet();
IndexMetaData indexMetaData = response.state().metaData().index(index);
Settings settings = indexMetaData.settings();
// Verify settings
MappingMetaData mapping = indexMetaData.mappings().get(type);
// Verify mapping 
```

# javascript - 执行动态模式弹出

> ID：12370072
> 
> 赞同：0
> 
> 时间：2012-09-11T12:46:34.120
> 
> 标签：javascript, asp.net, ajax, web-services, modalpopupextender

嗨，我在启动动态模式弹出窗口时遇到问题。我需要通过单击一个按钮来启动它，该按钮必须将一个值传输到从数据库中检索一些数据的 Web 服务。

这是按钮的代码

```
 <asp:Button ID="btnShow" Text="Details"  runat="server" /> 
```

这里是模态弹出窗口的代码

```
<asp:ModalPopupExtender ID="btnShow_ModalPopupExtender" runat="server" 
        TargetControlID="btnShow" OkControlID="btnDlgOK" PopupControlID="pnlPopup"
        DynamicControlID="lblInfo"
        DynamicServicePath="GetDetails.asmx"
        DynamicServiceMethod="GetData"
        BackgroundCssClass="modal"
        DropShadow="true"
        >
    </asp:ModalPopupExtender> 
```

在这里我的基本 javascript 打开弹出窗口

```
<script type="text/javascript">
    function showpop() {
        $find("btnShow_ModalPopupExtender").show();
    }
</script> 
```

现在我不知道如何从按钮调用 javascript 代码，也不知道如何调用从数据库中提取数据的 Web 服务。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:34:16.017

在按钮上附加一个`click`事件以显示`popup window`

```
<script type="text/javascript">
    jQuery(function(){
         jQuery("#btnShow_ModalPopupExtender").hide(); // hide when page started
         jQuery("#btnShow").click(function(){
             jQuery("#btnShow_ModalPopupExtender").show();
         });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:34:34.883

使用 jQuery UI 模态对话框让这一切变得简单。您可以轻松地做任何您需要的事情。

在显示模态对话框之前，有很多事件可用于处理 ajax 调用。

[http://jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)

# silverlight - 从 Metro 应用程序中的 c# 代码访问列表框的 Datatemplate 内的 ComboBox？

> ID：12370081
> 
> 赞同：0
> 
> 时间：2012-09-11T12:47:02.177
> 
> 标签：silverlight, xaml, microsoft-metro, winrt-xaml

我在列表框内有一个组合框，列表框有一个数据模板，该组合框和其他元素驻留在其中。

```
<ListBox x:Name="lstbxbProducts" HorizontalAlignment="Left" Height="547" Margin="0,221,0,0" VerticalAlignment="Top" Width="1044" RenderTransformOrigin="0.600000023841858,0.5">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <StackPanel Width="80" Orientation="Horizontal">
                           <TextBlock Text="{Binding prdnum}" VerticalAlignment="Center" HorizontalAlignment="Left" ></TextBlock>     
                           <TextBlock Text="  -" VerticalAlignment="Center" HorizontalAlignment="Left" ></TextBlock>
                        </StackPanel>
                        <StackPanel Width="400">
                            <TextBlock Text="{Binding prddsc}" VerticalAlignment="Center"  HorizontalAlignment="Left" ></TextBlock>
                        </StackPanel>   
                       <StackPanel Width="300">
                            <ComboBox Name="cmbbxbUMselec" ItemsSource="{Binding}" Width="200" FontSize="24"  VerticalAlignment="Center" HorizontalAlignment="Center" ></ComboBox>
                        </StackPanel>
                        <StackPanel Width="180">
                            <TextBlock Text="{Binding prcby_prc}" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>
                        </StackPanel>
                       <StackPanel Width="100">
                            <TextBox Text="{Binding stdordqty, Mode=TwoWay}" VerticalAlignment="Center" TextAlignment="Center"                      HorizontalAlignment="Right" ></TextBox>
                        </StackPanel>

                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我的疑问是我无法访问列表框的数据模板中存在的组合框，我想从 c# 代码隐藏将列表绑定到组合框

```
cmbbxbUMselec.DataContext = lstumcods; 
```

以这种方式从后面的代码中，但我无法访问列表框的数据模板中存在的组合框

请让我知道我该如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:54:27.153

尝试这个：

首先，我将您的列表框更改为：

```
<ListBox x:Name="lstbxbProducts" HorizontalAlignment="Left" Height="547" Margin="0,221,0,0" VerticalAlignment="Top" Width="1044" RenderTransformOrigin="0.600000023841858,0.5">
        <ListBox.Resources>
            <ComboBox x:Key="myComboBox" Name="cmbbxbUMselec" ></ComboBox>
        </ListBox.Resources>           
       <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <StackPanel Width="80" Orientation="Horizontal">
                       <TextBlock Text="{Binding prdnum}" VerticalAlignment="Center" HorizontalAlignment="Left" ></TextBlock>     
                       <TextBlock Text="  -" VerticalAlignment="Center" HorizontalAlignment="Left" ></TextBlock>
                    </StackPanel>
                    <StackPanel Width="400">
                        <TextBlock Text="{Binding prddsc}" VerticalAlignment="Center"  HorizontalAlignment="Left" ></TextBlock>
                    </StackPanel>   
                   <StackPanel Width="300">
                        <ComboBox Name="cmbbxbUMselec" ItemsSource="{Binding Source={StaticResource myComboBox}, Path=ItemsSource, Mode=TwoWay}"
                                    Width="200" FontSize="24"  VerticalAlignment="Center" HorizontalAlignment="Center" ></ComboBox>
                    </StackPanel>
                    <StackPanel Width="180">
                        <TextBlock Text="{Binding prcby_prc}" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>
                    </StackPanel>
                   <StackPanel Width="100">
                        <TextBox Text="{Binding stdordqty, Mode=TwoWay}" VerticalAlignment="Center" TextAlignment="Center"                      HorizontalAlignment="Right" ></TextBox>
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

请注意，我在您的 listbox.resources 中添加了一个项目。

在代码隐藏中，我添加了以下代码：

```
 var cb = lstbxbProducts.Resources.FirstOrDefault(c => c.Key.ToString() == "myComboBox");
        ((ComboBox)cb.Value).ItemsSource = new List<string> { "A", "B", "C" }; 
```

不要忘记将“System.Linq”添加到您的程序集中，否则它将无法正常工作。现在尝试使用您的“真实”来源并告诉我们它是否有效。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:16:33.993

如果您不介意在 XAML 中而不是在代码隐藏中执行此操作，那么这里有一个想法。

我假设您的 ListBox 是在 UserControl 内的某个地方定义的，如下所示：

```
<UserControl x:Name="MyUserControl">
    <!-- Other elements here -->
    <ListBox x:Name="lstbxbProducts">
        <ListBox.ItemTemplate>
            <!-- etc... -->
        </ListBox.ItemTemplate>
    </ListBox>
</UserControl> 
```

如果 lstumcods 是在 UserControl 的代码隐藏中定义的公共属性，那么您可以试试这个：

```
<ComboBox ItemsSource="{Binding lstumcods, ElementName=MyUserControl" /> 
```

# postgresql - Postgres 中的连续行

> ID：12370083
> 
> 赞同：1
> 
> 时间：2012-09-11T12:47:11.530
> 
> 标签：postgresql, aggregate-functions, concat

给定的是这样的 Postgres 表

```
nummer  vorname    name        cash
------|-----------|-----------|-----
1       paul       smith       500
2       andy       london      700
2       mike       dover       700
3       clara      winchester  200 
```

要查询此表，我的 sql 看起来像这样正确知道：

```
SELECT 
  nummer,
  vorname,
  name,  
  cash as total
FROM 
  data.myTable
GROUP BY
  nummer, 
  name,
  vorname,
  cash
ORDER BY
  nummer; 
```

是否可以连接相同的两行`nummer`（在这种情况下`2`）。意味着我的输出应该是这样的（如果数字相等，现金也将具有相同的值）：

```
nummer  vorname    name        cash
------|-----------|-----------|-----
1       paul       smith       500
2       andy       london      700
        mike       dover       
3       clara      winchester  200 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T13:03:19.923

使用`GROUP BY`和聚合函数[`string_agg()`](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)：

```
SELECT nummer
      ,string_agg(vorname, E'\n') AS vorname
      ,string_agg(name, E'\n') AS name
      ,cash
FROM   mytable
GROUP  BY nummer, cash
ORDER  BY nummer, cash; 
```

我添加`cash`了`GROUP BY`以达到原始值并防止相同的情况不同`nummer`。

至于你的评论：

> 是否可以通过名称来唯一化查询。表示如果 2|andy london|700 被列出两次，则应删除一个。

```
SELECT nummer
      ,string_agg(vorname, E'\n') AS vorname
      ,string_agg(name, E'\n') AS name
      ,cash
FROM  (
   SELECT DISTINCT
          nummer, vorname, name, cash
   FROM   mytable
   ) AS m
GROUP  BY nummer, cash
ORDER  BY nummer, cash; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:58:42.847

```
SELECT nummer, 
       array_to_string(array_agg(vorname), E'\n'), 
       array_to_string(array_agg(name), E'\n'),
       cash
  FROM mytable
  group by nummer, cash; 
```

那应该这样做。

# c# - 插入新的数据库行后收到警报。

> ID：12370092
> 
> 赞同：1
> 
> 时间：2012-09-11T12:47:57.247
> 
> 标签：c#, sql-server

我创建了一个将 SMS 文本存储到数据库表中的应用程序。由于我无法预测何时会收到短信；我需要找到一种方法来在数据库表中添加新行时得到通知。我正在使用 MSSQLServer 2005 和使用 C# 的 Windows 窗体应用程序。有人可以建议我这样做吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:26:26.950

尽管有压倒性的声音支持这种错误的方式，但您不能使用触发器，至少不要直接通知应用程序。触发器根本无法连接回应用程序以通知更改，并且像“使用套接字”或“使用邮件”这样的解决方案充其量是幼稚的，并且在现实世界条件下它们会失败。

您基本上有三种选择：

*   更改池。最容易实现，只需定期查询以查看是否出现新记录。缺点是 1) 有时很难检测到更改，具体取决于您的数据模型模式和 2) 延迟和负载之间难以实现平衡，即。你应该多久投票一次。

*   通知插入应用程序。这些记录是由应用程序插入的，插入记录的代码也会通知您的应用程序。需要更改通常不受您控制的代码。

*   使用[查询通知](http://rusanu.com/2006/06/17/the-mysterious-notification/)。

第四种选择是使用触发器将消息发送到本地队列并让应用程序[`WAITFOR(RECEIVE...)`](http://msdn.microsoft.com/en-us/library/ms186963.aspx)在后台专门等待（这与轮询不同），但通过利用 Query Notifications 和[`SqlDependency`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:50:07.817

您可以结合使用[触发器](http://msdn.microsoft.com/en-us/magazine/cc164047.aspx)[`DatabaseMail`](http://msdn.microsoft.com/en-us/library/ms175887%28v=sql.105%29.aspx)来发送电子邮件以提醒您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:50:29.553

是的，使用 INSERT 触发器。

这是一篇 Stackoverflow 文章：[SQL Server 2008 - 帮助编写简单的 INSERT 触发器](https://stackoverflow.com/questions/1355921/sql-server-2008-help-writing-simple-insert-trigger)

这是 T-SQL 参考：http: [//msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:00:34.553

最适合的解决方案是插入后触发

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T13:07:51.770

你没有在你的问题中提供足够的细节，但我假设你的意思是一行被插入到数据库中（不知何故），你想让 c# 应用程序知道它吗？（否则，就像许多其他人所说的那样使用触发器）

在这些情况下，我会考虑让数据库通过 udp 或 tcp/ip 发送某种“ping”，并在您的 c# 应用程序中编写相应的侦听器组件。

我只是用谷歌搜索了一下，一些相关链接似乎是[http://www.codeproject.com/Articles/8973/SQL-Server-extended-stored-procedure-to-send-UDP-m](http://www.codeproject.com/Articles/8973/SQL-Server-extended-stored-procedure-to-send-UDP-m)和[http://lamahashim.blogspot .co.uk/2009/06/using-c-udpclient-send-and-receive.html](http://lamahashim.blogspot.co.uk/2009/06/using-c-udpclient-send-and-receive.html)

如果您采用这种方法，您将需要了解可能阻止通信的任何防火墙问题等，您可能还需要考虑诸如“当 c# 应用程序未运行时会发生什么”等问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T07:06:07.530

我在 c# 中使用了计时器对象来定期检查新的数据库更新。谢谢大家的答案。

# xcode - xcode 选项卡控制器连接

> ID：12370093
> 
> 赞同：0
> 
> 时间：2012-09-11T12:48:03.680
> 
> 标签：xcode

我有一个完整的 xcode 新手试图找出一个 Hello world 应用程序。当我使用单视图应用程序项目时，我会远离 appdelegate 文件......还有 viewcontroller 文件（.h 和 .m）。当我放一个按钮并尝试连接到代码时（ctrl拖动）；在 viewcontroller.h 文件中一切正常并自动生成代码。

我试图用“空应用程序模板”开始另一个项目。添加了用于设计的故事板。现在我在资源管理器中看到的文件只有 appdelegate.h 和 .m 文件（和故事板文件），但没有视图控制器文件。

然后我将一个标签栏控制器放到情节提要中。

问题：如果我现在将一个按钮拖放到（标签栏的）第一个视图控制器中......我在哪里可以为此生成代码？拖放（ctrl 拖动）到代码中不再起作用了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:43:13.150

您需要创建一个作为 UIViewControllers 子类的类，然后将其分配给设计器内的第一个视图控制器（或您想要的任何一个）。这意味着在这样做之后，您的视图现在是您刚刚创建的类的一部分。

好的做法是使用 TabBar 模板创建一个新项目，然后对其进行逆向工程以了解模板是如何构建的。

# php - PHP $_GET 给我留下了 url 插件 - 如何摆脱它？

> ID：12370102
> 
> 赞同：0
> 
> 时间：2012-09-11T12:48:31.980
> 
> 标签：php, redirect, get, refresh

按下按钮时：

```
<form action="index.php" method="get">
  <input type="hidden" name="act" value="run">
  <input type="submit" value="Truncate map">
</form>

if (!empty($_GET['act'])) {
  mysql_query("TRUNCATE TABLE mapinfo");
} 
```

它把我重定向到`index.php?act=run`

我想摆脱它所以补充说`header("Refresh: 0; url=$page");`：：

```
if (!empty($_GET['act'])) {
  mysql_query("TRUNCATE TABLE mapinfo");
  $page = $_SERVER['PHP_SELF'];
  header("Refresh: 0; url=$page");
} 
```

但它首先加载`index.php?act=run`而不是重定向浏览器，`index.php`这会刷新 2 个页面。

如何以好的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:52:59.047

而不是使用刷新标题，使用

`header("Location: $page");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:57:16.713

除了使用此脚本存在一些**主要**的安全问题之外，为什么不使用以下内容：

```
<form action="index.php" method="post">
  <input type="hidden" name="act" value="run">
  <input type="submit" value="Truncate map">
</form>

if (!empty($_POST['act'])) {
    mysql_query("TRUNCATE TABLE mapinfo");
} 
```

这将执行**POST**请求而不是**GET**请求。但是，请注意，您仍然应该在 POST 请求（[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)）之后重定向用户。尽管如此，请求参数是隐藏的。

**注意**不要在生产环境中使用这类脚本，它们很不安全！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T12:51:44.820

这确实是最好的方法。您可以取消设置`$_GET['act']`变量，这样它就不会影响控制流的其余部分，或者只是像正常一样渲染页面的其余部分（即您不需要重定向，只需像`$_GET['act']`变量一样渲染页面的其余部分从不设置）。

# javascript - 将 jQuery .each() 方法转换为原生 JavaScript 抽象的最佳方法是什么？

> ID：12370103
> 
> 赞同：0
> 
> 时间：2012-09-11T12:48:32.793
> 
> 标签：javascript, jquery, node.js

您好，感谢您的关注！

## 背景

我正在用 Node.JS 构建我的第一个应用程序，并且正在用原生 JavaScript 替换基于 jQuery 的习惯。

对于大多数项目，这是微不足道的；然而，我发现我真的很怀念 jQuery`$.each()`抽象的优雅，我想做一些类似的事情而不依赖 jQuery。

不幸的是，JavaScript 中的相同代码有点麻烦：

```
myArray = ["item 1", "item 2", "item 3"];
for(i=0; i<myArray.length; i++) {
    myArray[i] = "Do Something Here".
}; 
```

我想做的是有这样的事情：

```
myArray = ["item 1", "item 2", "item 3"];
myArray.each(function(){
    //do stuff
}); 
```

## 问题

是否已经有一种扩展方法可以实现这一点？我忍不住想我在重新发明轮子。如果那里没有任何东西，扩展方法会是最好的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:50:01.460

您在 EcmaScript 5 中有 forEach()：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

但它与 IE < 8 不兼容。

所以你可能需要使用这个库来支持所有浏览器：[https ://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:50:26.473

ECMA Script 5 包含了一种称为 Array 的方法[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)。用法与`jQuery.each`数组相同。

不再需要使用`for...in`循环，因为`Array.forEach`它很容易实现（请参阅文档中间的 MDN 文档链接）。

为了澄清，`forEach`将仅循环遍历数组，而不是对象或 jQuery 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:01:52.033

你可以使用

```
for( i in myArray ){ 
    alert( i + ': ' + myArray[i] ); /* your actions here */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:43:04.767

如果您想坚持自己的习惯，jQuery 也可用于节点。

```
npm install jquery 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:25:44.683

如果您的目标是在 node.js 中使用 foreach，您可能需要查看异步库。这允许您并行化您的 foreaches。

[https://github.com/caolan/async](https://github.com/caolan/async)

# mysql - 改进mysql加载数据

> ID：12370106
> 
> 赞同：0
> 
> 时间：2012-09-11T12:48:43.790
> 
> 标签：mysql, myisam, tokudb

是否有任何 mysql 参数可以提高 "LOAD DATA INFILE" 的速度？

我正在使用 1 个 MyISAM 和 1 个 TokuDB 表。数据保存为制表符分隔的文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:01:29.650

有多种方法可以加快速度。 [http://dev.mysql.com/doc/refman/5.1/en/insert-speed.html](http://dev.mysql.com/doc/refman/5.1/en/insert-speed.html)

对于大型插入，通常是索引更新会减慢速度。因此，即使使用锁定表、关闭索引更新等技术，创建索引仍然需要很长时间。通过增加 key_buffer_size 的值，可以加快 MyISAM 表上的索引创建和插入。使其足够大以容纳索引，并且您的插入速度可以提高几个数量级。如果需要，您可以在插入后减少它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:12:25.550

您是加载到空表还是已在其中行的表中？如果表为空，TokuDB 将实现它的批量加载器并非常快速地加载数据。

此外，如果您将数据加载到具有唯一索引（PK 或辅助索引）的表中，如果您知道数据是唯一的，请关闭 unique_checks。

# grid - extjs网格分组：选择加扰

> ID：12370120
> 
> 赞同：2
> 
> 时间：2012-09-11T12:49:27.807
> 
> 标签：grid, extjs4, extjs

我目前有一个具有分组功能的网格，可以从固定存储中获取数据：

```
Ext.define('YUK.store.FakePendingDocs', {
    extend: 'Ext.data.Store',
    id: 'FakePendingDocs',
    autoSync: false,
    proxy: {
        type: 'memory'
    },

   fields: [ { name: 'docId', mapping: 'did' }
            , { name: 'name', mapping: 'name'}//, mapping : 'name'}
            , { name: 'client',mapping: 'cid' }
            , { name: 'description', mapping: 'description' }
            , { name: 'uploadeddate', mapping: 'dl', type: 'date', dateFormat: 'MS' }
            , { name: 'folder', mapping: 'fo' }
            , { name: 'group', mapping: 'gr' }

           ],

   groupers: [{
       property: 'group',
       direction: 'ASC'
   }],. 

   data: [ ... ]

}
); 
```

然后我在我的网格中做：

```
Ext.define('YUK.view.center.pendingdocuments.Panel', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.documents',
    id: 'documents',
    title: 'My Documents',
    store: 'FakePendingDocs',

    hideHeaders: true,
    forceFit: true,

    groupField: 'group',

.... 
```

但是我的问题是我的选择在我的网格中被打乱了（我选择了一个项目，然后我得到了另一个）。我发现这个[http://www.sencha.com/forum/showthread.php?208453](http://www.sencha.com/forum/showthread.php?208453) 线程来解决这个问题。但由于我是 sencha 的新手，我不知道如何覆盖它。我做过类似的事情：

```
Ext.define('YUK.store.FakePendingDocs', {
    extend: 'Ext.data.Store',
    id: 'FakePendingDocs',
    autoSync: false,
    proxy: {
        type: 'memory'
    },

   fields: [ { name: 'docId', mapping: 'did' }
            , { name: 'name', mapping: 'name'}//, mapping : 'name'}
            , { name: 'client',mapping: 'cid' }
            , { name: 'description', mapping: 'description' }
            , { name: 'uploadeddate', mapping: 'dl', type: 'date', dateFormat: 'MS' }
            , { name: 'folder', mapping: 'fo' }
            , { name: 'group', mapping: 'gr' }

           ],

   groupers: [{
       property: 'group',
       direction: 'ASC'
   }],. 

   data: [ ... ],

   sort:function(){
     var me = this, groups, g;

     me.callOverridden(arguments);
     groups = me.getGroups();

     me.data.clear();

     Ext.Array.each(groups, function (group) {
        Ext.Array.each(group.children, function (child) {
           me.data.add(child.internalId, child);
        });
     });
     me.fireGroupChange();
  }

}
); 
```

但这不起作用，将其放入网格中也不起作用。

有人可以帮我弄这个吗 ？

PS：我的网格分组功能如下所示：

```
var groupingFeature = Ext.create('Ext.grid.feature.Grouping', {
    groupHeaderTpl: '{name}'

}); 
```

[Sencha论坛上的主题](http://www.sencha.com/forum/showthread.php?208453-4.0.2-Selection-model-returns-wrong-record-when-Grouping-feature-is-enabled/page2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:37:06.540

似乎没有解决我的问题的答案。

因此我通过使用数据视图解决了它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:59:56.207

我不确定，但`Panel`没有像`groupField`商店这样的选项。所以也许你应该`groupField: 'group',`从面板转移到商店。

更新：这就是 Extjs 错误。有人为此提供了修复，不知道它是否有效，但尝试添加：

```
Ext.override(Ext.data.Store, {
  sort:function(){
     var me = this, groups, g;

     me.callOverridden(arguments);
     groups = me.getGroups();

     me.data.clear();

     Ext.Array.each(groups, function (group) {
        Ext.Array.each(group.children, function (child) {
           me.data.add(child.internalId, child);
        });
     });
     me.fireGroupChange();
  }
}); 
```

在您的商店或应用程序启动之前的某个地方或您认为正确的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T06:31:08.280

[我在Sencha 论坛](http://www.sencha.com/forum/showthread.php?160739-grid-sorted-with-grouping-shows-WRONG-selection&p=1035199#post1035199)回答了类似的问题

我遇到了同样的问题，以下是诀窍：我在我的商店中添加了这个分拣机：

```
sorters: [{
    property: 'category',
    direction: 'ASC'
}] 
```

请注意，“类别”是我在商店中用于分组为 groupField 的列。需要使用 groupField 列进行排序，否则网格选择将无法正常工作。

# facebook - 如何使用 Facebook ID 向朋友发送 Facebook 消息？

> ID：12370122
> 
> 赞同：-1
> 
> 时间：2012-09-11T12:49:34.680
> 
> 标签：facebook, facebook-fql

我有我朋友的 Facebook id，现在想通过我的基于 flex 的应用程序向他发送消息。怎么做？

**更新：** 我登录到我的 facebook 个人资料，并希望使用基于 flex 的应用程序向我的所有朋友发送消息。

**注意：** 我已经获取了所有朋友的 facebook 个人资料 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:46:53.333

Facebook 最近发布了[通知 API](https://developers.facebook.com/docs/app_notifications/)，另见[https://developers.facebook.com/blog/post/2012/08/31/reach-users-1-1-with-the-notifications-api/](https://developers.facebook.com/blog/post/2012/08/31/reach-users-1-1-with-the-notifications-api/)。这些可以发送给任何已经在使用您的应用程序的用户。

否则，[用户对用户的请求](https://developers.facebook.com/docs/requests/#user_to_user)（如果接收者还不是您的应用程序的用户，则视为“邀请”）将是替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:22:23.560

执行 FQL 查询以查找用户`username`使用 Facebook ID (123)。

```
SELECT username FROM user WHERE uid = 123 
```

FQL 用户：http: [//developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)

获得`username`用户的信息后，您可以向其发送电子邮件，`username@facebook.com`收件人将收到它作为 Facebook 消息。

示例：[允许 facebook 应用程序的用户以某种方式进行通信](https://stackoverflow.com/questions/11819080/allowing-users-of-facebook-application-to-communicate-somehow/11885193#11885193)

（示例是使用 PHP 但思路是一样的）

# android - 显示带有是和否按钮和功能的警报对话框

> ID：12370133
> 
> 赞同：2
> 
> 时间：2012-09-11T12:50:07.627
> 
> 标签：android, android-asynctask

> **可能重复：**
> [Android ASync 任务 ProgressDialog 直到后台线程完成才显示](https://stackoverflow.com/questions/2702695/android-async-task-progressdialog-isnt-showing-until-background-thread-finishes)

我正在实现一个 android 应用程序。我有以下活动 1.StartMenu：-在此活动中，当我按下开始时，有三个按钮。它在另一个活动 AndroidGame 上移动。在 Androidgame 有主游戏面板的上下文。所以它开始执行游戏。我希望当 maingamepanel 加载它时显示一个 progressDilog 。选择是后它应该开始游戏。我无法进行对话框。请建议progressDialog应该保存在哪里？AlertDialog.Builder alertDialogBu​​ilder = new AlertDialog.Builder(this);

```
 // set title
    alertDialogBuilder.setTitle("Your Trial Period has Expired.");

    // set dialog message
    alertDialogBuilder.setCancelable(false).setPositiveButton("Ok",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {

                }
            });

    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();

    // show it
    alertDialog.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:06:21.433

单击警报对话框中的按钮后，它会启动另一个活动。在 onCreate() 方法中写入以下内容：

```
 doback dob=new doback();
    dob.execute(); 
```

在 oncreate() 下面

```
 class doback extends AsyncTask<URL, Integer, Long>
 {

  protected Long doInBackground(URL... arg0) 
  {

  }
  protected void onProgressUpdate(Integer... progress) 
  {

  }
  protected void onPostExecute(Long result) 
  {
   try
   {
    dialog.dismiss();
   }
   catch(Exception e)
   {
    e.printStackTrace();
    dialog.dismiss();
   }
  }
 } 
```

# android - onTouchlistner 在 android 中翻译动画 imageView

> ID：12370134
> 
> 赞同：1
> 
> 时间：2012-09-11T12:50:12.733
> 
> 标签：android, android-animation, android-event

## onTouchlistner 不适用于翻译动画图像视图。在动画过程中实际视图没有移动（只有图像的副本被动画）。请让我知道如何将触摸事件添加到动画图像视图。请在下面找到相同的代码。

```
 **activity class**

  public class AnimationAndroid extends Activity implements OnTouchListener {
                /** Called when the activity is first created. */
                ImageView viewOne; /* image view */
                Animation aOne;
                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.main);
                    viewOne = (ImageView) findViewById(R.id.viewone); /* to get image view */
                    aOne = AnimationUtils.loadAnimation(this, R.anim.animatextone);   /* initializing the animation from xml file */
                    viewOne.setOnTouchListener(this); /* onTouch listner on imageView */
                    viewOne.startAnimation(aOne); /* to start animation */
                }

                public boolean onTouch(View v, MotionEvent event) { 
/* onTouch event function*/
                      Toast.makeText(AnimationAndroid.this, "Image One",Toast.LENGTH_SHORT).show(); /* to display the toast message on touch */
                }
         }

                **Animation xml file code** 

 <?xml version="1.0" encoding="utf-8"?>
            <set xmlns:android="http://schemas.android.com/apk/res/android"
                android:shareInterpolator="false">
               <translate
                android:fromXDelta="20%p"
                android:fromYDelta="20%p"
                android:duration="28000"
                android:repeatMode="reverse"
                android:repeatCount="infinite"
                android:toXDelta="28%p"
                android:toYDelta="18%p" 
                android:fillAfter="false"   
                />
            </set>

        Please let me know how i can resolve the issue. I need to have infinite
        animation.still onClick on the animated image is not working. 
```

* * *

```
 **animation using nineoldandroid library**

       Implementation using nineoldandroid library but still not able to succeed.
       The click on animated moving image is not triggering the event.
       Please let me if am going wrong in implementing the nanooldandroid library   

public class NineOldTesting extends Activity implements OnClickListener{
       /* Called when the activity is first created. */
       final int duration = 2 * 15000;  /* duration of animation */
       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);  
           setContentView(R.layout.main);
           ImageView tv = (ImageView) findViewById(R.id.testView); /* imageview id*/
           AnimatorSet set = new AnimatorSet();   /* to do animation together */
           set.playTogether(
               ObjectAnimator.ofFloat(tv, "translationX", 0, 90),
               ObjectAnimator.ofFloat(tv, "translationY", 0, 90)
           ); /* to move image in x and y direction */
           set.setDuration(duration);  /*  to set duration of animation */
           set.start(); /* start animation */
           tv.setOnClickListener(this);  /* setting onclick listner for image view*/
       }
       @Override
       public void onClick(View v) {
           /* TODO Auto-generated method stub */
           Toast.makeText(getApplicationContext(), "hiiiiii", Toast.LENGTH_SHORT).show(); /* to display toast message on click*/
       }
   } 
```

# ruby-on-rails - 使用 FactoryGirl 的序列时验证失败

> ID：12370145
> 
> 赞同：2
> 
> 时间：2012-09-11T12:50:31.147
> 
> 标签：ruby-on-rails, rspec, rake, factory-bot

我对 RSpec 和 FactoryGirl 很陌生，并且在将工厂用于 RSpec 时试图通过我的测试。

我有一个 spec/controllers/shares_controller_spec.rb 规范，如下所示：

```
 require 'spec_helper'

describe SharesController do
  let(:user) do
    user = FactoryGirl.create(:user)
    user
  end

  let(:share) do
    share = FactoryGirl.create(:share)
    share
  end

  context "standard users" do
    it "cannot remove other person's shares" do
      sign_in(:user, user)
      send('delete', 'destroy', :id => share.id)
      response.should redirect_to shares_path
      flash[:alert].should eql('You must be the author to delete this share.')
    end
  end
end 
```

和规范/factories.rb：

```
 FactoryGirl.define do
  factory :user do
    sequence(:email) {|n| "user-#{n}@qwerty.com"}
    password "password"
    password_confirmation "password"
  end

  factory :share do
    title "Test"
    content "Test"
    user FactoryGirl.create(:user)
  end
end 
```

当我跑

```
rspec 规范/控制器/shares_controller_spec.rb
```

我的测试通过了，但它以某种方式破坏了 Cucumber：

```
$耙黄瓜：好的
耙中止！
验证失败：电子邮件已被占用

任务：TOP => cucumber:ok => db:test:prepare => db:abort_if_pending_migrations => environment
（通过使用 --trace 运行任务查看完整跟踪）
```

我究竟做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:04:24.800

您的代码中有一些让我感到奇怪的事情：

```
let(:user) do
  user = FactoryGirl.create(:user)
  user
end

let(:share) do
  share = FactoryGirl.create(:share)
  share
end 
```

你为什么要分配`user`和`share`在这里然后返回它们？所有你需要的是：

```
let(:user) { FactoryGirl.create(:user) }
let(:share) { FactoryGirl.create(:share) } 
```

同样在您的工厂中，您无需告诉 FactoryGirl 创建`user`关联，它会自动执行此操作（请参阅[文档](https://github.com/thoughtbot/factory_girl/wiki/Usage)）。所以这会做：

```
factory :share do
  title "Test"
  content "Test"
  user
end 
```

由于您实际上还没有发布您的黄瓜代码，因此很难准确猜测那里发生了什么，但我建议您首先更改这些内容，看看是否有帮助。如果没有，请提供有关您的黄瓜测试的更多信息，我会尝试提供更多建议。

# memcached - 过期时间的 Memcache 配置

> ID：12370155
> 
> 赞同：1
> 
> 时间：2012-09-11T12:50:57.393
> 
> 标签：memcached

假设我有 30 秒的缓存，生成缓存的 db 请求需要 2 秒，我每秒收到 100 个请求，当缓存需要刷新时会发生什么？

我怀疑我的数据库被击中 200 次。我想要发生的事情是让第一个通过，然后告诉其他人返回缓存，所以基本上在 30 秒之后，缓存的第一次尝试在这里什么也没说，但是剩下的得到以前存在的东西，直到让通过的那个更新它。

我必须在应用程序级别执行此操作，还是可以将 memcache 配置为执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:43:57.693

您将需要在您的应用程序中构建此逻辑。当在 memcached 中找不到该项目时，只需从数据库中检索它，并在缓存中创建一个新项目。项目过期后，您需要从数据库中重新缓存项目。

```
[ get item from cache ] ----- yes
   |                           |
  no                        [ return item ]
   |
   |
[ get item from database ] -- yes
   |                           |
  no                        [ store item in cache ]
   |                           |
[ return not found ]        [ return item ] 
```

# nhibernate - .NET 数据库迁移支持部分版本

> ID：12370156
> 
> 赞同：2
> 
> 时间：2012-09-11T12:51:01.747
> 
> 标签：nhibernate, fluent-nhibernate, database-migration, self-updating

场景很简单，一个模块化的应用程序，每个模块都必须在升级期间管理自己的数据库部分。

使用的 ORM 是 NHibernate，所以如果有什么东西可以很好地配合它，那就是一个额外的优势。

此外，它需要能够在没有外部工具（MSBuild 等）的情况下执行，而应该通过 ADO.NET（如 NHibernate 的 SchemaUpdate）运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T15:43:07.743

我发现[Fluent Migrator](http://nuget.org/packages/FluentMigrator)效果很好。如果您使用当前日期和时间（例如 V201209111740UpdateTableX）对迁移进行版本控制，那么您将不会遇到版本号冲突的问题，并且 Fluent Migrator 将运行任何未按顺序运行的版本（afaik）。它没有专门的“部分”版本，但通常使用它应该可以工作。

此外，您可以在自己的应用程序中运行它 - 您不需要通过 MSBuild 或通过它自己的工具运行它

# c# - 如何在.NET中将一个项目编译成多个dll

> ID：12370157
> 
> 赞同：7
> 
> 时间：2012-09-11T12:51:03.337
> 
> 标签：c#, .net, visual-studio-2010, csc

我正在尝试将一个 .Net c# 项目编译成多个 dll。但事情就是这样。

这是我的项目结构。

```
Bin 
Dir1 
Dir2 
File1.cs 
File2.cs 
myproject.csproj 
```

我想把这个项目编译成 File1.dll 和 File2.dll。File1.dll 和 File2.dll 都使用 Dir1 和 Dir2 中的各种 .cs 文件中的代码。File1.cs 需要子目录中的 .cs 文件中的这些类，而 File2.cs 需要其他类。File1.cs 和 File2.cs 都会使用一些。

我使用了以下内容：

```
csc /t:library /out:File1.dll /recurse:*.cs
csc /t:library /out:File2.dll /recurse:*.cs 
```

但是生成的 dll 是彼此的精确副本，只是文件名不同。有没有办法让我编译它们，这样当我检查对象浏览器中的每个 dll 时，它只有那些来自 Dir1 和 Dir2 中的 .cs 文件的类，这些类在 File1.cs 中为 File1.dll 引用，对于 File1.dll 和类似的文件2.dll？

我想最好将其作为 Visual Studio 中后期构建步骤的一部分。

谢谢你的时间...

**编辑**

感谢您的所有回复。有很多建议将解决方案拆分为多个项目。虽然这是一种方法，但我不确定是否要为这两个 dll（即 File1.dll 和 File2.dll）创建任何依赖项。让我解释..

我在创建多个项目时看到的问题是 File1.cs 和 File2.cs 都需要一些代码。我不希望它们在两个项目中重复。将公共代码保留在第三个项目中意味着将创建 File1.dll 和 File2.dll 都需要的第三个 dll。我不想要这个。我只想创建 File1.dll 和 File2.dll，这就是为什么我将它们都保存在一个项目中的原因。关于如何实现这一点的任何建议？

再次感谢您的回复。

干杯。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T12:52:58.833

如果您想为每个组件使用单独的库，则需要将您的项目拆分为同一解决方案中的多个项目。

您可以在多个项目中包含相同的文件，而无需创建重复的副本 ( `Add as link`) 以避免重复代码的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:56:45.370

您可以使用条件编译符号 ( `#if DLL1`, `#if DLL2`)。

然后，在您的构建步骤中，使用`/p:DefineConstants`设置这些符号的选项调用 msbuild。

```
MSBUILD /p:DefineConstants=DLL1 ... 
```

基本上用不同的条件编译符号集编译你的项目两次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:54:16.007

为您要生成的每个 DLL 创建一个项目并添加特定于每个的文件。例如`myproject1.csproj`包含`File1.cs`（和其他需要的文件）和`myproject2.csproj`包含`File2.cs`. 之后，创建包含任何公共文件的第三个项目，并从前两个中引用该共享程序集。

或者，如果您想包含和排除不同的代码片段，请考虑使用 #if 语句检查预处理器常量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T12:54:03.587

您需要多个项目来执行此操作。没有什么能阻止您从多个项目中引用同一个 CS 文件。

此外，如果这样做有意义，如果您需要逻辑分组，两个项目都可以存在于一个解决方案下。

# svg - 如何在 Raphael / SVG 中表示一扇门

> ID：12370160
> 
> 赞同：2
> 
> 时间：2012-09-11T12:51:18.847
> 
> 标签：svg, raphael

我希望能够将门表示为三角形，但较小的一侧如下图所示。

如何使用 SVG / Raphael 做到这一点？我了解如何制作三角形，但我不确定如何处理弯曲部分。

![在此处输入图像描述](../Images/dd8d901bcd4efea05ee52bfa9b4ccb55.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:00:04.507

像任何其他 Raphael 路径一样创建一个路径（请参阅[Raphael 文档的 path](http://raphaeljs.com/reference.html#Paper.path)），并在其定义中包含一个椭圆弧 (A)。

这是一个带有示例的 JSFiddle：http: [//jsfiddle.net/XzPzE/362/](http://jsfiddle.net/XzPzE/362/)

# php - 在提交时打开thankyou.html + 下载PDF

> ID：12370161
> 
> 赞同：1
> 
> 时间：2012-09-11T12:51:21.030
> 
> 标签：php, javascript

我有一个简单的下载表单，在提交时我希望用户能够下载 PDF 并同时打开感谢页面。

我尝试使用 window.open 以及几个 PHP 方法（标题）。虽然 PHP 方法正在执行弹出下载 pdf 屏幕的工作，但该页面并未重定向到感谢页面。

任何人都可以帮助使用 JS 或 PHP 吗？

我对这两个都不太了解——如果你能分享整个代码，我将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:54:03.900

您最好的方法是正常打开感谢表，然后在超时（使用[`setTimeout`](http://www.w3schools.com/jsref/met_win_settimeout.asp)）时，使用[`window.open("url", "_blank")`](http://www.w3schools.com/jsref/met_win_open.asp)打开 PDF 下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:21:01.183

您将需要 3 个文件：

1.  您的带有表单页面的文件具有：
    `<form action="thanks.php" id="form" method="POST"><!-- your form content and a submit button here--></form>`

2.  一个**Thanks.php**页面，其中包含：
    `<iframe src="download_pdf.php" style="display:none;" />`

3.  最后创建一个**download_pdf.php**页面：

```
<?php
 $file = 'filename.pdf';
 if(!file){
     die('Error: file not found');
 }else{
     header("Cache-Control: public");
     header("Content-Description: File Transfer");
     header("Content-Disposition: attachment; filename=$file");
     header("Content-Type: application/pdf");
     header("Content-Transfer-Encoding: binary");
     readfile($file);
 }
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:59:44.033

在将任何其他内容发送到浏览器之前，您只能使用 header() 进行 PHP 重定向。页面加载后，您需要使用 JS。这对 JS 来说很简单：

```
window.location = "http://example.com"; 
```

但是，我会质疑一次加载两个窗口。显示感谢页面并提供一个链接可能更容易，他们可以在该页面上查看/下载 PDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T10:50:47.713

实际上，用户不应该重复使用感谢页面 url 来重复下载 pdf，这会破坏首先获取用户信息的目的。因此，在您可以显示下载的感谢页面中需要超时。但是请检查您是否可以通过使用弹出窗口以某种方式掩盖感谢页面的 url。

# php - PHP 复杂的基于角色的访问控制列表

> ID：12370162
> 
> 赞同：4
> 
> 时间：2012-09-11T12:51:27.853
> 
> 标签：php, security, acl, role-base-authorization

我已经制作了实现这个定制的 ACL 系统所需的数据库和 php 代码。现在我必须“授权”当前用户，这就是我需要你建议的地方。

该系统基于对系统用户和系统模块的灵活权限分配。它还有一些预定义的，比如说用户组，也可以创建完全自定义的组。全局规则也可以应用在 ACL 之上，但它的优先级低于分配权限的组或用户。

为了更好地描绘它：

预定义组：

1.  有限（禁止访问）
2.  基本用户
3.  高级用户
4.  行政人员
5.  访客（定制组的样本）

以下是访问级别（名称/值对）：

*   不允许 / 0
*   允许 / 1
*   否认 / 2
*   如果所有者允许 / 3

注意：“允许”在“禁止”上具有更高的优先级，所以如果您在 A 组上让用户 X 被“禁止”，但在某个访问权限上 B 组“允许”，那么他最终会“允许”。另一方面，如果用户 X 通过成为“管理员”组的成员而具有“完全访问权限”，但如果他只是在某个访问权限上“拒绝”，则他最终没有访问权限，这意味着“拒绝” “允许”具有更高的优先级。

在顶层，您可能有以下内容：

*   "Administrator" * "1"，表示管理员拥有系统的完全访问权限
*   "Visitors" * "0"，这意味着访客不允许在任何东西上

我的问题是如何处理这些支票？假设我们有一个简单的授权机制。我们会在我们的`$_SESSION['user']`like`$_SESSION['user']['login'] = true;`和中有一些索引`$_SESSION['user']['id'] = $row['user_id']`，对吧？

现在，如果你想在你的脚本上实现这个机制，你会怎么做？

我可能会首先检查全局访问规则。然后我会看看用户是否已经登录。如果是，只需获取他的所有组，然后查看权限表以查看哪些权限分配给了他的组和他的用户 ID，然后将它们存储在用户会话中。然后，当模块说这是我运行所需的权限时，我会查看用户是否有足够的权限访问所请求的模块。

看起来相当复杂！非常感谢任何帮助或建议！:)

**编辑：**

我没有使用任何框架。其实我用过，不过是我自己的。所以，这里没有预制的 ACL！

**更新：**

您对优先考虑（覆盖/替换？）ACL 的有效方法有任何想法吗？

`Deny`是最高的，然后`Allow`是`Disallow`。分配的 ACL也是`User`最高的，然后是`Group`ACL，最后是`Global`ACL。

这是我最终想到的：

有一个`Array`，像这样：

```
$_SESSION['ACL'][$module][$action] = $access_level; // 0, 1, 2, 3 
```

首先，我会查找所有 Global Rules `*`，并将它们放在数组中：

```
// The current user can see the map, applied by a global rule
$_SESSION['ACL']['map']['render'] = 1;

// All the other permissions are disallowed by default
$_SESSION['ACL']['*']['*'] = 0;

// He can edit his preferences, (Owner)
$_SESSION['ACL']['user']['*'] = 3; 
```

然后，我将寻找基于组的 ACL：

```
// User could access the Analyze module, all the methods 
// with Permission Name "report". Applied by being a member 
// of "Moderator" Group
$_SESSION['ACL']['analyze']['report'] = 1;

// User NOT allowed to access "groups" module, let say
// it reserved for "admin" group! - To see the ACLs' Overwriting!
$_SESSION['ACL']['groups']['*'] = 0; 
```

毕竟，我会寻找用户分配的 ACL：

```
// User have Full Access to the "groups" module.
// It's gonna replace the last ACL, applied by "Moderator" group
// Note that the order of processing ACLs is IMPORTANT!
$_SESSION['ACL']['groups']['*'] = 1; 
```

我想它会完美运行，有什么想法吗？

**它现在工作得很好:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:39:30.900

这是我在 MVC 环境中处理它的方式，创建一个具有这种结构的表：

```
(id, group_id(int), user_id(int), controller(varchar), action(varchar)) 
```

然后我在组和 user_id 上使用 -1 来表示通配符，在控制器和操作上使用 *。因此，在您的示例中，管理员可以执行任何操作（1,4,-1, *,*）。或者假设高级用户可以修改用户 (2,3,-1,user,*)。或者如果你想给一个人（user_id 为 34）一个权限，不管他们在哪个组（3，-1，34，用户，更新）。如果您想将 0-3 存储为允许，不允许，只需添加一列。然后，您只需检查正在调用哪个控制器和操作，并找到适用于该人的组以及具体适用于他们的任何权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:01:56.687

只需创建您的权限/组表：

```
id, group/permission name 
```

然后，创建多对多表将组链接到用户：

```
id, user_id, group_id 
```

如果您只是使用组权限，则不需要访问级别。

然后，在您的代码中，只需像这样检查用户组：

```
function checkAccess($pageLevelRequired)
{
  // run query based on current user session id
  // run your query to check if the current user belongs to the group required to view this page.
} 
```

说得通？

# javascript - 为什么这个警报框没有被触发？在这里追鬼？

> ID：12370165
> 
> 赞同：1
> 
> 时间：2012-09-11T12:51:34.353
> 
> 标签：javascript, jquery, yii

我已经疯了：

我的应用程序上有完全相同的代码：

[http://jsfiddle.net/MZbLW/144/](http://jsfiddle.net/MZbLW/144/)

完全相同的。

但是，在我的应用程序中，第二个警报框永远不会显示。

这是复制粘贴：

```
<script>    

    if (typeof jQuery != 'undefined') {

    alert("jQuery library is loaded!");

}else{

    alert("jQuery library is not found!");

} // yes I'm this desperate! 

    $(document).ready(function() {

        // Using on method
        $(".trigger").on("click", function()
        {        

            // Using length instead of size. Using === instead of ==
            if($('#localized fieldset').length === 1)
            {
                window.alert("PLEASE SHOW "); //THIS DOESN'T APPEAR;
            }
            else
            {
                $('#localized fieldset:last-child').remove();
                // Toggle visibility.
                $(".trigger").toggle();
            }

            //return false; //prevent default anchor action;

        });
    });
</script>
    <style>
    .linkRemove {
    display:none;}
    </style>

<div id="localized">
    <fieldset>
            <label>hello</label>
            <input type="text" />
    </fieldset>
</div>

<a class="trigger" href="#"> Add Translation ▼&lt;/a>
<a class="trigger linkRemove" href="#"> Remove Translation</a> 
```

我知道，如果不访问应用程序代码本身，调试起来并不容易，但是，一个简单的“它可能是什么”可能会帮助我弄清楚这一点。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:25:34.370

问题解决了。

这与应用程序在 Jsfiddle 上运行不同的 Jquery 版本有关。

不支持“on”方法，因此，我们使用相同的代码获得了不同的输出。

# android - 单击联系人图标后，将自己的应用程序图标添加到 QuickAction 对话框

> ID：12370169
> 
> 赞同：1
> 
> 时间：2012-09-11T12:51:40.113
> 
> 标签：android, dialog

我想将我自己的应用程序图标添加到![在此处输入图像描述](../Images/977c50351da88252ed254caae0a62119.png)Android 联系人中的 QucikAction 对话框。我发现了这个[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

我有使用联系人（人）的应用程序，我想转到所需的联系人（通过堆栈应用程序管理联系人），单击联系人的图标，QuickAction 对话框应该包含我的应用程序的图标，我单击并且我的应用程序应该以联系信息开头。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:13:23.610

You **can't** do this, this is not supported by stock "Phone" or "Contacts" apps.

A reason behind this - list of quick actions shows possible **type** of **actions** that you can do with underlying contact, rather than **list** of **apps** that can do *something* with this contact.

All you can do is add your app to list of some predefined actions, like "sending SMS", "making a phone call", "viewing photos", etc. In order to do this you need to specify correct intent-filters in your manifest file. In that case your app can appear in list of apps that shows after user clicks one of quick actions mentioned above

# sql - SQL 脚本中的逗号分隔数据

> ID：12370172
> 
> 赞同：0
> 
> 时间：2012-09-11T12:52:06.807
> 
> 标签：sql, sql-server, database, automation

我有一个 sql 文件，它从逗号分隔的文件中读取大量数据。这给我们带来了问题，因为不同的环境有不同的路径，因此我们的自动数据库脚本无法随机运行。

我们还没有想到获得正确绝对路径的聪明方法，而且由于 .csv 文件对 sql server 可见的要求，它变得更加复杂。

我会对 sql 文件中的“数据块”非常满意，但我不确定这是否可行，或者如果可以的话，如何最好地安排它。

编辑：这是 SQL Server :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:59:36.673

Here is my suggestion:

1.  Have a master table with the paths on all the servers.
2.  Synchronize this table as necessary (say, copy it around every night).
3.  Use BULK IMPORT. Construct the command in dynamic SQL.
4.  Execute the command

# javascript - Rails/Javascript 链接到函数以切换多个元素

> ID：12370173
> 
> 赞同：0
> 
> 时间：2012-09-11T12:52:17.517
> 
> 标签：javascript, ruby-on-rails, toggle

我正在尝试在这里修复一些损坏的代码。基本上它是一个小数据表，向人们显示一些摘要数据，以便他们可以大致了解他们所看到的内容。它被一个标签隐藏，从显示人口统计数据变为隐藏人口统计数据。我正在使用 javascript 来切换这些元素，并使用 link_to_function 来完成它。

这是我的代码：

```
def drawer_links(drawer_name)
  s = []
  js = "$('#target_table','#show_target_link','#hide_target_link').toggle()"
  s << link_to_function('Show ' + drawer_name, js, :id => 'show_target_link')
  s << link_to_function('Hide ' + drawer_name, js, :id => 'hide_target_link', :style => 'display:none')
  return s
end 
```

这是我的基本想法，当单击 show_target_link 时，它会隐藏自己，然后显示 hide_target_link 和 target_table。当您单击 hide_target_link 时，它将隐藏自身和 target_table 并显示 show_target_link。我发现的问题是，当我单击链接时，什么都没有发生，没有任何变化。如果我将代码更改为

```
 js = "$('#target_table').toggle()" 
```

然后当我点击链接时，它会切换 target_table 并且显然链接不会改变。然后我如何选择多个元素来执行相同的操作。没有控制台错误。通过我点击链接dosent甚至触发日志。所以我没有办法闻出来。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:01:33.570

试试这个， `js = "$('#target_table,#show_target_link,#hide_target_link').toggle()"`
如果它正在工作或添加一个通用类，如**toggleLink**并通过 toggleclass 切换链接

# r - 将网格线添加到与轴中断无关的 ggplot

> ID：12370175
> 
> 赞同：0
> 
> 时间：2012-09-11T12:52:19.110
> 
> 标签：r, ggplot2, gridlines

我有两个不同类别的核苷酸序列（A、T、C 和 G 的有序字符序列）的丰度数据。我想使用 ggplot 将覆盖率显示为序列上的线图。我已经走得很远了，还有几个障碍要跳。样本数据：

```
> dput(so.sample)
structure(list(`1_mes_wt` = c(0, 0, 4.25897346349789, 10.0666645500859, 
10.0666645500859, 48.3974257215669, 78.2102399660521, 250.698665237717, 
250.698665237717, 268.702507606139, 271.79994285232, 301.225577691032, 
301.225577691032, 301.225577691032, 301.225577691032, 311.292242241118, 
311.292242241118, 311.292242241118, 311.292242241118, 311.292242241118, 
311.292242241118, 311.292242241118, 311.292242241118, 311.292242241118, 
311.292242241118, 311.292242241118, 311.292242241118, 321.746086196977, 
321.746086196977, 321.746086196977, 319.616599465228, 308.969165806483, 
285.931991163017, 204.817905653671, 195.332010212244, 170.165348837029, 
170.165348837029, 170.165348837029, 170.165348837029, 37.3628126570497, 
40.8474273090025, 22.456405534807, 22.456405534807, 17.8102526655366, 
17.8102526655366, 17.8102526655366, 17.8102526655366, 17.8102526655366, 
17.8102526655366, 17.8102526655366, 17.8102526655366, 15.6807659337877, 
15.6807659337877, 15.6807659337877, 15.6807659337877, 15.6807659337877, 
15.6807659337877, 15.6807659337877, 15.6807659337877, 15.6807659337877, 
15.6807659337877, 15.6807659337877, 15.6807659337877, 15.6807659337877, 
15.6807659337877, 15.6807659337877, 5.22692197792922, 5.22692197792922, 
5.22692197792922, 5.22692197792922, 5.22692197792922, 5.22692197792922, 
5.22692197792922, 5.22692197792922, 5.22692197792922, 5.22692197792922, 
5.22692197792922, 1.74230732597641, 1.93589702886268, 1.93589702886268, 
4.25897346349789, 2.71025584040775, 2.71025584040775, 68.5307548217387, 
89.6320324363419, 90.0192118421144, 93.310236791181, 93.1166470882947, 
93.5038264940673, 93.8910058998398, 93.8910058998398, 93.8910058998398, 
93.8910058998398, 93.8910058998398, 93.8910058998398, 93.8910058998398, 
93.8910058998398, 93.8910058998398, 93.8910058998398, 93.8910058998398, 
93.8910058998398, 93.8910058998398, 93.8910058998398, 93.8910058998398, 
93.8910058998398, 93.6974161969535, 93.6974161969535, 93.6974161969535, 
93.6974161969535, 93.6974161969535, 93.6974161969535, 93.6974161969535, 
93.6974161969535, 93.6974161969535, 89.2448530305694, 77.2422914516208, 
1.16153821731761, 0, 0, 0, 0), `2_mes_wt` = c(0, 0, 13.3249362857652, 
41.0267775114349, 41.3774337294814, 100.988990797378, 100.988990797378, 
341.188500159198, 343.643093685523, 359.422623497613, 381.163309016493, 
450.242583971645, 450.242583971645, 450.242583971645, 450.242583971645, 
450.242583971645, 450.242583971645, 450.242583971645, 450.242583971645, 
450.242583971645, 450.242583971645, 450.242583971645, 450.242583971645, 
450.242583971645, 450.242583971645, 450.242583971645, 450.242583971645, 
450.242583971645, 450.242583971645, 450.242583971645, 450.242583971645, 
426.047304926439, 366.085091640496, 308.928128098924, 201.977981594756, 
201.977981594756, 205.133887557174, 205.133887557174, 205.133887557174, 
85.5601172033343, 98.8850534890995, 17.1821546842762, 17.1821546842762, 
17.1821546842762, 17.1821546842762, 17.1821546842762, 17.1821546842762, 
16.8314984662297, 16.8314984662297, 16.8314984662297, 16.8314984662297, 
50.8451516167356, 52.5984327069678, 52.5984327069678, 52.5984327069678, 
52.5984327069678, 52.5984327069678, 52.5984327069678, 52.5984327069678, 
52.5984327069678, 52.5984327069678, 52.5984327069678, 52.5984327069678, 
52.5984327069678, 52.5984327069678, 52.5984327069678, 52.5984327069678, 
52.5984327069678, 52.5984327069678, 52.5984327069678, 52.5984327069678, 
52.5984327069678, 52.5984327069678, 52.5984327069678, 52.5984327069678, 
52.5984327069678, 52.5984327069678, 39.2734964212026, 37.5202153309704, 
42.0787461655743, 54.7023700152465, 54.7023700152465, 54.7023700152465, 
113.261958429004, 114.313927083143, 114.313927083143, 116.067208173376, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 82.0535550228698, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 82.0535550228698, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 82.0535550228698, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 82.0535550228698, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 82.0535550228698, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 82.0535550228698, 
82.0535550228698, 82.0535550228698, 82.0535550228698, 74.3391182258479, 
63.4687754664078, 0, 0, 0, 0, 0), nucl = 47738064:47738184, base = c("T", 
"C", "A", "A", "A", "A", "A", "A", "G", "A", "C", "T", "A", "G", 
"T", "C", "A", "A", "G", "T", "G", "C", "A", "G", "T", "A", "G", 
"T", "G", "A", "G", "A", "A", "G", "G", "G", "G", "G", "G", "A", 
"A", "A", "G", "T", "G", "T", "A", "G", "A", "A", "C", "A", "G", 
"G", "A", "G", "T", "T", "C", "A", "A", "T", "C", "T", "G", "T", 
"A", "A", "C", "T", "G", "A", "C", "T", "G", "T", "G", "A", "A", 
"C", "A", "A", "T", "C", "A", "A", "T", "T", "G", "A", "G", "A", 
"T", "A", "A", "C", "T", "C", "A", "C", "T", "A", "C", "C", "T", 
"T", "C", "G", "G", "A", "C", "C", "A", "G", "C", "C", "A", "A", 
"T", "G", "C")), .Names = c("1_mes_wt", "2_mes_wt", "nucl", "base"
), row.names = c(NA, -121L), class = "data.frame") 
```

为了同时显示序列（碱基）和序列位置（nucl），我将位置绘制为因子，然后使用文本几何图形用序列标记轴。它工作得相当好：

```
pdf("so_sample.pdf",width=15,height=7)
ggplot(melt(so.sample,id.vars=c("nucl","base")), aes(factor(nucl), 
       value, group=variable, colour=variable)) + 
  geom_line() + geom_text(y=-5,size=3,aes(label=base))
dev.off() 
```

![在此处输入图像描述](../Images/fc78db91dfbbf1f26aaa60dcdcce5f98.png)

但是，将这些大数字绘制为因素会导致主要重叠，无论如何我都不需要查看每个位置标签。所以我删除了一些休息时间。

```
pdf("so_sample2.pdf",width=15,height=7)
ggplot(melt(so.sample,id.vars=c("nucl","base")), aes(factor(nucl), 
       value, group=variable, colour=variable)) + 
  geom_line() + geom_text(y=-5,size=3,aes(label=base)) + 
  scale_x_discrete(breaks=seq(min(so.sample$nucl),
                   max(so.sample$nucl),10))
dev.off() 
```

![在此处输入图像描述](../Images/62c5c84c2957310b10ad9a3d60063888.png)

我快到了，但在删除中断时，我还删除了与字符序列一起特别有用的次要网格线。是否有任何方法可以添加独立于中指定的中断的次要网格线`scale_x_discrete`？

还有一个问题：序列标签之所以有效，是因为它为每个分组在完全相同的位置绘制相同的字符，并且这些标签的最终颜色由绘制组的顺序决定。我希望序列是中性颜色，但我不知道是否甚至可以`geom_text`独立于分组给出这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:11:57.870

保持原样`nucl`而不将其包装在调用中`factor`允许您使用`scale_x_continuous`，与 不同`scale_x_discrete`的是，它有一个`minor_breaks`参数。

# sql - 如何在 oracle 存储过程中创建和执行动态查询？

> ID：12370176
> 
> 赞同：0
> 
> 时间：2012-09-11T12:52:18.783
> 
> 标签：sql, oracle, stored-procedures

我需要在存储过程中动态创建和执行查询。

我有两个表用户和 user_updates。

员工表有`emp_id, username, division, product, region, title etc.`

Employee_updates 有类似的列`emp_id, effective_date, column_name, new_value etc.`

基本上这就是我想要做的。

1.  获取给定生效日期在 user_udates 表中具有更新的所有员工。

2.  循环遍历每个员工。

3.  获取给定生效日期每位员工的所有更新。一个员工在employee_updates 表中可能有一个或多个更新。

4.  根据这些更新创建动态“更新”查询，例如

    `update employee set col1 = new_val_1, col2 = new_val_2 where emp_id = ?`

这是我到目前为止所做的

```
 create or replace
PROCEDURE SP_RUN_EMPLOYEE_UPDATES 
(
  IN_DATE IN DATE
) 
  IS

    update_sql varchar2(225); 

employee_id BI_EMPLOYEE_UPDATE.employee_id%TYPE;   

    CURSOR  employees 
        IS   SELECT distinct(employee_id)
               FROM BI_EMPLOYEE_UPDATE 
             WHERE EFFECTIVE_DATE = to_date(IN_DATE,'dd-mm-yy') 
              AND EXECUTED = 'N' AND ACTIVITY_ID = '0'
              ;

    CURSOR e_updates 
    IS  SELECT * 
         FROM BI_EMPLOYEE_UPDATE 
        WHERE EFFECTIVE_DATE = to_date(IN_DATE,'dd-mm-yy') 
         AND EXECUTED = 'N' 
         AND ACTIVITY_ID = '0' 
         and employee_id = employee_id ;

     BEGIN

   OPEN employees;
   LOOP
    FETCH employees into employee_id;
        EXIT WHEN employees%NOTFOUND;

           FOR e_update in e_updates
         update_sql :=  'UPDATE BI_EMPLOYEE SET ';
              LOOP
                -- create dynam,ic update statment

                 UPDATE BI_EMPLOYEE_UPDATE
                 SET EXECUTED = 'Y'
                 WHERE EMPLOYEE_UPDATE_ID = e_update.EMPLOYEE_UPDATE_ID ;

                END LOOP;

            -- run dynamic sql 

              END LOOP;
 CLOSE employees;
END; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:43:27.157

您在这里有一些问题，包括：

*   `IN_DATE`被声明为日期，因此您不需要通过`TO_DATE()`.
*   你只需要一个游标循环；如果`employee_id`出于某种原因您想一起处理所有更新，您可以添加一个`order by`子句。
*   您根本不需要动态 SQL；您可以将游标中的值用作静态 SQL 更新的一部分。

因此，带有单个循环的简单版本可能类似于：

```
CREATE OR REPLACE PROCEDURE sp_run_employee_updates (p_date IN DATE) IS
    CURSOR c_updates IS
        SELECT *
        FROM bi_employee_update
        WHERE effective_date = p_date
        AND executed = 'N' 
        AND activity_id = '0'
        FOR UPDATE;     
BEGIN
    -- loop around all pending records
    FOR r_update IN c_updates LOOP
        -- apply this update to the bi_employee record
        UPDATE bi_employee
        SET col1 = r_update.col1, col2 = r_update.col2
        WHERE emp_id = r_update.employee_id;

        -- mark this update as executed
        UPDATE bi_employee_update
        SET executed = 'Y'
        WHERE CURRENT OF c_updates;
    END LOOP;
END sp_run_employee_updates; 
```

这是使用`for update`and`where current of`构造来锁定您正在使用的行并简化更新；[请参阅此处](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/static.htm#CIHHIIID)的文档。

值得注意的是，如果其中一个`effective_date`或`p_date`有一个时间组件，它们将不匹配。不太可能`p_date`，但更难猜测`effective_date`。如果确实如此，那么您要么需要`trunc()`它，要么使用它`between`来查找时间范围。

# django - Django：在模型定义中设置默认小部件

> ID：12370177
> 
> 赞同：14
> 
> 时间：2012-09-11T12:52:20.007
> 
> 标签：django, widget

是否可以在模型定义中为模型设置自定义小部件？

例如，有一个模型 ModelA 引用模型 ModelB，我希望 ModelA 的 modelForm 使用 ModelB 定义的自定义小部件自动将引用字段呈现给 ModelB。

背后的用例是创建可重用应用程序，其中可重用应用程序应为使用该应用程序的开发人员提供表单字段小部件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T13:03:48.220

> 是否可以在模型定义中为模型设置自定义小部件？

是的，如果您覆盖该字段：[为模型字段指定表单字段](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#specifying-the-form-field-for-a-model-field)。

# c# - 如何调试嵌入在 WebBrowser 控件中的 Silverlight？

> ID：12370179
> 
> 赞同：1
> 
> 时间：2012-09-11T12:52:26.283
> 
> 标签：c#, wpf, silverlight, debugging, browser

我有一个带有 WebBrowser 控件的 WPF 应用程序。WebBrowser 使用 Silverlight 应用程序加载页面。是否可以同时调试两个应用程序？如何启动 Silverlight 应用程序？

**编辑：** 如果我启动 Silverlight 解决方案，我可以在“浏览器窗口”中调试代码。如果我启动 WPF 解决方案，我可以调试 WPF 部分，但我无法在“WPF 窗口”中调试 Silverlight - 代码有效但断点被忽略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:02:32.100

您可以调试这两个应用程序 - **WPF WebBrowser**控件只需指向**localhost** ( *via[`Webbrowser.Navigate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigate.aspx)* )，以便您可以轻松附加到**SL 应用程序主机进程**（*IIS、IIS Express 等*-*或在您的 Web 服务器托管上启用远程调试支持XAP*）。对于 WPF，只需使用`F5`它来自动附加它。

# mongodb - 为什么我看不到 mongodb 使用的索引的名称？

> ID：12370185
> 
> 赞同：1
> 
> 时间：2012-09-11T12:53:03.127
> 
> 标签：mongodb, indexing

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^soto/, /^nasi/] } }).limit(200).explain();

{
        "cursor" : "GeoSearchCursor",
        "nscanned" : 48,
        **"nscannedObjects" : 48,**
        "n" : 48,
        "millis" : 8563,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {
        }
}
> 
```

那么索引的名称是什么？我看到一些问题确实出现了索引名称。看看这里[MongoDB：为什么不按多个键排序使用索引？](https://stackoverflow.com/questions/12072569/mongodb-why-doesnt-sorting-by-multiple-keys-use-an-index)例如

我还听说过 explain(true) 在这里根本没有记录的地方：

[http://www.mongodb.org/display/DOCS/Explain](http://www.mongodb.org/display/DOCS/Explain)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:09:07.603

我不确定这是故意的还是有缺陷的，但是当使用地理空间索引时，所用索引的名称不会显示在解释计划中。

只有在使用 BtreeCursor 时才会显示索引名称。

如上面评论中所述，一个集合中只能有一个地理空间索引。在此参数下，您可以假设如果光标是“GeoSearchCursor”，则它正在使用您想要的该集合的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:28:46.797

这是一个已知的问题。请参阅[https://jira.mongodb.org/browse/SERVER-4213](https://jira.mongodb.org/browse/SERVER-4213)

# javascript - 绝对定位不适用于 Javascript DIV

> ID：12370186
> 
> 赞同：0
> 
> 时间：2012-09-11T12:53:09.390
> 
> 标签：javascript, jquery, css

我使用了一些 Javascript 从网页底部向上滑动 DIV，并且尝试将其定位在绝对底部中心。

底部的 DIV 似乎在左下角，无论浏览器窗口大小如何，我都试图让它居中。

我会查看这个 URL 以查看相关页面：[http ://s361608839.websitehome.co.uk/oneonly/index.html](http://s361608839.websitehome.co.uk/oneonly/index.html)

HTML：

```
<div class="slide-out-div">
  <a class="handle" href="http://link-for-non-js-users">Content</a>
  <a href="mailto:name@domain.com">name@domain.com</a><br /><br />
  <p>Address</p>
  <p>Telephone</p>
</div> 
```

CSS：

```
.slide-out-div {
  padding: 20px;
  width: 276px;
  background: url(images/kontakt-bg.png);
  color: #fff;
} 
```

JS：

```
$(function(){
  $('.slide-out-div').tabSlideOut({
    tabHandle: '.handle',                        //class of the element that will be your tab
    pathToTabImage: 'images/kontakt-tab.png',    //path to the image for the tab (optionaly can be set using css)
    imageHeight: '26px',                         //height of tab image
    imageWidth: '316px',                         //width of tab image    
    tabLocation: 'bottom',                       //side of screen where tab lives, top, right, bottom, or left
    speed: 300,                                  //speed of animation
    action: 'click',                             //options: 'click' or 'hover', action to trigger animation

    fixedPosition: false                         //options: true makes it stick(fixed position) on scroll
  });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:00:02.547

将此添加到您的 .slide-out-div 类

```
margin-left: -138px; /* half of the width of the div */
left: 50%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:56:31.590

添加

```
left: 50%;
margin-left: -138px; /* half its width which you have set to be 276px */ 
```

to `.slide-out-div`（通过开发人员工具进行实时编辑时对我有用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:58:15.630

您必须在左侧添加一个位置`.slide-out-div`

```
<div class="slide-out-div"
    style="line-height: 1; position: fixed; bottom: -124px; width: 300px; left: 50%; margin-left: -150px; "> 
```

其中负边距是宽度的一半。

# javascript - Jquerymobile - 使用 javascript 创建选择菜单

> ID：12370189
> 
> 赞同：0
> 
> 时间：2012-09-11T12:53:12.420
> 
> 标签：javascript, jquery-mobile, select-menu

我正在尝试使用 jquerymobile 和 cordova 2.0.0 创建和 android 应用程序。我打算添加 localStorage 它将应用程序的设置保存到 android 存储。现在我正试图强制我的 jquerymobile 选择菜单显示当前保存的值。

示例：假设您有一个由 3 个项目（禁用、启用、兼容模式）组成的菜单（设置），您选择了兼容模式并保存设置。然后变量设置被存储并设置为兼容性。但是当您下次加载设置时，它看起来像菜单（设置）被设置为禁用，因为它是列表中的第一个选项。所以我希望我的程序在设置中显示当前选择和保存的选项。我已经通过使用 body onload 调用 load() 函数来尝试它，该函数将从存储的值中设置 selectedIndex 但它没有工作（可能是我的错误代码）。

所以我需要我的 javascript 来构建选择菜单并更改选项的顺序，但它不起作用。

这是我的 HTML 代码：

```
<div data-role="content" data-theme="c" id="content">
        <div data-role="fieldcontain" onLoad="load();">
            <label for="transitions" class="select">Prechody:</label>
                <select name="transitions" id="transitions">

                </select>
        </div>      
        <div data-role="fieldcontain">
            <label for="entriesNumber">Počet zobrazovaných príspevkov:</label>
            <input type="range" name="entriesNumber" id="entriesNumber" value="25" min="0" max="35"  />
        </div>
</div> 
```

这是javascript：

```
function load(){
var select = document.getElementById("transitions");
var option1 = document.createElement("option");
option1.setAttribute("value","vypnute");
option1.innerHTML("Vypnúť");
select.appendChild(option1);
var option2 = document.createElement("option");
option2.setAttribute("value","zapnute");
option2.innerHTML("Zapnúť");
select.appendChild(option2);
var option3 = document.createElement("option");
option3.setAttribute("value","kompatibilita");
option3.innerHTML("Zapnúť v režime kompatibility");
select.appendChild(option3);
} 
```

如果您知道如何使用 selectedIndex ( [http://www.w3schools.com/jsref/prop_select_selectedindex.asp](http://www.w3schools.com/jsref/prop_select_selectedindex.asp) ) 或任何其他更清晰的方式执行此操作，请在此处发布。如果没有，请尝试检查我的 JS 代码，以便它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:07:57.007

我想到了。只需要使用此代码：

```
document.getElementById("selection").selectedIndex = 2/*selected value*/; 
$("#selection").selectmenu('refresh'); 
```

此外，如果您使用的是 jquerymobile 滑块（范围），则可以使用此代码更新其值：

```
$('#slider').val(updatedValue).slider('refresh'); 
```

# zend-framework - Zend 导航渲染问题

> ID：12370192
> 
> 赞同：1
> 
> 时间：2012-09-11T12:53:17.737
> 
> 标签：zend-framework, zend-navigation, zend-acl

这是我的导航 XML 格式，系统中有 2 个用户级别，管理员和超级管理员，

以管理员身份登录时，应显示所有菜单项并且工作正常，对于超级管理员，仅应显示仪表板和统计信息。

我的问题是，对于超级管理员，以及仪表板和统计信息，其他菜单项的标签（那些应该只为管理员显示）正在显示，是否有任何解决方法来隐藏标签。就我而言，除了仪表板外，顶级菜单项没有任何操作。

菜单与 Zend ACL 连接

```
<configdata>

<nav>

    <dashboard>
        <label>Dashboard</label>
        <class>nav-top-item no-submenu</class>
        <controller>index</controller>
        <action>index</action>
        <resource>index</resource>
        <privilege>index</privilege>
    </dashboard>

    <app>
        <label>Apps</label>  
        <class>nav-top-item no-submenu</class>
        <uri>#</uri>

        <pages>
            <managefeaturedapps>
                <label>Manage Apps</label>                    
                <controller>app</controller>
                <action>index</action>
                <resource>app</resource>
                <privilege>index</privilege>
            </managefeaturedapps>             
            <managepage>
                <label>Filter Apps</label>                    
                <controller>app</controller>
                <action>filter-apps</action>
                <resource>app</resource>
                <privilege>filter-apps</privilege>
            </managepage>
         </pages> 
    </app>

    <user>
        <label>Users</label>  
        <class>nav-top-item no-submenu</class>
        <uri>#</uri>

        <pages>
            <allusers>
                <label>Registered Users / Developers</label>                    
                <controller>user</controller>
                <action>index</action>
                <resource>user</resource>
                <privilege>index</privilege>
            </allusers>
         </pages>
    </user>        

    <page>
        <label>Pages</label> 
        <class>nav-top-item no-submenu</class>
        <uri>#</uri>

        <pages>
            <addpage>
                <label>Add New Page</label>                    
                <controller>page</controller>
                <action>add-page</action>
                <resource>page</resource>
                <privilege>add-page</privilege>
            </addpage>         

         </pages> 
    </page>

    <statistics>
        <label>Statistics</label> 
        <class>nav-top-item no-submenu</class>
        <uri>#</uri>

        <pages>
            <viewstats>
                <label>Statistics</label>                    
                <controller>statistic</controller>
                <action>index</action>
                <resource>statistic</resource>
                <privilege>index</privilege>
            </viewstats>
         </pages>              
    </statistics>

</nav> 
```

ACL 代码

```
class XXX_Controller_Action_Helper_AclPbo {

public $acl;

//Instatntiate Zend ACL
public function __construct() 
{
    $this->acl = new Zend_Acl();
}

//Set User Rolse
public function setRoles() 
{
    $this->acl->addRole(new Zend_Acl_Role('superAdmin'));       
    $this->acl->addRole(new Zend_Acl_Role('admin'));
}

//Set Resources - controller, models, etc...
public function setResources() 
{
    $this->acl->add(new Zend_Acl_Resource('app'));
    $this->acl->add(new Zend_Acl_Resource('index'));
    $this->acl->add(new Zend_Acl_Resource('user'));     
    $this->acl->add(new Zend_Acl_Resource('page'));
    $this->acl->add(new Zend_Acl_Resource('statistic'));
}

//Set privileges
public function setPrivilages() 
{
    $this->acl->allow('superAdmin', 'user', array('login','logout'));
    $this->acl->allow('superAdmin', 'index', 'index');
    $this->acl->allow('superAdmin', 'app', 'index');   
    $this->acl->allow('superAdmin', 'statistic', array('index'));

    $this->acl->allow('admin', 'user', array('index','login','logout'));      
    $this->acl->allow('admin', 'index', 'index');
    $this->acl->allow('admin', 'app', array('index'));
    $this->acl->allow('admin', 'page', array('index', 'add-page', 'edit-page'));
    $this->acl->allow('admin', 'statistic', array('index'));
}

//Set ACL to registry - store ACL object in the registry
public function setAcl() 
{
    Zend_Registry::set('acl', $this->acl);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:39:38.337

您遇到这种行为的原因就在这里

```
<statistics>
    <label>Statistics</label>
    <class>nav-top-item no-submenu</class>
            <uri>#</uri> 
```

虽然你应该有

```
<statistics>
    <label>Statistics</label>
    <class>nav-top-item no-submenu</class>
    <controller>statistic</controller>
    <action>index</action>
    <resource>statistic</resource>
    <privilege>index</privilege> 
```

只要您不定义资源的访问参数，任何人都可以使用它。

# java - 如何在 Spring Webflow 中验证集合？

> ID：12370194
> 
> 赞同：0
> 
> 时间：2012-09-11T12:53:22.830
> 
> 标签：java, spring, validation, spring-webflow-2

我正在使用 Spring WebFlow

我需要检查我是否有至少 15 个类型的 Practices 集合，如果没有，我无法转换到下一个流程。

我的注册流程：

```
<view-state id="practices" view="RegisterPractices" model="labs">
        <transition on="add" to="createNewPractice"></transition>
        <transition on="next" to="items" validate="true"></transition>
        <transition on="back" validate="false" to="owners"></transition>
</view-state>
<subflow-state id="createNewPractice" subflow="addPractice">
        <output name="practica" />      
        <transition on="practiceAdded" to="practices">
            <evaluate expression="labs.addPractice(currentEvent.attributes.practice)"></evaluate>
        </transition>       
        <transition on="practiceCancel" to="practices"></transition>
</subflow-state> 
```

jsp实践：

```
<h2>Practices</h2>  
    <table class="standard-table" cellpadding="0" cellspacing="0">
        <thead>
            <tr>
                <th>Practice</th>
                <th>Operation</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <c:forEach items="${ labs.practices }" var="practice">
            <tr>
                <td>${ practice.practice}</td>
                <td><c:choose><c:when test="${ practice.realize == 1}">Realize</c:when><c:otherwise>Deriva</c:otherwise></c:choose></td>
            </tr>
            </c:forEach>
        </tbody>
    </table>
    <div>
        <a href="${flowExecutionUrl}&_eventId=add">Add a New Practice</a>
            <a href="${flowExecutionUrl}&_eventId=next">Back</a>
        <a href="${flowExecutionUrl}&_eventId=back">Next</a>
    </div> 
```

View-State 实践只是一个添加了实践列表的 jsp。

我尝试过使用 customValidator 但我无法处理 MessageBuilder.source() 因为我在该视图中没有任何对象。

我也尝试过决策状态，但我无法显示“您必须选择至少 15 种做法才能继续”这样的消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:20:28.063

所以这个自定义验证器不起作用？

```
@Component
public class LabsValidator {

    public void validatePractices(final Labs labs,final ValidationContext context) {
        if(labs.getPractices().size() < 15) {
            context.getMessageContext().addMessage(new MessageBuilder().error().code("labs.practices.min15").build());
        }
    }

} 
```

# php - PHP SOAP 错误 - “XML 字符串为空”

> ID：12370197
> 
> 赞同：0
> 
> 时间：2012-09-11T12:53:41.983
> 
> 标签：php, soap

我正在尝试使用 PHP SOAP 客户端进行 SOAP 调用（TravelGuard API），就像这样。

```
$arr = array('asdasdasd'=>array(
                'asdasd'=>array(
                        'asdasd'=>array(
                                'asdsad'=>'008573',
                                'asdasd'=>'114846',
                                'asdasd'=>'Quote',
                                'asasdasd'=>'1',
                                'asdasdas'=>'4000.00',
                        ),
                        'asdasd'=>array(
                                'asdas'=>array(
                                        'asdasd'=>'4000.00'
                                ),
                        ),
                        'asdasd'=>array(
                                'asdasd'=>'21-09-2012',
                                'asdasd'=>'10-10-2012',
                                'asdasd'=>'22-08-2012',
                        )
                )
        )
        );

        $options = array(
               'soap_version'=>SOAP_1_1, 
               'exceptions'=>true, 
               'trace'=>1,'encoding'=>'utf-8'
               );
        $this->client = new SoapClient($this->PDUrl, $options);

        //$xmlVar = new SoapVar($xml, XSD_ANYXML);

        $res = $this->client->getQuote(array('xmlString'=>$arr));
        var_dump($res);exit; 
```

这将返回带有代码`'101010'`和描述的错误`'XML String empty'`

支持团队建议我将 XML 部分包装在 CDATA 字符串中。我怎样才能做到这一点？

# hibernate - 限制 OneToMany 关系中的项目数量

> ID：12370198
> 
> 赞同：0
> 
> 时间：2012-09-11T12:53:46.380
> 
> 标签：hibernate, jpa, playframework, playframework-1.x

我正在使用游戏！框架，我想知道是否有一种简单的方法可以限制 OneToMany 关系中的项目数量。（Play! 框架使用 Hibernate）

我有一个模型，其中只允许添加 5 个孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:37:25.807

您应该只能使用`@Size(max=x)`注释。我知道它支持数组和集合，所以它应该适合你正在寻找的东西。

# c++ - 构造函数中的 C++ 类型特征导致错误

> ID：12370199
> 
> 赞同：3
> 
> 时间：2012-09-11T12:53:53.633
> 
> 标签：c++, sfinae, typetraits, enable-if

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我想要一个带有单个参数的构造函数，并且仅当该参数的类型`::t`具有必须是某个其他类型的子类型的成员类型时才启用。我为此使用类型特征，代码如下所示：

```
#include <type_traits>

struct Y{};

struct X{
    //Only allow if T has a type member T::t which is a subtype of Y
    template <typename T>
    X(T* t, std::enable_if<std::is_base_of<Y, typename T::t>::value, int>::type e = 0){}
}; 
```

但是，g++ 抱怨以下内容：

```
test/test.cpp:8:75: error: ‘std::enable_if<std::is_base_of<Y, typename T::t>::value, int>::type’ is not a type 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:56:50.000

您必须添加`typename`to`std::enable_if<...>::type`才能解决此问题...

# android - 找不到适用于 android 的出色分析库

> ID：12370205
> 
> 赞同：-3
> 
> 时间：2012-09-11T12:54:07.113
> 
> 标签：android, crash-reports, flurry, crittercism

我真的很喜欢使用 flurry 进行分析，但是 flurry 提供的崩溃报告非常丑陋且简短。所以我决定在崩溃报告中使用 crittercism。现在这些库占用了我 1.4 应用程序的 0.5 mb，所以我很难过；（

想知道是否有人可以在一个工具中为我提供所有建议（分析 + 崩溃报告），最好是指定发送数据的时间（分析 + 崩溃报告）。

如果该工具可以与我的服务器一起使用，那就太好了（即在我的私人服务器上发送数据，而不是第 3 方）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:00:25.427

Flurry 即将发布具有 Full Stack Trace 崩溃报告的 SDK 版本。（免责声明：我在 Flurry 的支持团队工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:08:11.847

Google Play 具有创建崩溃报告和应用统计信息的内置功能。如果 lib 的大小 / 不是 3-rd 方是您对 Flurry 不满意的原因，您为什么不使用这些功能？

您可以在 Google Play 开发者网页上找到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:12:50.813

除了 flurry 或 google play 报告之外，还有很多方法可以进行崩溃报告。

1.  [Acra](http://code.google.com/p/acra/)是一个库，使 Android 应用程序能够自动将其崩溃报告发布到 GoogleDoc 表单。它面向 android 应用程序开发人员，以帮助他们在应用程序崩溃或出现错误行为时从应用程序中获取数据。有关分步安装和使用指南，请参阅[BasicSetup 。](http://code.google.com/p/acra/wiki/BasicSetup)

2.  [HockeyApp](http://www.hockeyapp.net/)为测试版和已发布的应用程序提供可靠的崩溃报告。它类似于flury，但崩溃报告要漂亮得多。

总的来说，这些都非常好，我会推荐任何一个。

如果您想要更小的文件大小的 apk，请查看将[ProGuard](http://developer.android.com/tools/help/proguard.html)添加到您的构建例程中。[ProGuard](http://developer.android.com/tools/help/proguard.html)工具通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和混淆您的代码。结果是较小的 .apk 文件更难进行逆向工程。

# tridion - Tridion 2009 - 清除工具

> ID：12370209
> 
> 赞同：1
> 
> 时间：2012-09-11T12:54:21.857
> 
> 标签：tridion

从 Content Manager 服务器启动 Purge Tool 时，除了我得到一个 100% CPU 进程，它会立即杀死我的服务器，什么都没有发生，有什么建议吗？

这是我第一次执行这个工具，所以我不确定会发生什么；它会立即连接到数据库吗？- 如果是这样的话，我使用的 190 GB 数据库可能无济于事。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:40:45.657

我过去也看到过这种情况，您可以通过出版物或文件夹/结构组数量有限来尝试此操作。是的，清除工具立即使用数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:17:11.350

您应该会看到一个对话框 - 加载可能需要一段时间，但过去我认为这是一个权限问题。如果您使用的是 Windows 2008 服务器，请尝试右键单击该程序并使用“以管理员身份运行”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T18:54:26.533

清除工具首先尝试“使用”您的蓝图结构。它以一种非常麻烦的方式做到这一点，但是，它最终会到达那里。让它运行，它会到达那里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:44:57.070

清除工具不直接连接到数据库。它使用 Tridion API。（当然，然后 Tridion 会进入数据库。）

启动时，清除工具将加载您的所有出版物，然后为您显示。如果你有很多出版物，而且系统很慢，这可能需要一段时间。

如果存在权限问题，我希望它是 Tridion 权限之一，因此请确保您以 Tridion 管理员身份运行的帐户。

# objective-c - 使用 sortUsingComparator 对 NSMutableArray 中的对象进行排序

> ID：12370210
> 
> 赞同：14
> 
> 时间：2012-09-11T12:54:22.073
> 
> 标签：objective-c, nsmutablearray, compare

我有以下可变数组：

```
NSMutableArray *persons = [[NSMutableArray alloc]initWithObjects:person1, person2, person3, nil]; 
```

其中每个人都是一个对象，其中包含 (NSInteger) personAge 和 (NSString*) personName 属性。现在我想按 personAge 对这个数组进行排序。所以我尝试了以下方法：

```
[persons sortUsingComparator:
     ^NSComparisonResult(id obj1, id obj2)
     {
         Person *p1 = (Person*)obj1;
         Person *p2 = (Person*)obj2;

        return [p1.personAge compare: p2.personAge];

     }];

    NSLog(@"%ld", [persons componentsJoinedByString:@" "]); 
```

但是我在返回行中收到“错误的接收器类型'NSInteger'（又名'long'）”错误消息。此外，我在 NSLog 行中有一条警告：“格式指定类型为 'long'，但参数的类型为 'NSString *'”。我如何解决它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-11T13:01:37.813

你不应该改用这样的东西吗？

```
[persons sortUsingComparator:
      ^NSComparisonResult(id obj1, id obj2){

             Person *p1 = (Person*)obj1;
             Person *p2 = (Person*)obj2;
             if (p1.personAge > p2.personAge) {
                return (NSComparisonResult)NSOrderedDescending;
            }

            if (p1.personAge < p2.personAge) {
                return (NSComparisonResult)NSOrderedAscending;
            }
            return (NSComparisonResult)NSOrderedSame;
    }
]; 
```

问题是你依赖于`compare`不存在的方法`NSInteger`：它只是一个 typedef `int`。所以你想比较整数值并返回一个`NSComparisonResult`值来相应地表示你的对象的顺序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T13:02:34.230

您正在尝试调用不是对象的`compare:`；`NSInteger`它是整数类型的 typedef（`int`或者`long`取决于架构）。

此外，`componentsJoinedByString:`返回一个`NSString`，而不是一个整数。

尝试：

```
[persons sortUsingComparator:
    ^NSComparisonResult(id obj1, id obj2)
    {
        Person *p1 = (Person*)obj1;
        Person *p2 = (Person*)obj2;

        if (p1.personAge < p2.personAge)
            return NSOrderedAscending;
        if (p1.personAge > p2.personAge)
            return NSOrderedDescending;
        return NSOrderedSame;
 }];

NSLog(@"%@", [persons componentsJoinedByString:@" "]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:04:18.027

关于“错误的接收器类型...”错误，`NSInteger`是原始数据类型（不是 Objective-C 类），因此您不能在其上调用方法。您想要做的是以下内容：

```
if (p1.personAge > p2.personAge) {
    return (NSComparisonResult)NSOrderedDescending;
}

if (p1.personAge < p2.personAge) {
    return (NSComparisonResult)NSOrderedAscending;
}
return (NSComparisonResult)NSOrderedSame; 
```

警告是由于`@"%ld"`格式字符串很长（如警告所述），但`-componentsSeparatedByString:`返回一个`NSString`对象。任何 Objective-C 对象的正确格式字符串是`@"%@"`，所以该行应该是`NSLog(@"%@", [persons componentsJoinedByString:@" "]);`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:59:56.353

```
[YOURMutableArray sortUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-02T01:21:41.293

像 tigeguero 的回答，但更整洁：

```
 [people sortUsingComparator:
      ^NSComparisonResult(Person* p1, Person* p2){

            if (p1.personAge > p2.personAge) {
                return NSOrderedDescending;
            }
            else if (p1.personAge < p2.personAge) {
                return NSOrderedAscending;
            }
            else{
                return NSOrderedSame;
            } 
    }
 ]; 
```

# excel - 自动重组数据

> ID：12370211
> 
> 赞同：2
> 
> 时间：2012-09-11T12:54:24.840
> 
> 标签：excel, vba

我想以自动方式（通过使用宏）在我的 Excel 中对数据进行分组例如，在我的 A 列中，我有这样的字段：

*   在 A1 我有“1.0.1”，
*   在 A2“1.0.3”中，
*   在 A3 “1.0.5”中，
*   在 A4“1.1.1”中，
*   在 A5“1.1.2”中。

我想将这些数据分组为两组：1.0（包装 A1、A2 和 A3）和 1.1（包装 A4 和 A5）。

问题是数据可能会有所不同（例如，添加一个给定的 1.0.7，有必要在 1.0 中分组（包括））

因此，有必要读取 A 列的所有字段，并通过比较每个字段的前 3 个字符进行重新组合，从而对相同的内容进行分组。

有可能在 Visual Basic 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T13:25:18.710

```
sub regrouper()
  Worksheets.Add.Name="group1"
  Worksheets.Add.Name="group2"
  Dim g1Row As Integer
  Dim g2Row As Integer
  Dim splitter(0 to 4) As String

  g1Row = g2Row = 2

  For Each cell in Worksheets(1).Range("A1:A" & Range("A65536").End(xlup).Row)
    splitter = Split(cell.text, ".")
    If splitter(1) = 0 then
      Worksheets("group1").Range("A" & g1Row).Value = cell.Value
      g1Row = g1Row + 1
    ElseIf splitter(1) = 1 then
      Worksheets("group2").Range("A" & g2Row).Value = cell.Value
      g2Row = g2Row + 1
    Else
      MsgBox("data not in group 1 or 2")
    End If
  Next cell
End Sub 
```

未经测试，但应该让你更接近一点

# asp.net - ASP.NET 生命周期中的隐藏字段持久性

> ID：12370217
> 
> 赞同：3
> 
> 时间：2012-09-11T12:54:47.477
> 
> 标签：asp.net, events, client-server, page-lifecycle

我觉得我可能在这里忽略了页面生命周期的一个基本概念，并且一直（因为我无法找出正确的关键字或没有被问到）无法找到现有的答案，请原谅我有人问过这个。

基本上，我需要在客户端和服务器端之间保留一个可变对象。由于视图状态是加密/序列化的，并且会话状态只是服务器端的，我的解决方案是使用隐藏字段——很简单，对吧？好吧，这是我的问题......它似乎正在工作，但数据没有像我预期的那样传播。

### 我的期望是这样的：

1.  第一次加载页面。服务器端类识别隐藏字段为空，初始化容器类，将类序列化为 JSON 字符串并将该值写入隐藏字段。
    *   Page_Init：不可用。
    *   Page_Load：不可用。
    *   Page_LoadComplete：可用。
2.  服务器处理完成，对象现在可供客户端代码使用。
3.  隐藏字段中的对象被客户端代码改变。客户端代码然后触发回发到服务器（通过按钮）。
4.  服务器端处理开始...
    *   Page_Init：不可用。
    *   **Page_Load：可用，包括客户端更改。**
    *   Page_LoadComplete：可用，包括客户端更改。
5.  世界上一切都好，双彩虹在我的窗外闪耀，一只神奇的独角兽向我眨眼和点头。

### 我的观察是这样的：

1.  第一次加载页面。服务器端类识别隐藏字段为空，初始化容器类，将类序列化为 JSON 字符串并将该值写入隐藏字段。
    *   Page_Init：不可用。（正如预期的那样）
    *   Page_Load：不可用。（正如预期的那样）
    *   Page_LoadComplete：可用。（正如预期的那样）
2.  服务器处理完成，对象现在可供客户端代码使用。
3.  隐藏字段中的对象被客户端代码改变。客户端代码然后触发回发到服务器（通过按钮）。
4.  服务器端处理开始...
    *   Page_Init：不可用。（正如预期的那样）
    *   **Page_Load：可用，但不会随着客户端所做的更改而更新。（意外）。**
    *   Page_LoadComplete：可用，包括客户端更改。（正如预期的那样）
5.  一团乌云笼罩着我的小隔间，我开始思考我的笔记本电脑能否在二楼从阳台上掉下来的情况下幸存下来。

## 结论

由于几个原因，这让我有点困惑......首先是我以前从未使用过“LoadComplete”事件，并且似乎找不到任何示例表明它是必要的，甚至应该是那样做的。第二个是在引发加载完成时，其他依赖于客户端数据的事件已经被触发。

任何帮助/解释/建议；地狱，即使是批评也值得赞赏！

谢谢，杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T11:58:20.470

我正在回答这个问题，希望这有助于为其他人节省几个小时。经过多次尝试并最终成功，我了解到您可以在 OnInit 事件期间获取 HiddenField 值。给定一个 ID 为 hidValue 的 HiddenField，关键行是：

```
string strValue = Request.Form[hidValue.UniqueID].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:19:46.163

**说明**
您可以更新`HiddenField`javascript 中的值并将它们取回服务器。
如果您希望您的对象在 之后可用`Load`，则可以使用`LoadComplete`。
如果您希望此对象在加载时可供所有控件使用，则最早可以从输入中获取数据的方法是通过重载`PreLoad`并在那里创建对象。
你的逻辑没有问题。

**结论**
您的实现中存在一些错误。
现在让我们看一下代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:48:32.967

我在 ASP.NET 生命周期中扯了很多头发:-)。我会建议你：

*   绑定到控制事件
*   避免绑定或覆盖页面事件

在这种情况下，您应该`HiddenField`在页面/用户控件中声明一个 protected。所以你真的想绑定到[ValueChanged 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.valuechanged%28v=vs.100%29.aspx)，而忘记其余的。

# php - 贝宝和用户支付系统

> ID：12370218
> 
> 赞同：0
> 
> 时间：2012-09-11T12:54:48.007
> 
> 标签：php, paypal, e-commerce

我正在使用 PayPal Sandbox 玩一些电子商务的东西。到目前为止，这是应用程序的流程：

*   用户登录，服务器将 user_id 存储在数据库的会话中。用户登录后可以单击立即购买按钮。将他们带到贝宝，他们登录并付款，IPN 收到通知罚款:)

我现在唯一想做的就是扩展它，创建远离接收 users_id 的 IPN，这样我就可以在他们的数据库条目上设置一个标志。这可以在 PayPal 中完成吗？

我已经尝试了以下视图：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="hosted_button_id" value="--ID-FROM-PAYPAL--">
  <input type="hidden" name="user_id" value="<?php echo $user_id;?>">
  <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
  <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:10:06.153

```
<input type="hidden" name="custom" id="custom" value="<?php echo $user_id;?>"/> 
```

您的 IPN 将收到`$_POST['custom']`变量中的用户 ID。

如果您想将多个值传递给 Paypal 并返回给您的 IPN：

```
 <script type="text/javascript">
          // using prototype
      function checkCustom(){
        var custom1 = $F('custom1');
        var custom2 = $F('custom2');
        $('custom').value = '{"userID":"'+ custom1 +'","publicDonation":"'+ custom2 +'"}';

      }
    </script>
<input type="hidden" name="custom1" id="custom1" value="<?php echo $user_id;?>"/>
<input type="hidden" name="custom2" id="custom2" value="<?php echo $user_email;?>"/> 
```

欲了解更多信息，请查看贝宝 IPN：

> 风俗
> 
> 由您（商家）传递的自定义值。这些是永远不会呈现给您的客户的传递变量长度：255 个字符

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables#id091EAB0105Z](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables#id091EAB0105Z)

# iphone - 将sqlite数据库转换为csv格式？然后在 iPhone Objective C 中邮寄这个 csv 文件

> ID：12370219
> 
> 赞同：1
> 
> 时间：2012-09-11T12:54:50.203
> 
> 标签：iphone, objective-c, sqlite, csv

> **可能重复：**
> [如何在两台设备之间共享我使用 sqlite 数据库存储的所有数据，以通过转储到另一台设备来重用数据](https://stackoverflow.com/questions/12345690/how-to-share-all-the-data-i-have-stored-using-sqlite-database-between-two-device)

我想**导入一个 sqlite 数据库并将其保存为 CSV 文件**和**`then mail this file via email.`**

我可以以编程方式在 iphone 应用程序中将 sqlite 导入**为 csv**格式以附加到邮件编写器中吗

* * *

我使用以下功能来获取数据库文件

```
+(NSString*)getSqliteDBFile
{
      NSString *docsDirectoryPath;
      NSArray *dirPaths;
      NSString *databasePath;
      NSFileManager *fileManager = [NSFileManager defaultManager];

      // Get the documents directory
      dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

      docsDirectoryPath = [dirPaths objectAtIndex:0];
      NSLog(@"path :%@", docsDirectoryPath);

      // Build the path to the database file
      databasePath = [[NSString alloc] initWithString: [docsDirectoryPath stringByAppendingPathComponent: @"LeadGenDB.sqlite"]];
      NSLog(@"path :%@", databasePath);

      return databasePath;
} 
```

现在我需要将 sqlite 文件转换为 csv 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:17:29.393

您不能将 sqlite 直接转换为 csv。首先，您获取所有数据库数据并写入 csv 文件。使用下面的示例创建 csv 并发送它。

```
NSString *csvString =@"1,2 , 3 , 4, 5 ,6 , 7";

        for(int i=0;i<rangeData.count ;i++)
        {
            NSArray *temp = [di timeCalculation:[[rangeData objectAtIndex:i] objectForKey:@""] :[[rangeData objectAtIndex:i] objectForKey:@""]];

            NSString *strTemp =[NSString stringWithFormat:@"%@,%@,%@,%@,%@,%@,%@",

                                [NSString stringWithFormat:@"%@",[simpleDate stringFromDate:[[NSDate alloc]initWithTimeIntervalSince1970:[[[rangeData objectAtIndex:i] objectForKey:@""] floatValue]]]],
                                [NSString stringWithFormat:@"%@",[shrotDate stringFromDate:[[NSDate alloc]initWithTimeIntervalSince1970:[[[rangeData objectAtIndex:i] objectForKey:@""] floatValue]]]],
                                [NSString stringWithFormat:@"%@",[shrotDate stringFromDate:[[NSDate alloc]initWithTimeIntervalSince1970:[[[rangeData objectAtIndex:i] objectForKey:@""] floatValue]]]],
                                [NSString stringWithFormat:@"%@",[shrotDate stringFromDate:[[NSDate alloc]initWithTimeIntervalSince1970:[[[rangeData objectAtIndex:i] objectForKey:@""] floatValue]]]],
                                [NSString stringWithFormat:@"%@",[shrotDate stringFromDate:[[NSDate alloc]initWithTimeIntervalSince1970:[[[rangeData objectAtIndex:i] objectForKey:@""] floatValue]]]],

                                [NSString stringWithFormat:@"%@",[[temp objectAtIndex:0] stringByReplacingOccurrencesOfString:@": " withString:@""]] ,
                                [NSString stringWithFormat:@"%@",[[temp objectAtIndex:1] stringByReplacingOccurrencesOfString:@" : " withString:@""]]];
            csvString = [NSString stringWithFormat:@"%@ \n %@",csvString,strTemp];
        }

        //create instance of NSFileManager
        NSFileManager *fileManager = [NSFileManager defaultManager];

        //create an array and store result of our search for the documents directory in it
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

        //create NSString object, that holds our exact path to the documents directory
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSLog(@"Document Dir: %@",documentsDirectory);

        NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.csv", @"userdata"]]; //add our file to the path
        [fileManager createFileAtPath:fullPath contents:[csvString dataUsingEncoding:NSUTF8StringEncoding] attributes:nil];

        NSData *csvData =[NSData dataWithContentsOfFile:fullPath];
        MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
        controller.mailComposeDelegate = self;
        [controller setToRecipients:[NSArray arrayWithObject:@""]];
        [controller setSubject:@"CSV Export"];
        [controller setMessageBody:@"" isHTML:NO]; 
        [controller addAttachmentData:csvData mimeType:@"text/csv" fileName:@"userdata.csv"];
        [self presentModalViewController:controller animated:YES];
        [controller release]; 
```

# php - 为什么 PHP 的“trigger_error”返回 true？

> ID：12370221
> 
> 赞同：1
> 
> 时间：2012-09-11T12:54:54.590
> 
> 标签：php, exception, exception-handling, error-handling

我对自定义函数使用错误处理，并注意到所有三种用户错误类型（NOTICE、WARNING 和 ERROR）都返回*true*。

我使用**trigger_error**函数在处理错误时转义函数（例如插入无效数据）。我认为逃避该功能的最佳方法是使用：

```
return trigger_error('Error notice here'); 
```

问题是，错误返回*true*。尽管并非我的所有函数都在成功时返回*true*，但在我看来，将来可以使用它（因此，*false*表示错误）。

*这个函数返回true*有什么原因，还是我在退出无效函数时遵循了不好的做法？

我知道解决方案可能是：

```
trigger_error('Error notice here');
return false; 
```

但我认为会有更优雅的方法。如果没有，希望对最佳实践有一些见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T12:58:32.387

它返回`TRUE`是因为触发错误的操作成功。`FALSE`如果您为第二个参数指定了无效的错误类型，则可能是这样。

如果您想`TRUE`在一行中返回并触发错误（顺便说一句，这在我看来毫无意义），您可以这样做：

```
return !trigger_error('Error notice here'); 
```

顺便说一句，如果你触发了一个`E_USER_ERROR`我怀疑评估返回值的代码是否会到达，因为除非你注册了一个错误处理程序来捕获它，否则这个错误将是致命的。

如果要退出带有可以在代码中处理的错误消息的函数，则应使用[Exception](http://php.net/manual/en/language.exceptions.php)。尽管这些在程序功能的背景下是否有意义是值得商榷的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:42:11.600

您询问了比`trigger_error()`.

我建议更优雅的方法可能是抛出异常而不是触发错误。

# jquery - jquery ajax 发布到 mvc 3 动作不起作用

> ID：12370225
> 
> 赞同：0
> 
> 时间：2012-09-11T12:55:05.193
> 
> 标签：jquery, ajax, asp.net-mvc-3

我对用于处理来自支付网关的请求的控制器进行了操作。他们将请求正文中的 json 发送到我的服务器上执行此操作的 url。当他们发送数据时，此代码运行良好：

```
[ValidateInput(false)]
public ActionResult WebHookHandler()
{
    var json = new StreamReader(Request.InputStream).ReadToEnd();
    if (string.IsNullOrEmpty(json))
        return new HttpStatusCodeResult(400); // bad request

    ...

    // return ok status
    return new HttpStatusCodeResult(200); // ok
} 
```

问题是我想通过向它提交测试数据来测试这个动作，但我无法让它工作。我尝试的所有结果都会导致 400 响应，这意味着我发送的 json 没有在服务器端提取。我认为 MVC 3 试图变得太聪明，并且正在处理我以不允许从*Request.InputStream*属性中检索它的方式发送它的 json，因为该属性在任何 ajax 配置上始终为空我'我试过了。

我已经尝试了各种组合，例如对数据进行字符串化、将 processData 设置为 false、不同的 contentType，并且没有什么能让数据以允许我的服务器端代码从*Request.InputStream*中获取它的方式通过。

这是我的 javascript 的样子：

```
var data = $("#stripeJSON").val();

$.ajax({
    url: "http://localhost/PaymentStripe/WebHookHandler",
    type: "POST",
    data: data,
    processData: true,
    contentType: "application/json",
    success: function (data, textStatus, jqXHR) {
        $("#result").html("success");
    },
    error: function (jqXHR, textStatus, errorThrown) {
        $("#result").html("failed:<br/>" + textStatus + errorThrown);
    },
    complete: function (jqXHR, textStatus) {
    }
}); 
```

这是一些虚拟的 json 数据：

```
{
    "pending_webhooks": 1,
    "type": "invoice.payment_succeeded",
    "object": "event",
    "created": 1347318097,
    "livemode": false,
    "id": "evt_0LMvt7Q9vL1oFI",
    "data": {
        "object": {
            "currency": "usd",
            "ending_balance": null,
            "customer": "cus_0LMvSw8LEmOcJG",
            "discount": null,
            "id": "in_0LMvHGx1XutT7p",
            "object": "invoice",
            "amount_due": 0,
            "date": 1347318097,
            "total": 0,
            "subtotal": 0,
            "charge": null,
            "period_end": 1347318097,
            "next_payment_attempt": null,
            "livemode": false,
            "attempted": true,
            "period_start": 1347318097,
            "starting_balance": 0,
            "lines": {
                "subscriptions": [{
                    "quantity": 1,
                    "period": {
                        "end": 1349910097,
                        "start": 1347318097
                    },
                    "amount": 0,
                    "plan": {
                        "livemode": false,
                        "trial_period_days": null,
                        "amount": 0,
                        "object": "plan",
                        "name": "ZeroMonthly",
                        "id": "ZeroMonthly",
                        "interval_count": 1,
                        "currency": "usd",
                        "interval": "month"
                    }
                }],
                "prorations": [],
                "invoiceitems": []
            },
            "paid": true,
            "closed": true,
            "attempt_count": 0
        }
    }
} 
```

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T02:42:13.877

所以正如评论中提到的，这是通过修改这一行来解决的：

由此：

```
var data = $("#stripeJSON").val(); 
```

对此：

```
var data = JSON.parse(JSON.stringify($("#stripeJSON").val())); 
```

“stripeJSON”字段是表单上的一个文本区域，jquery 将其作为字符串文字而不是实际的 json 对象发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:57:13.520

我认为问题在于 URL 的发送...试试看[这里](https://stackoverflow.com/questions/9988634/ajax-call-into-mvc-controller-url-issue)。我遇到过同样的问题。

# coldfusion - ColdFusion 中的转置查询

> ID：12370227
> 
> 赞同：1
> 
> 时间：2012-09-11T12:55:25.347
> 
> 标签：coldfusion, coldfusion-9, cfquery

我有一个简单的 cfquery，它输出 3 列及其各自的数据。列是姓名、地址和年龄。

我想转置这组数据，使名称成为列，地址和年龄显示在每列下。

我知道我们可以使用 QueryAddColumn 或类似的东西来解决这个问题。有人可以帮我解决这个问题吗？

编辑：根据下面的评论，这是预期的输出：

```
Oct 2011          Nov 2011          Dec 2011          Jan 2012          Feb 2012
NumberofPeople    NumberofPeople    NumberofPeople    NumberofPeople    NumberofPeople
EmploymentRate    EmploymentRate    EmploymentRate    EmploymentRate    EmploymentRate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:58:42.833

I have included a sample data row at the top where you would put your cfquery statement.

```
<cfset firstQuery = queryNew("date,NumberofPeople,EmploymentRate")>
<cfset aRow = queryAddRow(firstQuery)>
<cfset querySetCell(firstQuery,"date","OCT_2011",aRow)>
<cfset querySetCell(firstQuery,"NumberofPeople","28",aRow)>
<cfset querySetCell(firstQuery,"EmploymentRate","50%",aRow)>

<cfset aRow = queryAddRow(firstQuery)>
<cfset querySetCell(firstQuery,"date","NOV_2011",aRow)>
<cfset querySetCell(firstQuery,"NumberofPeople","28",aRow)>
<cfset querySetCell(firstQuery,"EmploymentRate","56%",aRow)>

<cfset aRow = queryAddRow(firstQuery)>
<cfset querySetCell(firstQuery,"date","DEC_2011",aRow)>
<cfset querySetCell(firstQuery,"NumberofPeople","29",aRow)>
<cfset querySetCell(firstQuery,"EmploymentRate","55%",aRow)>

<cfset aRow = queryAddRow(firstQuery)>
<cfset querySetCell(firstQuery,"date","JAN_2012",aRow)>
<cfset querySetCell(firstQuery,"NumberofPeople","30",aRow)>
<cfset querySetCell(firstQuery,"EmploymentRate","52%",aRow)>

<!--- Will Create new query with names as column headers--->
<cfset newQuery = queryNew(valueList(firstQuery.date,','))> 

<!--- Will Create new query with names as column headers--->

<cfset people = queryAddRow(newQuery)>
<cfset rate = queryAddRow(newQuery)>

<cfloop query='firstQuery'>
    <!---Syntax for this function is: QuerySetCell(query, column_name, value [, row_number ]) --->
    <cfset querySetCell(newQuery,firstQuery.date,firstQuery.NumberofPeople,people)>
    <cfset querySetCell(newQuery,firstQuery.date,firstQuery.EmploymentRate,rate)>
</cfloop>

<cfdump var="#newQuery#">

<cfdump var="#ArrayToList(newQuery.getColumnNames())#"> 
```

This is How I would Do it, But I can't think of why I would do it. I'd be interested to hear your use case. Anyway, I hope this helps.

(P.S This is tested in CF9, so you should be able to copy and paste it to test for yourself.)

**EDIT -(Again):**

Forgot to mention, this can only work if the names your retrieveing from the DB are valid column names, so no spaces (In this example spaces in dates have been replaced by underscores)!

**>>>** New code snippet for the updated data structure, the function `valueList(firstQuery.date,',')` doesn't re-order your columns. The columns are re-ordered on output when dumping. I have used the function `ArrayToList(newQuery.getColumnNames())` to show that internally CF maintains the column order and you need only ask it nicely. You should be able to use all this information to nicely output your data how you need it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:23:09.980

也许我遗漏了一些东西，但似乎带有 ORDER BY 子句的简单 SQL 查询会起作用。像这样的东西：

```
<cfquery name="myquery" datasource="yourdatasourcename">
select name, address, age
from tablename
order by name
</cfquery> 
```

然后在您的 ColdFusion 输出页面中，您可以使用带有 group 属性的标签。像这样的东西：

```
<cfoutput query="myquery">
<p>name = #name#
    <cfoutput group="name">
    age = #age#
    address = #address#<br />
    </cfoutput>
</p>
</cfoutput> 
```

显然，您可以根据需要格式化输出。

编辑 -

如果您想显示如下：

```
Mary        Joe       Sam           Suzie

28          36        25             42

123 Maple   16 Oak    3723 Street   832 Busy St. 
```

也许是这样的（我没有测试过，只是头脑风暴）：

```
<cfoutput query="myquery" group="name">
<div style="float:left;">name = #name#
    <cfoutput>
    <p>
    age = #age#<br />
    address = #address#
    </p>
    </cfoutput>
</div>
</cfoutput> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T03:39:09.313

我认为您正在描述 SQL 中的数据透视查询。

# c++ - C ++将向量保存/加载到文件

> ID：12370229
> 
> 赞同：1
> 
> 时间：2012-09-11T12:55:28.677
> 
> 标签：c++, vector, save

我正在用 C++ 创建一个日历应用程序。

这是我的代码：

```
class appointment
{
public:
    appointment(string aDate, string aTime, string aType,
    string aLocation, string aComments, bool aIsImportant,
    string aReminderDate, string aReminderTime)
    {
        appDate = aDate;
        appTime = aTime;
        appType = aType;
        appLocation = aLocation;
        appComments = aComments;
        appIsImportant = aIsImportant;
        appReminderDate = aReminderDate;
        appReminderTime = aReminderTime;
    }
    void setDate(string aDate)
    {
        appDate = aDate;
    }
    void setTime(string aTime)
    {
        appTime = aTime;
    }
    void setType(string aType)
    {
        appType = aType;
    }
    void setLocation(string aLocation)
    {
        appLocation = aLocation;
            }
    void setComments(string aComments)
    {
        appComments = aComments;
    }
    void setIsImportant(bool aIsImportant)
    {
        appIsImportant = aIsImportant;
    }
    void setReminderDate(string aReminderDate)
    {
        appReminderDate = aReminderDate;
    }
    void setReminderTime(string aReminderTime)
    {
        appReminderTime = aReminderTime;
    }
    string getDate()
    {
        return appDate;
    }
    string getTime()
    {
        return appTime;
    }
    string getType()
    {
        return appType;
    }
    string getLocation()
    {
        return appLocation;
    }
    string getComments()
    {
        return appComments;
    }
    bool getIsImportant()
    {
        return appIsImportant;
    }
    string getReminderDate()
    {
        return appReminderDate;
    }
    string getReminderTime()
    {
        return appReminderTime;
    }
private:
    appointment();
    string appDate;
    string appTime;
    string appType;
    string appLocation;
    string appComments;
    bool appIsImportant;
    string appReminderDate;
    string appReminderTime;
    //person owner;
};

class calendar
{
public:
    calendar()
    {
        loadFromFile();
    }
    ~calendar()
    {
        saveToFile();
    }
    void createAppointment(string aDate, string aTime, string aType,
    string aLocation, string aComments, bool aIsImportant,
    string aReminderDate, string aReminderTime)
    {
        appointment newAppointment(string aDate, string aTime, string aType,
        string aLocation, string aComments, bool aIsImportant,
        string aReminderDate, string aReminderTime);
        //appointments.resize(appointments.size() + 1,newAppointment);
    }
private:
    vector<appointment> appointments;
    string calCurrentDate;
    string calCurrentTime;
    void loadFromFile()
    {
        //Code to load appointments from file
    }
    void saveToFile()
    {
        //Code to save appointments to file
    }
}; 
```

我可以在以下方面提供一些帮助吗？

调用构造函数时，我想加载约会对象的文件（loadFromFile() 方法）并将“约会”变量设置为具有该文件的内容。在 saveToFile() 方法之后，我想将约会向量的内容保存到文件中。

另外，当调用 createAppointment() 方法时，我想将向量的大小增加 1，并将内容添加到向量中。我不确定正确的代码。

**从文件更新保存/加载**

```
 void loadFromFile()
    {
        ifstream iStream("file.ext", ios::binary);
        fileHeader_t fHeader;
        iStream.read((char*)&fHeader, sizeof(fileHeader_t));
        if (fHeader.magicNumber = 0xDEADBEAF)
        {
            appointments.resize(fHeader.appointmentCount); iStream.read((char*)&appointments[0], fHeader.appointmentCount * sizeof(appointment));
        }
    }
    void saveToFile()
    {
        ofstream oStream("file.ext", ios::binary);
        fileHeader_t fHeader;
        fHeader.magicNumber = 0xDEADBEAF;
        fHeader.appointmentCount = appointments.size();
        oStream.write((char*)&fHeader, sizeof(fileHeader_t));
        oStream.write((char*)&appointments[0], sizeof(appointment) * appointments.size());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:06:15.567

向量应该是连续的，所以使用 ifstream 加载它们应该没有任何问题，如果我是你，我会为你的二进制文件创建一个基本的头文件，例如：

```
struct fileHeader_s
{
    DWORD magicNumber;
    size_t appointmentsCount;
}fileHeader_t; 
```

然后，在一个循环中，只需读取约会值中的每个项目，并使用约会.push_back(item); 您应该在 createAppointment 中执行相同的操作，不要调整向量的大小，只需执行 push_back(newAppointment);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:56:46.503

您将不得不提出自己的文件格式（即手动将每条记录保存在一行上），或者使用类似[Boost::serialization](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/tutorial.html)的东西。

# c# - 创建结构变量 C#

> ID：12370230
> 
> 赞同：1
> 
> 时间：2012-09-11T12:55:29.450
> 
> 标签：c#

我是一个初学者，正在阅读书中有些难以理解的示例。我正在阅读这本书并编译代码以了解它的作用。我在结构的一部分，特别是结构变量。以下代码有错误`point does not take two arguments`。有人可以帮我找出这里缺少/不正确的地方吗？谢谢。

```
 using System;

    class Program
    {
        static void Main(string[] args)
        {

            // Create an initial Point.
            Point myPoint;
Point p1 = new Point(10, 10);
            myPoint.X = 349;
            myPoint.Y = 76;
            myPoint.Display();
            // Adjust the X and Y values.
            myPoint.Increment();
            myPoint.Display();
            Console.ReadLine();
        }
        // Assigning two intrinsic value types results in
        // two independent variables on the stack.
        static void ValueTypeAssignment()
        {
            Console.WriteLine("Assigning value types\n");
            Point p1 = new Point(10, 10);
            Point p2 = p1;
            // Print both points.
            p1.Display();
            p2.Display();
            // Change p1.X and print again. p2.X is not changed.
            p1.X = 100;
            Console.WriteLine("\n=> Changed p1.X\n");
            p1.Display();
            p2.Display();
        }
    }

    struct Point
    {
        // Fields of the structure.
        public int X;
        public int Y;
        // Add 1 to the (X, Y) position.
        public void Increment()
        {
            X++; Y++;
        }
        // Subtract 1 from the (X, Y) position.
        public void Decrement()
        {
            X--; Y--;
        }
        // Display the current position.
        public void Display()
        {
            Console.WriteLine("X = {0}, Y = {1}", X, Y);
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T12:57:28.827

您需要向 中添加一个双参数构造函数`Point`，因为您使用参数调用它`(10, 10`）。

```
struct Point
{
    // Fields of the structure.
    public int X;
    public int Y;

    public Point(int x, int y)
    {
        X = x;
        Y = y;
    } 
```

或者，您可以使用内置的 nullary（无参数）构造函数构造它，然后设置属性：

```
Point myPoint = new Point();
myPoint.X = 349;
myPoint.Y = 76; 
```

一个简写是：

```
Point myPoint = new Point { X = 349, Y = 76 }; 
```

甚至更短：

```
var myPoint = new Point { X = 349, Y = 76 }; 
```

最后，使结构不可变通常是一种好习惯：一旦构建，就不可能修改它们的内容。这有助于避免语言中的许多其他陷阱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T12:58:46.613

不要使用带有两个参数的构造函数来构造点，而是将属性实例化为同一调用的一部分。例如：

```
Point p = new Point { X = 1, Y = 2 }; 
```

您无需编写额外代码即可获得单行构造的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:04:30.967

您没有定义了两个参数的构造函数。你的点结构应该是这样的才有效

```
public Point(int x, int y)
{
    X = x;
    Y = y;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:00:01.960

您缺少 Point 结构的构造函数：

```
public Point(int x, int y)
{
    X = x;
    Y = y;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T12:58:09.220

您在 Point 上没有带有两个参数的构造函数。

你需要：

```
public Point(int x, int y){ // assign these to your properties. } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T13:02:09.727

您不必在main中初始化点吗？

```
 Point myPoint = new Point(); 
```

# php - 在 $.ajax() 函数中访问两个不同的数组

> ID：12370236
> 
> 赞同：3
> 
> 时间：2012-09-11T12:56:01.010
> 
> 标签：php, javascript, jquery, ajax

我有这两页。一个回显 JSON 编码数组，另一个使用 JQuery $.ajax 语法来访问它。代码看起来像这样：

第 1 页

```
$array = blah blah
echo json_encode($array); 
```

第2页

```
function load(){
  $.ajax({                                      
    url: 'json_array_file.php',                                                                   
    data: 'value=<?php echo $_GET["session"]; ?>',       
    dataType: 'json',                                                                       
    success: function(data) {                                                       
        var idCurrent = data[0];                                                    
        var idVideo = data[1];
        var idSession = data[2];
        var state = data[4];
        //do stuff with variables
    }
  });
} 
```

所以我遇到的麻烦是我现在需要从第一页访问两个数组，但我不确定在第二页的 $.ajax 函数中访问第二个数组的语法是什么。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:59:33.977

在 PHP 方面：

```
<?php
   $arr1 = array(1, 2, 3, 4);
   $arr2 = array(5, 6, 7, 8);

   echo json_encode(array('arr1' => $arr1, 'arr2' => $arr2));
?> 
```

在 jQuery 方面：

```
/* ... stuff ... */
success: function(data) {
    var fromArray1 = data.arr1[0];
    var fromArray2 = data.arr2[0];
    /* etc. */
}
/* ... other stuff ... */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:59:07.753

也许返回一个多维数组会有所帮助。

# class - 案例类复制“方法”与超类

> ID：12370244
> 
> 赞同：33
> 
> 时间：2012-09-11T12:56:19.160
> 
> 标签：class, scala, inheritance, enumeration

我想做这样的事情：

```
sealed abstract class Base(val myparam:String)

case class Foo(override val myparam:String) extends Base(myparam)
case class Bar(override val myparam:String) extends Base(myparam)

def getIt( a:Base ) = a.copy(myparam="changed") 
```

我不能，因为在 getIt 的上下文中，我没有告诉编译器每个 Base 都有一个“复制”方法，但复制也不是真正的方法，所以我认为没有特征或抽象方法我可以放入 Base 以使其正常工作。或者，有吗？

如果我尝试将 Base 定义为`abstract class Base{ def copy(myparam:String):Base }`，则会`case class Foo(myparam:String) extends Base`导致`class Foo needs to be abstract, since method copy in class Base of type (myparam: String)Base is not defined`

是否有其他方法可以告诉编译器所有`Base`类在其实现中都是案例类？某些特征意味着“具有案例类的属性”？

我可以使 Base 成为一个案例类，但随后我收到编译器警告，说不推荐使用从案例类继承？

我知道我还可以：

```
def getIt(f:Base)={ 
  (f.getClass.getConstructors.head).newInstance("yeah").asInstanceOf[Base]
} 
```

但是……这看起来很丑陋。

想法？我的整个方法只是“错误”吗？

**更新**我更改了基类以包含该属性，并使案例类使用“覆盖”关键字。考虑到 Edmondo1984 的响应，这更好地反映了实际问题，并使问题更加现实。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-19T10:11:18.090

**This is old answer, before the question was changed.**

Strongly typed programming languages prevent what you are trying to do. Let's see why.

The idea of a method with the following signature:

```
def getIt( a:Base ) : Unit 
```

Is that the body of the method will be able to access a properties visible through Base class or interface, i.e. the properties and methods defined only on the Base class/interface or its parents. During code execution, each specific instance passed to the `getIt` method might have a different subclass but the compile type of `a` will always be `Base`

One can reason in this way:

> Ok I have a class Base, I inherit it in two case classes and I add a property with the same name, and then I try to access the property on the instance of Base.

A simple example shows why this is unsafe:

```
sealed abstract class Base
case class Foo(myparam:String) extends Base
case class Bar(myparam:String) extends Base
case class Evil(myEvilParam:String) extends Base

def getIt( a:Base ) = a.copy(myparam="changed") 
```

In the following case, if the compiler didn't throw an error at compile time, it means the code would try to access a property that does not exist at runtime. This is not possible in strictly typed programming languages: you have traded restrictions on the code you can write for a much stronger verification of your code by the compiler, knowing that this reduces dramatically the number of bugs your code can contain

* * *

**This is the new answer. It is a little long because few points are needed before getting to the conclusion**

Unluckily, you can't rely on the mechanism of case classes **copy** to implement what you propose. The way the copy method works is simply a copy constructor which you can implement yourself in a non-case class. Let's create a case class and disassemble it in the REPL:

```
scala>  case class MyClass(name:String, surname:String, myJob:String)
defined class MyClass

scala>  :javap MyClass
Compiled from "<console>"
public class MyClass extends java.lang.Object implements scala.ScalaObject,scala.Product,scala.Serializable{
    public scala.collection.Iterator productIterator();
    public scala.collection.Iterator productElements();
    public java.lang.String name();
    public java.lang.String surname();
    public java.lang.String myJob();
    public MyClass copy(java.lang.String, java.lang.String, java.lang.String);
    public java.lang.String copy$default$3();
    public java.lang.String copy$default$2();
    public java.lang.String copy$default$1();
    public int hashCode();
    public java.lang.String toString();
    public boolean equals(java.lang.Object);
    public java.lang.String productPrefix();
    public int productArity();
    public java.lang.Object productElement(int);
    public boolean canEqual(java.lang.Object);
    public MyClass(java.lang.String, java.lang.String, java.lang.String);
} 
```

In Scala, the copy method takes three parameter and can eventually use the one from the current instance for the one you haven't specified ( the Scala language provides among its features default values for parameters in method calls)

Let's go down in our analysis and take again the code as updated:

```
sealed abstract class Base(val myparam:String)

case class Foo(override val myparam:String) extends Base(myparam)
case class Bar(override val myparam:String) extends Base(myparam)

def getIt( a:Base ) = a.copy(myparam="changed") 
```

Now in order to make this compile, we would need to use in the signature of `getIt(a:MyType)` a `MyType` that respect the following contract:

> Anything that has a parameter myparam and maybe other parameters which have default value

All these methods would be suitable:

```
 def copy(myParam:String) = null
  def copy(myParam:String, myParam2:String="hello") = null
  def copy(myParam:String,myParam2:Option[Option[Option[Double]]]=None) = null 
```

There is no way to express this contract in Scala, however there are advanced techniques that can be helpful.

The first observation that we can do is that there is a strict relation between `case classes` and `tuples` in Scala. In fact case classes are somehow tuples with additional behaviour and named properties.

The second observation is that, since the number of properties of your classes hierarchy is not guaranteed to be the same, the **copy** method *signature* is not guaranteed to be the same.

In practice, supposing `AnyTuple[Int]` describes any `Tuple` of any size where the first value is of type Int, we are looking to do something like that:

```
def copyTupleChangingFirstElement(myParam:AnyTuple[Int], newValue:Int) = myParam.copy(_1=newValue) 
```

This would not be to difficult if all the elements were `Int`. A tuple with all element of the same type is a `List`, and we know how to replace the first element of a `List`. We would need to convert any `TupleX` to `List`, replace the first element, and convert the `List` back to `TupleX`. Yes we will need to write all the converters for all the values that `X` might assume. Annoying but not difficult.

In our case though, not all the elements are `Int`. We want to treat `Tuple` where the elements are of different type as if they were all the same if the first element is an Int. This is called

> "Abstracting over arity"

i.e. treating tuples of different size in a generic way, independently of their size. To do it, we need to convert them into a special list which supports heterogenous types, named `HList`

* * *

**Conclusion**

Case classes inheritance is deprecated for very good reason, as you can find out from multiple posts in the mailing list: [http://www.scala-lang.org/node/3289](http://www.scala-lang.org/node/3289)

You have two strategies to deal with your problem:

1.  If you have a limited number of fields you require to change, use an approach such as the one suggested by @Ron, which is having a copy method. If you want to do it without losing type information, I would go for generifying the base class

    ```
    sealed abstract class Base[T](val param:String){
      def copy(param:String):T
    }

    class Foo(param:String) extends Base[Foo](param){
      def copy(param: String) = new Foo(param)
    }

    def getIt[T](a:Base[T]) : T = a.copy("hello")

    scala>  new Foo("Pippo")
    res0: Foo = Foo@4ab8fba5

    scala>  getIt(res0)
    res1: Foo = Foo@5b927504

    scala>  res1.param
    res2: String = hello 
    ```

2.  If you really want to abstract over arity, a solution is to use a library developed by Miles Sabin called Shapeless. There is a question here which has been asked after a discussion : [Are HLists nothing more than a convoluted way of writing tuples?](https://stackoverflow.com/questions/11825129/are-hlists-nothing-more-than-a-convoluted-way-of-writing-tuples) but I tell you this is going to give you some headache

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-20T21:19:17.433

**TL;DR：**我设法在 Base 上声明了 copy 方法，同时仍然让编译器在派生的案例类中自动生成其实现。这涉及到一个小技巧（实际上我自己只是重新设计了类型层次结构），但至少它表明您确实可以在不编写任何派生案例类中的样板代码的情况下使其工作。

首先，正如 ron 和 Edmondo1984 已经提到的，如果你的案例类有不同的字段，你会遇到麻烦。

不过，我将严格遵循您的示例，并假设您所有的案例类都具有相同的字段（查看您的 github 链接，这似乎也是您的实际代码的情况）。

鉴于您的所有案例类都具有相同的字段，自动生成的`copy`方法将具有相同的签名，这是一个好的开始。`Base`就像你所做的那样， 在 中添加通用定义似乎是合理的：`abstract class Base{ def copy(myparam: String):Base }` 现在的问题是 scala 不会生成`copy`方法，因为基类中已经有一个。

事实证明，还有另一种方法可以静态确保`Base`具有正确的`copy`方法，它是通过结构类型和自类型注释：

```
type Copyable = { def copy(myParam: String): Base }
sealed abstract class Base(val myParam: String) { this : Copyable => } 
```

与我们之前的尝试不同，这不会阻止 scala 自动生成`copy`方法。最后一个问题：self-type 注释确保子类`Base`有一个`copy`方法，但它没有使它公开可用`Base`：

```
val foo: Base = Foo("hello")
foo.copy()
scala> error: value copy is not a member of Base 
```

为了解决这个问题，我们可以添加一个从 Base 到 Copyable 的隐式转换。一个简单的演员就可以了，因为 Base 保证是可复制的：

```
implicit def toCopyable( base: Base ): Base with Copyable = base.asInstanceOf[Base with Copyable] 
```

总结一下，这给了我们：

```
object Base {
  type Copyable = { def copy(myParam: String): Base }
  implicit def toCopyable( base: Base ): Base with Copyable = base.asInstanceOf[Base with Copyable]
}
sealed abstract class Base(val myParam: String) { this : Base. Copyable => }

case class Foo(override val myParam: String) extends Base( myParam )
case class Bar(override val myParam: String) extends Base( myParam )

def getIt( a:Base ) = a.copy(myParam="changed") 
```

额外效果：如果我们尝试用不同的签名定义一个案例类，我们会得到一个编译错误：

```
case class Baz(override val myParam: String, truc: Int) extends Base( myParam ) 
scala> error: illegal inheritance; self-type Baz does not conform to Base's selftype Base with Base.Copyable 
```

最后，一个警告：您可能应该只修改您的设计以避免不得不诉诸上述技巧。在您的情况下，ron 建议使用带有附加`etype`字段的单个案例类似乎非常合理。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-11T13:13:30.267

如果这两个案例类别会随着时间的推移而分道扬镳，以至于它们具有不同的字段，那么共享`copy`方法将不再有效。

最好定义一个 abstract `def withMyParam(newParam: X): Base`。更好的是，您可以引入抽象类型以在返回时保留案例类类型：

```
scala> trait T {
     |   type Sub <: T
     |   def myParam: String
     |   def withMyParam(newParam: String): Sub
     | }
defined trait T

scala> case class Foo(myParam: String) extends T {
     |   type Sub = Foo
     |   override def withMyParam(newParam: String) = this.copy(myParam = newParam)
     | }
defined class Foo

scala>

scala> case class Bar(myParam: String) extends T {
     |   type Sub = Bar
     |   override def withMyParam(newParam: String) = this.copy(myParam = newParam)
     | }
defined class Bar

scala> Bar("hello").withMyParam("dolly")
res0: Bar = Bar(dolly) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-25T06:51:35.457

我认为这就是扩展方法的用途。为复制方法本身选择实施策略。

我喜欢这里的问题是在一个地方解决的。

有趣的是，为什么没有 caseness 的特征：它不会过多说明如何调用 copy，只是它总是可以在没有 args 的情况下调用，`copy()`.

```
sealed trait Base { def p1: String }

case class Foo(val p1: String) extends Base
case class Bar(val p1: String, p2: String) extends Base
case class Rab(val p2: String, p1: String) extends Base
case class Baz(val p1: String)(val p3: String = p1.reverse) extends Base

object CopyCase extends App {

  implicit class Copy(val b: Base) extends AnyVal {
    def copy(p1: String): Base = b match {
      case foo: Foo => foo.copy(p1 = p1)
      case bar: Bar => bar.copy(p1 = p1)
      case rab: Rab => rab.copy(p1 = p1)
      case baz: Baz => baz.copy(p1 = p1)(p1.reverse)
    }
    //def copy(p1: String): Base = reflect invoke
    //def copy(p1: String): Base = macro xcopy
  }

  val f = Foo("param1")
  val g = f.copy(p1="param2") // normal
  val h: Base = Bar("A", "B")
  val j = h.copy("basic")     // enhanced
  println(List(f,g,h,j) mkString ", ")

  val bs = List(Foo("param1"), Bar("A","B"), Rab("A","B"), Baz("param3")())
  val vs = bs map (b => b copy (p1 = b.p1 * 2))
  println(vs)
} 
```

只是为了好玩，反思性的副本：

```
 // finger exercise in the api
  def copy(p1: String): Base = {
    import scala.reflect.runtime.{ currentMirror => cm }
    import scala.reflect.runtime.universe._
    val im = cm.reflect(b)
    val ts = im.symbol.typeSignature
    val copySym = ts.member(newTermName("copy")).asMethod
    def element(p: Symbol): Any = (im reflectMethod ts.member(p.name).asMethod)()
    val args = for (ps <- copySym.params; p <- ps) yield {
      if (p.name.toString == "p1") p1 else element(p)
    }
    (im reflectMethod copySym)(args: _*).asInstanceOf[Base]
  } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T18:56:38.610

这对我来说很好：

```
sealed abstract class Base { def copy(myparam: String): Base }

case class Foo(myparam:String) extends Base {
  override def copy(x: String = myparam) = Foo(x)
}

def copyBase(x: Base) = x.copy("changed")

copyBase(Foo("abc")) //Foo(changed) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-08T18:21:20.683

[在http://www.cakesolutions.net/teamblogs/copying-sealed-trait-instances-a-journey-through-generic-programming-and-shapeless](http://www.cakesolutions.net/teamblogs/copying-sealed-trait-instances-a-journey-through-generic-programming-and-shapeless)有一个关于如何使用 shapeless 的非常全面的解释；如果链接断开，该方法使用 shapeless 中的 copySyntax 实用程序，这应该足以找到更多详细信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-22T21:58:45.627

这是一个老问题，有一个老解决方案，

[https://code.google.com/p/scala-scales/wiki/VirtualConstructorPreSIP](https://code.google.com/p/scala-scales/wiki/VirtualConstructorPreSIP)

在案例类复制方法存在之前制作。

所以关于这个问题，每个案例类无论如何都必须是一个叶节点，所以定义副本和一个 MyType / thisType 加上 newThis 函数，你就设置好了，每个案例类都固定类型。如果您想扩大 tree/newThis 功能并使用默认参数，您必须更改名称。

顺便说一句 - 在实现这个之前，我一直在等待编译器插件的魔法得到改进，但类型宏可能是魔法汁。在列表中搜索 Kevin 的 AutoProxy，以更详细地解释为什么我的代码从未去任何地方

# mysql - 从睡眠状态恢复应用程序会导致“通信链路故障”

> ID：12370246
> 
> 赞同：0
> 
> 时间：2012-09-11T12:56:22.203
> 
> 标签：mysql, timeout, connection-pooling, cloudbees

我配置了一个运行良好的 CloudBees Run@cloud 实例，但是在一段时间不活动后它被停用，然后似乎连接池没有正确刷新。

当我返回该站点时，前几个请求超时：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 4,746,680 milliseconds ago.  The last packet sent successfully to the server was 0 milliseconds ago.
    sun.reflect.GeneratedConstructorAccessor86.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:407)
    com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3092)
    com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2978)
    com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3526)
    com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1989)
    com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2150)
    com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2620)
    com.mysql.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:5022)
    org.apache.tomcat.dbcp.dbcp.DelegatingConnection.setAutoCommit(DelegatingConnection.java:371)
    org.apache.tomcat.dbcp.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.setAutoCommit(PoolingDataSource.java:328)
    org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:87)
    org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473) 
```

我使用 cloudbees-web.xml 文件中配置的数据源通过 JNDI 进行连接，如下所示：

```
 <resource name="jdbc/myapp" auth="Container" type="javax.sql.DataSource">
        <param name="username" value="myuser" />
        <param name="password" value="mypass" />
        <param name="url" value="jdbc:cloudbees://myurl />
    </resource> 
```

是否缺少一些配置，或者这是服务器中连接池配置的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:56:56.383

*[来自CloudBees Wiki 上的[数据库指南]](http://wiki.cloudbees.com/bin/view/RUN/DatabaseGuide)*

MySQL 包含一个超时，它将关闭长时间空闲的连接。为了提高数据库性能，CloudBees 数据源使用 Apache DBCP 连接池在应用程序关闭 JDBC 连接后重用它们。

如果您使用的连接在池中空闲时间过长，您的应用程序可能会遇到以下错误：“从服务器成功接收的最后一个数据包是 XXX 秒前”。

连接池包括一个设置，当调用 javax.sql.DataSource.getConnection() 时将验证并丢弃死连接。要使用此设置，请将以下 XML 参数添加到 cloudbees-web.xml 中的 DataSource 定义。

```
<param name="validationQuery" value="SELECT 1" />
<param name="testOnBorrow" value="true" /> 
```

因此，对于您的资源，您应该能够执行以下操作：

```
<resource name="jdbc/myapp" auth="Container" type="javax.sql.DataSource">
    <param name="username" value="myuser" />
    <param name="password" value="mypass" />
    <param name="url" value="jdbc:cloudbees://myurl />
    <param name="validationQuery" value="SELECT 1" />
    <param name="testOnBorrow" value="true" />
</resource> 
```

如果您使用 bees app:bind 命令而不是 cloudbees-web.xml 来注入数据源，则可以使用这些参数作为命令的参数

```
bees app:bind -a APP_ID -db DB_NAME -as JNDI_ALIAS validationQuery="SELECT 1" testOnBorrow=true 
```

# lua - lua lxp 找不到指定的模块

> ID：12370247
> 
> 赞同：1
> 
> 时间：2012-09-11T12:56:24.463
> 
> 标签：lua

我正在整理一个使用月球肥皂的应用程序，但是当您运行它时会报告以下错误：

> C:\Lua\5.1\lua.exe：从文件“C:\Lua\5.1\clibs\lxp.dll”加载模块“lxp”时出错：找不到指定的模块。

我该如何解决 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T23:10:02.507

这不是“找不到文件”错误。请注意，该消息表明它试图从文件（'C:\Lua\5.1\clibs\lxp.dll'）加载模块“lxp”，但它没有工作。也许该文件没有 luaopen_lxp C 函数（可能由 loadlib 调用）...或者您没有使用 require 加载它...

# jsf - 通过 CSS 覆盖在 JBoss 7 中自定义 Richfaces 皮肤

> ID：12370250
> 
> 赞同：1
> 
> 时间：2012-09-11T12:56:31.547
> 
> 标签：jsf, richfaces, jboss7.x

在我的 Richfaces 4.2.0 应用程序中，所有页面都使用相同的模板：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>MY APPLICATION</title>
    <link href="/myapp/resources/css/stylesheet.css" rel="stylesheet" type="text/css"/>
</h:head>

<h:body class="form" >
    <div id="page">
          .....
    </div>
</h:body> 
```

文件 stylesheet.css 用于定义一些全局样式以及覆盖一些richfaces 类。我的应用程序也使用了自动换肤（*org.richfaces.enableControlSkinning = true*）：简而言之，stylesheet.css 旨在覆盖 RF 生成的所有内容，这些内容看起来并不符合预期。

在 JBoss 6 下一切正常，因为 RF 样式（ECSS）是在 stylesheet.css 之前导入的，因此被覆盖了。在 JBoss 7 (EAP 6) 下正好相反，所以 stylesheet.css 根本没有效果。

你知道我是否（以及如何:)）我可以影响这种行为吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:22:11.117

在对 Web 进行一些研究之后，我发现一个好的做法应该是将自定义 css（使用**h:outputStylesheet**）放在页面的末尾（或者更好的模板）。这样，它们将在生成的 HTML 的头部部分的末尾导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:59:49.457

我发现可靠工作的唯一方法是[**`!important`**](http://www.electrictoolbox.com/using-important-css/)在每个覆盖的 RichFaces 规则后面添加一个。但这是相当肮脏的。

# jquery - Get maximum depth of selected node in DOM using jQuery

> ID：12370253
> 
> 赞同：5
> 
> 时间：2012-09-11T12:56:39.013
> 
> 标签：jquery, dom

I would like to count count maximum 'depth' of the DOM tree structure (the length of the longest branch of a tree given its root). For example:

```
<div class="group level0" id="group1">
    <div class="group level1" id="group2">
        <div class="group level2" id="group3">
            <div class="group level3">
            </div>
        </div>
    </div>
    <div class="group level1">
        <div class="group level2">
        </div>
    </div>
</div> 
```

For example result for `div#group1` would be 3\. Result for `div#group2` would be 2 and result for `div#group3` would be 1.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:05:54.460

Here:

```
var calcDepth = function ( root ) {
    var $children = $( root ).children();
    var depth = 0;

    while ( $children.length > 0 ) {
        $children = $children.children();
        depth += 1;
    }

    return depth;
}; 
```

**Live demo:** [http://jsfiddle.net/WqXy9/](http://jsfiddle.net/WqXy9/)

```
calcDepth( $('#group1')[0] ) // => 3
calcDepth( $('#group2')[0] ) // => 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:09:13.937

This function will find the maximum depth through the DOM tree from a given `root`, tracing the tree only through nodes with a specific `class`:

```
function getDepth(root, className) {
    var children = root.children('.' + className),
        maxDepth = 0;

    if (children.length === 0) {
        return maxDepth;
    } else {
        children.each(function() {
            var depth = 1 + getDepth($(this), className);
            if (depth > maxDepth) {
                maxDepth = depth;
            }
        });
    }

    return maxDepth;
}

var root = $('#group1');
var className = 'group';

var depth = getDepth(root,className);​ 
```

Here's a demo with a slightly more complex DOM:

[**--- jsFiddle DEMO ---**](http://jsfiddle.net/upVFZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:26:16.253

Here is non recursive solution:

```
function len(sel) {
    var depth = 0;
    $(sel + " :not(:has(*))").each(function() {
        var tmp = $(this).parentsUntil(sel).length + 1;
        if (tmp > depth) depth = tmp;
    });
    return depth;
} 
```

**DEMO:** [http://jsfiddle.net/f2REj/](http://jsfiddle.net/f2REj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:50:03.963

```
jQuery.fn.depth = function() {
    var children = jQuery(this).children();
    if (children.length === 0)
        return 0;
    else
    {
        var maxLength = 0;
        children.each(function()
        {
            maxLength = Math.max(jQuery(this).depth(), maxLength);
        });
        return 1 + maxLength;
    }
}; 
```

Demo: [http://jsfiddle.net/7Q3a9/](http://jsfiddle.net/7Q3a9/)

# android - InputMethodService 中的新 Activity 关闭键盘

> ID：12370264
> 
> 赞同：1
> 
> 时间：2012-09-11T12:57:18.467
> 
> 标签：android, android-intent, android-activity, android-service, android-input-method

我正在为 Android 编写一个自定义键盘，我正在使用`InputMethodService`它来处理所有与键盘相关的事件。

在某个事件中，我向用户展示了一个`Activity`带有`Theme.Dialog`主题的主题，但是当它展示时，它会关闭当前可见`KeyboardView`，我希望键盘在正在运行的活动下保持可见。有没有办法避免关闭键盘，或者有更有效的方法可以从运行中向用户呈现带有几个按钮的对话框`Service`？

活动声明`AndroidManifest.xml`：

```
<activity
  android:name=".EditActivity"
  android:label="@string/edit_title"
  android:theme="@android:style/Theme.Dialog"
  /> 
```

用于呈现活动的代码：

```
Intent intent = new Intent(getApplicationContext(), EditActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

提前致谢！

//更新

一切正常，并在不透明`KeyboardView`时恢复，因此删除主题声明：`Activity`

```
android:theme="@android:style/Theme.Dialog" 
```

修复一切。所以问题是，如何在`Activity`不忽略 的情况下呈现半透明`KeyboardView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:20:07.477

好的，我知道该怎么做，这是我对解决方案的另一个问题的回答：[https ://stackoverflow.com/a/13652456/285680](https://stackoverflow.com/a/13652456/285680)

# javascript - 从 IE 中的输入类型 = 文件中抓取 SINGLE 文件

> ID：12370268
> 
> 赞同：1
> 
> 时间：2012-09-11T12:57:38.857
> 
> 标签：javascript, internet-explorer, file-upload

我了解 IE9 及以下版本不支持对具有多个文件的输入进行文件上传。但我什至无法在*单个*文件上传中抓取文件！

## HTML：

```
<input type='file' id='imgfile' /> 
```

## Javascript：

```
var input = document.getElementById("imgfile");
input.addEventListener("change", function (evt) {
file = this.files[0]; /** Is it possible to even just do this much in IE? **/

            if (!!file.type.match(/image.*/)) {
                if ( window.FileReader ) {
                    reader = new FileReader();
                    reader.onloadend = function (e) { 
                        showUploadedItem(e.target.result, file.fileName);
                    };
                    reader.readAsDataURL(file);
                }
                if (formdata) {
                    formdata.append("images[]", file);
                }
            }
                   /* some stuf */
} 
```

我知道 FileReader API 不能在 IE 中工作，那怎么办？一定有什么解决办法。我在这上面花了一段时间，但它让我望而却步！

## 编辑

我应该提到，我正在使用 ajax。所以上面的这个javascript是在使用PHP上传上传的文件*后触发的。*这是否意味着我们甚至不能在 IE 中使用 ajax？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:04:55.153

`input.files`是一个 HTML5 属性，很可能在您测试它的任何浏览器中都[不受支持。](http://caniuse.com/fileapi)

你试过`input.value`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:17:30.157

您不能使用 IE 上传带有 javascript 的选定文件。要将此文件发送到服务器，您需要提交包含文件上传的表单（旧方法）。

最近浏览器支持 Ajax 文件上传（Chrome、Firefox 和 Opera）。为此，您将需要 XHR2。IE9 不支持，但 IE10 应该：[http ://caniuse.com/#feat=xhr2](http://caniuse.com/#feat=xhr2)

但我不明白您的 javascript 是如何从服务器取回文件的。如果你想使用 Ajax，你应该从你的 Ajax 请求输出中读取文件，而不是从你的 fileupload 组件中读取。

# iis-express - 应用程序池参考问题 - IIS Express 7.5

> ID：12370274
> 
> 赞同：0
> 
> 时间：2012-09-11T12:57:56.593
> 
> 标签：iis-express

我在 IIS Express 7.5 的 applicationhost.config 文件中创建了应用程序池条目、虚拟目录条目

前任：

**应用程序池条目：**

```
<add name="samples" enable32BitAppOnWin64="true" managedRuntimeVersion="v4.0" managedPipelineMode="Integrated">
            <processModel identityType="LocalSystem" />
        </add> 
```

**虚拟目录条目**

```
<application path="/samplebrowser.Web" applicationPool="samples">
                        <virtualDirectory path="/" physicalPath="C:\Users\vel\AppData\Local\Sample\SB.Web" />
    </application> 
```

我只需单击系统托盘中的 IIS Express 图标即可浏览在 applicationhost.config 文件中有条目的示例，我的示例没有在此处列出。

如果我从虚拟目录条目中删除了 {applicationPool="samples"}，我们可以在系统托盘中看到示例。否则我不能。

**我的要求：** 在不从虚拟目录条目中删除 {applicationPool="samples"} 的情况下，我的示例将在系统托盘中列出。

有人可以帮忙吗？

请高度重视这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:04:24.440

IIs Express 不以应用程序池身份运行，而是以当前用户身份运行，因此它不会尊重 processmodel 设置。

尝试从命令行启动 iisexpress.exe 并检查启动过程中是否有任何错误。为此，请转到 IIS Express 安装文件夹并运行以下命令。

iisexpress.exe /site:"你的站点名称" /trace:d

# perl - 当我用 perl 创建一个守护进程并将某些内容写入文件时，它失败了

> ID：12370282
> 
> 赞同：1
> 
> 时间：2012-09-11T12:58:44.070
> 
> 标签：perl

我使用 daemonize 创建了一个守护进程，然后在名为 log 的文件中写入了一些内容，但是当我运行它时，它不起作用。

为什么我不能写入日志？

```
use POSIX;

sub daemonize{
    chdir '/';
    umask 0;
    open STDIN,'/dev/null'   || die "can not open /dev/null:$!";
    open STDOUT,'>/dev/null' || die "can not open /dev/null:$!";
    open STDERR,'>/dev/null' ||die "can not open /dev/null:$!";
    defined ($pid=fork) || die "can not fork a process:$!";
    exit if $pid;
    setsid || die "can not create session:$!";
}

&daemonize;
open LOG,">>/dev02/ycq/test/log" ||die "can not open file:$!";
my $num=0;
while(1){
    print LOG "$num\n";
    sleep 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:31:50.183

使用`open`（或任何其他函数或子程序）时，您需要考虑[运算符优先级](http://perldoc.perl.org/perlop.html#Operator-Precedence-and-Associativity)。在您的情况下，`||`运算符的优先级高于`,`（逗号）运算符。

您的线条如下所示：

```
open LOG, "file.txt" ||die "can not open file:$!"; 
```

实际上是这个意思，当考虑到优先级时：

```
open LOG, ("file.txt || die ...); 
```

由于`"file.txt"`是一个真实的陈述，它永远不会触发该`die`陈述。

您需要的是：

```
open(LOG, "file.txt") || die ... 
```

或者

```
open LOG, "file.txt" or die ... 
```

在第一种情况下，括号覆盖运算符优先级，在第二种情况下，`or`运算符的优先级低于逗号运算符。

这一切意味着您的`open`呼叫可能默默地失败了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:32:51.667

你到底得到了什么错误？您可能正在[遭受缓冲](http://perl.plover.com/FAQs/Buffering.html)。

您应该使用 open 的 3 参数形式。

你`chdir`不会把你放在你想的地方；你用前导空格写了'/'。

你可能会发现[Proc::Daemon](https://metacpan.org/module/Proc%3a%3aDaemon)也很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:32:46.067

也许是因为`chdir(' /')`.

# ios - 用于移动设备的 Facebook 请求对话框 - 过滤用户

> ID：12370285
> 
> 赞同：0
> 
> 时间：2012-09-11T12:58:54.263
> 
> 标签：ios, facebook, dialog, request

我在移动应用程序中使用请求对话框。阅读 [https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/) 我发现

> 注意：过滤器选项在移动对话框中被禁用，并且不会影响出现在对话框中的用户集。

不幸的是，我只需要在一个对话框中显示安装了应用程序的朋友，而在另一个对话框中休息。是否有任何合理的方法可以在仍然使用 FB 请求对话框的同时过滤这样的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:07:09.610

您可以查看与 SDK 一起打包的 Hackbook 示例应用程序，以向您展示如何执行此操作，但本质上您必须创建一个 API 调用来获取（例如安装了该应用程序的用户）并将其传递给名为“建议”。

```
- (void)sendRequest:(NSArray *) targeted {
    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"It's your turn, quit slacking.",  @"message",
                               nil];

    // Filter and only show targeted friends
    if (targeted != nil && [targeted count] > 0) {
        NSString *selectIDsStr = [targeted componentsJoinedByString:@","];
        [params setObject:selectIDsStr forKey:@"suggestions"];
    }

    [self.facebook dialog:@"apprequests"
                  andParams:params
                andDelegate:self];
}

- (void) sendToAppUsers {
    FBRequest *appUsersRequest = [[FBRequest alloc]
                                  initWithSession:FBSession.activeSession
                                  restMethod:@"friends.getAppUsers"
                                  parameters:nil
                                  HTTPMethod:@"GET"];
    FBRequestConnection *appUsersConnection = [[FBRequestConnection alloc] init];
    [appUsersConnection
     addRequest:appUsersRequest
     completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
         // Process the results
         NSMutableArray *friendsWithApp = [[NSMutableArray alloc] init];
         // Many results
         if ([result isKindOfClass:[NSArray class]]) {
             [friendsWithApp addObjectsFromArray:result];
         } else if ([result isKindOfClass:[NSDecimalNumber class]]) {
             [friendsWithApp addObject: [result stringValue]];
         }
         // User has friends that pass this filter
         if ([friendsWithApp count] > 0) {
             [self sendRequest:friendsWithApp];
         }
    }];
    [appUsersConnection start];
} 
```

# android - 如何让片段加载更快？

> ID：12370286
> 
> 赞同：6
> 
> 时间：2012-09-11T12:58:53.977
> 
> 标签：android, android-fragments

我目前正在开发一个包含专辑列表的片段。结构非常简单：

水平滑块包含 LinearLayour（水平）。为了添加带有歌曲列表的专辑，我创建了一个单独的视图，其中包含封面图像和列表视图。列表视图也是自定义的，其中项目是带有 3 个文本视图的线性布局。然后我膨胀它，填充列表，并添加到水平滑块。

如果我有超过 2 个专辑列表，则会出现此问题。打开一个片段需要一些时间。

另一件事是当我尝试（水平）滚动时，有时它会停止一小会儿，这会导致糟糕的用户体验。

我想说的是，我已经看到了类似的观点，而且他们的工作速度很快，没有滞后。是否有可能以某种方式对其进行优化？或者是否有可能让片段立即打开，然后列表加载（一种延迟加载）。

列表查看项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="#ccffffff"
    android:padding="10dp" >

        <TextView
            android:id="@+id/album_list_item_number"
            android:layout_width="30dp"
            android:layout_height="wrap_content"
            android:text=""
            android:gravity="center|center_vertical"
            android:layout_gravity="center|center_vertical"
            android:textColor="#333333"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/album_list_item_title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text=""
            android:layout_weight="1"
            android:gravity="left|center_vertical"
            android:layout_gravity="left|center_vertical"
            android:textColor="#333333"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/album_list_item_time"
            android:layout_width="90dp"
            android:layout_height="wrap_content"
            android:text=""
            android:gravity="center|center_vertical"
            android:layout_gravity="center|center_vertical"
            android:textColor="#333333"
            android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

填充列表并将视图添加到水平滑块：

```
 View albumView = inflater.inflate(R.layout.artist_album_col, container, false);
    //setting cover
    ImageView albumCover = (ImageView) albumView.findViewById(R.id.artistAlbumCover);
    albumCover.setImageDrawable(getResources().getDrawable(R.drawable.albumcover)); //cover

    ListView albumList = (ListView) albumView.findViewById(R.id.artistSongList);

    // create the grid item mapping
    String[] from = new String[] {"num", "title", "time"};
    int[] to = new int[] { R.id.album_list_item_number, R.id.album_list_item_title, R.id.album_list_item_time};

    // prepare the list of all records
    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
    for(int i = 0; i < 24; i++){
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("num", "" + i);
        map.put("title", "title title title title title title title title title " + i);
        map.put("time", "time " + i);
        fillMaps.add(map);
    }

    // fill in the grid_item layout
    SimpleAdapter adapter = new SimpleAdapter(mContext, fillMaps, R.layout.album_list_item, from, to);
    albumList.setAdapter(adapter);

    albumContainer.addView(albumView); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:24:13.817

您可以使用[Async Task](http://developer.android.com/reference/android/os/AsyncTask.html)来执行耗时的任务并将它们从 UI 线程中移除。这将允许片段快速加载并“懒惰地”填充列表。

致电：

```
new LoadingTask().execute(""); 
```

你可以在你的片段类中加入这样的类（警告！未经测试）：

```
private class LoadingTask extends AsyncTask<Void, Void, Void> {
   SimpleAdapter adapter;

   protected void doInBackground(Void... values) {

       // do your work in background thread 
       // create the grid item mapping                       
       String[] from = new String[] {"num", "title", "time"};                       
       int[] to = new int[] { R.id.album_list_item_number, R.id.album_list_item_title, R.id.album_list_item_time};

       // prepare the list of all records                         
       List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();                         
       for(int i = 0; i < 24; i++){                             
       HashMap<String, String> map = new HashMap<String, String>();                             
       map.put("num", "" + i);                             
       map.put("title", "title title title title title title title title title " + i);                             
       map.put("time", "time " + i);                             
       fillMaps.add(map);                         
     }                                              
     // fill in the grid_item layout                         
     adapter = new SimpleAdapter(mContext, fillMaps, R.layout.album_list_item, from, to); 
       return;
   }

   protected void onPostExecute(Void value) {

      // back in UI thread after task is done   
      ListView albumList = (ListView) getActivity().findViewById(R.id.artistSongList);     
      albumList.setAdapter(adapter);
   }
} 
```

另一个例子[在这里](https://stackoverflow.com/questions/9671546/asynctask-android-example)。

# java - UPnP 是如何工作的？

> ID：12370287
> 
> 赞同：3
> 
> 时间：2012-09-11T12:58:55.130
> 
> 标签：java, android, upnp

我正在做一个应用程序，它在启用 upnp 的电视机中呈现网页。我已经使用[Cling UPnP](http://4thline.org/projects/cling/core/)实现了 UPnP 现在我不确定如何进一步进行。电视和设备之间的连接是如何实现的？是套接字连接吗？有没有人有关于这个主题的任何示例或教程，可以帮助我实现 UPnP 流。

我在 google 上搜索过，但它主要指向 google play 中可用的现有应用程序。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T12:37:54.380

好的，所以服务描述符 xml (SCPD) 包含`<actionList>`s`<action>`及其参数，可以是`in`（对电视）或`out`（将在电视对动作的响应中）。您需要“调用”该操作，这意味着 Cling 将其序列化为 SOAP RPC 并将其作为 HTTP 请求发送到设备。在响应中，您将获得调用的整体结果，与普通 HTTP 一样，200 表示 OK，500 表示错误请求等。每个代码在特定操作调用的上下文中都有特定的解释。响应还将`out`包含 SCPD 中指定的参数。

但是当使用像 Cling 这样的抽象库时，这一切都不是你感兴趣的。它会为你做一切。免责声明：我不熟悉 Cling，只是有足够的其他 UPnP 库知道在哪里寻找东西。

作为电视机，你提到的 3 项服务无疑是`AVTransport`,`ConnectionManager`和`RenderingControl`. 因此，为了展示一个实际可以在电视上观察到的事情的简单示例，让我们调用`RenderingControl.SetVolume`. 你需要的方法是`org.teleal.cling.support.renderingcontrol.callback.SetVolume`。我无法帮助您知道从哪里获取`Service`参数，但是您应该能够弄清楚。

我并不是说你不需要知道 UPnP 是如何工作的。获取[UPnP 规范包](http://upnp.org/resources/upnpresources.zip)并至少阅读**DeviceArchitecture** pdf 是必不可少的。而且您肯定需要规范来了解更复杂的服务，例如`AVTransport`. *提示：不要关心 InstanceID 和 ConnectionID。除非您连接到非常先进的渲染器（现在的电视没有），否则它都是 0*。

# macos - addChildWindow:ordered: 方法在雪豹机器中表现异常

> ID：12370289
> 
> 赞同：1
> 
> 时间：2012-09-11T12:59:01.790
> 
> 标签：macos, cocoa, osx-snow-leopard, nswindow, childwindow

我有一个主窗口，我从中呈现一个子窗口作为主窗口的子窗口。当我关闭主窗口然后从停靠栏恢复它时，两个窗口都会再次出现。之后，当我尝试关闭子窗口时，主窗口也将关闭。当我从码头恢复它时，我看到子窗口的关闭按钮被禁用。这种情况只发生在雪豹身上。它在 Lion 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T06:29:23.443

我有同样的问题。已修复 - 只需在子窗口委托中：

```
- (void)windowWillClose:(NSNotification *)notification
{
    [[self.window parentWindow] removeChildWindow:self.window];
} 
```

# ios5 - 如何在 xcode 4.3 中使用 GDataXML 更改 xml 标签的值？

> ID：12370293
> 
> 赞同：3
> 
> 时间：2012-09-11T12:59:17.560
> 
> 标签：ios5, xml-parsing, xcode4.3, gdataxml

我是使用 GDataXML 解析 xml 文件的新手。我想更改文件**中一些中间 xml 标记的值并将****其写回文件**。

例如。我有以下文件..

```
<sheetData>
 <row r="7" spans="5:6" x14ac:dyDescent="0.25">
  <c r="E7" t="s">
   <v>0</v> 
  </c>
  <c r="F7" t="s">
    <v>1</v> 
  </c>
 </row>
 <row r="8" spans="5:6" x14ac:dyDescent="0.25">
  <c r="E8" t="s">
   <v>2</v> 
  </c>
  <c r="F8">
   <v>9890234654</v> 
  </c>
 </row>
</sheetData> 
```

我想将电话号码 ('9890234654')的值**更新为****9503452366**。我如何在 iOS 中使用 GDataXML 来做到这一点？（我使用的是 xcode 4.3.2）

我找不到任何方法可以直接在原始 xml 树中替换标记值。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:10:52.703

您是否创建了 XML 文件/数据？我建议您为节点放置命名空间，以便更容易跟踪它们。例如：

```
<sheetData xmlns="http://mypage.net/sheetdata">
  <row r="7" spans="5:6" x14ac:dyDescent="0.25" xmlns="http://mypage.net/r7">
    <c r="E7" t="s">
      <v>0</v> 
    </c>
    <c r="F7" t="s">
      <v>1</v> 
    </c>
  </row>
  <row r="8" spans="5:6" x14ac:dyDescent="0.25" xmlns="http://mypage.net/r8">
    <c r="E8" t="s">
      <v>2</v> 
    </c>
    <c r="F8">
      <v>9890234654</v> 
    </c>
  </row>
</sheetData> 
```

有了命名空间，下面是一个更新值的示例代码：

```
//The sample xml data is assigned to this NSData object: myXMLData
//Create a GDataXMLDocument
NSError *error = nil;
GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:myXMLData options:0 error:&error];

//build a namespace dictionary
NSDictionary *ns = [NSDictionary dictionaryWithObjectsAndKeys:@"http://mypage.net/sheetdata", @"sd", @"http://mypage.net/r7", @"r7", "http://mypage.net/r8", @"r8", nil];

//Now here are some codes to change the value
NSError *err = nil;
GDataXMLNode *row8 = [[doc nodesForXPath:@"//r8:row" namespace:ns error:&err] objectAtIndex:0];
//Need to change value of second node
GDataXMLNode *f8 = [[row8 children] objectAtIndex:1];
GDataXMLNode *f8v = [[f8 children] objectAtIndex:0];
f8v.stringValue = @"9503452366";

//doc now has the xml with updated value. Just get the XML data, doc.XMLData, from it then convert it as you please 
```

# php - 我想在 magento 的 Billing 选项卡上选择付款方式

> ID：12370294
> 
> 赞同：0
> 
> 时间：2012-09-11T12:59:19.657
> 
> 标签：php, magento, checkout

我已按以下方式更改了结帐流程订单选项卡-

1.  付款方式
2.  计费
3.  船运
4.  审查
5.  确认订单

现在我想在运输选项卡上获取选定的付款方式。实际上，我想让运输选项卡上的后退链接动态取决于所选的付款方式，因此希望在运输选项卡上获取所选的付款方式，以便我可以在后退按钮上编写一些代码。

我怎样才能做到这一点？

提前致谢。-普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T19:17:05.130

这是不可能的，因为付款方式基于帐单地址。

# variables - 谓词中的 XSLT 变量不起作用

> ID：12370296
> 
> 赞同：2
> 
> 时间：2012-09-11T12:59:21.137
> 
> 标签：variables, xslt, filter, predicate

我的 xml 看起来像这样：

```
<units>
    <unit>
        <unitnum></unitnum>
        <Year></Year>
        <Qty></Qty>
    </unit>
</units> 
```

我创建了一把钥匙来捕捉所有可能的年份。像这样：

```
<xsl:key name="yr" match="//Year/text()" use="." /> 
```

然后我 for-each 循环遍历键以获得唯一的年份。我的最终目标是像这样总结数量：

```
<xsl:for-each select="//Year/text()[generate-id()=generate-id(key('yr',.)[1])]">
     <li>
        <xsl:variable name="varjobyear" select="."/>
        <xsl:value-of select="$varjobyear"/> - sum -
        <xsl:value-of select="sum(//unit[Year=$varjobyear]/Qty)"/>
     </li>
</xsl:for-each> 
```

出于某种原因，我的输出如下所示：

```
2010 - sum - 0
2011 - sum - 0
2012 - sum - 0 
```

但我想要的是那些 0 是每年数量的实际总和。

我最好的猜测是谓词 [Year=$varjobyear] 有问题，但我不知道它是什么。我也试过 [Year=string($varjobyear)] 和 [Year=number($varjobyear)]。

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:10:49.400

**你想要这样的东西**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kYearByVal" match="Year" use="."/>

 <xsl:template match="Year[generate-id()=generate-id(key('kYearByVal',.)[1])]">
  <li>
    <xsl:value-of select="concat(., ' - sum - ', sum(key('kYearByVal',.)/../Qty))"/>
  </li>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<units>
    <unit>
        <unitnum>12</unitnum>
        <Year>1922</Year>
        <Qty>3</Qty>
    </unit>
    <unit>
        <unitnum>13</unitnum>
        <Year>1922</Year>
        <Qty>8</Qty>
    </unit>
    <unit>
        <unitnum>14</unitnum>
        <Year>1999</Year>
        <Qty>5</Qty>
    </unit>
    <unit>
        <unitnum>15</unitnum>
        <Year>1999</Year>
        <Qty>7</Qty>
    </unit>
    <unit>
        <unitnum>16</unitnum>
        <Year>2003</Year>
        <Qty>3</Qty>
    </unit>
</units> 
```

**产生了想要的正确结果：**

```
<li>1922 - sum - 11</li>
<li>1999 - sum - 12</li>
<li>2003 - sum - 3</li> 
```

# php - 在 javascript 中读取和解密 cakephp cookie

> ID：12370299
> 
> 赞同：0
> 
> 时间：2012-09-11T12:59:31.980
> 
> 标签：php, javascript, cakephp, cookies

有什么方法可以在 javascript 中读取和解密 cakephp cookie？我可以读出加密的值，但这并没有多大帮助。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:23:31.837

这些值使用密钥加密。要解密它们，您需要让 Javascript 可以使用密钥，这意味着让任何正在查看您网站的人都可以使用它。这样做并非不可能，但我会认真质疑这样做是否明智。

# jquery - jquery占位符功能：输入为空时，发送占位符值

> ID：12370300
> 
> 赞同：0
> 
> 时间：2012-09-11T12:59:32.750
> 
> 标签：jquery

我在 jquery 中编写了一个占位符函数，它工作正常，但是当该字段为空时，它实际上具有占位符的值。我在函数之外解决了它，我在提交时在 sendForm() 函数中检查它。但我想在占位符函数中解决它，使其适用于所有情况。这是代码：

**jquery占位符：**

```
$(":input[data-placeholder]").each(function(index){     

    if ($(this).val() == "")                
    {
        $(this).val($(this).data("placeholder"));           
        $(this).addClass("placeholder");            
    }           
    }).live("focus",function(){
        //check if the field not filled
        if($(this).hasClass("placeholder")) 
        {
            $(this).removeClass("placeholder");
            $(this).val("");
        }
    }).live("blur",function(){      
        if($(this).val()=="")
        {
            $(this).val($(this).data("placeholder"));           
            $(this).addClass("placeholder");                
        }

    }); 
```

**html:**

```
 <form name="forme" method="post" onsubmit="return sendForm();"> 
                <div id="fields">                   
                    <input type="text" name="userName" id="userName" data-placeholder="שם מלא"/>
                    <input type="text" name="userPhone" id="userPhone" data-placeholder="טלפון"/>
                    <input type="text" name="userMail" id="userMail" data-placeholder='דוא"ל'/>
                     <!--<textarea name="userMail" id="userMail" data-placeholder='דוא"ל'></textarea>-->
                </div>
                <input type="submit" id="submit" value="הרשמה">
            </form> 
```

**发送表单（）：**

```
function sendForm(){

var uname, uphone, umail; 
$("#userName").hasClass("placeholder") ? uname="" : uname=$("#userName").val(); 
$("#userPhone").hasClass("placeholder") ? uphone="" : uphone=$("#userPhone").val(); 
$("#userMail").hasClass("placeholder") ? umail="" : umail=$("#userMail").val(); 

var dataObject = {name: uname, phone: uphone, mail: umail};

if(validate(uname,uphone,umail))
{ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:56:42.997

**jQuery 占位符（在提交时为您的占位符添加）：**

```
$(document).ready(function(){
    $(':input[data-placeholder]').each(function(index){
        if($(this).val() == ''){
            $(this).val($(this).data('placeholder'));
            $(this).addClass('placeholder');
        }
        $(this).closest('form').submit(function(){
            $(':input[data-placeholder]').each(function(){
                if($(this).hasClass('placeholder')){
                    $(this).removeClass('placeholder');
                    $(this).val('');
                    //console.log($(this));
                }
            });
        });
    }).live('focus', function(){
        //check if the field not filled
        if($(this).hasClass('placeholder')){
            $(this).removeClass('placeholder');
            $(this).val('');
        }
    }).live('blur', function(){
        if($(this).val() == ''){
            $(this).val($(this).data('placeholder'));
            $(this).addClass('placeholder');
        }
    });
}); 
```

**占位符的 CSS 样式：**

```
.placeholder{color:#a0a0a0;} 
```

DOM 之后的第一件事是`.ready`为所有具有属性的输入标签运行循环`data-placeholder`。

然后，它检查输入中是否没有值，并使用[jQuery.closest()](http://api.jquery.com/closest/)`form`函数（方法）搜索最接近的标签，该函数在 DOM 中向上工作，直到找到零个或一个元素[（与 jQuery.patents 不同())](http://api.jquery.com/parents/)。`jQuery.closest('form')`

然后，您已经编写好的代码继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:06:56.707

只需在循环`onsubmit`中为每个元素的表单添加一个处理程序：`.each()`

```
var form = $(this).closest('form');
// check if onsubmit handler is not already installed for this form
if (!form.data('placeholder-processed')) {
    form.data('placeholder-processed', true);
    form.on('submit', function() {
        // move your sendForm() logic here
    }
} 
```

请注意，您的`.each()`循环将在您运行它的那一刻处理所有*现有**元素*，但您的`.live()`事件处理程序也会触发`input[data-placeholder]`在您运行.*`.each()`*

# objective-c - 使用 2 个不带全屏的 uitableviews 向下钻取

> ID：12370303
> 
> 赞同：0
> 
> 时间：2012-09-11T12:59:43.267
> 
> 标签：objective-c, xcode, uitableview, uinavigationcontroller

是否可以向下钻取`UITableViews`以使下一个级别不以全屏显示？
我目前有`UIViewController`两个`UITableViews`。一旦我单击其中的任何行，下一个级别就会显示在屏幕上（我正在使用`[self.navigationController pushViewController:nextController animated:YES]`它）。
但我真正想要的是，如果我单击下部的一行，`UITableView`我希望下部`UITableView`显示下一个级别，而上部仍然显示其内容。

下一步将使用下部`UITableView`作为过滤器，因此在下一个级别中，我可以单击一些过滤器选项，然后更改上部`UITableView`内容（类似于`SearchBar`内容根据您键入的内容而变化的位置）。

任何想法如何完成第一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:14:01.147

我通过`UITableView`在它们自己的`UIView`. 然后可以调整大小。

# java - 如何访问自定义搜索建议提供程序中的本地化字符串？

> ID：12370304
> 
> 赞同：0
> 
> 时间：2012-09-11T12:59:42.370
> 
> 标签：java, android, android-resources

我为我的应用程序的`SearchView`. 建议显示得很好，但建议名称是硬编码的。我想从我的`strings.xml`文件中获取本地化字符串，但我需要访问我的搜索提供程序中没有的活动上下文。

按照 Android Developer 文档中的建议，我的搜索提供程序已映射到我`SearchView`使用的`searchables.xml`文件。这是我的可搜索配置：

```
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:hint="artist, track informations..."
    android:label="@string/app_name"
    android:queryAfterZeroResults="true"
    android:searchSuggestAuthority="com.example.testapp.providers.QuickSearchProvider"
    android:searchSuggestSelection=" ?"
    android:searchSuggestThreshold="3" /> 
```

...这是实际的搜索提供程序：

```
public class QuickSearchProvider extends SearchRecentSuggestionsProvider {

  public final static String AUTHORITY = "com.example.testapp.providers.QuickSearchProvider";
  public final static int MODE = DATABASE_MODE_QUERIES | DATABASE_MODE_2LINES;

  public QuickSearchProvider() {
    setupSuggestions(AUTHORITY, MODE);
  }

  public Cursor query(Uri uri, String[] projection, String sel,
      String[] selArgs, String sortOrder) {

      MatrixCursor cursor = new MatrixCursor(new String[] { 
          BaseColumns._ID,
          SearchManager.SUGGEST_COLUMN_TEXT_1,
          SearchManager.SUGGEST_COLUMN_TEXT_2,
          SearchManager.SUGGEST_COLUMN_ICON_1,
          SearchManager.SUGGEST_COLUMN_INTENT_ACTION});

      cursor.addRow(new Object[] { 0, "Plants", "Search Plants", android.R.drawable.ic_menu_search, Search.SEARCH_PLANTS_ACTION});
      cursor.addRow(new Object[] { 1, "Birds", "Search Birds", android.R.drawable.ic_menu_search, Search.SEARCH_BIRDS_ACTION });

      return new MergeCursor(new Cursor[] { cursor });
  }

} 
```

我想从我的字符串资源文件中获取“植物”和“鸟类”等术语的本地化字符串。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:45:06.063

尝试类似：

字符串值 = this.getContext().getResources().getString(R.string.Plants)

# c# - 我可以将 DataTable 用于 AjaxToolKit 中的 AutoCompleteExtender

> ID：12370314
> 
> 赞同：0
> 
> 时间：2012-09-11T13:00:05.287
> 
> 标签：c#, asp.net, datatable, autocompleteextender

我构建了一个 ASP.NET Web 应用程序，并且我有一个文本框，用户可以在其中找到其他用户。为此，我想使用 AjaxToolKit 中的 AutoCompleteExtender。我从 Active Directory 获得的数据。如果我启动我的页面，应用程序会使用 ActiveDirectory 中的所有 UserDate 创建一个 DataTable，而我的问题是。

我可以将 DataTabe 用于 AutoCompleteExtender 中的信息吗？如果我可以使用它，我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:09:58.493

根据[官方文档](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)，您不能。不仅不能使用 DataTable，而且必须实现 Web 服务，并在其中实现具有非常特定签名的 Web 方法。

如果您不介意使用 jQuery，我可以向您展示一个使用 jQuery 的示例。

**更新：**

使用 jQuery，您需要做的就是在您的标记中包含以下库：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js" type="text/javascript"></script> 
```

在您的标记上，您可以添加一个`asp:hiddenElement`和将用于自动完成的文本元素，如下所示：

```
<asp:HiddenElement id="hdnAutoComplete" runat="server" />
<asp:TextBox id="txtAutoComplete" runat="server" /> 
```

现在，您只需添加以下 Javascript 函数：

```
$(function(){
var items = eval($('#<%=hdnAutoComplete.ClientID%>').val());

  $( "#<%=txtAutoComplete.ClientID%>" ).autocomplete({
     source: items
   });

}); 
```

最后，您需要设置要用于从 codebhind 自动完成的元素。既然您想使用 DataTable，我将向您展示一个简单的方法：

```
protected void Page_Load(object sender, EventArgs e)
{
     DataTable t = ...//your datatable is this

     var query = (from c in t.AsEnumerable()
                 select c.Field<string>("NameOfTheColumnYouWant")).ToArray();

     //this will create a javascript array on the client-side when it's eval'd 
     hdnAutoComplete.Value = "["+string.Join(",",query)+"]";

} 
```

[在此处](http://jqueryui.com/demos/autocomplete/)阅读 jQuery UI 官方文档中的更多示例。

# windows - Windows 8 平板电脑流媒体 支持

> ID：12370315
> 
> 赞同：1
> 
> 时间：2012-09-11T13:00:08.963
> 
> 标签：windows, microsoft-metro, smooth-streaming

有谁知道 Windows 8 平板电脑（以及 Windows Phone 8）上的本地和 Metro 风格应用程序将支持哪些视频流传输方法？

我希望本机支持以下之一：

Apple HLS (Http Live Streaming) Microsoft Smooth Streaming RTSP 流

我知道 Metro 风格的应用程序支持平滑流式传输，但我找不到任何方式在我的网站上呈现链接（如果单击）将视频播放切换回本机视频播放器。

任何想法将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:30:34.880

Windows 8 上没有默认播放器（如 Windows Phone），您将不得不使用一些库。试试这个： http: [//playerframework.codeplex.com/](http://playerframework.codeplex.com/)

# jquery - 使用 jQuery 重新编号文本输入数组索引

> ID：12370317
> 
> 赞同：3
> 
> 时间：2012-09-11T13:00:09.333
> 
> 标签：jquery, forms

我有以下 HTML 块，用于从用户那里收集有关项目的信息作为表单的一部分：

```
<div class="clone_block">
  Name: <input type="text" name="items[0][name]" /><br />
  Amount: <input type="text" name="items[0][amount]" /><br />
  <button class="delete">Delete</button>
</div> 
```

我可以克隆这个元素（如果用户想要添加另一个项目）并将其`div.clone_block`放在 DOM 中的最后一个实例之后，一切正常，我也可以删除元素。但是，我最终得到了多个具有相同名称的文本输入实例，这意味着只有最后一个出现在 POST 请求中（之前的被覆盖）。我想要做的是重新编号所有项目，以便第一个是`item[0]`，第二个是`item[1]`等等。

有没有办法在 jQuery 中做到这一点？以这种方式创建名称可以更轻松地使用 PHP 处理 POST 数据，因此如果可能，我不想更改命名方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T13:17:17.630

您可以在每次克隆/删除后实施类似的方法来重命名元素：

```
function renumber_blocks() {
    $(".clone_block").each(function(index) {
        var prefix = "items[" + index + "]";
        $(this).find("input").each(function() {
           this.name = this.name.replace(/items\[\d+\]/, prefix);   
        });
    });
} 
```

演示：http: [//jsfiddle.net/Wzzf2/1/](http://jsfiddle.net/Wzzf2/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T13:06:59.087

如果您使用 PHP 作为您的服务器端语言，您可以这样做：

```
<div class="clone_block">
  Name: <input type="text" name="items[][name]" /><br />
  Amount: <input type="text" name="items[][amount]" /><br />
  <button class="delete">Delete</button>
</div> 
```

PHP 将在收到数据时自动处理创建正确的偏移索引。

然而，要回答您的问题，一旦您克隆了您的块，您只需要导航其结构并使用递增的数字更改名称属性。或者更好地导航所有输入并在使用添加或删除按钮时重新索引它们......这将允许删除。

```
/// find each row with inputs
$('div.form_row').each(function(rowIndex){
  /// find each input with a name attribute inside each row
  $(this).find('input[name]').each(function(){
    var name;
    name = $(this).attr('name');
    name = name.replace(/\[[0-9]+\]/g, '['+rowIndex+']');
    $(this).attr('name',name);
  });
}); 
```

以上将使用以下标记工作*（并且已经过测试）*，您应该看到索引被重新排序：

```
<div class="form_row"><input name="something[0][abc]"></div>
<div class="form_row"><input name="something[2][abc]"></div>
<div class="form_row"><input name="something[3][abc]"></div> 
```

## *更正！*

刚刚意识到依赖 PHP 生成索引的错误......如果您的索引是数组结构的最后一部分，它将起作用：

```
something[abc][]
something[def][] 
```

但是，如果您正在使用（就像您一样）：

```
something[][abc]
something[][def] 
```

您将结束以下 PHP 端：

```
array (
   '0' => array( 'abc' => 'value' ),
   '1' => array( 'def' => 'value' ),
) 
```

而不是：

```
array (
   '0' => array( 
     'abc' => 'value',
     'def' => 'value',
   ),
); 
```

这可能是你想要的更多。因此，对于您的示例，请忽略我提到的 PHP 路由并改用 jQuery 代码段。但是，如果每行只有一个输入，PHP 解决方案仍然很有用......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T13:14:57.283

如果你想在复制时使用索引做其他事情会有点复杂：

```
var name = $('input').attr('name'),
    newId = parseInt(name.match(/\d+/)[1])++;

// clone the input and use newId for something else

$('input.new').attr('name', name.replace(/\d+/, newId)); 
```

# javascript - 使用 Google Apps 脚本从上传的图片中获取地理标签？

> ID：12370319
> 
> 赞同：3
> 
> 时间：2012-09-11T13:00:40.427
> 
> 标签：javascript, google-apps-script, google-drive-api

这个想法：目前我有一个脚本可以监视上传（从智能手机或标签）到特定文件夹的新图像。该脚本根据图像的名称将图像移动到某个子文件夹，并将带有相应数据的行附加到特定的电子表格。

是否可以从上传到 Google Drive 图像（使用智能手机）中获取地理信息以将它们放入电子表格？在 API 上搜索，但看起来没有本机功能。任何第三方解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:58:58.540

使用 GAS 可以完成您的任务（获取上传图像的地理数据）。没有执行它的 GAS 服务，我几乎可以肯定现在没有第 3 方解决方案适合您的任务。该任务的简要方案如下

1.  遍历图像文件夹中的所有文件。
2.  使用`DocsList.getFileById`方法打开每个文件
3.  检查文件数据是否需要 MIME 类型。我假设您最想要 JPEG 文件。它们具有`image/jpeg`MIME 类型。BLOB 类的[getContentType方法返回数据类型。](https://developers.google.com/apps-script/class_blob#getContentType)
4.  对于过滤后的文件，要使用[BLOB.getBytes](https://developers.google.com/apps-script/class_blob#getBytes)方法获取数据，请在数据中找到 EXIF-matadata（见下文），对其进行解析并获取地理标签。地理信息作为元数据存储在图像文件中，通常具有[EXIF](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)格式。有许多 Javascript 库能够读取 JPEG 文件的 EXIF，例如，[这个](http://www.nihilogic.dk/labs/exif/exif.js). 您可以编写自己的代码来执行此步骤或修改现有库（如果库许可证允许）。现有的库修改应该不是问题。
5.  将检索到的地理信息发布到电子表格。

# google-docs-api - 如何使用 Google API 从 Google Docs 中获取评论

> ID：12370322
> 
> 赞同：3
> 
> 时间：2012-09-11T13:00:57.173
> 
> 标签：google-docs-api, google-drive-api

我想使用 Google Drive API 从 Google Docs 中获取评论。有谁知道 Google Drive API（或其他 Google Apps 应用程序 API）是否支持检索评论？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:34:11.787

通过以文本形式下载的文档包含注释（使用 DocumentsList API），尽管可能难以将注释与常规文本区分开来。

当项目以 html 格式下载时（同样，使用 DocumentsList API）包含电子表格的注释，但以其他格式下载时不包括在内。

演示文稿、绘图和非 Google 类型的评论不容易获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:19:48.240

评论尚未通过 API 提供，但这是我们已经在评估的常见功能请求。请继续关注更新。

# vhdl - Verilog 相当于“等到……为……”？

> ID：12370324
> 
> 赞同：9
> 
> 时间：2012-09-11T13:01:01.370
> 
> 标签：vhdl, verilog

在 Verilog 测试台中，我正在尝试编写以下行为：

*   等待事件发生（上升沿/下降沿）最长时间，即相当于 VHDL 指令：

    ```
    wait until <event> for <duration>; 
    ```

它具有以下行为（提醒）：

*   事件发生；
*   或期限届满。

除非我弄错了，否则我在 Verilog 中没有找到该函数的任何直接等效项……所以我尝试了以下代码：

```
reg watchdog;
// ...

// Set a signal 'watchdog' in background which will be triggered in 10 us.
fork
  watchdog <= #10_000 1'b1;
join

// Wait until SIGNAL is set to '1' *OR* watchdog event occurs.
@(posedge SIGNAL or posedge watchdog);

// Reset the watchdog
watchdog <= 1'b0; 
```

此代码完成工作，但最后一条指令不会取消或取代该`fork`指令。因此，在对该代码的第二次调用（例如`watchdog <= #50_000 1'b1;`）中，第一次调用`watchdog`可能会被触发（不幸的是太快了）。

有更好的主意吗？（等效或取消第一个计划的方法`fork`？）

PS：在 SystemVerilog 中执行此操作不是一种选择... ;-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:39:24.277

要在 Verilog 中执行此操作，您需要使用`disable`. 我建议完全摆脱`watchdog`信号，只使用 a 的两个分支`fork`。

下面是一个工作示例。请注意，`disable f`如果该分支成功，则 fork 的每个分支都会调用。禁用分叉将终止未成功的分支。

```
module top;

reg signal;

task test();
   fork : f
      begin
         // Timeout check
         #10
         $display("%t : timeout", $time);
         disable f;
      end
      begin
         // Wait on signal
         @(posedge signal);
         $display("%t : posedge signal", $time);
         disable f;
      end
   join
endtask

initial begin
   // test signal before timeout
   fork
      test;
      begin
         signal = 0;
         #5;
         signal = 1;
         #5;
         signal = 0;
         #10;
      end
   join
   // test signal after timeout
   fork
      test;
      begin
         signal = 0;
         #15;
         signal = 1;
         #5;
      end
   join
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:38:44.280

您`fork join`只有一个进程，因此您没有并行执行任何操作。

这应该做你想要的：

```
fork : wait_or_timeout
  begin
    #10_000; //#10ms
    disable wait_or_timeout;
  end
  begin
    @(posedge SIGNAL);
    disable wait_or_timeout;
  end
join 
```

# cuda - CUDA - 视觉分析器和控制流发散

> ID：12370325
> 
> 赞同：0
> 
> 时间：2012-09-11T13:01:01.277
> 
> 标签：cuda, profiler

我正在分析我的 CUDA 应用程序，我遇到了一些我不理解的关于 Visual Profiler 中存在的“控制流分歧”指标的内容。

根据用户指南：

> *控制流发散给出了线程指令未由经线中的所有线程执行的百分比，从而导致发散。*

我的 CUDA 内核中有以下代码：

```
int var;
var = tex2D(texture, x, y); // texture fetch
if(var < 0) {
    var *= -1;
    results[(blockIdx.x*blockDim.x) + threadIdx.x] = var; // global memory array
} 
```

以下是发生的情况：没有一个线程进入分支（我检查了全局内存中的值），但分析器指出控制流分歧为 34%。如果在同一个分支上插入 printf，则该值会跳到 43%（奇怪的是，执行时间也会增加），尽管 stdout 上没有发生任何事情。这是否意味着该指标考虑了内核的所有指令，甚至是那些未被任何线程执行的指令？（因此有效地没有经线发散）

在这两种情况下，发散分支指标都是 0%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:37:05.903

你用的是什么版本？听起来您使用的是旧版本，因此可能值得更新到较新的版本（例如 4.2 或 5.0 - 后者目前是候选版本）。

如果您能够将 Visual Profiler 更新到 CUDA 5.0，那么您可以通过分析特定内核让分析器突出显示内核中遭受分歧的特定行（对于非合并内存访问也是如此）。您需要使用调试 (-G) 编译代码，或者，如果您想分析发布代码，则需要使用行信息 (-lineinfo) 来编译代码。

# java - 反编译一个APK，修改它然后重新编译它

> ID：12370326
> 
> 赞同：82
> 
> 时间：2012-09-11T13:01:04.530
> 
> 标签：java, android, decompiling, recompile

我需要修改现有的 APK，修改源代码，然后重新编译。

*   我可以使用 dex2jar 或 apktool 对其进行反编译，效果很好
*   从 jar 文件中我可以获得 java 源代码（使用 jd-gui）
*   然后我可以修改java文件

但是现在我想知道如何重新编译java文件并将它们放回jar文件中！（jar部分应该很简单，主要问题似乎是如何为android重新编译java文件）

我知道另一种解决方案是使用apktool，然后修改smali文件，但是当我们要添加大量代码时，它似乎真的很复杂！

我的应用程序是一个基本的 HelloWorld whitout 混淆。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-11T13:35:27.847

多亏了 Chris Jester-Young，我设法让它工作了！

我认为我设法做到这一点的方式只适用于非常简单的项目：

*   使用 Dex2jar，我获得了 Jar。
*   使用 jd-gui 我将我的 Jar 转换回 Java 文件。
*   使用 apktool 我得到了 android 清单和资源文件。

*   在 Eclipse 中，我创建了一个与旧项目具有相同设置的新项目（检查清单文件中的所有信息）

*   创建项目后，我将所有资源和清单替换为我使用 apktool 获得的资源和清单
*   我将从 Jar 中提取的 java 文件粘贴到 src 文件夹中（尊重包）
*   我用我需要的东西修改这些文件
*   一切都在编译！

/!\ 确保您从设备中删除了旧的 apk，将会抛出一个错误，指出 apk 签名与旧的不同！

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-02-10T06:38:52.557

我知道这个问题仍然得到了回答，我想传递一个信息，如何在没有 dexjar 的情况下从 apk 获取源代码。

有一个[针对 android apks](http://www.decompileandroid.com/)[**的在线反编译器**](http://www.decompileandroid.com/)

1.  从本地机器上传 apk
2.  稍等片刻
3.  下载 zip 格式的源代码

我不知道这有多可靠。

**@darkheir**答案是进行反编译 apk 的手动方式。它有助于我们了解 Apk 创建的不同阶段。

获得源代码后，请按照接受的答案中提到的步骤进行操作

在此链接上报告这么多广告 ~~另一个在线 Apk 反编译器**@Andrew Rukin**：[http ://www.javadecompilers.com/apk](http://www.javadecompilers.com/apk)~~

还是值得的。向创作者致敬。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-12-15T15:24:01.763

答案已经有点过时或不完整。这可能适用于不受保护的 apk（没有 Proguard），但现在没有人部署不受保护的 apk。我能够修改（我的）受到良好保护的apk（Proguard，检查“黑客工具”的安全检查，检查应用程序是否以调试模式重新打包的安全检查，...）的方式是通过apktool作为这里的其他人已经提到过。但没有人解释，你必须再次签署该应用程序。

```
apktool d app.apk
//generates a folder with smali bytecode files. 

//Do something with it.

apktool b [folder name] -o modified.apk
//generates the modified apk.

//and then
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore ~/.android/debug.keystore modified.apk androiddebugkey
//signs the app the the debug key (the password is android)

//this apk can be installed on a device. 
```

在我的测试中，原始版本的 apk 没有日志记录。在我用 apktool 反编译后，我交换了一个完整的字节代码文件，而不用一个完整的字节代码文件记录，重新编译并签名它，我能够将它安装在我的设备上。之后，当我将应用程序连接到它时，我能够在 Android Studio 中看到日志。

在我看来，使用`dex2jar`and`JD-GUI`进行反编译只会有助于更好地理解类在做什么，只是为了阅读目的。但是由于一切都是预先保护的，我不确定你是否可以将这个半生不熟的 Java 代码重新编译成一个可以工作的 apk。如果是这样，请告诉我。我认为，唯一的方法是操纵字节码本身，如本例中所述。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-11T05:28:22.757

1.  首先从以下链接下载 dex2jar 工具 [http://code.google.com/p/dex2jar/downloads/list](http://code.google.com/p/dex2jar/downloads/list)

2.  提取它创建`dex2jar`文件夹的文件

3.  现在您选择您的 apk 文件并在更改扩展名后将其扩展名 .apk 更改为 .zip 它似乎是 zip 文件然后解压缩这个您找到的 zip 文件`classes.dex`文件

4.  现在选择 classes.dex 文件并将其放入`dex2jar`文件夹

5.  现在打开cmd窗口并输入`dex2jar`文件夹的路径

6.  现在输入命令`dex2jar.bat classes.dex`并按 Enter

7.  现在打开`dex2jar`你找到 `classes_dex2jar.jar`文件的文件夹

8.  接下来，您从以下链接 [http://java.decompiler.free.fr/?q=jdgui下载 java 反编译器工具](http://java.decompiler.free.fr/?q=jdgui)

9.  最后一步`classes_dex2jar.jar`用java反编译工具打开文件现在可以看到apk代码

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-18T13:48:41.950

我知道这个问题已经得到解答，我不想在这里给出更好的答案。我只是分享我在这个主题上的经验。

一旦我丢失了我的代码并且我只有`apk`文件。我使用下面的工具对它进行了反编译，这让我很开心。

这些工具必须在这种情况下使用，否则，这是不道德的，甚至有时是非法的（窃取别人的努力）。所以请明智地使用它。

这些是我最喜欢的工具：

[javadecompilers.com](http://www.javadecompilers.com/apk)

要从 google play 获取 apk，您可以 google 或查看这些网站：

*   [apk-dl​​.com](http://apk-dl.com/)

*   [apkpure.com](https://apkpure.com/)

在发布此答案之日，我测试了所有链接，它对我来说非常完美。

**注意：** Apk 反编译在 proguarded 代码的情况下无效。因为[Proguard 会](http://proguard.sourceforge.net/)缩小和混淆代码并将类重命名为无意义的名称，这使得理解代码变得相当困难。

**奖金：**

[使用 Proguard 基础教程](http://developer.android.com/tools/help/proguard.html)：

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-06T06:01:20.753

*带有*jd-gui的**dex2jar*将提供所有 java 源文件，但它们并不完全相同。它们几乎是等效的 .class 文件（不是 100%）。因此，如果您想更改 apk 文件的代码：*

 **   *使用apktool*反编译

**   *apktool*将为每个具有相同名称的 java 文件生成 smali（dex 的汇编版本）文件。

    *   smali 是人类可以理解的，在相关文件中进行更改，使用相同的*apktool* ( `apktool b Nw.apk <Folder Containing Modified Files>`)重新编译* 

 ** * *

## 回答 #7

> 赞同：-3
> 
> 时间：2017-05-15T00:54:08.167

这是一种方式：

1.  用于`apktool`解码：

    ```
     $ apktool d -f {apkfile} -o {output folder} 
    ```

2.  接下来，使用 JADX（在 github.com/skylot/jadx）

    ```
     $ jadx -d {output folder} {apkfile} 
    ```

2个工具提取和反编译到相同的输出文件夹。

### 简单的方法：使用在线 APK 反编译器

*   [https://apk.tools/tools/apk-decompiler/](https://apk.tools/tools/apk-decompiler/)（推荐）
*   [http://www.javadecompilers.com/apk](http://www.javadecompilers.com/apk)
*   [https://www.apkdecompilers.com](https://www.apkdecompilers.com)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-03-01T06:18:30.587

我知道这个问题仍然得到回答，我不想在这里变得聪明。我只想分享关于这个主题的另一种方法。

[使用apk grail](https://apkgrail.com/)下载应用程序

APK Grail 提供应用程序的免费 zip 文件。**

# string - 如何用 R 中的字符串替换数据框中的值？

> ID：12370327
> 
> 赞同：8
> 
> 时间：2012-09-11T13:01:03.300
> 
> 标签：string, r, replace, na

简短版本：如何用在另一个数据框中找到的字符串替换数据框中的值？

更长的版本：我是一名生物学家，研究多种蜜蜂。我有一个包含数千只蜜蜂的数据集。每行都有一个唯一的蜜蜂 ID # 以及有关该标本的所有相关信息（捕获数据、GPS 位置等）。没有输入每只蜜蜂的物种信息，因为识别它们需要很长时间。在 IDing 时，我最终得到了一盒数百只蜜蜂，它们都是同一物种。我将这些输入到一个单独的数据框中。我正在尝试编写代码，当我识别蜜蜂时，将使用物种信息（家庭、属、物种、性别等）更新原始数据文件。目前，在原始数据文件中，物种信息是空白的，在 R 中被解释为 NA。我想让 R 找到所有唯一的蜜蜂 ID #'s 并填写物种信息，

这是我正在尝试做的一个简单示例：

```
rawData<-data.frame(beeID=c(1:20),family=rep(NA,20))
speciesInfo<-data.frame(beeID=seq(1,20,3),family=rep("Andrenidae",7))

rawData[rawData$beeID == 4,"family"]  <- speciesInfo[speciesInfo$beeID == 4,"family"] 
```

所以，我要替换我想要的东西，但是用一个数字而不是姓氏（一个字符串）。我最终想做的是编写一个小循环来添加所有物种信息，例如：

```
for (i in speciesInfo$beeID){
  rawData[rawData$beeID == i,"family"]  <- speciesInfo[speciesInfo$beeID == i,"family"]
} 
```

提前感谢您的任何建议！

干杯，

扎克

编辑：

我刚刚注意到下面的前两种方法每次都会添加一个新列，如果我需要多次添加物种信息（我通常会这样做），这会导致问题。例如：

```
rawData<-data.frame(beeID=c(1:20),family=rep(NA,20))
Andrenidae<-data.frame(beeID=seq(1,20,3),family=rep("Andrenidae",7))
Halictidae<-data.frame(beeID=seq(1,20,3)+1,family=rep("Halictidae",7))

# using join
library(plyr)
rawData <- join(rawData, Andrenidae, by = "beeID", type = "left")
rawData <- join(rawData, Halictidae, by = "beeID", type = "left")

# using merge
rawData <- merge(x=rawData,y=Andrenidae,by='beeID',all.x=T,all.y=F)
rawData <- merge(x=rawData,y=Halictidae,by='beeID',all.x=T,all.y=F) 
```

有没有办法折叠列以便我拥有一个统一的数据框？还是一种更新 rawData 而不是每次都添加新列的方法？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:40:06.120

这是我认为对您有用的功能。这用于`match`在注释数据框中查找和索引值，然后替换 rawData 中的值。

```
replaceID <- function(to,from,mergeBy,values){
  x <- match(from[,mergeBy],to[,mergeBy])
  to[,values][x] <- as.character(from[,values])
  return(to)
}
> rawData <- replaceID(rawData,Halictidae,"beeID","family")
> rawData
   beeID     family
1      1       <NA>
2      2 Halictidae
3      3       <NA>
4      4       <NA>
5      5 Halictidae
6      6       <NA>
7      7       <NA>
8      8 Halictidae
9      9       <NA>
10    10       <NA>
11    11 Halictidae
12    12       <NA>
13    13       <NA>
14    14 Halictidae
15    15       <NA>
16    16       <NA>
17    17 Halictidae
18    18       <NA>
19    19       <NA>
20    20 Halictidae 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:18:33.850

另一种选择是`?join`在包装中使用`plyr`

```
 library(plyr)
#Adding family ahead of time was unnecessary so I'll remove it alongside the join.
join(rawData, speciesInfo, by = "beeID", type = "left")[,-2]
   beeID     family
1      1 Andrenidae
2      2       <NA>
3      3       <NA>
4      4 Andrenidae
5      5       <NA>
6      6       <NA>
7      7 Andrenidae
8      8       <NA>
9      9       <NA>
10    10 Andrenidae
11    11       <NA>
12    12       <NA>
13    13 Andrenidae
14    14       <NA>
15    15       <NA>
16    16 Andrenidae
17    17       <NA>
18    18       <NA>
19    19 Andrenidae
20    20       <NA> 
```

# 更新

```
# If you anticipate adding new species over time, 
# simply rbind those into a single reference data.frame to merge with your rawData. 
# Like so:
library(plyr)
rawData <- join(rawData, rbind(Andrenidae, Halictidae), by = "beeID", type = "left")

# To keep you code clean, you could do this step ahead of time
species_list <- rbind(Andrenidae, Halictidae)
rawData <- join(rawData, species_list, by = "beeID", type = "left") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T03:37:04.533

一种`data.table`节省内存和时间的解决方案。

*   请注意，您需要拥有`stringsAsFactors = F`for rbindlist（do.call(rbind,list) / rbind 的超快速版本）
*   我已将另一列作为虚拟数据添加到`rawData`对象并删除了系列。

创建数据 -

```
rawData <- data.frame(beeID = c(1:20), other_stuff = sample(letters, 20), stringsAsFactors = F)
Andrenidae <- data.frame(beeID = seq(1, 20, 3), family = rep("Andrenidae", 7), stringsAsFactors = F)
Halictidae <- data.frame(beeID = seq(1, 20 , 3)+  1, family = rep("Halictidae", 7), stringsAsFactors = F)
library(data.table)
# convert to data.table
rawDT <- as.data.table(rawData)
# combine the list of Species-specific data.frames into a large data.table
speciesInfo <- rbindlist(list(Andrenidae, Halictidae))
# set the keys, to allow efficient use of data.table and its merging 
# abilities. The keys are the same for both 
setkeyv(rawDT, 'beeID')
setkeyv(speciesInfo, 'beeID')
# merge by key 
speciesInfo[rawDT, nomatch = NA]
## beeID     family other_stuff
## 1:     1 Andrenidae           s
## 2:     2 Halictidae           x
## 3:     3         NA           i
## 4:     4 Andrenidae           e
## 5:     5 Halictidae           v
## 6:     6         NA           q
## 7:     7 Andrenidae           w
## 8:     8 Halictidae           c
## 9:     9         NA           u
## 10:    10 Andrenidae           z
## 11:    11 Halictidae           y
## 12:    12         NA           a
## 13:    13 Andrenidae           l
## 14:    14 Halictidae           r
## 15:    15         NA           h
## 16:    16 Andrenidae           o
## 17:    17 Halictidae           n
## 18:    18         NA           g
## 19:    19 Andrenidae           p
## 20:    20 Halictidae           m 
```

或者

```
rawDT[speciesInfo]

##    beeID other_stuff     family
## 1:     1           s Andrenidae
## 2:     2           x Halictidae
## 3:     4           e Andrenidae
## 4:     5           v Halictidae
## 5:     7           w Andrenidae
## 6:     8           c Halictidae
## 7:    10           z Andrenidae
## 8:    11           y Halictidae
## 9:    13           l Andrenidae
## 10:   14           r Halictidae
## 11:   16           o Andrenidae
## 12:   17           n Halictidae
## 13:   19           p Andrenidae
## 14:   20           m Halictidae 
```

哪个是您感兴趣的数据

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T13:14:41.650

您可以使用[合并](http://stat.ethz.ch/R-manual/R-patched/library/base/html/merge.html)功能，例如：

```
rawData <- data.frame(beeID=c(1:20),family=rep(NA,20))
speciesInfo <- data.frame(beeID=seq(1,20,3),
                          family=c(rep('Halictidae',4), rep("Andrenidae",3)))

merged <- merge(x=rawData,y=speciesInfo,by='beeID',all.x=T,all.y=F)
merged$family.x <- NULL # remove the family.x column
names(merged) <- c('beeID','family') # rename the columns 
```

**注意**

不必`rawData`用`family`列进行初始化。
合并功能将自动添加它，例如：

```
rawData <- data.frame(beeID=c(1:20))
speciesInfo <- data.frame(beeID=seq(1,20,3),
                          family=c(rep('Halictidae',4), rep("Andrenidae",3)))

merged <- merge(x=rawData,y=speciesInfo,by='beeID',all.x=T,all.y=F)

> merged
   beeID     family
1      1 Halictidae
2      2       <NA>
3      3       <NA>
4      4 Halictidae
5      5       <NA>
6      6       <NA>
7      7 Halictidae
8      8       <NA>
9      9       <NA>
10    10 Halictidae
11    11       <NA>
12    12       <NA>
13    13 Andrenidae
14    14       <NA>
15    15       <NA>
16    16 Andrenidae
17    17       <NA>
18    18       <NA>
19    19 Andrenidae
20    20       <NA> 
```

# python - 在 Windows 上安装 Eyed3

> ID：12370331
> 
> 赞同：1
> 
> 时间：2012-09-11T13:01:30.997
> 
> 标签：python, windows

有人能告诉我（假设我什么都不知道）如何在 Windows 系统上安装 Eyed3 吗？

我看了又看，但我无法让它工作。我已重命名`setup.py.in`and `__init__.py.in`，并尝试运行 setup.py 文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:00:33.550

我假设您已经按照[本教程](http://jwwishart.blogspot.fr/2011/01/python-eyed3-installation-on-windows.html)进行操作，但不知道如何运行 python 命令；查看[此 python 文档](http://docs.python.org/faq/windows#how-do-i-run-a-python-program-under-windows)以了解如何在 Windows 上调用 Python。

# java - 休眠、多对一和删除

> ID：12370335
> 
> 赞同：3
> 
> 时间：2012-09-11T13:01:36.260
> 
> 标签：java, hibernate, hibernate-onetomany

假设您有一个从 A 类到 B 类的单向一对多关联，如下所示：

```
public class A {
    @OneToMany(cascade = CascadeType.ALL)
    private List<B> myBs;
}

public class B {
    //I know nothing about A
} 
```

在数据库中，这些通过第三个表连接，保留它们的 ID。

现在，我想删除一个连接到 A 的 B 对象。A 有自己的存储库类，B 有自己的存储库类。

在我的项目中以类似设置完成此操作的方式是首先要求有问题的 A 删除有问题的 B，然后告诉`EnitityManager`从数据库中删除 B。

这让我有点卡在两个选择之间，在我看来它们都不是最佳选择：

1.  中的存储库方法`BRepository`处理从其连接的 A 中删除 B 以及通过`EntityManager`. 我不喜欢这样，因为 B 的存储库类将不得不操作 A 对象。

2.  BRepository 中的存储库方法仅处理通过 EntityManager 进行的删除，由调用者将其从 A 的集合中删除。我更不喜欢这个，因为如果有人在没有先从 A 的集合中删除 B 的情况下调用存储库，它将严重失败。

在这两个中，我发现第一个是迄今为止最好的。但是，我真的不认为它是干净的。

Hibernate 中是否有一些构造允许在从数据库中删除时从它所属的任何集合中删除要删除的项目？（试图只删除 B 失败，因为包含它的 A 也加载到同一个事务中，所以它在事务结束时失败，当它试图存储被删除的东西时。）

（在 A 中添加会`mappedBy`解决`@OneToMany-mapping`问题吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:34:39.110

通过使用孤儿删除，我找到了解决此问题的方法。

通过将 A 中的映射更改为：

```
public class A {
   @OneToMany(cascade = CascadeType.ALL)
   @Cascade(org.hibernate.annotations.CascadeType.DELETE_ORPHAN)
   private List<B> myBs;
} 
```

我只能说

```
a.getMyBs().remove(b); 
```

并在持久化后被`b`删除。`a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:34:55.583

跳出 Hibernate 思维模式，问问自己：谁拥有`B`s？

业主最终要对他们的财产负责。通常，当 a 不能没有 a 并且每个都由一个完全拥有时，这`B`是`A`正确`B`的`A`。

所以如果`A`s拥有`B`s，`ARepository`则负责清理`B`s。我会创建一个方法来`ARepository`进行清理并在`BRepository`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:41:53.427

如果您确实希望将存储库分开，则另一个选项是在顶部创建一个服务类，该服务类知道两者，并将以与您的选项 1 方法类似的方式为您处理删除。

> （在 A 中的 @OneToMany-mapping 上添加 mappedBy 会解决问题吗？）

我认为这取决于他的存储库实现。对于 JPA EntityManager，如果会话关闭，A 将在您删除 B 时分离，即使它是双向映射也是如此。

# java - 是否可以配置 Dozer，以便默认情况下通过 setter-/getter 方法直接访问字段

> ID：12370339
> 
> 赞同：11
> 
> 时间：2012-09-11T13:01:43.473
> 
> 标签：java, mapping, dozer

我必须映射一个复杂的 Java 类结构，它们通常不会通过 set-/get-methods 公开它们的字段（这是给定的，不能更改）。所以映射只能在直接字段访问上执行。Dozer 允许访问各个字段，但我还没有找到一个设置来使其成为一般行为。因此，我不必为了使其可访问而明确地映射每个字段！

这个选项存在吗？- 在课堂上？- 在全球范围内？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:06:03.923

您可以在班级级别上进行设置。

```
<mapping>
   <class-a is-accessible="true">MyClass</class-a>
   ...
</mapping> 
```

来自推土机 XSD：

> is-accessible 表示Dozer是否绕过getter/setter方法直接访问字段。这通常设置为“假”。默认值为“假”。如果设置为“true”，则不会调用 getter/setter 方法。如果字段缺少 getter 或 setter 方法，您可能希望将其设置为“true”。

# javascript - jQuery函数来检查背景页面是否已完全加载？

> ID：12370340
> 
> 赞同：2
> 
> 时间：2012-09-11T13:01:43.280
> 
> 标签：javascript, jquery, html, ajax

我想知道是否可以使用该`$().ready`功能来测试另一个页面是否已完全加载。

这里我说的是新闻提要更新程序，该函数将向`POST`后台 php 页面发送请求以更新数据库，然后使用 ajax 重新加载新闻提要以获取新数据。

```
function send_data(){
    var head = $("#headline").val();
    var news = $("#news").val();
    var info = '&headline='+head+'&news='+news; //update string
    $.ajax({
        url: 'recieve_update.php', //updating php file
        type: 'POST',
        data: info                 //data string
    }); 

    $().ready(function() {
        $("#newsfeed").load("load_news.php"); //reload the newsfeed viewer
    }); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:04:28.457

使用回调函数`$.ajax()`：

```
$.ajax({
     url: 'recieve_update.php', //updating php file
     type: 'POST',
     data: info,                 //data string
     success: function(){
        $("#newsfeed").load("load_news.php"); //reload the newsfeed viewer
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:03:18.853

我相信只有这些线条才是你想要的。直接来自 jQuery 源代码。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
  $(this).addClass("done");
}); 
```

# python - 从另一个文本文件中搜索一个文件中列出的字符串？

> ID：12370342
> 
> 赞同：1
> 
> 时间：2012-09-11T13:01:48.233
> 
> 标签：python

我想在另一个文本文件中查找 list.txt 中列出的字符串（每行一个字符串），以防我发现它打印 'string,one_sentence' 以防万一没有找到 'string,another_sentence'。我正在使用以下代码，但它只从文件 list.txt 中找到字符串列表中的最后一个字符串。无法理解可能是什么原因？

```
data = open('c:/tmp/textfile.TXT').read()
for x in open('c:/tmp/list.txt').readlines():
    if x in data:
        print(x,',one_sentence')
    else:
        print(x,',another_sentence') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:08:08.687

当您使用 读取文件时`readlines()`，生成的列表元素确实有一个尾随换行符。很可能，这就是您的匹配项少于预期的原因。

而不是写

```
for x in list: 
```

写

```
for x in (s.strip() for s in list): 
```

这会从`list`. 因此，它会从字符串中删除尾随的换行符。

为了巩固您的程序，您可以执行以下操作：

```
with open('c:/tmp/textfile.TXT') as f:
    haystack = f.read()

if not haystack:
    sys.exit("Could not read haystack data :-(")

with open('c:/tmp/list.txt') as f:
    for needle in (line.strip() for line in f):
        if needle in haystack:
            print(needle, ',one_sentence')
        else:
            print(needle, ',another_sentence') 
```

我不想做太剧烈的改变。最重要的区别是我在这里通过`with`语句使用上下文管理器。它确保为您正确处理文件（主要是关闭）。此外，使用生成器表达式动态剥离“针”线。上述方法是逐行读取和处理针文件，而不是一次将整个文件加载到内存中。当然，这只对大文件有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:16:22.420

readlines() 在从列表文件读取的每个字符串的末尾保留一个换行符。在这些字符串上调用 strip() 以删除那些（以及所有其他空格）字符。

# python - 在不使用迭代的情况下推理连续数据点

> ID：12370349
> 
> 赞同：4
> 
> 时间：2012-09-11T13:02:00.857
> 
> 标签：python, numpy, pandas, spc

我正在使用[numpy](http://numpy.scipy.org/) / [pandas进行](http://pandas.pydata.org/)[SPC](http://en.wikipedia.org/wiki/Statistical_process_control)分析。

其中一部分是根据[Nelson 规则](http://en.wikipedia.org/wiki/Nelson_rules)和[Western Electric 规则](http://en.wikipedia.org/wiki/Western_Electric_rules)检查数据系列。

例如（尼尔森规则中的规则 2）：检查连续九个（或更多）点是否在均值的同一侧。

现在我可以通过遍历数组来简单地检查这样的规则。

*   但在我这样做之前，我在这里检查一下，如果 numpy/pandas 有办法在不迭代的情况下做到这一点？
*   无论如何：实现上述检查的“numpy-ic”方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:27:44.277

```
import numpy as np
x = np.random.rand(100)
f = np.sign(x - x.mean())
c = np.cumsum(f)
d = c[9:] - c[:-9]
print np.max(d), np.min(d) 
```

如果 np.max(d) == 9 或 np.min(d) == -9 则连续有九个（或更多）点位于均值的同一侧。

或者您可以使用以下代码来计算每一行的长度：

```
np.diff(np.where(np.diff(np.r_[-2,f,-2]))[0]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:14:27.627

给定`data`和 minimum `length`，您可以检查数组是否

```
np.diff(np.cumsum(np.sign(data - np.mean(data))), length) 
```

包含零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:37:46.313

另一种可能性：使用相关或卷积

```
>>> a = np.random.randn(50)
>>> b = (a - a.mean()) > 0
>>> b.astype(int)
array([0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0,
       1, 1, 1, 1])

>>> c = np.correlate(b, np.ones(3), mode='valid')
>>> c
array([ 2.,  2.,  1.,  1.,  1.,  1.,  0.,  0.,  1.,  2.,  3.,  2.,  2.,
        1.,  1.,  0.,  0.,  1.,  2.,  3.,  3.,  3.,  3.,  3.,  2.,  2.,
        2.,  2.,  2.,  1.,  1.,  1.,  1.,  2.,  1.,  2.,  2.,  2.,  1.,
        0.,  0.,  1.,  2.,  2.,  2.,  2.,  3.,  3.])

>>> c.max() == 3
True
>>> c.min() == 0
True 
```

它会比 HYRY cumsum 版本慢。

旁白：在 statsmodels 中有一个用于测试类似运行的运行测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T23:58:19.973

正如我在评论中提到的，您可能想尝试使用一些跨步技巧。

*   首先，让我们创建一个异常大小的数组：我们可以把它当作`np.int8`节省一些空间

    ```
    anomalies = x - x.mean()
    signs = np.sign(anomalies).astype(np.int8) 
    ```

*   现在大步前进。如果要考虑`N`连续点，您将使用

    ```
    from np.lib.stride_tricks import as_strided
    strided = as_strided(signs, 
                         strides=(signs.itemsize,signs.itemsize), 
                         shape=(signs.shape,N)) 
    ```

    这给了我们一个`(x.size, N)`rollin 数组：第一行是`x[0:N]`，第二行`x[1:N+1]`……当然，最后`N-1`一行是没有意义的，所以从现在开始我们将使用

    ```
    strided = strided[:-N+1] 
    ```

*   让我们沿行求和

    ```
    consecutives = strided.sum(axis=-1) 
    ```

    这给了我们一个介于和`(x.size-N+1)`之间的值大小的数组：我们只需要找到绝对值在哪里：`-N``+N``N`

    ```
    (indices,) = np.nonzero(consecutives == N) 
    ```

    `indices`是数组的索引`i`数组`x`，其值`x[i:i+N]`位于均值的同一侧...

`x=np.random.rand(10)`带有和的示例`N=3`

```
>>> x = array([ 0.57016436,  0.79360943,  0.89535982,  0.83632245,  0.31046202,
            0.91398363,  0.62358298,  0.72148491,  0.99311681,  0.94852957])
>>> signs = np.sign(x-x.mean()).astype(np.int8)
array([-1,  1,  1,  1, -1,  1, -1, -1,  1,  1], dtype=int8)
>>> strided = as_strided(signs,strides=(1,1),shape=(signs.size,3))
array([[  -1,    1,    1],
       [   1,    1,    1],
       [   1,    1,   -1],
       [   1,   -1,    1],
       [  -1,    1,   -1],
       [   1,   -1,   -1],
       [  -1,   -1,    1],
       [  -1,    1,    1],
       [   1,    1, -106],
       [   1, -106,  -44]], dtype=int8)
>>> consecutive=strided[:-N+1].sum(axis=-1)
array([ 1,  3,  1,  1, -1, -1, -1,  1])
>>> np.nonzero(np.abs(consecutive)==N)
(array([1]),) 
```

# java - 设置 Java SSL ServerSocket 使用的证书

> ID：12370351
> 
> 赞同：13
> 
> 时间：2012-09-11T13:02:05.480
> 
> 标签：java, ssl

我想在 Java 服务器应用程序中打开一个安全的侦听套接字。我知道推荐的方法就是这样做：

```
SSLServerSocketFactory ssf = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();
ServerSocket ss = ssf.createServerSocket(443); 
```

但这需要在启动 java 时将服务器的证书传递给 JVM。因为这会使部署中的某些事情对我来说更加复杂，所以我更愿意在运行时加载证书。

所以我有一个密钥文件和一个密码，我想要一个服务器套接字。我如何到达那里？好吧，我阅读了文档，我能找到的唯一方法是：

```
// these are my parameters for SSL encryption
char[] keyPassword =  "P@ssw0rd!".toCharArray();
FileInputStream keyFile = new FileInputStream("ssl.key"); 

// init keystore
KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
keyStore.load(keyFile, keyPassword);
// init KeyManagerFactory
KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
keyManagerFactory.init(keyStore, keyPassword);
// init KeyManager
KeyManager keyManagers[] = keyManagerFactory.getKeyManagers();
// init the SSL context
SSLContext sslContext = SSLContext.getDefault();
sslContext.init(keyManagers, null, new SecureRandom());
// get the socket factory
SSLServerSocketFactory socketFactory = sslContext.getServerSocketFactory();

// and finally, get the socket
ServerSocket serverSocket = socketFactory.createServerSocket(443); 
```

这甚至没有任何错误处理。真的有那么复杂吗？没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T23:31:57.047

> 但这需要在启动 java 时将服务器的证书传递给 JVM。

不，它没有。只需在创建之前设置这些系统属性`SSLServerSocket:`

```
javax.net.ssl.keyStore ssl.key
javax.net.ssl.keyStorePassword P@ssw0rd! 
```

您可以使用`System.setProperties()` *或*在命令行上执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:15:14.377

如果你看一下代码，你就会明白为什么它一定很复杂。此代码将 SSL 协议的实现从以下方面解耦：

*   您的密钥材料的来源 ( `KeyStore`)
*   证书算法选择和密钥管理 ( `KeyManager`)
*   对等信任规则的管理 ( `TrustManager`) - 此处未使用
*   安全随机算法 ( `SecureRandom`)
*   NIO 或套接字实现 ( `SSLServerSocketFactory`) - 可`SSLEngine`用于 NIO

考虑一下如果您尝试实现相同的目标，您自己的实现会是什么样子！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-17T14:20:34.650

用这个。

```
public class KeyMaster
{
     public static SSLSocketFactory getSSLSocketFactory(KeyStore trustKey, String sslAlgorithm)
{
    try
    {
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(trustKey);

        SSLContext context = SSLContext.getInstance(sslAlgorithm);//"SSL" "TLS"
        context.init(null, tmf.getTrustManagers(), null);

        return context.getSocketFactory();
    }
    catch(Exception e)
    {
        Assistance.log("Err: getSSLSocketFactory(), ");
    }

    return null;
}

public static SSLServerSocketFactory getSSLServerSocketFactory(KeyStore trustKey, String sslAlgorithm)
{
    try
    {
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(trustKey);

        SSLContext context = SSLContext.getInstance(sslAlgorithm);//"SSL" "TLS"
        context.init(null, tmf.getTrustManagers(), null);

        return context.getServerSocketFactory();
    }
    catch(Exception e)
    {
        Assistance.log("Err: getSSLSocketFactory(), ");
    }

    return null;
}

public static SSLServerSocket getSSLServerSocket(SSLServerSocketFactory socketFactory, int port)
{
    try
    {
        return (SSLServerSocket) socketFactory.createServerSocket(port);
    }
    catch(Exception e)
    {Assistance.log("Err: getSSLSocket(), ");}

    return null;
}

public static KeyStore getFromPath(String path, String algorithm, String filePassword)//PKSC12
{
    try
    {
        File f = new File(path);

        if(!f.exists())
            throw new RuntimeException("Err: File not found.");

        FileInputStream keyFile = new FileInputStream(f);
        KeyStore keystore = KeyStore.getInstance(algorithm);
        keystore.load(keyFile, filePassword.toCharArray());
        keyFile.close();

        return keystore;
    }
    catch(Exception e)
    {
        Assistance.log("Err: getFromPath(), " + e.toString());
    }

    return null;
} 
```

主要是。

```
 KeyStore key = KeyMaster.getFromPath(".\\cssl.pfx", "PKCS12", "123");
        SSLServerSocketFactory fac = KeyMaster.getSSLServerSocketFactory(key, "TLS");
        listener = KeyMaster.getSSLServerSocket(fac, 49015); 
```

# xml - XPath：默认为“节点 A”，如果“节点 B”不为空，则选择“节点 B”

> ID：12370362
> 
> 赞同：12
> 
> 时间：2012-09-11T13:02:36.807
> 
> 标签：xml, xpath, if-statement, infopath

我需要创建一个执行以下操作的 XPath 表达式：

*   默认返回 'NodeA' 内部的元素
*   如果它不为空，则返回 'NodeB' 内部的元素。

这是一些示例 XML，以便可以清楚地看到我的目标结构（我使用的是 MS InfoPath）：

```
<?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.10" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\9016384cab6148f6\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.3"?>
<my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-09-07T14:19:10" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">
<my:NodeASection>
    <my:NodeA>2012-09-13</my:NodeA>
</my:NodeASection>
    <my:NodeBSection>
        <my:NodeBGroup>
            <my:NodeB>2012-09-14</my:NodeB>
        </my:NodeBGroup>
    </my:NodeBSection>
</my:myFields> 
```

此 XPath 表达式可用于评估 NodeB 是否存在文本：`boolean(//my:NodeB[(text())])`

我听说过“贝克尔方法”，但我不确定当两个节点都存在时它是如何应用的。我是XPath 的新手，*非常*感谢可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T13:11:43.347

如果 NodeB 存在（并且具有文本内容），则此 XPath 表达式返回 NodeB，在其他情况下返回 NodeA：

```
//my:NodeB[text()] | //my:NodeA[text() and not(//my:NodeB[text()])] 
```

如果要获取所有子元素，可以`/*`在所选节点之后追加，如下所示

```
//my:NodeB[text()]/* | //my:NodeA[text() and not(//my:NodeB[text()])]/* 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T12:42:31.527

**正确的 XPath 表达式是**：

```
(//my:NodeB[node()] | //my:NodeA[not(//my:NodeB/node())])/node() 
```

由于谓词中的条件是互斥的，因此只能是其中一个，`true()`这保证了括号内的表达式只能选择两个节点中的一个。

因此，上面的表达式选择任何一个子节点：`my:NodeB`如果它有子节点，或者`my:NodeA`-- 否则。

这里我们假设XML文档`my:NodeA`中最多存在一个named元素和一个named元素。`my:NodeB`

另一个假设是前缀`my`绑定到的名称空间已经使用 XPath 表达式求值器（您正在使用的特定 XPath 实现）“注册”。

**请注意**，在提供的 XML 文档中，既没有元素`my:NodeA`也`my:NodeB`没有任何子元素（它们都只有一个文本节点子节点）——所以我假设“元素”实际上是指“节点”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:29:07.203

如果可以安全地依赖任何 NodeA 将按文档顺序排在 NodeB 之前的事实（如您的示例所暗示的那样），那么选择所需元素的更简单且更有效的 XPATH 表达式是......

```
(//my:NodeA[text()]|//my:NodeB)[1] 
```

以上选择元素。如果要选择元素的文本节点，请改用...

```
(//my:NodeA[text()]|//my:NodeB)[1]/text() 
```

* * *

如果 NodeA 和 NodeB 之间没有位置关系（它们可以以任何相对顺序出现），并且您使用的是 XPATH 2.0，那么以下表达式将选择所需的文本节点。

```
(//my:NodeA[text()],//my:NodeB)[1]/text() 
```

# tinymce - TinyMCE（或 JCE） - 如何获取当前节点名称和 html 内容

> ID：12370363
> 
> 赞同：5
> 
> 时间：2012-09-11T13:02:46.800
> 
> 标签：tinymce

我正在尝试检查光标/选择位于哪个节点。

我想得到

*   节点名称
*   节点内的html

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T13:02:46.800

可以使用以下方式访问该节点：

```
tinyMCE.activeEditor.selection.getNode() 
```

并且有 2 个属性将返回所需的值：*nodeName*和*innerHTML*

```
tinyMCE.activeEditor.selection.getNode().nodeName

tinyMCE.activeEditor.selection.getNode().innerHTML 
```

# c# - 为什么二进制数据写入的结果是字符串？

> ID：12370367
> 
> 赞同：2
> 
> 时间：2012-09-11T13:02:55.923
> 
> 标签：c#

我想创建一个二进制文件并在其中存储字符串数据，我使用了这个示例：

```
FileStream fs = new FileStream("c:\\test.data", FileMode.Create);
BinaryWriter bw = new BinaryWriter(fs);
bw.Write(Encoding.ASCII.GetBytes("david stein"));
bw.Close(); 
```

但是当我在记事本中打开这个样本（test.data）创建的文件时，它里面有字符串数据（“david stein”），现在我的问题是当结果是字符串时这个二进制写入和文本写入有什么区别?

我正在寻找在二进制文件中创建数据，直到用户无法通过记事本打开和读取我的数据，如果用户在记事本中打开它会看到真正的二进制数据。

在某些文件中，当您在文本编辑器中打开主题时，您无法读取 jpg 文件内容等文件内容，它们不使用任何加密方法，那又如何？我怎么能这样写我的数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:06:33.627

> 现在我的问题是，当结果是字符串时，这种二进制写入和文本写入有什么区别？

文件中的数据始终是“字节序列”。在这种情况下，您编写的字节序列是 ASCII 编码中的“代表文本 'david stein' 的字节”。所以是的，如果您在任何试图以与 ASCII 兼容的方式将字节*解释*为文本的编辑器中打开文件，您将看到文本“david stein”。实际上，这只是一堆字节-这完全取决于您如何解释它们。

如果你写：

```
File.WriteAllText("c:\\test.data", "david stein", Encoding.ASCII); 
```

你最终会得到完全相同的字节序列。您可以通过多种方式创建具有相同字节的文件。没有关于`File.WriteAllText`将文件“标记”为文本的任何内容，也没有关于`FileStream`或`BinaryWriter`将文件标记为二进制文件的任何内容。

编辑：来自评论：

> 我正在寻找在二进制文件中创建数据，直到用户无法通过记事本打开和读取我的数据

好吧，有很多方法可以在不同的安全级别下做到这一点。理想情况下，您需要某种加密 - 但是*读取*数据的代码也需要能够解密它，这意味着它需要能够获得密钥。然后将问题转移到“我如何存储密钥”。

如果您只需要*验证*文件中的数据（例如检查它是否与其他地方的内容匹配），那么您可以使用[加密哈希](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。

如果您只需要防止最随意的窥探者，您可以使用基本上只是混淆的东西 - 一种非常弱的加密形式，没有“密钥”本身。在这种情况下，任何对您的代码进行编译的人都可以轻松获取数据，但您可能不太关心这一点。

这一切都取决于您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:07:35.833

所有数据都是二进制的。文本文件是二进制数据，恰好是代表有效字符的有限子集，但它仍然是二进制的。

文本编辑器通常区分文本文件和二进制文件的方式是他们扫描文件的某个部分以查找零值，`\0`. 这些从不存在于纯文本文件中，几乎总是存在于二进制文件中。

# google-analytics - 使用 Google Analytics 在自定义报告中按主机名过滤转化跟踪数据

> ID：12370370
> 
> 赞同：2
> 
> 时间：2012-09-11T13:03:01.883
> 
> 标签：google-analytics

对于在多个主机名上运行相同应用程序的网站，其中主机名应用给定的皮肤和内容过滤器，是否可以在 Google Analytics 中创建自定义报告以返回给定主机名的转化率？

我试图创建一个自定义报告，为我们的业务提供每月 KPI。可在此处获得：

[https://www.google.com/analytics/web/permalink?uid=1_pkuO13RYmVBd8tlRkr6w](https://www.google.com/analytics/web/permalink?uid=1_pkuO13RYmVBd8tlRkr6w)

当我知道输入的主机名具有转换率数据时（实际上可以通过在标准报告中使用“细分”来查看），该报告的工作原理非常完美，除了“电子商务转换率”保持在 0.00% 之外。

为了对此进行测试，您需要编辑报告并将过滤器主机名替换为您自己的主机名。

有没有人在自定义报告中无法按主机名过滤电子商务数据的类似经历？如果是这样，是否有任何解决方法或修复？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:30:45.453

值得注意的是，我通过我的 AdWords 帐户联系了 Google 的支持，并在第二天得到了回复！

> 谢谢你的电邮。我了解到您正在尝试创建一个自定义报告，该报告显示电子商务转换并按主机名过滤。正如您所提到的，目前这仅在标准报告下的高级部分下才有可能。由于报告在自定义报告和标准报告中的创建方式不同，不幸的是，目前您正在寻找的内容无法通过自定义报告实现。
> 
> 但是，我已将您的反馈转发给我们的产品专家，并请他们考虑。但很抱歉，目前由于此产品限制，您需要在标准报告下查看此报告。

# ios - 扩展 DrawingView 框架在 iOS 中存在一些问题

> ID：12370371
> 
> 赞同：0
> 
> 时间：2012-09-11T13:03:02.567
> 
> 标签：ios, drawing, core-graphics

我正在 iphone 中实现绘图，并且我的绘图工作完美，我为用户提供了一个尺寸 (315x95) 的绘图视图，在这个绘图视图下面是一个尺寸 (320x100) 的图像。这是用户看到的默认视图，他只能在该视图中绘制。

现在我所做的是在 drawingView 的一个角落提供了一个按钮，因此，如果用户想在此扩展视图的底部再​​次编写更多内容，则单击该按钮可以增加绘图视图，以减少看它原来的位置。

现在，我的问题是

1）当我以默认大小绘制并单击按钮进行扩展时，绘制的图像被拉伸到扩展帧，这是我不想要的，因为我正在创建额外的空间供向右使用，所以拉伸没有用

2）当我扩展drawingView并在底部绘制一些东西，然后单击按钮减小视图时，底部绘制的部分仍然只保留在底部并且是可见的。实际上它应该在drawingView框架时隐藏减少并且应该在增加drawingView框架时看到。

所以朋友们，我该如何解决这个问题，请帮助我

问候兰吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:39:34.873

数字 1 听起来像是内容模式问题，但数字 2 是您的视图未正确裁剪其子视图（或图层未裁剪到其边界）的结果。有类似的属性`clipsToBounds`会`clipsSubviews`派上用场。

# php - 通过 ajax 发送到 php/sql 时无法存储 HTML

> ID：12370374
> 
> 赞同：0
> 
> 时间：2012-09-11T13:03:11.133
> 
> 标签：php, javascript, jquery, sql, ajax

我想在按下按钮时存储一些 div 内容。我需要/想要保存 html 标签以便重用。

当我用任何类型的字符串替换 post 变量时，它可以完美地工作。我尝试从换行符中清除 html 变量，但它没有这样做，还尝试将 $HTML 帖子放入 a 中`$var = <<<HTML HTML`，但这也不起作用。

这是javascript：

```
$("#save").click(function(){
var pageHTML = $("#page_wrap").html();
var name_page = "name";
jQuery.ajax({
  type: "POST",
  url: "php/saveModel.php",
  data: {   nHTML: pageHTML,
            page : name_page
        },
    success:function(data){
      var responseData = jQuery.parseJSON(data);
      var new_div = responseData.message;
      $("#page_wrap > *").remove();
      $("#page_wrap").prepend(new_div);
      $('.editable').aloha();
    }
})
}) 
```

这是 php ：

```
<?php

mysql_connect('localhost','name','pwd');  
mysql_select_db('db');
mysql_query("SET NAMES 'utf8'");

$id = $_POST['page'];
$HTMLpost = $_POST['nHTML'];

$insertSignup = mysql_query("UPDATE Table_name SET model_test='$HTMLpost' WHERE    identifiant='$id'");

if($insertSignup){ 
$status = "success";
$message = "OK";
}
else {
$status = "error";
$message = "NOT OK";
}

//return json response
$data = array(
    'status' => $status,
    'message' => $message
);

echo json_encode($data);
exit;
?> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:07:33.377

简单的答案：用于`mysql_real_escape_string()`更改引号以使其安全地进入数据库。

```
$HTMLpost = mysql_real_escape_string($_POST['nHTML']);
$insertSignup = mysql_query("UPDATE Table_name SET model_test='$HTMLpost' WHERE    identifiant='$id'"); 
```

更长的答案：您不应该使用 mysql_() 函数，因为它们正在折旧。改为使用 PDO 或 mysqli 查看准备好的语句——它们会为您安全地处理这个问题（并且它们不会被贬值）。

阅读： http: [//php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)或谷歌了解更多 - 周围有很多例子。当 mysql_() 函数确实被删除时，最好在你被刺痛之前立即学习。

# algorithm - n元组的扁平排列（宽度优先）

> ID：12370379
> 
> 赞同：3
> 
> 时间：2012-09-11T13:03:24.003
> 
> 标签：algorithm, permutation

我想枚举一个 n 元组。例如对于 n=2：

```
00 01 10 11
02 20 12 21 22
03 30 13 31 23 32 33
04 40 14 41 ... 
```

n=3 会这样开始：

```
000 001 010 100 011 101 110 111
002 020 200 012 102 021 120 201 210 112 121 211 122 212 221 222
003 ... 
```

具有相同元素的元组的顺序并不重要（例如 001 和 010），但具有更多（011 对 001）或更重要的更大（002 对 001）元素的元组应该总是在后面出现。

经过一番搜索，似乎有很多相关的算法，但没有一个专门针对这种情况。有这样的算法吗？

编辑： n=2 案例的图像。绿线表示通过打乱元组中元素的顺序到达的元素。

![在此处输入图像描述](../Images/fff8d80d0a08a3d5488ed8ff66b39d5b.png)

编辑：关于订单的说明：

1.  元组主要按其最大元素排序 (152 > 444)
2.  然后按它们的第二大元素排序 (053 > 252) 依此类推 (12341 > 12340)
3.  具有相同元素的元组之间的顺序是任意的 (123 = 321)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:15:19.483

让每个条目`seq(n, k)`产生您想要的`k`数字序列，数字从`0`到`n`。

让 step`i`是生成最大位数为 的所有元组的阶段`i`。

在每一步，我们简单地生成`i+1`所有数字的 -ary 表示`(i+1) ** (k - 1) - 1`（即最多`k-1`位数）。对于每个-ary 表示，然后我们通过在-ary 表示中的每个位置`i+1`插入数字来生成序列的元素。`i``i+1`

为了避免重复，我们会在遇到`i`已经存在于`i+1`-ary 表示中的情况下提前中断。

这是python中的（丑陋！）示例实现：

```
def to_nary_string(num, n):
    if num == 0:
        return "0"

    result = ""
    while num != 0:
        result = str(num % n) + result
        num /= n

    return result

def seq(n, k):
    print "0" * k

    for i in range(2, n+2):
        for x in range(i**(k-1)):
            stem = to_nary_string(x, i).zfill(k-1)
            c = str(i-1)
            for j in range(k):
                print stem[:j] + c + stem[j:],               
                if j != k-1 and stem[j] == c:
                    break
        print 
```

**编辑：**这个问题是`k-1`数字字符串必须与元组的顺序相同，而不是顺序`n`-ary 顺序。稍微改变函数会得到想要的结果：

```
# Original list and string version
def seq(n, k):
    if (k == 0):
        return [""]

    result = []

    for i in range(n+1):
        c = str(hex(i))[2:] # 10 -> a, 11-> b, etc.

        for subseq in seq(i, k-1):
            for j in range(k):
                result.append(subseq[:j] + c + subseq[j:])
                if j != k-1 and subseq[j] == c:
                    break

    return result 
```

另外，感谢 Claudiu，这里有一个生成器和元组版本

```
# Generator and tuple version
#
# Thanks Claudiu!

def seq(n, k):
    if (k == 0):
        yield ()
        return

    for i in range(n+1):
        for subseq in seq(i, k-1):
            for j in range(k):
                yield subseq[:j] + (i,) + subseq[j:]
                if j != k-1 and subseq[j] == i:
                    break 
```

结果（为清楚起见添加了换行符）：

```
>>> for x in seq(4, 2):
    print x,

00
10 01 11
20 02 21 12 22
30 03 31 13 32 23 33
40 04 41 14 42 24 43 34 44

>>> for x in seq(3, 3):
    print x,

000
100 010 001
110 101 011
111
200 020 002
210 120 102 201 021 012
211 121 112
220 202 022
221 212 122
222
300 030 003
310 130 103 301 031 013
311 131 113
320 230 203 302 032 023
321 231 213 312 132 123
322 232 223
330 303 033
331 313 133
332 323 233
333 
```

并进行快速的健全性检查：

```
>>> len(seq(12, 4)) == 13 ** 4
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:23:00.573

编辑：您的编辑使此订购无效。留在这里留给后人。

这是我用英语实现的算法。基本上，为了获得您想要的排序，将问题视为“生成具有至少一个给定最大元素的所有 n 元组”。假设我们有这个，我们所要做的就是：

```
- yield `n` zeroes
- for each element greater than zero:
  - yield all the n-tuples with at least one of that element 
```

为了生成具有至少一个给定最大元素的所有 n 元组，我生成了该元素可能位于的所有可能位置 - 例如，对于 3 元组，这些位置将是

```
no  no  yes
no  yes no
no  yes yes
yes no  no
yes no  yes
yes yes no 
yes yes yes 
```

`n`这只是（是，否）选择的笛卡尔积。对于每个可能的位置，我们填写所有可能`no`的 s。什么可以进入`no`s？任何小于最大元素的元素。所以要做到这一点，你需要所有小于最大值（包括零）的元素的笛卡尔积，`x`乘以s`x`的数量`no`，并填写这些空白。因此，如果您有最大的 el`3`并且位置是，`no no yes`那么您可以这样做：

```
0 0 3
0 1 3
0 2 3
1 0 3
1 1 3
1 2 3
2 0 3
2 1 3
2 2 3 
```

这是该算法的python实现：

```
import itertools
alphabet = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
def enumerate_n_tuples(n):
    #the zero case:
    yield [alphabet[0],]*n
    for i in xrange(1, len(alphabet)):
        #alphabet[i] is the largest element
        #it must be present in the result
        largest_el = alphabet[i]
        #fill in the largest element in all possible combinations
        for largest_el_map in itertools.product(*([(False,True)]*n)):
            #other spots are filled freely up to (not including) largest
            num_others = sum(1 for largest in largest_el_map
                             if not largest)
            if num_others == n: continue #need at least one largest el
            for others in itertools.product(*([alphabet[:i]]*num_others)):
                #init the result to zeroes
                res = [alphabet[0]]*n
                #fill in the largest elements, putting the other
                #elements in between
                others_i = 0
                for j,largest in enumerate(largest_el_map):
                    if largest:
                        res[j] = largest_el
                    else:
                        res[j] = others[others_i]
                        others_i += 1
                yield res 
```

例子：

```
>>> for threetup in enumerate_n_tuples(3):
        print threetup
        if threetup[-1]==3: break

[0, 0, 0]
[0, 0, 1]
[0, 1, 0]
[0, 1, 1]
[1, 0, 0]
[1, 0, 1]
[1, 1, 0]
[1, 1, 1]
[0, 0, 2]
[0, 1, 2]
[1, 0, 2]
[1, 1, 2]
[0, 2, 0]
[0, 2, 1]
[1, 2, 0]
[1, 2, 1]
[0, 2, 2]
[1, 2, 2]
[2, 0, 0]
[2, 0, 1]
[2, 1, 0]
[2, 1, 1]
[2, 0, 2]
[2, 1, 2]
[2, 2, 0]
[2, 2, 1]
[2, 2, 2]
[0, 0, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:36:11.650

好的，鉴于您`n`最多为 4 并且您只有 13 个元素，这确实是最好的方法：

```
import itertools

alphabet = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]

def tup_sort_key(t):
    largest_el = max(t)
    z = list(t)
    z.sort(reverse=True)
    return tuple(z)

def gen_all_n_tuples(n):
    all_els = list(itertools.product(*([alphabet]*n)))
    all_els.sort(key=tup_sort_key)
    return all_els 
```

简要说明：生成所有可能的元组，并简单地应用您想要的排序顺序（最大元素、第二大元素、第三大元素等）。对于 n=4，这需要不到 0.2 秒。

结果：

```
>>> print "\n".join(map(str, gen_all_n_tuples(3)))
(0, 0, 0)
(0, 0, 1)
(0, 1, 0)
(1, 0, 0)
(0, 1, 1)
(1, 0, 1)
(1, 1, 0)
(1, 1, 1)
(0, 0, 2)
(0, 2, 0)
(2, 0, 0)
(0, 1, 2)
(0, 2, 1)
(1, 0, 2)
(1, 2, 0)
(2, 0, 1)
(2, 1, 0)
(1, 1, 2)
(1, 2, 1)
(2, 1, 1)
(0, 2, 2)
(2, 0, 2)
(2, 2, 0)
(1, 2, 2)
(2, 1, 2)
(2, 2, 1)
(2, 2, 2)
(0, 0, 3)
(0, 3, 0)
(3, 0, 0)
(0, 1, 3)
(0, 3, 1)
(1, 0, 3)
(1, 3, 0)
(3, 0, 1)
(3, 1, 0)
(1, 1, 3)
(1, 3, 1)
(3, 1, 1)
(0, 2, 3)
(0, 3, 2)
etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:39:00.040

```
This algorithm generates the next element that satisfies your constraints.

generateNext(int a[1:m]) {
  Let n be the largest number in a.
  IF a[i] == n  for all i: {     // e.g. If a = 111
     set a[1] = n+1 and a[j] = 0 for all j in 2 to m.
     return
  }
  ELSE {
     Let p be the last position where n appears.
     IF a[i] == n for all i to the left of p {         // trivially true when p is 1.
         set a[i] = 0 for all i to the left of p.
        IF a[i] == n-1 for all i to the right of p {  // trivially true when p is m.
           set a[i] = 0 for all i to the right of p.
           set a[p-1] = n
        } 
        ELSE {
           generateNext(a[p+1:m])
           seta[i] = 0 for all i to the left of p
        }        
     }
     ELSE 
       generateNext(a[1:p-1])
  }
} 
```

当使用 002 调用时，算法返回的数字序列应为：002 012 102 112 022 122 202 212 222 020 120 220 021 121 221 200 201 210 211

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T09:39:09.117

作为参考，veredesmarald 对 Claudiu 的 C# 实现的回答的一个端口。Python 的数组肯定更简洁。

```
public IEnumerable<List<int>> Enumerate (int n, int k)
{
    if (k == 0) {
        yield return new List<int> ();
        yield break;
    }

    yield return Enumerable.Repeat (0, k).ToList ();

    for (int i = 1; i <= n; i++) {
        foreach (var x in Enumerate (i, k - 1)) {
            for (int j = 0; j < k; j++) {
                var res = x.Take (j).Concat (new int[] { i }).Concat (x.Skip (j));
                yield return res.ToList ();
                if (j != k - 1 && x[j] == i) {
                    break;
                }
            }
        }
    }
}

public IEnumerable<List<int>> Enumerate (int k)
{
    return Enumerate (int.MaxValue, k);
}

// Test:
foreach (var tuple in Enumerate (3).Take (100)) {
    Console.Write (string.Concat (tuple.Select (x => x.ToString ())) + " ");
    if (tuple.All (x => x == tuple[0])) {
        Console.WriteLine ();
    }
} 
```

# eclipse-gef - 如何计算图形的大小，包括 GEF 中的所有子图形（具有单独的编辑部分）？

> ID：12370382
> 
> 赞同：0
> 
> 时间：2012-09-11T13:03:28.870
> 
> 标签：eclipse-gef, draw2d

我正在尝试绘制包含单个实体的图表，其中包含多个元素。

***我的 MVC 结构看起来像这样：***
**模型：**包含 EntityModel.java 和 ElementModel.java 代表我的模型对象。
**视图：** EntityFigure.java 和 ElementFigure.java
**控制器：** EntityEditPart.java 和 ElementEditPart.java

我在 EntityEditPart.java 中覆盖 getModelChildren() 以返回 ElementModel.java 列表，因此 GEF 知道元素“属于”实体的方式。

由于我想计算我的实体的图形大小并在此计算中包含嵌入的元素，因此我无法在 EntityEditPart.java 的 createFigure() 期间调用 entityFigure.getPreferredSize()，因为此时 - 元素图形不存在（createFigure()在 ElementEditPart.java 中尚未调用）。

在创建所有子图形后，我正在寻找一个设置我的实体图形的地方。
我虽然关于在 ElementEditPart.java 中覆盖 addNotify()，但是，它是在创建特定的内部元素之后调用的，而不是在创建所有元素之后调用的。

有任何想法吗？

希望我足够清楚...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:11:14.613

你可以在扩展中做到这一点

```
 refreshChildren() 
```

编辑部分的方法，因为所有子项的创建都是在超类 (AbstractEditPart) 刷新方法的 refreshChildren() 中完成的：

```
public void refresh() {
    refreshVisuals();
    refreshChildren();
} 
```

或者，您可以扩展

```
refresh() 
```

# objective-c - 多部分 POST 和 Objective-C

> ID：12370384
> 
> 赞同：0
> 
> 时间：2012-09-11T13:03:38.780
> 
> 标签：objective-c, ios, post, multipart

我正在尝试将图像上传到服务器，并且难以理解多部分请求的概念，如果可以进行某种解释，那就太好了。

我遇到的另一个问题是在objective-c 中创建一个。我正在尝试上传 UIImage，并且我已经将数据全部编码为 base 64，就像我在其他部分看到的那样，但是我如何生成请求本身呢？

另外，我想避免使用 3rd 方库，这样我就可以了解更多发生的事情，而不是“哦，这个库对我来说太神奇了”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:06:37.903

您需要[`setHTTPBody:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableURLRequest/setHTTPBody:)在`NSMutableURLRequest`要上传的内容上使用。显然，内容需要遵守[RFC 2388](https://www.rfc-editor.org/rfc/rfc2388)。

所有这些都可以手动完成，但第三方库更容易，并且将处理比您自己的代码更多的边缘情况，除非您想投入大量精力重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:16:59.717

[使用NSData_Base64](http://projectswithlove.com/projects/NSData_Base64.zip)链接将 UIImage 转换为 base64 ，并将其集成到您的项目中。

现在使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)进行多部分 POST

# c# - nservicebus 并发访问 saga 数据

> ID：12370389
> 
> 赞同：4
> 
> 时间：2012-09-11T13:03:52.113
> 
> 标签：c#, concurrency, nservicebus, saga

我使用 NServiceBus 作为企业服务总线，在我正在开发的解决方案中，我有一个编排服务，它接收来自所有客户端应用程序的多达 10k 条消息。我想提高架构性能，从而增强所提供的解决方案。

我使用一个 Saga Data 类，我想在所有工作线程之间共享对它的访问（到目前为止，我只设置一个线程，但我想至少设置为 10），当多个线程尝试访问时会发生什么同样的传奇故事？NSB 是否已经提供了这样的并发特性？我必须自己实施吗？如果后者有任何提示？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T20:37:42.730

如果我理解正确，您会问如果您有多个线程同时访问同一个 saga 实例会发生什么。NServiceBus 使用底层存储来确保只有一个线程可以同时创建/更新给定的 saga 实例。其他人将回滚，NServiceBus 对重试的支持将确保消息被重试，从而为您解决竞争条件。你可以在这里阅读更多：

[http://andreasohlund.net/2012/09/19/nservicebus-sagas-and-concurrency/](http://andreasohlund.net/2012/09/19/nservicebus-sagas-and-concurrency/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T22:07:02.450

您不太可能有多个 sagas 共享相同的实例数据，只是它们的设计方式不同。saga 是一个长时间运行的进程的实例。saga 数据类只是一个构造，它允许您存储有关该实例的信息，这有助于在其生命周期内管理其状态。如果你想提高性能，我建议你看看分发你的工作端点（[http://docs.particular.net/samples/scaleout/](http://docs.particular.net/samples/scaleout/)）。

# powershell - Powershell - 添加到 $Error

> ID：12370392
> 
> 赞同：2
> 
> 时间：2012-09-11T13:03:58.737
> 
> 标签：powershell, error-handling

使用 Powershell，我如何向 $Error 添加一个条目`ArrayCollection`（或者可能，我应该向集合添加更多内容）？

据我了解，使用`Write-Error`将输出错误并将条目添加到错误集合中。但我只想将一个条目直接添加到集合中而不是当时输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:06:33.213

ErrorAction 开关应该能够处理这个问题。

```
write-error "Something bad happened" -ErrorAction:SilentlyContinue 
```

# bnf - 为 LR lex/parser 重用 BNF 中已经使用的终端子集有什么问题吗？

> ID：12370401
> 
> 赞同：1
> 
> 时间：2012-09-11T13:04:38.260
> 
> 标签：bnf, lr

请原谅我的术语，因为我仍然对所有事情都感到困惑。我正在尝试将我的第一个解析器放在一起，并试图找到尽可能多的示例来构建我的语法。我见过很多非终端获得乘法产品的情况

```
<F>::=(<E>)
<F>::=id 
```

这与写作相同

```
<F>::id|(<E>) 
```

从我读过的所有内容来看，这非常好。我要做的是以下

```
<atsign>::=@
<expl>::=!
<special>::=!|@|#|$|%|^|&|*|(|)|+ 
```

**有什么我需要注意的吗？对于 LR 解析器，我的排序是否正确？** 这不完全是家庭作业，因为我目前不在学校，但可以这样对待，因为我知道这是我将来要学习的课程。

# android - 如何在 Android 平板电脑中启用 LED 闪烁？

> ID：12370407
> 
> 赞同：2
> 
> 时间：2012-09-11T13:05:09.200
> 
> 标签：android

当使用单击平板电脑中的按钮时，我需要启用 LED 闪烁。在这里，我使用以下代码创建了一个示例应用程序。此代码在移动设备（HTC Sensation）中运行良好。当我对平板电脑使用相同的代码时，它不起作用。为什么会发生这种情况，Log Cat 中没有错误消息。我用的是[东芝 Thrive AT100 平板电脑](http://us.toshiba.com/tablets/thrive/10-inch/)。

**LED_Blinking_Activity.java**

```
public class LED_Blinking_Activity extends Activity {

    Button on, off;
    int LED_NOTIFICATION_ID = 0;
    Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_led__blinking_);
        on = (Button) findViewById(R.id.button1);
        off = (Button) findViewById(R.id.button2);
        final Vibrator vibe = (Vibrator) this
                .getSystemService(VIBRATOR_SERVICE);
        on.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
                Notification notif = new Notification();
                notif.ledARGB = 0xFFff0000; // Green color 0xFF00FF00
                notif.flags = Notification.FLAG_SHOW_LIGHTS;
                notif.ledOnMS = 100;
                notif.ledOffMS = 1000;
                nm.notify(LED_NOTIFICATION_ID, notif);

                vibe.vibrate(50); // 50 is time in ms

            }
        });

        off.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                ClearLED();
            }
        });
    }

    private void ClearLED() {
        NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        nm.cancel(LED_NOTIFICATION_ID);
    }

    private Runnable mClearLED_Task = new Runnable() {
        public void run() {
            synchronized (LED_Blinking_Activity.this) {
                ClearLED();
            }
        }
    };
} 
```

**activity_led_*闪烁*的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="45dp"
        android:text="Turn on LED" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button1"
        android:layout_centerVertical="true"
        android:text="Turn o LED" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:21:16.813

许多 Android 平板电脑没有通知 LED。根据[此产品规格](http://eu.computers.toshiba-europe.com/innovation/product/Toshiba-AT100-100/1111265/)，这款平板电脑似乎也没有。如果设备没有，则无法闪烁 LED。

# c++ - 如何将 Borland C++ 5.02 应用程序迁移到 Windows 7？

> ID：12370412
> 
> 赞同：4
> 
> 时间：2012-09-11T13:05:23.437
> 
> 标签：c++, windows-7, windows-xp, borland-c++

目前，我们正在将在 Windows XP 上使用 Borland C++ 5.02 开发的应用程序迁移到 Windows 7。在 Windows 7 上执行应用程序时，我收到错误消息

> VBX 库初始化失败。

在尝试在 Internet 上查找原因时，我能够确定错误是由于*BIVBX31N.EXE*和*BIVBX31N.dll 造成*的。

如何将 Borland C++ 5.02 应用程序移植到 Windows 7，解决*BIVBX31N.EXE*和*BIVBX31N.dll*相关问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T22:01:26.287

如果您在使用此产品时遇到困难，我建议您这样做。

简单回答：**不要使用IDE，**继续使用命令行工具：

*   `bcc32.exe`（编译器）在 Windows 8 中仍然可以正常工作。

*   `ilink32.exe`（链接器）仍然可以正常工作。

两者都可以在 bin 子文件夹中找到。

您可以通过在记事本或十六进制编辑器中打开 IDE（项目）文件来获取一些命令行信息（它不是文本文件，但您可以在记事本中阅读大部分内容）。或者，如果您确实可以访问 Windows XP，您可以在此处打开它，以复制命令行工具中的使用设置。

只需使用其他一些 IDE 或像[Notepad++](http://en.wikipedia.org/wiki/Notepad%2B%2B)这样的编辑器来编辑您的源文件。您可以使用旧版本的 Visual C++ 来编辑 RC 文件、记事本或其他工具。

如果您真的想让它变得光滑，请设置您的 IDE 以在您单击工具栏按钮时运行“外部工具”，让它运行您的命令行工具来编译 + 链接（并可选择运行 EXE 文件）。您可能也可以找到一个调试器工具，但我还不需要它，所以没有检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T12:51:23.720

我最好的建议是开始将代码移植到[Visual Studio](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio)的过程。

如果您在 Borland 中使用过[OWL 库](https://en.wikipedia.org/wiki/Object_Windows_Library)，则可以使用类似[OWLNext的库。](http://sourceforge.net/apps/mediawiki/owlnext/index.php?title=Main_Page)

另一种选择是使用[Windows Virtual PC](https://en.wikipedia.org/wiki/Windows_Virtual_PC)（或其他类似的虚拟机）在集成的 Windows XP 模式下运行 Borland。[请参阅此处](http://blogs.msdn.com/b/virtual_pc_guy/archive/2009/06/11/using-windows-virtual-pc-to-run-16-bit-applications-on-64-bit-windows.aspx)的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T07:43:42.820

这可能是答案？？？您必须从[http://www.4shared.com/get/Gs41_5yA/borland_for_graphics.html](http://www.4shared.com/get/Gs41_5yA/borland_for_graphics.html)或[http://dwij.co.in/graphics-c-programming-for-windows-7-borland-下载配置好的 Borland 编译器编译器/](http://dwij.co.in/graphics-c-programming-for-windows-7-borland-compiler/) .
将 Borland 的“bin”文件夹放入环境变量中。
现在进入文件夹“bin”并根据您的文件夹结构编辑文件 bcc32.cfg。该文件包含头文件和库的设置。

```
-I"D:\Borland\include;"
-L"D:\Borland\lib;D:\Borland\Lib\PSDK" 
```

现在创建任何 C/C++ 程序，比如 myprogram.cpp
使用以下命令编译这组代码：

```
F:\>bcc32 myprogram.cpp 
```

恭喜！！！！

# c# - 高效的位重映射算法

> ID：12370415
> 
> 赞同：2
> 
> 时间：2012-09-11T13:05:41.537
> 
> 标签：c#, random, mapping, bit-manipulation, shuffle

我有一个用例，我需要以这样的方式对输入进行加扰：

1.  每个特定的输入总是映射到一个特定的伪随机输出。
2.  输出必须充分打乱输入，以便递增的输入映射到伪随机输出。

例如，如果输入是 64 位，则必须恰好有 2^64 个唯一输出，并且这些输出必须尽可能地中断递增输入（任意要求）。

我将在 C# 中对此进行编码，但可以从 Java 或 C 转换，只要没有 SIMD 内在函数。我正在寻找的是一些已经存在的代码，而不是重新发明轮子。

我在谷歌上看过，但没有找到任何可以进行 1:1 映射的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:11:34.687

只是从我的头顶：

1.  移位输入：确保保留每一位，即在不同方向上使用两个移位操作并将结果组合在一起。

2.  应用静态 XOR。

我想到的其他一切都不是双射的。但是，搜索双射可能会带来一些有用的东西；D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:36:07.440

这似乎工作得很好：

```
const long multiplier = 6364136223846793005;
const long mulinv_multiplier = -4568919932995229531;
const long offset = 1442695040888963407;

static long Forward(long x)
{
    return x * multiplier + offset;
}

static long Reverse(long x)
{
    return (x - offset) * mulinv_multiplier;
} 
```

您可以将常数更改为任何`multiplier`奇数并且`mulinv_multiplier`是模乘逆（见[wiki：模乘逆](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)或Hackers Delight 10-15 Exact Division by Constants）的`multiplier`（模2 ^ 64，显然 - 这就是为什么`multiplier`必须是奇数，否则它没有逆）。

偏移量可以是任何东西，但为了安全起见，将其设为 2^64 的相对素数。

这些特定常数来自 Knuths 线性同余生成器。

有一件小事：它将输入的 LSB 的补码放在结果的 LSB 中。如果这是一个问题，您可以将其旋转任意非零量。

* * *

对于 32 位，常量可以是`multiplier = 0x4c957f2d`, `offset = 0xf767814f`, `mulinv_multiplier = 0x329e28a5`.

对于 64 位，`multiplier = 12790229573962758597`,`mulinv_multiplier = 16500474117902441741`可能会更好。

* * *

或者，您可以使用 CRC，对于 CRC64，它是[可逆](http://www.danielvik.com/2010/10/calculating-reverse-crc.html)的（即输入与 CRC 大小相同），它当然需要一些修改。

# javascript - 当链接到具有动态虚拟目录的外部 javascript 文件时，ResolveUrl 似乎不适用于 ../../

> ID：12370416
> 
> 赞同：0
> 
> 时间：2012-09-11T13:05:42.767
> 
> 标签：javascript, asp.net, html

所以我以前遇到过这个问题。由于虚拟目录是动态的，它不断破坏我的 javascript 链接。我为他们使用了 ResolveUrl，它似乎奏效了。（这是在一个 .aspx 文件中）

```
<link href="<%=ResolveUrl("~/JQueryPlugins/Tooltip/toolitp.css")%>" rel="stylesheet" type="text/css" /> 
```

但是，我遇到了一个问题。在另一个文件中，我有另一组 javascript 链接，它们链接到 javascript 文件 2 个目录，因此默认值如下所示：

```
<script type="text/javascript" src="../../lib/yui/utilities/utilities.js"></script> 
```

../../ 似乎弄乱了 resolveUrl 所以它仍然找不到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:41:19.947

编写一些实用函数来检测根路径并附加它。

**例如：GetAppPath()+"/lib/yui/utilities/utilities.js";**

公共静态字符串 GetAppPath() {

```
 return (System.Web.HttpRuntime.AppDomainAppVirtualPath == "/") ? string.Empty : System.Web.HttpRuntime.AppDomainAppVirtualPath;

    } 
```

# css - 使用 Bootstrap.js 修复导航栏

> ID：12370417
> 
> 赞同：0
> 
> 时间：2012-09-11T13:05:43.377
> 
> 标签：css, twitter-bootstrap, css-position

我正在开发一个使用 Backbone + Bootstrap 作为 css 框架的 web 应用程序。

我无法在移动浏览器中使用 Bootstrap 将导航栏设置为固定在顶部。根据 Bootstrap，我们需要做的就是在导航栏中添加“navbar-fixed-top”类……但不幸的是，它在移动浏览器中对我不起作用，但在桌面浏览器中起作用。

HTML

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner" style="text-align:center">
    <div class="colL pull-left">
        <a href="/#back" id="back-btn" class="btns angular_btn pull-left" style="display:none"><span>Back</span></a>
        <a href="/#control_back" id="control-back-btn" class="btns angular_btn pull-left" style="display:none"><span>Back</span></a>
    </div>
    <div class="colR pull-right">
        <a class="btns pull-right" id="home" style="display: none" href="/#home" data-toggle="tab">Home</a>
        <a href="/#controls" id="controls" class="btns pull-right" data-toggle="tab">Now Playing</a>
    </div>
    <div class="colC">
        <div id="show_name"></div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:04:34.170

从 2012 年 12 月推出的 Bootstrap 的 v2.2.2 开始，固定导航栏确实可以使用“位置：绝对”在移动设备上工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T14:40:02.393

Twitter Bootstrap 不支持移动设备的固定导航栏：

> 在移动设备上固定是不可能的，它的表现也不好——甚至在 iOS5 上也是如此。如果您愿意，您可以随意覆盖它，但在改进支持之前我们不会重新启用。（@markdotto 评论[这个问题](https://github.com/twitter/bootstrap/issues/1617)）

# html - html5 音频 mp3 路径在 IE9 上不起作用

> ID：12370426
> 
> 赞同：0
> 
> 时间：2012-09-11T13:06:07.510
> 
> 标签：html, audio, internet-explorer-9, mp3, virtualhost

我是一名网站管理员，我在一台服务器上管理多个网站。我使用“virtualhost”将每个网站的 url 发送到 arn.ae 下的正确文件夹。

所以主 url 是 arn.ae，它是我服务器的根，radioshoma934.ae 是一个子网站，指向一个名为 shoma 的子目录。

在 IE9 中，我发现当我使用子网站 url 指向我的音频时，如下所示：

```
<audio controls="controls">
<source src="http://radioshoma934.ae/vincent.mp3"  type="audio/mp3" />
</audio> 
```

--->音频未加载，但如果我使用这样的完整路径：

```
<audio controls="controls">
<source src="http://arn.ae/shoma/vincent.mp3"  type="audio/mp3" />
</audio> 
```

---> 有效。

任何人都知道我的服务器需要什么配置才能使我的子网站 url 正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:25:22.677

这是因为**src="http://arn.ae/shoma/vincent.mp3"**是你服务器的根地址 是文件的准确位置。第一个 **src="http://radioshoma934.ae/vincent.mp3"**指向 arn.ae/shoma/。src 标签需要直接链接到服务器上的媒体。根 url arn.ae/shoma/* 是根路径。

你可以尝试做 src="/shoma/vincent.mp3" 一个相对链接。

希望有帮助

# java - 声纳违规：“方法可能无法在异常时关闭流”

> ID：12370427
> 
> 赞同：0
> 
> 时间：2012-09-11T13:06:12.193
> 
> 标签：java, exception, inputstream, sonarqube

我有这个方法：

```
 private void unZipElementsTo(String inputZipFileName, String destPath) throws FileNotFoundException, IOException {

        OutputStream out = null;
        InputStream in = null;
        ZipFile zf = null;

        try {
            zf = new ZipFile(inputZipFileName);

            for (Enumeration<? extends ZipEntry> em = zf.entries(); em.hasMoreElements();) {
                ZipEntry entry = em.nextElement();
                String targetFile = destPath + FILE_SEPARATOR + entry.toString().replace("/", FILE_SEPARATOR);
                File temp = new File(targetFile);

                if (!temp.getParentFile().exists()) {
                    temp.getParentFile().mkdirs();
                }

                in = zf.getInputStream(entry);

                out = new FileOutputStream(targetFile);
                byte[] buf = new byte[4096];
                int len;
                while ((len = in.read(buf)) > 0) {
                    out.write(buf, 0, len);
                }
                out.flush();
                out.close();
                in.close();
            }
        }
        finally
        {
            if (out!=null) out.close();
            if (zf!=null) zf.close();
            if (in!=null) in.close();
        }
    } 
```

对于这种方法，声纳给我这个违规：

> 不好的做法 - 方法可能无法关闭异常流 unZipElementsTo(String, String) 可能无法关闭异常流

但是，我没有看到任何违规行为。也许，这只是一个假阳性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:09:59.600

这是正确的。该`OutputStream.close()`方法本身可以引发异常。如果发生这种情况，例如在您的块的第一行`finally{}`，那么其他流将保持打开状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:10:00.240

如果`out.close()`或`zf.close()`在`finally`块中抛出异常，则不会执行其他关闭。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-03T20:25:32.370

或者，如果您使用的是 Java 7 或更高版本，则可以使用新的 try-with-resources 机制，它会为您处理关闭。有关此新机制的详细信息，请参见：[http ://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html。](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

请注意，try-with-resources 也适用于打开和关闭的多个对象，并且仍然保证对象将以与其构造相反的顺序关闭。Quoth同一页面：

> 请注意，资源的关闭方法以与它们创建相反的顺序被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T08:46:31.363

为避免在流关闭期间用异常掩盖异常通常建议在 finally 中“隐藏”任何 io 异常。

要修复在 finally 关闭中使用 org.apache.commons.io.IOUtils.closeQuietly(...) 或 guava Closeables.html#closeQuietly(java.io.Closeable)

更多关于异常处理问题： http:
[//mestachs.wordpress.com/2012/10/10/through-the-eyes-of-sonar-exception-handling/](http://mestachs.wordpress.com/2012/10/10/through-the-eyes-of-sonar-exception-handling/)

# wpf - 禁用选择richtextbox wpf

> ID：12370431
> 
> 赞同：5
> 
> 时间：2012-09-11T13:06:29.350
> 
> 标签：wpf, richtextbox

任何线索我们如何实现它？

这个链接没有多大帮助......

[http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/d1132ee5-acad-49f3-ae93-19d386fe2d12](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/d1132ee5-acad-49f3-ae93-19d386fe2d12)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T13:19:21.543

只是禁用焦点

```
 Focusable="False" 
```

或者

```
 IsHitTestVisible="False" 
```

如果您需要隐藏选择

```
 SelectionOpacity="0" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-26T16:39:39.783

`Focusable="False"`适合你，但光标仍然**可以选择**，所以你需要的是：

```
Focusable="False"
Cursor="Arrow" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-14T18:12:59.917

`IsTextSelectionEnabled`是我在 WinRT 中使用的属性...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-11T13:14:01.360

你试过 .IsEnabled = false;

# svn - SVN 修改文件上的 svn:mergeinfo 属性而不做任何更改

> ID：12370435
> 
> 赞同：4
> 
> 时间：2012-09-11T13:06:41.880
> 
> 标签：svn, mergeinfo

我有一个 svn 的“问题”，我不明白为什么有时当我合并两个分支时，它会报告修改文件上的*mergeinfo*属性而文本没有更改。
这是正常行为吗？
如果不是，可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:58:40.303

好吧，您确实合并了这两个分支。对？按预期工作。

您所做的是进行合并。即使合并没有导致任何代码更改，这在合并中并不少见，Subversion 仍然标记合并已完成。如果没有别的，标记你做了一个合并——即使它没有导致任何变化，仍然是一个好主意。想象一个发布出去，有人说*“等等，没有人将该分支合并回主干！我们将不得不延迟发布，直到我们完成”*，因为他们没有在`svn:merge-info`记录中看到合并。

所以，是的，你看到的*可能是*正常行为。

现在，如果您的问题是*“为什么我的更改没有被合并”*，那就是另一个问题了。Subversion 通常在合并方面做得很好，但你必须确保你做了一些事情：

*   仅从项目的根目录合并，而不是单个分支和文件。有例外，但大多数时候您应该合并项目的分支。否则，你最终会`svn:merge-info`到处都是。
*   知道何时使用`--reintegrate`标志。您有一个*分支“A”*（在此示例中可能包括主干）。你从*分支 "A"创建一个**分支 "B* " 。 **   当你从“A”合并到“B”时，你不使用`--reintegrate`
    *   当你从“B”合并到“A”时，记得使用`--reintegrate`. 它改变了 Subversion 处理合并的方式。* 
**   Subversion 不能很好地处理高度复杂的合并情况。如果你把一个分支变成一大堆分支，并在它们之间来回合并，Subversion 就会搞砸。这是我告诉人们不要为每个功能业务做*分支的原因之一。*它使跟踪各种合并变得困难，并可能导致 Subversion 出现合并问题。也许这是一个特性：由于 Subversion 不能很好地处理这些高度复杂的合并情况，因此您必须避免它们。通过简单地说明 Subversion 无法处理它，我已经能够说服许多经理摆脱高度复杂的反模式分支方案。*   如果您手动合并文件（许多开发人员更喜欢这样做：手动将分支中的更改应用回主干），请使用`svn merge --record-only`，以便 Subversion 知道您已经完成了合并。当开发人员手动进行一些合并而其他人允许 Subversion 进行合并时，就会出现欢闹。*

 *因此，如果 Subversion 没有合并它应该有的更改，请确保您使用`--reintegrate`正确，并且您没有上面提到的其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:18:42.900

`svn:mergeinfo`属性用于跟踪有关已在存储库中执行的合并的信息。

有关详细信息，请参阅 SVNBook：[“Mergeinfo 和预览”](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.mergeinfo)。*

# android - 处理 GCM 发送的意图时出错

> ID：12370440
> 
> 赞同：2
> 
> 时间：2012-09-11T13:07:10.927
> 
> 标签：android, google-cloud-messaging

在处理 GCM 时，我在 "" 类上遇到了一些错误。错误出现在这里：

```
onHandleIntent(Intent intent) 
```

> “无法覆盖 GCMBaseIntentService 的最终方法”

```
handleRegistration 
```

> “GCMBaseIntentService 类型中的方法 handleRegistration(Context, Intent) 不适用于参数 (Intent)”

```
handleMessage 
```

> “GCMIntenetService 类型的方法 handleMessage(Intent) 未定义”

```
public final void onHandleIntent(Intent intent) {
            try {
                String action = intent.getAction();
                if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
                    handleRegistration(intent);
                } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {
                    handleMessage(intent);
                }
            } finally {
                synchronized (LOCK) {
                    sWakeLock.release();
                }
            }
        } 
```

班级

```
package com.example.elarabygroup;

import com.google.android.gcm.GCMBaseIntentService;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.util.Log;

public class GCMIntenetService extends GCMBaseIntentService {
    public static String TAG = "GCMIntentService";
    private static PowerManager.WakeLock sWakeLock;
    private static final Object LOCK = GCMIntenetService.class;

    /*Handling Intents sent by GCM*/
    static void runIntentInService(Context context, Intent intent) {
        synchronized (LOCK) {
            if (sWakeLock == null) {
                PowerManager pm = (PowerManager) context
                        .getSystemService(Context.POWER_SERVICE);
                sWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
                        "my_wakelock");
            }
        }
        sWakeLock.acquire();
        intent.setClassName(context, GCMIntenetService.class.getName());
        context.startService(intent);
    }

    public GCMIntenetService(String senderId) {
        super(senderId);
        // TODO Auto-generated constructor stub
        Log.d(TAG, "[GCMIntentService] start - sender Id : " + senderId);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        Log.d("onError", arg1);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Log.d("onRecoverableError", errorId);
        return false;
    }

    @Override
    /*
     * protected void onMessage(Context arg0, Intent arg1) { Log.d("onMessage",
     * String.valueOf(arg1)); }
     */
    protected void onMessage(Context arg0, Intent arg1) {

        Log.d("GCM", "RECIEVED A MESSAGE");
        // Get the data from intent and send to notificaion bar
        generateNotification(arg0, arg1.getStringExtra("**notificaion**"));
    }

    private void generateNotification(Context arg0, String stringExtra) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onRegistered(intent) {

    try {
        String action = intent.getAction();
        if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
            handleRegistration(intent);
        } else if (action.equals("com.google.android.c2dm.intent.RECEIVE")) {
            handleMessage(intent);
        }
    } finally {
        synchronized (LOCK) {
            sWakeLock.release();
        }
    }

}

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Log.d("onUnregistered", arg1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:00:23.040

您不应该覆盖 GCMBaseIntentService 的最终方法。您只需要 ovveride 这个基类的回调方法。这是一个例子：

```
public class GCMIntentService extends GCMBaseIntentService {

    private static final String GCM_SENDER_ID = "your_sender_id";

    public GCMIntentService() {
        super();
    }

    @Override
    protected void onRegistered(Context context, String gcmDeviceToken) {
        // remember and save somewhere "gcmDeviceToken"
    }

    @Override
    protected void onUnregistered(Context context, String s) {
        // Push unregistered processing
    }

    @Override
    protected void onError(Context context, String errorId) {
        // push error processing
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        // process Push message
    }

    public static void registerInGCMService(Context context) {
        if (!checkIsGCMServiceAvailable(context)) {
            return;
        }
        final String regId = GCMRegistrar.getRegistrationId(context);
        if (regId.equals("")) {
            try {
                GCMRegistrar.register(context, GCM_SENDER_ID);
            } catch (Exception ex) {
            }
        } else {
            // Already registered
        }
    }

    public static boolean checkIsGCMServiceAvailable(Context context) {
        try {
            GCMRegistrar.checkDevice(context);
            GCMRegistrar.checkManifest(context);
            return true;
        } catch (Throwable th) {
            return false;
        }
    }

} 
```

更新：请注意-您应该用自己的值更改**GCM_SENDER_ID**常量的值，它应该是数值，例如“1234567890123”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:58:55.847

```
@Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        GCMRegistrar.setRegisteredOnServer(context, true);
    }

    @Override
    protected void onMessage(Context context, Intent intent) {
        Log.i(TAG, "Received message");
        Log.i(TAG, "EXTRAS" + intent.getExtras());
        String message = getString(R.string.gcm_message);
        // notifies user about message

    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        if (GCMRegistrar.isRegisteredOnServer(context)) {
                Log.i(TAG, "unregistering device (regId = " + regId + ")");
        GCMRegistrar.setRegisteredOnServer(context, false);
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring unregister callback");
        }
    } 
```

请参阅 GCM 谷歌教程[http://developer.android.com/guide/google/gcm/gs.html](http://developer.android.com/guide/google/gcm/gs.html)

# javascript - ASP.NET MVC 3 - ajax 调用后，重定向到新页面或生成页面刷新

> ID：12370441
> 
> 赞同：1
> 
> 时间：2012-09-11T13:07:13.127
> 
> 标签：javascript, ajax, asp.net-mvc

## 设想：

我编写了一个 MVC 向导，如果在浏览器中启用了 javascript，它会自动使用 ajax。向导的每一步都是一个 PartialView（我使用的是 ASP.NET MVC 3）。

一切正常。

问题是刷新页面，例如，如果用户的状态由于她填写向导的方式而改变。例如，如果向导将用户登录或注册。当向导通过 AJAX 获取部分视图一步一步地“移动”时，页面不会刷新以反映用户状态的变化（例如，现在注册了一个匿名用户）。

## 我想做的事：

本质上，当我需要刷新整个页面时，我需要在通过 AJAX 提供与向导当前步骤相对应的部分视图之后在客户端上自动运行以下命令：

```
location.reload(); 
```

## 问题：

由于 DOM 已通过 AJAX 修改，我不知道如何让我的 javascript (location.reload();) 在没有用户干预的情况下运行（例如，单击按钮）。

有什么建议么？我已经下班了一段时间，正在努力恢复速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:45:35.730

目前，我已经使用以下文章中的代码解决了我的问题：

使用 ASP.NET MVC 时在 AJAX 调用后重定向

`AjaxController.cs`我喜欢本文中讨论的方法，因为它以一种非常 MVC 的方式生成了可重用的代码 - 我已经有一个基本控制器 (

但是，这种方法存在两个问题：

1.  我必须从我的向导重定向，所以它只适用于向导的最后一步。如果用户的状态在向导中途发生变化，我仍然很紧张。

2.  我仍然想知道如何在 AJAX 调用后刷新我的页面，而不是像这样重定向。

所以如果有人有答案，我很乐意给他们饼干。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:40:08.747

我不太确定您的 ajax 调用的结构，但如果您使用的是 MVC Ajax 助手，您可以调用`location.reload();`OnComplete 方法，如下所示：

```
@using (Ajax.BeginForm(new AjaxOptions{OnComplete = "javascriptfunction"}))
{
    //Data and submit button
}
<script>
    function javascriptfunction(){
        location.reload();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:48:14.870

```
// C# code
public ActionResult Foo(Bar bar)
{
    // code here
    return Json(new
    {
        Success = true,
        Value = this.RenderPartialViewToString("PartialViewName", bar),
        Callback = "window.location.href = 'http://yourdomainurl.com/';"
    });
}

// jQuery Ajax
$.ajax({
    type: "POST",
    url:  "/urlWhereToPost",
    data: ("form#id").serialize(), 
    dataType: 'json',
    async: false,
    beforeSend:  function() {
        // some instruction
    },
    error: function(e) {
        alert(e.responseText);
    },      
    success: function(data) {
        if (data.Success) {
            if (data.Callback != null) {
                if (data.Callback.length > 0) {
                    jQuery.globalEval(data.Callback);
                }
            }
        }
        else {
            // do something
        }
    }
 }); 
```

# unit-testing - 作为 Groovy Spock 方法的经典单元测试

> ID：12370442
> 
> 赞同：1
> 
> 时间：2012-09-11T13:07:21.457
> 
> 标签：unit-testing, testing, groovy, junit, spock

我有一个 Groovy Spock 方法，它具有以下模式：

```
def "My test"() {
  def a = createA();
  assert a.fieldLevel1.isValid()
  def b = a.fieldLevel1
  assert b.fieldLevel2.isValid()
  def c = b.fieldLevel2
  assert c.fieldLevel3.isValid()
  ...
} 
```

正如您所看到的，由于断言和变量定义混合在一起，因此很难在块上打破它。编写这种测试的“spock”​​方法是什么？

更新：

测试具有以下结构，因为`c.fieldLevel3.isValid()`is 实际上`c.fieldLevel3 instanceof A`，所以如果该字段无效，我将无法继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:03:41.170

单元测试的“经典”方式是保持测试单一。也就是说，每次测试都测试*一件事*，在这个例子中似乎不是这样。

但是，话虽如此，您可以在一个`expect`块中的所有设置代码之后将所有断言分组到一个`setup`块中：

```
def "My test"() {
  setup:
  def b = createA().fieldLevel1
  def c = b.fieldLevel2
  def d = c.fieldLevel3
  expect:
  b.valid
  c.valid
  d.valid
} 
```

请注意，我通过使用 Groovy 的好东西来访问`isValid()`as`valid`并直接在辅助对象上调用该方法来缩短断言。

另外，我没有使用通常的`when/then`Spock 块，因为这个测试用例似乎与给定系统上的刺激/响应不太一致。但是，如果您愿意，也可以使用许多`when`交替`then`块：

```
def "My test"() {
  when: def b = createA().fieldLevel1
  then: b.valid
  when: def c = b.fieldLevel2
  then: c.valid
  when: def d = c.fieldLevel3
  then: d.valid
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T19:45:23.593

不知道您为什么不接受上面的答案，看起来还不错。

作为一个小区别，您还可以执行以下操作：

```
def "My test of creating an A"() {
    when: 
        def a = createA()
    then: 
        a.fieldLevel1.isValid()
        a.fieldLevel1.fieldLevel2.isValid()
        a.fieldLevel1.fieldLevel2.fieldLevel3.isValid()
} 
```

您是否“喜欢”这取决于您遵循得墨忒耳的“法则”的程度——Groovy 似乎使这一点不像过去那么重要。

如果实际底层对象的复杂性使得这不是验证它们的有效方法，那么它们可能值得拥有自己的单元测试。

# javascript - 如何在引导元素之上添加掩码？

> ID：12370447
> 
> 赞同：2
> 
> 时间：2012-09-11T13:07:42.520
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在使用引导程序的轮播（[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)）来显示用户提交的画廊。因为它是用户提交的，所以我的网站设计的其余部分看起来不太好，这就是为什么我想在所有内容上添加图层蒙版

这是面具： http: [//img52.imageshack.us/img52/2659/degrade.png](http://img52.imageshack.us/img52/2659/degrade.png) 不幸的是，我无法显示那个特定的 div ......它必须是不可点击的，因为当用户点击图片时在轮播中，它会打开带有全尺寸图片的模态弹出窗口。

我的CSS（它使用较少，但你明白了）：

```
.carousel {
  width: 292px;
  height: 163px;

  .carousel-inner {
    width: 292px;
    height: 163px;

    img {
      width: 100%;
      height: 100%;
    }
  }
}

.carousel-control {
  margin-top: 0;
  top: 0;
  right: 0;
  background: none;
  border: 0;
  width: 60px;
  height: 163px;
  opacity: 0.65;
  background-repeat: no-repeat;

    &:hover.right {
      background-image: url('/assets/index/r_arrow.png');
    }

    &:hover.left {
      background-image: url('/assets/index/l_arrow.png');
    }
} 
```

这是我的html：

```
<div class="carousel slide">
    <div class="carousel-inner">
        <div class="item active">
            <a href="popup_img1.htm"><img src="thumbnail1.jpg" /></a>
        </div>
        <div class="item">
            <a href="popup_img2.htm"><img src="thumbnail2.jpg" /></a>
        </div>
        <div class="item">
            <a href="popup_img3.htm"><img src="thumbnail3.jpg" /></a>
        </div>
     </div>
     <a class="carousel-control left" href=".carousel" data-slide="prev">&nbsp;</a>
     <a class="carousel-control right" href=".carousel" data-slide="next">&nbsp;</a>
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:26:36.427

根据您的跨浏览器支持需求，您可以尝试提供覆盖`pointer-events: none`。[这是一个例子](http://jsfiddle.net/crowjonah/pum3e/)。

如果你插入`<div class="overlay"></div>`到`.carousel-inner`，给`.carousel-inner {position: relative;}`和

```
.overlay {
    background: url(http://img52.imageshack.us/img52/2659/degrade.png) top left no-repeat;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
    pointer-events: none;
} 
```

这里有[一个答案](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie)，它提供了使用 javascript 的解决方案的信息和链接。不幸的是，已接受链接问题答案的资源已下线，但这里有一个相当简单的演示：http: [//jsbin.com/uhuto](http://jsbin.com/uhuto)

# iphone - MPMoviePlayerController 立即结束

> ID：12370449
> 
> 赞同：2
> 
> 时间：2012-09-11T13:07:54.097
> 
> 标签：iphone, ios, media-player, mpmovieplayercontroller

我正在尝试从我的资源文件加载一个 25 秒的 mp4 电影，但是当我播放它时，我的 MPMoviePlayerPlaybackDidFinishNotification 选择器会立即使用 MPMovieFinishReasonPlaybackEnded 调用。当我记录我的播放状态时，它会显示：

```
MPMoviePlaybackStatePlaying
MPMoviePlaybackStatePaused
MPMoviePlaybackStateStopped
MovieFinishReasonPlaybackEnded
MPMoviePlaybackStatePlaying
MPMoviePlaybackStatePaused 
```

即使我只调用一次 play 方法。我希望有一个人可以帮助我。

-- 编辑显示我的代码：

```
MPMoviePlayerController* player = [[[MPMoviePlayerController alloc] initWithContentURL:movieURL] autorelease];

if (player)
{

    self.moviePlayerController = player;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:player];

  [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayerPlaybackStateDidChange:)
                                                 name:MPMoviePlayerPlaybackStateDidChangeNotification
                                               object:player];

    player.contentURL = movieURL;

    player.movieSourceType = MPMovieSourceTypeFile;

    player.controlStyle = MPMovieControlStyleNone;

    player.fullscreen = YES;

    switch (orientation) {
        case UIInterfaceOrientationLandscapeLeft:
            player.view.transform = CGAffineTransformMakeRotation(90.0f * (M_PI / 180.0f));
            break;
        case UIInterfaceOrientationLandscapeRight:
            player.view.transform = CGAffineTransformMakeRotation(-90.0f * (M_PI / 180.0f));
            break;
        default:
            break;
    }

    player.view.frame = self.view.bounds;

    [self.view addSubview:player.view];
}

[self.moviePlayerController play] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:52:07.147

是`self.moviePlayerController`保留财产吗？如果没有，`MPMoviePlayerController`实例将很快被释放（由`autorelease`），您可能会得到类似的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:15:16.413

无需查看更多代码，我建议您尝试播放您知道可以播放的另一个文件。例如，从这个示例项目中获取电影：http: [//developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html)并查看它是否可以播放。

当我尝试播放格式不正确的文件时，我也遇到了类似的事情。

* * *

嗯...我看不出有什么问题。你确定movieURL是正确的吗？你怎么得到它？

为了记录，这就是我展示电影的方式，尽管它不会产生与你正在做的完全相同的效果。

```
NSString *path = [[NSBundle mainBundle] pathForResource:movieFileName ofType:@"m4v"];

// If path is NULL (the resource does not exist) return to avoid crash
if (path == NULL)
    return;

NSURL *url = [NSURL fileURLWithPath:path];
MPMoviePlayerViewController *mpViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
mpViewController.moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
mpViewController.moviePlayer.shouldAutoplay = YES;

// NOTE: This can sometimes crash the app in the Simulator. This is a known bug
// in xcode: http://stackoverflow.com/a/8317546/472344
[self presentMoviePlayerViewControllerAnimated:mpViewController];
[mpViewController release]; 
```

# perl - 我在 Windows 7 中运行 Perl 脚本，但在查找当前运行的批处理文件的 PID 时遇到问题

> ID：12370450
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:07:55.560
> 
> 标签：perl, windows-7

我正在从父 perl 脚本启动新的独立 Perl 脚本[使用系统（启动命令）]。我正在将子脚本的 PID 写入一个文件，然后在父脚本中读取它，这样每当我想结束子进程时，我都可以简单地使用它的 PID 杀死它。

但是我正在使用子脚本中的子进程 ex system("somebatchfile) 调用另一个批处理文件。这里我的 PID 会改变，我无法关闭它，直到批处理文件完成它的工作。我无法获得 PID批处理文件。我尝试使用 fork 函数，但无论如何调用批处理文件都会创建自己的其他 PID。

我的代码如下。

父脚本：启动一个新脚本并读取 PID 并在需要时终止启动的脚本。

子脚本：

```
open(PID,">PID_Value.txt");
print PID "\$Process_id=$$"; # write the PID of child script
close(PID);
system("somebatch file name"); # I am using Windows 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:24:58.530

如何将 pid 附加到文件中呢？

```
open(PID, ">>PID_Value.txt");
print PID "$$\n";
close(PID); 
```

然后你就不会覆盖其他的pid。

或者，您可以使用`fork()`and`exec()`生成子进程，然后父进程将直接获取子进程的 pid：

```
my $pid = fork();
die "fork failed: $!" unless defined($pid);
if ($pid) {
  push(@child_pids, $pid); # parent executes this
} else {
  # child executes here
  exec("somebatch file name")
    or die "failed to exec somebatch file name: $!";
} 
```

这将是 Unix 的方式来做到这一点。但是，如果您在 Windows 7 下使用 Cygwin perl，我也建议您使用`Win32::Process::Create(...)`，因为这会创建一个真正的 Windows 进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:21:34.540

由于您正在创建一个子进程，该子进程又创建另一个进程来执行批处理，并且假设您无法更改批处理代码，我怀疑有选择地终止批处理进程的唯一方法是遍历所有正在运行的进程名称（使用Win32::Process::Info) 来识别批处理的 PID，然后将其杀死。

# wordpress - 将 div 插入 wp_nav_menu

> ID：12370451
> 
> 赞同：0
> 
> 时间：2012-09-11T13:07:56.167
> 
> 标签：wordpress, html, menu, insert

我正在尝试在 wordpress 的导航菜单中添加一个 div。wp_nav_menu 加载所有菜单项，但我不知道如何将 div 添加到结构中。我的目标是在菜单项悬停时弹出一个子菜单，并在子菜单块的顶部有一个箭头图像，使其看起来像一个方形文本气球。我知道如何将它放在我想要的地方以及所有内容，但不知道如何将 div 放在那里。

现在，看起来像这样

```
<ul class="menu">
 <li>
  <a>
   <ul class="submenu">
    <li>
     <a> 
```

我希望它看起来像这样

```
<ul class="menu">
 <li>
  <a>
   <ul class="submenu">
    <div class="pointer">
     <li>
      <a> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:16:48.617

你最好的选择是使用 Walker Class。将此添加到您的 functions.php 文件中：

```
class Walker_Nav_Pointers extends Walker_Nav_Menu
{
    function start_lvl( &$output, $depth = 0, $args = array() )
    {
        $indent = str_repeat("\t", $depth);
        $output .= "\n$indent<ul class=\"sub-menu\">\n";
        $output .= "\n<div class=\"pointer\">\n";
    }
    function end_lvl( &$output, $depth = 0, $args = array() )
    {
        $indent = str_repeat("\t", $depth);
        $output .= "$indent</ul>\n".($depth ? "$indent</div>\n" : "");
    }
} 
```

然后无论您在哪里调用导航菜单，都将其添加到现有参数中：

```
<?php
$navArgs = array('walker' => new Walker_Nav_Pointers());
wp_nav_menu($navArgs);
?> 
```

上面的例子未经测试，我不能保证它会直接运行，但它应该让你开始。

更多关于[WP Nav Menus](http://codex.wordpress.org/Function_Reference/wp_nav_menu)的信息和一些关于[Add Custom Walkers](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/14039#14039)的信息。

# javascript - 如何在javascript中使用多个函数？

> ID：12370453
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:08:00.180
> 
> 标签：javascript

我的问题是我有三个选择框，用户选择第一个选择框的选项而不是选择第二个选择框的选项，最后第三个选择框的选项将由用户选择加载。它可以工作，但是当用户选择第三个选择框的选项时，我想显示一个文本，但它在这里不起作用是我的代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script></script>
    <script type="text/javascript">
    var zero="0,00";
    var one="0,01";
    $(document).ready(function() {

        $('#main').on('change', '.select-box', function() {

            if ($(".select-box option[value='1']").prop('selected') && $(".select-box option[value='1986']").prop('selected')) {

                $('#street').html("<option value='2'>test</option><option value='3'>test2</option>");

            }
       if ($(".select-box option[value='1']").prop('selected') && $(".select-box option[value='1986']").prop('selected') && $(".select-box option[value='3']").prop('selected')) {
           document.getElementById("demo3").innerHTML=""+zero;
      }

        });

    });
        </script>

    <script type="text/javascript">

    var x="",i;
    for(i=1986;i<2013;i++)
    {
    x=x + "<option value='"+i+"'> " + i + "</option>";
    }
    $(document).ready(function() {
    document.getElementById("forloop").innerHTML="<select class='select-box'><option>Empty/option>"+x+"</select>";
    });
    </script>

    </head>
    <body>  
        <p id="forloop"></p>
        <div id="main">

    <select class="select-box">

          <option value="1">Hello</option>

        </select> 
       <p></p>
      <select class="select-box" id="street">
      <option>Empty<option>
      </select>
    </div>

    <p id="demo3">

        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:19:45.407

您的字符串连接中有多个 HTML 语法错误。您已经在使用 jQuery；为了理智起见（你和我们的）停止用字符串构造 HTML。

```
var selectBox = $('<select>');

$('<option>')
    .text('Empty')
    .appendTo(selectBox);

for (var i = 1986; i < 2013; i++) {
    $('<option>')
        .text(i)
        .val(i)
        .appendTo(selectBox);
}

selectBox.appendTo($('#forloop')); 
```

# php - Jquery 没有关注正确的字段

> ID：12370454
> 
> 赞同：0
> 
> 时间：2012-09-11T13:08:03.173
> 
> 标签：php, jquery

在 jquery 中运行计算后，我试图将焦点放在我的 isbn 文本框或版本文本框中，但它会转到页面上的第一个按钮或销售排名字段。

我的html是：

```
 <td><label>ISBN</label></td>
                <td><input type="text" id="isbn" name="isbn" /></td>
                <td></td>
                <td rowspan=7><a id="detailURL" href="#" target="_blank"><img id="bookCover" src="../images/imgNotFound.gif" height="200px" /></a></td>
                <td rowspan=7><input type="button" id="isIE" name="isIE" value="IE Price Reduction" />
                    <br/><br/><input type="button" id="isAIE" name="isAIE" value="AIE Price Reduction" />
                    <br/><br/><input type="button" id="isModHighlight" name="isModHighlight" value="Moderate Highlighting" />
                    <br/><br/><input type="button" id="isHeavHighlight" name="isHeavHighlight" value="Heavy Highlighting" />
                    <br/><br/><input type="button" id="isMissingSupply" name="isMissingSupply" value="Missing Supply" />
                    <br /><br/><input type="button" id="waterDamage" name="waterDamage" value="Water Damage / Poor Cond." />
                </td>
                <td rowspan=7>
                    <!-- SUPPLY CHECK TABLE -->
                    <table id="supply" summary="Check Supply" width="10%" border="1" align="right">
                    <caption><h3>Check Supply!</h3></caption>
                    <thead>
                    <tr>
                        <th scope="col" class="rounded-isbn">Supply:</th>
                        <!--<th scope="col" class="rounded-isbn">Who Requires:</th>-->
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                    </table>
                </td>
            </tr>
            <tr>
                <td><label for="quantity" class="label">Quantity</label></td>
                <td><input type="text" id="quantity" name="quantity" /></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="payPrice" class="label">Price to Pay</label></td>
                <td><input type="text" id="payPrice" name="payPrice"/></td>
                <td></td>
            </tr>
            <tr>
                <td><label>Edition</label></td>
                <td><input type="text" id="edition" name="edition" readonly="readonly"/></td>
                <td></td>
            </tr>
            <tr>
                <td><label>Title</label></td>
                <td><input type="text" id="title" name="title" /></td>
                <td></td>
            </tr>
            <tr>
                <td><label>Sales Rank</label></td>
                <td><input type="text" id="salesRank" name="salesRank" readonly="readonly" /></td>
                <td></td>
            </tr>

            <tr>
                <td></td><td><input type="button" id="buy" value="Buy" /></td><td></td>
    </table>
    </form> 
```

有问题的jquery是：

```
if($('#payPrice').val() <= 0 ) {
    $(':text')[0].focus();
} else {
    $("#edition").focus();
} 
```

当值为 时`#payPrice`，`<=0`默认为第一个按钮`id="isIE"`而不是`isbn`字段。如果值为`#payprice`is `>0`，则侧重于销售排名文本区域，而不是版本。我尝试设置超时，但效果不如`$("#isbn).focus();`，也无效。我将其更改`$(':text')[0].focus();`为查看是否可行，但它仍然转到第一个按钮。我在这里做错了什么？我该如何纠正它以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:11:22.033

你有没有尝试过

```
if(parseFloat($('#payPrice').val()) <= 0 ) {
...
} 
```

如果 parseFloat 没有区别，试试这个：

```
if($('#payPrice').val()<=0){
   $("input[name='isbn']").focus(); 
}else{
   $("input[name='edition']").focus(); 
} 
```

否则你可以看到那个例子：

```
function sampledFunction()
{
 window.setTimeout(function ()
 {
  $('#mobileno').focus();
 }, 0);
 return false;
} 
```

[在这里](http://antiarti.blogspot.it/2011/09/jquery-focus-function-not-working-in.html)阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:21:29.217

我建议使用更好的选择器：

喜欢`$('[type=text]')`或`$('input:text')`

请参阅：[jQuery 文本选择器](http://api.jquery.com/text-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:25:14.277

这是最终结果，感谢 JackTurky 为我指明了正确的方向。

```
 //focus on either isbn or edition
        setTimeout(function() {
            if($('#payPrice').val() <= 0 ) {
                    $("#isbn").focus();
                } else {
                    $("#edition").focus();
                }
                }, 10); 
```

# javascript - 像这样链接时是否可以设置转换？

> ID：12370455
> 
> 赞同：0
> 
> 时间：2012-09-11T13:08:03.300
> 
> 标签：javascript, jquery, jquery-mobile

我对 ajax 请求有疑问，这迫使我使用 javascript 链接。我这样链接：

```
window.location.href = ('file:///android_asset/www/custom/kontakty.html'); 
```

我想知道单击此类链接时是否可以设置过渡/动画。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:11:44.560

不可靠，不..如果您在浏览器更改位置之前运行脚本.. 对于大多数浏览器来说，一旦建立连接，脚本就会被杀死。您可能会做的是通过 ajax 请求页面并在成功处理程序中替换正文标记或整个页面，您还可以在其中停止/完成动画。

# python - Python 和 IPython 有什么区别？

> ID：12370457
> 
> 赞同：243
> 
> 时间：2012-09-11T13:08:09.337
> 
> 标签：python, ipython

[Python 和IPython](http://en.wikipedia.org/wiki/IPython)之间到底有什么区别？

如果我用 Python 编写代码，它会按原样在 IPython 中运行还是需要修改？

我知道 IPython 应该是 Python 的交互式 shell，但仅此而已吗？或者有没有一种叫做 IPython 的语言？如果我在 IPython 下写东西，它会在 Python 中运行吗，反之亦然？如果存在差异，我怎么知道它们是什么？Python 使用的所有包都会像在 IPython 中一样工作吗？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-09-11T13:09:30.523

[`ipython`](http://ipython.org/)是一个用 python 构建的交互式 shell。

来自项目网站：

> IPython 提供了一个丰富的工具包来帮助您充分利用 Python，其中包括：
> 
> *   强大的 Python shell（终端和基于 Qt）。
> *   基于网络的笔记本，具有相同的核心功能，但支持代码、文本、数学表达式、内联图和其他富媒体。
> *   支持交互式数据可视化和 GUI 工具包的使用。
> *   灵活、可嵌入的解释器，可加载到您自己的项目中。
> *   易于使用的高性能并行计算工具。

请注意，前两行告诉您它可以帮助您充分利用 Python。因此，您无需更改代码，IPython shell 就像普通的 python shell 一样运行您的 python 代码，只是具有更多功能。

我建议阅读[IPython 教程](http://ipython.readthedocs.io/en/stable/interactive/tutorial.html)以了解使用 IPython 时获得的功能。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-02-01T04:18:41.660

IPython 基本上是“推荐的”Python shell，它提供了额外的功能。没有称为 IPython 的语言。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-12-15T12:27:02.043

*IPython*是一个强大的交互式 Python 解释器，与标准解释器相比，它更具交互性。

要获得您键入的标准 Python 解释器`python`，您将从可以工作的地方获得`>>>`提示。

要获得 IPython 解释器，您需要先安装它。`pip install ipython`. 你输入`ipython`，你会得到`In [1]:`一个提示，你会得到`In [2]:`下一个命令。您可以调用`history`以检查先前命令的列表，并写入`%recall 1`以调用命令。

即使您使用 Python，您也可以直接运行 shell 命令，例如`!ping www.google.com`. 如果您以前使用过它，它看起来像一个命令行 Jupiter 笔记本。

如镜像所显示，您可以使用`[Tab]`自动完成。 [![在此处输入图像描述](../Images/c872254f8396680f098d133bd815eb74.png)](https://i.stack.imgur.com/3pCsQ.jpg)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-06-19T18:13:12.543

即使在查看这个帖子之后，我也认为 ipython 是 python shell 的同义词，换句话说，在命令行输入 python 会使一个进入 ipython 模式。

事实上，正如上面提到的，它是一个非常酷的交互式 shell（命令行程序），可以从[iPython.org](http://ipython.org)安装或简单地运行

```
pip install ipython 
```

或更广泛的：

```
pip install ipython[notebook] 
```

从命令行。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-14T07:06:32.377

Python 和 IPython 之间几乎没有区别，但它们只是对少数语法的解释，例如 @Ryan Chase 提到的少数语法，但在内部，即使在 Ipython 中也保留了 Python 的真正风味。

IPython 最好的部分是 IPython 笔记本。你可以把你所有的工作都放在一个笔记本中，比如脚本、图像文件等。但是使用基础 Python，你只能将脚本放在一个文件中并执行它。

一开始，您需要了解 IPython 的开发目的是在单个集成容器中支持富媒体和 Python 脚本。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-24T22:53:11.960

与 Python 相比，IPython（由 Fernando Perez 于 2001 年创建）可以做 Python 可以做的所有事情。Ipython 甚至提供了额外的功能，如制表符补全、测试、调试、系统调用和许多其他功能。您可以将 IPython 视为 Python 语言的强大接口。

您可以使用 pip安装**Ipython -**`pip install ipython`

您可以通过在终端窗口中键入来运行**Ipython 。**`ipython`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-12T18:59:08.290

根据我的经验，我发现一些在 IPython 中运行的命令不能在基础 Python 中运行。例如，`pwd`不要`ls`在基础 Python 中单独工作。但是，如果以`%`诸如:`%pwd`和`%ls`.

此外，在 IPython 中，您可以运行 cd 命令，如下所示：`cd C:\Users\`... 这在基本 python 中似乎不起作用，即使以 a 开头也是`%`如此。

# ldap - 空/空属性值

> ID：12370460
> 
> 赞同：0
> 
> 时间：2012-09-11T13:08:17.390
> 
> 标签：ldap, jndi, apacheds

我在 LDAP 的一个条目中有一些 objectClasses 和 dc 和 ou 属性及其值。我尝试读取 ou 属性，但我无法使用以下代码获取它。我可以正确获得直流值。我知道我必须控制它是否为空，但为什么“ou”可能为空，尽管发生在 LDAP 中。

```
NamingEnumeration answer = ctx.search(searchBaseDn, filter, ctls);
           try
                {   
                    while (answer.hasMore())
                    {
                        SearchResult sr = (SearchResult) answer.next();
                        OrganizationPojo organizationPojo = new OrganizationPojo();
                        organizationPojo.setOrgDc((String)sr.getAttributes().get("dc").get());
                        organizationPojo.setOrgOu((String)sr.getAttributes().get("ou").get()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:49:21.110

dc 值在 OU 上可能不可用。同样，ou 值可能在 DC 上不可用。

-吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:15:26.610

```
ctx = new InitialDirContext(env);
           String[] attrIDs = { "dc", "objectClass","ou" };

           SearchControls ctls = new SearchControls();
           ctls.setReturningAttributes(attrIDs);

           String filter = "(&(dc=*) (objectClass=organizationalUnit) (ou=*))";

           NamingEnumeration answer = ctx.search(dn, filter, ctls); 
```

`attrIds`必须包含`"ou"`.

# sql - 确定左连接是否有多个记录

> ID：12370466
> 
> 赞同：0
> 
> 时间：2012-09-11T13:09:03.070
> 
> 标签：sql, left-join

在建筑项目的 CRM 中，客户、建筑师和其他承包商都作为帐户存在。表 PROJ_AC_LINK 将 ACCOUNT 链接到 PROJECT，字段 PROJ_AC_LINK.ROLE_TYPE_ID 指定该链接代表什么（例如，Joe Simms 链接到角色“建筑师”下的项目 101）。

CRM 数据库和用户界面允许用户将多个帐户链接到同一角色下的项目。在某些情况下这很好（项目有 2 位建筑师），但在某些情况下则不是（我们应该为该项目开具发票的只有一个“客户”）。我无法更改 CRM。

来自单独系统的查询寻求获得 SITE_ADDRESS 和 CLIENT_ADDRESS，并假设每个项目只有一个客户端链接。它像这样查询它（205是角色'client'的代码）：

```
SELECT 
PROJECT.ADDRESS AS SITE_ADDRESS, 
ACCOUNT.ADDRESS AS CLIENT_ADDRESS
FROM PROJECT
LEFT JOIN PROJ_AC_LINK ON 
    (PROJ_AC_LINK.PROJECT_ID = PROJECT.PROJECT_ID 
    AND 
    PROJ_AC_LINK.ROLE_TYPE_ID = '205')
LEFT JOIN ACCOUNT ON PROJ_AC_LINK.ACCT_ID = ACCOUNT.ACCT_ID 
```

如果没有客户端链接到项目，此查询仍会返回 SITE_ADDRESS，但会为 CLIENT_ADDRESS 返回 NULL，这正是我想要的。

使用该系统的人知道如果他们得到一个空白的客户地址，就告诉 CRM 人员。但是，我需要考虑到有多个客户链接到一个项目的可能性。

在 PROJ_AC_LINK 中针对该角色的项目有多个记录的情况下，有没有一种方法可以让 CLIENT_ADDRESS 返回 NULL（或自定义文本）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:15:08.280

您可以根据返回的记录数执行分组语句，然后执行 case 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:51:25.060

这是一种方法：

```
SELECT p.ADDRESS AS SITE_ADDRESS, 
       a.ADDRESS AS CLIENT_ADDRESS
FROM PROJECT p LEFT JOIN
     (select a.PROJECT_ID, a.ADDRESS
      from ACCOUNT a join
           Proj_AC_Link pa
           on pa.Acct_id = a.Acct_Id
      where pa.ROLE_TYPE_ID = '205'
      group by ac.Project_id
      having count(*) = 1
     ) addr
     ON P.PROJECT_id = addr.project_id 
```

这只是从帐户表中返回单例地址。

# jquery - Jquery-ui-map 平移到标记并在按钮单击时打开信息框

> ID：12370468
> 
> 赞同：1
> 
> 时间：2012-09-11T13:09:11.457
> 
> 标签：jquery, google-maps, google-maps-api-3, jquery-ui-map

我正在使用 jquery-ui-map 通过 json 获取数据并显示在我的地图上。这很好用。

但我想做的是能够通过点击我的html页面上的一些链接来平移到选定的标记

所以我有

链接例如 id="13" 或其他

我单击它，它会平移并打开所选标记的信息窗口

我想我需要在标记本身上有一些 id，所以我用 json 将它从我的数据库中提取出来，否则我会迷路......

我正在使用此示例从 json [http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-json.html获取数据](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-json.html)

```
$(function () {
    demo.add(function () {
        $('#map_canvas').gmap({
            'disableDefaultUI': false,
            'callback': function () {
                var self = this;
                $.getJSON('jsonfile', function (data) {
                    $.each(data.markers, function (i, marker) {
                        self.addMarker({
                            'id': marker.id,
                            'position': new google.maps.LatLng(marker.latitude, marker.longitude),
                            'icon': 'images/stendas.png',
                            'bounds': true
                        }).click(function () {
                            self.openInfoWindow({
                                'content': marker.content
                            }, this);
                        });
                    });
                });
            }
        });
    }).load();
}); 
```

我的json是

```
{
    "markers": [{
        "latitude": "55.347889111331924",
        "longitude": "23.01470909375007",
        "title": "Kaunas-Marijampol\u0117",
        "content": "<p>Kelyje Kaunas-Marijampol\u0117 \u00a0(25,5 km nuo Kauno)<\/p>\r\n<p><img src=\"images\/stendu_nuotraukos\/JA_reklaminis_stendas_15000x5000_1_mariampole_r1_c1.jpg\" alt=\"JA reklaminis stendas 15000x5000 1 mariampole r1 c1\" height=\"280\" width=\"370\" \/><\/p>",
        "id": "9"
    }, {
        "latitude": "55.260338151525985",
        "longitude": "24.78350792187507",
        "title": "Panev\u0117\u017eys \u2013 Vilnius",
        "content": "<p>Kelyje Panev\u0117\u017eys \u2013 Vilnius (79 km nuo Vilniaus, prie Ukmerg\u0117s)\u00a0<\/p>\r\n<p><img src=\"images\/stendu_nuotraukos\/P5211983_r1_c1.jpg\" alt=\"P5211983 r1 c1\" height=\"280\" width=\"370\" \/><\/p>",
        "id": "10"
    }, {
        "latitude": "54.87660670317833",
        "longitude": "24.24517784375007",
        "title": "Vilnius \u2013 Kaunas 1",
        "content": "<p>Kelyje Vilnius \u2013 Kaunas (70 km nuo Vilniaus link Kauno)<\/p>\r\n<p><img src=\"images\/stendu_nuotraukos\/Nuo_Vilniaus_1_stendo_puse_r1_c1.jpg\" alt=\"Nuo Vilniaus 1 stendo puse r1 c1\" height=\"280\" width=\"370\" \/><\/p>",
        "id": "11"
    }, {
        "latitude": "54.794351653090246",
        "longitude": "24.68463096875007",
        "title": " Vilnius \u2013 Kaunas 2",
        "content": "<p>Kelyje Vilnius \u2013 Kaunas (55 km nuo Vilniaus link Kauno)<\/p>\r\n<p><img src=\"images\/stendu_nuotraukos\/SDC11331_r1_c1.jpg\" alt=\"SDC11331 r1 c1\" height=\"280\" width=\"370\" \/><\/p>",
        "id": "12"
    }, {
        "latitude": "55.720922855823375",
        "longitude": "21.37774620312507",
        "title": " Klaip\u0117da \u2013 Kaunas",
        "content": "<p>Kelyje Klaip\u0117da \u2013 Kaunas (14,5km nuo Klaip\u0117dos link Kauno)<\/p>\r\n<p><img src=\"images\/stendu_nuotraukos\/P9050011_r1_c1.jpg\" alt=\"P9050011 r1 c1\" height=\"280\" width=\"370\" \/><\/p>",
        "id": "13"
    }]
} 
```

找到至少可以打开任何标记的代码

```
function (map, marker) {
    $('.item-page').click(function () {
        $(marker).triggerEvent('click');
        return false;
    });
} 
```

现在需要具体例如 id=13 的标记

# validation - xPages 中的文件上传验证

> ID：12370472
> 
> 赞同：1
> 
> 时间：2012-09-11T13:09:21.833
> 
> 标签：validation, xpages

根据这篇文章 [http://www-10.lotus.com/ldd/ddwiki.nsf/revisions/6A9EDD911827AA13852574EA00388F8F?OpenDocument](http://www-10.lotus.com/ldd/ddwiki.nsf/revisions/6A9EDD911827AA13852574EA00388F8F?OpenDocument) 简单验证应该适用于文件上传控件。我正在尝试在 extLib Form 表中使用它。

我想验证用户是否选择了一个文件，但无法让它在服务器端验证中工作。也尝试使用自定义验证器，但仍然没有运气。其他必填字段被标记为很好，但不是上传控件。

有谁知道如何验证用户实际选择了一个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:08:40.600

验证仅适用于客户端验证。有一些解决方法：

1.  验证文件是否已附加的最简单方法是将*验证字段*添加到表单并设置数据源的属性*computeWithForm="onsave"*。只要您想保存文档，就会引发验证错误并中断保存。*验证字段*是一个简单的可编辑字段，其验证公式如下：

    ```
    @If(@Attachments = 0;@Failure("No File attached!");@Success) 
    ```

2.  *在querySave*事件中检查您的数据源：

    ```
    if( document1.getAttachmentList("Body").isEmpty() ){
        var msg = new javax.faces.application.FacesMessage("No File added!");
        facesContext.addMessage( "No File!", msg );
        return false;
    } 
    ```

这两种解决方法仅在文档是新创建的情况下才有效。附加文件后，这两个选项不再起作用。

如果你想检查已经存在的文档，你可以在这里使用这个 XSnippet：http://openntf.org/XSnippets.nsf/snippet.xsp?id=replace-attachment-when-uploading-a-new- [attachment](http://openntf.org/XSnippets.nsf/snippet.xsp?id=replace-attachment-when-uploading-a-new-attachment)

然后，您必须修改 XSnippet 以满足您的要求并添加一条消息（如第二个示例所示）。

希望这可以帮助

斯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T23:23:38.647

我知道几个月前就有人问过这个问题并得到了回答，但是当我发现这个时，我今天正在寻找同样问题的答案。

尽管 Sven 的回答没有直接帮助，但选项 #2 为我的解决方案提供了最后的提示。也许它也可以对其他人有用：

首先，我的页面使用标准按钮（**不是**“提交”类型的按钮，因为我需要设置一些隐藏字段以及可编辑的字段）。因此，在最终保存完成之前，我将此脚本添加到我的按钮代码中：

```
var numAtts = myDocDatasource.getAttachmentList("Body").size();
if(numAtts == 0){
    var msg = new javax.faces.application.FacesMessage("You need to attach a file");
    facesContext.addMessage("File validation error", msg);
    return false;
}
//do some more stuff
...
myDocDatasource.save(); 
```

我必须意识到 fileUpload 控件的内容在验证时并不重要，因为在该过程的那个阶段，上传的文件已经是数据源的一部分。

不过，此验证步骤的“时机”有点令人惊讶：至少在我的情况下，其他字段的验证是在文件上传验证*之前*完成的：在 errorMessages 控件中，首先只列出标准验证错误。只有在所有其他字段都已成功验证后，我的 fileUpload 验证器才会显示其错误。

# asp.net-mvc-3 - 显示泛型模板 - 未找到视图

> ID：12370481
> 
> 赞同：0
> 
> 时间：2012-09-11T13:09:35.107
> 
> 标签：asp.net-mvc-3, display-templates

我有以下课程：

```
public class Widget
{
    public string Name { get; set; }
} 
```

通用模型

```
public class GenericModel<T>
{
    public List<T> Data { get; set; }
} 
```

我的控制器动作是：

```
 public ActionResult Simple()
    {
        var model = new GenericModel<Widget>()
                        {
                            Data = new List<Widget>
                                       {
                                           new Widget {Name = "a"}
                                       }
                        };
        return View(model);
    } 
```

而我的观点是：

```
@model MyApp.GenericModel<MyApp.Widget>

@{
    ViewBag.Title = "Simple";
}

<h2>Simple</h2>
@Html.DisplayFor(m=>m) 
```

我在 Views/Shared/DisplayTemplate 文件夹中有一个名为 GenericModel.cshtml 的文件：

```
@model MyApp.GenericModel<MyApp.Widget>

<ul>
@for (int i = 0; i < Model.Data.Count; i++ )
{
    <li>
    @Html.EditorFor(m=> Model.Data[i].Name)
    </li>
}
</ul> 
```

找不到这个视图。我看到当我打印出模型类型的名称时，我得到“GenericModel `1". Seeing that, I renamed my template "GenericModel`1.cshtml”。这似乎有点像黑客，有没有更简单的方法来找到这个显示模板而不诉诸于此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:24:55.223

您必须在 viewstart 中设置它：

```
@Code
    Layout = "~/Views/Shared/DisplayTemplate.cshtml"
End Code 
```

注：以上为VB。

你也可以像这样通过你的控制器传递它：

```
public ActionResult Simple()
{
    var model = new GenericModel<Widget>()
                    {
                        Data = new List<Widget>
                                   {
                                       new Widget {Name = "a"}
                                   }
                    };
    return View("", "DisplayTemplate", model);
} 
```

# java - WebDriver.findElements 抛出 InvalidElementStateException

> ID：12370482
> 
> 赞同：0
> 
> 时间：2012-09-11T13:09:43.547
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我编写了一个简单的方法来检查是否启用了 WebElement，并将此方法放入我的测试用例 Super Object 中：

```
protected boolean isElementEnabled(By by) {
    // Temporarily set the implicit timeout to zero
    int originalTimeout = Integer.parseInt(System.getProperty(
            "com.brainshark.uitests.timeout", "120"));
    driver.manage().timeouts().implicitlyWait(0, TimeUnit.MILLISECONDS);
    // Check to see if there are any elements in the found list
    List<WebElement> elements = driver.findElements(by);
    boolean isEnabled = (elements.size() == 1)
            && elements.get(0).isEnabled();
    // Return to the original implicit timeout value
    driver.manage().timeouts()
            .implicitlyWait(originalTimeout, TimeUnit.SECONDS);
    return isEnabled;
} 
```

我一直在毫无问题地使用它，但突然间我遇到了一个可重复的实例，该方法抛出了 InvalidElementStateException：

> org.openqa.selenium.InvalidElementStateException：findElements 执行失败；SYNTAX_ERR：DOM 异常 12（警告：服务器未提供任何堆栈跟踪信息）命令持续时间或超时：13 毫秒构建信息：版本：'2.23.1'，修订：'未知'，时间：'2012-06-08 12 :33:29' 系统信息：os.name：'Windows 7'，os.arch：'amd64'，os.version：'6.1'，java.version：'1.7.0_05' 驱动程序信息：driver.version：RemoteWebDriver会话 ID：ed1a9cbb238fa4dfb616ad81e7f60141

看来失败取决于我正在搜索的定位器。这个定位器有什么本质上的问题吗？

```
final By AdministrationButton = By
            .cssSelector("div#top-nav a[href~=CorpAdmin/DisplayInformation]"); 
```

为了验证，上面的定位器正在尝试使用包含“CorpAdmin/DisplayInformation”的 href 属性来定位锚元素，该属性是 id=top-nav 的 div 的后代。不应该像我正在使用的那样为 ChromeDriver 工作的 CSS 定位器吗？有谁知道为什么像 findElements 这样的方法会抛出 InvalidElementStateExceptions？提前致谢！

**附录：**进一步的调查表明，只有在我通过不同的方法从一个页面导航到另一个页面后，该方法才会失败。感觉有些东西变得陈旧或引用不再存在的元素或类似的东西。但是，我无法理解那是什么；相同的驱动程序对象可用于测试用例和页面对象，并且每次调用 isElementEnabled 时都会使用该驱动程序对象。没有缓存或引用来自先前页面的 WebElement。我需要对我的驱动程序做些什么来提醒它页面已更改吗？

**附录2：**情节变厚了。现在我不太确定之前的附录。导航到新页面后仍然失败，但我不确定该定位器是否存在问题。我试着用这样的调用来填充我的代码：

```
debug("Attempt 3...");
things = getDriver().findElements(By.cssSelector("div a"));
debug("Attempt 3 found " + things.size() + " things!"); 
```

这些调用成功，直到我离开我开始的页面。他们在页面上找到与简单定位器匹配的 35 个元素。但是，一旦我导航到新页面，我就会得到一个新的异常：

> org.openqa.selenium.WebDriverException: findElements 返回无效值："[{\"ELEMENT\": \":wdc:1347370086846\"}, {\"ELEMENT\": \":wdc:1347370086847\"}, { \"ELEMENT\": \":wdc:1347370086848\"}, {\"ELEMENT\": \":wdc:1347370086849\"}, {\"ELEMENT\": \":wdc:1347370086850\"}, {\"ELEMENT\":\":wdc:1347370086851\"}，{\"ELEMENT\":\":wdc:1347370086852\"}，{\"ELEMENT\":\":wdc:1347370086853\"} , {\"ELEMENT\": \":wdc:1347370086854\"}, {\"ELEMENT\": \":wdc:1347370086855\"}, {\"ELEMENT\": \":wdc:1347370086856\" }, {\"元素\": \":wdc:1347370086857\"}, {\"元素\": \":wdc:1347370086858\"}, {\"ELEMENT\":\":wdc:1347370086859\"}, {\"ELEMENT\":\":wdc:1347370086860\"}, {\"ELEMENT\":\":wdc :1347370086861\"}, {\"ELEMENT\":\":wdc:1347370086862\"}, {\"ELEMENT\":\":wdc:1347370086863\"}, {\"ELEMENT\":\": wdc:1347370086864\"}, {\"ELEMENT\":\":wdc:1347370086865\"}, {\"ELEMENT\":\":wdc:1347370086866\"}, {\"ELEMENT\":\" :wdc:1347370086867\"}, {\"ELEMENT\": \":wdc:1347370086868\"}, {\"ELEMENT\": \":wdc:1347370086869\"}]" （警告：服务器没有提供任何堆栈跟踪信息）命令持续时间或超时：9毫秒构建信息：版本：'2.23.1'，修订：'未知'，时间：'2012-06-08 12:33:29' 系统信息：os.name：'Windows 7'，os.arch：'amd64'，os.version：'6.1'，java.version： '1.7.0_05' 驱动程序信息：driver.version：RemoteWebDriver 会话 ID：174adf3205213984172556afa718f6a1

这就是 Selenium 代表 WebElements 的方式吗？我想这些只是对对象本身的引用。其中只有 26 个，而不是之前返回的 35 个（因为我们在不同的页面上，这可能是正确的数字）。不确定为什么某些东西是无效的或者是什么。如果我改为在上面的 AdministrationButton 的定位器上调用 isElementEnabled，我会像以前一样得到 InvalidElementSateException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:36:14.613

1）第一点。坦率地说，我不喜欢你的方法`isElementEnabled`有条理。要了解 selenium 是否能够使用您的本地化元素进行操作，请尝试以下操作：

```
public boolean isElementPresent(By locatorKey) {
        try {
            driver.findElement(locatorKey);
            return true;
        } catch (org.openqa.selenium.NoSuchElementException e) {
            return false;
        }
    }

driver.findElement(By.cssSelector(....)).isEnabled();
driver.findElement(By.cssSelector(....)).isDisplayed() 
```

但在使用这种方法之前，我建议您使用流利的等待。Fluent wait 返回您通过定位器找到的 web 元素（注意：如果 fluent wait 失败，那么您最好注意您的 xpath 或 neded 元素的 cssselector）：

```
 public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

关于流利的等待我建议你在[这里阅读](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

关于你找到 cssSelector 的方式坦率地说我也不喜欢它。而不是`"div#top-nav a[href~=CorpAdmin/DisplayInformation]"` 更好地尝试这个 `div[id='top'] nav a[href~='CorpAdmin/DisplayInformation']` 并且总是用css或xPAth检查你的本地化元素（例如在firepath中，firefox addon to firebug）。见下图： ![火路定位](../Images/a2b41b3a5dd6cb4ba2ec5cfa7db01614.png)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:11:35.280

顺便说一句，我遇到了类似的问题，但有这样的例外。 [Selenium webcrawling 组合框](https://stackoverflow.com/questions/12377864/selenium-webcrawling-combo-box/12379665#12379665) 所以这种问题意味着你遇到了 selenium 无法与之交互的元素（即不可见、禁用等）。因此，在这些情况下，js 可以帮助我（单击元素或获取元素的文本）。我喜欢 js 与不可见（禁用）的元素交互的方式。恕我直言，我们不需要使用 js 作弊方法进行元素可见性（或启用/禁用）验证）

```
public void jsClickOnElement(String cssSelector){
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());

    } 
```

# python - Plone：更改内容类型的默认模式

> ID：12370484
> 
> 赞同：1
> 
> 时间：2012-09-11T13:09:56.167
> 
> 标签：python, plone, zope

我正在使用该`Products.FacultyStaffDirectory`产品来管理我网站中的联系人。

`FacultyStaffDirectory`当您处于编辑模式时，其中一种内容类型（即）在“分类”选项卡中具有描述字段。现在我需要删除描述字段并将其放在默认选项卡中。

为此，我使用`archetypes.schemaextender`产品来编辑该字段。特别是，我正在使用`ISchemaModifier`.

我已经实现了代码，但该字段仍显示在分类选项卡中。可能是我错过的东西。下面是代码：

这是包含我要修改的描述字段的类：

```
# -*- coding: utf-8 -*-

__author__ = """WebLion <support@weblion.psu.edu>"""
__docformat__ = 'plaintext'

from AccessControl import ClassSecurityInfo
from Products.Archetypes.atapi import *
from zope.interface import implements
from Products.FacultyStaffDirectory.interfaces.facultystaffdirectory import IFacultyStaffDirectory
from Products.FacultyStaffDirectory.config import *
from Products.CMFCore.permissions import View, ManageUsers
from Products.CMFCore.utils import getToolByName
from Products.ATContentTypes.content.base import ATCTContent
from Products.ATContentTypes.content.schemata import ATContentTypeSchema, finalizeATCTSchema
from Products.membrane.at.interfaces import IPropertiesProvider
from Products.membrane.utils import getFilteredValidRolesForPortal
from Acquisition import aq_inner, aq_parent
from Products.FacultyStaffDirectory import FSDMessageFactory as _

schema = ATContentTypeSchema.copy() + Schema((
    LinesField('roles_',
        accessor='getRoles',
        mutator='setRoles',
        edit_accessor='getRawRoles',
        vocabulary='getRoleSet',
        default = ['Member'], 
        multiValued=1,
        write_permission=ManageUsers,
        widget=MultiSelectionWidget(
            label=_(u"FacultyStaffDirectory_label_FacultyStaffDirectoryRoles", default=u"Roles"),
            description=_(u"FacultyStaffDirectory_description_FacultyStaffDirectoryRoles", default=u"The roles all people in this directory will be granted site-wide"),
            i18n_domain="FacultyStaffDirectory",
            ),
        ),
    IntegerField('personClassificationViewThumbnailWidth',
        accessor='getClassificationViewThumbnailWidth',
        mutator='setClassificationViewThumbnailWidth',
        schemata='Display',
        default=100,
        write_permission=ManageUsers,
        widget=IntegerWidget(
            label=_(u"FacultyStaffDirectory_label_personClassificationViewThumbnailWidth", default=u"Width for thumbnails in classification view"),
            description=_(u"FacultyStaffDirectory_description_personClassificationViewThumbnailWidth", default=u"Show all person thumbnails with a fixed width (in pixels) within the classification view"),
            i18n_domain="FacultyStaffDirectory",
            ),
        ),
    ))

FacultyStaffDirectory_schema = OrderedBaseFolderSchema.copy() + schema.copy()  # + on Schemas does only a shallow copy
finalizeATCTSchema(FacultyStaffDirectory_schema, folderish=True)

class FacultyStaffDirectory(OrderedBaseFolder, ATCTContent):
    """
    """
    security = ClassSecurityInfo()
    implements(IFacultyStaffDirectory, IPropertiesProvider)
    meta_type = portal_type = 'FSDFacultyStaffDirectory'

    # Make this permission show up on every containery object in the Zope instance. This is a Good Thing, because it easy to factor up permissions. The Zope Developer's Guide says to put this here, not in the install procedure (http://www.zope.org/Documentation/Books/ZDG/current/Security.stx). This is because it isn't "sticky", in the sense of being persisted through the ZODB. Thus, it has to run every time Zope starts up. Thus, when you uninstall the product, the permission doesn't stop showing up, but when you actually remove it from the Products folder, it does.
    security.setPermissionDefault('FacultyStaffDirectory: Add or Remove People', ['Manager', 'Owner'])

    # moved schema setting after finalizeATCTSchema, so the order of the fieldsets
    # is preserved. Also after updateActions is called since it seems to overwrite the schema changes.
    # Move the description field, but not in Plone 2.5 since it's already in the metadata tab. Although, 
    # decription and relateditems are occasionally showing up in the "default" schemata. Move them
    # to "metadata" just to be safe.
    if 'categorization' in FacultyStaffDirectory_schema.getSchemataNames():
        FacultyStaffDirectory_schema.changeSchemataForField('description', 'categorization')
    else:
        FacultyStaffDirectory_schema.changeSchemataForField('description', 'metadata')
        FacultyStaffDirectory_schema.changeSchemataForField('relatedItems', 'metadata')

    _at_rename_after_creation = True
    schema = FacultyStaffDirectory_schema

    # Methods
    security.declarePrivate('at_post_create_script')
    def at_post_create_script(self):
        """Actions to perform after a FacultyStaffDirectory is added to a Plone site"""
        # Create some default contents
        # Create some base classifications
        self.invokeFactory('FSDClassification', id='faculty', title='Faculty')
        self.invokeFactory('FSDClassification', id='staff', title='Staff')
        self.invokeFactory('FSDClassification', id='grad-students', title='Graduate Students')
        # Create a committees folder
        self.invokeFactory('FSDCommitteesFolder', id='committees', title='Committees')
        # Create a specialties folder
        self.invokeFactory('FSDSpecialtiesFolder', id='specialties', title='Specialties')

    security.declareProtected(View, 'getDirectoryRoot')
    def getDirectoryRoot(self):
        """Return the current FSD object through acquisition."""
        return self

    security.declareProtected(View, 'getClassifications')
    def getClassifications(self):
        """Return the classifications (in brains form) within this FacultyStaffDirectory."""
        portal_catalog = getToolByName(self, 'portal_catalog')
        return portal_catalog(path='/'.join(self.getPhysicalPath()), portal_type='FSDClassification', depth=1, sort_on='getObjPositionInParent')

    security.declareProtected(View, 'getSpecialtiesFolder')
    def getSpecialtiesFolder(self):
        """Return a random SpecialtiesFolder contained in this FacultyStaffDirectory.
           If none exists, return None."""
        specialtiesFolders = self.getFolderContents({'portal_type': 'FSDSpecialtiesFolder'})
        if specialtiesFolders:
            return specialtiesFolders[0].getObject()
        else:
            return None

    security.declareProtected(View, 'getPeople')
    def getPeople(self):
        """Return a list of people contained within this FacultyStaffDirectory."""
        portal_catalog = getToolByName(self, 'portal_catalog')
        results = portal_catalog(path='/'.join(self.getPhysicalPath()), portal_type='FSDPerson', depth=1)
        return [brain.getObject() for brain in results]

    security.declareProtected(View, 'getSortedPeople')
    def getSortedPeople(self):
        """ Return a list of people, sorted by SortableName
        """
        people = self.getPeople()
        return sorted(people, cmp=lambda x,y: cmp(x.getSortableName(), y.getSortableName()))

    security.declareProtected(View, 'getDepartments')
    def getDepartments(self):
        """Return a list of FSDDepartments contained within this site."""
        portal_catalog = getToolByName(self, 'portal_catalog')
        results = portal_catalog(portal_type='FSDDepartment')
        return [brain.getObject() for brain in results]

    security.declareProtected(View, 'getAddableInterfaceSubscribers')
    def getAddableInterfaceSubscribers():
        """Return a list of (names of) content types marked as addable using the
           IFacultyStaffDirectoryAddable interface."""
        return [type['name'] for type in listTypes() if IFacultyStaffDirectoryAddable.implementedBy(type['klass'])]

    security.declarePrivate('getRoleSet')
    def getRoleSet(self):
        """Get the roles vocabulary to use."""
        portal_roles = getFilteredValidRolesForPortal(self)
        allowed_roles = [r for r in portal_roles if r not in INVALID_ROLES]
        return allowed_roles

    #
    # Validators
    #
    security.declarePrivate('validate_id')
    def validate_id(self, value):
        """Ensure the id is unique, also among groups globally."""
        if value != self.getId():
            parent = aq_parent(aq_inner(self))
            if value in parent.objectIds():
                return _(u"An object with id '%s' already exists in this folder") % value

            groups = getToolByName(self, 'portal_groups')
            if groups.getGroupById(value) is not None:
                return _(u"A group with id '%s' already exists in the portal") % value

registerType(FacultyStaffDirectory, PROJECTNAME) 
```

下面是我为更改描述字段的模式而实现的类中的代码部分：

```
from Products.Archetypes.public import ImageField, ImageWidget, StringField, StringWidget, SelectionWidget, TextField, RichWidget
from Products.FacultyStaffDirectory.interfaces.facultystaffdirectory import IFacultyStaffDirectory
from archetypes.schemaextender.field import ExtensionField
from archetypes.schemaextender.interfaces import ISchemaModifier, ISchemaExtender, IBrowserLayerAwareExtender
from apkn.templates.interfaces import ITemplatesLayer
from zope.component import adapts
from zope.interface import implements

class _ExtensionImageField(ExtensionField, ImageField): pass
class _ExtensionStringField(ExtensionField, StringField): pass
class _ExtensionTextField(ExtensionField, TextField): pass

class FacultyStaffDirectoryExtender(object):
    """
    Adapter to add description field to a FacultyStaffDirectory.
    """
    adapts(IFacultyStaffDirectory)
    implements(ISchemaModifier, IBrowserLayerAwareExtender)

    layer = ITemplatesLayer

    fields = [
    ]

    def __init__(self, context):
        self.context = context

    def getFields(self):
        return self.fields

    def fiddle(self, schema):
        desc_field = schema['description'].copy()
        desc_field.schemata = "default"
        schema['description'] = desc_field 
```

这是我的 configure.zcml 中的代码：

```
<adapter
    name="apkn-FacultyStaffDirectoryExtender"
    factory="apkn.templates.extender.FacultyStaffDirectoryExtender"        
    provides="archetypes.schemaextender.interfaces.ISchemaModifier"
/> 
```

有什么我缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:46:25.487

```
def fiddle(self, schema):
    schema['description'].schemata = 'default' 
```

应该足够了。copy() 操作在这里没有任何意义。

为了检查是否实际使用了 fiddle() 方法：使用 pdb 或添加调试打印语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:07:16.300

事实证明，代码没有任何问题。

我通过执行以下操作使其工作：

*   重启了plone网站
*   重新安装了产品
*   清除并重建我的目录

这让它以某种方式工作。

# iphone - 据我所知，iAds 没有显示 - 但 iTunesConnect 上的 iAds Network 显示统计信息

> ID：12370489
> 
> 赞同：0
> 
> 时间：2012-09-11T13:10:03.720
> 
> 标签：iphone, ios, iad

请耐心等待，因为我还没有弄清楚现在发生了什么。

情况：我的应用程序大约 5 天前获得批准并在 AppStore 上发布。从那天起，我一直在跟踪我的应用程序，但我没有看到任何 iAd 在我的 2 台设备上显示，尽管我的测试 iAd 工作正常。

1- 我启用了 iAd，它仍然处于启用状态。

2- 我在 iTunesConnect 上的所有合同都“有效”。

3- 我在 iTunesConnect 中查看我的 iAd 网络页面，我可以看到少量展示次数、e-CPM 和收入。（这应该意味着有人可以在某处看到 iAd）

任何关于正在发生的事情以及我应该如何解决这个问题的想法都会被告知。

可以提供附加信息。

**编辑：**在 StackOverFlow 上有类似这样的问题，但似乎没有一个能够识别问题并解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:08:01.743

对于所有遇到此类问题的人；（我想我应该在实施之前深入研究）

根据 iAd 开发者支持团队的说法；

“iAd 广告目前正在美国、英国、德国、意大利、西班牙、法国、日本和加拿大 App Store 上的应用程序中投放。有关国际扩张的更多信息和更新”

如果上面未列出您应用的主要目标国家/地区，您可能需要查看[https://developers.google.com/mobile-ads-sdk/docs/](https://developers.google.com/mobile-ads-sdk/docs/)，了解如何在您的应用中集成 Google Ads。

# wcf - datajs可以读取非odata服务吗

> ID：12370490
> 
> 赞同：0
> 
> 时间：2012-09-11T13:10:03.250
> 
> 标签：wcf, sharepoint, datajs

我有一个托管在 sharepoint 中的 wcf 服务，它返回一个对象列表。它不是 wcf 数据服务，只是“常规”wcf 数据服务。

数据 js 可以从“常规”wcf 数据服务中读取数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:45:50.587

简而言之 - 不。datajs 只能使用 OData 格式的有效负载。

# php - 实时数据最佳实践和方法

> ID：12370493
> 
> 赞同：0
> 
> 时间：2012-09-11T13:10:07.247
> 
> 标签：php, mysql, ajax, node.js, socket.io

目前我已经制作了一个系统，其中许多屏幕只是列表，每 N 秒更新一次，具体取决于用户选择的每页有多少结果。

这只是 setTimeout 循环中的一个简单的 ajax 调用。我看到我使用的这种方法的主要缺点是它的效率非常低，因为它会产生大量不必要的网络流量和数据库调用。

这样做的原因是屏幕上的数据可能随时更改，但用户需要注意是否有新内容进入列表，以便他们尽快做出反应。

我正在考虑创建一个 Twitter 样式列表，在其中你得到的只是顶部的小通知，这只是你没有看到的所有新项目的 COUNT。然后，用户将单击它们以使用包含的新项目刷新列表。

我遇到的问题是它不是真正的实时列表。

我刚刚开始学习 Socket.io 和 NodeJS，但我认为我可能需要一些时间来了解实现高效的实时列表所需的内容。

你怎么认为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:58:12.290

花时间学习[Node.js](http://nodejs.org/)和[Socket.io](http://socket.io/)。如果您正在寻找浏览器和服务器之间的实时性，那么您将无法真正击败该组合。Socket.io 非常高效，会选择浏览器支持的最佳选项（轮询、websockets 等）。

Socket.io 的文档在好的示例上有点少，但您可以尝试他们的[示例](https://github.com/LearnBoost/socket.io/tree/master/examples)或[HowToNode](http://howtonode.org/websockets-socketio)文章。

你很可能也想把[Express](http://expressjs.com/)放在那里，这是一个很棒的模块。

祝你好运。

# http - 在两个网站之间共享 cookie

> ID：12370495
> 
> 赞同：47
> 
> 时间：2012-09-11T13:10:10.163
> 
> 标签：http, cookies

我已经建立了一个网站 (A)，它可以登录并从单独的 Web 服务中检索客户数据。

拥有 (A) 的组织也有一个网站 (B)，该网站有一个 Web 表单。他们希望 (A) 上的登录客户能够点击进入 (B) 并查看包含其详细信息的预填充表单。

这意味着 (A) 必须将他们的客户 ID 写入 cookie，(B) 可以读取该 cookie，然后 (B) 可以从 Web 服务请求数据，并预填充表单。

这提出了两个问题：

1.  网站 (B) 可以读取网站 (A) 的 cookie 吗？

2.  如果是这样，为了防止某人编辑 cookie 并在表单中查看其他人的数据，我需要做一些事情，比如在 (A) 上加密 cookie，然后在 (B) 中解密 - 沿着这条线有什么建议吗？

我无法将现有登录名更改为 OAuth 或其他内容，因为 Web 服务已被其他几个站点使用，因此无法更改。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-11T13:15:24.550

不能。网站 B 无法从网站 A 读取 cookie。

最简单的解决方法是将登录/凭据信息从网站 A 传递到网站 B，并让网站 B 设置单独的 cookie。例如，在登录网站 A 后，您可以使用加密的查询字符串将他们快速重定向到网站 B。然后，网站 B 可以读取信息，设置自己的 cookie，并将用户重定向回网站 A。

这很混乱，但有可能。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-09-12T18:48:26.807

你提到同一家公司拥有这两个网站。正如您所怀疑的，如果这些站点具有相同的域，例如 www.mycompany.com 和 store.mycompany.com，那么它们可以共享 cookie。HTTP 响应标头看起来像这样：

```
Set-Cookie: user_id=1295214458; Path=/; Domain=.mycompany.com 
```

由于客户端可以直接访问此数据，因此您还应该包含一个签名，以便检测到篡改。通常整个事情都被加密并签署成一个“令牌”，并将其设置为cookie。但从技术上讲，只需要签名。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-04-08T11:08:55.910

如果在您的情况下，您的所有用户都使用支持 HTML5 的浏览器，您可以使用`window.postMessage`允许`addEventListener`一侧和另一侧`postMessage`的方法。这是一篇不错的文章/示例：[https](https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage) ://developer.mozilla.org/en-US/docs/Web/API/window.postMessage 。

然后步骤很简单：

1.  将隐藏的 iframe 添加到站点 A 到站点 B
2.  使用 window.postMessage 将 B 的 cookie 发送给 A
3.  将接收到的cookie存储在A的cookie中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T13:20:14.893

Cookie 只能被设置为的单个域访问。

我相信如果您在同一个域上使用两个子域，则可以共享 cookie，但是浏览器不会将在一个域上设置的 cookie 发送给任何其他域。

编辑：您还希望避免在 cookie 中存储大量数据。您是否有机会创建站点 B 可以使用 javascript 查询的 api？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T13:19:48.673

互联网上有一些开源工具可以做到这一点，但这与 cookie 哲学背后的整体理念背道而驰。Cookie 只能由一个域访问。但是，您可以模拟该域并“破解”到浏览器中。不建议这样做，并且某些浏览器具有更严格的安全性并且不允许这样做。

我建议您在网站 A 中创建一个 Web 服务，并授予 B 阅读权限来阅读它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-17T20:48:27.463

潜在的解决方法：您可以在辅助站点上使用内联框架来显示来自主站点的内容（占用整个窗口）：

```
<!DOCTYPE HTML>
<html>  
  <head>  
       <title>your page title</title>  
        <style type="text/css">
            body, html {
            margin: 0; padding: 0; height: 100%; overflow: hidden;
            }
            #content {
            position:absolute; left: 0; right: 0; bottom: 0; top: 0px; 
            }
        </style>
  </head>  
  <body>
    <div id="content">
    <iframe width="100%" height="100%" frameborder="0" src="http://yourMainSite.com/dataDependentPage.php" ></iframe>
    TESTING
    </div>
  </body>  
 </html> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-19T02:37:45.067

[HttpCookie.Domain 属性](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpcookie.domain?view=netframework-4.8#System_Web_HttpCookie_Domain)可能会有所帮助。

摘抄：

```
MyCookie.Domain = domainName; 
```

# python - 解析 JSON 并将数据存储在 Python 类中

> ID：12370498
> 
> 赞同：8
> 
> 时间：2012-09-11T13:10:30.770
> 
> 标签：python, json, class

这是我的 JSON 数据

```
[
    {
        "id":1,
        "name":"abc",
        "phone": "12345",
        "Charecteristics": [
            {
                "id":1,
                "name":"Good Looking",
                "rating": "Average",
            }
            {
                "id":2,
                "name":"Smart",
                "rating": "Excellent",
            }
        ]
    },
    { ... },
    { ... }
] 
```

我在 Python 中有两个类

```
class Character(object):
    id = 0
    name = ""
    rating = ""

class Person(object):
    id = 0
    name = ""
    phone = ""
    Characteristics = [] 
```

我需要解析 JSON 数据并实例化适当的类。这些类是不言自明的：即 Person 有一个 Character 类的数组。

如何实例化这些并适当地存储数据？

另外，我将如何访问特定的个人数据？即人的详细信息和特征

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T13:24:09.810

看看[滤锅](http://docs.pylonsproject.org/projects/colander/en/latest/)；它使将 JSON 数据结构转换为 Python 对象变得非常容易。

您定义一个模式：

```
import colander

class Characteristic(colander.MappingSchema):
    id = colander.SchemaNode(colander.Int(),
                             validator=colander.Range(0, 9999))
    name = colander.SchemaNode(colander.String())
    rating = colander.SchemaNode(colander.String())        

class Characteristics(colander.SequenceSchema):
    characteristic = Characteristic()

class Person(colander.MappingSchema):
    id = colander.SchemaNode(colander.Int(),
                             validator=colander.Range(0, 9999))
    name = colander.SchemaNode(colander.String())
    phone = colander.SchemaNode(colander.String())
    characteristics = Characteristics()

class Data(colander.SequenceSchema):
    person = Person() 
```

然后使用以下内容传入您的 JSON 数据结构：

```
deserialized = Data.deserialize(json.loads(json_string)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-24T13:24:44.530

如果您使用 python 3.6+ 编写，最简单的可能是使用[marshmallow-dataclass](https://github.com/lovasoa/marshmallow_dataclass)：

```
from marshmallow_dataclass import dataclass
from typing import List

@dataclass
class Character:
    id : int
    name : str
    rating : str

@dataclass
class Person:
    id : int
    name : str
    phone : str
    characteristics : List[Character]

my_person = Person.Schema().loads(json_str) 
```

# php - 找到数组值的总和

> ID：12370500
> 
> 赞同：-6
> 
> 时间：2012-09-11T13:10:33.733
> 
> 标签：php, arrays, sum

我有一个 3 维数组示例

```
arr[a][h][x] = 12
arr[a][p][x] = 12
arr[d][r][z] = 15
arr[a][f][x] = 12
arr[a][u][x] = 12
arr[b][q][y] = 19
arr[e][h][n] = 16
arr[f][h][n] = 14
---
--- 
```

使用PHP，我需要找到总和

```
arr[a][ANY][x]=? 
```

其中 ANY - 可以有任何值

```
( arr[a][p][x] + arr[a][h][x] + arr[a][f][x]+... ) 
```

我还需要找到总和

```
arr[ANY][h][n]=? 
```

有谁能够帮助我？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:18:41.683

```
 $sum = 0;
 foreach ($arr['a'] as $a) {
      if (isset($a['x'])) {
           $sum += $a['x'];
      }
 } 
```

这将适用于第一个。一个变体将适用于第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:17:15.553

```
<?php
    $sum1 = 0;
    $sum2 = 0;  
    foreach($array['a'] AS $smallArray){
      $sum1 += $smallArray['x'];
    }

    foreach($array AS $smallArray){
      $sum2 += $smallArray['h']['n'];
    } 
```

# javascript - 您可以将 grunt.js 中的 linter 更改为 jslint 吗？

> ID：12370501
> 
> 赞同：6
> 
> 时间：2012-09-11T13:10:36.037
> 
> 标签：javascript, jslint, gruntjs

我看到 grunt.js 中的默认 linter 是 jshint，但我已经习惯使用 jslint。是否可以更改 grunt.js 使用的 linter？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T14:51:05.977

**无耻的自我推销**

有一个插件：[https ://npmjs.org/package/grunt-jslint](https://npmjs.org/package/grunt-jslint)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T21:18:29.297

不是开箱即用，但您可以使用 grunt 的 api 为 JSLint 创建自己的 grunt 任务：[https ://github.com/cowboy/grunt/blob/master/docs/api.md#creating-tasks](https://github.com/cowboy/grunt/blob/master/docs/api.md#creating-tasks)

这很简单，你可以通过 grunt 源代码中的 tasks 文件夹来查看示例。[https://github.com/cowboy/grunt/tree/master/tasks](https://github.com/cowboy/grunt/tree/master/tasks)

如果还没有用于 JSLint 的 npm 模块，那么制作一个也不是太难。只需添加一个 package.json 文件来描述您制作的 JSLint 节点模块并发布它，我一次只能发布两个链接，但您可以在 npm 主页阅读发布链接。

您还可以查看 JSLint 的配置选项并使 JSHint 的选项相同。大多数事情都应该有选项，而 JSHint 有更多 JSLint 没有的选项。一般用法是一样的，用注释标记你的代码，然后运行它。:)

# python - 使用 Python 将 Unix 套接字连接到随机 TCP 套接字，并且可能是 Socat

> ID：12370508
> 
> 赞同：0
> 
> 时间：2012-09-11T13:10:56.237
> 
> 标签：python, sockets, socat

我想通过管道将 TCP 套接字连接到 Unix 套接字我可以像这样使用 socat 来做到这一点

```
socat TCP-LISTEN:1234 UNIX-CONNECT:test.socket 
```

但是这里的问题是，我不想自己指定端口号我希望操作系统为我选择一个空闲端口，但我仍然可以知道端口。

我写了这个脚本，它不起作用，但可以说明我想要做什么

```
def bind(unix_sock_file):
    tcp_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    tcp_socket.bind(('', 0))
    tcp_socket.listen(1)
    cmd = 'socat - UNIX-CONNECT:%s' % unix_sock_file
    Popen(cmd, shell=True, stdin=tcp_socket, stdout=tcp_socket, close_fds=True)
    return tcp_socket.getsockname() 
```

我得到的错误是：

> 2012/09/11 15:34:39 socat[26509] E read(0, 0x1e97a90, 8192)：传输端点未连接

注意#1：我也接受除 socat 之外的任何其他解决方案
注意#2：此脚本应该通过管道连接一个监听 Unix Socket 的 Web 服务器，以及一个连接到生成的 TCP 端口的 Web 浏览器。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:20:01.370

尝试使用[socket.getsockname()](http://docs.python.org/library/socket.html#socket.socket.getsockname)来获取端口号，如下所示（在 iPython 中尝试过）：

```
In [7]: tcp_socket.getsockname()[1]
Out[7]: 41605 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:54:13.400

尝试替换`UNIX-CONNECT`为`UNIX-LISTEN`. 使用 CONNECT，您正在尝试连接到存在的套接字；这不是它的故障。如果我理解你想要什么，你希望这段代码创建一个新的 UNIX 套接字。

改变：

```
cmd = 'socat - UNIX-CONENCT:%s' % unix_sock_file 
```

到：

```
cmd = 'socat - UNIX-LISTEN:%s' % unix_sock_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:43:17.627

我想出了一个更简单的方法，这里是：

```
def bind(unix_sock_file):
    CMD = "socat TCP-LISTEN:0 UNIX-CONNECT:%s" % unix_sock_file
    pid = Popen(CMD, shell=True, close_fds=True).pid
    return psutil.Process(pid).get_children()[0].get_connections()[0].local_address[1] 
```

# c# - MEF ImportMany 类型参数：优雅的解决方案？

> ID：12370509
> 
> 赞同：2
> 
> 时间：2012-09-11T13:11:08.297
> 
> 标签：c#, .net, metadata, mef

我对 MEF 完全陌生，想在我目前正在开发的项目中使用它。

想法：我想写一个`FileLoader<T>`它`T`作为我试图加载的类型的参数，并为我提供支持将哪些文件扩展名加载到这种类型中的数据。类型加载器在分散在解决方案中的类中提供，`Func<string, T>`并且应该由 MEF 收集到`IEnumerable`. 然后从元数据中收集支持的文件类型。

现在我就是这样做的：

```
[Export(typeof(IFileLoader<>))]
class FileLoader<TData> : IFileLoader<TData>
{
    static FileLoader()
    {
        SimpleIoc.Default.Register(() => { return new FileLoader<Model.CompositeSignal<Model.SignalBase>>(); });
    }

    [ImportMany(typeof(Func<string, TData>))] // Problem here!!!
    private IEnumerable<Func<string, TData>> Loaders { get; set; }

    public FileLoader()
    {
        //TODO: Compose here
    }

    public IEnumerable<FileExtensionFilter> GetSupportedFiletypes()
    {
        throw new NotImplementedException();
    }

    public TData LoadFromFile(string filename)
    {
        throw new NotImplementedException();
    }
}

//////////////// Somewhere else in a class //////////////////////////////////////

    [Export(typeof(Func<string, CompositeSignal<SignalBase>>))]
    [SupportedFileType(FileTypeDescription="Signal interpolation file", FileTypeMask="*.interpol.xml")]
    public CompositeSignal<InterpolatedSignal> InterpolationFileLoader(string filename)
    {
        throw new NotImplementedException(); //TODO
    }

////////////////////////////////////////////////////////////////////////////////

[MetadataAttribute]
[AttributeUsage(AttributeTargets.Method, AllowMultiple=true)]
public class SupportedFileTypeAttribute : Attribute
{
    public string FileTypeDescription { get; set; }
    public string FileTypeMask { get; set; }

    public SupportedFileTypeAttribute() 
        : base() 
    { } 
} 
```

问题是我不能在 ImportMany 属性的 typeof 中有一个通用参数。现在，我当然可以尝试导入所有类型加载器并循环遍历它们，但我无法想象这是一个优雅的解决方案。

最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:34:59.717

我不认为循环访问该`Loaders`属性是一件坏事。您只需执行一次（或每次发生重组，如果您设置`AllowRecomposition = True`）。

我会让元数据指定它加载的数据类型，并根据它提取想要的加载器。这基本上就是元数据的用途。如果您使用`Lazy<T, TMetadata>`，则甚至不会创建您不使用的类型。

# ios - 应用程序委托之前的 NSURL 上的 NSInvalidArgumentException

> ID：12370514
> 
> 赞同：1
> 
> 时间：2012-09-11T13:11:22.610
> 
> 标签：ios, crash, nsurl, launch

在 xcode 4.4.1 更新后，我的应用程序不再通过编译过程。抛出此异常：

```
2012-09-11 14:32:19.057 MyApp[5001:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'
*** First throw call stack:
(0x356d888f 0x37a7f259 0x356d8789 0x356d87ab 0x3516905f 0x35168ffb 0x4005 0x33144cab 0x3313e7dd 0x3310cac3 0x3310c567 0x3310bf3b 0x372cb22b 0x356ac523 0x356ac4c5 0x356ab313 0x3562e4a5 0x3562e36d 0x3313d86b 0x3313acd5 0x3d0d 0x3c70)
terminate called throwing an exception(lldb) bt
* thread #1: tid = 0x1c03, 0x35f8e32c libsystem_kernel.dylib`__pthread_kill + 8, stop reason = signal SIGABRT
    frame #0: 0x35f8e32c libsystem_kernel.dylib`__pthread_kill + 8
    frame #1: 0x32ada20e libsystem_c.dylib`pthread_kill + 54
    frame #2: 0x32ad329e libsystem_c.dylib`abort + 94
    frame #3: 0x35a90f6a libc++abi.dylib`abort_message + 46
    frame #4: 0x35a8e34c libc++abi.dylib`_ZL17default_terminatev + 24
    frame #5: 0x37a7f356 libobjc.A.dylib`_objc_terminate + 146
    frame #6: 0x35a8e3c4 libc++abi.dylib`_ZL19safe_handler_callerPFvvE + 76
    frame #7: 0x35a8e450 libc++abi.dylib`std::terminate() + 20
    frame #8: 0x35a8f824 libc++abi.dylib`__cxa_rethrow + 88
    frame #9: 0x37a7f2a8 libobjc.A.dylib`objc_exception_rethrow + 12
    frame #10: 0x3562e50c CoreFoundation`CFRunLoopRunSpecific + 404
    frame #11: 0x3562e36c CoreFoundation`CFRunLoopRunInMode + 104
    frame #12: 0x3313d86a UIKit`-[UIApplication _run] + 550
    frame #13: 0x3313acd4 UIKit`UIApplicationMain + 1080
    frame #14: 0x00003d0c MyApp`main + 152 at main.m:23 
```

在这里我没有得到诀窍，因为在到达应用程序委托之前引发了异常。所以我真的没有看到我错过了一个网址......

如果有人可以提供帮助，那将非常酷......谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:21:12.930

异常 'NSInvalidArgumentException' 有两种情况，原因：' *** -[NSURL initFileURLWithPath:]: nil string parameter' ：

1) 将 stringPath 值传递给 initFileURLWithPath:stringPath 但**它是 nil**

2) initFileURLWithPath:stringPath 除了 stringPath 是**NSString 没有别的。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:56:21.850

好的..所以诀窍是我导入的 .caf 文件的路径错误...

这很奇怪，因为它没有向我显示正确的线路。重新导入文件更正了错误。

为了找到该行，我在 xcode 断点视图中使用了异常断点...

感谢向我展示的那个人:)

# jsf - Primefaces 无法加载 PanelMenu 组件

> ID：12370516
> 
> 赞同：2
> 
> 时间：2012-09-11T13:11:42.827
> 
> 标签：jsf, primefaces

我在我的项目中使用 primefaces。当我在其中一个 .xhtml 页面中使用该组件时，我收到以下错误消息：

“标签库支持命名空间：[http](http://primefaces.org/ui) ://primefaces.org/ui，但没有为名称定义标签：panelMenu”

我正在使用 primefaces 3.3.1 jar 。

代码片段：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Welcome to OTV_JSF_Spring_Hibernate_Project</title>
<style type="text/css">
h1{
    font-family:"Times New Roman";
    font-size:7px;
  }

pre{
    font-family:"Times New Roman";
    font-size:25px;
    font-style:bold;
    align:center;
}
</style>
</h:head>
<h:body>
    <h:form>

         <p:layout style="min-width:300px;min-height:700px;" id="layout">  
             <p:layoutUnit position="east" resizable="true" size="300" minSize="40" maxSize="300">  
               <p:panelMenu style="width:200px">  
                     <p:submenu label="Create Form">  
                        <p:menuitem value="New Form" actionListener="" icon="ui-icon-disk" />  
                        <p:menuitem value="Current Form" actionListener=""  icon="ui-icon-arrowrefresh-1-w" />  
                        <p:menuitem value="Form Templates" actionListener=""  icon="ui-icon-arrowrefresh-1-w" />
                     </p:submenu>  

                <p:submenu label="Publish Form" >  
                    <p:menuitem value="Home" actionListener=""  ajax="false" icon="ui-icon-close"/>  
                    <p:menuitem value="Docs" actionListener=""  ajax="false" icon="ui-icon-close"/>  
                </p:submenu>  
                 <p:submenu label="Users Profile">  
                         <p:menuitem value="Add New User" actionListener=""  ajax="false" icon="ui-icon-close"/>  
                         <p:menuitem value="Edit User Profile" actionListener=""  ajax="false" icon="ui-icon-close"/>
                         <p:menuitem value="Remove Users" actionListener=""  ajax="false" icon="ui-icon-close"/>
                         <p:menuitem value="View Users Report" actionListener=""  ajax="false" icon="ui-icon-close"/>
                     </p:submenu>  
                <p:separator />  

            </p:panelMenu>   
       </p:layoutUnit>  

         <p:layoutUnit position="center">  
         <h1><font size = "6"><h:outputLabel for="createform" value="Create New Form"/></font></h1>
         <hr width="98%"></hr>
             <table> 

             <tr>
                <td width="30%"><pre><h:outputLabel for="name" value="Name of the form : " /></pre></td>
                <td align="left"><p:inputText id="name" value="#{questionMB.formName}" label="Name of the form">
                </p:inputText>
                    <p:message id="formMsg" for="name" display="icon"/> 

                </td>
             </tr>   
              <tr>
                <td width="30%"><pre><h:outputLabel for="desc" value="Description of the form : " /></pre></td>
                <td align="left"><p:inputTextarea rows="4" cols="60" value="#{questionMB.formDesc}"/>
                </td>
             </tr>            
             <tr>
              <td width="30%"><pre><h:outputLabel for="question" value="Question : " /></pre></td>
                <td align="left">
                    <p:accordionPanel>  
    <p:tab title="Godfather Part I">  
        <h:panelGrid columns="2" cellpadding="10">  

           <p:inputText id="question" value="#{questionMB.questionText}">
                        <f:validateLength minimum="5" /> 
                        <p:ajax event="blur" update="questionMsg" />
                    </p:inputText>
                    <p:message id="questionMsg" for="question" display="icon"/> 
        </h:panelGrid>  
    </p:tab>  
   </p:accordionPanel>
                </td> 
             </tr>
              <tr>
                <td width="30%"><pre><h:outputLabel for="answer" value="Answer Type : " /></pre></td>
                <td align="center">
      <h:panelGrid columns="2" rows="1" style="margin-bottom:10px" cellpadding="5">  
            <p:selectOneRadio id="options" value="#{questionMB.answerType}">  
            <f:selectItem itemLabel="Text field" itemValue="Text field" />  
            <f:selectItem itemLabel="Combo box" itemValue="Combo box" />  
            <f:selectItem itemLabel="Radio button" itemValue="Radio button" />  
            <f:selectItem itemLabel="Check box" itemValue="Check box" />
            <f:selectItem itemLabel="Date box" itemValue="Date box" /> 
            <f:selectItem itemLabel="Y/N Button" itemValue="Y/N Button" />
             </p:selectOneRadio>  
     </h:panelGrid>  
                </td>
             </tr>
             <tr></tr><tr></tr><tr></tr>

             <tr>
                <td></td><td></td>
                <td><p:commandButton id="addNewQuestion" value="Add New Question" action="#{questionMB.addNewQuestion}" ajax="true"/>
               </td>
             </tr> 
             <tr>
                <td></td><td></td>
                <td><p:commandButton id="addQuestion" value="Save" action="#{questionMB.addQuestion}" ajax="true"/>
                <p:commandButton id="submitQuestion" value="Submit" action="#{questionMB.saveandsubmitForm}" ajax="false"/></td>
             </tr>
             </table> 
         </p:layoutUnit>  
</p:layout>   

    </h:form>
</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:55:24.493

您收到该错误是因为 p:panelMenu 不在 3.3.1 版本中。它在 3.4 中引入。[在此处](http://www.primefaces.org/documentation.html)查看 3.3.1 的文档

# java - session.getAttribute 没有返回正确的值

> ID：12370519
> 
> 赞同：0
> 
> 时间：2012-09-11T13:11:51.453
> 
> 标签：java

在我的一个应用程序中，我在会话中设置了一个变量（字符串）。详细代码在我的一个 servlet 中。

```
HttpSession session = request.getSession();
String val1 = "http://abc.gmail.com/pp/hello.do?supplierId=894";
session.setAttribute("val1", val1); 
```

现在我通过下面的代码在一个jsp中检索了会话属性的值。

```
<%
String val1 = (String) session.getAttribute("val1");
System.out.println("The value is-->>"+val1);
%> 
```

但它只打印“http://abc.gmail.com/pp/hello.do?supplierId”

你能帮我解决这个错误吗？我希望 o/p 是“http://abc.gmail.com/pp/hello.do?supplierId=894”

谢谢， 苏拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:30:03.733

这有两个可能的原因：

1.  在代码的其他地方，该值被覆盖
2.  发布示例时，您剥离了太多代码。

要找出哪个是哪个，您可以：

1.  在后面添加一个`System.out.println()`右侧`session.setAttribute()`以查看实际放入会话的值。
2.  创建一个过滤器，在每个请求之前和之后打印值。这将帮助您缩小修改的范围。
3.  在执行中设置断点`session.setAttribute()`。设置数千个属性时可能不可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:21:56.003

我认为你有问题=

尝试关注

1.  在base64中转换字符串，把它放在会话中
2.  从会话中获取字符串，将base64转换为普通

我应该工作

# objective-c - 更改托管对象属性不会触发 NSFetchedResultsController 更新表视图

> ID：12370521
> 
> 赞同：26
> 
> 时间：2012-09-11T13:11:56.347
> 
> 标签：objective-c, ios, nsfetchedresultscontroller, nsmanagedobject, nsmanagedobjectcontext

我有一个带有谓词的**fetchedResultsController**，其中**“isOpen == YES”**

当调用**closeCurrentClockSet**时，我将该属性设置为**NO**。因此，它不应再出现在我的 tableView 上。

出于某种原因，这没有发生。

有人可以帮我解决这个问题吗？

```
-(void)closeCurrentClockSet
{

    NSPredicate * predicate = [NSPredicate predicateWithFormat:@"isOpen == YES"];

    NSArray *fetchedObjects =
        [self fetchRequestForEntity:@"ClockSet"
                      withPredicate:predicate
             inManagedObjectContext:[myAppDelegate managedObjectContext]];

    ClockSet *currentClockSet = (ClockSet *)fetchedObjects.lastObject;

    [currentClockSet setIsOpen:[NSNumber numberWithBool:NO]];

} 
```

--

我还有几个方法，使用**完全相同的方法**，通过调用自定义**fetchRequestForEntity:withPredicate:inManagedObjectContext**方法。

在这些方法中，当更改属性时，tableView 会正确更新！但是上面的这个（**closeCurrentClockSet**）没有！我不知道为什么。

--

我的 fetchedResultsController 实现来自 Apple 的文档。

**另外，还有一个细节。如果我将我的应用程序发送到后台。关闭它并重新打开，tableView 显示应该更新了！**

我已尽力在 stackOverflow 上关注之前的问题。没运气。我也 NSLogged 这一点。对象被正确获取。这是正确的。**isOpen 属性**正在正确更新为**NO**。但由于某种原因，我的 fetchedResultsController 没有更新 tableView。

我确实尝试了几个“锤子”解决方案，比如 reloadData 和调用 performFetch。但这没有用。或者使用它们会有意义......

**编辑：从头开始，它确实有效，在我的 resultsController 上的 performFetch 之后立即调用 reloadData**但使用 reloadData 正在敲定一个解决方案。另外，它会删除所有动画。我希望我的控制器自动更新我的 tableView。

有人可以帮我解决这个问题吗？

任何帮助是极大的赞赏！

谢谢，

努诺

编辑：

完整的实现。

fetchedResultsController 非常标准和直接。其他一切都来自 Apple 的文档

```
- (NSFetchedResultsController *)fetchedResultsController
{

    if (_fetchedResultsController) {
        return _fetchedResultsController;
    }

    NSManagedObjectContext * managedObjectContext = [myAppDelegate managedObjectContext];

    NSEntityDescription *entity  =
        [NSEntityDescription entityForName:@"ClockPair"
                    inManagedObjectContext:managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        [fetchRequest setEntity:entity];

    NSString *predicate = [NSString stringWithFormat: @"clockSet.isOpen == YES"];
        [fetchRequest setPredicate: [NSPredicate predicateWithFormat:predicate]];

    NSSortDescriptor *sortDescriptor1 =
        [[NSSortDescriptor alloc] initWithKey:@"clockIn" ascending:NO];

    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor1, nil];

        [fetchRequest setSortDescriptors:sortDescriptors];
        [fetchRequest setFetchBatchSize:20];

    NSFetchedResultsController *theFetchedResultsController =
        [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                            managedObjectContext:managedObjectContext
                                              sectionNameKeyPath:nil
                                                       cacheName:@"Root"];

    _fetchedResultsController = theFetchedResultsController;
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;

} 
```

## --

Apple 文档中的样板代码：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:

            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationTop];

            break;

        case NSFetchedResultsChangeDelete:

            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];

            break;

        case NSFetchedResultsChangeUpdate:

            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationFade];

            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationFade];

            break;

        case NSFetchedResultsChangeMove:

            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationLeft];

            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationTop];

            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller
  didChangeSection:(id )sectionInfo
           atIndex:(NSUInteger)sectionIndex
     forChangeType:(NSFetchedResultsChangeType)type
{

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:

            [tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                     withRowAnimation:UITableViewRowAnimationFade];

            break;

        case NSFetchedResultsChangeDelete:

            [tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                     withRowAnimation:UITableViewRowAnimationFade];

            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

**第一次更新：**

跟踪**[managedObjectContext hasChanges]**确实返回 YES，这是应该的。但是 fetchedResultsController 不会更新 tableView

**第二次更新**

didChangeObject:atIndexPath:在这种特殊情况下**不会被调用！**我还有 2 种方法，使用完全相同的代码，它们只是碰巧是不同的实体。他们完美地工作。感谢@Leonardo 指出这一点

**第三次更新**此方法，遵循相同的规则。但确实有效。

```
- (void)clockOut
{
    NSPredicate * predicate = [NSPredicate predicateWithFormat:@"isOpen == %@", [NSNumber numberWithBool:YES]];

    NSArray * fetchedObjects =
        [self fetchRequestForEntity:@"ClockPair"
                      withPredicate:predicate
             inManagedObjectContext:[myAppDelegate managedObjectContext]];

    ClockPair *aClockPair = (ClockPair *)fetchedObjects.lastObject;

    aClockPair.clockOut = [NSDate date];
    aClockPair.isOpen   = [NSNumber numberWithBool:NO];

} 
```

有人对我可能遗漏的内容有任何其他想法吗？

谢谢，

努诺

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-12T00:44:13.657

好的，我将解释您的问题，然后我将让您判断是否是FRC中的错误。如果您认为这是一个错误，那么您真的应该向苹果提交错误报告。

您的获取结果控制器谓词是这样的：

```
NSString *predicate = [NSString stringWithFormat: @"clockSet.isOpen == YES"]; 
```

这是布尔值的有效谓词。它将遵循`clockSet`实体的关系并获取其`isOpen`属性。如果是，`YES`那么这些对象将被接受到对象数组中。

我认为我们在这里做得很好。

现在，如果您将`clockSet.isOpen`属性之一更改为`NO`，那么您希望看到该对象从您的表视图中消失（即，它不应再与谓词匹配，因此应将其从获取的对象数组中删除）。

所以，如果你有这个...

```
[currentClockSet setIsOpen:[NSNumber numberWithBool:NO]]; 
```

然后，无论哪个顶级对象都`currentClockSet`应该从您的 FRC 获取结果数组中“消失”。

但是，您不会看到它消失。原因是FRC监控的对象没有改变。是的，谓词键路径发生了变化，但 FRC 持有`ClockPair`的实体和`ClockSet`实际发生了变化的实体。

您可以观看通知飞来飞去，了解幕后发生的事情。

无论如何，当您进行提取时，FRC 将使用一个键路径，但它不会监视对不在其实际提取对象集中的对象的更改。

最简单的解决方法是为包含此关键路径对象的对象“设置”一个属性。

例如，我注意到`ClockPair`也有一个`isOpen`属性。如果你有一个反向关系，那么你可以这样做......

```
currentClockSet.isOpen = NO;
currentClockSet.clockPair.isOpen = currentClockSet.clockPair.isOpen; 
```

请注意，您实际上根本没有更改该值。然而，setter 被调用，触发了 KVO，因此触发了私有 DidChange 通知，然后通知 FRC 对象发生了变化。因此，它重新评估检查以查看是否应包含对象，发现 keypath 值已更改，并执行您期望的操作。

因此，如果您在 FRC 谓词中使用键路径，如果您更改该值，则需要返回 FRC 数组中的所有对象并“弄脏它们”，以便这些对象在通知中传递有关对象更改的信息。这很丑陋，但可能比保存或更改您的获取请求并重新获取更好。

我知道你不相信我，所以继续尝试吧。请注意，要使其正常工作，您必须知道 FRC 对象数组中的哪些项目会受到更改的影响，并“戳”它们以使 FRC 注意到更改。

正如我之前提到的，另一个选项是保存上下文并重新获取值。如果您不想保存上下文，则可以使 fetch 包含当前上下文中的更新，而无需从存储中刷新。

我发现伪造 FRC 正在监视的对象的更改是完成对作为其他实体的关键路径的谓词进行重新评估的最佳方法。

好的，所以，这是否是一个错误还有待商榷。就我个人而言，我认为如果 FRC 要监控密钥路径，它应该一直这样做，而不是像我们在这里看到的那样部分地进行。

我希望这是有道理的，我鼓励您提交错误报告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-16T11:06:05.533

你遇到了类似的问题。

我知道这个问题已经很老了，但我希望这对其他人有帮助：

最简单的方法是引入`lastUpdated: NSDate`在父对象中命名的新属性。

我有一个`Conversation`包含几个`Messages`. 每当更新消息的标志时，我都需要在仅显示s`isRead`的更新中进行更新。此外，in仅获取s 并且对 a 一无所知。`ConversationOverviewViewController``Conversation``NSFetchedResultsController``ConversationOverviewVC``Conversation``Message`

每当有消息更新时，我都会打电话给`message.parentConversation.lastUpdated = NSDate()`. 这是手动触发更新的一种简单而有用的方法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:36:09.290

之后`[currentClockSet setIsOpen:[NSNumber numberWithBool:NO]];`可以保存托管对象上下文：

```
NSError *saveError = nil;
if( ![[myAppDelegate managedObjectContext] save:&saveError] ) {
    // handle error saving context
} 
```

我怀疑您`UITableView`将在保存上下文后正确更新。这可能就是为什么将您的应用程序发送到后台有效的原因。我怀疑您的核心数据堆栈是在应用程序的委托中设置的，`NSManagedObjectContext`当它进入后台时，它会在 main 上执行保存。

# soapui - 从soapui项目文件中获取服务操作列表

> ID：12370524
> 
> 赞同：1
> 
> 时间：2012-09-11T13:12:05.417
> 
> 标签：soapui

我正在使用 SOAPUI 4.5 免费版。

我想使用 GrovyScript 以编程方式从 SOAPUI 项目中获取服务操作列表。

你能指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:32:09.503

这里是

```
import com.eviware.soapui.impl.wsdl.*;

String projectFile ="PATHTO/GoogleSearch-soapui-project.xml";
WsdlProject project = new WsdlProject (projectFile);

List operationList = project.getInterfaceAt(0).getAllOperations();

int length = operationList.size();
String name;

for (int i=0; i<length; i++) {
    name = operationList.get(i).getName();
    log.info name;
} 
```

这是工作。

# c++ - 重载全常量类型的复制赋值运算符的正确方法是什么？

> ID：12370526
> 
> 赞同：0
> 
> 时间：2012-09-11T13:12:09.897
> 
> 标签：c++, overloading, operator-keyword

假设我有这样一个结构：

```
struct Foo
{
  const int bar;
  const char baz;

  Foo& operator=(const Foo& other)
  {
    memcpy(this,&other,sizeof(Foo)); //How am I supposed to write this decently?
    return *this;
  }
} 
```

我希望 Foo 的所有字段都是最终的，并且我希望 Foo 类型的变量的行为就像其他原始值类型一样。比如说，int，我们当然可以这样写：

```
 int i = 0;
 i = 42;

 Foo foo = {007,'B'}
 foo = {42,'X'} 
```

然而，对于我可怜的 Foo 类型，我是否必须求助于 memcpy 之类的方法来解决类型安全检查？我知道我可以删除 const 修饰符，将字段标记为私有并添加一些 getter，但这不是重点。我只想知道是否有一种体面的方法来编写 = 运算符的内容。

提前致谢！

~~~~~

查看以下示例：

```
//If the = op is not implemented, this won't compile
Foo stat;
for(int i=0;i!=100;++i)
{
  stat = func(i);
  if(stat.bar == 0)...
}

//But weird thing is, if I declare the 'stat' inside the for block, it works just fine with gcc
for(int i=0;i!=100;++i)
{
  Foo stat = func(i); 
  //printf("%p\n",&stat); => same variable same address!!
  if(stat.bar == 0)...
} 
```

这对你有意义吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:13:54.123

`const`在 C++ 中，复制赋值对全类型毫无意义。不要实施它。

*`const`在有意义的地方使用所有*类型，但要注意这种类型的行为**不会*像`int`，因为`int`在 C++ 中根本不是`const`，除非你这样声明它。*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:13:53.767

在这种情况下，写它的*体面*方法是：

```
Chunk& operator=(const Foo& other) = delete; 
```

（或作为`private`C++11 之前的版本）

如果你所有的成员都是`const`，你到底为什么要改变他们？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:22:04.243

没有漂亮的方法，我同意您应该重新考虑设计的其他答案。

但是，如果您仍然认为这对您的问题最不利，还有几个选择：

```
Foo& operator=(const Foo& other)
{
    const_cast<int&>(bar) = other.bar;
    const_cast<char&>(baz) = other.baz;
    return *this;
} 
```

或者

```
#include <memory>

// Foo must never be used as a base class!
// If your compiler supports the c++11 final feature:
struct Foo final
{ /*...*/ };

Foo& operator=(const Foo& other)
{
    if (this != &other) {
        this->~Foo();
        new(this) Foo(other);
    }
    return *this;
} 
```*

# javafx-2 - Javafx 2.2 和雪豹

> ID：12370529
> 
> 赞同：3
> 
> 时间：2012-09-11T13:12:18.693
> 
> 标签：javafx-2

我需要在 Mac 机器上部署 JavaFX2.2 应用程序。OS X 10.7 或更高版本适用于 Java 7u7。OS X 10.6 怎么样？我们有任何解决方法吗？我认为 10.6 可以更新到 Java 6u35，而我读到的 2.1 和 2.2 可以在 6u26 或更高版本上运行（但是没有支持，虽然可以）。

有人可以帮我完成这个吗？我们可以从某个地方下载独立的 JFX2.2 运行时并将其放在 OSX10.6 上吗？或任何其他替代选择？有没有办法我们可以将 2.2 运行时与应用程序本身一起复制/打包？

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T16:39:11.700

> 有没有办法我们可以将 2.2 运行时与应用程序本身一起复制/打包？

是的，请参阅OS X 10.7+ 支持[的独立应用程序打包文档，包括 JavaFX 2.2+ 和 jre7u6+。](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)

> OS X 10.6 怎么样？

[JavaFX 负责人在Oracle 论坛线程](https://forums.oracle.com/forums/thread.jspa?threadID=2402300)中引用了关于 Snow Leopard 支持和 JavaFX 2.2 的内容：

> FWIW，实际上我们使用的一些来自 Lion 的 API 不在 Snow Leopard 上。此外，Apple 仅支持当前版本的 OS - 1（因此现在将是 Lion 和 Mountain Lion），并且对于部署，我们需要特殊的挂钩。当时的想法是，支持 Apple 自己不再支持的 Mac OS 版本是没有意义的。

JavaFX (2.0/2.1) 的一些早期开发人员构建确实在 Snow Leopard 上运行，但它们只是早期开发构建而不是生产就绪，另外，我认为这些构建的许可证不允许您在生产中使用它们代码。我认为这些早期的 2.0/2.1 开发版本不再由 Oracle 分发。

当 JavaFX 完全开源时，您也许可以努力将其反向移植到 Snow Leopard，但到那时可能就不值得了。

作为 hack，您可以尝试将 jre7u7+ 中捆绑的 JavaFX 运行时添加到 Apple Java6u35 中，看看您是否可以运行应用程序——但这将是一个完全不受支持的配置，可能会中断，并且还可能存在分发许可问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:28:11.793

mac 不能与 javafx 一起使用的原因 .. 目前

来自：[https ://blogs.oracle.com/henrik/entry/oracle_jdk_and_javafx_sdk](https://blogs.oracle.com/henrik/entry/oracle_jdk_and_javafx_sdk)

引用：

> 请注意，Mac 上的支持仅用于开发；例如，我们不希望您的 Mac 运行关键业务服务器端应用程序...

上下文：JavaFx 自 java7 以来仍在 mac 上开发，预计在 java 8 上将提供全面支持。Java 8 将在 9 月真正放松

来自：[http](http://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html) ://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html 引用：

> MacOs 仅在 10.7.3 或更高版本中受支持（Mac OS X Lion，第二个最新的操作系统）

上下文：说明 JavaFx 支持的配置。有许多浏览器无法使用 JavaFx！

来自：[http ://docs.oracle.com/javafx/](http://docs.oracle.com/javafx/)

引用：

> JavaFX 应用程序在桌面上运行。在 Windows 上，它们还可以在浏览器和网络上运行。

上下文：这与以下引用仅意味着 macOS 上的发展进步

来自：[http ://ed4becky.net/homepage/javafx-from-the-trenches-part-2-its-not-always-about-the-sex/?rcommentid=26916&rerror=incorrect-captcha-sol&rchash=35499a8f4e0544f950435495d20b0cf1#commentform](http://ed4becky.net/homepage/javafx-from-the-trenches-part-2-its-not-always-about-the-sex/?rcommentid=26916&rerror=incorrect-captcha-sol&rchash=35499a8f4e0544f950435495d20b0cf1#commentform)

引用：

> 原来，ChoiceBox 中有一个错误——我在 JavaFX2 论坛上谈到的 JIRA RT-26837。它引起了 Oracle 的 Jonathan Giles 的注意，他升级了修复程序，但直到 Java8 发布才会发布。

背景：仍然有很多错误会阻止您在 mac 上成功！

# php - 论坛模块错误

> ID：12370531
> 
> 赞同：1
> 
> 时间：2012-09-11T13:12:16.917
> 
> 标签：php, forum, silverstripe

我已经为 SS 安装了一个论坛模块。我目前使用的是 2.3.3 版

`forum`在后端安装文件后，我在 Firefox 上收到*“找不到文件”*的消息，在 Google Chrome 上收到“找不到*此网页”的消息。*

* * *

我按照所有说明进行操作，但仍然收到错误消息。

另外，当我运行时`http://mysite.co.za/dev/build/?flush=1`，我收到此错误消息

```
>[User Error] 
Couldn't run query: 

CREATE TABLE `ForumCategory` ( 
    `ID` int(11) not null auto_increment, 
    `ClassName` enum('ForumCategory') character set utf8 collate utf8_general_ci default 'ForumCategory', 
    `Created` datetime, 
    `LastEdited` datetime, 
    `Title` varchar(100) character set utf8 collate utf8_general_ci, 
    `StackableOrder` varchar(2) character set utf8 collate utf8_general_ci, 
    `ForumHolderID` int(11) not null default '0', 
     index `ForumHolderID` (ForumHolderID), 
     index `ClassName` (ClassName), primary key (ID) ) TYPE=MyISAM

     You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE=MyISAM' at line 14

GET /dev/build/flush=1
Line 401 in /home/neutrog7/public_html/sapphire/core/model/MySQLDatabase.php" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:07:46.133

您最好的选择是升级到新版本的 SilverStripe。如果可以的话，我建议升级到 3.0，但如果升级到 3.0 太费力，那么请尝试 2​​.4。

如果现阶段确实无法升级，则需要将 MySQLDatabase.php 中的“TYPE”替换为“ENGINE”。但是，真的，如果你沿着这条路走下去，你将大部分时间靠自己，升级会好得多。

# c# - 如何测试 PARTIAL 视图在 C# ASP .NET MVC 中呈现

> ID：12370532
> 
> 赞同：5
> 
> 时间：2012-09-11T13:12:19.297
> 
> 标签：c#, asp.net-mvc-3, unit-testing, view, partial-views

我有一个视图，它内部有部分视图渲染：

```
<div class="partialViewDiv">
    @Html.RenderPartial("partial", Model.SomeModelProperty);
</div> 
```

还有一个控制器，它返回这个视图

```
public ActionResult Action()
        {
            ...
            var model = new SomeModel(){SomeModelProperty = "SomeValue"}
            return View("view", model);
        } 
```

我知道如何测试视图已呈现：

```
[TestMethod]
public void TestView()
{
   ...
   var result = controller.Action();

   // Assert
   result.AssertViewRendered().ForView("view").WithViewData<SomeModel>();
} 
```

但是当我打电话时

```
result.AssertPartialViewRendered().ForView("partial").WithViewData<SomeModelPropertyType>(); 
```

我收到此错误消息

```
Expected result to be of type PartialViewResult. It is actually of type ViewResult. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:28:41.487

> 我究竟做错了什么？

您正在测试控制器：此类测试本质上是模拟视图，只是验证控制器是否返回了预期的视图（和模型）。

因为渲染PartialView“部分”的View“视图”不参与测试，所以你无法测试它是否在做你期望的事情。

一般来说，大多数人不会对视图进行单元测试；但如果您想这样做，请查看[此博客](http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html)或谷歌以获取“MVC 单元测试视图”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:26:32.567

改变

```
return View(model); 
```

到

```
return PartialView(model); 
```

例外说明了一切。您期待部分视图结果，但您返回的是视图结果。

# ruby-on-rails - Rails 加入（包括）belongs_to 模型

> ID：12370541
> 
> 赞同：0
> 
> 时间：2012-09-11T13:13:01.983
> 
> 标签：ruby-on-rails, activerecord

我有一个模型用户，其中有很多照片。

我需要获取用户提要（其他用户的照片，应包括用户），因此查询将是：

```
Photo.where(:user_id => Relationship.select(:followed_id).where(:follower_id => user.id)<<user.id).joins(:user) 
```

但我只得到照片，没有用户信息。是否可以进行返回如下内容的查询：

```
({user:{},photo:{}},{user:{},photo:{}},{user:{},photo:{}}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:11:32.080

这里需要理解的重要一点是，通过使用包含，rails 直接从数据库中返回原始模型（在本例中为照片），但也会将所有关联的用户模型加载到内存中，这些模型可以通过照片进行查询。这种方法假设 DB 查询时间很昂贵，并且花费内存空间/CPU 时间更有效。

实际上，这意味着在您执行查询之后：

```
@photos = Photo.where(:user_id => Relationship.select(:followed_id).where(:follower_id => user.id)<<user.id).includes(:user) 
```

你可以运行：

```
@photos.first.user 
```

这不会为用户进入数据库，而是从内存中加载（这被认为很便宜）。因此，当您需要照片的用户时，您只需运行它的`user`方法即可，您不必在`({user:{},photo:{}},{user:{},photo:{}},{user:{},photo:{}})`结构中预先组织它 - 只需在需要时加载用户即可。

如果由于某种原因您必须以这种特定方式组织它，您可以：

```
@photos = Photo.where(:user_id => Relationship.select(:followed_id).where(:follower_id => user.id)<<user.id).includes(:user)

@photos = @photos.map {|p| {:user => p.user, :photo => p} 
```

这将返回一个包含照片和用户哈希的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:17:40.397

根据您的评论，您可能需要一级链接查询，因为应该按照您的原始帖子将结果传递给另一种方法。这是完全未经测试的，但我认为这是您需要实现的方向。这个想法是你得到当前用户是追随者的所有关系对象。然后你包括用户对象，命名为追随者。`belongs_to`根据您在关系模型中定义的方式，可能需要更改该符号。从那里你包括照片。

根据生成的查询，它可能会引发错误。如果是这样，请将符号切换为字符串，并指定表名。如果您在尝试此操作时遇到错误，请使用堆栈跟踪编辑您的问题。

```
Relationship.where(:follower_id => user.id).includes(:follower).includes(:photos) 
```

# java - 为什么 Java 包装类是不可变的？

> ID：12370544
> 
> 赞同：24
> 
> 时间：2012-09-11T13:13:08.353
> 
> 标签：java, immutability, mutable, primitive-types

我知道适用于一般不可变类的常见原因，即

1.  不能作为副作用改变
2.  很容易推断他们的状态
3.  本质上是线程安全的
4.  无需提供克隆/复制构造函数/工厂复制方法
5.  实例缓存
6.  不需要防御副本。

但是，包装类表示原始类型，而原始类型是可变的。那么为什么包装类不可变呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-11T13:15:40.657

> 但是，包装类表示原始类型，而原始类型（String 除外）是可变的。

首先，String 不是原始类型。

其次，谈论原始类型是可变的毫无意义。如果您像这样更改*变量*的值：

```
int x = 5;
x = 6; 
```

这并没有改变数字 5 - 它改变了`x`.

虽然包装器类型可以设置为可变的，但在我看来，这样做会很烦人。我经常使用这些类型的只读集合，并且不希望它们是可变的。偶尔我想要一个可变的等价物，但在这种情况下，很容易想出一个，或者使用这些`Atomic*`类。

我发现自己希望做到这一点，`Date`并且`Calendar`比我发现自己想要成为可变的更频繁地保持不变`Integer`......（当然，我通常会使用 Joda Time，但 Joda Time 的好处之一*是*不变性。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T13:22:52.777

对于某些类型，还有可变的、线程安全的包装器。

```
AtomicBoolean
AtomicInteger
AtomicIntegerArray
AtomicLong
AtomicLongArray
AtomicReference - can wrap a String.
AtomicReferenceArray 
```

加上一些异国情调的包装纸

```
AtomicMarkableReference - A reference and boolean
AtomicStampedReference - A reference and int 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-11T13:21:07.267

这是一个示例，当 Integer 可变时会非常糟糕

```
class Foo{
    private Integer value;
    public set(Integer value) { this.value = value; }
}

/* ... */

Foo foo1 = new Foo();
Foo foo2 = new Foo();
Foo foo3 = new Foo();
Integer i = new Integer(1);
foo1.set(i);
++i;
foo2.set(i);
++i;
foo3.set(i); 
```

现在 foo1、foo2 和 foo3 的值是什么？你会期望它们是 1、2 和 3。但是当 Integer 是可变的时，它们现在都将是 3，因为它们`Foo.value`都指向同一个 Integer 对象。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-11T13:18:34.333

供您参考：如果您想要可变持有者类，您可以使用`java.util.concurrent`包中的 Atomic* 类，例如`AtomicInteger`，`AtomicLong`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-11T13:16:27.923

> 但是，包装类表示原始类型，而原始类型（String 除外）是可变的。

不，它们不是（并且 String 不是原始类型）。但是由于原始类型无论如何都不是对象，因此它们首先不能真正称为可变/不可变。

无论如何，包装类是不可变的这一事实是一个设计决策（一个很好的 IMO。）它们可以很容易地变成可变的，或者也提供了可变的替代方案（实际上有几个库提供了这一点，其他语言默认提供。）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-11T21:09:17.343

*任何*具有可变方面的对象实例都必须具有唯一*标识*；否则，另一个对象实例在某个时刻碰巧在除其身份之外的所有方面都是相同的，但在其他时刻可能在其可变方面有所不同。但是，在许多情况下，对于没有标识的类型很有用——能够传递“4”而不必担心传递的是*哪个*“4”。虽然有时拥有一个原始或不可变类型的可变包装器可能会有所帮助，但在更多时候，拥有一个在某个时刻持有相同数据的所有实例都可以被视为的类型是有用的可互换。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-13T09:21:41.903

包装类是不可变的，因为可变是没有意义的。

考虑以下代码：

```
int n = 5;
n = 6;
Integer N = new Integer(n); 
```

起初，如果您可以更改 N 的值，看起来很简单，就像您可以更改 n 的值一样。

但实际上 N 不是 n 的包装器，而是 6 的包装器！再次查看以下行：

```
Integer N = new Integer(n); 
```

您实际上是将 n 的值（即 6）传递给 N。由于 Java 是按值传递的，因此您不能将 n 传递给 N，从而使 N 成为 n 的包装器。

因此，如果我们确实向包装器添加了一个 set 方法：

```
Integer N = new Integer(n);
N.setValue(7);
print(N); // ok, now it is 7
print(n); // oops, still 6! 
```

n 的值不会改变，这会令人困惑！

结论：

1.  包装器类是值的包装器，而不是变量的包装器。

2.  如果您确实添加了 set 方法，那将是令人困惑的。

3.  如果你知道它是一个值的包装器，你将不再要求一个 set 方法。例如，您不会执行“6.setValue(7)”。

4.  在 Java 中对变量进行包装是不可能的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-16T04:47:19.803

原始类型是可变的，但它们是不可共享的——也就是说，没有两段代码会引用同一个 int 变量（它们总是按值传递）。因此，您可以更改您的副本，而其他人不会看到更改，反之亦然。正如菲利普在他的回答中所表明的那样，可变包装类不会出现这种情况。所以我的猜测是，当包装原始数据类型时，他们可以选择：

匹配您可以更改原始类型的值的事实，

相对

与可以传递原始类型的事实相匹配，并且数据的任何其他用户都不会看到用户的任何更改。

他们选择了后者，后者需要不变性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-02T10:49:31.293

例如，考虑以下 java 程序：

```
class WhyMutable 
{
    public static void main(String[] args) 
    {
        String name = "Vipin";
        Double sal = 60000.00;
        displayTax(name, sal);
    }

    static void displayTax(String name, Double num) {
        name = "Hello " + name.concat("!");
        num = num * 30 / 100;
        System.out.println(name + " You have to pay tax $" + num);
    }
}

Result: Hello Vipin! You have to pay tax $18000.0 
```

包装类参数的引用传递也是如此。而且，如果字符串和包装类不是最终的，任何人都可以扩展这些类并编写自己的代码来修改包装的原始数据。因此，为了维护数据完整性，我们用于数据存储的变量必须是只读的，

> 即，字符串和包装器类必须是最终的和不可变的，并且不应提供“通过引用”功能。

# visual-studio-2012 - 在 Visual Studio 2012 中调试 WatiN UI 测试

> ID：12370545
> 
> 赞同：0
> 
> 时间：2012-09-11T13:13:10.810
> 
> 标签：visual-studio-2012, watin

我在 Visual Studio 2010 中有一个解决方案，其中包括一个使用[WatiN](http://watin.org/)的测试项目。它还有一个带有单元测试的测试项目。两者都使用 NUnit 作为框架。我使用[Gallio](http://www.gallio.org/)来运行/调试测试。

我正在试用 Visual Studio 2012。我的项目构建良好。我可以使用 NUnit GUI 来运行两组测试。测试资源管理器列出了所有测试（单元和 UI）。我可以在 Visual Studio 中运行/调试单元测试。

当我在 Visual Studio 2012 中运行 UI 测试时，出现错误：

> CurrentThread 需要将其 ApartmentState 设置为 ApartmentState.STA 才能使 Internet Explorer 自动化。

错误发生在我的 TestFixtureSetup 函数中的以下行：

```
browser = new IE(...); 
```

我已经[用谷歌搜索了这个错误](http://www.google.com/#hl=en&output=search&sclient=psy-ab&q=The+CurrentThread+needs+to+have+it%27s+ApartmentState+set+to&oq=The+CurrentThread+needs+to+have+it%27s+ApartmentState+set+to&gs_l=hp.3...449.449.0.1434.1.1.0.0.0.0.0.0..0.0.les;..0.0...1c.1j2.m9qCxFMBCIo&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=dd4e74f5654acd20&biw=1680&bih=989)，并看到了很多关于在 app.config 中添加行的建议。奇怪的是我已经有了这些台词。

```
<sectionGroup name="NUnit">
  <section name="TestRunner" 
           type="System.Configuration.NameValueSectionHandler"/>
</sectionGroup>

...

<NUnit>
  <TestRunner>
    <!-- Valid values are STA or MTA (Others are ignored) -->
    <add key="ApartmentState" value="STA" />
  </TestRunner>
</NUnit> 
```

有没有人让 WatiN 在 Visual Studio 2012 中使用测试资源管理器？有什么建议让它工作吗？是否存在已知的兼容性问题？

我还尝试使用 RC 安装 Gallio，但它破坏了一些需要努力修复的问题。我更喜欢使用集成的测试资源管理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:47:07.670

[在这里](https://stackoverflow.com/questions/11117804/cannot-run-nunit-tests-with-nant)找到了解决方案。

我在 AssemblyInfo.cs 文件中添加了以下内容：

```
[assembly: RequiresSTA] 
```

仍然很突出的是为什么测试运行程序看不到 app.config 中的 STA 设置？

# android - Eclipse 内容辅助 Android xml 文件，如 IntelliJ

> ID：12370548
> 
> 赞同：0
> 
> 时间：2012-09-11T13:13:17.397
> 
> 标签：android, xml, eclipse, intellij-idea, content-assist

编辑 android xml 文件时。

IntelliJ 允许我`android:screenOrientation`通过键入来完成，`a:sc`然后我在列表中首先获得我的标签。在 Eclipse 中，我必须先键入`android:sc`，然后才能将我的标签放在上面。如果我`a:`在 Eclipse 中键入它会清空列表。

有解决方法或设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T14:04:50.400

这种方法曾经对我有用。但是由于某种原因，当我`Ctrl+Space`现在按下时，eclipse 自动完成而不弹出建议窗口，并且不了解上下文。（例如，如果我键入`si`并按`Ctrl+Space`eclipse 会将单词补全为以 si 开头的单词，而不是像以前那样建议 android:textsize ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:20:53.147

您只能键入`sc`并按`Ctrl+space`。

Eclipse 将向您建议以 . 开头的标记列表`android:sc`。

无需输入`android:s`以获取以 . 开头的标签`s`。

# php - 如何读取和解析此文本文件的内容？

> ID：12370553
> 
> 赞同：2
> 
> 时间：2012-09-11T13:13:44.347
> 
> 标签：php

我想读取一个文本文件，因为 C++ 读取它

这是文本文件中的示例

```
(item(name 256) (desc 520)(Index 1)(Image "Wea001") (specialty  (aspeed 700)))
(item   (name 257)  (desc 520)           (Index 2)  (Image "Wea002")(specialty(Attack 16 24))) 
```

我想要像这样的输出

```
name : 256
Desc : 520
Index : 1
Image : Wea001
Specialty > aspeed : 700 
```

* * *

```
Name : 257
Desc : 520
Index : 2
Image : Wea002
Speciality > Attack : 16 24 
```

* * *

那可能吗？

我试过 ：

```
preg_match_all('/name\s+(.*?)\)\+\(desc\s+(.*?)\)\+\(Index\s+(.*?)\)/', $text, $matches, PREG_SET_ORDER);

foreach ($matches as $match) {
  list (, $name, $desc, $index) = $match;
    echo 'name : '.$name.' <br> Desc : '.$desc.'<br> Index : '.$index.'';
  } 
```

但它没有给我想要的正确输出。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:15:03.867

```
<?php
    $txt = '(item(name 256) (desc 520)(Index 1)(Image "Wea001") (specialty  (aspeed 700))(item   (name 257)  (desc 520)           (Index 2)  (Image "Wea002")(specialty(Attack 16 24)))';

    preg_match_all('/name\s+(?P<name>\w+).*desc\s+(?P<desc>\d+).*Index\s+(?P<index>\d+).*Image\s+(?P<img>.*)\).*specialty\s*\((?P<speciality>.*)\)\)\)/', $txt, $matches);
  foreach($matches['name'] AS $id => $name){
       echo 'name : '.$name.' <br> Desc : '.$matches['desc'][$id].'<br> Index : '.$matches['index'][$id].'<br> speciality : '.$matches['speciality'][$id].'';
} 
```

假设你总是有相似的数据格式

# uml - 在活动图中，是否允许死角和无分叉连接？（包括示例）

> ID：12370557
> 
> 赞同：4
> 
> 时间：2012-09-11T13:13:53.473
> 
> 标签：uml, activity-diagram

我的问题实际上包括关于活动图中相同流程建模的两个问题。

简而言之：Joe 将文件上传到门户，该门户将文件传输到我们的服务器，在那里检查错误。如果出现错误，服务器会向门户发送一条消息，Joe 可以在该门户中看到（如果他仍然登录或下次访问）并再次上传他的文件（希望这次没有错误）。如果成功，服务器也会通知门户，但 Joe 不必采取任何行动，因此我们对结果不感兴趣。由于文件没问题，系统现在等待莎拉，她必须手动开始处理文件，之后该过程完成。

在下图中，我画了这个，包括我的两个问题。 ![例子](../Images/2f3b19630d9e97cbbc9f2ce9b1654b07.png)

1.  我可以让 Portal 泳道中的“通知用户成功”（我发现拼写错误，谢谢）这样终止吗？如果我要在其后面放置一个 ActivityFinal，则意味着整个过程将在那里结束，这不是我们想要的。
2.  我是否允许在没有叉子的“进程文件”之前加入，或者我是否在一开始就需要一个叉子，跨越从 Joe 到 Sarah 的所有内容？

这样做的目的无非是试图找到一个有效的 UML 解决方案来解决这个问题，在我自己的图表中，我会像示例中那样做。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:26:10.520

1.  我不确定是否禁止在没有传出链接的情况下离开活动节点，但为了清楚起见（因为用户可能认为这是一个错误），我将使用流最终节点（里面有 x 的圆圈）。该节点只是终止流程，不会影响图中的其他流程。
2.  您可以在任何地方使用连接节点，无论您之前是否进行过分叉，都可以独立使用。所以你的做法是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:56:29.747

在这种情况下，我会制作一个从“通知用户成功”到连接元素的箭头，删除从叉子到连接元素的箭头，然后创建一个从叉子到“开始进程”的箭头。

据我所知，连接元素在它之前的某个时刻必须有一个分叉。你可以在图中有很多活动结束节点，但我认为你不能有多个开始节点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-29T14:05:00.747

你在活动图上没有活动，你觉得可以吗？不。

当一个通道接收到某些东西时，它应该显示为消息（写在箭头上），而不是一个动作。发送和接收是特殊的东西，它们不显示为动作，而是显示为箭头末端，或者如果它们作为活动的参数很重要 - 边框矩形。

至于 fork/join 组合，绝对没问题。

这是一个示例图，我在上面放置了对您有用的元素。这并不意味着您应该复制它，仅将其用作来源。

![在此处输入图像描述](../Images/cf371136dd29a2ca2e10c31ca190c0f3.png)

# hibernate - 如何使用休眠自动填充主键（代理）列

> ID：12370558
> 
> 赞同：0
> 
> 时间：2012-09-11T13:13:53.980
> 
> 标签：hibernate, primary-key, hibernate-annotations

我有一个名为“uniqueid”的列，我**只需要以递增方式输入偶数**。我正在使用 Hibernate 将数据插入表中。**我在 Hibernate 中遇到了这个功能，其中 Hibernate 本身使用注释@Generated value**将数据插入主键列。但它默认为一次增加一个值。如何从 2 开始将增量值指定为 2，以便在每个对象的“唯一 ID”列中自动填充所有偶数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:16:33.573

您可以指定一个自定义生成器，然后您可以在一个类中声明它：

```
@GeneratedValue(generator="MyGenerator")  
@GenericGenerator(name="MyGenerator", strategy="somePackage.someSubPackage.MyGenerator",  
    parameters = { @Parameter(name="tableName", value="test_table") } ) 
```

您的生成器类还需要实现[PersistentIdentifierGenerator](http://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/id/PersistentIdentifierGenerator.html)

# asp.net-mvc-4 - 如何加密从 WebAPI 控制器返回的 Json

> ID：12370561
> 
> 赞同：0
> 
> 时间：2012-09-11T13:14:10.970
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我想在我的 asp.net MVC3 中开发一个 WebAPI 控制器，当它被调用时发送密码，它看起来类似于：

```
public string GetPasswordByUserId(int id)
{
    var password = user.password.FirstOrDefault((u) => u.Id == id);
    if (password == null)
    {
         throw new HttpResponseException(HttpStatusCode.NotFound);
    }
    return password;
} 
```

但是我怎样才能加密返回的密码呢？

第二个问题：如果上面的action方法是在一个APIController里面，那么这是否意味着返回的字符串默认会被序列化为Json格式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:41:52.647

对于密码加密，您可以将对称密钥与使用`System.Security.Cryptography`命名空间/程序集的 RC2 一起使用。

```
byte[] toEncryptPwd = ASCIIEncoding.ASCII.GetBytes(strToEncrypt);
RC2 encPwd = RC2.Create("RC2");

strToEncrypt = Convert.ToBase64String(encPwd.CreateEncryptor(Key, rgbIV).TransformFinalBlock(toEncryptPwd, 0, toEncryptPwd.Length)); // strToEncrypt is now encrypted
encPwd.Clear(); 
```

// 您必须在代码或数据库中的某处硬编码密钥和 rgbIV。

为什么要将密码作为 json 返回？我没有按照设计和需要。

> 返回类型是否为 json？

web-API 支持自动内容协商，这意味着如果使用 HTTP 请求 API 的客户端将接受标头作为`Accept: application/json`然后发送 json 响应，否则如果客户端放入`Accept: application/xml`标头则 API 返回 xml 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:42:28.527

我认为它需要在客户端解密？然后使用 HTTPS/SSL。

字符串不会自动序列化，或者至少不会序列化为您想要的对象。返回你想要序列化的类型，Web API 会自动序列化它。

# facebook - Facebook 打开图形 url 重定向问题

> ID：12370563
> 
> 赞同：1
> 
> 时间：2012-09-11T13:14:18.753
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试使用开放图形 API 来发布操作。我作为元数据属性 og:url 提供的 URL 只能由经过身份验证的用户访问。Facebook 正在尝试抓取 URL，并且由于 302 重定向而最终得到一个登录页面。

我是否必须构建一个页面仅用于 facebook 抓取，其中包含元标记？这个 url 不是链接到 facebook 上发布的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:35:06.537

如果您希望您的文章可共享或进行任何 SEO，则不应使用 302 重定向。机器人只会看到来自重定向目的地的内容。

您希望每条内容只有一个 URL。如果未经身份验证的用户、Facebook Scraper 或 Googlebot 访问该 URL，您希望它看到您的所有元标记和一些预告内容。

如果用户未通过身份验证，请使用服务器端脚本语言来显示注册/登录对话框而不是高级内容。如果用户通过了身份验证，那么您将向他们展示完整的内容。

即使从用户体验的角度来看，这也更好：假设我点击 Facebook 的链接并注册。当我登录时，你将如何让我回到我最初想看到的内容？

# c# - 使用 DataContractSerializer 时如何防止委托序列化？

> ID：12370564
> 
> 赞同：1
> 
> 时间：2012-09-11T13:14:18.710
> 
> 标签：c#, .net, linq-to-sql, serialization, xml-serialization

我有几个由 Linq2Sql 自动生成的实体类。我希望有可能使用 DataContractSerializer 对它们进行序列化。但是当我尝试这样做时，我遇到了一个异常，因为 DataContractSerializer 无法序列化委托。由于我只需要序列化数据，因此我想从序列化过程中排除委托。我怎样才能做到这一点？

我不能使用属性来做到这一点，因为这些类是自动生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:27:39.483

LINQ2SQL 自动生成的类不是 POCO。AFAIK，它们甚至没有标记`DataContract`属性并且包含很多东西，这对于`DataContractSerializer`.

创建您自己的 DTO 并对其进行序列化。这样会更有效率。

# android - 如何修改 androidmanifest.xml 以使用扩展 ListActivity 的类？

> ID：12370570
> 
> 赞同：0
> 
> 时间：2012-09-11T13:14:35.073
> 
> 标签：android

我有两个类，一个扩展了 Activity，在该类文件中，我调用了另一个类扩展 ListActivity 的意图。如何更改 androidmanifest.xml 文件以加载这两个活动？我应该说我将 androidmanifest.xml 文件中的两个活动都声明为

```
<activity android:name="NoteActivity"></activity>
<activity android:name="AddNote"></activity> 
```

**NoteActivity**扩展`Activity`和**AddNote**扩展`ListActivity`；_ 当我运行它时，它没有运行并不幸说“停止”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:16:58.643

您还需要在清单中定义新创建的活动。因此，只需至少更新您的**AndroidManifest.xml ，如下所示：**

```
<activity android:name=".NoteActivity" android:label="Activity1" />

<activity android:name=".AddNote" android:label="Activity2" /> 
```

*假设您的活动文件按照**清单**中的定义放置在包的根目录中，并确保类名在上面的 xml 中正确描述。

**注意：**确保您的活动也以**点**(.) 符号开头。

# vb6 - 更改框架标题前景色

> ID：12370576
> 
> 赞同：0
> 
> 时间：2012-09-11T13:14:45.657
> 
> 标签：vb6, colors, frame, caption

我在框架（frame1）中有一个单选按钮。在第 2 帧上，我有许多复选框。当从 frame1 中选择单选按钮时，此框架 (frame2) 变为可编辑。如何修改我的代码，以便 frame2 的前景色的标题也发生变化？

我已经尝试将以下内容添加到已经用于启用框架的逻辑中，但不起作用。

```
frame2.ForeColor = vbRed (should work?)
frame2.Caption = vbRed 
```

我也试过不看的十六进制颜色代码。任何人都可以建议吗？

我使用枚举来分配单选按钮。

（在全局声明中找到）
Private Enum ExampleRef optB1_blah = 1 等... optB5_blah = 4 End Enum

（此代码在函数中找到）

```
If Example(ExampleRef.optB5_radiobtnchoice).Value Then
'//bug fix -
frame2.ForeColor = vbRed
  '//If Not statement with unrelated logic

    If vblnShowErrors Then
      Err.Raise 10000, VALIDATION, "error, you cant make this choice."
    End If

    blnDataFail = True
  End If
End If

blnMinData = Not blnDataFail
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:23:03.797

修复了这个，我在寻找错误的功能，漫长的一天！frame.ForeColor = X 语法很好。

# binary-tree - 二叉树遍历的递归 VS 非递归

> ID：12370579
> 
> 赞同：2
> 
> 时间：2012-09-11T13:15:06.317
> 
> 标签：binary-tree

二叉树遍历的递归VS非递归有什么区别？

哪一个最适合一棵大树，为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:22:13.910

递归函数更容易实现，因为您只需要关心一个节点，它们使用堆栈来存储每次调用的状态。

非递归函数的堆栈使用量要少得多，但需要您存储每个级别的所有节点的列表，并且可能比递归函数复杂得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-10T01:05:03.160

不同之处在于递归方式使用调用堆栈，而迭代方式使用显式堆栈（堆栈数据结构）。这导致了两件事：1）如果是一棵大树，递归的方式会导致堆栈溢出。2）使用迭代方法，您可以在遍历中间的某个地方停止。换句话说，您可以使用堆栈实现类似前序/按序/后序迭代器之类的东西。这在某些情况下可能很有用。

# css - 对 IE 8 及更低版本的渐变支持

> ID：12370580
> 
> 赞同：7
> 
> 时间：2012-09-11T13:15:06.587
> 
> 标签：css, internet-explorer, gradient

我为朋友正在制作的页面找到了一个很棒的 CSS[渐变代码生成器](http://gradients.glrzad.com/)，但下面有一些评论让我担心：

```
/* For Internet Explorer 5.5 - 7 */
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#cccccc, endColorstr=#ffffff);
        /* For Internet Explorer 8 */
        -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#cccccc, endColorstr=#ffffff)";    
        background-color: #CCC; 
```

并回复：

> 我强烈反对这些！它们的行为不同，受到限制，会损害性能，并且可能导致布局问题。简单地说，由于 IE 不支持渐变（以及许多其他原生的 CSS 功能，没有过滤器），要么使用图像来获得相同的效果（背景图像），要么让您的客户相信 IE 用户获得的体验较少（他们非常关心渐变与疯狂的“设计师”之外的单一颜色？）因为他们的浏览器与我们开发人员想要的不匹配。它被称为优雅降级，IE 也不例外。

所以我不知道的是：我应该建议他们使用/不使用这些代码吗？让 IE 使用此代码是无用/无望的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:30:13.187

过滤器的东西通常被认为是不好的做法，并且不是有效的 CSS（因此您的样式表将无法通过验证测试）

可以为相关元素设置背景图像，如果它是不支持渐变的版本，IE 将回退到该图像，它的美妙之处在于支持渐变的浏览器不加载背景图像（嗯，通常），因此性能不会受到负面影响。

就个人而言，如果我是你，我会选择背景图像解决方案，它比整个“过滤器”更干净，并且不会惩罚不使用 Internet Explorer 的人（耶！）

如果您想了解更多详细信息，请参见此处： [http ://css-tricks.com/css3-gradients/](http://css-tricks.com/css3-gradients/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:21:25.723

我正在使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)创建 CSS 渐变。那里产生的代码甚至在 IE 6+ 中也能工作：

```
background: #1e5799; /* Old browsers */
background: -moz-linear-gradient(top, #1e5799 0%, #2989d8 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */ 
```

所以是的，你可以在 MS IE 中使用渐变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T09:27:31.083

在提出这个问题四年后，这个问题并没有消失。我为大公司做了很多网站，你仍然可以在公司桌面上找到 IE8，有时甚至是公司的标准。

我的建议是完全按照提供的方式使用这些线路。IE8 会使用它们，任何现代浏览器都会忽略它们。它让设计师很高兴你正在尽浏览器的能力实现他的设计，但你不必弄乱条纹背景图像。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-23T05:34:01.643

```
/* Internet Explorer 5 - 7 */
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#cccccc, endColorstr=#ffffff);
        /* For Internet Explorer 8 */
        -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#cccccc, endColorstr=#ffffff)";    
        background-color: #CCC; 
```

# python - 即使值为 false，Django BooleanField 也始终检查

> ID：12370582
> 
> 赞同：1
> 
> 时间：2012-09-11T13:15:12.463
> 
> 标签：python, django, django-forms

我在标准 Django 表单中有一个 BooleanField，定义为：

```
my_boolean_field = BooleanField(initial=True) 
```

当我使用初始数据呈现我的表单，并且 my_boolean_field 设置为 False 的初始值时，当表单呈现时它仍然被检查，尽管该值是假的，如 html 所示：

```
<p><label for="id_2">my_boolean_field</label>: 
    <input checked="checked" 
           type="checkbox" 
           name="2" 
           value="False" 
           id="id_2" /> 
</p> 
```

有没有其他人经历过这种情况，或者知道如何解决它，以便当初始数据/输入值为 false 时不选中复选框？

更新：即使我从 BooleanField 中删除了 initial=True 参数，也会发生同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:26:23.647

首先，您不能使用`required=False`a `BooleanField`,`NullBooleanField`代替：

*   [https://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield](https://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield)
*   [https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.NullBooleanField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.NullBooleanField)

完成此操作后，让我知道新小部件的 HTML 输出是什么？

# 编辑

我假设这是一个 ModelForm。这是一个常规的 django.forms.Form 吗？

# 编辑 2

我的测试表格：

```
from django import forms

class MyForm(forms.Form) :
    """The test form"""
    my_boolean_field = forms.BooleanField(initial=True) 
```

我的模板：

```
<div>
{{ form.my_boolean_field.label_tag }}
{{ form.my_boolean_field }}
{{ form.my_boolean_field.errors }}
</div> 
```

这是我查看页面源代码时得到的输出。**已编辑**

```
<div>
<label for="id_my_boolean_field">My boolean field</label>
<input type="checkbox" name="my_boolean_field" id="id_my_boolean_field" />
</div> 
```

我的观点**新**

```
form = MyForm(initial={'my_boolean_field':False}) 
```

你所展示的和我所看到的不匹配。请粘贴您的完整表格、视图和模板？

# 编辑 3

我只看到这样的输出：

```
<div>
<label for="id_my_boolean_field">My boolean field</label>
<input checked="checked" type="checkbox" name="my_boolean_field" value="False" id="id_my_boolean_field" />
</div> 
```

当我将 False 放在引号中时：

```
form = FormLogin(initial={'my_boolean_field':"False"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T19:51:14.133

我发布这个答案是因为我遇到了同样的问题，而弗朗西斯的回答对我没有帮助。

我最终发现解决方案是重新运行`manage.py syncdb`. 我的字段以前是 IntegerField，我已将它们转换为 BooleanField。BooleanField 读取数据库中是否存在 value="0" 正在初始化和检查。这与您的模型所说的无关。你想看：

```
<input checked="checked" id="id_cost_track_destruction" name="cost_track_destruction" type="checkbox"> 
```

当你检查一个元素时。由于此错误出现在 Django 管理面板中，因此它与您的 forms.py 无关。

这纯粹是模型和数据库问题。如果您更改了 models.py 字段类型，请尝试重新生成数据库。

# javascript - 如何在页面重新加载时显示 jquery ui 对话框？

> ID：12370585
> 
> 赞同：0
> 
> 时间：2012-09-11T13:15:17.897
> 
> 标签：javascript, jquery

我想显示一个 jquery ui 对话框，如果用户要重新加载，请关闭浏览器。我试过了 ：

```
$(window).bind('beforeunload', function () {
    $("#confirm").dialog({ width: 500, modal: true,
        buttons: {
            "Ok": function () {
              // let the page reload
            },
            "Cancel": function () {
                // cancel reloading the page
                $(this).dialog('close');
            }
        }
    });
}); 
```

但是页面正在重新加载，但没有显示确认对话框。如果我放一个 return 语句，那么它会显示一条一般警报消息。但我想显示一个对话框。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:30:57.640

为了保护用户无法离开页面，对 beforeunload 事件可以执行的操作有严格的限制。您可能会显示一个要求确认的本机浏览器对话框，但不会显示一个 jQuery UI。

[这是你可以做的](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)。

# ipad - 改变自定义uitableviewcell内容在不同方向的位置

> ID：12370587
> 
> 赞同：0
> 
> 时间：2012-09-11T13:15:24.190
> 
> 标签：ipad, ios5, uitableview, customization

嗨，目前正在开发一个 ipad 应用程序，我需要在其中显示 tableview。所以我们用自定义单元格显示表格视图。现在问题是当应用程序处于横向模式时，我的自定义单元格中有一个布局，当应用程序旋转到纵向模式时，布局应该改变。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:19:41.540

尝试这个，

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        //your code for landscape
    } else {
        //your code for portrait
    } 
} 
```

这可能会帮助你......

# android - BTLE（低功耗蓝牙）开发套件 - 必须具有接近配置文件

> ID：12370593
> 
> 赞同：11
> 
> 时间：2012-09-11T13:15:45.527
> 
> 标签：android, ios, bluetooth, proximity, bluetooth-lowenergy

任何人都可以向我指出一个久经考验的低功耗蓝牙开发套件（板）吗？

我对接近度配置文件以及与智能手机（尤其是 iPhone 和 Android 设备 - 以及任何其他具有 BTLE 的设备）的兼容性特别感兴趣。

另外，你能告诉我哪些智能手机支持接近配置文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:09:28.280

如果您正在寻找对 BT LE 功能的 API 支持，那么目前几乎没有。例如，API16 的 Android 不支持。到目前为止，这一切都相当令人失望。在许多情况下，硬件支持它，但中间件/上层不支持。在 iOS（使用 Iphone4s）和某些 Moto 手机（需要添加 SDK）上有一些支持，但它是有限的。iOS 可能是您最好的选择（谁会想到）。我个人希望在 Android (ICS/JB) 上使用 GAP 和 GATT 接口，这对于 BT4.0 列出的设备（例如高端智能手机中的 BT IC）是强制性的，但 GAP 似乎没有暴露。

哦，如果您需要开发套件（对于 SW 开发，那么此链接可能会有所帮助 > [http://blog.bluetooth-smart.com/2011/10/05/bluetooth-low-energy-development-kits-2/](http://blog.bluetooth-smart.com/2011/10/05/bluetooth-low-energy-development-kits-2/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:46:12.393

Bluegiga DKBLE112开发板（开箱即用）可以在IOS 6上与iPhone 4S通信。IOS代码教程[http://olesitune.mine.nu/blelogg/?page_id=78](http://olesitune.mine.nu/blelogg/?page_id=78)和[http://olesitune.mine .nu​​/blelogg/?page_id=180](http://olesitune.mine.nu/blelogg/?page_id=180)将发现 DKBLE112、内置温度计服务和相关特征。如果 iPhone 通过 USB 连接，该代码会在 iPhone 和 Xcode 控制台中显示 BLE 信息。DKBLE112 很贵（将近 400 美元），但它确实包含许多我尚未探索的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:29:12.227

生产[tod](http://todhq.com/)的人似乎在使用用作接近传感器的 BLE 设备方面做得很好。

他们设法让他们的设备在以下手机上运行：

iPhone 4s、Droid Razr 和 Razr Maxx、三星 Galaxy S3、HTC One S、X、V、LG Optimus LTE2、Droid 4、Droid Incredible 4G LTE、HTC EVO 4g LTE、HTC Desire C、索尼 Xperia GX、索尼 Xperia SX、华硕 PadFone

所以这是可能的。我对开发套件的推荐是来自 Texas Instruments的带有[CC 调试器的](http://www.ti.com/tool/cc-debugger)[Bluegiga BLE112 。](http://www.bluegiga.com/BLE112_Bluetooth_low_energy_module)您的编程选项是 4,000 美元的 IAR 编译器、专有的 Bluegiga API“BGScript”（如果您无法访问 IAR），或者使用带有您选择的编译器的外部微控制器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T21:17:46.573

我注意到 tod 列出了具有 BT4.0 功能的设备。当然，这并不能保证 API 会在 SDK 中公开。如果您坚持使用已经实现的配置文件，那么您可能没问题，但正如我所说，您肯定不会在 Android API16 中找到它。所以，自定义实现。BT LE 的优点之一是配置文件相对“轻”，因此，您可以很容易地制作自己的...但如果手机端 API 无法访问较低级别（这里只讨论 GAP 和 GATT ) 然后用处不大..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T17:51:37.643

我正在使用带有“用于 MSP430 v5.51.5 的 IAR Embedded Workbench”的 TI ez430-rf256x 开发套件。当 TI 1st 发布 ez430 时，他们使用了一个糟糕的堆栈，该堆栈有问题，而且没有能力。他们现在已经切换到基于 Bluetopia 的堆栈，这很棒！它带有大量样本，支持所有配置文件（包括所有新的低能量配置文件），并且易于使用。我相信 Bluetopia 堆栈也支持我让它通过经典蓝牙与我的 Galaxy Nexus 通话，但不幸的是，从 Android 4.2.2 开始，仍然不支持蓝牙低功耗（ez430 确实支持）。看来谷歌可能会在 Android 4.2.3 中解决此问题。在我看来，没有理由使用像 Bluegiga 这样的东西，因为你会为他们支付更多的许可成本，而不是你在像 IAR 这样的编译器上的花费。[http://www.stonestreetone.com/bluetopiaLE.cfm](http://www.stonestreetone.com/bluetopiaLE.cfm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-10T14:31:30.677

我意识到这是一个老问题，并且透露我是这个项目的开发人员：[Anaren Atmosphere](https://atmosphere.anaren.com)。

Anaren 生产了一款带有 A27037 模块的蓝牙智能多传感器开发板，该模块基于与 Wiced SDK 兼容的 Broadcom BCM27037。它还具有一个在线开发环境，它是一个 GUI/IDE，允许您对模块进行编程并创建相关的 iOS 和 android 应用程序以与其通信。

开发工具包可从各个分销商处获得，并且开发工具可免费使用。

# bulkinsert - 解决批量更新的环境审计问题

> ID：12370596
> 
> 赞同：3
> 
> 时间：2012-09-11T13:15:52.937
> 
> 标签：bulkinsert, hibernate-envers

在我正在开发的应用程序中，我使用 spring、hibernate 和 envers 进行审计。envers 适用于*hibernateTemplate.insert*、*hibernateTemplate.save*、*hibernateTemplate.saveOrUpdate*等调用。*但是当我调用hibernateTemplate.bulkUpdate*时它似乎不起作用。

我搜索了解决方案，发现 envers 不支持 bulkUpdate。

下面的链接中提供了解决方法，但我无法获得它。

[Envers 批量插入/更新](https://community.jboss.org/message/531347)

如果有人可以为此提供解决方法/示例，那将会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:11:13.387

文档是正确的。不审核 HQL 和本机 SQL 操作。

由于批量更新的性能会受到审核的影响，您可能希望更改您的设计 - 例如，如果您有一个具有相关子实体的父实体，并且您正在对子记录执行批量更新，您可以更新属性的父记录，然后在进行批量更新后调用 saveOrUpdate。

另一种选择是手动对审计表执行批量更新，但它不会很优雅。通过按照上述更改设计，我设法解决了我的问题。

# java - 刚刚构建了一个Android应用，需要在服务器端开发它。我从哪里开始？什么语言/软件？

> ID：12370597
> 
> 赞同：0
> 
> 时间：2012-09-11T13:15:55.510
> 
> 标签：java, android, web-services

基本上，服务器需要托管一个数据库。用户可以通过手机应用添加新帖子，其中包含两个文本字段、电子邮件、数字标识符和图片。然后，这些帖子会同步回手机应用程序的列表页面。

我打算使用带有 MySql 的私有虚拟服务器，但我不知道从哪里开始设计这个。我使用 Python 还是 PHP？我使用 SOAP 吗？你会用什么来构建这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:44:18.327

除非您真的想管理自己的数据库和服务器端代码，否则最好使用[Parse](https://parse.com/products/data)之类的服务来为您运行数据库并让您通过 Android 代码中的简单 API 调用来存储对象。我没有特别使用 Parse，所以你可能想获得关于它们的其他意见。

如果您打算推出自己的服务器，那么 VPS 是一种合理的方式。这里没有“最好的”语言可以使用，所以如果你没有任何经验，我会选择你*想*学习的任何语言。没有比通过必要性学习语言更好的方法了。

# powershell - powershell Foreach-对象

> ID：12370598
> 
> 赞同：3
> 
> 时间：2012-09-11T13:15:56.650
> 
> 标签：powershell, powershell-2.0, powershell-remoting

我有这个数组（简化）：

```
$v = 3,5,3,6,8,3,5,7 
```

我需要检查所有值是否都高于 3。我认为 Foreach 或 Foreach-Object 将适合此任务，但我无法弄清楚它的工作方式。

我已经尝试过这样的事情，但它不起作用。

```
$v | Foreach-Object (if($_ -lt 10){Write-Host "$_ lt 10"}) 
```

**编辑：**

感谢你们！我将声明更改为：

```
$v | Foreach-Object {if($_ -lt 10){$check_value = "True"}} 
```

它现在可以工作了，但我刚刚意识到，简单化的数组不是一个好主意。我正在使用的数组中的数据是从 MS SQL 数据库中获取的。如果我在屏幕上显示数组，我会得到数字，但数据类型是 System.Data.DataRow，我无法与数字进行比较。我收到错误消息：

```
Bad argument to operator '-lt': Could not compare "System.Data.DataRow" to "95". Error: "Cannot convert the "95" value of type "System.Int32" to type "System.Data.DataRow".". 
```

**编辑2：**

飞溅的比特：

我正在使用您的代码，一切正常，但我无法通过此比较：

```
$rowsGreaterThanThree.Count -eq $v.Count 
```

$rowsGreaterThanThree 的值是：

## 处理器时间

0.00127998361620918
1.53972183002211
0.00127998361620918
0.00127998361620918
0.00127998361620918
1.53972183002211
0.00127998361620918
0.00127998361620918
0.00127998361620918
3.1262399841282
0
0
0
0
0

和 $v 包含：

## 处理器时间

0.00127998361620918
1.53972183002211
0.00127998361620918
0.00127998361620918
0.00127998361620918
1.53972183002211
0.00127998361620918
0.00127998361620918
0.00127998361620918
3.1262399841282
0
0
0
0
0

值是相同的，但在“ProcessorTime”下方的 $v 中还有一个空白行（此处不可见）。Count 在 $rowsGreaterThanThree.Count 中给出 16 而不是 15。

我的代码：（我将 -gt 修改为 -ge，因为有零。在工作版本中，我想检查处理器是否在一段时间内加载到 95% 以上。）

```
$warning_values = @( $check | Where-Object { $_.ProcessorTime -ge 0 } )
if($warning_values.Count -eq $check.Count )
    {
        Write-Host -ForegroundColor "Warning!"
        }
        else { Write-Host "nothing"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:17:20.077

简单的 ：）

```
PS> $v -gt 3
5
6
8
5
7 
```

或者

```
$v | Where-Object { $_ -gt 3 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:48:47.433

Shay 的示例非常完美：用于`Where-Object`过滤数组中的项目。

因为您的对象是[DataRow](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)对象，所以您需要对列进行过滤：

```
$rowsGreaterThanThree = @( $v | Where-Object { $_.ColumnName -gt 3 } )
if( $rowsGreaterThanThree.Count -eq $v.Count )
{
  Write-Host "All the rows are greater than 3!"
} 
```

替换`ColumnName`为包含要过滤的实际值的列的名称。

您也可以在 SQL 中使用`WHERE`子句执行此操作：

```
SELECT * FROM Table WHERE Column > 3 
```

然后，您就可以从 SQL Server 中获得所需的值。当然，您可能还需要脚本中未过滤的值。

# actionscript-3 - AIR - 将图像从拖放添加到舞台

> ID：12370600
> 
> 赞同：0
> 
> 时间：2012-09-11T13:16:08.740
> 
> 标签：actionscript-3, flash, apache-flex, air, drag-and-drop

我正在 Adob​​e AIR 中构建一个 Tile Viewer，到目前为止，我已经实现了允许用户加载 PNG 和 JPG 文件的拖放功能。

该函数返回一个“：文件”格式，但是我如何在循环时对“：位图”数据进行编码并将图像放置在现有的电影剪辑中，并使一个平铺图像在 x 和 y 中重复，以便显示平铺地图的预览?

我的想法是简单地添加那个文件的实例，但我不知道确切的代码。（创建一个加载器，将文件格式传递给它，并通过定义位置 x 和 y 以及定义宽度和高度来获取 BitmapData 并将其放置到位。我也想创建实例，代码不会加载图像 10 x 10倍 ）

我会很高兴所有有用的答案。

编辑：

示例理论：

（没有正确的语法）

```
image = new ImageFromDropBox(); // bitmap or whatever

for( x = 0; x < 10; x++) {
    for( y = 0; y < 10; y++) {
        image.x = tilesize * x;
        image.y = tileSize * y;
        image.width = tileSize;
        image.height = tileSize;
        stage.addChild( image ); // so each of the 100 places images should be just instances of the ONE LOADED IMAGE
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:36:58.003

使用`File`该类时，您可以使用该`fileInstance.url`参数在加载器中加载所述文件：

```
var loader:Loader = new Loader();
var urlReq:URLRequest = new URLRequest(file.url);
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaded);
loader.load(urlReq);

function loaded(e:Event):void {
    var bmp:Bitmap = loader.content as Bitmap

    //scale it down and create a scaled down bitmap data for more efficient memory usage
    bmp.width = tileSize;
    bmp.height = tileSize;

    var bData:BitmapData = new BitmapData(tileSize,tileSize); //your new bitmap data
    bData.draw(bmp); //capture the scaled down version of the bitmap

    //if you don't need the original anymore, dispose of it
    bmp.bitmapData.dispose();     

    var image:Bitmap;

    for( var x:int = 0; x < 10; x++) {
        for( var y:int = 0; y < 10; y++) {
            image = new Bitmap(bmp.bData);
            image.x = tilesize * x;
            image.y = tileSize * y;
            image.width = tileSize;
            image.height = tileSize;
            stage.addChild( image );
       }
   }
} 
```

# .net-framework-version - SInglePageApplication - DbDataController 和 HttpControllerConfigurationAttribute 错误

> ID：12370608
> 
> 赞同：4
> 
> 时间：2012-09-11T13:16:42.427
> 
> 标签：.net-framework-version, single-page-application

我正在尝试通过 Steve Sandersons SPA 视频中的示例。

[http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2159)

就像这个问题中的人一样 -[更新到 Asp.Net MVC 4 RTM 后无法加载类型 HttpControllerConfigurationAttribute](https://stackoverflow.com/questions/12150082/could-not-load-type-httpcontrollerconfigurationattribute-after-updating-to-asp-n) - 我的版本确实适用于 ApiController，但我需要 DbDataController 或 LinqToEntitiesController，但是在运行时两者都会导致以下异常：

```
Could not load type 'System.Web.Http.Controllers.HttpControllerConfigurationAttribute' from
 assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
```

我没有明确使用 HttpControllerConfigurationAttribute。这是我的代码。

```
namespace MvcApplication5.Controllers
{
    public class DataServiceController : DbDataController<MSEnterpriseEntities> 
    {
        public IQueryable<MS_Substations> GetUtilities()
        {
            return DbContext.MS_Substations.OrderBy(x => x.SubId);
        }

        public void InsertUtility(MS_Substations utility) { InsertEntity(utility); }
        public void DeleteUtility(MS_Substations utility) { DeleteEntity(utility); }
        public void UpdateUtility(MS_Substations utility) { UpdateEntity(utility); }

    }
} 
```

我知道 HttpControllerConfigurationAttribute 已从 System.Web.Http 中删除 - 我不知道如何解决这个问题。

我到底需要做什么（对于傻瓜版）来解决这个问题？

# html - 如何在 tr 中对一些单元格进行分组并为该组提供一个 id 以进行 ajax 操作

> ID：12370613
> 
> 赞同：0
> 
> 时间：2012-09-11T13:16:52.327
> 
> 标签：html

我正在使用`<tbody>`标签对表格中的一些单元格进行分组，以便我可以使用 ajax 操作它们。下面是代码：

```
<tr>
<tbody id="<%=author.AUT_ID%>">
<td><%= author.AUT_FNAME %></td>
<td><%= author.AUT_SURNAME %></td>
</tbody>
<td>more data </td>
<td>more data </td>
<tr> 
```

上面的问题是`<tbody>`标签将行分成两行，使得下面的单元格显示在一行中，其余单元格显示在另一行中。

```
<td><%= author.AUT_FNAME %></td> 
<td><%= author.AUT_SURNAME %></td> 
```

如何将一些单元格单独分组并给该组一个 id 以便我可以使用 ajax 对其进行操作？

非常感谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:19:03.383

`TBODY`必须是 的直接子级`TABLE`，不能在一行内使用：

[https://developer.mozilla.org/en-US/docs/HTML/Element/tbody](https://developer.mozilla.org/en-US/docs/HTML/Element/tbody)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:21:46.643

```
<tbody id="<%=author.AUT_ID%>">
  <tr>
    <td><%= author.AUT_FNAME %></td>
    <td><%= author.AUT_SURNAME %></td>

    <td>more data </td>
    <td>more data </td>
  </tr>
</tbody> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:28:33.553

我建议您将课程应用于您想要使用的那些单元格。这将为您在 javascript 中使用它们提供一个方便的句柄。

# jquery - 使用来自 URL 的 JSON 的 jQuery UI 自动完成

> ID：12370614
> 
> 赞同：8
> 
> 时间：2012-09-11T13:16:57.550
> 
> 标签：jquery, json, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在使用 jQuery UI 自动完成功能。我可以使它与 jQuery UI 提供的示例一起使用，如下所示：

```
var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];

$("#tags").autocomplete({
    source: availableTags
}); 
```

这工作没有任何问题。但我需要使用 JSON 作为我的数据源，可以这样检索：[http://mysite.local/services/suggest.ashx?query=ball](http://mysite.local/services/suggest.ashx?query=ball)

如果我要去那个 URL，我会像这样得到 JSON：

```
 [{"id":12,"phrase":"Ball"},{"id":16,"phrase":"Football"},{"id":17,"phrase":"Softball"}] 
```

如何使用我的 URL 作为数据源？

我试过像这样更改源选项：

```
$("#tags").autocomplete({
    source: "http://mysite.local/services/suggest.ashx"
}); 
```

但这无济于事。我猜该服务不知道在输入字段中输入了哪个关键字？

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T13:22:46.237

您需要更改源以满足以下规范（在小部件的[文档](http://jqueryui.com/demos/autocomplete/)中概述）。源必须是包含（或返回包含）的数组：

*   简单的字符串，或者：
*   包含`label`属性、`value`属性或两者的对象。

如果由于某种原因您无法更改远程源返回的内容，则可以在成功检索数据后对其进行转换。以下是你将如何做到这一点：

```
$("#tags").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "http://mysite.local/services/suggest.ashx",
            data: { query: request.term },
            success: function (data) {
                var transformed = $.map(data, function (el) {
                    return {
                        label: el.phrase,
                        id: el.id
                    };
                });
                response(transformed);
            },
            error: function () {
                response([]);
            }
        });
    });
}); 
```

如您所见，您需要通过将函数传递给`source`小部件的选项来自己调用 AJAX。

这个想法是用来[`$.map`](http://api.jquery.com/jquery.map)将您的数组转换为一个包含自动完成小部件可以解析的元素的数组。

另请注意，`data`传递给 AJAX 调用的参数应该`?query=<term>`在用户键入术语时结束。

# java - 如何以用户身份在 debian 上通过 jboss 开发 jsp

> ID：12370615
> 
> 赞同：0
> 
> 时间：2012-09-11T13:16:58.050
> 
> 标签：java, jsp, servlets, jboss, debian

我想在 JBoss 服务器上执行 helloWorld.jsp。

盒子是一种器具。因此，我不允许安装任何其他软件或应用程序。

我发现了几个看起来非常相似的方法，例如[http://www.novell.com/coolsolutions/feature/14912.html#6.0](http://www.novell.com/coolsolutions/feature/14912.html#6.0)

但是，我的盒子缺少 %JAVA_HOME/bin/jar 可执行文件。

你知道，我从哪里得到罐子或者什么是一个好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:22:49.233

如果您只需要创建 jar 或 war 文件，您可以在另一台机器（PC、Linux、Mac 等）上使用 jar 可执行文件，然后使用 scp、ftp 将生成的文件复制到 JBoss 服务器。

# python - 选择数据库路由器

> ID：12370620
> 
> 赞同：0
> 
> 时间：2012-09-11T13:17:06.787
> 
> 标签：python, django

如何选择数据库路由器？我正在使用子域，如果例如`app1.domain.de`路由，我想更改数据库路由器。有人能帮帮我吗？

```
 DATABASES = {                                                                                                                                                                                                                              
'default': {                                                                                                                                                                                                                           
    'ENGINE': 'django.db.backends.sqlite3',                                                                                                                                                                                            
    'NAME': os.path.join(SITE_ROOT, 'db') + '/default.db',                                                                                                                                                                                
    'USER': '',                                                                                                                                                                                                                        
    'PASSWORD': '',                                                                                                                                                                                                                    
    'HOST': '',                                                                                                                                                                                                                        
    'PORT': '',                                                                                                                                                                                                                        
},                                                                                                                                                                                                                                     
'app1': {                                                                                                                                                                                                                         
    'ENGINE': 'django.db.backends.sqlite3',                                                                                                                                                                                            
    'NAME': os.path.join(SITE_ROOT, 'db') + '/app1.db',                                                                                                                                                                           
    'USER': '',                                                                                                                                                                                                                        
    'PASSWORD': '',                                                                                                                                                                                                                    
    'HOST': '',                                                                                                                                                                                                                        
    'PORT': '',                                                                                                                                                                                                                        
},                                                                                                                                                                                                                                     
'app2': {                                                                                                                                                                                                                             
    'ENGINE': 'django.db.backends.sqlite3',                                                                                                                                                                                            
    'NAME': os.path.join(SITE_ROOT, 'db') + '/app2.db',                                                                                                                                                                               
    'USER': '',                                                                                                                                                                                                                        
    'PASSWORD': '',                                                                                                                                                                                                                    
    'HOST': '',                                                                                                                                                                                                                        
    'PORT': '',                                                                                                                                                                                                                        
},                                                                                                                                                                                                                                     
}     

   DATABASE_ROUTERS = ['app1.routers.DatabaseRouter', 'app2.routers.DatabaseRouter']   

  /app1/routers.py                                                                                                                                                             
  class DatabaseRouter(object):                                                                                                                                                                                                                                                                                                                                                                                                                                                    
      def db_for_read(self, model, **hints):                                                                                                                                                                                                                                                                                                                                                                                                                           
         return "app1"                                                                                                                                                                                                                       

      def db_for_write(self, model, **hints):                                                                                                                                                                                                
         return "app1" 

/app2/routers.py                                                                                                                                                             
class DatabaseRouter(object):                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    def db_for_read(self, model, **hints):                                                                                                                                                                                                                                                                                                                                                                                                                           
        return "app2"                                                                                                                                                                                                                       

    def db_for_write(self, model, **hints):                                                                                                                                                                                                
        return "app2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:30:15.807

如果数据库路由器持有请求模型的模型/表，则数据库路由器应返回数据库名称，否则应返回`None`。在您的情况下，您的路由器总是返回`app1`或`app2`不正确。

这是有关我如何使用它的示例：

```
class AuditDBRouter(object):
    """
     A router to controll audit db operations
    """
    def db_for_read(self, model, **hints):
        "Point all operations on audit models to 'audit'"
        from django.conf import settings
        #admin do not want separate DB?
        if not settings.DATABASES.has_key('audit'):
            return None
        #return our DB name
        if model._meta.app_label == 'audit':
            return 'audit'
        #we don't serve this.
        return None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-01T17:29:23.233

我不确定这是否是您想要的，但您可以通过简单地使用环境变量来实现此行为。

```
$ export DB_NAME=app1 
```

设置`DB_NAME`环境变量后，您可以像这样更改 settings.py 文件以使用这个新变量：

```
DATABASES = {                                                                                                                                                                                                                              
  'default': {                                                                                                                                                                                                                           
    'ENGINE': 'django.db.backends.sqlite3',                                                                                                                                                                                            
    'NAME': os.path.join(SITE_ROOT, 'db') + '/' + os.environ.get('DB_NAME', 'default') + '.db',                                                                                                                                                                                
    'USER': '',                                                                                                                                                                                                                        
    'PASSWORD': '',                                                                                                                                                                                                                    
    'HOST': '',                                                                                                                                                                                                                        
    'PORT': '',                                                                                                                                                                                                                        
} 
```

请注意，如果`DB_NAME`未设置，`default`则为您最终得到的默认值。

# c# - SingleOrDefault ：在Custome结构上不返回null

> ID：12370629
> 
> 赞同：2
> 
> 时间：2012-09-11T13:17:26.080
> 
> 标签：c#, linq

我有结构，

```
public struct Test
{
    public int int1;
    public string str;
} 
```

在我的代码中，

```
List<Test> list = new List<Test>()
{ 
    new Test(){ int1 =1, str="abc" }, 
    new Test(){ int1 =2, str="abc" }
}; 
```

当我尝试在`List<Test> list`搜索条件下使用 SingleOrDefault 时，int1 值等于 3

```
Test result = list.SingleOrDefault(o => o.int1 == 3); 
```

这里的结果具有默认值，意味着 int1 = 0 和 str = null。`null`如果不满足搜索条件，我想要价值。任何人都指出我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:19:06.953

您不会返回 null，因为`Test`它是一个结构，一种值类型。更改`Test`为一个类，它将返回 null。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T13:32:10.423

值类型不可为空，因此您要么必须使用类，要么使用可空的`Test?`。

但是如果你想坚持使用 a `struct`，你应该创建一个名为`Empty`检查空值的静态字段：

```
public struct Test
{
    public static readonly Test Emtpy = new Test();
    public int int1;
    public string str;

    public static bool operator ==(Test a, Test b)
    {
        return a.int1 == b.int1 && Equals(a.str, b.str);
    }

    public static bool operator !=(Test a, Test b)
    {
        return !(a==b);
    }
} 
```

这是您可以在 .Net 框架中找到的约定。如果您以后想要检查`null`（您可能会做什么），请`Test.Empty`改为检查。

```
List<Test> list = new List<Test>(){ new Test(){ int1 =1,str="abc"}, new Test(){ int1 =2,str="abc"}};
Test result = list.SingleOrDefault(o => o.int1 == 3);

if (result != Test.Emtpy)
    ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T13:48:16.227

一个肮脏的修复：

```
 Test result = list.FirstOrDefault(o => o.int1 == 3);

    if (result.Equals(default(Test)))
    {
        // not found
    }
    else
    {
        // normal work
    } 
```

仅当您非常确定原始列表从不包含默认结构（ new Test() { int1 = 0, str = null } ）时才使用此选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:19:13.133

```
Test? result = list.Select(o => (?Test)o).SingleOrDefault(o => o.Value.int1 == 3); 
```

它不漂亮，但它完成了它的工作。您可能希望将该模式提取到辅助方法中。

# c# - Web 场安装问题中的 asp.net 应用程序

> ID：12370632
> 
> 赞同：0
> 
> 时间：2012-09-11T13:17:33.570
> 
> 标签：c#, asp.net, web-farm

我有一个应用程序部署在一个包含 2 个由网络负载均衡器控制的前端服务器的场中。在应用程序中有一个报告部分，报告的工作方式如下所示。

1.  应用程序将报告生成为 PDF 文件并将其保存在应用程序的某个文件夹中。
2.  我在应用程序中有一个 PDF 查看器，它获取文件的 URL 并显示它。

如您所知，在农场中，我无法确保步骤 2 中的请求会到达步骤 1 中的同一台服务器，这会给我带来问题。

非常感谢任何帮助。

问题是，在某个虚拟机上创建文件后，我给 PDF 查看器的 pdf 查看器的 url 为“http://..../file.pdf”。这将生成一个我无法控制的新请求，并且我不知道哪个服务器将提供服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:24:09.327

最简单（但可能最脏）的解决方案可能是在负载均衡器上设置节点关联

这将实质上对来自用户的初始请求进行负载平衡，然后将未来的请求发送回初始服务器。我认为它应该可以解决您的问题。

不过，它不是解决这类问题的最佳方法。阅读[此处](http://msdn.microsoft.com/en-us/magazine/cc500561.aspx#S5)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:51:49.557

为什么不直接提供 pdf 而不是写入磁盘？那将解决您的问题:)

# jsp - 将 URL 参数从 JSP 传递到 Servlet

> ID：12370633
> 
> 赞同：2
> 
> 时间：2012-09-11T13:17:39.017
> 
> 标签：jsp, servlets, request, url-parameters, http-request-parameters

我正在尝试将 URL 参数从 JSP 传递到 Sevlet。我的网址是

```
/portal/faces/student.jsp?owner_id=1030303i 
```

在我的 JSP 中，我添加了这个

```
<form action="steg" method="post" enctype="multipart/form-data">
     <input type='text' value='<%=request.getParameter("owner_id")%>' id="owner"/>
     <input type="file" name="file" size="50"  />
            <br />             
            <input type="submit" value="Steganograph" />
        </form> 
```

但是，在 servlet 中我这样做了，

```
 String owner = request.getParameter("owner");
              System.out.println("aaaaaaaaaaaaaaaa"+owner);
              response.sendRedirect("stegsuccess.jsp?owner_id="+owner); 
```

打印出来的结果为空。有什么问题吗？有谁知道如何解决这个问题？请指教。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:36:45.530

您的代码中有两个问题：

1.  您没有给输入字段命名。您希望`id`输入元素的属性用作请求参数名称。但是这是错误的。是`name`属性。

    ```
    <input type="text" name="owner" value="${fn:escapeXml(param.owner_id)}" /> 
    ```

    *（注：我冒昧的为你在属性中封了一个[XSS攻击漏洞）](http://en.wikipedia.org/wiki/Cross-site_scripting)`value`*

2.  您正在使用`multipart/form-data`编码，但期望请求参数可通过`HttpServletRequest#getParameter()`. *默认情况下*不支持此功能。这仅在您在`@MultipartConfig`Servlet 3.0 兼容容器上使用 servlet 时才有效。或者，也许您正在处理一个现有项目，而其他人已经发明了一个 servlet 过滤器，它可以透明地解析`multipart/form-data`请求并在将请求传递给 servlet 之前填充请求参数映射。无论如何，请确保您了解如何解析`multipart/form-data`请求：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:22:03.007

`sendRedirect()`方法不会转发请求对象。而是使用`RequestDispatcher rd = request.getRequestDispatcher("yourpage.jsp");rd.forward(req, res)`转发请求对象和请求参数的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:21:39.627

您使用的是什么版本的 servlet？

> `multipart/form-data`Servlet API 3.0 之前的版本默认不支持编码请求。Servlet API 默认使用`application/x-www-form-urlencoded`编码解析参数。当使用不同的编码时，`request.getParameter()`调用将全部返回`null`。当您已经使用 Servlet 3.0（[Glassfish 3](http://glassfish.dev.java.net)、[Tomcat 7](http://tomcat.apache.org)等）时，您可以使用它[`HttpServletRequest#getParts()`](http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequest.html#getParts())。

来自[https://stackoverflow.com/a/3337115/139010](https://stackoverflow.com/a/3337115/139010)。另请参阅[Servlet Multipart 请求问题](https://stackoverflow.com/questions/6994517/problem-with-servlet-multipart-request)。

# windows - 无法使用 WiX 启动 Windows 服务

> ID：12370634
> 
> 赞同：12
> 
> 时间：2012-09-11T13:17:39.013
> 
> 标签：windows, service, wix

我有以下 WiX 项目来安装我的服务：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="GUID" Name="SetupWinService" Language="1049"
           Version="1.0.0.0" Manufacturer="SetupWinService"
           UpgradeCode="GUID">
    <Package InstallerVersion="200" Compressed="yes"
             Languages="1049" SummaryCodepage="1251"
             InstallPrivileges="elevated"/>

    <Media Id="1" Cabinet="media1.cab" EmbedCab="yes" />

    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
        <Directory Id="WinService" Name="My Windows Service">
        </Directory>
      </Directory>
    </Directory>

    <DirectoryRef Id="WinService">
      <Component Id="WinServiceInstallation" Guid="GUID">
        <File Id="ClientService.exe"
              Name="ClientService.exe"
              Source="...\ClientService.exe"
              Vital="yes" KeyPath="yes" DiskId="1"/>
        <File Id="App.config"
              Name="App.config"
              Source="...\App.config"
              Vital="yes" KeyPath="no" DiskId="1"/>

            <!--And some DLLs here-->

        <ServiceInstall Id="ServiceInstaller"
                        Type="ownProcess"
                        Vital="yes"
                        Name="WcfServiceHost"
                        DisplayName="WcfServiceHost"
                        Description="Hosts Wcf Service"
                        Start="auto"
                        Account="LocalSystem"
                        ErrorControl="ignore"
                        Interactive="no">
        </ServiceInstall>
        <ServiceControl Id="StartService" Name="WcfServiceHost"
                        Start="install" Stop="uninstall" Remove="uninstall"
                        Wait="yes" />
      </Component>
    </DirectoryRef>

    <Feature Id="Complete" Title="SetupWinService" Level="1">
      <ComponentRef Id="WinServiceInstallation" />
      <ComponentGroupRef Id="Product.Generated" />
    </Feature>
  </Product>
</Wix> 
```

我可以安装我的服务，但安装后我无法启动它。它说：

> 服务启动失败。验证您是否有足够的权限来启动系统服务。

但是我以管理员身份运行我的安装程序（Windows 7 Professional）并且还禁用了[UAC](http://en.wikipedia.org/wiki/User_Account_Control)。此外，我可以通过命令提示符使用 instalutil.exe 安装和运行该服务（我的服务项目包括 Installer 类的实现，并且通常根据[本文](http://msdn.microsoft.com/en-us/library/ms733069%28v=vs.100%29.aspx)进行标记），并且在这种情况下可以正常使用该服务。

如果我将 ServiceControl 元素的 Wait="yes" 替换为“no”，则服务安装时不会出错，但不会启动。在这种情况下，我也无法手动启动服务，因为服务启动并立即停止，并显示消息“本地计算机上的服务已启动然后停止。某些服务如果无工作可自动停止”。

我在互联网上搜索了这个问题，但没有找到任何解决方案。

我如何解决它？

那是我的安装程序类的代码：

```
[RunInstaller(true)]
public class ProjectInstaller : Installer
{
    private ServiceProcessInstaller serviceProcessInstaller;
    private ServiceInstaller serviceInstaller;

    public ProjectInstaller()
    {
        this.serviceProcessInstaller = new ServiceProcessInstaller();
        this.serviceProcessInstaller.Account = ServiceAccount.LocalSystem;
        this.serviceProcessInstaller.Username = null;
        this.serviceProcessInstaller.Password = null;
        this.serviceInstaller = new ServiceInstaller();
        this.serviceInstaller.ServiceName = "ClientServicesHost";
        this.serviceInstaller.StartType = ServiceStartMode.Automatic;
        this.Installers.Add(serviceProcessInstaller);
        this.Installers.Add(serviceInstaller);
        this.AfterInstall +=
                new InstallEventHandler(ProjectInstaller_AfterInstall);
    }

    void ProjectInstaller_AfterInstall(object sender, InstallEventArgs e)
    {
        ServiceController sc = new ServiceController("ClientServicesHost");
        sc.Start();
    }
} 
```

还有我的 Windows 服务：

```
class WindowsClientService : ServiceBase
{
    public ServiceHost serviceHost = null;

    public WindowsClientService()
    {
        this.ServiceName = "WcfServiceHost";
    }

    public static void Main()
    {
        ServiceBase.Run(new WindowsClientService());
    }

    protected override void OnStart(string[] args)
    {
        if (serviceHost != null)
        {
            serviceHost.Close();
        }

        // Create a ServiceHost for WcfClientService type
        // and provide the base address.
        serviceHost = new ServiceHost(typeof(WcfClientService));

        // Open the ServiceHost to create listeners
        // and start listening for messages.
        serviceHost.Open();
    }

    protected override void OnStop()
    {
        if (serviceHost != null)
        {
            serviceHost.Close();
            serviceHost = null;
        }
    }
} 
```

有人指出我的服务自动停止的原因 - 启动后它什么也不做。是真的吗？我的服务创建侦听器并开始侦听 - 那是“什么都不做”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-22T10:18:06.667

我在使用 WiX 3.7.821.0 和我的服务时遇到了同样的问题。它安装了一段时间，同样令人讨厌的“服务无法启动。验证您是否有足够的权限来启动系统服务”出现。

我尝试了很多，但最后一件事是使用两个部分，`<ServiceControl>`而不是试图将所有部分都塞进一个部分中。一个用于启动，一个用于停止。现在服务启动正常。

这不起作用：

```
<ServiceControl Id="StartService" 
                Start="install" 
                Stop="both" 
                Remove="uninstall" 
                Name="MyService" 
                Wait="yes" /> 
```

这有效：

```
<ServiceControl Id="ServiceControl_Start"
                Name="MyService"
                Start="install"
                Wait="no" />
<ServiceControl Id="ServiceControl_Stop"
                Name="MyService"
                Stop="both"
                Remove="uninstall"
                Wait="yes" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-15T06:48:36.647

找了好久，终于解决了！

**保持与 ServiceInstall 名称相同的 ServiceControl 名称。**

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<?define ProductVersion = "1.0.0"?>
<?define ProductUpgradeCode = "{E8DFD614-41F6-4592-AD7A-27EA8A49C82E}"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">
  <Product Id="*" UpgradeCode="$(var.ProductUpgradeCode)"
           Name="Eyes Relax"
           Version="$(var.ProductVersion)"
           Manufacturer="Ourdark"
           Language="1033">
    <Package Manufacturer="Ourdark" InstallerVersion="100" Languages="1033" Compressed="yes" />

    <Media Id="1" Cabinet="WHSDiskManagement.1.1.0.0.cab" EmbedCab="yes" />

    <Property Id="WHSLogo">1</Property>

    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder" Name="PFiles">
        <Directory Id="WHS" Name="Eyes Relax">
          <Component Id="EyesRelax" Guid="{78534F5E-FC72-49E6-AF11-4F2068EA7571}">

            <File Id="RelaxEyes.exe.config"
                  Name="RelaxEyes.exe.config"
                  Source="RelaxEyes\bin\Debug\RelaxEyes.exe.config"
                  Vital="yes"
                  KeyPath="no"
                  DiskId="1"/>

            <File Id="RelaxEyes.exe"
                  Name="RelaxEyes.exe"
                  Source="RelaxEyes\bin\Debug\RelaxEyes.exe"
                  Vital="yes"
                  KeyPath="yes"
                  DiskId="1"/>

            <ServiceInstall
              Id="ServiceInstaller"
              Type="ownProcess"
              Vital="yes"
              Name="Eyes Relax"
              DisplayName="Eyes Relax"
              Description="Eyes Relax"
              Start="auto"
              Account="NT AUTHORITY\LocalService"
              ErrorControl="ignore"
              Interactive="no">
            </ServiceInstall>
            <ServiceControl Id="StartService"
                            Start="install"
                            Stop="both"
                            Remove="uninstall"
                            Name="Eyes Relax"
                            Wait="yes" />
          </Component>
        </Directory>
      </Directory>
    </Directory>

    <Feature Id="ProductFeature" Title="WHSDiskManagement" Level="1">
      <ComponentRef Id="EyesRelax" />
    </Feature>
  </Product>
</Wix> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-12T22:21:43.963

我有同样的错误，在我的情况下`KeyPath='yes' Vital="yes"`，我的文件元素丢失了。

这是我的组件定义：

```
<Component Id="ComponentName"
           Guid="3aa1d5a5-28f0-4753-8e4b-a7ac0848d8be" >
    <File Id='ServiceFile'
          Name='Service.exe'
          DiskId='1'
          Source='bin\Service.exe'
          KeyPath='yes'
          Vital="yes"/>

    <ServiceInstall Id="ServiceInstaller"
                    Type="ownProcess"
                    Name="Service"
                    DisplayName="Service"
                    Description="A Service"
                    Start="auto"
                    ErrorControl="normal"
                    />

    <ServiceControl Id="ServiceControl"
                    Start="install"
                    Stop="both"
                    Remove="uninstall"
                    Name="Service"
                    Wait="yes" />
</Component> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-24T06:43:55.270

的用户名`ServiceInstall`应该是完全限定的：

`NT AUTHORITY\NetworkService`

`NT AUTHORITY\LocalService`

`NT AUTHORITY\SYSTEM`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-23T10:01:37.837

好吧，大约一年半后，我回到了这个项目。并尝试重新编译它并再次启动此服务。它有效！

所改变的只是我将 clientaccesspolicy.xml 添加到我的服务并与我的服务一起运行 policyServiceHost（WebServiceHost 类型）。但我认为这并不重要，因为它与我的应用程序内部有关——与服务启动无关。

所以我尝试了很多变化，比如：

1) this.serviceProcessInstaller.Username = null;

或者

this.serviceProcessInstaller.Username = @"NT AUTHORITY\SYSTEM";

2) 两个或单个 ServiceControl 部分。

3）停止=“两者”

或者

停止=“卸载”

现在一切正常！！！

我不知道发生了什么。我只是把它留给我的系统的某种类型的错误或一些奇怪的配置，或者任何其他不允许我之前自动启动我的服务的东西。但现在一切正常。

换句话说，我没有发现我的服务不会自动启动的原因是什么。**这是关于“足够的特权”**（见第一篇文章），但即使是现在对我来说还不够清楚。

**只有一句话。**如果我在卸载服务时使用两个 ServiceControl 部分，则会出现一个警告窗口（Windows 7）并提供自动关闭应用程序（服务）等等。所以我只是接受并很好地卸载服务。但是，如果我只使用一个 ServiceControl 部分，如第一篇文章中的示例所示，则不会出现警告窗口。同样，它与 1) 和 3) 点组合无关。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T11:58:18.613

我会将此片段用于 .wxs 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<?define ProductVersion="1.0.0.0" ?>
<?define UpgradeCode="{YOURGUID}" ?>
<?define Manufacturer="SetupWinService" ?>
<?define ProductName="WcfServiceHost" ?>
<?define SkuName="WcfServiceHost" ?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*"
             Name="$(var.ProductName)"
             Language="1049"
             Version="$(var.ProductVersion)"
             Manufacturer="$(var.Manufacturer)"
             UpgradeCode="$(var.UpgradeCode)">
        <!-- do you really need 200? i'd try at least 301 -->
        <Package InstallerVersion="301"
                 Compressed="yes"
                 Languages="1049"
                 InstallPrivileges="elevated"
                 SummaryCodepage="1251"
                 Platform="x86" />
        <Media Id="1"
               Cabinet="$(var.SkuName).cab"
               EmbedCab="yes" />
        <Directory Id="TARGETDIR"
                   Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="ProductDirectory"
                           Name="$(var.ProductName)" />
            </Directory>
        </Directory>
        <ComponentGroup Id="MainComponentGroup">
            <Component Directory="ProductDirectory">
                <File Name="$(var.**Project**.TargetFileName)"
                      Source="$(var.**Project**.TargetPath)"
                      KeyPath="yes"
                      Vital="yes" />
                <ServiceInstall Id="SeviceInstall"
                                Name="$(var.ProductName)"
                                DisplayName="$(var.ProductName)"
                                Type="ownProcess"
                                Interactive="no"
                                Start="auto"
                                Vital="yes"
                                ErrorControl="normal"
                                Account="LOCALSYSTEM">
                </ServiceInstall>
                <ServiceControl Id="ServiceControl_Start"
                                Name="$(var.ProductName)"
                                Start="install"
                                Wait="no" />
                <ServiceControl Id="ServiceControl_Stop"
                                Name="$(var.ProductName)"
                                Stop="both"
                                Remove="uninstall"
                                Wait="yes" />
            </Component>
            <Component Directory="ProductDirectory">
                <File Name="App.config"
                      Source="$(var.**Project**.TargetDir)\app.config"
                      Vital="yes" />
            </Component>
        </ComponentGroup>
        <Feature Id="MainFeature"
                 Level="1">
            <ComponentGroupRef Id="MainComponentGroup" />
        </Feature>
        <!-- added automatic upgrading -->
        <Upgrade Id="$(var.UpgradeCode)">
            <UpgradeVersion Property="UPGRADEFOUND"
                            Minimum="0.0.0.1" IncludeMinimum="yes"
                            Maximum="$(var.ProductVersion)" IncludeMaximum="yes"
                            OnlyDetect="no"
                            IgnoreRemoveFailure="yes"
                            MigrateFeatures="yes"/>
        </Upgrade>
        <InstallExecuteSequence>
            <InstallExecute Before="RemoveExistingProducts" />
            <RemoveExistingProducts Before="InstallFinalize" />
        </InstallExecuteSequence>
    </Product>
</Wix> 
```

有了这个基本`System.ServiceProcess.ServiceBase`的实现（与你的并没有真正的不同）

```
public partial class Service : ServiceBase
{
    public Service()
    {
        this.InitializeComponent();
    }

    public static void Main()
    {
        Run(new Service());
    }

    #region Service Commands

    protected override void OnStart(string[] args)
    {
    }

    protected override void OnStop()
    {
    }

    protected override void OnPause()
    {
        this.OnStop();
    }

    #endregion
} 
```

有了这个片段，我得到了一个演示项目来工作......

[可以使用完整的演示项目](http://store.niedermair.name/stackoverflow/Demo12370634.zip)- 如果仍然失败，请调整代码，以便我可以重现您的问题！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-21T12:13:56.653

我在某些计算机上遇到此错误。相同的可执行文件适用于某些人，并在其他人身上出现此错误。

在这些计算机上更新 .NET 1.1/2.0/3.0 会有所帮助（它在 Windows XP、7 和 8.1 上对我有用）。

# c# - 在网页之外的其他项目上添加 System.Web 是一种不好的做法吗？

> ID：12370643
> 
> 赞同：7
> 
> 时间：2012-09-11T13:18:13.040
> 
> 标签：c#, asp.net-mvc, system.web

我正在为我的公司构建一个 web 项目的原型，这个想法是像一个模板一样开始构建一个新项目，其中已经完成了所有必要的工作、安全性、IoC、日志记录等......

我正在研究模板的安全方面......并且一开始我想制作一个自定义安全提供程序......但后来我意识到，微软已经通过会员资格做到了......如果任何项目都需要一个不同的提供商...他们只需要更改 web.config 就可以了....

但接下来就是我的问题了......如果我希望不同的层能够获取用户信息......就像服务层（业务服务......不是网络服务），我需要包括 System.Web和 System.Web.ApplicationServices 到该类库。

这是一个坏习惯吗？我不想重新发明轮子，Microsoft Membership 模型对于我的场景来说已经足够了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:17:13.660

事实上，System.Web 是 ASP.NET 的一部分。System.Web 中的许多方法都使用 HttpContext.Current 为例——这是有关当前 HTTP 请求的上下文。在非 ASP.NET 应用程序中使用 System.Web 存在以奇怪方式失败的风险，因为您可以访问具有可能使用 HttpContext 的方法的类。这是一个坏主意; 所以，反过来也应该被认为是一种不好的做法。

还有 System.Web 的*意图*。是的，它只是一个程序集，IDE 可以让您引用几乎任何您喜欢的程序集。但是，System.Web 的意图是在 ASP.NET 应用程序的上下文中。这就是微软的开发人员所假设的；所以，他们会在这个假设下进化它。将来，由于有利于 ASP.NET 应用程序的更改，它们可能会有效地破坏您的应用程序。如果发生这种情况，您将没有办法重新设计您的应用程序以应对这种情况，而不是在您真正计划设计（或重新设计）应用程序的这一部分时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:31:56.457

您的业​​务层使用它是不好的做法，因为业务层应该独立于数据源。

因此，您将改为在数据层中发出任何 Web 请求，并将收集到的数据公开给您的业务层或任何必要的单独身份验证组件。

作为一项规则 - 业务层中任何不是严格业务的东西都需要抽象成具有定义接口的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:53:30.937

这可能是有问题的，因为 System.Web 不是*.NET Framework Client Profile*的一部分。引用它需要消费者安装完整的框架包。如果您正在构建服务器应用程序，这可能不是问题。

参考：[.NET Framework 客户端配置文件中的程序集](http://msdn.microsoft.com/en-us/library/ff462634%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:37:33.787

System.Web 是一个和其他库一样的库。是的，它包含很多代码，不包含在紧凑的框架中，并且它的一些功能正在外部复制，例如[WebUtility](http://msdn.microsoft.com/en-us/library/system.net.webutility)是 .Net 4.5 中的新功能，它完成了[HttpUtility](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)的大部分功能。但是，它只是一个类库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T16:27:53.070

System.Web 应该只在您的前端。并非架构中的每个地方。最好的例子是 Asp.Net 5 的情况，他们正在删除它。通过将 Web 组件与前端层隔离，您可以避免修改架构的所有层。您应该始终尝试将前端（web、web api、signalR 等）与中间（业务逻辑、转换逻辑等）和后端（数据库、实体框架、web api 调用）隔离开来。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-11T13:42:49.527

我认为这一点也不坏。System.Web 是 .NET 框架的一部分，因此在 .NET 可用的任何地方都可以使用它。当我需要处理 html 和 url 时，我确实在非 Web 应用程序中使用 System.Web。

# ruby-on-rails - 未定义的方法“class_inheritable_accessor”

> ID：12370650
> 
> 赞同：1
> 
> 时间：2012-09-11T13:18:44.193
> 
> 标签：ruby-on-rails, twitter-bootstrap

我最近将 Rails 3.0 升级到 3.2.3 并尝试安装 twitter bootstrap 但收到以下错误。

```
>> rails g bootstrap:install

DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /home/xyz/Desktop/projects/proj-clone/wow/config/environment.rb:5)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /home/xyz/Desktop/projects/proj-clone/wow/config/environment.rb:5)
/home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activerecord-3.2.3/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined method `class_inheritable_accessor' for #<Class:0xa069280> (NoMethodError)
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/bundler/gems/simple-private-messages-7461f5a05fc9/lib/has_private_messages_extensions.rb:17:in `has_private_messages'
from /home/xyz/Desktop/projects/proj-clone/wow/app/models/user.rb:14:in `<class:User>'
from /home/xyz/Desktop/projects/proj-clone/wow/app/models/user.rb:1:in `<top (required)>'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `load'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `each'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in `block in constantize'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `each'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `constantize'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:554:in `get'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:588:in `constantize'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise.rb:259:in `get'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/mapping.rb:101:in `to'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/mapping.rb:96:in `modules'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/mapping.rb:113:in `routes'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/mapping.rb:82:in `initialize'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise.rb:289:in `new'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise.rb:289:in `add_mapping'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/rails/routes.rb:191:in `block in devise_for'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/rails/routes.rb:190:in `each'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/devise-1.4.5/lib/devise/rails/routes.rb:190:in `devise_for'
from /home/xyz/Desktop/projects/proj-clone/wow/config/routes.rb:77:in `block in <top (required)>'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:260:in `draw'
from /home/xyz/Desktop/projects/proj-clone/wow/config/routes.rb:1:in `<top (required)>'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `each'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `load_paths'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:16:in `reload!'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:26:in `block in updater'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/file_update_checker.rb:78:in `call'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/file_update_checker.rb:78:in `execute'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:27:in `updater'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /home/xyz/Desktop/projects/proj-clone/wow/config/environment.rb:5:in `<top (required)>'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/application.rb:103:in `require_environment!'
from /home/xyz/.rvm/gems/ruby-1.9.2-p0/gems/railties-3.2.3/lib/rails/commands.rb:25:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

下面是我的gemfile

```
gem 'rails', '3.2.3'
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end 
```

如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:46:57.993

`simple-private-messages`我正在使用导致问题的 in gem 文件的分叉版本。更改它以`gem 'simple-private-messages', '0.0.0', :git => 'git://github.com/jongilbraith/simple-private-messages.git'`解决问题。

可能是与 gem 兼容性有关的问题。我删除`gem will_paginate`并添加`gem 'therubyracer', :platform => :ruby`到 gem 文件中。

# java - 从不是 wicket-component 的元素调用 wicket

> ID：12370651
> 
> 赞同：0
> 
> 时间：2012-09-11T13:18:46.553
> 
> 标签：java, javascript, ajax, wicket

我正在使用 js-lib 转换为富编辑器（带有选项“粗体”、“斜体”等）。

RichEditor 包含按钮 UploadImage，我可以更改此按钮的回调：

```
function startUploadingImage(field_name, url, type, win) {
    //
} 
```

我已经创建了用于选择文件的模式窗口。那么，我如何从函数“startUploadingImage”调用检票口？

我试过这样的事情：

* * *

```
// Java-script:
function startUploadingImage(field_name, url, type, win) {
    wicketAjaxGet('..?1-1.IBehaviorListener.0-&action=uploadImage');
} 
```

* * *

```
// and Wicket (class extends WebPage):

clickBehavior = new AbstractDefaultAjaxBehavior() {
    @Override
    protected void respond(AjaxRequestTarget target) {
        IRequestParameters requestParameters = getRequestCycle().getRequest().getRequestParameters();
        String action = requestParameters.getParameterValue("action").toString();
        if (action.equals("uploadImage"))
            modal1.show(target);
    }
};
add(clickBehavior); 
```

* * *

但这不起作用。我是检票口的初学者，所以不会打太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:55:31.213

您需要将 AbstractDefaultAjaxBehavior url 传递给 javascript，以便可以调用它。我这样做的一种巧妙方法是将一个新的数据标签添加到您添加 AjaxBehavior 的组件的 html 中。您可以通过覆盖 AbstractDefaultAjaxBehavior 的 onComponentTag 方法来做到这一点。

```
@Override
protected void onComponentTag(ComponentTag tag) 
{       
    tag.put("callback-url", behavior.getCallbackUrl());     
    super.onComponentTag(tag);
} 
```

现在在 javascript 中，您所要做的就是找到 callback-url 标记并获取它的值，这将为您提供要调用的 url。

```
wicketAjaxGet($element.attr('callback-url'), function() { }, function() { }); 
```

# plugins - 如何使用插件阻止用户保存？

> ID：12370652
> 
> 赞同：0
> 
> 时间：2012-09-11T13:18:47.653
> 
> 标签：plugins, dynamics-crm-2011

我正在创建一个插件，我想搜索同一帐户的先前记录，如果已经打开了一个，那么当他们单击保存按钮保存这条新记录时，插件应该取消保存。这在 C# 插件中可行吗？我知道它可以在 JavaScript 中完成，但我以前从未在插件中完成过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:36:02.647

您可以从插件中抛出一个异常框（InvalidPluginExecutionException），并在其中显示一条友好的消息，例如“帐户已存在”，这将阻止它保存，不知道这是否是您正在寻找的东西？

# html - 拆分html表单？

> ID：12370653
> 
> 赞同：16
> 
> 时间：2012-09-11T13:18:49.480
> 
> 标签：html, forms

我想知道是否可以拆分html表单？

基本上我有一个正常的形式

```
<form action="/post.php" method="post" id="postform">
    <label for="name">Name: </label>
    <input id="name" name="name" value=""/>
</form> 
```

然后我有一个 ajax 图片上传，由于它的工作原理，它包括它自己的表单。

然后在那之后我想要第一个表单的提交按钮。

我知道我可以有一个 javascript 提交按钮，但是没有 Javascript 的人就会被拒之门外。所以我想知道是否可以将表格分成多个组？

例如，我知道这行不通，但它证明了我想要做什么..

```
<form action="/post.php" method="post" id="postform">
    <label for="name">Name: </label>
    <input id="name" name="name" value=""/>
</form>

<!-- form for ajax image upload here -->

<!-- continuation of first form -->
<form action="/post.php" method="post" id="postform"> 
    <!-- this button should submit the top form -->
    <input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T13:25:14.900

[在 HTML5 中，如https://stackoverflow.com/a/8380229/556085](https://stackoverflow.com/a/8380229/556085)所指出的那样：

样品形式：

```
<form id="formID" action="action" method="post">
    Text: <input type="text" value="some_id" name="some_name" />
</form> 
```

并且您将提交引用表单以通过其 ID 提交到您想要的位置

```
<input type="submit" name="save" value="Save" form="formID" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:47:56.493

您可能有不同的表单，它们通过不同的表单标签分隔，具有不同的 id，然后您可以使用 javascript 触发表单提交事件。

客户端上没有javascript，我不知道该怎么做......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T11:08:24.747

form 属性不适用于所有浏览器。

我通常在带有 ID 的表单中进行隐藏输入。我在表单外的输入中使用 onblur 更新那些隐藏的输入。

```
<form action="/post.php" method="post" id="postform">
    <input type="hidden" id="phone" name="phone"/>
    <label for="name">Name: </label>
    <input id="name" name="name" value=""/>
</form>

<input type="phone" onblur="javascript:getElementById('phone').value=this.value"/> 
```

# javascript - 如何用另一个 Javascript 更改 Javascript 函数值？

> ID：12370654
> 
> 赞同：0
> 
> 时间：2012-09-11T13:18:48.407
> 
> 标签：javascript

我遇到了另一个 javascript 问题，
我的代码由两部分组成

**首先**是一个简单的下拉菜单：

```
<select>
    <option name="1">1</option>
    <option name="2">2</option>
    <option name="3">3</option>
</select> 
```

**找到**一个简单的 div：

```
<div onClick="doThis('1');">Execute 1</div> 
```

My script currently changes the `innerHTML`of the div when a certain option is selected, but now I need it also to change the `onClick`functions value.

意思是，如果我选择选项**3**，javascript 应该看起来**onClick="doThis('3');**。

我知道如何使用 javascript 更改大多数属性，但不知道如何使用另一个 javascript 函数更改 javascript onClick 属性。我用谷歌搜索了它，但没有想到。

那么，如何做到这一点呢？

感谢所有帮助，
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:24:40.557

不要使用内联 javascript 事件。您正在混合功能代码 (javascript) 和演示代码 (HTML)，这是一种反模式。如果您正确区分这些问题，答案就会变得有些微不足道：

HTML：

```
<select id="someSelect">
    <option name="1">1</option>
    <option name="2">2</option>
    <option name="3">3</option>
</select>

<div id="someDiv">Execute</div> 
```

JavaScript：

```
document.getElementById('someDiv').onclick = function () {
    var select = document.getElementById('someSelect');
    var number = select.value;

    doThis(number);
}; 
```

[http://jsfiddle.net/jbabey/HzVd7/](http://jsfiddle.net/jbabey/HzVd7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:25:51.550

*在大多数 JavaScript 任务中，您不需要*更改 onClick 属性。*相反，如果你知道`'3'`你的场景在某个时候会发生变化，那么一开始就不应该将它硬编码到函数调用中；使其成为变量，或使用函数获取它：*

 *```
<div id="someDiv" onclick="doThis(getValue());"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:30:47.560

您可以使用 jquery 库[http://docs.jquery.com/Downloading_jQuery](http://docs.jquery.com/Downloading_jQuery)。然后通过这种方式挂起事件onsubmit：

```
$('div').click(function(){
  doThis($("select#someSelect").val());
}) 
```*

# c# - 如何在 Windows azure 中重命名容器名称？

> ID：12370656
> 
> 赞同：18
> 
> 时间：2012-09-11T13:18:54.850
> 
> 标签：c#, azure, azure-storage

有什么方法可以重命名 windows azure 中的 blob 容器名称？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-08-16T11:04:22.753

*现在，您可以使用 Microsoft 的“ Microsoft Azure Storage Explorer* ”（版本 0.8.3 之后）重命名容器。您还可以使用此工具重命名 azure 表和文件共享。[请参阅此处](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-explorer-relnotes)的发行说明。

请注意，此功能在使用过程中有以下免责声明。

> 通过复制到新名称，然后删除源项目来重命名。重命名 Blob 容器当前会丢失容器的属性和元数据，如果有很多 Blob，可能需要一段时间。

因此，这并不是幕后的实际重命名，并且会产生读/写/交易成本。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-11T13:22:36.893

**更新**

请参阅下面*Nuri Tasdemir*的回答。

* * *

不可以。不能重命名 Windows Azure 中的 blob 容器。您可以做的是使用新名称创建一个新的 Blob 容器，并将 Blob 从旧 Blob 容器复制到新容器。复制 Blob 后，您可以删除旧的 Blob 容器。请注意，如果您在 Cloud 中执行复制 blob，则此操作是异步的。因此，请确保在删除 blob 容器之前完全复制 blob。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-16T09:38:14.687

我在 storage explorer v1.15.1 中找不到重命名功能，但我确实使用了 clone 选项来创建副本并删除旧容器。

[![屏幕截图 Microsoft Azure 存储资源管理器](../Images/e11383beea48b44e2ec8197ec83b80f3.png)](https://i.stack.imgur.com/cGhmG.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-14T04:15:02.180

不可以。不能重命名 Windows Azure 中的 blob 容器。

从旧存储复制到新存储的代码

AzCopy /来源：[https](https://oldstorage.blob.core.windows.net/oldstorage) : //oldstorage.blob.core.windows.net/oldstorage /Dest：https://newstorage.blob.core.windows.net/newstorage /SourceKey: [sourcekey](https://newstorage.blob.core.windows.net/newstorage) /DestKey:destkey /S /XO

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-10-03T13:17:12.197

此 RenameBlob 方法将允许您重命名 Azure 容器中的文件夹或文件。

*   相册1/image1.jpg ->相册2 / **image1.jpg**
*   专辑 1/image1.jpg -> 专辑 1/ **image2.jpg**

高温高压

```
public class AzureStorageService
{
    readonly CloudStorageAccount _storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString);

    public void RenameBlob(string oldName, string newName)
    {
        var blobClient = _storageAccount.CreateCloudBlobClient();
        var container = blobClient.GetContainerReference("MyContainer");

        var blobs = container.GetDirectoryReference(oldName).ListBlobs();

        foreach (var item in blobs)
        {
            string blobUri = item.Uri.ToString();

            var oldBlob = container.GetBlockBlobReference(blobUri);
            var newBlob = container.GetBlockBlobReference(blobUri.Replace(oldName, newName));

            newBlob.StartCopyFromBlob(oldBlob);

           oldBlob.Delete();
        }
    }
} 
```

# java - 将字符串 (Last\tFirst\tAge) 转换为包含元素 {Last, First, Age} 的数组

> ID：12370657
> 
> 赞同：1
> 
> 时间：2012-09-11T13:19:01.510
> 
> 标签：java, arrays, string

我是 Java 新手，我想将诸如`Apple\tJohn\t23`(注意`\t`是制表符) 之类的字符串转换为具有 3 个元素的数组`{Apple, John, 23}`。我知道我需要导入一些字符串操作方法，但我才刚开始使用 Java，所以有没有适合我的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:20:16.367

听起来你想要：

```
String[] bits = text.split("\t"); 
```

请注意，这[`split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)需要一个正则表达式 - 所以如果你想在一个点上分割，你需要`split("\\.")`例如。我个人更喜欢[Guava](http://guava-libraries.com)库[`Splitter`](http://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter)类，但这是你的选择:)

编辑：来自评论：

> 您还建议我使用字符串数组来存储整数和字符值的混合吗？说为了防患于未然，我可能想比较一下如果（年龄> 21）那么约翰可以喝酒。

不可以。将数据拆分为字符串数组后，最好将其转换为专门用于该数据的对象。例如：

```
String[] bits = text.split("\t");
// Assuming a suitable constructor...
Person person = new Person(bits[1], bits[0], Integer.parseInt(bits[2]));
System.out.println(person.getFavouriteFruit()); // Apple 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:22:11.340

使用[String.split()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)

```
String str = "Apple\tJohn\t23";
    String[] parts = str.split("\t");
    System.out.println(Arrays.toString(parts)); 
```

> 例如，字符串“boo:and:foo”通过这些表达式产生以下结果：

```
Regex   Result
:   { "boo", "and", "foo" }
o   { "b", "", ":and:f" } 
```

# jquery - 将 JQuery 升级到 V 1.8.1 后，VS2012 Web 窗体项目中断

> ID：12370661
> 
> 赞同：0
> 
> 时间：2012-09-11T13:19:09.793
> 
> 标签：jquery, asp.net, visual-studio, webforms, juice-ui

我使用 Visual Studio 2012 创建了一个 Web Forms 项目，然后使用 nuget 包管理器将 JQuery 库升级到 1.8.1。当我尝试运行该项目时，出现以下错误。有任何想法吗？

```
> Unhandled exception at line 6, column 2 in
> http://localhost:49618/Scripts/jquery-ui-1.8.23.js
> 
> 0x800a1391 - Microsoft JScript runtime error: 'jQuery' is undefined 
```

我刚刚注意到这个错误只发生在 IE9 上，而不是 Chrome 或 Firefox 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:29:39.467

我有一个类似的错误，这是由于 jquery 和 jquery-ui 版本之间的不匹配造成的。升级到最新版本的 jquery 解决了它：[http ://docs.jquery.com/Downloading_jQuery#Current_Release](http://docs.jquery.com/Downloading_jQuery#Current_Release)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:53:44.153

最后我想通了。我的项目还包含一个[JuiceUI](http://juiceui.com/)包，它似乎与最新版本的 JQuery 不兼容。我卸载了这个包，它工作正常。

# windows - 无法通过 cygwin/ssh 在 Windows 上安装 Java JDK

> ID：12370663
> 
> 赞同：0
> 
> 时间：2012-09-11T13:19:12.930
> 
> 标签：windows, ssh, cygwin, java

出于测试目的，我正在自动创建已配置的 EC2 机器。创建/配置是通过 ssh 连接完成的（各种操作系统的逻辑相同）。在 Windows（Windows 2003 Server）上，有预配置了 ssh 的 cygwin，所以我可以在那里 ssh。

作为配置的一部分，我需要安装给定版本的 Java SDK。我将 exe 安装程序 (jdk-6u34-windows-i586.exe) 上传到机器并使用 /s 参数运行它（静默安装）。当我从 Windows 控制台（在远程桌面中）甚至通过远程桌面中的 cygwin 运行它时，它可以完美运行。但是当我 ssh 到那里并通过 ssh 在 cygwin 中运行它时，如果失败。

失败似乎很奇怪，因为安装程序将其内容**部分**提取到`c:\Documents and Settings\Administrator\Application Data\Sun\Java\jdk1.6.0_34`其中，然后失败并**退出代码 67**。退出前提取的文件数量不同。

当使用 Java 和 以编程方式执行此操作时`Jsch`，该命令还将错误消息打印`initgroups: Permission denied`到错误流。当我通过 ssh 手动连接时，我没有看到这条消息，所以我不确定它是否相关（谷歌搜索时，我发现这个错误发生在完全不同的上下文中，这对我没有帮助）。

我欢迎任何解释，为什么会发生这种情况（以及如何修复/解决它）。也欢迎其他提示如何在 EC2 windows 机器上可靠地自动安装给定的 JDK。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-22T12:33:07.337

事实证明，Windows 中存在一些有意的架构分离（来自某些版本），即服务无法访问 UI。

由于 cygwin ssh-daemon 作为服务运行，它无法进行 UI 调用或启动基于 UI 的程序。JDK 安装程序是基于 UI 的（即使在静默模式下它似乎也做了一些 UI 式的操作），这被禁止了。

从远程桌面会话运行相同的程序时，一切正常，因为那里的 UI 是可访问的。

# php - 为 php 网站播放 mp3 和 mp3+g 媒体播放器

> ID：12370664
> 
> 赞同：0
> 
> 时间：2012-09-11T13:19:15.447
> 
> 标签：php, flash, mp3, media-player

我想开发一个 php 应用程序，我想在其中运行 mp3、mp4 和 mp3+g 文件。我已经将 flowplayer 用于音频和视频文件。但是 flowplayer 无法运行 mp3+g 文件。请帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:22:44.113

您可以使用 HTML5 音频 API。但并非所有浏览器都支持 MP3。这是一个链接供您了解详细信息。[W3School HTML5 音频](http://www.w3schools.com/html5/html5_audio.asp)

# javascript - 为 iPad（触摸屏）提供“onClick”，为桌面用户提供默认功能

> ID：12370666
> 
> 赞同：3
> 
> 时间：2012-09-11T13:19:18.567
> 
> 标签：javascript, jquery, ipad, touch

希望有人可以在这里帮助我，一直在努力解决这个问题。我需要为触摸设备上的最终用户提供“单击”下拉菜单以显示子菜单项的能力。就桌面体验而言，这显然是一种常见的 UX 结构，但对于移动或触摸设备而言，它并不理想。我理解这一点，但同时仍需要提供这种经验作为临时解决方案。

话虽如此，我基本上是在尝试找到一种简单的方法：

1.  检测用户是否在“触摸”设备上
2.  如果为“真”，则允许他们点击下拉菜单链接以显示子菜单。允许此菜单持续存在（保持打开/显示），直到他们单击子菜单链接或菜单区域之外（在下面的 jsFiddle 中，我能够让 ontouchstart 工作，但似乎无法弄清楚如何坚持它并使其适用于菜单中的所有标签链接）。
3.  如果为“false”，则允许默认功能。

这是我到目前为止的工作 jsFiddle：http: [//jsfiddle.net/bingles/hPJVM/18/](http://jsfiddle.net/bingles/hPJVM/18/)

另外，这是迄今为止的js代码：

```
var submenu = document.getElementsByTagName('a')[0];

if ("ontouchstart" in window) {
    submenu.ontouchstart = function() {
        $(".simple-tabs li.deep").addClass("deep-hover");
    };
    submenu.ontouchend = function() {
        $(".simple-tabs li.deep").removeClass("deep-hover");
    };
}
else {
    $(".simple-tabs li.deep").hover(

    function() {
        $(this).addClass("deep-hover");
    }, function() {
        $(this).removeClass("deep-hover");
    });
    $(".simple-tabs.live li").each(function(i) {
        var parent = $(this);

        if ($(this).hasClass("current")) {
            $(".simple-tab-" + i).fadeIn("fast");
        }
        $(this).find("a").click(function() {
            parent.parent().find("li").removeClass("current");
            parent.addClass("current");
            $(".simple-tab").hide();
            $(".simple-tab-" + i).show();
            return false;
        });
    });
}​ 
```

由于我仍在学习 jQuery，因此未能取得预期的进展。任何帮助或指导将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:25:18.483

您可以使用[Modernizr](http://modernizr.com/docs/)来检测触摸功能

```
if (Modernizr.touch){
  // bind to touchstart, touchmove, etc and watch `event.streamId`
} else {
  // bind to normal click, mousemove, etc
} 
```

[您可以使用jQuery on()](http://api.jquery.com/on/)作为列表添加触摸事件。例如

```
$('some selector').on('click touchstart touchend', function(e) {
        e.preventDefault();
        //show the menu
    }); 
```

对于非触摸

```
$('some selector').on('mouseover mouseout focusin focusout', function(e) {
        if (e.type === 'mouseover' || e.type === 'focusin') {
            //show the menu
        } else if (e.type === 'mouseout' || e.type === 'focusout') {
            //hide the menu
        }
    }); 
```

这些只需要包装在 Modernizr.touch if/else 中。一旦打开子菜单，您可能需要页面主体上的触摸事件来关闭子菜单（以防有人打开它并且没有单击菜单中的项目）。

# java - Android 全局变量

> ID：12370669
> 
> 赞同：1
> 
> 时间：2012-09-11T13:19:25.863
> 
> 标签：java, android, global-variables

我知道以前有人问过这个问题（我在这里读过很多关于它们的帖子），但我不知道我做错了什么。我想将一些东西设置为全局变量，以便在我的应用程序中使用。所以我创建了一个新文件夹（我认为它创建了一个新应用程序？），其中包含一个类：

![在此处输入图像描述](../Images/ab149a69e03d6ec97c9195dd951d835f.png)

这一切都很好。在 Global.java 我有以下内容：

```
package com.directenquiries.assessment.tool.Globals;

import android.app.Application;
import android.os.Environment;

public class Global extends Application {
      public String foo;
      public String SDcard = Environment.getExternalStorageDirectory().getAbsolutePath();

    } 
```

我的清单文件现在看起来像：（我认为这可能是罪魁祸首？）

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.directenquiries.assessment.tool"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".LoginPageActivity"
            android:label="@string/title_activity_login_page" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

    <application
       android:name="Global" 
       android:label="@string/app_name" >
    </application>

</manifest> 
```

我正在尝试在我的 LoginPageActivity 中调用该变量，例如：

```
String SDLoc = ((Global) this.getApplication()).foo;

        TextView obs = (TextView) findViewById(R.id.textView1);
        obs.setText(SDLoc); 
```

但是我的应用程序因以下原因而崩溃：

```
09-11 14:14:19.354: W/dalvikvm(5339): threadid=1: thread exiting with uncaught exception (group=0x40c4f1f8)
09-11 14:14:19.359: E/AndroidRuntime(5339): FATAL EXCEPTION: main
09-11 14:14:19.359: E/AndroidRuntime(5339): java.lang.ClassCastException: android.app.Application cannot be cast to com.directenquiries.assessment.tool.Globals.Global 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:25:52.710

manifest.xml 下的用户

1.  不要声明两个应用程序标签
2.  您的应用程序类位于子包中，因此您需要添加相对包路径，如下所示

**android:name=".Globals.Global"**

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:name=".Globals.Global">
    <activity
        android:name=".LoginPageActivity"
        android:label="@string/title_activity_login_page" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:26:38.327

修改 `public String foo`为 `public final static String foo`和 ，您可以参考为 `Global.foo`。您不需要将 Global 类放在另一个包中。

# r - 随机森林分类的 ROC 曲线

> ID：12370670
> 
> 赞同：7
> 
> 时间：2012-09-11T13:19:29.857
> 
> 标签：r, random-forest, roc

我`randomForest`在 R 平台中使用包进行分类任务。

```
rf_object<-randomForest(data_matrix, label_factor, cutoff=c(k,1-k)) 
```

其中 k 的范围从 0.1 到 0.9。

```
pred <- predict(rf_object,test_data_matrix) 
```

我有随机森林分类器的输出，并将其与标签进行了比较。所以，我有 9 个截止点的性能指标，如准确性、MCC、灵敏度、特异性等。

现在，我想绘制 ROC 曲线并获得 ROC 曲线下的面积，看看性能有多好。R 中的大多数包（如 ROCR、pROC）都需要预测和标签，但我有敏感性（TPR）和特异性（1-FPR）。

如果截止方法正确或可靠地产生ROC曲线，有人可以建议我吗？您知道使用 TPR 和 FPR 获得 ROC 曲线和曲线下面积的任何方法吗？

我还尝试使用以下命令来训练随机森林。这样，预测是连续的，并且可以被 R 中的包所接受`ROCR`。`pROC`但是，我不确定这是否是正确的做法。有人可以向我推荐这种方法吗？

```
rf_object <- randomForest(data_matrix, label_vector)
pred <- predict(rf_object, test_data_matrix) 
```

感谢您花时间阅读我的问题！我为此花了很长时间冲浪。感谢您的建议/建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-18T12:16:36.887

你为什么不输出类概率？这样，您就可以对预测进行排名，并且可以直接将其输入到任何 ROC 包中。

```
m = randomForest(data_matrix, labels)
predict(m,newdata_matrix,type='prob') 
```

请注意，要使用 randomForest 作为分类工具，`labels`必须是因子向量。

# php - 密码加密问题

> ID：12370672
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:19:34.863
> 
> 标签：php, mysql

我在密码加密方面遇到了这个问题，现在，我使用 md5 .. 我知道这不是最安全的，但无论如何。

我有这个代码：

```
$import="INSERT into users(Username,Password,Email,first_name,last_name,phone,user_id) values('$data[0]','md5($data[1]).','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]')"; 
```

现在，这个帖子在数据库中的值是这样的：我的意思是

> md5(A101)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:21:19.543

```
$import="INSERT into users(Username,Password,Email,first_name,last_name,phone,user_id) 
       values('$data[0]','".md5($data[1])."','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]')"; 
```

这应该有效。

你不能`$str = "$str1";`用函数调用做这样的事情，所以你必须做这样的事情： `$str = "'" . md5($str1) . "'"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:21:32.243

该函数不是变量，因此无法在双引号内解析它：

```
$import="
    INSERT into users
    (Username,Password,Email,first_name,last_name,phone,user_id) 
    values('$data[0]','".md5($data[1])."','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]')"; 
```

虽然 PHP 解析双引号内的变量，但它不会查找所有可能的函数。您需要使用`.`concat 函数断开字符串并连接值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:21:38.297

你不能调用这样的函数：

```
$import="INSERT into users(Username,Password,Email,first_name,last_name,phone,user_id) values('$data[0]','".md5($data[1])."','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]')"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:22:22.090

你认为用普通的 PHP`echo "md5($data[1]).";`会调用这个函数吗？当然不是，它是字符串的一部分。

您需要连接 md5 调用：

```
"blah blah blah".md5($data[1])."more blah"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T13:22:54.680

您的实际问题是您已将函数调用放入字符串中，您可以简单地将返回值连接`md5`到您的字符串中，如下所示：

```
'" . md5($data[1]) . "' 
```

也就是说，请不要写这样的插入，如果`$data`包含用户输入是危险的。

使用准备好的语句将数据插入数据库几乎**总是更好。**我强烈建议您阅读有关 PDO/MySQLi 的内容，或者至少如果您还没有使用它，`mysql_real_escape_string`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T13:23:54.360

一方面，在字符串中使用数组是行不通的。您需要结束字符串并连接数组元素以在其中包含它们的值。对于诸如 md5() 函数之类的函数也是如此。

尝试：

```
$import="INSERT into users(Username,Password,Email,first_name,last_name,phone,user_id) values('".$data[0]."','".md5($data[1])."','".$data[2]."','".$data[3]."','".$data[4]."','".$data[5]."','".$data[6]."')"; 
```

我希望这有帮助。

# header - Twitter Bootstrap：固定标题和右侧边栏

> ID：12370674
> 
> 赞同：8
> 
> 时间：2012-09-11T13:19:44.270
> 
> 标签：header, twitter-bootstrap, fixed, sidebar

我正在尝试使用 twitter bootstrap 创建布局，我需要修复 rigth 侧边栏和标题。我应该看起来像这个演示[http://jsfiddle.net/U8HGz/1/show/](http://jsfiddle.net/U8HGz/1/show/)但我需要将侧边栏固定在右侧，并且我需要在顶部标题中有导航和横幅图像，而不仅仅是导航栏。

有可能做到吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-12T07:29:34.447

最后我得到了它。我将其设置为`position: fixed`并添加了`class="offset6"`. 谢谢您的帮助

# extjs - 使用 sencha touch 2 的电子邮件功能

> ID：12370679
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:19:52.680
> 
> 标签：extjs

嗨，朋友们，我是 Sencha 的新手。我想做电子邮件功能，请帮帮我。这是我的代码：

```
Ext.define('NotesApp.view.NoteSettings', {
    extend: 'Ext.form.Panel', 
    xtype: 'formpanel',
    id: 'contactForm',
    url: 'feedback.php',                    
    layout: 'vbox',
    alias: 'widget.notesettingsview',
    config: {
        title: 'Contact',
        iconCls: 'user',
        items: [
            {
                xtype: 'fieldset',
                title: 'Contact Us',
                instructions: '(email is not required)',

                items: [
                    {
                        xtype: 'textfield',
                        name: 'name',
                        label: 'Name'
                    },
                    {
                        xtype: 'emailfield',
                        name: 'email',
                        label: 'Email'
                    },
                    {
                        xtype: 'textareafield',
                        name: 'message',
                        label: 'Message'
                    }
                ]
            },
            {
                items: [
                    {
                        xtype: 'button',
                        text: 'Submit',
                        ui: 'confirm',

                        handler: function(){
                            var values = Ext.getCmp('contactForm').getValues();
                            // prints the values filled in the form 
                            // text fields of name, email and message.     
                            console.log(values.name+","+values.email+","+values.message);                          

                            Ext.Ajax.request({
                                url: 'feedback.php',
                                params : values,
                                success: function(response){
                                    var text = response.responseText;
                                    Ext.Msg.alert('Success', text); 
                                }
                            });     
                        }
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:01:02.630

Sencha 不提供任何“电子邮件功能”。你需要使用一些外部 api 来实现这一点。A在网上快速搜索了一下，我发现了这个：

[http://www.jamesyu.org/2011/02/05/introducing-gmailr-an-unofficial-javscript-api-for-gmail/](http://www.jamesyu.org/2011/02/05/introducing-gmailr-an-unofficial-javscript-api-for-gmail/)

也许您可以使用它或将其作为代码的基础。

此致。

# ios - 根据触摸速度绘制

> ID：12370680
> 
> 赞同：2
> 
> 时间：2012-09-11T13:19:55.380
> 
> 标签：ios, opengl-es

任何人都可以告诉我如何在opengl中绘制自由手，但根据触摸速度。**我见过苹果 GLPaint 并使用它。但我想像NoteShelf 应用程序**一样根据触摸速度实现绘图

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:48:10.190

我不确定 NoteShelf 应用程序是什么，但我认为您想要的可能类似于 Paul Haeberli 在 1989 年制作的 Dynadraw 代码。基本上，您想创建一个小型物理引擎来跟踪质量弹簧连接到接触点的系统。然后，您可以使用质量的速度来控制绘图参数，如笔宽、颜色等。

一些参考资料：

*   原始代码在这里： [http ://www.graficaobscura.com/dyna/index.html](http://www.graficaobscura.com/dyna/index.html)
*   处理实现： http: [//processing.org/exhibition/works/dynadraw/](http://processing.org/exhibition/works/dynadraw/)
*   Javascript：[http ://www.rogerandwendy.com/roger/dynadraw/index.html](http://www.rogerandwendy.com/roger/dynadraw/index.html)
*   我工作了一段时间的一些 android 代码：[https ://bitbucket.org/rallen/android_dynadraw/overview](https://bitbucket.org/rallen/android_dynadraw/overview)

希望这可以帮助。**

# php - 谷歌地方 REQUEST_DENIED

> ID：12370692
> 
> 赞同：0
> 
> 时间：2012-09-11T13:20:30.857
> 
> 标签：php, post

我有一些 PHP 代码可以向 google 地方添加一个地方，但是我收到了一个 REQUEST_DENIED 错误，我不知道为什么：

```
 $data = array(
        "location" => array("lat"=>floatval(trim($latlng[1])),"lng"=>floatval($latlng[0])),
        "accuracy" => 50,
        "name" => urlencode($edtName),
        "types" => array(urlencode($cmbType[0]))
        );
        echo "sending to google:<br>";
        echo json_encode($data);
        $ch = curl_init();
        $post_values = json_encode( $data );
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
        curl_setopt($ch, CURLOPT_URL, 'https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key=xxx');
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_VERBOSE, 1);

        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_values);
        $data = curl_exec($ch);
        if(!curl_errno($ch))
        {
          echo 'Received raw data' . $data;
        } 
```

我检查了我的 google API 密钥并尝试了两种类型：“浏览器应用程序的密钥（带有引用者）”和“服务器应用程序的密钥（带有 IP 锁定）”，但结果相同

有没有办法获得有关我的请求被拒绝的原因的更多信息？错误的位置或错误的钥匙？

这是发送给谷歌的数据：

```
{"location":{"lat":4.63762250793,"lng":51.148788446},"accuracy":50,"name":"Binnenspeeltuin+Het+Fort%2C+Kessel","types":["amusement_park"]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:16:06.720

感谢您的建议，我终于发现我做错了：

在 Google 的“服务器应用程序密钥（带有 IP 锁定）”的定义中，我填写了服务器的 IP 地址。我认为这个密钥只能从该服务器使用是一种额外的安全性，但它是一个客户端 IP 检查器。

所以我清除了 IP 区域，现在它工作正常

谢谢

# django - django-mptt 过滤而不破坏树

> ID：12370695
> 
> 赞同：4
> 
> 时间：2012-09-11T13:20:41.000
> 
> 标签：django, model, filter, tree, mptt

我在我的 Django 应用程序中使用 django-mptt 作为 Article 模型。如果我想获取所有设置为隐藏的文章，我可以这样做

```
Article.objects.filter(hidden=False) 
```

但这会破坏 mptt-tree。如何过滤我的查询集，不仅可以排除所有隐藏的文章，还可以排除这些节点的子节点，从而保持树的完整性，以便我仍然可以使用 tree_info 模板标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T07:29:47.717

我有一个类似的问题。我想删除一个节点及其所有子节点。

这是我设法做到这一点的方法：

```
class FolderForm(forms.ModelForm):
    class Meta:
        model = Folder
        fields = ('name', 'parent')

    def __init__(self, *args, **kwargs)
        super(FolderForm, self).__init__(*args, **kwargs)

        if self.instance is not None:
            exclude_ids = [f.id for f in self.instance.get_descendants(
                include_self=True)]

            self.fields['parent'].queryset = self.fields['parent'].queryset \
                .exclude(pk__in=exclude_ids) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T21:23:11.013

有一个更简单的解决方案：只需将所有孩子也设置为隐藏。

# php - 影响method_exists()

> ID：12370696
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:20:47.780
> 
> 标签：php, oop

> **可能重复：**
> [PHP __call vs method_exists](https://stackoverflow.com/questions/1505696/php-call-vs-method-exists)

我在`__call()`类中使用而不是方法。有什么方法可以影响这个类中 method_exists() 的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:37:01.177

不，你不能。

__call 只是类上函数调用的“占位符”。

考虑一下：

```
Class MyClass
{
  private function Bar()
  {
     return 'Bar';
  }

  public function __call($name, $arguments)
  {
    return $this->Bar();
  }
}

$myClass = new MyClass();
echo $myClass->Foo( 'Foo' ); 
```

此代码将输出 'Bar' 方法 'Foo' 不存在，并通过调用 $MyClass->Foo('Foo') __call 启动。

显然，method_exists 无法知道 __call 将处理什么。

# html - HTML 允许用户将简单的形状（矩形）复制到剪贴板（ctrl+C 很好）

> ID：12370701
> 
> 赞同：0
> 
> 时间：2012-09-11T13:20:59.480
> 
> 标签：html, clipboard, shapes

用小矩形绘制非常简单的表格作为简单条形图的图标：

[http://jsfiddle.net/AbTX9/1/](http://jsfiddle.net/AbTX9/1/)

希望允许用户将表格复制到剪贴板（例如，复制到文档、电子表格），其中包含数字和矩形（如果可能的话）。

我喜欢自然的 select-copy-paste 如何很好地处理表格中的数字，将它们智能地以 HTML 格式复制到 Excel、PPT、Word 等，并将 Notepad/TextEdit 作为纯文本复制。

**但是是否也有一种方法可以复制条形图**？我在脑海中想象它粘贴为一个看起来像这样的 HTML 表格，或者粘贴到相应单元格中具有形状的 Excel 中。我尝试了三种方法：

*   **分区**：`<div style="width: 100px; height: 10px; background-color:#AAA;"></div>`
*   **图片**：`<img src="http://www.moneteam.com/images/BlueRectangle.jpg" height="12px" width="100px"/>`
*   **SVG**：`<rect x=80 y=10 width=100 height=12 fill="#A44"/>`

使用 Div 和 Img，数字可以很好地复制为表格，但不是条形图。再次使用 SVG 只是数字副本，但只是作为一行数字。

主要是寻找一种可能可行的方法的提示，而不是指望有人为我编程。如果不可能做到这一点，那也很高兴知道。

与我能找到的大多数线程不同，ctrl+C/cmd+C 很好，它不需要以编程方式放置在剪贴板上。如果它不能在每个最后的浏览器上运行，那也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:53:21.833

你可以试试这个......

```
 <h1>Table with bars</h1>
<table style="width:250px; background-color: #EEE;">
<tr><td width="49">apples</td>
    <td colspan="4" bgcolor="#FF0000"></td>
    <td width="21"></td>
    <td width="41">100</td>
    </tr>
<tr><td>bananas</td>
    <td colspan="3" bgcolor="#FF0000"></td>
    <td width="31"></td>
    <td></td>
    <td>60</td></tr>
<tr><td>cherries</td>
    <td width="27" bgcolor="#FF0000">&nbsp;</td>
    <td width="24">&nbsp;</td>
    <td width="25">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>36</td>
  </tr>
<tr><td>dates</td>
    <td colspan="3" bgcolor="#FF0000">&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>20</td>
  </tr>
</table> 
```

你可以尝试应用一些 css 属性让它变得漂亮:)

# google-api - 谷歌加载器不再工作

> ID：12370704
> 
> 赞同：1
> 
> 时间：2012-09-11T13:21:08.233
> 
> 标签：google-api, google-loader

我正在尝试通过 Google Loader 检索当前用户位置。但我不知道为什么它停止工作。任何时候加载页面时，google.loader.ClientLocation 都是 null 并且无法获取任何位置。我的代码：

```
<script type="text/javascript" src="https://www.google.com/jsapi?key=MY_APP_KEY"></script> 
```

然后是javascript代码：

```
 google.load("search", "1", {callback: initialize});

    function initialize() {

        if (google.loader.ClientLocation) {
            var userCountry = google.loader.ClientLocation.address.country;
            var userLocation = google.loader.ClientLocation.address.city;
            var userRegion = google.loader.ClientLocation.address.region;
            var userCountryCode = google.loader.ClientLocation.address.country_code;

            $.ajax({
                url: "${createLink(controller: 'util', action: 'userLocation')}",
                data: { city: userLocation, region: userRegion, country: userCountry, countryCode: userCountryCode }
            })
                    .done(function(data) {
                        $("#userLocation").html(userLocation + ", " + userRegion + " - " + userCountry +
                                ' <img src="' + data + '"/>'
                        );
                    });
        }

    } 
```

谢谢！

# java - 相对重力

> ID：12370712
> 
> 赞同：8
> 
> 时间：2012-09-11T13:21:17.187
> 
> 标签：java, jmonkeyengine, bulletphysics

我最近开始使用 jMonkey 引擎，非常好。但是我在尝试实现相对重力时遇到了困难。

我想让行星围绕彼此运行（不一定在完美的圆形轨道上，取决于速度）。所以每个对象都应该影响其他对象。

我现在拥有的：

*关闭全球重力*

```
bulletAppState.getPhysicsSpace().setGravity(Vector3f.ZERO); 
```

*初始化球体并添加到物理空间*

```
Sphere sphere = new Sphere(50, 50, 5);
Geometry sun = new Geometry("Sun", sphere);

sun.setMaterial(stone_mat);
rootNode.attachChild(sun);
sun.setLocalTranslation(0, 0, 0);

sunPhysics = new RigidBodyControl((float) (50*Math.pow(10, 5)));
sun.addControl(sunPhysics);
bulletAppState.getPhysicsSpace().add(sunPhysics);

Geometry mercury = new Geometry("Mercury", sphere);

mercury.setMaterial(stone_mat);
rootNode.attachChild(mercury);
mercury.setLocalTranslation(15f, 0, 0);

mercuryPhysics = new RigidBodyControl((float) (5));
mercury.addControl(mercuryPhysics);
bulletAppState.getPhysicsSpace().add(mercuryPhysics); 
```

我注意到 RigidBodyControl 类中有 setGravity 方法，但它只是设置方向。所以物体会一直走下去，直到它消失。

我真的很期待答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T10:39:23.173

万有引力定律说明了两个物体的质量在`F = G (m1 * m2) / r^2`哪里`m1`，是距离。是引力常数。`m2``r``G`

牛顿第二定律说`F = m * a`，如果我们把它们放在一起，有质量的物体会受到来自有质量物体的引力`m1`的加速度。`a = G * m2 / r^2``m2`

现在，您需要做的是：在模拟的每一步中，对于每个物体，将每个物体的`a`s 相加，并将该加速度应用于物体的速度。

```
a(body1) = G * sum[ mass(body2) / dist(body1, body2)^2 , for each body2 ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T11:33:34.037

子弹物理学中的重力是所有物体的一个方向。

您应该像以前一样将重力设置为 0，并在每个模拟步骤后使用以下公式对所有对象施加力

```
F = m * a

F - force
m - objects mass
a - acceleration 
```

地球上的常规加速度是`g == 9.8`

在太空中，加速度可能都取决于与行星或行星的距离。

如果您喜欢模拟《愤怒的小鸟太空》之类的游戏，那么您应该考虑阅读有关该游戏中重力的文章 [http://www.wired.com/wiredscience/2012/03/the-gravitational-force-in-angry-birds-space /](http://www.wired.com/wiredscience/2012/03/the-gravitational-force-in-angry-birds-space/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T10:00:56.833

如果您想要稳定的系统，请不要使用模拟物理。（但如果系统有足够多的重要实体，没有人知道它应该如何表现，所以没关系）。

对于像太阳系这样的东西，我会对行星使用运动学模式（自己移动它们），而对于船舶、小行星等则使用力。（除非你在太阳系做台球）

# git - Git：我如何只列出本地分支？

> ID：12370714
> 
> 赞同：1037
> 
> 时间：2012-09-11T13:21:19.417
> 
> 标签：git, git-branch

`git branch -a`显示远程和本地分支。

`git branch -r`显示远程分支。

有没有办法只列出当地的分支机构？

* * *

## 回答 #1

> 赞同：1563
> 
> 时间：2012-09-11T13:23:39.667

只是`git branch`没有选择。

从[手册页](http://manpages.ubuntu.com/manpages/precise/en/man1/git-branch.1.html)：

> 如果没有参数，则会列出现有分支，并且当前分支将用星号突出显示。

* * *

## 回答 #2

> 赞同：240
> 
> 时间：2012-09-11T13:23:28.543

只是简单的命令

```
git branch 
```

* * *

## 回答 #3

> 赞同：99
> 
> 时间：2018-05-14T12:23:03.130

`git branch -a`-**所有**分支。

`git branch -r`-仅限**远程**分支。

~~`git branch -l`~~ `git branch`-仅限**本地**分支机构。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2016-10-19T04:15:41.820

最直接的方法之一是

```
git for-each-ref --format='%(refname:short)' refs/heads/ 
```

这也适用于脚本。

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2013-08-21T13:49:37.803

如果前导星号有问题，我`git branch`将按如下方式进行管道传输

```
git branch | awk -F ' +' '! /\(no branch\)/ {print $2}' 
```

这也消除了当您分离头部时出现的“（无分支）”线。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-01-13T16:13:23.630

以下是列出在 origin 中没有同名远程分支的本地分支的方法：

```
git branch | sed 's|* |  |' | sort > local
git branch -r | sed 's|origin/||' | sort > remote
comm -23 local remote 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-11-13T14:39:33.963

获取本地分支列表的其他方法是：

```
git branch -a | grep -v 'remotes' 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-05-22T18:05:51.353

关于如何删除本地分支的帖子有一个很好的[答案。](https://stackoverflow.com/a/31776247/3461729)在其中，这个家伙构建了一个命令来列出本地分支：

`git branch -vv | cut -c 3- | awk '$3 !~/\[/ { print $1 }'`

答案对这个命令是如何派生的有很好的解释，所以我建议你去阅读那篇文章。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-01-11T23:04:41.167

为了补充@gertvdijk 的答案-我添加了一些屏幕截图，以防它快速帮助某人。

如果我运行以下命令，则在我的 git bash shell 上：

```
git branch 
```

这个命令（不带参数）显示了我所有的本地分支。当前签出的当前分支以*不同*的颜色（绿色）显示，并带有一个非常直观的星号 (*) 前缀。

[![在此处输入图像描述](../Images/b7002283751df3215b23f79c9cb9f631.png)](https://i.stack.imgur.com/dTpXW.png)

当您尝试使用`-a`(stands for *all* ) 参数查看包括远程分支在内的所有分支时：

```
git branch -a 
```

然后尚未签出的远程分支也以*不同*的（红色）颜色显示：

[![在此处输入图像描述](../Images/f92effeca2c3e36957ad0a4d0156da26.png)](https://i.stack.imgur.com/ycNSI.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-10T02:48:32.953

Powershell 用户可以使用它的`Compare-Object`cmdlet 来做这样的事情。希望代码是不言自明的。

```
function match-branch {
    $localBranches = ((git branch -l) -replace "\*", "") -replace " ", ""
    $remoteBranches = (((git branch -r) -replace "\*", "") -replace " ", "") -replace "origin/", ""
    Compare-Object -ReferenceObject $localBranches -DifferenceObject $remoteBranches -IncludeEqual
    | Select-Object @{Label = "branch"; Expression = { $_.InputObject } },
    @{Label = ”both”; Expression = { $_.SideIndicator -eq "==" } },
    @{Label = ”remoteOnly”; Expression = { $_.SideIndicator -eq "=>" } }, 
    @{Label = ”localOnly”; Expression = { $_.SideIndicator -eq "<=" } }
} 
```

*   示例输出

```
branch        both remoteOnly localOnly
------        ---- ---------- ---------
master        True      False     False
HEAD->master False       True     False
renamed      False       True     False 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-13T22:04:34.287

```
git show-ref --heads 
```

@gertvdijk 的回答是最简洁优雅的，但我想把它留在这里，因为它帮助我掌握了*相当于*本地分支`refs/heads/*`的想法。

 *大多数情况下，`refs/heads/master`ref 是一个`.git/refs/heads/master`包含 git commit 哈希的文件，该哈希指向代表本地 master 分支当前状态的 git 对象，因此下面的每个文件都`.git/refs/heads/*`代表一个本地分支。*

# php - 可以在不登录的情况下发布到 Facebook 页面墙吗？

> ID：12370716
> 
> 赞同：1
> 
> 时间：2012-09-11T13:21:21.743
> 
> 标签：php, facebook, publish

我发现有一个脚本来发布我的 Twitter 很容易，但是当涉及到我的 Facebook 页面时，这并不容易。

基本上，在我网站的面板上，我使用两个单独的表单发布到 Facebook 和发布到 Twitter - Twitter 表单运行良好，但使用 Facebook，我不知道如何在无需登录的情况下发布到页面墙上，因为该面板将被其他管理员使用，我不应该需要他们全部登录才能发布到页面。

如果不通过 PHP 登录页面，我将如何通过简单的表单发布来继续前进？是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:26:08.477

在您的 facebook 页面上，点击 Mobile，您会看到一封电子邮件，您可以通过该电子邮件发送您的状态更新：xxxxxx@m.facebook.com，只需添加主题的状态和/或附件中的图片

# ios - 在 adobe 中打开时 PDF 的颜色与在预览中打开时的颜色不同

> ID：12370719
> 
> 赞同：2
> 
> 时间：2012-09-11T13:21:27.717
> 
> 标签：ios, pdf, adobe, uicolor, pdf-conversion

我目前正在开发一个应用程序，该应用程序将生成以前由不同（基于 Windows 的应用程序）生成的 PDF。

我将 UIView 转换为 PDF，它可以 100% 工作。问题是，当我将该 PDF 从 ipad 发送到我的 PC 并在 Adob​​e 中打开它时，PDF 中所有绿色的 RGB 值不同，但其他颜色则不同。它非常接近正确的颜色，与原始颜色相比显得暗淡无光，我正在为一个说它必须 100% 相同的客户开发。

如果我在预览中打开两个 PDF，那么 RGB 值在两者上都是正确的，但在 adobe 中是错误的。

我尝试稍微捏造这些值，并使用我能找到的每个不同的颜色选择器来尝试让它们看起来一样，但运气不好。

我试图获得的 RGB 值是：R：78 G：135 B：38。

我回来的是：R：62 G：119 B：57。

我会发布图片，但还不是足够高的用户

如果您需要对我所说的内容进行任何澄清，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:21:13.283

我假设您的 PDF 文件包含一些透明元素。当 Acrobat 在 PDF 文件中遇到透明度时，它会切换到 CMYK 渲染模式，从而导致颜色看起来略有不同。Acrobat 中没有此行为的关闭开关。解决方案是在 PDF 文件上设置 RGB 输出意图。
以上只是一个假设，因为我没有看到你的 PDF 文件。

# playframework - 如何打印所有播放框架崩溃？

> ID：12370723
> 
> 赞同：0
> 
> 时间：2012-09-11T13:21:33.523
> 
> 标签：playframework

我正在使用播放框架 v2.0.3。

我需要知道如何查看所有系统日志。例如，缺少依赖罐、抛出异常等。
我看到的是它只是卡住了，或者 web socket 在解码后卡住了。

我正在使用 logback 作为记录器。

这是`logger.xml`

```
<configuration>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder 
            by default -->
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
     <file>${application.home}/logs/application.log</file>
     <encoder>
       <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</pattern>
     </encoder>
   </appender>

   <logger name="play" level="ERROR" />
   <logger name="application" level="ERROR" />

    <root level="ERROR">
        <appender-ref ref="STDOUT" />
        <appender-ref ref="FILE" />
    </root>
</configuration> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:08:48.980

尝试使用 DEBUG 日志级别，您在控制台中没有看到异常吗？

# python - Python：从列表中删除异常值。这段代码有什么问题？

> ID：12370730
> 
> 赞同：0
> 
> 时间：2012-09-11T13:21:53.727
> 
> 标签：python

下面的代码片段来自我的一个函数，它传递了一个数字列表，应该从列表中删除异常值（即非常大或非常小的数字）。

正如输出证实的那样，代码似乎没有按预期工作：

```
EXTREMA_CUTOFF_THRESHOLD=3.0

if list_values:    
    avg_val = sum(list_values)/float(len(list_values))
    print 'DEBUG: BEFORE:', min(list_values), max(list_values), avg_val
    list_values = [x for x in list_values if math.fabs(x - avg_val)/float(avg_val) < EXTREMA_CUTOFF_THRESHOLD]

    list_values_len = len(list_values)
    if (list_values_len > 0) and (min_sample_size > 0) and (list_values_len < min_sample_size):
        print 'DEBUG: Insufficient data for stats calculation for row'
    elif (list_values_len > 0):
        print 'DEBUG: AFTER:', min(list_values), max(list_values), avg_val 
```

**输出：**

```
DEBUG: BEFORE: 11.0 302.0 113.897260274
DEBUG: AFTER: 11.0 302.0 113.897260274
DEBUG: BEFORE: 12.5 273.0 108.382352941
DEBUG: AFTER: 12.5 273.0 108.382352941
DEBUG: BEFORE: 2.5 245.5 69.9166666667
DEBUG: AFTER: 2.5 245.5 69.9166666667
DEBUG: BEFORE: 136.5 499.5 363.775
DEBUG: AFTER: 136.5 499.5 363.775
DEBUG: BEFORE: 39.5 422.5 166.035759097
DEBUG: AFTER: 39.5 422.5 166.035759097
DEBUG: BEFORE: 39.5 422.0 152.305007587
DEBUG: AFTER: 39.5 422.0 152.305007587
DEBUG: BEFORE: 20.5 331.0 84.41015625
DEBUG: AFTER: 20.5 331.0 84.41015625
DEBUG: BEFORE: 7.0 267.5 155.810126582
DEBUG: AFTER: 7.0 267.5 155.810126582 
```

为什么没有过滤掉极值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T13:25:14.800

`avg_val`一件事：您在过滤列表后不会重新计算。

另一件事：你玩过你的`EXTREMA_CUTOFF_THRESHOLD`吗？也许 3.0 不会从您的测试数据集中过滤任何内容，但较低的值会。

一般评论：`numpy`在这种情况下，我会使用数据集的标准偏差 ( `numpy.std(dataarray)`) 来确定异常值（参见 @mgilson 对特定方法的评论）。关于异常值检测的一个很好的资源似乎是这篇维基百科文章：[http ://en.wikipedia.org/wiki/Outlier](http://en.wikipedia.org/wiki/Outlier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:33:06.440

请注意，通过计算平均值的简单方法`sum / len`会失去数值精度。此外，您可能还想计算标准偏差。

你的阈值方程

```
math.fabs(x - avg_val)/float(avg_val) < EXTREMA_CUTOFF_THRESHOLD 
```

应该是这样的

```
math.fabs(x - avg_val)/float(   standard_deviation  ) < EXTREMA_CUTOFF_THRESHOLD 
```

至少如果您打算使用经典的正态分布假设（例如 3 个 sigma 异常值），这些假设是根据**标准偏差**定义的！

你用什么门槛？在您的第一个数据集上，如果您使用`3`，很容易看到没有大于 455.58904109600002 或小于 -227.79452054800001 的值

（请注意，使用**标准偏差**进行标准化应该可以解决这个问题。不要只是盲目地降低阈值。）

您还在计算错误的长度：`list_values_len = len(bid_values)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:34:21.277

您的代码正在运行。只是没有一个极值与平均值相差超过平均值的 3 倍，这就是您的算法所暗示的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:34:23.753

您的术语`math.fabs(x - avg_val)/float(avg_val)`的意思是“一个数据与平均值的距离相对于平均值”。我认为这没有多大意义。想象一组出生年份，即所有在 1920..2010 范围内的数字。将距离与平均值的绝对值联系起来没有多大意义。

所以回到第一条：考虑一个更体面的规则来找出你想要剥离的元素。这里的其他答案已经提到了这一点。

# objective-c - UIView的retainCount为0，但内存没有释放

> ID：12370732
> 
> 赞同：1
> 
> 时间：2012-09-11T13:21:57.937
> 
> 标签：objective-c, ios, memory-management, uikit

我正在为 iOS 开发一个应用程序，但遇到了内存不足警告的问题。

点击按钮后，我的应用程序正在加载一个包含大量子视图的大视图。内存使用量增长，这是可以理解的（从 30 Mb 到 80Mb）。然而，当用户选择另一个菜单项时——这个视图被释放了，但是！应用程序使用的内存量不会减少。我使用以下代码来释放视图：

```
storeView.hidden = YES;
NSLog(@"%d", [storeView retainCount]);
[storeView removeFromSuperview];
storeView = nil; 
```

第二行中的 NSLog 打印：1，因此在发布后它应该被释放。我的 -(void) dealloc 的实现；确实被调用了（我在它的最后一行调用了 [super dealloc]; ）。然而在那之后我仍然有低内存警告。

Instruments 只发现了几个泄漏的 NSString，它们不可能导致内存警告。

你能给点建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:24:12.897

释放调用会降低保留计数，如果保留计数为 0，它可能会被清除，但不必如此。当保留计数为零并且您尝试访问变量时，它可能仍然有效，也可能无效。无论哪种方式，你都不能指望它。

# wordpress - 将 Buddypress 安装为 Wordpress 博客上的文件夹并面临重定向问题

> ID：12370740
> 
> 赞同：0
> 
> 时间：2012-09-11T13:22:22.647
> 
> 标签：wordpress, forum, buddypress

我将 Buddypress 作为一个文件夹安装在我的 wordpress 博客上。(http://.com//)

但是所有页面（活动，成员，组......）都会正常显示 404 页面。

有没有办法解决这个问题？

谢谢！

埃尔曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:34:47.967

我解决了。我正在写我如何解决的方式，以便面临同样问题的人也可以解决。

我的 .htaccess 文件不存在-我不知道为什么-。所以我在权限设置上检查它并创建它。

# css - 引导程序中带有轮廓（背景颜色）的按钮

> ID：12370745
> 
> 赞同：3
> 
> 时间：2012-09-11T13:22:37.077
> 
> 标签：css, twitter-bootstrap, focus

我正在使用引导程序在我的网站上进行一些设计。这个按钮得到一个不应该存在的黄色轮廓。如果我在页面加载后单击页面上的任意位置，黄色的“边框”就会消失。

有人知道可能出了什么问题吗？我正在使用类'btn-warning btn'

![在此处输入图像描述](../Images/6f7661d62d858083205c5d619a0a8fd4.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T15:12:24.563

金色轮廓表示按钮获得焦点。这意味着它将接收来自键盘的输入（尝试按“Enter”）。

如果它在页面加载时自动发生，则称为“自动对焦”。为了防止它使用`autofocus`属性`<body>`：

```
<body autofocus> 
```

如果您不希望出现金色轮廓（我不推荐），请使用 CSS 禁用它：

```
.btn:focus { outline: none; } 
```

# php - php run git 得到“ssh 权限被拒绝”

> ID：12370746
> 
> 赞同：6
> 
> 时间：2012-09-11T13:22:40.213
> 
> 标签：php, git, ssh, assembla

我正在尝试从浏览器运行 git pull 的 php 脚本，但我得到“sh：连接到主机 git.assembla.com 端口 22：权限被拒绝”

## **我的 php 脚本**：

```
<?php
$output=array();
$returnVar=0;
chdir("/var/www/html");
exec('git pull git@git.assembla.com:andrewadel.git master 2>&1', $output , $returnVar);
// exec('pwd', $output , $returnVar);
echo "<pre>\n";
echo "return status: $returnVar\n\n";
print_r($output);
echo "</pre>\n"; 
```

* * *

## **当我手动将脚本作为“apache”运行时，一切都很好**

```
bash-4.1$ whoami
apache
bash-4.1$ php gitsync.php
<pre>
return status: 0

Array
(
    [0] => From git.assembla.com:andrewadel
    [1] =>  * branch            master     -> FETCH_HEAD
    [2] => Already up-to-date.
)
</pre> 
```

* * *

## **当我从浏览器运行它时，它失败了**

```
http://103.7.164.33/gitsync.php?111

return status: 1

Array
(
    [0] => ssh: connect to host git.assembla.com port 22: Permission denied
    [1] => fatal: The remote end hung up unexpectedly
) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T06:40:24.070

这里有很多变量......但是我正在处理的远程 cgi 脚本遇到了几乎完全相同的行为。

就我而言，这个问题与 CentOS 上的 SELinux 有关。

`user@remoteserver:~$ getsebool -a | grep httpd`

显示：

```
...
httpd_can_network_connect --> off
... 
```

测试可能的修复（sudo 或以 root 身份运行）：

```
user@remoteserver:~$ setsebool httpd_can_network_connect=1
//...then initiate your serverside script remotely 
```

永久修复（如果以上证明有效）：

`user@remoteserver:~$ setsebool -P httpd_can_network_connect=1`

-P 选项确保主题 SELinux 布尔值设置为指定值作为未来重新启动时的默认值。见： `man getsebool`和 `man setsebool`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:31:10.140

您的网络服务器和 PHP 安装是否由 Suhosin、安全模式、Apparmor 或其他安全机制强制执行？

如果您要进行更多操作，我建议您尝试像[php-git这样的 PHP-Git 绑定。](https://github.com/libgit2/php-git)该模块设计用于在 PHP 代码中使用 Git。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:59:53.723

Apache 将以“nobody”用户身份运行脚本。您的脚本依赖于将私钥最有可能存储在 ~apache/.ssh/id_rsa

失败是 git 无法访问该密钥并且无法针对 git 服务器进行身份验证。

解决方案是指定要使用的正确密钥，并使执行脚本的用户可以访问该密钥。

阅读本文以了解如何指定密钥：

[指定使用或不使用 Ruby 执行 shell 命令时使用的私有 SSH 密钥？](https://stackoverflow.com/questions/4565700/specify-private-ssh-key-to-use-when-executing-shell-command-with-or-without-ruby)

在此处查看以不同用户身份运行的方法：

[https://serverfault.com/questions/226374/how-to-run-php-files-as-another-user-with-apache-and-fastcgi](https://serverfault.com/questions/226374/how-to-run-php-files-as-another-user-with-apache-and-fastcgi)

我不建议以nobody 身份运行（因为nobody 用户可以访问您的私钥）或以apache 身份运行（因为如果发现您的站点存在漏洞，您会增加可能造成的损害）。因此，您应该创建一个具有最小权限的不同用户来读取您的私钥并执行 git 命令。如果您只是为此创建一个受限用户帐户并将密钥（公共/私有）放入 ~/.ssh，则可能不需要指定密钥

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:23:57.137

这是权限问题吗？PHP 脚本最有可能以 none 用户身份运行，该用户可能没有运行 git 命令的权限。

# iphone - 用视图覆盖标签栏

> ID：12370748
> 
> 赞同：1
> 
> 时间：2012-09-11T13:22:44.180
> 
> 标签：iphone, ios, uiviewcontroller, uitabbarcontroller, device-orientation

我有一个`UIViewController`内部标签栏。对于选项卡栏中的一个 VC，我允许界面在设备旋转时旋转。挑战是，我想隐藏标签栏并调整我的视图大小。

我做了什么：

1)`- (void)willAnimateRotation....`在我的标签栏控制器中调用并设置`self.tabBar.isHidden`为 true -> 标签栏消失了。

2) 调用`- (void)willAnimateRotation....`并设置`self.mapView.frame`为最大高度。

但是...我在屏幕底部仍然有一个与标签栏大小完全相同的黑色条纹。有没有办法让标签栏完全消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T11:49:52.283

如果您想在推送特定`UIViewController`内容时始终隐藏标签栏，您可以执行以下操作：

```
self.hidesBottomBarWhenPushed = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:37:38.207

这对我有用

```
- (void)viewDidLoad {
    [super viewDidLoad];    
    previousRect = self.view.frame;     
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration;
{
    if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight) {               
        [self.navigationController setNavigationBarHidden:TRUE animated:FALSE]; 
        [[UIApplication sharedApplication] setStatusBarHidden:TRUE animated:FALSE];
    }
    else
    {
        [self.navigationController setNavigationBarHidden:FALSE animated:FALSE];
        [[UIApplication sharedApplication] setStatusBarHidden:FALSE animated:FALSE];
    }
}

-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation { 
    UIInterfaceOrientation toOrientation = self.interfaceOrientation;

    if ( self.tabBarController.view.subviews.count >= 2 )
    {
        UIView *transView = [self.tabBarController.view.subviews objectAtIndex:0];
        UIView *tabBar = [self.tabBarController.view.subviews objectAtIndex:1];

        if(toOrientation == UIInterfaceOrientationLandscapeLeft || toOrientation == UIInterfaceOrientationLandscapeRight) {                                     
                transView.frame = CGRectMake(0, 0, 480, 320 );
                tabBar.hidden = TRUE;
        }
        else
        {                               
                transView.frame = previousRect;         
                tabBar.hidden = FALSE;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:30:27.610

```
[self hideTabBar:self.tabBarController];

- (void) hideTabBar:(UITabBarController *) tabbarcontroller {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }

    }
    [UIView commitAnimations];    
} 
```

# arrays - 如何遍历散列数组中的散列数组

> ID：12370755
> 
> 赞同：2
> 
> 时间：2012-09-11T13:23:04.520
> 
> 标签：arrays, perl, hash

很多关于迭代哈希数组的线程，我每天都会这样做。但是现在我想在 AoH 和 AoH 中迭代。我对数组“章节”感兴趣，因为我想为该内部数组的每个数组元素添加一个哈希：

```
$criteria = [
    {
      'title' => 'Focus on Learning',
      'chapters' => [
                          {
                            'content_id' => '182',
                            'criteria_id' => '1',
                            'title' => 'Focus on Learning',
                          },
                          {
                            'content_id' => '185',
                            'criteria_id' => '1',
                            'title' => 'Teachers Role',
                          },
                          {
                            'content_id' => '184',
                            'criteria_id' => '1',
                            'title' => 'Parents in Class',
                          },
                          {
                            'content_id' => '183',
                            'criteria_id' => '1',
                            'title' => 'Students at Home',
                          }
                        ],
      'tot_chaps' => '4'
    }, 
```

从理论上讲，这是我想做的事情。

```
for my $i ( 0 .. $#$criteria ) {
   for my $j ( 0 .. $#$criteria->[$i]{'chapters'}) {
      print $criteria->[$i]{'chapters'}->[$j]{'title'}."\n";
   }
}

print $criteria->[$i]{'chapters'}->[1]{'title'}."\n"; -> Teachers Role 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:28:30.393

```
use warnings;
use strict;

foreach my $criterion (@$criteria) {
  foreach my $chapter (@{$criterion->{chapters}}) {
    print $chapter->{title}, "\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:36:34.830

像这样迭代数据结构通常比获取所有级别的索引（就像您的代码所做的那样）更容易。这使您可以自己处理每个级别：

```
for my $criterion (@$criteria) {
    print "$criterion->{title}\n";
    for my $chapter (@{ $criterion->{chapters} }) {
        print "\t$chapter->{title}\n";
    }
} 
```

作为旁注，`tot_chaps`如果这不是只读数据结构，则密钥是危险的。它很容易与`$criterion->{chapters}`已经存储在数组中的信息不同步并复制：

```
my $total_chapters = @{ $criterion->{chapters} }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T13:30:06.243

我同意 perreal，但要更狭隘地回答你的问题——你的代码应该没问题，除了使用`$#$arrayref`符号 when`$arrayref`不再是变量，你使用大括号`{}`，以便 Perl 可以判断引用的范围：

```
 for my $j ( 0 .. $#{$criteria->[$i]{'chapters'}}) { 
```

（即使`$arrayref` *是*一个变量，您也可以使用大括号来明确表示：

```
for my $i ( 0 .. $#{$criteria} ) { 
```

. 这同样适用于其他解除引用的方式：`@$arrayref`or `@{$arrayref}`，`%$hashref`or `%{$hashref}`，等等。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:33:46.037

如果你想添加一些东西，那就去做吧。我不确定我是否了解您要在哪里添加确切的内容。如果您希望每个章节都有另一个键/值对，请这样做：

```
for my $i ( 0 .. $#$criteria ) {
  for my $j ( 0 .. $#{$criteria->[$i]{'chapters'}}) {
    $criteria->[$i]{'chapters'}->[$j]->{'Teachers Role'} = 'Stuff';
  }
} 
```

* * *

此外，代码中还有一个小错误：使用`$#{$criteria->[$i]{'chapters'}}`而不是`$#$criteria->[$i]{'chapters'}`因为该`$#`部分仅在第一个之前有效`->`，因此它尝试访问`->[$i]{'chapters'}`out of `$#$criteria`which 是一个数字的值并且不起作用。

# c# - 在c#中检测空白图像（预期的图像是条形码）

> ID：12370758
> 
> 赞同：5
> 
> 时间：2012-09-11T13:23:15.080
> 
> 标签：c#, barcode, imaging

我基本上是用开源软件处理条形码。但该工具有时根本无法检测到条码。

所以我想自己检查一下图像是否真的是空白的，或者它是否包含某种条形码。

我的图像是通过扫描产生的，它们只包含一个条形码（如果它们不是空白的）和一些扫描产生的噪声图像。所以我的问题甚至可以归结为检查图像是否包含大量集中的黑色像素，以将其与带有噪声的白色空间图像区分开来。

我已经检查了[这个](https://stackoverflow.com/questions/5757295/how-to-detect-possible-presence-of-barcode-in-image-when-value-cannot-be-read)SO question，但建议是使用“概率霍夫线变换”，我发现这对我的情况来说有点矫枉过正。

我也检查了[这个](http://www.chinhdo.com/20080910/detect-blank-images/)，但它有不安全的代码。我正在寻找一个托管的 C# 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:29:30.713

您正在寻找的是计算机视觉，听起来很花哨，但现在非常简单（5 年前它并不那么流行，而且有点困难）看看这些文章：

[http://www.codeproject.com/Articles/28465/Easy-to-use-Wrapper-DLL-for-Intel-s-OpenCV-Library](http://www.codeproject.com/Articles/28465/Easy-to-use-Wrapper-DLL-for-Intel-s-OpenCV-Library)

[http://www.chinhdo.com/20080910/detect-blank-images/](http://www.chinhdo.com/20080910/detect-blank-images/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:30:17.160

您链接到的第二个示例仅使用`unsafe`代码来加快对位图中像素值的访问。您可以使用`Bitmap`'`GetPixel()`方法轻松替换所有这些（缺点是这会非常慢，但对于您的目的来说它可能仍然足够快）。

然而，就`unsafe`代码而言，没有理由担心使用它。标签的唯一问题`unsafe`是某些用户（取决于他们的权限级别）可能无法运行代码，尽管我自己从未真正遇到过这个潜在问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:40:03.210

您可以使用这个 C# 库[OpenSURF](http://www.chrisevansdev.com/computer-vision-opensurf.html "开放式冲浪")并查看 SURF 特征描述符向量的值。我不确定它是否“安全”

# android - 我的传入 SMS 处理接收器应从系统获得什么许可？

> ID：12370763
> 
> 赞同：6
> 
> 时间：2012-09-11T13:23:36.470
> 
> 标签：android, broadcastreceiver, android-permissions

我在我的 Android 应用程序中静态注册了一个 BroadcastReceiver，它处理传入的 SMS 消息，如下所示：

```
 <receiver
            android:name=".receivers.SmsReceiver"
            android:exported="true" >
            <intent-filter android:priority="100" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver> 
```

Lint 用警告标记了这一点，因为 Receiver 是在不需要调用者的任何权限的情况下导出的。如果我将导出的属性设置为 false，系统将无法在收到 SMS 消息时调用我的 Receiver。

那么在注册我的接收器以处理传入的 SMS 消息时，我应该从系统获得哪些权限？

**编辑：**

我不是要求“使用许可”标签使我的应用程序能够接收 SMS 消息。我要求为我的接收器提供正确的“android:permission”值，所以*只有*系统可以发送这样的广播消息，而另一个应用程序不能为我的应用程序欺骗这样的事件。

例如：

```
 <receiver
            android:name=".receivers.SmsReceiver"
            android:exported="true"
            android:permission="com.android.permission.SOME_PERMISSION_ONLY_THE_SYSTEM_HAS">
            <intent-filter android:priority="100" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-16T03:49:34.963

使用 android:priority="2147483647" 代替 android:priority="100" 因为假设您使用的任何应用程序的优先级高于您设置的优先级，那么您的广播永远不会通知。还要在您的 mainfest uses-permission android:name="android.permission.RECEIVE_SMS" 中检查此权限

# android - Titanium 使用 Interpreter 或 Compiler 做什么

> ID：12370766
> 
> 赞同：1
> 
> 时间：2012-09-11T13:23:42.490
> 
> 标签：android, ios, titanium-mobile

有人可以让我弄清楚 Titanium 移动是使用解释器还是编译器来构建适用于 Android 和 iOS 的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:56:34.050

这是一篇很好的文章，涵盖了 Titanium 移动设备的一些内部工作 - [http://titaniumninja.com/post/10559549700/fastdev-for-ios-how-it-works/](http://titaniumninja.com/post/10559549700/fastdev-for-ios-how-it-works/)

基于它：“构成应用程序的 JavaScript 文件不会编译为本机代码。而是由 JavaScript 引擎解释”

# r - R：运行标准差

> ID：12370771
> 
> 赞同：1
> 
> 时间：2012-09-11T13:24:03.020
> 
> 标签：r, montecarlo

我需要计算均值向量的“运行”标准差，就像样本量在增加一样计算它们。换句话说，我需要计算 mean_y[1]、mean_y[1] 和 mean_y[2]、mean_y[1]、mean_y[2]、mean_y[3] 等的 sd，

在哪里：

```
y <- rnorm(10000, mean=5, sd=2) 
i <- seq(1 : length(y))

mean_y <- cumsum(y)/i 
```

尝试应用相同的标准（因此，不明确使用循环），我为运行均值向量的标准差生成了以下代码：

```
se <- sqrt(1/i^2*cumsum(y^2) - 1/i*mean_y^2) 
```

这是因为 var(mean(x)) = 1/n*var(x)。对我来说，代码似乎没问题。但是，当我将运行均值及其置信区间与 i（增加的样本量）绘制成图时，95% 的波段与均值完全一致！

代码是：

```
error <- qnorm(0.975)*se/sqrt(i)
lower <- mean_y - error
upper <- mean_y + error

# plotting means and ci's against sample size (= up to 10000)

plot(x=i, y=mean_y, xlab="Number of iterations (sample size)", 
ylab="E[y] estimates and 95% CI's", cex=0.4, ylim=c(4.6, 5.4))
lines(lower, col="gold")
lines(upper, col="gold") 
```

基本原理是生成一个图表，显示随着样本量不断增加，估计量“mean_y”的收敛性。

谁能帮我？可能存在某种基本错误，无论是在`se`公式中还是在`lower`and中`upper`。谢谢！！斯特凡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:43:43.923

事实证明，我错误地除以 i。此外，由于不考虑方差的“n-1”校正，我的公式与 Carl Witthoft 建议的公式不具有可比性。

在以下几行中，您可以找到解决初始问题并绘制相同图形的三种等效方法：

```
i <- seq(1 : length(y))
m <- cumsum(y)/i

se_y <- sqrt((1/(i-1)*cumsum(y^2) - i/(i-1)*m^2))

error <- qnorm(0.975)*se_y/sqrt(i)
lower <- m - error
upper <- m + error

# equivalent (slightly slower) methods for getting the std. errors

# method2:
se_2 <- rep(NA, length(y))
for (n in 1:length(y))  {
  se_2[n] <- sd(y[1:n])
}
# method3:
se_3 <- sapply(1:length(y), FUN= function(x) sd(y[1:x])) 
```

最终的图表是：

```
# plotting means and ci's against sample size (= up to 10000)
plot(x=i, y=m, xlab="Number of iterations (sample size)", 
title("Convergence of the ENVP's mean"), 
ylab="E[y] estimates and 95% CI's (EUR millions)", cex=0.4, ylim=c(2620, 2665))
lines(lower, col="gold")
lines(upper, col="gold")
legend("bottomright", legend=c("envp's mean", "95% ci"),
cex=0.8, col=c("black", "gold"), lwd=2, lty=1, bty="n")

dev.copy(tiff, file="mc_envp.tiff", height=6, width=6, units="in", res=200)
dev.off(); dev.off()
windows.options(reset=TRUE) 
```

希望这一切都会有所帮助！

# php - 如何将带有文件的子文件夹移动到另一个目录？

> ID：12370778
> 
> 赞同：0
> 
> 时间：2012-09-11T13:24:17.343
> 
> 标签：php, file, scandir

我使用此代码将文件从一个文件夹移动到另一个文件夹。

```
$src = path_a;
$dest = path_b;
// get files
$files = scandir($src);
// movin files
foreach ($files as $file){
    if (in_array($file, array(".",".."))) continue;
    if (copy($src.$file, $dest.$file)){
        $delete[] = $src.$file;
    }
}
// del files
foreach ($delete as $file) {
    unlink($file);
} 
```

它可以工作，但我有一个子文件夹，其中一些文件位于源代码中（“path_a”）。我如何将这个带有文件的子文件夹移动到“path_b”并删除 path_a 目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:30:47.600

最简单的方法：

```
foreach ($files as $file){
    if (in_array($file, array(".",".."))) continue;
    rename($src.$file, $dest.file);
} 
```

有关更多详细信息，请查看[重命名](http://fr2.php.net/manual/en/function.rename.php).

# html - 使用 GAE+Java - 联系表格和评论框

> ID：12370779
> 
> 赞同：1
> 
> 时间：2012-09-11T13:24:25.553
> 
> 标签：html, google-app-engine, web, comments, contact-form

我使用 Adob​​e Dw 使用一些简单的代码和设计创建了我的网站，并将其托管在 GAE 上。这是一个非常简单的网站、html 文件、图像和外部 css ......实际上，这就是我在编程方面的知识范围，除了简单的 html 和 css 之外，我没有任何知识！

我想收到我的用户的评论，我还需要一个联系表格，将信息转发到我的电子邮件。

第二个，我想，应该很容易，谷歌免费提供了很多结果“表单到电子邮件”

但是对于评论，我需要能够将其保存在 GAE 上的服务器上。

我不确定 GAE 是如何工作的，但如果我是正确的，它应该像任何其他服务器一样运行，并且允许我也可以写入数据，而无需登录到我的帐户并使用 Eclips！

这是我需要知道的：

我如何从网站用户那里获得评论（或任何提交的数据），将其保存到 GAE 服务器，并在需要时能够稍后对其进行修改。

因为我不知道应该从哪里开始，所以即使你只告诉我应该寻找什么以及我需要什么，它也会对我有很大帮助。

我忘了告诉我，我使用 Eclipse/Java 将“war”文件夹中的代码部署到 GAE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:37:49.943

好吧，简短的回答是：是的，GAE 提供了一个数据存储工具，您可以通过其[Java API](https://developers.google.com/appengine/docs/java/datastore/)或[Python API访问它](https://developers.google.com/appengine/docs/python/datastore/)

更长的答案：您必须学习如何用这两种语言中的任何一种编写组件，以便您可以将其添加到您的应用程序中，并且它将由某些操作（例如提交表单）触发。对于 Java，这将是一个[Servlet](http://docs.oracle.com/javaee/5/tutorial/doc/bnafd.html)

# .net - WebService：如何接受 text/xml 而不是 application/soap+xml

> ID：12370782
> 
> 赞同：1
> 
> 时间：2012-09-11T13:24:47.673
> 
> 标签：.net, web-services

我正在尝试使用 3rd 方网络服务并出现错误：

System.ServiceModel.ProtocolException：内容类型**text/xml**；响应消息的 charset=utf-8 与绑定的内容类型不匹配 ( **application/soap+xml** ; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。

消息本身看起来正确（前 1024 个字节）：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
    <soap:Header/>
    <soap:Body> <m:PullActionsResponse xmlns:m="http://172.17.2.8/Test/Actions">
    <m:return xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:type="m:ArrayOfActions">
        <m:Actions>
            <m:Id>51603d29-8469-11e1-8069-bc305bd4fe84</m:Id>
            <m:Name>Discount 20%</m:Name>
            </m:Actions>
... 
```

我在 MSDN 中找到了 msdn 文章“自定义消息编码器：自定义文本编码器”，但不清楚如何实现 CustomTextMessageBindingElement。

# zend-framework - ZF2 路由与 ZF1 相同

> ID：12370788
> 
> 赞同：4
> 
> 时间：2012-09-11T13:25:02.350
> 
> 标签：zend-framework, routing, zend-framework2, zend-router

如何使路由自动适用于 ZF1 结构中的所有内容？

模块/控制器/动作/par1Name/par1Val/par2Name/par2Val/

我阅读了有关路由的信息，但按照我的看法，我必须手动添加所有操作，并且我发现可选参数有问题......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T19:22:59.033

您可以至少在每个控制器的基础上设置通配符 child_route，以获取类似 zf1 的路由：

```
'products' => array(
                'type' => 'Zend\Mvc\Router\Http\Segment',
                'options' => array(
                    'route' => '/products[/:action]',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Products',
                        'action' => 'index'
                    )
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'wildcard' => array(
                        'type' => 'Wildcard'
                    )
                )
            ) 
```

然后，您可以使用例如 url() 视图助手：

```
$this->url('products/wildcard',array('action'=>'edit','id'=>5,'foo'=>'bar'); 
```

这将产生一个像 /products/edit/id/5/foo/bar 这样的 url

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T04:29:50.850

这是我用于从 ZF1 -> ZF2 移植的所有内容的标准路由器，请记住，您仍然需要将控制器添加为列表顶部的可调用对象。另外请记住，我总是将我的实际应用程序放在列表的底部，以便所有其他模块在它到达应用程序之前定义它们的路由。然而，这使得路由就像 ZF1 一样工作......我看到很多人问这个问题，所以我想我会发布！通过下面的设置，我可以添加我的新控制器（支持下面...）然后打开浏览器并转到... /support，它工作得很好。

```
return array(
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController',
            'Application\Controller\Support' => 'Application\Controller\SupportController',
        ),
    ),
    'router' => array(
        'routes' => array(
            '*' => array(
                'type' => 'Segment',
                'options' => array(
                    'route' => '/[:controller[/:action]]',
                        /* OR add something like this to include the module path */
                        // 'route' => '/support/[:controller[/:action]]',
                    'constraints' => array(
                        'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'wildcard' => array(
                        'type' => 'Wildcard'
                    )
                )
            ),
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions' => true,
        'doctype' => 'HTML5',
        'not_found_template' => 'error/404',
        'exception_template' => 'error/index',
        'template_map' => array(
            'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404' => __DIR__ . '/../view/error/404.phtml',
            'error/index' => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),   
    /* Service manager / translator etc stuff go HERE as they change less frequently */
); 
```

我编辑了上面的路线以包含一个完整的模块路径作为我在最初的帖子中错过的评论。

# android - android:padding 的有效值格式？

> ID：12370791
> 
> 赞同：5
> 
> 时间：2012-09-11T13:25:18.000
> 
> 标签：android

在编写 xml 文件时，我知道以下工作：

```
android:padding="20px" 
```

是否有其他可用的有效值格式`padding`？例如

```
android:padding="10px 20px 10px 20px" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:30:03.413

您可以`android:paddingLeft , android:paddingRight , android:paddingTop , android:paddingBottom`单独使用。

或者，从 API v17 开始，为了正确支持双向文本（LTR 和 RTL），在所有情况下将 Left 更改为 Start 和 Right 到 End。例如`android:paddingLeft`变成`android:paddingStart`.

您可以使用 coding 设置填充。 `setPadding (int left, int top, int right, int bottom)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:29:12.680

[http://developer.android.com/reference/android/view/View.html#attr_android:padding](http://developer.android.com/reference/android/view/View.html#attr_android:padding)

# android - Activity 退出动画在 Android 4.0 上无法正常工作

> ID：12370793
> 
> 赞同：16
> 
> 时间：2012-09-11T13:25:34.067
> 
> 标签：android, animation, android-activity

我有一个改变活动的打开/关闭/进入/退出动画的主题：

```
<style name="down_up_theme" parent="Theme.rtlfr">
    <item name="android:windowAnimationStyle">@style/down_up_animation</item>
</style>

<style name="down_up_animation" parent="@android:style/Animation.Activity">
    <item name="android:activityOpenEnterAnimation">@anim/slide_in_top</item>
    <item name="android:activityOpenExitAnimation">@anim/hold</item>
    <item name="android:activityCloseEnterAnimation">@anim/hold</item>
    <item name="android:activityCloseExitAnimation">@anim/slide_out_bottom</item>
</style> 
```

在清单中：

```
<activity android:name=".activity.ArticlesActivity"
        android:theme="@style/down_up_theme" /> 
```

目标是使活动内容在开始时向下滑动，并在退出时向上滑动。

动画在 2.3 上运行良好。但是，在 4.0 上，退出动画（向上滑动）不起作用。它所做的动画是关闭由此活动产生的活动。就我而言，我想用文章列表为活动的结束设置动画，而不是文章详细信息的结束有上滑动画。

我想我可以尝试将结束动画添加到产生我想要动画的活动的活动中，但它实际上产生了应该有不同动画的活动。[我在文档](http://developer.android.com/reference/android/R.attr.html#activityCloseEnterAnimation)中也找不到关于 2.3 与 4.0 差异的任何信息。

如何让我的动画在 4.0 上运行？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-13T15:08:42.927

我不确定为什么主题中设置的退出动画在 ICS+ 上不起作用，但调用`overridePendingTransition()`似乎正在起作用。为您执行此操作的最简单方法可能是`finish()`在您的活动中覆盖：

```
@Override
public void finish() {
    super.finish();
    overridePendingTransition(R.anim.hold, R.anim.slide_out_bottom);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-14T21:51:44.913

我想在这个答案中补充一点；覆盖动画解决方案工作正常，但您可能不想对动画进行硬编码。像其他版本的平台一样从清单中获取它们会很好......所以......

向您的活动添加几个成员字段以保存附加到您的活动的动画的 ID。

```
protected int activityCloseEnterAnimation;
protected int activityCloseExitAnimation; 
```

在你的 onCreate 的某个地方...

```
// Retrieve the animations set in the theme applied to this activity in the
// manifest..
TypedArray activityStyle = getTheme().obtainStyledAttributes(new int[] {android.R.attr.windowAnimationStyle});
int windowAnimationStyleResId = activityStyle.getResourceId(0, 0);      
activityStyle.recycle();

// Now retrieve the resource ids of the actual animations used in the animation style pointed to by 
// the window animation resource id.
activityStyle = getTheme().obtainStyledAttributes(windowAnimationStyleResId, new int[] {android.R.attr.activityCloseEnterAnimation, android.R.attr.activityCloseExitAnimation});
activityCloseEnterAnimation = activityStyle.getResourceId(0, 0);
activityCloseExitAnimation = activityStyle.getResourceId(1, 0);
activityStyle.recycle(); 
```

那么无论您的活动完成/应该应用动画，包括...

```
overridePendingTransition(activityCloseEnterAnimation, activityCloseExitAnimation); 
```

并且您的活动应该正确地尊重您在清单中附加到活动的主题/样式中设置的动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-29T06:57:43.037

我也被这个问题弄糊涂了。但幸运的是不久之后我找到了答案。您应该检查动画文件的根元素是否为“Set”。如果不是，您应该用“Set”元素包装它，然后 ActivityCloseAnimation 属性可以正常工作。我试过了。希望它可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T02:25:40.963

[你应该看看这里](https://stackoverflow.com/a/18347844/1733423)使用***overridePendingTransition***和***windowEnterAnimation/windowExitAnimation***应该为你工作

# c# - 匹配括号之间的整数

> ID：12370794
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:25:41.543
> 
> 标签：c#, .net, regex, string

我得到了以下格式的字符串：

```
ASDF [         6]

ZXC[1]

OtPasd[ 4 ]

asdffa[   7] 
```

我需要检索有效字符串括号之间的整数。只要满足以下条件，这些字符串就有效：

1.  括号之间仅存在空格。IE：“ZXCV[a2]”无效
2.  所有支架均已正确闭合。IE：“qwr[2”无效
3.  所有字符串都只有一个开/关括号。IE：“zxcf[4]]]”无效

我最好避免使用正则表达式，因为我得到了大量的字符串，所以计算量不大的东西会更可取。

验证和检索整数的最干净和**最快的方法是什么？**

编辑：我决定使用正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:14:41.740

In my personal opinion the cleanest solution is to use regexes. But instead of guessing if it is computationally intensive I would rather benchmark it. Here's the code.

```
const int Count = 10000000;
const string testString = "<whatever>";

// Solution No. 1: use Regex.Match()    
Stopwatch sw = new Stopwatch();
sw.Start();
for (int i = 0; i < Count; i++)
{
    var match = Regex.Match(@"\[\s*(\d+)\s*\]$", testString);
    if (!match.Success)
        continue;
    var number = int.Parse(match.Groups[1].Value);
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds);

// Solution No. 2: use IndexOf() and Substring() shenanigans
sw.Start();
for (int i = 0; i < Count; i++)
{
    var lb = testString.IndexOf('[');
    var rb = testString.LastIndexOf(']');
    if (lb < 0 || rb != testString.Length - 1)
        continue;
    var str = testString.Substring(lb + 1, rb - lb - 1);
    int number;
    if (!int.TryParse(str, out number))
        continue;
    // use the number
}
sw.Stop();
Console.WriteLine(sw.ElapsedMilliseconds); 
```

And here are the results:

```
Solution  |  testString  |   Time (ms)  | Comment
----------|--------------|--------------|-----------------------
     1    | abc [      ] |    4476      | Invalid input string
     2    | abc [      ] |    6594      | Invalid input string
     1    | abc[1234]    |    4446      | Valid input string
     2    | abc[1234]    |    6290      | Valid input string 
```

As you can see, not only the regex solution is shorter and cleaner, it is actually faster. And if you play with different input strings you will notice that the longer your input string is, the larger the gap between the first and the second solutions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:32:58.640

如果您想避免使用正则表达式...使用 IndexOf/LastIndexOf 然后解析剩余的字符串是否适合您的需要？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:36:32.667

要将 int 放在括号之间，您也可以尝试这种方式：

```
string tmpString = "ASDF [         6]";
int start = tmpString.IndexOf('[') + 1;
int length = tmpString.IndexOf(']') - start;
string subString = tmpString.Substring(start, length);
int tempInt;
if(Int.TryParse(subString, out tempInt))
return tempInt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:29:44.020

试试这个正则表达式：

```
\[\s*(\d+)\s*\]$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T13:29:58.710

在匹配组中使用这个正则表达式`(?m)(?!<=\[)(\[\s*)(\d+)(\s*\])(?!\])` 你的整数

# symfony - 什么时候应该在 SonataAdmin 工作流程中禁用 Doctrine 过滤器？

> ID：12370795
> 
> 赞同：2
> 
> 时间：2012-09-11T13:25:41.537
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

我确定这是一个常见的问题，我需要在 SonataAdmin 中关闭可软删除和类似的过滤器，直到现在我一直在做：

```
use Sonata\AdminBundle\Admin\Admin as BaseAdmin;

class Admin extends BaseAdmin
{
    /**
     * {@inheritdoc}
     */
    public function configure()
    {
        /**
         * This executes everywhere in the admin and disables softdelete for everything, if you need something cleverer this should be rethought.
         */
        $filters = $this->getModelManager()->getEntityManager($this->getClass())->getFilters();

        if (array_key_exists('approvable', $filters->getEnabledFilters())) {
            $filters->disable('approvable');
        }

        if (array_key_exists('softdeleteable', $filters->getEnabledFilters())) {
            $filters->disable('softdeleteable');
        }
    }
} 
```

这导致了许多问题，一，它需要条件，因为管理类配置了两次，一次构建导航，再次构建接口，二，管理类在冷（可能是 APC？）缓存上实例化前端，这很不酷。

你打算把这个逻辑放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-08T05:55:10.190

您可以使用事件侦听器。例如：

服务：

```
filter.configurator:
class: AppBundle\Filter\Configurator
arguments: ["@doctrine.orm.entity_manager"]
tags:
    - { name: kernel.event_listener, event: kernel.controller } 
```

监听类：

```
namespace AppBundle\Filter;

use Doctrine\Bundle\DoctrineBundle\Registry;
use Doctrine\ORM\EntityManagerInterface;
use Sonata\AdminBundle\Controller\CoreController;
use Sonata\AdminBundle\Controller\CRUDController;
use Sonata\AdminBundle\Controller\HelperController;
use Symfony\Component\HttpKernel\Event\FilterControllerEvent;

/**
 * Class Configurator
 *
 * @author Andrey Nilov <nilov@glavweb.ru>
 */
class Configurator
{
    /**
     * @var Registry
     */
    private $em;

    /**
     * @param EntityManagerInterface $em
     */
    public function __construct(EntityManagerInterface $em)
    {
        $this->em = $em;
    }

    /**
     * onKernelRequest
     */
    public function onKernelController(FilterControllerEvent $event)
    {
        $controller = $event->getController();
        $controllerClass = $controller[0];

        $isAdminController =
            $controllerClass instanceof CRUDController ||
            $controllerClass instanceof CoreController ||
            $controllerClass instanceof HelperController
        ;

        if ($isAdminController) {
            $this->em->getFilters()->disable('softdeleteable');
        }
    }
} 
```

# crystal-reports - 水晶报告 - 跨多列重复组标题

> ID：12370800
> 
> 赞同：5
> 
> 时间：2012-09-11T13:25:57.263
> 
> 标签：crystal-reports, report

我有一个包含 3 列的报告，它按我在组标题中显示的值分组。该报告设置为向下运行。

如果详细信息跨越多列，我如何在下一列重复该组标题。

我已经在组专家中检查了“在每一页上重复组标题”。我已经在详细信息部分的布局选项卡中检查了“具有多列的格式组”。它不会让我在每列的组标题中插入文本对象。

不知道该怎么做。我可以编写一个仅显示在每列顶部的公式，但不确定是否有一个函数可以找出第二列何时开始。

**编辑**

我想要的是下面

```
 Group Header Text       Group Header Text    Group Header Text
  Detail Values            Detail Values         Detail Values
  Detail Values            Detail Values         Detail Values 
```

我希望在每列的顶部显示组标题文本。不管是新组的开始还是组的中间。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:06:38.823

公式中提供的`Previous()`功能允许根据特定字段值从先前记录到当前记录的变化来显示-隐藏文本对象。

这是你要找的吗？你能编辑你的问题，画一个你所拥有的和你想要的样本吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T06:34:10.823

好的，我有你的解决方案，你分组的字段，只需将它放在页眉上，它就会在每一页上重复，直到该组的列完成。

假设您按员工姓名进行分组，只需将员工姓名字段放在页面标题上，它应该可以解决问题，我只是尝试过它并且它有效，谢谢。

# html - 为什么我的锚链接将内容推到我的标题后面？

> ID：12370804
> 
> 赞同：1
> 
> 时间：2012-09-11T13:26:18.827
> 
> 标签：html, css, anchor

我有一个布局，其中标题部分使用绝对定位，当我单击内容中的锚链接时，该链接会将我带到正确的位置，但它将我的内容推到标题后面。

是什么原因造成的，我该如何解决？

这是网址：

[http://digitaldemo.net/joy/krippen-abc/](http://digitaldemo.net/joy/krippen-a-b-c/)

非常感谢！

辛西娅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:51:11.830

您的#container 样式和#content 样式有一个“溢出：隐藏”。尝试将这两个声明注释掉，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:28:49.380

检查锚标签和标题标签的**z-index** css 属性。

# java - 如何使用 log4j 获取日志文件中的文件名？

> ID：12370811
> 
> 赞同：0
> 
> 时间：2012-09-11T13:26:36.707
> 
> 标签：java, log4j

我是第一次使用 log4j。根据要求，我想在日志文件中显示日志中的文件名（与显示日期相同）。

例如：

```
17:56:57,863 help INFO  [STDOUT] PropertyHandler-If 
```

where `help`us`PropertyHandler-If`写入的文件的名称`log.debug()`。

此外，我想要与数据库有关的所有异常的不同日志文件。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:31:41.547

您可以将[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)与“F”选项一起使用：“用于输出发出日志记录请求的文件名。”

正如@Peter Lawrey 指出的那样，您可以使用多个附加程序，在您的情况下是为数据库记录的特定[FileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/FileAppender.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:29:45.377

您可以定义多个附加程序（每个文件一个）并设置不同的记录器以使用不同的附加程序。通过使用不同的 Log 对象，您可以将它们定向到不同的文件。例如，单个组件可以有多个`Log`s

# character - C# - 获取字符的 ANSI 代码值

> ID：12370812
> 
> 赞同：3
> 
> 时间：2012-09-11T13:26:42.400
> 
> 标签：character, ansi, windows-1252

我想检索给定字符的 ANSI 代码值。例如，当我现在得到商标字符的 int 值时，我得到 8482。相反，我想得到 153，这是代码页 1252 中商标字符的值。

一些帮助将不胜感激。

于尔根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:38:23.360

自己找到的：

```
Encoding ansiEncoding = Encoding.GetEncoding(1252);
byte[] bytes = ansiEncoding.GetBytes(c);
int code = bytes[0]; 
```

# c++ - 连接写入此缓冲区开头的两个字符串的函数？

> ID：12370819
> 
> 赞同：0
> 
> 时间：2012-09-11T13:27:17.267
> 
> 标签：c++, concatenation

我们在 Win32Api 中有 StringCchCat 函数，

> 将一个字符串连接到另一个字符串。向函数提供目标缓冲区的大小以确保 StringCchCat 不会写入超过此缓冲区的末尾。

好吧..

```
StringCchCat(dirWPath, MAX_PATH, TEXT("\\*")); 
```

我会得到：dirWPath + "\\*"

我寻找得到一个 :"\\*" + dirWPath

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:38:52.923

```
std::string first = dirWPath, second = "\\*";
std::string result = second + first; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:39:03.967

您可以先通过通配符：

```
char str1[MAX_PATH] = "\\*";
StringCchCat(str1, MAX_PATH, dirWPath); 
```

# html - 使用下划线将动态宽度、固定位置对象居中

> ID：12370822
> 
> 赞同：1
> 
> 时间：2012-09-11T13:27:25.497
> 
> 标签：html, css, css-position

出于某种原因，我被这么简单的事情难住了。

如何将固定位置对象与宽度不同的底部边框居中对齐？

我现在遇到的问题是它只适用于 100% 宽度的对象。

我可以使用固定宽度的 div 或使用 javascript 轻松做到这一点，但是是否有一个仅 css 的解决方案呢？

[http://jsbin.com/uvaron/2](http://jsbin.com/uvaron/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:49:17.997

`display: inline-block;`上使用`#title p`。

[**演示**](http://jsbin.com/uvaron/4/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:34:11.303

这可以通过 CSS 来完成。如果您将固定元素设置为具有 a`left: 50%`并且`margin-left: -[half the width of your element]`它甚至会在调整大小时居中。

这是一个[小提琴](http://jsfiddle.net/scrimothy/hWKgv/)

# ruby - 如何将函数应用于每个类属性值？

> ID：12370824
> 
> 赞同：1
> 
> 时间：2012-09-11T13:27:33.727
> 
> 标签：ruby, xml-serialization, metaprogramming

我有这个超级班

```
# encoding: utf-8

class EntidadeCte

  include ROXML
  include ActiveModel::Validations

  class << self
    # apelida o xml_accessor do ROXML para cte_attr
    alias :cte_attr :xml_accessor

    # define um accessor ruby comum para os atributos do cte
    def xml_accessor(*attrs)
      attr_accessor *attrs
    end

    # todos os atributos da entidade
    def cte_attrs
      roxml_attrs.map(&:attr_name)
    end

  end

  # todos os atributos da entidade do objeto
  def cte_attrs
    self.class.cte_attrs
  end

  # retorna o xml representando a entidade
  def to_cte
    doc = Nokogiri::XML::Document.new
    doc.root = to_xml
    doc.serialize
  end

  # retorna o xml ou delega a classe herdada
  def to_s
    self.respond_to? :to_cte ? to_cte : super
  end

end 
```

和这个子类

```
# encoding: utf-8

    class TagCte < EntidadeCte

      def initialize
        self.xmlns = "http://www.portalfiscal.inf.br/cte"  
      end

      xml_name :CTe

      cte_attr :xmlns, :from => "@xmlns"
      cte_attr :infCte, :as => ConhecimentoTransporte

    end 
```

我想做的是，一旦我调用`to_cte`我的子类对象，它就会返回它的属性值，但只有在对它们中的每一个应用一个函数之后。我想首先规范化它们的值（从字符串中删除重音符号、转义引号、特殊字符等）。在这种情况下我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:31:55.193

您在此处显示的代码显然缺少很多内容。我推测您的实体对象具有某些“属性”，这些属性只是通过链接到`attr_accessor`. 在 的特定子类（或子类）中`EntitadeCte`，您希望将一些特殊行为应用于这些“属性”。

子类的所有“属性”是否直接在该子类中定义？还是其中一些是遗传的？

如果它们直接在子类中定义，您可以简单地在子类中重新定义`cte_attr`，例如：

```
class Subclass < EntitadeCte
  def self.cte_attr(*attrs)
    attrs.each do |attr|
      attr_writer(attr)
      class_eval("def #{attr}; do something special to @#{attr} here; end")
    end
  end
end 
```

`attr_accessor`因此，您可以定义自己的等效“类宏”，而不是使用，它为读者添加了一些特殊行为。

**更新：**从您的评论来看，听起来*所有*子类都`EntitadeCte`需要对属性进行相同的特殊处理。是对的吗？在这种情况下，您可以`cte_attr`将超类中的定义更改为类似于上面的示例代码。

或者，您可以定义`cte_attr`（在超类中）生成*2 个*读取器方法，一个用于规范化属性值，一个不规范化。然后编写一个`to_cte`使用“规范化”属性读取器的方法。

有各种各样的选择。如果我在这里给您的选择不能满足您的需求，那么您需要更具体地说明您想要做什么。问题是某些子类应该使用“规范化”属性，而其他子类应该使用“非规范化”属性吗？还是您要动态打开和关闭“规范化”的问题？

# linux - Linux 保留堆大小

> ID：12370827
> 
> 赞同：0
> 
> 时间：2012-09-11T13:27:48.170
> 
> 标签：linux, linux-kernel, kernel

我注意到在 2.6.32 MIPS 内核上，内存布局总是相同的。那是一个程序的堆开始于`0x10146000`大多数进程（或者至少是我研究过的那些）。另一个相似之处是总是从`/lib32/ld-2.9.so`开始`2aaa8000`。

所以基本上堆在虚拟内存中保留了所有这个大小，我想修改它，因为似乎在某些时候我用完了虚拟内存（在地址空间的其余部分）mmap 将失败而不尝试在上述空间中进行映射，尽管堆只有几 MB。有人现在内核在哪里设置这个地址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:02:09.163

如果你往里看，`arch/mips/mm/mmap.c`你会发现在 Linux 中有两种放置内存的方式，选择哪种方式取决于 的返回值`mmap_is_legacy`，这又取决于你是否启用了无限堆栈（强制使用传统模式）以及编译后的二进制标志`PT_GNU_STACK`（没有此设置强制兼容模式）。新布局是在 2.6.7 中添加的，并在[http://lwn.net/Articles/90311/](http://lwn.net/Articles/90311/)中进行了描述。

简单地说，旧布局如下所示：

```
| CODE ---- | HEAP ----------> | MMAP ------>  | <-------- STACK |
| 0GB       |                  | 2GB/3         |             2GB | 
```

新布局如下所示：

```
| CODE ---- | HEAP ----------> | <------------- MMAP | --- STACK |
| 0GB       |                  |             2GB-8MB |       2GB | 
```

请注意，在旧布局中，堆和 mmap 区域之间有固定的划分，而在新区域中它是灵活的。您可能正在运行缺少新模式的旧内核，或者您正在以我之前描述的兼容模式运行。

请注意，您找到的地址 0x2AAA8000 大约是 2GB/3（libc 是首先要映射的），而 0x10146000 大约是 256MB（这足以容纳您的程序的代码、数据和未初始化的数据段）。

# c# - UltraGrid 作为 UltraToolBar

> ID：12370829
> 
> 赞同：0
> 
> 时间：2012-09-11T13:27:54.037
> 
> 标签：c#, infragistics, ultrawingrid

我需要的是一个非常定制的情况。
我需要将 UltraGrid 添加到 ultraToolbar 作为普通工具，如 buttontool。我需要在哪里显示自定义表格数据。
我试图从 ToolBase 派生一个 userControl 但不知何故它不起作用。
我在这里附上我的代码。它有一些错误。
**FilterGrid.cs**用户控件

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Drawing;
    using System.Data;
    using System.Text;
    using System.Windows.Forms;
    using Infragistics.Win.UltraWinToolbars;
    using System.Runtime.Serialization;
    using Infragistics.Win.UltraWinGrid;
    using System.Security.Permissions;
    using Infragistics.Shared.Serialization;
    using Infragistics.Win.AppStyling;

    namespace WindowsApplication1
    {
        public partial class FilterGrid : UserControl
        {
            public FilterGrid()
            {
                InitializeComponent();
            }

            [TypeConverter(typeof(FilterGrid.GridInternal))]
            [Serializable()]
            private class GridInternal : ToolBase
            {

                internal UltraGrid uGrid = new UltraGrid();
                #region Constructors

                public GridInternal(String key)
                    : base(key)
                {
                    this.SharedProps.Width = 200;
                    this.SharedProps.ToolTipText = "FilterGrid";
                    this.SharedProps.DisplayStyle = ToolDisplayStyle.DefaultForToolType;
                }

                /// <summary>
                /// Constructor used for de-serialization
                /// </summary>
                protected GridInternal(SerializationInfo info, StreamingContext context): base(info, context)
                {

                }

                #endregion

                #region Constants

                internal static readonly string DEFAULTVALUE_CUSTOMPROP = "CustomValue";

                #endregion Constants

                #region Base Class Overrides

                #region GetObjectData

                /// <summary>
                /// Called from our base class when ISerializable.GetObjectData is called.  Serialize all custom property data here.
                /// </summary>
                /// <param name="info"></param>
                /// <param name="context"></param>
                [SecurityPermissionAttribute(SecurityAction.Demand, SerializationFormatter = true)]
                protected override void GetObjectData(SerializationInfo info, StreamingContext context)
                {
                    // Call the base implementation
                    base.GetObjectData(info, context);

                    // Serialize our CustomProp property if necessary.
                    //if (this.ShouldSerializeCustomProp())
                    //    Utils.SerializeProperty(info, "CustomProp", this.CustomProp);
                }

                #endregion GetObjectData

                //#region ISerializable Members

                //public void GetObjectData(SerializationInfo info, StreamingContext context)
                //{
                //    // Call the base implementation
                //    base.GetObjectData(info, context);

                //    // Serialize our CustomProp property if necessary.
                //    if (this.ShouldSerializeCustomProp())
                //        Utils.SerializeProperty(info, "CustomProp", this.CustomProp);
                //}

                //#endregion

                #region Initialize

                /// <summary>
                /// Internal inherited method for initializing the tool when de-serialization completes.
                /// Automatically called by toolbars manager.
                /// </summary>
                protected override void Initialize(ToolsCollectionBase parentCollection)
                {
                    // Let the base do its processing.
                    base.Initialize(parentCollection);

                    // Use the temporary member variable to set the actual ExtraSharedProps properties.
                    // We need to wait until after deserialization is totally complete to ensure that
                    // our ExtraSharedProps object is properly setup.
                    //if (this.serializedProps != null)
                    //{
                    //    this.ExtraSharedProps.customProp = this.serializedProps.customProp;

                    //    this.serializedProps = null;
                    //}

                }

                #endregion Initialize

                #region Clone
                /// <summary>
                /// Returns a cloned copy of the tool.
                /// </summary>
                /// <param name="cloneNewInstance">If true, returns a clone of the tool that can serve as an instance of the tool, sharing the same SharedProps object.  If false, returns a tool that can be used as a new tool, with a clone of the original SharedProps object.</param>
                /// <returns></returns>
                protected override Infragistics.Win.UltraWinToolbars.ToolBase Clone(bool cloneNewInstance)
                {
                    GridInternal tool = new GridInternal(this.Key);
                    tool.InitializeFrom(this, cloneNewInstance);
                    return tool;
                }
                #endregion //Clone

                #endregion Base Class Overrides

                #region CustomProp

                /// <summary>
                /// This is a custom property in a custom tool.
                /// </summary>
                //public string CustomProp
                //{
                //    // Delegate the get/sets for the property to our ExtraSharedProps object

                //    get { return this.ExtraSharedProps.CustomProp; }
                //    set { this.ExtraSharedProps.CustomProp = value; }
                //}

                /// <summary>
                /// Returns a Boolean value that determines whether the CustomProp property is set to its default value.
                /// Checked during serialization to determine if the property should be serialized.
                /// </summary>
                internal protected virtual bool ShouldSerializeCustomProp()
                {
                    // We only want to serialize the property if this tool is the Root tool and the 
                    // property is not set to its default value.
                    return (this.IsRootTool);
                }

                #endregion CustomProp

                protected override Type GetToolbarUIElementType()
                {
                    return typeof(UltraGrid);
                }

                           AccessibleRole rl = AccessibleRole.Pane;
                UIRole roleOnMenus ;
                UIRole roleOnRibbonGroups ;
                UIRole roleOnToolbars;

                protected override AccessibleRole DefaultAccessibleRole
                {
                    get { return this.rl; }
                }

                protected override string DefaultAction
                {
                    get { return "Get"; }
                }

                public override Infragistics.Win.AppStyling.UIRole UIRoleOnMenus
                {
                    get { return this.roleOnMenus; }
                }

                public override Infragistics.Win.AppStyling.UIRole UIRoleOnRibbonGroups
                {
                    get { return this.roleOnRibbonGroups; }
                }

                public override Infragistics.Win.AppStyling.UIRole UIRoleOnToolbars
                {
                    get {return this.roleOnToolbars; }
                }
            }

            private void DrawFilter(UltraToolbarsManager tbm)
            {
                GridInternal gdInternal = new GridInternal("gridInternal");
                DataTable dt = new DataTable();
                dt.Columns.Add("Column1");
                dt.Rows.Add(new object[] { "MyRow"});
                gdInternal.uGrid.DataSource = dt;
                gdInternal.SharedProps.Caption = "FilterGrid";

                Infragistics.Win.UltraWinToolbars.StateButtonTool stb = new StateButtonTool("isEnabled");
                stb.SharedProps.DisplayStyle = ToolDisplayStyle.ImageAndText;
                stb.SharedProps.CustomizerCaption = "Enable";
                stb.SharedProps.Caption = "Enable";

                Infragistics.Win.UltraWinToolbars.LabelTool lb = new LabelTool("FilterStatus");
                lb.SharedProps.Caption = "FilterStatus";

                Infragistics.Win.UltraWinToolbars.StateButtonTool filterstb = new StateButtonTool("Applied");
                filterstb.SharedProps.DisplayStyle = ToolDisplayStyle.ImageOnlyOnToolbars;
                filterstb.SharedProps.CustomizerCaption = "Applied";
                filterstb.SharedProps.Caption = "Applied";

                Infragistics.Win.UltraWinToolbars.LabelTool lb1 = new LabelTool("SetFilterType");
                lb1.SharedProps.Caption = "SetFilterType";

                Infragistics.Win.UltraWinToolbars.ComboBoxTool cbTool = new ComboBoxTool("FilterList");
                cbTool.SharedProps.Caption = "FilterType";
                cbTool.DropDownStyle = Infragistics.Win.DropDownStyle.DropDownList;
                Infragistics.Win.ValueList vl = new Infragistics.Win.ValueList();

                cbTool.ValueList.ValueListItems.Add("Select");
                cbTool.ValueList.ValueListItems.Add("List1");
                cbTool.ValueList.ValueListItems.Add("List2");
                cbTool.ValueList.ValueListItems.Add("List3");
                cbTool.ValueList.ValueListItems.Add("List4");
                cbTool.SelectedIndex = 0;
                Infragistics.Win.UltraWinToolbars.ButtonTool btReset = new ButtonTool("Reset");
                btReset.SharedProps.DisplayStyle = ToolDisplayStyle.ImageAndText;
                btReset.SharedProps.Caption = "ResetFilters";

                tbm.Tools.AddRange(new ToolBase[] { stb, lb, filterstb, lb1, cbTool, btReset, gdInternal });

                UltraToolbar tb = new UltraToolbar("Filter");
                tbm.Toolbars.AddToolbar("Filter").Tools.AddToolRange(new String[] { "isEnabled", "FilterStatus", "Applied", "SetFilterType", "FilterList", "Reset", "gridInternal" });
               // tb.Tools.AddTool("isEnabled");

            }

            public FilterGrid(UltraToolbarsManager tbm):this()
            {
                DrawFilter(tbm);
            }

        }
    } 
```

**Main.cs**主窗体

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Text;
    using System.Windows.Forms;

    namespace WindowsApplication1
    {
        public partial class Main : Form
        {
            public Main()
            {
                InitializeComponent();
                FilterGrid fg = new FilterGrid(ultraToolbarsManager1);
            }
        }
    } 
```

**编辑**
如果可能的话，我想从 Toolbase 派生一个控件并将其显示在 UltraToolbar 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:23:05.200

现在我知道了如何做到这一点。
我创建了一个 controlContainerTool 实例并将我的 ultragrid 分配给它。
controlContainerTool 也被添加到 UltraToolbarsManager 和工具栏实例中。
外观可以在设计时从代码中设置。

一件最重要的事情是处理网格中的滚动条，如果它比预期的大。

# cakephp - CakePHP - 查看模板 - 获取内容的默认值？

> ID：12370833
> 
> 赞同：0
> 
> 时间：2012-09-11T13:28:07.890
> 
> 标签：cakephp, default-value, view-templates

这是书中的示例，一个简单的视图模板

```
// app/View/Common/view.ctp 
<h1><?php echo $this->fetch('title'); ?></h1> 
<?php echo $this->fetch('content'); ?>

<div class="actions">
    <h3>Related actions</h3>
    <ul>
    <?php echo $this->fetch('sidebar'); ?>
    </ul> </div> 
```

这就是它可以扩展的方式

```
// app/View/Posts/view.ctp
<?php
$this->extend('/Common/view');

$this->assign('title', $post); 
```

我的问题是： *如何为（比如说）**标题**设置默认值/内容，以便在需要时覆盖？*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:11:53.550

获取变量。如果它不为空，则回显它，否则回显默认值。

```
$title = $this->fetch('title');
echo !empty($title) ? $title : 'Default'; 
```

# javascript - rails - 如何升级我的 jquery，我在 app/assets 中看不到它，但它在 application.js 中被引用？

> ID：12370836
> 
> 赞同：1
> 
> 时间：2012-09-11T13:28:24.730
> 
> 标签：javascript, ruby-on-rails, ruby, jquery-ui, assets

由于这个错误：[http ://bugs.jquery.com/ticket/11921](http://bugs.jquery.com/ticket/11921)

我需要升级我的 jquery-ui

当我查看 app/assets/javascripts 的开发时，我看到：

但没有 jquery-ui

没有任何公开内容，因为我们不编译开发中的资产。

`app/assets/javascripts/application.js`有这个：

```
//= require jquery
//= require jquery_ujs
// Comment about stuff
//= require jquery-ui
//= require LISA
//= require jquery.rest
//= require jquery.autoSuggest.packed 
```

Ruby `1.9.3-p194`, `rails 3.2.8`(从 升级`rails 3.2.6`)

![在此处输入图像描述](../Images/b0289295addf068f88965464c14e7aec.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:31:33.273

你也检查`lib/assets/javascripts`了`vendor/assets/javascripts`吗？

真的，它应该在`vendor`文件夹中。它是一个“供应商”的 jQuery 插件，因为它是由第 3 方创作的。

此外，正如@Amar 在他的评论中提到的，它也可以通过 gem 安装。

# iphone - 如何填充两个 UIBezierPaths 之间的空间

> ID：12370841
> 
> 赞同：0
> 
> 时间：2012-09-11T13:28:46.853
> 
> 标签：iphone, ios, ipad, core-graphics, uibezierpath

我正在开发绘图应用程序，它提供具有可变线宽的绘图线，这取决于绘图速度。这种行为受到 Paper 应用程序的启发。

我正在尝试实现的算法 - 绘制两条贝塞尔路径，它们之间的距离可变。[sosborn 的回答](https://stackoverflow.com/questions/7616861/how-to-draw-variable-width-uibezierpath)中描述的解决方案。然后平滑路径并填充它们之间的距离。

实际上我不知道如何填充路径之间的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:11:07.233

您从 2 条贝塞尔曲线创建一条路径并填充它，如下所示：

```
NSBezierPath* path = [NSBezierPath bezierPath];

// Move to the start point
[path moveToPoint:startPt];

// Make the lower part of the curve
[path curveToPoint:endPt controlPoint1:cp1 controlPoint2:cp2];

// Make the upper part of the curve as part of the same path:
[path curveToPoint:startPt contorPoint1:cp3 controlPoint2:cp4];

// Now fill it
[path fill]; 
```

# magento - Magento Sagepay iFrame 为空

> ID：12370845
> 
> 赞同：0
> 
> 时间：2012-09-11T13:28:59.513
> 
> 标签：magento, opayo

我有一个基于 magento 的网站。我将 magento 更新到 1.7.0.2 并且 Sagepay 扩展停止工作。表单（您可以在其中放置卡片详细信息）应该显示在 iframe 中，但现在它是空的。我将 sagepay 更新到最新版本，我在管理页面上检查了所有配置。有人知道出了什么问题吗？谢谢

# c++ - 我是否正确使用 delete[] 运算符？

> ID：12370846
> 
> 赞同：1
> 
> 时间：2012-09-11T13:29:03.620
> 
> 标签：c++, memory-management, free

这是我的代码：

```
linearMatrix lAmatrixmatrixmult(const linearMatrix &A,
                             const linearMatrix &B)
{
    //Local variables
    int W_A = A.Get_Width;
    int H_A = A.Get_Height;

    int H_B = B.Get_Height;
    int W_B = B.Get_Width;

    float *vectorA;
    float *vectorB;
    float *vectorC;
    //================

    //Memory allocation
    try{
        vectorA = new float[W_A * H_A];
    }
    catch(bad_alloc &ex)
    {
        cerr << "Exception:" << ex.what();
        exit(1);
    }

    try{
        vectorB = new float[W_B * H_B];
    }
    catch(bad_alloc &ex)
    {
        cerr << "Exception:" << ex.what();
        exit(1);
    }

    try{
        vectorC = new float[W_A * H_B];
    }
    catch(bad_alloc &ex)
    {
        cerr << "Exception:" << ex.what();
        exit(1);
    }
    //=================

    //Initialization
    vectorA = A.Get_Vector;
    vectorB = B.Get_Vector;
    //==============

    if(W_A == H_B)
    {
        linearMatrix C(W_A, H_B);

        for(int i = 0; i < W_A; i++)
        {
            for(int j = 0; j < W_B; j++)
            {
                float sum = 0;
                for(int k = 0; k < W_A; k++)
                {
                    float a = vectorA[i * W_A + k];
                    float b = vectorB[k * H_B + j];
                    sum += a * b;
                }
            vectorC[i * W_A + j] = sum;
            }
        }
        C.Set_Vector(vectorC, W_A, H_B);

        //Free memory
        delete [] vectorA;
        delete [] vectorB;
        delete [] vectorC;
        //===========

        return C;
    }
    else
    {
        cout << "Different sizes! Cannot perform mmmult" << endl;

        //Free memory
        delete [] vectorA;
        delete [] vectorB;
        delete [] vectorC;
        //===========

        exit(1);
    }
} 
```

而且`~linearMatrix`是：

```
//Destructor definition
linearMatrix::~linearMatrix()
{
    delete [] myVector;
} 
```

在哪里`linearMatrix`：

```
class linearMatrix
{
public:
    //Constructor
    linearMatrix(const int Width, const int Heigth);

    //Copy constructor
    linearMatrix(const linearMatrix &that);

    //Copy assignment operator
    linearMatrix& operator=(const linearMatrix& that);

    //Destroyer
    ~linearMatrix();

    //We read a matrix file
    void Read_File_Matrix(const char *Path);

    //We write a matrix file
    void Write_File_Matrix(const char *Path);

    //Generate a diagonal dominant matrix
    void Generate_Diagonal_Dominant(void);

    //Generate a random matrix
    void Generate_Random_Matrix(void);

    //Set a float *vector
    void Set_Vector(const float *V, const int Width, const int Heigth);

    //Show a little vector
    void Show_Little_Matrix(void);

    //Get the vector
    //Suppose V is previously allocated
    float *Get_Vector(void);

    //Get total number of elements
    int Get_NumberofElements(void);

    //Get Width
    int Get_Width(void);

    //Get Height
    int Get_Height(void);

private:
    int myWidth, myHeight; // Width and Height
    float* myVector;

    //Aux function for testing
    bool Test_Sizes(const int Width, const int Heigth);
}; 
```

如果我在函数中使用`new`运算符，我必须在离开函数之前释放内存吗？`exit()`我应该在任何呼叫之前释放内存吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:36:33.163

不，这是不正确的：

```
vectorA = new float[W_A * H_A]; // allocates memory
vectorA = A.Get_Vector();       // allocated memory is leaked
                                // vectorA now points to memory owned by A
delete [] vectorA;              // delete memory owned by A 
```

当然，在 C++ 中，您通常只使用`std::vector<float>`.

# javascript - 使用“var that = this”理解 Javascript 范围

> ID：12370851
> 
> 赞同：9
> 
> 时间：2012-09-11T13:29:20.890
> 
> 标签：javascript

假设我在一个对象中有以下属性方法：

```
 onReady: function FlashUpload_onReady()
  {
     Alfresco.util.Ajax.jsonGet({
       url: Alfresco.constants.PROXY_URI + "org/app/classification",
       successCallback: {
         fn: function (o) {
           var classButtonMenu = [],
               menuLabel, that = this;

           var selectButtonClick = function (p_sType, p_aArgs, p_oItem) {
               var sText = p_oItem.cfg.getProperty("text");
               that.classificationSelectButton.set("label", sText);
           };

           for (var i in o.json.items) {
             classButtonMenu.push({
               text: o.json.items[i].classification,
               value: o.json.items[i].filename,
               onClick: {fn: selectButtonClick}
             });
           }

           this.classificationSelectButton = new YAHOO.widget.Button({
             id: this.id + "-appClassification",
             type: "menu",
             label: classButtonMenu[0].text,
             name: "appClassification",
             menu: classButtonMenu,
             container: this.id + "-appClassificationSection-div"
           });
         },
         scope: this
       },
       failureMessage: "Failed to retrieve classifications!"
     }); 
```

我花了一些猜测工作来弄清楚在`selectButtonClick`我需要引用`that`而不是`this`为了获得访问权限的函数中`this.classificationSelectButton`（否则它会出现`undefined`），但我不确定为什么我不能使用`this`. `new YAHOO.widget.Button`我最好的猜测是，一旦调用构造函数，整个对象中被引用的任何属性都会以某种方式失去作用域。

有人可以解释为什么我必须引用`classificationSelectButton`而`var that = this`不是仅仅调用“this.classificationSelectButton”吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-11T13:42:18.397

要理解的最重要的事情是函数对象**没有固定`this`值**——值的`this`变化取决于函数的调用方式。我们说一个函数是*用某个特定的`this`值*调用的——该`this`值是在调用时确定的，而不是在定义时确定的。

*   如果函数被称为“原始”函数（例如，只是 do `someFunc()`），`this`将是全局对象（`window`在浏览器中）（或者`undefined`如果函数在严格模式下运行）。
*   如果它作为对象上的方法被调用，`this`则将是调用对象。
*   如果使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)or调用函数[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，`this`则将其指定为`call`or的第一个参数`apply`。
*   如果它被称为事件侦听器（就像这里一样），`this`它将是作为事件目标的元素。
*   如果它作为构造函数调用`new`,`this`将是一个新创建的对象，其原型设置为`prototype`构造函数的属性。
*   如果函数是[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)操作的结果，则该函数将始终设置为产生它`this`的调用的第一个参数。`bind`（这是“函数没有固定`this`”规则的唯一例外——由`bind`实际生成的函数*确实*有一个不可变的`this`.）

Using`var that = this;`是一种`this`在函数*定义时*存储值的方法（而不是函数*执行时间*，什么时候`this`可以是任何东西，取决于函数的调用方式）。这里的解决方案是将 的外部值存储`this`在一个变量（传统上称为`that`or `self`）中，该变量包含在新定义的函数的范围内，因为新定义的函数可以访问在其外部范围内定义的变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T13:32:55.080

因为`this`根据它运行的上下文改变它的值。

在您的`selectButtonClick`函数内部，`this`将引用该函数的上下文，而不是外部上下文。所以你需要`this`在外部上下文中给出一个不同的名称，它可以在`selectButtonClick`函数内部引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T13:47:41.593

有词法范围：在函数中声明的变量和传递给函数的参数仅在函数内部（以及在其内部函数中）可见。

```
var x = 1; // `1` is now known as `x`
var that = this; // the current meaning of `this` is captured in `that` 
```

词法作用域的规则非常直观。您明确分配变量。

然后是动态范围：`this`. 这是一个神奇的东西，它会根据你调用函数的方式改变它的含义。它也称为*上下文*。有几种方法可以为其赋予含义。

考虑一个函数：

```
function print() { console.log(this); } 
```

**首先**，默认上下文是`undefined`严格[模式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)，全局对象是普通模式：

```
print(); // Window 
```

**其次**，您可以将其设为方法并使用对对象的引用、后跟*点*和对函数的引用来调用它：

```
var obj = {};
obj.printMethod = print;
obj.printMethod(); // Object 
```

请注意，如果您调用不带点的方法，则上下文将回退到默认值：

```
var printMethod = obj.printMethod;
printMethod(); // Window 
```

**最后**，有一种分配上下文的方法是使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)/`apply`或`bind`：

```
print.call(obj, 1, 2); // Object
print.apply(obj, [ 1, 2 ]); // Object

var boundPrint = print.bind(obj);
boundPrint(); // Object 
```

为了更好地理解上下文，您可能需要尝试使用这些简单的示例。John Resig 有[非常好的](http://ejohn.org/apps/learn/#22)关于 JavaScript 上下文的交互式幻灯片，您可以在其中学习和测试自己。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:34:09.437

将它存储在变量中可以让您在`this`可能引用其他内容的其他范围内访问它。

请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)、[http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)和[JavaScript 中变量的范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)有关`this` 关键字的更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T13:36:11.100

当从 DOM 事件调用类的方法时，该`this`引用不起作用。例如，当对象的方法用作 onclick 的事件处理程序时，`this`指针指向事件发生的 DOM 节点。所以你必须`this`在对象中创建一个私有备份。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T13:44:33.967

**this**是 javascript 中的关键字，而不是每个函数中定义的默认变量，因此，正如 Gareth 所说，**this**将引用调用函数的上下文，或者如果没有上下文，则引用全局对象。

# tfs - tfs2012：具有树继任者/前任者类型的工作项树

> ID：12370852
> 
> 赞同：6
> 
> 时间：2012-09-11T13:29:22.453
> 
> 标签：tfs, alm

我需要构建查询，返回具有超过 2 级深度的网络拓扑的结果。例如，我不会得到下一个结果：

![在此处输入图像描述](../Images/4fd19a9ec27e4777fcf0168dc5629ad5.png)

但是如果我构建“工作项和直接链接”查询，我只会得到 1 级深度，如果我构建“工作项树”，我可以选择仅父/子类型的树，并且无法添加我的自定义继任者/前任类型树的。

所以我的直接问题是：我可以在工作项和直接链接查询中获得超过一级的深度，还是在“工作项树”查询中更改树的类型？或者我只能通过像[这样](http://msdn.microsoft.com/en-us/vs2010trainingcourse_planningyourprojects_topic4.aspx)将 TFS 与 Project Server 集成来获得该结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:10:14.803

有两种方法可以做您所说的事情，这取决于您是要创建报告还是在谈论工作分解结构。

如果您需要工作分解结构，我建议您更改流程以便您不需要，或者仅在 PMO 级别进行处理。在低于投资组合的任何地方将依赖项写入工具中，这向我表明，您可能正在创建效果解决方案，而不是找到您的文化中所包含的特定功能障碍的路径原因。[preachMode=false] 但是......

**#1 - 报告**

您可以创建一个报告服务报告，该报告显示来自数据仓库和多维数据集的数据，以创建所需的视图。

*   [为 Visual Studio ALM 创建和管理 Reporting Services 报告](http://msdn.microsoft.com/en-us/library/ee921483.aspx)

这将为您提供数据的只读视图，并将导致侵入性最小的功能障碍。

**#2 - 微软项目**

您可以使用 MS Project 加载父/子和网络项，并使用存储在 TFS 中的依赖项维护甘特图。

*   我找不到好的链接，但 MSDN 上有文档

这将为您提供操作存储中数据的交互式视图，但会导致最具侵入性的功能障碍。

**#3 - 项目服务器**

如果您正在实施更类似于[Scaled Agile Framework](http://scaledagileframework.com/)的东西，那么您可能希望利用 Project Server 集成的挣值管理以及一些投资组合管理功能。

*   [启用 Team Foundation Server 和 Microsoft Project Server 之间的数据流](http://msdn.microsoft.com/en-us/library/gg455680.aspx)

我希望您能找到适合的东西，并且您有机会探索当前流程对您的团队和组织[在现代应用程序生命周期的新常态中](http://blog.hinshelwood.com/the-new-normal-of-the-modern-application-lifecycle/)实现任何类型的敏捷性的能力的影响。

# css - CSS - 调整浏览器大小时，TD周围的底部边框被切断

> ID：12370853
> 
> 赞同：0
> 
> 时间：2012-09-11T13:29:22.523
> 
> 标签：css, border, html-table

我有一个使用引导程序使其对移动设备友好的网络应用程序。为了在视觉上将 3 个项目组合在一起，我创建了一个类，在这三个项目出现的表格单元格周围放置一个框/边框。（三项分别为link4、5、5）

这是课程：

```
 td.lights
 {
   border: 2px solid black;
 } 
```

这是有问题的 HTML - 我已经将它配对到最少的代码，仅用于演示目的。我注意到的是，当我模拟移动设备（使用 Firefox 的响应式设计视图工具）时，

```
 <table>
          <tbody>
                  <tr>  

                  <td>link1</td>        
                  <td>link2</td>    
                  <td>link3</td>    
                  <td>&nbsp;</td>
                  <td class="lights">link4&nbsp;/&nbsp;link5&nbsp;/&nbsp;link6</td>

              </p>
          </tbody>
          </table> 
```

在这个表之后，我有这个代码来创建另一个表：

```
 <P>
            <table class="table table-bordered table-striped">
            <thead>
                                etc...
                            </thead>
                            </table> 
```

当我调整浏览器的大小时，表 1 底部的边框会被截断，具体取决于浏览器大小的大小。其他字段看起来不错，但话又说回来，它们周围没有边框。对我来说，我的文本（“link4 / link5 / link6”）上方和下方似乎有一组固定的空间，不会动态变化。我尝试向我的 td 添加一个高度“动态”高度属性，如下所示：

```
 td.lights
 {
   border: 2px solid black;
   height: 1em;
 } 
```

但这并没有解决我的问题。
有什么建议么？请和谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:42:33.297

据我所知，您的标记中有很多错误：

```
</p> 
```

应该：

```
</tr> 
```

另外，如果您有：

```
<P> 
```

在你的第二张桌子之前？我会避免用 P 标签包装你的表格，因为这会添加不需要的填充，并且从语义的角度来看没有意义。

先解决这些问题，看看会发生什么。其次，我建议 - 在处理表格时 - 使用以下内容：

```
<table cellpadding="0" cellspacing="0" border="0"> 
```

您也可以在 CSS 中执行以下操作：

```
table, tr, td { margin: 0; padding: 0; border: 0; } 
```

这应该确保您的单元格内部和周围没有不需要的填充。

# c# - 通过本地 smtp 服务发送电子邮件

> ID：12370864
> 
> 赞同：3
> 
> 时间：2012-09-11T13:29:48.117
> 
> 标签：c#, email, smtp

我正在尝试发送非常大的电子邮件，通常在 3 MB 范围内，但可以更大。问题是我们的 adsl 线路在性能方面并不总是很稳定，而且我们的电子邮件托管从本地解决方案更改为远程解决方案。这意味着通过使用正常的 C# 发送方法，我不断达到超时到达异常。而且我不想只是增加超时。要成功上传 3Mb 的电子邮件，我需要 400 秒的超时时间。

[现在按照此处](https://stackoverflow.com/questions/12354064/c-sharp-smtp-asyncsend-not-sending)的答案， 我可以通过本地 smtp 服务获取要发送的电子邮件，但前提是我不附加附件。如果附件在 3Mb 范围内，则它会彻底失败。如果它很小，当我尝试用 Outlook 拉下电子邮件时它会失败。

我确实从 smtp 服务中删除了最大文件附件大小。任何其他设置或者我可能弄错了吗？

如果它有助于运行的电脑是 smtp 服务，那么它就是在运行 win 7 的电脑上运行 win 2008 的虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:16:02.657

如果它只是关于传输数据而电子邮件只是媒介，为什么不放弃整个电子邮件解决方案，并在远程连接上托管一个 web 服务，它可以接受块并在收到所有块后组装文件？或者更简单，正如 Phill 建议的那样，使用 FTP 或已经具备恢复上传功能的东西？- 问题不在于您的系统，我认为您不会找到任何解决此问题的电子邮件配置。您的连接似乎与 90 年代的互联网一样快（且稳定）。从那时起传输大量数据的解决方案可能是解决您的问题的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:34:26.093

我使用 SendAsync 修复了它，并按如下方式使用它

我把我所有的电子邮件都放在了一个 Fifo 列表中。添加新电子邮件后，我删除了一封并尝试发送。这是我的发送功能

```
public void Sender()
    {
        if (Globalcls.Message_list.Count == 0)
            return;
        SmtpClient client = new SmtpClient();
        client.Credentials = new System.Net.NetworkCredential(Globalcls.settings.username, Globalcls.settings.password);
        client.Port = Convert.ToInt32(Globalcls.settings.portS);

        client.Host = "smtp.xdsl.co.za";

        client.SendCompleted += new SendCompletedEventHandler(MailSendCallback);

        if (Globalcls.Message_list.Count > 0)
        {
            try
            {
                client.SendAsync(Globalcls.Message_list[0].msg, "1");

            }
            catch (Exception ex)
            {
                //do exception stuff here, only cut here to make post shorter
            }
        }

 static void MailSendCallback(object sender, AsyncCompletedEventArgs arg)
    {
        // oncomllete event for async send.
        if (arg.Error != null)
        {
            //mail did not send, here I do not remove it and increment an counter so  to delete a mail that keeps failing
        }
        else
        {

            Form1 frm1 = new Form1(); 
            frm1.que("email sent to " + Globalcls.projects[Globalcls.Message_list[0].project].name);
            frm1.Dispose();
            Globalcls.Message_list[0].msg.Dispose();
            foreach (string meh in Globalcls.Message_list[0].files)
                File.Delete(meh);
            Globalcls.Message_list.RemoveAt(0);
        }
        if (Globalcls.Message_list.Count > 0)
        {
            Form1 frm2 = new Form1();
            frm2.Sender();
            frm2.Dispose();
    } 
```

# c++ - Define struct array in function

> ID：12370872
> 
> 赞同：2
> 
> 时间：2012-09-11T13:30:07.563
> 
> 标签：c++, visual-c++

The code:

```
int i;
struct st
{
    int m;
}st_t[2];

void foo()
{
    i = 4;
    st_t[2] = 
    {
       {10},{20}
    };  // it's wrong !!!!  but I don't know how to do.     
}
int main()
{
   foo();
   cout<<i<<endl;          // will output 4;
   cout<<st_t[0].m<<endl;  // this should output 10
   cout<<st_t[1].m<<endl;  // this should output 20

   return 0;
} 
```

Is it possible to define a struct array in a function? If it is, then how to do this? Thanks in advance.

PS:
Sorry my English is not good. I am making a Tetris game, it have a Shape class, I declared a shape struct array in Shape.h, then I assign to the struct array in Shape constructor function in Shape.cpp. Is it right? or how to assign to the struct array so I can use it in another function?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:35:36.140

You can *initialize* an array in the place where it's defined. I.e. either move the definition into the function, or move the initialization out of the function:

```
struct st 
{ 
    int m; 
} 
st_t[2] = {{10},{20}}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:39:14.270

If you want to define an array in the function (as your question title and text implies), then add the type specifier `st` to the definition:

```
st st_t[2] = 
{
   {10},{20}
}; 
```

However, this will be a separate array to the global one, and so the output from `main()` won't match what your comments say should happen. If you actually want to assign to the global array, then:

```
st_t[0].m = 10;
st_t[1].m = 20; 
```

or, in C++11, you can use similar syntax to your example if you replace the plain array with `std::array`:

```
std::array<st, 2> st_t;

void foo() {
    // Note the extra braces - std::array is an aggregate containing an array
    st_t = 
    {{
        {10},{20}
    }};
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:58:36.020

If you only want the variable at function scope then

```
void foo() {
    struct {
        int m;
    } st_t = { {10}, {20} };
    // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:06:38.147

Instead of the direct assignment of values, you can initialize a temporary variable and copy this variable to your global variable:

Delete:

```
 ...
 st_t[2] =  {
      {10},{20}
 };
 ... 
```

and add:

```
 ...
 st tmp[2] = { {10}, {20} };  

 memcpy(st_t, tmp, sizeof st_t);
 ... 
```

**Addendum:**

If it doesn't work for you, there might be another error in your code. From your example:

```
#include <iostream>
#include <memory.h>
using namespace std;

 int i;
 struct st { int m; } st_t[2];

 void foo()
{
 i = 4;
 st tmp[2] = { {10}, {20} }; 
 memcpy(st_t, tmp, sizeof st_t); // use: const_addr instead of &const_addr
}

 int main()
{
 foo();
 cout << i << endl;          // will output 4;
 cout << st_t[0].m << endl;  // this should output 10
 cout << st_t[1].m << endl;  // this should output 20
 return 0;
} 
```

all works fine as expected.

# android - Android：将 HashMap 传递给另一个 Activity -> 创建一个 Parceable 对象？

> ID：12370887
> 
> 赞同：1
> 
> 时间：2012-09-11T13:30:57.157
> 
> 标签：android, android-intent, android-activity, parcelable

我有一个 HashMap 我会传递给另一个 Activity 类。我只是使用这段代码：

```
HashMap<String, String> mKeyValues = new HashMap<String, String>();
// add some data to hash map
Intent intent = new Intent(MainActivity.this, SubActivity.class);
intent.putExtra(EXTRA_ENTRIES, mKeyValues); 
```

这是可能的，因为 HashMap 已经实现了 Serializeable 接口。

现在的问题是这对于具有 100 个元素的 HashMap 是否足够快，或者我是否应该更好地创建一个实现 Parcelable 接口的数据类（因为 Parcelable 更快？更快）？

在性能和其他方面应该使用 Parceable 接口时是否有指导方针？

我没有发现任何东西可以将实现 Serializeable 的对象和实现 Parceable 的对象传递给另一个 Activity 的持续时间进行比较。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:43:33.920

使用 HashMap 非常简单，继续使用它；）

# c# - Windows 7 风格的 TreeView

> ID：12370891
> 
> 赞同：1
> 
> 时间：2012-09-11T13:31:12.297
> 
> 标签：c#, winforms, treeview

> **可能重复：**
> [如何让 Windows 原生查找 .NET TreeView？](https://stackoverflow.com/questions/5131534/how-to-get-windows-native-look-for-the-net-treeview)
> [Windows 窗体中的 Windows 7 样式树视图](https://stackoverflow.com/questions/5408163/windows-7-style-treeview-in-windows-forms)

如何创建如下图所示的 TreeView？（渐变高亮和节点点）使用的技术：WinForms with C#2010 ![在此处输入图像描述](../Images/888c8074feb8a6c21005eef011a139be.png)

# android - 从 db 获取数据时出错

> ID：12370892
> 
> 赞同：0
> 
> 时间：2012-09-11T13:31:12.890
> 
> 标签：android

我正在尝试从我的数据库中获取数据。我已经使用了 50-60 种方法来对我的数据库进行操作，并且它们都运行良好。今天我创建了另一种方法......但它不起作用！Idk 也许是因为我使用了 2 次相同的光标.. Idk... 这是产生错误的代码：

```
public ArrayList<String> getValueFromTab(String tipoGrafico){

    SQLiteDatabase sqlDB = null;
    Cursor data = null;
    String ascissa=null;
    String tabella=null;
    ArrayList<String>dati=new ArrayList<String>();

    try {
        sqlDB = openDataBase(SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        data=sqlDB.rawQuery("SELECT TABELLA, ASCISSA FROM cpm_analysis WHERE CATEGORIA='"+tipoGrafico+"' AND ABILITATO <>'no'", null);

        if(data.getCount()==0){
            data=null;
        }else{
            while(data.moveToNext()){
                tabella=data.getString(0);
                ascissa=data.getString(1);
            }
            data=null;
        }
        data=sqlDB.rawQuery("SELECT DISTINCT"+ascissa+" FROM "+tabella+"", null);

        if(data.getCount()==0){
            data=null;
        }else{
            while(data.moveToNext()){
                dati.add(data.getString(1));
            }
            data=null;
        }
        return dati;

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {
        if (data != null)
            data.close();
        if (sqlDB != null)
            sqlDB.close();
    }

    return null;

} 
```

我在第一个 rawquery() 之后出现了异常。

这是另一种完美的方法：

```
 SQLiteDatabase sqlDB = null;
    Cursor data = null;

    try {
        sqlDB = openDataBase(SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        String[] posizioni=new String[]{"Grafici UL", "Grafici UR", "Grafici DL", "Grafici DR"};
        String[] categorie=new String[posizioni.length];
        String categorieTemp="";
        for(int i=0; i<posizioni.length; i++){
            data=sqlDB.rawQuery("SELECT CATEGORIA FROM cpm_analysis WHERE AREA_DISPLAY='"+posizioni[i]+"' AND ABILITATO <> 'no' ", null);
            if(data.getCount()==0){
                data=null;}

            else{   
            while(data.moveToNext()){
                categorieTemp=data.getString(0);
                categorie[i]=categorieTemp;
            }
            data=null;
            }
        }
        return categorie;
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {
        if (data != null)
            data.close();
        if (sqlDB != null)
            sqlDB.close();
    }

    return null;

} 
```

错误在哪里？对不起我的英语不好，提前谢谢

编辑

请帮助我>.<我要疯了...

重新编辑

好的，我解决了。我知道为什么，但我不能从一个活动中调用这个方法，所以我之前在活动中调用了它。它没有打开 db.. Idk 为什么@_@ 现在它可以工作了...... Ty :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:35:25.140

在 DISTINCT 和列名之间给出适当的空格。

```
 data=sqlDB.rawQuery("SELECT DISTINCT "+ascissa+" FROM "+tabella+"", null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:48:25.237

这同样适用于`data=sqlDB.rawQuery("SELECT TABELLA, ASCISSA FROM cpm_analysis WHERE CATEGORIA='"+tipoGrafico+"' AND ABILITATO <>'no'", null);`

这部分 `... AND ABILITATO <>'no'", null);` 在 <> 之后也没有适当的空间。

# xpath - 将 xpath 转换添加到根文档

> ID：12370894
> 
> 赞同：1
> 
> 时间：2012-09-11T13:31:16.243
> 
> 标签：xpath, xmlsec, xades4j

在 xades4j 中，如果有多个信封签名，我将在最后拥有更多*签名*元素的签名文档，但我需要告诉每个对签名文档（URI =“”）的引用，他不能引用其他*签名*代表其他签名的元素，我需要添加这个转换

```
<ds:Reference URI="">
    <ds:Transforms>
        <ds:Transform Algorithm="http://www.w3.org/2002/06/xmldsig-filter2">
            <dsig-xpath:XPath Filter="subtract">/descendant::ds:Signature</dsig-xpath:XPath>   
        </ds:Transform>
    </ds:Transforms> 
.... 
```

告诉它不能考虑 ds:Signature 元素来生成签名。xades4j 如何允许使用这种转换？

谢谢

米歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:45:26.813

您可以在定义`DataObjectReference`. 检查[wiki 页面](http://code.google.com/p/xades4j/wiki/DefiningSignedResources#Transforms)上的示例和[`XPath2FilterTransform`类文档](http://xades4j.googlecode.com/svn/release/1.3.0/javadoc/reference/xades4j/algorithms/XPath2FilterTransform.html)。

# monodevelop - 在 Monodevelop 中添加 GTK# VBox 作为现有 HBox 的父级

> ID：12370895
> 
> 赞同：1
> 
> 时间：2012-09-11T13:31:20.870
> 
> 标签：monodevelop, gtk#

我正在使用 Monodevelop 来构建 GUI。我已经有一堆小部件嵌套在 MainWindow 中的 HBox 中。但是，现在我发布我需要添加一个 VBox 来将菜单栏定位在顶部。我的问题是，如何在 MonoDevelop 中将 VBox 添加为现有 HBox 的父级？

只需将 VBox 拖到窗口上不会做任何事情，而且我找不到菜单选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:25:07.633

您可以通过在代码中创建 HBox（也可能是 VBox）来做到这一点，而不是在图形设计器中。

例如：

```
VBox vb = new VBox();   // Create a new VBox
vb.Visible = true;      // Make sure it is visible
base.Add (vb);          // Add the VBox to the base top window
base.Move (vb,0,0);     // Make sure the VBox is placed at top-left of the window

HBox hb = new HBox();   // Create a new HBox
hb.Visible = true;      // Make sure it is visible
vb.Add (hb);            // Add the HBox to the VBox (so VBox is the parent) 
```

如果 HBox 已经在图形设计器中创建并且您不希望以这种方式即时重新创建它，则相应地调整代码。例如，如果您已经存在的 HBox 名称是 hb，请执行以下操作：

```
VBox vb = new VBox();   // Create a new VBox
vb.Visible = true;      // Make sure it is visible
base.Add (vb);          // Add the VBox to the base top window
base.Move (vb,0,0);     // Make sure the VBox is placed at top-left of the window
vb.Add (hb);            // Add the HBox to the VBox (so VBox is the parent) 
```

当然，这意味着您还必须在代码中将所有菜单项添加到 VBox，但这很容易，遵循相同的规则。如果您不确定您可以使用哪些成员函数以及如何使用它，只需创建一个新项目，在设计器中设计菜单（使用 VBox）并保存。现在检查文件夹**gtk-gui**下的文件，与您的主代码文件（放置菜单的位置）同名的文件将包含您在原始项目中重新创建它所需的确切代码

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:33:36.993

您可以复制带有所有控件的托盘小部件，拖入一个新托盘并将它们粘贴回去。几天前，当我决定在自定义小部件中移动控件时，我不得不这样做。

或者您可以像其他答案一样对其进行编码，但我猜复制/粘贴更快。

# php - 在框架中打开 PDF 内联 - 如何设置文件名？

> ID：12370896
> 
> 赞同：0
> 
> 时间：2012-09-11T13:31:31.890
> 
> 标签：php, firefox, pdf

在 Firefox 内联的框架内渲染 PDF 时，文件名被忽略（在 PDF 打开后单击另存为，框架的名称显示在保存框中，而不是文件名）。我试过 header('Content-Disposition: inline; filename=abc.pdf'); - 它不起作用。相同的代码适用于附件，但不适用于内联。如何解决这个问题？

这是在 PHP、FF 15 和 Windows 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:34:41.163

将 PDF 嵌入框架或浏览器选项卡时无法设置文件名

*   你改变框架的标题
*   您制作另一个下载按钮，强制用户使用您的自定义名称下载

# spring - JSF 2.0 - Richfaces ViewExpiredException

> ID：12370904
> 
> 赞同：1
> 
> 时间：2012-09-11T13:31:48.530
> 
> 标签：spring, jakarta-ee, jsf-2, richfaces

有时，当我与richfaces 的某些组件交互时（例如：单击a4j:commandbutton），我会得到一个ViewExpiredException 类型的异常。如果我在 ajax 请求期间进行交互（例如：在屏幕加载时），**总是**会发生错误。

ps 1：服务器没有重启

PS 2：我使用的是 myfaces 2.1.8。

例外：

```
09:03:49,385 ERROR     [br.com.enterprise.enterprisex.faces.common.EnterpriseExceptionHandler]     EnterpriseExceptionHandler.handle: 
javax.faces.application.ViewExpiredException: /3_ProcessForm.jsfNo saved view state could be found for the view identifier: /3_ProcessForm.jsf
at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:132)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662) 
```

有人知道这个问题的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:22:13.753

我将 javax.faces.STATE_SAVING_METHOD 更改为客户端，在上述情况下不会发生此错误。谢谢。

# domain-driven-design - 可配置规则驱动系统中的 DDD

> ID：12370910
> 
> 赞同：9
> 
> 时间：2012-09-11T13:32:08.187
> 
> 标签：domain-driven-design, rules

请原谅这里的任何无知，我对 DDD 相当陌生，所以要温柔。

我正在开发一个大型配置驱动的数据管理系统。该系统是通过在外部语法中指定配置片段（如业务规则、流程和验证）来构建的。假设语法是基于 Groovy 的 DSL 和 Drools 的集合体。

我喜欢 DDD 提供的简单理念，特别是将基础设施问题与领域的核心概念分开。

但是，由于系统的可配置性，我很难应用 DDD 的一些概念。行为（流程）、验证和业务规则都是在系统外部定义的。因此，域中的实体本质上没有自己的行为。相反，他们对“验证器”或“规则引擎”或“工作流引擎”很敏感。

我将用一个例子来澄清。假设我的系统管理公司的员工。不用想太多，您会想象我的域中有一个员工实体和一个公司实体。

在 DDD 之后，我试图模拟一个员工升职的场景。您可能会在 Employee 上看到一个名为promote (Employee.promote) 的新方法。我们可以有一个业务规则，表明一个员工不能在同一年内晋升两次（是的，这都是编造的）。因此，我可以有类似的东西：

```
public void promote( EmployeeLevel newLevel ) {
  if ( hasBeenPromotedThisYear( this ) {
    throw new InvalidPromotionException 
```

好吧，在我正在使用此业务规则的应用程序中，将被外部化为规则引擎。在 DDD 之后，我可以执行以下操作：

```
if( promotionRules.isEligibleForPromotion(this) 
```

将我的规则外化。但是，该系统比这更通用。“提升”操作本身通过外部配置定义为“进程”。因此，在编译时，我什至不知道我是否有可供该员工使用的“提升”操作。因此，从代码的角度来看，我的员工对象变得非常简单，将所有功能委托给配置。它可能看起来像：

```
public class Employee {
  public void execute( Process process ) 
```

或者，

```
public class EmployeeProcess {
  public void process( Employee employee ) 
```

我的问题是：DDD 在这个应用程序中是否有意义？我是否应该只对非 DDD 意义上的流程、验证、业务规则（规则引擎）的协作进行建模？

我喜欢 Onion 架构，并且可以使用 UI -> App Services -> Core -> Infrastructure 来保持良好的关注点分离。但核心可能是上面提到的合作者，而不是真正的“领域概念”。

我的一部分认为，在这种情况下，“领域概念”是验证器、处理器、业务规则，因为它们构成了我们在讨论系统时所谈论的无处不在的语言。在这种情况下，我将拥有没有实际行为的实体（大部分情况下），以及实现系统行为的处理器、验证器、规则引擎方面的域概念。

添加更多信息。鉴于我上面的问题，我正在努力寻找一个看起来像这样的解决方案：

org.example.app

org.example.domain - 员工 - 公司 - EmployeeLevel

org.example.domain.shared - 流程 - BusinessRule - 验证器

org.example.infrastructure

希望这个小片段能增加一点清晰度。

因此，Process、BusinessRule 和 Validator 概念将位于域内，但会根据系统所做的事情来支持域模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:18:39.023

来自维基百科：

> 领域驱动设计 (DDD) 是一种通过将实现与**核心业务概念**的演进模型深度连接来为复杂需求开发软件的方法。

我相信验证器、流程、规则不是你的核心业务概念。这些是相当常见的软件抽象。

我不是“按部就班”的 DDD 的忠实拥护者，但为了更加“领域驱动”，您的 DSL 和您的规则实际上应该围绕您的业务概念构建，以便更有意义地理解这一点。

在底层，您仍然可以使用验证器、流程、管理器、执行器等，但是如果您在其中使用业务概念而不是软件抽象，那么您的 DSL/规则将更具可读性。

**更新**：由于您使用 Groovy 来定义您的 DSL，您可以使用 Groovy 的动态方法名称解析和构建器功能来创建可读的规则和类。您还可以利用“约定优于配置”原则来挂钩某些逻辑。例如，在 Groovy 中，您可以尝试构建类似于：

```
if (employee is "promotable") {
  start "promotion" for employee
} 
```

`is`将是基域对象上的一个方法，它将检查是否存在假设 EmployeePromotableValidator 类，它本身也可以是利用 Groovy 的 DSL 表达能力的 Groovy 类。

```
class EmployeePromotableValidator extends Validator<Employee> {

  boolean validate(Employee employee) {
    employee.age > 25 && employee.workingYears > 2
  }

} 
```

`start`将是您的基本规则脚本上的一个方法，它将搜索`EmployeePromotionProcess`类，这又可以是一个 Groovy 类。

这种情况下的规范模式非常简单，因为它基本上成为了语言的一部分：

```
if (employee is "promotable" && 
    employee is "advanced" && 
    employee.salary < 10000) {
  start( "salary increase", "10%" ) for employee
} 
```

一般来说，借助 Groovy/Scala 等（半）函数式语言的 DSL 可用于隐藏软件抽象并使您的业务逻辑在代码中更加突出。使用纯 Java，您最终会得到大量样板代码，这些代码最终会隐藏您的所有意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:12:31.517

这取决于您的业务领域到底是什么。

如果您正在构建大型的额外可配置 crm 某些构造函数执行所有应用程序 - 那么您的业务领域就是使这成为可能，因此像 等这样的名词`Process`是`Executors`您领域的一部分。

如果您正在构建应跟踪有关员工及其可推广性的信息的应用程序 - 那么您的业务领域就是员工、薪水、绩效评估。在这种情况下，将`Process`,`Executors`和类似的对象视为您域的入侵者。

在某种程度上 - 甚至编程语言本身也是一种侵入性工具，它模糊了您在脑海中绘制的问题的解决方案。但它是必要的——否则你将无法实现它。

# sql-server - SQL Server：生成连续数字

> ID：12370916
> 
> 赞同：0
> 
> 时间：2012-09-11T13:32:21.420
> 
> 标签：sql-server

有我的桌子：

```
ID  code(varchar)
1   006
2   008
3   005
4   010
5   002 
```

我创建了一个存储过程：

```
CREATE PROC pp
    @code VARCHAR(10),
    @new_code VARCHAR(10) OUTPUT
AS
BEGIN 
    SELECT TOP 1 @new_code = RIGHT(1000+code+1,3) 
    FROM tb AS a 
    WHERE [Code] >= @code
    AND NOT EXISTS (SELECT 1 FROM tb WHERE [Code]=RIGHT(1000+a.[Code]+1,3)) 
    ORDER BY RIGHT(1000+code+1,3)
END 
```

当我在下面调用这个存储过程时，结果是 011，它是正确的：

```
DECLARE @code VARCHAR(3)

EXEC pp '009', @code OUTPUT

SELECT @code 
```

当我调用下面的存储过程时，结果是011，所以结果是错误的。它应该是“004”。

```
DECLARE @code VARCHAR(3)

EXEC pp '003', @code OUTPUT

SELECT @code 
```

如何纠正这个？TKS！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:39:15.300

这可能与您选择前 1 个字段并按不是数字而是 varchar 的字段进行排序的事实有关，当您期望 order by 表现得像一个数字时。您是否尝试过将 [Code] 字段转换/转换为 int，然后按该值排序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:41:51.320

通过查看您的 sproc，您似乎只需将 @code 参数值增加 1。为此，您为什么要在 sproc 中进行所有这些计算。就像您从 tb 中选择并检查它是否有 > somevalue 和所有内容一样。

如果你只想增加价值，有很多更好更简单的方法。

# csrf - GET 链接的 CSRF 保护

> ID：12370919
> 
> 赞同：4
> 
> 时间：2012-09-11T13:32:27.440
> 
> 标签：csrf

我需要将 CSRF 保护添加到 Web 应用程序。

问题在于应用程序严重依赖链接（即 GET 请求）来对数据库进行更改。

链接是使用类生成的，因此我可以轻松地为每个链接添加一个用于 CSRF 令牌的额外参数。

但是，我知道 GET 请求中的 CSRF 令牌可能不是一个足够好的保护。

请注意，应用程序只能通过 HTTPS 使用，因此在客户端/服务器通信期间 GET 参数不能被暴露/窃取（但历史窃取问题仍然存在）。

在此设置中，GET CSRF 令牌参数是否可以被视为“足够安全”？

如果没有，解决此问题的最佳方法是什么？我想到的唯一一件事就是将我的每个链接包装成一个表单（显式以太，或使用 JavaScript 创建表单 onSubmit）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:30:31.893

为了能够读取对 CSRF 攻击请求的响应，攻击者需要让受害者执行他的 JavaScript 代码。因此，“GET”请求的 CSRF 几乎没有用处。这是假设您已遵循“GET”请求不应修改任何数据并且只需要使用“POST”来完成任何修改的标准

1.  使用基于 cookie 的身份验证和 SSL 应该让您远离试图更改参数的人
2.  您可能需要引入一些基于时间戳的签名以避免重放攻击

也就是说，如果你有任何 POST 请求，你应该考虑 CSRF 保护。

# git - EC2 无法通过 SSH 连接到 github

> ID：12370921
> 
> 赞同：3
> 
> 时间：2012-09-11T13:32:30.700
> 
> 标签：git, ssh, github, amazon-ec2

克隆到网站...权限被拒绝（公钥）。致命：远端意外挂断

即使我已经生成了一个 SSH 密钥并将 SSH 密钥添加到 Github 上允许的密钥中，也不断地在我的 EC2 实例上得到这个。

当我测试身份验证时，我得到了这个：

输入密钥“/home/ec2-user/.ssh/id_rsa”的密码：嗨，DaveHewy！您已成功通过身份验证，但 GitHub 不提供 shell 访问权限。

但是当我尝试克隆一个 repo 时，就没有这样的运气了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T00:25:12.897

您应该考虑使用代理转发，而不是处理多个密钥并将 ssh github 密钥保留在您的 EC2 实例上。这改变了我的部署方式。

[https://help.github.com/articles/using-ssh-agent-forwarding](https://help.github.com/articles/using-ssh-agent-forwarding)

使用代理转发，您实际上是在登录 EC2 实例时使用本地密钥。如果其他人登录到实例，如果他们无权访问它，他们将无法拉/推回购。

它简单、干净且安全。

您必须在远程主机上拥有 SSH 密钥的唯一充分理由是进行持续集成或自动化部署。在这种情况下，您应该使用部署密钥。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T13:39:59.690

切换到root用户

```
sudo su 
```

并使用 Github 提供的以下页面重新设置我的 SSH 密钥 - [https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

之后工作正常。

# python - Tkinter create_image 不显示

> ID：12370922
> 
> 赞同：1
> 
> 时间：2012-09-11T13:32:42.350
> 
> 标签：python, tkinter

我正在开发一个应用程序来显示图像网格，就像 iPhoto 或其他类似程序的主屏幕一样。为此，我设置了一个 Canvas，并遍历文件名列表，从每个文件名创建一个 PhotoImage，并将它们显示在画布上：

```
self.canvas = Canvas(self.bottomFrame, width = 700, height = 470, bg = "Red")
self.canvas.pack()

for i, filename in enumerate(image_list):
    photo_image = PhotoImage(filename)
    self.canvas.create_image(100*(round(i/4)+1), 100*(i+1), image = photo_image)
    self.labelList.append(photo_image) 
```

labelList 是 Application 类的一个属性，而 image_list 填充了 .gif 照片的文件名。但是，当我运行该应用程序时，没有图像显示。我知道画布在那里，因为出现了一个红色矩形，但上面没有图像。

我在这里错过了什么 - 我翻阅了无数页的讨论以寻找结果，但没有找到任何工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:45:47.400

```
photo_image = PhotoImage(filename) 
```

应该

```
photo_image = PhotoImage(file=filename) 
```

* * *

否则，您只需设置`name`，因为 的`__init__`功能`PhotoImage`如下所示：

```
__init__(self, name=None, cnf={}, master=None, **kw) 
```

* * *

另请注意，`PhotoImage`只能处理 GIF 和 PGM/PPM 文件。如果您想要其他文件类型，则必须使用 PIL（[示例](https://stackoverflow.com/questions/6413266/how-to-embed-an-image-in-a-text-widget)）。

# drupal-7 - drupal 7 访问回调函数

> ID：12370928
> 
> 赞同：0
> 
> 时间：2012-09-11T13:32:54.650
> 
> 标签：drupal-7, hook-menu

在 drupal 7 中，如果您与节点属于同一组，我会尝试授予使用节点的权限。

我想使用 hook_menu 并定义我的自定义访问检查功能。对于这个函数，我将 nid 作为参数发送。

这就是我现在得到的，我真的不明白为什么它不起作用：

```
function modulename_pdf_menu() {

    $items['pdf/node/%'] = array(
            'page callback' => '_modulename_pdf',
            'access callback' => '_modulename_pdf_access_check',
            'access arguments' => array(2),         
            'type' => MENU_CALLBACK
    );

    return $items;
}

function _modulename_pdf_access_check($nid) {
 echo $nid;
 die();
} 
```

我认为这应该将我的节点 ID 打印到屏幕上并停止。但它仍在运行_modulename_pdf 中定义的逻辑。知道我在这里缺少什么吗？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:54:49.687

你是对的，清除缓存并检查它。

# math - 逆数学方程

> ID：12370934
> 
> 赞同：-2
> 
> 时间：2012-09-11T13:33:13.353
> 
> 标签：math, equation

有谁知道当只知道 Y、Z 时如何反转这个等式？我想知道X是什么。

(X + Y) % 62 = Z

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:36:58.917

```
(X + Y) % 62 = Z 
```

表示对于任意整数 n，X+Y = 62*n + Z，如下

```
X = 62*n+Z-Y 
```

其中 n 可以是任何整数值，如果您需要单一解决方案，您可以选择任意一个，或者如果您对 X 值有任何额外限制，您需要找到满足它们的 X

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T13:37:15.420

```
X = Z - Y + 62*n 
```

其中 n 是任意整数。

# multithreading - 如何在 Perl 中创建线程？

> ID：12370935
> 
> 赞同：2
> 
> 时间：2012-09-11T13:33:13.073
> 
> 标签：multithreading, perl

我有简单的 Perl 脚本，其中有一个大循环，在其中我调用或多或少的百万次函数`my_fun()`。我想创建将处理它的线程池 - 同时最多 5 个线程将循环调用此方法。

使用最快的库对我来说真的很重要——看到例子真的很高兴。

我的代码如下所示：

```
for (my $i = 0; $i < 1000000 ; $i++) {
        my_fun();
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T13:55:16.813

看看[Parallel::ForkManager](https://metacpan.org/module/Parallel::ForkManager)。它使用的是`fork`，而不是线程，但它应该可以非常简单地完成您的工作。

示例从文档中提取并略有改动：

```
use Parallel::ForkManager;

my $pm = Parallel::ForkManager->new(5); # number of parallel processes

for my $i (0 .. 999999) {
  # Forks and returns the pid for the child:
  my $pid = $pm->start and next;

  #... do some work with $data in the child process ...
  my_fun();

  $pm->finish; # Terminates the child process
}

$pm->wait_all_children; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:11:22.340

我们不能给你最快的方法，因为这取决于工作，你没有告诉我们工作是什么。

但是您确实询问了线程，所以我将为您介绍线程应用程序的基础。这是一个工人模型。它是健壮的、可维护的和可扩展的。

```
use threads;
use Thread::Queue qw( );   # Version 3.01+ required

my $NUM_WORKERS = 5;

sub worker {
   my ($job) = @_;
   ...
}

my $q = Thread::Queue->new();
my @workers;
for (1..$NUM_WORKERS) {
   push @workers, async {
      while (defined(my $job = $q->dequeue())) {
         worker($job);
      }
   };
}

$q->enqueue($_) for @jobs;        # Send work
$q->end();                        # Tell workers they're done.
$_->join() for @workers;          # Wait for the workers to finish. 
```

这是一个基本流程（单向），但通过添加响应队列很容易实现双向。

这使用实际线程，但您可以通过切换`use threads;`到`use forks;`.

[Parallel::ForkManager](http://search.cpan.org/perldoc?Parallel::ForkManager)也可用于提供工作模型，但它不断创建新进程而不是重用它们。不过，这确实使它可以轻松处理儿童死亡。

参考：[Thread::Queue](http://search.cpan.org/perldoc?Thread::Queue)（或[Thread::Queue::Any](http://search.cpan.org/perldoc?Thread::Queue::Any)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:40:42.123

查看[线程](http://perldoc.perl.org/threads.html)文档。

# c# - NHibernate：自引用多对多配置问题

> ID：12370936
> 
> 赞同：0
> 
> 时间：2012-09-11T13:33:17.800
> 
> 标签：c#, nhibernate, fluent-nhibernate

我试图了解为什么会出现此错误：

```
The relationship Client.ChildClients to Client.ChildClients has Inverse specified on both sides. Remove Inverse from one side of the relationship. 
```

我有一个包含以下属性的客户端实体：

```
 public virtual Iesi.Collections.ISet ChildClients
    {
        get
        {
            return this._ChildClients;
        }
        set
        {
            this._ChildClients = value;
        }
    }

    public virtual Iesi.Collections.ISet ParentClients
    {
        get
        {
            return this._ParentClients;
        }
        set
        {
            this._ParentClients = value;
        }
    } 
```

当我尝试流畅地配置我的映射时，我收到了上面列出的错误。这是我对这些属性的映射：

```
HasManyToMany<Client>(x => x.ChildClients)
          .Access.Property()
          .AsSet()
          .Cascade.None()
          .LazyLoad()
          .Inverse()
          .Not.Generic()
          .Table("ParentClients_ChildClients")
          .FetchType.Join()
          .ChildKeyColumns.Add("ClientId1", mapping => mapping.Name("ClientId1")
                                                               .Nullable())
          .ParentKeyColumns.Add("ClientId", mapping => mapping.Name("ClientId")
                                                               .Nullable());
HasManyToMany<Client>(x => x.ParentClients)
          .Access.Property()
          .AsSet()
          .Cascade.None()
          .LazyLoad()
          .Not.Generic()
          .Table("ParentClients_ChildClients")
          .FetchType.Join()
          .ChildKeyColumns.Add("ClientId", mapping => mapping.Name("ClientId")
                                                               .Nullable())
          .ParentKeyColumns.Add("ClientId1", mapping => mapping.Name("ClientId1")
                                                               .Nullable()); 
```

我试图弄清楚我的问题以及它发生的原因。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:58:47.323

[在这里](https://stackoverflow.com/questions/5717973/fluent-nhibernate-many-to-many-relationship-mapping-on-same-entity)解决！问题似乎与流利的 nhibernate 验证器或其他东西有关。希望我知道为什么这会解决它。

# c++ - 使用 OpenMP 实现的线程池

> ID：12370942
> 
> 赞同：5
> 
> 时间：2012-09-11T13:33:54.517
> 
> 标签：c++, multithreading, concurrency, threadpool, openmp

我需要为通用任务实现一个线程池执行器。我的想法是使用 OpenMP 进行线程管理。问题是我还不熟悉 OpenMP ..

我试图用 OpenMP 找到通用 ThreadPool 的现有实现，但到目前为止我还没有找到。我最终想要的是与以下内容非常相似的东西`java.util.concurrent.ThreadPoolExecutor`：

```
template <typename Return, typename Task>
class ThreadPoolExecutor
{
public:
    ThreadPoolExecutor(int threadCount);

    // asyncronous invoke
    boost::unique_future<Return> submit(const TaskPtr & task);

    // blocking call
    std::vector<Return> invokeAll(const std::vector<TaskPtr> & tasks)
    {
        // submit all tasks + wait for completion
        #pragma omp parallel default(shared)
        {
            // call tasks here
        }
    }
}; 
```

我对这种方法有几个问题：

1.  是否存在使用 OpenMP for C++ 的线程池实现？[我知道我可以使用 boost::asio::io_service 实现线程池，但我不希望依赖它]

2.  使用我的设计 - 我们如何保证 OpenMP 线程将由具体的 ThreadPoolExecutor 实例“拥有”？它们不应该对所有实例都是静态的。

感谢您对此方法的任何建议和建设性批评以及其他实现的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:17:11.120

总结一下：如评论中所述，OpenMP 不是实现通用线程池或执行器的选项，因为：

1.  OpenMP 严格来说是一个 fork/join 线程模型。
2.  您不能为 OpenMP 线程分配所有者
3.  无法控制线程和内部线程池

# c# - 数据库“DBName”的日志尾部尚未备份

> ID：12370944
> 
> 赞同：53
> 
> 时间：2012-09-11T13:33:59.527
> 
> 标签：c#, sql, sql-server-2005, sharepoint

我尝试使用以下查询恢复数据库：

```
ALTER DATABASE [DatabaseName] SET Single_User WITH Rollback Immediate GO
RESTORE DATABASE DatabaseName FROM DISK = 'C:\DBName-Full Database Backup'
ALTER DATABASE [DatabaseName] SET Multi_User GO 
```

但我没有恢复数据库，而是收到此错误：

> 消息 3159，第 16 层，状态 1，第 2 行
> 
> 数据库“DatabaseName”的日志尾部尚未备份。`BACKUP LOG WITH NORECOVERY`如果日志包含您不想丢失的工作，则用于备份日志。使用语句的`WITH REPLACE`or`WITH STOPAT`子句`RESTORE` 仅覆盖日志的内容。消息 3013，级别 16，状态 1，线路 2`RESTORE DATABASE`异常终止。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-09-11T13:38:13.960

如果您不关心现有数据库或日志，您收到的错误消息会准确告诉您需要做什么。

```
RESTORE DATABASE DAtabaseName FROM DISK = 'C:\DBName-Full Database Backup' 
WITH REPLACE 
```

在 SQL Server Management Studio（任务 > 还原）中，您可以`WITH REPLACE`通过打开左侧的“选项”页面并勾选“覆盖现有数据库”来添加选项。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-07-25T12:25:14.013

对于那些使用`Management Studio`它的人应该可以：

![在此处输入图像描述](../Images/8467e596f11e44f2cca6f627b3a8b0cb.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-29T16:40:08.400

或者，您可以将数据库恢复模型更改为`Simple`而不是`Full`.

1.  右键单击数据库
2.  选择`properties`->`option`
3.  更改`recovery model`为`simple`

那么你所写的应该可以正常工作而不会产生错误。

它对我很有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T20:01:51.637

或者，您可以将数据库恢复模式更改为“简单”而不是“完整”。

右键单击数据库，选择“属性”，“选项”，将“恢复模型”更改为“简单”。

那么你所写的应该可以正常工作而不会产生错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T13:36:44.290

> 如果日志包含您不想丢失的工作，请使用 BACKUP LOG WITH NORECOVERY 备份日志。
> 
> 使用 RESTORE 语句的 WITH REPLACE 或 WITH STOPAT 子句仅覆盖日志的内容。

真的，这就是答案。就在那儿，在消息中。你想让我做什么？备份尾巴这样就不会丢失？替换没有备份的日志？你的来电。

# spring - Spring @Transactional REQUIRES_NEW 的传播效果？

> ID：12370948
> 
> 赞同：1
> 
> 时间：2012-09-11T13:34:09.170
> 
> 标签：spring, transactions

我正在做一些测试以了解 Spring 3 中 @Transactional 的行为。不过，它并没有像我预期的那样工作。如果有一个使用 Propagation.REQUIRED 的方法调用另一个使用 Propagation.REQUIRES_NEW 的方法，那么第二种方法是否能够从数据库中检索第一种方法插入的数据？

已编辑：我在*@Transaction*中看到未提交的更改，这是我的（令人讨厌的）代码。

```
@Service
public class FeedManager {
   @Autowired
   JdbcTemplate jdbcTemplate;

   @Transactional(isolation = Isolation.READ_COMMITTED, propagation = Propagation.REQUIRED)
   public boolean createFeed(Feed feed, boolean anonymizeIt) {
      String query = "INSERT INTO feed (name, url, is_active) values (?, ?, ?)";
      int rowsAffected = jdbcTemplate.update(query, feed.getName(), feed.getUrl(), feed.isActive()); 
      boolean success = (rowsAffected == 1); 
      if (anonymizeIt) {
         success = success && this.anonymizeFeedName(feed);
      }
      return success;
   }

   @Transactional(isolation = Isolation.READ_COMMITTED, propagation = Propagation.REQUIRES_NEW)
   public boolean anonymizeFeedName(Feed feed) {
      String query = "UPDATE feed set name = ? where name = ?";
      int rowsAffected = jdbcTemplate.update(query, feed.getName() + (new Date()).toString(), feed.getName());
      boolean success = (rowsAffected == 1);
      return success;
   }
}

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:mrpomario/springcore/jdbc/jdbc-testenv-config.xml")
public class TransactionalTest {
   @Autowired
   FeedManager feedManager;

   Feed feed;

   @Before
   public void setup() {
      feed = new Feed("RSS", "http://www.feedlink.com", true);
   }

   @Test
   public void test_Create()  {
      assertTrue(feedManager.createFeed(feed, false));
   }

   @Test
   public void test_Anonymize() {
      assertTrue(feedManager.anonymizeFeedName(feed));
   }

   @Test
   public void test_Create_And_Anonymize() {
      Feed feedo = new Feed("AnotherRSS", "http://www.anotherfeedlink.com", true);
      assertTrue(feedManager.createFeed(feedo, true));
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:43:22.050

它应该看不到第一种方法所做的任何更改（只要您的隔离级别为`READ COMMITTED`或更高）。

如果您得到不同的结果，请确保`@Transactional`实际生效。特别是，请确保您不要调用`@Transactional`同一类的另一个方法 - 由于 Spring 基于代理的 AOP 模型的限制，事务方面仅适用于来自类外部的调用。

**也可以看看：**

*   [7.6.1 了解 AOP 代理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)

# python - RSS 解析器 + unicode 解码（python）

> ID：12370950
> 
> 赞同：0
> 
> 时间：2012-09-11T13:34:14.023
> 
> 标签：python, unicode, rss

我有两个问题:)

1.  我正在为我的 irc 机器人进行扩展。它应该检查 rss 的新内容并将其发布到频道。我正在使用 feedparser。我发现的唯一方法是将每个新内容存储到文件中，每隔几分钟下载 rss 内容并将其与文件中的内容匹配，这在我看来有点奇怪。是否有一些简单的方法可以检查 rss 中是否有新内容？谢谢

2.  当我将内容保存到文件时，有时某些部分由 unicode（捷克语中的特殊字符）编码 - u“xxx”。但我想将它们保存为 utf8 文件。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:37:21.153

1.  RSS 项目通常具有与其关联的 GUID 或链接。如果存在则使用 GUID，否则使用链接来唯一标识每个项目。您仍然需要跟踪您以前看过哪些，因为 RSS 格式不会告诉您自上次以来发生了什么变化。恐怕真的没有别的办法了。

2.  要以 UTF-8 保存`data`（unicode 对象），只需在写入文件时对其进行编码：

    ```
    output.write(data.encode('utf8')) 
    ```

请阅读 Joel Spolsky[关于 Unicode](http://www.joelonsoftware.com/articles/Unicode.html)和[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)的文章，以充分了解编码和解码的含义。

# c# - 如何快速识别 C:\Users\Admin\Samples\*.pdf 中的路径和搜索模式？

> ID：12370961
> 
> 赞同：1
> 
> 时间：2012-09-11T13:34:42.473
> 
> 标签：c#, .net, command-line, io, command-line-arguments

我想创建一个简单的复制控制台应用程序（我知道副本已经存在于 DOS 中）。就像 DOS 复制命令一样，我希望能够使用两个简单的参数来执行我的复制应用程序：

```
copy C:\Users\Admin\Samples\*.pdf C:\ 
```

1.  输入路径和搜索模式
2.  输出路径

在我的代码中我使用这个

```
static void Main(string[] args)
{
    string input;
    string output;

    var options = new Options();
    ICommandLineParser parser = new CommandLineParser();
    if (parser.ParseArguments(args, options))
    {
        input = options.Argument[0];
        output = options.Argument[1];

        // Get file list
        String directory = Path.GetDirectoryName(input);
        String[] files = Directory.GetFiles(directory, /* ??? */);
        // To be continued...
    }
    else
    {
        System.Console.WriteLine("Erreur");
        System.Console.ReadKey();
    }
} 
```

如何轻松检索我的搜索模式？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:44:13.597

试试这个：

```
string extension = System.IO.Path.GetExtension(input);
string inputDirectory = System.IO.Path.GetDirectoryName(input); 
```

我想这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:43:48.840

要获取输入参数的路径或文件，可以使用以下命令：

```
Path.GetFileName(input); 
```

# api - 如何设计具有 LIKE 标准的 REST API？

> ID：12370963
> 
> 赞同：8
> 
> 时间：2012-09-11T13:34:47.047
> 
> 标签：api, rest

我正在设计一个 REST API 并有一个“人”的实体：

```
GET http://localhost/api/people 
```

返回系统中所有人员的列表

```
GET http://localhost/api/people/1 
```

返回 id 为 1 的人。

```
GET http://localhost/api/people?forename=john&surname=smith 
```

返回所有姓名和姓氏相匹配的人，但我还有一个进一步的要求。例如，允许 API 使用者检索名字以“jo”开头的所有人的最干净/最佳实践方式是什么。

我见过一些 API 这样做：

```
GET http://localhost/api/people?forename=jo~&surname=smith 
```

其中波浪号表示“模糊”匹配。另一方面，我已经看到它以完全不同的标准实现，例如

```
GET http://localhost/api/people?forename-startswith=jo&surname=smith 
```

考虑到我可能有 -endswith、-contains、-soundslike（对于某种 soundex 匹配），这似乎有点麻烦。

任何人都可以从经验中提出更好的建议，以及任何具有类似功能的精心设计的 REST API 示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:41:55.597

恕我直言，您是否有模糊匹配或 -endswith -contains 等并不重要。重要的是您的 REST API 是否允许轻松解析此类参数，以便您可以定义函数以从数据源（DB 或 xml 文件等）获取数据。） 因此

如果您使用的是 PHP……根据我的经验，[SlimFramework](http://www.slimframework.com/)是一个轻量级、易于上手的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:43:18.803

我会向您推荐提供[Query String Options的](http://www.odata.org/documentation/uri-conventions#QueryStringOptions)[OData 协议](http://www.odata.org/)。你所做的没问题，并且遵循 REST 约定。

但是，OData 协议描述的是一个`$expand`参数，甚至是一个`$filter`参数。此`$`前缀表示“系统查询选项”，您将对最后一个感兴趣，因为它允许您编写以下 URI：

```
http://services.odata.org/Northwind/Northwind.svc/Customers?$filter=tolower(CompanyName) eq 'foobar' &select=FirstName,LastName&$orderby=Name desc 
```

它允许您传递类似 SQL 的数据，它可以是您所描述的一个很好的替代方案（两种解决方案都很好，这只是一个品味问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T15:31:17.613

AFAIK，以上都不是很RESTful。它们都依赖于客户端关于如何调用查询的先验知识（在第一种情况下是查询模式，在第二种情况下是查询 DSL）。实际上，在第二个示例中，API 被简化为数据存储的包装器。因此，API 没有定义服务器域——它是一个数据提供者。这与REST的**客户端-服务器约束形成对比。**

如果您需要公开具有所有各种查询功能的完整数据存储，您最好坚持我们拥有的已知标准**OData**。OData 已作为 REST 出售，但许多 REST 负责人都遇到了问题。无论如何，归根结底，它是有效的，而 REST 讨论通常会导致分析瘫痪。

如果我这样做，我可能会将 API 限制为一个常见的用例，所以更像是第二个而不定义查询 DSL（因此是 forenameStartsWith 而不是 forename-startswith）。

话虽如此，如果您需要基于多个字段和各种条件进行查询，我会使用 OData。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:39:41.040

这两个示例都使用查询参数进行过滤。我认为调用这些查询参数或者是否使用了某些通配符语法并不重要。

两种方法都同样 RESTFul。

# pyqt - PyQt4 对象的底层 C++ 实例不会在函数结束时删除，但会在返回后立即删除

> ID：12370964
> 
> 赞同：0
> 
> 时间：2012-09-11T13:34:53.603
> 
> 标签：pyqt, return, python-sip

我`sip.isdeleted(obj)`在两个条件断点的条件下使用（函数`isdeleted`在两种情况下都指的是完全相同的对象）——一个出现在函数的最后一行，另一个出现在函数调用之后的行。在调试期间，程序不会在第一行（函数的最后一行）中断并在第二行（在调用之后）中断。怎么会这样？

# c# - FindAll 多个条件

> ID：12370966
> 
> 赞同：0
> 
> 时间：2012-09-11T13:35:02.317
> 
> 标签：c#

所以我试图使用 FindAll 返回匹配的对象列表。例如，当我只使用一种条件时，它的效果很好

```
patientstatus = statuslist.FindAll(delegate(StatusReader.onestatus p1)
{
   return p1.WL_ID == patlist[i].wl_id;
}); 
```

但我想使用多个条件，其中一些包含 if 语句，我不知道如何。似乎格式需要有一个返回语句，微软的示例（http://msdn.microsoft.com/en-us/library/fh1w7y8z.aspx）只使用了一个条件。

我可以为每个条件设置多个 FindAll 方法，或者只创建一个循环来自己扫描所有值，但是我肯定缺少一个明显的东西，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:39:09.433

我不太确定“if 循环”是什么，但你总是可以将它们拼接在一起：

```
patientstatus = statuslist.FindAll(delegate(StatusReader.onestatus p1)
{
   if(p1.WL_ID != patlist[i].wl_id)
       return false;

   if(otherStuff != 5)
       return false;

   for(var x in p1.stuff)
       if(x == 7)
           return false;

   return true;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:39:51.593

尝试以下操作：

```
var patientStatus = statusList.Where(p => p
{
    // Put in logic here as you need
    return p.WL_ID == patlist[i].wl_id || p.YourSecondProperty == WhateverYouWantToCheck;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:42:02.607

你可以考虑类似

```
public abstract class Condition
{
    public abstract bool Sutisfied(StatusReader.onestatus status);
}

public class Condition1 : Condition
{
   public override bool Sutisfied(StatusReader.onestatus status)  {

      //check for something and return 
   }
}

public class Condition2 : Condition
{
   public override bool Sutisfied(StatusReader.onestatus status)  {

      //check for something and return 
   }
} 
```

之后可以有一个条件列表，比如

```
List<Condition> conditions = 
     new List<Condition>{new Conditon1(), new Condition2()} 
```

在*这个*列表之后使用里面

```
patientstatus = statuslist.FindAll(delegate(StatusReader.onestatus status)
{
    return conditions.TrueForAll(c=>c.Sutisfied(status));
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:42:49.510

您的委托只需要返回 true 以匹配您的条件，返回 false 以不匹配您的条件。它不必是单行返回语句。您可以在委托中创建布尔值、if 语句、for 循环以及您想要的任何其他内容 - 只要它在所有代码路径中返回 true 或 false。

因此，您可以根据需要执行任意数量的 if 语句或循环。

如果您真的想将其保持为一条线，则可以执行以下操作...

```
return (condition1 == condition1) || (condition2 == condition2) || (condition3 == condition3); 
```

# python - 帧范围成块

> ID：12370968
> 
> 赞同：-3
> 
> 时间：2012-09-11T13:35:11.730
> 
> 标签：python, range, frame, chunks

如何使某些帧范围（即 1-100）分成 4 个相等的帧范围（如 1-25、26-50、51-75、75-100 或任何类似的）。我需要每个分块帧范围的第一个和最后一个数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:46:13.577

```
def chunk_range(first, last, howmany):
    size = ((last - first + 1) + (howmany - 1)) // howmany
    while first <= last:
        next = first + size
        yield first, min(next - 1, last)
        first = next

list(chunk_range(1, 100, 4)) 
```

返回

```
[(1, 25), (26, 50), (51, 75), (76, 100)] 
```

请注意，这会使除最后一个段之外的所有段长度相等 - 例如，

```
list(chunk_range(1, 7, 3)) 
```

给你

```
[(1, 3), (4, 6), (7, 7)]   # last chunk is only one item 
```

相反，您可能希望沿序列分布错误，这是一种布雷森汉姆算法。

# javascript - 在 HTML 的不同屏幕上显示和隐藏内容的方法

> ID：12370969
> 
> 赞同：0
> 
> 时间：2012-09-11T13:35:13.597
> 
> 标签：javascript, css, html

简短的问题：我有一个简单的显示器和一个投影仪，两者都应该显示相同的浏览器窗口并加载相同的页面，但它们每个都有一些不同的内容。有什么方法可以使用 css 或 js（或者可能使用特定的浏览器扩展）来实现这一点？

更长的解释：我想用js和css构建一个小演示插件，最大的演示程序都在屏幕上有一个计时器，但在投影仪上没有。这个功能是我想要实现的。也可以添加注释或类似的东西，但所有这些都需要不同屏幕/投影仪上的不同内容，所以我需要一个解决方案。为此，即使是浏览器扩展也会很有用，因为我只想要我自己的插件。那么，您有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:41:31.940

您可以指定不同的*媒体*。像这样：

```
@media projection{
//projection css
}

@media screen{
//screen css
} 
```

然后，很明显，投影将适用于*投影*媒体，如幻灯片、投影仪等，而屏幕内容仅适用于计算机屏幕。现在，您可能想`projection`玩弄 CSS，因为我从未实际测试过它。但是你可以很容易地摆脱只使用这些`screen`东西将某些东西设置为`display:block;`，而它`display:none;`不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:41:44.487

我想你可以在 CSS3 中使用媒体查询。

例如，请参阅 thinkvitamin.com，调整窗口大小并查看它如何根据屏幕大小排列 UI。

您还可以在特定屏幕分辨率下隐藏或显示 div，但我认为这仅适用于 CSS3。

# android - “未定义对 pthread_atfork 的引用”，而我试图将 libpcsclite 移植到 Android

> ID：12370970
> 
> 赞同：1
> 
> 时间：2012-09-11T13:35:15.007
> 
> 标签：android, android-ndk

Android ndk`"undefined reference to pthread_atfork"`在我尝试为 Android 交叉编译 libpcsclite 时告诉我

实际上我已经知道Android的仿生库（Android docs）中没有pthread_atfork函数，但是pthread_atfork必须在pcsclite库中调用。在这种情况下有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T16:37:12.727

看起来直到 android-10/v2.3.6/Gingerbread 之后`pthread_atfork()`才[添加到仿生 libc中。](https://android.googlesource.com/platform/bionic.git/+/4f086aeb4aa06e13079b7fec71a8178ceeacf318)如果您想针对旧版本的 Android，您必须在项目中包含[pthread-atfork.c](https://android.googlesource.com/platform/bionic.git/+/android-4.0.1_r1/libc/bionic/pthread-atfork.c)或更新的[pthread_atfork.cpp](https://android.googlesource.com/platform/bionic.git/+/master/libc/bionic/pthread_atfork.cpp)，或者根本不使用`pthread_atfork()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:48:19.713

看看这个：[http ://comments.gmane.org/gmane.comp.handhelds.android.ndk/15982](http://comments.gmane.org/gmane.comp.handhelds.android.ndk/15982)

我相信函数 pthread_atfork 是在 Bionic 库中实现的（但是，它没有记录在案）。

我认为你所要做的就是声明它来使用它。

通常的警告：如果您使用未记录的方法，它们可能无法正常工作或将来可能会被弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-10T10:08:13.487

```
-DANDROID_PLATFORM=android-21 
```

> 此值默认为使用中的 NDK 支持的最低 API 级别

在我的上下文中，使用 android-9 默认值。

如果您在 ${ANDROID-NDK} DIR 上执行下面的 shell，

```
 find_path=$1
 grep_str=$2

 SOS=`find ${find_path} -name *.so`
 for item in $SOS
 do
     echo ======= $item
     objdump -Tt $item |grep ${grep_str}
 done 
```

`sh echo.sh . pthread_atfork` 输出：

```
======= ./platforms/android-9/arch-mips/usr/lib/libc.so
======= ./platforms/android-12/arch-x86/usr/lib/libc.so
00009420 g     F .text  0000000a              pthread_atfork
00009420 g    DF .text  0000000a  LIBC        pthread_atfork 
```

您会发现这条消息：`pthread_atfork`在 libc.so 上使用 android-12 而不是 android-9 定义。

所以当你使用 cmake 或其他工具交叉编译时，你需要添加`-DANDROID_PLATFORM=android-21`[just only gt android-9]

你可以用 cmake 试试这个命令

```
# on you project_root
mkdir build
cd build
cmake  -DCMAKE_TOOLCHAIN_FILE=/cross/github/jni/android-ndk-r14b/build/cmake/android.toolchain.cmake -DANDROID_TOOLCHAIN=clang -DANDROID_ABI=armeabi-v7a -DCMAKE_ANDROID_NDK_TOOLCHAIN_VERSION=clang -DANDROID_PLATFORM=android-21   .. 
```

# php - php数组fwrite循环

> ID：12370974
> 
> 赞同：0
> 
> 时间：2012-09-11T13:35:27.237
> 
> 标签：php, arrays

我在这里有这个 PHP 代码：

```
$info = array();

if($this->build) {
    $info['price_type'] = 'build';
} else if($this->zip) {
    $info['is_co'] = r_check_is_co_zip($this->zip);
    $info['idS'] = r_find_ids_near($this->zip);
    etc etc....
}

$f = fopen(CORE_ROOT . '/../pc/debuging.txt', 'a');
fwrite($f, "***ZIPCode DEBUG***" . "\r\n");
fwrite($f, "*date/time: " . date("F j, Y, g:i a") . "*" . "\r\n");
foreach($info as $q) {
    fwrite($f, $q . "\r\n");
}
fwrite($f, "***************************" . "\r\n");
fclose($f); 
```

当我尝试遍历数组以获取**$info时，除了****"Array"**之外，我什么也没得到。我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:39:34.920

您可以使用`print_r($q, true);`或`var_export($q, true);`：

```
$info = array();

if($this->build) {
    $info['price_type'] = 'build';
} else if($this->zip) {
    $info['is_co'] = r_check_is_co_zip($this->zip);
    $info['idS'] = r_find_ids_near($this->zip);
    etc etc....
}

$f = fopen(CORE_ROOT . '/../pc/debuging.txt', 'a');
fwrite($f, "***ZIPCode DEBUG***" . "\r\n");
fwrite($f, "*date/time: " . date("F j, Y, g:i a") . "*" . "\r\n");
foreach($info as $q) {
    $toWrite = print_r($q, true);
    fwrite($f, $toWrite . "\r\n");
}
fwrite($f, "***************************" . "\r\n");
fclose($f); 
```

# php - PHP 和 MySQL 中的错误监控

> ID：12370977
> 
> 赞同：0
> 
> 时间：2012-09-11T13:35:33.067
> 
> 标签：php, mysql, error-handling

是否有任何报告/日志说明服务器上发生的所有 PHP 和 MySQL 错误？如果可能的话，使用日期、时间、一些用户信息（浏览器、IP）和发生的错误计数。

此外，每次我的`mysql_query`失败死亡消息都会从包含的文件中提取：

```
$error_message[0] = 'Error no. 0!';
$error_message[1] = 'Error no. 1!';
$error_message[2] = 'Error no. 2!'; 
```

有没有办法监控显示的消息和时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:37:37.470

是的，两者都有错误日志：httpd（或 apache）和 mysqld。

您可以在以下位置找到它们：

```
/var/log/httpd/error_log
/var/log/mysqld.log 
```

（这些路径在您的服务器上可能会有所不同，具体取决于配置文件，例如，您可以指定 mysql 错误日志文件位置，将 --log-error=XXX 选项传递给 mysqld）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:41:18.690

您可以通过坚持异常而不是“die()”调用，然后捕获它们，然后记录来做到这一点。

好的解决方案是例如。[Sentry](https://github.com/getsentry/sentry) - 它以您需要的方式保存信息（发生时间、详细信息、发生次数、记录器/类别、级别等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:38:15.233

查看它`/var/logs/apache/`是否`/var/logs/httpd/`是 Linux / UNIX 服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:43:22.363

“有没有办法监控显示的消息和时间？”

这不是主要问题，但是如果您担心暴露的错误消息，您可以简单地禁用在 PHP 中显示错误，这实际上意味着您也不会向访问者显示 MySQL 错误（您正在通过PHP，如果您在谈论 Web 应用程序）

这可能会有所帮助！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T20:22:30.800

你认为`try, catch`那会奏效吗？您只需要在任何地方使用它即可捕获所有可能的错误。

您也可以制作自己的 MySQL 适配器类，然后将原始函数包装在`try, catch`块内。如果您可以将其应用于您的代码，那将变得更容易，但对于 PHP 错误，仍然需要覆盖可能出现致命错误的部分，例如在文件系统上工作，`try, catch`手动使用块。

当您要将它们记录在数据库或文件系统上时，显然您也可以记录日期和时间。

[PHP手册/例外](http://php.net/manual/en/language.exceptions.php)

注意：您也可以考虑开销！`try, catch`您可以进行基准测试以查看使用块后您的代码会变慢多少。

# logging - 无法让 grizzly 日志记录工作，没有写入我的 log4j 日志文件

> ID：12370984
> 
> 赞同：4
> 
> 时间：2012-09-11T13:35:58.280
> 
> 标签：logging, log4j, grizzly

我有一个简单的 Java/Spring 程序，它使用标准的 log4j.properties 文件来控制日志记录，它工作正常。当我们通过以下方式添加灰熊时：

GrizzlyHttpServerFactory.createHttpServer(uri, resourceConfig)

事情正常（即服务器实际上服务......但我没有得到任何日志输出。

我在 log4j.properties 中有一个明确的条目“org.glassfish.grizzly”。

我已经调试到 Grizzly 的 ExtendedLogger 类，并且可以看到它接近日志记录但随后没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:34:32.730

结果 Grizzly 使用基于 java.util.logging 而不是 log4j 或 slf4j 的自己的日志记录，这意味着您需要一个单独的日志记录配置文件。使用它的一个很好的描述是：[http ://www.javapractices.com/topic/TopicAction.do?Id=143](http://www.javapractices.com/topic/TopicAction.do?Id=143)

# https - 通过 HTTP 代理的 HTTPS 隧道的 HTTP4 组件配置导致 java.lang.IllegalStateException：未注册方案“http4”

> ID：12370985
> 
> 赞同：0
> 
> 时间：2012-09-11T13:35:59.127
> 
> 标签：https, proxy, apache-camel

我正在尝试使用 Camel 的 HTTP4 组件通过 HTTP 代理建立 HTTPS 连接。

我有几条路由，所以我想在组件级别而不是路由定义级别配置代理。

我在骆驼上下文中设置了以下内容：

```
http.proxyHost=myproxy.mydomain.com
http.proxyPort=80
http.proxyScheme=http4 
```

我的路线的一个例子：

```
from("direct:start")
    .to("https4://www.verisign.com")
    .to("direct:downloadProcessor"); 
```

当我执行这条路线时，它会产生一个错误：`java.lang.IllegalStateException: Scheme 'http4' not registered.`

但是，如果我在每个路由定义上指定代理配置：

```
from("direct:start")
    .to("https4://www.verisign.com?proxyAuthHost=myproxy.mydomain.com&proxyAuthPort=80&proxyAuthScheme=http4")
    .to("direct:downloadProcessor"); 
```

它工作正常，我可以在日志中看到 CONNECT 请求`DEBUG DefaultClientConnection - Sending request: CONNECT www.verisign.com:443 HTTP/1.1`：

这听起来有点像在测试[CAMEL-4176](https://issues.apache.org/jira/browse/CAMEL-4176?focusedCommentId=13065644&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-13065644)时发现的问题，但这在 Camel 2.8.0 中被标记为已修复（我使用的是 2.10.0）。

是否有某些原因我不能在 HTTP 组件而不是每个路由上配置代理？

# xslt - 是否有任何现成的 xslt 文件可以将 ODF 内容 xml 转换为纯文本？

> ID：12370990
> 
> 赞同：1
> 
> 时间：2012-09-11T13:36:15.907
> 
> 标签：xslt, openoffice.org, plaintext, odf

我尝试使用谷歌搜索，但找不到任何 xslt 文件将 ODF 内容 xml 转换为纯文本。也许有人知道它是否存在？

更新：

我正在搜索的样式表主要用于 ODT content.xml。这是示例输入：img.rg.ru/pril/article/61/45/53/UDO04.2012.odt（可以使用解压缩解压缩content.xml）。XSLT 版本是 1.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:15:48.920

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:for-each select="//text:p">
    <xsl:value-of select="concat(.,'&#x0A;')" />
  </xsl:for-each>  
</xsl:template>

</xsl:stylesheet> 
```

...当从解压缩 .odt 文件应用于 content.xml 文件时，将产生与 ODF 文档等效的文本。

# .net - XmlNode 上的 SelectSingleNode 方法返回未定义的值

> ID：12370991
> 
> 赞同：2
> 
> 时间：2012-09-11T13:36:29.573
> 
> 标签：.net, xpath

我有一个简单的 xml，我从中创建了一个 XmlDocument 并使用 Xpath 来获取一个节点，我需要将此节点传递给代码的其他部分，我可以在 XmlNode 对象上使用进一步的 xpath 函数来获取其他子节点。但是在下面的代码中

```
string xmlString = "<catalog><music><cds><cd><title>First Title</title><author>Author    1</author></cd><cd><title>Second Title</title><author>Author 2</author></cd></cds></music></catalog>";
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.LoadXml(xmlString);
XmlNode musicNode = xmlDocument.SelectSingleNode("/catalog/music");
XmlNode cdsNode = musicNode.SelectSingleNode("/cds"); 
```

当我打印音乐节点的名称时，我得到了“音乐”，所以我假设我有“音乐”节点。所以我再次在音乐节点上应用 xpath 表达式“/cds”，假设我会得到“cds”XmlNode，但代码中的 cdsNode 返回未定义的值，但如果我这样做

```
XmlNode cdsNode = musicNode.SelectSingleNode("/catalog/music"); 
```

我再次获得了 cdsNode 的有效值，即“音乐”节点，我想 musicNode 代表 XmlDocument 而不是“音乐”XmlNode？我是否遗漏了什么，我来自 Java 并且在 Java 中使用 xpath 可以从 Node 导航到子节点，就像 musicNode 上的 xpath 表达式“/cds”会返回一个有效的 cdNode

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:39:12.180

/ 将始终回到底层的根`XmlDocument`，而与当前节点无关。

放下`/`并导航相对路径，你应该很好，即

```
XmlNode musicNode = xmlDocument.SelectSingleNode("/catalog/music");
XmlNode cdsNode = musicNode.SelectSingleNode("cds"); 
```

或者只是再次走整条路

```
XmlNode cdsNode = xmlDocument.SelectSingleNode("/catalog/music/cds"); 
```

# asp.net - MVC3 和 ACS ClaimsIdentity

> ID：12370994
> 
> 赞同：0
> 
> 时间：2012-09-11T13:36:34.303
> 
> 标签：asp.net, asp.net-mvc-3, azure, acs

我一直在玩 Azure ACS，它非常酷，我想我会在下一个项目中使用它。

我有一个问题是，当我取回我的 ClaimsIdentity 时，只有电子邮件和姓名，它是空的。这是设计使然吗？

是否有可能在这方面获得更多信息？我真的希望我可以使用用户为服务提供的头像..

任何帮助都会很棒。

干杯。圣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:44:07.217

返回的声明几乎由身份提供者自行决定。每个都可以返回不同的声明（有关每个身份提供者返回的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/gg185971.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185971.aspx)）。您只能保证获得每个身份提供者返回的“名称标识符”和“身份提供者”声明。

更多有用信息，请访问[http://msdn.microsoft.com/en-us/library/windowsazure/gg185933.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185933.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T01:48:40.593

正如@mcollier 所写，所提供的声明通常取决于 IdP 的报价。但是，您可以丰富 ACS 中的安全令牌并添加任意声明。您可以编写一条规则，说明：

“当有人使用**email=someone@gmail.com**向 Google 进行身份验证时，向 value **manager**发出类型**角色**声明”

 **所以你可以在这样的规则中添加任何东西（包括头像）。

ACS 本质上是声明的“规范化器”，它将来自任何 IdP 的令牌中的声明转换为您的应用程序可以理解的内容。

请注意，受您控制的 IdP（例如您自己的 ADFS 服务器或公司的第 3 方 IdP）*可能会*提供额外的声明。通常受限的是预先提供的那些（例如电子邮件、姓名、ID）。

您可以使用 ACS 门户、API 或通过[Auth10](http://www.auth10.com)等第三方工具（使用 API）自行定义转换规则。**

# c# - 想要多行 .net 表

> ID：12370996
> 
> 赞同：0
> 
> 时间：2012-09-11T13:36:35.377
> 
> 标签：c#, .net, html-table

我想知道为什么 .Net Table 行被添加到同一行而不是多行？

具体问题在于这段代码：

```
this.table.Rows.AddAt(0,labels);
this.table.Rows.AddAt(1,fields);
this.table.Rows.AddAt(2,submits); 
```

表是一个 WebControls.Table
标签、字段和提交是 TableRows
，它们都包括 TableCells。

但是当我在浏览器中查看它时，它表示为 <tr>“所有行和列”

</tr>

然后两个空

<tr></tr><tr></tr>

标签..？

因此，它添加了单元格和行的所有内容，甚至添加了三行，但由于某种原因，它将所有信息放在第一个

<tr> 标签。

任何想法我做错了什么？

```
<table border="0">
        <tr>
            <td><span>please enter the title of the interaction here</span></td><td><span>please enter the description of the interaction here</span></td><td><span>please select the impact level of the interaction here</span></td><td><span>please select the urgency level of the interaction here</span></td><td><span>please enter the contact of the interaction here</span></td><td><input name="ctl00$PlaceHolderMain$ctl00$ctl06" type="text" value="one" /></td><td><input name="ctl00$PlaceHolderMain$ctl00$ctl07" type="text" value="two" /></td><td><select name="ctl00$PlaceHolderMain$ctl00$ctl08">
                <option selected="selected" value="1">Low</option>
                <option value="2">Medium</option>
                <option value="3">High</option>

            </select></td><td><select name="ctl00$PlaceHolderMain$ctl00$ctl09">
                <option selected="selected" value="1">Low</option>
                <option value="2">Medium</option>
                <option value="3">High</option>

            </select></td><td><input name="ctl00$PlaceHolderMain$ctl00$ctl10" type="text" value="con" /></td><td rowspan="3"><input type="submit" name="ctl00$PlaceHolderMain$ctl00$ctl11" value="Create Interaction" /></td><td rowspan="2"><span>No interactions created yet</span></td>
        </tr><tr>

        </tr><tr>

        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:43:34.127

您可以通过传递单元容器尝试使用此代码

```
/adding first row
TableRow row1 = new TableRow();

//adding first cell
TableCell cell1 = new TableCell();

//adding label
Label text1 = new Label();
text1.Text = "Just test";

cell1.Controls.Add(text1);
row1.Controls.Add(cell1);
table1.Controls.Add(row1); 
```

# android - 如何理解一个布局完成了绘图？

> ID：12370998
> 
> 赞同：0
> 
> 时间：2012-09-11T13:36:43.710
> 
> 标签：android, android-layout

> **可能重复：**
> [Activity 何时完成绘制本身？](https://stackoverflow.com/questions/3171216/when-has-the-activity-finished-drawing-itself)

我想了解当布局完成绘制自身及其所有子项时，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:59:59.230

您可以使您的视图（根节点）成为自定义视图 - 然后您可以覆盖 onDraw - 当到达其末尾时，应绘制所有视图