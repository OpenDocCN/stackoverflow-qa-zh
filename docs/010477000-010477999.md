# StackOverflow 问答 10477000-10477999

# php - 将输入框中的数据串成字符串

> ID：10477004
> 
> 赞同：1
> 
> 时间：2012-05-07T05:17:43.420
> 
> 标签：php, string

我有 3 个输入框，其中包含以下数据

```
<input name="day" type="text" id="day" class="required" maxlength="2" minlength="2" style="width:60px;"> - <input name="mth" type="text" id="mth" class="required" maxlength="2" minlength="2" style="width:60px;"> - <input name="yr" type="text" id="yr" class="required" maxlength="4" minlength="4" style="width:100px;"> 
```

在使用我的 php 进行拉取时，我想将其转换为字符串，以便我可以用它做一些事情。

这是我到目前为止所拥有的

```
$dob = $data['yr'] + "-" + $data['mth'] + "-" + $data['day']; 
```

但那是在 2016 年回归！谁能告诉我我需要做什么才能使其显示为 0000-00-00 作为字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:20:22.673

Javascript`+`用于连接 PHP 使用`.`

`$dob = $data['yr'] . "-" . $data['mth'] . "-" . $data['day'];`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T05:22:12.963

```
$dob = $data['yr'] ."-" .$data['mth'] ."-" .$data['day']; 
```

如果你想在 php 中使用 . 您正在使用的操作 + oprerand 在 javascript 中用于连接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:29:24.743

是的，如果你想得到字符串作为结果，使用 cancatenate 运算符。as (dot) 在 php 中用于 cancatenation.like $dob = $data['yr'] ."-" .$data['mth'] ."-" .$data['day'];

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T05:29:32.553

这个问题是，当您在 php 中使用 + 时，它会将您的字符串数据转换为数字数据，这对于使用其他编程语言（例如在 python 中）的 thouse 来说可能会相当混乱，以连接字符串使用 . 而不是+。

# javascript - 试图让我的幻灯片插件无限循环（通过回到第一个状态）

> ID：10477009
> 
> 赞同：0
> 
> 时间：2012-05-07T05:18:35.263
> 
> 标签：javascript, jquery, slideshow, jquery-animate

我写了一个幻灯片插件，但由于某种原因，可能是因为我整天都在研究它，一旦它到达最后一个状态，我无法弄清楚如何让它回到状态一自动模式。

我认为这是一个架构问题，因为基本上我为每个面板（一个面板包含 4 个当前显示给用户的图像）附加了向左滚动的数量（负向）。第一个选项卡应该得到：0，第二个 680，第三个，1360 等。这只是通过计算 4 个图像的宽度加上填充来完成的。

我`setTimeout(function(){})`目前有它可以自动移动它，效果很好（除非你也点击标签，但这是另一个问题）。我只想让它在它处于最后一个状态（numTabs - 1）时进行动画处理并将其状态移回第一个状态。

代码：

(function($) { var methods = { init: function(options) { var settings = $.extend({ 'speed': '1000', 'interval': '1000', 'auto': 'on' },选项）;

```
 return this.each(function() {
            var $wrapper = $(this);
            var $sliderContainer = $wrapper.find('.js-slider-container');
            $sliderContainer.hide().fadeIn();

            var $tabs = $wrapper.find('.js-slider-tabs li a');
            var numTabs = $tabs.size();
            var innerWidth = $wrapper.find('.js-slider-container').width();

            var $elements = $wrapper.find('.js-slider-container a');
            var $firstElement = $elements.first();
            var containerHeight = $firstElement.height();
            $sliderContainer.height(containerHeight);

            // Loop through each list element in `.js-slider-tabs` and add the
            // distance to move for each "panel". A panel in this example is 4 images
            $tabs.each(function(i) {
                // Set amount to scroll for each tab
                if (i === 1) {
                    $(this).attr('data-to-move', innerWidth + 20); // 20 is the padding between elements
                } else {
                    $(this).attr('data-to-move', innerWidth * (i) + (i * 20));
                }

            });

            // If they hovered on the panel, add paused to the data attribute
            $('.js-slider-container').hover(function() {
                $sliderContainer.attr('data-paused', true);
            }, function() {
                $sliderContainer.attr('data-paused', false);
            });

            // Start the auto slide
            if (settings.auto === 'on') {
                methods.auto($tabs, settings, $sliderContainer);
            }

            $tabs.click(function() {
                var $tab = $(this);
                var $panelNum = $(this).attr('data-slider-panel');
                var $amountToMove = $(this).attr('data-to-move');

                // Remove the active class of the `li` if it contains it
                $tabs.each(function() {
                    var $tab = $(this);
                    if ($tab.parent().hasClass('active')) {
                        $tab.parent().removeClass('active');
                    }
                });

                // Add active state to current tab
                $tab.parent().addClass('active');

                // Animate to panel position
                methods.animate($amountToMove, settings);
                return false;
            });
        });
    },

    auto: function($tabs, settings, $sliderContainer) {
        $tabs.each(function(i) {
            var $amountToMove = $(this).attr('data-to-move');

            setTimeout(function() {
                methods.animate($amountToMove, settings, i, $sliderContainer);
            }, i * settings.interval);
        });
    },

    animate: function($amountToMove, settings, i, $sliderContainer) {
            // Animate
            $('.js-slider-tabs li').eq(i - 1).removeClass('active');
            $('.js-slider-tabs li').eq(i).addClass('active');

            $('#js-to-move').animate({
                'left': -$amountToMove
            }, settings.speed, 'linear', function() {});
    }
};

$.fn.slider = function(method) {
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method) {
        return methods.init.apply(this, arguments);
    } else {
        return false;
    }
};
})(jQuery);

$(window).ready(function() {
    $('.js-slider').slider({
        'speed': '10000',
        'interval': '10000',
        'auto': 'on'
    });
});​ 
```

`auto`和`animate`方法是魔法发生的地方。参数`speed`是动画的速度和`interval`频率，当前设置为 10 秒。

如果你愿意，谁能帮我弄清楚如何让它“无限循环”？

这是一个[JSFiddle](http://jsfiddle.net/someprimetime/4NzfC/62/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:37:13.160

放开`.each()`and`setTimeout()`组合并使用它可能会更好`setInterval()`。使用`.each()`自然会将您的循环限制在集合的长度内，因此最好使用不是的循环机制，并且您可以在您选择的任何点中断。

此外，您可以通过检查来轻松识别当前可见元素`.active`，从我所看到的。

你可能需要这样的东西：

```
setInterval(function () {
    // do this check here.
    // it saves you a function call and having to pass in $sliderContainer
    if ($sliderContainer.attr('data-paused') === 'true') { return; }

    // you really need to just pass in the settings object.
    // the current element you can identify (as mentioned),
    // and $amountToMove is derivable from that.
    methods.animate(settings);
}, i * settings.interval);

// ...

// cache your slider tabs outside of the function
// and just form a closure on that to speed up your manips
var slidertabs = $('.js-slider-tabs');
animate : function (settings) {

    // identify the current tab
    var current = slidertabs.find('li.active'),

    // and then do some magic to determine the next element in the loop
        next = current.next().length >= 0 ? 
                   current.next() : 
                   slidertabs.find('li:eq(0)')
        ;

    current.removeClass('active');
    next.addClass('active');

    // do your stuff

}; 
```

代码没有优化，但我希望你能看到我在这里的位置。

# javascript - JavaScript 无法正常工作

> ID：10477016
> 
> 赞同：0
> 
> 时间：2012-05-07T05:19:32.340
> 
> 标签：javascript, css

我有一个从 javascript 获取背景的导航栏。它只会在`nth-child`. 不知道如何修复它。有任何想法吗？更新：这是 JS 的完整代码：

```
$(document).ready(function() {
$('.home, .logo').live("click",function(){
    $(window).unbind("scroll");
    window.setTimeout(function(){$(window).bind("scroll",function(){update_location();});},1500);
    $('body,html').animate({
        scrollTop: 0
    }, 800);
    return false;
});
$('#nav').onePageNav({
scrollOffset: 40,
});

/* Tab hover effect starts 
$('.top-box').hover(function(){
    $(this).stop().animate({
        width:          "300px",
        marginLeft:     "-25px",
        minHeight:      "250px",
        top:            "-25px"
    });
    $(this).find('p').stop().animate({
        paddingRight:   "50px",
        paddingLeft:    "50px"
    });
    $(this).css({"z-index":"5"});
},function(){
    $(this).stop().animate({
        width:          "240px",
        marginLeft:     "0px",
        minHeight:      "190px",
        top:            "0"
    });
    $(this).css({"z-index":"0"});
    $(this).find('p').stop().animate({
        paddingRight: "20px",
        paddingLeft: "20px"
    });
});
/* Tab hover effect ends */

//navigation arrow starts
var $el, leftPos, newWidth,
    $mainNav = $("#nav");

$mainNav.append("<li id='magic-line'></li>");
var $magicLine = $("#magic-line");

$magicLine
    .width($(".current_page_item").width())
    .css("left", $(".current_page_item a").position().left)
    .data("origLeft", $magicLine.position().left)
    .data("origWidth", $magicLine.width());

//scroll arrow

function update_location(){
    $el = $('#nav').children('li.current');
    leftPos = $el.position().left;
    newWidth = $el.width();
    $('#nav li:nth-child(4) a').addClass('button-style');
    if(window.top.scrollY == 0)
    {
        setTimeout(function(){
        $magicLine.stop().animate({
            left: 8,
            width: 355
        });},1000);
        $('#nav li:nth-child(4) a').removeClass('button-style');

    }
    else
    {
        setTimeout(function(){
        $magicLine.stop().animate({
            left: leftPos,
            width: newWidth
        });},1000);
    }
}

$('#magic-line').css('left', '-15px', 'width','411px');
$(window).scroll(function(){
    update_location();
});

//click arrow
$("#nav li a").click(function() {
    $el = $(this);
    leftPos = $el.position().left;
    newWidth = $el.parent().width();
    $magicLine.stop().animate({
        left: leftPos,
        width: newWidth
    });
});
//navigation arrow ends

/* Tab nav starts */
var $el_tab, leftPos_tab, newWidth_tab,
    $mainTab = $("#tab");

$mainTab.append("<li id='magic-tab'></li>");
var $magicTab = $("#magic-tab");

$magicTab
    .width($(".current_tab_item").width())
    .css("left", $(".current_tab_item a").position().left)
    .data("origLeft", $magicTab.position().left)
    .data("origWidth", $magicTab.width());

$("#tab li a").click(function() {
    $el_tab = $(this);
    $("#tab li a").css('color','#333');
    $el_tab.css({color:'#fff'});
    leftPos_tab = $el_tab.position().left;
    newWidth_tab = $el_tab.parent().width();
    $magicTab.stop().animate({
        left: leftPos_tab,
        width: newWidth_tab
    });
    var rel_id = $el_tab.attr('href');
    $('#tabs-container').find('.tab-content').fadeOut('fast');
    $('#tabs-container').find(rel_id).fadeIn('fast');
    return false;

}, function() {
    $magicTab.stop().animate({
        left: $magicTab.data("origLeft"),
        width: $magicTab.data("origWidth")
    });
});
/* Tab nav ends */

/* Tab_visioin starts */
var $el_tab_visioin, leftPos_tab_visioin, newWidth_tab_visioin,
    $mainTab_visioin = $("#tab_visioin");

$mainTab_visioin.append("<li id='magic-tab-vision'></li>");
var $magicTab_visioin = $("#magic-tab-vision");

$magicTab_visioin
    .width($(".current_vision_item").width())
    .css("left", $(".current_vision_item a").position().left)
    .data("origLeft", $magicTab_visioin.position().left)
    .data("origWidth", $magicTab_visioin.width());

$("#tab_visioin li a").click(function() {
    $el_tab_visioin = $(this);
    $("#tab_visioin li a").css('color','#333');
    $el_tab_visioin.css({color:'#fff'});
    leftPos_tab_visioin = $el_tab_visioin.position().left;
    newWidth_tab_visioin = $el_tab_visioin.parent().width();
    $magicTab_visioin.stop().animate({
        left: leftPos_tab_visioin,
        width: newWidth_tab_visioin
    });
    var rel_id_visioin = $el_tab_visioin.attr('href');
    $('#tabs-container-visioin').find('.tab-content').fadeOut('fast');
    $('#tabs-container-visioin').find(rel_id_visioin).fadeIn('fast');
    return false;

}, function() {
    $magicTab_visioin.stop().animate({
        left: $magicTab_visioin.data("origLeft"),
        width: $magicTab_visioin.data("origWidth")
    });
});
/* Tab_visioin ends */

/* Tab nav starts */
var $el_tab1, leftPos_tab1, newWidth_tab1,
    $mainTab1 = $("#tab1");

$mainTab1.append("<li id='magic-tab1'></li>");
var $magicTab1 = $("#magic-tab1");

$magicTab1
    .width($(".current_tab_item1").width())
    .css("left", $(".current_tab_item1 a").position().left)
    .data("origLeft", $magicTab1.position().left)
    .data("origWidth", $magicTab1.width());

$("#tab1 li a").click(function() {
    $el_tab1 = $(this);
    $("#tab1 li a").css('color','#333');
    $el_tab1.css({color:'#fff'});
    leftPos_tab1 = $el_tab1.position().left;
    newWidth_tab1 = $el_tab1.parent().width();
    $magicTab1.stop().animate({
        left: leftPos_tab1,
        width: newWidth_tab1
    });
    var rel_id = $el_tab1.attr('href');
    $('#tabs-container1').find('.tab-content').fadeOut('fast');
    $('#tabs-container1').find(rel_id).fadeIn('fast');
    return false;

}, function() {
    $magicTab1.stop().animate({
        left: $magicTab1.data("origLeft"),
        width: $magicTab1.data("origWidth")
    });
});
/* Tab nav ends */

/* Form validation */

$("form[name='apply']").submit(function(){
    var error = true;
    var text_fields = ["fist-last-name", "practice-name", "zipcode", "city", "website-address", "email"];
    $.each(text_fields,function(key,value){
        if(!$.trim($("input[name='"+value+"']").val()) == "") {
            $("input[name='"+value+"']").css({'border-color': '#ccc'});
        }
        else{
            $("input[name='"+value+"']").css({'border-color': 'red'});
            error = false;
        }
    });
    if($("form[name='apply'] select[name='select-school']").val() == "--select--") {
        $("form[name='apply'] select[name='select-school']").css({'border-color': 'red'});
        error = false;
    }
    else {
        $("form[name='apply'] select[name='select-school']").css({'border-color': '#ccc'});
    }
    var textarea_field = ["address1"];
    $.each(textarea_field,function(key,value){
        if(!$.trim($("form[name='apply'] textarea[name='"+value+"']").val()) == "" ) {
            $("form[name='apply'] textarea[name='"+value+"']").css({'border-color': '#ccc'});
        }
        else {
            $("form[name='apply'] textarea[name='"+value+"']").css({'border-color': 'red'});
            error = false;
        }
    });
    console.log(error);
    if(error == true) {
        $.post('mail.php',$("form[name='apply']").serialize(),function(data){
            console.log(data);
        });
    }
    return error;
});

$("form[name='apply'] input[type='text'], form[name='apply'] textarea").blur(function(){
    if($.trim($(this).val()) == ""){
        $(".error-message").text($(this).attr('title'));
        $(this).css({'border-color': 'red'});
    }
    else {
        $(this).css({'border-color': '#ccc'});
        $(".error-message").text('');
    }
});
$("form[name='apply'] input[type='text'], form[name='apply'] textarea").bind("keydown",function(){
    if($.trim($(this).val()) == ""){
        $(".error-message").text($(this).attr('title'));
        $(this).css({'border-color': 'red'});
    }
    else {
        $(this).css({'border-color': '#ccc'});
    }
}); 
```

});

这个类的css如下：

```
#nav .button-style, #tab li#magic-tab, #tab1 li#magic-tab1, #tab_visioin li#magic-tab-vision,   #nav li#magic-tab-nav {
-webkit-box-shadow: 0 2px 2px rgba(0,0,0,0.3);
-moz-box-shadow: 0 2px 2px rgba(0,0,0,0.3);
box-shadow: 0 2px 2px rgba(0,0,0,0.3);
background: #3a5f72; /* Old browsers */
margin-left: -14px;
margin-right: -14px;
padding: 8px 7px;
color: #fff !important;
margin-top: 10px;
font-weight: bold; 
```

}

```
<div class="navbar-fixed-top navbar" >
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav nav-pills pull-right" id="nav">
        <li class="current_page_item" style="width: 355px;">
          <a href="#home" class="logo" style="display:block; width: 355px;">
            <img src="" class="current_page_item" width="355" alt="" />
          </a>
        </li>
        <li><a href="#vision">VISION</a></li>
        <li><a href="#services">SCHOOLS</a></li>
        <li><a href="#apply">REQUEST AN EVALUATION</a></li>
        <li><a href="#how-it-works">HOW IT WORKS</a></li>
        <li><a href="#contact-us">CONTACT US</a></li>
      </ul>
    </div>
  </div>
</div> 
```

编辑：将 JS 改回原来的 JS 编辑：添加 HTML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:56:28.367

```
$(document).ready(function() {
  $('.home','.logo').live("click",function(){
    $(window).unbind("scroll");
    window.setTimeout(function(){$(window).bind("scroll",function(){update_location();});},1500);
    $('body,html').animate({
      scrollTop: 0
  }, 800);
  return false;
});
$('#nav').onePageNav({
  scrollOffset: 40,
}); 
```

尝试一下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:15:33.013

我在我的 jQuery 就绪函数中添加了这个并且它有效。我注释掉了 update_location() 函数：

```
$('#nav li a').click(function(){
  $('#nav li a').removeClass('button-style');
  $(this).addClass('button-style');
}); 
```

# sql - SQL 与一列比较，但如果匹配则返回所有列

> ID：10477017
> 
> 赞同：1
> 
> 时间：2012-05-07T05:19:46.380
> 
> 标签：sql, sql-server, sql-server-2008

我有以下比较 sql 代码。两个表都包含一个 IDCodeField 列。如何仅比较 IDCodeField，但如果匹配 IDCodeField，则返回所有字段？

目前我在下面使用，但是，它将比较所有字段而不是仅 IDCodeField。

```
ALTER PROCEDURE [dbo].[usp_comparetables](@table1 varchar(100), 
 @table2 Varchar(100), @columnlist Varchar(1000))

AS

DECLARE @sql VARCHAR(8000)
SET @sql = 
'SELECT ''' + @table1 + ''' AS DataState, * FROM
    (SELECT ' + @columnlist + ' FROM ' + @table1 + '
        EXCEPT
    SELECT ' + @columnlist + ' FROM ' + @table2 + ') x
UNION
SELECT ''' + @table2 + ''' AS DataState, * from
    (SELECT ' + @columnlist + ' FROM ' + @table2 + '
        INTERSECT
    SELECT ' + @columnlist + ' FROM ' + @table1 +') x'

EXEC(@sql) 
```

使用答案：

```
DECLARE @sql VARCHAR(8000)
SET @sql = 
'SELECT ''' + @table1 + ''' AS DataState, '+@columnlist+' FROM ' + @table1 + ' where '+@compareparameter+' not in (select '+@compareparameter+' from '+@table2+') 
UNION ALL 
SELECT ''' + @table2 + ''' AS DataState, '+@columnlist+' FROM ' + @table2 + ' where '+@compareparameter+' not in (select '+@compareparameter+' from '+@table1+')' 
EXEC(@sql) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T05:41:39.883

我*认为*`Table1`您想要and中的所有行`Table2`，以便每个`IDCodeField`值仅出现在一个表或另一个表中。您希望排除两个表中出现相同值的行。

暂时忽略如果相同的值出现在*同一个*表中该怎么办的问题，最简单的查询是：

```
SELECT * from Table1 T1 full outer join Table2
ON T1.IDCodeField = T2.IDCodeField
WHERE T1.IDCodeField is null or T2.IDCodeField is null 
```

这将为您提供结果，但可能不是您正在寻找的格式 - 结果行将与两个表的组合一样宽，非匹配表中的列将为`NULL`.

或者，我们可以按照`UNION`您的问题的风格来做。

```
SELECT * from Table1 where IDCodeField not in (select IDCodeField from Table2)
UNION ALL
SELECT * from Table2 where IDCodeField not in (select IDCOdeField from Table1) 
```

如果相同的值仅在单个表中重复，则上述两个查询*都将*返回行。`IDCodeField`如果您希望排除这种可能性，您可以先尝试查找唯一值：

```
;With UniqueIDs as (
    SELECT IDCodeField
    FROM (
        SELECT IDCodeField from Table1
        union all
        select IDCodeField from Table2) t
    GROUP BY IDCodeField
    HAVING COUNT(*) = 1
)
SELECT * from (
    SELECT * from Table1
    union all
    select * from Table2
) t
  INNER JOIN
UniqueIDs u
  ON
    t.IDCodeField = u.IDCodeField 
```

* * *

（当然，`SELECT *`上面的所有使用都应该替换为适当的列列表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:23:39.997

```
select * from table1 t1
inner join table2 t2 on t1.IDCodeField = t2.IDCodeField 
```

# php - 无法像在推特上看到的那样发布推特状态帖子，我得到两个问号

> ID：10477024
> 
> 赞同：0
> 
> 时间：2012-05-07T05:20:21.340
> 
> 标签：php, unicode, twitter, render

我正在尝试呈现包含 unicode 的 twitter 帖子（由 iphone 生成）这是对状态的直接 api 调用： [https](https://api.twitter.com/1/statuses/show.json?id=199169641627660288&include_entities=0) ://api.twitter.com/1/statuses/show.json?id=199169641627660288&include_entities=0 它包含一个 11:11 和一个笑脸。

我无法让它在 PHP 中正确呈现，我错过了什么？我得到两个问号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:31:34.970

```
<?php header('Content-Type: text/html; charset=utf-8'); ?> 
```

将其写入顶部的文件中。

# javascript - 是否有关于让 HTML5 画布在 IE9 中工作的任何提示？

> ID：10477029
> 
> 赞同：1
> 
> 时间：2012-05-07T05:20:47.087
> 
> 标签：javascript, html, internet-explorer, canvas, internet-explorer-9

我一直在用 HTML5/Javascript 的新画布功能开发游戏，一切都很好，直到我开始在 Internet Explorer 9 上测试它。所以我会模糊地问，有没有什么技巧可以让游戏完全运行IE9？

这是我所知道的：

1）我必须包括

```
<!DOCTYPE html5> 
```

否则 IE9 无法确定我确实打算使用 HTML5，而不是旧版本。

2) 必须明确告知 IE9 在 IE9 模式下运行，而不是在 IE8 模式下运行，因为显然每个升级到 IE9 的人都打算在默认情况下以 IE8 模式运行它。

3) .ttf 文件让 IE9 不开心。这是一个问题，因为在 IE9 上工作的字体文件（即 .eof）似乎被 Firefox 和其他真正的浏览器忽略了。有什么技巧可以解决这个问题吗？

4）最后，我最大的问题是，在完成所有其他工作之后：只有一些图形被绘制到屏幕上。简而言之，游戏的“引擎”分为几个系统。一些，比如粒子（基本上，只是移动球体的集合）被绘制，而其他的，比如所有的精灵，没有被绘制，但健康条被绘制。它们都使用相同的精确绘制方法，所以我真的无法理解为什么有些工作而有些不工作。有很多东西要画，但同样，真正的浏览器处理得很好。

我知道这很模糊，但我只是希望有人对此有一些经验，可以将我链接到适当的教程，或者给我一个关于如何解决这个问题的提示。这似乎是一个独立的项目，只是为了让 IE9 运行在 Firefox、Safari、Chrome 和 Opera 上完美运行的代码。谢谢，非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:05:20.977

1.  `<!DOCTYPE html>` [只告诉浏览器使用标准模式](http://en.wikipedia.org/wiki/Document_Type_Declaration)。HTML5 被构建为在浏览器支持的情况下优雅地失败。一个示例是 datepicker 输入，它在所有浏览器（支持它的 Opera 除外）上作为文本类型输入正常失败。

    > DOCTYPE 在 HTML5 中保留为“大部分无用但必需的”标头，仅用于在普通浏览器中触发“标准模式”。

    doctype 不会告诉浏览器什么版本的 HTML。这就是 DTD 的工作。[DTD](http://en.wikipedia.org/wiki/Document_Type_Definition)只是告诉浏览器标记中的有效标记是什么。它仅用于验证以确定您使用的 HTML（HTML 或 XHTML；松散、过渡或严格）。在 HTML5 的情况下，没有 DTD，因为它没有用处。

2.  您可以使用元命令强制 IE 以最新模式或 chrome 框架呈现，但这通常是不必要的。使用 doctype 声明严格模式以及使用适当的标记就足以完成这项工作。

    ```
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    ```

3.  [Paul Irish 的防弹@fontface 语法](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)应该将您的字体置于“一体式”语法中，以便可以在所有浏览器上加载相同的代码。

4.  我不了解你，但[IE9+ 对画布有基本的支持和文本支持，](http://caniuse.com/#search=canvas)这与那个时代的浏览器相当。[IE 甚至有它自己](http://ie.microsoft.com/testdrive/)的版本 9 及更高版本的测试页面来展示他们对 HTML5 的支持。你的代码一定有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:11:53.527

@Joseph 几乎回答了你的问题。对于 IE 中的画布支持，您可以尝试[ExplorerCanvas。](http://code.google.com/p/explorercanvas/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:14:00.007

我的 IE9**已经支持**HTML5 。这是一个[例子](http://9elements.com/io/projects/html5/canvas/)。请务必在执行此操作时查看[开发人员指南。](http://msdn.microsoft.com/en-us/ie/hh410106)

# ios - 在没有导航栏的情况下进入另一个视图

> ID：10477030
> 
> 赞同：1
> 
> 时间：2012-05-07T05:20:47.960
> 
> 标签：ios, segue

我在 xcode 4.3 中使用单视图应用程序模板创建了一个新的 ios 应用程序，并为其添加了另一个视图。在第一个视图中，我将命令按钮设置为“显示第二个视图”，在第二个视图中，我添加了一个命令按钮为“显示第一个视图”。我创建了一个从第一个视图命令按钮到第二个视图的 segue（push 类型）。

当我从第一个视图中单击“显示第二个视图”按钮时，会出现第二个视图。但它提供了包含默认后退按钮的默认导航栏。我想隐藏这个导航栏并在没有标题栏的情况下以全屏显示第二个寡妇。当我在第二个视图上单击“显示第一个视图”时，我想显示第一个视图。

如何制作第二个视图但没有导航栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:30:12.510

您可以通过发送消息来隐藏导航栏 -

```
[self.navigationController setNavigationBarHidden:TRUE] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:31:36.827

modalViewController 可能更适合这种情况。

# mysql - 使用 Sphinx 提高 MySQL 的相关性分数以进行全文搜索

> ID：10477035
> 
> 赞同：1
> 
> 时间：2012-05-07T05:21:11.980
> 
> 标签：mysql, sphinx

我正在开发一个使用 MySQL 和自然语言模式的信息检索系统。我拥有的数据被注释为考虑不同的类别。例如。猴子、猫、狗将被注释为“动物”，而鸭、麻雀将被注释为“鸟”。问题是我正在根据这些标签的出现来检索文档。

现在 MySQL 有一个限制，如果某个特定术语在整个数据中超过 50%，则不考虑该术语。考虑到我的要求，我希望它对所有匹配的术语进行评分，即使特定术语在整个数据中的占比超过 50%。

我已经阅读了一些关于将 Sphinx 与 MySQL 结合以提高搜索效率的内容，但我不确定这是否适用于我的情况。

请提供此问题的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:46:17.197

Sphinx 非常擅长非常快速的全文搜索。它没有 mySQL 的 50% 规则，但您需要使用它来代替 mySQL 的全文搜索。基本上你所做的就是安装 Sphinx 并设置一个导入来将所有 mySQL 数据复制到 Sphinx 中。然后，您可以构建 SphinxSE 或直接通过库查询 Sphinx 以获取结果。然后，您可以通过查询 mySQL 来获取结果的详细信息。

我使用 SphinxSE 是因为您可以通过 mySQL 查询 Sphinx 并将您的 mySQL 表连接到单个查询中的结果。这很不错。

# windows-mobile - 为 Windows Mobile 6.5 开发插件的教程/资源

> ID：10477038
> 
> 赞同：1
> 
> 时间：2012-05-07T05:21:38.350
> 
> 标签：windows-mobile, windows-mobile-6.5

谁能指点我有关如何为 Windows Mobile 6.5 开发插件的资源、链接或教程？

需要将插件添加到 Windows Mobile 6.5 的当前“今日屏幕”（打开 PDA 时看到的滚动、快捷方式/菜单列表）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:22:47.990

对 Windows Mobile 示例的 Google 搜索得出的结果接近第 1 位：

[Windows Mobile 6.5 的代码示例](http://msdn.microsoft.com/en-us/library/bb158662.aspx)

您必须安装 Windows Mobile 6.5 SDK，但我认为这是您最好的选择。

如果您喜欢较旧的 Windows Mobile，还有一个适用于 Windows Mobile 5 的 SDK：

[Windows Mobile 5 的代码示例](http://msdn.microsoft.com/en-us/library/ms879577.aspx)

# spring-mvc - Spring MVC JDBC DataSourceTransactionManager：即使在 readonly=true 之后也提交了数据

> ID：10477039
> 
> 赞同：2
> 
> 时间：2012-05-07T05:21:54.230
> 
> 标签：spring-mvc, jdbc, transactions, autocommit

我目前正在开发一个 Spring MVC 应用程序。我已经配置了一个 JDBC TransactionManager，并且我正在使用 AOP XML 进行声明性事务管理。但是，即使我将方法配置为在只读 = true 上运行，它仍然会提交事务。

数据库：Oracle 10g

**我的数据库-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schem...ring-beans.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${driver}" />
        <property name="url" value="${url}" />
        <property name="username" value="${username}" />
        <property name="password" value="${password}" />
        <property name="defaultAutoCommit" value="false" />
    </bean>

    <bean id="txManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="mapperLocations" value="classpath:com/mybatis/mappers/*.xml" />
    </bean>

    <!--
        the transactional advice (what 'happens'; see the <aop:advisor/> bean
        below)
    -->
    <tx:advice id="txAdvice" transaction-manager="txManager">
        <!-- the transactional semantics... -->
        <tx:attributes>
            <!-- all methods starting with 'get' are read-only -->
            <tx:method name="get*" read-only="true" />
            <!-- other methods use the default transaction settings (see below) -->
            <tx:method name="*" read-only="true" rollback-for="RuntimeException"/>
        </tx:attributes>
    </tx:advice>

    <!--
        ensure that the above transactional advice runs for any execution of
        an operation defined by the FooService interface
    -->
    <aop:config>
        <aop:pointcut id="fooServiceOperation"
            expression="execution(* com.service.EmployeeService.*(..))" />
        <aop:advisor advice-ref="txAdvice" pointcut-ref="fooServiceOperation" />
    </aop:config>

</beans> 
```

**我的控制器**

```
package com.service;

import java.util.List;

import com.mybatis.dao.EmployeeMapperInterface;
import com.spring.model.Employee;

public class EmployeeService implements EmployeeBaseService{

    EmployeeMapperInterface employeeMapper;

    public EmployeeMapperInterface getEmployeeMapper() {
        return employeeMapper;
    }

    public void setEmployeeMapper(EmployeeMapperInterface employeeMapper) {
        this.employeeMapper = employeeMapper;
    }

    @Override
    public Employee getEmployeeById(long empId){
        //retrieve from database
        List empList = employeeMapper.getEmployeeWithId(empId);
        if(empList != null && empList.size()>0){
            return (Employee) empList.get(0);   
        }
        return null;

    }

      @Override
    public long saveEmployee(Employee employee){
        long empId = 0l;
        if(employee.getEmpId()==0){
            empId  = new Long( employeeMapper.insertEmployee(employee));
        }else{
             employeeMapper.updateEmployee(employee);
             empId  =  employee.getEmpId();
        }
        try {
            System.out.println("gonna sleep");
            Thread.sleep(10);

        } catch (InterruptedException e) {

            e.printStackTrace();
        }
        return empId;
    } 
```

如何防止自动提交？我还注意到，即使我不放任何事务管理代码，代码仍然会提交。请注意，事务建议是在我为 RuntimeException 放置 no-rollback-for 然后执行 1/0 时调用的，如果我放置与 rollback-for 相同的内容，它会正确提交数据并回滚。我还通过将线程置于睡眠状态来尝试查询超时，即使这样也不起作用，但我认为超时可能是针对实际查询的，所以没关系。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:05:00.497

建议`read-only`只是建议。底层事务管理系统不要求在标记某些内容时阻止写入`read-only`，更多的是作为优化提示，表示此方法是只读的，因此您不必担心它会改变事物。如果在只读事务中进行更改，一些事务管理器会抱怨，有些则不会。一般来说，`datasource`通过 JNDI 获取的 s 不会。在任何情况下，您都不应该依赖`read-only`建议来阻止将更改写回磁盘。

防止更改被持久化的选项是：

*   标记事务`rollback only`或抛出具有相同效果的异常

*   在更改之前从事务会话中分离/驱逐对象

*   克隆对象并使用克隆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:18:15.977

`DataSourceTransactionManager`以方法开始交易`doBegin`。
从此方法`DataSourceUtils.prepareConnectionForTransaction`调用。
在此方法中，您可以看到以下代码块：

```
 if (definition != null && definition.isReadOnly()) {
        try {
            if (logger.isDebugEnabled()) {
                logger.debug("Setting JDBC Connection [" + con + "] read-only");
            }
            con.setReadOnly(true);
        }
        catch (SQLException ex) { 
```

因此，您可以配置您的日志框架以将日志级别设置为 DEBUG`DataSourceUtils`类。

或者你可以在这个地方设置断点并手动调试。

* * *

根据这篇[文章](http://www.codeinstructions.com/2009/04/read-only-transactions-with-spring-and.html)，我希望这`SET TRANSACTION READ ONLY`将在您的 Oracle 连接上执行。

* * *

从[Oracle 文档](http://docs.oracle.com/cd/B10500_01/appdev.920/a96590/adg08sql.htm#2194)中，我们可以看到您在成功的情况下获得的好处：

> 默认情况下，Oracle 的一致性模型保证语句级读取一致性，但不保证事务级读取一致性（可重复读取）。如果您想要事务级别的读取一致性，并且您的事务不需要更新，那么您可以指定一个只读事务。在指示您的事务是只读的之后，您可以对任何数据库表执行任意数量的查询，因为您知道只读事务中每个查询的结果相对于单个时间点是一致的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T11:30:10.113

只读行为是严格特定于驱动程序的。Oracle 驱动程序完全忽略此标志。例如，如果在只读事务中运行，在 Oracle 中执行的相同更新语句将修改数据库，而在 HSQL2 中，我得到了数据库级别的异常。

除了通过 api 或异常显式回滚以防止在 Oracle 中提交之外，我不知道其他方法。同样，您的代码也可以在不同的驱动程序和数据库之间移植。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T04:10:06.800

答案在[Spring MVC Mybatis 事务提交上](http://forum.springsource.org/showthread.php?126145-Data-commiited-even-after-readonly-true-please-help!!&p=411771&posted=1#post411771)

还提供了详细的堆栈跟踪。总结一下，

1.  只读只是一个建议，它不能保证任何东西，我真的希望 Spring 文档能够对此进行更新。
2.  每当使用 Mybatis 在 Oracle 中执行查询时，它都会在事务的上下文中自动启动、提交（或回滚，如果引发 execption）并由 Mybatis 关闭。
3.  记录应用程序是个好主意，它帮助我了解实际事务是如何开始的等

.

# jquery - 进度条上的文字

> ID：10477044
> 
> 赞同：2
> 
> 时间：2012-05-07T05:22:43.513
> 
> 标签：jquery, progress-bar

> **可能重复：**
> [在 jQueryUI ProgressBar 中显示值](https://stackoverflow.com/questions/1476542/display-value-in-jqueryui-progressbar)

如何更改进度条上的文本。我通过以下链接但徒劳无功。

[http://docs.jquery.com/UI/Progressbar](http://docs.jquery.com/UI/Progressbar)

任何有价值的输入都是有帮助的。

# java - File.list() 以与 4.0 和 2.2 不同的顺序返回文件

> ID：10477048
> 
> 赞同：4
> 
> 时间：2012-05-07T05:22:53.027
> 
> 标签：java, android, android-webview, android-2.2-froyo, android-4.0-ice-cream-sandwich

如果我使用的是 Android 2.2 并在[BookGenerator.java](http://code.google.com/p/seniordesignp8/source/browse/trunk/Project8/src/com/project8/main/BookGenerator.java)`File.list()`中调用方法，则页面和章节的顺序完全相同，但每当我在 Android 4.0 上执行时，它都会给我反向页面列表或反向页面顺序。

2.2 和 4.0 之间是否存在兼容性问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:06:27.720

您不应该依赖 listFiles() 来获取页面的有序列表：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listFiles) ()

“无法保证结果数组中的名称字符串会以任何特定顺序出现；”

您必须根据文件名或 lastModified 或文件大小创建自己的排序系统。您可以使用 Comparator < File > 或 Comparator < String > 对 SortedSet 中的文件进行排序，或者如前所述，为实现 Comparable 的要排序的项目创建自己的类。我会建议第一个解决方案，因为将 File 或 String 类包装到另一个只是为了这个功能有点愚蠢。

一个内存开销很大的例子：

```
TreeSet<File> pages = new TreeSet<File>(new Comparator<File>(){
   public int compare(File first, File second) {
      return first.getName().compareTo(second.getName());
   }
});

for (File file : allFiles) {
   pages.add(file());
}

allFiles = pages.toArray(); 
```

如果您想要一个更有效的方法，您必须实现自己的方法来对数组进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T06:19:44.153

该`list()`方法不保证项目的任何特定顺序。Android 文档缺少这一点，但官方[Java SE API javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#list%28%29)对此提出警告：

> *无法保证*结果数组中的名称字符串会以任何特定顺序出现；特别是，它们不能保证按字母顺序出现。

[`Collections.sort()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)您应该在使用之前对数组进行排序。

```
File fChapters = new File(internalStorage + bookName + "/Chapters");
// Obtain the chapters file names list (the files in the directory)
chapters = fChapters.list();
// Sort the file names according to default alphabetic ordering
Collections.sort(chapters)
// The chapters list is now sorted from A to Z 
```

通过`sort(List list, Comparator c)`此方法的重载，您可以定义所需的任何顺序。例如，忽略标题中字母的大小写：

```
Collections.sort(chapters, new Comparator<String>() {
    @Override
    public int compare(String chapter1, String chapter2) {
        return chapter1.compareToIgnoreCase(chapter2);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:00:16.143

使用 Comparable 自行排序。

# birt - Birt Chart toolTip 在鼠标悬停时显示 2 toolTip

> ID：10477050
> 
> 赞同：1
> 
> 时间：2012-05-07T05:23:33.447
> 
> 标签：birt

我正在使用 birt 图表工具来显示图表。它工作正常。我已经为折线图设置了工具提示。它正确显示了值，但在悬停时显示 2 个弹出窗口。

是否可以设置工具提示位置。工具提示有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:25:20.317

我正在运行 BIRT 4.2.1，我的图表是 SVG 格式，没有看到问题。报告问题的人没有列出使用的 BIRT 版本。

我没有找到列出的错误

```
https://bugs.eclipse.org/bugs/buglist.cgi?query_format=specific&order=relevance%20desc&bug_status=__open__&product=BIRT&content=SVG%20tooltip&list_id=4816359 
```

大概更新您的 BIRT 版本可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:05:22.120

我也有同样的问题。我认为这只是 SVG 图表的问题。我想问题是工具提示显示为浏览器的链接。因此，当悬停标记时，SVG 内部动作侦听器会显示工具提示的 SVG 版本，并且浏览器会再次显示工具提示，因为浏览器会将其解释为带有“alt”属性的 html 链接。在另一篇文章中（对不起，不记得在哪里），有人说这个问题可以通过升级浏览器的 SVG 插件来解决，即 Adob​​e SVG 插件或类似的东西。但这很奇怪，因为它让用户可以选择，而不是在“服务器端”解决问题……显然，这应该由 BIRT 贡献者解决。

# iphone - 区分 applicationDidEnterBackground 和 applicationWillTermimate

> ID：10477053
> 
> 赞同：8
> 
> 时间：2012-05-07T05:23:53.650
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiapplicationdelegate

在我的应用程序中，当用户点击主页按钮时，我将数据保存在`NSUserDefaults`. 应用程序正在后台运行。当用户重新启动应用程序时，我使用该方法`applicationWillEnterForeground`显示保存的数据。

但是，当用户双击主页按钮并通过在应用程序上选择减号退出应用程序时，我需要在同一用户默认值中保存不同的数据。但是当我退出时`applicationWillTerminate`，有时会调用应用程序，有时不会。

那么，如何区分应用程序只是最小化还是退出呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:37:04.613

每当用户只点击一次，应用程序就会进入后台，此时**applicationDidEnterBackground**总是调用。在这种方法中，您可以临时更新/存储您的 NSUserDefaults 值。

如果万一，应用程序将再次进入前台而不使用双击终止，**applicationDidBecomeActive**将调用，您可以再次更新/删除临时存储的 NSUserDefaults 值。如果用户通过双击退出应用程序，存储的值将与 NSUserDefaults 一起保存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T05:44:26.667

关于`UIApplicationDelegate`方法之间的区别，请参考[UIApplicationDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)。`applicationDidEnterBackground:`将始终在按下主页按钮时调用。但似乎`applicationWillTerminate:`不能保证被调用。

如果您的应用程序没有在前台运行，它可以处于后台模式或挂起模式。[请参阅iOS 应用程序编程指南 - 应用程序状态和多任务处理](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)的“应用程序启动周期”部分。

当应用程序在后台运行并监视事件时，`applicationWillTerminate:`将在它终止时调用。当应用程序被暂停时，它不会。请参阅“应用程序终止”部分中的说明：

> 即使您使用 iOS SDK 4 及更高版本开发您的应用程序，**您仍然必须准备好您的应用程序在没有任何通知的情况下被终止。**用户可以使用多任务 UI 明确地终止应用程序。此外，如果内存受到限制，系统可能会从内存中删除应用程序以腾出更多空间。**暂停的应用程序不会收到终止通知，但如果您的应用程序当前在后台状态下运行（并且未暂停），系统会调用`applicationWillTerminate:`您的应用程序委托的方法。**您的应用无法通过此方法请求额外的后台执行时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:47:34.657

**applicationDidEnterBackground** - 每当用户按下**主页**按钮时，应用程序将进入后台，此时它调用 applicationDidEnterBackground 方法。每当用户通过按下 Home 按钮或切换到另一个应用程序来最小化应用程序时，都会调用它。

**applicationWillTerminate** - 仅当应用程序的进程实际被杀死时才调用。也就是说，用户使用任务切换器中的红色减号关闭按钮将其杀死，或者系统本身在后台（例如在内存不足的情况下）将其杀死。您的应用无法通过此方法请求额外的后台执行时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T06:35:37.997

applicationDidEnterBackground - 当用户通过按下主页按钮将应用程序设置为后台时，将调用此方法。

applicationWillTerminate - 当用户按下红色减号按钮退出处于后台模式的应用程序时，将调用此方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T05:36:27.747

**支持后台执行的应用程序，当用户退出应用程序时通常不会调用此方法，因为在这种情况下应用程序只是移动到后台**

如果有数据需要保存，则应在应用程序进入后台时保存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T05:37:33.327

`applicationWillTerminate`仅当应用程序的进程实际被杀死时才调用。也就是说，用户使用任务切换器中的红色减号关闭按钮将其杀死，或者系统本身在后台（例如在内存不足的情况下）将其杀死。

适合您的需求，`applicationDidEnterBackground`是首选；每当用户通过按下 Home 按钮或切换到另一个应用程序来最小化应用程序时，都会调用它。

# c# - 工作 C# 示例：在 Win7 64 位下编写和读取 NTFS 备用数据流

> ID：10477059
> 
> 赞同：7
> 
> 时间：2012-05-07T05:24:39.533
> 
> 标签：c#, winapi, alternate-data-stream

我希望能够使用备用数据流来存储我正在构建的数据库应用程序中引用的文件的一些同步信息。

然而，我在网上找到的每一种方法都以某种方式失败了。在 Win32 API 编程方面没有经验我不确定为什么会发生故障。在某些情况下，方法调用似乎成功了，只是没有创建备用流（即，我以后无法从备用文件中读取，也无法看到 AlternateStreamViewer）。在其他情况下，写入成功，但读取失败，因为调用 CreateFile() 会导致无效的 SafeFileHandle。

在这一点上，我只想找到一些工作代码。或者被告知“你不能从这里到达那里”。在这种情况下，我将使用另一种不太吸引人的选项（例如，在文件名本身中编码同步/参考信息，并希望没有人更改文件名）。

* * *

我了解我尝试了哪些方法的要求。但是有很多（我花了几个小时在这上面），而且我真的很想了解我没有尝试过的产品。

然而，你说得对，它会有所帮助，因为事实证明我使用的方法之一——下面提到的 Trinet 方法——不正确。我认为问题在于我尚未创建我试图为其保存备用流的“基础”文件。

以下是我尝试过的代码库的链接：

*   [圣克罗伊船长](http://www.dreamincode.net/forums/topic/90666-reading-and-writing-alternate-streams-in-c#/)
*   [开发转储](http://devdump.wordpress.com/2010/06/28/alternate-data-streams/)
*   [三连](http://www.codeproject.com/Articles/2670/Accessing-alternative-data-streams-of-files-on-an)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:45:39.737

我使用这个库在 Windows 7 x64 上取得了成功：

[https://github.com/hubkey/Trinet.Core.IO.Ntfs](https://github.com/hubkey/Trinet.Core.IO.Ntfs)

我找不到我的旧代码，并且我收藏的文档页面目前已关闭，因此如果您仍然遇到问题，我会在它备份时尝试发布一些代码。

编辑：显然它很简单：

```
using Trinet.Core.IO.Ntfs;

var fileInfo = new FileInfo(@"C:\path\to\file.dat");
if (AlternateDataStreamExists("MyStreamName"))
{
    var alternateStream = fileInfo.GetAlternateDataStream("MyStreamName").OpenRead();
}
else
{
    var alternateStream = fileInfo.GetAlternateDataStream("MyStreamName").OpenWrite();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-26T16:25:08.240

你也可以试试我的 Platform.VirtualFileSystem 库，它只用几行代码就支持列出、读取和写入 NTFS 备用数据流。

[https://github.com/platformdotnet/Platform.VirtualFileSystem/wiki](https://github.com/platformdotnet/Platform.VirtualFileSystem/wiki) [https://github.com/platformdotnet/Platform.VirtualFileSystem/wiki/Alternate-Data-Streams](https://github.com/platformdotnet/Platform.VirtualFileSystem/wiki/Alternate-Data-Streams)

# python - Python：尝试...除了带有通配符的异常名称？

> ID：10477066
> 
> 赞同：3
> 
> 时间：2012-05-07T05:25:49.327
> 
> 标签：python, exception-handling

我只想排除诱变剂引发的异常。但是，那里有很多可能的例外。有什么方法可以通配符（通过正则表达式/等）由except处理的异常？替代方案只是丑陋...

```
mutagen.apev2.APEBadItemError
mutagen.apev2.APENoHeaderError
mutagen.apev2.KeyError
mutagen.apev2.ValueError
mutagen.easyid3.EasyID3KeyError
mutagen.easyid3.KeyError
mutagen.easyid3.ValueError
mutagen.flac.FLACNoHeaderError
mutagen.flac.FLACVorbisError
mutagen.flac.TypeError
mutagen.id3.EnvironmentError
mutagen.id3.EOFError
mutagen.id3.ID3BadCompressedData
mutagen.id3.ID3BadUnsynchData 
```

等等：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:30:39.973

有一种不那么丑陋的方法，虽然它仍然有点痛苦，但这些模块中的每一个都实现了一个“错误”，所有相关错误都来自该“错误”。

```
# Please note, the exception class truly is lower cased as indicated
mutagen.id3.error
mutagen.flac.error
mutagen.apev2.error

# mutagen.easyid3 errors extend the mutagen.id3.error class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T05:42:52.323

这也很丑陋，但是在您需要拦截大量非常异构的异常的情况下，它可能是一个可行的选择。至少它隔离了其他地方的一长串例外情况。

```
>>> errors = {NameError:'a', ValueError:'b'}
>>> try:
...     cornucopia
... except Exception as e:
...     e_type = type(e)
...     if e_type in errors:
...         print errors[e_type]
...     else:
...         raise
... 
a 
```

显然，如果可能的话，这是要避免的；在您的特定情况下，[Bryan Moyles的解决方案可能更可取。](https://stackoverflow.com/a/10477105/577088)不过，我想我会提到它。

# silverlight - 如何在 Silverlight for WP7 中禁用按钮单击效果？

> ID：10477070
> 
> 赞同：0
> 
> 时间：2012-05-07T05:26:20.030
> 
> 标签：silverlight, windows-phone-7

我正在使用 Silverlight+XNA 创建一个 WP7 应用程序。在那里，我使用图像作为按钮（Silverlight 元素）的背景，每当我按下按钮时，都会出现白色背景。我怎样才能摆脱它？它似乎是按钮的默认属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:32:27.013

将按钮的 ClickMode 设置为 Press 将禁用效果

```
<Style TargetType="Button">
<Setter Property="ClickMode" Value="Press"/>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:26:29.700

这个问题有一些现有的线程：

1.  [检查这个](https://stackoverflow.com/questions/3476963/windows-phone-7-wp7-change-a-buttons-background-color-on-click)
2.  [或这个](https://stackoverflow.com/questions/4731858/how-to-change-color-of-button-when-clicked-in-wp7)

我按照@thongaduka 建议的方式实现了这一点。检查下面的完整实现。

```
<StackPanel Height="auto" HorizontalAlignment="Left" Margin="0,0,0,0" Name="stackPanel1" VerticalAlignment="Top" Width="auto" >
    <StackPanel.Resources>
        <Style x:Key="ButtonTemplate_ok" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00" Storyboard.TargetProperty="Background" Storyboard.TargetName="hoverbutton">
                                                <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <ImageBrush ImageSource="/StickGameSlX;component/Images/buttons/ok_pressed.png"/>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused"/>
                                    <VisualState x:Name="Unfocused"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="hoverbutton">
                                <Border.Background>
                                    <ImageBrush ImageSource="/StickGameSlX;component/Images/buttons/ok_unpressed.png"/>
                                </Border.Background>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </StackPanel.Resources>

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" >
           <Button Style="{StaticResource ButtonTemplate_ok}"  Content="OK" HorizontalAlignment="Center" Margin="546,296,198,130" Name="button1" VerticalAlignment="Center" Click="button1_Click" Width="57" Height="53" BorderBrush="White" Foreground="Black"/>       
    </Grid>
</StackPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:34:16.410

您必须为 button 创建一个样式。更改每个视觉状态的按钮属性。喜欢为不同状态设置背景图像属性，如按下、正常等。并为您的按钮应用该样式。Microsoft Expression Blend 将通过几个简单的步骤帮助您做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T06:37:12.830

您应该使用表达式混合来编辑按钮的样式。例如，当您的按钮处于按下状态时，您可以编辑背景或边框画笔。

# python - PyQt4 jpeg/jpg 不支持的图像格式

> ID：10477075
> 
> 赞同：7
> 
> 时间：2012-05-07T05:26:48.957
> 
> 标签：python, pyqt, pyqt4, jpeg

我正在尝试让 QImage（或 PyQt4 中的任何内容）在脚本中加载 jpg 文件。我还没有找到任何关于如何让它将 jpg 图像作为脚本加载的信息，很多使用 py2exe 编译但我什至无法做到这一点。

花一些时间来解决这个问题，我遵循了一些没有可用的东西。查看我的 site-packages/PyQt4/plugins/imageformats 文件夹，我有：

```
qgif4.dll, qico4.dll,qjpeg4.dll, qmng4.dll, qsvg4.dll, qtga4.dll, qtiff4.dll 
```

根据 QtGui.QImageReader.supportedImageFormats()，这是我安装的 pyqt4 可以使用的

```
[PyQt4.QtCore.QByteArray('bmp'), PyQt4.QtCore.QByteArray('pbm'), PyQt4.QtCore.QByteArray('pgm'), PyQt4.QtCore.QByteArray('png'), PyQt4.QtCore.QByteArray('ppm'), PyQt4.QtCore.QByteArray('xbm'), PyQt4.QtCore.QByteArray('xpm')] 
```

我还确保我的 qt.conf 文件位于 python 主目录中，并且它有这个

[路径]

```
Prefix = C:/Python27/Lib/site-packages/PyQt4
Binaries = C:/Python27/Lib/site-packages/PyQt4 
```

我试过添加

```
Plugins = C:/Python27/Lib/site-packages/PyQt4/plugins/imageformats
Plugins = C:/Python27/Lib/site-packages/PyQt4/plugins 
```

没有运气

我在 Windows 7 64b Home Premium 上运行 python 2.7.2，带有 PyQt4 4.9.1（均为 32b）。

我也尝试过 4.8.1 和 4.8.5 版本（我手头有），但它们都不支持 jpg。我不知所措。如何让这些恢复得到支持？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T23:24:44.770

似乎有两个不同的问题可能导致这种情况。看起来我两个都遇到了。

第一个。我以“管理员身份”运行 PyQt4 安装程序，这似乎解决了部分问题。所以它需要以管理员身份运行才能让一切正常工作。

第二。为了正确加载所有插件，必须在加载任何类型的图像之前先创建 QApplication。

所以

```
app = QtGui.QApplication(sys.argv) 
```

需要先创建。

我的脚本运行为

```
def main():
    app = QtGui.QApplication(sys.argv)
    win = window()
    win.display()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

自从我以管理员身份安装 PyQt4 以来，它没有改变，但现在可以工作并加载 jpeg 和其他所有内容。

我想做的是创建一个脚本，该脚本将由 PyQt4 应用程序调用，但它不会自行运行，因此无需先创建 QApplcation。这是我遇到问题＃2的地方

供参考：[http ://article.gmane.org/gmane.comp.python.pyqt-pykde/7176/match=jpeg+plugin+not+loading](http://article.gmane.org/gmane.comp.python.pyqt-pykde/7176/match=jpeg+plugin+not+loading)

以管理员身份安装并始终创建 QApplication，即使您不需要它。

另外，如果您只是检查空闲状态下可用的内容：

```
from PyQt4 import QtGui
QtGui.QImageReader.supportedImageFormats() 
```

不会显示所有内容，仍需要运行

```
from PyQt4 import QtGui
import sys
app = QtGui.QApplication(sys.argv)
QtGui.QImageReader.supportedImageFormats() 
```

这很烦人，所以希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T18:38:27.567

以防万一有人正在搜索加载插件，我在[这里为更合适的问题创建了一个答案，](https://stackoverflow.com/a/23525640/2070390)以允许您基本上将插件放在任何网络共享文件夹中。

In short, use `QtCore.QCoreApplication.addLibraryPath()` instead of qt.conf file.

# javascript - 如何检查该面板在 JavaScript 中是否可见？

> ID：10477080
> 
> 赞同：3
> 
> 时间：2012-05-07T05:27:31.977
> 
> 标签：javascript, asp.net

如何检查该面板在 JavaScript 中是否可见？我正在使用 ASP.NET 2.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T05:45:12.630

假设您在服务器端设置面板的可见性`document.getElementById()`，只要您确保使用面板控件的正确客户端 ID（不要对其进行硬编码），就可以检查返回的值.

请参阅客户端`findPanel()`功能中的检查以进行演示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
        function findPanel() {
            var panel = document.getElementById("<%= pnlMyPanel.ClientID %>");
            if (panel) {
                alert("Panel is visible");
            }
            else {
                alert("Panel is not visible");
            }

//        // And this would work too:
//        alert((<%= pnlMyPanel.Visible.ToString().ToLower() %>) ? "Panel is visible": "Panel is not visible");

        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Panel runat="server" ID="pnlMyPanel">
            <p>
                This is a panel.</p>
        </asp:Panel>
        <asp:Button runat="server" ID="btnToggle" Text="Toggle panel visibility..." />
        <input type="button" value="Do client-side visibility check..." onclick="javascript:findPanel();" />
    </div>
    </form>
</body>
</html> 
```

代码隐藏文件中的以下代码在`btnToggle`单击时切换面板的可见性：

```
protected void Page_Load(object sender, EventArgs e)
{
    btnToggle.Click += new EventHandler(btnToggle_Click);
}

void btnToggle_Click(object sender, EventArgs e)
{
    pnlMyPanel.Visible = !pnlMyPanel.Visible;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T05:38:51.817

如果您使用的是 jQuery - 您尝试过[`visible selector`](http://api.jquery.com/visible-selector/)吗？

例如：

```
if ($("#test").filter(":visible")​​​​​​​​.length > 0) {
    /* visible */
} else {
    /* invisible */
} 
```

**如果面板在服务器端隐藏，并且任何 jQuery（效果/过渡等）已触发并隐藏面板，这将起作用**。只是**检查`exists`或如果`getElementById`返回某些东西不会。**

请务必将客户端 ID 注入 JavaScript *，然后*检查`:visible`，这将使您的查找速度更快。A la 文档：

> 因为 :visible 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用的查询`:visible`不能利用原生 DOM`querySelectorAll()`方法提供的性能提升。要在使用`:visible`to 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用`.filter(":visible")`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T05:58:58.313

一种简单的方法是将当前可见值从 ASP.NET 直接传递给 javascript。

```
<script type="text/javascript>
   function IsPanelVisible() {
      return <%= pnlMessages.Visible.ToString().ToLower() %>
   }
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T05:30:06.307

如果该`Visible`属性为假，则根本不会发送给客户端（甚至隐藏）。ASP.NET 在服务器端运行它。因此，您可以使用 搜索它`document.getElementById(<%= panel.ClientID %>)`，如果结果为空，则它不可见。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T05:37:57.797

面板是服务器端控件。如果它的 visible 值为 true，您可以在页面源中看到具有相同 id 的 div。如果其可见值为 false，则该面板部分根本不会发送到客户端浏览器。

一种实现方法是在 javascript 中检查其 ID。在 jquery 中， if($("#mypanel").exists()) 可以检查。在javascript中，检查一下[如何检查可见DOM中是否存在元素？](https://stackoverflow.com/questions/5629684/javascript-check-if-element-exists-in-the-dom)

# sql - Oracle 'Partition By' 和 'Row_Number' 关键字

> ID：10477085
> 
> 赞同：48
> 
> 时间：2012-05-07T05:28:00.200
> 
> 标签：sql, oracle, partition, row-number, analytic-functions

我有一个由其他人编写的 SQL 查询，我正试图弄清楚它的作用。有人可以解释一下`Partition By`and`Row_Number`关键字在这里的作用，并给出一个简单的例子，以及为什么要使用它？

分区示例：

```
(SELECT cdt.*,
        ROW_NUMBER ()
        OVER (PARTITION BY cdt.country_code, cdt.account, cdt.currency
              ORDER BY cdt.country_code, cdt.account, cdt.currency)
           seq_no
   FROM CUSTOMER_DETAILS cdt); 
```

我在网上看过一些例子，它们有点太深入了。

提前致谢！

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-07T06:30:36.283

`PARTITION BY`隔离集合，这使您能够独立地在相关集合上工作（ROW_NUMBER()、COUNT()、SUM() 等）。

在您的查询中，相关集由具有相似 cdt.country_code、cdt.account、cdt.currency 的行组成。当您对这些列进行分区并在它们上应用 ROW_NUMBER 时。这些组合/集合上的其他列将从 ROW_NUMBER 接收序列号

但是该查询很有趣，如果您按一些唯一数据进行分区并且您在其上放置了 row_number，它只会产生相同的数字。就像您在保证唯一的分区上执行 ORDER BY 一样。例如，将 GUID 视为`cdt.country_code, cdt.account, cdt.currency`

`newid()`产生 GUID，那么你对这个表达式有什么期望呢？

```
select
   hi,ho,
   row_number() over(partition by newid() order by hi,ho)
from tbl; 
```

...对，所有分区（没有分区，每一行都分区在自己的行中）行的 row_numbers 都设置为 1

基本上，您应该在非唯一列上进行分区。OVER 上的 ORDER BY 需要 PARTITION BY 具有非唯一组合，否则所有 row_numbers 将变为 1

例如，这是您的数据：

```
create table tbl(hi varchar, ho varchar);

insert into tbl values
('A','X'),
('A','Y'),
('A','Z'),
('B','W'),
('B','W'),
('C','L'),
('C','L'); 
```

然后这类似于您的查询：

```
select
   hi,ho,
   row_number() over(partition by hi,ho order by hi,ho)
from tbl; 
```

那会是什么输出？

```
HI  HO  COLUMN_2
A   X   1
A   Y   1
A   Z   1
B   W   1
B   W   2
C   L   1
C   L   2 
```

你看到你的HI HO组合了吗？前三行具有唯一的组合，因此它们设置为 1，B 行具有相同的 W，因此 ROW_NUMBERS 不同，HI C 行也是如此。

现在，为什么`ORDER BY`需要那里？如果以前的开发者只是想在相似的数据上放一个row_number（例如HI B，所有数据都是BW，BW），他可以这样做：

```
select
   hi,ho,
   row_number() over(partition by hi,ho)
from tbl; 
```

但唉，Oracle（和 Sql Server 也是）不允许分区没有`ORDER BY`; 而在 Postgresql 中，`ORDER BY`PARTITION 是可选的：[http ://www.sqlfiddle.com/#!1/27821/1](http://www.sqlfiddle.com/#!1/27821/1)

```
select
   hi,ho,
   row_number() over(partition by hi,ho)
from tbl; 
```

您`ORDER BY`的分区看起来有点多余，不是因为以前的开发人员的错，某些数据库只是不允许`PARTITION`使用 no `ORDER BY`，他可能无法找到一个好的候选列进行排序。如果 PARTITION BY 列和 ORDER BY 列都相同，只需删除 ORDER BY，但由于某些数据库不允许这样做，您可以这样做：

```
SELECT cdt.*,
        ROW_NUMBER ()
        OVER (PARTITION BY cdt.country_code, cdt.account, cdt.currency
              ORDER BY newid())
           seq_no
   FROM CUSTOMER_DETAILS cdt 
```

您找不到用于对相似数据进行排序的好列？您不妨随机排序，分区数据无论如何都具有**相同的值。**例如，您可以使用 GUID（`newid()`用于 SQL Server）。所以这与以前的开发人员所做的输出相同，不幸的是某些数据库不允许`PARTITION`没有`ORDER BY`

虽然真的，它躲避了我，我找不到一个很好的理由在相同的组合上加上一个数字（BW，BW，在上面的例子中）。它给人的印象是数据库具有冗余数据。不知何故让我想起了这一点：[如何从表中的同一记录列表中获取一条唯一记录？表中没有唯一约束](https://stackoverflow.com/questions/6645746/how-to-get-one-unique-record-from-the-same-list-of-records-from-table-no-unique)

看到 PARTITION BY 具有与 ORDER BY 相同的列组合，看起来真的很神秘，不能轻易推断出代码的意图。

现场测试：[http ://www.sqlfiddle.com/#!3/27821/6](http://www.sqlfiddle.com/#!3/27821/6)

* * *

但正如 dbaseman 也注意到的那样，在同一列上进行分区和排序是没有用的。

你有一组这样的数据：

```
create table tbl(hi varchar, ho varchar);

insert into tbl values
('A','X'),
('A','X'),
('A','X'),
('B','Y'),
('B','Y'),
('C','Z'),
('C','Z'); 
```

然后你用 hi,ho 分区；然后你订购，嗨，嗬。对类似数据进行编号没有意义:-) [http://www.sqlfiddle.com/#!3/29ab8/3](http://www.sqlfiddle.com/#!3/29ab8/3)

```
select
   hi,ho,
   row_number() over(partition by hi,ho order by hi,ho) as nr
from tbl; 
```

输出：

```
HI  HO  ROW_QUERY_A
A   X   1
A   X   2
A   X   3
B   Y   1
B   Y   2
C   Z   1
C   Z   2 
```

看？为什么需要将行号放在相同的组合上？您将在三重 A、X、双 B、Y、双 C、Z 上分析什么？:-)

* * *

您只需要在非唯一列上使用 PARTITION ，然后对非唯一列的*唯一*-ing 列进行排序。示例将使其更清楚：

```
create table tbl(hi varchar, ho varchar);

insert into tbl values
('A','D'),
('A','E'),
('A','F'),
('B','F'),
('B','E'),
('C','E'),
('C','D');

select
   hi,ho,
   row_number() over(partition by hi order by ho) as nr
from tbl; 
```

`PARTITION BY hi`对非唯一列进行操作，然后在每个分区列上，您对其唯一列（ho）进行排序，`ORDER BY ho`

输出：

```
HI  HO  NR
A   D   1
A   E   2
A   F   3
B   E   1
B   F   2
C   D   1
C   E   2 
```

该数据集更有意义

现场测试：[http ://www.sqlfiddle.com/#!3/d0b44/1](http://www.sqlfiddle.com/#!3/d0b44/1)

这类似于您在 PARTITION BY 和 ORDER BY 上具有相同列的查询：

```
select
   hi,ho,
   row_number() over(partition by hi,ho order by hi,ho) as nr
from tbl; 
```

这是输出：

```
HI  HO  NR
A   D   1
A   E   1
A   F   1
B   E   1
B   F   1
C   D   1
C   E   1 
```

看？没有意义？

现场测试：[http ://www.sqlfiddle.com/#!3/d0b44/3](http://www.sqlfiddle.com/#!3/d0b44/3)

* * *

最后，这可能是正确的查询：

```
SELECT cdt.*,
     ROW_NUMBER ()
     OVER (PARTITION BY cdt.country_code, cdt.account -- removed: cdt.currency
           ORDER BY 
               -- removed: cdt.country_code, cdt.account, 
               cdt.currency) -- keep
        seq_no
FROM CUSTOMER_DETAILS cdt 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-17T18:21:35.993

我经常使用 row_number() 作为从我的选择语句中丢弃重复记录的快速方法。只需添加一个 where 子句。就像是...

```
select a,b,rn 
  from (select a, b, row_number() over (partition by a,b order by a,b) as rn           
          from table) 
 where rn=1; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-07T05:34:35.293

这将选择每个国家代码、帐户和货币的行号。因此，国家代码“US”、账户“XYZ”和货币“$USD”的行将分别获得一个从 1-n 分配的行号；结果集中这些列的所有其他组合也是如此。

这个查询有点好笑，因为**order by**子句什么都不做。每个分区中的所有行都具有相同的国家代码、帐户和货币，因此按这些列排序没有意义。因此，在此特定查询中分配的最终行号将是不可预测的。

希望有帮助...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-13T18:51:43.490

我知道这是一个旧线程，但 PARTITION 相当于 GROUP BY 而不是 ORDER BY。此函数中的 ORDER BY 是 . . . 订购。这只是一种通过添加序列号从冗余中创建唯一性的方法。或者，您可以在引用函数的别名列时通过 WHERE 子句消除其他冗余记录。但是，SELECT 语句中的 DISTINCT 在这方面可能会完成同样的事情。

# logging - 什么时候应该使用 CFTRACE 和 CFLOG？

> ID：10477087
> 
> 赞同：2
> 
> 时间：2012-05-07T05:28:52.343
> 
> 标签：logging, coldfusion

刚刚了解到`<CFTRACE>`可以通过在 CF Admin 中禁用“启用请求调试输出”来轻松关闭。

我发现这很有趣，`<CFTRACE>`考虑到“启用请求调试输出”被禁用，是否可以将标签留在生产中？

我认为`<CFLOG>`可以在某些 neo* xml 中更改日志级别，是否可以这样做`<CFTRACE>`？

一般来说，什么时候应该使用`<CFLOG>`vs `<CFTRACE>`？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:19:33.853

我相信 CFTRACE 旨在保留在生产代码中，因为只有在调试模式处于活动状态时才能启用它。在尝试捕获您似乎无法在 dev 中复制的错误之一时，能够有选择地打开它真是太好了。

我更多地使用 CFLOG 进行“实时”数据捕获。我选择性地/临时启用它以捕获与数据相关的错误，其中意外输入导致问题。我永久启用它以捕获非关键错误（如果失败而不通知用户，您希望某些内容继续处理的功能）但您希望在日志文件中捕获错误和任何有用的信息。

如果不向 Ray Camden 提供更多关于在他的开发过程中使用它的博客文章以及 serializeJSON 来捕获复杂变量，我就不能谈论 CFLOG：[Ray Camden - 另一个 CFLOG/JSON 提示](http://www.raymondcamden.com/index.cfm/2010/10/4/Another-CFLOGJSON-Tip)

# tfs - 应用 TFSConfig 修复命令后还原 TFS 2010 集合的所有安全组

> ID：10477088
> 
> 赞同：0
> 
> 时间：2012-05-07T05:29:12.670
> 
> 标签：tfs, tfs-2010

我们丢失了 TFS 和域服务器。TFS 被配置为使用域帐户。我们只能重新定位 TFS 项目集合数据库，并且由于“TFSConfig 修复”命令，我们最终将它们附加到了一个新的 TFS 实例。

但是所有修复项目的默认安全组都丢失了（管理员除外）。例如，我们不再有“贡献者”组。

现在我们要恢复这些标准组。也许可以通过在所有现有项目和集合上再次应用默认的 TFS“项目过程模板”来修复它。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:13:23.673

当您丢失域服务器时，您必须遵循“[将 Team Foundation Server 从一个环境移动到另一个环境](http://msdn.microsoft.com/en-us/library/ms404883.aspx)”过程的“**移动用户和服务帐户**”一章。

顺便说一句，没有像在现有团队项目上重新应用流程模板这样的功能。

您是否尝试过重新创建至少一个丢失的组？只知道这是否有效（也许 TFS 会返回错误，因为该组仍然存在于数据库中，但无论出于何种原因都没有显示）？

最后一件事：检查 TFS 调度程序 Windows 服务是否在 TFS 服务器上运行，并在 Windows 事件日志中查找错误。

# android - Android：接近警报后的setText

> ID：10477095
> 
> 赞同：1
> 
> 时间：2012-05-07T05:29:46.457
> 
> 标签：android, broadcastreceiver, proximity, settext

我正在开发一个应该像谷歌地图导航应用程序一样工作的移动应用程序。我从 kml 文件中获取路线信息，并在每个转折点为该位置创建接近警报。警报工作正常。每个警报都会触发一个通知。现在，我想在每个警报而不是通知之后设置我的 textView 中的文本信息。那么如何在我的地图活动中从我的广播接收器访问我的 textView。有人有想法吗？这是我的代码：

地图活动（基本部分...）

```
public class Map extends MapActivity implements OnClickListener {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.map);
    ....
    ....
    this.addProximityAlert();

}

private void addProximityAlert() {
    for (int i = 0; i < _navSet.getPlacemarks().size(); i++) {
        int uniqueID = i + 1;
        String text = _navSet.getPlacemarks().get(i).getTitle();
        setProximityAlert(_navSet.getPlacemarks().get(i).getLatitude(),
                _navSet.getPlacemarks().get(i).getLongitude(), text,
                uniqueID, i);
    }
}

private void setProximityAlert(double lat, double lon, String text,
        long uniqueID, int requestCode) {
    String intentAction = PROX_ALERT_INTENT + uniqueID; // each Intent must
                                                        // be unique
    Intent intent = new Intent(intentAction);
     // puts the text information(e.g.Turn left onto ... Road)
    intent.putExtra(ProximityIntentReceiver.TEXT_INTENT_EXTRA, text);
    PendingIntent proximityIntent = PendingIntent.getBroadcast(
            getApplicationContext(), requestCode, intent,
            PendingIntent.FLAG_CANCEL_CURRENT);

    _locationManager.addProximityAlert(
            lat, // the latitude of the central point of the alert region
            lon, // the longitude of the central point of the alert region
            POINT_RADIUS, // the radius of the central point of the alert region, in meters
            PROX_ALERT_EXPIRATION, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration
            proximityIntent // will be used to generate an Intent to fire when entry from the alert region is detected
            );

    IntentFilter filter = new IntentFilter(intentAction);
    registerReceiver(new ProximityIntentReceiver(), filter);
} 
```

还有我的类，它扩展了 BroadcastReceiver

```
public class ProximityIntentReceiver extends BroadcastReceiver {

private static final int NOTIFICATION_ID = 1000;
public static final String TEXT_INTENT_EXTRA = "text";
private TextView textView;

@Override
public void onReceive(Context context, Intent intent) {

    String text = intent.getStringExtra(TEXT_INTENT_EXTRA);
    String key = LocationManager.KEY_PROXIMITY_ENTERING;

    Boolean entering = intent.getBooleanExtra(key, false);

    if (entering) {
        Log.d(getClass().getSimpleName(), "entering");

        NotificationManager notificationManager =
            (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, null, 0);       
        Notification notification = createNotification();
        notification.setLatestEventInfo(context,
            "Alert!", text, pendingIntent);
        notificationManager.notify(NOTIFICATION_ID, notification);

        /*doesn't work: View myView = (View) findViewById(R.layout.map, null); 
        textView = (TextView) myView.findViewById(R.id.descriptionView);
        textView.setText(text); */
    }
    else {
        Log.d(getClass().getSimpleName(), "exiting");
    }
}
} 
```

我使用 getStringExtra 获取信息并可以创建新通知。现在我想将此文本信息设置到我的 MapActivity 中的文本视图中......但它不能以这种方式工作。感谢一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:34:00.197

您可以使用以下内容创建接收器：`new ProximityIntentReceiver(theTextView)`您很高兴，

```
public ProximityIntentReceiver(TextView textView) {
    this.textView = textView;
}

@Override
public void onReceive(Context context, Intent intent) {
    // ...
    if (entering) {
        // ...
        this.textView.setText(text);
    } else {
    // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T05:42:27.463

试试这个代码。这可能会帮助你

```
 setContentView(R.layout.map);
 textView = (TextView)findViewById(R.id.descriptionView);
 textView.setText(text); 
```

# iphone - UILabel 默认字距与 CATextLayer 不同

> ID：10477096
> 
> 赞同：12
> 
> 时间：2012-05-07T05:29:55.540
> 
> 标签：iphone, ios, uikit, core-text

我有一个`UILabel`字符串'LA'。我也有一个`CATextLayer`具有相同字符的 an`NSAttributedString`分配给它的`string`属性。中的字距调整`UILabel`与`CATextLayer`. 这是代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // 
    // UILabel
    //
    UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(20, 50, 280, 100)];
    label1.text = @"LA";
    label1.backgroundColor = [UIColor clearColor];
    label1.font = [UIFont fontWithName:@"Futura" size:90.0];
    [self.view addSubview:label1];

    //
    // CATextLayer
    //
    UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(20, 130, 280, 100)];
    label2.backgroundColor = [UIColor clearColor];
    CATextLayer *textLayer = [[CATextLayer alloc] init];
    textLayer.frame = label2.layer.bounds;
    textLayer.contentsScale = [[UIScreen mainScreen] scale];
    [label2.layer addSublayer:textLayer];
    NSMutableAttributedString *string = [[NSMutableAttributedString alloc] initWithString:@"LA"];
    CTFontRef aFont = CTFontCreateWithName((__bridge CFStringRef)@"Futura", 90.0, NULL);
    [string addAttribute:(NSString*)kCTFontAttributeName value:(__bridge id)aFont range:NSMakeRange(0, [string length])];
    textLayer.string = string;
    [self.view addSubview:label2];
} 
```

这是结果[的图像](http://tumtiki-github.s3.amazonaws.com/kerning.png)。

为什么这两种方法之间的字距不同，我在`CATextLayer`示例中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:36:52.230

UIKit 通常使用 WebKit 进行文本渲染（如[本崩溃日志中所示）](https://stackoverflow.com/questions/12744558/uistringdrawing-methods-dont-seem-to-be-thread-safe-in-ios-6)，很可能是出于性能原因。如果您真的需要超精度，那么可以使用一些[自定义`UILabel`重新实现](https://github.com/newsme/Core-Text-Label)`CoreText`作为其后端。

**编辑：** 从 iOS7 开始，这不再是真的，因为`UILabel`它使用 TextKit 进行渲染，它也是基于 CoreText 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T06:44:05.800

您应该将属性添加到您的 NSMutableAttributedString。

对于字距调整：

```
 CGFloat characterspacing = 10.0f;
    CFNumberRef num = CFNumberCreate(kCFAllocatorDefault,kCFNumberSInt8Type,&characterspacing);
    [string addAttribute:(id)kCTKernAttributeName value:(id)num range:NSMakeRange(0 , [string length])];
    CFRelease(num); 
```

如果还需要行距，或者设置 LineBreadMode：

```
 CTLineBreakMode linebreak = kCTLineBreakByCharWrapping;
    CTParagraphStyleSetting linebreakStyle;
    linebreakStyle.spec = kCTParagraphStyleSpecifierLineBreakMode;
    linebreakStyle.valueSize = sizeof(linebreak);
    linebreakStyle.value = &linebreak;

    CTParagraphStyleSetting lineSpaceStyle;
    CGFloat linespacing = self.linesSpacing;
    lineSpaceStyle.spec = kCTParagraphStyleSpecifierLineSpacingAdjustment;
    lineSpaceStyle.valueSize = sizeof(linespacing);
    lineSpaceStyle.value =&linespacing;
    CTParagraphStyleSetting settings[ ] ={linebreakStyle,lineSpaceStyle};
    CTParagraphStyleRef style = CTParagraphStyleCreate(settings ,2);
    [string addAttribute:(id)kCTParagraphStyleAttributeName value:(id)style range:NSMakeRange(0 , [string length])];
    CFRelease(style); 
```

最后，您可能需要计算有关您的字距、行距和 LineBreakMode 的行数（linenum）：

```
CTFramesetterRef myframesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)string);
CGMutablePathRef leftColumnPath = CGPathCreateMutable();
CGPathAddRect(leftColumnPath, NULL ,CGRectMake(0 , 0 , Lable.frame.size.width, MAXFLOAT));
CTFrameRef leftFrame = CTFramesetterCreateFrame(myframesetter,CFRangeMake(0, 0), leftColumnPath , NULL);
CFArrayRef lines = CTFrameGetLines(leftFrame);
linenum = (int)CFArrayGetCount(lines);
CFRelease(myframesetter);
CFRelease(leftFrame);
CGPathRelease(leftColumnPath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:37:22.130

与使用 UIKit 绘制字符串相比， Well`Core Text`确实不同，可能是因为它来自`Core Foundation`而不是`AppKit`or `UIKit`。我确实理解您对使用标签在字符串上完成指标的艰巨工作的要求。对我来说唯一的解决方案是匹配`UILabel`属性字符串中的字距，不幸的是我不知道确切的值，但您可以使用此属性来更改该值 `kCTKernAttributeName`。您还应该注意可能不一样的联运。
将该值强制为匹配的字距调整，您可能会有正确的行为。如果你想要相反的（匹配 CT 字距调整），你应该做一些数学运算，然后应用到标签 a`UIEdgeInset`以计算正确的标签。
希望这可以帮助。

# mysql - MySQL子查询单行列出信息

> ID：10477101
> 
> 赞同：1
> 
> 时间：2012-05-07T05:30:13.427
> 
> 标签：mysql, sql, pivot

我正在尝试查询以在一行上显示活动奖品的所有数据。例如，这是我的表的一个例子。

```
Event_id    Place    Money
101         1        120
101         2        60
101         3        30
102         1        100
102         2        50
102         3        25 
```

我想要的是结果如下所示：

```
Event_id    First    Second    Third
101         120      60        30
102         100      50        25 
```

任何帮助实现这一点将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:46:47.857

希望这可以帮助。

```
SELECT    Event_ID,
          GROUP_CONCAT(IF(place = 1, `money`, NULL)) `First`,
          GROUP_CONCAT(IF(place = 2, `money`, NULL)) `Second`,
          GROUP_CONCAT(IF(place = 3, `money`, NULL)) `Third`
FROM      tableName
GROUP BY  event_id 
```

如果您想了解有关 sql 技巧的更多信息，请访问：

[**常见但有用的 MySQL 查询**](http://www.artfulsoftware.com/infotree/queries.php)

[**在 SQLFiddle 上查看**](http://sqlfiddle.com/#!2/22dcb/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T04:23:43.877

这也适用于我

```
SELECT DISTINCT Event_id, (SELECT Money FROM PRIZE WHERE Place=1 AND Event_id=t.Event_id) AS First,
(SELECT Money  FROM PRIZE WHERE Place=2 AND Event_id=t.Event_id) AS Second,
(SELECT Money FROM PRIZE WHERE Place=3 AND Event_id=t.Event_id) AS Third
FROM PRIZE t; 
```

# css - css伪类最后一个子问题

> ID：10477110
> 
> 赞同：0
> 
> 时间：2012-05-07T05:31:05.413
> 
> 标签：css

我有网站 [http://yournextleap.com/fresher-jobs](http://yournextleap.com/fresher-jobs) 请找出最后一个具有 HTML 的 div

```
<div data-recommendation="" data-id="3790" data-guidance="" data-bucket="jobs">
<div class="inn">
/* Some code*/
</div>
</div> 
```

.inn 具有虚线底部边框，它的父 div 是动态生成的

**我想要的是：**

1.  最后一个 DIV .inn 必须有border: none;
2.  我试过了：last-child
3.  我不想使用 JS 或 Jquery

我为主 div 添加了类（暂时我删除了它）；现在只有`<div>` 它是

```
<div class="main"> 
```

就是这样，这是我的CSS

```
.main:last-child .inn{
border: none;} 
```

但它不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:43:02.100

这是我假设你有的：

```
 <div class="main">
        <div data-recommendation="" data-id="3790" data-guidance="" data-bucket="jobs">
            <div class="inn">
            /* Some code*/
            </div>
        </div>
    </div> 
```

如果是这种情况，您需要：

```
 .main div:last_child .inn {
        border:none;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:41:30.990

嘿，我已经测试并在您的 css 中进行了以下更改

```
div.hero-unit div.recommendation + div div:last-child div.inn {border:none !important;} 
```

它适用于 Firefox 和 Chrome 我正在测试相同的 IE 这仅适用于 IE 9+ 浏览器 IE 7 和 IE 8 将不支持此 CSS 选择器。

将在这里解释模式。

1.  `div.hero-unit`是选择父div
2.  `div.recommendation`就是选择里面的孩子`div.hero-unit`
3.  `+ div`将选择下一个 div
4.  `div:last-child`将选择 div 中的最后一个子元素，即我们在第 3 点中选择的子元素
5.  `div.inn`设置属性`border:none`，`!important`以便不应用其他边框，因为`border:none`将被赋予最高优先级，因为`!important`.

希望它对每次阅读都有帮助。祝你好运

# c#-4.0 - 扫描目录“User\Documents\My Music”时出现 UnauthorizedAccessException

> ID：10477113
> 
> 赞同：6
> 
> 时间：2012-05-07T05:31:22.517
> 
> 标签：c#-4.0, directory

1.  **问题：**为什么我在扫描用户的“我的文档”文件夹时收到此错误，但在扫描“我的音乐/我的图片/我的视频”目录时却没有？
2.  **次要的，** ***不太重要的问题***：有没有办法避免这种情况，而不必专门过滤掉这些文件夹，或者使用 try/catch 块？

*我更喜欢教我如何钓鱼的答案，而不仅仅是给我鱼。就在这一点上，我不确定我需要在哪里专门回答这个问题。* 我已经阅读了有关[提升权限](http://weblogs.asp.net/kennykerr/archive/2006/09/29/Windows-Vista-for-Developers-_1320_-Part-4-_1320_-User-Account-Control.aspx)和[遍历文件系统的文档](http://msdn.microsoft.com/en-us/library/bb513869.aspx)，并花了一周的时间寻找为什么我可以在“用户\我的音乐”而不是“用户\文档\我的音乐”（链接）上设置 DirectoryInfo，而只是在学习更多方面会在不同的方向上获得一点推动。

我捕获了在尝试 Directory.GetFiles('path', "*", SearchOption.AllDirectories) 时最初抛出的初始'UnauthorizedAccessException'，其中路径是用户'我的文档'。要处理异常，我知道我需要手动遍历目录。哪个有效，从子目录返回文件。

初始 GetFiles 函数的代码：

```
public static string[] GetFiles(string path)
{
    string[] files;
    try
    {
        files = Directory.GetFiles(path, "*", SearchOption.AllDirectories);
    }
    catch(UnauthorizedAccessException ex)
    { files = WalkDirectory(path); }
    return files;
}

public static string[] WalkDirectory(string path)
{
    List<string> files = new List<string>();
    DirectoryInfo dir = new DirectoryInfo(path);

    foreach (DirectoryInfo subDir in dir.GetDirectories())
    {
        try
        {
            files.AddRange(WalkDirectory(subDir.FullName));
        }
        catch(UnauthorizedAccessException ex)
        {
            // complete fail to walk directory listed
            throw ex;
        }
    }
    foreach (FileInfo file in dir.GetFiles())
    {
        files.Add(file.FullName);
    }
} 
```

这非常有效，直到代码尝试遍历隐藏文件夹：我的音乐、我的图片或我的视频。无论我如何尝试重新编码以遍历隐藏文件，我都会不断收到 UnauthorizedAccessException。

我完全理解我将围绕这个编写代码。主要是我很想知道，为什么用户文件夹下会发生异常？

我假设该文件夹是指向另一个目录的符号链接，因为我可以创建路径**?:\users directory\user\My (Music, Pictures, or Videos)**并且代码遍历这些目录然后没有任何问题。这仅在从用户我的文档中设置目录文件后尝试扫描目录文件时发生。

*   **操作系统：** Windows 7
*   **用户权限：**管理员
*   **应用程序提升为**以管理员身份运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T06:50:43.853

我正在和一个朋友谈论这个问题，他不是技术人员，但知道足够的技术来进行对话，他帮助我进一步缩小了这个问题的范围。这实际上是一个重复的问题，并在[Check if a file is real or a symbolic link](https://stackoverflow.com/questions/1485155/check-if-a-file-is-real-or-a-symbolic-link)中得到了回答。

该文件夹是一个符号链接，根据***TechRepublic 上的这篇文章，出于向后兼容的目的，该文件夹是放置在那里的：*****在Windows Vista 和 Windows 7 具有内置符号链接**第 2 段下***[对符号链接的一些常见问题的回答。](http://www.techrepublic.com/blog/window-on-windows/answers-to-some-common-questions-about-symbolic-links/3034)***

为了特别避免在 UnauthorizedAccessException 上没有 Try/Catch 块的情况下尝试扫描此目录，需要检查文件夹属性以确定相关文件夹或文件是否为符号链接。上面列出的stackoverflow问题再次回答了这个问题。

# sql-server - 创建在特定时间自动编译的索引视图

> ID：10477114
> 
> 赞同：1
> 
> 时间：2012-05-07T05:31:25.943
> 
> 标签：sql-server, sql-server-2008

在 Oracle 数据库中，可以创建可以在特定时间间隔自动刷新的物化视图。如何使用索引视图或其他技术在 SQL Server 中实现这一点？基础表非常大，基表的变化非常频繁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:35:52.760

据我了解，索引视图将始终返回当前结果。不需要计划更新，因为如果基础数据发生更改，DBMS 将自动刷新视图。

如果您不想承担维护索引视图的开销，您可以在不需要时将其删除，然后在使用它之前重新创建（例如，在每日/每周/每月报告运行之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:00:42.480

我认为这可以通过结合使用脚本和 SQL Server 代理作业来实现。一旦您编写了对索引的重新组织/重新构建操作的脚本，您就可以使用相同的脚本插入 SQL Server 代理作业以按计划运行。

另一种选择是查看数据库维护计划。根据基础表的大小，您可以尝试创建分区索引，以便索引维护变得更加容易。

# visual-studio-2010 - 解决错误 MSB8011：无法注册输出

> ID：10477117
> 
> 赞同：12
> 
> 时间：2012-05-07T05:31:42.250
> 
> 标签：visual-studio-2010, activex, openscenegraph

一个奇怪的错误：

> 错误 MSB8011：无法注册输出。请尝试启用每用户重定向或使用提升的权限从命令提示符注册组件。C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 744

尝试在 ActiveX 控件中使用 OpenSceneGraph (OSG) 时出现此错误。谷歌搜索显示了各种解决方案，这些解决方案并没有真正解决问题或找到错误的确切原因，所以我想把解决方案放在一个地方：这里。

我找到了解决方案，并将很快回答我自己的问题，以便人们在遇到相同问题时可以找到解决方案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-07T05:33:43.343

当 Visual Studio (2010) 找不到程序创建 OCX 所需的依赖 dll 文件时，会发生此错误。OCX 在项目的 Debug 目录中创建（用于 Debug 构建），并且将“工作目录”（在项目设置中）指定为依赖 DLL 所在的文件夹，这无助于 Visual Studio 定位 DLL。

现在问题是（这是解决问题令人头疼的原因）有时，如果 Visual Studio 无法创建 OCX，您将无法在 OCX 上运行 Dependency Walker。所以你永远不会发现丢失的 DLL 是问题所在。

如果您知道需要将哪些 DLL 放在 Debug 文件夹中，只需将它们放在那里，错误就会消失。如果您不知道，并且没有创建您的 OCX，请转到项目设置 > 链接器 > 常规 > 注册输出并将值设置为“否”。这将为您创建您的 OCX，但不会经历注册它的过程，这是它需要依赖 DLL 的时候。

双击 OCX 后，Dependency Walker 会向您显示丢失的带有黄色圆圈图标的 DLL，只需将这些 DLL 放在与 OCX 相同的文件夹中，您的程序就可以正常运行。就是这么简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-30T00:51:30.673

问题可能是您的项目尝试注册 COM 对象，但没有足够的权限来执行此操作。在 Windows 7 和 8 上，regsvr32 需要管理权限。

你可以做的是以下。在桌面上创建指向 C:\Windows\SysWOW64\cmd.exe（32 位控制台）的快捷方式。右键单击，属性-> 高级-> 选中以管理员身份运行。启动快捷方式，并确保弹出用户访问控制，然后单击是。从这个特殊的控制台窗口开始构建。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-18T11:18:45.567

我尝试使用以“管理员”身份运行 VS 2015，它能够解决问题

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T19:14:04.633

MSB8011 似乎是 regsvr32 遇到问题时引发的一般错误。就我而言，当每用户注册设置为“是”时，regsvr32 以代码 4 退出，但我正在构建的 DLL 没有定义 DllInstall 入口点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-27T12:52:44.893

您也可以通过 VS 2013 IDE 执行此操作，方法是从程序文件快捷方式启动此 IDE，选择 Visual Studio 2010/2013，然后右键单击并选择以管理员身份运行，在 IDE 启动后，然后打开您的解决方案文件并构建它，您将永远不会由于 regsrv32 DLL/COM 注册而出现此类错误

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-09T04:18:27.903

在`Property`页面上转到

> 配置属性->构建事件->构建后事件

您可能将其称为`/Service`. 如下所示修改选项可能会有所帮助。

**修改前：**

![修改前](../Images/a8404b7ba58bc1a92876a4a578789435.png)

**修改后：**

![修改后](../Images/583a787a791fedc197648d8219a16f7b.png)

# jasper-reports - 关于 iReport (JasperReports) 中的泰米尔语报告问题

> ID：10477119
> 
> 赞同：1
> 
> 时间：2012-05-07T05:31:58.730
> 
> 标签：jasper-reports, ireport

我正在使用*iReport Designer 4.0.1*并生成*泰米尔语*报告，而我正在生成报告时不支持大多数*泰米尔语字符。*

在报告预览中，我得到了我所期望的确切字符，但是当我将其保存为 PDF 时，我没有得到我期望的确切字符。

在我的`.jrxml`文件中，这些值是正确的，但在 pdf 中它没有显示确切的字符。

我将*Arial Unicode.TTF*用于泰米尔语字体。

我在Linux平台上工作。

请帮助我如何解决这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T11:35:15.880

例如：-

泰米尔语报告和 PDF 的解决方案

我在泰米尔语报告中使用了 LE-ET-Ramya(etramya.ttf) 泰米尔语字体

为用户泰米尔语字段 $F{TamilName} 设置 pdfFontName="etramya.ttf" 和 isPdfEmbedded ="true"

我们可以将数据存储在表格中并直接从表格中检索，并以泰米尔语的 pdf/html/ODF 文件显示报告正在工作。

pdfFontName="etramya.ttf"

[http://community.jaspersoft.com/sites/default/files/answers/tamilreports.jrxml](http://community.jaspersoft.com/sites/default/files/answers/tamilreports.jrxml) [http://community.jaspersoft.com/sites/default/files/answers/tamilreportswithparameter.jrxml](http://community.jaspersoft.com/sites/default/files/answers/tamilreportswithparameter.jrxml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T11:02:06.653

您是否使用任何可以在文本字段属性中直接引用的资源包，使用`$R{first.name}`where`first.name`是属性文件中的属性。
让我知道这是否有帮助。

另外，请检查是否创建了 unicode 字体 jar 并在 ireport 中设置了类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T11:40:53.320

**泰米尔语报告和 PDF 的解决方案**

我在泰米尔语报告中使用了 LE-ET-Ramya(etramya.ttf) 泰米尔语字体

设置`pdfFontName="etramya.ttf"`和`isPdfEmbedded ="true"`用户泰米尔语字段 $F{TamilName}

我们可以将数据存储在表格中并直接从表格中检索，并以泰米尔语的 pdf/html/ODF 文件显示报告正在工作。

在 servlet 中为特定的 jrxml 字段设置 pdffontname 和字体存储位置路径，例如：

```
pdfFontName="font/etramya.ttf" 
```

下载字体[http://www.elcot.in/tamilfonts_download_list.php](http://www.elcot.in/tamilfonts_download_list.php)

任何疑问都可以免费询问

谢谢并恭祝安康，

# php - move_uploaded_file 给出错误

> ID：10477122
> 
> 赞同：2
> 
> 时间：2012-05-07T05:32:49.777
> 
> 标签：php

**这是我的表格**

```
<form action="test.php" method="post" name="myform"> 
<table width="500" border="0">
  <tr>
    <td width="369" colspan="3">Admin's Area </td>
    <td width="121"><?php echo $_SESSION['name'];?></td>
  </tr>
  <tr>
    <td colspan="3">sponseres list </td>
    <td><a href="admin.php#sponserForm">+Add new Sponser</a></td>
  </tr>
  <tr>
    <td colspan="3"><?php echo $sponsere_list; ?></td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td align="center" colspan="4"> <a name="sponserForm" id="sponserForm"></a> Add New Sponser Form</td>
  </tr>
  <tr>
    <td align="left">Sponser name</td>
    <td align="left"><input type="text" name="spname" id="spname" tabindex="1" /></td>
    <td colspan="2" align="center">&nbsp;</td>
    </tr>
  <tr>
    <td align="left">Image</td>
    <td align="left"><input type="file" name="fileToUpload" /></td>
    <td colspan="2" align="center">&nbsp;</td>
    </tr>
  <tr>
    <td align="left">Add this</td>
    <td align="left"><input type="submit" name="sumit" id="sumit" value="Submit" tabindex="3" /></td>
    <td colspan="2" align="center">&nbsp;</td>
    </tr>
  <tr>
    <td align="center" colspan="4">&nbsp;</td>
  </tr>
</table>
</form> 
```

**这是检索它的php代码**

```
<?php 
if(isset($_POST['spname'])){
    $spname=mysql_real_escape_string($_POST['spname']);
    $user_query = "INSERT INTO `sponsers` (`spname`)
                                    VALUES ('{$spname}')
                                    ";
    $sql=mysql_query($user_query)or die (mysql_error());
    $spic= mysql_insert_id();
    $newname="$spic.jpg";
    move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],"../sponsers/$newname")or die (mysql_error());
    }
?> 
```

**当我尝试上传图像时，它给了我这个警告消息注意：未定义的索引：第 3 行 J:\xampp\htdocs\srimag\admin\test.php 中的 fileToUpload**

**所以我尝试使用 $_POST['fileToUpload'] 来回显 fileToUpload 值，它显示的值没有错误，因此无法找出错误。**

**所以请帮助我:-(** 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:35:33.207

您的主要问题是您在表单上缺少适当的`enctype`属性

```
<form ... enctype="multipart/form-data"> 
```

请务必仔细阅读手册的这一部分 - [http://php.net/manual/en/features.file-upload.php](http://php.net/manual/en/features.file-upload.php)

您的问题在[第一页提到](http://www.php.net/manual/en/features.file-upload.post-method.php)

> **笔记：**
> 
> 确保您的文件上传表单具有属性`enctype="multipart/form-data"`，否则文件上传将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T05:46:58.290

您需要`enctype="multipart/form-data"`在表单中上传图像，最好检查用户是否甚至上传图像并且命名文件的特异性`.jpg`不起作用，如果不是 jpeg，图像在输出时将被视为损坏，更不用说人了上传php文件。

您还需要对有效性进行一些其他检查，上传安全性不应被忽视，否则您有一个可怕的电话主页/僵尸网络恶意软件脚本将代码注入所有脚本：

```
<?php 
if(isset($_POST['spname'])){
    $spname=mysql_real_escape_string($_POST['spname']);
    $user_query = "INSERT INTO `sponsers` (`spname`)
                                    VALUES ('{$spname}')";
    $sql=mysql_query($user_query)or die (mysql_error());
    $spic= mysql_insert_id();

    if(isset($_FILES["fileToUpload"]["tmp_name"]) && $_FILES["fileToUpload"]["error"] ==0){
        $name    = basename($_FILES["fileToUpload"]['name']);
        $ext     = end(explode('.', $name));
        $newname = $spic.".".$ext;
        $info    = getimagesize($_FILES["fileToUpload"]['tmp_name']);

        $allowed = array('image/png','image/jpg','image/gif');
        if($info[0]>0 && $info[1] > 0 && in_array($info['mime'],$allowed)){
            move_uploaded_file($_FILES["fileToUpload"]['tmp_name'], "../sponsers/$newname");
            //done upload
        }else{
            //Not allowed, perhap notify user
        }
    }

}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:36:01.627

在表单标签中包含这个

```
enctype="multipart/form-data" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T05:36:53.140

你应该在你的表格中添加这个

```
<form action="test.php" method="post" name="myform" enctype="multipart/form-data"> 
```

# c# - 如何在 xna4.0 上播放视频（avi）？

> ID：10477124
> 
> 赞同：0
> 
> 时间：2012-05-07T05:33:33.790
> 
> 标签：c#, xna-4.0

我是 xna 的新手。我正在为 Windows pc 创建一个平台游戏，并且不知何故需要播放一个 avi 文件我怎么能在 xna 4.0 或 c# 2010 上做到这一点？有人可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:48:34.563

你可以试试这个创建视频播放器实例

```
Video video;
VideoPlayer player;
Texture2D videoTexture;

protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    spriteBatch = new SpriteBatch(GraphicsDevice);
    video = Content.Load<Video>("video");
    player = new VideoPlayer();
} 
```

这是带有更多示例的文章来源 [http://msdn.microsoft.com/en-us/library/dd904199.aspx](http://msdn.microsoft.com/en-us/library/dd904199.aspx)

这里还有几个 dll

[http://scurvymedia.codeplex.com/](http://scurvymedia.codeplex.com/)

[http://xnadsplayer.codeplex.com/](http://xnadsplayer.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:29:32.920

[这个博客](http://xna-uk.net/media/p/1973.aspx)有一些工作代码，你可以用 xna 媒体播放器下载。该项目实际上将视频放在 3d 对象上（对于您正在尝试做的事情可能有点矫枉过正），但我可以想象您可以研究执行视频播放的代码以了解它是如何工作的。项目里面有一个VideoPlayer类；也许你可以看看。

# ios - 有没有办法创建一个循环文件 存储？就像 linux 中的 syslog

> ID：10477131
> 
> 赞同：1
> 
> 时间：2012-05-07T05:34:26.453
> 
> 标签：ios, circular-buffer

在我的 iOS 应用程序中，我想存储一些从远程服务器获取的消息。但是，一旦我有 N 条消息，我想清除这些消息，而不是永远存储这些消息；即，如果我的 N 配置为 10，我想存储 10 条消息，并且在第 11 条消息到达时，我想删除第 1 条消息。

在 iOS 中有没有标准的方法来做到这一点？我还没有编写代码来保存消息，所以选择任何保存方法对我来说都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:03:40.623

我不认为有直接的前进方式。

我要做的方式是使用 SQLLite 建立一个表。有 2 列 id(int, autoincrement), value(String)。插入时，如果 max(id) >=10 删除具有 min(id) 的行并插入新值。

当然，这将在达到 MAX_INT_VALUE 后失败。因此，如果您认为您永远不会达到这个值，那么您就很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:12:31.577

将您的消息存储在一个文件中。收到消息后，将文件的消息读取到 NSMutableArray，用新消息替换最旧的消息，并用新的数组数据覆盖文件。

# php - 简单的跨浏览器，带有进度条的 jQuery/PHP 文件上传

> ID：10477135
> 
> 赞同：38
> 
> 时间：2012-05-07T05:34:48.137
> 
> 标签：php, jquery, internet-explorer, file-upload, progress-bar

我知道有几个关于此的主题，但没有一个为文件上传器脚本提供明确的解决方案：

1.  适用于 IE7+
2.  有一个进度条（在每个浏览器上）
3.  无 Flash（或后备）

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-07T05:48:21.847

您可以使用**[AlbanX](http://www.albanx.com/ajaxuploader)**的 Axuploader。它有;

*   在所有浏览器上上传多文件
*   html5 浏览器（不是 IE）上的多文件选择
*   html5浏览器上传进度信息
*   html5 浏览器上的文件大小信息
*   没有 flash，没有 Silverlight，在其他插件上，只有 JavaScript
*   支持 IE 6+、Firefox 2+、Safari 2+、Chrome 1+
*   按块上传文件，以获得更高的性能
*   不受服务器最大帖子大小和最大上传文件大小限制的影响

你也可以试试Widen**[的 Fine-Uploader](http://github.com/FineUploader/fine-uploader)**。它有;

*   FF、Chrome 和 Safari 中的多文件选择、进度条
*   在 FF、Chrome 和 Safari (OS X) 中拖放文件选择
*   可以取消上传
*   如果使用 FineUploader 或 FineUploaderBasic，则完全没有外部依赖。如果使用可选的 jQuery 包装器，当然需要 jQuery。
*   FineUploaderBasic 只需要关联的 Fine Uploader javascript 文件。所有 Fine Uploader css 和图像文件都可以省略。
*   不使用闪存
*   完全使用 HTTPS
*   在 IE7+、Firefox、Safari (OS X)、Chrome、IOS6 和各种版本的 Android 中测试。现在也支持IE10！
*   能够在文件被选中后立即上传文件，或者将它们“排队”以便稍后根据用户的请求上传
*   在上传失败时显示来自服务器的特定错误消息（将鼠标悬停在失败的上传项目上）
*   能够自动重试失败的上传
*   允许用户手动重试失败上传的选项
*   创建您自己的文件验证器和/或使用 Fine Uploader 附带的一些默认验证器
*   在上传过程的各个阶段接收回调
*   将任何参数与每个文件一起发送到服务器端。
*   通过拖放上传目录（Chrome 21+）。
*   在查询字符串或请求正文中包含参数。
*   通过 API 提交要上传的文件。
*   将文件拆分为多个请求（文件分块/分区）。
*   从以前的会话恢复失败/停止的上传
*   删除上传的文件
*   CORS 支持
*   通过 API 上传任何 Blob 对象。
*   轻松设置和执行最大项目限制。
*   通过粘贴 (Chrome) 上传图片。
*   独立的文件和文件夹拖放模块。默认集成到 FineUploader 模式。
*   在影响相关文件的回调中执行异步（非阻塞）任务
*   直接从移动设备的相机上传图像
*   检索上传文件的统计信息并接收有关状态更改的回调
*   还有很多！

或者**[jQuery-File-Upload插件](https://github.com/blueimp/jQuery-File-Upload)**（兼容IE），有；

*   多个文件上传：允许一次选择多个文件并同时上传。
*   拖放支持：允许通过将文件从桌面或文件管理器拖放到浏览器窗口来上传文件。
*   上传进度条：显示一个进度条，指示单个文件和所有上传组合的上传进度。
*   可取消上传：可以取消单个文件上传以停止上传进度。
*   可恢复上传：可以使用支持 Blob API 的浏览器恢复中止的上传。
*   分块上传：大文件可以通过支持 Blob API 的浏览器分块上传。
*   客户端图像大小调整：图像可以在客户端自动调整大小，浏览器支持所需的 JS API。
*   预览图片：使用支持所需 JS API 的浏览器，可以在上传之前显示图片文件的预览。
*   无需浏览器插件（例如 Adob​​e Flash）：该实施基于 HTML5 和 JavaScript 等开放标准，无需额外的浏览器插件。
*   旧版浏览器的优雅后备：如果支持，则通过 XMLHttpRequests 上传文件，并使用 iframe 作为旧版浏览器的后备。
*   HTML 文件上传表单后备：如果禁用 JavaScript，则显示标准 HTML 文件上传表单。
*   跨站点文件上传：支持使用跨站点 XMLHttpRequest 将文件上传到不同的域。
*   多个插件实例：允许在同一网页上使用多个插件实例。
*   可定制和可扩展：提供 API 来设置各个选项并为各种上传事件定义回调方法。
*   多部分和文件内容流上传：文件可以作为标准“多部分/表单数据”或文件内容流（HTTP PUT 文件上传）上传。
*   兼容任何服务器端应用程序平台：适用于任何支持标准 HTML 表单文件上传的服务器端平台（PHP、Python、Ruby on Rails、Java、Node.js、Go 等）。

## 参考

查看**[10 个使用 jQuery 上传 HTML5 文件的示例](http://www.freshdesignweb.com/jquery-html5-file-upload.html)**，了解一些适用于 HTML5 的出色文件上传器

此外，这里有**[10+ PHP Ajax 上传文件教程 - 免费下载](http://www.freshdesignweb.com/php-ajax-upload-file.html)**，您可以从很多上传者中进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:21:34.357

我认为以下是您需要的东西，它们还支持通过 Flash 组件在 IE 中进行进度上传

*   [http://yuilibrary.com/yui/docs/uploader/](http://yuilibrary.com/yui/docs/uploader/)
*   [http://www.plupload.com/documentation.php](http://www.plupload.com/documentation.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:40:25.500

用这个：

**[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)**

没有 Flash，简单的 Jquery。

**特征**

> 1.  FF、Chrome、Safari 中的多文件选择、进度条
> 2.  FF、Chrome中的拖放文件选择
> 3.  上传是可以取消的
> 4.  没有外部依赖
> 5.  不使用 Flash
> 6.  完全使用 https
> 7.  FF、Chrome、Safari 中的键盘支持
> 8.  在 IE7,8 中测试；火狐 3,3.6,4; 野生动物园4,5; 铬合金; 歌剧10.60；

**混帐：[https ://github.com/valums/file-uploader](https://github.com/valums/file-uploader)**

**您还可以使用这些：**

**[http://nixboxdesigns.com/demos/jquery-uploadprogress.php](http://nixboxdesigns.com/demos/jquery-uploadprogress.php)**

**[https://github.com/drogus/jquery-upload-progress](https://github.com/drogus/jquery-upload-progress)**

**[http://www.albanx.com/](http://www.albanx.com/)**

**无 Flash IE 进度条**

**[http://www.webappers.com/2011/01/24/jquery-file-upload-with-upload-progress-bar/](http://www.webappers.com/2011/01/24/jquery-file-upload-with-upload-progress-bar/)**

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:26:01.683

[http://www.plupload.com/](http://www.plupload.com/)可在多个运行时使用并具有优雅降级。如果支持 HTML5，它还可以进行拖放上传。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-14T23:01:44.983

要在 IE 中支持进度条和多文件上传，需要 Flash。不幸的是，没有一个新的“华丽但无闪光”的小部件支持这一点。

我找到的唯一解决方案是[Uploadify](http://www.uploadify.com/)，它并不完美，但可以完成工作。最大的缺点是缺乏拖放支持。

坦率地说，所有这些新的小部件都好得多，但遗憾的是，开发人员似乎反对在 Flash 中为 IE 实施后备解决方案。

# php - 我如何知道我的系统上可用的 SQLITE 驱动程序版本？

> ID：10477141
> 
> 赞同：1
> 
> 时间：2012-05-07T05:35:54.653
> 
> 标签：php, sqlite, pdo

我正在使用`print_r(PDO::getAvailableDrivers());`它给我这个输出：

```
Array ( [0] => mysql [1] => sqlite ) 
```

但我想知道我的系统上安装了什么版本的 SQLITE？

# asp.net - ASP.NET - 更新 XAML 源后元素在设计视图中消失

> ID：10477144
> 
> 赞同：0
> 
> 时间：2012-05-07T05:36:07.573
> 
> 标签：asp.net

我认为这是 Visual Studio 中的一个错误，但我会再次尝试找到解决方案的机会。我最近遇到了一个问题，我的表单元素在编辑 XAML 源后变得不可见。假设我想将列表项添加到下拉列表中。如果我在设计视图中直观地执行此操作，则没有问题，但如果我直接在 XML 源中更改它，则其中一个 div 中的所有元素都会消失，并且我得到“创建控件时出错未知服务标签 'uc1:DatePicker'”。（Datepicker 是我的用户控件，我对此感到很头疼。）。但是我可以在源代码中看到它们。每次我触摸源时，我都必须关闭并重新打开 aspx 页面。

# android - 如何获取 google api 的访问令牌。在 android 中使用 OAuth 2.0 进行身份验证

> ID：10477147
> 
> 赞同：1
> 
> 时间：2012-05-07T05:36:32.150
> 
> 标签：android, authentication, oauth-2.0, google-reader

我正在尝试获取 google 帐户的访问令牌以访问 android 4.0.4 中的 google reader 数据。使用 google api java 客户端 1.8.0 beta。

示例代码显示错误“GoogleAccountManager 类型的方法 getAccountManager() 未定义”。

[https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:13:45.347

我有同样的问题。似乎为 Tasks API 演示安装所有必需的库对于新版本和不存在的东西来说是一项艰巨的任务。最终会用“尽你所能”填充资产文件夹，以使其正常工作。本案的罪魁祸首是`google-api-client-googleapis-extensions-android2-1.4.1-beta.jar`。这个版本似乎有一个`GoogleAccountManager`不支持的对象`getAccountManager()`。

我的解决方案是简单地从我的项目的资产文件夹中删除`google-api-client-googleapis-extensions-android2-1.4.1-beta.jar`。这使问题消失了。它会抱怨你的项目引用了这个文件，但不管怎样，你可能已经安装了正确的库。如果您的项目现在进入属性时出现错误，则该文件可能仍会在那里被引用。只需删除该引用即可。

编辑：毕竟它仍然没有工作，虽然那个错误消失了。我现在在这里：[http](http://samples.google-api-java-client.googlecode.com/hg/tasks-android-sample/instructions.html) ://samples.google-api-java-client.googlecode.com/hg/tasks-android-sample/instructions.html我做了 hg 位，整个项目似乎都依赖于我工作站，包括所有正确的库。但现在它给出了：

> 06-18 22:09:48.706：E/TasksSample（19971）：空
> 
> 06-18 22:09:48.706：E/TasksSample（19971）：java.io.IOException
> 
> 06-18 22:09:48.706: E/TasksSample(19971): 在 android.accounts.AccountManager.convertErrorToException(AccountManager.java:1418)
> 
> 06-18 22:09:48.706: E/TasksSample(19971): 在 android.accounts.AccountManager.access$400(AccountManager.java:134)
> 
> 06-18 22:09:48.706: E/TasksSample(19971): 在 android.accounts.AccountManager$AmsTask$Response.onError(AccountManager.java:1279)
> 
> 06-18 22:09:48.706: E/TasksSample(19971): 在 android.accounts.IAccountManagerResponse$Stub.onTransact(IAccountManagerResponse.java:69)
> 
> 06-18 22:09:48.706: E/TasksSample(19971): 在 android.os.Binder.execTransact(Binder.java:288)
> 
> 06-18 22:09:48.706: E/TasksSample(19971): at dalvik.system.NativeStart.run(Native Method)

# ruby - 确定 CPU、RAM 或硬盘驱动器是否是 Ruby 脚本的瓶颈

> ID：10477152
> 
> 赞同：1
> 
> 时间：2012-05-07T05:36:55.453
> 
> 标签：ruby, performance

我计划很快购买新的 Mac 桌面，我想知道 CPU、RAM 还是我的硬盘驱动器是我的脚本的瓶颈。

我在 Ubuntu 12.04 上使用 Ruby 1.9.3 运行了我的主要单元测试，并获得了以下信息：

```
$ date; /usr/bin/time --verbose ruby1.9.1 test/test_all.rb ; date
Mon May  7 15:04:38 EST 2012
Run options: 

# Running tests:

[snip 705 dots]

Finished tests in 50.672999s, 13.9127 tests/s, 49.1781 assertions/s.

705 tests, 2492 assertions, 0 failures, 0 errors, 0 skips
    Command being timed: "ruby1.9.1 test/test_all.rb"
    User time (seconds): 29.25
    System time (seconds): 5.26
    Percent of CPU this job got: 67%
    Elapsed (wall clock) time (h:mm:ss or m:ss): 0:51.01
    Average shared text size (kbytes): 0
    Average unshared data size (kbytes): 0
    Average stack size (kbytes): 0
    Average total size (kbytes): 0
    Maximum resident set size (kbytes): 238592
    Average resident set size (kbytes): 0
    Major (requiring I/O) page faults: 0
    Minor (reclaiming a frame) page faults: 4180160
    Voluntary context switches: 31187
    Involuntary context switches: 12397
    Swaps: 0
    File system inputs: 0
    File system outputs: 224
    Socket messages sent: 0
    Socket messages received: 0
    Signals delivered: 0
    Page size (bytes): 4096
    Exit status: 0
Mon May  7 15:05:29 EST 2012 
```

由于用户加系统所花费的时间少于挂墙时间，我认为 CPU 不是唯一的瓶颈。我怎样才能弄清楚还有什么瓶颈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:50:48.447

[您可以使用valgrind 的](http://www.valgrind.org/)cachegrind 工具来分析您的程序的内存性能（即它如何利用缓存） 。

```
$ valgrind --tool=cachegrind ruby ./hello.rb
==7082== Cachegrind, a cache and branch-prediction profiler.
==7082== Copyright (C) 2002-2008, and GNU GPL'd, by Nicholas Nethercote et al.
==7082== Using LibVEX rev 1884, a library for dynamic binary translation.
==7082== Copyright (C) 2004-2008, and GNU GPL'd, by OpenWorks LLP.
==7082== Using valgrind-3.4.1-Debian, a dynamic binary instrumentation framework.
==7082== Copyright (C) 2000-2008, and GNU GPL'd, by Julian Seward et al.
==7082== For more details, rerun with: -v
==7082== 
hello world
==7082== 
==7082== I   refs:      14,529,000
==7082== I1  misses:        24,856
==7082== L2i misses:         6,707
==7082== I1  miss rate:       0.17%
==7082== L2i miss rate:       0.04%
==7082== 
==7082== D   refs:       7,110,663  (4,572,482 rd   + 2,538,181 wr)
==7082== D1  misses:        48,207  (   33,427 rd   +    14,780 wr)
==7082== L2d misses:        16,350  (    3,821 rd   +    12,529 wr)
==7082== D1  miss rate:        0.6% (      0.7%     +       0.5%  )
==7082== L2d miss rate:        0.2% (      0.0%     +       0.4%  )
==7082== 
==7082== L2 refs:           73,063  (   58,283 rd   +    14,780 wr)
==7082== L2 misses:         23,057  (   10,528 rd   +    12,529 wr)
==7082== L2 miss rate:         0.1% (      0.0%     +       0.4%  ) 
```

关于磁盘性能，我相信没有磁盘/io 使用的程序几乎可以完全在用户时间内运行，这让我相信您的硬盘驱动器可能至少是您的瓶颈之一。也许有人可以推荐一个好的工具来分析程序的磁盘使用情况？

# linq-to-sql - 如何在 linq to sql 中检查以下场景？

> ID：10477157
> 
> 赞同：0
> 
> 时间：2012-05-07T05:37:16.980
> 
> 标签：linq-to-sql

**用户：**

```
userid   username               password
1        venkat reddy           sa
2        reddy                  as
3        re                     sa 
```

**地点：**

```
id  userid             lat           lon
1     1                14.00       15.00
2     2                15.00       17.23
3     3                15.00       17.23 
```

**朋友们：**

```
id    userid      friendid            isActive
1      1            2                   true
1      2           1                    true 
```

我需要查询是否通过`userid=1`and `username=re`，然后我需要获取所有以开头的行`re`，如果该用户已经是该用户的好友，则`userid`给出状态消息`already friend`，例如他的用户名和用户 ID。如果用户现在还不是朋友，那么请提供他的详细信息，例如用户名和用户 ID。

请告诉我 ....

例如：userid =1 用户名=re

然后我需要像这样的输出

```
 <OutputResponse>
    <Response>
      <userid>2</userid>
      <username>reddy</username>
      <lat>15.00</lat>
      <lon>17.23</lon>
      <status>already friend</status>
    </Response>
    <Response>
      <userid>3</userid>
      <username>re</username>
      <lat>15.00</lat>
      <lon>17.23</lon>
      <status>not a friend as of now</status>
    </Response>
 </OutputResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:41:42.950

你可以从这样的事情开始......

```
int userid=1;
string username="re";

var result=(from q in Users
                join qq in Location on q.id equals qq.userid
            where q.Username.StartsWith(username)       
             select new
            {
               userid=q.Id,
               username=q.Username,
               lat=l.lat,
               lon=l.lon,
               status=Friends.Where(z=>z.Friendid==q.Id&&z.Userid==userid).Count()>0?"already friend":"not a friend as of now"

            }); 
```

# ios - ViewController 是否也应该处理视图子视图的操作？

> ID：10477158
> 
> 赞同：1
> 
> 时间：2012-05-07T05:37:18.633
> 
> 标签：ios, model-view-controller

在我的项目中，我倾向于在我的视图中添加一个 tableView、moviePlayer 和几个子视图。子视图中按钮的所有 IBActions 以及它成为其中 tableView 的数据源和委托。

因此，ViewController 已成为一个非常大的类。

我的子视图应该有不同的控制器吗？那么我如何在这些子控制器和我的视图控制器之间进行通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:52:00.463

好吧，如果您在一个屏幕上有不同类型的逻辑，您实际上应该将它们分配给具有自己 nib 文件的不同 UIViewController。要与他们交流，您可以使用 NSNotifications：在 IBActions 上推送通知并在您的子视图控制器中捕获它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:40:20.720

并不真地。视图控制器是闪亮的 Cocoa 应用程序的核心，根据 Apple 的文档，它们是实现胶水代码的首选方式。在这种简单的情况下不需要更多的层。

# php - MySQL 查询网页显示中的 mysql_numrows() 错误

> ID：10477159
> 
> 赞同：0
> 
> 时间：2012-05-07T05:37:20.677
> 
> 标签：php, mysql, apache, mysql-num-rows

我正在编写一个网页，该网页从满足条件的数据库中选择某些字段。建立了与数据库的连接，但表中只显示标题。在我看到的 Apache2 日志中

```
[Mon May 07 01:30:21 2012] [error] [client MyIP] PHP Notice:  Use of undefined constant localhost - assumed 'localhost' in /var/www/medical.php on line 3
[Mon May 07 01:30:21 2012] [error] [client MyIP] PHP Warning:  mysql_numrows() expects parameter 1 to be resource, boolean given in /var/www/medical.php on line 7 
```

这是我正在使用的代码：

```
<?php 
include ("/var/www/medicalalerts-config.inc.php");
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die("Unable to select database");
$query = "SELECT * FROM `1213-rep` WHERE medicalAlert <> \'\' and medicalAlert IS NOT NULL ORDER BY lastName, grade";
$result=mysql_query($query);
$num=mysql_numrows($result);

mysql_close();
?>
<!--Results Table-->
<table border="1" align="center" cellspacing="2" cellpadding="2">
<tr>
<th><font face="Arial, Helvetica, sans-serif" >Name</font></th>
<th><font face="Arial, Helvetica, sans-serif" >Grade</font></th>
<th><font face="Arial, Helvetica, sans-serif" >Medical Alert</font></th>
<th><font face="Arial, Helvetica, sans-serif" >Parent 1 Name</font></th>
<th><font face="Arial, Helvetica, sans-serif" >Parent 1 Phone</font></th>
<th><font face="Arial, Helvetica, sans-serif" >Parent 2 Name</font></th>
<th><font face="Arial, Helvetica, sans-serif" >Parent 2 Phone</font></th>
</tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"firstName");
$f2=mysql_result($result,$i,"lastName");
$f3=mysql_result($result,$i,"grade");
$f4=mysql_result($result,$i,"medicalAlert");
$f6=mysql_result($result,$i,"parent1Name");
$f7=mysql_result($result,$i,"parent1Phone");
$f8=mysql_result($result,$i,"parent2Name");
$f9=mysql_result($result,$i,"parent2Phone");

?>

<tr>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f1; echo $f2;?> </font></td>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f5; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f6; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f7; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif" ><?php echo $f8; ?></font></td>
</tr>

<?php
$i++;
}
?>
</table> 
```

我需要做什么来修复它？

--更新 1:51 AM - 我在代码中添加了`$error_msg = mysql_error();`和`<?php echo $error_msg ?>`，现在我得到了`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\'\' and medicalAlert IS NOT NULL ORDER BY lastName, grade' at line 1` 我需要在查询中更改什么？

——凌晨 1 点 54 分更新——我修好了。PHPMyAdmin 添加了我不需要的额外反斜杠。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:40:25.477

试试这个

```
mysql_connect('localhost',$username,$password);
$num=mysql_num_rows($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:45:46.870

用这个：

```
$username = 'root';
$password = 'root';
mysql_connect('localhost',$username,$password); 
```

**该错误是由于您没有关闭`localhost`引号引起的，即`'localhost'`...**

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:29:13.467

用这个

mysql_connect("localhost",$username,$password);

并且您的查询中有语法错误，首先在 mysql 中运行该查询，然后在代码中使用它。谢谢

# c# - C#代码自动测试

> ID：10477160
> 
> 赞同：0
> 
> 时间：2012-05-07T05:37:22.773
> 
> 标签：c#, .net, visual-studio-2010, nunit

我的一位从事 Java 工作的同事为他的开发编写测试用例。当他重建时，他的所有测试用例都将在他的代码上执行，结果要么失败，要么通过。

我在.NET 中工作，我想为我的应用程序（TDD）做类似的方法。它将执行我的代码的自动测试。

为窗口服务编写测试用例的最佳方法是什么。我们有VS2010测试，Nunit和CSUnit？

谁能举个例子，因为我以前从未这样做过？

我正在获取一些服务中的 WMI 数据并执行一些休息调用，这些操作的测试用例是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:36:42.680

网络上有很多关于单元测试框架的讨论。似乎这取决于个人品味以及您需要完成的工作。框架之间的功能通常非常相似。这里有几个关于比较可用单元测试框架的链接。

*   [单元测试框架 - 什么是关键功能](https://stackoverflow.com/questions/1289103/unit-testing-frameworks-what-are-the-key-features)
*   [.NET 单元测试包？](https://stackoverflow.com/questions/1760/net-unit-testing-packages)
*   [NUnit 与 Visual Studio 2008 的单元测试测试项目？](https://stackoverflow.com/questions/92869/nunit-vs-visual-studio-2008s-test-projects-for-unit-testing)

我个人推荐 NUnit。它已经存在了很长时间，并且非常成熟。而且它是免费的！您可以在项目的[主页](http://www.nunit.org)上找到详细的文档。[这](http://www.nunit.org/index.php?p=quickStart&r=2.5.10)是一篇快速入门文章。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T06:12:08.273

对正在运行的 Windows 服务进行测试可能不是一个好主意，因为那将是一个集成测试……这包括：服务是否以正确的权限运行，部署是否完成等。

最好通过引用测试框架中的 DLL 来直接测试 Windows 服务类的功能。

因此，无论您使用 NUnit、Visual Studio 测试还是其他任何工具都没有关系。这取决于你的喜好。

# javascript - 如何从 java 脚本调用我的 Web 服务的特定方法？

> ID：10477163
> 
> 赞同：0
> 
> 时间：2012-05-07T05:37:45.003
> 
> 标签：javascript, web-services

我正在尝试使用 java 脚本从我的纯 HTML 页面调用 Web 服务。我已经成功地在 net beans 上使用 java 创建了一个 web 服务。现在我想使用 java 脚本从该 Web 服务调用一个方法，并将一些参数发送到 Web 服务，到目前为止我已经尝试过但还没有成功。我已经使用 jsp 页面成功调用了该方法，但我需要使用简单的 html 页面来完成。

[我在这里](https://stackoverflow.com/questions/861784/how-to-call-a-web-service-from-jquery)看到了一个例子，但它不适用于我。:(

你能给我一些例子吗，这样我就知道如何从java脚本调用我的web服务的特定方法，并将一些参数发送到web服务。

提前致谢。

编辑

我的脚本

```
 function validateForm(frm)
{ 
document.forms[0].action="http://localhost:8084/Web_Service_Example/CircleFunctions?"
document.forms[0].method="post"
document.forms[0].submit()
} 
```

我的 CircleFunctions 方法

```
public class CircleFunctions {
public int sum()

{
    int a = 20;
    int b = 40;

    int c = a+b;

    return c;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:41:13.387

```
document.forms[0].action="http://localhost:8080/webservice/services/add"
document.forms[0].method="get"
document.forms[0].submit() 
```

# javascript - 如何在 Titanium Appcelerator 中创建圆形进度条？

> ID：10477165
> 
> 赞同：2
> 
> 时间：2012-05-07T05:38:03.033
> 
> 标签：javascript, titanium-mobile

我正在使用 Titanium Appcelerator，在应用程序中创建循环进度条时需要帮助。谁能解释我圆形进度条的工作原理以及进度如何以圆形方式填充在圆圈内..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-31T22:40:56.010

**请立即使用此合金小部件：** [https ://github.com/manumaticx/circularprogress](https://github.com/manumaticx/circularprogress)

* * *

**原始答案**

我知道这有点晚了，但我在工作了大约一天后发现了这一点。

*   我没有在安卓上测试过
*   这不是动画，因为我不需要它来满足我的需要。要使其动画化，请查看函数 layer3.transform = Ti.UI.create2DMatrix().rotate(angle); 中的倒数第二行 您应该能够为旋转角度设置动画。

var win = Ti.UI.createWindow({ width:'100%', height:'100%' }); 赢.open();

```
function circularProgressBar(options)
{
    var opts = options;
    if (opts.percent == null || opts.percent > 1 || opts.percent < 0) opts.percent = 1;
    if (opts.size == null) opts.size = 46;
    if (opts.margin == null) opts.margin = 4;
    if (opts.backgroundColor == null) opts.backgroundColor = '#fff';
    if (opts.progressColor == null) opts.progressColor = '#4ba818';
    if (opts.topper == null) opts.topper = {};
    if (opts.topper.color == null) opts.topper.color = '#fff';
    if (opts.topper.size == null) opts.topper.size = 36;
    if (opts.font == null) opts.font = {};
    if (opts.font.visible == null) opts.font.visible = true;
    if (opts.font.size == null) opts.font.size = 12;
    if (opts.font.color == null) opts.font.color = '#900';
    if (opts.font.shadowColor == null) opts.font.shadowColor = '#aaa';
    if (opts.font.shadowRadius == null) opts.font.shadowRadius = 1;
    if (opts.font.shadowOffset == null) opts.font.shadowOffset = {};
    if (opts.font.shadowOffset.x == null) opts.font.shadowOffset.x = 0;
    if (opts.font.shadowOffset.y == null) opts.font.shadowOffset.y = 1;

    var mainHolder = Ti.UI.createView({
        left: options.left,
        right: options.right,
        top: options.top,
        bottom: options.bottom,
        width: opts.size + opts.margin,
        height: opts.size + opts.margin,
        borderRadius: (opts.size + opts.margin) / 2,
        backgroundColor: opts.backgroundColor
    });

    var holder = Ti.UI.createView({
        width: opts.size,
        height: opts.size,
        borderRadius: opts.size / 2
    });

    var layer1 = Ti.UI.createView({
        width: opts.size,
        height: opts.size,
        borderRadius: opts.size / 2,
        backgroundColor: opts.progressColor
    });

    var layer2 = Ti.UI.createView({
        left: 0,
        width: opts.size / 2,
        height: opts.size,
        anchorPoint: {
            x: 1,
            y: 0.5
        },
        backgroundColor: opts.backgroundColor
    });

    var layer3 = Ti.UI.createView({
        right: 0,
        width: opts.size / 2,
        height: opts.size,
        anchorPoint: {
            x: 0,
            y: 0.5
        },
        backgroundColor: opts.backgroundColor
    });

    var layer4 = Ti.UI.createView({
        right: 0,
        width: opts.size / 2,
        height: opts.size,
        anchorPoint: {
            x: 0,
            y: 0.5
        },
        backgroundColor: opts.progressColor
    });

    var topper = Ti.UI.createView({
        width: opts.topper.size,
        height: opts.topper.size,
        borderRadius: opts.topper.size / 2,
        backgroundColor: opts.topper.color
    });

    var percentText = Ti.UI.createLabel({
        visible: opts.font.visible,
        width: Ti.UI.SIZE,
        height: Ti.UI.SIZE,
        color: opts.font.color,
        font: {
            fontSize:opts.font.size
        },
        shadowColor: opts.font.shadowColor,
        shadowRadius: opts.font.shadowRadius,
        shadowOffset: {
            x: opts.font.shadowOffset.x,
            y: opts.font.shadowOffset.y
        },
        textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER,
        text: (opts.percent * 100) + '%'
    });

    mainHolder.add(holder);
    topper.add(percentText);    
    holder.add(layer1);
    holder.add(layer2);
    holder.add(layer3);
    holder.add(layer4);
    holder.add(topper);

    var percent = opts.percent;
    var angle = 360 * percent;
    layer2.visible = (angle > 180) ? false : true;
    layer4.visible = (angle > 180) ? true : false;
    layer3.transform = Ti.UI.create2DMatrix().rotate(angle);
    return mainHolder;  
}

/* Circular Progress Bar Options

 percent: A value between 0 and 1
 size: The size of the circular progress bar
 margin: The margin of the circular progress bar
 backgroundColor: The backgroundColor of the circular area
 progressColor: The backgroundColor of the progress bar
 --
 topper.color: The center circle color
 topper.size: The size of the center circle
 ---
 font.visible: Boolean to display the font or not
 font.color: The font color
 font.size: The fontSize
 font.shadowColor: The font shadow color
 font.shadowRadius: The font shadow radius
 font.shadowOffset.x: The x value of the shadow shadowOffset
 font.shadowOffset.y: The y value of the shadow shadowOffset

 */
var circleProgress1 = circularProgressBar({
    top:50,
    percent:0.35,
    size:46,
    margin:4,
    backgroundColor:'#fff',
    progressColor:'#4ba818',
    topper: {
        color:'#fff',
        size: 36
    },
    font: {
        visible: true,
        color: '#900',
        size: 12,
        shadowColor: '#aaa',
        shadowRadius: 1,
        shadowOffset: {
            x: 0,
            y: 1
        }
    }
});
win.add(circleProgress1); 
```

所有这些 ^^^ 创造了这个：

![钛圆形进度条](../Images/3f7ebca7ec4e0675167b1b8344c3c062.png)

编辑：我用来创建这个的方法来自马尔科姆从这个线程的想法：[https ://developer.appcelerator.com/question/154274/is-there-a-way-to-create-circular-progress-bar](https://developer.appcelerator.com/question/154274/is-there-a-way-to-create-circular-progress-bar)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-07T17:27:38.657

这根本不是一个进度条——它是一个“活动指示器”。

它不像进度条那样显示真正的进度。使用进度条，您可以设置进度值（例如 0-100%）。这只会“旋转”让用户知道他们需要等待。

要创建活动指示器，请参见此处：[http ://docs.appcelerator.com/titanium/2.0/#!/api/Titanium.UI.ActivityIndi​​cator](http://docs.appcelerator.com/titanium/2.0/#!/api/Titanium.UI.ActivityIndicator)

快速示例：

```
var activityView = Ti.UI.createView({visible: false});
var activityIndicator = Ti.UI.createActivityIndicator({
  message: 'Loading...',
  height:'auto',
  width:'auto'
});
activityView.add(activityIndicator);
activityView.show(); 
```

这个例子可以工作，但它没有样式。我会让你决定你想要它的外观。如果您希望它看起来像您发布的图像，请查看 view 属性上的 backgroundColor、borderRadius 和透明度。

# tridion - 内容搬运工发生的问题

> ID：10477173
> 
> 赞同：3
> 
> 时间：2012-05-07T05:39:11.383
> 
> 标签：tridion, tridion2009

我在从 DEV 到 QA 进行内容搬运时遇到错误。**此位置中已存在标题为“Segments”的项目**。给出一些解决的建议。它发生在启用了受众管理器的那些出版物中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:48:31.877

您的问题很可能与内容搬运工无关。我们最近遇到了类似的问题，并且能够在 Tridion 客户支持的帮助下解决。

您可以从 Tridion GUI 浏览出版物吗？在我们的例子中，当我们浏览出版物时，我们收到了类似的错误消息。

请查看[无法打开出版物 - 标题为“Segments”的项目已存在](https://stackoverflow.com/questions/10402198/unable-to-open-publications-an-item-with-the-title-segments-already-exists)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T08:27:44.827

听起来像是 Audience Manager 中的一个已知错误，遗憾的是到目前为止无法重现，因此还没有修复。有一种解决方法（需要手动更改数据库），因此您应该联系客户支持。

Audience Manager 会跟踪您的 BluePrint 结构的更改，这要求它将细分共享给不同的出版物。在极少数情况下，这个逻辑显然出了问题，它会尝试创建一个已经存在的“Segments”文件夹 - 给你这个错误消息。

非常感谢您提供的任何可能帮助我们重现问题的信息；这是一个难以捉摸的缺陷...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T08:18:49.383

这可能意味着它所说的：该文件夹/结构组中有另一个具有相同名称的项目。打开 GUI 并检查该位置是否存在具有该确切名称的项目。检查完整的蓝图层次结构！

解决此问题的选项：

*   检查您的 ContentPorter 导入设置（相关内容）
*   重命名/（重新）移动冲突项目

我认为观众经理与此错误无关

# tooltwist - 为什么设计器中没有显示页面数据选项卡？

> ID：10477174
> 
> 赞同：1
> 
> 时间：2012-05-07T05:39:11.550
> 
> 标签：tooltwist

我正在 ToolTwist 设计器中编辑页面，并且显示了所有正常选项卡 - 编辑页面、导航点、测试页面、源代码等，但未显示“页面数据”选项卡。如何使选项卡显示，以便为我的页面输入页面数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:22:25.780

仅当您的页面上有需要页面数据的小部件时，才会显示页面数据选项卡。您还需要编辑 navpoint，而不是页面，因为页面数据属于 navpoint，并且单个页面定义可能由多个 navpoint 共享。换句话说，页面数据允许小部件在网站内的不同位置（导航点）出现不同。

如果您正在开发一个希望使用页面数据的小部件，您需要执行以下操作：

在 Widget Controller 类中，实现“UsesPageData”接口。这告诉设计器，当您单击引用包含此小部件的页面的导航点时，需要显示页面数据选项卡，并在选项卡上创建一个可以输入此小部件的 XML 的部分，特定于该特定导航点。

```
public class CarouselTab extends WbdWidgetController implements UsesPageData
```

为了让用户知道小部件需要什么 XML，您需要实现一个返回模板 XML 代码的方法。例如：

```
 public XData getInitialPageData(WbdWidget instance)
    {
        StringBuffer xml = new StringBuffer();
        xml.append("\n");
        xml.append("\n");
        xml.append("        id01\n");
        xml.append("        [Label 01]\n");
        xml.append("        [Add your widget here 01]\n");
        xml.append("\n");
        xml.append("\n");
        xml.append("        id02\n");
        xml.append("        [Label 02]\n");
        xml.append("        [Add your widget here 02]\n");
        xml.append("\n");
        xml.append("");
        return new XData(xml);
    } 
```

定义一个属性，该属性定义要在页面数据选项卡上输入 XML 的位置上方显示的名称：

```
 protected void init(WbdWidget instance) throws WbdException
    {
        instance.defineProperty(new WbdStringProperty("pageDataSection", null, "PageDataSection", ""));
        ...
    } 
```

生成页面时使用页面数据：

```
 @Override
    public void renderForJSP(WbdGenerator generator, WbdWidget instance, UimHelper ud, WbdRenderHelper rh) throws WbdException
    {
        ...
        Xpc xpc = ud.getXpc();
        xpc.start("tooltwist.wbd.getPagedata", "select");
        xpc.attrib("navpointId", WbdSession.getNavpointId(ud.getCredentials()));
        xpc.attrib("pageDataSection", pageDataSection);
        XData pagedata = xpc.run();
        // Do something with the page data
        ...
    } 
```

# firefox - href 在 Firefox 和 Opera 中不起作用

> ID：10477175
> 
> 赞同：0
> 
> 时间：2012-05-07T05:39:12.877
> 
> 标签：firefox, google-chrome, css, opera

我正在使用 Css3 效果使我的菜单看起来更漂亮，但这没有问题，但是我不知道由于一些奇怪的原因，当我单击菜单项时，它们不会重定向到所需的页面，即我的 href="abc.aspx" 不会在 Firefox 、 Opera 中工作，但在 Chrome 中工作得很好。这是我使用的 Css3 代码

```
#Menu a:active,
#Menu a.active:before,#Menu a:hover:before
{
    Content: ' ';
    position:absolute;
    z-index:-1;
    width:0px;
    height:0px;
    left:50%;
    top:50%;
    border-radius:50%;
    box-shadow:0 0 35px 30px #ADD7E7;

} 
```

我的菜单看起来有些东西![像这样](../Images/ca4945d69ebaebddcb823f37411f3a28.png)

但是，当我删除该 Css3 样式时，href 有效。任何人都可以帮助我解决为什么会发生这种情况。欢迎任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:41:51.567

这很可能是因为您的 css 中的这一行：

```
z-index:-1; 
```

默认层是`0`文档的，但由于悬停时您将其设置为`-1`，因此您将无法单击它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T07:37:58.973

问题可能源于样式`#Menu a:active`与伪元素一起。尝试将它们分开，甚至`#Menu a:active`完全从定义中删除。然后你可以设置你的`z-index`背，`-1` 因为它只会被应用于伪元素。

我在[这里设置了一个 jsfiddle](http://jsfiddle.net/3u75x/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:41:52.157

将`z-index:-1`元素放在身体后面。因此，它不能被点击，因为身体正在遮挡它。

但是，如果您没有为主体定义背景颜色，这有点模棱两可，因为透明背景颜色可能无法捕捉到点击。

避免负 z 索引。它们可以在正数中随心所欲地升高，比负数更可靠。

# jquery - 我可以将 jQuery 排序用于移动网站吗？

> ID：10477176
> 
> 赞同：1
> 
> 时间：2012-05-07T05:39:37.070
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

jQuery sortable 在当今的移动设备上感觉还行吗？它真的有效吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:41:58.477

我很幸运使用触摸打孔库将​​点击事件转换为触摸事件：

[http://touchpunch.furf.com/](http://touchpunch.furf.com/)

我将它用于 ipad 上的可拖动插件，效果很好。

# python - 如何从播放列表播放歌曲

> ID：10477180
> 
> 赞同：0
> 
> 时间：2012-05-07T05:40:43.660
> 
> 标签：python, tkinter, tk, python-2.6

我正在使用 Tkinter 在 python 2.6 中制作音乐播放器。这是我的代码：

```
from Tkinter import *
import mp3play
import tkFileDialog
import Tkinter
def open_file():                                #Opens a dialog box to open .mp3 file
  global music                                #then sends filename to file_name_label.
  global mp3
  global play_list
  filename.set (tkFileDialog.askopenfilename(defaultextension = ".mp3", filetypes=[("All Types", ".*"), ("MP3", ".mp3")]))
  playlist = filename.get()
  playlist_pieces = playlist.split("/")
  play_list.set (playlist_pieces[-1])
  playl = play_list.get()
  play_list_display.insert(END, playl)
  mp3 = filename.get()
  print mp3
  music = mp3play.load(mp3)
  pieces = mp3.split("/")
  name.set (pieces[-1])

def play():                                     #Plays the .mp3 file
  music.play()

def stop():                                     #Stops the .mp3 file
  music.stop()                
def pause():                                    #Pauses or unpauses the .mp3 file
  if music.ispaused() == True:
     music.unpause()
  elif music.ispaused() == False:
     music.pause()

def vol(event):                                 #Allows volume to be changed with the slider
  v = Scale.get(volume_slider)
  music.volume(v)
def Exit():
  exit()
root = Tk()
root.title("EmoPlayer")
root.geometry('300x100+250+100')
filename = Tkinter.StringVar()
name = Tkinter.StringVar()
play_list = Tkinter.StringVar()
menubar = Menu(root)
filemenu = Menu(menubar, tearoff=0)
menubar.add_cascade(label='File', menu = filemenu)
filemenu.add_command(label='Open', command = open_file)
filemenu.add_separator()
filemenu.add_command(label='Exit', command = Exit)
root.config(menu=menubar)
open_file = Button(root, width = 6, height = 1, text = 'Open file', command = open_file)
open_file.grid(row=0, column=3)
play_button = Button(root, width = 5, height = 1, text='Play', command = play)
play_button.grid(row=0, column=0, sticky = W)
stop_button = Button(root, width = 5, height = 1, text='Stop', command = stop)
stop_button.grid(row=0, column=1, sticky = W)
pause_button = Button(root, width = 5, height = 1, text='Pause', command = pause)
pause_button.grid(row=0, column=2)
volume_slider = Scale(root, label='Volume', orient = 'horizontal', fg = 'black', command = vol)
volume_slider.grid(row=0, column=4)
file_name_label = Label(root, font=('Verdana', 8), fg = 'black', wraplength = 300, textvariable=name )
file_name_label.grid(row=3, column=0, columnspan=8)
play_list_window = Toplevel(root, height = 150, width = 100)
play_list_window.title("Playlist")
play_list_display = Listbox(play_list_window, width = 50)   
play_list_display.pack()

play_list_window.mainloop()
root.mainloop() 
```

此代码可以打开一个 mp3 文件，将其插入播放列表并播放。但它不能允许通过从播放列表中选择来播放歌曲。谁能告诉我如何通过从播放列表中进行选择来使事情正常进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:43:48.160

您可以订阅列表框的选择更改 ( `"<<ListboxSelect>>"`) 或双击事件 ( `"<Double-Button-1>"`)。

请注意，您必须将 mp3 文件的完整路径存储在某处（播放列表中显示的文件名不足以播放它）。

```
def tune_changed(event):
  idx = event.widget.curselection()[0]
  print ("Now playing %s" % event.widget.get(idx))

play_list_display.bind("<Double-Button-1>", tune_changed)
play_list_display.bind("<<ListboxSelect>>", tune_changed) 
```

# ruby-on-rails - Rails g 对 mongoid 命令失败

> ID：10477182
> 
> 赞同：0
> 
> 时间：2012-05-07T05:40:50.397
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在尝试使用 ruby​​-1.9.2 使用以下命令从 rails 3.2 应用程序初始化 mongoid：

```
rails g mongoid:config 
```

当我发出命令时，我收到以下错误：

> /Users/paulcowan/.rvm/gems/ruby-1.9.2-p290/gems/bundler-1.0.18/lib/bundler/rubygems_integration.rb:143:in `block in replace_gem': railties is not part of the bundle. Add it to Gemfile. (Gem::LoadError) from /Users/paulcowan/.rvm/gems/ruby-1.9.2-p290/bin/rails:18:in`'

我的 gem 文件如下所示：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'

# structures
gem 'json',                 '~> 1.6.3'
gem 'rabl',                 '~> 0.5.1'

# use thin instead of WEBrick
gem 'thin'

# MongoDB..
gem 'bson_ext'
gem 'mongoid'

gem "haml", ">= 3.1.4"
gem "haml-rails", ">= 0.3.4", :group => :development
gem "bootstrap-sass", ">= 2.0.1"

gem 'inherited_resources'

group :development, :test do
  gem 'guard'
  gem 'growl'
  gem 'rspec-rails', '2.8.1'
  gem 'webrat', '0.7.3'
  gem 'factory_girl_rails', '1.7.0'
  gem 'rdoc', '~> 3.12'
  gem "database_cleaner"
  gem "mongoid-rspec"
  gem "pry-rails", "~> 0.1.6"
end

group :test do
  gem 'jasminerice', :git => "https://github.com/bradphelan/jasminerice.git", :branch => 'master'
  gem 'guard-jasmine', :git => "https://github.com/netzpirat/guard-jasmine.git", :branch => 'master'
  gem 'capybara',          '~> 1.1.2'
  gem 'fivemat'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:47:47.110

我有一个新的 Rails 3.2.3 项目和你的 Gemfile 的各种捆绑器/gem 问题。我能够通过删除 Gemfile.lock 并重新运行“捆绑安装”来克服它。附上我所做的日志，其中包括删除 ActiveRecord。希望这会有所帮助。

```
$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]
$ rails new free-11479-mongoid-rails-g
$ cd free-11479-mongoid-rails-g

Gemfile as per user

$ bundle install
You have requested:
  json ~> 1.6.3

The bundle currently has json locked at 1.7.1.
Try running `bundle update json`

$ bundle update json
Bundler could not find compatible versions for gem "multi_json":
  In Gemfile:
    rabl (~> 0.5.1) ruby depends on
      multi_json (~> 1.0.3) ruby

    guard-jasmine (>= 0) ruby depends on
      multi_json (1.3.4)

$ rm Gemfile.lock
$ bundle install
$ rails g mongoid:config
     create  config/mongoid.yml
---------
Assuming that you want to excise ActiveRecord...

dereference ActiveRecord

    config/application.rb
        #config.active_record.whitelist_attributes = true
    config/environments/development.rb
        #config.active_record.mass_assignment_sanitizer = :strict
        #config.active_record.auto_explain_threshold_in_seconds = 0.5
    config/environments/development.rb
        #config.active_record.mass_assignment_sanitizer = :strict
    test/test_helper.rb
      #fixtures :all

$ rm database.yml

config/application.rb
    #require 'rails/all'
    require "action_controller/railtie"
    require "action_mailer/railtie"
    require "active_resource/railtie"
    require "rails/test_unit/railtie"

$ rake test # passes 
```

# ms-access - “表达式输入错误，或者太复杂”错误 - Access 2007

> ID：10477183
> 
> 赞同：0
> 
> 时间：2012-05-07T05:40:58.050
> 
> 标签：ms-access, ms-access-2007, jet-sql

正如问题所说，每当我尝试运行查询时都会收到此错误。

我想在每个表中搜索 3 个字段、OEM 代码、型号和其他搜索词。

这是SQL：

```
PARAMETERS [Search] Text ( 255 );
SELECT *
FROM inkSearch
WHERE inkSearch.[OEMCode] & inkSearch.[printers] & inkSearch.[ast] LIKE "*" & [Search] & "*"
UNION SELECT *
FROM tonerSearch
WHERE tonerSearch.[OEM Code] & tonerSearch.[Models] & tonerSearch.[Additional Search Terms] LIKE "*" & [Search] & "*"; 
```

如果我删除 LASERS.[Models] 字段，错误就会消失，但这与墨水打印机字段没有什么不同，我看不出这给我带来问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:00:55.320

我已将查询更改为此似乎有效。我最初基于两个缩小字段的查询。

我还发现模型字段是墨粉表上的文本和可能导致它的墨水上的备忘录。

以下查询似乎已解决此问题：

```
PARAMETERS [Search] Text ( 255 );
SELECT LASERS.[OEM], LASERS.[T1inclSell], LASERS.[Yield], LASERS.[Models], LASERS.[AST]
FROM LASERS
WHERE (LASERS.[OEM] & LASERS.[Models] & LASERS.[AST]) Like "*" & [Search] & "*"
UNION ALL SELECT INKS.[OEM], INKS.[T1inclSell], INKS.[Yield], INKS.[Models], INKS.[AST]
FROM INKS
WHERE (INKS.[OEM] & INKS.[Models] & INKS.[AST]) Like "*" & [Search] & "*"; 
```

# html - 带有子菜单的纯 CSS 垂直菜单

> ID：10477184
> 
> 赞同：6
> 
> 时间：2012-05-07T05:40:58.123
> 
> 标签：html, css, menu

我做了我的研究，并且能够复制我正在寻找的东西，好吧——我只需要一个更具体的垂直、纯 CSS 菜单的帮助。

我希望我的子菜单弹出窗口出现在 a 左侧 10 像素处，而不是`li` 像互联网上大多数示例那样的属性。我也在寻找最简单、纯 CSS 的菜单类型——没什么特别的。

这是我到目前为止所做的：

```
<div id="nav">
    <ul class="top-level">
        <li><a href="#">This is a long text</a>
            <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 2</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact me here</a></li>
        <li><a href="#">Help</a>
            <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 2</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
    </ul> 
```

我的CSS：

```
#nav {border:1px solid cyan;}
    /* top level menu */
    #nav ul.top-level {border:1px solid red;}
    #nav ul.top-level li {position:relative;}

    /* sub level menu */
    #nav ul.sub-level {border:1px solid yellow;}
    #nav ul.sub-level {display:none;} /* hide */

    /* hover the sub menu*/
    #nav ul.top-level li:hover .sub-level {display: block; position:absolute; top:5px;} 
```

`a`当我将HTML 锚点而不是`li`, 和 10px悬停在单击的锚点左侧时，如何使子级菜单弹出`a`？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T06:24:17.100

试试这个，我认为它会有所帮助

HTML

```
 <div id="nav">
    <ul class="top-level">
        <li><a href="#">This is a long text</a>
            <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 2</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact me here</a></li>
        <li><a href="#">Help</a>
           <ul class="sub-level">
                <li><a href="#">Sub Menu Item 1</a></li>
                <li><a href="#">Sub Menu Item 2</a></li>
                <li><a href="#">Sub Menu Item 3</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

​</p>

CSS

```
#nav {font-size:0.75em; width:150px;}
#nav ul {margin:0px; padding:0px;}
#nav li {list-style: none;} 

ul.top-level {background:#FFFFFF;}
ul.top-level li {
 border: #FF0000 solid; 
 border-width: 1px;
}
 #nav ul.sub-level {border:1px solid yellow;}
#nav a {
 color: #000000;
 cursor: pointer;
 display:block;
 height:25px;
 line-height: 25px;
 text-indent: 10px;
 text-decoration:none;
 width:100%;
}
#nav a:hover{
 text-decoration:underline;
}

#nav li:hover {
 background: #f90;
 position: relative;
}
ul.sub-level {
    display: none;  
}
li:hover .sub-level {
    background: #999;
    border: #fff solid;
    border-width: 1px;
    display: block;
    position: absolute;
    left: 75px;
    top: 5px;
}
ul.sub-level li {
    border: none;
    float:left;
    width:150px;
}

#nav .sub-level {
    background: #FFFFFF;
} 
```

# iphone - 如何从视图中了解标签值

> ID：10477190
> 
> 赞同：2
> 
> 时间：2012-05-07T05:41:46.323
> 
> 标签：iphone, uiview, tags

我正在制作一个应用程序，其中我有一个视图，我可以在其中显示朋友的详细信息。所以，如果我需要更改细节。我将不得不检查标签以更改它。在这里，我为每个标签设置了标签值。

如果用户按下标签，新的文本字段将出现在视图上，用户可以更改详细信息。

因此，为此我编写了触摸开始方法，在该方法中我正在检查触摸值...但是每当我触摸任何标签时，我都会将视图的标签值设为零，而我应该在其中获取标签的标签值我点击了。

我的代码如下所示...

```
txtTmp = [[UITextField alloc] init];    

//txtTmp is the textfield which should appear as super view of the label where i have clicked

    txtTmp.delegate=self;

self.lblName.tag=11;

UITouch *touch = [touches anyObject]; 
```

//在这里，即使我启用了用户交互，我也会将标签值设为 0...

```
NSLog(@"view.tag = %d",touch.view.tag);

if(touch.view.tag==11) {

    [txtTmp setFrame:CGRectMake(162, 43, 138, 50)];
    txtTmp.text=lblName.text;
    [self.view addSubview:txtTmp];
    [txtTmp becomeFirstResponder];
    temp=1;

} 
```

如果你对我的问题有任何问题..请回复我....

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:15:13.657

您应该启用 self.lblName 的用户交互。

```
 [self.lblName setUserInteractionEnabled:YES]; 
```

您还可以使用 viewWithTag 消息在 touchesbegan 方法中检查触摸标签：

```
UITouch *touch = [touches anyObject];

if(touch.view == [self.view viewWithTag:11]) 
{
    [txtTmp setFrame:CGRectMake(162, 43, 138, 50)];
    txtTmp.text=lblName.text;
    [self.view addSubview:txtTmp];
    [txtTmp becomeFirstResponder];
    temp=1;
} 
```

# iphone - 像 camscanner 一样裁剪 UIImage

> ID：10477195
> 
> 赞同：12
> 
> 时间：2012-05-07T05:42:04.577
> 
> 标签：iphone, objective-c, uiimage, core-animation, crop

我被困在我的应用程序功能中。我想要类似于 Cam Scanner Cropping 的裁剪功能。CAM-SCANNER 的屏幕是： 我已经创建了类似的裁剪视图。

![在此处输入图像描述](../Images/5bc4fcc4f832ad8331972396df58216f.png)

![在此处输入图像描述](../Images/199c3e39142f512ba73cbb7e0bdc1dba.png)

**我已经获得了四个角的 CGPoint。但是我怎样才能获得倾斜的裁剪图像。**

如果可能的话，请给我一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T19:21:56.593

这是一个透视变换问题。在这种情况下，他们在 2D 平面上绘制 3D 投影。

因为，第一张图像具有四边形的选择角，当您将其转换为矩形时，您将需要添加更多像素信息（[插值](http://en.wikipedia.org/wiki/Interpolation)）或删除一些像素。

所以现在实际的问题是向裁剪后的图像添加额外的像素信息并将其投影以生成第二张图像。它可以通过多种方式实现：

<> 您可以通过应用带有插值的透视变换矩阵来自己实现它。

<> 你可以使用[OpenGL](http://www.songho.ca/opengl/gl_projectionmatrix.html#perspective)。

<> 你可以使用[OpenCV](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html)。..还有更多的方法来实现它。

我已经使用 OpenCV 解决了这个问题。OpenCV 中的以下功能将帮助您实现这一目标。

1.  [cvPerspectiveTransform](http://opencv.willowgarage.com/documentation/operations_on_arrays.html#perspectivetransform)

2.  [cvWarpPerspective](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html#warpperspective)

第一个函数将使用源和目标投影坐标计算变换矩阵。在您的情况下， src 数组将具有来自所有角落的 CGPoint 值。dest 将具有矩形投影点，例如 {(0,0)(200,0)(200,150)(0,150)}。

获得转换矩阵后，您需要将其传递给第二个函数。你可以访问这个[**线程**](http://nuigroup.com/forums/viewthread/3414/)。

OpenCV 库可能没有其他替代品，但它具有很好的图像处理算法集合。

带有 opencv 库的 iOS 应用程序可在[eosgarden 获得](http://www.eosgarden.com/en/opensource/opencv-ios/overview/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T00:18:42.397

我看到了两种可能性。第一个是计算倾斜图像的变换矩阵，并将其安装在视图层的 CATransform3D 属性中。

这很简单，假设您知道如何形成进行拉伸的变换矩阵。我从来没有学过如何构建拉伸或倾斜图像的变换矩阵，所以我帮不上什么忙。我建议谷歌搜索转换矩阵和拉伸/倾斜。

另一种方法是将要裁剪的图像部分转换为 OpenGL 纹理并将纹理映射到输出。实际的纹理绘制部分会很容易，但是要完成大约 1000 公斤的 OpenGL 设置，并且要学习很多东西才能完成任何事情。如果你想走这条路，我建议使用新的 iOS 5 GLKit 搜索简单的 2D 纹理示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:12:41.097

使用链接中给出的代码：[http ://www.hive05.com/2008/11/crop-an-image-using-the-iphone-sdk/](http://www.hive05.com/2008/11/crop-an-image-using-the-iphone-sdk/)

而不是使用 CGRect 和 CGContextClipToRect 尝试使用 CGContextEOClip 或 CGContextClosePath

虽然我没有尝试过这个......但我已经尝试在 TouchesBegan 和 TouchesMoved 和 TouchesEnd 事件上使用 CGContextClosePath 绘制封闭路径。

希望这可以让您更深入地了解您的问题...

# ruby - 我可以使用指定名称创建类的实例吗？

> ID：10477199
> 
> 赞同：1
> 
> 时间：2012-05-07T05:42:27.343
> 
> 标签：ruby, class, instance

我已经用 ruby​​ 写了一个类，叫它*Foo*。现在我想创建它的一些实例。但是，我想使用存储在变量中的值作为实例的名称。

例如，变量*bar*的值为“ABC”。现在我想将新实例的名称命名为“ABC”作为语句*ABC = Foo.new*

我能意识到这一点吗？如果可能，请告诉我如何。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:08:00.887

在 Ruby 中，您也不应该害怕使用 eval()，只要您只向它提供由您（程序员）构建的数据，而不会受到不安全的外部影响。在这种情况下，

```
cocos = "ABC"
class_sym = :Foo
eval "#{cocos} = #{class_sym}.new" 
```

Eval 在许多语言中名声不佳，但在 Ruby 中，它相当舒适，基本上与静态代码一样快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:55:58.830

作为*局部*变量，不可以，但是您可以使用[instance_variable_set](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_set)和朋友将创建的对象命名为实例变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:23:06.703

`const_set`如果你真的在使用常量，你也可以使用：

```
constant = 'ABC'
Object.const_set constant.to_sym, Foo.new 
```

# php - 从 mySql 数据库创建树

> ID：10477201
> 
> 赞同：1
> 
> 时间：2012-05-07T05:42:41.893
> 
> 标签：php, mysql, tree, pear

我在 db 中有一个表`fields`

```
-----------------------
Id | Value | Path | Parent
-----------------------

1  | Asia  | 1    | 0 
2  | India | 1/2  | 1
3  | Goa   | 1/2/3| 2 
```

该列表包含世界上所有的城市。所以它是一个相当大的列表。

## 问题

如果我的产品为一片叶子选择了所有父母。[例如，ID：3 的 ID 3、2、1] 比我可以生成基于`ParentID`使用 AJAX 函数的树。

## 但

我选择了一种产品，它给了我树叶。[例如，ID:3] 所以我需要解析以生成树，`Path`这听起来太糟糕了[解析字符串会很慢。]

这件事有什么通用的解决方案吗？- 我可以创建一个视图并存储相应的父母 rf 叶子吗？- 使用梨树？

或者任何其他直接涉及的更好的解决方案`DB`。？

## 编辑

树结构：

```
Asia
 >India
   >Goa 
```

## 编辑

通过解析的递归函数`PATH`不适合这个工作。那会很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:02:24.580

PEAR 的[Tree 包](http://pear.php.net/package/Tree/)是为这个特定的任务而制作的。试试这个经过验证的包，而不是发明自己的代码。

# tridion - 如何通过核心服务从 Tridion 获取多媒体类型的 tcm id，比如 jpg？

> ID：10477207
> 
> 赞同：7
> 
> 时间：2012-05-07T05:43:26.553
> 
> 标签：tridion

Tridion 的管理文件夹中有许多多媒体类型。我想编写一个返回给定mime 类型的tcm id 的方法，例如对于gif mime 类型它应该返回“tcm:0-1-65544”。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:07:37.687

每个模式都有一个名为 AllowedMultimediaTypes 的属性，它返回一个列表，默认多媒体模式通常设置为允许所有类型。如果它不允许所有类型，那么您可以为此目的创建一个特殊模式。

因此，您所要做的就是获取默认多媒体模式（或允许所有类型的特殊模式）的 AllowedMultimediaTypes，然后将您输入的 mime 类型与返回的每个 MultimediaType 的 mimetime 匹配。

这是顶部的一些示例（未经测试）：

```
Schema defaultMMSchema = (Schema)engine.GetObject("Your-Default-MMSchema-WebDav-Path");
IList<MultimediaType> mmTypes = defaultMMSchema.AllowedMultimediaTypes;
foreach(MultimediaType mt in mmTypes)
{
  switch(mt.MimeType)
  {
    case "jpg":

    ...
  }
} 
```

或者，开箱即用的多媒体类型的 TCM ID 是恒定的，因此您无需担心它们在内容移植到另一个环境后会发生变化。因此，您可以编写一个提供 mime 类型到 tcm ID 的映射的类。注意：如果您创建自定义项目类型，这将不会那么优雅，因为您需要使用每个 Tridion 环境的 TCM ID 更新您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T07:12:09.353

您可以获取所有多媒体类型的列表，然后选择您需要的一种：

```
var mmType = ClientAdmin.GetSystemWideList(new MultimediaTypesFilterData()).Single(mt => ((MultimediaTypeData)mt).MimeType == "image/jpeg"); 
```

# ios - 在 iphone 中获取 yahoo 联系人

> ID：10477209
> 
> 赞同：3
> 
> 时间：2012-05-07T05:43:40.960
> 
> 标签：ios, yahoo-api

我正在关注此链接：[https](https://github.com/yahoo/yos-social-objc) ://github.com/yahoo/yos-social-objc用于检索雅虎联系人。

提供所有凭据（即密钥、消费者密钥、应用程序 ID）后，它将进入浏览器进行登录。但登录后，它显示此消息：

> 完成yahoo的分享！带有 xxxx 的信息，在 xxxx 中输入代码 xxxx

那么，我没有得到我应该输入此代码的地方？以及它将如何重定向到我的应用程序。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:45:08.780

[CloudSponge](http://www.cloudsponge.com)为其联系人导入器提供了一个 iOS 小部件。从您的 iOS 设备访问[我们的试驾页面](http://www.cloudsponge.com/test-drive)，了解它是如何工作的。

我为 CloudSponge 工作，如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T12:29:18.617

您需要指定回调 url。默认情况下它是“oob”并且会给你验证码。如果您展示自己的 web 视图并通过 webview 委托监控验证程序代码会更好。这是你如何做到的。

```
YOSSession *yahooSession; //instance variable

- (IBAction)yahooButtonAction:(UIButton *)sender {

    yahooSession = [YOSSession sessionWithConsumerKey:YAHOO_CONSUMER_KEY
                                           andConsumerSecret:YAHOO_CONSUMER_SECRET
                                            andApplicationId:YAHOO_APP_ID];

    // try to resume a user session if one exists
    BOOL hasSession = [yahooSession resumeSession];

    if(hasSession == FALSE) {
        [self fetchSession];
    }else{
        [self sendRequests];
    }
}

-(void)fetchSession{

    // create a new YOSAuthRequest used to fetch OAuth tokens.
    YOSAuthRequest *tokenAuthRequest = [YOSAuthRequest requestWithSession:yahooSession];

    // fetch a new request token from oauth.
    YOSRequestToken *newRequestToken = [tokenAuthRequest fetchRequestTokenWithCallbackUrl:@"http://localhost"];

    // if it looks like we have a valid request token
    if(newRequestToken && newRequestToken.key && newRequestToken.secret) {
        // store the request token for later use
        [yahooSession setRequestToken:newRequestToken];
        [yahooSession saveSession];

        // create an authorization URL for the request token
        NSURL *authorizationUrl = [tokenAuthRequest authUrlForRequestToken:yahooSession.requestToken];
        [self presentWebViewForYahooWithAuthURL:authorizationUrl];
        //present it in webview

    } else {
        // NSLog(@"error fetching request token. check your consumer key and secret.");
    }
}

-(void) presentWebViewForYahooWithAuthURL:(NSURL *)url{

    _yahooWebView = [[UIWebView alloc] initWithFrame:self.view.frame];
    _yahooWebView.delegate=self; //so that we can observe the url for verifier
    [_yahooWebView loadRequest:[NSURLRequest requestWithURL:url]];
    [self.view addSubview:_yahooWebView];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    NSString *requestString = request.URL.absoluteString;
    if ([requestString rangeOfString:@"http://localhost"].length>0) {
        NSRange verifierRange = [requestString rangeOfString:@"oauth_verifier="];
        if (verifierRange.length>0) {

            verifierRange.location =verifierRange.location+verifierRange.length;
            verifierRange.length = requestString.length-verifierRange.location;
            NSLog(@"Verifier => %@", [requestString substringWithRange:verifierRange]);
            yahooSession.verifier=[requestString substringWithRange:verifierRange];
            [self sendRequests];
        }
        return NO;
    }
    else{
        return YES;
    }
} 
```

# sql - SQL int 溢出 - 加密插入

> ID：10477210
> 
> 赞同：1
> 
> 时间：2012-05-07T05:43:44.780
> 
> 标签：sql, insert

我正在努力在 MS SQL 2008R2 中实现加密。从 CVS 文件加载数据，我将这些数据保存在临时表中，现在我想将其中的一些数据移动到加密的信用卡表中。但是，我不断收到以下错误。插入代码如下，表格定义如下。

客户端 ID 低于 10 - 导致溢出的数字是第一行数据，CC 编号。

错误：

> 消息 248，级别 16，状态 1，第 4 行 varchar 值“5105105105105100”的转换溢出了一个 int 列。该语句已终止。

插入语句：

```
OPEN SYMMETRIC KEY CreditCardKey
        DECRYPTION BY CERTIFICATE CreditCardCert;

    insert into CreditCard
    Select
        HASHBYTES('SHA1', t.CreditCard),
        EncryptByKey(key_guid('CreditCardKey'), t.CreditCard),
        '',
        RIGHT(4, t.CreditCard),
        '1',
        t.Expiration,
        convert(int, t.ClientID)
    From TempTbl t 
```

**临时表：**

*   `ClientID int`.
*   `First`, `Last`, `CC`, `Expiration`-- 全部`varchar(50)`。

所有数据似乎已正确导入。

**信用卡：（**目的地表）

```
Hash varbinary(200)
Encrypted varbinary(400)
plaintext char(16)
lastfour int
servicecode int
expirationdate Date
ClientID int 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:35:27.840

语法问题导致溢出：我使用[RIGHT](http://msdn.microsoft.com/en-us/library/ms177532.aspx)函数反转了字符和 int 偏移量，溢出了函数的整数表达式。

正确使用：

```
RIGHT ( character_expression , integer_expression ) 
```

# iphone - 为什么当我单击某个按钮时，我使用的 UILableView 对象或 UIImageView 会隐藏？

> ID：10477211
> 
> 赞同：3
> 
> 时间：2012-05-07T05:43:45.947
> 
> 标签：iphone, objective-c, xcode, ipad

我正在一个项目中工作，其中标签和图像的位置根据我单击的按钮对齐。

位置存储在一个数组中，我像下面的代码一样分配了位置

```
-(IBAction)templateButtonClicked:(id)sender {

UIButton *button=(UIButton*)sender;
NSLog(@"button tag is %d",button.tag);

if (button.tag==1) {

    CGPoint companyNameLblpos;
    CGRect companyNameLblSize;
companyNameLblpos.x=[[cnXArr objectAtIndex:j]floatValue];
companyNameLblpos.y=[[cnYArr objectAtIndex:j] floatValue];
    //NSLog(@"cnXArr and cnYArr is %0.2f and %0.2f",companyNameLblpos.x,companyNameLblpos.y);
companyNameLblSize.size.width=[[cnWArr objectAtIndex:j] floatValue];
companyNameLblSize.size.height=[[cnHArr objectAtIndex:j] floatValue];
    companyNameLbl.center=companyNameLblpos;
    companyNameLbl.bounds=companyNameLblSize;

    CGPoint yourNameLblPos;
    CGRect yourNameLblSize;
yourNameLblPos.x=[[ynXArr objectAtIndex:j] floatValue];
yourNameLblPos.y=[[ynYArr objectAtIndex:j] floatValue];
yourNameLblSize.size.width=[[ynWArr objectAtIndex:j] floatValue];
yourNameLblSize.size.height=[[ynHArr objectAtIndex:j] floatValue];
    yourNameLbl.center=yourNameLblPos;
    yourNameLbl.bounds=yourNameLblSize;
    yourNameLbl.textColor=[UIColor blackColor];

    CGPoint designationLblPos;
    CGRect designationLblSize;
designationLblPos.x=[[dXArr objectAtIndex:j] floatValue];
designationLblPos.y=[[dYArr objectAtIndex:j] floatValue];
designationLblSize.size.width=[[dWArr objectAtIndex:j] floatValue];
designationLblSize.size.height=[[dHArr objectAtIndex:j] floatValue];
    designationLbl.center=designationLblPos;
    designationLbl.bounds=designationLblSize;

    CGPoint addrLine1LeftLblPos;
    CGRect addrLine1LeftLblSize;
addrLine1LeftLblPos.x=[[ad1XArr objectAtIndex:j] floatValue];
addrLine1LeftLblPos.y=[[ad1YArr objectAtIndex:j] floatValue];
addrLine1LeftLblSize.size.width=[[ad1WArr objectAtIndex:j] floatValue];
addrLine1LeftLblSize.size.height=[[ad1HArr objectAtIndex:j] floatValue];
    addrLine1LeftLbl.center=addrLine1LeftLblPos;
    addrLine1LeftLbl.bounds=addrLine1LeftLblSize;

    CGPoint addrLine2LeftLblPos;
    CGRect addrLine2LeftLblSize;
addrLine2LeftLblPos.x=[[ad2XArr objectAtIndex:j] floatValue];
addrLine2LeftLblPos.y=[[ad2YArr objectAtIndex:j] floatValue];
addrLine2LeftLblSize.size.width=[[ad2WArr objectAtIndex:j] floatValue];
addrLine2LeftLblSize.size.height=[[ad2HArr objectAtIndex:j] floatValue];
    addrLine2LeftLbl.center=addrLine2LeftLblPos;
    addrLine2LeftLbl.bounds=addrLine2LeftLblSize;
    addrLine2LeftLbl.textColor=[UIColor blackColor];

    CGPoint telNoLblPos;
    CGRect telNoLblSize;
telNoLblPos.x=[[phXArr objectAtIndex:j] floatValue];
telNoLblPos.y=[[phYArr objectAtIndex:j] floatValue];
telNoLblSize.size.width=[[pWArr objectAtIndex:j] floatValue];
telNoLblSize.size.height=[[pHArr objectAtIndex:j] floatValue];
    telNoLbl.center=telNoLblPos;
    telNoLbl.bounds=telNoLblSize;

    CGPoint mobNoLblPos;
    CGRect mobNoLblSize;
mobNoLblPos.x=[[mXArr objectAtIndex:j] floatValue];
mobNoLblPos.y=[[mYArr objectAtIndex:j] floatValue];
mobNoLblSize.size.width=[[mWArr objectAtIndex:j] floatValue];
mobNoLblSize.size.height=[[mHArr objectAtIndex:j] floatValue];
    mobNoLbl.center=mobNoLblPos;
    mobNoLbl.bounds=mobNoLblSize;

    CGPoint emailLblPos;
    CGRect emailLblSize;
emailLblPos.x=[[emXArr objectAtIndex:j] floatValue];
emailLblPos.y=[[emYArr objectAtIndex:j] floatValue];
emailLblSize.size.width=[[emWArr objectAtIndex:j] floatValue];
emailLblSize.size.height=[[emHArr objectAtIndex:j] floatValue];
    emailLbl.center=emailLblPos;
    emailLbl.bounds=emailLblSize;

    CGPoint bCardFrontSubItem1Pos;
    CGRect bCardFrontSubItem1Rect;
bCardFrontSubItem1Pos.x=[[liXArr objectAtIndex:j] floatValue];
bCardFrontSubItem1Pos.y=[[liYArr objectAtIndex:j] floatValue];
bCardFrontSubItem1Rect.size.width=[[liWArr objectAtIndex:j] floatValue];
bCardFrontSubItem1Rect.size.height=[[liHArr objectAtIndex:j] floatValue];
    bCardFrontSubItem1.center=bCardFrontSubItem1Pos;
    bCardFrontSubItem1.bounds=bCardFrontSubItem1Rect;

bCardFront.image=[UIImage imageWithData:[bgImageArr objectAtIndex:j]];
bCardFrontSubItem1.image=[UIImage imageWithData:[logoImageArr objectAtIndex:j]]; 
```

} }

当我第一次单击按钮时，我的标签已对齐。但是当我继续点击同一个按钮时，屏幕上看不到“nameLbl”。我没有在这个项目的任何地方使用 hidden 或 alpha。谁能告诉我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:16:52.653

这应该适合你：

```
[nameLbl setFrame:CGRectMake([[dXArr objectAtIndex:0] floatValue], [[dYArr objectAtIndex:0] floatValue], [[dWArr objectAtIndex:0] floatValue], [[dHArr objectAtIndex:0] floatValue]]; 
```

您需要将数组中的值存储为 NSNumber。例如：

```
[dXArr addObject:[NSNumber numberWithFloat:1.0]]; 
```

# extraction - Tesseract ocr：如何使用大量单字符图像批量训练我自己的 tessdata 库？

> ID：10477212
> 
> 赞同：0
> 
> 时间：2012-05-07T05:43:53.423
> 
> 标签：extraction, tesseract

1.  我有很多只有 1 个字符的图像，如何使用它们批量训练我自己的 tessdata 库？有什么提示吗？

2.此外，我对图书馆训练和字符识别之间的特征提取部分感到困惑？谁能解释一下流程？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:31:37.060

如果它们是相同的字体，则将它们放入多页 TIFF 并对其进行培训。[jTessBoxEditor](http://vietocr.sourceforge.net/training.html)可以帮助您进行 TIFF 合并和框编辑。

# php - 正则表达式忽略重音？PHP

> ID：10477213
> 
> 赞同：14
> 
> 时间：2012-05-07T05:44:03.190
> 
> 标签：php, regex, preg-replace, diacritics

无论如何制作一个忽略重音的正则表达式？

例如：

```
preg_replace("/$word/i", "<b>$word</b>", $str); 
```

正则表达式中的“i”是忽略大小写敏感的，但是有什么可以匹配的，例如
**java**和**Jávã**吗？

我确实尝试制作 $str 的副本，将内容更改为无重音字符串并找到所有出现的索引。但是两个字符串的索引似乎不同，即使它只是没有重音。

（我做了一项研究，但我能找到的只是如何从字符串中删除重音符号）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:52:38.993

我不认为，有这样的方法。这将取决于语言环境，您可能首先需要一个“/u”开关以在模式字符串中启用 UTF-8。

我可能会做这样的事情。

```
function prepare($pattern)
{
   $replacements = Array("a" => "[áàäâ]",
                         "e" => "[éèëê]" ...);
   return str_replace(array_keys($replacements), $replacements, $pattern);  
}

pcre_replace("/(" . prepare($word) . ")/ui", "<b>\\1</b>", $str); 
```

在您的情况下，索引是不同的，因为除非您使用过，否则您`mb_string`可能正在处理每个字符使用多个字节的 UTF-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T05:50:41.780

Java 和 Jávã 是不同的词，正则表达式中没有原生支持删除重音符号，但您可以在正则表达式中包含所有可能的带有或不带有重音符号的字符组合。

喜欢`preg_replace("/java|Jávã|jáva|javã/i", "<b>$word</b>", $str);`。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:05:04.677

正则表达式在这里不是适合您的工具。

您正在寻找的答案是[`strtr()`](http://php.net/manual/en/function.strtr.php)功能。

此函数替换字符串中的指定字符，这正是您要查找的。

在您的示例中`Jávã`，您可以使用`strtr()`如下调用：

```
$replacements = array('á'=>'a', 'ã'=>'a');
$output = strtr("Jávã",$replacements); 
```

`$output`现在将包含`Java`.

当然，您需要一个更大的`$replacements`数组来处理您想要使用的所有字符。有关人们如何使用它的一些示例，请参阅我链接的手册页。

请注意，没有一个简单的字符列表，因为首先它会很大，其次，相同的起始字符可能需要在不同的上下文或语言中进行不同的翻译。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T06:22:21.343

```
<?php

if (!function_exists('htmlspecialchars_decode')) {
    function htmlspecialchars_decode($text) {
        return str_replace(array('&lt;','&gt;','&quot;','&amp;'),array('<','>','"','&'),$text);
    }
}

function removeMarkings($text) 
{
    $text=htmlentities($text);    
    // components (key+value = entity name, replace with key)
    $table1=array(
        'a'=>'grave|acute|circ|tilde|uml|ring',
        'ae'=>'lig',
        'c'=>'cedil',
        'e'=>'grave|acute|circ|uml',
        'i'=>'grave|acute|circ|uml',
        'n'=>'tilde',
        'o'=>'grave|acute|circ|tilde|uml|slash',
        's'=>'zlig', // maybe szlig=>ss would be more accurate?
        'u'=>'grave|acute|circ|uml',
        'y'=>'acute'
    );

    // direct (key = entity, replace with value)
    $table2=array(
        '&ETH;'=>'D',   // not sure about these character replacements
        '&eth;'=>'d',   // is an ð pronounced like a 'd'?
        '&THORN;'=>'B', // is a þ pronounced like a 'b'?
        '&thorn;'=>'b'  // don't think so, but the symbols looked like a d,b so...
    );

    foreach ($table1 as $k=>$v) $text=preg_replace("/&($k)($v);/i",'\1',$text);
    $text=str_replace(array_keys($table2),$table2,$text);    
    return htmlspecialchars_decode($text);
}

$text="Here two words, one in normal way and another in accent mode java and jává and me searched with java and it found both occurences(higlighted form this sentence) java and jává<br/>";
$find="java"; //The word going to higlight,trying to higlight both java and jává by this seacrh word
$text=utf8_decode($text);
$find=removeMarkings(utf8_decode($find)); $len=strlen($find);
preg_match_all('/\b'.preg_quote($find).'\b/i', removeMarkings($text), $matches, PREG_OFFSET_CAPTURE);
$start=0; $newtext="";
foreach ($matches[0] as $m) {
    $pos=$m[1];
    $newtext.=substr($text,$start,$pos-$start);
    $newtext.="<b>".substr($text,$pos,$len)."</b>";
    $start=$pos+$len;
}
$newtext.=substr($text,$start);
echo "<blockquote>",$newtext,"</blockquote>";

?> 
```

我认为这样的事情会对你有所帮助，我从论坛上得到了这个..看看。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T06:26:23.713

设置适当的语言环境（例如 fr_FR）并使用该[`strcoll`](http://php.net/strcoll)函数来比较忽略重音的字符串。

# html - 尝试在谷歌浏览器中使用 HTML5 文件 api 时出现 FileError

> ID：10477218
> 
> 赞同：3
> 
> 时间：2012-05-07T05:45:08.443
> 
> 标签：html, google-chrome, google-chrome-extension, fileapi, html5-filesystem

我试图使用 chrome 中的文件系统 API 创建一个文件。最初我尝试如下持久存储

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
webkitStorageInfo.requestQuota(webkitStorageInfo.PERSISTENT, 1024*1024, 
    function(grantedBytes) {
        window.requestFileSystem(webkitStorageInfo.PERSISTENT, grantedBytes, onInitFs, 
        errorHandler);
    }, 
    errorHandler); 
```

它最初工作正常。但是现在当我尝试相同的代码时给了我以下错误

```
NOT_SUPPORTED_ERR: DOM Exception 9 
```

然后我尝试了 TEMPORARY 文件存储如下

```
window.requestFileSystem(TEMPORARY, 1024*1024, onInitFs, errorHandler); 
```

这给了我一些带有代码 2 的 FileError，这意味着安全错误。谁能帮我解决这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:28:37.590

您是否尝试将代码放在存储在本地计算机上的页面中并使用 Chrome 运行？你加了flag吗

```
--allow-file-access-from-files 
```

在您的 Chrome 快捷方式中？我碰巧遇到了和你一样的错误，突然我意识到我忘了添加这个标志来运行我的 chrome。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:06:15.707

我无法重现您的错误。我做了一个简单的扩展，在内容脚本中使用文件系统 API，它对我来说很好用。您的控制台上是否出现任何错误？如果没有，请构建此代码并查看是否有更多错误。

**清单.json：**

```
{
  "name": "Testing FS",
  "manifest_version":2,
  "version": "1.0",
  "content_scripts": [
    {
      "matches":["*://*.google.com/*"],
      "js":["script.js"]
    }
  ]
} 
```

**脚本.js：**

```
webkitStorageInfo.requestQuota(webkitStorageInfo.TEMPORARY, 1024*1024, function(grantedBytes) {
    console.log("bytes granted: ", grantedBytes);
    window.webkitRequestFileSystem(webkitStorageInfo.TEMPORARY, grantedBytes, onInitFs, errorHandler)
}, errorHandler);

function errorHandler(e) {
  console.log("FS error", e);
}

function onInitFs(fs) {
  fs.root.getFile('log.txt', {create: true}, function(fileEntry) {
      console.log(fileEntry);
  }, errorHandler);
} 
```

# drupal - 如何在 Drupal 7 块中执行查询 - 通过内容编辑器（PHP 代码）

> ID：10477226
> 
> 赞同：0
> 
> 时间：2012-05-07T05:45:47.180
> 
> 标签：drupal, drupal-7

谁能向我解释如何在 Drupal 7 块中执行数据库查询？块不是从模块创建的。它由管理员创建。我们在内容编辑器中有一个 PHP 代码过滤器。在那里我必须执行一个查询。

有人给我样品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:38:37.237

在 Drupal 中编写数据库查询的文档和示例在这里：[数据库抽象层](http://api.drupal.org/api/drupal/includes!database!database.inc/group/database/7)。

也就是说，不建议使用 PHP 过滤器并在一个块中输入 PHP。它不太安全，维护起来更棘手（没有版本控制！）如果出现问题，则更难以调试。

# ajax - 究竟什么才是使用 AJAX

> ID：10477231
> 
> 赞同：0
> 
> 时间：2012-05-07T05:46:04.407
> 
> 标签：ajax

据我了解，AJAX 需要使用 XMLHttpRequest 对象。我感到困惑的是 XMLHttpRequest 对象连接到的来源？在学校项目中，我将它连接到 XML 和 mySQL，并被告知我正在做 AJAX。如果我将 XMLHttpRequest 对象连接到包含数据数组的 PHP 脚本会怎样？那算作AJAX吗？

我之所以问这个问题是因为我想在简历中加入 AJAX，但是由于这个领域似乎很广泛，而且我对它的经验有限，所以我想确保我对这项技术有一个清晰的了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:49:16.453

AJAX 部分就是从客户端发出请求的方式。如果它使用 XmlHttpRequest 异步发生，那么请求的去向并不重要 :-) 它可能是对 PHP 中的服务器端脚本、JSON 文件、xml 文件或其他任何内容的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:49:29.020

一点都不宽泛。每当您通过 javascript（而不是通过表单提交）执行异步 Web 请求（实际上，它甚至不必是异步的，但这确实是使用它的最佳方式）时，您都在使用 AJAX。您连接的内容或检索的内容无关紧要。

不失礼貌，我想指出，如果你在简历上说你“对这项技术有清楚的了解”，那你就不是诚实的，因为你问这个问题，这表明你的理解的技术不是“清楚的”。

但是，如果您对 Ajax 的使用完全满意，并且对它的词法定义并不完全清楚......那么......现在你应该是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T05:58:17.487

是的，ajax 可以用于所有语言，无论是 java 还是 asp 和 php

# google-maps - 如何禁用折线点击覆盖？

> ID：10477233
> 
> 赞同：1
> 
> 时间：2012-05-07T05:46:16.133
> 
> 标签：google-maps, google-maps-api-3

我已将鼠标悬停在折线上的事件上。即使我将鼠标悬停在折线上的叠加层上，也会触发此事件。我怎样才能避免它，以便叠加层实际上隐藏了它下面的折线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:05:40.773

最简单的方法可能只是在添加另一个叠加层（我假设它是自定义叠加层）时将`Polyline`'属性设置为 false。`clickable`然后，`Polyline`如果这是您的目标，则根本不会响应鼠标事件。为此，您只需将[PolylineOptions](https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions)对象传递给`Polyline`构造函数，或者调用`Polyline.setOptions`函数并传递一个`PolylineOptions`对象，如果您想在构造后动态进行更改。

如果您想要更细粒度的方面，例如完全控制叠加层的堆叠顺序，您将需要查看[MapPanes](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)。有七个窗格，本质上是可以将叠加层添加到地图的图层。从**下到上**，它们按以下顺序堆叠：

1.  `MapPanes.mapPane`
2.  `MapPanes.overlayLayer`
3.  `MapPanes.overlayShadow`
4.  `MapPanes.overlayImage`
5.  `MapPanes.floatShadow`
6.  `MapPanes.overlayMouseTarget`
7.  `MapPanes.floatPane`

`Polyline`由于您甚至试图隐藏`floatPane`. 我为我的一些[InfoBoxes](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBox)这样做，它们用作矩形地图标签框。我的目标是将它们放在地图上的*所有其他东西*之上，并且它们确实出现在其他所有东西之上（地图、标记、叠加层等）。

# ios - how to creat a graph in simple way in iPad app with some parameters

> ID：10477234
> 
> 赞同：0
> 
> 时间：2012-05-07T05:46:36.393
> 
> 标签：ios, xcode, ipad

I want to create a graph in my ipad which takes 3 to 4 inputs and then creates graph i have found solution using pie chart but i want simple graph with x-axis values and y-axis values.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:59:35.677

If you want to use a complex framework with lot of features, checkout : [Core Plot](http://code.google.com/p/core-plot/).

In case you want simple Graph paper layout,

You will need to subclass UIView and override drawRect and make draw dotted lines using loops.

depending what how many vertical and horizontal lines you can accomodate.

Also for drawing the graph, pass an NSArray to the GraphView containing CGPoints wrapped by NSValue. loop through the points and convert them to physical coordinates of the View.

for this you will need to keep track of how many screen pixels does each x and y unit represent and then little bit of math will give you screen pixels of the GraphView.

Just join the Points by straight lines using Core Graphics functions.

CGContextMoveToPoint and CGContextAddlineToPoint.

You will need to use different CGPaths to draw different components of the view like Graph lines, axis lines and the graph itself.

But if you really need more complex tasks go for Core-Plot.

Checkout Core-Plot examples at :

[http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application](http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)

# android - how to pass stringarraylist values from one class to another class in android

> ID：10477250
> 
> 赞同：0
> 
> 时间：2012-05-07T05:48:21.780
> 
> 标签：android, android-layout

hi i would like to send string arraylist values from one class another class.i tried using bundle concept but in second class in arraylist showing null value.plaese any one suggest me wherre did mistake..

```
 Activity1.class:
 public static ArrayList<String> customers = new ArrayList<String>();
        customers.add("radha");
        customers.add("aswini");
           Intent i=new Intent(Activity1 .this,Activity2.class);
         i.putExtra("customers1", customers);
        Log.i("arrayvalues1",""+ customers);
        startActivity(i);

     Activity2.class:
     String[] mystringArray = getIntent().getStringArrayExtra("customers1");
    Log.i("arrayvalues2",""+ mystringArray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:52:12.027

```
ArrayList<String> mystringArray = getintent().getStringArrayListExtra("customers1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:54:28.240

when the arraylist is public static, you can directly access it using classname.arraylist na.

Activity1.cutomers

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:57:15.940

If you create a public static variable, you can access it in a static way:

In Activity2.class:

Activity1.customers;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T06:18:21.233

For Activity 1:

```
 ArrayList<String> Customers = new ArrayList<String>();
 Intent i=new Intent(Activity1 .this,Activity2.class);
 i.putStringArrayListExtra("customers1",(ArrayList<String>) Customers);         
 startActivity(i); 
```

For Activity 2:

```
 ArrayList<String> Customers = new ArrayList<String>();
 Bundle extra=getIntent().getExtras();
    if(extra!=null){
        Customers =extra.getStringArrayList("customers1");  
    } 
```

# jquery - jquery form validate 返回最后一个元素的错误信息

> ID：10477251
> 
> 赞同：1
> 
> 时间：2012-05-07T05:48:27.967
> 
> 标签：jquery, jquery-plugins

单击提交时，它会显示**最后一个元素的错误消息**（在这种情况下，“请选择您正在寻找的性别”并且在单击表单外的任何位置时，它会返回第一个元素的错误消息。我想要错误消息显示第一个无效元素。请参阅随附的代码。

```
$(function () {
    var form = $('.register form');
    var checkNameResult = $('#checkname-result');
    var validator = form.validate({
        errorPlacement: function (error, element) {
            checkNameResult.empty();
            checkNameResult.append(error);
        }
    });

    $('#Register_UserName').rules("add", {
        required: true,
        remote: "/account/IsUsernameAvailable",
        messages: {
            required: "Please enter a name",
            remote: "Name is not available"
        }
    });
    $("#Register_FirstName").rules("add", {
        required: true,
        messages: {
            required: "Please enter your first name"
        }
    });
    $("#Register_LastName").rules("add", {
        required: true,
        messages: {
            required: "Please enter your last name"
        }
    });

    $("#Register_Password").rules("add", {
        required: true,
        messages: {
            required: "Please enter a valid password"
        }
    });

    $("#Register_Email").rules("add", {
        required: true,
        email: true,
        messages: {
            required: "Please enter your email address",
            email: "Please enter a valid email address"
        }
    });

    $("#Register_Gender_Male").rules("add", {
        required: true,
        messages: {
            required: "Please select your gender"
        }
    });

    $("#Register_InterestedInMale").rules("add", {
        required: function (element) {
            return $('#Register_InterestedInFemale:checked').length == 0;
        },
        messages: {
            required: "Please select an Interested In gender"
        }
    });

    $("#Register_InterestedInFemale").rules("add", {
        required: function (element) {
            return $('#Register_InterestedInMale:checked').length == 0;
        },
        messages: {
            required: "Please select a gender you are Looking For"
        }
    });

    $('#checkname').click(function () {
        if (validator.element($('#Register_UserName')))
            checkNameResult.html("<label class='name-available'>Name is available</label>");
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T13:46:01.703

好吧，我从不尝试验证这样的表格。

以这种方式使用 jquery.validation 插件：

```
$(".selector").validate({
    rules: {
        name: "required",
        email: {
            required: true,
            email: true
        }
    },
    messages: {
        name: "Please specify your name",
        email: {
            required: "We need your email address to contact you",
            email: "Your email address must be in the format of name@domain.com"
        }
   }
}); 
```

我已经使用 Symfony2、Wordpress、CodeIgniter 进行了测试。

# java - 合并 CSS 文件

> ID：10477262
> 
> 赞同：5
> 
> 时间：2012-05-07T05:49:33.853
> 
> 标签：java, css, merge

我必须将 CSS 文件合并到一个大的 CSS 文件中，以减少页面加载期间的连接。基本上，如果我只是将 CSS 文件附加到一个大文件中，这些样式是否会像以前一样工作，或者当您将多个 CSS 文件合并在一起时是否有任何问题？我正在用 Java 开发我的软件，如果有一些库已经进行 CSS 合并，我想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:21:21.810

使用来自 HTML Boilerplate 的[ANT 构建脚本，可以完美地完成您正在尝试的任务。](http://html5boilerplate.com/docs/Build-script/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:04:23.490

我隐约记得（阅读：我可能是错误的和/或过时的）`@charset`如果声明不在文件的开头，某些浏览器会出现问题。这是否延伸到其他@directives，我不记得了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:24:25.550

如果您的 CSS 文件使用`@import`，则将它们合并到一个文件中可能会更改导入的 URL。

当 an`@import`具有相对 URL 时，它会根据包含 CSS 的 URL 进行解析，因此您最终可能会无意中破坏`@import`s。

[http://www.w3.org/TR/css3-values/](http://www.w3.org/TR/css3-values/)

> 为了创建不依赖于资源绝对位置的模块化样式表，作者应该使用相对 URI。相对 URI（如 [URI] 中定义）使用基本 URI 解析为完整 URI。RFC 3986 第 3 节定义了此过程的规范算法。**对于 CSS 样式表，基本 URI 是样式表的，而不是源文档的。**

# javascript - 寻找一种在一个页面上运行多个图像循环器的方法。

> ID：10477263
> 
> 赞同：0
> 
> 时间：2012-05-07T05:49:38.350
> 
> 标签：javascript

我正在开发一个网页布局，该布局在网格中布置了多个图像。我希望这些图像中的几个旋转通过两个或三个不同的图像，其中一些以不同的速度旋转，每个图像之间的淡入淡出效果并不那么突然。我搜索了一个 javascript 程序，但我想出的所有程序似乎都不赞成在页面上同时更改 5 个单独的图像。我已经阅读了一些建议，您可以使用五个不同的名称运行同一个程序五次，但是在我尝试过的每个程序上都失败了（第一个工作正常，其余的只是显示静态图像）。

我现在有一个解决方案，可以让所有五张图像都旋转，但同时没有淡入淡出，所以它看起来像是一次非常生涩、突然的五张图像切换，而不是这里的平滑淡入淡出过渡在那里。此外，在运行几个周期后，它似乎开始变得……卡住了？并且看起来闪烁和怪异。

哦，由于网格布局，每个图像都以特定坐标绝对定位，所以我需要一些不会导致问题的东西（即图像周围没有框架/边框等）。

我目前拥有的看起来像这样：

```
<script type="text/javascript">
var ready = 0;
var which = 1;
function isReady( ) {
++ready;
  if ( ready == 2 ) {
  ready = 0;
  setTimeout("swap()",6000);
  }
}
function swap( ) {
var i1 = document.getElementById("tst1");
var i2 = document.getElementById("tst2");
var i3 = document.getElementById("tst3");
var i4 = document.getElementById("tst4");
var i5 = document.getElementById("tst5");
var cur = which;
which = ( cur == 0 ) ? 1 : 0;
i1.src = i1.src.replace("-" + cur + ".jpg", "-" + which + ".jpg" );
i2.src = i2.src.replace("-" + cur + ".jpg", "-" + which + ".jpg" );
i3.src = i3.src.replace("-" + cur + ".jpg", "-" + which + ".jpg" );
i4.src = i4.src.replace("-" + cur + ".jpg", "-" + which + ".jpg" );
i5.src = i5.src.replace("-" + cur + ".jpg", "-" + which + ".jpg" );
}
</script> 
```

使用此 HTML：

```
<!-- row a --> 
<!-- top row image (140px x 140px) that rotates in square a2--> 
<img id="tst1" class="a2" src="/wp-content/themes/silk/images/home-a2-0.jpg" 
  onload="isReady()"
  alt="brushes"/>

<!-- static image (140px x 140px) in square a3 --> 
<img id="estd" class="a3" src="/wp-content/themes/silk/img/2012-home.gif" alt="2012" />
<!-- top row large image (280px x 280px) that rotates in square a5 -->
<img id="tst2" class="a5" src="/wp-content/themes/silk/images/home-a5-0.jpg" 
  onload="isReady()"
  alt="stations"/>

<!-- row b -->
<!-- static image (280px x 280px) in square b1-->
<div id="logo" class="b1"><h1>Silk the Salon</h1></div>

<!-- static image (140px x 140px) in square b4-->
<img id="b4" class="b4" src="/wp-content/themes/silk/images/home-b4-0.jpg" alt="backsplash" />

<!-- middle row image (140px x 140px) that rotates in square b7 -->
<img id="tst3" class="b7" src="/wp-content/themes/silk/images/home-b7-0.jpg" 
  onload="isReady()"
  alt="floor"/>

<!-- row c -->
<!-- bottom row image (140px x 140px) that rotates in square c3 -->
<img id="tst4" class="c3" src="/wp-content/themes/silk/images/home-c3-0.jpg" 
  onload="isReady()"
  alt="stations2"/>     

<!-- bottom row image (140px x 140px) that rotates in square c3 -->
<img id="tst5" class="c6" src="/wp-content/themes/silk/images/home-c6-0.jpg" 
  onload="isReady()"
  alt="counter"/> 
```

任何人都可以给我的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:48:15.783

您的代码不是很漂亮，可以通过多种方式进行改进。我做了一个简单的 jsFiddle 示例，向您展示一两种方法：http: [//jsfiddle.net/pASkk/](http://jsfiddle.net/pASkk/)

一些评论：

1.  不要使用全局变量，它会与其他代码发生冲突。我制作了一个自动执行的环绕函数来围绕所有代码创建一个闭包。这将保持整洁。

2.  不要使用内联编码（“onload”属性） 将 js 代码与 html 分开。当然，CSS 也是如此。实际上，在我的示例中，我发现 onload 是不必要的。所有代码都在解析完 dom 的一部分后执行，因此在示例中就足够了。您想在页面底部（而不是头部）加载您的 javascript，所以通常这就足够了。如果您想绑定到 onload （而不使用任何库，如 jQuery），请参阅：[http ://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)

3.  使用 setInterval 进行重复交换（或者我在这里误解了你吗？）并且不要使用字符串来调用具有 setInterval 或 setTimeout 的函数；改用匿名函数。

我为单个交换创建了一个单独的函数。我无权访问您的图像源，因此您需要处理这个以按照您想要的方式获得它。如果你想做一些更平滑的图像交换，我建议使用 jQuery fadeIn (http://api.jquery.com/fadeIn/) 或类似的东西。如果您不能使用该库，您可以查看他们的源代码以了解他们是如何制作的。

祝你好运

# ext.net - ext.net 中的“通信故障”

> ID：10477264
> 
> 赞同：0
> 
> 时间：2012-05-07T05:49:41.820
> 
> 标签：ext.net

我正在使用 iTextSharp 将网格数据导出到 PDF 文件。我正在搜索 billno，获取的数据与网格和控件相关（在 ext.net 中）。可以通过 3 种方式进行搜索： 1\. 通过插入 billno 并在组合框中按 Enter 2\. 通过插入 billno 并单击组合中的触发器 3\. 通过从组合中选择 billno 现在我单击 ToPDF 按钮导出数据。如果我执行 2 & 3，它工作正常，但是当我执行 1 时，会出现一个窗口，标题为***Request failure, Status text-communication failure***。由于网格数据也被导出，但是这个窗口似乎我没有得到。

**我的代码如下** ***.cs***

```
protected void ToPDF(object sender, EventArgs e)
{
      //Code
} 
```

***.aspx***

```
 <ext:ComponentMenuItem ID="ComponentMenuItem1" runat="server">
                                                        <Component>
                                                               <ext:ComboBox ID="cmbSearchBillno" runat="server" 
                                                                    EmptyText="Select Bill No" 
                                                                    ForceSelection="true"   
                                                                    StoreID="BillMasterStore"  
                                                                    DisplayField="Billno" ValueField="BillId">
                                                                    <Triggers>
                                                                        <ext:FieldTrigger Icon="Search" />
                                                                    </Triggers>
                                                                     <Listeners>
                                                                        <SpecialKey Fn="enterKeyPressHandler" />
                                                                    </Listeners>
                                                                    <DirectEvents>
                                                                         <%--<SpecialKey OnEvent="enterKeyPressHandler" ShowWarningOnFailure="false" Timeout="60000" StopEvent="true">
                                                                            <ExtraParams>
                                                                                <ext:Parameter Name="key" Value="e.getKey()" Mode="Raw">
                                                                                </ext:Parameter>
                                                                                <ext:Parameter Name="BillNo" Value="this.getText()"  Mode="Raw"></ext:Parameter>
                                                                            </ExtraParams>
                                                                        </SpecialKey>--%>
                                                                        <Select OnEvent="ChangeBillno">
                                                                            <ExtraParams>
                                                                                <ext:Parameter Name="BillNo" Value="record.id" Mode="Raw"></ext:Parameter>
                                                                            </ExtraParams>
                                                                        </Select>
                                                                        <TriggerClick OnEvent="SearchBillDetails" >
                                                                            <ExtraParams>
                                                                                <ext:Parameter Name="BillNo" Value="this.getText()" Mode="Raw"></ext:Parameter>
                                                                            </ExtraParams>
                                                                        </TriggerClick>
                                                                    </DirectEvents> 

                                                                </ext:ComboBox>
                                                        </Component>                        
                                                    </ext:ComponentMenuItem> 
```

**转PDF按钮**

```
 <ext:Button ID="btnPdf" runat="server" Text="To PDF" AutoPostBack="true" OnClick="ToPDF"  Icon="PageWhiteAcrobat">
                                        <Listeners>
                                            <Click Fn="saveData" />
                                        </Listeners>
                                     </ext:Button> 
```

**脚本**

```
<script type="text/javascript">

       var enterKeyPressHandler = function (f, e) {
           if (e.getKey() == e.ENTER) 
           {
                var billno=this.getText();
                Ext.net.DirectMethods.SearchBillno(billno);

                e.stopEvent();
                this.send();
           }
       }

         var saveData = function () {
           GridData.setValue(Ext.encode(GridService.getRowsValues({selectedOnly : false,excludeId:true})));
        };

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:23:55.037

是的，当您使用回车键搜索时它会抛出错误，这是因为您在侦听器中使用直接方法来填充网格。通过查看您的代码，我可以看到您使用了您之前评论过的直接事件特殊键..使用该直接事件特殊键，它将起作用

# c++ - 在 WM_LBUTTONDOWN 消息中获取鼠标坐标

> ID：10477265
> 
> 赞同：4
> 
> 时间：2012-05-07T05:49:45.357
> 
> 标签：c++, winapi

结构`MSG`如下：

```
typedef struct tagMSG {
  HWND   hwnd; 
  UINT   message; 
  WPARAM wParam; 
  LPARAM lParam; 
  DWORD  time; 
  POINT  pt; 
} MSG, *PMSG; 
```

消息流程如下：

```
long WINAPI WndProc(HWND hWnd, UINT iMessage, UINT wParam, LONG lParam) 
```

**我的问题**：在消息过程中，为什么它不将`POINT`变量传递给窗口过程，以及如何找到鼠标`POINT`？由`GetCursorPos()`? 我找到了一些`LOWORD(lParam), HIWORD(lParam)`直接获取它的例子..你能告诉我有关它的信息吗？谢谢你...

我看到有人写这个，对吗？我不确定：

```
RECT rect1;
long WINAPI WndProc(HWND hWnd,UINT iMessage,UINT wParam,LONG lParam)
{
    HDC hDC;        
    WORD x,y;   
    PAINTSTRUCT ps;     

    x = LOWORD(lParam); 
    y = HIWORD(lParam);

    switch(iMessage)
    {
    case WM_LBUTTONDOWN:
        if(wParam&MK_CONTROL)
        {
            rect1.left = x; 
            rect1.top = y;
        }
        else if(wParam&MK_SHIFT)
        {
            rect1.left = x; 
            rect1.top = y;
        }
        break;

    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;
    default:
        return(DefWindowProc(hWnd,iMessage,wParam,lParam));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T07:31:27.537

> 在进程函数中，为什么不将 POINT 变量传递给进程函数，以及如何找到鼠标的 POINT ？

如果您真的需要，可以使用单独的函数来检索该信息。大多数消息处理程序不处理鼠标输入，并且为几乎永远不会使用它们的消息处理程序传递额外的参数是没有意义的。（可以说`WndProc`可以定义为`MSG*`；我不知道其设计的原因，但我猜随着时间的`MSG`推移，成员被添加到结构中。）

> 通过 GetCursorPos() ？

No.`GetCursorPos`将返回光标的*当前*位置，该位置可能与生成消息时的位置不同。你反而想要[`GetMessagePos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644938.aspx). （这类似于[`GetAsyncKeyState`vs`GetKeyState`](http://blogs.msdn.com/b/oldnewthing/archive/2004/11/30/272262.aspx)。）

类似地，消息处理程序可以通过 获取消息时间[`GetMessageTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644939.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T06:10:22.223

坐标不会消失。他们在`lParam`. 请参阅[MSDN 上的 WM_MOUSEMOVE 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616%28v=vs.85%29.aspx)：

```
A window receives this message through its WindowProc function.
...
lParam

    The low-order word specifies the x-coordinate of the cursor.
The coordinate is relative to the upper-left corner of the client area.

    The high-order word specifies the y-coordinate of the cursor.
The coordinate is relative to the upper-left corner of the client area.
...
Use the following code to obtain the horizontal and vertical position:

xPos = GET_X_LPARAM(lParam);
yPos = GET_Y_LPARAM(lParam); 
```

# objective-c - Xcode 警告：未使用的实体问题：未使用的变量

> ID：10477266
> 
> 赞同：5
> 
> 时间：2012-05-07T05:50:21.350
> 
> 标签：objective-c, ios, xcode

我正在研究这个教程应用程序，代码给了我这个警告：

> Xcode 警告：未使用的实体问题：未使用的变量

执行此语句时出现错误：

```
int newRowIndex = [self.checklist.items count]; 
```

是什么原因造成的？我应该采取哪些步骤来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T05:53:01.607

该变量`newRowIndex`已初始化，但未在其他任何地方使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T05:53:23.063

此警告仅表示您创建了一个变量 ，`newRowIndex`但没有在任何地方使用它。

要使警告静音，请在`int`某处使用它，例如

```
int newRowIndex = [self.checklist.items count];
NSLog(@"New Row Index: %i", newRowIndex); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-03T17:50:46.567

这可能是因为您的构建设置可能会将警告标记为错误。

您可以通过搜索“警告策略”并将“将警告视为错误”设置为“否”来消除警告（不建议，但如果您只是想确保可以构建某些东西）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T09:20:54.057

如果您真的不想再收到此类警告，请执行以下操作：

1.  转到项目的构建设置
2.  找到“**其他警告标志**”选项
3.  删除**-Werror**和**-Wno-unused-parameter**

# jquery - 如何在 JavaScript 警报的情况下禁用整个 HTML 页面？

> ID：10477267
> 
> 赞同：6
> 
> 时间：2012-05-07T05:50:25.203
> 
> 标签：jquery, css

我正在用 JSP/HTML 开发一个网页，在该网页中，我必须在按钮单击事件上禁用/“灰屏”整个网页，以便最终用户在禁用之前无法访问网页中的其他元素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T05:53:13.870

CSS：

```
#cover {
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   opacity: 0.80;
   background: #aaa;
   z-index: 10;
   display: none;
} 
```

HTML：

```
<body>
<div id="wrap">
 // your normal contents here
</div>
<div id="cover"> </div>
</body> 
```

jQuery：

```
//trigger on whatever event required.
$("#cover").fadeIn(100);
alert("something");
$("#cover").fadeOut(100); //after done. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T05:58:25.120

您可以使用**[jQuery BlockUI](http://malsup.com/jquery/block/)**插件。

很简单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-04T11:09:46.053

有可能实现这一点.. 但我遇到的最简单的方法是使用 div 标签覆盖页面，然后在事件完成时将其删除

```
$('body').append('<div id="over" style="position: absolute;top:0;left:0;width: 100%;height:100%;z-index:2;opacity:0.4;filter: alpha(opacity = 50)"></div>'); 
```

这将为整个身体添加一个 div 标签。在​​函数的末尾包含这个

```
$("#over").remove(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T05:51:45.763

如果您可以使用 JQuery，并且需要在灰色区域顶部进行一些用户输入，请尝试[JQUery UI Dialog](http://jqueryui.com/demos/dialog/)，并将其设置为[模态](http://jqueryui.com/demos/dialog/modal-form.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T05:53:57.067

基本技术是在所有内容之上添加一个 100% 宽度和高度的 div。

```
$('body').append('<div class="cover"/>').css({
    position: 'absolute',
    height: '100%',
    width: '100%',
    zIndex: '999'
}); 
```

然后制作你的模态窗口`z-index: 1000`。

# performance - Sencha Touch - senchatouch js 大小的性能问题

> ID：10477278
> 
> 赞同：0
> 
> 时间：2012-05-07T05:52:09.993
> 
> 标签：performance, sencha-touch

我已经使用 sencha touch 构建了应用程序，除了初始加载时间的初始问题外，它一切正常。我已经制作了它的本机应用程序。使用 phonegap，构建了它的 jsb3 文件和 app-all.js 使用它。但它与 sencha-touch.js 无关，它的原始大小约为 2.4 MB，缩小后的大小也约为 600 Kb，对于移动/平板电脑来说非常大。

有没有像我们可以仅将 sencha.js 用于我们在 app 中使用的那些组件的东西？或任何其他减少大小或初始加载时间的方法？

请为此提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:29:34.937

[您可以使用Sencha SDK Tools](http://www.sencha.com/products/sdk-tools)构建本机应用程序。

如果您的项目结构正确，您可以使用以下命令来构建您的原生应用程序。这也将缩小您的 javascript 大小：

```
C:\wamp\www\SenchaApp>sencha app build -e native -d pkg/native -a archive
[INFO] Deploying your application to C:\wamp\www\SenchaApp\pkg\native
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/loading
[INFO] Copied resources/data
[INFO] Resolving your application dependencies...
[INFO] Found 18 dependencies. Concatenating all into app.js...
[INFO] Processed sdk/sencha-touch.js
[INFO] Minifying sdk/sencha-touch.js
[INFO] Processed app.js
[INFO] Minifying app.js
[INFO] Minifying resources/css/app.css
[INFO] Minified app.js
[INFO] Minified sdk/sencha-touch.js
[INFO] Minified resources/css/app.css
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Packaging your application as a native app... 
```

# jquery - Jquery 悬停显示

> ID：10477279
> 
> 赞同：1
> 
> 时间：2012-05-07T05:52:11.400
> 
> 标签：jquery

我试图有一个简单的按钮，当悬停在它上面时会显示我的 div。我的第一次尝试是这样的：

```
$('.headerUserPreferences a').hover(function() {
    $('.headerUserPreferencesLinks').stop().toggle();
}, function() {
    $('.headerUserPreferencesLinks').mouseOut(function() {
        $(this).hide();
    });
}); 
```

但这里的问题是您必须再次将鼠标悬停在按钮上才能使 div 隐藏。只要您将鼠标悬停在按钮或 div 上，div 就会显示，而当您离开 div 或按钮时，div 将不再显示，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:56:21.370

我更喜欢使用`mouseenter`和`mouseleave`

```
$("div.enterleave").mouseenter(function(){
     // code div display
    }).mouseleave(function(){
     // code div hide
    }); 
```

希望这个例子会有所帮助..

更多参考[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T05:55:27.133

```
$('.headerUserPreferences a').mouseover(function() {
    $('.headerUserPreferencesLinks').stop().toggle();
}, function() {
    $('.headerUserPreferencesLinks').mouseout(function() {
        $(this).hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:00:15.347

```
$('.headerUserPreferences a').hover(function() { 
    $('.headerUserPreferencesLinks').toggle(); 
});

$('.headerUserPreferencesLinks').mouseout(function() { 
        $(this).hide(); 
}); 

$('.headerUserPreferencesLinks').mouseover(function() { 
        $(this).show(); 
}); 
```

# java - 请告诉我何时在 java 中使用 getInstance() 方法。

> ID：10477281
> 
> 赞同：22
> 
> 时间：2012-05-07T05:52:15.420
> 
> 标签：java, jakarta-ee, blackberry

java中什么时候使用getInstance()方法，getInstance(null)是什么意思？

```
locationProvider = LocationProvider.getInstance(null); 
```

谁能告诉我上面这行的意思？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-07T05:54:19.940

使用`getInstance()`方法等的类属于[单例设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)。基本上，该特定类只会有一个实例，您可以使用`getInstance()`.

在这种情况下，`LocationProvider`只会有一个实例，因为它是特定于设备的。您可以通过使用该`getInstance()`方法来使用共享实例，而不是创建它的新实例。在处理数据管理器和硬件接口之类的事情时，Java 中经常使用单例模式，但它不应该用于太多其他事情，因为它将您限制在单个实例中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T05:56:13.710

方法`getInstance()`称为工厂方法。它用于创建单例类。这意味着只会创建该类的一个实例，而其他实例将获得该类的引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T05:56:17.953

以下代码将为您提供纬度和经度。getInstance() 将返回该特定类的实例。

```
 Criteria myCriteria = new Criteria();
    myCriteria.setCostAllowed(false);
    LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria);
    Location myLocation = myLocationProvider.getLocation(300);
    latitude  = myLocation.getQualifiedCoordinates().getLatitude();
    longitude = myLocation.getQualifiedCoordinates().getLongitude(); 
```

# javascript - 接受警报后做某事

> ID：10477283
> 
> 赞同：2
> 
> 时间：2012-05-07T05:52:35.747
> 
> 标签：javascript, jquery

当用户接受警报时，我想执行一些代码，我知道这一点：

```
if(confirm("Go to the next step"))  
  {
    document.write("accepted");
  }  
else{  
   document.write("rejected");  
} 
```

关键是我希望该框像普通警报一样只有一个按钮，通过单击它我可以执行某些操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T05:57:09.483

您可以`alert`在 javascript 中使用该命令：http: [//www.w3schools.com/js/js_popup.asp](http://www.w3schools.com/js/js_popup.asp)

`alert`我相信在警报窗口关闭后执行该行之后放置的任何 javascript 代码行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:37:08.330

*   `alert()`- 一键（确定）尝试演示：http: [//jsfiddle.net/DerekL/3R3yV/](http://jsfiddle.net/DerekL/3R3yV/)
*   `confirm()`- 两个按钮（确定，取消）
*   `prompt()`- 两个按钮 + 一个输入字段（确定，取消）

对于其他按钮，您可能想尝试[jQuery UI](http://jqueryui.com)。 ![在此处输入图像描述](../Images/27757460568784acc0e54dc31d1a2601.png)

> jQuery 用户界面确实允许开发人员创建自定义对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T05:59:03.960

`alert`当用户单击 OK 时，您放置的任何语句都将被执行。
[小提琴](http://jsfiddle.net/RvPsx/1/)
当您说警报用户除了单击确定之外别无其他选择。

# gwt - GWT CkEditor 加载问题

> ID：10477287
> 
> 赞同：0
> 
> 时间：2012-05-07T05:53:05.757
> 
> 标签：gwt

```
I am using GWT-CKEditor in my application. When I am trying to load it, it gives following Exception..

Caused by: com.google.gwt.user.client.ui.AttachDetachException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.user.client.ui.AttachDetachException.tryCommand(AttachDetachException.java:87)
    at com.google.gwt.user.client.ui.Panel.doAttachChildren(Panel.java:170)
    at com.google.gwt.user.client.ui.Widget.onAttach(Widget.java:345)
    at com.google.gwt.user.client.ui.AttachDetachException$1.execute(AttachDetachException.java:34)
    at com.google.gwt.user.client.ui.AttachDetachException.tryCommand(AttachDetachException.java:74)
    ... 95 more
Caused by: com.google.gwt.core.client.JavaScriptException: (TypeError): $wnd.CKEDITOR is undefined
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)
    at com.axeiya.gwtckeditor.client.CKEditor.replaceTextArea(CKEditor.java)
    at com.axeiya.gwtckeditor.client.CKEditor.initInstance(CKEditor.java:178)
    at com.axeiya.gwtckeditor.client.CKEditor.onLoad(CKEditor.java:169)
    at com.google.gwt.user.client.ui.Composite.onAttach(Composite.java:179)
    at com.google.gwt.user.client.ui.AttachDetachException$1.execute(AttachDetachException.java:34)
    at com.google.gwt.user.client.ui.AttachDetachException.tryCommand(AttachDetachException.java:74)
    ... 99 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:54:47.970

好吧，我忘了在 html 文件中提供脚本。这就是我们实现这一目标的方法。它的工作..

```
<script type="text/javascript" src="/v4workflow/ckeditor/ckeditor.js?t={timestamp}"></script> 
```

# c++ - c++ std::tr1::hash::operator() 未定义？

> ID：10477292
> 
> 赞同：1
> 
> 时间：2012-05-07T05:53:29.787
> 
> 标签：c++, visual-c++, gcc, c++11, tr1

我正在将 C++ 程序从使用 Visual C++ 2008 构建的 Windows 转换为使用 gcc 4.6.1 在 Linux 上构建。有一个模块使用`<unordered_map>`. 在 VC++ 中，似乎完全可以

```
#include <unordered_map>

...

std::tr1::unordered_map<mystruct, int> my_map; 
```

我们实际上支持的编译器不仅仅是 gcc 4.6 和 VC++ 2008，因此使用纯 C++2011 代码是不可行的。gcc 对此感到不安`#include <unordered_map>`，抱怨这是真正的蓝色 c++2011 包含文件，所以我必须做的一件事就是将包含更改为

```
#include <tr1/unordered_map>

...

std::tr1::unordered_map<mystruct, int> my_map; 
```

这行得通。很公平。不过，现在我遇到了另一个问题。这是 mystruct 的定义：

```
struct mystruct
{
#ifdef __cplusplus
    inline operator size_t() const
    {
        return m_val;
    }
#endif
    unsigned int m_val;
}; 
```

在 VC++ 2008 中，这似乎`std::hash`需要专攻`mystruct`. `std::tr1::hash`，另一方面，不喜欢这样，至少在 gcc 4.6.1 上不喜欢。它拒绝链接，抱怨`std::tr1::hash<mystruct>::operator()( mystruct ) const`未定义。我不确定当我做正确的`tr1`包含时 VC++ 是否会发生这种情况——也许它会抱怨同样的事情？我明天试试，但现在我只有一个带有 gcc 的 linux 盒子。现在，我必须这样做才能让它工作：

```
namespace std {
    namespace tr1 {
        std::size_t hash<mystruct>::operator()( mystruct & c ) const 
        { 
            return c.m_val; 
        }
    }
} 
```

谁能告诉我这应该如何工作？能够在您希望可散列的类型上定义运算符似乎更加优雅`size_t`，但我愿意接受定义`operator()`on `std::tr1::hash`。

更新：

按照建议，我尝试专门研究整个哈希类。用 gcc 构建，我得到

```
myfile.cpp:41:12: error: specialization of 'std::tr1::hash<mystruct>' after instantiation
myfile.cpp:41:12: error: redefinition of 'struct std::tr1::hash<mystruct>'
/usr/include/c++/4.6/tr1/functional_hash.h:45:12: error: previous definition of 'struct std::tr1::hash<mystruct>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T06:10:53.083

微软接受隐式转换的方式`std::size_t`是一种扩展。

GCC 的方式，专门`std::tr1::hash`化，是 TR1 实际定义的方式，现在在 C++11 中标准化（当然，`tr1::`部分被删除了）。

MSVC 仍应接受特化`hash`，当然两者都应接受作为 Hasher 模板参数传递的全新类。

专门化整个类是更好的风格，而不仅仅是`operator()`功能：

```
namespace std {
    namespace tr1 {
        template<>
        struct hash< mystruct > {
            std::size_t operator()( mystruct & c ) const 
            { 
                return c.m_val; 
            }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:07:55.160

由于您`mystruct`是由用户定义的，因此您需要为以下内容提供哈希函数`unordered_map`：

```
struct my_hash {
std::size_t operator()( mystruct & c ) const 
        { 
            return c.m_val; 
        }
};

std::tr1::unordered_map<mystruct, int, my_hash> my_map; 
```

# mysql - Rake 在 Mac OS X Lion 中显示连接错误

> ID：10477293
> 
> 赞同：0
> 
> 时间：2012-05-07T05:53:46.043
> 
> 标签：mysql, ruby-on-rails

我正在尝试在 Mac OS X Lion 中设置 rails 2.2.2 应用程序。在执行“rake db:migrate”时，出现以下错误：

```
rake aborted!
No connection to server

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我已经使用以下命令安装了 mysql gem：

```
env ARCHFLAGS="-arch x86_64" gem install mysql -v='2.8.1' -- --with-mysql-dir=/usr/local/mysql --with-mysql-lib=/usr/local/mysql/lib --with-mysql-include=/usr/local/mysql/include --with-mysql-config=/usr/local/mysql/bin/mysql_config 
```

我可以在 config/database.yml 中使用具有相同信息的 mysql 客户端连接到 mysql 服务器。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:07:10.093

您的配置看起来不错，这可能是由于 rake 失败的其他一些依赖关系。如果您执行 rake db:migrate --trace，也许您可​​以更好地看到这一点。

在 rails 应用程序的上下文中，rake db:migrate 运行 rails 应用程序中包含的所有 gem。您看到的错误可能是由于其他宝石的一些问题。您可以通过查看 rake 返回的跟踪并查看损坏的内容来检查这一点。

# python - 如何使用 Python 结合正则表达式和字符串/文件操作在文本文件中搜索模式并存储模式的实例？

> ID：10477294
> 
> 赞同：62
> 
> 时间：2012-05-07T05:53:47.920
> 
> 标签：python, regex, file-io, text-mining, string-parsing

所以基本上我正在寻找一个文本文件中两个尖括号内的 4 位代码。我知道我需要打开文本文件然后逐行解析，但我不确定在检查“文件中的行”之后构建代码的最佳方法。

我想我可以以某种方式拆分、剥离或分区，但我还编写了一个正则表达式，我在上面使用了编译，所以如果它返回一个匹配对象，我认为我不能将它与那些基于字符串的操作一起使用。另外我不确定我的正则表达式是否足够贪婪......

我想将找到的命中的所有实例作为字符串存储在元组或列表中。

这是我的正则表达式：

```
regex = re.compile("(<(\d{4,5})>)?") 
```

考虑到到目前为止它相当基本，我认为我不需要包含那么多代码。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-07T06:14:07.493

```
import re
pattern = re.compile("<(\d{4,5})>")

for i, line in enumerate(open('test.txt')):
    for match in re.finditer(pattern, line):
        print 'Found on line %s: %s' % (i+1, match.group()) 
```

关于正则表达式的几点说明：

*   如果您不想将数字与尖括号匹配，则不需要`?`末尾和外部，而只需要数字本身`(...)`
*   它匹配尖括号之间的 4 位或 5 位数字

**更新：**了解正则表达式中的*匹配*和*捕获*可能完全不同，这一点很重要。*上面代码片段中的正则表达式与带*尖括号的模式匹配，但我要求仅捕获内部数字，*而不*捕获尖括号。

更多关于 python 中的正则表达式可以在这里找到： [正则表达式 HOWTO](https://docs.python.org/2/howto/regex.html)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-07T06:13:22.823

一口气读完：

```
import re

textfile = open(filename, 'r')
filetext = textfile.read()
textfile.close()
matches = re.findall("(<(\d{4,5})>)?", filetext) 
```

逐行：

```
import re

textfile = open(filename, 'r')
matches = []
reg = re.compile("(<(\d{4,5})>)?")
for line in textfile:
    matches += reg.findall(line)
textfile.close() 
```

但是同样，除非您添加了偏移计数器，否则返回的匹配项除了计数之外没有任何用处：

```
import re

textfile = open(filename, 'r')
matches = []
offset = 0
reg = re.compile("(<(\d{4,5})>)?")
for line in textfile:
    matches += [(reg.findall(line),offset)]
    offset += len(line)
textfile.close() 
```

但是一次读取整个文件仍然更有意义。

# android - 在哪里获得 NavUtil 类？

> ID：10477296
> 
> 赞同：3
> 
> 时间：2012-05-07T05:53:50.307
> 
> 标签：android

我希望`NavUtils (http://developer.android.com/reference/android/support/v4/app/NavUtils.html)`在`v4 android compatibility libraries for Efficency Navigation`. v4 jar似乎**不包含此类**。此外，NavUtils 似乎不在 android 支持项目的 master 分支中。

谁能告诉我如何获得 NavUtils ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:54:58.580

我认为您计算中的 android-support-v4.jar 是旧版本。所以你应该更新你的图书馆。support-v4 的最新版本是 8。

使用 Android SDK Manager 查看最新版本。

# wcf - Windows 7 Home Premium 下自托管 WCF 服务的问题

> ID：10477303
> 
> 赞同：0
> 
> 时间：2012-05-07T05:54:33.827
> 
> 标签：wcf

我在 Windows 窗体工具托盘应用程序中自行托管 WCF 服务。

在 Windows 7 Professional 下，我可以与该服务成功通信，但在 Windows Home Premium 下，我必须以管理员身份运行该应用程序。

任何想法为什么会发生这种情况以及我可以在家庭高级版下做什么，这样我就不必以管理员身份运行？

更多信息

我不相信 UAC 已在 Win 7 Pro 上关闭。我在 2 个 Win 7 Pro 盒子上试了一下，都可以工作。

我正在使用 basicHttpBinding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:27:41.300

有关使用 basicHTTPBinding 的 WCF 服务的用户权限的更多信息：http: [//social.msdn.microsoft.com/Forums/en-US/wcf/thread/b9cdcef2-b39c-498f-b7a9-dbedf3f84163/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/b9cdcef2-b39c-498f-b7a9-dbedf3f84163/)

# thread-safety - jBPM executionservice 多线程安全吗？

> ID：10477304
> 
> 赞同：0
> 
> 时间：2012-05-07T05:54:41.293
> 
> 标签：thread-safety, jbpm

jBPM executionservice 多线程安全吗？那就是我们可以说

```
startProcessInstanceById 
```

同时来自多个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:47:11.993

这确实是多线程安全的。我是通过自己的实验发现的。

# java - Java - IF 'input' = 'this' {将字符串从数组存储到变量}

> ID：10477306
> 
> 赞同：2
> 
> 时间：2012-05-07T05:54:55.107
> 
> 标签：java, arrays, if-statement, store

我对编程比较陌生。我现在正在尝试制作一个程序，并且我正在尝试弄清楚我该如何做某事。我希望你们能帮助我，因为我只是不知道如何做到这一点......

所以，首先，我做了一个数组并用东西填充它：

```
String[] pizza = new String[10];
    pizza[0] = "1- Cheese";
    pizza[1] = "2- Wedge";
    pizza[2] = "3- Bacon";
    pizza[3] = "4- Hawaiian";
    pizza[4] = "5- Vegetarian";
    pizza[5] = "6- Pepperoni";
    pizza[6] = "7- Ham";
    pizza[7] = "8- Apple";
    pizza[8] = "9- Grape";
    pizza[9] = "10- Italian"; 
```

我想这样做，以便我有一个 IF 语句（在一段时间内）。我只是把代码放在这里，然后解释。

```
int pizzaCounter = 0;

        while(pizzaCounter < 5)
        {

            Scanner pizzaPick = new Scanner(System.in);
            int Pizzas = pizzaPick.nextInt();

            if (Pizzas == 1)
            {
                *Store "1- Cheese" (From pizza[0]) into a variable*

                pizzaCounter++;
            }
            if (Pizzas == 2)
            {
                *Store "2- Wedge" (From pizza[0]) into a variable*

                pizzaCounter++;
            }
            if (Pizzas == 3) etc...

        } 
```

现在在**“在此处插入一些东西”**位，我想尝试使其将数组（披萨）中的文本存储到一些我可以稍后打印出来的变量中......例如，如果用户输入'1 ' 然后它需要：“1-Cheese”并将其存储在一个变量中，我可以稍后打印出来......

另外，我想让它干净，这样就没有 10 个 IF 语句提示每个变量的事情......？

我不知道这是否可能，但非常感谢任何帮助！:D

我希望我在这里问的问题是可以理解的......

如果可能的话，请您解释一下您在每个步骤中所做的事情，以便我能够真正理解正在发生的事情，并且以后可能会使用相同的代码，而不是仅仅复制并粘贴代码？我是个菜鸟，所以我认为我学的越多，以后可以使用的越多……非常感谢！:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:58:43.490

您可以将整个系列`if`语句替换为以下内容：

```
string saveName = "";
if ((Pizzas >= 0) && (Pizzas <= 9)) {
    saveName = pizza[Pizzas];           // This is "insert something here".
    pizzaCounter++;
}

// Here, saveName has the pizza name. 
```

* * *

对于允许您最多订购五个比萨饼、保存批次并在最后打印出来的完整程序，请参见下文：

```
import java.util.Scanner;

public class testprog {
    public static void main (String args[]) {
        String[] pizzaList = {" 0 - End of order",
            " 1 - Cheese", " 2 - Wedge", " 3 - Bacon", " 4 - Hawaiian",
            " 5 - Vegetarian", " 6 - Pepperoni", " 7 - Ham", " 8 - Apple",
            " 9 - Grape", "10 - Italian"};

        int[] orderList = new int[5];  // Ordered pizzas
        int pizzaCount = 0;            //    and count.

        Scanner pizzaPick = new Scanner(System.in);
        while (pizzaCount < 5) {
            // Output the menu.

            System.out.println ("Choose a pizza:");
            for (int i = 0; i < pizzaList.length; i++)
                System.out.println ("   " + pizzaList[i]);

            // Get input, check, and add pizza.

            int thisPizza = pizzaPick.nextInt();
            if (thisPizza == 0) break;

            if ((thisPizza > 0) && (thisPizza < pizzaList.length))
                orderList[pizzaCount++] = thisPizza;

            if ((thisPizza < 0) || (thisPizza >= pizzaList.length))
                System.out.println ("Invalid input of " + thisPizza);
        }

        // Output all pizzas.

        for (int i = 0; i < pizzaCount; i++)
            System.out.println ("Ordered: " + pizzaList[orderList[i]]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:09:03.460

您可以在此处执行一些操作来优化代码。首先，放弃 while 循环以支持 for 循环，如下所示：

```
for (int i = 0; i < 5; i++) {
    // Will loop 5 times
} 
```

其次，您*可以*将 if 语句替换为 switch 语句，如下所示：

```
switch (pizzaPick.nextInt()) {
    case 0:
        // Do something
        break;
    case 1:
        // Do something else
        break;
    case 2:
        // Etc.
        break
} 
```

但是，我们实际上可以进一步优化它，这将完全不需要 switch 语句。不过，首先，我们需要一个变量来存储挑选的比萨饼。我们可以使用另一个数组，它有 5 个元素长。像这样创建它：

```
String[] pickedPizzas = new String[5]; 
```

现在我们可以用它来存储挑选的比萨饼。然后我们可以在每个循环中执行此操作以保存挑选的比萨饼：

```
pickedPizzas[i] = pizza[pizzaPick.nextInt()]; 
```

如您所见，我们甚至不需要使用 ifs 或 switch，因为我们可以使用赋值。我们可以通过对数组使用括号语法来继续优化。您可以像这样初始化数组：

```
String[] strArray = {"one", "two", "three", ...}; 
```

这节省了空间并且更简单。最重要的是，将扫描仪的声明移到循环之外。由于循环的范围，将其放置在循环内将导致每次循环执行时重新创建和销毁它。将它放在循环之外将解决这个问题。

以下是最终代码的样子：

```
// Hold all the pizza names
String[] pizzas = {
    "1- Cheese",
    "2- Wedge",
    "3- Bacon",
    "4- Hawaiian",
    "5- Vegetarian",
    "6- Pepperoni",
    "7- Ham",
    "8- Apple",
    "9- Grape",
    "10- Italian"
    };

// Create a variable to hold the selected pizzas
String[] pickedPizzas = new String[5];

// Create Scanner outside loop
Scanner scanner = new Scanner(System.in);

// Loop to get picked pizzas
for (int i = 0; i < 5; i++) {
    // Save picked pizza, subtracting 1 since arrays start at 0
    pickedPizzas[i] = pizzas[scanner.nextInt() - 1];
}

// Do stuff with the users picked pizzas! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:07:48.843

不要`Pizzas`在 Java 中对本地原语使用大写单词 ( )。按照惯例，这些是类名。

无论值如何，您都想区分相同的内容——例如，你每次`Pizzas`递增——并将其排除在 if/else 之外。`pizzaCounter`如果您需要做的只是获取披萨类型的名称，那么这里有几个示例说明您根本不需要一组案例，您只需要为任何后续使用分配。

如果每个案例有一些独特的东西，您可以使用`switch`：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

顺便说一句，您可以像这样初始化数组：

```
String eg[] = {
   "one",
   "two",
   "three",
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T06:02:49.153

```
String[] PIZZA_LABELS = new String[]{ "1- Cheese", "2- Wedge" ... }
String label;
while(pizzaCounter < 5)
{
        Scanner pizzaPick = new Scanner(System.in);
        int Pizzas = pizzaPick.nextInt();
        label  = PIZZA_LABELS[Pizzas - 1]; // 1-indexed vs 0-indexed
        ...
        System.out.println(label); 
```

“如果”消失了。（我鼓励您查看 java.util.Map 以获得比标签数组更简洁的数据结构）。

# java - 如何在mysql中存储当前日期和时间

> ID：10477308
> 
> 赞同：1
> 
> 时间：2012-05-07T05:55:08.440
> 
> 标签：java, mysql, database

我有一个 java 程序，我使用 java.util.Date 来获取当前日期和时间，我在 mysql 中有一个表，其中有一个字段为

```
ActivityTime date; // date is the type 
```

我使用准备好的语句插入表中。

```
java.util.Date today = new java.util.Date();
long t = today.getTime();

PreparedStatement ps = con.prepareStatement(
                "insert into UserActivity values (?, ?, ?, ?, ?, ?)");
....
ps.setDate(5, new java.sql.Date(t));
.... 
```

日期在输出中显示正确，但时间是 00:00:00 我不知道为什么会这样？也请帮我取时间。当我打印 java.util.date 时显示正确的时间。问题是如何将时间插入到 sql 表中。

PS：可能这很简单，但java api对我来说是新的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T05:59:19.217

我建议使用 MySQL 日期时间字段类型，然后使用该函数`NOW()`向其中插入一个值。

您可以像这样插入日期：

```
INSERT INTO `table-name`(`DATETIME-FIELD-NAME`) VALUES(NOW()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T05:57:59.410

你可能需要`java.sql.Timestamp`，更好的是你可以在数据库端处理这个，只需设置默认值

```
create table test (ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:04:58.183

```
PreparedStatement ps = con.prepareStatement(
                "insert into UserActivity values (?, ?, ?, ?, ?, ?)");
....
ps.setDate(5, new Timestamp(System.currentTimeMillis()));
.... 
```

* * *

希望对你有帮助

# linux - 什么替代 fuse.ko 作为 fuse 2.9 中的内核模块

> ID：10477309
> 
> 赞同：0
> 
> 时间：2012-05-07T05:55:12.140
> 
> 标签：linux, linux-kernel, fuse

为了将保险丝移植到其他嵌入式Linux平台，如android，我成功交叉编译保险丝项目。据我所知，保险丝只有在内核中插入保险丝模块时才能工作。当在fuse 2.2.1或其他低版本，make后会产生fuse.ko。BUt，现在，我用的是fuse 2.9.0，没有这样的ko输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:38:57.203

fuse 模块现在进入主线内核。您应该在内核配置的文件系统部分下选择“FUSE（用户空间中的文件系统）支持”。

# python - 是否可以在 Bottle Web 框架中运行任务调度程序

> ID：10477310
> 
> 赞同：2
> 
> 时间：2012-05-07T05:55:20.987
> 
> 标签：python, task, scheduler, bottle

有没有人有任何关于如何在 Bottle 中集成任务调度程序的示例。像 APScheduler 或 sched 之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:48:10.947

我建议线程化它允许网络服务器不受将在队列中或写入代码本身的计划任务的影响。

# vhdl - VHDL：将元素从二维数组分配到一维数组

> ID：10477316
> 
> 赞同：2
> 
> 时间：2012-05-07T05:56:15.213
> 
> 标签：vhdl, register-transfer-level

我有一个二维记录数组，我必须逐列选择进行处理。我将列记录编组到*列数组*中，如下所示：

```
col_array(0) <= ( td_array(0)(0), td_array(1)(0), td_array(2)(0), td_array(3)(0) ); 
```

本质上是一个数组追加操作。

我有几个这样的数组。这可能与 for-generate 循环有关吗？

这看起来像一个数组追加类型的操作。你怎么做到这一点 ？

* * *

附录：二维数组中的每条记录如下所示：

```
type foo is record:
  enable : std_logic;
  index  : std_logic_vector(7 downto 0);
  cmd    : std_logic_vector(2 downto 0);
end record; 
```

所以我将在行列排列中拥有这样的接口：

```
30  31  32
20  21  22   
10  11  12
00  01  02 
```

我需要按列分解记录信号（使用多路复用器）。所以 (00, 10, 20, 30) 将在 MUX 的输出上被访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T10:55:30.430

不太确定您正在寻找的实际用法（索引如何与 if 索引`col_array`相关`td_array`），但这有帮助吗？（我将事物重新排列为二维[数组](http://parallelpoints.com/node/65)而不是向量向量）

```
architecture a1 of test is
    type std_ulogic_2d is array(natural range <>, natural range <>) of std_ulogic;
    signal td_array : std_ulogic_2d(0 to 3, 0 to 4);
    signal col_array : std_ulogic_vector(td_array'range(1));
begin  -- architecture a1
    iloop : for i in td_array'range(1) generate
        col_array(i) <= td_array(i,0);
    end generate;
end architecture a1; 
```

# vba - 是否可以在基于 VB 的 Scada 系统中从文本框值控制视频

> ID：10477323
> 
> 赞同：2
> 
> 时间：2012-05-07T05:57:20.433
> 
> 标签：vba

我在 Visual Basic 2010 中创建了一个 Scada 系统。

该系统显示水电站的径向*闸门位置。*我在用于门位置的文本框中有特定信号的模拟值。

请建议我，如何制作与 texbox 值相关的径向*Gate*动画，或者我有一个 Gate 的打开和关闭视频。是否可以控制我想要的视频（文本框值的参考），以便我可以在特定的模拟值处显示门的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T22:41:19.120

尝试启用“Microsoft.VisualBasic.PowerPacks.VS”参考，然后添加以下代码。您可以根据需要调整代码以反映您的需求。

代码：导入 Microsoft.VisualBasic.PowerPacks

Dim canvas As New ShapeContainer Dim theLine As New LineShape ' 将窗体设置为 ShapeContainer 的父级。canvas.Parent = Me ' 将 ShapeContainer 设置为 LineShape 的父级。theLine.Parent = canvas ' 设置线条的起点和终点坐标。theLine.StartPoint = 新 System.Drawing.Point(0, 0) theLine.EndPoint = 新 System.Drawing.Point(640, 480)

[http://msdn.microsoft.com/en-GB/library/cc488281.aspx](http://msdn.microsoft.com/en-GB/library/cc488281.aspx)

# java - 如何用java知道文件是否损坏（可读）？

> ID：10477327
> 
> 赞同：5
> 
> 时间：2012-05-07T05:57:41.873
> 
> 标签：java, file, jakarta-ee

我有网络应用程序，人们可以通过 FTP 上传任何 pdf。pdf文件上传后，我对该pdf执行某些操作。

但这里的问题是，通过 FTP 上传 PDF 时，有时连接中断，上传的 pdf 不完整（就像损坏的一样）。当我尝试在 arobat 阅读器中打开该文档时，它会显示消息“*打开文档时出错。文件已损坏，无法修复*'.

现在在开始处理 PDF 之前，我想检查上传的 pdf 是否可读意味着没有损坏。

java是否为此提供任何API，或者有任何方法来检查文件是否损坏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T07:50:56.283

我们有Java 中的[***iText API***](http://itextpdf.com/)来处理 PDF 文件。

要检查 PDF 文件是否可以有效加载和阅读，请使用`com.itextpdf.text.pdf.PdfReader`.
如果文件已损坏，`com.itextpdf.text.exceptions.InvalidPdfException`则会引发类似 , 的异常。

**示例代码片段**：

```
...  
import com.itextpdf.text.pdf.PdfReader;  
...  
try {  
    PdfReader pdfReader = new PdfReader( pathToUploadedPdfFile );  

    String textFromPdfFilePageOne = PdfTextExtractor.getTextFromPage( pdfReader, 1 ); 
    System.out.println( textFromPdfFilePageOne );
}  
catch ( Exception e ) {  
    // handle exception  
} 
```

如果上传但损坏的文件，您可能会遇到以下错误：

```
com.itextpdf.text.exceptions.InvalidPdfException: Rebuild failed:   
  trailer not found.; Original message: PDF startxref not found. 
```

*注意*：要产生这样的异常，请尝试从网络保存一个 pdf 文件，但在中间中止它。
使用它来加载*上面的代码片段*并检查它是否安全加载。

您可以在以下位置找到有关 iText API 的详细示例

> [**iText PDF 的用例示例 | 文本**](https://itextpdf.com/en/resources/examples)。

# r - R 中的函数、向量和循环

> ID：10477330
> 
> 赞同：1
> 
> 时间：2012-05-07T05:57:58.910
> 
> 标签：r, loops, genetic

我最近开始尝试将 R 作为一种用于基因编程的语言。我一直在缓慢但肯定地越来越多地了解 R 的工作原理及其最佳编码实践。然而，我遇到了障碍。这是我的情况。我有一个大约 700 行的数据集，每行有 400 列左右。我已经将所有参数设置为与列数相同的函数作为参数发送到评估（健身评分）函数中。我想在数据集中逐行进行，并将一行中每一列中的值传递给正在评估的函数。第一个问题是弄清楚如何将参数分别传递给函数。“单独”是指该函数需要 400 个参数，而不是长度为 400 的向量。为此，我使用了以下内容：

```
do.call(function,as.list(parameters)) 
```

其中 parameters 是月份变量 (1-12) 的向量，它附加到数据集中一行中的值。这很好用，我只是使用了一个 for 循环来迭代数据集中的 700 行，然后在 12 个月内使用另一个循环，并使用上面的方法来累积输出向量。问题是这非常慢，每个函数大约需要 24-28 秒。每一代进化我都有 100-500 个函数被发送到这个评估中。底线是这不是要走的路。接下来我尝试使用 sapply 方法，如下所示。

```
outputs <- sapply(1:12,function(m) sapply(rows[1:length(rows)],function(p) do.call(f,as.list(c(p,m))))) 
```

这应用 (1-12) 作为月份，然后应用 (1-700) 作为数据集的行。这花了同样长的时间。有关解决方案的任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T06:47:06.140

在这种情况下，主要问题*通常*是您采用的方法是错误的。我对您的具体情况知之甚少，但是：

1.  尝试对计算进行矢量化 - 因此您的函数应该在**所有**行上运行，而不是一次只在一个行上运行。
2.  如果您只是将数字存储在 data.frame 中，将其转换为矩阵通常会加快许多操作。
3.  不要编写带有 400 个参数的函数！5可能也偏高。

**编辑**由于您生成了该函数，因此您应该能够生成一个不同的版本，该版本采用值向量而不是那么多参数。请注意，您传递给它的向量可以有名称：

```
# Convert this:
f <- function(foo, bar) {
  foo+bar
}
do.call(f, list(foo=42, bar=13))

# To this:
f <- function(args) {
  args[["foo"]] + args[["bar"]] 
  # or even faster:
  #args[[0]] + args[[1]]
  # or fastest:
  #sum(args)
}
do.call(f, list(args=c(foo=42, bar=13)))
# or, simply
f(c(foo=42, bar=13)) 
```

...使用 1 个参数而不是 400 个参数调用函数大约**快 60 倍**！但请注意，这只是调用函数的开销。您还需要测量实际功能需要多少时间。如果这需要一秒钟或更长时间，那么调用它的效率或循环的效率都无关紧要......

# ruby-on-rails - 在 Rails 中按顺序搜索标签

> ID：10477337
> 
> 赞同：1
> 
> 时间：2012-05-07T05:58:33.833
> 
> 标签：ruby-on-rails, sorting

我为我的 Tutor 模型使用了acts_as_taggable_on gem。每个导师都有多种类型的标签：课程（C201、M101）、学科（化学、数学等）和背景（艺术、科学）。

学生希望按该顺序与导师匹配。例如：

如果有 10 位导师与班级完全匹配，则停止。

如果只有 5 位导师与班级完全匹配，则查找下 5 位与主题匹配的导师。

如果只有 2 位导师与主题完全匹配，则查找下 3 位与背景匹配的导师。

我应该如何有效地编写我的范围或 SQL 查询？一种天真的方法是针对每个学生，我必须计算所有导师的相关性，并相应地对它们进行排名。但这太低效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:00:15.787

所以像 Tutors.where(:class => 'value', :subject => ....).order_by(:class, :subject, ...).limit(10)

然后记住匹配的组合？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:35:40.087

模型：

```
require 'active_record'

ActiveRecord::Base.logger = Logger.new(STDERR)
ActiveRecord::Base.colorize_logging = false

ActiveRecord::Base.establish_connection(
    :adapter => 'sqlite3',
    :dbfile  => ':memory:'
)

ActiveRecord::Schema.define do

    create_table :College do |table|
        table.column :name, :string
    end

end

class College < ActiveRecord::Base
    acts_as_taggable_on :roles, :courses, :subjects, :backgrounds
end

college = College.new(:name => 'Kerry Green', :role_list => 'student', :course_list => 'CM201', :subject_list => 'Biochemistry', :background_list = 'Science')
college.save

college = College.new(:name => 'Brian Jones', :role_list => 'student', :course_list => 'CM101', :subject_list => 'Chemistry', :background_list = 'Science')
college.save

college = College.new(:name => 'Lewis Smith', :role_list => 'student', :course_list => 'AR102', :subject_list => 'Fine Art', :background_list = 'Arts')
college.save

college = College.new(:name => 'Evan Hunt', :role_list => 'tutor', :course_list => 'CM201, CM101', :subject_list => 'Chemistry, Biochemistry', :background_list = 'Science')
college.save

college = College.new(:name => 'Stuart White', :role_list => 'tutor', :course_list => 'CM201', :subject_list => 'Biochemistry', :background_list = 'Science')
college.save

college = College.new(:name => 'Wendy Jones', :role_list => 'tutor', :course_list => 'CM201', :subject_list => 'Biochemistry', :background_list = 'Science')
college.save 
```

标签匹配：

```
# find CM201 courses

@student = College.find( :name => 'Brian Jones')

@byCourse = @student.find_related_on_courses.find_tagged_with('tutor', :on=> :roles) 
 if @byCourse.length >= 10 
    // rule 1
else  
  @bySubject = @student.find_related_on_subjects.find_tagged_with('tutor', :on=> :roles) 
  if @byCourse.length >= 5 && @bySubject.length >= 5
   // rule 2
  else
     @byBackground = @student.find_related_on_backgrounds.find_tagged_with('tutor', :on=> :roles) 
     if @bySubject.length >= 2 && @byBackground.length >= 3
        // rule 3
     else
       // no match
     end
  end
end 
```

# c# - C# 类库、Silverlight 类库、asmx Web 服务 WTH

> ID：10477345
> 
> 赞同：1
> 
> 时间：2012-05-07T05:59:25.973
> 
> 标签：c#, silverlight, silverlight-4.0, asmx, class-library

ASMX 服务无法重用 Silverlight 类库，并且 Silverlight 应用程序需要专用的类库而不是 C# 类库。因此，我不得不将 C# 类库代码复制到 Silverlight 类库以使用我的 Silverlight 应用程序，现在这不是问题所在。我想要这些问题的技术答案（如果可能的话，深入了解）

*   为什么 Silverlight 需要专用的 Silverlight 类库。即使它在 CLR 上的层之上运行

*   ASMX 服务上的方法返回 C# 类库实体，为什么这不是 `castable`类似的 silverlight 类

*   我如何使 ASMX 服务与相同的类库一起工作（因为从 web 服务返回的实体似乎没有在智能感知中显示它们的方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:03:13.660

好的，这就是答案。Silverlight 类库与所有 .NET 平台兼容（因为它们是精简版）。只需这样做将类库编译为程序集，然后添加引用（而不是添加到项目中）。

*   Silverlight 类库在幕后进行额外的引用（对面向 silverlight 平台的程序集），因此 silverlight 也需要这些引用才能正常工作

*   再次创建类的实例（没有简单的方法）

*   方法实际上是元数据，它们不能通过网络服务调用中的线路传输。您可以在从数据再次构造对象时调用这些方法

# java - 从 JMX 控制台调用函数后创建文件时的文件位置

> ID：10477350
> 
> 赞同：0
> 
> 时间：2012-05-07T06:00:06.830
> 
> 标签：java, file, file-io, jboss, jmx

我创建了一个从 JMX 控制台调用的函数。当用户单击 JMX 控制台中的按钮时，将调用该函数并使用代码将数据复制到文件中：-

```
try
{
String date=ClassDemo.getDateAndTime();
String FileName="Information"+dateAndTime;
BufferedWriter out = new BufferedWriter(new FileWriter(strFileName));           
StringBuffer sb=new StringBuffer();
sb.append("\n");
sb.append("some work");
out.write(sb.toString());
out.close();
}catch(Exception e)
{
e.printStackTrace();
} 
```

由于代码没有引发任何类型的异常，我假设该函数正在执行其应做的事情，并且文件也在创建中。但是我无法找到文件的位置。

谁能告诉我文件将在哪里形成。

应用部署在JBoss5.0上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:06:49.067

您可以在函数中打印文件的路径。像这样的东西：

```
try
{
String date=ClassDemo.getDateAndTime();
String FileName="Information"+dateAndTime;
File file = new File(FileName);
System.out.println(file.getAbsolutePath());
BufferedWriter out = new BufferedWriter(new FileWriter(file));           
StringBuffer sb=new StringBuffer();
sb.append("\n");
sb.append("some work");
out.write(sb.toString());
out.close();
}catch(Exception e)
{
e.printStackTrace();
} 
```

# android - 如何制作类似于 twitter 新帖子的布局

> ID：10477353
> 
> 赞同：0
> 
> 时间：2012-05-07T06:00:12.073
> 
> 标签：android, android-layout

我开发了一个 Android 应用程序，然后我有了类似 twitter 新帖子的灵感。Twitter 新帖子的布局会在出现软键盘时自动缩小。

任何人都知道我应该通过布局或代码在哪里制作。

谢谢。

注意：我包括 twitter 捕获：软键盘出现时缩小：软键盘隐藏时[出现](http://goo.gl/eZygF)或变大：[隐藏](http://goo.gl/HF2lz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:04:46.143

在您的`AndroidManifest.xml`中，将此标签添加到您的`Activity`：

```
android:windowSoftInputMode="adjustResize" 
```

# java - 表类索引集合过滤

> ID：10477354
> 
> 赞同：0
> 
> 时间：2012-05-07T06:00:13.443
> 
> 标签：java, collections

我需要一个类似结构的简单数据库来进行索引搜索。它将在小程序中使用，因此我不想使用额外的嵌入式数据库 jar。

总结：我尝试用类比来解释。例如学生表：

```
Students
------------------
Score
Gender
Name 
```

我想过滤`SCORE > 40 AND SCORE < 80 AND GENDER = MALE` 我找到的解决方案进行全表扫描。但我正在寻找像 TreeMap 这样的解决方案。

我做了一个简单的解决方案，比如使用 TreeMap 进行分区。

```
package multikey;

import java.util.ArrayList;
import java.util.List;
import java.util.SortedMap;
import java.util.TreeMap;

public class MultiKey {

    public MultiKey() {

        final Integer MALE   = 1;
        final Integer FEMALE = 2;

        List<Student>                                    students = new ArrayList<Student>();
        TreeMap<Integer, TreeMap<Integer, List<String>>> table;

        students.add(new Student(80, MALE, "John"));
        students.add(new Student(80, FEMALE, "Monica"));
        students.add(new Student(70, MALE, "Michael"));
        students.add(new Student(60, MALE, "Brad"));
        students.add(new Student(60, FEMALE, "Angelina"));
        students.add(new Student(50, MALE, "Steve"));
        students.add(new Student(40, MALE, "Alex"));

        table = new TreeMap<Integer, TreeMap<Integer, List<String>>>();

        for (Student student : students) {
            Integer                        score     = student.score;
            Integer                        gender    = student.gender;
            TreeMap<Integer, List<String>> genderMap;
            List<String>                   names;

            if ((genderMap = table.get(score)) == null) {
                genderMap = new TreeMap<Integer, List<String>>();
                table.put(score, genderMap);
            }

            if ((names = genderMap.get(gender)) == null) {
                names = new ArrayList<String>();
                genderMap.put(gender, names);
            }

            names.add(student.name);
        }

        // 50 - 70 arasında alan erkekler
        SortedMap<Integer, TreeMap<Integer, List<String>>> students5070 = table.subMap(50, 71);
        List<String>                                       filtered     = new ArrayList<String>();

        for (Integer score : students5070.keySet()) {
            filtered.addAll(students5070.get(score).get(MALE));
        }

        System.out.println(filtered);
    }

    public static void main(String[] args) {

        new MultiKey();
    }

    public class Student {

        private int    gender;
        private String name;
        private int    score;

        public Student(int score, int gender, String name) {

            this.score  = score;
            this.gender = gender;
            this.name   = name;
        }

        public int getGender() {

            return gender;
        }

        public String getName() {

            return name;
        }

        public int getScore() {

            return score;
        }

        @Override
        public String toString() {

            return name;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:21:54.240

如果您只需要一张桌子，[番石榴桌](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)可能会对您有所帮助，如果只是作为参考。如果您需要更多类似 SQL 的语法......我认为您无法避免使用像[HSQLDB这样的纯 hava SQL 数据库](http://hsqldb.org/)

# node.js - 将git依赖添加到nodejs应用程序

> ID：10477363
> 
> 赞同：2
> 
> 时间：2012-05-07T06:01:07.283
> 
> 标签：node.js, github, dependencies, requirejs, npm

我正在尝试将[require-cs](https://github.com/jrburke/require-cs)添加到我的 nodejs 项目中，以便可以将 r.js 与咖啡脚本文件一起使用。我正在尝试将它直接添加到 package.json 以便我可以直接使用 git 存储库对其进行更新。当我添加它时，我收到以下错误：

```
npm ERR! Error: ENOENT, open '/tmp/npm-1336369606543/1336369606543-0.5654201323632151/package.json' 
```

它不会将 git 添加到我的应用程序中。我的 package.json 看起来像这样：

```
{
  "name": "App",
  "version": "0.0.1",
  "dependencies": {
    "mocha": "~1.0.2",
    "chai": "~0.5.3",
    "coffee-script": "~1.3.1",
    "express": "~2.5.9",
    "redis2json": "0.0.5",
    "nohm": "~0.9.0-pre3fixed",
    "redback": "~0.2.8",
    "database-cleaner": "~0.7.0",
    "zombie": "~0.13.4",
    "underscore": "~1.3.3",
    "redis": "~0.7.2",
    "hiredis": "~0.1.14",
    "connect-redis": "~1.3.0",
    "requirejs": "~1.0.8",
    "freebase": "~1.0.1",
    "require-cs": "git://github.com/jrburke/require-cs.git"
  }
} 
```

是否可以使用 package.json 和 npm 将 cs.js 添加到我的存储库中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:02:53.837

npm 在包的根目录中查找 package.json 文件。它告诉 npm 包的结构，以及如何安装它。错误找不到`package.json`它正在寻找的`git://github.com/jrburke/require-cs.git`.

也看看[这个问题](https://stackoverflow.com/questions/5786433/how-to-install-a-node-js-module-without-using-npm)。

[http://toolbox.no.de/](http://toolbox.no.de/)是一个很好的 npm 资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T00:40:32.363

目前 require-cs 不支持 npm install。这是谈论它的问题：

[https://github.com/jrburke/require-cs/issues/12](https://github.com/jrburke/require-cs/issues/12)

# c++ - 将句柄传递给从 Windows 服务到用户应用程序的管道

> ID：10477364
> 
> 赞同：1
> 
> 时间：2012-05-07T06:01:16.677
> 
> 标签：c++, windows, windows-services

我正在编写一个将与用户级应用程序通信的 Windows 服务。Windows 服务将在用户机器上运行 24/7，每当用户启动相应的应用程序时，它将使用命名管道建立与服务的连接。但是这里的服务也负责创建客户端命名管道。在服务器端一切正常，但我不明白如何通过 SCM 将服务创建的句柄发送到客户端进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:16:30.317

您不应该传递句柄，而是给管道一个名称并使用它通过调用[CreateFile来访问它](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365592%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:20:19.720

您不能通过`HANDLE`任何 IPC 机制发送。我能想到的最好的方法是将命名管道的**名称**（可能在命令行参数中传递给第二个程序），并让第二个程序重新打开该管道。这就是这个名字的主要目的。

# javascript - 不同类型功能的术语

> ID：10477365
> 
> 赞同：7
> 
> 时间：2012-05-07T06:01:18.300
> 
> 标签：javascript, function, constructor, terminology

JavaScript 中似乎有几个不同的“组”类似函数的东西。以下是我为他们编造的名字：

*   “常规函数”：可以使用括号和`new`. 大多数功能都属于这一类。

*   “仅构造函数”：这些只能调用`new`。例如, `Image`,`DOMParser`等。

*   “非构造函数”：这些可以用括号调用，但不能用`new`. 例如，`Math.round`，`Function.prototype`。

*   “不可调用函数”：这些函数根本不可调用。例如，`window.constructor`、`Document`、`NodeList`等。

这些不同功能组的专有名称是什么？

* * *

我还试图确定是否可以根据其`[[Prototype]]`( `__proto__`) 属性是否设置为来确定函数所在的“组” `Function.prototype`。

*   大多数“常规功能”都会有`Function.prototype`，但可以使用非标准的`__proto__`.

*   大多数“仅构造函数”具有`Object.prototype`. 我找不到他们有的任何情况`Function.prototype`（所以，没有`call`或`apply`）。这总是这种情况/规范的行为吗？

*   “非构造函数”似乎`Function.prototype`除了`Function.prototype`自身之外大多具有。还有其他情况`Object.prototype`吗？

*   “不可调用的函数”似乎总是有`Object.prototype`. 是这样吗？

* * *

我将在这里回复一些答案：

> 常规函数：`function`
> 构造函数：`constructor`
> 非构造函数：`method`
> 不可调用：`interface`

这不是我真正想要的。“函数”和“构造函数”在一般意义上当然是正确的，但我正在寻找更具体的东西（“非构造函数”等）。

“方法”并不比“函数”更好地告诉你它不能用 调用`new`，`constructor`也没有明白*它只*能用 调用`new`。

在许多情况下，不可调用的函数只能从`constructor`宿主对象的属性中访问。我认为*其中大多数*将更准确地称为“构造函数”而不是“接口”。

* * *

> [关于主机对象与本机对象的东西]

这是在正确的轨道上。考虑到[这个问题](https://stackoverflow.com/questions/7614317/what-is-the-difference-between-native-objects-and-host-objects)（以及接受的答案及其评论），对于用户定义的函数是宿主对象还是本机对象似乎存在一些分歧或混淆。

为避免这种情况，我们只调用用户定义函数 UDF，而不用担心它们是宿主函数还是本地函数。所以我们有UDF、宿主对象和本机对象。

*   “常规功能”

    *   每个 UDF

    *   本机对象，如`Object`,`String`等。

    *   托管对象，例如`window.toString`（在 Chrome 18 中测试）。

*   “仅构造函数”

    *   没有原生对象？

    *   宿主对象，如`DOMParser`, `Image`。

*   “非构造函数”

    *   本机对象，如`Math.round`和`Function.prototype`。

    *   托管对象，如`DOMParser#parseFromString`.

*   “不可调用的函数”

    *   没有原生对象？

    *   宿主对象，如`NodeList`, `DocumentFragment`。

所以看起来主机对象和仅构造函数/不可调用函数之间可能存在联系，但主机与本机似乎并不适用于非构造函数和常规函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:10:17.243

我认为您在这里了解的是 EcmaScript 内置的本机对象和宿主对象之间的细微差别，这些对象由开发人员创建和提供。

“常规函数”映射到宿主对象，即使用 JS 创建的函数和“仅构造函数”、“非构造函数”和“不可调用函数”映射到语言内置的较低级别的原生对象.

[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:10:03.100

我认为您所要求的内容没有官方命名，但通常这是人们用任何编程语言调用所有这些函数的方式：

*   常规功能：`function`
*   构造函数：`constructor`
*   非构造函数：`method`
*   Non-callable：（`interface`对于 JS，this 指的是较低级别的原生对象）

# sql - 如何使用 Hibernate 或 SQL 完成这项工作？

> ID：10477366
> 
> 赞同：0
> 
> 时间：2012-05-07T06:01:28.797
> 
> 标签：sql, hibernate

我正在开发与学校时间表相关的软件。以下是场景。

一个类（比如 12M1 ）有一个主题列表。一个类属于一个部分（比如数学部分），一个部分也有一组主题。在该部分的所有课程中，也教授该部分的科目。一个部分属于一个年级（比如 12 年级），一个年级也有科目。在一个部分的所有课程中，也教授该部分的年级科目。

我需要做的是获得每节课所教科目的清单。

我可以看到这可以使用多个查询和迭代来完成。例如

*   对于每个班级，首先获取其科目列表。
*   然后从其部分获取主题并添加到列表中。
*   然后形成其部分的成绩，获取主题并添加到列表中。

有没有更好/更清洁的方法来做到这一点？例如使用单个查询？使用休眠还是 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:17:49.413

一个班级的所有科目

```
DetachedCritiera subjects = DetachedCritiera.for(Class.class)
    .add(Expression.eq("id", classId))
    .createAlias("subjects", "subject")
    .setProjection(Projections.Property("subject.Id"));

DetachedCritiera sectrionSubjects = DetachedCritiera.for(Class.class)
    .add(Expression.eq("id", classId))
    .createAlias("section", "section")
    .createAlias("section.subjects", "subject")
    .setProjection(Projections.Property("subject.Id"));

DetachedCritiera gradeSubjects = DetachedCritiera.for(Class.class)
    .add(Expression.eq("id", classId))
    .createAlias("grade", "grade")
    .createAlias("grade.subjects", "subject")
    .setProjection(Projections.Property("subject.Id"));

List<Subject> allSubjectsOfClass = session.createCriteria(Subject.class)
    .add(new Disjunction()
        .add(Subqueries.in("id", subjects))
        .add(Subqueries.in("id", sectrionSubjects))
        .add(Subqueries.in("id", gradeSubjects))
    )
    .list<Subject>(); 
```

# events - 使用事件在主干中的模型之间进行通信

> ID：10477367
> 
> 赞同：1
> 
> 时间：2012-05-07T06:01:32.897
> 
> 标签：events, model, backbone.js

我很难弄清楚为什么这不起作用。我在 Backbone 中有两个模型，我想通过移动到事件设置来分离它们。向您展示更容易：

```
var Session = Backbone.Model.extend({
    url: '/some/url/session.js',
    initialize: function(credentials) {
        if (this.isValid() == true) {
            this.trigger("start");
        }
    },
    validate: function() {
        if (this.get("user") != "user" || this.get("password") != "pass") {
            this.trigger("end");
            return "Invalid credentials.";
        }
    }
});

var MainModel = Backbone.Model.extend({
    url: '/some/url/config.js',
    initialize: function(credentials) {
        this.session = new Session(credentials);
        this.session.on("start", this.start());
        this.session.on("end", this.end());
    },
    end: function() {
        console.debug("session ended");
    },
    start: function() {
        console.debug("session started");
    }
});

new MainModel({
  "user":"user",
  "password": "pass"
}); 
```

我看到的问题是 MainModel.start() 和 MainModel.end() 在实例化后一直被触发。我不知道我是否正确添加了听众。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:16:12.130

是的..你有一个错字：

而不是这个：

```
this.session.on("start", this.start()); 
```

用这个：

```
this.session.on("start", this.start); 
```

在第一种情况下，您正在执行该函数`start()`并将`return`该函数的作为回调添加，在第二种情况下，您正在添加对该函数的*引用*作为回调，这就是您想要的。

其实我会用这个：

```
this.session.on("start", this.start, this); 
```

发送正确的*绑定*来执行`this.start()`.. 但这是另一个故事 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:32:24.050

@fguillen 是正确的，您需要绑定函数`this.start`而不是函数调用的结果。

此外，您的绑定顺序也不正确。您正在验证用户`Session.intialize`，但此时尚未创建绑定。我建议添加一个单独的`login()`函数，在绑定事件后调用它：

```
var Session = Backbone.Model.extend({
    url: '/some/url/session.js',
    login: function(credentials) {
        if (this.isValid() == true) {
            this.trigger("start");
        }
    },
    validate: function() {
        if (this.get("user") != "user" || this.get("password") != "pass") {
            this.trigger("end");
            return "Invalid credentials.";
        }
    }
});

var MainModel = Backbone.Model.extend({
    url: '/some/url/config.js',
    initialize: function(credentials) {
        this.session = new Session(credentials);    
        this.session.on("start", this.start);
        this.session.on("end", this.end);
        this.session.login();    
    },
    end: function() {
        console.debug("session ended");
    },
    start: function() {
        console.debug("session started");
    }
});

new MainModel({
    "user":"user",
    "password": "pass"
}); 
```

这里的工作代码：http: [//jsfiddle.net/mbuchetics/Ujh72/3/](http://jsfiddle.net/mbuchetics/Ujh72/3/)

# perl - 在 Perl 中：如何给出要动态打开的文件名

> ID：10477369
> 
> 赞同：1
> 
> 时间：2012-05-07T06:01:51.713
> 
> 标签：perl, file

我想打开一个文件，其名称应作为字符串提供给 Perl 中的 open() 函数。如何实现。

我有下面显示的以下代码，它在第二个打开语句中显示了一些错误

```
use strict;
use warnings;

my $globalpath = "/lhome/tirumala2/cvadlapu_view2/3rdparty/embedded/bsa_examples/linux/";
my $line;
open (TEXT_FILE, "/lhome/tirumala2/DDT_expect_module/test_strings.txt"); 

while ($line = <TEXT_FILE>) 
{
   print "$line";
   open ( APP_FILE, "/lhome/tirumala2/cvadlapu_view2/3rdparty/embedded/bsa_examples/linux/$line/source/$line.c") or die "Cant open application file";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:19:44.793

1.  首先总是使用[三个参数 open](http://perldoc.perl.org/functions/open.html)。
2.  您没有`$globalpath`在显示的代码中使用变量。
3.  可能有一些数据以及`newline character`变量`$line`。所以试着先咀嚼它，看看，它应该可以工作。

尝试类似：

```
while ($line = <TEXT_FILE>)  { 
chomp $line;   # need to chomp the $line
print "$line";    
open ( my $app_file, "<" , "/lhome/tirumala2/cvadlapu_view2/3rdparty/embedded/bsa_examples/linux/$line/source/$line.c") or die "Cant open application file: $!";  
} 
```

# javascript - 如何获取struts checkboxlist的id

> ID：10477371
> 
> 赞同：0
> 
> 时间：2012-05-07T06:02:35.363
> 
> 标签：javascript, jquery, jquery-plugins, struts2, checkboxlist

我有一个 struts 复选框列表

`<s:checkboxlist list="{'Mon','Tue','Wed','Thur','Fri','Sat','Sun'}" name="processVO.weeklyCal" id="days" disabled="true"/>`

但我没有得到我指定的 id 'days'。当我签入页面源时，id 显示为 processVO.weeklyCal-1 到 processVO.weeklyCal-7 。所以我无法编写 jQuery 函数来启用/禁用使用 id 'days' 的复选框列表。我该如何解决这个问题？请帮忙

# xcode - 从 XCode 中的详细视图控制器返回后如何返回到 UITableView 的同一视图？

> ID：10477373
> 
> 赞同：0
> 
> 时间：2012-05-07T06:02:39.793
> 
> 标签：xcode, uitableview, uiwebview, xcode4.3, segue

我在 XCode 中编写了 UITableView 代码。一旦用户按下其中一个单元格，就会通过 segue 打开一个新的 UIWebView。当用户点击后退按钮返回 UITableView 时，我希望在用户选择单元格之前，该视图与 UITableView 相同。

重申我的问题，当点击 detailViewController 中的后退按钮时，我希望显示表格单元格的相同区域。有点记忆用户在表中的位置。

我可以知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:31:24.147

纳维德，

如果您的 UITableViewController 嵌入在 UINavigationController 中，这应该是默认行为。

如果您的 UITableViewController 尚未嵌入 UINavigationController，您可以通过选择 UITableViewController，然后选择编辑器/“嵌入导航控制器”在情节提要中轻松完成此操作。

# ubuntu - 在 Ubuntu 12.04 上安装 Cinnamon（在 VirtualBox 上运行）

> ID：10477374
> 
> 赞同：1
> 
> 时间：2012-05-07T06:02:41.260
> 
> 标签：ubuntu, virtualbox, gnome-3

所以我在我的虚拟机上安装了 Cinnamon 桌面环境，但它看起来与经典的 Gnome 桌面完全相同（事实上，我尝试安装 Gnome 3，它看起来也和经典的一样）。我的视频内存设置为最大 (128 MB)。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T04:07:27.097

我相信您的虚拟机无法访问加速图形硬件，因此会话回退到 gnome classic。在物理桌面上试用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:05:35.993

**您必须在设置中启用 3D 加速**。并确保提供大约 64MB 或更多的视频内存。然后肉桂就可以了。否则它将回退到 gnome 2 经典版。

见证明。

[http://i.stack.imgur.com/gizfm.jpg](http://i.stack.imgur.com/gizfm.jpg)

# java - classname.class 返回什么？

> ID：10477375
> 
> 赞同：55
> 
> 时间：2012-05-07T06:02:48.343
> 
> 标签：java, oop

谁能解释一下`SomeClassname.class`JAVA 的返回值是什么？我无法理解它的作用..

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-07T06:08:05.720

它返回与[Object.getClass()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)对给定实例所做的相同，但是当您静态知道您想要什么类时（即在编译时），您可以使用它。

来自 Javadoc：

> 返回此 Object 的运行时类。

简而言之，它为您提供了一个表示（原始）对象*类的对象。*当您想以编程方式发现方法和字段以调用/访问它们时，它可以通过[反射使用。](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

例如：

```
 Method m[] = String.class.getDeclaredMethods();
        for (int i = 0; i < m.length; i++)
        {
          System.out.println(m[i].toString());
        } 
```

Javadoc 还向您介绍了[Java 语言规范 - 类文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.2)（可能有点繁琐）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-07T06:04:25.830

它返回代表指定类名的 Class 对象。如果您需要获取 Class 对象，则使用此选项。

这大致对应于 .getClass() ，它返回对应于对象实例的 Class 对象。当您想使用 Class 对象并且没有对象实例时，您可以使用 someclassname.class。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T11:22:46.043

.class 是一个类文字......就像 5 是一个 int 文字一样，就像 5.0 是一个双文字（令人惊讶的是，在 java.lang 包中有一个名为“Class”的类）。

因此，您可以打印类字面量（就像您可以打印任何对象......您会得到 toString() 方法在 Class 类中返回的内容）。你可以有一个类变量。

PS：有很多功能可以使用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-12T10:27:10.660

Object.getclass = className.class

它们都返回对象的运行时类

例如

```
Class lii = SomeClass.class;
Class leo = new SomeClass().getClass();
//lii==leo 
```

就像

```
String var1 = "heloo";
int var2 = 9;
float var3 = 8.0; 
```

var1 存储“heloo”，它是一个字符串文字，var2 存储 9，它是一个整数文字，var3 存储 8.0，它是一个浮点文字，所以 lii 和 leo 也存储在运行时从 SomeClass.java 文件生成的类文字

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T14:38:51.003

与 .getClass() 方法相同，但只能用于命名类和 void 类。.class 语法允许在对象类型可用但没有实例的情况下获取 Class。此外，获取原始类型的类的最简单方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T07:11:32.597

它就像 Class object = SomeClass.class; 上面的语句将返回该特定类的对象并将其放入类变量中。Hens 它会返回 Class 对象。

# java - 为普及创建 Java 连接器

> ID：10477378
> 
> 赞同：0
> 
> 时间：2012-05-07T06:03:31.773
> 
> 标签：java, jdbc, connector, pervasive

谁能给我打电话，如何在java中创建一个普遍的连接器。我对此很陌生，我不确定从哪里开始，请告诉我如何为 pervasive 创建一个连接器。我创建了一个示例连接器，但我不确定它是对还是错

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T13:58:41.190

这是一个简单的程序，可用于连接到 PSQL 数据库：

```
/*
 * SQLStatement.java       
 * Simple JDBC Sample using Pervasive JDBC driver. 
 */
import java.*;
import java.sql.*;
import pervasive.jdbc.*;
import java.io.*;

public class SQLStatement  {

    public static void main(String args[]) {

        String url = "jdbc:pervasive://localhost:1583/demodata?transport=tcp";
        Connection con;

        String query = "select* from class";
        Statement stmt;

        try {
            Class.forName("com.pervasive.jdbc.v2.Driver");

        } catch(Exception e) {
            System.err.print("ClassNotFoundException: ");
            System.out.println(e.toString());
            System.err.println(e.getMessage());

        }

        try {
            Connection conn=  DriverManager.getConnection(url);

            stmt = conn.createStatement();                          

            ResultSet rs = stmt.executeQuery(query);
            ResultSetMetaData rsmd = rs.getMetaData();
            int numberOfColumns = rsmd.getColumnCount();
            int rowCount = 1;
            long j = 0;
            int i = 1;

            while (rs.next()) {
                System.out.println("Row " + rowCount + ":  ");
                for (i = 1; i <= numberOfColumns; i++) {
                    System.out.print("   Column " + i + ":  ");
                    System.out.println(rs.getString(i));
                }
                System.out.println("");
                rowCount++;
            }

            System.out.println("Waiting.");
            String thisLine;
            try {
                InputStreamReader converter = new InputStreamReader(System.in);
                BufferedReader br = new BufferedReader(converter);
                while ((thisLine = br.readLine()) != null) { // while loop begins here
                    System.out.println(thisLine);
                   } // end while 
                } // end try
            catch (IOException e) {
                System.err.println("Error: " + e);
                }

            stmt.close();
            conn.close();

        } catch(SQLException ex) {
            System.err.print("SQLException: ");
            System.err.println(ex.getMessage());
        }   
    }
} 
```

为了编译它，我使用：

```
javac -classpath "C:\Program Files\Pervasive Software\PSQL\bin\pvjdbc2.jar";"C:\Program Files\Pervasive Software\PSQL\bin\pvjdbc2x.jar";"C:\Program Files\Pervasive Software\PSQL\bin\jpscs.jar";. SQLStatement.java 
```

为了运行它，我使用：

```
java -classpath "C:\Program Files\Pervasive Software\PSQL\bin\pvjdbc2.jar";"C:\Program Files\Pervasive Software\PSQL\bin\pvjdbc2x.jar";"C:\Program Files\Pervasive Software\PSQL\bin\jpscs.jar";.\ SQLStatement.java 
```

如果您使用的是 64 位操作系统，您可能需要更改 PSQL JAR 文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T19:51:11.593

我将以下库与 Dbeaver 一起用于在 Pervasive 数据库中进行查询：

*   jpscs.jar
*   pvjdbc2x.jar
*   pvjdbc2.jar

# rabl - 使用 RABL 为数组 xml 元素起别名

> ID：10477380
> 
> 赞同：1
> 
> 时间：2012-05-07T06:03:36.220
> 
> 标签：rabl

我正在尝试创建 xml 输出以匹配旧系统的输出，但我不确定如何让我的 xml 匹配。我基本上需要将数组元素节点名称重命名为不同于默认值的名称。

鉴于我有一个看起来像这样的模型：

```
class Result
    attr_accessor :channel

    def initialize
      @channel = Array.new
    end
end 
```

还有一个 RABL 模板：

```
object @result
attributes :channel 
```

我希望 xml 看起来像这样：

```
<result>
  <channel>
    <value>running</value>
    <value>cycling</value>
  </channel>
</result> 
```

而不是默认情况下出现的这个：

```
<result>
  <channel>
    <channel>running</channel>
    <channel>cycling</channel>
  </channel>
</result> 
```

我是 RABL 的新手，我在 docs/interwebs 中找不到任何关于如何生成这样的东西的东西。提前致谢！

# c# - 如何在 MonoDroid 中的 WebView 上显示进度条

> ID：10477384
> 
> 赞同：1
> 
> 时间：2012-05-07T06:03:46.410
> 
> 标签：c#, webview, progress-bar, xamarin.android

我一直在尝试在`WebView`使用 monodroid 的应用程序中显示进度条实现。我已经走了很远，但似乎无法解决难题的最后一部分。我正在使用 Monodroid Pro 的付费版本，并使用 Galaxy S2 作为测试设备。

这是我到目前为止所做的：-

在本`OnCreate`节中：-

```
 Window.RequestFeature(WindowFeatures.Progress);

        SetContentView(Resource.Layout.Main);

        Window.SetFeatureInt(WindowFeatures.Progress, Window.ProgressVisibilityOn);

        wv.SetWebViewClient(new monitor());

        wv.LoadUrl("https://www.google.com"); 
```

现在在 onprogress 上更改了覆盖方法：-

```
 private class progress : WebChromeClient
  {
        public override void OnProgressChanged(WebView view, int newProgress)
        {                    
           base.OnProgressChanged(view, newProgress);
        }
  } 
```

现在我看到的解决方案是用于 Android 的 java 实现，这很容易，即：-

```
webview.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress)   
    {
        //Make the bar disappear after URL is loaded, and changes string to Loading...
        MyActivity.setTitle("Loading...");
        MyActivity.setProgress(progress * 100); //Make the bar disappear after URL is loaded

        //Return the app name after finish loading
        if(progress == 100)
            MyActivity.setTitle(R.string.app_name);
     }
 }); 
```

但是使用 monodroid 我不能`SetProgress`像在 Android 实现中那样使用方法，`Activity`可以在`OnCreate`Method 中创建实例，而在 Monodroid 中，要创建一个全新的类，然后`webchromeclient`首先要继承，然后以此类推。我错过了什么？还有其他我不知道的方法吗？一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:59:45.817

正如您所注意到的，C# 不支持像 Java 这样的匿名类，因此您需要定义一个单独的类。该[`Activity.SetProgress()`](http://docs.mono-android.net/?link=M%3aAndroid.App.Activity.SetProgress)方法是公共的，这意味着您可以将您的活动的引用传递给该类，并使用它来调用该方法：

```
public class CustomWebChromeClient : WebChromeClient
{
    private Activity _context;

    public CustomWebChromeClient(Activity context)
    {
        _context = context;
    }

    public override void OnProgressChanged(WebView view, int newProgress)
    {
        base.OnProgressChanged(view, newProgress);

        _context.SetProgress(newProgress * 100);
    }
} 
```

然后你的活动可以创建这个类的一个实例，将自己传递给构造函数：

```
webview.SetWebChromeClient(new CustomWebChromeClient(this)); 
```

我在[这里](https://github.com/gshackles/Sample-Projects/tree/master/MonoDroid/BrowserDemo)有一个更完整的浏览器演示，它也可以帮助你开始。

# jquery - 点击后缩略图消失

> ID：10477386
> 
> 赞同：1
> 
> 时间：2012-05-07T06:04:02.807
> 
> 标签：jquery, html, css, fancybox

这里是我的模板站点的位置，你可以点击[这里](http://abrielshipley.com/new)。

现在，在最初单击缩略图并通过 FancyBox 后，我将第一个缩略图编程为通过图像库；就像之前有人在 StackOverflow 上问过的一样，你可以在[这里](https://stackoverflow.com/questions/8800152/fancy-box-how-to-show-slideshow-from-a-single-thumbnail)找到。

或者，我网站上的一个缩略图的部分 jQuery 是：

```
var galPhotos1 = [
            {href : 'images/portfolio/smilehealthy_werewolfmtd.jpg','nextEffect' : 'fade',   'prevEffect'    : 'fade'}, 
            {href : 'images/portfolio/smilehealthy_applemtd.jpg','nextEffect' : 'fade',   'prevEffect'    : 'fade'},
            {href : 'images/portfolio/smilehealthy_vampiremtd.jpg','nextEffect' : 'fade',   'prevEffect'    : 'fade'}, 
        ];

        $('a#gallery1').live('click',function(){
            $.fancybox(galPhotos1);
        }); 
```

我想知道是否有任何关于如何制作它的建议，所以当你关闭 FancyBox 画廊时，缩略图不会消失？

很感谢任何形式的帮助！=]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:17:13.417

在您的情况下，您正在对同一个元素应用两个不同的 fancybox 调用。你的 HTML 是

```
<a id="gallery1" class="fancybox"> ...etc 
```

你的两个调用 fancybox 的脚本是

```
$(".fancybox").fancybox(); // call fancybox for elements with class "fancybox" 
```

和

```
$('a#gallery1').live('click',function(){
 $.fancybox(galPhotos1); // call fancybox on clicking the element with id "gallery1"
}); 
```

在这种情况下，存在可能会产生这种奇怪行为的冲突。只需`class="fancybox"`从您的锚点中删除该属性，您的缩略图就不会被删除。

```
<a id="gallery1"> ...etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:23:28.400

非常感谢@jfk 帮助我！=]

我实际上尝试从函数中删除“a”链接元素，并使其看起来像下面的代码：

```
$('#gallery1').live('click',function(){
    $.fancybox(galPhotos1); // call fancybox on clicking the element with id "gallery1"
}); 
```

它似乎工作并且不再有这个问题。

# memory - 一次写读多次内存

> ID：10477392
> 
> 赞同：2
> 
> 时间：2012-05-07T06:04:27.060
> 
> 标签：memory

我正在寻找具有快速且非序列化访问的 WORM 内存（如 CD 或 DVD）。您知道是否存在这种存储器，例如 USB 存储器或 Compact Flash？谷歌搜索我没有找到任何东西，有一些关于 SD 蠕虫卡的 Sandisk 新闻，但在官方网站上没有。我需要这个作为收银机软件日志。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:20:41.080

首先，这样的事情经常使用纸带可能是有原因的——它很容易审计，既可以说服自己它正在记录，也可以在没有特殊工具的情况下返回日志。虽然它当然不能很好地储存，甚至不能很好地老化。

某些类型的闪存 IC 可能在扇区级别具有不可逆的擦除锁定。历史上曾经有过一次性可编程技术，例如无窗封装中的 proms 或 UV eprom，但与现代消费闪存相比，大部分容量相对较小（或者我应该说很小）。这些可能会越来越难以获得。

如果您协商访问完整的 SD 卡规范，您会发现某些卡支持的各种附加机制 - 那里可能对您有用，也可能没有。

在纯软件方面，使用现成的 USB 密钥、SD 卡甚至磁盘介质，您可以尝试使用数字签名来验证写入的信息。您无法阻止擦除，但您可以使用序列号来指示丢失了某些内容。如果源程序被破解了密钥，那可以用来伪造条目，但是如果源程序的运行副本可以被破解和修补，它可能无论如何都在写假条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:05:20.433

看看 SanDisk Memory Vault，不确定它是否能满足您的需求，但它似乎是一种类似于闪存驱动器的“WORM”产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T09:19:44.227

只是为了结束这个问题......

四年后，我找到了一家内存制造商，可以将他的 microSD 固件定制为 WORM 内存，我打算出售这些卡。

我没有找到任何其他解决方案。

# android - 我希望对不同的 Activity 启动模式进行一些说明

> ID：10477393
> 
> 赞同：0
> 
> 时间：2012-05-07T06:04:31.117
> 
> 标签：android, android-activity

我试图理解但未能理解文档在 singleTask 和 singleInstance 之间的区别。在我看来，他们俩都像单身人士。有人可以详细说明它们的不同之处，并可能注意一个示例，说明一个人可能会选择使用其中一个而不是另一个？我不需要对 singleTop 和默认的 launchMode 进行解释，我只是对这两个感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:07:15.537

来自[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)：“singleTask”和“singleInstance”模式也仅在一个方面彼此不同：“singleTask”活动允许其他活动成为其任务的一部分。它始终位于其任务的根部，但其他活动（必须是“标准”和“singleTop”活动）可以启动到该任务中。另一方面，“singleInstance”活动不允许其他活动成为其任务的一部分。这是任务中的唯一活动。如果它启动另一个活动，则该活动被分配给不同的任务——就好像 FLAG_ACTIVITY_NEW_TASK 在意图中一样。

这是否回答了您的问题，还是您需要更多说明？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T07:52:56.007

看看[这里](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)，了解什么是 Android 中的“任务”。也许这会帮助你理解。

# c++ - C++ Mersenne Twister 和随机数库

> ID：10477399
> 
> 赞同：2
> 
> 时间：2012-05-07T06:05:01.137
> 
> 标签：c++, random, mersenne-twister

我正在将一个大型科学模拟软件迁移到 C++。在 Java 中，我使用 了[Cern Colt 库](http://acs.lbl.gov/software/colt/api/cern/jet/random/package-summary.html)，它包含一个完整的随机分布列表。

当需要不同的发行版（例如提供的链接中列出的那些）时，通常使用什么 C++ 库？

较小的重点库是首选（不像 boost）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:22:53.327

[boost::random](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_random.html)可能对你有帮助。

# android - 安卓新手

> ID：10477401
> 
> 赞同：1
> 
> 时间：2012-05-07T06:05:07.127
> 
> 标签：android

我想开始学习Android但有以下疑问：

```
(1) What is the latest version i should start learning Android ?

(2) What are the softwares i would need to compile and execute Android programs? Is there any link from where i can download them?.

(3) Which is the best book for a beginner? I have heard of "Beginning Android 3" by Mark Murphy, is that true? 
```

我知道这些是基本问题，但我只是想从这里的专家那里得到答案，或者几年来从事 Android 开发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:09:12.583

[http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)

通过此链接，您将获得学习 android 的必要指导。尝试做所有的 helloworld 程序。这一切都会对你有很大帮助。这里提到了所有需要的 SDK

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:08:42.350

1.  尝试阅读[android 开发指南](http://developer.android.com/guide/developing/index.html)，它有所有这些问题的答案......

2.  下载eclipse和android sdk。

3.  我喜欢 Oreilly 的安卓书籍。

# java - 哪个集合更适合存储多维数组中的数据？

> ID：10477407
> 
> 赞同：3
> 
> 时间：2012-05-07T06:06:09.267
> 
> 标签：java, collections, multidimensional-array

我有一个`multi-dimensional array of string`. 我愿意将其转换为某种集合类型，以便我可以根据自己的意愿添加、删除和插入元素。在数组中，我无法删除特定位置的元素。

我需要这样的集合，我可以在其中删除特定位置的数据，也可以在任何位置添加数据。
另外别忘了我有多维数组，所以集合也应该能够存储多维数据。
哪个系列适合我的要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:09:10.163

[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)应该做你需要的。例如：

```
List<List<String>> stringList = new ArrayList<List<String>>();  //A List to store a list of strings 
```

或者...

```
List<String[]> myNumberList = new ArrayList<List<String[]>();   //A List to store arrays of Strings. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:49:28.620

你确定你有*多维*数组吗？因为我在寻找你的样本数据`("yes","abbbc")`，所以它是*一维*数组。但是让我举个例子：

```
 // This example for multi-dimensional array of string
    String[][] arrays = new String[][]{{"aa", "bb", "cc"}, {"dd", "ee", "ff"}};
    Map<Integer, List<String>> map = new HashMap<>();

    List<String> list;

    for(int i = 0; i < arrays.length; i++) {
        list = Arrays.asList(arrays[i]);

        map.put(i, list);
    }

    for(int i = 0; i < map.size(); i++) {
        for(int j = 0; j < map.get(i).size(); j++) {
            System.out.println(map.get(i).get(j));
        }
    }

    // This example for one-dimensional array of string
    String[] arr = new String[] {"aa", "bb"};
    List<String> listArr = Arrays.asList(arr);

    for(String str : listArr) {
        System.out.println(str);
    } 
```

对于我正在使用*的多维*数组和我正在使用`HashMap`的*一维*数组`ArrayList`。如果您仍然不了解这两者，请阅读[本文。](https://stackoverflow.com/questions/2395814/difference-between-hashmap-and-array-list-in-java)*如果我错了*，请纠正我

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:24:37.740

与任何问题一样，您有多种数据结构选择，您必须根据它们的权衡（时间、空间）做出设计决策。

立即想到的两个数据结构是`ArrayList`和`LinkedList`。有了一个`LinkedList`你可以`insert`和`remove`一个来自任何位置的元素`O(1) constant time`。这`ArrayList`将是线性时间 O(n)。

但是，在 an 中访问元素`ArrayList`是恒定的时间（您可以对其进行索引）。而通常使用 a`LinkedList`您需要遍历它。`LinkedList`虽然每个元素都可以避免这个问题，所以你可以在 a in 中`hashing`找到一个特定的节点。当然，拥有 a和 a是比 a 更快的解决方案，尽管在空间方面有更多开销。`linked list``amortized constant time``hash``linked list``array`

有关这些数据结构的更多信息：[Arrays](http://en.wikipedia.org/wiki/Array_data_structure)、[Linked Lists](http://en.wikipedia.org/wiki/Linked_list)、[Hash Tables](http://en.wikipedia.org/wiki/Hash_table)
`Java`这些数据结构的实现：[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)、[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)、[Hash table](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)*

# java - 如何查找所有子节点的文本

> ID：10477414
> 
> 赞同：1
> 
> 时间：2012-05-07T06:06:57.610
> 
> 标签：java, xpath, webdriver, htmlunit

我正在使用 webdriver 来抓取网站以寻找用魔法常数装饰的链接，除了文本可能被格式化：

```
<a href="blah" ..><span blah>magic</span></a> 
```

和很多层面

```
<a href="blah" ..><span blah>A <span blah><b>magic</b></span> evening</span></a> 
```

我不知道它是否被格式化，或者如果是，它有多深，因为我正在搜索任意网站。

我的代码看起来像这样：

```
List<WebDriver> links = driver.getElements(By.tagName("a"));
   for (WebElement link : links) {
       List<WebElement> children = link.getElements(By.tagName("*"));
           for (WebElement child : children) {             
              if (myPattern.matcher(child.getText()).matches()) {
                 System.out.println("found match!");
              }
           }
    } 
```

但这无法找到匹配项。

关于如何确定是否匹配的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:21:57.687

**如果您可以使用 XPath，一个有用的 XPath 表达式是**：

```
//a[span[.//text()[. = 'magic']]] 
```

这将选择`a`XML 文档中所有`span`具有文本节点后代的子节点，其字符串值为 string `"magic"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:22:48.983

尝试使用[jsoup](http://jsoup.org/)来获取文本内容，然后从那里非常简单

```
String html = "<a href=\"blah\"><span blah>...<b>magic</b>...</span></a>"
String string = Jsoup.parse(html).text(); //A magic evening
if(string.contains("magic")){ //you can optimize to have word match, e.g. not "magical"
    //it's a match
} 
```

**编辑：**

我很长时间没有使用 WebDriver/Selenium，但是我看到过类似的东西，看起来它可能具有相同的效果

```
String innerText = ((JavascriptExecutor)driver).executeScript("return arguments[0].innerText", element); 
```

# ruby-on-rails-3.1 - 浮动没有绘制我的数据

> ID：10477416
> 
> 赞同：0
> 
> 时间：2012-05-07T06:07:06.623
> 
> 标签：ruby-on-rails-3.1, flot

我有以下数组：

```
var open_emails = [];
open_emails = [["2012-04-21", 5], ["2012-04-20", 1], ["2012-04-22", 4]]; 
```

当我将它放入 jquery.flot 时，它没有图形，我不知道为什么：

```
$.plot($("#placeholder"), [open_emails]); 
```

如何绘制显示日期的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T07:20:56.763

open_emails = [["2012-04-21", 5], ["2012-04-20", 1], ["2012-04-22", 4]]; 我认为日期是字符串类型，所以它不能作为值绘制。

你可以看到这篇[文章](https://stackoverflow.com/questions/3560960/using-dates-in-jquery-flot-display)

# android - android ExpandableListView 动画下拉和向上？

> ID：10477422
> 
> 赞同：3
> 
> 时间：2012-05-07T06:07:34.007
> 
> 标签：android, expandablelistview

最近我遇到一个问题是如何让`ExpandableListView`动画上下浮动。我在 StackOverflow 上搜索结果。有一个答案：[Android animate drop down/up view proper](https://stackoverflow.com/questions/9248930/android-animate-drop-down-up-view-proper) 但它适合`ListView`. 当我使用它时`ExpandableListView`，它不起作用。我想一定有人可以解决这个类似的问题。如果您有空闲时间，您能否告诉我解决方案或对问题提供提示。

# lua - 如何在 Corona SDK Lua 中进行对象间通信（例如触发事件）？

> ID：10477424
> 
> 赞同：0
> 
> 时间：2012-05-07T06:07:41.527
> 
> 标签：lua, coronasdk

在 Corona 中如何进行对象间通信（例如触发事件）？一些示例代码会很棒。

笔记：

*   我看到有一种方法可以在对象上创建自定义事件，但是似乎您确实需要该对象的句柄才能触发（调度）它。

*   我在这里感兴趣的是两个完全独立的对象。例如，假设您单击屏幕上的显示对象，可以在全局事件类型意义上说出“MyInventoryHasIncreased”，然后让任何其他需要订阅它的显示对象将其拾取并相应地调整其显示。订阅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:32:13.043

如果您需要全局事件，请考虑使用**Runtime:addEventListener()**。

```
local function invIncreased(event)
    print("handle inventory increase from" .. event.target)
end

local image = display.newImage("image.png") 
Runtime:addEventListener("MyInventoryHasIncreased", invIncreased)

local event = {name="MyInventoryHasIncreased", target=image} 
Runtime:dispatchEvent(event) 
```

您可以将 Runtime:addEventListener 从 Runtime:dispatchEvent 中拆分出来，以获取所需的对象到对象的通信。

# python - python switch语句不起作用

> ID：10477428
> 
> 赞同：-2
> 
> 时间：2012-05-07T06:07:52.800
> 
> 标签：python, file-io, switch-statement

我找到了一个实现 switch 语句的函数 -->

```
File = open('/file.txt','r')

    String = File.readline()
    String = str(String)
    print String 

    for case in switch(String):
        if case("Head"):
            print "test successed"
            break
        if case("Small"):
            print String
            break
        if case("Big"):
            print String
            break  
        if case():
            print String 
            break 
```

我打印它时的字符串值是 Head，但 switch 语句总是转到最后一种情况.. 该函数显然工作正常，因为当我用 v =“Head”更改字符串时它工作了！！！

知道出了什么问题吗？

开关功能 -->

```
class switch(object):
 def __init__(self, value):
    self.value = value
    self.fall = False

 def __iter__(self):
    """Return the match method once, then stop"""
    yield self.match
    raise StopIteration

 def match(self, *args):
    """Indicate whether or not to enter a case suite"""
    if self.fall or not args:
        return True
    elif self.value in args: # changed for v1.5, see below
        self.fall = True
        return True
    else:
        return False 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:31:32.190

请永远不要写这样的代码。以适当的 Python 风格进行。它*更*容易阅读。任何遇到使用“开关”混乱的人可能会发自内心地诅咒你。

```
with open('/file.txt', 'r') as fp:
    line = fp.readline().rstrip('\n')
    print line

if line == 'Head':
    print "test successed"
elif line == 'Small':
    print line
elif line == 'Big':
    print line
else:
    print line 
```

* * *

至于失败的原因，`readline()`调用很可能会包含一个尾随换行符，并且`'Head' != 'Head\n'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:26:25.593

`.readline()`返回整行，包括换行符。

你需要`.strip()`你的字符串，或者比较`'Head\n'`等等。

此外，关于样式，大写变量名在 python 中并不是真正的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:27:15.593

**编辑：**我知道这不是 Pythonic，但这是一个有趣的练习。

这是在 OP 添加实现之前 - 这是我的看法。它

*   `raise`s 在没有定义大小写时出现有意义的错误 - 或者如果`allow_fallthrough`设置了，则可以处理默认大小写`for:else:`
*   允许默认情况发生在`"switch"`套件中的任何位置

.

```
def switch(arg, allow_fallthrough = False):
    fail = False
    def switcher(*args):
        return (arg in args)
    def default_switcher(*args):
        return (not args)
    def fallthrough(*args):
        if not allow_fallthrough:
            raise ValueError("switch(%r) fell through" % arg)
    yield switcher
    yield default_switcher
    yield fallthrough

def test():
    String = "Smallish"

    for case in switch(String):
        if case():
            print "default", String 
            break
        if case("Head"):
            print "Head GET"
            break
        if case("Small", "Smallish"):
            print "Small:", String
            break
        if case("Big"):
            print "Big:", String
            break  
    else: # Only ever reached with `allow_fallthrough`
        print "No case matched" 
```

# video - H.264 视频和 MPEG-4 视频有什么区别？

> ID：10477430
> 
> 赞同：68
> 
> 时间：2012-05-07T06:07:56.920
> 
> 标签：video, h.264, video-encoding, mpeg-4

这两个是一样的吗？MPEG-4 的 H.264 编解码器是什么？如果我需要将 flv 转换为高清 H.264 视频格式怎么办？我想制作在线电视流媒体并想使用 PHP 或 Python。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-07T06:17:57.933

> **H.264**是一种新的视频压缩标准，它具有比基本**MPEG-4**压缩更先进的压缩方法。H.264 的优点之一是压缩率高。它比 MPEG-4 编码效率高约 1.5 到 2 倍。这种高压缩率使得在同一个硬盘上记录更多信息成为可能。
> 与基本的 MPEG-4 压缩相比，图像质量也更好，播放更流畅。然而，最有趣的特性是网络传输所需的较低比特率。
> **因此，H.264 与 MPEG-4 压缩相比的 3 个主要优点是：**
> - 文件体积小，可实现更长的录制时间和更好的网络传输。
> - 实时播放流畅和更好的视频质量
> - 更高效的移动监控应用
> 
> H264 现在作为第 10 部分被载入 MPEG4，也称为 AVC

**参考：[http ://www.velleman.eu/downloads/3/h264_vs_mpeg4_en.pdf](http://www.velleman.eu/downloads/3/h264_vs_mpeg4_en.pdf)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-13T00:39:01.997

它们是来自两个不同行业的相同标准的名称，具有不同的命名方法，即制作和销售电影的人和通过互联网传输电影的人。自 2003 年以来：“MPEG 4 第 10 部分”=“H.264”=“AVC”。在此之前，这种关系有点松散，因为它们并不相等，但“ **MPEG 4 Part 2** ”解码器可以渲染**“H.263”**的流。下一个标准是“ **MPEG H Part 2** ”=“ **H.265** ”=“HEVC”

# android - 清理项目时出错

> ID：10477432
> 
> 赞同：2
> 
> 时间：2012-05-07T06:07:59.450
> 
> 标签：android, eclipse

清理项目时出现以下错误对话框。

> “清理选定的项目”遇到了问题。
> 
> 构建过程中发生错误。

运行所有项目时并非如此，它仅给出一个项目的错误。当我右键单击包资源管理器到该项目的任何文件夹时，它会挂起 Eclipse。
我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T10:19:39.983

我已经解决了我的问题。我从我的 Eclipse 中删除了项目，然后我导入了同一个项目，然后现在一切正常。现在，当我清理项目时它没有给出错误，而且现在 pc 也不会在右键单击文件夹时挂起。这可能是因为 svn 项目的问题。

感谢大家试图提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T06:50:49.037

您有任何项目依赖项吗？当我有一个库项目时，我遇到了类似的问题，它正在清理依赖于库之前的库项目的项目（或类似的东西）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T06:14:22.640

很多时候，发生这种情况是因为您以非法名称（大写字符或使用破折号）调用 XML 文件尝试查看您的`res`文件夹并确保不存在这些文件。

唯一可接受的格式是使用 [a-z0-9'_']

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T06:12:14.120

检查控制台，那里会有一些通知，例如任何xml文件中的错误，这主要是因为无法生成R.java文件并且当任何xml文件或库出现问题时无法创建R.java文件您选择与项目集成。

```
Error during the build 
```

这意味着生成 apk 时出现问题，在构建之前您不会收到任何错误。所以更好的是，您检查您是否添加了任何违反 android 依赖项的库，例如使用 awt、applet 或任何其他 android 或 DDMS 不支持的包。如果您使用最新的 android SDK(r17)，那么这个 SDK 有很多问题，请参考开发者的网站，因为项目构建源的顺序有很多变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T06:17:31.127

检查您创建的资源是否丢失或应用某些资源但未创建。**如果您在Project->RightClick -> Properties-> JavaBuildPath -> Project Tab**中手动导入了一些源代码中不存在的自定义库，请检查您的库。**检查gen**文件夹构建项目中的 R.java 文件是否成功。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T06:34:58.497

如果发现任何内容，请检查您的 xml 文件并清除错误。有时字符串值或背景资源不可用，请检查它们。有时我们会将诸如LinearLayout之类的布局修改为RelativeLayout，将imageview修改为按钮，此时某些属性在修改后的布局或视图中不可用，请检查它们并删除。最后试试这个项目>>右键单击>>Android工具>>修复项目属性。并再次刷新项目干净。

如果它不适合您，您必须重新创建另一个项目并复制粘贴所有类和 xml 文件、drawables 和所有内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-01T22:18:26.050

这个线程有点陈旧，但如果它对某人有帮助......

我有类似的事情，在验证期间出现空指针错误。这是我所做的：

*   关闭日食
*   转到**工作区**.metadata 文件夹
*   打开最新的 .log 文件
*   确定什么是失败的。
*   进入 .plugins 文件夹并删除相关文件夹
*   重新打开 Eclipse

所以，我得到了这个：

```
java.lang.NullPointerException
at org.eclipse.wst.validation.internal.DependencyIndex.getSet(DependencyIndex.java:102)
at org.eclipse.wst.validation.internal.DependencyIndex.set(DependencyIndex.java:223)
at org.eclipse.wst.validation.Validator$V2.validate(Validator.java:1178)
... 
```

然后解决方案是删除`.plugins/org.eclipse.wst.validation`

我认为里面的数据库/数据文件已损坏或不同步。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T05:51:03.993

我今天在几个小时内遇到了这个确切的问题 - 只有一个项目。

我提交了项目并将其推送到 Github，结果问题消失了；清洁现在完全正常进行。

希望这对某人有帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-11T11:43:01.663

我已经重新启动了 Eclipse。然后可以清理所有项目。它为我工作。

# asp.net - IIS服务器如何区分页面过期和用户控件过期？

> ID：10477441
> 
> 赞同：1
> 
> 时间：2012-05-07T06:08:27.823
> 
> 标签：asp.net, outputcache

现在我将差异过期时间设置为 Asp.net Web Page outputcache 和 Asp.net Web UserControl outputcache。它向我展示了他们两个都是更新的独立性。我认为这两个都是由 IIS 服务器缓存的。但是谁能告诉我IIS服务器如何区分页面过期和用户控件过期？服务器是否对每个请求缓存的html内容（页面html内容和用户控件html内容）进行判断和组合？

我希望你能给我一些建议。谢谢您的帮助！此致，

彭大卫

# sql - 多尺寸头像存储和检索的优化

> ID：10477445
> 
> 赞同：0
> 
> 时间：2012-05-07T06:08:42.410
> 
> 标签：sql, image, optimization

我正在创建一个带有用于存储数据的 SQL 后端的 Web 应用程序。作为我的应用程序的一部分，用户个人资料有个人资料图片。我将在整个应用程序中以两种不同尺寸（16 x 16 和 128 x 128）之一显示用户的个人资料图片。

如何最好地存储图片然后检索它的特定大小？我是不是该

*   将原始图片存入数据库，使用时再调整到想要的大小？
*   将图片存储为 128 x 128 并仅在需要时将其调整为 16 x 16？
*   将图片存储为 128 x 128 和 16 x 16，并仅检索所需的尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:52:14.217

我正在开发具有类似需求的产品。我们将其存储为所需分辨率的两张图像，这与您的最后一种可能性相关。在我们的例子中，存储空间为零，没有理由通过调整图像大小来增加检索图像的开销。当我们收到它们时，我们会处理它们一次，并且在他们改变图片之前不要再担心它。效果很好。

# perl - Catalyst/TT 中的内联模板

> ID：10477446
> 
> 赞同：0
> 
> 时间：2012-05-07T06:08:47.823
> 
> 标签：perl, catalyst

我想知道是否有人知道如何在 Catalyst 的模块的 DATA 部分中内联模板（我想使用 Template Toolkit），就像在 Mojolicious 中似乎可能的那样，您可以在其中执行以下操作（来自文档）：

```
# /bar
get '/bar' => sub {
     my $self = shift;
     $self->stash(one => 23);
     $self->render('baz', two => 24);
};

__DATA__

@@ baz.html.ep
The magic numbers are <%= $one %> and <%= $two %>. 
```

它使我在编写代码时更容易维护，尽管稍后我可能会将所有内容移动到单独的文件中。

谢谢，

西蒙妮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T08:12:45.247

概念证明：

```
package Foo::Bar::Controller::Root;
use Moose;
use namespace::autoclean;
BEGIN { extends 'Catalyst::Controller' }
use Inline::Files;
use Template;
__PACKAGE__->config(namespace => '');
sub end :ActionClass('RenderView') {
    my ($self, $c) = @_;
    my $in = readline $c->stash->{template};
    my $tt = Template->new;
    my $out;
    $tt->process(\$in, $c->stash, \$out) or die $tt->error;
    $c->response->body($out);
}
sub bar :Path {
    my ($self, $c) = @_;
    $c->stash(template => 'BAZ', one => 23, two => 24);
}
__PACKAGE__->meta->make_immutable;
1;

__END__

__BAZ__
The magic numbers are [% one %] and [% two %]. 
```

它有效，但我不能推荐它。这严重违反了 Catalyst 所基于的 MVC 原则。

# sql - 哪种方法可以减少 SQL Server 中的 LOG？

> ID：10477449
> 
> 赞同：0
> 
> 时间：2012-05-07T06:09:04.837
> 
> 标签：sql, ssis

我有一个历史表（父表），它有 1000 万行。我需要将 6 个月前的数据移动到另一个数据库（备份表）并从父历史表中删除这些数据。我应该使用哪种方法？

方法一 1.将Parent表中的所有数据插入到BackUp表中 2.截断父表 3.将Backup表中的数据插入到父表中不少于6个月的数据

方法二

1.  使用 SSIS 将数据从父表获取到备份表
2.  之后从父表中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:08:45.373

为什么不使用分区？如果数据是按月份分区的，你可以简单地擦除整个分区吗？这只是一个想法。我不知道分区对日志记录的影响！

# java - 用 Java 构建控制台应用程序

> ID：10477455
> 
> 赞同：-1
> 
> 时间：2012-05-07T06:10:19.197
> 
> 标签：java, swt, console-application

我正在寻找构建一个可以在 Windows/Mac/Linux UI 中运行的控制台外壳程序。我知道 Eclipse 提供了一些控制台实现，但这需要一个 Eclipse RCP 应用程序。

关于其他轻量级现有开源解决方案的任何建议。

也欢迎对纯 shell 控制台提出建议。我已经检查过 JShell 和 Jline。

**更新：** 我的研究没有带来任何其他可以使用的框架，除非我们使用 Swing/SWT 文本区域并一起管理它。我发现使用 Eclipse 控制台更好，因为它提供了更多选择，并且已经包含了一些功能。

**更新：** Spring Source 刚刚发布了一个名为**spring-shell**的框架，使构建控制台 shell 应用程序更容易。它派生自**Roo源代码，因此提供与****Roo**中相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:29:10.790

Spring Source 刚刚发布了一个名为**spring-shell**的框架，以使构建控制台 shell 应用程序更加容易。它派生自**Roo源代码，因此提供与****Roo**中相同的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T05:50:27.880

Jline 是唯一适用于所有平台的适用于 Java 的可行 shell 框架。像这样的东西需要很多本机代码才能真正正常工作。就这个答案而言，Jline 做得最好。我通常将它与 JSAP 一起使用，并非常成功地创建在无头服务器中工作的自定义应用程序管理 shell。DevOps 的人会为这样的事情发疯。

# c - __func 函数的约定是什么？

> ID：10477458
> 
> 赞同：1
> 
> 时间：2012-05-07T06:10:41.717
> 
> 标签：c, linux, coding-style

我在名为 __foo 的 Linux 代码中看到了一堆函数。双下划线代表什么，应该在什么时候使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:14:15.683

这意味着它是一个保留的标识符。C++ 03 和 C99 标准都提到了这一点。

C99：

> 7.1.3 保留标识符
> 
> *   以下划线和大写字母或另一个下划线开头的所有标识符始终保留用于任何用途。
> *   所有以下划线开头的标识符始终保留用作普通和标记名称空间中具有文件范围的标识符。

C++ 03：

> 每个包含双下划线 (_ _) 或以下划线后跟大写字母 (2.11) 的名称都保留给实现以供任何使用。

您还可以参考：

*   [在 C++ 标识符中使用下划线的规则是什么？](https://stackoverflow.com/q/228783/1241690)
*   [C语言变量名中的双下划线是什么意思？](https://stackoverflow.com/q/3325815/1241690)
*   [为什么人们在 C++ 中如此多地使用 __(双下划线)](https://stackoverflow.com/q/224397/1241690)

# python - python sqlite3更新语句不起作用

> ID：10477462
> 
> 赞同：1
> 
> 时间：2012-05-07T06:11:18.227
> 
> 标签：python, sqlite

我失去了 3 个小时，我无法弄清楚我做错了什么。请帮忙。我得出的结论是它没有像在更新语句中那样传递密钥，因为我没有收到任何错误，但我也没有更新数据库。

```
conn = sqlite3.connect('mov.db')
c = conn.cursor()
old_rows = c.execute('SELECT imdb FROM movies WHERE desc="" and imdb<>"" and year<"1997"')
result = c.fetchall()

for row in result:
    key = row[0] [2:]
    try:
    # Get a Movie object with the data about the movie identified by
    # the given movieID.
        movie = i.get_movie(key)
    except IMDbError, e:
        print "Probably you're not connected to Internet.  Complete error report:"
        print e
            continue

    print movie['title']
    if movie.has_key('plot outline'):
    m=movie['plot outline']
    print m
    print key
    c.execute('UPDATE movies SET desc=? WHERE imdb=?',(m,key))
    print c.rowcount

# Commit the changes and close everything.
conn.commit()
c.close()
conn.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:19:45.697

`continue`似乎每次迭代都会发生，因此您的行`c.execute('UPDATE ...`永远不会执行。你确定你的代码缩进正确吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:45:29.853

您正在从此处的键中删除两个字符，这就是它不再与表中的键匹配的原因：

```
key = row[0] [2:] 
```

# objective-c - 在 C 和 Objective-C 中，我们应该使用 0.5f 还是 0.5？

> ID：10477463
> 
> 赞同：7
> 
> 时间：2012-05-07T06:11:21.820
> 
> 标签：objective-c, c, floating-point

我看到一个作者使用了很多地方：

```
sprite.anchorPoint = CGPointMake(1, 0.5f); 
```

也就是说，为什么不使用`0.5`而不是`0.5f`- 使用有好处`0.5f`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T06:50:32.317

`0.5`是一个`double`常数，while`0.5f`是一个`float`常数。

> 使用 0.5f 有优势吗？

是的。您要么想为计算指定类型（读取：精度），要么避免隐式缩小（以及相关的编译器警告）。

除了避免编译器警告或只是对参数类型非常严格之外，您提供的示例并不引人注目。

然而，不那么明显的双精度提升可能代价高昂。

回答*“我们应该使用 0.5f 还是 0.5”*：因为每个都有适当的时间，所以您应该在您的程序中同时使用*两者。*您应该使用适合所需计算/精度的类型、您传递的参数的类型或适合表达式中其他值的类型。这就像整数一样——有适当的时间来考虑宽度，也有适当的时间来添加后缀（例如`U`和`L`）。有时区分很重要，而（自然）有时并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:14:19.720

常量 0.5 在 Objective-C 中声明了一个 double，在末尾放了一个 f - 0.5f 将常量声明为（32 位）浮点数。
看看Objective-C/C帖子[中数字/浮点数之后的“f” 。](https://stackoverflow.com/questions/2391818/f-after-number-float-in-objective-c-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T06:18:15.297

尾随`f`强制常量为单精度`float`，因为浮点常量默认为`double`s。这在几个编译器修订版之前更为重要，因为我不相信双精度到浮点数的自动类型转换，因为编译器无法确保这样做没有副作用。结果是很多代码保留了`f`说明符，以避免在只需要单精度浮点寄存器时加载双精度浮点寄存器时烧毁周期。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T14:02:01.820

当双常量合适时使用浮点常量会产生后果，反之亦然：

1.  许多常量会改变值。例如，.3 不等于 .3f。当源文本包含十进制数字时，编译器必须将其转换为可以用浮点表示的值。1999 C 标准要求将其转换为最接近的较高可表示值或最近的较低可表示值。一个好的编译器会将它转换为任一方向上最接近的值，并且在平局的情况下，将选择最低位为零的那个。（返回这样的值称为“正确舍入”。）当正确舍入为常用的浮点格式时，.3 变为 0x1.3333333333333p-2，.3f 变为 0x1.333334p-2。（这些是十六进制浮点常数。“0x”之后和“p”之前的部分是十六进制数字，“p”之后的部分是 2 的十进制指数。所以 0x3.cp4 是 0x3.c 乘以 2⁴，即 (3 + 12/16)⋅2 ⁴ = 60。)

2.  表达式改变类型。当算术运算符的操作数同时包含 float 和 double 操作数时，float 操作数将转换为 double。这可能会导致计算值发生变化。1999 C 标准允许编译器以比其类型要求更高的精度和范围来表示浮点值，因此浮点值可以保存在双精度寄存器中并使用双精度算术运算。但是，如果使用双精度常量，则要求编译器使用双精度运算。因此，如果浮点 x 包含 0x1.24924ap-3（大约 1/7），那么“x + .5f”可能会产生 0x1.492492p-1，而“x + .5”必须产生 0x1.4924928p-1。

3.  在可能根据参数类型选择调用哪个函数的 Objective C、C++ 和其他语言中，更改参数的类型可以完全改变执行的代码。调用“foo(.5f)”可以调用分配内存的例程，而“foo(.5)”写入网络套接字。这通常是被调用对象的糟糕设计，但在特殊情况下，对象需要对其参数的类型敏感。此外，这在 C 中在技术上是可行的（如在 tgmath.h 中），但很少见（通常涉及使用预处理器将“foo”定义为测试其参数大小的表达式）。

上述列表并非包罗万象。

另一方面，代码或数据大小很少成为问题。无法保证无论您编写 .5f 还是 .5，编译器都会实际存储浮点数或双精度数。例如，如果我写“printf("%g", 3.*4.+5.)”，编译器不需要存储3、4或5。它只需要生成一个写“17 ” 到标准输出，它可以通过存储 3、4 和 5 并在运行时进行计算或存储 17 并在运行时将其传递给 printf 或仅存储字符串“17”并将其写入带有 puts 的标准输出，根本不存储任何数字或调用 printf。

因此，通常情况下，使用哪种类型最重要的是正确表达您想要执行的计算，而不是担心优化。如果你写“foo(.5)”并且 foo 有一个 double 参数，编译器可能会将 .5f 存储在程序的常量中并生成代码，在运行时将 .5f 加载到一个 double 寄存器中并将其传递给 foo . 我希望一个好的编译器能够以最小的形式存储常量，无需额外的执行成本即可加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T19:46:33.110

您还需要考虑 0.5 在单精度和双精度浮点中都可以精确表示。这意味着它们完全相同。相应格式中可用的有效位的数量并不重要，因为值 0.5 只需要有效位中的单个位（隐式位），所有剩余位均为 0。

因此，如果您需要节省存储空间，0.5f 是可取的。

# winapi - 在 64 位 Microsoft Access 中使用 comdlg32.dll

> ID：10477466
> 
> 赞同：0
> 
> 时间：2012-05-07T06:11:35.470
> 
> 标签：winapi, ms-access, 64-bit, 32-bit, windows-7-x64

> **可能重复：**
> [Access 2010 64bit 是否有打开文件对话框？](https://stackoverflow.com/questions/4746938/is-there-an-open-file-dialog-for-access-2010-64bit)

我一直在尝试解决有关从 64 位操作系统中的 64 位版本访问中调用 winAPI 的问题！很难找到它为什么不起作用，我注意到你发布了：

“此解决方案不适用于带有 Microsoft Access 64 位的 Windows 7 64 位。当我运行代码时，它立即返回“用户按下了取消按钮”。

在这个论坛上： [Access 2010 64bit 是否有打开文件对话框？](https://stackoverflow.com/questions/4746938/is-there-an-open-file-dialog-for-access-2010-64bit)

我现在就在这里！

不要以为你从来没有解决这个问题？我似乎在我搜索的任何地方都没有看到它（好吧，无论如何，一个解决方案，很多抱怨......）

# jquery - 为什么 $(#textbox1)[0].value 中的 [0] 用于获取 asp.net 控件中的标量值？

> ID：10477476
> 
> 赞同：2
> 
> 时间：2012-05-07T06:12:23.377
> 
> 标签：jquery, asp.net, textbox

我是 jquery 和 asp.net 的新手。我正在使用以下编码来检索值。为什么使用 $(#textbox1)[0].value 中的 [0]？有没有其他方法来检索价值？

```
$.ajax({
                     type: "POST",
                     url: "Default.aspx/GetTextData",
                     data: "{}",
                     contentType: "application/json",
                     dataType: "json",
                     success: function(msg) {
                       $("#txtResult")[0].value = msg.d;
                     }
                 }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:15:55.493

在您的代码上下文中，它实际上并不是在检索值，而是在设置：

`$("#txtResult")[0].value = msg.d`

您可以使用替代的 jQuery 语法（根据我的评论）：

`$('#txtResult').val(msg.d)`

需要使用`[0]`该代码的作者想要为`DOMElement`输入的标准分配一个值，用于从该 jQuery 对象`[0]`获取本机。`DOMElement`或者，您可以使用：

`$('#txtResult').get(0).value = msg.d`

虽然之前的方式还是比较可取的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:21:28.983

我建议`$("#txtResult").val(msg.d)`改用，因为那是 jQuery 函数。

使用 [0] 的原因是访问 DOM 元素而不是 jQuery 元素（例如，你不能运行`$("#txtResult")[0].val(msg.d)`，因为`.val`它是一个 jQuery 函数）

`$("#txtResult").val(-something-)`实际上设置了值（不是在你写的问题中检索）。

`$("#txtResult").val()`是用于从元素中检索值的命令。

# c# - 即使在运行后其值保持不变的文本框

> ID：10477478
> 
> 赞同：0
> 
> 时间：2012-05-07T06:12:34.420
> 
> 标签：c#, visual-studio-2010, silverlight, windows-phone-7

我正在使用 Visual Studio for windows phone / C# 制作一个应用程序。我被困在这里...我想要一个可以在运行时更改其值的文本框。但是当用户关闭应用程序并重新运行它时，该值应该在那里（最后更改一个）。这是代码..

```
int k,m;
if (k <= m)
            {
                k = m+1;
                ABC.Text = k.ToString();
            } 
```

我希望 abc.Text 成为正在寻找的文本框请帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:34:16.800

您需要将希望在文本框中显示的值存储在应用程序内存空间之外，因为应用程序的内存在关闭后会被清理。一个选项是将其存储到文件中并在应用程序关闭之前将值写入其中。下面给出了一个示例代码：

```
 using System;
 using System.Text;
 using System.IO;

 namespace FileWriting_SW
 {
  class Program
  {
    class FileWrite
    {
        public void WriteData()
        {
            FileStream fs = new FileStream("c:\\test.txt", FileMode.Append, FileAccess.Write);
            StreamWriter sw = new StreamWriter(fs);
            Console.WriteLine("Enter the text which you want to write to the file");
            string str = Console.ReadLine();
            sw.WriteLine(str);
            sw.Flush();
            sw.Close();
            fs.Close();
        }
      }
       static void Main(string[] args)
       {
           FileWrite wr = new FileWrite();
           wr.WriteData();
       }
       }
    } 
```

代码和解释可以在这个站点[找到](http://www.c-sharpcorner.com/uploadfile/puranindia/file-handling-in-C-Sharp/)。当然，这段代码只是 c# 中的控制台应用程序。阅读有关文件处理以及如何在 windows-phone 中进行的更多信息。然后所有的部分将组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:11:07.727

**在隔离存储**中创建一个文件并将您的值存储在那里。

当您的应用程序加载时，检索并显示该值。

如果您不知道如何使用隔离存储，请观看[此](http://channel9.msdn.com/Blogs/egibson/Windows-Phone-7-Jump-Start-Session-7-of-12-Advanced-Application-Development-Part-1)视频。

# c# - 如何在 C# TBB（C# 代码片段）中添加用户定义的方法？

> ID：10477483
> 
> 赞同：7
> 
> 时间：2012-05-07T06:13:30.890
> 
> 标签：c#, tridion

我正在创建一个 C# TBB（C# 代码片段）。为此，我需要编写一个用户定义的方法。我尝试使用 <%! %>。如何在代码中访问用户定义的方法。提前致谢。请建议我解决此问题的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T06:34:38.953

TOM.NET API 参考提供了以下示例：

```
<%@ Import Namespace="Tridion.ContentManager.Publishing"%>
<%!
private string ExtraString()
{
    return "Something added by the C# template";
}
%>
log.Debug("Executing C# template");
if (engine.RenderMode == RenderMode.Publish)
{
    package.GetByName(Package.OutputName).AppendToStringValue(ExtraString());
} 
```

除了上述之外，还支持以下语法：

```
<%@Import Namespace="..." %> 
```

将引号之间的命名空间导入代码片段。您导入的任何类都必须存在于全局程序集缓存中。

```
<%! ... %> 
```

声明要使用的其余代码片段的方法、常量和类。声明不能包含字符串“%>”。请注意，您创建的任何类只能在代码片段中引用。

```
<%RunTemplate Template="tcm:1-184-2048" Class="Tridion.Templating.Examples.ExampleTemplateClass"%> 
```

运行特定的 .NET 程序集模板构建块，由 Template 属性中的 URI 标识。此语句通常在您上传 .NET 程序集时由 SDL Tridion 2009 自身生成，以提供对 .NET 程序集中特定类的访问。

```
<%@Assembly Name="System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"%> 
```

插入对非标准 .NET 程序集的引用，该程序集必须存在于全局程序集缓存中。使用完整的程序集名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:34:59.867

这是文档[参考链接](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=c%2523%2520fragment&sid=lcSearch.runSearch1336480377584&eventType=lcContent.loadDocconcept_A09C15BAC797438B85765FF06730CF12&query=&scope=&filename=CSharpFragmentScriptingSyntax.xml&docid=concept_A09C15BAC797438B85765FF06730CF12&inner_id=&tid=&addHistory=true&resource=)，其中包含 Nickol 指向的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T09:54:10.150

查看以下链接以获取有关在 C# 代码片段中创建函数和类的完整详细信息。

1.  函数： [https ://rcnitesh.wordpress.com/2015/04/23/functions-in-c-tbb/](https://rcnitesh.wordpress.com/2015/04/23/functions-in-c-tbb/)
    **[有关代码示例的完整详细信息，请查看上面的链接]**

2.  类： [https](https://rcnitesh.wordpress.com/2015/04/24/creating-user-defined-classes-in-c-code-fragment/) ://rcnitesh.wordpress.com/2015/04/24/creating-user-defined-classes-in-c-code-fragment/ 以下是上述博客的摘录：

使用以下构造在 C# 代码片段中定义类：`<%! %>`.

这个 USER 定义的类被放置为 Tridion 在编译 C# 代码片段时创建的 PREDEFINED CLASS 的 NESTED CLASS。查看此博客文章以深入了解 C# 代码片段编译和预定义类、由 tridion 生成的方法以及了解 Tridion 的预定义类与 C# 代码片段中用户定义类的关系

如上所述，我们需要了解的是，C#代码片段中的用户定义的类不能访问预定义的变量，如：log、engine、和package，因为这些变量实际上是在编译过程中生成的预定义类中声明的。

**[有关包括代码示例在内的完整详细信息，请查看以上链接]**

# qtwebkit - QtWebKit 真的是跨平台的吗？

> ID：10477484
> 
> 赞同：2
> 
> 时间：2012-05-07T06:13:32.157
> 
> 标签：qtwebkit

使用 QtWebKit (C++) 构建的应用程序能否在 Windows、Mac OSX 和 Linux 上成功地使用 Javascript、flash 插件、html5 呈现网页？

QtWebKit 在部署时是独立的还是使用主机操作系统的本机浏览器组件来呈现页面（在 Java 中完成）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:25:18.007

QtWebkit 就像以 Qt 的方式使用 WebKit。如果你在 Qt 之上构建一个应用程序，webkit 支持渲染一些页面，你提到的所有东西，比如脚本和 flash - 那么你需要确保你在开发环境中拥有它的所有支持二进制文件包含您分发的应用程序。此外，框架正在完成其余的工作。如果目标操作系统可以启动一个Qt App，那么该框架也将具有Webkit适配能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T19:02:47.900

据我所知，Qt 应用程序包括分发它时所需的所有二进制文件，并且它们与应用程序一起安装到主机系统中。

我看不出它为什么不能对 WebKit 渲染引擎做同样的事情的任何原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:43:00.767

webkit 是一个 HTML5 渲染器。如果您使用 QtWebkit，它将包含 webkit 渲染器（因此它不会使用任何本机渲染器）。它还将包括对 CSS 和 javascript 的处理。浏览器窗口、按钮、菜单等由您来创建，但它们将使用 Qt。与内容的交互将使用 Qt 的信号和插槽。

添加插件由您决定，我不确定它是如何工作的。因此，Flash 不会被包含在开箱即用的范围内。我不确定在 HTML5 视频/音频中构建有多难（这应该意味着你不需要 Flash）。我相信您需要包含 qt 的声子模块才能使这些多媒体作品正常工作。

正如其他人所说，只要您在应用程序中包含 Qt dll，它将是独立的。

# html - 可以从 webkitStorageInfo.queryUsageAndQuota() 获得哪些详细信息

> ID：10477489
> 
> 赞同：3
> 
> 时间：2012-05-07T06:14:03.813
> 
> 标签：html, google-chrome, google-chrome-extension, fileapi, html5-filesystem

webkitStorageInfo.queryUsageAndQuota() 用于查找已使用 HTML5 文件系统 API 存储在文件系统中的文件的使用情况统计信息。谁能给我在提供给此函数的回调中可以获得的详细信息。

```
window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.PERSISTENT, function() {
   //what all details can be obtained in this function as its arguments?
}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-15T23:50:19.470

以下是*当前*API 的两个示例。

它使用`navigator.webkitPersistentStorage.requestQuota`而不是弃用的`window.webkitStorageInfo.queryUsageAndQuota`：

## 查询配额

```
navigator.webkitPersistentStorage.queryUsageAndQuota ( 
    function(usedBytes, grantedBytes) {  
        console.log('we are using ', usedBytes, ' of ', grantedBytes, 'bytes');
    }, 
    function(e) { console.log('Error', e);  }
); 
```

## 请求配额

```
var requestedBytes = 1024*1024*280; 

navigator.webkitPersistentStorage.requestQuota (
    requestedBytes, function(grantedBytes) {  
        console.log('we were granted ', grantedBytes, 'bytes');

    }, function(e) { console.log('Error', e); }
); 
```

这里我们使用`navigator.webkitPersistentStorage`查询和请求**持久化**存储配额。您还可以使用`navigator.webkitTemporaryStorage`临时**存储**配额。

当前的 Chrome 实现跟踪这个特定的规范版本，它描述了更多内容：[https](https://www.w3.org/TR/quota-api/) ://www.w3.org/TR/quota-api/ 。

`temporary`他们还特别解释了与`permanent` [此处](https://www.w3.org/TR/quota-api#h-temporary-vs-persistent)的区别：临时数据更像是您的`tmp`文件夹或弱引用，因为系统可能会随心所欲地删除内容，而永久数据应始终在删除之前通知用户。

您可能希望从一个包装器开始，以逃避所有与 Web API 相关的浏览器兼容性地狱（规范的许多部分明确指出：“这是一个提议，可能会在没有任何通知的情况下更改”）。例如，[Dexie是一个积极开发的 IndexedDb 包装器。](https://dexie.org)

[chromestore.js](https://github.com/summera/chromestore.js/)是另一个包装器（但多年未触及）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T08:09:52.517

换成`function(){...}`，`console.log.bind(console)`你会发现。

```
> window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.PERSISTENT, console.log.bind(console))
undefined  // Return value of ^
0 0        // Printed results, argument 0 and argument 1 
```

回调的解释在[这里](https://groups.google.com/a/chromium.org/group/chromium-html5/msg/5261d24266ba4366?pli=1)找到：

```
interface StorageInfo { 
  ....
  // Queries the current quota and how much data is stored for the host. 
  void queryUsageAndQuota( 
      unsigned short storageType, 
      optional StorageInfoUsageCallback successCallback, 
      optional StorageInfoErrorCallback errorCallback); 
  ... 
```

```
[NoInterfaceObject, Callback=FunctionOnly]
接口 StorageInfoUsageCallback {
  无效句柄事件（无符号长长电流使用字节， 
                   无符号长长电流配额）；
};
```

所以，第一个数字表示使用了多少字节，
第二个数字表示配额的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T02:48:51.663

```
// Request storage usage and capacity left
window.webkitStorageInfo.queryUsageAndQuota(webkitStorageInfo.TEMPORARY, //the type can be either TEMPORARY or PERSISTENT
function(used, remaining) {
  console.log("Used quota: " + used + ", remaining quota: " + remaining);
}, function(e) {
  console.log('Error', e); 
} ); 
```

使用和剩余的位置以字节为单位

取自[谷歌开发者](https://developers.google.com/chrome/whitepapers/storage#query)

# mysql - Mysql innerjoin（也许）以更新日期为标准

> ID：10477494
> 
> 赞同：0
> 
> 时间：2012-05-07T06:14:29.573
> 
> 标签：mysql, inner-join

我有这个要求，我正在使用 MySQl 数据库

**评论表**

```
id  user id  ariticle_id     comment        comment date
========================================================
 1     45        2           comment1          02/03/12
 2     45        2           comment2          03/03/12
 3     45        2           comment3          04/03/12 
 4     45        2           comment4          05/03/12
 5     45        2           comment5          06/03/12
 6     45        5           comment7          04/03/12
 7     45        5           comment8          05/03/12
 8     45        5           comment9          06/03/12 
```

文章表

```
id   article_text               article_date
============================================
2    Some text                  01/03/12
2    updated text               04/03/12
5    another text               03/03/12
5    another updated text       04/03/12 
```

我想从评论表和文章表中获取所有详细信息 userid、article_id、article_text、comment、comment_date

对于给定的文章 id =2 用户 id =45，并在更新文章后提供详细信息。

预期的输出是这样的

```
 user_id   article_id   comment           commentdate
     45        2           comment3          04/03/12
     45        2           comment4          05/03/12
     45        2           comment5          06/03/12 
```

我迷路了请帮忙，我正在尝试使用 MYSQL 中的查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:23:07.687

您应该尝试具体说明您正在使用的 id，试试这个，

```
Select * from comment_table
join article_table on article_table.id = comment_table.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:03:39.537

现在，我想我明白了你的要求

但是文章表中有重复的ID

修复此问题后，您可以尝试使用此 SQL

```
SELECT  c.userid,
        c.article_id,
        c.comment,
        c.commentDate
FROM   comment_table c 
INNER JOIN article_Table a
ON     a.id = c.ariticle_id
AND    c.article_id = 2 
AND    c.userid = 45 

WHERE   c.commentDate >= (SELECT article_date
                          FROM article_date
                          WHERE id = c.ariticle_id ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:22:01.343

希望这可以帮助：

```
SELECT  a.userid,
        a.article_id,
        b.article_text,
        a.comment,
        a.commentDate
FROM    comment_table a INNER JOIN article_Table b
           ON a.article_ID = b.article_ID
WHERE   a.article_id = 2 AND a.userid = 45 AND
            b.commentdate > date('2012/04/03') 
```

# javascript - 自定义jQuery数据表列搜索功能

> ID：10477496
> 
> 赞同：2
> 
> 时间：2012-05-07T06:14:41.077
> 
> 标签：javascript, jquery, jsp, datatable

我使用您可以在[此处](https://stackoverflow.com/questions/10312302/populate-a-custom-drop-down-box-in-data-table)找到的代码在 J-Query 数据表上创建了一个自定义标题。I want to add a custom parameter to the data table when a particular item from the drop-down box is selected.

以下是我的代码：

```
$(function() {
  var oTable = $('#reqAllQueriesTable')
    .dataTable({
      "bProcessing": true,
      "bServerSide": true,
      "sAjaxSource": "query/getQuery",
      "bFilter": true,
      "bJQueryUI": true,
      "sSearch": "Search",
      "sDom": '<"H"<"projectTeamTools">lrft>'
    });

  $("div.projectTeamTools").html('Organize by Project Teams: <select id="projectTeams"><option value="1">Project Team</option><c:forEach var="projectTeam" items="${userProjectTeams}"><option value="${projectTeam.projectId}" onClick="javascript:onTeamSelect(this.value)">${projectTeam.projectName}</option></c:forEach></select>');
});

function onTeamSelect(teamId) {
  alert(teamId + " Selected");
  oTable.aoServerParams.push({
    name: "aoTeamId",
    value: teamId
  }); //This line does not work.
}
```

```
<link href="https://cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>

<table id="reqAllQueriesTable"></table>
```

该`onTeamSelect()`函数被正确调用并显示警报。但是我想将 custm 参数添加`aoTeamId`到数据表中，并将值传递给`getQuery`我用来填充数据表的控制器。这可能吗？请帮忙！

# android - 如何诊断“警告：活动 APK 支持的设备比以前活动的 APK 少。某些用户不会收到更新”

> ID：10477498
> 
> 赞同：-2
> 
> 时间：2012-05-07T06:15:00.350
> 
> 标签：android

我更新了市场上的应用程序，并收到此错误：

警告：活动 APK 支持的设备数量少于之前的活动 APK。部分用户不会收到更新

但是，我想不出任何我改变的东西会导致这种情况。大多数情况下，我添加了一堆新样式和可绘制对象。

有什么方法可以确定从 apk 中排除哪些设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:22:59.670

您是否更改了应用程序清单文件中的任何内容？当您向应用程序添加权限时，通常会发生这种情况。尝试检查您的标签...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:23:48.863

如果您尚未编辑 AndroidManifest.xml，则不应发生这种情况。如果您没有使用版本控制，或者没有将您的提交标记为“已上传”，您可以通过下载 apk 并提取它来检查上传的清单。

# android - android中的ontouchevent

> ID：10477502
> 
> 赞同：0
> 
> 时间：2012-05-07T06:15:14.807
> 
> 标签：android, touch-event, ontouchlistener

我正在做一个应用程序，它将显示 ontouch 的位置。我的代码如下我编辑了我的代码。公共类 AndroidTabLayoutAcActivity 扩展 Activity{

```
DemoView demoview1 ;
DemoView2 demoview2;
DemoView3 demoview3;
DemoView4 demoview4;
LowerView lowerview;

float d,b;

//ViewFlipper c;
//ViewFlipper a;
String text="Oxygen";
String text1="Carbon";
String text2="Phosphate";
String text3="Hydrogen";

//Called when the activity is first created. 
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            demoview1 = new DemoView(this);
             setContentView(demoview1);
              demoview1.requestFocus();

}

public class DemoView extends View implements OnTouchListener{
    String n1="";
            String n2="";
            Canvas canvas;
    public DemoView(Context context){
        super(context);
        setOnTouchListener(this);

    }
     public boolean onTouch(View view, MotionEvent event) {
            // if(event.getAction() != MotionEvent.ACTION_DOWN)
            // return super.onTouchEvent(event);

            d = event.getX();
           b = event.getY();

          n1=Float.toString(d);
          n2=Float.toString(b);
              onDraw(canvas); 
            return true;
        }

    @Override protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        int x = 150;
        int y = 100;
        Paint paint = new Paint();
        paint.setStyle(Paint.Style.FILL);

        // make the entire canvas white
        paint.setColor(Color.CYAN);
        canvas.drawPaint(paint);
        paint.setAntiAlias(true);
        paint.setColor(Color.RED);
        canvas.drawCircle(x-24, y+30, 11, paint);
        paint.setColor(Color.WHITE);
        canvas.drawCircle(x+11, y-11, 7, paint);
        canvas.drawCircle(x+6, y+48, 7, paint);
        canvas.drawCircle(x+21, y+43, 7, paint);
        //carbon molecule
        paint.setColor(Color.BLACK);
        canvas.drawCircle(x, y, 11, paint);
        canvas.drawCircle(x-11, y+19, 11, paint);
        canvas.drawCircle(x, y+38, 11, paint);
        canvas.drawCircle(x+20, y+30, 11, paint);
        canvas.drawCircle(x-11, y-19, 11, paint);

        //hydrogen molecule
        paint.setColor(Color.WHITE);
        canvas.drawCircle(x-25, y-12, 7, paint);
        canvas.drawCircle(x+2, y-27, 7, paint);
        canvas.drawCircle(x-20, y+9, 7, paint);
        canvas.drawCircle(x-10, y+45, 7, paint);
        canvas.drawCircle(x-34, y+40, 7, paint);
        canvas.drawCircle(x+51, y+18, 7, paint);
        canvas.drawCircle(x-33, y-52, 7, paint);

        //oxygen molecule
        paint.setColor(Color.RED);
        canvas.drawCircle(x+41, y+30, 11, paint);
        canvas.drawCircle(x+20, y+9, 11, paint);
        canvas.drawCircle(x-23, y-37, 11, paint);
        canvas.drawText(n1, x+100, y+100, paint);
        canvas.drawText(n2, x+100, y+100, paint);

    }

} 
```

}

我的日志 cat 文件显示以下错误，但我不明白为什么它显示以下错误..

```
 05-07 12:26:31.354: E/AndroidRuntime(385): FATAL EXCEPTION: main
05-07 12:26:31.354: E/AndroidRuntime(385): java.lang.NullPointerException
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.example.an.AndroidTabLayoutAcActivity$DemoView.onDraw(AndroidTabLayoutAcActivity.java:150)
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.example.an.AndroidTabLayoutAcActivity$DemoView.onTouch(AndroidTabLayoutAcActivity.java:136)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.view.View.dispatchTouchEvent(View.java:3762)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.os.Looper.loop(Looper.java:123)
05-07 12:26:31.354: E/AndroidRuntime(385):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-07 12:26:31.354: E/AndroidRuntime(385):  at java.lang.reflect.Method.invokeNative(Native Method)
05-07 12:26:31.354: E/AndroidRuntime(385):  at java.lang.reflect.Method.invoke(Method.java:521)
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-07 12:26:31.354: E/AndroidRuntime(385):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-07 12:26:31.354: E/AndroidRuntime(385):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:20:28.877

我的假设，

你对这些行有错误，

```
canvas.drawText(n1, x+100, y+100, paint);
canvas.drawText(n2, x+100, y+100, paint); 
```

当你`setContentView(demoview1)`
然后你的 demoVIew`onDraw()`将首先被调用并且仍然`onTouch()`不是，那么你还没有一个值`String n1, n2`..两者都是空的，所以它会给你**NullPointerException**

所以试试，

```
String n1 = "", n2="";
        public DemoView(Context context){
            super(context);
            setOnTouchListener(this);
        }
      public boolean onTouch(View view, MotionEvent event) {
         // if(event.getAction() != MotionEvent.ACTION_DOWN)
         // return super.onTouchEvent(event);

         d = event.getX();
         b = event.getY();

         n1 = d +"";
         n2 = b +"";
          return true;
   } 
```

其实我认为你必须初始化你的 `String n1 = "", n2 = "";`

# bash - 如何在脚本中比较 `which` 与 -1 的返回值？

> ID：10477503
> 
> 赞同：0
> 
> 时间：2012-05-07T06:15:19.740
> 
> 标签：bash

我正在尝试设置一个脚本来找到 bash 的位置，然后在 shabang 中使用它，我没有使用`env`，因为我读到的示例脚本说使用符号链接`env`以防万一它不在`usr/bin`所以为什么当我这样做时可以只使用`which`查找`bash`然后设置链接吗？我遇到的问题是比较返回***是否******找不到***`which`命令（-1） ***`which`***

但是 -1 是一个换行符，当我比较它是真的时，我得到一个错误，我正在将一个字符串`/bin/bash`与一个数字 -1进行比较

我尝试了几种不同的方法，但不知道如何让它工作

```
newname=$(which bash)
echo $newname
fault=-1
if [ "$newname" = fault ] ; then
echo couldn\'t find bash shell
else
#! newname 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:25:33.343

> 我正在尝试设置一个脚本来找到 bash 的位置，然后在 shabang 中使用它

你不能那样做。现在发生的事情是无论如何默认情况下您的脚本都是由 shell 运行的。如果不是，您如何使用 shell 在脚本中获取 shell 的位置？即使您将其重命名为“script.blah”并删除任何 shebang，只要它是可执行的并且包含 shell 命令，shell 就会运行它。

如果你在页面的中间放置一个 shebang，它没有任何意义——它只是一个评论。要使 shebang 成为 shebang，`#!`必须是**文件中的前两个字符**。这是告诉外壳传递给任何东西；如果它没有找到，它就假定它是一个 shell 脚本。如果你想在这之后调用其他的 shell 或解释器，你必须像在命令行上那样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:50:49.103

不仅绝对没有理由做你正在做的事情，而且试图检测 shell 的位置假定脚本已经在 shell 中运行。

无论你读到什么`env`都是错误的。没有理由期望它是一个符号链接。人们`env`在 shebang 中使用是因为找到 under 的机会比找到`env`under的机会要大一些，但很多人甚至不理会这个。据推测，您之所以像这样跳过篮球是为了便携性，在这种情况下，这是一个非常糟糕且不标准的选择。而是使用, 或在 ksh 中, . 例如：`/usr/bin``Bash``/bin``which``type``whence`

```
if x=$(type -p bash); then
    "$x" myscript
else
    echo "Not found" >&2
fi 
```

不幸的是，究竟`type`做什么也没有很好的标准化。只需执行命令，shell 要么做它的事情，要么抛出一个错误。仅在不常见的情况下才需要检查命令是否存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:20:20.423

您可以使用`$?`来引用上次运行进程的返回值。例如：

```
name=$(which bash)
if [[ $? == 0 ]]; 
    then echo "found"; 
fi 
```

### 笔记

在您的问题中，您似乎假设错误始终为-1。一般来说，这是不正确的。程序将向 shell 返回一个非零错误代码。因此 0 是成功，任何其他值（包括 -1）都是失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T06:26:09.587

你可以跑

```
which bash && found=true 
```

Found 只会在成功终止时设置（即如果找到）

# javascript - 单击任何指定的单选按钮时取消选中所有单选按钮

> ID：10477506
> 
> 赞同：0
> 
> 时间：2012-05-07T06:15:50.287
> 
> 标签：javascript, javascript-events

下面的 HTML 显示了单选按钮，下面的 DIV 显示了根据每个单选按钮的点击功能将出现的内容

```
 <ul>
     <li id="6"><input type="radio" name="sell" value="sell" id="sell" />Sell</li>
     <li id="7"><input type="radio" name="rent" value="rent" id="rent" />Rent</li>
 <li id="8"><input type="radio" name="donate" value="donate" id="donate" />Donate</li>
</ul>

   <div id="selltab">                           
        eeeeeeeee
   </div>
    <div id="renttab">
         ffffffffff
  </div>
     <div id="donatetab">
         ggggggggg
    </div> 
```

下面显示的 javascript 函数工作正常，并在单击其他单选按钮时隐藏内容。但问题是所有单选按钮都显示为选中状态，即使 div 中的其他内容没有被选中......

Need to uncheck remaining 2 radio button,when either one is selected, is it possible

```
 $(document).ready(function(){
    $('#selltab').hide();
    $('#renttab').hide();
    $('#donatetab').hide();

       $('input[name=sell]').click(function(){
     $('#selltab').toggle();
         $('#renttab').hide();
     $('#donatetab').hide();
      $('rent').checked = false;
     $('donate').checked = false;
       })

   $('input[name=rent]').click(function(){
    $('#renttab').toggle();
$('#selltab').hide();
    $('#donatetab').hide();
$('sell').checked = false;
       $('donate').checked = false;
    })

    $('input[name=donate]').click(function(){
       $('#donatetab').toggle();
 $('#selltab').hide();
    $('#renttab').hide();
$('rent').checked = false;
     $('sell').checked = false;
   })

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:34:17.677

是的，当然。你可以通过两种方式做到这一点

第一个是您可以轻松地将组（设置相同的名称）设置为单选按钮，如下所示：

```
<ul>
 <li id="6"><input type="radio" name="r1" value="sell" id="sell" />Sell</li>
 <li id="7"><input type="radio" name="r1" value="rent" id="rent" />Rent</li>
 <li id="8"><input type="radio" name="r1" value="donate" id="donate" />Donate</li>
</ul>

$(document).ready(function(){
    $('#selltab').hide();
    $('#renttab').hide();
    $('#donatetab').hide();

    $('input[id=sell]').click(function(){
    $('#selltab').toggle();
    $('#renttab').hide();
    $('#donatetab').hide();
    })

    $('input[id=rent]').click(function(){
    $('#renttab').toggle();
    $('#selltab').hide();
    $('#donatetab').hide();
    })

    $('input[id=donate]').click(function(){
    $('#donatetab').toggle();
    $('#selltab').hide();
    $('#renttab').hide();
   })
}); 
```

第二个是使用另一个 JavaScript 函数来解决您的问题，如下所示：

```
<ul>
 <li id="6"><input type="radio" name="sell" value="sell" id="sell" onClick="checkedRadioButton(this);"/>Sell</li>
 <li id="7"><input type="radio" name="rent" value="rent" id="rent" onClick="checkedRadioButton(this);"/>Rent</li>
 <li id="8"><input type="radio" name="donate" value="donate" id="donate" onClick="checkedRadioButton(this);"/>Donate</li>
</ul>

function checkedRadioButton(obj){
    var id = obj.name.substring(obj.name.lastIndexOf(':'));
    var el = obj.form.elements;
    for (var i = 0; i < el.length; i++) {
        if (el[i].name.substring(el[i].name.lastIndexOf(':')) == id) {
            el[i].checked = false;
        }
    }
    obj.checked = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:31:58.940

在这种情况下，您实际上要做的是让所有单选按钮共享相同的名称。单选按钮的默认行为是，只能同时选择一组中的一个。而不是通过使用来访问它们

```
$('input[name=theName]') 
```

就像你现在正在做的那样，只需使用

```
$('#theInputIdHere') 
```

因为你已经给了他们ID。有了这个，取消选中任何单选按钮不会有问题，因为默认情况下，始终只会选择一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:32:11.003

尝试更换你的`$('rent').checked = false;`

和`$("#rent").attr("checked", false);`

必要时对其他 2 个类似。

你想通过 ID 访问它，所以使用 #

# oracle - Oracle Reports 在电子表格输出中将列拆分为额外的行

> ID：10477509
> 
> 赞同：3
> 
> 时间：2012-05-07T06:15:56.090
> 
> 标签：oracle, oracle10g, oraclereports

我目前正在处理一些 oracle 10g 报告，这些报告将数据导出为`.xls`使用.`ENHANCEDSPREADSHEET``DESFORMAT`

我遇到的问题是某些列的数据被拆分为额外的行。最初我认为这只是因为数据有回车/换行符。但是，我已添加`REPLACE(REPLACE(location, CHR(10), ''), CHR(13), '')`到报告的查询中。这删除了一些显示此重复的行。

虽然不确定我开始认为它是由垂直弹性设置为展开的列引起的。（这已经在变量和固定的情况下进行了尝试。）垂直弹性设置为固定行重复停止，但数据在电子表格中新行的开头被截断（我假设它只是一个固定值）并且变量选项显示与展开完全相同的行重复。

有没有其他人遇到过这个问题？如果你解决了，你是如何解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:24:29.143

我以前遇到过这个。我认为这与报告如何布置多页报告有关。我通过稍微增加所有字段的高度来修复它，将 Vertical Elasticity 设置为 Expand，Horizo​​ntal Elasticity 设置为 Fixed。![在此处输入图像描述](../Images/72817289286c4141c96eb12521f04ddd.png)

# css - CSS3盒子阴影效果在Opera中不起作用

> ID：10477517
> 
> 赞同：0
> 
> 时间：2012-05-07T06:17:00.940
> 
> 标签：css, opera

我有一个菜单，它在悬停和活动状态上使用 Css3 效果。菜单看起来像这样![在此处输入图像描述](../Images/ac68ee6f144567096ee7c28d25c8a5a8.png)

这是我使用的 Css3 样式

```
#Menu a:active,
#Menu a.active:before,#Menu a:hover:before
{
    Content: ' ';
    position:absolute;
    z-index:51;
    width:0px;
    height:0px;
    left:50%;
    top:50%;
    box-shadow:0 0 35px 30px #ADD7E7;
    -moz-box-shadow:0 0 35px 30px  #ADD7E7;
    -webkit-box-shadow:0 0 35px 30px  #ADD7E7;
    border-radius:50%;

} 
```

这适用于 Firefox 和 Chrome，但不适用于歌剧，我不知道，任何人都可以帮助我解决这个问题。非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:17:17.623

似乎 Opera 需要伪元素具有宽度和高度（除了`0px`）。刚刚在 Opera 11.62 中尝试了以下代码，它似乎可以工作。

```
#Menu a:active,
#Menu a.active:before,#Menu a:hover:before
{
    Content: '';
    position:absolute;
    z-index:51;
    width:1px;
    height:1px;
    left:50%;
    top:50%;
    background: #ADD7E7;
    box-shadow:0 0 35px 30px #ADD7E7;
    -moz-box-shadow:0 0 35px 30px  #ADD7E7;
    -o-box-shadow:0 0 35px 30px  #ADD7E7;
    border-radius:50%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:09:59.597

试试这个代码

HTML

```
<div class="shadow-bringer shadow"> HI ! Welcome. </div> 
```

CSS

```
.shadow-bringer {
    background: none repeat scroll 0 0 #FFFFA2;
    height: 100px;
    margin: 20px auto;
    padding: 5px;
    width: 100px;
}
.shadow {
    box-shadow: 0 0 8px #CCCCCC;
    -moz-box-shadow: 0px 0px 8px #ccc;/* for mozila*/
-webkit-box-shadow: 0px 0px 8px #ccc;
    /* For IE upto 5.5 not for 9*/
filter: progid:DXImageTransform.Microsoft.Shadow(color='#cccccc', Direction=45, Strength=3)
progid:DXImageTransform.Microsoft.Shadow(color='#cccccc', Direction=135, Strength=3)
progid:DXImageTransform.Microsoft.Shadow(color='#cccccc', Direction=225, Strength=3)
progid:DXImageTransform.Microsoft.Shadow(color='#cccccc', Direction=315, Strength=3);
} 
```

欲了解更多信息，请访问：1\. [http://webdesignergeeks.com/tutorials/html-css-tutorials/cross-browser-drop-shadow-for-all-side/](http://webdesignergeeks.com/tutorials/html-css-tutorials/cross-browser-drop-shadow-for-all-side/)

2\. [http://css-tricks.com/snippets/css/css-box-shadow/](http://css-tricks.com/snippets/css/css-box-shadow/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T07:15:00.190

根据 css3please，这应该有效：

```
.box_shadow {
  -webkit-box-shadow: 0px 0px 4px 0px #ffffff; /* Saf3-4, iOS 4.0.2 - 4.2, Android 2.3+ */
  box-shadow: 0px 0px 4px 0px #ffffff; /* Opera 10.5, IE9, FF4+, Chrome 6+, iOS 5 */
} 
```

检查这是否适用于您的歌剧：[http ://css3please.com/](http://css3please.com/)

# ipad - 如何在ipad中将水平视图滑动为uisubview

> ID：10477518
> 
> 赞同：0
> 
> 时间：2012-05-07T06:17:17.023
> 
> 标签：ipad, uiview

我的任务是为 ipad 开发图书应用程序。它具有我在帖子中发布的图像的功能。

我的任务是开发按钮单击时的子视图作为屏幕中心主视图的子视图。

我要开发视图![就像图像中给出的那样。](../Images/5487917182f250fcdeb15a1221af9f26.png)。请帮助我并提供一些关于如何开发上面屏幕截图的视图的提示。

并请提供一些示例或示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:53:24.420

创建一个启用了分页的 UIScrollview。（可以在 Interface Builder 或代码中完成）。将其分配给视图控制器内的属性。它可能看起来像这样：

```
 // this is how it looks when you do it in code yourself
@property (weak,nonatomic) UIScrollView *theScrollView;

// this is how it looks when you let Interface Builder create your property for you
@property(weak,nonatomic) IBOutlet UIScrollView *theScrollView; 
```

请注意，该属性很弱。因为您的视图作为子视图添加到您的 viewcontrollers 主视图中，所以该视图已经具有指向它的强指针，因此您不需要强大的属性。如果您希望能够从主视图中删除添加已读取的滚动视图，那么您应该使用强指针，否则您的滚动视图将被释放。

现在，在代码中，将您的子视图添加到其中，并使用适当的递增 x 偏移量，然后当您点击按钮时，会有这样的功能来处理点击：

```
/* i assume your scrollview is a property on your viewcontroller with the name "theScrollView */
- (void) handleFeaturedTap
{
    /* 
    get the offset of your subview, to which you want to scroll, not shown.
    */
    [self.theScrollView scrollRectToVisible:theRectYouWantToShow animated:YES];
} 
```

然后，这将使滚动视图滑动到您想要的区域，在您的情况下，这将是您添加包含特色书籍的视图的位置。

如果您不确定如何在代码中或通过 Interface Builder 创建 UIScrollview，我建议您阅读[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)和UIView 参考以及查看一些关于如何使用 Interface Builder 的教程。

# java - 为什么 assert 会附加一个默认的断言消息

> ID：10477520
> 
> 赞同：0
> 
> 时间：2012-05-07T06:17:32.280
> 
> 标签：java, assert, assertions

在使用断言时，例如

```
 try{ 
 assert email!=null : "Email is required"
} catch (AssertionError ae) {
 System.out.println(ae.getMessage());
} 
```

以上打印**电子邮件是必需的。表达式：email!=null**

我不想要这个额外的消息**Expression: email!=null**我知道我可以子字符串但那是一个黑客。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:22:39.580

你在这里误用`assert`了。它不是用于控制程序的流程。你应该在`if`这里使用。

[`assert`](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)仅当您确定该情况不会发生时才应使用。在这种情况下，应用程序应该崩溃并打印出了什么问题。请注意，当您的应用程序启动时，断言可能会关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:24:44.997

没有简单的方法。请记住，这`assert`通常是在正确的程序操作期间绝不应该发生的事情。因此，相关消息仅用于调试。

从[官方文档](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)：

> 请注意，详细消息*不是*用户级别的错误消息，因此通常没有必要将这些消息孤立地理解，或者将它们国际化。详细消息旨在与包含失败断言的源代码一起在完整堆栈跟踪的上下文中进行解释。

# xml - 如何使用 xslt 连接两个或多个 xml 文件并保持顺序？

> ID：10477524
> 
> 赞同：0
> 
> 时间：2012-05-07T06:17:59.863
> 
> 标签：xml, xslt

如果我有这个文件： **输入 file1.xml：**

```
<schema>
    <sequence> 
        <nodeA id="a">
            <fruit id="small">
                <orange id="x" method="create">                    
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </orange>                           
            </fruit>
            <fruit id="small">
                <apple id="x" method="create">                    
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </apple>                           
            </fruit>
            <fruit id="medium">
                <orange id="x" method="create">                    
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </orange>                           
            </fruit>
        </nodeA>
        <nodeB id="b">
            <dog id="large">
                <doberman id="x" method="create">
                    <condition>
                        <color>Black</color>
                    </condition>
                </doberman>
            </dog>
        </nodeB>
    </sequence>
</schema> 
```

**文件 2.xml：**

```
<schema>
    <sequence>
        <nodeA id="a">
            <fruit id="small">
                <melon id="x" method="create">
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </melon>
            </fruit>
        </nodeA>
        <nodeB id="b">
            <dog id="small">
                <poodle id="x" method="create">                    
                    <condition>
                        <color>White</color>
                    </condition>
                </poodle>  
            </dog>                
        </nodeB>
    </sequence>
</schema> 
```

连接后： **输出：concate.xml**

```
<schema>
    <sequence>
        <nodeA id="a">
            <fruit id="small">
                <orange id="x" method="create">                    
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </orange>                        
            </fruit>
            <fruit id="small">
                <apple id="x" method="create">                    
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </apple>                           
            </fruit>
            <fruit id="medium">
                <orange id="x" method="create">                    
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </orange>                           
            </fruit>
            <fruit id="small">
                <melon id="x" method="create">
                    <attributes>
                        <color>Orange</color>
                        <year>2000</year>
                    </attributes>
                </melon>
            </fruit>
        </nodeA>
        <nodeB id="b">
            <dog id="large">
                <doberman id="x" method="create">
                    <condition>
                        <color>Black</color>
                    </condition>
                </doberman>
            </dog>
            <dog id="small">
                <poodle id="x" method="create">                    
                    <condition>
                        <color>White</color>
                    </condition>
                </poodle>  
            </dog>                
        </nodeB>
    </sequence>
</schema> 
```

对于连接，它将**取决于文件顺序**，因此 file2.xml 中的节点将放置在 file1.xml 的节点下（如示例所示）。我最多有 5 个文件。仅使用 xsl 转换如何实现这一点，即 xslt 将同时输入 5 个文件并输出 1 个文件？

**这是文档结构和我们合并的地方：**

```
<schema>
    <sequence> 
        <nodeA id="a">
            <fruit id="small">
                <orange id="x" method="create">                    
                    ...
                </orange>                
            </fruit>
            <fruit id="small">
                ...                          
            </fruit>
            <fruit id="large"> 
                ...                          
            </fruit>

            <!-- we merge below this -->
        </nodeA>

        <nodeB id="b">
            <dog id="large">
                <doberman id="x" method="create">
                    ...
                </doberman>
            </dog>
            <dog id="small">
                <doberman id="x" method="create">
                    ...
                </doberman>
            </dog>
        <!-- we merge below this -->
        </nodeB>

        <somenode id="any">
            ...    
        </somenode>
    </sequence>
</schema> 
```

注意：如果不可能，只连接两个文件输入就可以了，因为它总是可以为其他文件重复。文件中还有各种节点名称（nodeA、nodeB、SomeNode 等），因此需要一些可以概括此问题的东西。

我们可以使用 xsl1.0 或 2.0。

非常感谢。约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:08:33.257

@John，这是一个更通用的解决方案：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:a="http://a.com">
   <xsl:strip-space elements="*" />
   <xsl:output indent="yes" method="xml" />

   <xsl:variable name="to-merge" select="document('input2.xml') | document('input3.xml')"/>

   <xsl:function name="a:id">
      <xsl:param name="ctx"/>
      <xsl:value-of select="concat($ctx/local-name(), $ctx/@id)"/>
   </xsl:function>   

   <xsl:key name="match" match="/schema/sequence/*" use="a:id(.)"/>

   <xsl:template match="@* | node()">
      <xsl:copy>
         <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="*[count(. | key('match', a:id(.))) = count(key('match', a:id(.)))]">
    <xsl:copy>
           <xsl:apply-templates select="@* | node()"/>

           <xsl:variable name="id" select="a:id(.)"/>
           <xsl:for-each select="$to-merge">
              <xsl:apply-templates select="key('match', $id)/*"/>
           </xsl:for-each>
    </xsl:copy>
   </xsl:template>

</xsl:stylesheet> 
```

您在 中定义合并点，`key`并在 中定义合并匹配函数`a:id`。`a:id`只需将函数放入谓词中，就可以回退到 XSLT 1.0 。

我的假设：

*   您在“领先”文档上运行转换并在该`to-merge`变量中对合并进行排序
*   您有一个匹配点，位于要合并的每个文档的同一位置。自定义解决方案以从每个文档的不同点进行合并应该不难。
*   节点通过`local-name()`and匹配`@id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:19:57.463

这是另一个答案。这在 schema/sequence/* 级别连接，而不仅仅是 nodeA 和 NodeB。

```
 <?xml version="1.0"?>
 <xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:fn="http://www.w3.org/2005/xpath-functions"
   xmlns:xs="http://www.w3.org/2001/XMLSchema"
   version="2.0"
   exclude-result-prefixes="xsl xs fn">

 <xsl:output indent="yes" encoding="UTF-8" />
 <xsl:param name="file2" /> <!-- input file1.xml -->
 <xsl:variable name="file1-doc" select="root()" />
 <xsl:variable name="file2-doc" select="document($file2)" />

 <xsl:template  match="/">
  <schema>
   <sequence>
    <xsl:call-template name="union-point">
     <xsl:with-param name="value" select="schema/sequence/*"/>
    </xsl:call-template>
    <xsl:call-template name="union-point">
     <!-- The following predicate excludes all the node names that we
             have already processed in the first call-template.    -->
     <xsl:with-param name="value" select="$file2-doc/schema/sequence/*
      [not (fn:exists($file1-doc/schema/sequence/name()))]
      "/>
    </xsl:call-template>
   </sequence>
  </schema>
 </xsl:template>

 <xsl:template name="union-point">
   <xsl:param name="value"/>
   <xsl:for-each select="$value/name()" >
    <xsl:variable name="node-name" select="."/>
    <xsl:element name="{.}">
 <xsl:attribute name="id">
  <xsl:value-of select="($file1-doc/schema/sequence/*[name()=$node-name]/@id |
                         $file2-doc/schema/sequence/*[name()=$node-name]/@id  )[1]" />
 </xsl:attribute>
     <xsl:apply-templates select="$file1-doc/schema/sequence/*[name()=$node-name]/*" />
     <xsl:apply-templates select="$file2-doc/schema/sequence/*[name()=$node-name]/*" />
    </xsl:element>
   </xsl:for-each>
 </xsl:template>

 <xsl:template match="element()">
   <xsl:copy>
     <xsl:apply-templates select="@*,node()"/>
    </xsl:copy>
 </xsl:template>

 <xsl:template match="attribute()|text()|comment()|processing-instruction()">
   <xsl:copy/>
 </xsl:template>

 </xsl:stylesheet> 
```

作为一种解决方案，它可能有点笨拙和尴尬，但它基本上可以工作。希望像 Dimitre Novatchev 这样的专家会出现并提供更整洁的替代方案。这是关于我能力的极限。

**更新 1 ** 我将 id 属性添加到等。

**更新 2** 这是结果输出：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <schema>
    <sequence>
       <nodeA id="a">
          <fruit id="small">
                 <orange id="x" method="create">                    
                     <attributes>
                         <color>Orange</color>
                         <year>2000</year>
                     </attributes>
                 </orange>                           
             </fruit>
               <fruit id="small">
                 <apple id="x" method="create">                    
                     <attributes>
                         <color>Orange</color>
                         <year>2000</year>
                     </attributes>
                 </apple>                           
             </fruit>
          <fruit id="medium">
                 <orange id="x" method="create">                    
                     <attributes>
                         <color>Orange</color>
                         <year>2000</year>
                     </attributes>
                 </orange>                           
             </fruit>
          <fruit id="small">
                 <melon id="x" method="create">
                     <attributes>
                         <color>Orange</color>
                         <year>2000</year>
                     </attributes>
                 </melon>
             </fruit>
       </nodeA>
       <nodeB id="b">
          <dog id="large">
                 <doberman id="x" method="create">
                     <condition>
                         <color>Black</color>
                     </condition>
                 </doberman>
             </dog>
          <dog id="small">
                 <poodle id="x" method="create">                    
                     <condition>
                         <color>White</color>
                     </condition>
                 </poodle>  
             </dog>
       </nodeB>
    </sequence>
 </schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T02:26:56.380

尝试：

```
 <?xml version="1.0"?>
 <xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:fn="http://www.w3.org/2005/xpath-functions"
   xmlns:xs="http://www.w3.org/2001/XMLSchema"
   version="2.0"
   exclude-result-prefixes="xsl xs fn">

 <xsl:output indent="yes" encoding="UTF-8" />
 <xsl:param name="file2" /> <!-- input file1.xml -->
 <xsl:variable name="file2-doc" select="document($file2)" />

 <xsl:template  match="/">
  <schema>
   <sequence>
    <nodeA id="a">
     <xsl:apply-templates select="schema/sequence/nodeA/*" />
     <xsl:apply-templates select="$file2-doc/schema/sequence/nodeA/*" />
    </nodeA>
    <nodeB id="b">
     <xsl:apply-templates select="schema/sequence/nodeB/*" />
     <xsl:apply-templates select="$file2-doc/schema/sequence/nodeB/*" />
    </nodeB>
   </sequence>
  </schema>
 </xsl:template>

 <xsl:template match="element()">
   <xsl:copy>
     <xsl:apply-templates select="@*,node()"/>
    </xsl:copy>
 </xsl:template>

 <xsl:template match="attribute()|text()|comment()|processing-instruction()">
   <xsl:copy/>
 </xsl:template>

 </xsl:stylesheet> 
```

使 file1 成为您的主要文档输入。将 file2 的文件名作为参数“file2”传递。类似地扩展多个输入文件。

# iphone - 仪器解决的 NSMutableArray 泄漏警告

> ID：10477525
> 
> 赞同：0
> 
> 时间：2012-05-07T06:18:04.280
> 
> 标签：iphone, ios, nsmutablearray, instruments, memory-leaks

我正在使用仪器泄漏工具来检查代码中的泄漏。

```
//MyClass.h
@property (nonatomic, retain) NSMutableArray *marrProperty;

//MyClass.m
NSSortDescriptor *createdTime = [[NSSortDescriptor alloc] initWithKey:@"createdTime" ascending:NO selector:@selector(compare:)];             
NSArray *sortedArray = [self.anManagedObj.aRelationships sortedArrayUsingDescriptors:[NSArray arrayWithObject:createdTime]];
[createdTime release];
NSMutableArray *marr = [[NSMutableArray alloc] initWithArray:sortedArray];
self.marrProperty = marr;
[marr release]; 
```

在使用 Instrument 中的泄漏工具检查后，我被告知泄漏发生在以下代码中：

```
NSMutableArray *marr = [[NSMutableArray alloc] initWithArray:sortedArray];
self.marrProperty = marr; 
```

我不知道为什么，因为我只是分配和释放好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:28:06.000

Instruments 显示您分配了泄漏的对象，而不是泄漏的位置。

你需要找到额外的`retain`。你可以使用 Instruments 来做到这一点；分配工具可以配置为跟踪保留/释放事件。

[这可能会有所帮助](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:21:32.270

您是否为 marrProperty 实现了自定义设置器？这可能是内存问题的根源。

此外，您可能更喜欢使用`[[sortedArray mutableCopy] autorelease]`, 而不是`initWithArray:`后跟`release`. 只是为了代码清晰。

如果您不使用 ARC，请确保在 -dealloc 中为该类释放 marrProperty。

# php - 在php mysql中计算多级营销（树）记录

> ID：10477533
> 
> 赞同：6
> 
> 时间：2012-05-07T06:18:44.200
> 
> 标签：php, mysql, database

用户表

![在此处输入图像描述](../Images/65225d51bd1a794e68504759c284557f.png)

在注册时，每个用户都必须把 parent_id ，谁注册在 parent_id 下，所以我为它制作了不同的表

赞助商表

![在此处输入图像描述](../Images/2a1ec139a941c61b1046551e72813c7c.png)

之后像那样做树

![在此处输入图像描述](../Images/40a62b836390911e8f713c6c126e57d0.png)

我想计算这样的记录

![在此处输入图像描述](../Images/c9fda8e8f31c1898afdc2a4d54d65838.png)

所以请指导我如何计算这样的记录，或者我有什么方法可以说这种计数我必须在数据库中更改，提前谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T05:04:40.143

我在表中有邻接模型结构，所以我得到了很好的解决方案 count user_id under parent_id

**该函数在 parent_id 下计算 user_id**

```
function display_children($parent, $level) {
    $count = 0;
    $result = mysql_query('SELECT user_id FROM sponsers '.'WHERE parent_id="'.$parent.'"');
    while ($row = mysql_fetch_array($result))
    {
           $var = str_repeat(' ',$level).$row['user_id']."\n";

                   //echo $var  after remove comment check tree

                   // i call function in while loop until count all user_id 

           $count += 1 +$this->display_children($row['user_id'], $level+1);

    }
    return $count; // it will return all user_id count under parent_id
} 
```

**调用函数**

```
display_children(999, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:58:09.827

我猜你正在搜索这个[http://www.sitepoint.com/hierarchical-data-database-2/](http://www.sitepoint.com/hierarchical-data-database-2/)。

它被称为`TREE TRAVERSAL`。好吧，在您的情况下，您可以将其仅用于计数。
可以在此处找到有关该主题的更多信息[树数据结构](http://en.wikipedia.org/wiki/Tree_data_structure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T07:36:21.200

对于分层数据存储，您可以看到`Nested Set Model`. 详细参见[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)。希望它能完美地满足您的目的。

# javascript - 如何从倒数第二个值中提取

> ID：10477536
> 
> 赞同：0
> 
> 时间：2012-05-07T06:18:51.490
> 
> 标签：javascript, string

从以下 URL 示例：

google.com/sports/football/asia

如何使用jQuery从倒数第二个正斜杠中提取/football/asia？我知道函数是 substring 和 lastIndexOf()，但是在这种情况下如何使用它们呢？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:25:44.480

```
var url = "google.com/sports/football/asia";
var arr = url.split('/'),
foo = arr[arr.length-2] + '/' + arr[arr.length-1];
console.log(foo); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T06:27:34.477

您可以使用该[`String.lastIndexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf)功能 -- 两次：

```
var str = "google.com/sports/football/asia";
var foo = str.substring(str.lastIndexOf("/", str.lastIndexOf("/") - 1)); 
```

更好的解决方案是使用[`String.split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)函数[`Array.slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)和[`Array.join()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)函数 1，如下所示：

```
"google.com/sports/football/asia".split("/").slice(-2).join("/"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T06:23:16.133

您可以使用该[`split`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)函数并获取结果数组的最后 2 个元素：

```
var url = 'google.com/sports/football/asia';
var parts = url.split('/');
if (parts.length > 1) {
    var result = parts[parts.length - 2] + '/' + parts[parts.length - 1];
    alert(result);
} 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T06:25:23.560

也许您的意思是*RegEx*？正确的正则表达式是：`/\w+\/\w+$/i`. 您可以使用 Javascript 的[`match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)方法从字符串中获取您的内容：

```
var myContent = "google.com/sports/football/asia".match(/\w+\/\w+$/i); 
```

# php - 出于安全原因，sessions_ids（令牌）是什么以及如何使用？

> ID：10477539
> 
> 赞同：0
> 
> 时间：2012-05-07T06:18:58.150
> 
> 标签：php, security, session, token

我对安全性有点陌生，所以我想知道是否有人可以发光。

如我错了请纠正我...

令牌只是使用 session_id 时使用的术语吗？

另外，我到底应该使用 session_id （或令牌？）做什么？出于安全原因，我知道它，但是我应该在用户登录时给他们一个新的 session_id 吗？

即：在我所有的php页面中，它应该有

```
if(isset($_SESSION['token'])){
 // html body
} 
```

所以如果用户没有会话令牌，他们就不能访问页面？

感谢您清除此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:47:34.843

会话 ID 用于识别服务器端会话信息，例如代客密钥。当一个有效的 ID 被传递（通过任何方式）时，PHP 可以访问数据。

会话通常用作存储用户身份验证详细信息的一种方式。成功登录站点后，您可以启动一个会话来存储一些用户数据，以便后续的页面查看可以决定是否允许使用私人信息。

例如，登录后您可能有：

```
session_start();
session_regenerate_id(true); // avoid trivial session fixation
$_SESSION['valid'] = true;
$_SESSION['user_id'] = 123; // identify the user
// whatever else you want to add in your session
header('Location: /index.php'); // redirect the user after signing in 
```

`$_SESSION['valid']`是防止会话采用攻击的令牌；但是，通过使用`session_regenerate_id`它变得不那么重要了。在后续页面查看时，您可以编写此代码来检查会话是否有效以及用户是否已登录：

```
session_start();
if (!isset($_SESSION['valid'])) {
    die("Invalid session");
}
// do stuff with $_SESSION['user_id'] 
```

会话 ID 主要可以通过两种方式传递：通过 cookie（常见）或通过`$_GET`（不太常见）。会话 ID 的传递方式由 .ini 设置决定：

*   session.use_cookies（是否使用cookies）
*   session.use_only_cookies（是否只允许cookies，不通过via `_GET`）

在这里阅读更多：http: [//sg.php.net/manual/en/session.configuration.php](http://sg.php.net/manual/en/session.configuration.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:58:58.163

您可以将令牌视为钥匙卡 - 通常，您向服务器发送登录请求，如果您的凭据有效，服务器将返回一个新令牌。如果您随后从服务器请求数据，您只需向他“显示”该令牌，而不是重新发送凭据。所以使用令牌来隐藏信息。

会话 id 不一定是一个标记（强烈的含义）。它用于识别用户，但不说明他是谁或他拥有什么样的访问权限。

但是，如果您在会话中存储有关用户及其访问权限的信息（例如`$_SESSION['userId'] = 17; $_SESSION['loggedIn'] = true;`），则会话 id 将成为令牌 - 将其发送到服务器会识别用户并且服务器可以从中判断是否应该授予或拒绝访问权限. 在会话中存储另一个令牌没有任何意义，因为隐藏不发送给客户端的信息是多余的。您可以安全地将有关用户的信息存储在会话中，然后使用会话 ID 作为“指向”该信息的令牌。

# class - 为什么程序员想要将每个函数分离到自己的程序集或项目中？

> ID：10477541
> 
> 赞同：0
> 
> 时间：2012-05-07T06:19:05.873
> 
> 标签：class, function

我只是想知道为什么程序员希望每个函数都有一个类库或项目？我有一个客户，希望它在每个功能的单独程序集中。

我不确定目的，但有人可以告诉我优势吗？它的目的或好处？

前任。`SearchPerson(){}`并且`GetAllEmails(){}`是不同的功能，但为什么不把它放在同一个解决方案中只是不同的类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:23:53.663

高度模块化的一个优点是（鉴于代码是为高度可重用性而编写的），您可以轻松地重构最终构建，修补生产环境，只影响解决方案的一小部分等。

这始终是一种权衡。一个大型解决方案在开发阶段可能更容易管理。

# iphone - 将我的应用程序作为选项放在默认拨号器中

> ID：10477543
> 
> 赞同：0
> 
> 时间：2012-05-07T06:19:18.723
> 
> 标签：iphone, ios

我正在为一家电信公司申请。我需要的是，如果我的应用程序安装在 iPhone 上，那么当用户拨打号码呼叫某人时，iOS 将在默认拨号器中显示我的应用程序选项，就像安装了 Skype 一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:33:46.620

在应用程序委托中打开一个电话：网址：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[[NSString stringWithFormat:@"tel://%@", numberToCall] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]]; 
```

# ruby-on-rails - 自动化 facebook/twitter 帖子

> ID：10477544
> 
> 赞同：2
> 
> 时间：2012-05-07T06:19:29.850
> 
> 标签：ruby-on-rails, ruby, facebook, facebook-graph-api, twitter

我们有一个 facebook 应用程序，它可以在某些时间间隔后全天发布更新。这些消息发布到粉丝页面，同样通过 twitter for facebook 应用程序发布在 twitter 上。问题是它不会按应有的方式自动发布消息并引发此错误。

```
Koala::Facebook::APIError: OAuthException: (#100) The status you are
trying to publish is a duplicate of, or too similar to, one that we
recently posted to Twitter 
```

消息是：

```
"#Hashtag summary: N events have occurred in the past X hours. Stay tuned
for further updates."

"#Hashtag update: N events have transpired over the last X hours. Stay
with us for more updates." 
```

它们都没有通过命令提示符发布。

但是，当我尝试通过粉丝页面手动发布时，它不会抱怨并且消息会在两个位置发布。

在这方面的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:06:03.643

推特似乎在短时间内阻止了类似的消息。然而，这种行为不应停止在 facebook 上发布（但它会被中止）。通过禁用 twitter 上的自动发布来解决这个问题，我们现在分别在两个位置发布。

# java - Android中对麦克风的后台访问

> ID：10477547
> 
> 赞同：3
> 
> 时间：2012-05-07T06:19:44.823
> 
> 标签：java, android, android-service, android-hardware

是否可以从 Android 手机上的后台应用程序（服务？）持续监控麦克风？

我想做什么的一些想法：

*   不断聆听背景中的声音信号。
*   收到“有趣”的音频信号后，执行一些网络操作。

如果前台应用程序需要它（除非它可以共享？） - 例如拨打电话，后台应用程序必须能够智能地放弃对麦克风的访问。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:52:39.083

可以录制音频，请查看以下链接：

[录制音频](http://developer.android.com/guide/topics/media/index.html)

[录制音频](http://www.benmccann.com/blog/android-audio-recording-tutorial/)

从这篇文章中得到他们[如何在 Android 上使用麦克风](https://stackoverflow.com/questions/6564495/how-to-use-the-microphone-on-android)。

所以我认为应该可以在后台服务中记录。没有时间atm来验证它。

# asp.net - asp.net ListView，在页脚中显示计算摘要？

> ID：10477549
> 
> 赞同：2
> 
> 时间：2012-05-07T06:19:56.383
> 
> 标签：asp.net, listview, summary

我正在尝试在我的 ASP.NET 网站中计算学生的一般加权平均值 (GWA)

我的公式是（在 SQL 中）

```
ROUND(SUM((UnitsAcademic*Grade))/SUM(UnitsAcademic),3) 
```

到目前为止，这是我的 ASP.NET。我想使用 ASP.NET 计算 GWA。现在我有点卡住了。

ASPX

```
<asp:ListView OnItemDataBound="listviewGrade_ItemDataBound" ID="listviewGrade" runat="server" DataSourceID="sqlGrade" DataKeyNames="GradebookDetailId">
                    <LayoutTemplate>
                                <table class="Container8" >
                                    <tbody>
                                    <tr>
                                        <th>Subject Code</th>
                                        <th>Description</th>
                                        <th>Units</th>
                                        <th>Grade</th>
                                        <th>Remarks</th>
                                        <th>Faculty Name</th>
                                    </tr>
                                    <tr id="itemPlaceholder" runat="server" />
                                    </tbody>
                                </table>

                            </LayoutTemplate>
                            <ItemTemplate>
                                <tr>
                                    <td><%# Eval("SubjectCode") %></td>
                                    <td><%# Eval("Description") %></td>
                                    <td><asp:Label ID="lblUnitsAcademic" runat="server" Text='<%# Eval("UnitsAcademic") %>' /></td>
                                    <td><asp:Label ID="lblGrade" runat="server" Text='<%# Eval("Grade") %>' /></td>
                                    <td><%# Eval("Remarks") %></td>
                                    <td><%# Eval("FacultyName") %></td>
                                </tr>
                            </ItemTemplate>

                        </asp:ListView>
<br/>
<asp:Label ID="lblGWA" runat="server" /> 
```

C＃

```
protected void listviewGrade_ItemDataBound(object sender, ListViewItemEventArgs e)
{   
    Label lblGrade = (Label)e.Item.FindControl("lblGrade");
    Label lblUnitsAcademic = (Label)e.Item.FindControl("lblUnitsAcademic");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:02:08.653

试试这个：
aspx：

```
<asp:ListView OnItemDataBound="listviewGrade_ItemDataBound" ID="listviewGrade" runat="server"
        DataSourceID="sqlGrade" DataKeyNames="GradebookDetailId">
        <LayoutTemplate>
            <table class="Container8">
                <tbody>
                    <tr>
                        <th>
                            Subject Code
                        </th>
                        <th>
                            Description
                        </th>
                        <th>
                            Units
                        </th>
                        <th>
                            Grade
                        </th>
                        <th>
                            Remarks
                        </th>
                        <th>
                            Faculty Name
                        </th>
                    </tr>
                    <tr id="itemPlaceholder" runat="server" />
                </tbody>
                <tfoot>
                    <asp:Label ID="lblSum" runat="server" Text="Label"></asp:Label>
                </tfoot>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <%# Eval("SubjectCode") %>
                </td>
                <td>
                    <%# Eval("Description") %>
                </td>
                <td>
                    <asp:Label ID="lblUnitsAcademic" runat="server" Text='<%# Eval("UnitsAcademic") %>' />
                </td>
                <td>
                    <asp:Label ID="lblGrade" runat="server" Text='<%# Eval("Grade") %>' />
                </td>
                <td>
                    <%# Eval("Remarks") %>
                </td>
                <td>
                    <%# Eval("FacultyName") %>
                </td>
            </tr>
        </ItemTemplate>
    </asp:ListView> 
```

CS：

```
int sum = 0;
protected void listviewGrade_ItemDataBound(object sender, ListViewItemEventArgs e)
{       
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Label lblGrade = (Label)e.Item.FindControl("lblGrade");
        Label lblUnitsAcademic = (Label)e.Item.FindControl("lblUnitsAcademic");
        sum += Convert.ToInt32(lblUnitsAcademic.Text) *
            Convert.ToInt32(lblGrade.Text) / Convert.ToInt32(lblUnitsAcademic.Text);

    }       
}

protected void listviewGrade_LayoutCreated(object sender, EventArgs e)
{

    Label lblSum = (Label)listviewGrade.FindControl("lblSum");
    lblSum.Text = sum.ToString();
} 
```

# c - C中的fscanf没有读取完整的行？

> ID：10477551
> 
> 赞同：3
> 
> 时间：2012-05-07T06:20:11.443
> 
> 标签：c, newline, scanf

这非常简单，但我只是遇到了问题。

一个文本文件有一个标题，

例如，

```
# Avizo BINARY-LITTLE-ENDIAN 2.1

define Lattice 496 384 470

Parameters {
    AlignTransform {
        slice0000 0 -0 -30 -1,
        slice0001 0 -0 -30 -1,
        slice0002 0 -0 -30 -1, 
```

我正在尝试使用 fscanf 读取每一行。

```
 int i;
   for (  i = 0; i < 10; i++ ) {
     fscanf(fp, "%s\n", buf);  
     printf("%d) %s\n",i,buf);
   } 
```

导致这个

```
0) #
1) Avizo
2) BINARY-LITTLE-ENDIAN
3) 2.1
4) define
5) Lattice
6) 496
7) 384
8) 470
9) Parameters 
```

所以它解析的是空格而不是换行符。不知道发生了什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T10:14:32.267

我建议你使用`fgets`，但如果你坚持使用`fscanf`：

```
fscanf(fd, "%[^\n]\n", buff); 
```

这将读取整行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T06:22:10.987

in 中的`%s`说明符`fscanf`读取单词，因此在到达空格时停止。

用于[`fgets`](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)阅读整行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:43:09.867

虽然 %s 可能意味着“字符串”，但 fscanf（作为 scanf）不是一个贪婪的数学，你应该告诉它分隔符是“新行”。而且，您最好设置最大缓冲区大小以防止缓冲区溢出。

```
#include <stdio.h>

#define NAME_MAX    80
#define NAME_MAX_S "80"

int main(void)
{
    static char name[NAME_MAX + 1]; // + 1 because of null
    if(scanf("%" NAME_MAX_S "[^\n]", name) != 1)
    {
        fputs("io error or premature end of line\n", stderr);
        return 1;
    }

    printf("Hello %s. Nice to meet you.\n", name);
} 
```

# extjs - extjs中的瀑布图

> ID：10477558
> 
> 赞同：0
> 
> 时间：2012-05-07T06:20:30.393
> 
> 标签：extjs

我正在尝试查找 ExtJs 是否有瀑布图。如果是，请分享示例或演示的链接。我对此进行了搜索，发现某处刚刚写到 EXTJS 3 确实具有该功能，但没有找到执行此操作的代码。

请分享链接。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:26:18.430

下面的链接将为您提供有关 extjs 的所有 api 详细信息

[http://api.adooxen.com/api/extjs3.3/](http://api.adooxen.com/api/extjs3.3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:29:19.900

我不确定它在 3.3 中是否/有一个瀑布图，老实说，我认为 ExtJS4 中没有瀑布图，API 肯定没有在其图表类型中列出一个。

如果有帮助，这个 jQuery 插件会列出一个瀑布图：http: [//www.stevefenton.co.uk/cmsfiles/assets/File/charts.html](http://www.stevefenton.co.uk/cmsfiles/assets/File/charts.html)

# android - 将值从 android gps 应用程序发送到 jsf Web 应用程序

> ID：10477564
> 
> 赞同：0
> 
> 时间：2012-05-07T06:20:41.343
> 
> 标签：android, google-maps, jsf, httpclient, http-post

```
 I have developed android base application and other jsf base web application. 
```

我的项目是我必须将一些价值从 androide 应用程序传递给 jsf 基础 Web 应用程序。
我正在使用 httpclient 方法。
我发送价值的代码是。

```
public void loc(double lat,double lon)
{
    String a=String.valueOf(lat);
    System.out.println("Value of latitude " + lat);
    Log.d(a, "dfdfdfdfdfdfdfdfdfdfdfdfdddddddddddddd");
    System.out.println("Value of longitude " + lon);

HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("http://localhost:8080/q/faces/getLocation.jsp");

try {

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("lat", "lat"));
    nameValuePairs
            .add(new BasicNameValuePair("lon", "lon"));
    //nameValuePairs.add(new BasicNameValuePair("accountType", "GOOGLE"));

    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = client.execute(post);
    BufferedReader rd = new BufferedReader(new InputStreamReader(
            response.getEntity().getContent()));

    String line = "";
    while ((line = rd.readLine()) != null) {
        System.out.println(line);
        if (line.startsWith("Auth=")) {
            String key = line.substring(5);
            // Do something with the key
        }

    }
} catch (IOException e) {
    e.printStackTrace();
}
} 
```

这段代码也可以工作。

我的问题是我如何从 jsf 代码中检索这样的值。

我用过的技术，

*   jsf
*   安卓

我已经编写代码来获得价值

```
 import org.apache.http.HttpException;
import org.apache.http.HttpStatus;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;
import java.io.*;
import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.*;
import org.apache.commons.httpclient.params.HttpMethodParams;

public class getData {
private static String url = "http://localhost:8080/q/faces/getdata.jsp";

  public  String mainm() {
    // Create an instance of HttpClient.
    HttpClient client = new  HttpClient();

    // Create a method instance.
    GetMethod method = new GetMethod(url);

    // Provide custom retry handler is necessary
    method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, 
            new DefaultHttpMethodRetryHandler(3, false));

    try {
      // Execute the method.
      int statusCode = client.executeMethod(method);

      if (statusCode != HttpStatus.SC_OK) {
        System.err.println("Method failed: " + method.getStatusLine());
      }

      // Read the response body.

     // String result = method.getResponseBodyAsString();
   // this is the document returned by the response
  // System.out.println(result);
     byte[] responseBody = method.getResponseBody();

      // Deal with the response.
      // Use caution: ensure correct character encoding and is not binary data
      System.out.println(new String(responseBody));

   } catch (HttpException e) {
  System.err.println("Fatal protocol violation: " + e.getMessage());
      e.printStackTrace();
    }
    catch (IOException e) {
      System.err.println("Fatal transport error: " + e.getMessage());
      e.printStackTrace();
    } finally {
      // Release the connection.
      method.releaseConnection();
    }  
    return "";
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T08:05:58.503

```
nameValuePairs.add(new BasicNameValuePair("lat", "lat"));
    nameValuePairs
            .add(new BasicNameValuePair("lon", "lon")); 
```

这里的“lat”和lon是什么？如果它们是任何变量，则删除倒昏迷。像这样 ：

```
nameValuePairs.add(new BasicNameValuePair("lat", lat));
        nameValuePairs
                .add(new BasicNameValuePair("lon", lon)); 
```

如果你告诉我什么是 lat/lon 会更好。如果您接受此答案，请右键单击

# android - Android“外部”文件夹功能？

> ID：10477565
> 
> 赞同：3
> 
> 时间：2012-05-07T06:20:42.093
> 
> 标签：android, android-source

我在 Android 源代码中找到*External*文件夹，如果我没记错的话，它被设计为具有 U-HAL（用户空间硬件抽象层），因此 OEM 可以编写不需要在 GPL 许可下暴露于外部世界的专有驱动程序。

随着 Android 的发展，我发现越来越多的文件夹包含在*External*文件夹中，这可能是 Google 正在为每个版本的 Android 添加更多支持，例如 freetype、Yaffs2。

我想知道如何在应用程序中使用外部文件夹逻辑？这些是作为共享库（.so）生成的，而应用程序又将其用于功能吗？

我不确定整个*适当*的逻辑如何嵌入到*外部*文件夹中，以及它如何与较低层（可能是 sysfs）进行通信？是否有任何描述*外部*文件夹使用、功能和 HowTo 的博客或文档？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T09:38:53.860

*外部*文件夹并非主要用于用户空间硬件抽象。外部是指外部开源库。这意味着 Android 平台所依赖但主要不是由 Android 开源项目开发和维护的库。典型的例子是浏览器的 webkit，字体的 FreeType，数据库的 SqlLite 等等。随着更多功能被添加到 Android 中，更多的这些库包含在 external.xml 中。

如果您正在寻找放置用户空间硬件驱动程序的地方，*硬件*文件夹包含其中的一些。这也是 Android 硬件抽象层 (HAL) 所在的源。*设备*文件夹还包含某些设备的一些硬件特定源，并且可能是添加类似这样的附加代码的合适位置。

有关 AOSP 中文件夹总体布局的更多信息，请参阅我[对这个问题的回答](https://stackoverflow.com/questions/9046572/how-to-understand-the-directory-structure-of-android-root-tree)

# ruby - 抽象类与具体类？

> ID：10477566
> 
> 赞同：0
> 
> 时间：2012-05-07T06:21:02.670
> 
> 标签：ruby, oop, class, abstract-class, concreteclass

我正在学习面向对象编程，但我对抽象类和具体类感到困惑。一些现实世界的例子将不胜感激。使用一个比另一个有什么好处？什么时候更喜欢抽象类和具体类？

如果答案比我在上下文中所要求的任何语言都特定`Ruby`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:30:11.807

如果你有一个不能被实例化的对象，你应该使用一个抽象类。但是，如果要实例化此类，则应使用具体类。

想象一下，你想要几个动物课程。但规则只是实例化特定的动物，如狗、猫或老鼠。但现在所有这些动物都有一些属性和方法——比如名字。所以你把它们放在一个基类`Animal`中以避免代码重复。您无法创建以下实例`Animal`：

```
public abstract class Animal
{
    public string Name { get; set; }
    public void Sleep()
    {
        // sleep
    }
}

public class Cat : Animal
{
    public void Meow()
    {
        // meooooow
    }
}

public void DoSomething()
{
    var animal = new Animal(); // illegal operation
    var cat    = new Cat();    // works fine
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:55:10.843

抽象类通常是具体类的基类。（派生，通过 OO 继承）抽象类通常为具体类强制执行接口。但是抽象类也可以通过方法和属性实现具体类使用的通用功能。

您永远无法实例化抽象类，而只能实例化具体类，假设它们实现了所有必要的方法。

# java - List 是一种原始类型。对泛型类型 List 的引用 应该参数化

> ID：10477570
> 
> 赞同：17
> 
> 时间：2012-05-07T06:21:21.817
> 
> 标签：java, generics, types

下面是我的语法

```
List synchronizedpubliesdList = Collections.synchronizedList(publiesdList); 
```

我收到以下语法错误：

`List is a raw type. References to generic type List<E> should be parameterized.`

请提出解决方案。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-07T22:01:02.247

我相信

> List 是一种原始类型。对泛型类型 List 的引用应该被参数化

不是错误，而是警告。

如果您打算使用 Java，那么了解泛型是一个基石，因此我建议您应该查看 Java 的教程页面：

[java泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/index.html)

因此，如果您知道 中包含什么类型的对象`publiesdList`，则可以这样做：

```
List<YourType> synchronizedpubliesdList = Collections.synchronizedList(publiesdList); 
```

如果列表中有多种类型的对象，则可以使用通配符：

```
List<?> synchronizedpubliesdList = Collections.synchronizedList(publiesdList); 
```

或者，如果您只是想摆脱警告，则可以像这样抑制它：

```
@SuppressWarnings("rawtypes")
List synchronizedpubliesdList = Collections.synchronizedList(publiesdList); 
```

但是不推荐后者。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T06:23:20.937

你需要给它正确的泛型类型，例如

```
List<String> publiesdList = ...
List<String> synchronizedpubliesdList = Collections.synchronizedList(publiesdList); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-21T13:06:39.590

您可以这样定义“publiesdList”：

```
List<String> publiesdList = new List<String>(); 
```

警告将消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T01:26:06.903

我在 Eclipse 中也遇到过相同的警告，只需单击警告标志并选择将类型参数添加到 Hash、List、Array 或其他内容。此处讨论的大列表[什么是原始类型，为什么我们不应该使用它？](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)

# sap - 获取材料链接的文档数据

> ID：10477571
> 
> 赞同：1
> 
> 时间：2012-05-07T06:21:25.917
> 
> 标签：sap, function-module

我想从 SAP 获取数据并将新数据（材料和文档）放入 SAP。我正在使用 theobald 软件中的 ERPConnect .Net 工具。但问题不是 ERPConnect 特定的，任何 C++、C# 或任何其他语言的解决方案都可以。SAP 没有在我们公司运行，它是为使用我们 CAD 软件的客户运行的。

实际上，功能模块`CO_DM_MAT_GET_DOC_LINKS`正是我想要的。返回所有链接的文档。不幸的是，这个模块不能通过远程调用。

有人知道如何使用功能模块接收材料主链接文档信息记录吗？

提前感谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:43:00.423

查看以下 RFC：

*   BAPI_MATERIAL_GETLIST
*   BAPI_MATERIAL_GET_DETAIL
*   BAPI_DOCUMENT_GETOBJECTDOCS
*   BAPI_DOCUMENT_GETOBJECTLINKS
*   BAPI_DOCUMENT_GETDETAIL
*   BAPI_DOCUMENT_GETDETAIL2

您可能需要进行一些混合和匹配才能获得所需的所有数据。

# iphone - 对 2D NSMutableArray 进行排序

> ID：10477575
> 
> 赞同：2
> 
> 时间：2012-05-07T06:21:43.063
> 
> 标签：iphone, objective-c, ios, sorting, nsmutablearray

我有二维数组，如下所示：

```
NSMutableArray *world=[[NSMutableArray alloc]init];
NSNumber *number;
NSMutableArray *inner;

int scr=2;
number=[[NSNumber alloc]initWithInt:scr];
inner=[[NSMutableArray alloc]initWithObjects:@"ABC",number,nil];
[world addObject:inner];

scr=6;
number=[[NSNumber alloc]initWithInt:scr];
inner=[[NSMutableArray alloc]initWithObjects:@"XYZ",number,nil];
[world addObject:inner];

scr=1;
number=[[NSNumber alloc]initWithInt:scr];
inner=[[NSMutableArray alloc]initWithObjects:@"PQR",number,nil];
[world addObject:inner];

scr=5;
number=[[NSNumber alloc]initWithInt:scr];
inner=[[NSMutableArray alloc]initWithObjects:@"DEF",number,nil];
[world addObject:inner];

scr=3;
number=[[NSNumber alloc]initWithInt:scr];
inner=[[NSMutableArray alloc]initWithObjects:@"LMN",number,nil];
[world addObject:inner]; 
```

现在，我想对世界数组进行排序以获得以下结果，

```
XYZ 6
DEF 5
LMN 3
ABC 2
PQR 1 
```

谁能帮帮我，在此先感谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T06:33:15.333

您可以使用[`sortedArrayUsingComparator:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingComparator%3a)自定义排序代码块对数组进行排序。试试这个：

```
NSArray *sortedWorld = [world sortedArrayUsingComparator:^(id a, id b) {
    NSNumber *numA = [a objectAtIndex:1];
    NSNumber *numB = [b objectAtIndex:1];
    return [numB compare:numA];
}]; 
```

# python - Selenium 中的多个浏览器与 Python

> ID：10477576
> 
> 赞同：2
> 
> 时间：2012-05-07T06:21:46.977
> 
> 标签：python, selenium, automated-tests

我正在尝试测试需要两个不同浏览器会话的聊天应用程序。我通过以下方式进行了尝试：

*   Started 两种不同的浏览器，firefox 和 google chrome
*   试图打开该网站的主页。

以下是代码：

```
from selenium import selenium
from selenium import webdriver
from threading import Thread
import unittest, time, re
import time

class envolveChatCheck(unittest.TestCase):

    def get_sauce_browser(self, port=4444, browser="*firefox"):
        return selenium('localhost', port, browser, 'http://example.com/')

    def get_browser_and_wait(self, browser, browser_num):
        print "starting browser %s" % browser_num
        browser.start()
        browser.open("/")
        print "browser %s ready" % browser_num

    def setUp(self):
        self.verificationErrors = []
        self.b1 = self.get_sauce_browser(browser='*googlechrome', port=4444)
        self.b2 = self.get_sauce_browser(browser='*firefox', port=4444)
        print "all browsers ready"

    def test_envolve_chat_check(self):
        print "starting b1"
        self.b1.start()
        print "starting b2"
        self.b2.start()

        print "opening homepage b1"
        self.b1.open("/")
        self.b1.wait_for_page_to_load("30000")

        print "opening homepage b2"
        self.b2.open("/")
        self.b2.wait_for_page_to_load("30000")

    def tearDown(self):
        self.b1.stop()
        self.b2.stop()
        self.assertEqual([], self.verificationErrors)
if __name__ == "__main__":
    unittest.main() 
```

以下是我得到的错误：

```
Traceback (most recent call last):
File "envolveChatCheck.py", line 32, in test_envolve_chat_check
self.b1.open("/")
File "/usr/local/lib/python2.6/dist-packages/selenium/selenium.py", line 774, in open
self.do_command("open", [url,ignoreResponseCode])
File "/usr/local/lib/python2.6/dist-packages/selenium/selenium.py", line 214, in do_command
raise Exception, data
Exception: ERROR: Got a null result 
```

对此有任何提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:39:55.680

我的建议是使用多配置项目在[Jenkins(Hudson)中运行您的脚本](http://jenkins-ci.org/ "詹金斯")

1.  下载并安装**Jenkins**。
2.  转到**管理插件**。
3.  在**可用插件**下选择**"Python Plugin"**。
4.  *可选的（也有各种 Selenium 特定的插件，虽然我没有有效地使用它们。假设你已经在系统上安装了 Selenium）*
5.  创建一个新作业并选择**“构建多配置项目”**。
6.  在标题**“配置矩阵”**下单击**“添加轴”**。
7.  选择**“用户定义的轴”**。
8.  将轴的**“名称”设置为****“浏览器”**。
9.  将**“值”**设置为您要测试的浏览器，用空格分隔。 *例如：firefox "internet explorer" chrome*
    **注意：我在周围加上引号以确保 Internet Explorer 被视为一个值**
10.  点击**“添加构建步骤”**
11.  选择**“执行 Python 脚本”**

在 python 块中，您可以插入代码并提取之前设置的浏览器值：

```
#!/usr/bin/python
import os
BROWSER = os.getenv('BROWSERS') 
```

发生的情况是 Jenkins 将使用之前创建的 Axis 中定义的值创建单独的作业，并且您的 python 脚本将为每个作业注入该值。

您可以使用其他方法进一步扩展它，但这至少可以帮助您专注于测试用例逻辑，而不必担心执行。上面的例子是基于 Linux 的。

*注意：我使用 SeleniumGrid 插件和 Windows 从属设备从 Linux 运行我的 IE 测试脚本。*

# iphone - 如何在 iPhone 上通过删除控制播放音乐时设置标题？

> ID：10477580
> 
> 赞同：1
> 
> 时间：2012-05-07T06:21:56.980
> 
> 标签：iphone, background-music

我正在开发一个支持在后台播放音乐的广播应用程序。但我陷入了如何设置音乐标题以删除控制权。

我的应用程序和“音乐”之间的区别如下： ![不同之处](../Images/169b2b2e612ce75f6b846c622de0cc0a.png)

我应该怎么做才能让我的应用显示像“音乐”这样的音乐标题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:05:52.563

这是示例代码：

```
#import <MediaPlayer/MPNowPlayingInfoCenter.h>
#import <MediaPlayer/MPMediaItem.h>

MPMediaItemArtwork *albumArt;

- (void)changeTrackTitles
{
  Class playingInfoCenter = NSClassFromString(@"MPNowPlayingInfoCenter");

    if (playingInfoCenter) 
    {
        albumArt = [[MPMediaItemArtwork alloc] initWithImage: [UIImage imageNamed:@"HexagonArtwork"]];
        NSMutableDictionary *songInfo = [[NSMutableDictionary alloc] init];
        [songInfo setObject:@"SongName" forKey:MPMediaItemPropertyTitle];
        [songInfo setObject:@"AlbumName" forKey:MPMediaItemPropertyAlbumTitle];
        [songInfo setObject:@"ArtistName" forKey:MPMediaItemPropertyArtist];
        [songInfo setObject:albumArt forKey:MPMediaItemPropertyArtwork];
        [[MPNowPlayingInfoCenter defaultCenter] setNowPlayingInfo:songInfo];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T07:52:27.467

您可以通过调用 MPNowPlayingInfoCenter 更改正在播放标签的文本，这也将允许您在锁定屏幕上修改歌曲名称、专辑、艺术家和专辑插图。

```
#import <MediaPlayer/MPNowPlayingInfoCenter.h>
#import <MediaPlayer/MPMediaItem.h>

MPMediaItemArtwork *albumArt;

- (void)changeTrackTitles
{
  Class playingInfoCenter = NSClassFromString(@"MPNowPlayingInfoCenter");

    if (playingInfoCenter) 
    {
        albumArt = [[MPMediaItemArtwork alloc] initWithImage: [UIImage imageNamed:@"HexagonArtwork"]];
        NSMutableDictionary *songInfo = [[NSMutableDictionary alloc] init];
        [songInfo setObject:@"SongName" forKey:MPMediaItemPropertyTitle];
        [songInfo setObject:@"AlbumName" forKey:MPMediaItemPropertyAlbumTitle];
        [songInfo setObject:@"ArtistName" forKey:MPMediaItemPropertyArtist];
        [songInfo setObject:albumArt forKey:MPMediaItemPropertyArtwork];
        [[MPNowPlayingInfoCenter defaultCenter] setNowPlayingInfo:songInfo];
    }
} 
```

代码来自：[jaysonlane.net](http://jaysonlane.net/tech-blog/2012/04/lock-screen-now-playing-with-mpnowplayinginfocenter/)

# haskell - 如何在haskell中进行枚举

> ID：10477588
> 
> 赞同：2
> 
> 时间：2012-05-07T06:22:42.803
> 
> 标签：haskell

我有一些字符，例如 ["ab"]，我只有两个数字，零和一。我想得到一个答案

```
[[('a', 1), ('b', 1)],
 [('a', 0), ('b', 1)],
 [('a', 1), ('b', 0)],
 [('a', 0), ('b', 0)]] 
```

我是初学者，有人可以帮助我吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:37:10.603

最有趣的部分是生成和的所有可能序列的`0`列表`1`；一种方法是通过`replicateM`：

```
> replicateM 2 [1,0]
[[1,1],[1,0],[0,1],[0,0]] 
```

您可以使用`map`并`zip`从那里：

```
> map (zip "ab") (replicateM 2 [1,0])
[[('a',1),('b',1)],[('a',1),('b',0)],[('a',0),('b',1)],[('a',0),('b',0)]] 
```

为了完全匹配您的答案，您必须做一些额外的修改：

```
> map (zip "ab" . reverse) (replicateM 2 [1,0])
[[('a',1),('b',1)],[('a',0),('b',1)],[('a',1),('b',0)],[('a',0),('b',0)]] 
```

# linux - 内核模式下contex切换时如何保持原子性？

> ID：10477591
> 
> 赞同：2
> 
> 时间：2012-05-07T06:22:54.400
> 
> 标签：linux, operating-system, linux-kernel, x86, kernel

毫无疑问，内核模式下的上下文切换是被硬件中断或软件中断所困。也知道上下文切换应该保持原子性，但是如何实现原子性呢？众所周知，中断门禁用所有中断（我不知道是否包括NMI）。中断门本身是否可以自然地被视为原子序列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T07:03:24.990

原子操作在内核中实现如下。在高层（例如，来自设备驱动程序开发人员的 POV），内核提供类似于用户空间互斥[锁的获取和释放锁。](http://lxr.linux.no/#linux+v3.3.4/include/linux/bit_spinlock.h)在较低级别，这些锁是使用[原子操作](http://en.wikipedia.org/wiki/Atomic_operations)的组合实现的，并向内核调度程序发出[不应发生抢占](http://lxr.linux.no/#linux+v3.3.4/include/linux/preempt.h#L45)的信号。

在调度程序本身中，原子性是通过[屏蔽中断](http://lxr.linux.no/#linux+v3.3.4/arch/x86/kernel/entry_32.S#L355)来保证的。这是使用单个指令（cli 或 sti）完成的，因此它本身是原子的。NMI 确实可以在中断被清除时发生，但是，这是一种特殊情况。NMI 处理程序知道它可以在奇怪的上下文中调用，因此它确保它[不会更改上下文](http://lxr.linux.no/#linux+v3.3.4/arch/x86/kernel/entry_32.S#L1309)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T09:29:11.753

上下文切换和互斥。我假设上下文切换是指任务切换。我必须注意，如果说实话，任务切换不需要锁定。几乎在任何情况下，调度本身都需要互斥访问做出调度决策所需的某些数据，而不是上下文切换本身，即遵循做出调度决策。

几乎所有现代操作系统都遵循设计，系统中的每个线程都保留两个堆栈，一个在用户模式端，另一个在内核模式端。进行任务切换所需的只是一个三步操作：

1.  将 CPU 的状态（所有寄存器）保存在离开 CPU 的任务的堆栈上。
2.  切换活动堆栈
    1.  将实际堆栈指针保存在当前任务描述符中（离开 CPU 的任务）
    2.  切换指向当前任务描述符的指针
    3.  从当前任务描述符（到达 CPU 的任务）中将新的堆栈指​​针安装到堆栈指针寄存器中
3.  从堆栈（到达 CPU 的任务的堆栈）中恢复 CPU 的状态。

如您所见，从本质上讲，上下文切换使用任务本地的两组数据进行操作，但不是全局的。CPU 寄存器的内容不是共享数据的示例。笔记！如果内核中只有一个代码实现上下文切换，那么所有上下文切换都将通过相同的代码。反过来，这提供了保证，如果任务被切换，该任务的内核堆栈顶部将包含所有定义良好格式的 CPU 状态。并且每次切换任务时，它都能在其内核堆栈的顶部找到 CPU 状态数据！

存在两个注释：

1.  请记住，如果 CPU 上的几乎所有指令不与其他处理器共享数据，它们都会以原子方式执行。这意味着指令执行不能在中间中断。因此，指向当前任务描述符的切换指针可以通过带有基于寄存器的操作数的 xchg 指令安全地生成。
2.  来自硬件的中断可以中断任务切换。但是中断处理程序是任务上下文无关的。因此，它们将通过 CPU 使用通常使用堆栈机设计方法来安全地抢占任务切换关于任务和关于自身的任务。

内核中的互斥。一般来说，kenel可以分为硬件驱动和软件驱动两部分。第一个包括可以由硬件设备（中断处理程序）触发的中断调用的代码，它不依赖于当前执行的线程，也不依赖于以某种方式影响当前执行任务的上下文，第二个一种包括由当前正在执行的线程（系统调用和异常处理程序）显式或隐式调用的代码，并且通常需要访问任务描述符数据。

这两个内核部分对数据锁定提供了不同的要求。仅由内核的软件驱动部分使用的数据可以使用内核环境提供的众所周知的同步原语。我的意思是遵循检查和等待方法的原语。例如互斥锁。如果需要的数据被锁定，任务可以在等待队列中注册自己并释放 CPU 用于另一个任务。

只能由硬件驱动部分（仅由一个特定的中断处理程序）使用的数据可以依赖于这样一个事实，即如果同一时间的中断正在处理直到处理程序的时刻，则下一个中断无法传递给 CPU将通知中断控制器它完成了中断处理（所谓的 EOI（中断结束）通知）。因此，仅由一个中断处理程序使用的数据以及位于中断处理程序执行开始和发送 EOI 通知之间的数据以自然方式受到保护，并且不需要任何额外的锁定。

最后，在软件和硬件驱动的内核部分或不同优先级中断处理程序之间共享的数据为互斥实现提供了最严格的要求。这样的数据既不能受到检查等待锁的保护，也不能受到相同优先级中断传递的串行性质的保护。有两个主要因素暗示此类数据的锁定要求：

1.  在 CPU 上执行的当前活动可以在任意不可预知的时间在任何执行点被中断处理程序抢占。所以换句话说，硬件中断处理是完全异步的过程。
2.  处理程序不能等待资源释放。尝试在中断处理程序中等待资源释放很容易导致中断处理程序等待资源释放与同时阻塞软件驱动的内核部分执行之间的死锁，并且任务拥有资源并被阻塞作为软件驱动的一部分执行内核部分释放资源。

因此，在这种情况下使用下一个同步技术：

1.  使用原子操作。请注意，在所描述的上下文中，几乎每个 CPU 指令都可以被视为原子指令。通常原子操作的术语是指以'lock'前缀为前缀的处理器指令，但只有在多处理器系统的情况下才需要lock，以防止对同一内存单元的物理并行访问不一致。
2.  使用免等待算法和数据结构。
3.  使用 IST 而不是 ISR。这种设计方法假定中断处理程序中唯一必须完成的工作是安排中断处理线程运行并通知它有关中断。由于这一点，在中断处理程序中运行的代码量和它所需的锁数量都大大减少了。另一方面，从 ISR 转移到 IST 的代码可以不受任何限制地使用锁定。
4.  最通用、最常见和最流行的方法，即攻击中断锁定要求的主要因素之一——抢占。可以通过禁用中断接受来防止抢占。CPU 通常支持某种方法来禁用中断（例如 x86 处理器提供两个特殊指令 - CLI（禁用中断）和 STI（启用中断））。如果 CPU 不提供此类功能，通常也可以在中断控制器一侧禁用中断（我相信这是不同 RISC 处理器的情况）。中断禁用意味着没有一个中断处理程序会抢占受保护的代码部分的执行，因为处理器无法接收来自中断控制器的信号并且不会完成线程切换（至少是隐式的），因为通常触发调度程序的计时器将无法像所有其他设备一样提供中断。这种同步方法对于内核实现来说当然是必要的，但是太残酷了。笔记！它通过禁用系统中的所有中断来实现同步，这会对中断处理延迟和内核响应能力产生负面影响。由于这个内核开发人员试图使这种形式的关键部分尽可能少和尽可能短。

关于中断门。是的你是对的。英特尔处理器在进入中断门期间自动禁用中断，并在处理程序的 iret 上重新启用它们。因此，整个中断处理程序可以被视为以原子方式执行。但！正如我在上面几行中所描述的，人们试图以这种方式最小化受保护的代码量。结果，即使操作系统内核使用中断门而不是陷阱门，它也会尽可能快地尝试在中断处理程序中手动重新启用中断。

NMI 是一个非常特殊的情况。它的发生通常意味着整个世界都崩溃了。当所有系统都已经关闭时，是否有人会关心同步？

# data-mining - 比较 Carrot2 中的聚类结果

> ID：10477598
> 
> 赞同：2
> 
> 时间：2012-05-07T06:23:24.527
> 
> 标签：data-mining, cluster-analysis, carrot2

我正在为我的论文使用 Carrot2 工具，并在该工具上运行不同的算法。我的问题是，如何科学地比较不同算法的结果？我的意思是，我需要证明算法 1 的聚类结果优于算法 2 的结果。熵和纯度值对我有用吗，如果是，我该如何应用它们？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T00:41:33.883

在我看来，比较两种算法的最佳方式是展示它们在一些真实数据上的性能，并解释为什么它们在某些特殊情况下运行良好或运行不佳（例如，它适用于密集数据或稀疏数据，或与可变密度...）。在某些情况下，您可能能够做出理论证明，证明某些算法与另一种算法相比具有一些额外的理想属性。但这可能很难做到。

此外，为了确定结果是否良好，您可能需要领域专家来告诉您集群是否对您的应用程序领域有意义。

我的意思是熵和纯度之类的度量是有趣的度量。但最终，只有当数据挖掘技术为该领域产生有意义的结果时，它才适用于特定领域。

如果您正在开发一种通用的聚类算法，那么您可能会使用这些度量来证明您的算法在某些条件下比另一种算法具有更好的属性，并使用这些度量来争论这一点。但是你仍然需要用一些真实的数据来说明为什么它在某些情况下效果更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:01:43.343

不幸的是，比较聚类结果并非易事。特别是在涉及重叠、分层和子空间结果时。常用措施仅适用于严格的分区聚类。即使那样，它们也有不同的偏见，并且存在十几种质量措施。因此，您的结果很可能在一项指标上更好，而在另一项指标上更差。

我不知道 Carrot 的详细信息，因为我是[ELKI](http://elki.dbs.ifi.lmu.de/)用户。为了比较聚类，它具有各种配对计数度量（Precision、Recall、F1、Jaccard、Rand、Adjusted Rand、Fowlkes-Mallows）、基于熵的度量（“归一化互信息”）、Bcubed 度量（同样是精确度、召回率和 F1 )、集合匹配度量（F1、纯度和逆纯度）、基于编辑距离的度量和基于基尼的度量。总共有 20 种质量措施。我还没有找到一个很好的论据，为什么其中一个明显优越，它们都有其优点和缺点。BCubed 自称优越，但是，谁不呢？

[https://en.wikipedia.org/wiki/Cluster_analysis#External_evaluation](https://en.wikipedia.org/wiki/Cluster_analysis#External_evaluation) 提供了其中一些措施的详细信息，但也没有说明何时使用哪些措施。

另外，实验不能*证明*任何算法都比另一种更好。您可能只是为另一个选择了错误的参数！或者您可能使用了不合适的“算法 2”。有数百种聚类算法（ELKI 是我所知道的最大的聚类算法集合，这就是我目前正在使用它的原因！）理想情况下，您应该比它们中的每一个都好。我目前认为发明另一种聚类算法没有多大意义。你可能只是在重新发明轮子，而有人可能已经发明了这种聚类算法，或者甚至更好的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:01:01.277

正如其他人提到的那样，没有“最佳”质量指标仅仅是因为当您谈论无监督聚类时没有“最佳”质量标准。有些人（和应用程序）更喜欢小型、紧凑的集群，而另一些人则倾向于喜欢大型、高级别的集群。一些用于分层，另一些用于扁平（分区）结果。有些人会喜欢清晰的分配，有些人会喜欢模糊的隶属函数……这可以永远持续下去。

与上述原因类似，没有用于执行此类比较的“完美”基本事实集。这一切都取决于输入数据是什么，目标是什么等。

[请参阅http://project.carrot2.org/publications.html](http://project.carrot2.org/publications.html)上的Carrot2 出版物列表，其中一些出版物包括您可以重复使用的质量指标和数据集（请注意我上面的评论）。这可能最适用于聚类搜索结果：

Claudio Carpineto、Stanislaw Osiński、Giovanni Romano、Dawid Weiss：Web 集群引擎调查。ACM 计算调查 (CSUR)，第 41 卷，第 3 期（2009 年 7 月），第 17 条，ISSN:0360-0300

当然，如果您想出一个有趣的新算法，我们欢迎您对 Carrot2 的贡献！

# iphone - 数据库锁定错误

> ID：10477601
> 
> 赞同：0
> 
> 时间：2012-05-07T06:23:40.080
> 
> 标签：iphone

我正在获取数据库锁定错误。

```
-(IBAction)YesData:(id)sender
 {
 [self Check_Create_DB];

sqlite3 *database;

if(idimg == 0)
{

 NSData *imgData = UIImagePNGRepresentation(image.image);  

UIImage *dataImage=[[UIImage alloc] init];

 dataImage=[UIImage imageWithData:imgData];  

    int ycount1=1;

int ncount1=0;

int neutcount1=0;  

if(sqlite3_open([dbpath UTF8String],&database)==SQLITE_OK)

{
    NSLog(@"Connection Open");  

   const char *sqlTmp="insert into 

    images(imgname,ycount,ncount,neutcount)values(?,?,?,?)";

    sqlite3_stmt *cmp_sqlstmt;

    int returnvalue=sqlite3_prepare_v2(database,sqlTmp,-1,&cmp_sqlstmt,NULL );

    if(returnvalue ==  SQLITE_OK)
    {      
      sqlite3_bind_blob(cmp_sqlstmt, 1, [imgData bytes], [imgData length], NULL);

        sqlite3_bind_int(cmp_sqlstmt, 2, ycount1);

        sqlite3_bind_int(cmp_sqlstmt, 3, ncount1);

        sqlite3_bind_int(cmp_sqlstmt, 4, neutcount1); 

        if(SQLITE_DONE != sqlite3_step(cmp_sqlstmt))
                               NSAssert1(0, @"Error while inserting. '%s'",sqlite3_errmsg(database));

        NSLog(@"insert successfully") ;              

    }
    sqlite3_step(cmp_sqlstmt);

    sqlite3_finalize(cmp_sqlstmt);

   sqlite3_close(database);

    lblvote.text=@"You Voted Yes";

     [newView setHidden:NO];
  }
    else
    {
        sqlite3_close(database); 
   }

  }
   else
  {
   // [self Check_Create_DB];
    //sqlite3 *database;

    sqlite3_open([dbpath UTF8String],&database);

    if(sqlite3_open([dbpath UTF8String],&database)==SQLITE_OK)
    {

        NSLog(@"Connection Open");

        idycount+=1;

         const char  *sqlTmp="update Images set ycount=? where imgid= ?";  

        sqlite3_stmt *cmp_sqlstmt;

        int returnvalue=sqlite3_prepare_v2(database,sqlTmp,-1,&cmp_sqlstmt,NULL);

        NSLog(@"return value.....%d",returnvalue);

        if(returnvalue == SQLITE_OK)

        {  

          sqlite3_bind_int(cmp_sqlstmt,1,idycount );

             sqlite3_bind_int(cmp_sqlstmt,2,idimg );

            NSLog(@"updated");

            if(SQLITE_DONE != sqlite3_step(cmp_sqlstmt))

                NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(database));

            sqlite3_reset(cmp_sqlstmt);     

        }
        else
        {

            NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(database));

        }

        sqlite3_step(cmp_sqlstmt);

        sqlite3_finalize(cmp_sqlstmt);

        sqlite3_close(database);

    }
    else
    {

    sqlite3_close(database);

    }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:15:57.453

无关：

对于未来的项目，请查看[FMDatabase](https://github.com/ccgus/fmdb)。

> FMDatabase 是一个围绕 SQLite 的 Objective-C 包装器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:07:59.483

在我看来，您没有正确关闭数据库（sqlite3_close（数据库））。这可能在您的实现看起来像上面正确关闭数据库之前发生。尝试重新安装数据库和表

# sftp - SFTP 是否安全地发送用户名和密码？

> ID：10477605
> 
> 赞同：4
> 
> 时间：2012-05-07T06:23:55.043
> 
> 标签：sftp

如果您登录到 sftp 服务器，用户名和密码是否安全发送？

或者您是否必须进行基于证书的身份验证以确保整个传输都是加密的？

如果这取决于客户端，那么您知道是否可以将 Tumbleweed 和 WinSCP 配置为安全地发送用户名和密码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:31:18.707

SFTP 通过 SSH，它通过交换密钥来建立安全隧道（回想一下，当您第一次连接时，系统会提示您接受并存储密钥吗？）。一旦建立了安全隧道，所有通过它的通信都会被加密。用户名和密码通过隧道发送，因此它们是安全发送的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T09:44:54.887

取决于您所说的 SFTP 是什么意思。对于代表 SSH 文件传输协议的“真实”SFTP，身份验证是在 SSH 层上完成的，它是安全的。有些人使用“SFTP”作为 FTP-over-TLS 的同义词，在这种情况下它取决于 - 在大多数情况下，命令通道在发送用户名和密码之前被加密（这仅适用于 SSL/TLS 安全连接，不是普通的 FTP！），但可以以明文形式进行身份验证（例如，出于调试目的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T06:59:45.933

SFTP 本身根本不进行身份验证。根据其规范，它[假定它通过安全通道运行](https://datatracker.ietf.org/doc/html/draft-ietf-secsh-filexfer-13#section-1)。因此，它期望底层通道处理身份验证（如果有）。

所以问题是，您的特定 SFTP 实例运行在哪个通道上。在 99% 的情况下，它通过 SSH（端口 22）运行，安全地发送用户名和密码。请注意，大多数 SFTP 客户端（绝对是 WinSCP）和服务器甚至不支持除 SSH 之外的任何其他通道。

严格来说，即使 SSH 也可以配置无加密或劣质加密。尽管在大多数情况下它也是安全的。同样，大多数 SSH 客户端（绝对是 WinSCP）和服务器不允许无加密的 SSH 设置。

# java - 避免 printStackTrace(); 改用记录器调用

> ID：10477607
> 
> 赞同：92
> 
> 时间：2012-05-07T06:23:57.383
> 
> 标签：java, logging, pmd, printstacktrace

在我的应用程序中，我通过 PMD 运行我的代码。它向我显示了这条消息：

> *   避免 printStackTrace(); 改用记录器调用。

这意味着什么？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-05-07T06:28:15.227

这意味着您应该使用[logback](/questions/tagged/logback "显示标记为“logback”的问题")或[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")等日志框架，而不是直接打印异常：

```
e.printStackTrace(); 
```

您应该使用此框架的 API 记录它们：

```
log.error("Ops!", e); 
```

日志框架为您提供了很大的灵活性，例如，您可以选择是否要记录到控制台或文件 - 或者如果您发现它们在某些环境中不再相关，则可以跳过一些消息。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-07T06:31:42.017

如果您调用`printStackTrace()`异常，则跟踪将被写入，`System.err`并且很难将其路由到其他地方（或过滤它）。建议您不要这样做，而是使用日志框架（或围绕多个日志框架的包装器，如 Apache Commons Logging）并使用该框架（例如`logger.error("some exception message", e)`）记录异常。

这样做可以让您：

*   一次将日志语句写入不同的位置，例如控制台和文件
*   按严重性（错误、警告、信息、调试等）和来源（通常基于包或类）过滤日志语句
*   对日志格式有一定的影响，无需更改代码
*   等等

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-07T06:32:07.390

生产质量程序应该使用许多日志记录替代方案之一（例如 log4j、logback、java.util.logging）来报告错误和其他诊断。这有很多优点：

*   日志消息转到可配置的位置。
*   最终用户看不到消息，除非您配置日志记录以便他/她看到。
*   您可以使用不同的记录器和日志记录级别等来控制记录多少日志记录。
*   您可以使用不同的附加程序格式来控制日志记录的外观。
*   您可以轻松地将日志输出插入更大的监控/日志框架。
*   以上所有操作都可以在不更改代码的情况下完成；即通过编辑已部署应用程序的日志记录配置文件。

相比之下，如果您只使用 printStackTrace，部署者/最终用户几乎没有任何控制权，并且日志消息可能会丢失或在不适当的情况下显示给最终用户。（没有什么比随机堆栈跟踪更能吓到胆小的用户了。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-12T09:11:12.830

在 Simple 中，e.printStackTrace() 不是一个好习惯，因为它只是将堆栈跟踪打印到标准错误。因此，您无法真正控制此输出的去向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-05T12:51:46.350

几乎每个日志框架都提供了一种方法，在该方法中我们可以将可抛出对象与消息一起传递。像：

```
public trace(Marker marker, String msg, Throwable t); 
```

他们打印可投掷对象的堆栈跟踪。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-07-17T22:04:40.583

让我们从公司概念谈起。日志为您提供灵活的级别（请参阅[logger.info 和 logger.debug 之间的区别](https://stackoverflow.com/questions/2342280/difference-between-logger-info-and-logger-debug)）。不同的人希望看到不同的级别，例如 QA、开发人员、业务人员。但是 e.printStackTrace() 将打印出所有内容。此外，如果这个方法会被调用，同样的错误可能会打印多次。那么贵公司的 Devops 或 Tech-Ops 人员可能会发疯，因为他们会收到相同的错误提醒。我认为更好的替代品可能是`log.error("errors happend in XXX", e)` 这也将打印出比 e.printStackTrace() 更容易阅读的整个信息

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-07-04T00:01:09.133

主要原因是 Proguard 会从生产环境中移除 Log 调用。因为通过记录或打印 StackTrace，可以通过例如 Logcat Reader 应用程序在 Android 手机中查看它们（堆栈跟踪或日志中的信息）。因此，这对安全性来说是一种不好的做法。此外，我们不会在生产过程中访问它们，最好从生产中删除。由于 ProGuard 删除了所有 Log 调用而不是 stackTrace，因此最好在 catch 块中使用 Log，并让 Proguard 将它们从生产中删除。

# coffeescript - Coffeescript 不是空对象

> ID：10477610
> 
> 赞同：1
> 
> 时间：2012-05-07T06:23:58.677
> 
> 标签：coffeescript

> **可能重复：**
> [对象是空的吗？](https://stackoverflow.com/questions/4994201/is-object-empty)

```
 update: (id, data) ->
    toUpdate = @find(id)
    if toUpdate isnt {}
            console.log "hi mom"
            console.log toUpdate
            toUpdate.setProperty(key, value) for own key, value of data

    return toUpdate

 find:(id) ->
    result = record for record in @storage when record.id is id
    return result or {} 
```

鉴于以下摩卡测试

```
describe '#update', ->
    it 'should return an updated record from a given id and data when the record exists', ->
      boogie = createData()
      archive = new Archive("Dog")
      dog = archive.create(boogie)
      result = archive.update(1, {name:"Chompie", age:1})
      result.name.should.eql "Chompie"
      result.age.should.eql 1
      result.emotion.should.eql dog.emotion

    it 'should return an updated record from a given id and data when the record does not exist', ->
      boogie = createData()
      archive = new Archive("Dog")
      dog = archive.create(boogie)
      result = archive.update(50, {name:"Chompie", age:1})
      result.should.not.exist 
```

结果是

```
Archive #update should return an updated record from a given id and data when the record exists: hi mom
{ id: 1,
  validationStrategies: {},
  name: 'Boogie',
  age: 2,
  emotion: 'happy' }
  ✓ Archive #update should return an updated record from a given id and data when the record exists: 1ms
    Archive #update should return empty when the record does not exist: hi mom
{}
    ✖ 1 of 13 tests failed:
    1) Archive #update should return empty when the record does not exist:
    TypeError: Object #<Object> has no method 'setProperty' 
```

...令人惊讶，不是吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-07T06:40:57.030

CoffeeScript 的`is`(AKA `==`) 只是 JavaScript 的`===`，而`isnt`(AKA `!=`) 只是 JavaScript 的`!==`. 所以你的条件：

```
if toUpdate isnt {} 
```

将始终为真`toUpdate`，因为对象字面`{}`量永远不会是同一个对象。

但是，如果`@find`可以返回在常量中可用的已知“空”对象，那么您可以使用`isnt`：

```
EMPTY = {}

find: ->
    # ...
    EMPTY 
```

然后：

```
if toUpdate isnt EMPTY
    #... 
```

例如，考虑这个简单的代码：

```
a = { }
b = { }
console.log("a is b: #{a is b}")
console.log("a isnt b: #{a isnt b}") 
```

这将在您的控制台中为您提供：

```
a is b: false
a isnt b: true 
```

但是这个：

```
class C
    EMPTY = { }
    find: -> EMPTY
    check: -> console.log("@find() == EMPTY: #{@find() == EMPTY}")

(new C).check() 
```

会说：

```
@find() == EMPTY: true 
```

演示：http: [//jsfiddle.net/ambiguous/7JGdq/](http://jsfiddle.net/ambiguous/7JGdq/)

所以你需要另一种方法来检查是否`toUpdate`不为空。您可以计算以下属性`toUpdate`：

```
if (k for own k of toUpdate).length isnt 0 
```

或者您可以使用上面概述的特殊`EMTPY`常量方法。还有很多其他方法可以检查空对象，[Ricardo Tomasi](https://stackoverflow.com/users/467019/ricardo-tomasi)提出了一些建议：

1.  Underscore 提供[`_.isEmpty`](http://documentcloud.github.com/underscore/#isEmpty)了基本上是`for`带有一些特殊情况处理和短路的循环方法。
2.  下划线还提供[`_.values`](http://documentcloud.github.com/underscore/#values)，以便您查看`_(toUpdate).values().length`. 这在[`map`](http://documentcloud.github.com/underscore/#map)内部调用，如果可用，这将是本机`map`函数。
3.  你甚至可以通过 JSON 使用`JSON.stringify(toUpdate) is '{}'`，这对我来说似乎有点脆弱，而且相当迂回。
4.  您可以使用[`Object.keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)而不是`for`循环：`Object.keys(toUpdate).length isnt 0`。`keys`虽然并非所有地方都支持，但它适用于 Node、最新的非 IE 浏览器和 IE9+。
5.  Sugar 也有[`Object.isEmpty`](http://sugarjs.com/api/Object/isEmpty)，jQuery 也有[`$.isEmptyObject`](http://api.jquery.com/jQuery.isEmptyObject/).

短路`for`循环似乎是检查空虚的最快方法：

```
(obj) ->
    for k of toUpdate
        return true
    false 
```

这假设您不需要`own`避免迭代错误的事情。但鉴于这只是一个测试套件，而且空性测试几乎肯定不会成为您代码中的瓶颈，我会选择您拥有的 Underscore、Sugar 或 jQuery 中的任何一个（如果您需要可移植性并且必须处理通常的浏览器废话），`Object.keys(x).length`如果您知道它将可用，并且`(k for own k of toUpdate).length`如果您没有库并且必须处理浏览器废话并且不确定这`toUpdate`将是一个简单的对象。

# drag-and-drop - 在 SWT 中拖放表格查看器

> ID：10477613
> 
> 赞同：0
> 
> 时间：2012-05-07T06:24:21.993
> 
> 标签：drag-and-drop, swt, jface

我需要将 tableViewer 单元格值拖动到 swt 中的另一个 tableViewer 单元格。我需要删除我拖放的那个值并添加那些我在 tableViewer 中拖放的值. 这是我所拥有的：提前感谢您的帮助。

```
public void DragandDrop(){

    Transfer[] types = new Transfer[] { TextTransfer.getInstance() };

    DragSource source = new DragSource(table_2, DND.DROP_MOVE | DND.DROP_COPY);
    source.setTransfer(types);
    source.addDragListener(new DragSourceAdapter() {
      public void dragSetData(DragSourceEvent event) {
        DragSource ds = (DragSource) event.widget;
        Table table = (Table) ds.getControl();
        TableItem[] selection = table.getSelection();

        StringBuffer buff = new StringBuffer();
        for (int i = 0, n = selection.length; i < n; i++) {
          buff.append(selection[i].getText());
        }
        event.data = buff.toString();
      }
    });

    DropTarget target = new DropTarget(table_3, DND.DROP_MOVE | DND.DROP_COPY );
    target.setTransfer(types);
    target.addDropListener(new DropTargetAdapter() {
      public void dragEnter(DropTargetEvent event) {
        if (event.detail != DND.DROP_DEFAULT) {
          event.detail = (event.operations & DND.DROP_COPY) != 0 ? DND.DROP_COPY : DND.DROP_NONE;
        }
        for (int i = 0, n = event.dataTypes.length; i < n; i++) {
          if (TextTransfer.getInstance().isSupportedType(event.dataTypes[i])) {
            event.currentDataType = event.dataTypes[i];
          }
        }
      }

      public void dragOver(DropTargetEvent event) {
        event.feedback = DND.FEEDBACK_SELECT | DND.FEEDBACK_SCROLL;
      }

      public void drop(DropTargetEvent event) {
        if (TextTransfer.getInstance().isSupportedType(event.currentDataType)) {
          DropTarget target = (DropTarget) event.widget;
          Table table = (Table) target.getControl();
          String data = (String) event.data;

          TableItem item = new TableItem(table, SWT.NONE);
          item.setText(new String[] { data });
       //   table.redraw();
        }
      }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:56:09.217

要删除所选值，您可以使用以下

```
public void drop(DropTargetEvent event) {
if (TextTransfer.getInstance().isSupportedType(event.currentDataType)) {
DropTarget target = (DropTarget) event.widget;
  Table table = (Table) target.getControl();
  String data = (String) event.data;
  TableItem item = new TableItem(table, SWT.NONE);
  item.setText(new String[] { data });
  //remove the tableitem you drag
  table.remove(table.getSelectionIndex());
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-17T17:09:21.303

我在 TableViewer 上寻找拖放并找到了解决方案。希望大家容易理解。我的情况是，我从 DragSourceListener 和 DropTargetListener 创建了两个新的 Listener 类继承。因为我想使用 TableViewer 功能。你需要做三件事。

首先从 中保存源项目的索引`void dragStart(DragSourceEvent event)`，

秒设置数据到`event.data`和

然后最后找到的目标索引来自`void drop(DropTargetEvent event)`.

```
public class TestClass extends TableViewer {

private int sourceIndex;

priavte class DragListener implements DragSourceListener {
    private TableViewer viewer;

    public ItemDragListener(TableViewer viewer) {
        this.viewer = viewer;
    }

    public void dragStart(DragSourceEvent event) {
        sourceIndex = viewer.getTable().getSelectionIndex();
    }

    public void dragSetData(DragSourceEvent event) {
        // save data
        ISelection select = viewer.getSelection();
        if (select instanceof IStructuredSelection) {
            Object item = (Object) ((IStructuredSelection)select).getFirstElement();
            // save item to event.data
            event.data = .........
    }
     :
}

private class ItemDropListener implements DropTargetListener {
    TableViewer viewer;

    public ItemDropListener(TableViewer viewer) {
        this.viewer = viewer;
    }

    public void drop(DropTargetEvent event) {
        if (TextTransfer.getInstance().isSupportedType(event.currentDataType)) {
          TableItem item = (TableItem)event.item;
          int targetIndex= -1;
          if (item != null) {
             Table table = item.getParent();
             targetIndex= table.indexOf(item);
          }
          String data = (String) event.data;

          // add an item
          if (targetIndex >= 0)
             viewer.insert((Object)data, targetIndex);
          else
             viewer.add((Object)data);

          // remove an item
          viewer.getTable().remove(sourceIndex);  // Careful, it can be changed after add an item
        }
      }

public void init() {
    Transfer[] transfers = new Transfer[] { TextTransfer.getInstance() };
    this.addDragSupport(DND.DROP_COPY | DND.DROP_MOVE, transfers, new    ItemDragListener(this));
    this.addDropSupport(DND.DROP_COPY | DND.DROP_MOVE, transfers, new ItemDropListener(this));
}

} 
```

# html - 在 2 个可变高度的浮动 div 之间放置带有顶部/底部填充的边框

> ID：10477621
> 
> 赞同：1
> 
> 时间：2012-05-07T06:25:39.287
> 
> 标签：html, css, height, css-float

我有一些标记：

```
<div class="container"> 
  <div class="one">column a<br />column a</div> 
  <div class="two">column b</div>
</div> 
```

2 个内部 div 中的内容具有可变高度并动态生成。

我只是使用一些标准的 CSS 技巧来让 2 个内部 div 具有相同的高度：

```
.container{
    overflow: hidden;
    padding: 20px;
    border: 1px solid blue;
}

.one{
    border-right: 1px solid red;
    float: left;
    width: 64%;
    padding-bottom: 500px;
    margin-bottom: -500px;
}

.two{
    float: right;
    width: 34%;
    padding-bottom: 500px;
    margin-bottom: -500px;
} 
```

还有一个小提琴：http: [//jsfiddle.net/FnWG8/](http://jsfiddle.net/FnWG8/)

问题：虽然我在 2 个 div 之间有一条线，但这条线一直延伸到底部，碰到了容器。这是由于不知道 2 个内部 div 的最大高度，因此不得不使用`padding-bottom: 500px`and`margin-bottom: -500px`技巧。

我想要分割两个内部 div 的线，但是在线的底部和包含的 div 之间应该有一些空间：

![在此处输入图像描述](../Images/77e9f55fc08068272d29eb57ddf63c3e.png)

可以做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:33:25.770

看看有没有帮助

用当前的 CSS 替换这个 CSS

```
.container{
    overflow: hidden;
    padding: 20px;
    border: 1px solid blue;
}

.one{
    border-right: 1px solid red;
    float: left;
    width: 65%;
    margin-bottom: 5px;
}

.two{
    float: right;
    width: 35%;
    margin-bottom: 5px;

}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:48:56.353

试试这个 CSS

```
.container{
    overflow: hidden;
    padding: 20px;
    border: 1px solid blue;
}

.one{
    border-right: 1px solid red;
    float: left;
    min-height:10px;
    width: 65%;
    padding-bottom: 40px;
    margin-bottom: -500px;
}

.two{
    float: right; 
    min-height:40px;    
    width: 35%;
    padding-bottom: 500px;
    margin-bottom: -500px;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:49:56.463

试试这个，我认为它可以做你想做的事：

```
.container{
    overflow: hidden;
    padding: 20px;
    border: 1px solid blue;
}

.one{
    border-right: 1px solid red;
    float: left;
    width: 65%;
    display: inline-block;
}

.two{
    border-left: 1px solid red;
    float: left;
    width: 35%;
    display: inline-block;
    margin-left: -1px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T07:03:15.087

更改标记为“.one”的 CSS 规则如下（注释掉填充/边距设置）

```
.one{
    border-right: 1px solid red;
    float: left;
    width: 65%;
    /*padding-bottom: 500px;
    margin-bottom: -500px;*/
} 
```

# android - 我怎样才能将我的指南针方向始终向西？

> ID：10477622
> 
> 赞同：0
> 
> 时间：2012-05-07T06:25:43.233
> 
> 标签：android, google-maps, compass-geolocation, direction

我制作了一张谷歌地图，其中指南针自动指向北方。但我必须让这个指南针的指针始终指向西方。我该怎么做？有什么想法吗？我需要执行任何特殊条款吗？请帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:02:13.427

[方位从北 + 90°] 模(360)

从 MyLocationOverlay 派生您自己的类。覆盖 drawCompass(); 根据需要操作您收到的 Canvas 对象。调用 super.drawCompass() 在新位置绘制指南针。将画布恢复为您找到它的方式。

protected void drawCompass(android.graphics.Canvas canvas,float bearing) 是您想要的关键！取北方位后方位值变化不大

# c++ - 使用整数创建 const char*

> ID：10477624
> 
> 赞同：2
> 
> 时间：2012-05-07T06:25:47.640
> 
> 标签：c++, string, printf

使用可用变量创建“const char *”的最佳方法是什么？例如，函数需要 const char* 作为参数来定位文件，即“invader1.png”。如果我有 5 个不同的入侵者图像，我如何从 1:5 迭代，所以“Invader1.png”..“Invader2.png..etc 等等，所以我想要“invader”+ %d +“.png”

我尝试了 sprintf 和 cast 但无济于事。

希望我的描述有道理，谢谢

用代码更新：

```
 for (int y=0; y<250; y+=50){
            stringstream ss;
            ss << "invader" << (y/50) << ".png";
            const char* rr = ss.str().c_str();
            printf("%s", rr);
            for (int x=0; x<550;x+=50){
                Invader inv(rr, x+50, y+550, 15, 15, 1, false, (y/50 + 50));
                invaders[i] = inv;
                i++;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:29:19.280

使用`std::stringstream`. 像这样的东西：

```
std::stringstream ss;
ss << "invader" << my_int << ".png";
my_func(ss.str().c_str()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:32:02.133

由于您使用的是 C++，因此您可以简单地使用`std::string`然后使用该`c_str()`函数来获取`const char*`可以传递给函数的 a。构造此类字符串的一种简单方法是使用`std::ostringstream`from `<sstream>`：

```
for (int i = 1; i <= 5; ++i) {
    std::ostringstream ss;
    ss << "invader" << i << ".png";
    foo(ss.str().c_str()); // where foo is the specified function
} 
```

你也可以使用 sprintf() 和一个字符数组，但是你需要注意缓冲区的大小。为了完整起见，这里是如何用 sprintf 做同样的事情，但我建议你使用这种`std::string`方法，它更像 C++：

```
for (int i = 1; i <= 5; ++i) {
    char buf[13]; // big enough to hold the wanted string
    std::ostringstream ss;
    sprintf(buf, "invader%d.png", i);
    foo(buf); // where foo is the specified function
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:29:12.650

然后我猜您希望将`int`变量转换为`char`，因此您可以遍历您的invader%d.png 文件。

你试过`itoa`函数吗？

[http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)

# java - java中int数组的ArrayList

> ID：10477628
> 
> 赞同：59
> 
> 时间：2012-05-07T06:26:22.433
> 
> 标签：java, arraylist

我是arraylist概念的新手。我制作了一个简短的程序，如下所示：

```
ArrayList<int[]> arl=new ArrayList<int[]>();
int a1[]={1,2,3};
arl.add(0,a1);
System.out.println("Arraylist contains:"+arl.get(0)); 
```

它给出了输出：`Arraylist contains:[I@3e25a5`

现在我的问题是：

1.  如何显示正确的值，即 1 2 3。
2.  我如何访问数组 a1 的单个元素，即如果我想知道 a1[1] 的值。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-07T06:34:50.713

首先，对于初始化容器，您不能使用原始类型（即`int`；您可以使用`int[]`，但由于您只需要一个整数数组，我认为这没有用）。相反，您应该使用`Integer`，如下所示：

```
ArrayList<Integer> arl = new ArrayList<Integer>(); 
```

要添加元素，只需使用以下`add`功能：

```
arl.add(1);  
arl.add(22);
arl.add(-2); 
```

最后但并非最不重要的一点是，对于打印，`ArrayList`您可以使用以下内置功能`toString()`：

```
System.out.println("Arraylist contains: " + arl.toString()); 
```

如果要访问**i**元素，其中**i**是从 0 到 array-1 长​​度的索引，您可以执行以下操作：

```
int i = 0; // Index 0 is of the first element
System.out.println("The first element is: " + arl.get(i)); 
```

我建议先阅读 Java Containers，然后再开始使用它们。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-07T06:28:01.130

1.  使用[`Arrays.toString( arl.get(0) )`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString(int[])).

2.  `arl.get(0)[1]`

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-06-15T11:03:38.533

比这更简单。

```
List<Integer> arrayIntegers = new ArrayList<>(Arrays.asList(1,2,3));

arrayIntegers.get(1); 
```

在第一行创建对象并在构造函数中将数组参数传递给 List。

在第二行中，您拥有 List 类的所有方法： .get (...)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-30T15:50:56.757

设置：

```
 List<int[]> intArrays=new ArrayList<>();
    int anExample[]={1,2,3};
    intArrays.add(anExample); 
```

要按索引检索ArrayList 中***的单个 int[] 数组：***

```
 int[] anIntArray = intArrays.get(0); //'0' is the index
    //iterate the retrieved array an print the individual elements
    for (int aNumber : anIntArray ) { 
        System.out.println("Arraylist contains:" + aNumber );
    } 
```

要检索ArrayList 中的***所有 int[] 数组***：

```
 //iterate the ArrayList, get and print the elements of each int[] array  
    for(int[] anIntArray:intArrays) {
       //iterate the retrieved array an print the individual elements
       for (int aNumber : anIntArray) {
           System.out.println("Arraylist contains:" + aNumber);
       }
} 
```

可以基于此逻辑执行输出格式化。祝你好运！！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-07T06:37:45.537

在java中，数组是一个对象。因此，对 arl.get(0) 的调用将返回一个原始 int[] 对象，该对象在您对 System.out 的调用中显示为 ascii。

因此，您第一个问题的答案是

```
System.out.println("Arraylist contains:"+Arrays.toString( arl.get( 0 ) ) ); 
```

如果您要查找特定元素，则必须按原样引用返回的 int[] 对象。你的第二个问题的答案是这样的

```
 int[] contentFromList = arl.get(0);
    for (int i = 0; i < contentFromList.length; i++) {
        int j = contentFromList[i];
        System.out.println("Value at index - "+i+" is :"+j);
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-18T15:57:21.247

您必须使用`<Integer>`而不是`<int>`：

```
int a1[] = {1,2,3};
ArrayList<Integer> arl=new ArrayList<Integer>();
for(int i : a1) {
    arl.add(i);        
    System.out.println("Arraylist contains:" + arl.get(0));
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-31T22:45:17.653

每个人都是对的。您不能直接打印 int[] 对象，但也没有必要不使用整数数组的 ArrayList。

使用，

```
Arrays.toString(arl.get(0)) 
```

意味着如果您想在中间插入任何内容（例如逗号），则将 String 对象拆分为子字符串。

这是我认为 amv 从 int 数组的角度寻找的内容。

```
System.out.println("Arraylist contains: " 
    + arl.get(0)[0] + ", " 
    + arl.get(0)[1] + ", " 
    + arl.get(0)[2]); 
```

这个答案对于 amv 来说有点晚了，但仍然可能对其他人有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-06T09:41:03.687

`java.util.Arrays.toString()`将 Java 数组转换为字符串：

```
System.out.println("Arraylist contains:"+Arrays.toString(arl.get(0))); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-11T06:49:22.250

Integer 是包装类，int 是原始数据类型。总是更喜欢在 ArrayList 中使用 Integer。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-07T11:31:29.813

```
ArrayList<Integer> list = new ArrayList<>();
int number, total = 0;

for(int i = 0; i <= list.size(); i++){
    System.out.println("Enter number " + (i + 1) + " or enter -1 to end: ");
    number = input.nextInt();

    list.add(number);

    if(number == -1){
        list.remove(list.size() - 1);
        break;
    }
}
System.out.println(list.toString());

for(int i: list){
    System.out.print(i + "  ");
    total+= i;
}
System.out.println();
System.out.println("The sum of the array content is: " + total); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-30T13:46:41.777

[对于没有经验的人，我决定在这里](https://www.hackerrank.com/challenges/java-arraylist/problem?isFullScreen=true)添加一个示例来演示如何根据这个问题输入和输出整数数组的 ArrayList 。

```
 ArrayList<Integer[]> arrayList = new ArrayList<Integer[]>();
    while(n > 0)
    {
        int d = scan.nextInt();
       Integer temp[] = new Integer[d];
        for (int i = 0 ; i < d ; i++)
        {
            int t = scan.nextInt();
            temp[i]=Integer.valueOf(t);
        }
        arrayList.add(temp);
        n--;
    }//n is the size of the ArrayList that has been taken as a user input & d is the size 
    //of each individual array.

     //to print something  out from this ArrayList, we take in two 
    // values,index and index1 which is the number of the line we want and 
    // and the position of the element within that line (since the question
    // followed a 1-based numbering scheme, I did not change it here)

    System.out.println(Integer.valueOf(arrayList.get(index-1)[index1-1])); 
```

[感谢这里](https://stackoverflow.com/a/31967630/6941400)对这个问题的回答，我得到了正确的答案。我相信这令人满意地回答了 OP 的问题，尽管有点晚了，并且可以作为经验较少的人的解释。

# ios - 通过视图控制器向实体添加数据

> ID：10477631
> 
> 赞同：0
> 
> 时间：2012-05-07T06:26:42.283
> 
> 标签：ios, core-data, entity

我有一个案例，我应该通过`UIViewController`. 我设计了我的数据库模型（实体和属性）。我正在通过`UIViewController`. 我应该`didFinishLaunchingwithOptions`在 appDelegate.m 的方法中添加什么？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch   
    return YES;
} 
```

对于`TUTViewController`（我自己的视图控制器 - `UIViewController`），我使用下面的代码插入对象。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    NSString *stripped1 = [response stringByReplacingOccurrencesOfString:@"\r" withString:@""];
    NSMutableArray *rows = [NSMutableArray arrayWithArray:[stripped1 componentsSeparatedByString:@"\n"]];
    NSMutableArray *contentArray = [NSMutableArray arrayWithCapacity:[rows count]]; 
    NSMutableArray *contentArray1 = [NSMutableArray arrayWithCapacity:[rows count]];

    NSArray *components;
    NSLog(@"count:%d",[rows count]);

    for (int i=0;i<[rows count]; i++) {

       if(i == 0 || [[rows objectAtIndex:i] isEqualToString:@""]){
          continue;
       }

       components = [[rows objectAtIndex:i] componentsSeparatedByString:@","];
       id x = [components objectAtIndex:0] ;
       id y = [components objectAtIndex:1];
       id z = [components objectAtIndex:2];

       [contentArray addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:x,@"X",y,@"Y", nil]];
       [contentArray1 addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:x,@"X",z,@"Y", nil]];

       [newManagedObject setValue:[x] forKey:@"timeStamp"];
       [newManagedObject setValue:[y] forKey:@"beat"];
       [newManagedObject setValue:[z] forKey:@"rate"];

       // Save the context.
       NSError *error = nil;
       if (![context save:&error]) {

           NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
           abort();

           NSLog(@"Contents of Uterus Contraction: %@",contentArray);
           NSLog(@"Contents of Heart Beat: %@",contentArray1);
       }    
    }
} 
```

有什么我想念的吗？我以错误结束：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到实体名称“FetalData”的 NSManagedObjectModel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:25:53.953

您是否设置了核心数据堆栈或`UIManagedDocument`对象？

如果您没有设置托管对象模型，这可能是问题所在。这意味着您可能没有加载定义`FetalData`实体的托管对象模型。有关详细信息，请参阅[insertnewobjectforentityforname](https://stackoverflow.com/questions/1780929/insertnewobjectforentityforname)。

我真的建议创建一个空项目，让 Xcode 为你创建 Core Data 的东西。通过这种方式，您可以看到代码是如何工作的。

**一些笔记**

你为什么用一个`NSFetchResultsController`？

在方法结束时移动`save`调用。通过这种方式，您可以避免多次往返磁盘。

如果你想开始使用 Core Data，我建议你[core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。

希望能帮助到你。

# android - java.lang.NoClassDefFoundError：org.ksoap2.serialization.SoapSerializationEnvelope

> ID：10477632
> 
> 赞同：2
> 
> 时间：2012-05-07T06:26:49.610
> 
> 标签：android, ksoap2

我正在使用 android 版本（r-18）在我的 android 应用程序中调用 web 服务。但我在 Soap 序列化中遇到错误。我正在尝试 ksoap2 版本（2.5.4、2.4、2.6.4、2.5.8）。

错误信息;

```
05-07 02:20:26.920: W/dalvikvm(4852): threadid=1: thread exiting with uncaught exception (group=0x4001d888)
05-07 02:20:26.920: E/AndroidRuntime(4852): FATAL EXCEPTION: main
05-07 02:20:26.920: E/AndroidRuntime(4852): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapSerializationEnvelope
05-07 02:20:26.920: E/AndroidRuntime(4852):     at com.android.StringBuilderActivity.<init>(StringBuilderActivity.java:31)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at java.lang.Class.newInstanceImpl(Native Method)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at java.lang.Class.newInstance(Class.java:1429)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2582)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2684)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.app.ActivityThread.access$2300(ActivityThread.java:126)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.os.Looper.loop(Looper.java:123)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at android.app.ActivityThread.main(ActivityThread.java:4632)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at java.lang.reflect.Method.invokeNative(Native Method)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at java.lang.reflect.Method.invoke(Method.java:521)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
05-07 02:20:26.920: E/AndroidRuntime(4852):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T06:33:27.050

将您的库文件名更改为“/libs”并检查它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T06:33:37.267

我遇到了同样的问题....转到 Build Path >> Configure Build Path >> Order and export >> Select KSOAP2 lib 。（我假设你已经添加了 KSOAP2 Jar）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T06:35:24.890

`libs`我相信从 ADT 版本 17 开始，Android 依赖项会自动从项目根目录中的文件夹中收集。尝试将您的 SOAP 库移动到该文件夹​​并清理您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T06:29:49.443

好像您忘记添加外部 JAR 文件了。

尝试右键单击您的项目文件夹，转到构建路径并将 JAR 文件添加到项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-18T10:16:09.683

`libs`在您的项目中创建一个名为的目录

现在将您的 .jar 文件复制并粘贴到`libs`目录中。

右键单击项目构建路径以添加库

从 libs 目录中选择并确定

运行 -> 成功享受

# python - 两次具有与参数相同的异常类的“except”语句

> ID：10477634
> 
> 赞同：3
> 
> 时间：2012-05-07T06:27:07.973
> 
> 标签：python, exception, syntax, django-orm

在 Python 中，如何`except`在语句中两次使用具有相同异常名称的块，`try/except`而无需将代码包装到另一个`try/except`块中？

简单的例子（这里**每次**调用都`pages.get`可能引发异常）：

```
try:
    page = pages.get(lang=lang)
except Page.DoesNotExist:
    if not lang == default_lang:
        page = pages.get(lang=default_lang)
    else:
        raise Page.DoesNotExist
except Page.DoesNotExist:
    page = pages[0] 
```

现在，在我的 Django 应用程序中，我会这样处理（但我不想`try`在这里“额外”块）：

```
try:
    try:
        page = pages.get(lang=lang)
    except Page.DoesNotExist:
        if not lang == default_lang:
            page = pages.get(lang=default_lang)
        else:
            raise Page.DoesNotExist
except Page.DoesNotExist:
    page = pages[0] 
```

感谢任何比上面更好的处理代码！:)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:58:57.203

虽然，我目前无法为您的用例找到更好的方法，但 Python 的`try/except`语句有一些额外的功能：

```
try:
  pass
  # run your code
except:
  pass
  # run your error handling, etc.. 
else:
  pass
  # is run whenever an exception didn't happen
finally:
  pass
  # will be executed always (good for cleaning up) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:33:20.937

您也不能这样做并期望`elif`执行：

```
if foo == bar:
  # do "if"
elif foo == bar:
  # do "elif" 
```

真的没有理由这样做。你的`except`关心也一样。

这是您的第一个代码片段的反汇编 Python 字节码：

```
 13           0 SETUP_EXCEPT            10 (to 13)

 14           3 LOAD_GLOBAL              0 (NameError)
              6 RAISE_VARARGS            1
              9 POP_BLOCK           
             10 JUMP_FORWARD            44 (to 57)

 15     >>   13 DUP_TOP             
             14 LOAD_GLOBAL              0 (NameError)
             17 COMPARE_OP              10 (exception match)
             20 POP_JUMP_IF_FALSE       35
             23 POP_TOP             
             24 POP_TOP             
             25 POP_TOP             

 16          26 LOAD_GLOBAL              0 (NameError)
             29 RAISE_VARARGS            1
             32 JUMP_FORWARD            22 (to 57)

 17     >>   35 DUP_TOP             
             36 LOAD_GLOBAL              0 (NameError)
             39 COMPARE_OP              10 (exception match)
             42 POP_JUMP_IF_FALSE       56
             45 POP_TOP             
             46 POP_TOP             
             47 POP_TOP             

 18          48 LOAD_CONST               1 (1)
             51 PRINT_ITEM          
             52 PRINT_NEWLINE       
             53 JUMP_FORWARD             1 (to 57)
        >>   56 END_FINALLY         
        >>   57 LOAD_CONST               0 (None)
             60 RETURN_VALUE 
```

很明显，第一个`COMPARE_OP`to `NameError`（在偏移 17 处）将捕获异常并在第二个这样的比较之后跳转到（在偏移 36 处）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T08:24:18.807

我建议您创建一个功能来为您获取页面，例如。像这样：

```
def get_page(language):
    if language == default_lang:
        lang_list = [language]
    else:
        lang_list = [language, default_lang]

    for lang in lang_list:
        try:
            return pages.get(lang=lang)
        except Page.DoesNotExist:
            pass

    return pages[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T07:23:07.840

块中引发的异常`except`不会由相同的`try`/`except`块处理，因此您的示例无法工作。即使可以，您的示例实际上也会引发无限循环，因为第一个示例只会`except NameError`再次捕获从自身内部引发的异常，然后`NameError`再次引发，以此类推。

此功能是设计使然，否则不可能编写一个异常处理程序来检查异常，然后向外引发异常。`except`块只处理从块内抛出的异常`try`。如果要处理从块内抛出的异常`except`，则该块需要位于`try`块内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T06:36:00.150

Python 或任何 Sane 语言中的异常永远不会按照您的预期方式工作。每次引发异常时，它都应追溯堆栈/范围。在当前范围内引发的任何异常每个堆栈/范围只能处理一次。认为是这样，每个作用域都有一个异常处理机制，带有一个过滤器功能，它可以简单地按照匹配提到的顺序过滤异常。如果发生匹配，则按照指定的异常处理程序进行处理。如果任何异常被重新抛出或生成，它应该由下一个异常处理机制处理，该机制就在下一个范围内。

查看示例，我想知道您为什么要通过引发另一个异常而不是在 else 块中处理它来使事实复杂化

```
try:
    page = pages.get(lang=lang)
except Page.DoesNotExist:
    if not lang == default_lang:
        page = pages.get(lang=default_lang)
    else:
        page = pages[0] 
```

# javascript - 为 alt-keypress 停止事件冒泡到 Chrome 浏览器

> ID：10477636
> 
> 赞同：2
> 
> 时间：2012-05-07T06:27:25.757
> 
> 标签：javascript, google-chrome, dom-events, event-bubbling

[（编写此脚本](https://github.com/Manishearth/Manish-Codes/blob/master/StackExchange/MathJaxButtons.user.js)时遇到）

相关代码：

```
window.keyPressEventLambda=function(key,callback){ //just a lambda function wrapper so I can generate handlers on the fly
return function (zEvent) {
        if (zEvent.altKey  && ( zEvent.which == key.charCodeAt(0)||zEvent.which == key.toUpperCase().charCodeAt(0))) {
            callback(this.id);
            return false;
        }
        return true;
}
} 
```

用例：

```
$("textarea").live("keydown",keyPressEventLambda("C",function(id){/*blah blah blah */}) 
```

所以，如果我使用`Alt`- `C`，回调函数会自行运行。

现在，由于`return false;`, 冒泡被抑制了，页面本身的一切都很方便-花花公子。

但是，Chrome（Windows 上的 20.0.1128.0 或 19.0.1084.41）仍将 alt 键捕获为 Chrome 浏览器快捷方式，并且由于实际上不存在`Alt`-的快捷方式`C`，因此它会失败并发出令人讨厌的“ping”声。

它适用于`Ctrl`-shortcuts，但我不想使用这些，因为大多数`Ctrl`-shortcuts 都被采用了。

有什么办法可以防止浏览器对我的脚本生气？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T02:09:36.867

这是一个已知的 Chrome 问题。请参阅[http://code.google.com/p/chromium/issues/detail?id=105500](http://code.google.com/p/chromium/issues/detail?id=105500)

# yii - Yii：不同模块的 CMenu 项

> ID：10477637
> 
> 赞同：0
> 
> 时间：2012-05-07T06:27:33.793
> 
> 标签：yii, cmenu

我想在 Layout 中创建一个菜单，其中的项目链接到其他不同的模块。

例如：项目“产品”链接到产品模块中的操作，项目“服务”链接到服务模块中的操作。

当我设置它时它不起作用`'url'=>('product/<controllerID>/<actionID>')`，`'url'=>('service/<controllerID>/<actionID>')`因为一旦我们进入产品模块并单击菜单“服务”，URL就变成了

`index.php?r=product/service/<controllerID>/<actionID>`

代替

```
index.php?r=service/<controllerID>/<actionID> 
```

这将是404错误。（当然，因为服务模块不在产品模块中，但 URL 使它看起来像那样）。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:53:45.333

检查[`createUrl()`](http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail)文档：

> URL 路由。这应该是“ControllerID/ActionID”的格式。如果 ControllerID 不存在，则当前控制器 ID 将作为路由的前缀。如果路由为空，则假定它是当前操作。如果控制器属于一个模块，则模块 ID 将作为路由的前缀。（**如果您不想要模块 ID 前缀，则路由应以斜杠“/”开头。**）

最后一行告诉我们一切。为您做的最好的事情是从所有路线开始`/`：

```
'url'=>array('/<moduleID>/<controllerID>/<actionID>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:45:11.010

检查这个

```
'url'=>$this->createUrl('/<moduleId>/<controllerID>/<actionID>') 
```

# winforms - Silverlight 未在 WebBrowser 控件中加载

> ID：10477640
> 
> 赞同：2
> 
> 时间：2012-05-07T06:27:43.310
> 
> 标签：winforms, silverlight, browser, embed

有一个带有 silverlight 控件的网页，当我们使用 IE、chrome 等浏览器时，它们都可以正常工作。

我们开发一个桌面程序，在win窗体中嵌入一个WebBrowser控件，导航到网页，silverlight对象没有初始化，只显示silverlight logo，就像silverlight还没有安装，但实际上已经安装了在职的。

是silverlight的限制还是IE或WebBrowser控件中应该有某种安全设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:18:24.367

我在浏览器以及“客户端”应用程序（WPF，使用 webbrowser 类型控件）中运行 silverlight。我可以告诉你，在我的项目中没有任何问题，我不需要更改任何设置——当我在本地主机上运行它时，IE 会提示我在 Intranet 模式下运行。

您应该使用 fiddler 查看导航中使用的确切 URL，并查看 Web 服务器是否返回任何错误。

我知道这不是确切的帮助，但我可以确认它应该有效。希望这可以帮助您缩小搜索范围。

# c - 生产者/消费者（有界缓冲区）可以通过 openMP 加速吗？

> ID：10477643
> 
> 赞同：1
> 
> 时间：2012-05-07T06:27:59.643
> 
> 标签：c, parallel-processing, openmp

我正在为作业实现生产者/消费者问题，我必须将顺序算法与并行算法进行比较，而我的并行算法似乎只能以与顺序算法相同或慢的速度运行。我得出的结论是，使用队列是一个限制因素，它不会加速我的算法。

是这种情况还是我只是编码错误？

```
int main() {
    long sum = 0;
    unsigned long serial = ::GetTickCount();
    for(int i = 0; i < test; i++){
        enqueue(rand()%54354);
        sum+= dequeue(); 
    }
    printf("%d \n",sum);

    serial = (::GetTickCount() - serial);
    printf("Serial Program took: %f seconds\n", serial * .001);
    sum = 0;
    unsigned long omp = ::GetTickCount();

    #pragma omp parallel for num_threads(128) default(shared) 
    for(int i = 0; i < test; i++){
        enqueue(rand()%54354);
        sum+= dequeue(); 

    }

    #pragma omp barrier //joins all threads
    omp = (::GetTickCount() - omp);
    printf("%d \n",sum);
    printf("OpenMP Program took: %f seconds\n", omp * .001);
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:36:24.790

**问题 1：**

你`rand()`在平行区域内。

**`rand()`不是线程安全的。**它使用全局/静态变量。所以从多个线程同时调用它会导致意外的（可能是未定义的）行为。

除此之外，并发调用导致的数据竞争`rand()`将导致大量缓存一致性停滞。这可能是放缓的根源。

* * *

**问题2：**

**`enqueue()`和`dequeue()`线程安全吗？**

如果不是，那么您需要先修复它。如果是，你是如何同步的？

如果它只是一个关键区域，一次只允许一个线程访问队列，那么这种方式就违背了并行性的全部目的。

* * *

**问题 3：**

此行在`sum`每次迭代中修改变量：

```
sum += dequeue(); 
```

请注意，所有线程将同时执行此操作。所以你需要声明`sum`为一个归约变量。

# c++ - 其他陈述重演？

> ID：10477649
> 
> 赞同：0
> 
> 时间：2012-05-07T06:28:22.497
> 
> 标签：c++, if-statement, adventure

我正在为最终项目进行文本冒险，并且我有很多 If 语句可以检查您是否输入了诸如*"look lantern" 之*类的内容，然后它将显示有关它的信息等。

我想这样做，所以如果你输入类似*“srjfdrszdgrf”的*内容，它只会告诉你“你不能那样做”。在底部有一个`else`语句，但它似乎无法正常工作，而是`else`在每个`if`.
难道我做错了什么？

```
if (command == "look_lantern")
{
    cout << "It's an ordinary lantern.\n";
}
if (command == "look_door")
{
    cout << "It's a large wooden door.\n";
}
else
{
    cout << "You can't do that.\n";
} 
```

所以当你输入*“look lantern”*时，它会说：

> 这是一个普通的灯笼。
> 你不能那样做。

我在`else`这里错误地使用了该语句吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:30:42.170

是的，你有两个块，第一个：

```
if (command == "look_lantern")
{
    cout << "It's an ordinary lantern.\n";
} 
```

第二个：

```
if (command == "look_door")
{
    cout << "It's a large wooden door.\n";
}
else
{
    cout << "You can't do that.\n";
} 
```

如果您只想执行一个块，则仅在第一个块失败时才需要执行第二个块：

```
if (command == "look_lantern")
{
    cout << "It's an ordinary lantern.\n";
} else if (command == "look_door")
{
    cout << "It's a large wooden door.\n";
}
else
{
    cout << "You can't do that.\n";
} 
```

这两个都被执行，因为在第一个之后没有什么停止执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:32:26.630

在这种情况下，您应该使用`else if`

```
if (command == "look_lantern")
{
    cout << "It's an ordinary lantern.\n";
}
else if (command == "look_door")
{
    cout << "It's a large wooden door.\n";
}
else
{
    cout << "You can't do that.\n";
} 
```

如果您以旧方式编写代码，则会执行第一个 if，并输出：“It's a common lantern”。

之后，第二个`if`将被执行，它不匹配，所以，`else`分支被执行，输出：“你不能那样做。”

# google-app-engine - 我的应用可以部署用户上传的应用吗？

> ID：10477650
> 
> 赞同：1
> 
> 时间：2012-05-07T06:28:26.747
> 
> 标签：google-app-engine, deployment

我正在做我的课程项目，我是唯一一个选择 GAE 的人。现在，我只是不知道如何满足这个课程项目的要求。

我的应用程序是一个家庭作业提交系统，允许学生上传他们的作业。我可以使用 GAE 实现几乎所有东西。但是，您知道，**学生上传的也是网络应用程序，并且要求说我的应用程序应该允许用户上传他们的应用程序，并且我的应用程序可以部署他们的应用程序并提供教师 URL 以进行检查。**

我真的不知道如何实现这一点。谁能解释这怎么会发生？

如果有办法做到这一点。用户应该上传什么样的文件，战争？顺便提一句。假设用户上传了一个用 Python 编写的 google appEngine 应用程序。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:55:06.093

这在技术上是可行的，但 App Engine 服务条款禁止上传其他应用程序的应用程序。

# amazon-ec2 - 具有 AWS Auto-Scaling 服务的良好系统监控工具

> ID：10477651
> 
> 赞同：1
> 
> 时间：2012-05-07T06:28:27.287
> 
> 标签：amazon-ec2, monitoring, autoscaling

我正在寻找一个与 AWS Auto Scaling 服务配合使用的优秀系统监控工具。我需要的是当我的新实例启动时，监控代理应该自动注册到监控服务器。我已经尝试过[nagios](http://www.nagios.org)，[sensu](http://www.sonian.com)进行测试，但我发现没有更多设施可以提供代理在监控服务器上自动注册。还有其他一些建议，例如 HypricHQ、OpenNMS，但我没有找到那种灵活性。是否有任何其他工具可以提供该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:22:31.217

在对这个主题进行了一些研发之后，我选择了 AWS 提供的[CloudWatch](http://aws.amazon.com/cloudwatch/)服务。我所做的是制作自己的监控程序，从 AWS CloudWatch 获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T15:57:01.763

Zabbix 使用能够在 zabbix 服务器上自动注册的活动代理[，](https://www.zabbix.com/documentation/2.0/manual/discovery/auto_registration)使用相同原理的其他系统可能具有相同的能力。但是您必须找到一种方法来删除过时的缩减服务器

在传统的以服务器为中心的监控系统中，应该使用外部脚本从 aws api 获取服务器列表，也许还可以通过标签（如[shinken 中的标签）获取这些服务器的角色](https://github.com/shinken-monitoring/mod-import-aws)

每次扩展或缩减规模时，都有一种方法可以同步监控服务器。亚马逊中的自动缩放可以在启动或销毁机器时发布 SNS 通知，您可以在 SNS 中创建主题并分配[自动缩放通知](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/ASGettingNotifications.html)，并放置一个能够“刷新”监控服务器主机列表的 HTML 端点。

# html - 最小高度 div 无法正常工作 CSS

> ID：10477652
> 
> 赞同：0
> 
> 时间：2012-05-07T06:28:32.513
> 
> 标签：html, css

我有一个 div 的以下 css 代码，我想要一个最小高度，然后根据需要增加高度。我不知道为什么，但是 CSS 在任何浏览器中都不起作用！我试图用谷歌搜索答案，但还是不行！

任何帮助将非常感激！

```
 .container {
width: 1024px;
margin-right: auto;
margin-left: auto;
left: auto;
right: auto;
background-color: #FFFFFF;
box-shadow: 0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow: 0 2px 12px rgba(34,25,25,0.4);
moz-box-shadow: 0 1px 2px rgba(34,25,25,0.4);
background-repeat: repeat-y;
height: auto !important;
height: 1024px;
min-height: 1024px;

border-bottom-width: 2px;
border-bottom-style: solid;
border-bottom-color: #999;
padding-bottom:60px;
position:relative;
} 
```

容器 div 应该随着这个 div 的高度的增加而增长，当数据输入到 mysql 表中时会增加，然后在这个 div 中显示：

```
.udis {
float: left;
height: auto;
width: 680px;
position: relative; 
box-shadow: 0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow: 0 2px 12px rgba(34,25,25,0.4);
moz-box-shadow: 0 1px 2px rgba(34,25,25,0.4);
margin-left:10px;
min-height:620px;
height:auto!important;
height:620px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:30:20.927

尝试删除该行：

```
height: 1024px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:31:12.203

您应该从 css 中删除 height 属性

```
width: 1024px;
margin-right: auto;
margin-left: auto;
left: auto;
right: auto;
background-color: #FFFFFF;
box-shadow: 0 1px 3px rgba(34,25,25,0.4);
-webkit-box-shadow: 0 2px 12px rgba(34,25,25,0.4);
moz-box-shadow: 0 1px 2px rgba(34,25,25,0.4);
background-repeat: repeat-y;
min-height: 1024px;

border-bottom-width: 2px;
border-bottom-style: solid;
border-bottom-color: #999;
padding-bottom:60px;
position:relative; 
```

# php - 如何通过单击另一个页面上的按钮在文本字段上添加预格式化文本

> ID：10477659
> 
> 赞同：0
> 
> 时间：2012-05-07T06:29:31.903
> 
> 标签：php, jquery, mailer

新手在这里。使用 php。所以我有一个按钮。单击后将转到我已经完成的联系页面。但我需要自动将文本放入消息的文本字段中。所要做的就是单击发送，因为它已经为他们格式化了。如何使按钮自动将文本添加到文本字段中？我现在意识到它可能需要一个 onlick 事件或按钮上的任何类似事件，以便在被调用的联系页面上的某些文本字段上发布值。我希望我能更好地描述我的问题。多谢你们。

说这是我的按钮：

```
<input type="submit" name="button" id="button" value="Submit" /> 
```

在提交时将转到联系页面并填写我需要预先格式化的一些文本字段的值。

这是我的示例邮件脚本。

```
<?php 
//print_r($_POST);
if(isset($_POST['_save'])) {
    $name = $_POST['name'];
    $email = $_POST['email'];
    $company = $_POST['company'];
    $message = $_POST['message'];
    $subject = $_POST['subject'];

    if (empty($name) || empty($email) || empty($subject) || empty($message)) {
        if (empty($name))
            $error['name'] = "Please enter your Full Name";
        if (empty($email))
            $error['email'] = "Please enter a valid Email Address";
        if (empty($company))
            $error['company'] = "Please enter Your Company Name";
        if (empty($subject))
            $error['subject'] = "Please Write a Subject";

    }
    else { //if not empty

        $headers="From: {$email}\r\nReply-To: {$email}"; //create headers for email
        $content="Name: ".$name."\r\n\r\nCompany: ".$company."\r\n\r\nSubject: ".$subject."\r\n\r\nMessage: ".$message;
        mail('email@domain.com',$subject,$content,$headers); //mail the message;
        $success = "Thank you! You're email has been sent.";
        #done;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:38:07.533

在您的上一页（例如邮件的输入表单）上使用它；

```
<textarea name="message"> <?php echo 'the text message'; ?> </textarea> 
```

或者简单地说，

```
<textarea name="message"> the text message </textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:40:39.917

当我阅读您的问题时，我假设您已经想到了这个流程：

应该是按钮

```
<button type="submit" name="go_to_next"></button> 
```

或者

```
<input type="submit" name="go_to_next" value="Submit" /> 
```

这将重定向到contacts.php，其中`<input>`存在字段

```
<input type="text" name="name" />
<input type="text" name="email" />
<input type="text" name="company" />
<input type="text" name="subject" />
<textarea cols="30" rows="10" name="message></textarea> 
```

现在（只是一个假设）您希望在加载时拥有此字段的默认值，如果是，那么您所要做的就是设置`<input value="" />`

```
<input type="text" name="name" value="Pepe Smith" />
<input type="text" name="email" value="pepesmith@mymail.com" />
<input type="text" name="company" value="My Company" />
<input type="text" name="subject" value="My Subject" />
<textarea cols="30" rows="10" name="message>My Message</textarea> 
```

您可以为此设置动态值，但我不确定您希望这些值来自何处。

编辑：

我创建了一个通过按钮中的 onClick 事件填充字段的[演示](http://jsfiddle.net/XeU3d/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T07:25:33.533

我不确定，但如果我正确理解您的要求。那么可能你想要这个。

1.  您在第 x 页，并且第 x 页有页面有一个按钮。
2.  当您单击一个按钮时，您将转到联系页面。
3.  您可以使用 get 或 post 方法传递一些数据，您希望在联系页面的 textarea 上显示该消息。

如果我是对的并且上述情况是正确的，那么您可以这样做：

```
<textarea name="message"><?php echo $_request['message']; ?></textarea> 
```

`$_request`可以同时获取帖子或获取数据。

谢谢

# sql-server - 当我有不同值的列时如何获得不同的结果

> ID：10477662
> 
> 赞同：0
> 
> 时间：2012-05-07T06:29:48.377
> 
> 标签：sql-server, sql-server-2005

我有 2 张桌子，其中一张是“请求”，我有向其发送好友请求的用户，或者我收到了好友请求。在第二张表中，我为自己保留了入围用户的记录。现在，我想一起选择所有这些用户（我请求过的用户、请求过我的用户、我入围的用户）。我为此使用联合查询并根据列类型区分它们

```
select Distinct userid,type,status from
(
select RequestSenderId as UserId,'requestedme' as type,'1' as status from tblrequest where RequestReceiverId=@UserId 

union
select RequestReceiverId as UserId,'requestedbyme' as type,'2' as status from tblrequest where RequestSenderId=@UserId 

union
select Shortlisteduserid as UserId,'Shortlisted' as type,'0' as status from tblshortlist where userid=@UserId
) 
```

问题是，如果我也将其列入候选名单，我将无法获得不同的用户 ID，并且他也向我发送了请求。

任何人都可以建议如何从结果中获得不同的用户 ID。优先级是按要求获取用户 ID，而不是入围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:34:23.827

You can use a ranking function (ROW_NUMBER or DENSE_RANK) to prioritise results.

```
SELECT UserId, Type, Status
FROM (
    SELECT UserId, Type, Status
    , Priority = ROW_NUMBER() OVER (PARTITION BY UserID ORDER BY Type DESC)
    FROM (
        SELECT ReceiverId, RequestSenderId, 'requestedme', 1 FROM tblRequest
        UNION ALL
        SELECT SenderId, RequestReceiverId, 'requestedbyme', 2 FROM tblRequest
        UNION ALL
        SELECT UserId, Shortlisteduserid ,'Shortlisted', 0 FROM tblShortlist
    ) U (FilterUserId, UserId, Type, Status)
    WHERE FilterUserId = @UserId
) R
WHERE Priority = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:39:42.120

这可以帮助你。

```
select userid,type,status from
(
select Distint  RequestSenderId ,'requestedme' as type,'1' as status from tblrequest where ReceiverId=@UserId 

union ALL
select Distint  RequestReceiverId ,'requestedbyme' as type,'2' as status from tblrequest where SenderId=@UserId 

union ALL
select Distint  Shortlisteduserid ,'Shortlisted' as type,'0' as status from tblshortlist where userid=@UserId
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:49:54.450

下面的呢？虽然它可能不是最有效的解决方案..

```
WITH requestedMe (userid, type, status)
    AS (
        SELECT RequestSenderId AS UserId,'requestedme' AS type,'1' AS status 
        FROM tblrequest 
        WHERE ReceiverId=@UserId)
    requestedByMe (userid, type, status)
    AS (
        SELECT RequestReceiverId AS UserId,'requestedbyme' AS type,'2' AS status 
        FROM tblrequest 
        WHERE SenderId=@UserId
            AND NOT EXISTS (
                SELECT *
                FROM requestedMe
                WHERE requestedMe.userid = tblrequest.RequestReceiverId))
    shortListed (userid, type, status)
    AS (
        SELECT Shortlisteduserid AS UserId,'Shortlisted' AS type,'0' AS status 
        FROM tblshortlist 
        WHERE userid=@UserId
            AND NOT EXISTS (
                SELECT *
                FROM requestedMe
                WHERE requestedMe.userid = tblshortlist.Shortlisteduserid)
            AND NOT EXISTS (
                SELECT *
                FROM requestedByMe
                WHERE requestedByMe.userid = tblshortlist.Shortlisteduserid))
SELECT userid, type, status
FROM requestedMe
UNION
SELECT userid, type, status
FROM requestedByMe
UNION
SELECT userid, type, status
FROM shortListed 
```

# android - 第二次单击选项卡时不调用活动

> ID：10477668
> 
> 赞同：0
> 
> 时间：2012-05-07T06:30:06.057
> 
> 标签：android, android-tabhost

我正在开发一个应用程序，我必须在其中显示五个选项卡，并且在每个选项卡上我调用不同的活动。在我的最后一个选项卡中，我显示菜单。

**主要问题是我的活动仅在选项卡更改事件上被调用**。当我第一次单击最后一个选项卡时，它会显示一个菜单，并且在选择任何菜单后，如果我再次单击该选项卡，则什么也没有发生。

那么如何解决这类问题呢？还有其他方法可以完成这项任务吗？
任何帮助将不胜感激。谢谢

**这是我的代码：**

```
public class More extends ActivityGroup{

     Button btn1;
     ExpandableListView elw;
     Context ctx;
     public ListView modeList;
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            ctx=this;

           Toast.makeText(More.this,"in more",200).show();
           setContentView(R.layout.more);

           AlertDialog.Builder builder = new AlertDialog.Builder(this);
           builder.setTitle("More Option");

            modeList = new ListView(this);
           String[] stringArray = new String[] { "About", "Settings","Invite By Message","Privacy Policy","Deactivate Account","Exit" };
           ArrayAdapter<String> modeAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, stringArray);
           modeList.setAdapter(modeAdapter);

           builder.setView(modeList);
           final Dialog dialog = builder.create();

           dialog.show();
modeList.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        // TODO Auto-generated method stub
        String item=(String) modeList.getItemAtPosition(position);
        Toast.makeText(More.this,item,200).show();
        switch(position) {
        case 0:
            setContentView(R.layout.about);
            dialog.dismiss();
          TabHost tabHost = welcome.self.getTabHost();
          tabHost.setCurrentTab(4);

              // tabHost.setCurrentTab(4);
            break;
        case 1:
            setContentView(R.layout.settings);
            dialog.dismiss();
            break;
        case 2:
            setContentView(R.layout.messages);
            dialog.dismiss();
            break;
        case 3:
            setContentView(R.layout.policy);
            dialog.dismiss();
            break;
        case 4:
            Toast.makeText(More.this,"Deactivate the Account",200).show();
            dialog.dismiss();
            break;
        default:
             Toast.makeText(More.this,"Exit the application",200).show();
             dialog.dismiss();
             welcome.self.finish();
            }               
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:53:12.423

```
TabHost tabs = (TabHost)findViewById(R.id.TabHost01);

        tabs.setup();

        TabHost.TabSpec spec1 = tabs.newTabSpec("tag1");

        spec1.setContent(R.id.tab1);
        spec1.setIndicator("TAB1");

        tabs.addTab(spec1);

        TabHost.TabSpec spec2 = tabs.newTabSpec("tag2");
        spec2.setContent(R.id.tab2);
        spec2.setIndicator("TAB2");

        tabs.addTab(spec2); 
```

将此添加到您的方法中，有关详细信息，请查看[http://www.mkyong.com/android/android-tablayout-example/](http://www.mkyong.com/android/android-tablayout-example/)。

如果您有问题，请告诉我，如果解决了，请单击右键。您的活动必须包含布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:56:22.600

```
modeList.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        // TODO Auto-generated method stub
        String item=(String) modeList.getItemAtPosition(position);
        Toast.makeText(More.this,item,200).show();
        switch(position) {
        case 0:
            setContentView(R.layout.about);
            dialog.dismiss();
         // TabHost tabHost = welcome.self.getTabHost();-> Intent abc;

         // tabHost.setCurrentTab(4);---->abc.getClass(More.this , NewClass.class);

              // tabHost.setCurrentTab(4);
            break;
        case 1:
            setContentView(R.layout.settings);
            dialog.dismiss();
            break;
        case 2:
            setContentView(R.layout.messages);
            dialog.dismiss();
            break;
        case 3:
            setContentView(R.layout.policy);
            dialog.dismiss();
            break;
        case 4:
            Toast.makeText(More.this,"Deactivate the Account",200).show();
            dialog.dismiss();
            break;
        default:
             Toast.makeText(More.this,"Exit the application",200).show();
             dialog.dismiss();
             welcome.self.finish();
            }               
    }
}); 
```

现在你的 NewClass.java

```
public class NewClass extends TabActivit{

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

           setContentView(R.layout.newclass);

Resources ressources = getResources(); 
        TabHost tabHost = getTabHost(); 

        // Android tab
        Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
        TabSpec tabSpecAndroid = tabHost
          .newTabSpec("Android")
          .setIndicator("", ressources.getDrawable(R.drawable.icon_android_config))
          .setContent(intentAndroid);

        // Apple tab
        Intent intentApple = new Intent().setClass(this, AppleActivity.class);
        TabSpec tabSpecApple = tabHost
          .newTabSpec("Apple")
          .setIndicator("", ressources.getDrawable(R.drawable.icon_apple_config))
          .setContent(intentApple);

        // Windows tab
        Intent intentWindows = new Intent().setClass(this, WindowsActivity.class);
        TabSpec tabSpecWindows = tabHost
          .newTabSpec("Windows")
          .setIndicator("", ressources.getDrawable(R.drawable.icon_windows_config))
          .setContent(intentWindows);

        // Blackberry tab
        Intent intentBerry = new Intent().setClass(this, BlackBerryActivity.class);
        TabSpec tabSpecBerry = tabHost
          .newTabSpec("Berry")
          .setIndicator("", ressources.getDrawable(R.drawable.icon_blackberry_config))
          .setContent(intentBerry);

        // add all tabs 
        tabHost.addTab(tabSpecAndroid);
        tabHost.addTab(tabSpecApple);
        tabHost.addTab(tabSpecWindows);
        tabHost.addTab(tabSpecBerry);

        //set Windows tab as default (zero based)
        tabHost.setCurrentTab(2);
    }

}

} 
```

这里有 4 个选项卡，您可以根据需要使用任意数量的选项卡。在 android 清单中注册。确保布局文件中的 tabhost 与代码中的 id 相同。

如果您接受我的回答，请单击右键。

# c - C中的代码和平 - 静态问题

> ID：10477681
> 
> 赞同：-3
> 
> 时间：2012-05-07T06:31:43.077
> 
> 标签：c, methods, static

如何用 C 编写这种代码？

```
public static Encoding GetEncoding (
    int codepage
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:36:38.670

C 中没有 public。默认情况下，函数具有外部链接，除非您明确将它们标记为静态。在使用它时，最好让一个原型对你的函数可见（可能在头文件中），以避免调用者和现实之间的期望不匹配:-)

例如，以下将是有效的 C：

```
encoding.h:
    typedef void * Encoding;
    Encoding getEncoding (int);

encoding.c:
    #include "encoding.h"
    Encoding getEncoding (int codePage) {
        return 0;
    } 
```

如果您的意图是将 C++（或其他 OO 语言）代码转换为 C，则有一些方法可以做到这一点，例如[这里](https://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c/351745#351745)，但它不适合胆小的人 :-) 特别是如果您支持正确的 OO 概念，如继承和多态性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:36:48.283

C 中没有正式的方法，`static`修饰符意味着别的东西。也没有访问控制修饰符。所以：

```
Encoding *GetEncoding (int codepage) {

} 
```

在 java 中，返回值可能是一个对象引用，所以在 C 中你会使用`*pointer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:45:34.533

在 C 中，没有访问控制，也没有`this`. 所以`public`并且`static`已经是唯一的做事方式。

您可能希望头（接口）文件包含原型

```
extern Encoding *GetEncoding ( int codepage ); 
```

并且源（实现）文件应该有

```
Encoding *GetEncoding ( int codepage ) {
    return & masterEncodingList[ codepage ]; /* example implementation */
} 
```

* * *

头文件还可能定义`Encoding`：

```
struct Encoding {
    const char *name;
    /* other fields */
}; 
```

并且源文件可能会定义编码

```
Encoding masterEncodingList[] = {
    { "Swahili", /* other fields */ },
    { "Portuguese", /* ... */ },
    /* ... */
}; 
```

玩得开心啊！

# java - 如何在 Jspinner 中制作时间格式？

> ID：10477688
> 
> 赞同：1
> 
> 时间：2012-05-07T06:32:07.597
> 
> 标签：java, swing, jspinner

如何制作像这样的时间格式时时：分分：秒秒，毫秒毫秒毫秒

当我使用 NET bean 的可视 GUI 制作这个微调器时，只使用一个 Jspinner。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T08:31:26.290

您需要同时使用两者，`SpinnerDateModel`并`JSpinner.DateEditor`使用正确的日期格式模式：

```
public class JSpinnerDateFormat extends JFrame {
    public JSpinnerDateFormat() {
        super("JSpinner Date Format");
        JSpinner spinner = new JSpinner();
        spinner.setModel(new SpinnerDateModel());
        spinner.setEditor(new JSpinner.DateEditor(spinner, "HH:mm:ss.SSS"));
        add(spinner);
        pack();
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String[] args) {
        new JSpinnerDateFormat();
    }
} 
```

# c# - 如何在c#中获取声音数据样本值

> ID：10477697
> 
> 赞同：2
> 
> 时间：2012-05-07T06:33:15.533
> 
> 标签：c#, audio, sampling, bitconverter

我需要获取 WAV 文件的声音数据的样本值，以便通过使用这些样本值，我需要每秒获取该声音数据的幅度值。

重要提示：有什么方法可以使用 Naudio 库或 wmp 库获取音频数据样本值？

我以这种方式获取样本值：

```
byte[] data = File.ReadAllBytes(File_textBox.Text);
            var samples=new int[data.Length];
            int x = 0;
            for (int i = 44; i <data.Length; i += 2)
            {
                samples[x] = BitConverter.ToInt16(data, i);
                x++;
            } 
```

但我得到的负值更像（-326260）。这是对还是错？我的意思是样本值可以是负数还是负数，如果它是正确的，那么它是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:07:51.903

NAudio 可以为您执行此操作，它在库中（我认为它是 WaveStream 或 WaveReader 类，或类似的东西）。我可以推荐它的使用，如果它不是太多的开销。

如果您想自己动手，并且想处理任意波形文件，则必须阅读 WAV 文件格式，并自己分析标头。

虽然*通常*WAV 文件包含 16 位样本，但并非必须如此，并且根据确切的格式，它们可能以小端或大端存储。

标头包含有关采样率、通道数、每个样本的位数、每个样本的字节数等信息，这些信息允许您进行实际数学运算以获取一个样本。

# apache-flex - 如何在 Flex 中隐藏打印对话框？

> ID：10477703
> 
> 赞同：1
> 
> 时间：2012-05-07T06:33:40.237
> 
> 标签：apache-flex, printing, dialog, adobe

是否可以在 flex 中隐藏打印对话框？我正在使用 FlexPrintJob 类。

这是我的代码：

```
var print:FlexPrintJob = new FlexPrintJob();
print.printAsBitmap = true;

if ( print.start() ) {  
 print.addObject( img as UIComponent, FlexPrintJobScaleType.SHOW_ALL );
 print.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:26:35.033

您可以使用 printjobs 类中的 start2()

```
 import flash.printing.PrintJob;
 import flash.printing.PrintUIOptions;

 var myPrintJob:PrintJob = new PrintJob();
 var uiOpt:PrintUIOptions = new PrintUIOptions();
 uiOpt.minPage = 1;
 uiOpt.maxPage = 3;
 var accepted:Boolean = myPrintJob.start2(uiOpt); 
```

# xml - 如何 替换 xslt 中的元素？

> ID：10477706
> 
> 赞同：-2
> 
> 时间：2012-05-07T06:33:51.903
> 
> 标签：xml, xslt

```
<page>
  <p>
    Republic of India (Bhārat Gaṇarājya),[c] is a country in South Asia.
    <br/>It is the seventh-largest country by geographical area.
    <br/> the second-most populous country with over 1.2 billion people, and the most populous democracy in the world.
  </p>
</page> 
```

我需要`<br>`用`<p>`元素替换。

```
<p>Republic of India (Bhārat Gaṇarājya),[c] is a country in South Asia.</p>
    <p>It is the seventh-largest country by geographical area.</p>
    <p>the second-most populous country with over 1.2 billion people, and the most populous democracy in the world.</p> 
```

这个怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:06:36.350

一种方法是使用键匹配 p 元素的所有子元素**，按最前面的****br**元素（如果没有前面的**br**元素，则按父**p**元素）对它们进行分组。

 **```
 <xsl:key 
    name="bits" 
    match="p/node()[not(self::br)]" 
   use="generate-id((..|preceding-sibling::br[1])[last()])"/> 
```

然后，可以匹配**p内的所有****br**元素，并输出 key 内的以下非 br 元素

 **```
<p>
    <xsl:copy-of select="key('bits', generate-id())"/>
<p> 
```

对于第一批没有前面**br**元素的子元素，您也会遇到这种情况。

这是完整的 xslt

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>
   <xsl:key name="bits" match="p/node()[not(self::br)]" use="generate-id((..|preceding-sibling::br[1])[last()])"/>

   <xsl:template match="p">
      <p>
         <xsl:apply-templates select="key('bits', generate-id())"/>
      </p>
      <xsl:apply-templates select="br"/>
   </xsl:template>

   <xsl:template match="p/br">
      <p>
         <xsl:apply-templates select="key('bits', generate-id())"/>
      </p>
   </xsl:template>

   <xsl:template match="page">
      <xsl:apply-templates select="@*|node()"/>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<p>       
   Republic of India (Bhārat Gaṇarājya),[c] is a country in South Asia.       
</p>
<p>
   It is the seventh-largest country by geographical area.       
</p>
<p>
   the second-most populous country with over 1.2 billion people, and the most populous democracy in the world.       
</p> 
```

这也应该处理嵌套的**p**元素，以及在文本中保留除**p**和** 之外的其他 HTML。****

# ruby - 上帝和初始化脚本的问题

> ID：10477707
> 
> 赞同：1
> 
> 时间：2012-05-07T06:34:05.573
> 
> 标签：ruby, thin, god

我正在用上帝监控一台瘦服务器。如果我从命令行运行上帝：

```
god -c /path/to/config 
```

然后事情就开始了。

但是，如果我使用 init 脚本启动上帝：

```
/etc/init.d/god start 
```

事情不工作。上帝抱怨脚本以非零退出代码退出。

我的初始化脚本在这里：

[https://gist.github.com/e99a3dd703d8cfda5d0b](https://gist.github.com/e99a3dd703d8cfda5d0b)

知道可能是什么问题吗？初始化文件有问题吗？

# unix - 从 PIPE 写入和读取结构时出错

> ID：10477711
> 
> 赞同：1
> 
> 时间：2012-05-07T06:34:25.587
> 
> 标签：unix, network-programming, ipc

我有一个客户端服务器程序，客户端在 PIPE 上为服务器编写命令。从服务器读取命令时，它只读取命令的第一个字符并引发错误。谁能帮我这个？

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <errno.h>
#include <stdlib.h>
#include <sys/ipc.h>
#include <sys/msg.h>
#include <string.h>
#include <sys/wait.h>
#include <mqueue.h>
#include <sys/stat.h>
#include "Functions.h"

#define MSGBUFFER_SIZE 50000

pid_t serverPid;
pid_t clientPid;

typedef struct msgbuf {

int messageLength;
int messageType;
char messageText[MSGBUFFER_SIZE];

} Message_buf;

int writePIPE(int fd, Message_buf *inputMessage){

printf("\n In write pipe message length :%d",inputMessage->messageLength);
printf("\n In write pipe message Data :%s",inputMessage->messageText);
ssize_t n=write(fd,inputMessage,inputMessage->messageLength);
printf("\n Size :%d", n);
return n;
}

ssize_t readPIPE(int fd, Message_buf *outputMessage)
{
ssize_t len;
ssize_t n;
if((n=read(fd,outputMessage,sizeof(outputMessage)))==0)
{
    printf("\n Error");
    return 0;
}
if((len=outputMessage->messageLength)>0)
{
    printf("\n Length ---->:%d",len);
    if((n=read(fd,outputMessage->messageText,strlen(outputMessage->messageText)))!=len)
        printf("\n ERRRRROR expected %d got %d",len,n);
}
//printf("\n In Read PIPE: %s",outputMessage->messageText);
return len;
}
void Server(int readfd,int writefd)
{
Message_buf server_MessageBuf;

ssize_t length;
if((length=readPIPE(readfd,&server_MessageBuf))==0)
{
    printf("\n End of file while reading pathname");
}
//server_MessageBuf.messageText[length]='\0';

printf("\n LENGTH :%d",server_MessageBuf.messageLength);
printf("\n Printing in server: %s\n",server_MessageBuf.messageText);

}
void Client(int readfd,int writefd)
{

char inputFileName[MAX_SIZE];
char inputOperation[MAX_SIZE];
char *cCommandInput = NULL;
char *fileOperation = NULL;
char *operation = (char *) malloc(MAX_SIZE);

int commandValidateStatus = 0;
int commandInterpretationStatus=0;
Message_buf client_MessageBuf;
for(;;)
{
    while(1)
    {
        cCommandInput = acceptInput();
        fileOperation = (char *) malloc(sizeof(cCommandInput));
        strcpy(fileOperation,cCommandInput);

        /**Function call to determine operation read/delete/exit/invalid choice and filename*****/
        commandInterpretationStatus = interpretCommand(cCommandInput,
                inputOperation, inputFileName);

        operation = inputOperation;

        /**Function call to validate the input command******/
        commandValidateStatus = validateCommand(
                commandInterpretationStatus, inputOperation, inputFileName);

        if(commandValidateStatus==-1)
        {
            printf("\n Invalid Operation");
        }

        /*Exit command entered***/
        if (commandValidateStatus == 1)
        {
            /*Code to clear resources */
            kill(serverPid,SIGKILL);
            kill(clientPid,SIGKILL);
            exit(0);
        }
        /***Read or Delete****/
        if (commandValidateStatus == 2 || commandValidateStatus == 3)
        {
            printf("\n Read or Delete\n");

            strcpy(client_MessageBuf.messageText,fileOperation);
            client_MessageBuf.messageLength=strlen(fileOperation);
            client_MessageBuf.messageType=1;
            if((writePIPE(writefd,&client_MessageBuf))<0)
            {
                printf("\n Error writing on client side ");
            }

            //read(readfd,*client_MessageBuf,sizeof(client_MessageBuf));
            //printf("\n Reding server responsed");
            //printf("%s",client_MessageBuf.messageText);
        }
    }
}

}

int main()
{
int pipe1[2],pipe2[2];
pipe(pipe1);
pipe(pipe2);

pid_t pid;
pid=fork();
serverPid=pid;

if(pid==0)
{
    /*Call Server*/
    close(pipe1[1]);
    close(pipe2[0]);
    Server(pipe1[0], pipe2[1]);   
}
else
{
    close(pipe1[0]);
    close(pipe2[1]);
    Client(pipe2[0],pipe1[1]);      
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:32:31.950

看起来代码写入和读取`struct msgbuf`不正确：

```
typedef struct msgbuf {
    int messageLength;
    int messageType;
    char messageText[MSGBUFFER_SIZE];
} Message_buf;

// ...

strcpy(client_MessageBuf.messageText,fileOperation);
client_MessageBuf.messageLength=strlen(fileOperation);
client_MessageBuf.messageType=1;
if((writePIPE(writefd,&client_MessageBuf))<0)

// ....

int writePIPE(int fd, Message_buf *inputMessage){
    printf("\n In write pipe message length :%d",inputMessage->messageLength);
    printf("\n In write pipe message Data :%s",inputMessage->messageText);
    ssize_t n=write(fd,inputMessage,inputMessage->messageLength);
    printf("\n Size :%d", n);
    return n;
} 
```

上面写的部分`struct msgbuf`只写`messageLength`结构的第一个字节，不包括`messageLength`和`messageType`成员的长度，即它截断对象。

阅读时：

```
ssize_t readPIPE(int fd, Message_buf *outputMessage)
{
    // ...
    if((n=read(fd,outputMessage,sizeof(outputMessage)))==0) 
```

它只读取`sizeof(outputMessage)`字节，即指针的大小，而不是对象。即使您通过将其更改为`sizeof(*outputMessage)`that 来修复它也不够，因为它会期望读取完整的对象，而写入部分会截断对象。

修复它的一个好的开始是将消息分成两部分：标头和有效负载。header 是一个固定大小的结构，例如：

```
typedef struct {
    int messageType;
    int payloadLength;
} MessageHeader; 
```

有效载荷是头部后面的可变长度部分。这样，它将首先将整个标头对象写入管道，然后`payloadLength`是有效负载字节。读取时，它将首先再次读取整个标头，然后准确读取`payloadLength`字节。

另请注意，`read()`and`write()`调用可能读取或写入的次数少于请求的次数，因此需要通过保持读取或写入来明确处理这种情况，直到处理完确切的字节数。

# java - 将整数时间戳转换为java日期

> ID：10477714
> 
> 赞同：7
> 
> 时间：2012-05-07T06:34:45.303
> 
> 标签：java, datetime

我有以下整数形式的时间戳

```
1333125342 
```

我可以使用 SQL 转换它：

```
select DATEADD(ss, FlOOR(1333089223/86400)*86400, '1970-01-01 00:00:00') AS Date 
```

如何在java中转换它？这样它就会返回值：

```
3/30/12 12:18:43 PM 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T06:40:39.900

假设它是自 1970 年 1 月 1 日以来的时间（以秒为单位）。你可以试试

```
String dateAsText = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")
                          .format(new Date(1333125342 * 1000L)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:40:00.497

如果是毫秒值，则表示自以来经过的毫秒数`January 1, 1970 00:00:00.000 GMT`

然后只需使用

```
new java.util.Date(millis); 
```

如果您需要特定格式

```
3/30/12 12:18:43 PM 
```

然后使用`SimpleDateFormat`格式化`Date`为所需的格式化`String`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:43:30.293

该时间戳包含自 1970-1-1 0:00 UTC 以来经过的秒数。

要将其转换为 Java 日期，请实例化一个新`Date`对象[（请参阅 Java 文档）](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)并对其进行调用`setTime()`。请注意，这`setTime`需要毫秒而不是秒，因此您必须将时间戳乘以 1000。

该`toString()`方法产生可读的东西。

# java - 将 java se 转换为 Spring MVC 是否容易？我应该这样做吗？

> ID：10477721
> 
> 赞同：0
> 
> 时间：2012-05-07T06:35:28.713
> 
> 标签：java, jsp, spring-mvc

我有一个分层的 Java SE Web 应用程序。每个数据库表都有自己的类，我在 JDBC 中手动编写更新、插入和删除。

将我的项目迁移到 Spring 以从 JPA 中受益是否容易？
我应该这样做吗？该项目的一个关键目标是完全灵活且易于开发，而现在正是如此，迁移有什么好处。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:38:42.253

如果它没有坏，请不要修复它:)

除非有令人信服的理由，否则我不会重写您现有的应用程序。

但是，如果您将桌面 Swing（“胖客户端”）应用程序重新编写为 Web 应用程序，那么仅此一项就足以证明投资学习曲线以尝试 Spring。

恕我直言...

# cakephp - Cake php 文本助手问题

> ID：10477725
> 
> 赞同：0
> 
> 时间：2012-05-07T06:35:48.317
> 
> 标签：cakephp, cakephp-1.3

Cake php 文本助手问题

在视图.ctp

```
$userName = 'Jusnitdustinwq'; 
echo $this->Text->truncate( $userName, 8, array('ending' => '...', 'exact' => false)); 
```

在 cake php [truncate](http://book.cakephp.org/1.3/view/1469/Text#truncate-1625)的文档中，它写成好像 'exact' 是 'false'，然后`$userName`不会在单词中间被截断，但这里没有单词或`$username`正在显示，而只是`...`在上面的示例中显示

如何纠正它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:10:12.267

它按预期工作。在您的示例中，如果您设置`'exact'=>false`，它会尝试**在 8 个字符处/之前**的某处找到一个空格以在此处截断，但**没有**. 因此，它可以将您的字符串保持在 8 个字符以下并且不截断单词的唯一方法是删除所有文本并仅使用“...”。

**相反，试试这个：**

```
$userName = 'Jusnitdustinwq';
if(strpos($userName, ' ')) {
    echo $this->Text->truncate( $userName, 8, array('exact' => false));
} else {
    echo $this->Text->truncate( $userName, 8);
} 
```

请注意，您不需要指定`'ending'`，除非您想将其更改为默认值以外的其他值，即`'...'`; 与 k 相同`'exact'`，它的默认值为`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T08:00:30.613

尝试这个：

```
echo $this->Text->truncate($userName , 8, array('ending' => '...')); 
```

**或者**

```
echo $this->Text->truncate($userName , 8, array('ending' => '...', 'exact' => true)); 
```

参数引起的问题`exact`，因为`$userName`不是由空格分隔的单词集合，并且`exact => true`适用于该类型的输入。

如果你尝试如下，将看到事实：

```
$userName = 'Ju snit dustinwq'; 

echo $this->Text->truncate($userName , 8, array('ending' => '...', 'exact' =>  false)); 
```

# java - 与 sum() 函数一起使用的休眠 hql 查询返回空值

> ID：10477732
> 
> 赞同：0
> 
> 时间：2012-05-07T06:36:26.313
> 
> 标签：java, hibernate, hql

嗨，我尝试执行此查询，它在 mysql 数据库中正常运行。通过使用休眠它返回的空值你能解释一下吗提前感谢karthik

```
string = "SELECT sum(feed1Consumed),sum(feed2Consumed)"
         + "FROM com.ebiodata.upstream.pojo.UpstreamMammalianFermentationTempUpdate"
         + " where upstreamHeader.id=\'" + serializableId + "\'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:24:46.900

如果所有求和行的求和值为 null 或未找到任何行，sum() 将返回 null。

`hibernate.cfg.xml`可以使用`<property name="show_sql">true</property>`查看hibernate生成的SQL语句。

我不明白你为什么将 id 作为字符串进行比较。`serializableId`大概是一个数字。您可以进行数字比较

```
" where upstreamHeader.id=" + serializableId; 
```

# javascript - 如何在另一个jsp中将值从servlet传递给javascript

> ID：10477737
> 
> 赞同：1
> 
> 时间：2012-05-07T06:37:07.003
> 
> 标签：javascript, ajax, jsp, servlets

我有一个注册表单，我在其中使用 AJAX 验证“首选登录 ID”，因此它搜索用户表并显示它是否可用，并显示在文本框“用户名可用”或“用户名不可用”旁边。

我的要求是当它不可用时，我想将文本“用户名不可用”从 Servlet 传递回 JSP 中的 javascript，以便我可以阻止用户继续表单。我相信我可以使用 AJAX 做到这一点。但我不知道该怎么做。有人可以用代码帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:47:46.823

我将使用 JQuery，特别是[get()](http://api.jquery.com/jQuery.get/)方法作为示例

这是一个伪解决方案（没有测试，但这是我会使用的基本方法）

**JavaScript**

```
var userIsAvailable = false;
function checkUsernameAvailability(userIdToCheck){
    $.get("pathToServlet",{userId: userIdToCheck},function(resultMessage){
         userIsAvailable = resultMessage=="username available" //this is bad practice, just an example, pass true/false      
         $("#userAvailabilityMessage").text(resultMessage);
    }
 }); 
```

**HTML**

```
<form onsubmit="if(!userIsAvailable){alert('user is not available')}; return userIsAvailable">
    <label for="userId">preferred login id<label>
    <input id="userId" ... type="text" onblur="checkUsernameAvailability(this.value)"> 
    <div id="userAvailabilityMessage" />
    ...
</form> 
```

**小服务程序（部分）**

```
@WebServlet("/pathToServlet")
public class MyServlet extends HttpServlet {
     protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            String result;

            if(isUserNameAvailable(request.getParameter("userId"))){
                  result = "username available";
            }else{
                  result = "username not available";
            }
            response.setContentType("text/plain");
            response.getWriter().print(result);
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:40:42.037

您需要在消息中发送带有一些标志的对象。您可以为此使用 json。在 servlet 方面：

```
// This object we will transfere from java to javascript
public class Message {
    private boolean error;
    private String errorMessage;

    // Getters and setters ommited
}

// Servlet code - return content

Message message = new Message();
message.setError(true);
message.setErrorMessage("Your error message");
Gson gson = new Gson(); // GSON - java json library from Google. I prefer it
String content = gson.toJson(message);
response.setContentType("text/json");
response.getWriter().print(content); 
```

最后是javascript代码：

```
function processRequest() {
    var result = jQuery.ajax ({
        url: "your.url",
        method: "post",
        async: false,
        data: "your=data&andsomedate=somedata"
    });

    // Creating object from json
    var message = jQuery.parseJSON(result.responseText);

    // Now we can access all object fields:
    if(message.error) {
        alert("Error message: " + message.errorMessage);
    }
} 
```

# android - Maps Place Click 将该位置保存到 Android Listview？

> ID：10477741
> 
> 赞同：1
> 
> 时间：2012-05-07T06:37:14.970
> 
> 标签：android, maps, android-listview

我在 Android 程序中显示谷歌地图。当我点击地图中的一个地方时，如何将这些地方保存到 Android Listview。

通过这个，我正在地图中获取搜索位置

```
package com.commonsware.android.nooer;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnCancelListener;
import android.content.DialogInterface.OnClickListener;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

public class SampleMpas extends MapActivity {

MapView mapView;

MapController mapController;

GeoPoint mgeoPoint;

Drawable marker;

MyLocationOverlay mLocationOverlay;

MotionEvent e;
public void changeMap(String area)
{
 MapController mc=mapView.getController();
GeoPoint myLocation=null;
double lat = 0;
double lng = 0;
try
{

Geocoder g = new Geocoder(this, Locale.getDefault());

java.util.List<android.location.Address> result=g.getFromLocationName(area, 1);
if(result.size()>0){

Toast.makeText(SampleMpas.this, "country: " + String.valueOf(result.get(0).getCountryName()), Toast.LENGTH_SHORT).show();
lat = result.get(0).getLatitude();
lng = result.get(0).getLongitude();

}            
else{
Toast.makeText(SampleMpas.this, "record not found", Toast.LENGTH_SHORT).show();
return;
}
}
catch(IOException io)
{
Toast.makeText(SampleMpas.this, "Connection Error", Toast.LENGTH_SHORT).show();
}
myLocation = new GeoPoint(
(int) (lat * 1E6),
(int) (lng * 1E6));
Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
mc.animateTo(myLocation);
mc.setZoom(15);
mapView.invalidate();
}

@Override
protected void onCreate(Bundle icicle) {

    // TODO Auto-generated method stub
    super.onCreate(icicle);
    setContentView(R.layout.main);

    Button btnSearch=(Button) findViewById(R.id.btnSearch);
    btnSearch.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
        EditText txtSearch=(EditText)findViewById(R.id.txtMapSearch);
        String area=txtSearch.getText().toString();
        Toast.makeText(SampleMpas.this, "Click-" + String.valueOf(area), Toast.LENGTH_SHORT).show();
        SampleMpas.this.changeMap(area);

                    }

        });

    mapView = (MapView) findViewById(R.id.map);

    mapController = mapView.getController();

    mapView.setBuiltInZoomControls(true);
    marker = getResources().getDrawable(R.drawable.marker);

    marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker
            .getIntrinsicHeight());

    mapView.getOverlays().add(new MapOverlay(marker));

    mLocationOverlay = new MyLocationOverlay(this, mapView);

    mapView.getOverlays().add(mLocationOverlay);

}

@Override
protected Dialog onCreateDialog(int id) {

    // TODO Auto-generated method stub

    switch (id) {
        case 0:
            return new AlertDialog.Builder(this).setTitle("Are You Want save this place As?").setIcon(
                    R.drawable.icon).setPositiveButton("Favorite",
                    new OnClickListener() {

                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    }).setCancelable(true).setNegativeButton("Cancel",
                    new OnClickListener() {

                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    }).setCancelable(true).setNeutralButton("Business", new OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                        }
                    })

            .setOnCancelListener(new OnCancelListener() {

                public void onCancel(DialogInterface dialog) {

                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Dismiss",
                            Toast.LENGTH_SHORT).show();
                }

            }).create();

        default:
            break;
    }
    return null;
        }

@Override
protected boolean isRouteDisplayed() {

    // TODO Auto-generated method stub
    return false;
}

Point scrPoint;

private GeoPoint getPoint(double lat , double lon) {

    return (new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6)));
}

class MapOverlay extends
        com.google.android.maps.ItemizedOverlay<OverlayItem> {

    List<OverlayItem> ListofGeopoints = new ArrayList<OverlayItem>();

    public MapOverlay(Drawable defaultMarker ) {

        super(defaultMarker);
        double lat = 0;
        double lang = 0;
        ListofGeopoints.add(new OverlayItem(getPoint(lat, lang),
                "IN", "India"));
        populate();

    }

    @Override
    protected boolean onTap(int index) {

    switch (index) {
            case 0:
                Toast.makeText(getApplicationContext(), "GeoLocation : 0",
                        Toast.LENGTH_LONG).show();
                showDialog(0);
            break;
        }

        return true;
    }

    String add = "";

    List<Address> add_List = new ArrayList<Address>();

    private void getAddress() {

       /* add_List = ReverseGeocode
                .getFromLocation(35.594227, -105.223618, 2);
*/
    }

    @Override
    protected OverlayItem createItem(int i) {
        return (ListofGeopoints.get(i));
    }
    @Override
    public int size() {
        return ListofGeopoints.size();
    }
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:48:09.600

您可以通过以下方式获取触摸位置的地理点

```
 @Override
public boolean onTap(GeoPoint p , MapView mapView) 
```

编写一个派生自 Overlay 类的类并覆盖 onTap() 方法。然后，您可以将叠加层添加到您的 MapView。当您在地图上的某个位置使用 Tab 时，代表您点击位置的 GeoPoint 对象将传递给 onTap() 方法。将此地理点保存在您的数据库中并从数据库中填充您的列表视图。

示例代码：覆盖类：

```
class MapOverlay extends
        com.google.android.maps.ItemizedOverlay<OverlayItem> {

    @Override
    public boolean onTap(GeoPoint p , MapView mapView) {

        // TODO Auto-generated method stub
    Log.i("Latitude" , String.valueOf(p.getLatitudeE6()/1E6));
    Log.i("Longitude", String.valueOf(p.getLongitudeE6()/1E6));

        return super.onTap(p, mapView);
    } 
```

# iphone - 有没有办法在 iPhone 的 UITabBarController 中设置第 4 个选项卡更多选项卡

> ID：10477742
> 
> 赞同：2
> 
> 时间：2012-05-07T06:37:30.437
> 
> 标签：iphone, ios, ios4, uitabbarcontroller, uitabbar

我的 iOS 应用中有 6 个标签。我需要将第 4 个选项卡设置为更多，并在第 4 个选项卡中将 3 个选项卡显示为表格。有什么简单的方法可以做到这一点。告诉 iphone-sdk 将第 4 个选项卡视为最后一个选项卡和“更多”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:43:11.193

让你的第四个标签是这样的：

```
[[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemMore tag:0]; 
```

# java - 适用于多个设备的 Java Web 应用程序

> ID：10477747
> 
> 赞同：0
> 
> 时间：2012-05-07T06:38:06.060
> 
> 标签：java

在经历了类似的问题后，我问了这个问题

1.  [多设备演示技术](https://stackoverflow.com/questions/9897813/how-to-optimize-website-for-mobile-devices)

2.  [如何最好地在 Web 应用程序中实现对多个设备的支持](https://stackoverflow.com/questions/1881547/presentation-technology-for-multiple-devices)

3.  [如何针对移动设备优化网站？](https://stackoverflow.com/questions/2480139/how-best-to-implement-support-for-multiple-devices-in-a-web-application)

阅读回复后，我明白最好不要使用许多花哨的框架，而是选择一个非常轻量级的网站

我已经确定在后端使用 Spring MVC，在前端使用 jsp。

完成此操作后，我需要了解更多细节。

假设我想渲染一个数据表，我是使用纯 jsp 还是可以使用一些框架，例如

[jQuery 移动](http://jquerymobile.com/)。框架是否会为我提供易于编码和可维护性、功能性，同时它是否会在移动电话设备上以相当快的速度呈现？

数据表必须具备过滤、排序、分页等功能。

我以数据表组件为例。可能还有其他组件，比如树、图表等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:57:46.957

个人观点：将您的数据与您的观点分开。例如，让您的所有数据都可以作为 Json 以及通过基于 Json 的协议访问（JsonRpc 是一个很好的简单协议）。这将减少服务器端所需的时间/代码量。然后，您可以开发多个应用程序，例如 Web/移动应用程序。HTML Web 应用程序定义的抽象现在被桌面应用程序（例如 WPF）和当然移动应用程序复制。

# c# - WPF 应用程序中的线程

> ID：10477748
> 
> 赞同：-1
> 
> 时间：2012-05-07T06:38:06.147
> 
> 标签：c#, wpf, multithreading

我有 C# 的 WPF 应用程序有后端。我希望使它成为一个多线程的。

它有一个组合框列出不同的东西。用户可以异步选择它们。

假设组合框 1 包含 1.ABC 2.BCD 3.CDE

用户选择 ABC 并开始执行，如果他在单击 ABC 之前单击 BCD，它将再次开始执行。

像那样，我想要一个多线程的 wpf 应用程序。

```
 private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        System.Windows.Forms.MessageBox.Show( "Executing " + newList[ comboBox1.SelectedIndex]  + " test case" );

        this.IsEnabled = false;

        Thread objThread = new Thread(() =>
        {
            Process p = new Process();
            p.StartInfo.WorkingDirectory = listofDirs[comboBox1.SelectedIndex] + "\\" + newList[comboBox1.SelectedIndex] + "\\" + @"\bin\Release";
            p.StartInfo.FileName = listofDirs[comboBox1.SelectedIndex] + "\\" + newList[comboBox1.SelectedIndex] + "\\" + @"\bin\Release" + "\\" + newList[comboBox1.SelectedIndex] + ".exe";
            p.StartInfo.CreateNoWindow = false;
            p.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;
            p.Start();
            p.WaitForExit();
        });

        objThread.IsBackground = true;

        objThread.Priority = ThreadPriority.AboveNormal;

        objThread.Start();

        this.IsEnabled = true;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T08:05:21.220

同样：*您不能从创建它们的线程之外的任何其他线程访问 UI 控件。*如果你想这样做，你需要使用`Control.Invoke`Windows 窗体或`Dispatcher.Invoke`WPF。

在您的情况下，您的线程尝试访问在 中选择的项目的索引`ComboBox`，这是无效的跨线程操作。把它从你的线程方法中移出，你就设置好了。

# python - Python在该行添加文本

> ID：10477750
> 
> 赞同：-1
> 
> 时间：2012-05-07T06:38:15.520
> 
> 标签：python, file

我有一个文件，其中包含以下行：

```
//hva_SaastonJakaumanMuutos/printData/reallocationAssignment/changeUser/firstName> 
```

我想在行尾添加“John”。

我编写了以下代码，但由于某种原因它不起作用，

```
def add_text_to_file(self, file, rowTitle, inputText):
    f = open("check_files/"+file+".txt", "r")
    fileList = list(f)
    f.close()

    j = 0
    for row in fileList :
        if fileList[j].find(rowTitle) > 0 :
            fileList[j]=fileList[j].replace("\n","")+inputText+"\n"
            break
        j = j+1

    f = open("check_files/"+file+".txt", "w")
    f.writelines(fileList)
    f.close() 
```

你知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:48:56.717

`str.find``0`如果您正在搜索的文本在开头找到，则可能会返回。毕竟，它返回匹配开始的索引。

所以你的条件应该是：

```
if fileList[j].find(rowTitle) >= 0 : 
```

**编辑：**

上面的更正可以节省一天的时间，但如果你以*正确*的方式，pythonic 方式做事，那就更好了。

*   如果您正在寻找文本中的子字符串，您可以使用`foo in bar`比较。它将是`True`如果`foo`可以在`bar`和`False`其他地方找到。
*   在 Python 中你很少需要计数器。`enumerate`内置是你的朋友。
*   您可以将迭代和编写结合起来，消除不必要的步骤。
*   `strip`或者[`rstrip`](http://docs.python.org/library/stdtypes.html#str.rstrip)在你的情况下比替换更好。
*   `with`对于 Python 2.6+，在处理文件时最好使用语句。它将以正确的方式处理文件的关闭。对于 Python 2.5，您需要`from __future__ import with_statement`
*   有关常用的命名约定，请参阅[PEP8 。](http://www.python.org/dev/peps/pep-0008/)

这是一个清理后的版本：

```
def add_text_to_file(self, file, row_title, input_text):
    with open("check_files/" + file + ".txt", "r") as infile:
        file_list = infile.readlines()

    with open("check_files/" + file + ".txt", "w") as outfile:
        for row in file_list:
            if row_title in row:
                row = row.rstrip() + input_text + "\n"
            outfile.write(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:03:15.253

你没有提供太多信息，所以即使我不会使用下面的代码（因为我确信有更好的方法）它可能有助于解决你的问题。

```
import os.path

def add_text_to_file(self, filename, row_title, input_text):
    # filename should have the .txt extension in it
    filepath = os.path.join("check_files", filename)
    with open(filepath, "r") as f:
        content = f.readlines()

    for j in len(content):
        if row_title in content[j]:
            content[j] = content[j].strip() + input_text + "\n"
            break

    with open(filepath, "w") as f:
        f.writelines(content) 
```

# matlab - MATLAB 奈奎斯特图错误

> ID：10477751
> 
> 赞同：0
> 
> 时间：2012-05-07T06:38:34.290
> 
> 标签：matlab, nyquist

当我尝试绘制奈奎斯特图时

```
1 / (s * (s^2+s+4) ) 
```

曲线不向虚轴移动`w=infinity`。
它远离 MATLAB 中的虚轴。当分母中有“s”项时，我会得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:09:29.997

我认为你不明白发生了什么：

您构建的系统从无穷大开始，因为您在 0 处有一个极点，然后随着 w 趋于无穷大，它移动到 0。您可以使用波特图仔细检查这一点。对于您的奈奎斯特图，使用数据光标来跟踪事物的变化。

您的困惑可能在于奈奎斯特使用负频率，因此，当它开始 -Inf 时，它为 0，当 w 接近 0 时，它环绕无穷大，然后当 w 变为 +inf 时，它再次返回 0。 困惑？好的！我讨厌奈奎斯特情节，我对它们没有耐心

![在此处输入图像描述](../Images/d6bbda50699fce6860da4325e5de76ce.png)

# php - 如何从邮件收件箱中删除mysql表行

> ID：10477753
> 
> 赞同：-2
> 
> 时间：2012-05-07T06:39:00.303
> 
> 标签：php, mysql, email, inbox

我想从邮件收件箱中删除 mysql 表行，是否可以！，如果可以，我如何从任何邮件收件箱帐户中删除服务器数据库中的表行，请告诉我解决方案

表结构：

```
id  usrname  password  status usercat
1   xxxxxxx  xxxxxxx   new    1
2   uuuuuuu  uuuuuuu   new    5

$del_qry= mysql_query("DELETE FROM table_name WHERE some_column=some_value") 
```

注册后在我的站点中，注册人会收到警报邮件，站点管理员也会收到注册用户详细信息的邮件。因此，如果管理员想从他的邮件帐户中删除第二个用户（用户名 - uuuuuu）。

我该怎么做，请告诉我我是新来的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:18:18.733

您发送给管理员的电子邮件必须包含如下链接：

```
http://www.example.org/admin/remove_account.php?id=123 
```

`123`注册的用户在哪里，并且`remove_account.php`是单击链接时将加载的脚本。

在脚本中，您将拥有如下内容：

```
mysql_query("DELETE FROM table_name WHERE id=" . mysql_real_escape_string($_GET['id'])); 
```

**警告**

谨言慎行。上述链接应受以下一项保护：

*   用户和密码保护（使用 Apache 或 PHP）
*   签名保护（下例）

签名保护通过添加签名来防止篡改/伪造链接参数。像这样工作：

```
$secret = "some reasonably long string of random data";
$id = "123"; // like above, the user id

$sig = hash_hmac('sha1', $id, $secret);

$link = 'http://www.example.org/admin/remove_account.php?' . http_build_query(array(
    'id' => $id,
    'sig' => $sig,
)); 
```

要验证签名：

```
$secret = "some reasonably long string of random data";
if (isset($_GET['id'], $_GET['sig'])) {
    $calc_sig = hash_hmac('sha1', $_GET['id'], $secret);
    if ($calc_sig === $_GET['sig']) {
        // your delete query here
    }
} 
```

请注意，尽管该链接可以防止有人试图访问您的管理脚本，但如果它落入坏人之手，您仍然会被搞砸。不要低估安全性:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:17:24.980

我认为您必须在用户列表的删除电子邮件中添加您网站页面的链接。当用户单击链接时，它将重定向到特定页面，从链接的 url 中获取该用户 ID，然后您可以执行删除操作。有必要从邮件重定向到站点页面，因为在邮件中您不能直接连接数据库。

谢谢

# data-structures - 使用数组实现链表 - 优点和缺点

> ID：10477754
> 
> 赞同：8
> 
> 时间：2012-05-07T06:39:01.630
> 
> 标签：data-structures, linked-list

我知道如何使用数组实现链表。例如我们定义一个结构如下：

```
struct Node{
    int data;
    int link;
} 
```

“data”存储信息，“link”存储下一个节点数组中的索引。

谁能告诉我与“普通”链表相比，使用数组实现链表的优点和缺点是什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T07:14:23.820

**如果你用一个数组来支持一个链表，你最终会遇到两者的缺点**。因此，这可能不是一个很好的实现方式。

一些直接的缺点：

1.  您将在数组中有死空间（当前未用于项目的条目）占用内存
2.  您必须跟踪免费条目 - 在几次插入和删除之后，这些免费条目可能在任何地方。
3.  使用数组将对链表的大小施加上限。

我想一些优点是：

1.  如果您在 64 位系统上，您的“指针”将占用更少的空间（尽管免费条目所需的额外空间可能超过了这个优势）
2.  您可以将阵列序列化到磁盘并通过`mmap()`调用轻松将其读回。不过，您最好使用某种协议缓冲区来实现可移植性。
3.  您可以保证数组中的元素在内存中彼此接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:51:43.493

> 谁能告诉我与“普通”链表相比，使用数组实现链表的优缺点是什么？

链表具有以下复杂性：

*   缺点 x xs : *O(1)*
*   附加纳米： *O（n）*
*   指数 i xs : *O(n)*

如果您的表示使用严格的连续数组，您将有不同的复杂性：

*   缺点将需要复制旧数组：*O(n)*
*   append 需要将两个数组复制到一个新的连续空间中：*O(n + m)*
*   索引可以实现为数组访问：*O(1)*

也就是说，以数组形式实现的链表 API 的行为类似于数组。

您可以通过使用严格数组的链表或树来缓解这种情况，从而导致绳索或手指树或惰性序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:13:03.310

堆栈实现两种方式。首先是使用数组，其次是使用链表。

使用数组的一些缺点，然后大多数程序员在堆栈实现中使用链表。

首先是使用链表的堆栈首先不声明堆栈大小并且不限制堆栈中的数据存储。其次是指针式中的链表来声明和使用它。

链表中只使用一个指针。它称为顶部指针。

堆栈是 lifo 方法使用。但在链表程序实现中存在一些缺点。

大多数程序员使用喜欢列表使用堆栈实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T23:01:58.840

使用数组实现，您可以对列表的节点进行顺序和更快的访问，另一方面，如果您使用指针实现链接列表，您可以随机访问节点。当您处理固定编号时，数组实现很有帮助。元素，因为就性能而言，调整数组的大小是昂贵的，因为如果需要从列表中间插入/删除节点，则必须在之后移动每个节点。与此相反，当您不知道否时，您应该使用指针实现。您想要的节点，因为这样的列表可以有效地增长/缩小并且您不需要移动任何节点，它可以通过简单地取消引用和引用指针来完成。

# javascript - 如何使用 jquery 或 javascript 在文本框或文本区域中阻止脚本注入？

> ID：10477755
> 
> 赞同：1
> 
> 时间：2012-05-07T06:39:05.973
> 
> 标签：javascript, jquery

我有一个包含文本框和文本区域的表单。我想验证它以停止使用文本框或文本区域注入脚本。我需要使用 jquery 或 javascript 来完成。

是否有任何可用的正则表达式或任何其他方式来检测和停止脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:47:05.767

如果您只是将其保存在数据库中，则无需执行任何操作。如果要打印 HTML 页面中的值，请先对其进行 HTML 编码。无需验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:44:57.027

[看看 OWASP 的 ReForm:](https://www.owasp.org/index.php/Category%3aOWASP_Encoding_Project) :

改革正是这样做的工具。改革允许您为 javascript、xml、html 或 vbscript（是的，它仍然存在）上下文转义数据。它为 Java、.NET、PHP、Perl、Python、Javascript 和 ASP 提供库。

其次，您还必须在服务器端级别进行验证。JavaScript 可以很容易地在浏览器中被禁用。

# android - 如何在android中通过传入的短信启动Activity

> ID：10477762
> 
> 赞同：0
> 
> 时间：2012-05-07T06:39:59.040
> 
> 标签：android, android-activity

我想通过传入的短信启动一个活动。为此，我已经这样做了......

```
 public class ReceiveSMS extends BroadcastReceiver {

    Boolean SendSMS;
    String Mobileno;
    String VarMessageBody;

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                str += "SMS from " + msgs[i].getOriginatingAddress();
                Mobileno = msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                VarMessageBody = msgs[i].getMessageBody().toString();
                str += "\n";
                Mobileno = msgs[i].getOriginatingAddress();

            }
            if (VarMessageBody.startsWith("START")) {
                Intent intentHome = new Intent(context,SwitchBluetoothActivity.class);
                intentHome.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intentHome);

            }

        }

    }
} 
```

我的 SwitchBluetoothActivity 类是这样的..

```
 public class SwitchBluetoothActivity extends Activity {
    private TextView tv;
    private ToggleButton tb;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView) findViewById(R.id.bluetoothText);
        tb = (ToggleButton) findViewById(R.id.toggleButton);

        final BluetoothAdapter bta = BluetoothAdapter.getDefaultAdapter();

        if (bta == null) {
            tv.setText("Device does not support Bluetooth");
        }
        else if(bta.isEnabled()){
            tv.setText("Bluetooth is enabled");
            tb.setChecked(true);
        }
        else{
            tv.setText("Bluetooth is disabled");
            tb.setChecked(false);
        }

        tb.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
              if(bta.isEnabled()){
                    bta.disable();
                tv.setText("Bluetooth is disabled");
                }
                else{
                    bta.enable();
                tv.setText("Bluetooth is enabled");
                }
            }
        });
    }
} 
```

我还在 AndroidManifest.xml 中添加了意图过滤器。但我的问题是。我无法开始这项活动。请给我建议我在哪里做错了。

这是我的清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxxxxx.smsServices"
    android:versionCode="1"
    android:versionName="1.0" >
    <activity android:name=".SwitchBluetoothActivity">

    </activity>
    <receiver android:name=".ReceiveSMS">
        <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </receiver>

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.BROADCAST_SMS"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:47:01.800

默认您的广播接收器没有任何优先级，因此默认活动启动。启动您的活动在清单中为您的接收器添加优先级

```
 <receiver android:name=".SmsReciever">
        <intent-filter android:priority="99999">
            <action android:name="android.provider.telephony.SMS_RECIEVED"></action>
        </intent-filter>
    </receiver> 
```

您还必须在清单中添加此权限

```
 <uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission> 
```

# jquery - 3D 按钮兼容 ie7+ 和 mozilla？

> ID：10477763
> 
> 赞同：0
> 
> 时间：2012-05-07T06:39:59.480
> 
> 标签：jquery, html, css

是否可以在ie7+中制作3D按钮。建议任何不错的教程链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:43:20.790

**这些可能会有所帮助：**

[http://www.tekgoblin.com/2011/04/11/web-design-how-to-make-3d-buttons-in-html/](http://www.tekgoblin.com/2011/04/11/web-design-how-to-make-3d-buttons-in-html/)

[http://elemisfreebies.com/02/16/yummy-3d-buttons-psdhtml/](http://elemisfreebies.com/02/16/yummy-3d-buttons-psdhtml/)

[http://www.dave-woods.co.uk/index.php/simple-css-3d-button/](http://www.dave-woods.co.uk/index.php/simple-css-3d-button/)

[http://www.tekgoblin.com/2011/04/11/web-design-how-to-make-3d-buttons-in-html/](http://www.tekgoblin.com/2011/04/11/web-design-how-to-make-3d-buttons-in-html/)

[http://azharkamar.com/259/how-to-create-simple-3d-buttons-css-html/](http://azharkamar.com/259/how-to-create-simple-3d-buttons-css-html/)

[http://www.ourtuts.com/create-css3-buttons-compatible-with-all-browsers/](http://www.ourtuts.com/create-css3-buttons-compatible-with-all-browsers/)

希望这可以帮助。

# javascript - 如何在 Polymaps 中监听图层缩放事件？

> ID：10477765
> 
> 赞同：3
> 
> 时间：2012-05-07T06:40:04.520
> 
> 标签：javascript, maps, zooming, layer, polymaps

我正在使用**Polymaps.js**库来制作地图。能够观察图层上的缩放级别变化将非常有用。我试图保持一层按米值缩放的点，所以每当缩放级别发生变化时，我都需要重新计算半径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:41:16.343

我正在使用“移动”功能，我认为它也是在缩放时触发的。也有可能开启“缩放”功能。我认为有。

例如：

```
// whenever the map moves...
map.on("move", function() {
    // get the current zoom
    var z = map.zoom();
    // show/hide parcels
    parcels.visible(z >= 16);
}); 
```

# ruby-on-rails - 向 Rails API 发布请求？

> ID：10477774
> 
> 赞同：-1
> 
> 时间：2012-05-07T06:41:07.950
> 
> 标签：ruby-on-rails, html, post

我有一个 HTML5 网站，用户可以在其中输入一些评论。我的 Rails 应用程序中有一个模型，我想在我的应用程序中存储使用评论。我不知道应该如何进行。我有基本的想法，但不知道如何实现它。以下是我认为需要的步骤

*   将评论数据附加到 url。app.herokuapp.com?params=xxx 之类的东西
*   在我的路由文件中创建一个到控制器操作的路由以处理发布请求..
*   在我的控制器操作中，我需要提取参数并创建条目。

创建条目非常简单。但是我迷失了路线并从 url 部分中提取信息。任何想法或提示？多谢。

我有一个 rails 3.2 应用程序，ruby 1.9.3。简单的 javascript/html5/jquery 网页..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:26:58.350

Ryan Bates在这个主题上有一个出色的[截屏视频。](http://railscasts.com/episodes/229-polling-for-changes)

# mysql - 从一个表中获取结果并将相应的值放在另一个表中

> ID：10477775
> 
> 赞同：0
> 
> 时间：2012-05-07T06:41:21.647
> 
> 标签：mysql, join, intersect

我正在寻找结果，但没有找到合适的解决方案。

所以，我会提出我的问题。请告诉，如果它已经在任何主题中列出！

我有一张桌子，table123，它有像这样的列，

```
Old_variable
New_Variable
ValueDesc
Default_Value 
```

还有另一个表 t6，它的列如下：

```
template_code
Paragraph_code
Old_Var
New_var 
```

此表在其他模板中具有多次相同段落代码的值。

现在，我想加入这两个表，基于 New_variable 和 New_var，我想要一个结果，它有 template_code、paragraph_code、New_variable 以及变量描述和默认值的相应值。只有段落，应该只出现一次。如果它存在于一个模板中，则不需要出现在其他模板中。

这是通过 MySQL 的可能查询吗？

# java - 为什么我得到 NoClassDefFoundError 异常？

> ID：10477777
> 
> 赞同：1
> 
> 时间：2012-05-07T06:41:35.360
> 
> 标签：java, image, exception, dicom, dcm4che

大家好，我正在netbeans平台上的dicom查看器上开发当前应用程序我开发了应用程序并使用dcm4che jar api加载dicom图像并得到以下异常错误请指导我哪里错了......

```
 Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/apache/log4j/Logger
at org.dcm4cheri.imageio.plugins.DcmImageReaderConf.<clinit>(DcmImageReaderConf.java:73)
at org.dcm4cheri.imageio.plugins.DcmImageReaderSpi.<clinit>(DcmImageReaderSpi.java:79)
at newone.Newone.openFile(Newone.java:193)
at newone.Newone.actionPerformed(Newone.java:137)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6504)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6269)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4860)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
    Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 40 more
     Exception in thread "Thread-3" java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 1
at java.util.Vector.get(Vector.java:744)
at newone.Newone.run(Newone.java:116)
at java.lang.Thread.run(Thread.java:722)
    Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: Array index out of range:               0
at java.util.Vector.get(Vector.java:744)
at newone.Newone.actionPerformed(Newone.java:162)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6504)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6269)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4860)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4686)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:43:57.370

最可能的解释是你的类路径中没有 log4j（这就是它找不到它的原因）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T06:47:29.243

`dcm4che`jar 使用`Log4J`框架来记录其跟踪，并且`Log4J`项目类路径中没有 jar 文件。为了解决这个异常，将`Log4J`jar 文件添加到 ypur 项目类路径。

下载`Log4J`jar 文件： http: [//logging.apache.org/log4j/1.2/download.html](http://logging.apache.org/log4j/1.2/download.html)

# extjs - 在警报框中显示 Extjs 图表工具提示值

> ID：10477780
> 
> 赞同：0
> 
> 时间：2012-05-07T06:41:49.167
> 
> 标签：extjs

我试图在图表工具提示上找出 ExtJs 中的事件侦听器。我有柱形图，默认情况下，它有带有相应值的工具提示。

当我单击图表的条形或列时，我必须在警报框中显示这些工具提示值。

谢谢！！

这是面积图的javascript代码：

```
Ext.require('Ext.chart.*');
Ext.require(['Ext.Window', 'Ext.fx.target.Sprite', 'Ext.layout.container.Fit', 'Ext.window.MessageBox']);

Ext.onReady(function () {

    var chart = Ext.create('Ext.chart.Chart', {
            id: 'chartCmp',
            xtype: 'chart',
            style: 'background:#fff',
            animate: true,
            store: store1,
            legend: {
                position: 'bottom'
            },
            axes: [{
                type: 'Numeric',
                grid: true,
                position: 'left',
                fields: ['data1', 'data2', 'data3', 'data4', 'data5', 'data6', 'data7'],
                title: 'Number of Hits',
                grid: {
                    odd: {
                        opacity: 1,
                        fill: '#ddd',
                        stroke: '#bbb',
                        'stroke-width': 1
                    }
                },
                minimum: 0,
                adjustMinimumByMajorUnit: 0
            }, {
                type: 'Category',
                position: 'bottom',
                fields: ['name'],
                title: 'Month of the Year',
                grid: true,
                label: {
                    rotate: {
                        degrees: 315
                    }
                }
            }],
            series: [{
                type: 'area',
                highlight: false,
                axis: 'left',
                xField: 'name',
                yField: ['data1', 'data2', 'data3', 'data4', 'data5', 'data6', 'data7'],
                style: {
                    opacity: 0.93
                }
            }]
        });

    var win = Ext.create('Ext.Window', {
        width: 800,
        height: 600,
        minHeight: 400,
        minWidth: 550,
        hidden: false,
        shadow: false,
        maximizable: true,
        title: 'Area Chart',
        renderTo: Ext.getBody(),
        layout: 'fit',
        tbar: [{
            text: 'Save Chart',
            handler: function() {
                Ext.MessageBox.confirm('Confirm Download', 'Would you like to download the chart as an image?', function(choice){
                    if(choice == 'yes'){
                        chart.save({
                            type: 'image/png'
                        });
                    }
                });
            }
        }, {
            text: 'Reload Data',
            handler: function() {
                store1.loadData(generateData());
            }
        }, {
            enableToggle: true,
            pressed: true,
            text: 'Animate',
            toggleHandler: function(btn, pressed) {
                var chart = Ext.getCmp('chartCmp');
                chart.animate = pressed ? { easing: 'ease', duration: 500 } : false;
            }
        }],
        items: chart
    }); 
}); 
```

这是html代码：

```
<html>
<head>
    <title>Area Chart Example</title>
    <link rel="stylesheet" type="text/css" href="../../css/ext-all.css">
    <script type="text/javascript" src="../../js/ext-debug.js"></script>
    <script type="text/javascript" src="../../js/ext-all.js"></script>
    <script type="text/javascript" src="../../js/example-data.js"></script>
    <script type="text/javascript" src="areachart.js"></script>

</head>
<body>

</body>
</html> 
```

当您运行此代码时，默认情况下您将拥有具有值的面积图和工具提示，但我的要求是当我单击图表时，该值应显示在当前显示在工具提示中的警报框中... .

# python - 为什么人们不切换到 python 3？

> ID：10477781
> 
> 赞同：5
> 
> 时间：2012-05-07T06:41:50.727
> 
> 标签：python

Python 3 已经发布了 3 年多。到目前为止，我看到的大部分框架和课程总是基于 python 2.6（或 2.7）

即使对于 Google App Engine，他们也使用 python 2。

python 3有什么缺点会阻止人们升级吗？

# ruby - 支持 Selenium-Webdriver / Ruby 的方法

> ID：10477783
> 
> 赞同：1
> 
> 时间：2012-05-07T06:42:27.713
> 
> 标签：ruby, methods, selenium, webdriver, selenium-webdriver

动手之后`Selenium-Client`，`Watir`我开始研究`Selenium-Webdriver`/ `Ruby`。

但是，我没有得到任何有关方法的信息，而且我经常被困在我的脚本中。就像在下拉菜单中设置一个选项就是其中一个例子。我无法获取网页的所有元素。

我经常收到类似的错误`method not found`

任何人都可以通过提供`Selenium-Webdriver`with的更新方法列表来帮助我`Ruby`。

我试图在网络和论坛上找到相关信息。此[URL](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#==-instance_method)包含方法，但它们也给出了相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:24:29.777

我正在使用 selenium webdriver 进行 Ruby 自动化。这是一个[非常好的网站](http://rubyonwindows.blogspot.co.uk/search/label/ruby)，其中包含大量信息，尤其是关于将 Excel（自动化）与 Ruby 一起使用的信息。恐怕您选择了艰难的方式，因为 C# 和 Java 有很多信息，而 Ruby 需要在资源有限的情况下清理网络。堆栈溢出也有很多很好的例子，正如 Kevin 提到的那样；搜索特定错误时要容易得多。如果我是你，我会下载一个非常有用的名为 Firebug 的 Firefox 插件，它可以与 Selenium IDE 结合使用。这两个是非常强大的工具，可以帮助解决您遇到的大多数问题，至少在网页方面是这样。

[Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)，您可以使用它来检查网页中的任何元素（只需右键单击），然后您可以指示 webdriver 通过 id、link、css 或 xpath 找到它。当没有 id 或 css 标签时，Xpath 是最好的。或者，当我真正陷入困境时我会做什么；是启动[Selenium IDE](http://seleniumhq.org/projects/ide/)（录制和播放）并录制我想要的操作（即从下拉菜单中选择一个值）。然后我将文件导出到一个 Ruby 脚本中，仅从那里抓取我需要的代码（通常是 xpath）。

希望有帮助。请发布任何仍然给您带来困难的特定错误，我们可以从那里解决。下载 Firebug 后，右键单击要选择的下拉框并在此处发布检查元素功能的结果。那么我可能会对如何正确选择它提供进一步的帮助。

只是为了让您了解 xpath 应该类似于下面的行..：

```
 element = driver.find_element(:xpath, "//input[@name='payment']") 
```

输入显然是标签的名称。然后你可以通过它的内部属性来定位你的元素，比如..：值、名称甚至类型。上面的行将把这个“**元素**”搜索的结果放入变量元素中。如果您对分配变量不感兴趣，您可以错过“ **element = ”位。**但是，在找到定位元素所需的一切之后，您会意识到您还需要（尤其是如果您正在从事自动化工作）一种控制错误处理的方法，因为当 Web 驱动程序无法定位元素时，它将超时或崩溃尚未加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:16:01.850

我什至不知道是否有人指出过这个文档？

[http://selenium.googlecode.com/svn/trunk/docs/api/rb/index.html](http://selenium.googlecode.com/svn/trunk/docs/api/rb/index.html)

# windows-installer - 如何将自定义消息写入 MSI 日志？

> ID：10477784
> 
> 赞同：2
> 
> 时间：2012-05-07T06:42:43.163
> 
> 标签：windows-installer

我需要将自定义消息从我的 MSI 包中写入 MSI 日志。这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:24:36.900

为此，您可以创建自定义操作，推荐使用 Win32 DLL。不幸的是，我只有一个 VBS 示例供您使用，您可以将其用作起点，但不建议在您的软件包的官方版本中使用：

```
Function WriteToLog(TextToWrite)
  Const MsgType = &H04000000
  Set rec = Installer.CreateRecord(1)
  rec.StringData(1) = TextToWrite
  Session.Message MsgType, rec
  'Msgbox TextToWrite
WriteToLog = 0
End Function 
```

# c++ - 如何从编辑控件中获取数值

> ID：10477786
> 
> 赞同：11
> 
> 时间：2012-05-07T06:42:59.867
> 
> 标签：c++, windows, mfc

抱歉，如果这太琐碎了，但我不知道如何将数值输入到编辑控件中。[CEdit](http://msdn.microsoft.com/en-us/library/dd866e2d-a811-4172-ac56-b72606bd3ea5%28v=vs.90%29)类表示的 MFC 编辑控件。

谢谢你。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-07T10:19:31.377

除了已经提到的 GetWindowText 方法，您还可以通过 DDX 将其绑定到整数/无符号整数/双精度/浮点值。试试这个：

```
void CYourAwesomeDialog::DoDataExchange(CDataExchange* pDX)
{
    CDialog::DoDataExchange(pDX);
    DDX_Text(pDX, IDC_EDIT_NUMBER, m_iNumber);
} 
```

而 m_iNumber 是您的 CYourAwesomeDialog 类的成员。

你必须打电话

```
UpdateData(TRUE); 
```

以便将控件中的值写入变量中。称呼

```
UpdateData(FALSE); 
```

反过来做 - 从控件中的变量。

编辑（奖金）：

重新阅读我的答案后，我注意到 UpdateData(...) 需要一个 BOOL 变量 - 已更正。所以我对喜欢可读性的人有了一个想法。因为我总是对哪个调用执行哪个方向感到困惑，所以您可以引入一个枚举以使其更具可读性，就像这样（可能在 stdafx.h 或某个中央标题中）：

```
enum UpdateDataDirection
{
    FromVariablesToControls = FALSE,
    FromControlsToVariables = TRUE
} 
```

你只需要写：

```
UpdateData(FromVariablesToControls); 
```

或者

```
UpdateData(FromControlsToVariables); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-07T06:48:13.863

CEdit 派生自 CWnd，因此它有一个名为的成员函数[`GetWindowText`](http://msdn.microsoft.com/en-us/library/db50wx7h(v=vs.100))，您可以调用该函数来获取 CEdit 中的文本，然后将其转换为数字类型，`int`或者`double`- 取决于您希望用户输入的内容：

```
CString text;
editControl.GetWindowText(text);

//here text should contain the numeric value
//all you need to do is to convert it into int/double/whatever 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T12:22:57.647

如果您将定期需要该功能，例如在多个对话框中，那么您也可以继承您自己的 CEdit 派生类来执行获取、设置和验证工作。

```
class CFloatEdit : public CEdit
{
public:
    CFloatEdit();
    void SetValue(double v) {
        // format v into a string and pass to SetWindowText
        }
    double GetValue() {
        // validate and then return atoi of GetWindowText
        }
    void OnChar(UINT nChar, UINT nRepCnt, UINT nFlags) {
        // only allow digits, period and backspace
        }
}; 
```

像这样，确保消息映射将所有其他消息传递给父 CEdit。您可以将其扩展为具有可自定义的下限和上限以及小数位设置。

# c# - 将 Tooltip 绑定到 WPFToolkit DropDownColumn 的每一项

> ID：10477787
> 
> 赞同：0
> 
> 时间：2012-05-07T06:43:01.490
> 
> 标签：c#, wpf, xaml, grid, wpftoolkit

如何将工具提示文本绑定到 WPFToolkit 的 DataGrid 内的 A 下拉列表的每个项目。

我使用以下代码

```
<WPFtoolkit:DataGridComboBoxColumn x:Name="dgCboTransformation" MinWidth="100" MaxWidth="125" 
                                             Header="Transformation" DisplayMemberPath="Name" SelectedValuePath="Signature"
                                             SelectedValueBinding="{Binding Path=Transformation}" Visibility="Collapsed"
                                             ToolTipService.IsEnabled="true">
                    <ToolTipService.ToolTip>
                        <TextBlock Foreground="Green" Text="{Binding Path=Signature}"/>
                    </ToolTipService.ToolTip>
                </WPFtoolkit:DataGridComboBoxColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:39:40.763

您应该能够使用 ItemContainerStyle。

以下是我过去如何单独启用 CheckListBox 中的项目

```
<wpf:CheckListBox>
  <wpf:CheckListBox.ItemContainerStyle>
    <Style TargetType="{x:Type wpf:CheckListBoxItem}">
        <Setter Property="IsEnabled"
                Value="{Binding Path=LogisticareIDIsValid}" />
        <EventSetter Event="MouseDoubleClick"
                Handler="listResultsDoubleClick" />
    </Style>
  </wpf:CheckListBox.ItemContainerStyle>
</wpf:CheckListBox> 
```

# mysql - mysql中键1的重复条目'0'

> ID：10477796
> 
> 赞同：6
> 
> 时间：2012-05-07T06:43:35.737
> 
> 标签：mysql

我有一个数据类型为`'smallint'`（主键）的表字段，它是`auto_increment`. 它工作正常。

很久之后，我得到了错误`duplicate entry '32676' for key 1`。所以我将该字段从 更新`smallint(6)`为`int(11)`。现在我得到了错误`duplicate entry '0' for key 1`。

我正在使用 InnoDB 引擎。

我具体可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T06:46:51.800

那是因为可能表计数器被重置为零，所以下一项添加了 0，一个现有的键！
你可以尝试使用

```
ALTER TABLE your_table AUTO_INCREMENT=32677 
```

# perl - Perl typeglobs 和 Real References：如果我写到 \*STDOUT 而不是 *STDOUT，我会得到什么？

> ID：10477797
> 
> 赞同：4
> 
> 时间：2012-05-07T06:43:38.247
> 
> 标签：perl

如果我写一个真正的参考`\*STDOUT`而不是 typeglob like ，我会得到什么`*STDOUT`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T07:10:38.933

一个是[typeglob](http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles)，另一个是对它的引用。

据我所知，主要的实际区别是您**不能将 typeglob 祝福到对象中，但您可以祝福 typeglob 引用**（这就是这样`IO::Handle`做的）

这种区别在“Perl Cookbook”的 7.16 节中有详细讨论。“将文件句柄存储在变量中”。

* * *

另一个区别是分配一个 glob 会为整个 glob 创建一个别名，而分配一个 glob 引用会产生预期的效果（如 . 中所讨论的[`perldoc perlmod, "Symbol Tables" section`](http://perldoc.perl.org/perlmod.html#Symbol-Tables)。为了说明：

```
@STDOUT=(5);
$globcopy1 = *STDOUT; # globcopy1 is aliased to the entire STDOUT glob, 
                      # including alias to array @STDOUT
$globcopy2 = \*STDOUT; # globcopy2 merely stores a reference to a glob, 
                       # and doesn't have anything to do with @STDOUT

print $globcopy1 "TEST print to globcopy1/STDOUT as filehandle\n";
print "TEST print of globcopy1/STDOUT as array: $globcopy1->[0]\n\n";
print $globcopy2 "TEST print to globcopy2/STDOUT as filehandle\n";
print "TEST print of globcopy2/STDOUT as array: $globcopy2->[0]\n\n"; 
```

产生：

```
TEST print to globcopy1/STDOUT as filehandle
TEST print of globcopy1/STDOUT as array: 5

TEST print to globcopy2/STDOUT as filehandle
Not an ARRAY reference at line 8. 
```

* * *

作为旁注，关于 typeglob 引用是将文件句柄传递给函数的唯一方法的传言并非如此：

```
sub pfh { my $fh = $_[0]; print $fh $_[1]; }

pfh(*STDOUT, "t1\n");
pfh(\*STDOUT, "t2\n");

# Output:
# t1
# t2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T07:06:17.223

`*`表示一个typeglob，它是符号表中的一个条目。例如：

```
my $x;
print *x; 
```

会屈服`*main::x`。

`\`表示参考。试试这个：

```
use YAML::XS;

print Dump *STDOUT;
print Dump \*STDOUT; 
```

第一个是 glob，第二个是引用。大概当你这样做时：

```
my $fh = *STDOUT; 
```

您实际上是在将 glob 复制到一个新条目中，尽管我认为这不是很有意义 - 如果您现在`close STDOUT`,`$fh`也已关闭。这：

```
my $fh = \*STDOUT; 
```

只是一个参考，这是首选。也可以看看：

[http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles](http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T07:03:19.233

您将获得对名为 的 typeglob 的引用`STDOUT`。见[perlref](http://perldoc.perl.org/perlref.html)。

这就是它所说的：

> 使用反斜杠运算符无法创建对 IO 句柄（文件句柄或目录句柄）的真实引用。最多可以得到一个typeglob的引用，它实际上是一个完整的符号表条目。但是请参阅下面对 *foo{THING} 语法的解释。但是，您仍然可以像使用 IO 句柄一样使用类型 glob 和 globrefs。

[perldata](http://perldoc.perl.org/perldata.html#Typeglobs-and-Filehandles)也很有帮助。

总之，这就像构建对文件句柄的引用。您可以将其用作一个。但是使用 typeglob，您也可以做其他事情。符号表包含所有名为 的变量的值`STDOUT`，即`$STDOUT`、`@STDOUT`、`%STDOUT`甚至`&STDOUT`，以及文件句柄。您只需一个 typeglob 即可访问它们。但是如果`STDOUT`您可能不必担心它，因为您`%STDOUT`的代码中不太可能有 a 。

这种引用也是将文件句柄作为参数传递给函数的唯一方法。

```
sub myprint {
  my $fh = shift;
  print $fh "Hello World!\n";
}
&myprint(\*STDOUT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-18T01:58:00.273

Perl 提供了 3 种方法来获取相同的文件句柄：

*   `*STDOUT`是一个[类型球](https://stackoverflow.com/a/2244156/3614563)
*   `\*STDOUT`是对 typeglob 的引用
*   `*STDOUT{IO}`是 undef 或对 IO::Handle 的引用

我现在更喜欢使用`\*STDOUT`一致性。当我使用`open(my $handle, ...)`自动激活文件句柄时，Perl 给了我一个 typeglob 的引用。因此，如果我想使用其中一个`STDOUT`或打开的文件，我可能会写

```
my $handle;
if ($path eq "-") {
    $handle = \*STDOUT;
} else {
    open($handle, '>', $path) or die "Can't open $path: $!";
} 
```

所以我的句柄始终是对 typeglob 的引用。这种一致性并不太重要。我的其余代码不应该关心它是否引用了 typeglob 或其他类型的文件句柄。

鉴于我对 的偏好`\*FH`，我很惊讶地找到了一个`*FH`有效但`\*FH`失败的示例。在[perlsub, "Pass by Reference"](http://perldoc.perl.org/perlsub.html#Pass-by-Reference)中，我找到了这个例子：

> 如果您打算生成新的文件句柄，您可以这样做。注意只传回*FH，而不是它的引用。
> 
> ```
> sub openit {
>     my $path = shift;
>     local *FH;
>     return open (FH, $path) ? *FH : undef;
> } 
> ```

它确实需要传回`*FH`, not `\*FH`，尽管 perlsub 没有解释原因。我通过在脚本中调用 sub 自己验证了它：

```
use strict;
use warnings;

sub openit {
    my $path = shift;
    local *FH;
    return open (FH, $path) ? *FH : undef;
}

my $it = openit '</etc/fstab' or die "Can't open it: $!";
if (defined($_ = <$it>)) {
    print "Its first line is $_";
} else {
    print "It has no first line\n";
} 
```

当返回值为`*FH`时，脚本工作。当我将其更改为 时`\*FH`，脚本失败。因为我正在使用警告，所以我看到了这个：

```
readline() on unopened filehandle FH at scratch.pl line 11.
It has no first line 
```

这是因为`\*FH`指向一个全局变量。在 sub 中，`local *FH`为全局 typeglob 提供了一个临时值。当 sub 返回时，`*FH`它失去了它的临时值，并`FH`重新成为一个未打开的文件句柄。

解决方法是复制临时值。当 sub 返回时会发生这种情况`*FH`。它复制 typeglob 因为它不是左值子。现在我知道为什么 sub 必须返回`*FH`，而不是`\*FH`。

如果我希望 sub 返回一个引用，我可以复制 typeglob 然后获取一个引用：

```
local *FH;
return open (FH, $path) ? \(my $glob = *FH) : undef; 
```

或者我可以自动激活参考：

```
my $globref;
return open ($globref, $path) ? $globref : undef; 
```

如果更改 的值`STDOUT`并且需要复制旧值，则必须使用 复制 typeglob `*STDOUT`，而不是`\*STDOUT`。您可能不需要复制该值。

# ios - 游戏从 ipa 文件崩溃，但在 Xcode 中运行良好？

> ID：10477809
> 
> 赞同：1
> 
> 时间：2012-05-07T06:44:39.570
> 
> 标签：ios, xcode, cocos2d-iphone, crash, ipa

现在的情况有些尴尬。

当我直接从 Xcode 运行我的项目到我的设备时，它运行完美，没有任何崩溃。但是，当我创建该项目的 ipa 文件并使用 iTunes 将该 ipa 安装到我的设备中时，只有在我第一次启动游戏画面时它会崩溃，后来当我开始游戏画面时它运行良好。

请记住，我的游戏在用户导航 2 个初始屏幕后开始，这在任何一种情况下都可以正常工作。（即从 Xcode 或从 ipa 文件运行）。

我不明白的是，如果问题出在游戏类的 init 方法中，为什么当我直接从 Xcode 运行它时它不会崩溃。作为 ipa 或从 Xcode 运行时，是否有任何代码压缩或不同的代码编译机制。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T08:54:58.913

我遇到了同样的情况，ipa 文件在两个初始屏幕后崩溃。崩溃日志确实在代码中给出了崩溃行。调试代码并没有解决目的。

但我通过检查编辑方案部分中的存档设置解决了这个问题。我的构建处于调试模式，存档设置为发布，我将存档的构建配置更改为调试并创建了一个 ipa，崩溃已解决。

希望这可以帮助某人节省生产时间。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:57:18.273

正如 adig 所说，从设备获取崩溃日志，然后对其进行符号化。您将看到导致崩溃的调用堆栈和行。您可以在项目中设置发布、调试、临时等构建配置之间的所有差异。

# java - 带有c3p0池的java spring应用程序生成java.lang.SQLException：关闭时某些资源无法正确关闭

> ID：10477810
> 
> 赞同：2
> 
> 时间：2012-05-07T06:44:45.797
> 
> 标签：java, spring, jdbc

我们使用 c3p0 作为数据库池的 spring，我们使用 oracle 10g 作为数据库。当我们启动应用程序时，它继续显示以下错误

```
 2012-5-7 13:12:43 com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask run
 Warning: Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@20af46
 java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@20af46
  2012-5-7 14:45:51 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
  Info: [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
  2012-5-7 14:45:51 com.mchange.v2.c3p0.impl.NewPooledConnection logCloseExceptions
  Info: [c3p0] NewPooledConnection close Exception.
  java.sql.SQLException: More data can not be read from the socket
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:208)
    at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1123)
    at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1075)
    at oracle.jdbc.driver.T4C7Ocommoncall.receive(T4C7Ocommoncall.java:106)
    at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:465)
    at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:1203)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:549)
    at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:234)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java
    at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964)
    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)

 In oracle trace file,we found the following error
  *** 2012-05-07 11:50:56.421
   ksedmp: internal or fatal error  
   ORA-07445: An unexpected error: core dump [ACCESS_VIOLATION] [_evaopn2+153] [PC:0x1BBDFA9] [ADDR:0x0] [UNABLE_TO_READ] []
   Current SQL statement for this session: 
```

是oracle错误导致上述原因吗？我们花了很多时间才发现问题，但我们没有发现问题。之前我们使用oracle 9i，它没有问题。最近我们升级到oracle 10g。哪里会出现问题？任何想法都会非常有帮助。谢谢！我们使用的 c3p0 是 com.springsource.com.mchange.v2.c3p0-0.9.1.2.jar。

# java - 如何在 Java 中使用 ConnectionManager 杀死 HttpConnection？

> ID：10477813
> 
> 赞同：0
> 
> 时间：2012-05-07T06:44:59.933
> 
> 标签：java, android, google-maps

我正在使用 Android 中的 Google 地图。它向服务器请求在标记上显示一些内容，现在我想在用户平移地图时终止挂起请求或所有请求的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:53:19.910

关闭底层`InputStream`这也将关闭连接。

关于向某事（例如您的连接）提交请求，然后取消您可以检查`ExecutorService`界面的请求。它有`execute()`和`shutdown()``awaitTermination()`

# php - phpmyadmin 不允许我添加主/外键关系

> ID：10477815
> 
> 赞同：1
> 
> 时间：2012-05-07T06:45:17.540
> 
> 标签：php, phpmyadmin

那是主表字段（任务表）：

```
task_id int(10)     UNSIGNED    No  None    AUTO_INCREMENT 
```

这是我的外部表字段（url_error_stats 表）：

```
task_id int(10)     UNSIGNED    No  None 
```

url_error_stats 没有提供“关系视图”选项来连接键..为什么？

> SQL查询：
> 
> ALTER TABLE `url_error_stats`添加外键 ( `task_id`) 引用 `aws_backlinks`。`tasks`(
> 
> `task_id`) ON DELETE CASCADE ON UPDATE CASCADE ;

MySQL 说：

> 1452 - 无法添加或更新子行：外键约束失败 ( `aws_backlinks`., CONSTRAINT `#sql-6f0_3bd_ibfk_1`FOREIGN KEY ( `task_id`) REFERENCES `tasks`( `task_id`) ON DELETE CASCADE ON UPDATE CASCADE)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:53:48.243

如果要创建外键，则必须使用 innodb 并索引主键。我会推荐你​​使用 NAVICAT 。创建外键要容易得多，而且速度也很快。但对于快速 phpmyadmin 指南，请参阅

[在 phpMyAdmin 中设置外键？](https://stackoverflow.com/questions/459312/setting-up-foreign-keys-in-phpmyadmin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T16:13:53.683

另一个原因可能是表中不相关的数据。我的意思是你可能有一个在父表中不存在的外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T07:12:07.143

在此，单击 url_error_stats 表，然后在右侧它将显示所有字段列表，因此现在选中您想要成为外来的特定字段的复选框，然后单击链接***关系视图***（由下面的 phpmyadmin 提供到带有蓝色超链接的表字段）。

它将打开关系屏幕，您可以在其中选择主表的字段。谢谢

# ruby - 如何使 Gemfile 中未列出的 gem 可用

> ID：10477816
> 
> 赞同：1
> 
> 时间：2012-05-07T06:45:25.953
> 
> 标签：ruby, gem, bundler, gemfile

我为自己制作了一个[宝石](https://rubygems.org/gems/pbcopy)以在控制台中使用。我希望能够随时随地使用它。

如果不将它放入我的 Gemfile 中，我无法弄清楚如何让 Bundler 识别它，但这需要我团队中的其他人知道并安装它。

有没有办法让 Bundler 覆盖我选择的 Gemfile？或者，即使我的 Gemfile 中没有列出我的 gem，也可以以某种方式让我可以使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:12:22.473

您可以通过将其放在 Gemfile 的末尾并 gitignore Gemfile.dev.rb 来绕过捆绑程序：

```
dev_gemfile = File.expand_path("Gemfile.dev.rb", File.dirname(__FILE__))
instance_eval(File.read(dev_gemfile)) if File.exists?(dev_gemfile) 
```

如果他们的 Gemfile.dev.rb 不匹配，您的 Gemfile.lock 在不同开发人员的机器上将不匹配，但我只关心生产中的完全匹配。如果您有多个平台并且可以以相同的方式解决，那么开发人员和生产之间的微小更改已经是一个问题。

# assembly - 无法在 Windows 7 中运行由 nasm 生成的可执行文件

> ID：10477818
> 
> 赞同：2
> 
> 时间：2012-05-07T06:45:33.487
> 
> 标签：assembly, nasm

我正在使用 windows 7 来学习汇编语言。我正在使用 NASM 来创建目标文件和 mingw 来创建可执行文件。

我正在使用以下命令编译和运行可执行文件

```
del hello.o
del hello.exe
nasm -f elf hello.asm
ld hello.o -o hello.exe
hello 
```

运行 hello.exe 文件时，显示“hello.exe 已停止工作”的错误消息

在使用以下命令时

```
 nasm -f bin hello.asm -o program.exe 
```

我有一个错误如下所示

![在此处输入图像描述](../Images/6175ef69187e6046e9e8876c3ddd8632.png)

我的程序代码

```
global _start            ; global entry point export for ld
section .text
_start:
; sys_write(stdout, message, length)
mov eax, 4        ; sys_write syscall
mov ebx, 1        ; stdout
mov ecx, message    ; message address
mov edx, length        ; message string length
int 80h
; sys_exit(return_code)
mov eax, 1        ; sys_exit syscall
mov ebx, 0        ; return 0 (success)
int 80h
section .data
message: db 'Hello, world!',0x0A    ; message and newline
length: equ $-message            ; NASM definition pseudo-instruction 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:56:46.163

你所拥有的是*Linux*代码（`int 0x80`，`sys_write`并且`sys_exit`作为内核系统需要相当低级的东西）。

我不相信在 Windows 操作系统上运行时尝试调用 Linux 内核是个好主意。这不太可能结束:-)

*MinGW 是适用于Windows*的极简 GNU ，一种使用`gcc`工具链编写 Windows 应用程序的方式。因此，您必须遵守 Windows 规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T07:16:00.060

除了调用 linux 内核的代码，正如 paxdiablo 指出的那样，您已经将它组装成平面形式的二进制文件，它不会在 Windows 下运行。你需要使用`nasm -f win32`.

# c# - 将动态转换为对象

> ID：10477821
> 
> 赞同：7
> 
> 时间：2012-05-07T06:45:54.393
> 
> 标签：c#, dynamic-typing, dynamictype

这是我的代码：

```
MyClass here = new MyClass();
IEnumerable<MyClass> vats = (IEnumerable<MyClass>)here.All(); 
```

All() 方法返回 IEnumerable<dynamic>。我想将其转换为 IEnumerable<MyClass>。上面的行不起作用，它说无法将类型“d__15”的对象转换为类型“System.Collections.Generic.IEnumerable`1[MyClass]”。

我也试过：

```
 IEnumerable<MyClass> vats = here.All() as IEnumerable<MyClass>; 
```

但它返回null。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T06:56:58.570

类似于 dbaseman 的回答（和 AKX 的评论），我会使用`Cast`：

```
IEnumerable<MyClass> vats = here.All().Cast<MyClass>(); 
```

不过，您需要一个`using`LINQ 指令：

```
using System.Linq; 
```

在文件的顶部。`Select`如果无法识别该方法，听起来您还没有。

请注意，这假定每个值*确实*是一个`MyClass`参考。

编辑：如果您希望能够按索引访问值，我建议使用`ToList`：

```
List<MyClass> vats = here.All().Cast<MyClass>().ToList(); 
```

虽然`ToArray`也可以，但在大多数情况下，我个人更喜欢列表而不是数组，因为它们更灵活。

编辑：听起来你的结果实际上充满了`ExpandoObject`. 您需要`MyClass`从每个项目创建一个新实例，例如

```
List<MyClass> vats = here.All()
                         .Select(item => new MyClass(item.Name, item.Value))
                         .ToList(); 
```

或者可能：

```
List<MyClass> vats = here.All()
                         .Select(item => new MyClass {
                                     Name = item.Name,
                                     Value = item.Value,
                                 })
                         .ToList(); 
```

这*只是*一个示例，我不希望它立即起作用 - 我们不能做得比这更好，因为我们对您的结果实际上是如何返回的一无所知。

恐怕你在这里听上去有点不知所措。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:50:01.417

您只需要转换每个单独的对象：

```
MyClass[] vats = here.All().Select(item => (MyClass)(dynamic)item).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T07:18:40.213

在创建解决方案之前首先要弄清楚对象在运行时将具有哪些类型。从您的评论中看到它们将成为 ExpandoObjects 并假设 MyClass 不是从 ExpandoObject 派生的，您不能使用该`.Cast<T>`方法，因为它只支持强制转换而不支持自定义转换。

有一个技巧可以使用[JavaScriptSerializer从 ExpandoObjects 转换](http://msdn.microsoft.com/en-us/library/bb337495.aspx)

从此[链接](http://theburningmonk.com/2011/05/turn-expandoobject-into-static-type/)中获取您可以使用的扩展方法

```
public static IEnumerable<T> Convert<T>(this IEnumerable<dynamic> self){
    var jsSerializer = new JavaScriptSerializer();
    foreach(var obj in self){
        yield return jsSerializer.ConvertToType<T>(obj);
    }
} 
```

在您的情况下，您所要做的就是将 Cast in skeets 答案更改为 Convert。

```
List<MyClass> vats = here.All().Convert<MyClass>().ToList(); 
```

这有点骇人听闻，因为 JavaScriptSerializer 并不是要这样做，但它确实解决了问题。

# java - 在 J2ME 中通过 http 发送和接收数据以及处理菜单和屏幕

> ID：10477825
> 
> 赞同：0
> 
> 时间：2012-05-07T06:46:13.640
> 
> 标签：java, http, mobile, java-me

我是 J2ME 的新手，正在构建一个移动应用程序，用户可以在其中注册、登录并显示一些仅限会员的屏幕，他们可以在其中执行一些操作。

（我从事网络开发，因此请纠正我在哪里使用网络方法。另外，我清楚地了解基本的 Java 概念，但之前没有构建过移动应用程序）

到目前为止，我已经创建了第一个屏幕，其中包含一个包含用户名和密码文本框以及登录和退出按钮的登录表单。

我目前面临的问题是：

1.  如何同时提供注册、登录和退出的访问权限（手机似乎一次只能有两个按钮）。我是否将它们作为命令按钮或普通的“出现在页面上的类似 web 的按钮”提供？请告诉我如何使用任何似乎合适的选项。

2.  如何在移动应用程序中通过 http 发送和接收数据？示例代码将不胜感激。

3.  如何管理不同的屏幕？在 Web 开发中，我只是创建页面并将它们链接起来。在这种情况下，如何在按下注册按钮时显示注册屏幕？登录成功时的主屏幕？或不成功时的错误消息？

我有动态生成屏幕的不同功能吗？每次请求屏幕时我都会打电话给他们？

简单的样品将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:55:54.213

在 J2ME 中，

你有一个显示对象，它决定了屏幕上显示的内容。有些东西可以显示。例如表单、列表、文本框等。因此，您可以创建以下显示

```
public class IndexScreen extends List implements CommandListener {

    //This will contain the options 
    //1\. Register
    //2\. Login
    //3\. Exit
}

public class RegsterScreen extends Form implements CommandListener {

    //This will contain register fields and submit cancel command buttons

}

public class LoginScreen extends Form implements CommandListener {

   //This will contain Login specific controls
} 
```

现在，一旦这些可显示对象准备就绪，您就可以继续更改某些事件的显示，例如单击命令按钮。

public void commandAction(Command c, Displayable d) {

```
 if (c == OK) {
        nextScreen = new RegisterScreen();
        display.setCurrent(nextScreen);
    }
    if (c == BACK) {
        display.setCurrent(prevScreen);
    } 
```

对于发送和接收数据，以下可能会有所帮助....

```
package madmin.client;

import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import javax.microedition.lcdui.Display;
import madmin.res.Globals;

public class ClientRequest {

private Client client;
private Display display;
private String requestServlet;
private String requestCode;
private String requestId;
private String userId;
private String url;
private String response;
private String parameterOne;

public ClientRequest() {

}

 public boolean sendRequest() {

      boolean result = false;
      userId = Globals.getUserId();
      url = Globals.getURL() + requestServlet + "?requestCode=" + requestCode + "&requestId=" + requestId + "&userId=" + userId + "&clientIP=" + client.getIpAddress() + "&clientHostName=" + client.getHostname() + "&parameterOne=" + parameterOne;

      System.out.println("User Id value in ClientRequest " + userId);

      System.out.println("Start HTTP Connection");
      HttpConnection connection = null;
      InputStream inputstream = null;

       try {
            connection = (HttpConnection) Connector.open(url);
            connection.setRequestMethod(HttpConnection.GET);
            connection.setRequestProperty("Content-Type", "//text plain");
            connection.setRequestProperty("Connection", "close");

            System.out.println("Status Line COde: "+ connection.getResponseCode());
            System.out.println("Status Line Message: "+ connection.getResponseMessage());

            if(connection.getResponseCode()==HttpConnection.HTTP_OK){
                inputstream = connection.openInputStream();
                int length = (int) connection.getLength();
                if(length!=-1){
                    byte incomingData[] = new byte[length];
                    inputstream.read(incomingData);
                    response = new String(incomingData);
                }
                else {
                    ByteArrayOutputStream bytestream = new ByteArrayOutputStream();
                    int ch;
                    while((ch = inputstream.read())!=-1){
                        bytestream.write(ch);
                    }
                    response = new String(bytestream.toByteArray());
                    bytestream.close();
                }

               System.out.println("Response:" + response.trim());

               if(response.trim().equals("Request Submitted Successfully")){
                       result = true;
               }
               else{
                    result = false;
               }
            }
            connection.close();
            if(inputstream!=null)inputstream.close();
        }
        catch(Exception e) {
            e.printStackTrace();
        }
        finally {
            if(inputstream!=null){
                try{
                    inputstream.close();
                }
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        }
     return result;
 }

public Client getClient() {
    return client;
}

public void setClient(Client client) {
    this.client = client;
}

public Display getDisplay() {
    return display;
}

public void setDisplay(Display display) {
    this.display = display;
}

public String getRequestCode() {
    return requestCode;
}

public void setRequestCode(String requestCode) {
    this.requestCode = requestCode;
}

public String getRequestId() {
    return requestId;
}

public void setRequestId(String requestId) {
    this.requestId = requestId;
}

public String getRequestServlet() {
    return requestServlet;
}

public void setRequestServlet(String requestServlet) {
    this.requestServlet = requestServlet;
}

public String getResponse() {
    return response;
}

public void setResponse(String response) {
    this.response = response;
}

public String getUrl() {
    return url;
}

public void setUrl(String url) {
    this.url = url;
}

public String getUserId() {
    return userId;
}

public void setUserId(String userId) {
    this.userId = userId;
}

public String getParameterOne() {
    return parameterOne;
}

public void setParameterOne(String parameterOne) {
    this.parameterOne = parameterOne;
} 
```

}

和....

```
package madmin.client;

import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import madmin.res.Globals;

public class ClientResponse {

private String response;

public String getResponse(String requestId) {

         System.out.println("Start HTTP Connection");
         HttpConnection connection = null;
         InputStream inputstream = null;
         response = "";

          try{

            connection = (HttpConnection) Connector.open( Globals.getURL() + "ResponseServlet?requestId=" + requestId);
            connection.setRequestMethod(HttpConnection.GET);
            connection.setRequestProperty("Content-Type", "//text plain");
            connection.setRequestProperty("Connection", "close");

            System.out.println("Status Line COde: "+ connection.getResponseCode());
            System.out.println("Status Line Message: "+ connection.getResponseMessage());

            if(connection.getResponseCode()==HttpConnection.HTTP_OK){
                inputstream = connection.openInputStream();
                int length = (int) connection.getLength();
                if(length!=-1){
                    byte incomingData[] = new byte[length];
                    inputstream.read(incomingData);
                    response = new String(incomingData);
                }
                else {
                    ByteArrayOutputStream bytestream = new ByteArrayOutputStream();
                    int ch;
                    while((ch = inputstream.read())!=-1){
                        bytestream.write(ch);
                    }
                    response = new String(bytestream.toByteArray());
                    bytestream.close();
                }

               System.out.println("Response:" + response.trim());

              connection.close();
              if(inputstream!=null)inputstream.close();
            }
            }
            catch(Exception e){

                e.printStackTrace();
            }

    return response;
}
} 
```

编辑：像这样

```
 public class MenuScreen extends List implements CommandListener{

     public MenuScreen() {
 append("Register", null);
     append("Login", null);
     append("Forgot password", null);

     select = new Command("Select", Command.OK, 1);
     addCommand(select);
     setCommandListener(this); 
```

}

}

```
 public void commandAction(Command command, Displayable display) {

      if(command==List.SELECT_COMMAND){                 
        String menuItem = this.getString(menuIndex);
      }

      if(command==select){       
        if( menuItem.equals("Register"))
     display.setCurrent(new RegisterScreen())
 }
      } 
```

# java - Java Axis WebService 重载控制

> ID：10477827
> 
> 赞同：3
> 
> 时间：2012-05-07T06:46:30.990
> 
> 标签：java, controls, overloading, axis

我们想在我们的轴 Web 服务上实现一个重载机制。基本上，我们希望在 TPS（每秒事务数）值达到指定值（例如 100 或 150）时拒绝传入的 SOAP 请求。为此，我们需要计算收到的请求数和发送的响应数。

您能否建议我从哪里开始实施此实施？如何计算请求和响应？

非常感谢， Sekhar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:32:08.703

我认为您应该在处理程序中实现消息计数和删除。以下是 Axis 文档中关于如何在 Web 服务中编写和注册处理程序的一个很好的描述：[在 JAX-WS Web 服务中使用处理程序](http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html#Handlers)。

基本上，您在代码方面所做的事情：您创建一个处理程序类，实现`javax.xml.ws.handler.soap.SOAPHandler`. 在该`handleMessage(...)`方法中，您计算​​传入的消息，并且如[Handler 接口的 Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/ws/handler/Handler.html#handleMessage%28C%29)所示，`false`如果达到过载限制，则返回。

希望这可以帮助您入门！

# xml - 使用 xslt 复制 xml Innertext

> ID：10477830
> 
> 赞同：0
> 
> 时间：2012-05-07T06:46:45.997
> 
> 标签：xml, xslt

我有一个具有以下结构的 xml：

```
<metadata style="basic">
    <zonelist>
        <zone name="z0" type="poster" id="null" x="558" y="1550" w="180" h="260"/>
        <zone name="z1" type="poster" id="null" x="738" y="1550" w="180" h="260"/>
        <zone name="z2" type="poster" id="null" x="918" y="1550" w="180" h="260"/>
        <zone name="z3" type="poster" id="null" x="1098" y="1550" w="180" h="260"/>
        <zone name="z4" type="poster" id="null" x="1278" y="1550" w="180" h="260"/>
        <zone name="z5" type="poster" id="null" x="1458" y="1550" w="180" h="260"/>
        <zone name="z6" type="poster" id="null" x="1638" y="1550" w="180" h="260"/>
    </zonelist>
    <library_animation_clips>
        <animation_clip id="intro" start="0.25" end="1.25" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="outro" start="1.26" end="2.26" start_pos="1.26" speed="1" loop="false" reverse="false"/>
        <animation_clip id="disabled" start="2.27" end="2.27" start_pos="2.27" speed="1" loop="false" reverse="false"/>
        <animation_clip id="active" start="2.28" end="2.28" start_pos="2.28" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i0_p" start="2.29" end="3.10" start_pos="2.29" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i0_i2_n" start="3.11" end="3.12" start_pos="3.11" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i1_i0_p" start="3.13" end="3.14" start_pos="3.16" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i1_i2_n" start="3.15" end="3.16" start_pos="3.17" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i2_i1_p" start="3.17" end="3.18" start_pos="3.18" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i2_i3_n" start="3.19" end="3.20" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i3_i2_p" start="3.21" end="3.22" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i3_i4_n" start="3.23" end="3.24" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i4_i3_p" start="3.25" end="3.26" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i4_i5_n" start="3.27" end="3.28" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i5_i4_p" start="3.29" end="3.30" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i5_i6_n" start="3.31" end="3.32" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i6_i5_p" start="3.33" end="3.34" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        <animation_clip id="i6_n" start="3.35" end="3.36" start_pos="0.25" speed="1" loop="false" reverse="false"/>
    </library_animation_clips>
</metadata> 
```

我需要一个 xslt 来仅从“library_animation_clips”节点复制内部文本，以便输出 xml 看起来像：

```
<Renderer Type="ThreeD">
        <ThreeDRenderer>
            <animation_clip id="intro" start="0.25" end="1.25" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="outro" start="1.26" end="2.26" start_pos="1.26" speed="1" loop="false" reverse="false"/>
            <animation_clip id="disabled" start="2.27" end="2.27" start_pos="2.27" speed="1" loop="false" reverse="false"/>
            <animation_clip id="active" start="2.28" end="2.28" start_pos="2.28" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i0_p" start="2.29" end="3.10" start_pos="2.29" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i0_i2_n" start="3.11" end="3.12" start_pos="3.11" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i1_i0_p" start="3.13" end="3.14" start_pos="3.16" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i1_i2_n" start="3.15" end="3.16" start_pos="3.17" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i2_i1_p" start="3.17" end="3.18" start_pos="3.18" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i2_i3_n" start="3.19" end="3.20" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i3_i2_p" start="3.21" end="3.22" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i3_i4_n" start="3.23" end="3.24" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i4_i3_p" start="3.25" end="3.26" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i4_i5_n" start="3.27" end="3.28" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i5_i4_p" start="3.29" end="3.30" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i5_i6_n" start="3.31" end="3.32" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i6_i5_p" start="3.33" end="3.34" start_pos="0.25" speed="1" loop="false" reverse="false"/>
            <animation_clip id="i6_n" start="3.35" end="3.36" start_pos="0.25" speed="1" loop="false" reverse="false"/>
        </ThreeDRenderer>
    </Renderer> 
```

请让我知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:25:34.843

下面的小样式表应该可以完成这项工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="metadata">
    <Renderer Type="ThreeD">
      <ThreeDRenderer>
        <xsl:apply-templates select="library_animation_clips/*"/>
      </ThreeDRenderer>
    </Renderer>
  </xsl:template>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# javascript - 大型表格中的高性能可选单元格 - IE6

> ID：10477835
> 
> 赞同：1
> 
> 时间：2012-05-07T06:47:15.577
> 
> 标签：javascript, jquery, internet-explorer, html-table

我正在开发一个具有严格业务要求的应用程序，以显示一个最多 60 行和最多 50 列的 html 表。

理想情况下，用户可以选择单个表格单元格，或者单击并拖动以选择多个单元格。

我的问题是我目前仅限于使用 IE6，而且我一直很难找到（或编码）一种方法来允许在这么多单元格上进行这种选择而不会严重降低性能。

我目前的方法看起来基本上是这样的：

```
$(document).ready(function() {
    var selecting = false;
    var colStart, rowStart;

    var tableContainer = $("#tableContainer")

    tableContainer.delegate("td", "mousedown", function() {
        //Clear Selection
        tableContainer.find("td.selected").removeClass("selected");

        $(this).addClass("selected");
        colStart = $(this).index();
        rowStart = $(this).parents("tr").index();
        selecting = true;
    }).delegate("td", "mouseover", function() {
        if (selecting) {
            //Clear Selection
            tableContainer.find("td.selected").removeClass("selected");

            var theCell = $(this);

            // Get the row and column numbers of the current cell 
            var colEnd = theCell.index();
            var rowEnd = theCell.parents("tr").index();

            // Account for rowEnd being smaller than rowStart
            var rowSliceStart = Math.min(rowStart, rowEnd);
            var rowSliceEnd = Math.max(rowStart, rowEnd);

            tableContainer.find("tr").slice(rowSliceStart, rowSliceEnd + 1).each(function() {
                var colSliceStart = Math.min(colStart, colEnd);
                var colSliceEnd = Math.max(colStart, colEnd);

                // Add the required class to the children
                $(this).children().slice(colSliceStart, colSliceEnd + 1).addClass("selected");
            });
        }
    }).delegate("td", "mouseup", function() {
        selecting = false;
    });
});​ 
```

有人对提高此功能性能的方法有任何建议吗？我相信类的添加/删除占用了大部分的性能开销，所以我特别希望在那里找到效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:10:43.817

1.  表本身就是开销，尤其是当它们包含很多东西时。表格也仅在完成时才呈现。如果可能，考虑分页。

2.  持续的 DOM 操作、重绘（改变外观）和回流（改变尺寸）也是一种开销。

3.  IE6 本身并不是为执行繁重的 JS 操作而构建的。IE6是什么？10岁？10年前的JS是什么？验证和弹出窗口对吗？

4.  重复的函数调用。在 jQuery 中，最好缓存函数调用的值，`$(this)`而不是重复调用它。

5.  正如我在您的代码中所理解的那样，您`$.each()`在鼠标悬停期间正在运行、切片和一些随机数学运算。那很重。

6.  考虑使用更新的 jQuery

另外，我已经清理了您的一些代码：

```
$(function() {
    var selecting = false,
        tableContainer = $("#tableContainer"),
        colStart, rowStart;

    tableContainer.on("mousedown", 'td', function() {
        var $this = $(this); //reference this
        colStart = $this.index();
        rowStart = $this.closest("tr").index(); //use closest instead of parents to avoid going up to root
        $(".selected", tableContainer).removeClass("selected"); //context instead of find
        $this.addClass("selected");

        selecting = true;
    }).on("mouseover", 'td', function() {
        if (selecting) {

            var theCell = $(this),
                colEnd = theCell.index(),
                rowEnd = theCell.closest("tr").index(), //use closest
                rowSliceStart = Math.min(rowStart, rowEnd),
                rowSliceEnd = Math.max(rowStart, rowEnd);

            $(".selected", tableContainer).removeClass("selected");

            $("tr", tableContainer).slice(rowSliceStart, rowSliceEnd + 1).each(function() {
                var colSliceStart = Math.min(colStart, colEnd),
                    colSliceEnd = Math.max(colStart, colEnd);
                $('> *', this).slice(colSliceStart, colSliceEnd + 1).addClass("selected"); //using selector to get children instead of $(this).children()
            });
        }
    }).on("mouseup", 'td', function() {
        selecting = false;
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:05:55.690

它实际上看起来并不太糟糕。我唯一能想到的就是计算鼠标悬停时的增量。也就是说，存储先前的开始和结束列/行，并在下一个鼠标悬停事件时，仅更新已更改元素的类。

其他小事：

*   `$(this)`在 mousedown 处理程序中缓存
*   对于 IE6，我不是 100% 确定这个，但您可以尝试将选择器从 更改`.find('td.selected')`为 just `.find('.selected')`。第一个有两个条件要检查，而只有一个。在现代浏览器中，第二个*肯定*会更快，因为 jQuery 可以利用`getElementsByClassName`，但在 IE6 中不存在，所以谁知道呢？
    *   您还可以尝试制作更有针对性的选择器，尤其是当单元格的内容包含更多 DOM 元素时。`.find('> tr > .selected')`
*   限制鼠标悬停处理程序。

# iphone - 如何在 FMDatabase 中打开外键？

> ID：10477836
> 
> 赞同：4
> 
> 时间：2012-05-07T06:47:17.500
> 
> 标签：iphone, objective-c, sqlite, fmdb

刚刚偶然发现在 sqlite 中默认禁用外键这一事实。我有“删除级联”外键，删除父表记录不会删除子记录。各种帖子表明您需要在每个连接“PRAGMA foreign_keys = ON;”上启用它。那么，在 FMDatabase 的哪里启用它呢？我宁愿设置一些设置，而不是在每个 SQL stmt 之前运行命令。PS。我正在使用 FMDatabaseQueue。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T11:11:54.560

我快速检查并`PRAGMA foreign_keys = ON;`在 5.1 模拟器和 5.1 iPod Touch 上运行良好。正如 ccgus 建议的那样，您应该缓存数据库连接。如果您使用队列，只需缓存队列并重新组织您的代码，这样就不会在您每次需要使用数据库时创建新队列。使用您当前的方法，如果您不真正使用它但每次都创建新的队列，那么有什么意义呢？

但回到问题，正如您已经知道的那样，外键默认情况下是关闭的，因此您需要首先启用它。我设法做到了`PRAGMA foreign_keys = ON;`，这是我使用的更多测试代码：

```
//create database
NSString* dbPath = [(NSArray*)NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
dbPath = [dbPath stringByAppendingPathComponent:@"test.db"];
db = [FMDatabase databaseWithPath:dbPath];
if ([db open]) {
    NSLog(@"Database %@ opened", dbPath);
    //check for foreign_key
    NSString* sql = @"PRAGMA foreign_keys";
    FMResultSet *rs = [db executeQuery:sql];
    int enabled;
    if ([rs next]) {
        enabled = [rs intForColumnIndex:0];
    }
    [rs close];
    if (!enabled) {
        // enable foreign_key
        sql = @"PRAGMA foreign_keys = ON;";
        [db executeUpdate:sql];
        // check if successful
        sql = @"PRAGMA foreign_keys";
        FMResultSet *rs = [db executeQuery:sql];
        if ([rs next]) {
            enabled = [rs intForColumnIndex:0];
        }
        [rs close];
    }
    // do your stuff here, or just cache the connection
} else {
    NSLog(@"Failed to open %@", dbPath);
} 
```

看起来相当简单，唯一想到的是您使用`executeQuery`而不是`executeUpdate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T23:55:31.913

为什么必须在每个语句之前运行它？只需打开数据库，运行您的编译指示，然后缓存连接以供以后使用（无论如何您都应该这样做……）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-11T13:54:43.447

在 Swift 3 中，我使用此函数打开启用了外键的数据库。

```
func openDB()-> FMDatabase? {
    let fileURL = try! FileManager.default
        .url(for: .documentDirectory, in: .userDomainMask, appropriateFor: nil, create: false)
        .appendingPathComponent("name.sqlite")

    let database = FMDatabase(url: fileURL)

    guard database.open() else {
        print("Unable to open database")
        return nil
    }
    do {
        try database.executeQuery("PRAGMA foreign_keys = ON", values: nil)
    } catch {
        print("failed: \(error.localizedDescription)")
    }
    return database
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-22T22:18:54.440

尽管最初的问题是针对 Objective-C 的，但这里有一个对我很有效的 Swift 扩展，以防万一有人觉得它有用：

```
 extension FMDatabase {
    var foreignKeys: Bool {
        get {
            guard let result = executeQuery("PRAGMA foreign_keys", withArgumentsIn: [])
            else { return false }

            defer { result.close() }

            guard result.next() else { return false }

            return result.bool(forColumnIndex: 0)
        }
        set {
            executeStatements("PRAGMA foreign_keys = \(newValue ? "ON" : "OFF");")
        }
    }
} 
```

所以你可以`db.foreignKeys = true`在打开数据库后调用，你就完成了。

# java - 如何通过代码为扩展点创建扩展而不是在 plugin.xml 中修改

> ID：10477838
> 
> 赞同：1
> 
> 时间：2012-05-07T06:47:30.137
> 
> 标签：java, eclipse-plugin, console, eclipse-rcp, rcp

我想在 中添加我自己的控制台`Console View`，然后在 中添加扩展点`org.eclipse.ui.console.consoleFactories`的扩展`plugin.xml`，然后创建一个扩展的类`IConsoleFactory`（只需遵循 eclipse 的说明）。

它工作正常。

但现在我想`Console View`根据我的输入参数创建许多控制台。

谁能帮我通过代码而不是修改来创建控制台`plugin.xml`？请帮我写代码，我们应该把这些代码放在哪里？是在`Activator.java`吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-26T04:28:28.510

您可以在任何地方添加代码，具体取决于您希望何时添加贡献。将其放入 Activator 可确保在您的插件启动时完成。

对于您问题的另一部分，请转到[http://www.ibm.com/developerworks/opensource/library/os-ecl-dynext/](http://www.ibm.com/developerworks/opensource/library/os-ecl-dynext/)并阅读**清单 2。如何通过 addContribution() API 添加扩展**

# c++ - C++：从 std::map 继承

> ID：10477839
> 
> 赞同：26
> 
> 时间：2012-05-07T06:47:34.190
> 
> 标签：c++, inheritance, stdmap, virtual-destructor

我想继承自`std::map`，但据我所知`std::map`没有任何虚拟析构函数。

因此，是否可以`std::map`在我的析构函数中显式调用 ' 析构函数以确保正确销毁对象？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-07T06:48:26.573

析构函数确实被调用，即使它不是虚拟的，但这不是问题。

如果您尝试通过指向`std::map`.

使用组合而不是继承，`std`容器不应该被继承，你不应该。

我假设您想扩展`std::map`（假设您想找到最小值）的功能，在这种情况下，您有两个更好且**合法**的选项：

1）如建议的那样，您可以改用组合：

```
template<class K, class V>
class MyMap
{
    std::map<K,V> m;
    //wrapper methods
    V getMin();
}; 
```

2) 自由功能：

```
namespace MapFunctionality
{
    template<class K, class V>
    V getMin(const std::map<K,V> m);
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-07T08:21:04.890

有一个误解：继承——在纯 OOP 的概念之外，C++ 不是——只不过是“具有未命名成员的组合，具有衰减能力”。

没有虚函数（从这个意义上讲，析构函数并不特殊）使您的对象不是多态的，但是如果您所做的只是“重用它的行为并公开本机接口”，那么继承正是您所要求的。

析构函数不需要相互显式调用，因为它们的调用总是按规范链接。

```
#include <iostream>
unsing namespace std;

class A
{
public:
   A() { cout << "A::A()" << endl; }
   ~A() { cout << "A::~A()" << endl; }
   void hello() { cout << "A::hello()" << endl; }
};

class B: public A
{
public:
   B() { cout << "B::B()" << endl; }
   ~B() { cout << "B::~B()" << endl; }
   void hello() { cout << "B::hello()" << endl; }
};

int main()
{
   B b;
   b.hello();
   return 0;
} 
```

将输出

```
A::A()
B::B()
B::hello()
B::~B()
A::~A() 
```

使 A 嵌入到 B 中

```
class B
{
public:
   A a;
   B() { cout << "B::B()" << endl; }
   ~B() { cout << "B::~B()" << endl; }
   void hello() { cout << "B::hello()" << endl; }
}; 
```

这将输出完全相同。

“如果析构函数不是虚拟的，则不要派生”不是 C++ 的强制结果，而只是在 C 之前出现的一个普遍接受的未编写的规则（规范中没有关于它的内容：除了一个 UB 在基础上调用 delete）规则++99，当动态继承和虚函数的 OOP 是 C++ 唯一支持的编程范式时。

当然，世界各地的许多程序员*都是*在那种学校里建立起来的（就像把 iostreams 作为原语教授，然后转到数组和指针一样，在最后一课老师说“哦……tehre 也是具有向量、字符串等高级特性的 STL”），到了今天，即使 C++ 变成了多范式，仍然坚持这个纯粹的 OOP 规则。

在我的示例中，A::~A() 与 A::hello 并不完全一样。这是什么意思？

简单：出于同样的原因，调用`A::hello`不会导致调用`B::hello`，调用`A::~A()`（通过删除）不会导致`B::~B()`. **如果您可以接受**- 在您的编程风格中 -**第一个断言，那么您没有理由不能接受第二个**。在我的示例中`A* p = new B`，不会收到，`delete p`因为 A::~A 不是虚拟的，**我知道这意味着什么**。

完全相同的原因，使用 B 的第二个示例，`A* p = &((new B)->a);`带有 a `delete p;`，尽管第二个案例与第一个案例完全对偶，但没有明显的原因，看起来没有任何人感兴趣。

唯一的问题是“维护”，从某种意义上说——如果 yopur 代码被 OOP 程序员查看——会拒绝它，不是因为它本身是错误的，而是因为他被告知要这样做。

事实上，“如果析构函数不是虚拟的，就不要派生”是因为*大多数程序员认为有太多程序员不知道他们不能在指向 base 的指针上调用 delete*。（对不起，如果这不是礼貌，但经过 30 多年的编程经验，我看不出任何其他原因！）

但你的问题不同：

调用 B::~B() （通过删除或范围结束）将始终导致 A::~A() 因为 A （无论它是嵌入的还是继承的）**在任何情况下都是 B 的一部分**。

* * *

在 Luchian 评论之后：在他的评​​论中提到的未定义行为与在没有虚拟析构函数的指向对象的基础上的删除有关。

根据 OOP 学校的说法，这导致了“如果不存在虚拟析构函数，则不要派生”的规则。

我在这里要指出的是，该学派的原因取决于这样一个事实，即每个面向 OOP 的对象都必须是多态的，并且所有都是多态的都必须可以通过指向基的指针来寻址，以允许对象替换。通过做出这些断言，该学校故意试图使派生和不可替代之间的交集无效，以便纯粹的 OOP 程序不会体验到 UB。

简单地说，我的立场是承认 C++ 不仅仅是 OOP，而且并非所有 C++ 对象都必须默认面向 OOP，并且承认 OOP 并不总是必要的需求，也承认 C++ 继承不一定总是服务于 OOP替代。

std::map 不是多态的，因此不可替换。MyMap 是一样的：不是多态的，也不是可替换的。

它只需要重用 std::map 并公开相同的 std::map 接口。继承只是避免重写函数的长样板的方法，这些函数只是调用重用的函数。

MyMap 将没有虚拟 dtor，因为 std::map 没有虚拟 dtor。这 - 对我来说 - 足以告诉 C++ 程序员这些不是多态对象，不能用一个来代替另一个。

我不得不承认，今天大多数 C++ 专家并不认同这个立场。但我认为（我唯一的个人意见）这只是因为他们的历史，这与 OOP 作为一种服务的教条有关，而不是因为 C++ 的需要。对我来说，C++ 不是纯粹的 OOP 语言，在不遵循或不需要 OOP 的情况下，不一定总是遵循 OOP 范式。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-07T07:20:13.470

> 我想继承`std::map`[...]

为什么 ？

继承有两个传统原因：

*   重用其接口（因此，针对它编码的方法）
*   重用其行为

前者在这里没有任何意义，因为`map`没有任何`virtual`方法，所以你不能通过继承来修改它的行为；后者是对继承使用的曲解，最终只会使维护复杂化。

* * *

如果没有清楚地了解您的预期用途（您的问题缺乏上下文），我会假设您真正想要的是提供一个类似地图的容器，并带有一些额外的操作。有两种方法可以实现这一点：

*   组合：您创建一个新对象，其中*包含*一个`std::map`，并提供足够的接口
*   扩展：创建新的自由函数`std::map`

后者更简单，但也更开放：原来的界面`std::map`仍然是开放的；因此不适合*限制*操作。

前者无疑更重量级，但提供了更多的可能性。

由您决定这两种方法中的哪一种更合适。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-17T14:23:11.657

@Matthieu M 你说

> 我想从 std::map [...] 继承
> 
> 为什么 ？
> 
> 继承有两个传统原因：
> 
> 1.  **重用其接口**（因此，针对它编码的方法）
> 2.  **重用其**行为
> 
>  **前者在这里毫无意义，因为 map 没有任何虚拟方法，因此您无法通过继承来修改其行为；后者是对继承使用的曲解，最终只会使维护复杂化。**

 ****关于“前者”：**

该`clear()`函数是虚拟的，对我来说，在派生类中使用迭代器重写 a 是很有意义的`std::map<key,valueClass*>::clear()`，该迭代器在调用基类之前删除所有指向值类的实例，`clear()`以防止意外的内存泄漏，它是我实际使用过的一个技巧。至于为什么有人要使用指向类的指针的映射，那么多态性和不可重新分配的引用意味着不能在 STL 容器中使用。您可能会建议使用 reference_wrapper 或智能指针，例如`shared_ptr`（C++11 特性）但是当你正在编写一个库时，你希望某些人能够使用 C++98 编译器，除非你要求拥有升压，这也可能是不可取的。而且，如果您确实希望地图对其内容拥有唯一所有权，那么您不希望使用 reference_wrapper 或大多数智能指针实现。

**关于“后者”：**

如果您想要一个指向自动删除指向内存的指针的映射，那么重用“所有”其他映射行为并覆盖 clear 对我来说很有意义，当然，您还需要覆盖赋值/复制构造函数来克隆复制地图时指向对象，这样就不会双重删除`valueClass`.

但这只需要极少量的编码即可实现。

我还使用 protected`typedef std::map<key,valueClass*> baseClassMap;`作为派生类映射声明的前 2 行，以便在迭代器循环删除派生映射中包含的所有实例后，我可以`baseClassMap::clear();`在覆盖的函数中调用，这样可以更轻松地进行维护，以防万一类型不断变化。`clear()``valueClass*``valueClass*`

*关键是*，虽然它在良好的编码实践中的适用性可能有限，但我认为说从 map 下降从来都不是一个好主意是不公平的。但也许你有一个更好的主意，我没有想到如何在不添加大量额外源代码（例如聚合 a `std::map`）的情况下实现相同的自动内存管理效果。**

# java - 将 Android SDK 更新到最新版本和 ADT 19

> ID：10477841
> 
> 赞同：1
> 
> 时间：2012-05-07T06:47:35.283
> 
> 标签：java, android, adt, dalvik, heap-memory

我正在使用 eclipse Indigo 和最新的 sdk 和 ADT 19 进行我的 android 开发。

修复以下问题后，我收到以下错误：
[http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

```
Dx warning: Ignoring InnerClasses attribute for an anonymous inner class  
(com.sun.org.apache.xpath.internal.functions.SecuritySupport12$8) that doesn't come with an  
 associated EnclosingMethod attribute. This class was probably produced by a  
compiler that did not target the modern .class file format. The recommended  
solution is to recompile the class from source, using an up-to-date compiler  
and without specifying any "-target" type options. The consequence of ignoring  
this warning is that reflective operations on this class will incorrectly indicate that it is *not* an inner class.  

Unable to execute dex: Java heap space  
Conversion to Dalvik format failed: Unable to execute dex: Java heap space 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:50:48.193

从警告消息看起来，在您使用 indigo 升级到 ADT-19 后编译器设置不正确，请尝试检查 java 编译器设置。

# iis-7 - 500 - 内部服务器错误，“您正在寻找的资源，无法显示”。

> ID：10477844
> 
> 赞同：8
> 
> 时间：2012-05-07T06:47:48.823
> 
> 标签：iis-7, crm, sage-crm

我创建了一个入口页面并为所有这些创建了字段。现在我正在尝试将字段输入到我的数据库中。

我的值保存在数据库中，但保存我的 CRM 页面后显示错误，例如

> 500内部服务器错误。您要查找的资源有问题，无法显示。

我认为这个错误可能是因为没有在 IIS 中启用父路径和身份验证权限。

我在 IIs->ASP,iis->Asp->debugging properties->send errors to browser->true 中启用了允许父路径

如何解决此错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-15T16:10:07.287

我在IIS7中发现了这一点。

我必须去有问题的站点，到“错误页面”->“编辑功能设置”并选择“详细错误”。这是一个弹出三个单选按钮的小对话框。

这为我修好了。简单地将“将错误发送到浏览器”设置为 true，并没有成功。

希望这可以帮助某人。

# java - 在用户定义的路径创建文件

> ID：10477852
> 
> 赞同：0
> 
> 时间：2012-05-07T06:48:51.220
> 
> 标签：java, file, file-io

我正在使用 java 创建一个文件

```
BufferedWriter out = new BufferedWriter(new FileWriter(FileName));          
StringBuffer sb=new StringBuffer();
sb.append("\n");
sb.append("work");
out.write(sb.toString());
out.close(); 
```

但是这个文件是在我服务器的 bin 文件夹中创建的。我想在用户定义的文件夹中创建这个文件。

怎么可能实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:52:30.613

> 我想在用户定义的文件夹中创建这个文件。

最简单的方法是指定一个完全限定的路径名​​。您可以选择它作为 a`File`并建立一个新的`File`相对于它：

```
File directory = new File("/home/jon/somewhere");
File fullPath = new File(directory, fileName);
BufferedWriter writer = new BufferedWriter(
    new OutputStreamWriter(
        (new FileOutputStream(fullPath), charSet));
try {
    writer.write("\n");
    writer.write("work");
} finally {
    writer.close();
} 
```

笔记：

*   我建议使用`FileOutputStream`包装在 an`OutputStreamWriter`而不是 using `FileWriter`，因为你不能指定编码`FileWriter`
*   使用`try`/`finally`块（或 Java 7 中的 try-with-resources），以便即使出现异常也始终关闭编写器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:52:45.090

要在特定目录中创建文件，您需要在文件名中指定它。

否则它将使用当前工作目录，该目录可能是程序的启动位置。

顺便说一句：除非您使用的是 Java 1.4 或更早版本，否则您可以使用 StringBuilder 而不是 StringBuffer，尽管在这种情况下 PrintWriter 会更好。

# python - Python list pop() 比 list[1:] 慢得多

> ID：10477855
> 
> 赞同：0
> 
> 时间：2012-05-07T06:48:59.397
> 
> 标签：python, performance, profiling

我最近写了一个快速而肮脏的 BFS 实现，在有向图中找到菱形。BFS 循环如下所示：

```
while toVisit:
    y = toVisit.pop()
    if y in visited: return "Found diamond"
    visited.add(y)
    toVisit.extend(G[y]) 
```

（`G`是图 - 从节点名称到其邻居列表的字典）

然后是有趣的部分：我认为这`list.pop()`可能太慢了，所以我运行了一个分析器来比较这个实现的速度与 deque.pop - 并得到了一些改进。然后我将它与 进行比较`y = toVisit[0]; toVisit = toVisit[1:]`，令我惊讶的是，最后一个实现实际上是最快的。

这有道理吗？是否有任何性能原因可以使用`list.pop()`而不是明显更快的两线？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T06:54:01.627

你测错了。在 x64 上使用 cPython 2.7，我得到以下结果：

```
$ python -m timeit 'l = list(range(10000))' 'while l: l = l[1:]'
10 loops, best of 3: 365 msec per loop
$ python -m timeit 'l = list(range(10000))' 'while l: l.pop()'
1000 loops, best of 3: 1.82 msec per loop
$ python -m timeit 'import collections' \
         'l = collections.deque(list(range(10000)))' 'while l: l.pop()'
1000 loops, best of 3: 1.67 msec per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T11:49:49.340

使用生成器来提高性能

`python -m timeit 'import itertools' 'l=iter(xrange(10000))' 'while next(l, None): l,a = itertools.tee(l)'`

`1000000 loops, best of 3: 0.986 usec per loop`

# vim - 如何仅在 Vim 的某些上下文中启用语法隐藏？

> ID：10477857
> 
> 赞同：6
> 
> 时间：2012-05-07T06:49:18.030
> 
> 标签：vim, syntax

我想隐藏具有基于希腊符号名称的变量并将它们转换为它们的 Unicode 等效符号，类似于[vim-cute-python 的](https://github.com/ehamberg/vim-cute-python)工作方式。例如，我有这个：

```
syntax match scalaNiceKeyword "alpha" conceal cchar=α 
```

在一个文件中定义，用于隐藏在 Scala 文件中，除了过于激进之外，效果很好。如果我写`alphabet`它然后被隐藏成为`αbet`，这是明显错误的。

如何修改或扩展此隐藏语句，使其仅隐藏匹配的关键字`[ _]alpha[ _]`？换句话说，我想要以下转换：

```
alpha_1 => α_1
alpha => α
alphabet => alphabet 
```

**注意：**这与[此问题](https://stackoverflow.com/questions/4057028/how-can-i-get-context-dependent-syntax-coloring-for-the-same-keyword-in-vim)类似，但似乎稍微复杂一些，因为我要匹配的组环境是空格和下划线。像下面这样天真地定义一个语法区域会使事情发生各种各样的错误：

```
syn region scalaGreekGroup start="[ _]" end="[ _]" 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T02:56:48.783

修改模式以仅匹配由单词边界或下划线分隔的名称：

```
:syntax match scalaNiceKeyword '\(_\|\<\)\zsalpha\ze\(\>\|_\)' conceal cchar=α 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:28:08.053

有一个名为的脚本[`unilatex.vim`](http://vim.sourceforge.net/scripts/script.php?script_id=284)定义`imaps`了`\alpha => α`打开/写入和保存时的反向转换。我将它用于乳胶代码并对其进行了修改以放弃反向转换，因为我的乳胶编译器能够正确执行 unicode。我不知道 scala 源代码是否可以是 unicode，但如果可以的话，你可以看看[我的版本](https://github.com/epsilonhalbe/dotfiles/tree/master/vim/ftplugin/tex)。

# html - 为什么 z-index 在这里不起作用

> ID：10477859
> 
> 赞同：0
> 
> 时间：2012-05-07T06:49:33.857
> 
> 标签：html, css

我正在尝试使图像重叠，我应该看到第一张图像的所有“Adobe”，但是第二张图像阻止了 e，第三张图像也是如此。

![在此处输入图像描述](../Images/a06f97126c09d66045b5b174bfe7af37.png)

我使用不同的 z-index 使最左边的图像显示在 stack 的顶部，但它在这里不起作用。使用负值的 margin-left 是错误的吗？

```
<html>
    <head>
        <title>Demo</title>
        <style>
            li {
                float: left;
                display: inline;
                margin-left: -20px;
            }
            .A {
                z-index: 10;
            }
            .B {
                z-index: 9;
                margin-top: 3px;
            }
            .C {
                margin-top: 6px;
                z-index: 8;
            }
        </style>
    </head>
    <body>
        <ul>
            <li><img class="A" src='adobe.gif' /></li>
            <li><img class="B" src='adobe.gif' /></li>
            <li><img class="C" src='adobe.gif' /></li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T06:54:15.603

您需要添加此规则：

```
li img {
    position: relative;
} 
```

或 的另一个值`position`，正如 的定义`z-index`所说，它仅适用于定位元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:57:09.303

**JSBIN：http: [//jsbin.com/itepeg](http://jsbin.com/itepeg)**

像这样调整你的代码：

```
<html>
<head>
<style type="text/css">
.A
{
position:absolute;
left:0px;
top:0px;
z-index:-1;
}
.B
{
position:absolute;
left:40px;
top:10px;
z-index:-1;
}
  .C
{
position:absolute;
left:80px;
top:20px;
z-index:-1;
}
</style>
</head>

<body>

  <ul>
            <li><img class="A" src='http://l.yimg.com/cv/ip/ap/default/111202/vs_fc.jpg'></li>
            <li><img class="B" src='http://l.yimg.com/cv/ip/ap/default/111202/vs_fc.jpg'></li>
            <li><img class="C" src='http://l.yimg.com/cv/ip/ap/default/111202/vs_fc.jpg'></li>
        </ul>

</body>
</html> 
```

**JSBIN：http: [//jsbin.com/itepeg](http://jsbin.com/itepeg)**

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T06:57:20.863

看起来标签的组合是您的问题 - 在尝试强制执行 z-index 时逐渐留出边距并不理想。您希望它们重叠还是重叠出现？

如果一个在另一个之上，那么我很想建议您的 UL/LI 组合不是必需的，只需一个：

```
<div class="image_container">
  <img class="A">
  <img class="B">
  <img class="C">
</div> 
```

并因此拥有CSS：

```
.image_container {
    position: relative;
    width: <widest image width>;
    height: <highest image height>;
}

.image_container img {
    position: absolute;
}

.image_container img.A {
   z-index: 10;
}
.image_container img.B {
   z-index: 9;
}

etc. 
```

我不是 100% 确定你所说的重叠是什么意思——你可能想大致实现你没有重叠的东西？.

# ruby-on-rails-3 - rake db:migrate 不工作 - 持续挂起

> ID：10477860
> 
> 赞同：0
> 
> 时间：2012-05-07T06:49:43.403
> 
> 标签：ruby-on-rails-3, sqlite, rake, dbmigrate

```
>C:\rails_projects\sample_app>rake db:migrate
>-- create_table("users", {:force=>true})
>   -> 0.5100s
>-- add_index("users", ["email"], {:name=>"index_users_on_email", :unique=>true})
>   -> 0.0170s
>-- initialize_schema_migrations_table()
>   -> 0.0340s
>-- assume_migrated_upto_version(20120428165946, ["C:/rails_projects/sample_app/db/migrate"
>])
>   -> 0.0560s
>You have 1 pending migrations:
>  20120507063126 AddAdminToUsers
>Run `rake db:migrate` to update your database then try again. 
```

每次我运行“rake db:migrate”时，这就是我得到的。迁移一直悬而未决，我不能让它去吗？我是新手，我相信这很容易解决，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:39:42.593

我想到了。无论出于何种原因，“伪造”宝石导致了问题。我注释掉了 sample_data.rake 文件中的所有行，它起作用了。

# perl - perl 脚本中的“#”问题

> ID：10477870
> 
> 赞同：0
> 
> 时间：2012-05-07T06:50:46.047
> 
> 标签：perl

我正在用 perl 开发一个自动化脚本，在该脚本中，我编写了一个子例程，它接受用户输入的密码并将其返回给 perl 主程序，后者又将密码传递给我需要自动化的工具。

`#`除非字符是密码的一部分，否则此脚本适用于所有情况。然后它无法自动化该工具并且无法进行身份验证。

下面是我用来输入密码的子程序。

```
use Win32::Console;

sub password() {
    $StdIn = new Win32::Console(STD_INPUT_HANDLE);
    my $Password = "";

    $StdIn->Mode(ENABLE_PROCESSED_INPUT);
    print "Enter Password: ";

    while (ord(my $Data = $StdIn->InputChar(1)) != 10) { 
        if("\r" eq $Data ) {
            last;
        }
        elsif ("\ch" eq $Data) {
            if( "" ne chop( $Password )) {
                print "\ch \ch";
            }
            next;
        }
        $Password .=$Data;
        print "*";
    }
    return $Password;
} 
```

我将上述子程序称为

```
$passwd = &password(); 
```

然后传递 `$passwd`给我需要自动化的工具，如下所示，

这是我将密码传递给工具的行，

```
cc -c URL OF THE TOOL:$server -d $domain -t $appl -u $userid -p $passwd; \n"; 
```

任何人都可以交叉检查调用password() 子例程、返回$password 并将$passwd 传递给工具的代码。我认为错误可能出现在三个地方之一。请有人帮忙，如果可能的话也提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:43:54.727

在我看来，在 shell 端引用是个问题。正确的引用规则完全取决于您系统的命令外壳。例如，在 bash 中，在 Perl 脚本中`-p '$password'`音译`'`为时，您通常可以相当安全地使用 , 之类的东西。`\'`或者可能有一个模块，我不知道。

但是，这是您将数据传递到的“cc”东西。该工具可以支持更简单的安全传递密码的方法，即**避免引用**任意数据的需要。此类工具的示例是通过 STDIN、通过外部文件（这实际上可能非常不安全:)）或以空字符结尾的字符串。或仅传递哈希。所以我会查看文档。

请注意，将用户收集的数据传递到 shell 会带来很大的安全风险。考虑使用 Perl 的[Taint mode](http://perldoc.perl.org/perlsec.html#Taint-mode)。

更新：你说它是 Windows，所以我应该警告你：引用 cmd.exe 是我做过的最复杂、最痛苦和令人沮丧的事情之一。看看[这个问题](https://stackoverflow.com/questions/4094699/how-does-the-windows-command-interpreter-cmd-exe-parse-scripts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T06:57:12.430

您可能正在将用户输入传递给某种不支持 literal 的外部工具`#`，可能是因为它被解释为“评论开始”。贝壳很可能是嫌疑犯。但是没有示例代码，我们无法确定您的问题是什么。

# mediawiki - 使用 dumpBackup.php 制作 MediaWiki 的 XML 转储

> ID：10477874
> 
> 赞同：1
> 
> 时间：2012-05-07T06:50:57.523
> 
> 标签：mediawiki

`dumpBackup.php`使用名为我想创建我的 MediaWiki 的 XML 转储的MediaWiki 维护脚本。

为此，您必须使用 SSH 客户端登录服务器，我使用的是 Putty (Windows)，但我也在 OSX 上使用终端进行了尝试。

根据[DumpBackup.php 的 MediaWiki 手册，](http://www.mediawiki.org/wiki/Manual%3aDumpBackup.php)这是使用以下命令完成的：

```
cd w/maintenance
php dumpBackup.php --full >d:\backup.xml 
```

因为我使用的是 GoDaddy 托管，所以最后一行对我来说有点不同。原因是 GoDaddy 的 SSH 默认仍使用 php4（与 HTTP 服务器不同）。出于这个原因，我的命令是（假设您也在维护文件夹中）：

```
usr/local/php5/bin/php dumpBackup --full >d:\backup.xml 
```

然而，这对我来说只是在屏幕上打印所有内容，并且没有创建文件。**有谁知道这是**为什么以及如何确保创建文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:22:32.940

`>`您从原始示例中遗漏了：

```
php dumpBackup.php --full >d:\backup\dump.xml 
```

告诉 shell将`>`脚本的输出重定向到文件`d:\backup\dump.xml`而不是屏幕。

顺便说一下，`d:\backup\dump.xml`是一个Windows文件名。由于您的服务器似乎使用的是 Unixish 操作系统（可能是 Linux），因此您可能不想使用该文件名。但是，如果您不介意在当前目录中创建文件，那么在`dump.xml`Windows 和 *nix 上都可以正常工作。

您也可以尝试例如`~/dump.xml`or `$HOME/dump.xml`（两者都在您的主目录中创建文件）或`$TMP/dump.xml`（通常在为临时文件设计的目录中创建它`/tmp`。）如果目录中没有足够的可用空间，这可能很有用你安装了 MediaWiki。

要查看您有多少空间，请尝试使用命令`df -h`（显示实际可用空间量）和`quota -vs`（显示您可以使用多少空间，如果有限制的话）。有关这些命令的更多帮助，请尝试[`man df`](http://linux.die.net/man/1/df)和/或[`man quota`](http://linux.die.net/man/1/quota).

# javascript - 从 bing 地图中移除左下悬停

> ID：10477880
> 
> 赞同：0
> 
> 时间：2012-05-07T06:51:33.123
> 
> 标签：javascript, bing-maps

![高亮区域](../Images/162d34c951c51d438e32f0435c83aff4.png)

在实施基于 bing 地图的解决方案时，左下角的徽标（在上图中突出显示）会导致出现一个搜索框以使用 bing 进行搜索。有没有人成功禁用此功能？

理想情况下，该解决方案不会涉及完全禁用地图上的悬停事件，因为我们已经实施了悬停事件来提供功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T06:59:04.787

初始化地图时，将*enableSearchLogo*属性设置为 False。 [http://msdn.microsoft.com/en-us/library/gg427603.aspx](http://msdn.microsoft.com/en-us/library/gg427603.aspx)

# javascript - Math.round 不是构造函数

> ID：10477883
> 
> 赞同：3
> 
> 时间：2012-05-07T06:51:48.087
> 
> 标签：javascript

考虑以下：

```
x = function () {}
p = new x()
console.log(p) // ok

Math.z = function () {}
p = new Math.z()
console.log(p) // ok 

p = new Math.round()
console.log(p) // TypeError: function round() { [native code] } is not a constructor 
```

所以我可以使用`new`我自己的函数，但不能使用`Math.round`. 是什么让它如此特别？这是在某处记录的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T07:01:51.793

`Math.round`您可以在自己的函数上复制此行为，这没什么特别的：

```
MyClass = function(){};
MyClass.round = function(x){ 
    if(this instanceof MyClass.round)
        throw 'TypeError: MyClass.round is not a constructor';
    return Math.round(x);
}

console.log(MyClass.round(0.5));  // 1
new MyClass.round(); // 'TypeError: MyClass.round is not a constructor' 
```

事实上，您可以使用类似的模式使`new`关键字在您的类中成为可选：

```
function MyClass(){
    if(!(this instanceof MyClass)) // If not using new
        return new MyClass();      // Create a new instance and return it

    // Do normal constructor stuff
    this.x = 5;
}

(new MyClass()).x === MyClass().x; 
```

至于为什么`new`不能使用内置函数和方法，这是设计使然，并记录在案：

> 除非在特定函数的描述中另有说明，否则本节中描述的不是构造函数的内置函数都不应实现 [[Construct]] 内部方法。-- [http://es5.github.com/#x15](http://es5.github.com/#x15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:58:16.270

这是一种方法，这就是为什么你不能把它放在`new`它之前。

ps：

```
new alert()        //TypeError: Illegal invocation
new console.log()  //TypeError: Illegal invocation
new function(){}   //OK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:58:07.660

Math 是一个类，因此您可以从中创建一个对象。Math.round 是一种数学方法。您不能从方法创建对象。

# language-agnostic - 如何使用 GPS 坐标创建区域

> ID：10477884
> 
> 赞同：0
> 
> 时间：2012-05-07T06:51:51.487
> 
> 标签：language-agnostic, geometry, geodesic-sphere

假设我有一个 GPS 坐标说 A（以经纬度十进制形式，然后我想创建一个半径为 30 米的区域（一个圆圈），以便我可以捕获进入该区域的任何设备（具有 GPS 坐标），怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:11:19.497

看看这个 javascript 示例，但它很容易在任何其他语言上实现。

主要代码：

```
 var earthRadiusKm = 3437.74677 * 1.1508 * 1.6093470878864446;

    function GeoArea(centerLat, centerLng, distanceKm, northPoint, southPoint, eastPoint, westPoint) {
        this.northPoint = northPoint;
        this.southPoint = southPoint;
        this.eastPoint = eastPoint;
        this.westPoint = westPoint;
        this.inArea = function (lat, lng) {
            var inBox = southPoint.lat <= lat && lat <= northPoint.lat && westPoint.lng <= lng && lng <= eastPoint.lng;
            if (inBox) {
                var distanceFromCenterKm = calcDistance(centerLat, centerLng, lat, lng);
                return distanceFromCenterKm <= distanceKm;
            } else {
                return false;
            }
        }
    }

    function GeoPoint(lat, lng) {
        this.lat = lat;
        this.lng = lng;
    }

    function toDegrees(radians) {
        return radians / (Math.PI / 180);
    }

    function toRadians(degrees) {
        return Math.PI / 180 * degrees;
    }

    function calcDistance(latA, lngA, latB, lngB) {
        var rLatA = toRadians(latA);
        var rLatB = toRadians(latB);
        var rHalfDeltaLat = toRadians((latB - latA) / 2);
        var rHalfDeltaLng = toRadians((lngB - lngA) / 2);

        return 2 * earthRadiusKm * Math.asin(Math.sqrt(Math.pow(Math.sin(rHalfDeltaLat), 2) + Math.cos(rLatA) * Math.cos(rLatB) * Math.pow(Math.sin(rHalfDeltaLng), 2)));
    }

    function findPoint(lat, lng, bearing, distance) {
        var rLat = toRadians(lat);
        var rLng = toRadians(lng);
        var rBearing = toRadians(bearing);
        var rAngDist = distance / earthRadiusKm;

        var rLatB = Math.asin(Math.sin(rLat) * Math.cos(rAngDist) + Math.cos(rLat) * Math.sin(rAngDist) * Math.cos(rBearing));
        var rLngB = rLng + Math.atan2(Math.sin(rBearing) * Math.sin(rAngDist) * Math.cos(rLat), Math.cos(rAngDist) - Math.sin(rLat) * Math.sin(rLatB));

        var pLat = toDegrees(rLatB);
        var pLng = toDegrees(rLngB);
        return new GeoPoint(pLat, pLng);
    }

    function calcArea(lat, lng, distanceKm) {
        var northPoint = findPoint(lat, lng, 0, distanceKm);
        var eastPoint = findPoint(lat, lng, 90, distanceKm);
        var southPoint = findPoint(lat, lng, 180, distanceKm);
        var westPoint = findPoint(lat, lng, 270, distanceKm);
        return new GeoArea(lat, lng, distanceKm, northPoint, southPoint, eastPoint, westPoint);
    } 
```

使用示例：

```
 // calculate area with center in lat:55.742793 lng:37.615401
    // and distance in 23 km
    var area = calcArea(55.742793, 37.615401, 23);

    //returns true
    area.inArea(55.714735, 37.629547);
    //returns false
    area.inArea(55.693842, 38.015442); 
```

# hibernate - CreateNamedQuery 空指针异常

> ID：10477886
> 
> 赞同：0
> 
> 时间：2012-05-07T06:52:10.633
> 
> 标签：hibernate, exception, jpa, nullpointerexception

我有以下代码：

```
TypedQuery<Employee> query = em.createNamedQuery("QueryName", Employee.class); 
```

这导致休眠时的空指针异常。

有谁知道为什么？

下面是堆栈跟踪：

java.lang.NullPointerException at org.hibernate,internal.SessionFactoryImpl.getReturnTypes(); 在 org.hibernate.internal.AbstractQueryImpl.getReturnTypes();

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:59:28.803

查看有关如何使用 createNamedQuery 方法的[文档。](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#createNamedQuery%28java.lang.String%29)您应该用实际查询替换“QueryName”。

# android - 显示先前活动传递的微调器数据

> ID：10477887
> 
> 赞同：1
> 
> 时间：2012-05-07T06:52:13.123
> 
> 标签：android

这是我的项目描述。

我有 Activity A 和 Activity B ， Activity B 有一个微调器和文本字段现在我需要将数据从 Activity A 传递到 Activity B 并将其显示在微调器和文本字段上。我已经在文本字段上显示了数据，但不知道如何在微调器上显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:58:43.530

[使用Activity Extras](http://mobileorchard.com/android-app-development-using-intents-to-pass-data-and-return-results-between-activities/)检索数据，然后这样做：

```
Spinner spinner = new Spinner(this);
ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(this,
    android.R.layout.simple_spinner_dropdown_item,
        new String[] { "Apple", "Peach", "Banana" });
spinner.setAdapter(spinnerArrayAdapter); 
```

# java - java和C++之间的字符串大小关系

> ID：10477888
> 
> 赞同：3
> 
> 时间：2012-05-07T06:52:21.923
> 
> 标签：java, c++, string

我正在开发基于 Java 构建的某个应用程序。Java 层与 C++ 层对话，后者执行从数据库形成 sql 查询的逻辑并将结果返回给 Java 层。

用一个更简单的例子：

在Java方面

```
nameField = new JTextField(20) //20 chars max length
name = t.getText() // name is sent to CPP layer 
```

在 CPP 层上，接收来自 java 层的名称并将其存储在局部变量中，例如 cppName。我对 CPP 层中使用的变量声明感到困惑。他们中的大多数是这样声明的：

```
char cppName[20*4+1] 
```

我想知道这里20*4+1的意义。在 cpp 端声明所有变量大小为 javaSize*4+1 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T06:55:18.720

java代码中的字符是UNICODE吗？如果是这样，单个`char`不足以存储 UNICODE 字符，则比率为`4:1`. 最后一个字符 (+1) 是空终止符。

所以在 C++ 端需要 4 个字节，也就是 4 个字节`char`来存储单个 Java 字符，而 C++ 中以 char 表示的字符串是以空字符结尾的（最后一个字符必须是`'\0'`），所以`20*4+1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:59:31.670

如果通过 UTF-8 翻译字符串，则每个字符都可以变成 4 字节。由于如果您超出保留的内存，CPP 不提供任何保护，因此您必须采用最坏情况的大小，即使您不相信自己会使用这些字符。

BTW 在 Java 中字符串存储为 UTF-16，这意味着它支持 65535 以上的字符作为使用两个字符的代码点。

[http://java.sun.com/developer/technicalArticles/Intl/Supplementary/](http://java.sun.com/developer/technicalArticles/Intl/Supplementary/)

Java 中支持的代码点的最长字符在 UTF-8 编码时变为 4 个字节。

```
StringBuilder sb = new StringBuilder();
sb.appendCodePoint(Character.MAX_CODE_POINT);
System.out.println(sb.toString().getBytes("UTF-8").length); // prints 4 
```

尽管这在技术上占用了`char`字符串中的两个。如果你取最大的字符，你会得到 3。所以真的 4 过于保守（因为需要两个字符才能产生 4 个字节）

```
StringBuilder sb = new StringBuilder();
sb.appendCodePoint(Character.MAX_VALUE);
System.out.println(sb.toString().getBytes("UTF-8").length); // prints 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:57:11.003

Java 字符是 unicode，因此如果您想将它们作为 ascii 传递给 C，您将不得不使用 string.getBytes(charset()) - 将为您提供所需字符集的字节数组。在 C 端，您将不得不添加终止空字节 - 因此 +1

# java - 字节序列成帧

> ID：10477889
> 
> 赞同：0
> 
> 时间：2012-05-07T06:52:23.200
> 
> 标签：java, networking, byte, communication

假设我从网络上得到一个字节序列，顺序如下：XXXX = XXXX = XXXX = ... 依此类推，您可以立即注意到模式（一条消息是 5 个字节的序列：“XXXX =
X 可以是任何当然除了'='之外的数字）

现在，传输周期性地发生。在某些时候，我的应用程序正在启动并获取字节序列

**获取这些字节并将它们构建为 5 字节消息的最佳算法是什么？**
有两个问题：
1.如何找到第一条消息？我想我需要删除一些字节直到我得到'='对吗？
2\. 应用程序如何处理传输暂停和**重新开始**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:04:37.580

最简单的方法是使用阻塞读取（这是最常见的，因为它最简单）一次读取 5 个字节。

通常，您不会假设一开始就有垃圾数据，而只是阅读所有内容。如果你有标题，我也会读。

```
DataInputStream dis = new DataInputStream(socket stream);
byte[] bytes = new byte[5];

int sep;
do {
  dis.readFully(bytes);
  process(bytes);
} while((sep = dis.read()) == '=');
if (sep > 0)
   System.err.println("Unexpected character "+ (char) sep)); 
```

# nhibernate - NHibernate 中的 PrimitiveType 是怎么回事？

> ID：10477890
> 
> 赞同：2
> 
> 时间：2012-05-07T06:52:24.583
> 
> 标签：nhibernate

[我刚刚注意到](http://lostechies.com/jimmybogard/2012/05/01/persisting-enumeration-classes-with-nhibernate/)有人使用 PrimitiveType 类。它似乎是 IUserType 的替代品，但我找不到任何文档。它是干什么用的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T08:19:21.773

`PrimitiveType`是 NHibernate 中基本类型实现的基类。它不是一个`IUserType`，它是一个 IType。对我来说，它似乎不打算在 NHibernate 之外继承，至少不是为了常规的东西。另一边，它似乎更强大，它也是一个公共类。但是，如果您可以使用常规解决问题`IUserType`，我建议您使用它。

NH 中的所有类型都实现`IType`。与包装`PrimitiveType`同一层的. 所以不是直接的。`CustomType``IUserType``IUserType``IType`

![在此处输入图像描述](../Images/9f041f29a40790cf38c75b47bbe5bee4.png)

# testing - 哪个IOmeter版本最稳定？

> ID：10477892
> 
> 赞同：0
> 
> 时间：2012-05-07T06:52:33.367
> 
> 标签：testing, automated-tests, qa

我曾经使用 IOMeter 2006.7.27 可以打开配置文件。我已将其更改为 1.1.0-rc1 版本，看到结果有点高，悬停它无法加载配置文件。我正在使用Windows 7，请给我一个解决方案，我真的很感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T16:34:44.987

[http://techreport.com/forums/viewtopic.php?f=5&t=86757](http://techreport.com/forums/viewtopic.php?f=5&t=86757)

当涉及到配置文件时，最后发布的二进制文件中有一个错误。在每个配置文件的顶部和底部，您会发现如下一行：

版本 1.1.0

现在新版本 1.1.0 无法识别这个版本，即使它在保存配置文件时自己编写它！它仍在使用旧的版本控制方案，该方案具有如下所示的页眉和页脚：

版本 2006.07.27

它已在 1.1.0 的最后版本中修复，但您必须从源代码构建 IOmeter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:04:25.600

我遇到过同样的问题。将配置文件的第一行更改为：`Version 2004.07.30`而不仅仅是 1.1.0。

IOmeter 似乎在寻找一个日期字符串，而版本一打破了它。

# iphone - Cocos2d 用 CCRotateBy 摇摆动画？

> ID：10477898
> 
> 赞同：2
> 
> 时间：2012-05-07T06:52:55.400
> 
> 标签：iphone, ios, cocos2d-iphone, ccrotateby

我是 Cocos2d 的新手，正在寻求一些帮助。

我有一个精灵，我想向左旋转 45 度，再次居中，然后向右旋转大约 45 度。有点像摇摆动作。

我希望在触摸实际精灵时完成此操作，而不仅仅是屏幕上的任何位置。

就像现在一样，当我触摸屏幕上的任何位置时，它会旋转 360 度（360 度用于测试），但每次点击屏幕时，我都会得到一个新的精灵。

我的问题是一个，我该如何设置它，以便当我触摸精灵时它会执行我所追求的摇摆动作？每次点击屏幕时都不会弹出新的精灵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T07:04:52.570

您可以检查哪个精灵`UITouch`打开（通过检查触摸点是否在每个精灵的矩形中）并根据您的要求启动`ccTouchesBegan`动画`ccTouchesEnded`。您可以查看 cocos2d 中包含的“TouchesTest”示例。

您可以像这样实现动画：

```
CCAction *action = [CCSequence actions:
                    [CCRotateBy actionWithDuration:0.25 angle:-45],
                    [CCRotateBy actionWithDuration:0.5 angle:90],
                    [CCRotateBy actionWithDuration:0.25 angle:-45],
                    nil];
[theSprite runAction:action]; 
```

# asp.net - DataBinding：“System.Data.DataRowView”不包含名为“M”的属性

> ID：10477904
> 
> 赞同：0
> 
> 时间：2012-05-07T06:53:39.093
> 
> 标签：asp.net, .net, data-binding

我在运行时收到此异常，它说它在数据源中找不到列“M”，但我没有在任何地方使用“M”。我正在尝试将数据绑定到 gridview 中的下拉列表。我需要在 .aspx 页面而不是后面的代码中执行此操作。这是我正在使用的代码：

```
<asp:GridView ID="grdDrpDownlistSample" runat="server" AutoGenerateColumns="false" DataSourceID="sqlDS1">
    <Columns>
    <asp:TemplateField HeaderText="User Name">
    <ItemTemplate>
    <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name").ToString()%>'></asp:Label>
    </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Logged In Status">
    <ItemTemplate>
    <asp:CheckBox ID="chkStatus" runat="server" Checked='<%# Eval("LoggedIn") %>'></asp:CheckBox>
    </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Sex">
    <ItemTemplate>
    <asp:DropDownList ID="drpSex" DataSourceID="sqlDS1" runat="server" DataTextField='<%# Eval("Sex") %>'  DataValueField='<%# Eval("id") %>' ></asp:DropDownList>
    </ItemTemplate>
    </asp:TemplateField>
    </Columns>

    </asp:GridView>
    <asp:SqlDataSource ID="sqlDS1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" SelectCommand="select * from Users"> </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:40:03.683

它现在正在工作。我通过从下拉列表中删除 Eval 来完成这项工作，因为它只需要列名而不是 Eval 表达式。

# jquery - 如何在 jquerymobile 中将值从一个页面传递到另一个页面？

> ID：10477905
> 
> 赞同：1
> 
> 时间：2012-05-07T06:53:46.137
> 
> 标签：jquery, html, jquery-mobile

> **可能重复：**
> [jQuery mobile 将参数从一个页面传递到另一个页面](https://stackoverflow.com/questions/8349388/jquery-mobile-passing-parameter-from-one-page-to-another)

我需要将值从一个页面 html 传递到另一个 html 页面。传递价值的最佳方式是什么。谁能解释我如何实现这一目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T07:00:59.423

您可以通过表单、url 和会话传递变量。您可以使用在现有 Web 应用程序中使用的所有方法将数据从一个页面传递到另一个页面。或者您可以利用 HTML5 的本地存储，这是一种存储安全数据的现代且更快的方式

```
localStorage.lastname="Smith";
document.getElementById("result").innerHTML="Last name: "+ localStorage.lastname; 
```

您可以在以下链接中找到有关 HTML5 本地存储的更多信息

[http://www.w3schools.com/html5/html5_webstorage.asp](http://www.w3schools.com/html5/html5_webstorage.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:07:01.823

您可以使用 html5 本地或会话存储 api 跨页面存储小数据。

设置会话存储的值

```
window.sessionStorage.setItem('key', 'value'); 
```

并获得价值

`sessionStorage.getItem('key');`

# android - 按状态栏上的清除通知文本会清除吗？

> ID：10477907
> 
> 赞同：1
> 
> 时间：2012-05-07T06:53:48.687
> 
> 标签：android, android-notifications, android-notification-bar

在我的应用程序中，我在通知栏上显示通知文本和图标，但我的问题是当用户按下`clear`通知栏时它会被清除。我要阻止它！？还有一些其他问题：

1.  我想通过不同的活动为我的应用程序创建通知，比如说一个在启动时显示“欢迎使用应用程序”，第二个活动显示“请选择”，在“数据发送活动”中显示“记录发送成功”！
2.  如何删除应用程序退出时的通知。
3.  如何在用户按下通知栏上的清除按钮时禁止用户清除通知
4.  当用户按下它以打开活动时，如何从状态栏中删除通知？

有什么帮助吗？

我当前的代码

```
private void Notification(String notificationTickerText, String Title,
            String text, Notification nt) {
        notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        int icon = R.drawable.nicon;
        CharSequence tickerText = notificationTickerText;

        long when = System.currentTimeMillis();
        nt = new Notification(icon, tickerText, when);

        Context context = getApplicationContext();
        CharSequence contentTitle = Title;
        CharSequence contentText = text;
        Intent notificationIntent = new Intent(this, frmLogin.class);

        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                notificationIntent, 0);

        nt.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        notificationManager.notify(1, nt);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:50:54.607

如果您阅读[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)可能会回答您所有的问题。

它提到您可以使用以下内容来防止通知被清除：

> FLAG_NO_CLEAR 标志
> 
> 将此添加到标志字段以指示不应通过“清除通知”按钮清除通知。如果您的通知正在进行，这将特别有用。

您可以使用 FLAG_AUTO_CANCEL 取消通知，但我不完全确定与 FLAG_NO_CLEAR 结合使用是否会起作用。如果没有，您将不得不手动[取消](http://developer.android.com/reference/android/app/NotificationManager.html#cancel(int))通知。

# node.js - 具有单个数据库的多个节点实例

> ID：10477908
> 
> 赞同：6
> 
> 时间：2012-05-07T06:53:51.910
> 
> 标签：node.js, mongodb, transactions, redis

我目前正在编写一个 Node 应用程序，并且正在考虑扩展。据我了解，水平扩展是扩展应用程序以处理更多并发请求的更简单方法之一。我的工作副本目前在后端使用 MongoDb。

因此，我的问题是：我有一个类似于链表的数据结构，需要严格维护顺序。我（想象中的）担心的是，当通过多个节点实例对数据库存在竞争条件时，链表的解析可能会不正确。

举个例子：想象一下服务器有这个列表 a->b。实例 1 与对象 c 一起出现，实例 2 与对象 d 一起出现。可能存在竞争条件，其中两个实例都读取 a->b 并决定将自己的对象附加到列表中。然后实例 1 会认为它的插入是 a->b->c，而实例 2 认为它是 a->b->d，而数据库实际保存的是 a->b->c->d。

一般来说，这听起来像是乐观锁定的工作，但是，据我了解，MongoDB 或 Redis（我正在考虑的另一个数据库）都不会以 SQL 方式进行事务。

因此，我认为解决方案是以下之一：

1.  使用标志在 MongoDB 中实现我自己的事务。客户端对锁变量执行 findAndModify，如果成功，则执行操作。如果不成功，客户端会在特定超时后重试。

2.  使用 Redis 事务和 pubsub 可以达到相同的效果。我还不完全确定如何做到这一点，但听起来它可能是合理的。

3.  实施某种智能负载平衡。如果多个客户端对同一个项目进行操作，请将它们路由到同一个实例。由于JS是单线程的，所以问题就解决了。不幸的是，我没有找到一个简单的解决方案。

我确信存在一种更好、更优雅的方式来实现上述目标，我很想听听任何解决方案或建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:41:14.600

您希望 mongodb 上的 findAndModify 命令在返回新修改的文​​档时保证原子修改。由于更改是串行的，原子实例 1 将具有 a->b->c，而实例 2 将具有 a->b->c->d

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:42:05.120

如果我理解正确，并且列表被存储为一个文档，那么您可能正在查看行版本控制。因此，向将处理版本的文档添加一个属性，当您更新时，您会增加（或更改）版本并进行有条件的更新：

//更新（条件，值）

更新（{版本：whateverYouReceivedWhenYouDidFind}，newValue）

希望能帮助到你。格斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:38:50.190

如果您所做的只是向列表中添加新元素，则可以使用 Redis 列表并将时间包含在您添加的每个值中。该列表可能在 redis 上未排序，但在检索时应该可以快速排序。

# iphone - ios中需要uiview转pdf组件

> ID：10477909
> 
> 赞同：-2
> 
> 时间：2012-05-07T06:54:01.657
> 
> 标签：iphone, ios, pdf-generation

我想将 UIView 转换为 pdf，那里有现成的组件，因为我没有那么多时间去做。如果不能，你能给我pdf的示例代码吗

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T06:57:28.953

```
(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
} 
```

还要确保你导入：QuartzCore/QuartzCore.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:14:24.450

或试试这个[https://github.com/vfr/Reader](https://github.com/vfr/Reader) PDF Reader/Viewer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T07:38:30.063

点击Quartz Demo 的[Apple Sample](http://developer.apple.com/library/ios/#samplecode/QuartzDemo/Introduction/Intro.html) Code`，您可以在 uiviews 中了解 PDF 和不同的图表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-03T18:47:58.423

**您可以使用 PDFGenerator** [链接到 GitHub](https://github.com/sgr-ksmt/PDFGenerator#features)：

他们还在 github 上有一个演示应用程序。

代码字体示例**：**从[视图生成 PDF](https://github.com/sgr-ksmt/PDFGenerator#generate-from-views-or-images)：

```
func generatePDF() {
    let v1 = UIScrollView(frame: CGRect(x: 0.0,y: 0, width: 100.0, height: 100.0))
    let v2 = UIView(frame: CGRect(x: 0.0,y: 0, width: 100.0, height: 200.0))
    let v3 = UIView(frame: CGRect(x: 0.0,y: 0, width: 100.0, height: 200.0))
    v1.backgroundColor = .red
    v1.contentSize = CGSize(width: 100.0, height: 200.0)
    v2.backgroundColor = .green
    v3.backgroundColor = .blue

    let dst = URL(fileURLWithPath: NSTemporaryDirectory().appending("sample1.pdf"))
    // outputs as Data
    do {
        let data = try PDFGenerator.generated(by: [v1, v2, v3])
        data.write(to: dst, options: .atomic)
    } catch (let error) {
        print(error)
    }

    // writes to Disk directly.
    do {
        try PDFGenerator.generate([v1, v2, v3], to: dst)    
    } catch (let error) {
        print(error)
    }
} 
```

# android - 如何在 Android 中使用动画关闭 Listview？

> ID：10477913
> 
> 赞同：1
> 
> 时间：2012-05-07T06:54:06.307
> 
> 标签：android, android-animation

**如何使用动画关闭 Listview**就像 ListView 的最后一个项目是第一个，第二个最后一个是第二个等等。就像它来了一样。我已经使用以下链接完成了此操作：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/LayoutAnimation2.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/LayoutAnimation2.html) 我想要相反的顺序。

我有一个自定义`ListView`，我编写了以下代码。

```
public class Hella_AdlightActivity extends Activity implements OnItemClickListener {

  private ListView mListView = null;
  private ItemList_BaseAdapter mBaseAdapter = null;
  private Drawable photoId[] = new Drawable[4];

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    photoId[0] = getResources().getDrawable(R.drawable.one_);
    photoId[1] = getResources().getDrawable(R.drawable.two_);
    photoId[2] = getResources().getDrawable(R.drawable.three_);
    photoId[3] = getResources().getDrawable(R.drawable.four_);

    mListView = (ListView)findViewById(R.id.lst_item);
    mListView.setCacheColorHint(0);

    getAnimation();

    mBaseAdapter = new ItemList_BaseAdapter(this);
    mListView.setAdapter(mBaseAdapter);

    mListView.setOnItemClickListener(this);
  }
  private void getAnimation(){
     AnimationSet set = new AnimationSet(true);

     Animation animation = new AlphaAnimation(0.0f, 1.0f);
     animation.setDuration(3000);
     set.addAnimation(animation);

     animation = new TranslateAnimation(
       Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
       Animation.RELATIVE_TO_SELF, -1.0f,Animation.RELATIVE_TO_SELF, 0.0f
     );
     animation.setDuration(2000);
     set.addAnimation(animation);

     LayoutAnimationController controller = new LayoutAnimationController(set, 1.0f);

     mListView.setLayoutAnimation(controller);
  }
  private class ItemList_BaseAdapter extends BaseAdapter{

    private LayoutInflater mLayout = null;
    private Context mContext = null;
    public ItemList_BaseAdapter(Context context){
      this.mContext = context;
      this.mLayout = LayoutInflater.from(mContext);
    }

    public int getCount() {
      return photoId.length;
    }

    public Object getItem(int arg0) {
      return null;
    }

    public long getItemId(int position) {
      return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
      if(convertView == null) {
        convertView = mLayout.inflate(R.layout.cust_list, null);
      }

      ImageView imgItem = (ImageView)convertView.findViewById(R.id.img_items);
      imgItem.setBackgroundDrawable(photoId[position]);
      return convertView;
    }
  }
} 
```

我为 Listview Load 执行此操作，并且我想在用户链接任何列表项时关闭列表

# informix - 可以更改 IDS 11.70 的哪些 onconfig 参数以最大限度地提高 DSS 应用程序的性能？

> ID：10477914
> 
> 赞同：1
> 
> 时间：2012-05-07T06:54:06.933
> 
> 标签：informix

Informix 11.70.TC5DE，带双核处理器的 Windows Vista，8GB RAM，1TB HDD：

在安装此服务器期间，我指定它将用于数据仓库应用程序。这些是安装脚本生成的 onconfig 参数。可以更改这些参数中的任何一个以最大化服务器的性能吗？

```
#(onconfig.ol_informix1170) -  for data warehousing app.

ROOTNAME rootdbs
ROOTPATH C:\PROGRA~1\IBM\Informix\11.70\OL_INF~2\dbspaces\rootdbs.000
ROOTOFFSET 0
ROOTSIZE 312992
MIRROR 0
MIRRORPATH 
MIRROROFFSET 0

PHYSFILE        49152           
PLOG_OVERFLOW_PATH 
PHYSBUFF 512

LOGFILES        6               
LOGSIZE 10000
DYNAMIC_LOGS 2
LOGBUFF 256

LTXHWM 70
LTXEHWM 80

MSGPATH C:\PROGRA~1\IBM\Informix\11.70\ol_informix1170_1.log
CONSOLE C:\PROGRA~1\IBM\Informix\11.70\ol_informix1170_1.con

TBLTBLFIRST 0
TBLTBLNEXT 0
TBLSPACE_STATS 1

DBSPACETEMP tempdbs
SBSPACETEMP 

SBSPACENAME sbspace
SYSSBSPACENAME 
ONDBSPACEDOWN 2

SERVERNUM 6
DBSERVERNAME ol_informix1170_1
DBSERVERALIASES dr_informix1170_1

NETTYPE olsoctcp,1,150,NET
LISTEN_TIMEOUT 60
MAX_INCOMPLETE_CONNECTIONS 1024
FASTPOLL 1
NS_CACHE host=900,service=900,user=900,group=900

MULTIPROCESSOR 0
VPCLASS cpu,num=1,noage
VP_MEMORY_CACHE_KB 0
SINGLE_CPU_VP 1

#VPCLASS aio,num=1
CLEANERS 2
AUTO_AIOVPS 1
DIRECT_IO 0

LOCKS 2000
DEF_TABLE_LOCKMODE page

RESIDENT 0
SHMBASE 0xc000000L
SHMVIRTSIZE 209920
SHMADD 6560
EXTSHMADD 8192
SHMTOTAL 0
SHMVIRT_ALLOCSEG 0,3
#SHMNOACCESS 0x70000000-0x7FFFFFFF

CKPTINTVL 300
AUTO_CKPTS 1
RTO_SERVER_RESTART 60

BLOCKTIMEOUT 3600

CONVERSION_GUARD 2
RESTORE_POINT_DIR $INFORMIXDIR\tmp

TXTIMEOUT 300
DEADLOCK_TIMEOUT 60

HETERO_COMMIT 0

TAPEDEV \\.\TAPE0
TAPEBLK 16
TAPESIZE 0

LTAPEDEV 
LTAPEBLK 16
LTAPESIZE 0

BAR_ACT_LOG $INFORMIXDIR\tmp\bar_act.log
BAR_DEBUG_LOG $INFORMIXDIR\tmp\bar_dbug.log
BAR_DEBUG 0
BAR_MAX_BACKUP 0
BAR_RETRY 1
BAR_NB_XPORT_COUNT 20
BAR_XFER_BUF_SIZE 15
RESTARTABLE_RESTORE ON
BAR_PROGRESS_FREQ 0
BAR_BSALIB_PATH 
BACKUP_FILTER 
RESTORE_FILTER 
BAR_PERFORMANCE 0
BAR_CKPTSEC_TIMEOUT 15

ISM_DATA_POOL ISMData
ISM_LOG_POOL ISMLogs

DD_HASHSIZE 31
DD_HASHMAX 10

DS_HASHSIZE 31

DS_POOLSIZE 127

PC_HASHSIZE 31
PC_POOLSIZE 127
PRELOAD_DLL_FILE 

STMT_CACHE 0
STMT_CACHE_HITS 0
STMT_CACHE_SIZE 512
STMT_CACHE_NOLIMIT 0
STMT_CACHE_NUMPOOL 1

USEOSTIME 0
STACKSIZE 64
ALLOW_NEWLINE 0

USELASTCOMMITTED NONE

FILLFACTOR 90
MAX_FILL_DATA_PAGES 0
BTSCANNER num=1,threshold=5000,rangesize=-1,alice=6,compression=default

ONLIDX_MAXMEM 188928

MAX_PDQPRIORITY 100
DS_MAX_QUERIES 1
DS_TOTAL_MEMORY 188928
DS_MAX_SCANS 1
DS_NONPDQ_QUERY_MEM 188928
DATASKIP 

OPTCOMPIND 2
DIRECTIVES 1
EXT_DIRECTIVES 0
OPT_GOAL -1
IFX_FOLDVIEW 0
AUTO_REPREPARE 1
USTLOW_SAMPLE 0

RA_PAGES 64
RA_THRESHOLD 16
BATCHEDREAD_TABLE 1
BATCHEDREAD_INDEX 1
BATCHEDREAD_KEYONLY 0

EXPLAIN_STAT 1
#SQLTRACE level=low,ntraces=1000,size=2,mode=global

#DBCREATE_PERMISSION informix
#DB_LIBRARY_PATH 
IFX_EXTEND_ROLE 1
SECURITY_LOCALCONNECTION 
UNSECURE_ONSTAT 
ADMIN_USER_MODE_WITH_DBSA 
ADMIN_MODE_USERS 

PLCY_POOLSIZE 127
PLCY_HASHSIZE 31
USRC_POOLSIZE 127

USRC_HASHSIZE 31

STAGEBLOB 
OPCACHEMAX 0

SQL_LOGICAL_CHAR OFF

SEQ_CACHE_SIZE 10

ENCRYPT_HDR 
ENCRYPT_SMX 
ENCRYPT_CDR 0
ENCRYPT_CIPHERS 
ENCRYPT_MAC 
ENCRYPT_MACFILE 
ENCRYPT_SWITCH 

CDR_EVALTHREADS 1,2
CDR_DSLOCKWAIT 5
CDR_QUEUEMEM 4096
CDR_NIFCOMPRESS 0
CDR_SERIAL 0
CDR_DBSPACE 
CDR_QHDR_DBSPACE 
CDR_QDATA_SBSPACE 
CDR_SUPPRESS_ATSRISWARN 
CDR_DELAY_PURGE_DTC 0
CDR_LOG_LAG_ACTION ddrblock
CDR_LOG_STAGING_MAXSIZE 0
CDR_MAX_DYNAMIC_LOGS 0

DRAUTO 0
DRINTERVAL 30
DRTIMEOUT 30
HA_ALIAS 
DRLOSTFOUND $INFORMIXDIR\etc\dr.lostfound
DRIDXAUTO 0
LOG_INDEX_BUILDS 
SDS_ENABLE 
SDS_TIMEOUT 20
SDS_TEMPDBS 
SDS_PAGING 
SDS_LOGCHECK 0
UPDATABLE_SECONDARY 0
FAILOVER_CALLBACK 
FAILOVER_TX_TIMEOUT 0
TEMPTAB_NOLOG 0
DELAY_APPLY 0
STOP_APPLY 0
LOG_STAGING_DIR 
RSS_FLOW_CONTROL 0
ENABLE_SNAPSHOT_COPY 0
SMX_COMPRESS 0

ON_RECVRY_THREADS 2
OFF_RECVRY_THREADS 5

DUMPDIR $INFORMIXDIR\tmp
DUMPSHMEM 1
DUMPGCORE 0
DUMPCORE 0

DUMPCNT 1

ALARMPROGRAM $INFORMIXDIR\etc\alarmprogram.bat
ALRM_ALL_EVENTS 0
#SYSALARMPROGRAM $INFORMIXDIR\etc\evidence.bat
STORAGE_FULL_ALARM 600,3

RAS_PLOG_SPEED  10982           
RAS_LLOG_SPEED 0

EILSEQ_COMPAT_MODE 0

QSTATS 0
WSTATS 0

#VPCLASS         MQ,noyield
MQSERVER 
MQCHLLIB 

MQCHLTAB 

#VPCLASS jvp,num=1
#JVPJAVAHOME    $INFORMIXDIR\extend\krakatoa\jre
#JVPHOME        $INFORMIXDIR\extend\krakatoa
JVPPROPFILE $INFORMIXDIR\extend\krakatoa\.jvpprops
JVPLOGFILE $INFORMIXDIR\jvp.log
#JDKVERSION    1.5
#JVPJAVALIB     \bin
#JVPJAVAVM      jvm
#JVPARGS        -verbose:jni
#JVPCLASSPATH  $INFORMIXDIR\extend\krakatoa\krakatoa_g.jar;$INFORMIXDIR\extend\krakatoa\jdbc_g.jar
JVPARGS -Dcom.ibm.tools.attach.enable=no
JVPCLASSPATH $INFORMIXDIR\extend\krakatoa\krakatoa.jar;$INFORMIXDIR\extend\krakatoa\jdbc.jar

BUFFERPOOL  default,buffers=10000,lrus=8,lru_min_dirty=50.00,lru_max_dirty=60.50
BUFFERPOOL  size=4K,buffers=13108,lrus=16,lru_min_dirty=70.00,lru_max_dirty=80.00
AUTO_LRU_TUNING 1

USERMAPPING OFF

SP_AUTOEXPAND 1
SP_THRESHOLD 0
SP_WAITTIME 30

DEFAULTESCCHAR \

LOW_MEMORY_RESERVE 0
LOW_MEMORY_MGR 0

REMOTE_SERVER_CFG 
REMOTE_USERS_CFG 

S6_USE_REMOTE_SERVER_CFG 0

GSKIT_VERSION 

NETTYPE drsoctcp,1,150,NET 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:02:00.413

如果它是多处理器机器，请务必考虑`MULTIPROCESSOR`通过将其设置为非零值来开启。

您对 DSS 最感兴趣的 ONCONFIG 参数是与并行数据查询或 PDQ 相关的参数。以 MAX_PDQPRIORITY 开头的块。值得仔细阅读有关这些的精美手册，因为它们与其他一些参数之间的相互关系太复杂，无法在此处进行介绍。

但本质上，`DS_MAX_QUERIES`是任何时候允许的最大并行查询数，并`DS_MAX_SCANS`决定了扫描表的 IO 线程数。`DS_TOTAL_MEMORY`确定分配给 PDQ 处理的内存量，手册中有一个算法显示这些变量和用户`PDQPRIORITY`设置如何结合。

您可能还需要考虑提升`RA_PAGES`和`RA_THRESHOLD`值 - 这些确定在抓取下一批之前将多少页作为“块”读入内存。如果您想要支持表扫描（通常您在 DSS 中这样做），那么将这些增加到 256 和 128 可能会提高性能。

我的经验是使用 SMP 和 MPP unix box，而不是 Windows，所以我不确定你能从你的架构中榨取多少，但这是你想要开始的地方。

我建议确定一个运行相当长的时间的良好 DSS 查询，并一次更改一个参数以查看效果。`SET EXPLAIN ON`是你的朋友，也是。

One last thing - 11.7 supports table compression, and the tests I've seen show dramatic improvements in a DSS environment with large reads and irregular writes.

# android - 像 ViewFlipper 一样翻转 ViewPager

> ID：10477916
> 
> 赞同：2
> 
> 时间：2012-05-07T06:54:15.770
> 
> 标签：android, android-layout, android-widget

我已经实现了 ViewPager 在多个视图之间滑动。

我想要的是翻转每个`viewpager`视图`Viewflipper`。

在 xml 布局中将 viewflipper 放置在 viewpager 中会生成随机布局。

# android - SyncAdapter 是否真的需要添加快速联系人徽章？

> ID：10477917
> 
> 赞同：2
> 
> 时间：2012-05-07T06:54:23.107
> 
> 标签：android, android-layout, android-intent, android-contacts

我希望我的应用程序出现在快速联系徽章中。我使用了 SyncAdapter（如[本](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1)教程中所述）。

但是由于我希望这个徽章在我的所有联系人中都可见并且只需打开我的应用程序，因此为每个现有联系人创建我自己的帐户和联系人并保持此帐户更新似乎是一种非常笨拙的方法。

还有另一种方法吗？

![快速联系徽章](../Images/fd68ce931b3a0d18130f5a96715c2ca7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:59:08.590

不，它没有。

关键是使用正确的 mime 类型。为了让我的应用在所有联系人的快速联系人徽章中可见，我在清单文件中使用了以下设置：

```
 <activity
        android:name=".activities.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="vnd.android.cursor.item/name" />
        </intent-filter>
    </activity> 
```

就是这样 - 没有同步提供程序或任何其他服务或活动。

如果有人知道如何使应用程序徽章仅适用于具有电话号码的联系人，而不是所有联系人，我将不胜感激。

# android - 从设备管理员应用程序卸载另一个应用程序的权利

> ID：10477918
> 
> 赞同：0
> 
> 时间：2012-05-07T06:54:29.317
> 
> 标签：android, admin, device

我正在制作一个设备管理应用程序，就像[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)一样。如何添加卸载应用程序或从此应用程序安装另一个应用程序的功能。我可以使用意图卸载另一个应用程序（这不需要任何设备管理应用程序，任何应用程序都可以使用它执行），但用户会收到卸载应用程序的提示。因为它的设备管理应用程序，所以我想在没有任何提示的情况下卸载应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:49:43.077

i don't think it's possible to silently uninstall an app that is an active device administrator. i believe that's an intended feature of being a device admin.

# javascript - javascript代码对选择选项执行验证？

> ID：10477919
> 
> 赞同：0
> 
> 时间：2012-05-07T06:54:37.957
> 
> 标签：javascript, html, select, alert

我需要一些 javascript 代码来验证选择选项。意思是这样的。Select Country : --select-- 如果用户提交表单时没有选择国家。我们必须提醒他说
“请选择国家”。
让我知道如何执行此操作以及任何可理解的示例代码
提前致谢，
Laxman Chowdary

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:59:52.493

通过保持

> 值=""

您可以验证它的属性..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:07:58.693

尝试 jQuery 的 onClick 事件，然后首先添加一个警报，以便在单击该下拉列表时查看它是如何工作的。

# javascript - 带有 CI 的 Chrome 扩展中的 XHR

> ID：10477926
> 
> 赞同：1
> 
> 时间：2012-05-07T06:55:15.727
> 
> 标签：javascript, codeigniter, google-chrome, google-chrome-extension, xmlhttprequest

我正在将`POST`chrome 扩展内容脚本发送到我控制的服务器。我在清单中设置了权限。这是我的 XHR 代码。（我想为此避免使用 jQuery）。它发送一个空的`responseText`

```
var xhr = new XMLHttpRequest();
    xhr.open("POST",'http://mysite.com/make',true);
        xhr.onreadystatechange=function() {
            if (xhr.readyState == 4) {
                var res = JSON.parse(xhr.responseText);
                console.log(res);
            }
    }

    xhr.send({'textbox':data[0].user,'from':'extension'}); 
```

`data[0].user`是我直接从 Twitter API 获得的对象

在我的 CI 控制器中，我有

```
$user = $this->input->get_post('textbox', TRUE);
$from = $this->input->get_post('from', TRUE);

$fullURL = 'http://www.google.com'; //example of a URL from code.

$json = $this->output->set_content_type('application/json');
$json->set_output(json_encode(array('URL' => $fullURL))); 
```

**响应文本为空**

另一方面，jquery 调用工作正常

```
$.post("http://mysite.com/make", { 'textbox': data[0].user, 'from':'jquery' },
  function(data) {
    console.log(data);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:07:14.583

原因很简单，JQuery post 方法可以接受 JSON，然后将其转换为字符串并发送到服务器。

您要做的是直接在此处发送 JSON：

`xhr.send({'textbox':data[0].user,'from':'extension'}) // Incorrect way`

**send**方法应该接受**NULL**或**通常由 QueryString 参数组成的字符串，例如**.

`xhr.send("textbox="+ data[0].user + "&from=extension"); // Correct way`

这将确保您的数据通过**文本框****发送**到适当的 URL，并作为**发布请求参数发送。** 并且 queryString 将像**textbox=username1234&from=extension**一样在数据包的主体中生成，这与 Get 中带有 URL 旁边的标头不同。

jQuery 的 post 方法使您可以更轻松地格式化使用 JSON 发送的数据，然后在内部将其转换为 queryString 以发送参数。您不能使用 XHR 对象直接发送 Javascript 对象！

另请查看此示例：

[http://beradrian.wordpress.com/2007/07/19/passing-post-parameters-with-ajax/](http://beradrian.wordpress.com/2007/07/19/passing-post-parameters-with-ajax/)

# ruby-on-rails - 配置 Ruby-on-rails created_at 和 updated_at 日期 time_zone

> ID：10477937
> 
> 赞同：1
> 
> 时间：2012-05-07T06:56:25.710
> 
> 标签：ruby-on-rails, datetime, timezone

Rails 以 UTC 时间存储 created_at 和 updated_at 时间戳。

但是我正在使用这些字段来根据这些字段过滤和存储（并对记录做很多其他事情），所以当我调用 created_at 和 updated_at 属性时，我会在我的时区获得时间戳，这一点很重要。

正如以下两个 SO 问题所述，我可以通过在 environment.rb 文件中配置时区来做到这一点。

但是，这现在对我有用。

因为我是根据`created_at`字段（以 UTC 表示）从数据库中获取记录，所以自然会出现错误的记录，然后我正在显示它们，所以日期再次以 UTC 显示，而不是我想要的。

有没有办法改变rails存储日期的时区？

或者

是否有一种解决方法可以在不调用 Rails`object.created_at`属性的情况下实现数据库获取和显示？

[created_at 中的 Rails 和时区](https://stackoverflow.com/questions/5556998/rails-and-timezone-in-created-at)

[Rails 时区问题](https://stackoverflow.com/questions/5642571/rails-time-zone-issue)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:29:43.677

我想知道为什么我什至在这个论坛上问这个问题，因为解决方法似乎很简单。但是我确实花了八个小时才到达它:)

1）从数据库中获取记录并显示它们时，我可以简单地做

```
select CONVERT_TZ(date) as date from table; 
```

而不是做

```
select date from table; 
```

`CONVERT_TZ()`是一个`mysql`特定的功能，所以它对我有用。虽然不是一个通用的解决方案。

2）其次，当我必须从任何其他时区给定的日期范围中获取记录时，我可以做两件事之一。

一 - 我可以替换`[user-entered-date] 00:00:00`为`[user-entered-date] 07:00:00`日期范围的起点和`[user-entered-date] 59:59:59`范围`[user-entered-date + 1.day] 07:00:00`的终点。请注意，这将要求我使用 DateTime 对象而不是 Date 对象。

二 - 在`where`条款中，我可以做

```
CONVERT_TZ(registrations.created_at) <= [user/entered/date] 
```

代替

```
(registrations.created_at) <= [user/entered/date] 
```

# vhdl - 如何设计一个带有单独进位和借位标志的简单加法器？

> ID：10477939
> 
> 赞同：2
> 
> 时间：2012-05-07T06:56:46.850
> 
> 标签：vhdl, alu

我正在实现一个简单的加法器。但是，我需要一些独特的转折。

我正在实现的是跨代码段（CS）寄存器和指令指针（IP）寄存器的“翻转”功能。因此，当您进行 +20 的相对跳跃，并且 IP 为 254 时，IP 最终将滚动到 18，而 CS 最终将增加 1。

这部分容易，难的部分是相反的方向。检测借位时，例如跳转为 -20 且 IP 为 0，它需要将 CS 减 1 并使 IP 回滚到 236。

到目前为止我的代码是

```
entity carryover is 
  port(
    DataIn: in std_logic_vector(7 downto 0);
    SegmentIn: in std_logic_vector(7 downto 0);
    Addend: in std_logic_vector(7 downto 0); --How much to increase DataIn by (as a signed number). Believe it or not, that's the actual word for what we need.
    DataOut: out std_logic_vector(7 downto 0);
    SegmentOut: out std_logic_vector(7 downto 0);
   );
end carryover;

architecture Behavioral of carryover is
  signal temp: std_logic_vector(8 downto 0);
begin
  --treat as unsigned because it doesn't actually matter for addition and just make carry and borrow correct
  temp <= std_logic_vector(unsigned("0" & DataIn) + (unsigned)Addend);
  DataOut <= temp(7 downto 0);
  SegmentOut <= unsigned(SegmentIn) + 1 when (not temp(8)) and (not Addend(7) 

end Behavioral; 
```

但我不知道如何检测借用。有没有一种干净的方法可以做到这一点？

**更新**

我的新代码是这样的：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;
use work.tinycpu.all;

entity carryover is 
  port(
    EnableCarry: in std_logic; --When disabled, SegmentIn goes to SegmentOut
    DataIn: in std_logic_vector(7 downto 0);
    SegmentIn: in std_logic_vector(7 downto 0);
    Addend: in std_logic_vector(7 downto 0); --How much to increase DataIn by (as a signed number). Believe it or not, that's the actual word for what we need.
    DataOut: out std_logic_vector(7 downto 0);
    SegmentOut: out std_logic_vector(7 downto 0)
--    Debug: out std_logic_vector(8 downto 0)
   );
end carryover;

architecture Behavioral of carryover is
  signal temp: std_logic_vector(8 downto 0);
begin
  --treat as unsigned because it doesn't actually matter for addition and just make carry and borrow correct
  process(DataIn, SegmentIn,Addend, EnableCarry)
  begin
    temp <= std_logic_vector(signed('0' & DataIn) + signed(Addend(7) & Addend)); 
    if (EnableCarry and ((not Addend(7)) and (DataIn(7)) and temp(8)))='1' then 
      SegmentOut <= std_logic_vector(unsigned(SegmentIn)+1);
    elsif (EnableCarry and (Addend(7) and (not DataIn(7)) and temp(8)))='1' then 
      SegmentOut <= std_logic_vector(unsigned(SegmentIn)-1);
    else
      SegmentOut <= SegmentIn;
    end if;
  end process;
  --Debug <= Temp;
  DataOut <= temp(7 downto 0);
end Behavioral; 
```

有符号数的加法按计划进行，并且 Temp 现在始终是正确的结果，但 SegmentOut 始终等于 SegmentIn。我不明白为什么，因为对于`SegmentIn + 1`，我实际上是手动计算了 Addend=0x04、DataIn=0xFE、SegmentIn=0x00 和 CarryEnable=1 的输入，并且 if 语句等于 out `(1 and ((not 0) and 1 and 1))='1'`，但是 SegmentOut 永远不会改变。有没有人看到这是如何实现的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:36:02.850

当 summands 符号位等于但不等于 sum sing 位时会发生溢出：

```
A = + 12, B = + 4\.            A = + 4, B = – 12
А = 0.1100                    A = 0.0100
В = 0.0100                    B = 1.0100
    ------                        ------   
C   1.0000                    C   1.1000
As = Bs, Cs = 1 – overflow    As != Bs - not overflow. 
```

与`DateIn`总是正数一样，溢出只能发生在进位（对于两个正数）。因此，您应该将您的陈述更改为（并可能以某种方式将这两者结合起来）：

```
SegmentOut <= unsigned(SegmentIn) + 1 when (not Addend(7) and temp(7)); 
SegmentOut <= unsigned(SegmentIn) - 1 when (Addend(7) and temp(7)); 
```

这是一个真值表：

```
Addend(7) DataIn(7) temp(7)| Carry Borrow
0         0         0      | 0     0
0         0         1      | 1     0
1         0         0      | 0     0
1         0         1      | 0     1 
```

**编辑**：正如 Paul Seeb 所说：

```
SegmentOut <= unsigned(signed(SegmentIn) + signed(Addend(7) & Addend(7) & Addend(7) & Addend(7) & Addend(7) & Addend(7) & Addend(7) & "1")) when (temp(7) and CarryFlag); 
```

# c++ - 构建分数面试挑战

> ID：10477945
> 
> 赞同：6
> 
> 时间：2012-05-07T06:57:11.467
> 
> 标签：c++, algorithm, dynamic-programming

我最近遇到了以下面试问题，我想知道动态编程方法是否可行，或者/和是否有某种数学洞察力可以使解决方案更容易......它与 ieee754 双打的构造方式非常相似。

**问题：** 有 N 个双精度值的向量 V。其中向量的第 i 个索引处的值等于 1/2^(i+1)。例如：1/2、1/4、1/8、1/16 等...

您将编写一个函数，该函数将一个双倍“r”作为输入，其中 0 < r < 1，并将 V 的索引输出到标准输出，当求和时将给出一个比任何其他组合最接近值“r”的值来自向量 V 的索引。

此外，索引的数量应该最少，如果有两个解决方案，应该首选最接近零的解决方案。

```
void getIndexes(std::vector<double>& V, double r)
{
 .... 
}

int main()
{
   std::vector<double> V;
   // populate V...
   double r = 0.3;
   getIndexes(V,r);
   return 0;
} 
```

**注意：**似乎有一些 SO'ers 没有完全阅读问题的心情。所以让大家注意以下几点：

1.  解决方案，也就是总和可能大于 r - 因此任何从 r 中递增减去分数的策略，直到它达到零或接近零是错误的

2.  有r的例子，这里会有2个解，即|r-s0| == |r-s1| 并且 s0 < s1 - 在这种情况下，应该选择 s0，这会使问题变得更加困难，因为背包式解决方案首先倾向于贪婪地高估。

3.  如果您认为这个问题是微不足道的，那么您很可能还没有理解它。因此，最好再次阅读该问题。

**编辑（Matthieu M.）：** 2个例子`V = {1/2, 1/4, 1/8, 1/16, 1/32}`

*   `r = 0.3`,`S = {1, 3}`
*   `r = 0.256652`,`S = {1}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T09:19:35.643

# 算法

考虑一个目标数`r`和一组`F`分数`{1/2, 1/4, ... 1/(2^N)}`。让最小的分数 ,`1/(2^N)`表示为`P`。

那么最优和将等于：

```
S = P * round(r/P) 
```

也就是说，最优和`S`将是可用的最小分数的某个**整**`P`数倍， 。最大误差`err = r - S`, 是`± 1/2 * 1/(2^N)`。没有更好的解决方案是可能的，因为这需要使用小于的数字`1/(2^N)`，它是集合中的最小数字`F`。

由于分数`F`都是 的 2次方倍数`P = 1/(2^N)`，因此 的*任何*整数倍`P`都可以表示为 中的分数之和`F`。要获得应使用的分数列表，请将整数编码为二进制并在二进制位置`round(r/P)`读取为“在解决方案中包含分数”。`1``kth``kth`

# 例子：

> 取`r = 0.3`和`F`作为`{1/2, 1/4, 1/8, 1/16, 1/32}`。

1.  将整个问题乘以 32。

    > 取`r = 9.6`和`F`作为`{16, 8, 4, 2, 1}`。

2.  四舍五入`r`到最接近的整数。

    > 拿`r = 10`。

3.  编码`10`为二进制整数（五位）

    ```
    10 = 0b 0 1 0 1 0    ( 8 + 2 )
            ^ ^ ^ ^ ^
            | | | | |
            | | | | 1
            | | | 2
            | | 4
            | 8
            16 
    ```

4.  将每个二进制位与一个分数相关联。

    ```
     = 0b 0 1 0 1 0    ( 1/4 + 1/16 = 0.3125 )
            ^ ^ ^ ^ ^
            | | | | |
            | | | | 1/32
            | | | 1/16
            | | 1/8
            | 1/4
            1/2 
    ```

# 证明

考虑通过将所涉及的所有数字相乘来转换问题，`2**N`以便所有分数都变为整数。

原来的问题：

> `r`考虑范围内的目标数字`0 < r < 1`和分数列表`{1/2, 1/4, .... 1/(2**N)`。找到总和为最小`S`的分数列表的子集。`error = r - S`

变为以下等价问题（乘以 后`2**N`）：

> `r`考虑范围内的目标数字和**整数**`0 < r < 2**N`列表。找到总和为最小的整数列表的子集。 **`{2**(N-1), 2**(N-2), ... , 4, 2, 1}``S``error = r - S`**

 **选择总和为给定数字的 2 的幂（误差尽可能小）只是整数的二进制编码。因此，这个问题归结为整数的二进制编码。

*   解的存在性：任何正浮点数`r`, `0 < r < 2**N`, 都可以转换为整数并以二进制形式表示。
*   最优性：解的整数版本中的最大误差是 的舍入误差`±0.5`。（在原始问题中，最大误差为`±0.5 * 1/2**N`。）
*   唯一性：对于任何正（浮点）数，都有唯一的整数表示，因此也有唯一的二进制表示。（`0.5`= 的可能例外见下文。）

# 实现（Python）

此函数将问题转换为等效整数，四舍五入`r`为整数，然后将 的二进制表示形式读取`r`为整数以获得所需的分数。

```
def conv_frac (r,N):
    # Convert to equivalent integer problem.
    R = r * 2**N
    S = int(round(R))

    # Convert integer S to N-bit binary representation (i.e. a character string
    # of 1's and 0's.) Note use of [2:] to trim leading '0b' and zfill() to
    # zero-pad to required length.
    bin_S = bin(S)[2:].zfill(N)

    nums = list()
    for index, bit in enumerate(bin_S):
        k = index + 1
        if bit == '1':
            print "%i : 1/%i or %f" % (index, 2**k, 1.0/(2**k))
            nums.append(1.0/(2**k))
    S = sum(nums)
    e = r - S

    print """
    Original number        `r` : %f
    Number of fractions    `N` : %i (smallest fraction 1/%i)
    Sum of fractions       `S` : %f
    Error                  `e` : %f
    """ % (r,N,2**N,S,e) 
```

样本输出：

```
>>> conv_frac(0.3141,10)
1 : 1/4 or 0.250000
3 : 1/16 or 0.062500
8 : 1/512 or 0.001953

    Original number        `r` : 0.314100
    Number of fractions    `N` : 10 (smallest fraction 1/1024)
    Sum of fractions       `S` : 0.314453
    Error                  `e` : -0.000353

>>> conv_frac(0.30,5)
1 : 1/4 or 0.250000
3 : 1/16 or 0.062500

    Original number        `r` : 0.300000
    Number of fractions    `N` : 5 (smallest fraction 1/32)
    Sum of fractions       `S` : 0.312500
    Error                  `e` : -0.012500 
```

# 附录：`0.5`问题

如果`r * 2**N`以 结尾`0.5`，则可以向上或向下舍入。也就是说，有两种可能的表示形式为分数之和。

如果像在原始问题陈述中那样，您想要使用最少分数的表示（即`1`二进制表示中的最少位数），只需尝试两种舍入选项并选择更经济的选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-07T08:13:16.780

可能是我傻...

我在这里能看到的唯一技巧是`(1/2)^(i+1)`for `i`in `[0..n)`where的总和`n`趋于无穷大`1`。这个简单的事实证明`(1/2)^i`总是优于`sum (1/2)^j`for `j`in `[i+1, n)`，不管`n`是什么。

因此，在寻找我们的指数时，我们似乎没有太多选择。让我们从`i = 0`

*   要么`r`优于`2^-(i+1)`，因此我们*需要*它
*   或者它是次等的，我们需要选择`2^-(i+1)`OR `sum 2^-j`for `j`in`[i+2, N]`是否最接近（在相等的情况下推迟到后者）

唯一可能代价高昂的步骤是获得总和，但它可以一劳永逸地预先计算（甚至懒惰地预先计算）。

```
// The resulting vector contains at index i the sum of 2^-j for j in [i+1, N]
// and is padded with one 0 to get the same length as `v`
static std::vector<double> partialSums(std::vector<double> const& v) {
    std::vector<double> result;

    // When summing doubles, we need to start with the smaller ones
    // because of the precision of representations...

    double sum = 0;
    BOOST_REVERSE_FOREACH(double d, v) {
        sum += d;
        result.push_back(sum);
    }

    result.pop_back(); // there is a +1 offset in the indexes of the result

    std::reverse(result.begin(), result.end());

    result.push_back(0); // pad the vector to have the same length as `v`

    return result;   
}

// The resulting vector contains the indexes elected
static std::vector<size_t> getIndexesImpl(std::vector<double> const& v,
                                          std::vector<double> const& ps,
                                          double r)
{
  std::vector<size_t> indexes;

  for (size_t i = 0, max = v.size(); i != max; ++i) {
      if (r >= v[i]) {
          r -= v[i];
          indexes.push_back(i);
          continue;
      }

      // We favor the closest to 0 in case of equality
      // which is the sum of the tail as per the theorem above.
      if (std::fabs(r - v[i]) < std::fabs(r - ps[i])) {
          indexes.push_back(i);
          return indexes;
      }
  }

  return indexes;
}

std::vector<size_t> getIndexes(std::vector<double>& v, double r) {
    std::vector<double> const ps = partialSums(v);
    return getIndexesImpl(v, ps, r);
} 
```

[代码在ideone](http://ideone.com/y7RWz)运行（带有一些调试输出）。请注意，`0.3`它给出了：

```
0.3:
   1: 0.25
   3: 0.0625
=> 0.3125 
```

这与其他答案略有不同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T12:42:13.157

冒着被否决的风险，这个问题似乎相当简单。只需从您可以产生的最大和最小数字开始，`V`依次调整每个索引，直到您有两个可能最接近的答案。然后评估哪个是更好的答案。

这是未经测试的代码（使用我不写的语言）：

```
void getIndexes(std::vector<double>& V, double r)
{
  double v_lower = 0;
  double v_upper = 1.0 - 0.5**V.size();
  std::vector<int> index_lower;
  std::vector<int> index_upper;

  if (v_upper <= r)
  {
    // The answer is trivial.
    for (int i = 0; i < V.size(); i++)
      cout << i;
    return;
  }

  for (int i = 0; i < N; i++)
  {
    if (v_lower + V[i] <= r)
    {
      v_lower += V[i];
      index_lower.push_back(i);
    }

    if (r <= v_upper - V[i])
      v_upper -= V[i];
    else
      index_upper.push_back(i);
  }

  if (r - v_lower < v_upper - r)
    printIndexes(index_lower);
  else if (v_upper - r < r - v_lower)
    printIndexes(index_upper);
  else if (v_upper.size() < v_lower.size())
    printIndexes(index_upper);
  else
    printIndexes(index_lower);
}

void printIndexes(std::vector<int>& ind)
{
  for (int i = 0; i < ind.size(); i++)
  {
    cout << ind[i];
  }
} 
```

我得到这份工作了吗！:D

（请注意，这是一个可怕的代码，它依赖于我们**确切地**知道 V 中有什么......）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T13:59:14.387

我首先要说我确实相信这个问题是微不足道的......

*（等到所有的石头都被扔掉）*

是的，我确实阅读了 OP 的编辑，该编辑说如果我这么认为我必须重新阅读这个问题。因此，我可能会遗漏一些我看不到的东西——在这种情况下，请原谅我的无知并随时指出我的错误。

我不认为这是一个动态编程问题。冒着听起来幼稚的风险，为什么不尝试`r`在搜索索引时保留两个估计值 - 即低估和高估。毕竟，如果`r`不等于可以从 的元素计算的任何总和，`V`它将位于该类型的两个总和之间。我们的目标是找到这些总和并报告哪个更接近`r`。

我拼凑了一些快速而肮脏的 Python 代码来完成这项工作。它报告的答案对于 OP 提供的两个测试用例是正确的。请注意，如果它`return`的结构使得必须始终返回至少一个索引 - 即使最佳估计根本没有索引。

```
def estimate(V, r):
  lb = 0               # under-estimation (lower-bound)
  lbList = []
  ub = 1 - 0.5**len(V) # over-estimation = sum of all elements of V
  ubList = range(len(V))

  # calculate closest under-estimation and over-estimation
  for i in range(len(V)):
    if r == lb + V[i]:
      return (lbList + [i], lb + V[i])
    elif r == ub:
      return (ubList, ub)
    elif r > lb + V[i]:
      lb += V[i]
      lbList += [i]
    elif lb + V[i] < ub:
      ub = lb + V[i]
      ubList = lbList + [i]
  return (ubList, ub) if ub - r < r - lb else (lbList, lb) if lb != 0 else ([len(V) - 1], V[len(V) - 1])

# populate V
N = 5 # number of elements
V = []
for i in range(1, N + 1):
  V += [0.5**i]

# test
r = 0.484375 # this value is equidistant from both under- and over-estimation
print "r:", r
estimate = estimate(V, r)
print "Indices:", estimate[0]
print "Estimate:", estimate[1] 
```

注意：写完我的答案后，我注意到[这个答案](https://stackoverflow.com/a/10482271/914790)遵循相同的逻辑。唉!

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T09:21:02.303

不知道你有没有测试用例，试试下面的代码。这是一种动态规划方法。

```
1] exp: given 1/2^i, find the largest i as exp. Eg. 1/32 returns 5.
2] max: 10^exp where exp=i.
3] create an array of size max+1 to hold all possible sums of the elements of V.
   Actually the array holds the indexes, since that's what you want.
4] dynamically compute the sums (all invalids remain null)
5] the last while loop finds the nearest correct answer. 
```

这是代码：

```
public class Subset {

public static List<Integer> subsetSum(double[] V, double r) {
    int exp = exponent(V);
    int max = (int) Math.pow(10, exp);
    //list to hold all possible sums of the elements in V
    List<Integer> indexes[] = new ArrayList[max + 1];
    indexes[0] = new ArrayList();//base case
    //dynamically compute the sums
    for (int x=0; x<V.length; x++) {
        int u = (int) (max*V[x]);
        for(int i=max; i>=u; i--) if(null != indexes[i-u]) {
            List<Integer> tmp = new ArrayList<Integer>(indexes[i - u]);
            tmp.add(x);
            indexes[i] = tmp;
        }
    }
   //find the best answer
    int i = (int)(max*r);
    int j=i;
    while(null == indexes[i] && null == indexes[j]) {
        i--;j++;
    }
      return indexes[i]==null || indexes[i].isEmpty()?indexes[j]:indexes[i];
}// subsetSum

private static int exponent(double[] V) {
    double d = V[V.length-1];
    int i = (int) (1/d);
    String s = Integer.toString(i,2);
    return s.length()-1;
}// summation

public static void main(String[] args) {
    double[] V = {1/2.,1/4.,1/8.,1/16.,1/32.};
    double r = 0.6, s=0.3,t=0.256652;
    System.out.println(subsetSum(V,r));//[0, 3, 4]
    System.out.println(subsetSum(V,s));//[1, 3]
    System.out.println(subsetSum(V,t));//[1]
}
}// class 
```

下面是运行代码的结果：

```
For 0.600000  get 0.593750 => [0, 3, 4]
For 0.300000  get 0.312500 => [1, 3]
For 0.256652  get 0.250000 => [1]
For 0.700000  get 0.687500 => [0, 2, 3]
For 0.710000  get 0.718750 => [0, 2, 3, 4] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T11:12:41.647

该解决方案实现[多项式时间近似算法](http://en.wikipedia.org/wiki/Subset_sum_problem#Polynomial_time_approximate_algorithm)。该程序的输出与另一个解决方案的输出相同。

```
#include <math.h>                                                                                                                                             
#include <stdio.h>                                                                                                                                            
#include <vector>                                                                                                                                             
#include <algorithm>                                                                                                                                          
#include <functional>                                                                                                                                         

void populate(std::vector<double> &vec, int count)                                                                                                            
{                                                                                                                                                             
    double val = .5;                                                                                                                                          
    vec.clear();                                                                                                                                              
    for (int i = 0; i < count; i++) {                                                                                                                         
        vec.push_back(val);                                                                                                                                   
        val *= .5;                                                                                                                                            
    }                                                                                                                                                         
}                                                                                                                                                             

void remove_values_with_large_error(const std::vector<double> &vec, std::vector<double> &res, double r, double max_error)                                     
{                                                                                                                                                             
    std::vector<double>::const_iterator iter;                                                                                                                 
    double min_err, err;                                                                                                                                      

    min_err = 1.0;                                                                                                                                            
    for (iter = vec.begin(); iter != vec.end(); ++iter) {                                                                                                     
        err = fabs(*iter - r);                                                                                                                                
        if (err < max_error) {                                                                                                                                
            res.push_back(*iter);                                                                                                                             
        }                                                                                                                                                     
        min_err = std::min(err, min_err);                                                                                                                     
    }                                                                                                                                                         
}

void find_partial_sums(const std::vector<double> &vec, std::vector<double> &res, double r)                                                                    
{                                                                                                                                                             
    std::vector<double> svec, tvec, uvec;                                                                                                                     
    std::vector<double>::const_iterator iter;                                                                                                                 
    int step = 0;                                                                                                                                             

    svec.push_back(0.);                                                                                                                                       
    for (iter = vec.begin(); iter != vec.end(); ++iter) {                                                                                                     
        step++;                                                                                                                                               
        printf("step %d, svec.size() %d\n", step, svec.size());                                                                                               
        tvec.clear();                                                                                                                                         
        std::transform(svec.begin(), svec.end(), back_inserter(tvec),                                                                                         
                       std::bind2nd(std::plus<double>(), *iter));                                                                                             
        uvec.clear();                                                                                                                                         
        uvec.insert(uvec.end(), svec.begin(), svec.end());                                                                                                    
        uvec.insert(uvec.end(), tvec.begin(), tvec.end());                                                                                                    
        sort(uvec.begin(), uvec.end());                                                                                                                       
        uvec.erase(unique(uvec.begin(), uvec.end()), uvec.end());                                                                                             

        svec.clear();                                                                                                                                         
        remove_values_with_large_error(uvec, svec, r, *iter * 4);                                                                                             
    }                                                                                                                                                         

    sort(svec.begin(), svec.end());                                                                                                                           
    svec.erase(unique(svec.begin(), svec.end()), svec.end());                                                                                                 

    res.clear();                                                                                                                                              
    res.insert(res.end(), svec.begin(), svec.end());                                                                                                          
} 

double find_closest_value(const std::vector<double> &sums, double r)                                                                                          
{                                                                                                                                                             
    std::vector<double>::const_iterator iter;                                                                                                                 
    double min_err, res, err;                                                                                                                                 

    min_err = fabs(sums.front() - r);                                                                                                                         
    res = sums.front();                                                                                                                                       

    for (iter = sums.begin(); iter != sums.end(); ++iter) {                                                                                                   
        err = fabs(*iter - r);                                                                                                                                
        if (err < min_err) {                                                                                                                                  
            min_err = err;                                                                                                                                    
            res = *iter;                                                                                                                                      
        }                                                                                                                                                     
    }                                                                                                                                                         
    printf("found value %lf with err %lf\n", res, min_err);                                                                                                   
    return res;                                                                                                                                               
}                                                                                                                                                             

void print_indexes(const std::vector<double> &vec, double value)                                                                                              
{                                                                                                                                                             
    std::vector<double>::const_iterator iter;                                                                                                                 
    int index = 0;                                                                                                                                            

    printf("indexes: [");                                                                                                                                     
    for (iter = vec.begin(); iter != vec.end(); ++iter, ++index) {                                                                                            
        if (value >= *iter) {                                                                                                                                  
            printf("%d, ", index);                                                                                                                            
            value -= *iter;                                                                                                                                   
        }                                                                                                                                                     
    }                                                                                                                                                         
    printf("]\n");                                                                                                                                            
}                                                                                                                                                             

int main(int argc, char **argv)                                                                                                                               
{                                                                                                                                                             
    std::vector<double> vec, sums;                                                                                                                            
    double r = .7;                                                                                                                                            
    int n = 5;                                                                                                                                                
    double value;                                                                                                                                             
    populate(vec, n);                                                                                                                                         
    find_partial_sums(vec, sums, r);                                                                                                                          
    value = find_closest_value(sums, r);                                                                                                                      
    print_indexes(vec, value);                                                                                                                                
    return 0;                                                                                                                                                 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T07:36:43.643

**这不是动态规划问题**

**输出应该是整数（索引）向量，而不是双精度向量**

这可能是 0-2 的精确值，这只是概念：

A) 输出零索引，直到 r0（r - 已输出的索引值）大于 1/2

B) 检查 r0 double 的内部表示并且：

x (第一个位移) = -指数; // 指数越大，数字越小（开始时 1/2^(x) 中的 x 越大）

使用主体检查循环中浮点小数部分的位表示：（方向取决于小/大端）

 `````
{
  if (bit is 1)
    output index x;
  x++; 
```` 

`}`

每个步骤的复杂性是恒定的，因此总体而言它是 O(n)，其中 n 是输出的大小。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-07T07:41:31.930

解释这个问题，r 的二进制表示中的一位（在二进制点之后）是什么？如果您愿意，N 是“精度”。

在 Cish 伪代码中

```
for (int i=0; i<N; i++) {
  if (r>V[i]) {
    print(i);
    r -= V[i];
  }
} 
```

您可以为 r == 0 添加额外的测试以提前终止循环。

请注意，这给出了最接近“r”的最小二进制数，即如果有两个同样“正确”的答案，则该二进制数更接近于零。

如果第 N 个数字是 1，您需要将“1”添加到获得的“二进制”数字中，并与原始“r”进行核对。（提示：构造向量 a[N], b[N] of 'bits'，设置 '1' 位而不是上面的 'print'。设置 b = a 并手动添加，从 ' 末尾逐位b' 直到你停止携带。转换为双倍并选择更接近的那个。

请注意，a[] <= r <= a[] + 1/2^N 并且 b[] = a[] + 1/2^N。

'最少数量的索引 [原文如此]' 是一个红鲱鱼。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-07T07:01:16.130

对向量进行排序并搜索最接近 r 的分数。存储该索引，从 r 中减去该值，然后用 r 的余数重复。迭代直到达到 r，或者找不到这样的索引。

例子 ：

0.3 - 可用的最大值为 0.25。（索引 2）。现在的余数是 0.05

0.05 - 可用的最大值为 0.03125 - 余数为 0.01875

等等

等等。每一步都是在排序数组中进行 O(logN) 搜索。步数也将是 O(logN) 总复杂度将超过 O(logN^2)。`**

# exe - 使用不同的参数多次运行一个文件

> ID：10477947
> 
> 赞同：0
> 
> 时间：2012-05-07T06:57:11.887
> 
> 标签：exe

我在 Windows 中工作，在工作中我有一个需要多次运行的 VB 程序。它需要两个输入文件。其中一个是恒定的，另一个输入文件会根据每次运行程序时创建一个新的输出文件而更改。我需要知道如何实现自动化。这可以使用批处理文件来完成吗？我不确定 VB 程序是否需要 cmd 输入。我如何检查，我应该读什么？我无权访问它的来源。

每个运行的程序都在 shell 中运行。正确的？那么我在哪里可以看到呢？也许我可以使用不同的参数来操作和重复执行 exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:12:33.980

一种方法是编写 GUI 自动化脚本。以下 Stack 交换线程可以帮助您开始使用它：

1.  [自动化 GUI 任务](https://superuser.com/questions/29254/automate-gui-tasks)
2.  [https://stackoverflow.com/questions/120359/tools-for-automated-gui-testing-on-windows](https://stackoverflow.com/questions/120359/tools-for-automated-gui-testing-on-windows)

# windows-phone-7 - windows phone 7 中的 GPS 数据在后台运行时无效

> ID：10477953
> 
> 赞同：0
> 
> 时间：2012-05-07T06:57:39.000
> 
> 标签：windows-phone-7, gps, windows-mobile-gps

我开发了一个 windows phone 应用程序，它每 30 分钟向我的服务器发送 GPS 数据，并将其设置为后台应用程序（即使我的应用程序关闭也可以发送 GPS 数据）。但是这里有一个问题，我的应用程序可以运行并向我发送 GPS 数据，但数据不正确。看看这个例子：

> ```
> time  |  Coordinate      |  Application State        |         Description
> 
> 8:0   |  30.0 : 40:0     |      IS Running           |           Correct
> 8:31  |  31.0 : 40:0     |      IS Running           |           Correct 
> 
> Now I close the application in 8:35
> 
> 9:10  |  31.0 : 40:0     |        Closed             |          Invalid
> 9:31  |  31.0 : 40:0     |        Closed             |          Invalid
> 10:0  |  31.0 : 40:0     |        Closed             |          Invalid
> 
> Now I start my application  10:10
> 
> 10:31 |  115.0 : 67:0    |      IS Running           |           Correct
> 11:1  |  114.0 : 69:0    |      IS Running           |           Correct
> 
> Now I close the application in 11:15
> 
> 11:31  |  114.0 : 69:0   |        Closed             |          Invalid
> 12:01  |  114.0 : 69:0   |        Closed             |          Invalid 
> ```

**如您所见，当应用程序关闭时，它会发送自我的应用程序在关闭时运行以来的最后一个坐标。**

因为我是英语新手，所以我用这种方式来解释我的问题，所以对此表示歉意，任何想法都会有所帮助。

*（坐标均为样本）*

谢谢

阿里·福鲁吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:22:12.770

很难准确判断您提供的示例数据有什么问题，但鉴于您正在谈论关闭您的应用程序，我假设您正在使用 a `ScheduledTaskAgent`（a`PeriodicTask`或 a `ResourceIntensiveTask`）。如果您查看[Noteworthy APIs for Use with Scheduled Tasks](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx "用于计划任务的值得注意的 API")，您会发现`GeoCoordinateWatcher`从 a 使用的类`ScheduledTaskAgent`不一定使用实时 GPS 硬件数据。相反，数据来自每 15 分钟更新一次的操作系统缓存。这意味着如果 GPS 硬件在过去 15 分钟内没有被前台应用程序访问，那么操作系统将使用粗粒度的位置数据（例如来自 WiFi 接入点/蜂窝塔数据）更新缓存。因此，如果您的`ScheduledTaskAgent`最终使用这些数据，您可能会发现 GPS 数据不准确 - 这将包括最终用户报告的非常少的移动。如果您通过返回的`HorizontalAccurancy`or发送`VerticalAccuracy`，您可能会看到，在应用程序运行时，这些数字非常低（取决于您的），而当它在您的环境下运行时，这些数字会高得多。`GeoCoordinate``GeoCoordinateWatcher``MovementThreshold``ScheduledTaskAgent`

# javascript - 如何调试嵌入在页面中间的混淆 javascript？

> ID：10477960
> 
> 赞同：1
> 
> 时间：2012-05-07T06:58:33.370
> 
> 标签：javascript, debugging

我想弄清楚这个页面[marmiton](http://www.marmiton.org/recettes/recette_cookies-pas-ordinaires-aux-pepites-de-chocolat-et-sirop-de-caramel_169813.aspx)是如何工作的。最值得注意的是，下面这段 javascript 如何生成出现在页面末尾的 <a> 元素：

```
<div class="lienPlusCom">[ <script language="JavaScript">jsdchtml3('aºerh "=fecer¦ttr¦settecea-e_sivocikoap-se-sidroiana-serxupep--seti-edcohclo-tais-teored-pac-lemar1_1896psa.3 "x"=ditc00lMhpc_ianoCnnetC_m_trtceRlFettehcisiDelp_yamtH_mAlohcnoVruoTriLsoCsetnemmria "selcssaeil"=PnCsul"mosulP¹d oc etnemmria¦ºse¹a');</script> ]</div> 
```

但我的 javascript 调试技能相当有限。有没有人可以建议我在浏览器“去混淆”后如何单步执行此代码？我目前在我的大部分调试中都使用 firefox 和 firebug，但如果需要，我很愿意切换到另一个工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:07:34.077

放

```
debugger; 
```

您希望脚本停止的位置。然后你可以查看所有这些变量和元素以及所有类型的东西，看看问题出在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T07:19:50.770

那个 JavaScript 正在调用一个`jsdchtml3()`在这个长字符串上调用的函数：

```
'aºerh "=fecer¦ttr¦settecea-e_sivocikoap-se-sidroiana-serxupep--seti-edcohclo-tais-teored-pac-lemar1_1896psa.3 "x"=ditc00lMhpc_ianoCnnetC_m_trtceRlFettehcisiDelp_yamtH_mAlohcnoVruoTriLsoCsetnemmria "selcssaeil"=PnCsul"mosulP¹d oc etnemmria¦ºse¹a' 
```

我们可以去混淆`jsdchtml3()`一点：

```
jsdchtml3=function(s) {
    if (!jsdchtml3.p) {
        String.prototype.afca=String.prototype['ch'+'ar'+'At'];
        jsdchtml3.k='243524534235';
        jsdchtml3.ra=Array('º<','¹>','¦/');
        jsdchtml3.u=function(s) {
            if (!jsdchtml3.u.r) {
                jsdchtml3.u.r=Array();
                for (var i=0,a;i<jsdchtml3.ra.length;i++) {
                    a=jsdchtml3.ra[i].split('');
                    jsdchtml3.u.r[i]=Array(new RegExp(a[0],'gi'),a[1]);
                }
            }
            for (var i=0;i<jsdchtml3.u.r.length;i++)
                s=s.replace(jsdchtml3.u.r[i][0],jsdchtml3.u.r[i][1]);
            return s; 
        };
        jsdchtml3.r=function(a,b,c) {
            for (var j=c-1,o='';j>=0;j--)
                o+=a.afca(b+j);
            return o;
        };
        jsdchtml3.p=function(f,a) {
            var t=jsdchtml3.u(f),i=0,p=0,n,o='';
            while(p<t.length) {
                n=parseInt(a.afca(i++ % a.length));
                o+=jsdchtml3.r(t,p,n);
                p+=n;
            }
            return o;
        };
    }
    document.write(jsdchtml3.p(s,jsdchtml3.k));
}; 
```

这将执行`document.write`of `jsdchtml3.p(s,jsdchtml3.k)`，`s`长字符串在哪里。遵循这个控制流通过函数......这有点令人困惑！

# ios - 在 NSMutableArray 中存储联系人列表

> ID：10477964
> 
> 赞同：3
> 
> 时间：2012-05-07T06:58:54.837
> 
> 标签：ios, contacts, import-contacts

我正在使用此代码获取联系人列表，然后我想将联系人列表存储到一个数组中，好吧，如果我知道如何添加所有名字，那么我将继续使用其他属性.

```
- (void)viewDidLoad {
    // Implement viewDidLoad if you need to do additional setup after loading the view.
    [super viewDidLoad];

    ABAddressBookRef addressBook = ABAddressBookCreate(); // create address book reference object
    NSArray *abContactArray = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook); // get address book contact array

    NSInteger totalContacts =[abContactArray count];

    for(NSUInteger loop= 0 ; loop < totalContacts; loop++)
    {
        ABRecordRef record = (ABRecordRef)[abContactArray objectAtIndex:loop]; // get address book record
        // NSLog(@"%@,%@,%@",recordIdString,firstNameString,lastNameString);

        [myarray addObject:firstNameString];
        NSLog(@"%@",[myarray objectAtIndex:1]);

        if(ABRecordGetRecordType(record) ==  kABPersonType) // this check execute if it is person group
        {
            ABRecordID recordId = ABRecordGetRecordID(record); // get record id from address book record

            recordIdString = [NSString stringWithFormat:@"%d",recordId]; // get record id string from record id

            firstNameString = (NSString*)ABRecordCopyValue(record,kABPersonFirstNameProperty); // fetch contact first name from address book  
            lastNameString = (NSString*)ABRecordCopyValue(record,kABPersonLastNameProperty); // fetch contact last name from address book
            //NSLog(@"%@,%@,%@",recordIdString,firstNameString,lastNameString);
        }
    }
} 
```

myarray 是`NSMutableArray *myarray`在 .h 类中创建的对象。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T00:01:57.030

试试这个：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *arrayOfPeople = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);    

//The array in which the first names will be stored as NSStrings
NSMutableArray *firstNames = [[NSMutableArray alloc] init];

for(NSUInteger index = 0; index <= ([arrayOfPeople count]-1); index++){

    ABRecordRef currentPerson = (__bridge ABRecordRef)[arrayOfPeople objectAtIndex:index];    
    NSString *currentFirstName = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonFirstNameProperty);
    [firstNames addObject: currentFirstName];
}

//OPTIONAL: The following line sorts the first names alphabetically
NSArray *sortedFirstNames = [firstNames sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

我对此进行了测试，并且可以正常工作。如果您对代码有任何问题，只需添加评论，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:46:12.490

只是猜测您的问题是：将您的代码更改为：

```
- (void)viewDidLoad {
    // Implement viewDidLoad if you need to do additional setup after loading the view.
    [super viewDidLoad];

    ABAddressBookRef addressBook = ABAddressBookCreate(); // create address book reference object
    NSArray *abContactArray = (NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook); // get address book contact array

    NSInteger totalContacts =[abContactArray count];

    for(NSUInteger loop= 0 ; loop < totalContacts; loop++)
    {
        ABRecordRef record = (ABRecordRef)[abContactArray objectAtIndex:loop]; // get address book record

        if(ABRecordGetRecordType(record) ==  kABPersonType) // this check execute if it is person group
        {
            ABRecordID recordId = ABRecordGetRecordID(record); // get record id from address book record

            recordIdString = [NSString stringWithFormat:@"%d",recordId]; // get record id string from record id

            firstNameString = (NSString*)ABRecordCopyValue(record,kABPersonFirstNameProperty); // fetch contact first name from address book  
            lastNameString = (NSString*)ABRecordCopyValue(record,kABPersonLastNameProperty); // fetch contact last name from address book
            //NSLog(@"%@,%@,%@",recordIdString,firstNameString,lastNameString);

            // changes took place here!
            [myarray addObject:firstNameString]; 
            NSLog(@"%@",[myarray objectAtIndex:loop]);
        }
    }
} 
```

# php - 我可以在 Facebook 提要中包含一些 javascript 吗？

> ID：10477970
> 
> 赞同：-1
> 
> 时间：2012-05-07T06:59:22.387
> 
> 标签：php, javascript, facebook

我有一个 Facebook 应用程序，我想用它在用户的提要中显示图像。这只是一个小圆圈，根据用户在我的应用程序中所做的事情，它会有不同的颜色。

与其创建许多不同的图像来显示，而是为圆圈可能的每种可能颜色创建一个，如果我可以放置一个具有透明度的 PNG，然后通过使用 Javascript 在图像后面填充一个 DIV 来更改颜色，那将是理想的。

但是，我不清楚 Facebook 是否会在提要中允许这样做。

可以在提要中包含一些 Javascript，还是严格禁止？

还是我唯一的选择是拥有所有不同颜色的图像库并拥有一个 PHP 函数来选择正确的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:06:16.783

不，出于安全原因，facebook 不允许在提要中嵌入 JavaScript。即使您设法做到了，它也不会起作用，因为某些字符（例如`<`,`>`等）将被转换为 html 实体，这意味着 JavaScript 将无法工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:07:31.410

Facebook 不允许在提要故事中包含任何可编写脚本的内容，并且无法以这种方式实现您想要的内容。

您可以轻松创建简单的脚本，该脚本将根据传递的参数返回彩色图像并将其用作图像的源。

这样的事情可能会为您提供一些要点：

```
<?
// create a 200*200 image
$img = imagecreatetruecolor(200, 200);

// get the color from URL arguments or use default one
$rgb = isset($_REQUEST['color']) ? $_REQUEST['color'] : 'FFEEDD';

$color = array(
  base_convert(substr($rgb, 0, 2), 16, 10),
  base_convert(substr($rgb, 2, 2), 16, 10),
  base_convert(substr($rgb, 4, 2), 16, 10),
);

// allocate some colors
$white = imagecolorallocate($img, 255, 255, 255);
$red   = imagecolorallocate($img, $color[0], $color[1], $color[2]);

// draw the head
imagefilledarc($img, 100, 100, 200, 200, 0, 360, $red, IMG_ARC_PIE);

// output image in the browser
header("Content-type: image/png");
imagepng($img);

// free memory
imagedestroy($img); 
```

# iphone - 如何在 Facebook 登录页面或对话框中更改语言？

> ID：10477975
> 
> 赞同：5
> 
> 时间：2012-05-07T07:00:23.957
> 
> 标签：iphone, facebook, localization

有问题很久了，不知道问题出在哪里。我自己的应用程序和这个 Hackbook Demo 应用程序在弹出身份验证对话框时有相同的情况。无论是网络对话还是 Faccbook 原生应用程序，我都希望它以英文显示。甚至，我的 ios 语言是英语，身份验证对话框仍然不是英语。

有人帮助我，请，谢谢！

![在此处输入图像描述](../Images/d3860bd7027d42b2ea796bb2ab880733.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T08:51:53.627

它是一个 Facebook 级别的问题。检查这个：

[http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383](http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

问题是 ：

> “使用 Facebook 首次登录时，要求用户授权此应用程序的对话框以看似随机的语言显示。仅当用户通过 Wifi 连接时才会发生。”

# c# - 在 .NET 中使用 Microsoft.Office.Interop.Excel 需要哪些参考资料？

> ID：10477977
> 
> 赞同：111
> 
> 时间：2012-05-07T07:00:50.110
> 
> 标签：c#, .net, office-interop, visual-studio-express

我对使用 C# 来操作/自动化 Excel 文件很感兴趣。

浏览网页后，我找到了[VSTO](http://msdn.microsoft.com/en-us/office/hh133430)，但似乎您不能在 Visual Studio Express Edition 中使用它，所以我不能使用它。

就在几分钟前，我注意到这个站点中的一个问题在其代码中使用了这个命名空间：

**Microsoft.Office.Interop.Excel**

所以我想知道我是否只需要添加必要的引用，如果需要，添加哪个引用？

**更新**

我按照接受的答案建议安装了“主互操作程序集”，但由于某种原因，“.NET”下的“添加引用”对话框中仍然缺少它们，但它们存在于 GAC 中。

所以我只是使用“浏览”添加了引用并位于`Microsoft.Office.Interop.Excel.dll`GAC 文件夹中。

但是在这个网站上寻找关于添加来自 GAC 的参考的类似问题似乎不建议这样做。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-07T07:03:55.007

# 更新（感谢 user2347528）

这些程序集以 NuGet 包的形式提供，这比我原来的答案容易得多。

您可以通过右键单击项目中的**引用**并选择**管理 NuGet 包...**并搜索下面列出的包之一来安装，或者使用包管理器控制台进行安装：

```
PM> Install-Package Microsoft.Office.Interop.Excel 
```

*   [Microsoft.Office.Interop.Excel](https://www.nuget.org/packages/Microsoft.Office.Interop.Excel)
*   [Microsoft.Office.Interop.Word](https://www.nuget.org/packages/Microsoft.Office.Interop.Word)
*   [Microsoft.Office.Interop.Outlook](https://www.nuget.org/packages/Microsoft.Office.Interop.Outlook)
*   [Microsoft.Office.Interop.PowerPoint](https://www.nuget.org/packages/Microsoft.Office.Interop.PowerPoint)
*   [Microsoft.Office.Interop.Graph](https://www.nuget.org/packages/Microsoft.Office.Interop.Graph)

* * *

These are available as "Primary Interop Assemblies", which can be installed with Office, or downloaded and installed separately. [How to: Install Office Primary Interop Assemblies](http://msdn.microsoft.com/en-us/library/kh3965hw%28v=vs.100%29.aspx).

Once those are installed, you can reference them in your project in the Add Reference dialog, under .NET. If you do not see those Microsoft.Office.Interop assemblies listed, then they have not been installed yet. Install them from your setup, or download and install them separately (see my link above for the downloads).

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-14T14:25:53.000

Just had this problem myself and accepted answer didn't help me but I solved it with:

`Add reference > Browse > C: > Windows > assembly > GAC > Microsoft.Office.Interop.Excel > 12.0.0.0_etc > Microsoft.Office.Interop.Excel.dll`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-07-24T06:37:53.633

Answers didn't help me to solve my problem, I couldn't find (and browse) the assemblies although I installed them using Microsoft's msi installer. For me, the excel assembly is located under `C:\Windows\assembly\GAC_MSIL\Microsoft.Office.Interop.Excel\14.0.0.0__71e9bce111e9429c\Microsoft.Office.Interop.Excel.dll`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-07T07:06:59.153

Just add reference of `Microsoft.Office.Interop.Excel`.

It includes MicroSoft Excel related classes, no need to add more references.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-07T08:24:33.580

I guess what you are trying to do is add `Microsoft.Office.Interop.Excel` with `using` statement with out adding its reference in your application, in that case it wont be found. Before calling it with `using` statement you need to add a reference to ur application. Right click on `References` and add the `Excel Interop` reference.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-05T11:38:20.093

Add reference > Browse > C: > Windows > assembly > GAC > Microsoft.Office.Interop.Excel > 12.0.0.0_wasd.. > Microsoft.Office.Interop.Excel.dll

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-01-05T14:46:38.820

I found it located under Assemblies->Extensions in VS2013.

![Add Reference](../Images/41a4aeb15ee6e01ffa0201c552a5ba9a.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-07T07:05:59.283

If you have Microsoft Office installed, then you should be able to add a reference to Interop.Excel.

For example, the PC I'm typing this on has MSVS 2010 C# Express and Office 2010\. I can add a reference to Microsoft.Office.Interop.Excel 11.0.0.0.

'Hope that helps

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-07T16:40:52.240

its in the com component, named: "Microsoft Office 14 Object Library"

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-11-13T21:27:33.600

I just had the same problem, but none of these answers helped me. I did find the dll on my pc in the location Mostey noted: (`C:\Windows\assembly\GAC_MSIL\Microsoft.Office.Interop.Excel\14.0.0.0__71e9bce111e9429c\Microsoft.Office.Interop.Excel.dll`), but this is not the one that was referenced in the project I was trying to get building.

The reference in our project in Visual Studio 2012 was pointing to `C:\Program Files (x86)\Microsoft Visual Studio 11.0\Visual Studio Tools for Office\`. This location was empty for me, but it worked fine for everyone else. It took a number of tries, but I finally tracked down a working installer. I hope this saves others the same hassle!

**--> [Office Tools Bundle installer for VS2012](http://download.microsoft.com/download/2/F/6/2F6A4FFA-D409-40C8-AF68-F6F0CBE0A00D/ENU/officetools_bundle.exe) <--**

This was located on the [Office Documentation and Download](http://msdn.microsoft.com/en-US/office/aa905340) page. Scroll down to **Tools Downloads**. There's also currently one for VS2013.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-02-05T08:19:45.590

The best option since office 2007 is using [Open XML SDK](https://www.microsoft.com/en-us/download/details.aspx?id=30425) for it. We used Word.Interop but it halt sometimes, and it is not recommend for Microsoft, to use it as a server side document formatting, so Open XML SDK lets you creates word documents on DOCX and Open XML formats very easily. It lets you going well with scability, confidence ( the files, if it is corrupted can be rebuild ), and another very fine characteristics.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-10-30T21:39:56.627

Here is super solid solution, you just need have excell.dll in your Debug/Release folder Mine is 77,824 bytes, I downloaded it as a file, this also explain why some people have Debug compiled but Release not or vice versa.

Trento

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-07-24T15:25:19.313

1.Download and install: Microsoft Office Developer Tools

2.Add references from:

C:\Program Files (x86)\Microsoft Visual Studio 11.0\Visual Studio Tools for Office\PIA\Office15

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-11-03T00:01:08.637

I had the same issue and the Microsoft.Office.Interop was not appearing in "Add Reference" option once I upgraded VS2012 to VS2015\. I basically repaired the installation (*Control Panel > Programs & Features > VS 2012 > Right click Change > Repair*) and added the Microsoft Office component. After that the same solution started working.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-01T10:28:20.337

Make sure your project is 32 bit.

I had this problem, as soon as I ticked "Prefer 32 bit and rebuilt" all the Office Interop assemblies where available in Reference->Assemblies->Search "Office".

# bubble-popup - 在锚标记中鼠标悬停时没有出现气泡文本

> ID：10477978
> 
> 赞同：1
> 
> 时间：2012-05-07T07:00:57.237
> 
> 标签：bubble-popup

我试图弹出气泡文本，因为我已经在下面编码了，当鼠标悬停在应该弹出气泡文本的帮助锚标记上时的代码，但它对我不起作用，请帮助我。

这是我的代码片段。

```
**HTML Code:**

<div class="divbubble"> <div class="tooltip">
                                    <a href="#">Help</a>
                                    <div>
                                        <div class="top"></div>
                                        <div>
                                            Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
                                        </div>
                                        <div class="bottom"></div>
                                    </div>
                                </div></div>

**CSS code:**

.divbubble .tooltip {
  width: 18px;
  height: 18px;
  position: relative;
  margin-left: 15px;
  float: left;
}
.divbubble .tooltip a {
  display: block;
  float: left;
  width: 18px;
  height: 18px;
  background: url(images/icoQuestion.png) no-repeat;
  font: 0/0 serif;
  text-shadow: none;
  color: transparent;
  -webkit-transition: none;
  -moz-transition: none;
  -ms-transition: none;
  -o-transition: none;
  transition: none;
}
.divbubble .tooltip a:hover {
  background-position: 0 -18px;
}
.divbubble .tooltip > div {
  display: none;
  position: absolute;
  float: left;
  width: 220px;
  bottom: 22px;
  left: -101px;
  font-size: 12px;
  line-height: 18px;
  color: #fff;
  z-index: 20;
}
.divbubble .tooltip > div .top {
  background: url(images/tooltipTop.png) no-repeat;
  width: 220px;
  height: 10px;
}
.divbubble .tooltip > div div {
  display: block;
  background: #4599c3;
  width: 200px;
  padding: 0 10px;
}
.divbubble .tooltip > div .bottom {
  background: url(images/tooltipBottom.png) no-repeat;
  width: 220px;
  height: 21px;
} 
```

# c# - EF 与 WCF：基础连接已关闭：连接意外关闭

> ID：10477980
> 
> 赞同：1
> 
> 时间：2012-05-07T07:01:01.413
> 
> 标签：c#, wcf, asp.net-mvc-3, exception-handling, entity-framework-4.1

当我通过 WCF 从 ASP.NET MVC 检索所有订单及其 OrderDetails 时，它会引发错误。直到服务它工作正常，只有在这种情况下 MVC 调用停止服务时，它才会抛出错误：

> 基础连接已关闭：连接意外关闭。

1.  我没有使用延迟加载

2.  我想使用相同的 POCO 类，不想在 WCF 中单独创建 DataContract。

我的代码：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ServiceReference1.Service1Client service = new ServiceReference1.Service1Client();
        var allOrders = service.GetAllOrders();
        service.Abort();
        return View();
    }       
}

// WCF Service Method
public List<Order> GetAllOrders()
{
    List<Order> orders = null;
    using (NorthwindEntities context = new NorthwindEntities())
    {
        orders = context.Set<Order>().Include("Order_Details").AsEnumerable().ToList();
    }

    return orders;
}

public class Order
{
    public Order()
    {
        this.Order_Details = new HashSet<Order_Detail>();
    }

    public virtual ICollection<Order_Detail> Order_Details { get; set; }
  } 

public class Order_Detail
{
    public int OrderID { get; set; }
    public int ProductID { get; set; }
    public decimal UnitPrice { get; set; }
    public short Quantity { get; set; }
    public float Discount { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T05:32:56.890

感谢亚历克斯，

它在禁用 ProxyCreationEnabled 后工作。

```
 public List<Order> GetAllOrders()
    {
        List<Order> orders = null;

        using (NorthwindEntities context = new NorthwindEntities())
        {
            context.Configuration.ProxyCreationEnabled = false;
            orders = context.Set<Order>().Include("Order_Details").AsEnumerable().ToList();
            context.Configuration.ProxyCreationEnabled = true;

        }

        return orders;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:16:19.960

这可能是超时问题。猜测一下，尝试在 httpRuntime 元素中设置 executionTimeout 属性，如下所示 -

[http://msdn.microsoft.com/en-us/library/e1f13641.aspx](http://msdn.microsoft.com/en-us/library/e1f13641.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T08:52:56.627

根据默认限制，结果消息可能太大而无法发送回客户端。

您可以使用 WCF 跟踪日志找出问题所在。请参阅[此](http://litemedia.info/wcf-the-connection-was-closed-unexpectedly)链接。

# .net - 同一查询中不同项目的不同存储库

> ID：10477984
> 
> 赞同：0
> 
> 时间：2012-05-07T07:01:32.967
> 
> 标签：.net, asp.net-mvc, entity-framework, dependency-injection, ninject

我正在将 ASP.NET MVC3 与实体框架一起使用，并使用带有 DI (Ninject) 的通用存储库模式。

我有一个其他站点连接到它的主要项目。主项目有它自己的域存储库，它连接到数据库中的通用表。每个连接到它的站点也有它自己的域存储库，它连接到它自己的数据库表。我的问题是，当我尝试执行将站点表与主项目表结合起来的复杂 linq 查询时，代码不会喊他不能在同一查询中使用两个不同的 dbcontext。所以我必须划分我的查询并从一个存储库表 (ToList()) 中提取数据，然后才能在其他存储库表中使用它。从我的角度来看，我不能对两个存储库使用相同的 DbContext，因为主项目作为站点项目的 Dll 提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T07:29:32.450

你自己给出了答案。您不能`DbContext`对单个查询使用多个实例（这在您考虑时非常明显）。而是在单个 Web 请求中为所有存储库使用单个实例。Ninject 具有[Per Web Request 生活方式](https://github.com/ninject/Ninject.Web.Common/wiki/InRequestScope)。

# html - 如何使用数千个输入元素提高 html 表单的速度

> ID：10477989
> 
> 赞同：1
> 
> 时间：2012-05-07T07:01:58.283
> 
> 标签：html, performance

我有一个表单，我需要在其中插入一个项目，这是表单的 html。

```
<form action="test.php" class="form" method="post">
    <?php for($i=0; $i<=500; $i++): ?>
        <div class="formRow itemList">
            <select class="chzn-select" tabindex="2" name="items[]">
                <option value="3">Toys</option>
                <option value="4">Books</option>
                <option value="5">Shirts</option>
                <option value="6">iPad</option>
            </select>
            <span style="width:7%;float:left;margin-left:2%;" style="">
                <input type="text" name="quantity[]" class="est_quantity" placeholder="quantity" value="10"/>
            </span>
            <span style="width:7%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="cost[]" class="est_cost" placeholder="cost" value="100"/>
            </span>
            <span style="width:7%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="rate[]" class="est_rate" placeholder="rate" rate="200"/>
            </span>
            <span style="width:7%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="size[]" class="est_size" placeholder="size"/>
            </span>
            <span style="width:7%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="cartonnum[]" class="est_carton_no" placeholder="carton no."/>
            </span>
            <span style="width:8%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="numofcarton[]" class="est_cartons" placeholder="ctns."/>
            </span>
            <span style="width:8%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="qtyctn[]" class="est_qtyctn" placeholder="qty/ctn"/>
            </span>
            <span style="width:7%;float:left;margin-left:2.5%;" style="">
                <input type="text" name="cbm[]" class="est_cbm" placeholder="cbm"/>
            </span>
            <div class="clear"></div>
            <a href="#" class="itemRemove">Remove</a>
        </div>
    <?php endfor; ?>
</form> 
```

它是这样的。

*   一行有 9 个输入元素。
*   有时我需要输入 300 到 500 个项目。
*   总共有 500 * 9 = 4500 个输入元素。

**代码在以下位置进行测试：**

*   浏览器：谷歌浏览器 18.0.1025 和 safari 5.1.3
*   操作系统：OSX 10.7.3
*   环境：当地

当我尝试执行代码时，我得到了严重的性能，这是统计数据。

**页面加载时间：**

*   一般页面加载时间：平均 2.4 秒。
*   应用 css 样式：平均 5.3 秒。
*   应用 css 样式并包含一些 js 库：平均 3.1 秒
    - 我不知道为什么在包含 js 库后页面加载时间会减少，我正在使用 jQuery、jQuery ui 和更多插件，如 jQuery Chosen Plugin。

**输入元素对鼠标和键盘焦点的响应时间：**

这是事情往往会越界的地方。

*   在谷歌浏览器中，当我尝试在元素中输入一些值时，页面会冻结。
*   在 Safari 中，将焦点转移到其他元素时会有 4 秒的延迟。在将几个焦点转移到几个输入元素之后，延迟时间大大减少到几毫秒。

我注意到的奇怪的事情是当我`<form>`从代码中删除属性时。在两个浏览器上，性能都得到了改善，几乎没有延迟或没有延迟。我不知道是什么导致了这种行为。

我正在使用此插件动态插入表单元素的行：[MultiField](http://vipullimbachiya.com/jQuery/Plugins/MultiField/2/index.htm)

**所以我的问题是：**

*   如何提高加载时间速度，更重要的是停止导致脚本停止由浏览器执行的奇怪行为？
*   浏览器在使用表单元素时导致此行为的原因是什么。

非常感谢任何可以提高性能、提示或任何可以帮助我提高性能的库类型。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T07:05:50.323

好的，所以*有时*您需要输入 300-500 项。并非*总是如此。*你*真的*需要在一个页面上输入它们吗？

如果我在 Web 表单上输入了 497 个项目，然后我的浏览器在我身上崩溃了，我会非常恼火。很快就会向您的办公室打一个相当滥用的技术支持电话:-)

找到一种方法来保存少量数据（比如一次十个项目），这样您就不需要一次所有这些输入字段。这既可以提高您的表现*，又*可以让您远离精神病患者。

例如，一次将它们推入服务器端数据库十个项目，由存储在客户端的 cookie 值标识。一次十项的场景是一个不错的页面大小（用户以十项块的形式编辑他们的列表）。基于网络的商务一直在做这种事情，他们的购物车等等。

当用户想要提交整个列表时，cookie 值用于将所有页面捆绑在一起以提交一个有凝聚力的工作单元。

# opengl - OpenGL纹理单元

> ID：10477994
> 
> 赞同：1
> 
> 时间：2012-05-07T07:02:28.440
> 
> 标签：opengl

我从我的应用程序中观察到一个奇怪的行为，希望你能向我解释。你看，我有这两个 3D 纹理被发送到片段着色器并且渲染得非常好。但是有一个问题，一旦我创建了另一个纹理（它是一个 1D 纹理），就会渲染一个黑屏，而不是之前的正确结果。

关于这个 1D 纹理，我什至没有将它发送到片段着色器。在我调用 glTexImage1D(...) 的那一刻，黑屏出现了。我评论了这条线，它就消失了！！两个纹理都被渲染了。

我认为纹理单元肯定存在某种问题。因为当我使用 gDebugger 运行应用程序时，3D 纹理之一的纹理单元与分配给 1D 纹理的纹理单元相同。

我没有为一维纹理分配任何纹理单元，我只是创建了它。显然纹理单元 GL_TEXTURE0 被自动分配给一维纹理。奇怪的是，虽然我使用 GL_TEXTURE2 和 GL_TEXTURE3 作为 3D 纹理，但其中一个由于调用 glTexImage1D 而被绑定到 GL_TEXTURE0！

这是 gDebugger 的纹理列表窗口的快照：

Texture 1 (unit 2 ,bound3d)-enabled Texture 2 (unit 0 ,bound1d) Texture 3 (unit 0 ,bound3d)-Enabled (unit 3,bound3D)-启用

为什么会这样？

问题不在于为什么将纹理 1D 绑定到 GL_TEXTURE0，而是为什么它会影响另一个已绑定纹理的状态。代码是这样的：。

```
...
// generating  the first texture_3d
glTexImage(GL_TEXTURE_3D,....);
glBindTexture(GL_TEXTURE_3D,id1);

    //render loop for the first texture_3d
    GLuint glEnum = GL_TEXTURE2;
    vtkgl::ActiveTexture(glEnum);
    glBindTexture(vtkgl::TEXTURE_3D,id1);
    program->setUniform("TEX1",2);

    // generating  the second texture_3d
    glTexImage(GL_TEXTURE_3D,....);
    glBindTexture(GL_TEXTURE_3D,id2);

    //render loop for the first texture_3d
    GLuint glEnum = GL_TEXTURE3;
    vtkgl::ActiveTexture(glEnum);
    glBindTexture(vtkgl::TEXTURE_3D,id2);
    program->setUniform("TEX2",3);

    // generating  texture 1D
    glTexImage(GL_TEXTURE_1D,....);
    glBindTexture(GL_TEXTURE_1D,id3);

    we expect GL_TEXTURE2 and GL_TEXTURE3 to be active but gDebugger indicates that GL_TEXTURE0 and GL_TEXTURE2 are active. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:06:43.457

打电话`glActiveTexture`之前`glBindTexture`

glBindsTexture 绑定到当前活动纹理，因此在当前代码中，您首先将 id1 绑定到纹理 0，然后将其再次绑定到纹理 2，然后将 id2 绑定到纹理 2（替换 id1）等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T00:21:58.320

您不应该同时将 1D 和 3D 纹理绑定到同一个纹理单元。为避免这种情况，要么取消绑定 3D 纹理：`glBindTexture()`要么切换到新的纹理单元：`vtkgl::ActiveTexture()`在绑定 1D 纹理之前。

正如上面的海报所说，对的调用`vtkgl::ActiveTexture()`必须在相应的调用之前来`glBindTexture()`。

# php - 在 Amazon Dynamo DB 中编写复杂查询（数学表达式）

> ID：10477996
> 
> 赞同：5
> 
> 时间：2012-05-07T07:02:30.920
> 
> 标签：php, amazon-dynamodb

我已经从 mysql 切换到 Dynamo DB。在 mysql 中，我使用了一个查询来获取更接近特定纬度和经度的所有用户。查询是

```
SELECT *,SQRT( POW( 69.1 * ( latitude - $latitude) , 2 ) + POW( 69.1 * ( $longitude - longitude ) * COS( latitude / 57.3 ) , 2 ) ) AS distance FROM coupon WHERE is_active='Y' HAVING distance<=$radius 
```

是否可以像在 Dynamo DB 中一样创建查询。我使用 PHP 作为后端

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T07:44:14.130

不，[Amazon DynamoDB](http://aws.amazon.com/dynamodb/)不提供开箱即用的复杂 SQL 查询，毕竟，当您想使用[NoSQL](http://en.wikipedia.org/wiki/NoSQL)数据库时，必须做一些事情；）

但是，鉴于 DynamoDB 是专门为需要*快速且可预测的性能和无缝可扩展性*的用例而开发的，这通常意味着相应的大型数据集，它为像您这样的用例提供了与[Amazon Elastic MapReduce (Amazon EMR)的集成：](http://aws.amazon.com/elasticmapreduce/)

> Amazon DynamoDB 还与 Amazon Elastic MapReduce (Amazon EMR) 集成。Amazon EMR 允许企业使用 AWS 上托管的即用即付 Hadoop 框架对其大型数据集执行复杂的分析。[...] 企业还可以使用 Amazon EMR 访问多个存储（即 Amazon DynamoDB、Amazon RDS 和 Amazon S3）中的数据，对这个组合数据集进行复杂分析，并将这项工作的结果存储在 Amazon S3 中。

您可能需要阅读[使用 Amazon EMR 在 Amazon DynamoDB 中导出、导入、查询和连接表以了解详细信息](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.html)，其中总结*了使用类似 SQL 的语句 (HiveQL) 查询实时 Amazon DynamoDB 数据*等。虽然[HiveQL](https://cwiki.apache.org/confluence/display/Hive/HiveQL)提供的不仅仅是 DynamoDB 本身，但它仍然是一种*简单的类似 SQL 的查询语言*，并且不包括像您这样的数学表达式。

对于这些，您需要深入研究[Hadoop 和 MapReduce](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/elasticmapreduceandHadoop.html)（由 DynamoDB EMR 集成提供），因为它允许您对数据执行几乎任何您想做的事情（例如，请参阅[如何使用自定义 JAR 创建作业流](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/CLI_JobFlowUsingCustomJAR.html)）。

# android - Activity 和 FragmentActivity 的区别

> ID：10477997
> 
> 赞同：243
> 
> 时间：2012-05-07T07:02:34.200
> 
> 标签：android, android-fragments, android-support-library, android-fragmentactivity

我在处理片段时遇到了两件事`Activity`，`FragmentActivity`它们被多次使用。我想知道这两者之间有什么区别，因为当我用 更改`Activity`时`FragmentActivity`，它对应用程序没有影响。

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2012-05-07T07:06:18.003

A是为[Android Support Package](http://developer.android.com/sdk/compatibility-library.html)构建`FragmentActivity`的子类。`Activity`

该类`FragmentActivity`添加了几个新方法以确保与旧版本的 Android 兼容，但除此之外，两者之间并没有太大区别。只需确保将所有调用分别更改为`getLoaderManager()`和。`getFragmentManager()``getSupportLoaderManager()``getSupportFragmentManager()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-01T08:23:45.507

`FragmentActivity`是[支持库](https://developer.android.com/topic/libraries/support-library/index.html)的一部分，`Activity`而是框架的默认类。它们在功能上是等效的。

您应该始终使用`FragmentActivity`and`android.support.v4.app.Fragment`而不是平台默认值`Activity`和`android.app.Fragment`类。使用平台默认值意味着您依赖于您正在运行的设备中使用的任何片段实现。这些通常已有多年历史，并且包含已在支持库中修复的错误。