# StackOverflow 问答 12405000-12405999

# angularjs - AngularJS，开关盒的绑定范围？

> ID：12405005
> 
> 赞同：8
> 
> 时间：2012-09-13T11:14:38.623
> 
> 标签：angularjs

为了掌握 AngularJS，我决定尝试其中一个示例，具体来说，只需向 Todo 示例添加一个“完整”屏幕，当用户输入 5 个待办事项时，它使用 switch-case 切换到另一个 div . 如果有任何用处，可在此处获取代码[http://jsfiddle.net/FWCHU/1/ 。](http://jsfiddle.net/FWCHU/1/)

但是，似乎每个 switch-case 都有自己的范围（$scope.todoText 不可用），但是在这种情况下，可以使用 addTodo() 中的“this”访问它。到目前为止一切顺利，但是说我想在 switch-case 之外访问 todoText（在 switch-case 内部），我该怎么做呢？我是否可以将 switch-case 范围绑定到模型，它是否可以通过其他方式访问，或者应该以其他方式解决？

PS。我不想**为**上面的代码找到任何解决方案，我很确定我知道如何在不使用 switch-cases 的情况下解决它，我想了解作用域在这种情况下是如何工作的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T21:42:16.887

马克有一些很棒的建议！确保您还检查了[AngularJS Batarang Chrome 扩展](https://chrome.google.com/webstore/detail/ighdmehidhipcmcojjgiloacoafjmpfk)以查看各种范围及其值（以及其他内容）。请注意，它似乎不适用于 jsFiddle。

我不确定如何直接访问内部范围，但这是通过绑定到对象而不是原语来访问外部范围中相同文本的一种方法。

1）`todoText`在控制器中声明为对象而不是原语：

```
$scope.todoText = {text: ''}; 
```

2）绑定到`todoText.text`而不是仅仅`todoText`：

```
<form ng-submit="addTodo()">
    <input type="text" ng-model="todoText.text" size="30" placeholder="add new todo here">
    <input class="btn-primary" type="submit" value="add">
</form> 
```

3）修改现有功能以使用`todoText.text`：

```
$scope.addTodo = function() {
    $scope.todos.push({text:$scope.todoText.text, done:false, width: Math.floor(Math.random() * 100) + 50});
    $scope.todoText.text = '';
}; 
```

看看[这个 fiddle](http://jsfiddle.net/uvBwH/)并注意当您输入内容时显示在文本框下方的文本正在访问`todoText.text`外部范围。

如果您将代码更改回使用原语（如在[此小提琴](http://jsfiddle.net/uvBwH/1/)中），则父范围`todoText`不会反映您对文本框所做的任何更改。这可能更多地与 JavaScript 如何复制引用值有关（有关更多信息，请参阅[这篇文章](https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language)），而不是 AngularJS 特定的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T20:36:58.957

**更新 2：** 现在我对 AngularJS 有了更多的了解，这是一个更好的答案。

> 假设我想在 switch-case 之外访问 todoText（在 switch-case 内部），我该怎么做呢？

父作用域无法访问子作用域。[（根据 Angular 开发人员](https://groups.google.com/d/msg/angular/LDNz_TQQiNE/ygYrSvdI0A0J)的说法，这种限制的一个原因是为了更容易地对范围进行内存管理。）（嗯，你可以使用 $$childHead 和 $$childTail 来访问子范围，但你不应该这样做！）

> 我是否可以将 switch-case 范围绑定到模型，它是否可以通过其他方式访问，或者应该以其他方式解决？

从子作用域访问父模型的常用方法有以下三种：

1.  执行@Gloopy 建议的操作：在父范围内创建一个对象，然后在子范围内引用该对象的属性。
2.  在子作用域中使用 $parent 来访问父作用域及其属性，甚至是原始属性。
3.  在父作用域上调用方法

要将您的小提琴转换为使用 $parent：

```
<input type="text" ng-model="$parent.todoText" ...

$scope.addTodo = function() {
   $scope.todos.push({text: $scope.todoText, ...
   $scope.todoText = ''; 
```

正如我在 Gloopy 答案的评论中提到的那样，ng-repeat 和 ng-switch 都有新的子作用域原型继承自父作用域。ng-repeat 还将循环变量/项目复制到新的子范围（以及@Gloopy 用原语与对象描述的细微差别适用）。ng-switch 不会从父范围复制任何内容。

要查看内部/子范围的外观，请在 ng-switch-when 之后添加以下内容：

```
<a ng-click="showScope($event)">show scope</a> 
```

并将其添加到您的控制器：

```
$scope.showScope = function(e) {
    console.log(angular.element(e.srcElement).scope());
} 
```

**更新1：（**删除线添加到不好的建议，[]为清楚起见添加）

对于这种情况，AngularJS 正在创建额外的内部范围（隐式），而您并不真正想要/需要另一个控制器，我喜欢 Gloopy 的解决方案。服务（我最初在下面建议的）是 [执行此操作的错误方法]~~在这里可能有点矫枉过正~~。我也喜欢 Gloopy 的解决方案不需要在控制器方法中使用“this”。

**原始答案**：（为不良建议添加了删除线，为清楚起见添加了[]）

要查看创建范围的位置（如果您还没有尝试过，这很方便）：

```
.ng-scope { margin: 4px; border: 1px dashed red } 
```

~~要在 switch-case 之外访问 todoText（因此在其范围之外），您实际上是在询问控制器间通信，因为涉及多个范围。您有几个选择，但服务可能是最好的。将数据（需要共享的）存储在服务中，并将该服务注入需要访问数据的每个控制器。~~

对于您的具体示例，我认为您需要将一个控制器附加到每个开关盒并将服务注入其中，以访问共享数据。

~~另请参阅[AngularJS：如何在控制器之间传递变量？](https://stackoverflow.com/questions/12008908/pass-variables-between-controllers).~~

其他选项：

不推荐在内部范围内使用 $scope.$parent [执行此操作的一种方法——参见上面的 Update2] ~~，因为那时控制器将对数据的呈现方式做出假设。~~

不建议使用 $rootScope，除非可能用于简单的一次性应用程序。共享数据可能会开始拥有自己的生命，而 $rootScope 不是发生这种情况的地方。服务更容易重用、添加行为等。

使用 $scope.$emit 是另一种选择，但它看起来很混乱而且有点奇怪：发出事件来共享数据（而不是触发行为）。

[在父范围内使用对象可能是最好的——请参阅@Gloopy 的答案。]

# sql - 实体框架 4.1 原始 SQL

> ID：12405010
> 
> 赞同：1
> 
> 时间：2012-09-13T11:14:54.680
> 
> 标签：sql, entity-framework-4.1

我正在使用 Entity Framework 4.1 开发一个 ASP.Net MVC 3 应用程序。对于我需要执行的特定复杂查询，我决定编写一个原始 SQL 查询并将其传递给内置的**dbSet.SqlQuery**方法。

我有一个如下所示的 Service 方法，我将 SQL 查询分配给一个名为**query**的字符串变量。由于查询传递了两个参数，我已将这些参数化以防止 SQL 注入。

```
public IList<User> GetAvailableLocums(int shiftID, int shiftDateID)
{
           var query ="Select .... where t1 = @p0 and t2 = @p1";

           ObjectParameter _shiftID = new ObjectParameter("p0", shiftID);
           ObjectParameter _shiftDateID = new ObjectParameter("p1", shiftDateID);

           object[] parameters = new object[] { _shiftID, _shiftDateID };

           return _UoW.User.GetWithRawSql(query, parameters).ToList();
 } 
```

然后我将查询和参数传递给我的存储库中为我执行查询的方法。

```
public IEnumerable<TEntity> GetWithRawSql(string query, params object[] parameters)
{
            return dbSet.SqlQuery(query, parameters).ToList();
} 
```

我知道查询是正确的，因为我在 SQL Server Management Studio 中对其进行了测试，但是，当我尝试运行此代码时，我目前收到以下错误

> 不存在从对象类型 System.Data.Objects.ObjectParameter 到已知托管提供程序本机类型的映射

有人对我如何解决这个问题有任何建议吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T13:18:17.333

乡亲

问题是我使用**ObjectParameter**来创建我的参数。我改为将其更改为**SqlParameter**并且效果很好。见下文。

从此改变

```
ObjectParameter _shiftID = new ObjectParameter("p0", shiftID); 
```

对此

```
SqlParameter _shiftID = new SqlParameter("p0", shiftID); 
```

它奏效了。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:24:02.837

从快速的谷歌搜索来看，它看起来很接近。我认为您缺少为 SQL 查询设置返回类型：

```
return dbSet.SqlQuery<TEntity>(query, parameters).ToList(); 
```

这只是告诉实体框架如何映射它。

# c# - 如何让所有标签在 Winforms 中进行编辑？

> ID：12405011
> 
> 赞同：0
> 
> 时间：2012-09-13T11:14:58.357
> 
> 标签：c#, winforms, label

我有 5 个通过在表单上拖放创建的标签。我可以使用这些标签的数组（已经创建）吗？

例如，如果我想在所有这些标签中输入文本，我是否可以通过创建一个循环并为标签数组的每个元素分配一个特定的文本来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:29:39.137

没有标签数组，而只是一组控件。
您可以从表单的控件集合中选择标签，然后在所有这些标签中输入文本。
像这种方法：

```
foreach (Control c in this.Controls)
{
    if (c.GetType() == typeof(Label))
        c.Text = "Your String";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:23:06.157

最简洁的答案是不”。没有为您使用拖放创建的 5 个标签创建数组。

您可以遍历表单的**所有**子项（并递归地用于放置在表单上容器控件上的控件），但您将取回表单上的所有控件，而不仅仅是 5 个标签。

您可以为这些标签使用特定的命名 - 如`label_1`, `label_2`, `label_3`,`label_4`和`label_5`filter based on`.Name.Starts("label_")`以允许您专门更新这些标签。

这有帮助吗？

# sql - SQL 中的“集群”代码帮助

> ID：12405026
> 
> 赞同：3
> 
> 时间：2012-09-13T11:15:49.493
> 
> 标签：sql, sql-server-2008, tsql

我是 SQL 的新手，但通过该站点获得了许多有用的想法。现在我被困在一段看起来很简单的代码上，但由于某种原因，我无法理解它。

我正在尝试根据下面的前两列创建第三列（Z 列）：

```
Column X   Column Y
-------------------
 1          a
 1          b
 1          c
 2          a
 2          d
 2          e
 2          f
 4          b
 5          i
 5          c
 3          g
 3          h
 6          j
 6          k
 6          l 
```

我需要在 Z 列发生什么：

> *   对于 Y 列中的每个单独值，请注意 X 列的值
> *   同样，对于 X 列中的每个单独的值，请注意 Y 列的值
> *   然后，将（RANK/ROW_NUMBER？）这些聚类成如下所示的组：

```
Column X   Column Y  Column Z
-----------------------------
 1          a         1
 1          b         1
 1          c         1
 2          a         1
 2          d         1
 2          e         1
 2          f         1
 4          b         1
 5          i         1
 5          c         1
 3          g         2
 3          h         2
 6          j         3
 6          k         3
 6          l         3 
```

我希望我已经足够清楚了，没有使事情过于复杂。我的头整个早上都在转。让我知道是否有人需要更多信息。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:21:14.010

也许不是最好的方法，但它有效

SQLFiddle [http://sqlfiddle.com/#!3/99532/1](http://sqlfiddle.com/#!3/99532/1)

```
;WITH cte AS (
    SELECT  *, ROW_NUMBER() OVER(ORDER BY (SELECT NULL)) AS row_nb
    FROM    #t
)
, c2 AS (
    SELECT e1.*
    ,CASE WHEN EXISTS(SELECT * FROM cte e2 WHERE e1.Y = e2.Y and e2.row_nb < e1.row_nb) THEN 1 ELSE 0 END as ex
FROM cte e1 
)
, c3 AS (
    SELECT  X,1 - SIGN(SUM(ex)) as ex,MAX(row_nb) as max_row_nb
    FROM    c2
    GROUP BY X
)
SELECT  
    cte.X,cte.Y
    ,(SELECT SUM(cc3.ex) FROM c3 cc3 where cc3.max_row_nb<= c3.max_row_nb) AS Z 
FROM    cte 
INNER JOIN c3 
    ON  c3.X = cte.X
ORDER BY cte.row_nb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:21:35.360

在过去的一些分析中，我确实面临过这个问题。我可以让它工作的唯一方法是做一个循环，逐步添加信息。

循环将每个组内的最小“x”值分配为组 id。根据您的规则，这保证是唯一的。它首先将当前 x 值分配给 z。然后它找到沿 x 和 y 维度的最小 z。它重复这个过程，直到没有记录改变。

鉴于您的数据，以下是如何执行此操作的概述：

```
update t set z = x

while 1=1
begin
    with toupdate as (
         select t.*,
                min(z) over (partition by x) as idx,
                min(z) over (partition by y) as idy from t
         )
    update toupdate
        set z = (case when idx < idy then idx else idy end)
        where z > idx or z > idy;
    if (@@ROWCOUNT = 0) break;   
end;

;with a as
(
  select z, dense_rank() over (order by z) newZ from t
)
update a set z = newZ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:36:02.617

```
declare @t table (x tinyint, y char(1), z tinyint)
insert @t (x,y) values(1,'a'),(1,'b'),(1,'c'),(2,'a'),(2,'d'),(2,'e'),(2,'c'),
(2,'f'),(4,'b'),(5,'i'),(5,'c'),(3,'g'),(3,'h'),(6,'j'),(6,'k'),(6,'l'),(7,'v')

;with a as
(
  select x,parent from 
  (
    select x, min(x) over (partition by y) parent from @t
  ) a
  where x > parent
), b as
(
  select x, parent from a
  union all
  select a.x, b.parent
  from a join b on a.parent = b.x
), c as
(

  select x, min(parent) parent
  from b
  group by x
), d as
(
  select t.x,t.y, t.z, 
  dense_rank() over (order by coalesce(c.parent, t.x)) calculatedZ 
  from @t t 
  left join c on t.x = c.x
)
select x,y,calculatedZ as z from d
-- if you want to update instead of selecting, replace last line with: 
-- update d set z = newz
-- select x,y,z from @t
option (maxrecursion 0) 
```

结果：

```
x y z
1 a 1
1 b 1
1 c 1
2 a 1
2 d 1
2 e 1
2 c 1
2 f 1
4 b 1
5 i 1
5 c 1
3 g 2
3 h 2
6 j 3
6 k 3
6 l 3
8 j 3
7 v 4 
```

# .net - 异常：对象引用未设置为对象的实例

> ID：12405027
> 
> 赞同：0
> 
> 时间：2012-09-13T11:15:52.880
> 
> 标签：.net, visual-c++, exception, c++-cli

当我尝试执行以下代码时，我会`System.NullReferenceException`说 `Object reference not set to an instance of an object`。

```
String^ databasePath;
wchar_t* nativeDataPath;
try{
 if(folderBrowserDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK)
      {

         databasePath=folderBrowserDialog1->SelectedPath->ToString()+"\\DocData.db3"; 

      }
}
catch (System::IO::DirectoryNotFoundException^ ex){
    MessageBox::Show(ex->Message);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:26:55.223

检查是否存在的 `folderBrowserDialog1->SelectedPath`值`null`。

如果这是空的，那么做`folderBrowserDialog1->SelectedPath->ToString()`会抛出这个异常。

# jquery - 添加/删除数据表中的列

> ID：12405032
> 
> 赞同：1
> 
> 时间：2012-09-13T11:15:59.850
> 
> 标签：jquery, jquery-ui, datatables

可以在这个 jqgrid 示例的页脚中给出添加/删除列的功能（通过单击选择列）

[http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithColumnChooser8.htm](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithColumnChooser8.htm)

可以应用于此链接中给出的数据表

[http://datatables.net/examples/api/show_hide.html](http://datatables.net/examples/api/show_hide.html)

我要问的是，在具有几乎相同界面的按钮单击事件的数据表中是否会发生同样的事情......

在数据表中，网格外有切换按钮，但在 jqgrid 中，它会打开一个新窗口来添加/删除列......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:10:18.077

根据论坛的说法，Allan 表示目前不支持它，因此必须通过以下两种方法之一来解决它：1）使用新/删除的列填充数据并刷新/重绘表（更多开销）2 ) 如果您的情况很简单，要添加一列，您可以在初始数据中预填充一些额外的空隐藏列，并在添加时简单地显示它们。（减少开销）

有关更多信息，请参阅这些线程：

[http://datatables.net/forums/discussion/12270/dynamically-addremove-columns-datatables-warning.-requested-unknown-parameter.../p1](http://datatables.net/forums/discussion/12270/dynamically-addremove-columns-datatables-warning.-requested-unknown-parameter.../p1)

[http://datatables.net/forums/discussion/8418/possible-to-dynamically-remove-or-add-a-column/p1](http://datatables.net/forums/discussion/8418/possible-to-dynamically-remove-or-add-a-column/p1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:04:54.613

jqGrid 具有允许隐藏或显示网格列的`hideCol`方法`showCol` [。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)[列选择器](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#column_chooser)只是为用户提供更舒适的界面来做同样的事情。它还允许更改列的顺序。如果您想使用其他 GUI 来隐藏（或显示）列，您可以`click`在任何外部链接或按钮上绑定事件，并在事件处理程序的实现内部调用`hideCol`和调用。`showCol``click`

您还可以考虑直接在列标题中放置其他按钮以隐藏/显示，就像我在[答案](https://stackoverflow.com/a/8215019/315935)中描述的那样。

# javascript - javascript 在本地工作，但不在实时服务器中

> ID：12405037
> 
> 赞同：-4
> 
> 时间：2012-09-13T11:16:13.913
> 
> 标签：javascript, html

因为这个，我快疯了，谷歌根本没有给我任何答案。我有一个包含 javascript 的代码，我完全能够在本地执行它，但在实时服务器中根本不行。这是代码的一部分：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link href="layout.css" rel="stylesheet" type="text/css">
    <script language="javascript" type="text/javascript" src="./jquery.js"></script>
    <script language="javascript" type="text/javascript" src="./jquery.flot.js"></script>
 </head> 
```

并且 javascript 库位于正确的位置，与 javascript 代码相同的文件。任何答案将不胜感激。谢谢 ！

我刚刚又试了一次，这是来自控制台的错误：

SCRIPT1002：语法错误 jquery.js，第 1 行字符 1

SCRIPT1002：语法错误 jquery.flot.js，第 1 行字符 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:22:45.170

`./`如果它们位于相同的位置，则在没有 的情况下尝试它`./`，否则我会检查它们在本地的哪里，而不是在服务器上的同一文件夹中。

# php - 使用 PHP 分割空格和括号

> ID：12405038
> 
> 赞同：3
> 
> 时间：2012-09-13T11:16:14.443
> 
> 标签：php, regex

我有这个字符串`$s`：

> 本说（#yellow）嘿

目前我正在使用：

```
$parts = array_filter(preg_split('/\s+/', $s)); 
```

所以我有一个数组元素的输出：

```
[0] ben
[1] say
[2] (#yellow)
[3] hey 
```

是否可以创建这样的数组结构：

```
[0] ben
[1] say
[2] (
[3] #yellow
[4] )
[5] hey 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:32:29.170

您可以将其拆分为`Lookahead and Lookbehind Zero-Width Assertions`：

```
$parts = array_filter(preg_split('/\s+|(?=[()])|(?<=[()])/', $s)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:24:57.860

那么你可以试试这个替换：

```
$s = str_replace(array('(', ')'), array('( ', ' )'), $s);
$parts = array_filter(preg_split('/\s+/', $s)); 
```

这里的诀窍是在 your 和 word 之间添加一个空格，`(`以便将其拆分。但是，它仅适用于您的示例。诸如此类的事情`((`可能会导致一些不需要的结果。如果是这样，您可以尝试使用 preg_replace 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:25:33.133

```
<?php

// function to explode on multiple delimiters
function multi_explode($pattern, $string, $standardDelimiter = ':')
{
    // replace delimiters with standard delimiter, also removing redundant delimiters
    $string = preg_replace(array($pattern, "/{$standardDelimiter}+/s"), $standardDelimiter, $string);

    // return the results of explode
    return explode($standardDelimiter, $string);
}

// test

    // set up variables
    $string = "zero  one | two :three/ four\ five:: six|| seven eight nine\n ten \televen twelve thirteen fourteen fifteen";
    $pattern = '/[:\|\\\\\/\s]/';  // colon (:), pipe (escaped '\|'), slashes (escaped '\\\\' and '\/'), white space (\s)

    // call function
    $result = multi_explode($pattern, $string);

    // display results
    var_dump($result);

?> 
```

来源： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:30:46.280

一个可以完全按照需要工作的班轮（您甚至不需要`array_filter`）：

```
$s = "ben say (ewfs) as";
$parts = preg_split('/\s+|(\()|(\))/', $s, null, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY)

/*
Array(
  0 => "ben",
  1 => "say",
  2 => "(",
  3 => "ewfs",
  4 => ")",
  5 => "as",
)
*/ 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-13T11:25:19.483

这将起作用：

```
$parts = array_filter(preg_split('/[\s\(\)]+/', $s)); 
```

# python - 搜索按整数时间戳排序的列表的简单方法

> ID：12405044
> 
> 赞同：3
> 
> 时间：2012-09-13T11:16:45.257
> 
> 标签：python, search

我有一个表单的日志条目列表：

```
[{'time': 199920331000, 'message': 'message1'}, {'time': 199920331001, 'message': 'message2'}...] 
```

其中时间的值总是在列表中增加。如果我想在给定时间戳之后获取日志，我可以遍历元素，直到看到大于给定时间戳的时间戳：

```
def getLog(timestamp):
    global logs
    for x in range(len(logs)):
        if logs[x]['time'] > timestamp:
            return logs[x:]
    return [] 
```

我想在 python 3 中已经有一个快速搜索机制，但不知道去哪里找。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:18:37.920

如果我理解正确，您正在寻找[`bisect`模块](http://docs.python.org/py3k/library/bisect.html)，它实现了一种有效的算法来查找排序列表中的值大于或小于给定值的点。

您的日志条目需要是一个实现某种形式的排序的类。像这样的东西：

```
from functools import total_ordering

@total_ordering
class LogEntry(object):
    def __init__(self, time, message):
        self.time = time
        self.message = message

    def __eq__(self, other):
        if not isinstance(other, self.__class__):
            return NotImplemented
        return self.time == other.time and self.message == other.message

    def __lt__(self, other):
        if not isinstance(other, self.__class__):
            return NotImplemented
        if self.time == other.time:
            return self.message < other.message
        return self.time < other.time 
```

这些`LogEntry`类是可排序的（在[`functools.total_ordering`类装饰器](http://docs.python.org/py3k/library/functools.html#functools.total_ordering)的帮助下），因此`bisect`模块知道哪些条目的值比其他值“低”。

然后您的功能变为：

```
def getLog(timestamp):
    dummy_entry = LogEntry(timestamp, '')
    index = bisect.bisect_right(logs, dummy_entry)
    return logs[index:] 
```

请注意，我们不需要声明`logs`全局，因为您没有分配给它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:37:32.530

鉴于 Python在未实现`b.__gt__(a)`时尝试，`a.__lt__(b)`您不需要更改日志条目的类，提供足够智能的密钥就足够了：

```
import bisect
from functools import total_ordering
from operator import itemgetter

log = [
    {'time': 199920331000, 'message': 'message1'},
    {'time': 199920331001, 'message': 'message2'},
    # ...
]

@total_ordering
class Key(object):
    def __init__(self, keyfunc, keyval):
        self.keyfunc = keyfunc
        self.keyval = keyval

    def __eq__(self, other):
        return self.keyval == self.keyfunc(other)

    def __lt__(self, other):
        return self.keyval < self.keyfunc(other)

start = bisect.bisect(log, Key(itemgetter("time"), 199920331000))
print log[start:] 
```

或者，您可以围绕 dicts 列表包装视图：

```
def keyed(items, key):
    class View(object):
        def __getitem__(self, index):
            return key(items[index])
        def __len__(self):
            return len(items)
    return View()

start = bisect.bisect(keyed(log, itemgetter("time")), 199920331000)
print log[start:] 
```

[（这是从删除元组的智能方式](https://stackoverflow.com/questions/12391645/smart-way-to-delete-tuples/12393876#12393876)中剥离出来的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:30:58.640

如果您知道时间总是在增加，则可以保证您的列表已排序。然后我会使用[这里](https://stackoverflow.com/questions/212358/binary-search-in-python)的答案并尝试对其进行调整，如下所示：

```
def binary_search(log_list, timestamp, lo=0, hi=None):
    if hi is None:
        hi = len(log_list)
    while lo < hi:
        mid = (lo+hi)//2
        midval = log_list[mid]['time']
        if midval < timestamp:
            lo = mid+1
        elif midval > timestamp: 
            hi = mid
        else:
            return mid
    return -1 
```

（虽然没有测试过）

# android - 如何在 Android 中将 Runtime.getRuntime.exec 与 ffmpeg 库一起使用？

> ID：12405045
> 
> 赞同：4
> 
> 时间：2012-09-13T11:16:52.460
> 
> 标签：android, ffmpeg

我正在尝试在录制的视频中建立正确的旋转，因为在某些设备中 setOrientationHint 方法不起作用，因为在某些视频播放器中可能会选择在播放期间忽略视频中的合成矩阵，[Android 文档](http://developer.android.com/reference/android/media/MediaRecorder.html#setOrientationHint%28int%29)。

所以，我决定使用 ffmpeg 库。我正在为该应用程序开发测试。在 Ubuntu 中，我下载这个库并执行 configure 和 make 以获得 ffmpeg 可执行文件，我将此可执行文件复制到 sdcard 中的 DCIM 文件夹，对于我为摄像机应用程序录制的视频也是如此。所以，在 DCIM 文件夹中，我有 ffmpeg 可执行文件和一个视频。

我创建了一个测试项目，在 onCreate 方法中，我包括：

```
try {

Process p= Runtime.getRuntime().exec("chmod 777 /mnt/sdcard/beni/ffmpeg");
p.waitFor();

p = Runtime.getRuntime().exec("/mnt/sdcard/beni/ffmpeg -i /mnt/sdcard/beni/f.mp4 -vf \"transpose=1\" -r 24 -sameq /mnt/sdcard/beni/f2.mp4");
p.waitFor();

BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));  
String line = null;  
while ((line = in.readLine()) != null) {  
    System.out.println(line);  
}  

} catch (IOException e) {
    e.printStackTrace();
} catch (InterruptedException e) {
e.printStackTrace();
} 
```

但我有以下警告：

```
09-13 13:14:03.547: W/System.err(7782): java.io.IOException: Error running exec(). Command: [/mnt/sdcard/beni/ffmpeg, -i, /mnt/sdcard/beni/f.mp4, -vf, "transpose=1", -r, 24, -sameq, /mnt/sdcard/beni/f2.mp4] Working Directory: null Environment: null
09-13 13:14:03.547: W/System.err(7782):     at java.lang.ProcessManager.exec(ProcessManager.java:224)
09-13 13:14:03.547: W/System.err(7782):     at java.lang.Runtime.exec(Runtime.java:189)
09-13 13:14:03.547: W/System.err(7782):     at java.lang.Runtime.exec(Runtime.java:275)
09-13 13:14:03.547: W/System.err(7782):     at java.lang.Runtime.exec(Runtime.java:210)
09-13 13:14:03.547: W/System.err(7782):     at com.example.prueba.MainActivity.onCreate(MainActivity.java:22)
09-13 13:14:03.547: W/System.err(7782):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-13 13:14:03.547: W/System.err(7782):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
09-13 13:14:03.547: W/System.err(7782):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
09-13 13:14:03.547: W/System.err(7782):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
09-13 13:14:03.547: W/System.err(7782):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
09-13 13:14:03.547: W/System.err(7782):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 13:14:03.547: W/System.err(7782):     at android.os.Looper.loop(Looper.java:138)
09-13 13:14:03.547: W/System.err(7782):     at android.app.ActivityThread.main(ActivityThread.java:3701)
09-13 13:14:03.547: W/System.err(7782):     at java.lang.reflect.Method.invokeNative(Native Method)
09-13 13:14:03.547: W/System.err(7782):     at java.lang.reflect.Method.invoke(Method.java:507)
09-13 13:14:03.547: W/System.err(7782):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
09-13 13:14:03.547: W/System.err(7782):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
09-13 13:14:03.547: W/System.err(7782):     at dalvik.system.NativeStart.main(Native Method)
09-13 13:14:03.547: W/System.err(7782): Caused by: java.io.IOException: Permission denied
09-13 13:14:03.547: W/System.err(7782):     at java.lang.ProcessManager.exec(Native Method)
09-13 13:14:03.547: W/System.err(7782):     at java.lang.ProcessManager.exec(ProcessManager.java:222)
09-13 13:14:03.547: W/System.err(7782):     ... 17 more 
```

这段代码对吗？或者我做错了什么。

# javascript - jQuery Form，检查变量的前四个数字

> ID：12405048
> 
> 赞同：2
> 
> 时间：2012-09-13T11:17:05.553
> 
> 标签：javascript, jquery

我想要实现的是代码检查器。只有前 4 个数字很重要，其他数字可以是任何数字。该表格将用于用户输入产品代码。

问题是，如果变量更改为 5 个数字，则该变量为假。

请参见下面的示例：

[http://jsfiddle.net/MZfxs/3/](http://jsfiddle.net/MZfxs/3/)

如果用户输入数字 3541，框会改变颜色，但如果用户输入剩余的数字，则该值设置为 false。

此外，我试图让盒子只在插入 13 个数字并且前 4 个数字按该顺序匹配时才改变颜色。

**解决了！工作示例：http:** [//jsfiddle.net/MZfxs/8/](http://jsfiddle.net/MZfxs/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:25:05.613

如果我理解正确，您需要一个字段值验证，并且要求该值应该从 4 个数字开始，例如`7514`or `9268`。在这里，您可以使用正则表达式来验证输入值，例如：

```
// Will work for " 123433 " or "12345634 ", etc.
var value = $(this).val(),
    re = /^\s*(\d{4})(\d+)\s*$/, // better to initialize only once somewhere in parent scope
    matches = re.exec(value),
    expectedCode = 3541,
    expectedLength = 13;
if(!!matches) {
    var code = matches[1]; // first group is exactly first 4 digits
    // in matches[2] you'll find the rest numbers.
    if(value.length == expectedLength && code == expectedCode) {
        // Change the color...
    }
} 
```

此外，如果您的要求严格限制为 13 的长度，那么您可以将常规 epression 修改为

```
var re = /^(\d{4})(\d{9})$/; 
```

并在第一组中检索前 4 个号码，在第二组中检索 9 个号码：

```
var matches = re.exec(value);
if(!!matches) {
    var first4Digits = matches[1],
        rest9Digits = matches[2];
    // ...
    // Also in this way you'll not need to check value.length to be 13.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:20:37.730

每次触发关键事件时，您都可以断开字符串。您可以通过调用 js substring() 方法并获取前四个字符并检查它来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:21:43.070

尝试使用这个：

```
<script>
    $("input").keyup(function () {
      var value = $(this).val();
      $("p").text(value);
     var value2 = $(this).val().substr(0,4);
  if(value2 == 3541){
       $(".square").css("background-color","#D6D6FF");

    }else{
     $(".square").css("background-color","yellow");
    }

    })
</script> 
```

# ios - 在模态视图顶部显示 actionSheet 时，ios 应用程序崩溃

> ID：12405051
> 
> 赞同：1
> 
> 时间：2012-09-13T11:17:16.420
> 
> 标签：ios, modalviewcontroller, uiactionsheet

我有一个 iOS 应用程序，运行良好，并显示模态视图

当加载模式视图并且我调用操作表或自定义弹出窗口时，关闭并打开操作表两次并崩溃，

如果我显示相同的操作表或在直接视图控制器中弹出，看起来很好，

所以我的问题是，如何在模态视图顶部显示操作表但加载到原始视图控制器上？

```
UIActionSheet *popupQuery = [[UIActionSheet alloc] initWithTitle:@"Title" delegate:self cancelButtonTitle:@"Cancel Button" destructiveButtonTitle:nil otherButtonTitles:@"Other Button 1", @"Other Button 2", nil];

popupQuery.actionSheetStyle = UIActionSheetStyleBlackTranslucent;

[popupQuery showInView:self.view];

[popupQuery release]; 
```

那么如何在主 [父] 视图控制器中而不是在 self.view 中显示我的操作表，因为它使我的应用程序崩溃

> exc_bad_access

多谢！

# zend-framework - 如何在 Zend 自定义复合元素中填充复选框？

> ID：12405054
> 
> 赞同：0
> 
> 时间：2012-09-13T11:17:31.337
> 
> 标签：zend-framework, checkbox, element, composite, populate

在 Zend 中，我有一个自定义复合元素，它由两个文本字段和一个复选框组成。

这是视图助手：

```
<?php
class My_View_Helper_WorkplaceFactor extends Zend_View_Helper_FormElement{

protected $html = '';

public function workplaceFactor($name, $value = null, $attribs = null){
    $this->html = '';
    $factor = $applies = $note = '';
    if($value){
        $factor = $value['factor'];
        $applies = $value['applies'];
        $note = $value['note'];
    }

    $helperText = new Zend_View_Helper_FormText();
    $helperText->setView($this->view);
    $helperCheckbox = new Zend_View_Helper_FormCheckbox();
    $helperCheckbox->setView($this->view);

    $checked = 0;
    if($applies == "1"){
        $checked = 1;
    }

    $this->html .= '<td><label for="' . $name . '[factor]">Faktor</label></td><td>' . $helperText->formText($name . '[factor]', $factor) . '</td>';
    $this->html .= '<td><label for="' . $name . '[applies]">Platí</label></td><td>' . $helperCheckbox->formCheckbox($name . '[applies]', $applies, array('checked' => $checked)) . '</td>';
    $this->html .= '<td><label for="' . $name . '[note]">Poznámka</label></td><td>' . $helperText->formText($name . '[note]', $note) . '</td>';

    return $this->html;
} 
```

}

我的问题是当表单无效并重新加载时填充复选框。当我选中复选框并重新加载时，没关系，它会填充。当我取消选中已选中的选项时，它也可以并在重新加载时正确显示。但是当我想在页面重新加载后选中复选框时，选中的值甚至不在发布请求中，所以它不起作用。

元素的标记如下：

```
<tr id="factor1">
<td><label for="factor1[factor]">Faktor</label></td><td><input type="text" name="factor1[factor]" id="factor1-factor" value="Prach" /></td>
<td><label for="factor1[applies]">Platí</label></td><td><input type="hidden" name="factor1[applies]" value="0" /><input type="checkbox" name="factor1[applies]" id="factor1-applies" value="0" /></td>
<td><label for="factor1[note]">Poznámka</label></td><td><input type="text" name="factor1[note]" id="factor1-note" value="" /></td></tr> 
```

我在stackoverflow上徘徊，我认为问题在于复选框名称中有[]，但如果我不把它们放在那里，“应用”复选框值不属于“因子”值数组，所以它根本不填充。你知道如何找到这个魔法阵的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:40:30.710

好的，在我朋友的帮助和这个答案[https://stackoverflow.com/a/9225535/1322246](https://stackoverflow.com/a/9225535/1322246)的帮助下，我这样修改了助手：

```
...
    $checked = isset($value['applies']) && $value['applies'];

    $this->html .= '<td><label for="' . $name . '[factor]">Faktor</label></td><td>' . $helperText->formText($name . '[factor]', $factor) . '</td>';
    $this->html .= '<td><label for="' . $name . '[applies]">Platí</label></td><td>' . $helperCheckbox->formCheckbox($name . '[applies]', $applies, array('value' => 1, 'checked' => $checked), array(1, null)) . '</td>';
    $this->html .= '<td><label for="' . $name . '[note]">Poznámka</label></td><td>' . $helperText->formText($name . '[note]', $note) . '</td>';

... 
```

}

所以换句话说，我必须为 zend 复选框视图助手设置 checkedValue 和 uncheckedValue。现在它起作用了。

# jquery - 根据其他字段验证表单字段 jquery validate

> ID：12405056
> 
> 赞同：0
> 
> 时间：2012-09-13T11:17:41.423
> 
> 标签：jquery, jquery-validate

我有三个输入字段：姓名、年龄、国家

我想检查 NAME 是否是任何东西。如果 NAME 包含一个值，那么其他两个字段是必需的。如果 NAME 为空，他们也可以跳过 AGE 和 COUNTRY。

这可能与 jquery 验证？

我当前的验证基于类名，然后我的 js 文件中有以下内容：

```
beforeSubmit: function () {
            return $('#ajaxform').validate().form();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:47:37.590

您可以使用**depends**，例如：

```
...
ageInput: {
    required: {
        depends: function(element){
            return $("#nameElement").val()!=""
        }
    }
},
countryInput: {
    required: {
        depends: function(element){
            return $("#nameElement").val()!=""
        }
    }
} 
```

请参阅：[jQuery 验证](http://docs.jquery.com/Plugins/Validation/validate#code)

# php - Jpgraph：如何手动设置 X 轴和 Y 轴的范围

> ID：12405057
> 
> 赞同：1
> 
> 时间：2012-09-13T11:17:42.743
> 
> 标签：php, javascript, jquery, jpgraph

大家好，我需要对 Jp 图表进行一些更改...

1）我需要将 X 轴范围从“0”设置为“100”，步长为“10”。

2）我需要将 Y 轴范围从“-5”设置为“6”，步长为“1”。

3）我需要标记图表上选择的点，比如如果选择的值是

“70”和“2”（如图所示），我想将其命名为“point1”，如果第二个选定点位于“80”和“3”上，那么我想将其命名为“point2”。 .'point1 和 point2 应该出现在图表本身上......'..有没有办法解决这个问题？请帮我解决这些问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:07:20.563

```
$graph = new Graph(450,400,'auto');
$graph->SetScale("textlin");

// set major and minor tick positions manually
$graph->yaxis->SetTickPositions(array(0,10,20,30,40,50,60,70,80,90,100), array(5,15,25,35,45,55,65,75,85,95);

$graph->xaxis->SetTickLabels(array(-5,-4,-3,-2,-1,0,1,2,3,4,5,6));

$graph->yaxis->HideLine(false);
$graph->yaxis->HideTicks(false,false);
$graph->xaxis->HideLine(false);
$graph->xaxis->HideTicks(false,false); 
```

这就是第 1 点和第 2 点。我不知道第 3 点，但它们在在线教程上很多。查看[http://jpgraph.net/](http://jpgraph.net/)

# android - 访问我的应用程序数据文件夹之外的文件

> ID：12405063
> 
> 赞同：-1
> 
> 时间：2012-09-13T11:18:00.547
> 
> 标签：android

我应该在哪里复制文件（在我的情况下它是一个 sqlite 数据库）让我的应用程序将它复制到它的数据文件夹中？我尝试了一些没有运气的地方。看来我没有足够的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:28:45.017

这取决于您的数据库有多大。如果您的应用程序执行过多的来回数据库操作（例如加载数据或将数据写回数据库），则最好将数据库文件复制到 SD 卡中的任何位置（最好放在应用程序包文件夹中）。希望**[这](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)**会对你有所帮助。

对于文件复制操作，您需要在清单文件中使用**WRITE_EXTERNAL_STORAGE**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:25:47.000

你想在你的应用程序上使用 sqlite 数据库吗？如果是这样，只需使用 SQL 助手类就可以完成创建和维护工作。如果没有，你可以使用assets（它是你项目中的一个文件夹）来存储它，然后将它复制到SD卡，如果你不能复制它的权限问题，你可以添加它的权限 - `WRITE_EXTERNAL_STORAGE`。

您可以将其复制到 Android/data/your folder/，这是私有数据，将在您的应用卸载时删除。对于另一种方式，您也可以将其复制到数据/您的文件夹/。或者在 SD 卡上创建您喜欢的任何文件夹，然后复制它。

希望能帮助到你。

# c# - Socket.SendAsync C# 中的 Stackoverflow

> ID：12405064
> 
> 赞同：0
> 
> 时间：2012-09-13T11:18:04.477
> 
> 标签：c#, sockets, stack-overflow, asyncsocket, sendasync

我有一个问题，我的应用程序崩溃似乎是随机的。它的工作时间可能长达 30 分钟，然后我就崩溃了，如果我调试，我会在行出现错误`mySocket.SendAsync(completeArgs)`这是一个 stackoverflow 错误......每次我想发送一些东西时，我都会执行以下代码行，那是相当的很多，也许每0.5秒一次。我已经尝试设置`mySocket.NoDelay = true;`，但这并没有解决问题。这是应用程序的客户端。

```
SocketAsyncEventArgs completeArgs = new SocketAsyncEventArgs();
completeArgs.SetBuffer(MsgBuffert, 0, MsgBuffert.Length);
completeArgs.UserToken = this.mySocket;
completeArgs.RemoteEndPoint = this.hostEndPoint;
completeArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnSend);

mySocket.SendAsync(completeArgs); 
```

# c# - 定期发送鼠标事件和按键事件。（假装工作）使用 C#

> ID：12405066
> 
> 赞同：0
> 
> 时间：2012-09-13T11:18:16.793
> 
> 标签：c#

我想让窗口处于活动状态。滚动它，单击它。只是为了表明有人正在研究它。

这些方法不适用于此任务。

```
Mouse.MouseDownEvent;
Keyboard.KeyDownEvent; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:23:54.817

您需要使用此函数 (C++)，因此您必须调用它。您可以轻松获取当前窗口（C# 窗体）句柄。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950(v=vs.85).aspx)

编辑：似乎有人在检查此方法之前做了艰苦的工作来调用此方法：

[http://boycook.wordpress.com/2008/07/29/c-win32-messaging-with-sendmessage-and-wm_copydata/](http://boycook.wordpress.com/2008/07/29/c-win32-messaging-with-sendmessage-and-wm_copydata/)

# asp.net - 删除 page_load 中的 check_change 事件

> ID：12405069
> 
> 赞同：0
> 
> 时间：2012-09-13T11:18:33.950
> 
> 标签：asp.net

我有一个带有检查更改事件的 asp.net 复选框控件。当我更改检查时，它将调用 check_changed 事件。但是在检查更改事件后重新加载它时，它会自动调用 check_change 事件。我不想再次调用 page_load 中的 check_change 事件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:49:32.903

添加这个方法

```
public  RestartPage()
{
Response.Redirect(Request.Url.PathAndQuery)} 
```

并在您的事件调用后调用此方法有关更多信息，请点击此链接 [删除页面加载中的 check_change 事件](http://forums.asp.net/p/1842974/5143995.aspx/1?Re%20remove%20check_change%20event%20in%20page_load)

# php - 来自另一个 PDO 查询结果的 PDO 查询

> ID：12405071
> 
> 赞同：0
> 
> 时间：2012-09-13T11:18:38.433
> 
> 标签：php, mysql, json, pdo

我有这个代码，它在 mysql 中调用一个视图，`vAlbums`它返回查询结果的 JSON 数组

```
function getAlbumPics($arno){
    $aSql = "SELECT albu_ablumid, albu_name_en, albu_name_de, albu_name_fr, albu_name_nl, albu_name_es, albu_name_it, albu_photourl FROM vAlbums WHERE site_arno=:arno";
    try {
        $db = getConnection();
        $aStmt = $db->prepare($aSql);
        $aStmt->bindParam(":arno",$arno);
        $aStmt->execute();
        $albums = $aStmt->fetchAll(PDO::FETCH_OBJ);
        $arrAID = $aStmt->fetchColumn(2);
        $db = null;
        echo '{"albums": ' . json_encode($albums) . '}';
    } catch(PDOException $e) {
        echo '{"error":[{"text":"'. $e->getMessage() .'"}],';
        echo '"SQL": ' . json_encode($aSql) .'}';
    }
} 
```

我需要做一个子查询来在数组中的每个相册中放置一组照片，就像这样

```
{
    "albums": [
        {
            "albu_ablumid": "1",
            "photos": [
                {
                    "photourl": "photo1"
                },
                {
                    "photourl": "photo2"
                },
                {
                    "photourl": "photo3"
                }
            ]
        },
        {
            "albu_ablumid": "2",
            "photos": [
                {
                    "photourl": "photo1"
                },
                {
                    "photourl": "photo2"
                },
                {
                    "photourl": "photo3"
                }
            ]
        }
    ]
} 
```

有人可以展示如何实现这一点，MySQL 对照片的查询是：

```
SELECT * FROM photos WHERE album_id = x 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:23:35.800

为什么不在单个查询中进行连接和组连接？

```
SELECT 
    albu_ablumid, 
    albu_name_en, 
    albu_name_de, 
    albu_name_fr, 
    albu_name_nl, 
    albu_name_es, 
    albu_name_it, 
    albu_photourl,
    group_concat(photourl) // Guessing at column Name
FROM 
    vAlbums a
        join photos b
            on a.albu_ablumid=b.album_id
WHERE 
    site_arno=:arno
group by
    albu_ablumid, 
    albu_name_en, 
    albu_name_de, 
    albu_name_fr, 
    albu_name_nl, 
    albu_name_es, 
    albu_name_it, 
    albu_photourl 
```

这将在与相册匹配的每一行中以逗号分隔的字符串返回所有照片。然后，您可以根据代码的需要轻松拆分它。它节省了大量的连接和正在运行的多个查询。

这是我的 play db 中的一个小例子，展示了它的功能：

```
mysql> select * from table1;
+---------+------+------+-------------+
| autonum | ID   | name | metavalue   |
+---------+------+------+-------------+
|       1 |    1 | Rose | Drinker     |
|       2 |    1 | Rose | Nice Person |
|       3 |    1 | Rose | Runner      |
|       4 |    2 | Gary | Player      |
|       5 |    2 | Gary | Funny       |
|       6 |    2 | Gary | NULL        |
|       7 |    2 | Gary | Smelly      |
+---------+------+------+-------------+
7 rows in set (0.00 sec)

mysql> select ID, group_concat(metavalue) from table1 group by ID;
+------+----------------------------+
| ID   | group_concat(metavalue)    |
+------+----------------------------+
|    1 | Drinker,Nice Person,Runner |
|    2 | Player,Funny,Smelly        |
+------+----------------------------+
2 rows in set (0.00 sec) 
```

如果出于某种原因需要，可以使用一些简单的代码来处理 NULL：

```
mysql> select ID, group_concat(coalesce(metavalue,'Empty')) from table1 group by ID;
+------+-------------------------------------------+
| ID   | group_concat(coalesce(metavalue,'Empty')) |
+------+-------------------------------------------+
|    1 | Drinker,Nice Person,Runner                |
|    2 | Player,Funny,Empty,Smelly                 |
+------+-------------------------------------------+
2 rows in set (0.00 sec) 
```

# javascript - 如何将 JSON 转换为 HTML 下拉菜单

> ID：12405075
> 
> 赞同：0
> 
> 时间：2012-09-13T11:18:54.840
> 
> 标签：javascript, jquery, json

这是我的 JSON 代码

```
data = {
    "master_item":{
        "M5":{
            "PMBLT000164":"PMBLT000164"
        },
        "M8":{
            "PMBTN000020":"PMBTN000020"
        },
        "M165":{
            "PMBTN000003":"PMBTN000003","PMBTN000004":"PMBTN000004","PMBTN000006":"PMBTN000006","PMBTN000009":"PMBTN000009"
        }
    },
    "products":{
        "PMBTN000003":"PMBTN000003","PMBTN000002":"PMBTN000002"
    },
    "bulk":{
        "BBTPB000003":"BBTPB000003","BMBCT000002":"BMBCT000002"
    }
} 
```

我想要这个我必须把它转换成三个下拉菜单

```
<select name='master_item'>
 <optgroup label="M5">
<option value="PMBLT000164">PMBLT000164</option>
</optgroup>
</select> 
```

以上 HTML 是基于 json 数据的。

**编辑：**

我在 JQUERY 中尝试过以下代码

```
var options = $("#options");
    $.each(data.master_item, function(i,a) {
    options.append($("<option />").val(a).text(a));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:31:17.683

好吧，我想它可以用这样的东西来[完成](http://jsfiddle.net/8hyaL/)：

```
var $select = $('<select>').attr({
    name: 'master_item'
});

$.each(data.master_item, function(optGroupLabel, options) {
    var $optGroup = $('<optgroup>').attr({
        label: optGroupLabel
    });
    $.each(options, function(optionKey, optionValue) {
        var $option = $('<option>').attr({
            value: optionValue
        }).text(optionValue);
        $optGroup.append($option);
    });
    $select.append($optGroup);
});

$('body').append($select); 
```

基本上，这是一个两步过程，在每一步中，我们都会更深入地了解数据结构。在第一级，我们处理 optgroup，在第二级 - 每个 optgroup 中的选项。

*我使用散列* `.attr` *来简化添加更多属性的过程。另一个重要的一点是仅在完成后将整个结构附加到 DOM。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:37:39.883

我用了一个函数来检查[这个小提琴](http://jsfiddle.net/LvQuj/2/)。与其他解决方案相比，它的优势在于：数据可以包含任意数量的嵌套级别。

```
var options = $("<select/>"),
    addOptions = function(opts, container){
        $.each(opts, function(i, opt) {
            if(typeof(opt)=='string'){
                container.append($("<option />").val(opt).text(opt));
            } else {
                var optgr = $("<optgroup />").attr('label',i);
                addOptions(opt, optgr)
                container.append(optgr);
            }
        });
    };

addOptions(data,options); // or addOptions(data.master_item,options);
$('body').append(options);
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:36:34.657

我认为您的想法是正确的，但我认为您应该只使用 for 循环：

小提琴：http: [//jsfiddle.net/stevenmtwhunt/ua7jw/](http://jsfiddle.net/stevenmtwhunt/ua7jw/)

# android - API响应后使用ViewPager从FragmentActivity获取数据到Fragmnet

> ID：12405076
> 
> 赞同：1
> 
> 时间：2012-09-13T11:18:59.157
> 
> 标签：android

我有一个包含 ViewPager 的 FragmentActivity，我在其中通过自定义 FragmentPagerAdapter 创建 4 个子片段。片段包含我在其中显示数据的 ListView。响应完成后，我在 FragmentActivity 中调用 Web API；我想通知所有片段数据已准备好并用该数据填充适配器。请注意，在 Fragment 初始化时数据不可用。

我可以在创建片段时保存对片段的引用并调用“myFragment.hereIsYourData(Object data)”，但是在重新创建 Activity 后，当因内存不足而杀死应用程序时，引用会发生变化。（如果我没记错的话+我读到在 Activity 中保留对片段的引用是一件坏事）

只是为了澄清，我不能使用“findFragmentById(id)”，因为 ViewPager 没有公开它。我可以使用这里解释的“getFragmentTag”黑客[https://stackoverflow.com/a/9744146/1025364](https://stackoverflow.com/a/9744146/1025364)但我不想：D。

然后我试图通过 Activity 的接口从 Fragment onResume 方法中获取数据（如开发人员指南中所述），但此时数据不是 reedy。我是否应该在某种循环中请求数据，直到它准备好？

在这种情况下最好的方法是什么？

# c# - 如何拥有 DLL 特定的配置文件？

> ID：12405080
> 
> 赞同：1
> 
> 时间：2012-09-13T11:19:11.847
> 
> 标签：c#, dll, config

我希望在我的解决方案中有多个配置文件。例如，对于我的控制台应用程序 (Program.Main)，我想参考 app.config 文件进行任何设置。虽然我的控制台应用程序在内部调用类库 Dll1 的方法。在 Dll1 中，我希望代码从 Dll1.config 中获取一些设置。同样，我的控制台应用程序也调用了 Dll2 的方法。在 Dll2 内部，我希望代码从 Dll2.config 文件中获取设置。

请帮助如何实现这一目标。另外，有没有可能？如果您能提供一个小代码示例，我将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:24:07.033

是的，有可能。就像您可以拥有 exe.config 文件一样，拥有 dll.config 文件是完全正常的。将 DLL 特定信息存储在其配置文件中。稍后您可以通过以下代码从 DLL 访问此配置信息

```
var appConfig = ConfigurationManager.OpenExeConfiguration(Assembly.GetExecutingAssembly().Location);
string dllConfigData = appConfig.AppSettings.Settings["dllConfigData"].Value; 
```

# c++ - 没有 .net 的预编译 SQLite x64

> ID：12405082
> 
> 赞同：1
> 
> 时间：2012-09-13T11:19:17.247
> 
> 标签：c++, visual-studio, sqlite, 64-bit

我需要 SQLite for Win x64 才能在 MS VS 2010 的 C++ 项目中使用。我发现[这篇文章](https://stackoverflow.com/questions/4315606/precompiled-sqlite-binaries-for-windows-x64)带有 x64 构建的链接，但它需要 .net 框架。我可以在我的项目中使用吗？另外，我将在这个项目中使用服务器端的自动构建，所以满足额外的要求可能是个问题（是吗？）。

那么，是否有人有 x64 的预编译 SQLite DLL 的链接，或者我需要从源代码构建它？另外，如果我对 .net 版本有误，并且它是我需要的版本，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T12:44:19.577

SQLite 没有官方预编译的 64 位 Windows DLL。

但是，自己编译很简单：只需[下载](http://www.sqlite.org/download.html)合并并将 .c 文件添加到您的项目中即可；没有额外的配置步骤或要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-12T11:21:48.133

如果您不希望静态链接库（或按照目前唯一可用的答案中的建议将其直接编译到您的应用程序中），您可以使用[我最近创建的简短教程](http://pavel.cernohorsky.name/blog/2015/09/sqlite_64-bit_binaries_for_windows_and_how_to_build_them_with_visual_studio_2015.php)。如果您需要，二进制文件也可以在那里获得。它使用 MS VS 2015。自您提出原始问题以来已经过了很长时间，但也许其他人会发现这很有用。

编辑：正如下面有人所说，仅仅提供链接是不够的，所以只简要介绍一下教程的基础知识：您必须从原始 SQLite 页面下载合并源代码，您可以在您的 Visual Studio 中从中编译 dll，但是关键是为编译器设置适当的预处理器指令：

```
SQLITE_ENABLE_FTS4=1
SQLITE_ENABLE_RTREE=1
SQLITE_ENABLE_COLUMN_METADATA=1
SQLITE_API=__declspec(dllexport) 
```

特别是最后一个是使您的库可用的那个。使用 Microsoft 工具链从源构建库的原始说明中未提及此信息。

# python - 继承 Python 的`property`

> ID：12405087
> 
> 赞同：19
> 
> 时间：2012-09-13T11:19:58.547
> 
> 标签：python, properties

在我的一门课程中，我有许多属性在获取和设置方面做非常相似的事情。所以我将参数抽象`property`为一个工厂函数：

```
def property_args(name):
    def getter(self):
        # do something
        return getattr(self, '_' + name)
    def setter(self, value)
        # do something
        setattr(self, '_' + name, value)
    return getter, setter

class MyClass(object):
    def __init__(self):
        self._x = None
    x = property(*property_args('x'))  # obviously there's more than one of these IRL 
```

但是，我后来发现它`property`实际上是一个类，并且对它进行子类化将是完美的。我在文档中找不到任何解释我需要覆盖的内容（以及`__init__`等的参数签名），我真的不想在 C 源代码中寻找它。有谁知道我在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-13T11:50:20.293

这是*property()*中代码的纯 Python 等效项：

```
class Property(object):
    "Emulate PyProperty_Type() in Objects/descrobject.c"

    def __init__(self, fget=None, fset=None, fdel=None, doc=None):
        self.fget = fget
        self.fset = fset
        self.fdel = fdel
        if doc is None and fget is not None:
            doc = fget.__doc__
        self.__doc__ = doc

    def __get__(self, obj, objtype=None):
        if obj is None:
            return self
        if self.fget is None:
            raise AttributeError("unreadable attribute")
        return self.fget(obj)

    def __set__(self, obj, value):
        if self.fset is None:
            raise AttributeError("can't set attribute")
        self.fset(obj, value)

    def __delete__(self, obj):
        if self.fdel is None:
            raise AttributeError("can't delete attribute")
        self.fdel(obj)

    def getter(self, fget):
        return type(self)(fget, self.fset, self.fdel, self.__doc__)

    def setter(self, fset):
        return type(self)(self.fget, fset, self.fdel, self.__doc__)

    def deleter(self, fdel):
        return type(self)(self.fget, self.fset, fdel, self.__doc__) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T11:50:24.697

`property`是一个[描述符](http://docs.python.org/howto/descriptor.html)，因此您必须覆盖（或在新对象上重新实现）[`__get__()`、`__set__()`和`__delete__()`methods](http://docs.python.org/reference/datamodel.html#implementing-descriptors)。

# javascript - 检测导航到

> ID：12405092
> 
> 赞同：0
> 
> 时间：2012-09-13T11:20:32.340
> 
> 标签：javascript, hash, navigation, location, anchor

我需要检测某个 URL 导航到锚点的事件：

```
<a name="latest-topics"></a>

http://someserver.com/index.html#latest-topics 
```

然后我想使用一些诸如 , 等的`onfocus`事件`onclick`。

```
<a onclick="doSomething()" onfocus="doSomething()" name="latest-topics"></a> 
```

在导航到此类锚点的精确事件中，有哪些选项可以检测到导航到此类锚点？

还是我需要一个计时器`setInterval`来`location.hash`每隔几毫秒连续轮询一次更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:24:36.283

您可以在加载时执行此操作：

```
if(window.location.hash) {
 // do your check here.
} 
```

# ruby-on-rails - 使用 ElasticSearch 对具有不同语言环境的字段进行排序

> ID：12405101
> 
> 赞同：0
> 
> 时间：2012-09-13T11:20:49.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch

在项目中，需要按存储在不同语言环境中的一个字段对记录进行排序。我有：表“公司”，没有名为“名称”的字段，但有一个表：

```
create_table "company_localizations" do |t|
  t.integer "company_id"
  t.string "locale"
  t.string "name"
  ...
end 
```

我有索引 company.rb：

```
mapping do
  indexes :name, :type => "multi_field",
    :fields => {
       :name => {:type => "string", :index => "analyzed"},
       :name_sort => {:type => "string", :index => "not_analyzed"}
    }
end 
```

我需要在这个领域进行排序。我正在使用 ElasticSearch 和轮胎宝石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:19:37.817

我有一个非常奇怪的 Elastic 动作，但它没有按 multi_filed 类型排序。有一个问题，在应用程序中它可能是英语语言环境中的俄语符号和数据库中俄语语言环境字段中的英语符号，所以它没有使用 multi_filed 类型排序...我已经成功将 multi_filed 更改为嵌套以这种方式：

```
settings :analysis => {
  :analyzer => {
    :sort_analyzer => {
      "tokenizer" => "keyword",
      "filter" => ["lowercase"]
    }
  }
}

mapping do
  indexes :name do
    indexes :name
    indexes :name_sort, :type => "string", :analyzer => "sort_analyzer"
  end
...
end

def to_indexed_json
 {
    ...
    :name => {
      :name => all_localizations(:name).join(" "),
      :name_sort => all_localizations(:name).join(" ").mb_chars.strip.to_s
    },
    ...
  }
end 
```

这解决了问题....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:48:05.000

在轮胎中，使用

```
sort { by "name.name_sort" } 
```

在你的情况下。`name_`不需要您示例中的前缀 - 没有它，您可以将您的字段称为`name.sort`.

有关更多信息，请参阅[https://github.com/karmi/tire/blob/master/test/integration/sort_test.rb](https://github.com/karmi/tire/blob/master/test/integration/sort_test.rb)和其他集成测试。

# c++ - 使用 lambda 从 std::function 返回类型推导模板参数类型

> ID：12405102
> 
> 赞同：11
> 
> 时间：2012-09-13T11:21:02.760
> 
> 标签：c++, c++11

首先，我使用的是 C++11（我的话题很烂）。

我正在尝试做的是编写一个通用模板函数来实现通常`sort_by`在其他编程语言中调用的东西。它涉及为范围的每个成员只计算一次任意标准，然后根据这些标准对该范围进行排序。这样的标准不一定是 POD，它必须是不可比的。对于`std::less`不起作用的事情，调用者应该能够提供她自己的比较函子。

我已经成功编写了使用以下签名的函数：

```
template<  typename Tcriterion
         , typename Titer
         , typename Tcompare = std::less<Tcriterion>
         >
void
sort_by(Titer first, Titer last,
        std::function<Tcriterion(typename std::iterator_traits<Titer>::value_type const &)> criterion_maker,
        Tcompare comparator = Tcompare()) {
} 
```

它可以像这样使用：

```
struct S { int a; std::string b; double c; };
std::vector<S> s_vec{
  { 42, "hello", 0.5 },
  { 42, "moo!",  1.2 },
  { 23, "fubar", 0.2 },
};

sort_by1< std::pair<int, double> >(
  s_vec.begin(), s_vec.end(),
  [](S const &one_s) { return std::make_pair(one_s.a, one_s.c); }
); 
```

我不喜欢这种方法的是我必须自己提供`Tcriterion`参数，因为编译器无法从 lambda 表达式中推断出该类型。因此这不起作用：

```
sort_by1(s_vec.begin(), s_vec.end(), [](S const &one_s) { return std::make_pair(one_s.a, one_s.c); }); 
```

clang 3.1 和 gcc 4.7.1 都对此大喊大叫（gcc 4.7.1 甚至[对上面的代码大喊大叫](http://pastebin.com/BzMPDiGt)，所以我想我真的在这里做错了）。

但是，如果我将 lambda 分配给`std::function`第一个，那么至少 clang 3.1 可以推断出参数，这意味着它有效：

```
typedef std::pair<int, double> criterion_type;
std::function<criterion_type(S const &)> criterion_maker = [](S const &one_s) {
  return std::make_pair(one_s.a, one_s.c);
};
sort_by1(s_vec.begin(), s_vec.end(), criterion_maker); 
```

所以我的问题是：我如何更改我的函数签名，以便我不需要指定那个参数？并且（可能相关）我将如何修复我的示例以使其与 gcc 一起使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T11:38:23.070

不要`std::function`与模板参数推导一起使用。事实上，很可能没有理由`std::function`在函数或函数模板参数列表中使用。通常，您不应该使用`std::function`; 它是一种非常专业的工具，非常擅长解决一个特定问题。其余时间，您可以完全省去它。

在您的情况下，如果您使用多态函子来订购东西，则不需要模板参数推导：

```
struct less {
    template<typename T, typename U>
    auto operator()(T&& t, U&& u) const
    -> decltype( std::declval<T>() < std::declval<U>() )
    { return std::forward<T>(t) < std::forward<U>(u); }

    // operator< is not appropriate for pointers however
    // the Standard defines a 'composite pointer type' that
    // would be very helpful here, left as an exercise to implement
    template<typename T, typename U>
    bool operator()(T* t, U* u) const
    { return std::less<typename std::common_type<T*, U*>::type> {}(t, u); }
}; 
```

然后，您可以声明：

```
template<typename Iter, typename Criterion, typename Comparator = less>
void sort_by(Iter first, Iter last, Criterion crit, Comparator comp = less {}); 
```

并且`comp(*ita, *itb)`会做正确的事情，以及`comp(crit(*ita), crit(*itb))`或其他任何事情，只要它是有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T11:33:14.917

像这样的东西怎么样：

```
template<  typename Titer
         , typename Tmaker
         , typename Tcompare
         >
void
sort_by(Titer first, Titer last,
        Tmaker criterion_maker,
        Tcompare comparator)
{
  typedef decltype(criterion_maker(*first)) Tcriterion;
  /*
    Now that you know the actual type of your criterion,
    you can do the real work here
  */
} 
```

问题是你显然不能使用这个比较器的默认值，但是你可以通过提供一个不带比较器并在`std::less`内部填充的重载来轻松克服这个问题。

要按照您最初的建议进行操作，编译器必须能够“反​​转”模板实例化过程。即对于给定的 std::function<> 实例化，我必须提供什么参数作为结果才能得到它。这“看起来”很容易，但事实并非如此！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:13:47.437

你也可以使用这样的东西。

```
 template<  typename Titer
     , typename Tmaker
     , typename TCriterion = typename
     std::result_of
     <
      Tmaker
      (
        decltype(*std::declval<Titer>()) 
      )
     >::type
     , typename Tcompare = std::less<TCriterion>
     >
void
sort_by(Titer first, Titer last,
        Tmaker criterion_maker, Tcompare comparator = Tcompare())
{
} 
```

[http://liveworkspace.org/code/0aacc8906ab4102ac62ef0e45a37707d](http://liveworkspace.org/code/0aacc8906ab4102ac62ef0e45a37707d)

# android - WebView Android 中的 Cookie

> ID：12405105
> 
> 赞同：0
> 
> 时间：2012-09-13T11:21:31.373
> 
> 标签：android, android-webview

我无法读取我所有的 cookie，在我的 web 视图中我只能读取名为“PHP_AUTH_SID”的 cookie，但在浏览器中我可以看到所有 cookie。这是我的代码：

```
super.onCreate(savedInstanceState);
CookieSyncManager.createInstance(this);
webView = (WebView) findViewById(R.id.web_login); 
```

这是我在 Web 视图客户端中的 shouldOverrideUrlLoading() 方法

```
CookieSyncManager.getInstance().sync();
final CookieManager cookiesManager = CookieManager.getInstance();
cookiesManager.setAcceptCookie(true);
final String cookies = cookiesManager.getCookie(COOKIES_HOST);
Log.i("123123", cookies); 
```

在 LogCat 我只能看到：“09-13 14:05:48.139: I/123123(21188):PHP_AUTH_SID=...”

在浏览器中：

PHP_AUTH_SID=...,
access_token=...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:13:20.663

LogCat 的输出似乎被切断了。只需尝试调试并查看“cookies”字符串的“真实”内容。

我想你可以`cookies`用`String[] elements = cookies.split("=")`

# mysql - 如何使用 MySQL 并进行计数和排名

> ID：12405118
> 
> 赞同：10
> 
> 时间：2012-09-13T11:22:15.193
> 
> 标签：mysql

我是一名 MS-SQL 开发人员，现在我使用这个查询 (MySQL) ↓</p>

```
SELECT A.place_idx,A.place_id,B.TODAY_CNT,C.TOTAL_CNT FROM CUSTOM_LIST 

AS A

INNER JOIN
(SELECT place_id,COUNT(place_id) AS TODAY_CNT from COUNT_TABLE where DATE(place_date) = DATE(NOW()) GROUP BY place_id)
AS B ON B.place_id=A.place_id

INNER JOIN
(SELECT place_id,COUNT(place_id) AS TOTAL_CNT from COUNT_TABLE GROUP BY place_id)
AS C ON C.place_id=A.place_id 
```

结果是：

![在此处输入图像描述](../Images/87988f73040092b56f49e78d10b0d10b.png)

我要这个：

![在此处输入图像描述](../Images/1089a6bf6babbfa86ae45fb39dfa7a14.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:28:04.807

尝试这样的想法：

```
SELECT ..., C.TOTAL_CNT, (@r := @r + 1) AS rank FROM CUSTOM_LIST, (SELECT  @r := 0) t
...
ORDER BY C.TOTAL_CNT DESC 
```

整个查询：

```
SELECT A.place_idx,A.place_id,B.TODAY_CNT,C.TOTAL_CNT, (@r := @r + 1) AS rank 
FROM CUSTOM_LIST AS A, (SELECT  @r := 0) t

INNER JOIN
(SELECT place_id,COUNT(place_id) AS TODAY_CNT from COUNT_TABLE where DATE(place_date) = DATE(NOW()) GROUP BY place_id)
AS B ON B.place_id=A.place_id

INNER JOIN
(SELECT place_id,COUNT(place_id) AS TOTAL_CNT from COUNT_TABLE GROUP BY place_id)
AS C ON C.place_id=A.place_id

ORDER BY C.TOTAL_CNT DESC 
```

如果我们在 Total_CNT 中有两个相同的值怎么办？

也许是这样的：

```
SELECT ..., (@last := C.TOTAL_CNT) AS TOTAL_CNT, 
  IF(@last = C.TOTAL_CNT, @r, @r := @r + 1) AS rank
FROM CUSTOM_LIST, (SELECT  @r := 0, @last := -1) t
... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T11:28:09.780

**更新**

**RANK() OVER (ORDER BY TOTAL_CNT DESC DESC) 作为排名**

在这里，我得到了另一个非常好的解决方案。：

```
SELECT A.place_idx,A.place_id,B.TODAY_CNT,C.TOTAL_CNT, RANK() OVER (ORDER BY TOTAL_CNT DESC) AS Rank FROM CUSTOM_LIST 

AS A

INNER JOIN
(SELECT place_id,COUNT(place_id) AS TODAY_CNT from COUNT_TABLE where DATE(place_date) = DATE(NOW()) GROUP BY place_id)
AS B ON B.place_id=A.place_id

INNER JOIN
(SELECT place_id,COUNT(place_id) AS TOTAL_CNT from COUNT_TABLE GROUP BY place_id)
AS C ON C.place_id=A.place_id 
```

# shell - Unix cut：两次打印相同的字段

> ID：12405119
> 
> 赞同：13
> 
> 时间：2012-09-13T11:22:29.710
> 
> 标签：shell, unix, sed, cut

说我有文件 - a.csv

```
ram,33,professional,doc
shaym,23,salaried,eng 
```

现在我需要这个输出（请不要问我为什么）

```
ram,doc,doc,
shayam,eng,eng, 
```

我正在使用剪切命令

```
cut -d',' -f1,4,4 a.csv 
```

但输出仍然存在

```
ram,doc
shyam,eng 
```

这意味着**cut**只能打印**一次 Field**。我需要将同一字段打印两次或*n*次。 **为什么我需要这个？**（可选读）啊。说来话长。我有这样的文件

```
#,#,-,-
#,#,#,#,#,#,#,-
#,#,#,- 
```

我必须把它隐藏起来

```
#,#,-,-,-,-,-
#,#,#,#,#,#,#,-
#,#,#,-,-,-,- 
```

这里每个“#”和“-”指的是不同的数字数据。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T11:39:52.893

您不能两次打印相同的字段。`cut`按顺序打印选择的字段（或字符或字节）。请参阅[在单个命令中组合 2 个不同的剪切输出？](https://unix.stackexchange.com/questions/47048/combining-2-different-cut-outputs-in-a-single-command)对于一些非常相似的请求，[使用 cut 命令重新排序字段/字符。](https://unix.stackexchange.com/questions/47075/reorder-fields-characters-with-cut-command)

如果您的 CSV 在字段周围没有引号，则此处使用的正确工具是 awk。

```
awk -F , -v OFS=, '{print $1, $4, $4}' 
```

如果您不想使用 awk （为什么？有什么奇怪的系统`cut`但`sed`没有`awk`？），您可以使用 sed （仍然假设您的 CSV 字段周围没有引号）。匹配前四个以逗号分隔的字段，然后按所需顺序选择所需的字段。

```
sed -e 's/^\([^,]*\),\([^,]*\),\([^,]*\),\([^,]*\)/\1,\4,\4/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:33:21.097

```
$ sed 's/,.*,/,/; s/\(,.*\)/\1\1,/' a.csv
ram,doc,doc,
shaym,eng,eng, 
```

这是做什么的：

*   用逗号替换第一个和最后一个逗号之间的所有内容
*   重复最后一个“，某事”部分并加上逗号。瞧！

做出的假设：

*   你想要第一个字段，然后是最后一个字段的两倍
*   第一个和最后一个字段中没有转义逗号

为什么你需要这个输出？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:53:25.053

正如其他人所指出的，`cut`不支持字段重复。

您可以组合`cut`and `sed`，例如，如果重复元素位于末尾：

```
< a.csv cut -d, -f1,4 | sed 's/,[^,]*$/&&,/' 
```

输出：

```
ram,doc,doc,
shaym,eng,eng, 
```

### 编辑

要使重复变量，您可以执行以下操作（假设您有 coreutils 可用）：

```
n=10
rep=$(seq $n | sed 's:.*:\&:' | tr -d '\n')
< a.csv cut -d, -f1,4 | sed 's/,[^,]*$/'"$rep"',/' 
```

输出：

```
ram,doc,doc,doc,doc,doc,doc,doc,doc,doc,doc,
shaym,eng,eng,eng,eng,eng,eng,eng,eng,eng,eng, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T13:01:04.517

使用 perl：

```
perl -F, -ane 'chomp($F[3]);$a=$F[0].",".$F[3].",".$F[3];print $a."\n"' your_file 
```

使用 sed：

```
sed 's/\([^,]*\),.*,\(.*\)/\1,\2,\2/g' your_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-01T22:49:49.640

我遇到了同样的问题，但我没有将所有列添加到 awk，而是使用（复制第二列）：

`awk -v OFS='\t' '$2=$2"\t"$2' # for tab-delimited files`

对于 CSV，您可以使用

`awk -F , -v OFS=, '$2=$2","$2'`

# android - 如何将进度条添加到独立的 Asynctask？

> ID：12405120
> 
> 赞同：3
> 
> 时间：2012-09-13T11:22:30.880
> 
> 标签：android, android-asynctask, progress-bar

我有一个在自己的活动中的异步任务。我向它传递一个字符串值，它连接到我的 Web 服务并根据我传入的名称下载 Json 数据，返回 Json 结果集。效果很好。

我想在异步任务中添加一个进度微调器，但我不知道该怎么做。我仔细阅读了这个和许多其他博客，并接近但尚未找到解决方案。看来我要么需要将异步任务与 Activity 类一起获取上下文，要么必须将上下文作为参数传递——但我需要输入参数是字符串。我已经阅读了构建一个可以保存字符串和上下文参数的对象的可能性，但是我对 Java 很陌生，不知道如何构建类似的东西，也没有找到一个很好的解释来说明如何这样做。所以经常有一个解释符合我的需要，然后说，“......然后你做X，就是这样，”当X是我需要知道的。

我想要的只是一个在下载发生时旋转的旋转器。没有文字，没有对话，只有一个微调器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:44:45.740

```
class MyTask extends AsyncTask<Request, Void, Result> {

 protected ProgressDialog progressDialog;

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();               
            progressDialog = ProgressDialog.show(YourActivity.this, "", "", true, false);
        }

    @Override protected Boolean doInBackground(Request... params) {
        // do some work here 
            return true;
    }

    @Override protected void onPostExecute(Result res) {
        progressDialog.dismiss();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:39:13.037

在初始化 AsyncTask 的 Activity 布局中添加一个 ProgressBar（这实际上是它的名称，Spinners 就像 Android 中的下拉菜单）。

然后制作两个函数`startProgress()`和`stopProgress()`，它们启动和停止进度条。

通过在初始化或执行期间发送它，或者在 asyncTask 中创建一个函数`setActivity(MyActivity activity)`并在 AsyncTask 初始化和执行之间调用它，为您的 AsyncTask 提供对 Activity 的引用。

覆盖`onPreExecute()`您的 AsyncTask 以调用`activity.startProgress()`和`onPostExecute()`调用`activity.stopProgress()`。

编辑：您还可以尝试在 AsyncTask 的构造函数中传递对 ProgressBar 的引用。在活动的方法中获取对 ProgressBar 的引用`onCreate()`，然后将其添加到 AsyncTask 构造函数中。在 AsyncTask 的`onPreExecute()`和`onPostExecute()`方法中，相应地启动和停止进度条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:35:04.037

您可以将各种参数传递给一个`AsyncTask`，而不仅仅是一个！

一种方法是在 AsyncTask 中创建成员变量，并使用接受参数的构造函数对其进行初始化。例如：

```
private class MyAsyncTask extends AsyncTask<null, null, null> {
String mFirstParam = null;
Context mContext = null;
// Constructor which accepts parameters
public MyAsyncTask(String _firstParam, Context _context){
 this.mFirstParam = _firstParam;
 this.mContext = _context;
 }
} 
```

当您创建 的实例时`AsyncTask`，按如下方式创建它：

```
MyAsyncTask task = new MyAsyncTask(myFirstStringParam, mySecondContextParam);
task.execute(); 
```

现在，您可以在`AsyncTask`.

完成下载数据后，考虑传递`ImageView`“加载”图像的包含并将其可见性设置为。`View.GONE`

即在方法中下载您的数据，`doInBackground`然后在方法中将 ImageViews 可见性`View.GONE`更改`onPostExecute`为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:38:16.057

我认为您可以在其构造函数中创建进度条实例时将其传递给 AsyncTask。这是使用 AsyncTask 的下载器示例 -

```
public void downloadFile(String url, String path, ProgressDialog progress) {

    DownloadFileAsync downloader = new DownloadFileAsync(progress);

    File file = new File(path);

    if (file.exists()) {
        file.delete();
    }

    downloader.execute(url, path);
}

class DownloadFileAsync extends AsyncTask<String, String, String> {

    private final WeakReference<ProgressDialog> progressbarReference;

    public DownloadFileAsync(ProgressDialog progress) {
        progressbarReference = new WeakReference<ProgressDialog>(progress);
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... aurl) {
        int count;

        try {

            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();

            /*
             * android.util.Log.v("downloadFile", "Lenght of file: " +
             * lenghtOfFile + ":" + aurl[1]);
             */
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream(aurl[1]);

            try {
                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    publishProgress(""
                            + (int) ((total * 100) / lenghtOfFile));
                    output.write(data, 0, count);
                }

            } finally {

                if (output != null) {
                    output.flush();
                    output.close();
                }

                if (input != null) {

                    input.close();
                }
            }
        } catch (Exception e) {

            ProgressDialog p = null;

            if (progressbarReference != null) {
                p = progressbarReference.get();
            }

            if (p != null && p.isShowing()) {
                p.dismiss();
            }
        }
        return null;

    }

    protected void onProgressUpdate(String... progress) {
        if (progressbarReference != null) {
            ProgressDialog p = progressbarReference.get();

            if (p != null) {
                p.setProgress(Integer.parseInt(progress[0]));
            }
        }
    }

    @Override
    protected void onPostExecute(String unused) {

        ProgressDialog p = null;

        if (progressbarReference != null) {
            p = progressbarReference.get();
        }

        if (p != null && p.isShowing()) {
            p.dismiss();
        }

    }
} 
```

ProgressDialog 是一个自定义对话框，里面有一个进度条。希望能帮助到你。

# ruby-on-rails - 使用 jruby -c 语法检查检查 ruby /jruby 脚本的语法（在 ruby 代码中）

> ID：12405121
> 
> 赞同：0
> 
> 时间：2012-09-13T11:22:39.390
> 
> 标签：ruby-on-rails, ruby, file-io, jruby, eval

我正在寻找某种方式，使用它在 ruby​​ 代码中我应该能够创建一个临时文件，然后在其中附加一些 ruby​​ 代码，然后将该临时文件路径传递给 jruby -c 以检查任何语法错误。

目前我正在尝试以下方法：

```
script_file = File.new("#{Rails.root}/test.rb", "w+") 
            script_file.print(content)
            script_file.close
command = "#{RUBY_PATH} -c #{Rails.root}/test.rb"
            eval(command);
            new_script_file.close 
```

当我检查命令 var 时，它正确显示 jruby -c {ruby 文件路径}。但是当我执行上面的代码时，我收到以下错误：

> 在 41 毫秒内完成 500 内部服务器错误
> 
> SyntaxError ((eval):1: dhunknown regexp options - dh):

让我知道是否有人对此有任何想法。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:18:17.527

**eval**将字符串评估为**Ruby 代码**，而不是命令行调用：由于您的命令不是有效的 Ruby 语法，因此您会收到此异常。

如果要在 Ruby 中启动命令，可以使用 %x{} 或 ``：

> 输出1 =`ls`
> 
> 输出 2 = %x{ls}

如果您想处理它，这两种形式都会将启动命令的输出作为字符串返回。如果您希望此输出直接显示在用户终端中，可以使用 system()：

> 系统（“ls”）

# iphone - iOS使用字符串的索引来复制字符串的手动部分

> ID：12405123
> 
> 赞同：0
> 
> 时间：2012-09-13T11:22:53.773
> 
> 标签：iphone, ios, string, parsing, indexing

```
NSString *mainString =
@"COLOUMN1:Shaddy Van Dust COLOUMN2:245876 COLOUMN3:Info 3\nCOLOUMN1:Da Dirk COLOUMN2:45678 COLOUMN3:xcode\n"; 
```

这是我要解析的 NSString 示例。我的真实字符串大约有 31 行。每个信息都有前缀“COLOUMNx”，就像“Shady Van Dust”之前一样。（每次都是 COLOUMN1、COLOUMN2 和 COLOUMN3，但之后的每个信息每次都不同，并且长度不同。）每行以 '\n' 结尾。我的字符串中的最后一个标记是'\n'。（除了'\0'）（每行和我的字符串通常以哪个标记结束并不重要，如果这样更容易的话。）

现在，我想将 COLOUMN1、COLOUMN2 和 COLOUMN3 之间的每个信息复制到一个临时字符串中以使用它。我想重复直到我的字符串结束。

我已经尝试过 rangeOfString 之类的方法，但是 COLOUMN1、*2 和 *3 存在于每一行中 - 在同一个字符串中。

我需要做什么？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:17:02.240

How about this?

```
NSString *mainString =
    @"COLOUMN1:Shaddy Van Dust COLOUMN2:245876 COLOUMN3:Info 3\nCOLOUMN1:Da Dirk COLOUMN2:45678 COLOUMN3:xcode\n";

    NSArray *strArray = [mainString componentsSeparatedByString:@"COLOUMN"];
    NSMutableDictionary *stringDictionary = [[NSMutableDictionary alloc] init];
    NSInteger idx = 1;

    for (NSString *thisString in strArray) {
        if ([thisString length] > 2) {
            NSString *trimmedString = [thisString substringFromIndex:2];
            [stringDictionary setValue:[trimmedString stringByReplacingOccurrencesOfString:@"\n" withString:@""]
                                forKey:[NSString stringWithFormat:@"String%d",idx]];
            idx++;

        }
    }

    NSLog(@"stringDictionary = %@", [stringDictionary description]); 
```

Outputs:

```
2012-09-13 07:16:02.064 SO String Parsing[21203:f803] stringDictionary = {
    String1 = "Shaddy Van Dust ";
    String2 = "245876 ";
    String3 = "Info 3";
    String4 = "Da Dirk ";
    String5 = "45678 ";
    String6 = xcode;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:35:51.833

您可以尝试使用：

```
NSMutableArray *arrayOfStrings = [mainString componentsSeparatedByString:@"\n"]; 
```

这会给你一个像这样的 NSStrings 数组：

> 0 -> COLOUMN1:Shaddy Van Dust COLOUMN2:245876 COLOUMN3:Info 3
> 
> 1 -> COLOUMN1:Da Dirk COLOUMN2:45678 COLOUMN3:xcode
> 
> 2 -> [...]

该数组包含 NSStrings，您可以使用`[arrayOfStrings objectAtIndex:index];`.

我不确定你能用它做什么，但我认为你越来越接近拥有你想要的单独字符串......

希望能帮助到你 ！

**编辑 ：**

你可以走得更远。启动一个遍历您的阵列的循环。

获取 index 的字符串`i`：

```
NSString *stringToEdit = [arrayOfStrings objectAtIndex: i]; 
```

将您的字符串分成另一个数组：

```
NSMutableArray *arrayOfLine = [stringToEdit componentsSeparatedByString:@"COLOUMN"]; 
```

您现在有一个新数组：

> [@"", @"1:Shaddy Van Dust", @"2:245876", @"3:Info 3"]

请注意开头的空字符串，因为您划分的字符串以分隔符开头，而第二个和第三个字符串末尾的空格。

现在再次访问该数组，您将能够处理您的字符串！

祝你好运 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:38:17.177

使用`componentsSeparatedByString:`. 我将解释一个简单的方法（可能有更好的方法）：

首先将字符串分成一个行数组，如下所示：

```
NSArray* rowStrings = [mainString componentsSeparatedByString:@"\n"]; 
```

然后再次使用它将数据分成列：

```
NSArray* columnStrings = [[rowStrings objectAtIndex:i] componentsSeparatedByString:@" COLOUMN"]; 
```

您必须`:`再次删除`NSString* columnData = [[columnStrings componentsSeparatedByString:@":"] objectAtIndex:1];`

# php - AJAX 简单错误。XMLHttpRequest 无法加载 http://localhost/mpl/getPage.php。Access-Control-Allow-Origin 不允许 Origin null

> ID：12405126
> 
> 赞同：-3
> 
> 时间：2012-09-13T11:23:18.607
> 
> 标签：php, javascript, ajax, cordova

> **可能重复：**
> [XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

我是 JavaScript Phonegap 和 AJAX 的新手。我正在尝试编写一个简单的 Phonegap 应用程序，该应用程序将向服务器请求消息，但该应用程序没有响应。当我在 chrome 浏览器上将脚本作为文件运行时，因为我了解 Phonegap 的工作原理，它显示了以下内容`XMLHttpRequest cannot load http://localhost/mpl/getPage.php. Origin null is not allowed by Access-Control-Allow-Origin.`

我怎样才能解决这个问题？我的代码在下面。

```
<html>
<head>
<script type="text/javascript">
function getMessage()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("serverReply").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","http://localhost/mpl/getPage.php",true);
xmlhttp.send();
}
</script>
</head>
<body>

<div id="serverReply" onclick="getMessage();"><b>Get message</b></div>

</body>
</html> 
```

我`getPage.php`的很简单

```
<?php

echo 'cool';

?> 
```

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:31:17.907

使用下面的代码

```
<div id="serverReply"><b><a href="#"  onclick="getMessage();">Get message</a></b></div> 
```

代替

```
<div id="serverReply" onclick="getMessage();"><b>Get message</b></div> 
```

**或者试试这个**

```
<html>
<head>
<script type="text/javascript">
function getMessage()
{
  if (window.XMLHttpRequest)
  {
      // code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();

  }else
  {
    // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

    xmlhttp.onreadystatechange=function()
  {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        alert(xmlhttp.responseText);
        document.getElementById("serverReply").innerHTML=xmlhttp.responseText;

    }
  }
    xmlhttp.open("GET","http://localhost/mpl/getPage.php",true);
    xmlhttp.send();
}
</script>
</head>
<body>

<div id="serverReply"><b><a href="#"  onclick="getMessage();">Get message</a></b></div>

</body>
</html> 
```

# javascript - jquery代码通过单击相同的显示/隐藏图像

> ID：12405127
> 
> 赞同：2
> 
> 时间：2012-09-13T11:23:18.750
> 
> 标签：javascript, jquery

我想`jQuery`通过单击来显示/隐藏图像`<div>.`

我不能用切换功能交换图像。我将它与 HTML 一起使用。这是行不通的

```
<script type="text/javascript">

    $(document).ready(function () {
        $("cell").click(function () {
            $('#img1').toggle("slow");

        })
    });
</script>
<div id="gridbox">
        <div class="cell">
        <div class="inner">
            <span class="name">Bob</span> <br /> (id: 57)
          <%--  <input type="hidden" class="friend_id" value="57 " />--%>
            <img src="Images/mobile.jpg" alt="" id="img1" width="180" height="180"/>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:25:50.590

```
$('#divId').click(function(){
    $('#imgId').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:52:48.467

在你的第一行使用 .cell 而不是 cell

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:25:33.460

你可以使用 jquery `toogle`api

html

```
<div id="clickhere ">
  Click here
</div>
<img id="image" src="demo.png" alt="" width="120" height="120" /> 
```

jQuery

```
$('#clickhere ').click(function() {
  $('#image').toggle('slow', function() {
    // Animation complete.
  });

}); 
```

如需进一步参考，请检查[jquery .toggle()的此链接](http://api.jquery.com/toggle/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:30:23.237

如果通过将它与 HTML 一起使用，您的意思是说您正在编写内联脚本，然后停止。这有很多负面影响，为了节省时间，我不会全部列出。

将 javascript 抽象到一个单独的文件中，并且只使用 inline 来初始化脚本。这是一个使用类抽象脚本的示例（使用 mootools）[http://digitarald.de/project/autocompleter/](http://digitarald.de/project/autocompleter/)

这是您应该遵循的示例：http: [//jqueryui.com/demos/toggle/](http://jqueryui.com/demos/toggle/)

```
<script>
    $(function() {
        // run the currently selected effect
        function runEffect() {
            // get effect type from 
            var selectedEffect = $( "#effectTypes" ).val();

            // most effect types need no options passed by default
            var options = {};
            // some effects have required parameters
            if ( selectedEffect === "scale" ) {
                options = { percent: 0 };
            } else if ( selectedEffect === "size" ) {
                options = { to: { width: 200, height: 60 } };
            }

            // run the effect
            $( "#effect" ).toggle( selectedEffect, options, 500 );
        };

        // set effect from select menu value
        $( "#button" ).click(function() {
            runEffect();
            return false;
        });
    });
</script>

<div class="demo">

<div class="toggler">
    <div id="effect" class="ui-widget-content ui-corner-all">
        <h3 class="ui-widget-header ui-corner-all">Toggle</h3>
        <p>
            Etiam libero neque, luctus a, eleifend nec, semper at, lorem. Sed pede. Nulla lorem metus, adipiscing ut, luctus sed, hendrerit vitae, mi.
        </p>
    </div>
</div>

<select name="effects" id="effectTypes">
    <option value="blind">Blind</option>
    <option value="bounce">Bounce</option>
    <option value="clip">Clip</option>
    <option value="drop">Drop</option>
    <option value="explode">Explode</option>
    <option value="fold">Fold</option>
    <option value="highlight">Highlight</option>
    <option value="puff">Puff</option>
    <option value="pulsate">Pulsate</option>
    <option value="scale">Scale</option>
    <option value="shake">Shake</option>
    <option value="size">Size</option>
    <option value="slide">Slide</option>
</select>

<a href="#" id="button" class="ui-state-default ui-corner-all">Run Effect</a>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T11:28:43.850

看到这个[小提琴](http://jsfiddle.net/6W789/2/)

```
$("div").click(function () {
      $("img").toggle("slow");
}); ​ 
```

# google-maps - 在 Google Maps API v3 中找到最短和最快路线的优雅方法？

> ID：12405132
> 
> 赞同：12
> 
> 时间：2012-09-13T11:23:45.970
> 
> 标签：google-maps, google-maps-api-3

我正在制作出租车费用计算器。业务需求之一是，公司想要最短和最快的路线选择。我知道 Google directionService 默认搜索最快的路线。我将请求参数中的“avoidhighways”选项设置为 true 以获得最短路线，但我对结果不太满意。

谁有比这更好的解决方案？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-02T14:56:40.570

要获得从 A 到 BI 的最短路线，建议使用“alternatives=true”参数进行不同的查询，在避免=toll、避免=高速公路之间使用“避免”参数，然后我会比较所有结果以选择最短路线。

```
 directionsService = new google.maps.DirectionsService;
//avoiding tolls
            directionsService.route({
                origin: {
                    'placeId': originId
                },
                destination: {
                    'placeId': destinationId
                },
                provideRouteAlternatives: true,
                avoidTolls: true,
                travelMode: google.maps.TravelMode.DRIVING
            }, function(response, status) {
                if (status === google.maps.DirectionsStatus.OK) {
                    routesResponses.push(response);
                }
                else {
                    window.alert('Directions request failed due to ' + status);
                }
            });
            //avoiding highways
            directionsService.route({
                origin: {
                    'placeId': originId
                },
                destination: {
                    'placeId': destinationId
                },
                provideRouteAlternatives: true,
                avoidHighways: true,
                travelMode: google.maps.TravelMode.DRIVING
            }, function(response, status) {
                if (status === google.maps.DirectionsStatus.OK) {
                    routesResponses.push(response);
                }
                else {
                    window.alert('Directions request failed due to ' + status);
                }

                //Results analysis and drawing of routes
                var fastest = Number.MAX_VALUE,
                    shortest = Number.MAX_VALUE;

                routesResponses.forEach(function(res) {
                    res.routes.forEach(function(rou, index) {
                        console.log("distance of route " +index+": " , rou.legs[0].distance.value);
                        console.log("duration of route " +index+": " , rou.legs[0].duration.value);
                        if (rou.legs[0].distance.value < shortest) shortest = rou.legs[0].distance.value  ;
                        if (rou.legs[0].duration.value < fastest) fastest = rou.legs[0].duration.value  ;

                    })
                })
                console.log("shortest: ", shortest);
                console.log("fastest: ", fastest);
//painting the routes in green blue and red
                 routesResponses.forEach(function(res) {
                    res.routes.forEach(function(rou, index) {
                        new google.maps.DirectionsRenderer({
                            map:map,
                            directions:res,
                            routeIndex:index,
                            polylineOptions:{
                                strokeColor: rou.legs[0].duration.value == fastest? "red":rou.legs[0].distance.value == shortest?"darkgreen":"blue",
                                strokeOpacity: rou.legs[0].duration.value == fastest? 0.8:rou.legs[0].distance.value == shortest? 0.9: 0.5,
                                strokeWeight: rou.legs[0].duration.value == fastest? 9:rou.legs[0].distance.value == shortest? 8: 3,
                            }
                        })
                    })
                })   
            });
        }

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-12T07:20:13.140

`alternatives=true`您将获得带有选项集的三个选项。然后，您可以在这些路径中搜索最短和最快的返回路线。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-09T23:57:04.590

请参阅[http://codepen.io/jasonmayes/pen/DupCH](http://codepen.io/jasonmayes/pen/DupCH)。

```
var shortestDistance = function() {  
    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;
    var size = 0;
    var currentPosition;

    // An array of interesting places we want to potentially visit.
    var interestingPlaces = [
    {'title': 'Regents Park', 'latLng': new google.maps.LatLng(51.530686, -0.154753)},
    {'title': 'Hyde Park', 'latLng': new google.maps.LatLng(51.507293, -0.164022)},
    {'title': 'Green Park', 'latLng': new google.maps.LatLng(51.504088, -0.141706)},
    {'title': 'Regents Park', 'latLng': new google.maps.LatLng(51.479185, -0.159903)}
    ];

    // An array to store results from Google routing API.
    var routeResults = [];

    // Call this upon page load to set everything in motion!
    function initialize(currentLat, currentLng) {
    currentPosition = new google.maps.LatLng(currentLat, currentLng);
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
        zoom: 13,
        center: currentPosition
    };
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    directionsDisplay.setMap(map);

    var marker = new google.maps.Marker({
            position: currentPosition,
            map: map,
            title: 'Currrently location.'
    });

    var i = interestingPlaces.length;
        while (i--) {
        interestingPlaces[i].marker = new google.maps.Marker({
        position: interestingPlaces[i].latLng,
        map: map,
        title: interestingPlaces[i].title,
        icon: 'http://maps.google.com/mapfiles/ms/icons/green.png'
        });
    }

    findNearestPlace();
    }

    // Loops through all inteesting places to calculate route between our current position
    // and that place.
    function findNearestPlace() {
    var i = interestingPlaces.length;
    size = interestingPlaces.length;
    routeResults = [];
    while (i--) {
        calcRoute(interestingPlaces[i].latLng, storeResult);
    }
    }

    // A function to calculate the route between our current position and some desired end point.
    function calcRoute(end, callback) {
    var request = {
        origin: currentPosition,
        destination: end,
        travelMode: google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
        callback(response);
        } else {
        size--;
        }
    });
    }

    // Stores a routing result from the API in our global array for routes.
    function storeResult(data) {
    routeResults.push(data);
    if (routeResults.length === size) {
        findShortest();
    }
    }

    // Goes through all routes stored and finds which one is the shortest. It then
    // sets the shortest route on the map for the user to see.
    function findShortest() {
    var i = routeResults.length;
    var shortestIndex = 0;
    var shortestLength = routeResults[0].routes[0].legs[0].distance.value;

    while (i--) {
        if (routeResults[i].routes[0].legs[0].distance.value < shortestLength) {
        shortestIndex = i;
        shortestLength = routeResults[i].routes[0].legs[0].distance.value;
        }
    }
    directionsDisplay.setDirections(routeResults[shortestIndex]);
    }

    // Expose the initialize function publicly as "init".
    return {
    init: initialize
    };
}();

// Upon page load, lets start the process!
google.maps.event.addDomListener(window, 'load', shortestDistance.init(51.489554, -0.12969)); 
```

## **免责声明**

这***不是***我的笔！！！我只是提到一个有用的资源，可能会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-02T20:14:03.787

首先，很抱歉我的解决方案在 TS 中，您可以轻松地将其转换为 JS。

“avoidhighways”属性不是为了获得最快或最短的路线，它是为了顾名思义，避开高速公路。

我通过始终获得具有此属性的多个路由来制定自己的解决方案：

```
directionsService.route({
            [...]
            provideRouteAlternatives: true
            [...]
         }, (response, status) => {
            if (status === google.maps.DirectionsStatus.OK) {
                var shortest: google.maps.DirectionsResult = this.shortestRoute(response);
                this.directionsDisplay.setDirections(shortest);
                [...] 
```

我制作了这个函数，它只用一条路线返回 DirectionsResult。在这种情况下，它是最短的，但您可以对其进行调整，以便返回适合您需要的任何路线。

```
 shortestRoute = (routeResults: google.maps.DirectionsResult): google.maps.DirectionsResult => {
        var shortestRoute: google.maps.DirectionsRoute = routeResults.routes[0];
        var shortestLength = shortestRoute.legs[0].distance.value;
        for (var i = 1; i < routeResults.routes.length; i++) {
            if (routeResults.routes[i].legs[0].distance.value < shortestLength) {
                shortestRoute = routeResults.routes[i];
                shortestLength = routeResults.routes[i].legs[0].distance.value;
            }
        }
        routeResults.routes = [shortestRoute];
        return routeResults;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-04T06:29:38.390

我从**Soldeplata Saketos 的**答案中获取了代码并对其进行了编辑，因为它不起作用。添加了参数，因此您可以像这样调用它。

```
shortestRoute(origin, destination, map); 
```

虽然我不确定它有多正确，但对我所有人都有效。

这里：

```
function shortestRoute(origin, destination, map) {

  directionsService = new google.maps.DirectionsService();
  var routesResponses = [];
  //avoiding tolls
  directionsService.route({
    origin: origin,
    destination: destination,
    provideRouteAlternatives: true,
    avoidTolls: true,
    travelMode: google.maps.TravelMode.DRIVING
  }, function (response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      routesResponses.push(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
  //avoiding highways
  directionsService.route({
    origin: origin,
    destination: destination,
    provideRouteAlternatives: true,
    avoidHighways: true,
    travelMode: google.maps.TravelMode.DRIVING
  }, function (response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      routesResponses.push(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }

    //Results analysis and drawing of routes
    var fastest = Number.MAX_VALUE,
      shortest = Number.MAX_VALUE;

    routesResponses.forEach(function (res) {
      res.routes.forEach(function (rou, index) {
        console.log("distance of route " + index + ": ", rou.legs[0].distance.value);
        console.log("duration of route " + index + ": ", rou.legs[0].duration.value);
        if (rou.legs[0].distance.value < shortest) shortest = rou.legs[0].distance.value;
        if (rou.legs[0].duration.value < fastest) fastest = rou.legs[0].duration.value;

      })
    })
    console.log("shortest: ", shortest);
    console.log("fastest: ", fastest);
    //painting the routes in green blue and red
    routesResponses.forEach(function (res) {
      res.routes.forEach(function (rou, index) {
        new google.maps.DirectionsRenderer({
          map: map,
          directions: res,
          routeIndex: index,
          polylineOptions: {
            strokeColor: rou.legs[0].duration.value == fastest ? "red" : rou.legs[0].distance.value == shortest ? "darkgreen" : "blue",
            strokeOpacity: rou.legs[0].duration.value == fastest ? 0.8 : rou.legs[0].distance.value == shortest ? 0.9 : 0.5,
            strokeWeight: rou.legs[0].duration.value == fastest ? 9 : rou.legs[0].distance.value == shortest ? 8 : 3,
          }
        });
      });
    });
  });
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-04-12T10:37:20.887

```
在请求参数中使用optimizeWaypoints: true 。请参阅下面的代码片段

变种请求 ={
                原点：sStartLatLng，
                目的地：sStartLatLng，
                航路点：航路点，
                optimizeWaypoints：真，
                travelMode：google.maps.DirectionsTravelMode.DRIVING
            };  

```

# c# - 什么是命名管道 (net.pipe) 限制？

> ID：12405134
> 
> 赞同：3
> 
> 时间：2012-09-13T11:23:53.937
> 
> 标签：c#, .net, named-pipes, net.pipe

我有一个循环运行的程序，每次迭代都在不同的线程中运行，我正在创建打开新服务主机的新进程：

```
ServiceHost _host = new ServiceHost(_service, new Uri("net.pipe://localhost/" + i_PipeName));
_host.AddServiceEndpoint(typeof(ICommandService), new NetNamedPipeBinding() { TransferMode = TransferMode.Buffered }, i_PipeName);
_host.Open(); 
```

从我的主程序中，我通过以下方式连接到开放的 .net 管道：

```
ICommandService ServiceProxy = ChannelFactory<ICommandService>.CreateChannel
(new NetNamedPipeBinding(), new EndpointAddress(@"net.pipe://localhost/" + i_PipeName" + @"/" + i_PipeName)); 
```

所以我的问题是，对于前 200 多个过程/迭代它工作正常，我可以打开连接并传递消息，但后来开始出现错误：

> 在 net.pipe://localhost/pipea0360/pipea0360 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

我的问题是我可以并行打开的管道数量是否有任何限制？
这是因为我打开了很多进程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:10:20.637

您是否排除了竞争条件，即客户端试图连接到服务器尚未建立的管道？如果服务器上有很多活动线程，则很容易延迟应该开始侦听的线程。这可以解释为什么它在一开始就起作用。

一般来说，每个客户端都有一个服务器线程并不能很好地扩展。您将使用线程池方法获得更好的性能。

# javascript - javascript: 将数据库中的数据插入 html5 文本字段

> ID：12405140
> 
> 赞同：0
> 
> 时间：2012-09-13T11:24:15.550
> 
> 标签：javascript, html

我正在尝试从html 页面`mysql`中的数据库中获取数据。`textfield`我正在使用`php`从数据库中获取数据并使用`json`将数据提供给`javascript`. 然后使用 id 我将价值扔给`textfield`. 但它不起作用。我很容易使用 id 获取电话号码`div`或`li`标签，但相同的值不会出现在`textfield`.

我的 javascript 是这样的

```
$('#tenantcontactTP').live('pageshow', function(event) {
var id = 'mukul_kuet@yahoo.com';
$.getJSON('tenantcontact.php?id='+id, displayEmployee);
});

function displayEmployee(data) {
var employee = data.item;

if (employee.TenantPhoneNumber) {
    $('#tphone').append(employee.TenantPhoneNumber);
}
} 
```

然后我的包含文本字段的 html 页面是

```
<!DOCTYPE HTML>
<html>
<head>
</head> 
<body>
<div id="tenantcontactTP" data-role="page" data-add-back-btn="true">
<div data-role="content">    
<ul data-role="listview" data-inset="true">
<form>
<table>
<tr><td>Phone Number</td><td><input type="text" name="tphone" id="tphone" value=""/></td></tr>
</table>
</ul>
<input type="submit" name="update" value="Update" />
</form>
</div>
</div>
</body>
</html> 
```

我会更新电话号码。如果我使用列表，则显示电话号码，但未显示在`text field`. 我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:28:04.970

用于`$('#tphone').val(employee.TenantPhoneNumber);`向文本字段添加值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:30:20.420

您想设置输入元素的值，而不是追加。使用以下内容：

```
if (employee.TenantPhoneNumber) {
    $('#tphone').val(employee.TenantPhoneNumber);
} 
```

# google-apps-script - 云端硬盘项目的共享设置

> ID：12405146
> 
> 赞同：1
> 
> 时间：2012-09-13T11:24:37.693
> 
> 标签：google-apps-script

我正在寻找 GAS 服务来确定云端硬盘项目的共享设置

我的目标是创建一个脚本，在 Google 协作平台页面上仅列出 Drive 文件夹中共享设置设置为“只能查看”（或最好不等于“可以编辑”）的项目。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:47:18.963

[DocsList](https://developers.google.com/apps-script/service_docslist)服务及其[File](https://developers.google.com/apps-script/class_file)类是您所需要的。[File.getViewers](https://developers.google.com/apps-script/class_file#getViewers)检索文件查看器，File.getEditors[检索](https://developers.google.com/apps-script/class_file#getEditors)文件编辑器。您的任务是找到无法编辑的观众。也可以排除文档所有者，他也可以编辑文档。

**更新**：不幸的是，GAS 对文档可见性的支持非常[有限](http://support.google.com/docs/bin/answer.py?hl=en&answer=183965)。只有`Spreadsheet`类有[isAnonymousView](https://developers.google.com/apps-script/class_spreadsheet#isAnonymousView)方法，即使使用也无法区分`Public on the web`和`Anyone with the link`选项之间的区别。其他类 - [DocsList.File](https://developers.google.com/apps-script/class_file)和[DocumentApp.Document](https://developers.google.com/apps-script/class_document)没有这种能力。

如果此功能对您非常重要，请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开一个新功能请求。

# java - 如何从 URL 中获取数据？

> ID：12405159
> 
> 赞同：7
> 
> 时间：2012-09-13T11:25:21.813
> 
> 标签：java, android, url

我在网站上提供了数据，如下图所示：

![在此处输入图像描述](../Images/b6c0b79ad49cb189226e42bdd2c9da25.png)

该网站提供了一些参数的值，这些参数每隔一段时间就会更新。现在我想根据Android应用程序中的列名和行号来检索这些数据，我知道如何打开http连接。但不幸的是，我不知道应该从哪里开始以及如何读取图像中提供的数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T11:29:13.150

除非您有特殊的数据源要处理，否则您必须阅读网站的内容然后手动处理它。这是[java 教程](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)中有关如何从 URL 连接中读取的链接。

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL oracle = new URL("http://www.oracle.com/");
        URLConnection yc = oracle.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }
} 
```

* * *

编辑：

如果您使用代理，您还应该设置这些系统属性（设置为适当的值）：

```
System.setProperty("http.proxyHost", "3.182.12.1");
System.setProperty("http.proxyPort", "1111"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:39:57.900

如果数据只是明文并且表格的格式没有改变，您可以解析整个表格，例如在阅读“------- ...”行后，您可以使用扫描仪解析值：

```
 Scanner s;
 while ((inputLine = in.readLine()) != null)
 {
   s = new Scanner(input).useDelimiter(" ");
   //Then readthe Values like
   value = s.next()); // add all values in a list or array       
 } 
 s.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:38:57.020

您必须解析整个内容。你不能调用网络服务来获取这些数据，或者直接调用属于这个视图的数据库吗？

# asp.net - 查询字符串整数值：输入字符串格式不正确

> ID：12405160
> 
> 赞同：0
> 
> 时间：2012-09-13T11:25:23.107
> 
> 标签：asp.net, vb.net

我收到“输入字符串的格式不正确”。错误，因为我试图将以下变量设置为查询字符串中的值：

```
sentFolder = Request.querystring("fid") 
```

谁能简单地告诉我如何获取查询字符串并让这件事相信它的预期数据类型：整数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:31:08.387

您可以使用 int32 或不同的整数类型，具体取决于您的 fid 可能达到的值。例如，如果 fid 可能是万亿，1,000,000,000,000，那么您可以考虑使用 int64。

但[数据类型。解析应该有你覆盖。](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)

所以为了完整起见：

```
sentFolder = Convert(Request.querystring("fid"))

Private Sub Convert(value As String)
      Try 
         Dim number As Integer = Int32.Parse(value)
         Console.WriteLine("Converted '{0}' to {1}.", value, number)
      Catch e As FormatException
         Console.WriteLine("Unable to convert '{0}'.", value)
      End Try 
   End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:26:08.717

用于[`Integer.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)将字符串转换为整数：

```
Dim sentFolder As Integer
If Integer.TryParse(Request.QueryString("fid"), sentFolder) Then
    ' sentFolder now contains fid as an Integer. Do something with it.
Else
    ' fid has not been a valid integer. You might want to raise an error here.
End If 
```

# android - 显示操作栏中的所有选项卡 sherlock？

> ID：12405162
> 
> 赞同：0
> 
> 时间：2012-09-13T11:25:31.307
> 
> 标签：android, actionbarsherlock

我正在使用动作栏 sherlock 并在横向模式下显示我的所有选项卡，但纵向仅显示一个。

如何显示所有选项卡以便用户可以沿着它们滑动？他们不必同时出现在屏幕上，我只是不想要一个弹出菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:46:42.947

一个有点老的问题，你可能已经想出了如何解决它，但这里有一个解决方案供人们（像我一样）在同样的问题上苦苦挣扎。事实上，[文档](http://developer.android.com/guide/topics/ui/actionbar.html)说如下：

> 注意：在某些情况下，Android 系统会将您的操作栏选项卡显示为下拉列表，以确保最适合操作栏。

为避免选项卡项目不适合屏幕时出现下拉列表，请将选项卡添加到 ActionBar 并在添加项目**后设置导航模式。**

```
ActionBar bar = getSupportActionBar();
//bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); // Don't set navigation mode yet, if you do then portrait mode will revert to list mode if tab items don't fit the screen
bar.setLogo(logo);
bar.setHomeButtonEnabled(false);
bar.setDisplayHomeAsUpEnabled(true);
bar.setDisplayShowTitleEnabled(false);

// Add lots of tab items
for (int i = 0; i < channels.length; i++) {
    ActionBar.Tab tab = bar.newTab();
    String[] s = channels[i].split(":");
    tab.setText(s[0]);
    tab.setTag(s[1]);
    tab.setTabListener(this);

    bar.addTab(tab);
}

// Set navigation mode now, that will show all tabs in portrait mode instead of drop-down regardless the screen size
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

而已 ：）

# sphinx - 狮身人面像远程查询 + 杀戮列表

> ID：12405165
> 
> 赞同：0
> 
> 时间：2012-09-13T11:25:42.070
> 
> 标签：sphinx, thinking-sphinx

我有一个配置了两个索引的 sphinx 实例：main 和 delta。它们都有sql查询范围。

在 delta 索引中，我有一个 killlist 查询以从主索引中删除修改过的文章。

这个查询应该像内容查询一样排列吗？

IE

```
source delta : main {
  sql_query_range   = SELECT MIN(id),MAX(id) FROM documents
  sql_range_step = 1000

  sql_query = SELECT * FROM documents WHERE id>=$start AND id<=$end WHERE ID > (SELECT maxID from SphinxTable)

  sql_query_killlist = SELECT id FROM documents WHERE id>=$start AND id<=$end WHERE ID > (SELECT maxID from SphinxTable)
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:33:05.323

> 这个查询应该像内容查询一样排列吗？

不，killlists 不支持范围查询。它只运行一个查询。

顺便说一句，这个：

> sql_query_range = 从文档中选择 MIN(id),MAX(id)

看起来不对。这是从文档表中获取所有 id。但是 sql_query 有一个使用来自 SphinxTable 的 maxID 的附加原因

应该是这样的

```
sql_query_range   = SELECT (SELECT maxID from SphinxTable),MAX(id) FROM documents 
```

否则，您将发出大量查询 - 获取主要的文档，由于第二个 calise 将永远不会匹配。

所以就这样做

```
sql_query = SELECT * FROM documents WHERE id>=$start AND id<=$end WHERE ID > (SELECT  maxID from SphinxTable) OR updated > (SELECT updatedts FROM SphinxTable)
sql_query_killlist = SELECT id FROM documents WHERE id <= (SELECT maxID from SphinxTable) AND updated > (SELECT updatedts FROM SphinxTable) 
```

注意平等的变化。您需要主要的文件，在您的杀戮清单中。但是您也只希望自上次重新索引以来更新文档。

# oracle - PL/SQL 游标在 while

> ID：12405171
> 
> 赞同：1
> 
> 时间：2012-09-13T11:25:47.017
> 
> 标签：oracle, plsql

这就是我想要实现的目标：

1.  定义一个游标

2.  它返回我的行列表

3.  使用行做一些修改表

4.  重复 2 和 3 直到光标没有返回结果。

这就是我到目前为止所做的

```
DECLARE
  CURSOR c1 IS
    [My SQL HERE];

BEGIN

   FOR r1 in c1 LOOP
   [modify tables]

END; 
```

问题是我把时间放在哪里？我会在 for 循环之前这样做。但是 pl/sql 中描述 c1 的语法是什么？

请注意，在 c1 完全完成后，我需要重新运行光标代码。进行另一次迭代。因为结果会不一样。这就是为什么我需要一段时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:49:37.353

答案是将“while”与“for”结合起来。显然，仅当您想多次运行游标时，因为您正在更新/更改游标内部的某些内容，并且条件发生了变化，因此您需要再次重新运行游标。

这是基本结构：

```
 DECLARE
  CURSOR c1 IS
    [My SQL HERE];

BEGIN

   WHILE CONDITION LOOP

   FOR r1 in c1 LOOP
   [modify tables]
   END LOOP; -- for loop

   [Check The Condition]

   END LOOP; -- while loop

 END; 
```

例如

```
 DECLARE

  counts NUMBER := -1;
  CURSOR c1 IS
    [Statement Here];

BEGIN

   WHILE count != 0 LOOP

   FOR r1 in c1 LOOP
   [modify tables]
   END LOOP; -- for loop

   SELECT count(*) ...... INTO counts

   END LOOP; -- while loop

END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:34:16.830

您不需要单独的`WHILE`. 将[`FOR ... LOOP`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#CIHCGJAD)遍历游标返回的行：

```
FOR r1 IN c1 LOOP
    -- r1 is the current row from the cursor
END LOOP; 
```

有两种处理游标的方法，所以这可能会引起混淆；[另一种方法](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#BABJIICC)是：

```
OPEN c1;
LOOP
    FETCH c1 INTO r1; -- where r1 is declared
    EXIT WHEN c1%NOTFOUND;
    -- do something with r1
END LOOP;
CLOSE c1; 
```

就个人而言，我通常发现`FOR ... LOOP`语法更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:32:22.177

首先，我建议考虑没有游标的常规更新，因为它们中最好的部分是较慢的。我也不明白你想用 WHILE 代替 FOR 什么。它们的工作方式几乎相似。无论如何，最好的建议来源是 Oracle 的文档[http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems020.htm](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems020.htm)

# apache - 服务器无法接受请求

> ID：12405174
> 
> 赞同：-1
> 
> 时间：2012-09-13T11:25:51.577
> 
> 标签：apache, ps

我以前的网站运行良好。但现在它无法连接到服务器（我相信这是问题所在）。但奇怪的是，无法连接到服务器的消息没有到来并且它继续连接......无限时间（已经 3 小时）。然后我发现 apache 处于睡眠模式。这会导致问题吗？

这是输出`ps aux`

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0  19204   744 ?        Ss   Aug07   0:01 /sbin/init
root         2  0.0  0.0      0     0 ?        S    Aug07   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S    Aug07   0:00 [migration/0]
root         4  0.0  0.0      0     0 ?        S    Aug07   7:15 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S    Aug07   0:00 [migration/0]
root         6  0.0  0.0      0     0 ?        S    Aug07   0:00 [watchdog/0]
root         7  0.0  0.0      0     0 ?        S    Aug07   0:05 [events/0]
root         8  0.0  0.0      0     0 ?        S    Aug07   0:00 [cpuset]
root         9  0.0  0.0      0     0 ?        S    Aug07   0:00 [khelper]
root        10  0.0  0.0      0     0 ?        S    Aug07   0:00 [netns]
root        11  0.0  0.0      0     0 ?        S    Aug07   0:00 [async/mgr]
root        12  0.0  0.0      0     0 ?        S    Aug07   0:00 [pm]
root        13  0.0  0.0      0     0 ?        S    Aug07   0:00 [sync_supers]
root        14  0.0  0.0      0     0 ?        S    Aug07   0:00 [bdi-default]
root        15  0.0  0.0      0     0 ?        S    Aug07   0:00 [kintegrityd/0]
root        16  0.0  0.0      0     0 ?        S    Aug07   0:24 [kblockd/0]
root        17  0.0  0.0      0     0 ?        S    Aug07   0:00 [kacpid]
root        18  0.0  0.0      0     0 ?        S    Aug07   0:00 [kacpi_notify]
root        19  0.0  0.0      0     0 ?        S    Aug07   0:00 [kacpi_hotplug]
root        20  0.0  0.0      0     0 ?        S    Aug07   0:00 [ata/0]
root        21  0.0  0.0      0     0 ?        S    Aug07   0:00 [ata_aux]
root        22  0.0  0.0      0     0 ?        S    Aug07   0:00 [ksuspend_usbd]
root        23  0.0  0.0      0     0 ?        S    Aug07   0:00 [khubd]
root        24  0.0  0.0      0     0 ?        S    Aug07   0:00 [kseriod]
root        25  0.0  0.0      0     0 ?        S    Aug07   0:00 [md/0]
root        26  0.0  0.0      0     0 ?        S    Aug07   0:00 [md_misc/0]
root        27  0.0  0.0      0     0 ?        S    Aug07   0:00 [khungtaskd]
root        28  0.0  0.0      0     0 ?        S    Aug07   0:19 [kswapd0]
root        29  0.0  0.0      0     0 ?        SN   Aug07   0:00 [ksmd]
root        30  0.0  0.0      0     0 ?        SN   Aug07   1:36 [khugepaged]
root        31  0.0  0.0      0     0 ?        S    Aug07   0:00 [aio/0]
root        32  0.0  0.0      0     0 ?        S    Aug07   0:00 [crypto/0]
root        37  0.0  0.0      0     0 ?        S    Aug07   0:00 [kthrotld/0]
root        38  0.0  0.0      0     0 ?        S    Aug07   0:00 [pciehpd]
root        40  0.0  0.0      0     0 ?        S    Aug07   0:00 [kpsmoused]
root        41  0.0  0.0      0     0 ?        S    Aug07   0:00 [usbhid_resumer]
root        71  0.0  0.0      0     0 ?        S    Aug07   0:00 [kstriped]
root       203  0.0  0.0      0     0 ?        S    Aug07   0:00 [scsi_eh_0]
root       206  0.0  0.0      0     0 ?        S    Aug07   0:00 [scsi_eh_1]
root       213  0.0  0.0      0     0 ?        S    Aug07   0:00 [mpt_poll_0]
root       214  0.0  0.0      0     0 ?        S    Aug07   0:00 [mpt/0]
root       215  0.0  0.0      0     0 ?        S    Aug07   0:00 [scsi_eh_2]
root       317  0.0  0.0      0     0 ?        S    Aug07   0:00 [kdmflush]
root       319  0.0  0.0      0     0 ?        S    Aug07   0:00 [kdmflush]
root       338  0.0  0.0      0     0 ?        S    Aug07   4:30 [jbd2/dm-0-8]
root       339  0.0  0.0      0     0 ?        S    Aug07   0:00 [ext4-dio-unwrit]
root       411  0.0  0.0  11060   224 ?        S<s  Aug07   0:00 /sbin/udevd -d
root       591  0.0  0.0      0     0 ?        S    Aug07   0:00 [vmmemctl]
root       732  0.0  0.0      0     0 ?        S    Aug07   0:00 [jbd2/sda1-8]
root       733  0.0  0.0      0     0 ?        S    Aug07   0:00 [ext4-dio-unwrit]
root       770  0.0  0.0      0     0 ?        S    Aug07   0:00 [kauditd]
root       907  0.0  0.0      0     0 ?        S    Aug07   0:02 [flush-253:0]
root       963  0.0  0.0  93180   528 ?        S<sl Aug07   0:00 auditd
root       979  0.0  0.0 248680  1132 ?        Sl   Aug07   0:04 /sbin/rsyslogd -i /var/run/syslogd.pid -c 4
dbus       991  0.0  0.0  31740   348 ?        Ssl  Aug07   0:00 dbus-daemon --system
root      1023  0.0  0.0  64032   456 ?        Ss   Aug07   0:01 /usr/sbin/sshd
root      1031  0.0  0.0  22076   592 ?        Ss   Aug07   0:00 xinetd -stayalive -pidfile /var/run/xinetd.pid
root      1107  0.0  0.0  78652   744 ?        Ss   Aug07   0:01 /usr/libexec/postfix/master
postfix   1116  0.0  0.0  78904   852 ?        S    Aug07   0:00 qmgr -l -t fifo -u
qpidd     1129  0.0  0.0 234596  1488 ?        Ssl  Aug07   1:54 /usr/sbin/qpidd --data-dir /var/lib/qpidd --daemon
root      1181  0.0  0.0 117176   532 ?        Ss   Aug07   0:04 crond
root      1217  0.0  0.0 108152   412 ?        S    Aug07   0:00 /bin/sh /usr/bin/mysqld_safe --datadir=/var/lib/mysql --socket=/var/lib/mysql/m
mysql     1306  0.0  1.8 792636 72640 ?        Sl   Aug07   6:51 /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql --user=mysql --log-
root      1334  0.0  0.1 739156  5520 ?        Ssl  Aug07   0:34 /usr/sbin/shibd -p /var/run/shibboleth/shibd.pid -f -w 30
root      1355  0.0  0.0   4048   272 tty2     Ss+  Aug07   0:00 /sbin/mingetty /dev/tty2
root      1357  0.0  0.0   4048   272 tty3     Ss+  Aug07   0:00 /sbin/mingetty /dev/tty3
root      1360  0.0  0.0  12336   264 ?        S<   Aug07   0:00 /sbin/udevd -d
root      1361  0.0  0.0  12336   240 ?        S<   Aug07   0:00 /sbin/udevd -d
root      1362  0.0  0.0   4048   272 tty4     Ss+  Aug07   0:00 /sbin/mingetty /dev/tty4
root      1364  0.0  0.0   4048   272 tty5     Ss+  Aug07   0:00 /sbin/mingetty /dev/tty5
root      1366  0.0  0.0   4048   272 tty6     Ss+  Aug07   0:00 /sbin/mingetty /dev/tty6
root      1394  0.0  0.0 574892   436 ?        Sl   Aug07   0:00 /usr/sbin/console-kit-daemon --no-daemon
root      1495  0.0  0.0   4048   264 tty1     Ss+  Aug07   0:00 /sbin/mingetty /dev/tty1
root      7665  0.0  0.1 296304  6244 ?        Ss   Aug16   2:33 /usr/sbin/httpd
apache   10298  0.0  0.2 457756 10472 ?        Sl   Sep07   3:35 /usr/sbin/httpd
apache   11684  0.0  0.5 465352 20708 ?        Sl   Sep12   0:02 /usr/sbin/httpd
apache   14570  0.0  0.7 475592 30628 ?        Sl   Sep12   0:02 /usr/sbin/httpd
apache   14877  0.0  0.5 467868 22696 ?        Sl   Sep12   0:01 /usr/sbin/httpd
apache   15128  0.0  0.4 464628 19096 ?        Sl   Sep12   0:01 /usr/sbin/httpd
apache   15151  0.0  0.4 464624 18980 ?        Sl   Sep12   0:01 /usr/sbin/httpd
apache   15169  0.0  0.6 470268 24636 ?        Sl   Sep12   0:01 /usr/sbin/httpd
apache   15238  0.0  0.4 464628 19108 ?        Sl   Sep12   0:01 /usr/sbin/httpd
apache   15266  0.0  0.4 464624 18920 ?        Sl   Sep12   0:02 /usr/sbin/httpd
apache   15312  0.0  0.4 464624 18724 ?        Sl   Sep12   0:01 /usr/sbin/httpd
apache   15427  0.0  0.6 470268 24644 ?        Sl   Sep12   0:00 /usr/sbin/httpd
apache   15814  0.0  0.4 464884 19296 ?        Sl   00:14   0:01 /usr/sbin/httpd
apache   15830  0.0  0.4 464628 19028 ?        Sl   00:24   0:00 /usr/sbin/httpd
apache   15859  0.0  0.7 475524 30320 ?        Sl   00:31   0:00 /usr/sbin/httpd
apache   15897  0.0  0.6 471876 26056 ?        Sl   00:42   0:00 /usr/sbin/httpd
apache   15926  0.0  0.4 464884 18936 ?        Sl   00:46   0:01 /usr/sbin/httpd
apache   15970  0.0  0.6 470268 24216 ?        Sl   00:57   0:00 /usr/sbin/httpd
apache   16010  0.0  0.4 464884 18912 ?        Sl   01:04   0:00 /usr/sbin/httpd
apache   16023  0.0  0.3 457756 12300 ?        Sl   01:05   0:02 /usr/sbin/httpd
apache   16176  0.0  0.4 464624 18568 ?        Sl   02:01   0:01 /usr/sbin/httpd
apache   16213  0.0  0.4 464624 18900 ?        Sl   02:22   0:01 /usr/sbin/httpd
apache   16240  0.0  0.4 464884 18828 ?        Sl   02:35   0:00 /usr/sbin/httpd
root     16313  0.0  0.0  19372   968 ?        Ss   03:01   0:00 /usr/sbin/anacron -s
apache   16361  0.0  0.4 464624 18572 ?        Sl   03:17   0:00 /usr/sbin/httpd
apache   16364  0.0  0.4 464884 19284 ?        Sl   03:19   0:01 /usr/sbin/httpd
root     16421  0.0  0.0   9180  1300 ?        SN   03:37   0:00 /bin/bash /usr/bin/run-parts /etc/cron.daily
root     16426  0.0  0.0   9312  1404 ?        SN   03:37   0:00 /bin/bash /etc/cron.daily/backupdb
root     16427  0.0  0.0   9064   820 ?        SN   03:37   0:00 awk -v progname /etc/cron.daily/backupdb progname {?????   print progname ":\n"
root     16434  0.0  0.0  50776  2420 ?        SN   03:37   0:00 mysqldump --opt --quote-names -u root -px xxx inamiriziv_dokeos_user personal_a
root     16435  0.0  0.0   4280   536 ?        SN   03:37   0:00 gzip --rsyncable
apache   16484  0.0  0.2 457584 11432 ?        Sl   03:55   0:04 /usr/sbin/httpd
apache   16492  0.0  0.4 464884 19320 ?        Sl   03:58   0:02 /usr/sbin/httpd
apache   16496  0.0  0.4 464624 18704 ?        Sl   04:00   0:02 /usr/sbin/httpd
apache   16529  0.0  0.6 470268 24608 ?        Sl   04:06   0:02 /usr/sbin/httpd
apache   16533  0.0  0.4 464624 18532 ?        Sl   04:10   0:00 /usr/sbin/httpd
apache   16536  0.0  0.4 464884 18908 ?        Sl   04:10   0:00 /usr/sbin/httpd
apache   16556  0.0  0.4 464884 18924 ?        Sl   04:18   0:02 /usr/sbin/httpd
apache   16563  0.0  0.3 457756 12384 ?        Sl   04:19   0:07 /usr/sbin/httpd
apache   16598  0.0  0.3 457756 12344 ?        Sl   04:28   0:02 /usr/sbin/httpd
apache   16633  0.0  0.4 464624 18492 ?        Sl   04:41   0:00 /usr/sbin/httpd
apache   16637  0.0  0.6 470268 24300 ?        Sl   04:41   0:02 /usr/sbin/httpd
apache   16654  0.0  0.3 457756 12296 ?        Sl   04:47   0:02 /usr/sbin/httpd
apache   16665  0.0  0.6 470268 24308 ?        Sl   04:50   0:03 /usr/sbin/httpd
apache   16738  0.0  0.6 470268 24312 ?        Sl   05:10   0:02 /usr/sbin/httpd
  apache   17388  0.0  0.2 457584 11440 ?        Sl   08:56   0:01 /usr/sbin/httpd
apache   17391  0.0  0.3 457756 12296 ?        Sl   08:57   0:00 /usr/sbin/httpd
apache   17397  0.0  0.3 457756 12312 ?        Sl   08:59   0:00 /usr/sbin/httpd
apache   17401  0.0  0.3 457756 12284 ?        Sl   09:00   0:00 /usr/sbin/httpd
apache   17420  0.0  0.2 457584 11436 ?        Sl   09:04   0:01 /usr/sbin/httpd
apache   17426  0.0  0.3 457756 12324 ?        Sl   09:07   0:01 /usr/sbin/httpd
apache   17431  0.0  0.3 457756 12276 ?        Sl   09:08   0:03 /usr/sbin/httpd
apache   17434  0.0  0.3 457756 12308 ?        Sl   09:08   0:00 /usr/sbin/httpd
apache   17437  0.0  0.2 457584 11440 ?        Sl   09:09   0:01 /usr/sbin/httpd
apache   17442  0.0  0.2 457584 11436 ?        Sl   09:10   0:01 /usr/sbin/httpd
apache   17445  0.0  0.3 457756 12328 ?        Sl   09:11   0:01 /usr/sbin/httpd
apache   17449  0.0  0.3 457756 12292 ?        Sl   09:12   0:01 /usr/sbin/httpd
apache   17454  0.0  0.2 457584 11444 ?        Sl   09:15   0:01 /usr/sbin/httpd
apache   17457  0.0  0.2 457584 11436 ?        Sl   09:15   0:01 /usr/sbin/httpd
apache   17461  0.0  0.3 457756 12304 ?        Sl   09:16   0:01 /usr/sbin/httpd
apache   17465  0.0  0.2 457584 11444 ?        Sl   09:18   0:01 /usr/sbin/httpd
apache   17468  0.0  0.2 457584 11436 ?        Sl   09:18   0:01 /usr/sbin/httpd
apache   17473  0.0  0.4 464884 18940 ?        Sl   09:19   0:00 /usr/sbin/httpd
apache   17476  0.0  0.4 464628 18736 ?        Sl   09:20   0:00 /usr/sbin/httpd
apache   17479  0.0  0.2 457584 11440 ?        Sl   09:20   0:01 /usr/sbin/httpd
apache   17483  0.0  0.2 457584 11416 ?        Sl   09:21   0:00 /usr/sbin/httpd
apache   17486  0.0  0.3 457756 12296 ?        Sl   09:21   0:01 /usr/sbin/httpd
apache   17489  0.0  0.4 464884 18928 ?        Sl   09:21   0:00 /usr/sbin/httpd
apache   17492  0.0  0.2 457584 11260 ?        Sl   09:22   0:00 /usr/sbin/httpd
apache   17496  0.0  0.3 457756 12372 ?        Sl   09:22   0:01 /usr/sbin/httpd
apache   17500  0.0  0.2 457584 11428 ?        Sl   09:23   0:00 /usr/sbin/httpd
apache   17504  0.0  0.2 457584 11432 ?        Sl   09:25   0:00 /usr/sbin/httpd
apache   17509  0.0  0.3 457756 12336 ?        Sl   09:27   0:01 /usr/sbin/httpd
apache   17513  0.0  0.2 457584 11436 ?        Sl   09:29   0:01 /usr/sbin/httpd
apache   17517  0.0  0.2 457584 11448 ?        Sl   09:31   0:00 /usr/sbin/httpd
apache   17520  0.0  0.3 457584 12128 ?        Sl   09:32   0:00 /usr/sbin/httpd
apache   17525  0.0  0.4 464884 18960 ?        Sl   09:34   0:00 /usr/sbin/httpd
apache   17529  0.0  0.2 457584 11420 ?        Sl   09:36   0:00 /usr/sbin/httpd
apache   17533  0.0  0.2 457584 11436 ?        Sl   09:38   0:00 /usr/sbin/httpd
apache   17537  0.0  0.2 457584 11436 ?        Sl   09:38   0:00 /usr/sbin/httpd
apache   17542  0.0  0.4 464884 18840 ?        Sl   09:40   0:00 /usr/sbin/httpd
apache   17546  0.0  0.3 457756 12320 ?        Sl   09:41   0:00 /usr/sbin/httpd
apache   17550  0.0  0.2 457584 11440 ?        Sl   09:42   0:00 /usr/sbin/httpd
apache   17554  0.0  0.2 457584 11436 ?        Sl   09:43   0:00 /usr/sbin/httpd
apache   17557  0.0  0.2 457584 11436 ?        Sl   09:44   0:00 /usr/sbin/httpd
apache   17560  0.0  0.2 457584 11428 ?        Sl   09:44   0:01 /usr/sbin/httpd
apache   17568  0.0  0.4 464884 18824 ?        Sl   09:48   0:00 /usr/sbin/httpd
apache   17572  0.0  0.2 457584 11428 ?        Sl   09:48   0:00 /usr/sbin/httpd
apache   17575  0.0  0.2 457584 11428 ?        Sl   09:48   0:01 /usr/sbin/httpd
apache   17583  0.0  0.2 457584 11432 ?        Sl   09:50   0:00 /usr/sbin/httpd
apache   17586  0.0  0.3 457756 12264 ?        Sl   09:50   0:00 /usr/sbin/httpd
apache   17589  0.0  0.2 457584 11420 ?        Sl   09:51   0:00 /usr/sbin/httpd
apache   17597  0.0  0.2 457584 11420 ?        Sl   09:53   0:02 /usr/sbin/httpd
apache   17600  0.0  0.3 457756 12376 ?        Sl   09:54   0:00 /usr/sbin/httpd
apache   17604  0.0  0.2 457584 11436 ?        Sl   09:55   0:00 /usr/sbin/httpd
apache   17610  0.0  0.2 457584 11420 ?        Sl   09:59   0:00 /usr/sbin/httpd
apache   17615  0.0  0.2 457584 11424 ?        Sl   10:00   0:00 /usr/sbin/httpd
apache   17618  0.0  0.4 464884 19288 ?        Sl   10:00   0:00 /usr/sbin/httpd
apache   17635  0.0  0.2 457584 11416 ?        Sl   10:01   0:00 /usr/sbin/httpd
apache   17639  0.0  0.2 457584 11440 ?        Sl   10:02   0:00 /usr/sbin/httpd
apache   17643  0.0  0.2 457584 11448 ?        Sl   10:03   0:00 /usr/sbin/httpd
apache   17648  0.0  0.4 464884 18868 ?        Sl   10:06   0:00 /usr/sbin/httpd
apache   17651  0.0  0.2 457584 11416 ?        Sl   10:07   0:00 /usr/sbin/httpd
apache   17655  0.0  0.3 457756 12268 ?        Sl   10:08   0:01 /usr/sbin/httpd
apache   17658  0.0  0.2 457584 11440 ?        Sl   10:08   0:00 /usr/sbin/httpd
apache   17663  0.0  0.3 457756 12292 ?        Sl   10:11   0:00 /usr/sbin/httpd
apache   17666  0.0  0.2 457584 11432 ?        Sl   10:11   0:00 /usr/sbin/httpd
apache   17672  0.0  0.2 457584 11428 ?        Sl   10:14   0:00 /usr/sbin/httpd
apache   17676  0.0  0.2 457584 11424 ?        Sl   10:16   0:00 /usr/sbin/httpd
apache   17680  0.0  0.4 464884 18884 ?        Sl   10:16   0:00 /usr/sbin/httpd
apache   17683  0.0  0.2 457584 11420 ?        Sl   10:19   0:00 /usr/sbin/httpd
apache   17689  0.0  0.2 457584 11424 ?        Sl   10:23   0:00 /usr/sbin/httpd
apache   17692  0.0  0.2 457584 11428 ?        Sl   10:23   0:00 /usr/sbin/httpd
apache   17696  0.0  0.3 457584 11980 ?        Sl   10:25   0:00 /usr/sbin/httpd
apache   17699  0.0  0.2 457584 11436 ?        Sl   10:25   0:00 /usr/sbin/httpd
apache   17704  0.0  0.2 457584 11232 ?        Sl   10:27   0:00 /usr/sbin/httpd
apache   17711  0.0  0.2 457584 11412 ?        Sl   10:30   0:01 /usr/sbin/httpd
postfix  17714  0.0  0.0  78732  3216 ?        S    10:30   0:00 pickup -l -t fifo -u
apache   17715  0.0  0.2 457584 11436 ?        Sl   10:30   0:00 /usr/sbin/httpd
apache   17718  0.0  0.2 457584 11428 ?        Sl   10:31   0:00 /usr/sbin/httpd
apache   17726  0.0  0.2 457584 11420 ?        Sl   10:36   0:00 /usr/sbin/httpd
apache   17731  0.0  0.2 457584 11168 ?        Sl   10:37   0:00 /usr/sbin/httpd
apache   17734  0.0  0.4 464884 18796 ?        Sl   10:37   0:00 /usr/sbin/httpd
apache   17743  0.0  0.2 457584 11220 ?        Sl   10:43   0:00 /usr/sbin/httpd
apache   17746  0.0  0.2 457584 11172 ?        Sl   10:44   0:00 /usr/sbin/httpd
apache   17750  0.0  0.3 457756 12288 ?        Sl   10:44   0:00 /usr/sbin/httpd
apache   17753  0.0  0.2 457584 11220 ?        Sl   10:45   0:00 /usr/sbin/httpd
apache   17756  0.0  0.2 457584 11424 ?        Sl   10:46   0:00 /usr/sbin/httpd
apache   17763  0.0  0.3 457756 12204 ?        Sl   10:51   0:00 /usr/sbin/httpd
apache   17766  0.0  0.2 457584 11428 ?        Sl   10:51   0:00 /usr/sbin/httpd
apache   17771  0.0  0.2 457584 11180 ?        Sl   10:54   0:00 /usr/sbin/httpd
apache   17774  0.0  0.2 457584 11416 ?        Sl   10:54   0:00 /usr/sbin/httpd
apache   17779  0.0  0.2 457584 11428 ?        Sl   10:58   0:00 /usr/sbin/httpd
apache   17784  0.0  0.2 457584 11380 ?        Sl   11:00   0:00 /usr/sbin/httpd
apache   17805  0.0  0.2 457584 11380 ?        Sl   11:05   0:00 /usr/sbin/httpd
apache   17818  0.0  0.2 457584 11156 ?        Sl   11:11   0:00 /usr/sbin/httpd
apache   17823  0.0  0.2 457584 11416 ?        Sl   11:12   0:00 /usr/sbin/httpd
apache   17827  0.0  0.2 457584 11412 ?        Sl   11:13   0:00 /usr/sbin/httpd
apache   17831  0.0  0.2 457584 11132 ?        Sl   11:13   0:00 /usr/sbin/httpd
root     17835  0.0  0.0  97780  3792 ?        S    11:14   0:00 sshd: smaity [priv]
smaity   17839  0.0  0.0  97780  1748 ?        S    11:15   0:00 sshd: smaity@pts/0
smaity   17840  0.0  0.0 108288  1928 pts/0    Ss   11:15   0:00 -bash
apache   17858  0.0  0.4 464884 18856 ?        Sl   11:16   0:00 /usr/sbin/httpd
apache   17862  0.0  0.3 457584 11904 ?        Sl   11:17   0:00 /usr/sbin/httpd
apache   17866  0.0  0.2 457584 11212 ?        Sl   11:19   0:00 /usr/sbin/httpd
apache   17871  0.0  0.2 457584 11144 ?        Sl   11:20   0:00 /usr/sbin/httpd
apache   17875  0.0  0.2 457584 11416 ?        Sl   11:23   0:00 /usr/sbin/httpd
apache   17880  0.0  0.2 457584 11408 ?        Sl   11:23   0:00 /usr/sbin/httpd
apache   17883  0.0  0.2 457584 11412 ?        Sl   11:24   0:00 /usr/sbin/httpd
apache   17888  0.0  0.2 457584 11412 ?        Sl   11:25   0:00 /usr/sbin/httpd
apache   17891  0.0  0.2 457584 11140 ?        Sl   11:26   0:00 /usr/sbin/httpd
apache   17899  0.0  0.2 457584 10984 ?        Sl   11:32   0:00 /usr/sbin/httpd
apache   17902  0.0  0.2 457584 11680 ?        Sl   11:33   0:00 /usr/sbin/httpd
apache   17906  0.0  0.2 457584 10980 ?        Sl   11:33   0:00 /usr/sbin/httpd 
```

**更新：**

的输出`wget http://mydomain.com/`

```
--2012-09-13 13:35:17--  http://mydomain.com/
Resolving mydomain.com... 127.0.0.1
Connecting to mydomain.com|127.0.0.1|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 45 [text/html]
Saving to: “index.html”

 0% [                                                                                                       ] 0           --.-K/s   in 0s      

Cannot write to “index.html” (No space left on device). 
```

的输出`df -h`

```
 Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_inamivm-lv_root
                       18G   17G     0 100% /
tmpfs                 1.9G     0  1.9G   0% /dev/shm
/dev/sda1             485M   71M  389M  16% /boot 
```

的输出

```
wget -O /dev/null http://127.0.0.1/

--2012-09-13 13:47:49--  http://127.0.0.1/
Connecting to 127.0.0.1:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 45 [text/html]
Saving to: “/dev/null”

100%[======================================================================================================>] 45          --.-K/s   in 0s      

2012-09-13 13:47:54 (8.57 MB/s) - “/dev/null” saved [45/45] 
```

您能否建议我可以清理的任何特定的不必要文件以将所有内容恢复到正常状态（暂时）。（即任何日志或档案或任何东西）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:14:34.377

> 无法写入“index.html”（设备上没有剩余空间）。

看来您的磁盘已满。

运行一个

```
du -sk /* | sort -n 
```

查看您的空间的去向。也可能是“已删除”的 inode，如果是这样，您需要通过检查 /proc 文件系统来检查它们的位置。要使空间重新出现，您必须重新启动持有该文件描述符的任何进程。

对于像您这样的系统，通常空间“消失”在：

*   /var/log 或其他地方的未旋转日志
*   轮换和归档，但未删除（即归档到其他地方）日志文件
*   /tmp 中的临时文件
*   “无论您的会话保存目录在哪里”中未收集的 Web 会话
*   “无论您的临时上传路径在哪里”中的临时 Web 上传文件
*   MySQL 二进制日志
*   旧邮件通知（例如 cron 收据）。

很抱歉，但如果不查看服务器配置，就没有什么可以做的了。

**作为紧急程序**

注意：在执行以下某些任务时，您会注意到空间似乎消失了。即，您删除了一个 50 Mb 的文件，可用空间仍然为零。这意味着某些进程最终会转储并将其数据保存到磁盘。只要这种情况一直发生，如果可以避免，请不要重新启动系统（仍在RAM中的数据将丢失），并且不要停止任何进程。

*   停止 Apache（apachectl stop、apache2ctl stop）。这将防止系统负载增加，这是最紧迫的事情，并可能释放更多的临时空间。停止 Apache 不会有丢失数据的风险（可能是一些日志，但这是可以生存的）。
*   检查 /tmp 目录是否有不需要的文件（**不要**只是删除所有内容：检查它）
*   用命令检查邮件队列`mailq`，以防万一
*   验证 /var/spool/mail/somewhere 中没有无用的邮件（如果有，您可能可以将其删除）
*   如果站点是 PHP，请检查 PHP.ini 以了解临时文件上传和会话的位置
    *   删除所有会话文件（通常是 phpsess_*）
    *   删除所有临时上传文件
*   检查所有 /var/log/ 日志文件
    *   删除无用和/或非常旧的
    *   使用 FTP 或 scp 将任何 .gz 或 .bz2 文件放在其他地方
    *   检查没有未旋转的日志文件（日志真的很大）。
        *   如果有，在紧要关头，用 gzip 压缩它们 -**确保你有足够的可用空间**：压缩 1 GB 日志文件最好至少有 200 M 可用空间。之后，您将拥有整个 GB 的空闲空间，但与此同时，您*需要*该空闲缓冲区空间。
        *   **以后记得**正确配置`logrotate`。
*   仅当您现在有足够的空间（大约相同大小的数据库）时：
    *   停止 MySQL 并重新启动它，以刷新数据、释放临时空间并稳定启动
    *   验证没有由于空间不可用而导致的损坏
    *   如有必要和可能，清除主日志（请参阅 MySQL 手册/站点）
    *   如果您*没有*足够的空间，请选择最大的 Apache 日志并通过 FTP 或 SCP 将它们移到另一台服务器上。不要删除那些日志，*尤其*是错误日志。然后做 MySQL 停止重启的事情；一个 MySQL 一直在一个完整的系统上运行是一件坏事。
*   检查 Apache 虚拟主机*及其日志*。
*   也许对解决这种紧急情况没有用，但检查大`error.log`文件。此命令将告诉您七个（*您可以要求更多*）最常见的错误，这些错误不仅是对大的、占用磁盘的日志文件的原因，而且也是网站问题的征兆（或试图*制造*问题）：`cut -f4 -d']' < /full/path/of/the/apache/error.log | sort | uniq -c | sort -rn | head -n 7`
*   检查所有虚拟主机目录`du`：如果其中一些非常大，请调查原因（旧备份？无用的媒体文件？*黑客安装的流氓恶意软件存储库？*）。同样，您可以获得空间，但也会发现可能的问题。
*   重启阿帕奇。
*   运行这个命令：

    ```
    ls -la /proc/*/fd/* | grep deleted 
    ```

*   如果您看到任何“已删除”文件，例如“/proc/3297/fd/4”，请使用 ps 检查哪个进程的 PID 为 3297 并尝试重新启动它，如果可能并且这样做是否安全。这将释放被“临时”删除的 inode 占用的任何空间。

最后，请尝试获得更大的磁盘:-)

应定期执行上述某些步骤（例如检查日志文件），以确保不会出现新问题。

（不，不幸的是，这份清单远非详尽无遗）

# qooxdoo - 如何整合qooxdoo和PubNub？

> ID：12405175
> 
> 赞同：2
> 
> 时间：2012-09-13T11:25:52.157
> 
> 标签：qooxdoo, pubnub

PubNub 通过调用您指定的回调函数来工作，如下所示： [http ://www.pubnub.com/account-javascript-api-include](http://www.pubnub.com/account-javascript-api-include)

如何将其与 Qooxdoo JS 框架正确集成？Qooxdoo 应用程序如下所示： [http ://demo.qooxdoo.org/current/playground/#Hello%20World-ria](http://demo.qooxdoo.org/current/playground/#Hello%20World-ria)

如何加载外部 JS 库并使全局“PUBNUB”可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:23:54.233

您可以轻松地使用[add-script](http://manual.qooxdoo.org/2.0.x/pages/tool/generator_config_ref.html#add-script)配置键，在您的应用程序之前加载 pubnub-*.min.js。然后`PUBNUB.subscribe()`在适合您的 qooxdoo 代码中的任何位置添加调用，例如在`main`主类的方法中或在 GUI 元素（如按钮）的事件处理程序中。

编辑：

要添加更多详细信息：

*   您`add-script`在 config.json 的“作业”部分添加密钥。
*   由于您需要源版本和构建版本中的脚本，您应该将其添加到`source-script`作业`build-script`中，或者您为密钥创建一个单独的作业并使用它扩展源脚本和构建脚本（我会这样做） .
*   关于工作跟踪的警告只是提醒那些无意中将预定义工作名称用于自定义工作的人。但这正是你想要的，`config-warnings`如果你愿意，你可以用钥匙使警告静音。但这不会影响构建的应用程序。
*   至于 PUBNUB 的定义性，您可能会遇到时间问题，即当 pubnub 脚本文件尚未完成加载时，您的使用 PUBNUB 的代码已经执行。在您正在运行的应用程序中，首先检查命令行（例如 Firebug 或 Chrome 开发人员工具）是否已知 PUBNUB 符号。如果是，则加载成功。在这种情况下，您可能希望延迟对代码中 PUBNUB 符号的访问，例如将其放置在按钮的执行侦听器中。

这是可能的 config.json 条目的片段：

```
...
"jobs" : {
   "add-pubnub" : {
       "add-script" : [
         {
           "uri": "http://cdn.pubnub.com/pubnub-3.3.min.js"
         }
       ]
   },
   "source-script" : {
       "extend" : ["add-pubnub"]
   },
   "build-script" : {
       "extend" : ["add-pubnub"]
   }
... 
```

# java - 在 JNI 客户端应用程序中设置较小的 JVM 堆大小

> ID：12405178
> 
> 赞同：1
> 
> 时间：2012-09-13T11:26:12.960
> 
> 标签：java, postgresql, jvm

我正在尝试调试 pl/java 的问题，这是 PostgreSQL 的一种过程语言。我在 Linux 服务器上运行这个堆栈。

本质上，每个 Postgres 后端（连接进程）都必须启动自己的 JVM，并使用 JNI 来启动。这通常是 pl/java 的一个主要限制，但它有一个特别讨厌的表现。

如果本机内存耗尽（我意识到这实际上可能不是由于 malloc() 返回 NULL，但效果大致相同），则此故障处理得相当差。由于“本机内存耗尽”，它会导致 OutOfMemoryError。这会导致 Postgres 后端的段错误，源自 libjvm.so 和一个 javacore 文件，内容如下：

```
0SECTION       TITLE subcomponent dump routine
NULL           ===============================
1TISIGINFO     Dump Event "systhrow" (00040000) Detail "java/lang/OutOfMemoryError" "Failed to create a thread: retVal -1073741830, errno 11" received
1TIDATETIME    Date:                 2012/09/13 at 16:36:01
1TIFILENAME    Javacore filename:    /var/lib/PostgreSQL/9.1/data/javacore.20120913.104611.24742.0002.txt
***SNIP*** 
```

现在，有一些定义合理的方法可以改善 Java 的这些类型的问题，如下所述：

[http://www.ibm.com/developerworks/java/library/j-nativememory-linux/](http://www.ibm.com/developerworks/java/library/j-nativememory-linux/)

我认为如果我可以将最大堆大小设置为远低于默认值的值，那将特别有效。通常，可以按照以下方式做一些事情：

> 堆的大小由 Java 命令行使用 -Xmx 和 -Xms 选项控制（mx 是堆的最大大小，ms 是初始大小）。尽管逻辑堆（积极使用的内存区域）可以根据堆上的对象数量和在 GC 中花费的时间量增长和缩小，但使用的本机内存量保持不变，并且由 - Xmx 值：最大堆大小。大多数 GC 算法依赖于将堆分配为连续的内存板，因此当堆需要扩展时，不可能分配更多的本机内存。所有堆内存必须预先保留。

但是，我不知道如何遵循这些步骤以使 pl/java 的 JNI 初始化初始化具有较小堆的 JVM；我不能很好地将这些命令行参数传递给 Postgres。所以，我的问题是，如何设置最大堆大小或在这种情况下专门控制这些问题？这似乎是 pl/java 的一个普遍问题，所以我希望能够与 Postgres 社区分享我最终得到的任何解决方案。

请注意，我对 JVM 内部没有经验，并且通常不熟悉 Java。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:56:10.073

根据[本演示文稿中的幻灯片 19，](http://www.slideshare.net/petereisentraut/postgresql-and-pljava) postgresql.conf 可以具有参数 pljava.vmoptions，您可以在其中将参数传递给 JVM。

# actionscript-3 - 在 as3 中使用位图数据（带矩阵）绘制位图

> ID：12405180
> 
> 赞同：0
> 
> 时间：2012-09-13T11:26:27.050
> 
> 标签：actionscript-3

我想把我的舞台画成一个新的位图。
如何剪切舞台的顶部栏（顶部栏的高度为 100 像素）并将其绘制为新的位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:37:23.317

好吧，您可以通过将位图中所需的所有内容添加到精灵来做到这一点，然后执行以下操作：

```
var stageSprite:Sprite = new Sprite();
addChild(stageSprite);

//Creates the sprite you want to draw

stageSprite.addChild(objectsYouWantToDraw);

//Here you add the objects you want to draw to the sprite

var bmd:BitmapData = new BitmapData(stage.stageWidth, 100, true, 0);
var bit:Bitmap = new Bitmap(bmd);
addChild(bit);

//Create a bitmap with your size

bmd.draw(stageSprite);

//Draw the objects to a bitmap 
```

如果您想获得屏幕的另一部分，您可以选择添加矩阵。

```
var m:Matrix = new Matrix();
m.translate(-xOffset, -yOffset);
bmd.draw(stageSprite, m);

//Draw the objects to a bitmap with the offsets you want 
```

# android - 使用 AndroidAnnotations 休息客户端 - “没有合适的 HttpMessageConverter ...”

> ID：12405184
> 
> 赞同：4
> 
> 时间：2012-09-13T11:26:52.447
> 
> 标签：android, gson, resttemplate, android-annotations

我想向服务器发送 POST 请求。我必须将 JSON 对象作为参数传递，并获取 JSON 作为响应，但出现此错误：

```
org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [com.package.Response] and content type [application/octet-stream] 
```

代码

发送请求：

```
 @RestService
    RestClient restClient;
...
    String json = "{\"param\":3}"; 
    restClient.getRestTemplate().getMessageConverters().add(new GsonHttpMessageConverter());
    Response res = restClient.send(json); 
```

休息客户端

```
@Rest("http://my-url.com")

    public interface RestClient
    {
        @Post("/something/")
        Response send(String json);

        RestTemplate getRestTemplate();

        void setRestTemplate(RestTemplate restTemplate);
    } 
```

我正在使用这些 JAR 文件：

*   spring-android-rest-template-1.0.0.RC1
*   spring-android-core-1.0.0.RC1
*   spring-android-auth-1.0.0.RC1
*   gson-2.2.2

我做错了什么？
当我将`send`参数更改为时，`JSONObject`我得到了同样的错误。
顺便提一句。AA 文档真的很神秘——我可以使用 Gson 吗？
或者我应该使用杰克逊？
那我需要包含哪个文件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T14:53:24.283

您可以将 RestTemplate 与 Gson 或 Jackson 一起使用。

Gson 很好，更容易使用你有小的 json 数据集。如果你有一个复杂/深的 json 树，Jackson 更合适，因为 Gson 创建了很多导致停止世界 GC 的临时对象。

这里的错误说它找不到`HttpMessageConverter`能够解析的`application/octet-stream`.

如果您查看[GsonHttpMessageConverter](http://grepcode.com/file/repo1.maven.org%24maven2@org.springframework.android%24spring-android-rest-template@1.0.0.RELEASE@org%24springframework%24http%24converter%24json%24GsonHttpMessageConverter.java)的源代码，您会注意到它仅支持 mimetype `application/json`。

这意味着您有两个选择：

*   从您的内容中返回`application/json`mimetype，这将非常合适
*   或者只是更改支持的媒体类型`GsonHttpMessageConverter`：

```
String json = "{\"param\":3}"; 
GsonHttpMessageConverter converter = new GsonHttpMessageConverter();
converter.setSupportedMediaTypes(new MediaType("application", "octet-stream", Charset.forName("UTF-8")));
restClient.getRestTemplate().getMessageConverters().add(converter);
Response res = restClient.send(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T11:10:30.713

我刚遇到这个问题。几个小时后，我意识到我传递给 RestTemplate.postForObject 调用的类有 Date 变量。您需要确保它只包含简单的数据类型。希望这对其他人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T12:42:20.823

我必须对其进行少量修改才能工作：

```
final List<MediaType> list = new ArrayList<>();
list.addAll(converter.getSupportedMediaTypes());
list.add(MediaType.APPLICATION_OCTET_STREAM);
converter.setSupportedMediaTypes(list); 
```

# python - django 查询集 API

> ID：12405188
> 
> 赞同：0
> 
> 时间：2012-09-13T11:27:03.567
> 
> 标签：python, django

假设我有：

模型.py：

```
class Books(models.Model):

    title = models.CharField(max_length = 200)
    author = models.CharField(max_length = 200)
    price = models.CharField(max_length = 200) 
```

并在`manage.py shell`：

```
# hits the database
>>> book_one = Books.objects.get(id = 1)
# hits the database 
>>> foo = book_one.title
u'Foo book' 
```

假设上面的代码，如果我输入`book_one.author`我们将再次访问数据库。

通过使用`select_related()`if i type `book_one.title`or `book_one.author`or`book_one.price`我们不会再次访问数据库，只有当我们实例化它时。

如果我输入`books = Books.objects.all()`并假设我想使用循环`manage.py shell`将其特定值（假设我只想存储`title`和`author`字段）存储在一个空列表中，例如：`for`

```
empty_list = []
for book in books:
    empty_list.append([book.title, book.author])
# only 1 data, so we're gonna loop only once 
```

所以问题是：基于上面的循环，我们要访问数据库多少次？是因为我们通过了两次`book.title`，`book.author`还是只有一次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:46:17.023

> 假设上面的代码，如果我输入`book_one.author`我们将再次访问数据库。

不正确。模型中的所有简单字段都是从数据库中提取的，除非使用`.defer()`或`.only()`。

> 通过使用`select_related()`if i type `book_one.title`or `book_one.author`or`book_one.price`我们不会再次访问数据库，只有当我们实例化它时。

`select_related()`仅影响相关字段，例如`ForeignKey`,`OneToOneField`等。

> 基于上面的循环，我们将访问数据库多少次？

一次。但考虑`.values_list('title', 'author')`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:46:12.497

如果你有课

```
class Books(models.Model):

    title = models.CharField(max_length = 200)
    author = models.CharField(max_length = 200)
    price = models.CharField(max_length = 200) 
```

现在，

```
>>> book_one = Books.objects.get(id = 1) # hits the database
>>> foo = book_one.title # does not hit the database 
```

如果根本`title`是另一个表的外键，那么`foo = book_one.title`会命中数据库并使用`select_related`会为您保存这个数据库命中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:49:26.807

你的假设是不正确的。查询集[是惰性](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)的，仅在评估时执行。

```
f = Books.objects.get(pk=1) # one hit
f.title # no hit
f.price # no hit 
```

# android - 如何计算日期？我有天 + 开始日期并找到结束日期

> ID：12405190
> 
> 赞同：2
> 
> 时间：2012-09-13T11:27:09.013
> 
> 标签：android, date, calculator

我正在开发 android 应用程序，在该应用程序中如何根据开始日期和天数计算结束日期？例如，如果我在该日期加上 45 天，我的开始日期是 2012 年 9 月 13 日，我将得到 2012 年 10 月 27 日。

怎么做？

我不能在 if 语句中使用日期函数。

我的代码：

f (resCrop.equals("Paddy")) {

```
 if(rescultivation1.equals("Conventional method - Delta"))
        {
            if(resvariety1.equals("Short duration"))
            {
                WA.setVisibility(View.VISIBLE);
                TONE.setVisibility(View.VISIBLE);
                TTWO.setVisibility(View.VISIBLE);
                TTHREE.setVisibility(View.VISIBLE);
                //date calculation
                        SimpleDateFormat sdf = new SimpleDateFormat("dd-M-yyyy");
                Calendar c1 = Calendar.getInstance(); // Get Calendar Instance
            try {
                c1.setTime(sdf.parse(resDate));
                } catch (ParseException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                c1.add(Calendar.DATE, 3);  // add 3 days
                sdf = new SimpleDateFormat("dd-M-yyyy");

          Date resultdate = new Date(c1.getTimeInMillis());   // Get new time 
          String dateInString = sdf.format(resultdate);
          WP.setText(dateInString);
          WP.setEnabled(false);
          Calendar c2 = Calendar.getInstance();
          c2.add(Calendar.DATE, 35);  // add 45 days
          sdf = new SimpleDateFormat("dd-M-yyyy");
            }
        }
     } 
```

它在 if 语句中不起作用。如果我在外面使用，如果它工作正常。如何解决这个问题。请给我建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T11:33:19.090

试试这个代码。您可以使用任何您想要的日期格式。

```
 String dateInString = "2011-09-13";  // Start date
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");

    Calendar c = Calendar.getInstance(); // Get Calendar Instance
    c.setTime(sdf.parse(dateInString));

    c.add(Calendar.DATE, 45);  // add 45 days
    sdf = new SimpleDateFormat("MM/dd/yyyy");

    Date resultdate = new Date(c.getTimeInMillis());   // Get new time 
    dateInString = sdf.format(resultdate);
    System.out.println("String date:"+dateInString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:33:11.413

您可以使用以下代码来解决您的问题。

```
Calendar cal=Calendar.getInstance();
    int currentDay=cal.get(Calendar.DAY_OF_MONTH);
    //Set the date after 45 days 
    cal.set(Calendar.DAY_OF_MONTH, currentDay+45);
    int EndDay=cal.get(Calendar.DAY_OF_MONTH); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:35:57.793

你好，马丹，

```
 Plz Convert ur date into milli second and then differentiate it and divided it by 1000*60*60*24. 
```

请像这样查看代码片段

```
 Date d1 = new Date(1st Date);
            Date d2 = new Date(2nd Date);
            Calendar cal1 = Calendar.getInstance();
            cal1.setTime(d1);

            Calendar cal2 = Calendar.getInstance();
            cal2.setTime(d2);
            presumedDays = (int) ((cal2.getTimeInMillis() - cal1.getTimeInMillis()) / (1000 * 60 * 60 * 24)); 
```

它给你留下的日子。你也可以关注这个[点击这里](http://www.roseindia.net/java/java-get-example/number-days-between.shtml)

# jquery - adGallery如何在单击图像时保持幻灯片移动

> ID：12405191
> 
> 赞同：0
> 
> 时间：2012-09-13T11:27:20.387
> 
> 标签：jquery

我在以下网站上使用 adGallery：

[http://adgallery.codeplex.com/documentation](http://adgallery.codeplex.com/documentation)

但是当您单击图像时幻灯片停止移动，我似乎无法弄清楚如何在该幻灯片上暂停然后继续？

```
$(function () {

    var galleries = $('.ad-gallery').adGallery(
        { slideshow: {
            enable: true,
            autostart: true,
            speed: 300,
            stop_on_scroll: false, 
        }
        }

    );
    galleries[0].settings.effect = 'fade';
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:07:41.973

AD Gallery 似乎可以使用回调函数进行配置。您可以使用`afterImageVisible`回调来重新启动幻灯片：

```
var galleries = $('.ad-gallery').adGallery({
    callbacks: {
        afterImageVisible: function() {
            this.slideshow.start();
        }
    }
});​ 
```

看看这个小提琴：http: [//jsfiddle.net/wldaunfr/mB9qV/](http://jsfiddle.net/wldaunfr/mB9qV/)

# javascript - 通过传递其 URL 通过 javascript 读取 /Process 图像 - 类似于 PHP 中的 file_get_contents？

> ID：12405197
> 
> 赞同：2
> 
> 时间：2012-09-13T11:27:26.220
> 
> 标签：javascript, image, file, url, upload

**更新：**

出于测试目的，我使用了

```
<input type="text" onClick="doProcess(http://www.abc.com/chart.png)" /> 
```

这不起作用（用于`alert`测试是否通过了 url。警告框确实显示了 url，但解码失败）。从某种意义上说，我自己回答了部分问题。关于如何通过 javascript 读取图像文件的任何想法？tt

刚刚发现这是HTML 5相关的代码。我还想，因为我传递的是 url 而不是文件列表，所以我需要`for()`从函数中删除循环，`doProcess()`这将是

```
function doProcess(f)
{
    var o=[];

           var reader = new FileReader();
        reader.onload = (function(theFile) {
        return function(e) {
            gCtx.clearRect(0, 0, gCanvas.width, gCanvas.height);

            qrcode.decode(e.target.result);
        };
        })(f);
        reader.readAsDataURL(f); 

} 
```

但这也不起作用:(

* * *

**原帖**

我有一个输入文件，其中提供了 QR 图像文件。

```
<input type="file" onchange="doProcess(this.files)"> 
```

**doProcess 函数**

```
function doProcess(f)
{
    var o=[];

    for(var i =0;i<f.length;i++)
    {
        var reader = new FileReader();
        reader.onload = (function(theFile) {
        return function(e) {
            gCtx.clearRect(0, 0, gCanvas.width, gCanvas.height);

            qrcode.decode(e.target.result);
        };
        })(f[i]);
        reader.readAsDataURL(f[i]); 
    }
} 
```

此功能完美运行。那里没有问题。此函数的目的是解码 QR 图像。现在出于纯粹的兴趣和好奇，我打算做一些不同的事情——**消除手动浏览图像文件的需要**。这给我带来了一些疑问：

1.  `doProcess(f)`当提供图像 URL 而不是文件时，是否可以执行相同的操作？目前`f`参数是一个文件。如果`f`参数是 URL（**例如：doProcess(http://www.abc.com/abc.jpg)**）会发生什么？我意识到内部还有其他支持函数`doProcess()`也被调用来完成解码过程，但我假设这些函数会根据传递的数据类型进行相应的操作`doProcess`。

2.  如果`f`参数是图像文件（在本地计算机上浏览并选择）而不是图像 URL，那么数据类型`f`是什么？我猜这将是一个数组或某种原始二进制形式。

我的目的是研究这个过程并了解幕后究竟发生了什么。通过使用“浏览”功能，QR 图像被成功解码。

总之，如果我将图像的位置作为参数而不是文件传递会发生什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:14:16.437

有一些问题我不知道你是否在这里，因为它不是你的完整代码，我不知道你到底想要做什么。这是一个与您正在做的事情非常接近的工作示例。它在画布上加载图像（您可以使用您的 qrcode 东西代替）

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      var gCanvas;
      var gCtx;
      function load(){
        console.log("loaded");
        gCanvas = document.getElementById("mcanvas");
        if (gCanvas.getContext){
          gCtx = gCanvas.getContext("2d");
        } else console.log("no Canvas?");
      }
      function doProcess(f){
          var o=[];
          var reader = new FileReader();
          reader.onload = (function(theFile) {
              var img = new Image();
              img.src = theFile;
              img.onload = function(){
                gCtx.clearRect(0, 0, gCanvas.width, gCanvas.height);
                gCtx.drawImage(img,0,0);
              }
              return;
          })(f);

          console.log(reader);
          reader.readAsDataURL(f);
      }
    </script>
  </head>

  <body onload="load()">
    <input type="text" onClick="doProcess('https://www.google.com.br/logos/2012/clara_schuman-2012-hp.jpg')" />
    <canvas id="mcanvas" height="500" width="500"></canvas>
  </body>
</html> 
```

不要忘记加载功能，它允许您的 javascript 在正文加载后运行。

# java - 我应该如何在 Java Web 服务中设置我的数据库连接？

> ID：12405200
> 
> 赞同：2
> 
> 时间：2012-09-13T11:27:43.990
> 
> 标签：java, database, jdbc

我正在以大学项目的小型论坛的形式制作网络服务。Web 服务提供了一系列访问和修改数据库的方法，然后 JSP/servlet 将使用该 Web 服务将论坛呈现给用户。

我已经设置了所有方法，但我仍然不确定如何正确设置我的数据库连接。现在我`Connection`在 web 服务类文件中有一个对象，并且在类的构造函数中建立了连接。我在所有方法中一直使用该连接对象，因此它们都依赖于正在运行的构造函数。我不确定这是否正确。

有没有更好的方法来做到这一点？一位讲师告诉我，每次有人访问页面时都会创建一个 Web 服务实例，这对我来说听起来像是一项昂贵的操作。

编辑：我查看了连接池以及到目前为止我发现的所有内容（包括这需要额外的库。我仅限于库存 Java SE/EE 而没有额外的库，所以这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:33:55.897

这是一个*非常*糟糕的主意。你不应该有一个`Connection`共享的对象。它不能像那样扩展，而且它不是线程安全的。

更好的方法是使用连接池。在需要的时候获取连接，使用它，在同一个方法的范围内关闭它。

我认为您的朋友被误导了：Web 服务应该独立于任何页面，独立于任何页面。它由容器管理。它可能是单例对象或池对象，但您不会为每个页面创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:36:32.933

最好发布一些代码，但是从简短的解释中会想到几个问题：

1.  您没有汇集在任何实际负载下都不会非常有效的连接。
2.  创建连接很昂贵，因此如果您非常频繁地执行构造函数，那么您将创建很多连接。
3.  你在哪里关闭连接？
4.  确保防止 sql 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:37:21.037

您不应该在构造函数中创建连接，因为您很可能会遇到很多不活动、连接状态、io 问题......

我宁愿使用 Apache 库中的 DataSource，例如[`BasicDataSource`](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html).

```
BasicDataSource dataSource = new BasicDataSource();
dataSource.setUrl("jdbc:...");
dataSource.setUser(...);
dataSource.setPassword(...); 
```

然后，在您的 Web 服务的每个方法中，您调用`dataSource.getConnection()`以获取连接。正如另一个答案中所建议的，在内部，它使用连接池。

# sql - 从开始到第一个非整数字符的子字符串 sql nvarchar 值

> ID：12405224
> 
> 赞同：0
> 
> 时间：2012-09-13T11:28:47.750
> 
> 标签：sql, sql-server-2008-r2, integer, substring, nvarchar

有一个带有一些“额外符号”的数字 nvarchar 值，例如**1/2、9/6、14A**它们总是以数字开头。
如何将这个“额外符号”值从开始到第一个非整数字符的索引？示例行必须是**1, 9, 14**
类似

```
SUBSTRING(Value, 0, CHARINDEX(Value, /*Here must be all symbols except numbers*/)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:37:19.827

请尝试查询：

```
SELECT LEFT(ColumnName,PATINDEX('%[^0-9]%', ColumnName+'a')-1) FROM TABLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:57:03.890

试试这个：

```
SELECT CASE PATINDEX('%[^0-9]%', ColumnName) WHEN  0 THEN ColumnName
ELSE LEFT(ColumnName,PATINDEX('%[^0-9]%', ColumnName)-1) END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:13:35.377

避免将字符附加到表中的每一行的另一个选项：

```
SELECT SUBSTRING(col, 1, COALESCE(NULLIF(PATINDEX('%[^0-9]%', col)-1, -1), 255)) 
  FROM dbo.mytable; 
```

# android - 如何解决“无法解析导入 android.net.rtp”？

> ID：12405226
> 
> 赞同：0
> 
> 时间：2012-09-13T11:28:51.133
> 
> 标签：android, android-manifest, live-streaming

嗨，我正在使用 wowza 媒体服务器在 android 中开发实时视频流。我点击这个链接[http://spydroid-ipcamera.googlecode.com/svn/](http://spydroid-ipcamera.googlecode.com/svn/)。我创造了所有的东西。现在我的问题是我在 GenericAudioStream.java 类中遇到错误

```
 import android.net.rtp.AudioCodec;
    import android.net.rtp.AudioGroup;
    import android.net.rtp.AudioStream;
    import android.net.rtp.RtpStream; 
```

导入 android.net.rtp 无法解析。我该如何解决？有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:02:28.593

该[`android.net.rtp.*`软件包](http://developer.android.com/reference/android/net/rtp/package-summary.html)仅从 API 级别 12 (Android 3.1.x Honeycomb MR1) 开始可用，因此您的应用需要`android:minSdkVersion="12"`或更高。

如果您只想播放 RTSP (RTP, SDP) 流，请查看：[Android 是否支持 APIs for implementation RTP,RTSP for VoIP and PTT Project？](https://stackoverflow.com/questions/4416639/does-android-support-apis-for-implementing-rtp-rtsp-for-voip-and-ptt-project)-- 这声称可以一直工作到 Android 2.3 Gingerbread。

# jsf - 数据表的多个 f:facets

> ID：12405227
> 
> 赞同：1
> 
> 时间：2012-09-13T11:28:55.937
> 
> 标签：jsf, primefaces

我想使用两个 f:facets：第一行作为仅包含文本的表的“标题”，第二行包含“全局过滤器”（标签 + 输入框）。

我尝试了无数组合，但都失败了。

如何使用 JSF/Primefaces 实现这一目标？

这是我尝试过的一个示例：

```
<p:dataTable var="customer" widgetVar="customerTable" id="dataTable" value="#{customerbean.customerList}" paginator="true" rows="20" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,20,50,100" emptyMessage="#{text['table.customer.filter.notfound']}" filteredValue="#{customerbean.filteredCustomers}" editable="true"> 
<f:facet name="header">                       
<h:outputText value="#{text['table.customer.header']}" />                            
</f:facet>
<f:facet name="header2">                       
<h:outputText value="#{text['table.customer.filter.global']}" />
<p:inputText id="globalFilter" onkeyup="customerTable.filter()" style="width:150px" /> 
```

这是我基于以下答案的第二次尝试：

```
 <f:facet name="header">                    
            <p:columnGroup type="header">
                <p:row>
                    <p:column colspan="4">
                        <h:outputText value="#{text['table.customer.header']}" />    
                    </p:column>
                </p:row>
                <p:separator/>
                <p:row>
                    <p:column colspan="4">
                        <h:outputText value="#{text['table.customer.filter.global']}" />
                        <p:inputText id="globalFilter" onkeyup="customerTable.filter()" style="width:150px" />                         
                    </p:column>
                </p:row>
            </p:columnGroup>                  
            </f:facet> 
```

整个数据表：

```
 <p:dataTable id="customersTable" var="customer" widgetVar="customerTable" value="#{customerbean.customerList}" paginator="true" rows="20" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,20,50,100" emptyMessage="#{text['table.customer.filter.notfound']}" filteredValue="#{customerbean.filteredCustomers}" editable="true" draggableColumns="true" rowKey="#{customer.id}" selection="#{customerbean.selectedCustomer}" selectionMode="single"> 

                <f:facet name="header">                    
                    <p:columnGroup type="header">
                        <p:row>
                            <p:column colspan="4">
                                <h:outputText value="#{text['table.customer.header']}" />    
                            </p:column>
                        </p:row>
                        <p:separator/>
                        <p:row>
                            <p:column colspan="4">
                                <h:outputText value="#{text['table.customer.filter.global']}" />
                                <p:inputText id="globalFilter" onkeyup="customerTable.filter()" style="width:150px" />                         
                            </p:column>
                        </p:row>
                    </p:columnGroup>                  
                </f:facet>

                <p:ajax event="rowEdit" listener="#{customerbean.onEdit}" update="@this"/>  

                <p:column headerText="Name" sortBy="#{customer.name}" filterBy="#{customer.name}" filterMatchMode="contains">
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{customer.name}" /> 
                        </f:facet> 
                        <f:facet name="input">  
                            <p:inputText value="#{customer.name}" style="width:100%"/>  
                        </f:facet> 
                    </p:cellEditor>
                </p:column>  

                <p:column headerText="CPR" sortBy="#{customer.cpr}" filterBy="#{customer.cpr}" filterMatchMode="contains">  
                    <h:outputText value="#{customer.cpr}" />  
                </p:column>  

                <p:column headerText="Passport No." sortBy="#{customer.passportno}" filterBy="#{customer.passportno}" filterMatchMode="contains">  
                    <h:outputText value="#{customer.passportno}" />  
                </p:column>  

                <p:column headerText="DOB" sortBy="#{customer.dob}" filterBy="#{customer.dob}" filterMatchMode="contains">  
                    <h:outputText value="#{customer.dob}" />  
                </p:column>   

                <p:column headerText="Options" style="width:50px">  
                    <p:rowEditor />  
                </p:column>                  

                <f:facet name="footer">  
                    There are #{fn:length(customerbean.customerList)} customers in total.  
                </f:facet>  
            </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:01:19.717

您不能使用任何您想要的名称来命名构面。它必须是数据表可以*理解*的东西。它*理解*“header”，就像它*理解*“footer”一样，但不理解“header2”或“footer2”。

也就是说，您只能使用一个`<f:facet name="header">`，在里面您可以做任何您想做的事情。您可以使用 a`<p:panelGrid columns="1">`或 a `<p:separator>`，甚至是一个简单的表格，它只是 html/css 格式，就像您在页面中的任何位置所做的那样。

* * *

还有一种更复杂的方式，如果你想再努力一点，在里面使用`<p:columnGroup type="header">`and many `<p:row>`，例如：

```
<p:columnGroup type="header">
   <p:row>
      <p:column>
         <f:facet name="header">
             <h:outputText value="Your header" />
         </f:facet>
      </p:column>
   </p:row>
   <p:row>
      <p:column>
         <f:facet name="header">
             <h:outputText value="Filter: "/>
             <p:inputText value="#{filter}">
         </f:facet>
      </p:column>
   </p:row>
</p:columnGroup> 
```

[在此处查看完整示例。](http://www.primefaces.org/showcase/ui/datatableGrouping.jsf)

# ruby-on-rails - Active Admin 日期过滤日期格式自定义

> ID：12405230
> 
> 赞同：5
> 
> 时间：2012-09-13T11:29:07.717
> 
> 标签：ruby-on-rails, ruby, date, activeadmin

是否有简单的方法可以从默认 ISO 格式 (yyyy-mm-dd) 更改 ActiveAdmin 日期过滤器显示格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-22T19:27:27.280

您可以为 datepicker 提供额外的选项，而不是覆盖 js，如下所示：

```
 = f.input :my_date, as: :datepicker, datepicker_options: { dateFormat: "mm/dd/yy" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-31T08:46:44.153

我固定的方式是这样的：

```
$ ->
  # reset format
  $('.datepicker:not(.hasDatepicker)').each ->
    if $(@).val().length > 0
      p = $(@).val().split('-')
      $(@).val("#{p[2]}-#{p[1]}-#{p[0]}")

  # change format
  $(document).on 'focus', '.datepicker:not(.hasDatepicker)', ->
    $(@).datepicker dateFormat: 'dd-mm-yy' 
```

因此，首先将值从 yyyy-mm-dd 重置为 yyyy-mm-dd，然后在选择器上设置正确的格式。

希望这可以帮助某人。

这适用于 ActiveAdmin pre 1 与 just_datetime_picker gem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T09:16:18.000

就在这里。我用js设置日期时间选择器对象的选项来做到这一点

```
$(document).ready(function() {
  $(".datepicker").datepicker( "option", "dateFormat", 'D, d M yy' );

}); 
```

如果这样做，输入值将如下所示

```
Wed, 28 Nov 2012 
```

[http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)这里是关于支持格式的手册

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T15:37:32.717

对于活动管理员过滤器..

在 Active Admin gem 中，文件：app/assets/javascripts/active_admin/pages/application.js.coffee，您将看到：

```
$ ->
  $(document).on 'focus', '.datepicker:not(.hasDatepicker)', ->
    $(@).datepicker dateFormat: 'yy-mm-dd' 
```

例如，您可能需要修改 on focus 事件（文件：app/assets/javascripts/active_admin.js）。

```
$(document).ready(function(){
  $(document).on('focus', '.datepicker.hasDatepicker', function() {
    $(this).datepicker( "option", "dateFormat", "mm-dd-yy");
  });
}); 
```

或者也许删除事件并重新初始化日期选择器，例如：

```
$(document).ready(function(){

  // remove existing on focus events
  $._data( $(document)[0], 'events').focusin = null;

  // add new datepicker with format
  $('.datepicker').datepicker({dateFormat: 'mm-dd-yy'});

}); 
```

# jquery - jquery没有在使用委托的第一次点击中触发

> ID：12405232
> 
> 赞同：1
> 
> 时间：2012-09-13T11:29:25.093
> 
> 标签：jquery

我想知道这个例子在第二次点击时触发而不是在第一次点击时触发，为什么？我正在使用委托功能。示例是[http://jsfiddle.net/3avaG/](http://jsfiddle.net/3avaG/)。

我非常需要这个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:31:57.510

委托已被贬值，因此不适用于 jQuery 1.8。例如，将 JSFiddle 中的版本更改为 1.5 就可以了。

**从文档：**

> 从 jQuery 1.7 开始，.delegate() 已被 .on() 方法取代。然而，对于早期版本，它仍然是使用事件委托的最有效方法。有关事件绑定和委托的更多信息在 .on() 方法中。

**更新：**

```
$('body').delegate('#as', 'click', function(e){
    $(this).toggle(function() {
        alert("First");
    }, function() {
        alert("Second");
    });
}); 
```

# asp.net-mvc - 首先分析asp.net mvc4代码

> ID：12405233
> 
> 赞同：0
> 
> 时间：2012-09-13T11:29:28.143
> 
> 标签：asp.net-mvc, entity-framework, mvc-mini-profiler

我制作了一个新的 asp.net mvc4 应用程序，然后安装了 miniprofiler。

然后我只是启用了迁移，添加迁移后我更新了我的数据库。

使用 miniprofiler 我发现有 3 个我不知道的 sql 查询。

我不知道这个初始化发生在哪里

```
 InitializeDatabase <PerformDatabaseInitialization>b__6 PerformInitializationAction PerformDatabaseInitialization 
```

这是miniprofiler的图片![微型轮廓仪](../Images/1c7f04048d9c2d4dd80198288ccabc8d.png)

这 3 个 sql 查询是什么？他们来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:46:21.840

This is EF Migrations checking if the database is the same as the EF model. Whenever you run a migration EF stores details of the migration in the `[__MigrationHistory]` table so it knows if the migrations need to be run.

*   I'm not too sure about first query but I think it's checking if any tables in the db were generated using EF (This is a guess from looking at the stack trace).

*   The second query just returns the number of migrations.

*   The final query gets the latest migration which will then be compared to the EF model. If the model is different to the database an exception will throw saying the database is out of date.

You don't need to worry about these as the migration check is only run once per application startup.

If you want more info on db initialisers take a look at [this](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm).

# python - 为什么 subprocess.Popen 在 service/init.d 下运行时无法工作？

> ID：12405238
> 
> 赞同：0
> 
> 时间：2012-09-13T11:29:51.557
> 
> 标签：python, service, subprocess

我在文件“code.py”中有这些代码

```
param_list = ['/usr/bin/someapp.bin','-q','/usr/bin/someparam.conf','/tmp/output.pdf']
p = subprocess.Popen( param_list , shell=False, stdout=subprocess.PIPE )
p.communicate() 
```

当我在终端shell下的code.py下运行时，someapp.bin将生成一个文件并输出为/tmp/output.pdf，它可以工作，用户是：**ubuntu**

但是当我尝试使用用户将其作为服务运行时：**service_user** 并确保 /tmp 文件夹对任何人都是可写且可访问的。

我的问题是为什么它无法生成，因为它假设正在服务中，我的怀疑是权限问题，但我无法让它工作，需要一些建议和帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:16:50.833

代码应该可以工作。要追踪问题：

1.  添加`print(os.getuid())`到代码中以确保它以您期望的 UID 开头
2.  启用日志记录/调试`someapp.bin`以查看是否有错误
3.  检查退出代码
4.  将命令的输出打印到控制台，以便您*查看*任何错误：

    ```
    output = p.communicate()[0]
    print(output) 
    ```

# iphone - 使用 Objective C 配置 WiFi 路由器

> ID：12405242
> 
> 赞同：0
> 
> 时间：2012-09-13T11:30:17.580
> 
> 标签：iphone, objective-c, wifi, router

我想开发可以从我的 iphone 配置（更改路由器 ip、密码、wep 密钥等）Wifi 路由器的应用程序。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:32:49.467

没有特定的 API 或函数调用可以用来配置这些详细信息。您需要与路由器制造商及其软件开发人员合作，才能将类似的东西与您的应用程序集成

每个路由器制造商都有自己的路由器配置页面，其中包含不同类型的选项。路由器软件中必须有路由器硬件级别的东西，以便您的应用程序可以与路由器通信。

# php - 如何从 MySQL 填充 PHP 3D 数组

> ID：12405247
> 
> 赞同：3
> 
> 时间：2012-09-13T11:30:40.727
> 
> 标签：php, mysql, arrays, multidimensional-array

由于我之前的问题简化了，我正在尝试在 PHP 中学习 3D 数组，但是每节课我都变得难以理解。

我准备了带有空 3D（分层）数组的代码，但不知道如何：

1.  用 MySQL 数据库中的数据填充它
2.  像这样显示/引用它：`echo $result_value[x][y][z]`给出 `value`

.

```
include_once 'connect.php';

$player_id = '6';
$result_value = array();

$pullMapInfo = "SELECT x, y, z, value FROM mapinfo WHERE id='{$player_id}'";
$pullMapInfo2 = mysql_query($pullMapInfo) or die(mysql_error());

while ( $pullMapInfo3 = mysql_fetch_assoc($pullMapInfo2) ) {
    $result_value = array(
                          array(
                              array('', '', ''),
                              array('', '', ''),
                              array('', '', ''),
                          ),
                          array(
                              array('', '', ''),
                              array('', '', ''),
                              array('', '', ''),
                          ),
                          array(
                              array('', '', ''),
                              array('', '', ''),
                              array('', '', ''),
                          )
                      );
}

for($z = 1; $z <= 3; $z++){
for($x = 1; $x <= 16; $x++){
for($y = 1; $y <= 16; $y++){
    # echo database row's divided among layers (z parameter) for ex.: 1,1,1 = red (X,Y,Z = color value) - 1 width & 1 height on 1st layer contains red value
    # to get access to it like this: $result_value[x][y][z] => [value];
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:41:58.577

> ```
> populate it with data from MySQL database
> display it/reffer to it like: echo $result_value[x][y][z] gives value 
> ```

填充阶段只是简单地选择至少`x`、`y`和字段。`z``value`

然后，在一个循环中，您检索所有数据。此时，您检查数组先决条件是否存在，如果不存在，则设置它们，然后设置值：

```
<?php
    $db = mysql_connect($db_host,$db_user,$db_password) or die($error[0])

    $arr3d = array();

    /* Initialization to get a "dense" array
    $z_row = array_fill(0, $max_z, '<DEFAULT>');
    $y_row = array_fill(0, $max_y, $z_row);
    $arr3d = array_fill(0, $max_x, $y_row);
    unset($y_row, $z_row); // Do not waste memory
    */

    $query = 'SELECT x, y, z, value FROM ...;'   ;

    $handle = mysql_query($query) or die("$query: error: " . mysql_error());

    while($row = mysql_fetch_array($handle))
    {
        // $row is an array with x, y, z and value keys in this order
        list($x, $y, $z, $value) = $row;

        /* This if we had used mysql_fetch_assoc instead
        $x = $row['x'];
        $y = $row['y'];
        $z = $row['z'];
        $value = $row['value'];
        */
        if (!isset($arr3d[$x]))
            $arr3d[$x] = array();
        if (!isset($arr3d[$x][$y]))
            $arr3d[$x][$y] = array();
        $arr3d[$x][$y][$z] = $value;
    }
    mysql_free_result($handle);
?> 
```

如果你想要一个完整的（“密集”）数组，你必须首先循环 x、y 和 z 遍历它们的所有值，并为数组单元分配一个默认值，以便被 SQL 循环覆盖。

在上面的代码中，注释了密集补丁，如果没有 x=5、y=2 和 z=3 的行，则 $arr3d[5][2][3] 将未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:38:37.963

`mysql_fetch_assoc($pullMapInfo2)`将返回一个数组，您可以使用它来获取播放器的 X、Y 和 Z 值，如下所示：

```
$x = $pullMapInfo3["x"]
$y = $pullMapInfo3["y"]
$z = $pullMapInfo3["z"] 
```

如果你想把它放在你的 result_value 数组中，你可以简单地`$result_value[$x][$y][$z] = $pullMapInfo3["value"]`.

此外，将 $result_value 的初始化移出循环到您编写的位置`$result_value = array();`：

```
for ($ix = 1; $ix <= 16; $ix++) {
    $result_value[$ix] = array();
    for ($iy = 1; $iy <= 16; $iy++) {
        $result_value[$ix][$iy] = array();
    }
} 
```

然后你可以使用 pastebin 中的循环。另请注意，您将在输出 + 768 个`<br>`标签处获得第 1 层、第 2 层、第 3 层，所以我不确定这是否是您的意思。

# c++ - 从应用程序中获取应用程序版本

> ID：12405248
> 
> 赞同：12
> 
> 时间：2012-09-13T11:30:42.103
> 
> 标签：c++, windows, winapi, versioning

有没有一种简单的方法可以在运行时从资源文件中获取应用程序版本信息？

实际上，我想要做的是能够在运行时显示“版本 XYZ”，而无需在某个地方有一个单独的变量，我必须与我的 ProductVersion 和 FileVersion 保持同步。

澄清一下：是的，这是一个标准的 C++ Windows 项目。我知道[GetFileVersionInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003%28v=vs.85%29.aspx)方法，但是为了查询版本信息而不得不从内存中的版本中打开二进制文件似乎很愚蠢-我确定我在这里遗漏了一些明显的东西:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T11:38:20.287

如果操作系统是 Windows，请使用`GetFileVersionInfo`和`VerQueryValue`功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T14:25:50.267

我不相信有更简单的方法（比打开文件并使用 GetFileVersionInfo 和 VerQueryValue）。我使用以下代码，以防万一：

```
static CString GetProductVersion()
{
    CString strResult;

    char szModPath[ MAX_PATH ];
    szModPath[ 0 ] = '\0';
    GetModuleFileName( NULL, szModPath, sizeof(szModPath) );
    DWORD dwHandle;
    DWORD dwSize = GetFileVersionInfoSize( szModPath, &dwHandle );

    if( dwSize > 0 )
    {
        BYTE* pbBuf = static_cast<BYTE*>( alloca( dwSize ) );
        if( GetFileVersionInfo( szModPath, dwHandle, dwSize, pbBuf ) )
        {
            UINT uiSize;
            BYTE* lpb;
            if( VerQueryValue( pbBuf,
                               "\\VarFileInfo\\Translation",
                               (void**)&lpb,
                               &uiSize ) )
            {
                WORD* lpw = (WORD*)lpb;
                CString strQuery;
                strQuery.Format( "\\StringFileInfo\\%04x%04x\\ProductVersion", lpw[ 0 ], lpw[ 1 ] );
                if( VerQueryValue( pbBuf,
                                   const_cast<LPSTR>( (LPCSTR)strQuery ),
                                   (void**)&lpb,
                                   &uiSize ) && uiSize > 0 )
                {
                    strResult = (LPCSTR)lpb;
                }
            }
        }
    }

    return strResult;
} 
```

大卫

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T21:57:54.970

唯一官方支持的方法是使用`GetFileVersionInfo()`and `VerQueryValue()`。但是，正如您所注意到的，它`GetFileVersionInfo()`要求您传入可执行文件的文件名。 [这是有原因的](https://devblogs.microsoft.com/oldnewthing/20061226-06/?p=28603)。虽然使用 获取正在运行的进程的文件名很简单`GetModuleFileName()`，但这并不是最有效的选择，特别是如果可执行文件是从远程共享运行的，并且如果可执行文件在 HDD 上被修改后甚至不能保证准确该进程已开始运行。

您可以访问已在内存中运行的进程的版本信息，方法是调用`FindResource()`以定位进程的`RT_VERSION`资源，然后使用`LoadResource()`并`LockResource()`获取指向其数据的指针。`pBlock`然后将该指针作为 的参数传递是很诱人的`VerQueryValue()`，但要小心，因为这样做[可能会使您的代码崩溃](https://devblogs.microsoft.com/oldnewthing/20061226-06/?p=28603)！如果您`RT_VERSION`直接访问该资源，那么您最好不要使用`VerQueryValue()`。[资源](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647001.aspx)的[格式`RT_VERSION`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647001.aspx)是有文档的，所以你可以手动解析原始数据，不是很困难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-05T10:45:25.267

如前所述，没有简单的方法。

你可以在[这里](http://www.tech-archive.net/Archive/VC/microsoft.public.vc.language/2006-01/msg00151.html)找到一个很好的工作示例（ATL 免费）。

# c# - “(Type)abc”和“abc as Type”有区别吗

> ID：12405249
> 
> 赞同：0
> 
> 时间：2012-09-13T11:30:44.223
> 
> 标签：c#, .net, types, casting

> **可能重复：**
> [直接转换与“as”运算符？](https://stackoverflow.com/questions/132445/direct-casting-vs-as-operator)

首先，如果这是重复的，我很抱歉，我曾尝试用谷歌搜索，但这不是一个简单的“谷歌做”！

以下代码片段之间是否存在差异（功能、性能等）：

```
MyClass myClass = (MyClass)someObject;

MyClass myClass = someObject as MyClass; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T11:31:50.807

是，有一点不同！

**如果转换失败， **as**运算符会将变量设置为**null****

 **显式转换会引发异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:32:27.003

是的，如果第一个变体不能将“someObject”转换为“MyClass”，它会抛出异常。而第二个将只返回null。**

# android - 如何在 Android 应用程序中设置 Google Drive Credentials？

> ID：12405252
> 
> 赞同：10
> 
> 时间：2012-09-13T11:30:47.590
> 
> 标签：android, oauth-2.0, google-drive-api

该应用程序在“Google API 控制台”中注册为“已安装的应用程序”——这似乎是 Android 应用程序的正确设置，不是吗？

所以我确实有一个 Client-Id 而没有 Secret-Id。明确一点：它既不是 Web 应用程序，也不是 Google Drive-App——它是一个访问 Google Drive 云中其他用户数据的 Android 应用程序。

在应用程序中，我获取了帐户（作品），并且确实请求了一个令牌（作品）。现在我想使用该令牌和 Client-Id 连接到 Google Drive。结果是“401，无效凭证”。这段代码有什么问题？

```
public class ActivityMain extends Activity implements DialogInterface.OnClickListener {

    // https://developers.google.com/drive/scopes
    private static final String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";

    // https://code.google.com/apis/console/
    private static final String CLIENT_ID = "999999999999999.apps.googleusercontent.com";

    private AccountManager accountManager;
    private Account[] accounts;
    private String authName;
    private String authToken;

    @Override
    public void onClick(final DialogInterface dialogInterface, final int item) {

        processAccountSelected(accounts[item]);
    }

    @Override
    public void onCreate(final Bundle bundle) {
        super.onCreate(bundle);

        setContentView(R.layout.activitymain);

        accountManager = AccountManager.get(this);
        accounts = accountManager.getAccountsByType("com.google");

        if (accounts == null || accounts.length == 0) {
            // TODO
        } else if (accounts.length == 1) {
            processAccountSelected(accounts[0]);
        } else if (accounts.length > 1) {
            showDialog(MyConstants.DIALOG_ACCOUNTCHOSER);
        }
    }

    @Override
    protected Dialog onCreateDialog(final int id) {
        switch (id) {
            case MyConstants.DIALOG_ACCOUNTCHOSER:
                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

                String[] names = new String[accounts.length];

                for (int i = 0; i < accounts.length; i++) {
                    names[i] = accounts[i].name;
                }

                alertDialogBuilder.setItems(names, this);
                alertDialogBuilder.setTitle("Select a Google account");
                return alertDialogBuilder.create();
        }

        return null;
    }

    private void processAccountSelected(final Account account) {
        if (account != null) {
            authName = account.name.toString();
            if (!Tools.isEmpty(authName)) {
                Toast.makeText(this, authName, Toast.LENGTH_LONG).show();

                accountManager.getAuthToken(account, AUTH_TOKEN_TYPE, null, this,
                        new AccountManagerCallback<Bundle>() {

                            public void run(final AccountManagerFuture<Bundle> future) {
                                try {
                                    authToken = future.getResult().getString(
                                            AccountManager.KEY_AUTHTOKEN);
                                    processTokenReceived();
                                } catch (OperationCanceledException exception) {
                                    // TODO
                                } catch (Exception exception) {
                                    Log.d(this.getClass().getName(), exception.getMessage());
                                }
                            }
                        }, null);
            }
        }
    }

    private void processListFiles(final Drive drive) {
        List<File> result = new ArrayList<File>();
        Files.List request = null;
        try {
            request = drive.files().list();
        } catch (IOException exception) {
        }

        do {
            try {
                FileList files = request.execute();

                result.addAll(files.getItems());
                request.setPageToken(files.getNextPageToken());
            } catch (IOException exception) {
                // --> 401 invalid credentials
            }
        } while (request.getPageToken() != null && request.getPageToken().length() > 0);
    }

    private void processTokenReceived() {
        if (!Tools.isEmpty(authToken)) {
            final HttpTransport transport = AndroidHttp.newCompatibleTransport();
            final JsonFactory jsonFactory = new GsonFactory();
            GoogleCredential credential = new GoogleCredential();
            credential.setAccessToken(authToken);
            Drive drive = new Drive.Builder(transport, jsonFactory, credential)
                    .setApplicationName(getString(R.string.txt_appname))
                    .setJsonHttpRequestInitializer(new GoogleKeyInitializer(CLIENT_ID))
                    .build();

            if (drive != null) {
                processListFiles(drive);
            }
        }
    }
} 
```

我不得不说这是一团糟。网络中有很多页面仅显示部分，并且有很多页面使用已弃用、丢失或不同的方法来做同样的事情。在我看来，没有两个页面显示了从 Android 应用程序中从 Google Drive 获取数据的相同方式。

非常感谢任何帮助。

**编辑：**我可以自己解决。这是不同变化的组合：

*   必须将 android:minSdkVersion="11" 设置为要求
*   必须使用当前的库：google-api-client-1.11.0-beta.jar、google-api-client-android-1.11.0-beta.jar、google-api-services-drive-v2-rev9-1.8 .0-beta.jar、google-http-client-1.11.0-beta.jar、google-http-client-android-1.11.0-beta.jar、google-http-client-gson-1.11.0-beta .jar、google-http-client-jackson2-1.11.0-beta.jar、google-oauth-client-1.11.0-beta.jar、gson-2.1.jar、guava-11.0.1.jar、jackson-core -2.0.5.jar，jsr305-1.3.9.jar

这是获取驱动器对象的当前部分：

```
 GoogleCredential credential = new GoogleCredential();
    credential.setAccessToken(authToken);

    HttpTransport transport = AndroidHttp.newCompatibleTransport();

    JsonFactory jsonFactory = new AndroidJsonFactory();

    drive = new Drive.Builder(transport, jsonFactory, credential)
            .setApplicationName(getString(R.string.txt_appname))
            .setJsonHttpRequestInitializer(
                    new GoogleKeyInitializer(APIKEY_SIMPLE))
            .build();
    if (drive != null) {
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:27:54.993

是的，文档很难理解。

只是改变

```
new GoogleKeyInitializer(CLIENT_ID) 
```

至

```
new GoogleKeyInitializer(SIMPLE_API_ACCESS_KEY) 
```

它应该可以工作。

您可以`SIMPLE_API_ACCESS_KEY`在 Google 的[API 控制台中的](https://code.google.com/apis/console/)**API 访问**页面 ( ) 的**简单 API 访问**部分下找到您的。如果此部分不可用，您必须首先在**服务**页面上激活 Drive API 访问。**`API key`**

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T23:40:37.963

您包含的代码段有 2 个问题。

1.  在从 AccountManager获取新的 authToken 之前，您*必须*使旧的 authToken 无效。`authToken`

    ```
    AccountManager.get(activity).invalidateAuthToken("com.google", authToken);
    accountManager.getAuthToken(...); 
    ```

2.  调用`setJsonHttpRequestInitializer`必须使用在 API 控制台中为您的项目声明的简单 API 密钥。

    *   它可以通过访问[APIs Console](https://code.google.com/apis/console)获得。
    *   单击左侧菜单上的**API 访问。**
    *   查找**Simple API Access**并复制**API 密钥**。
    *   在构建 Drive 对象时设置 API 密钥。

        .setJsonHttpRequestInitializer(新的 GoogleKeyInitializer(KEY))

这里有一个小样本演示令牌失效：http: [//chiarg.com/ ?p=429](http://chiarg.com/?p=429)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:02:30.717

我尝试了所有这些，最后发现这段代码可以与谷歌日历 api 一起使用。每次我使用 GoogleCredentials 并将其传递给构建时，我都会得到 401。

```
HttpTransport transport = AndroidHttp.newCompatibleTransport();;
    JsonFactory jsonFactory = new GsonFactory();
    HttpRequestInitializer httpRequestInitializer;

    Log.i("Reached calendar builder", "Reached calendar builder"+accessToken);

    //GoogleCredential credential = new GoogleCredential();

     httpRequestInitializer = new HttpRequestInitializer(){
        public void initialize(HttpRequest request) throws IOException
        {
                request.getHeaders().setAuthorization(GoogleHeaders.getGoogleLoginValue(accessToken));
        }
    };

    Calendar service = new Calendar.Builder(transport, jsonFactory, httpRequestInitializer)
    .setApplicationName("Meetrbus/1.0")
    .setJsonHttpRequestInitializer(new GoogleKeyInitializer("API_KEY"))
    .build();

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:26:32.500

我在这里给出了关于在 Android 上使用 Google Drive 的广泛答案：

[Android 打开和保存文件到/从 Google Drive SDK](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk/12321331#12321331)

使用我在该答案中列出的方法，我可以确认您能够执行以下操作：

*   设置和访问元数据
*   上传文件
*   下载文件
*   在 Google Drive 目录之间移动文件
*   完全从驱动器中删除文件****

# jquery - jquery nth-child半冒号内的aritmethic

> ID：12405256
> 
> 赞同：0
> 
> 时间：2012-09-13T11:31:02.973
> 
> 标签：jquery

我可以在 jquery nth-child 分号内做算术吗？

例如：

```
alert($('img:nth-child(2+1)')); 
```

我检查了很多次，但我仍然无法收到警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:44:23.007

尝试这个：

```
alert($("img:nth-child("+(2+1)+")"); 
```

# c - Eclipse CDT - 共享库依赖问题

> ID：12405257
> 
> 赞同：2
> 
> 时间：2012-09-13T11:31:04.270
> 
> 标签：c, linux, eclipse, eclipse-cdt

我在 Eclipse 中有两个 C 共享库项目，分别称为“MyLibA”和“MyLibB”：

**测试A.h**

```
int Test1(void);
int Test2(void); 
```

**测试A.c**

```
#include "TestA.h"

int Test1(void) { return 1; }
int Test2(void) { return 2; } 
```

**测试B.h**

```
int Test(void); 
```

**测试B.c**

```
#include "TestB.h"
#include "TestA.h"

int Test(void) { return Test1() + Test2(); } 
```

“MyLibA”和“MyLibB”分别产生“libMyLibA.so”和“libMyLibB.so”。

我还有一个 C 可执行项目“MyExe”：

```
#include "TestB.h"

int main(void)
{
    Test();
    return 0;
} 
```

MyExe 的属性已设置，因此它知道在哪里可以找到“TestB.h”和“libMyLibB.so”。它还链接到“MyLibB”。

当我编译“MyExe”时，我收到以下错误和警告：

**错误：**

```
make: *** [MyExe] Error 1    
recipe for target `MyExe' failed 
```

**警告：**

```
libMyLibA.so, needed by libMyLibB.so, not found (try using -rpath or -rpath-link) 
```

如果我修改 MyExe 的属性，它们就会消失，MyExe 会构建文件，以便它知道在哪里可以找到“libMyLibA.so”并链接到它，但这并不理想。

例如，如果您使用的 .so 文件依赖于*许多*其他 .so 文件，那么您必须手动链接到它们。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:35:04.163

使用 -rpath 选项。

在 Eclipse CDT 中，右键单击“MyExe”项目 -> 属性 -> C/C++ 构建 -> 设置 -> 工具设置 -> ** C 链接器 -> 其他 -> 其他选项

添加

**-rpath "libMyLibA.so 的路径"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:04:01.787

我在 Linux 中做了同样的事情（不使用 Eclipse，通过终端手动）。工作正常。

所有 .so 文件都应复制到 /usr/lib 位置。如果完成，通过提及库名称本身，将建立链接。

```
gcc -fPIC -g -c -Wall A.c 
gcc -shared -Wl,-soname, -o libMyLibA.so   A.o

sudo cp libMyLibA.so /usr/lib

gcc -fPIC -g -c -Wall B.c -lMyLibA
gcc -shared -Wl,-soname, -o libMyLibB.so   B.o

sudo cp libMyLibB.so /usr/lib
gcc MyExe.c -lMyLibB -lMyLibA 
```

# jquery - Jquery Ajax 页面在提交时重新加载

> ID：12405258
> 
> 赞同：0
> 
> 时间：2012-09-13T11:31:04.050
> 
> 标签：jquery

我面临一个问题，当我提交页面（表单）时，提交到 php 邮件是成功的，但页面再次重新加载。尝试 return true 和 false 也 preventDefault() 但页面仍然重新加载。

```
$('#frmRequest').submit(function(e){
    //$('#SUBMIT').click(function(){
    var isValidForm = true;
    $('#RequestDetailsArea').find('input:visible, textarea:visible, select:visible').each(function(){
        if( $(this).val().length == 0|| $(this).val()=='Select' ) {
            $(this).addClass('validation');
            isValidForm = false;      
        }
        else {
            $(this).removeClass('validation'); 
            $('#ErrorRequest').addClass('hidden');           
        }
    });/* end check validation in RequestDetailsArea*/
    if (!isValidForm) {
        $('#ErrorRequest').removeClass('hidden');   
    }
    validreturn=validateForm();
    if(isValidForm && validreturn)
    {
        $('#RequestDetailsArea').find('div:hidden').each(function(){
            //alert($(this).attr('id'));
            $(this).remove();
        });

        msg="ok";
        $.ajax({
            url:"allfields.php",
            type:"POST",
            //      dataType:"json",
            data: $("#frmRequest").serialize(),
            success: function(msg){
                //alert("Form Submitted: "+ msg);
                return msg;

            },
            error: function() {
                alert('Error occured');
            }
        });
        e.preventDefault();

        //return false;
    }
});/* end of submit Function*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:43:49.960

在您的代码中，您已`e.preventDefault();`放入

```
if(isValidForm && validreturn)
{
    //...
    e.preventDefault();
} 
```

所以我认为如果你的条件不匹配，那么表单将被提交，因为方法的调用`e.preventDefault();`不会被执行。如果是这种情况，那么您可以将其排除在您的`if`条件之外，即

```
$('#frmRequest').submit(function(e){
    e.preventDefault();
    // rest of your code here
}); 
```

**更新：**`return msg`你在你的 中使用`success`，什么都不做，你可以这样做

```
success: function(msg){
    returnValue(msg); // call the function      
} 
```

并在脚本中声明`returnValue`某处，例如

```
function returnValue(data)
{
    // do something with data
} 
```

# php - 按索引偶数或奇数将数组拆分为两个数组

> ID：12405264
> 
> 赞同：21
> 
> 时间：2012-09-13T11:31:17.683
> 
> 标签：php, arrays, split

我有这个数组：

```
$array = array(a, b, c, d, e, f, g); 
```

我想根据索引是偶数还是奇数将它分成两个数组，如下所示：

```
$odd = array(a, c, e, g);

$even = array(b, d, f); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-13T11:35:36.693

一种解决方案，使用匿名函数和[`array_walk`](http://php.net/manual/en/function.array-walk.php)：

```
$odd = array();
$even = array();
$both = array(&$even, &$odd);
array_walk($array, function($v, $k) use ($both) { $both[$k % 2][] = $v; }); 
```

这仅通过数组就可以将项目分开，但这有点“聪明”。它并没有比经典更好，更冗长

```
$odd = array();
$even = array();
foreach ($array as $k => $v) {
    if ($k % 2 == 0) {
        $even[] = $v;
    }
    else {
        $odd[] = $v;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-13T11:34:50.323

使用[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)（PHP >= 5.6）：

```
$odd = array_filter($array, function ($input) {return $input & 1;}, ARRAY_FILTER_USE_KEY);
$even = array_filter($array, function ($input) {return !($input & 1);}, ARRAY_FILTER_USE_KEY); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T11:34:04.397

我不确定这是否是最优雅的方式，但它应该很有魅力：

```
$odd=array();
$even=array();
$count=1;
foreach($array as $val)
{
    if($count%2==1)
    {
        $odd[]=$val;
    }
    else
    {
        $even[]=$val;
    }
    $count++;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-06T12:09:09.450

作为一个几乎单线的人，我认为这将是我最喜欢的：

```
$even = $odd = array();
foreach( $array as $k => $v )  $k % 2  ?  $odd[] = $v  :  $even[] = $v; 
```

或者多一点？速度：

```
$even = $odd = array();
foreach( $array as $k => $v )  ( $k & 1 ) === 0  ?  $even[] = $v  :  $odd[] = $v; 
```

更详细的变体：

```
$both = array( array(), array() );
// or, if $array has at least two elements:
$both = array();

foreach( $array as $k => $v )  $both[ $k % 2 ][] = $v;
list( $even, $odd ) = $both; 
```

与`array_chunk`：

```
$even = $odd = array();
foreach( array_chunk( $array, 2 ) as $chunk ){
  list( $even[], $odd[] ) = isset( $chunk[1]) ? $chunk : $chunk + array( null, null );
  // or, to force even and odd arrays to have the same count:
  list( $even[], $odd[] ) = $chunk + array( null, null );
} 
```

如果 $array 保证有偶数个元素：

```
$even = $odd = array();
foreach( array_chunk( $array, 2 ) as $chunk )
  list( $even[], $odd[] ) = $chunk; 
```

PHP 5.5.0+ 与`array_column`：

```
$chunks = array_chunk( $array, 2 );
$even = array_column( $chunks, 0 );
$odd  = array_column( $chunks, 1 ); 
```

旧的 PHP 版本类似。键将是 0,2,4,... 和 1,3,5,...。如果你不喜欢这个，`array_values`也申请一个：

```
$even = array_intersect_key( $array, array_flip( range( 0, count( $array ), 2 )));
$odd  = array_intersect_key( $array, array_flip( range( 1, count( $array ), 2 ))); 
```

或者

```
$even = array_intersect_key( $array, array_fill_keys( range( 0, count( $array ), 2 ), null ));
$odd  = array_intersect_key( $array, array_fill_keys( range( 1, count( $array ), 2 ), null )); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-16T11:42:00.823

使用 array_chunk 和 array_map 的另一种功能解决方案。当源数组的大小为奇数时，最后一行从第二个数组中删除空项

```
list($odd, $even) = array_map(null, ...array_chunk($ar,2));
if(count($ar) % 2) array_pop($even); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T11:35:31.010

只需循环它们并检查密钥是偶数还是奇数：

```
$odd = array();
$even = array();
foreach( $array as $key => $value ) {
    if( 0 === $key%2) { //Even
        $even[] = $value;
    }
    else {
        $odd[] = $value;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-13T11:36:19.597

一

```
$odd = $even = array();
for ($i = 0, $l = count($array ); $i < $l;) { // Notice how we increment $i each time we use it below, by two in total
    $even[] = $array[$i++];
    if($i < $l)
    {
       $odd[] = $array[$i++];
    }
} 
```

二

```
$odd = $even = array();
foreach (array_chunk($array , 2) as $chunk) {
    $even[] = $chunk[0];
    if(!empty( $chunk[1]))
    {
       $odd[] = $chunk[1];
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-29T14:00:39.940

```
$odd = [];
$even = [];
while (count($arr)) {
    $odd[] = array_shift($arr);
    $even[] = array_shift($arr);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-31T07:24:57.450

基于@Jon 的第二个变体，我制作了以下内容**以与 PHP Smarty v3 模板引擎一起使用**。这是用于显示具有一列或两列模板模型的新闻/博客。

在 MySql 查询之后，我将执行以下代码：

```
if(sizeof($results) > 0) {
    $data = array();
    foreach($results as $k => $res) {
        if($k % 2 == 0) {
            $res["class"] = "even";
            $data["all"][] = $data["even"][] = $res;
        }
        else {
            $res["class"] = "odd";
            $data["all"][] = $data["odd"][] = $res;
        }
    }
} 
```

我使用 Smarty 的 use 语法获得了一个包含 3 个子数组（包括奇数/偶数类）的数组：

1.  所有项目`{foreach $data.all as $article}...{/foreach}`
2.  仅奇数项`{foreach $data.odd as $article}...{/foreach}`
3.  仅偶数项`{foreach $data.even as $article}...{/foreach}`

希望它可以帮助一些人...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-26T16:00:00.477

```
 <?php

$array1 = array(0,1,2,3,4,5,6,7,8,9);
$oddarray = array();
$evenarray = array();

$count = 1;

echo "Original: ";
foreach ($array1 as $value)
 {
    echo "$value";
}

echo "<br> Even: ";

foreach ($array1 as $print) 
{
    if ($count%2==1) 
    {
        $evenarray = $print;
        echo "$print";
    }
    $count++;
}

echo "<br> Odd: ";

foreach ($array1 as $print2) {
    if ($count%2!=1) 
    {
        $oddarray[] = $print2;
        echo "$print2";
    }
    $count++;
}

?>

Output:

Original: 0123456789
Even: 02468
Odd: 13579 
```

# seo - Robots.txt 排除模式

> ID：12405265
> 
> 赞同：0
> 
> 时间：2012-09-13T11:31:18.027
> 
> 标签：seo, robots.txt

我希望忽略来自 bingbot 的所有包含查询字符串变量的 URL，`at1=`但我不清楚应该使用的模式。

其中之一应该工作吗？

```
User-agent: bingbot
Disallow: /*at1=
Disallow: *at1=* 
```

为了确认，我可以有一个这样的 URL：

```
/some-page?at1=4&ca1=5&op1=8 
```

我仍然想`/some-page`被访问，但当列出的 URL 有查询字符串参数时不想访问

**编辑**

一位海报实际上提出了一个 PHP 解决方案，该解决方案在细粒度定位方面可能有意义，但我不确定发送什么正确的 HTTP 状态代码来告诉蜘蛛它不受欢迎。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:32:38.373

```
if ( strstr($_SERVER['HTTP_USER_AGENT'], "www.bing.com/bingbot.htm") and isset($_GET['at1']) ) :
        @header("HTTP/1.0 480 Temporarily Unavailable");
        die;
endif; 
```

# javascript - 如何处理node.js node-mongodb中的连接和查询队列？

> ID：12405270
> 
> 赞同：0
> 
> 时间：2012-09-13T11:31:35.067
> 
> 标签：javascript, node.js, mongodb

我不清楚如何使用该连接和查询集合。因为有时连接已经存在并且没有问题。但是当需要建立连接时，集合查询不会排队。你也不能一直建立新的联系，因为你可以（而且应该）只建立一个。似乎您需要在连接回调中进行集合查询，但在连接已经存在时也需要独立。

当然，这是不可撤消的，但是由于开销很大，我想我做得不对。毕竟，这对我来说似乎有点*句法糖精*。 **[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)****在哪里？**

这是一个基本的例子。想象一下同一秒内的一堆请求：

```
var util        = require('util'),
    mongo       = require('mongodb'),
    Server      = mongo.Server,
    Db          = mongo.Db,
    mServer     = new Server('localhost', 27017),
    mDb         = new Db('SomeDatabase', mServer),
    db;

if (mDb._state == 'disconnected') {
    util.debug('MONGODB: connecting...');
    mDb.open(function(err, newDb) {
        if (!err) {
            db = newDb;
            // I cannot immediately work on a collection here, 
            // because it takes a moment for the db to connect.
        }
    });
}
else if (mDb._state == 'connecting') {
    // I need to catch this state because I cannot work on collections yet, 
    // but I cannot connect either because it's already connecting.
}
// else if (mDb._state == 'connected') {

// Queries need to be performed after connection is established 
// or when connection was already established by a previous request.
db.createCollection(collection, function(err, collection) {
    if (!err) {
        collection.insert(record, {safe:true}, function(err, result) {
            util.debug('MONGODB: Inserted.');
        });
    }
});

// } 
```

现在，我找到的初学者指南都是关于回调的`mDb.open`，但是当节点已经运行时，这会给连续请求带来问题。它拒绝打开另一个连接。那么，当单个启动回调不够时**，在 nodejs 中使用 mongodb 的正确方法是什么？**

我想象一个你以回调形式传递查询的模块，它为你传递回调，或者（1）到它等待连接回调的地方，（2）直接到集合，或者（3）等待连接，但连接回调为时已晚。但就像我说的，这是纯粹的句法糖精。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:40:09.170

你误解了一些东西。首先创建与 DB 的连接：

```
var mDb = new Db('SomeDatabase', mServer); 
```

并且您持有对此连接的引用。每当您想从/向 DB 加载/保存某些内容时，都使用**相同的**变量。您不会在每次请求时都重新创建它。甚至在创建 Web 服务器本身之前就应该进行初始化（在`open`回调时创建服务器）。这是一个伪代码：

```
var webserver = INITIALIZE_NEW_SERVER( );
var mDB = new Db('SomeDatabase', mServer);

// set request handler
WHEN_REQUEST ---> {
    mDB.createCollection( ... );
    // whatever
}

mDb.open(function(error, newDb) {
    // handle errors
    webserver.listen( );
}); 
```

# sql - 为什么 null <> "something" 返回 false

> ID：12405272
> 
> 赞同：1
> 
> 时间：2012-09-13T11:31:51.197
> 
> 标签：sql, plsql, oracle11g

当我在一个 oracle 数据库中调试一个过程时，我遇到了一些关于 NULL 值让我感到惊讶的事情。任何人都可以解释为什么以下查询在此处为不相等检查返回 false 吗？

```
DECLARE
    vNullVariable VARCHAR2(2) := NULL;
    vVariable VARCHAR2(2) := 'Hi';
BEGIN
    IF vNullVariable <> vVariable THEN
        dbms_output.put_line( 'The variables are not equal' );
    ELSE
        dbms_output.put_line( 'The variables are equal' );
    END IF;
END; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T11:45:03.170

这是因为 SQL 使用三值逻辑 (3VL)：有**TRUE**、有**FALSE**和**NULL**（未知，既不是 TRUE 也不是 FALSE）。

表达式的结果`vNullVariable <> vVariable`在 3VL 中是 NULL，而不是 TRUE，因为它认为 vNullVariable 的值是未知的：如果稍后它变成一个已知值，它可能是 'Hi' 或者它可能不是，但现在 SQL不知道所以它返回 NULL（未知）。

所以 IF 表达式的计算结果为 NULL，而不是 TRUE，因此采用默认的 ELSE 路径 - 因为如果 IF 的逻辑是：

```
IF <expression is true> THEN
   ...
ELSE -- ie. if expression is FALSE or NULL
   ...
END IF; 
```

这意味着如果您以相反的方式编写检查，您**将**获得预期的行为：

```
IF vNullVariable = vVariable THEN
    dbms_output.put_line( 'The variables are equal' );
ELSE
    dbms_output.put_line( 'The variables are not equal' );
END IF; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:46:33.590

NULL 在 Oracle 上有奇怪的行为。要将某些内容与 null 进行比较，最好使用 IS NULL 而不是 '=NULL'

[在这里](http://thinkoracle.blogspot.com.es/2005/06/nulls-in-oracle.html)你有一个很好的解释

在您的代码中，您可以使用

```
IF vVariable IS NOT NULL THEN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:00:29.970

在 Oracle 中，NULL 既不等于也不等于 NULL。计算两个 NULL 的比较条件将始终为 FALSE。以下涉及 NULL 的条件将是有效的。

```
1\. IF vNullVariable is NULL THEN
2\. IF vNullVariable is not NULL THEN
3\. IF NVL(vNullVariable, -1) <> NVL(vVariable, -1) THEN -
    This condition will give you expected result even if both vNullVariabl 
    and vVariable are NULLs
4\. Oracle considers two nulls to be equal when evaluating a DECODE function 
```

例如，如果`DECODE`函数的第一个和第二个参数是，以下查询将为您提供 1`NULLs`

```
 select decode(null, null, 1) res
      from dual;

 res
-------
  1 
```

# python - Django：找不到manage.py自定义命令

> ID：12405274
> 
> 赞同：3
> 
> 时间：2012-09-13T11:32:13.430
> 
> 标签：python, django, command

当我做`python manage.py help`

```
[myapp]
        update_overall_score 
        update_periodic_score 
```

列出了我的自定义命令，我可以在其中运行`update_periodic_score`，`python manage.py update_periodic_score`但是当我尝试另一个命令时，我得到了`Unknown command: 'update_overall_score'`错误。

会有什么问题？这两个文件都放在所有`myapp/management/commands`目录`__init__.py`中的目录中。

这是我的 update_overall_score.py，

```
from django.core.management.base import BaseCommand, CommandError
from myapp.models import Users

class Command(BaseCommand):
    """
    Updates the overall_score field of every user.
    """
    def handle(self, *args, **options):
        all_users = Users.objects.all()
        try:
            for user in all_users:
                likes = user.likes_received.count()
                stars = user.stars_received.count()
                user.overall_score = likes + stars
                user.save()
        except Exception, e:
            print e
            return
        print "Updated Overall Score."
        return 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:51:36.213

我有同样的问题。在通过 manage.py 代码搜索了几个小时后，它显示这是由我的设置文件配置引起的。我使用 Mezzanine 作为我的 CMS。当您使用它时，Mezzanine 表示您可以将一些应用程序放在 OPTIONAL_APPS 变量下，所以我将自定义应用程序放在此变量下，但不在 INSTALLED_APPS 下。移回 INSTALLED_APPS，一切都开始按预期工作。

确保您的应用程序位于 INSTALLED_APPS 下。manage.py 看起来就是这个常量。

# java - struts2 中 DispatchAction 类的替代方案

> ID：12405275
> 
> 赞同：0
> 
> 时间：2012-09-13T11:32:17.843
> 
> 标签：java, struts2, struts, struts-1

我正在从 struts1 移动到 struts2，并且我已经在 struts2 中成功创建了简单的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:41:24.893

不会延长课程；在动作配置中使用[“method”属性，](http://struts.apache.org/2.x/docs/action-configuration.html#ActionConfiguration-ActionMethods)如果使用基于注解的配置，则直接注解方法。您还可以使用[通配符操作](http://struts.apache.org/2.x/docs/action-configuration.html#ActionConfiguration-WildcardMethod)来避免手动配置。

如果这对您不起作用，请具体说明您的需求是什么，以及为什么这不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:41:55.980

`DispatchAction`帮助我们将一组相关功能组合成一个动作。在 Struts 2 中，默认情况下所有的动作都提供了这个功能。要使用此功能，我们需要创建具有相似签名的不同方法 execute() 方法，只是方法的名称发生了变化。

例如，您可以为用户处理创建一个操作，其中包括创建、删除更新用户等方法

```
public class UserAction extends ActionSupport{

    private String methodName;

    public String execute()
    {
        methodName= "Inside execute method";
        return SUCCESS;
    }

    public String add()
    {
        methodName= "Inside add method";
        return SUCCESS;
    }

    public String update()
    {
        methodName= "Inside update method";
        return SUCCESS;
    }
} 
```

# php - PHP 进度条可以与 $_SESSION 一起使用吗？

> ID：12405276
> 
> 赞同：0
> 
> 时间：2012-09-13T11:32:17.277
> 
> 标签：php, javascript, jquery, jquery-ui, progress-bar

我们想将 Jquery 进度条与 PHP 集成。我们已经实现了 $_SESSION，但是根据我们的要求，我们没有得到确切的值。

请查看我们的代码。

**HTML**

```
<!DOCTYPE html>
<html>
<head> 
    <title>Jump for Joy</title> 
    <link href="styles/my_style.css" rel="stylesheet">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<style type="text/css">

 #bardivs {
   width:400px;
  position:relative;
  }
 #progresstext {
position:absolute;
top:0;
left:0;
}
 </style>
   <script>
   $(document).ready(function() {
       $("#sub").click( function() {
$.ajax({ 
  type : 'POST',
  url : 'http://localhost/tools/ip/html/demo.php',
  dataType : 'html',
  data: {
      camp_url : $('#camp_url').val(),
      captcha :  $('#captcha').val()
  },
  success : function(data){
  $('#message').removeClass().addClass(data).html(data).show(500);
  $("#progressbar").delay(100).hide(200);}

});
  var url = "http://localhost/tools/ip/html/xyz.php";
$(function() {
    $("#progressbar").progressbar({ value: 0 });
    setTimeout(function(){ updateProgress(0); }, 1000);
});

function updateProgress(data) {
    $.get(url+'?progress='+data, function(data) {
        // data contains whatever that page returns     
        if (data < 100) {
            $("#progressbar").progressbar({value: parseInt(data)});
            setTimeout(function(){ updateProgress(data); }, 1000);
    } else {
        $("#progressbar").progressbar({value: 100});
        $("#progressbar").delay(100).hide(200);
        }

  }); 
}
   });
 });
 </script>
    </head> 
    <body>
    <div id="header">
            <h2>Jump for Joy Sale</h2>
        </div>
           <div id="main">
            <div id="bardivs">
    <div id="progressbar"></div> 
    <div id="progresstext"></div>
    </div>
           <div id="message"  style="display: none;">
</div>
 <input type="submit" name="check" id="sub" value="submit">
    </div>
</body>
 </html> 
```

**演示.php**

```
<?php
session_start();
$set = $_SESSION['size'] ;
$array = array(100,200,300,400,500,600,700,800,900,1000);
$ab = 1 ;
@$size=sizeof($array);
$size = round(100/$size);
foreach($array as $a){
    echo $a ;
    sleep(1);
$_SESSION['size'] = $set + $size ;  
}
?> 
```

**xyz.php**

```
<?php
session_start();
if(@$_SESSION['size'] <=100) {
    header("Refresh: 1; url=xyz.php");
}
@$_SESSION['size'];
   $set = (int)@$_GET['progress'] + @$_SESSION['size'];
   echo (int)$set ;
?> 
```

我们在进度条处理之后得到数据，但没有得到进度条。

谢谢

聚苯乙烯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:37:49.310

这正是您正在使用的代码吗？如果是这样，请切换它，`sleep(1)`因为`sleep(1000)`它可能只是 demo.php 在您的指标发出请求时实际上已经完成。

# google-maps-api-3 - 将 url 添加到 Google Static Maps API

> ID：12405285
> 
> 赞同：1
> 
> 时间：2012-09-13T11:32:39.903
> 
> 标签：google-maps-api-3

我正在使用 Google 的静态地图 API 将地图图像添加到我们客户的网站。我希望它能够点击进入主要的谷歌地图站点。如何找到用于此链接的 URL？

我查看[了文档](https://developers.google.com/maps/documentation/staticmaps/)，但似乎没有提到它，并且示例地图都没有链接。

我的静态地图图像是：

```
<img src="http://maps.googleapis.com/maps/api/staticmap?zoom=14&size=560x370&maptype=roadmap&markers=color:red%7Ccolor:red%7Csize:small%7C51.466848,-0.1428261&sensor=false" alt="" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:10:26.553

使用[https://maps.google.com/maps](https://maps.google.com/maps)并将 lat&lng 添加为 q 参数

[https://maps.google.com/maps?q=51.466848,-0.1428261](https://maps.google.com/maps?q=51.466848,-0.1428261)

# android - 无法在 Horizo ntalScroll 视图上显示图像按钮

> ID：12405286
> 
> 赞同：1
> 
> 时间：2012-09-13T11:32:45.643
> 
> 标签：android, android-layout, android-widget

xml:

```
<com.android.pagescroller.Pager
    android:id="@+id/scrollView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1.0" >
</com.android.pagescroller.Pager>

<ImageButton
    android:id="@+id/image_gun"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_gravity="left"
    android:background="@drawable/gun"
    android:clickable="true"
    android:gravity="right" />

<ImageButton
    android:id="@+id/image_hat"
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:layout_gravity="right"
    android:background="@drawable/hat"
    android:clickable="true"/> 
```

爪哇：

```
 scroller = ((Pager)findViewById(R.id.scrollView));

   LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    for (int i = 0; i < NUM_PAGES; i++) {
        View pageView = layoutInflater.inflate(R.layout.page, null);
        ((TextView) pageView.findViewById(R.id.pageText)).setText(jokes[i]);
        //pageView.setBackgroundColor(COLORS[i % COLORS.length]);

        scroller.addPage(pageView);

    }

    im = (ImageButton)findViewById(R.raw.gun);
    im.setOnClickListener(new OnClickListener(
            ) {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mysound = (MediaPlayer)MediaPlayer.create(PageScrollerActivity.this, R.raw.gun);
        }
    });
} 
```

我正在使用寻呼机使用水平滚动视图，我需要为滚动视图中的所有页面制作一些通用的图像按钮。当我尝试完成它时，我失败了，因为似乎没有调用 Image Button 的 OnClick 事件。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:05:05.220

如果按钮对滚动视图中的所有页面都是通用的，我建议将它们放在滚动视图之外。将处理程序放在托管滚动视图的活动中。

# asp.net - 如何在 Asp.Net 中显示配置文件的完整性

> ID：12405293
> 
> 赞同：0
> 
> 时间：2012-09-13T11:33:06.030
> 
> 标签：asp.net, progress-bar

我想在使用 Ajax 或 JQuery 的我的 ASP.Net Web 应用程序中显示像[Naukri这样的用户配置文件的进度条。](http://www.naukri.com)条形图显示完成的配置文件的百分比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:44:38.233

[进度条](http://jurgens-nettuts-tutorial.s3.amazonaws.com/ASPNET.ProgressBar.pdf) 本教程包含进度条工作所需的所有详细信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:50:24.147

好吧，在 Asp.net 中没有任何东西可以提供，他们做什么（根据我的说法）。检查您的个人资料中填写的字段。即某些字段是强制性的，因此它们会在其网站上显示您的个人资料的 60% 的完整性。如果您上传您以前的体验，他们会检查用户是否已填写，然后他们会将完整性进度推进到 80%，依此类推。

根据我的理解，这就是这样做的好方法......

# entity-framework - 如何从解决方案资源管理器中选择特定实体图

> ID：12405296
> 
> 赞同：4
> 
> 时间：2012-09-13T11:33:15.643
> 
> 标签：entity-framework, visual-studio-2012

在 Visual Studio 2012 中，我们可以将一个实体框架模型拆分为多个图表。不过，似乎没有任何方法可以从解决方案资源管理器中打开特定图表。目前，您似乎必须打开默认图表，然后从模型浏览器中选择您想要的图表，同时让您在自己的选项卡中打开默认图表。我错过了什么吗？这不是世界末日，但似乎很明显错过了。从逻辑上讲，我希望将每个图表视为模型/edmx 节点的子节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T16:43:11.153

在这种情况下，似乎没有比每次打开主模型并通过模型浏览器执行此操作更好的解决方案了。我现在倾向于将我的默认模型保留为空，以减少加载它和访问模型浏览器的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T16:21:59.757

旧帖子，但这是一个答案……据我所知，别无选择。

如果您在解决方案资源管理器中查看 .diagram，您可以看到单个文件包含两个图表。由于它是一个 .xml 文件，因此它没有子节点，这与您可以查看单个方法等的 .cs 文件不同。

我通常将模型浏览器始终作为选项卡打开，因此打开替代图表并不难。

# cordova - 需要在电话间隙弹出屏幕或自定义警报

> ID：12405300
> 
> 赞同：3
> 
> 时间：2012-09-13T11:33:22.057
> 
> 标签：cordova

有什么方法可以在 phonegap 中制作自定义警报或弹出屏幕。实际上我想制作具有 3 行的警报（示例）。单击第一行时，它将显示该行的描述（通过扩展长度）。但是在单击第二行时，它将关闭第一行的描述并打开第二行的描述。

你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:08:56.173

如果你只想显示一个警报，你可以只使用 JavaScript：alert();

对于自定义警报，您可以使用 SimpleModal 之类的插件：

[http://simplemodal.plasm.it/](http://simplemodal.plasm.it/)

如果您需要高级自定义，可以尝试 ShadowBox：

[http://www.shadowbox-js.com/](http://www.shadowbox-js.com/)

# xml - 通过 CGI 打印 XML/XSLT 数据

> ID：12405304
> 
> 赞同：1
> 
> 时间：2012-09-13T11:33:35.923
> 
> 标签：xml, xslt, cgi

我有一个 Perl-CGI 脚本，它以 XML 格式从服务器获取数据。数据收集在一个变量中。我创建了一个 XSLT 表并修改了变量以在其中添加 XSLT 标记。但是，它无法加载 XSLT 文档。

这是代码片段：

```
my $retData = &postData($qStr); <--- Gets data from server
my @val = split("\n",$retData);
$curr_index = 0;
my @temp_arr;
for my $temp (@val) {
   if ($curr_index == 0) {
      push(@temp_arr,$temp);
        push(@temp_arr,"\<\?xml-stylesheet type\=\"text\/xsl\" href\=\"myquery.xsl\"\?\>");
       } else {
         push @temp_arr,$temp;
       }
      $curr_index++;
    }
    @val = @temp_arr;

   my $message = join ("\n",@temp_arr);
   print "Content-Type: text/xml\r\n";
   print "\r\n";
   print "$message\n"; 
```

使用 FF 浏览器打开时收到此错误消息：

加载样式表时出错：加载 XSLT 样式表时发生网络错误：http://<machine_name>/cgi-bin/myquery.xsl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:24:26.280

最后它奏效了。

在 XSL 文件前添加“/”

push(@temp_arr,"\<\?xml-stylesheet type\=\"text/xsl\" href\=\"/myquery.xsl\"\?>");

并根据 Apache 设置将 XSK 文件复制到“Doc​​umentRoot”

就我而言，“DocumentRoot”设置为“/var/www/html”

# jquery - jQuery根据文件类型上传到预设URL

> ID：12405305
> 
> 赞同：1
> 
> 时间：2012-09-13T11:33:39.650
> 
> 标签：jquery, upload

我需要一个上传系统，它可以根据文件类型上传到特定的预设 URL，例如：

图片将上传到“exampleserver.com/upload/image”，视频将上传到“exampleserver.com/upload/video”。

我查看了[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)但我无法修改代码（可能是缺乏 JQuery 插件经验）

上传系统确实需要支持多文件选择和跨浏览器兼容（IE6除外）。

非常感谢您对上述 Jquery 文件上传插件的代码提出任何建议或修改。

**编辑**：上传图像和视频的服务器不是我的，它们是 Facebook 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:19:20.377

为此，您的客户需要支持 HTML5、File、FileList 和 Blob。你可以看到一个[演示](http://www.html5rocks.com/en/tutorials/file/dndfiles/)它是如何工作的。

更改上传器中的设置非常简单：（[文档](https://github.com/blueimp/jQuery-File-Upload/wiki/API)找到“选项”）

```
$('#fileupload').fileupload(
    'option',
    'url',
    '/path/to/upload/handler.json'
); 
```

我建议您将图像和视频提交到相同的位置并在服务器端进行检查。这将使您的生活更轻松。

编辑：
这是检查扩展并将图像和视频提交到不同脚本的方法：

```
function checkFileExtension(file) {
    var extension = file.name.split('.').pop().toLowerCase();
    var image_extensions = ['gif', 'png', 'jpg', 'jpeg'];
    var video_extensions = ['mp4', 'avi', 'wmv'];
    // The file extension is not in the array
    if ($.inArray(extension, image_extensions) >= 0)
        return "image";
    else if ($.inArray(extension, video_extensions) >= 0)
        return "video";
    else
        return "notAllowed";
}

// Initialize the jQuery File Upload widget:
$('#fileupload').fileupload({
    // This is triggered when you drag'n'drop a file over the uploader
    drop:  function (e, data) {
        $.each(data.files, function (index, file) {
            // The file doesn't pass checkFileExtension, return an error
            var extension = checkFileExtension(file);
            if (extension != "image" && extension != "video") {
                // Print an error message in the UI
                file.error = "File extension not allowed!";
            }
        });
    },
    // This is triggered when you click a button and select files from a list.
    change:function (e, data) {
        $.each(data.files, function (index, file) {
            // The file doesn't pass checkFileExtension, return an error
            var extension = checkFileExtension(file);
            if (extension != "image" && extension != "video") {
                // Print an error message in the UI
                file.error = "File extension not allowed!";
            }
        });
    },
    // This is triggered on every file in the queue when you click "Upload"
    submit: function (e, data) {
        // The file is an image - submit those to
        if (checkFileExtension(data.files[0]) == "image") {
            $('#fileupload').fileupload(
                'option',
                'url',
                '/upload/images'
            );
        }
        // The file is a video.
        else if(checkFileExtension(data.files[0]) == "video"){
            $('#fileupload').fileupload(
                'option',
                'url',
                '/upload/videos'
            );
        }
        // The file is not a video/image - don't submit the file.
        else {
            return false;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T12:08:42.897

查看您链接到的文件上传组件的文档后，它显示“适用于任何服务器端平台”，因此您仍然必须在服务器端实现一些东西。这里有几个开始的链接：

简单介绍：[http ://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

php手册入口： http: [//php.net/manual/en/features.file-upload.php](http://php.net/manual/en/features.file-upload.php)

# magento - Magento EE 1.11.1，移动主题的全页缓存问题？

> ID：12405307
> 
> 赞同：2
> 
> 时间：2012-09-13T11:34:03.770
> 
> 标签：magento, caching

我浏览了很多论坛，但我无法解决 Magento EE 1.11 版本中的 FPC 问题。当我浏览移动主题时，由于 FPC，它正在使用 web 主题。如果我禁用 FPC，性能会下降。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:59:30.803

主题不用作 FPC uri 的一部分，因此每个包只有一个缓存。

我写了一个小扩展来解决这个问题，你可以在 Github 上获取它。

[https://github.com/benjy14/MobileFpcFix](https://github.com/benjy14/MobileFpcFix)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T21:14:44.133

一个不需要任何代码修补的简单解决方案：

将具有与主题部分中的正则表达式相同的异常添加到包部分中，并将其链接到与“当前包名称”设置为完全相同的包名称。

**先决条件：**
主题级别的每个部分只有一个例外，例如，`iPhone|iPad -> iphone`
（而不是`iPhone -> iphone`+ `iPad -> iphone`）

**解释为什么它起作用：**
企业页面缓存在生成cacheid时考虑了包异常。
但是，它不会检查包名称是否相同！
所以即使异常包与主包相同，也会生成不同的cacheid，而且由于主题部分的正则表达式异常相同，它们将使用新的chacheid存储在全页缓存中。

**示例：** 在“企业”包中，有 2 个主题“默认”和“iPhone”。
您希望通过`iPhone|iPad` 在“主题”小节中添加“模板”、“皮肤”和“布局”的例外来运行主题“iphone”。

在“包”小节中：
将“当前包名称”设置为“企业”。使用-> "enterprise"
将例外添加到包中`iPhone|iPad`

在“主题”小节中：
将例外添加到“模板”，`iPhone|iPad -> enterprise`
将例外添加到“皮肤”，`iPhone|iPad -> enterprise`
将例外添加到“布局”，`iPhone|iPad -> enterprise`
将“默认”设置为“默认”

**注意：** 测试前不要忘记在 System->Cache Management 中清除 FPC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T18:58:46.777

我感觉 Enterprise/PageCache 中的设计异常支持在*包*级别而不是*主题*级别上工作。查看 app/code/core/Enterprise/PageCache/Model/Observer.php 中引用设计异常的代码。我的第一个建议是联系 EE 支持，也许他们可以提供适当的解决方案或补丁。或者，您可以通过重写 enterprise_pagecache/processor 来修改缓存密钥机制：

```
public function prepareCacheId($id)
{
    $package         = Mage::getDesign()->getPackageName();
    $templateTheme   = Mage::getDesign()->getTheme('template');
    $id              = $id.'_'.$package.'_'.$templateTheme;
    return parent::prepareCacheId($id);
} 
```

# android - 导入 OpenIntents 以在 Android 应用程序中使用 OI 文件管理器

> ID：12405313
> 
> 赞同：2
> 
> 时间：2012-09-13T11:34:41.927
> 
> 标签：android, android-intent, import, file-browser

我想在我的应用程序中使用 OI 文件管理器作为集成文件浏览器来搜索和选择文件。

我可以使用以下命令实现浏览器：

```
Intent intent = new Intent("org.openintents.action.PICK_FILE");
startActivityForResult(intent, 1); 
```

然后看了一下demo例子，有问题，如果要导入

```
import org.openintents.intents.FileManagerIntents; 
```

我在 Eclipse 中收到以下错误：

```
The import org.openintents cannot be resolved 
```

问题是什么？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T16:23:50.380

你不需要导入任何东西。

```
Intent intent = new Intent("org.openintents.action.PICK_FILE");
startActivityForResult(intent, 1); 
```

上述行将调用设备上已安装的 OI 文件管理器并运行 PICK_FILE 操作。

# spring - 通过@Resource 注解的WebServiceContext 注入问题

> ID：12405318
> 
> 赞同：6
> 
> 时间：2012-09-13T11:34:55.987
> 
> 标签：spring, jax-ws

我在通过 @Resource 注释注入 WebServiceContext 时遇到问题。我正在使用 JAXWS + Spring 组合。这是我使用的一段代码。

```
@WebService 
public class AdminWSImpl {

  @Resource
  private WebServiceContext context;

...
} 
```

我的 web.xml 的一部分：

```
...
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener>

<servlet>
    <description>JAX-WS endpoint of Admin Service</description>
    <display-name>JAX-WS Admin servlet</display-name>
    <servlet-name>AdminService</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>context</servlet-name>
    <servlet-class>org.springframework.web.context.ContextLoaderServlet</servlet-class>     
    <load-on-startup>2</load-on-startup>
</servlet>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

问题是上下文总是空的！根据[How to use @Resource WebServiceContext injection with Spring's @Transactional](https://stackoverflow.com/questions/5820969/how-to-use-resource-webservicecontext-injection-with) springs-transactional 我已经定义了上下文的设置器并将@Resource注释放在设置器上。

将 @Resource 注释放在 setter 上的结果是这个堆栈跟踪：

```
SEVERE: WSSERVLET11: failed to parse runtime descriptor:   javax.xml.ws.WebServiceException: Unable to create JAXBContext
javax.xml.ws.WebServiceException: Unable to create JAXBContext
    at com.sun.xml.ws.model.AbstractSEIModelImpl.createJAXBContext(AbstractSEIModelImpl.java:171)
    at com.sun.xml.ws.model.AbstractSEIModelImpl.postProcess(AbstractSEIModelImpl.java:99)
    at com.sun.xml.ws.model.RuntimeModeler.buildRuntimeModel(RuntimeModeler.java:250)
    at com.sun.xml.ws.server.EndpointFactory.createSEIModel(EndpointFactory.java:343)
    at com.sun.xml.ws.server.EndpointFactory.createEndpoint(EndpointFactory.java:205)
    at com.sun.xml.ws.api.server.WSEndpoint.create(WSEndpoint.java:513)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:257)
    at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:151)
    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.parseAdaptersAndCreateDelegate(WSServletContextListener.java:131)
    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:152)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:563)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1399)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1500)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:252)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at com.googlecode.psiprobe.Tomcat60AgentValve.invoke(Tomcat60AgentValve.java:30)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
   Caused by: java.security.PrivilegedActionException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
    javax.xml.ws.WebServiceContext is an interface, and JAXB can't handle interfaces.
    this problem is related to the following location: 
```

任何人都可以提供任何帮助吗？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T08:17:01.930

我找到了现在有效的解决方案！我将 WebService 注释与 endpointInterface 属性一起添加，并添加了由 wsimport 生成的类实现 Admin 接口。我的 web.xml 与问题中描述的保持一致！

```
 @WebService(endpointInterface = "my.app.admin.Admin")
  public class AdminWSImpl implements Admin{

  @Resource
  private WebServiceContext wsContext;

  public void setWsContext(WebServiceContext wsContext) {
    this.wsContext = wsContext;
}
 } 
```

# parallel-python - 必须使用命令行选项或配置文件设置机密

> ID：12405322
> 
> 赞同：0
> 
> 时间：2012-09-13T11:35:03.350
> 
> 标签：parallel-python

我已经在 python 中编写了一个并行编程代码。我为此使用了 pp 模块。

job_server = pp.Server(ncpus, ppservers=ppservers)

其中 ncpus=8 不是。我系统中的核心。

蟒蛇版本：2.6.5。

pp版本：1.6.2。

但我面临如下错误，

```
Traceback (most recent call last):
File "/home/a3rmt/LIVE_ECG/file_video.py", line 613, in <module>
  MakeImagesThread(array_file)
File "/home/a3rmt/LIVE_ECG/file_video.py", line 502, in MakeImagesThread
  job_server = pp.Server(ncpus, ppservers=ppservers)
File "/usr/lib/pymodules/python2.6/pp.py", line 366, in __init__
  raise ValueError("secret must be set using command-line option or configuration file")
ValueError: secret must be set using command-line option or configuration file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:47:45.237

正如[手册所解释](http://www.parallelpython.com/content/view/15/30/#SECURITY)的，您需要提供一个密钥来保证进程之间的通信安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T23:50:39.203

尝试：

```
job_server = pp.Server(ncpus, ppservers=ppservers, secret="password") 
```

其中“密码”是您的秘密，在设置 ppserver 时使用，例如。

> ppserver -s 密码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T20:30:44.193

似乎这是旧版本 pp (version < 1.6.4) 的问题。我手动重新安装了 pp 版本 1.6.4，问题就消失了。下载链接是：[https ://pypi.python.org/pypi/pp](https://pypi.python.org/pypi/pp)

# android - 如果内容是列表视图，则视图翻转器不会调整大小

> ID：12405324
> 
> 赞同：0
> 
> 时间：2012-09-13T11:35:04.247
> 
> 标签：android, listview

我有一个问题，当我加载到列表视图中时，viewfliper 不会调整大小。我的包含 viewfliper 的 xml 是：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
        <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mojprofil_scroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
            <ViewFlipper
                android:id="@+id/moj_profil_flipper"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <include layout="@layout/1" />
                <include layout="@layout/2" />
                <include layout="@layout/3" />
            </ViewFlipper>

    </ScrollView> 
```

Evrything 适用于不包含列表视图的视图，但包含它的视图是有问题的。它的设计是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingTop="15dp" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="0.9"
        android:ellipsize="end"
        android:maxLines="1"
        android:paddingLeft="17dp"
        android:scrollHorizontally="true"
        android:singleLine="false"
        android:text="sdfgsdg: "
        android:textColor="#2f96c4"
        android:textSize="19dp"
        android:textStyle="bold|italic"
        android:typeface="serif" >
    </TextView>

    <ImageButton
        android:id="@+id/dodaj_polico_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:background="@null"
        android:onClick="add"
        android:paddingRight="5dp"
        android:src="@drawable/btn32_2x" />
</LinearLayout>

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

</ListView> 
```

列表视图变得如此之小，以至于它只显示一行，但屏幕上有 6-7 行的空间。它也因设备而异，但总是会留下大量空间并缩小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:50:12.320

问题是我的listView在scrollView里面的viewFilper里面，所以我删除了scrollview，它就像一个魅力：D

# java - UDP数据包重寻址

> ID：12405325
> 
> 赞同：1
> 
> 时间：2012-09-13T11:35:05.347
> 
> 标签：java, udp, ip, lan, datagram

我通过本地网络连接到 Internet。我没有公共 IP 地址，例如，当我访问[http://www.whatismyip.com/](http://www.whatismyip.com/)时，它会为我提供路由器的 IP 地址。我正在编写一个使用 UDP 发送和接收数据包的 Java 程序。因此，当我使用该程序将数据包发送到本地网络中的 PC 时（将 PC 的本地 IP 指定为数据包的目标 IP），一切正常。但是，如果我尝试在我的网络之外使用它，它当然不起作用（数据包被传递到路由器，而不是我的 PC）。

那么，如果 X 是我的本地 IP 而 Y 是我的路由器的 IP，我可以指定“X 在 Y 的网络中”作为我的数据包的目标 IP 地址吗？

## 更新

我无法访问路由器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:51:19.747

这是不可能的，因为外部服务器只知道您路由器的外部地址。到实习生的地址是从外面没有办法定义的。要解决此问题，您可以使用路由器的端口转发选项。

来自服务器 A 的包无法找到通往您网络私有部分的路径，因为：
1\. 通常私有网络的地址没有路由（根据定义）
2\. 路由器“Internet”不知道包应该在哪里发送

```
---------------          ----------------------------     ---------------------------------      --------------------
| SERVER A     |         |      Router Internet     |     |     Your router                |     |   Your machine   |
|  addr net 1  |---------| addr net 1    addr net 2 |-----| addr net 2      addr priv. net |-----|   priv. addr     |
---------------          ----------------------------     ----------------------------------     ------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:05:39.183

您的路由器（通常是 DSL 调制解调器）可能使用[NAT](http://en.wikipedia.org/wiki/Network_address_translation)。所以地址和端口号在路由器中被转换。如果您想从 Internet 将数据包发送到您的 PC（在本地网络中），那么您应该将[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)规则添加到您的路由器。

如果您无权访问路由器，则无法允许流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:48:49.550

我假设您在防火墙或代理后面。[除非您更改代理/fireall 上的设置并将您的机器放在DMZ](http://compnetworking.about.com/cs/networksecurity/g/bldef_dmz.htm)中，否则您试图实现的目标是不可能的。

# c# - 使用 XSLT 小写函数

> ID：12405329
> 
> 赞同：2
> 
> 时间：2012-09-13T11:35:11.827
> 
> 标签：c#, xpath, asp.net-4.0

我正在使用 .net 4.0

我怎样才能重写以下xpath，才能有效

```
//Menu[fn:lower-case(./Link) = 'xyxysyx'] 
```

我收到此错误：

> 需要命名空间管理器或 XsltContext。此查询具有前缀、变量或用户定义的函数。

我不知道如何使用**XmlNamespaceManager**解决这个问题，我需要添加哪个命名空间...

如果我这样做，它会起作用：

```
 //Menu[./Link = 'xyxysyx'] 
```

但我需要它是小写比较。

这是组合的上下文：

```
 IEnumerable<System.Xml.Linq.XElement> menus = xml.Root.XPathSelectElements(xpath, namespaceManager); 
```

请注意，我们可以将 XPathSelectElements 的第二个参数传递给 XmlNamespaceManager

**编辑** 这是带有翻译功能的工作示例：

```
//Menu[translate(./Link, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = 'yz'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:32:37.850

**[`lower-case()`](http://www.w3.org/TR/xpath-functions/#func-lower-case)是一个标准的 XPath 2.0 函数，仅在 XSLT 2.0 处理器中实现**。

要“按原样”运行您的代码，您需要一个 XSLT 2.0 处理器。有两个著名的 XSLT 2.0 处理器被开发用于 .NET：

1.  [Saxon 9.x for .NET](http://saxon.sourceforge.net/) (Saxon.NET)
2.  [XQSharp](http://www.xmlprime.com/xmlprime/index.htm)

**请注意**：

可以从标准 XPath 2.0 函数的名称中省略名称空间前缀，因为 XSLT 处理器为所有无前缀的函数名称使用正确的默认名称空间。

因此，只需编写：

```
lower-case(./Link) 
```

代替：

```
fn:lower-case(./Link) 
```

# ruby-on-rails - gem用于从浏览器/前端翻译rails应用程序上的ruby I18n字符串？

> ID：12405341
> 
> 赞同：4
> 
> 时间：2012-09-13T11:35:55.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, i18n-gem

**是否有一个 up2date gem 可以从前端编辑整个 rails i18n 字符串？并从网络浏览器编辑您的翻译？**

曾经有一个伟大的宝石：

*   [https://github.com/archan937/e9s-demo](https://github.com/archan937/e9s-demo)
*   截屏：http: [//vimeo.com/17050431](http://vimeo.com/17050431)

这使您可以从网络浏览器编辑您的翻译。今天有没有相同或更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:23:11.630

[Copycopter](https://github.com/copycopter) r 可能有用，

我有我的定制解决方案，我将 I18n 迁移到 redis 并将后端设置为 redis，并添加了一个列出所有 I18n 的 Ui，您可以编辑、删除或创建，

我已经编写了将迁移到 yaml 到 redis 的小型库[https://github.com/amardaxini/i18n_redis](https://github.com/amardaxini/i18n_redis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T16:27:22.963

我们在使用 Copycopter 时遇到了一些糟糕的经历，因为它可能会严重破坏您的本地化文件。这就是我们构建自己的解决方案的原因：[PhraseApp](https://phraseapp.com)

我们更进一步，允许您在页面本身上编辑您的翻译，而不仅仅是使用通用表单。如果您决定改用 Copycopter，[我们提供了一个简单的迁移指南](https://phraseapp.com/docs/migration-guides/migrating-from-copycopter)，如何将数据移动到 PhraseApp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T23:39:31.563

现在有[https://github.com/jhilden/i18n_viz](https://github.com/jhilden/i18n_viz)这正是您正在寻找的。它支持 Rails 3+。

# charts - JavaFX 2.x; 在图表上绘制+缩放仍然存在问题

> ID：12405347
> 
> 赞同：3
> 
> 时间：2012-09-13T11:36:08.163
> 
> 标签：charts, javafx-2, zooming, draw

我仍在为这个我无法解决的难题而苦苦挣扎：下面的代码通过鼠标左键单击并在图表上拖动（从左上到右）执行缩放（放大），并从右到左恢复形式。

鼠标右键单击并拖动执行徒手绘制：问题是，如果我绘制然后缩放，绘制的内容会被替换，而不是我之前绘制的位置。

如何解决这个问题？

谢谢

这是代码：

```
public class Zoom extends Application {

    Path path;//Add path for freehand
    BorderPane pane;
    Rectangle rect;
    SimpleDoubleProperty rectinitX = new SimpleDoubleProperty();
    SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();
    SimpleDoubleProperty rectX = new SimpleDoubleProperty();
    SimpleDoubleProperty rectY = new SimpleDoubleProperty();

    double initXLowerBound = 0, initXUpperBound = 0, initYLowerBound = 0, initYUpperBound = 0;

    @Override
    public void start(Stage stage) {

        stage.setTitle("Lines plot");

        //final CategoryAxis xAxis = new CategoryAxis();
        final NumberAxis xAxis = new NumberAxis(1, 12, 1);
        final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005);

        yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

            @Override
            public String toString(Number object) {
                return String.format("%7.5f", object);
            }
        });

        final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis);

        lineChart.setCreateSymbols(false);
        lineChart.setAlternativeRowFillVisible(false);
        lineChart.setAnimated(true);

        XYChart.Series series1 = new XYChart.Series();

        series1.getData().add(new XYChart.Data(1, 0.53185));
        series1.getData().add(new XYChart.Data(2, 0.532235));
        series1.getData().add(new XYChart.Data(3, 0.53234));
        series1.getData().add(new XYChart.Data(4, 0.538765));
        series1.getData().add(new XYChart.Data(5, 0.53442));
        series1.getData().add(new XYChart.Data(6, 0.534658));
        series1.getData().add(new XYChart.Data(7, 0.53023));
        series1.getData().add(new XYChart.Data(8, 0.53001));
        series1.getData().add(new XYChart.Data(9, 0.53589));
        series1.getData().add(new XYChart.Data(10, 0.53476));
        series1.getData().add(new XYChart.Data(11, 0.530123));
        series1.getData().add(new XYChart.Data(12, 0.53035));

        pane = new BorderPane();
        pane.setCenter(lineChart);
    //  Scene scene = new Scene(lineChart, 800, 600);
        Scene scene = new Scene(pane, 800, 600);
        lineChart.getData().addAll(series1);

        initXLowerBound = ((NumberAxis) lineChart.getXAxis()).getLowerBound();
        initXUpperBound = ((NumberAxis) lineChart.getXAxis()).getUpperBound();
        initYLowerBound = ((NumberAxis) lineChart.getYAxis()).getLowerBound();
        initYUpperBound = ((NumberAxis) lineChart.getYAxis()).getUpperBound();

        stage.setScene(scene);        

        path = new Path();
        path.setStrokeWidth(1);
        path.setStroke(Color.BLACK);

        scene.setOnMouseClicked(mouseHandler);
        scene.setOnMouseDragged(mouseHandler);
        scene.setOnMouseEntered(mouseHandler);
        scene.setOnMouseExited(mouseHandler);
        scene.setOnMouseMoved(mouseHandler);
        scene.setOnMousePressed(mouseHandler);
        scene.setOnMouseReleased(mouseHandler);

        //root.getChildren().add(lineChart);
        pane.getChildren().add(path);

        rect = new Rectangle();
        rect.setFill(Color.web("blue", 0.1));
        rect.setStroke(Color.BLUE);
        rect.setStrokeDashOffset(50);

        rect.widthProperty().bind(rectX.subtract(rectinitX));
        rect.heightProperty().bind(rectY.subtract(rectinitY));
        pane.getChildren().add(rect);

        stage.show();
    }
    // sum layout shift against parent until we ascend to scene

    EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

    @Override
    public void handle(MouseEvent mouseEvent) {
        if (mouseEvent.getButton() == MouseButton.PRIMARY) {
            if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
                rect.setX(mouseEvent.getX());
                rect.setY(mouseEvent.getY());
                rectinitX.set(mouseEvent.getX());
                rectinitY.set(mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
                rectX.set(mouseEvent.getX());
                rectY.set(mouseEvent.getY());
            } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) {

                if ((rectinitX.get() >= rectX.get()) && (rectinitY.get() >= rectY.get())) {
                    //Condizioni Iniziali
                    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

                    ((NumberAxis) lineChart.getXAxis()).setLowerBound(initXLowerBound);
                    ((NumberAxis) lineChart.getXAxis()).setUpperBound(initXUpperBound);

                    ((NumberAxis) lineChart.getYAxis()).setLowerBound(initYLowerBound);
                    ((NumberAxis) lineChart.getYAxis()).setUpperBound(initYUpperBound);

                    ZoomFreeHand(path, 1.0, 1.0, 0, 0);

                } else {
                    //Zoom In

                    double Tgap = 0;
                    double newLowerBound, newUpperBound, axisShift;
                    double xScaleFactor, yScaleFactor;
                    double xaxisShift, yaxisShift;
//                  System.out.println("Zoom bounds : [" + rectinitX.get() + ", " +rectinitY.get()
//                                     + "] ["+ rectX.get()+", "+rectY.get()+"]");
//                  System.out.println("TODO: Determine bound ranges according these zoom coordinates.\n");

                    // TODO: Determine bound ranges according this zoom coordinates.
                    //LineChart<String, Number> lineChart = (LineChart<String, Number>) pane.getCenter();
                    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

                    // Zoom in Y-axis by changing bound range.            
                    NumberAxis yAxis = (NumberAxis) lineChart.getYAxis();
                    Tgap = yAxis.getHeight()/(yAxis.getUpperBound() - yAxis.getLowerBound());
                    axisShift = getSceneShiftY(yAxis);
                    yaxisShift = axisShift;

                    newUpperBound = yAxis.getUpperBound() - ((rectinitY.get() - axisShift) / Tgap);
                    newLowerBound = yAxis.getUpperBound() - (( rectY.get() - axisShift) / Tgap);

//                  System.out.println("(a) rectinitY.get() "+rectinitY.get()+" rectY.get() "+rectY.get());
//                  System.out.println("(a) Tgap "+Tgap+" axisShift "+axisShift+" yAxis.getLowerBound() "
//                                     + yAxis.getLowerBound()+ " " + yAxis.getUpperBound());

                    if (newUpperBound > yAxis.getUpperBound())
                        newUpperBound = yAxis.getUpperBound();

                    yScaleFactor = (yAxis.getUpperBound() - yAxis.getLowerBound())/(newUpperBound - newLowerBound);
                    yAxis.setLowerBound(newLowerBound);
                    yAxis.setUpperBound(newUpperBound);

//                  System.out.println("(b) yAxis.getLowerBound() " + yAxis.getLowerBound()+ " "
//                                     + yAxis.getUpperBound());

                    // Zoom in X-axis by removing first and last data values.
                    // Note: Maybe better if categoryaxis is replaced by numberaxis then setting the
                    // LowerBound and UpperBound will be avaliable.
/*
                    XYChart.Series series1 = lineChart.getData().get(0);
                    if (!series1.getData().isEmpty()) {
                        series1.getData().remove(0);
                        series1.getData().remove(series1.getData().size() - 1);
                    }
 */

                    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();

//                  System.out.println("(a) xAxis.getLowerBound() " + xAxis.getLowerBound()+ " "
//                                     + xAxis.getUpperBound());            

                    Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound());            
//                  newXlower = (rectinitX.get()/Tgap) + xAxis.getLowerBound();
//                  newXupper = (rectX.get()/Tgap)+xAxis.getLowerBound();

                    axisShift = getSceneShiftX(xAxis);                        
                    xaxisShift = axisShift;

                    newLowerBound = ((rectinitX.get() - axisShift) / Tgap) + xAxis.getLowerBound();
                    newUpperBound = ((rectX.get() - axisShift) / Tgap) + xAxis.getLowerBound();                

                    if (newUpperBound > xAxis.getUpperBound())
                        newUpperBound = xAxis.getUpperBound();

                    xScaleFactor = (xAxis.getUpperBound() - xAxis.getLowerBound())/(newUpperBound - newLowerBound);
                    xAxis.setLowerBound( newLowerBound );
                    xAxis.setUpperBound( newUpperBound );

//                  System.out.println("(b) xAxis.getLowerBound() "+xAxis.getLowerBound()+" "+xAxis.getUpperBound());

                    ZoomFreeHand(path, xScaleFactor, yScaleFactor, xaxisShift, yaxisShift);
                }
                // Hide the rectangle
                rectX.set(0);
                rectY.set(0);
            }
        }// end if (mouseEvent.getButton() == MouseButton.PRIMARY)
        else if (mouseEvent.getButton() == MouseButton.SECONDARY) //free hand graphics
        {
            if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
                path.getElements().clear();
                path.getElements().add(new MoveTo(mouseEvent.getX(), mouseEvent.getY()));
            } else if (mouseEvent.getEventType()==MouseEvent.MOUSE_DRAGGED) {
                path.getElements().add(new LineTo(mouseEvent.getX(), mouseEvent.getY()));
            }
        } //end if (mouseEvent.getButton() == MouseButton.SECONDARY)
    }
};

    private static double getSceneShiftX(Node node) {
        double shift = 0;
        do { 
            shift += node.getLayoutX(); 
            node = node.getParent();
        } while (node != null);
        return shift;
    }

    private static double getSceneShiftY(Node node) {
        double shift = 0;
        do { 
            shift += node.getLayoutY(); 
            node = node.getParent();
        } while (node != null);
        return shift;
    }

    private static void ZoomFreeHand(Path path, double xScaleFactor, double yScaleFactor,
            double xaxisShift, double yaxisShift) {
/*
        ObservableList<PathElement> ListPath = path.getElements();

        if (ListPath.size() != 0) {
            MoveTo moveto;
            ((MoveTo)(ListPath.get(0))).setX(0-axisShiftX);    
            ((MoveTo)(ListPath.get(0))).setY(0-axisShiftY);
        }
*/

        path.setScaleX(xScaleFactor);
        path.setScaleY(yScaleFactor);
        path.setTranslateX(xaxisShift);
        path.setTranslateY(yaxisShift);
    }

    public static void main(String[] args) {
        launch(args);
    }

} 
```

**编辑：**我有这个建议

*尝试使用 Canvas 作为图表顶部的叠加层。然后，您可以缩放画布。*

但不知道如何使用画布解决这个问题

**Edit2：**另一个建议

*看来您的坐标是基于错误的锚点。您需要找到一个包含图形本身的节点，并且仅使用该节点的坐标，而不是轴或场景。我什至建议将所有鼠标事件添加到该节点而不是场景，以避免过度的坐标转换。另一个建议是使用 ScenicView 工具来调查您的应用程序并查看哪些节点具有哪些坐标并验证您的数学。*

**编辑 3：**这些图片可能有助于更好地解释我的问题

![在此处输入图像描述](../Images/89b79be68ae3553d8c9760473de983d6.png)

![在此处输入图像描述](../Images/1d1fb1f22a05b72d79dc72d0e4d8db53.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:19:09.947

你说的是一个问题，当缩放时，绘图不是你期望的，是吗？

在 中的代码中`ZoomFreeHand`，移动轴的代码被注释掉了。

我希望，为了解决这个问题，你将不得不正确地移动轴。即使注释掉的代码对您不起作用，也需要正确计算和移动轴，以便您绘制的内容保持在您期望的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T20:49:33.737

> 我现在有点明白这个问题了。下面可能没有帮助。但无论如何...

我不确定确切的要求，但以下内容可能会给您一些想法。

绘制您需要在父级内部放大的所有内容。

```
Pane root = new Pane();
root.getChildren().add( new Line( 10, 10, 100, 100 ) ); 
```

并让 java 处理内部所有内容的缩放。如下将缩放鼠标滚轮上的内容。

```
root.setOnScroll( new ScrollHandler() );

private class ScrollHandler implements EventHandler< ScrollEvent > {
    @Override
    public void handle( ScrollEvent event ) {
        root.setScaleX( root.getScaleX() + event.getDeltaY() * .005 );
        root.setScaleY( root.getScaleY() + event.getDeltaY() * .005 );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T04:56:09.453

我通过使用解决了这个问题，

```
 yAxis.setLowerBound(10);
    yAxis.setUpperBound(100);
    yAxis.setTickUnit(5); 
```

# android - 具有左右边距的 Android 按钮

> ID：12405348
> 
> 赞同：7
> 
> 时间：2012-09-13T11:36:11.743
> 
> 标签：android, layout

我有以下布局

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<Button
    android:id="@+id/sign_in"
    style="@style/ButtonText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/custom_button_green"
    android:text="@string/signin_via_email"
    android:textSize="15sp"
    android:typeface="sans" /> 
```

现在按钮我真的不想适应整个宽度，而是我想要左边 10dp 和右边 10dp 的边距。我已经设置了 padding 和 layout_marginLeft 和 right 属性，但它们不起作用。有什么帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T11:39:37.713

```
 <Button
 style="@style/ButtonText"
 android:layout_marginLeft="10dp"
 android:layout_marginRight="10dp"
 android:id="@+id/btnOk"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="OK" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-08T10:59:20.040

我添加了

```
android:padding="10dp" 
```

至

```
input.xml 
```

..它奏效了！

（我使用软键盘源代码也有同样的问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:47:49.923

使用此布局，如果 Button 是您的根元素，它将为您的按钮添加边距，然后无法从该布局添加边距，同时将按钮添加到您可以指定边距/填充的其他布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="10dip"
android:paddingRight="10dip" >
<Button
    android:id="@+id/sign_in"
    style="@style/ButtonText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/custom_button_green"
    android:text="@string/signin_via_email"
    android:textSize="15sp"
    android:typeface="sans" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:39:21.910

用户您好，

请不要在高度上使用“fill_parent”。请给出实际图像的高度和重量，然后放置 MarginLeft 和 Right 。它肯定会起作用。

# vb.net - 在 Windows XP 32 位、MS-Access 2002 上未指定错误/“Microsoft.Jet.OLEDB.4.0 提供程序未注册”

> ID：12405351
> 
> 赞同：1
> 
> 时间：2012-09-13T11:36:23.303
> 
> 标签：vb.net, ms-access, connection, oledb, provider

我有一个 VB.NET WinForm 应用程序，其中打开了与 MS Access 2002 数据库的 OLEDB 连接，如下所示：

```
Private Function MakeNewConnection(FullPath) As OleDbConnection
    Dim Conn As OleDbConnection = New OleDbConnection()
    Try
        Conn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + FullPath
        Conn.Open()
    Catch ex As Exception
        Throw ex
    End Try

    Return Conn
End Function 
```

**虽然这通常可以正常工作，但它偶尔**会在 Windows XP 32 位计算机 (SP3) 上生成错误。这是零星的，因为有时它工作得很好，有时它只是抛出一个错误！有两种类型的消息：未指定的错误或“Microsoft.Jet.OLEDB.4.0”提供程序未在本地计算机上注册。您将在本文末尾找到异常的堆栈跟踪。

我已经做了很多搜索。“提供者”错误主要与 64 位窗口有关。就我而言，它是一个 32 位系统！

任何想法？

详细错误：

```
Error message: Unspecified error
Stack trace:    
at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr,      OleDbConnection connection)
at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
at System.Data.OleDb.OleDbConnection.Open()
at QueryAgent.MakeNewConnection()    

Error message: the 'Microsoft.Jet.OLEDB.4.0' provider is not registered on the local machine
Stack trace:    at  System.Data.OleDb.OleDbServicesWrapper.GetDataSource(OleDbConnectionString constr,  DataSourceWrapper& datasrcWrapper)
at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)
at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
at System.Data.OleDb.OleDbConnection.Open()
at QueryAgent.MakeNewConnection() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:37:24.827

只需将构建选项的构建从任何 CPU 选项更改为您的系统（32 位）。转到构建>>>配置>>>然后将构建选项从 AnyCPU 更改为您的系统特定！您还可以从 Microsoft 下载第 12 版的 OLE-DB。如果您在 VS 中使用更高版本的 MS Access，这将有所帮助，因为这就是我最初可以克服错误的方式（使用多个操作系统和软件）。注意：当移动到更高版本的软件时，请保留一个旧副本（备份），因为如果一个是由新版本定制的，它可能无法在旧版本中使用。

# iphone - Adding UIViewController on half screen

> ID：12405356
> 
> 赞同：0
> 
> 时间：2012-09-13T11:36:39.883
> 
> 标签：iphone, objective-c, uiviewcontroller, viewcontroller

I'm trying to add an UIViewController that i created, but i want it to be a half of the screen size.

I'm using this code:

```
myController *tmController = [[myControlleralloc] initWithNibName:@"myController" bundle:nil];
    tmController .view.frame = CGRectMake(10, 100, 100, 100);
    [appDelegate.viewController presentModalViewController:tmController animated:YES]; 
```

but i see it on all the screen, what is wong with my code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:27:16.600

hi you can achieve this by category file.....

**.h file :**

```
#define kSemiModalAnimationDuration   0.5
#define kSemiModalDidShowNotification @"kSemiModalDidShowNotification"
#define kSemiModalDidHideNotification @"kSemiModalDidHideNotification"
#define kSemiModalWasResizedNotification @"kSemiModalWasResizedNotification"
@interface UIViewController (KNSemiModal)

-(void)presentSemiViewController:(UIViewController*)vc;
-(void)presentSemiView:(UIView*)vc;
-(void)dismissSemiModalView;
-(void)resizeSemiView:(CGSize)newSize;

@end 
```

**.m file:**

```
 #import "UIViewController+KNSemiModal.h"
    #import <QuartzCore/QuartzCore.h>

    @interface UIViewController (KNSemiModalInternal)
    -(UIView*)parentTarget;
    -(CAAnimationGroup*)animationGroupForward:(BOOL)_forward;
    @end

    @implementation UIViewController (KNSemiModalInternal)

    -(UIView*)parentTarget {
      // To make it work with UINav & UITabbar as well
      UIViewController * target = self;
      while (target.parentViewController != nil) {
        target = target.parentViewController;
      }
      return target.view;
    }

    -(CAAnimationGroup*)animationGroupForward:(BOOL)_forward {
      // Create animation keys, forwards and backwards
      CATransform3D t1 = CATransform3DIdentity;
      t1.m34 = 1.0/-900;
      t1 = CATransform3DScale(t1, 0.95, 0.95, 1);
      t1 = CATransform3DRotate(t1, 15.0f*M_PI/180.0f, 1, 0, 0);

      CATransform3D t2 = CATransform3DIdentity;
      t2.m34 = t1.m34;
      t2 = CATransform3DTranslate(t2, 0, [self parentTarget].frame.size.height*-0.08, 0);
      t2 = CATransform3DScale(t2, 0.8, 0.8, 1);

      CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform"];
      animation.toValue = [NSValue valueWithCATransform3D:t1];
      animation.duration = kSemiModalAnimationDuration/2;
      animation.fillMode = kCAFillModeForwards;
      animation.removedOnCompletion = NO;
      [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];

      CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"transform"];
      animation2.toValue = [NSValue valueWithCATransform3D:(_forward?t2:CATransform3DIdentity)];
      animation2.beginTime = animation.duration;
      animation2.duration = animation.duration;
      animation2.fillMode = kCAFillModeForwards;
      animation2.removedOnCompletion = NO;

      CAAnimationGroup *group = [CAAnimationGroup animation];
      group.fillMode = kCAFillModeForwards;
      group.removedOnCompletion = NO;
      [group setDuration:animation.duration*2];
      [group setAnimations:[NSArray arrayWithObjects:animation,animation2, nil]];
      return group;
    }
    @end

    @implementation UIViewController (KNSemiModal)

    -(void)presentSemiViewController:(UIViewController*)vc {
      [self presentSemiView:vc.view];
    }

    -(void)presentSemiView:(UIView*)view {
      // Determine target
      UIView * target = [self parentTarget];

      if (![target.subviews containsObject:view]) {
        // Calulate all frames
        CGRect sf = view.frame;
        CGRect vf = target.frame;
        CGRect f  = CGRectMake(0, vf.size.height-sf.size.height, vf.size.width, sf.size.height);
        CGRect of = CGRectMake(0, 0, vf.size.width, vf.size.height-sf.size.height);

        // Add semi overlay
        UIView * overlay = [[UIView alloc] initWithFrame:target.bounds];
        overlay.backgroundColor = [UIColor blackColor];

        // Take screenshot and scale
        UIGraphicsBeginImageContextWithOptions(target.bounds.size, YES, [[UIScreen mainScreen] scale]);
        [target.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        UIImageView * ss = [[UIImageView alloc] initWithImage:image];
        [overlay addSubview:ss];
        [target addSubview:overlay];

        // Dismiss button
        // Don't use UITapGestureRecognizer to avoid complex handling
        UIButton * dismissButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [dismissButton addTarget:self action:@selector(dismissSemiModalView) forControlEvents:UIControlEventTouchUpInside];
        dismissButton.backgroundColor = [UIColor clearColor];
        dismissButton.frame = of;
        [overlay addSubview:dismissButton];

        // Begin overlay animation
        [ss.layer addAnimation:[self animationGroupForward:YES] forKey:@"pushedBackAnimation"];
        [UIView animateWithDuration:kSemiModalAnimationDuration animations:^{
          ss.alpha = 0.5;
        }];

        // Present view animated
        view.frame = CGRectMake(0, vf.size.height, vf.size.width, sf.size.height);
        [target addSubview:view];
        view.layer.shadowColor = [[UIColor blackColor] CGColor];
        view.layer.shadowOffset = CGSizeMake(0, -2);
        view.layer.shadowRadius = 5.0;
        view.layer.shadowOpacity = 0.8;
        view.layer.shouldRasterize = YES;
        view.layer.rasterizationScale = [[UIScreen mainScreen] scale];
        UIBezierPath *path = [UIBezierPath bezierPathWithRect:view.bounds];
        view.layer.shadowPath = path.CGPath;

        [UIView animateWithDuration:kSemiModalAnimationDuration animations:^{
          view.frame = f;
        } completion:^(BOOL finished) {
          if(finished){
            [[NSNotificationCenter defaultCenter] postNotificationName:kSemiModalDidShowNotification
                                                                object:self];
          }
        }];
      }
    }

    -(void)dismissSemiModalView {
      UIView * target = [self parentTarget];
      UIView * modal = [target.subviews objectAtIndex:target.subviews.count-1];
      UIView * overlay = [target.subviews objectAtIndex:target.subviews.count-2];
      [UIView animateWithDuration:kSemiModalAnimationDuration animations:^{
        modal.frame = CGRectMake(0, target.frame.size.height, modal.frame.size.width, modal.frame.size.height);
      } completion:^(BOOL finished) {
        [overlay removeFromSuperview];
        [modal removeFromSuperview];
      }];

      // Begin overlay animation
      UIImageView * ss = (UIImageView*)[overlay.subviews objectAtIndex:0];
      [ss.layer addAnimation:[self animationGroupForward:NO] forKey:@"bringForwardAnimation"];
      [UIView animateWithDuration:kSemiModalAnimationDuration animations:^{
        ss.alpha = 1;
      } completion:^(BOOL finished) {
        if(finished){
          [[NSNotificationCenter defaultCenter] postNotificationName:kSemiModalDidHideNotification
                                                              object:self];
        }
      }];
    }

    - (void)resizeSemiView:(CGSize)newSize {
      UIView * target = [self parentTarget];
      UIView * modal = [target.subviews objectAtIndex:target.subviews.count-1];
      CGRect mf = modal.frame;
      mf.size.width = newSize.width;
      mf.size.height = newSize.height;
      mf.origin.y = target.frame.size.height - mf.size.height;
      UIView * overlay = [target.subviews objectAtIndex:target.subviews.count-2];
      UIButton * button = [[overlay subviews] objectAtIndex:1];
      CGRect bf = button.frame;
      bf.size.height = overlay.frame.size.height - newSize.height;
      [UIView animateWithDuration:kSemiModalAnimationDuration animations:^{
        modal.frame = mf;
        button.frame = bf;
      } completion:^(BOOL finished) {
        if(finished){
          [[NSNotificationCenter defaultCenter] postNotificationName:kSemiModalWasResizedNotification
                                                              object:self];
        }
      }];
    }

    @end

    #pragma mark - 

    // Convenient category method to find actual ViewController that contains a view
    // Adapted from: http://stackoverflow.com/questions/1340434/get-to-uiviewcontroller-from-uiview-on-iphone

    @implementation UIView (FindUIViewController)
    - (UIViewController *) containingViewController {
      UIView * target = self.superview ? self.superview : self;
      return (UIViewController *)[target traverseResponderChainForUIViewController];
    }

    - (id) traverseResponderChainForUIViewController {
      id nextResponder = [self nextResponder];
      BOOL isViewController = [nextResponder isKindOfClass:[UIViewController class]];
      BOOL isTabBarController = [nextResponder isKindOfClass:[UITabBarController class]];
      if (isViewController && !isTabBarController) {
        return nextResponder;
      } else if(isTabBarController){
        UITabBarController *tabBarController = nextResponder;
        return [tabBarController selectedViewController];
      } else if ([nextResponder isKindOfClass:[UIView class]]) {
        return [nextResponder traverseResponderChainForUIViewController];
      } else {
        return nil;
      }
    }

    @end

#pragma mark - 

// Convenient category method to find actual ViewController that contains a view
// Adapted from: http://stackoverflow.com/questions/1340434/get-to-uiviewcontroller-from-uiview-on-iphone

@implementation UIView (FindUIViewController)
- (UIViewController *) containingViewController {
  UIView * target = self.superview ? self.superview : self;
  return (UIViewController *)[target traverseResponderChainForUIViewController];
}

- (id) traverseResponderChainForUIViewController {
  id nextResponder = [self nextResponder];
  BOOL isViewController = [nextResponder isKindOfClass:[UIViewController class]];
  BOOL isTabBarController = [nextResponder isKindOfClass:[UITabBarController class]];
  if (isViewController && !isTabBarController) {
    return nextResponder;
  } else if(isTabBarController){
    UITabBarController *tabBarController = nextResponder;
    return [tabBarController selectedViewController];
  } else if ([nextResponder isKindOfClass:[UIView class]]) {
    return [nextResponder traverseResponderChainForUIViewController];
  } else {
    return nil;
  }
}

@end 
```

and the call statement....

```
 KNFirstViewController *view=[[KNFirstViewController alloc]init];
    [self presentSemiView:view.view]; 
```

see the example project [Here](https://www.dropbox.com/s/01r89l9ijwm7rpt/SemiModalViewController.zip)

# c# - 单击按钮时出错

> ID：12405358
> 
> 赞同：0
> 
> 时间：2012-09-13T11:36:52.163
> 
> 标签：c#, asp.net

我有以下`aspx`页面

```
<asp:Content ID="Content2" ContentPlaceHolderID="contentConteudo" runat="server">        
    <table border="0" width="680" style="background-color:#f0f0f0" id="tabelaPrincipal" runat="server">
        <tr>
            <td style="width: 180px !important;">            
                <asp:RadioButtonList ID="rbBuscas" runat="server">
                    <asp:ListItem Selected="True">Novo Curso</asp:ListItem>
                    <asp:ListItem>Buscar Lista de Presença</asp:ListItem>
                </asp:RadioButtonList>           
            </td>
            <td>
                Data: <br />
                <input id="DtBusca" type="text" />                
                <asp:Button id="btnSelecionarData" runat="server" Text="Buscar" />
            </td>
        </tr>
    </table>

    <br /><br />
    <div id="infoGrid" runat="server">
        <cc1:GridView ID="grdImoveis" CssClass="StyleGrid" Width="100%" runat="server" ShowHeader="false"
            AutoGenerateColumns="False" DataSourceID="dsGrid" BorderWidth="0px" GridLines="None"
            AllowPaging="True" EnableModelValidation="True">
            <AlternatingRowStyle BackColor="White" CssClass="EstiloDalinhaAlternativaGrid" HorizontalAlign="Center" />
            <RowStyle CssClass="EstiloDalinhaGrid" HorizontalAlign="Center" />
            <Columns>
                <asp:TemplateField HeaderText="Nome">
                    <ItemTemplate>
                        <div class="<%# Eval("Usuario_Id").ToString() %>">
                           <%# Eval("NomeCompleto").ToString() %>
                        </div>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField HeaderText="Cargo" DataField="DescricaoCargo1" />
                <asp:BoundField HeaderText="Data Cadastro" DataField="DataHora" />
                <asp:TemplateField ControlStyle-CssClass="acoes_lista_imovel" HeaderText="Curso">
                    <ItemTemplate>
                        <div class="acoes_lista_imovel">
                            <%# montaIcones(Eval("Usuario_Id").ToString())%>
                        </div>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <div>
                            <%# montaIconesDocumentacao(Eval("Usuario_Id").ToString())%>
                        </div>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </cc1:GridView>
        <asp:SqlDataSource ID="dsGrid" runat="server"></asp:SqlDataSource>
    </div>
    <span id="printContrato" class="diasRelatorio btStep ui-button ui-widget ui-state-default ui-corner-all"></span>

</asp:Content> 
```

当我单击我的时出现问题`<asp:Button>`，我尝试放置`OnClick`事件，但仍然发生错误。

`<asp:Button id="btnSelecionarData" runat="server" Text="Buscar" />`

**错误**

`Failed to load viewstate. The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request. For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request.`

**代码背后**

```
 public partial class ListaUsuarioProvisorio : System.Web.UI.Page
    {
        neticonn.Conexao c = new neticonn.Conexao();
        Utilidade.QuebraToken tk = new Utilidade.QuebraToken();
        public string icones = string.Empty;

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                this.CarregaLista();
            }
        }

        protected void CarregaLista()
        {
            string select = string.Empty;
            select += "SELECT San_Credenciada.Apelido, San_Usuario.NomeCompleto, San_Usuario.Usuario_Id, San_Usuario.DescricaoCargo1, "
                + "CONVERT(varchar, San_Usuario.DataHora, 103) AS DataHora "
                + "FROM San_Usuario "
                + "JOIN San_Credenciada "
                + "ON San_Usuario.Credenciada_Id = San_Credenciada.Credenciada_Id "
                + "WHERE San_Usuario.Provisorio = 1 "
                + "AND San_Usuario.Excluido = 0 "
                + "GROUP BY San_Credenciada.Apelido, San_Usuario.NomeCompleto, San_Usuario.Usuario_Id, " 
                + "San_Usuario.DescricaoCargo1, San_Usuario.DataHora "
                + "ORDER BY San_Usuario.DataHora ASC ";

            dsGrid.ConnectionString = c.Con;
            dsGrid.SelectCommand = select;
            dsGrid.Dispose();

            GridViewHelper helper = new GridViewHelper(this.grdImoveis);
            helper.RegisterGroup("Apelido", true, true);            
            helper.GroupHeader += new GroupEvent(helper_GroupHeader);
            helper.ApplyGroupSort();
        }

        protected void CarregaLista(string data)
        {
            string select = string.Empty;
            select += "SELECT San_Credenciada.Apelido, San_Usuario.NomeCompleto, San_Usuario.Usuario_Id, San_Usuario.DescricaoCargo1, "
                + "CONVERT(varchar, San_Usuario.DataHora, 103) AS DataHora "
                + "FROM San_Usuario "
                + "JOIN San_Credenciada "
                + "ON San_Usuario.Credenciada_Id = San_Credenciada.Credenciada_Id "
                + "JOIN San_UsuarioCurso "
                + "ON San_Usuario.Usuario_Id = San_UsuarioCurso.Usuario_Id "
                + "WHERE San_Usuario.Provisorio = 1 "
                + "AND San_Usuario.Excluido = 0 "
                + "AND San_UsuarioCurso = " + data + " "
                + "GROUP BY San_Credenciada.Apelido, San_Usuario.NomeCompleto, San_Usuario.Usuario_Id, "
                + "San_Usuario.DescricaoCargo1, San_Usuario.DataHora "
                + "ORDER BY San_Usuario.DataHora ASC ";

            dsGrid.ConnectionString = c.Con;
            dsGrid.SelectCommand = select;
            dsGrid.Dispose();

            GridViewHelper helper = new GridViewHelper(this.grdImoveis);
            helper.RegisterGroup("Apelido", true, true);
            helper.GroupHeader += new GroupEvent(helper_GroupHeader);
            helper.ApplyGroupSort();
        }

        private void helper_GroupHeader(string groupName, object[] values, GridViewRow row)
        {
            string xCol = "#f56d01";
            string yCol = "#cbcbcb";
            Color c = System.Drawing.ColorTranslator.FromHtml(xCol);
            Color c2 = System.Drawing.ColorTranslator.FromHtml(yCol);

            if (groupName == "Apelido")
            {
                row.BackColor = c;
                row.Cells[0].Text = "<div class='AgrupamentoPrincipal'>&nbsp;&nbsp;" + Maiscula(row.Cells[0].Text) + "</div>";
                row.Cells[0].Text += "</div><tr bgcolor=#e2dcd2 class=thGrid><th scope=col height='27'>&nbsp;Nome</th><th scope=col>Cargo</th><th>Data Cadastro</th><th scope=col>Curso Básico</th><th>Documentação Imobiliária</th></tr>";             
            }
        }

        protected string Maiscula(string texto)
        {
            texto = texto.ToUpper();
            return texto;
        }

        protected string montaIcones(string id)
        {
            icones = string.Empty;            
            int Credenciada = Convert.ToInt32(tk.CarregaToken(1, Request.Cookies["token"].Value));
            icones = "<img src='../tema/default/icon/icon-cinza/check.png' onclick=\"Visibilidade('" + id + "', '" + id + "', '" + Credenciada + "')\" style='cursor:pointer;margin: 4px;text-align:center;' ID='" + id + "' />";
            return icones;
        }

        protected string montaIconesDocumentacao(string id)
        {
            icones = string.Empty;
            int Credenciada = Convert.ToInt32(tk.CarregaToken(1, Request.Cookies["token"].Value));
            icones = "<img src='../tema/default/icon/icon-cinza/documents.png' onclick=\"VisibilidadeDocumentacao('" + id + "', 'documentacao_" + id + "', '" + Credenciada + "')\" style='cursor:pointer;margin: 4px;text-align:center;' ID='documentacao_" + id + "' />";
            return icones;
        }

        public void btnSelecionarData_OnClick(object sender, EventArgs e)
        {
            if (this.rbBuscas.SelectedIndex == 1 && !this.DtBusca.Value.Equals(string.Empty))
            {
                this.CarregaLista(this.DtBusca.Value);
            }
        }
    }
} 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:50:59.007

当您在后面的代码中创建自定义控件时，通常会出现此问题。我会看一下这篇文章，它深入探讨了问题的根源以及如何抽查代码中的此类问题：

[http://blog.typps.com/2008/01/failed-to-load-viewstate-typical.html](http://blog.typps.com/2008/01/failed-to-load-viewstate-typical.html)

# android - 文件下载时Android ProgressBar不更新

> ID：12405359
> 
> 赞同：0
> 
> 时间：2012-09-13T11:36:53.533
> 
> 标签：android, progress-bar

我创建了一个 Android 服务来将音乐 (.mp3) 下载到 sdcard，在下载之前我调用 startUpdateProgress，下载完成后我调用 stopUpdateProgress()，并使用 Handle 将状态广播发送到 Activity 以设置 ProgressBar 的进度。但它不起作用，下载完成后，ProgressBar 更新为 100%。

请告诉我为什么？谢谢！

# .htaccess - url通过htaccess写入

> ID：12405361
> 
> 赞同：0
> 
> 时间：2012-09-13T11:37:08.453
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我在 localhost 工作已经在我的站点中编写了 htaccess

真实网址：

```
localhost/lite-cms/template/content/index.php?u_title=about-mind-yolk 
```

我添加的 htaccess

```
RewriteRule ^([^/]*)\.html$ /lite-cms/template/content/index.php?id=$1 [L] 
```

我得到这样的网址

```
http://localhost/lite-cms/template/content/about-mind-yolk.html 
```

但我想要这样的 URL 不显示模板/内容/

```
http://localhost/lite-cms/about-mind-yolk.html 
```

请给出解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:24:12.200

试试这个（确保 htaccess 在 lite-cms/ 目录中）：

```
RewriteEngine on
RewriteBase /lite-cms/
RewriteRule ^([^/]*)\.html$ template/content/index.php?u_title=$1 [L] 
```

# c# - 内存高效的图像处理

> ID：12405363
> 
> 赞同：1
> 
> 时间：2012-09-13T11:37:13.650
> 
> 标签：c#, winforms, image

我有一个 WinForms 应用程序，它需要加载一堆图像并将它们保存在应用程序的生命周期内的内存中。

我目前这样做的方式是将每个图像加载为位图，但不出所料，这会占用大量内存。

有没有更节省内存的方法来加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:39:59.703

您应该使用基于 LRU 的缓存来存储图像，但不是全部。如果需要尚未加载的图像，则您的应用程序可以加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:39:34.153

根据您实际尝试执行的操作，您可能实际上并不*需要*同时将它们全部存储在内存中。

这是我为需要时延迟加载数据而制作的通用类。请注意，IApplicationDataSession 只是一个用于从我们的数据库中提取数据的类。但是，您可以将其替换为您喜欢的任何内容：

```
namespace Foo.Applications.DataHelpers
{
  /// <summary>
  /// This delegate allows the calling class to define a method for converting from the data type
  /// that was queried to an alternate type.
  /// </summary>
  /// <typeparam name="S"></typeparam>
  /// <typeparam name="T"></typeparam>
  /// <param name="dataToConvert"></param>
  /// <returns></returns>
  public delegate S DataConverter<S, T>(T dataToConvert);

  /// <summary>
  /// Used for passing data to a new thread.
  /// </summary>
  internal class DataLoadRequest
  {
    public int Skip { get; private set; }
    public int Take { get; private set; }

    public DataLoadRequest(int skip, int take)
    {
      Skip = skip;
      Take = take;
    }
  }
  /// <summary>
  /// This class allows for lazy loading of an arbitrary range of data.  It also
  /// allows for a transform from its current type to another type based on a conversion
  /// delegate.
  /// </summary>
  /// <typeparam name="T">The entity type which should be queried.</typeparam>
  /// <typeparam name="S">The object which T is converted to using the converter.  If this is the same type
  /// as T, then the converter can be null. </typeparam>
  public class LazyDataLoader<S, T> where S : class
  {
    private S[] _cachedData;
    private readonly int _defaultChunkSize;
    private readonly Expression<Func<T, bool>> _whereClause;
    private readonly IApplicationDataSession _dataSession;

    private ManualResetEvent _donePreloadingDataEvent;

    private readonly DataConverter<S, T> _converter;

    private int? _totalRecords;

    public LazyDataLoader(Expression<Func<T, bool>> whereClause, IApplicationDataSession dataSession, DataConverter<S, T> converter = null, int defaultChunkSize = 30, int? totalRecords = null)
    {
      _defaultChunkSize = defaultChunkSize;
      _whereClause = whereClause;
      _dataSession = dataSession;

      _totalRecords = totalRecords;

      if (converter == null && typeof(S) != typeof(T))
      {
        throw new ArgumentException("if a converter is not given, then S must be the same type as T.");
      }

      _converter = converter ?? DefaultDataConverter;
    }

    /// <summary>
    /// The total number of items that exist either in memory or in the DB.
    /// </summary>
    /// <returns></returns>
    public int TotalItems()
    {
      return CachedData.Length;
    }

    /// <summary>
    /// Get a subset of the items.  
    /// </summary>
    /// <param name="index">the index from which to start</param>
    /// <param name="take">the number of items to pull out.</param>
    /// <returns></returns>
    public S[] GetRange(int index, int take)
    {
      //don't start preloading new data until the previous data has been preloaded.
      //TODO allow for preloading multiple ranges at the same time.
      if (_donePreloadingDataEvent != null)
      {
        _donePreloadingDataEvent.WaitOne();
      }

      if (index > TotalItems())
      {
        throw new ArgumentException(string.Format("Index of: {0} was greater than total items: {1}", index, TotalItems()));
      }

      if (take == 0)
      {
        return new S[0];
      }
      else if (take < 0)
      {
        throw new ArgumentException(string.Format("For index {0}, take had a value of {1}.", index, take));
      }

      // if we're at the end of the data set, don't pick a range that's out of bounds.
      var numberToTake = Math.Min(take, TotalItems() - index);
      var range = CachedData.ToList().GetRange(index, numberToTake);

      //if all values are already cached, return them
      var firstDefaultIndex = range.FindIndex(s => s == default(S));
      if (firstDefaultIndex == -1)
      {
        return range.ToArray();
      }

      LoadAsNeeded(range, index);

      return range.ToArray();
    }

    /// <summary>
    /// This can be called to prepare a range of data prior to usage.
    /// </summary>
    /// <param name="index"></param>
    /// <param name="take"></param>
    public void PreloadRangeAsync(int index, int take)
    {
      if (index >= TotalItems())
      {
        return;
      }

      //don't start preloading new data until the previous data has been preloaded.
      //TODO allow for preloading multiple ranges at the same time.
      if (_donePreloadingDataEvent != null)
      {
        _donePreloadingDataEvent.WaitOne();
      }

      // if we're at the end of the data set, don't pick a range that's out of bounds.
      var numberToTake = Math.Min(take, TotalItems() - index);
      var range = CachedData.ToList().GetRange(index, numberToTake);

      //if all values are already cached, return them
      var firstDefaultIndex = range.FindIndex(s => s == default(S));
      if (firstDefaultIndex == -1)
      {
        return;
      }

      _donePreloadingDataEvent = new ManualResetEvent(false);

      ThreadPool.QueueUserWorkItem(AsyncDataLoadingHandler, new DataLoadRequest(index, numberToTake));
    }

    /// <summary>
    /// The number of items currently in memory
    /// </summary>
    /// <returns></returns>
    public int TotalCachedItems()
    {
      return CachedData.Count(cd => cd != default(S));
    }

    private void AsyncDataLoadingHandler(object state)
    {
      try
      {
        var dataLoadRequest = (DataLoadRequest)state;
        var results = Load(dataLoadRequest.Skip, dataLoadRequest.Take);
        AddData(results, dataLoadRequest.Skip);
      }
      finally
      {
        _donePreloadingDataEvent.Set();
      }
    }

    private void AddData(T[] dataToAdd, int startingIndex)
    {
      if (dataToAdd.Length + startingIndex > _totalRecords)
      {
        throw new Exception("Error when loading new data into array.  The index would be out of bounds.");
      }

      lock (CachedData)
      {
        Convert(dataToAdd).CopyTo(CachedData, startingIndex);
      }
    }

    private T[] Load(int skip, int take)
    {
      var pageInfo = new PageInfo(skip, take);
      var queryData = new QueryData<T>(_whereClause, pageInfo: pageInfo, includeChildren: true);
      var results = _dataSession.Query(queryData);

      _totalRecords = _totalRecords ?? results.TotalRecords;

      return results.Results.ToArray();
    }

    private void LoadAsNeeded(List<S> range, int startingIndex)
    {
      var firstDefaultIndex = range.FindIndex(s => s == default(S));
      if (firstDefaultIndex == -1)
      {
        return;
      }

      var i = firstDefaultIndex;
      while (i < range.Count)
      {
        // continue looping through items until you hit a default
        if (range[i] == default(S))
        {
          var numSequentialDefaults = GetLengthOfSequentialDefaults(range.GetRange(i, range.Count - i));
          var newValues = Load(i + startingIndex, numSequentialDefaults);

          //loop through the new values and assign them where necessary
          var j = 0;
          while (j < newValues.Length)
          {
            var convertedValue = Convert(newValues[j]);
            range[j + i] = convertedValue;
            CachedData[startingIndex + j + i] = convertedValue;
            j++;
          }
          i += numSequentialDefaults;
        }
        else
        {
          i += range.TakeWhile(s => s != default(S)).Count();
        }
      }
    }

    private S[] CachedData
    {
      get
      {
        if (_cachedData == null)
        {
          // this is necessary so we can instantiate the cache with the correct size.
          var initialData = Load(0, _defaultChunkSize);

          _cachedData = new S[_totalRecords.Value];
          AddData(initialData, 0);
        }

        return _cachedData;
      }
    }

    private static int GetLengthOfSequentialDefaults(IEnumerable<S> range)
    {
      return range.TakeWhile(s => s == default(S)).Count();
    }

    private S[] Convert(T[] valuesToConvert)
    {
      return valuesToConvert.Select(Convert).ToArray();
    }

    private S Convert(T valueToConvert)
    {
      return _converter(valueToConvert);
    }

    /// <summary>
    /// This converter is used when conversion isn't actually necessary (S == T). It simply casts T to S.
    /// </summary>
    private static readonly DataConverter<S, T> DefaultDataConverter = dataToConvert => (S)(object)dataToConvert;
  }

} 
```

我敢肯定这里有一些可以改进的地方；这只是我一个下午做的东西，但到目前为止它对我来说效果很好。您可能希望添加用于卸载最近未使用的数据的功能。

# php - 随机播放数组键，然后在 foreach 中混合

> ID：12405365
> 
> 赞同：0
> 
> 时间：2012-09-13T11:37:18.000
> 
> 标签：php, arrays, random, foreach, gdlib

我有 2 个数组合并为一个。一个数组包含一些产品，另一个数组包含数字（产品数量）。

```
$brick = "RT542,RT543,RT538";
$ratio = "10,15,13";

$bricks = explode(",", $brick);
$ratios = explode(",", $ratio);
$bricks_and_ratio = array_combine($bricks, $ratios);

Array ( 
   [0] => RT542 
   [1] => RT543 
   [2] => RT538 
)  

Array ( 
  [0] => 10 
  [1] => 15 
  [2] => 13 
) 
```

array_combine() 然后给我这个：

```
Array ( 
[RT542] => 10 
[RT543] => 15 
[RT538] => 13 
) 
```

到现在为止还挺好。我想要的是对这个数组进行洗牌，这样我将得到一行，首先是 2 x RT542，然后是 1 x RT538，然后是 3x RT543，依此类推，直到最大项目数。

我正在使用这个：

```
function BuildCustomBricks($myBricksAndRatios) {

        $img = imagecreate(890,502);
        imagealphablending($img, true);
        imagesavealpha($img, true);

        $keys = array_keys($myBricksAndRatios);
        shuffle($keys);
        $random = array();

        foreach ($keys as $key) {

            $random[$key] = $myBricksAndRatios[$key]; 

            for($i = 1; $i <= $myBricksAndRatios[$key]; $i++) {
                $cur = imagecreatefrompng("/var/www/brickmixer/bricks/". $key."-$i.png"); 
                imagealphablending($cur, true);
                imagesavealpha($cur, true);                      

                imagecopy($img, $cur, -150+$i*132, 0, 0, 0, 125, 32);                                                  
            }

            imagedestroy($cur);
        }

        header('Content-Type: image/png');
        imagepng($img);
    } 
```

它确实会随机播放，但会创建一排相同产品的图像，而不是随机顺序。我需要为每个产品密钥保留最大数量的产品。

解决方案：

```
function shuffle_bricks($array) {        
        foreach($array as $key => $value) {
             for($i = 1; $i <= $value; $i++) {
                 $new_array[] = $key;                 
             }
        }      

        shuffle($new_array);        
        return $new_array;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:49:41.953

尚未对此进行测试，但它应该让您走上正轨：

```
<?php
function shufflebricks($bricks) {
  $rs = array();
  while (count($bricks) >= 0) {
    $key = array_rand($bricks, 1);
    $bricks[$key]--; // Use one brick
    $rs[] = $key; // Add it to output
    if ($bricks[$key] <= 0) unset($bricks[$key]); // Remove if there's no more of this brick
  }
  return $rs;
}
?> 
```

这一次使用一块砖，随机砖类型有剩余砖。如果您想一次使用一个块，请在其中添加一个`$quantity = rand(1, $bricks[$key]);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T16:45:38.100

如果您使用索引数组，请确保也标准化索引：

```
function shuffleArray($source) {
    $target = array();
    for($i = count($source); $i > 0; $i--) {
        $key = rand(0, $i - 1);
        $target[] = $source[$key];
        unset($source[$key]);
        $source = array_values($source);
    }
    return $target;
} 
```

通过`array_values`函数发生。

# javascript - jQuery UI Multiselect Next - onChange - 全部删除，全部添加

> ID：12405377
> 
> 赞同：0
> 
> 时间：2012-09-13T11:37:49.697
> 
> 标签：javascript, jquery, jquery-ui, multi-select

我有 jQuery UI Multiselect Next [http://quasipartikel.at/multiselect_next](http://quasipartikel.at/multiselect_next)我想在选择发生任何变化时触发一个事件。

这个例子有效：

```
<script type="text/javascript">

$(function(){
$("#countries").multiselect();          
$('#countries').multiselect({ selected: function(event, ui) {change(); } });
$('#countries').multiselect({ deselected: function(event, ui) {change(); } });
});         

function change(){
alert('CHANGE');
}

</script> 
```

当我从列表中移动一个元素时，会调用函数 change()。主要问题是当我按“全部删除”或“全部添加”时，因为该函数被多次调用（元素数量）。

当我按“全部删除”或“全部添加”时，是否可以**只调用一次**函数 change() ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:49:27.780

我找到了解决方案：

打开 ui.multiselect.js

将以下行添加到 selectAll 函数：

`this.element.trigger('change');`

将以下行添加到 selectNone 函数 {

`this.element.trigger('change');`

添加以下行以停止功能

`that.element.trigger('change');`

HTML：

```
<script type="text/javascript">
    $(function(){       
        $("#countries").multiselect();          
        $('#countries').bind('change', function() {alert('Change'); });
        });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:43:03.887

我不确定。但你尝试[jquery.one()](http://api.jquery.com/one/)

```
$("#foo").one("click", function() {
  alert("This will be displayed only once.");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:46:05.817

您可以使用某种计时方案来过滤掉额外的调用。让我们假设一分钟，一个真实的人每 100 毫秒触发选定或取消选定事件的次数不会超过一次。您可以执行以下操作：

```
var lastChange = 0;

function change() {

  //get current date, then the number of milliseconds since 1/1/1970
  var curr_date = new Date();
  var n = cur_date.getTime();

  //compute the difference.
  var diff = n - lastChange;

  //update our last change variable.
  lastChange = n;

  //if we're within 100 milliseconds of the last call, ignore.
  if (diff < 100)
     return;

  //proceed as normal.
  alert('change!');
} 
```

您可以调整这样的算法以满足您的需求，我以 100 毫秒为例。我不确定是否有更干净的方法来执行此操作，因为您基本上是在尝试过滤来自 UI 控件本身的事件。

# ios - 是否有编译器标志表明缺少 armv7s 架构

> ID：12405378
> 
> 赞同：7
> 
> 时间：2012-09-13T11:37:50.863
> 
> 标签：ios, xcode, compiler-construction, linker, cpu-architecture

随着 iPhone 5 和其他 armv7s 设备的出现，与现有（闭源）第 3 方框架（例如 Flurry）存在兼容性问题，这些框架是在没有这种更新架构的情况下构建的。

一种选择是等到他们发布新版本，但我希望可能有一个编译器标志或我可以在我的 Xcode 项目中使用的东西，让链接器知道不要从这个框架中期待 armv7s 架构，并使用 armv7反而。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T12:49:27.557

无法加载不包含目标架构的框架。

你可以做的只是在框架更新之前发布一个 armv7 应用程序。该应用程序仍可在 iPhone 5 上运行，只是不要使用它提供的最新性能优化。

或者，如果您可以在没有新架构上的框架的情况下生活，您可以弱链接它。但是，您需要检查您的代码是否在您使用框架中的东西的任何地方加载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T18:06:56.617

GCC 中曾经有一个链接器标志`allow_sub_type_mismatches`，它可以让您在链接库中混合和匹配 ARM 架构版本，但它们似乎在最近的 Xcode 版本中取消了这一点。

然而，这实际上可以以不同的方式被破解。制作框架的副本，查看其内容，在十六进制编辑器中打开其中的实际代码库文件，然后执行以下操作全部替换：

```
CEFAEDFE 0C000000 09000000 
```

到

```
CEFAEDFE 0C000000 0B000000 
```

您基本上所做的是更改每个代码对象内部的标头以将其标识为 ARMv7 而不是 ARMv7 代码 - 指令集是向后兼容的（或者似乎是，无论如何），因此即使使用这个 hack 它也应该运行良好，尽管我不得不承认，在我们真正有机会在 iPhone 5 上测试它之前，我们无法确定这一点。

无论如何，一旦您修改了框架，只需将这两个版本都添加到您的项目中，并链接到每个架构中适当的版本。您还可以通过`lipo`将修改后的库和原始库合并来创建一个新的单一框架。

# .net - 读已提交，没有锁。搞砸了

> ID：12405379
> 
> 赞同：0
> 
> 时间：2012-09-13T11:38:00.387
> 
> 标签：.net, sql, sql-server-2008, transactions, transactionscope

我有一个来自生产系统的奇怪问题。我已经用 no_lock 的读操作和在同一范围内的表锁的写操作定义了 readCommitted 事务。

但是，多个进程能够覆盖锁并能够执行影响很大的写操作。请帮忙！。谢谢。

```
using (TransactionScope transaction = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions() { IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted }))
{
    dataAccess.ExecNonQuery("GetNextOrder", parametersList); //read orders from table 1, there is NO_lock in the SP

    orderIDParameter = (IParameter)parametersList[0];
    int orderIDParameterValue = (int) orderIDParameter.Value;

    if (orderIDParameterValue != NullOrderID)
    {
       parametersList.Clear();
       IParameter orderIDLockParameter = SQLClientFactory.GetParameter("@OrderID", orderIDParameterValue, Direction.In);
       IParameter lockNameParameter = SQLClientFactory.GetParameter("@LockName", lockName, Direction.In);
       parametersList.Add(orderIDLockParameter);
       parametersList.Add(lockNameParameter);

       dataAccess.ExecNonQuery("Insert_SP", parametersList);  //Insert into table 2

       orderID = orderIDParameterValue;
    }

    transaction.Complete();
} 
```

存储过程：`GetNextOrder`

```
SELECT top 1 @OrderID=ht.OrderID        
     FROM dbo.table1 ht WITH(nolock)       
     left join dbo.table2 htl WITH(nolock) on ht.orderid = htl.orderid        
     WHERE ht.Status in (0,1) 
```

存储过程：`Insert_SP`

```
CREATE procedure [dbo].[Insert_SP] (
@OrderID INT,
@LockName VARCHAR(50)
   )
AS
BEGIN
SET NOCOUNT ON

 insert into table2 (OrderID, LockName) VALUES (@OrderID, @LockName) 

SET NOCOUNT OFF
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:37:28.083

您的 dataAccess 类是如何定义的？

我怀疑它没有参与新交易 - 使用

```
connection.EnlistTransaction(Transaction.Current) 
```

在那个班级。

# azure - MemCache 与 Azure 缓存

> ID：12405380
> 
> 赞同：15
> 
> 时间：2012-09-13T11:38:01.323
> 
> 标签：azure, memcached

我在使用 Memcache 和使用 Windows Azure 缓存之间纠结。我对他们中的任何一个都没有经验，所以我希望有人提出一些决定因素：

*   价格
*   表现
*   便于使用
*   任何事物

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-13T12:46:32.097

您实际上需要评估 3 个可能的选项：

*   Windows Azure 共享缓存（以前的 Windows Azure AppFabric 缓存）
    *   托管的多租户共享缓存
    *   不是免费的（[实际上很贵](http://www.windowsazure.com/en-us/pricing/details/#caching)）
    *   配额适用于缓存大小、每小时事务、每小时带宽、并发连接
    *   比 Windows Azure 缓存慢（预览版）
    *   可能发生节流
    *   常见问题解答：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh697522](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522)
*   Windows Azure 缓存（预览版）
    *   使用您角色的空闲内存（因此您无需支付任何额外费用即可使用它）
    *   没有配额（您的实例上可用的内存除外），没有节流，...
    *   专用于您的云服务
    *   改进了共享缓存的性能（请参阅[本页](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522)末尾）
    *   支持超过 100 GB 的大型缓存
    *   支持 memcache 二进制和文本协议（因此基于 memcached 的现有应用程序可以利用缓存预览）
    *   [视觉工作室支持](http://www.windowsazure.com/media/devcenter/dotnet/cache9.png)
*   内存缓存
    *   [可](http://blog.smarx.com/posts/memcached-in-windows-azure)在 Windows Azure 中使用
    *   使用角色的记忆，就像缓存预览一样
    *   免费，就像缓存预览一样
    *   不支持 Visual Studio
    *   专用，无配额，支持大缓存，...

我没有任何基准，但由于 Windows Azure 缓存（预览版）和 Memcached 都是使用您角色上的内存并支持 memcached 协议的专用解决方案，因此您可能只需选择适用于 Visual Studio 的 Windows Azure 缓存（预览版）和 .NET 支持。一旦它离开预览版，您也将能够获得对它的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T19:37:17.317

据我所知，Azure 缓存与 memcache 不兼容：

```
root@**:~# memccapable -h **.cache.windows.net -p 22233 -t 1 -b
binary noop                             Errno: 110 Connection timed out [FAIL]
binary quit                             Errno: 110 Connection timed out [FAIL]
binary quitq                            [FAIL]
binary set                              Errno: 104 Connection reset by peer [FAIL]
binary setq                             Errno: 104 Connection reset by peer [FAIL]
binary flush                            Errno: 104 Connection reset by peer [FAIL]
binary flushq                           Errno: 104 Connection reset by peer [FAIL] 
```

我放弃了让它发挥作用的尝试。在 Linux Azure VM 上安装 memcached 效果很好，延迟小于 1 毫秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-20T03:51:12.973

请注意，[Windows Azure 缓存已停用](https://azure.microsoft.com/en-us/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/)。

用于 Redis的替代[Azure Cache 与](https://docs.microsoft.com/en-us/azure/azure-cache-for-redis/)[Redis](https://redis.io/)兼容，所以[Memcached 与 Redis？](https://stackoverflow.com/questions/10558465/memcached-vs-redis?rq=1)可能会帮助你。

# entity-framework - EF4 Code First 中的可选导航属性

> ID：12405382
> 
> 赞同：0
> 
> 时间：2012-09-13T11:38:05.877
> 
> 标签：entity-framework, entity-framework-4

我正在尝试映射以下实体，问题是 EF 根据需要制作 CloseUserID，即使它们没有使用 Required 属性进行注释。

```
 public class UserRegistration {
    [Key]
    public string RegistrationID { get; set; }

    [Required]
    public DateTime CreatedAt { get; set; }

    public Nullable<DateTime> ClosedAt { get; set; }

    [Required]
    public int UserID { get; set; }

    [Required]
    [ForeignKey("UserID")]
    public virtual User User { get; set; }

    public int CloseUserID { get; set; }

    [ForeignKey("CloseUserID")]
    public virtual User CloseUser { get; set; }
  } 
```

如何让 EF 理解 CloseUserID 是可选的而不是必需的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:45:19.723

放

```
public int? CloseUserID { get; set; } 
```

就是这个。您不需要将该 FK 注释放在导航属性之上。

# django - 获取模型的所有对象，除了

> ID：12405383
> 
> 赞同：9
> 
> 时间：2012-09-13T11:38:05.950
> 
> 标签：django, django-models

让模型类：

```
class MyModel(models.Model):
    name = models.CharField(max_length=200)
    category = models.CharField(max_length=200) 
```

我想获取`MyModel`除具有特定类别的对象之外的所有对象。我正在使用这段代码：

```
[mm for mm in MyModel.objects.all() if mm.category != u'mycategory'] 
```

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T11:40:16.713

看看这个文档：[https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-specific-objects-with-filters)，你想使用排除过滤器。

所以像：

```
objects = MyModel.objects.exclude(category= u'mycategory') 
```

# java - 在java android中使用两个比较器

> ID：12405386
> 
> 赞同：0
> 
> 时间：2012-09-13T11:38:19.930
> 
> 标签：java, android, collections

我需要使用比较器对对象列表进行排序 我需要嵌套类型排序

例如首先按第一个属性排序，然后按第二个等等..

我尝试过类似的东西..

```
dinerlist = repository.Retrieve();
            ComparatorChain chain = new ComparatorChain();
            chain.addComparator(new TagEntry.SortByUsertype());
            chain.addComparator(new TagEntry.SortByCompany());
            chain.addComparator(new TagEntry.SortByUsername());
            Collections.sort(dinerlist, chain);
            size = dinerlist.size(); 
```

我在这里遇到的问题是 noclassdefifound 用于比较器链，尽管我已经在我的代码中导入了包

还有其他方法可以比较对象吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:48:16.283

您可以在 Java 中进行此操作（无需 Android 库）。我现在能想到两个选择

1.  编写一个比较器，一次比较更多字段
2.  编写更多比较器，每个比较器只比较一个字段

并且有两种方法可以比较对象

可比接口

```
public class Foo implements Comparable<Foo> {
    public int compareTo(Foo foo) {
        // compare them
    }
} 
```

自定义比较器 - 您可以将其传递给`Collections.sort`

```
public class CustomComparator implements Comparator<Foo> {

    public int compare(Foo foo1, Foo foo2) {
        // compare them
    }
} 
```

我建议创建更多自定义比较器并使用**类似**的（它只是一个原始代码）方法来处理它们

```
public int compare(Object o1, Object o2) throws UnsupportedOperationException {

    BitSet orderingBits = new BitSet();

    // get iterator for a List of comparators
    Iterator comparators = comparatorList.iterator();
    for (int comparatorIndex = 0; comparators.hasNext(); ++comparatorIndex) {

        Comparator comparator = (Comparator) comparators.next();
        int retval = comparator.compare(o1,o2);
        if (retval != 0) {
            // invert the order if it is a reverse sort
            if (orderingBits.get(comparatorIndex) == true) {
                retval *= -1;
            }

            return retval;
        }

    }

    // if comparators are exhausted, return 0
    return 0;
} 
```

[资源](http://javasourcecode.org/html/open-source/commons-collections/commons-collections-2.0/org/apache/commons/collections/comparators/ComparatorChain.java.html#line.304)

# cakephp - 将 CakePHP 应用程序部署到实时 Web 服务器后出现 500 个错误

> ID：12405388
> 
> 赞同：1
> 
> 时间：2012-09-13T11:38:23.220
> 
> 标签：cakephp

我一直在使用 wamp 在我的本地机器上开发一个 cakephp 应用程序（2.2）。我现在正处于我想把它放到网上的阶段，但我得到的只是 500 个内部服务器错误。这是我到目前为止所做的：

1.  在新的网络主机上创建了数据库（从我的本地数据库导出）并导入了详细信息。
2.  将项目的内容通过 FTP 上传到 Web 服务器的根目录。
3.  将 db 配置文件更改为新的 db 详细信息。
4.  访问 url 并得到“500 内部服务器错误”。

我在网上搜索了很长时间试图得到答案，发现各种博客文章都说在 .htaccess 中的某些条目中添加前导斜杠。这没有用。

我还删除了 /App/tmp/cache 中的所有文件，并确保它具有 777 权限。

请任何人帮忙，我已经在 1and1s 共享主机和另一家公司共享主机上尝试过。肯定有办法，我错过了什么？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:10:12.017

先部署clean cakePHP，如果可行，先尝试添加模型，一个一个。视图应该没有害处，所以把它们放在模型之后，下一步就是控制器。这样您就可以建立 borken 模型或控制器....

# .net - .net - 在页面或代码中设置控件？

> ID：12405389
> 
> 赞同：0
> 
> 时间：2012-09-13T11:38:29.647
> 
> 标签：.net, web, web-controls

我正在使用 c# 创建我的第一个 .net 网站。

我想知道动态设置 Web 控件的最佳方法是什么。我已经看到在 aspx 页面中设置控件的示例以及在代码中设置控件的其他示例。

寻找关于为什么一个比另一个更受欢迎的建议，或者这只是一个选择问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:43:37.343

这是一个非常广泛的问题，答案主要基于偏好。

对我来说，如果我正在编写一些没有大量 HTML 的东西，但主要是功能性后端处理（甚至大量基于 javascript），我将编写一个服务器控件并用代码创建所有内容。如果我的输出是经过大量修饰的 HTML，那么我肯定会使用 UserControl。有几个注意事项限制了您使用对初学者更友好的 UserControl 的能力，包括包含在工具箱中、导出到库等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:33:49.707

我认为这通常是个人喜好的问题。

就我个人而言，我更喜欢在 .aspx 页面中声明控件 - 我只是认为它更整洁。但是，如果控件的属性是动态的并且取决于在 .aspx.cs 中执行的代码的结果，那么我将在那里设置控件的属性。

当你完成你的第一个网站时，你会形成你自己的观点，所以现在不需要考虑太多。

# java - 如何使用 Java 查询数据存储以获取子对象并比较它们的属性？

> ID：12405390
> 
> 赞同：1
> 
> 时间：2012-09-13T11:38:34.390
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我正在谷歌应用引擎上实施一个项目。我想查询数据存储以引用子对象的属性并使用它来识别父对象。

将这些视为我正在谈论的父类和子类：

```
class Parent {  
String name;  
Child child;  
}      

class Child{  
String id;  
} 
```

我需要在`Parent`对象上创建一个查询，以便它`id`从`Child`（位于`Parent`）中获取属性并使用它来识别`Parent`我需要的对象。我知道设计有多糟糕，但请告诉我一个方法来做到这一点。我很想使用 App Engine Datastore 查询，但如果不可能的话，我也愿意接受 Java JDO 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:09:08.147

你有没有看过

[GAE Java 持久性博客：执行简单连接](http://gae-java-persistence.blogspot.co.uk/2010/03/executing-simple-joins-across-owned.html)

我相信我使用那里的信息来解决您遇到的问题。

# ios - IOS iPad应用底部奇怪的白色区域

> ID：12405392
> 
> 赞同：0
> 
> 时间：2012-09-13T11:38:38.123
> 
> 标签：ios, ipad, uitabbarcontroller, uiinterfaceorientation

我开发了 iPad 标签栏应用程序。我还在左侧使用自定义标签栏。Bu 标签栏在横向模式和纵向模式下沿边缘具有白色背景。此区域无法删除任何方法。

![iPad底部](../Images/5e3da8605892e3d1015576b577223d1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:46:44.153

听起来您在 nib 文件中使用的大小与应用中的布局不匹配。您需要设置视图的自动调整大小掩码，以便它们在运行时正确调整大小。

您可以通过打开右侧窗格来更改笔尖中的自动调整大小蒙版；选择看起来有点像标尺的图标，然后单击红色箭头。这是一张图片：

![在此处输入图像描述](../Images/6073773b54d6b8b2bc26a4e973b302c7.png)

重要的箭头是第二行的箭头；单击它们，使它们看起来像这样：

![界面构建器](../Images/554ea39c6dab25518bbaf4991d3410d0.png)

然后，您的视图应正确调整大小。

# jquery - 使用 jquery validate.js 对带有扩展名 [可选] 的四个文本框进行美国电话号码验证

> ID：12405398
> 
> 赞同：2
> 
> 时间：2012-09-13T11:39:07.993
> 
> 标签：jquery

我有一个表格，其中包含四个文本框电话、电话 1、电话 2 和分机。对于验证，我使用了 jquery validate.js。它工作正常，但存在一个问题，它允许无效数字也像 000-000-0000 或 001-000-0000

***下面是我的验证脚本：***

```
$params['rules'][$phone] = {"required": true,"minlength": 3,"digits":true };
$params['messages'][$phone] = {"required":"<div class='error-message'>*This is required </div> <div class='error-arrow'></div> ",
"minlength":"<div class='error-message'>*  Numbers should be 3 digits</div> <div class='error-arrow'></div>","digits":" <div class='error-message'>* Numbers only</div> <div class='error-arrow'></div> "};

$params['rules'][$phone2] = {"required": true,"minlength": 3,"digits":true };
$params['messages'][$phone2] = {"required":"<div class='error-message'>* This is required</div> <div class='error-arrow'></div> ",
"minlength":"<div class='error-message'>*  Numbers should be 3 digits</div> <div class='error-arrow'></div>",
"digits":" <div class='error-message'>* Numbers only</div> <div class='error-arrow'></div> "}; 
```

# javascript - Jquery检查向下滚动时是否到达页面上的标记

> ID：12405401
> 
> 赞同：1
> 
> 时间：2012-09-13T11:39:14.577
> 
> 标签：javascript, jquery, jquery-plugins

如果标记，我需要检测（在 jquery 中）：

```
<div id="marker"></div> 
```

在网页上向下滚动时已到达/点击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:42:31.407

既然你标记`jquery-plugins`了，你可以试试看这个插件。

[jquery-出现](http://code.google.com/p/jquery-appear/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:06:00.713

基本上你需要这个：

**[演示](http://jsbin.com/umifod/6/edit)**

```
function onScreen(){
  var markerPos = $('#marker').offset().top;
  var winScroll = $(document).scrollTop();
  var winH      = $(window).height();

  if( winScroll+winH >= markerPos){
    console.log('VISIBLE!');
  } 
}

$(window).on('scroll resize',function(){ 
    onScreen();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T01:05:16.680

你也可以试试 jQuery Waypoints 插件：http: [//imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

# javascript - 处理 HTML 字段集的大小

> ID：12405406
> 
> 赞同：0
> 
> 时间：2012-09-13T11:39:28.273
> 
> 标签：javascript, jquery, html, css

我有一些这种结构

```
<table>
        <tr>
            <td valign="top" style="width: 48%;">
                <fieldset>
                    <legend><b>Company Info:</b> </legend>
                    <table width="100%">
                        <tr>
                            <td>
                                <br />
                                dynamic data
                                <br />
                                 dynamic data
                                <br />
                                dynamic data
                                <br />
                                dynamic data                                
                            </td>
                        </tr>
                    </table>
                </fieldset>
            </td>
            <td valign="top" style="width: 48%;">
                <fieldset id="crew">
                    <legend><b>Crew Company Info:</b> </legend>
                    <table width="100%">
                        <tr>
                            <td>
                                <br />
                                dynamic data
                                <br />
                                dynamic data
                                <br />
                                dynamic data
                            </td>
                        </tr>
                    </table>
                </fieldset>
            </td>
        </tr>
    </table> 
```

这会产生两个并排填充动态数据的字段集，我想确保两个字段集具有相同的大小我的意思是如果一个具有比另一个更多的数据，另一个应该增加它的大小（主要是高度）以克服这种差异所以他们看起来都一样大，

任何建议我如何使用 CSS 或 JavaScript 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:43:04.310

我认为您可以使用 DIV 放置字段集并使用相同的大小。

请参阅[使用 jQuery 设置等高](http://filamentgroup.com/lab/setting_equal_heights_with_jquery/)

# php - 页面何时发送到客户端浏览器？

> ID：12405407
> 
> 赞同：0
> 
> 时间：2012-09-13T11:39:29.397
> 
> 标签：php

当我用php（在循环中）构建一组元素（比如100）时，页面是仅在循环完成时发送到客户端，还是在循环完成之前客户端页面已经显示在客户端上？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:50:29.513

您可以随时在 PHP 代码中控制到客户端浏览器的输出

示例立即发送给客户

```
for($i = 0; $i < 100; $i ++) {
    echo $i, " - sent ";
    sleep(1);
    flush(); // Send to client Instantly 
} 
```

循环后发送示例

```
ob_start();
for($i = 0; $i < 100; $i ++) {
    echo $i, " - sent ";
    sleep(1);
}
ob_end_flush() // Send after loop 
```

示例 3（这将只使用您的默认输出缓冲区配置）

```
for($i = 0; $i < 100; $i ++) {
    echo $i, " - sent ";
    sleep(1);
} 
```

最后（来源：Ninsuo）

某些浏览器在页面完全加载之前不会显示任何内容，因此我们并不总是控制刷新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:43:28.733

这取决于您的[输出缓冲](http://php.net/manual/en/book.outcontrol.php)是如何配置的。

[您可以在此处](http://php.net/manual/en/outcontrol.configuration.php)查看不同的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:54:25.157

我想说，在脚本结束之前，您不能依赖向用户显示的任何内容。虽然您可以设置 PHP 的缓冲设置，但这将通过可能缓冲或不缓冲的 Apache，然后到浏览器，浏览器也可能缓冲或不缓冲。

在用户数据可用时显示数据的最安全方法是在页面加载后通过客户端浏览器的 AJAX 调用。

# qt4 - Qt - 如何将图标图像绘制到 QListWidgetItem

> ID：12405409
> 
> 赞同：0
> 
> 时间：2012-09-13T11:39:31.577
> 
> 标签：qt4, qpainter, qlistwidget, qpixmap, qlist

我有 QListWidget，因为我已经添加了这些项目。我已经让***QListWidgetItems 在 QWidget 中从右到左滚动。***现在我想在 QWidget 中滚动的***每个项目之前添加一个图标图像。***如何在 QWidget 中绘制图标图像？请帮助我解决您的问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:19:19.640

为什么不尝试 QListWidgetItem::setIcon( QIcon & ) ？

使用 QListWidgetItem * QListWidget::item (int row) 从 0 迭代到 QListWidget::count() 来设置 QListWidget 中的所有现有项目。

# delphi - 我可以为没有接口的单元设置 {$RangeChecks on} 吗？

> ID：12405411
> 
> 赞同：1
> 
> 时间：2012-09-13T11:39:34.457
> 
> 标签：delphi, delphi-7, range-checking

我有一个包含很多表单和单元（没有接口）的delphi项目，我放置“{$RangeChecks on}”的表单捕获了超出范围的异常，但是当我将它添加到包含类的单元时它没有捕获异常，是否有助于捕获该单元中的索引异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:56:25.903

要*捕获*异常，您需要编写一个`try`-`except`块：

```
try
  // call code that fails range checks
except
  on E: ERangeError do
    // ...
end; 
```

为了确保代码*抛出*这些异常，您需要做两件事：

1.  确保启用范围检查。一种方法是使用`$RANGECHECKS`(aka `$R`) 编译器指令。您可以将它放在一个单元中的任何位置，例如顶部，或紧接在您要检查的任何代码行之前。它适用于当前单元中跟随它的所有代码，直到编译器遇到另一个将其关闭的指令，例如`{$R-}`.

    如果您的计划是将它放在*每个*单元的顶部，那么您可以做我所做的并通过编辑项目的编译器选项来全局启用它。（当你在那里时，我建议启用溢出检查和“键入@运算符”。）

2.  执行违反类型或数组范围的代码。将大整数值分配给较小的类型，或将负值分配给无符号类型。从动态数组或在编译时已知长度的固定大小数组的末尾读取。

这与单元的用途或单元包含的代码*类型*无关。范围检查选项同样适用于任何类型的单元，包括定义表单的单元、定义数据模块的单元以及根本不定义任何设计时对象的单元。如果您认为您的单元中的代码类型正在影响范围检查选项的行为，那么您还有其他需要调查的问题

# c# - 套接字上的 Protobuf-net 序列化。没有找到无参数构造函数 ProtoException

> ID：12405413
> 
> 赞同：5
> 
> 时间：2012-09-13T11:39:41.927
> 
> 标签：c#, .net, protocol-buffers, protobuf-net

我创建了一个应用程序，其中使用套接字完成进程间通信。当客户端连接到我创建的服务器并发送序列化消息时，该过程开始。这条消息，我使用 Protobuf-net 序列化，使用 SerializeWithLengthPrefix 并使用 DeserializeWithLengthPrefix 反序列化它。客户端将消息发送到完美反序列化它的服务器，但在服务器到客户端的情况下并非如此。

主类是BaseMessage，它是抽象的。

```
[Serializable, ProtoContract, ProtoInclude(5001, typeof(LogonMessage))]
abstract public class BaseMessage
{
    public BaseMessage()
    {

    }

    abstract public int MessageType { get; }
} 
```

LogonMessage 实现了 BaseMessage 类。

```
[Serializable, ProtoContract]
public class LogonMessage : BaseMessage
{
    public LogonMessage()
    {

    }

    [ProtoMember(1)]
    public string Broker { get; set; }

    [ProtoMember(2)]
    public int ClientType { get; set; }

    public override int MessageType
    {
        get { return 1; }
    }
} 
```

在初始握手之后，客户端请求一些在 protobuf-net 帮助下序列化的服务，而我端的本地服务器通过从网络上的另一台服务器请求数据来提供服务。从客户端到服务器的消息传输完美无缺。

当我的服务器从 Web 服务器接收到数据时，它会将其序列化并将数据发送到客户端。但是这一次，当我尝试使用相同的过程在客户端反序列化数据时，我得到以下异常：“No parameterless Constructor found for BaseMessage”

我使用以下代码行反序列化（这是发生异常的地方）。

```
BaseMessage baseMessage = Serializer.DeserializeWithLengthPrefix<BaseMessage>(networkStream, PrefixStyle.Base128); 
```

这就是消息在服务器上的序列化方式。

```
Serializer.SerializeWithLengthPrefix(networkStream, baseMessage, PrefixStyle.Base128); 
```

在客户端和服务器之间的连接开始时使用的 NetworkStream 存储在一个对象中，该对象存储在一个字典中。我从字典中的该对象中挑选出相同的 NetworkStream 并使用它将序列化数据发送到客户端（从服务器）。但是会出现上述问题。有什么帮助吗？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:54:25.813

这在任何 v2 版本中都应该可以正常工作；2.0.0.480 是当前在 NuGet 上宣传的下载，但也可以使用 2.0.0.580。我已经检查了 1.0.0.280 和 2.0.0.480，但它们都没有表现出这种症状，所以我猜你使用的是不同的版本。因此，我的建议是：确保你在这两个之一（或更高，如果有的话）。

对于信息，您不需要`[Serializable]`protobuf-net，但它也没有伤害。此外，您的`BaseMessage`构造函数可能应该是`protected`（`public`对类型的构造函数没有真正意义`abstract`）。但是由于编译器会*自动为您*完成所有这些，您可以简化：

```
[ProtoContract, ProtoInclude(5001, typeof(LogonMessage))]
abstract public class BaseMessage
{
    abstract public int MessageType { get; }
}

[ProtoContract]
public class LogonMessage : BaseMessage
{
    [ProtoMember(1)]
    public string Broker { get; set; }

    [ProtoMember(2)]
    public int ClientType { get; set; }

    public override int MessageType
    {
        get { return 1; }
    }
} 
```

其他想法：`5001`有点偏高；您将从低值包含数字中获得更好的效率。`1`跃入脑海。它们不必是*普遍*唯一的：只是在该类型中是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T16:06:17.467

只是补充一点，我试图反序列化一个没有寻找到源的 MemoryStream 并得到“没有为 BaseObject 找到无参数构造函数”异常，即使该类确实有一个无参数构造函数。

```
var tdp = new DerivedObject("Test");
using (var ms  = new MemoryStream())
{
    Serializer.Serialize(ms,tdp);
    //was missing this line
    ms.Seek(0, SeekOrigin.Begin);

    var tdp2 = Serializer.Deserialize<DerivedObject>(ms);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-31T20:57:45.627

我知道这是在回答问题几年后，但对于其他人来说，我只是遇到了一个问题，我正在使用抽象基类并得到“没有为 {className 找到无参数构造函数}”消息，但出于完全错误的原因......我很傻，我正在反序列化 MemoryStream 中没有任何内容（显然，当时我不知道）。令人沮丧的愚蠢。正确的错误消息应该是：`"id10t error - cannot deserialize nothing, dum dum!"`。

因为错误消息是指一些构造函数问题，以及抽象类的使用，这让我认为我错误地使用了库（即 - 没有正确地用相应的 Proto* 属性装饰类/成员等）

关键是：把这个错误消息带上一粒盐——你的异常的根本原因可能和我的一样；退后一步，看看你访问 protobuf-net API 周围的移动部件，并确保在你的头撞到墙上之前没有任何愚蠢的事情发生，搜索图书馆（也就是说，在这种情况下，实际上工作正常）从外面。

如何重现错误？有一堆嘈杂的代码会分散你对实际错误的注意力，同时还会出现一条红鲱鱼错误消息......就像这样：

```
[TestClass]
public class UnitTestJammieJawns
{
    [TestMethod]
    public void ProtobufAbstract_TestMethod()
    {
        var sub = new Sub() { AbstractInt = 234 , OtherInt32 = 987, SomeString = "qwer" };

        byte[] buffer = null;
        using (var ms = new MemoryStream())
        {
            ProtoBuf.Serializer.Serialize(ms, sub);  // works - hooray!
            buffer = ms.ToArray();  // we've got binary content, people!
        }

        Sub obj = null;
        using (var ms = new MemoryStream())  // woops... you forgot the provide the serialized object - should be: new MemoryStream(buffer) 
        {
            obj = ProtoBuf.Serializer.Deserialize<Sub>(ms);  // <- throws exception (this is good) with misleading message (this is not so good)
        }
    }
}

[ProtoContract]
[ProtoInclude(1, typeof(Sub))]
public abstract class Super
{
    public abstract int AbstractInt { get; set; }

    [ProtoMember(1)]
    public string SomeString { get; set; }
}

[ProtoContract]
public class Sub : Super
{
    [ProtoMember(2)]
    private int asdf;

    public override int AbstractInt
    {
        get
        {
            return asdf;
        }
        set
        {
            asdf = value;
        }
    }

    [ProtoMember(3)]
    public int OtherInt32 { get; set; }
} 
```

希望这可以避免其他人引起我的头痛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-30T19:27:44.373

此错误消息似乎涵盖了[@isandburn](https://stackoverflow.com/questions/12405413/protobuf-net-serialization-on-sockets-no-parameterless-constructor-found-protoe/31755079#31755079)和[@JP Tissot](https://stackoverflow.com/questions/12405413/protobuf-net-serialization-on-sockets-no-parameterless-constructor-found-protoe/28991660#28991660)指出的各种不同错误。

另一个是如果你反序列化不是 protobuf 的数据。

```
var tdp = new DerivedObject("Test");
using (var ms  = new MemoryStream())
{
    JsonSerializer.Serialize(ms,tdp); //should be protobuf
    ms.Seek(0, SeekOrigin.Begin);

    var tdp2 = Serializer.Deserialize<DerivedObject>(ms);
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2020-06-04T13:27:40.730

错误

*“未找到无参数构造函数”*

我得到了，当协议缓冲区中的二进制流不是子类（通过 [ProtoInclude] 链接）时，就在开始流（二进制数据中的第一个）。

# php - php表单未在数据库中提交值

> ID：12405415
> 
> 赞同：3
> 
> 时间：2012-09-13T11:39:47.110
> 
> 标签：php, mysql, html

我制作了一个包含 26 个字段的表单，其中包括 6 个图像。使用 PHP 语言，我使用输入类型提交提交表单，然后发布所有值，但未完成数据库中的输入。

它显示了这个错误：`G:\xampp\tmp\php9506.tmp`

在错误中，用PHP编写的数字`9506`是随机数，每次我尝试提交表单时它都会改变。

我的数据库和连接文件是正确的。

可能的原因是什么？

```
<?php
 include "header.php";
 include "left.php";

 $busi_cat = $_GET['mcatname'];

 if(isset($_POST) && $_POST['add'] == "Add")
 {

extract($_POST);

 $adver_type = implode(',',$adver_type);
 echo $busi_cat = $_GET['mcatname'];

if ($_FILES["photo1"]['tmp_name'] != "")
    {
        if(! file_exists("images/client"))
        {
        mkdir("images/client"); 
        }
        echo $source = $_FILES["photo1"]['tmp_name'];
        $photo1 = "images/client/".$_FILES["photo1"]['name'];

        if(move_uploaded_file($source, $photo1))
        {
            echo "image uploaded  succesfully"; 
        }
        else
        {
            echo "problem in uploading";    
        }
    }
    else
    {
        echo "please select a photo";   
    }

    if ($_FILES["photo2"]['tmp_name'] != "")
    {
        if(! file_exists("images/client"))
        {
        mkdir("images/client"); 
        }

        $source = $_FILES["photo2"]['tmp_name'];
        $photo2 = "images/client/".$_FILES["photo2"]['name'];

        if(move_uploaded_file($source, $photo2))
        {
            echo "image uploaded  succesfully"; 
        }
        else
        {
            echo "problem in uploading";    
        }
    }
    else
    {
        echo "please select a photo";   
    }

    if ($_FILES["photo3"]['tmp_name'] != "")
    {
        if(! file_exists("images/client"))
        {
        mkdir("images/client"); 
        }

        $source = $_FILES["photo3"]['tmp_name'];
        $photo3 = "images/client/".$_FILES["photo3"]['name'];

        if(move_uploaded_file($source, $photo3))
        {
            echo "image uploaded  succesfully"; 
        }
        else
        {
            echo "problem in uploading";    
        }
    }
    else
    {
        echo "please select a photo";   
    }

    if ($_FILES["photo4"]['tmp_name'] != "")
    {
        if(! file_exists("images/client"))
        {
        mkdir("images/client"); 
        }

        $source = $_FILES["photo4"]['tmp_name'];
        $photo4 = "images/client/".$_FILES["photo4"]['name'];

        if(move_uploaded_file($source, $photo4))
        {
            echo "image uploaded  succesfully"; 
        }
        else
        {
            echo "problem in uploading";    
        }
    }
    else
    {
        echo "please select a photo";   
    }

    if ($_FILES["photo5"]['tmp_name'] != "")
    {
        if(! file_exists("images/client"))
        {
        mkdir("images/client"); 
        }

        $source = $_FILES["photo5"]['tmp_name'];
        $photo5 = "images/client/".$_FILES["photo5"]['name'];

        if(move_uploaded_file($source, $photo5))
        {
            echo "image uploaded  succesfully"; 
        }
        else
        {
            echo "problem in uploading";    
        }
    }
    else
    {
        echo "please select a photo";   
    }

    if ($_FILES["photo6"]['tmp_name'] != "")
    {
        if(! file_exists("images/client"))
        {
        mkdir("images/client"); 
        }

        $source = $_FILES["photo6"]['tmp_name'];
        $photo6 = "images/client/".$_FILES["photo6"]['name'];

        if(move_uploaded_file($source, $photo6))
        {
            echo "image uploaded  succesfully"; 
        }
        else
        {
            echo "problem in uploading";    
        }
    }
    else
    {
        echo "please select a photo";   
    }

echo $query = "INSERT INTO register(busi_name, busi_cat, busi_scat, oth_busi_cat, addr, cont_per, phone, mobile, emailid, website, deal, keyword, message, adver_plan, photo1, photo2, photo3, photo4, photo5, photo6, status, full_page)VALUES('$busi_name', '$busi_cat', '$busi_scat', '$oth_busi_cat', '$addr', '$cont_per', '$phone', '$mobile', '$emailid', '$website', '$deal', '$keyword', '$message','$adver_type','$photo1','$photo2','$photo3','$photo4','$photo5','$photo6','0', '0')";
$res = mysql_query($query);
if($res)
    {
        $msg = "Your Business Added Successfully.";
    }
  }
   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:45:38.160

可能是您使用`$_GET`而不是`$_POST`. 尝试`$_POST['element name']`

我认为问题在于[提取](http://php.net/manual/en/function.extract.php)功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:25:26.587

`echo $query = "INSERT I....`

`echo`从此行中删除。这是您看到“随机数”时打印的内容。

如果要打印查询（不推荐），请在行`echo $query;` *后*`$query = "INSERT`添加。

另外，请使用[`mysqli`](http://us.php.net/manual/en/book.mysqli.php)和[准备好的语句](http://us.php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

# f# - 一个对象是否可以访问同一类的另一个对象的私有字段/函数？

> ID：12405416
> 
> 赞同：7
> 
> 时间：2012-09-13T11:39:50.457
> 
> 标签：f#

我知道这在 C# 中是可能的，它产生简单而高效的代码。--- 同一类的两个对象可以访问彼此的私有部分。

```
class c1
{
    private int A;

    public void test(c1 c)
    {
        c.A = 5;
    }
} 
```

但这在 F# 中似乎是不可能的，是真的吗？

```
type c1()
     let A = 0
     member test (c: c1) = c.A 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T12:20:19.637

Interesting question. It seems to work with an explicit field but not with a let binding:

```
// Works
type c1 =
    val private A : int
    new(a) = { A = a }
    member m.test(c : c1) = c.A

let someC1 = new c1(1)
let someMoreC1 = new c1(42);
let theAnswer = someC1.test someMoreC1

// Doesn't work
type c2() =
    let mutable A = 42
    // Compiler error: The field, constructor or member 'A' is not defined
    member m.test(c : c2) = c.A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:14:46.537

是的，但是在您的示例中，它在`A`语义上不是 的私有成员`c1`，它更像是构造函数的局部变量。

@afrischke 提供了一个示例，说明如何`c1`使用实际的私有成员`A`（使用`val`字段）进行定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:24:27.860

这是可能的，并且被广泛使用，例如，用于检查成员相等性：

```
type c1 =
    member private this.A = 0
    interface IEquatable<c1> with
        member this.Equals (that: c1) = this.A = that.A
    // of course, it can be done in a regular method as well
    member this.Equals (that: c1) = this.A = that.A 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T14:02:47.050

正如 F# 规范的第[8.6.1](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997164) .3 节所述：

> 实例定义定义的函数和值在词法范围内（因此隐式私有）到正在定义的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T12:04:23.940

您只需`a`在实例方法中直接 使用

```
type c1()
     let A = 0
     member x.test = A 
```

对于静态方法，这不起作用，因为 let 绑定略有不同 - 然后您需要一个类定义，例如

```
type c1()
     private member x.A = 0
     static member test (A:c1) = A.A 
```

# css - 如何在sencha touch 2框架中更改选择字段的完成和取消按钮的颜色

> ID：12405423
> 
> 赞同：1
> 
> 时间：2012-09-13T11:39:58.377
> 
> 标签：css, sencha-touch-2

// 嗨，我正在使用 sencha touch 2.0 框架。我在我的项目中使用了选择字段，事情是我需要更改选择字段的完成和取消按钮的颜色。但是这些选择器按钮在浏览器中不可见，但出现在 android 设备中。那么如何将颜色应用于这两个按钮。

如果可能的话，也提供一些细节和相关的帖子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:12:48.280

这将覆盖您应用中所有取消按钮的样式。在您的 CSS 中包含以下内容，并在 sencha 的 CSS 之后包含您的 CSS：

```
/*Cancel Button styles overriding*/
.x-toolbar-dark .x-button, .x-toolbar-dark .x-button.x-button-back::after, .x-toolbar-dark .x-button.x-button-forward::after, .x-toolbar .x-toolbar-dark .x-button, .x-toolbar .x-toolbar-dark .x-button.x-button-back::after, .x-toolbar .x-toolbar-dark .x-button.x-button-forward::after, .x-toolbar-dark .x-field-select .x-component-outer, .x-toolbar-dark .x-field-select .x-component-outer.x-button-back::after, .x-toolbar-dark .x-field-select .x-component-outer.x-button-forward::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-back::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-forward::after, .x-toolbar-dark .x-field-select .x-component-outer::before, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-back::after, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-forward::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-back::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-forward::after { 
    background-color: #303030;
    background-image: none;
}
.x-toolbar-dark .x-button, .x-toolbar .x-toolbar-dark .x-button, .x-toolbar-dark .x-field-select .x-component-outer, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer, .x-toolbar-dark .x-field-select .x-component-outer::before, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before {
    border: 1px solid #000000;
    border-top-color: #000000;
    color: white;
}
.x-toolbar-dark .x-button.x-button-pressing, .x-toolbar-dark .x-button.x-button-pressing::after, .x-toolbar-dark .x-button.x-button-pressed, .x-toolbar-dark .x-button.x-button-pressed::after, .x-toolbar-dark .x-button.x-button-active, .x-toolbar-dark .x-button.x-button-active::after, .x-toolbar .x-toolbar-dark .x-button.x-button-pressing, .x-toolbar .x-toolbar-dark .x-button.x-button-pressing::after, .x-toolbar .x-toolbar-dark .x-button.x-button-pressed, .x-toolbar .x-toolbar-dark .x-button.x-button-pressed::after, .x-toolbar .x-toolbar-dark .x-button.x-button-active, .x-toolbar .x-toolbar-dark .x-button.x-button-active::after, .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressing, .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressing::after, .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressed, .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressed::after, .x-toolbar-dark .x-field-select .x-component-outer.x-button-active, .x-toolbar-dark .x-field-select .x-component-outer.x-button-active::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressing, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressing::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressed, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-pressed::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-active, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer.x-button-active::after, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressing, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressing::after, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressed, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressed::after, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-active, .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-active::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressing, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressing::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressed, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-pressed::after, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-active, .x-toolbar .x-toolbar-dark .x-field-select .x-component-outer::before.x-button-active::after {
    background-color: #383838;
    background-image: none;
}

/*Done Button styles overriding*/
.x-button.x-button-action, .x-button.x-button-action.x-button-back::after, .x-button.x-button-action.x-button-forward::after, .x-toolbar .x-button.x-button-action, .x-toolbar .x-button.x-button-action.x-button-back::after, .x-toolbar .x-button.x-button-action.x-button-forward::after, .x-button.x-button-action-round, .x-button.x-button-action-round.x-button-back::after, .x-button.x-button-action-round.x-button-forward::after, .x-toolbar .x-button.x-button-action-round, .x-toolbar .x-button.x-button-action-round.x-button-back::after, .x-toolbar .x-button.x-button-action-round.x-button-forward::after, .x-button.x-button-action-small, .x-button.x-button-action-small.x-button-back::after, .x-button.x-button-action-small.x-button-forward::after, .x-toolbar .x-button.x-button-action-small, .x-toolbar .x-button.x-button-action-small.x-button-back::after, .x-toolbar .x-button.x-button-action-small.x-button-forward::after {
    background-color: #303030;
    background-image: none;
}
.x-button.x-button-action, .x-toolbar .x-button.x-button-action, .x-button.x-button-action-round, .x-toolbar .x-button.x-button-action-round, .x-button.x-button-action-small, .x-toolbar .x-button.x-button-action-small {
    border: 1px solid #000000;
    border-top-color: #000000;
    color: white;
}
.x-button.x-button-action.x-button-pressing, .x-button.x-button-action.x-button-pressing::after, .x-button.x-button-action.x-button-pressed, .x-button.x-button-action.x-button-pressed::after, .x-button.x-button-action.x-button-active, .x-button.x-button-action.x-button-active::after, .x-toolbar .x-button.x-button-action.x-button-pressing, .x-toolbar .x-button.x-button-action.x-button-pressing::after, .x-toolbar .x-button.x-button-action.x-button-pressed, .x-toolbar .x-button.x-button-action.x-button-pressed::after, .x-toolbar .x-button.x-button-action.x-button-active, .x-toolbar .x-button.x-button-action.x-button-active::after, .x-button.x-button-action-round.x-button-pressing, .x-button.x-button-action-round.x-button-pressing::after, .x-button.x-button-action-round.x-button-pressed, .x-button.x-button-action-round.x-button-pressed::after, .x-button.x-button-action-round.x-button-active, .x-button.x-button-action-round.x-button-active::after, .x-toolbar .x-button.x-button-action-round.x-button-pressing, .x-toolbar .x-button.x-button-action-round.x-button-pressing::after, .x-toolbar .x-button.x-button-action-round.x-button-pressed, .x-toolbar .x-button.x-button-action-round.x-button-pressed::after, .x-toolbar .x-button.x-button-action-round.x-button-active, .x-toolbar .x-button.x-button-action-round.x-button-active::after, .x-button.x-button-action-small.x-button-pressing, .x-button.x-button-action-small.x-button-pressing::after, .x-button.x-button-action-small.x-button-pressed, .x-button.x-button-action-small.x-button-pressed::after, .x-button.x-button-action-small.x-button-active, .x-button.x-button-action-small.x-button-active::after, .x-toolbar .x-button.x-button-action-small.x-button-pressing, .x-toolbar .x-button.x-button-action-small.x-button-pressing::after, .x-toolbar .x-button.x-button-action-small.x-button-pressed, .x-toolbar .x-button.x-button-action-small.x-button-pressed::after, .x-toolbar .x-button.x-button-action-small.x-button-active, .x-toolbar .x-button.x-button-action-small.x-button-active::after {
    background-color: #383838;
    background-image: none;
} 
```

# c - 在 C 中迭代字符串的首选方法是什么？

> ID：12405427
> 
> 赞同：1
> 
> 时间：2012-09-13T11:40:19.257
> 
> 标签：c, string, iteration

```
 char *vowels = "aeiouyæøå";
    int len = strlen(vowels);
    int counter;
    for (counter = 0; counter < len; counter++) {
        char vowel = *vowels++;
        printf("%c\n", vowel);
    } 
```

或者

```
 char *vowels = "aeiouyæøå";
    int len = strlen(vowels);
    int counter;
    for (counter = 0; counter < len; counter++) {
        char vowel = vowels[counter];
        printf("%c\n", vowel);
    } 
```

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T11:41:39.190

```
char c;
while ( c = *(vowels++) )
{
} 
```

不需要`strlen`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:44:39.813

如果您有一个以 null 结尾的字符串，即一个字符数组，最后有一个额外的 0x00 字节，您可以使用：

```
char *foo = "some string";
char *c = foo;
while(*c)
{
     // ...
     ++c;
} 
```

有趣的附带事实：分配为常量的字符串（例如`char *foo = "some string"`）应始终以空值结尾。

如果您想牺牲可读性以减少代码行数，您还可以执行以下操作：

```
char *foo = "some string";
char *c;
for(*c = foo; *c; ++c)
{
     // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:49:46.193

这可以在函数中使用，我喜欢它，因为我认为它清楚地表明存在，并且必须在字符串的末尾有一个 '\0'，也没有遍历字符串两次：

```
char some_string[] = "aeiouy";
char *vowels;
for (vowels=some_string ; *vowels != '\0' ; vowels++) {
    char vowel = *vowels;
    printf("%c\n", vowel);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:41:46.730

您可以使用递归，但这并不比上述任何方法好。:)

# jquery - 如何通过 jQuery 切换特定 div 的类？

> ID：12405430
> 
> 赞同：0
> 
> 时间：2012-09-13T11:40:34.250
> 
> 标签：jquery

我有这样的代码。

```
<div class="friend cell">
                        <div class="inner">
                            <span class="name">Bob</span>
                            <br />
                            (id: 57)
                            <input type="hidden" class="friend_id" value="57 " />
                        </div>
                    </div> 
```

我想在朋友之后切换课程。
我的脚本是这样的。

```
$("div.friend").click(function () {
                $(this).toggleClass("highlight");
            }); 
```

但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:44:03.560

试试这个，（传递参数）它对我有用！

```
$("div.friend").click(function () {
            $(this).toggleClass("highlight",1);
        }); 
```

# python - 将亚马逊 api 与 python 一起使用

> ID：12405433
> 
> 赞同：2
> 
> 时间：2012-09-13T11:40:46.600
> 
> 标签：python, amazon-web-services, tornado

亚马逊似乎改变了他们的 API，我从 Python 得到错误：

```
id = "..."
pas = "..."
produit = amazon.API(id, pas, "fr")
produit.item_search("playstation") 
```

我得到这个错误：

> AWSError：AWS.MissingParameters：您的请求缺少必需的参数。必需的参数包括 AssociateTag。

我已经尝试了文档中的示例，它是相同的：

```
produit.item_search('Books', Publisher='Galileo Press') 
```

> AWSError：AWS.MissingParameters：您的请求缺少必需的参数。必需的参数包括 AssociateTag。

我发现了这个：

> 将示例更改为：
> 
> ```
> api = API(AWS_KEY, SECRET_KEY, 'de',ASSOC_TAG) 
> ```

从这里开始： [https ://bitbucket.org/basti/python-amazon-product-api/issue/33/required-parameters-include-associatetag](https://bitbucket.org/basti/python-amazon-product-api/issue/33/required-parameters-include-associatetag)

有任何想法吗？或者文档应该更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:51:12.960

他们最近放弃了对过时 API 的支持，最新版本需要有效的 Associate Tag。

[https://affiliate-program.amazon.com/gp/advertising/api/detail/api-changes.html](https://affiliate-program.amazon.com/gp/advertising/api/detail/api-changes.html)

> 关联标签参数：向 API 发出的每个请求都应包含一个有效的关联标签。任何不包含有效关联标签的请求都将被拒绝并显示相应的错误消息。

ASSOC_TAG 必须是您的真实标签（与 API 密钥匹配的标签）。

# javascript - jQuery追加到动态创建的子div

> ID：12405435
> 
> 赞同：0
> 
> 时间：2012-09-13T11:41:06.017
> 
> 标签：javascript, jquery, html, dynamically-generated

我正在尝试将文本附加到已动态创建的 div 中。在这个 div 中有 2 个子 div，一个用于标题，一个用于正文。

这个主 div 是可放置的，但是我希望当项目被放置时，文本进入子 div“body”。

我目前有以下代码将文本附加到主 div。

```
 $($(this)).append(draggableText + '<br>'); 
```

子 div 的名称是**#catPileBoxBody**

但是，其中有 3 个是动态创建的。那么有没有办法将文本插入到类似的东西中：

```
$($(this."CHILD called #catPileBoxBody")).append(draggableText + '<br>'); 
```

任何帮助将不胜感激！我已经为此难倒了 AGES！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:41:59.437

```
$(this).find("#catPileBoxBody").append(draggableText + '<br>'); 
```

但是由于您应该只有一个具有给定 ID 的元素，因此您应该能够简单地做

```
$("#catPileBoxBody").append(draggableText + '<br>'); 
```

div 是动态创建的这一事实并没有改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:44:01.157

您可以通过以下方式附加它

**编辑：**

```
 $(this).find('div.yourClass').append(draggableText + '<br>'); 
```

# java - 更改 Substance LookAndFeel 的文本颜色

> ID：12405436
> 
> 赞同：2
> 
> 时间：2012-09-13T11:41:07.037
> 
> 标签：java, swing, look-and-feel, substance

我正在尝试更改 Substance 外观的文本颜色（实际上我正在使用 SubstanceGraphiteGlassLookAndFeel 。我不知道该怎么做...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T19:57:58.583

最终，您必须弄乱配色方案。

由于您使用的是 Graphite Glass 皮肤，因此弄乱配色方案要容易得多，因为它们的值不是在 Java 代码中设置的。如果您将他的文件复制`/org/pushingpixels/substance/api/skin/graphite.colorschemes`到您的类路径中，您可以进入各种方案定义并将 colorForeground 条目更改为您想要的任何内容。可能是黑色 ( `#FFFFFF`) 或各种灰色 ( `#cccccc`, `#999999`, `#666666`, `#333333`)。但由于它们是十六进制颜色，你可以做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:22:48.410

1.  `Keys`通过杀死所有创造这个伟大主题的`UIManager`东西来改变一切

    *   更改全部或具体`Keys`的值`UIManager``JComponents``JComponent`

    *   为所有或具体的`Highlighter`(s) 中的所有值更改值`JComponents``JComponent`

    *   我不确定这个主题是否也可以使用`Trident`，必须检查前者`Kirill's forum`

2.  或更简单地更改具体`JComponents`实例，必须为所有人重复`JComponents`

3.  免责声明

    > 永远不要改变`Colors`或`Fonts`为`Custom Look and Feels`，必须检查是否`is or isn't`有直接的方式实现`author of L&F`，永远不要尝试，`JComponents`这个主题不是我最喜欢的，那么第二点通过消除实现的副作用更安全`Custom L&F`，但在这种情况下你可能会松散`Highlighter`实施

# vtk - 为 .vtk 文件设置不透明度

> ID：12405437
> 
> 赞同：1
> 
> 时间：2012-09-13T11:41:08.293
> 
> 标签：vtk

我试图可视化大脑数据集。实际上，我认为它有效，但我应该设置不透明度。根据我在互联网上阅读的内容，vtkpiecewisefunction 必须用于解决方案。但是，当我根据[http://vtk.org/gitweb?p=VTK.git;a=blob;f=Examples/Medical/Cxx/Medical3.cxx](http://vtk.org/gitweb?p=VTK.git;a=blob;f=Examples/Medical/Cxx/Medical3.cxx)更改代码时，我遇到了一个问题。我不知道如何更改阅读器和过滤部分代码。我得到的代码、.vtk 文件和图像存在于链接中：[https ://www.dropbox.com/sh/51kjftvdko3g6s8/wEe88Id9QN](https://www.dropbox.com/sh/51kjftvdko3g6s8/wEe88Id9QN)

你能告诉我如何改变这个吗？此外，您可以告诉我另一种调整图像不透明度的解决方案。

请让我知道您获得的图像与链接上的图像相同，因为它可能与我的计算机的图形驱动程序有关。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:36:07.640

当我想改变不透明度时，我使用了演员：

```
actor->GetProperty()->SetOpacity(0.5); 
```

# iphone - 通过xib在Navigation Bar上添加segmentController

> ID：12405438
> 
> 赞同：1
> 
> 时间：2012-09-13T11:41:12.750
> 
> 标签：iphone, objective-c, xcode

谁能告诉我如何使用 xib 但不使用情节提要在导航栏上添加段控制器？它仅适用于 iphone，不适用于 ipad。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:09:11.070

将 UIToolBar 拖到您的 XIB 顶部。然后将 UIsegmentControl 拖到上面。这样您将获得一个自定义导航栏。

如果出现默认的 iphone navigationBar..在其 viewWillAppear 中添加以下代码

[self.navigationController setNavigationBarHidden:YES];

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:24:54.757

浏览此链接一次。这可能会给出一个想法。

[http://books.google.co.in/books?id=rk1EEL4WpFEC&pg=PA504&lpg=PA504&dq=Add+segment+Controller+in+Navigation+Bar+through+xib+%2B+iphone+sdk&source=bl&ots=KVUnDOmKA6&sig=wPiJj18ZVCgCp_ScZ7m0o4Ou- H4&hl=en#v=onepage&q=Add%20segment%20Controller%20in%20Navigation%20Bar%20through%20xib%20%2B%20iphone%20sdk&f=false](http://books.google.co.in/books?id=rk1EEL4WpFEC&pg=PA504&lpg=PA504&dq=Add+segment+Controller+in+Navigation+Bar+through+xib+%2B+iphone+sdk&source=bl&ots=KVUnDOmKA6&sig=wPiJj18ZVCgCp_ScZ7m0o4Ou-H4&hl=en#v=onepage&q=Add%20segment%20Controller%20in%20Navigation%20Bar%20through%20xib%20%2B%20iphone%20sdk&f=false)

# asp.net - ASP.NET 网站。将整个域从 http 重定向到 https

> ID：12405442
> 
> 赞同：4
> 
> 时间：2012-09-13T11:41:44.800
> 
> 标签：asp.net, redirect, iirf

就像在标题中一样。如何重定向整个域，例如：**http** ://testdomain.com.au/到**https://testdomain.com.au/**我可以在 IIRF 文件中进行吗？如果是的话，这应该是什么样子？如何将 IIRF 文件绑定到站点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T11:50:11.803

您可以通过以下方式执行此操作`IIS Rewrite module`：

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

[http://www.iis-aid.com/articles/how_to_guides/redirect_http_to_https_iis_7](http://www.iis-aid.com/articles/how_to_guides/redirect_http_to_https_iis_7)

```
<rule name="HTTP to HTTPS redirect" stopProcessing="true">
  <match url="(.*)" />
    <conditions>
      <add input="{HTTPS}" pattern="off" ignoreCase="true" />
    </conditions>
   <action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}/{R:1}" />
</rule> 
```

或者您可以通过`Global.asax`文件重定向：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    if ( !Request.IsSecureConnection)
    {
            string path = string.Format("https{0}", Request.Url.AbsoluteUri.Substring(4)); 

            Response.Redirect(path);
    }
} 
```

[http://forums.asp.net/t/1340392.aspx](http://forums.asp.net/t/1340392.aspx)

# delphi - 用于 MacOS 的 Delphi 的 OutputDebugString()

> ID：12405447
> 
> 赞同：6
> 
> 时间：2012-09-13T11:41:57.983
> 
> 标签：delphi, delphi-xe2, nslog, firemonkey, outputdebugstring

Delphi OSX 单元中是否有 NSLog 声明。我未能在 Firemonkey 应用程序中找到 OutputDebugString 的替代品。

最终解决方案如下所示：

```
/// <remarks>
/// Output debug string. Output debug string can be seen in Delphi
/// View|Debug Windows|Event Log or with 3-rd party programs such as
/// dbgview.exe from SysInternals (www.sysinternals.com)
/// </remarks>
procedure ODS(const Text: string);
begin
  {$IFDEF MACOS}
  // http://stackoverflow.com/questions/12405447/outputdebugstring-with-delphi-for-macosunit unt_Debug;
  Log.d(Text);
  {$ENDIF}
  {$IFDEF LINUX}
  __write(stderr, AText, Length(AText));
  __write(stderr, EOL, Length(EOL));
  {$ENDIF}
  {$IFDEF MSWINDOWS}
  OutputDebugString(PWideChar(Text));
  {$ENDIF}
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-07T13:30:19.227

在 Firemonkey 中，在事件日志中显示消息的可移植方式是[Log.d](http://docwiki.embarcadero.com/Libraries/en/FMX.Types.Log.d)：

```
 uses FMX.Types;

    ...

    Log.d('debugging'); 
```

我认为它可以从[XE3](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Types.Log.d)开始使用。

# css - 更改引导导航栏颜色 2.1

> ID：12405451
> 
> 赞同：1
> 
> 时间：2012-09-13T11:42:03.250
> 
> 标签：css, twitter-bootstrap

努力寻找这是在哪里完成的，因为看到新的默认颜色现在是白色。我将在哪里更改导航栏的 Twitter Bootstrap 中的颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:56:12.470

是的，新的默认设置是白色，或者更准确地说是浅色。您可以在外部 div 中使用 navbar-inverse 类。

外部 div 现在应该如下所示：

```
<div class="navbar navbar-inverse"> 
```

代替

```
<div class="navbar"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T16:20:54.793

还是略有不同。

现在（v2.3.2）[http://jsfiddle.net/MXYjX/8/](http://jsfiddle.net/MXYjX/8/)

```
.navbar-inverse .navbar-inner {
    background-color: #1B1B1B;
    background-image: linear-gradient(to bottom, #222222, #111111);
} 
```

是（v2.0.4）（使用firefox）[http://jsfiddle.net/MXYjX/7/](http://jsfiddle.net/MXYjX/7/)并且有一个box-shadow

```
.navbar-inner {
    background-color: #2C2C2C;
    background-image: -moz-linear-gradient(center top , #333333, #222222);
 } 
```

# c# - 是否可以在 Web 浏览器控件中使用 Chrome Frame

> ID：12405452
> 
> 赞同：3
> 
> 时间：2012-09-13T11:42:03.223
> 
> 标签：c#, visual-studio-2010, webbrowser-control, google-chrome-frame

伙计们，我们可以在 Visual Studio 中可用的 Web 浏览器控件中启用 Chrome Frame 吗？如果有可能，我们该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T11:47:11.103

是的你可以 。
您应该使用[WebKit .NET](http://webkitdotnet.sourceforge.net/)并将 chrome 添加到您的表单中。

# c# - 在 C# 中将 ISO 日期和时间更改为印度时区

> ID：12405456
> 
> 赞同：0
> 
> 时间：2012-09-13T11:42:23.827
> 
> 标签：c#, asp.net, time, timezone

如何使用 C# 将以下格式的日期转换为印度时区 (UTC+5:30) 的日期？

```
2012-09-13T05:08:03.151Z 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:47:38.140

怎么样

```
DateTime dt = DateTime.ParseExact("2012-09-13T05:08:03.151Z",
                                  "yyyy-MM-dd HH:mm:ssK",
                                  CultureInfo.InvariantCulture) 
```

然后

```
var indianTime = TimeZoneInfo.ConvertTime (dt,
                     TimeZoneInfo.FindSystemTimeZoneById("India Standard Time")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:49:47.487

尝试这个：

```
DateTime dt = DateTime.ParseExact("your current date string","your current date string format",null);
string IndianDT = dt.ToString("dd/MM/yyy"); 
```

现在在您的**IndianDT**字符串中，您将拥有所需的日期格式。

**编辑：**

在我上面的代码中：

将**“您当前的日期字符串 fromat”**替换为**“yyyy-MM-ddThh:mm:ss.fffZ”**

# php - 将 ajax 回调返回的变量作为参数传递给 PHP 方法

> ID：12405458
> 
> 赞同：0
> 
> 时间：2012-09-13T11:42:38.130
> 
> 标签：php, jquery, ajax, phpexcel

我只想`data.company_name`从回调函数传递我的变量：

```
<script>
        function AjaxInsert() {
          var company_name = $("#company_name").val();
          dataToSend = {};
          dataToSend.company_name = company_name;

          $.ajax({
            url: 'insert.php',
            data: dataToSend,
            dataType: "json",
            success : function(data) {
              console.log("my variable: "+data.company_name);
             }
          });//ajax*/
        }
</script> 
```

，下面在同一个脚本中转换成一个PHP（PHPExcel）方法：

```
<?php
$var_needed = 'I need that data.company_name here';
$objWorksheet->setCellValueByColumnAndRow(0,$num_rows+1,$var_needed);
?> 
```

这怎么可能实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:45:42.167

```
<?php
$var_needed = $_REQUEST['company_name'];
$objWorksheet->setCellValueByColumnAndRow(0,$num_rows+1,$var_needed);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:46:00.760

```
$objWorksheet->setCellValueByColumnAndRow(0,$num_rows+1,$_POST['company_name']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:46:40.753

“相同的脚本”已经执行了，所以页面加载后你将无法再与它交互。

你要么想用 JS 库来操作你的电子表格客户端，要么放弃 ajax 并重新加载整个页面[顺便破坏你的用户体验]。

# javascript - 如何使用自定义标头进行 AJAX POST 跨域

> ID：12405459
> 
> 赞同：3
> 
> 时间：2012-09-13T11:42:47.563
> 
> 标签：javascript, jquery, ajax, cross-domain

我一直在四处寻找，我找不到明确的答案。

我需要能够执行 AJAX POST 并发送自定义标头。我可以完全控制客户端脚本和服务器端服务，所以如果我必须对任何一方进行任何调整以使其工作，我就可以进行这些更改。

我目前正在使用 jQuery，但是如果 jQuery 无法做到这一点，我需要使用另一个根本不是问题的库。理想情况下，我宁愿坚持使用单个库（jQuery），但如果它解决了我的问题，我非常乐意使用第二个库。

目前我的代码如下所示：

```
$.ajax({
    type: 'POST',
    url: 'http://localhost:65079/TestHandler',
    crossDomain: true,
    data: myVariableOfData,
    dataType: 'json',
    beforeSend: function(xhr) {
        xhr.setRequestHeader('MessageId', 'abc123');
    },
    success: function(responseData, textStatus, messageId) {
        console.log("success");
    },
    error: function(responseData, textStatus, errorThrown) {
        console.log(textStatus);
        console.log(responseData);
        console.log(errorThrown);
    }
}); 
```

不幸的是，jQuery 甚至没有尝试将请求发送到服务器，但是一旦我删除了标头，它就会发送请求。我真的需要这些标题，所以任何帮助都将不胜感激。

请向我提出任何可能有助于解决此问题的问题，我会尽快做出回应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:55:18.193

我不知道你是否还在寻找一种方法来做到这一点。这是可以做到的。这是一个示例 CORS 处理程序

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace Api.Handlers
{
    /// <summary>
    /// 
    /// </summary>
    public class CorsHandler : DelegatingHandler
    {
        const string Origin = "Origin";
        const string AccessControlRequestMethod = "Access-Control-Request-Method";
        const string AccessControlRequestHeaders = "Access-Control-Request-Headers";
        const string AccessControlAllowOrigin = "Access-Control-Allow-Origin";
        const string AccessControlAllowMethods = "Access-Control-Allow-Methods";
        const string AccessControlAllowHeaders = "Access-Control-Allow-Headers";

        /// <summary>
        /// 
        /// </summary>
        /// <param name="request"></param>
        /// <param name="cancellationToken"></param>
        /// <returns></returns>
        protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            bool isCorsRequest = request.Headers.Contains(Origin);
            bool isPreflightRequest = request.Method == HttpMethod.Options;

            if (isCorsRequest)
            {
                if (isPreflightRequest)
                {
                    HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
                    response.Headers.Add(AccessControlAllowOrigin, request.Headers.GetValues(Origin).First());

                    string accessControlRequestMethod = request.Headers.GetValues(AccessControlRequestMethod).FirstOrDefault();
                    if (accessControlRequestMethod != null)
                    {
                        response.Headers.Add(AccessControlAllowMethods, accessControlRequestMethod);
                    }

                    string requestedHeaders = string.Join(", ", request.Headers.GetValues(AccessControlRequestHeaders));
                    if (!string.IsNullOrEmpty(requestedHeaders))
                    {
                        response.Headers.Add(AccessControlAllowHeaders, requestedHeaders);
                    }

                    TaskCompletionSource<HttpResponseMessage> tcs = new TaskCompletionSource<HttpResponseMessage>();
                    tcs.SetResult(response);
                    return tcs.Task;
                }

                return base.SendAsync(request, cancellationToken).ContinueWith<HttpResponseMessage>(t =>
                {
                    HttpResponseMessage resp = t.Result;
                    resp.Headers.Add(AccessControlAllowOrigin, request.Headers.GetValues(Origin).First());
                    return resp;
                });
            }

            return base.SendAsync(request, cancellationToken);
        }
    }
} 
```

添加后，在 Application_Start 方法内的 Global.asax 文件中注册处理程序

```
GlobalConfiguration.Configuration.MessageHandlers.Add(new CorsHandler()); 
```

现在您可以发送您的请求标头。希望有帮助。这已经通过 Web API、MVC 4 以及来自 Google Chrome 和 Firefox 的站点进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:27:27.947

冒着听起来像 Siri 的风险，听起来像是在寻找如何让[CORS](http://www.w3.org/TR/cors/)工作......

以下是一些希望能有所帮助的资源：

*   [如何使跨域资源共享 (CORS) 发布请求正常工作](https://stackoverflow.com/questions/5750696/how-to-get-a-cross-origin-resource-sharing-cors-post-request-working)
*   [让 CORS 工作](http://remysharp.com/2011/04/21/getting-cors-working/)
*   [跨域资源共享演示](http://saltybeagle.com/2009/09/cross-origin-resource-sharing-demo/)
*   [具有跨域资源共享的跨域 Ajax](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)

# video - ffmpeg：找不到合适的输出格式，libfaac

> ID：12405467
> 
> 赞同：6
> 
> 时间：2012-09-13T11:43:09.637
> 
> 标签：video, ffmpeg, html5-video

[我刚刚从http://ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)下载了“FFmpeg git-070b0e1 32-bit Static (Latest)” 。我在我的 Vista 机器上提取了文件，然后更新了我的 PATH 以指向`presets`和`bin`文件夹。

我运行的第一个命令是这样的：

```
ffmpeg -i C:/a.avi  -vcodec libtheora  -qscale 6  -acodec libvorbis  -ab 128k  -vf scale="480:-1"   C:/a.ogv 
```

我收到了这个错误：

```
Please use -q:a or -q:v, -qscale is ambiguous
[NULL @ 0200F800] Unable to find a suitable output format for 'C:/a.ogv''
C:/a.ogv': Invalid argument 
```

我运行的第二个命令是这样的：

```
ffmpeg -i C:/a.avi  -vcodec libx264  -preset slow  -profile main  -crf 20  -acodec libfaac  -ab 128k  -vf scale="480:-1"   C:/a.mp4 
```

我收到了这个错误：`Unknown encoder 'libfaac'`

**问题：**

1.  我正在尝试转换输入视频（我不知道 MIME 类型是什么）并将其输出为 ogv 和 mp4，以便我可以在网站上播放。当然，我正在以尽可能小的文件大小寻找尽可能高的质量。我从网上可以找到的东西拼凑出我的命令。我在正确的轨道上吗？我能做些什么来改进？

    1.  任何想法如何解决我遇到的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T23:58:02.537

我不使用 Windows，因此我无法为您的文件名问题提供任何建议。

至于您关于使用 x264 的第一个问题，尽管我会消除`-profile main`它很可能不需要，但您的开端良好。还替换`scale="480:-1"`为`scale="trunc(oh*a*2)/2:480"`以防止出现奇怪大小的输出；否则你可能会得到一个错误：`[libx264] height not divisible by 2`. 对该编码器的基本建议是使用`-crf`提供和可接受质量的最高值以及`-preset`您有耐心的最慢值。有关更多示例，请参阅[FFmpeg：终极视频和音频操作工具](http://blog.superuser.com/2012/02/24/ffmpeg-the-ultimate-video-and-audio-manipulation-tool/)和 [FFmpeg 和 x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)。

Zeranoe 构建不包括对 libfaac 的支持。包含它会使 ffmpeg 二进制文件不可再分发。Zeranoe 版本中支持的替代 AAC 编码器`-c:a libvo_aacenc`和原生 FFmpeg AAC 编码器`-c:a aac -strict experimental`。

在 ogv 中为 Theora 使用 libtheora 的替代方法是在 webm 中为 VP8 使用 libvpx。我对这个编码器没有什么经验，所以我不能给你任何建议。

请注意，ffmpeg 使用问题更适合 superuser.com。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:17:03.313

avi 输入的 ogv 输出工作正常...

```
rob@ Videos$ ffmpeg -i ../Downloads/Nikon_Coolpix_S3000.AVI  -f ogg testm.ogv

ffmpeg version git-2012-08-29-85c8303 Copyright (c) 2000-2012 the FFmpeg developers
  built on Aug 29 2012 08:59:14 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration: --enable-gpl --enable-libfaac --enable-libfdk-aac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-nonfree --enable-version3
  libavutil      51\. 70.100 / 51\. 70.100
  libavcodec     54\. 54.100 / 54\. 54.100
  libavformat    54\. 25.104 / 54\. 25.104
  libavdevice    54\.  2.100 / 54\.  2.100
  libavfilter     3\. 14.100 /  3\. 14.100
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
[avi @ 0x2457260] sample size (1) != block align (2)
[avi @ 0x2457260] non-interleaved AVI
Guessed Channel Layout for  Input Stream #0.1 : mono
Input #0, avi, from '../Downloads/Nikon_Coolpix_S3000.AVI':
  Metadata:
    encoder         : 
    maker           : NIKON
    model           : COOLPIX S3000
    creation_time   : 2010-11-29 21:32:23
  Duration: 00:00:02.49, start: 0.000000, bitrate: 3168 kb/s
    Stream #0:0: Video: mjpeg (MJPG / 0x47504A4D), yuvj422p, 320x240, 30 tbr, 30 tbn, 30 tbc
    Stream #0:1: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 22050 Hz, mono, s16, 352 kb/s
Output #0, ogg, to 'testm.ogv':
  Metadata:
    model           : COOLPIX S3000
    maker           : NIKON
    encoder         : Lavf54.25.104
    Stream #0:0: Video: theora, yuv422p, 320x240, q=2-31, 200 kb/s, 30 tbn, 30 tbc
    Stream #0:1: Audio: flac, 22050 Hz, mono, s16, 128 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (mjpeg -> libtheora)
  Stream #0:1 -> #0:1 (pcm_s16le -> flac)
Press [q] to stop, [?] for help
frame=   75 fps=0.0 q=0.0 Lsize=     134kB time=00:00:02.50 bitrate= 438.3kbits/s    
video:68kB audio:61kB subtitle:0 global headers:3kB muxing overhead 0.925484% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T08:30:23.643

在你第一次使用这个错误是要求你`-qscale 6`用这个替换`-q:v 6`

对于您的第二个，请注意`libfaac`不再支持。而是使用`libvo_aacenc`

您的代码应如下所示：

```
ffmpeg -i C:/a.avi  -vcodec libx264  -preset slow  -profile main  -crf 20 -c:a libvo_aacenc -b:a 128k  -vf scale="480:-1"   C:/a.mp4 
```

# xcode - Activity Monitor 和 Instruments 之间的内存性能差异

> ID：12405468
> 
> 赞同：2
> 
> 时间：2012-09-13T11:43:10.837
> 
> 标签：xcode, memory, instruments, video-card

我的 xcode 项目使用 OpenGL 3.2 进行绘制。运行分析器时，分配工具显示出健康的行为（分配和解除分配），但在观察活动监视器时，内存使用量在 3 分钟内迅速上升到 ~ 2GB。我在其他 Mac 上运行相同的程序，活动监视器仅显示 40MB 内存使用量。我在相同的操作系统版本 10.8 和相同的 Xcode 版本 4.4 上运行相同的项目。

# objective-c - 如何在我的 iPhone 应用程序中集成 Microsoft 的 Active Directory 以在登录时对用户进行身份验证

> ID：12405470
> 
> 赞同：1
> 
> 时间：2012-09-13T11:43:25.083
> 
> 标签：objective-c, ios, authentication, active-directory

我已经搜索了很多集成 AD 以在登录时对用户进行身份验证，我已经阅读了这些页面：

1.  [http://www.macworld.com/article/1056791/activedirectory](http://www.macworld.com/article/1056791/activedirectory)，它给了我基本信息，但不是确切的解决方案。

2.  后来，当 R 和 D 我来到 Stack Overflow[如何使用 iOS 应用程序对 Active Directory 进行身份验证](https://stackoverflow.com/questions/7651875/how-to-authenticate-to-active-directory-using-ios-app)的帖子时，它向我展示了基于 PHP 服务器页面的解决方案，但我想从我的应用程序本身验证该用户。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:34:39.447

// 大家好，我用 .NET SOAP 服务解决了这个问题，我的同事编写了需要从 Active Directory 进行身份验证的两个参数 USERNAME 和 PASSWORD 的 Web 服务，一旦我们调用该 Web 服务以及参数 USERNAME和 PASSWORD 如果用户在活动目录中注册，则返回 TRUE 或返回 FALSE。Active Directory 用户的身份验证从 .NET 比从 Objective-C 的身份验证非常容易。

# javascript - 为什么在许多浏览器中 drawImage() 的性能比 createPattern() 略好/明显好？

> ID：12405471
> 
> 赞同：4
> 
> 时间：2012-09-13T11:43:26.783
> 
> 标签：javascript, performance, html, canvas

在查找如何在 a 上绘制重复的图像背景`<canvas>`时（是的，我是新手`<canvas>`），我看到有两种方法可以做到：

1.  `drawImage()`在`for`循环中使用手动重复图像`<canvas>`
2.  使用 创建一个图案`context.createPattern()`，将`<canvas>`'s`fillStyle`设置为该图案，然后使用`fillRect`绘制一个包含整个图案的矩形`<canvas>`。

显然，我做的第一件事是创建一个 JSPerf 测试，看看哪个更快（“Premature Optimisation™ - It Works”）：

*   [http://jsperf.com/createpattern-vs-drawimage](http://jsperf.com/createpattern-vs-drawimage)

似乎这种`drawImage()`方式往往胜过这种`createPattern()`方式，尽管随着更新的浏览器的不同，这种差异减少了，并且似乎在最新的情况下消失了。

不过，我希望这`createPattern()`条路会更快。我假设`createPattern()`基本上会做与手动方法相同的事情`drawImage()`，但是内置，会做得更快。

任何想法为什么该`createPattern()`方法较慢？`createPattern()`除了在其应用的形状上重复绘制图案图像之外，还会做其他事情吗？我在编写测试时是否犯了一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:17:11.387

经过一些测试，我得到了相反的结果。

你进行性能测试的方式有点奇怪。我对其进行了规范化并将 javascript 代码从 setup 移动到 prep （应该在哪里）

[http://jsperf.com/createpattern-vs-drawimage/2](http://jsperf.com/createpattern-vs-drawimage/2)

填充图案似乎比 chrome、IE、Firefox（稍微）、移动 chrome（galaxy nexus）、iPad safari 中的 loopy drawImage 更快。

此外，简单地制作图案（使用带有图案的 fillRect 或其他方式）并将其缓存到屏幕外的画布上并从中绘制应该差不多快。这两种方法都应该比使用循环多次调用 drawImage 更快。我将这第三种方式添加为测试中的第三个片段。

更重要的是，模式或缓存模式的好处应该随着图像重复次数的增加而显着增加。例如，请参见此处：

[http://jsperf.com/createpattern-vs-drawimage/3](http://jsperf.com/createpattern-vs-drawimage/3)

绘制图像数百次导致 createPattern 比 drawimage 循环效率高 100-200 倍

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:50:56.787

试图在 Javascript 中解决闭包和嵌套 for 循环时，我感到非常沮丧——我对 VB 更有经验，并且开始使用 JS 来制作有趣的小游戏。

总而言之，长话短说，我不确定效率规模，但这对我有用：

```
function body_onload(){
var canvas = document.getElementById('canvas-id');
var context = canvas.getContext('2d');
var width = canvas.width;
var height = canvas.height;
var image = new Image();    
function drawBackground(){
    context.fillStyle=context.createPattern(image, "repeat");;
    context.fillRect(0,0,width,height);
    }
image.src="grass.jpg";
image.onload = drawBackground; 
```

}

第一次为我工作。甚至尝试引用实际`<img>`而不是仅使用 JS 创建新图像，我在此处发布的方法似乎更易于使用，尤其是如果我想更改图像，我可以轻松做到。

相信这会更有效率。如果有人知道怎么做，我很想听！

# artificial-intelligence - 具有 Sigmoid 激活的神经网络是否使用阈值？

> ID：12405473
> 
> 赞同：4
> 
> 时间：2012-09-13T11:43:28.487
> 
> 标签：artificial-intelligence, neural-network, threshold

我在这里有点困惑。我刚开始研究神经网络的主题，我构建的第一个使用了 Step-Activation，每个神经元都有阈值。现在我不想实现 sigmoid 激活，但似乎这种类型的激活不使用阈值，只使用神经元之间的权重。但是在我找到的关于这方面的信息中有阈值的词，只是我找不到它们应该在激活函数中的位置。

*阈值是否用于神经网络中的 sigmoid 激活函数？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T12:18:02.773

没有像步激活那样的离散跳跃。阈值可以被认为是 sigmoid 函数为 0.5 的点。一些 sigmoid 函数会将其设置为 0，而有些会将其设置为不同的“阈值”。

阶跃函数可以被认为是 sigmoid 函数的一个版本，其陡度设置为无穷大。在这种情况下有一个明显的阈值，对于不太陡峭的 sigmoid 函数，阈值可以被认为是函数值为 0.5 的地方，或最大陡度的点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T11:56:19.757

Sigmoid function's value is in the range `[0;1]`, `0.5` is taken as a threshold, if `h(theta) < 0.5` we assume that it's value is `0`, if `h(theta) >= 0.5` then it's `1`.

Thresholds are used only on the output layer of the network and it's only when classifying. So, if you're trying to classify between 4 classes, then the output layer has 4 nodes `y = [y1,y2,y3,y4]`, you'll use this threshold to assign `y[i]` `1` or `0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:17:38.217

它不需要。Sigmoid 曲线本身部分可以作为阈值。

# java - 不可变对象构建器

> ID：12405474
> 
> 赞同：4
> 
> 时间：2012-09-13T11:43:29.680
> 
> 标签：java, builder

将构建器实例存储在它构建的实例中是否被认为是一种好习惯？问题是，当我需要创建一个与我已经拥有的对象非常相似的对象时，我经常发现自己处于一种情况。推测这个对象有很多 8-10 个字段。通常，对于可变对象，我只会使用 setter。

例如，让我们以经典的布洛赫`NutricionFacts`为例：

```
public class NutritionFacts {
    private final int servingSize;
    private final int servings;
    private final int calories;
    private final int fat;
    private final int sodium;
    private final int carbohydrate;

    private final Builder builder;

    public static class Builder {
        // Required parameters
        private final int servingSize;
        private final int servings;
        // Optional parameters - initialized to default values
        private int calories = 0;
        private int fat = 0;
        private int carbohydrate = 0;
        private int sodium = 0;

        public Builder(int servingSize, int servings) {
            this.servingSize = servingSize;
            this.servings = servings;
        }
        public Builder calories(int val)
        { calories = val; return this; }
        public Builder fat(int val)
        { fat = val; return this; }
        public Builder carbohydrate(int val)
        { carbohydrate = val; return this; }
        public Builder sodium(int val)
        { sodium = val; return this; }

        public NutritionFacts build() {
            return new NutritionFacts(this);
        }
    }

    private NutritionFacts(Builder builder) {
        servingSize = builder.servingSize;
        servings = builder.servings;
        calories = builder.calories;
        fat = builder.fat;
        sodium = builder.sodium;
        carbohydrate = builder.carbohydrate;
        this.builder = builder;
    }
} 
```

我已经对其进行了一些修改，以便将来我想制作类似的副本时可以访问构建器实例？

你怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:55:36.897

如果您重用`Builder`来构建第二个实例会发生什么？然后`Builder`在第一个实例中将产生类似于第二个实例的实例。可能不是你所期望的。

我建议`Builder`使用模板实例创建一个选项。

```
 public Builder(NutritionFacts template) {
        this.servingSize = template.getServingSize();
        ...
    } 
```

# javascript - 特定按钮点击

> ID：12405475
> 
> 赞同：1
> 
> 时间：2012-09-13T11:43:30.230
> 
> 标签：javascript, jquery

我有一个快速的问题：

我希望 div 中的每个链接都提醒一条消息，但只有锚点。我不希望 div 启动警报功能。

html:

```
<div id="abc">
  <a href='#'> Button 1 </a>
  <a href='#'> Button 2</a>
</div> 
```

Javascript：

```
$(document).ready(function(){
            $('#abc').click(function(){
                alert('a');
            });
        }); 
```

如何修改上面的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:45:25.993

然后，您可以将事件处理程序绑定到 div 内的 a 标签上。

```
$('#abc a').click(function() {
  alert('a');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:46:03.910

交换应该`$('#shortlisting')`适合`$('#shortlisting a')`你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:46:13.667

```
$('#abc a').on("click", function() {
  alert('a');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:46:28.287

尝试：

```
$('#abc a').click(function() {
    alert( $(this).text() );
}); 
```

这是一个[例子](http://jsfiddle.net/buDXb/)

# mysql - DBUNIT MySQL 使用方括号

> ID：12405480
> 
> 赞同：1
> 
> 时间：2012-09-13T11:43:42.263
> 
> 标签：mysql, dbunit

我正在使用 dbunit 进行测试，dbunit 因查询语法错误而失败。查看查询，有方括号保护列名，我知道方括号在 MYSQL 中是不可接受的。如何摆脱方括号？

```
testException = com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: 

You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax to use near 

'[sades] set [CORRELATION_ID] = 'ZYX', [LMT_COUNT] = 132.58000000, [SPO' at line 1]], class dirties context [false], class mode [null], method dirties context [false]. 
```

# uiviewcontroller - 如何更改 UITabBar 的样式？

> ID：12405484
> 
> 赞同：1
> 
> 时间：2012-09-13T11:43:49.700
> 
> 标签：uiviewcontroller, uibutton, uitabbarcontroller, uitabbar, uitabbaritem

我想以这样的方式制作 UITabBar 它将有 5 个项目，而中间的项目将从标签栏出来。我怎样才能完成这些工作？

我不能分享我的代码。我可以描述我在代码中所做的事情。

在我的 Delegate.m 文件中，我创建了一个 UITabBarController 并创建了 5 个 UIViewController。对于每个 tabItem，我保留了一个 View Controller，并将它们保存在一个数组中，并将它们添加到我的 tabbar.viewControllers 中。

# c# - 完整的 Youtube 视频控制 C#

> ID：12405485
> 
> 赞同：3
> 
> 时间：2012-09-13T11:43:56.757
> 
> 标签：c#, stream, youtube

对于我正在进行的项目，我需要从 Youtube 流式传输一些视频。我可以使用 Shockwave Flash 对象，但是我没有启动/停止/重新启动/更改模式的选项。

我至少需要能够通过代码启动 vid、停止 vid 和更改音量（也许我可以通过代码来解决这个问题）。

任何想法/例子将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:47:49.793

您可以在这里查看它的工作原理： [YouTube™ 嵌入式视频播放器：扩展 API (C#)](http://www.codeproject.com/Articles/42349/YouTube-Embedded-Video-Player-Extended-API-C)

下列功能可用：

*   设置启动选项
*   从播放列表中选择项目
*   设置自动播放模式
*   设置播放器尺寸 (W/H)
*   更改边框选项
*   在预定义的时间开始播放视频

# heroku - Heroku costum 域仅适用于 mac 端

> ID：12405486
> 
> 赞同：1
> 
> 时间：2012-09-13T11:43:59.383
> 
> 标签：heroku, dns

我为我的 Heroku 应用程序设置了一个自定义域，通过

1.  在我的域上设置 cname：appname.herokuapp.com
2.  添加了我的 www.domain.com，作者：heroku 域：添加 www.domain.com

它在 Safari 和 Firefox 中运行良好，但不知何故它在 Windows 端运行良好。它转而转发到 Heroku 地址。

可能是什么问题？谢谢

# java - Java 终端模拟器

> ID：12405489
> 
> 赞同：12
> 
> 时间：2012-09-13T11:44:01.347
> 
> 标签：java, terminal-emulator, vt100

有谁知道模拟 vt100 终端的库或类（图形与否无关紧要）。我想要的基本上是一个实现 vt100 终端逻辑的类（比如当接收到“删除”代码时将调用删除函数，或者如果基于 GUI 将删除一个字符）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:10:39.157

Telnetd 似乎是一个完整且有据可查的解决方案：

[http://telnetd.sourceforge.net/](http://telnetd.sourceforge.net/)

你也可以试试：

[http://www.jcraft.com/jcterm/](http://www.jcraft.com/jcterm/)

它的行为类似于 VT100 并使用 SSH2 连接。但该网站表明 VT100 仿真不完整。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-21T09:21:18.423

看看 JediTerm 项目：[https ://github.com/JetBrains/jediterm](https://github.com/JetBrains/jediterm)

它既有图形实现，也有要覆盖的 API。图形版本适用于远程 SSH 连接（使用 JSch）和本地 pty（使用[Pty4J](https://github.com/JetBrains/pty4j)）。

JetBrains 产品中用于嵌入式终端的成熟项目。

# java - 空的 Netbeans 7 调色板？如何恢复它？

> ID：12405491
> 
> 赞同：3
> 
> 时间：2012-09-13T11:44:02.453
> 
> 标签：java, user-interface, netbeans, netbeans-7, palette

我在 Kubuntu 12.04 上使用 Netbeans 7。我像这样启动Netbeans：

```
netbeans --cp:a /usr/share/java/xercesImpl.jar & 
```

Netbeans 和 Kubuntu 12.04 已知问题的原因。在我的项目中间，带有 Swing 组件的调色板刚刚消失了！

我只看到这样的东西：

![在此处输入图像描述](../Images/cff628a2acde6bf197e2a2630a6f5f8c.png)

如何恢复默认的 Netbeans 调色板？

**我检查了 Ctrl+Shift+8 快捷方式，但没有结果 - 问题仍然相同。**

**编辑：我不知道我做了什么，但现在我只看到空调色板:( : **

![在此处输入图像描述](../Images/0700e7462af6828ceb69ad42238323ea.png)

我也试过这个：

1) 我 cd'ed to `/home/mazix/.netbeans/7.0/config/Windows2Local/Groups/commonpalette` ， ls'ed 并且只看到了这个：CommonPalette.wstcgrp

2) cd 到`/home/mazix/.netbeans/7.0/config/Windows2Local/Components`并看到了这个：

> AnalyzerTopComponent.settings output.settings AnalyzeStackTopComponent.settings projectTabLogical_tc.settings breakpointsView.settings projectTab_tc.settings CallHierarchyTopComponent.settings properties_1.settings callstackView.settings properties.settings CommonPalette.settings refactoring-preview.settings ComponentInspector.settings
> ReporterResultTopComponent.settings CssPreviewTC.settings
> resultsView.settings debugging.settings
> search-results.settings DeclarationTopComponent.settings
> services.settings evaluator.settings
> sessionsView.settings favorites.settings
> sources.settings find-usages.settings
> StyleBuilderTC.settings gsf-testrunner-results.settings
> svnversioning.settings hgversioning.settings
> synchronize.settings JavadocTopComponent.settings
> TaskListTopComponent.settings localsView.settings
> TerminalContainerTopComponent.settings MultiView-java#007Cform#007C_1.settings threadsView.settings MultiView-java#007Cform#007C_2 .settings versioning_output.settings MultiView-java#007Cform#007C_4.settings watchView.settings MultiView-java#007Cform#007C.settings Welcome.settings navigatorTC.settings

并没有看到任何 _hidden 文件:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-20T17:12:52.313

打开 NetBeans 并选择 Window -> Palette 它会出现但它是空的，因为您还没有选择 GUI 类。

要使用标签等 GUI 组件填充调色板，请执行以下步骤：

1.  创建一个新项目。

2.  右键单击包名称或项目名称，然后选择新建 -> 其他...

3.  在 New File 对话框中，从类别中选择“Swing GUI Forms”和“JFrame”Form 文件类型子窗口。点击下一步。

4.  输入名称让我们为您现在创建的新类说“MyGUI”。

5.  调色板窗口现在充满了标签、文本、复选框等组件...

如果尚未出现，请确保按 GUI 类栏“MyGUI”类上方的“设计”按钮

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-29T06:07:08.957

我遇到了同样的问题，这对我有用窗口-> 重置窗口。希望它对你有用:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T03:49:30.900

做一件事，只需右键单击您的 netbeans 项目，然后打开它。它解决了这个问题。你会观察到如果你打开一个新项目，调色板就在那里，所以只需复制一个不同名称的项目，它就会解决你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:59:58.043

我认为同样的问题发生在这里。检查这个[解决方案](http://forums.netbeans.org/topic41046.html)。它可能对你有帮助。

此步骤用于恢复默认调色板？

1.  退出 IDE。
2.  转到您的用户目录，然后转到 config/Palette 子目录。在此目录中，从默认调色板内容中删除的文件或目录显示为名称中带有 _hidden 后缀的空文件。
3.  删除这些 _hidden 文件，让调色板类别和项目再次出现在 IDE 中。

我想这会对你有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-21T19:35:02.063

在我的例子中，在没有默认构造函数的情况下创建了一个新项目后，调色板中的搜索框包含一个字符，即“=”。这也会导致一个空的调色板。

在这种情况下，解决方案很明显：只需删除搜索输入的内容。不过，它让我困惑了一会儿，没有注意到搜索输入字段的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-30T07:18:50.453

我的netbeans也有同样的情况。我所做的唯一解决方案是备份我的项目文件夹（将其保存到其他驱动器）。然后重新安装netbeans。之后我将项目文件夹重新粘贴到目录中并重新打开它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-17T07:18:30.207

在调色板框上单击鼠标右键。选择命令“重置调色板”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-07T17:50:23.740

我遇到了同样的问题。只需检查调色板的底部，看看是否有一个搜索框打开。如果有，请关闭它。然后调色板将再次可用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-09T19:23:27.470

所以，这里没有任何建议对我有用，我要离开我的解决方案。您创建项目，命名它。创建一个包。用鼠标右键单击包 选择 New filme 选择 Other 选择 AWT GUI Forms 选择 Frame form 现在您应该在屏幕右侧看到菜单，其中包含创建按钮、标签等的选项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-29T08:07:48.443

对于 mac 用户，截至 2021 年；

1.  打开您的 NetBeans 应用程序，然后单击位于应用程序顶部菜单的“windows”。将出现一个下拉菜单。
2.  向下滚动并单击“IDE 工具”。您将看到另一个包含项目列表的下拉列表，包括调色板。
3.  点击“调色板”。这将使调色板可见。

就这样！

# tsql - 嵌套公用表表达式的语法

> ID：12405498
> 
> 赞同：0
> 
> 时间：2012-09-13T11:44:27.630
> 
> 标签：tsql, ssms, common-table-expression

昨天我问了一个复杂查询的问题，我得到了一个例子。我真的很想让它工作，但其中有一个我无法弄清楚的语法错误。请记住，本周早些时候我刚刚被介绍给 CTE，所以希望这很容易。

我认为我不需要在这里发布完整的代码，所以我只是总结一下

```
 with cte as (select dateadd(hour, 1, cast(cast(getdate() -1 as date) as datetime)) as midnnight),
 allhours as (
 select 0 as hour, midnight as timestart, dateadd(hour, 1, timestart) as timeend from cte union all
 select 1 as hour, dateadd(hour, 1, midnight), dateadd(hour, 2, midnight) from cte union all
 ....
 select 23 as hour, dateadd(hour, 23, midnight), dateadd(hour, 24, midnight) from cte union all
) 
select ah.hour,... 
```

(...) 表示我省略的不必要的代码，以减少混乱

但是我在 select 23 和 select ah.hour "Incorrect syntax near ')' 之间的括号上出现语法错误。期待 SELECT 或 '('。

任何帮助是极大的赞赏。

-J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:11:16.277

您有一些语法错误，包括`UNION ALL`底部不需要的 a ，并且您的第一个`SELECT`是`allhours`引用别名，所以试试这个：

```
;with cte as 
(
  select dateadd(hour, 1, cast(cast(getdate() -1 as date) as datetime)) as midnight
),
allhours as 
(
  select 0 as hour, midnight as timestart, dateadd(hour, 1, midnight) as timeend 
  from cte 
  union all
  select 1 as hour, dateadd(hour, 1, midnight), dateadd(hour, 2, midnight) 
  from cte 
  union all
  select 23 as hour, dateadd(hour, 23, midnight), dateadd(hour, 24, midnight) 
  from cte
) 
select *
from allhours 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/724f5/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:11:35.597

`Union all`你应该在这里摆脱最后一个

```
 hour, dateadd(hour, 23, midnight), dateadd(hour, 24, midnight) from cte union all 
)  
select ah.hour,... 
```

另外，在第一行拼写午夜

# android - 如何使用服务来检测android中的网络状态

> ID：12405504
> 
> 赞同：0
> 
> 时间：2012-09-13T11:44:55.970
> 
> 标签：android

我正在使用`BroadCastReceiver`监视活动的网络状态。但这行不通。谁能帮帮我。

```
import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.widget.Toast;

public class GTChat extends ListActivity {

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

    }

    // /////////////////////////////////////////////////////////////////

    private BroadcastReceiver mConnReceiver = new BroadcastReceiver()

    {

        @Override
        public void onReceive(Context context, Intent intent)

        {

            NetworkInfo info = (NetworkInfo) intent
                    .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);

            if (info.getState().equals(NetworkInfo.State.CONNECTED))

            {

                GTalkChatDetails.chat(getApplicationContext());
                GTalkChatDetails.adddMsgListener(getApplicationContext());

            }

            else

            {

                Toast.makeText(getApplicationContext(),
                        "Network not connected", Toast.LENGTH_LONG).show();

            }

        }

    };

    // //////////////////////////////////////////////////

    protected void onPause()

    {

        unregisterReceiver(mNetworkReceiver);

        super.onPause();

    }

    protected void onResume()

    {

        registerReceiver(mNetworkReceiver, new IntentFilter(
                ConnectivityManager.CONNECTIVITY_ACTION));

        super.onResume();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:51:08.840

尝试使用此代码段：

```
private boolean isNetworkAvailable() {
ConnectivityManager connectivityManager 
      = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
return activeNetworkInfo != null;
} 
```

由于您没有在清单中注册广播接收器，因此应该这样做。或者把它改成这样

```
 private final BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
  @Override
 public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();

    boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);

   // your check here

}} 
```

# sql - 对 MS Access 数据库中的表中的数据进行排序

> ID：12405506
> 
> 赞同：0
> 
> 时间：2012-09-13T11:45:05.340
> 
> 标签：sql, sorting, ms-access-2007

为了简化问题：我有一个包含一列的数据库表。在此列中可以存储用户的任何文本（因此我们有动态数据）。现在假设我存储示例数据：

`[a1, a2, a3, a20, a21]`.

当我现在从表中选择数据时，我希望它像这样排序：

```
a1, a2, a3, a20, a21 
```

而不是这样：

```
a1, a2, a20, a21, a3 
```

有没有办法不用写复杂的算法（因为我用的是Access2007，想把表或任何查询绑定到表单中的一个元素），但只用sql。

请注意：如果用户只插入数字，列类型可以简单地更改为数字。然后它将以正确的方式排序。但我还必须处理字母和特殊字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:22:30.593

您所要求的有几个步骤，每个步骤都有其自身的困难，这意味着您想使用 SQL 来完成。您在问题上的短语`without writing a complex algorithm`和评论`Everything is possible`不兼容。`Everything is possible`为您尝试做的事情增加了很多复杂性，主要是因为 sql 没有做您在这里尝试做的事情。

*   首先验证字符串的格式：是的，可以，但是 SQL 是一种查询语言，如果可能，最好对外部的任何格式进行处理
*   然后将其拆分，考虑到可能出现的所有不同可能性：同样，SQL 不是为此而设计的，您可以这样做，但是您的数据有很多不同的情况
*   最后对值进行排序：再次排序并返回单个字符串。排序是在一个集合上完成的，而不是在一个值链中，但当然可以完成

@Remou 在评论中所说的是，您应该将这些值放在不同的行上，而不是列上的所有值。例如：

```
id    value
1      a1
2      a41
3      s2
4      a52
5      a1b99ccc 
```

从这里你可以开始做一些订购。您可以做的第一步是将字符串拆分为几行，保存在临时表上，然后从这里您可以使用一些东西。您可以使用以下代码段在行上拆分字符串：

```
DECLARE @str NVARCHAR(100)= 'T,23,3434,332SB,1-1KD', @separator VARCHAR(1)= ','
DECLARE @SplitedList  TABLE (code NVARCHAR(30))

DECLARE @XMLList XML
SET @XMLList=CAST('<i>'+REPLACE(@str, @separator,'</i><i>')+'</i>' AS XML)

INSERT INTO @SplitedList
SELECT x.i.value('(./text())[1]','varchar(100)')
FROM @XMLList.nodes('i') x(i)

SELECT * FROM @SplitedList 
```

# python - 为 Django 配置 mod_wsgi？

> ID：12405508
> 
> 赞同：2
> 
> 时间：2012-09-13T11:45:08.930
> 
> 标签：python, django, mod-wsgi

我已经将 mod_wsgi 与 Apache 2 一起配置，并使用我的 Debain Squeeze 6 进行了测试。我需要将我的代码作为扩展名 .wsgi 放在 /var/www 目录下。现在，我想用 mod_wsgi 配置 Django。我该怎么做？我是否将每个文件都放在 /var/www 下？是安全问题还是什么？有人可以告诉我一步一步地使用 mod_wsgi 配置 django 以及将 DJango 代码放在哪里更好？谢谢！PS 我有中级 Django 知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:54:09.100

以下是您可以使用的几个链接。第一个对我来说是最有用的，因为它非常详细！

*   [http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

*   [https://code.djangoproject.com/wiki/django_apache_and_mod_wsgi](https://code.djangoproject.com/wiki/django_apache_and_mod_wsgi)

希望能帮助到你！

编辑：

关于安全性，只要您为 /var/www/html/your_django_project 中的所有文件提供对 apache 用户（或 www-data，取决于您的 linux 发行版）（chown 和 chgrp）的访问权限，您就不应该有任何问题。不要以超级用户身份运行任何东西。

请注意允许 apache 用户写入您的日志文件，无论它们在哪里。你可能会得到不相关的错误，这可能是由它引起的。

此外，如果您不想最终获得无媒体页面，请设置 apache 以提供 django 媒体文件:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T11:50:56.917

[文档站点](https://docs.djangoproject.com/en/1.1/howto/deployment/modwsgi/)上有一个非常好的说明集。

# nhibernate - 将 Identity 列生成器转换为 hilo：“next_hi”应该初始化为什么？

> ID：12405509
> 
> 赞同：1
> 
> 时间：2012-09-13T11:45:11.250
> 
> 标签：nhibernate, data-conversion, hilo

我正在将使用身份生成器的类转换为使用 hilo 的类。我还使用一个表，每个实体都有不同的行：

```
EntityId (table)
 - EntityName
 - NextHigh 
```

旧表：

```
Patients (table)
 - Id (identity) 
```

新表：

```
PatientRecord (table)
 - Id 
```

为了保持数据完整性，我只使用现有的 PatientRecord.Id 作为新的 PatientRecord.Id：

```
insert into PatientRecord (Id) 
select Id from Patients 
```

并创建一个`EntityId`条目：

```
insert into EntityId values ('PatientRecord', ??) 
```

下`??`一个 hi 值在哪里。我应该在这里使用什么值？默认情况下，初始化列将是 1。我只是使用它，还是应该使用类似的东西`select MAX(Id) from PatientRecord`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:00:47.437

next_hi 就像一个会话密钥，用于生成身份（id）的乘法，因此您可以插入任何您想要的内容，例如 1 或 2 或 10 每个用户递增 next_hi 并随之生成所有身份，直到某个最大值然后再次通过增加它来请求另一个 next_hi...使用这种策略，所有身份都是唯一的...并且它们可以在本地生成

[是否有从身份列迁移到 hilo 键的实用方法？](https://stackoverflow.com/questions/1390078/is-there-a-practical-way-of-migrating-from-identity-columns-to-hilo-keys)

[http://fabiomaulo.blogspot.com/2009/02/nh210-generators-behavior-explained.html](http://fabiomaulo.blogspot.com/2009/02/nh210-generators-behavior-explained.html)

# jquery - JQuery - droppable 函数仅适用于包含选择器的最后一个元素

> ID：12405513
> 
> 赞同：0
> 
> 时间：2012-09-13T11:45:22.843
> 
> 标签：jquery, jquery-ui, jsf-1.2

我在使用属性 contains 选择器与 droppable fundtion 时遇到问题。我正在搜索 id 包含字符串“dropAble”的 div 元素

```
$('div[id*="dragAble"]').draggable();
$('div[id*="dropAble"]').droppable( 
    {
        drop: handleDropEvent
    } 
); 
```

我希望每个元素都对 drop 事件做出反应。我必须这样做，因为我使用的是 JSF，并且因为它替换了我的 div 的初始 id，所以我必须搜索这个子字符串。

drop 事件声明如下：

```
function handleDropEvent( event, ui ) {
    var draggable = ui.draggable;
    alert( 'The square with ID "' + draggable.attr('id') + '" was dropped onto me!' );
    alert( this );
} 
```

首先，并非所有这些元素都会对 drop 事件做出反应，只有前两个。此外，“this”始终是最后一个元素，因此它似乎覆盖了其他定义。

我的 dropelement 的 html 部分如下所示：

```
<t:dataList value="#{bean.list}" var="elem">
<t:htmlTag value="li" styleClass="folder">
<t:div id="dropAble">
    ...
<:/div>
<t:htmlTag> 
```

拖动元素的 html 部分如下所示：

```
<t:dataTable ...>
<t:column ...>
<h:outputText value="#{dok.text}&nbsp;" escape="false"  />
<t:div forceId="true" id="dragAble">
    Drag
</t:div>
</t:column>
</t:dataTable> 
```

我期望能够确定移动了哪个拖动对象（工作正常）并确定拖放项的位置（这似乎总是最后一个元素）。由于 init 函数中的 draggable() 调用有效，我不明白为什么它不使用 droppable 函数。

还有另一种方法可以做到这一点吗？我究竟做错了什么？

谢谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:03:11.833

看这里： http: [//jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)和这里[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/) 你在处理程序中做的一切都是正确的`drop`。来自处理程序的 jQuery UI 文档`drop`：

> 当接受的可拖动对象被“超过”（在其容差范围内）放置时，将触发此事件。在回调中，`$(this)` 表示可拖放的可拖放对象。`ui.draggable` 代表可拖动的。

# objective-c - 何时将平移手势的结果保存到 NSUserDefaults

> ID：12405523
> 
> 赞同：1
> 
> 时间：2012-09-13T11:45:55.753
> 
> 标签：objective-c, ios, uigesturerecognizer, nsuserdefaults

我的 iOS 应用程序可以识别平移手势，我想将平移（在屏幕上移动对象）的结果保存到 NSUserDefaults。

我的手势识别器方法适用于 StateChanged 和 StateEnded 消息，在这里我将对象的新位置（由平移移动）写入 NSUserDefaults。

但是，我知道写入 NSUserDefaults 可能非常昂贵，而且我真的只对在用户完成平移时保存新位置感兴趣，所以我应该只在收到 StateEnded 消息时保存（同步）NSUserDefaults 从手势识别器？

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-11T09:59:04.767

是的 - 保存 NSUserDefaults 并不是那么昂贵，而且您不想在该手势完成之前保存平移手势的状态，因此在收到 stateEnded 消息时保存是有意义的。

# html - div 后的 div 位置在 css 中是固定的

> ID：12405528
> 
> 赞同：12
> 
> 时间：2012-09-13T11:46:05.737
> 
> 标签：html, css

我制作了一个 div 并给了它位置：使用此样式表修复：

**CSS**

```
position: fixed;
top: 35px;
z-index: 9999;
height:60px;
background:#000;
width:100%; 
```

现在我想要的是：如果这个 div 的高度为零，那么紧随其后的 div 应该代替上面的 div。如果 div 的高度不为零，则该 div 之后的下一个 div 应该与上面的 div 有一个边距，这样两个 div 就不会相互重叠。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T11:53:55.283

当你有一个固定的（或绝对的）元素时，它后面就没有元素了。固定元素从文档流中取出。

如果你想让两个元素在一个固定的位置一个接一个，做一个固定的容器，把两个元素放在里面。

您可以在它们周围放置另一个带有上边距的容器，并在第二个元素上设置上边距。如果第一个元素为空，则没有任何内容可设置边距，因此边距将在容器外折叠，第二个元素将位于容器顶部。

（需要第二个容器，因为边距不会在固定元素之外折叠。）

演示：http: [//jsfiddle.net/Guffa/r5crS/](http://jsfiddle.net/Guffa/r5crS/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-23T20:43:37.407

其他海报是正确的，`position: fixed`因为布局元素的设置破坏了文档流程；有时是有意的（例如用于固定位置导航）。

这是我用来规避导航高度可能改变的液体布局中的问题的 jQuery 片段：

```
var menuHeight = $("header").height();
$("main").css("padding-top", menuHeight);
$( window ).resize(function() {
    var menuHeight = $("header").height();
    $("main").css("padding-top", menuHeight);
}); 
```

Main 是我网站上的主要内容，因为页面的宽度会更改主要内容顶部的填充更改为标题元素的高度，这模仿了它在文档流中的状态。

注意：代码在加载（针对不同的设备大小）和窗口调整大小（针对用户窗口大小调整）时运行一次。这很容易变得更整洁，但对我来说效果很好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T11:54:02.210

如果你可以使用 jQuery ：

```
$(document).ready(function() {
  var height = $("#one").height();
  if(height > 0)
  {
      $("#two").css("margin-top","10px");
  }
}); 
```

[**演示**](http://jsfiddle.net/YT7Bd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-30T23:03:36.230

受到其他答案的严重影响，这里有一个稍微简单的版本，不需要第二个元素来添加内容。只需设置整个文档正文的上边距，确保其余非固定内容位于顶部固定 div 下方：

```
 function set_body_top_margin() {
            var menuHeight = $("#top_div").height();
            $(document.body).css("margin-top", menuHeight);
        }
        $(document).ready(set_body_top_margin);
        $(window).resize(set_body_top_margin); 
```

注意：如果您的顶部 div 因任何原因更改大小，则必须在`set_body_top_margin()`其他地方添加另一个调用。

# ruby-on-rails - 现有 Rails 项目 i18n 本地化的最佳在线服务

> ID：12405531
> 
> 赞同：6
> 
> 时间：2012-09-13T11:46:15.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, translation, i18n-gem

**您对翻译服务有什么看法，哪一种更适合具有 2,3 种语言但数量不断增加的 Rails 项目？**

或许我们可以编制一份带有优缺点的服务列表。

我看过：

*   [http://www.localeapp.com](http://www.localeapp.com)（非常好，但在 500 + 字符串之上有点贵）
*   [https://webtranslateit.com](https://webtranslateit.com)
*   [http://www.smartling.com](http://www.smartling.com)
*   [http://99translations.com](http://99translations.com)

关于什么服务适合的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:12:05.130

你看过CopyCopter吗？它是商业服务，但它变成了开源项目。你有关于该主题的 railscasts 的精彩截屏：[http ://railscasts.com/episodes/336-copycopter](http://railscasts.com/episodes/336-copycopter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T16:40:17.547

如果您需要负担得起的解决方案，您可能还想看看 PhraseApp：[https ://phraseapp.com](https://phraseapp.com)

# php - 在回发时回显值

> ID：12405536
> 
> 赞同：0
> 
> 时间：2012-09-13T11:46:29.360
> 
> 标签：php, javascript, mysql, html

我有五个下拉列表，根据选择，显示更改为阻止。当值被回发时，问题就来了。下拉列表不显示值。这可能是因为默认情况下 javascript 在下拉列表中显示为 none。javascript 监听 onclick。这是javascripts的一部分：

```
 function changeOptions() {
    var form = window.document.getElementById("frm1");
    var sv = window.document.getElementById("sv");
    var sv2= window.document.getElementById("sv2");
var sv3 = window.document.getElementById("sv3");
    var sv4= window.document.getElementById("sv4");
var sv5 = window.document.getElementById("sv5");

if (form.radioButton1.checked) {
        sv2.style.display = "none";
sv3.style.display = "none";
sv4.style.display = "none";
sv5.style.display = "none";
        sv.style.display = "block";
        //sv.selectedIndex =0;

  else if (form.radioButton5.checked) {
        sv.style.display = "none";
        sv2.style.display = "none";
        sv3.style.display = "none";
        sv4.style.display = "none";
        sv5.style.display = "block";
        sv5.selectedIndex = 0;
    }

}
window.document.getElementById("radioButton5").onclick = changeOptions; 
```

下拉菜单是从我的数据库中填充的。下面是代码。其中有五个 display:none 根据单击的单选按钮更改为阻止。

```
 <select style="width:200px; **display:none**" name="pGroup" id="sv" >

<option value="Choose an Option" >Choose Product Group</option>
<?php
$selGroup = isset($_GET['pGroup'])?$_GET['pGroup']:"";
$sql="SELECT DISTINCT pGroup FROM cr39 WHERE ";
$sql.="HeadingNo = 3 ORDER BY pGroup ASC";
$result =mysql_query($sql);
while ($data=mysql_fetch_assoc($result)){
?>

<option <?php if($data['pGroup'] == $selGroup) echo 'selected="selected"'; ?> value ="<?php echo $data['pGroup'] ?>" ><?php echo $data['pGroup'] ?></option>
<?php } ?>

</select> 
```

. . . .

```
 <select style="width:200px; **display:none**" name="pGroup5" id="sv5">

<option value="Choose an Option" >Choose Product Group</option>
<?php 
$selGroup = isset($_GET['pGroup5'])?$_GET['pGroup5']:"";
$sql="SELECT DISTINCT pGroup FROM cr39 WHERE ";
$sql.="HeadingNo = 7 ORDER BY pGroup ASC";
$result =mysql_query($sql);
while ($data=mysql_fetch_assoc($result)){
?>

<option <?php if($data['pGroup'] == $selGroup) echo 'selected="selected"'; ?> value ="<?php echo $data['pGroup'] ?>" ><?php echo $data['pGroup'] ?></option>
<?php } ?>

</select> 
```

我是这方面的新手，希望获得有关如何在我的回发下拉列表中保留价值的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:50:49.797

根据上面的评论，需要查看更多代码才能准确，但这是一个您可以适应的伪版本；

```
<body 
<?PHP if(isset($_GET['selectedGroupId'];)){ ?>
    onload='window.document.getElementById("radioButton<?PHP echo $_GET['selectedGroupId']; ?>").click()'
<?PHP } ?>
> 
```

替换`$_GET['selectedGroupId']`为您的字段名/ID

看看这是否能让你走上正轨

# c++ - 同时在 Visual Studio 和 AnkhSVN 中移动文件

> ID：12405538
> 
> 赞同：0
> 
> 时间：2012-09-13T11:46:39.750
> 
> 标签：c++, visual-studio-2010, svn, ankhsvn

我正在重新组织我在视觉工作室中的项目。我有一些`.cpp`/`.h`文件要物理移动到子目录中。A 想同时进行以下行为：

*   文件在文件系统上移动
*   SVN 工作副本数据库更新（保留历史）
*   Visual Studio 项目文件更新

额外的好处会很好，比如：

*   更新`#include`引用文件的指令。

有什么解决办法吗？最好的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T02:40:11.347

对于软件开发人员来说，这是众所周知的先有鸡还是先有蛋的困境：

*   您是否首先在 Visual Studio 中移动/重命名文件，然后返回 Windows 资源管理器并更正所有应该重命名/移动的添加/删除？
*   或者您是否在 Windows 资源管理器中重命名/移动文件，然后在 Visual Studio 中清理所有引入的编译错误？

*您已经有了解决方案！*如果没有 AnkhSVN，如果您在 Visual Studio 中进行文件操作，您已经获得了两个要求：更新 VS 项目和文件系统同步。但是，安装 AnkhSVN 后，您还会得到第三个要求：它还可以进行必要的 SVN 同步。您剩下要做的就是提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T17:45:15.350

我在 Google 搜索的[缓存页面](http://webcache.googleusercontent.com/search?q=cache%3aY9ElygOuKvMJ%3awww.williablog.net/williablog/post/2011/05/25/Moving-Files-in-Visual-Studio-and-SVN.aspx%20refresh%20visual%20studio%20project%20after%20moving%20files&cd=1&hl=en&ct=clnk&client=browser-ubuntu)中找到了以下描述：

> 在 Windows 资源管理器中，右键单击文件并将其从旧位置拖到新位置，然后从上下文菜单中选择“SVN 移动版本化项目”。这不仅会移动实际文件本身，还会确保在您签入更改后所有文件历史记录都保留在其中。回到 Visual Studio，使用 VS2010 中的解决方案资源管理器在其旧位置“从项目中排除”该文件的（现在丢失的）副本，然后在其新位置“包含在项目中”该文件。您可能需要在解决方案资源管理器中刷新视图和/或通过单击顶部的“显示所有文件”图标（刷新图标旁边）确保您正在查看所有文件，以便查看这些文件。
> 
> 在您更新命名空间以反映新位置后，我建议您在尝试编译之前使用全局查找和替换，这样可以省去很多麻烦。

希望这可以帮助。

# iphone - iPhone 上的 Safari “...发生了太多重定向”，但 ASP.NET 应用程序未发出任何 301 重定向

> ID：12405541
> 
> 赞同：1
> 
> 时间：2012-09-13T11:46:57.827
> 
> 标签：iphone, asp.net, redirect, cookies, safari

我有一个 ASP.NET“桌面友好”站点 (www.company.com) 和一个单独的“移动友好”站点 (m.company.com)。两个站点都有重定向规则，尝试检测设备是台式机还是移动设备，并将请求重定向到适当的站点。

移动网站上有一个“查看完整网站”链接。这会为父域 (.company.com) 设置会话 cookie（值为“1”）并将用户发送到桌面站点。当桌面站点上的重定向系统检测到 cookie（它可以读取，因为 cookie 属于父域）时，它会跳过将移动设备重定向到移动站点的通常规则。

这一切都很好......除了iPhone上的Safari！

仅对于此平台，一旦单击链接，您就不会被重定向到桌面站点，并且移动站点中的所有进一步导航都会导致错误“Safari 无法打开页面，因为发生了太多重定向”。如果您转到 iPhone 的 Safari 设置并单击“清除 Cookie”，则恢复正常，但一旦您单击“查看完整站点”链接，问题就会再次出现。

我的第一个想法是重定向系统发出交替的 301 重定向 - 即创建一个重定向循环。但是，在附加调试器的情况下，我可以看到这并没有发生。没有发出请求和重定向流 -**实际上没有一个！**就好像 Safari 正在向自己发出重定向指令。

这似乎是 iPhone 上 Safari 的一个常见问题，[在许多网站上的各种用户论坛上都有数十个关于它的报告](http://www.google.com/search?q=iphone%20redirect%20loop&aq=f&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8#hl=en&tbo=d&sclient=psy-ab&q=%22Safari%20cannot%20open%20the%20page%20because%20too%20many%20redirects%20occurred%22%20iphone&oq=%22Safari%20cannot%20open%20the%20page%20because%20too%20many%20redirects%20occurred%22%20iphone&gs_l=serp.3..0.16507.17674.0.17888.6.6.0.0.0.0.46.232.6.6.0.les;..0.0...1c.1.YOll6P88Fo8&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=251ddb1278bf3ace&biw=1213&bih=793)。大多数用户报告说它只发生在他们的 iPhone 上，而不是在他们的 iPad 上。

由于服务器似乎不对这个问题负责，我正在为该怎么做而摸不着头脑！到目前为止，我唯一的想法是隐藏 iPhone 的“查看完整站点”链接，或者尝试使用基于非 cookie 的重定向绕过。

谁能解释原因和/或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-29T13:11:56.123

您应该查看 .htaccess 文件。

我在 .htaccess 中有一个简单的重定向写入，它阻止在 Safari 上加载。像这样：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

虽然，这不是一个修复，它是一个补丁。

# asp.net - .NET 参数与 DbParameter 类

> ID：12405542
> 
> 赞同：1
> 
> 时间：2012-09-13T11:46:59.450
> 
> 标签：asp.net, data-binding, parameters

有没有人清楚地解释这两个类是如何相关的以及它们的区别是什么？我知道它`Parameter`用于数据源 Web 控件，而`DbParameter`（或者更确切地说，从它派生的类）用于`DbCommand`诸如`ExecuteNonQuery()`; 但是为什么有两个不同的类似乎完成了同样的事情呢？

# jquery - jQuery分页不起作用

> ID：12405543
> 
> 赞同：0
> 
> 时间：2012-09-13T11:47:01.420
> 
> 标签：jquery, jsp, pagination, jquery-pagination

我试图将分页功能添加到我的jsp。我使用了以下代码。但只有`Prev Next`链接显示。所有记录都在同一页面中列出。为什么会这样？？有没有其他简单的方法来做分页。？

```
<table align="right">
  <tr>
  <td class="cls2">
  <div id="page" class="page">
    <a href="" class="prev cls3"> <img src="/prev.gif" alt="" width="16" height="16" border="0">Prev</a>&nbsp;&nbsp;&nbsp;
    <span class="pdisplay" ></span>&nbsp;&nbsp;&nbsp;
    <a href=""  class="next cls3">Next<img src="/next.gif" alt="" width="16" height="16" border="0"> </a>
  </div> 
  </td>
  </tr>
</table>

<table class="cls" cellpadding="1" cellspacing="0" border="0" width="100%"  id="resultTbl">
 <tbody> <thead>
 <tr>
  <th >Select</th>
  <th><span id="isp" class="cls1"><%=request.getParameter("user")%></span></th>
 </tr></thead>
 <tr>
  <td></td>
  <td></td>
 </tr>
</table>

jQuery I used :

<script type="text/javascript" src="my_js/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="my_js/jquery.tablesorter.pagerquote.js"></script>
   <script defer="defer">
    $("#resultTbl")
    .tablesorter()
    .tablesorterPager({container: $("#page")}); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:54:38.217

尝试通过你的桌子的容器，

```
$(document).ready(function() { 
    $("table") 
   .tablesorter() 
   .tablesorterPager({container: $("#page_container")}); 
}); 
```

我也用工作副本装了jsfiddle：

[http://jsfiddle.net/zcatD/](http://jsfiddle.net/zcatD/)

还要检查以下要求：

jQuery（1.2.1 或更高版本）

Firefox 2+、Internet Explorer 6+、Safari 2+、Opera 9+、

# css - 2 个 div 彼此相邻，不使用宽度

> ID：12405546
> 
> 赞同：1
> 
> 时间：2012-09-13T11:47:16.023
> 
> 标签：css, html, twitter-bootstrap

我试图弄清楚我们如何让 2 个 div 彼此完全相邻，但不使用宽度之类的东西。

我正在使用 Bootstrap Responsive，我禁用了正确的 div。不过，左边的 div 看起来仍然会有一个右边的 div。

有没有办法做到这一点？

```
.rightinfo { /* On the right */

float:right;
padding:5px;
position:relative;
top: 0;
right: 0;
margin-left:500px; /* Any kind of margin in here doesn't work, even without width */
}

.maininfo { /* On the left */
    background:#CAD2E0;
    padding: 5px;
    width: 69%; /* Even if there's margin-left on the right div, this still overrides it and uses the whole page size if it's 100% width*/
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-07T00:31:46.143

在两个 div 上使用此样式：

```
float:left 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:50:24.490

像这样试试

```
<style type="text/css">
div.item
{
 float:left;
 }
</style>
<div style="float:left" id="items-container">
<div class="item"></div>
<div class="item"></div>
<div class="item"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T18:44:19.310

Bootstrap 将内置此功能。

```
Use your layout classes.
<div class:container>
<div class:row-fluid>
<div class: Col-md-6 >
First div
</div>
<div class: Col-md-6 >
Second div
</div>
</div>
 </div> 
```

如果你想抵消这个也可以做到。Bootstrap 文档非常好。

如果不使用引导内联块是你的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:03:07.710

为两者添加一个公共类：

.myfloatingdiv{

显示：内联块；向左飘浮;

}

只记得让 div 以相反的顺序排列...

myrightdiv 我的leftdiv

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T11:56:03.480

.....................................

嗨，现在定义`white-space nowrap`css

像这样

```
<style type="text/css">
.someclass{
white-space:nowrap;
font-size:0;
}
.itemcss
{
display:inline-block;
vertical-align:top;
font-size:12px;
 }
</style> 
```

**HTML**

```
<div class="someclass">
<div class="itemcss"></div>
<div class="itemcss"></div>
<div class="itemcss"></div>
</div> 
```

# php - symfony 2中的结构应用

> ID：12405548
> 
> 赞同：2
> 
> 时间：2012-09-13T11:47:21.327
> 
> 标签：php, symfony, symfony-2.1

我正在使用 symfony 2.1 建立一个在线商店。基本上我有前端部分，我的网站的用户可以从中查看、添加项目和后端部分，供管理员用户管理整个网站。前端和后端部分将具有不同的模板，但两者的数据库模型（Doctrine）相同。

我如何构建我的应用程序？

以前我使用的是 symfony 1.4，我可以在其中创建前端应用程序和后端应用程序。Symfony 2 处理捆绑包。我应该创建 2 个捆绑包，一个用于前端，一个用于后端吗？创建这样的结构，如何才能在它们之间共享模型。

请为我的应用程序建议一些结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:08:23.177

我建议你[不](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-in-symfony-2)使用捆绑包，并为后端的东西使用子命名空间：

*   `Vendor\Controller\UserController`— 前端用户控制器，
*   `Vendor\Controller\Backend\UserController`— 后端用户控制器。

模板也将被子命名空间：

*   `app/Resources/views/User/view.html.twig`,
*   `app/Resources/views/Backend/User/view.html.twig`.

您可以将其他模板中的子命名空间模板引用为：

```
{% include ':Backend\User:someTemplate.html.twig' %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:57:01.690

As symfony2 relies on [namespaces](http://php.net/manual/en/language.namespaces.php), you can share classes between them easily.

Let's say you defined your entities in `FrontendBundle`, they will be like:

```
namespace Acme\FrontendBundle\Entity;

/** @ORM annotations stuff */
class MyEntity
{

    protected $id;

    ...

} 
```

You can then refer to them either by creating from scratch:

```
$newEntity = new \Acme\FrontendBundle\Entity\MyEntity(); 
```

or by importing them via `use`:

```
namespace Acme\BackendBundle\Controller;

use Acme\FrontendBundle\Entity\MyEntity;

class AdminController extends Controller
{

    public someAction()
    { 

        $newEntity = new MyEntity();

    }

} 
```

Doctrine repositories use a slightly different notation:

```
$this-> getDoctrine()
    -> getEntityManager()
    -> getRepository('FrontendBundle:MyEntity')
    -> findAll(); 
```

being it `NameBundle:EntityName`.

Refer to [symfony best practices](http://symfony.com/doc/2.0/cookbook/bundles/best_practices.html) to get a better clue!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:03:04.430

正如之前的答案所示，没有单一的最佳方法。我发现拥有三个捆绑包很有用。一个包含实体以及其他共享功能的 CoreBundle，然后是位于核心包之上的前端/后端包。但同样，没有单一的最佳方法。

# css - CSS：扩展 div 以适应整个页面

> ID：12405555
> 
> 赞同：1
> 
> 时间：2012-09-13T11:47:43.120
> 
> 标签：css

我正在尝试找到一种方法来扩展 a`div`以适应页面的其余部分，而不使用`JavaScript`.

我写的一些代码开始：

**HTML：**

```
​&lt;div class="bodyContainer">
    <div class="sidebar"></div>
    <div class="container"></div>
</div> 
```

**CSS：**

```
.bodyContainer {
 border: 1px solid black;
 width: 100%;
 min-height: 50px; 
 height: 100%;    
}

.sidebar {
    height: 100%;
}

.container {
    height: 100%;
} 
```

上面的代码没有扩展`div`以适应页面的其余部分。

我也开始了`JSFiddle`，看看会发生什么。链接：[JSFiddle](http://jsfiddle.net/andrewtomici/BwVWx/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:50:02.337

您还需要将高度和宽度添加到 html 和 body 元素：

```
html, body
{
    height: 100%;
    width: 100%;
} 
```

[http://jsfiddle.net/Kyle_/BwVWx/4/](http://jsfiddle.net/Kyle_/BwVWx/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T17:57:08.750

上面的答案有正确的信息，但我为那些不熟悉 CSS 的人添加了一些信息空白。

如果你只是添加一个类并尝试让你的 div 100%，你会得到这个

[![在此处输入图像描述](../Images/3f0d0b0c579940537220f13952d13b2e.png)](https://i.stack.imgur.com/YCxyn.png)

所以你必须增加和`100%`的高度`body``html`

[![在此处输入图像描述](../Images/0a49cac7f8cf10e3079200443f9dd648.png)](https://i.stack.imgur.com/l8DQb.png)

div 周围仍然会有“空白”。所以删除填充和边距。

[![在此处输入图像描述](../Images/ad5842adb1fd0e01f2017493c2a1d154.png)](https://i.stack.imgur.com/NUtXh.png)

## CSS

```
body, html {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

/* your class for the div should have 100% height and width */
.bg-full {
  background-color: #777; /* you can add a color to visually test your code */
  width: 100%;
  height: 100%;
} 
```

[您可以在CodePen](http://codepen.io/JGallardo/pen/ZQzrJg)上查看演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:51:35.783

尝试`height: 100%;`为 HTML 和 BODY 元素添加一个：

```
html, body {
    height: 100%;
} 
```

[http://jsfiddle.net/BwVWx/3/](http://jsfiddle.net/BwVWx/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:51:36.127

使用`box-sizing: border-box;`css 属性避免水平滚动条显示。这是您[更新的示例](http://jsfiddle.net/BwVWx/2/)。

关于[box-sizing](https://developer.mozilla.org/en-US/docs/CSS/box-sizing) css 属性。

# android - 自定义TableLayout行android

> ID：12405559
> 
> 赞同：-1
> 
> 时间：2012-09-13T11:47:52.437
> 
> 标签：android, custom-controls, row, tablelayout

![在此处输入图像描述](../Images/10b2e0bc98987059153978059c47b505.png)

我需要将这个实现为表格行 - 我有 ID (39004)、标题（我终于达到了一个里程碑）、状态（检查）和价格（456 美元）等字段。我该怎么做？或者以其他方式实现这一点会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:31:16.580

我用这样的RelativeLayout做到了：

项目.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip" 
    android:background="#FFFFFF">

    <!-- ListRow Left sied Thumbnail image -->

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="3dip" >

        <TextView
            android:id="@+id/altOrderId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ID"
            android:gravity="center|center"
            android:textColor="#040404"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans" />
    </LinearLayout>

    <!-- Title Of Song -->

    <!-- Artist Name -->

    <TextView
        android:id="@+id/altOrderTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="1dip"
        android:textStyle="bold"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Just gona stand there and ..."
        android:textColor="#000000"
        android:textSize="14dp" />

    <!-- Rightend Duration -->

    <TextView
        android:id="@+id/altOrderStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/altOrderTitle"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="5dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:textColor="#838B8B"
        android:textSize="14dp"
        android:textStyle="bold" />

    <!-- Rightend Arrow -->

    <TextView
        android:id="@+id/altOrderPrice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/thumbnail"
        android:text="Rihanna Love the way lie"
        android:textColor="#458B74"
        android:textSize="15dp"
        android:textStyle="bold"
        android:typeface="sans" />

</RelativeLayout> 
```

和我的 list.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/altOrderslist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:divider="#b5b5b5"
        android:layout_below="@+id/layoutLabel"

        android:dividerHeight="1dp"
         />

</RelativeLayout> 
```

# java - 从 spring 3 控制器发出 http 请求的最佳方法

> ID：12405560
> 
> 赞同：1
> 
> 时间：2012-09-13T11:47:54.507
> 
> 标签：java, json, spring-mvc

我有一个 Spring 3 控制器，它必须向另一台服务器发出 HTTP 请求 [不是 Web 服务调用]，该服务器将提供 JSON 响应，然后控制器需要解析这个 JSON 响应并在 JSP 中使用它。

*   有我可以使用的标准春季课程吗？
*   我可以为此使用 Apache Http Client API 吗？
*   实现这一点的最佳方法是什么？
*   spring 有解析 JSON 文本的类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:51:20.283

来自 apache 的 HTTP 客户端很好，还可以查看将提供 JSON 解析的 jackson（https://github.com/FasterXML/jackson-core）。

**更新：** 您可以查看的其他内容是 Spring 的[RestTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)。这可能比 HTTP 客户端更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:53:57.030

如果您想向另一台服务器执行 HTTP 请求，我建议您使用 Apache HTTP 客户端。您可以使用 Spring XML 对其进行配置，并像任何其他 bean 一样将其注入到上下文中。

# apache - 在 jBoss 的 ajp-connector 上启用压缩/gzip

> ID：12405563
> 
> 赞同：2
> 
> 时间：2012-09-13T11:47:59.577
> 
> 标签：apache, jboss, load-balancing, mod-jk, ajp

我有一个 Apache 负载均衡器和一个为它服务的 jBoss 集群。

现在我想在响应中添加压缩/gzip，但到目前为止，我只找到了如何在负载均衡器或 jBoss 中的 http-connector 上启用它。在 ajp-connector 上启用它没什么。

我不想在负载平衡器上进行压缩，因为我认为它应该尽可能少地保存负载平衡。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T20:32:42.093

如前所述，AJP 不支持压缩。对于您希望 JBoss 进行压缩的场景，您应该只需要通过 http 进行代理：

```
<Proxy balancer://mycluster>
BalancerMember http://192.168.1.50:8080
BalancerMember http://192.168.1.51:8080
</Proxy>
ProxyPass /test balancer://mycluster 
```

其中 192.168.1.50 和 .51 是您的 JBoss 服务器，配置为在 http 上使用压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:45:19.393

如果您使用 AJP 从 JBoss 连接到您的代理，则无需压缩，请在您的虚拟主机配置或 httpd.conf 中进行压缩。

[http://tomcat.apache.org/connectors-doc/ajp/ajpv13a.html](http://tomcat.apache.org/connectors-doc/ajp/ajpv13a.html)

它甚至不被支持。

# macos - Mac OS X 的 IntelliJ 中的“Alt-Insert”等价物是什么？

> ID：12405564
> 
> 赞同：98
> 
> 时间：2012-09-13T11:48:05.493
> 
> 标签：macos, intellij-idea

Mac OS X 的 IntelliJ 中的“Alt-Insert”等价物是什么？

许多 Mac 键盘没有插入键，即使连接 PC 键盘，该`insert`键也不起作用。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-09-13T11:48:05.493

等效的快捷方式是`Command+n`.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-06-15T10:12:56.957

有趣的是，`ctrl`+`Enter`也适用于我。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-07-20T09:02:03.297

您也可以使用“ctrl + enter”

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-13T12:30:30.213

这可能取决于您的键盘映射。我建议使用针对 Mac OS 优化的*10.5+*键盘映射（即 cmd-w 是*关闭选项卡*，而不是*增量选择*）。在这种情况下，您所指的*代码生成是 cmd-n。*

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-07-04T12:22:19.317

“选项+返回”

对我有用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-10-18T20:53:07.877

它是`CTRL`+ `I`。
这对我有用

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-29T12:53:42.840

在 IntelliJ 或 Android Studio 中，您可以将其设置为您想要的任何内容。我使用 Apple 键盘和 KVM 在 Mac 和 PC 之间切换。键盘没有插入键，所以我不得不将其更改为简单的“后引号”，它就在我的 Apple 键盘上的 esc 键下方。从主菜单去..

文件 > 设置

然后

键盘映射 > 主菜单 > 代码 > 生成..

要进行编辑，请右键单击（或使用绿色铅笔）并选择“删除现有快捷方式”或“添加另一个快捷方式”。如果键或键组合已被使用，IDE 将警告您。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-04T19:15:01.967

我有 Mac 并**`option+return`**为我工作**`android studio 4`**

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-10-20T18:17:33.320

如果使用 NetBeans 调用构造函数，请使用 Ctrl+i

# html - 无法在文本字段 XUL 弹出窗口中选择文本

> ID：12405566
> 
> 赞同：0
> 
> 时间：2012-09-13T11:48:09.410
> 
> 标签：html, firefox-addon, xul

我无法在我的 Firefox 扩展中选择文本字段内的文本。光标仅停留在文本字段的开头，当我单击并拖动鼠标时不会移动。但是，我可以使用键盘上的 shift 和箭头键来选择文本。

我正在加载一个 html 页面，该页面在 XUL 面板中的 iFrame 中包含 2 个文本字段和 2 个按钮。

我正在使用的代码如下：

```
//popup.xul
<?xml version="1.0" encoding="UTF-8"?>
<panel id="ext-popup" title="My Extension" orient="vertical" autostretch="always"
       buttons=","
       defaultButton=","
       shadow="true"
       style="padding: 0px; margin: 0px; height: 32px; -moz-window-shadow : sheet"
       onload="init();"
       xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <script src="chrome://myext/content/popup.js"/>
    <iframe src="chrome://myext/content/popup.html" type="content"
            style="background-color: white; -moz-window-shadow : default; width: 490px; height: 260px;overflow: hidden;"
            id="popupContent"/>
</panel> 
```

是否需要设置任何选项以允许在文本字段中进行选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:48:02.173

终于发现问题了。问题出在css上。我正在使用以下css属性：

`-moz-user-select: none`

当我删除它时，我能够选择文本。

# php - 除非存在追加销售，否则显示滑块 - PHP if Statment

> ID：12405569
> 
> 赞同：0
> 
> 时间：2012-09-13T11:48:18.310
> 
> 标签：php, magento

我在下面使用此代码：

```
<div class="feat-product">
        <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('feat_products')->toHtml() ; ?>
</div>
<div id="products-recently-viewed" style="border-bottom:1px dashed #ccc; padding-bottom:10px;">
        <?php echo $this->getChildHtml('upsell_products') ?>
</div> 
```

目前您可以看到两个块都在显示，我想做它，所以只有 feat_products 始终显示`UNLESS`产品的 Upsell 中有产品，在这种情况下，我需要它不显示 feat_products 并`ONLY`显示 upsell 部分。

希望有人曾经偶然发现过这个并且可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:54:27.220

在 PHP 中，您可以嵌入条件并将 html 放在中间。例如：

```
<?php if (strlen($this->getChildHtml('upsell_products')) > 0) { ?>
<div class="feat-product">
        <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('feat_products')->toHtml() ; ?>
</div>
<?php } ?> 
```

如果没有产品，我假设您的 getChildHtml 函数返回一个空字符串。根据需要调整...

# android - 使用 ListAdapter 在 ScrollView 布局中填充 LinearLayout

> ID：12405575
> 
> 赞同：96
> 
> 时间：2012-09-13T11:48:44.003
> 
> 标签：android, android-layout, android-arrayadapter

我面临一个非常常见的问题：我布置了一个活动，现在它应该在 this 中显示一些项目`ScrollView`。这样做的正常方法是使用现有的`ListAdapter`，将其连接到 a`ListView`和*BOOM*我将拥有我的项目列表。

**但是**您不应该将嵌套`ListView`放在 a 中`ScrollView`，因为它会破坏滚动 - 甚至 Android Lint 也会抱怨它。

所以这是我的问题：

如何将 a 连接`ListAdapter`到 a`LinearLayout`或类似的东西？

我知道这个解决方案不会针对很多项目进行扩展，但我的列表非常短（< 10 个项目），因此实际上不需要重用视图。性能方面，我可以忍受将所有视图直接放入`LinearLayout`.

我想出的一种解决方案是将现有的活动布局放在`ListView`. 但这感觉就像在滥用这种机制，所以我正在寻找更清洁的解决方案。

想法？

**更新：**为了激发正确的方向，我添加了一个示例布局来显示我的问题：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/news_detail_layout"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="vertical"
              android:visibility="visible">

    <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#FFF"
            >

        <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:paddingLeft="@dimen/news_detail_layout_side_padding"
                android:paddingRight="@dimen/news_detail_layout_side_padding"
                android:paddingTop="@dimen/news_detail_layout_vertical_padding"
                android:paddingBottom="@dimen/news_detail_layout_vertical_padding"
                >

            <TextView
                    android:id="@+id/news_detail_date"
                    android:layout_height="wrap_content"
                    android:layout_width="fill_parent"
                    android:gravity="center_horizontal"
                    android:text="LALALA"
                    android:textSize="@dimen/news_detail_date_height"
                    android:textColor="@color/font_black"
                    />

            <Gallery
                    android:id="@+id/news_detail_image"
                    android:layout_height="wrap_content"
                    android:layout_width="fill_parent"
                    android:paddingTop="5dip"
                    android:paddingBottom="5dip"
                    />

            <TextView
                    android:id="@+id/news_detail_headline"
                    android:layout_height="wrap_content"
                    android:layout_width="fill_parent"
                    android:gravity="center_horizontal"
                    android:text="Some awesome headline"
                    android:textSize="@dimen/news_detail_headline_height"
                    android:textColor="@color/font_black"
                    android:paddingTop="@dimen/news_detail_headline_paddingTop"
                    android:paddingBottom="@dimen/news_detail_headline_paddingBottom"
                    />

            <TextView
                    android:id="@+id/news_detail_content"
                    android:layout_height="wrap_content"
                    android:layout_width="fill_parent"
                    android:text="Here comes a lot of text so the scrollview is really needed."
                    android:textSize="@dimen/news_detail_content_height"
                    android:textColor="@color/font_black"
                    />

            <!---
                HERE I NEED THE LIST OF ITEMS PROVIDED BY THE EXISTING ADAPTER. 
                They should be positioned at the end of the content, so making the scrollview smaller is not an option.
            ---->                        

        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

**更新 2**我更改了标题以使其更易于理解（投反对票，doh！）。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-13T12:00:40.313

您可能应该手动将您的项目添加到`LinearLayout`：

```
LinearLayout layout = ... // Your linear layout.
ListAdapter adapter = ... // Your adapter.

final int adapterCount = adapter.getCount();

for (int i = 0; i < adapterCount; i++) {
  View item = adapter.getView(i, null, null);
  layout.addView(item);
} 
```

**编辑**：当我需要显示大约 200 个重要的列表项时，我拒绝了这种方法，它非常慢 - Nexus 4 需要大约 2 秒来显示我的“列表”，这是不可接受的。所以我转向了弗洛的带标题的方法。它工作得更快，因为列表视图是在用户滚动时按需创建的，而不是在创建视图时。

**简历：**手动向布局添加视图更容易编码（因此可能会减少移动部件和错误），但会遇到性能问题，因此如果您有 50 个或更多视图，我建议使用标题方法。

例子。基本上活动（或片段）布局转换为这样的东西（不再需要 ScrollView）：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/my_top_layout"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"/> 
```

然后在`onCreateView()`（我将使用带有片段的示例）中，您需要添加一个标题视图，然后设置一个适配器（我假设标题资源 ID 是`header_layout`）：

```
ListView listView = (ListView) inflater.inflate(R.layout.my_top_layout, container, false);
View header = inflater.inflate(R.layout.header_layout, null);
// Initialize your header here.
listView.addHeaderView(header, null, false);

BaseAdapter adapter = // ... Initialize your adapter.
listView.setAdapter(adapter);

// Just as a bonus - if you want to do something with your list items:
view.setOnItemClickListener(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // You can just use listView instead of parent casted to ListView.
    if (position >= ((ListView) parent).getHeaderViewsCount()) {
      // Note the usage of getItemAtPosition() instead of adapter's getItem() because
      // the latter does not take into account the header (which has position 0).
      Object obj = parent.getItemAtPosition(position);
      // Do something with your object.
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T12:10:43.187

我会坚持使用标题视图解决方案。它没有任何问题。目前，我使用完全相同的方法实施一项活动。

显然，“项目部分”比静态更动态（改变项目数与固定项目数等），否则您根本不会考虑使用适配器。因此，当您需要适配器时，请使用 ListView。

实现从适配器填充 LinearLayout 的解决方案最终只不过是构建具有自定义布局的 ListView。

只是我的2美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:53:18.467

将视图设置为 main.xml onCreate，然后从 row.xml 膨胀

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="450dp" >

        <ListView
            android:id="@+id/mainListView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/size"
            android:layout_below="@+id/editText1"
            android:gravity="fill_vertical|fill_horizontal"
            android:horizontalSpacing="15dp"
            android:isScrollContainer="true"
            android:numColumns="1"
            android:padding="5dp"
            android:scrollbars="vertical"
            android:smoothScrollbar="true"
            android:stretchMode="columnWidth" >

</ListView>

    <TextView
        android:id="@+id/size"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:background="#ff444444"
        android:gravity="center"
        android:text="TextView"
        android:textColor="#D3D3D3"
        android:textStyle="italic" />

    </EditText>

</RelativeLayout> 
```

行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
  android:paddingTop="3dp">

<TextView
  android:id="@+id/rowTextView"
  android:layout_width="0dip"
  android:layout_height="41dp"
  android:layout_margin="4dp"
  android:layout_weight="2.83"
  android:ellipsize="end"
  android:gravity="center_vertical"
  android:lines="1"
  android:text="John Doe"
  android:textColor="@color/color_white"
  android:textSize="23dp" >
</TextView>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-18T23:41:10.523

我使用以下代码复制适配器功能`ViewGroup`和`TabLayout`. 这样做的好处是，如果您更改列表并再次绑定，它只会影响更改的项目：

用法：

```
val list = mutableListOf<Person>()
layout.bindChildren(list, { it.personId }, { bindView(it) }, {d, t ->bindView(d, t)})
list.removeAt(0)
list+=newPerson
layout.bindChildren(list, { it.personId }, { bindView(it) }, {d, t ->bindView(d, t)}) 
```

对于`ViewGroups`：

```
fun <Item, Key> ViewGroup.bindChildren(items: List<Item>, id: (Item) -> Key, view: (Item) -> View, bind: (Item, View) -> Unit) {
    val old = children.map { it.tag as Key }.toList().filter { it != null }
    val new = items.map(id)

    val add = new - old
    val remove = old - new
    val keep = new.intersect(old)

    val tagToChildren = children.associateBy { it.tag as Key }
    val idToItem = items.associateBy(id)

    remove.forEach { tagToChildren[it].let { removeView(it) } }
    keep.forEach { bind(idToItem[it]!!, tagToChildren[it]!!) }
    add.forEach { id -> view(idToItem[id]!!).also { it.tag = id }.also { addView(it, items.indexOf(idToItem[id])) } }
} 
```

因为`TabLayout`我有这个：

```
fun <Item, Key> TabLayout.bindTabs(items: List<Item>, toKey: (Item) -> Key, tab: (Item) -> TabLayout.Tab, bind: (Item, TabLayout.Tab) -> Unit) {
    val old = (0 until tabCount).map { getTabAt(it)?.tag as Key }
    val new = items.map(toKey)

    val add = new - old
    val remove = old - new
    val keep = new.intersect(old)

    val tagToChildren = (0 until tabCount).map { getTabAt(it) }.associateBy { it?.tag as Key }
    val idToItem = items.associateBy(toKey)

    remove.forEach { tagToChildren[it].let { removeTab(it) } }
    keep.forEach { bind(idToItem[it]!!, tagToChildren[it]!!) }
    add.forEach { key -> tab(idToItem[key]!!).also { it.tag = key }.also { addTab(it, items.indexOf(idToItem[key])) } }
} 
```

# javascript - 防止在新窗口中打开 iframe 表单

> ID：12405578
> 
> 赞同：0
> 
> 时间：2012-09-13T11:49:02.173
> 
> 标签：javascript, iframe

我正在使用 iFrame 上传 JSPForm。代码如下，

```
function directConvert(form, action_url, div_id){               
        // Create the iframe...
        var iframe = document.createElement("iframe");
        iframe.setAttribute("id", "upload_iframe");     
        iframe.setAttribute("name", "upload_iframe");
        iframe.setAttribute("width", "0");
        iframe.setAttribute("height", "0");
        iframe.setAttribute("border", "0");
        iframe.setAttribute("style", "width: 0; height: 0; border: none;");
        // Add to document...
        form.parentNode.appendChild(iframe);
        //window.frames['upload_iframe'].name = "upload_iframe";     
        iframeId = document.getElementById("upload_iframe");     
        // Add event...

        var eventHandler = function () {     
                if (iframeId.detachEvent) iframeId.detachEvent("onload", eventHandler);
                else iframeId.removeEventListener("load", eventHandler, false);             
                // Message from server...    

                if (iframeId.contentDocument) {                
                    content = iframeId.contentDocument.body.innerHTML;
                } else if (iframeId.contentWindow) {                    
                    content = iframeId.contentWindow.document.body.innerHTML;
                } else if (iframeId.document) {                 
                    content = iframeId.document.body.innerHTML;
                }               
                document.getElementById(div_id).innerHTML = content;     
                // Del the iframe...
                setTimeout('iframeId.parentNode.removeChild(iframeId)',50);
            }

        if (iframeId.addEventListener) iframeId.addEventListener("load", eventHandler, true);
        if (iframeId.attachEvent) iframeId.attachEvent("onload", eventHandler);  

        // Set properties of form...
        form.setAttribute("target", "upload_iframe");
        form.setAttribute("action", action_url);
        form.setAttribute("method", "post");
        form.setAttribute("enctype", "multipart/form-data");
        form.setAttribute("encoding", "multipart/form-data");  
        form.submit();      
    } 
```

表单正在正确提交，但之后如果有任何操作，如检查页面中的单选按钮会导致在新窗口中打开应用程序。如何防止它在新窗口中打开？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:33:57.893

不知道为什么单选按钮会导致任何问题，但如果表单正在提交，问题可能是表单“目标”不再存在。

```
form.setAttribute("target", "upload_iframe"); 
```

“upload_iframe”元素从加载事件处理程序中的 DOM 中删除。删除 iframe 后，尝试将目标设置为“_self”。

表单目标文档：[http ://www.w3schools.com/tags/att_form_target.asp](http://www.w3schools.com/tags/att_form_target.asp)

# iphone - 在 iphone 中无需用户交互即可捕获图像

> ID：12405580
> 
> 赞同：1
> 
> 时间：2012-09-13T11:49:25.773
> 
> 标签：iphone, uiimagepickercontroller

我想在没有用户知道的情况下在 iphone 中捕获图像。为此，我使用了自定义叠加层并调用了 [imagePicker takePicture]，但它没有调用 didFinishPickingMediaWithInfo 方法。谁能帮我解决这个问题？？

代码：

```
imgPicker = [[UIImagePickerController alloc] init]; 
imgPicker.delegate = self; 
imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
imgPicker.cameraDevice=UIImagePickerControllerCameraDeviceFront;
imgPicker.allowsEditing = NO; 
imgPicker.showsCameraControls = NO;
imgPicker.wantsFullScreenLayout = NO;
imgPicker.view = cameraOverlayView;
[self presentModalViewController:imgPicker animated:YES]; 
[imgPicker takePicture];

[imgPicker dismissModalViewControllerAnimated:YES]; 
```

请帮我做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:50:23.693

```
 @try
    {

        AVCaptureDevice *frontalCamera;
        NSArray *allCameras = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];

        // Find the frontal camera.
        for ( int i = 0; i < allCameras.count; i++ ) {
            AVCaptureDevice *camera = [allCameras objectAtIndex:i];

            if ( camera.position == AVCaptureDevicePositionFront ) {
                frontalCamera = camera;
            }
        }

        // If we did not find the camera then do not take picture.
        if ( frontalCamera != nil ) {
            // Start the process of getting a picture.
            session = [[AVCaptureSession alloc] init];

            // Setup instance of input with frontal camera and add to session.
            NSError *error;
            AVCaptureDeviceInput *input =
            [AVCaptureDeviceInput deviceInputWithDevice:frontalCamera error:&error];

            if ( !error && [session canAddInput:input] ) {
                // Add frontal camera to this session.
                [session addInput:input];

                // We need to capture still image.
                AVCaptureStillImageOutput *output = [[AVCaptureStillImageOutput alloc] init];

                // Captured image. settings.
                [output setOutputSettings:
                 [[NSDictionary alloc] initWithObjectsAndKeys:AVVideoCodecJPEG,AVVideoCodecKey,nil]];

                if ( [session canAddOutput:output] ) {
                    [session addOutput:output];

                    AVCaptureConnection *videoConnection = nil;
                    for (AVCaptureConnection *connection in output.connections) {
                        for (AVCaptureInputPort *port in [connection inputPorts]) {
                            if ([[port mediaType] isEqual:AVMediaTypeVideo] ) {
                                videoConnection = connection;
                                break;
                            }
                        }
                        if (videoConnection) { break; }
                    }

                    // Finally take the picture
                    if ( videoConnection ) {
                        [session startRunning];

                        [output captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {

                            if (imageDataSampleBuffer != NULL) {
                                NSData *imageData = [AVCaptureStillImageOutput 
                                                     jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                                UIImage *photo = [[UIImage alloc] initWithData:imageData];  
                                NSLog(@"Captured img====> %@",photo);
                                app.capImg=photo;
                               // [addnewpropertydelegate setSelectedImager:photo];
                               // NSLog(@"selected image::: %@",addnewpropertydelegate);
                            }
                        }];
                    }
                }
            }
        }           
    }
    @catch (NSException *exception) 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Camera" message:@"Camera is not available  " delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
        [alert show];
        // [alert release];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:13:44.220

这是因为您正在立即关闭 modalViewController，所以它没有机会调用委托。

你应该打电话`[imgPicker takePicture]`

然后`[imgPicker dismissModalViewControllerAnimated:YES]`在`didFinishPickingMediaWithInfo`方法中调用。

# php - Zend Framework 将 url 重写为 SEO 友好的 URL

> ID：12405586
> 
> 赞同：1
> 
> 时间：2012-09-13T11:49:46.340
> 
> 标签：php, zend-framework, url-rewriting

使用 Zend 框架，我正在尝试构建一个对 SEO 友好的 URL

`http://ww.website.com/public/index/categories/category/2`
应该由`http://ww.website.com/public/index/categories/category.html`

`http://ww.website.com/public/index/products/category/2/subcategory/2`
应该由`http://ww.website.com/public/index/products/product.html`

在我的引导文件中，我尝试过这个

```
protected function _initRoutes()
{ 
    $frontController = Zend_Controller_Front::getInstance ();
    $router = $frontController->getRouter ();
    $route = new Zend_Controller_Router_Route_Regex(
        'index/categories/category/(\d*)/',
        array('module' => 'default','controller' => 'index','action' => 'categories'), 
        array(1 => 'category'),
        'index/categories/%d-%s.html');

    $router->addRoute('category', $route);
} 
```

现在我的问题是如何重写这个 URL？我还使用以下方法根据 URL 中的 ID 检索产品或类别：

```
$id = $this->_getParam('category', 0 ); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:43:27.027

我认为您不需要 Regex 路由来满足您的需要。例如，如果你想要这个 url: `http://mysite.com/category/cars.html`to go to`http://mysite.com/categories/category/id/2`就足以使用 Zend_Controller_Router_Route

现在只有一个问题 Zend Router 不会知道要映射的类别的 id，为此您需要将自定义路由存储到数据库或文件中；每个自定义路由都将包含映射的 url 和所需参数（控制器名称、操作名称、类别 ID）。

在我们有了它之后，我们可以构建一个函数来注册一个自定义路由到引导文件，或者在一些像这样的插件中：

```
public function setRoute($params){
    $router = Zend_Controller_Front::getInstance()->getRouter();
    $params = array(
        'controller' => $params['controller'],
        'action'     => $params['action'],
        'id'         => $params['id']
        );
    $route = new Zend_Controller_Router_Route($params['url'], $params);
    $router->addRoute($params['url'], $route);
} 
```

现在让我们假设它`$params['url']`具有值：`http://mysite.com/category/cars.html`当从浏览器请求该 url ZF 将匹配我们的自定义路由并将请求转发到指定的控制器`$params['controller']`，并调用指定的操作`$params['action']`并将设置为名为 id 的参数值，`$params['id']`可以从控制器检索`$id = $this->_getParam('id',0);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T10:03:04.423

[我认为您选择了错误的路径，因为如果您的产品名称在基本 URL 之后开始，例如“ http://www.promotepassion.com/classical/rock](http://www.promotepassion.com/classical/rock) ”表示基本路径然后是类别名称，那么SEO 友好对 .html 或 .php 没有意义产品名称，如果我们使用那么所有搜索引擎快速调用页面。

# c# - c# 通过 Thunderbird 一次发送多封电子邮件

> ID：12405588
> 
> 赞同：2
> 
> 时间：2012-09-13T11:49:48.593
> 
> 标签：c#, email, command-line, thunderbird

我通过 c# 通过 Thunderbird 向许多人发送电子邮件。我用循环来做。我的问题是，当我运行我的应用程序时 - 对于我发送的任何电子邮件，都会打开一个新的 Thunderbird 窗口，然后我需要按“发送”，所以它被发送了。这是非常不方便的。如何一次发送所有电子邮件？

我的代码：

```
string strCommand;
for(i=0;i<100;i++)
{
   strCommand = " -compose to=" + (char)34 + astrRecip[i] + (char)34 + ",";
   strCommand += "body=" + (char)34 + strMessage[i] + (char)34 + ",";
   strCommand += "subject=" + (char)34 + strSubject + (char)34 + ",";
   strCommand += "attachment=" + (char)34 + strAttachment[i] + (char)34;
   Process.Start(@"C:\Program Files\Mozilla Thunderbird\thunderbird", strCommand);
} 
```

我认为因为我在每封电子邮件中都写了“-compose”，所以它会打开一个新窗口，也许如果我写一个命令行就可以了。我试过了，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:52:29.617

您确实应该使用[`SmtpClient`](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx).NET 框架中的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:45:58.647

[您可以在一个 compose 参数中使用多个电子邮件地址，如命令行参数 - Thunderbird](http://kb.mozillazine.org/Command_line_arguments_%28Thunderbird%29)中所示的示例。

因此，与其在每个循环中启动进程，不如加入所有电子邮件地址，然后再启动一个进程。这很简单，使用[string.Join](http://msdn.microsoft.com/en-us/library/dd988350%28VS.100%29.aspx)。

```
string strCommand;
strCommand = " -compose to=" + (char)34 + string.Join(",", astrRecip) + (char)34 + ",";
strCommand += "body=" + (char)34 + strMessage[i] + (char)34 + ",";
strCommand += "subject=" + (char)34 + strSubject + (char)34 + ",";
strCommand += "attachment=" + (char)34 + strAttachment[i] + (char)34;
Process.Start(@"C:\Program Files\Mozilla Thunderbird\thunderbird", strCommand); 
```

* * *

编辑：请注意，您可以转义“如果您想使用 \”。`(char)34`因此，您可以键入而不是使用

```
strCommand = " -compose to=\"" + string.Join(",", astrRecip) + "\","; 
```

而且，通过使用字符串格式，这可以更容易阅读。

```
strCommand = string.Format("-compose to=\"{0}\",", string.Join(",", astrRecip)); 
```

因为您将字符串与其参数分开。

# iis - ServerManager 构造函数在测试环境中崩溃

> ID：12405595
> 
> 赞同：10
> 
> 时间：2012-09-13T11:50:16.580
> 
> 标签：iis, asp.net-mvc-4, servermanager

我正在 MVC 4 中构建一个控制应用程序并且遇到了一个非常烦人的问题。当我在本地调试项目时，它工作正常。但是，当我将项目部署到测试服务器（Windows Server 2008 R2）时，以下换行符：

```
ServerManager manager = new ServerManager("%windir%\\system32\\inetsrv\\config\\applicationhost.config"); 
```

很感谢任何形式的帮助！

堆栈跟踪：

```
[ArgumentNullException: Value cannot be null.
Parameter name: type]
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +14156918
   System.Activator.CreateInstance(Type type) +11
   Microsoft.Web.Administration.ConfigurationManager..cctor() +96

[TypeInitializationException: The type initializer for 'Microsoft.Web.Administration.ConfigurationManager' threw an exception.]
   Microsoft.Web.Administration.ServerManager..ctor(String applicationHostConfigurationPath) +51
   ..HomeController.ApplicationPools() in ..HomeController.cs:26
   lambda_method(Closure , ControllerBase , Object[] ) +79
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 2 parameters) +261
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
   System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +34
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +124
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +837307
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +15
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +33
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +837892
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +65
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +51
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +15
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +606
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T15:35:39.157

原来是引用了错误版本的 Microsoft.Web.Administration。正确的版本是 7.0.0.0。7.9.0.0 以某种方式适用于 IIS Express，这解释了为什么它在我的开发环境中工作。

# java - 使用自定义 TableModel 使 isCellEditable 在按钮单击时为特定行设置为 true

> ID：12405605
> 
> 赞同：4
> 
> 时间：2012-09-13T11:50:27.313
> 
> 标签：java, swing, jtable, jbutton, abstracttablemodel

![我的表](../Images/80e287a2050f8121a9e374f9dd5b4296.png)

我有一张像上面这样的桌子。最初，除了按钮列之外的所有单元格都是不可编辑的。我已经使用 custom 创建了表格`TableModel`。我`isCellEditable`的自定义`TableModel`看起来像这样：

```
public boolean isCellEditable(int rowIndex, int columnIndex) { 
    //System.out.println("isCellEditable: " + rowIndex + " " + columnIndex);
    if(getColumnClass(columnIndex) == JButton.class)
        return true;
    else
        return false;
} 
```

但是，当我单击每一行的编辑按钮时，`JDialog`将弹出该行（通过`JTable`在此对话框中构造只有一行的 a）。我可以更新此 JDialog 表中的单元格值。然后在该行的相应单元格中更新它们。

![JDialog的表格](../Images/6d226465b0da5f0c1cd3f455a8aedbd6.png)

我在这里更新后成功更新了主表的行，只有当我**`isCellEditable`返回 true**时。但这不应该发生。只有当我单击时，我才能将`isCellEditable`行更改为可编辑并更新，然后使其不可编辑。

我看过以下[帖子](https://stackoverflow.com/questions/1042144/only-one-row-editable-on-jtable)，但无法实施。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T12:00:24.357

`XxxTableModel`存储as / `String.class`for _`JButton``Renderer``Editor``JTable`

*   [表格按钮列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

并且对于您的代码（基于）也是

*   [按钮表示例](http://www.java2s.com/Code/Java/Swing-Components/ButtonTableExample.htm)

编辑

默认表模型

```
import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.*;

public class TableButton3 extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;

    public TableButton3() {
        String[] columnNames = {"Date", "String", "Decimal", "Remove"};
        Object[][] data = {
            {new Date(), "A", new Double(5.1), "Remove"}, {new Date(), "B", new Double(6.2), "Remove"},
            {new Date(), "C", new Double(7.3), "Remove"}, {new Date(), "D", new Double(8.4), "Remove"},
            {new Date(), "A", new Double(5.1), "Remove"}, {new Date(), "B", new Double(6.2), "Remove"},};
        DefaultTableModel model = new DefaultTableModel(data, columnNames){

            private static final long serialVersionUID = 1L;

            @Override//  Returning the Class of each column will allow different renderers to be used based on Class
            public Class getColumnClass(int column) {
                switch (column) {
                    case 0:
                        return Date.class;
                    case 2:
                        return Double.class;
                    default:
                        return String.class;
                }
                //return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) ;
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        getContentPane().add(scrollPane);
        ButtonColumn buttonColumn = new ButtonColumn(table, delete, 3);
        buttonColumn.setMnemonic(KeyEvent.VK_D);
    }

    public static void main(String[] args) {
        TableButton3 frame = new TableButton3();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
    //
    private Action delete = new AbstractAction() {

        private static final long serialVersionUID = 1L;

        public void actionPerformed(ActionEvent e) {
            JTable table = (JTable) e.getSource();
            int modelRow = Integer.valueOf(e.getActionCommand());
            ((DefaultTableModel) table.getModel()).removeRow(modelRow);
            table.clearSelection();
        }
    };
} 
```

抽象表模型

```
import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.*;

public class TableButton3 extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;
    private MyTableModel myModel = new MyTableModel();

    public TableButton3() {
        String[] columnNames = {"Date", "String", "Decimal", "Remove"};
        Object[][] data = {
            {new Date(), "A", new Double(5.1), "Remove"}, {new Date(), "B", new Double(6.2), "Remove"},
            {new Date(), "C", new Double(7.3), "Remove"}, {new Date(), "D", new Double(8.4), "Remove"},
            {new Date(), "A", new Double(5.1), "Remove"}, {new Date(), "B", new Double(6.2), "Remove"},};
        DefaultTableModel model = new DefaultTableModel(data, columnNames){

            private static final long serialVersionUID = 1L;

            @Override//  Returning the Class of each column will allow different renderers to be used based on Class
            public Class getColumnClass(int column) {
                switch (column) {
                    case 0:
                        return Date.class;
                    case 2:
                        return Double.class;
                    default:
                        return String.class;
                }
                //return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model);
        table = new JTable(myModel);
        addTableDatas();
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        ButtonColumn buttonColumn = new ButtonColumn(table, delete, 3);
        buttonColumn.setMnemonic(KeyEvent.VK_D);
    }

    public static void main(String[] args) {
        TableButton3 frame = new TableButton3();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    private void addTableDatas() {
        Vector<String> columnNameS = new Vector<String>();
        columnNameS.add("Date");
        columnNameS.add("String");
        columnNameS.add("Decimal");
        columnNameS.add("Remove");
        myModel.setColumnNames(columnNameS);

        Vector<Object> row1 = new Vector<Object>();
        row1.add(new Date());
        row1.add("A");
        row1.add(new Double(5.1));
        row1.add("Remove");
        myModel.addRow(row1);

        row1 = new Vector<Object>();
        row1.add(new Date());
        row1.add("B");
        row1.add(new Double(6.2));
        row1.add("Remove");
        myModel.addRow(row1);

        row1 = new Vector<Object>();
        row1.add(new Date());
        row1.add("B");
        row1.add(new Double(8.4));
        row1.add("Remove");
        myModel.addRow(row1);

        row1 = new Vector<Object>();
        row1.add(new Date());
        row1.add("B");
        row1.add(new Double(5.1));
        row1.add("Remove");
        myModel.addRow(row1);

        row1 = new Vector<Object>();
        row1.add(new Date());
        row1.add("B");
        row1.add(new Double(6.2));
        row1.add("Remove");
        myModel.addRow(row1);
    }

    private class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private Vector<Vector<Object>> data;
        private Vector<String> colNames;
        private boolean[] _columnsVisible = {true, true, true, true};

        public MyTableModel() {
            this.colNames = new Vector<String>();
            this.data = new Vector<Vector<Object>>();
        }

        public MyTableModel(Vector<String> colnames) {
            this.colNames = colnames;
            this.data = new Vector<Vector<Object>>();
        }

        public void resetTable() {
            this.colNames.removeAllElements();
            this.data.removeAllElements();
        }

        public void setColumnNames(Vector<String> colNames) {
            this.colNames = colNames;
            this.fireTableStructureChanged();
        }

        public void addRow(Vector<Object> data) {
            this.data.add(data);
            this.fireTableRowsInserted(data.size() - 1, data.size() - 1);
        }

        public void removeRowAt(int row) {
            this.data.removeElementAt(row);
            this.fireTableRowsDeleted(row - 1, data.size() - 1);
        }

        @Override
        public int getColumnCount() {
            return this.colNames.size();
        }

        @Override
        public Class<?> getColumnClass(int colNum) {
            switch (colNum) {
                case 0:
                    return Date.class;
                case 2:
                    return Double.class;
                default:
                    return String.class;
            }
        }

        @Override
        public boolean isCellEditable(int row, int colNum) {
            switch (colNum) {
                default:
                    return true;
            }
        }

        @Override
        public String getColumnName(int colNum) {
            return this.colNames.get(colNum);
        }

        @Override
        public int getRowCount() {
            return this.data.size();
        }

        @Override
        public Object getValueAt(int row, int col) {
            Vector<Object> value = this.data.get(row);
            return value.get(col);
        }

        @Override
        public void setValueAt(Object newVal, int row, int col) {
            Vector<Object> aRow = data.elementAt(row);
            aRow.remove(col);
            aRow.insertElementAt(newVal, col);
            fireTableCellUpdated(row, col);
        }

        public void setColumnVisible(int index, boolean visible) {
            this._columnsVisible[index] = visible;
            this.fireTableStructureChanged();
        }
    }
    //
    private Action delete = new AbstractAction() {

        private static final long serialVersionUID = 1L;

        public void actionPerformed(ActionEvent e) {
            JTable table = (JTable) e.getSource();
            int modelRow = Integer.valueOf(e.getActionCommand());
            ((DefaultTableModel) table.getModel()).removeRow(modelRow);
            table.clearSelection();
        }
    };
} 
```

两者都返回相同的 GUI，具有相同的...

![在此处输入图像描述](../Images/ae5b4b65f3ab494820afbabb247c32f4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T08:59:14.323

充实我对这个问题的评论：

> 无需调整完整模型的可编辑性：创建另一个由原始过滤（按列）行填充的模型，使其他模型可编辑并在提交时让它将更改的值写回原始

用一些代码：

```
public static class ButtonDialogEditor extends AbstractCellEditor 
     implements TableCellEditor {
    // the columns to present for editing, in model coordinates
    public final int lastColumn;
    public final int firstColumn;
    // the row to present for editing, in model coordinates
    private int row;

    private DefaultTableModel model;
    private JDialog dialog;
    private boolean committed;
    private JButton editingComponent;

    public ButtonDialogEditor(int firstColumn, int lastColumn) {
       this.firstColumn = firstColumn;
       this.lastColumn = lastColumn;

       model = new DefaultTableModel(1, lastColumn - firstColumn + 1);
       JTable table = new JTable(model);
       table.putClientProperty("terminateEditOnFocusLost",true);
       dialog = new JDialog();
       dialog.setModal(true);
       dialog.add(new JScrollPane(table));
       dialog.add(new JButton(createOkAction()), BorderLayout.SOUTH);
       dialog.pack();
       editingComponent = new JButton(createShowDialogAction());
    }

    /**
     * Returns the cell value at column. Note that column
     * is in the model coordinate system of the source model.
     */
    public Object getValueAt(int column) {
        return model.getValueAt(0, column - firstColumn);
    }

    /**
     * Returns the row index of the edited row in 
     * model coordinates of the source table.
     */
    public int getModelRow() {
        return row;
    }

    /**
     * Creates and returns the action used for 
     * the editing component button.
     * 
     * Implemented to show the modal dialog and fire 
     * editingSotpped/canceled depending on the committed
     * flag
     */
    private Action createShowDialogAction() {
        Action action = new AbstractAction() {

            @Override
            public void actionPerformed(ActionEvent e) {
                // reset committed
                committed = false;
                dialog.setVisible(true);
                if (committed) {
                    fireEditingStopped();
                } else {
                    fireEditingCanceled();
                }
            }
        };
        return action;
    }

    /**
     * Creates and returns the action used for the dialog's
     * OK button.
     * 
     * Implemented to hide the dialog and set the
     * committed flag to true.
     */
    private Action createOkAction() {
        Action action = new AbstractAction("OK") {
            @Override
            public void actionPerformed(ActionEvent e) {
                dialog.setVisible(false);
                committed = true;
            }
        };
        return action;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value, boolean isSelected, int row, int column) {
        editingComponent.setText(value != null ? value.toString() : "");
        prepareDialog(table, row);
        return editingComponent;
    }

    /**
     * Update internal state to the row to edit. 
     */
    private void prepareDialog(JTable table, int row) {
        this.row = table.convertRowIndexToModel(row);
        for (int i = firstColumn; i <= lastColumn; i++) {
            model.setValueAt(table.getModel().getValueAt(this.row, i), 0, i - firstColumn);
        }
    }

    /**
     * Implemented to return the original value as 
     * given in the 
     */
    @Override
    public Object getCellEditorValue() {
        return editingComponent.getText();
    }

}

public static class ButtonRenderer implements TableCellRenderer {

    JButton button = new JButton();
    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        button.setText(value != null ? value.toString() : "");
        return button;
    }
}

// example usage
// source model is not editable except for the button column
final DefaultTableModel model = new DefaultTableModel(0, 3) {
    @Override
    public boolean isCellEditable(int row, int column) {
        return column == 0;
    }
};
for (int i = 0; i < 20; i++) {
    model.addRow(new Object[] {"Edit", i});
}
JTable table = new JTable(model);
table.getColumnModel().getColumn(0).setCellRenderer(new ButtonRenderer());
final ButtonDialogEditor cellEditor = new ButtonDialogEditor(1, model.getColumnCount() - 1);
// custom editor listener which writes back the edited values
// to the model on editingStopped.
CellEditorListener l = new CellEditorListener() {

    @Override
    public void editingStopped(ChangeEvent e) {
        for (int i = cellEditor.firstColumn; i <= cellEditor.lastColumn; i++) {
            model.setValueAt(cellEditor.getValueAt(i), cellEditor.getModelRow(), i);
        }
    }

    @Override
    public void editingCanceled(ChangeEvent e) {
        // nothing to do
    }
};
cellEditor.addCellEditorListener(l);
table.getColumnModel().getColumn(0).setCellEditor(
        cellEditor); 
```

# c++ - 内部编译器错误消息是什么意思，我该怎么办？

> ID：12405606
> 
> 赞同：4
> 
> 时间：2012-09-13T11:50:28.030
> 
> 标签：c++, compiler-errors, compilation, internal-compiler-error

我试图用 pgCC 编译器编译我的 C++ 程序，它使用 MPICH 和 NAG C 库（我使用 NAG 生成随机数）。

但是，编译器给了我以下错误消息：

```
PGCC-S-0000-Internal compiler error. linearize: bad ili #:       0 (mpisim.C: 225)
PGCC-S-0000-Internal compiler error. gen_aili: unrec. ili opcode:       0 (mpisim.C: 225)
PGCC-S-0000-Internal compiler error. linearize: bad ili #:       0 (mpisim.C: 266)
PGCC-S-0000-Internal compiler error. gen_aili: unrec. ili opcode:       0 (mpisim.C: 266)
PGCC/x86 Linux 12.4-0: compilation completed with severe errors 
```

我不知道这些消息指的是什么。有人可以向我解释他们的意思吗？

有没有办法让我找出有问题的线的位置？`255`in是否`(mpisim.C: 225)`指示我的代码中的行号？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T11:54:55.217

内部编译器错误是编译器中的错误。除了向编译器供应商提出问题之外，您无能为力。

通常，当您尝试编译不正确的代码时会发生 ICE，但也完全可以想象编译器会阻塞有效的 C++。该语言非常复杂，很难测试所有可能组合中的每个可能特性。

如果您设法找出导致崩溃的代码行，您可以尝试用更简单的术语重写它（例如，通过引入额外的局部变量或 typedef）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:55:06.153

它们表明编译器本身发现了错误或不一致。类似于`assert`在您的代码中使用。

如果你编译了一些非常奇怪和非法的代码，可能只是编译器团队没有测试这个用例。否则很可能是编译器有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-11T03:52:31.573

当我下载一堆资产时，有时会发生这种情况。任何事情都可能出错，两个脚本共享一个命名空间，或者脚本不是您正在使用的 Unity 版本。

我的建议是：

1) 检查所有脚本，看看是否有任何重复的名称，确保将它们组织在文件夹中以简化操作！

和

2）如果您根本不知道发生了什么，请开始删除您从最新到最旧下载的资产文件夹。每次删除资产文件夹时都要检查一下，看看你的错误是否改变。一旦您找到了导致问题的脚本，只需找出原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-01T10:23:14.300

如果您收到内部编译器错误，则可能是由于硬件故障。也许你的RAM有问题？尝试运行 memtest86。

# asp.net-mvc - /obj/debug 中断构建中的 TemporaryGeneratedFile_[guid]

> ID：12405619
> 
> 赞同：61
> 
> 时间：2012-09-13T11:51:09.730
> 
> 标签：asp.net-mvc, .net-4.5, stylecop

我在 obj/debug 中创建了 3 个临时文件：

例如

*   TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs
*   TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs
*   临时生成文件_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs

（即使在解决方案清洁后，指南似乎也没有改变）

我的构建失败了，因为：

> SA1633：文件没有头，头 Xml 无效，或者头不在文件顶部。

我不想关闭 StyleCop 规则。如何找出创建这些临时文件的原因？

该站点是一个 asp.net MVC 4 站点，有 5 个模型、4 个控制器、2 个类、2 个 aspx 网页和 1 个服务参考，在数字上似乎与 3 个文件不相符。

任何指针？

**编辑：**如果我将框架从 4.5 更改回 4，这些文件就会消失并且构建成功。

我的 StyleCop 版本是 4.4，我非常愿意找到一种方法让它忽略 obj/debug

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-24T14:37:26.607

我通过转到项目解决方案（其构建）给出了这个错误来解决了这个问题。

1.  右键单击项目并卸载项目。
2.  然后右键单击项目并编辑 .csproj 文件。
3.  查找这些临时（有问题的）生成的文件。（见示例代码）
4.  从 .csproj 文件中删除此文件引用。
5.  右键单击项目并加载回项目。
6.  重建解决方案。
7.  现在去就好了...

它们在 csproj 文件中看起来像这样：

```
<Compile Include="src\obj\Debug\TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs" />
<Compile Include="src\obj\Debug\TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs" />
<Compile Include="src\obj\Debug\TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs" /> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-14T09:17:41.840

在 StyleCop.Settings 文件的解析器块中，为这些文件添加一个条目：该值是一个正则表达式，因此可以使用更紧密的匹配 guid，但这些满足我现在的需要。

```
 <Parsers>
    <Parser ParserId="Microsoft.StyleCop.CSharp.CsParser">
      <ParserSettings>
        <BooleanProperty Name="AnalyzeDesignerFiles">False</BooleanProperty>
        <CollectionProperty Name="GeneratedFileFilters">
          <Value>\.g\.cs$</Value>
          <Value>\.generated\.cs$</Value>
          <Value>\.g\.i\.cs$</Value>
          <Value>TemporaryGeneratedFile_.*\.cs$</Value>
        </CollectionProperty>
      </ParserSettings>
    </Parser>
  </Parsers> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-23T09:23:55.373

带有“TemporaryGeneratedFile_”前缀的 3 个文件由最有可能通过链导入的 Microsoft.WorkflowBuildExtensions.targets 文件自动生成：

*   *.csproj -->
*   Microsoft.CSharp.targets -->
*   Microsoft.Common.targets -->
*   Microsoft.WorkflowBuildExtensions.targets

它们是在`$(IntermediateOutputPath)`MSBuild 属性指向的中间输出路径下生成的，通常类似于`obj\debug`. 处理有关这些自动生成文件的 StyleCop 警告/错误的一种方法是告诉 StyleCop 跳过`$(IntermediateOutputPath)`. 例如，在您的项目中包含以下项目：

```
<ItemGroup>
    <ExcludeFromStyleCop Include="$(IntermediateOutputPath)\**\*.cs" />
</ItemGroup> 
```

`ExcludeFromStyleCop`是 StyleCop.targets 文件识别的项目名称，用于在构建期间从分析中排除文件（至少对于 StyleCop 4.7）。双星`**`是用于在文件夹下递归搜索的 MSBuild 语法。

新项目可能会显示在 Visual Studio 的解决方案资源管理器中。如果这是不可取的，可以使用“可见”项目元数据将其隐藏：

```
<ItemGroup>
    <ExcludeFromStyleCop Include="$(IntermediateOutputPath)\**\*.cs" >
        <Visible>False</Visible>
    </ExcludeFromStyleCop>
</ItemGroup> 
```

如有必要，可以使用类似的方法来排除其他文件。我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-29T16:22:55.187

我最近在一个旧的 WebForms 项目中进行了一些代码更改后遇到了这个问题。我采取了以下步骤：

1.  关闭项目
2.  在文本编辑器中打开 .csproj 文件
3.  搜索“TemporaryGeneratedFile_”，发现有3个文件有问题
4.  删除这三个包括：

> ```
> <Compile Include="obj\Debug\TemporaryGeneratedFile_036C0B5B-1481-4323-8D20-8F5ADCB23D92.cs"/>
> <Compile Include="obj\Debug\TemporaryGeneratedFile_5937a670-0e60-4077-877b-f7221da3dda1.cs"/>
> <Compile Include="obj\Debug\TemporaryGeneratedFile_E7A71F73-0F8D-4B9B-B56E-8E70B10BC5D3.cs"/> 
> ```

5.  保存并重新打开
6.  重建并且没有进一步的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T16:27:09.777

我正在帮助一位同事，他在我们的主要 VS 解决方案中添加了一个新项目，并且遇到了同样的 3 个错误。我和他一起完成了上述建议的步骤，但没有成功修复它。在此之后，我发现他错过了我们在使用代码分析和 StyleCop 的解决方案中添加新项目时执行的步骤之一。他忘记将 Settings.StyleCop 文件添加到他的项目中 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-09T00:15:20.153

我最近突然遇到了同样的问题。

对我来说，我可以通过打开每个项目的 .csproj 文件来克服这个问题，然后删除以下行：

```
<Import Project="$(SolutionDir)\CodeAnalize\Microsoft.StyleCop.targets" /> 
```

重新打开解决方案后，它能够毫无错误地构建所有内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-16T14:33:29.930

我遇到了类似的问题并解决如下：

除了**在 obj 文件夹** 重建中调试之外，还删除**了 bin 文件夹中的调试，并且它有效**

# c# - 在 Windows Phone 7 中修改 Outlook 电子邮件签名

> ID：12405622
> 
> 赞同：1
> 
> 时间：2012-09-13T11:51:16.067
> 
> 标签：c#, windows-phone-7, outlook

是否可以通过代码更改和设置 windows phone 7 Outlook 中的电子邮件签名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:57:06.657

不幸的是，这是不可能的。实际上不存在用于更改系统设置的 API。

# ios - iOS6、shareSheet - iOS、xCode、Twitter、Facebook UIButton - 设计

> ID：12405628
> 
> 赞同：0
> 
> 时间：2012-09-13T11:51:37.540
> 
> 标签：ios, xcode, facebook, twitter, ios6

我正在寻找 Facebook 和 Twitter 设计按钮。我看到了一些具有漂亮按钮设计的应用程序（原始 CI）。这些按钮在任何地方都可用吗？它们应该看起来像 Facebook 和 Twitter 的默认 iOS 应用程序。

谢谢！

**更新**

“共享”视图控制器，就像在一些 iOS6 演示中显示的那样，不在新的 Ap 中，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:30:10.297

在这里您可以找到一些免费赠品：[http](http://dribbble.com/shots/362856-Facebook-Button-Freebie) ://dribbble.com/shots/362856-Facebook-Button-Freebie 或此处：http : [//dribbble.com/shots/162195-Facebook-Connect-Buttons-PSD](http://dribbble.com/shots/162195-Facebook-Connect-Buttons-PSD)或此处：[http ://dribbble.com/shots/170014-Sign-in-buttons-PSD](http://dribbble.com/shots/170014-Sign-in-buttons-PSD)

# c# - 从内存流中播放视频

> ID：12405635
> 
> 赞同：4
> 
> 时间：2012-09-13T11:52:34.230
> 
> 标签：c#, winforms, video, .net-3.5, memorystream

到目前为止找不到任何令人满意的答案...

我正在开发一个需要从数据库 BLOB 加载视频文件并在应用程序窗口中播放的 C# WinForms .NET3.5 应用程序。数据库是本地文件（不涉及服务器）。

我不认为将文件保存到硬盘驱动器是一个好的解决方案，因为它可能很耗时，而且我已经将文件保存在内存流中。

我需要能够播放尽可能多类型的视频格式（编解码器？）。包括divX、XVid、mpeg、avi、3gp等。

我正在寻找易于使用的工作代码示例或现有的第三方组件。

DirectShow 或 VLC 之类的建议几乎需要在视频渲染、过滤器、图形和其他方面拥有专业学位，除非有工作样本，否则这些建议是不可能的。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T18:30:26.047

没错，最流行的方法是使用 DirectShow，但在这种情况下，您必须构建图形等。如果您没有这方面的经验，开始使用 DirectShow 并不容易。

另一个非常丰富的想法（以及您所写的“一般想法”）是挂钩文件调用，如 ReadFile 和 SetFilePointer 并将这些调用转换为 memorystream 的方法（Read，Seek），因此调用代码会认为它适用于真正存在的文件.

例如，这里有一篇文章展示了如何播放逐块加密的视频，在不解密整个文件的情况下播放，并且不将解密的块放入磁盘： [http ://boxedapp.com/encrypted_video_streaming.html](http://boxedapp.com/encrypted_video_streaming.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:38:20.590

您应该能够通过在 VLC 上编写一个瘦包装器（我假设您在托管代码中）然后使用 invmem 和 imem 来做到这一点。可以在以下位置找到一些传递输入的示例： [here](http://forum.videolan.org/viewtopic.php?f=32&t=85451)和[here](http://forum.videolan.org/viewtopic.php?f=32&t=93842)

# c# - 如何以编程方式取消捕捉模式？

> ID：12405640
> 
> 赞同：1
> 
> 时间：2012-09-13T11:52:48.397
> 
> 标签：c#, windows-8

我是一个较新的 windows8 程序员。现在我想知道如何以编程方式取消快照模式。我知道我们不能以编程方式转换快照模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T12:03:30.607

当您处于捕捉模式时，您可以调用该`ApplicationView.TryUnsnap()`方法尝试取消捕捉。这将返回一个`Boolean`指定调用是否成功。（[MSDN 参考](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryunsnap.aspx#Y0)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:13:22.527

不应该建议 UI 明智，只需创建一个具有返回原始完整大小按钮的页面。

将用户限制为仅一种模式会使他/她认为它已损坏。

# jquery - 在 iframe 内触发点击 - jquery 对话框按钮 - 仅在 Safari 中

> ID：12405641
> 
> 赞同：0
> 
> 时间：2012-09-13T11:52:57.150
> 
> 标签：jquery, iframe, safari, jquery-dialog

我有一个 JQuery 对话框，它显示一个 IFrame 和一个“发送”按钮（位于 IFrame 之外）

在定义对话框时，我正在创建一个按钮，该按钮应该在 IFrame 内的按钮中触发单击事件：

```
$(dlg_id).dialog({
buttons:
{ 
  "Send": function() { 
      $(dlg_id).contents().find('#btn_in_iframe').trigger('click'); 
  }
} 
```

});

一切都在 IE、Chrome 和 FireFox 中运行

在 Safari 5.1.7 (7534.57.2) 中未触发点击事件

我只需要在 IFrame 中调用一个函数，不需要是触发事件

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:30:58.563

您可以使用 contentWindow 访问 iframe 的上下文（这在 Safari 中对我有用）： `document.getElementById('IframeId').contentWindow.anotherFunction()`

当然，iframe 源必须在 smae 域/协议上，否则那就另当别论了。

# coldfusion - 冷融合请求超时

> ID：12405642
> 
> 赞同：2
> 
> 时间：2012-09-13T11:52:57.997
> 
> 标签：coldfusion

我有一个执行长时间运行查询的 ColdFusion 模板。我已将请求超时从 3600 增加到 6600，但我的模板继续超时。我想再次将请求超时从 6600 增加到 9600，但在这样做之前我想知道增加请求超时是否有任何缺点或风险？

基本上，我的 cfm 文件所做的是。它必须从表中获取记录并将它们插入到 Excel 工作表中。该表包含大约 30,000 条记录。cfm 文件一次获取每 1000 条记录并将它们插入 Excel，然后再获取下 1000 条，依此类推。为了完成整个过程，它有时会因为超时问题而突然停止。所以在我增加“requesttimeout”之前我想知道，如果我极大地增加 requesttimeout 会不会有任何问题（内存使用、性能）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:23:50.967

在需要的地方增加超时很好。您应该使用 cfsetting requestTimeOut="xxx" 在需要的地方增加超时，而不是在管理员中增加它，因为这会影响所有模板。

缺点是有一个线程池来处理请求，当一个线程正在处理您的长时间运行的请求时，它不能做其他事情。只要您确信长时间运行的请求一次只能由一两个人运行，这很好，但如果有很多人可以运行它，就会出现问题。如果 CF 将同时运行 8 个请求并且所有 8 个请求都在处理您的长时间运行的请求，那么您的站点实际上处于离线状态。CF 会将请求排队到某个点，但您一开始不希望进入此状态。

我曾在应用程序中工作过，其中只有后台管理员任务可能需要长达一个小时，但我们确信不会再有 2 个人会运行它们。

您还可以考虑使用[cfthread](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-75a8.html)以在不阻塞页面的情况下运行查询，但是向用户提供反馈会更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:26:43.253

我认为如果我们能更好地了解情况会有所帮助。这是否类似于夜间运行的工作？或者这是用户可能导航到的页面，在他们等待时会生成报告？给我们一些关于你的页面在做什么的基本信息。

此外，还有不同的方法可以增加请求超时；系统范围通过管理员或特定页面通过`<cfsetting requestTimeOut="">`标签。你增加哪一个？我建议您不要增加系统范围的设置，但可以在需要时增加页面级别设置。

`<cfquery>`该标签还有一个超时属性。你在用那个吗？

你能告诉我们`<cfquery>`是超时还是在cfquery之后和数据输出期间发生超时？

我还建议尝试尽可能优化您的查询。是否可以设置索引（如果尚未设置）？您真的只需要返回记录的子集吗？

也许您可以将这一页拆分为多个页面，每个页面运行得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:34:05.737

如果发起请求的用户不需要等待结果（即一天结束或隔夜报告），而不只是增加超时限制，那么我将使用超时设置为 0 的 cfthread（从不out) 并让它在后台运行直到它完成，或者设置一个极长的超时时间，比如 1 小时。我还将使用 cflock 来防止线程能够多次处理，否则您可能会因许多繁重的线程而使系统停止运行。

阅读这个[-docs-](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7f6a.html)看看你的想法

# html - 浮动 - 如何防止缠绕

> ID：12405644
> 
> 赞同：3
> 
> 时间：2012-09-13T11:53:05.237
> 
> 标签：html, css, css-float

我不知道如何命名我的问题，所以请看下图：

```
+------------+
|            | <li>lorem ipsum dolor blah blah
|   image    | blah blah blah blah blah blah
|            | blah blah blah blah blah </li>
|            | <li> Blah blah blah blah blah
+------------+ blah blah blah blah blah blah
               blah blah blah blah blah blah
               blah blah blah blah blah </li>
<li>Lorem ispum dolor blah blah blah blah blah
blah blah blah blah blah blah blah blah blah
blah blah blah blah blah</li> 
```

基本上，我希望文本环绕图像，但如果段落/列表的第一行在图像旁边，我希望整个项目与第一行对齐，即使图像下方有空间要填充。

图像有`float: left;`

尝试使用`display`,`widows`和`orphans`属性，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:13:56.570

试一试：

**HTML**

```
<div class="some-container">
    <img src="http://lorempixel.com/100/100/" />
    <ul>
        <li>FIRST ipsum dolor blah blah blah blah blah blah blah blah blah blah blah blah blah </li>
        <li>SECOND blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </li>
        <li>THIRD ispum dolor blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</li>
        <li>FOURTH ipsum dolor blah blah blah blah blah blah blah blah blah blah blah blah blah </li>
        <li>FIFTH blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </li>
        <li>SIXTH ispum dolor blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</li>
    </ul>
</div>​ 
```

**CSS**

```
img {
    float: left;
}
ul, li {
    display: inline;
}
li:after {
    content: "\A";
    white-space: pre;
}​ 
```

**演示**

[http://jsfiddle.net/aymansafadi/gPmag/](http://jsfiddle.net/aymansafadi/gPmag/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:29:58.277

```
<!DOCTYPE html>
<html>
<head>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <title>Sample Page</title>

  <style type="text/css" media="screen">
    .clearfix {
      *zoom: 1;
    }
    .clearfix:before,
    .clearfix:after {
      display: table;
      content: "";
      line-height: 0;
    }
    .clearfix:after {
      clear: both;
    }
  </style>
</head>
<body>
  <div style ="width:600px;">
    <img src="http://sphotos-e.ak.fbcdn.net/hphotos-ak-ash4/s480x480/253488_482594598432035_2073442784_n.jpg" style="position: absolute; left: 0; width: 100px;"/>
    <div style="position: absolute; left: 340px;">
    <li>lorem ipsum dolor blah blah
     blah blah blah blah blah blah
     blah blah blah blah blah </li>

     <li> Blah blah blah blah blah
     blah blah blah blah blah blah
                   blah blah blah blah blah blah
                   blah blah blah blah blah </li>
    <li>Lorem ispum dolor blah blah blah blah blah
    blah blah blah blah blah blah blah blah blah
    blah blah blah blah blah</li>
    <li>lorem ipsum dolor blah blah
     blah blah blah blah blah blah
     blah blah blah blah blah </li>

    </div>
    <div class="clearfix">&nbsp;</div>
  </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:28:15.380

我无法让它在纯 CSS 中工作，所以我使用了一些 Javascript：

```
var $img = $("img");
var imageBottom = $img.position().top + $img.height();
var desiredMargin = $img.position().left + $img.width();

$("li").each(function(){
    if ($(this).position().top < imageBottom)
    {
        $(this).css("margin-left", desiredMargin);
    }
}); 
```

工作示例在这里：http: [//jsfiddle.net/yVnNr/](http://jsfiddle.net/yVnNr/) 缺点是页面加载后布局重新流动（除非在代码中指定了图像尺寸）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:13:45.670

试试[这个](http://jsfiddle.net/mahsa_999/zhAG2/)

```
<img src="http://i44.tinypic.com/5pfk05.jpg"/>
<ul>
    <li>lorem ipsum dolor blah blah
      blah blah blah blah blah blah
      blah blah blah blah blah </li>
    <li>lorem ipsum dolor blah blah
      blah blah blah blah blah blah
      blah blah blah blah blah </li>
    <li>lorem ipsum dolor blah blah
      blah blah blah blah blah blah
      blah blah blah blah blah </li>

</ul>

img
{
   width:200px;
   height: 200px;
   float: left;
   margin: 10px;
}

ul{
   margin: 15px ;
} 
```

# java - 如何在 SVN 中自动签入由 maven build 生成的文件？

> ID：12405645
> 
> 赞同：0
> 
> 时间：2012-09-13T11:53:07.667
> 
> 标签：java, svn, maven, build, jenkins

我在 Jenkins 中构建我的项目，并在构建过程中生成一些数据库文件。

最后应该在 SVN 中检查它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:00:16.793

您应该检查 maven-scm-plugin。特别是目标检查：

[http://maven.apache.org/scm/maven-scm-plugin/checkin-mojo.html](http://maven.apache.org/scm/maven-scm-plugin/checkin-mojo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:04:14.713

如果您正在使用`ant`已经`<svn>`定义了任务，您可以使用它们

快速查找[http://imwill.com/svntask-examples-for-apache-ant/#.UFHKho3ibpo](http://imwill.com/svntask-examples-for-apache-ant/#.UFHKho3ibpo)

Maven 提供`SCM`插件来与多个源版本控制系统一起工作。您可以查看它们一次。

# asp.net-mvc-3 - 如何将选定选项的参数发送到 MVC 中的控制器？

> ID：12405649
> 
> 赞同：2
> 
> 时间：2012-09-13T11:53:17.217
> 
> 标签：asp.net-mvc-3

您能帮我如何将选定选项的参数发送到控制器吗？这是我的看法：

```
<select>
   @foreach(var item in Model.City)
   {      
      <option>@Html.DisplayFor(x => item.Name)</option>

   }
</select> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T12:01:34.690

所以，在你看来，你会有类似的东西：

```
@model MyModel

@using(Html.BeginForm()) {

  <select id="City" name="City">
    @foreach(var c in Model.City)
    {
      <option value="@c.Id">@c.Name</option>
    }
  </select>

  <input type="submit" value="Post data to controller" />

} 
```

在您的控制器中，您所要做的就是执行一个名称相同但签名不同的操作：

任何一个：

```
[HttpPost]
public ActionResult Edit(string City) { ... } 
```

或者你可以通过整个模型

```
[HttpPost]
public ActionResult Edit(MyModel model) { 
  string city = model.City;
} 
```

* * *

但是有这样的问题，**我建议**你花一些时间学习 PluralSight 的免费 ASP.NET 课程，你可以在 ASP.NET 官方网站上找到：

**免费提供的课程**：

*   对于 ASP.NET**网页**：[http ://www.asp.net/web-pages](http://www.asp.net/web-pages)
*   对于 ASP.NET **WebForms**：[http ://www.asp.net/web-forms](http://www.asp.net/web-forms)
*   对于 ASP.NET **MVC**：[http ://www.asp.net/mvc](http://www.asp.net/mvc)

*课程在每个页面的右侧边栏中*

来自**斯科特·汉塞尔曼**：

*   [**选择**正确的编程模型](http://www.asp.net/web-forms/videos/how-do-i/choosing-the-right-programming-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:06:00.307

看起来您缺少表单 html 助手。试试这个（如果您需要指定不同的 ActionResult，它假定您将转到 BeginForm 助手上阅读的 Controller/Index 操作）：

```
@using (Html.BeginForm())
    <select>
    @foreach(var item in Model.City)
    {

        <option>@Html.DisplayFor(x => item.Name)</option>    
    }
    </select>

    <br />

    <input type="submit" value="Search" />
} 
```

与其遍历 Model.City，不如查看另一个 Html 助手，例如 Html.DropDownList。

# java - 我在哪里可以找到有关使用 Lucene 和 Compass 的有用信息？

> ID：12405650
> 
> 赞同：0
> 
> 时间：2012-09-13T11:53:19.387
> 
> 标签：java, lucene, compass-lucene

我正在学习 Lucene 和 Compass（Compass 是因为我正在处理的代码很旧），并且我正在尝试从哪里开始（甚至从什么开始阅读）。Lucene in Action 太旧了，代码甚至没有运行，所以没用。如果我要使用 Compass，我也不知道是否应该阅读大量有关 Lucene 的信息？

我在哪里可以找到关于 Compass 的好文章？该文档是 Lucene 中非常技术性和预期的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:49:36.497

`Development on Compass was stopped around 2010`，既然你在学习，你应该投资学习[Elastic Search](http://www.elasticsearch.org/)而不是 Compass。Elastic Search 是由创建 Compass 的同一个人创建的，因为 Compass 不是一个可扩展的解决方案，因此开发停止了，他创建了 Elastic Search。

Elastic Search 的核心依赖于 Lucene。[弹性搜索指南](http://www.elasticsearch.org/guide/)

[Lucene In Action - 2010 年第 2 版](https://rads.stackoverflow.com/amzn/click/com/1933988177)是您在 Lucene 上可以找到的最佳权威信息。除非您想了解 Lucene 发生的最新情况，否则这本书是您最好的选择，它涵盖了您可能需要入门的 99% 以上。

您也可以考虑[Apache Solr](http://lucene.apache.org/solr/)。随着最新的 4.0 版本 Lucene & Solr 成为一个专注于云和分布式搜索的单一项目。

检查这个[Solr 与 ElasticSearch](https://stackoverflow.com/questions/10213009/solr-vs-elasticsearch)。

# android - 创建支持多个 API 级别的 Android 应用程序

> ID：12405652
> 
> 赞同：3
> 
> 时间：2012-09-13T11:53:42.180
> 
> 标签：android, api

我将创建一个支持多个 API 级别的 Android 应用程序。我搜索了 Android Developers 网站，了解到这是按如下方式完成的：

```
if (android.os.Build.VERSION.SDK_INT >= 11) 
{
  // Use APIs supported by API level 11 (Android 3.0) and up
} 
else 
{
  // Do something different to support older versions
} 
```

以上是在Java文件中使用的，但是XML文件呢？我正在使用一些 Android 4.0 标签。

我也是一名 iOS 开发人员。在 iOS 中，我总是以编程方式设计 UI。在 Android 应用程序中哪个更好：以编程方式创建应用程序，就像我为 iOS 应用程序所做的那样，或者通过使用 XML 文件。

Android UI 设计不如 iOS UI 设计好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T11:56:56.793

除了文件夹之外，您的 res 目录中`layout-v11`还可以有不同的子文件夹，例如. 然后，如果您正在运行 API 14，您的应用程序将首先尝试从 中获取所需的 xml 文件，然后才从目录中获取。这同样适用于目录下的其他文件夹。`layout-v14``layout``layout-v14``layout``res`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:00:25.120

您可以尝试支持 android 库[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)，它可以让您在较旧的 SDK 中实现许多类，或者[ActionBarSherlock](http://actionbarsherlock.com)，它可以让您在具有 API LEVEL 的设备中实现操作栏 < 11 并附带了很多片段示例。

# sql - SQL：使用分隔符值拆分字符串

> ID：12405653
> 
> 赞同：0
> 
> 时间：2012-09-13T11:53:43.740
> 
> 标签：sql, database, string, oracle-sqldeveloper

SQL 新手。使用 oracle sql developer 版本 3.1.07。有什么方法可以分隔包含如下字符串的字符串列的元素：

```
dublin.ie;montreal.com;paris.com 
```

我想根据它们拆分它们，`;`以便我可以单独操作它们（并且对表格的每一行都这样做）。这是因为我想删除所有以`.com`但不影响其余部分的内容。

我想使用最基本的 sql，因为我是新手，而且我使用的是相当旧的版本。

有任何想法吗？再次感谢你们。到目前为止，帮助很大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:49:16.987

我会说该表的结构很糟糕-每个域都应该有一行。对于初学者来说，这将使解决方案变得非常困难。

您需要一段 sql 来为存储在 ; 中的每个域创建一行。分隔列表。

所以都柏林.ie;montreal.com;paris.com;bristol.uk

变成：-

```
dublin.ie
montreal.com
paris.com 
bristol.uk 
```

然后将没有 .com 的行绑定回单行，以获得

```
dublin.ie; bristol.uk 
```

我有一个类似的问题 - 我有一个包含逗号分隔国家代码的字段。我为想要的国家名称工作的报告用户。我有一个包含国家代码和国家名称的 COUNTRY 表，但逗号分隔的列表不会加入它，因为它有“GB，FR，IT”，其中国家表有“GB”代表“英国”等等在。

我通过为每个逗号分隔值创建一行（在内存中）来解决这个问题，将这些行连接到 COUNTRY 表，返回国家/地区名称，然后将国家/地区名称绑定回一行，如下所示：-

“英国、法国、意大利”。

这是我使用的代码 - 但它不适合初学者。您可能想尝试使用 REPLACE 和 INSTR 和 SUBSTR，但您需要提前知道每个字段包含多少条目，否则您可能需要使用 PLSQL 在循环中工作。

如果我是你，我会要求 DBA（如果可能的话）正确地构造数据，以便字段包含原子值，而不是值数组。

```
SELECT ROW_SPLIT.CONTRACT_ID,
    WM_CONCAT(ROW_SPLIT.COUNTRY_NAME) AS COUNTRY_LIST
  FROM
    (SELECT PQ.ID AS CONTRACT_ID,
      PQ.COUNTRY_CODE,
      COUT.TEXT AS COUNTRY_NAME
    FROM
      (SELECT ID,
        extract(value(d), '//row/text()').getStringVal() AS COUNTRY_CODE
      FROM
        (SELECT ID,
          XMLTYPE('<rows><row>'
          || REPLACE(EXCLUDED_NATIONALITIES, ',', '</row><row>')
          || '</row></rows>') AS xmlval
        FROM PROPERTY_CONTRACT
        ) x,
        TABLE(xmlsequence(extract(x.xmlval, '/rows/row'))) d
      ) PQ
    JOIN COUNTRY C
    ON C.CODE = PQ.COUNTRY_CODE
    LEFT OUTER JOIN TEXT COUT
    ON C.CODE         = COUT.CODE
    AND COUT.CATEGORY = 'COUNTRY'
    AND COUT.LANGUAGE = 'en'
    ORDER BY PQ.ID,
      COUT.TEXT
    ) ROW_SPLIT
  GROUP BY ROW_SPLIT.CONTRACT_ID; 
```

# java - 在 Java 中检查名称服务器的 dns 查找

> ID：12405654
> 
> 赞同：1
> 
> 时间：2012-09-13T11:53:47.730
> 
> 标签：java, http, dns

给定一个域和一个名称服务器 ip，我想知道该名称服务器在哪里解析 java 中的 IP，我该如何实现？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T12:07:48.517

你至少有两个选择：

如果您的代码必须在任何 VM 上运行，则必须使用众多可用的 Java DNS 库之一。谷歌搜索“java dns library”会给你很多选择。

如果您的代码只在 Sun/Oracle VM 上运行，您可以使用专有的 JNDI DNS 提供程序，如下所示：

```
Hashtable<String, Object> env = new Hashtable<String, Object>();
env.put("java.naming.factory.initial", "com.sun.jndi.dns.DnsContextFactory");
env.put("java.naming.provider.url",    "dns://<your DNS server>");

DirContext ictx = new InitialDirContext(env);
Attributes attrs = ictx.getAttributes("www.heise.de", new String[] {"A", "AAAA"});

NamingEnumeration<? extends Attribute> e = attrs.getAll();
while(e.hasMoreElements()) {
    Attribute a = e.next();
    System.out.println(a.getID() + " = " + a.get());
} 
```

此示例将查询指定的 DNS 服务器以获取主机 www.heise.de 的所有 A 和 AAAA 记录：

A = 193.99.144.85

AAAA = 2a02:2e0:3fe:100::7

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:59:37.860

如果您需要查询特定的名称服务器以查看它是如何响应的，您可以使用[JNDI 接口](http://docs.oracle.com/javase/1.5.0/docs/guide/jndi/jndi-dns.html)。

# c++ - 从 Rcpp 中的包装方法返回自定义对象

> ID：12405655
> 
> 赞同：15
> 
> 时间：2012-09-13T11:53:47.570
> 
> 标签：c++, r, module, rcpp

我对 Rcpp 模块有以下问题：假设我在 Rcpp 模块中有两个类

```
class A {
  public:
    int x;
};

class B
  public:
    A get_an_a(){
      A an_a();
      an_a.x=3;
      return an_a;
    }
};

RCPP_MODULE(mod){
  using namespace Rcpp ;
  class_<A>("A")
   .constructor()
   .property("x",&A::get_x)
  ;
  class_<B>("B)
   .constructor()
   .method("get_an_A",&get_an_a)
  ;
} 
```

.

现在编译失败，因为它不知道如何处理 A 的返回类型。

我想我可以用 Rcpp::Xptr 做一些事情，但是，我无法将它连接到 Rcpp 为 A 类生成的 S4 结构。我实际上从 R 中的方法获得了一个外部指针对象。

是否有可能从第二类的方法中获取正确包装的对象？

谢谢，托马斯

[编辑]

根据 Dirk 的回答，我构建了一个可以创建包装的 S4 对象的包装器：

```
template <> SEXP wrap(const A &obj) { // insprired from "make_new_object" from Rcpp/Module.h
  Rcpp::XPtr<A> xp( new A(obj), true ) ; // copy and mark as finalizable
  Function maker=Environment::Rcpp_namespace()[ "cpp_object_maker"];
  return maker ( typeid(A).name() , xp );
} 
```

不过，我不知道如何将对象作为方法/函数的参数返回。以下不起作用：

```
template <> A* as( SEXP obj){
  Rcpp::List l(obj);
  Rcpp::XPtr<A> xp( (SEXP) l[".pointer"] );
  return (A*) xp;
} 
```

那么如何从参数列表中作为 SEXP 提​​供的 S4 对象中获取指向 C++ 对象的外部指针呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T08:22:16.867

此功能已添加到 Rcpp 0.10.0

您的代码无法编译还有其他原因。下面的代码对我有用：

```
class A {
  public:
    A(int x_) : x(x_){}

    int x;
};

class B {
  public:
    A get_an_a(){
      A an_a(3);
      return an_a;
    }
};
RCPP_EXPOSED_CLASS(A)
RCPP_EXPOSED_CLASS(B)

RCPP_MODULE(stackmod){
  using namespace Rcpp ;
  class_<A>("A")
   .constructor<int>()
   .field("x",&A::x)
  ;
  class_<B>("B")
   .constructor()
   .method("get_an_A",&B::get_an_a)
  ;
} 
```

付出的代价是调用`RCPP_EXPOSED_CLASS`所有类的宏：

*   您的模块之一正在暴露
*   您想作为公开方法的结果或作为参数使用

有了这个，我得到：

```
> b <- new( B )
> b$get_an_A( )
C++ object <0x10330a9d0> of class 'A' <0x1006f46e0>
> b$get_an_A( )$x
[1] 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T12:07:11.427

*如果你为它写一个包装器*是可能的。那些不会像天上掉下来的吗哪，你需要通过提供它来帮助编译器，然后它就会被选中。

来自 RcppBDT 的简单示例：

```
template <> SEXP wrap(const boost::gregorian::date &d) {
    // convert to y/m/d struct
    boost::gregorian::date::ymd_type ymd = d.year_month_day();     
    return Rcpp::wrap(Rcpp::Date( ymd.year, ymd.month, ymd.day ));
} 
```

在这里，Boost 中的一个类被转换为一个 Rcpp 类（Date），然后返回（即使在那里我们也需要一个显式包装）。对于更复杂的类，您需要更复杂的转换器。

*编辑：*当然，您需要记住，任何可从 R 调用的东西仍然需要`SEXP foo(SEXP a, SEXP b, ...)`符合`.Call()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T11:21:27.863

好的，我想我明白了。但没有任何保证。根据 Dirk 的回答，我构建了一个可以创建包装的 S4 对象的包装器：

```
template <> SEXP wrap(const A &obj) { // insprired from "make_new_object" from Rcpp/Module.h
  Rcpp::XPtr<A> xp( new A(obj), true ) ; // copy and mark as finalizable
  Function maker=Environment::Rcpp_namespace()[ "cpp_object_maker"];
  return maker ( typeid(A).name() , xp );
} 
```

如果一个方法期望一个对象作为参数（这里是一个指向该对象的指针），那么下面的“as”包装器可能有用：

```
template <> A* as( SEXP obj){
  Rcpp::Environment e(obj);
  Rcpp::XPtr<A> xp( (SEXP) e.get(".pointer") );
  return (A*) xp;
} 
```

您当然也可以返回 *xp ，它允许将非指针作为参数，但这又会复制对象。

# android - OutOfMemoryError / 创建具有视图尺寸的背景图像

> ID：12405657
> 
> 赞同：0
> 
> 时间：2012-09-13T11:53:53.000
> 
> 标签：android

每隔一段时间，我就会收到一个如下所示的应用程序崩溃报告：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=18119KB, Allocated=15536KB, Bitmap Size=31040KB)
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:695)
at myPackage.MyApp.MyView.onSizeChanged(MyView.java:46) 
```

到目前为止，我无法重现此问题，也没有关于发生此问题的设备的信息。

“位图大小=31040KB”究竟是什么意思？我的应用程序真的在尝试创建 30MB 位图吗？我正在为自定义 SeekBar 组件创建一个背景图像，该组件应该具有相同的视图大小（9-patch 不适合我的用例）。这是产生错误的 SeekBar 的重写方法：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    if (w <= 0 || h <= 0)
        return;

    LayerDrawable ld = (LayerDrawable)getContext().getResources().getDrawable(R.drawable.colorpicker);

    Bitmap output = Bitmap.createBitmap(w,
                h, Config.ARGB_8888);

    // code that draws the image, left that out here

    BitmapDrawable bmD = new BitmapDrawable(output);
    ld.setDrawableByLayerId(android.R.id.background, bmD);
    setProgressDrawable(ld);

    super.onSizeChanged(w, h, oldw, oldh);
} 
```

第 46 行是创建位图的位置。视图横跨整个屏幕并具有 SeekBar 的默认高度，因此在最坏的情况下，位图可能需要大约 80KB ......任何想法可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:58:35.970

尺寸位图宽*高*4 = 尺寸。可能对你有帮助：[绘制位图](http://developer.android.com/training/displaying-bitmaps/index.html) 试试这是代码，可能对你有帮助；

```
for(int i=0; i<5; i++){
try{
   Bitmap output = Bitmap.createBitmap(w,
                h, Config.ARGB_8888);     
   break;
}catch(OutOfMemmoryException e){
  e.printStackTrace();
   w -=50;
   h -=50;//or another numbers;
}
} 
```

# android - 导入 ActionBarSherlock 时 Jar 不匹配

> ID：12405659
> 
> 赞同：13
> 
> 时间：2012-09-13T11:53:55.730
> 
> 标签：android, actionbarsherlock

我正在尝试创建一个 ActionBarSherlock 项目，我已经下载了该库并将其连接到我的项目。在“问题”窗口中，我看到以下消息：Jar mismatch！修复你的依赖。我怎么解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-13T11:56:04.840

Actionbarsherlock 里面有支持库。如果支持库也在您的主项目中，这可能会导致冲突。重命名支持库应该可以解决这个问题。

也就是说，如果支持库导致不匹配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T23:42:07.430

一个简单的右键单击 ActionBarSherlock 库项目然后

Android 工具 -> 添加支持库

将打开一个对话框，接受许可证并单击安装。

Eclipse ADT 将为您下载正确的支持库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T13:32:33.643

上述解决方案对我不起作用。但是，我删除了 ActionBarSherlock 的 libs 文件夹中支持的库，并手动将 android-support-v4 jar 文件从 android-sdk/extras/support/v-4 复制到相同的。然后我按照通常的步骤。有效 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T05:57:01.917

我可以解决这个问题：

1.  右键单击您的项目属性
2.  单击 Java 构建路径
3.  删除您在“root”中看到的 android-support-v4 jar
4.  右键单击“Android 工具”-> 修复项目...

# c# - 基于符合某些条件的集合中的项目进行数据绑定

> ID：12405664
> 
> 赞同：0
> 
> 时间：2012-09-13T11:54:02.677
> 
> 标签：c#, wpf, data-binding, collections

假设我有一个带有列表框和文本框的基本控件，其中列表框绑定到对象集合并具有基本数据模板

```
<DockPanel LastChildFill="True">
    <TextBlock DockPanel.Dock="Top">Book name</TextBlock>
    <TextBox x:Name="bookNameTextBox" DockPanel.Dock="Top" />
    <TextBlock DockPanel.Dock="Top">Authors</TextBlock>
    <ListBox ItemsSource="{Binding Authors}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</DockPanel>

public class Author : INotifyPropertyChanged
{
    public string Name { get; set; }
    public ObservableCollection<Book> Books { get; }
}

public class Book : INotifyPropertyChanged
{
    public string Name { get; }
} 
```

我想要做的是让列表框中项目的颜色根据该作者是否有任何与提供的名称匹配的书籍而改变，例如

```
Colour = author.Books.Any(b => b.Name.StartsWith(bookNameTextBox.Text)) ? Red : Black; 
```

我最初认为我可以使用 MultiBinding 和转换器来做到这一点，但是我无法弄清楚如何在将项目添加到图书集合中/从图书集合中删除时，或者当书名发生更改时如何更新绑定。

**我怎样才能做到这一点，以使颜色能够正确更新以响应可能影响我的逻辑的所有各种变化？**例如

*   任何书籍的名称发生变化
*   正在从集合中添加和删除的书籍
*   `bookNameTextBox`文本框中的文本发生变化

* * *

我的 MultiBinding 看起来像这样

```
<TextBlock.Style>
    <Style TargetType="TextBlock">
        <Style.Triggers>
            <DataTrigger Value="True">
                <DataTrigger.Binding>
                    <MultiBinding Converter="{StaticResource MyConverter}">
                        <Binding Path="Books" />
                        <Binding Path="Text" ElementName="bookNameTextBox" />
                    </MultiBinding>
                </DataTrigger.Binding>
                <Setter Property="Foreground" Value="Red" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</TextBlock.Style> 
```

我的转换器（实现了`IMultiValueConverter`）看起来像这样

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    var text = (string)values.First(v => v is string);
    var books = (IEnumerable<Book>)values.First(v => v is IEnumerable<Book>);
    return books.Any(b => b.Name.StartsWith(text));
} 
```

但是，如果我随后修改了任何书籍，或者添加了任何书籍，那么在以某种方式刷新绑定之前，列表项的文本颜色不会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:05:29.997

我认为您正在搜索的是[Binding Converter](http://wpftutorial.net/ValueConverters.html)，*每个*绑定项目都会收到一个调用，您可以在其中放置决策逻辑并返回适当的结果（在您的情况下为颜色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:34:37.403

我试图运行你的代码。

更改 bookNameTextbox.Text 正在调用转换器，结果是正确的。

您的代码中缺少某些部分。

你不打电话给`PropertyChanged`事件。您必须这样做，因为视图不会收到有关更改的通知。所以在设置你的属性后调用这个事件。

使用简单的绑定就足够了。我的意思是`ObservableCollection`当其中的项目正确发送道具更改通知时，保持更新视图。

在这种情况下，`MultiBinding`我们仍然需要一些东西——我认为这很奇怪。

根据这个[qa](https://stackoverflow.com/questions/5583830/multibinding-with-multivalueconverter-does-not-update)，当绑定在内部时`MultiBinding`-`ObservableCollection`在这种情况下 - 需要引发更改的事件。

因此，在修改 Books 集合后，我**为 Books 属性调用了 PropertyChanged 事件，**结果符合预期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:56:59.557

[基于这个](https://stackoverflow.com/questions/1675429/how-do-i-update-an-ivalueconverter-on-collectionchanged)StackOverflow 问题和[这个](http://gallery.expression.microsoft.com/CollectionAggregator/)链接的代码示例，我想出了一个我相当满意的解决方案。

我创建了一个额外的类`AuthorInfo`，它继承自该类`FrameworkElement`的一个实例并将其放在我的旁边`TextBlock`，就像这样

```
<DataTemplate>
    <StackPanel>
        <Local:AuthorInfo Collection="{Binding Books}" Text="{Binding Text, ElementName=_bookNameTextBox}" x:Name="_authorInfo" />
        <TextBlock Text="{Binding Name}">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Style.Triggers>
                        <DataTrigger Value="True" Binding="{Binding BookMatches, ElementName=_authorInfo}">
                            <Setter Property="Foreground" Value="Red" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
    </StackPanel>
</DataTemplate> 
```

此类具有要监视的集合和要查找的文本值的依赖属性，并公开`BookMatches`指示书籍是否与提供的字符串匹配的属性。这是我的触发器绑定到的属性。

为了确保在修改列表或列表中的项目时更新属性值，该类跟踪订阅和取消订阅各种属性更改事件 - 它看起来有点像这样

```
public class AuthorInfo : FrameworkElement
{
    public static readonly DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof(string), typeof(AuthorInfo), new PropertyMetadata(default(string), PropertyChangedCallback));

    public static readonly DependencyProperty CollectionProperty =
        DependencyProperty.Register("Collection", typeof (IEnumerable), typeof (AuthorInfo), new PropertyMetadata(default(IEnumerable), PropertyChangedCallback));

    private static readonly DependencyPropertyKey ValuePropertyKey =
        DependencyProperty.RegisterReadOnly("Value", typeof (bool), typeof (AuthorInfo), new PropertyMetadata(default(bool)));

    public static readonly DependencyProperty ValueProperty = ValuePropertyKey.DependencyProperty;

    public bool BookMatches
    {
        get
        {
            return (bool) GetValue(ValueProperty);
        }
        set
        {
            SetValue(ValuePropertyKey, value);
        }
    }

    public IEnumerable Collection
    {
        get
        {
            return (IEnumerable)GetValue(CollectionProperty);
        }
        set
        {
            SetValue(CollectionProperty, value);
        }
    }

    public string Text
    {
        get
        {
            return (string)GetValue(TextProperty);
        }
        set
        {
            SetValue(TextProperty, value);
        }
    }

    protected void UpdateValue()
    {
        var books = Collection == null ? Enumerable.Empty<Book>() : Collection.Cast<Book>();
        BookMatches = !string.IsNullOrEmpty(Text) && books.Any(b => b.Name.StartsWith(Text));
    }

    private void CollectionSubscribe(INotifyCollectionChanged collection)
    {
        if (collection != null)
        {
            collection.CollectionChanged += CollectionOnCollectionChanged;
            foreach (var item in (IEnumerable)collection)
            {
                CollectionItemSubscribe(item as INotifyPropertyChanged);
            }
        }
    }

    private void CollectionUnsubscribe(INotifyCollectionChanged collection)
    {
        if (collection != null)
        {
            collection.CollectionChanged -= CollectionOnCollectionChanged;
            foreach (var item in (IEnumerable)collection)
            {
                CollectionItemUnsubscribe(item as INotifyPropertyChanged);
            }
        }
    }

    private void CollectionItemSubscribe(INotifyPropertyChanged item)
    {
        if (item != null)
        {
            item.PropertyChanged += ItemOnPropertyChanged;
        }
    }

    private void CollectionItemUnsubscribe(INotifyPropertyChanged item)
    {
        if (item != null)
        {
            item.PropertyChanged -= ItemOnPropertyChanged;
        }
    }

    private void CollectionOnCollectionChanged(object sender, NotifyCollectionChangedEventArgs args)
    {
        if (args.OldItems != null)
        {
            foreach (var item in args.OldItems)
            {
                CollectionItemUnsubscribe(item as INotifyPropertyChanged);
            }
        }
        if (args.NewItems != null)
        {
            foreach (var item in args.NewItems)
            {
                CollectionItemSubscribe(item as INotifyPropertyChanged);
            }
        }
        UpdateValue();
    }

    private void ItemOnPropertyChanged(object sender, PropertyChangedEventArgs args)
    {
        UpdateValue();
    }

    private static void PropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args)
    {
        var aggregator = (AuthorInfo)dependencyObject;
        if (args.Property == CollectionProperty)
        {
            aggregator.CollectionUnsubscribe(args.OldValue as INotifyCollectionChanged);
            aggregator.CollectionSubscribe(args.NewValue as INotifyCollectionChanged);
        }
        aggregator.UpdateValue();
    }
} 
```

并不是说这个订阅/取消订阅业务很难，只是它有点繁琐——这样繁琐的更改通知内容就与表示逻辑分开了。重构它以在基类中包含所有更改通知也应该很容易，以便可以将该逻辑重新用于其他类型的聚合。

# javascript - 用于检查数组中是否存在元素的javascript自定义方法

> ID：12405667
> 
> 赞同：-1
> 
> 时间：2012-09-13T11:54:08.247
> 
> 标签：javascript, arrays

我是 javascript 的新手，我刚刚经历了一些数组方法并想使用它，我被困在我编写的这段代码中：

```
function customFindProperty(arrayToFind,requiredItem){

  var elementIndex = 0;

  function isRequiredItem(item){
    elementIndex++;
    return item==requiredItem;
  }

  elementFound = arrayToFind.some(isRequiredItem);

  if(elementFound){
    return arrayToFind(elementIndex);
  } else{
    alert("Element Not Found");
    return undefined;
  }
}
var myElement = customFindProperty([1,2,3,4,5],3); 
```

这给了我错误 **TypeError: Object is not a function**我想我什至没有遗漏任何分号。

附加信息： `typeof customFindProperty`返回“功能”

**注意** 不知道如何结束这个问题我找到了答案这是一个简单的输入错误我试图返回 arrayToFind(elementIndex) 而不是 arrayToFind[elementIndex]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:59:38.320

返回 arrayToFind[elementIndex]

你使用括号，就像你在调用一个函数一样。方形手镯用于阵列访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:59:47.450

`arrayToFind`- 这是一个功能吗？它不是，你试图调用它并且它失败了。

顺便说一下，您在这里使用它 - `arrayToFind.some`，我们可以假设它是一个数组，您需要用**方括号**对其进行索引以返回一个值，如下所示：

```
arrayToFind[elementIndex]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:59:54.357

仅供参考，您可以更进一步..

```
var arr = [1,2,3,4,5];

var itemToFind = 3;

var indexOfMyItem = arr.indexOf(itemToFind); // -1 would mean not found 
```

所以归结为 -

```
 return indexOfMyItem > -1 ? arr[itemToFind] : undefined; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:06:32.193

您使用括号而不是方括号进行数组访问。`arrayToFind(elementIndex);`应该是`arrayToFind[elementIndex];`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T12:06:46.077

我同意马特的观点。我认为问题是函数的名称

您的函数名称是`customFindProperty`并且您正在调用`customFindPropety`（注意 r 属性）。

如果你改变这个，下一个问题是'some'，因为arrayToFind不是一个函数

# iphone - 带方向的 Iphone 闪屏挑战

> ID：12405669
> 
> 赞同：1
> 
> 时间：2012-09-13T11:54:10.207
> 
> 标签：iphone, objective-c, xcode

在 iphone 启动画面上工作，我借助一些图像制作了自定义动画，这些图像将在横向模式下出现在我的启动画面上，然后我希望当我的第二个视图加载时它应该以纵向模式显示，但我无法实现这个，这是我的代码：

```
@interface SplashViewController : UIViewController
 {
 IBOutlet   UIImageView *ani;
  NSMutableArray *arr;
}
@property(strong,nonatomic)UIImageView *ani; 
@property(strong,nonatomic)NSMutableArray *arr;
-(void)switchView;
@end

#import "SecondView.h"
@implementation SplashViewController
@synthesize ani,arr;  

 - (void)viewDidLoad
{

arr = [NSMutableArray arrayWithObjects:[UIImage imageNamed:@"image_1.png"],
       [UIImage imageNamed:@"image_2.png"],[UIImage imageNamed:@"image_3.png"], 
       [UIImage imageNamed:@"image_4.png"],[UIImage imageNamed:@"image_5.png"],
       [UIImage imageNamed:@"image_6.png"],[UIImage imageNamed:@"image_7.png"],
       [UIImage imageNamed:@"image_8.png"],[UIImage imageNamed:@"image_9.png"],
       [UIImage imageNamed:@"image_10.png"],[UIImage imageNamed:@"image_11.png"],
       [UIImage imageNamed:@"image_12.png"],[UIImage imageNamed:@"image_13.png"],
       [UIImage imageNamed:@"image_14.png"],[UIImage imageNamed:@"image_15.png"],
       [UIImage imageNamed:@"image_16.png"],[UIImage imageNamed:@"image_17.png"],
       [UIImage imageNamed:@"image_18.png"],[UIImage imageNamed:@"image_19.png"],       
         [UIImage imageNamed:@"image_20.png"],nil];

   [ani setImage:[UIImage imageNamed:@"image_20.png"]];

ani.animationImages=arr;

ani.animationDuration=10;
 //   ani.animationRepeatCount=1.0;
[ani startAnimating];
[self performSelector:@selector(switchView) withObject:nil afterDelay:15.0];

          [super viewDidLoad];

// Do any additional setup after loading the view, typically from a nib.
}

-(void)switchView
{
 [ani stopAnimating];
 SecondView *sec=[[SecondView alloc]init];
[self.view addSubview:sec.view];

}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

我在第二个视图中使用了一个按钮以从中删除启动视图，因此当我们单击第二个视图上的按钮时，启动视图应该关闭，或者可以在加载第二个视图时执行相同操作，但我无法实现它

```
 -(IBAction)btn:(id)sender
{
 // UIViewController 
[self.view removeFromSuperview];
 }

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

注意：我不想为我的 Flash 使用 Default.png 图像视图但启动视图仍然出现在视图的背面..我只有模拟器要测试..有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:09:05.113

您可以在 switchView 方法中使用以下代码

```
-(void)switchView
{
 [ani stopAnimating];
 SecondView *sec=[[SecondView alloc]init];

AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

appDelegate.window.rootViewController = sec;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:30:19.480

你不应该在你的 spalshScreenController 中实现视图的切换：这不是它的责任，最好在你的`appdelegate` `applicationDidFinishLaunching`方法中做到这一点：

```
-(void)applicationDidFinishLaunching:(UIApplication *)application {
     splashViewController = [[SplashViewController alloc] initWithNibName:@"SplashView" bundle:nil];
     [window addSubview:splashViewController.view];
     [window makeKeyAndVisible];

  } 
```

并添加一个响应您按下的按钮的方法，这将呈现您的第二个控制器的视图。

```
-(void)onSlashScreenDone{

     [splashViewController.view removeFromSuperview];
     [window addSubview:[youOtherController view]];
     [window makeKeyAndVisible];

} 
```

`shouldAutorotateToInterfaceOrientation`通过实现该方法，允许您希望在第二个控制器中允许的方向。

看看这个`tut`：这很好地解释了如何在 ios 上制作启动画面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:25:23.013

*   尝试呈现第二个视图而不是添加子视图，因为添加子视图不会调用 shouldAutorotateToInterfaceOrientation 方法。它肯定会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:05:00.990

尝试在该特定类的 viewDidLoad 中使用以下内容

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications] ; 
```

# php - 如何在结帐页面上显示当前购物车产品的详细信息

> ID：12405673
> 
> 赞同：4
> 
> 时间：2012-09-13T11:54:35.110
> 
> 标签：php, opencart

大家好，

提前致谢。
我是opencart的新手，目前正在opencart中开发一个购物车，一切都很顺利，但我卡住了，请帮忙

我想访问 checkout.tpl 中当前添加的购物车项目以生成查询表单，因此我正在编辑 controller/checkout.php 并添加这些代码行以访问当前在购物车中的产品详细信息：

```
 //Product detail for Enquiry    
    $product_data = array();

    foreach ($this->cart->getProducts() as $product) {
        $option_data = array();

        foreach ($product['option'] as $option) {
            if ($option['type'] != 'file') {
                $value = $option['option_value'];   
            } else {
                $value = $this->encryption->decrypt($option['option_value']);
            }   

            $option_data[] = array(
                'product_option_id'       => $option['product_option_id'],
                'product_option_value_id' => $option['product_option_value_id'],
                'option_id'               => $option['option_id'],
                'option_value_id'         => $option['option_value_id'],                                   
                'name'                    => $option['name'],
                'value'                   => $value,
                'type'                    => $option['type']
            );                  
        }

        $product_data[] = array(
            'product_id' => $product['product_id'],
            'name'       => $product['name'],
            'model'      => $product['model'],
            'option'     => $option_data,
            'download'   => $product['download'],
            'quantity'   => $product['quantity'],
            'subtract'   => $product['subtract'],
            'price'      => $product['price'],
            'total'      => $product['total'],
            'tax'        => $this->tax->getTax($product['price'], $product['tax_class_id']),
            'reward'     => $product['reward']
        ); 
    }

    $data['products'] = $product_data; 
```

然后在 checout/checkout.tpl 中添加一行：

```
 foreach ($products as $product)
    {
        echo 'yes am getting products details';
    } 
```

**但仍然出现错误：未定义的变量：产品？**

我做对了吗？请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:01:52.423

您所做的几乎是正确的，但是您使用过

```
$data['products'] = $product_data; 
```

你应该放在哪里

```
$this->data['products'] = $product_data; 
```

# datetime - 从 timedelta 对象的 numpy.ndarray 中获取 days 属性

> ID：12405677
> 
> 赞同：1
> 
> 时间：2012-09-13T11:54:46.593
> 
> 标签：datetime, casting, numpy, python-2.7, timedelta

我有一个`numpy.ndarray`. 前两列是日期类型`datetime.datetime`。我想找到两者之间的月差（作为浮点数），我将其定义为（天数差）*（12/365）。所以我想访问通过减去两个日期时间返回的 timedelta 对象的 .days 属性。

我不能这样做：`(MyArray[1] - MyArray[0]).days`因为 Python 不知道期望 timedelta 对象。在 C# 中，我可能会尝试像这样进行转换：

```
((timedelta)(MyArray[1] - MyArray[0])).days 
```

在 Python (numpy) 中执行此操作的方法是什么？我需要循环吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:05:25.100

不幸的是，如果不迭代你的数组是不可行的`timedelta`

```
deltas = MyArray[1]-MyArray[0]
diff_days = np.fromiter((d.days for d in deltas), dtype=float, count=len(deltas)) 
```

在这里，我们使用`np.fromiter`with`count`参数来提高效率（它预先分配了数组的大小）。

请注意，新版本在此日期（2012/09）将不允许您`datetime64` `dtype`获得**类似**`days`.

# ruby-on-rails - 在 Rails 中搜索，也搜索非连续的单词

> ID：12405679
> 
> 赞同：0
> 
> 时间：2012-09-13T11:54:50.290
> 
> 标签：ruby-on-rails

我已经建立了一个基本的搜索功能，以便在我的数据库中搜索 3 个字段。搜索功能如下：

```
def self.search(search)
  if search
    @search_out = Array.new
    @prod_out = find(:all, :conditions => ['name ILIKE ? or supplier_code ILIKE ? or    ppd_code ILIKE ?', "%#{search}%", "%#{search}%", "%#{search}%"])
      @prod_out.each do |prod| 
        prod.quantities.each do |quants|
          @search_out << quants
        end
      end
      return @search_out
  else
    nil
  end
end 
```

现在它工作得很好，但我想添加一个选项，可以说我的数据库中有名称条目，即“杰克和吉尔电影”和“杰克和珍妮特电影”如果我在搜索字段中写：“杰克电影“，它将返回我这两个条目。

总体而言，能够在搜索字段中搜索单词并接收这些单词在其中不连续的条目。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:30:29.657

好吧，我实际上找到了一个非常简单的方法来做到这一点。

我在“查找”本身之前在我的函数中添加了这个：

```
@arr = search.split(' ')
@arr.collect! {|x| x + "%" }
search = @arr.join 
```

这样，我在每个给出通配符的单词之间添加一个“%”，所以现在我可以找到不一定连续的单词，因为它们之间有一个通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:15:11.367

我建议使用 Mysql 的 Regexp 功能

```
some_query.where("name REGEXP ?", "#{search.split(' ').join(".*")}") 
```

在正则表达式中使用它之前，您显然需要从搜索字符串中过滤掉正则表达式特殊字符。

[关于它的mysql文档](http://dev.mysql.com/doc/refman/5.5/en/regexp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:47:32.020

有一些功能齐全的搜索引擎，如[Solr](http://lucene.apache.org/solr/)和[Sphinx](http://sphinxsearch.com)，它们可以通过使用[Sunspot](http://sunspot.github.com)和[Thinking Sphinx](http://pat.github.com/ts/en/)等 gem 轻松集成到 Rails 应用程序中。Postgres 也有一个内置的搜索引擎，所以它可能更容易设置。这是更强大但同时更复杂的解决方案。

如果您想了解它们中的每一个，[Railscasts](http://railscasts.com/?tag_id=30)是一个很好的资源。

# sql - 我需要什么样的 JOIN 语句？

> ID：12405684
> 
> 赞同：0
> 
> 时间：2012-09-13T11:55:29.180
> 
> 标签：sql, tsql, join

我有两个表 PROCESS 和 STEP 以及里面的一些数据，如下所示。（他们有 1-N 的关系。）

```
PROCESS ->

ID START_TIME STARTED_BY STATUS
1  31/08/2012 User1      FINISHED
2  31/08/2012 User2      FINISHED
3  05/09/2012 User3      ACTIVE

STEP ->

ID PROCESS_ID START_TIME END_TIME   STATUS
1  1          31/08/2012 02/09/2012 FINISHED  
2  1          02/09/2012 03/09/2012 FINISHED    
3  1          03/09/2012 10/09/2012 FINISHED  
4  2          31/08/2012 04/09/2012 FINISHED  
5  2          04/09/2012 06/09/2012 FINISHED  
6  2          06/09/2012 09/09/2012 FINISHED  
7  3          05/09/2012 06/09/2012 FINISHED    
8  3          06/09/2012 NULL       ACTIVE 
```

我需要的是一个 JOIN，它将为我提供已完成流程的开始和结束时间，如下所示：

```
PROCESS_ID START_TIME END_TIME  
1          31/08/2012 10/09/2012  
2          31/08/2012 09/09/2012 
```

我需要写什么样的 JOIN 语句来完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:58:50.207

为避免拉入PROCESS_ID 3，需要先聚合过滤

HAVING 子句将确保您忽略表中 PROCESS_ID 3 的所有行`STEP`。一个简单的`WHERE END_TIME IS NOT NULL`或`WHERE .. 'FINISHED'`不会做的。在 JOIN 之后也不会聚合

```
SELECT
   P.PROCESS_ID,
   S.StartTime, S.EndTime
FROM
   PROCESS P
   JOIN
   (
   SELECT
      PROCESS_ID,
      MIN(START_TIME) AS StartTime,
      MAX(END_TIME) AS EndTime
   FROM
      STEP
   GROUP BY
      PROCESS_ID
   HAVING
      COUNT(*) = COUNT(END_TIME) -- only where we have no END_TIME nulls
   ) S ON P.PROCESS_ID = S.PROCESS_ID 
```

例如，还有其他带有 NOT EXISTS 的选项可以忽略 ACTIVE 行，但我在这里只使用 END_TIME 和 NULL 来忽略 STEP 行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:59:31.977

看起来您需要 an`INNER JOIN`并使用`MIN`and`MAX`函数。

```
SELECT PROCESS.PROCESS_ID, MIN(START_TIME), MAX(END_TIME)
FROM PROCESS
INNER JOIN STEP ON STEP.PROCESS_ID = PROCESS.PROCESS_ID
GROUP BY PROCESS.PROCESS_ID 
```

# android - 从 SD 卡而不是阵列获取图像，如何做到这一点？

> ID：12405693
> 
> 赞同：0
> 
> 时间：2012-09-13T11:55:54.997
> 
> 标签：android, arrays, image, sd-card

我了解了许多将图像存储在数组中的应用程序代码示例，如下面发布的示例代码。我总是从将输入作为这些愚蠢数组的网站获取代码，相反，最好将所有图像存储在手机的 SD 卡上，有人可以建议一些可以实现此目的的代码。我被困住了，真的需要一些帮助。或者至少有人可以指出我正确的方向。谢谢

```
 private Integer[] mImageIds = {
            R.drawable.pic01,
            R.drawable.pic02,
            R.drawable.pic03,
            R.drawable.pic04,
            R.drawable.pic05,
            R.drawable.pic06,
            R.drawable.pic07,
            R.drawable.pic08,
            R.drawable.pic09
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:07:34.733

您可以查询媒体存储以获取 sdcard 或特定文件夹中的图像列表。

[在此处](https://stackoverflow.com/a/12319614/328947)查看帖子及其链接。

# android - Android 非 Activity getSharedPreferences

> ID：12405699
> 
> 赞同：6
> 
> 时间：2012-09-13T11:56:07.913
> 
> 标签：android, android-intent

我从非Activity类读取getSharedPreferences以在播放器中设置播放列表时遇到问题...在我的活动中，我从edittext获取字符串变量以获取文件夹路径以处理音频文件...

```
 public class MainActivity extends Activity {

String ppp;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
    String PATH = getSharedPreferences("PATH", MODE_PRIVATE).getString("path", ppp);
    if (PATH == null){
        ..........
            ...........
        path_tv.setText("folder is undefined");
    }
    else {
        path_tv.setText("folder defined: /mnt/sdcard/" + PATH);
    }
    set_path.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if (path_edit.getText().toString().length() == 0){
                Toast.makeText(getBaseContext(), "folder is undefined", Toast.LENGTH_SHORT).show();
            }
            else {
            ppp = path_edit.getText().toString();
            getSharedPreferences("PATH", MODE_PRIVATE)
            .edit()
            .putString("path", ppp)
            .commit();
            File folder = new File(Environment.getExternalStorageDirectory() + "/" + ppp);
            boolean success = false;
            if (!folder.exists()) {
                success = folder.mkdir();
                if (success) Toast.makeText(getBaseContext(), ".....", Toast.LENGTH_SHORT).show();
            }
            String PATH = getSharedPreferences("PATH", MODE_PRIVATE).getString("path", ppp);
            path_tv.setText("........ /mnt/sdcard/" + PATH);
            path_edit.setText("");
            }
        }
    }); 
```

所以，在活动中，我可以在共享首选项中更改和保存 String 的值......但是我可以从公共课程中做到这一点......？欣赏任何例子...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T12:06:27.917

一种方法是使用[Application](http://developer.android.com/reference/android/app/Application.html)对象。这是一个肮脏的黑客，但有时还是很有帮助的。

首先，您的 Application 类中需要一个静态成员，因此：

```
public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
    }

    public static MyApplication getInstance() {
        return instance;
    }
} 
```

由于 Application 对象总是在任何活动被创建和运行之前创建，并且在整个应用程序生命周期中都被保留，因此您始终可以确保您将拥有一个合适的对象。

然后在您的代码中简单地调用`MyApplication.getInstance()`，您将拥有全局应用程序上下文。

记得`MyApplication`在清单中声明。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T12:16:27.120

您必须将上下文传递给您的类方法：

主要活动：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Test t = new Test("Show Preference: ");
        getSharedPreferences("PATH", MODE_PRIVATE)
        .edit()
        .putString("p", "preference")
        .commit();
        t.showToast(this.getApplicationContext());
    }
} 
```

测试类：

```
public class Test {
    private String s;

    public Test(String s){
        this.s = s;
    }

    public void showToast (Context c){
        String pref = c.getSharedPreferences("PATH", Context.MODE_PRIVATE).getString("p", "Error");
        Toast.makeText(c.getApplicationContext(), s + pref, Toast.LENGTH_LONG).show();
    }
} 
```

希望有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:02:39.107

您需要在类的构造函数中传递上下文，然后使用此上下文执行共享首选项的读取或写入操作，如

```
 public class xyx{
            public  xyx(Context context){
             this.context= context
             }

     Now use this context 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:02:30.040

添加 MainActivity.this。在 getSharedPreferences 之前

# android - android - 在上传到 Amazon AppStore 之前，Play 商店应用程序需要进行哪些更改

> ID：12405701
> 
> 赞同：2
> 
> 时间：2012-09-13T11:56:14.580
> 
> 标签：android, amazon-appstore

我是亚马逊应用商店的新手。我的应用程序已经存在于 Play 商店中。现在我想将我的应用上传到亚马逊应用商店。为此，我的应用程序编码是否需要任何更改以支持 kindle fire 系列并将我的应用程序上传到亚马逊应用商店？我试过了，但它让我感到困惑，任何人都可以帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:08:07.120

我将首先查看[常见问题解答](https://developer.amazon.com/help/faq.html)中的“提交应用程序：详细信息”和“提交应用程序：二进制信息” ，然后确保阅读整个内容。

# twitter - 计算用户未经身份验证的提及和直接消息的数量

> ID：12405702
> 
> 赞同：2
> 
> 时间：2012-09-13T11:56:15.217
> 
> 标签：twitter

有什么方法可以找出用户的提及和直接消息的总数？假设我的 Twitter 网名是“ABCD”。我想计算到目前为止我提到的总次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:11:05.967

不是没有身份验证。根据开发人员文档， [statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline "状态/用户时间线") “需要用户上下文”，据我所知，此数据不包含在其他任何地方。

# web-applications - How to set up offline manifest for a web app to run in Safari in iOS?

> ID：12405705
> 
> 赞同：1
> 
> 时间：2012-06-12T22:55:20.733
> 
> 标签：web-applications, safari, ios

I'm currently trying to set up an offline.manifest file for my web app to be used offline on an iOS device. For testing purposes I have a very simple HTML page that I'm trying to add to a home screen. I'm testing it on a live iPhone 4, but after the page is added to the home screen and I put the iPhone in the airplane mode and try to start my web app I get this error:

> "Turn Off Airplane Mode or Use Wi-Fi to Access Data"

and then if I click OK I get:

> "Cannot Open Web App Name" "Web App Name could not be opened because it is not connected to the Internet"

The following is added to the HTML file:

```
<!DOCTYPE html>
<html lang="en" manifest="scrts/offline.manifest"> 
```

and the offline.manifest is composed as such:

```
CACHE MANIFEST

../pics/bkgnd_iphn_settings.png
../pics/mbl_btn_fb.png
../pics/mbl_btn_twt.png
../pics/icon_57_57_bg.png
../pics/icon_72_72_bg.png
../pics/icon_114_114_bg.png
../pics/icon_144_144_bg.png
../pics/splash_320_460_bg.png
../pics/splash_768_1004_bg.png
../pics/splash_1004_768_bg.png 
```

I got all instructions on composing it from [here](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/OfflineApplicationCache/OfflineApplicationCache.html)

I also adjusted the .htaccess file to add this line:

```
AddType text/cache-manifest .manifest 
```

Any idea what am I not doing right?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:26:33.047

[This tutorial](http://www.html5rocks.com/en/tutorials/appcache/beginner/) is pretty good and if your pages are generated dynamically, you may use a .htaccess to rewrite `domain.com/script.html` to `domain.com/script.php` and then call the `*.html` from your app. This way the content on the device is saved as html and could be delivered statically. You can also add fallback urls/files to your manifest file which may be useful if your content is dynamically by default.

# jquery - Sticky Table Headers

> ID：12405709
> 
> 赞同：3
> 
> 时间：2012-09-13T11:56:37.120
> 
> 标签：jquery, sticky, tableheader

I am using this [plugin](http://jsfiddle.net/jmosbech/stFcx/) to achieve a sticky Table Header in my [Table](http://tommywebdesigner.com/Vision%20General.html). Actually as in the plugin example and in my page, the table Header disappear a bit later the last row in the table. I want my table header disappearing exactly when the last row is gone.There is a chance to achieve that?

 `* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:12:23.327

这是一个工作示例：[小提琴](http://jsfiddle.net/stFcx/1004/)

我改变的只是这一行的结尾：

```
if ((scrollTop > offset.top) && (scrollTop < offset.top + $this.height()-base.$clonedHeader.height())) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-16T17:19:42.720

这可以通过 div 表来实现。

```
.td.header {
  position: sticky;
  top:0px;
} 
```

看看这个[jsfiddle](https://jsfiddle.net/g0xkaufs/)的简单例子。

编辑：

直觉使您看起来需要添加

```
position: sticky; 
```

一次到表行，但事实并非如此。它必须添加到每个应该是标题单元格的表格单元格中，这样就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:00:22.703

您可以在 github 上添加错误报告：

[https://github.com/jmosbech/StickyTableHeaders/issues](https://github.com/jmosbech/StickyTableHeaders/issues)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T03:02:53.790

我知道这已经过时了，但我想贡献一些可能对某些人有所帮助的东西......

对于动态表（每个单元格的宽度是预先计算的），这个插件会弄乱标题行的宽度。

我做了一些更改，以帮助计算基于第一个 tbody 行的单元格中的每个 outerWidth 的宽度。

首先注释掉插件中当前的宽度计算：

```
base.updateWidth = function () {
        // Copy cell widths and classes from original header
        $('th', base.$clonedHeader).each(function (index) {
            var $this = $(this);
            var $origCell = $('th', base.$originalHeader).eq(index);
            this.className = $origCell.attr('class') || '';
            //$this.css('width', $origCell.width());
        });

        // Copy row width from whole table
        //base.$clonedHeader.css('width', base.$originalHeader.width());
    };

    // Run initializer
    base.init(); 
```

然后将以下内容添加到 base.toggleHeaders = function () {

```
// Set cell widths for header cells based on first row's cells
var firstTr = $this.children("tbody").children("tr").first();
var iCol = 0;
$(firstTr).children("td:visible").each(function() 
{
    var colWidth = $(this).outerWidth();
    console.log(colWidth.toString());
    var headerCell = $this.children("thead.tableFloatingHeader").children("tr").children("th:eq(" + iCol + ")");
    var firstRowCell = $this.children("tbody").children("tr:first").children("td:eq(" + iCol + ")");
    $(headerCell).outerWidth(colWidth);
    $(firstRowCell).outerWidth(colWidth);

    iCol++;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T15:00:19.900

我写了一个 jquery 库，使表格固定在页面顶部，并在最后一行消失时消失

这是一个小型 jquery 库函数，结合 ScrollFix [https://github.com/ShiraNai7/jquery-scrollfix](https://github.com/ShiraNai7/jquery-scrollfix)库提供固定在主菜单下方的标题表。该库支持同一页面上的多个表

[https://github.com/doska80/ScrollTableFixed](https://github.com/doska80/ScrollTableFixed)`

# java - How to store Action item in XML and get it via swing?

> ID：12405710
> 
> 赞同：0
> 
> 时间：2012-09-13T11:56:36.900
> 
> 标签：java, swing

I use xml for persisting data about UI elements. For example, I have a tag that stands for JButton, - for JMenuItem and I handle them with the help of Java SAX classes. But I want to build my UI element using Action like this:

Then I'll handle such tag and build what I want. But I have a problem with passing different amount of options to this Action object. In one case I want to pass name like:

```
putValue(NAME, "Element name"); 
```

In another case it will be:

```
putValue(NAME, "Some name");
putValue(SHORT_DESCRIPTION, "Tooltip");
putValue(MNEMONIC_KEY, new Integer('A')); 
```

In a code it will look like:

```
class NewAction extends AbstractAtion {
    public NewAction() {
            putValue(NAME, "Some name");
            putValue(SHORT_DESCRIPTION, "Tooltip");
            putValue(MNEMONIC_KEY, new Integer('A'));
    }
} 
```

But how to do it with xml? Are there any ideas on how to store and handle different amount of Action key:value args. in xml?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:16:13.367

May be this ?

```
<action type="NewAction">
    <property>
        <name>NAME</name>
        <value>Some name</value>      
    </property>
    <property>
        <name>SHORT_DESCRIPTION</name>
        <value>Tooltip</value>      
    </property>
    ...
</action> 
```

The action could be instantiated via reflection. However its works only if the action have no any dependencies. If it become too complex may be you could use [spring](http://www.springsource.org/).

# java - Intellij 使用 JAR 库导出 WAR 文件

> ID：12405711
> 
> 赞同：1
> 
> 时间：2012-09-13T11:56:39.487
> 
> 标签：java, grails, intellij-idea, war

我有一个项目`Intellij IDEA 11.1.3`可以运行并且非常棒。但是，现在我想将它导出到一个 WAR 文件，所以我去了`Module->Grails->run target-><test war>`，它构建了战争。是的，这太棒了。但是，当我使用该应用程序时，它找不到我在本地使用它时可以找到的 JAR 库。

我是否需要做任何特定的事情来使用该 JAR 中的类，比如将其添加到构建路径？如果是这样，我该怎么做？我真的需要将我的项目部署到我们的测试服务器。

感谢您的睿智建议和更好的智慧。

**编辑：**库位于 lib 目录中，我已将整个目录作为库添加到模块中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:58:38.197

您的第三方 JAR 文件必须位于 grails 项目的“lib”目录中。然后它们将被 grails war 命令打包。

# css - CSS Inheritance: Overriding parent CSS with a container?

> ID：12405713
> 
> 赞同：1
> 
> 时间：2012-09-13T11:56:46.450
> 
> 标签：css, twitter-bootstrap

I'm having an issue with style inheritance on a project I'm working on at the moment.

The project I'm working on involves me using HTML5, CSS3 other newer standards and features on a codebase that's 12 years old that hasn't been maintained all that well. *(For example before I'd even gotten to this issue no HTML5 elements or CSS3 styles could be applied in IE because there wasn't a DOCTYPE)*

Anyway, onto the problem at hand! The font styles from the main CSS file for the system I'm working in is overriding the styles of the content I'm working with. It's worth noting I'm using a custom compiled version of Twitter Bootstrap and using that for a lot of the new styles, it's been compiled so that all of the elements in the CSS have `.bootstrap-container` added as a prefix, then the new content I'm adding is then of course wrapped in a div like so: `<div class="bootstrap-container"> ... </div>`.

This works for the most part, but the font sizes still mess up on certain elements. Things that are explicitly defined in Bootstrap work fine, like the headers, but say I put a span inside of a header for whatever reason it will use `font-size` from the main CSS file.

The offending main CSS is:

```
body, td, tr, div, p, form, input, select, textarea, font {
    color: #333;
    font: 10px verdana, helvetica, sans-serif;
} 
```

The bootstrap CSS that works currently to override it is:

```
.bootstrap-container * {
    font-family: 'Helvetica Neue', Helvetica, sans-serif;
    font-size: 13px;
} 
```

However this of course poses another problem in that I then have to specify even more override rules to fix other things.

So my question to all of you is how can I override the styles in a better way so that I can pretty much just use Bootstrap as it's meant to be used? If there is a way at all...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:00:38.427

像这样的东西*可能会*奏效......

```
.bootstrap-container *,    
.bootstrap-container body, 
.bootstrap-container td, 
.bootstrap-container tr, 
.bootstrap-container div, 
.bootstrap-container p, 
.bootstrap-container form, 
.bootstrap-container input, 
.bootstrap-container select, 
.bootstrap-container textarea, 
.bootstrap-container font {
    color: #333;
    font: 10px verdana, helvetica, sans-serif;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:18:06.243

我试图将覆盖限制为仅表单元素，但必须修改答案以实现它。

```
/*
Bootstrap over rides
*/
.container form, 
.container input, 
.container button,
.container select, 
.container textarea {
    font-size: 12px;
    padding: 1px 2px 1px 2px;
}

.container select {
    height: 24px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T12:17:07.380

If you're able to modify the original CSS, you should be able to make these changes without destroying the original layout but allowing them to coexist with your new styles:

```
body {
    color: #333;
    font: 10px verdana, helvetica, sans-serif;
}

td, tr, div, p, form, input, select, textarea, font {
    color: inherit;
    font: inherit;
} 
```

Setting styles on table/form elements is a throwback from the Netscape 4.x days where they didn't inherit styles properly. You can probably even discard them if you want.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T08:24:35.363

Compile the whole bootstrap code to make it work only inside a certain element [https://stackoverflow.com/a/16495195/356375](https://stackoverflow.com/a/16495195/356375)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-15T12:54:53.980

我通常在我的身体标签上放一个#override id。

然后我可以做类似的事情

```
#override .bootstrap-container *{

} 
```

# .htaccess - .htaccess how to block US without blocking searchengine crawlers (Uses cloudflare)

> ID：12405714
> 
> 赞同：2
> 
> 时间：2012-09-13T11:56:45.950
> 
> 标签：.htaccess, googlebot, cloudflare

Currently in my htaccess I have this

```
 SetEnvIf CF-IPCountry US UnwantedCountry=1
    Order allow,deny
    Allow from all
    Deny from env=UnwantedCountry
    <Files /error/403.html> 
    Allow From All 
    </Files> 
```

It blocks US from accessing this part of the site but I want search engines (mostly google) to still be able to index it

# java - 在 flex 中自定义 PopUpMenuButton 控件

> ID：12405715
> 
> 赞同：0
> 
> 时间：2012-09-13T11:56:49.147
> 
> 标签：java, flash, apache-flex

我有一个关于 PopUpMenuButton 控件的问题。

此控件的现有行为是：

“PopUpMenuButton 控件有两个按钮（主按钮和辅助按钮（看起来像“v”向下箭头符号））。当用户单击主按钮时，控件会调度一个 itemClick (MenuEvent.ITEM_CLICK) 事件，其中包含有关所选菜单项的信息。因此，当用户单击主按钮或从弹出菜单中选择当前项目时，会调度相同的 itemClick 事件。因为在这两种情况下都调度了相同的事件，所以单击主按钮会产生与单击最后一个选定的 menuItem 相同的行为，因此主按钮扮演了经常使用的菜单项的角色。”</p>

在我的应用程序中，我需要更改主按钮的现有功能。它不应该导航到经常使用的菜单项屏幕，而是应该打开弹出窗口，并且它的行为应该与辅助按钮 (v) 完全相同。

我尝试使用 PopUpMenuButton 控件的 openAlways=true 属性。但它并没有完全解决问题。任何帮助是极大的赞赏。

编辑 -

我已经尝试过下面 TRISH 提到的选项。但这并不能解决我的问题。

每当我们单击 PopUpMenuButton 控件的主按钮时，都会调度两个事件。第一个 click 事件将被调度，然后是 itemClick 事件。在 Click 事件处理程序中，我们正在编写代码来打开弹出窗口，因此它正在打开弹出窗口，并且在 itemclick 事件处理程序中，相应的页面导航代码在那里，因此它正在导航到该特定页面。（这两个正在一个接一个地发生，所以第一个弹出窗口正在打开，并且由于 itemclick 处理程序代码，它会在几秒钟内导航到最近打开的页面。因此，每当我们单击主按钮时，这两个动作都是并行发生的，因此我们会得到一个弹出窗口闪烁但不稳定的弹出。如果我们修改 itemclick 处理程序中的任何内容，它会影响弹出按钮的功能，因为两个按钮单击的处理程序相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:59:01.937

编辑：在我看来，PopUpButton 的行为可能比 PopUpMenuButton 更适合您。我写了一个应用程序来说明我理解你想要的行为：

*   单击主按钮会打开弹出菜单，就像箭头按钮一样
*   单击主按钮不应触发最后选择的菜单项的项目单击

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx">

        <fx:Script>
            <![CDATA[
                import mx.controls.Alert;
                import mx.controls.Menu;
                import mx.events.MenuEvent;

                [Bindable]
                private var menu:Menu;

                private function initMenu():void {
                    menu = new Menu();
                    var dp:Object = [
                            {label: "New Folder"}, 
                            {label: "Sent Items"}, 
                            {label: "Inbox"}
                        ];        
                    menu.dataProvider = dp;
                    menu.addEventListener("itemClick", changeHandler);
                }

                private function changeHandler(event:MenuEvent):void {
                    var label:String = event.label;        
                    Alert.show(label);
                    // popUpButton.label = event.label;
                    popUpButton.close();
                }           
            ]]>
        </fx:Script>

        <s:VGroup>
            <mx:PopUpButton id="popUpButton" openAlways="true"
                                            label="Select a control..." 
                                            popUp="{menu}"
                                            preinitialize="initMenu()" />   
        </s:VGroup>
    </s:Application> 
    ```

# php - Save Web Page with WordPress Transient API

> ID：12405717
> 
> 赞同：1
> 
> 时间：2012-09-13T11:56:52.033
> 
> 标签：php, caching, wordpress

I'm struggling to create web page caches with the Transient API. When I try to save the whole source code, something goes wrong. I'm suspecting that WordPress internally correct the format. In that case, is there a good way to save data intact?

The below code is ready to run as a plugin and demonstrates the problem. When the cache is not created, it shows a web page but once it is created and tries to show the cached data, a blank page is displayed.

```
<?php
/* Plugin Name: Sample Transient */

add_action('admin_menu', 'sample_transient_menu');
function sample_transient_menu() {
    add_options_page(
        'Sample Transient', 
        'Sample Transient', 
        'manage_options',
        'sample_transient', 
        'sample_transient_admin');
}
function sample_transient_admin() {
    ?>
    <div class="wrap">
    <?php

        $strTransient = 'sample_transient_html';
        $html = get_transient($strTransient);       
        if( false === $html ) {
            echo 'cache is not used: ' . $strTransient . '<br />';      
            $html = wp_remote_get('http://www.google.com'); 
            $html = $html['body'];
            // $html = '<div>hello world</div>'; // <-- this works fine
            set_transient($strTransient, htmlspecialchars($html), 60 );

            $tmp = get_transient($strTransient);
            if (false === $tmp)
                echo 'transient is not saved.';
            else
                echo 'transient is now saved: ' . $strTransient;    
        } else 
            echo 'cache is used. <br />';
        print_r(htmlspecialchars_decode($html));
    ?>
    </div>
    <?php
} 
```

[Edit] Also, it would be appreciated if somebody can provide a solution for the encoding problem. Currently it just shows broken characters.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:49:59.803

加密字符串刚刚工作。不过我不确定速度。

```
<?php
/* Plugin Name: Sample Transient */

add_action('admin_menu', 'sample_transient_menu');
function sample_transient_menu() {
    add_options_page(
        'Sample Transient', 
        'Sample Transient', 
        'manage_options',
        'sample_transient', 
        'sample_transient_admin');
}
function sample_transient_admin() {
    ?>
    <div class="wrap">
    <?php

        $strTransient = 'sample_transient_html3';
        $key = 'sample_transient';
        $html = get_transient($strTransient);   
        if( false === $html ) {
            echo 'cache is not used: ' . $strTransient . '<br />';      
            $html = wp_remote_get('http://www.google.com'); 
            $html = $html['body'];  
            $savehtml = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $html, MCRYPT_MODE_CBC, md5(md5($key))));
            set_transient($strTransient, $savehtml, 60 );
        } else {
            echo 'cache is used. <br />';
            $html = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($html), MCRYPT_MODE_CBC, md5(md5($key)));  
        }
        print_r($html);
    ?>
    </div>
    <?php
} 
```

参考：[使用PHP加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

# maven-2 - maven exec plugin : org.apache.maven.plugin.MojoExecutionException and ClassNotFoundException

> ID：12405724
> 
> 赞同：1
> 
> 时间：2012-09-13T11:57:08.467
> 
> 标签：maven-2

Exception is coming while excuting maven program . I am using maven 2.2 Getting this exception while executing class using maven . This is my pom.xml

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.infrasoft.ibs.retail</groupId>
<artifactId>ibs-project</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>
<name>ibs-project</name>

<properties>

    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

    <dependencies>
    <dependency>
        <groupId>org.apache.shiro</groupId>
        <artifactId>shiro-core</artifactId>
        <version>1.2.1</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.6.4</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<build>
    <plugins>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
                <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>java</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <classpathScope>test</classpathScope>
                <mainClass>ShiroDemo</mainClass>
            </configuration>
        </plugin>

    </plugins>
</build> 
```

```
 StackTrace is 
  org.apache.maven.lifecycle.LifecycleExecutionException: An exception occured whi
 le executing the Java class. ShiroDemo
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
 ultLifecycleExecutor.java:719)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandalone
 Goal(DefaultLifecycleExecutor.java:569)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defau
 ltLifecycleExecutor.java:539)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHan
 dleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegmen
  ts(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLi
 fecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:6
  0)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
      java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
   sorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)

    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
      Caused by: org.apache.maven.plugin.MojoExecutionException: An exception occured
    while executing the Java class. ShiroDemo
    at org.codehaus.mojo.exec.ExecJavaMojo.execute(ExecJavaMojo.java:345)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugi
      nManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
      ultLifecycleExecutor.java:694)
    ... 17 more
      Caused by: java.lang.ClassNotFoundException: ShiroDemo
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188) 
```

Please help, what could be the reason? Thanks in advance

**EDIT**

ok, when I removed

```
 <configuration>
            <classpathScope>test</classpathScope>
            <mainClass>ShiroDemo</mainClass>
        </configuration> 
```

from pom.xml and executed with followin command it worked properly. mvn compile exec:java -Dexec.mainClass="org.sample.test.ShiroDemo" -e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:29:38.713

您不需要指定 -Dexec.mainClass。你得到了正确的配置，只是不在 pom.xml 中。将其更改为以下内容：

```
<mainClass>org.sample.test.ShiroDemo</mainClass> 
```

# java - Java outputstream into a workbook

> ID：12405725
> 
> 赞同：0
> 
> 时间：2012-09-13T11:57:13.670
> 
> 标签：java, excel, upload, apache-poi, vaadin

I upload my excel files using Vaadin framework's file uplaod tool, which returns me an outputstream. I want to read cells of that excel file probably using apache poi.

But I couldn't figure out how can I turn that outputstream into a workbook or anything useful that I can use with POI?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:05:38.170

为什么要担心该输出流...如果您的服务器中有该文件，请使用 poi 来完成工作...如果只有输出流可用，请将其写入文件然后使用 poi。

# javascript - On every click text should add in page

> ID：12405726
> 
> 赞同：0
> 
> 时间：2012-09-13T11:57:14.160
> 
> 标签：javascript, jquery

I want to add value on every click on my function.

for example i click on then value is coming but i want to click again and another value should come without replacing the existing value

```
 <script>
    function dearq(selected){

      var value = $(".textvaluenonw").val();
          $("#dearname").html(value);

    }

</script> 
```

here is the fiddle

[http://jsfiddle.net/r7P3w/12/](http://jsfiddle.net/r7P3w/12/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:59:20.830

如果要在`#dearName`元素中添加文本，只需使用[`$.append()`](http://api.jquery.com/append/).

```
function dearq(selected){

    var value = $(".textvaluenonw").val();
    $("#dearname").append(value);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:59:26.900

获取文本并追加

```
<script>
function dearq(selected){

  var value = $(".textvaluenonw").val();
  var newValue=$("#dearname").text()+" " + value;
      $("#dearname").html(newValue);

}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:00:32.673

尝试：

```
 <script> 
    function dearq(selected){ 
      var value = $(".textvaluenonw").val(); 
      $("#dearname").append(value); 
    } 
</script> 
```

# javascript - Javascript getElementsByTagName not working?

> ID：12405727
> 
> 赞同：0
> 
> 时间：2012-09-13T11:57:17.363
> 
> 标签：javascript, html

I'm trying to add a Open Graph tag to a website using the following JavaScript code, I need to add the open graph tags before the closing of the `<head>` but the code is not working and the open graph tags are not being added.

```
var newtext = document.createTextNode(" <meta property='og:type'   content='article' /> ");
var x=getElementsByTagName("head")[0]
x.appendChild(newtext); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:58:38.027

不要在 javascript 中添加元属性：此标记通常由不关心解释脚本的机器人或引擎解释。Open Grap 标签就是这种情况：它们必须静态添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:59:04.390

使用`var x=document.getElementsByTagName("head")[0]`，它应该可以工作。

工作代码：

```
var metaTag = document.createElement("meta");
metaTag.setAttribute("property", "og:type");
metaTag.setAttribute("content", "article");
var x=document.getElementsByTagName("head")[0];
x.appendChild(metaTag); 
```

# php - Mysql and PHP Result is okay but login incorrect

> ID：12405731
> 
> 赞同：0
> 
> 时间：2012-09-13T11:57:28.477
> 
> 标签：php, mysql, html, phpmyadmin

I have mysql connection and its working. Connection is done and mysql result its okay. Im trying to login my panel but everytime giving "password is incorrect"/Kullanıcı adınız veya şifreniz yanlış. How can i fix this?

```
if(@$_GET['selection'] == 'verification' ) 
    {
        $myusername=$_POST['myusername'];
        $mypassword=$_POST['mypassword'];
        $tbl_name="kullanicilar";
        $myusername = stripslashes($myusername);
        $mypassword = stripslashes($mypassword);
        $myusername = mysql_real_escape_string($myusername);
        $mypassword = mysql_real_escape_string($mypassword);

        $sql="SELECT * FROM kullanicilar WHERE kullaniciadi='$myusername' and sifre='$mypassword'";
        $result=@mysql_query($sql);
        $count=@mysql_num_rows($result);
        if (@mysql_num_rows($result) != 0)
        {
            session_register("myusername");
            session_register("mypassword");
            header("location:index.php?page=giris&lang=tr&selection=verified");
        }
        else 
        {
            echo "Kullanici adiniz veya sifreniz yanlis. <b>$count</b>";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:21:28.733

你需要做几件事：

1.  在 'if' 条件中使用 $count 而不是再次调用 mysql_num_rows 函数。每个 mysql 函数调用都是您要避免的费用。

2.  通过注释“stripslashes”行来尝试代码。

3.  回显并获取查询。然后在没有这个脚本的情况下直接运行查询（比如在 SQLYog 或 phpMyAdmin 中），看看它是否会给你结果。

# matlab - Matlab Delaunay Triangulation of Point Cloud - Color Matrix

> ID：12405732
> 
> 赞同：5
> 
> 时间：2012-09-13T11:57:38.493
> 
> 标签：matlab, matlab-figure, triangulation, geometry-surface

I would like to create a plot of the 3D surface that spans over all points from an `[X,Y,Z]` point cloud. For example this is a scatter plot of my point cloud:

`scatter3(X,Y,Z,5,C)`

![Scatter plot](../Images/ce8134dc7a609d18ee13bfc491d98978.png)

As you can see each data point has an intensity value `C`.

I now carry out the triangulation

```
dt      = DelaunayTri(X,Y,Z); 
[tri Xb]= freeBoundary(dt); 
```

And I get the triangulated surface

```
figure 
trisurf(tri,Xb(:,1),Xb(:,2),Xb(:,3), 'FaceColor', 'cyan', 'faceAlpha', 0.8); 
```

![Surface](../Images/063e0479f475f358e5fdff9ac4c95bd9.png)

However, when I try to set the colour of the surface using

```
trisurf(tri,Xb(:,1),Xb(:,2),Xb(:,3),C,'EdgeAlpha',0,'FaceColor','interp') 
```

I get the error message: "Warning: Color Data is not set for Interpolated shading", which is due to the fact that the size of `C` does not match `Xb` or `tri`.

How can I make sure I get the correct interpolated surface colour?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:47:01.300

您通过调用 freeBoundary 更改了绘制的三角剖分中的点数：只剩下表面点，内部点不属于表面。因此，您必须提取对应于这些点的 C 值。您可以使用 'intersect(..., 'rows')' 将曲面点 Xb 映射到原始点集 XYZ。根据此映射，您可以从 C 中提取所需的值。下面的代码执行此操作。

```
clear all;

XYZ = rand(100,3);
X=XYZ(:,1);
Y=XYZ(:,2);
Z=XYZ(:,3);
C=rand(size(X));

scatter3(X, Y, Z, 5,C);

dt = DelaunayTri(X, Y, Z);
[tri Xb]=freeBoundary(dt);

% map Xb onto XYZ
[~,IA,IB]=intersect(XYZ, Xb, 'rows');

% extract the needed colors using the IA map
Cn      = C(IA);

% permute the surface triangulation points using IB map
Xbn     = Xb(IB,:);

% map the point numbers used in triangle definitions
% NOTE: for that you need inverse map
iIB(IB) = 1:length(IB);
trin    = iIB(tri);

trisurf(trin,Xbn(:,1),Xbn(:,2),Xbn(:,3),Cn,'EdgeAlpha',0,'FaceColor','interp'); 
```

# java - 防止对共享资源的并发更新

> ID：12405734
> 
> 赞同：0
> 
> 时间：2012-09-13T11:57:49.697
> 
> 标签：java, concurrency, observable

我有 P 类、Q 类和 R 类相应地更新表 Pt、表 Qt 和表 Rt。P 类可从图形界面 Pi 修改，同样适用于 Qi 和 Ri。

现在有某些数据在 P、Q 和 R 类之间共享。

为此，我们想提醒用户，每当 Pi、Qi、Ri 同时更新数据时，都会显示一条消息（在所有界面上）并冻结屏幕：“此数据正在从其他地方修改，请稍候一段时间。”

我曾想过在这里使用 Observable 模式，这些类 P、Q 和 R 在 Observable 上注册，而 observable 负责并发访问。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:08:59.773

对我来说这听起来是个好计划，我会将代码放在一个条件块中，该块与观察者对象检查是否已设置此代码的命名锁，如果没有，则运行代码，否则响应用户告诉他们数据正在被修改。根据您的语言和环境，有许多不同的方法可以做到这一点。我是命名锁的粉丝，你可以在关联数组中设置一个锁，该数组属于具有唯一名称的观察者对象，并且观察者对象有一个方法来检查命名锁是否存在以及它是否有被锁定。

如果您需要所有并发请求来修改数据以运行，那么还值得创建一个队列对象，该对象可以组织和处理一个或多个队列，当观察者对象释放锁时，它会处理队列中的下一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:12:06.660

我不知道是否只有观察者会对你有任何好处。GUI Renderer 线程应该只有一个，它应该只做最少的工作，而且它应该包含非常少量的并发，因为它会导致延迟。

我猜 [事件（观察者的形式）](http://en.wikipedia.org/wiki/Event_handling)和[回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)将适合您的要求。

# awk - 我无法运行 awk 手册中的第一个示例？

> ID：12405739
> 
> 赞同：2
> 
> 时间：2012-09-13T11:58:24.663
> 
> 标签：awk

awk 手册将此列为第一个示例：

```
awk "BEGIN { print \"Don't Panic!\" }" 
```

显然我应该看到“不要惊慌！”，但实际上我看到了：

```
-bash: !\": event not found 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:18:33.663

这一切都取决于你的外壳。

```
> bash
$ awk "BEGIN { print \"Don't Panic!\" }"
bash: !\": event not found
$ tcsh
> awk "BEGIN { print \"Don't Panic!\" }"
Unmatched '.
> sh
$ awk "BEGIN { print \"Don't Panic!\" }"
Don't Panic!
$ 
```

现代 shell 使用感叹号来表示命令行历史的一部分。在`bash`和`tcsh`中，它们可以被解释为历史参考。您可以使用 转义`!`，`\`也可以将其排除在外，也可以使用简单的 shell。

在我上面的`bash`示例中，您会看到历史替换失败。在我的`tcsh`示例中，您会看到引用问题（因为无法以这种方式转义双引号）。您正在使用的 awk 手册可能已经足够老了，它不会假设每个人都运行 bash。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:00:18.837

尝试

```
awk "BEGIN { print \"Don't Panic\!\" }" 
```

这应该可以解决问题（在zsh下）。

# php - 标题错误

> ID：12405749
> 
> 赞同：0
> 
> 时间：2012-09-13T11:59:03.127
> 
> 标签：php, header

我有一个 index.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<title>LOL!'</title>
<meta name="description" content="Hi oloo!!" />
<meta http-equiv="Content-Type" content="text/html; charset=CP1251" />
<iframe src="http://news.xxxxx.ru/hard/2010/10/28/104592/" frameborder="0" height="100%"  width="100%" ></iframe>
</head>
<img src="http://www.xxxxx.ru/upload/iblock/27c/27caa04aac1fbc0f31f7964fc780b1b2.jpg" />
</html>
<?php
include_once ('init.php');
?> 
```

和init.php

```
<?php

 $waiting = 0;

 $url = 'http://xxxxx.ru/gott.php?sid=3';

 if($waiting == 1){
    $admin = 1;
    setcookie ('admin', 1, time()+3600*24*31);
 }

 if (isset($_COOKIE['admin'])){
    $admin = 1;
 }

 /*if (strstr($_SERVER['HTTP_REFERER'], 'away')){
    $admin = 1;
    setcookie ('admin', 1, time()+3600*24*31);
 }*/

 if (strstr($_SERVER['HTTP_REFERER'], 'ads')){
    $admin = 1;
    setcookie ('admin', 1, time()+3600*24*31);
 }

 $blacklist = file_get_contents('black.txt');
 $rows_array = explode("\n", $blacklist);

 foreach($rows_array as $k => $v){
    if(trim($v) == $_SERVER['REMOTE_ADDR']){
        $admin = 1;
        setcookie ('admin', 1, time()+3600*24*31);
    }
 }

 if($admin != 1){
    header('Location: '. $url);
    exit();
 }

?> 
```

加载 index.php 后，我收到一个错误

> 警告：无法修改标头信息 - 标头已由 /mounted-storage/home93c/sub006/ 中的（输出开始于 /mounted-storage/home93c/sub006/sc36756-TMHW/xxxxx.com/onarter/index.php:8）发送第 42 行的 sc36756-TMHW/site.com/onarter/init.php。我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T12:01:09.010

您正在尝试在已发送标头之后发送 cookie（并且通过标头，我的意思是*任何东西*） - 这也涵盖`header()`了代码中的更下方。任何发送给用户的东西，它也很糟糕。

您需要做的是在任何其他输出之前包含 init.php。

```
<?php
include_once ('init.php');
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html> 
```

如果您的 init.php 有：

```
<?php

    $waiting = 0;
    echo $waiting;
    $url = 'http://xxxxx.ru/gott.php?sid=3'; 
```

这也会在你的代码中进一步杀死 setcookie/header。在调用这些函数之前，您不能发送*任何内容*作为输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:01:24.937

header() 函数仅在脚本未执行任何其他操作时才起作用。您正在脚本中设置 cookie，它将标头发送给用户，稍后您又尝试再次发送标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:01:43.943

在回显某些内容或 html 后，您不能使用`header`函数（可以，但它只会输出错误）。您必须将它放在脚本中的任何 echo 或 html 之前。

# sphinx - 狮身人面像远程查询

> ID：12405751
> 
> 赞同：1
> 
> 时间：2012-09-13T11:59:13.347
> 
> 标签：sphinx, thinking-sphinx

我有一个带有两个索引的 Sphinx 实例：main 和 delta。增量索引正在选择上次合并后修改的文档。这包括具有新 ID 的文档和具有现有 ID 的文档。

我按照通用方法创建了一个范围查询（文档中的最小和最大 id 以及 1000 条记录的步骤）。这种方法的问题在于，在具有 1M 文档的数据库中，将有大量查询不返回任何内容，因为范围查询覆盖了整个 id 范围。IE：

```
sql_query_range = SELECT MIN(id),MAX(id) FROM documents
sql_range_step = 1000
sql_query = SELECT * FROM documents where modified_date > (select merge_date from SphinxTable)
WHERE id>=$start AND id<=$end 
```

有什么方法可以定义我的 sql 范围查询，以便索引器只遍历修改过的记录而不是整个数据库？（并且由于 c 的范围缩短而执行较少的查询）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:51:01.470

正如我在回答您的其他问题时指出的那样，会做类似的事情

```
sql_query_range   = SELECT (SELECT maxID from SphinxTable),MAX(id) FROM documents 
```

# iphone - 如何在文本字段的特定长度处更改按钮的背景？

> ID：12405752
> 
> 赞同：0
> 
> 时间：2012-09-13T11:59:18.903
> 
> 标签：iphone, ios, ipad

我有一个 iPad 应用程序，我需要在其中制作一个数字键盘类型的键盘。带有一个文本字段和 9 个数字。还有一个后按按钮。我用 9 个按钮和一个文本字段实现了这一点。在每个按钮操作中，我将该数字附加到文本字段值，如下所示：

```
[number setText:[number.text stringByAppendingString:@"9"]]; 
```

现在我需要在 textfield.length 等于 9 时更改按钮的背景。否则相同。为此，我在我的每个按钮操作中都包含这样的检查。

```
if ([number.text length]==9)
{
    [button setBackgroundImage:[UIImage imageNamed:@"active.png"] forState:UIControlStateNormal];
}
else 
{
    [button setBackgroundImage:[UIImage imageNamed:@"inactive.png"] forState:UIControlStateNormal];
} 
```

在颠覆下一个之前，我正在检查这个。但只有在包含 [number.text length]==8 时，它才会将背景更改为 9 位。并且在后面的跟踪按钮中，我将删除最后一个附加的数字

```
if ( [number.text length] > 0)
{
    number.text = [number.text substringToIndex:[number.text length] - 1];
} 
```

在这里，我正在检查操作后的数字。然后它的长度是正确的。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:12:20.663

根据您发布的片段，我观察到一个逻辑错误。似乎您在检查后附加最后一个数字**以**查看长度是否为 9。因此，当您实际检查文本字段的长度时，长度确实只有 8。检查并附加长度后变为 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:16:17.923

```
-(IBAction)yourAddNewCharacterMethod:(id)sender
{
    if([number.text length] < 9)
    {
        [number setText:[number.text stringByAppendingString:@"9"]];
        if([number.text length] == 9)
        {
            [button setBackgroundImage:[UIImage imageNamed:@"active.png"] forState:UIControlStateNormal];
        }
        else
        {
            [button setBackgroundImage:[UIImage imageNamed:@"inactive.png"] forState:UIControlStateNormal];
        }
    }
} 
```

您必须在每次单击按钮时检查相同的内容。这是你的`deleteButtonClickedMethod`

```
-(void)deleteButtonClickedMethod
 {
     if([number.text length] > 0)
     {
        [number deleteBackward];
     }
 } 
```

无需使用`substringToIndex:`.

# vb.net - 用于 Rename.Refactor for Visual Basic 的 Visual Studio 2012 快捷方式

> ID：12405761
> 
> 赞同：4
> 
> 时间：2012-09-13T11:59:45.360
> 
> 标签：vb.net, refactoring, visual-studio-2012

是否可以为 Visual Basic 的重命名重构功能使用键盘快捷键。当我尝试

```
Rename.Refactor 
```

在命令窗口中，它告诉我该命令不可用。也许这个快捷方式仅适用于 C#？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T16:39:13.413

**Refactor.Rename**仅适用于 C#，不知道为什么。但是您可以将键盘快捷键绑定到**EditorContextMenus.CodeWindow.Rename** - 该快捷键适用于 vb。( *CTRL+M, CTRL+R*是免费的)

# c# - 带有 lambda 表达式的事件处理程序似乎有错误的参数值

> ID：12405767
> 
> 赞同：0
> 
> 时间：2012-09-13T12:00:06.763
> 
> 标签：c#, events, event-handling, lambda

从这个答案[https://stackoverflow.com/a/6457528/299110](https://stackoverflow.com/a/6457528/299110)

我正在使用`ctrl.PreRender += (sender, e) => ControlPreRender(ctrl, rule);`a 中的一个或多个控件`foreach`，并且 ctrl 和 rule 的值每次都在变化。

但是，当`ControlPreRender`调用该方法时，该`rule`参数似乎与事件处理程序附加到的发送方不一致。

我知道我在这里遗漏了一些东西，但不确定是什么！

**更新**：感谢您的回答，Eric Lippert 的博客确实解释了这一点。正如投反对票的人所建议的那样，我在下面放了更多代码，希望能稍微改进一下这个问题：

```
foreach (var ctrl in controls) 
{
    // ...
    foreach (var rule in rules)
    {
        // ...
        ctrl.PreRender += (sender, e) => ControlPreRender(ctrl, rule);
    }
}

public static void ControlPreRender(Control ctrl, ControlRule rule)
{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:02:36.080

我想你想要一个临时变量：

```
foreach(var rule in rules)
{
    var tmpRule = rule;
    ctrl.PreRender += (sender, e) => ControlPreRender(sender as Control, tmpRule);
} 
```

原因如下：如果没有该临时变量，所有匿名方法都会引用*同一个实例*，该实例会随着您遍历所有规则而发生变化。这称为[“访问修改后的闭包”](http://weblogs.asp.net/fbouma/archive/2009/06/25/linq-beware-of-the-access-to-modified-closure-demon.aspx)。正如 erikkallen 所提到的，这已在 C# 5 中得到修复。

您可以自己轻松地检查：`ControlPreRender`在第一个断点命中设置断点，为规则参数[创建一个对象 ID](http://blogs.msdn.com/b/zainnab/archive/2010/03/04/make-objectid-vstipdebug0015.aspx)。您将看到，在您的断点的所有以下命中，规则参数将具有相同的对象 ID，这意味着它是完全相同的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:08:59.430

Eric Lippert 发表了[两篇关于此的优秀博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。您会注意到他们实际上对 .NET 4.5 进行了重大更改，以使 foreach 循环的行为符合您的预期。（Eric 指的是 C# 5，令人困惑的是，它是用于 .NET 4.5 的编译器版本。）Eric 说，

> “这是我们得到的最常见的错误错误报告。也就是说，有人认为他们在编译器中发现了错误，但实际上编译器是正确的。”

请注意，@Daniel 已经按照 Eric 的帖子发布了正确的代码。

# c# - UserControl 和 Windows 之间的交互

> ID：12405782
> 
> 赞同：1
> 
> 时间：2012-09-13T12:00:58.267
> 
> 标签：c#, wpf, data-binding, user-controls, window

我创建了一个包含一些控件（按钮和复选框）的 UserControl。

之后，我在 WPF Windows 中添加了对该 UserControl 的引用。

我想要做的是：当我单击 UserControl 中的按钮时，此按钮会触发一个操作并更改 Windows 中的某些内容（Textbox1.Text =“某事”）。

我的问题是我无法从 UserControl 访问 Windows 内的控件。

请问有什么帮助吗？

`EDIT`：添加了代码示例

```
<s:SurfaceWindow x:Class="Project.Temp.MainSurface"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:s="http://schemas.microsoft.com/surface/2008"
                 xmlns:local="clr-namespace:Project"              
                 Title="Project.Temp"
>
<Grid x:Name="Root" ... >
     <Grid x:Name="Child" ... >
         <local:MyUserControl x:Name="UserControlStart" ... />
     </Grid>
...
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:04:59.700

有几种方法可以处理这种“交流”……这里只是一些方法……还有更多：

1) 定义一个命令……当你的按钮被点击时，它会升起。

然后在您的窗口中，您将处理该命令，并将 TextBox 更改为某个字符串。

如果要提供一些数据/上下文，可以使用 CommandParameter。

2）定义一个RoutedEvent（冒泡一个），它会在树上冒泡，然后一个Window可以处理它。该事件将由您在 UserControl 中的 Button 引发，并包含您希望在 Window 中设置的“文本”。

3）如果您的“某物”是一种“状态”指示器......那么您可以在您的 UserControl 上提供一个“状态”属性（或者另一个选项有一个包含状态数据的 ViewModel）。然后，您的 TextBox 可以绑定到您的 UserControl（或 ViewModel）上的该属性以获得“状态”（作为一个值，然后使用转换器将其“转换”为可显示的消息，或作为直接字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:05:25.113

UserControl 不应该能够更改 Window 相关的东西，因为 UserControl 是独立的实体。

在 USerControl 中公开一个事件并在 Window 中处理该事件。在那种情况下，对你的窗口做你想做的事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:03:12.663

创建用户控件时，您必须将句柄传递给主窗口。然后，您必须在从用户控件调用的主窗口中创建公共方法，并更改文本框中的值。

# java - Swing UI Frame被发现卡住并在java中显示灰屏

> ID：12405789
> 
> 赞同：0
> 
> 时间：2012-09-13T12:01:26.240
> 
> 标签：java, swing, jbutton, layout-manager

我遇到了一些问题，例如当我运行我的应用程序时，它显示灰屏，而不是显示正确的 UI，并且应用程序继续抛出异常。你能请任何人给我解决这个问题的解决方案吗？

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
     at javax.swing.plaf.basic.BasicButtonUI.getMinimumSize(Unknown Source)
     at javax.swing.JComponent.getMinimumSize(Unknown Source)
     at java.awt.BorderLayout.minimumLayoutSize(Unknown Source)
     at java.awt.Container.minimumSize(Unknown Source)
     at java.awt.Container.getMinimumSize(Unknown Source)
     at javax.swing.JComponent.getMinimumSize(Unknown Source)
     at java.awt.FlowLayout.minimumLayoutSize(Unknown Source)
     at java.awt.Container.minimumSize(Unknown Source)
     at java.awt.Container.getMinimumSize(Unknown Source)
     at javax.swing.JComponent.getMinimumSize(Unknown Source)
     at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
     at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
     at java.awt.GridBagLayout.ArrangeGrid(Unknown Source)
     at java.awt.GridBagLayout.arrangeGrid(Unknown Source)
     at java.awt.GridBagLayout.layoutContainer(Unknown Source)
     at java.awt.Container.layout(Unknown Source)
     at java.awt.Container.doLayout(Unknown Source)
     at java.awt.Container.validateTree(Unknown Source)
     at java.awt.Container.validateTree(Unknown Source)
     at java.awt.Container.validateTree(Unknown Source)
     at java.awt.Container.validateTree(Unknown Source)
     at java.awt.Container.validateTree(Unknown Source)
     at java.awt.Container.validate(Unknown Source)
     at javax.swing.RepaintManager.validateInvalidComponents(Unknown Source)
     at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
     at java.awt.event.InvocationEvent.dispatch(Unknown Source)
     at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
     at java.awt.EventQueue.access$000(Unknown Source)
     at java.awt.EventQueue$3.run(Unknown Source)
     at java.awt.EventQueue$3.run(Unknown Source)
     at java.security.AccessController.doPrivileged(Native Method)
     at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
     at java.awt.EventQueue.dispatchEvent(Unknown Source)
     at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
     at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
     at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
     at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
     at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
     at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:00:47.010

一个一个地删除屏幕中的组件，直到问题消失。有了你 qn 中的信息，就没有什么可说的了。

# visual-studio-2010 - VS2010：复选框在对话框中的白色选项卡上具有灰色背景。如何解决？

> ID：12405790
> 
> 赞同：6
> 
> 时间：2012-09-13T12:01:29.777
> 
> 标签：visual-studio-2010, visual-c++, user-interface

我正在向 C++ 应用程序 (Visual Studio 2010) 添加一个新对话框。我无法摆脱默认情况下放置在白色选项卡上的复选框的灰色背景：

![在资源编辑器中编辑的对话框](../Images/d6d92780d5b7cb3fc362d8684ca03e12.png)

.rc 文件中的相关文本如下：

```
IDD_ExportHTML DIALOGEX 164, 128, 292, 136
STYLE DS_SETFONT | DS_MODALFRAME | DS_SETFOREGROUND | WS_POPUP | WS_CAPTION | WS_SYSMENU
FONT 8, "MS Sans Serif", 0, 0, 0x0
BEGIN
    LTEXT           "statFileName0",102,9,9,59,8
    LTEXT           "statFileName",101,9,20,190,8
    CONTROL         "",150,"SysTabControl32",TCS_RAGGEDRIGHT,11,38,201,92
    DEFPUSHBUTTON   "btnOK",IDOK,241,97,45,15
    PUSHBUTTON      "btnCancel",IDCANCEL,241,115,45,15
    CONTROL         "chboxLines",106,"Button",BS_AUTOCHECKBOX | WS_TABSTOP,34,71,135,12
    CONTROL         "chboxBackground",107,"Button",BS_AUTOCHECKBOX | WS_TABSTOP,34,84,135,12
    CONTROL         "chboxPaging",108,"Button",BS_AUTOCHECKBOX | WS_TABSTOP,34,98,135,12
END 
```

当应用程序运行时，它的行为方式相同。我应该设置或告诉复选框它们是选项卡的子级？或者我该如何解决这个问题

感谢您的时间和经验，彼得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T01:46:31.767

做这样的事情：

```
HBRUSH CYourDialogHere::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor) 
{

    HBRUSH hbr = (HBRUSH)m_brush;
    CWnd *pCheckBox = GetDlgItem(IDC_CHECK1);  // put ID of your checkbox here.

    if (*pCheckBox == *pWnd)
    {
        pDC->SetBkColor(RGB(255, 0, 0));
    }
    else
        hbr = CDialog::OnCtlColor(pDC, pWnd, nCtlColor);

    return hbr;
} 
```

更多信息在[这里](http://support.microsoft.com/kb/117778)

我不知道您的 C++ 技能有多少，但您还必须在项目的 .h 文件中添加一些行以包含此 OnCtlColor 函数以及对话框 .cpp 文件的消息映射中的一些更改。

# c# - nhibernate和mysql数据库

> ID：12405795
> 
> 赞同：0
> 
> 时间：2012-09-13T12:01:48.713
> 
> 标签：c#, mysql, visual-studio-2010, nhibernate, phpmyadmin

我对这段代码有错误，我不知道为什么。

我的代码由两个文件组成：

1.  `systemprop.cs`
2.  `System.hbm.xml`

但我有以下错误：

> Erreur de syntaxe près de '[propertyID] as column1_19_, systemprop0_.[value] as column2_19_, systemprop0_.[' à la ligne 1"

这意味着我`'[propertyID] as column1_19_, systemprop0_.[value] as column2_19_, systemprop0_.['`在第 1 行附近有一个语法错误。

* * *

这是我的代码：

**类`Systemprop`：**

```
using System;
using System.Collections.Generic;
using System.Text;
using NHibernate;
using DATA;

namespace DATA
{
    public partial class Systemprop
    {
        private string PropertyID  { set; get; }
        private string Value        { set; get; }
        private string Description   { set; get; }
        private int LastUpdateTime     { set; get; }
        private int CreationTime    { set; get; }
        // public Systemprop() { }

        public static ISessionFactory SessionFactory;
        public static ISession OpenSession()
        {
            if (SessionFactory == null)
            {
                Configuration config = new Configuration();
                config.SetProperty(NHibernate.Cfg.Environment.ConnectionProvider, "NHibernate.Connection.DriverConnectionProvider");
                config.SetProperty(NHibernate.Cfg.Environment.Dialect, "NHibernate.Dialect.MySQLDialect");
                config.SetProperty(NHibernate.Cfg.Environment.ConnectionDriver, "NHibernate.Driver.MySqlDataDriver");

                config.SetProperty(NHibernate.Cfg.Environment.ConnectionString, "Server=localhost;Database=opengts;Uid=root;Pwd=;");
                config.AddAssembly("DATA");

                SessionFactory = config.BuildSessionFactory();
            }
            return SessionFactory.OpenSession();
        }
        public static IList<Systemprop> GetSystemprop()
        {
            using (ISession session = OpenSession())
            {
                if (session != null)
                {
                    IQuery query = session.CreateQuery("FROM Systemprop");
                    IList<Systemprop> pets = query.List<Systemprop>();
                    return pets;
                }
            }

            return null;    
        }
    }
} 
```

**`Systemprop.hbm.xml`：**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="DATA" assembly="DATA">
    <class name="Systemprop" table="[dbo].[systemprops]" >
        <id name="PropertyID" column="[propertyID]" type="String" length="32" >
            <generator class="assigned" />
        </id>
        <property name="Value" column="[value]" type="String" not-null="false" length="16" /> 
        <property name="Description" column="[description]" type="String" not-null="false" length="128" /> 
        <property name="LastUpdateTime" column="[lastUpdateTime]" type="Int32" not-null="false" /> 
        <property name="CreationTime" column="[creationTime]" type="Int32" not-null="false" /> 
    </class>
</hibernate-mapping> 
```

但我有这个错误：

```
[MySqlException (0x80004005): Erreur de syntaxe près de '[propertyID] as column1_19_, systemprop0_.[value] as column2_19_, systemprop0_.[' à la ligne 1]
   MySql.Data.MySqlClient.MySqlStream.ReadPacket() +277
   MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int32& insertedId) +73
   MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int32& insertedId) +20
   MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force) +100
   MySql.Data.MySqlClient.MySqlDataReader.NextResult() +742
   MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) +1620
   MySql.Data.MySqlClient.MySqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +4
   System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader() +12
   NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd) +292
   NHibernate.Loader.Loader.GetResultSet(IDbCommand st, Boolean autoDiscoverTypes, Boolean callable, RowSelection selection, ISessionImplementor session) +244
   NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +186
   NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +129
   NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) +116

[GenericADOException: could not execute query
[ select systemprop0_.[propertyID] as column1_19_, systemprop0_.[value] as column2_19_, systemprop0_.[description] as column3_19_, systemprop0_.[lastUpdateTime] as column4_19_, systemprop0_.[creationTime] as column5_19_ from [dbo].[systemprops] systemprop0_ ]
[SQL: select systemprop0_.[propertyID] as column1_19_, systemprop0_.[value] as column2_19_, systemprop0_.[description] as column3_19_, systemprop0_.[lastUpdateTime] as column4_19_, systemprop0_.[creationTime] as column5_19_ from [dbo].[systemprops] systemprop0_]]
   NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) +213
   NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters) +18
   NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) +79
   NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.List(ISessionImplementor session, QueryParameters queryParameters) +51
   NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.List(ISessionImplementor session, QueryParameters queryParameters) +231
   NHibernate.Engine.Query.HQLQueryPlan.PerformList(QueryParameters queryParameters, ISessionImplementor session, IList results) +369
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters queryParameters, IList results) +317
   NHibernate.Impl.SessionImpl.List(String query, QueryParameters parameters) +282
   NHibernate.Impl.QueryImpl.List() +163
   DATA.SystempropExtensions.GetSystemprop() in C:\Users\HP\Desktop\our_project\DATA\Queries\Systemprop.cs:37
   MvcApplication7.Controllers.AccueilController.Index() in C:\Users\HP\Desktop\our_project\MvcApplication7\Controllers\AccueilController.cs:16
   lambda_method(Closure , ControllerBase , Object[] ) +62
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8841105
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:21:31.300

`dbo`从映射文档中取出所有括号和。只需使用表名和列名，就像在数据库中输入它们一样。然后试一试。

# android - 在 Handler 消息中声明 toast

> ID：12405800
> 
> 赞同：0
> 
> 时间：2012-09-13T12:02:26.080
> 
> 标签：android, toast

是否可以从处理程序中调用 Toast？如果是这样，怎么做？我当前的代码正在生成 NullPointer 异常。

这是我的代码：

```
Handler messageHandler = new Handler() {

    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        Toast toast=Toast.makeText(getApplicationContext(),"THIS IS TOAST DIALOG",Toast.LENGTH_LONG);
        toast.show();
        prgBar.setVisibility(prgBar.INVISIBLE);
       }
}; 
```

我的日志报告：

```
09-13 18:18:51.493: E/AndroidRuntime(1727): FATAL EXCEPTION: main

09-13 18:18:51.493: E/AndroidRuntime(1727): java.lang.NullPointerException

09-13 18:18:51.493: E/AndroidRuntime(1727): at    android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)

09-13 18:18:51.493: E/AndroidRuntime(1727): at com.example.threadingexperiment.ThreadingExperiment$1.handleMessage(ThreadingExperiment.java:46) 
```

在线显示错误：

```
Toast toast=Toast.makeText(getApplicationContext(),"THIS IS TOAST DIALOG",Toast.LENGTH_LONG); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:23:03.123

我认为您无法从处理程序访问 ApplicationContext。

您应该使用此处理程序所在的 Activity 的上下文。

# c# - 如何异步调用 WCF 服务？

> ID：12405810
> 
> 赞同：2
> 
> 时间：2012-09-13T12:02:53.813
> 
> 标签：c#, wcf, service, asynchronous

我正在尝试将 WCF 服务实现为 Windows 服务。我想异步调用它，因为有些方法可能会运行几秒钟。以下杂项。教程（例如来自[MSDN](http://msdn.microsoft.com/en-us/library/ms731177.aspx)）似乎并没有真正完成这项工作。我有一些工作，但从服务返回到客户端的数据不是我所期望的。服务器上的服务示例代码如下：

```
public interface ISomeService
{
    [OperationContract(AsyncPattern = true)]
    IAsnycResult BeginSomeMethod(string someString);

    Collection<string> EndSomeMethod(IAsnycResult asyncresult);
}

[...]

public SomeService : ISomeService
{
    public IAsyncResult BeginSomeMethod(AsyncCallback callback, object state)
    {
        // Do something...
        Collection collection = new Collection<string>{"Some Item", "Another Item"};
        return new CompletedAsyncResult<Collection<string>>(collection);
    }

    public Collection<string> EndSomeMethod(IAsyncResult asyncResult)
    {
        CompletedAsyncResult<Collection<string>> result = 
            asyncResult as CompletedAsyncResult<Collection<string>>;
        if(result != null)
        {
            return result.Data;
        }

        return result;
    }
} 
```

我可以成功安装 Windows 服务，也可以通过浏览器调用它来查看 WSDL。我还可以添加对我的“客户端”项目的引用来使用它——代理类等生成时没有任何错误。我也可以这样调用我的方法：

```
[...]
    object async = new object();
    someService.BeginSomeMethod( "Some string", EndSomeMethod, async );        
[...] 
```

回调方法如下所示：

```
[...]
public static void EndSomeMethod( IAsyncResult asyncResult )
    CompletedAsnycResult<Collection<string>> result = 
        asyncResult as CompletedAsnycResult<Collection<string>>;
[...] 
```

在此之后，结果为空（即强制转换不成功），并且 asyncResult 确实包含一些属性和数据，但不包含预期（或想要的）字符串集合。

**编辑** 我可以验证服务方法是否完成了它应该做的事情（例如写入日志文件、创建文件或类似的东西）。 **/编辑**

我尝试了更多的方法，但我对我在这里做错了什么感到有些困惑。Microsoft 提供的示例显然不正确（如在某些 MSDN 页面上阅读的那样）。我还发现了一些有关事件处理程序等的其他建议，但这是现在最好的方法吗？

我真的必须在 OperationContract 属性中使用 AsyncPattern = true 来装饰服务方法吗？或者我可以只使用 VS2010 的工具来生成异步调用方法的方法吗？

我知道关于这个问题有很多问题，但是在这个问题上花了几个小时后，我觉得很卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:24:14.313

您需要调用`someService.EndSomeMethod(asyncResult)`您的回调以获取服务结果。这实际上是标准 APM 模式的一部分。你必须用 say a 做同样的事情`FileStream`。

> 在此之后，结果为空

是的，因为`CompletedAsnycResult`只存在于服务器上。您的客户端可以获得运行时返回的任何其他类型。IAsyncResult 不是 WCF 有线合同的一部分。

在实践中，`asyncResult`将是一些 WCF 内部类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T05:35:08.947

让我在这里粘贴我在 WinForm .Net 4.0 中使用的模式：

```
//Server WCF
public SomeService
{
    [OperationContract]
    Collection<string> SomeMethod(string someString)
    {
        return new Collection<string>{"Some Item", "Another Item"};
    }
}

//Client
void button_Click(object sender, EventArgs e)
{
    var someService = new TypedServiceReference();
    someService.BeginSomeMethod("Hello", this.someMethodEnded, someService);
}
//will be called once the server reply
void someMethodEnded(IAsyncResult r)
{
    this.Invoke(new MethodInvoker(delegate//The callback is not in the GUI thread
    {
        var someService = (TypedServiceReference) r.AsyncState;//it is the last argument of the BeginSomeMethod() call
        Collection<string> result = someService.EndSomeMethod(r);//Will raise server or network exception (if any)
        this.Text = result.First();
    }));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:14:15.100

你看过这个吗？：

[wcf 异步处理](https://stackoverflow.com/questions/5959138/wcf-rest-not-processing-asynchronously?rq=1 "wcf 异步处理")

> 从您的示例来看，在我看来，您好像在“开始”调用完成之前完成了所有工作；这是我在学习异步模式时发现的一个常见错误。
> 
> 虽然我不熟悉它在 WCF 中的应用程序，但 Async 模型更典型的是一个 Begin 方法，它启动一些带有 IAsyncResult 对象的新线程，以由该新线程更新。要“完成”该操作，当 IsCompleted 设置为 true 时，原始调用者应将原始 IAsyncResult 对象传递回相应的 End 方法，该方法返回结果。一个简单的实现如下所示：

# php - php需要文件路径转义

> ID：12405818
> 
> 赞同：1
> 
> 时间：2012-09-13T12:03:28.167
> 
> 标签：php, security

现在我想知道是否只需要`require($path)`.

举*个最简单的例子*：
我有一些表单域`folder`和`name`. 因此，当我这样做`require($somepath.'/'.$folder.'/'.$name.'.php')`时，可以通过输入“../../admin/or/else/things/”轻松重新定位。

这是一个简单的例子，但有（我希望如此）许多其他方式来重新定位`$path`。

所以问题是：
- 提供传入路径的检查？
- 如果是的话..那么如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:21:19.847

如果您想根据用户输入要求另一个文件，您应该**非常仔细地**验证文件夹和名称字段。您不希望用户需要他们自己的文件（可能是他们刚刚上传的文件）或任何其他讨厌的东西。

理想情况下，您应该创建一个可接受值的列表，如下所示：

```
$allowedIncludes = array('a/foo.php', 'b/bar.php'); // etc 
```

然后您可以检查他们提供的名称和文件夹字段的组合是否有效：

```
if(false !== array_search("$folder/$name", $allowedIncludes) {
  // OK
  // require ...;
} else {
  // not ok
} 
```

但同样，在允许用户执行此类操作时要**非常小心。**您**不想**让人们在您的机器上执行任意代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:35:15.373

这是我的方式：

```
/* Valid Pages' Array */
$pages['welcome']['title'] = 'Welcome!';                // Page Title
$pages['welcome']['path'] = './pages/welcome.php';      // Physical Valid Path
$pages['welcome']['login'] = false;                     // Log-in Required?

$pages['my-account']['title'] = 'My Account';
$pages['my-account']['path'] = './user/my_account.php';
$pages['my-account']['login'] = true;

/* Requested Page */
$page = !empty($_REQUEST['page']) ? $_REQUEST['page'] : 'welcome';

/* Including ... */
if (file_exists($pages[$page]['path']))
    include($pages[$page]['path']);
else
    include($pages['404']['path']); 
```

# jquery - Jquery 从选择列表 optgroup 中获取选定的文本和值

> ID：12405824
> 
> 赞同：0
> 
> 时间：2012-09-13T12:03:45.593
> 
> 标签：jquery

我需要通过单击按钮从下面的 optGroup selectList 中获取选定的文本和值。那么像什么？

```
 $("#addButton").click(function () {

     var selected = ???
});          

  <select name="list">
    <optgroup label="mammals">
      <option>dog</option>
      <option>cat</option>
      <option>rabbit</option>
      <option>horse</option>
    </optgroup>
    <optgroup label="reptiles">
      <option>iguana</option>
      <option>snake</option>
    </optgroup>
  </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:08:23.380

您可以使用`Attribute Equals`选择器和`val`方法。

```
$("#addButton").click(function() {
    // var selected = $('select[name="list"] :selected');
    var val = $('select[name="list"]').val();
}); 
```

`val`方法返回 selected 的值`option`。但是，由于您的选项标签没有值属性，`val`因此返回`text`所选选项的。

```
var value = $('select[name="list"] :selected').val();
var text  = $('select[name="list"] :selected').text(); 
```

[http://jsfiddle.net/DRDsS/](http://jsfiddle.net/DRDsS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:17:34.037

为您的选择提供一个 ID，例如“列表”，您可以试试这个

```
$(function(){
   $("#addButton").click(function () {
       var select = $('select#list');
       var selectedItem= select.find(':selected');
       var selectedVal = select.val();
       var selectedText = selectedItem.text();
       var optgroupLabel = selectedItem.parent().prop('label');
       alert("val =" + selectedVal + " text ="+ selectedText+" group =" + optgroupLabel );
   });       
}); 
```

检查此**[演示](http://jsfiddle.net/MJ26K/3/)**

希望它会有所帮助。

# java - 如何强制 onPrepareOptionsMenu 方法触发？

> ID：12405825
> 
> 赞同：9
> 
> 时间：2012-09-13T12:03:53.130
> 
> 标签：java, android, android-menu

在我的活动`onCreateOptionsMenu`方法中，我只是扩充我的菜单布局文件并附加它。

我想根据全局变量的值 a 显示/隐藏一些菜单项，我在`onPrepareOptionsMenu`方法中执行此操作。我读过这是正确的地方。

我的`onPrepareOptionsMenu`方法并不总是触发。我不知道为什么，但当我按下手机上的“菜单”按钮时，它并不总是触发。也许它与它的内部状态有关。

它似乎在创建 Acitvity 时触发。第一次按“菜单”按钮不会触发它，但如果我第二次按菜单按钮，它就可以正常工作。

有没有办法可以强制`onPrepareOptionsMenu`开火。

谢谢

* * *

Smok 建议使用该`invalidateOptionsMenu`方法使菜单项无效，但这`onCreateOptionsMenu`也会导致该方法被触发。这是我的方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    System.out.println("onCreate");

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.search, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconified(false);
    searchView.requestFocusFromTouch();

    return true;

}

@Override
public boolean onPrepareOptionsMenu (Menu menu) {
    System.out.println("prepared");

    if (this.objAdapter == null) {
        menu.findItem(R.id.sort).setVisible(false);
        menu.findItem(R.id.filter).setVisible(false);
        menu.findItem(R.id.group).setVisible(false);
    } else {
        menu.findItem(R.id.sort).setVisible(true);
        menu.findItem(R.id.filter).setVisible(true);
        menu.findItem(R.id.group).setVisible(true);

    }

    return true;
} 
```

从我的`onCreateOptionsMenu`方法中可以看出，再次调用它会导致焦点丢失到`SearchView`.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T12:48:14.573

正如 Smok 指出的那样：通过调用`invalidateOptionsMenu()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-24T00:41:34.347

我遇到了同样的问题，我使用 supportInvalidateOptionsMenu() 方法进行了修复（因为我使用了支持活动）但有一个解决方法。

我有一个标志变量，我以这种方式检查 onCreateOptionsMenu(Menu menu) 方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    if (!IS_MENU_FIXED) {
        // Create menu only the first time the activity is loaded
        super.onCreateOptionsMenu(menu);
        getSupportMenuInflater().inflate(R.menu.main, menu);
        // Create menu items, etc...
    }
    return true;
} 
```

这就是我在需要时调用 supportInvalidateOptionsMenu() 的方式：

```
if (!IS_MENU_FIXED) {
    supportInvalidateOptionsMenu();
    IS_MENU_FIXED = Boolean.TRUE;
} 
```

这是关于这个主题的[官方文档。](http://developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu)

问候，加布里埃尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-17T05:05:36.790

我在 navigationDrawer Activity 中使用这段代码，它嵌套了两个片段（FullCoinsFragment 和 NewsFragment）：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.navigation, menu);

    MenuItem item = menu.findItem(R.id.action_search); //i will remove it later
    SearchView searchView = (SearchView) MenuItemCompat.getActionView(item);
    searchView.setOnQueryTextListener(this);

    return true;
}
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    FullCoinsFragment test = (FullCoinsFragment)getSupportFragmentManager().findFragmentByTag(FRAGMENT_COINS);
    if (test != null && test.isVisible()) return true; // i don't want to show this menu search in NewsFragment
    menu.removeItem(R.id.action_search); //i'm removing the search option
    return true;
} 
```

在我的 NewsFragment 的 onCreate() 中，我有这个：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_news, container, false);

    //views initialization

    getActivity().invalidateOptionsMenu(); //i'm forcing the call to onCreateOptionsMenu() and onPrepareOptionsMenu

    return view;
} 
```

# php - PHP / MYSQL - 无法获取每个条目的 ID

> ID：12405826
> 
> 赞同：0
> 
> 时间：2012-09-13T12:03:54.267
> 
> 标签：php, mysql

我正在编写客户数据库脚本。当我想实现可以编辑、删除和查看每个条目详细信息的“管理客户”站点时，我遇到了一个奇怪的问题。一切都按预期工作，但 ID 字段为空且无处添加。

我有以下代码：

```
 <?php
$qresult = mysql_query("SELECT ID , FirstName, LastName, Company FROM hs_customers");

echo "<table class='coverview' border='0' width='100%' cellpadding='0' cellspacing='0'>";
echo "<th>FirstName</th>
      <th>LastName</th>
      <th>Company</th>
      <th>Options</th>";

while($row = mysql_fetch_array($qresult))
{
echo "<tr>";
echo "<td>" . $row['FirstName'] . "</td>" . 
     "<td>" . $row['LastName'] . "</td>" . 
     "<td>" . $row['Company'] . "</td>" . 
     "<td>" . "<a href='?action=details&id='" . $row['ID'] . "'>Details</a>" .     " " . 
     "<a href='?action=edit&id='" . $row['ID'] . "'>Edit</a>" . " " . 
     "<a href='?action=delete&id='" . $row['ID'] . "'>Delete</a>" . "</td>";
echo "</tr>";
}
echo "</table>";

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T12:05:42.820

您使用`$row['uid']`但您`ID`从查询中选择，所以应该是`row['ID']`

此外，不要再使用像`mysql_query`. 如您所见，不鼓励[在这里阅读。](http://php.net/manual/en/function.mysql-query.php)请改用[msqli](http://www.php.net/manual/en/mysqli.query.php)。

最好的解决方案是使用[PDO](http://www.php.net/manual/en/class.pdo.php)。请也看看他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:05:30.960

不应该是：

```
$row['ID'] 
```

代替

```
$row['uid'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:05:44.773

你回声

```
$row['uid'] 
```

但是您从数据库中选择：

```
$row['ID'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T12:06:04.813

好吧，我想这只是因为您使用`$row['uid']`但在您的 SQL 查询中使用的是`ID`. 你应该`$row['ID']`改用。

# java - 连接网站时出错

> ID：12405829
> 
> 赞同：0
> 
> 时间：2012-09-13T12:04:04.230
> 
> 标签：java

我尝试运行以下代码：

```
public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL oracle = new URL("http://www.google.com/");
        URLConnection yc = oracle.openConnection();
        yc.connect();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                yc.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }
} 
```

但是控制台什么也没显示，当我尝试添加`yc.connect`控制台时显示以下错误：

```
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.net.NetworkClient.doConnect(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.<init>(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
at internet01.URLConnectionReader.main(URLConnectionReader.java:18) 
```

更新：我通过代理连接到互联网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:17:45.070

您正在通过代理进行连接，JVM 可能没有意识到这一点。

使用这些参数运行您的程序

`-Dhttp.proxyHost=proxy.ip -Dhttp.proxyPort=proxy.port`

或者在你的程序中设置它......

请参阅*gr5*的*Chris Carruthers*的[答案](https://stackoverflow.com/questions/120797/how-do-i-set-the-proxy-to-be-used-by-the-jvm)

# iphone - 显示蓝牙设置页面

> ID：12405832
> 
> 赞同：2
> 
> 时间：2012-09-13T12:04:19.260
> 
> 标签：iphone, ios, bluetooth, settings, core-bluetooth

如何在objective-c中显示蓝牙设置页面？

因此，如果用户关闭了蓝牙（即 CoreBluetooth 返回蓝牙状态已关闭），我希望在警报视图上有一个选项，可以将他们直接带到 iPhone/iPad 设置页面以允许他们打开它.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:59:43.083

这是在 iOS 5.0 和 5.0.1 中使用“prefs:” URL 方案完成的，但不幸的是，Apple 在 5.1 中弃用了该方案，这不再可能。

# android - Facebook for android 不发送通知？

> ID：12405835
> 
> 赞同：2
> 
> 时间：2012-09-13T12:04:29.387
> 
> 标签：android, facebook

我正在使用**facebook** android sdk 在 android 中发送应用程序请求，但是当我将 hackbook 用于 android 演示项目时，它会发送通知，但如果我使用 facebook 提供的我自己的应用程序 ID，则应用程序不会发送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:16:55.563

*   访问 Facebook.com，
*   点击页面底部的开发者，
*   点击顶部菜单上的应用程序

检查 App ID 是否与您应用中的 ID 完全相同。

# mongodb - 在 MongoDB 中搜索数组并按匹配数排序

> ID：12405837
> 
> 赞同：2
> 
> 时间：2012-09-13T12:04:35.233
> 
> 标签：mongodb, aggregation-framework, nosql

问题是下一个：

[获取列表中带有标签的文档，按匹配总数排序](https://stackoverflow.com/questions/8617318/get-documents-with-tags-in-list-ordered-by-total-number-of-matches)

但是他们说使用聚合框架是可能的，这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T15:01:06.757

是的，可以使用聚合框架。

**假设**

*   此处使用的数据集与[获取列表中带有标签的文档中使用的数据集相同，按匹配总数排序](https://stackoverflow.com/questions/8617318/get-documents-with-tags-in-list-ordered-by-total-number-of-matches)
*   `tags`属性是一个集合（没有重复的元素）

**询问**

这种方法迫使您展开结果并使用展开的结果重新评估匹配谓词，因此它确实效率低下。

```
db.test_col.aggregate(
    {$match: {tags: {$in: ["shirt","cotton","black"]}}}, 
    {$unwind: "$tags"}, 
    {$match: {tags: {$in: ["shirt","cotton","black"]}}}, 
    {$group: {
        _id:{"_id":1}, 
        matches:{$sum:1}
    }}, 
    {$sort:{matches:-1}}
); 
```

**预期成绩**

```
{
    "result" : [
        {
            "_id" : {
                "_id" : ObjectId("5051f1786a64bd2c54918b26")
            },
            "matches" : 3
        },
        {
            "_id" : {
                "_id" : ObjectId("5051f1726a64bd2c54918b24")
            },
            "matches" : 2
        },
        {
            "_id" : {
                "_id" : ObjectId("5051f1756a64bd2c54918b25")
            },
            "matches" : 1
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T08:26:10.380

使用**$size**和**$setIntersection**将有效地解决这个问题，而不会导致内存倍增。

```
tagList = ['shirt', 'cotton', 'black']

db.test_col.aggregate(
    {$match: {tags: {$in: ["shirt","cotton","black"]}}}, 
    {$project: 
        {"title":1,"tags":1}, 
        {$order: 
            {"$size": 
                {"$setIntersection": [ tagList, "$tags" ]}}, 
    {$sort:{order:-1}}
    ); 
```

1.  首先，我们匹配至少有一个元素匹配的文档。

2.  然后我们投影我们需要的键/列以及新的订单键/列。顺序是通过计算“数据库中的标签”和“查询中的标签”之间的相交元素的数量来生成的。

3.  然后我们按降序进行简单排序。这对我有用。类似的问题[在这里回答](https://stackoverflow.com/a/44191286/11674547)

# python - 导入由变量定义的包

> ID：12405838
> 
> 赞同：2
> 
> 时间：2012-09-13T12:04:43.807
> 
> 标签：python

我想做一些包导入时序测试。为此，我想定义一个包列表：

```
packages = [ 'random', 'dateutils', ... ]

for package in packages:
    import package 
```

这当然不起作用，因为`import`尝试导入包“包”。我怎么知道`import`要导入变量“包”指向的包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T12:06:05.453

```
for package in packages:
    package = __import__(package) 
```

请注意，如果您从包中导入模块，例如`A.B`，

`__import__('A.B')`返回包`A`，但`__import__('A.B', fromlist = [True])`返回模块`B`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:07:20.540

阅读`"__import__"`手册中的方法描述可能对您有所帮助。

# logging - 如何在 weblogic 中使用 jdbc 日志记录获取特定查询的响应时间？

> ID：12405840
> 
> 赞同：1
> 
> 时间：2012-09-13T12:04:51.013
> 
> 标签：logging, jdbc, weblogic

可以使用对“oracleJdbcLogConfig.properties”的配置更改将特定查询的响应时间记录在“Weblogic-jdbc logging”中吗？或者要得到它，还有其他方法吗？我只想知道我在 weblogic 上运行的应用程序需要多长时间才能获得应用程序运行的“特定查询/有时查询”的响应...

目前我已经在我的 oracleJdbcLogConfig.properties 文件中设置了所有内容，如下所示：

```
 .level=SEVERE
    oracle.level=FINE
    oracle.jdbc.level=FINE
    oracle.jdbc.driver.level=FINE
    oracle.jdbc.pool.level=OFF
    oracle.jdbc.rowset.level=OFF
    oracle.jdbc.util.level=OFF
    oracle.jdbc.xa.level=FINE
    oracle.sql.level=FINE

    oracle.jdbc.level=ALL
    oracle.jdbc.handlers=java.util.logging.FileHandler
    java.util.logging.FileHandler.level=ALL
    java.util.logging.FileHandler.pattern=D:/jdbclogs/jdbcLogging.log
    java.util.logging.FileHandler.count=1
    java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter` 
```

使用上述配置，我可以在“jdbcLogging.log”文件中获取查询，但无法获取获得该查询响应所需的时间。（我的应用程序正在生成查询）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:24:30.280

您可以使用此分析器：

[http://www.slf4j.org/extensions.html](http://www.slf4j.org/extensions.html)

它是 sl4j 的扩展

# php - OnClick/Onhover Javascript/jquery

> ID：12405841
> 
> 赞同：-3
> 
> 时间：2012-09-13T12:04:52.677
> 
> 标签：php, javascript, jquery, css

关于如何创建**Onclick/Hover**事件的任何想法，该事件将显示我想用作快速帮助按钮的标题/气泡/弹出窗口。将不胜感激其他来源/文章的任何想法或重定向。

编辑：这是我到目前为止得到的。

```
 $(document).ready(function()
 {
    $('a[title]').qtip();
 });

  <div class="helpcss"><a href="" title="HELP HELP HELP HELP">Help?</a></div> 
```

请问有什么好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:09:19.167

```
<div id="myPopup" style="display: hidden;">Hey here's your help<div>
<a href="" id="myLink">Click me</a> 
```

```
$.on("hover", "#myLink", function(e) {
     e.preventDefault();
     $("#myPopup").show();
});
$("#myLink").click(function(e) {
    e.preventDefault();
    $("#myPopup").show();
}); 
```

这很粗糙，可能会让您入门。互联网上有大量的教程，也许更多的谷歌搜索会产生一些有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:09:01.347

在大多数浏览器中，如果你设置了链接或输入的标题属性，当用户将鼠标悬停在元素上时，会有一个工具提示。

那是最快的方法。

# c# - 单击半透明 System.Windows.Controls.Image (PNG)

> ID：12405845
> 
> 赞同：2
> 
> 时间：2012-09-13T12:04:57.313
> 
> 标签：c#, image, click, png, transparent

我有一个部分透明的 PNG 文件。我希望能够点击透明区域并点击非透明区域。

例如。在此图像的透明区域下方是一个按钮。当我单击这个透明区域时，应该单击该按钮。

我从下面的代码开始，但我似乎无法让它工作：

```
private void Image_PreviewMouseUp(object sender, MouseButtonEventArgs e)
{
    Image image = (Image)sender;
    Point mousePoint = e.GetPosition(image);
    CroppedBitmap cb = new CroppedBitmap(image.Source as BitmapSource, new Int32Rect((int)mousePoint.X, (int)mousePoint.Y, 1, 1));                          

    byte[] pixels = new byte[4];
    cb.CopyPixels(pixels, 4, 0);

    if (pixels[3] != 0)
    {
       image.IsHitTestVisible = true;
    }
    else
    {
       image.IsHitTestVisible = false;
       e.Handled = true;
    }            
} 
```

我也尝试过引发冒泡事件，但仍然没有运气。

有任何想法吗 ？

# html - 使用 swfobject 在网页中显示 swf 文件

> ID：12405851
> 
> 赞同：0
> 
> 时间：2012-09-13T12:05:13.620
> 
> 标签：html

我创建了 .html 页面，该页面使用 swfobject 加载 swf 文件。默认情况下，swf 文件被编程为以最大化状态加载。现在我面临的问题是当我在 html 页面中启动 swf 文件时显示最大化的内容，我们需要最大化或最小化 IE 以在正常状态下查看 swf 内容..有没有办法在 html 页面中显示未处于最大化状态的 swf 内容..

下面是我的代码，

```
<script type="text/javascript">
    swfobject.embedSWF("TestApplication.swf", "myContent", "100%", "100%", "9.0.0");
    </script> 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:31:34.203

您可以通过将宽度 100% 和高度 100% 的两个值更改为较低的值来实现。像

```
<script type="text/javascript">
swfobject.embedSWF("TestApplication.swf", "myContent", "20%", "100%", "9.0.0");
</script> 
```

或者，您可以使用[http://wiltgen.net/objecty/](http://wiltgen.net/objecty/)

Objecty 会让你的生活变得更简单。

# php - “相同”的字符串不同

> ID：12405856
> 
> 赞同：0
> 
> 时间：2012-09-13T12:05:31.913
> 
> 标签：php, string, wordpress, utf-8

我有 2 个字符串`"CHILDREN’S"`。

其中一个被保存到 MySQL 数据库中（实际上它是一个页面标题，来自 WordPress）。另一个是数据库中字符串的复制和粘贴版本。

当我`var_dump`在 2 个字符串 ( `var_dump("CHILDREN’S"); var_dump($string)`) 上运行时，复制粘贴的字符串是`string(12) "CHILDREN’S"`，从数据库中显示的字符串是`string(16) "CHILDREN’S"`. 我假设这是一个 UTF-8 问题。

有人可以解释为什么相同的字符串实际上并不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:11:35.097

“儿童”是十个字符。要使其变为 12，“'”必须成为 UTF-8 代码点，这没关系。

但除非第二个引号真的是`&rsquo;`. 除 HTML 实体外，我所知道的没有七字节编码。

如果是这样，那么`html_entity_decode`可能是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:15:33.660

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:16:36.627

To see how the strings really differ, you could write the hex out of every string.

For example:

```
$s1 = 'CHILDREN\'S';

for($i=0; $i<strlen($s1); $i++)
  echo '0x' . bin2hex(substr($s1, $i, 1)) . ' '; 
```

This gives `0x43 0x48 0x49 0x4c 0x44 0x52 0x45 0x4e 0x27 0x53` as a result. Try the same with the string from the database, and see where it differs.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:10:50.900

这可能是一个编码问题，在这种情况下，您需要检查数据库列的编码并确保它是您所期望的。

或者，您可能在数据库字符串中有几个不可打印的字符——可能是您从数据库工具中复制/粘贴了某种讨厌的字符。

# asp.net - ASP.NET 中的 SendGrid 事件 API

> ID：12405859
> 
> 赞同：2
> 
> 时间：2012-09-13T12:05:40.587
> 
> 标签：asp.net, sendgrid

我正在使用 SendGrid API 发送邮件，现在我想了解电子邮件使用什么事件？

请参考[本站](http://docs.sendgrid.com/documentation/api/event-api/)

就像它是否已交付、处理、打开等...我也想在我的数据库表中获得该状态。

那么有谁知道我需要做什么样的集成或者我需要应用什么样的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T21:41:44.717

免责声明：我在 SendGrid 工作

要获取发生的事件，您可以在仪表板中启用事件通知应用程序（或使用设置 API 调用启用它，[http://docs.sendgrid.com/documentation/api/web-api/webapifilters/](http://docs.sendgrid.com/documentation/api/web-api/webapifilters/)）

首先，您需要提供一个 URL，我们将向该 URL 发布有关消息发生的事件的信息。目前的活动列表是：

*   我们处理了消息
*   消息被丢弃
*   消息被推迟（我们稍后再试）
*   消息已送达
*   从 ISP/ESP 退回的消息
*   消息被打开
*   消息中的链接被点击
*   收件人退订
*   用户将该邮件报告为垃圾邮件。

# fortran90 - Fortran 90：可分配数组不能出现在“EQUIVALENCE”中

> ID：12405863
> 
> 赞同：2
> 
> 时间：2012-09-13T12:05:47.343
> 
> 标签：fortran90

我有一个大数组，数组太大了，我必须使用“可分配”并在 fortran 中分配。例如，

```
complex(8),allocatalbe :: E0(:, :, :)
allocate(E0(1000,1000,1000)) 
```

我需要在我们的代码中将数组的形式从转换`E0(1000,1000,1000)`为`E1(1000*1000,1000)`，即将一个三维数组`E0(M,N,L`) 转换为其对应的二维`E1(M*N,L)`。但是，我不能使用这些语句：`Equivalence (E0,E1)`因为它是“可分配的”。`E1(M*N,L)`由于内存有限，我不喜欢定义或分配另一个数组。

有没有人有一些方法来实现：`Equivalence(E0,E1)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T00:51:15.157

将第三级数组传递给具有显式形状或假定大小为第二级的虚拟参数的特定过程。实际参数和虚拟参数之间的序列关联将为您提供等效的等价物。

```
PROGRAM remap
  IMPLICIT NONE
  REAL, ALLOCATABLE :: a(:,:,:)
  INTEGER :: i
  !****
  ALLOCATE(a(2,3,4))
  a = RESHAPE( (/ (REAL(i), i=1, PRODUCT(SHAPE(a))) /), SHAPE(a))
  CALL remapped(a, SIZE(a,1) * SIZE(a,2), SIZE(a,3))
CONTAINS  
  SUBROUTINE remapped(b,n,m)
    INTEGER, INTENT(IN) :: n, m
    REAL, INTENT(IN) :: b(n,m)
    !****
    ! Should print the first "page" of the actual argument.
    PRINT "(99(F6.1,:,' '))", b(:,1)
  END SUBROUTINE remapped
END PROGRAM remap 
```

后来的标准具有指针等级重新映射的附加选项。

# bash - 如何删除包含特定字符串的所有行，但仅当后面的字符是 CJK 字符时？

> ID：12405864
> 
> 赞同：2
> 
> 时间：2012-09-13T12:05:47.920
> 
> 标签：bash, sed, grep

我需要从包含匹配的文件中删除所有行 for `read (symbol)`，其中`(symbol)`是任何 CJK 字符。在匹配项中`read (symbol)`，前面紧跟 AZ 或 az，但是，不应删除该行。例如，这里有一些示例行和结果：

```
Do you like to read books? (not deleted)
Can you read 书? ( deleted)
.read 书. (deleted)
This is some thread 线. (not deleted) 
```

我怎样才能只删除那些匹配的行`(not A-Z or a-z)read (CJK symbol)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:15:57.593

```
awk '$0~/ read [a-zA-Z]+/' your_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:23:20.957

我不完全确定如何匹配 CJK 字符，但如果您匹配非 ASCII 字符，您*可能会*获得您正在寻找的结果：

```
grep -vP "[^A-Za-z]read [\x80-\xFF]" file.txt 
```

从理论上讲，您应该能够：

```
grep -vP "[^A-Za-z]read [\x{2E80}-\x{9FBB}]+" file.txt 
```

但是在我的测试中，我得到了错误：

```
grep: character value in \x{...} sequence is too large 
```

[http://en.wikipedia.org/wiki/List_of_Unicode_characters#CJK_unified_ideographs](http://en.wikipedia.org/wiki/List_of_Unicode_characters#CJK_unified_ideographs)

**编辑：**

```
LC_ALL="POSIX" sed -r '/[^A-Za-z]read [\o200-\o377]+/d' file.txt 
```

结果：

```
Do you like to read books? (not deleted)
This is some thread 线. (not deleted) 
```

另见：

[如何删除紧跟在特定符号之后的所有 CJK 文本？](https://stackoverflow.com/questions/12445341/how-to-delete-all-cjk-text-appearing-immediately-after-a-particular-symbol/12446299#12446299)

# android - 如何在 Android 的非活动类中访问 getResources()？

> ID：12405865
> 
> 赞同：1
> 
> 时间：2012-09-13T12:05:49.260
> 
> 标签：android

请参考下面的代码

```
ForegroundColorSpan ss = new ForegroundColorSpan(context.getResources().getColor(R.color.red_text)); 
```

这就是我要做的，但它通过一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:12:08.230

在你可以做的非活动Java类中，

```
public static void doSomething(Context ctx){
        ctx.getResources().getDrawable(R.drawable.app_icon);
    } 
```

`activity`并从您的班级中调用它。

```
javaClassObj.doSomething(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:09:38.857

你得到什么错误？

你的上下文来自哪里？

您可以尝试在您的项目中进行“清理”，或者尝试获取另一个上下文。

或者在调用非活动类时通过参数传递上下文......

[]s 贝尔坦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:09:50.510

将活动上下文或应用程序上下文传递给非活动类的构造函数并使用此上下文。

# ios - 测试期间的iOS错误

> ID：12405873
> 
> 赞同：0
> 
> 时间：2012-09-13T12:06:05.030
> 
> 标签：ios, unit-testing

我正在尝试测试（而不是运行）我的应用程序，但出现以下错误：

> 线程 1：EXC_BREAKPOINT（代码=EXC_I386_BPT，子代码=0x0）

它指向我的视图控制器的 initWithNibName 中的一行。

```
@synthesize messageTextView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) 
    {
        /*
        some code
        */
     //This is the line where the exception points:
     messageTextView = [[UITextView alloc]initWithFrame:CGRectMake(0, 306, 320, 110)];
        /*
        some other code
        */

    }
    return self;
} 
```

我的 viewcontroller 的 .h 文件如下所示：

```
@interface SMMenuViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, UITextFieldDelegate ,UITextViewDelegate> 
{
        /*
        some code
        */

}

@property (retain, nonatomic) IBOutlet UITextView *messageTextView; 
```

我还在 viewDidUnload 中“无”messageTextView。

我不知道到底出了什么问题，因为当我运行它时它工作正常，它只在测试期间失败。

很感谢任何形式的帮助！

真挚地，

佐利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:40:06.203

首先，您不需要分配/初始化一个被引用的视图`IBOutlet`（它由您的 xib / 情节提要自动实例化）。

现在，您真正应该做的是将视图自定义移动到`viewDidLoad`方法中，因为未加载视图层次结构`init`（因此实际上您的所有视图都`nil`在那个时候）。当您第一次尝试访问层次结构中的一个视图时，它会被加载。

所以基本上你可以做这样的事情：

```
- (void)viewDidLoad
{
    [self.messageTextView setFrame:CGRectMake(0, 306, 320, 110)];
} 
```

我希望这是有道理的......

# kendo-ui - Kendo UI Grid - 在链接点击时显示网格

> ID：12405874
> 
> 赞同：4
> 
> 时间：2012-09-13T12:06:06.937
> 
> 标签：kendo-ui, kendo-grid

我正在使用 KendoUI Web 并希望单击 Kendo ListView 内的链接以显示 Kendo Grid。我正在使用 ListView 的模板。

HTML：

```
 <div id="listView" ></div>
 <div id="grid" ></div> 
```

模板：

```
<script type="text/x-kendo-tmplate" id="template">
  <div>
    <ul>
          <li><a class="list k-link" title="#= title #" id="#= id#" >#= name #</a></li>
    </ul>
    </div>
</script> 
```

我尝试使用以下代码执行此操作，但没有任何反应。只有 id 被正确读取，但没有发出请求。

```
 $(" .list").live({click:function(){ 

    var id=$(this).attr('id');

    $("#grid").kendoGrid({
         dataSource: {
              transport: {
                    read: "somefile.php?id="+id,  
               },
            schema: {
                    data:"data",
                    model: {
                        id: "id_pf",
                        fields:{
                                  first:{}, 
                                   second:{}
                                }
                   }
            },
            total: function(response) {
                return $(response.data).length;
            },

           pageSize: 10
        },

        columns: [
               { title: "First", field: "first"},
               { title: "Second", field: "second"},
                ]
    });

}}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:13:28.767

我通过删除函数外部网格的创建解决了这个问题。因此，首先显示的网格没有数据。

```
var ds=new kendo.data.DataSource({
          transport: {
                read: "somefile.php",  
           },
        schema: {
                data:"data",
                model: {
                    id: "id_pf",
                    fields:{
                              first:{}, 
                               second:{}
                            }
               }
        },
        total: function(response) {
            return $(response.data).length;
        },

       pageSize: 10
});

$("#grid").kendoGrid({
     dataSource: ds,

    columns: [
           { title: "First", field: "first"},
           { title: "Second", field: "second"},
            ]
  }); 
```

单击链接时，将使用更新的 url 重新读取数据源，刷新并现在显示所需的数据。

```
 $(" .list").live({click:function(){ 

var id=$(this).attr('id');

    var gridUrl = "somefile.php?id="+ id;

      var grid = $("#grid").data("kendoGrid");

       grid.dataSource.transport.options.read.url =gridUrl;
       grid.dataSource.read();
       grid.dataSource.refresh();

     }}); 
```

# apache-flex - 右键单击时向 Flash 播放器添加一个选项

> ID：12405878
> 
> 赞同：0
> 
> 时间：2012-09-13T12:06:22.247
> 
> 标签：apache-flex, adobe, flash

我想在 adobe player 的 flash 上下文菜单中添加一个选项。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:28:36.703

您想要将项目添加到上下文菜单。查看[ContextMenu](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/ContextMenu.html)类和[相关示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/ui/ContextMenu.html#includeExamplesSummary)。

这是我写的关于这个主题[的博客文章；](http://www.jeffryhouser.com/index.cfm/2008/12/2/Accessing-the-Right-Click-Menu-in-Flex)它将上下文菜单添加到图像。这是来源：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="onCreationComplete()" width="100%" height="100%" viewSourceURL="srcview/index.html">
    <mx:Image width="100%" height="100%" source="assets/spacer.jpg" alpha="0" maintainAspectRatio="false" id="ImageTest" />

    <mx:Script>
        <![CDATA[

            public function onCreationComplete():void{
                var menuItem:ContextMenuItem = new ContextMenuItem("Version 1");
//                menuItem.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT,doStuff);

                var customContextMenu:ContextMenu = new ContextMenu();

                //hide the Flash menu
//                customContextMenu.hideBuiltInItems();
                customContextMenu.customItems.push(menuItem);

                ImageTest.contextMenu = customContextMenu;
            }

            private function doStuff(e:Event):void{
                trace('stuff');
            }

        ]]>
    </mx:Script>
</mx:Application> 
```

# .net - 我可以在 Visual Studio 2010 中的 ASP.Net WebForm 上使用 DataGrid 吗？

> ID：12405884
> 
> 赞同：0
> 
> 时间：2012-09-13T12:06:41.913
> 
> 标签：.net, visual-studio-2010, datagrid, webforms

我正在使用面向 .Net 2.0 的 Visual Studio 2010 创建一个简单的 WebForm，但我似乎无法在工具箱中找到 Datagrid。

两个问题：

1.  DataGrid 是否存在于 Visual Studio 2010 工具箱中？如果是这样，它在哪里（截图会很棒）
2.  如果没有，我可以以编程方式添加它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:20:15.887

它应该在那里，可能在“数据”部分下。但是您始终可以自己添加标记。

```
<asp:DataGrid id="yourGrid" runat="server"></asp:DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:10:09.240

它是工具箱中的gridview。我希望你正在寻找它。

# java - 如何发现特定数据是否已加密？

> ID：12405886
> 
> 赞同：0
> 
> 时间：2012-09-13T12:06:50.523
> 
> 标签：java, android

如何发现特定数据（例如字符串或文件数据）是否已加密？我希望以编程方式发现这一点，而不是通过手动检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:17:25.047

There's no formal procedures to find out is data encrypted or not. Even manually it is not always possible to understand what kind of data we are dealing with.

Trying to decrypt a piece of data with all available decryption algorithms will take significant time and does not guarantee 100% result which can be trusted.

For your applications send a flag to the recipent to make a signal that data is encrypted/is not encrypted.

# java - 从应用程序将 PDF 文件附加到电子邮件

> ID：12405892
> 
> 赞同：3
> 
> 时间：2012-09-13T12:07:20.463
> 
> 标签：java, android

我正在使用 android 并尝试发送附有文件的电子邮件，但收到以下错误。

> android.content.ActivityNotFoundException：未找到处理 Intent 的 Activity { act=android.intent.action.SENDTO dat=file://assets/Cards/myfile.pdf typ=Applications/pdf flg=0x10000000（有附加功能）}

我对 android dev 很陌生，所以我有点迷失了我需要做什么。以下是我目前正在尝试的

```
Intent intent = new Intent(Intent.ACTION_SENDTO ); // it's not ACTION_SEND
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_SUBJECT, "Card Set "));
intent.putExtra(Intent.EXTRA_TEXT, "");
intent.setData(Uri.parse("mailto:"));
intent.setDataAndType(Uri.parse("file://assets/Cards/" + "myfile.pdf"),
                                                          "Applications/pdf");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
activity.startActivity(intent); 
```

我可以在不附加文件的情​​况下很好地创建和发送电子邮件。关于我应该如何正确附加文件的任何帮助将非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:20:49.060

好的，感谢 Kartik 的链接，我设法找到了附加文件的正确方法（一种有效的方法）。在四处搜索后，我发现这显示了如何将文件存储到外部存储器 [http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29)

所以我使用此页面上的修改后的 createExternalStoragePublicPicture() 写入内存，然后执行以下操作

```
createExternalStoragePublicPicture();
File path = Environment.getExternalStoragePublicDirectory(
                                                Environment.DIRECTORY_PICTURES);
                                        File file = new File(path, "cards_01.pdf");
Intent intent = new Intent(Intent.ACTION_SEND ,Uri.parse("mailto:")); // it's not ACTION_SEND
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_SUBJECT, "Card Set ");
intent.putExtra(Intent.EXTRA_TEXT, "");
intent.putExtra(Intent.EXTRA_STREAM,Uri.fromFile(file));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // this will make such that when user returns to your app, your app is displayed, instead of the email app.
activity.startActivity(intent); 
```

上面的链接还显示了如何删除文件，并说明将它们放在正确的文件夹中以避免覆盖其他文件。希望这可以帮助其他有同样问题的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:12:26.570

我认为[这个例子](http://mooriandroid.blogspot.in/p/email-attachment-from.html)mi8 帮助你的场景:)

# php - 在php中获取变量值

> ID：12405897
> 
> 赞同：3
> 
> 时间：2012-09-13T12:07:50.650
> 
> 标签：php

我有变量`$CV1`，，......如何在PHP的while循环中获取这些变量的值`$CV2`？`$CV3`下面是我的代码

```
$CV1=$fetch->Custom_field1;
$CV2=$fetch->Custom_field2;
$CV3=$fetch->Custom_field3;
$CV4=$fetch->Custom_field4;
$query=mysql_query("select * from customfields where CustomField like '%Invoice%' and CustomLabel != ''");
while($get=mysql_fetch_object($query))
        {
            $i++;
            $Label=$get->CustomLabel;
            $CFV='$CV'.$i;
            echo "<tr><td>$Label</td><td><input type='text' name='custom_field$i' value='$CFV'></td></tr>";
        } 
```

但不是获得 , 的`$CV1`值`$CV2`。我将变量名本身作为输出。`$CV1`,`$CV2`等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:10:18.760

使用[array()](http://php.net/manual/en/language.types.array.php)而不是命名变量。

```
$CV[1] = $fetch->Custom_field1;
$CV[2] = $fetch->Custom_field2; 
```

然后以这种方式获得您的价值：

```
$CFV = $CV[$i]; 
```

另外，不要忘记初始化`$i`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:12:18.520

您可以使用：

```
$CFV = ${'CV'.$i}; 
```

请参阅[键盘示例](http://codepad.org/V3X9hMaS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:10:19.460

这是因为您将变量名称包装在单引号中，它不会解析变量值，所以您只是按原样获取文本。

尝试：

```
$CFV = $CV{$i}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:11:20.673

像这样使用php变量变量

```
$CFV="${CV$i}"; 
```

# gxt - 如何在 GXT 中设置复选框标签的样式

> ID：12405900
> 
> 赞同：1
> 
> 时间：2012-09-13T12:07:55.643
> 
> 标签：gxt

这是有效的代码：

```
 myCheckBox = new CheckBox();
    myCheckBox.setBoxLabel("my checkbox label"); 
```

我把它放在一个面板中，它创建了一个可单击的复选框，以及一个在单击时切换复选框的标签。

这是我认为我应该添加标签样式的方式，但这不起作用。myCheckBox.setLabelStyle(myCheckBoxLabelStyle);

我没有做任何设置标签样式的工作。

```
 setStyleName();     
    setStyleAttribute();        
    addStyleName(); 
    setLabelStyle(); 
```

我能够创建一个单独的 Label 元素，为其设置样式，在其上放置一个单击处理程序并让单击处理程序设置复选框值，但我认为这样做是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:52:06.467

设置框标签样式的一种方法是继承 Checkbox 并`boxLabelEl`直接访问受保护的元素。

# android - 为 android 2.2 添加证书

> ID：12405902
> 
> 赞同：1
> 
> 时间：2012-09-13T12:08:07.483
> 
> 标签：android, ssl-certificate, ioexception

我正在尝试向我的应用程序添加证书，以便它可以访问服务器。我已经阅读了一些博客并相应地实现了。当我测试它时，它给我带来了错误。这是我得到的logcat

```
09-14 11:44:48.766: W/System.err(24802): java.io.IOException: SSL handshake failure: I/O error during system call, Connection reset by peer
09-14 11:44:48.774: W/System.err(24802): at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.nativeconnect(Native Method)
09-14 11:44:48.774: W/System.err(24802): at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:316)
09-14 11:44:48.774: W/System.err(24802): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.getSecureSocket(HttpConnection.java:168)
09-14 11:44:48.784: W/System.err(24802): at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:399)
09-14 11:44:48.784: W/System.err(24802): at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:1373)
09-14 11:44:48.784: W/System.err(24802): at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:117)
09-14 11:44:48.784: W/System.err(24802): at com.wheelz.connection.methods.GetConnectionMethod_JavaNet.send(GetConnectionMethod_JavaNet.java:176)
09-14 11:44:48.784: W/System.err(24802): at com.wheelz.connection.HttpRequest.getMethod(HttpRequest.java:182)
09-14 11:44:48.784: W/System.err(24802): at com.wheelz.connection.HttpRequest.sendRequest(HttpRequest.java:141)
09-14 11:44:48.794: W/System.err(24802): at com.wheelz.connection.HttpRequest.send(HttpRequest.java:123)
09-14 11:44:48.794: W/System.err(24802): at com.wheelz.activity.SplashScreen$2.run(SplashScreen.java:73)
09-14 11:44:48.794: W/System.err(24802): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-14 11:44:48.794: W/System.err(24802): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-14 11:44:48.804: W/System.err(24802): at java.lang.Thread.run(Thread.java:1102)
09-14 11:44:48.804: E/VERSION :(24802): UNAUTHORIZED
09-14 11:44:48.804: W/System.err(24802): org.json.JSONException: Value UNAUTHORIZED of type java.lang.String cannot be converted to JSONObject
09-14 11:44:48.814: W/System.err(24802): at org.json.JSON.typeMismatch(JSON.java:107)
09-14 11:44:48.814: W/System.err(24802): at org.json.JSONObject.<init>(JSONObject.java:158)
09-14 11:44:48.814: W/System.err(24802): at org.json.JSONObject.<init>(JSONObject.java:171)
09-14 11:44:48.814: W/System.err(24802): at com.wheelz.activity.SplashScreen$2.run(SplashScreen.java:76)
09-14 11:44:48.824: W/System.err(24802): at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
09-14 11:44:48.824: W/System.err(24802): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
09-14 11:44:48.824: W/System.err(24802): at java.lang.Thread.run(Thread.java:1102) 
```

为什么我得到“不受信任的服务器”，而我就是一切？

这是我使用的代码

```
public class GetConnectionMethod_JavaNet {

private String url;
private int STATUS_CODE = -1;
private String requestData;
private int isContentChanged = Constants.NO_NEW_CONTENT_AVAIL;  //304 means no change in content
private HttpsURLConnection urlConnection;
//private DefaultHttpClient httpclient;
private InputStream inputStream ;
public SSLContext sslContext;
PreferenceManagerUtil pmUtil = new PreferenceManagerUtil();
public GetConnectionMethod_JavaNet(String url, String requestData ) {

 this.url = url;
 this.requestData = requestData;

}

/**
 * setting the headers
 */
private void setHeaders () {

 String FBToken = pmUtil.getPreferenceValue(Constants.FBTOKEN, "FACEBOOKTOKEN");

 urlConnection.setRequestProperty("Connection","Keep-Alive");
 urlConnection.addRequestProperty(Constants.APIVERSION, Constants.APIVERSIONVALUE);
 urlConnection.addRequestProperty(Constants.PLATFORM, Constants.PLATFORMVALUE);
 urlConnection.addRequestProperty(Constants.FACEBOOK_TOKEN,FBToken);
 urlConnection.addRequestProperty(Constants.CONTENT_TYPE, Constants.APPLICATIONJSON );
}

/**
 * Trust every server - dont check for any certificate
 */
private static void trustAllHosts() {

 KeyStore trustStore = null;
 try {
  trustStore = KeyStore.getInstance("BKS");
 } catch (KeyStoreException e2) {
  // TODO Auto-generated catch block
  e2.printStackTrace();
 }
 try {
  trustStore.load(getApplicationContext().getResources().openRawResource(R.raw.my_certificate),
         "mypassword".toCharArray());
 } catch (NoSuchAlgorithmException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
 } catch (CertificateException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
 } catch (NotFoundException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
 } catch (IOException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
 }
        TrustManagerFactory trustMgr = null;
   try {
    trustMgr = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
   } catch (NoSuchAlgorithmException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
   }
        try {
    trustMgr.init(trustStore);
   } catch (KeyStoreException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
   }

               try {
                SSLContext sc = SSLContext.getInstance("TLS");

                sc.init(null, trustMgr.getTrustManagers(), new java.security.SecureRandom());
                HttpsURLConnection
                                .setDefaultSSLSocketFactory(sc.getSocketFactory());
        } catch (Exception e) {
                e.printStackTrace();
        }
}

 public Object send ( int returnType ) {

 try {
  URL url = new URL(this.url);

   System.setProperty("http.keepAlive", "false");
   trustAllHosts();
  if ( urlConnection == null ) {
   urlConnection = (HttpsURLConnection) url.openConnection();//Without Proxy
  }

urlConnection.setHostnameVerifier(SSLSocketFactory.STRICT_HOSTNAME_VERIFIER);
  setHeaders();

  STATUS_CODE = urlConnection.getResponseCode();

  if(STATUS_CODE == 201  || STATUS_CODE == 200 ){
   inputStream = urlConnection.getInputStream();
  }else{

   inputStream = urlConnection.getErrorStream();
  }  

  switch ( returnType ) {

  case Constants.TYPE_BYTE :   return null;
  case Constants.TYPE_STREAM:  return null;
  case Constants.TYPE_STRINGBUFFER :  

   if ( inputStream != null) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream),8 * 1024);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
     sb.append(line + "\n");
    }
    return new StringBuffer ( sb.toString() );
   }
  }

  return null;
 } catch ( UnknownHostException e ) {
  e.printStackTrace();
  STATUS_CODE = 001;

 } catch (IOException e) {
  e.printStackTrace();
  return new StringBuffer("UNAUTHORIZED");  

 } catch ( Exception e ) {
  e.printStackTrace();
 }catch (Error e) {
  e.printStackTrace();
 }

 finally {
  try{
   // release the memory
   if(urlConnection!=null)
    urlConnection.disconnect();
  }catch (Exception e) {
  }
 }

 return null;
}

public int getStateCode(){

 return STATUS_CODE;
}

public int isNewContentAvaialable(){

 return isContentChanged;
}

} 
```

# list - 使用 grails 中的列表

> ID：12405906
> 
> 赞同：0
> 
> 时间：2012-09-13T12:08:20.413
> 
> 标签：list, grails, groovy

我正在尝试获取用户等于当前登录用户的域的每个实例。我现在的代码是：

```
def list(Integer max) {
    params.max = Math.min(max ?: 10, 100)
    if (lookupPerson().username == "admin"){
         adminList(max)
    }
    else{

        def childList = []
        def i = 1
     Child.list().each(){
         if(Child.get(i).user.username == lookupPerson().username){
             def child = Child.get(i)
             childList.add(child)
         }
          i++
     }
        [childInstanceList: childList.list(params), childInstanceTotal: childList.count()]
    }

} 
```

这给了我以下错误 No signature of method: java.util.ArrayList.list() is applicable for argument types: (org.codehaus.groovy.grails.web.servlet.mvc.GrailsParameterMap) values: [[action:list , controller:child, max:10]] 可能的解决方案：last(), first(), asList(), toList(), is(java.lang.Object), wait()

我确信必须有一种更简单、更好的方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:15:16.347

您可能可以使用条件查询来执行您想要的操作：

```
def childList = Child.createCriteria().list(params) {
  user {
    eq('username', lookupPerson().username)
  }
} 
```

如果您`params`有分页参数，则“总数”将可用`childList.totalCount`，您无需单独计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:22:36.143

请添加域类。

但无论如何，我想，你的“其他”分支应该像这样：

```
Child.list().each {
    if( it.user.username == lookupPerson().person ) {
        childList.add( it )
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:25:43.353

```
def childList = Child.findByUser(lookupPerson.username) 
```

或者

```
def childList = Child.withCriteria {
    eq("user", lookupPerson)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:26:08.933

如果您有 Child 和 User 类...为什么不这样做？...

```
class Child {
    //properties
    User user
}

class User {
   //properties

  def getChilds() {
     Child.findAllByUser(this)
  }
} 
```

然后你只需要在你的控制器、服务、视图上调用它：

```
def user = User.findByUsername(params.username)
def childs = user.childs //or user.getChilds() 
```

# java - 如何为 REST 服务生成 WADL

> ID：12405911
> 
> 赞同：38
> 
> 时间：2012-09-13T12:08:34.423
> 
> 标签：java, rest, testing, jax-rs, wadl

我有一个 Web 应用程序为客户提供 30 多个 REST 服务（使用 Jersey）。是否可以为我的应用程序自动创建 WADL 文档？

我需要这个，以便我可以在 SoapUI 中配置它以测试各种场景并保存以供以后使用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-25T22:26:17.540

如果您使用的是泽西岛，那么 wadl 的网址将类似于

`http://localhost:8080/applicationname/application.wadl`

您可能需要将资源库添加到 url 例如

`http://localhost:8080/applicationname/resources/application.wadl`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-14T03:11:31.760

```
http://{host}:{port}/{context_root}/{resource}/application.wadl 
```

`host`、`port`和`context root`的替换值`resource`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-13T13:16:53.410

过去我使用过[Enunciate](http://enunciate.webcohesion.com/)（[GitHub 存储库](https://github.com/stoicflame/enunciate)）。

它是一个构建时工具，可以自动为您生成接口定义文档（WADL、WSDL 等）。将它集成到您​​的 Maven 构建中非常容易。

# javascript - 从多选列表中删除

> ID：12405912
> 
> 赞同：0
> 
> 时间：2012-09-13T12:08:37.313
> 
> 标签：javascript, jquery, select

我需要使用 jQuery 从多个列表中删除一个项目

HTML：

```
<input type="checkbox" id="theCheckbox"/>
<select id="theSelect" multiple="multiple">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select> 
```

JavaScript：

```
$("#theCheckbox").change(function() {
    $("#theSelect").attr("multiple", (this.checked) ? "multiple" : "");
}).change(); 
```

[这就是例子。](http://jsfiddle.net/DdhSF/161/)

这是我的项目代码。如果您可以在此代码上实现，我会很高兴！ [我的代码](http://jsfiddle.net/WCPue/15/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:12:04.637

只需选择要删除的选项并`remove()`在其上调用函数：

```
$('#theSelect option:eq(1)').remove(); 
```

[http://jsfiddle.net/DdhSF/162/](http://jsfiddle.net/DdhSF/162/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:21:23.990

删除多选列表[见此编辑](http://jsfiddle.net/DdhSF/166/)

两种条件都有效。

```
$("#theCheckbox").change(function() {
    $("#theSelect").attr("multiple", (this.checked) ? "multiple" : "");
}).change();

$('a').click(function() {
    $('#theSelect option:selected').remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:26:06.697

```
$('#theSelect').change(function(){
    var selectedIndex = $(this)[0].selectedIndex;
    //alert(selectedIndex);
    var selected = $(this).children("option").eq(selectedIndex);
    selected.remove();
});
$("#theCheckbox").change(function() {
    $("#theSelect").attr("multiple", (this.checked) ? "multiple" : "");
}).change();​ 
```

# blackberry - BlackBerry 现场事件未触发？

> ID：12405914
> 
> 赞同：2
> 
> 时间：2012-09-13T12:08:43.207
> 
> 标签：blackberry, java-me

我在 Screen 构造函数中创建了一个按钮，但是当我单击该按钮时，我的事件没有执行，为什么会这样

我的代码是：

```
public myScreen(){
    _startPlayingButton = new ButtonField("Play/pause");

            _startPlayingButton.setChangeListener(new FieldChangeListener() {

                public void fieldChanged(Field field, int context) {
                    try {
                        // If the START button was pressed, begin playback
                        if (field == _startPlayingButton) {
                            // The player does not exist, we must initialize it
                            if (result) {
                                System.out.println("Result1" + result);
                                if (_player == null) {
                                    // Create a stream using the remote file.
                                    _source = new ShoutcastStream(_urlField.getText());

                                    UiApplication.getUiApplication().invokeLater(
                                            new Runnable() {
                                                public void run() {
                                                    // Update the player status
                                                    // _playStatusField.setText("Started");
                                                }
                                            });

                                    // Create and run the player's thread
                                    _playerThread = new PlayerThread();
                                    if (_playerThread != null) {
                                        _playerThread.start();
                                    } else {
                                        System.out.println("PlayerThread is null.");
                                    }
                                }
                                // The player already exists, simply resume it
                                else {
                                    _player.start();
                                }
                                result = false;

                            } else {
                                // Acquire the UI lock
                                System.out.println("Result2" + result);

                                 UiApplication.getUiApplication().invokeLater(new
                                  Runnable() { public void run() { 

                                 ("Stopped"); } });
                                  }
                                 });
                                // Destroy the Player and streams
                                destroy();
                                result = true;
                            }
                        }
                        // If the STOP button was pressed:

                    } catch (IOException ioe) {
                        ioe.printStackTrace();
                        errorDialog(ioe.toString());
                    } catch (MediaException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                        System.out.println(e);
                    }

                }
            });
            add(_startPlayingButton);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T06:20:56.773

试试这个：

```
 _startPlayingButton = new ButtonField("Play/pause")
{
    protected boolean navigationClick(int status, int time) 
    {
        fieldChangeNotify(1);
        return true;
    }
}; 
```

# .htaccess - mod_rewrite - 停止它附加一个问号和原始查询

> ID：12405926
> 
> 赞同：2
> 
> 时间：2012-09-13T12:09:21.003
> 
> 标签：.htaccess, mod-rewrite

我有一个这样的网址：

```
http://my.site/apps/123 
```

我想重定向到

```
http://my.site/app/123 
```

使用 mod_rewrite。但是，当我使用这个 .htaccess 时：

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^/apps/(.*)$ /app/$1 [R=301,L]
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

我在日志中收到 500 和此错误：

```
Request exceeded the limit of 10 internal redirects due to probable configuration error. 
Use 'LimitInternalRecursion' to increase the limit if necessary. 
Use 'LogLevel debug' to get a backtrace.
[Thu Sep 13 12:58:13 2012] [debug] core.c(3112): [client 127.0.0.1] r->uri = /index.php 
```

浏览器中的最终 URL 如下所示：

```
http://my.site/app/123?/apps/123 
```

**为什么 Apache 将 ?/apps/123 附加到 URL 上？**

我想如果我可以避免这种情况，那么我可以避免这里的无限递归问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:27:08.313

如果您想将 my.site/apps/123 重定向到 my.site/app/123，只需使用：

```
RewriteEngine on
RewriteBase /
RewriteRule ^apps/(.*)$ app/$1 [L,R=301] 
```

**编辑 ：**

您在错误的位置添加了规则，试试这个而不是您的规则：

```
RewriteEngine on
RewriteBase /
RewriteRule ^apps/(.*)$ app/$1 [L,R=301]
RewriteCond %{REQUEST_FILENAME} !^index\.php
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# java - 在 jtabbedpanel-java 的不同选项卡中保留不同文本字段的输入

> ID：12405927
> 
> 赞同：0
> 
> 时间：2012-09-13T12:09:25.263
> 
> 标签：java, swing, jtabbedpane

我有一个包含 3 个选项卡的 JTabbedPane，每个选项卡面板中有 2 个文本字段。用户在 tab1 的文本字段中输入输入/文本，然后转到 tab2 并为该选项卡的文本字段输入输入，然后...

有什么方法可以保留所有这些数据并通过单击按钮将所有这些数据保存到记事本之类的地方？我的意思是该按钮仅存在于最后一个选项卡中，但它应该获取不同选项卡中的所有数据。这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:20:00.227

你需要的是这个？

```
public class MainFrame extends JFrame {
private JTabbedPane tabbedPane;
private JButton btnNewButton;
private JPanel panel1;
private JPanel panel2;
private JTextField textField1;
private JTextField textField2;
public MainFrame() {
    initGUI();

    pack();
    setVisible(true);
}
private void initGUI() {
    // WindowBuilder Work
    tabbedPane = new JTabbedPane(JTabbedPane.TOP);
    tabbedPane.setName("tabbedPane");
    getContentPane().add(tabbedPane, BorderLayout.CENTER);
    // WindowBuilder Work
    panel1 = new JPanel();
    panel1.setName("panel1");
    tabbedPane.addTab("New tab", null, panel1, null);
    // WindowBuilder Work
    textField1 = new JTextField();
    textField1.setText("");
    panel1.add(textField1);
    textField1.setColumns(10);
    // WindowBuilder Work
    panel2 = new JPanel();
    panel2.setName("panel2");
    tabbedPane.addTab("New tab", null, panel2, null);
    // WindowBuilder Work
    textField2 = new JTextField();
    textField2.setText("");
    textField2.setColumns(10);
    panel2.add(textField2);
    // WindowBuilder Work
    btnNewButton = new JButton("Save");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(final ActionEvent e) {
            handleActionPerformed(e);
        }
    });
    btnNewButton.setName("btnNewButton");
    getContentPane().add(btnNewButton, BorderLayout.NORTH);
}

/**
 * @param args
 */
public static void main(String[] args) {
    new MainFrame();
}

protected void handleActionPerformed(final ActionEvent e) {
    String value1 = textField1.getText();
    String value2 = textField2.getText();

    // write values to file
} 
```

}

# zend-framework - 如何将 Zend 框架 2 集成到 Netbeans 7.2 IDE

> ID：12405928
> 
> 赞同：7
> 
> 时间：2012-09-13T12:09:27.967
> 
> 标签：zend-framework, netbeans, netbeans-7, netbeans-7.2

当我下载 Zend 框架包时，它不包含 zf.bat 或 zf.php 或 zf.sh 文件。Netbeans 需要 zend 框架的 zf.bat 文件的路径。有谁知道如何将 Zendframework 2 集成到 Netbeans 7.2 PHP IDE 中？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:05:32.180

Netbeans 7.2 甚至 7.3 都没有支持 Zend framework 2 的插件。我搜索了 ZF2 文档，没有可用的 zf.sh 工具。建议从 zend svn 或 git 存储库获取应用程序骨架。

# c# - 设置 FlowDocument 表格单元格的值

> ID：12405936
> 
> 赞同：2
> 
> 时间：2012-09-13T12:09:51.600
> 
> 标签：c#, .net, wpf

我需要插入

```
 var f = new Floater
                            {
                                Padding = new Thickness(0, 0, 0, 0),
                                Margin = new Thickness(0, 0, 5, 0),
                                HorizontalAlignment = HorizontalAlignment.Left,
                                Width = 210
                            }; 
```

进入表格单元格

```
var table = myFlowDocument.Document.Blocks.FirstBlock as Table;

table.RowGroups[0].Rows[0].Cells[0].SetValue(???); 
```

而且真的无法弄清楚我们该怎么做。

也不清楚如何清洁电池。

有什么线索吗？

谢谢！

（这个[链接](http://msdn.microsoft.com/en-us/library/system.windows.documents.table.aspx)和这个[链接](http://msdn.microsoft.com/en-us/library/ms753342.aspx)关于没有帮助......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:41:02.943

[`Blocks`](http://msdn.microsoft.com/en-us/library/system.windows.documents.tablecell.blocks.aspx)请参阅MSDN 上的属性文档：

```
var cell = table.RowGroups[0].Rows[0].Cells[0];

// Clear the content
cell.Blocks.Clear();

// Add some text
cell.Blocks.Add(new Paragraph(new Run("Hello world")));

// Add a floater
cell.Blocks.Add(new Paragraph(new Floater())); 
```

# c++ - 在 Visual Studio 中提升 .ipp 文件支持

> ID：12405937
> 
> 赞同：4
> 
> 时间：2012-09-13T12:09:55.433
> 
> 标签：c++, visual-studio-2008, visual-c++, boost

**{注意}：Visual Studio Dos 支持 .ipp 文件。这里的问题更多是手动效率低下而不是技术。**

在 C++ 项目中，很少有 .ipp etensions 文件。在 Visual C++ 2008 中编译时，我看到一些链接器错误`"LNK2019: unresolved external symbol"`。我想，对于某些目标文件链接器无法链接在 .ipp 文件下实现的少数功能。我在项目下包含了 .ipp 文件（之前它们不是），但仍然是同样的问题。

我的问题是 Visual C++ 2008 不支持 .ipp 文件吗？如果它确实是解决这些链接器错误的正确方法。

编辑 1：我发现[这个](http://www.mail-archive.com/boost@lists.boost.org/msg10544.html)链接应该提供一种解决方法，使 *.ipp 适用于可视化 C++。但是，我正在使用 Visual C++ 2008 并看到注册表路径没有此链接所说的“语言\文件扩展名”字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-06-23T15:00:05.763

我知道这是旧的，但它仍然出现在搜索结果中。

解决方案是

1.  打开选项屏幕
2.  在搜索字段中搜索“文件扩展名”
3.  在扩展字段中输入“ipp”（无引号）
4.  选择“Visual C++”作为编辑器
5.  点击添加，然后确定
6.  关闭并重新打开任何打开的 ipp 文件

您将获得 C++ 语法高亮显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T17:22:35.170

如果`*.ipp`是头文件，则不需要将其包含到项目中——只需在需要的`#include`地方添加适当的指令即可。

如果是翻译单元，即要编译，则将其添加到项目中，右键单击它，在属性页中进入“常规”，将“项目类型”设置为“C/C++编译器”。

# c# - 使用并行 FOR 循环节省时间

> ID：12405938
> 
> 赞同：51
> 
> 时间：2012-09-13T12:09:56.220
> 
> 标签：c#, .net, parallel-extensions

我有一个关于并行 for 循环的问题。我有以下代码：

```
 public static void MultiplicateArray(double[] array, double factor)
    {
        for (int i = 0; i < array.Length; i++)
        {
            array[i] = array[i] * factor;
        }
    }

    public static void MultiplicateArray(double[] arrayToChange, double[] multiplication)
    {
        for (int i = 0; i < arrayToChange.Length; i++)
        {
            arrayToChange[i] = arrayToChange[i] * multiplication[i];
        }
    }

    public static void MultiplicateArray(double[] arrayToChange, double[,] multiArray, int dimension)
    {
        for (int i = 0; i < arrayToChange.Length; i++)
        {
            arrayToChange[i] = arrayToChange[i] * multiArray[i, dimension];
        }
    } 
```

现在我尝试添加并行功能：

```
 public static void MultiplicateArray(double[] array, double factor)
    {
        Parallel.For(0, array.Length, i =>
            {
                array[i] = array[i] * factor;
            });
    }

    public static void MultiplicateArray(double[] arrayToChange, double[] multiplication)
    {
        Parallel.For(0, arrayToChange.Length, i =>
        {
            arrayToChange[i] = arrayToChange[i] * multiplication[i];
        });
    }

    public static void MultiplicateArray(double[] arrayToChange, double[,] multiArray, int dimension)
    {
        Parallel.For(0, arrayToChange.Length, i =>
        {
            arrayToChange[i] = arrayToChange[i] * multiArray[i, dimension];
        });
    } 
```

问题是，我想节省时间，而不是浪费时间。使用标准 for 循环计算大约 2 分钟，但使用并行 for 循环需要 3 分钟。为什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-13T13:42:05.707

`Parallel.For()`通过并行化代码可以大大提高性能，但它也有开销（线程之间的同步，在每次迭代时调用委托）。而且由于在您的代码中，每次迭代都*非常*短（基本上只有几条 CPU 指令），因此这种开销可能会变得很突出。

因此，我认为 using`Parallel.For()`不是适合您的解决方案。相反，如果您手动并行化代码（在这种情况下非常简单），您可能会看到性能提高。

为了验证这一点，我进行了一些测量：我在`MultiplicateArray()`200 000 000 个项目的数组上运行了不同的实现（我使用的代码如下）。在我的机器上，串行版本始终需要 0.21 秒，`Parallel.For()`通常需要 0.45 秒左右，但有时会飙升到 8-9 秒！

首先，我将尝试改进常见情况，稍后我会谈到这些尖峰。我们想用*N*个 CPU 处理这个数组，所以我们把它分成*N*个大小相等的部分，分别处理每个部分。结果？0.35 秒。这仍然比串行版本差。但是`for`遍历数组中的每个项目是最优化的结构之一。我们不能做点什么来帮助编译器吗？提取计算循环的边界可能会有所帮助。事实证明确实如此：0.18 秒。这比串行版本好，但不是很多。而且，有趣的是，在我的 4 核机器（无超线程）上将并行度从 4 更改为 2 并没有改变结果：仍然是 0.18 秒。这让我得出结论，CPU 不是这里的瓶颈，内存带宽才是。

现在，回到峰值：我的自定义并行化没有它们，但是`Parallel.For()`有，为什么？`Parallel.For()`确实使用范围分区，这意味着每个线程都处理自己的数组部分。但是，如果一个线程提前完成，它将尝试帮助处理尚未完成的另一个线程的范围。如果发生这种情况，您将获得大量虚假共享，这可能会大大降低代码速度。我自己对强制错误共享的测试似乎表明这确实是问题所在。强制的并行度`Parallel.For()`似乎对尖峰有所帮助。

当然，所有这些测量都是特定于我计算机上的硬件的，对你来说会有所不同，所以你应该自己测量。

我使用的代码：

```
static void Main()
{
    double[] array = new double[200 * 1000 * 1000];

    for (int i = 0; i < array.Length; i++)
        array[i] = 1;

    for (int i = 0; i < 5; i++)
    {
        Stopwatch sw = Stopwatch.StartNew();
        Serial(array, 2);
        Console.WriteLine("Serial: {0:f2} s", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        ParallelFor(array, 2);
        Console.WriteLine("Parallel.For: {0:f2} s", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        ParallelForDegreeOfParallelism(array, 2);
        Console.WriteLine("Parallel.For (degree of parallelism): {0:f2} s", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        CustomParallel(array, 2);
        Console.WriteLine("Custom parallel: {0:f2} s", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        CustomParallelExtractedMax(array, 2);
        Console.WriteLine("Custom parallel (extracted max): {0:f2} s", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        CustomParallelExtractedMaxHalfParallelism(array, 2);
        Console.WriteLine("Custom parallel (extracted max, half parallelism): {0:f2} s", sw.Elapsed.TotalSeconds);

        sw = Stopwatch.StartNew();
        CustomParallelFalseSharing(array, 2);
        Console.WriteLine("Custom parallel (false sharing): {0:f2} s", sw.Elapsed.TotalSeconds);
    }
}

static void Serial(double[] array, double factor)
{
    for (int i = 0; i < array.Length; i++)
    {
        array[i] = array[i] * factor;
    }
}

static void ParallelFor(double[] array, double factor)
{
    Parallel.For(
        0, array.Length, i => { array[i] = array[i] * factor; });
}

static void ParallelForDegreeOfParallelism(double[] array, double factor)
{
    Parallel.For(
        0, array.Length, new ParallelOptions { MaxDegreeOfParallelism = Environment.ProcessorCount },
        i => { array[i] = array[i] * factor; });
}

static void CustomParallel(double[] array, double factor)
{
    var degreeOfParallelism = Environment.ProcessorCount;

    var tasks = new Task[degreeOfParallelism];

    for (int taskNumber = 0; taskNumber < degreeOfParallelism; taskNumber++)
    {
        // capturing taskNumber in lambda wouldn't work correctly
        int taskNumberCopy = taskNumber;

        tasks[taskNumber] = Task.Factory.StartNew(
            () =>
            {
                for (int i = array.Length * taskNumberCopy / degreeOfParallelism;
                    i < array.Length * (taskNumberCopy + 1) / degreeOfParallelism;
                    i++)
                {
                    array[i] = array[i] * factor;
                }
            });
    }

    Task.WaitAll(tasks);
}

static void CustomParallelExtractedMax(double[] array, double factor)
{
    var degreeOfParallelism = Environment.ProcessorCount;

    var tasks = new Task[degreeOfParallelism];

    for (int taskNumber = 0; taskNumber < degreeOfParallelism; taskNumber++)
    {
        // capturing taskNumber in lambda wouldn't work correctly
        int taskNumberCopy = taskNumber;

        tasks[taskNumber] = Task.Factory.StartNew(
            () =>
            {
                var max = array.Length * (taskNumberCopy + 1) / degreeOfParallelism;
                for (int i = array.Length * taskNumberCopy / degreeOfParallelism;
                    i < max;
                    i++)
                {
                    array[i] = array[i] * factor;
                }
            });
    }

    Task.WaitAll(tasks);
}

static void CustomParallelExtractedMaxHalfParallelism(double[] array, double factor)
{
    var degreeOfParallelism = Environment.ProcessorCount / 2;

    var tasks = new Task[degreeOfParallelism];

    for (int taskNumber = 0; taskNumber < degreeOfParallelism; taskNumber++)
    {
        // capturing taskNumber in lambda wouldn't work correctly
        int taskNumberCopy = taskNumber;

        tasks[taskNumber] = Task.Factory.StartNew(
            () =>
            {
                var max = array.Length * (taskNumberCopy + 1) / degreeOfParallelism;
                for (int i = array.Length * taskNumberCopy / degreeOfParallelism;
                    i < max;
                    i++)
                {
                    array[i] = array[i] * factor;
                }
            });
    }

    Task.WaitAll(tasks);
}

static void CustomParallelFalseSharing(double[] array, double factor)
{
    var degreeOfParallelism = Environment.ProcessorCount;

    var tasks = new Task[degreeOfParallelism];

    int i = -1;

    for (int taskNumber = 0; taskNumber < degreeOfParallelism; taskNumber++)
    {
        tasks[taskNumber] = Task.Factory.StartNew(
            () =>
            {
                int j = Interlocked.Increment(ref i);
                while (j < array.Length)
                {
                    array[j] = array[j] * factor;
                    j = Interlocked.Increment(ref i);
                }
            });
    }

    Task.WaitAll(tasks);
} 
```

示例输出：

```
Serial: 0,20 s
Parallel.For: 0,50 s
Parallel.For (degree of parallelism): 8,90 s
Custom parallel: 0,33 s
Custom parallel (extracted max): 0,18 s
Custom parallel (extracted max, half parallelism): 0,18 s
Custom parallel (false sharing): 7,53 s
Serial: 0,21 s
Parallel.For: 0,52 s
Parallel.For (degree of parallelism): 0,36 s
Custom parallel: 0,31 s
Custom parallel (extracted max): 0,18 s
Custom parallel (extracted max, half parallelism): 0,19 s
Custom parallel (false sharing): 7,59 s
Serial: 0,21 s
Parallel.For: 11,21 s
Parallel.For (degree of parallelism): 0,36 s
Custom parallel: 0,32 s
Custom parallel (extracted max): 0,18 s
Custom parallel (extracted max, half parallelism): 0,18 s
Custom parallel (false sharing): 7,76 s
Serial: 0,21 s
Parallel.For: 0,46 s
Parallel.For (degree of parallelism): 0,35 s
Custom parallel: 0,31 s
Custom parallel (extracted max): 0,18 s
Custom parallel (extracted max, half parallelism): 0,18 s
Custom parallel (false sharing): 7,58 s
Serial: 0,21 s
Parallel.For: 0,45 s
Parallel.For (degree of parallelism): 0,40 s
Custom parallel: 0,38 s
Custom parallel (extracted max): 0,18 s
Custom parallel (extracted max, half parallelism): 0,18 s
Custom parallel (false sharing): 7,58 s 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-28T09:22:17.927

Svick 已经提供了一个很好的答案，但我想强调的是，关键不是“手动并行化代码”而不是使用`Parallel.For()`，而是您必须处理**更大的数据块**。

这仍然可以`Parallel.For()`像这样使用：

```
static void My(double[] array, double factor)
{
    int degreeOfParallelism = Environment.ProcessorCount;

    Parallel.For(0, degreeOfParallelism, workerId =>
    {
        var max = array.Length * (workerId + 1) / degreeOfParallelism;
        for (int i = array.Length * workerId / degreeOfParallelism; i < max; i++)
            array[i] = array[i] * factor;
    });
} 
```

它与 svicks 做同样的事情，`CustomParallelExtractedMax()`但更短、更简单并且（在我的机器上）执行速度甚至更快：

```
Serial: 3,94 s
Parallel.For: 9,28 s
Parallel.For (degree of parallelism): 9,58 s
Custom parallel: 2,05 s
Custom parallel (extracted max): 1,19 s
Custom parallel (extracted max, half parallelism): 1,49 s
Custom parallel (false sharing): 27,88 s
My: 0,95 s 
```

顺便说一句，所有其他答案中缺少的关键字是**粒度**。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-06T21:55:15.370

请参阅[PLINQ 和 TPL 的自定义分区器](http://msdn.microsoft.com/en-us/library/dd997411.aspx)：

> 在`For`循环中，循环体作为委托提供给方法。调用该委托的成本与虚拟方法调用大致相同。在某些情况下，并行循环的主体可能足够小，以至于每次循环迭代的委托调用成本变得很大。在这种情况下，您可以使用其中一个`Create`重载在源元素上创建一个`IEnumerable<T>`范围分区。然后，您可以将此范围集合传递给`ForEach`其主体由常规 for 循环组成的方法。这种方法的好处是委托调用成本仅在每个范围内产生一次，而不是每个元素一次。

在您的循环体中，您正在执行单次乘法，并且委托调用的开销将非常明显。

尝试这个：

```
public static void MultiplicateArray(double[] array, double factor)
{
    var rangePartitioner = Partitioner.Create(0, array.Length);

    Parallel.ForEach(rangePartitioner, range =>
    {
        for (int i = range.Item1; i < range.Item2; i++)
        {
            array[i] = array[i] * factor;
        }
    });
} 
```

另请参阅：[`Parallel.ForEach`文档](http://msdn.microsoft.com/en-us/library/dd991604.aspx)和[`Partitioner.Create`文档](http://msdn.microsoft.com/en-us/library/dd991564.aspx)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-13T13:25:41.887

Parallel.For 涉及更复杂的内存管理。该结果可能会因 CPU 规格而异，例如 #cores、L1 和 L2 缓存...

请看这篇有趣的文章：

[http://msdn.microsoft.com/en-us/magazine/cc872851.aspx](http://msdn.microsoft.com/en-us/magazine/cc872851.aspx)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-09-13T13:33:16.377

来自[http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx)和[http://msdn.microsoft.com/en-us/library/dd537608.aspx](http://msdn.microsoft.com/en-us/library/dd537608.aspx)

您没有创建三个执行 for 的线程/进程，而是尝试并行执行 for 的迭代，因此即使只有一个 for 您正在使用多个线程/进程。

这意味着 index = 0 和 index = 1 的交互可以同时执行。

可能您被迫使用过多的线程/进程，并且创建/执行它们的开销大于速度增益。

尝试在三个不同的线程/进程中使用三个普通的，如果您的系统是多核（至少 3 倍），它应该花费不到一分钟

# configuration-files - zsh 历史可以有多大？回溯多远？

> ID：12405939
> 
> 赞同：0
> 
> 时间：2012-09-13T12:10:02.270
> 
> 标签：configuration-files, zsh

我不想失去并掌握历史。zsh_history 是否会截断文件？如果有，在什么条件下？此外，是否有任何其他进程对其起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:04:08.580

该变量以*行*`HISTSIZE`配置历史文件的大小。让它足够大，你就不会失去历史。

 *另请参阅`man zshparam`并搜索`HISTSIZE`and `SAVEHIST`。*

# java - DI和IOC使用核心java

> ID：12405942
> 
> 赞同：0
> 
> 时间：2012-09-13T12:10:10.073
> 
> 标签：java, reflection, dependency-injection, inversion-of-control

有没有办法使用核心 java/reflection 来加载创建依赖对象并将其设置为 other 作为依赖项？

我可以做到，但在处理嵌套 bean 时面临问题。

最终，我对使用 spring 进行简单的使用不感兴趣。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:14:47.450

我建议不要手动进行，很难让它正确，当已经存在大量解决方案时，为什么要重新发明轮子？-
java的依赖注入规范是[JSR-299](http://jcp.org/en/jsr/detail?id=299) ，如果你不想使用Spring ，你可以使用[Weld](http://seamframework.org/Weld)
库作为参考实现你也 可以考虑[Guice](http://code.google.com/p/google-guice/)框架，它是一个轻量级的DI框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:18:51.300

您不需要框架即可使用 DI。

你可以

*   创建所有对象，例如使用 new
*   通过构造函数传递所有必需的对象/参数。
*   通过设置器传递可选参数。
*   传递只能在以后通过 setter 构造的对象。

您也可以编写自己的 IoC 来执行此操作，但如果您想要简单，最好用 Java 编写它。

BTW：如果你想要运行时加载，你可以根据需要在运行时编译和加载 Java 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:18:33.653

我不会在这里重新发明轮子，可能你应该使用一个轻量级的依赖注入容器。

或许这篇文章会帮助你做出选择： [DI 容器](https://stackoverflow.com/questions/2026016/google-guice-vs-picocontainer-for-dependency-injection)

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T09:10:16.133

我自己写的。

虽然有几个先决条件

1.  格式化您的 xml 以减少解析器的负载。我已经定义`<bean id="xyz" class="package path of class">`了用于声明类和`<parameter name="xyz" value="val">` /或`<parameter name="xyz" ref="beanid">`实例变量的 xml 元素。参数可以指向另一个对象的值或引用
2.  在解析器方面，所有 bean 都是使用反射创建并发布到 hashmap 中，从那里可以使用参数通过引用或值注入依赖项

很简单。感谢所有评论

# cakephp - 我如何从蛋糕壳返回一些数据？

> ID：12405949
> 
> 赞同：0
> 
> 时间：2012-09-13T12:10:37.577
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我写了一些 cake php shell，执行它需要一些数据 - 比如说 json 中的一些数据 - 是否可以从 cake shell 命令返回一些数据？或者也许有一些解决方法？问题是这个shell将由一些外部脚本（不是蛋糕）执行，我的shell应该返回一些数据......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:37:31.410

使用[Shell::out()](http://api.cakephp.org/class/shell#method-Shellout)函数将输出发送到标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:16:46.593

从 cake shell 你可以简单地运行带有参数的 GET 请求到某个地址，你可以在其中监听它......

# joomla - 如何在 joomla 中使用 Virtuamart 2 拦截贝宝付款确认

> ID：12405953
> 
> 赞同：0
> 
> 时间：2012-09-13T12:10:50.020
> 
> 标签：joomla, paypal, e-commerce

我需要拦截从 paypal 到我的 joomla 网站的付款确认（使用 virtuamart 2），换句话说，我需要知道在成功付款后调用哪个文件以添加代码片段以更新另一个数据库 谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:29:17.250

在 VirtueMart 2.x 中，所有付款方式（以及运输方式）都由 Joomla! 处理！插件。因此，对于支付插件，您将在以下位置找到相关文件：

`/plugins/vmpayment/paypal/`

运输插件的名称类似：

`/plugins/vmshipment/`目录。

# android - 屏幕旋转时，Android选项卡返回默认选项卡

> ID：12405956
> 
> 赞同：2
> 
> 时间：2012-09-13T12:11:11.523
> 
> 标签：android, android-orientation

嗨，我有一个 Android 应用程序的问题，我正在构建应用程序使用选项卡，一旦单击选项卡，它就会启动一个活动，如果我旋转屏幕，应用程序返回默认选项卡，就会出现问题。我希望在轮换时保留当前选项卡，这是我的代码，我在哪里看到了类似的问题，但是那里的解决方案无法帮助我，所以请举个例子真的对我有帮助

```
 import android.app.Activity;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.Window;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MultiLingualDictionaryActivity extends Activity   {
    /** Called when the activity is first created. */
    private String TAB_TAG,TAB_TAG2,TAB_TAG3;
    TabHost tabHost;
    LocalActivityManager mlam;  
    private int CurrentTab = 1 ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main_tabs);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);
        TAB_TAG = this.getString(R.string.search);
        TAB_TAG2 = this.getString(R.string.more);
        TAB_TAG3 = this.getString(R.string.history);
         mlam = new LocalActivityManager(this, false);
         tabHost = (TabHost) findViewById(R.id.tabhost);
         mlam.dispatchCreate(savedInstanceState);
         tabHost.setup(mlam);

         TabSpec spec1=tabHost.newTabSpec(TAB_TAG);
         spec1.setIndicator(TAB_TAG,getResources().getDrawable(R.drawable.search));
         Intent in1=new Intent(this, ManageTab.class);
         spec1.setContent(in1);

         TabSpec spec4=tabHost.newTabSpec(TAB_TAG2);
         spec4.setIndicator(TAB_TAG2,getResources().getDrawable(R.drawable.more));
         Intent in4=new Intent(this,MoreActivity.class);
         spec4.setContent(in4);

         tabHost.addTab(spec1);
         tabHost.addTab(tabHost.newTabSpec(TAB_TAG3)
                .setIndicator(TAB_TAG3,getResources().getDrawable(R.drawable.history))
                .setContent(new Intent(this, ManageTab2.class)
                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));
         tabHost.addTab(spec4);

        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);
        getLastNonConfigurationInstance(); 
         super.onCreate(savedInstanceState);  

        tabHost.setCurrentTab(CurrentTab);
        tabHost.setOnTabChangedListener(tabhostListener);
    }
    TabHost.OnTabChangeListener tabhostListener =  new TabHost.OnTabChangeListener(){
        public void onTabChanged(String tabId) {
            if(TAB_TAG.equals(tabId)) {

                CurrentTab = tabHost.getCurrentTab();
                System.out.println(CurrentTab);
            }
            else if(TAB_TAG2.equals(tabId)) {
                CurrentTab = tabHost.getCurrentTab();
                System.out.println(CurrentTab);
            }
            else{
                CurrentTab = tabHost.getCurrentTab();
                System.out.println(CurrentTab);
            //mlam.destroyActivity(TAB_TAG3, true);
             //   mlam.startActivity(TAB_TAG3, new Intent(getApplicationContext(),ManageTab2.class));
            //System.out.println("destroy tab2");
        }
    }
};

/*@Override
protected void onStart(){
    tabHost.setCurrentTab(CurrentTab);
}*/

@Override
public Object onRetainNonConfigurationInstance(){
    CurrentTab = tabHost.getCurrentTab();
        return CurrentTab;

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:31:05.553

当您的应用程序的方向发生变化时，它会再次调用 onCreate 方法。您可以做的是在用户更改选项卡时将选项卡索引添加到您的 savedInstanceState 变量。然后在 oncreate 中，您可以检查您的 tabindex 是否已设置，如果是，则显示正确的选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:15:30.240

这可能会帮助你

```
 if your android:targetSdkVersion="12" or less
     android:configChanges="orientation|keyboardHidden">

      if your  android:targetSdkVersion="13" or more
  android:configChanges="orientation|keyboardHidden|screenSize"> 
```

# android - Android Gallery Fling：如何计算必要的速度

> ID：12405960
> 
> 赞同：3
> 
> 时间：2012-09-13T12:11:17.157
> 
> 标签：android, gallery

我必须实现一个画廊，该画廊在动画中移动到下一张幻灯片。我在这里找到了一些解决方案： [如何以编程方式滚动动画](https://stackoverflow.com/questions/3799773/android-gallery-how-to-have-scrolling-animation-programmatically)

我正在使用这段代码：

```
//scroll forward or backward
 private void scroll(int type){
View selectedV = mG.getSelectedView();
int idx = mG.indexOfChild(selectedV);
switch(type){
    case FORWARD:
default:
    if(idx<mG.getChildCount()-1)
        idx++;
    break;
case BACKWARD:
    if(idx>0)
        idx--;          
    break;
}
//now scrolled view's child idx in gallery is gotten
View nextView = mG.getChildAt(idx);
//(x,y) in scrolled view is gotten
int x = nextView.getLeft()+nextView.getWidth()/2;
int y = nextView.getTop()+nextView.getHeight()/2;
String out = String.format("x=%d, y=%d", x, y);
Log.i(TAG+".scroll", out);

//Kurru's simulating clicking view
MotionEvent event = MotionEvent.obtain(100, 100, MotionEvent.ACTION_DOWN, x, y, 0);
mG.onDown(event); 
boolean res = mG.onSingleTapUp(null);
Log.i(TAG+".scroll", "onSingleTapUp return =" + res); 
```

}

问题是它仅在我看到 3 张图像时才有效，而且显然它甚至在某些设备上都不起作用。

但是，当我一次只显示一个图像时（它们几乎占据了设备的所有宽度），这种方法不起作用。这就是为什么我实现了以下方法：

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {

    if(e1 == null || e2 == null) return false;
    if (isScrollingLeft(e1, e2)) { // Check if scrolling left

        if(State.curentZoom==0)
            return super.onFling(e1, e2, State.imgWidthBig*1.1f, 0);
        else {
            scroll(BACKWARD);
            return true;
        }
    } else if (isScrollingRight(e1, e2)) { // Otherwise scrolling right

        if(State.curentZoom==0)
            return super.onFling(e1, e2, (-1)*State.imgWidthBig*1.1f, 0);
        else {
            scroll(FORWARD);
            return true;
        }
    } else
        return false;

} 
```

使用其他帖子中的代码： [如何停止在图库小部件中滚动？](https://stackoverflow.com/questions/2373617/how-to-stop-scrolling-in-a-gallery-widget)

目标：计算正确的速度X，以便从一张幻灯片平滑滚动到另一张幻灯片，无论是向左还是向右。速度以像素/秒计算。如果我提供的速度太小，那么图像会滚动一点并返回到前一个。如果速度太大，那么它会滚动超过一个图像，但我需要它一个接一个地滚动到下一个/上一个图像，即使距离非常小。我发现尝试时，最佳值略大于设备宽度，但我想知道是否所有设备都会如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-29T11:27:56.730

派对有点晚了。AOSP 提供了 2 个类来帮助您计算速度，`VelocityTracker`& `ViewConfiguration`。跟踪器消耗 MotionEvents 并输出 X/Y 速度。而 ViewConfiguration 声明了不同手势类型的阈值。

下面是一个使用 2 个类来检测投掷手势的简单示例。

```
 mVelocityTracker = VelocityTracker.obtain();
    mViewConfiguration = ViewConfiguration.get(mContext);

    mListView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            final int action = event.getActionMasked();
            mVelocityTracker.addMovement(event);

            if (action == MotionEvent.ACTION_UP) {
                mVelocityTracker.computeCurrentVelocity(1000, mViewConfiguration.getScaledMaximumFlingVelocity());
                if (mVelocityTracker.getXVelocity() > mViewConfiguration.getScaledMinimumFlingVelocity()) {
                    // horizontal fling!
                    return true;
                }
            }
            return false;
        }
    }); 
```

# salesforce - 展示 基于第一个输入字段 salesforce 的值

> ID：12405961
> 
> 赞同：0
> 
> 时间：2012-09-13T12:11:17.197
> 
> 标签：salesforce

我有一个数据库设置，例如“c 是对 b 的查找”和“b 是对 a 的查找”

示例数据

```
a1 has b1, b2, b3
a2 has b4, b5, b6 
```

我的代码

```
<apex:page standardController="c" >
    <apex:inputField value="{!c.b.a__c} />
    <apex:inputField value="{!c.b__c} />
</apex:page> 
```

我的问题是，如果我在第一个 inputField 中选择 a1，我只想在第二个输入字段中显示 b1、b2、b3，而不是 b 中的所有值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:09:59.343

我认为您可以通过添加一个 Javascript`onblur`事件来做到这一点，该事件又调用一个`<apex:actionFunction/>`调用控制器方法的元素。

此方法执行一个 soql select 语句来查找您要查找的相关数据。

然后，您将使用此列表数据和`return null`您的方法填充您的选择列表。

然后，您需要在 上选择适当的`rerender`属性，`<apex:actionFunction/>`以便至少重新绘制第二个输入字段。如果您想了解更多详情，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:56:40.337

我认为在 Salesforce 中做到这一点的正确方法是使用**Dependent picklists**。 [查看官方文档](http://www.salesforce.com/us/developer/docs/pages/Content/pages_quick_start_dependent_picklists.htm)

如果您无法更改数据模型，请尝试[**相关查找**](http://help.salesforce.com/help/doc/en/fields_lookup_filters_dependent_lookups.htm)。

# php - 使用 PHP 连接到 mssql 服务器时出错

> ID：12405964
> 
> 赞同：0
> 
> 时间：2012-09-13T12:11:19.800
> 
> 标签：php, sql-server-2008

我正在尝试通过 PHP 连接到 Navision 数据库（MSSQL 2008）。

在我的 Linux 服务器上，我构建了 FreeDTS 并使用 mssql 扩展重新编译了 PHP。

但是，我收到以下错误：

> 警告：mssql_connect() [function.mssql-connect]：无法连接到服务器：

我已将代码复制到运行 PHP 的 Windows 服务器上，它连接得很好。

**服务器信息：**

```
操作系统：Centos 6.2
PHP版本：5.2.17
FreeDTS 版本：0.91

```

我尝试通过 telnet 连接到 Mssql 服务器，效果很好。所以没有防火墙问题。

# javascript - 以可优化的方式使用 requirejs 加载模板

> ID：12405965
> 
> 赞同：0
> 
> 时间：2012-09-13T12:11:23.753
> 
> 标签：javascript, templates, requirejs

我想为一个带有模块的项目加载我的所有模板，但我不确定我这样做的方式 (a) 是否会让代码使用 r.js 和 (b) 进行优化- 基本上，我担心 define() 块内的嵌套 require 不会被优化器拾取。理想情况下，我希望在运行 r.js 之后有一个缩小的单个文件，它是所有依赖项，如果可能的话，包括文本文件。

**模板加载器.js**

```
define(["jquery","underscore","icanhaz"],function($,_,ich){

    var template_names = [  
        'test'
    ];

    require([
        'text!templates/test.tpl',
    ],function (){
        for (var i = arguments.length - 1; i >= 0; i--) {
            ich.addTemplate(template_names[i],arguments[i]);
        };      
    });

}); 
```

然后在我的主 app.js 中：

```
require(['jquery','underscore','backbone','icanhaz','template_loader'],function($,_,Backbone,ich,loader){

    // templates should be available here as ich.template_name()

}); 
```

目标是在一个地方处理模板资源加载，然后其他模块可以使用这些资源。

这似乎是一种好方法，如果不是，什么是更好的策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:04:38.143

如果您想一次性加载所有模块，您可以尝试以下操作：

**generic_templates.js**

```
define(function(require){
    var tpl1 = require('text!generic_tpl1');
    var tpl2 = require('text!generic_tpl2');
    // etc

    return {
        tpl1: tpl1,
        tpl2: tpl2
    }
}); 
```

**应用程序.js**

```
require(['generic_templates'], function(genericTemplates) {

    console.log(genericTemplates.tpl1) // some html

}); 
```

# vba - 具有传递多区域范围的 UDF 作为删除另一个工作表时的参数中断

> ID：12405966
> 
> 赞同：1
> 
> 时间：2012-09-13T12:11:25.403
> 
> 标签：vba, excel

考虑这样的UDF（缩写）：

```
Public Function ffifneps(wo As Range, pre As Variant, suf As Variant) As String
Dim z As Range, e As String
...
For Each z In wo
    If CStr(z.Value) <> "" Then
        If (Len(e) > 0) Then e = e & ", "
        e = e & maske & z.Value & maske
    End If
Next z
... 
```

使用 Sheet1 中的这个 UDF，*wo*是 Sheet1 上的多区域范围，例如

```
=ffifneps((B37:B38;B137:B138);C37:C38;". ") 
```

UDF 在插入或删除另一个工作表时重新计算，然后将相对范围应用于工作表，然后可见，产生意想不到的结果。

如果我通过一个单一区域范围

```
=ffifneps(B37:B38;C37:C38;". ") 
```

一切都很好。

顺便说一句，如果查看区域，也会发生同样的情况，例如

```
...
For Each z In pre.Areas
    e = e & "'" & z.Parent.Name & "'!" & z.Address
    i = i + 1
    If (pre.Areas.Count > 1) And (i < pre.Areas.Count) Then e = e & ", "
Next z
... 
```

我究竟做错了什么？谢谢你的帮助！

**编辑：**暂时，我像这样修补它：

```
...
If (TypeName(Application.Caller) = "Range") Then
    If (wo.Areas.Count > 1) Then Set wo = Application.Caller.Parent.Range(wo.Address)
    If (TypeName(pre) = "Range") Then If (pre.Areas.Count > 1) Then Set pre = Application.Caller.Parent.Range(pre.Address)
    If (TypeName(suf) = "Range") Then If (suf.Areas.Count > 1) Then Set suf = Application.Caller.Parent.Range(pre.Address)
End If 
```

丑陋，我知道，因此 UDF 不能再用于真正的跨工作表范围，如果它们是多区域的。但我一直在想？...

# search - 像 torrentz.eu 这样的网站如何收集他们的内容？

> ID：12405967
> 
> 赞同：3
> 
> 时间：2012-09-13T12:11:31.803
> 
> 标签：search, web, search-engine, business-intelligence

我想知道一些搜索网站如何获取他们的内容。我在标题中使用了“torrentz.eu”的示例，因为它包含来自多个来源的内容。我想知道这个系统的背后是什么；他们“简单地”解析他们支持的所有网站然后显示内容吗？或者使用一些网络服务？或两者？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T12:14:27.410

您正在寻找[Information Retrieval的](http://en.wikipedia.org/wiki/Information_retrieval)[Crawling](http://en.wikipedia.org/wiki/Web_crawler)方面。

基本上爬行是：给定一组初始`S`网站，尝试通过探索链接来扩展它（找到[传递闭包](http://en.wikipedia.org/wiki/Transitive_closure)¹）。

一些网站也使用[专注的爬虫](http://en.wikipedia.org/wiki/Focused_crawler)，如果他们从一开始就尝试只索引网络的一个子集。

PS 一些网站两者都不做，而是使用[Google Custom Search API](https://developers.google.com/custom-search/v1/overview) / [Yahoo Boss](http://developer.yahoo.com/search/boss/) / [Bing Deveoper](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44) APIs 提供的服务（当然是收费的），并使用他们的索引，而不是自己创建一个。

PPS 这提供了一种理论方法，我不知道所提到的网站实际上是如何工作的。

* * *

(1) 由于时间问题，通常找不到传递闭包，但找到了足够接近它的东西。

# iphone - 任何人都可以建议我一种在 iphone 中实现波浪动画的方法吗？

> ID：12405974
> 
> 赞同：0
> 
> 时间：2012-09-13T12:11:57.683
> 
> 标签：iphone, xcode, opengl-es

> **可能重复：**
> [如何在 iPhone 上使用 openGLES 制作水效果视图？](https://stackoverflow.com/questions/726738/how-do-i-make-a-water-effect-view-with-opengles-on-the-iphone)

我正在开发一个需要波浪动画的项目。我在谷歌中搜索了很多以获得这样的动画但没有使用。任何人都可以建议我实现这个动画的逻辑以及我应该使用哪个框架 open gl 或 cocos 2D提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:51:28.670

[阅读本教程](http://www.raywenderlich.com/10862/how-to-create-cool-effects-with-custom-shaders-in-opengl-es-2-0-and-cocos2d-2-x)的“草地运动”部分，可能会给你一些想法。

# facebook - Facebook api 中的错误

> ID：12405980
> 
> 赞同：0
> 
> 时间：2012-09-13T12:12:20.353
> 
> 标签：facebook, facebook-javascript-sdk

我使用下面的 fb.api 代码将它发布到用户墙。但它显示“发生错误”警报框。这是我的代码

```
 <script src="http://connect.facebook.net/en_US/all.js"></script>
  <script>

  FB.init({
  appId  : '3446171552628614',
    status : true, 
     cookie : true, 
     xfbml  : true, 
     channelUrl : 'http://WWW.MYDOMAIN.COM/channel.html',
      oauth  : true // enable OAuth 2.0
    }
  );

var body1 = 'Reading JS SDK documentation1';
 FB.api('/me/feed', 'post', { message: body1 }, function(response) {
  if (!response || response.error)
 {
  alert('Error occured '+response.error);
 } else {
   alert('Post ID: ' + response.id);
 }
}); 
```

任何人都可以提出解决此问题的方法。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T01:34:39.067

根据您发布的片段，它似乎没有任何问题，以及您的标签`facebook-javascript-sdk`，我相信您遇到了这个`API Error Code: 191`错误。

请参阅发送消息中发布的解决方案，[并在自己的墙上发布功能不再起作用](https://stackoverflow.com/questions/12027511/sending-msg-and-post-on-own-wall-function-no-longer-work/12257802#12257802)，看看它是否解决了您的问题。

# jquery - 如何在不完全重新渲染的情况下刷新 jquery dynatree？

> ID：12405982
> 
> 赞同：1
> 
> 时间：2012-09-13T12:12:24.200
> 
> 标签：jquery, refresh, jquery-dynatree

在我的 web 应用程序中，我使用 dynatree 显示数据树，可以使用拖放（用于层次结构更改）和自定义链接（更改项目状态）进行编辑。删除或单击链接后，每个更改都会直接保存到数据库中。

为了防止树和它的后端模型由于任何情况不同步，我想在每次修改后完全更新树。

我可以这样做：[如何重新加载/刷新/重新初始化 DynaTree？](https://stackoverflow.com/questions/7318116/how-to-reload-refresh-reinit-dynatree). 但是我必须销毁并重新初始化整个树才能做到这一点，并且所有节点都会在这样做时崩溃。

我希望有一个刷新选项迭代所有树项目，丢弃不再存在的项目，添加新项目或更改已修改图标的标题/图标/数据，但我在文档中找不到类似的内容。

有什么诀窍可以做到这一点吗？也许是一个隐藏的功能，或者一个解决方法？

谢谢你的灵感，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:57:06.030

由于似乎没有（至少我找不到）任何用于根据其支持的 javascript 数据对象更新树（或其部分）的内置功能，我编写了这个帮助方法来更新树（或它的分支）：

**编辑**：添加或删除子项时，该方法的先前实现不起作用。更新它以丢弃所有子节点并再次添加所有子节点：

```
 function updateNodeRecursively(node, data, includeSelf) {
    if(includeSelf == undefined) includeSelf = true;
    if(includeSelf) node.data = data;
    node.removeChildren();
    if(data.children) {
      for(var i=0; i<data.children.length; i++) {
        var cnode = node.addChild(data.children[i]);
        updateNodeRecursively(cnode, data.children[i],false)
      }
    } 
```

它使用与`data`从 JavaScript 初始化树时相同的结构，可以完全或部分更新树，具体取决于您作为第一个参数传递的节点。

# xcode - 默认可可项目不会构建

> ID：12405990
> 
> 赞同：0
> 
> 时间：2012-09-13T12:13:03.440
> 
> 标签：xcode, macos, cocoa

我通过选择“可可应用程序”创建了一个空的 OS X 项目。当我去构建时，我收到以下错误消息：

“综合属性‘窗口’必须与兼容的 ivar 命名相同，或者必须明确命名 ivar”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:13:03.440

无论出于何种原因，默认模板都不会构建。原因是没有声明属性 _window。

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
    IBOutlet NSWindow *_window;
} 
```