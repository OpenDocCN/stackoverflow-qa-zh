# StackOverflow 问答 10455000-10455999

# java - 使用多个线程时如何深度复制哈希图

> ID：10455000
> 
> 赞同：3
> 
> 时间：2012-05-04T19:29:06.167
> 
> 标签：java, multithreading, copy, hashmap, deep-copy

在我的应用程序中，我有两个线程。线程 1 正在向线程 2 传输数据。数据传输后，线程 1 中的数据在线程 2 中被清除。线程 1 继续在 HashMap 中放置更多数据，以便稍后传输到线程 2。与此同时，线程 2 对数据进行了它需要做的事情。我下面的代码是线程 2 中发生线程之间数据传输的部分。整个应用程序工作得很好，但我的问题是，有没有更好的方法来为线程 2 制作线程 1 数据的副本，而不使用关键字 new 来创建一个全新的对象？

我认为这样做可能会导致更多的垃圾收集发生？我不应该担心这个吗？

```
synchronized(this){
    // Make a copy of the data map then clear it.
    cachedData = new HashMap<String,ArrayList<Float>>(data);
    data.clear();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:31:13.453

为什么不只是：

```
 synchronized(this){
        cachedData = data;
        data = new HashMap<String,ArrayList<Float>>();
    } 
```

这与您所拥有的类似，但不涉及数据复制。

我不会担心`new`太多（除非您可以通过分析证明这是一个问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:32:26.923

因此，如果您从多个线程访问它，那么*每次*访问`data` `HashMap`都必须有一个`synchronized`块。仅仅因为您在此处获取缓存副本并不意味着其他线程可以在不同步的情况下使用。*`data`*

 *如果您想同时使用 ，`HashMap` *而*不必围绕每个使用进行同步，那么您应该使用`ConcurrentHashMap`.

> 整个应用程序工作得很好，但我的问题是，有没有更好的方法来为线程 2 制作线程 1 数据的副本，而不使用关键字 new 来创建一个全新的对象？

考虑到我上面提到的注意事项，如果您想拍摄 a 的快照`HashMap`以便您可以处理特定线程中的内容，那么您提到的模式很好并且经常使用。当您需要遍历 a`Collection`并在循环内对其进行修改但不执行`iterator.remove()`.

如果您只需要键或值，请确保获取 or 的`data.keySet()`副本`data.values()`。*

# selenium - selenium web 驱动程序 - 如何将 waitFor 用于 AJAX

> ID：10455007
> 
> 赞同：2
> 
> 时间：2012-05-04T19:29:29.983
> 
> 标签：selenium, selenium-webdriver

我正在尝试在测试脚本中的每个 Web 元素之前添加显式等待

我的代码有

```
import org.openqa.selenium.support.ui.Wait;
import org.openqa.selenium.support.ui.WebDriverWait;
                     .
                     .
WebDriverWait wait = new WebDriverWait(driver, 60);
wait.until(presenceOfElementLocated(By.id("name")));

driver.findElement(By.id("name")).clear();
driver.findElement(By.id("name")).sendKeys("Create_title_01"); 
```

我看到的错误是：

```
 java.lang.NullPointerException
at org.openqa.selenium.support.ui.FluentWait$1.apply(FluentWait.java:176)
at org.openqa.selenium.support.ui.FluentWait$1.apply(FluentWait.java:1)
at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:201)
at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:174) 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:07:20.370

用于使用**presentOfElementLocated**和其他 AjaxCondition 方法

你应该使用

> org.openqa.selenium.support.ui.ExpectedConditions

班级。你的代码应该是这样的：

```
wait.until(ExpectedConditions.presenceOfElementLocated(By.id("name"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:19:34.187

我建议根据您的 AJAX 调用事件使用 waitForElementPresent 或 waitForElementNotPresent。

但是，如果您仍然喜欢使用 wait.until，这就是我的做法（并且有效）

```
wait = new WebDriverWait(wedriver1, TimeSpan.FromSeconds(5));
.....
button.Click();
wait.Until(webdriver1 => webdriver2.webelement.GetAttribute("style").Contains("display: block")); 
```

我举了一个在直到方法采用的条件下属性更改的示例。你可以做类似..

driver.findElement(By.id("name")).displayed （对于您在 wait.until 中的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T14:08:24.620

`WebDriverWait wait`初始化后看起来您需要以下行：

```
wait.ignoring(NoSuchElementException.class); 
```

# c# - 这是否处理子对象？

> ID：10455010
> 
> 赞同：3
> 
> 时间：2012-05-04T19:29:33.830
> 
> 标签：c#, visual-studio, clr, dispose, idisposable

我有两个类，比如 class`MyFirstClass`和`MyAnotherClass`，`MyAnotherClass`正在实现 IDiposable 接口。

```
public class MyFirstClass
{
   public string xyz{get;set;} ..... and so on
}

public class MyAnotherClass : IDisposable
{
   private readonly MyFirstClass objFc = new MyFirstClass();
   public static  void MyStaticMethod()
   {
        var objOfFirstClass = new MyFirstClass();
        // something with above object
   }

   public void MyNonStaticMethod()
   {
      // do something with objFc
   }

   #region Implementation of IDisposable
    .... my implementations
   #endregion
} 
```

现在我还有一堂课，我正在打电话`MyAnotherClass`，像这样

```
using(var anotherObj = new MyAnotherClass())
{
   // call both static and non static methods here, just for sake of example.
   // some pretty cool stuffs goes here... :)
} 
```

所以我想知道，我应该担心我的对象的清理场景吗？另外，我的`ObjFC`（内部非静态）和`objOfFirstClass`（内部静态）会发生什么。

AFAIK，使用将照顾一切......但我需要知道更多......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T19:34:00.360

`objOfFirstClass`是方法中的局部变量。一旦方法退出，它将有资格进行垃圾收集。它不会被这样处理，因为它没有实现`IDisposable`.

`objFc`当其父对象超出范围时将有资格进行垃圾收集。同样，这与处置它无关。

`Dispose`/用于*除了简单的内存管理之外*`IDisposable`的清理工作。CLR 使用垃圾收集为您清理内存。是确保对象实现在完成后调用其方法的好方法 - 但如果您所追求的只是内存管理，则不需要使用它。*`using``IDisposable``Dispose`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:36:34.140

`IDisposable`表示对象正在使用*托管内存以外*的资源；例如，文件句柄。该`Dispose`方法应该处理这些资源的清理（这就是您的实现应该做的）。

任何 CLR 原生对象（例如，您的示例中的那些）在不再存在对它的引用时由 CLR 进行垃圾收集（更具体地说，通过称为*垃圾收集器*或 GC 的机制）；`IDisposable`在这些情况下是不必要的。

为了使用`IDisposable`你必须调用`Dispose`自己（或使用`using`，这只是语法糖）。GC 不会自动调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:35:14.500

`IDisposable`除了`using`调用`Dispose`方法之外，没有任何魔法。

由于该类`MyFirstClass`没有实现`IDisposable`，因此无需担心此类的实例——它们不应该有任何东西要处理。

如果您有需要处理的字段或变量，则必须调用`Dispose`. 此外，您应该实现一个调用该`Dispose`方法的析构函数，正如[参考建议的](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)那样：

```
~MyClass() {
    Dispose(false);
} 
```

在这种情况下，布尔参数指定不应释放字段*的*位置。有关详细信息，请参阅链接的 msdn 页面。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T19:34:55.400

`IDispose`配置类`MyAnotherClass`。这意味着`MyFirstClass`对象的局部变量没有指向任何东西。因此，一旦垃圾收集器运行，它们就会被回收。*

# asp.net-mvc-3 - 使用 ASP.Net MVC3 进行全局 API 安全检查

> ID：10455017
> 
> 赞同：0
> 
> 时间：2012-05-04T19:30:02.147
> 
> 标签：asp.net-mvc-3, api, global-asax

我们计划使用 ASP.Net MVC3 创建 JSON API。为了处理安全性，我们将有一个 API 密钥，或者可能是用户名/密码，可能还有一个时间戳。
我之前没有做过任何 MVC，但我想知道是否没有一些简单的方法可以将代码添加到 Global.asax 以确保所有请求都以某种方式在其中包含这些变量。这样，除非包含 API 密钥，否则任何请求都无法通过。
这样我们就不必为网站的每个部分添加 API 密钥处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:52:32.510

创建一个全局授权过滤器 -

```
[AttributeUsage(AttributeTargets.Method | AttributeTargets.Class, Inherited = true, AllowMultiple = true)]
public class MyAuthorizationFilterAttribute : FilterAttribute, IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
    // do Authorization
    }
} 
```

然后在 Global.asax 中注册它 -

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new MyAuthorizationFilterAttribute());
    }
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

虽然您可以创建一个定制的身份验证模块 -

```
public class CustomAuthentication : IHttpModule
{
    public void Init(HttpApplication application)
    {
        application.AuthenticateRequest += new EventHandler(this.Authenticate);
    }
    public void Authenticate(object source, EventArgs eventArgs)
    {
        HttpApplication _application = (HttpApplication)source;
        HttpContext _context = _application.Context;

        // do authentication

        // if authenticated set pricipal
        // _context.User = new GenericPrincipal(new GenericIdentity("user"), new string[]);

    }

    public void Dispose() { }
} 
```

然后你只需要在 web.config 中注册模块

```
<modules runAllManagedModulesForAllRequests="true">
      <add name="CustomAuthentication" type="AuthenticationNamespace.CustomAuthentication"/>
</modules> 
```

并将 asp.net 身份验证设置为无 -

```
<authentication mode="None">
</authentication> 
```

然后您可以检查用户是否在您的 AuthorizationFilter 中进行了身份验证。

```
if(HttpContext.Current.Request.User.Identity.IsAuthenticated) 
```

# android - 服务器在后台运行？

> ID：10455019
> 
> 赞同：0
> 
> 时间：2012-05-04T19:30:33.020
> 
> 标签：android, sockets

我正在尝试制作一个在后台运行 Tcp 套接字服务器的应用程序。我正在使用 AssyncTask。现在我应该将运行 Socket 服务器的代码放在 doInbackground() 中还是尝试一种全新的方法？
---编辑---
如果达到一定数量，我如何计算客户并做其他事情？

# c - 存储类声明

> ID：10455020
> 
> 赞同：1
> 
> 时间：2012-05-04T19:30:34.553
> 
> 标签：c, variables, static, declaration, extern

以下声明是否正确？

在任何功能之外：

```
int a; //external by default
extern int a; //explicitly extern
static int a; //explicity static
const int a; //static by default
static const int a; //explicitly static
extern const int a; //explicitly extern 
```

在函数内部：

```
int a; //auto by default
static in a; //explicity static
const int a; //static by default
static const int a; //explicitly static 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:57:16.020

关。

默认情况下，全局范围内的任何内容（即：函数之外）都是静态的。

例如：

```
//main.c
int myVar;  // global, and static

int main(void) {
  ...
  return 0;
}

//morecode.c
extern int myVar; //other C files can see and use this global/static variable 
```

但是，如果您在全局范围内将某些内容显式声明为静态，则它不仅是静态的，而且仅在该文件中可见。其他文件看不到。

```
//main.c
static int myVar;  // global, and static

int main(void) {
  ...
  return 0;
}

//morecode.c
extern int myVar; // compiler error; "myVar" can only be seen by 
                  // code in main.c since it was explicitly 
                  // declared static at the global scope 
```

此外，默认情况下没有什么是“外部”。您通常使用 extern 从其他文件访问全局变量，前提是它们没有像上面的示例中那样显式声明为静态的。

const 仅表示数据不能更改，无论其范围如何。它并不意味着外部或静态。有些东西可以是“extern const”或“extern”，但“extern static”并没有什么意义。

作为最后一个示例，此代码将构建在大多数编译器上，但它有一个问题：myVar 总是被声明为“extern”，即使在技术上创建它的文件中也是如此。不良做法：

```
//main.c
extern int myVar;  // global, and static, but redundant, and might not work
                   // on some compilers; don't do this; at least one .C file
                   // should contain the line "int myVar" if you want it 
                   // accessible by other files
int main(void) {
  ...
  return 0;
}

//morecode.c
extern int myVar; //other C files can see and use this global/static variable 
```

最后，如果您还不熟悉这篇文章，您可能希望涵盖各个级别的范围。它可能会对您有所帮助和信息丰富。祝你好运！

[术语定义 - C 应用程序中的范围](https://stackoverflow.com/questions/8824301/terminology-definition-scope-in-c-application)

在我看来，回答我这个关于范围问题的人做得很好。

此外，如果您在函数中声明静态内容，则该值将保留在函数调用之间。

例如：

```
int myFunc(int input) {
  static int statInt = 5;
  printf("Input:%d  statInt:%d",input,statInt);
  statInt++;
  return statInt;
}

int main(void) {
  myFunc(1);
  myFunc(5);
  myFunc(100);
  return 0;
} 
```

**输出：**

```
Input:1  statInt:0
Input:5  statInt:1
Input:100  statInt:2 
```

请注意，在函数中使用静态变量具有特定且数量有限的有用情况，并且对于大多数项目通常不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:46:33.247

您的一个误解似乎`extern`与`static`. 不是这种情况。你有这个：

```
int a; //extern by default 
```

这不是“默认外部”。`extern`声明意味着实际的变量定义在别处。因此，如果您的源文件中有此内容：

```
extern int a; 
```

然后在其他地方你有另一个源文件：

```
int a; 
```

否则，如果你编译你的代码，你会得到：

```
/tmp/cc3NMJxZ.o: In function `main':
foo.c:(.text+0x11): undefined reference to `a'
collect2: ld returned 1 exit status 
```

`static`在函数定义之外意味着该变量仅对同一文件中定义的其他代码可见。缺少`static`意味着该变量对于可能链接到您的目标文件的代码是全局可见的。

我不太确定，但我不相信这`const`意味着`static`。这不应该太难测试。

...确实，一个非常简单的测试证实了这`const`并不意味着`static`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:23:32.617

您必须将存储持续时间和链接的概念分开。`extern`和`static`，在各种情况下，可以对这些属性和其他效果产生影响，但不是其中任何一个的唯一决定因素。

**在文件范围内**

* * *

```
int a; 
```

这是一个暂定的定义。`a`具有静态存储时长和外部联动。

* * *

```
extern int a; 
```

声明但不是定义。静态存储持续时间和外部链接（或由先前声明确定的链接，如果一个可见）。

* * *

```
static int a; 
```

暂定定义。静态存储时长和内部联动。

* * *

```
const int a; 
```

暂定声明。静态存储持续时间和外部链接（与 C++ 不同）。

* * *

```
static const int a; 
```

暂定定义。静态存储时长和内部联动。

* * *

```
extern const int a; 
```

声明而不是定义。静态存储持续时间和外部链接（或由先前声明确定的链接，如果一个可见）。

* * *

**在块范围内**

* * *

```
int a; 
```

定义。自动存储期限，无联动。

* * *

```
static int a; 
```

定义。静态存储时长，无联动。

* * *

```
const int a; 
```

定义。自动存储期限，无联动。（我*认为*这是严格合法的，但不是很有用，因为您不能修改`a`' 的不确定初始值而不会导致未定义的行为。）

* * *

```
static const int a; 
```

定义。静态存储时长，无联动。（同样，不是很有用！）

# android - 如何在 Linux 中被动监视是否正在建立新的 TCP 连接？

> ID：10455023
> 
> 赞同：3
> 
> 时间：2012-05-04T19:30:49.403
> 
> 标签：android, linux, tcp, callback, connection

最简单的方法可能是编写一个循环来监控 /proc/net/tcp 或 /proc/net/tcp6。但是，这太低效了，因为我几乎需要立即得到通知。我看到的最接近的东西是 inotify，它可以为任何文件的 IO 事件提供回调。问题是 procfs 不是常规文件系统，并且 inotify 似乎不支持它（至少不支持 /proc/net/tcp 和 /proc/net/tcp6）。

此外，我不希望程序具有 root 权限来实现这一点。

编辑：我删除了用户空间连接的要求。另外，我希望有一个内置的内核支持，比如 inotify 可以实现这一点。在我的情况下，操作 iptables 甚至可能过于侵入。

有人有什么想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:33:08.247

您可以在本地`iptables`配置中添加一条日志记录规则，该规则将在每次启动新连接时记录一条消息，然后使非 root 用户可以读取该日志文件。这将使您 (a) 立即通知事件（您可以使用 inotify 检测对文件的写入）和 (b) 检测进程本身不需要 root 权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:45:47.333

我能想到的最好的事情是尝试运行一个板载代理并说服其他应用程序通过它进行连接。有些人试图通过更改 APN 设置来做到这一点。

但这很丑陋，可能不适用于所有版本，并且可能会被规避。

不幸的是，Android 的设计目的并不是允许最终用户安装对系统本身行为的可选改进，而不是打开整个系统（即生根）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T22:20:58.563

当然可以使用原始套接字监控出站流量。请参阅数据包 (7) 的手册页以了解如何执行此操作。但是，这可能不是您想要的。

如果启用了连接跟踪，则可以使用 netlink 从内核获取新连接的通知。执行这些操作的 API 很糟糕，因此请考虑查看已经执行此操作的程序的源代码。我认为“conntrack”二进制文件可能会提供一些发行版（我不确定它是什么的一部分）。

# salesforce - Salesforce 刷新令牌 OAuth

> ID：10455031
> 
> 赞同：6
> 
> 时间：2012-05-04T19:31:17.537
> 
> 标签：salesforce

我正在尝试使用刷新令牌刷新访问令牌：

```
curl https://login.salesforce.com/services/oauth2/token -d "grant_type=refresh_token&client_id=3MVG9pHRjzOBdkd.WU9DLyfznP.sjOJRXXX_00nLDYSpM_0K7zAOsLrRKf6IWmCv6MxeTorXL7Zzaaea8IXXX&client_secret=3231123171523457&refresh_token=5Aep861VUUSqKxtr91VaZ7Zh54RmFqHE6zD4htOq6vY9edPgkgm9ZeFPwHIzQQvR__XypcEvWnXXX==&format=json" 
```

但我不断收到错误`"error_description":"expired access/refresh token"`

有人知道吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T20:38:47.280

我知道这已经过时了，但对于可能偶然发现这一点的人来说。**我相信这个问题是每个应用程序**只能有5 个访问权限。在此之后**，它开始撤销****最旧的**刷新令牌。更多信息在这里：

*   [管理已连接应用程序的 OAuth 访问权限](https://na15.salesforce.com/help/doc/user_ed.jsp?loc=help&target=remoteaccess_request_manage.htm&section=integrate)
*   [invalid_grant —过期的访问/刷新令牌 | 问题 #80](https://github.com/heroku/databasedotcom/issues/80)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T15:02:15.357

您具有使用刷新令牌的正确语法。确保您的所有参数都是 URL 编码的，因为在您的示例中，您的刷新令牌有 = 而不是 %3D。

您还可以通过转到设置内该用户的用户详细信息页面并撤销底部附近的“远程访问”来删除用户的刷新令牌。然后再次通过 oauth 流程获取新的刷新令牌，并在 curl 命令中尝试。

# erlang - 在不事先知道 N 的情况下，在主管中声明 N 个工人的最佳方法

> ID：10455035
> 
> 赞同：2
> 
> 时间：2012-05-04T19:31:39.817
> 
> 标签：erlang, erlang-otp

我正在开发一个有 1 个主管和几个工人的应用程序。这些工作人员中的每一个都将打开一个 tcp 套接字，执行侦听，然后接受连接，在每个客户端到达时为它们生成一个进程（我不介意监督这些）。

我想在应用程序配置中配置监听地址，这样我就可以根据需要有尽可能多的地址来监听（至少需要 1 个地址，但可以指定任意数量）。每个地址都是一个 ip（或主机名）和一个端口地址。到目前为止，没有什么新鲜事。

我的问题是关于如何申报、启动和监督未知数量的工人。我的解决方案是（在运行时）在主管代码中动态生成 init/1 函数的结果，如下所示：

```
-define(
   CHILD(Name, Args),
   {Name, {
       ?MODULE, start_listen, Args
       }, permanent, 5000, worker, [?MODULE]
   }
).

init([]) ->
   {ok, Addresses} = application:get_env(listen),
   Children = lists:map(
       fun(Address) ->
           {X1,X2,X3} = os:timestamp(),
           ChildName = string:join([
               "Listener-",
               integer_to_list(X1),
               integer_to_list(X2),
               integer_to_list(X3)
           ], ""),
           ?CHILD(ChildName, [Address])
       end,
       Addresses
   ),
   {ok, { {one_for_one, 5, 10}, Children }}. 
```

这允许我为每个工作人员动态生成一个名称，并生成工作人员定义。所以：

1.  这个解决方案可以接受吗？在我看来，它并不那么优雅。这种用例是否有任何标准解决方案（或最佳实践等）？

2.  我知道“simple_one_for_one”策略，它允许动态地将工作人员添加到主管。但是它也可以用来动态生成工人的名字吗？使用“simple_one_for_one”而不是我自己的使用“one_for_one”的解决方案会更好（以任何方式）吗？（再次，对于*这种*特殊情况）。

提前致谢，很抱歉发了这么长的帖子！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T22:50:13.170

与`simple_one_for_one`：

在您的工人的 init 函数中，您可以将他们注册到一个表中以将名称与他们的 PID 相关联，这样您就可以从名称中获取 pid。

您可以使用`global`模块（或[gproc](https://github.com/uwiger/gproc)！）将名称与 pid 相关联。当一个进程死掉时，名字会被`global`or自动删除`gproc`，所以当主管重启子进程时，名字就可用了。

您将在 supervisor:start_child/2 的参数列表（第二个参数）中传递名称

使用`simple_one_for_one`将允许您在主管初始化后动态添加更多侦听器。

如果你需要这个功能，`simple_one_for_one`是很好的解决方案。

如果您坚持在您的 sup 的 init 函数中使用动态内容的解决方案，您可以像这样清理代码，它可能看起来更优雅，也可能不看起来更优雅：

```
-define(
   CHILD(Name, Args),
   {Name, {
       ?MODULE, start_listen, Args
       }, permanent, 5000, worker, [?MODULE]
   }
).

generate_names(Adresses) -> generate_names(Adresses, 1, []).

generate_names([], _, Acc) -> Acc;
generate_names([Addr|Addresses], ID, Acc) -> generate_names(Addresses, ID+1, [{id_name(ID), Addr}|Acc]).

id_name(ID) -> "listener-" ++ integer_to_list(ID).

init([]]) ->
   {ok, Addresses} = application:get_env(listen),
   Children = [?CHILD(Name, Address) || {Name, Address} <- generate_names(Addresses)],
   {ok, { {one_for_one, 5, 10}, Children }}. 
```

或者使用 a`lists:foldl`而不是所有这些小函数来保持代码简短。

但无论如何，我会通过 init 的 Args 列表中的地址，而不是`get_env`在 init 内部调用以保持它的纯净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:11:04.230

从您的代码中，我知道您想从环境中获取孩子的数量。在rabbitmq开源项目worker_pool_sup.erl的源码中，我看过几乎相似的需求代码，代码优雅很多，我觉得对你有帮助。3个文件相关，worker_pool_sup.erl、worker_pool_worker.erl、work_pool.erl。

以下代码来自 worker_pool_sup.erl。

```
init([WCount]) ->
    {ok, {{one_for_one, 10, 10},
          [{worker_pool, {worker_pool, start_link, []}, transient,
            16#ffffffff, worker, [worker_pool]} |
           [{N, {worker_pool_worker, start_link, [N]}, transient, 16#ffffffff,
             worker, [worker_pool_worker]} || N <- lists:seq(1, WCount)]]}}. 
```

关于如何使用，以下代码来自worker_pool.erl

```
get_worker_pid(WId) ->
    [{WId, Pid, _Type, _Modules} | _] =
        lists:dropwhile(fun ({Id, _Pid, _Type, _Modules})
                              when Id =:= WId -> false;
                            (_)               -> true
                        end,
                        supervisor:which_children(worker_pool_sup)),
    Pid. 
```

# windows-phone-7 - 如何格式化详细的应用程序描述

> ID：10455036
> 
> 赞同：2
> 
> 时间：2012-05-04T19:31:40.767
> 
> 标签：windows-phone-7

提交应用时如何格式化详细的应用描述？

输入一个简单的项目符号列表，如下所示：

*   查看多种货币
*   转换为...

在手机市场上显示这个丑陋：

![Windows Marketplace 详细说明](../Images/b0e98e6681e987509d09271ab10b52ae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:53:39.127

**不要使用格式**

在 SO 问题“[成功提交 Windows Phone 7 Marketplace 的提示](https://stackoverflow.com/q/4141186/9664)”中，其中一个[答案](https://stackoverflow.com/a/4141420/9664)指出：

> 不要在市场描述中使用格式，因为它在市场中显示时不会保持一致。

博客文章“[提示 5 – 不要在市场描述中使用格式](http://websurfaces.co.uk/2010/10/14/tip-5dont-use-formatting-in-your-marketplace-descriptions/)”还详细说明了复制/粘贴 html 也会失败。

**App Hub 可能与上述内容相矛盾**

但是，“[应用程序中心应用程序提交演练](http://create.msdn.com/en-US/home/about/app_submission_walkthrough)”在详细说明清单（第 5 项）下明确指出：

> 包括要点以突出应用程序的功能。要点也应该简短。不超过六个要点

因此，似乎可以在详细说明中使用某种类型的项目符号列表，但没有关于如何正确格式化项目符号列表的现成指南。

**可能的选项**

一个建议是使用文本项目符号，即

```
- See multiple currencies
- Conversion for...
- etc... 
```

最后，作为最后的手段，向市场提交支持票并引用我上面引用的“应用程序中心应用程序提交演练”，并询问他们创建要点的指南在哪里。

# c# - 获取 BuiltInParameterGroup 枚举值的可读名称

> ID：10455038
> 
> 赞同：3
> 
> 时间：2012-05-04T19:31:50.930
> 
> 标签：c#, revit, revit-api

使用 Revit API 是否可以获取`BuiltInParameterGroup`枚举值（尺寸、材料和饰面等）的人类可读版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T19:34:20.940

我在 Autodesk 论坛上找到[了这篇文章](http://forums.autodesk.com/t5/Autodesk-Revit-API/BuiltinParameterGroup-name/td-p/3065664)，展示了如何使用`LabelUtils`该类。

```
string humanReadableGroup = 
  LabelUtils.GetLabelFor(BuiltInParameterGroup.PG_MATERIALS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:05:49.887

我没有想到代码，但您可以使用 SDK 随附的 Revit Lookup Snoop（随附源代码）来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T07:32:32.013

您可以获取任何`BuiltInParameterGroup`枚举值的 UI/显示名称，例如 PG_CONSTRAINTS，如下所示：

```
MessageBox.Show(info, LabelUtils.GetLabelFor(BuiltInParameterGroup.PG_CONSTRAINTS) + "Group"); 
```

# php - PHP 组合静态和非静态类与 2 个单独的类

> ID：10455041
> 
> 赞同：1
> 
> 时间：2012-05-04T19:32:25.083
> 
> 标签：php, oop, design-patterns, static-methods, static-members

我有一个用于构建 HTML 标记的 PHP 类。每个 HTML 标记都成为新实例。我在类中需要一些实用程序方法来处理某些功能性的东西，例如转义属性和配置影响所有实例的某些选项。我正在声明实用程序，`public static`并且在我`self::`用来调用实用程序方法的类中。您认为将所有方法保留在一个类中**还是**为实用程序创建一个单独的静态类并拥有它以便主类扩展静态类更好（这样我仍然可以使用 调用这些方法`self::`）？处理这种情况的最佳方法是什么？（在 PHP 5.2 及更高版本中）该类的接口是这样的：

```
foo('div')->attr('id', 'example')->html('this is inner text')->get();

foo('img')->attr(array('src' => 'example.png', 'alt' => 'example'))->get(); 
```

底层代码示例：

```
public function attr($name, $value = '')
{
    if (is_scalar($name))
    {
        if (empty($name) && !is_int($name)) $this->attrs[] = $value; 
        else $this->attrs[$name] = $value;
    }
    else
    {
        foreach ((array) $name as $k => $v)
        {
            $this->attr($k, $v);
        }
    }
    return $this;
}

// handler (doesn't get called until it's time to get)
public static function attr_encode($name, $value = '')
{
    if (is_scalar($name))
    {
        if (is_int($name)) return self::attr_encode($value, '');
        $name = preg_replace(self::ATTR_NAME_INVALIDS, '', $name);
        if ('' === $name)  return '';
        if (1 === func_num_args() || '' === $value) return $name;

        $value = is_null($value) ? 'null' : ( !is_scalar($value) ? (
                 self::supports('ssv', $name) ? self::ssv_implode($value) : json_encode($value)) : (
                 is_bool($value) ? (true === $value ? 'true' : 'false') : self::esc_attr($value)));

         return $name . "='" . $value . "'";     // Use single quotes for compatibility with JSON.
    }

    // Non-scalar - treat $name as key/value map:
    $array = array();
    foreach ((array) $name as $attr_name => $attr_value)
    {
        self::push($array, true, self::attr_encode($attr_name, $attr_value));
    }
    return implode(' ', $array);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:46:12.750

本主题为您提供了一些关于如何、何时以及何时不使用静态类的好信息：

[何时使用静态类与实例化类](https://stackoverflow.com/questions/1185605/when-to-use-static-vs-instantiated-classes)

另外..你写道：

> 类的接口是这样的：

PHP / OOP 中的接口是另一回事。接口迫使程序员在类中使用某些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:35:54.413

听起来您正在构建类似于 LINQ to XML 类的东西： http: [//broadcast.oreilly.com/2010/10/understanding-c-simple-linq-to.html#example_1](http://broadcast.oreilly.com/2010/10/understanding-c-simple-linq-to.html#example_1)或[http://phphaml.sourceforge 。网/](http://phphaml.sourceforge.net/)

也许那里有一些你可以适应的界面风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T10:41:38.207

我正在构建自己的 PHP5 HMVC 项目，其中在使用带有命名空间的 STATIC 的某些库上使用：

```
\Project\library\output::set_header_status(100); 
```

但是想象一下你的问题：

*   我想在调用某些函数之前添加函数，或者避免：

    ```
    $output = \Project\library\output->log(true, 'directory_log_of_header/');

    \Project\library\output::set_header_status(100); 
    ```

所以，出现了问题。这个例子不起作用。而不是这个示例函数，我将使用 STATIC 来避免这种情况，并使用`$this`和调用一个新实例。

如果我需要添加一些函数，放置一些变量并准备调用函数它应该使用`non-static`使用实例。

* * *

我使用 STATIC 方法仅用于直接调用函数，而无需先前的准备函数、设置变量或用于计数器，或设置真正需要使用静态的变量。例如，它可以用于调用 GET/POST 数据或直接调用 CLEARING CACHE（例如直接从文件中删除缓存而不是非静态的）。

*   如果我只使用静态，我不知道有多少实例正在调用实例，如果你在课堂上需要调用另一个实例而不是更好的解决方案真正使用`non-static`.

    使用 STATIC 方法构建项目的人无法正确分析调用静态方法/类/函数的位置。这对于未来业务的维护和开发将更加困难。

    仅当函数提供小任务时才使用 STATIC，直接抓取不经常更改的数据，或将小任务用作变量、虚拟数据（例如：版本、检查、计数器、检查器），用于 HASH 算法等。

# vb.net - 在 Excel 中使用 VBA 搜索多个值

> ID：10455044
> 
> 赞同：2
> 
> 时间：2012-05-04T19:32:35.587
> 
> 标签：vb.net, search, excel, vba

我不知道是否可以在 VBA 中实现这个问题，或者必须用 VB 来完成。网络使用 Visual Studio。

问题：Excel有它的搜索功能，如果有很多可用的值或者你必须找到一个离A列很远的值，那就很痛苦了。

![在此处输入图像描述](../Images/3de4fad5749028b64c03b8577519e75a.png)

我想要这样的东西

![在此处输入图像描述](../Images/c1d4125bd943ca52df5de362c4acce7d.png)

我可以在其中通过标题名称指定要显示的列。以我想要的方式重新排列列，并能够复制和粘贴。像 Visual Basic 中的数据网格？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:38:06.223

我在下面给出了两种方法 - VBA 和 VB.net（任你选）:)

**使用 VB.NET**

在您的 VB.net 窗体上放置一个 DataGridView 并放置一个按钮。将此代码放在按钮中

```
Public Class Form1
    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim masterTable As New DataTable

        Dim cnnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Extended Properties=""Excel 12.0 Xml;HDR=NO"";Data Source=""{0}"";"

        Using da As New OleDb.OleDbDataAdapter("select * from [Sheet1$] Where F1 = 'Test1'", String.Format(cnnStr, "C:\Book1.xlsx"))
            da.Fill (masterTable)
        End Using
        DataGridView1.DataSource = masterTable
    End Sub
End Class 
```

你完成了:)

**快照**

我正在使用有限的数据。

![在此处输入图像描述](../Images/6e57390d774748dbb994b91bb33fd8f8.png)

您还可以将字符串更改`"select * from [Sheet1$] Where F1 = 'Test1'"`为`"select F1 as Name,F2 as PN, F3 as [Inventory Loc] from [Sheet1$] Where F1 = 'Test1'"`以显示标题，如下所示

![在此处输入图像描述](../Images/f85ff9fae771fdb4d35b2337bb31706f.png)

**编辑**

如果您想知道如何在 VBA 中执行此操作

**使用 VBA**

在窗体上放置一个列表框和一个命令按钮，然后使用此代码。

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim ws As Worksheet, ws1 As Worksheet
    Dim rng As Range
    Dim lastRow As Long
    Dim Ar As Variant

    Set ws = Sheets("Sheet1")

    lastRow = ws.Cells.Find(What:="*", After:=ws.Range("A1"), _
              Lookat:=xlPart, LookIn:=xlFormulas, _
              SearchOrder:=xlByRows, SearchDirection:=xlPrevious, _
              MatchCase:=False).Row

    Set rng = ws.Range("A1:C" & lastRow)

    Set ws1 = Sheets.Add

    With rng
        ws.AutoFilterMode = False
        .AutoFilter Field:=1, Criteria1:="Test1"
        .SpecialCells(xlCellTypeVisible).Copy ws1.Range("A1")
        ws.AutoFilterMode = False

        lastRow = ws1.Cells.Find(What:="*", After:=ws1.Range("A1"), _
                  Lookat:=xlPart, LookIn:=xlFormulas, SearchOrder:=xlByRows, _
                  SearchDirection:=xlPrevious, MatchCase:=False).Row

        Ar = ws1.Range("A1:C" & lastRow)

        Application.DisplayAlerts = False
        ws1.Delete
        Application.DisplayAlerts = True
    End With

    With Me.ListBox1
        .Clear
        .ColumnHeads = False
        .ColumnCount = 3
        .List = Ar
        .ColumnWidths = "50;50;50"
        .TopIndex = 0
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/0d1b63e90ee7f80e53849becffb39c5d.png)

**更多跟进**

> 嗨 Siddharth，非常感谢您提供这两个代码。对于 VB。净是美妙的。对于 Exel 中的 VBA，有什么方法可以复制（使用 Ctrl + C）来复制数据 - 单行就可以了，尽管复制多行更可取。我可以用文本框 i49.tinypic.com/2ceq3yf.jpg 替换“Test1” – user1370854 5 小时前

是的，可以将列表框中的单个选定项或多个选定项复制到剪贴板。要使 listobx 多选，在设计模式下，将 listbox 的属性设置为`fmMultiSelectMulti1`。接下来添加一个命令按钮并粘贴此代码。

此代码再次基于我上面使用的数据，因此请根据需要对其进行修改。当您按下`Copy`按钮时，数据被复制到剪贴板，然后您可以简单地`CTL V`将数据粘贴到您想要的任何位置；例如在记事本中。

```
Private Sub CommandButton2_Click()
    Dim MyData As DataObject
    Dim i As Long
    Dim strCopiedText As String

    Set MyData = New DataObject

    With Me.ListBox1
        For i = 1 To .ListCount
            If .Selected(i - 1) Then
                strCopiedText = strCopiedText & _
                                .List(i - 1, 0) & vbTab & _
                                .List(i - 1, 1) & vbTab & _
                                .List(i - 1, 2) & vbCrLf
            End If
        Next i

        If Len(strCopiedText) > 0 Then
            MyData.Clear
            MyData.SetText strCopiedText
            MyData.PutInClipboard
            MsgBox "Data copied to clipboard"
        End If
    End With
End Sub 
```

![在此处输入图像描述](../Images/d9326ae64443995342d8e74359b585c7.png)

# c# - 启动画面在关闭前从未完全加载

> ID：10455048
> 
> 赞同：0
> 
> 时间：2012-05-04T19:32:51.720
> 
> 标签：c#, winforms, splash-screen

我目前正在向我的 winform 添加启动画面。我的启动画面只是另一种形式，在哪里，

```
this.Text = "";
this.ControlBox = False; 
```

表单中的所有内容都是带有 BackgroundImage 的 PictureBox 和

```
this.BackgroundImageLayout = BackgroundImageLayout.Center 
```

和一个 ProgressBar 递增值，直到我的 MainForm 的初始化完成。

我使用 Show 而不是 ShowDialog 来打开 Splash。好吧，ProgressBar 可以正常工作，但 PictureBox 中的 BackgroundImage 似乎永远不会加载。我所看到的只是带有 ProgressBar 的白色背景。

我在递增 ProgressBar 的同一方法中使用 SplashScreen.Show()，并且在从 MainForm 的构造函数调用的方法中调用此方法。

我曾尝试在单独的线程中使用 SplashScreen.Show，但这会导致同样的问题。任何帮助将不胜感激，如果需要，我愿意提供更多信息。

**解决了：**

在它自己的线程中启动它时必须使用 ShowDialog，因为 Show 将在线程结束时关闭窗体，但使用 ShowDialog，线程将保持运行直到窗体关闭。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:36:22.327

我的猜测是您正在阻止消息队列，但没有看到更多代码，我无法确定。

您可能想看看这个闪屏项目。我以前用过。效果很好。

[http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)

除其他外，该项目在单独的线程上运行启动屏幕以保持响应并防止消息队列阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:36:59.183

问题是您的初始屏幕显示在主线程上，然后立即继续执行初始化应用程序的其他工作，并且永远没有机会绘制初始屏幕。

您需要在自己的线程上运行启动画面以使其清晰地绘制。请参阅[http://msdn.microsoft.com/en-us/library/aa446493.aspx](http://msdn.microsoft.com/en-us/library/aa446493.aspx)

# jquery - Datepicker：似乎约束输入在任何浏览器中都不起作用？

> ID：10455049
> 
> 赞同：1
> 
> 时间：2012-05-04T19:32:53.077
> 
> 标签：jquery, datepicker

试图阻止用户在与 jqueries datepicker 关联的输入框中手动输入日期。我只想让日期选择器填充输入框....

继承人的语法：

```
$(document).ready(function () {
    $("input[date-picker]")
    .datepicker({ constrainInput: true });
}); 
```

PS：所有日期时间输入元素都包含属性：date-picker="True"

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:51:13.293

该属性`readonly`将阻止用户编辑输入字段：

```
$("input[date-picker]").attr('readonly', 'readonly'); 
```

# google-app-engine - 如何在一个应用程序下单独运行 GAE 项目？

> ID：10455051
> 
> 赞同：1
> 
> 时间：2012-05-04T19:32:56.397
> 
> 标签：google-app-engine

我是网络应用程序和谷歌应用引擎的新手。我不明白项目和应用程序之间的关系。我知道有一个唯一的应用程序ID，但是在应用程序下，可以有很多项目。

现在我想使用 URL 中的不同文件夹在一个应用程序下单独运行这些项目，如下所示：[http://udacity-cs253.appspot.com/unit2/rot13](http://udacity-cs253.appspot.com/unit2/rot13)。它对项目使用不同的 URL，但我不知道该怎么做。

我阅读了谷歌的帮助页面，但他们没有帮助。那么有人可以帮我解决这个问题吗？

谢谢~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:27:26.887

应用程序由部署到 App Engine 的所有代码组成，这些代码位于单个应用程序 ID (appid) 下。对于您共享的单个 appid：

*   数据存储内容
*   cron 工作
*   任务队列
*   日志
*   项目管理员和权限
*   计费设置和配额

如果您想将单个应用程序中的代码安排到逻辑项目中，并且愿意在同一个 appid 中包含的项目之间共享上述代码，您可以随意这样做。

但是，如果您想隔离项目（例如，如果您不希望项目 A 的开发人员能够配置项目 B），您应该为每个项目创建单独的 appid 并单独管理它们。

至于将请求路由到单个项目，schmid00 的回答提供了有关如何执行此操作的有用建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:41:50.140

假设您的应用程序是用 python 编写的。您在 app.yaml 文件中执行此操作

如果你的 app 文件夹中有 2 个应用程序（unit1 和 unit2），它们都有一个 main.py，你可以在其中定义你的 WSGI`application`

在你的`app.yaml`你这样做：

```
- url: /unit1/.*
  script: unit1.main.application

- url: /unit2/.*
  script: unit2.main.application 
```

路径为 /unit1/.* 的所有请求将由 unit1 提供服务，/unit2/.* 由 unit2 提供服务。数据存储将被共享

# parsing - 在 TypoScript 中解析和输出 TypoScript

> ID：10455055
> 
> 赞同：1
> 
> 时间：2012-05-04T19:33:04.633
> 
> 标签：parsing, typo3, typoscript

我用一个名为*TypoScript*的文本字段扩展了 pages 表。

我的意图是在 TMENU 中使用这个字段，以便我可以将任意内容显示为——例如——该页面的下拉菜单。

我知道如何在扩展中解析和输出 TypoScript，但我不确定是否有办法单独在 TypoScript 中做到这一点。

所以，总而言之：是否有可能有一个 TypoScript 字符串并在 TypoScript 中解析和输出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:06:28.287

您必须为此使用用户功能。

更具体地说，您必须使用 the`USER`或`USER_INT`content 对象。

# json - 使用 Jersey 强制 JSON JAXB 忽略多态类型的“类型”属性

> ID：10455061
> 
> 赞同：2
> 
> 时间：2012-05-04T19:33:30.987
> 
> 标签：json, jaxb, jersey, jax-rs, jackson

我正在使用抽象类将我的模型本地化为不同的语言。这是我建立的继承链：

```
//Base model, contains localized fields
public class Restaurant extends LocalizedModel<LocalizedRestaurantData>{

...

}

//Abstract class to support localized fields for all my models
@XmlRootElement
public abstract class LocalizedModel<T extends LocalizedData> {

    private T en;

    public T getEn() {
        return en;
    }
    public void setEn(T en) {
        this.en = en;
    }
    ...
}

//Implementation of the localized fields for the restaurant class.
@XmlRootElement
public class LocalizedRestaurantData extends LocalizedData{

    protected String name;
    protected String address;
    ...
} 
```

这一切都在我的 Jersey JSON Web 服务中运行良好，除了一件事：本地化属性的所有实例都`en`包含一个额外的字段`type`：

`Restaurant`JSON：

```
{
"en": {
        "type": "localizedRestaurantData",
        "address": "1234 Main St.",
        "name": "Tacos Folie"
    },
 ...
} 
```

这个`type`字段是不受欢迎和不受欢迎的，特别是因为杰克逊在解析对象时似乎也需要它。我`@JsonIgnoreProperties({"type"})`在我的代码中添加了但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T20:42:27.103

在杰克逊和泽西邮件列表上多次尝试并寻求帮助后，我找到的解决方案是：

我的 JERSEY 上下文正在实施`ContextResolver<JSONJAXBContext>`。这需要更改为`ContextResolver<JacksonJsonProvider>`使用纯 JSON 解析器。

其次，JacksonJsonProvider 需要配置如下：

```
JacksonJsonProvider jjp = new JacksonJsonProvider();
jjp.configure(Feature.WRITE_NULL_MAP_VALUES, false);
jjp.configure(Feature.WRITE_NULL_PROPERTIES, false); 
```

并用作上下文。

最后，需要在 ContextResolver 中重写如下方法：

```
@Override
    public Set<Object> getSingletons() {
      Set<Object> s = new HashSet<Object>();
      JacksonJsonProvider jjp = new JacksonJsonProvider();
      jjp.configure(Feature.WRITE_NULL_MAP_VALUES, false);
      jjp.configure(Feature.WRITE_NULL_PROPERTIES, false);
      s.add(jjp);
      return s;
    } 
```

# delphi - 覆盖嵌入表单上的 keydown 事件后，keydown 事件不会在 firemonkey 中的嵌入表单上触发

> ID：10455062
> 
> 赞同：0
> 
> 时间：2012-05-04T19:33:37.290
> 
> 标签：delphi, firemonkey

我有一个 firemonkey 应用程序，可以打开嵌入到主窗体上的控件中的窗体。我正在尝试在嵌入式表单上使用 keydown 事件，但该事件没有触发。其他帖子建议覆盖表单上的 keydown 事件，但这仅在主表单上完成时才有效，即使在被覆盖时，事件也不会在嵌入表单上触发。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T23:39:19.770

只需使用主窗体的 OnKeyDown 事件来扫描 TForm 后代的子控件并将“onkeydown”重新发送到包含的窗体。

应该是一个简单的例程——如果你把它放到一个共享单元中，你可以以所有形式使用它，以确保按键传播到包含的表单。

# assembly - SEGSEV，ENTER 操作码上的分段错误

> ID：10455065
> 
> 赞同：0
> 
> 时间：2012-05-04T19:33:46.593
> 
> 标签：assembly, segmentation-fault, nasm

（我正在为 NASM 编写纯 x86 程序集，而不是 C/C++。）

当编译的二进制文件运行时，我遇到了分段错误 - 我知道这是一个古老的错误消息，但是搜索这个特定的分段错误实例并没有被证明是富有成效的：

gdb 表明故障发生在`ENTER 616,0`调用开始时。我相信这与将 old `%rbp`、 storage `%rsp`into`%rbp`和 reduction `%rsp`for`616`局部变量的字节数相同。

有没有更多经验的人暗示为什么会在这里发生分段错误？对于内存访问问题来说，这似乎是一个奇怪的地方——唯一想到的是 616 可能会减少很多，但除此之外它让我感到困惑。允许的大小是否有限制（可用内存总量除外）？

任何帮助将非常感激。

更新：如果有帮助，这不是一长串递归调用的结束：

```
(gdb) backtrace
#0  0x00000000004005e0 in user_func ()
#1  0x0000000000400e69 in if4 ()
#2  0xffffffffffffffff in ?? ()
#3  0xffffffffffffffff in ?? ()
#4  0x0000000000000000 in ?? ()

(gdb) frame 0
#0  0x00000000004005e0 in user_func ()

(gdb) disassemble
Dump of assembler code for function user_partition:
=> 0x00000000004005e0 <+0>:     enterq $0x2b0,$0x0
   0x00000000004005e4 <+4>:     push   %r15
   0x00000000004005e6 <+6>:     push   %r12
   0x00000000004005e8 <+8>:     push   %r13
   0x00000000004005ea <+10>:    push   %r14
   ... 
```

更新 2：由于回溯似乎表明堆栈指针损坏，以下是有关每个方法调用的一些相关细节：

```
user_func:                           
   ENTER      296, 0                         
   PUSH       R13      ; Saving any callee-saved registers used in main body   
   PUSH       R15     
   PUSH       R14     
   PUSH       R12     
   ; Only opcodes to MOV between temp registers and [ RBP - x ]
   MOV        RAX, 0                        
   POP        R12      ; Restoring the callee-saved registers    
   POP        R14
   POP        R15
   POP        R13
   LEAVE                                    
   RET 
```

在推动/弹出事物方面，我是否可能在这里做错了什么？离开之前的流行音乐对我来说似乎是正确的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:06:40.303

`0x0000000000000`回溯跟踪中的和之类的值`0xffffffffffff`表明您在某个时候已经丢弃了堆栈（覆盖了返回值或类似内容）。您的堆栈指针很可能是垃圾，因此推送到它很可能会导致段错误。

# android - 为自动生成的 TextView 和 Button 设置重力

> ID：10455070
> 
> 赞同：0
> 
> 时间：2012-05-04T19:34:13.457
> 
> 标签：android, android-layout, margin, gravity

如何设置自动生成的`gravity`和`margin`（在代码中）`TextViews`和`Buttons`？它们在一个`LinearLayout`.

这是我的生成代码：

```
 for(int i=0; i<num_enter; i++){
    final int cuco = i;
    LinearLayout linlay = new LinearLayout(this);
    linlay.setOrientation(0);
    TextView text = new TextView(this);
    text.setText(name[cuco] + "        ");
    linlay.addView(text);
    TextView num = new TextView(this);
    num.setId(cuco);
    num.setText("" + current[cuco]);
    linlay.addView(num);
    Button minus = new Button(this);
    minus.setText("-");
    minus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            int cval = current[cuco];
            int currentF = current[cuco] - 1;
            current[cuco] = current[cuco] -1;
            SetSql update = new SetSql(SpellCast.this);
            update.open();
            update.changeCurrent(currentF, cval, name[cuco]);
            update.close();
            ((TextView) findViewById(cuco)).setText("" + currentF);
        }
    });
    LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.RIGHT);
    minus.setLayoutParams(p);
    linlay.addView(minus);
    Button plus = new Button(this);
    plus.setText("+");
    plus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            int cval = current[cuco];
            int currentF = current[cuco] + 1;
            current[cuco] = current[cuco] + 1;
            SetSql update = new SetSql(SpellCast.this);
            update.open();
            update.changeCurrent(currentF, cval, name[cuco]);
            update.close();
            ((TextView) findViewById(cuco)).setText("" + currentF);
        }
    });
    LinearLayout.LayoutParams w = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.RIGHT);
    plus.setHeight(LayoutParams.WRAP_CONTENT);
    plus.setWidth(50);
    plus.setLayoutParams(w);
    linlay.addView(plus);

    main.addView(linlay);
    } 
```

希望你能找到一种方法来设置按钮重力而不改变它的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:53:00.250

1）获取TextView的参考说电视。

2) tv.setGravity(Gravity.CENTER);

不确定是否可以使用 LinearLayout .. 尝试相对或绝对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:55:24.053

使用`View.setLayoutParams(ViewGroup.LayoutParams params)`. 查看[http://developer.android.com/reference/android/R.styleable.html#ViewGroup_Layout](http://developer.android.com/reference/android/R.styleable.html#ViewGroup_Layout)的`LayoutParams`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:55:34.083

由于没有人解决利润率问题

```
LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
p.setMargins(10, 10,10,10);
p.gravity = Gravity.CENTER;

textView.setLayoutParams(p); 
```

使用 setLayoutParams 时，请确保布局参数的类型与父视图相匹配，在本例中为 LinearLayout

`setGravity(Gravity.CENTER);`将设置视图内文本的重力

# asp.net-mvc - ASP.net MVC 使用部分创建相关对象

> ID：10455071
> 
> 赞同：1
> 
> 时间：2012-05-04T19:34:13.800
> 
> 标签：asp.net-mvc, partial

我对 ASP 和 MVC 比较陌生，但到目前为止一切正常。我正在使用 DB first 方法并设置我的 DB 表（它是用 FK 等清理的现有 DB）。

我有一条 FK 路线：

```
Contact
    - LettingContact
         - Landlord          
         - Tenant 
```

我希望能够使用部分来显示数据，例如 /Contact/_Create 将保存联系信息，即标题、名字、姓氏，并将由 /Contact/Create 和 /Tenant/Create 使用。我设法让它工作而不使用部分，而只是使用租户/创建 html 表单上的字段并显示模型中的相关数据。对于控制器中的租户/创建，我执行了以下操作（执行以下操作阻止了我在部分中获得空异常）

```
Tenant tenant = new Tenant();
LettingsContact lettingsContact = new LettingsContact();
Contact contact = new Contact();
tenant.LettingsContact = letContact;
tenant.LettingsContact.Contact = contact;
return View(tenant) 
```

现在视图是

```
//using Html.BeginForm etc

@{
   Html.RenderPartial("../Contact/_Create", Model.LettingsContact.Contact);
   Html.RenderPartial("_Create", Model);
}

<input type="submit" value="create">

//rest of html 
```

现在，当我单击提交按钮时，它会转到我的 /Tenant/Create 发布事件。

```
[HttpPost]
public ActionResult Create(Tenant  tenant)
{
     if (ModelState.IsValue)
     {
         tenant.ContactID = Guid.NewGuid();
         tenant.LettingsContact.Contact.ContactID = tenant.ContactID;
         db.Tenants.AddObject(tenant);
         db.SaveChanges();
         return RedirectToAction("Index");             
     }
} 
```

但是，读取`tenant.LettingContact.Contact.ContactID`崩溃的行将对 LettingsContact 的 NullReferenceException 为空。部分不维护模型的任何原因？

另外，如果有更好的方法，请告诉我，因为这对我来说仍然很新。

我想使用 partials 的原因是它可以让我重用 jQuery 模态表单等中的表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:44:13.327

如果您希望表单回发您不希望在页面上显示的信息，您应该使用隐藏字段。看看`Html.Hidden()`和`Html.HiddenFor()`。

隐藏在 msdn 上：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.hidden.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.hidden.aspx)

msdn 上的 HiddenFor：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.hiddenfor.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.hiddenfor.aspx)

# mysql - Mysql结果行到字符串，UNION

> ID：10455073
> 
> 赞同：0
> 
> 时间：2012-05-04T19:34:25.837
> 
> 标签：mysql, union

我有一个名为 tblClients 的表，其中包含以下字段：idClient、姓名、信用、债务。

```
Create table tblClients(idClient int,name varchar(20), credit int, debt int);
insert into tblClients values(1,'Guillermo',1000,0),(2,'Jess',5000,2000); 
```

我想对债务类型进行分类，例如

```
debt = 0 NOT                DEBTOR
debt between 0 AND 1000     LOW DEBTOR
debt between 1001 AND 2000  MEDIUM DEBTOR. 
```

如果我进行此查询，我会得到债务人类型。

```
SELECT name AS 'Client',debt AS 'Debtor Type' FROM tblClients WHERE debt = 0;
SELECT name AS 'Client',debt AS 'Debtor Type' FROM tblClients WHERE debt BETWEEN 1 AND 1000; 
```

我怎样才能把标签`DEBTOR`，`LOW DEBTOR`或者`MEDIUM DEBTOR` 在债务列而不是债务编号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:42:58.673

试试这个：

```
SELECT name AS Client, 
CASE 
    WHEN debt = 0 THEN 'Not Debtor'
    WHEN debt BETWEEN 1 AND 1000 THEN 'Low Debtor'
    ELSE 'Medium Debtor'
END AS debt
FROM tblClients 
```

# c# - 非常基本的除法方程在c#中不起作用

> ID：10455074
> 
> 赞同：2
> 
> 时间：2012-05-04T19:34:36.383
> 
> 标签：c#, visual-studio-2010

我不能把它分成小数。它正在四舍五入到值 0。

```
 private void button24_Click(object sender, EventArgs e)
    {
        double x = 0;

        x = 1 / 2;

        ans.Text = x.ToString();
    } 
```

当我调试时，x 在发送到文本框“ans”之前为零。

我试过了..字符串变量仍然为零..

```
double x = 1/5;

string displayX = x.ToString("0.0000"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T19:35:42.987

这是[整数除法](http://en.wikipedia.org/wiki/Division_%28mathematics%29#Division_of_integers)，这些是预期的输出。

```
double x = 1.0 / 5;  // this will not perform integer division
double x = 1/5;  // this does  (1/5 = 0).  
double x = 1D / 5; // this will not because 1 is treated as a double 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:38:33.627

您可以执行以下操作之一：

```
double x = 1;
double y = 1.5;

double ans = x / y; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T19:38:24.250

将 double x = 1/5 替换为 double x = 1.0/5 应该可以解决问题。因为您要划分的两个数字都是整数，所以它仍然将其作为整数处理，而不是作为双精度数处理。当您从逻辑上考虑时，它是有道理的-它以这些数字的任何形式进行除法，然后将其保存到变量中；变量类型与实际方程无关。

（我意识到已经有其他答案了，但希望这能帮助您了解问题存在的原因。）

# wcf - 使用参数从 VBScript、WScript、VBA 等调用 WCF (.svc) 服务

> ID：10455075
> 
> 赞同：1
> 
> 时间：2012-05-04T19:34:40.253
> 
> 标签：wcf, web-services, vba, vbscript, wsh

我一直在尝试实现之前发布的问题中提供的示例：

[通过 VBScript 调用 WCF 服务](https://stackoverflow.com/questions/944975/)

在我的特定场景中，我需要传入一个字符串变量，该变量将返回一个字符串数组，但运气不佳。

我怀疑我很难让信封请求正确。下面是我试图调用的 wdsl。你能给我一个例子来说明我如何调用这个传递参数并解析返回数组吗？

```
 <?xml version="1.0" encoding="utf-8" ?> 
 <wsdl:definitions name="TestSvc" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://tempuri.org/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata">
 <wsdl:types>
 <xsd:schema targetNamespace="http://tempuri.org/Imports">
  <xsd:import schemaLocation="http://localHost/testSvc.svc?xsd=xsd0" namespace="http://tempuri.org/" /> 
  <xsd:import schemaLocation="http://localHost/testSvc.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/" /> 
  <xsd:import schemaLocation="http://localHost/testSvc.svc?xsd=xsd2" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /> 
  </xsd:schema>
  </wsdl:types>
 <wsdl:message name="ITestSvc_GetDataBy_Id_InputMessage">
 <wsdl:part name="parameters" element="tns:GetDataBy_Id" /> 
 </wsdl:message>
 <wsdl:message name="ITestSvc_GetDataBy_Id_OutputMessage">
  <wsdl:part name="parameters" element="tns:GetDataBy_IdResponse" /> 
  </wsdl:message>
 <wsdl:portType name="ITestSvc">
 <wsdl:operation name="GetDataBy_Id">
  <wsdl:input wsaw:Action="http://tempuri.org/ITestSvc/GetDataBy_Id" message="tns:ITestSvc_GetDataBy_Id_InputMessage" /> 
  <wsdl:output wsaw:Action="http://tempuri.org/ITestSvc/GetDataBy_IdResponse" message="tns:ITestSvc_GetDataBy_Id_OutputMessage" /> 
  </wsdl:operation>
 <wsdl:binding name="BasicHttpBinding_TestSvc" type="tns:ITestSvc">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" /> 
 <wsdl:operation name="GetDataBy_Id">
  <soap:operation soapAction="http://tempuri.org/ITestSvc/GetDataBy_Id" style="document" /> 
 <wsdl:input>
  <soap:body use="literal" /> 
  </wsdl:input>
 <wsdl:output>
  <soap:body use="literal" /> 
  </wsdl:output>
  </wsdl:operation>
  </wsdl:binding>
 <wsdl:service name="TestSvc">
 <wsdl:port name="BasicHttpBinding_ITestSvc" binding="tns:BasicHttpBinding_ITestSvc">
  <soap:address location="http://localhost/TestSvc.svc" /> 
  </wsdl:port>
  </wsdl:service>
  </wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:08:14.290

此 WSDL 文档不包含`<wsdl:import>`操作输入/输出的模式（所有语句），因此仅根据此信息无法判断请求的外观。

但是您可以做一件事：打开 WCFTestClient.exe，将其指向正在运行的服务的 WSDL，然后 -**在运行 Fiddler 等工具时**- 向服务发送请求。通过这种方式，您将能够看到正在进行的请求以及服务响应。此时，复制请求（包括 HTTP 标头等内容`SOAPAction`，如果适用）和请求正文。

# file - Tcl 从浏览器上传确定文件名

> ID：10455076
> 
> 赞同：0
> 
> 时间：2012-05-04T19:34:44.380
> 
> 标签：file, cross-platform, tcl, tail

我在将文件从 Windows 计算机上传到 Unix 服务器的一个 Tcl 脚本中遇到了问题。我想从 Windows 文件中获取原始文件名并使用相同的名称保存新文件。问题是 [file tail windows_file_name] 不起作用，它返回整个文件名，如“c:\temp\dog.jpg”，而不仅仅是“dog.jpg”。文件尾部在 Unix 文件名“/usr/tmp/dog.jpg”上正常工作，因此由于某种原因它没有检测到文件是 Windows 格式。但是，我的 Windows 计算机上的 Tcl 对任何一种名称格式都可以正常工作。我使用的是 Tcl 8.4.18，所以它可能太旧了？还有其他技巧可以让它正确拆分吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:25:57.503

这里的问题是，在 Windows 上，只要涉及 Windows API，两者`\`和`/`都是有效的路径分隔符（即使仅`\`在 Windows 上被视为“官方”）。另一方面，在 POSIX 中，唯一有效的路径分隔符是`/`，并且唯一不能出现在路径名组件中的两个字节是`/`和`\0`（值为 0 的字节）。

因此，在 POSIX 系统上，“C:\foo\bar.baz”是一个完全有效的*短*文件名，并且正在运行

```
file normalize {C:\foo\bar.baz} 
```

会产生`/path/to/current/dir/C:\foo\bar.baz`。同理，`[file tail $short_filename]`同理`$short_filename`。

解决方案是要么按照 Glenn Jackman 的建议去做，要么通过其他方式从浏览器传递短名称（某些 JS 绑定到适当的文件条目？）。您也可以尝试从 User-Agent 标头中检测用户的操作系统。

为了让 Glenn 的想法对用户的平台更加不可知，你可以这样：

1.  扫描文件名中的“/”。
    *   如果没有找到，请执行`set fname [string map {\\ /} $fname]`下一步。
2.  用于`[file tail $fn]`提取尾部名称。

它不是很防弹，但据说总比没有好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:07:03.603

你总是可以做`[lindex [split $windows_file_name \\] end]`

# java - Java OO 设计——将（键，值）对与布尔变量的值相关联

> ID：10455081
> 
> 赞同：0
> 
> 时间：2012-05-04T19:35:30.267
> 
> 标签：java, oop

现在我的班级看起来像这样：

```
private boolean hungry;
private boolean sleepy;
private boolean happy;

...

private setState(List<KeyValuePair> pairs) {
   for (KeyValuePair pair : pairs) {
       String key = pair.getKey();
       String value = pair.getValue();

       if (key.equals("hunger") && value.equals("Y")) hungry = true;
       if (key.equals("tired") && value.equals("Y")) sleepy=true;
       if (key.equals("sad") && value.equals("N")) happy = true;
   }
} 
```

这很好，但非常依赖于这个特定的条件逻辑。不幸的是，我无法更改 KeyValuePair 的想法（它是外部的）

让（键，值）对将适当的变量设置为 true 的更稳健的方法是什么？（永远为真，从不假）

我希望它易于阅读+可扩展。

我唯一能想到的就是制作一个`Map<Map<String,String>,String>`，这很糟糕，特别是因为我必须在运行时静态构建。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:39:23.600

怎么样：

```
private setState(List<KeyValuePair> pairs) {
   for (KeyValuePair pair : pairs) {
       String key = pair.getKey();
       String value = pair.getValue();

       hungry = (key.equals("hunger") && value.equals("Y")) || hungry;
       sleepy = (key.equals("tired") && value.equals("Y")) || sleepy;
       happy = (key.equals("sad") && value.equals("N")) || happy;
   }
} 
```

如果它的任何状态曾经评估过，`true`那么无论其他迭代如何，它都将保持真实。就使这更简单（删除逻辑）而言，鉴于您那里有地图和列表的奇怪混合，我看不出您如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:59:35.213

只是为了好玩：

```
import java.util.Comparator;
import java.util.List;
import java.util.SortedSet;
import java.util.TreeSet;

public class State
{
  public static class KeyValuePair
  {
    private final String key;
    private final String value;

    public KeyValuePair( String key, String value )
    {
      super();
      this.key = key;
      this.value = value;
    }

    public String getKey()
    {
      return this.key;
    }

    public String getValue()
    {
      return this.value;
    }

  }

  public boolean setState( List<KeyValuePair> pairs )
  {
    //
    boolean happy = false;

    //
    final Comparator<KeyValuePair> comparator = new Comparator<KeyValuePair>()
    {
      @Override
      public int compare( KeyValuePair o1, KeyValuePair o2 )
      {
        int compareTo = o1.getKey().compareTo( o2.getKey() );
        if ( compareTo == 0 )
        {
          compareTo = o1.getValue().compareTo( o2.getValue() );
        }
        return compareTo;
      }
    };
    final SortedSet<KeyValuePair> matchingKeyValuePairSet = new TreeSet<KeyValuePair>( comparator );
    matchingKeyValuePairSet.add( new KeyValuePair( "hunger", "Y" ) );
    matchingKeyValuePairSet.add( new KeyValuePair( "tired", "Y" ) );
    matchingKeyValuePairSet.add( new KeyValuePair( "sad", "N" ) );

    for ( KeyValuePair pair : pairs )
    {
      happy |= matchingKeyValuePairSet.contains( pair );
    }

    //
    return happy;

  }

} 
```

JUnit 测试用例：

```
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

import java.util.Arrays;
import java.util.List;

import org.junit.Test;

public class StateTest
{
  private State state = new State();

  @Test
  public void testSetState()
  {
    {
      final List<State.KeyValuePair> pairs = Arrays.asList( new State.KeyValuePair( "hunger", "Y" ) );
      assertTrue( this.state.setState( pairs ) );
    }
    {
      final List<State.KeyValuePair> pairs = Arrays.asList( new State.KeyValuePair( "hunger", "N" ) );
      assertFalse( this.state.setState( pairs ) );
    }
    {
      final List<State.KeyValuePair> pairs = Arrays.asList( new State.KeyValuePair( "hunger", "N" ),
                                                            new State.KeyValuePair( "sad", "N" ) );
      assertTrue( this.state.setState( pairs ) );
    }
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:12:50.613

`KeyValuePair`你的工具很有可能`equals`。如果是这样，你可以写

```
final KeyValuePair kvHungry = new KeyValuePair("hunger", "Y");
boolean hungry = false;
for (KeyValuePair pair : pairs) hungry |= pair.equals(kvHungry); 
```

其他人也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T19:56:34.333

首先，我会创建一个枚举来代表各州，毕竟这就是它们的用途。仅此一项就可以使事情变得更清洁，但是如果您真的想让它更具可扩展性，我会创建一个抽象的 StateResolver 类。它将由 HungerStateerResolver、SleepStateResolver 和 HappynessStateResolver 扩展。然后这些人会有一个解决方法，它会根据我的输入给我一个结果状态。确实，它是可扩展的，但您必须考虑到您将创建一个层次结构，这也有其自身的含义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T19:41:15.783

我不认为条件逻辑有什么特别错误的地方。简洁明了。

一种可能性是尝试将其转变为某种数据驱动的设计，但我怀疑这会买多少，因为您设置的变量（`hungry`等）必须在编译时知道。

# sencha-touch - Sencha Touch 与商店的接触问题

> ID：10455085
> 
> 赞同：0
> 
> 时间：2012-05-04T19:36:24.733
> 
> 标签：sencha-touch, sencha-touch-2

我定义了一个要手动添加数据的商店。商店连接到定义了适当字段的模型，并且商店被实例化。

为什么这行得通

```
Ext.getStore('Inspections').add({"code":"123","descr":"Inspection 123"}); 
```

为什么这不起作用

```
Ext.getStore('Inspections').loadData([{"code":"123","descr":"Inspection 123"}]); 
```

我明白了`LoadData not defined error.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:21:10.953

因为`loadData`不是商店的方法：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store)

你想要的是[setData](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-method-setData)。

# c# - 从图像列可能为空的数据库中加载图片框图像

> ID：10455086
> 
> 赞同：1
> 
> 时间：2012-05-04T19:36:28.480
> 
> 标签：c#, sql-server

有从数据库加载图像并在图片框中显示的代码。问题是如果连续没有图片，它将遇到错误，但是我在数据库中标记为允许空图像列。

```
private void button1_Click(object sender, EventArgs e)
{
    sql = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True");
    cmd = new SqlCommand();
    cmd.Connection = sql;
    cmd.CommandText = ("select Image from Entry where EntryID =@EntryID");
    cmd.Parameters.AddWithValue("@EntryID", Convert.ToInt32(textBox1.Text));
    var da = new SqlDataAdapter(cmd);
    var ds = new DataSet();
    da.Fill(ds, "Images");
    int count = ds.Tables["Images"].Rows.Count;

    if (count > 0)
    { 
    var data = (Byte[])(ds.Tables["Images"].Rows[count - 1]["Image"]);
    var stream = new MemoryStream(data);
    pictureBox1.Image= Image.FromStream(sream);
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:38:42.580

你应该检查一下`DbNull.Value`。

这应该可以解决问题：

```
if (count > 0)
{ 
       if (ds.Tables["Images"].Rows[count - 1]["Image"] != DbNull.Value){
          var data = (Byte[])(ds.Tables["Images"].Rows[count - 1]["Image"]);
          (MemoryStreamstream = new MemoryStream(data)
           pictureBox1.Image= Image.FromStream(sream);
       }
 } 
```

您将列 id DB 标记为接受空值，以便 DB 处理它，但您还需要在应用程序中处理空值（您不能转换 DbNull 值）。

**暗示**

在使用任何一种时，`Stream`您都应该使用`Using`语句在使用后处理 Stream。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:51:17.997

仅供参考，您需要学习使用`using`积木。这将确保对象被及时处理，即使抛出异常：

```
private void button1_Click(object sender, EventArgs e)
{
    var ds = new DataSet();
    using (
        var sql =
            new SqlConnection(
                @"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True")
        )
    {
        using (
            var cmd = new SqlCommand
                          {
                              Connection = sql,
                              CommandText =
                                  "select Image from Entry where EntryID = @EntryID"
                          })
        {
            cmd.Parameters.AddWithValue(
                "@EntryID",
                Convert.ToInt32(textBox1.Text));
            using (var da = new SqlDataAdapter(cmd))
            {
                da.Fill(ds, "Images");
            }
        }
    }

    var imagesTable = ds.Tables["Images"];
    var imagesRows = imagesTable.Rows;
    var count = imagesRows.Count;

    if (count <= 0)
        return;
    var imageColumnValue =
        imagesRows[count - 1]["Image"];
    if (imageColumnValue == DBNull.Value)
        return;

    var data = (Byte[]) imageColumnValue;
    using (var stream = new MemoryStream(data))
    {
        pictureBox1.Image = Image.FromStream(stream);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T19:41:48.830

只是检查

```
if(ds.Tables["Images"].Rows[count - 1]["Image"]!=DbNull.Value)
{
   //you code of execution
}
else
{
    //display default image 
} 
```

# objective-c - 字符串文件 Xcode - 删除第一个和最后一个 " + ;

> ID：10455091
> 
> 赞同：1
> 
> 时间：2012-05-04T19:36:57.180
> 
> 标签：objective-c, string, cocoa

我刚开始在我的项目中使用字符串文件。或者好吧，我正在努力。

我有几天的错误，最后发现你实际上必须在文件中用 "" 创建字符串并用 ; 结束行。- 想出来真是太可惜了；）

Anywhoo，现在我正在尝试将其整理并分成较小的字符串。它就像一个魅力，但我似乎无法摆脱 "" 和 ; 在字符串的每一行。

例如，我的字符串文件中有这个（我用逗号分隔）：“这是一个字符串，这是另一个字符串，最后一个”；

我试图把它变成 3 个不同的字符串，完成之后，它在我的 3 个字符串对象中看起来像这样：

"This is a string This is another string And a final one";

所以我需要删除字符串 1 中的 " 和 " + ; 在字符串 3 中。

我希望这是有道理的。我似乎真的无法弄清楚这一点，因为我并没有真正使用过太多的字符串排序，而是独自使用字符串文件。

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:45:10.760

如果所有字符串都有“和”，这应该可以解决问题；在总字符串的开头/结尾。

```
firstString = [firstString substringFromIndex:1];
lastString = [lastString substringToIndex:[lastString length] - 3]; 
```

如果要删除所有出现的 " 和 ; 在拆分之前使用：

```
totalString = [totalString stringByReplacingOccurrencesOfString:@"\"" withString:@""];
totalString = [totalString stringByReplacingOccurrencesOfString:@";" withString:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T04:14:46.993

通常，您使用工具从代码中生成 .strings 文件。您不必手动构建它。

在您的代码中，当您想要使用应该可本地化的字符串时，您通常使用其中一个`NSLocalizableString...`宏。像这样：

```
textField.stringValue = NSLocalizableString(@"Hello, World!", "Standard programming greeting"); 
```

要生成 Localizable.strings 文件，您可以使用该[`genstrings`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/genstrings.1.html)工具扫描您的代码以查找此类宏（以及其他一些东西）的使用情况。它以正确的格式生成 .strings 文件。

有关更多信息，请参阅以下 Apple 文档： [资源编程指南：字符串资源](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Strings/Strings.html) [国际化编程主题](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html#//apple_ref/doc/uid/10000171-SW1)

# java - Android API 2.2.1 是否过时而无法使用？

> ID：10455101
> 
> 赞同：1
> 
> 时间：2012-05-04T19:38:07.403
> 
> 标签：java, android, mobile

在开始开发新的 Java 应用程序时，您会选择哪个 Android API 版本？

最近我买了一部运行 Android 2.2.1 的二手智能手机。由于我从未尝试过移动开发，因此我决定以此为契机尝试为 Android 开发新的应用程序。

我在 Java 领域工作了一年，我感觉很舒服，所以既然我已经是一个独立的软件供应商，我会尝试在 Android 市场上销售这个应用程序，如果我能做得很好的话。

我不想开始使用过时版本的 API 进行开发，所以我想知道使用 Android 级别 API 的第 8 级开始我的开发和学习工作是更好的选择，还是更好使用更新版本的 API。

我阅读[了为什么 Android API 级别 9 已过时？](https://stackoverflow.com/questions/8353503/why-is-android-api-level-9-obsolete)以及[使用哪个 Android API？](https://stackoverflow.com/questions/7708847/which-android-api-to-use)关于相同的论点，但是这两个问题现在都已经过时了，我认为他们留下了一些问题。

特别是，Jan Dragsbaek 在他的回答中说：

> 您应该始终使用尽可能低的 API。仅仅因为您的 API 级别越低，您可以接触到的用户越多。
> 
> 所以看看[目前的统计数据](http://developer.android.com/resources/dashboard/platform-versions.html)，如果你把自己“愚弄”到 API 7 级，你就能达到 97.9%。
> 
> 但是为什么 API 级别 9 已经过时了？无法确定，但很可能是因为它有一些重大缺陷。

阅读[实际统计数据](http://developer.android.com/resources/dashboard/platform-versions.html)，情况如下：

```
Platform        Codename            API-Lvl Distribution
Android 1.5     Cupcake             3       30,00%
Android 1.6     Donut               4       70,00%
Android 2.1     Eclair              7       550,00%
Android 2.2     Froyo               8       20,90%
Android 2.3     Gingerbread         9       0,50%
Android 2.3.2   -   
Android 2.3.3   -                   10      63,90%
Android 2.3.7   -       
Android 3.0     Honeycomb           11      0,10%
Android 3.1     -                   12      1%
Android 3.2     -                   13      2,20%
Android 4.0 -   Ice Cream Sandwich  14      0,50%
Android 4.0.2   -       
Android 4.0.3   -                   15      4,40%
Android 4.0.4           
Total for Android 2.2                       93,50% 
```

现在的问题是：如果我在功能方面使用 8 级 API 进行开发，我会失去什么？在稳定性或工具支持方面我能获得什么？

**编辑：**

我最终选择使用 API 的第 7 级，它为我提供了开始在我的新手机上进行实验所需的功能。最终，当我认为应用程序需要某些当前级别不可用的功能时，我会将应用程序移植到 API 的下一个级别。

现在，我将尝试[在 Android 中构建自定义花式列表视图](http://androidresearch.wordpress.com/2012/01/07/building-a-custom-fancy-listview-in-android/)，看看我是否从一开始就遗漏了一些真正有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:50:19.893

9 级已过时，因为 10 级完全取代了它。另一种说法是，Android 2.3.3 取代了 Android 2.3，所以现在如果您的目标是 2.3 设备，则使用 2.3.3 API。8 级并没有过时，因为没有类似的 API 级别可以替代它（所有 2.2 更新仍然是 8 级）。

至于丢失的功能，您可以查看[API 9 中所有新功能的列表](http://developer.android.com/sdk/android-2.3.html)（API 10 确实没有任何主要的新功能，但您也可以在同一站点上查看）。如果您不需要任何这些功能，则无需瞄准 2.3.3。在 2.2 和 2.1 之间再次发生同样的事情；正如您所说，选择具有您想要的功能的最低级别。从经验来看，2.1 提供了您日常使用所需的一切 - 互联网、存储、图形（尽管高级图形会随着您的使用而变得更好）、UI 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:52:04.143

我认为你也应该看看你的要求。制定对您的应用绝对必要的 API，并将范围缩小到您可以使用的最低 Android API 级别。因为如果您使用较低的 API 级别，您的外展范围会更大，这是正确的。

话虽如此，如果您仍然对较低的 API 级别感到不舒服并且发现自己受到限制，那么您实际上可以使用 Android [Support Libraries](http://developer.android.com/sdk/compatibility-library.html)。引用支持库的描述：

> 支持包包含静态“支持库”，您可以将其添加到 Android 应用程序中，以便使用旧平台版本不可用的 API，或者提供不属于框架 API 的“实用程序”API。目标是通过提供更多可以与应用程序捆绑的 API 来简化您的开发，从而减少对平台版本的担忧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:52:56.297

你既不会得到也不会失去太多。

与第 10 级相比，第 9 级已过时。第 9 级是 GINGERBREAD，第 10 级是 Gingerbread 维护版本 1，即错误修复。

8 级是 2.2 7 级是 2.1 他们不是过时的，只是旧的。

# c# - 从 C# 中的另一个类调用 ConnectionString

> ID：10455111
> 
> 赞同：1
> 
> 时间：2012-05-04T19:39:09.070
> 
> 标签：c#, sql-server, class

我在 web.config 中添加了一个连接字符串。我做了一个字符串调用它的类-

```
namespace WebApplication1.Classes
{
    public class Connections
    {
        public string DBConn = 
            ConfigurationManager.ConnectionStrings["HomeDB"].ConnectionString;
    }
} 
```

现在，从我的 default.aspx.cs 页面中，我想调用这个 DBConn，以便可以在该页面中使用它。

```
 namespace WebApplication1
 {
     public partial class _Default : System.Web.UI.Page
     {
         protected void Page_Load(object sender, EventArgs e)
         {
             Console.WriteLine(Classes.Connections.DBConn);
         }
     }
 } 
```

`Classes.Connections.DBConn`不工作。这是我得到的错误。

> 非静态字段、方法或属性“WebApplication1.Classes.Connections.DBConn”需要对象引用

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:41:43.180

你的领域不是`static`。为了这样称呼它：

```
Classes.Connections.DBConn // Using the class Connections, 
                           // not an instance of the class Connections 
```

您必须像这样声明该字段：

```
public static string DBConn = "etc"; 
```

对于这样的类，您可能应该将整个类声明为`static`事实上。有关更多信息，请查看这篇[文章](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:44:51.463

为了使用没有实例的变量，它必须声明为静态的。[在此处](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)阅读有关 static 关键字的更多信息。

如果你的类也没有理由被实例化，你应该将类和变量都标记为静态：

```
namespace WebApplication1.Classes 
{ 
 public static class Connections 
 { 
   public static string DBConn = ConfigurationManager.ConnectionStrings["HomeDB"].ConnectionString; 
 } 
} 
```

DBConn 变量上的静态变量允许从类本身访问它（即，没有实例）。Connections 类上的 static 会阻止该类被实例化，因为没有理由这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T19:46:05.867

你可以做两件事：

1）实例你的类

```
Connections c = new Connections(); 
```

然后使用`c.DbConn`

2）使方法静态

```
 namespace WebApplication1.Classes
  {
    public class Connections
    {
      public static string DBConn = 
          ConfigurationManager.ConnectionStrings["HomeDB"].ConnectionString;
    }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T19:41:10.090

要修复，几乎只需按照错误消息将其设为静态即可：

```
public static string DBConn = ConfigurationManager.ConnectionStrings["HomeDB"].ConnectionString; 
```

由于此表达式`Classes.Connections.DBConn`是静态引用（您没有 的实例`Connectinos`），因此如果您想以这种方式访问​​它，则需要将其设为静态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T19:41:41.277

尝试

```
public static string DBConn = ConfigurationManager.ConnectionStrings["HomeDB"].ConnectionString;  } 
```

它不可见的原因是因为你必须做到`static`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T19:43:06.983

要在当前编写类时访问连接字符串，请执行以下操作：

```
using WebApplication1.Classes;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Console.WriteLine(new Connections().DBConn);
        }
    }
} 
```

为应用程序范围的设置创建一个`static`类是一种被广泛接受的做法 - 类似于所示的其他示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-04T19:42:19.957

您需要使用[静态](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.100%29.aspx)关键字。

```
namespace WebApplication1.Classes
{
 public static class Connections
 {
   public static string DBConn = ConfigurationManager.ConnectionStrings["HomeDB"].ConnectionString;
 }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-04T19:42:37.183

由于您的变量不是静态的，因此您需要像这样实例化类 Connections：

```
Connections x = new Connections(); 
```

然后你就可以通过

```
x.DBConn 
```

其他解决方案是使您的变量静态

```
public static string DBConn=... 
```

# android - MonoDroid：获取类似“TestFlightApp”的部署

> ID：10455115
> 
> 赞同：0
> 
> 时间：2012-05-04T19:39:54.863
> 
> 标签：android, mono, monodevelop, xamarin.android, testflight

我们冒险购买了 Xamarin 的 Mono for Android。效果惊人！

我们需要让我们的 Android 测试人员测试我们制作的应用程序。对于我们的 iOS 应用程序，我们使用集成到 MonoDevelop 中的 TestFlightApp.com 的移动设备管理进行测试。

我们必须有哪些服务或选项才能将我们的应用程序类似地部署到世界各地的 Android 测试人员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T16:28:19.767

我发现这个工作：[https ://www.zubhium.com/](https://www.zubhium.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T13:24:21.383

TestFlight 现在也发布 Android 版本！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:46:26.057

www.push-link.com 是一个很棒的工具，而且它是免费的。

编辑您现在可以在 Google Play 控制台中使用内置的 Beta 和 Alpha 轨道。

# c# - 将c#代码转成c++（微软c++）版本

> ID：10455127
> 
> 赞同：-3
> 
> 时间：2012-05-04T19:41:16.437
> 
> 标签：c#, c++, mfc, atl

我需要将此代码翻译成 c++ (microsoft c++ ATL/MFC) 项目。

```
 var ticks = System.DateTime.Now.Ticks;
            byte[] c = BitConverter.GetBytes(ticks);
            byte[] buffer = new byte[c.Length];
            for (int i = 0; i < buffer.Length; i++)
            buffer[i] = (byte)c[i]; 
```

1.  System.dateTime.Now.Ticks 在 c++ 中的相应调用是什么？

2.  c++中对应的Bitconverter是什么。

**注意：** Boost 在此项目中不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:53:21.257

GetTickCount() 可以作为等效项工作：

[http://msdn.microsoft.com/en-us/library/ms724408%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms724408%28VS.85%29.aspx)

它返回一个 32 位 (DWORD) 的值，因此缓冲区的大小为 4 字节。关于 bitconverter，你不需要它，因为 C++ 可以直接转换指针：

```
DWORD ticks = GetTickCount();
BYTE* buffer = (BYTE*)&ticks; 
```

# javascript - Selenium Web 驱动程序可以访问 javascript 全局变量吗？

> ID：10455130
> 
> 赞同：13
> 
> 时间：2012-05-04T19:41:26.610
> 
> 标签：javascript, python, django, selenium

嗨：我正在用 javascript 为 django 编写测试，我想知道 Selenium webdriver 是否可以访问 javascript 全局变量。`mypage`有一个脚本，它有一个我想访问的全局变量。是否可以？谢谢！

```
from django.test import LiveServerTestCase
from selenium.webdriver.firefox.webdriver import WebDriver

class TestEditorSelenium(LiveServerTestCase):
    def setUp(self):
        self.driver = WebDriver()

    def test_mytest(self):
        self.driver.get('%s%s' % (self.live_server_url, '/mypage/')) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-04T19:56:23.110

是的，您应该能够使用类似于以下的代码：

```
browser.execute_script("return globalVar;") 
```

# c++ - 为什么链接器在虚拟情况下给我一个错误，但在非虚拟情况下却没有？

> ID：10455131
> 
> 赞同：3
> 
> 时间：2012-05-04T19:41:32.040
> 
> 标签：c++, inheritance, virtual

当我有这样的事情时：

```
class A
{
  virtual void rat();
};

class B : public A
{
  virtual void rat() { ; } //implemented!
};

int main(int argc, char **argv)
{
  A *a = new B;
  delete a;
} 
```

我收到链接器错误：

除非我把基础老鼠变成纯虚拟的。

但是，当我有这个时：

```
class A
{
  public:
  void rat();
};

int main(int argc, char **argv)
{
  A a;
} 
```

这编译得很好并且不会给我一个未定义的参考链接错误，除非我明确地尝试在我的 main ( `a.rat();`) 中调用 rat 函数。然而，在派生类中实现的未实现的基类虚函数的规则是什么，就像在第一个失败的代码片段中一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T19:48:22.853

当两个类都定义了虚函数时，C++ 编译器需要[为](http://en.wikipedia.org/wiki/Virtual_method_table)这两个类`A`和`B`. 要构建`A`的 vtable，编译器需要`A::rat()`- 这就是引用的来源。

当`A`没有虚函数时，`A::rat`任何地方都没有引用，因此不会出现编译错误。

我相信您知道，您可以通过创建`A::rat`一个纯虚拟来修复此错误，从而为 vtable 提供所需的值（在这种情况下，该值为零）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T19:46:25.343

每个非纯虚函数都需要实现。

```
class A 
{ 
   public: void rat(); 
};

int main(int argc, char **argv) 
{ 
  A a; 
} 
```

上面的代码完全是一个不同的场景。在您不调用非纯虚函数的情况下，您不会收到编译器/链接器错误，因为尽管它在类定义中声明，但您根本没有调用它。

`rat()`现在在下面的代码中，编译器只是检查是否有一个名为的成员函数`A`。

```
A a;
a.rat();   // Compiler passes. But linker bombs. 
```

现在你应该得到一个链接器错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T19:47:37.060

因为`A::rat()`不是纯虚的，所以*必须**有*实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T19:50:26.130

标准法律术语是*ODR 使用*的：必须定义 ODR 使用的函数，否则会出错。

将函数标记为 ODR-used 的规则相当复杂，基本上意味着该函数以某种方式使用。在您的第二个示例中，未使用该功能，因此没有必要。

有一个*特别的警告*：一个`virtual`函数（除非它是纯的）**总是**被认为是 ODR 使用的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-04T20:02:26.653

因为 C++ 标准要求它被实现。从 C++03 §10.3/8 开始：

> 在类中声明的虚函数应在该类中定义或声明为纯（10.4），或两者兼而有之；但不需要诊断（3.2）。

因此，您需要声明它是纯的（`= 0`在右括号后加上后缀）或定义它的实现。

至于为什么在非虚情况下不调用函数时不会报错，参考C++03 §3.2/2-3（强调我的）

> 2) 一个表达式*可能被求值*，除非它出现在需要整数常量表达式的地方（见 5.19），是运算符的操作数`sizeof`（5.3.3），或者是运算符的操作数`typeid`并且表达式没有指定左值多态类类型（5.2.8）。如果对象或非重载函数的名称出现在可能求值的表达式中，则*使用该对象或非重载函数。***如果它不是纯的，则使用虚拟成员函数。**[...]
> 
> 3) 每个程序都应包含该程序**中使用的每个非内联函数或对象的一个​​定义**；无需诊断。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。内联函数应在使用它的每个翻译单元中定义。

因此，在非虚拟情况下，如果不使用它，则不需要定义。但是在非纯虚的情况下，即使没有在代码中显式引用，仍然被认为是被标准使用的，所以需要对其进行定义。

另见[如果它不是纯的，则使用虚拟成员函数？](https://stackoverflow.com/questions/4145915/a-virtual-member-function-is-used-if-it-is-not-pure).

# c# - 更改父窗体中任何控件的属性

> ID：10455136
> 
> 赞同：0
> 
> 时间：2012-05-04T19:41:44.537
> 
> 标签：c#, winforms, controls

有谁知道如何从父表单调用任何对象（标签、文本框、面板）。例如，我有一个表单 A，这个表单有一个标签 L、文本框 T 和按钮 B。我是否可以通过函数（public DoSomething(Form f)）传递整个表单，然后更改标签 L 的属性，函数DoSomething中的文本框T和按钮B？

```
class DoSomething{
 private Form parentForm;
 public DoSomething(Form f) {
   parentForm = f;
   // HERE I WOULD LIKE TO CHANGE PROPERTIES OF LABEL L, BUTTON B
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:45:50.417

您可以遍历所有表单控件并更改每个控件的属性：

```
foreach (Control c in parentForm.Controls)
{
   if (c is Label && c.Name == "L")
   {
       // Do label stuff here
   }
   else if (c is TextBox && c.Name == "T")
   {
       // Do text box stuff here
   }
   if (c is Button && c.Name == "B")
   {
       // Do button stuff here
   }
} 
```

如果您想按名称查找控件，可以尝试以下操作：

```
Label L = (Label)parentForm.Controls.Find("L");
TextBox T = (TextBox)parentForm.Controls.Find("T");
Button B = (Button)parentForm.Controls.Find("B");

// Do stuff with L, T and B here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:56:47.047

您面临的问题是 Form 类没有包含您感兴趣的属性。

Indise DoSomething 您必须将表单转换为原始类型才能访问其控件：

```
 if (f is Form1)
 {
    Form1 f1 = f as Form1;
    f1.C... // here all the properties of the class form1 Are available.
 } 
```

如果所有表单都有共同的属性，您可以创建一个接口，并在所有表单中实现它。并将你的参数类型设置为`DoSomething`接口的类型：

```
void DoSomething(IFomrInterface fi)
{
  fi.C... // this will have all the propertie savailabel in the interface
} 
```

第二种解决方案更通用。所有表单都应该实现接口：

```
class Form1: Form, IFormInterface 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T04:14:39.287

尝试将父表单属性的控件设置为`Modifier to Public`.

在儿童形式中，用作

```
parentForm.btnA.Name="ButtonB"; 
```

希望它有效！

# facebook - 未显示经过身份验证的推荐

> ID：10455142
> 
> 赞同：0
> 
> 时间：2012-05-04T19:42:06.613
> 
> 标签：facebook, authentication, facebook-authentication

我被困在尝试使用应用程序开发人员的 Auth Dialog 部分中的经过身份验证的引用部分。我已经设置了我的应用程序，我有一些代码可以登录，并执行一些检查，但是每当出现授权应用程序屏幕时，我输入到 Authenticated Referrals 部分的数据永远不会显示，我只看到“应用程序将收到: 你的基本资料。”

我已经尝试在应用程序的“高级”部分下禁用和重新启用增强型身份验证对话框，尝试清除我的缓存，甚至重置我的密钥。我浏览了很多网站/论坛，但没有找到任何解决方案。我错过了什么？

任何建议都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:25:15.827

您确定您看到的身份验证对话框实际上是经过身份验证的推荐对话框吗？

如果您手动导航到您的应用，这不是经过身份验证的推荐，并且您的代码需要手动调用身份验证对话框 - 当用户从请求、新闻提要故事等中单击指向您的应用的链接时，会出现经过验证的推荐 - 更多信息[在文档中](https://developers.facebook.com/docs/opengraph/authentication/#referrals)

如果用户登陆您的应用程序并且您没有将他们引导到身份验证对话框中的正确权限集 - 请参阅[身份验证文档](https://developers.facebook.com/docs/authentication/)以了解如何继续 - 基本上您将他们重定向到身份验证对话框，`scope`参数包含权限您需要，然后在他们返回您的应用程序时完成身份验证流程（您如何执行此操作取决于您使用的 SDK）

# ruby - 如何解释音频编码的二进制数据？

> ID：10455143
> 
> 赞同：4
> 
> 时间：2012-05-04T19:42:08.780
> 
> 标签：ruby, audio, signal-processing, frequency-analysis, frequency-domain

我已经构建了一个将二进制数据编码为声音的小程序。例如以下二进制输入：

```
00101101 
```

会产生这样的“声音”：

```
################..S.SS.S################ 
```

其中每个字符代表一个恒定的时间单位。`#`代表 880 赫兹正弦波，用于确定传输的开始和结束，`.`代表静音，代表零，`S`代表 440 赫兹正弦波，代表 1。显然，中间的部分在实践中要长得多。

我的问题的本质是：我怎样才能反转这个操作？

*声音文件通过简单的声音回放和录音传输给接收者。这意味着我不会尝试解码很容易的原始声音文件。*

显然，我必须根据频率分析记录的数据。但是怎么做？我读过一些关于傅立叶变换的文章，但我在这里很迷茫。

我不知道从哪里开始，但我知道这不是微不足道的，可能需要相当多的信号处理知识。有人可以指出我正确的方向吗？

顺便说一句：我在 Ruby 中执行此操作（我知道，它很慢 - 这只是一个概念证明）但问题本身不是特定于编程语言的，因此非常欢迎任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-18T12:43:13.150

您的问题显然是试图解调 FSK 调制信号。我建议实施一个针对每个频率调整的相关库，如果速度是您关心的问题之一，它比 fft 快得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T01:59:25.260

如果您知道频率和调制率，您可以尝试使用 2 个滑动 Goertzel 滤波器进行 FSK 解调。

# asp.net - 在会话中存储日期时间

> ID：10455146
> 
> 赞同：0
> 
> 时间：2012-05-04T19:42:15.157
> 
> 标签：asp.net, session, azure

我需要在会话状态中存储一个日期。

在我的开发版本中，我使用的是 InProc 会话，所以当然，我只是将会话中的值存储为日期时间类型并且它可以工作。当我计划发布应用程序时，我将首先升级到 SQL 服务器会话，然后最终在 azure 中部署应用程序并使用 AppFabric 存储会话状态。

我的问题是：我可以保持会话原样，还是需要将日期存储为字符串，并使用 ToString() 设置并解析以获取值？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T19:45:48.907

如果您使用外部数据存储和 InProc 会话状态模式的任何对象，则可以在会话中存储所有原始 .NET 类型或可序列化类型。因此，在您的情况下，您不必转换为字符串，只需将其存储为 DateTime 对象即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:53:25.007

在 SqlServer 模式的情况下，对象需要被序列化。当然你可以使用 DateTime 对象，但是复杂的类型需要[可序列化](http://msdn.microsoft.com/en-us/library/system.serializableattribute%28v=vs.100%29.aspx)的属性：

```
[Serializable]
public class ComplexClass
{
    public DateTime MyDate { get; set; }
    ...
} 
```

# c# - C# 通用事件

> ID：10455147
> 
> 赞同：8
> 
> 时间：2012-05-04T19:42:16.970
> 
> 标签：c#, events, generics

我有一个具有泛型类型的委托作为参数之一：

```
public delegate void UpdatedPropertyDelegate<T>(
    RemoteClient callingClient, 
    ReplicableProperty<T> updatedProp, 
    ReplicableObject relevantObject
); 
```

现在，我想要一个可以订阅以供其他类使用的公共事件。因此，我做了：

```
public event UpdatedPropertyDelegate<T> UpdatedProperty; 
```

但是，编译器不喜欢这样。我不明白为什么必须在此处指定 T 。当我触发事件时肯定会指定它，即：

```
if (UpdatedProperty != null) 
{
    UpdatedProperty(this, readProperty, 
        ReplicableObjectBin.GetObjectByID(readProperty.OwnerID));
} 
```

那么，我做错了什么简单的事情吗？或者这是一个巨大的理解失败？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T19:56:03.237

听起来您需要的是接口类型，而不是委托。接口方法可以接受开放的泛型类型（这是您所追求的），即使委托不能。例如，可以定义如下内容：

```
interface ActOnConstrainedThing<CT1,CT2>
{
  void Act<MainType>(MainType param) where MainType: CT1,CT2;
} 
```

即使`CT1`and`CT2`的实现者不共享同样实现`CT1`and的公共基类型`CT2`，其实现`Act`也可以将其传入的参数用作`CT1`或`CT2`不使用类型转换，甚至可以将其传递给期望带有`CT1`和`CT2`约束的泛型参数的例程。对于代表来说，这样的事情是不可能的。

请注意，使用接口而不是委托意味着不能使用正常的“事件”机制和语法。相反，作为事件发布者的对象必须维护实现所需接口的对象实例列表（例如 a `List<ActOnConstrainedThing<IThis,IThat>>`），并枚举该列表中的实例（可能使用`foreeach`）。例如：

```
List<IActOnConstrainedThing<IThis,IThat>> _ActOnThingSubscribers;

void ActOnThings<T>(T param) where T:IThis,IThat
{
  foreach（_ActOnThingSubscribers 中的变量）
  {
    thing.Act<T>(参数);
  }
}

```

**编辑/附录**

我使用这种模式的地方也有一些其他的东西似乎与问题不太相关，根据我的解释，这是询问如何拥有一个带有开放类型参数的委托（或等价物），以便对象调用委托等效项可以提供类型参数，而*提供委托*的对象不必事先知道它。大多数有用的情况都涉及通用约束，但由于这显然会引入混淆，所以这里有一个例子：

```
接口IShuffleFiveThings
{
  void Shuffle<T>(ref T p1, ref T p2, ref T p3, ref T p4, ref T p5);
}
List<IShuffleFiveThings _ShuffleSubscribers;

void ApplyShuffles<T>(ref T p1, ref T p2, ref T p3, ref T p4, ref T p5)
{
  foreach（_ShuffleSubscribers 中的 var shuffler）
  {
    thing.Shuffle（参考 p1，参考 p2，参考 p3，参考 p4，参考 p5）；
  }
}

```

该`IShuffleFiveThings.Shuffle<T>`方法接受五个参数`ref`并对其进行处理（很可能以某种方式排列它们；也许随机排列它们，或者可能随机排列一些而将其他的留在原处。如果有一个列表`IShuffleFiveThings`，则该列表中的事物可以是有效地使用，无需装箱或反射，来操作任何类型的东西（包括类类型和值类型）。相比之下，如果要使用委托：

```
委托无效ActOn5RefParameters（参考p1，参考p2，参考p3，参考p4，参考p5）；

```

那么因为任何特定的委托实例只能作用于其创建时提供的单个参数类型（除非它是一个仅通过反射调用的开放委托），因此需要为希望的每种类型的对象创建一个*单独的委托列表*shuffle（是的，我知道通常会使用整数索引数组来处理排列；我选择排列作为操作是因为它适用于所有对象类型，而不是因为这种特殊的排列方法很有用）。

请注意，由于类型`T`in`IShuffleFiveThings`没有任何约束，因此除了类型转换（可能会引入装箱）外，实现将无法对它做很多事情。向这些参数添加约束使它们更加有用。虽然可以在接口内硬编码此类约束，但这会限制接口对需要这些特定约束的应用程序的有用性。使约束本身具有通用性可以避免该限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T19:46:14.460

您实质上是在创建该委托的一个实例。实例需要定义其泛型类型。

您的委托的定义可以包含 T，但您的实例需要定义哪个 T。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T20:19:23.670

给定这个例子：

```
public delegate void FooDelegate<T>(T value);

public class FooContainer
{
    public event FooDelegate<T> FooEvent;
} 
```

您的示例中的编译器不喜欢该`FooEvent`声明，因为`T`未定义。但是，更改`FooContainer`为

```
public delegate void FooDelegate<T>(T value);

public class FooContainer<T>
{
    public event FooDelegate<T> FooEvent;
} 
```

现在编译器对此没问题，因为创建 FooContainer 实例的人现在必须像这样指定类型 T

```
FooContainer<string> fooContainer = new FooFooContainer<string>(); 
```

但是，您也可以限制`T`为这样的界面。

```
public delegate void FooDelegate<T>(T value) where T : IFooValue;

public class FooContainer
{
    public event FooDelegate<IFooValue> FooEvent;

    protected void OnFooEvent(IFooValue value)
    {
        if (this.FooEvent != null)
            this.FooEvent(value);
    }
}

public interface IFooValue
{
    string Name { get; set; }// just an example member
} 
```

在这种情况下，您可以使用类型引发事件，只要它们实现了接口`IFooValue`。

# php - 如何使用抓取的 URL n TITLE 通过 foreach 制作锚 url

> ID：10455150
> 
> 赞同：0
> 
> 时间：2012-05-04T19:42:31.070
> 
> 标签：php

我使用 preg_match_all 从另一个页面抓取 url 和标题，抓取没问题，但我无法使用 foreach 将它们放入其中！还是有另一种方法代替foreach？

```
//gets URLs of href='xxxx'   
 preg_match_all('/a href="([^"]+)" class=l.+?>.+?<\/a>/',$sear,$results);

//gets titles of >xxxx</a>   
    preg_match_all('/a href=".+?" class=l.+?>([^"]+)<\/a>/',$sear,$t); 
```

下面的代码显示抓取的 URL

```
foreach ($results[1] as $url)
{
echo "<a href='$url'>$u</a> <br>";

$i++;
} 
```

下面的代码显示抓取的标题

```
 foreach ($t[1] as $title)
   { 
   echo $title; 
   $i++;
   } 
```

但我不知道如何在一个 foreach 中显示它们（网址和标题），所以我可以让它像

```
<a href='URL'>Title</a> 
```

我是php新手，请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:48:22.540

使用 PREG_SET_ORDER 标志在一个表达式中匹配它们：

```
preg_match_all('/a href="([^"]+)" class=l.+?>(.+?)<\/a>/',$sear,$results, PREG_SET_ORDER); 
```

然后，您的结果数组中将有两个匹配的组。每个元素将包含每个匹配集的数组（手册对此标志进行了很好的解释），您可以循环遍历`$results`数组，然后从内部获取每个组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:48:25.347

您可以使用正常`for`周期：

```
if ( count($result[1]) == count($t[1]) ){
    for ( $i = 0; $i < count($result[1]); $i++ ){
        echo "<a href='" . $result[1][$i] . "'>" . $t[1][$i] . "</a> <br>";
    }
} 
```

现在，只有在 URL 和标题的数量都匹配时才应该使用它。您还应该考虑以相同的方式匹配 URL 和标题`preg_match_all`，这样您就不需要访问两个数组而是单个数组...（正如 Brian Warshaw 建议的那样）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T19:48:54.740

如何同时匹配 URL 和链接显示文本：

```
preg_match_all('/a href="([^"]+)" class=l.+?>([^"]+)<\/a>/',$sear,$results); 
```

您的`$results`数组现在应该在`[1]`和`[2]`索引中包含两个匹配的值：

```
foreach ($results as $link) {
  $url = $link[1];
  $text = $link[2];

  echo "Link '$text' to $url";
} 
```

# python - Python BeautifulSoup - 可能从页面中获取 X 个链接？

> ID：10455153
> 
> 赞同：1
> 
> 时间：2012-05-04T19:42:40.893
> 
> 标签：python, beautifulsoup

是否有可能只从带有 BeautifulSoup 的页面中获取前 10 个链接？

就像是;

```
for tag in soupan.findAll('a') in range(10): 
```

已经尝试谷歌它，似乎无法找到如何实现这一目标。有任何想法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:44:31.073

像这样的工作：

```
for tag in soupan.findAll('a')[:10]: 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:01:38.777

Beautiful Soup 的`find`方法采用[SQL 风格的“限制”参数](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#the-limit-argument)：

```
for tag in soupan.find_all('a', limit=10): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:45:27.360

`for tag in soupan.findAll('a')[:10]:`行得通吗？

另一种选择是：

```
for i, tag in enumerate(soupan.findAll('a')):
    if i >= 10:
        break 
```

# android - 上面有 30px 条的 Listview 更改？

> ID：10455156
> 
> 赞同：0
> 
> 时间：2012-05-04T19:43:02.057
> 
> 标签：android, android-layout, android-listview

我试图找出您是否可以在`ListView`. 可能有 20-50 像素的高度和几个按钮（这些按钮也必须是可点击的）。代表我的想法的图像：

![在此处输入图像描述](../Images/d51e21120791d1906960fefe5553859d.png)

最左边的镜头在 上方有一个栏，`ListView`无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:19:40.020

我不知道您当前的布局，所以我假设您`ListView`在 a 中只有一个元素`LinearLayout`。这是列表顶部的`LinearLayout`3 ：`Buttons`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button2" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button3" />
    </LinearLayout>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T19:55:31.307

用这个：

```
listView.setDivider(getResources().getDrawable(R.drawable.list_view_divider)); 
```

list_view_divider 应该是具有您想要的高度的透明 png 图像。

# django - Django MPTT - 如何根据 URL 段进行查询

> ID：10455161
> 
> 赞同：1
> 
> 时间：2012-05-04T19:43:26.457
> 
> 标签：django, django-mptt, mptt

我有：

```
Home
    Things with Fur
        Dog
        Horse
    Basket Ball Games
        Twenty One
        Horse 
```

假设`slug`for each 是`title.lower().replace(' ', '-')`，我的 URL 将是：

```
/home/
    /home/things-with-fur/
        /home/things-with-fur/dog/
        /home/things-with-fur/horse/
    /home/basket-ball-games/
        /home/basket-ball-games/twenty-one/
        /home/basket-ball-games/horse/ 
```

该`slug`字段`unique_together`与`parent`.

我需要根据 URL 段查询正确的类别。我不能简单地用 查询篮球比赛`horse`，`Category.objects.get(mptt_level=2, slug=u'horse')`因为恰好有一个类别与 slug`horse`在不同的类别下，但在同一级别。那么，我应该如何`horse`正确查询我的类别而无需爬上链条并检查每个级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:15:31.707

存储数据库中每个项目的完整路径。

# java - Maven 部署在 jre1.7 上失败

> ID：10455163
> 
> 赞同：1
> 
> 时间：2012-05-04T19:43:28.620
> 
> 标签：java, maven, deployment, ftp

这比任何东西都更具参考价值，但在过去的几个晚上，我一直把头撞在墙上。

尝试使用 FTP 将文件部署到外部存储库时，我不断从 maven 收到 CONNECTION RESET 错误。

所有 Maven 设置均已正确设置。

我最终决定在我的另一台开发计算机上尝试 POM 文件并且它有效。然后这让我查看了系统的设置，我意识到我的笔记本电脑使用的是 JDK1.7，而我的主计算机使用的是 JDK1.6.0r31

如果您在尝试通过 FTP 部署文件时遇到同样的问题（可能真的发生在任何事情上），那么请确保您尝试使用 JDK1.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:26:12.703

如果您运行的是 Windows 7，[这个错误](https://stackoverflow.com/questions/6990663/java-7-prevents-ftp-transfers-on-windows-vista-and-7-if-firewall-is-on-any-idea)可能与它有关吗？

在 Windows 7 上运行 Java 时尝试使用该`-Djava.net.preferIPv4Stack=true`选项，看看是否能解决问题。

# jquery - JQuery droppable不会放在div中

> ID：10455168
> 
> 赞同：0
> 
> 时间：2012-05-04T19:44:26.097
> 
> 标签：jquery, droppable

我有一个简单的[jsfiddle](http://jsfiddle.net/FNe6t/)，它不会放在可放置的 DIV 上，但会放在未设置为可放置的文本框上。

谁能说出为什么可拖动不会放在 DIV 中以及为什么会放在文本框中？

尝试过使用不同的选择器，检查 .data('droppable') 在 DIV 上是否为真（它是），并尝试了所有我能找到的有关可放置 DIV 的问题......唉，无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:50:37.847

不建议直接在输入上使用`.draggable()`，因为它会导致字段变得不可编辑。我建议将您的输入包装在一个`<span>`或中`<div>`并添加`.draggable()`到那些 instad。

这是您的代码作为示例更新 - [http://jsfiddle.net/jaredhoyt/FNe6t/1/](http://jsfiddle.net/jaredhoyt/FNe6t/1/)

# java - Spring HibernateTemplate Saveor UpdateAll() 替换

> ID：10455172
> 
> 赞同：2
> 
> 时间：2012-05-04T19:44:40.680
> 
> 标签：java, spring, hibernate

我正在使用 Spring HibernateTemplate 方法 SaveororUpdateAll(Collection cl) 在每次迭代中插入 1000 条记录。

As Method 将其作为集合并在内部迭代每条记录并分别保存每条记录。

我可以执行需要更改代码且对复杂业务规则无效的任何其他技术批量插入或更新。

约束：我不想进行批量插入或批量更新，因为它需要在多个地方更改代码。我们应用了多个业务规则，它会多次修改 CBO 对象并将所有对象存储在集合中，同时保存或插入我想替换 H​​ibernateTemplate SaveorUpdateAll （收藏）提高性能。

尝试使用 BATCH_SIZE 插入更新没有改进。

谢谢你的帮助。

# rest - Grais Rest：从“lastName”而不是“id”获取 Json 对象

> ID：10455180
> 
> 赞同：-1
> 
> 时间：2012-05-04T19:45:22.663
> 
> 标签：rest, grails

如何从姓氏而不是 id 获取此类的用户。
在我的示例中，我使用 REST Web 服务。

我在 Grails 中的 USER.groovy 类：

```
class User {
     String firstName
     String lastName
     String zipcode } 
```

类 UrlMappings.groovy

```
class UrlMappings {
       static mappings = {

               /user/$id" (controller: "user") {
                            action = [GET: "show"]
               }
       }
} 
```

**在 UserController.groovy 中的**def 显示****

 **```
def show = {
   User user = User.get(params.id)
   if (user) {
      render user as JSON
   } else {
      SendNotFoundResponse()
   }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:18:35.573

据我了解，您的问题是您不知道如何通过 id 的其他字段查询域。对于当前示例，您可以使用：

```
User.findByFirstName(params.id) 
```

并且，请阅读有关 GORM 查询的信息 - [http://grails.org/doc/latest/guide/GORM.html#querying](http://grails.org/doc/latest/guide/GORM.html#querying)**

# ssis - SSIS 和 ETL 速度

> ID：10455181
> 
> 赞同：-2
> 
> 时间：2012-05-04T19:45:23.083
> 
> 标签：ssis, etl

我读了很多文章，说 SSIS 和 ETL 比使用 VB6 记录集和 VB.NET DataReaders 更快、更高效，但是我不完全理解为什么会这样。

我创建了一个 SSIS 包，它循环了一百万条记录并创建了一个新表，并在 VB 中做了同样的事情，这证实了 SSIS 非常快。

我知道所有的处理都是在数据层完成的，所以从应用程序服务器到数据库服务器没有昂贵的旅行，但是是否有一篇 MSDN 文章解释了使 SSIS 更快的算法？

我有一个非常慢的 VB6 应用程序，我认为 SSIS 是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:52:10.267

SSIS 数据流任务的管道架构更快，主要是由于缓冲。通过选择“块”中的数据，管道可以在 RAM 中执行许多操作，然后将数据缓冲区传递到下游进行进一步处理。根据数据的大小和形状，以及源和目标的位置和类型，您有时可以在 SSIS 之外获得更好的结果。

# database-design - 实体关系图

> ID：10455182
> 
> 赞同：0
> 
> 时间：2012-05-04T19:45:24.003
> 
> 标签：database-design, entity-attribute-value, erd, data-modeling

我被要求为应用程序提出逻辑数据模型。我已经确定了所有实体，并使用 ERD 记录了它们。现在，一位同事提出了一些我不同意的更改建议，我需要理由支持和反对我和他的方法，以便能够提出问题的最佳解决方案。

所以基本上讨论是这样的：我有一个这样的实体：

The_Entity

*   属性一：字符串
*   属性2：字符串
*   属性 3：布尔值

我的同事建议做

The_Entity

*   the_entity_id: PK

属性

*   the_entity_id: FK
*   名称：字符串
*   值：字符串

所以基本上也将属性建模为实体。

我认为我的方法在语义上更有意义，但它也更加静态（在实现中，添加属性需要向表中添加列）。你对此有什么看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:30:34.723

同意已经给出的答案。

针对 EAV 的最明显案例是当存在涉及您提到的属性的业务规则时。比如说，在您的示例中，“属性 1 和属性 2 不能都长于……字符。”。

如果您使用单个三列表来实现示例，那么实现该业务规则就像在该表上定义单个 CHECK 约束一样简单明了。该规则将简单明了，也可供稍后阅读您的设计的其他人解码，并且在运行时，检查约束将像旋风一样进行。

如果您使用 EAV 方法实现您的示例，***则无法以声明***方式实现相同的业务规则，因此它将需要（相当多）额外代码，对于以后阅读设计的任何人来说，这将更难以解码，这出错的机会更多，尤其是在事务序列化领域，并且在运行时它可能最终成为性能噩梦，使您的系统像没有腿的狗一样运行。

您还可以询问您的朋友他打算如何在他的设计中包含属性，如果这些属性的值是整数、日期、浮点数、布尔值或 DBMS 必须提供的任何其他类型。（他不能坚持一个表而不产生性能问题，即在读取时必须取消对任何数字的字符串，并在写入时对任何数字进行字符串。这是一个 CPU 占用的噩梦。）

您的朋友“发现”的实际上是***DBMS 本身***用于记录用户数据库结构的设计。DBMS 目录已经知道这种结构几十年了（当然，除了“V”部分之外，目录是 EA，可以说是没有 V 的 EAV），所以它在任何意义上都不是一个“新”的想法。

所以是的，当他声称通过他的设计可以更容易地调整数据库的结构时，从某种意义上说，他是对的。但在大多数情况下，为提高灵活性付出的代价高得令人望而却步，***特别是***如果您还考虑到“提高灵活性”的实际附加值（通常低于 EAV 支持者的建议）。

***可以***接受EAV 方法的典型案例是处理问卷。如果问卷不是真的 99.99% 稳定（随着时间的推移会延长很多），并且适用于“应该如何填写”的“规则”并不多（如果问题 7 的答案是“是”，那么问题 8 必须回答），并且问卷的答案通常在“孤立”中比在“组合”中更多地检查，那么 EAV 的大多数缺点都不适用，并且可以有效地考虑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T21:05:56.160

您的同事所提倡的称为**“实体-属性-值”**或 EAV，并且被广泛认为是一种**反模式**。（谷歌搜索“EAV evil”，你会发现*很多*例子。）如果你想知道为什么你*不应该*按照你的同事建议的方式去做，你会很容易找到它。

话虽如此，如果您查看我在 SO 和 DBA.SE 上的回答，您会发现在某些特定情况下，我是 EAV 的罕见支持者，而 EAV 的坏处并不适用。尽管如此，由于我们不知道您的特定型号是否满足这些特殊条件，我认为避免 EAV 是相当安全的。

# javascript - stacktrace.js 中的数字与什么相关？

> ID：10455184
> 
> 赞同：1
> 
> 时间：2012-05-04T19:45:33.493
> 
> 标签：javascript, error-handling, stack-trace

我正在使用 stacktrace.js，它返回几行，其中包括 URL，后跟两个用冒号分隔的数字。例如：

```
http://url.com/myscript.js:80:34 
```

在这个例子中，80 和 34 与什么相关？我找不到有关此脚本使用数字的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:47:07.897

第 80 行字符 34

这些数字与脚本中的任何数字都无关。

# java - WebLogic：URL 映射不起作用

> ID：10455186
> 
> 赞同：3
> 
> 时间：2012-05-04T19:45:45.160
> 
> 标签：java, jsp, weblogic

我有几个 JSP 和一个映射到 web.xml 中的每个的 URL。以底部开头的链接在`<servlet-name>7770015020</servlet-name>`浏览器中不起作用（前面有一条评论说“其他饲料”。但是，如果我将该 servlet 定义和映射移到顶部，那么它可以在浏览器中访问。我我在这里达到了一些限制？当我在 WebLogic 中部署战争时，我没有收到错误。顶部的其他链接工作。

```
<web-app>
    <description>JSP Test MOCK</description>

    <!-- ********************************************************************** -->
    <!-- <servlet> <servlet-name>test</servlet-name> <jsp-file>/WEB-INF/7770015010/test.jsp</jsp-file> 
        <init-param> <param-name>hello</param-name> <param-value>test</param-value> 
        </init-param> </servlet> <servlet-mapping> <servlet-name>test</servlet-name> 
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/test1</url-pattern> 
        </servlet-mapping> <servlet-mapping> <servlet-name>test</servlet-name> <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/test2/*</url-pattern> 
        </servlet-mapping> -->
    <!-- ********************************************************************** -->

    <!-- ********************************************************************** -->
    <!-- ******** TEST GOOD FEED ************* -->
    <!-- ********************************************************************** -->
    <!-- ********************************************************************** -->

    <servlet>
        <servlet-name>7770015010</servlet-name>
        <jsp-file>/WEB-INF/7770015010/feed.jsp</jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010</servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/benefits/integratedCare/careCoordinatorProfiles
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <!-- ******** TEST GOOD LINKS ************* -->
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_absoluteurl_samebase_singledocname.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_absoluteurl_samebase_singledocname.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/good_subjectdoc_absoluteurl_samebase_singledocname.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_relativeurl_noext
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_relativeurl_noext
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/good_subjectdoc_relativeurl_noext
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_docname_noext
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_docname_noext</servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/good_subjectdoc_docname_noext
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_folder_endslash
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_folder_endslash
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/good_subjectdoc_folder_endslash/*
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_extrafolders_docname_ext.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_extrafolders_docname_ext.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/x/y/z/good_subjectdoc_extrafolders_docname_ext.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_extrafolders_docname_noext
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_extrafolders_docname_noext
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/x/y/z/good_subjectdoc_extrafolders_docname_noext
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->

    <servlet>
        <servlet-name>7770015010-good_subjectdoc_extrafolders_folder_endslash
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_extrafolders_folder_endslash
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/x/y/z/good_subjectdoc_extrafolders_folder_endslash/*
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectddoc_absoluteurl_pathdifferentfrombase.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectddoc_absoluteurl_pathdifferentfrombase.xml
        </servlet-name>
        <url-pattern>/testnewpath/good_subjectddoc_absoluteurl_pathdifferentfrombase.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-good_subjectdoc_nocharset_in_httpheaders.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_nocharset_in_httpheaders.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-good_subjectdoc_nocharset_in_httpheaders.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/good_subjectdoc_nocharset_in_httpheaders.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->

    <!-- ******** TEST BAD LINKS ************* -->
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_bad_relativelink_startatAA.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/good_subjectdoc_absoluteurl_samebase_singledocname.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_bad_relativelink_startatAA.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_bad_relativelink_startatAA.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ***********************************************`*********************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_404_error_subjectdoc_nohtmlerrorpage.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_404_error_subjectdoc_nohtmlerrorpage.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_404_error_subjectdoc_nohtmlerrorpage.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_404_error_subjectdoc_nohtmlerrorpage.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->

    <servlet>
        <servlet-name>7770015010-ERROR_407_subjectdoc_textheader_error_onprintlntext.html
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_407_subjectdoc_textheader_error_onprintlntext.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_407_subjectdoc_textheader_error_onprintlntext.html
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_407_subjectdoc_textheader_error_onprintlntext.html
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->

    <servlet>
        <servlet-name>7770015010-ERROR_500_subjectdoc_htmlheader_error_realhtmlerrorpage.html
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_500_subjectdoc_htmlheader_error_realhtmlerrorpage.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_500_subjectdoc_htmlheader_error_realhtmlerrorpage.html
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_500_subjectdoc_htmlheader_error_realhtmlerrorpage.html
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->

    <servlet>
        <servlet-name>7770015010-ERROR_500_subjectdoc_xmlheader_xmlsubjectdoc.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_500_subjectdoc_xmlheader_xmlsubjectdoc.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_500_subjectdoc_xmlheader_xmlsubjectdoc.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_500_subjectdoc_xmlheader_xmlsubjectdoc.xml
        </url-pattern>
    </servlet-mapping>

    <!-- ********************************************************************** -->

    <servlet>
        <servlet-name>7770015010-ERROR_404_subjectdoc_xmlheader_error_onjspxmlpage.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_404_subjectdoc_xmlheader_error_onjspxmlpage.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_404_subjectdoc_xmlheader_error_onjspxmlpage.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_404_subjectdoc_xmlheader_error_onjspxmlpage.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_200_subjectdoc_htmlheader_error_jspredirect_toerrorjsphtml.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_200_subjectdoc_htmlheader_error_jspredirect_toerrorjsphtml.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_200_subjectdoc_htmlheader_error_jspredirect_toerrorjsphtml.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_200_subjectdoc_htmlheader_error_jspredirect_toerrorjsphtml.xml</url-pattern>
    </servlet-mapping>
    <!-- ********** REDIRECT TO THIS ACTUAL HTML ERROR PAGE ******** -->
    <servlet>
        <servlet-name>7770015010-ERROR_200_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml_ACTUALERRORPAGE.jsp
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_200_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml_ACTUALERRORPAGE.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            7770015010-ERROR_200_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml_ACTUALERRORPAGE.jsp
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_200_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml_ACTUALERRORPAGE.jsp
        </url-pattern>
    </servlet-mapping>

    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********** REDIRECT TO THIS ACTUAL HTML ERROR PAGE ******** -->
    <servlet>
        <servlet-name>7770015010-ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html_ACTUALERRORPAGE.jsp
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html_ACTUALERRORPAGE.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html_ACTUALERRORPAGE.jsp
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_500_subjectdoc_htmlheader_error_jspredirect_toerror_500html_ACTUALERRORPAGE.jsp
        </url-pattern>
    </servlet-mapping>

    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_404_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_404_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
        <!-- Define an error handler for 404 pages -->
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_404_subjectdoc_htmlheader_error_weblogicredirect_toerrorjsphtml.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/doesntexist.xml
        </url-pattern>
    </servlet-mapping>

    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_407_validfeedcontent.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_407_validfeedcontent.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_407_validfeedcontent.xml</servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_407_validfeedcontent.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_malformed_xml_subjectdoc.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_malformed_xml_subjectdoc.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_malformed_xml_subjectdoc.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_malformed_xml_subjectdoc.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_nonxml_html_subjectdoc_htmlheader.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_nonxml_html_subjectdoc_htmlheader.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_nonxml_html_subjectdoc_htmlheader.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_nonxml_html_subjectdoc_htmlheader.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_differentxml_subjectdoc_xmlheader.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_differentxml_subjectdoc_xmlheader.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_differentxml_subjectdoc_xmlheader.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_differentxml_subjectdoc_xmlheader.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_validsubjecdoc_badheadercontenttype.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_validsubjecdoc_badheadercontenttype.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_validsubjecdoc_badheadercontenttype.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_validsubjecdoc_badheadercontenttype.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_nodata_onsubjectdoc_goodheader_goodheader.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_nodata_onsubjectdoc_goodheader_goodheader.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_nodata_onsubjectdoc_goodheader_goodheader.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_nodata_onsubjectdoc_goodheader_goodheader.xml
        </url-pattern>
    </servlet-mapping>

    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_nosubjectdoc_feed_dasextensiononly_errors.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_nosubjectdoc_feed_dasextensiononly_errors.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_nosubjectdoc_feed_dasextensiononly_errors.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_nosubjectdoc_feed_dasextensiononly_errors.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_pointtonoserver_noheaders.xml
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_pointtonoserver_noheaders.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_pointtonoserver_noheaders.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_pointtonoserver_noheaders.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015010-ERROR_pointtoserver_behindfirewall_noheaders
        </servlet-name>
        <jsp-file>/WEB-INF/7770015010/ERROR_pointtoserver_behindfirewall_noheaders.jsp
        </jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015010-ERROR_pointtoserver_behindfirewall_noheaders.xml
        </servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015010/path/path2/ERROR_pointtoserver_behindfirewall_noheaders.xml
        </url-pattern>
    </servlet-mapping>
    <!-- ******************** OTHER FEEDS ************************************************** -->
    <servlet>
        <servlet-name>7770015020</servlet-name>
        <jsp-file>/WEB-INF/7770015020/feed.jsp</jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015020</servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015020/benefits/integratedCare/careCoordinatorProfiles
        </url-pattern>
    </servlet-mapping>
    <!-- ********************************************************************** -->
    <servlet>
        <servlet-name>7770015030</servlet-name>
        <jsp-file>/WEB-INF/7770015030/feed.jsp</jsp-file>
        <init-param>
            <param-name>hello</param-name>
            <param-value>test</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>7770015030</servlet-name>
        <url-pattern>/2.16.840.1.113883.3.42.10001.100001.12/7770015030/benefits/integratedCare/careCoordinatorProfiles
        </url-pattern>
    </servlet-mapping>

    ...{DELETED}
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T13:33:01.240

我不确定为什么它不能按照您编写的方式工作（您似乎确实遇到了某种限制），但是有一个内置的 JSP servlet，您可以映射到根上下文，然后以与所需路径一致的方式命名您的 JSP。如果这还不够灵活，请编写您自己的 servlet，将其映射到根上下文，编写逻辑以您希望的任何方式映射所有内容，然后简单地在代码中实例化和调用 JspServlet。

您使用的是什么版本的 Weblogic？你试过更新吗？是否有可能在您的一个映射中存在细微的语法错误，并且它以及在它没有加载之后出现的任何映射？

# c++ - 记录编译源的时间

> ID：10455189
> 
> 赞同：3
> 
> 时间：2012-05-04T19:45:54.777
> 
> 标签：c++, c, time, compilation

我有一个源文件。当我编译代码时，我希望可执行文件记住它的构建时间。我想知道这是否可能。例如：

```
 int main(){
    time_t t = ???  // Time when this line is compiled
    //print out value of t in certain format. 
    return t 
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T19:48:24.880

您可以使用`__TIME__`和`__DATE__`宏来获取[预处理器运行的时间](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)。这是一个字符串，所以你需要从那里[将它转换为一个`time_t`](https://stackoverflow.com/questions/321793/date-time-conversion-string-representation-to-time-t)。

我整理的一个简单示例：

```
#include <time.h>
#include <iostream>
#include <cassert>

time_t build_time() {
  static const char *built = __DATE__" "__TIME__;  
  struct tm t;
  const char *ret = strptime(built, "%b %d %Y %H:%M:%S", &t);
  assert(ret);
  return mktime(&t);
}

int main() {
  std::cout << build_time() << std::endl;
} 
```

我有点担心它如何与不同的语言环境交互，所以我快速浏览了最近的 C 标准并找到了以下段落：

> `__DATE__`预处理翻译单元的翻译日期：“Mmm dd yyyy”形式的字符串文字，其中月份的名称与函数生成的月份名称相同`asctime` ，dd的第一个字符是空格字符，如果该值小于 10。如果翻译日期不可用，则应提供实现定义的有效日期。

`asctime`很清楚：

> ...月份的缩写是“一月”、“二月”、“三月”、“四月”、“五月”、“六月”、“七月”、“八月”、“九月”、“十月”、“十一月”和“十二月”...

但是说`%b`：`strptime()`

> %b 或 %B 或 %h
> 
> 根据**当前语言环境**的月份名称，缩写形式或全名。

因此，您需要注意，这是对运行时语言环境设置的假设。

（理论上，您可以在`constexpr`C++11 的编译时编写一个或两个函数来执行此操作，但至少可以说这不是微不足道的！）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T19:48:01.837

[`__DATE__`您可以通过和`__TIME__`预定义的宏](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)将时间记录为字符串。

如果你想要一个`time_t`，你必须在运行时转换它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T19:48:36.000

它不能完美地解决您的问题，但在 Visual Studio 中，您可以添加后期构建的事件。添加一些控制台命令，例如创建新文件或更新现有文件以查看上次成功构建的时间。我这样做是为了将我的报告文件复制到我需要它们的目录中。我只是构建我的项目，它们都去那里:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T19:51:16.390

在代码中读取可执行文件的最后修改日期和时间属性。

# java - 通过java编写xml时处理特殊字符

> ID：10455194
> 
> 赞同：0
> 
> 时间：2012-05-04T19:46:24.793
> 
> 标签：java, special-characters

通过一个java程序，我正在创建一个股东的xml。生成的 xml 看起来像 -

```
<?xml version="1.0" encoding="UTF-8" ?>
<urlset>
<url>
 <loc>FirstName-LastName/id/</loc>
</url>
</urlset> 
```

有些股东的名字中有特殊字符，例如 A. Pitkänen。现在，当我看到这个股票持有人的 xml 时，它看起来像 -

```
<?xml version="1.0" encoding="UTF-8" ?>
<urlset>
<url>
<loc>/A-Pitk寥n/ELS_1005091/</loc>
</url>
</urlset> 
```

这使 xml 无效。为什么会这样？java程序是-

```
FileWriter fstream = new FileWriter("c:\stock-holders.xml");
final BufferedWriter out = new BufferedWriter(fstream);

try {
    // Making Connection and query the stock holders to get the resultset

        String aId = "";
        String aFName = "";
        String aLName = "";

        out.write("<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n");
        out.write("<urlset>\n");

        while (rs.next()) {
            String url = "";

            aFName = rs.getString(2);
            if (StringUtils.isNotEmpty(aFName) ) {
                aFName = aFName.trim();
                url += aFName;
            }

            aLName = rs.getString(3);
            if (StringUtils.isNotEmpty(aLName)) {
                aLName = aLName.trim();
                url += "-" + aFName;

            }

            aId = rs.getString(1);
            if (StringUtils.isNotEmpty(aId)) {
                aId = aId.trim();
                url += "/" + aId + "/";
            }

            out.write("<url>\n");
            out.write("<loc>" + url + "</loc>\n");
            out.write("</url>\n");
            out.flush();
        }
        out.write("</urlset>");
        out.close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:54:14.597

Sicne 您的 XML 文件应该以 UTF-8 编码编写，您需要将`Writer`s 配置为使用该编码而不是系统默认编码：

```
FileOutputStream fstream = new FileOutputStream("c:\stock-holders.xml"); 
OutputStreamWriter writer = new OutputStreamWriter(fstream, "UTF-8");
final BufferedWriter out = new BufferedWriter(writer); 
```

请注意，`FileWriter`出于这个原因，不建议使用 —— 不能将其配置为使用默认编码以外的编码。

此外，也许使用一些现有的 API 来构建 XML 文件（例如 DOM 或 StAX）而不是通过字符串连接来完成。例如，您的解决方案没有考虑到您的数据可能包含 XML 中的非法字符并且应该转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:52:31.570

我怀疑问题在于您使用的是 FileWriter 而不是 FileOutputStream 连接了 OutputStreamWriter，其中 OSW 将“utf-8”指定为编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:02:47.027

您可以使用更简短的内容：

```
PrintWriter out = new PrintWriter("c:\\stock-holders.xml", "UTF-8"); 
```

此构造函数从 Java 1.5 开始可用。

文档说：

> 使用指定的文件名和字符集创建一个新的 PrintWriter，而不自动刷新行。这个方便的构造函数创建了必要的中间层`OutputStreamWriter`，它将使用提供的字符集对字符进行编码。

`flush()`完成所有调用后，您需要调用该方法`write`。

# php - 为什么我的 SQLSRV 查询没有执行？

> ID：10455196
> 
> 赞同：0
> 
> 时间：2012-05-04T19:46:26.633
> 
> 标签：php, sql

为什么我的 SQLSRV 查询没有执行？

在 IF ELSE 失败时，它没有像它应该的那样回应任何东西有人看到我的问题是什么吗？我不知道出了什么问题，看起来它应该对我有用。

PHP代码：

```
/* IF NULL EXISTS of DATEIN or DATEOUT then UPDATE else INSERT*/
$datein_s="SELECT TOP 1 datein FROM clocked WHERE datein IS NULL AND userid=? ORDER BY datein DESC";
$datein_sr=sqlsrv_query($dbconnect,$datein_s,$params);
$datein=sqlsrv_fetch($datein_sr);
$datein_q1="UPDATE clocked SET datein=GETDATE() WHERE EXISTS(SELECT TOP 1 datein FROM clocked WHERE datein IS NULL AND userid=? ORDER BY datein DESC);";
$datein_qr1=sqlsrv_query($dbconnect,$datein_q1,$params);
$datein_q2="INSERT INTO clocked(datein) VALUES(GETDATE(),?);";
$datein_qr2=sqlsrv_query($dbconnect,$datein_q2,$params);

$dateout_s="SELECT TOP 1 dateout FROM clocked WHERE dateout IS NULL AND userid=? ORDER BY dateout DESC";
$dateout_sr=sqlsrv_query($dbconnect,$dateout_s,$params);
$dateout=sqlsrv_fetch($dateout_sr);
$dateout_q1="UPDATE clocked SET dateout=GETDATE() WHERE EXISTS(SELECT TOP 1 dateout FROM clocked WHERE dateout IS NULL AND userid=? ORDER BY dateout DESC);";
$dateout_qr1=sqlsrv_query($dbconnect,$dateout_q1,$params);

if($datein===null)
{
$datein_qr1;
}
else if ($dateout===null)
{
$dateout_qr1;
}
else if ($datein===null&&$dateout===null)
{
$datein_qr1;
}
else if ($datein!==null&&$dateout!==null)
{
$datein_qr2;
}
else
{
echo "ERROR your query may be broken!";
}

/* END IF */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:02:56.940

我不能完全遵循这里的逻辑，但我认为问题在于顶部的行：

```
$datein_qr2=sqlsrv_query($dbconnect,$datein_q2,$params); 
```

正在运行查询 - 我*认为*您想要做的只是在顶部初始化查询，然后在 if 语句中运行适当的查询，其中：

```
$datein_qr1; 
```

您需要将 sqlsrv_query 行移到 if 语句内。

此外，永远不会到达第三个 if 语句：

```
else if ($datein===null&&$dateout===null) 
```

您已经在检查前两个 if 语句中的 datein 和 dateout 是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:03:15.470

奇怪的代码片段:-)

你可以试试这个

```
if($datein===null)
{
    $datein_q1="UPDATE clocked SET datein=GETDATE() WHERE EXISTS(SELECT TOP 1 datein FROM clocked WHERE datein IS NULL AND userid=? ORDER BY datein DESC);";
    sqlsrv_query($dbconnect,$datein_q1,$params);
} 
```

或使用闭包 (>= PHP 5.3)

```
$datein_q1="UPDATE clocked SET datein=GETDATE() WHERE EXISTS(SELECT TOP 1 datein FROM clocked WHERE datein IS NULL AND userid=? ORDER BY datein DESC);";
$caller= function($query, $params = array()) use($dbconnect) {
    sqlsrv_query($dbconnect,$query,$params);
};

if($datein===null)
{
    $caller->__invoke($datein_q1, array();
} 
```

# python - 使用 Python 单独限制种子

> ID：10455198
> 
> 赞同：0
> 
> 时间：2012-05-04T19:46:36.707
> 
> 标签：python, bittorrent

我正在尝试编写一个 python 程序来处理单独限制种子的播种。具体来说，对于一些可能较大（最多 30 个左右）同时运行的种子，我想将每个种子的上传速率限制为一些单独设置的值（x_1、x_2、...、x_n），以 kb/s 为单位.

我曾尝试通过 xmlrpc 使用 rtorrent，但似乎有一个错误会阻止非全局节流阀产生任何影响（事实上，检查节流阀的设置速率总是返回“0”，无论它设置为什么）。有没有人对我可以在 python 中使用的库或其他工具有任何建议来控制这种粒度级别的种子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T05:26:12.440

有据可查的是，您必须设置一个全局限制，因为该全局带宽池中的限制共享。

其余的，[https://code.google.com/p/pyroscope/wiki/RtXmlRpcExamples#Setting_and_checking_throttles](https://code.google.com/p/pyroscope/wiki/RtXmlRpcExamples#Setting_and_checking_throttles)

# c# - Ajax 帖子不会将数据填充到下拉选择列表中

> ID：10455199
> 
> 赞同：0
> 
> 时间：2012-05-04T19:46:45.287
> 
> 标签：c#, javascript, jquery, ajax, model-view-controller

我在发布到 ActionMethods 以在这里提取数据时缺少什么？

我需要对 ActionMethod 进行简单的 javascript/jquery 调用，该方法将使用来自 IQueryable （或 List ）类型的 Json 对象的数据填充我的下拉菜单。

所以我尝试了两种选择：

```
 function populateuUsers(id) {
    $.post("/User/GetUsersJson/", { id: id }, function (data) {
        if ($.isEmptyObject(data)) {
            alert("Empty");

        }

        $.each(data, function (item) {
            alert(item);
            $("#user-list").append(
                $("<option></option>").text(data[item].FullName).val(data[item].Id)
                );
        });

    }, "json");
} 
```

我收到“数据未定义”的错误

然后我尝试了：

```
 function populateUsers(id) {
    $.ajax({
        type: 'post',
        datatype: 'json',
        url: "/User/GetUsersJson/" + id,
        success: function (data) {
            alert(data);
            $.each(data, function (item) {
                alert(item);
                $("#users-list").append(
                    $("<option></option>").text(data[item].FullName).val(data[item].Id));

            });
        },
        error:function()
            {
                alert(data);
            }

    });
} 
```

也不行。需要注意的一点...我设置了断点并验证了 GetUsersJson Action 方法用户控制器中的数据是否正确填充并返回到 javascript 函数。

为什么它不起作用呢？为什么“数据未定义”并且它的行为就像没有返回一样？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:06:22.657

在您传递给的匿名函数内部，`$.each`未定义`data`。相反，您应该将两个变量传递给该函数。就像是：

```
$.each(data, function (key, item) {
    alert(item);
    $("#users-list").append(
        $("<option></option>").text(item.FullName).val(item.Id));

}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

# grails - grails lesscss-resources 插件问题

> ID：10455204
> 
> 赞同：1
> 
> 时间：2012-05-04T19:47:20.640
> 
> 标签：grails, plugins, less

我在使用插件时遇到问题。一切似乎都很好，但在开发环境中运行应用程序后，页面加载但抱怨找不到编译的 css 文件。我正在使用 Grails 2.0.1 和 lesscss-resources 1.3.0。

这是我在 UiResources.groovy 中的内容：

```
styling {
    defaultBundle 'styling'

    resources url: '/less/mainStyles.less', attrs:[rel: "stylesheet/less", type: 'css'], disposition: 'head', bundle: 'bundle_styling'
    resources url: '/css/other.css', disposition: 'head'
} 
```

页面上显示的是这样的：

```
< link href="/appName/bundle-bundle_styling_head.css" type="text/css" media="screen, projection" rel="stylesheet" > 
```

虽然我可以在

```
~/.grails/2.0.1/projects/appName/tomcat/worl/Tomcat/localhost/appName/grails-resources ... 
```

Grails 控制台也抱怨：

```
Resources not found: /bundle-bundle_styling_head.css 
```

我一直在尝试不同的事情来让它发挥作用，直到无济于事。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:11:56.097

我有一个类似的问题，发现删除捆绑选项解决了这个问题。所以删除 ", bundle: 'bundle_styling'" 制作这条线：

资源 url: '/less/mainStyles.less', attrs:[rel: "stylesheet/less", type: 'css'], disposition: 'head'

希望这对你也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T10:52:28.557

请注意文档当前在问题部分中所说的内容-也许您正面临以下错误之一：

> *   要使 Bundle 工作，您必须在包的末尾有一个 .css 文件，即使它只是一个空白文件。
> *   必须手动指定默认捆绑包，因为默认情况下这是根据文件扩展名计算的。

我刚刚有一个案例，我在一个就地插件（MyPluginApplicationResources.groovy）中指定了这个

```
resource url:'/less/eip.less', attrs:[rel: "stylesheet/less", type:'css'],defaultBundle: 'eip'
resource url: '/css/dummy.css', defaultBundle: 'eip' 
```

插件没有错误但也没有呈现css，所以我将其更改为：

```
resource url:[dir: '/less', file : 'eip.less', plugin: 'my-plugin'], attrs:[rel: "stylesheet/less", type:'css'],defaultBundle: 'eip' 
resource url: '/css/dummy.css', defaultBundle: 'eip' 
```

这对我有用。

dummy.css ：这是一个空的 css 文件（请参阅问题） - 但我还没有测试它是否真的需要。

# objective-c - 执行 setValuesForKeysWithDictionary 时托管对象属性的动态类型转换

> ID：10455205
> 
> 赞同：0
> 
> 时间：2012-05-04T19:47:30.457
> 
> 标签：objective-c, cocoa-touch

我有几个 NSManagedObject 类。我正在从解析为 NSDictionary 对象的服务器中提取一些 JSON 数据。当发生从 JSON 到 NSDictionary 的转换时，我的所有数据都被转换为 NSStrings。然后，当我将此字典映射到我的 managedObject 时，我得到以下信息：

```
Unacceptable type of value for attribute: property = "idexpert"; desired type = NSNumber; given type = __NSCFString; value = 1.' 
```

所以我的 managedobject 正在寻找一个 NSNumber 但它得到一个字符串并抛出异常

有没有一种方法可以在我调用`setValuesForKeysWithDictionary`时自动为它们要进入的托管对象正确转换值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-03T19:31:33.677

在保存核心数据的同时管理 JSON 属性的最佳方法是编写一个可以覆盖 setValuesForKeysWithDictionary 的通用函数，如下所示：

```
@implementation NSManagedObject (safeSetValuesKeysWithDictionary)

- (void)safeSetValuesForKeysWithDictionary:(NSDictionary *)keyedValues dateFormatter:(NSDateFormatter *)dateFormatter
{
    NSDictionary *attributes = [[self entity] attributesByName];
    for (NSString *attribute in attributes) {
        id value = [keyedValues objectForKey:attribute];
        if (value == nil) {
            continue;
        }
        NSAttributeType attributeType = [[attributes objectForKey:attribute] attributeType];
        if ((attributeType == NSStringAttributeType) && ([value isKindOfClass:[NSNumber class]])) {
            value = [value stringValue];
        } else if (((attributeType == NSInteger16AttributeType) || (attributeType == NSInteger32AttributeType) || (attributeType == NSInteger64AttributeType) || (attributeType == NSBooleanAttributeType)) && ([value isKindOfClass:[NSString class]])) {
            value = [NSNumber numberWithInteger:[value integerValue]];
        } else if ((attributeType == NSFloatAttributeType) &&  ([value isKindOfClass:[NSString class]])) {
            value = [NSNumber numberWithDouble:[value doubleValue]];
        } else if ((attributeType == NSDateAttributeType) && ([value isKindOfClass:[NSString class]]) && (dateFormatter != nil)) {
            value = [dateFormatter dateFromString:value];
        }
        [self setValue:value forKey:attribute];
    }
}
@end 
```

有关更多详细信息，请参阅此链接：[http ://www.cimgf.com/2011/06/02/saving-json-to-core-data/](http://www.cimgf.com/2011/06/02/saving-json-to-core-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:03:25.003

如果您收到的 json 实际上具有数字值并且它们被转换为字符串，您应该获得一个新的 json 解析器。我推荐 NXJson。否则不会发生任何神奇的铸造。

如果 json 返回诸如 {"idexpert":"1"} 之类的字符串，那么您可以覆盖 setValuesForKeysWithDictionary 并执行类似以下代码的操作；

```
 -(void)setValuesForKeysWithDictionary:(NSDictionary *)d{
   NSMutableDictionary *newDict = [NSMutableDictionary dictionaryWithDictionary:d];
   NSString *value = [newDict valueForKey:@"idexpert"];
   [newDict setValue:[NSNumber numberWithLong:[value longValue]] forKey:@"idexpert"];
   [super setValuesForKeysWithDictionary:newDict];
} 
```

# xml - 在 Windows Phone 上将元素添加到 XML 文件

> ID：10455209
> 
> 赞同：0
> 
> 时间：2012-05-04T19:47:52.387
> 
> 标签：xml, silverlight, linq, windows-phone-7

如何使用您想要的任何东西（Linq 或 XmlWriter）在 Windows Phone 7 中的 XML 文件中添加元素我之前在普通 C# 应用程序中做过，但在 Silverlight 和 WP7 中是不同的。

该文件位于解决方案资源管理器文件夹（“files/IO.xml”）中，因此无需提供有关 IsolatedStorage 的答案。

我的文件是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<lights>
    <light id="1" name="toto" />
    <light id="2" nom="titi" />  
</light> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:56:49.537

假设您的文件在 IsolatedStorage 中，您可以尝试以下操作：

```
using (var store = IsolatedStorageFile.GetUserStoreForApplication())
{
  using (IsolatedStorageFileStream isoStore = new IsolatedStorageFileStream("IO.xml", FileMode.Open, store))
  {
    XDocument doc = XDocument.Load(isoStore);
    doc.Descendants("lights")
       .FirstOrDefault()
       .Add(new XElement("light", new XAttribute("id","3"), new XAttribute("name","tete"))

    doc.Save(isoStore);
  }
} 
```

# ios - 在 iOS 中使用 SQLite...奇怪的警告

> ID：10455210
> 
> 赞同：0
> 
> 时间：2012-05-04T19:47:54.553
> 
> 标签：ios, sqlite

我在执行我的应用程序时遇到问题，我收到以下警告：“不兼容的指针类型将'const char *'传递给'sqlite3_stmt *'类型的参数（又名'struct sqlite3_stmt *'）”。

它只发生在以下几行：

```
if (sqlite3_prepare_v2(database, sql, -1, &databasePath, NULL)!=SQLITE_OK)

while (sqlite3_step(sql) == SQLITE_ROW)

szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(sql, 0)];

szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(sql, 1)];

sqlite3_finalize(sql); 
```

这是功能：

```
-(IBAction)setInput:(id)sender
{
NSString *strStoreNumber;
NSString *strRegNumber;

strStoreNumber = StoreNumber.text;
strRegNumber = RegNumber.text;
lblStoreNumber.text = strStoreNumber;
lblRegNumber.text = strRegNumber;

NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,         NSUserDomainMask, YES);
NSString* documentsDirectory = [paths lastObject];
//    NSString* databasePath = [documentsDirectory   stringByAppendingPathComponent:@"tblStore.sqlite"];
NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
{

NSLog(@"Opened sqlite database at %@", databasePath);

//...stuff
} 
else 
{
NSLog(@"Failed to open database at %@ with error %s", databasePath,     sqlite3_errmsg(database));
sqlite3_close (database);
}

NSString *querystring;

// create your statement
querystring = [NSString stringWithFormat:@"SELECT strStore FROM tblStore WHERE strStore = %@;", strStoreNumber];  

const char *sql = [querystring UTF8String];

NSString *szStore = nil;
NSString *szReg = nil;

if (sqlite3_prepare_v2(database, sql, -1, &databasePath, NULL)!=SQLITE_OK) //queryString =    Statement
{
NSLog(@"sql problem occured with: %s", sql);
NSLog(@"%s", sqlite3_errmsg(database));
}
else
{
// you could handle multiple rows here

while (sqlite3_step(databasePath) == SQLITE_ROW) // queryString = statement
{            
    szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(databasePath, 0)];
    szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(databasePath, 1)];
} // while        

}

sqlite3_finalize(databasePath);

// Do something with data...  
} 
```

任何帮助或见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:13:13.810

数据库路径被传递而不是语句句柄指针。代替

```
if (sqlite3_prepare_v2(database, sql, -1, &databasePath, NULL)!=SQLITE_OK) 
```

和

```
sqlite3_stmt *statement = nil;
if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL)!=SQLITE_OK) 
```

并将终结行设置为

```
sqlite3_finalize(statement); 
```

[sqlite3_prepare_v2](http://www.sqlite.org/capi3ref.html#sqlite3_prepare)上的文档提供了有关此方法的更多详细信息。

# sql - 根据表之间的比较获得列的名称

> ID：10455214
> 
> 赞同：0
> 
> 时间：2012-05-04T19:47:59.420
> 
> 标签：sql, sql-server-2008, excel

我的目标是根据表 Product_A 和 Product_B 中的类似列检索列名称的结果。

如果我从 sql server 获得 excel、记事本或表格中的结果并不重要。最重要的是检索结果。

我不知道如何在人工使用率低的情况下根据计算检索结果？

您需要考虑的一些标准：

*   列必须具有相同的数据类型和名称才能相似
*   我对从列中检索数据不感兴趣
*   该表是在基本级别中创建的。实际上，该表使用 200 列。

该表位于 SQL Server 2008 R2 中

```
TABLE Product_A
(
   ProductID INT,
   ProductName VARCHAR(100),
   Rate MONEY,
   Action INT,
   MapINT,
) 

TABLE Product_B
(
   ProductID INT,
   Count INT,
   ProductName VARCHAR(100),
   Rate MONEY
) 

Requested result

       ProductID INT,
       ProductName VARCHAR(100),
       Rate MONEY, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:56:20.717

此查询将比较两个表并仅返回相同数据类型的同名列。如果您需要在数据库中查找所有匹配项，请注释掉`t1.name =`条件。

```
select 
      t1.name TableName, 
      c1.name ColumnName,
      types.name,
      c1.max_length,
      c1.precision,
      c1.scale
 from sys.columns c1
inner join sys.columns c2
   -- Condition to join columns - same name, type, length, precision and scale
   on c1.name = c2.name
  and c1.system_type_id = c2.system_type_id
  and c1.max_length = c2.max_length
  and c1.precision = c2.precision
  and c1.scale = c2.scale
   -- Exclude template table
  and c1.object_id <> c2.object_id
inner join sys.tables t1
   on c1.object_id = t1.object_id
inner join sys.types
   on c1.system_type_id = types.system_type_id
inner join sys.tables t2
   on c2.object_id = t2.object_id
where t2.name = 'Product_B'
   -- remove if you want to search for matches in all tables 
  and t1.name = 'Product_A' 
```

检查[sys.columns](http://msdn.microsoft.com/en-us/library/ms176106%28v=sql.100%29.aspx)和[sys.tables](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.100%29.aspx)上的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:32:56.217

您的要求不是很清楚，但您可能指的是 UNION，因此您可以从两个表中获取数据，这将在单独的行中为您提供每个表中的产品信息：

```
SELECT ProductId, ProductName, Rate
FROM Product_A
UNION 
SELECT ProductId, ProductName, Rate
FROM Product_B 
```

如果您可以编辑您的 OP 并发布一些示例数据和您的预期结果，那么可以澄清查询。

如果您知道要从表 A 或 B 中获取数据的表，则可以对 ProductName 执行 JOIN，但您需要确定所需的 Rate 和 Product Id：

```
SELECT a.ProductId
    , a.ProductName
    , a.Rate
FROM Product_A a
JOIN Product_B b
    ON a.ProductName = b.ProductName 
```

# jquery - 宽度：自动不适用于 IE8

> ID：10455218
> 
> 赞同：0
> 
> 时间：2012-05-04T19:48:17.003
> 
> 标签：jquery, css, internet-explorer-8, compatibility

我正在尝试使用 jQuery 调整弹出窗口的大小以适应其内容。

在 Chrome 和 IE9 中，我使用

```
$(windowSelector).css('width', 'auto'); 
```

一切都很好。

但是 IE8 中的同一行会导致弹出窗口在屏幕宽度方向上伸展。

有谁知道解决这个问题的任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:01:37.773

您可能想尝试以下代码，但不提供更多详细信息，它可能无法达到您的预期效果（在 IE7 中也不起作用）。

```
$(windowSelector).css('display', 'inline-block'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:53:56.393

`width:auto;`是所有元素的默认宽度。唯一有意义的上下文是在别处重置宽度集。它不会将元素的宽度设置为子元素的宽度。

IE 最有可能将 with 设置为 100%，因为它没有限制宽度的父元素（块级元素的默认设置）。应用于内联元素的 auto 宽度不会做任何事情。

为了将某些东西的大小调整到其子元素的宽度，您需要使用 JavaScript 获取高度和宽度并将其设置在父元素上。

# sql-server - 如何根据表中的日期列按周开始和结束日期计算总计？

> ID：10455222
> 
> 赞同：1
> 
> 时间：2012-05-04T19:48:24.813
> 
> 标签：sql-server

我的名为 timesheet 的 sql server 表有 4 列

```
employee_id int
task_start_date datetime
task_end_date datetime
hours_worked int 
```

我需要得出周开始日期和周结束日期以及员工在该周工作的总小时数。我生成的数据集应该有 4 列 - Week_Start_Date Week_End_Date Employee_Id Total_Hours_Charged

换句话说，我需要从该表中获取每个员工在所有周内收取的总小时数。谁能帮我写一个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:05:23.477

# SQL Server 2005 及更高版本

### 假设：

1.  任务开始日期和结束日期值始终**相同**。
2.  周开始和结束日期是根据**task_start_date**计算的。

您可以使用该`DATEPART`函数查找给定日期的星期几，然后使用`DATEADD`函数提供输出`DATEPART`作为输入来计算一周的第一天和最后一天。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/2ff4f/1)

### 脚本：

假设该周从*星期日开始并在**星期六*结束，该脚本计算该周的总小时数。

```
CREATE TABLE timesheet
(
        employee_id     int
  ,     task_start_date datetime
  ,     task_end_date   datetime
  ,     hours_worked    int
);

INSERT INTO timesheet
    (employee_id, task_start_date, task_end_date, hours_worked) 
    VALUES
      (1, '20120331', '20120331', 6),
      (1, '20120401', '20120401', 3),
      (1, '20120403', '20120403', 8),
      (1, '20120409', '20120409', 5),
      (1, '20120412', '20120412', 4),
      (2, '20120402', '20120402', 7),
      (2, '20120403', '20120403', 6),
      (3, '20120409', '20120409', 4),
      (1, '20120412', '20120412', 8);

;WITH empworkhours AS
(
    SELECT  DATEADD(DAY
                ,   -(DATEPART(dw, task_start_date) -1)
                ,   task_start_date) AS week_start
        ,   DATEADD(DAY
                ,   7 - (DATEPART(dw, task_start_date))
                ,   task_start_date) AS week_end
        ,   employee_id
        ,   hours_worked
    FROM    timesheet
)
SELECT      week_start
        ,   week_end
        ,   employee_id
        ,   SUM(hours_worked) total_hrs_per_week
FROM        empworkhours
GROUP BY    week_start
        ,   week_end
        ,   employee_id; 
```

### 输出：

```
WEEK_START      WEEK_END        EMPLOYEE_ID TOTAL_HRS_PER_WEEK
--------------  --------------  ----------- -----------------
March, 25 2012  March, 31 2012       1               6
April, 01 2012  April, 07 2012       1              11
April, 01 2012  April, 07 2012       2              13
April, 08 2012  April, 14 2012       1              17
April, 08 2012  April, 14 2012       3               4 
```

# java - 在 Hibernate 中映射具有多个 ID 的扩展实体

> ID：10455229
> 
> 赞同：0
> 
> 时间：2012-05-04T19:48:41.493
> 
> 标签：java, hibernate, mapping, nhibernate-mapping, jta

我已经实现了一个由 Article 和 Fruit 表组成的数据库，具有以下规格：

```
create table Fruit
(
ART_ID            bigint,
FRU_ID          bigint not null auto_increment,
FRU_FROZEN   varchar(15),
primary key(FRU_ID)
);

# Implemented

create table Article
(
ART_ID            bigint,
ART_NAME         varchar(10) not null,
ART_COST   varchar(10) not null,
primary key(ART_ID)
); 
```

更改表水果添加约束 FK_FRUIT_ARTICLE 外键 (ART_ID) 引用文章 (ART_ID) 上删除限制更新限制；

并具有以下类实体：Article.java

```
@Entity      
@Table(name = "Article")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class Article implements Serializable
 {
@Id @GeneratedValue(strategy=GenerationType.AUTO)
@Basic(optional = false)
@Column(name = "ART_ID")
private Long id;

@Basic(optional = false)
@Column(name = "ART_NAME")
private String name;

@Basic(optional = true)
@Column(name = "ART_COST")
private String cost; 
```

// 构造函数、getter 和 setter

水果.java

```
@Entity
@Table(name="Fruit")
public class Fruit extends Article{

@Id @GeneratedValue(strategy=GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "FRU_ID")
private long fruitID;

@Basic(optional = false)
@Column(name = "FRU_FROZEN")
private String fruitFrozen; 
```

// 构造函数、getter 和 setter

现在，我的问题是如何在 Article 和 Fruit 中拥有 ID，如果我保持这种方式，它会抛出异常，即子类不能包含 IDClass，因为它会导致多个 ID。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:56:09.187

这意味着它所说的，一个实体不能有两个 ID。

考虑操作

```
entityManager.find(Article.class, 1l); 
```

如果有两篇 id 为 1 的文章（一篇文章和一篇水果），它应该如何知道返回哪一篇？

如果您的表需要每个都有 ID，那么实体继承不是一个合适的解决方案。考虑将公共元素放在 an 中`@MappedSuperclass`。

# linq - 按订单日期和产品区分 SQL Server 2008

> ID：10455233
> 
> 赞同：0
> 
> 时间：2012-05-04T19:49:02.600
> 
> 标签：linq, sql-server-2008

这是我在这里的第一篇文章，所以如果我被误认为是我的帖子和英语，我说抱歉:)

我已经在谷歌做过研究，不幸的是直到现在我都无法解决这个问题。

这是我的问题，按日期显示每个产品的总订单，我想按产品区分

这是我的查询示例

```
SELECT Orders.OrderDate
          ,SUM(OrderDetails.OrderDetailQuantity) AS totalOrdered
          ,Products.ProductId 
FROM Orders 
INNER JOIN OrderDetails ON Orders.OrderId = OrderDetails.OrderId 
INNER JOIN Products ON OrderDetails.ProductId = Products.ProductId 
GROUP BY Orders.OrderId
          ,Orders.OrderDate
          ,Products.ProductId 
HAVING (CONVERT(VARCHAR,  Orders.OrderDate, 23) BETWEEN @from AND @to) 
```

现在，我想根据 OrderDate 之间的产品来区分，我知道这里的大问题是 DATE，但我不知道如何通过这个查询区分日期。

请帮我。谢谢你。

PS：如果你想在 linq 表达式中解决这个问题，它会被高度接受:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:59:01.467

样本数据和期望的结果会有所帮助。当你说“distinct by”时，我假设你的意思是 group by。请注意，在 WHERE 子句中，如果您确保 @from 和 @to 参数的时间组件设置正确（包括每一天），则不需要强制转换 Order.OrderDate。在比较的左侧应用强制转换操作绝不是一个好主意。

```
SELECT  --cast(Orders.OrderDate as date),
        Products.ProductId 
        SUM(OrderDetails.OrderDetailQuantity) AS totalOrdered,
FROM Orders 
INNER JOIN OrderDetails ON Orders.OrderId = OrderDetails.OrderId 
INNER JOIN Products ON OrderDetails.ProductId = Products.ProductId 
where Orders.OrderDate between cast(@from as date) AND cast(@to as date)
GROUP 
BY      --cast(Orders.OrderDate as date),
        Products.ProductId 

-- to illustrate:
declare @From datetime = '1/1/2000 10:30:22',
        @To datetime = '1/3/2000 9:11:31'

declare @orders table (i int, dt datetime)
insert into @orders
    values(1, '1/1/2000 8:00'),(2, '1/2/2000 10:00'), (3, '1/4/2000 3:00')

-- only returns i=2
select *
from    @orders
where dt between @From and @To

-- returns i=1 & i=2
select *
from    @orders
where dt between cast(@From as date) and cast(@To as date) 
```

# php - 如何从模板文件中插入？

> ID：10455234
> 
> 赞同：2
> 
> 时间：2012-05-04T19:49:08.730
> 
> 标签：php, codeigniter

我正在为一个项目使用 CodeIgniter，我想自定义每个页面调用的样式表。我有一个通用的页眉和页脚，在控制器中被这样调用：

```
$this->load->view("templates/header");
$this->load->view({page-to-load});
$this->load->view("template/footer"); 
```

正如您可能猜到的那样，页面的结构分为三个部分：文档类型以及直到正文的所有标签，正文内容本身，最后是页脚信息以及结束正文和 html 标记。

我想将一个 CSS 资源从正文内容插入到标题中，这样我就可以将标题保留为通用文件，并从加载的内容中对其进行自定义，类似于 WordPress 的做法。但是，我还没有找到任何可以告诉我如何做到这一点的东西。

所以我的问题是如何从正文文件中的代码自定义标头中的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T19:55:37.810

在您的控制器中，您可以将变量传递给视图，如下所示：

```
$data['stylesheet'] = 'CustomPageStylesheet.css';

$this->load->view("templates/header", $data);
$this->load->view({page-to-load});
$this->load->view("template/footer"); 
```

然后，在您的标题视图中，您将可以访问一个变量`$stylesheet`，您可以使用该变量为该特定控制器加载自定义样式表。

# google-chrome-extension - 如何声明 Chrome 扩展来处理 404 错误

> ID：10455243
> 
> 赞同：1
> 
> 时间：2012-05-04T19:50:22.333
> 
> 标签：google-chrome-extension

我想创建一个 chrome 扩展来请求返回 404 更多“在你的脸上”的页面资源。我不关心页面本身，而是页面请求的资源（js、css、img）。我有一个正在使用的旧站点，并且希望看到这些丢失的资源，而不必一直打开开发人员工具窗口并继续扫描网络选项卡。

我从哪里开始，有可能吗？我认为这将是处理程序：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) { } 
```

但是 changeInfo 数据似乎没有为所有请求返回状态代码。

我是否需要以某种方式连接到开发人员工具的网络视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:58:08.577

[`webRequest`](https://developer.chrome.com/extensions/webRequest.html)API，特别是事件[`chrome.webRequest.onCompleted`](http://developer.chrome.com/chrome/extensions/webRequest.html#event-onCompleted)可用于捕获所有请求并读取响应状态。

# c# - ASP.NET 页面流信息

> ID：10455245
> 
> 赞同：0
> 
> 时间：2012-05-04T19:50:26.890
> 
> 标签：c#, asp.net, include, workflow, response.write

所以我正在尝试使用 C# 来获取数据库中存储的 HTML，然后在一组 HTML 页眉和页脚之间显示它（我有几个用于不同的页面，所以母版页会让生活变得更加复杂而不是更少。我也来自 PHP 背景，这是一种工作方式）。

```
<!--#include virtual="header.html" --> 
<% @Page Language="C#" Debug="true" %>
<% @Import Namespace="System.Data.Odbc" %>
<% @Import Namespace="System.Web.Configuration" %>

<script language="C#" runat="server">
void Page_Load(object sender,EventArgs e) {
           //Gets the HTML Successfully
           //Response.Write(fetched_html);
    }
</script>
<!--#include virtual="footer.html" --> 
```

不幸的是，在当前的工作流程中，代码会在页眉或页脚放在页面上之前生成内容，将所有存储的 HTML 放在页眉之前的页面顶部。我已经尝试了几个不同的 Page_Events，但它们似乎都不起作用，所以我需要知道该怎么做。

是否有同样简单的方法来引用和插入一个简单的 html 头文件，该文件将在任何 Page_Events 之前呈现？我试过 Page_PreLoad 和其他的都没有成功。要么根本没有获取代码，要么我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:55:31.740

尝试这个：

1.  假设您有数据保存在内存中的某些位置，例如数据表或数据集或集合。

2.  要在页面上显示一个 html 文本，我们一般使用`<asp:Literal/>`. 所以在页面上放置一个asp文字控件。它在`<body> </body>`标签之间工作。

3.  现在使用其 Text 属性将文本呈现给控件。例如

    `ltl.text = dt.rows[0]["htmlcol"].tostring();`

要在其中动态添加文本，您`<head> </head>`需要[HtmlMeta](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlmeta.aspx)、[Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)等类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:54:08.340

将 MasterPage 与[ContentPlaceholder](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.contentplaceholder.aspx)一起使用。然后，在内容页面上，使用 Literal 并将 HTML 放入其中。

请参阅“[文字和标签之间的区别](http://forums.asp.net/t/1146499.aspx/1)”。

# c++ - 跟踪本机调用

> ID：10455248
> 
> 赞同：1
> 
> 时间：2012-05-04T19:50:48.003
> 
> 标签：c++, winapi

这是与 Win32 相关的问题，所有代码都是本机的。

我有 3 层编译为 dll 库，相互依赖：

[模块 1] -> [模块 2] -> [模块 3] -> [我的模块 4]

模块 1 是一个应用程序加载模块 2。模块 2 加载模块 3。模块 3 加载我的模块 4。

每当从模块 1 进行调用时，它都会经过所有层，直到模块 4。

在模块 4 中，我想通过获取每个模块的 HMOUDLE 句柄或任何其他唯一标识它们的东西，以某种方式从模块 1 的模块 2 中的模块 3 调用它。我想不出任何 Win32 API 允许我执行这样的跟踪，你能建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:02:56.467

您应该能够在来自感兴趣的[STACKFRAME64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680646%28v=vs.85%29.aspx)结构的相关地址上使用[StackWalk64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680650%28v=vs.85%29.aspx)和[SymFromAddr 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681323%28v=vs.85%29.aspx)不完全是你想要的，但想不出任何其他接近的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:03:17.097

简短的回答 - 有点，但你可能不想这样做:)

冗长的答案 -[调试帮助库](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679291%28v=vs.85%29.aspx)可用于生成堆栈跟踪（通过 StackWalk64），您可以将其与通过[PSAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682621%28v=vs.85%29.aspx)检索的模块信息结合使用以获得所需的内容。

基本方法是获取进程中每个模块的基地址和大小，然后查看每个堆栈帧的返回地址，按范围匹配。如果您要做的只是确定对模块 4 中的函数的调用是否源自模块 1 中的函数，那么这将使您到达您想要的位置。

编辑：如果您可以访问相关模块的符号，那么史蒂夫 T 的答案会更可靠一些。

# c - O(n) 时间内的二维数组排序

> ID：10455250
> 
> 赞同：0
> 
> 时间：2012-05-04T19:51:13.130
> 
> 标签：c, arrays, complexity-theory, array-algorithms

我在面试中被问到一个问题，在 O(n) 时间内对一个二维数组进行排序。如何在 O(n) 中做到这一点。有人能解释一下吗.. 谢谢。

输入：

```
3 5 7 1
4 9 2 0
9 3 6 2 
```

输出

```
0 1 2 2 
3 3 4 5  
6 7 9 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:56:46.563

不知道你所说的二维数组究竟是什么意思，但是有一些特定于某些情况的排序算法可以达到 O(n)。一个例子是[计数排序](http://en.wikipedia.org/wiki/Counting_sort)，如果你想对一个 1 到 1000 范围内的 1000 个整数的数组进行排序，它可以在 O(n) 中排序。

**编辑：**它是一个多维数组这一事实不会改变排序的逻辑。您可以将索引（通过排序使用）转换为二维索引，如下所示：

```
array[i / N][i % N]; 
```

其中 N 是第一个维度的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:54:58.727

**您可以作为普通数组进行排序。**
例如

```
#include <stdio.h>
#include <stdlib.h>

int cmp(const void *a, const void *b){
    return *(int*)a - *(int*)b;
}

#define ROW_SIZE 3
#define COL_SIZE 4

int main(void){
    int M[ROW_SIZE][COL_SIZE]={{3,5,7,1},{4,9,2,0},{9,3,6,2}};
    int c,r,*p;

    for(p=&M[0][0],r=0;r<ROW_SIZE;++r){
        for(c=0;c<COL_SIZE;++c){
            printf("%d ",*p++);
        }
        printf("\n");
    }
    printf("\n");
    qsort(&M[0][0], ROW_SIZE*COL_SIZE, sizeof(int), cmp);
    for(p=&M[0][0],r=0;r<ROW_SIZE;++r){
        for(c=0;c<COL_SIZE;++c){
            printf("%d ",*p++);
        }
        printf("\n");
    }

    return 0;
} 
```

# objective-c - 有没有一种简单的方法可以在 xcode 中自动完成块变量？

> ID：10455254
> 
> 赞同：25
> 
> 时间：2012-05-04T19:51:18.560
> 
> 标签：objective-c, xcode, objective-c-blocks

通常 Xcode 自动完成功能对我来说非常有效，但是当使用块和块变量在方法签名中切换时，我总是必须重新输入变量类型和名称。这是一个例子：

![没有自动完成的块变量](../Images/c7da9253e7481d3fa49b63c07e89371d.png)

动画块很容易完成，因为它没有块变量，因此我只需`^{}`在开始编写代码之前输入。对于第二个完成块，我必须先输入，`^(BOOL fin){}`然后才能开始编写代码。这个例子有点简单，但是有多种类型，其中一些名称较长（例如`AFHTTPRequestOperation`）它变得很痛苦，感觉就像 Xcode 会自动完成的情况。

我是否错过了一些自动完成这些块变量的技巧，或者我每次都重新输入它们？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-04T19:53:21.153

Tab 直到整个块部分突出显示。无需键入，只需按回车键，示例块将被展开。

# javascript - TypeError 'undefined' 不是 Javascript / Jquery JSON 解析器中的对象

> ID：10455258
> 
> 赞同：1
> 
> 时间：2012-05-04T19:51:39.667
> 
> 标签：javascript, jquery, arrays

Javascript/JQuery noob 在这里，所以很抱歉。

我`.ajax`用来获取 JSON 对象，然后使用下面的代码循环并将字段附加到页面。简单的。

```
$.each(data, function(i, item) {
    $("#div-ipos").append(
        "<img src=" + item.user.avatar_small_url + ">&nbsp;"
        + item.user.first_name 
        + "<hr /><br />"
    );
}); 
```

它可以正常工作，并且输出与预期的一样，并带有传递到`<img>`标签的头像路径。

但是我收到以下错误：

> TypeError：“未定义”不是对象（评估“item.user.avatar_small_url”）

我需要对该变量做什么才能使其在这种情况下正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:07:08.953

`console.log(data);`在你之前使用`$.each`它来检查里面有什么。服务器响应很可能包含一个没有用户的额外数组元素。所以 JSON 可能看起来像：

```
[{"user":{"avatar_small_url":"foo","first_name":"bar"}},
 {"user":{"avatar_small_url":"bar","first_name":"foo"}},
 {"something_other_than_user":9000}] 
```

看看最后一个数组元素如何没有“用户”。如果您有权访问服务器代码，您可能需要修改它以便始终有一个用户，或者您可以修改您的 Javascript 以便在用户字段不存在时提前退出，例如：`if(typeof item.user == 'undefined') return;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:01:00.603

听起来像 item.user 没有定义，或者 item 没有定义。你检查过物品的价值吗？我认为您期望它不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T07:23:09.163

在获取使用 if 条件检查该数组中是否存在键之前，如下所示

```
if( key in User)
{
    User[key]
} 
```

# javascript - 在 IE9 中不通过 JavaScript 调用输入按钮单击

> ID：10455267
> 
> 赞同：2
> 
> 时间：2012-05-04T19:52:25.283
> 
> 标签：javascript, jquery, internet-explorer-9

我正在使用 MVC 3、javascript 和 jQuery。

我有一个隐藏按钮，需要从 javascript 调用 click() 函数。这适用于除 IE9 之外的所有浏览器。

```
$('#fakeSubmitBt').click(function () {
    $('#fileUplSubmitBt').click();
}); 
```

在这里，fileUplSubmitBt 是隐藏按钮，而 fakeSubmitBt 是我需要单击的可见按钮。我注意到如果打三遍

```
$('#fileUplSubmitBt').click(); 
```

然后提交表单，但在后端无法识别表单的元素。

更新：感谢 Ricardo 和 Jay 给出的提示，我尝试使用 trigger('click') 但这条路径也失败了。

在下面我发布了让我感到羞耻的代码（它是使用 Razor 的 MVC3）：

```
 <script type="text/javascript">

function s2cPanelReady() {
    $('#fakeBrowseBt').click(function () {
        $('#fileUplRadio').prop("checked", true);
        $('#gravatarRadio').prop('checked', false);
        $('#realFileUpload').click();
    });
    $('#fakeSubmitBt').click(function () {
        if ($('#gravatarRadio').prop("checked")) {
            $('#grvatarSubmitBt').click();
        } else if ($('#fileUplRadio').prop("checked")) {
            $('#fileUplSubmitBt').trigger('click');
        }
    });
}
    </script>
    <div class="inputForm">

<div class="inputField">
    <div class="userPicLargeFrame">
        <img src="/Images/Get?id=@Model.ID&size=40" class="userPicLarge" />
    </div>
</div>
@using (Html.BeginForm("ChangePicture", "User"))
{  
    <div class="inputField">
        <input type="radio" id="gravatarRadio"  />
        <span class="inputLabel">Gravatar:</span>
        @Html.EditorFor(model => model.Preferences.GravatarEmail)
        @Html.ValidationMessageFor(model => model.Preferences.GravatarEmail)
    </div>

    <input id="grvatarSubmitBt" type="submit" value="Save Pic" style="display:none;" />
}

@using (Html.BeginForm("UploadPicture", "User", FormMethod.Post, new { encType = "multipart/form-data", name = "uplPicForm" }))
{             
    <div class="inputField">
        <input type="radio" id="fileUplRadio" />
        <span class="inputLabel">Save your own pic:</span>
        <span class="inputLabel">
            <span style="display:inline-block; position:relative;">
                <input type="file" id="realFileUpload" name="fileUpload" style="position:relative; opacity:0; -moz-opacity:0 ;" />
                <span style="display:inline-block; position:absolute; top:0px; left:0px;">
                    <input id="fakePathBox" type="text" value="" readonly />
                    <input id="fakeBrowseBt" type="button" value="..."/>
                </span>
            </span>
        </span>

        <input id="fileUplSubmitBt" type="submit" name="submit" value="Upload" style="display:none;" />
    </div>
     }
    <div class="inputField">
        <span class="inputLabel">
            <input id="fakeSubmitBt" type="button" value="Submit" class="s2cButton" />
        </span>
    </div>
</div> 
```

更新 N.2：我尝试删除所有 javascript 内容，并简单地将文件上传 HTML 标记与一个简单的提交按钮放在一起：在这种情况下，在 IE9 上我也无法提交表单！

有时它会运行，有时它不会在第一次点击时触发，而只会在第二次点击时触发（在这种情况下，提交的表单没有获得选定的文件，因此服务器端会导致错误......），有时它根本不会触发提交按钮，无论我点击多少次。

这个问题开始让我抓狂......

还有什么提示吗？

非常感谢你！

最好的

盖尔西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:18:59.400

我遇到了类似的问题，最后只是将按钮转换为锚（`<a>`）并调用 jquery-ui 函数 $.button()

**注意：***jquery ui*是必需的[http://jqueryui.com/](http://jqueryui.com/)

这样，链接仍然看起来像一个按钮，并且 $.click() 事件有效。

html

```
<div class="input">
    <a href="#" id="emulate-button">Submit</a>
</div> 
```

jQuery

```
$("#emulate-button").button();

//Set event when clicked
$("#emulate-button").click(function () {
    //.... your logic here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:00:59.587

就像里卡多说的，你需要使用触发器：http: [//jsfiddle.net/5hgsw/1/](http://jsfiddle.net/5hgsW/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:02:39.930

如果`$('#fileUplSubmitBt').click`事件未在 JQuery 中定义，则`.click()`触发器可能不起作用。

将`$('#fileUplSubmitBt').click`事件中的所有内容放在 a`function`中，然后将其绑定到`$('#fakeSubmitBt').click`and`$('#fileUplSubmitBt').click`事件中。

# java - Java 打印：创建具有最小可接受边距的 PageFormat

> ID：10455268
> 
> 赞同：9
> 
> 时间：2012-05-04T19:52:28.153
> 
> 标签：java, printing

我试图在打印时使 PageFormat 正确。下面是一个显示我的困境的示例程序：使用打印作业中的默认 PageFormat创建对象时，得到的结果`printJob.setPrintable(printable)`与使用时得到的结果不同。`printJob.setPageable(book)``Book`

当我运行它时，单击“打印”，然后单击“使用 Book 打印”，我会看到以下控制台输出：

```
doPrint(false)
printing on 612.000000x792.000000 paper, imageable area=588.960000x768.960000
printing on 612.000000x792.000000 paper, imageable area=588.960000x768.960000
printing on 612.000000x792.000000 paper, imageable area=588.960000x768.960000
doPrint(true)
printing on 612.000000x792.000000 paper, imageable area=468.000000x648.000000
printing on 612.000000x792.000000 paper, imageable area=468.000000x648.000000 
```

是什么赋予了？使用时的默认页面格式`Book`很糟糕，并且在页面的每一侧使用 1" 边距；“真实”页面格式每边只需要大约 1/6" 边距。

这里的示例程序：

```
package com.example.printing;

import java.awt.BasicStroke;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.geom.Rectangle2D;
import java.awt.print.Book;
import java.awt.print.PageFormat;
import java.awt.print.Paper;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;

import javax.swing.AbstractAction;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class PrintRectangles extends JFrame 
{
    static final int Nrectangles = 3;

    static class RectangleThingy extends JPanel implements Printable
    {
        @Override public int print(Graphics graphics, 
                PageFormat pageFormat, 
                int pageIndex)
            throws PrinterException 
        {
            describePageFormat(pageFormat);
            if (pageIndex > 0) {
                return(NO_SUCH_PAGE);
            } 
            else {
                Graphics2D g2d = (Graphics2D)graphics;
                g2d.translate(pageFormat.getImageableX(), 
                        pageFormat.getImageableY());
                double w = pageFormat.getImageableWidth();
                double h = pageFormat.getImageableHeight();
                final int N = (Nrectangles - 1) / 2;
                final double spacing = 7.2; // 1/10 inch 
                g2d.setStroke(new BasicStroke(0.1f));
                for (int i = -N; i <= N; ++i)
                {
                    double dx = i*spacing;
                    Rectangle2D r = new Rectangle2D.Double(
                            dx, dx, w-2*dx, h-2*dx
                            );
                    g2d.draw(r);
                }
                Rectangle2D rthick = new Rectangle2D.Double(
                        0, 0, w, h
                        );
                g2d.setStroke(new BasicStroke(1.0f));
                g2d.draw(rthick);
                return(PAGE_EXISTS);
            }
        }

        private void describePageFormat(PageFormat pageFormat) {
            System.out.println(String.format("printing on %fx%f paper, imageable area=%fx%f",
                    pageFormat.getWidth(),
                    pageFormat.getHeight(),
                    pageFormat.getImageableWidth(),
                    pageFormat.getImageableHeight()
                    ));

        }
    }

    static private class PrintPreviewPanel extends JPanel
    {
        final private Printable p;
        final private PageFormat pageFormat;
        public PrintPreviewPanel(Printable p, PageFormat pf)
        {
            this.p = p;
            this.pageFormat = pf;
        }
        @Override public Dimension getPreferredSize() {
            return new Dimension((int)this.pageFormat.getWidth(), 
                    (int)this.pageFormat.getHeight());
        }
        @Override protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            try {
                p.print(g, this.pageFormat, 0);
            } catch (PrinterException e) {
                e.printStackTrace();
            }
        }       
    }

    public PrintRectangles(String title) {
        super(title);
        JPanel panel = new JPanel();
        setContentPane(panel);
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        JButton printButton = new JButton("Print");
        JButton printUsingBookButton = new JButton("Print using Book");
        JButton printPreviewButton = new JButton("Print preview");
        panel.add(printButton);
        panel.add(printUsingBookButton);
        panel.add(printPreviewButton);
        printButton.addActionListener(new AbstractAction("print") {
            @Override public void actionPerformed(ActionEvent e) {
                doPrint(false);
            }           
        });
        printUsingBookButton.addActionListener(new AbstractAction("printUsingBook") {
            @Override public void actionPerformed(ActionEvent e) {
                doPrint(true);
            }           
        });
        printPreviewButton.addActionListener(new AbstractAction("printPreview") {
            @Override public void actionPerformed(ActionEvent e) {
                doPrintPreview();
            }           
        });
    }

    protected void doPrint(boolean useBook) {
        RectangleThingy rectangleThingy = new RectangleThingy();
        System.out.println("doPrint("+useBook+")");
        try
        {
            PrinterJob printJob = PrinterJob.getPrinterJob();
            PageFormat pageFormat = printJob.getPageFormat(null);
            if (useBook)
            {
                Book book = new Book();
                book.append(rectangleThingy, pageFormat);               
                printJob.setPageable(book);
            }
            else
            {
                printJob.setPrintable(rectangleThingy);             
            }
            if (printJob.printDialog())
                printJob.print();
        } 
        catch(PrinterException pe) {
            System.out.println("Error printing: " + pe);
        }
    }

    protected void doPrintPreview() {
        RectangleThingy rt = new RectangleThingy();
        JFrame frame = new JFrame("print preview");

        // hack for now -- how do we get this from the printer?
        Paper paper = new Paper();
        double dotsperinch = 72;
        double margin = 0.125*dotsperinch;
        double w = 8.5*dotsperinch;
        double h = 11*dotsperinch;
        paper.setImageableArea(margin, margin, w-2*margin, h-2*margin);
        paper.setSize(w, h);
        PageFormat pfmt = new PageFormat();
        pfmt.setPaper(paper);
        frame.setContentPane(new PrintPreviewPanel(rt, pfmt));
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        new PrintRectangles("PrintRectangles").start();
    }

    private void start() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        pack();
        setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T15:26:25.447

唔。在尝试了许多徒劳的努力之后，看起来将页面设置为零边距，然后调用[`PrinterJob.validatePage()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/print/PrinterJob.html#validatePage%28java.awt.print.PageFormat%29)似乎是我可以获得有效的最小边距 PageFormat 的唯一方法：

```
static private PageFormat getMinimumMarginPageFormat(PrinterJob printJob) {
    PageFormat pf0 = printJob.defaultPage();
    PageFormat pf1 = (PageFormat) pf0.clone();
    Paper p = pf0.getPaper();
    p.setImageableArea(0, 0,pf0.getWidth(), pf0.getHeight());
    pf1.setPaper(p);
    PageFormat pf2 = printJob.validatePage(pf1);
    return pf2;     
} 
```

然后我可以更改`doPrint()`为：

```
protected void doPrint(boolean useBook) {
    RectangleThingy rectangleThingy = new RectangleThingy();
    System.out.println("doPrint("+useBook+")");
    try
    {
        PrinterJob printJob = PrinterJob.getPrinterJob();
        if (useBook)
        {
            Book book = new Book();
            book.append(rectangleThingy, getMinimumMarginPageFormat(printJob));
            printJob.setPageable(book);
        }
        else
        {
            printJob.setPrintable(rectangleThingy);        
        }
        if (printJob.printDialog())
            printJob.print();
    } 
    catch(PrinterException pe) {
        System.out.println("Error printing: " + pe);
    }
} 
```

# c# - 没有等号的 Linq 连接

> ID：10455271
> 
> 赞同：11
> 
> 时间：2012-05-04T19:52:40.577
> 
> 标签：c#, linq, join

我有一个矩形列表和一个点​​列表。我想构建一个 LINQ 查询，它将点列表与其对应的矩形相匹配。像这样的东西：

```
// Does not compile
var matches = from rect in rectangles
              join point in points on rect.Contains(point)
              select new { rect, point }; 
```

如何使用 LINQ 完成这样的事情？

编辑：

我的列表大小相同 - 我有一个点与一个矩形匹配，并且矩形不重叠。

但是，问题的重点并不是解决这一特定问题。一般来说，我感兴趣的是如何在任何条件下加入两个列表，而不是简单地“等于”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T20:07:00.780

您可以使用多个 from 子句来实现连接

```
 var matches = from p in points
               from r in rectangles
               where r.Contains(p)
               select new { r, p }; 
```

多个 from 子句比连接语法更灵活（[参见 10 个 LINQ 神话中的 5 个](http://www.albahari.com/nutshell/10linqmyths.aspx)）。你只需要学习这个，所有的连接都会很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T20:04:40.143

您可以使用[Enumerable.ToLookup](http://msdn.microsoft.com/en-us/library/bb549073.aspx)为每个矩形创建一个查找表：

```
var lookup = points.ToLookup(p => rectangles.First(r => r.Contains(point))); 
```

使用它类似于分组查询：

```
foreach(var group in lookup)
{
    Console.WriteLine("Rectangle {0} contains:", group.Key);
    foreach(var point in group)
        Console.WriteLine("    {0}", point);
} 
```

附带说明 - 此查询本质上是二次的，并且可能在非常大的数据集上表现不佳。如果您需要对许多点和/或许多矩形执行此操作，您可能希望研究空间数据结构以便更快地查找。但是，在这种情况下，这可能不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:08:15.170

您是否尝试过仅使用 where 语句，而不是加入它们：

```
var matches = from rectangle in rectangles
              from point in points
              where rectangle.Contains(point)
              select new { rectangle, point }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T20:17:10.550

有两种方法可以得到你想要的。

```
points.Select(p => new { Point = p, Rectangles = rectangles.Where(r => r.Contains(p) }); 
```

这迎合了一个点可能在许多矩形中的情况。

```
points.Select(p => new { Point = p, Rectangle = rectangles.First(r => r.Contains(p) }); 
```

这迎合了一个点正好在一个矩形中的情况。

第二种情况应该最适合您的场景。

# objective-c - 如果我编写了一个自定义属性 getter 方法，如果 getter 通过访问另一个对象的值返回一个值，KVO 还会运行吗？

> ID：10455272
> 
> 赞同：7
> 
> 时间：2012-05-04T19:52:40.733
> 
> 标签：objective-c, ios, key-value-observing

假设我有一个带有只读属性的类。

```
//MyClass.h
@interface MyClass

@property (readonly) NSInteger MonitorMe;

@end 
```

现在，让我们假设该属性的目的是监视另一个对象内另一个属性的变化，并且当“观察”该属性时，它通过检查来自另一个外部对象的值来返回派生值。

```
//MyClass.m
@implementation

@synthesize MonitorMe;
-(NSInteger) getMonitorMe
{
    return globalStaticClass.OtherNSInteger;
}

... Inits and Methods ...
@end 
```

现在，让我们假设在某些地方我创建了一个`MyClass`对象的实例，并且我想在该`MonitorMe`属性上添加一个 KVO 观察者。

```
//AnotherClass.m
@implementation AnotherClass.m

    @synthesize instanceOfMyClass;

    -(id)init
    {
        ...
        instanceOfMyMethod = [MyClass init];
            [MyClass addObserver: self 
                  forKeyPath: @"MonitorMe" 
                     options: NSKeyValuObservingOptionNew
                     context: nil];
        ...
    } 
```

我的问题是，由于该`MonitorMe`属性只监视外部对象中值的变化，所以观察者方法会在值`globalStaticClass.OtherNSInteger`变化时执行吗？另外，如果答案是肯定的，这是**如何完成的？**

如果这行得通，对我来说这似乎是编译器巫术。

**笔记**

我不认为这有什么区别，但我正在使用 ARC 来实现这个实现，并且我正在为 iOS 设备进行编译。对于这类问题，我怀疑 OS X 和 iOS 之间存在编译差异，但如果重要的话，我有一个 iOS 项目需要上面概述的这种实现。

此外，上面概述的示例是我实际需求的一个非常基本的设置。可以说我可以/应该向值添加观察`globalStaticClass.OtherNSInteger`值而不是只读属性，`MonitorMe`. 在我的实际情况下，这个答案是不够的，因为我的只读属性比我的例子复杂得多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T20:13:07.520

> `globalStaticClass.OtherNSInteger`当值发生变化时，观察者方法会执行吗？

不，但是您*可以*通过`+keyPathsForValuesAffectingMonitorMe`（或更通用的`+keyPathsForValuesAffectingValueForKey:`，如果“globalStaticClass”实际上是 MyClass 的属性，则可以做到这一点。请参阅KVO 指南中的[“注册依赖键”](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/Articles/KVODependentKeys.html#//apple_ref/doc/uid/20002179-BAJEAIEE)。

这是一个快速模型：

```
#import <Foundation/Foundation.h>

@interface Monitored : NSObject 
@property NSInteger otherInteger;
@end

@implementation Monitored
@synthesize otherInteger;
@end

@interface Container : NSObject 
@property (readonly) NSInteger monitorMe;
@property (strong) Monitored * theMonitored;

- (void)changeMonitoredInteger;
@end

@implementation Container

@synthesize theMonitored;

+ (NSSet *)keyPathsForValuesAffectingMonitorMe {

    return [NSSet setWithObject:@"theMonitored.otherInteger"];
}

- (id) init {

    self = [super init];
    if( !self ) return nil;

    theMonitored = [[Monitored alloc] init];
    [theMonitored setOtherInteger:25];

    return self;
}

- (NSInteger)monitorMe
{
    return [[self theMonitored] otherInteger];
}

- (void)changeMonitoredInteger {

    [[self theMonitored] setOtherInteger:arc4random()];
}

@end

@interface Observer : NSObject 
@end

@implementation Observer

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    NSLog(@"Observing change in: %@ %@", keyPath, object);
}

@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        Observer * o = [[Observer alloc] init];
        Container * c = [[Container alloc] init];

        [c addObserver:o
            forKeyPath:@"monitorMe"
               options:NSKeyValueObservingOptionNew
               context:NULL];

        [c changeMonitoredInteger];
        [c changeMonitoredInteger];

    }
    return 0;
} 
```

PS Cocoa 风格注释：属性/变量应该有小写首字母，并且（由于 ARC，这实际上现在更重要）不要以“get”开头命名访问器方法——这在 Cocoa 中具有特定含义，涉及传入缓冲区并通过引用获取数据。

# c# - 地铁应用倒计时

> ID：10455275
> 
> 赞同：2
> 
> 时间：2012-05-04T19:52:47.537
> 
> 标签：c#, windows-runtime, visual-studio-2012, countdowntimer, winrt-xaml

我是 Metro Style Development 的初学者，我尝试制作一个需要计时器的小游戏，从 10 倒计时到 0。但是在这个 Visual Studio 中没有 Timer 组件，并且 DispatcherTimer 没有映射到 xmlns。

我尝试使用具有此字段“TicksPerSecond”的 TimeSpan 但此示例无法帮助我制作倒数计时器：http: [//msdn.microsoft.com/en-us/library/system.timespan.tickspersecond.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.tickspersecond.aspx)

TimeSpan 也有这种方法“FromSeconds”，我也不能将这个方法用于我的倒数计时器：http: [//msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.fromseconds.aspx)

我也在stackoverflow上阅读了这个问题： [如何在Metro Style App中实现计时器，](https://stackoverflow.com/questions/10410072/how-to-implement-a-timer-in-metro-app) 但这没有用。

我可以为这个倒数计时器做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T14:02:03.060

[WinRT XAML 工具包](http://bit.ly/WinRTXamlToolkit)中有一个[CountdownControl](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/13069#228449)也可以为您提供帮助 - 它基本上是使用在事件之间花费 1 秒的动画。另一种选择是使用 async/await 关键字 - 您基本上可以说 await Task.Delay(1000) 等待一秒钟并在循环中调用它以倒计时秒数。这也将是便携式的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:58:14.167

我不确定你所说的 xmlns 是什么意思，你想在 XAML中使用[DispatcherTimer吗？](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dispatchertimer.aspx)好的，这是不可能的，但这没什么大不了的，只需从您的代码中使用它即可。

在我的应用程序中，我大量使用[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)。Rx v2.0 Beta 支持 winrt，因此计时器问题可以通过以下方式解决（同样在后面的代码中，而不是在 XAML 中）：

```
Observable.Interval(TimeSpan.FromSeconds(1)).Take(10).ForEachAsync(x =>
{
    Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => 
    {
        new MessageDialog("seconds: " + (10-x), "timer").ShowAsync();
    });
}); 
```

这种方法的一大优点 - 您的代码将在框架之间更便携。希望这可以帮助。

# backbone.js - 获取时似乎没有触发“添加”事件

> ID：10455276
> 
> 赞同：2
> 
> 时间：2012-05-04T19:52:52.820
> 
> 标签：backbone.js

我开始使用 Backbone.js，但似乎无法让最简单的概念验证工作。我有以下代码：

```
$(function() {

    var Contact = Backbone.Model.extend({

        url: 'contacts.txt'

    });

    var ContactList = Backbone.Collection.extend({

        model: Contact,
        url: 'contacts.txt'

    });

    var Contacts = new ContactList();

    var ContactView = Backbone.View.extend({

        tagName: 'li',

        template: _.template($('#contact-template').html()),

        initialize: function() {
            _.bindAll(this);
        },

        render: function() {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }

    });

    var AppView = Backbone.View.extend({

        el: '#contacts',

        initialize: function() {
            Contacts.bind('add', this.addOne, this);
            Contacts.fetch();
        },

        addOne: function(Contact) {
            var view = new ContactView({model: Contact});
            this.$el.append(view.render().el);
        }

    });

    var app = new AppView();

}); 
```

该文件`contacts.txt`包含一个简单的 JSON 结构，根据 Chrome 可以正常加载：

```
[{"from_acct_id": 5, "ct": 0, "from_display_nm": "Name 1", "to_acct_id": 1},
 {"from_acct_id": 3, "ct": 1, "from_display_nm": "Name 2", "to_acct_id": 1},
 {"from_acct_id": 2, "ct": 0, "from_display_nm": "Name 3", "to_acct_id": 1},
 {"from_acct_id": 4, "ct": 1, "from_display_nm": "Name 4", "to_acct_id": 1}] 
```

无论出于何种原因，`addOne()`绑定到`add`事件的函数`AppView`永远不会被调用。可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:59:27.393

Backbone 集合的 fetch 调用将触发重置事件。改为绑定重置。

[http://documentcloud.github.com/backbone/#Collection-fetch](http://documentcloud.github.com/backbone/#Collection-fetch)

# ios - 在什么情况下会调用那些 Facebook IOS FBSessionDelegate 方法？

> ID：10455277
> 
> 赞同：3
> 
> 时间：2012-05-04T19:52:56.177
> 
> 标签：ios, facebook, fbconnect

我很清楚，如果用户授予或拒绝权限，则会在登录时调用这些：

```
- (void)fbDidLogin;
- (void)fbDidNotLogin:(BOOL)cancelled; 
```

但我想知道何时可以调用以下 FBSessionDelegate 方法：

```
- (void)fbDidExtendToken:(NSString*)accessToken expiresAt:(NSDate*)expiresAt;
- (void)fbDidLogout;
- (void)fbSessionInvalidated; 
```

文档说：

```
//Called after the access token was extended.
- (void)fbDidExtendToken:(NSString*)accessToken expiresAt:(NSDate*)expiresAt;

//Called when the user logged out. 
- (void)fbDidLogout;

//Called when the current session has expired.
- (void)fbSessionInvalidated; 
```

现在什么时候会发生这样的事情？当我打电话给以下？

```
[Facebook authorize:nil]; 
```

我没有机会收到 fbDidLogout 回调，对吗？

也许如果用户通过 Facebook 应用程序从他的 Facebook 帐户中删除我的应用程序，是否会调用此方法？不，因为在这种情况下我的应用程序无法打开..

**...那么在什么情况下会调用这些？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:22:22.203

我想我自己找到了...

**这个：**

```
- (void)fbDidExtendToken:(NSString*)accessToken expiresAt:(NSDate*)expiresAt; 
```

调用时可以调用：

```
[facebook extendAccessTokenIfNeeded]; 
```

**这个：**

```
- (void) fbDidLogout; 
```

当您调用时被调用

```
[facebook logout] //(of course..) 
```

**最后一个：**

```
- (void)fbSessionInvalidated; 
```

当您尝试使用过期会话令牌向 Facebook 发送 http 请求时调用 Get。

我在 Facebook SDK 头文件[Facebook.m中找到了它](https://github.com/facebook/facebook-ios-sdk/blob/master/src/Facebook.m)

我会把问题留给任何寻找答案的人:)

# mysql - MySQL join 操作以获取有关帖子的信息以及撰写 该帖子的用户名

> ID：10455280
> 
> 赞同：0
> 
> 时间：2012-05-04T19:53:10.730
> 
> 标签：mysql, join

我不太确定如何实现这一目标。联合查询对我来说仍然有点令人费解。

我有以下表格：

```
users: id, name, password
posts: id, user_id, title, content, date 
```

我想得到这样的结果：

```
title, content, user, date 
```

我知道我可以从这样的表中获取所有数据：

```
SELECT * FROM users, posts; 
```

而不仅仅是使用我想要的列中的数据，但我一直试图使这个更清洁，但没有成功。非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:54:50.963

您应该使用连接和表别名

```
select p.title, p.content, u.name, p.date
from posts p
join users u on u.id=p.user_id 
```

如果您不想使用连接语法，您可以对笛卡尔积执行相同的操作并使用 where 语句。

```
select p.title, p.content, u.name, p.date
from posts p, users u
where u.id=p.user_id 
```

编辑：修正了一些错别字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:57:07.850

试试这个

```
select title, content, user, date
from users u
inner join posts p
on u.id = p.user_id 
```

# ruby-on-rails - 在 Rails 中获取关联记录

> ID：10455285
> 
> 赞同：0
> 
> 时间：2012-05-04T19:53:47.293
> 
> 标签：ruby-on-rails

这应该很容易。

我有@restaurants，其中包含来自餐厅模型的选定数量的记录。每个餐厅都有一个或多个位置。我想将与@restaurants 中的所有餐厅对应的所有位置存储在一个实例变量中。

这不起作用：

```
@locations = @restaurants.locations 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:02:07.327

```
@locations = Location.where(restaurant_id: @restaurants).all 
```

# jquery - jQuery需要在第一页或打开页调用data-rel="dialog"

> ID：10455286
> 
> 赞同：0
> 
> 时间：2012-05-04T19:53:54.350
> 
> 标签：jquery, jquery-mobile, modal-dialog, jquery-ui-dialog, mobile-browser

我是 JQuery 的新手，我发现我可以将 JQuery 用于移动 Web 浏览器开发。我正在为浏览器做一个简单的弹出页面。我浏览了一些文档并得到了答案，我可以将 data-rel="dialog" 用于页面等模式窗口。但我希望像窗口一样的模态作为我的打开页面。(第 1 页) 这是我的代码。请帮我。我是新手。谢谢你。

```
 <body>
<!-- This is the first page -->
<section id="firstpage" data-rel="dialog" data-role="page">
    <header data-role="header">
        <h1>Page Content Header</h1>
    </header>
    <div data-role="content">
    <p>This is page 1</p>
    <p><a href="#secondpage" data-rel="dialog">Display Dialog</a></p>
    </div>

</section>

<!-- This page will be displayed as a dialog -->
<div id="secondpage" data-rel="dialog" data-role="page">

     <div data-role="content">
            <div>
                <h1 class="text-align-center">
                    <b>
                        Apple
                    </b>
                </h1>
            </div>

            <a data-role="button" data-transition="none" data-theme="b" href="http://m.apple.com">
                Go
            </a>
        </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:35:56.250

将数据角色更改为对话框。然后你可以摆脱 data-rel 属性。IE

```
<section id="firstpage" data-role="dialog">
    <header data-role="header">
        <h1>Page Content Header</h1>
    </header>
    <div data-role="content">
        <p>This is page 1</p>
        <p><a href="#secondpage" data-rel="dialog">Display Dialog</a></p>
    </div>

</section> 
```

# java - 解析文本文件以填充 HashMap

> ID：10455289
> 
> 赞同：-3
> 
> 时间：2012-05-04T19:53:56.607
> 
> 标签：java, file, parsing, hashmap, text-files

```
/**
 * @(#)b.java
 *
 *
 * @author
 * @version 1.00 2012/5/4
 */
import java.util.*;
import java.io.*;
import java.*;

public class b {

static void lireBddParcs(String nomFichier) throws IOException
{
    LinkedHashMap parcMap = new LinkedHashMap<Parc,Collection<Manege>> ();

    int n = 0;
    boolean existeFichier = true;

    FileReader fr = null;

    try
    {
        fr = new FileReader (nomFichier);
    }

    catch(java.io.FileNotFoundException erreur)
    {
        System.out.println("Probleme rencontree a l'ouverture du fichier" + nomFichier);
        existeFichier = false;
    }

    if (existeFichier)
    {
        BufferedReader entree = new BufferedReader(fr);
        boolean finFichier = false;

              while(!finFichier)
              {
               String[] line = entree.readLine().split("/t");;
               Parc p = new Parc(line[0], line[1], line[2]);

                  if (line == null)
                  {
                      finFichier = true ;
                  }

                  else
                  {
                      parcMap.put(p, null);
                  }

              }
                  entree.close();

    }

}

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
      lireBddParcs("parcs.txt");

    }
} 
```

这是文本文件的内容

```
Great America   Chicago Illinois
Magic mountain  Los Ageles  Californie
Six Flags over Georgia  Atlanta Georgie
Darien Lake Buffalo New York
La Ronde    Montreal    Quebec
The Great Escape    Lake Georges    New York
Six Flags New Orleans   New Orleans Louisiane
Elitch Gardens  Denver  Colorado
Six Flags over Texas    Arlington   Texas
Six Flags New England   Springfield Massachusetts
Six Flags America   Washington  D.C.
Great Adventure Jackson New Jersey 
```

这是我得到的错误：

```
error: unreported exception IOException; must be caught or declared to be thrown 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:59:00.287

您的方法`lireBddParcs`被声明为抛出一个`IOException`，因此您的代码无法编译，因为您的`main`方法没有处理它。出于您的目的，您可能会发现将其添加`throws`到`main`方法中最简单：

```
public static void main(String[] args) throws IOException { ... } 
```

或者，您可以`lireBddParcs`用`try/catch`语句包围调用并在某处记录异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:59:39.850

`java.io.IOException`是一个*检查*异常，这意味着如果你调用任何声明 throws 的方法`IOException`，你必须要么捕获异常，要么在你的方法定义中声明它。

希望本教程可以帮助：[http ://docs.oracle.com/javase/tutorial/essential/io/](http://docs.oracle.com/javase/tutorial/essential/io/)

# vb.net - 通知对另一个类或对象的更改

> ID：10455290
> 
> 赞同：2
> 
> 时间：2012-05-04T19:53:56.813
> 
> 标签：vb.net, inotifypropertychanged

我在一个小修复中，我有一个如下的课程。

```
Public Class Bill
    Public prime As BillPrime
    Public items As System.Collections.ObjectModel.ObservableCollection(Of ItemDetails)
    Public status As New BillStatus
    Public Sub New()
        prime = New BillPrime
        items = New System.Collections.ObjectModel.ObservableCollection(Of ItemDetails)
        status = New BillStatus
    End Sub
End Class 
```

`prime`当. _ `ItemDetails`_`items`

你能帮我解决一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:39:59.627

尝试使用 a`BindingList(of T)`代替，然后您可以侦听更改事件：

```
Imports System.ComponentModel

Public Class Bill
  Public prime As BillPrime
  Public WithEvents items As BindingList(Of ItemDetails)
  Public status As New BillStatus
  Public Sub New()
    prime = New BillPrime
    items = New BindingList(Of ItemDetails)
    status = New BillStatus
  End Sub

  Public Sub items_ListChanged(ByVal sender As Object, ByVal e As ListChangedEventArgs)  Handles items.ListChanged
    prime.X = "something"
  End Sub
End Class 
```

这将需要您的类来实现`INotifyPropertyChanged`：

```
Public Class ItemDetails
  Implements INotifyPropertyChanged

  Public Event PropertyChanged(ByVal sender As Object, ByVal e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged

  Private _DetailOne As String

  Property DetailOne() As String
    Get
      Return _DetailOne
    End Get
    Set(ByVal value As String)
      _DetailOne = value
      RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("DetailOne"))
    End Set
  End Property

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:36:36.060

每当其任何属性发生更改时，ItemDetails 类都需要引发事件。我建议在 ItemDetails 类上实现 INotifyPropertyChanged 接口，但您可以实现自己的事件。然后，您需要将事件处理程序添加到每个 ItemDetails.PropertyChanged 事件，因为它已添加到列表中，并从每个项目中删除处理程序，因为它已从列表中删除。例如：

```
Public Class Bill
    Public prime As BillPrime
    Public items As System.Collections.ObjectModel.ObservableCollection(Of ItemDetails)
    Public status As New BillStatus

    Public Sub New()
        prime = New BillPrime
        items = New System.Collections.ObjectModel.ObservableCollection(Of ItemDetails)
        AddHandler items.CollectionChanged, AddressOf items_CollectionChanged
        status = New BillStatus
    End Sub

    Private Sub items_CollectionChanged(sender As Object, e As NotifyCollectionChangedEventArgs)
        For Each i as ItemDetails in e.NewItems
            AddHandler i.PropertyChanged, AddressOf item_PropertyChanged
        Next
        For Each i as ItemDetails in e.OldItems
            RemoveHandler i.PropertyChanged, AddressOf item_PropertyChanged
        Next
    End Sub

    Private Sub item_PropertyChanged(sender As Object, e As PropertyChangedEventArgs)
        'Do work
    End Sub
End Class 
```

# jpa - 使用 JPA 从带有列表成员的查询中加载对象的最佳实践

> ID：10455298
> 
> 赞同：0
> 
> 时间：2012-05-04T19:54:32.303
> 
> 标签：jpa, jpql, pojo

我开始使用 JPA，我想知道实现这样的最佳方法：我需要实现一个返回脚本列表的服务，并且每个脚本都有一个参数列表。我简化了查询，但它是这样的：

```
(SELECT 
    p.DESC 
FROM 
    INPUT_PARAMETERS p
    INNER JOIN SCRIPT_PARAMS sp ON p.PARAM_ID = sc.PARAM_I
    INNER JOIN SCRIPT s ON s.SCRIPT_ID = sc.SCRIPT_ID
WHERE
    s.NAME = 'name')
UNION
(SELECT 
    p.DESC 
FROM 
    OUPUT_PARAMETERS p
    INNER JOIN SCRIPT_PARAMS sp ON p.PARAM_ID = sc.PARAM_I
    INNER JOIN SCRIPT s ON s.SCRIPT_ID = sc.SCRIPT_ID
WHERE
    s.NAME = 'name') 
```

我想返回一个类似于以下内容的 POJO 对象列表：

```
public class Script {
    private String name;
    private List<String> params;
    public Script(){}
    public String getName()
    {
        return name;
    }
    public void setName(String pName)
    {
        name = pName;
    }
    public List<String> getParams()
    {
        return params;
    }
    public void setParams(List<String> pParams)
    {
        params = pParams;
    }   
} 
```

我想知道从查询中加载 POJO 对象的最佳方法是什么。最好是构建一个 JPQL 查询，还是可以使用一个本地命名查询，我是否需要获取一个 object[] 并手动构建我的 POJO，或者我可以使用 JPA 从查询中加载对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:40:59.893

**您只能手动构造 Script 实例**。使用 JPQL 查询时，原因是[构造函数表达式](http://docs.oracle.com/cd/E17904_01/apirefs.1111/e13946/ejb3_langref.html#ejb3_langref_constructor)不能以 List 作为参数。此外，JPQL 没有工会。

同样使用 SQL 查询，您不能直接构造脚本，因为结果只能是标量或实体。

# python - 在Python中解析具有可变结构的json文件

> ID：10455301
> 
> 赞同：0
> 
> 时间：2012-05-04T19:54:52.787
> 
> 标签：python, json, api, parsing

我正在使用 Yahoo Placemaker API，它根据输入提供不同的 json 结构。简单的 json 文件如下所示：

```
{
   'document':{
        'itemDetails':{
            'id'='0'
            'prop1':'1',
            'prop2':'2'
         }
        'other':{
            'propA':'A',
            'propB':'B'
        }
    }
} 
```

当我想访问 itemDetails 时，我只需编写 json_file['document']['itemDetails']。

但是当我得到更复杂的响应时，例如

```
{
   'document':{
      '1':{
         'itemDetails':{
            'id'='1'
            'prop1':'1',
            'prop2':'2'
         }
      },
      '0':{
         'itemDetails':{
            'id'='0'
            'prop1':'1',
            'prop2':'2'
         },
      '2':{
         'itemDetails':{
            'id'='1'
            'prop1':'1',
            'prop2':'2'
         }
        'other':{
            'propA':'A',
            'propB':'B'
        }
    }
} 
```

该解决方案显然不起作用。

我使用 id、prop1 和 prop2 来创建对象。

在不编写 json_file['document']['0']['itemDetails'] 的情况下，在第二种情况下自动访问 itemDetails 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:06:49.323

如果我理解正确，您想遍历所有`json_file['document']['0']['itemDetails']`, `json_file['document']['1']['itemDetails']`, ...

如果是这样的话，那么：

```
item_details = {}
for key, value in json_file['document']:
    item_details[key] = value['itemDetails'] 
```

或者，单线：

`item_details = {k: v['itemDetails'] for k, v in json_file['document']}`

然后，您将以`item_details['0']`, `item_details['1']`, ...的形式访问它们

`int(key)`注意：您可以使用或取消 0 和 1 周围的单引号`int(k)`。

**编辑：** 如果您想无缝访问这两种情况（无论是一个结果还是多个），您可以检查：

```
if 'itemDetails' in json_file['document']:
    item_details = {'0': json_file['document']['itemDetails']}
else:
    item_details = {k: v['itemDetails'] for k, v in json_file['document'] if k != 'other'} 
```

然后循环遍历`item_details`字典。

# java - 在 OpenGL 中制作 2D 地形的问题

> ID：10455308
> 
> 赞同：1
> 
> 时间：2012-05-04T19:55:27.170
> 
> 标签：java, opengl, libgdx, terrain, vertex-array

前段时间我问过[这个问题](https://stackoverflow.com/questions/10422947/how-to-make-a-2d-terrain-with-opengl/10423627#10423627)，关于如何使用 opengl 顶点制作 2D 地形。我得到了一个很好的答案，但是在尝试时它没有画出任何东西，我不知道出了什么问题，或者如何解决它。

我现在有这个：

```
public class Terrain extends Actor {

Mesh mesh;
private final int LENGTH = 1500; //length of the whole terrain

public Terrain(int res) {

    Random r = new Random();

    //res (resolution) is the number of height-points 
    //minimum is 2, which will result in a box (under each height-point there is another vertex)
    if (res < 2)
        res = 2;

    mesh = new Mesh(VertexDataType.VertexArray, true, 2 * res, 50, new VertexAttribute(Usage.Position, 2, "a_position")); 

    float x = 0f;     //current position to put vertices
    float med = 100f; //starting y
    float y = med;

    float slopeWidth = (float) (LENGTH / ((float) (res - 1))); //horizontal distance between 2 heightpoints

    // VERTICES
    float[] tempVer = new float[2*2*res]; //hold vertices before setting them to the mesh
    int offset = 0; //offset to put it in tempVer

    for (int i = 0; i<res; i++) {

        tempVer[offset+0] = x;      tempVer[offset+1] = 0f; // below height
        tempVer[offset+2] = x;      tempVer[offset+3] = y;  // height

        //next position: 
        x += slopeWidth;
        y += (r.nextFloat() - 0.5f) * 50;
        offset +=4;
    }
    mesh.setVertices(tempVer);

    // INDICES
    short[] tempIn = new short[(res-1)*6];
    offset = 0;
    for (int i = 0; i<res; i+=2) {

        tempIn[offset + 0] = (short) (i);       // below height
        tempIn[offset + 1] = (short) (i + 2);   // below next height
        tempIn[offset + 2] = (short) (i + 1);   // height

        tempIn[offset + 3] = (short) (i + 1);   // height
        tempIn[offset + 4] = (short) (i + 2);   // below next height
        tempIn[offset + 5] = (short) (i + 3);   // next height

        offset+=6;
    }
}

@Override
public void draw(SpriteBatch batch, float delta) {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    mesh.render(GL10.GL_TRIANGLES);
} 
```

这是由 Libgdx 渲染的，它也提供了类 Mesh，但这并不真正相关，因为我相信它可以正常工作。我的问题在于顶点和索引的生成。我也不知道如何调试它，所以任何人都可以看看它，并帮助我找出为什么什么都没有渲染？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:47:30.973

一整天过去了，我已经尝试了一切来解决它，似乎我忘了实际*将**索引*设置为*mesh*。

```
mesh.setIndices(tempIn); 
```

一条缺失的线，数小时的痛苦……我是个白痴:)

# regex - 正则表达式在句末移动句点而不是缩写

> ID：10455313
> 
> 赞同：1
> 
> 时间：2012-05-04T19:55:56.143
> 
> 标签：regex, perl, pcre

寻找有关如何删除句子中的句点字符但不删除缩写中的句点的一些想法。例如

`"The N.J. turnpike is long. Today is a beautiful day."`

将改为：

`"The N.J. turnpike is long Today is a beautiful day"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T20:08:54.270

这是一个难题。[`Lingua::EN::Sentence`](http://search.cpan.org/perldoc?Lingua::EN::Sentence)做了四分之三的尝试来解决它。它了解美式英语中的常见缩写，并为您添加其他您知道的缩写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T20:14:48.970

正如其他人所说，这在一般情况下是一项非常困难的任务。如果你想了解更多，你应该从阅读更多关于“句子分割”或“句子边界消歧”的内容开始，这是将文本分成句子的任务。以下是一些帮助您入门的链接：

*   [http://en.wikipedia.org/wiki/Sentence_boundary_disambiguation](http://en.wikipedia.org/wiki/Sentence_boundary_disambiguation)
*   [http://en.wikipedia.org/wiki/Text_segmentation#Sentence_segmentation](http://en.wikipedia.org/wiki/Text_segmentation#Sentence_segmentation)
*   [http://www.robincamille.com/2012-02-18-nltk-sentence-tokenizer/](http://www.robincamille.com/2012-02-18-nltk-sentence-tokenizer/)
*   [http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html#sec-further-examples-of-supervised-classification](http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html#sec-further-examples-of-supervised-classification)
*   [http://nltk.googlecode.com/svn/trunk/doc/howto/tokenize.html#punkt-tokenizer](http://nltk.googlecode.com/svn/trunk/doc/howto/tokenize.html#punkt-tokenizer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:09:34.977

为什么要根据缩写删除句子末尾的句点？变大：删除所有点，或者不去！

# git - git-new-workdir：在工作树 A 中提交会导致树 B 中的虚假更改

> ID：10455315
> 
> 赞同：2
> 
> 时间：2012-05-04T19:56:03.827
> 
> 标签：git, git-worktree

我`git-new-workdir`曾经为一个 git 存储库拥有两棵工作树。这通常效果很好，但是如果在两个工作树中签出相同的分支，则在提交某些内容后我会出现有趣的行为：

*   我从干净的工作树和“master”开始。
*   我在工作树 A 中提交了一些东西。

结果：

*   工作树 A 中的“git status”显示“干净”（如预期的那样）
*   工作树 B 中的“git status”突然显示“要提交的更改”

显示的更改与我刚刚在 A 中所做的提交相反。例如，如果 A 中的提交添加了一行，则 B 中的“要提交的更改”显示该行已被删除。

这里发生了什么？这是 git-new-workdir 的已知限制吗？有没有办法避免这个问题？或者我应该避免在两个副本中签出同一个分支时签入？

我也有兴趣了解内部发生的事情（我对 git 的内部结构知之甚少）。

**笔记：**

我发现问题很容易通过 `git reset--hard`在 B 中运行来解决，如果 B 在 A 中提交之前没有未提交的更改。

但是，如果我在 A 中提交，而 B 中有未提交的更改，则真正的未提交更改与提交中的虚假更改混合在一起，并且似乎没有简单的方法可以解开它们。因此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:12:45.913

我认为这是预期的行为。来自[http://nuclearsquid.com/writings/git-new-workdir/](http://nuclearsquid.com/writings/git-new-workdir/)：

> 在您的一个工作目录中创建一个新的提交或分支，它们立即在所有工作目录中可用。

当您在 A 中提交更改时，该提交也可供 B 使用。由于您刚刚在 A 中添加的行不在 B 中，因此您似乎在最近一次提交后进行了更改。

我认为多个工作目录的目的是同时签出不同的分支。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-17T09:35:44.427

截至 2015 年，这个问题已经过时。

`git-new-workdir`已被[`git worktree`](https://git-scm.com/docs/git-worktree)（2015 年 7 月在 Git V2.5 中引入）取代。`git worktree`通过断然拒绝检查两个工作树中的相同分支来解决此问题中描述的问题：

```
$ git checkout myBranch
fatal: 'myBranch' is already checked out at '/tmp/otherworktree' 
```

# regex - 对数据框的列名执行多次搜索和替换

> ID：10455318
> 
> 赞同：3
> 
> 时间：2012-05-04T19:56:12.803
> 
> 标签：regex, r, dataframe, batch-rename

我有一个包含 95 列的数据框，并且想用简单的正则表达式批量重命名其中的很多，就像底部的代码段一样，有大约 30 行这样的行。任何其他与搜索正则表达式不匹配的列都必须保持不变。

**** 示例：names(tr) = c('foo', 'bar', 'xxx_14', 'xxx_2001', 'yyy_76', 'baz', 'zzz_22', ...) ****

我从一堵 25 gsub()s 的墙开始 - 粗略但有效：

```
names(tr) <- gsub('_1$',    '_R', names(tr))
names(tr) <- gsub('_14$',   '_I', names(tr))
names(tr) <- gsub('_22$',   '_P', names(tr))
names(tr) <- gsub('_50$',   '_O', names(tr))
... yada yada 
```

@Joshua：mapply 不起作用，结果证明它更复杂且无法矢量化。names(tr) 包含其他列，当这些模式确实发生时，您不能假设它们都发生了，更不用说按照我们定义它们的确切顺序了。因此，尝试 2 是：

```
pattern <- paste('_', c('1','14','22','50','52','57','76','1018','2001','3301','6005'), '$', sep='')
replace <- paste('_', c('R','I', 'P', 'O', 'C', 'D', 'M', 'L',   'S',   'K',   'G'),         sep='')
do.call(gsub, list(pattern, replace, names(tr)))
Warning messages:
1: In function (pattern, replacement, x, ignore.case = FALSE, perl = FALSE,  :
  argument 'pattern' has length > 1 and only the first element will be used
2: In function (pattern, replacement, x, ignore.case = FALSE, perl = FALSE,  :
  argument 'replacement' has length > 1 and only the first element will be used 
```

谁能帮我解决这个问题？

* * *

编辑：我阅读了关于这个主题的所有 SO 和 R 文档，但找不到任何东西......然后当我发布它时，我想搜索 '[r] translation table' 并找到*xlate*。*grep/sub/gsub*文档中的任何地方都没有提到。

1.  有什么东西*`base/gsubfn/data.table`*可以让我写一个搜索和替换指令吗？（如字典或翻译表）

2.  你能把我笨拙的语法改进为对 tr 的引用调用吗？（不得创建整个 df 的临时副本）

* * *

EDIT2：阅读后我最大的努力是：

字典方法（*[xlate](https://stackoverflow.com/questions/10353736/translation-recoding-error-in-r)*）可能是部分答案，但这不仅仅是一个简单的翻译表，因为正则表达式必须是终端（例如'_14$'）。

我可以使用*gsub()*或*strsplit()*在 '_' 上拆分，然后在最后一个组件上进行*xlate*翻译，然后将它们*粘贴*在一起。寻找更干净的 1/2 行成语。

否则我只使用*gsub()s 的*墙壁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T22:21:17.023

Wall of`gsub`可以始终替换为`for-loop`. 你可以把它写成一个函数：

```
renamer <- function(x, pattern, replace) {
    for (i in seq_along(pattern))
            x <- gsub(pattern[i], replace[i], x)
    x
}

names(tr) <- renamer(
     names(tr),
     sprintf('_%s$', c('1','14','22','50','52','57','76','1018','2001','3301','6005')),
     sprintf('_%s' , c('R','I', 'P', 'O', 'C', 'D', 'M', 'L',   'S',   'K',   'G'))
) 
```

而且我发现比创建这种字符串`sprintf`更有用。`paste`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-04T23:09:34.887

`tidyverse`这个问题早`c(pattern1 = replacement1)`于`stringr::str_replace_all`.

```
tr <- data.frame("whatevs_1" = NA, "something_52" = NA)

tr
#>   whatevs_1 something_52
#> 1        NA           NA

patterns <- sprintf('_%s$', c('1','14','22','50','52','57','76','1018','2001','3301','6005'))
replacements <- sprintf('_%s' , c('R','I', 'P', 'O', 'C', 'D', 'M', 'L',   'S',   'K',   'G'))

names(replacements) <- patterns

names(tr) <- stringr::str_replace_all(names(tr), replacements)

tr
#>   whatevs_R something_C
#> 1        NA          NA 
```

当然，这种特殊情况可以受益于`dplyr`

```
dplyr::rename_all(tr, stringr::str_replace_all, replacements)
#>   whatevs_R something_C
#> 1        NA          NA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:11:01.563

使用*`do.call()`*几乎可以做到这一点，它反对不同的 arg 长度。我想我需要嵌套*`do.call()`*在里面*`apply()`*，就像在[将函数应用于列表中的元素](https://stackoverflow.com/questions/7085110/apply-function-to-elements-over-a-list)一样。

但我需要部分*`do.call()`*过度模式并替换。

这一切都开始使 gsub(..., fixed=TRUE) 看起来像一个更有效的习惯用法，如果代码松散。

```
pattern <- paste('_', c('1','14','22','50'), '$', sep='')
replace <- paste('_', c('R','I', 'P', 'O'),       sep='')
do.call(gsub, list(pattern, replace, names(tr)))
Warning messages:
1: In function (pattern, replacement, x, ignore.case = FALSE, perl = FALSE,  :
  argument 'pattern' has length > 1 and only the first element will be used
2: In function (pattern, replacement, x, ignore.case = FALSE, perl = FALSE,  :
  argument 'replacement' has length > 1 and only the first element will be used 
```

# iphone - OpenGL ES 2d 渲染成图像

> ID：10455329
> 
> 赞同：7
> 
> 时间：2012-05-04T19:57:01.313
> 
> 标签：iphone, ios, image, opengl-es, rendering

我需要在 iOS 上编写 OpenGL ES 二维渲染器。它应该将一些图元（如线条和多边形）绘制到二维图像中（它将渲染矢量图）。在该任务中，哪种方式最适合从 OpenGL 上下文中获取图像？我的意思是，我应该将这些图元渲染成纹理，然后从中获取图像，还是什么？此外，如果有人给出看起来像我需要的东西（2d GL 渲染成图像）的示例或教程，那将是很棒的。提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T20:20:53.853

如果您需要渲染 OpenGL ES 2-D 场景，然后提取该场景的图像以在 OpenGL ES 之外使用，您有两个主要选择。

第一种是简单地渲染你的场景并使用它`glReadPixels()`来获取场景的 RGBA 数据并将其放置在一个字节数组中，如下所示：

```
GLubyte *rawImagePixels = (GLubyte *)malloc(totalBytesForImage);
glReadPixels(0, 0, (int)currentFBOSize.width, (int)currentFBOSize.height, GL_RGBA, GL_UNSIGNED_BYTE, rawImagePixels);
// Do something with the image
free(rawImagePixels); 
```

第二种更快的方法是将场景渲染到纹理支持的帧缓冲区对象 (FBO)，其中纹理由 iOS 5.0 的纹理缓存提供。[我在这个答案](https://stackoverflow.com/a/9704392/19679)中描述了这种方法，尽管我没有在那里显示原始数据访问的代码。

您可以执行以下操作来设置纹理缓存并绑定 FBO 纹理：

```
 CVReturn err = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, (__bridge void *)[[GPUImageOpenGLESContext sharedImageProcessingOpenGLESContext] context], NULL, &rawDataTextureCache);
    if (err) 
    {
        NSAssert(NO, @"Error at CVOpenGLESTextureCacheCreate %d");
    }

    // Code originally sourced from http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/

    CFDictionaryRef empty; // empty value for attr value.
    CFMutableDictionaryRef attrs;
    empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                               NULL,
                               NULL,
                               0,
                               &kCFTypeDictionaryKeyCallBacks,
                               &kCFTypeDictionaryValueCallBacks);
    attrs = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                      1,
                                      &kCFTypeDictionaryKeyCallBacks,
                                      &kCFTypeDictionaryValueCallBacks);

    CFDictionarySetValue(attrs,
                         kCVPixelBufferIOSurfacePropertiesKey,
                         empty);

    //CVPixelBufferPoolCreatePixelBuffer (NULL, [assetWriterPixelBufferInput pixelBufferPool], &renderTarget);

    CVPixelBufferCreate(kCFAllocatorDefault, 
                        (int)imageSize.width, 
                        (int)imageSize.height,
                        kCVPixelFormatType_32BGRA,
                        attrs,
                        &renderTarget);

    CVOpenGLESTextureRef renderTexture;
    CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault,
                                                  rawDataTextureCache, renderTarget,
                                                  NULL, // texture attributes
                                                  GL_TEXTURE_2D,
                                                  GL_RGBA, // opengl format
                                                  (int)imageSize.width, 
                                                  (int)imageSize.height,
                                                  GL_BGRA, // native iOS format
                                                  GL_UNSIGNED_BYTE,
                                                  0,
                                                  &renderTexture);
    CFRelease(attrs);
    CFRelease(empty);
    glBindTexture(CVOpenGLESTextureGetTarget(renderTexture), CVOpenGLESTextureGetName(renderTexture));
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0); 
```

然后你可以直接从支持这个纹理的字节中读取（BGRA 格式，而不是 RGBA 的`glReadPixels()`），使用类似：

```
 CVPixelBufferLockBaseAddress(renderTarget, 0);
    _rawBytesForImage = (GLubyte *)CVPixelBufferGetBaseAddress(renderTarget);
    // Do something with the bytes
    CVPixelBufferUnlockBaseAddress(renderTarget, 0); 
```

但是，如果您只想在 OpenGL ES 中重用您的图像，您只需将场景渲染到支持纹理的 FBO，然后在第二级渲染中使用该纹理。

I show an example of rendering to a texture, and then performing some processing on it, within the CubeExample sample application within my open source [GPUImage](https://github.com/BradLarson/GPUImage) framework, if you want to see this in action.

# php - AS3/PHP - 通过电子邮件保留格式、颜色等的文本字段文本

> ID：10455332
> 
> 赞同：1
> 
> 时间：2012-05-04T19:57:13.943
> 
> 标签：php, actionscript-3

我的 .swf 是一个游戏。游戏结束时，玩家可以看到文字游戏报告。此游戏报告在动态文本字段中生成。玩家可以通过电子邮件发送报告。发送带有报告文本的电子邮件很容易，它就像一个表格一样工作。问题是我需要保留所有颜色、粗体、格式等。我不想要没有粗体、颜色或格式的纯黑色文本。所以，我的简单表单解决方案不起作用。

我正在使用这个简单的 PHP 代码：

```
<?php

$message = $_POST["message"];

$recipient = $_POST["email"];

utf8_decode($mensagem);

$header = "MIME-Version: 1.0\r\n";
$header .= "Content-type: text/html; charset=utf-8\r\n";
$header .= "Reply-to: ".$_POST['email']."\r\n";
$header .= "From: My swf";

$subject = "Relatorio";

$msg = "<b>Report:</b> $message\n<br />";

mail($recipient, $subject, $msg, $header);
?> 
```

一位朋友阅读了一些关于将文本作为 ByteArray 发送的内容，但我们不明白如何去做。我刚刚发现很多人发送图像，但我们想发送文本。

谢谢！

# javascript - jQuery 逻辑过滤

> ID：10455334
> 
> 赞同：0
> 
> 时间：2012-05-04T19:57:16.627
> 
> 标签：javascript, jquery, filter, logic

我有一个在内部 div 中有标签的帖子链接列表。用户从三个不同的列表中选择来过滤帖子。

基本上我想要实现的是基于用户选择的三个列表的内容进行前端过滤。

我希望逻辑基本上是这样的：`IF post-tags-list has 1+ item from list1 AND has 1+ item from list2 AND has 1+ item from list3, THEN keep the post`

下面是我作为开始的内容，但是`IF`如果有人没有从其中一个列表中选择任何内容，我需要大量的陈述来说明目前的情况。我知道使用开关可能会更容易，但我不完全确定我的逻辑是否正确。

```
$(".post-link").each(function(index){
    //Get all the post's terms from its hidden tag div and store in an array
    var terms = $(this).find(".tags").attr('class').split(" ");
    //Cut off the first two items ('hidden' and 'tags')
    terms.splice(0,2);
    //If interests is set
    if(typeof interests[0] != 'undefined'){
        var found = 0;
        var keep = false;
        //For each of the selected interests...
        $.each(interests, function(index, value){
            //For each of the posts terms
            $.each(terms, function(index2, value2){
                //If the posts has a selected interest, keep it
                if(value == value2){ keep=true;}
            });
        });
        //After all that, if we couldn't find anything...
        if(keep!=true){
            //Hide the post (.post-link)
            $(this).hide();
        }
    }
    //THE ABOVE ONLY ACCOUNTS FOR IF SOMETHING IS SELECTED FOR THE FIRST LIST
    //I'M NOT SURE HOW I WOULD IMPLEMENT THIS ACROSS TWO OTHER LISTS
}); 
```

如果您需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:25:29.460

好的，所以我找到了解决问题的方法。基本上对于每个帖子，我都设置了一个显示变量并将其设置为 true（除非另有证明，否则我们希望显示该帖子）。因此，我检查我的三个列表中的每一个是否都有内容，如果有，则在 foreach 中执行一个 foreach 以检查我的帖子术语是否与我选择的项目匹配。如果有，保持 show=true，否则为假。对其他两个列表执行此操作。经过这三项检查，如果显示仍然为真，则必须每三个字段中至少有一项（如果三项适用），如果为假，则隐藏帖子。

这是代码：

```
$(".post-link").each(function(index){
    var show = true;

    //Get all the post's terms from its hidden tag div and store in an array
    var terms = $(this).find(".tags").attr('class').split(" ");
    //Cut off the first two items ('hidden' and 'tags')
    terms.splice(0,2);

    //If interests is set
    if(typeof interests[0] != 'undefined'){
        var found = 0;
        $.each(interests, function(index, value){
            $.each(terms, function(index2, value2){
                if(value == value2){ found++; }
            });
        });
        if(found < 1){
            show = false;
        }
    }

    //If type is set
    if(typeof type[0] != 'undefined'){
        var found = 0;
        $.each(type, function(index, value){
            $.each(terms, function(index2, value2){
                if(value == value2){ found++; }
            });
        });
        if(found < 1){
            show = false;
        }
    }

    //If experience is set
    if(typeof experience[0] != 'undefined'){
        var found = 0;
        $.each(experience, function(index, value){
            $.each(terms, function(index2, value2){
                if(value == value2){ found++; }
            });
        });
        if(found < 1){
            show = false;
        }
    }

    if(!show){
        $(this).hide();
    }
}); 
```

# c# - 使用包含 & 符号的 URL 将 XML 加载到 XDocument

> ID：10455335
> 
> 赞同：1
> 
> 时间：2012-05-04T19:57:17.043
> 
> 标签：c#, linq-to-xml

```
XDocument xd = XDocument.Load("http://www.google.com/ig/api?weather=vilnius&hl=lt"); 
```

调用该方法`&`时，在包含 URL 的字符串中，与号不是受支持的字符。`Load()`发生此错误：

> XmlException 未处理：给定编码中的字符无效

如何将 XML 从 URL 加载到 XDocument 中，其中 URL 在查询字符串中有一个 & 符号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T19:59:36.450

~~您需要将其 URL 编码为`&amp;`：~~

 ~~```
XDocument xd = XDocument.Load(
    "http://www.google.com/ig/api?weather=vilnius&amp;hl=lt"); 
```~~ 

~~您也许可以不用使用`WebUtility.HtmlEncode`自动执行此转换；但是，请注意这不是该方法的预期用途。~~

**编辑**：这里的真正问题与 & 号无关，而是与 Google 使用自定义编码对 XML 文档进行编码并且未能声明它的方式有关。（与符号仅在出现在特殊上下文中时才需要编码，例如`<a href="…" />`(X)HTML 的元素。请阅读[URL](http://htmlhelp.com/tools/validator/problems.html#amp)中的与符号 (&'s) 以获得快速解释。）

由于 XML 声明未指定编码，`XDocument.Load`因此在内部回退到 XML 规范要求的默认 UTF-8 编码，这与实际数据不兼容。

为了规避这个问题，您可以使用下面的示例获取原始数据并手动解码。我不知道编码是否真的是 Windows-1252，所以你可能需要尝试一下其他编码。

```
string url = "http://www.google.com/ig/api?weather=vilnius&hl=lt";
byte[] data;
using (WebClient webClient = new WebClient())
    data = webClient.DownloadData(url);

string str = Encoding.GetEncoding("Windows-1252").GetString(data);
XDocument xd = XDocument.Parse(str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:38:23.530

您的代码没有任何问题 -`&`在查询字符串中包含它是完全可以的，这就是定义单独参数的方式。

当您查看错误时，您会看到它无法加载 XML，而不是从 Url 查询它：

> XmlException：给定编码中的无效字符。第 1 行，位置 473

这清楚地指向您的查询字符串之外。

问题可能是 XML 响应中的“Apsiniaukę”（注意最后一个字符）......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T06:13:41.503

而不是 "&" 使用 " `&`" 或 " `&amp;`" 。它会正常工作。

# php - 如何获取 Silex 上的所有 GET 参数？

> ID：10455336
> 
> 赞同：29
> 
> 时间：2012-05-04T19:57:18.903
> 
> 标签：php, symfony, silex

我已经使用 Silex 一天了，我有第一个“愚蠢”的问题。如果我有：

```
$app->get('/cities/{city_id}.json', function(Request $request, $city_id) use($app) {
    ....
})
->bind('city')
->middleware($checkHash); 
```

我想获取中间件中包含的所有参数（city_id）：

```
$checkHash = function (Request $request) use ($app) {

    // not loading city_id, just the parameter after the ?
    $params = $request->query->all();

    ....
} 
```

那么，如何在中间件中获取 city_id（参数名称及其值）。我将有 30 个动作，所以我需要一些可用和可维护的东西。

我错过了什么？

多谢！

**解决方案**

我们需要获取*$request->attributes的那些额外参数*

```
$checkHash = function (Request $request) use ($app) {

    // GET params
    $params = $request->query->all();

    // Params which are on the PATH_INFO
    foreach ( $request->attributes as $key => $val )
    {
        // on the attributes ParamaterBag there are other parameters
        // which start with a _parametername. We don't want them.
        if ( strpos($key, '_') != 0 )
        {
            $params[ $key ] = $val;
        }
    }

    // now we have all the parameters of the url on $params

    ...

}); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-04T23:08:51.320

在[Request](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html)对象中，您可以访问多个参数包，特别是：

*   `$request->query`- 获取参数
*   `$request->request`- POST 参数
*   `$request->attributes`- 请求属性（包括从 PATH_INFO 解析的参数）

`$request->query`仅包含 GET 参数。`city_id`不是 GET 参数。它是从 PATH_INFO 解析的属性。

Silex 使用了几个[Symfony 组件](http://symfony.com/components)。Request 和 Response 类是 HttpFoundation 的一部分。从 Symfony 文档了解更多信息：

*   [HttpFoundation 组件](http://symfony.com/doc/current/components/http_foundation/introduction.html)
*   [HttpFoundation API](http://api.symfony.com/master/Symfony/Component/HttpFoundation.html)
*   [请求 API](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html)

# facebook - 从 facebook 应用开始（需要指南）

> ID：10455338
> 
> 赞同：1
> 
> 时间：2012-05-04T19:57:53.663
> 
> 标签：facebook, facebook-graph-api

我正在尝试制作一个 facebook 应用程序，以便在喜欢我的粉丝页面或最终喜欢帖子的用户之间进行抽奖（如抽奖）。我一直在开发另一个可以做其他事情的应用程序，但我被困在这个问题上，不能做这么简单的事情真的很令人沮丧。

首先，我希望使其在页面选项卡中可用（并且用户不需要“安装”应用程序。如果用户只是“查看”加载的页面，则可能不需要在我的主机中）

其次，我不知道我怎么能得到（假设进入应用程序/页面选项卡的人是管理员）所有喜欢页面/帖子而不使用 access_token 的用户（因为这个该死的 access_token 有一个过期时间，并且如果可以的话，我会尽量不使用访问令牌，因为我假设进入某些部分的用户是管理员

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:35:40.927

您无法制作一款能够从喜欢您页面的人中吸引竞赛获胜者的应用程序。Facebook 不再允许您查询页面的粉丝。

您仍然可以查询喜欢您页面上的帖子的用户，因此您应该以这种方式设置您的比赛。

首先，您需要为您的页面创建一个连接器应用程序。用户无需注册此应用程序。只要他们喜欢您的页面，您的应用就可以访问他们的公共数据。您的应用程序将有一个 API 密钥和秘密。使用这些，您将能够访问有关您的页面的信息。

要查找喜欢某个帖子的用户，您可以使用多种语言进行查询。我不确定您使用的是哪一个，因此我将通过 Graph API Explorer 为您提供执行此操作的说明：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

在页面上发布您的帖子，然后输入`PAGE_ID_OR_USERNAME/feed`您将 PAGE_ID_OR_USERNAME 替换为您页面的 ID 或用户名的位置。找到您刚刚在其中列出的帖子的 ID。它看起来像这样：（`213365490637345_40261112079719`不是真正的 post_id）

现在，您可以通过在资源管理器框中输入以下内容来获取喜欢该帖子的人的所有用户 ID：

```
 fql?q=SELECT user_id FROM like WHERE post_id = "213365490637345_40261112079719" 
```

然后从该列表中选择一个随机 ID 并联系该特定用户。当您尝试联系他们时，您可能必须使用 Facebook 作为您的页面。

# c# - 使用 Windows 任务调度程序运行时不访问 sql server db 的 C# 应用程序

> ID：10455339
> 
> 赞同：2
> 
> 时间：2012-05-04T19:57:55.063
> 
> 标签：c#, windows, task, scheduler, .net

我在一个用 c#（.net framework 4）编码的应用程序上工作，它访问数据库并读/写一些表。

当我在开发机器上运行应用程序时，它运行良好（表格写得很好）。当我在任务调度程序之外的 Windows Server 2003 上运行该应用程序时，它运行正常（表格写得很好）。当我从 Windows 任务调度程序运行应用程序时，它运行不正常（根本没有写表）。

我尝试了许多帐户，并尝试了管理员一个，以在任务计划程序中启动任务，但任何帐户都不起作用。

我必须写的是，旧版本的应用程序在开发机器上运行良好，在带有/不带有 Windows 任务调度程序的 Windows Server 2003 上（表格写得很好）。

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:11:12.333

我唯一推荐的是添加行：

```
Debugger.Break();
Debugger.Launch(); 
```

就在必须打开实际连接并调试应用程序的地方。有了这么多的信息，没有什么可建议的了。

# apache - 将 www.example.com/?city_name="New-York" 重写为 /cities/newyork 的最有效方法是什么

> ID：10455341
> 
> 赞同：1
> 
> 时间：2012-05-04T19:58:00.823
> 
> 标签：apache, mod-rewrite, rewrite

我有这种格式的网址

```
www.example.com/?city_name="New-York" 
```

我想知道是否有办法自动将此网址重写为

```
www.example.com/cities/new-york 
```

使用重写规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:30:21.900

`RewriteCond`在查询字符串上使用 a ，然后`RewriteRule`使用结果。

```
RewriteCond %{QUERY_STRING} ^city_name="([\w]+)" [NC]
RewriteRule (.*) /cities/%1? [L,R] 
```

在`RewriteCond`查询字符串上运行正则表达式，查找您的`city_name`参数。`NC`是无大小写标志，使正则表达式不区分大小写。在实际`RewriteRule`指令中，我们完全重写了 的路径`/cities/%1`，其中`%1`是最后一个成功`RewriteCond`指令的第一个匹配组，在这种情况下，是请求的城市的 slug。我们`?`在末尾添加 a 以从请求中擦除查询字符串，然后传递`L`and`R`标志以发出完整的 302 重定向。

# c# - 如何访问默认的 en-US 文化，而不是在特定系统上定义？

> ID：10455343
> 
> 赞同：1
> 
> 时间：2012-05-04T19:58:11.277
> 
> 标签：c#, datetime

我试图让我的应用程序处理来自字符串的 DateTimes 的一些转换。为了处理不同的文化，我指定了我希望转换使用的文化。我以为这已经涵盖了我，但我发现您可以更改该系统如何定义“en-US”的特定元素，例如长日期模式和短日期模式。在这些情况下，当被解析的日期是 MM/dd/yyyy 格式时，下面的代码不起作用。

```
 CultureInfo c = new CultureInfo("en-US");
        string[] permissions = Regex.Split(permissionData, @"\r\n");
        foreach (string permission in permissions)
        {
            string[] details = permission.Split(',');
            this.Add(new WPermission()
            {
                WRegion = Convert.ToInt32(details[0],c),
                StartDate = Convert.ToDateTime(details[1],c),
                EndDate = Convert.ToDateTime(details[2],c)
            });
        } 
```

我的问题是：有没有办法访问“en-US”的默认定义，并加载它而不是用户定义的版本，还是我降级到类似的东西`ParseExact`？请注意，我无法控制我正在解析的字符串的源格式，它是第三方的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:01:03.120

您可以使用[CultureInfo.InvariantCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)，它与英语相关联，但忽略了区域信息和用户自定义。

```
this.Add(new WPermission() {
    WRegion = Convert.ToInt32(details[0], CultureInfo.InvariantCulture),
    StartDate = Convert.ToDateTime(details[1], CultureInfo.InvariantCulture),
    EndDate = Convert.ToDateTime(details[2], CultureInfo.InvariantCulture)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:01:19.477

这个特定的例子可以通过[使用 Invariant Culture](http://msdn.microsoft.com/en-us/library/4c5zdc6a.aspx)来处理，它使用美国风格的日期格式。

但是，如果您知道日期的确切表示，您可能仍想使用`DateTime.ParseExact`，因为它还具有额外的副作用，即非常清楚地显示以该*确切格式解析日期的意图。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T16:17:48.143

InvariantCulture 非常适用于英语，但对于适用于其他语言的更通用的解决方案，请尝试：

`CultureInfo c = new CultureInfo("en-US", false);`

向构造函数添加 false 会告诉它忽略任何用户对文化的自定义。

# ios - 如何使 iPad 上 k/b 蓝色上的 FirstResponder “完成”按钮？

> ID：10455349
> 
> 赞同：0
> 
> 时间：2012-05-04T19:58:48.933
> 
> 标签：ios, xcode4

我有一个 iPhone 应用程序，其中 FirstResponder “完成”按钮是蓝色的。我将该应用程序移植到 iPad，FirstResponder“完成”按钮保持灰色。

我正在使用带有情节提要的 XCode4 ......

有没有办法改变它，所以完成按钮是蓝色的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:06:09.507

这是一个`UIBarButtonItem`吗？在 iOS5 中，您可以`tintColor`将`UIBarButtonItem`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:33:16.903

By default, the "theme" for iPad is silver and gray; therefore it can't be easily done. :-{

# hadoop - 如何从 Mapper 或 Reducer 发出值列表？

> ID：10455351
> 
> 赞同：0
> 
> 时间：2012-05-04T19:59:05.490
> 
> 标签：hadoop, mapreduce, hbase, hdfs

我有一个包含一些地球物理数据（地震数据）的文件，我正在从本地文件系统中读取这些文件并将它们作为 Hadoop Sequential 文件存储在 HDFS 中。

现在我想编写一个 MapReduce 作业，它可以从这些 Sequential 文件中读取值并将它们存储到 HBase 表中。这些文件不仅仅是平面文件。相反，它们由许多片段组成，其中每个片段是一个 240 字节的块，并具有多个字段。每个字段可以是短整数或整数。我使用块号作为键，使用 240 字节的字节数组（包含所有字段）作为顺序文件的值。所以每个顺序文件都有所有的块作为字节数组和它们的块号。

我的问题是，在处理这样的文件时，如何读取每个 240 字节块，读取单个字段并在完成 240 字节块后一次性发出所有字段？假设我有一个包含 1000 个块的文件。所以在我的 MapReduce 程序中，我必须一次读取这 1000 个块，提取每个字段（short 或 int）并发出所有字段作为一个 Map 的结果。

我需要一些帮助，关于这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:50:22.173

只是为了确保，你想读取每个`240 bytes`块，发出块号作为键和字节数组作为值？我认为您必须扩展默认值`SequenceFileInputFormat`。我不确定 Sequence File 是如何工作的，或者它们的结构是什么样的（抱歉），但我试图读取文件的全部内容以作为输出值发出，而我这样做的方式是扩展`FileInputFormat`. 也许您可以查看源代码`SequenceFileInputFormat`，看看是否有办法制作`InputSplit`每个`240 bytes`（如果您的数据是结构化的），或者在某个分隔符处。

希望这可以帮助！

# development-environment - 为什么使用 Vagrant 比共享 VM 的磁盘本身更好？

> ID：10455352
> 
> 赞同：5
> 
> 时间：2012-05-04T19:59:10.163
> 
> 标签：development-environment, vagrant

我正在寻找向我的团队分发开发环境的最佳方式，并找到了 Vagrant。经过一些阅读和测试，这就是我可以说的

> **Pro：** 自动创建新的 VirtualBox VM（为新用户）的过程。
> 
> **缺点：** 通过要求新用户学习新工具来取消我发现的唯一专业人士。

学习曲线比实际复制 VDI 和配置新的 VirtualBox VM 使用它要花费更多时间。（它也不是那么好，但仍然比学习新工具要高。）

我绝对不明白为什么使用 Vagrant 会使分发开发环境的过程与创建普通的 VirtualBox VM 和共享磁盘如此不同。

也许我在这里遗漏了一点，任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T20:04:46.197

我只能从我自己的经验中说：学习曲线非常值得。

作为一名程序员，我喜欢能够为开发、测试和部署设置单独的隔离环境。

当然，您可以复制 VDI 等等，但更容易——在我看来——执行一些命令行程序，一切就绪。复制 VDI 或其他类型的图像对我来说似乎很脏。

此外，我可以制作打包好的流浪者盒子，发送给我的同事或在互联网上分发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-14T15:20:46.277

vagrant 的优势远不止这些：

*   100% 可重现的环境，无处不在。
*   可以存储在源代码控制 (git/svn/...) 中并进行版本控制。
*   节省磁盘空间。这在笔记本电脑上可能很重要，我的系统上现在有 92 个 Vagrantfiles，并不是全部创建的。想象一下它们都是完整的 20GB 虚拟机......
*   实验变得微不足道。一个快速的 vagrant init 精确 64，vagrant up，尝试一些东西，vagrant destroy，vagrant up，重试一些东西，vagrant destroy - 完成。

这样做需要一些纪律，不要手动安装所需的包或更新常见的 Vagrantfile，但是一旦你制定了工作流程，它简直太棒了。我发现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-13T02:28:26.603

我认为 Vagrant 的主要优势在于它让您拥有一个基础包，可以通过更改清单/食谱来重新配置用于不同目的的基础包，包括开发、测试、管理、操作等。只是分享和启动更方便。

不太重要，但仍然很好的是它可以让你毫不费力地重新开始。我知道您可以在 VirtualBox 中使用快照，但有时，在它们之间来回切换会变得很烦人。使用 Vagrant，你可以启动一个盒子，测试一些东西，然后销毁它。比你可以重新开始，同样的盒子，测试一下。您可以轻松地启动两次相同的 VM，并在每次测试中略有不同，然后销毁它们。

另请在此处查看答案：[https](https://superuser.com/questions/584100/why-should-i-use-vagrant-instead-of-just-virtualbox) ://superuser.com/questions/584100/why-should-i-use-vagrant-instead-of-just-virtualbox 编辑：在我的第一个答案中，我想到的是 Packer，而不是流浪汉，我的错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T17:45:22.937

我们正在办公室讨论同样的问题……现在，顺便说一句！

当我第一次接触 vagrant 时，我是持怀疑态度的，但我能看到的优势，超出个人意见的是：

1.  您可以从通用配置开始并自动化许多“分叉”，而无需快照链接（我可能会说，当您需要删除一个或两个快照时会很痛苦）；
2.  克隆（包装）机器的过程比出口设备快得多；
3.  使用 vagrant 设置机器仍然可以使用 VBox iface，所以根据 Vagrant 的特性做一个起点，让队友决定是否使用它是没有问题的；
4.  如前所述，自动化。

我们仍在进行一些测试...现在谈论特定意见，对我而言，重点是复制以及打包和拆包比导出更快的事实。

# typo3 - TYPO3 tt_news：没有给出代码

> ID：10455355
> 
> 赞同：1
> 
> 时间：2012-05-04T19:59:17.577
> 
> 标签：typo3

我刚刚继承了这个 TYPO3 项目，并且有一堆任务要执行（在这里添加这个，在那里添加等等），我的任务是“将新闻添加到首页”和“添加 RSS 提要到网站”

好吧，`tt_news`扩展程序已安装，我创建了 1 个测试新闻。现在我添加了一个“新闻”类型的页面内容插件，并尽我所知配置它，按照扩展提供的过时手册，保存页面，清除缓存并刷新前端页面以查看：

![在此处输入图像描述](../Images/844db8de1274d4984c0186cac35e6188.png)

...这是什么意思以及如何使扩展工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:07:42.223

编辑包含 tt_news 扩展的内容元素，并`Plugin`在选择字段中的选项卡上`What to display`选择默认视图，即：`Standard list view (LIST)`

![在此处输入图像描述](../Images/4fd204f466c4a18b02f464999f165a91.png)

还：

1.  确保在 Content Element 的设置中选择正确的文件夹，其中包含 tt_news 记录的字段`Other settings`>`Page(s) with tt_news records`
2.  tt_news 记录默认创建，`Hidden`标志设置为 true，请确保复选框**未选中**。（顺便说一句，可以使用`TCAdefaults.tt_news.hidden=0`in`PageTS`或更改此行为`UserTS`）

# ruby-on-rails - 规格。多部分收件人

> ID：10455362
> 
> 赞同：0
> 
> 时间：2012-05-04T20:00:10.480
> 
> 标签：ruby-on-rails, email, rspec

我想测试我的 Mailer 模型。信件应发送给多个收件人。如何测试发送给多个收件人的消息？我创建了规范文件：

```
describe SubscribeMailer do
  before(:each) do
   (1..3).to_a.each do  
    FactoryGirl.create(:subscriber)
   end  
  end

let(:post) { @user.posts.create(@attr)}
let(:mail) { SubscribeMailer.new_post(post) }

   #Failure/Error for this test
  it 'subscribers' do
    mail.to.should == Subscriber.all.map(&:email)
  end

end 
```

但我不知道如何编写测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:06:04.220

除了@Trevoke 的回答，我会告诉你看看[这个优秀的 Railscast](http://railscasts.com/episodes/275-how-i-test)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:01:44.940

在测试环境中，ActionMailer.deliveries 是一个原本会被发送的邮件对象数组。

# php - Facebook oAuth Connect 在重定向回我的应用程序时导致 502 Bad Gateway

> ID：10455364
> 
> 赞同：1
> 
> 时间：2012-05-04T20:00:29.680
> 
> 标签：php, facebook, apache, codeigniter, oauth

我正在开发一个需要 Facebook 连接进行身份验证的移动网络应用程序。在桌面网络上一切正常，但是，当我在 iPhone 上执行完全相同的操作时，页面会导致 502 Bad Gateway。

它发生在 Facebook 重定向回我的回调 url 的那一刻。更奇怪的是它并不总是发生，有时一切都像魅力一样。

我希望有人认识到这个问题或这些症状，什么可能导致这些错误？

我的网络服务器是 Apache，我使用 PHP 作为脚本语言，没什么特别的。

- 提前致谢！

**更新**

显然，只有当我尝试通过我的 3G 网络连接时才会出现问题，当我使用 Wi-Fi 时，一切正常..

# vba - 如何使用单元格内的十六进制颜色值突出显示单元格？

> ID：10455366
> 
> 赞同：20
> 
> 时间：2012-05-04T20:00:32.970
> 
> 标签：vba, excel, excel-2010, conditional-formatting

我有一个符号电子表格和匹配的十六进制颜色。我想用单元格内的十六进制颜色填充单元格本身（或旁边的那个）。我读过一些关于“条件格式”的文章，我认为这就是这样做的方法。

我怎样才能达到我想要的结果？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-13T07:31:55.367

**无法使用所有颜色的条件格式来实现。**

假设：第 1 行包含数据标签，数据集没有间隙，十六进制颜色用于填充而不是字体，您已将十六进制颜色值（数字，而不是公式）解析为列 C:E (R,G,B)并且您不需要经常这样做，那么 ColourCells 宏可能适合：

```
Sub ColourCells()
Dim HowMany As Integer
On Error Resume Next
Application.DisplayAlerts = False
HowMany = Application.InputBox _
(Prompt:="Enter last row number.", Title:="To apply to how many rows?", Type:=1)
On Error GoTo 0
Application.DisplayAlerts = True
If HowMany = 0 Then
Exit Sub
Else
   Dim i As Integer
   For i = 2 To HowMany
      Cells(i, 3).Interior.Color = RGB(Cells(i, 3), Cells(i, 4), Cells(i, 5))
   Next i
End If
End Sub 
```

并在出现提示时输入所需的 n 值。

示例输出和公式等：

![SO11466034](../Images/91c41b3e131fe082f244ff81fcbf6227.png)

Excel 的 RGB() 函数实际上创建了一个 BGR 值（我认为没有人可能知道为什么会说为什么），因此 Excel 以相反的顺序显示半字节。对于代码 Columns3,4,5 是合乎逻辑的，但 BGR 而不是图像中的传统 RGB，我认为可能看起来很奇怪。对于图像中的 F，C3 值（“RGB”三的**左手**列）是通过将**RIGHT()**应用于十六进制颜色而得出的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-05-18T19:45:52.037

对 Jon Peltier 的回答进行了少量编辑。他的函数 ALMOST 有效，但它呈现的颜色不正确，因为 Excel 将呈现为 BGR 而不是 RGB。这是更正后的函数，它将成对的十六进制值交换为“正确”的顺序：

```
Sub ColorCellsByHex()
  Dim rSelection As Range, rCell As Range, tHex As String

  If TypeName(Selection) = "Range" Then
  Set rSelection = Selection
    For Each rCell In rSelection
      tHex = Mid(rCell.Text, 6, 2) & Mid(rCell.Text, 4, 2) & Mid(rCell.Text, 2, 2)
      rCell.Interior.Color = WorksheetFunction.Hex2Dec(tHex)
    Next
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-07T13:47:19.847

简单得多：

```
ActiveCell.Interior.Color = WorksheetFunction.Hex2Dec(Mid$(ActiveCell.Text, 2)) 
```

Mid 去掉前导的“#”，Hex2Dec 将十六进制数转换为 VBA 可以使用的十进制值。

所以选择要处理的范围，然后运行：

```
Sub ColorCellsByHexInCells()
  Dim rSelection As Range, rCell As Range

  If TypeName(Selection) = "Range" Then
  Set rSelection = Selection
    For Each rCell In rSelection
      rCell.Interior.Color = WorksheetFunction.Hex2Dec(Mid$(rCell.Text, 2))
    Next
  End If
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-19T21:30:25.370

这是另一个选项 - 当您选择单元格时它会更新单元格颜色，假设单元格中的值以“#”开头并且是 7 个字符。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
  If (Left(ActiveCell.Text, 1) = "#" And Len(ActiveCell.Text) = 7) Then
    ActiveCell.Interior.Color = WorksheetFunction.Hex2Dec(Mid$(ActiveCell.Text, 2))
End If

End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-04T04:04:29.113

无需反复突破 VBA/工作表障碍即可进行转换。这个简化的版本得到正确的字节顺序：

```
Sub ColorCellsByHex()
    Dim r
    If TypeName(Selection) <> "Range" Then Exit Sub
    For Each r In Selection
        r.Interior.Color = Abs(("&H" & Mid(r, 6, 2) & Mid(r, 4, 2) & Mid(r, 2, 2)))
    Next
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-04T14:55:35.410

为此，可以使用 Hex2Dec 函数制作用户表单。

```
Function Hex2Dec(n1 As String) As Long
    Dim nl1 As Long
    Dim nGVal As Long
    Dim nSteper As Long
    Dim nCount As Long
    Dim x As Long
    Dim nVal As Long
    Dim Stepit As Long
    Dim hVal As String

    nl1 = Len(n1)
    nGVal = 0
    nSteper = 16
    nCount = 1
    For x = nl1 To 1 Step -1
       hVal = UCase(Mid$(n1, x, 1))
       Select Case hVal
         Case "A"
           nVal = 10
         Case "B"
           nVal = 11
         Case "C"
           nVal = 12
         Case "D"
           nVal = 13
         Case "E"
           nVal = 14
         Case "F"
           nVal = 15
         Case Else
           nVal = Val(hVal)
       End Select
       Stepit = (nSteper ^ (nCount - 1))
       nGVal = nGVal + nVal * Stepit
       nCount = nCount + 1
    Next x
    Hex2Dec = nGVal
End Function
...
UserForm1.TextBox1 = "RGB(" & Hex2Dec(UserForm1.txtHex1.Value) & "," & _
           Hex2Dec(UserForm1.txtHex2.Value) & "," & Hex2Dec(UserForm1.txtHex3.Value) & ")" 
```

例如；输入到文本框的值：#FF8800 - 结果：RGB(255,136,0)

# c++ - 创建游戏资产的通用行业标准是什么？

> ID：10455373
> 
> 赞同：2
> 
> 时间：2012-05-04T20:01:28.767
> 
> 标签：c++, c, game-engine, blender

我想从你们中一些知识渊博的游戏设计师那里获得一些关于创建游戏资产（纹理、模型等）的标准（或最普遍接受的约定）究竟是什么的见解。或者更确切地说，如果有什么我错过了。

这里有一些我特别想知道的事情......

1.  纹理文件的约定。
    *   尺寸（512x512、1024x1024 等）。
    *   文件类型（JPEG、BMP、PNG 等）。
2.  模型多边形计数的约定（在现代游戏中）。
    *   什么多边形数使某些东西成为“低多边形”模型。
    *   如何使用“高多边形”模型为更简单的模型生成良好的法线贴图。
3.  为对象设计 UV 贴图的正确方法。
    *   通常我的展开看起来还不错，但远不及生产质量。有合适的技术吗？
4.  以逼真的方式生成法线贴图的正确方法。

还有什么是开发某些资产的好应用程序。特别是音频。我已经使用 Blender 进行建模。

基本上我正在寻找交易的技巧，如果有人愿意分享当然=）

# java - 运行基本的 Web 服务器

> ID：10455386
> 
> 赞同：2
> 
> 时间：2012-05-04T20:02:10.927
> 
> 标签：java, web

我编写了一个实现基本 Web 服务器的 java 类。它从控制台获取端口号。这段代码非常基本，它返回客户端发送的内容。代码如下：

```
package p106;

import java.io.*;
import java.net.*;

public class HttpMirror {

public static void main(String[] args) {

    try
    {
        int port = Integer.parseInt(args[0]);

        ServerSocket ss = new ServerSocket(port);

        for(;;)
        {
            Socket client = ss.accept();

            BufferedReader in = new BufferedReader( new InputStreamReader(client.getInputStream()));
            PrintWriter out = new PrintWriter(client.getOutputStream());

            out.print("HTTP/1.0 200 en");
            out.print("Content-Type text/plain");

            String line;
            while( (line = in.readLine()) != null)
            {
                if(line.length() == 0)
                    break;
                out.print(line );

            }

            out.close();
            in.close();
            client.close();

        } // Tekrar döngüye gir ve bir sonraki bağlantıyı bekle. 
    }catch(Exception e)
    {
        System.err.println(e);
    }

}

} 
```

我运行这段代码，我必须在浏览器的地址栏中写些什么？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:06:33.840

您是否尝试过 localhost:*此处的端口号*？还是 127.0.0.1:*端口号*？

例如，如果端口号是 8050，那么地址将是**localhost:8050**或**127.0.0.1:8050**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:26:41.800

您没有指定用于启动 java 引擎的命令。

```
 int port = Integer.parseInt(args[0]); 
```

表示在命令行上传递端口。所以无论你通过什么端口，你都应该把它放在你的网络浏览器中。

前任：

```
java HttpMirror 12345
http://localhost:12345 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T21:55:08.207

首先你需要检查端口然后[http://localhost:Portnumber](http://localhost:Portnumber)例如[http://localhost:8050](http://localhost:8050)

# c++ - 在 A 类中引用 A 类的其他实例

> ID：10455392
> 
> 赞同：0
> 
> 时间：2012-05-04T20:02:33.477
> 
> 标签：c++, class, object, header, incomplete-type

我的标题中有这个（部分）代码

```
class Node
{
     Node prevNode;

     public:
     Node(float nodeXRotation, float nodeYRotation, 
         float nodeZRotation, float boneLength, float xOffset, 
         Node prevnode);
} 
```

但它给了我以下错误： IntelliSense：不完整的类型是不允许的（第 3 行：节点 prevNode；）

这是我初始化“节点”的地方

```
Node nodes[] = {    Node(0, 0, 0, 5, -14, NULL),     //Duimkootje 2
                Node(0, 0, 0, 5, -9, nodes[0]),  //Duimkootje 1
                    Node(0, 0, 0, 10, 0, nodes[1]), //DUIMHANDBOT

             Node(0, 25, 0, 10, 0), //WIJSVINGERHANDBOT
                Node(0, 25, 0, 8, -9, nodes[3]),  //Wijsvingerkootje 1
                Node(0, 25, 0, 7, -17, nodes[4]),  //Wijsvingerkootje 2
                 Node(0, 25, 0, 7, -24, nodes[5]),  //Wijsvingerkootje 3

             Node(0, 50, 0, 10, 0), //MIDDELVINGERHANDBOT
                 Node(0, 50, 0, 8, -9, nodes[7]), //Middelvingerkootje 1
                 Node(0, 50, 0, 8, -17, nodes[8]), //Middelvingerkootje 1
                 Node(0, 50, 0, 8, -24, nodes[9]), //Middelvingerkootje 1

             Node(0, 75, 0, 10, 0), //RINGVINGERHANDBOT
                 Node(0, 75, 0, 7, -9, nodes[11]), //Ringvingerkootje 1
                 Node(0, 75, 0, 8, -16, nodes[12]), //Ringvingerkootje 1
                 Node(0, 75, 0, 8, -24, nodes[13]), //Ringvingerkootje 1

             Node(0, 100, 0, 10, 0), //PINKHANDBOT
                 Node(0, 100, 0, 5, -9, nodes[15]), //Pinkkootje 1
                 Node(0, 100, 0, 5, -14, nodes[16]), //Pinkkootje 1
                 Node(0, 100, 0, 6, -19, nodes[17]), //Pinkkootje 1 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:07:07.400

Mooing Duck 在评论中有答案。问题出现是因为您在尝试定义节点时尚未完全定义节点。这意味着编译器无法确定要分配多少内存。

解决方案是 make `prevNode`a `Node*`，因为这样你就声明了一个已知大小的东西。

有趣的是，如果您是从 Java 开始使用 C++，那么您*可以*在 Java 中解决这个问题。这是因为在 Java 中任何类似的声明*始终*是对象引用。您不需要有大小信息，因为您所做的总是要“指向”某物，而不是为某物留出空间。这也是为什么，在 Java 中，你总是想要做`Foo x = new Foo()`.

# c# - 使用响应式扩展 (rx) 枚举及时发生的事件

> ID：10455395
> 
> 赞同：4
> 
> 时间：2012-05-04T20:02:45.597
> 
> 标签：c#, .net, system.reactive

```
 public interface Event
 {
      Guid identifier;
      Timestamp ts;
 } 
```

我们正在考虑使用 Reactive Extensions 来重写我的金融公司的一个问题。

前提是我们获得由 Guid（股票代码 + 嵌入其中的唯一性熵）、时间戳和 Value 字段标识的事件。这些以很高的速度出现，我们不能对这些对象采取行动，直到“至少”在 X 秒（10 秒）之后，我们必须对它们采取行动，并将它们从系统中删除。

把它想象成两个窗口，一个“10 秒”的初始窗口（例如 T0 到 T10），我们在其中识别所有唯一事件（基本上，按 guid 分组），然后我们查看下一个“10 秒”，“辅助窗口”（T10-T20），以确保我们正在实施“至少”10 秒的政策。从“初始窗口”中，我们删除所有事件（因为我们已经考虑了它们），然后从“辅助窗口”中，我们删除“初始窗口”中发生的事件。我们继续移动 10 秒滑动窗口，所以现在我们正在查看窗口 T20-T30，重复并冲洗。

我怎么能在 Rx 中实现它，因为它似乎是要走的路。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:49:26.933

如果您可以依靠服务器时钟和消息中的时间戳（也就是说，我们处于“现实生活”模式），**并且**您在滑动 10 秒延迟而不是跳跃 10 秒窗口之后，那么您可以将事件延迟 10 秒：

```
var events = new Subject<Event>();  
var delayedEvents = events.Delay(TimeSpan.FromSeconds(10)); 
```

检查独特事件等只是将它们添加到某种集合中的问题：

```
var guidSet = new HashSet<Guid>();  
delayedEvents.Do(e => guidSet.Add(e.identifier)); 
```

如果您的问题是您必须等待 10 秒，然后一次处理最后 10 秒，那么您只想缓冲 10 秒：

```
var bufferedEvents = events.Buffer(TimeSpan.FromSeconds(10));
bufferedEvents.Do(es => { foreach (var e in es) guidSet.Add(e.identifier); }); 
```

我没有展示滑动 10 秒窗口的示例，因为我无法想象这就是您想要的（事件被多次处理）。

* * *

现在我们变得严肃起来。假设您不想依赖墙上时间，而是想使用事件中的时间来驱动您​​的逻辑。假设事件被重新定义为：

```
 public class Event
 {
      public Guid identifier;
      public DateTime ts;
 } 
```

创建历史调度程序并从原始事件中提供已调度的事件：

```
var scheduler = new HistoricalScheduler();
var driveSchedule = events.Subscribe(e => scheduler.AdvanceTo(e.ts));   
var target = events.SelectMany(e => Observable.Timer(e.ts, scheduler).Select(_ => e)); 
```

现在您可以简单地使用常规的 Rx 组合器`target`代替`event`，并通过调度程序以便适当地触发它们，例如：

```
var bufferedEvents = target.Buffer(TimeSpan.FromSeconds(10), scheduler); 
```

这是一个简单的测试。每隔 30 秒“虚拟”创建一百个事件，但每秒实时触发：

```
var now = DateTime.Now;
var test = Enumerable.Range(0,99).Select(i =>
    Scheduler.ThreadPool.Schedule(
        TimeSpan.FromSeconds(i), 
        () => events.OnNext(new Event() { 
            identifier = Guid.NewGuid(), 
            ts = now.AddSeconds(i * 30) 
        })
    )
).ToList(); 
```

订阅它并请求 60 秒的缓冲事件 - 实际上每 2 个“真实”秒（60 个虚拟秒）接收 2 个事件：

```
target.Select(e => String.Format("{0} {1}", e.identifier, e.ts.ToString()))
      .Buffer(TimeSpan.FromSeconds(60), scheduler)
      .Select(es => String.Join(" - ", es))
      .DumpLive(); 
```

# python - Python读取另一个进程打开的文件导致UnicodeDecodeError

> ID：10455406
> 
> 赞同：0
> 
> 时间：2012-05-04T20:03:22.413
> 
> 标签：python, file, encoding

我正在尝试在编辑器（VIM）中打开的文件的内容。

身份证：

```
fileh = open( path, 'r' )
content = fileh.read()
fileh.close() 
```

当文件在 VIM 中打开时，这会导致错误。如果 VIM 对文件持有排他锁，我可以理解这一点，但根据错误消息，情况似乎并非如此：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0x80 in position 16: ordinal not in range(128) 
```

在我看来，VIM 在打开的文件中写入了一个非 ascii 字符！

使用或 utf-16 打开文件`open( path, 'r', encoding='utf-8')`似乎不起作用（发生 utf-8/utf-16 解码错误）。

任何帮助表示赞赏！

更新：当我在 Gedit 而不是 VIM 中打开文件时，不会发生此问题。当然这不是一个修复，所以我仍然需要找出问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:01:16.117

好的，我想通了。

问题不在于 python 无法解码我感兴趣的文件，而是 python 读取由 VIM 生成的 .swp 文件。我的程序没有正确过滤输入目录。

不过感谢您的帮助！

# php - jquery ui的“selectable” - 需要调用codeigniter模型函数

> ID：10455408
> 
> 赞同：1
> 
> 时间：2012-05-04T20:03:51.107
> 
> 标签：php, javascript, ajax, jquery-ui, codeigniter

（原始问题）我正在使用 jquery ui 的可选脚本来控制我的 webapp 中的特定活动关键字。在此处查看：[www.rickymason.net/letschat/main/home](http://rickymason.net/letschat/main/home)以供参考

我对 javascript 的经验很少，我正试图弄清楚如何启动我在主模型中拥有的功能。

根据答案更新功能：

我更新了我的代码以支持新的 JSON/AJAX 格式。这需要我创建一个活动/非活动会话过滤器，以便用户可以正常添加过滤器，并始终使用 AJAX 更新线程列表。这对我来说更有意义。

这是我目前拥有的代码，但仍然无法正常工作。我试图做到这一点，因此当用户单击可选类别（通过 Jquery UI）时，与选择关联的 divID 通过 AJAX 传递并返回更新 div id =“board”的线程列表数组。

这是我当前的控制器设置：

```
public function home($page = 'home')
    {
        $data['user_id'] = $this->tank_auth->get_user_id();
        $data['username'] = $this->tank_auth->get_username();
        $data['threads'] = $this->thread_model->session_load();
        $data['title'] = ucfirst($page); // Capitalize the first letter
        $data['page'] = $page;
        $this->load->view('templates/head', $data);
        $this->load->view('templates/nav', $data);
        $this->load->view('main/newthread', $data);
        $this->load->view('main/addfilter', $data);
        $this->load->view('main/checkbox', $data);
        $this->load->view('main/displayfilter',$data);
        $this->load->view('main/board', $data);
        $this->load->view('templates/footer');
    }

    public function updatefilters($filters)
    {
        $filterarray = split("|", $filters);
        $this->thread_model->create_session_filter($filterarray); 
        $threadarray = $this->thread_model->get_threads();
        $data['json'] = '{"content":' + $threadarray + '}';
        $this->load->view('json_view', $data); // See step 4!!!
    } 
```

这是我当前的模型代码：

```
 public function get_threads()
    {
            $filter = $this->session->userdata('filter');
            $num_tags = count($filter);
            if ($num_tags > 0 && $num_tags <= 8) {
                $sql_select = "SELECT DISTINCT t.* ";
                $sql_from = " FROM ";
                $sql_where = " WHERE ";
                $sql_joins = "";
                $sql_order = "ORDER BY t.timestamp DESC";
                for ($i=0;$i<$num_tags;++$i) {
                    if ($i==0) {
                    $sql_from .= " filter AS f ";
                    $sql_where .= " f.tag LIKE '%" . $filter[0] . "%'";
                    $sql_joins .= " INNER JOIN filter_thread AS ft ON ft.filter_id = f.filter_id
                                    INNER JOIN thread AS t ON ft.thread_id = t.thread_id";
                    }
                    else {
                    $sql_where .= " OR f.tag LIKE '%" . $filter[$i] . "%'";
                    }
                }
            } else {
                break; 
            }
            $sql = $sql_select . $sql_from . $sql_joins . $sql_where . $sql_order;

            $query = $this->db->query($sql);
            $thread = $query->result_array();
        return json_encode($thread); //I am aware this is not correct
    }

    public function create_session_filter($filterstring)
    {
        $filterarray[] = $filterstring;
        $filter['filter'] = $filterarray;
        if ($this->session->userdata('filter') == TRUE) {
            $sessionfilter = $this->session->userdata('filter');
            $new = array_merge($sessionfilter, $filter['filter']);
            $this->session->unset_userdata('filter');
            $filter['filter'] = $new;
            $this->session->set_userdata($filter);
        } else {
            if (!$filterstring) {} else {
            $this->session->set_userdata($filter);
            }
        }
    }

    public function create_session_inactive_filter($filterstring)
    {
        $filterarray[] = $filterstring;
        $filter['inactivefilter'] = $filterarray;
        if ($this->session->userdata('inactivefilter') == TRUE) {
            $sessionfilter = $this->session->userdata('inactivefilter');
            $new = array_merge($sessionfilter, $filter['inactivefilter']);
            $this->session->unset_userdata('inactivefilter');
            $filter['inactivefilter'] = $new;
            $this->session->set_userdata($filter);
        } else {
            if (!$filterstring) {} else {
            $this->session->set_userdata($filter);
            }
        }
    } 
```

这是我当前的视图代码：

应用程序/main/json_view.php

```
<?php
header("Content-Type: application/json");
echo $json;
?> 
```

应用程序/main/bdisplayfilter.php

```
<script>
    $(function() {
        $( "#selectable" ).selectable({
            selected: updateFilters,
            unselected: updateFilters
        });
        function updateFilters(ev, ui){    
        alert ("hello");
        // get the selected filters
        var $selected = $('#selectable').children('.ui-selected');
        // create a string that has each filter separated by a pipe ("|")
        var filters = $selected.map(function(){return this.id;}).get().join("|");
        $.ajax({
            url: '/main/updateFilters', //see step 2
            data: { filters: filters },
            success: function(data){
                // data is whatever json you decide to return from the server.
                // An easy way to do things is have data look like this:
                // { content: "<div>All my new threads that I want to show up</div>" }
                // then, you can replace some element on the page with the new content
                // For example, say your container has an id of threadContainer:
                $('#select').replaceWith(data.content);
            }
        }); }
    });
</script>
<ol id="selectable">
    <li class="ui-state-default" id="everything">Everything!</li>
    <li class="ui-state-default" id="entertainment">Entertainment</li>
    <li class="ui-state-default" id="sci/tech">Sci/Tech</li>
    <li class="ui-state-default" id="news">News</li>
    <?php 

    if ($this->session->userdata('inactivefilter') == true) {
            $inactivefilter = $this->session->userdata('inactivefilter');
            foreach ($inactivefilter as $new)
                {
                    echo "<li class='ui-state-default' id='custom'>$new</li>";
                }
        }
    ?>
</ol>
<?php
if ($this->session->userdata('inactivefilter') == true) {
echo "<form action='".base_url()."main/clear_filter'><input type='submit' value=clear></form>";
} ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:03:24.050

**编辑：**我更新了 ajax 调用的 url 和数据部分，并添加了一个额外的步骤来启用查询字符串参数。

**1) 进行 AJAX 调用**

您将希望对选中和未选中进行相同的调用，因为您可以有多个过滤器，并且您需要对这两个事件进行相应的更新。所以，我将定义一个两个事件都可以调用的通用函数。

```
$(function() {
    $( "#selectable" ).selectable({
        selected: updateFilters,
        unselected: updateFilters
    });   
    function updatefilters(ev, ui){
        // get the selected filters
        var $selected = $('#selectable').children('.ui-selected');
        // create a string that has each filter separated by a pipe ("|")
        var filters = $selected.map(function(){return this.id;}).get().join("|");
        $.ajax({
            url: '/index.php',
            data: { c: main, m: updateFilters, filters: filters },
            success: function(data){
                // data is whatever json you decide to return from the server.
                // An easy way to do things is have data look like this:
                // { content: "<div>All my new threads that I want to show up</div>" }
                // then, you can replace some element on the page with the new content
                // For example, say your container has an id of threadContainer:
                $('#threadContainer').replaceWith(data.content);
            }
        });
    }
}); 
```

**2) 在 application/config.php 中启用查询字符串参数**

本文底部称为启用查询字符串的部分解释了如何执行此操作： [http ://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

**3）创建一个将接收过滤器的操作**

请注意，我正在使用一个名为 Page 的控制器（它位于 /application/controllers/page.php 中）。此操作（updateFilters）可以存在于您想要的任何控制器中。

```
class Page extends CI_Controller {

    function __construct()
    {
        parent::__construct();
    }

    function index()
    {
    }

    function updateFilters($filters)
    {
        $filterarray = split("|", $filters);
        create_session_filter($filterarray); 

        $articlesHTML = getThreadList($filterarray); // See step 4!!!
        $data['json'] = '{"content":' + $articlesHTML + '}';
        $this->load->view('json_view', $data); // See step 5!!!
    }

    /* I've updated this slightly to accept an array */
    public function create_session_filter($filterarray)
    {
        $filter['filter'] = $filterarray;
        //... the rest of your stuff you already had
    }
} 
```

**4）实现getThreadList方法**

我认为你没有提到你是否已经为此设置了一些东西。这基本上会采用一组过滤器，然后根据它渲染一个线程列表。

**5) 创建 json_view (如果还没有的话)**

这将设置内容类型，以便浏览器知道内容是 json。

在 /application/views/json_view.php 中：

```
<?php
header("Content-Type: application/json");
echo $json;
?> 
```

# grails - Grails 按日期分组

> ID：10455409
> 
> 赞同：6
> 
> 时间：2012-05-04T20:03:53.993
> 
> 标签：grails, grails-orm

我有一个带有日期属性的域类。

```
class Transaction {
    LocalDate time
    BigDecimal amount
} 
```

如何查询按月分组的所有交易的总和？我在 GORM 中找不到按日期范围分组的任何支持。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-04T22:31:30.263

将基于公式的字段添加到您的域类中以获取截断日期：

```
class Transaction {
    LocalTime time
    BigDecimal amount
    String timeMonth

    static mapping = {
        timeMonth formula: "FORMATDATETIME(time, 'yyyy-MM')" // h2 sql
        //timeMonth formula: "DATE_FORMAT(time, '%Y-%m')"   // mysql sql
    }
} 
```

然后，您将能够运行如下查询：

```
Transaction.withCriteria {
    projections {
        sum('amount')
        groupProperty('timeMonth')
    }
} 
```

# ruby-on-rails - 对于 Rails，什么是好的购物车 gem？

> ID：10455410
> 
> 赞同：18
> 
> 时间：2012-05-04T20:03:59.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想在我的 Rails 应用程序中实现基本的购物车功能......是否有任何好的宝石可以使这个过程变得简单？

即我希望购物者能够将产品和数量添加到他们的结帐中，并且我希望管理员能够向商店添加新产品（并编辑/删除现有产品）。

建议？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T20:10:50.937

[Railscasts](http://railscasts.com/?tag_id=23)涵盖了广泛的支付和电子商务宝石。

还可以在[The Ruby Toolbox](https://www.ruby-toolbox.com/categories/e_commerce)和[此处](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=payment)找到 gem 列表。

此外，未涵盖，您可以使用 Saas 产品[Shopify](http://www.shopify.com/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T13:07:20.123

很少有：

*   [https://github.com/spree/spree](https://github.com/spree/spree) 引擎，插件，大，没有好的 i18n

*   [https://github.com/piggybak/piggybak](https://github.com/piggybak/piggybak) 引擎，插件，没有 i18n，新项目还有很多变化

*   [https://github.com/nimbleshop/nimbleshop](https://github.com/nimbleshop/nimbleshop)

*   [http://www.ror-e.com/](http://www.ror-e.com/)

*   [https://github.com/potionfactory/potionstore/](https://github.com/potionfactory/potionstore/) 不是引擎

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-01T07:10:54.057

也许你可以试试[https://github.com/crowdint/acts_as_shopping_cart](https://github.com/crowdint/acts_as_shopping_cart) 那个宝石适合简单的购物车。如果您需要更新购物车功能，也许您几乎不需要修改

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-05T19:58:59.143

几个的列表很好，现在又多了一个引擎：[RubyClerks](http://rubyclerks.org)

它既小又简单，但却是小型企业所需要的。所以它使用的内存比其他的少得多。

# javascript - 使用 jQuery 追加

> ID：10455411
> 
> 赞同：3
> 
> 时间：2012-05-04T20:04:01.267
> 
> 标签：javascript, jquery, drupal

好的，这是一个很长的帖子。我有一个多 DOM 树结构，我需要遍历它才能插入图像。作为记录，图像很好地传递到 PARAM。我不明白的是为什么它没有发布。所以，这是我目前正在使用的代码。

```
function validateImage(event) {
    var $input = $(this);
    var width = 75;
    var height = $input.closest('.logo-block').length > 0 ? 35: 75;
    $input.animate({
        'backgroundColor': '#999'
    },
    250);
    $.get('/meta/thumbnail/' + $input.val() + '/' + height + '/' + width + '/',
    function(result) {
        $input.stop();
        if (result != 'No Image Available') {
            $input.css('background-color', '#55FF00');
            var $block = $input.closest('div.thumb-image');
            if ($block.closest('.center-callout-info').length > 0) {
                // in center column, add image.
                $input.val('');
                $('<div class="thumb">' + result + '</div>').appendTo($block.closest('.image-container').not($block.closest('.more-images .image-container'))).find('img').addClass('selected');
            $('.center-callout-info .block img.meta-thumb').click(bindImageSelection);
            }
        } else {
            $input.css('background-color', '#FF0000');
            $input.val('');
        }
        $input.animate({
            backgroundColor: '#FCFCFD'
        },
        2000);
    });
} 
```

HTML如下：

```
<fieldset class="collapsible collapsed">
    <legend class="collapse"><a href="#">Image Management</a></legend>
    <div class="fieldset-wrapper"><input type="button" value="Save Images" id="saveForm" class="submitButton" name="save" />
        <div class="center-callout-info">
            <div class="callout-images">
                <div class="high-res block active-tab" id="46051">
                    <div class = "image-container">
                        <div class="thumb-image thumb selected" id="AVE_BOX_TOPS_EDUCATION_4C">
                        <img class="meta-thumb" height="" src="/thumbs/AVE_Box_Tops_Education_4C.png" title="AVE_BOX_TOPS_EDUCATION_4C" /></div>
                    <div class="thumb-image thumb selected" id="FEL_BANKERS_BOX_BLK">
                        <img class="meta-thumb" height="" src="/thumbs/FEL_BANKERS_BOX_BLK.png" title="FEL_BANKERS_BOX_BLK" /></div>
                    <div class="thumb-image thumb selected" id="FEL_BB_FOLDER_RAILS_BLK">
                        <img class="meta-thumb" height="" src="/thumbs/FEL_BB_Folder_Rails_BLK.png" title="FEL_BB_FOLDER_RAILS_BLK" /></div>
                    <div class="thumb-image thumb selected" id="FEL_SFI_BLK">
                        <img class="meta-thumb" height="" src="No Image Available" title="FEL_SFI_BLK" /></div>
                    <form action="/node/46051/edit"  accept-charset="UTF-8" method="post" id="skuimage-get-more-form">

                        <div><div class="form-item" id="edit-new-high-res-wrapper">
                        <label for="edit-new-high-res">New: </label>
                        <input type="text" maxlength="128" name="new_high_res" id="edit-new-high-res" size="15" value="AVE_AVERY_BLK" class="form-text new-button" />
                        </div>
                        <input type="hidden" name="form_build_id" id="form-de9c77d3f4d32257a52dc609e6697769" value="form-de9c77d3f4d32257a52dc609e6697769"  />
                        <input type="hidden" name="form_token" id="edit-skuimage-get-more-form-form-token" value="f7bb86ba8678fa2fb5b911f1df819bec"  />
                        <input type="hidden" name="form_id" id="edit-skuimage-get-more-form" value="skuimage_get_more_form"  />

                        </div></form>
                        </div></div></div></div></div></fieldset> 
```

现在，我希望`<IMG>`与其他的一起出现`<IMG>`，它们位于带有 class 的 div 内部`image-container`。

我想我在这里的信息中包含了所有内容。任何帮助都会很棒。

编辑 编辑 编辑 编辑 编辑 编辑

这是答案：

好的，这就是答案。在上面，您将看到以下代码行：

```
var $block = $input.closest('div.thumb-image'); 
```

但是，在遍历 DOM 树之后，我发现我需要将其设置为我想要放置图像的实际位置。所以，`var $block`其实是这样的：

```
var $block = $input.closest('.image-container'); 
```

在那之后，我也不得不改变它放置图像的位置。

```
$('<div class="thumb">' + result + '</div>').appendTo($block).find('img').addClass('selected'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T00:06:53.727

我对你的帖子不是很清楚。但是如果稍微了解一下，它是关于发送图像并从应用程序的后端获得响应的。如果我错了，我很抱歉，但如果我是对的。那么这是我的答案——

您不能使用 ajax 上传文件。也就是说，您不能将 $.ajax()、$.get()、$.post() 等函数中的文件作为数据发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T18:58:48.893

6年后，我会回答我自己的问题。哈哈

好的，这就是答案。在上面，您将看到以下代码行：

```
var $block = $input.closest('div.thumb-image'); 
```

但是，在遍历 DOM 树之后，我发现我需要将其设置为我想要放置图像的实际位置。因此， var $block 实际上如下：

```
var $block = $input.closest('.image-container'); 
```

在那之后，我也不得不改变它放置图像的位置。

```
$('<div class="thumb">' + result + '</div>').appendTo($block).find('img').addClass('selected'); 
```

# jquery - 使用 jQuery 替换文本中断图像

> ID：10455413
> 
> 赞同：1
> 
> 时间：2012-05-04T20:04:11.430
> 
> 标签：jquery, replace, alt

我有一个经常使用注册商标符号“®”的网站。此符号以与周围文本相同的大小呈现。因为我需要它显示更小和上标，所以我使用 jQuery 在页面上查找“®”的所有实例并将其替换为“ `<span class="reg-mark">®</span>`”。这样我就可以设置该角色的显示样式。

我正在使用以下代码进行搜索和替换：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        var strNewString = $('body').html().replace(/®/g,'<span class=\"reg-mark\">®</span>');
        $('body').html(strNewString);
    });
</script> 
```

这成功地替换了“®”的所有实例，以便我可以按照我想要的方式设置它们的样式。

但是，它还替换了标签的“alt”属性中的“®”实例，这会破坏图像的显示。

有没有办法可以在跳过属性值的同时完成此搜索和替换？

谢谢，PJ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:20:09.690

```
$('div, p, a, h1, h2, h3').filter(":contains('®')").each(function(){
    $(this).html($(this).html().replace('®', '<span class="reg-mark">®</span>'));
}); 
```

**[演示](http://jsbin.com/iqonac/3/edit)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:25:51.003

我会选择一个要求 ® 在尖括号之间的正则表达式

例如： /(>[^<] *)®([^<]* <)/

然后你可以将第 1 部分、新插入和第 3 部分连接到新匹配。

然而，这仅匹配出现在 HTML 括号之间的事件。如果您想匹配任何类型的属性中的文本，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:12:35.917

使用 JQuery 而非选择器。例如，只需将其“不”放在`<img>`标签上即可。 [http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        var strNewString = $('body:not(img)').html().replace(/®/g,'<span class=\"reg-mark\">®</span>');
        $('body').html(strNewString);
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T02:47:43.460

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        var strNewString = $('body:not(img)').html().replace(/®/g,'<span class=\"reg-mark\">®</span>');
        $('body').html(strNewString);
    });
</script> 
```

我认为那会做到的。它应该在 BODY 中找到所有“@”，但在 IMG 标记中跳过任何。还有一些选择器可以让您专注于 ALT 标签。例如：

```
$('img[alt="@"]') 
```

# sql - 对于 Entity Framework，使用 .First() 还是 .Take(1) 来表示“TOP 1”会更好吗？

> ID：10455414
> 
> 赞同：46
> 
> 时间：2012-05-04T20:04:16.013
> 
> 标签：sql, linq, entity-framework, ienumerable, linq-to-objects

我们正在实施一些 EF 数据存储库，并且我们有一些查询，其中包括`TOP 1`

我已经阅读了许多建议使用`.Take(1)`
我正在审查的代码使用的帖子`.First()`

我知道这两个都为对象分配产生相同的结果，但是它们实际上是否都解析为相同的查询？`TOP 1`查询数据库时，这两个请求实际上是否都适用？或者他们会将查询完整地执行到可枚举中，然后简单地获取集合中的第一个条目？

此外，如果我们使用了，那么我们`.FirstOrDefault()`为什么要期待任何不同的行为呢？我知道在使用 IEnumerable 时，调用`.First()`空集合会抛出异常，但如果这*实际上*只是将查询更改为包含，那么我应该期望和....`TOP 1`之间绝对没有功能差异，对吗？`.First()``.FirstOrDefault()`

或者，是否有比这些 Enumerable 扩展更好的方法来执行查询`TOP 1`？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-04T20:19:40.393

从[LINQPad](http://www.linqpad.net)：

**C#**：

```
age_Centers.Select(c => c.Id).First();
age_Centers.Select(c => c.Id).FirstOrDefault();
age_Centers.Select(c => c.Id).Take(1).Dump(); 
```

**SQL**：

```
SELECT TOP (1) [t0].[Id]
FROM [age_Centers] AS [t0]
GO

SELECT TOP (1) [t0].[Id]
FROM [age_Centers] AS [t0]
GO

SELECT TOP (1) [t0].[Id]
FROM [age_Centers] AS [t0] 
```

*请注意，`Take(1)`枚举并返回一个`IQueryable`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T20:07:42.910

将 DataContext [Log](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.log.aspx)属性重定向到 Console.Out 或 TextFile 并查看每个选项产生的查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T20:16:07.180

工作原理`.First()`：

> 如果集合是 IList 类型，则通过索引位置访问第一个元素，这取决于集合实现。否则，迭代器返回第一个元素。

并且`.Take(int count)`总是迭代。

如果有任何收获，如果集合实现`IList`并且按索引访问第一个元素的速度高于返回迭代器的速度，就会发生这种情况。我不相信这会很重要。;)

资料来源：

[http://www.hookdonlinq.com/FirstOperator.ashx](http://www.hookedonlinq.com/FirstOperator.ashx)

[http://www.hookedonlinq.com/TakeOperator.ashx](http://www.hookedonlinq.com/TakeOperator.ashx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T20:21:06.503

首先会查询Take 1，所以查询没有区别。调用 FirstOrDefault 将是一步语句，因为 Take 返回 IEnumerable 你是否需要调用 First。

First 会抛出异常，所以 FirstOrDefault 总是首选。

当然，编写 EF 查询转换器的人足够聪明，可以调用 Take 1，而不是执行整个结果集并返回第一项。

您可以使用 SQL 探查器进行验证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-05T14:09:54.493

```
**First()** operates on a collection of any number of objects and returns the first object.        **Take(1)** operates on a collection of any number of objects and returns a collection containing the first object. 
```

您还可以使用 Single **Single()**对仅包含一个对象的集合进行操作并简单地返回该对象。

# java - 如何实现 java.text.Format

> ID：10455416
> 
> 赞同：2
> 
> 时间：2012-05-04T20:04:25.127
> 
> 标签：java

我想创建一个扩展，[`java.text.Format`](http://docs.oracle.com/javase/7/docs/api/java/text/Format.html)但我不知道如何处理该[`Format.parseObject`](http://docs.oracle.com/javase/7/docs/api/java/text/Format.html#parseObject%28java.lang.String%29)方法。javadoc 状态

> 从给定字符串的开头解析文本以生成对象。该方法可能不会使用给定字符串的整个文本。

那么如果你想实现这个方法，你如何处理可以解析整个输入字符串的情况呢？您是抛出异常还是返回解析值（或其他内容）？请注意，异常的 javadoc 声明 a`ParseException`被抛出

> 如果无法解析指定字符串的开头。

IMO，如果我可以解析整个`String`，我当然可以解析开头，所以没有理由抛出异常。查看JDK中这个方法的实现，他们似乎不尊重自己的文档

```
public Object parseObject(String source) throws ParseException {
    ParsePosition pos = new ParsePosition(0);
    Object result = parseObject(source, pos);
    if (pos.index == 0) {
        throw new ParseException("Format.parseObject(String) failed",
            pos.errorIndex);
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:15:44.007

“该方法可能不会使用给定字符串的整个文本。”

您应该将此解释为“可能会或可能不会......”

顺便说一句 - java 中已经有一堆内置的格式化程序。除了用于数字的 NumberFormat 和 DecimalFormat 之外，我最喜欢的一个（大概 10 年没用过 - 只是没有理由使用它）是[`java.text.MessageFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html). 去看看，看看它是否满足您的需求

# user-interface - wxPython 等价于 Tkinter 的 Tk.iconbitmap 是什么？

> ID：10455419
> 
> 赞同：0
> 
> 时间：2012-05-04T20:04:39.807
> 
> 标签：user-interface, wxpython

所以我正在学习 wxPython，并将我用 python + Tk 编写的应用程序转换为 wxPython。我是该框架的新手，刚刚阅读了 wxPython网站[上的入门页面。](http://wiki.wxpython.org/Getting%20Started)我想知道是否有人知道 Tk.iconbitmap 的 wxPython 等效项，以便我可以在主窗口的角落放置一个小图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:07:54.613

那将是[wx.Icon](http://www.wxpython.org/docs/api/wx.Icon-class.html)。

您可以使用[wx.TopLevelWindow.SetIcon()](http://www.wxpython.org/docs/api/wx.TopLevelWindow-class.html#Icon)将一个应用到您的主窗口。

# php - 如何将多个表单输入作为序列化数据集提交？

> ID：10455423
> 
> 赞同：0
> 
> 时间：2012-05-04T20:04:56.280
> 
> 标签：php, serialization

```
$serialize_me = array(
    array(
      'Name' => 'English',
      'Apprev' => 'en',
      'default' => true,
    ),
    array(
      'Name' => 'عربي',
      'Apprev' => 'ar',
      'default' => false,
    ),
); 
$serialized = serialize($serialize_me); 
```

使用这个数组，我可以序列化数据并将其插入数据库。但是如何使用表单构建这样的数组呢？我正在尝试构建一个允许我序列化数据并将其插入数据库的表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:17:47.897

在 HTML 端（例如调用whatever.php）：

```
<form action="action.php" method="post">
<?php
  $num_languages = 2; // Set this to the number of languages you want.
  for($x = 0; $x < $num_languages; $x++) {
?>
<input type="text" name="name[<?php echo $x; ?>]" />
<input type="text" name="apprev[<?php echo $x; ?>]" />
<input type="checkbox" name="default[<?php echo $x; ?>]" />
<?php } ?>
</form> 
```

然后在 PHP 端（在本例中是一个名为 action.php 的文件）：

```
<?php
  $array_serialize = array();
  foreach ($_POST['name'] as $key => $value) {
    $array_serialize[$key]['Name'] = $value;
    $array_serialize[$key]['Apprev'] = $_POST['apprev'][$key];
    $array_serialize[$key]['default'] = ($_POST['default'][$key] == 'on')?true:false;
  }
  $serialized = serialize($array_serialize); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:11:14.607

将 name 属性设置为数组。像这样：

```
<?php 

if($_POST)
{
    var_dump($_POST);
}

?>

<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <form method="post">
        <input name="in[0][name]" value="English" />
        <input name="in[0][apprev]" value="en" />
        <input name="in[0][default]" value="true" />

        <input name="in[1][name]" value="Other" />
        <input name="in[1][apprev]" value="ar" />
        <input name="in[1][default]" value="false" />
        <input type="submit" />
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:13:50.693

当您发送表单时，您可以在数组中使用所有已发送的字段，`$_POST`或者`$_GET`取决于您使用的方法。

您可以序列化该数组并将其存储在数据库中，但我绝对不建议这样做，因为它使数据检索和操作变得不必要。

查看您的示例，我将有一个包含（至少...）3 个字段的数据库表`Name`，`Apprev`并且`default`您的示例将向该表添加两行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:15:40.607

此代码在 PHP 代码中提供了更多的可移植性，您可以在不更改 PHP 代码的情况下动态设置数据的名称。

```
<!doctype html>
<html>
<head>
    <title>My Form</title>
</head>
<body>
    <?php
        if (isset($_POST['submit'])) {
            $name = $_POST['name'];
            for ($i=0; $i<count($name); $i++) {
                foreach ($name[$i] as $k => $v) {
                    $serialize[$i][$k] = (($v=="1") ? TRUE : (($v=="0") ? FALSE : $v));
                }
            }
            $serialized = serialize($serialize);
        }
    ?>
    <form name="myform" method="POST">
        <!-- English Language -->
        <?php
            $max = 2;
            for ($i=0; $i<$max; $i++) {
        ?>
        <input type="text" name="name[<?php echo $i; ?>][Name]" value="English">
        <input type="text" name="name[<?php echo $i; ?>][Apprev]" value="en">
        <input type="text" name="name[<?php echo $i; ?>][default]" value="0">
        <?php
            }
        ?>
        <input type="submit" name="submit" value="submit">
    </form>
</body>
</html> 
```

# html - 在发送电子邮件的函数中使用 html

> ID：10455425
> 
> 赞同：0
> 
> 时间：2012-05-04T20:05:10.050
> 
> 标签：html, wordpress, email

我正在使用 wordpress 中的功能在角色更改时向用户发送电子邮件。我需要在其中插入一些 html，`$message`但它只是作为电子邮件中的文本出现。如何正确使用消息中的 html 标签？

```
 function user_role_update( $user_id, $new_role ) {
$site_url = get_bloginfo('wpurl');
$user_info = get_userdata( $user_id );

if (user_can( $user_id, 'capability' ) ) {

    $to = $user_info->user_email;
    $subject = "Role changed: ".$site_url."";
    $message = "Hello " .$user_info->display_name . " your role has changed on     ".$site_url.", congratulations you are now an " . $new_role;
    wp_mail($to, $subject, $message);

} elseif (user_can( $user_id, 'capability' ) ) {

// etc...

}

}
add_action( 'set_user_role', 'user_role_update', 10, 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:10:25.447

您需要在邮件消息的标题中添加一个内容类型，表示它将被格式化为 HTML：

```
$to = $user_info->user_email;
$subject = "Role changed: ".$site_url."";
$headers = "Content-Type: text/html\r\n";
$message = "Hello " .$user_info->display_name . " your role has changed on     ".$site_url.", congratulations you are now an " . $new_role;
wp_mail($to, $subject, $message, $headers); 
```

# html - 如何在有边框的元素上强制宽度？

> ID：10455434
> 
> 赞同：0
> 
> 时间：2012-05-04T20:06:02.223
> 
> 标签：html, css, twitter-bootstrap

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)进行页面布局，并且我想在列中插入[CSS3 框阴影](http://www.webdesignshock.com/css3-box-shadow/)。

我遇到的唯一问题是盒子阴影有一个 1px 的边框，这足以让我的第二列换行到下一行。如果我删除边框，它会很好地对齐。

如果我从列宽中减去 2px，它看起来正是我想要的。但是，我想利用 Bootstrap 的流畅布局（它基于百分比而不是像素），因此没有简单的方法可以简单地使`<div>`2 个像素比其他像素更窄。

我真的不喜欢边框不在项目宽度内的方式。有没有人看到一种方法让我`<div>`尊重当前的宽度，即使有边框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:11:24.853

利用

```
-webkit-box-sizing: border-box; 
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

并且边框的宽度将添加到框内。

这是一个包含两个 100x100 大小和 20px 边框的 div 的示例。第一个有'box-sizing'，第二个没有：http: [//jsfiddle.net/y3zxC/](http://jsfiddle.net/y3zxC/)。

# python - 使 Django 1.3.1 中的视图缓存过期

> ID：10455438
> 
> 赞同：2
> 
> 时间：2012-05-04T20:06:10.720
> 
> 标签：python, django, caching, django-views

我正在尝试使模型上的视图级缓存过期`post_save`（通过[https://docs.djangoproject.com/en/1.3/topics/cache/?from=olddocs#the-per-view-cache](https://docs.djangoproject.com/en/1.3/topics/cache/?from=olddocs#the-per-view-cache)设置） . 我做了一些谷歌搜索，并在 SO：[Expire a view-cache in Django 上找到了这个答案：Expire a view-cache in Django?](https://stackoverflow.com/questions/2268417/expire-a-view-cache-in-django) 但这对我不起作用。

我在 freenode 上的#django 房间四处询问，一致认为这可能是由于[最近在 1.3 中所做的缓存更改](https://docs.djangoproject.com/en/1.3/releases/1.3/#caching-changes)

有谁知道我如何清除一个模型的缓存条目`get_absolute_url()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:59:33.523

## 我想到了！

为[ilvar](https://stackoverflow.com/users/1215136/ilvar)为我指明正确的方向而欢呼。我的实现如下。我创建了一个名为的属性`cache_key`，并将 post_save 接收器添加到模型的子类中，这些模型的视图级缓存在更新后需要清除。欢迎提出改进建议！

```
from django.conf import settings
from django.core.cache import cache
from django.db.models.signals import post_save
from django.http import HttpRequest
from django.utils.cache import _generate_cache_header_key

from someapp.models import BaseModelofThisClass

class SomeModel(BaseModelofThisClass):
    ...
    @property
    def cache_key(self):
        # Create a fake request object
        request = HttpRequest()
        # Set the request method
        request.method = "GET"
        # Set the request path to be this object's permalink.
        request.path = self.get_absolute_url()
        # Grab the key prefix (if it exists) from settings
        key_prefix = settings.CACHE_MIDDLEWARE_KEY_PREFIX
        # Generate this object's cache key using django's key generator
        key = _generate_cache_header_key(key_prefix, request)
        # This is a bit hacky but necessary as I don't know how to do it
        # properly otherwise. While generating a cache header key, django
        # uses the language of the HttpRequest() object as part of the
        # string. The fake request object, by default, uses
        # settings.LANGUAGE_CODE as it's language (in my case, 'en-us')
        # while the true request objects that are used in building views
        # use settings.LANGUAGES ('en'). Instead of replacing the segment
        # of the string after the fact it would be far better create a more
        # closely mirrored HttpRequest() object prior to passing it to
        # _generate_cache_header_key().
        key = key.replace(settings.LANGUAGE_CODE, settings.LANGUAGES[settings.DEFAULT_LANGUAGE][0])

        return key

    @receiver(post_save)
    def clear_cache_for_this_item(sender, instance, **kwargs):
        # If this is a sub-class of another model
        if sender not in BaseModelofThisClass.__subclasses__():
            return
        else:
            cache.delete(instance.cache_key) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T04:33:10.903

Django 的缓存中间件使用[它](https://github.com/django/django/blob/e84f79f05113f546810c1908c7baef99fb1e874a/django/utils/cache.py#L176)为请求生成缓存键。因此，您可以`request`使用所需路径进行伪造并获取缓存键。然后只需将其从缓存中删除。

PS`cache_page`装饰器也使用该中间件，因此它应该以相同的方式工作。

# pdf - 用于插入的 pdftk 字段名称

> ID：10455440
> 
> 赞同：4
> 
> 时间：2012-05-04T20:06:20.400
> 
> 标签：pdf, field, pdftk, fdf

当我做 `pdftk samplex.pdf dump_data_fields`

我返回格式如下的字段：

```
 FieldType: Text
  FieldName: form1[0].Page1[0].Header[0].RepeatHeader[0].Project[0]
  FieldNameAlt: Project
  FieldFlags: 0
  FieldJustification: Left 
```

我有一个使用 pdftk 填写字段的示例，但它是一种更简单的格式，并且 FieldNames 类似于“名称”。

我尝试合并以下 fdf 以获取我对该字段的填充（如下所示，我尝试了长名称和短名称），但它似乎不起作用，关于为什么的任何想法？：

```
%FDF-1.2
%âãÏÓ
1 0 obj
<< 
/FDF << /Fields [ << /V (Something wonderful!)/T <br/>(form1[0].Page1[0].Header[0].RepeatHeader[0].Project[0]) /ClrF 2 /ClrFf 1 >> 
<< /V (Something)/T (Activity) /ClrF 2 /ClrFf 1 >> 
<< /V (Something else)/T (Project) /ClrF 2 /ClrFf 1 >> 
<< /V (Arthur, King of the Britons)/T (name) /ClrF 2 /SetFf 1 >> 
<< /V ()/T (submit_name) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (name_border) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (name_border_red) /ClrF 2 /ClrFf 1 >> 
<< /V (I seek the Holy Grail.)/T (quest) /ClrF 2 /SetFf 1 >> 
<< /V ()/T (submit_quest) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (quest_border) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (quest_border_red) /ClrF 2 /ClrFf 1 >> 
<< /V (Blue... no, yellow!)/T (color) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (submit_color) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (color_border) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (color_border_red) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (message_red) /ClrF 2 /ClrFf 1 >> 
<< /V ()/T (message_green) /ClrF 2 /ClrFf 1 >> 
] 
>> 
>> 
endobj
trailer
<<
/Root 1 0 R 

>>
%%EOF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:41:54.360

你是如何生成你的 FDF 的？这是一个从我使用 pdftk 的表单修改的示例 FDF

字段层次结构，如：

form1[0].Page1[0].Title[0]
form1[0].Page1[0].Item[0]
form1[0].Page1[0].Year[0]
form1[0].Page1[0 ].Desc[0]

```
%FDF-1.2 %���� 1 0 obj << 
    /FDF << 
        /Fields [
            << /T (form1[0]) /Kids [ 
                << /T (Page1[0]) /Kids [ 
                    << /T (Title[0]) /V (Android Phone) /ClrF 2 /ClrFf 1 >> 
                    << /T (Item[0]) /V (Evo 3D) /ClrF 2 /ClrFf 1 >>
                    << /T (Year[0]) /V (2011) /ClrF 2 /ClrFf 1 >> 
                    << /T (Desc[0]) /V (3D Smart Phone) /ClrF 2 /ClrFf 1 >> 
                ] >> 
            ] >> 
        ] 
    >> 
>> endobj trailer << /Root 1 0 R >> %%EOF 
```

所以你没有 /Kids 包装器，并且你没有使用字段索引号。尝试像我的示例一样修改您的 FDF，看看是否可行。

如果您是 PHP 用户，您应该查看 pdftk-php。我在我们的服务器上使用它来将 mysql 数据注入到 livecycle pdfs 中以用于各种用途，它很好地处理了 pdftk fdf 注入部分：[http ://www.andrewheiss.com/blog/2009/06/19/pdftk -php-正式发布/](http://www.andrewheiss.com/blog/2009/06/19/pdftk-php-officially-released/)

# c# - 取消 CheckedListBox 上的 ItemCheck 事件的可靠方法

> ID：10455443
> 
> 赞同：4
> 
> 时间：2012-05-04T20:06:26.197
> 
> 标签：c#, .net, vb.net

有谁知道取消 CheckedListBox 上的 ItemCheck 事件的可靠方法？我处于 ItemCheck 事件基本上应该丢弃表单上的更改的情况，但是，如果该人决定取消丢弃，我希望 ItemCheck 事件不要触发，以免更改任何内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T20:37:45.150

使用 ItemCheck 事件很容易做到。只需将值设置回来。像这样：

```
 private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e) {
        if (someCondition) e.NewValue = e.CurrentValue;
        else {
            // Regular stuff
            //...
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:37:23.020

```
public void cancelevent()       
{           
  checkedListBox1.ItemCheck -= new   ItemCheckEventHandler(this.checkedListBox1_ItemCheck);           
} 
```

在任何地方调用此方法以取消事件。

如果我们 += 将创建事件并且 -= 将删除事件。

如果您想了解更多详细信息，请提及。:)

# javascript - javascript 行被跳过并导致代码中出现以下错误

> ID：10455447
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:06:34.683
> 
> 标签：javascript, visual-studio-debugging

我正在运行 Visual Studio 2010 调试器来尝试调试 javascript 脚本，它跳过了这一行：

```
var selectedStatus = "assigned" 
```

然后在尝试使用 selectedstatus 时抛出错误，因为它从未创建并分配给变量。

有谁知道为什么它会跳过这条线？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:13:04.340

也许您的源代码与正在执行的内容不同步，它只是“似乎”跳过了该行，而实际正在执行的代码在该行号上有空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:11:53.947

也许它需要`;`在行尾？

如果可以，ASI 会自动插入分号，但如果下一行以圆括号或方括号开头，则它将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T23:07:56.110

行尾没有分号。通常，自动分号插入会为您添加一个，通常在加入行时会导致语法错误。但是，这两行代码可以同时编译也可以单独编译，在这种情况下，从调试器的角度来看，代码将作为一个步骤执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:38:17.867

分号可以在一行上写多个语句，因此它们是可选的。

# objective-c - 识别 UIImageView 的标签

> ID：10455448
> 
> 赞同：0
> 
> 时间：2012-05-04T20:06:35.267
> 
> 标签：objective-c, xcode

在我的应用程序中，用户可以通过程序创建许多 UIImageViews，并且标签已成功分配给所有 ImageViews。然后，通过以下方式，我检测（在这种情况下通过触摸移动）图像的标签，并根据标签更改颜色。

```
int touchedtag = touch.view.tag;

    NSUInteger tagCount = touchedtag;
    switch (tagCount) {
        case 1: 
            image1.backgroundColor = [UIColor redColor];
            break;
        case 2: 
            image1.backgroundColor = [UIColor yellowColor];
            break;
        case 3: 
            image1.backgroundColor = [UIColor brownColor];
            break;
        case 4: 
            image1.backgroundColor = [UIColor blackColor];

            break;
        default :

            break;

    } 
```

如您所见，有4种情况。但是如果用户创建了50个UIImageViews，我需要创建50个案例，还是可以用更少的代码来做这个识别过程？（考虑到换颜色是看能不能用，但那这只会用来识别标签）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:23:07.033

对于 50 种不同的`UIImageView`标签，您还可以通过编程定义您的标签。

```
for(int i = 0 ;i < 50;i++)
{
     UIImageView *yourIMG = [[UIImageView alloc] init];
     yourIMG.tag = i;
} 
```

并用它们的标签切换它们

对于 50 种不同的颜色，您可以`UIImageView`像这样使用 RGB 参数自定义颜色

```
[UIColor colorWithRed:225 green:225 blue:225 alpha:1]; 
```

尝试使用`for`循环可编程调整这些参数，例如为每张图像增加红色 2 个单位或减少蓝色 10 个单位

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:25:16.577

您绝对不想仅仅为了检查一个数值而创建 50 个案例，或者根本不想创建任何案例。你打算如何处理标签值？分配任意颜色？

无论哪种方式，这里都是您的示例代码的复制，而不使用 case 语句。

```
NSArray *colors = [[NSArray alloc] initWithObjects:[UIColor redColor], [UIColor yellowColor], [UIColor brownColor], [UIColor blackColor], nil];

NSUInteger touchedtag = touch.view.tag;
image1.backgroundColor = [colors objectAtIndex:touchedtag]; 
```

当然，如果您的标签大于数组中的颜色数量，您就会遇到问题。您可以使用其他逻辑解决此问题，或者通过将第二行更改为：

```
NSUInteger touchedtag = touch.view.tag % colors.count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:16:12.903

好吧，如果您只使用一种颜色会更容易，但如果您想要 50 种不同的颜色，是的，您需要创建 50 个案例。

# controller - Rails 3 - 如何从视图中触发方法/动作

> ID：10455449
> 
> 赞同：2
> 
> 时间：2012-05-04T20:06:40.200
> 
> 标签：controller, ruby-on-rails-3.2, has-many-through

标题可能有点奇怪，但让我解释一下。

我有用户、课程和订阅模型。用户`has_many :courses, :through => :subscription`和课程`has_many :users, :through => :subscription`。订阅属于两者。那部分，我完全理解。我正在使用订阅模型来存储用户和课程之间的关系状态（完成、失败、删除、活动等）。

我也有这个创建关系的代码： `@subscription = Subscription.create!(:course_id => @course.id, :user_id => current_user.id)` 截至目前，我没有订阅控制器，因为它们将主要通过课程视图进行管理（但我并没有以一种或另一种方式设置，我只是想做对的）。

我不明白的是如何/在哪里实现用户订阅课程的操作。**它应该是 Course 控制器中的一个单独的操作，其中包含您链接到的路由，还是有另一种更好的方法来做到这一点？**我想 AJAX 也是一种实现方式，但我不知道如何实现它。

我浏览了 Michael Hartl 的 rails 教程，在过去几天里进行了一些谷歌搜索，甚至浏览了 Diaspora 的源代码（因为我尝试做的操作类似于与某人交朋友，尽管关联不同） ，但我似乎无法绕过它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:53:07.920

好吧，我想出了怎么做。

在我的订阅控制器中，我制作了如下所示的`create`方法：

```
def create
    @course = Course.find(params[:course_id])
    Subscription.create!( :user_id => current_user.id, :course_id => params[:course_id])
    redirect_to @course 
    flash[:notice] = "You're now subscribed to #{@course.name}! WooHoo!"
end 
```

之后，我可以`button_to`在视图中使用帮助程序创建一个简单的表单，其中一个按钮指向订阅控制器上的创建操作：

`<%= button_to "Subscribe!", subscriptions_path(:course_id => @course.id) %>`

当然，还需要在 routes.rb 中添加适当的操作：

`resources :subscriptions, :only => [:create, :update]`

它绝对可以清理，但就目前而言，它工作得很好。

# asp.net - Server 2008 RC2、IIS 7.5、ASP.NET 和排队请求性能不佳

> ID：10455455
> 
> 赞同：12
> 
> 时间：2012-05-04T20:07:06.060
> 
> 标签：asp.net, performance, iis, threadpool

我已经知道这个问题的答案，但想与社区分享，因为它没有从 Microsoft 记录。

场景：流量激增访问您的 IIS 7.5 ASP.NET 网站，您注意到请求开始排队。该网站的性能缓慢到爬行，但您有足够的 CPU 和 RAM 可用。

这是我们最近在一个网站上看到的问题，该网站进行了一系列内部 Web 服务调用。内部健康检查将开始超时，这将导致该服务器退出我们的集群。（然而，这台服务器是最强大的硬件......）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-07T15:31:16.747

在互联网上搜索后，我发现了以下来自 Microsoft 的与该问题相关的文章：

KB 821268：[从 ASP.NET 应用程序发出 Web 服务请求时出现争用、性能不佳和死锁](http://support.microsoft.com/kb/821268)

这篇文章提供了一些很棒的性能调整技巧，但是它没有提到我们遇到的一些非常重要的上限。

我们的解决方案是修改我们的 machine.config，并填充以下 XML 节点：

```
<system.web>
    <processModel autoConfig="false" maxWorkerThreads="xxx" maxIoThreads="xxx" minWorkerThreads="xxx" minIoThreads="xxx" requestQueueLimit="5000" responseDeadlockInterval="00:03:00"/>
    <httpRuntime minFreeThreads="xxx" minLocalRequestFreeThreads="xxx"/>
</system.web> 
```

我故意将其中一些数字设置为“xxx”，因为它们取决于您的硬件。

从上面的知识库文章中，微软提出了一些计算这些值的方程。但是，他们没有提到这些数字的最大值是 INT 的大小，即 32767。

因此，计算这些的**正确**方程如下：

*   **maxWorkerThreads**：32767 / #Cores
    *   在我们的例子中，我们有一个 24 核服务器。因此，我们的 maxWorkerThreads 值正确设置为：1365。任何导致整数大于 32767 的数字，服务器都会将 maxWorkerThreads 设置为 32767。
*   **maxIoThreads**：与 maxWorkerThreads 相同（32767 / #Cores）
*   **minWorkerThreads** : maxWorkerThreads / 2
    *   这是一个棘手的问题。如果超过一个大于 32767 的整数值（尽管知识库文章说，这个数字乘以您拥有的核心数），并且与“最大值”值不同，*这默认为您机器上的核心数*！在我们的例子中，它被设置为 24（因为我们为最小值设置了一个任意高的值），这会导致我们服务器的性能下降。
*   **minIoThreads**：与 minWorkerThreads 相同
*   **minFreeThreads** : 88 * #Cores（直接取自知识库文章）
*   **minLocalRequestFreeThreads** : 76 * #Cores（直接取自知识库文章）

此解决方案并不适合所有人，只有在您满足知识库文章中的条件时才应使用。

我们用来帮助​​我们诊断这个问题的另一个工具是一个没有代码隐藏的 .ASPX 页面，我们可以在任何服务器上丢弃它（无需重置应用程序池）。此页面使用反射来告诉您线程池中实际发生了什么，以及这些设置的值在您的服务器上呈现什么。

```
<%@ Page Language="C#" %>

<!DOCTYPE html>
<html lang="en">
<head>
<style>
    body { margin: 20pt; padding: 0pt; font-family: Verdana, "san-serif";}
    fieldset { border-radius: 5px; border: none; background-color: #fff; margin: 10pt;}
    fieldset.parent { background-color: #f0f0f0; }
    legend { font-size: 10pt; color: #888; margin: 5pt; }

    .ports div { padding: 10pt 0pt 0pt 0pt; clear: both; }
    .ports div:first-child { padding: 0pt; }
    .ports div div { padding: 0pt; clear: none; margin: 1pt; background-color: #eef; display: block; float: left; border: 5pt solid #eef; }
    .ports div div:first-child { border-top-left-radius: 5pt; border-bottom-left-radius: 5pt; background-color: #ccf; border-color: #ccf;}
    .ports div div:last-child { border-top-right-radius: 5pt; border-bottom-right-radius: 5pt; background-color: #ccf; border-color: #ccf; padding: 0pt 10pt 0pt 10pt; }
</style>

</head>
<body>

<%
Response.Cache.SetCacheability(HttpCacheability.NoCache);

int worker, workerMIN, workerMAX;
int port, portMIN, portMAX;
System.Threading.ThreadPool.GetAvailableThreads(out worker, out port);
System.Threading.ThreadPool.GetMinThreads(out workerMIN, out portMIN);
System.Threading.ThreadPool.GetMaxThreads(out workerMAX, out portMAX);

 %>

<fieldset class="parent">
<legend>Thread Information</legend>

<fieldset>
    <legend>Worker Threads</legend>
    <div class="ports">
        <div>
            <div>Min: <%=workerMIN %></div>
            <div>Current: <%=workerMAX - worker %></div>
            <div>Max: <%=workerMAX %></div>
        </div>
    </div>
</fieldset>

<fieldset>
    <legend>Completion Port Threads</legend>
    <div class="ports">
        <div>
            <div>Min: <%=portMIN %></div>
            <div>Current: <%=portMAX - port %></div>
            <div>Max: <%=portMAX %></div>
        </div>
    </div>
</fieldset>

<fieldset>
    <legend>Request Queue Information</legend>
    <div class="ports">

<%

var fi = typeof(HttpRuntime).GetField("_theRuntime", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.Static).GetValue(null);
var rq = typeof(HttpRuntime).GetField("_requestQueue", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).GetValue(fi);
var fields = rq.GetType().GetFields(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);

foreach (var field in fields)
{
    string name = field.Name;
    string value = "";

    switch (name)
    {
        case "_localQueue":
        case "_externQueue":
            System.Collections.Queue queue = field.GetValue(rq) as System.Collections.Queue;
            value = queue.Count.ToString();
            break;

        default:
            value = field.GetValue(rq).ToString();
            break;
    }

    %>
        <div>
            <div><%=name %></div>
            <div><%=value %></div>
        </div>
    <%
    //Response.Write(string.Format("{0}={1}<br/>", name, value));
}   

%>
    </div>
</fieldset>
</fieldset>

</body></html> 
```

# java - Java中的二维数组？

> ID：10455456
> 
> 赞同：-3
> 
> 时间：2012-05-04T20:07:06.507
> 
> 标签：java, arrays

对于我的 Java 课程中的一项作业，我应该编写一个程序，用于在两个玩家之间创建一个 Tria 游戏，我已经完成了该程序，但她希望我们也可以添加它。“按照描述完成 Question 类。添加一个方法，将 10 个答案的数组转换为 2D 数组并返回 2D 数组。

在测试器中，将每个玩家回答的问题的信息添加到一个二维数组中（2 个玩家，每个 5 个问题）。

显示正确答案（调用问题中的新方法），然后显示包含玩家答案的二维数组。最后，显示每个玩家和获胜玩家的分数。”

对我如何做这件事有任何帮助吗？我很感激你能给我的任何帮助。

到目前为止，这是我的代码，首先是我的类名为“问题”，第二个是测试者名为“琐事游戏”

```
public class Question
{
  String question;
  String possibleAns1;
  String possibleAns2;
  String possibleAns3;
  String possibleAns4;
  int CorrectAnsNum;

  Question(String ques, String ans1, String ans2, String ans3, String ans4, int num)
  {
    question = ques;
    possibleAns1 = ans1;
    possibleAns2 = ans2;
    possibleAns3 = ans3;
    possibleAns4 = ans4;
    CorrectAnsNum = num;
  }

  Question(){
  }

  String getQuestion(){
    return question;
  }

  String getAns1(){
    return possibleAns1;
  }

  String getAns2(){
    return possibleAns2;
  }

  String getAns3(){
    return possibleAns3;
  }

  String getAns4(){
    return possibleAns4;
  }

  int getCorrectAnsNum(){
    return CorrectAnsNum;
  }

  void setQuestion(String newQuestion){
    question = newQuestion;
  }

  void setAns1(String newPossibleAns1){
    possibleAns1 = newPossibleAns1;
  }

  void setAns2(String newPossibleAns2){
    possibleAns2 = newPossibleAns2;
  }

  void setAns3(String newPossibleAns3){
    possibleAns3 = newPossibleAns3;
  }

  void setAns4(String newPossibleAns4){
    possibleAns4 = newPossibleAns4;
  }

  void setCorrectAnsNum(int newCorrectAnsNum){
    CorrectAnsNum = newCorrectAnsNum;
  }
} 
```

///////////测试仪

```
import java.util.ArrayList;
import java.util.Scanner;

public class TriviaGame
{
  public static void main(String args[])
  {
    Scanner input = new Scanner(System.in);

    int pointsPlayer1 = 0;
    int pointsPlayer2 = 0;

    Question q1 = new Question("How many days are there in a week?", "5", "2", "7", "57", 3);
    Question q2 = new Question("What is the first month of the year?", "February", "January", "December", "August", 2);
    Question q3 = new Question("How many hours are there in one day?", "32", "12", "0", "24", 4);
    Question q4 = new Question("What is the capital of Massachusetts?", "Framingham", "Worcester", "Boston", "Springfield", 3);
    Question q5 = new Question("At what age are you legally aloud to buy lottery tickets", "18", "16", "21", "19", 1);
    Question q6 = new Question("What sport can you hit a homerun in?", "Golf", "Football", "Soccer", "Baseball", 4);
    Question q7 = new Question("Which one of these fruits is yellow?", "Apple", "Banana", "Strawberry", "Grape", 2);
    Question q8 = new Question("Who is the current president of the United States?", "Bill Clinton", "George Bush", "Barack Obama", "Jason Statham", 3);
    Question q9 = new Question("What is the highway speed limit in most areas?", "85", "65", "35", "110", 2);

    Question q10 = new Question();
    q10.setQuestion("What is the company that makes the iPod?");

    q10.setAns1("Microsoft");
    q10.setAns2("Verizon");
    q10.setAns3("Apple");
    q10.setAns4("Walmart");
    q10.setCorrectAnsNum(3);

    ArrayList<Question> questionList = new ArrayList<Question>();

    questionList.add(q1);
    questionList.add(q2);
    questionList.add(q3);
    questionList.add(q4);
    questionList.add(q5);
    questionList.add(q6);
    questionList.add(q7);
    questionList.add(q8);
    questionList.add(q9);
    questionList.add(q10);

    System.out.println("****Player1****");

    for(int i = 0; i < 5; i++)
    {
      Question q = questionList.get(i);

      System.out.println("\n" + (i+1) + ". " + q.getQuestion());
      System.out.println("1) " + q.getAns1());
      System.out.println("2) " + q.getAns2());
      System.out.println("3) " + q.getAns3());
      System.out.println("4) " + q.getAns4());

      System.out.print("Enter your answer: ");
      int userAns = input.nextInt();

      if (userAns == q.getCorrectAnsNum())
        pointsPlayer1++;
    }

    System.out.println("\n****Player2****");

    for(int i = 5; i < 10; i++)
    {
      Question q = questionList.get(i);

      System.out.println("\n" + (i+1) + ". " + q.getQuestion());
      System.out.println("1) " + q.getAns1());
      System.out.println("2) " + q.getAns2());
      System.out.println("3) " + q.getAns3());
      System.out.println("4) " + q.getAns4());

      System.out.print("Enter your answer: ");
      int userAns = input.nextInt();

      if (userAns == q.getCorrectAnsNum())
        pointsPlayer2++;
    }

    System.out.println("\n****Points Earned****");
    System.out.println("Player 1: " + pointsPlayer1);
    System.out.println("Player 2: " + pointsPlayer2);

    if (pointsPlayer1>pointsPlayer2)
      System.out.println("\nPlayer 1 is the winner! ");
    else if (pointsPlayer1<pointsPlayer2)
      System.out.println("\nPlayer 2 is the winner! ");
    else
      System.out.println("\nIt's a tie! ");
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:03:02.450

在 java 中，您可以声明*数组数组*，它​​们是二维的：

```
String[][] allAnswers = new String[10][4]; 
```

现在，您可以遍历外部数组：

```
for (String[] questionAnswers : allAnswers) { 
```

该变量`questionAnswers`是一个字符串数组。然后，您可以遍历这个内部数组，并设置答案：

```
questionAnswers[0] = "Answer 1";
// ... 
```

注意java中的数组总是从零开始的，所以第一个答案属于索引0。

您还可以使用索引运算符访问特定字段：

```
System.out.println("Second answer of question 3 is: " questionAnswers[2][1]; 
```

如果这对您来说不是很清楚，您应该阅读有关java 中[的多维数组的教程。](http://www.leepoint.net/notes-java/data/arrays/arrays-2D.html)

# css - 未应用清晰的两个容器中的边距

> ID：10455458
> 
> 赞同：0
> 
> 时间：2012-05-04T20:07:08.333
> 
> 标签：css, css-float, margin

我有以下 HTML 代码：

```
<div class = "content_wrapper">
    <div class = "left_side">
        LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
    </div>
    <div class = "right_side">
        RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
    </div>
    <div class = "bottom">
        bottom content
    </div>
</div> 
```

下面的 CSS：

```
#content_wrapper
{
    width: 960px;
    margin: 0 auto;
}

div.left_side{margin:0px; width:100px; padding:0px 0 0 5px; float:left;}
div.right_side{margin:0px; width:100px; padding:0px 0 0 5px; float:right;}
div.bottom {clear:both; margin-top:20px;} 
```

以及以下问题：

如何使底部 div 从内容包装容器中获得一些边距？

你可以[在这里](http://jsfiddle.net/L8YN6/10/)看到它，保证金没有被应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:40:24.847

如果您添加`float:left`到 div.bottom 边距将起作用。如果您不想使用浮动，padding-top{20px) 将像 Koby 提到的那样工作。

同样在您的 HTML 中，`<div class="contentWrapper">`但在您的 CSS #content_wrapper.. 中将其更改为 .content_wrapper {

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:13:43.293

使用 padding-top 而不是 margin-top 怎么样？它会将 div 20px 的内容推到底部：

div.bottom {清除：两者；填充顶部：20px；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:14:04.000

我会以不同的方式处理这个问题，使用一个单独但可重复使用的“清除”元素：http: [//jsfiddle.net/L8YN6/16/](http://jsfiddle.net/L8YN6/16/)

```
<div class = "content_wrapper">
    <div class = "left_side">
        LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
    </div>
    <div class = "right_side">
        RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
    </div>
    <div class="clearing">&nbsp;</div>
    <div class = "bottom">
        bottom content
    </div>
</div> 
```

CSS变为：

```
#content_wrapper {
    width: 960px;
    margin: 0 auto;
}

div.left_side {margin:0px; width:100px; padding:0px 0 0 5px; float:left;}
div.right_side {margin:0px; width:100px; padding:0px 0 0 5px; float:right;}
div.clearing { clear: both; line-height: 0; font-size: 0; overflow: hidden; }
div.bottom { margin-top: 20px } 
```

我更喜欢这种方法来应对不同浏览器对 CSS“浮动”规范的解释。或者，您可以使用[自清除浮动](http://www.positioniseverything.net/easyclearing.html)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:11:22.987

将 HTML 更改为：

```
<div class = "content_wrapper">
    <div class = "left_side">
        LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
    </div>
    <div class = "right_side">
        RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
    </div>
    <div style="clear:both;" />
    <div class = "bottom">
        bottom content
    </div>
</div> 
```

和 CSS 成：

```
#content_wrapper
{
    width: 960px;
    margin: 0 auto;
}

div.left_side{margin:0px; width:100px; padding:0px 0 0 5px; float:left;}
div.right_side{margin:0px; width:100px; padding:0px 0 0 5px; float:right;}
div.bottom {margin-top:20px;} 
```

见： http: [//jsfiddle.net/L8YN6/11/](http://jsfiddle.net/L8YN6/11/) ​</p>

# css - 为什么我似乎不能使用背景剪辑？

> ID：10455465
> 
> 赞同：8
> 
> 时间：2012-05-04T20:07:56.507
> 
> 标签：css

我尝试使用`background-clip: content-box`失败了。整个盒子有一个背景，包括填充区域，而不仅仅是内容区域。

[http://jsfiddle.net/alanhogan/7YjCV/6/](http://jsfiddle.net/alanhogan/7YjCV/6/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T20:17:03.870

这是 CSS 中具有速记属性的常见问题。

因为[`background-clip`是由`background`速记属性](http://www.w3.org/TR/css3-background/#the-background)设置的属性之一，所以您的`background`样式隐式设置`background-clip`为`border-box`（其初始值），覆盖您的显式`background-clip`样式：

```
background-clip: content-box;
background: #ddd none /* border-box */; 
```

如果您将`background-clip`声明移到 下方`background`，它将按预期工作：

```
background: #ddd none;
background-clip: content-box; 
```

[jsFiddle 演示](http://jsfiddle.net/BoltClock/7YjCV/12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T20:16:38.333

*CSS 属性是一种定义所有*背景属性的`background`单行方式，包括. 因此，指定取消设置您之前的. 相反，如果您将该行替换为，它应该按照您希望的方式工作。*`background-clip``background: #ddd``background-clip``background-color: #ddd`*

 *[这是](http://jsfiddle.net/dvidby0/spnkf/)对您的 jsfiddle 的小修改。*

# php - 认证php邮件

> ID：10455469
> 
> 赞同：12
> 
> 时间：2012-05-04T20:08:30.960
> 
> 标签：php

我正在使用[`mail`](http://php.net/manual/function.mail.php)从 PHP 发送电子邮件。它工作正常，但现在我需要使用更安全的邮件服务器。

我需要使用以下配置连接邮件服务器：

```
smtp: "mail.newserver.com"
port: "25"
timeout: 60
auth: yes
user: name
pass: word 
```

我应该如何更改下面的代码以使其适用于上述配置？

```
$to = $SendTo;
$headers = "From: <info@---->" . "\r\n" . "X-Mailer: php";
$subject = "Website Contact : " . $uxGlobalLocation;
$body = $Bodycopy;

if (mail($to, $subject, $body, $headers)) {
    header ('Location: /index.php?option');
    exit();
} else {
    echo("<p>Message delivery failed...</p>");
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T20:13:00.553

实际上邮件功能不提供身份验证功能。您必须使用 Mail Pear 包中的 Mail 类。请参阅此处的示例： [http ://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-08T10:53:13.500

内置的[mail()](http://php.net/mail)函数不提供任何类型的身份验证。您需要使用提供 SMTP 身份验证的第三方库。流行的选择包括：

*   [PHPMailer](https://github.com/PHPMailer/PHPMailer)
*   [斯威夫特梅勒](http://swiftmailer.org/)
*   [PEAR Mail](http://pear.php.net/package/Mail/redirected) *（有一段时间没有更新）*

[您还可以在Packagist](https://packagist.org/search/?q=mail)搜索 Composer 包。

# java - Java Hadoop：是否可以只读取一次文件的内容？

> ID：10455470
> 
> 赞同：0
> 
> 时间：2012-05-04T20:08:33.403
> 
> 标签：java, hadoop

我有一个存储一些数据的文件，每个映射器都应该使用这些数据进行一些计算。

我知道如何从文件中读取数据，这可以在映射器函数中完成，但是，这个数据对于每个映射器都是相同的，所以我想在映射过程之前将它存储在某个地方（变量），然后使用映射器中的内容。

如果我在 map 函数中执行此操作，并且例如有一个包含 10 行的文件作为输入，那么 map 函数将被调用 10 次，对吗？所以如果我在 map 函数中读取文件内容，我会读取 10 次，这是不必要的

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:10:02.677

如果我理解正确，您只想调用 1 个函数来读取文件中的所有行。假设是的，这是我对此的看法。

为了安全起见，映射器允许您一次读取 1 行，以便您可以控制要读取的输入行数。这需要一定的内存。例如，如果文件大如 1GB 大小怎么办。你愿意阅读所有内容吗？这将占用大量内存并影响性能。这是我之前提到的安全方面。

我的结论是没有 Mapper 函数可以读取文件的所有内容。你同意吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:06:43.533

因为您的许多 Mapper 在不同的 JVM 内运行（可能在不同的机器上），所以在将数据提交到 Hadoop 之前，您无法将数据读入应用程序。但是，您可以使用[分布式缓存](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/filecache/DistributedCache.html)“有效地分发特定于应用程序的大型只读文件”。

根据该链接：“它的效率源于每个作业只复制一次文件以及缓存未归档在从属设备上的档案的能力。”

# html - 谷歌在我的表单中的自动填充

> ID：10455472
> 
> 赞同：5
> 
> 时间：2012-05-04T20:08:41.837
> 
> 标签：html, forms, autocomplete, google-api

我的网站上有一个表单，它将文本框输入转发到`www.google.com/search?q=...`. 在通过 google.com 搜索时，是否有可能获得谷歌提供的这种自动完成/自动填充功能。Firefox 在 url 栏旁边的搜索栏中使用 google 的自动完成功能，但我怎样才能为我的 web 表单获取此类信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T21:05:26.017

**Google Suggest API**允许对自定义关键字使用自动完成功能。但似乎谷歌已将其删除。但我发现你仍然可以访问 API。有 JSON 和 XML 的 URL。

## JSON

```
http://clients1.google.com/complete/search?hl=en&q=<your query here>&client=hp 
```

## XML

```
http://clients1.google.com/complete/search?hl=en&q=<your query here>&output=toolbar 
```

没有任何保证。

如果您想在文本框上自动完成。您可以将其与[jQuery UI 自动完成功能结合使用](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T20:51:02.513

这是一个完整的谷歌自动建议示例

[http://googlesuggest-jquery.googlecode.com/svn/trunk/](http://googlesuggest-jquery.googlecode.com/svn/trunk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T16:20:47.293

新网址是：

[http://suggestqueries.google.com/complete/search?client=firefox&q=YOURQUERY](http://suggestqueries.google.com/complete/search?client=firefox&q=YOURQUERY)

客户端部分是必需的；我没有测试其他客户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-23T22:38:17.327

除了 RickyA 的回答之外，您还可以使用`bs`参数按媒体过滤建议：

[http://clients1.google.com/complete/search?hl=en&q=stackoverflow&output=toolbar&ds=](http://clients1.google.com/complete/search?hl=en&q=stackoverflow&output=toolbar&ds=)

> 优酷：ds=yt
> 
> 书籍：ds=bo
> 
> 产品：ds=sh
> 
> 新闻：ds=n
> 
> 图片：ds=i
> 
> 网页：ds=
> 
> 配方：ds=r

# http - 使用 GET 变量的 301 URL 重定向

> ID：10455473
> 
> 赞同：1
> 
> 时间：2012-05-04T20:08:47.507
> 
> 标签：http, .htaccess, redirect, apache

我们有一个需要根据两个 URL 变量的值重定向的 URL。http请求如下：**`http://img.ourserver.com/junk/imgfolder?var1=size&var2=imgname`**. 此 URL 应重定向到以下内容**`http://img.ourserver.com/imgfolder/size/imgname.png`**

我们可以在 .htaccess 文件或 Apache conf 文件中执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:25:18.253

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} (^|&)var1=([^&]+)&var2=([^&]+) [NC]
RewriteRule ^[^/]+/(imgfolder)/?$ $1/%1/%2.png? [L,R,NC] 
```

# android - 在单独的线程中填充列表视图

> ID：10455475
> 
> 赞同：3
> 
> 时间：2012-05-04T20:08:51.163
> 
> 标签：android, multithreading, listview, android-asynctask

在一个活动中，我加载需要花费大量时间的列表视图的行，因此我将此任务放在单独的线程中以允许显示进度对话框。

我执行以下操作

```
private void doMyStuff() {
    listItems.clear();
    progressDialog.show();

    new Thread(new Runnable() {
        @Override
        public void run() {                
            for () {
                listItems.add(something to add);
            }
        handler.sendEmptyMessage(0);
        progressDialog.dismiss();
        }
    }).start();
}

private Handler handler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        if (msg.what == 0) {
            adapter.notifyDataSetChanged();
        }
    };
}; 
```

我有时会遇到一个引发 IllegalStateException 的错误。首先我很惊讶，因为这样的编程线程是我通常在标准 Java 程序中所做的。

该错误仅“有时”出现，并且在逐步调试时不会出现。

这导致我在网上搜索，我在 SO 中发现了一些与此相关的问题，我必须承认事情并不清楚。

因为我只在线程完成时才调用 notifyDataSetChanged() 为什么它有时会引发异常。

有人可以确认我这种做法是错误的，我必须使用异步任务，也许可以解释一下原因？？？

我需要显示一个progressDialog，有人可以给我一个AsyncTask填充列表视图并显示填充进度的progressDialog的简单示例。

谢谢

**更新**

jtanveer 给了我 asynctask 问题的答案。现在其他人指出解雇不在处理程序中，我纠正了这一点。

根据 jtanveer 关于“Painless Threading”的文章，他们说

Android 提供了几种从其他线程访问 UI 线程的方法，其中一种是 HANDLER。

有人知道为什么将被解雇的处理程序没有解决我的问题吗？对我来说 listItem.add 与 UI 无关？在这一点上我错了吗？

对我来说，在我的代码中，唯一的 UI 是 adapter 和 progressdialog ？欢迎任何评论或解释。

**最终答案**

stjom 为我的特定代码提供了一个有效的答案。在处理程序中运行 runOnUiThread。它正在工作，但我很惊讶，因为我认为处理程序是在 Ui 线程中运行的......

感谢大家的所有回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:26:53.270

定义如下内部类：

```
private class LoadListTask extends AsyncTask<String, Void, Integer> {
    protected void onPreExecute() {
        progressDialog.show();
    }

    protected Integer doInBackground(String... params) {
        for () {
            listItems.add(something to add);
        }
        return 0;
    }

    protected void onPostExecute(Integer result) {
        progressDialog.dismiss();
        if (result == 0) {
           adapter.notifyDataSetChanged();
        }
    }
} 
```

如果需要，可以参考这篇[文章](http://developer.android.com/resources/articles/painless-threading.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T01:50:36.000

每当您调用它时，它都会识别您的对象`adapter.notifyDataSetChanged();`的任何更改。`listItems`如果发现任何更改，它将相应地更新 UI，我认为这会导致您的问题。你可以打电话

```
runOnUiThread(new Runnable() {
    public void run() {
        adapter.notifyDataSetChanged();
    }  
}); 
```

在您的处理程序内部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T22:10:45.577

您不需要使用 AsyncTask，它只是一种方便。

至于为什么您当前的实现有时不起作用 - 您应该从 UI 线程中关闭您的进度对话框，因此需要进入您的处理程序，而不是您的后台线程。

# jquery - WordPress Colorbox 中的 Google Adsense

> ID：10455478
> 
> 赞同：1
> 
> 时间：2012-05-04T20:08:55.510
> 
> 标签：jquery, wordpress, colorbox, adsense

我正在尝试将一些 Adsense 广告放入彩盒中，并已完成以下操作：

```
jQuery(document).bind('cbox_load', function(){
    var $ads = jQuery('<div style="width:728px; height:90px; background:#fff; position:absolute; top:0; left:0;" id="adsenseColorbox"><script type="text/javascript"><!--google_ad_client = "ca-pub-5435441464221407";/* APRO_728x90_textonly */google_ad_slot = "0595008022";google_ad_width = 728;google_ad_height = 90;//--></script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div>'); 
    jQuery('#cboxContent').prepend($ads); 
}); 
```

结果是：

```
<div id="cboxContent"...>
<div style="width:728px; height:90px; background:#fff; position:absolute; top:0; left:0;" id="adsenseColorbox"></div>
...
</div> 
```

有人可以帮助让这个 Google Adsense 在 Colorbox 中工作吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:11:30.473

尝试`$ads`只制作一个字符串。放下`jQuery()`它周围的钻头。

# c++ - Makefile 改进，依赖项生成不起作用

> ID：10455480
> 
> 赞同：4
> 
> 时间：2012-05-04T20:09:22.333
> 
> 标签：c++, makefile, gnu-make

我目前正在尝试构建一个合适的 Makefile。

我想要的是完全控制正在发生的事情，所以我不想要任何第三方软件。

我目前的尝试对我来说似乎是合乎逻辑的，但由于依赖生成无效，我有点卡住了。

为了更好的可读性，完整的 Makefile 被分成小块。如果有需要改进的地方，我将不胜感激任何部分的评论。

首先，我有以下静态定义

```
CXX = g++
CXXFLAGS = -Wall \
           -Wextra \
           -Wuninitialized \
           -Wmissing-declarations \
           -pedantic \
           -O3 \
           -p -g -pg
LDFLAGS =  -p -g -pg
DEPFLAGS = -MM 
```

Afaik 这应该没问题。将分析标志设为可选是完美的，但这并不重要。

```
SRC_DIR = ./src
OBJ_DIR = ./obj
SRC_EXT = .cpp
OBJ_EXT = .o

TARGET = ./bin/my_target

SRCS = $(wildcard $(SRC_DIR)/*$(SRC_EXT))
OBJS = $(subst $(SRC_DIR), $(OBJ_DIR), $(SRCS:$(SRC_EXT)=$(OBJ_EXT)))
DEP = depend.main 
```

基本上，这应该只是`*.cpp`从子文件夹中提取所有文件，并`src`另外替换`./src`为对象名称。`./obj``.cpp``.o`

```
.PHONY: clean all depend

all: $(TARGET)

$(TARGET): $(OBJS)
    @echo "-> linking $@"
    @$(CXX) $^ $(LDFLAGS) -o $@

$(OBJ_DIR)/%.$(EXT_OBJ):
    @echo "-> compiling $@"
    @$(CXX) $(CXXFLAGS) -c $< -o $@ 
```

Afaik，这个块 - 如果存在有效的依赖文件 - 应该进行所有必要的编译和链接。

```
clean:
    @echo "removing objects and main file"
    @rm -f $(OBJS) $(TARGET) 
```

应该是不言自明和正确的，还是我在这里遗漏了什么？

```
$(SRC_DIR)/%.$(SRC_EXT): 
    $(CXX) $(DEPFLAGS) -MT \
    "$(subst $(SRC_DIR),$(OBJ_DIR),$(subst $(SRC_EXT),$(OBJ_EXT),$@))" \
    $(addprefix ,$@) >> $(DEP);

clear_dependencies:
    @echo "-> (re-)building dependencies";
    @$(RM) $(DEP)

depend: clear_dependencies $(SRCS) 
```

这是非功能部分。我打算做的是使用`g++`Compiler 标志`-MM`来自动创建依赖项并使用`-MT`与默认路径不同的路径。产生的依赖应该看起来像

```
./obj/main.o: ./src/main.cpp ./src/some_header_file.h 
```

不幸的是，这永远不会被调用，我不知道为什么会这样。在一个[类似的问题](https://stackoverflow.com/questions/10452507/makefile-automatic-src-file-detection-and-dependency-generation)中，用户 Beta 很高兴地通过添加 a 提供了一个临时解决方案，`.Phony`但这对重建每个对象而不做任何更改有副作用。

最后，只有一行

```
-include $(DEP) 
```

包含依赖文件，一旦创建。

非常欢迎提供有关任何部分的一些提示的任何答案。所以我的问题是：我可以做得更好或者“更清洁”，为什么依赖生成不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T21:25:27.453

开始。

* * *

尽可能分配[*简单的扩展*变量](http://www.gnu.org/software/make/manual/make.html#Setting)：

```
SRCS := $(wildcard $(SRC_DIR)/*$(SRC_EXT)) 
```

来自[GNU Make 手册](http://www.gnu.org/software/make/manual/make.html#Flavors)：

> [递归扩展变量]的另一个缺点是每次扩展变量时都会执行定义中引用的任何函数。这会使`make`运行速度变慢；更糟糕的是，它会导致`wildcard`and`shell`函数给出不可预测的结果，因为您无法轻松控制它们何时被调用，甚至调用多少次。

* * *

使用[替换引用](http://www.gnu.org/software/make/manual/make.html#Substitution-Refs)或[`patsubst`函数](http://www.gnu.org/software/make/manual/make.html#Text-Functions)将源转换为对象：

```
OBJS := $(SRCS:$(SRC_DIR)/%$(SRC_EXT)=$(OBJ_DIR)/%$(OBJ_EXT)) 
```

* * *

在编译模式规则中指定适当的先决条件。这对于让 Make 保持您的目标文件保持最新并在源更改时更新它们是**必需的。**

```
$(OBJ_DIR)/%$(OBJ_EXT) : $(SRC_DIR)/%$(SRC_EXT)
    @echo "-> compiling $@"
    @$(CXX) $(CXXFLAGS) -o $@ -c $< 
```

* * *

同时编译源码并为其生成依赖文件。使用`-MMD -MP`标志使事情正常进行（只需将它们附加到`CXXFLAGS`）。

```
CXXFLAGS += -MMD -MP

-include $(OBJS:$(OBJ_EXT)=.d) 
```

来自[GCC 手册](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)：

> `-MD`
> 
> `-MD`等价于`-M -MF` *file*，只是`-E`没有暗示。驱动程序根据是否给出 -o 选项来确定文件。如果是，驱动程序使用其参数，但后缀为`.d`，否则它采用输入文件的名称，删除所有目录组件和后缀，并应用`.d`后缀。
> 
> `-MMD`
> 
> 就像`-MD`除了只提到用户头文件，而不是系统头文件。
> 
> `-MP`
> 
> 此选项指示 CPP 为除主文件之外的每个依赖项添加虚假目标，从而导致每个依赖项都不依赖任何内容。`make`如果您删除头文件而不更新`Makefile`以匹配，这些虚拟规则会解决错误。

还可以考虑研究Paul Smith 的[这篇文章](http://mad-scientist.net/make/autodep.html)（他是 GNU Make 的维护者）。它很好地概述了不同的 autodep 生成方法。

# winforms - Winforms 半透明 PNG 优于半透明 PNG

> ID：10455484
> 
> 赞同：2
> 
> 时间：2012-05-04T20:10:16.553
> 
> 标签：winforms, user-interface, png, transparency

我想我一定遗漏了一些明显的东西，但是经过几个小时的搜索后我无法找到它。有没有办法使用 PictureBox 或其他控件来包含具有部分透明/alpha 混合像素的图像，并将其放置在另一个图像上并基于其下的图像进行混合？

例如，这会产生我想要的结果：

1.  在表单上放置一个面板。
2.  添加一个 OnPaint 处理程序。
3.  在 OnPaint 处理程序中绘制 1 个 PNG，然后在其上绘制另一个 PNG，两者都使用 Graphics.DrawImage。

这不会：

1.  在窗体上放置一个 PictureBox 并将其设置为 PNG。

2.  在窗体上放置另一个 PictureBox 并将其设置为 PNG。

3.  将第二个图片框放在第一个图片框上。

...即使第二个图片框只是空的并且背景颜色为透明，它仍然会覆盖它下面的图片。

我读过这源于所有winform控件都是窗口，所以它们本质上是不透明的。

...但即使是我要迁移的 15 岁平台，Borland 的 VCL，也有几个无窗口控件，所以很难对 winforms 进行映像，至少没有一些简单的解决方案？

我上面的第一个示例是一个答案，没错，但是当您只能使用一个大面板并在其中绘制所有“控件”时，这会增加很多工作。如果您可以拥有带有单独鼠标事件/等的单独控件，那就更好了。即使不是图像控件，并且我必须自己绘制控件，也可以，只要我可以在每个控件中放置一个图像即可。在 VCL 中，他们称之为“画框”，只是一个矩形区域，您可以放置​​在表单上并在其上绘制任何您想要的东西。有它自己的鼠标事件、Bounds 等。如果你没有在其中绘制任何东西，它就好像它甚至不存在（100% 透明），除了它仍然获得鼠标事件，所以可以用作“热点”或“目标”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T20:34:36.993

PictureBox 控件很好地支持透明度，只需将其BackColor 属性设置为Transparent。这将使其父级的像素作为背景可见。

问题是设计师不会让你把第二个图片框变成第一个的孩子。您所需要的只是构造函数中的一小段代码来重新设置它的父级。并给它一个新的位置，因为它是相对于父母的。像这样：

```
 public Form1() {
        InitializeComponent();
        pictureBox1.Controls.Add(pictureBox2);
        pictureBox2.Location = new Point(0, 0);
        pictureBox2.BackColor = Color.Transparent;
    } 
```

不要犹豫使用 OnPaint() 顺便说一句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:20:38.030

抱歉，我刚刚发现了这个......一旦我决定在 Google 上搜索“winforms 透明面板”而不是我之前所做的搜索，TransPictureBox 示例显示似乎完全符合我的需要：

[C# 中重叠图片框的透明度问题](https://stackoverflow.com/questions/1234999/transparency-problem-by-overlapped-pictureboxs-at-c-sharp)

看起来它有2个部分：

1.  为窗口样式设置 WS_EX_TRANSPARENT

2.  覆盖“绘制背景”方法（或可选地可能使控件样式不透明）。

# python - 将浮点数写入文件时如何减少小数点后的位数？

> ID：10455489
> 
> 赞同：6
> 
> 时间：2012-05-04T20:10:47.510
> 
> 标签：python

在我的程序中，我将浮点数打印到文件中。这些数字的精度很高，所以小数点后的位数很多，即数字0.0433896882981。如何减少打印到文件中的位数？所以我会打印 0.043 而不是 0.0433896882981。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T20:13:13.297

您可以使用基本的字符串格式，例如：

```
>>> print '%.4f' % (2.2352341234)
2.2352 
```

在这里，`%.4f`告诉 Python 将精度限制为小数点后四位。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T20:14:31.877

你没有说哪个版本，或者你是怎么做的，所以我假设是 3.x。

```
str.format("{0:.3f}", pi) # use 3 digits of precision and float-formatting. 
```

格式说明符通常如下所示：

> [[fill]align][sign][#][0][minimumwidth][.precision][type]

其他示例：

```
>>> str.format("{0:" ">10.5f}", 3.14159265)
'   3.14159'
>>> str.format("{0:0>10.5f}", 3.14159265)
'0003.14159'
>>> str.format("{0:<10.5f}", 3.14159265)
'3.14159   ' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T20:13:30.827

可以使用以下格式指令指定小数点后的位数：

```
In [15]: n = 0.0433896882981
In [16]: print '%.3f' % n 
```

产生：

```
0.043 
```

该`% f`部分表示您正在打印带小数点`.3`的数字，即小数点后的位数。

其他示例：

```
In [17]: print '%.1f' % n
0.0

In [18]: print '%.2f' % n
0.04

In [19]: print '%.4f' % n
0.0434

In [20]: print '%.5f' % n
0.04339 
```

# xcode4 - Phonegap IOS 运行 HiWorld 示例应用程序产生“EXC_BAD_ACCESS”

> ID：10455500
> 
> 赞同：0
> 
> 时间：2012-05-04T20:11:37.397
> 
> 标签：xcode4, cordova, ios4

OSX：10.6.8 Xcode：4.0.2 Phonegap：1.4.1.js 或 Cardova-1.7.0

遵循简单的 HiWorld 示例[http://phonegap.com/start](http://phonegap.com/start)会产生以下错误：

AppDelegate.m:

```
self.viewCOntroller = [[[MainViewCOntroller alloc] init] autorelease]; 
```

错误：

```
Thread 1: Program received signal: "EXC_BAD_ACCESS" 
```

**编辑**：我使用的是 ipad 3.2 模拟器，一旦我将其更改为 iphone 4.0 或更高版本，问题就消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:14:28.957

这是（在我看来）iOs 开发中最常见的错误。

该错误意味着您正在尝试访问已发布的内容。

`viewController`您可能会在已经发布它之后尝试访问它。

删除`autorelease`，看看会发生什么。

# android - Android PagerAdapter 没有调用 instantiateItem

> ID：10455504
> 
> 赞同：11
> 
> 时间：2012-05-04T20:12:01.187
> 
> 标签：android, adapter

我正在尝试在我的应用程序中使用 PagerAdapter 实现 ViewPager。我主要处理[这个例子](http://blog.stylingandroid.com/archives/537)。

我`PagerAdapter`的称为 DataPagerAdapter 并使用以下构造函数`instantiateItem`，并且我从以下位置扩展视图`data_list_view.xml`：

```
public class DataPagerAdapter extends PagerAdapter
    implements TitleProvider {
    private LayoutInflater mInflater;

    private static String[] titles = new String[]
    {
        "Page 1",
        "Page 2",
        "Page 3"
    };
    private final Context context;

    public DataPagerAdapter( Context context )
    {
        this.context = context;
    }

    @Override
    public String getTitle( int position )
    {
        return titles[ position ];
    }

    @Override
    public int getCount()
    {
        return titles.length;
    }

    @Override
    public Object instantiateItem( View pager, int position )
    {
        ListView v = (ListView) mInflater.inflate(R.layout.data_list_view, null);
        ((ViewPager)pager).addView( v, 0 );
        return v;
    }

    @Override
    public void destroyItem( View pager, int position, Object view )
    {
        ((ViewPager)pager).removeView( (ListView)view );
    }

    @Override
    public boolean isViewFromObject( View view, Object object )
    {
        return view.equals( object );
    }

    @Override
    public void finishUpdate( View view ) {}

    @Override
    public void restoreState( Parcelable p, ClassLoader c ) {}

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate( View view ) {}
} 
```

在我的活动中，我得到了我的适配器：

```
DataPagerAdapter adapter = new DataPagerAdapter( this ); 
```

然后稍后我想在代码中引用我的 dataListView：

```
dataListView = (ListView) findViewById(R.id.listViewData); 
```

问题是，由于从未处理过，所以调用将`dataListView`其返回为 null 。`findViewById``instantiateItem`

什么时候被`instantiateItem`调用，这是自动完成的（正如示例似乎暗示的那样）还是我必须以某种方式强制它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T18:39:51.987

请注意，您的适配器使用不推荐使用的方法：

```
public Object instantiateItem(View container, int position)
public void destroyItem(View container, int position, Object object) 
```

API 说要改用这些：

```
public Object instantiateItem(ViewGroup container, int position)
public void destroyItem(ViewGroup container, int position, Object object) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-29T09:24:48.843

在我的情况下，问题是我错误地设置了`ViewPager`可见性`GONE`并且它没有被调用。只需使 viewPager 可见性在布局中可见。

# javascript - KnockoutJS 绑定在 IE8 中失败

> ID：10455508
> 
> 赞同：4
> 
> 时间：2012-05-04T20:12:30.470
> 
> 标签：javascript, internet-explorer-8, knockout.js

以下敲除绑定在真实浏览器中工作正常，但在 IE8（和兼容模式下的 IE9）中失败

```
<li data-bind="attr: { class: id() == $root.currentItem().id() ? 'active' : '' }"> 
```

![在此处输入图像描述](../Images/cb187c84f4f5b7d1e5acebcdf9128412.png)

有谁知道为什么，我该如何解决？

* * *

这是整个代码，如果有帮助的话：

```
<div class="toc-outer">
    <ol id="table-of-contents" data-bind="sortable: { data: list, template: 'listTemplate', allowDrop: false, isEnabled: false }" class="toc toc-tree"></ol>
</div>

<script id="listTemplate" type="text/html">
    <li data-bind="attr: { class: id() == $root.currentItem().id() ? 'active' : '' }">
        <div data-bind="attr: { class: 'dropdown' + (id() == $root.currentItem().parentId() ? ' active' : '') }">
            <a href="#" class="toggle">
                <i data-bind="visible:children().length > 0, attr: { class: 'icon-toggle icon-minus hide' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
            </a>
            <a class="dropdown-toggle menu"
                href="#"
                data-bind="visible:$root.allowEditing"
                data-toggle="dropdown">

                <i data-bind="attr: { class: 'icon-menu icon-list-alt hide' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
            </a>
            <a class="name" data-bind="attr: {href: hash}">
                <i data-bind="visible: type() == 'settings', attr: { class: 'icon-type icon-settings icon-home' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
                <i data-bind="visible: type() == 'video', attr: { class: 'icon-type icon-video icon-facetime-video' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
                <i data-bind="visible: type() == 'data', attr: { class: 'icon-type icon-data icon-signal' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
                <i data-bind="visible: type() == 'file', attr: { class: 'icon-type icon-file icon-download-alt' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
                <i data-bind="visible: type() == 'test', attr: { class: 'icon-type icon-test icon-ok-sign' + (id() == $root.currentItem().id() ? ' icon-white' : '') }"></i>
                <span data-bind="text:name"></span>
                <span class="badge draft" data-bind="visible:status() == 'draft'">D</span>
            </a>
            <dl class="dropdown-menu" data-bind="visible:$root.allowEditing">
                <dd><a href="#" data-bind="visible: parentId() !== 0 && !topLevelChild(), click: moveOut" data-toggle="pill" data-target="#item-pane" title="#{TocMoveOut}" class="moveItemOut">#{TocMoveOut}</a></dd>
                <dd><a href="#" data-bind="visible: parentId() !== 0 && !firstSibling(), click: moveIn" data-toggle="pill" data-target="#item-pane" title="#{TocMoveIn}" class="moveItemIn">#{TocMoveIn}</a></dd>
                <dd data-bind="visible: parentId() !== 0 && (!topLevelChild() || !firstSibling())" class="divider"></dd>
                <dd><a href="#" data-toggle="pill" data-target="#item-pane" title="#{TocEdit}" class="edit">#{TocEdit}</a></dd>
                <dd data-bind="visible: parentId() !== 0"><a href="#" class="remove">Remove</a></dd>
                <dd class="divider"></dd>
                <dd><a href="#page" data-toggle="pill" data-target="#item-pane" title="#{TocAddPage}" class="add">#{TocAddPage}</a></dd>
                <dd><a href="#video" data-toggle="pill" data-target="#item-pane" title="#{TocAddVideo}" class="add">#{TocAddVideo}</a></dd>
                <dd><a href="#file" data-toggle="pill" data-target="#item-pane" title="#{TocAddFile}" class="add">#{TocAddFile}</a></dd>
                <dd><a href="#test" data-toggle="pill" data-target="#item-pane" title="#{TocAddTest}" class="add">#{TocAddTest}</a></dd>
                <dd><a href="#data" data-toggle="pill" data-target="#item-pane" title="#{TocAddData}" class="add">#{TocAddData}</a></dd>
                <dd class="divider"></dd>                                
                <dd><a href="#library" data-toggle="pill" data-target="#item-pane" title="#{TocAddLibrary}" class="add add-from-library">#{TocAddLibrary}</a></dd>
            </dl>                            
        </div>
        <span class="divider" data-bind="visible: type() == 'settings'"></span>
        <ol class="toc-child" data-bind="sortable: {template: 'listTemplate', data:children, isEnabled: $root.allowEditing(), beforeMove: beforeTreeItemMove, afterMove: tocSorted, allowDrop: false }"></ol>
    </li>
</script> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-04T20:39:41.227

似乎 IE8 被这个词弄糊涂了`class`，所以它需要用引号引起来。所以

```
<li data-bind="attr: { class: id() == $root.currentItem().id() ? 'active' : '' }"> 
```

变成

```
<li data-bind="attr: { 'class': id() == $root.currentItem().id() ? 'active' : '' }"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T05:28:09.057

你有没有理由远离淘汰赛的**“css”绑定**？

[http://knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html)

很高兴知道您在 IE 中发现了问题，并且您找到了解决方法，但因为它不在“attr”绑定的文档中，并且“css”绑定*似乎*是淘汰赛推荐的应用类名的操作过程，可能不会让您或其他人感到困惑吗？

从[“css”绑定的淘汰文档中](http://knockoutjs.com/documentation/css-binding.html)：

> "**目的**
> 
> 绑定将`css`一个或多个命名的**CSS 类**[*强调添加*] 添加或删除到关联的 DOM 元素。这很有用，例如，如果某个值变为负数，则以红色突出显示该值。
> 
> （注意：如果您不想应用 CSS 类而是想直接分配样式属性值，请参阅样式绑定。）"

# python - Django 模板 datetime.weekday 名称

> ID：10455518
> 
> 赞同：9
> 
> 时间：2012-05-04T20:13:05.700
> 
> 标签：python, django, datetime, django-templates

有没有办法在模板中将日期时间对象的工作日显示为工作日的实际名称？基本上我希望它打印`Friday`而不是`5`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T20:22:24.040

请参阅[内置`date`过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)的文档。从那里你会看到你需要使用：

> l 星期几，文本，长。'星期五'

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-01T01:25:00.877

为了清楚起见，模板标签格式字符“l”（小写“L”）可以在 Django 模板中使用，如下所示：

```
{{ object.some_date_field | date:"l" }} 
```

Django 1.8.2

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T22:07:49.960

您还可以使用：

```
import datetime
today = datetime.datetime.today()
print(today.strftime('%A')) 
```

# ios - 在情节提要中实例化 xib 时对 initWithCoder 的无休止的递归调用

> ID：10455521
> 
> 赞同：6
> 
> 时间：2012-05-04T20:13:09.563
> 
> 标签：ios, storyboard, nib

为了在整个应用程序中重用某个子视图（基于故事板），我决定将子视图构建为 nib，并将其加载。为此，我做了以下工作：

我有一个 UIView 子类，我们可以称之为 Widget。我创建了一个相应的 xib 文件，将 File owner 属性设置为我的新子类，连接 IBOutlets。

然后，在我的故事板中，我在视图控制器中有一个 uiview，我将它的类设置为我创建的 Widget 类。

在小部件类中，我覆盖了 initWithCoder，并在其中加载 nib，如下所示：

```
-(id)initWithCoder:(NSCoder *)aDecoder{
    if ((self = [super initWithCoder:aDecoder])){
        [self addSubview:[[[NSBundle mainBundle] loadNibNamed:@"Widget" owner:self options:nil] objectAtIndex:0]];
    }
    return self;
} 
```

应用程序此时会崩溃，在这里设置断点表明 initWithCoder 被一遍又一遍地调用。

在这种情况下，我似乎混合了两种使用笔尖的方法，但我不清楚我哪里出错了。如有必要，我可以抛出堆栈跟踪，但它基本上是对同一函数的无休止的嵌套调用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T22:27:40.313

您是否碰巧在 .xib 文件中将视图的“自定义类”设置为“小部件”？

这将解释您所看到的行为，因为`initWithCoder:`它是从 xib 加载的所有内容的初始化程序：

1.  包含 Widget 对象的父视图是从 xib 加载的
2.  Widget 的`initWithCoder:`方法被调用，并尝试加载 Widget xib
3.  小部件 xib 包含`UIView`带有自定义类“小部件”的 Widget，因此再次使用 来初始化小部件对象 `initWithCoder:`，等等。

如果确实如此，您所要做的就是在您的 Widget 的 xib 中删除 UIView 的“自定义类”条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-30T07:06:14.693

我有同样的问题。我的错误是在空文件的所有者类中。在 File's Owner 中，自定义类必须不为空（Widget），并且根视图必须为空。

IBActions 和 IBOutlets 都很好。

# jquery - jQuery css 函数不适用于所有浏览器

> ID：10455526
> 
> 赞同：3
> 
> 时间：2012-05-04T20:13:17.180
> 
> 标签：jquery, css

鉴于此 HTML、CSS 和 JavaScript：http: [//jsfiddle.net/XvqYS/3/](http://jsfiddle.net/XvqYS/3/)

如果您在 Google Chrome 上运行它，它会发出警报

> 10像素

在 IE、Safari 或 FireFox 警报和空字符串上运行它。为什么？

我正在使用 IE9、Chrome 18.0.1025.168、FireFox 12.0、Safari 5.0.4

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T20:14:34.167

`margin-left`必须使用的个别属性。

读取所有属性的基本方法是：http: [//jsfiddle.net/XvqYS/8/](http://jsfiddle.net/XvqYS/8/)

```
$(function () {
    var $main = $("#main");
    var margin = [
        $main.css('margin-top'),
        $main.css('margin-right'),
        $main.css('margin-bottom'),
        $main.css('margin-left')
    ].join(' ');
    alert(margin);
}); 
```

您可以调整它以返回一个紧凑的[值](https://developer.mozilla.org/en/CSS/margin#Values)，例如。`10px 10px 10px 10px`-> `10px`。

# ruby-on-rails - 将 Rails 应用程序推送到 Heroku 时缺少“sqlite3.h”

> ID：10455527
> 
> 赞同：24
> 
> 时间：2012-05-04T20:13:20.953
> 
> 标签：ruby-on-rails, git, heroku, sqlite, push

我正在关注[本教程](http://ruby.railstutorial.org/chapters/a-demo-app#sec:deploying_the_demo_app)，但是当我尝试推送到 Heroku 时它失败了。似乎缺少“sqlite3.h”。我是开发新手，所以我不确定哪些信息可以帮助人们诊断问题，所以这里有一切:)。我在 Mac OS X 10.7 Lion 上运行。以下是我正在使用的所有内容的版本：

```
Amits-MacBook-Air-2:demo_app amitgupta$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.3.0]
Amits-MacBook-Air-2:demo_app amitgupta$ rails -v
Rails 3.2.3
Amits-MacBook-Air-2:demo_app amitgupta$ sqlite3 -version
3.7.11 2012-03-20 11:35:50 00bb9c9ce4f465e6ac321ced2a9d0062dc364669
Amits-MacBook-Air-2:demo_app amitgupta$ heroku -v
2.25.0
Amits-MacBook-Air-2:demo_app amitgupta$ port -v
MacPorts 2.0.4
Entering interactive mode... ("help" for help, "quit" to quit)
[RailsApps/demo_app] > quit 
Goodbye 
```

当我尝试推送到 Heroku 时：

```
Amits-MacBook-Air-2:demo_app amitgupta$ heroku create --stack cedar
Creating floating-stream-8009... done, stack is cedar
http://floating-stream-8009.herokuapp.com/ | git@heroku.com:floating-stream-8009.git
Amits-MacBook-Air-2:demo_app amitgupta$ git push heroku master 
```

这是我得到的：

```
Counting objects: 119, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (104/104), done.
Writing objects: 100% (119/119), 33.74 KiB, done.
Total 119 (delta 17), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.1.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from https://rubygems.org/.......
       Installing rake (0.9.2.2)
       .
       .
       .
       Installing sqlite3 (1.3.6) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       .
       .
       .
       --disable-local
       Gem files will remain installed in /tmp/build_2l2dn7bx7lu34/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_2l2dn7bx7lu34/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occured while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:blazing-mountain-3659.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:blazing-mountain-3659.git' 
```

当我做：

```
Amits-MacBook-Air-2:demo_app amitgupta$ sudo port install sqlite3 +universal 
```

我得到：

```
Password:
--->  Computing dependencies for sqlite3
--->  Cleaning sqlite3 
```

接下来我尝试了：

```
Amits-MacBook-Air-2:demo_app amitgupta$ sudo gem install sqlite3 -v '1.3.6' 
```

并得到：

```
Building native extensions.  This could take a while...
Successfully installed sqlite3-1.3.6
1 gem installed
Installing ri documentation for sqlite3-1.3.6...
Installing RDoc documentation for sqlite3-1.3.6... 
```

然后：

```
Amits-MacBook-Air-2:demo_app amitgupta$ bundle install 
```

给出：

```
Using rake (0.9.2.2) 
.
.
.
Using sqlite3 (1.3.6) 
Using uglifier (1.2.4) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

然后我尝试再次推送到 Heroku，但遇到了同样的问题。也许它与第一个命令“Creating floating-stream-8009”和第二个命令“未能将一些参考推送到'git@heroku.com:blazing-mountain-3659.git'”之间的差异有关？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-06T05:39:24.440

```
gem 'sqlite3', :group => [:development, :test]
group :production do
  gem 'pg'
end 
```

1.  编辑`Gemfile`如上
2.  消除`Gemfile.lock`
3.  跑`bundle install --without production`
4.  `git add .`
5.  `git commit -am "bundle updating sqlite3"`
6.  `git push heroku master`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-04T20:25:11.343

Heroku 使用 postgresql，因此您想删除 sqlite3 或将其移至 Gemfile 中的开发组。

检查 Gemfile.lock 是否有任何其他可能依赖于 sqlite3 的 gem，因为这也会导致问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T03:51:29.797

我有一个类似的问题，我什至没有使用 sqlite3，但是在从 gem 文件中删除它之后，我仍然得到了那个错误

为我解决的是一个提交命令

```
git commit -am 
```

我在[本教程中找到的](http://railsapps.github.com/rails-heroku-tutorial.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T01:14:48.520

发生在我身上的是，我正在关注 Heroku 教程，当我使用`git push heroku master`它时，它是从我最新的 Git 提交中推送的（显然！）

我忘记的是，在 Git 的眼里，我还在 gemfile 中使用 sqlite！傻我！

所以我用`git add .`了一个`git commit -m "Changed to Postgres."`，所以 Git 知道了这些变化。之后推动对我来说效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-21T18:47:03.423

是的，正如这些答案所暗示的，[由于 Heroku 平台的限制，](https://devcenter.heroku.com/articles/sqlite3#disk-backed-storage)*大多数*时候您会希望避免在生产中使用 SQLite 。**但是**，无论如何，您可能有一个[完全可以接受的用例](https://news.ycombinator.com/item?id=23281994)（例如只读配置）来使用 SQLite。我的建议是：

 **1.  添加[`heroku-buildpack-apt`](https://elements.heroku.com/buildpacks/heroku/heroku-buildpack-apt)构建包

2.  添加到您的`Aptfile`：

    ```
    libsqlite3-dev
    libsqlite3-0 
    ```**

# c# - 可空类型和赋值运算符

> ID：10455532
> 
> 赞同：4
> 
> 时间：2012-05-04T20:13:37.427
> 
> 标签：c#, .net, operator-overloading, nullable, assignment-operator

我一直认为 .NET 框架的可为空类型只不过是框架为我们提供的一个不错的构造，但并没有为语言本身添加任何新内容。

也就是说，直到今天，出于演示的目的，我尝试创建自己的 Nullable 结构。

我得到了我需要的一切，除了这样做的能力：

```
var myInt = new Nullable<int>(1);
myInt = 1; 
```

问题是第二条语句，因为我无论如何都不能重载赋值运算符。

我的问题是：这是赋值运算符重载的语言中的一种特殊情况吗？如果不是，您将如何使前面的示例工作？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T20:16:19.623

分配问题是使用声明为的隐式运算符处理的：

[`public static implicit operator Nullable<T> (T value)`](http://msdn.microsoft.com/en-us/library/ms131346.aspx)

这是在没有任何特定语言功能的情况下处理的。

对可空支持的语言的主要更改是能够将其编写为：

```
 int? myInt = 1; 
```

您可以通过以下方式在您的类型中实现此功能：

```
public static implicit operator Nullable<T> (T value)
{
    return new Nullable<T>(value);
} 
```

可悲的是，有很多与`Nullable<T>`C# 语言和 CLR相关的功能[无法在您的代码中复制](https://stackoverflow.com/a/9013171/65358)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T20:20:35.630

其他答案同上，但请注意，这`Nullable<T>`也确实有一些[魔力](https://stackoverflow.com/questions/9012934/why-does-the-operator-work-for-nullablet-when-is-not-defined)。

引用 Lippert 的答案

> C# 自动将运算符提升为可为空的。没有办法说“自动将操作员提升到 MyNullable”。不过，您可以通过编写自己的用户定义运算符来非常接近。
> 
> C# 对 null 文字有特殊的规则——您可以将它们分配给可为 null 的变量，并将它们与可为 null 的值进行比较，编译器会为它们生成特殊的代码。
> 
> 可空对象的装箱语义非常奇怪，并且融入了运行时。没有办法模仿他们。
> 
> is、as 和合并运算符的可空语义已融入语言。
> 
> Nullables 不满足结构约束。没有办法效仿。
> 
> 等等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T20:15:54.247

不是赋值运算符被重载，而是该类`Nullable<T>`指定了一个隐式转换运算符，该运算符能够转换`T`为`Nullable<T>`.

您可以轻松地将此功能添加到您的课程中：

```
class MyInteger {
  private int value;

  public MyInteger(int value) { this.value = value; }

  public static implicit operator MyInteger(int value) {
    return new MyInteger(value);
  }
} 
```

然后以同样的方式使用运算符：

```
MyInteger obj = 123; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T20:16:17.460

根据this page[运算符重载](http://msdn.microsoft.com/en-us/library/aa691324%28v=vs.71%29.aspx)

> 请注意，赋值运算符本身 (=) 不能重载。

您可以定义一个 [隐式运算符](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.71%29.aspx)

# ios - 共享数据文件的完整版和精简版应用程序

> ID：10455536
> 
> 赞同：0
> 
> 时间：2012-05-04T20:13:52.343
> 
> 标签：ios, core-data, ios5

是否可以？看起来如果两个应用程序（或同一个应用程序的变体）使用相同的包标识符，它们都可以访问相同的数据文件——对吗？

我正在为用户寻找最简单的方法来升级到完整版，同时保留精简版的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:45:47.293

是的，如果多个应用程序使用相同的捆绑标识符，它们将被识别为同一个应用程序 - 但您不能在 App Store 或设备上拥有多个具有相同标识符的应用程序！

目前无法通过本地文件系统在不同的应用程序（具有唯一的包标识符）之间共享文件。您可以使用自定义 URL 方案将一些数据从一个正在运行的应用程序传递到另一个应用程序，但我认为这不是您想要的。

**Apple 建议**的处理这种情况的方法是只有一个应用程序，并实施应用程序内购买以升级到完整版。

这是一个非常相似的 SO 问题：[Share data between two or more iPhone applications](https://stackoverflow.com/questions/9425706/share-data-between-two-or-more-iphone-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:22:00.200

如果您创建多个目标，则可以创建访问相同数据的精简版和完整版。使用#ifdef，您可以根据设置限制访问！这是一个链接：[如何基于一个 xcode 项目构建 Lite 和 Full 版本的 iPhone 应用程序？](https://stackoverflow.com/questions/4664991/how-to-build-both-lite-and-full-version-of-iphone-app-based-on-one-xcode-project) 希望这有帮助！

# sbt - 怎么玩！在 MSYS bash 中运行的框架

> ID：10455537
> 
> 赞同：8
> 
> 时间：2012-05-04T20:14:01.610
> 
> 标签：sbt, playframework-2.0, msys

我不能玩！来自 MSYS shell 的框架（在 Windows 上的 Git 中使用）。

```
Error during sbt execution: Could not find configuration file
'c:/Dev/Prg/Play/framework/sbt/play.boot.properties'.  Searched:
        file:/C:/Users/Paul/
        file:/C:/Users/Paul/
        file:/C:/Dev/Prg/Play/framework/sbt/ 
```

有没有办法让它运行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T19:13:43.923

此问题的解决方案已发布在[Play 邮件列表中](https://groups.google.com/d/topic/play-framework/CN0L5AaBxwg/discussion)：有[一个补丁](https://gist.github.com/2939832)可以解决此问题。

```
diff -r --unified play-2.0-orig/framework/build play-2.0-cygwin/framework/build
--- play-2.0-orig/framework/build   2012-03-12 20:25:28.000000000 -0700
+++ play-2.0-cygwin/framework/build 2012-06-15 17:56:57.436000000 -0700
@@ -8,4 +8,4 @@
   DEBUG_PARAM="-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=${JPDA_PORT}"
 fi

-java ${DEBUG_PARAM} -Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M -Dfile.encoding=UTF8 -Dplay.version="${PLAY_VERSION}" -Dsbt.ivy.home=`dirname $0`/../repository -Dplay.home=`dirname $0` -Dsbt.boot.properties=`dirname $0`/sbt/sbt.boot.properties -jar `dirname $0`/sbt/sbt-launch.jar "$@"
\ No newline at end of file
+java ${DEBUG_PARAM} -Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M -Dfile.encoding=UTF8 -Dplay.version="${PLAY_VERSION}" -Dsbt.ivy.home=`dirname $0`/../repository -Dplay.home=`dirname $0` -Dsbt.boot.properties=$BOOTPROP`dirname $0`/sbt/sbt.boot.properties -jar `dirname $0`/sbt/sbt-launch.jar "$@"
diff -r --unified play-2.0-orig/play play-2.0-cygwin/play
--- play-2.0-orig/play  2012-03-12 20:22:03.000000000 -0700
+++ play-2.0-cygwin/play    2012-06-15 20:48:41.624800000 -0700
@@ -1,5 +1,23 @@
 #! /usr/bin/env sh

+case `uname` in
+  CYGWIN*)
+    function dirname {
+      cygpath -m `command dirname $@`
+    }
+    typeset -fx dirname
+    export BOOTPROP="file:///"
+    ;;
+  MINGW32*)
+    function dirname { (cd `command dirname $@`; pwd -W) }
+    typeset -fx dirname
+    export BOOTPROP="file:///"
+    ;;
+  *)
+    export BOOTPROP=""
+    ;;
+esac
+
 PRG="$0"
 while [ -h "$PRG" ] ; do
     PRG=`readlink "$PRG"`
@@ -54,5 +72,5 @@
   fi

 else
-  java -Dsbt.ivy.home=$dir/repository -Dplay.home=$dir/framework -Dsbt.boot.properties=$dir/framework/sbt/play.boot.properties -jar $dir/framework/sbt/sbt-launch.jar "$@"
+  java -Dsbt.ivy.home=$dir/repository -Dplay.home=$dir/framework -Dsbt.boot.properties=$BOOTPROP$dir/framework/sbt/play.boot.properties -jar $dir/framework/sbt/sbt-launch.jar "$@"
 fi 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-04T15:00:52.777

play-2.1.3的[解决方案。](https://gist.github.com/xak2000/6437577)

1.  启动mingw32
2.  cd /path/to/play-2.1.3
3.  补丁 -p1 < /path/to/play_cygwin.patch

此补丁的副本：

```
diff -r --unified play-2.1.3/framework/build play-2.1.3-cygwin/framework/build
--- play-2.1.3/framework/build   2013-08-06 12:29:56 +0000
+++ play-2.1.3-cygwin/framework/build   2013-09-04 13:44:05 +0000
@@ -10,4 +10,4 @@
   DEBUG_PARAM="-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=${JPDA_PORT}"
 fi

-java ${DEBUG_PARAM} -Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M ${JAVA_OPTS} -Dfile.encoding=UTF-8 -Dplay.version="${PLAY_VERSION}" -Dsbt.ivy.home=`dirname $0`/../repository -Dplay.home=`dirname $0` -Dsbt.boot.properties=`dirname $0`/sbt/sbt.boot.properties -jar `dirname $0`/sbt/sbt-launch.jar "$@"
+java ${DEBUG_PARAM} -Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M ${JAVA_OPTS} -Dfile.encoding=UTF-8 -Dplay.version="${PLAY_VERSION}" -Dsbt.ivy.home=`dirname $0`/../repository -Dplay.home=`dirname $0` -Dsbt.boot.properties=$BOOTPROP`dirname $0`/sbt/sbt.boot.properties -jar `dirname $0`/sbt/sbt-launch.jar "$@"
diff -r --unified play-2.1.3/play play-2.1.3-cygwin/play
--- play-2.1.3/play 2013-09-04 02:44:05 +0000
+++ play-2.1.3-cygwin/play  2013-09-04 13:51:36 +0000
@@ -1,5 +1,23 @@
 #! /usr/bin/env sh

+case `uname` in
+  CYGWIN*)
+    function dirname {
+      cygpath -m `command dirname $@`
+    }
+    typeset -fx dirname
+    export BOOTPROP="file:///"
+    ;;
+  MINGW32*)
+    function dirname { (cd `command dirname $@`; pwd -W) }
+    typeset -fx dirname
+    export BOOTPROP="file:///"
+    ;;
+  *)
+    export BOOTPROP=""
+    ;;
+esac
+
 PRG="$0"
 while [ -h "$PRG" ] ; do
   PRG=`readlink "$PRG"`
@@ -61,5 +79,5 @@
   fi

 else
-  "$JAVA" -Dsbt.ivy.home=$dir/repository -Dplay.home=$dir/framework -Dsbt.boot.properties=$dir/framework/sbt/play.boot.properties -jar $dir/framework/sbt/sbt-launch.jar "$@"
+  "$JAVA" -Dsbt.ivy.home=$dir/repository -Dplay.home=$dir/framework -Dsbt.boot.properties=$BOOTPROP$dir/framework/sbt/play.boot.properties -jar $dir/framework/sbt/sbt-launch.jar "$@"
 fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T18:57:45.910

我遇到了同样的问题。在我的情况下，由于目录名称中有空格而发生了问题。我**重命名**了一个名称中包含空格的文件夹，我的问题得到了解决。

# python - python unittest assertCountEqual使用'is'而不是'=='？

> ID：10455538
> 
> 赞同：3
> 
> 时间：2012-05-04T20:14:03.513
> 
> 标签：python, unit-testing, python-3.x

我正在尝试使用 python 的`unittest`库来编写一些单元测试。我有一个返回无序列表对象的函数。我想验证对象是否相同，并且我正在尝试使用[assertCountEqual](http://docs.python.org/py3k/library/unittest.html?highlight=unittest#unittest.TestCase.assertCountEqual)来执行此操作。

然而，这似乎失败了，尽管各个对象`==`彼此相等 ( )。这是断言失败的“差异”输出：

```
First has 1, Second has 0:  Intersection(time=8.033252939677466e-08, del_time=8.033252939677466e-08, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
First has 1, Second has 0:  Intersection(time=-9.918729244820295e-16, del_time=-9.918729244820295e-16, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
First has 0, Second has 1:  Intersection(time=8.033252939677466e-08, del_time=8.033252939677466e-08, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
First has 0, Second has 1:  Intersection(time=-9.918729244820295e-16, del_time=-9.918729244820295e-16, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False) 
```

验证它们是否相等：

```
>>> i = Intersection(time=8.033252939677466e-08, del_time=8.033252939677466e-08, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
>>> j = Intersection(time=8.033252939677466e-08, del_time=8.033252939677466e-08, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
>>> i == j
True
>>> i = Intersection(time=-9.918729244820295e-16, del_time=-9.918729244820295e-16, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
>>> j = Intersection(time=-9.918729244820295e-16, del_time=-9.918729244820295e-16, pos=Vector(10.00, 0.00), line=Line(Vector(500.00, 0.00), Vector(0.00, 0.00)), ent=None, oth=None, invalid=False)
>>> i == j
True 
```

我的猜测是该`assertCountEqual`函数正在检查两者是否具有相同的身份（例如`i is j`），而不是相等。

*   是否有一个 unittest 函数可以提供相同的差异功能，但使用相等比较，而不是身份？
*   或者，有什么方法可以编写一个类似于的函数`assertCountEqual`？

**编辑**：我正在运行 python 3.2.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:10:51.313

您可以自己寻找[比较是如何完成的](http://hg.python.org/cpython/file/5b2f40ed32fd/Lib/unittest/case.py#l969)：

*   从每个迭代生成一个列表
*   使用[collections.Counter](http://docs.python.org/py3k/library/collections#collections.Counter)来计算对象 - 仅适用于可散列元素
*   如果元素不可哈希，[则直接比较它们](http://hg.python.org/cpython/file/5b2f40ed32fd/Lib/unittest/util.py#l84)

由于您的 s 是对象，因此[默认情况下](http://docs.python.org/py3k/reference/datamodel.html#object.__hash__)`Intersection`它们是可[散列](http://docs.python.org/py3k/glossary.html#term-hashable)的，但是如果您不提供合适的散列函数（如果您[提供比较方法](http://docs.python.org/py3k/reference/datamodel.html#richcmpfuncs)，则应该这样做），它们将被视为不同。

那么，您的`Intersection`班级是否履行了哈希合同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:41:26.470

使用无序列表时，我通常使用这种模式（如果可以的话）

在扩展 TestCase 的类中

```
self.assertTrue(set(a) == set(b), 'The lists are not equal.') 
```

我`set`在这种情况下使用它是因为它允许比较无序组但是如果 a 有两个相同的对象，则比较*应该*失败，但在这种情况下您不需要对两个列表进行排序然后进行比较。

我尽量远离，`is`除非比较它，`None`因为它依赖于这样的[实例](https://stackoverflow.com/questions/132988/is-there-a-difference-between-and-is-in-python)

这是一个例子

```
In [2]: a = [0,1,2]

In [3]: b = [0,2,1,0]

In [4]: set(a) == set(b)
Out[4]: True

In [5]: c = [2,0,1]

In [6]: a.sort() == c.sort()
Out[6]: True 
```

对于更复杂的对象或类，您可能想尝试类似

```
self.assertTrue(a==b) 
```

或者您可以编写自己的比较方法

```
def compare_complex(*args): 
  for attr in ...
    if getattr(args[0],attr) != getattr(args[1],attr): return False
  return True 
```

我过去在分析两个使用属性存储重要值的类或 Numpy 实例时使用过类似的东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T22:03:14.647

`assertCountEqual()``collections.Counter`如果您的元素是可散列的，则使用。在 Python 3 中，如果您的类定义了自己的类`__eq__`，则默认`__hash__`会被禁止。

你有你自己的`__eq__`——定义一个`__hash__`（它必须在相等的地方`__eq__`相等），你应该没问题。

# node.js - Mongoose 用于根据产品类型具有不同属性的产品系统

> ID：10455540
> 
> 赞同：2
> 
> 时间：2012-05-04T20:14:07.023
> 
> 标签：node.js, mongodb, mongoose

我正在构建一个小型产品系统来尝试让我进入 Node.js、Mongo 等。我被 Mongo 所吸引，因为它可以将不同类型的产品存储在同一个集合中，而不是拥有多个表、eav 或任何其他不太适合的 MySQL 方法。

我正在阅读教程，起初我为 ProductModel 编写了一个 Provider，但后来有人建议我应该使用 Mongoose。

但是，Mongoose 的问题似乎是我需要为每个模型设置一个模式。我的第一个想法是一个产品应该有一个`title`和一个`type`属性。然后`type`再决定整体产品结构。例如，一个`dvd`产品可能有一个导演，而一个`t-shirt`产品没有导演，但会有不同的尺寸。

是否可以在 Mongoose 中实现这种结构，如何实现？我的理解是，如果我为每种产品类型提供一个模式，我将无法同时查询它们？不同的模式是否意味着不同的集合？- 我想不通。

感谢您提供任何帮助和指导，希望能够使用框架而不是编写数据库来处理自己（尽管我最初打算这样做，但如果其他人已经比我做得更好:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:52:48.307

Mongoose 有一个无模式类型，在您的情况下可能非常有用，但可能不是最佳解决方案。

ProductSchema = new Schema({any: {}});

如果您更改此对象上的任何内容，您需要在保存之前使用 obj.markModified('field-name') 通知 Mongoose。

[我的建议是在node-mongodb-native](https://github.com/mongodb/node-mongodb-native)上使用你自己的包装器，我在生产环境中运行了 7~8 个月没有问题。

还有另一个名为[mongoous](https://github.com/amark/mongous)的库，您可以查看它。

# sql-server - 使用 Netbeans 7.1.2 连接到 SQL Server

> ID：10455544
> 
> 赞同：2
> 
> 时间：2012-05-04T20:14:28.400
> 
> 标签：sql-server, database, netbeans, jdbc, connection

我正在尝试使用 netbeans 中的数据库连接向导连接到 SQLServer 2008。我已经下载了 jdbc 并将其链接到 .jar 文件，但它仍然无法连接。我的字段似乎包含正确的信息。

![截屏](../Images/b296c620dbf92b09d3f7cea5bf994b02.png)

# python - DELIMITER / 在 SQLAlchemy 中创建触发器

> ID：10455547
> 
> 赞同：9
> 
> 时间：2012-05-04T20:14:34.153
> 
> 标签：python, mysql, sqlalchemy, flask

我需要在 SQLAlchemy中创建一个 BEFORE INSERT[触发器：](http://dev.mysql.com/doc/refman/5.6/en/create-trigger.html)

```
DELIMITER |
CREATE TRIGGER set_rank BEFORE INSERT ON authors
FOR EACH ROW BEGIN
    IF NEW.rank = 0 THEN
        SET NEW.rank = (SELECT IFNULL(MAX(a.rank),0) + 1
                        FROM authors AS a
                        WHERE a.id = NEW.pub_id);
    END IF;
END |
DELIMITER ; 
```

在 mysql-workbench 中执行代码工作得很好，但在我的实际代码中执行时会呈现“您的 SQL 语法有错误”异常：

```
from sqlalchemy.sql.expression import text

connection = db.session.connection()
text(..., connection).execute(); 
```

运行`SELECT SLEEP(1)`，`CREATE TABLE test (id INT)`甚至`USE some_db`可以正常工作。

这是我得到的mysql错误消息：

> （1064，“您的 SQL 语法有错误；...在 'DELIMITER |\nCREATE TRIGGER set_rank BE...附近”）

我很确定我错误地使用了 DELIMITER。在这种情况下正确的语法是什么/如何解决我的问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T21:13:47.163

你真的不需要`DELIMITER`. 那仅适用于命令行客户端。作为程序员，您将分割语句，因此分隔符将被忽略。

```
>>> from sqlalchemy import *
>>> 
>>> trigger_text = """
... CREATE TRIGGER set_rank BEFORE INSERT ON authors
... FOR EACH ROW BEGIN
...     IF NEW.rank = 0 THEN
...         SET NEW.rank = (SELECT IFNULL(MAX(a.rank),0) + 1
...                         FROM authors AS a
...                         WHERE a.id = NEW.pub_id);
...     END IF;
... END
... """
>>> 
>>> metadata = MetaData()
>>> authors = Table("authors", metadata,
...     Column("id", Integer, primary_key=True),
...     Column("rank", Integer),
...     Column("pub_id", Integer))
>>> 
>>> engine = create_engine("mysql://root@127.0.0.1/test", echo=True)
>>> authors.create(engine)
2012-05-04 17:11:41,093 INFO sqlalchemy.engine.base.Engine 
CREATE TABLE authors (
    id INTEGER NOT NULL AUTO_INCREMENT, 
    rank INTEGER, 
    pub_id INTEGER, 
    PRIMARY KEY (id)
)

2012-05-04 17:11:41,093 INFO sqlalchemy.engine.base.Engine ()
2012-05-04 17:10:51,376 INFO sqlalchemy.engine.base.Engine COMMIT
>>> engine.execute(trigger_text)
2012-05-04 17:11:41,159 INFO sqlalchemy.engine.base.Engine 
CREATE TRIGGER set_rank BEFORE INSERT ON authors
FOR EACH ROW BEGIN
    IF NEW.rank = 0 THEN
        SET NEW.rank = (SELECT IFNULL(MAX(a.rank),0) + 1
                        FROM authors AS a
                        WHERE a.id = NEW.pub_id);
    END IF;
END

2012-05-04 17:11:41,159 INFO sqlalchemy.engine.base.Engine ()
2012-05-04 17:11:41,312 INFO sqlalchemy.engine.base.Engine COMMIT
<sqlalchemy.engine.base.ResultProxy object at 0x2be1ed0>
>>> 
```

# c++ - 队列 错误

> ID：10455550
> 
> 赞同：3
> 
> 时间：2012-05-04T20:14:47.210
> 
> 标签：c++, string, data-structures, reference, queue

我有这个有趣的情况。

我有一堆包含字符串的结构。

```
struct foo
{
    string mStringName;
}
vector<foo> mFoos; 
```

我还有一个字符串引用队列

```
queue<string&> mStringQueue; 
```

最后，我有一个接受 const string& 的函数

```
void Bar(const string&); 
```

情况如下。

```
//...in some loop
currentFoo = mFoos[index];

// Queue up the string name.
mStringQueue.push(currentFoo.mStringName);

//...Later on, go through our queue and pass each one to the function.

for (int queueIndex = 0; queueIndex < mStringQueue.size(); queueIndex++)
{
    Bar(mStringQueue.front());
    mStringQueue.pop();
} 
```

这给了我以下编译错误：

错误 C2664：“std::queue<_Ty>::push”：无法将参数 1 从“String”转换为“String &(&)”

我很难将注意力集中在字符串引用和诸如此类的东西上，所以任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T20:17:57.130

引用类型不满足可在标准容器中使用的类型的要求。特别是它们是不可复制的。请注意，虽然被引用的对象可以复制或不可复制，但引用本身永远不可复制。

另一种方法是存储可复制的*指针*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T01:57:52.437

标准容器要求“T 是可复制的（严格来说，CopyConstructible）”或“T 是可移动的（严格来说，MoveConstructible）”。如果需要引用元素，可以使用 std::queue<std::reference_wrapper<T>>。

```
#include <cassert>
#include <queue>
#include <functional> // std::reference_wrapper, std::ref

int main()
{
    int a = 1;
    int b = 2;
    int c = 3;

    std::queue<std::reference_wrapper<int>> que;

    que.push(std::ref(a));
    que.push(std::ref(b));
    que.push(std::ref(c));

    while (!que.empty()) {
        que.front() += 1;
        que.pop();
    }

    assert(a == 2);
    assert(b == 3);
    assert(c == 4);
} 
```

# javascript - 使用递归读取对象的属性和属性？

> ID：10455552
> 
> 赞同：0
> 
> 时间：2012-05-04T20:14:50.567
> 
> 标签：javascript, jquery, properties, recursion

我想知道我是否可以使用递归函数来读取对象的所有属性和属性，包括嵌套属性等。例如，如果我有一个对象：

```
 var mObj = {};
  mObj.countries = [];
  mObj.country = {};
  mObj.country.states = [];
  mObj.country.state = {};
  mObj.country.state = {}; 
```

我相信你明白了。如果它只是一个简单的对象，那么我可以使用“for in”循环，也许还有嵌套的“for in”循环，一个对象有许多嵌套级别，然后使用嵌套的“for in”循环会变得有些混乱。我认为使用递归会很棒。对此的任何帮助见解将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:46:59.743

这是一个快速示例，可以在您最终遇到任何问题时执行此操作。

```
var level = '';
var readProperties = function(val) {
    if (Object.prototype.toString.call(val) === '[object Object]') {
        for (var propertyName in val) {
            if (val.hasOwnProperty(propertyName)) {
                console.log(level + propertyName + ':');
                level += '  ';
                readProperties(val[propertyName]);
            }
        }
    }
    else {
        console.log(level + val);
        level = level.substring(0, level.length - 2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T08:06:58.737

与 OP 有同样的问题，但无法让公认的解决方案正常工作。这就是我最终做的事情：

```
function foreachAttribute(object, handleAttributeName, handleAttributeValue) {

    var attributeNames = [];
    function recursion(object) {

        for ( var attribute in object) {

            if (typeof object[attribute] == 'object') {

                attributeNames.push(attribute);
                recursion(object[attribute]);
                attributeNames = attributeNames.slice(0,
                        attributeNames.length - 1);

            } else {

                handleAttributeName(attributeNames.join(".") + "."
                        + attribute);
                handleAttributeValue(object[attribute]);

            }

        }

    }

    recursion(object);

}

var attributeName = "";
var handleAttributeName = function(name) {
    attributeName = name;
};

var handleAttributeValue = function(value) {
    console.log(attributeName + "=" + value);
};

var data = {
    var1 : {
        asdf : 123
    },
    var2 : 321
};

foreachAttribute(data, handleAttributeName, handleAttributeValue); 
```

# c++ - C ++中编译时的静态字符数组大小

> ID：10455553
> 
> 赞同：1
> 
> 时间：2012-05-04T20:14:52.840
> 
> 标签：c++

我知道这个问题被问了很多次，我不是在问怎么做，因为我是在编译时这样做的。我的问题是它是如何工作的，因为那是我不明白的。

当将 a 传递`char[]`给函数时，它会丢失其信息并变成`char*`，因此我们无法在编译时使用模板获取字符数组的大小，所以我尝试并传递了字符串本身并且它起作用了：

```
template <int N> inline int arr_len(const char (&)[N]) { return N - 1; }

#define STR "this is an example!"

const char *str_ptr = STR;

int main()
{
  int array_size = arr_len(STR);
} 
```

我用 VC++ 2008、Intel C++ 12 和 GCC 4.7 测试了这段代码，它可以工作。

通过传递字符串本身，编译器将其视为`const char[]`-至少我认为是这样-并且他能够获得字符串大小，这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:20:29.903

字符串字面量类型是数组，而不是指针。因此，当您将它直接传递给通过引用获取数组的函数时，它不会衰减为指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:19:58.833

那是因为 STR 是在编译器启动之前被替换的宏。

它将它替换为“XXXX”，这是一个字符串文字（不是数组）。

要使其正常工作，请执行以下操作：

```
char const  str_ptr[] = "XXX YYY";
              //  ^^^^    Compiler works out size

int main()
{
    int array_size = arr_len(str_ptr);
                         //  ^^^^^^^ pass in an object that has a type.
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:28:07.503

在 C++ 中，当函数的参数类型被暂时标识为数组时，参数类型被“调整”为指向数组元素类型的指针。

因此，当您编写时：`void foo(char c[])`编译器有效地将其重写为`void foo(char *c)`. 然后当你传递一个数组时：

```
char x[10];
foo(x); 
```

C++ 发现`void foo(char *c)`并看到它可以将您的`char []`参数转换为 a`char *`并调用该函数，而这正是它所做的。

但是，这种对函数类型的调整只有在写入的参数类型是数组时才会发生。对数组的引用不是数组，因此在声明函数时不会执行等效调整`void bar(char (&c)[10])`。

回答您的问题所需的第二点是字符串文字的类型是 const char 数组。当您直接在函数调用中编写字符串文字时，使用 C++ 的函数会`const char (&)[N]`看到它可以传递对数组的引用，而不是执行“数组 -> 指向第一个元素的指针”转换。这就是它的作用，模板类型推导为字符串的大小找到正确的数字。

# javascript - Javascript中“for”循环的奇怪用法，请解释

> ID：10455566
> 
> 赞同：3
> 
> 时间：2012-05-04T20:15:59.347
> 
> 标签：javascript, for-loop, cycle

我发现这个奇怪的 JavaScript 我无法理解。for 循环有一个奇怪的语法（许多参数），你能解释一下它是如何工作的吗？谢谢

```
decode: function(s){
        for(var a, b, i = -1, l = (s = s.split("")).length, o = String.fromCharCode, c = "charCodeAt"; ++i < l;
            ((a = s[i][c](0)) & 0x80) &&
            (s[i] = (a & 0xfc) == 0xc0 && ((b = s[i + 1][c](0)) & 0xc0) == 0x80 ?
            o(((a & 0x03) << 6) + (b & 0x3f)) : o(128), s[++i] = "")
        );
        return s.join("");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:17:47.053

这是一个普通的循环，但在第一部分`for`有一个很长的语句。`var`

就像

```
var a, b, c; 
```

此外，for 循环中的迭代器语句包含很多操作，而不是循环实际上有一个主体。

这个函数要么是由一个糟糕的程序员编写的，不考虑可读代码，要么是被故意缩小和混淆的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T21:22:23.673

有趣的功能，显然是对一组字符进行转码，有点深奥，只适用于 ASCII 码，但这里是细分：

```
 for (var i = 0; i < s.length; i++) {
        var a = s.charCodeAt(i);

        if (a & 0x80) { // (a >= 128) if extended ascii

            var b = s.charCodeAt(i + 1);

            var specialA = (a & 0xfc) === 0xc0; // a IS [À, Á, Â or Ã] essentially [192, 193, 194, 195]
            var specialB = (b & 0xc0) === 0x80; // b >= 128 & b <= 191 eg. b is not a special Latin Ascii Letter

            if (specialA && specialB) {

                var txA = (a & 0x03) << 6; // [0, 64, 128, 192]
                var txB = b & 0x3f; // 0 - 63

                s[i] = String.fromCharCode(txA + txB);

            } else {
                s[i] = String.fromCharCode(128);
                s[++i] = "";
            }
        }
    } 
```

希望这会有所帮助，无论哪种方式我都觉得解码很有趣，提醒阅读原始汇编程序，lol -ck

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:26:16.260

for 循环的不同部分都在那里，用分号 ( `;`) 分隔。

var 部分：

```
var a, b, i = -1, l = (s = s.split("")).length, o = String.fromCharCode, c = "charCodeAt"; 
```

检查部分：

```
++i < l; 
```

更新部分：

```
((a = s[i][c](0)) & 0x80) &&
        (s[i] = (a & 0xfc) == 0xc0 && ((b = s[i + 1][c](0)) & 0xc0) == 0x80 ?
        o(((a & 0x03) << 6) + (b & 0x3f)) : o(128), s[++i] = "") 
```

`for()`语句后`;`立即执行，表示循环没有主体，但 var-、check- 和 update 部分中的所有语句仍将执行，直到 check 不再是`true`。

看起来有人不*希望*他们的代码可读。还是你在哪里找到的？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T21:20:45.677

**将循环分解为更易读的：**

*   重新排列的循环参数
*   改变`(...)&&(...)`了`if(...){(...)}`
*   改为`l`_`len`
*   搬到`s = s.split(...)`外面`len`

.

```
var a, b, s = s.split(""), o = String.fromCharCode, c = "charCodeAt";

for(var i = -1, len = s.length; ++i < len;){
    if((a = s[i][c](0)) & 0x80){
        (s[i] = (a & 0xfc) == 0xc0 && ((b = s[i + 1][c](0)) & 0xc0) == 0x80 ? o(((a & 0x03) << 6) + (b & 0x3f)) : o(128), s[++i] = "");
    }
} 
```

* * *

*   改变了`i`初始值以及它如何/在哪里增加
*   搬到`a = s[i][c](0)`外面

.

```
var a, b, s = s.split(""), o = String.fromCharCode, c = "charCodeAt";

for(var i = 0, len = s.length; i < len; i++){
    a = s[i][c](0);

    if(a & 0x80){
        s[i] = (a & 0xfc);
        (s[i] == 0xc0 && ((b = s[i + 1][c](0)) & 0xc0) == 0x80 ? o(((a & 0x03) << 6) + (b & 0x3f)) : o(128), s[++i] = "");
    }
} 
```

* * *

*   创建`tmp`以使内容更易于阅读
*   三元运算结果存储在`tmp`
*   `(s[i] == 0xc0 && tmp, s[++i] = "");`用一个 分开`if(...){s[++i] = "";}`
*   替换了您的示例中的新循环

.

```
decode: function(s){
    var tmp, a, b, s = s.split(""), o = String.fromCharCode, c = "charCodeAt";

    for(var i = 0, len = s.length; i < len; i++){
        a = s[i][c](0);

        if(a & 0x80){
            s[i] = (a & 0xfc);

            if(((b = s[i + 1][c](0)) & 0xc0) == 0x80){
                tmp = o(((a & 0x03) << 6) + (b & 0x3f));
            }else{
                tmp = o(128);
            }

            if(s[i] == 0xc0 && tmp){
                s[++i] = "";
            }
        }
    }

    return s.join("");
} 
```

**最终结果**/\

# javascript - 在 MVC3 中使用 Javascript 垂直滚动 div

> ID：10455568
> 
> 赞同：2
> 
> 时间：2012-05-04T20:16:08.360
> 
> 标签：javascript, asp.net, asp.net-mvc-3, scroll

我是一名应用程序开发实习生。我正在使用 ASP.NET MVC3 制作一个应用程序，该应用程序在框中显示公司正在使用它的各种项目。这些框是使用 foreach 循环在表中创建的。

```
 <div class= "row">
       @foreach (var item in Model)
       {
       @Html.Action("Client", new { controller = "Dashboard", Client = item })      
       } 
    </div> 
```

如果有溢出，我希望这些框自动向下滚动。这似乎是我想使用的功能：

```
 function pageScroll() {
       window.scrollBy(0,50); // horizontal and vertical scroll increments
       scrolldelay = setTimeout('pageScroll()',100); // scrolls every 100 milliseconds
    } 
```

如何将此函数应用于在 foreach 循环中创建的框？

编辑：使用 Timothy-Strimple 的建议，我使用了一个名为 scrollTo() 的 Jquery 插件来创建它：

```
for (d = 0; d < 52; d) {

   $(".dashboard-well").scrollTo('100%', 10000).delay(2000);
   $(".dashboard-well").scrollTo('0%', 10000).delay(2000);
   d++;
 } 
```

现在，我正在查看的 div 溢出时，将向下滚动，然后向后滚动 5 倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:46:53.853

我不太确定我理解你想要做什么。如果你想设置一个 div 溢出：滚动，然后滚动到它的底部，这对 jQuery 来说非常简单。我在我的示例聊天应用程序上做了类似的事情，每次有新消息时页面都会滚动到底部。它看起来像这样：

`$('#messages').scrollTop($('#messages')[0].scrollHeight);`

所以你可以做的是在你创建了所有行之后，像我在上面所做的那样在元素上设置 scrollTop ，并将其设置为 scrollHeight ，这会将滚动条放在该部分的底部。

如果这不是您要问的，请更新您的问题或发表评论，以便我更新我的答案。

# css - 垂直对齐 2 个并排自动宽度 DIV 的内容

> ID：10455569
> 
> 赞同：2
> 
> 时间：2012-05-04T20:16:09.500
> 
> 标签：css, html

我尝试了 html 元素和 CSS 的各种组合以使其无法正常工作。我如何完成以下任务？

我有两个并排的 DIV，我想根据其内容的宽度自动调整它们的大小（为此使用了“显示：内联块”）。然后，我希望每个 DIV 的内容与 DIV 的顶部对齐（默认情况下，内容是底部对齐的）。内容是一些标签（跨度）和文本（数据库数据）。此外，这两个 DIV 应位于菜单页面左侧另一个 DIV 的右侧。

```
MENU      AUTO            ANOTHER
FIXED     WIDTH           COLUMN (DIV)
WIDTH     DIV             ALSO
DIV       ACCORDING       AUTO
          TO              SIZED
          CONTENTS        TOP-ALIGNED
          TOP-ALIGNED     CONTENTS
          CONTENTS        SOME
          SOME            PADDING
          PADDING TO      TO MY LEFT
          MY LEFT AND     AND RIGHT
          RIGHT 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:22:50.010

你必须到`vertical-align:top`父（列）div，以及`span`里面的s。 `display:inline-block`使宽度和高度变为自动（如内联元素），并且正如您所说，默认垂直对齐是基线。

[http://jsfiddle.net/EjdUf/1/](http://jsfiddle.net/EjdUf/1/)

# c++ - 在 cmd 行中手动获取输出而不是输出重定向

> ID：10455575
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:16:42.283
> 
> 标签：c++

我有一个 C++ 程序，它的主函数原型如下：

`int main(int argc, char * argv[])`

代码不是我写的，但这是一个可用的 C 文件[here](http://tartarus.org/~martin/PorterStemmer/c.txt)。当我编译这段代码，并通过命令行运行它：

`someexe in.txt > out.txt`
这给了我一个输出 out.txt，它是通过对 in.txt 中的一些输入进行操作而在同一目录中生成的。

`someexe in.txt out.txt`
这给了我命令行本身的输出。（不使用`>`运算符）

但是，`>`我没有传递命令行参数并且不使用输出重定向运算符，而是尝试从另一个函数调用主函数并自己传递参数。如果我传递 {fileDirName, in.txt} 的数组`char*`，我不确定如何生成 out.txt（因为我认为`>`输出重定向是命令行中可用的操作系统级函数）。

任何建议将不胜感激

链接中的程序是现成的复制粘贴，可以试一试（main函数写在上面程序的最后）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:27:11.030

您不能从另一个程序的源内部调用另一个 main() - main() 是特殊的。

如果您想将此源代码作为库重用，则需要将 main() 重命名为其他名称。

但是，如果它以正常的 Unix 方式处理来自管道或文件（例如`myprog < input.txt`or `myprog input.txt`）的输入，那么透明地处理就有点棘手了。

最好的方法是将编译后的程序作为一个单独的进程从新程序中调用，并传递正确的命令行参数 - 请参阅[exec()](http://en.wikipedia.org/wiki/Exec_%28operating_system%29)调用系列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:35:58.193

假设目标是模仿`> out.txt`shell 的输出重定向功能 ()，您可以执行以下操作：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <assert.h>
#include <unistd.h>
#include <iostream>

int main() {
  int fd = open("out.txt", O_WRONLY|O_CREAT|O_TRUNC, 0660);
  assert(fd >= 0);
  const int ret = dup2(fd, 1);  
  assert(ret >= 0);
  std::cout << "Hello redirected world!" << std::endl;
  close(fd);
} 
```

您也可以对 stdin 执行类似操作，以模仿输入重定向 ( `< in.txt`)。这些也将在调用中保留`exec()`。

当然，如果您有可用的源，修改程序以写入您想要的位置会更简单。

请注意`dup2()`，我们刚刚打开的那个“交换”标准输出 fd 是不可移植的。IIRC `open()`（相对于`fopen()`）也是 UNIX 特定的）

# c - 将结构指针传递给函数时出现错误“ISO C 禁止前向参数解密”？

> ID：10455576
> 
> 赞同：2
> 
> 时间：2012-05-04T20:16:43.187
> 
> 标签：c

我有以下代码，结构声明在main之前，函数声明也是

```
struct stuff{
        int sale_per_day[Kdays];
        int max_sale;
        };

void set_max(); 
```

那部分是最后...

```
void set_max(struct stuff *point; int n = 0)
{
return;
} 
```

现在我到底做错了什么？我明白了

> “ISO C 禁止前向参数声明”

错误。我正在根据课程要求使用 GCC C89。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T20:19:06.477

它看起来好像只需要一个逗号而不是分号：

```
void set_max(struct stuff *point, int n = 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T20:26:34.803

您的代码段存在一些问题：

```
void set_max(struct stuff *point; int n = 0) 
```

1）您的原型与定义不符。C 通常会抱怨
2）您的定义包含一个分号，它应该是一个逗号
3）我认为`int n = 0`参数列表中也不允许。

请尝试以下方法。

```
struct stuff {
    int sale_per_day[Kdays];
    int max_sale;
};

void set_max(struct stuff *point); 
```

和

```
void set_max(struct stuff *point)
{
    int n = 0;
    return;
} 
```

# sql - SQL 从表中选择 - 仅包括特定文件组中的数据

> ID：10455579
> 
> 赞同：5
> 
> 时间：2012-05-04T20:17:02.997
> 
> 标签：sql, sql-server, sql-server-2008, tsql, database-partitioning

我关注了这篇文章： [http](http://www.mssqltips.com/sqlservertip/1796/creating-a-table-with-horizontal-partitioning-in-sql-server/) ://www.mssqltips.com/sqlservertip/1796/creating-a-table-with-horizo ​​ntal-partitioning-in-sql-server/ 本质上执行以下操作：

1.  创建一个包含三个文件组的数据库，分别称为 A、B 和 C
2.  创建一个分区方案，映射到三个文件组
3.  使用分区方案创建表 - SalesArchival
4.  在表中插入几行，在文件组中拆分。

我想执行这样的查询（请原谅我的伪代码）

```
select * from SalesArchival
where data in filegroup('A') 
```

有没有办法做到这一点，或者如果没有，我该怎么做。

我想要完成的是每天运行一个批处理，将超过 90 天的数据移动到不同的文件组，并且只对“当前”文件组执行我的前端查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:05:15.363

要获取特定的文件组，您总是希望在谓词中利用分区消除来确保读取最少的记录。如果您要从分区中获得任何好处，这一点非常重要。

对于存档，我认为您正在寻找如何拆分和合并范围。您应该始终保持第一个和最后一个分区为空，但这应该让您了解如何使用分区进行归档。仅供参考，将数据从一个文件组移动到另一个文件组非常耗费资源。此外，如果您使用范围正确的 pf，结果会略有不同。由于您正在进行分区，因此希望您已经阅读了最佳实践。

不要在生产中运行。这只是一个可供学习的例子。

此示例假设您定义了 4 个文件组（FG1、FG2、FG3 和 [PRIMARY]）。

```
IF EXISTS(SELECT NULL FROM sys.tables WHERE name = 'PartitionTest')
    DROP TABLE PartitionTest;
IF EXISTS(SELECT NULL FROM sys.partition_schemes WHERE name = 'PS')
    DROP PARTITION SCHEME PS;
IF EXISTS(SELECT NULL FROM sys.partition_functions WHERE name = 'PF')
    DROP PARTITION FUNCTION PF;
CREATE PARTITION FUNCTION PF (datetime) AS RANGE LEFT FOR VALUES ('2012-02-05', '2012-05-10','2013-01-01');
CREATE PARTITION SCHEME PS AS PARTITION PF TO (FG1,FG2,FG3,[PRIMARY]);
CREATE TABLE PartitionTest( Id int identity(1,1), DT datetime) ON PS(DT);

INSERT PartitionTest (DT)
    SELECT '2012-02-05' --FG1
    UNION ALL
    SELECT '2012-02-06' --FG2(This is the one 90 days old to archive into FG1)
    UNION ALL
    SELECT '2012-02-07' --FG2
    UNION ALL
    SELECT '2012-05-05' --FG2 (This represents a record entered recently) 
```

检查与每条记录关联的文件组：

```
SELECT O.name TableName, fg.name FileGroup, ps.name PartitionScheme,pf.name PartitionFunction, ISNULL(prv.value,'Undefined') RangeValue,p.rows
FROM sys.objects O
INNER JOIN sys.partitions p on P.object_id = O.object_id
INNER JOIN sys.indexes i on p.object_id = i.object_id and p.index_id = i.index_id
INNER JOIN sys.data_spaces ds on i.data_space_id = ds.data_space_id
INNER JOIN sys.partition_schemes ps on ds.data_space_id = ps.data_space_id
INNER JOIN sys.partition_functions pf on ps.function_id = pf.function_id
LEFT OUTER JOIN sys.partition_range_values prv on prv.function_id = ps.function_id and p.partition_number = prv.boundary_id
INNER JOIN sys.allocation_units au on p.hobt_id = au.container_id
INNER JOIN sys.filegroups fg ON au.data_space_id = fg.data_space_id
WHERE o.name = 'PartitionTest' AND i.type IN (0,1) --Remove nonclustereds. 0 for heap, 1 for BTree
ORDER BY O.name, fg.name, prv.value
```

这证明 2012-02-05 在 FG1 中，而其余的在 FG2 中。

为了存档，您的第一反应是移动数据。但是，在分区时，您实际上必须滑动分区函数范围值。

现在让我们将 2012-02-06（在您的情况下为 90 天或更早）移动到 FG1：

```
--Move 2012-02-06 from FG2 to FG1
ALTER PARTITION SCHEME PS NEXT USED FG1;
ALTER PARTITION FUNCTION PF() SPLIT RANGE ('2012-02-06');
```

重新运行文件组查询以验证 2012-02-06 是否已移至 FG1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-26T22:41:58.597

[$PARTITION (Transact-SQL)](https://msdn.microsoft.com/en-us/library/ms188071.aspx)应该有你想做的事情。

运行以下命令以了解分区的大小和 ID：

```
USE AdventureWorks2012;
GO
SELECT $PARTITION.TransactionRangePF1(TransactionDate) AS Partition, 
COUNT(*) AS [COUNT] FROM Production.TransactionHistory 
GROUP BY $PARTITION.TransactionRangePF1(TransactionDate)
ORDER BY Partition ;
GO 
```

以下内容应为您提供给定分区 id 的数据：

```
SELECT * FROM Production.TransactionHistory
WHERE $PARTITION.TransactionRangePF1(TransactionDate) = 5 ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:33:59.817

不可以。您需要使用在分区函数中使用的确切条件。这可能是

```
where keyCol between 3 and 7 
```

# qt - qml/qt：如何从 QDeclarativeComponent 获取 QMetaObject

> ID：10455582
> 
> 赞同：1
> 
> 时间：2012-05-04T20:17:05.090
> 
> 标签：qt, qml

我需要接收将由C++ 代码中`QMetaObject`给定的对象创建的对象。`QDeclarativeComponent`

暂时我正在通过使用一个临时对象来解决这个问题：

```
const QMetaObject* metaObject(QDeclarativeComponent *component)
{
    QObject* object = component->create();
    const QMetaObject* result = object->metaObject();
    delete object;
    return result;
} 
```

但是创建临时对象可能是昂贵的操作，我想避免这种情况。

有没有办法在`QMetaObject`不`QDeclarativeComponent`创建临时对象的情况下接收？

正在使用 Qt 4.8。

提前致谢。

# firefox-addon - 在 Firefox 扩展中访问 DOM API

> ID：10455583
> 
> 赞同：0
> 
> 时间：2012-05-04T20:17:10.003
> 
> 标签：firefox-addon

我正在编写一个 Firefox 扩展，它正在做两件事（对于这个问题的上下文）：

1.  注册某些 DOM 事件，即`DOMContentLoaded`和`DOMFrameContentLoaded`.
2.  在事件的回调中，访问 DOM API 并执行某些操作。

扩展获取第一个事件（`DOMContentLoaded`或`DOMFrameContentLoaded`），回调函数调用一些 DOM API。我观察到，在调用从 DOM API 调用返回到我的扩展之前，另一个事件触发并且我的回调函数被调用（我无法缩小哪个特定的 DOM API，因为我的扩展调用了一堆 DOM蜜蜂）。

这甚至可能吗？顺便说一句，我在 Windows 上使用 Firefox 12。我正在打印`threadManager.isMainThread`, 并且在这两种情况下，都在主线程上调用事件回调。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:25:28.307

JavaScript 通常是单线程的。然而，这并不意味着函数不能被重新输入（最明显的例子是调用自身的函数）。因此，当另一个事件处理程序正在执行时，仍然可以调用一个事件处理程序。AFAICT 这可能在以下情况下发生：

*   事件处理程序导致（直接或间接）另一个事件被生成和分派。特别是，DOM 操作会导致突变事件——这些事件的处理是同步发生的。例如，调用`element.setAttribute()`将创建`DOMAttrModified`事件，并且该事件将在`element.setAttribute()`返回之前进行处理，包括运行事件处理程序。
*   事件处理程序“暂停”。如果`alert()`打开模式对话框（如 ），通常会发生这种情况 - 当前事件处理程序将等待此对话框关闭，而其他事件处理程序仍然可以触发。不太常见的情况是[`yield`在 generators 中使用关键字](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Generators)。
*   事件处理程序调用[nsIThread.processNextEvent()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIThread#processNextEvent%28%29)。此调用可能会执行与队列中的下一个事件关联的事件处理程序。从技术上讲，这一点与之前的相同 -`alert()`将在`nsIThread.processNextEvent()`内部调用以确保在调用者被阻塞时处理事件。

# php - PHPMailer 在发送了大约 175 封电子邮件后随机停止发送邮件

> ID：10455594
> 
> 赞同：0
> 
> 时间：2012-05-04T20:18:18.457
> 
> 标签：php, email, phpmailer

我正在使用 PHPMailer 从数据库中的电子邮件列表中发送时事通讯。该脚本查询数据库，使用 while 循环将数据放入数组中，并在 while 循环中创建并发送电子邮件。

它工作正常，直到发送了 150 封左右的电子邮件，然后它随机停止。例如，电子邮件爆炸 #1 在发送 161 封电子邮件后失败，电子邮件爆炸 #2 在发送 165 封电子邮件后失败，电子邮件爆炸 #3 在发送 182 封电子邮件后失败。

我一直在研究和研究，找不到原因。现在我将每封电子邮件都发送到 To: 消息中，而不是使用 BCC: 路由发送它们。可能是我服务器上的设置吗？如果是这样，我应该寻找什么？

我还内置了一些调试功能。最后的 sql 脚本将电子邮件以及发送的具体时间添加到数据库中，这样我就可以准确地知道发送了多少封电子邮件，哪个电子邮件停止了该过程，以及需要多长时间。

它停止的电子邮件没有显示任何模式（意味着它们是不同的电子邮件提供商），发送这么多只需要大约 10 到 12 分钟。我在服务器上的脚本超时时间比这高得多，所以这不是原因。

我的代码如下：

```
$mail = new PHPMailer();
$mail->IsSMTP();                                      // set mailer to use SMTP
$mail->Host = "*server ip here*";  // specify main and backup server
$mail->SMTPKeepAlive = true;                  // SMTP connection will not close after each email sent
$mail->SMTPAuth = false;     // turn on SMTP authentication
$mail->Username = "*user*";  // SMTP username
$mail->Password = "*pass*"; // SMTP password

while($select2 = sqlsrv_fetch_array($select)) {
$email = $select2['email'];
$unid    = $select2['id'];
$unemail = $select2['email'];
$to = $email;
$from = "newsletter@site.com";
$new_date = date("n/j/y - g:i:s a");
$headers = "From: $from\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$message2 = "<html><body>";
$message2 .= $message;
$message2 .= "</body></html>";

$mail->From = "newsletter@site.com";
$mail->FromName = "Newsletter";
$mail->AddAddress($to);
$mail->AddReplyTo("newsletter@site.com", "Website.com");

$mail->IsHTML(true);                                  // set email format to HTML

$mail->Subject = $subject;
$mail->Body    = $message2;

if(!$mail->Send()) {
    die("mail() Failed to send email to $to.");
    echo "<br><br>Mailer Error: " . $mail->ErrorInfo;
    exit;
} else {
    $make_sent_query = "INSERT INTO emailssent (email_signup_id, email, datesent) VALUES (?, ?, ?)";
    $params_sent = array($unid, $to, $new_date);
    $add_to_sent = sqlsrv_query($conn, $make_sent_query, $params_sent);
    if($add_to_sent) {
        echo "Message sent for email $to<br>";
    } else {
        die("Mail sent, but failed to insert into Sent Emails database.");
    }
}

$mail->ClearAddresses();  //clear addresses for next loop
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:28:18.243

这可能是由您的本地邮件服务器引起的吗？如果您在短时间内发送 150 封电子邮件，则可能会假设它是垃圾邮件，一旦达到一定数量就停止。

您可以在发送每封邮件后尝试使用 sleep() 减慢速度吗？如果这是原因的话，一两秒钟就足够了……

您是否有理由要避免使用密件抄送？您可以将电子邮件发送给多个收件人，并将您发送的电子邮件数量减少到您现在发送的电子邮件数量的一小部分，但其代价是无法个性化每封电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:28:57.920

我认为这是超时问题。而 crontab 可以解决你的问题[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)。您可以编写脚本来发送您的电子邮件，并将您的 crontab 设置为每分钟运行一次此脚本。那么你从来没有超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:12:31.237

潜在原因之一可能是 PHP 使脚本超时。每个脚本都会在有限的时间内运行。如果您的脚本花费的时间比这更多，那么 PHP 将简单地终止该脚本。通常这会导致错误日志中报告错误。检查您的 apache 错误日志消息 - 它们可能包含提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-22T06:23:31.717

它是由 XAMPP 中的 max_execution_time 引起的，
因此，当脚本运行超过 max_execution_time 时，发送电子邮件的脚本将停止。默认的 max_execution_time 是 120 秒。发送许多电子邮件需要很多时间。

您可以通过添加此脚本来更改它

```
ini_set('max_execution_time', 0); 
```

将它放在您的电子邮件爆破脚本部分之前，它会告诉 php 将其设置为无限制的 max_execution_time。

# android - 单击时如何使图像抖动/摆动？

> ID：10455596
> 
> 赞同：10
> 
> 时间：2012-05-04T20:18:34.527
> 
> 标签：android, android-image

我有一个图像按钮，当它被触摸时我想摇晃/摆动。我希望它以类似于长时间按下 iPhone 应用程序图标的方式摆动。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-27T08:20:34.297

尝试使用这个：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <rotate
        android:duration="70"
        android:fromDegrees="-5"
        android:pivotX="50%"
        android:pivotY="50%"
        android:repeatCount="5"
        android:repeatMode="reverse"
        android:interpolator="@android:anim/linear_interpolator"
        android:toDegrees="5" />
    <translate
        android:fromXDelta="-10"
        android:toXDelta="10"
        android:repeatCount="5"
        android:repeatMode="reverse"
        android:interpolator="@android:anim/linear_interpolator"
        android:duration="70" />
</set> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-10T14:16:21.317

试试这个在 imageview 点击监听器上晃动图像。

```
 public void onClick(View v)
  {
    Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);
    findViewById(R.id.pw).startAnimation(shake);
   } 
```

看到这个片段取自 android API Demo [here](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/Animation1.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-30T12:58:52.547

我喜欢这个

```
<?xml version="1.0" encoding="utf-8"?>
<set
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fillAfter="true">

    <translate
        android:fromXDelta="-20"
        android:toXDelta="19"
        android:duration="20" />
    <translate
        android:startOffset="20"
        android:fromXDelta="19"
        android:toXDelta="-18"
        android:duration="20" />
    <translate
        android:startOffset="40"
        android:fromXDelta="-18"
        android:toXDelta="17"
        android:duration="20" />
    <translate
        android:startOffset="60"
        android:fromXDelta="17"
        android:toXDelta="-16"
        android:duration="20" />
    <translate
        android:startOffset="80"
        android:fromXDelta="-16"
        android:toXDelta="14"
        android:duration="20" />
    <translate
        android:startOffset="100"
        android:fromXDelta="14"
        android:toXDelta="-12"
        android:duration="20" />
    <translate
        android:startOffset="120"
        android:fromXDelta="-12"
        android:toXDelta="10"
        android:duration="20" />
    <translate
        android:startOffset="140"
        android:fromXDelta="10"
        android:toXDelta="-7"
        android:duration="20" />
    <translate
        android:startOffset="160"
        android:fromXDelta="-7"
        android:toXDelta="4"
        android:duration="20" />
    <translate
        android:startOffset="200"
        android:fromXDelta="4"
        android:toXDelta="0"
        android:duration="20" />
    <translate
        android:startOffset="220"
        android:fromXDelta="0"
        android:toXDelta="0"
        android:duration="20" />
</set> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T12:33:37.350

上一个不正确试试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="100"
android:fromDegrees="-5"
android:pivotX="50%"
android:pivotY="50%"
android:repeatCount="infinite"
android:repeatMode="reverse"
android:toDegrees="5" /> 
```

# coldfusion - 从 CFC 内部显示“未找到记录”警报

> ID：10455598
> 
> 赞同：0
> 
> 时间：2012-05-04T20:18:55.273
> 
> 标签：coldfusion, coldfusion-9, cfc, cfgrid

在带有 IE8 的 CF9 中，我有一个`cfgrid`绑定到文本（搜索）字段以及 cfc 函数。文本字段值用作 cfc 函数中的查询过滤器。如果找到任何结果，则会填充网格。否则，我想向用户发送警报，例如*“未找到记录”*

我找不到任何能够做到这一点的东西，因为 javascript 和 CF 标记似乎都在 cfc 中被简单地忽略了，即

```
<cfif myQry.recordCount eq 0> No records found <cfabort></cfif> 
```

或者

```
<cfif myQry.recordCount eq 0> 
    <script> 
        alert("No records found"); 
    </script>
</cfif> 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:03:07.967

事实证明它比我想象的要复杂。我已经尝试了一些我发现的东西，比如网格的`ajaxOnLoad`声明或`onLoad`事件，但它们没有按预期工作。最后我用一个js函数解决了它，比如：

```
 getTotalRows = function() {
    var isGrid = ColdFusion.Grid.getGridObject('myGrid');
    var isData = isGrid.getStore();
    isData.addListener("load", function() {
  if(isData.totalLength == 0)
    {
    alert("No records found");
    return false;
        }
    });
  }
  ColdFusion.Event.registerOnLoad(getTotalRows,null,false,true); 
```

# asp.net - 使用 vbscript 调用存储过程

> ID：10455601
> 
> 赞同：0
> 
> 时间：2012-05-04T20:19:20.457
> 
> 标签：asp.net, stored-procedures, asp-classic, vbscript

我正在查看另一个程序员在他调用存储过程的地方编写的一些代码。在调用它之前，他创建了一个数组，其中包含存储过程查询表所需的参数。他像这样创建数组：

```
param = Array("@Name", 3, 8, "Tom", _
            "@Age", 3, 8, 28, _
            "@City", 100, 200, "Toronto) 
```

存储过程使用@Name、@Age 和@City 来查询表。

我的问题是，中间的数字是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:41:14.670

看起来像：

@Name = 参数名称

3 = adInteger

8 = 长度

“汤姆”=价值

@Age= 参数名称

3 = adInteger

8 = 长度

28 = 价值

@City= 参数名称

100 = 长度

200 = adVarChar

“多伦多=价值

这是其他 ADO 数据类型的列表 -

[http://www.w3schools.com/ado/ado_datatypes.asp](http://www.w3schools.com/ado/ado_datatypes.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:42:53.833

如果没有注释，就不可能确定或不单步执行代码。

否则，如果这是 asp.net，您可以做的最好的事情是查看`SqlParameter`该类并查看它具有的属性：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter。 aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)

我认为你有两个强有力的候选者`ParameterName`and `Value`，但是这两个数值可能是一些不同的东西。`3`恰好是数值`SqlDbType.Char`，而`100`没有对应`SqlDbType`的，该类型的默认值为`NVarChar.`

下一个数字可能是精度。查看数据库表，看看您是否可以将这些值与字段匹配。例如，是城市`VarChar(200)`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T14:47:40.027

My guess is that he is using an array of params, just something like this: [https://stackoverflow.com/a/10142254/2385](https://stackoverflow.com/a/10142254/2385), where I use an array of params to pass to a function who add the params to the ADO command.

# android - 处理传入消息我的 broadCastReceiver 不起作用

> ID：10455603
> 
> 赞同：1
> 
> 时间：2012-05-04T20:19:24.933
> 
> 标签：android, broadcastreceiver

大家好，我有非常重要的问题，请帮助我。我正在尝试使用广播接收器处理传入的消息。但是，它不起作用。我发送下面的代码请帮助我。

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.commonsware.andorid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET"/>
      <uses-permission android:name="android.permission.READ_CONTACTS" />

    <uses-permission  android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <uses-permission android:name="android.permission.BROADCAST_SMS"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

    <application
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
         <receiver android:name=".SMSBroadcastReceiver">
           <intent-filter android:priority="999">
                <action android:name="android.provider.Telephony.SMS_RECEIVED"></action>
            </intent-filter>
        </receiver>
        <activity
            android:name=".NewPage"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".NewMessage" />
        <activity android:name=".SignFrame"></activity>
        <activity android:name=".MyMenu"></activity>
        <activity android:name=".Detail"></activity>
        <activity android:name=".Browser"></activity>
        <activity android:name=".Login"></activity>
        <activity android:name=".UserDetail"></activity>
        <activity android:name=".AndroidAppActivity"></activity>
    </application>

</manifest>

My Class:

package com.commonsware.andorid;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.NoSuchProviderException;
import java.security.acl.Owner;
import java.util.StringTokenizer;

import javax.crypto.BadPaddingException;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.PhoneLookup;
import android.telephony.SmsMessage;

import android.util.Log;
import android.widget.Toast;

public class SMSBroadcastReceiver extends BroadcastReceiver {

        private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
        private static final String TAG = "SMSBroadcastReceiver";
        RSA rsa;
        DataBaseHelper db;
        @Override
        public void onReceive(Context context, Intent intent) {
            try {
                rsa=new RSA();
            } catch (InvalidKeyException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (NoSuchAlgorithmException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IllegalBlockSizeException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (NoSuchProviderException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (BadPaddingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (NoSuchPaddingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
             Log.i(TAG, "Intent recieved: " + intent.getAction());

             if (intent.getAction().equals(SMS_RECEIVED)) {
                abortBroadcast();
                    Bundle bundle = intent.getExtras();
                    if (bundle != null) {
                        Object[] pdus = (Object[])bundle.get("pdus");
                        final SmsMessage[] messages = new SmsMessage[pdus.length];
                        for (int i = 0; i < pdus.length; i++) {
                            messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                        }
                        if (messages.length > -1) {
                            abortBroadcast();
                            Toast toast =Toast.makeText(context, messages.toString(), Toast.LENGTH_LONG);
                            String body = messages[0].getMessageBody().toString();
                            String address = messages[0].getOriginatingAddress();
                            System.out.println(address);
                            String decrypted = null;

                            toast.show();
                            Intent i = new Intent(context, Detail.class);
                            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            context.startActivity(i); 
                            try {
                                decrypted=rsa.decrypt(body.getBytes());

                            } catch (InvalidKeyException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (IllegalBlockSizeException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (BadPaddingException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (NoSuchAlgorithmException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (NoSuchPaddingException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                            Log.i(TAG, "Message recieved: " + messages[0].getMessageBody());
                            if(body.startsWith("<publicKey>")){
                                createContact(messages[0]);

                            }
                            else if(body.startsWith("<secureSmsMessaging>")){
                            createMessage(messages[0]);
                            }
                            messages[0].getMessageBody().replaceAll(body, decrypted);

                        }
                    }
                }

                this.abortBroadcast();
           }
} 
```

我试图调试它。但它没有进入我的广播接收器。每当我发送消息时，Android的默认消息服务都会处理它。我做错了什么？

我在等你的回答。谢谢。

塞维尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:50:50.653

我猜你错了@ onReceive 方法。

我创建了一个小应用程序来使用广播接收器收听传入的消息。

## SMSBroadcastReceiver.java

```
public class SMSBroadcastReceiver extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;
    String str = "";
    if(bundle != null){

        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for(int i=0; i<msgs.length;i++){

            msgs[i]= SmsMessage.createFromPdu((byte[])pdus[i]);
            str += "SMS from Phone No: " +msgs[i].getOriginatingAddress();
            str +="\n"+"Message is: ";
            str += msgs[i].getMessageBody().toString();
            str +="\n";
        }

        Log.v("Debug", str);
        Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
    }
}} 
```

* * *

## AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.rdc"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>
<uses-permission android:name="android.permission.READ_SMS"></uses-permission>

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <receiver android:name=".SMSBroadcastReceiver">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
        </intent-filter>
    </receiver>

</application></manifest> 
```

* * *

您可以检查这一点并实施到您的代码中！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T01:03:38.563

我通过使用 https 服务器解决了我的问题。我的问题是在发送用户的公钥和加密消息期间将包含字节数组的字符串转换为字节数组。现在我正在使用 https 服务器来编写我的员工，然后从那里。现在更经济了。我建议每个想要在消息传递中提供加密的人使用https服务器，因为您可能会遇到很多问题。

# ios - 我可以在本地保存仅流式曲目以供离线使用吗？

> ID：10455604
> 
> 赞同：1
> 
> 时间：2012-05-04T20:19:34.957
> 
> 标签：ios, soundcloud

我正在开发一个 iOS 应用程序，它将播放来自 soundcloud 的音乐。我想给用户一个离线模式的选项，这样即使没有可用的连接，他/她也可以播放音乐。

从技术上讲，在本地下载流式 mp3:s 是可行的（我已经实现了），但 Soundcloud 允许我这样做吗？我无意让这些 mp3:s 在应用程序之外访问。

使用下载的副本而不是流式轨道的问题是播放不会被计算在内。有没有办法在不实际播放曲目的情况下注册播放？

我试图通过邮件和推特联系他们，但我还没有得到回复。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:49:13.610

nickf:s 上述评论的简短摘要： **这是明确不允许的**

# java - 对 DAO 进行单元测试

> ID：10455609
> 
> 赞同：4
> 
> 时间：2012-05-04T20:19:45.583
> 
> 标签：java, testing, dao, easymock

我一直在尝试对我的 DAO 进行单元测试，但我还没有找到方法，我感到有点绝望。我有一个看起来像这样的小 DAO：

```
public interface ElectionsDao {
    List<String> getDates();
} 
```

我正在使用 Spring 框架使用`SimpleJdbcTemplate`. 我的实现如下所示：

```
public class ElectionsDaoImpl extends SimpleJdbcDaoSupport implements ElectionsDao {
    public List<String> getDates() {
        List<String> dates = new ArrayList<String>();
        try {
            dates = getSimpleJdbcTemplate().query("SELECT electiondate FROM electiondate", new StringRowMapper());
        } catch (DataAccessException ex){
            throw new RuntimeException(ex);
        }
        return dates;
    }

    protected static final class StringRowMapper implements ParameterizedRowMapper<String> {
        public String mapRow(ResultSet rs, int line) throws SQLException {
            String string = new String(rs.getString("electiondate"));
            return string;
        }
    }
} 
```

我想做的只是`getDates()`使用 EasyMock 的单元测试，但我还没有找到方法。我很混乱。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:32:57.190

看起来好像`getSimpleJdbcTemplate`是单元测试的最大问题。您可以测试的一种方法是扩展被测类并覆盖该`getSimpleJdbcTemplate`方法，例如

```
public class ElectionDaoTest {

    /** Class under test */
    private ElectionsDaoImpl dao;

    @Before
    public void setUp() {
        dao = new ElectionsDaoImpl(){
            SimpleJdbcTemplate getSimpleJdbcTemplate(){
                // Return easy mock version here.
            }
        };
    }

    @Test
    // Do tests
} 
```

EasyMock 可能有更简单的方法，但我对它不是很熟悉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:21:07.927

谢谢您的意见。我决定使用 Spring 进行测试。我的测试代码是这样结束的：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="classpath:beans.xml")
public class DBConectionTest{

    @Resource
    private ElectionsDao electionsDao;

    @Test
    public void testGetDates(){
        List<String> dates = electionsDao.getDates();
        assertNotNull(dates);
    }
} 
```

我正在使用与运行项目时相同的 xml 文件。希望它可以帮助某人。

# function - MatLab - nargout

> ID：10455610
> 
> 赞同：1
> 
> 时间：2012-05-04T20:19:45.820
> 
> 标签：function, matlab

我正在自学 MatLab，我的书中有这个作业，我不太明白。基本上我正在编写一个函数，它将通过使用泰勒级数来计算正弦值。到目前为止，我的代码如下：

```
 function y = sine_series(x,n);
    %SINE_SERIES: computes sin(x) from series expansion
    % x may be entered as a vector to allow for multiple calculations simultaneously
    if n <= 0
        error('Input must be positive')
    end
    j = length(x);
    k = [1:n];
    y = ones(j,1);
    for i = 1:j
    y(i) = sum((-1).^(k-1).*(x(i).^(2*k -1))./(factorial(2*k-1)));
    end 
```

这本书现在要求我包含一个可选输出`err`，它将计算 sin(x) 和 y 之间的差异。这本书暗示我可以用它`nargout`来完成这个，但是书中没有关于如何使用它的例子，阅读 MatLab 关于这个主题的帮助并没有让我更聪明。

如果有人可以帮助我理解这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:33:29.443

`nargout`检查调用函数的输出参数的数量的调用。根据`nargout`您可以将条目分配给输出参数的大小`varargout`。对于您的代码，这看起来像：

```
function [y varargout]= sine_series(x,n);
%SINE_SERIES: computes sin(x) from series expansion
% x may be entered as a vector to allow for multiple calculations simultaneously
if n <= 0
    error('Input must be positive')
end
j = length(x);
k = [1:n];
y = ones(j,1);
for i = 1:j
y(i) = sum((-1).^(k-1).*(x(i).^(2*k -1))./(factorial(2*k-1)));
end
if nargout ==2  
    varargout{1} = sin(x)'-y;  
end 
```

比较输出

```
[y] = sine_series(rand(1,10),3) 
```

和

```
[y err] = sine_series(rand(1,10),3) 
```

看看有什么不同。

# c# - 如何解决ffmpeg水印“没有这样的过滤器：'电影'”和“avformat_open_input失败”？

> ID：10455611
> 
> 赞同：1
> 
> 时间：2012-05-04T20:19:53.260
> 
> 标签：c#, windows-services, ffmpeg

我正在开发 Windows 服务，我的 Windows 服务使用“ffmpeg”，同时我正在开发用于测试代码的桌面应用程序。

我想在我的视频中导入水印。我可以用我的桌面应用程序做到这一点。但是当我运行我的 Windows 服务时，它会出错。

```
ffmpeg version N-36635-gceb0dd9 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jan  9 2012 17:39:58 with gcc 4.6.2
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-runtime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-libopenjpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib
  libavutil      51\. 34.100 / 51\. 34.100
  libavcodec     53\. 54.100 / 53\. 54.100
  libavformat    53\. 29.100 / 53\. 29.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 58.100 /  2\. 58.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\.  6.100 /  0\.  6.100
  libpostproc    51\.  2.100 / 51\.  2.100
[mpeg4 @ 01CA93A0] Invalid and inefficient vfw-avi packed B frames detected
Input #0, avi, from 'C:\Apps\SabilVideoProcesser\WAITING_FOR_WATERMARK\Pixar - For the Birds.avi':
  Metadata:
    encoder         : Nandub v1.0rc2
  Duration: 00:03:16.56, start: 0.000000, bitrate: 2113 kb/s
    Stream #0:0: Video: mpeg4 (DX50 / 0x30355844), yuv420p, 720x416 [SAR 1:1 DAR 45:26], 25 fps, 25 tbr, 25 tbn, 30k tbc
    Stream #0:1: Audio: mp3 (U[0][0][0] / 0x0055), 48000 Hz, stereo, s16, 32 kb/s
[buffer @ 02746A20] w:720 h:416 pixfmt:yuv420p tb:1/1000000 sar:1/1 sws_param:
[movie @ 02748E00] Failed to avformat_open_input 'logo.png'
Error initializing filter 'movie' with args 'logo.png'
Error opening filters! 
```

我有时会更改 logo.png，但它不起作用并已修复。我不明白出了什么问题？

我尝试更改 ffmpeg.exe 并从“http://ffmpeg.arrozcru.org/autobuilds/ffmpeg/mingw32/static/”下载，但是当我运行服务时，我再次遇到错误。这次错误不同，我会发疯的...

```
FFmpeg version SVN-r26400, Copyright (c) 2000-2011 the FFmpeg developers
  built on Jan 18 2011 04:07:05 with gcc 4.4.2
  configuration: --enable-gpl --enable-version3 --enable-libgsm --enable-libvorbis --enable-libtheora --enable-libspeex --enable-libmp3lame --enable-libopenjpeg --enable-libschroedinger --enable-libopencore_amrwb --enable-libopencore_amrnb --enable-libvpx --disable-decoder=libvpx --arch=x86 --enable-runtime-cpudetect --enable-libxvid --enable-libx264 --enable-librtmp --extra-libs='-lrtmp -lpolarssl -lws2_32 -lwinmm' --target-os=mingw32 --enable-avisynth --enable-w32threads --cross-prefix=i686-mingw32- --cc='ccache i686-mingw32-gcc' --enable-memalign-hack
  libavutil     50.36\. 0 / 50.36\. 0
  libavcore      0.16\. 1 /  0.16\. 1
  libavcodec    52.108\. 0 / 52.108\. 0
  libavformat   52.93\. 0 / 52.93\. 0
  libavdevice   52\. 2\. 3 / 52\. 2\. 3
  libavfilter    1.74\. 0 /  1.74\. 0
  libswscale     0.12\. 0 /  0.12\. 0
[mpeg4 @ 003dfbd0] Invalid and inefficient vfw-avi packed B frames detected
[mpeg4 @ 003dfbd0] frame skip 8

Seems stream 0 codec frame rate differs from container frame rate: 30000.00 (30000/1) -> 25.00 (25/1)
Input #0, avi, from 'C:\Apps\SabilVideoProcesser\WAITING_FOR_WATERMARK\Pixar - For the Birds.avi':
  Metadata:
    encoder         : Nandub v1.0rc2
  Duration: 00:03:16.56, start: 0.000000, bitrate: 2113 kb/s
    Stream #0.0: Video: mpeg4, yuv420p, 720x416 [PAR 1:1 DAR 45:26], 25 fps, 25 tbr, 25 tbn, 30k tbc
    Stream #0.1: Audio: mp3, 48000 Hz, 2 channels, s16, 189 kb/s
[buffer @ 020d51b0] w:720 h:416 pixfmt:yuv420p
No such filter: 'movie'
Error opening filters! 
```

这是我的 ffmpeg 参数；

```
-i "C:\Apps\SabilVideoProcesser\WAITING_FOR_WATERMARK\Pixar - For the Birds.avi" -vf "movie=logo.png [watermark]; [in][watermark] overlay=main_w-overlay_w-10:10 [out]" -vcodec libx264 -acodec ac3_fixed "C:\Apps\SabilVideoProcesser\WAITING_FOR_SPLIT\inprocess_Pixar - For the Birds.avi" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:26:12.550

## 问题 #1：`Failed to avformat_open_input 'logo.png'`

您遇到两个不同的问题。该消息`Failed to avformat_open_input 'logo.png'`可能表明 ffmpeg 找不到`logo.png`（或者可能无法正确解码）。要么提供文件的绝对路径，要么将其放在与 ffmpeg 二进制文件相同的目录（或“文件夹”，我相信是 Windows 术语）中。如果文件位于正确的位置，则运行`ffmpeg -i logo.png`以查看 ffmpeg 是否甚至可以对其进行解码。

## 问题 #2：`No such filter: 'movie'`

第二条消息`No such filter: 'movie'`表明此命令中使用的 ffmpeg 太旧，或者不支持过滤器，或者对于`movie`. 来自 arrozcru.org 的二进制文件已过时。Zeranoe [FFmpeg Builds](http://ffmpeg.zeranoe.com/builds/)保持最新并且配置合理。您应该继续获取更新的二进制文件。修订版 36635 已经至少有 3696 个修订版。然后看看[FFmpeg：终极的视频和音频操作工具](http://blog.superuser.com/2012/02/24/ffmpeg-the-ultimate-video-and-audio-manipulation-tool/)，以获得对使用的一个很好的概述。

## 添加水印

无论如何，您不需要`movie`源过滤器来添加水印。请参阅[如何使用 ffmpeg 在视频中心添加透明水印中的示例？](https://stackoverflow.com/a/10920872/1109017)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T17:49:19.377

Faced the same issue

(Error initializing filter 'movie' with args '/mnt/sdcard/MyApp/frame.png').

Using static ffmpeg library in my android app. On samsung galaxy s3 it works fine, but on the lenovo and htc 2.3.6 i had same error in ffmpeg - he coudln't find my watermark. Fixed this error by moving waterkmark in the same folder as ffmpeg (executable). So now i using next path in movie filter "...movie=frame.png..." instead of "...movie=/mnt/sdcard/MyApp/frame.png". Still don't know is it a bug or i'm just doing something wrong.

# java - 使用 Java 从 Oracle 服务器连接到 MS SQL Server

> ID：10455614
> 
> 赞同：0
> 
> 时间：2012-05-04T20:20:09.170
> 
> 标签：java, sql-server, oracle, jdbc

我有一个使用 Microsoft JDBC Driver 3.0 for SQL Server (sqljdbc.jar) 连接到 MS SQL Server 数据库的 Java 应用程序。正在编译的 Java 版本是 1.5.0_12。它在我的本地 Windows 机器上运行良好，但是当我尝试从 Oracle 服务器运行它时会导致各种错误。关于如何建立成功连接的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:35:40.547

** 撤回...抱歉，在最初的问题中没有看到 Application Server 部分

# php - 致命错误：在非对象上调用成员函数 fetch()？

> ID：10455623
> 
> 赞同：2
> 
> 时间：2012-05-04T20:20:54.583
> 
> 标签：php, mysql, stored-procedures, pdo

我收到以下消息返回给我

致命错误：运行以下命令时调用非对象上的成员函数 fetch()。不过，这似乎是零星的，有什么想法吗？

```
 $cc_transaction_conn = new PDO('mysql:host='.$server.';dbname='.$db2use, $dbuser, $dbpass);
    $cc_transaction_query = $cc_transaction_conn->query("CALLgenInsCCTransactionLog('".$vmcnum."',
                                                                                     ".$_SESSION[val].",
                                                                                    'Enrollment',
                                                                                    'Processor',
                                                                                    'Merchant',
                                                                                    'Auth',
                                                                                    '".$card_expiration_month."',
                                                                                    '".$card_expiration_year."',
                                                                                    ".$_SESSION[enrollment_fee].",
                                                                                    '".strtoupper($_SESSION[forename])."',
                                                                                    '".strtoupper($_SESSION[surname])."',
                                                                                    '".strtoupper($_SESSION[house_number])."',
                                                                                    '".strtoupper($_SESSION[street])."',
                                                                                    '".strtoupper($_SESSION[flat_number])."',
                                                                                    '".strtoupper($_SESSION[town])."',
                                                                                    '".strtoupper($billing_post_code)."',
                                                                                    '".$ip_address."',
                                                                                    @cc_insert_id)");
        $cc_transaction_result = $cc_transaction_query->fetch();
        $cc_insert_id = $cc_transaction_result['cc_insert_id'];
        $_SESSION[cc_insert_id] = $cc_insert_id;
        $cc_transaction_conn = NULL; 
```

这是存储过程：

```
 CREATE DEFINER=`reliantuksite`@`%` PROCEDURE `genInsCCTransactionLog`(
                        vmc VARCHAR(16),
                        application_id INT UNSIGNED,
                        reas_description VARCHAR(50),
                        in_processor_name VARCHAR(50),
                        merc_name VARCHAR(50),
                        trans_type_description VARCHAR(50),
                        card_expiration_month VARCHAR(2),
                        card_expiration_year VARCHAR(4),
                        amount DECIMAL(6,2),
                        forename VARCHAR(50),
                        surname VARCHAR(50),
                        house_number VARCHAR(255),
                        street VARCHAR(255),
                        flat_number VARCHAR(75),
                        town VARCHAR(50),
                        postal_code VARCHAR(10),
                        ip_address VARCHAR(32),
                        OUT cc_insert_id INT)
    BEGIN

    DECLARE proc_id TINYINT;
    DECLARE pay_reason_id TINYINT;
    DECLARE merc_account_id INT;
    DECLARE trans_type_id TINYINT;
    SELECT processor_id INTO proc_id FROM cc_processor WHERE processor_name = in_processor_name;
    SELECT payment_reason_id INTO pay_reason_id FROM payment_reason WHERE reason_description = reas_description;
    SELECT merchant_account_id INTO merc_account_id FROM cc_merchant_account WHERE merchant_name = merc_name;
    SELECT transaction_type_id INTO trans_type_id FROM transaction_type WHERE transaction_type_description = trans_type_description;
    INSERT INTO
        cc_transaction_log 
            (transaction_sent_date,
            vmc_number,
            application_id,
            processor_id,
            payment_reason_id,
            merchant_account_id,
            transaction_type_id,
            card_expiration_month,
            card_expiration_year,
            amount,
            billing_forename,
            billing_surname,
            billing_house_number,
            billing_street,
            billing_flat_number,
            billing_town,
            billing_postal_code,
            host_ip)
    VALUES
        (NOW(),
        vmc,
        application_id,
        proc_id,
        pay_reason_id,
        merc_account_id,
        trans_type_id,
        card_expiration_month,
        card_expiration_year,
        amount,
        forename,
        surname,
        house_number,
        street,
        flat_number,
        town,
        postal_code,
        ip_address);
    SELECT LAST_INSERT_ID() INTO cc_insert_id;
    SELECT cc_insert_id;
END;; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:31:36.890

`PDO::query()`，如手册中所写，可以返回一个`PDOStatment`对象，或者`FALSE`如果查询失败。如果您尝试在非对象 - 上调用方法，当然`FALSE`它将无法生成您收到的错误消息。

所以，检查`query()`结果是否为假，然后调用`fetch()`它。

# sql-server - 尽管数据库中存在行 = 2 个数据库，但查询结果为 0，但为什么是 2 个？

> ID：10455624
> 
> 赞同：0
> 
> 时间：2012-05-04T20:21:03.807
> 
> 标签：sql-server, entity-framework, ef-code-first

我首先使用实体​​框架（4.3）和代码（以及 SQL server 2012 localdb）。

我有一个有趣的情况，在一个应用程序中，一个调用返回一个结果（'card'），另一个在同一个数据库上使用相同的查询（有数千行可用）返回什么（在这种情况下为 null，因为我正在使用第一或默认）。

```
using (var context = new MyEntities())
        {
            //verify account exists
            var account = context.Account.SingleOrDefault(a => a.AccountNum == accountNum);

            if (account == null)
            {   
                //handle no account                 
                return false;
            }                

            var card = context.cards.FirstOrDefault(c => c.Used == false);

            //check that we actually got a card
            if (card == null)
            { 
                //handle no cards available
                return false;
            }

            card.Used = true;

           //snip...

            context.SaveChanges();
        } 
```

~~在我的测试控制台应用程序中，“卡片”将有一个值，而在我的“服务”中则没有。相同的代码（甚至相同的程序集），相同的数据库，相同的行可用。帐户检索在这两种情况下都有效。~~

我要试试这个： [How to force EF Code First to query the database?](https://stackoverflow.com/questions/7657643/how-to-force-ef-code-first-to-query-the-database)

~~但即使这样可行，不一致的行为对我来说也没有意义。~~

**编辑**：

最后我有两个数据库实例，正如指出的那样。有趣的部分是数据源的变化取决于库的运行位置（作为 VS11 下的调试或作为管理员用户运行的服务）。这是我的 app.config：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True" />
  </parameters>
</defaultConnectionFactory> 
```

当我附加到运行与控制台应用程序相同的库 (DLL) 的服务进程时，数据源已从以下位置更改：

```
(localdb)\v11.0 
```

到：

```
.\SQLEXPRESS 
```

相同的 DLL，相同的 app.config。我隐约记得读过一些关于命名与未命名的本地数据库实例以及它们在哪个用户下运行的内容，但是我的谷歌技能目前让我失望。

因此，当我在 SSMS 中打开连接时，我需要使用适当的服务器名称，具体取决于我正在使用的数据库。没什么大不了的，因为这只是开发的设置。

我的问题：

*   有谁知道这是记录在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:50:20.787

问题是使用两个数据库。使用了两个，因为我在实际运行的文件夹中没有 .config 和我的服务的连接字符串。测试应用程序有一个 .config

```
 <entityFramework>
  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
        <parameters>
             <parameter value="Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True" />
        </parameters>
  </defaultConnectionFactory>
  </entityFramework> 
```

该服务没有，因此采用了默认行为（似乎是连接到 SQL Server 的默认实例）。

我宁愿让应用程序在没有明确说明连接的情况下无法创建数据库（引发异常），但是 Microsoft 在[DbContext](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)的“备注”部分中记录了它：

> 如果未找到连接字符串，则将该名称传递给在 Database 类上注册的 DefaultConnectionFactory。然后，连接工厂使用上下文名称作为默认连接字符串中的数据库名称。（除非注册了不同的 DefaultConnectionFactory，否则此默认连接字符串指向本地计算机上的 .\SQLEXPRESS。）

# javascript - Chrome中的Keydown Simulation正常触发但不是正确的键

> ID：10455626
> 
> 赞同：28
> 
> 时间：2012-05-04T20:21:09.787
> 
> 标签：javascript, google-chrome, dom-events

我想模拟`keydown`html 页面中给定 textarea 元素上的事件。由于我使用的是 Chrome，所以我调用`initKeyboardEvent`了我的变量并将`keyCode`我想输入的内容传递到 textarea 中。这是我尝试过的：

```
var keyEvent = document.createEvent('KeyboardEvent');
keyEvent.initKeyboardEvent('keydown', true, false, null, 0, false, 0, false, 77, 0);
inputNode.dispatchEvent(keyEvent); 
```

在这段代码中，我输入了字母`m`，但是 textarea 只得到了`keyCode`13，这是`Enter`关键。所以，我尝试了一个我在网上看到的覆盖代码，将值设置为`keyCodeVal`，但没有成功。

```
var keyEvent = document.createEvent('KeyboardEvent');
Object.defineProperty(keyEvent, 'keyCode', { 
                         get : function() {
                                 return this.keyCodeVal;
                         }
                        });
keyEvent.initKeyboardEvent('keydown', true, false, null, 0, false, 0, false, 77, 0);
keyEvent.keyCodeVal = 77;
inputNode.dispatchEvent(keyEvent); 
```

有谁知道如何设置`keyCode`值？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-05-09T16:15:23.967

所以非常非常接近...

您只需要覆盖“哪个”属性。这是一些示例代码：

```
Podium = {};
Podium.keydown = function(k) {
    var oEvent = document.createEvent('KeyboardEvent');

    // Chromium Hack
    Object.defineProperty(oEvent, 'keyCode', {
                get : function() {
                    return this.keyCodeVal;
                }
    });     
    Object.defineProperty(oEvent, 'which', {
                get : function() {
                    return this.keyCodeVal;
                }
    });     

    if (oEvent.initKeyboardEvent) {
        oEvent.initKeyboardEvent("keydown", true, true, document.defaultView, false, false, false, false, k, k);
    } else {
        oEvent.initKeyEvent("keydown", true, true, document.defaultView, false, false, false, false, k, 0);
    }

    oEvent.keyCodeVal = k;

    if (oEvent.keyCode !== k) {
        alert("keyCode mismatch " + oEvent.keyCode + "(" + oEvent.which + ")");
    }

    document.dispatchEvent(oEvent);
} 
```

示例用法：

```
Podium.keydown(65); 
```

Note: this code is not designed to work in IE, Safari, or other browsers. Well, maybe with Firefox. YMMV.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-28T11:44:30.363

Orwellophile's solution does work.

*   First: 'keyCode', 'charCode' and 'which' is readonly in Safari and IE9+ (at least).
*   Second: initKeyboardEvent is kind of messy. All browsers implement it in a different way. Even in webkit's there are several different implementation of initKeyboardEvent. And there is no "good" way to initKeyboardEvent in Opera.
*   Third: initKeyboardEvent is deprecated. You need to use initKeyEvent or KeyboardEvent constructor.

Here I wrote a [cross-browser initKeyboardEvent function](https://gist.github.com/4654819) (gist):

Example:

```
var a = window.crossBrowser_initKeyboardEvent("keypress", {"key": 1, "char": "!", shiftKey: true})
alert(a.type + " | " + a.key + " | " + a.char + " | " + a.shiftKey) 
```

And here is my [DOM Keyboard Event Level 3 polyfill](https://github.com/termi/DOM-Keyboard-Event-Level-3-polyfill) with cross-browser KeyboardEvent constructor.

Example:

```
var a = new KeyboardEvent("keypress", {"key": 1, "char": "!", shiftKey: true})
alert(a.type + " | " + a.key + " | " + a.char + " | " + a.shiftKey) 
```

[Example 2](http://jsfiddle.net/termi/yjc5F/)

[Example 3](http://h123.ru/-/tests/KeyboardEvent/)

Important Note 1: charCode, keyCode and which properties is deprecated. So neither my crossBrowser_initKeyboardEvent no KeyboardEvent constructor is absolutely guaranteed right values of that properties in some browsers. You can using properties "key" and "char" instead or edit my [gist](https://gist.github.com/4654819) to force using initEvent in browsers with read-only charCode, keyCode and which properties.

Important Note 2: keypress event is deprecated and for now unsupported in my [Keyboard Event Level 3 polyfill](https://github.com/termi/DOM-Keyboard-Event-Level-3-polyfill). That's mean that key and char properties in keypress event can have random values. I am working to fix that problem to backward compatibility.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T18:55:26.830

In order to get @Orwellophile's script to work on Google Chrome 26.0.1410.65 (on Mac OS X 10.7.5, if that matters), I had to change one line: his script appears to have the paramaters of `initKeyboardEvent` in different order than the [MDN documentation for initKeyboardEvent](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent#initKeyboardEvent%28%29).

The changed line looks like this:

```
oEvent.initKeyboardEvent("keydown", true, true, document.defaultView, k, k, "", "", false, ""); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-15T20:06:15.777

Well the above solutions did work, also thanks to @dland for the parameter tip. Here is something I found useful, if you are not able to get the events firing at the right place.

The @Orwellophile's script fires the event on document. It may be possible that the event listener is not always registered on `document`. I changed the last line to following and now it pretty much works every time.

`document.activeElement.dispatchEvent(oEvent);`

The `document.activeElement` always fires the event on the element where the user is currently focusing on.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-25T18:36:16.743

All the solutions above are working, but I've found one case they won't.

If Dart is being used, Dart code that uses KeyboardEvents won't work on a general Event.

You'll get something like get$keyCode is undefined.

after banging my head for hours on this, I've found the following trick:

```
function __triggerKeyboardEvent(el, keyCode)
{
   var eventObj = document.createEventObject ?
       document.createEventObject() : document.createEvent("Events");

   var tempKeyboardObj = document.createEvent("KeyboardEvents");

   if(eventObj.initEvent){
      eventObj.initEvent("keydown", true, true);
   }
   eventObj.___dart_dispatch_record_ZxYxX_0_ = tempKeyboardObj.___dart_dispatch_record_ZxYxX_0_
   eventObj.keyCode = keyCode;
   eventObj.which = keyCode;

   el.dispatchEvent ? el.dispatchEvent(eventObj) : el.fireEvent("onkeydown", eventObj);

} 
```

Fooling Dart interceptor to thing our Event is actually a KeyboardEvent, did the trick.

Leaving it here, for the poor guy that is trying to test Dart app on a webkit based browser.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-16T21:48:48.297

I have not managed to get it to work for me, but I found why in this thread, apparently it is no longer allowed for security reasons, some events are not reliable

[JavaScript trigger an InputEvent.isTrusted = true](https://stackoverflow.com/questions/49518959/javascript-trigger-an-inputevent-istrusted-true)

# android - 将上下文传递给另一个活动

> ID：10455630
> 
> 赞同：3
> 
> 时间：2012-05-04T20:21:31.030
> 
> 标签：android, database, android-activity, helper, android-context

我有一个不是活动的数据库助手类。在这里，我想展示一个需要上下文的 Toast。如何从另一个活动传递上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:27:30.937

你可以`setContext(Context context)`在你的`DataBase Helper`类中创建一个方法来从你的活动中传递你的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:28:10.370

如果你做 getApplicationContext(); 你可以得到上下文 从您的活动中并将其传递给您的 DBHelper 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:55:09.127

从您的 Activity 创建 Helper 类的对象并将“this”作为上下文传递，例如

```
 MyHelperclass helper=new MyHelperclass(this); 
```

在 Helper 类中通过其构造函数获取此上下文

```
Context context;
MyHelperClass(Context context){
this.context=context;
} 
```

现在您可以将此上下文传递给 Toast 类的 makeText() 方法。

# python - Python 复制文件

> ID：10455631
> 
> 赞同：0
> 
> 时间：2012-05-04T20:21:44.883
> 
> 标签：python, file-io, recursion, copy

我有一个文件列表 [input1.txt,input2.txt,input3.txt]

我想创建一个名为 input.txt 的新文件

然后我想递归地使 input.txt 成为 input1.txt 的克隆，然后是 2，然后是 3

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:31:56.917

[shutil.copyfile](http://docs.python.org/library/shutil.html)

```
import shutil

def recwrite(filelist):
    if len(filelist) > 0:
        shutil.copyfile(filelist[0], "input.txt")
        recwrite(filelist[1:]) 
```

但是，递归地执行它没有任何意义，迭代地执行它会快得多：

```
import shutil

filelist = ["input1.txt","input2.txt","input3.txt"]
for filename in filelist:
    shutil.copyfile(filename,"input.txt") 
```

# java - 在 Android 中使用 Java API

> ID：10455632
> 
> 赞同：1
> 
> 时间：2012-05-04T20:21:45.767
> 
> 标签：java, android, printing, logging, system.out

我正在尝试在 Android中运行[这个 API java 。](https://github.com/Vizzuality/cartodb-java-client)因为Android中没有终端，`System.out.println`也`e.printStackTrace`没有编译，我试图在我找到它们的`CartoDBClient`和类中替换它。`SecuredCartoDBClient`但是，即使这样做，应用程序也会因 LogCat 中的这些错误而意外关闭

这里的代码

SecuredCartoDBClient：

```
@Override

    public String executeQuery(String sqlQuery){
        String json = null;
        if(oAuthService == null){
            //System.out.println("Error : uninitialized " + getClass().getName());
            Log.e(TAG, "Error : uninitialized " + getClass().getName(), null);
            return null;
        }
        OAuthRequest request = new OAuthRequest(Verb.POST, securedApiUrl);
        request.addBodyParameter("q", sqlQuery);
        oAuthService.signRequest(accessToken, request);
        Response response = request.send();
        if(!response.isSuccessful()){
            //System.out.println("The query " + sqlQuery + " failed.");
            Log.w(TAG, "The query " + sqlQuery + " failed.", null);
            //System.out.println("Response code : " + response.getCode());
            Log.i(TAG, "Response code : " + response.getCode(), null);
        }
        json = response.getBody();
        return json;
    } 
```

CartoDBClient.java..

```
@Override

    public String executeQuery(String sqlQuery){
        String json = null;
        if(apiURL == null){
            //System.out.println("Error : uninitialized " + getClass().getName());
            Log.e(sqlQuery, "Error : uninitialized " + getClass().getName());
            return null;
        }
        try {
            sqlQuery = URLEncoder.encode(sqlQuery,ENCODING);
            json = IOUtils.toString(new URL(apiURL+sqlQuery), ENCODING);
        } catch (MalformedURLException e) {
            //System.out.println("Could not get URL " + apiURL+sqlQuery);
            Log.w(TAG, "Could not get URL " + apiURL+sqlQuery);
            Log.e(TAG, Log.getStackTraceString(e)); 
            //e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            Log.e(TAG, Log.getStackTraceString(e));
            //e.printStackTrace();
        }catch (IOException e) {
            //System.out.println("Could not execute " + sqlQuery+ " on CartoDB : ");
            Log.w(TAG, "Could not execute " + sqlQuery+ " on CartoDB : ");
            Log.e(TAG, Log.getStackTraceString(e));
            //e.printStackTrace();
        }
        return json;
    } 
```

这里出现在 logcat 中的错误

```
05-04 19:58:39.128: E/AndroidRuntime(372): FATAL EXCEPTION: main

05-04 19:58:39.128: E/AndroidRuntime(372): java.lang.NoClassDefFoundError: org.apache.commons.io.IOUtils

05-04 19:58:39.128: E/AndroidRuntime(372):  at com.geocap.impl.CartoDBClient.executeQuery(CartoDBClient.java:84)

05-04 19:58:39.128: E/AndroidRuntime(372):  at com.geocap.Geocap.onCreate(Geocap.java:25)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.os.Handler.dispatchMessage(Handler.java:99)

05-04 19:58:39.128: E/AndroidRuntime(372):  at android.os.Looper.loop(Looper.java:126)

05-04 19:58:39.128: E/AndroidRuntime(372):  at 
android.app.ActivityThread.main(ActivityThread.java:3997)

05-04 19:58:39.128: E/AndroidRuntime(372):  at java.lang.reflect.Method.invokeNative(Native Method)

05-04 19:58:39.128: E/AndroidRuntime(372):  at java.lang.reflect.Method.invoke(Method.java:491)

05-04 19:58:39.128: E/AndroidRuntime(372):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)

05-04 19:58:39.128: E/AndroidRuntime(372):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)

05-04 19:58:39.128: E/AndroidRuntime(372):  at dalvik.system.NativeStart.main(Native Method) 
```

感谢您在这件事上的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:25:36.347

我猜您还没有将 org.apache.commons lib 添加到您的项目或类路径中。

在这里您可以找到必要的组件并将其添加到您的项目中： [http ://commons.apache.org/components.html](http://commons.apache.org/components.html)

您可能缺少 IO 组件。不要忘记将它添加到您的类路径中！

# customization - OpenISO8583.Net BCD 格式的消息类型

> ID：10455637
> 
> 赞同：2
> 
> 时间：2012-05-04T20:22:26.660
> 
> 标签：customization, iso8583, openiso8583.net

我正在学习如何使用 OpenISO8583.Net 代码。我从原来的类派生了一个新的 ISO8583 类。我的新课程的不同之处之一是消息类型字段将是 [Numeric, BCD]；所以我把它写成类构造函数的一部分（我确实有一个自定义的 DefaultTemplate 声明为类的一部分）：

```
DefaultTemplate.MsgTypeFormatter = Formatters.Bcd; 
```

我创建了一条消息类型为 0100 (MsgType._0100_AUTH_REQ) 的新消息。不分配任何其他位。

```
 FDISO8583 fdISO8583 = new FDISO8583();
        fdISO8583.MessageType = FDISO8583.MsgType._0100_AUTH_REQ;
        byte[] testMsg = fdISO8583.ToMsg(); 
```

我的最终结果字节数组是： 01-00-00-00-00-00-00-00-00-00 我认为是正确的。具有 BCD 值和位图的消息类型的前 2 个字节全为零。

现在的问题是当我测试拆包时。使用：

```
 fdISO8583 = new FDISO8583();
        int pos = fdISO8583.Unpack(testMsg, 0); 
```

结果消息类型的值为零。

我需要帮助了解这是否是我定义类的方式或 ISO8583 代码中的错误的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:19:52.650

您确实发现了一个错误。我将其记录为问题 13 并已修复。我在 nuget 上发布了 0.5.2 版并将 bin 文件上传到 googlecode 项目。

# visual-studio - 在 Visual Studio 11 中更改 javascript 括号和运算符的颜色

> ID：10455638
> 
> 赞同：1
> 
> 时间：2012-05-04T20:22:28.833
> 
> 标签：visual-studio, visual-studio-2012

有人知道如何更改 VS11 Developer Preview 的括号和运算符颜色吗？它必须是选项>环境>字体和颜色下的新条目，但我找不到它。下面是 .htm 文件中脚本块的屏幕截图，用于说明受影响的符号： ![在此处输入图像描述](../Images/004fc0c52ee4859146043d53a5771dcf.png)
请注意，颜色不适用于 .cs 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T23:13:09.007

对于 JS 运算符，更改**Script Operator**显示项。
受影响的项目：`: + - / * = ,`

**纯文本**显示项目更改括号（以及其他）。
受影响的项目：`; { } ( ) [ ]`

# ios - AFNetworking POST 文件失败（回声？）

> ID：10455639
> 
> 赞同：0
> 
> 时间：2012-05-04T20:22:33.307
> 
> 标签：ios, post, afnetworking

我正在尝试发布声音以回声巢进行文件分析。POST 方法与任何其他方法没有什么不同，我相信它不依赖于 echonest。

这是文档。我需要“上传”部分。

[http://developer.echonest.com/docs/v4/track.html](http://developer.echonest.com/docs/v4/track.html)

```
NSURLRequest *request = [self multipartFormRequestWithMethod:@"POST" path:[NSString stringWithFormat:@"track/upload", self.apiKey] parameters:dictionary constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {

    [formData appendPartWithFileData:data name:@"track" fileName:[path lastPathComponent] mimeType:@"multipart/form-data"];
}];
AFURLConnectionOperation *operation = [self HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"done");
    NSLog(@"response: %@", operation.responseString);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"error: %@", error.description);
    NSLog(@"response: %@", operation.responseString);
    NSLog(@"headers: %@", operation.request.allHTTPHeaderFields.description);
    NSLog(@"operation url: %@", operation.request.URL.absoluteString);
}]; 
```

但是，我有问题。这是我的回应：

```
 {"response": {"status": {"version": "4.2", "code": 4, "message": "track - Missing Parameter: track or url is required with a POST content-type of \"application/x-www-form-urlencoded\" or \"multipart/form-data\""}}} 
```

我以为我已经将“track”参数作为我初始化的数据。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:21:18.813

几周前我遇到了同样的问题。这就是我发现的。AFNetworking 发出稍微错误的多部分/表单数据请求。

在 AFHTTPClient.m 文件中，

```
static inline NSString * AFMultipartFormFinalBoundary() {
    return [NSString stringWithFormat:@"%@--%@--%@%@", kAFMultipartFormCRLF, kAFMultipartFormBoundary, kAFMultipartFormCRLF, kAFMultipartFormCRLF];
} 
```

他们将 kAFMultipartFormCRLF 两次放在请求的最终边界的末尾。但 Echonest 仅在多部分/表单数据发布请求末尾带有一个 CRLF 的请求除外。我不知道哪一个是 HTTP 协议标准的正确方式，但是如果您修改该代码行（删除 kAFMultipartFormCRLF），我认为您的代码会运行良好。

仅供参考，在写这个答案时，我探索了当前的 AFNetworking Git repo，发现这个缺陷在 5 天前已经修复。所以我想你可以使用最新的源代码来解决这个问题。

# etl - 与 SQLLoader 相比，Scriptella 在用于 Oracle 时的性能如何？

> ID：10455644
> 
> 赞同：2
> 
> 时间：2012-05-04T20:22:50.217
> 
> 标签：etl, sql-loader, oracle11gr2, scriptella

我希望你们中的一些有使用 Scriptella 和 Oracle SQL*Loader 经验的人可以帮助我确定这两种数据加载解决方案的速度和性能是否相当。

我对 Scriptella 非常感兴趣，因为它具有广泛的 ETL 功能和脚本编写灵活性。我主要担心的是，如果我决定放弃 SQL*Loader 以支持 Scriptella，我可能会牺牲功能性能。

有没有人试图比较这两者？如果有，结果如何？

# mysql - 检查mysql表是否已经存在

> ID：10455645
> 
> 赞同：3
> 
> 时间：2012-05-04T20:22:56.490
> 
> 标签：mysql, ruby, activerecord

我使用 activerecord 连接到一个 mysql 数据库并在连接后创建一个表。到目前为止效果很好，问题是我不知道如何检查表是否已经存在。我认为它可以与 table.exist 一起使用？但不知何故我没有......所以这就是我到目前为止得到的：

```
ActiveRecord::Base.establish_connection(
        :adapter => "mysql",
        :host => "localhost",
        :username => "my-username",
        :password => "my-password",
        :database => "my-db",
        :encoding => "UTF8"
    )

    # How to check if it exists already? table_name.table.exist? doesnt really work...
    name = "my_table"
if name.!table.exist?
    ActiveRecord::Schema.define do
        create_table :"#{name}" do |table|
            table.column :foo, :string
            table.column :bar, :string
        end
    end
else
puts "Table exist already..."
end
    # Create ActiveRecord object for the mysql table
    class Table < ActiveRecord::Base
        set_table_name "#{name}"
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:58:31.880

您需要在数据库连接上使用#tables 方法。

```
unless ActiveRecord::Base.connection.tables.include? name
  ActiveRecord::Schema.define do
    create_table :"#{name}" do |table|
      table.column :foo, :string
      table.column :bar, :string
    end
  end
end 
```

# android - 获得在开发中的系统上安装 Android Market 或 Google Play 的许可的正确/合法程序是什么？

> ID：10455646
> 
> 赞同：0
> 
> 时间：2012-05-04T20:22:58.020
> 
> 标签：android

我是一名 Android 操作系统开发人员。我正在开发一款平板电脑，正在将 Android ICS 移植到该平板电脑上。现在我想安装 Android Market 或 Google Play。该系统正在开发中，尚未分发，尚未获得 Google 的许可/批准。

我看到很多关于如何在模拟器上安装 Android Market 的问答。我很确定我可以使用相同的程序在我的开发系统上安装 Android Market。但这不是我的问题。

我有一种预感，而且我可以看到其他人也推测过，未经 Google 许可安装（侧载）Android Market 是不合法的。我的问题是，作为开发者，我如何申请或获得或获得 Google 的批准以在我的开发系统上下载和安装 Android Market 或 Google Play？相信我，我已经在 Android 开发网站上搜索了很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:31:55.297

> 未经 Google 许可安装（侧载）Android Market 是不合法的

正确的。

> 我如何申请或获得 Google 的批准以在我的开发系统上下载和安装 Android Market 或 Google Play？

引用[文档](http://source.android.com/faqs.html#compatibility)：“Google Play 仅授权给手机制造商运送设备。有关特定案例的问题，请联系 android-partnerships@google.com”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T23:30:29.643

我也在开发平板电脑，得到了相同的表格，但谷歌没有回复，我很想听听你是否有任何回复。

现在发生了什么，我决定将 Slide Me 实现为最终用户应用商店，可以用你的名字和图标为其打上烙印。

它在我的测试设备上运行良好，因此如果您只是在寻找市场应用程序，我建议您尝试一下。

不过，那里有更多的市场（也有更便宜的）。

# iphone - XCode 会在提交时拍摄我的应用程序的快照吗？

> ID：10455647
> 
> 赞同：3
> 
> 时间：2012-05-04T20:23:01.980
> 
> 标签：iphone, ios, xcode, restore, snapshot

提交应用程序后，是否有可以还原的快照？我做了很多更改，恢复起来会更容易，但我没有手动拍摄快照。

欢呼声.bo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:27:52.317

查看 Apple 的文档：
**Xcode 4 在重大更改（例如重构代码或执行查找和替换操作）之前自动创建快照。**
[http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/SCM/SCM.html](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/Xcode4TransitionGuide/SCM/SCM.html)
可以在此处找到选项：**选择文件 > 项目设置（或工作区设置）以更改此选项。**
但是，否则，您必须手动拍摄快照。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:32:37.843

XCode 直接支持 GIT，这是一个代码版本控制系统。
查看 Apple [XCode git 文档](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/SCM/SCM.html)。此外，阅读[git basics](http://cworth.org/hgbook-git/tour/)可能值得一读。

# net-snmp - SNMP 陷阱被截断？

> ID：10455650
> 
> 赞同：0
> 
> 时间：2012-05-04T20:23:12.183
> 
> 标签：net-snmp, snmp-trap

所以我们收到一个 SNMP 陷阱，文本如下：

以下 SNMP 陷阱通知由 ms931.mytest.com (xx.x.xxx.xx) 生成：

```
DISMAN-EVENT-MIB::sysUpTimeInstance  0:0:21:08.75
        SNMPv2-MIB::snmpTrapOID.0  DISMAN-EVENT-MIB::mteTriggerFired
DISMAN-EVENT-MIB::mteHotTrigger.0  44448217: No response from lo  DISMAN-EVENT-MIB::mteHotTargetName.0
DISMAN-EVENT-MIB::mteHotContextName.0  
    DISMAN-EVENT-MIB::mteHotOID.0  SNMPv2-SMI::enterprises.7143.6.9.1.0
  DISMAN-EVENT-MIB::mteHotValue.0  1224  SNMPv2-SMI::enterprises.7143.6.9.2.0  7 
```

本质上，错误代码（即 44448217）的行被截断了一些。或者后面的线把它吃掉了。我们使用的 snmpd 服务在 Linux RH 5.6 上运行，RPM 包版本是 net-snmp-5.3.2.2-9.el5_5.1。我们有我们提供的 44448217 错误消息，但为什么它被截断？net-snmp-5.1.2-13.el4_7.2 没有发生这种情况。

干杯，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T05:17:07.357

这个问题似乎也被问过（并回答[了）这个谷歌组的 Net-SNMP 用户](https://groups.google.com/forum/#!topic/mailing.unix.net-snmp-users/yy944BJfzwc)。

总结那里的对话，信息在*内部被截断，与**陷阱*本身无关。没有遵循的文本长度有硬性限制，因此发布的结果。

* * *

DISMAN-EVENT-MIB::mteHotTrigger，其值似乎被截断的 OID，是一个表示触发器名称的 SnmpAdminString。虽然 SnmpAdminString 的长度最多为 255 个字节，但来自 DISMAN-EVENT-MIB::mteTriggerName 的触发器名称的长度最多只能为 32 个字节。

触发器名称在特定配置中指定为：

> 44448217：本地用户/门户应用程序没有响应。

这远远超过了 32 字节的限制。解决方案只是将触发器*名称*设置为*错误代码*值：

> 44448217

（这对海报来说效果很好）。

* * *

理论上，如果要遍历整个触发器表，则 DISMAN-EVENT-MIB::mteTriggerName 的值似乎也已被截断。如果最初提供该信息，将对这篇文章有所帮助。

# oracle - 如何根据来自另一个表的 id 匹配填充一个表中的列数据（使用匹配表中的数据）

> ID：10455651
> 
> 赞同：0
> 
> 时间：2012-05-04T20:23:21.357
> 
> 标签：oracle, plsql, cursor

在 Oracle 中，我有两个表。两者都填充了数据并有一`timestamp`列。

一个表的该列填充了数据，另一个表没有。但是我需要根据另一列的匹配从表中获取数据到另一表的列中。

每个都有“代码”，因此一个表中的时间戳只能放在代码匹配的另一个表的时间戳中。

我试过游标等，但似乎我错过了一些东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:25:25.860

听起来你想要一个相关的更新。`destinationTable`这将使用列上匹配的位置`timestamp_col`更新每一行。`sourceTable``code`

```
UPDATE destinationTable d
   SET timestamp_col = (SELECT s.timestamp_col
                          FROM sourceTable s 
                         WHERE s.code = d.code )
 WHERE EXISTS( SELECT 1
                 FROM sourceTable s
                WHERE s.code = d.code ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:15:23.763

只是为了完整起见，如果目标具有主键或唯一列，我想我会做这样的事情（未经测试）：

```
UPDATE (
  SELECT d.primary_key AS pk, d.timestamp_col AS dest_col, MAX(s.timestamp_col) AS src_col
    FROM dest d
    JOIN src s ON d.code = s.code
    GROUP BY pk, dest_col
  ) j
  SET j.dest_col = j.src_col 
```

# mysql - 从 Twitter 存储推文的 MySQL 数据类型

> ID：10455652
> 
> 赞同：3
> 
> 时间：2012-05-04T20:23:29.623
> 
> 标签：mysql, database, database-design

我需要存储大量 Twitter 推文

*   哪个可能是推文的最佳数据库类型 → 最好的猜测是`TEXT`
*   我也需要防止重复。`varchar(255)`→ 最好的猜测`UNIQUE key`
    *   可能是`varchar(140)`字符应该起作用，但我们也有中文字符？（会节省很多空间）

另一个想法是，将所有推文存储为`TEXT`并添加另一列，将推文哈希到 MD5 并`UNIQUE key`在列上添加一个。

问题：存储推文的最佳 MySQL 类型是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:28:20.883

**编辑**

Twitter 不再根据 140 个字符的限制计算用户句柄，[因此](http://www.wired.co.uk/article/twitter-character-limit)不足以`varchar(140)`存储包含用户句柄的全部长推文。

然而，经过检查，当通过他们的句柄提及另一个 Twitter 用户时，我仍然无法超过 140 个字符。

**原始答案**

`varchar(140)`在`utf8`格式中。

`TEXT`效率会非常低。`char(140)`会浪费太多空间。

这并不是说这支持我的答案，但是关于技术和效率的[阅读仍然很有趣。](http://highscalability.com/blog/2011/12/19/how-twitter-stores-250-million-tweets-a-day-using-mysql.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:28:14.317

由于推文被定义为 140 个字符的字符串，因此您可以将其存储为`nvarchar(140)`好像称“最好的”有点冒昧，因为我们不知道您的预期用途是什么......

[http://en.wikipedia.org/wiki/Twitter](http://en.wikipedia.org/wiki/Twitter)

[http://support.twitter.com/groups/31-twitter-basics/topics/109-tweets-messages/articles/127856-about-tweets-twitter-updates](http://support.twitter.com/groups/31-twitter-basics/topics/109-tweets-messages/articles/127856-about-tweets-twitter-updates)

没有理由进行 MD5 哈希。如果这是您的实际意图，只需在列上设置唯一性约束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T20:28:50.483

一条推文最多 140 个字符，所以我肯定会使用它。

`varchar(140)`是我会使用的。

# android - Phonegap App 显示插件名称

> ID：10455654
> 
> 赞同：1
> 
> 时间：2012-05-04T20:23:33.707
> 
> 标签：android, cordova, plugins

我在 Android 上的 phonegap 应用程序有一个奇怪的行为。我正在使用这个条形码扫描仪插件：

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner)

一切正常，但是当我构建项目并将应用程序部署到手机时，会显示插件的名称。所以该应用程序被称为“条形码扫描仪”。当然这不是什么大问题，我只是将插件的名称也更改为我的应用程序名称，现在它可以正确显示了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T02:23:54.277

有同样的问题：

您必须办理登机手续：

./res/values/strings.xml

和其他本地化来源，例如：

./res/values-de/strings.xml

./res/values-it/strings.xml

./res/values-fr/strings.xml

确保你有这条线

```
<string name="app_name">PUT HERE YOUR FINAL APP NAME</string> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T06:28:21.347

我想我发现了，我的应用在 ./res 中没有 values-nl 文件夹。条形码扫描仪项目这样做了，它使用该文件本地化了应用程序，并且在该文件中是 app_name = Barcode Scanner。

我将 /res/values 文件夹复制到 /res/values-nl，现在它显示了我的应用程序名称，并且扫描仪工具仍然是本地化的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:54:27.460

仍然不知道为什么会发生这种情况，但我显然可以通过将其 android 清单中插件的 app-name 更改为应用程序的名称来解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:29:16.467

问题的根源在于，ZXing Barcode Scanner Library 有自己的 strings.xml 和 app_name 值，因此它是本地化的。由于更新，不建议更改外部库的源代码。

应用程序的名称来自AndroidManifest.xml，应用程序android:label。将其更改为您可以控制的其他字符串。

```
<application android:icon="@drawable/icon" android:label="My App" 
```

或者

```
<application android:icon="@drawable/icon" android:label="@string/myappname" 
```

在 res/values/strings.xml 中插入以下行：

```
<string name="myappname">My App</string> 
```

# c# - 在 XNA4 中使用 SpriteFont 绘制文本时的问题

> ID：10455656
> 
> 赞同：0
> 
> 时间：2012-05-04T20:23:41.550
> 
> 标签：c#, text, xna, spritefont

我正在尝试使用 XNA 中的 spritefont 在屏幕上绘制文本。我可以让文本出现，但无论我尝试什么，当我绘制文本时总会出现其他问题。

我正在尝试显示 FPS。我已经以几种不同的方式尝试过它，并在我制作的各种不同的 XNA 项目中进行了尝试。将文本绘制到屏幕时发生的一些事情包括 - 顶点被绘制得更远且位置错误，顶点根本没有被绘制，线框模式无法打开。取决于我如何尝试渲染文本，我总是以其中之一结束。然后如果我注释掉绘制文本的部分，一切都会恢复正常。

这是一些代码我在代码顶部的变量是 -

```
 GraphicsDeviceManager graphics;
    SpriteFont font;
    SpriteBatch spriteBatch; 
```

在我的 LoadContent 我有

```
 font = Content.Load<SpriteFont>("SpriteFont1");
        RasterizerState rs = new RasterizerState();
        rs.FillMode = FillMode.WireFrame;
        GraphicsDevice.RasterizerState = rs;
        spriteBatch = new SpriteBatch(GraphicsDevice); 
```

这是我的整个 Draw 方法 -

```
protected override void Draw(GameTime gameTime)
    {
        CreateMesh();
        GraphicsDevice.Clear(Color.SkyBlue);

        effect.Parameters["View"].SetValue(cam.viewMatrix);
        effect.Parameters["Projection"].SetValue(projectionMatrix);
        effect.CurrentTechnique = effect.Techniques["Technique1"];
        effect.CurrentTechnique.Passes[0].Apply();
        GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, vertices.Count, 0, indices.Length / 3);

        spriteBatch.Begin();
        spriteBatch.DrawString(font, frameRate.ToString(), new Vector2(1, 1), Color.Black);
        spriteBatch.End();

        frameCounter++;
        base.Draw(gameTime);
    } 
```

这是我发现的最接近的工作方式，但由于某种原因，无论我尝试做什么，它都会使线框不起作用，我真的需要线框。

编辑：我在程序运行时调试了填充模式，并且在使用 sprite 字体时由于某种原因它自己将其设置回实体。我可以在绘制顶点之前每帧重置填充模式，但我真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:31:18.203

您应该在绘制 somthing win 线框模式之前应用您的光栅化器状态，​​而不仅仅是在加载方法中......因为 batch.Begin() 方法将设置默认的光栅化器状态

如果你想为 spritebatch 使用其他光栅化器状态，​​你应该提供一个

```
spritebatch.Begin(SortMode,...,,.., rs ); 
```

你的代码应该这样改变：

```
static RasterizerState rs = new RasterizerState() { FillMode = FillMode.Wireframe; }

protected override void Draw(GameTime gameTime)
{
    CreateMesh();
    GraphicsDevice.Clear(Color.SkyBlue);

    GraphicsDevice.RasterizerState = rs;

    effect.Parameters["View"].SetValue(cam.viewMatrix);
    effect.Parameters["Projection"].SetValue(projectionMatrix);
    effect.CurrentTechnique = effect.Techniques["Technique1"];
    effect.CurrentTechnique.Passes[0].Apply();
    GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, vertices.Count, 0, indices.Length / 3);
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T22:35:59.267

使用 a`SpriteBatch`将渲染状态更改为 3D 图形不再工作，除非您将渲染状态更改回 3D 友好状态。有关更多详细信息，请参阅本文。

[http://blogs.msdn.com/b/shawnhar/archive/2006/11/13/spritebatch-and-renderstates.aspx](http://blogs.msdn.com/b/shawnhar/archive/2006/11/13/spritebatch-and-renderstates.aspx)

# c# - MVC4 FileResult PDF 损坏

> ID：10455657
> 
> 赞同：0
> 
> 时间：2012-05-04T20:24:16.490
> 
> 标签：c#, asp.net-mvc-4

我正在将 PDF 传输到 MVC 控制器，将 PDF 保存到数据库并检索它。如果我将 PDF 保存到服务器端的磁盘（在返回文件结果之前），它看起来很好。但是，当我做类似于以下的事情时：

```
 return File(fileBytesFromDB, "application/pdf", "file.pdf"); 
```

并尝试从浏览器（任何浏览器）查看它，PDF 似乎已损坏。事实上，它的大小完全不同。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:10:05.707

我找到了。我的一位同事添加了一个标记器作为返回操作的装饰器，它正在标记文件流。我添加了一些忽略的逻辑`FileStreamResult`，`FileContentResult`现在 PDF 出来了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T14:14:56.153

我还找到了另一个解决方案。在我们的数据库中，我们的表将文件路径、名称、mimetype 存储为 nchar(255)，这是一个固定的字符数。即使使用 .Trim()，添加的空格也无法与 FileResult 方法一起使用。通过将列更改为 varchar 解决了我的特定问题

# google-maps - 获取 googlemap 交通数据（预计持续时间）

> ID：10455659
> 
> 赞同：2
> 
> 时间：2012-05-04T20:24:18.063
> 
> 标签：google-maps

我想知道是否有可能从谷歌地图产生的交通状况中获得 ETA 数据。

基本上，当我运行 googlemaps 时，我会得到一个持续时间近似值“无交通”和另一个考虑交通状况的近似值。

Gdirection.getduration() 方法是否返回非流量 ETA 或流量修改 ETA？

如果前者还有其他方法可以继续获取该流量数据吗？

我知道 09 年有人问过类似的问题，但没有答案，所以我希望现在有人可能知道得更好。

非常感谢任何帮助。杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:35:53.190

不是现在。这仅在 maps.google.com 上受支持，而不是通过 API。请参阅Maps API 问题跟踪器上的[问题 2221 。](http://code.google.com/p/gmaps-api-issues/issues/detail?id=2221)

# semantic-web - 语义网 - 立竿见影的好处

> ID：10455660
> 
> 赞同：1
> 
> 时间：2012-05-04T20:24:18.720
> 
> 标签：semantic-web

在网站中实现语义网络功能有什么直接的好处 - 谷歌真的关注 rdf 标记吗？

在过去的几年里，我断断续续地阅读，但似乎没有发生任何重大事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:28:53.740

> 在网站中实施语义网络功能是否有任何直接的好处

[语义网](https://web.archive.org/web/20150425041134/http://answers.semanticweb.com:80/questions/1533/what-are-the-success-stories-of-the-semantic-weblinked-data)已经有一些成功案例。

> google 真的关注 rdf 标记吗？

看看[Google 对 RDFa](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146898&topic=1088472&ctx=topic)的评价，以及它如何从中产生[丰富的片段](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=99170&topic=1088472&ctx=topic)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T06:50:03.607

目前最大的激励恕我直言：

> “包括 Bing、Google、Yahoo! 和 Yandex 在内的搜索引擎依靠此标记来改进搜索结果的显示，使人们更容易找到正确的网页。” -- [http://schema.org/](http://schema.org/)

更多的人/眼球，更多的流量 => 更多的订阅/销售的产品/广告收入。

你说：“似乎没有什么重大的事情发生”。我不同意，现在 schema.org 正在发生重大事件。

# iphone - 为 UIView\UIViewController 重新加载数据？

> ID：10455662
> 
> 赞同：0
> 
> 时间：2012-05-04T20:24:35.040
> 
> 标签：iphone, ios, xcode, reloaddata

当我从功能 [self makeButtons] 移动屏幕上的按钮时，除非我按下视图控制器然后弹回，否则什么都不会发生。ViewController 是否有像 UITableViews 一样的重新加载数据功能？我正在使用 NavigationController，并且正在向 UISrollView 添加子视图并在屏幕上移动其他按钮。使用 ASIFORMHTTPRequest 获取数据后调用该方法。

编辑：对不起，我没有详细说明。

我有一个发送 [request startAsynchronous] (ASIFORMHTTPrequest) 的方法。我有一个包含我所有按钮的 NSMutableArray。当请求完成时，一个名为 doneGettingRequest 的方法，如下所示。

```
- (void) doneGettingRequest(ASIFORMHTTPRequest *) request {
    [self removeButtons];
} 
```

这是调用这个方法；

```
- (void) removeButtons {
    NSLog(@"Removing buttons!");
    for (UIButton *button in gameButtons) {
        [button removeFromSuperview];
} 
```

当我转到另一个视图时一切正常，然后再返回。问题是，如果在调用方法时显示该视图，它将不会刷新（这几乎总是会发生）。gameButton 是一个 NSMutableArray，包含当前正在显示的按钮。删除它们后，我想添加一些其他按钮。问题是，调用 removeButtons 时按钮不会被删除。消息“正在删除按钮！” 但是，显示了，因此正在调用该方法。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:46:36.280

您可以将您的逻辑放在**viewWillAppear**中。

在接收者的视图即将添加到视图层次结构之前以及配置任何动画以显示视图之前调用此方法。

您可以覆盖此方法以执行与显示视图相关的自定义任务。

如果你重写了这个方法，你**必须**在你的实现中调用 super 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:30:54.690

你有没有尝试过

```
 [view setNeedsDisplay]; 
```

# c# - 连接服务器名称

> ID：10455663
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:24:48.423
> 
> 标签：c#, sql-server

我用了 ”。” 当我想在winform中添加新连接时作为服务器名称。但我不知道为什么它不再工作了。我应该输入完整的名称，例如 PC-PC。

当我使用“。” 作为服务器名称，它不会再向我显示用于连接它们的数据库列表。

现在我有 2 个问题

1-我该如何修复它以便我可以使用“。” 作为服务器名称

2-如果我使用完整名称而不是“。”没有任何问题 制作安装文件并让其他计算机使用此应用程序后

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:30:12.447

连接字符串中的`.`服务器名称是本地机器的别名。您是否在运行 sql server 的同一台机器上开发了应用程序，而现在将应用程序部署到其他机器时遇到问题？

在这种情况下，这是因为当部署到另一台机器时，该`.`名称是指客户端的本地机器。一旦您想使用与运行程序不同的机器，您需要指定名称或 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:32:19.443

“。” 表示本地机器。仅当 sql server 与您的应用程序位于同一台机器上时，它才有效。你知道吗？100 次中有 95 次是这样的，你做错了什么。

如果它是桌面应用程序，那么您首先不应该使用完整的 sql server 版本。您应该使用进程内引擎，如 Sql Server *Compact*、Sqlite 甚至 Access。如果它是 Web 应用程序或“企业”应用程序，您应该假设您的客户将在单独的机器上托管 sql server，而不是在本地机器上。在与您的应用程序相同的机器上运行 sql server 几乎永远不会正确。

# facebook - 如何使用 PHP SDK 进行 fql 多查询

> ID：10455664
> 
> 赞同：1
> 
> 时间：2012-05-04T20:24:48.923
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

我正在尝试使用 PHP SDK 进行 fql 多查询。这是我的代码

```
try {
    $fql = array( 
        "query1" => "SELECT uid2 FROM friend WHERE uid1 = me()",
        "query2" => "SELECT name, url, pic FROM profile WHERE id IN (SELECT uid2 FROM #query1)"
    );
    //$fql = "SELECT uid2 FROM friend WHERE uid1 = me()";
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api( array(
        'method' => 'fql.multiquery',
        'query' => $fql,
    ) );
} catch ( FacebookApiException $e ) {
    error_log( print_r( $e->getMessage(), true ) );
    $user = NULL;
} 
```

这总是返回一个没有消息的异常

> [04-May-2012 20:22:26 UTC] PHP 注意：未定义的属性：C:\Program Files (x86)\Zend\Apache2\htdocs\wordpress\wp-content\plugins\all- 中的 FacebookApiException::$getMessage in-one-event-calendar\lib\plugins\A1ecFacebookConnectorPlugin.php 在第 120 行 [04-May-2012 20:22:26 UTC]

我显然做错了什么，那会是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T10:03:48.743

好的，我找到了如何执行此操作，您必须将`queries`其用作参数，而不是`query`

```
try {
    $fql = array( 
        "query1" => "SELECT uid2 FROM friend WHERE uid1 = me()",
        "query2" => "SELECT name, url, pic FROM profile WHERE id IN (SELECT uid2 FROM #query1)"
    );
    //$fql = "SELECT uid2 FROM friend WHERE uid1 = me()";
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api( array(
        'method' => 'fql.multiquery',
        'queries' => $fql,
    ) );
} catch ( FacebookApiException $e ) {
    error_log( print_r( $e->getMessage(), true ) );
    $user = NULL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:07:21.083

你的问题是你试图打电话给`$e->getMessage`不存在的电话。您在第 120 行的代码应为：

```
error_log( print_r( $e, true ) ); 
```

如果您对多查询有疑问，您可以将其作为单个查询执行：

```
$fql = "SELECT name, url, pic FROM profile WHERE id IN 
        (SELECT uid2 FROM friend WHERE uid1 = me() )";

$user_profile = $facebook->api( array(
    'method' => 'fql.query',
    'query' => $fql,
) ); 
```

我已经能够得到一个像这三个 SELECT 一样深的查询。四个 SELECT 似乎太多了。

# vbscript - 是什么导致 Outlook 2007 提示“程序正试图代表您发送电子邮件？”

> ID：10455665
> 
> 赞同：4
> 
> 时间：2012-05-04T20:24:53.147
> 
> 标签：vbscript, outlook-2007

我在 Outlook 中构建了一个自定义表单，可以在任何更改时发送电子邮件通知。由于表单的规范，我不得不在表单中添加一些 VBScript（不幸的是）在表单的关闭事件上发送电子邮件。

该表格目前已发布并且运行良好。唯一出现的问题是**我是唯一一个使用****以下对话框提示**的表单的用户：

 **![在此处输入图像描述](../Images/e0cdba45827c431fa691402ac9692ff4.png)

没有其他人使用该表单正在获取对话框。 **此对话框强制您等到进度条完成后再“允许”您发送电子邮件（大约 5 秒）。** 是因为我是出版商吗？还是我遇到的客户端设置？ **如何禁用这只小狗？**

如果其相关heres来源：

```
Sub SendAttach() 
   'Open mail, adress, attach report
   Dim objOutlk             'Outlook
   Dim objMail                  'Email item
   Dim strMsg
   Const olMailItem = 0

  'Create a new message
   set objOutlk = createobject("Outlook.Application")
   set objMail = objOutlk.createitem(olMailItem)
   objMail.To = Item.UserProperties("Assigned To")
   objMail.cc = Item.UserProperties("Bcc")

   'Set up Subject Line
   objMail.subject = "Work Order Notifications: " & Item.UserProperties("Work Order Number") & " - " & _
                Item.UserProperties("Subject") & " Due " & Item.UserProperties("Due Date")

   'Add the body    
   strMsg = Item.UserProperties("Specifications") & vbcrlf
   strMsg = strMsg & Item.UserProperties("Constraints")

   objMail.body = strMsg
   objMail.display 'Use this to display before sending, otherwise call objMail.Send to send without reviewing

   objMail.Send
   'Clean up
   set objMail = nothing
   set objOutlk = nothing
End sub 
```

这里的安全不是问题。如果有人设法从我的工作站开始发送电子邮件，我遇到的问题比电子邮件欺骗要严重得多！

作为旁注，我无法确定 SO 或 SU 是否是这个问题的最佳位置。如有必要，请相应地重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T08:07:39.793

我在尝试完成一些稍微不同的事情时遇到了这个问题，但为此目的是相同的。HK 提供的链接有助于阅读并有助于了解正在发生的事情，但最后我选择不使用页面上讨论的任何选项。相反，我保持简单，并决定愚弄 Outlook 认为我正在发送电子邮件而不是自动化过程，我通过将 objMail.Send 替换为 SendKeys 替代来模仿自己按下发送按钮，有点难看但有效就我而言。

编辑：

您可以使用此 sendkeys 语句：

```
SendKeys "%{s}", 1 
```

这基本上调用了触发 Outlook 发送按钮的 Alt + S。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:54:14.903

三个选项

```
- Use a pc without the MS Outlook security patch
- Use the redemption ocx (google it up to download)
- Use SMTP instead of outlook 
```

对于第二个选项here一个例子

```
Function sendmail2 (sRecipient, sSubject, sMsg, sAttach)
    on error resume next
    dim SafeItem, oItem  
    set SafeItem = CreateObject("Redemption.SafeMailItem") 'Create an instance of Redemption.SafeMailItem 
    set oItem = oApp.CreateItem(0) 'Create a new message
    With SafeItem
      .Item = oItem 'set Item property 
      .Recipients.Add sRecipient
      .Recipients.ResolveAll 
      .Subject = sSubject
      .HTMLBody = sMsg
      .Send 
    End With
  End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-16T01:48:06.590

另一种可能的解决方法是更新您机器上的注册表设置。

[https://support.microsoft.com/en-gb/help/3189806/a-program-is-trying-to-send-an-e-mail-message-on-your-behalf-warning-i](https://support.microsoft.com/en-gb/help/3189806/a-program-is-trying-to-send-an-e-mail-message-on-your-behalf-warning-i)

此链接概述了如何识别相关注册表项以及应设置的值。这允许您覆盖信任中心设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-20T21:40:17.120

我遇到了同样的问题，因为我的应用程序在 Windows 7 上运行，我能够使用 Windows Mail Client (wlmail.exe) 来发送电子邮件，而不是 MS Outlook。使用 Wlmail，警告仍以默认行为出现，但有一个选项可以通过转到选项 > 安全选项卡来关闭警告，一旦您将其关闭，程序就可以发送邮件而不会弹出一个弹出窗口。**

# json - Json 中未定义的行为

> ID：10455675
> 
> 赞同：0
> 
> 时间：2012-05-04T20:25:36.157
> 
> 标签：json, json.net

当属性的值在 json 字符串中设置为 undefined 时会发生**什么**。IE：

```
{"Name":undefined} 
```

以下示例使用 json.net 库。反序列化对象时抛出异常。

```
JsonConvert.DeserializeObject<SimpleObject>("{\"Name\":undefined}");

public class SimpleObject
{
  public string Name { get; set; }
}

Newtonsoft.Json.JsonReaderException was unhandled
  Message=Error reading string. Unexpected token: Undefined. Path 'Value', line 1, position 18.
  Source=Newtonsoft.Json
  LineNumber=1
  LinePosition=18
  Path=Value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:30:55.747

我认为错误很好。

Jsonlint.org 也会引发错误。

阅读 json.org 上的文档，“value”元素可能有以下变体：

字符串数字对象数组 true false null

如您所见，未列出未定义。对象也不算未定义。

# java - Java中的除法总是导致零（0）？

> ID：10455677
> 
> 赞同：17
> 
> 时间：2012-05-04T20:25:37.297
> 
> 标签：java, android, division

下面的函数从 sharedpreferences 中获取两个值，即体重和身高，我使用它们来计算 BMI，当我打印值的内容时，我得到了我在 sharedprefs 中输入的值（这很好）但是当我运行时对它们进行除法运算，结果我总是得到 0.. 错误在哪里？

```
public int computeBMI(){
    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    String Height = customSharedPreference.getString("heightpref", "");
    String Weight = customSharedPreference.getString("weightpref", "");

    int weight = Integer.parseInt(Weight);
    int height = Integer.parseInt(Height);
    Toast.makeText(CalculationsActivity.this, Height+" "+ Weight , Toast.LENGTH_LONG).show();

    int bmi = weight/(height*height);
    return bmi;

} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-04T20:27:30.307

你正在做**整数**除法。

您需要将一个操作数转换为`double`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-04T20:28:38.150

您正在进行整数除法，将值`float`转换为并将变量的数据类型更改`bmi`为`float`.

像这样：

```
float bmi = (float)weight/(float)(height*height); 
```

您还应该将方法的返回类型更改`public int computeBMI()`为`float`.

我建议你阅读[这个](https://stackoverflow.com/questions/4931892/why-does-the-division-of-two-integers-return-0-0-in-java)stackoverflow 问题。

[在这里](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)，您可以看到 Java 中的**原始数据类型**列表及其完整描述。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T20:30:56.667

因为`bmi`是整数。声明`bmi`或`Weight, Height`作为浮点数。当您在除法中使用整数时，您将得到整数除法。当你使用双精度/浮点数时，你会得到浮点除法

# wix - FilesInUse 不能被修改并且 CloseApplications 什么也不做

> ID：10455678
> 
> 赞同：2
> 
> 时间：2012-05-04T20:25:38.437
> 
> 标签：wix

我已经用谷歌搜索了这个，找不到有效的解决方案。

我们需要防止用户在我们的应用程序仍在运行时重新安装它。标准的 FilesInUse 对话框有效，但它仍然允许用户在应用程序运行时继续，我们不想强制他们重新启动 - 即，他们必须手动关闭应用程序。

我们尝试创建一个自定义 FilesInUse 对话框：

1.  我们包括 FilesInUse 源并删除 Ignore 选项
2.  重命名对话框的ID
3.  在 Mondo UI 中更改 DialogRef
4.  为 ICE20 添加抑制，因为如果我们不这样做，它会抱怨 FilesInUse 不存在。

从未使用过新的对话框。

如果我不修改 FileInUse 的 id，则会收到有关重复对话框的错误。

我也尝试过使用 utils:CloseApplications 但这从来没有做任何事情。

那么：目前关于如何做到这一点的想法是什么？

谢谢

PS，我喜欢 Wix，但有时它确实让我感到沮丧 :) 就像妻子一样……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:16:49.943

为了达到同样的目的，我在相关问题中找到了答案：[在 WIX 项目中包含修改后的 FilesInUse 对话框](https://stackoverflow.com/questions/4172455/including-modified-filesinuse-dialog-in-wix-project)。

从 UI 文件中删除`DialogRef`条目，直接在 UI 文件中`FilesInUse`替换为自定义`Dialog`的 for `FilesInUse`。

# perl - 复制某个后缀目录下所有文件的所有内容

> ID：10455691
> 
> 赞同：0
> 
> 时间：2012-05-04T20:26:54.250
> 
> 标签：perl, command-line

我有一堆名为 project1、project2 等的目录。

在这些文件夹中有一堆 perl 文件（扩展名“.pl”）。

基本上，我只想将这些 .pl 文件的内容复制到一个新文件中，我们称之为“everything.txt”。

有人可以帮我解决这个问题吗？我真的不在乎它是用哪种编程语言完成的，尽管我更喜欢命令行。但是 perl、python 和 Java 也可以。

**编辑：**另外，有一些重复的名称，这应该不是问题，因为我只想将它们的内容写到一个文件中，但只是想我会让你知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:30:17.917

在 Unix-y 系统中：

```
find project1 project2 ... -name \*.pl -exec cat {} \; > everything.txt 
```

比如说，制作一个适当的`.tar`存档文件，让您恢复原始文件名和权限：

```
tar cf everything.txt.tar $(find project1 project2 ... -name \*.pl) 
```

（`$(...)`语法需要`bash`外壳）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:30:37.213

重击：`cat project*/*.pl > everything.txt`

# dns - 更改 straoslive 的帐户域名

> ID：10455698
> 
> 赞同：1
> 
> 时间：2012-05-04T20:27:33.923
> 
> 标签：dns, wso2

我有一个 wso2 stratos 真实账户，想更改账户域。我转到帐户设置页面，看到域的字段，但我无法更改值。我可以更改其他字段的值，例如我的联系信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:09:02.107

租户域是 Stratos 帐户的独特概念。租户的所有用户都将采用 {user-name}@{domain-name} 形式。

按照设计，它无法更改。

# c++ - 这个简单的while循环有什么问题！(C++)

> ID：10455699
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:27:40.383
> 
> 标签：c++, loops, while-loop

```
while (packet[i].source <1 || >1024) 
```

> 错误：> 标记之前的预期主表达式。

当我这样做时它工作正常`<1`，然后当我添加一个 OR 运算符时它会中断：/

inb4 一些非常简单的东西，但我已经编码了好几天，我的大脑着火了。

干杯，伙计们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:28:23.900

它应该是：

```
while (packet[i].source < 1 || packet[i].source > 1024) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T20:28:40.120

非常错误，因为它是语法错误，您必须使用：

```
while (packet[i].source <1 || packet[i].source >1024) 
```

对于每`||`一个`&&`你都必须参考`packet[i].source`。与口语非常不同，可能看起来很痛苦，但你会学会喜欢结构化编程的方式。

别担心，我们都经历过，似乎总是最简单的问题需要最长的时间才能解决。

# php - IIS PHP 使用 Windows 身份验证连接到 MSSQL

> ID：10455700
> 
> 赞同：2
> 
> 时间：2012-05-04T20:27:43.727
> 
> 标签：php, sql-server, windows, iis-7, windows-authentication

我是 PHP 新手，遇到了一个相当简单但令人讨厌的问题。

这是设置：

*   Windows 域环境
*   用户连接到运行 IIS7 和最新版本 PHP 的本地服务器 2008 框
*   此框包含连接到本地 mssql 服务器的 php 脚本

如果用户导航到[http://iisservername/](http://iisservername/)并尝试通过 php 脚本连接到 mssql 服务器，他们会收到 Login failed for user NT AUTHORITY\ANONYMOUS LOGON

我的解决方法是在使用 runas /profile /user:domain\user "c:\program files\internet explorer\iexplore.exe" 的 IIS 服务器上启动一个 cmd 脚本

我在 cmd 脚本中为每个用户创建一个 runas 行并执行它。

启动后，它导航到主页，这是我创建的一个 keepalive.php 脚本，它打开一个连接，然后 javascript 每 x 分钟刷新一次页面。

当然有更好的方法来做到这一点，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:51:49.050

如果您使用 sqlsrv_connect 并且正在使用 IIS 的内置身份验证，则应该为您处理它，仅此而已：

```
/* Specify the server and connection string attributes. */
$serverName = "(local)";
$connectionInfo = array( "Database"=>"AdventureWorks");
/* Connect using Windows Authentication. */
$conn = sqlsrv_connect( $serverName, $connectionInfo); 
```

（示例来自：http: [//msdn.microsoft.com/en-us/library/cc296205%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/cc296205%28v=sql.90%29.aspx)）

# c# - WP7 - 上下文菜单不显示在超链接上

> ID：10455703
> 
> 赞同：0
> 
> 时间：2012-05-04T20:27:59.947
> 
> 标签：c#, .net, windows-phone-7, contextmenu

我正在尝试以编程方式将 ContextMenu 添加到超链接。我在文档和论坛中进行了搜索，似乎正确的解决方案应该是：

```
var link = new Hyperlink();
link.Inlines.Add(new Run() { Text = linkText });
link.FontWeight = FontWeights.Bold;
link.TargetName = linkText;
link.Click += new RoutedEventHandler(link_Click);

ContextMenu menu = new ContextMenu();
MenuItem item = new MenuItem();
item.Click += new RoutedEventHandler(CopyLink);
item.Header = "copy link";
item.Tag = linkText;
menu.Items.Add(item);
ContextMenuService.SetContextMenu(link, menu); 
```

此代码编译并且不会抛出任何异常。我已经测试过，ContextMenu 确实已添加到超链接中。问题是它不会随时显示。我可以随时随地点击并按住链接，菜单不会出现。还尝试使用 GestureService 和 GestureListener 添加侦听器，但 Hold 事件根本不会触发。

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:53:02.993

你不能在`ContextMenu`s 上做[`Hyperlink`s](http://msdn.microsoft.com/en-us/library/system.windows.documents.hyperlink%28v=vs.95%29.aspx)。不过，您可以在[`HyperlinkButton`](http://msdn.microsoft.com/en-us/library/system.windows.controls.hyperlinkbutton%28v=VS.95%29.aspx). 我不完全确定原因，但它确实有效。根据您要执行的操作，`HyperlinkButton`可能一直是您想要的[（`Hyperlink`](http://msdn.microsoft.com/en-us/library/system.windows.documents.hyperlink%28v=vs.95%29.aspx)通常仅在文本文档中使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:55:40.077

我刚刚在阅读 Daniel Vaughan 的 Windows Phone 7.5 Unleashed 书时找到了答案。我的问题是我需要在 RichTextBox 中添加超链接，而我只能使用内联来显示文本。超链接是内联的，但不支持 ContextMenu。正如蒂姆建议的那样，我需要使用 HyperlinkBut​​ton。解决方案是有一个名为[InlineUIContainer](http://msdn.microsoft.com/es-es/library/system.windows.documents.inlineuicontainer.aspx)的类。所以这

```
var inline = new InlineUIContainer { Child = SomeHyperlinkButton } 
```

为我做了伎俩。

# r - 表生成 R

> ID：10455704
> 
> 赞同：1
> 
> 时间：2012-05-04T20:28:04.217
> 
> 标签：r

我有一个类似的数据集：

```
val<-c("Y","N")
test<-data.frame(age=rnorm(n=100,mean=50,sd=10),var1=sample(val,100,T),var2=sample(val,100,T),var3=sample(val,100,T),sex=sample(c("F","M"),100,T)) 
```

我想创建一个使用 Hmisc 报告每个类别的平均年龄的摘要。

```
library(Hmisc)
summary.formula(age~sex+var1+var2+var3,data=test) 
```

但是，var1-var3 实际上属于同一分类变量，级别为 var1、var 和 var3，而不是 Y/N。此外，这些并不是相互排斥的。那么，是否有可能以某种方式创建一个具有这些不同级别的变量 var4，这些级别不是互斥的并且类型

```
summary.formula(age~sex+var4,data=test) 
```

并有如下输出：

```
+-------+-+---+----+
|       | |N  |age |
+-------+-+---+----+
|sex    |F| 44|48.0|
|       |M| 56|50.8|
+-------+-+---+----+
|var4   |var1| xx|yy|
|       |var2| xx|yy|
        |var3| xx|yy|
+-------+-+---+----+
|Overall| |100|49.6|
+-------+-+---+----+ 
```

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:13:53.733

怎么样`paste0`？（或 paste(..., sep='') 如果您不在 R2.15 上）

```
> test$var4 <- paste0(test$var1, test$var2, test$var3)
> summary.formula(age~sex+var4, data=test)
age    N=100

+-------+---+---+--------+
|       |   |  N|     age|
+-------+---+---+--------+
|    sex|  F| 50|50.25440|
|       |  M| 50|51.32134|
+-------+---+---+--------+
|   var4|NNN| 13|46.64417|
|       |NNY| 17|51.34456|
|       |NYN| 15|52.92185|
|       |NYY| 17|47.35685|
|       |YNN|  9|50.91647|
|       |YNY|  7|48.04489|
|       |YYN| 10|53.23713|
|       |YYY| 12|56.14394|
+-------+---+---+--------+
|Overall|   |100|50.78787|
+-------+---+---+--------+
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:25:38.847

我认为问题在于您正在尝试将两个不同数据集的统计信息结合起来：

1.  按人索引的数据：

    ```
    summary.formula(age~sex, test)

    # age    N=100
    # 
    # +-------+-+---+--------+
    # |       | |N  |age     |
    # +-------+-+---+--------+
    # |sex    |F| 35|49.99930|
    # |       |M| 65|48.96266|
    # +-------+-+---+--------+
    # |Overall| |100|49.32548|
    # +-------+-+---+--------+ 
    ```

2.  汽车索引的数据

在这里，每辆车需要一排；这是创建数据的一种方法，但我相信一定有更好的方法：

```
 var1 <- subset(test, var1 == "Y", c("age", "sex"))
    var2 <- subset(test, var2 == "Y", c("age", "sex"))
    var3 <- subset(test, var3 == "Y", c("age", "sex"))
    var1$var <- "var1"
    var2$var <- "var2"
    var3$var <- "var3"
    vars <- rbind(var1, var2, var3) 
```

然后，汇总统计：

```
 summary.formula(age~var, data=vars)
    # age    N=147
    # 
    # +-------+----+---+--------+
    # |       |    |N  |age     |
    # +-------+----+---+--------+
    # |var    |var1| 47|48.91983|
    # |       |var2| 43|46.31811|
    # |       |var3| 57|49.35292|
    # +-------+----+---+--------+
    # |Overall|    |147|48.32672|
    # +-------+----+---+--------+ 
```

如您所见，`Overall`两个摘要的部分不匹配，因为它们来自两个不同的数据集。（而且不可能按照您的要求将它们组合起来。）

# algorithm - 多短规则模式匹配算法

> ID：10455717
> 
> 赞同：3
> 
> 时间：2012-05-04T20:28:43.067
> 
> 标签：algorithm, pattern-matching

随着标题的推进，我们希望获得一些关于可用于模式匹配的最快算法的建议，并具有以下约束：

长字典：256

短但不固定长度的规则（从 1 到 3 或最多 4 字节深度）

小（150）条规则（如果是 3 个字节）或中等（~1K）如果是 4

比 Snort 中使用的当前 AC-DFA 或 Snort 再次使用的 AC-DFA-Split 更好的性能

基于软件（最近的 COTS 系统，如 E5 的 E3） 理想情况下希望使用一些 SIMD / SSE 的东西，因为目前它们是 128 位宽，并且在不久的将来它们将是 256，而 CPU 的 64

我们通过使用 Sigmatch 论文中显示的算法对 Snort AC 进行预过滤来开始这个项目，但遗憾的是结果并没有那么令人印象深刻（使用 GCC 编译时提高了约 12%，但使用 ICC 则没有）

之后我们尝试通过 IPP 库利用 SSE 4.2 中存在的新模式匹配功能，但根本没有性能提升（猜测直接在机器代码中执行会更好，但肯定会更复杂）

所以回到最初的想法。现在我们正在沿着 Head Body Segmentation AC 的方向工作，但我们知道除非我们替换提议的用于头部的 AC-DFA，否则很难获得改进的性能，但至少能够支持更多规则而无需显着的性能下降

我们知道使用位并行的想法会为长模式使用大量内存，但确切地说问题范围已减少到最多 3 或 4 个字节长，因此使它们成为可行的替代方案

我们特别找到了 Nedtries，但想知道你们的想法或者是否有更好的选择

理想情况下，源代码将使用 C 语言并在开源许可下。

* * *

恕我直言，我们的想法是搜索一次移动 1 个字节的东西以应对不同的大小，但通过利用 SIMD / SSE 可能的大多数并行性并尽可能减少分支来非常有效地做到这一点

我不知道这样做是明智的还是字节明智的

* * *

回到正确的键盘：D

从本质上讲，大多数算法都没有正确利用当前的硬件功能或限制。它们非常缺乏缓存，非常分支，更不用说它们没有利用 COTS CPU 中现在存在的功能，这些功能允许您拥有一定程度的并行性（SIMD，SSE，...）

这正是我们正在寻找的，一种适当考虑所有这些的算法（或现有算法的实现），其优点是不试图覆盖所有规则长度，只是较短的

例如，我看到一些关于 NFA 的论文声称，由于适当的缓存效率、增强的并行性等，现在它们的性能可以与具有更少内存需求的 DFA 相媲美

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:42:31.807

请看一下： [http](http://www.slideshare.net/bouma2) : //www.slideshare.net/bouma2 对 1 和 2 字节的支持与 Baxter 上面写的类似。不过，如果您可以提供您希望在数据库中的单字节和双字节字符串的数量，以及您希望处理的流量类型（互联网、公司等），这​​将有所帮助 - 毕竟，也是许多单字节字符串最终可能会匹配每个字节。Bouma2 的想法是允许将发生统计数据纳入预处理阶段，从而降低误报率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T07:23:02.257

听起来您已经在使用高性能模式匹配。除非你有一些聪明的新算法，或者可以指出数据或规则中的一些统计偏差，否则很难加速原始算法。

您可能会考虑将字符*对*视为模式匹配元素。这将使状态机的分支因子变得巨大，但您可能并不关心 RAM。这可能会给您带来两倍的收益。

当算法耗尽时，人们经常求助于在汇编程序中仔细的手工编码，包括巧妙地使用 SSE 指令。一个可能有助于处理发现的唯一序列的技巧是对元素进行一系列比较，并通过与/或而不是条件分支形成布尔结果，因为分支很昂贵。SSE 说明在这里可能会有所帮助，尽管它们的对齐要求可能会迫使您将它们复制 4 或 8 次。

如果您要搜索的字符串很长，您可能会将规则子集分发到单独的 CPU（线程）。对规则进行分区可能很棘手。

# assembly - 我的 NASM 程序中的错误

> ID：10455719
> 
> 赞同：0
> 
> 时间：2012-05-04T20:28:55.943
> 
> 标签：assembly, x86, nasm

因此，我将通过说我是 NASM 的新手并且正在阅读[http://www.drpaulcarter.com/pcasm/](http://www.drpaulcarter.com/pcasm/)组装教程来限定这一点。

我正在使用 32 位 80x86 作为我的指令集在 Linux（Ubuntu）中编译（我认为......）。

我的程序的目的是从读入的字符串中删除任何不必要的空格。因此，字符串开头的所有空格，以及单词之间的任何双倍或更大的空格。

我的程序几乎完成了一个困扰我的未记录功能。如果我有一个带有两个尾随空格的单词和一个带有一个尾随空格的单词，我的程序将吃掉第二个单词的单个尾随空格。但是这个错误通常不会发生，只有两个空格一个空格排列的第一个实例。

这是我的制作文件：

```
mstrebl  : asm_io.inc  asm_io.o driver.o mstrebl.o
    gcc -o mstrebl -m32 asm_io.o driver.o mstrebl.o

driver.o : driver.c
    gcc -c driver.c -m32

mstrebl.o: mstrebl.asm
    nasm -f elf32 mstrebl.asm 
```

这是在所有教程程序中调用 ASM_MAIN 的 C 程序

```
int main()
{
  int ret_status;
  ret_status = asm_main();
  return ret_status;
} 
```

这是我的 ASM 文件。

```
%include "asm_io.inc"

LF  equ 0Ah

segment .data

name_prompt    DB  'Please enter a string to be trimmed: ',0
out_msg        DB  'The trimmed string is: ',0

segment .bss

in_name    resb  80

segment .text
        global  asm_main
asm_main:
        enter   0,0            ; setup routine
        pusha
restart:

    mov  eax, name_prompt  ; print prompt
    call print_string
    mov  ebx, in_name
                       ;for counting the number of digits
rd_loop:

    call read_char         ; read in the string
    mov  [ebx], al
        inc  ebx
    cmp  al, LF
        jne  rd_loop

    dec  ebx               ; put in null terminator
    mov  byte [ebx], 0
        call print_nl          ; print output msg
        mov  eax, out_msg
    call print_string
        mov  ebx, in_name      ; EBX := address of in_name   

    push in_name
    call strebl             ;this pushes the string onto EAX, destroying old data.

    call print_string 
    add esp, 4

Finished:

        call print_nl
        call print_nl

        popa
        mov     eax, 0         ; return back to C
        leave                     
        ret

; subprogram get_int
; Parameters (in order pushed on stack)
;
;Address of the first character in a string (at [ebp + 8])
; Notes:
; There are no data shifts on the stack, only for the address
; of the array, as such, esp is not changed or shifted.
;
; Note, this destroys the contents of EAX.
; Note, this destroys the contents of CL.

;SUDO CODE!
;j = first address of the string
;if(*char == '\0')
;   return *char
;while((*char + i) == ' ')
;   i += 1 
; 
;
;while((*char + i != ' '))
;{
;   if((*char + i) == '\0')
;       return *char
;
;   (*char + j) = (*char + i)
;   j += 1;
;}
;
;jump to original while

segment .data

temp   db 0

segment .text
 strebl:
    push EBP
    mov  EBP, ESP
    mov  EAX, [EBP + 8] ; I
    mov  EBP, [EAX]     ; J

 First_while:

    cmp byte [EAX], 0
    je  End_strebl
    cmp byte[EAX], ' ' ;or 32 if i need to change it
    jne Second_While

    inc EAX ; i
    jmp First_while

 Second_While:

    cmp byte [EAX], 0
    je  End_strebl    

    cmp byte[EAX], ' '
    je  Second_While_helper

    ;*EBX = *EAX
    mov ECX, [EAX]
    mov [EBX], ECX

    inc EAX ; increment I and J at the same time 
    inc EBX

    jmp Second_While

Second_While_helper:

    inc EAX
    inc EBX

helper_loop:

    cmp byte[EAX], ' '
    jne Second_While

    inc EAX

    jmp helper_loop

End_strebl:
    cmp EAX, EBX
    jz  done_strebl
    mov byte[EBX], ' '

done_strebl:

    mov EAX, [ESP + 8]
    pop EBP
    ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:53:53.457

500- 内部服务器错误在上面的评论中指出了我的错误。

# objective-c - 通过将 NSTextField 附加到它来扩展 NSSlider 类

> ID：10455723
> 
> 赞同：0
> 
> 时间：2012-05-04T20:29:14.017
> 
> 标签：objective-c, macos, nsslider

我想扩展 NSslider 类以附加一个输出文本字段。关于这一点，我想知道是否：

1.  我想要将文本字段附加到 NSSlider 类的方法是完全错误的，并且违反了 MVC 模式；
2.  如果没有错，我应该如何做到这一点？我应该使用类别扩展 NSLider 类吗？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:49:57.127

我不会说你的方法是完全错误的，但是创建一个*包含*滑块和文本字段的视图（或者可能是一个控件）可能会更容易。

听起来您并不想改变滑块的显示方式——您只需要滑块旁边的文本字段，并且字段中的值与滑块的位置相关联，对吧？如果是这样，组合就是要走的路。

# java - 什么是默认 ReflectPermissions 以及如何更改它们？

> ID：10455724
> 
> 赞同：1
> 
> 时间：2012-05-04T20:29:22.023
> 
> 标签：java, security, reflection, permissions

我试图了解在哪些条件下允许调用 Method.setAccessible() 。据我了解文档的各个部分，调用 setAccessible() 会触发 SecurityManager 中的检查，以查看是否允许更改访问修饰符。

鉴于此，我试图找出此权限的默认设置是什么，以及我可以在哪里更改它。在中央 java.policy 文件中，没有提及这些权限，我找不到任何其他生效的策略文件，我也找不到任何有关 SecurityManager 可能应用的默认值的其他文档。

我试图弄清楚这一点的主要原因是我正在使用反射来规避访问修饰符。而且我想知道我必须告诉客户我的代码如何使这项工作为他们工作。

任何提示在哪里查看或有关其工作原理的见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:03:57.000

这都是关于 SecurityManager 的。

默认情况下，没有安装 SecurityManager（这就是所有权限检查检查 SM 可用性的原因）。这是您的默认设置 - 一切都很好。

一些启动器（如小程序环境）将安装一个 SecurityManager，它默认使用基于策略文件的 Policy。您可以在“java.security”文件中更改它。其他环境（如 servlet 容器或 Java EE 容器）也可以安装 SecurityManager。

在此之后，java 安全性就位。默认情况下，您的代码不能再调用“setAccessible”。

要重新启用此功能，您必须更改策略文件（如果默认策略处于活动状态，否则 -> 阅读您正在运行的环境的文档）。使访问器可访问是一个*巨大*的变化 - 因此请仔细检查您的要求和运行时环境的要求是否仍然兼容。例如，对普通小程序进行此更改将严重损害安全性。

```
grant  {
    permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
}; 
```

将启用权限。

# c++ - gcc：可以使用引用访问被破坏的堆栈变量吗？

> ID：10455727
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:29:41.660
> 
> 标签：c++, pointers, gcc, reference, dereference

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

考虑以下简单的 C++ 代码：

```
#include <iostream>

struct Test
{
    Test( int i )
        :   ref( i ),
            ptr( &i ) {}

    int &ref;
    int *ptr;
};

int main()
{
    Test t( 5 );

    std::cout << t.ref << std::endl;
    std::cout << *t.ptr << std::endl;

    return 0;
} 
```

Test 类存储了一个指针和一个对位于堆栈上的局部变量 i 的引用。我会假设我在从 Test 构造函数返回后被破坏了。但显然情况并非如此。因为这是程序的输出：

```
5
134513968 
```

访问指针的结果是我所期望的：每次运行都会更改的随机值。但是引用访问总是导致 5 - 只要局部变量 i 仍然存在。

谁能向我解释这种行为？我在 64 位 Linux（版本 4.6.3）上使用 g++。

问候， enuhtac

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T20:32:24.610

访问像这样被破坏的变量会导致[未定义的行为](http://loungecpp.wikidot.com/faq#toc12)。打印 5 只是巧合；它可能打印了 -4390843 或者`hello world`，让你的电脑崩溃，点燃气氛，或者用你的信用卡买披萨。

此外，试图猜测发生了什么真的没有意义，因为编译器可以在生成程序集时对您的代码做一些*非常*奇怪的事情。这是一个徒劳的练习（但如果你真的想知道所有的比特来自哪里以及它们曾经在哪里，只需调试它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:33:41.303

构造时`t`，您会获得构造期间存储位置的内存地址`i`。当您调用`std::cout << t.ref`时，没有理由将该内存位置用于其他用途，因此该值仍然存在。

但是，这不是您可以信任的。`i`在超出范围后访问该内存位置是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:33:38.883

不保证会立即删除局部变量。它可以保留在内存中。但这是未定义的行为，而且很危险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:32:40.350

我没有仔细检查它，但仅仅因为您从堆栈中弹出并不意味着内容被覆盖或更改，该地址中的值保持不变。之后添加更多方法调用，它应该会改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T20:37:40.540

[这个答案](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)为您如何思考这个问题提供了一个很好的类比：

> 你租了一个旅馆房间。你把一本书放在床头柜最上面的抽屉里，然后去睡觉。您第二天早上退房，但“忘记”归还您的钥匙。你偷了钥匙！
> 
> 一周后，你回到酒店，不办理入住手续，用偷来的钥匙潜入旧房间，然后在抽屉里翻找。你的书还在。惊人！
> 
> **这个怎么可能？如果您没有租过房间，酒店房间抽屉里的东西是不是无法访问？**

# ruby-on-rails - Rails：未使用 haml 正确呈现 SCSS

> ID：10455728
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:29:55.580
> 
> 标签：ruby-on-rails, haml, render, sass

[https://gist.github.com/2597515](https://gist.github.com/2597515)

注意我使用了一个 html to haml 转换器。侧边栏部分与主容器重叠，并且在某些区域填充混乱。这可能是因为我的haml吗？让我知道。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:36:28.243

这肯定是因为您的 Haml 代码。转换器并不完美，也永远不会完美。您必须手动检查生成的代码。

# java - 通用方法——“私有 布尔值 (T[], T[])"

> ID：10455735
> 
> 赞同：5
> 
> 时间：2012-05-04T20:30:24.537
> 
> 标签：java, arrays, generics

我对Java中的泛型真的很陌生。我正在尝试创建一个简单的方法来比较两个相同类型的数组，但我想使用通用方法。我在下面附上了一个MWE：

```
public class MWE {
  public static void main(String[] args){
    int[] test1,test2;
    test1 = new int[2];
    test2 = new int[2];
    checkArray(test1,test2);
  }

  private <T> boolean checkArray(T[] check, T[] test) {
    if(check.length != test.length)
      return false;

    for(int i=0;i<check.length;i++)
      if(check[i]!=test[i])
        return false;

    return true;
  }
} 
```

当我尝试编译时，我得到：

```
MWE.java:6: <T>checkArray(T[],T[]) in MWE cannot be applied to (int[],int[])
    checkArray(test1,test2);
    ^
1 error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T20:33:07.883

泛型仅适用于对象，您必须为原始数组提供重载方法。（其中可以切换到 Integer[]、Boolean[] 等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T20:32:15.873

尝试使用 Integer[] 而不是 int[]。

**更详细地说：**

Java 泛型总是与类一起使用，因此在使用这样的泛型时，您需要使用每种类型的类版本。由于 Java 通过自动装箱自动将 int 值转换为 Integer 对象值，因此除了所用类型的名称之外，您的代码实际上不应该有任何区别。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T20:35:26.713

将您的数组类型和变量更改为`Integer`而不是`int`. 另外，使您的`checkArray`方法静态。

```
public class MWE
{
    public static void main( String[] args )
    {
        Integer[] test1 , test2;
        test1 = new Integer[ 2 ];
        test2 = new Integer[ 2 ];
        checkArray( test1 , test2 );
    }

    private static < T > boolean checkArray( T[] check , T[] test )
    {
        if ( check.length != test.length )
            return false;

        for ( int i = 0 ; i < check.length ; i++ )
            if ( check[ i ] != test[ i ] )
                return false;

        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T20:38:05.470

正如其他人所指出的，泛型仅适用于对象，因此从技术上讲，您可以切换到 using`Integer[]`等`Boolean[]`。

但是，请注意`Integer[]`并`Boolean[]`扩展`Object[]`. 使这个方法泛型实际上没有什么好处，因为`T`总是会被推断为至少是`Object`. 例如，以下仍然编译：

```
Integer[] test1 = new Integer[2];
Boolean[] test2 = new Boolean[2];
checkArray(test1,test2); 
```

调用者需要指定类型参数才能进行检查：

```
this.<Integer>checkArray(test1,test2); //compile error 
```

# java - 将带中断的字符串转换为 Arraylist

> ID：10455738
> 
> 赞同：2
> 
> 时间：2012-05-04T20:30:51.043
> 
> 标签：java

如果我有以下字符串：

```
String string = "My \n name \n is \n John \n Doe"; 
```

我想分隔每个单词并将其添加到数组列表中：

```
ArrayList<String> sentence = new ArrayList<String>(); 
```

我该怎么做？

请记住，换行符可能不是 \n - 它可能是任何东西。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T20:33:05.840

```
String lines[] = String.split("\\n");

for(String line: lines) {
    sentence.add(line);
} 
```

这应该这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T20:33:16.310

```
List<String> list = Arrays.asList(string.split("\\s+")); 
```

*   您正在拆分“任意数量的空白符号”，其中包括空格、换行符等
*   返回的列表是只读的。如果您需要一个新的可写列表，请使用复制构造函数
    `new ArrayList(list)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:32:53.563

您可以使用[`String.split("\\s*\n\\s*")`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)获取`String[]`，然后使用[`Arrays.asList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)。它会得到一个`List<String>`，如果你想要一个`ArrayList`你可以使用构造函数[`ArrayList(Collection)`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#ArrayList%28java.util.Collection%29)

```
String string = "My \n name \n is \n John \n Doe";
String[] arr = string.split("\\s*\n\\s*");
List<String> list = Arrays.asList(arr); 
```

您也可以使用[`Character.LINE_SEPARATOR`](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#LINE_SEPARATOR)代替`\n`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:43:01.657

```
import java.util.Arrays;
import java.util.List;

public class Test
{
    public static void main( String[] args )
    {
        List < String > arrayList = Arrays.asList( "My \n name \n is \n John \n Doe".split( "\\n" ) );
        // Removes the 2 white spaces: .split( " \\n " )
    }
} 
```

# matlab - 比较两个矩阵，如果符合条件则取值

> ID：10455745
> 
> 赞同：0
> 
> 时间：2012-05-04T20:31:31.160
> 
> 标签：matlab, matrix, compare

我有一些问题。我有 2 个矩阵，它的大小相同。例如，第一个矩阵：1

1

0

0

1

0

第二矩阵 34

56

12

12

33

14

然后，我想比较这两个矩阵并按第一个矩阵的标准对其进行分组，这样我将有这两个组矩阵：当第一个矩阵值为 1 时的矩阵

34

56

33

和 Matrix 当第一个矩阵的值为 0

12

12

14

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:38:21.250

你可以试试这个：

```
a = [1 1 0 0 1 0]';
b = [34 56 12 12 33 14]';

b(a==1)
b(a==0) 
```

# sql - 在 MS Access 中选择跳过行的记录

> ID：10455746
> 
> 赞同：6
> 
> 时间：2012-05-04T20:31:35.357
> 
> 标签：sql, ms-access

如何在 MS Access 中选择跳过若干行的数据库中的一些记录。在 MySQL 中是`LIMIT x, y`. 火鸟之类的`FIRST x SKIP y`。。

谷歌一点运气都没有=(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T20:49:50.000

如果您知道要跳过多少条记录，则可以执行以下操作：

```
SELECT *
FROM myTable x
WHERE x.ID NOT IN (SELECT Top 10 id FROM myTable ORDER BY ....)
ORDER BY ... 
```

然后你可以排除你不想要的记录。

如果您随后知道要返回的记录总数，则可以执行以下操作：

```
SELECT Top 50 *
FROM myTable x
WHERE x.ID NOT IN (SELECT Top 10 id FROM myTable ORDER BY ....)
ORDER BY ... 
```

# java - 如何像实际 Java 代码一样执行控制台或 GUI 输入？

> ID：10455752
> 
> 赞同：3
> 
> 时间：2012-05-04T20:32:00.213
> 
> 标签：java, compilation, io, console, runtime

我希望能够以相同的方式或尽可能接近的方式输入要在运行时（执行“持久”程序期间）执行的 java 命令/代码，如果存在，将执行相同的代码在程序的源代码上（作为软件的一部分编程），使用 GUI 元素，如 jTextArea。

* * *

以下 StackOverflow 问题似乎是相关的，但是，连同他们的答案，似乎并不是我想要的。

[如何从 Java 中的控制台类获取输入？](https://stackoverflow.com/questions/4644415/how-to-get-input-from-console-class-in-java)

[在 java 中使用 GUI 进行控制台输入和输出](https://stackoverflow.com/questions/10128309/using-gui-for-console-input-and-outputin-java)

我**不想**“能够从特定的控制台输入触发操作，并将反馈打印到控制台”，这似乎是这些问题和答案中描述的控制台应用程序的情况。

我想要的是“能够从控制台（或 GUI）输入执行我无法预测或控制的实际 Java 代码”。

*注意：这里的“我无法预测也无法控制”是指“开发人员”......但是如果我是输入代码的人，我当然可以预测和“控制”它，就像“用户”所做的那样。*

* * *

由于java使用虚拟机环境，我认为它可能执行“运行时输入代码”......但我不确定这样的事情是否可能。

例如，我希望`for(int i=0; i<3; i++){System.out.println(i);}`在“GUI 控制台”（例如 jTextArea）中的运行时输入，在按下回车键或单击“发送”按钮后，执行（“编译和”？），并给出与原始源代码的一部分相同的输出，因此：

```
0
1
2 
```

所以我想知道以下内容：

*   是否可以？
*   如果是，我该怎么做？（或者，如果不是，最接近的选择是什么？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:34:17.647

您可以使用[JavaCompiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)，因为这个问题的答案指出：

[https://stackoverflow.com/a/935316/420001](https://stackoverflow.com/a/935316/420001)

此外，您想要做`evaluate`的`String`是`code`：

虽然不是很推荐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T20:43:02.487

使用[`JavaCompiler`](http://download.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html). 它可以从`String`.

对于 EG，请参见[STBC](http://pscode.org/stbc/)，尤其是[源代码](http://pscode.org/stbc/#develop)。它提供了一个 GUI，并且可以在按钮单击时编译文本区域中的代码。

![机顶盒图形用户界面](../Images/205d82247f7ed525fda6ab00cfd09944.png)

但请注意：

## [系统要求](http://pscode.org/stbc/#minimumrequirement)

STBC 将在任何具有 1.6+ Java ~~Plug-In~~ * JDK (AKA SDK) 版本的计算机上运行。

(*) STBC 使用的 API 只是编译器的公共接口，`tools.jar`仅与 JDK 一起分发（尽管 JDK 的“公共 JRE”似乎也获得了`tools.jar`. 这导致在运行本机 jar 或 Web 启动应用程序时出现一些不寻常的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:37:19.900

有一个项目叫[BeanShell](http://www.beanshell.org/intro.html)

“简而言之，BeanShell 是动态解释的 Java，加上脚本语言和灵活的环境都整合到一个干净的包中。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T13:15:39.537

我知道这是一个旧答案，但对于未来的 Google 员工：

我会推荐***JavaREPL***，其源代码可在此处获得： [https ://github.com/albertlatacz/java-repl](https://github.com/albertlatacz/java-repl)

*AlmightyR*要求的是 JavaREPL 提供的 Java 语言的 Read-Eval-Print-Loop (REPL) 。

JavaREPL 有一个在线演示：[http ://www.javarepl.com/console.html](http://www.javarepl.com/console.html)

JavaREPL 还有一个 Intellij 插件和一个 CLI 版本，它们都链接到 Github 存储库中。

它目前看起来有点被遗弃，但也许它不需要维护？

# django - DJANGO：如何使用包含多对多字段的模型输出 CSV？

> ID：10455753
> 
> 赞同：1
> 
> 时间：2012-05-04T20:32:09.910
> 
> 标签：django, csv, many-to-many, export, export-to-csv

我有一个“导出为 CSV”按钮，可以导出所有车型。当我将所有汽车导出为 CSV 时，“功能”（例如 AM/FM 收音机、月球车顶、皮革内饰、蓝牙、GPS 等）列显示如下：

```
[<Feature: GPS>, <Feature: Leather>] 
```

我如何摆脱所有其他东西，只拥有“GPS，皮革”？

模型

```
class Features(models.Model):
    name = models.CharField(max_length=20)
    def __unicode__(self):
       return self.name

class Car(models.Model):
    model_name = models.CharField(max_length=20)
    features = models.ManyToManyField(features)
    def __unicode__(self):
       return self.model_name 
```

视图.PY

```
def query(request):
    results = Car.objects.all()
    response = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = 'attachment;filename="car_export.csv"'
    writer = csv.writer(response)
    writer.writerow(['Model Name', 'Features'])
    for x in results:
        writer.writerow([x.model_name, x.role.all()])
        return response 
```

* * *

回答：

楷模：

```
class Features(models.Model):
    name = models.CharField(max_length=20)
    def __unicode__(self):
       return self.name

class Car(models.Model):
    model_name = models.CharField(max_length=20)
    features = models.ManyToManyField(features)
    def __unicode__(self):
       return self.model_name 
```

意见：

```
def query(request):
    results = Car.objects.all()
    response = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = 'attachment;filename="car_export.csv"'
    writer = csv.writer(response)
    writer.writerow(['Model Name', 'Features'])
    for x in results:
        writer.writerow([x.model_name, ', '.join([x.name for x in x.role.all()]),])
        return response 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:47:50.550

取决于您要在`features`模型中打印的字段...您正在查看一个 m2m 管理器 - 它是一个返回查询集接口的助手。如果你想要所有相关的功能，你会想打电话`x.features.all()`

替换为特征模型上的实际字段。

```
csv_features = ','.join([x.MY_FIELD_HERE for x in x.features.all()]) 
```

# shortest-path - 实际保存路线的全对最短路径算法？

> ID：10455754
> 
> 赞同：3
> 
> 时间：2012-05-04T20:32:10.820
> 
> 标签：shortest-path, boost-graph

我正在尝试重写我创建的一个简单的网络负载模拟工具，这次使用 Boost 库来提高性能（并避免实现错误）。在原始程序中，我通过调用 Dijkstra 算法来计算网络中每个源节点的最短路径，所以当我发现有一个像 Johnson 的全对算法时我很高兴（我的图将相对稀疏， 我假设）。然而，该算法只返回一个距离矩阵，而我需要实际的路线——至少类似于 Dijkstra 的算法实现返回的前任地图。有什么方法可以实现这一点，还是我应该返回为图中的每个顶点重复调用 Dijkstra？找了一整天都没找到

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:26:06.997

这是一个老问题，但我也在寻找这个问题的答案，我发现以前的答案有点含糊。

假设您有距离矩阵，并且您想找到从顶点 i 到顶点 j 的最短路径。顶点 i 有一组可能的后继者 N；i 的后继是 N 中**最小化**的顶点：

```
c(i,n) + d(n,j) 
```

其中 c(i,n) 是 i 和邻居 n 之间的边的成本，d(n,j) 是距离矩阵给出的 n 和 j 之间的最短距离。您只需选择最小化上述方程的邻居 n，然后重复该过程，将 i 替换为 n，将 N 替换为 n 的邻居。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:36:18.030

给定距离矩阵，假设每个 (i,j) 对都有一条最短路径，如果节点 w 的电位等于节点 u 的电位加上成本或uw优势。

# java - ResultSet.getTimestamp(String, Calendar) 使用 Calendar 对象线程是否安全？

> ID：10455759
> 
> 赞同：2
> 
> 时间：2012-05-04T20:32:34.827
> 
> 标签：java, oracle, jdbc, thread-safety, timestamp

在从 Oracle ResultSet 检索时间戳时，我必须使用 Calendar 对象。我想在类级别定义日历对象，以便多个线程可以以这种方式使用它的单个实例。我知道 Calendar 本身不是线程安全的，但我不清楚 Oracle 的 ResultSet.getTimestamp(String, Calendar) 实现如何在幕后使用它。查看 MySQL 的源代码，Calendar 严格用于提取 TimeZone 对象（似乎也没有改变），因此对于 MySQL，它似乎是线程安全的。任何人都可以阐明 Calendar 的单个实例是否可以安全地与 Oracle 在多线程环境中实现此方法一起使用？

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
Timestamp ts = rs.getTimestamp("example",cal); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:48:21.937

由于 Oracle 驱动程序不是开源的，所以很难说。我想你可以反编译驱动程序以查看它的作用，但我不会冒险。

首先，我会对您的应用程序进行基准测试，以确定创建`Calendar`. 它可能足够便宜，您不必担心它 - 只需按需创建一个。如果你还是觉得太贵，那就用a`ThreadLocal`来装。假设您使用线程池，那么您将获得重用的`Calendar`对象，而无需担心线程安全。

# java - C/Java/C++ 中互相关函数的任何指针

> ID：10455764
> 
> 赞同：1
> 
> 时间：2012-05-04T20:32:56.917
> 
> 标签：java

我正在开发一个需要实现互相关等功能的项目。如果存在任何开源 API/库，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:40:58.617

试试[Apache 数学库](http://commons.apache.org/math/)。 [http://commons.apache.org/math/userguide/stat.html](http://commons.apache.org/math/userguide/stat.html) 显示：

> org.apache.commons.math3.stat.correlation 包计算数组对或矩阵列的协方差和相关性。Covariance 计算协方差，PearsonsCorrelation 提供 Pearson 的乘积矩相关系数，SpearmansCorrelation 计算 Spearman 的秩相关。

还有较旧的[JAMA 库](http://math.nist.gov/javanumerics/jama/)。

# c# - 以编程方式在datagridview中选择一行

> ID：10455773
> 
> 赞同：1
> 
> 时间：2012-05-04T20:33:46.900
> 
> 标签：c#

我有一个超过 100 行的数据网格，如果用户单击该行的第一列，则必须选择整行，如果他单击任何其他列，则不能选择整行我设置了 datagridview 的选择模式细胞选择并使其也只读并尝试了以下所有代码但发现没有任何用处可以提出任何想法

```
private void tbljobdata_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (tbljobdata.CurrentCell.ColumnIndex == 0)
    {
        tbljobdata.Rows[tbljobdata.CurrentCell.RowIndex].Selected = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:56:23.823

处理鼠标按下事件，因为那是第一个捕获的。

```
private void tbljobdata_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.ColumnIndex == 0)
        tbljobdata.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    else
        tbljobdata.SelectionMode = DataGridViewSelectionMode.CellSelect;
} 
```

在所需条件下也相应地更改只读属性。如果您愿意，实际上可以为单个单元格设置只读属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:45:20.623

请尝试以下代码：

```
private void tbljobdata_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 0)
    {
        tbljobdata.Rows[e.RowIndex].Selected = true;
    }
} 
```

有关`CellClick`事件的进一步阅读，请[参阅 Docs 链接](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.datagridview.cellclick)。

# php - 对象的属性名称中的特殊字符

> ID：10455775
> 
> 赞同：33
> 
> 时间：2012-05-04T20:33:48.417
> 
> 标签：php, syntax

如果我有一个对象包含一个以 % 符号开头的属性，我怎样才能得到它的值。

如果我使用

```
echo $myobject->%myproperty; 
```

我收到一个错误

```
Parse error: syntax error, unexpected '%', expecting T_STRING or T_VARIABLE 
```

我知道我不应该在变量名中使用 % ，但这不是我做的，我坚持下去。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-04T20:35:09.537

```
echo $myobject->{'%myproperty'}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T10:51:21.390

我还有另一种将对象转换为数组的解决方案，这样您就不会出错。

我有一个符号 - 在对象索引上，所以我使用了上述解决方案并获得了成功。

```
$array = (array) $yourObject; 
```

**参考：** [http ://www.php.net/manual/en/language.types.array.php](http://www.php.net/manual/en/language.types.array.php)

# c# - 时间：2019-05-01 标签：c#google weatherxmlget

> ID：10455776
> 
> 赞同：0
> 
> 时间：2012-05-04T20:33:50.193
> 
> 标签：c#, asp.net, google-weather-api

我想从`http://www.google.com/ig/api?weather=`我用这个得到天气

```
 // load xml result from Google weather
    var addr = WebUtility.HtmlEncode("http://www.google.com/ig/api?weather=vilnius&hl=lt");
    XDocument xd = XDocument.Load(addr);

// navigate to current conditions node
var current_conditions = from currentCond in xd.Root.Descendants("current_conditions")
select currentCond;

// navigate to Forecast info node
var forcastInfo = from forecastinfo in xd.Root.Descendants("forecast_information")
select forecastinfo; 
```

我使用 url`http://www.google.com/ig/api?weather=vilnius&hl=lt`但信息是英文的，我找不到问题请帮忙:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:43:52.497

请参阅我对[原始问题](https://stackoverflow.com/questions/10455335/loading-xml-to-an-xdocument-with-a-url-containing-an-ampersand)的回答- 当您获得“amp;hl=lt”查询参数而不是“hl=lt”时，不需要 WebUtility.HtmlEncode。

英文结果：`http://www.google.com/ig/api?weather=vilnius&amp;hl=lt`

非英语结果：`http://www.google.com/ig/api?weather=vilnius&hl=lt`

# mime-types - 没有文本 Mimetypes 的纯文本文件

> ID：10455780
> 
> 赞同：1
> 
> 时间：2012-05-04T20:34:00.273
> 
> 标签：mime-types

`application`即使它们只包含纯文本，也有很多文件类型被归类。例如，`application/javascript`。我在哪里可以找到所有这些错误分类的 mime 类型的列表？

换句话说，我如何确定以纯文本形式查看文件是否安全？

# mysql - 同一列的不同类型

> ID：10455783
> 
> 赞同：5
> 
> 时间：2012-05-04T20:34:13.020
> 
> 标签：mysql, relational-database

我的数据库存储版本号；但是，它们有两种格式：major.minor.build（例如 8.2.0、12.0.1）和日期（例如 YY-MM-DD）。我想到了两种解决方案：

```
+---+---+-----+-----------+ +-----+-----+-----+-----+ +-----+--------+
|...|...|id   |versionType| |id   |major|minor|build| |id   |date    |
|---+---+-----+-----------| |-----+-----+-----+-----| |-----+--------|
|...|...|12345|0          | |12345|0    |1    |2    | |21432|12-04-05|
|---+---+-----+-----------| +-----+-----+-----+-----+ +-----+--------+
|...|...|21432|1          |
+---+---+-----+-----------+ 
```

或者

```
+---+---+-----+-----+-----+-----+--------+
|...|...|id   |major|minor|build|date    |
|---+---+-----+-----+-----+-----+--------|
|...|...|12345|0    |1    |2    |null    |
|---+---+-----+-----+-----+-----+--------+
|...|...|21432|null |null |null |12-04-05|
+---+---+-----+-----+-----+-----+--------+ 
```

这两个看起来都不是特别有效：第一个需要连接两个表才能获得版本号，而第二个每个版本条目浪费的空间是第一个的两倍。或者，我可以将值存储在列中的一些位中，然后在客户端解释它，但我希望有一些我忽略的这种情况的标准做法。

是否有适当的方法在关系数据库中为同一“列”存储两种不同类型的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:57:55.657

您的情况是您有不同类型的版本化对象，一种版本控制使用日期，另一种版本控制使用版本号，还是您的情况是同时使用日期引用相同类型的对象版本并使用版本号？

在第一种情况下，不要费心创建这样一个没有任何用处的人造表。只有当它们解决了真正存在的业务问题时才需要创建表，并且从版本日期到版本号或反之亦然的转换在这种情况下不存在。即使它后来出现，那么你仍然可以......

在第二种情况下，定义一个类似于第二个选项中的表，但是：

没有所有那些愚蠢的无意义的ID。只需留下四列 maj/min/bld/date。不要让它们中的任何一个为空。定义两个键：maj/min/bld 和 date。为每个新构建注册一行，记录构建的创建（/activation/whatever ...）日期。使用 maj/min/bld 构造作为描述您正在管理的版本化对象的任何表中的版本指示符，并且每当收到使用日期完成版本引用的请求时，通过查询将其解析为版本号你的 4 列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:38:01.973

第一个更好。如果您觉得每次进行联接都让您头疼，那么您可以创建一个视图（使用联接）并使用该视图，而不是直接使用表（或每次都进行联接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:41:47.607

我不认为这里有灵丹妙药。如果您坚持使用单个列，则可以天真地将它们都放入 CHAR(10) 中，尽管这有其自身的问题（例如，无效的日期或格式错误的内部版本号字符串等）。

我认为关键问题实际上是您设想运行什么样的查询，以及您希望有多少行？

我会让预期的查询需要驱动数据库设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:50:35.770

您可能可以将数据存储在一个 int/bigint 字段中。但在这种情况下，您将必须转换所有值： Date - 将其转换为从某个日期开始的天数，或者您可以使用 unixtimestamp 版本 - 限制内置值（让它最大 1000），次要（1000 ）。= 主要*1000*1000 + 次要*1000 + 构建

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T21:01:11.880

我会选择第二个选项，因为表格的粒度是一个版本，不管它是如何出现的。将它存储在 3 个数字列和 1 个日期列中应该只有每行 16 个字节（每个数字和日期列 4 个字节) 在像 Oracle 这样的数据库上。如果您的数据库处理虚拟（计算）列，您可以添加一个类似于 nvl(to_char(date),major||'.'||minor||'.'||build) 的列，并始终从其中选择数据格式化为 varchar 或者您可以对其进行查看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T21:12:46.257

这实际上取决于您希望如何在查询中使用此版本号。如果将版本号视为标签就足够了，那么您应该考虑将其存储在 varchar 列中。

如果这还不够，并且您希望能够按版本号排序，事情会变得更加复杂，因为将版本号存储在保留自然排序顺序的数据类型中会更方便。我可能会选择您的解决方案2。有理由担心效率吗？你期待数百万行吗？如果没有，那么你可能不应该太担心。

如果空间、速度和体积是明确的考虑因素，您可以考虑将实际版本号存储为文本标签，并派生一个替代版本号（单个整数），将其存储在用于排序目的的单独列中。

另一方面，如果事实证明某些对象具有版本日期，某些版本号，有时两者都有，我仍然会考虑您的第二个解决方案。如果你真的想要一个 uber-normalized 模型，你可以考虑创建单独的 version_date 和 version_number 表，它们与对象表具有 1:1 的关系。你仍然需要这些连接。不过再一次 - 没有理由担心这一点：数据库擅长连接，这就是它们做得好的地方。

# java - 通过 HTTP 重定向传递数据的选项

> ID：10455789
> 
> 赞同：0
> 
> 时间：2012-05-04T20:34:28.693
> 
> 标签：java, http, response.redirect, post-redirect-get, http-redirect

我正在开发一个 Web 应用程序，需要通过 HTTP 重定向传递数据。例如：

```
http://foo.com/form.html 
```

**发布到**

```
http://foo.com/form/submit.html 
```

如果数据存在问题，则将响应重定向回

```
http://foo.com/form.html?error=Some+error+message 
```

并且查询参数“error”的值显示在页面上。

是否有任何其他可靠的方法可以通过重定向（即 HTTP 标头等）传递数据。

将数据作为查询参数传递是可行的，但并不理想，因为：

*   它的明文（在查询字符串中，所以 SSL 不能依赖于 encyrpt）所以我不想传递敏感数据
*   URI 的长度受到浏览器的限制（尽管长度通常相当长）。

**重要提示：此平台是无状态的，并且分布在许多应用服务器上，因此我无法跟踪服务器端会话对象中的数据。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:37:18.760

我认为根据数据量使用 cookie 将是一个合理的解决方案。因为您无法在服务器端跟踪它（例如，通过使用会话，这会更简单）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:38:10.550

您可以将错误消息存储在服务器上的数据库中并通过 id 引用它：

`http://foo.com/form.html?error_id=42`

如果错误文本得到修复，您甚至不需要使用数据库。

此外，您可以使用[Web Storage](http://www.w3schools.com/html5/html5_webstorage.asp)。您可以使用以下 JavaScript 显示输出页面，而不是使用“位置”标头进行重定向：

```
var error_message = "Something is wrong";
if( typeof(Storage) !== "undefined" ) {
  localStorage.error_message = error_message;
else {
  // fallback for IE < 8
  alert(error_message);
}
location.href = "new url"; 
```

重定向后，您可以`localStorage.error_message`使用 JavaScript 阅读并显示消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T20:42:18.370

从客户端-服务器交互的角度来看，这是一个服务器内部调度问题。

浏览器并不意味着根据[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3)自动重新发布初始请求的实体：“*当且仅当第二个请求中使用的方法是GET或HEAD。* ”

如果还不是这样，请使其成为`form.html`动态文件，使其成为 HTML 静态文件。将`POST`请求发送给自己并在出现错误时预先填写值。或者，您可以`submit.html`使用相同的模板，就`form.html`好像有问题一样。

> 它的明文（在查询字符串中，所以 SSL 不能依赖于 encyrpt）所以我不想传递敏感数据

我不确定这里有什么问题。无论如何，您都是通过纯 HTTP 提交所有内容。Cookie、查询参数和请求实体都将可见。使用[HTTPS 实际上会保护所有这些](https://stackoverflow.com/a/8858241/372643)，尽管查询参数仍然可能是浏览器历史记录和服务器日志的问题（这不是连接的一部分，这是 TLS 保护的）。

# facebook - 如何根据 Facebook 上的用户语言更改选项卡缩略图/图标

> ID：10455794
> 
> 赞同：0
> 
> 时间：2012-05-04T20:34:44.627
> 
> 标签：facebook

我在 Facebook 上有一个自定义应用程序（iframe 应用程序），在该应用程序的主页上有一个页面选项卡。

是否可以根据用户语言在主页上有不同的页面选项卡？我似乎无法找到相关信息，但如果您的 Facebook 语言是英语，我已经看到一些页面显示某些选项卡，如果我将用户语言更改为法语，则会显示这些页面选项卡的不同版本。

关于如何做到这一点的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:37:03.753

据我所知，没有办法做你所描述的事情。您可以设置默认应用缩略图，并且可以按页面设置，但我不相信您可以将其定位到特定的语言环境。

# image - ANN和KNN专家的混合

> ID：10455797
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:35:19.227
> 
> 标签：image, machine-learning, neural-network

我正在寻找一种新的方法来帮助我混合人工神经网络和 k 近邻以提高它们的效率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:17:34.887

您正在寻找[集成方法](http://en.wikipedia.org/wiki/Ensemble_learning)。两种最常见的技术是 bagging 和 boosting。它们通常组合相同类型的多个模型。但是组合不同类型的分类器应该不成问题。

# c++ - C++中的指针和数组

> ID：10455798
> 
> 赞同：0
> 
> 时间：2012-05-04T20:35:21.197
> 
> 标签：c++, arrays, pointers

我理解 C 中指针和数组的概念。我的问题是它们的语法。这是什么：

```
char* var;
char var*; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T20:36:47.817

你的前提是错误的。第一个是指针类型，第二个很好......没什么，它不是有效的 C++（C 也不是）。静态数组更像这样：

```
char var[15]; 
```

另一方面，动态数组通常使用[向量](http://www.cplusplus.com/reference/stl/vector/)来完成。

数组和指针之间的混淆是 C 编程语言的遗留问题，其中`*(a+n)`和`a[n]`含义相同，因此我们可以使用`a[n]`even if`a`是指针，而不是数组。不过，这在 C++ 中不是很惯用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T20:37:18.067

`char* var;`声明`var`为“指向”的指针`char`。`char var*;`不是有效的声明。

一个数组将被声明为：`char var[10];`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T20:42:15.690

这是一个指针：

`char* var;`

这在语法上是不正确的，并且不会编译：

```
char var*; 
```

C++*中的数组和指针不是一回事*，但语法可能会让它们看起来像。您可以像这样在 C++ 中声明一个数组：

```
char ary[] = {'a','b','c'}; 
```

...这是有效的——将创建一个包含 3 个元素的数组。

*您还可以创建一个带有指针*的函数：

```
void foo(char* bar)
{
// ...
} 
```

...并通过它`ary`：

```
foo(ary); 
```

...它将编译并运行良好。这可能会让你相信指针和数组是一回事。但他们不是。 `bar`上面的`foo`不是一个数组——它是一个指向数组第一个元素的指针。

# c - C中的malloc：前后相同的sizeof？

> ID：10455800
> 
> 赞同：3
> 
> 时间：2012-05-04T20:35:39.863
> 
> 标签：c

我遇到了问题。我试图在不传递任何显式参数的情况下获取 int 数组中的元素数，只传递指向 int 数组的指针。现在我的好奇心：

```
int * set;
printf("-- %d --", sizeof(set)); //4
set=(int *) malloc(n*sizeof(int));
printf("-- %d --", sizeof(set)); //4 
```

为什么值是相同的，因为在 malloc 之前它没有被初始化并且在它之后。谢谢
更新：
有没有办法得到一个 int 数组的长度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T20:36:35.997

因为`sizeof`在编译时进行评估并产生 的*类型*的大小`set`，指向`int`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T20:37:58.523

没有通用的方法来测量 C 中指针指向的内存大小，除了字符串按照约定以空值终止的特殊情况。

`sizeof`将产生指针的大小（在 32 位系统上为 4 个字节，在 64 位系统上为 8 个字节），而不是指向的内存。

如果要跟踪分配的内存大小，选项有：

*   在单独的变量中跟踪它
*   引入一个特殊的数组终止符（例如，`int` **如果**您的应用程序**永远不会**有效地使用该值的最小值或最大值。
*   使用备用内存管理库（因为[dmalloc](http://dmalloc.com/)有[dmalloc_examine](http://dmalloc.com/docs/latest/online/dmalloc_13.html#SEC15)，它将返回指向的内存大小）。除了您想使用其扩展内存 API 的地方之外，这些应该只需很少或没有代码更改即可直接使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T20:36:48.537

您正在测量的项目`set`, 是一个指向整数 ( `int*`) 的指针。指向整数的指针是 4 字节。

`sizeof`不**测量**分配给指针的内存量。它仅测量“项目”本身（在本例中为指针）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T20:36:43.937

指针是 32 位或 64 位。

意思是 4 或 8 个字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T20:41:25.843

```
int * set;
printf("-- %d --", sizeof(set)); //4
set=(int *) malloc(n*sizeof(int));
printf("-- %d --", n*sizeof(int)); //n*sizeof(int) is the size of your malloc'd memory 
```

希望有帮助。在您的最后一条语句中，您仍然在询问机器上 4 个字节的单个整数指针的大小。要获得 malloc 内存区域的大小，您需要使用与 malloc 函数内部相同的表达式。

并且整数指针不一定与 int 本身的大小相同，因为 Mat 纠正了我

# php - Kohana 更改密码错误 ORM 驱动程序

> ID：10455803
> 
> 赞同：1
> 
> 时间：2012-05-04T20:35:48.403
> 
> 标签：php, kohana, kohana-orm, kohana-auth

好的，所以我尝试允许用户使用此代码通过管理面板更改密码，但我不断收到

> ORM_Validation_Exception [0]：无法验证数组 ~ MODPATH/orm/classes/kohana/orm.php [1174]

任何人有任何解决方案？这里分别是控制器功能和模型功能和视图

控制器：

```
public function action_edituser() {
    $this->auto_render = false;

    $edit = Model::factory('manageusers');

    $post = $_POST;

    $edit->editUser($post);
} 
```

模型：

```
public function editUser($array) {
    try {
        $user = ORM::factory('user')
                ->where('id', '=', $array['id'])
                ->find()
                ->update_user($array, array(
            'username',
            'password',
            'email',
                ));
        return $this->response('success', 'User Edited');
    } catch (Database_Exception $e) {
        $this->response('error', $e->getMessage());
    }
} 
```

看法：

```
<div class="modal" id="editmodal" style="display: none;">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>Edit User</h3>
    </div>
    <div class="modal-body">
        <?php
        echo Form::open('admin/manageusers/edituser', array('data-function'=> '/admin/manageusers/updategrid', 'data-element' => 'tbody'));

        echo Form::label('username', 'Username');
        echo Form::input('username', null, array('id' => 'username'));

        echo Form::label('email', 'Email');
        echo Form::input('email', null, array('id' => 'email'));

        echo HTML::anchor('#', 'Change Password', array('id' => 'changepass', 'style' => 'display: block;'));
        echo '<div id="passwordchange" style="display: none;">';

        echo Form::label('password', 'Password');
        echo Form::password('password', null, array('id'  => 'password'));

        echo Form::label('password_confirm', 'Confirm Password');
        echo Form::password('password_confirm');
        echo '</div>';
        echo Form::hidden('id', null, array('id' => 'id'));
        ?>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <input type="submit" class="btn btn-success" value="Save changes" />
    </div>
    <?php echo Form::close(); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T15:07:47.290

问题是存在验证错误，这意味着您的输入与模型的规则不匹配。

您需要 catch[`ORM_Validation_Exceptions`](http://kohanaframework.org/3.2/guide/api/ORM_Validation_Exception)并找出导致错误的原因。

```
public function editUser($array) {
    try {
        ...
    } catch (Database_Exception $e) {
        ...
    } catch (ORM_Validation_Exception $e) {
        var_dump($e->errors());
    }
} 
```

# javascript - Dojo 日期限制为每月一天

> ID：10455808
> 
> 赞同：2
> 
> 时间：2012-05-04T20:36:07.887
> 
> 标签：javascript, html, dojo, dijit.form

是否有可能做出限制，只允许每个有效选项的第一天？我想将所有其他日期变灰，但我似乎不知道该怎么做？我试图在 Dojo 的所谓文档中找到有用的东西，但到目前为止还没有运气。我了解将日期发送到最小值和最大值，但这并不能真正解决我的问题。

[http://dojotoolkit.org/reference-guide/1.7/dijit/form/DateTextBox.html](http://dojotoolkit.org/reference-guide/1.7/dijit/form/DateTextBox.html)

这是我一直在玩的：

```
dojo.require("dijit.form.DateTextBox");
```

```
<link href="http://ajax.googleapis.com/ajax/libs/dojo/1.9.3/dojo/resources/dojo.css" rel="stylesheet" />
<link href="http://ajax.googleapis.com/ajax/libs/dojo/1.9.3/dijit/themes/claro/claro.css" rel="stylesheet" />
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.9.3/dojo/dojo.js" djConfig="parseOnLoad:true"></script>

<body class="claro">
  <div name="BeginDate" type="text" data-dojo-type="dijit.form.DateTextBox" constraints="{selector:'date',min:'2012'}" datePattern="dd/MMM/yy" value="@Model.BeginDate">
    <script type="dojo/connect" args="newValue" data-dojo-event="onChange">
    </script>
  </div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:44:20.850

用户可以简单地选择月份而不用担心日期吗？如果是这样，则有一个`dojox.form.MonthTextBox`位于`dojox/form/DateTextBox.js`.

# c# - 为整个 Windows Phone 应用程序设置前台

> ID：10455809
> 
> 赞同：1
> 
> 时间：2012-05-04T20:36:09.913
> 
> 标签：c#, wpf, silverlight, windows-phone

如何更改应用程序中所有控件的前景色？我需要更改颜色：文本框、文本块、按钮边框。

一个一个（超过100个控件）会花费太长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:54:54.677

这就是样式的用途。您可以在`app.xaml`文件中添加样式。就像是：

```
<Application.Resources>
    <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="White" />
    </Style>
    <Style TargetType="TextBox">
        <Setter Property="Foreground" Value="White" />
    </Style>
</Application.Resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:55:03.450

假设您正在为 Windows Phone 7.1 (Mango) 或更高版本进行编程，您可以在文件中使用[样式](http://msdn.microsoft.com/en-us/library/system.windows.style%28v=vs.95%29.aspx)`App.xaml`，在标签中添加以下代码`Application.Resources`并根据需要进行自定义。样式将应用于应用程序中的所有页面（您仍然可以直接在相应的元素标签中覆盖各个属性）。

```
<Application.Resources>
    <Style TargetType="Button">
        <Setter Property="Foreground" Value="Red"/>
        <Setter Property="FontSize" Value="20"/>
    </Style>
    <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="Blue" />
    </Style>
</Application.Resources> 
```

# php - 如何将数组内容放入变量中

> ID：10455810
> 
> 赞同：-1
> 
> 时间：2012-05-04T20:36:10.460
> 
> 标签：php

我想知道如何将数组中的内容放入变量中，例如：

在我的数组 $result 我有这个

```
[0] =>  One
[1] =>  Two
[2] =>  Three 
```

我现在要做的是将此订单保存到变量中。任何人都可以帮助编码吗？

编辑：

我的意思是我想保存订单一、二、三

然后我想创建另一个订单为二、一、三

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:39:29.773

我不知道您是否要将内容或密钥保存到字符串中，对于内容，请使用以下内容：

```
<?php
$var = implode(",", $result);
?> 
```

另一方面，如果你想要钥匙，试试这个：

```
<?php
$res = array_keys($result);
$var = implode(",", $res);
?> 
```

# wcf - MSMQ 和 WCF 合同 - 未来的增强

> ID：10455811
> 
> 赞同：2
> 
> 时间：2012-05-04T20:36:16.713
> 
> 标签：wcf, msmq

我正在创建一个绑定到 MSMQ 的 WCF 服务。这将使用 MSMQ 集成绑定。

现在的计划是将消息放在实现给定接口的 MSMQ 上（即：IPerson）

如果 IPerson 有 3 个属性：

```
string Name
int Age
string address 
```

并使用此合同发送一条消息，WCF 可以很好地读取它并可以处理等...

但是，如果我们将来决定添加一个额外的属性怎么办？

WCF 会无法处理该消息并将其归类为毒药吗？

我怎样才能使服务在某种程度上与未来兼容？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:59:59.630

您可以在数据合同中使用 IExtensibileDataObject 您可以在 msdn 上找到更多信息：http: [//msdn.microsoft.com/en-us/library/system.runtime.serialization.iextensibledataobject.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iextensibledataobject.aspx)

# c# - 在 MonoTouch 中使用 UITableViewDataSource 填充一个简单的 UITableView - 如何使用 UITableViewDataSource

> ID：10455813
> 
> 赞同：8
> 
> 时间：2012-05-04T20:36:27.023
> 
> 标签：c#, ios, uitableview, xamarin.ios

到目前为止，我很喜欢 MonoTouch，但是一旦您完成了一些初学者课程，就会发现缺少文档和示例。

我正在努力解决在 MonoTouch 中填充简单 UITableView 的简单概念。我已经看到了使用自定义单元格执行此操作的示例，并使用不同的信息对列表进行了广泛的自定义，但我只是在寻找如何实现这个简单事情的最低限度。我是一名专业的 .NET 开发人员，并且对 iOS 非常陌生，所以我仍然在思考它是如何工作的。

我只想要以下。创建项目列表 将该项目列表分配给 UITableView 以允许用户滚动列表。寻找一个非常非常简单的例子。

我正在努力解决的最大问题是创建一个 UITableViewDataSource 对象。它是抽象的，所以我无法创建它的实例。我可以创建自己的继承它的类，但我正在寻找框架中的具体实现来使用，而不必创建自己的。我是否被 .NET 宠坏了，必须为其创建一个新类，还是它存在于框架中的某个地方而我只是找不到它？

**[Answer here]** 我找到了答案，但 StackOverflow 不会让我以低于 100 的声誉回答我自己的问题，或者除非我等待 8 小时，否则我不愿意这样做。下面回答：

我创建了以下继承 UITableViewSource 的类。这样做是必要的。GetCell 控制如何在表格上呈现单元格。

创建此实例并传入要填充的字符串列表。

这个例子来自（我稍微修改了一下）我正在从 Wrox Press 阅读的书 - “Professional iPhone Programming with MonoTouch and .NET C#”

```
public class TableViewSource : UITableViewSource
{
    private List<string> rows;

    public TableViewSource (List<string> list) 
    { 
            rows = list; 
    }

    public override int RowsInSection (UITableView tableview, int section) 
    { 
        return rows.Count; 
    }

    public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
    {  
        UITableViewCell cell = new UITableViewCell(UITableViewCellStyle.Default,"mycell"); 
        cell.TextLabel.Text = rows[indexPath.Row];
        return cell;
    } 
} 
```

将以下代码放在屏幕上的 ViewDidLoad 中。

```
var list = new List<String>()
{   
    "San Francisco",    
    "Buenos Aires", 
    "São Paulo"
};

TableViewSource tableData = new TableViewSource(list);
this.tblTrips.Source = tableData; 
```

这给了我我正在寻找的东西，而无需深入研究 MonoTouch.Dialog

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:43:11.380

`UITableView`，以及相关的委托和数据源类型，不是一个非常友好的 API——对于典型的 .NET 开发人员来说更是如此。有时需要它，但在大多数情况下，您会想要使用更简单的东西。

> 创建项目列表 将该项目列表分配给 UITableView 以允许用户滚动列表。寻找一个非常非常简单的例子。

这似乎符合[MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)的目标。该程序集现在随 MonoTouch 一起提供，但您可以在 github 上找到[示例源代码。](https://github.com/migueldeicaza/MonoTouch.Dialog/tree/master/Sample)

Xamarin 的文档网站也有一个使用 MonoTouch.Dialog的[教程和一个不错的](http://docs.xamarin.com/ios/tutorials/MonoTouch.Dialog)[视频](http://g.xamarin.com/2012/02/10/easily-create-ios-user-interfaces-with-monotouch-dialog/)。

# c# - 用于在 C# 中解析文件的数据结构

> ID：10455820
> 
> 赞同：0
> 
> 时间：2012-05-04T20:36:49.563
> 
> 标签：c#, parsing, data-structures

我有一个以下格式的文件，其中包含不同行中的多个条目。DirectorName MovieName GrossRevenue 。例如

```
abc movie1 1mill
xyz movie2 2mill
abc movie3 1mill
abc movie2 4mill 
```

导演姓名重复，电影名也重复（导演1可以导演与导演2同名的电影）？什么是解析文件的最佳方式，同时提供获取细节的能力，比如导演的总收入。我正计划有一个字典词典，比如

```
 Dictionary<string, Dictionary<string,long>> 
```

外部字典的键是导演姓名，内部字典的键是电影名称。我可以通过将我的内部字典包装在自定义类中来使它看起来更好，但我想知道是否有更好的方法来解决这个问题。另外，我将如何设计它，以便以后我的文件添加了其他内容，例如流派、演员等，我仍然不必进行完整的重新设计，同时提供按流派或演员分组的能力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:45:50.557

您可以使用带有通用列表的自定义类，而不是使用字典。

你可以创建一个类

```
public class Director {

 public string StrDirector { get; set; }
 public string StrMovie { get; set; }
 public Long Revenue { get; set; }

} 
```

然后使用

```
List<Director> LstEntity = new List<Director>();
Director objDirector = new Director();
objDirector.StrDirector = "abc";
objDirector.StrMovie = "xyz";
objDirector.Revenue = 1000;
LstEntity.Add(objDirector);

//Add each Director Same way 
```

这样，以后如果需要对director的属性进行任何修改，可以通过更新类轻松进行，没有任何问题。

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:46:35.043

我会先添加一个类

```
public class Movie
{
    public string MovieName {get;set;}
    public DateTime ProductionDate {get;set}
    public decimal Revenue  {get;set;}

    public List<MoviePerson> Stuff {get;set;}
}

public class MoviePerson
{
   public enum PersonType{Actor,Director, ....}

   public string Name {get;set;}
   public string Surname {get;set;}
   public PersonType Duty {get;set}
   ...
} 
```

拥有你的集合`Movies`可以简单地查询它的导演，例如

```
List<Movie> movies = new List<Movie>();
....

MoviePerson director = 
         new MoviePerson {Name = "James",
                                Surname = "Cameron", 
                                   PersonType = Director}
from movie in movies where movie.Stuff.Contains(director) select movie 
```

要完成这项工作，您必须覆盖的默认*参考*比较`MoviePerson`。

这些只是想法，您必须使它们适合您的需求。

希望这可以帮助。

# c# - EventStore 和 RavenDB 持久性 JsonReaderException

> ID：10455823
> 
> 赞同：1
> 
> 时间：2012-05-04T20:37:08.247
> 
> 标签：c#, ravendb, cqrs, event-sourcing, neventstore

试图将[JOliver 的 EventStore](https://github.com/joliver/EventStore)与[RavenDB 连接](http://ravendb.net)起来，但遇到了麻烦。我在 Raven 中创建了一个名为 RavenEventStore 的新数据库。

以下是我的接线图；

```
return Wireup.Init()
           .UsingRavenPersistence("RavenEventStore")
             .UsingAsynchronousDispatchScheduler()
                .DispatchTo(new DelegateMessageDispatcher(DispatchCommit))
           .Build(); 
```

当调用 Wireup.Init() 时，此异常发生在 RavenDb 端；

> 网址：“/indexes/RavenCommitByDate”Newtonsoft.Json.JsonReaderException：解析值时遇到意外字符：。第 1 行，位置 1。在 Newtonsoft.Json.JsonTextReader.ParseValue(Char currentChar) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonTextReader.cs：Newtonsoft.Json.JsonTextReader.ReadInternal 的第 699 行() 在 d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonTextReader.cs:line 499 at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, Type t, JsonConverter propertyConverter) in d:\ Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs：Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType) 中的第 1072 行：

我也可以在 RavenDB 日志中看到异常；

```
Newtonsoft.Json.JsonReaderException: Unexpected character encountered while parsing value: . Line 1, position 1\.   at Newtonsoft.Json.JsonTextReader.ParseValue(Char currentChar) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonTextReader.cs:line 699 at Newtonsoft.Json.JsonTextReader.ReadInternal() in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\JsonTextReader.cs:line 499 at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, Type t, JsonConverter propertyConverter) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 1072 at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 118 at Raven.Database.Extensions.HttpExtensions.ReadJsonObject[T](IHttpContext context) in c:\Builds\raven\Raven.Database\Extensions\HttpExtensions.cs:line 57 at Raven.Database.Server.Responders.Index.Put(IHttpContext context, String index) in c:\Builds\raven\Raven.Database\Server\Responders\Index.cs:line 64 at Raven.Database.Server.Responders.Index.Respond(IHttpContext context) in c:\Builds\raven\Raven.Database\Server\Responders\Index.cs:line 49 at Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) in c:\Builds\raven\Raven.Database\Server\HttpServer.cs:line 477 at Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) in c:\Builds\raven\Raven.Database\Server\HttpServer.cs:line 259 
```

我试图通过删除 UsingAsynchronousDispatchScheduler() 方法来消除所有可能性，并引发相同的错误。我使用的代码严格来自此处的示例： [https ://github.com/joliver/EventStore/blob/master/doc/EventStore.Example/MainProgram.cs](https://github.com/joliver/EventStore/blob/master/doc/EventStore.Example/MainProgram.cs)

有没有人经历过这个？在谷歌上也找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T06:40:16.897

Ryan，您正在使用旧服务器（888 之前）和新客户端（888 或更高版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:45:35.163

您的问题可能与此类似： [EventStore + RavenDB, not deserializing correct](https://stackoverflow.com/questions/9295503/eventstore-ravendb-not-deserializing-correct)

此外，我肯定会建议使用针对 Raven 构建 888（或更高版本）的自定义构建，正如 Oren 所建议的那样，直到我可以针对更新版本的 Raven 发布新版本。

# android - layout_gravity 在 LinearLayout 中不起作用

> ID：10455827
> 
> 赞同：3
> 
> 时间：2012-05-04T20:37:33.223
> 
> 标签：android, android-layout

我有以下代码：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="0dp"
        android:layout_height="150dp"
        android:layout_weight="3"
        android:inputType="textMultiLine" >
    </EditText>

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:layout_weight="1"
        android:text="@string/new_post_txt_description" />
</LinearLayout> 
```

显然`android:layout_gravity="top"`不会向上移动`TextView`。任何人都知道如何实现这一目标？

附言

我看到了一些关于 using 的想法`RelativeLayout`，但在我的情况下，我需要两个控件彼此相邻并使用 weight 属性，如示例中所示。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T21:01:25.257

将 textView 更改为此对我有用

```
<TextView
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:gravity="top"
    android:layout_weight="1"
    android:text="TEST" /> 
```

这利用了重力而不是 layout_gravity，但是由于 textView 的高度设置为 fill_parent 它具有相同的效果

android:gravity 设置其使用的 View 内容的重力。android:layout_gravity 设置视图或布局在其父级中的重力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T21:05:55.923

将您的方向设置`LinearLayout`为水平。IE

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" > 
```

线性布局的全部目的是子视图根据方向一个接一个地出现。我相信默认方向是垂直的。如果您需要在这 2 个下方添加更多子视图，则将它们以`LinearLayout`水平方向包装在另一个中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T04:58:04.850

**`android:orientation="vertical"`如果不添加线性布局，**layout_gravity**不起作用。**

 **例如

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<!-- Your Code Here -->   

</LinearLayout> 
```**

# android - Android 2.3.3 中的 Http 获取请求

> ID：10455831
> 
> 赞同：3
> 
> 时间：2012-05-04T20:37:56.233
> 
> 标签：android, http, get

我需要帮助发送`HTTP GET`请求。我的代码如下：

```
 URL connectURL = new URL("url");
    HttpURLConnection conn = (HttpURLConnection)connectURL.openConnection(); 

    conn.setDoInput(true); 
    conn.setDoOutput(true); 
    conn.setUseCaches(false); 
    conn.setRequestMethod("GET"); 

    conn.connect();
    conn.getOutputStream().flush();      
    String response = getResponse(conn); 
```

但它在`getResponse(conn);`为什么失败？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T20:44:47.093

GET 请求可以这样使用：

```
try {
    HttpClient client = new DefaultHttpClient();  
    String getURL = "http://www.google.com";
    HttpGet get = new HttpGet(getURL);
    HttpResponse responseGet = client.execute(get);  
    HttpEntity resEntityGet = responseGet.getEntity();  
    if (resEntityGet != null) {  
        // do something with the response
        String response = EntityUtils.toString(resEntityGet);
        Log.i("GET RESPONSE", response);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:10:55.227

我正在使用这段代码进行 GET 响应，这对我来说运行良好：

```
HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(requestUrl);

    HttpResponse response=null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e) {
        Log.d(TAG,"1\. "+e.toString());

    } catch (IOException e) {
        Log.d(TAG,"2\. "+e.toString());

    }
    int status_code=response.getStatusLine().getStatusCode();
    Log.d(TAG,"Response Code returned ="+status_code);

    BufferedReader in=null;
    try {
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    } catch (IllegalStateException e) {
        Log.d(TAG,"3\. "+e.toString());
    } catch (IOException e) {
        Log.d(TAG,"4\. "+e.toString());
    }

    StringBuffer sb = new StringBuffer("");
    String line = "";
    String newline = System.getProperty("line.separator");
    try {
        while ((line = in.readLine()) !=null){
            sb.append(line + newline);
        }
        String data = sb.toString();
        Log.d(TAG,data);
    } catch (IOException e) {
        Log.d(TAG,"5\. "+e.toString());
    }
    try {
        in.close();
    } catch (IOException e) {
        Log.d(TAG,"6\. "+e.toString());
    }
    String data = sb.toString();

    try {
        if(status_code==200 || status_code==401){
            JSONObject responseJSONObject = new JSONObject(data);
            responseJSONObject.put("tpg_status_code", status_code);
        }
    } catch (JSONException e) {
        Log.d(TAG,"6\. "+e.toString());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T08:56:21.233

我相信 setDoOutput(true) 自动暗示 POST。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T18:32:42.983

我使用这段代码，它工作得很好：

```
public class HttpGetAndroidExample extends Activity {

            TextView content;
            EditText fname,email,login,pass;

        @Override
        protected void onCreate(Bundle savedInstanceState) {

                  super.onCreate(savedInstanceState);
                 setContentView(R.layout.activity_http_get_android_example);

                 content   =  (TextView)findViewById(R.id.content);
                 fname     =  (EditText)findViewById(R.id.name);
                 email      =  (EditText)findViewById(R.id.email);
                 login       =  (EditText)findViewById(R.id.loginname);
                 pass       =  (EditText)findViewById(R.id.password);

               Button saveme=(Button)findViewById(R.id.save);

        saveme.setOnClickListener(new Button.OnClickListener(){
          public void onClick(View v)
           { 
                      //ALERT MESSAGE
                     Toast.makeText(getBaseContext(),"Please wait, connecting to server.",Toast.LENGTH_LONG).show();

            try{ 

                 // URLEncode user defined data

                   String loginValue    = URLEncoder.encode(login.getText().toString(), "UTF-8");
                   String fnameValue  = URLEncoder.encode(fname.getText().toString(), "UTF-8");
                   String emailValue   = URLEncoder.encode(email.getText().toString(), "UTF-8");
                   String passValue    = URLEncoder.encode(pass.getText().toString(), "UTF-8");

                // Create http cliient object to send request to server

                   HttpClient Client = new DefaultHttpClient();

                // Create URL string

                 String URL = "http://androidexample.com/media/webservice/httpget.php?user="+loginValue+"&name="+fnameValue+"&email="+emailValue+"&pass="+passValue;

                //Log.i("httpget", URL);

               try
                {
                              String SetServerString = "";

                            // Create Request to server and get response

                              HttpGet httpget = new HttpGet(URL);
                             ResponseHandler<String> responseHandler = new BasicResponseHandler();
                             SetServerString = Client.execute(httpget, responseHandler);

                              // Show response on activity 

                             content.setText(SetServerString);
                 }
               catch(Exception ex)
                  {
                         content.setText("Fail!");
                   }
            }
          catch(UnsupportedEncodingException ex)
           {
                   content.setText("Fail");
            }     
        }
    }); 
```

} }

# android - 在android画布中选择性屏蔽

> ID：10455835
> 
> 赞同：0
> 
> 时间：2012-05-04T20:38:05.180
> 
> 标签：android, android-canvas, layer, mask

我有一个画布，如果首先在其上绘制背景图像。然后在背景之上绘制另一个图像。我有一个在屏幕上移动的渐变对象。Gradient 中使用的 Paint 将其 Xfermode 设置为 paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));

该效果有效，但也适用于背景图像。如何避免背景图像受到顶部蒙版的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:12:05.680

油漆将涂在整个画布上。由于您的背景是使用与 Gradient 对象相同的 Canvas 绘制的，因此使用自定义 Xfermode 当然会影响所述背景！

一种可能的解决方案是将您的背景和前景分离到由单独的位图对象支持的 2 个不同的 Canvas 对象中，然后像在 Photoshop 中那样将图层合并在一起。不久前，我在 StackOverflow 上发布了一个示例代码，这是它的链接：

[https://stackoverflow.com/a/10370828/1350375](https://stackoverflow.com/a/10370828/1350375)

# master-data-services - 主数据服务：绕过成员名称和代码输入？

> ID：10455838
> 
> 赞同：0
> 
> 时间：2012-05-04T20:38:09.693
> 
> 标签：master-data-services

我们正在使用 MDS 2008 R2。有谁知道我们可以让 MDS 自动生成名称和代码的方法，通过 MDS 界面，当数据输入人员单击新成员按钮时，他们可以继续输入相关信息。至少对我们来说，数据录入人员不应该为记录提供名称和代码。

我看不出如何做到这一点，但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:36:30.383

您可以使用默认值操作 - [http://msdn.microsoft.com/en-us/library/ee633870(v=sql.105).aspx#Actions](http://msdn.microsoft.com/en-us/library/ee633870(v=sql.105).aspx#Actions) - 为代码默认值。名称不是强制性的。但是，您也可以使用相同的默认值操作来生成名称。在 MDS 2012 中，代码默认设置的工作方式有所改变，但只要您使用的是 2008R2，您就不必担心这一点。

# java - 对由整数对组成的列表进行排序

> ID：10455840
> 
> 赞同：1
> 
> 时间：2012-05-04T20:38:17.170
> 
> 标签：java, sorting

正如标题所示，我有一个由整数对（int ai 和 int bi）组成的列表。我想仅基于 int a 对该列表进行排序，同时保留成对关系。我想知道是否有一种有效的方法可以使用 Java 的一些标准库来做到这一点。提前致谢！

编辑：我的确切实现是`ArrayList<ArrayList<Integer>>`其中每个`ArrayList<Integer>`都有两个整数（ai 和 bi）。很抱歉有任何混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:46:20.513

使用[Collections`sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)或[Arrays`sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator%29)方法，该方法采用 a[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)并使用自定义比较器，该比较器仅检查对中的第一个整数。

像这样的东西（大致取决于您的确切类型）：

```
Collections.sort(myList, new Comparator<IntegerPair>() {
  @Override public int compare(IntegerPair x, IntegerPair y) {
    return x.first - y.first;
  }
}); 
```

由于排序算法是*稳定*的（根据 Javadocs），您的列表将根据您的描述进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:41:09.710

为您的整数对实现[http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)并使用 http://docs.oracle.com/javase/6/ 中的 sort( [) docs/api/java/util/Collections.html](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:41:21.287

我建议创建一个表示整数对的类。这个类应该实现 Comparable。使用 sort() 对其进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-23T03:37:02.340

使用已经定义的 Integer 比较可能更安全一些：

```
Collections.sort(myList, new Comparator<IntegerPair>() {
    @Override public int compare(IntegerPair x, IntegerPair y) {
        return Integer.compare(x.first, y.first);
    }
}); 
```

# objective-c - 初始化器和类工厂方法中的 Objective-C .mm

> ID：10455847
> 
> 赞同：0
> 
> 时间：2012-05-04T20:39:02.070
> 
> 标签：objective-c, factory

这是一个与 Objective-C 内存管理相关的问题。

在[关于内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)页面上有一些示例

```
- (NSString *)fullName {
   NSString *string = [[[NSString alloc] initWithFormat:@"%@ %@",
                                  self.firstName, self.lastName] autorelease];
   return string;
} 
```

第二个

```
- (NSString *)fullName {
   NSString *string = [NSString stringWithFormat:@"%@ %@", 
                                  self.firstName, self.lastName];
   return string;
} 
```

唯一的区别是在第一个示例中调用了初始化程序，而在第二个示例中调用了类工厂方法。

基本内存管理规则部分说，在`alloc`调用后我将拥有我分配的对象。因此，在第一个示例中，我分配了一个对象并同时对其进行了初始化。在此，我拥有该对象并且必须拥有`release`它。在第二个例子中我没有。但是工厂方法不是`stringWithFormat:`在一次调用中做同样的事情吗，我的意思是分配对象并初始化它？

所以主要问题是，为什么我不必在第二个示例中释放对象？实现类工厂方法时有什么特殊的内存管理规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:45:29.480

按照惯例，类工厂方法将返回一个位于自动释放池中的对象。它已经为您完成了 alloc、init、autorelease，就像在第一个示例中一样。除非您保留它，否则当池排空时，它将被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:52:36.993

在第二个示例中，您没有创建字符串。`alloc`您只能通过调用以、`new`、`copy`或开头的方法来创建对象`mutableCopy`。

如果愿意，您可以通过调用 来获得所有权，`retain`但您也需要负责调用`release`。在这个例子中，没有必要。你不再需要这个字符串了。调用者用它做什么是他们的责任。

当像这样调用工厂方法时，您通常会收到一个自动释放的对象。但是你真的不需要考虑这个。因为*您*没有创建它（因为*您*没有使用以`alloc`, `new`,`copy`或`mutableCopy`它不会从你下面消失。由于它只是返回给调用者，因此本例中的答案是否定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:48:52.243

没错，工厂方法在内部调用`alloc`，因此返回保留对象，但它将该对象添加到最近的[自动释放池中](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html#//apple_ref/doc/uid/20000047-CJBFBEDI)，因此当该池被耗尽时，该对象将被释放。

# r - r 创建一个类型使用频率的汇总表

> ID：10455849
> 
> 赞同：1
> 
> 时间：2012-05-04T20:39:10.880
> 
> 标签：r

我有一个`A`带有`name`and的数据框`type`。

```
name    aa  tt  gg  cc  aa  at  ag  ac

 type    3   2   4   3   2   2   3   3 
```

如何创建一个新的排名 data.frame`B`并`type`计算该类型在 data.frame 中出现的次数`A`？

```
count   4   3   1   

type    3   2   4 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:46:01.070

一种选择是`table()`功能。对于您的数据：

```
dat <- data.frame(name = c("aa","tt","gg","cc","aa","at","ag","ac"),
                  type = c(3,2,4,3,2,2,3,3)) 
```

它给：

```
> (tab <- with(dat, table(type)))
type
2 3 4 
3 4 1 
```

现在我们只需要对其进行排序：

```
> sort(tab, decreasing = TRUE)
type
3 2 4 
4 3 1 
```

当然，这些步骤可以组合起来：

```
> with(dat, sort(table(type), decreasing = TRUE))
type
3 2 4 
4 3 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:53:58.297

另外两种可能更快的方法：

```
rev(sort(tapply(dat$type, dat$type, length)))

x <- do.call('data.frame', (rle(sort(dat$type)))); x[order(-x$lengths), ] 
```

编辑：在 Gavin 的数据集上没有，他提出的表格方法是最快的（在 win7 机器上使用微基准测试）：

```
Unit: microseconds
    expr     min      lq  median       uq      max
1    RLE 614.452 650.376 669.971 713.3605 104852.7
2  TABLE 562.664 586.691 607.453 645.9440 128596.5
3 TAPPLY 585.525 626.115 643.144 689.0995 118123.8 
```

# android - 获取最新源

> ID：10455850
> 
> 赞同：0
> 
> 时间：2012-05-04T20:39:21.407
> 
> 标签：android, windows

如何在 Windows 上获取最新的 Android 开源项目 (AOSP) 源代码？

我不想构建，有兴趣查看核心应用程序/服务等来学习在我自己的应用程序开发中使用。

Linux虚拟机是唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:51:46.920

Oracle VM VirtualBox + Debian 6 和软件包 -`git`可`curl`实现全面的无错误存储库同步。

我怀疑是否有更好的方法可以在 Windows 上获取 AOSP。

PS Debian 可以替换为任何其他 Linux 发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:49:57.213

我相信您正在寻找的网站是[http://source.android.com/](http://source.android.com/)。

这里出现了许多有趣的解决方案：[我在哪里可以在线找到 Android 源代码？](https://stackoverflow.com/q/449763/517561)

# ios - iOS 设备的 CSS 媒体查询问题

> ID：10455852
> 
> 赞同：5
> 
> 时间：2012-05-04T20:39:23.720
> 
> 标签：ios, css, media-queries

我设置了以下媒体查询以针对各种 iOS 设备（iPad3、iPad2、iPhone4、iPhone3）。当我用 iPhone3 和 iPad2 加载此页面时，正确的 div 会被着色。但是，当我用 iPad3 加载此页面时，会加载 iPad2 和 iPhone4 样式，但不会加载 iPad3。（目前无法测试 iPhone4。）有什么想法吗？

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
<link rel="stylesheet" href="ipad3.css" media="only screen and (min-device-width:1536px) and (max-device-width:2048px) and (-webkit-min-device-pixel-ratio:2)" type="text/css" />
<link rel="stylesheet" href="ipad2.css" media="only screen and (min-device-width:768px) and (max-device-width:1024px) and (-webkit-min-device-pixel-ratio:0)" type="text/css" />
<link rel="stylesheet" href="iphone4.css" media="only screen and (min-device-width:640px) and (max-device-width:960px) and (-webkit-min-device-pixel-ratio:2)" type="text/css" />
<link rel="stylesheet" href="iphone3.css" media="only screen and (min-device-width:320px) and (max-device-width:480px) and (-webkit-min-device-pixel-ratio:0)" type="text/css" />
</head>

<body>
<div id="ipad3" style="width:200px;height:200px;border:1px solid black"></div>
<div id="ipad2" style="width:200px;height:200px;border:1px solid black"></div>
<div id="iphone4" style="width:200px;height:200px;border:1px solid black"></div>
<div id="iphone3" style="width:200px;height:200px;border:1px solid black"></div>

ipad3 should be RED
<br>
ipad2 should be GREEN
<br>
iphone4 should be BLUE
<br>
iphone3 should be ORANGE
</body>
</html> 
```

..并且4个css文件被相应地编码（这个例子是iPad3.css文件）：

```
#ipad3 { background-color: red; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:47:38.883

因为您将视口的宽度设置为 device-width，所以 iPad3 的屏幕分辨率仍会报告为 1024x768，但 device-pixel-ratio 将为 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:26:41.617

Robbo，您的代码正在使用：`-webkit-min-device-pixel-ratio:0`这是一个无效的语句。非视网膜设备的像素比率为 1。这可能是 iPad 3 选择两种样式表的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:45:25.130

要定位 iPad 3，您可以使用：

```
<link rel="stylesheet" href="ipad3.css" media="only screen and (min-device-width:768px) and (max-device-width:1024px) and (-webkit-min-device-pixel-ratio:1.5)" type="text/css" /> 
```

像素尺寸相同，但与原始 iPad 和 iPad 2 相比，像素比发生了变化。

# c# - NHibernate 抛出“无法解析属性：”，但属性在项目中不存在 *ANYWHERE*

> ID：10455854
> 
> 赞同：4
> 
> 时间：2012-05-04T20:39:33.867
> 
> 标签：c#, nhibernate, nhibernate-mapping

我遇到了一个关于 nHibernate 的奇怪问题……我遇到了这个异常：

```
Unable to resolve property: _Portal 
```

当我尝试提交对象图时。奇怪的是，当我搜索整个解决方案时，我似乎在项目中的任何地方都没有这个特定的属性*？*！

有没有人遇到过这种特殊情况，如果有，他们做了什么来解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T15:59:51.047

在将 nHibernate 升级到 3.3（从 3.1）以及相关库（包括 FluentNhibernate）后，我遇到了同样的问题。我有一个带有子集合的父对象，在修改子集合时，它会抛出您收到的相同异常（使用不存在的“_Namespace”属性名称，其中“命名空间”是我实际命名空间的第一部分）。

在我们的例子中，切换到 SaveOrUpdate() 不是一个选项，因为我们实际上在会话中也加载了这个对象的一个​​版本，所以我们需要 Merge()。

我不知道还有什么相似之处。对我们来说，它是一个带有子集合的父对象，使用 FluentNhibernate。父对象上的映射对于子对象是 Cascade.AllDeleteOrphan()，对于子对象到父对象的映射是 Cascade.None()。

不幸的是，我找不到有关此错误的任何其他报告，因此我们的解决方案是恢复到 nHibernate 3.1（以及相关的二进制文件，如 FluentNhibernate 和 Iesi.Collections）。这是唯一的变化，然后它又可以正常工作了。

**更新在 JIRA [3234] 中记录的错误。**

在 JIRA 中记录了一个错误。该问题尚未获得任何优先权。也许如果您遇到此问题，您可以创建一个帐户并*投票支持要修复的错误*。 [https://nhibernate.jira.com/browse/NH-3234](https://nhibernate.jira.com/browse/NH-3234)

**针对错误 JIRA [3234] 发布的解决方法的更新。**

根据 Ondrej 对 bug 的评论，使用此代码覆盖会话配置上的默认合并侦听器可以暂时解决问题。我确信发布的解决方法将很快正式修复。

```
public class UniDirectionalMergeFixListener : DefaultMergeEventListener
{
    protected override IDictionary GetMergeMap(object anything)
    {
        var cache = (EventCache)anything;
        var result = IdentityMap.Instantiate(cache.Count);

        foreach (DictionaryEntry entry in cache)
            result[entry.Value] = entry.Key;

        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:24:33.063

所以我解决了我的问题，但我不确定为什么这是解决方案。

在我的项目中，我已经将 nHibernate 的使用抽象化到它自己的项目中（*.Objects.nHibernate 是命名空间）。我这样做是因为与我一起工作的客户通常不喜欢使用 nHibernate，我正试图让他们使用它。

发生的事情是这个项目有一些数据模型只附加在系统中......例如，我们从不进行更新。所以，我的“存储库”必须考虑到这一点。

在存储库中的 Commit() 函数中，我序列化对象图，然后反序列化它以制作对象的副本以进行保存。我正在做的是对会话“_Session.Merge(...)”说，当我需要说“_Session.SaveOrUpdate(...)”以使事情正确提交到数据库时...不确定为什么有所作为，但这就是过去两天的答案。

谢谢。为您的帮助 Rippo 和 Nickolay！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T10:53:10.837

此问题的解决方法是从 DefaultMergeEventListener 派生并覆盖以下方法，如下所示：

```
 protected override IDictionary GetMergeMap(object anything)
    {
        var cache = (EventCache) anything;

        var result = IdentityMap.Instantiate(cache.Count);

        foreach (DictionaryEntry entry in cache)
        {
            result[entry.Value] = entry.Key;
        }

        return result;
    } 
```

然后在构建 SessionFactory 时简单地使用此自定义事件侦听器。我已经在相关的 NHibernate 错误报告中发布了更多详细信息：[NH-3234](http://nhibernate.jira.com/browse/NH-3234)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T08:30:35.113

几件事情要检查： -

1.  您的域上是否有一个名为 _Portal 的支持字段？
2.  WORD 是否`portal`存在于您的解决方案中的任何位置？
3.  做一个干净的解决方案，看看你的任何 BIN 文件夹中剩下什么 DLL。
4.  您的 NHibernate 配置是否在构建后被序列化？如果是这样，请检查您使用的是最新版本。

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T09:11:26.503

还有一个想法。NHibernate 允许您在映射中指定如何访问您的支持字段或属性。例如`<property access="nosetter.pascalcase-underscore" name="Timestamp" />`将使 NHibernate 通过字段 _Timestamp 设置值。你的映射中有这样的访问说明符吗？

# asp.net - 将数据保存到用户会话

> ID：10455855
> 
> 赞同：0
> 
> 时间：2012-05-04T20:39:35.063
> 
> 标签：asp.net

我正在一个在线论坛上工作，无论是注册用户还是未注册用户，任何人都可以对特定主题/文章等发表评论......

因此，当用户（注册/未注册）留下他们的评论时，我们有一个后台管理员批准的流程......

所以我的问题是，当用户留下他们的评论时，我想保留他们的评论，直到他们的评论被管理员批准或会话生效

同一个用户可以对一个主题/文章发表一条评论或多条评论......在同一页面上，其他用户会留下不同的评论，这些评论是由管理员批准的......

我想知道最好的处理方法是什么？

例子：

```
[some topic here.........................
 ...................................................]

*comments:*

abc ............................... [pendign approval] //this data will be coming from session

xxxxxxxxxxxxxx......................[approved] //all the approved coming from db

aaaaaaaaaaaaaaaaaa..................[approved]
............
..................
................. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:46:43.383

我认为您不应该为此依赖会话。您可能应该在表中存储具有不同状态的评论状态。

例如：当新发表评论时，将其保存到数据库中，状态为 0 /“待处理”

Wen 管理员批准，将其更改为 1/“已批准”

如果管理员拒绝，请将其更改为 -1/“拒绝”/如果您不想再存储记录，请删除该记录

当页面加载时（对于所有用户/公众），获取按状态过滤的记录

```
SELECT ID,COMMENT FROM COMMENTS WHERE STATUS=1 AND POST_ID=@postId 
```

当页面加载时（对于所有发布评论的用户），获取按状态过滤的记录（现在也包括待处理）

```
SELECT ID,COMMENT FROM COMMENTS WHERE 
 ((STATUS IN =1)
 OR (STATUS =0  AND CREATED_BY=@currentUserId)) 
 AND POST_ID=@postId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:45:51.550

您需要自动为匿名用户分配一个帐户（类似于注册用户的帐户）。当用户注册时，您可以升级他们的帐户。通过这种方式，可以使用相同的过程来显示来自两者的评论。

# linux - linux中的usb插件/输出

> ID：10455859
> 
> 赞同：0
> 
> 时间：2012-05-04T20:39:51.347
> 
> 标签：linux, bash, unix

我使用 udev 和 bash 脚本在 Linux bash 中编写了一个程序。

连接 USB 时，会执行 udev 规则，该规则会调用脚本。该脚本读取 /var/log/messages 文件并从日志文件中获取有关连接的 USB 硬盘驱动器的信息并通过电子邮件发送信息。

程序运行良好，但我遇到了问题。当我尝试移除 USB 时，我必须摇晃它（因为它被牢固地注入内部），所以在移除过程中，它会移除、连接、移除连接，然后最终移除。因此，我的电子邮件格式受到干扰，我没有得到正确的信息。它还会生成多封无用的电子邮件，我得到以下日志：

```
May 04 13:06:13 coil sendEmail[12467]: Email was sent successfully!
May 4 13:06:13 coil vmbackup[12450]: USB Removed: Email sent to backupjobs@domain.com
May  4 13:06:16 coil kernel: [8474935.215393] usb 2-6: USB disconnect, address 126
May  4 13:06:16 coil kernel: [8474935.601292] usb 2-6: new high speed USB device using ehci_hcd and address 127
May  4 13:06:17 coil kernel: [8474935.868637] usb 2-6: configuration #1 chosen from 1 choice
May  4 13:06:17 coil kernel: [8474935.915429] scsi85 : SCSI emulation for USB Mass Storage devices
May  4 13:06:17 coil kernel: [8474935.982734] input: Western Digital My Book as /devices/pci0000:00/0000:00:1d.7/usb2/2-6/2-6:1.1/input/input82
May  4 13:06:17 coil kernel: [8474935.982808] generic-usb 0003:1058:1102.0050: input,hidraw0: USB HID v1.11 Device [Western Digital My Book] on usb-0000:00:1d.7-6/input1
May  4 13:06:17 coil kernel: [8474935.982808] generic-usb 0003:1058:1102.0050: input,hidraw0: USB HID v1.11 Device [Western Digital My Book] on usb-0000:00:1d.7-6/input1
May  4 13:06:17 coil kernel: [8474936.084957] usb 2-6: USB disconnect, address 127
May  4 13:06:17 coil kernel: [8474936.500051] usb 2-6: new high speed USB device using ehci_hcd and address 2
May  4 13:06:17 coil kernel: [8474936.769487] usb 2-6: configuration #1 chosen from 1 choice
May  4 13:06:17 coil kernel: [8474936.815499] scsi86 : SCSI emulation for USB Mass Storage devices
May  4 13:06:18 coil kernel: [8474936.882954] input: Western Digital My Book as /devices/pci0000:00/0000:00:1d.7/usb2/2-6/2-6:1.1/input/input83
May  4 13:06:18 coil kernel: [8474936.883044] generic-usb 0003:1058:1102.0051: input,hidraw0: USB HID v1.11 Device [Western Digital My Book] on usb-0000:00:1d.7-6/input1
May  4 13:06:22 coil kernel: [8474941.837814] scsi 86:0:0:0: Direct-Access     WD       My Book          1028 PQ: 0 ANSI: 4
May  4 13:06:22 coil kernel: [8474941.838208] sd 86:0:0:0: Attached scsi generic sg3 type 0
May  4 13:06:22 coil kernel: [8474941.838208] sd 86:0:0:0: Attached scsi generic sg3 type 0
May  4 13:06:23 coil kernel: [8474941.860051] sd 86:0:0:0: [sdc] 1953525168 512-byte logical blocks: (1.00 TB/931 GiB)
May  4 13:06:23 coil kernel: [8474941.873798] sd 86:0:0:0: [sdc] Write Protect is off
May  4 13:06:23 coil kernel: [8474941.955971]  sdc: sdc1
May  4 13:06:23 coil kernel: [8474942.014853] sd 86:0:0:0: [sdc] Attached SCSI disk
May 04 13:06:23 coil sendEmail[12495]: Email was sent successfully!
May 4 13:06:23 coil vmbackup[12478]: USB Added: Email sent to backupjobs@domain.com
May 04 13:06:26 coil sendEmail[12527]: Email was sent successfully!
May 4 13:06:26 coil vmbackup[12510]: USB Removed: Email sent to backupjobs@domain.com
May 04 13:06:35 coil sendEmail[12546]: Email was sent successfully!
May 4 13:06:35 coil vmbackup[12535]: USB Added: Email sent to backupjobs@domain.com
May 04 13:06:37 coil sendEmail[12576]: Email was sent successfully!
May 4 13:06:37 coil vmbackup[12559]: USB Removed: Email sent to backupjobs@domain.com
May 04 13:06:48 coil sendEmail[12596]: Email was sent successfully!
May 4 13:06:48 coil vmbackup[12585]: USB Added: Email sent to backupjobs@domain.com 
```

现在我知道这不是编码问题。但我想知道我是否能以某种方式解决这个问题？并关心这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:20:17.770

你必须在你的脚本中做一些去弹跳。每当它被调用时，检查它是否最近被调用（< 1 或 2 秒），如果是，不要做任何事情。您可以将文件用作 /tmp 中的时间戳作为时间标记。

像这样的东西可能会起作用：

```
delta=2  # 2 seconds of debounce
stampfile=/tmp/stamp
now=$(date +%s)
then=$(< $stampfile)
[[ -z $then ]] && then=$now
diff=$((now-then))
if [[ $((diff < delta)) ]]; then
   exit
else
   echo $now > $stampfile
fi 
```

# jquery - 使用 .load 加载内容后，JqueryRotate 停止工作

> ID：10455861
> 
> 赞同：1
> 
> 时间：2012-05-04T20:40:00.800
> 
> 标签：jquery, ajax, dynamic, load

我正在使用 AJAX 将内容加载到 div 中，我还没有找到另一种方法来实现我所需要的。我在顶部有一个播放列表，每次用户点击新页面时，歌曲都会重新开始，所以我不得不使用 AJAX 加载内容而不重新加载页面。

然后我遇到了第一个问题：如果我在加载的文件本身中包含 Jquery 和该内容所需的插件，我加载的内容就完美了，在这种情况下，一个滑块，但是当加载内容时**JqueryRotate**停止工作。

我将**JqueryRotate**用于加载内容的按钮，当您将它们悬停时，它会旋转一个圆圈，但是当您单击其中一个按钮时，会加载内容并且旋转不再起作用。**按钮在放置的内容之外。**

客户想要那种旋转效果，所以我不能跳过那个插件（我很乐意，因为其他一切都很完美）。

我同时使用了所有插件，它们运行良好，然后客户要求我在您导航到其他页面时继续播放播放列表，所以我必须加载内容，然后我遇到了第一个问题。

我用于按钮旋转的代码：

```
$("#boton").hover( 
   function () {
            $(".img").rotate({animateTo:180})
        },
         function () {
            $(".img").rotate({animateTo:0})
        }
); 
```

这是另一个下拉菜单：

```
 $('#boton').click(function () {
$('#dsubmenu').toggle(),
$('.tsubmenu, .tmsubmenu').hide();}); 
```

我有什么选择？我应该搜索另一个插件吗？我一直在浏览，这个是最小和最有效的。我不想为了一个按钮而改变整个网站，所以 CSS3 可能是另一种选择？提前感谢您的回答！

[编辑已解决！：我将解决方案留在这里，以防有人遇到类似问题]

我做了 Guffa 在这篇文章中所说的（http://stackoverflow.com/questions/6186483/apply-jquery-functions-to-loaded-elements）：

> 您可以在加载调用中放置一个回调，当添加新内容时将调用该回调： `$("#load_cheque").load("./server/mode_paiement.php?cheque=1", function(){ // Here you can fix the loaded content });`

我将所有插件的 .js 包含在带有 header.js 的主 xhtml 中，然后我通过 AJAX 加载内容并在回调中添加了滑块工作的功能，与其他页面相同。谢谢古法！你救了我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:48:22.993

尝试使用`.getScript`（[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)）

# python - 使用 cx_Oracle 制作字典列表

> ID：10455863
> 
> 赞同：19
> 
> 时间：2012-05-04T20:40:26.180
> 
> 标签：python, oracle, cx-oracle

我一直在使用以下函数来制作“更具可读性”（据称）的格式，用于从 Oracle 获取数据。这是功能：

```
def rows_to_dict_list(cursor):
    """ 
    Create a list, each item contains a dictionary outlined like so:
    { "col1_name" : col1_data }
    Each item in the list is technically one row of data with named columns,
    represented as a dictionary object
    For example:
    list = [
        {"col1":1234567, "col2":1234, "col3":123456, "col4":BLAH},
        {"col1":7654321, "col2":1234, "col3":123456, "col4":BLAH}
    ]
    """

    # Get all the column names of the query.
    # Each column name corresponds to the row index
    # 
    # cursor.description returns a list of tuples, 
    # with the 0th item in the tuple being the actual column name.
    # everything after i[0] is just misc Oracle info (e.g. datatype, size)
    columns = [i[0] for i in cursor.description]

    new_list = []
    for row in cursor:
        row_dict = dict()
        for col in columns:
            # Create a new dictionary with field names as the key, 
            # row data as the value.
            #
            # Then add this dictionary to the new_list
            row_dict[col] = row[columns.index(col)]

        new_list.append(row_dict)
    return new_list 
```

然后我会使用这样的功能：

```
sql = "Some kind of SQL statement"
curs.execute(sql)
data = rows_to_dict_list(curs)
#
for row in data:
    item1 = row["col1"]
    item2 = row["col2"]
    # Do stuff with item1, item2, etc...
    # You don't necessarily have to assign them to variables,
    # but you get the idea. 
```

虽然这似乎在不同程度的压力下表现得相当好，但我想知道是否有更有效或“pythonic”的方式来做到这一点。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-04T20:53:25.743

还有其他改进需要做，但这真的让我大吃一惊：

```
 for col in columns:
        # Create a new dictionary with field names as the key, 
        # row data as the value.
        #
        # Then add this dictionary to the new_list
        row_dict[col] = row[columns.index(col)] 
```

除了低效之外，`index`在这种情况下使用还容易出错，至少在相同项目可能在列表中出现两次的情况下。改用`enumerate`：

```
 for i, col in enumerate(columns):
        # Create a new dictionary with field names as the key, 
        # row data as the value.
        #
        # Then add this dictionary to the new_list
        row_dict[col] = row[i] 
```

但那是小土豆，真的。这是这个函数的一个更紧凑的版本：

```
def rows_to_dict_list(cursor):
    columns = [i[0] for i in cursor.description]
    return [dict(zip(columns, row)) for row in cursor] 
```

让我知道这是否有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-29T20:09:13.133

为了避免预先转储列表中所有内容的内存使用的干净方法，您可以将游标包装在生成器函数中：

```
def rows_as_dicts(cursor):
    """ returns cx_Oracle rows as dicts """
    colnames = [i[0] for i in cursor.description]
    for row in cursor:
        yield dict(zip(colnames, row)) 
```

然后使用如下 - 来自游标的行在迭代时被转换为字典：

```
for row in rows_as_dicts(cursor):
    item1 = row["col1"]
    item2 = row["col2"] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-08T21:48:34.237

您不应该将 dict 用于大型结果集，因为内存使用量会很大。我经常使用 cx_Oracle，但没有一个很好的字典游标困扰着我，无法为它编写一个模块。我还必须将 Python 连接到许多不同的数据库，所以我以一种可以与任何 DB API 2 连接器一起使用的方式进行操作。

它依赖于 PyPi [DBMS - 数据库变得更简单](https://pypi.python.org/pypi/dbms/)

```
>>> import dbms
>>> db = dbms.OraConnect('myUser', 'myPass', 'myInstance')
>>> cur = db.cursor()
>>> cur.execute('SELECT * FROM people WHERE id = :id', {'id': 1123})
>>> row = cur.fetchone()
>>> row['last_name']
Bailey
>>> row.last_name
Bailey
>>> row[3]
Bailey
>>> row[0:4]
[1123, 'Scott', 'R', 'Bailey'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T01:29:02.917

假设光标“Cursor”已经定义并且急于去：

`byCol = {cl:i for i,(cl,type, a, b, c,d,e) in enumerate(Cursor.description)}`

那么你可以去：

`for row in Cursor: column_of_interest = row[byCol["COLUMN_NAME_OF_INTEREST"]]`

不像系统自己处理它那样干净和流畅，但并不可怕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-24T00:41:09.020

创建一个字典

```
cols=dict()
for col, desc in enumerate(cur.description):
    cols[desc[0]] = col 
```

访问：

```
for result in cur
    print (result[cols['COL_NAME']]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-26T04:31:13.327

我有一个更好的：

```
import cx_Oracle

def makedict(cursor):
"""Convert cx_oracle query result to be a dictionary   
"""
cols = [d[0] for d in cursor.description]

def createrow(*args):
    return dict(zip(cols, args))

return createrow

db = cx_Oracle.connect('user', 'pw', 'host')
cursor = db.cursor()
rs = cursor.execute('SELECT * FROM Tablename')
cursor.rowfactory = makedict(cursor) 
```

# apache-flex - 无法加载 WSDL。如果当前在线，请验证 WSDL 的 URI 和/或格式

> ID：10455866
> 
> 赞同：0
> 
> 时间：2012-05-04T20:40:46.390
> 
> 标签：apache-flex

我们有一个调用 Web 服务的 Flex Air 应用程序，有时会出现以下错误：

**无法加载 WSDL。如果当前在线，请验证 WSDL 的 URI 和/或格式**

它在 OS X 上更为频繁，但它也确实发生在 Windows 上。有问题的 Web 服务很好，因为它不会一直发生，我认为这不是配置问题。

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:27:39.920

原来我们负载均衡器的超时时间只有 30 秒。我们把它提高了一个小时，我们再也没有看到这个问题。我仍然希望 BlazeDS 没有会话选项。

# windows - Ec2 在启动时将用户数据传递给 Windows 实例

> ID：10455871
> 
> 赞同：2
> 
> 时间：2012-05-04T20:41:25.127
> 
> 标签：windows, powershell, amazon-ec2

似乎有几种不同的方法可以在启动时将数据传递到 Windows 服务器实例。亚马逊现在似乎支持在启动时将命令传递给实例，如本文所述：[https ://forums.aws.amazon.com/message.jspa?messageID=342135#342135](https://forums.aws.amazon.com/message.jspa?messageID=342135#342135)

我用来启动实例的 .NET 代码是在 Visual Studio 2010 的 Amazon AWS 控制台项目中创建的

```
RunInstancesResponse InstanceResponse =  
amazonEC2Client.RunInstances(new RunInstancesRequest()

.WithImageId("ami-9c9f3af5")
.WithInstanceType("t1.micro")
.WithKeyName("yahoo data instance")
.WithMinCount(1)
.WithMaxCount(1)
.WithUserData(Convert.ToBase64String(Encoding.UTF8.GetBytes
(<script>powershell 
Set-ExecutionPolicy Restricted</script>")))); 
```

似乎我放在脚本标签之间的任何内容都不会运行。如果有人对此有任何想法或尝试使用它，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:03:13.287

看来这只是在 2012 年 5 月 10 日添加到 AWS AMI 的 Windows 系列中。再试一次？

资料来源：“最新消息 > 2012.05.10”，[https: //aws.amazon.com/amis/microsoft-windows-server-2008-r2-with-sql-server-standard-2008-r2](https://aws.amazon.com/amis/microsoft-windows-server-2008-r2-with-sql-server-standard-2008-r2)

# .htaccess - .htaccess 文件中需要 301 重定向规则

> ID：10455874
> 
> 赞同：0
> 
> 时间：2012-05-04T20:41:35.623
> 
> 标签：.htaccess, redirect

我即将将电子商务商店从 oscommerce 更改为 magento。

我保持 url 结构相同，但需要重写产品和类别 url。

我需要这个：

`some-product-url-p-123.html`

写到这里：

`some-product-url.html`

和类别是一样的原理：

`some-category-url-c-123.html`

至：

`some-category-url.html`

我一直在努力解决这个问题，花了几个小时寻找但找不到任何东西。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:57:38.047

这种模式应该适合你：-

```
RewriteEngine on
RewriteBase /

RewriteRule ^(.*)?-[pc]-\d+\.html$         $1.html [NC,L] 
```

# c#-4.0 - 使用 OpenXML SDK 在 Excel 中选择和编辑单元格

> ID：10455875
> 
> 赞同：0
> 
> 时间：2012-05-04T20:41:41.317
> 
> 标签：c#-4.0, openxml-sdk

我基本上是将数据集中的信息插入到 Excel 文档中。我们真的不想使用互操作服务，所以我最好的选择是使用 OpenXML SDK。

基本上我需要做的就是根据 id/name/whatever 选择一个单元格（我宁愿不使用标准的“A1”格式），然后在其中插入一些东西。但是对于我的生活，我无法弄清楚如何根据属性值获取一组单元格元素。

第 2 部分是我需要合并某些单元格。这更容易做到，因为它只需将一组 mergecell 元素附加到 mergecells 表。但我希望确保合并范围内的任何单元格都不是另一个合并单元格范围的一部分，因为这会导致问题。

我觉得这是一个非常强大的工具，但是缺乏文档和示例使它成为一个难以处理的主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:30:16.740

似乎编辑 excel 文档最简单的界面是[ClosedXML 库](http://closedxml.codeplex.com/)。

在每个工作表中搜索特定单元格要容易得多。您还可以搜索命名范围。

它会通过删除与最新合并范围冲突的任何先前合并范围来自动处理单元格合并。

# android - 在 Android 中将我的 EditText 旋转 90 度

> ID：10455878
> 
> 赞同：0
> 
> 时间：2012-05-04T20:41:48.447
> 
> 标签：android, android-edittext, rotation

我在 Android 中有一个 EditText。想要旋转 90 度。我知道它可以通过动画类来完成。请看我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T20:59:36.940

旋转视图有很多方法。使用动画是一种选择。

```
 EditText et = (EditText) findViewById(R.id.editText1);        
    Animation an = new RotateAnimation(0.0f, 90.0f, 100, 100);
    an.setDuration(90);             
    an.setRepeatCount(0);               
    an.setFillAfter(true);               // keep rotation after animation
    et.setAnimation(an);                 //apply animation to EditText 
```

# c# - XmlDeserialize 基于属性值的条件反序列化

> ID：10455881
> 
> 赞同：2
> 
> 时间：2012-05-04T20:42:09.490
> 
> 标签：c#, xml, xml-serialization

我正在尝试反序列化以下 XML：

```
<Test><string name="Name">Test name</string><string name="Description">Some fake description.</string></Test> 
```

进入下一班。

```
[XmlRoot("Test")]
public class Test
{
 [XmlElement("string")]
 public string Name;

 [XmlElement("string")]
 public string Description;
} 
```

使用我正在使用的代码。

```
var xml = @"<Test><string name=""Name"">Test name</string><string name=""Description"">Some fake description.</string></Test>";
XmlReader reader = new XmlTextReader(new StringReader(xml));
XmlSerializer serializer = new XmlSerializer(typeof(Test));
serializer.Deserialize(reader); 
```

当我运行它时，我会收到带有消息的 InvalidOperationException

> 反映类型“测试”时出现错误。

如果我注释掉 Description 属性，它就可以工作。我可以获取属性值或文本，但不能只获取元素为字符串且“名称”属性具有特定值的 XmlText。

这甚至可能不使用 LINQ 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:05:46.067

根据我的评论：

> 如果不改变某些东西，肯定无法做到这一点。当它是“字符串”元素的属性时，您告诉 .NET 描述是一个元素。使用 LINQ

这是 LINQ 的示例，扩展 XML 并将其与类分离非常简单（这通常是一件好事！）。

```
var xml = @"<Test><string name=""Name"">Test name</string><string name=""Description"">Some fake description.</string></Test>";
var xdoc = XDocument.Parse(xml);

var output = from test in xdoc.Elements("Test")
             let strings = test.Elements("string").ToDictionary(e => e.Attribute("name").Value, e => e.Value)
             select new Test () { Name = strings["Name"],
                                  Description = strings["Description"] }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:49:02.153

原因是您没有按预期使用 XmlElement，元素名称“字符串”在类中必须是唯一的。不考虑“名称”属性。

因此，总而言之，无法自动反序列化该 xml 文档，您需要自己实现反序列化方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:51:16.773

为此，您需要：

```
public class Foo {
    [XmlAttribute("name")]
    public string Name {get;set;}
    [XmlText]
    public string Value {get;set;}
} 
```

然后，在父类型中：

```
[XmlRoot("Test")]
public class Test
{
    [XmlElement("string")]
    public List<Foo> Items {get;set;}
} 
```

这是您可以处理该形状 XML 的唯一方法，除非您使用`IXmlSerializable`（非常困难）。

# python - 删除特定字符串

> ID：10455898
> 
> 赞同：0
> 
> 时间：2012-05-04T20:43:09.400
> 
> 标签：python

我有以下代码块。我可以在写之前有一行删除特定字符串吗？

```
while str(line).find("ii") < 0:
    if str(line)[0].isdigit():
        if str(line).find("No Action Taken") < 0 and str(line).find("Existing IV Retest") < 0:
            #<----LINE HERE TO REMOVE ANYTHING I SPECIFY------> example anything in brackets [),(,&,&,#,@]
            f.write(str(line).strip())
            f.write(',') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:49:30.177

你的问题有点神秘，但我认为你正在寻找正则表达式。

如果要从字符串中删除括号内的任何内容：

```
import re
line = "hello [delete this] there!"
line = re.sub(
              r"""(?x)  # Verbose regex:
              \[        # Match a [
              [^][]*    # Match zero or more (*) characters except (^) ] or [
              \]        # Match a ]""", 
              "", line) 
```

结果：

```
line == 'hello  there!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:52:13.697

假设我理解正确：

正常方式：

```
for i in [')','(','&','&','#','@']:
    line = line.replace(i,'') 
```

单线方式：

```
line = reduce(lambda a,b: a.replace(b,''), [')','(','&','&','#','@'], line) 
```

例子：

```
>>> line = "blah!@#*@!)*%^(*%^)@*(#$)@#*$)@#*@#)@$*)@!*#)@#@!)#*%$)$#%$%blah"
>>> line = reduce(lambda a,b: a.replace(b,''), [')','(','&','&','#','@'], line)
>>> print line
blah!*!*%^*%^*$*$*$*!*!*%$$%$%blah 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T20:53:02.497

用于`line = line.replace('#', '')`从字符串中删除“#”。您可以对要删除的所有字符（不是特别是字符顺便说一句）重复该语句。

但是，更好的是使用正则表达式（也适用于更复杂的模式），可以通过`re`Python 中的包获得。

就像是：`line = re.sub(re_pattern, "", line)`

# c# - Java Annotation C# 等价物

> ID：10455900
> 
> 赞同：22
> 
> 时间：2012-05-04T20:43:32.653
> 
> 标签：c#, java, .net, annotations

> **可能重复：**
> [Java Annotations 和 C# Attributes 之间有什么异同？](https://stackoverflow.com/questions/553857/what-are-the-similarities-and-differences-between-java-annotations-and-c-sharp-a)

目前我们正在将一个 Java 项目翻译成 C#，但是我们在找出 Java 注释的 C# 等价物时遇到了问题。我们如何将与此 java 代码完全相同的内容写入 C#？：

```
public @interface LatitudeAnnotation {
    public String author() default "Themaopdracht 7 tester";
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-04T20:44:21.793

[属性之](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/attributes/)于 C# 就像注解之于 Java

# c# - 将数据源绑定到 datagridview

> ID：10455901
> 
> 赞同：0
> 
> 时间：2012-05-04T20:43:37.090
> 
> 标签：c#, winforms, data-binding

我在 winform 中使用 .net 4.0 c#。现在我使用存储过程向数据库中插入新行。显然，我对 asp.net 和 windows 窗体之间的绑定步骤感到困惑。在 asp.net 中它非常简单，但在 winform 中似乎我们必须使用**BindingSource**对象？？？

这意味着在winform中我们必须使用不同的方式。下面的代码是我在asp.net中用来插入新记录和绑定的。如何重写它以将数据源绑定到 datagridview。

```
public void ExecuteNonQuery(string storedProcedure, Dictionary<string, object> parameters)
    {
        using (SqlConnection conn = new SqlConnection(_connectionString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(storedProcedure, conn))
            {
                cmd.CommandType = CommandType.StoredProcedure;
                if (parameters != null)
                {
                    foreach (string parameter in parameters.Keys)
                    {
                        cmd.Parameters.AddWithValue(parameter, parameters[parameter] ?? DBNull.Value);
                    }
                }
                cmd.ExecuteNonQuery();
            }
            conn.Close();
        }
    } 
```

设置好参数后，调用如下：

```
 DBAccess dbaccess = new DBAccess(connString);
        dbaccess.ExecuteNonQuery("InsertStoredProcedure", parameters); 
```

我不知道如何将数据库绑定到 datagridview。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:55:27.283

如果您将行插入数据库，则需要再次从数据库中获取行。使用另一个存储过程（使用 SELECT 查询）。

您正在使用 ExecuteNonQuery，这意味着您没有从数据库中查询任何内容。所以它不会以网格的形式给你结果。但它只会返回一个整数，其中包含受影响的行数。

所以我的建议是在插入行之后，编写另一个查询以使用 cmd.ExecuteReader() 获取行并将 SqlReader 对象绑定到 Grid。

我希望这能解决你的问题。

# ruby-on-rails - heroku staging 或 heroku 中的新应用程序用于登台？

> ID：10455902
> 
> 赞同：5
> 
> 时间：2012-05-04T20:43:44.447
> 
> 标签：ruby-on-rails, heroku, production, staging

为我的应用程序创建暂存环境有什么想法，或者我应该在 heroku 上创建第二个应用程序进行暂存？哪个更好，或者更受欢迎？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T20:55:03.460

第二个应用程序 - 将新应用程序的 git 远程添加到您的存储库，以便您可以从单个代码库部署到它。

阅读更多[https://devcenter.heroku.com/articles/multiple-environments](https://devcenter.heroku.com/articles/multiple-environments)

# c++ - 为什么 CLOCKS_PER_SEC 不是每秒的实际时钟数？

> ID：10455905
> 
> 赞同：33
> 
> 时间：2012-05-04T20:43:58.327
> 
> 标签：c++, clock, system-clock

我刚刚编写了这个简短的 C++ 程序来估计每秒的实际时钟滴答数。

```
#include <iostream>
#include <time.h>

using namespace std;

int main () {

    for(int i = 0; i < 10 ; i++) {

        int first_clock = clock();
        int first_time = time(NULL);

        while(time(NULL) <= first_time) {}

        int second_time = time(NULL);
        int second_clock = clock();

        cout << "Actual clocks per second = " << (second_clock - first_clock)/(second_time - first_time) << "\n";

        cout << "CLOCKS_PER_SEC = " << CLOCKS_PER_SEC << "\n";

    }

    return 0;

} 
```

当我运行程序时，我得到如下所示的输出。

```
Actual clocks per second = 199139
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 638164
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 610735
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 614835
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 642327
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 562068
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 605767
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 619543
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 650243
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 639128
CLOCKS_PER_SEC = 1000000 
```

为什么每秒的实际时钟滴答数与 CLOCKS_PER_SEC 不匹配？他们甚至不大致相等。这里发生了什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-04T20:54:36.897

`clock`返回在程序中花费的时间*。*每秒总共有 1,000,000 个时钟滴答^*。看来您的程序消耗了其中的 60%。

其他的 40% 被其他人使用。

^*[好的，每秒*几乎有 1,000,000 个时钟滴答。*实际数字已标准化，因此您的程序可以感知 1,000,000 个滴答声。]

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-04T20:47:13.120

从手册页`clock(3)`：

> POSIX 要求 CLOCKS_PER_SEC 等于 1000000，与实际分辨率无关。

至少在这方面，您的实现似乎遵循 POSIX。

在这里运行你的程序，我明白了

```
Actual clocks per second = 980000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 990000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 1000000
CLOCKS_PER_SEC = 1000000 
```

或空闲机器上的类似输出，并输出类似

```
Actual clocks per second = 50000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 600000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 530000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 580000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 730000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 730000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 600000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 560000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 600000
CLOCKS_PER_SEC = 1000000
Actual clocks per second = 620000
CLOCKS_PER_SEC = 1000000 
```

在繁忙的机器上。由于`clock()`测量了程序中花费的（大约）时间，因此您似乎在一台繁忙的机器上进行了测试，而您的程序仅获得了大约 60% 的 CPU 时间。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-09T22:31:58.893

1.  POSIX 中的 CLOCKS_PER_SECOND 是一个等于 1000000 的常数。
2.  CLOCKS_PER_SECOND 不应该显示进程中的时钟数。它是一个分辨率数字，您可以使用它来将时钟数转换为时间量。（有关 clock() 函数，请参见手册页）

例如，如果您计算：

(second_clock-first_clock)/CLOCKS_PER_SEC

您将获得第一次和第二次调用“clock()”函数之间的总时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-16T13:10:46.247

**C99标准**

[C99 N1256 标准草案](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)唯一提到`CLOCKS_PER_SEC`的是：

> CLOCKS_PER_SEC 扩展为类型为 clock_t 的表达式（如下所述），它是时钟函数返回的值的每秒数

正如其他人提到的，POSIX 将其设置为 100 万，这将其精度限制为 1 微秒。我认为这只是以兆赫兹为单位测量最大 CPU 频率的日子的历史值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-18T00:31:44.510

当你设置 *int first_time = time(NULL);* , time(NULL) 可能是“1 纳秒之外”，（因为它被截断了），从转 +1 开始。因此，: *while(time(NULL) <= first_time) {}* 可以比 1 秒更快地跳过，比您预期的要快。

这就是为什么在你的那“1 秒”中时钟更少的原因。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-04T21:04:33.383

嗯嗯。你不知道你开始计时的当前秒有多远，是吗？所以你可以得到从 1 到 CLOCKS_PER_SEC 的任何结果。在你的内部循环中试试这个：

```
int first_time = time(NULL);
// Wait for timer to roll over before starting clock!
while(time(NULL) <= first_time) {}

int first_clock = clock();
first_time = time(NULL);
while(time(NULL) <= first_time) {}

int second_time = time(NULL);
int second_clock = clock();

cout << "Actual clocks per second = " << (second_clock - first_clock)/(second_time - first_time) << "\n";

cout << "CLOCKS_PER_SEC = " << CLOCKS_PER_SEC << "\n"; 
```

完整的源代码见[ideone](http://ideone.com/pA492)。如您所料，它报告每秒的实际时钟为 1000000。（我不得不将迭代次数减少到 2 次，这样 ideone 才不会超时。）

# visual-studio - 集成服务字符串长度需要截断

> ID：10455917
> 
> 赞同：1
> 
> 时间：2012-05-04T20:45:35.897
> 
> 标签：visual-studio, visual-studio-2008, ssis, etl

我正在使用集成服务 (SSIS)，目前我正在从 excel 源获取数据，该字符串`Description`的长度大于 15 个字符：问题是我找不到截断此数据的方法为了将它保存在数据库中（列数据库是varchar（15），我无法更改它）。

我试图使用派生列来截断数据但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:55:23.497

添加派生列转换并使用 SUBSTRING 函数仅获取字符串的前 15 个字符。在此处阅读 SSIS 中的子字符串函数[SUBSTRING SSIS 表达式](http://msdn.microsoft.com/en-us/library/ms137541.aspx)

您在派生列中的表达式看起来像`SUBSTRING(Description, 0, 15)`

# python - 将整数转换为十六进制，结果总是有 2 个字节

> ID：10455920
> 
> 赞同：0
> 
> 时间：2012-05-04T20:45:44.320
> 
> 标签：python, usb

我想将使用 pyusb 通过 USB 接收的整数值数组转换为十六进制值列表。我希望这些十六进制值总是有两个字节，即 0x##。但是，正常的 hex() 函数将返回 0x1，输入为 1。我希望它返回 0x01。

然后在获得十六进制值列表后，我想将它们附加在一起，同时丢弃“0x”部分。这是我目前拥有的，非常简单。

```
data_read = dev.read(0x82,64,0,1000)
hex_data = range(0,len(data_read))

for i in range(0,len(data_read)):
    hex_data[i] = hex(data_read[i]) 
```

有任何想法吗？我可以捏造它并以草率的方式来做，但我希望有一种适当的方法来做到这一点。谢谢你。

更新：

```
 data_read = dev.read(0x82,64)
 print data_read
 >>> array('B', [169, 86, 128, 1, 0, 128])
 for i in range(0,len(data_read)):
      hex_data[i] = hex(data_read[i])
 print hex_data
 >>> ['0xa9', '0x56', '0x80', '0x1', '0x0', '0x80'] 
```

Lavon 建议的方法不起作用，因为生成的十六进制值在我的代码中是技术上的字符串？相反，我只是跳过了整个 for 循环转换为十六进制，并直接按照 Lavon 和 moooeeeep 的建议进行了操作，并且成功了！谢谢！

```
hex_data = ('%02x' %i for i in data_read)
print ''.join(hex_data)
>>> a95680010080 
```

有没有很好的语法参考？即你使用的'%02x'？我以前没见过，想更好地理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:48:36.863

> 然后在获得十六进制值列表后，我想将它们附加在一起，同时丢弃“0x”部分。

你的意思是这样的：

```
In [8]: data_read = [0x01, 0x2b, 0x22, 0x10]

In [9]: ''.join(map(lambda v: '%02x' % v, data_read))
Out[9]: '012b2210' 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:52:32.663

这符合要求吗？

```
data = [0x1, 0x4, 0x5, 0xFF, 0x12]

new_data = ['%02X' %i for i in data]
print ''.join(new_data) 
```

产量：

```
010405FF12 
```

使用列表推导和连接操作。

或者，正如@moooeeeeep 所建议的，这里是使用生成器的解决方案：

```
new_data = ('%02X' %i for i in data)
print ''.join(new_data) 
```

有关字符串格式选项，请参阅[此](http://docs.python.org/library/stdtypes.html#string-formatting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:06:26.857

只是另一种方法

```
>>> data_read = [0x01, 0x2b, 0x22, 0x10]
>>> ("{:02x}"*len(data_read)).format(*data_read)
'012b2210' 
```

# javascript - 如何避免语法冲突

> ID：10455926
> 
> 赞同：3
> 
> 时间：2012-05-04T20:46:18.160
> 
> 标签：javascript, parser-generator, jison

我有一个语法文件 — [https://github.com/itrelease/fubar-script/blob/jsast/src/grammar.js](https://github.com/itrelease/fubar-script/blob/jsast/src/grammar.js)但我遇到了[冲突](https://gist.github.com/2597616)，我真的不知道如何解决这个问题。如果有人可以向我解释这将是有帮助的。

此规则会产生[冲突](https://gist.github.com/2597616)：

```
ParamVar: [
  ['Identifier', '$$ = $Identifier;'],
  ['THIS', '$$ = new yy.ThisExpression();']
],

PrimaryExpression: [
  ['THIS', '$$ = new yy.ThisExpression();'],
  ['Literal', '$$ = $Literal;'],
  ['ArrayLiteral', '$$ = $ArrayLiteral;'],
  ['Identifier', '$$ = $Identifier;'],
  ['ObjectLiteral', '$$ = $ObjectLiteral;'],
  ['( Expression )', '$$ = $Expression;']
], 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:59:55.897

您当前的语法没有`PrimaryExpressionNoBrace`，但我认为问题出现在[这个](https://github.com/itrelease/fubar-script/blob/e557c3f24237f72d7ff053ea32fee2169ed55d40/src/grammar.js)旧版本的语法上。

冲突是由这个生产引起的：

```
MemberExpression: [
      ['PrimaryExpression', '$$ = $PrimaryExpression;'],
      ['ArrowFunctionExpression', '$$ = $ArrowFunctionExpression'],
      ... 
```

在哪里

*   a`PrimaryExpression`派生为`PrimaryExpressionNoBrace`具有`'( Expression )'`

*   表达式再次派生到`PrimaryExpressionNoBrace`which has`IDENTIFIER`或`THIS`alternatives

*   `ArrowFunctionExpression`有_`'( FormalParameterList ) => Block'`

*   `FormalParameterList`也有`IDENTIFIER`或`THIS`替代品。

因此，左括号的输入，后跟`IDENTIFIER`or`THIS`将我们带入一个不能决定归约到`PrimaryExpressionNoBrace`或的 LR 状态`FormalParameterList`，即它在常见的合法跟随者（例如右括号）上有归约-归约冲突。单个令牌前瞻在这里是不够的，并且不支持更多。

# vb.net - 卸载 DLL 直到需要它

> ID：10455930
> 
> 赞同：0
> 
> 时间：2012-05-04T20:46:40.160
> 
> 标签：vb.net, dll

我很难理解我在这里读到的关于使用 AppDomains 卸载插件 DLL 的一些答案。这是我的架构：

在我的解决方案中，我有一个`SharedObjects`项目包含一个`ModuleBase`所有插件（解决方案中的单独项目）都继承的类。在`SharedObjects`项目中，我还有一个所有插件都实现的接口（所以如果我有六个插件，它们都实现相同的接口，因此使用这些插件的主程序不需要知道甚至关心插件类的名称是什么是在编译的时候；它们都实现了相同的接口，因此公开了相同的信息）。每个插件项目都有一个对该项目的项目引用`SharedObjects`。（作为旁注，可能很重要，可能不重要 - 该`SharedObjects`项目具有对另一个解决方案的项目引用，`CompanyObjects`包含许多常用的类、类型、对象等）当一切都说完了，当任何给定的插件编译时，输出目录包含以下 DLL：

1.  插件本身的编译DLL
2.  `SharedObjects`项目中的 DLL
3.  `CompanyObjects`项目中的 DLL
4.  `CompanyObjects`项目中引用的四个必备的第 3 方 DLL

我的主程序创建了对我正在执行所有与插件相关的工作的类的引用（该类 ,`PluginHelpers`存储在`SharedObjects`项目中）。该程序提供了一个 OpenFileDialog，以便用户可以选择一个 DLL 文件。现在，由于它正在运行，我可以只将插件 DLL 移动到单独的文件夹并使用`Assembly.LoadFrom(PathToDLL)`语句加载它们。他们加载没有错误；我检查以确保他们在`SharedObjects`项目中实现接口，收集一些基本信息，并在插件 DLL 本身中初始化一些后台工作，以便接口有一些东西可以暴露。问题是，如果不先退出主程序，我就无法升级这些 DLL，因为一旦我使用`LoadFrom`这些 DLL，就会被锁定。

从[这个 MSDN 站点](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/a6a896ca-8905-41fb-8f52-7f39e89c9a91/)，我找到了锁定 DLL 问题的解决方案。但是使用适用于 OP 的代码，我得到了与 OP 相同的“找不到文件或依赖项”错误。当我从包含其余 DLL 的发布文件夹中打开 DLL 时，我什至得到了错误。

FusionLog 更令人困惑：没有提到我试图打开的路径；它试图查看我从中调试主程序的目录，这是一个与插件完全不同的路径上的完全不同的项目，它正在寻找的文件是 DLL 的名称，但在文件夹中程序正在运行。在这一点上，我不知道为什么它会忽略我给它的路径并在完全不同的文件夹中寻找 DLL。

作为参考，这是我的`Loader`类和我用来（尝试）加载 DLL 的代码：

```
Private Class Loader
    Inherits MarshalByRefObject

    Private _assembly As [Assembly]
    Public ReadOnly Property TheAssembly As [Assembly]
        Get
            Return _assembly
        End Get
    End Property

    Public Overrides Function InitializeLifetimeService() As Object
        Return Nothing
    End Function

    Public Sub LoadAssembly(ByVal path As String)
        _assembly = Assembly.Load(AssemblyName.GetAssemblyName(path))
    End Sub

    Public Function GetAssembly(ByVal path As String) As Assembly
        Return Assembly.Load(AssemblyName.GetAssemblyName(path))    'this doesn't throw an error
    End Function
End Class

Public Sub Add2(ByVal PathToDll As String)
    Dim ad As AppDomain = AppDomain.CreateDomain("TempPluginDomain")
    Dim l As Loader = ad.CreateInstanceAndUnwrap(
        GetType(Loader).Assembly.FullName,
        GetType(Loader).FullName
    )
    Dim theDll As Assembly = l.GetAssembly(PathToDll)    'error happens here
    'there's another way to do it that makes the exact point of the error clear:
    'Dim theDll As Assembly = Nothing
    'l.LoadAssembly(PathToDll)    'No problems here. The _assembly variable is successfully set
    'theDll = l.TheAssembly       'Here's where the error occurs, as soon as you try to read that _assembly variable.
    AppDomain.Unload(ad)
End Sub 
```

谁能指出我正确的方向，这样我就可以只根据需要加载和卸载 DLL 并且没有任何依赖错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:41:16.363

我想我终于明白了。它最终变成了几件事——我需要将共享的 DLLs 全部放在一个地方，并且正如 Hans 上面提到的，我需要我的 appdomains 平方。我的解决方案架构如下所示：一个包含我所有插件项目的文件夹；一个“共享对象”程序集，其中一个类文件用于基本插件架构，第二个类包含我的“插件包装器”类和支持类；以及将所有内容联系在一起的控制台应用程序。每个插件项目都有一个对共享对象项目的项目引用，控制台应用程序也是如此。没有任何东西直接引用插件。

So in my Shared Objects project, I have the code for my `PluginBase` class and my `IPlugin` interface:

```
Public Interface IPlugin
    ReadOnly Property Result As Integer
    Sub Calculate(ByVal param1 As Integer, ByVal param2 As Integer)
End Interface

Public MustInherit Class PluginBase
    Inherits MarshalByRefObject

    'None of this is necessary for the example to work, but I know I'll need to use an inherited base class later on so I threw it into the example now.

    Protected ReadOnly Property PluginName As String
        Get
            Return CustomAttributes("AssemblyPluginNameAttribute")
        End Get
    End Property

    Protected ReadOnly Property PluginGUID As String
        Get
            Return CustomAttributes("AssemblyPluginGUIDAttribute")
        End Get
    End Property

    Protected IsInitialized As Boolean = False
    Protected CustomAttributes As Dictionary(Of String, String)

    Protected Sub Initialize()
        CustomAttributes = New Dictionary(Of String, String)
        Dim attribs = Me.GetType.Assembly.GetCustomAttributesData
        For Each attrib In attribs
            Dim name As String = attrib.Constructor.DeclaringType.Name
            Dim value As String
            If attrib.ConstructorArguments.Count = 0 Then
                value = ""
            Else
                value = attrib.ConstructorArguments(0).ToString.Replace("""", "")
            End If
            CustomAttributes.Add(name, value)
        Next
        IsInitialized = True
    End Sub
End Class

<AttributeUsage(AttributeTargets.Assembly)>
Public Class AssemblyPluginNameAttribute
    Inherits System.Attribute

    Private _name As String

    Public Sub New(ByVal value As String)
        _name = value
    End Sub

    Public Overridable ReadOnly Property PluginName As String
        Get
            Return _name
        End Get
    End Property
End Class

<AttributeUsage(AttributeTargets.Assembly)>
Public Class AssemblyPluginGUIDAttribute
    Inherits System.Attribute

    Private _g As String

    Public Sub New(ByVal value As String)
        _g = value
    End Sub

    Public Overridable ReadOnly Property PluginGUID As String
        Get
            Return _g
        End Get
    End Property
End Class 
```

And I have my PluginWrapper class with its supporting classes:

```
Imports System.IO
Imports System.Reflection

''' <summary>
''' The wrapper for plugin-related activities.
''' </summary>
''' <remarks>Each wrapper contains: the plugin; code to load and unload it from memory; and the publicly-exposed name and GUID of the plugin.</remarks>
Public Class PluginWrapper

    Private _pluginAppDomain As AppDomain = Nothing
    Private _isActive As Boolean = False
    Private _plugin As IPlugin = Nothing
    Private _pluginInfo As PluginInfo = Nothing
    Private _pluginPath As String = ""

    Public ReadOnly Property IsActive As Boolean
        Get
            Return _isActive
        End Get
    End Property

    Public ReadOnly Property PluginInterface As IPlugin
        Get
            Return _plugin
        End Get
    End Property

    Public ReadOnly Property PluginGUID As String
        Get
            Return _pluginInfo.PluginGUID
        End Get
    End Property

    Public ReadOnly Property PluginName As String
        Get
            Return _pluginInfo.PluginName
        End Get
    End Property

    Public Sub New(ByVal PathToPlugin As String)
        _pluginPath = PathToPlugin
    End Sub

    Public Sub Load()
        Dim l As New PluginLoader(_pluginPath)

        _pluginInfo = l.LoadPlugin()
        Dim setup As AppDomainSetup = New AppDomainSetup With {.ApplicationBase = System.IO.Directory.GetParent(_pluginPath).FullName}
        _pluginAppDomain = AppDomain.CreateDomain(_pluginInfo.PluginName, Nothing, setup)
        _plugin = _pluginAppDomain.CreateInstanceAndUnwrap(_pluginInfo.AssemblyName, _pluginInfo.TypeName)
        _isActive = True
    End Sub

    Public Sub Unload()
        If _isActive Then
            AppDomain.Unload(_pluginAppDomain)
            _plugin = Nothing
            _pluginAppDomain = Nothing
            _isActive = False
        End If
    End Sub

End Class

<Serializable()>
Public NotInheritable Class PluginInfo
    Private _assemblyname As String
    Public ReadOnly Property AssemblyName
        Get
            Return _assemblyname
        End Get
    End Property

    Private _typename As String
    Public ReadOnly Property TypeName
        Get
            Return _typename
        End Get
    End Property

    Private _pluginname As String
    Public ReadOnly Property PluginName As String
        Get
            Return _pluginname
        End Get
    End Property

    Private _pluginguid As String
    Public ReadOnly Property PluginGUID As String
        Get
            Return _pluginguid
        End Get
    End Property

    Public Sub New(ByVal AssemblyName As String, ByVal TypeName As String, ByVal PluginName As String, ByVal PluginGUID As String)
        _assemblyname = AssemblyName
        _typename = TypeName
        _pluginname = PluginName
        _pluginguid = PluginGUID
    End Sub
End Class

Public NotInheritable Class PluginLoader
    Inherits MarshalByRefObject

    Private _pluginBaseType As Type = Nothing
    Private _pathToPlugin As String = ""

    Public Sub New()
    End Sub

    Public Sub New(ByVal PathToPlugin As String)
        _pathToPlugin = PathToPlugin
        Dim ioAssemblyFile As String = Path.GetFullPath(Path.Combine(Path.GetDirectoryName(_pathToPlugin), GetType(PluginBase).Assembly.GetName.Name) & ".dll")
        Dim ioAssembly As Assembly = Assembly.LoadFrom(ioAssemblyFile)
        _pluginBaseType = ioAssembly.GetType(GetType(PluginBase).FullName)
    End Sub

    Public Function LoadPlugin() As PluginInfo
        Dim domain As AppDomain = Nothing
        Try
            domain = AppDomain.CreateDomain("Discovery")
            Dim loader As PluginLoader = domain.CreateInstanceAndUnwrap(GetType(PluginLoader).Assembly.FullName, GetType(PluginLoader).FullName)
            Return loader.Load(_pathToPlugin)
        Finally
            If Not IsNothing(domain) Then
                AppDomain.Unload(domain)
            End If
        End Try
    End Function

    Private Function Load(ByVal PathToPlugin As String) As PluginInfo
        Dim r As PluginInfo = Nothing
        Try
            Dim objAssembly As Assembly = Assembly.LoadFrom(PathToPlugin)
            For Each objType As Type In objAssembly.GetTypes
                If Not ((objType.Attributes And TypeAttributes.Abstract) = TypeAttributes.Abstract) Then
                    If Not objType.GetInterface("SharedObjects.IPlugin") Is Nothing Then
                        Dim attribs = objAssembly.GetCustomAttributes(False)
                        Dim pluginGuid As String = ""
                        Dim pluginName As String = ""
                        For Each attrib In attribs
                            Dim name As String = attrib.GetType.ToString
                            If name = "SharedObjects.AssemblyPluginGUIDAttribute" Then
                                pluginGuid = CType(attrib, AssemblyPluginGUIDAttribute).PluginGUID.ToString
                            ElseIf name = "SharedObjects.AssemblyPluginNameAttribute" Then
                                pluginName = CType(attrib, AssemblyPluginNameAttribute).PluginName.ToString
                            End If

                            If (Not pluginGuid = "") And (Not pluginName = "") Then
                                Exit For
                            End If
                        Next
                        r = New PluginInfo(objAssembly.FullName, objType.FullName, pluginName, pluginGuid)
                    End If
                End If
            Next
        Catch f As FileNotFoundException
            Throw f
        Catch ex As Exception
            'ignore non-valid dlls
        End Try

        Return r
    End Function
End Class 
```

Finally, each plugin project looks a little like this:

```
Imports SharedObjects

<Assembly: AssemblyPluginName("Addition Plugin")> 
<Assembly: AssemblyPluginGUID("{4EC46939-BD74-4665-A46A-C99133D8B2D2}")> 

Public Class Plugin_Addition
    Inherits SharedObjects.PluginBase
    Implements SharedObjects.IPlugin

    Private _result As Integer

#Region "Implemented"
    Public Sub Calculate(ByVal param1 As Integer, ByVal param2 As Integer) Implements SharedObjects.IPlugin.Calculate
        If Not IsInitialized Then
            MyBase.Initialize()
        End If
        _result = param1 + param2
    End Sub

    Public ReadOnly Property Result As Integer Implements SharedObjects.IPlugin.Result
        Get
            Return _result
        End Get
    End Property
#End Region

End Class 
```

To set it all up, the main program creates a new instance of the `PluginWrapper` class, supplies a path to a DLL, and loads it:

```
Dim additionPlugin As New PluginWrapper("C:\path\to\Plugins\Plugin_Addition.dll")
additionPlugin.Load() 
```

Once you're done doing whatever you need to do with the program...

```
additionPlugin.PluginInterface.Calculate(3, 2) 
```

...and retrieving the results...

```
Console.WriteLine("3 + 2 = {0}", additionPlugin.PluginInterface.Result) 
```

...just unload the plugin:

```
additionPlugin.Unload() 
```

If you need to reload it while the wrapper is still in memory, just call the `Load()` method again - all the information it needs to create a new AppDomain and reload the assembly is in there. And, in answer to my initial question, once the `Unload()` method has been called, the assembly is freed and can be replaced/upgraded as necessary, which was the whole point of doing this in the first place.

Part of where I was getting tripped up earlier was that I wasn't including the SharedObjects.dll file in the same folder as the plugins. What I found is that any referenced assembly needs to be present. So in my post-build events for both my plugins and the Shared Objects project, I have this: `xcopy /y $(ProjectDir)$(OutDir)$(TargetFileName) c:\path\to\Plugins`. Every time I build the solution, all the DLLs are placed in the folder where they need to be.

Sorry if this is a little long, but this is a little complicated. Maybe there's a shorter way to do it...but at the moment, this gets me everything I need.

# jquery-cycle - jquery Cycle中每个过渡的多个图像

> ID：10455935
> 
> 赞同：1
> 
> 时间：2012-05-04T20:46:56.053
> 
> 标签：jquery-cycle

我有以下 HTML 代码：

```
<section class="gallery">
 <a href="" id="link-prev">prev</a>
 <a href="" id="link-next">next</a>
 <div class="holder">
  <ul id="slider">
   <li>
    <img src="" alt="#" width="306" height="240" />
<span>Picture Title</span>
   </li>
   <li>
    <img src="" alt="#" width="306" height="240" />
<span>Picture Title</span>
   </li>
   <li>
    <img src="" alt="#" width="306" height="240" />
    <span>Picture Title</span>
   </li>
   <li>
    <img src="" alt="#" width="306" height="240" />
    <span>Picture Title</span>
   </li>
  </ul>
 </div>
</section> 
```

以及以下js：

```
$(document).ready(function(){
    $('#slider').cycle({
        fx:'scrollHorz',
        timeout: 5000,
        prev:'#link-prev',
        next: '#link-next'
    })
    //$(".form-contact form").validate();
}) 
```

这很好用，但它只显示一张图片，如果我想看下面的，我点击下一步，如果我想看上一张，我点击上一张。如何每次转换显示多张图片？

基本上，就像这个例子：[滚动](http://jquery.malsup.com/cycle/scrollhv.html)，但每次转换显示不止一张图片......

**编辑**：当我试图在每张幻灯片中有两张图片时，我拥有的实际 HTML 是这个：

```
<section class="gallery">
 <a href="" id="link-prev">prev</a>
 <a href="" id="link-next">next</a>
 <div class="holder">
  <ul id="slider">
   <div>
    <img src="assets/content/pages/carrousell/UrbanFlame.jpg" alt="#" width="306" height="240" />
    <img src="assets/content/pages/carrousell/TannourineRestaurant.jpg" alt="#" width="306" height="240" />
   </div>
   <div>
  <img src="assets/content/pages/carrousell/PanchoVillaTaqueria.jpg" alt="#" width="306" height="240" />
  <img src="assets/content/pages/carrousell/LaLanterna.jpg" alt="#" width="306" height="240" />
   </div>
  </ul>
 </div>
</section> 
```

CSS就是这个：

```
.gallery .holder{
    border-radius: 10px;
    position:relative;
    padding:4px 0 4px 0px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
}
.gallery #link-prev,
.gallery #link-next{
    position:absolute;
    width:47px;
    height:83px;
    text-indent:-9999px;
    overflow:hidden;
    top:75px;
    z-index:99999;
    background:url(navigati.png) no-repeat;
}
.gallery #link-prev{left:-19px;}
.gallery #link-next{right:-19px;}
.gallery #link-next{background-position:-48px 0;}
.gallery h3{
    color:#33638b;
    font-size:18px;
    line-height:21px;
    margin:0 0 1px;
    text-align:center;
}
#slider{
    padding:0;
    width:306px;
    margin: 0 auto;
}
#slider li{
    list-style:none;
    text-align:center;
    color:#FFFFFF;
    font-size:14px;
    line-height:17px;
    padding:0px 0 0;
    width:306px;
}
#slider img{
    position:relative;
}
#slider span{
    width:286px;
    display:block;
    padding:20px 10px;
    background:url(../images/slider_span_bg.jpg) repeat-x left top; height:18px;}
#slider a{color:#33638b; font-family:Arial, Helvetica, sans-serif; color:#fff; font-size:18px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:09:56.060

你的`<!-- picture link !-->`积木里有什么？
根据 Cycle 文档（和示例），标记应如下所示：

```
<div id="slider">
    <img src="image1.jpg" />
    <img src="image2.jpg" />
    <img src="image3.jpg" />
    <!-- ... -->
</div> 
```

**编辑：**

一次转换中的两张图片

```
var curElement = null;

$('#s1').cycle({
    fx:     'scrollHorz',
    prev:   '#prev1',
    next:   '#next1',
    timeout: 0,
    after: function(currSlideElement, nextSlideElement, options, forwardFlag)
    {
      if (forwardFlag === 1 && (currSlideElement != curElement || curElement == null))
      {
          curElement = nextSlideElement;
          $("#next1").trigger('click');
      }
      else if ( forwardFlag === 0 && (currSlideElement != curElement || curElement == null))
      {
          curElement = nextSlideElement;
          $("#prev1").trigger('click');
      }
    }
}); 
```

**编辑 2**

问题在于`#slider`风格。将其宽度设置为 fe 620px

```
#slider{
    padding:0;
    width:620px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:53:04.163

我不确定 Cycle 插件是否会在不编辑源代码的情况下处理该问题。

看起来这个选项可能很有用：

```
onPrevNextEvent: null,// callback fn for prev/next events: function(isNext, zeroBasedSlideIndex, slideElement) 
```

似乎您应该能够触发下一个或上一个单击 onPrevNextEvent。

像这样的东西：

```
$('#slider').cycle({
    fx:'scrollHorz',
    timeout: 5000,
    prev:'#link-prev',
    next: '#link-next',
    onPrevNextEvent: function(isNext) {
        if(isNext) {
            $('#link-next').trigger('click');
        } else {
            $('#link-prev').trigger('click');
        }
    }
}) 
```

# jquery - 滑动链接时如何阻止链接激活

> ID：10455940
> 
> 赞同：0
> 
> 时间：2012-05-04T20:47:22.323
> 
> 标签：jquery, html, jquery-mobile

当我从具有锚点的页面滑动时，它会注册滑动，但在页面加载后，它会更改为我滑动的锚页面。

这是执行此操作的代码：

```
<div data-role="page" id="main" class="main">
    <div data-role="content" class="stage-wrapper">

        <div id="returnHome">
            <a href="#home">Home</a>
        </div>
    </div>
</div><!-- /subpage Main --> 
```

# java - 关于 java 和链接“&”的有趣问题

> ID：10455944
> 
> 赞同：1
> 
> 时间：2012-05-04T20:47:48.050
> 
> 标签：java, pass-by-reference

我知道没有办法访问java中的变量链接（如&C或&php）。但例如我有这样的任务：

```
public class JustTest {

    private int n = 1;
    private int x = 10;

    public int[] getIntegers() {
        return new int[] { n, x };
    }

    public void filledInteger() {
        int[] vals = getIntegers();

        System.out.println("Before change");
        System.out.println(Arrays.toString(vals));

        vals[0] = 2;
        vals[1] = 20;

        System.out.println("After change");
        System.out.println(Arrays.toString(vals));

        System.out.println("Values of name & xml");
        System.out.println(n);
        System.out.println(x);

        System.out.println("calling getIntegers");
        System.out.println(Arrays.toString(getIntegers()));
    }

    public static void main(String[] args) {
        JustTest t = new JustTest();
        t.filledInteger();
    }

} 
```

结果是：

```
Before change
[1, 10]
After change
[2, 20]
Values of name & xml
1
10
calling getIntegers
[1, 10] 
```

所以，我想更改类实例的“n”和“x”字段的值。我不能通过直接设置（this->n = 20;）来做到这一点，因为我可能不知道我有哪些字段。只有方法 getIntegers 知道。

（在这段代码中没有，但是例如我有具有自己的字段的子类，并且在父类中我有一个方法filledInteger() 应该更改子类的指定属性（他从方法 getIntegers 知道这个属性是在父类中抽象并在子类中实现））

这是简单的实现（没有继承），使用 php 中的链接

```
<?php

class JustTest {

    private $n = 1;
    private $x = 10;

    public function getIntegers() {
        return array( &$this->n, &$this->x );
    }

    public function filledInteger() {
        $vals = $this->getIntegers();

        echo("Before change" . "<br/>");
        echo(print_r($vals, true) . "<br/>");

        $vals[0] = 2;
        $vals[1] = 20;

        echo("After change" . "<br/>");
        echo(print_r($vals, true) . "<br/>");

        echo("Values of n & x". "<br/>");
        echo $this->n , "<br/>";
        echo $this->x , "<br/>";

        echo("call getIntegers again" . "<br/>");
        echo(print_r($this->getIntegers(), true) . "<br/>");
    }

}

$t = new JustTest();
$t->filledInteger();

?> 
```

结果是：

```
Before change
Array ( [0] => 1 [1] => 10 ) 
After change
Array ( [0] => 2 [1] => 20 ) 
Values of n & x
2
20
call getIntegers again
Array ( [0] => 2 [1] => 20 ) 
```

这正是我所需要的。我只是好奇我如何在java中实现这个希望你理解。

下一个例子：

```
public abstract class ParentTest {
        abstract int[] getIntegers();

        public void fillIntegers(int[] newIntegers) {
            int[] integersOfChild = getIntegers();

            for (int i = 0; i < integersOfChild.length; i++) {
                integersOfChild[i] = newIntegers[i];
            }
        }
    }

    public class ChildTest extends ParentTest {

        private int x;
        private int y;

        @Override
        int[] getIntegers() {
            return new int[] {x, y};
        }

    }

    public class UseTest {
        void main() {
            List<ParentTest> list;

            for (ParentTest item : list) {
                item.fillIntegers(myItegers);
            }
        }
    } 
```

这就是我需要的。我有一个 ParentTest 实例列表（它可能是 ChildTest、ChildTest2 或 ChildTest3；但它们都是 ParentTest 的子项），我需要用我的整数值填充所有字段，但我不知道列表实例中的项目是否ChildTest、ChildTest2 或 ChildTest3 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:56:30.653

> 我如何在 Java 中实现它？

通过反射 API 非常痛苦。如果你想写这样的代码，最好的办法是使用另一种语言。

考虑改用 Groovy 编程。您可以使用数组语法按名称直接访问类成员：`t["n"] = 2;` 这适用于遗留 Java 代码，因此无需修改 TestClass 以支持这种用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T20:57:26.623

您正在谈论的概念称为按引用传递。Java 在很大程度上放弃了它——它产生了太多的副作用，就像你在这里看到的那样。

问题是，虽然很遗憾您不能在这里执行此操作，但它实际上可以防止大量无意的错误被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:00:18.500

类似的东西怎么样：

```
public final class JustTest {

    private final Map<String, Object> fields;

    public void filledInteger() {
        System.out.println("Before change\n" + this.fields);

        fields.put("N", 2);
        fields.put("X", 20);

        System.out.println("After change\n" + this.fields);

        System.out.println("Values of name & xml\n" + fields.get("N")
           + "\n" + fields.get("X"));
    }

    private JustTest() {
        this.fields = Maps.newHashMap(); // guava
        fields.put("N", 1);
        fields.put("X", 10);
    }

    public static void main(String[] args) {
        final JustTest t = new JustTest();
        t.filledInteger();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:02:26.153

您的 php 示例不返回一个 int 数组，而是一个 int 指针数组。这不是你可以在 Java 中做的事情，事实上，这不是你想要在 Java 中做的事情。给出一个用例，可能有更好的方法来解决您遇到的问题。

如果你想返回一个其他人可以影响并且作为成员变量包含的对象，那么就这样做。ArrayList、HashMap 等......有很多东西可以满足您的需求。如果您获得了别人的课程并且您必须对他们的代码嗤之以鼻，您可以通过以下方式绕过他们的私人声明：

```
public void setN(JustTest j, int n) {
    //You would handle some exceptions here also
    Field f = JustTest.class.getDeclaredField("n");
    f.setInt(j, n);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T21:09:17.510

你不能在没有反射的情况下做单个字段，但是你可以改变集合的内容。请注意，这并不是真正的预期行为，而是在使用集合时必须小心的事情。

这输出 5 3 2 4 2 4

```
public class Test
{
  public Vector<Integer> args = new Vector<Integer>();

  public void fillArgs()
  {
    args.add(5);
    args.add(3);
  }
  public Vector<Integer> getArgs()
  {
    return args;
  }

  public static void main(String args[])
  {
    Test s = new Test();

    s.fillArgs();
    Vector<Integer> temp = s.getArgs();
    for (Integer i : temp)
      System.out.println(i);
    temp.setElementAt(2, 0);
    temp.setElementAt(4, 1);
    for (Integer i : temp)
      System.out.println(i);
    for (Integer i : s.getArgs())
      System.out.println(i);
  }

} 
```

# python - Homebrew、PIP、easy_install 等如何工作，以便我可以清理

> ID：10455947
> 
> 赞同：19
> 
> 时间：2012-05-04T20:48:03.823
> 
> 标签：python, macports, pip, homebrew, easy-install

我有一个问题来自我遵循教程而没有真正理解我在做什么。我认为问题的根源在于我不了解 OS X 文件系统的工作原理。

问题比 Python 更大，但是当我开始学习 Python 时，我才意识到我真正了解的很少。所以一开始我开始学习教程，这些教程让我经常使用 easy_install 命令，当很多教程推荐 PIP 时，我从来没有运行过它。所以我运行了很多命令并安装了很多不同的包。

据我了解，Lion 附带了 python 安装。我一直在使用它，并且从这里我用easy_install安装了各种软件包。有没有办法回到默认安装并从头开始？这是我想做的事情吗？如果是，为什么？

使用我随 Homebrew 安装的 Python 版本有什么好处吗？运行 Python 命令时，如何查看 Python 的运行位置？

当我使用easy_install、homebrew、macports等安装某些东西时，事情最终会在哪里结束？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-08T20:50:04.357

Homebrew 将其软件安装`/usr/local`在 Mac 上的子目录中。OS X 不会自行安装任何东西。事实上，`/usr/local`它是为用户安装的东西保留的。由于 Homebrew 永远不会在外部安装文件`/usr/local`（甚至没有能力，除非您运行`brew`using `sudo`- 这是*不*推荐的_）并且 OS X 永远不会*在*那里安装文件，因此两者永远不会混合。

`easy_install`并将`pip`文件默认安装到系统目录中。这就是为什么您必须运行这些命令`sudo`才能使用它们安装软件包。

无论您使用哪种操作系统，我都无法推荐[virtualenv 。](http://www.virtualenv.org/en/latest/index.html)它将 Python 的副本以及所需的任何包或模块安装在您选择的目录中。例如：

```
$ cd /tmp
$ virtualenv foo         
New python executable in foo/bin/python
Installing setuptools............done.
Installing pip...............done.
$ cd foo
$ bin/pip install sqlalchemy
Downloading/unpacking sqlalchemy
  Downloading SQLAlchemy-0.7.7.tar.gz (2.6Mb): 2.6Mb downloaded
  Running setup.py egg_info for package sqlalchemy
[...]    
Successfully installed sqlalchemy
Cleaning up...

[work, work, work]
[decide this was a bad idea]
$ cd /tmp; rm -rf foo 
```

...并且该项目的所有痕迹现在都完全消失了。

用于`easy_install`将 virtualenv 安装到 OS X 本身——就像你为其他软件包所做的那样——然后在隔离的目录中进行所有新的开发，你可以立即清除这些目录。这几乎是当今开发和部署 Python 应用程序的标准方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T20:39:50.123

使用通过 Homebrew 或 MacPorts 等包管理器安装的 Python 的优势在于，它提供了一种简单的方法来删除 Python 安装并重新安装它。此外，您可以安装比 Mac OS X 提供的版本更新的版本。

# .net - Enterprise Library 5.0 使用 CustomTraceListener 和 ConfigurationSourceBuilder 进行日志记录

> ID：10455949
> 
> 赞同：1
> 
> 时间：2012-05-04T20:48:13.250
> 
> 标签：.net, logging, enterprise-library-5

我正在尝试构建一个使用 Enterprise Library 5.0 日志记录代码块的日志库，并且我已经能够创建一个 CustomTraceListener，当配置来自配置文件但我尝试通过配置源生成器配置它时我得到以下错误：

```
"Unable to find appropriate 0 argument constructor for CustomTraceListener" 
```

当我尝试使用 EL5.0 代码库查找错误时，特别是在构建 CustomTraceListenerData 的构造字符串时遇到了问题。

这是代码：

```
using System;
using Microsoft.Practices.EnterpriseLibrary.Logging;
using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
using Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners;
using Microsoft.Practices.EnterpriseLibrary.Logging.Configuration;
using System.Diagnostics;
using Microsoft.Practices.EnterpriseLibrary.Logging.Formatters;

namespace AHCALoggerLibrary
{
[ConfigurationElementType(typeof(CustomTraceListenerData))]
public class ServiceTraceListener : CustomTraceListener
{
    public ServiceTraceListener()
        : base() {}

    public override void TraceData(System.Diagnostics.TraceEventCache eventCache, string source, System.Diagnostics.TraceEventType eventType, int id, object data)
    {
        base.TraceData(eventCache, source, eventType, id, data);
    }

    public override void TraceData(System.Diagnostics.TraceEventCache eventCache, string source, System.Diagnostics.TraceEventType eventType, int id, params object[] data)
    {
        base.TraceData(eventCache, source, eventType, id, data);
    }

    public override void Write(string message)
    {
        throw new NotImplementedException();
    }

    public override void WriteLine(string message)
    {
        throw new NotImplementedException();
    }
}

public class AHCALogger
{
    private static AHCALogger _logger = new AHCALogger();

    private LogWriter _Service = null; 

    public static LogWriter Service { get { return _logger._Service;} }

    private AHCALogger() { }

    public static void Init()
    {
        var builder = new ConfigurationSourceBuilder();

        builder.ConfigureLogging()
               .WithOptions
                 .DoNotRevertImpersonation()
               .LogToCategoryNamed("General")
                .WithOptions.SetAsDefaultCategory()
                    .SendTo.Custom<CustomTraceListener>("ServiceTraceListener")
                   .FormatWith(new FormatterBuilder()
                     .TextFormatterNamed("Text Formatter")
                       .UsingTemplate("Timestamp: {timestamp}...{newline})}"))
                 .SendTo.EventLog("Formatted EventLog TraceListener")
                    .FormatWithSharedFormatter("Text Formatter")
                      .ToLog("Application");

        var configSource = new DictionaryConfigurationSource();
        builder.UpdateConfigurationWithReplace(configSource);
        EnterpriseLibraryContainer.Current = EnterpriseLibraryContainer.CreateDefaultContainer(configSource);
        _logger._Service = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();
    }
}
} 
```

* * *

然后使用记录器：

```
 AHCALogger.Init();
        AHCALogger.Service.Write("hello"); 
```

我怀疑我配置错误，因为当我使用配置文件设置并调用时它确实有效：

```
LogWriter ahcaLogger = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();
ahcaLogger.Write("hello"); 
```

我试图找到有关如何使用 ConfigurationSourceBuilder 的更多信息，但无济于事。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:39:55.827

你需要更换

```
.SendTo.Custom<CustomTraceListener>("ServiceTraceListener") 
```

和

```
 .SendTo.Custom<ServiceTraceListener>("ServiceTraceListener") 
```

错误消息基本上告诉您不能实例化抽象类。您需要传入具体类。无论如何，您都不需要 [ConfigurationElementType(typeof(CustomTraceListenerData))]，因为它没有效果。

要将自定义配置数据传递给您的跟踪侦听器，您需要注意数据存储在 TraceListener 基类的 Attributes 集合中。这意味着您不能在 ctor 中初始化您的侦听器，而是在第一次日志调用时。

我已经清理了您的静态记录器内容以使其更容易。

我在调试这个烦人的**SynchronizationLockException时注意到**

**“对象同步方法是从未同步的代码块中调用的。”**

这似乎是Entlib5 yuck*中的一个*[错误](http://unity.codeplex.com/workitem/7206)。除了自己重新编译统一并修复它之外，我还没有找到解决这个问题的方法。

 *这是带有自定义数据的工作记录器的代码。

```
using System;
using Microsoft.Practices.EnterpriseLibrary.Logging;
using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;
using Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners;
using System.Linq;
using System.Collections.Specialized;
using Microsoft.Practices.EnterpriseLibrary.Logging.Configuration;

class Program
{
    static void Main(string[] args)
    {
        AHCALogger.Service.Write(new LogEntry() { Message = "Hi" });
    }
}

public static class AHCALogger
{
    static Lazy<LogWriter> _Service = new Lazy<LogWriter>(Init);
    public static LogWriter Service
    {
        get { return _Service.Value; }
    }

    static LogWriter Init()
    {
        var builder = new ConfigurationSourceBuilder();
        var serviceConfig = new NameValueCollection();
        serviceConfig.Add("Key", "data");
        builder.ConfigureLogging()
            .LogToCategoryNamed("General")
            .WithOptions.SetAsDefaultCategory()
            .SendTo.Custom<ServiceTraceListener>("ServiceTraceListener", serviceConfig);

        var configSource = new DictionaryConfigurationSource();
        configSource.Add(LoggingSettings.SectionName, builder.Get(LoggingSettings.SectionName));
        var cont = EnterpriseLibraryContainer.CreateDefaultContainer(configSource);
        return cont.GetInstance<LogWriter>();
    }
}

public class ServiceTraceListener : CustomTraceListener
{
    public ServiceTraceListener() { }
    public override void Write(string message)
    {
        Console.WriteLine("Custom trace Listener Data {0}", 
            String.Join(Environment.NewLine, base.Attributes.Keys.OfType<string>().Select(key => "[" + key + "]: " + base.Attributes[key])));
        Console.WriteLine("message: {0}", message);
    }
    public override void WriteLine(string message) 
    {
        Write(message + Environment.NewLine);
    }
} 
```*

# c# - Crystal Reports 2011 .Net 4.0 OS 安装在 E 上：运行报表时出错

> ID：10455953
> 
> 赞同：0
> 
> 时间：2012-05-04T20:48:26.460
> 
> 标签：c#, .net, vb.net, crystal-reports-2010

我有一台 PC，操作系统已安装在 E: 上，但它没有 C: 驱动器。为此，我安装了运行良好的 .Net 4.0 WPF 应用程序。

但是，当我尝试访问水晶报告时，它会给出以下异常。该用户能够从 Windows 资源管理器中的网络位置访问报告，所以我认为要求 Crystal 将其复制到本地的行为会导致问题？

因此，任何人都可以建议在哪里创建本地副本和/或我如何控制它。

谢谢

打开报告的代码：

```
oReportDocument.Load(oSystemData.ReportPath + StandardReport.RPTFile, CrystalDecisions.[Shared].OpenReportMethod.OpenReportByTempCopy) 
```

调用堆栈的提取：

```
CrystalDecisions.CrystalReports.Engine.LoadSaveReportException: Invalid report file path. 
```

在 CrystalDecisions.CrystalReports.Engine.EngineExceptionUtils.DoThrowException（字符串消息，EngineExceptionErrorID id）在 CrystalDecisions.CrystalReports.Engine.ExceptionThrower.ThrowEngineException（字符串消息 ID，EngineExceptionErrorID id）在 CrystalDecisions.CrystalReports.Engine.ReportDocument.Load（字符串文件名，OpenReportMethod openMethod , Int16 parentJob) 在 CrystalDecisions.CrystalReports.Engine.ReportDocument.EnsureLoadReport() 在 CrystalDecisions.CrystalReports.Engine.ReportDocument.get_Subreports()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:37:23.547

当您加载报告时，它会生成报告的本地临时副本。找出该系统上的临时环境变量是什么。如果是 e:\temp 那么我怀疑您没有将文件写入该文件夹所需的权限。

也就是说，因为听起来您正在构建一个 Windows WPF 应用程序，所以它可能是您所建议的，实际上是在尝试一个无效的目录，如“c:\anything”。

要确切知道出了什么问题，我建议运行进程监视器，您可以在此处下载：[http ://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

它易于使用，唯一令人讨厌的是它在您的系统上观察到的大量事物。要解决这个问题，请右键单击“混乱”条目（在捕获窗口中）并选择将它们过滤掉。它允许过滤器位于进程（即 myWPFapp.exe）或活动类型上，在这种情况下，您想要监视文件系统（显然）。

一旦你让它捕获事件，并且你已经将它过滤掉，所以它不会迅速填满窗口，只需运行你的应用程序。您将看到对硬盘驱动器及其尝试使用的文件夹的任何失败访问。

祝你好运。

# iphone - 中断结束后恢复 AVAudioplayer

> ID：10455954
> 
> 赞同：0
> 
> 时间：2012-05-04T20:48:26.853
> 
> 标签：iphone

当电话中断时出现问题，它会暂停音频，但是当中断结束时，应用程序不会恢复音频播放器。请建议我如何恢复音频播放器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:43:54.200

我通过重播最后一个播放项目来解决这个问题。这意味着您应该重新实例化您的 AVPlayerItem。如果您确实找到了更好的解决方案，请尽快与我联系。谢谢。

# html - html5 视频适用于我计算机上的任何文件，除了 localhost

> ID：10455956
> 
> 赞同：1
> 
> 时间：2012-05-04T20:48:32.867
> 
> 标签：html, html5-video, wamp, mp4, ogg

我正在尝试在网页上播放一些 html5 视频。我正在使用 WAMP 2.2 和 PHP 5.3.10。我尝试过 .ogv 格式和 .mp4 格式。当我在客户端（不在本地主机上）执行此操作时效果很好，但是当我尝试在服务器端（从本地主机）执行此操作时，在 Firefox 中我得到一个空白视频，并显示消息“没有视频支持的格式和 MIME 类型找到”。在 Chrome 中，我得到一个无法播放的视频，在 IE 中，我也得到一个无法播放的视频。我在`C:\wamp\bin\apache\Apache2.2.21\conf\httpd.conf`文件底部输入了这些行：

```
AddType video/ogg .ogm
AddType video/ogg .ogv
AddType video/ogg .ogg

AddType video/webm .webm
AddType audio/webm .weba

AddType video/mp4 .mp4
AddType video/x-m4v .m4v 
```

我重新启动 wamp 并再次尝试，我仍然遇到同样的问题。我必须做什么才能运行 .ogv、.mp4 或这些 html5 视频格式中的另一种？

# javascript - 跨 .js 文件的 PyCharm JavaScript 引用

> ID：10455957
> 
> 赞同：4
> 
> 时间：2012-05-04T20:48:34.723
> 
> 标签：javascript, reference, pycharm

我目前很难解决我面临的一个问题，即我无法将函数和变量从一个 JavaScript 文件引用到下一个文件。我尝试在 File->Settings->JavaScript->Libraries 中将所有 JavaScript 文件添加为库，但没有成功 - 我仍然得到灰色下划线的引用，例如，悬停消息显示“未解决的函数或方法”。

奇怪的是，如果我将 JavaScript 文件的副本移到被颠覆的项目目录之外，然后将该项目外部引用添加到 File->Settings->JavaScript->Libraries 然后找到引用但是这个解决方案并不令人满意，因为这些 JavaScript 文件每天通过颠覆更新（我们正在开发中）

有人对我的问题有任何见解吗？如果我没有以正确的方式解决这个问题，请告诉我。我最终想要做的是从我的所有 JavaScript 文件中的特定 JavaScript 文件中引用变量和函数，以便我可以轻松地跟踪引用（ctrl+leftclick）以确保这些部分正确地组合在一起。

谢谢！

（PS 我使用的是 PyCharm 2.5）

# jquery - jquery为ajax数据值提取动态值

> ID：10455960
> 
> 赞同：0
> 
> 时间：2012-05-04T20:48:48.333
> 
> 标签：jquery

如果没有要拉的静态值，我将如何拉 '&something='？如果这是一个可能的解决方案，如何结合 'commentBox' 和 var id？

```
// process addComment()
jQuery(".textbox1").keydown(function(event) {
  var keyCode = event.keyCode || event.which;
  if (keyCode === 13) {
      addComment(this);
  }
});

function addComment() {
  var id = jQuery(e).attr("id");
  var newId = id.replace("commentBox-", "");
  var dataString = '&something=' + newId;
  // proceed with ajax call
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:57:09.823

将当前对象（按下回车键的文本框）传递给 addComment 函数。

```
$(function(){
 $(".textbox1").keydown(function(event) {
  var item=$(this);
  var keyCode = event.keyCode || event.which;
  if (keyCode === 13) {
      addComment(item);
  }
});
  });
function addComment(item) {
  var id = item.attr("id");
  var newId = id.replace("commentBox-", "");
  var dataString = '&something=' + newId;
  alert(dataString );
} 
```

JsFiddle 示例[http://jsfiddle.net/YAQpc/8/](http://jsfiddle.net/YAQpc/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:06:50.963

```
$(".textbox1").on('keyup', function(event) {
  var code = event.keyCode || event.which;
  if (code==13) { addComment(this); }
});

function addComment(elm) {
  var newId = elm.id.replace("commentBox-", "");
  var dataString = '&something=' + newId;
  // proceed with ajax call
} 
```

# javascript - RequireJS 对象中的私有和公共方法

> ID：10455963
> 
> 赞同：0
> 
> 时间：2012-05-04T20:49:18.863
> 
> 标签：javascript, properties, methods, private, requirejs

我不确定在使用 requirejs 时如何设置私有或公共方法，因为它使用简写来声明对象。在下面的代码中，我希望属性“id”和方法“prepareId”是私有的。

```
define(['jquery'], function ($) {
    var Asset = Class.extend({
        init: function() {
            this.id = "12345";
        }
        ,getAsset: function() {
          return this.prepareId(this.id);
        }
        ,prepareId: function(id) {
          return "#" + id;
        }
    });
    return Asset;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T18:31:16.787

我想你有点困惑。require.js 不会对您返回的内容施加规则。如果你想返回一个创建“私有”属性和函数的构造函数，你可以这样做。

因此，以下（如果我正确理解您所说的私人的意思）应该可以正常工作。

```
define(['jquery'], function ($) {
  var Asset = function () {
    var id;
    function prepareId(id) {
      ...
    };
    ...
  };
  return Asset;

}); 
```

# bash - 使用cron更改mac地址

> ID：10455966
> 
> 赞同：1
> 
> 时间：2012-05-04T20:49:54.913
> 
> 标签：bash, cron, mac-address

我正在尝试通过在 cron 中运行 shell 脚本来更改我的 MAC 地址。乌布努图 10.10。克隆线：

```
40 16 * * * /root/proj/changeMAC.sh > /root/proj/log.txt 
```

更改MAC.sh：

```
#!/bin/bash
. $HOME/.profile
. $HOME/.bashrc
ifconfig eth0 down
ifconfig eth0 hw ether XX:XX:XX:XX:XX:XX
ifconfig eth0 up
dhclient eth0 
```

其中 XX:XX:XX:XX:XX:XX 是一个真实的 MAC 地址。当它运行时，MAC 地址不会改变。是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:56:31.577

`ifconfig`&`dhclient`可能不在通常的路径中。尝试使用`/sbin/ifconfig`和`/sbin/dhclient`。

# android - Phonegap 中的cordova.xml 是什么？

> ID：10455970
> 
> 赞同：6
> 
> 时间：2012-05-04T20:50:11.300
> 
> 标签：android, cordova

在尝试调试 Phonegap 错误消息（“调用 OpenGL ES api with no current context”，这似乎没有导致任何问题）时，我遇到了 PhoneGap 1.6 和其中包含以下行：

```
<preference name="classicRender" value="true" /> 
```

将此行添加到*我*的 cordova.xml 副本中没有做任何事情。但后来我也注意到该文件中有关访问来源的注释和其他行，我注意到我的应用程序的访问来源设置为 127.0.0.1 但我所有的代码都在远程服务器上，这似乎无关紧要.

我搜索了文档，但没有找到任何文档。

所以我不得不问：cordova.xml 文件是干什么用的，里面可以放什么指令，它们应该做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T01:11:44.900

cordova.xml 文件是一个配置文件，用于指定白名单 url、日志级别和呈现的设置。该文件以前称为 phonegap.xml，并在 Adob​​e/Nitobi[将 PhoneGap 代码库捐赠](http://phonegap.com/2012/03/19/phonegap-cordova-and-what%E2%80%99s-in-a-name/)给 Apache 软件基金会 (ASF) 进行孵化时重命名。

该文件包括三个设置。

首先是：

```
<access origin> 
```

它指定了可以加载的 URL 的批准列表。这些 url 被添加到[DroidGap](http://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/src/org/apache/cordova/DroidGap.java)类的白名单缓存中。只有白名单上的 URL 可以加载到 Cordova webview 或新的浏览器实例中。

二是：

```
<log level> 
```

它指定了在 Android 上调试的日志级别。它可以设置为 ERROR、WARN、INFO、DEBUG 或 VERBOSE（默认值=ERROR）。

第三是：

```
<preference name="classicRender" /> 
```

设置字段

```
private boolean classicRender; 
```

在[DroidGap](http://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/src/org/apache/cordova/DroidGap.java;)类中。我能找到的对它实际作用的唯一参考是在对 Cordova的[提交中：](http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201201.mbox/%3C20120106235242.139215318F@tyr.zones.apache.org%3E)

```
 if(android.os.Build.VERSION.SDK_INT < 14 && this.classicRender)
     {
         //This hack fixes legacy PhoneGap apps
         //We should be using real pixels, not pretend pixels
   ... 
```

也许更有用的是知道它显然已被[删除](http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201201.mbox/%3C20120125194403.2F9FB3199AF@tyr.zones.apache.org%3E)，因为它不能正常工作。

cordova.xml 在[DroidGap](http://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/src/org/apache/cordova/DroidGap.java;)类中的 loadConfiguration() 方法中解析：

```
private void loadConfiguration() {
     int id = getResources().getIdentifier("cordova", "xml", getPackageName());
     ...
     XmlResourceParser xml = getResources().getXml(id);
     etc... 
```

有关完整的 loadConfiguration() 方法，请参见[DroidGap类中的第 1252 行。](http://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob;f=framework/src/org/apache/cordova/DroidGap.java;h=539329e10a1baeff6702e38cf2cae1dc93a53d6c;hb=664a061d#l1243)所有三个属性都已解析，但根据上面的链接，似乎 classicRender 设置不起作用并且可以忽略。

# ssh - 为 GitHub 设置 SSH 密钥

> ID：10455974
> 
> 赞同：7
> 
> 时间：2012-05-04T20:50:21.917
> 
> 标签：ssh, github

我正在按照[这些说明](http://help.github.com/mac-set-up-git/)设置 SSH 密钥以用于 GitHub。

说明告诉您删除当前`.ssh`目录并在该 .ssh 目录中创建新密钥。我无法做到这一点，因为我已经有`id_dsa.pub`我需要用于其他服务器的密钥。

是否可以在保留我已经保存的密钥的同时为 GitHub 设置 SSH `.ssh`？还是有另一种方法可以为 GitHub 设置 SSH？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T21:04:00.540

您可以重用目录中已有的密钥对，也可以创建一个专门供 GitHub 使用的新密钥对。如果您决定不使用默认对，则需要修改`~/.ssh/config`文件并为 GitHub 添加主机定义，将其指向新的密钥文件。因此，如果您的新密钥对是`github_rsa`and `github_rsa.pub`，请将这些行放入`/.ssh/config`：

```
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/github_rsa 
```

现在，每当您对 进行拉取或推送操作时`git@github.com`，都将使用备用身份文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T20:59:10.120

您可以生成具有特定名称的密钥，例如：

```
ssh-keygen -t rsa -f ~/.ssh/id_rsa_github -C "your_email@youremail.com" 
```

然后您可以在文件中为单独的服务器指定此密钥`~/.ssh/config`：

```
Host *github.com
  IdentityFile ~/.ssh/id_rsa_github
  User git 
```

有关详细信息，请参阅`man ssh`或。`man ssh_config`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T16:26:08.940

确保你在全局配置中有这个：

```
git config --global credential.helper osxkeychain 
```

# git - Git 选择性提交

> ID：10455977
> 
> 赞同：1
> 
> 时间：2012-05-04T13:38:16.210
> 
> 标签：git, eclipse

我在 Eclipse 中使用 eGit 插件。

我在本地对 7 个文件进行了更改，然后发现其中一个文件不需要更改 - 所以我只需要提交 6 个文件并恢复第 7 个文件的更改。

如何使用 eGit 完成此任务？

似乎使用 eGit，我可以全部提交或全部重置。但我只想提交选择性文件并恢复对其他文件的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:46:29.483

在 Eclipse 中，右键单击要恢复的文件，将鼠标悬停在“替换为...”上并选择“最新来自 HEAD”。然后像往常一样提交其他所有内容。

# java - 这个 if else 语句有问题吗？

> ID：10455984
> 
> 赞同：1
> 
> 时间：2012-05-04T20:51:43.013
> 
> 标签：java, android, if-statement

当我打印消息的内容时，它总是让我“体重过轻”，尽管 displaybmi 不 <19

```
public String BMImessage(){
    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    String Height = customSharedPreference.getString("heightpref", "");
    String Weight = customSharedPreference.getString("weightpref", "");

    float weight = Float.valueOf(Weight);
    float height = Float.valueOf(Height);

    float displaybmi = weight/(height*height);
    if (displaybmi <19) 
        message = "Underweight" ;
    else if (displaybmi >=19 && displaybmi <=25) 
        message = "Desirable Weight";
    else if (displaybmi >=26 && displaybmi <=29) 
        message =  "Overweight" ;
    else if (displaybmi >=30 && displaybmi <=40) 
        message =  "Obese";
    else if (displaybmi >40) 
        message = "Extremely Obese" ;
    return message;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:54:21.930

displaybmi*的*值是多少？尝试更改要使用的比较`19.0`以确保不会发生截断。您正在将`float`(displaybmi) 与`int`(19) 进行比较，这可能会导致不良行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:08:01.563

还要仔细检查你的计算：

```
float displaybmi = weight/(height*height); 
```

如果您的体重以公斤为单位，而身高以米为单位，则此方法有效。如果您的体重以磅为单位，身高以英寸为单位，则需要添加转换因子：

```
float displaybmi = (weight * 703.0)/(height * height); 
```

[计算你的身体质量指数](http://www.wikihow.com/Calculate-Your-Body-Mass-Index-%28BMI%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T21:09:17.603

如果你想比较两个浮点数，你可以使用`Float.compare(float f1, float f2)`

```
if (Float.compare(displaybmi, 19) < 0) 
    message = "Underweight" ;
else if (Float.compare(displaybmi, 19) >= 0 && Float.compare(displaybmi, 25) <= 0)
... 
```

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#compare%28float,%20float%29)说：

> 以数字方式比较两个 Float 对象。当应用于原始浮点值时，此方法执行的比较与 Java 语言数值比较运算符（`<`, `<=`, `==`, `>=`, ）执行的比较有两种不同之处：`>`
> 
> *   `Float.NaN`此方法认为它等于自身并且大于所有其他浮点值（包括 Float.POSITIVE_INFINITY）。
> *   `0.0f`此方法认为大于`-0.0f`。这确保了此方法强加的 Float 对象的自然顺序与 equals 一致。

# php - Imagick 和 phmagick 的问题：Postscript 委托失败/没有这样的文件或目录

> ID：10455985
> 
> 赞同：8
> 
> 时间：2012-05-04T20:51:47.767
> 
> 标签：php, pdf, imagemagick, ghostscript, imagick

我正在使用 imagick 3.0.1 和 phmagick (http://www.francodacosta.com/phMagick/download)。无论如何，当我尝试将 PDF 转换为 JPEG 时，两者都会给我同样的错误。

例如： **Postscript delegate failed `/tmp/magick-bfxIrUJ5': No such file or directory @error/pdf.c/ReadPDFImage/669**

我正在使用 Ghostcript-9.05（在 /usr/local/bin/gs 上运行）。还有 ImageMagick-6.7.6-8（在 /usr/local/bin/convert 上运行）。

我已经检查了文件夹的权限（755）。ImageMagick 在终端上工作得很好。

例如，我的 PHP 使用 Imagick：

```
//use imagick
$im = new imagick( '/pdf/553571072.pdf' );

// convert to jpg
$im->setImageColorspace(255);
$im->setCompression(Imagick::COMPRESSION_JPEG);
$im->setImageFormat('jpeg');

//write image on server
$im->writeImage('/jpg/553571072.jpg'); 
```

顺便说一下，Imagick 它出现在我的 phpinfo() 中。我正在研究 linux/apache/amd64。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T20:30:05.590

好的，感谢 Nuno Franco da Costa ( [http://www.francodacosta.com/](http://www.francodacosta.com/) ) 的帮助，这终于奏效了。

问题是我的 GhostScript 路径对于 Shell 来说是可以的，但对于系统和 PHP 来说是错误的。要更正，您应该将`/usr/local/bin/gs`文件链接到`/usr/bin/gs`.

*从 Shell 执行以下操作：*

```
[root@din ~]# convert -list configure | grep -i delegates
DELEGATES     bzlib fontconfig freetype jpeg jng png tiff x11 xml zlib 
```

检查`gs`文件是否已存在于`/usr/bin`. 如果是这样，我们将创建它的备份。
*如果没有`/usr/bin/gs`可以跳过这一步*

```
[root@din ~]# ls -l /usr/bin/gs
-rwxr-xr-x 1 root root 6024 Sep 30  2010 /usr/bin/gs
[root@din ~]# mv /usr/bin/gs /usr/bin/gs.orig 
```

**现在创建从`/usr/local/bin/gs`到的链接`/usr/bin/gs`**

```
[root@din ~]# sudo ln -s /usr/local/bin/gs /usr/bin 
```

那应该可以解决问题。非常感谢你们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-22T13:17:06.060

*我对@HelloWorld （谢谢！）*在已接受答案的评论中提出的“纯 PHP 解决方案”做出了贡献，稍作更正：必须在扩展默认 PATH 之前**添加变量名**
`putenv( getenv('PATH') . ':/usr/local/bin' );`，因此不起作用，但
`putenv( 'PATH=' . getenv('PATH') . ':/usr/local/bin' );`会

**我的声誉低于 50 分，无法在正确的位置添加我的评论，所以我不得不创建一个新答案 :-)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-16T02:55:12.557

我在使用**ImageMagick** `ImageMagick 6.7.7-10`和**GhostScript** `9.10`时遇到了这些问题。

事实证明 PDF 已损坏，尽管一些较新的 GS 版本可以读取它们，但由于出现以下错误，旧版本不能。

```
 **** Warning:  An error occurred while reading an XREF table.
   **** The file has been damaged.  This may have been caused
   **** by a problem while converting or transfering the file.
   **** Ghostscript will attempt to recover the data. 
```

在 Linux 下，您可以先通过**pdftk**传递 PDF ：

```
pdftk 'bad.pdf' output 'fixed.pdf' 
```

之后，一切都在 Ubuntu 上为我工作。

# xquery - 在浏览器中显示 Xquery (.xq) 文件

> ID：10455995
> 
> 赞同：4
> 
> 时间：2012-05-04T20:52:57.083
> 
> 标签：xquery

我是编程新手，对 xml / xquery 非常陌生

我有一个 .xq 文件（带有 html 和 xquery 代码）和 .xml 文件（用于存储数据）。

在测试它时，我可以查看 .xq 页面如何使用 stylus studio 显示，但我无法使用网络服务器或网络主机使页面正常运行。我知道这并不罕见，但我无法弄清楚如何解决它（或者如果它甚至可能的话）。

与此同时，我一直在使用 Saxon，它运行良好，但不理想必须使用完全独立于应用程序的命令行代码。

我还读到 Jedit 是一个选项，但我无法让 xquery/saxon 插件与 xquery 一起使用。我还想知道是否可以使用样式表，但在这方面找不到任何东西。

那么第一个问题，浏览器（即使用网络主机）是否可以显示 .xq 文件？还有其他软件的推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:07:53.460

如果您的目标是通过 Web 浏览器访问和执行 XQuery 程序，那么您将需要一个带有 Web 服务器的 XQuery 引擎。有许多这样的产品。我个人使用并且可以推荐[eXist-db](http://exist-db.org/)，一个免费的、开源的原生 XML 数据库。除了有效地存储、索引和查询您的 XML 之外，eXist-db 默认使用轻量级 Web 服务器运行，允许您通过浏览器访问查询，例如[http://localhost:8080/exist/apps /myapp/myquery.xq](http://localhost:8080/exist/apps/myapp/myquery.xq). 访问此 URL 将导致 eXist-db 在数据库的“myapp”目录中查找您的查询 (myquery.xq)，并假设它确实存在，eXist-db 将执行查询并将结果序列化到浏览器。这是一个非常强大的组合——XQuery 和原生 XML 数据库 + 像 eXist-db 这样的 Web 服务器。随意阅读更多关于 eXist-db 的[文档，并在](http://exist-db.org/exist/documentation.xml)[exist-open 邮件列表中](https://lists.sourceforge.net/lists/listinfo/exist-open)询问有关 eXist-db 的问题。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:56:58.957

正如 Joe 所说，您需要一个能够执行 XQuery 代码的 Web 应用程序框架。最明显的选择是 Web 服务器附带的任何类型的 XML 数据库。eXist-db 就是一个例子。MarkLogic ( [www.marklogic.com](http://www.marklogic.com) ) 是另一个。还有 Sausalito ( [www.28msec.com](http://www.28msec.com) )，它带有一个 Eclipse 派生的开发人员环境，允许在小型 Web 服务器中进行本地测试。您还可以查看 ServletX ( [www.expath.org](http://www.expath.org) )，这是一个用于执行 xslt、xproc、xquery 等的小型 Web 容器。稍加努力，你甚至可以采取像 Cocoon 这样的东西，把 Saxon ( [www.saxonica.com](http://www.saxonica.com)) 在它后面，并使用它来执行您的 XQuery。所有提到的示例都允许免费运行代码，甚至是来自商业供应商的产品。

！

# php - PHP - 如何使页面仅在本地网络中可见

> ID：10455996
> 
> 赞同：5
> 
> 时间：2012-05-04T20:53:01.750
> 
> 标签：php, .htaccess, lan

嗨，我还有另一个问题，我正在用 PHP 编写一个简单的网站，但我的网站在本地网络中的可见性存在问题，以使其对我使用的远程地址可见

```
$_SERVER['REMOTE_ADDRESS'] 
```

，但我想让它在我的局域网中可见。

我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T13:35:03.020

同样在 .htaccess 中，您可以从您的 ip/子网允许，如下所示：

```
Order Deny,Allow
Deny from all
Allow from 192.168.1.1/24 
```

当然它应该匹配你的局域网

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T21:00:14.083

您应该在 .htaccess 文件中执行此操作。

首先，您指定拒绝所有，然后指定应允许的 IP 地址列表。

```
order deny,allow
deny from all
allow from X.X.X.X
allow from X.X.X.X
allow from X.X.X.X 
```

您可以允许这样的范围：

```
allow from 10.0.0.0-10.255.255.255
allow from 10.0-255.0-255.0-255
allow from 10.*.*.* 
```

如果你想允许`1.2.3.254`, `1.2.3.255`, `1.2.4.1`, `1.2.4.2`, `1.2.4.3`, and `1.2.4.4`，
你可以这样做：

```
allow from 1.2.3.254-1.2.4.4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-02T05:03:31.747

对于 Apache 2.2，投票最高的答案是正确的。如果您使用 2.4，则必须使用以下内容：

```
<Limit GET POST>
 Require all denied
 Require ip 192.168.1.0/24
</Limit> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-01T11:46:52.877

```
order deny,allow
deny from all
allow from ::1
allow from 192.168.0.1 etc... 
```

效果很好（这`::1`也在 Windows 主机文件中指定）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T20:59:06.113

我不完全确定，但也许这是一个足够好的解决方案：

```
if( substr($_SERVER['REMOTE_ADDRESS'], 0, 3) == '10.' ) {
   // welcome...
} 
```

# ios - AudioFileStreamParseBytes 中的 kAudioFileStreamError_DiscontinuityCantRecover

> ID：10455997
> 
> 赞同：1
> 
> 时间：2012-05-04T20:53:02.180
> 
> 标签：ios, audio-streaming

我正在尝试制作一个音频流应用程序。我打开流，AudioFileStreamOpen（一切正常），但是当我尝试解析时，我得到 kAudioFileStreamError_DiscontinuityCantRecover。苹果文档不清楚。

```
err = AudioFileStreamOpen(self, MyPropertyListenerProc, MyPacketsProc,
                          fileTypeHint, &audioFileStream);

... // other things

AudioFileTypeID fileTypeHint = kAudioFileWAVEType;
err = AudioFileStreamParseBytes(audioFileStream, length, bytes,
                                kAudioFileStreamParseFlag_Discontinuity); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:04:12.247

该错误是由于音频流文件无法设置为 kAudioFileStreamParseFlag_Discontinuity 导致的，简单的解决方案是：

```
 err = AudioFileStreamParseBytes(audioFileStream, length, bytes,
                            0); 
```