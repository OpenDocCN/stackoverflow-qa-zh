# StackOverflow 问答 10259000-10259999

# qt - Qt：如何防止 QKeyEvent 在 QTextEdit 中发生

> ID：10259001
> 
> 赞同：2
> 
> 时间：2012-04-21T12:42:30.153
> 
> 标签：qt

我有这个代码：

```
bool MainWindow::eventFilter(QObject *obj, QEvent *event)
{
    QKeyEvent *keyEvent = static_cast<QKeyEvent*>(event);

    if (event->type() == QEvent::KeyPress)
    {
        if (keyEvent->key() == Qt::Key_Tab)
            // do something
    }
} 
```

现在，我正在输入一个 QTextEdit。所以说我按了tab键。然后在 QTextEdit 中会出现一个选项卡。但是，如果我想防止这种情况发生怎么办？打个比方，如果你熟悉 emacs：在正确的环境中（比如 c++ 模式），你可以点击 tab，行会跳转到正确的位置（缩进）。再次点击选项卡后，没有任何反应。这是因为代码行在正确的位置。

这里有人知道怎么做吗？我想我可以让 tab 事件显示在 QTextEdit 中，然后删除以前的字符（或任何定义的字符）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:48:22.257

使用事件过滤器函数的返回值可以让您控制 QTextEdit 接收哪些事件（如果您真的不想只是子类化它）：

```
if (keyEvent->key() == Qt::Key_Tab)
    return true; 
```

返回`true`表示应该过滤事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T13:20:12.343

您不需要全局事件过滤器来执行特殊的键盘处理（除非出于某种原因，您不能编辑小部件设置为 QTextEdit 的部分）。您可以从 QTextEdit 派生一个类并覆盖其虚拟键方法：

[http://doc.qt.io/qt-5/qwidget.html#keyPressEvent](http://doc.qt.io/qt-5/qwidget.html#keyPressEvent)

要获得给定[keyEvent](http://doc.qt.io/qt-5/qkeyevent.html)的默认行为，您可以将其传递给`QTextEdit::keyPressEvent()`，而忽略它，您只需返回而不调用它。

# android - 为 GUI 使用两种不同的布局

> ID：10259002
> 
> 赞同：0
> 
> 时间：2012-04-21T12:42:39.227
> 
> 标签：android, android-layout, android-gui

我正在尝试为两个 Android 平板电脑设计一个 GUI。两者都在 Android 2.2 上运行。一款是三星 Galaxy Tab GT-P1000，一款是中国平板。与三星标签相比，这款中国平板电脑太大了。我正在尝试基于平板电脑为单个 GUI 编写两个不同的 xml，必须加载相应的 xml 文件。

> 我已经为布局文件夹尝试了 xlarge 和 large 属性，但是这两个选项卡都从那里获取了大量资源。
> 
> 而且我还尝试使用 layout-sw720dp 和 sw600dp 平板电脑都使用此资源。它只是从普通布局文件夹中引用。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:45:02.093

三星 Galaxy Tab GT-P1000 从 layout-xhdpi 获取布局，如果不存在，那么它会看起来很大。

# extend - 在Android中扩展应用程序为什么不起作用？

> ID：10259006
> 
> 赞同：1
> 
> 时间：2012-04-21T12:43:04.763
> 
> 标签：extend, android

我有一个扩展应用程序的类

```
public class MyContext extends Application {

    private String _eposta;
    public String getEposta() 
    {
        return _eposta;
    }
    public void setEposta(String eposta) {
        _eposta = eposta;
    }

    private String _sifre;
    public String getSifre() 
    {
        return _sifre;
    }
    public void setSifre(String sifre) {
        _sifre = sifre;
    } 
```

我有一个主要的活动类

```
 eposta = epostaTxt.getText().toString();
    sifre = parolaTxt.getText().toString();
    ((MyContext)getApplication()).setEposta(eposta);
    ((MyContext)getApplication()).setEposta(sifre); 
```

**但是在这一行： ((MyContext)getApplication()).setEposta(eposta) 应用程序落入了 catch 字段。**

顺便说一句，我将类声明到清单中

```
<application android:name="com.mobil.eposta.MyContext"
                 android:icon="@drawable/ic_launcher"
                 android:label="@string/app_name"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:19:52.973

不要这样做：

```
((MyContext)getApplication()).setEposta(eposta) 
```

做这个：

```
MyContext.setEposta(eposta) 
```

应该工作=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:36:51.297

如果您在清单文件中正确设置了应用程序，请尝试执行以下操作：

```
eposta = epostaTxt.getText().toString();
sifre = parolaTxt.getText().toString();
MyContext gv = (MyContext)getApplicationContext();
gv.setEposta(eposta);
gv.setSifre(sifre); 
```

# regex - 如何在 R 中使用 sub 替换 '(' , ')'？

> ID：10259007
> 
> 赞同：5
> 
> 时间：2012-04-21T12:43:06.997
> 
> 标签：regex, r

如何在 R`(`中`)`使用 sub 替换？

让定义`x`为：

```
x="abc(def" 
```

然后当我尝试用`(`其他东西替换时，会发生错误：

```
sub("(","",x) 
```

错误是：

`'Missing ')''`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T12:45:29.207

正如 Kohske 所说，您需要双重转义，但您也可以使用参数`fixed=TRUE`：

```
sub("\\(","",x)
sub("(","",x,fixed=TRUE) 
```

两者都给你：

```
[1] "abcdef" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T12:44:32.570

你需要逃避：

```
> sub("\\(", "@", x)
[1] "abc@def" 
```

# c++ - 返回windows注册表键子键数组c ++

> ID：10259008
> 
> 赞同：1
> 
> 时间：2012-04-21T12:43:17.230
> 
> 标签：c++, winapi, registry

我在 ac void 函数中有此代码来获取和打印 Windows 注册表项的子项

```
TCHAR    achKey[MAX_KEY_LENGTH];   // buffer for subkey name
retCode = RegQueryInfoKey(
        hKey,                    // key handle 
        achClass,                // buffer for class name 
        &cchClassName,           // size of class string 
        NULL,                    // reserved 
        &cSubKeys,               // number of subkeys 
        &cbMaxSubKey,            // longest subkey size 
        &cchMaxClass,            // longest class string 
        &cValues,                // number of values for this key 
        &cchMaxValue,            // longest value name 
        &cbMaxValueData,         // longest value data 
        &cbSecurityDescriptor,   // security descriptor 
        &ftLastWriteTime);       // last write time 

    // Enumerate the subkeys, until RegEnumKeyEx fails.

    if (cSubKeys)
    {
        printf( "\nNumber of subkeys: %d\n", cSubKeys);

        for (i=0; i<cSubKeys; i++) 
        { 
            cbName = MAX_KEY_LENGTH;
            retCode = RegEnumKeyEx(hKey, i,
                     achKey, 
                     &cbName, 
                     NULL, 
                     NULL, 
                     NULL, 
                     &ftLastWriteTime); 
            if (retCode == ERROR_SUCCESS) 
            {
                _tprintf(TEXT("(%d) %s\n"), i+1, achKey);
            }
        }
    } 
```

我如何修改以返回包含所有子键值的数组谢谢

* * *

`vector<string> subkeys`嗨大卫感谢您的回复，我无法使用这些标头进行无错误编译

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>
#include <iostream>
#include <vector>
#include <string>
using namespace std; 
```

如果我改为：

```
vector<TCHAR> getSubKeys(HKEY key)
{
    vector<TCHAR>> subkeys;
    ....
    for (i=0; i<cSubKeys; i++) 
    {
        // get subkey name
        subkeys.push_back(TCHAR>(achKey));
    }
    ....
    return subkeys;
} 
```

通过此更改，它可以工作，但是在 t_main 函数中，当我尝试将向量列出到控制台时，仅显示八个（子键的数量是正确的）数字，例如 65000，八个向量元素的值相同，问题出在哪里或我该如何编译用你的代码，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:24:55.010

鉴于您使用的是 C++，您不应该使用数组。取而代之`vector<T>`的是适当的数据结构。创建其中之一来保存您的注册表项字符串。

```
vector<string> subkeys; 
```

您当前打印的位置`achKey`，而不是添加到`subkeys`：

```
subkeys.push_back(string(achKey)); 
```

如果您正在为 Unicode 构建，请`wstring`改用。

您的函数可能如下所示：

```
vector<string> getSubKeys(HKEY key)
{
    vector<string> subkeys;
    ....
    for (i=0; i<cSubKeys; i++) 
    {
        // get subkey name
        subkeys.push_back(string(achKey));
    }
    ....
    return subkeys;
} 
```

# php - PHP替换确切的字符串（带#个字符）

> ID：10259011
> 
> 赞同：0
> 
> 时间：2012-04-21T12:44:23.427
> 
> 标签：php, replace

我想做的是用另一个字体颜色版本替换 A#, A#m,...，如下所示：

```
preg_replace('/\bA#m\b/','<span style="color:#910202;">A#m</span></a>',$content);
preg_replace('/\bA#\b/','<span style="color:#910202;">A#</span></a>',$content); 
```

不幸的是，如果 A#m 是输入，它只会设置 A# 部分的样式。有什么帮助吗？/\b...\b/ 方法似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:50:36.197

正则表达式工作得很好。问题是第二个也会匹配第一个的结果！

如果您传入`A#m`，第一个正则表达式会将其更改为

```
<span style="color:#910202;">A#m</span></a> 
```

（顺便说一句，这不是一个有效的 HTML 片段；那是`</a>`做什么的？）

这将成为第二个正则表达式的输入。那一个会看到`A#`，替换它，最终结果将是

```
<span style="color:#910202;"><span style="color:#910202;">A#</span></a>m</span></a> 
```

可能不是你所期望的。

一种解决方案是将两个表达式简单地合并为一个：

```
preg_replace('/\b(A#m?)\b/','<span style="color:#910202;">$1</span></a>',$content); 
```

**更新：**如果您想创建一个识别许多不同和弦的正则表达式，请使用[交替](http://www.regular-expressions.info/alternation.html)：

```
preg_replace('/\b(A#(maj7|sus2|sus4)?)\b/',
             '<span style="color:#910202;">$1</span>',
             $content); 
```

简短说明`(A#(maj7|sus2|sus4)?)`以便您可以对其进行扩展：此正则表达式`A#`单独匹配或*可选*匹配（由于） *，*`?`后跟（由于s ）、、、。我不知道和弦的所有选项是什么，但是阅读我链接到的参考/教程是个好主意。只学习基础知识会给你很大的使用能力。*`|``maj7``sus2``sus4`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:14:25.783

这个简单的正则表达式就可以了。

```
preg_replace('/A#(m?)/','<span style="color:#910202;">A#\\1</span></a>',$content); 
```

这里的主要思想是，如果它后面跟着`m`我们`m`在替换字符串中添加。

[http://ideone.com/iQ6P8](http://ideone.com/iQ6P8)*

# vb.net - 将 VB6 集合转换为 VB.Net 泛型

> ID：10259012
> 
> 赞同：2
> 
> 时间：2012-04-21T12:44:25.573
> 
> 标签：vb.net, collections, vb6-migration

全部，

我有一个 VB6 项目，其中包含大约 100 个自定义集合类，我想将其转换为 VB.Net。一个典型的例子是这样的。

```
Class CAccounts
     Private m_Accounts As New Collection

     Public Sub Add(newItem As CAccount)
         m_Accounts.Add newItem, newItem.IdKey
     End Sub
     Public Sub Remove(index As Variant)
         m_Accounts.Remove index
     End Sub
     Public Function Item(index As Variant) As CAccount
         Set Item = Nothing
         On Error Resume Next
         Set Item = m_Accounts.Item(index)
     End Function

     ......... 
```

存放物品的位置

```
Class CAccount
    Public Id as long
    Public Code as String
    Public Name as string
    Public Sub Init(ByVal Id as Long)
        Me.Id = Id
        Code = ""
        Name = ""
    End Sub
    Public Property Get IdKey() as String
        IdKey = Code
    End Property

    ...... 
```

项目中的所有集合类都使用这种标准方法。但是，并非集合类的所有属性/方法都被实际使用。大多数集合用于“for each”循环。使用字符串键的键控访问非常普遍。按索引进行键控访问要少得多。

理想情况下，我想采用标准方法来转换这些类。我真的不想检查每个集合，它的用途是考虑我是否需要一个列表、字典等。其中一些集合包含 100,000 个对象，有些只包含 10 个。但是，另一方面我不不想通过使用更复杂的结构而导致性能问题，而使用更简单的选项。

我将不胜感激有关最佳方法的任何建议。我考虑了以下几点。

1.  坚持旧式收藏。因此，转换为 VB.Net 会相对容易，但是，我宁愿转向更现代的结构。

2.  让 CAccounts 继承 KeyedCollection(Of String, CAccount)。幸运的是，集合中的大多数类都将密钥作为类的一部分（例如上面的 CAccount.IdKey）。这似乎运作良好。但是，相对较少的类将通过数字索引访问该集合。那么，如果我只想通过字符串键进行键控访问，这可能是矫枉过正吗？

3.  让 CAccounts Inherit Dictionary(Of String, CAccount) 用于我不需要通过数字索引访问的类。我遇到的问题是所有现有的“for each”循环就像“for each account in accounts”。我不想将所有这些发生更改为“针对accounts.Values 中的每个帐户”之类的东西。虽然也许我可以通过更改默认属性来解决这个问题？

4.  让 CAccounts 继承 MyCollection(Of String, CAccount)，其中 MyCollection 是我自己的定制集合。这似乎有点太辛苦了。

我倾向于选择选项 2 - 将所有内容都设为 KeyedCollection。然后在需要时进行例外处理（例如非唯一键）。但是，如果 KeyedCollection 比 Dictionary 慢得多，我可能会选择 Dictionary 作为标准，并且只需在需要通过数字索引访问的地方使用 KeyedCollection。

所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:50:53.427

*   将所有集合转换为`Dictionary(Of String, Whatever)`或`KeyedCollection`，以更合适的为准。
*   通过运行程序查看是否存在性能问题。
*   如果有，请使用分析器查明罪魁祸首并将其类型更改为更合适的类型。

但总的来说，我总是建议完全重写而不是尝试移植 VB6 代码。根据我的经验，以及从其他开发人员那里听到的情况，这总是会消耗更少的时间，至少对于正在积极开发的代码而言。如果您有一个永远不会再次触及代码库的一次性写入端口，那么移植可能更有意义，但我不必担心使用现代集合，只需使用兼容性类即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:50:24.920

你会想要一篇`KeyedCollection<TKey, TItem>` MSDN 文章：http: [//msdn.microsoft.com/en-us/library/ms132438.aspx](http://msdn.microsoft.com/en-us/library/ms132438.aspx)

```
Imports System
Imports System.Collections.Generic
Imports System.Collections.ObjectModel

' This class represents a very simple keyed list of OrderItems,
' inheriting most of its behavior from the KeyedCollection and 
' Collection classes. The immediate base class is the constructed
' type KeyedCollection(Of Integer, OrderItem). When you inherit
' from KeyedCollection, the second generic type argument is the 
' type that you want to store in the collection -- in this case
' OrderItem. The first generic argument is the type that you want
' to use as a key. Its values must be calculated from OrderItem; 
' in this case it is the Integer field PartNumber, so SimpleOrder
' inherits KeyedCollection(Of Integer, OrderItem).
'
Public Class SimpleOrder
    Inherits KeyedCollection(Of Integer, OrderItem)

    ' The parameterless constructor of the base class creates a 
    ' KeyedCollection with an internal dictionary. For this code 
    ' example, no other constructors are exposed.
    '
    Public Sub New()
        MyBase.New()
    End Sub

    ' This is the only method that absolutely must be overridden,
    ' because without it the KeyedCollection cannot extract the
    ' keys from the items. The input parameter type is the 
    ' second generic type argument, in this case OrderItem, and 
    ' the return value type is the first generic type argument,
    ' in this case Integer.
    '
    Protected Overrides Function GetKeyForItem( _
        ByVal item As OrderItem) As Integer

        ' In this example, the key is the part number.
        Return item.PartNumber   
    End Function

End Class 
```

# c++ - 如何将 C++ 宏转换为 typedef？

> ID：10259013
> 
> 赞同：1
> 
> 时间：2012-04-21T12:44:26.070
> 
> 标签：c++, c, port, typedef, c-preprocessor

是否有`typedef`等效于：

```
#define HashTabOf(i)    htab[i] 
```

和

```
#define MAXCODE(n_bits) (((code_int) 1 << (n_bits)) - 1) 
```

?

代码正在从**C**移植到 C++。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:48:21.040

不是typedef，而是c++的方式是：

```
template <typename T>
inline T &HashTabOf(size_t i)
{
    return htab[i];
} 
```

和

```
inline size_t MAXCODE(size_t n_bits)
{
    return (1 << n_bits) - 1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T12:50:21.410

我会将@Dani 的模板解决方案实现为：

```
inline auto & HashTabOf(size_t i) -> decltype(htab[0])
{
    return htab[i];
} 
```

它仅在 C++11 中有效。它使用了一个由 C++11 引入的名为[trailing-return-type的特性。](https://stackoverflow.com/questions/7255379/trailing-return-types-decltype-and-const-ness)

这个解决方案的好处是它不再是一个模板。使用时无需提及`T`，而在@Dani 的解决方案中也必须提及`T`：

```
auto item = HashTabOf<Type>(4); //Dani's solution 
auto item = HashTabOf(4);       //My solution 
```

* * *

是的，你可以简单地这样写：

```
inline int & HashofTable(size_t i)
{ 
   return htab[i]; 
} 
```

另外，为什么不`htab[i]`直接使用呢？

# ios - 设置按钮标题时给出警告 uibutton 可能无法响应 -settitle

> ID：10259015
> 
> 赞同：0
> 
> 时间：2012-04-21T12:44:58.023
> 
> 标签：ios, uibutton

尝试将文本设置为按钮时收到警告 UIButton 可能无法响应 -'settitle'。

对于下面的代码行。

```
[firstButton setTitle:[buttonArray objectAtIndex:0]];

[secondbutton setTitle:[buttonArray objectAtIndex:i+index]]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:49:22.177

尝试：

```
[firstButton setTitle:[buttonArray objectAtIndex:0] forState:UIControlStateNormal];

[secondbutton setTitle:[buttonArray objectAtIndex:i+index] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T12:49:16.823

整个方法签名是 – setTitle:forState:

forState: 是方法名的一部分，不是可选参数。

# .htaccess - htaccess重定向不去新页面

> ID：10259018
> 
> 赞同：0
> 
> 时间：2012-04-21T12:45:25.510
> 
> 标签：.htaccess

我正在尝试通过在我的 htaccess 中使用以下代码来重定向子类别更改。

```
RewriteEngine On
RewriteRule ^old-category/(.*)$ /new/category/$1 
```

我能知道这段代码是否也应该将我的客户重定向到新地址吗？我已经尝试过了，但显然它没有将我重定向到新页面。

提前致谢。

# url - 从 url 启动 virtualbox vm？

> ID：10259020
> 
> 赞同：2
> 
> 时间：2012-04-21T12:45:30.847
> 
> 标签：url, virtualbox

是否可以从 URL 启动 virtualbox vm？例如，HTML

```
<a href="apt://fortune/">install fortune</a> 
```

将导致apt下载并安装fortune包（或至少找到它并要求用户确认）

有没有办法用 virtualbox vms 做到这一点？也许

```
<a href="vbox://vm1/"> vm1 </a> 
```

例如。

编辑：我的操作系统是 Ubuntu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:00:16.193

虚拟框不提供任何 url 方案处理程序。但是您可以通过添加注册表项在 Windows 中创建自己的。^([MSDN](http://msdn.microsoft.com/en-us/library/aa767914.aspx))

`alert`以下是如何创建URL 方案

```
HKEY_CLASSES_ROOT 
     alert
          (Default) = "URL:Alert Protocol"
          URL Protocol = ""
          DefaultIcon
               (Default) = "alert.exe,1"
          shell
               open
                    command
                         (Default) = "C:\Program Files\Alert\alert.exe" "%1" 
```

之后`alert:Hello world`将由`alert.exe`程序处理。

# java - 使用 SCA 组件运行 GWT

> ID：10259023
> 
> 赞同：0
> 
> 时间：2012-04-21T12:46:03.957
> 
> 标签：java, gwt, sca

我在 java 项目中使用 SCA 和 Frascati。到目前为止，它在简单的 java 项目中运行良好，但现在我想创建一个 Google Web Toolkit 项目并将其与其他项目集成。

使用 frascati 编译 gwt 项目时出现错误...我的问题是：您知道如何组织此架构或如何将我的 gwt 项目与其他组件通信吗？

错误：

![控制台中的错误](../Images/d748743771dc7cedc248346734a2fa82.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:31:23.757

GWT 在客户端运行 - GWT 编译器将 Java 类转换为客户端 Java 脚本。因此，您需要将所有业务逻辑——数据访问、SCA 或任何在服务器上运行的东西放在 GWT 实现之外。通常，这些组件保存在“服务器”包文件夹中。

我不确定您在这里尝试使用 GWT 实现什么目标；但如果您在 Eclipse 中使用 Google 插件创建 GWT 应用程序，则可以避免上述错误。创建基本项目后编译无任何错误，然后您可以将其他组件和库添加到项目中。

# python - 如何在 Python 中实现 worker/keepalive 线程组合？

> ID：10259027
> 
> 赞同：1
> 
> 时间：2012-04-21T12:46:28.677
> 
> 标签：python, multithreading

线程融化了我的大脑。我已经看到了几种不同的方法来实现 worker + keepalive 模型，但是很难找出最好的方法。这是代码的简化版本：

```
def start_thread(function):
    t = Thread(target=function)
    t.setDaemon(True)
    t.start()

def worker:
    run = True
    start_thread(keepalive_fn)

    msg = recv() #blocking
    while msg is not None and run:
        process(msg)
        try:
            msg = recv()
        except:
            if run:
                reconnect()
            break
    else:
        if run:
            reconnect()

def keepalive_fn():
    while run:
        try:
            send('hb')
        except:
            close_connection()
            break
        sleep(heartbeat)

def connect():
    open_connection()
    start_thread(worker)

def reconnect():
    close_connection()
    connect()

connect() 
```

这会像宣传的那样工作吗？有没有更好的办法？请注意，调用 close_connection() 时没有损坏的消息，因为 recv() 已经处理了这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:09:21.497

通常的方法是启用 recv() 调用的超时，通过在套接字上设置超时或使用 select/epoll() 调用并使用它来发出轮询和超时。伪：

```
bool timedOutOnce=false;
while(true){
  result=recv();
  if(result<>timeout){
       timedOutOnce=false;
       if (message<>serverPollReply) processMsg();
  }
  else
    {
      if(timedOutOnce){
         // server has not replied!!
         closeSocket;
         return(NoReplyFromServer);
      }
      else
        {
           // nothing received for a while, so..
           send(serverPollMessage);
           timedOutOnce=true;
        }
    }

} 
```

# c - rand() 不返回随机值

> ID：10259028
> 
> 赞同：2
> 
> 时间：2012-04-21T12:46:38.007
> 
> 标签：c, linux, gcc, matrix, libc

它是一个生成随机厄米特矩阵[厄米特矩阵](http://en.wikipedia.org/wiki/Hermitian_matrix)的小代码。

在每次调用 rand() 之前，我都调用了 srand()。但输出中仍然没有随机性。

我使用了 c99 的复杂数据类型功能来创建厄米特矩阵。我不确定我错在哪里:(

```
#include <stdio.h>
#include <math.h>
#include <complex.h>
#include <stdlib.h>
#include <time.h>

#define MATSIZE 5
#define RAND_RANGE 100

double complex mat[MATSIZE][MATSIZE];

void gen_mat()
{
  int i =0,j;
  int real;
  int img;
  for( ;i < MATSIZE; i++)
  {
    srand(time(NULL));
    real = rand()%RAND_RANGE + 1;
    srand(time(NULL));
    img = rand()%RAND_RANGE + 1;
    for(j = MATSIZE; j != i ; j--) 
    { 
       mat[i][j] = real + img * I;
       mat[j][i] = conj(mat[i][j]);
    }
    srand(time(NULL));
    if(i == j)
      mat[i][i] = rand()%RAND_RANGE + 0*I;
  }
}

void print_mat()
{
  int i,j;
  for(i = 0; i < MATSIZE; i++)
  {
    for(j = 0; j < MATSIZE; j++)
    {
      printf("%f + %f *i", creal(mat[i][j]), cimag(mat[i][j]));
      printf("    ");
    }
    puts("\n");
  }
}

int main()
{
  gen_mat();
  print_mat();
  return 0;
} 
```

样本输出

```
[aft@centos-c physics-numaric]$ ./a.out 
66.000000 + 0.000000 *i    67.000000 + 67.000000 *i    67.000000 + 67.000000 *i             67.000000 + 67.000000 *i    67.000000 + 67.000000 *i    

67.000000 + -67.000000 *i    66.000000 + 0.000000 *i    67.000000 + 67.000000 *i      67.000000 + 67.000000 *i    67.000000 + 67.000000 *i    

67.000000 + 67.000000 *i    67.000000 + -67.000000 *i    66.000000 + 0.000000 *i    67.000000 + 67.000000 *i    67.000000 + 67.000000 *i    

67.000000 + 67.000000 *i    67.000000 + -67.000000 *i    67.000000 + -67.000000 *i    66.000000 + 0.000000 *i    67.000000 + 67.000000 *i    

67.000000 + 67.000000 *i    67.000000 + -67.000000 *i    67.000000 + -67.000000 *i      67.000000 + -67.000000 *i    66.000000 + 0.000000 *i 
```

EDIT 在 main() 中调用 srand 实际上解决了这个问题。谢谢你们。

```
[aft@centos-c physics-numaric]$ ./a.out 
31.000000 + 0.000000 *i    81.000000 + 75.000000 *i    81.000000 + 75.000000 *i     81.000000 + 75.000000 *i    81.000000 + 75.000000 *i    

81.000000 + -75.000000 *i    53.000000 + 0.000000 *i    69.000000 + 57.000000 *i    69.000000 + 57.000000 *i    69.000000 + 57.000000 *i    

69.000000 + 57.000000 *i    69.000000 + -57.000000 *i    27.000000 + 0.000000 *i    93.000000 + 11.000000 *i    93.000000 + 11.000000 *i    

93.000000 + 11.000000 *i    69.000000 + -57.000000 *i    93.000000 + -11.000000 *i    58.000000 + 0.000000 *i    76.000000 + 78.000000 *i    

76.000000 + 78.000000 *i    69.000000 + -57.000000 *i    93.000000 + -11.000000 *i    76.000000 + -78.000000 *i    67.000000 + 0.000000 *i 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T12:48:14.690

不要`srand`在每次调用之前调用`rand`。程序启动时调用一次。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T12:48:19.257

`srand`如果循环不要在内部调用。只调用一次。

```
srand(time(NULL));
for( ;i < MATSIZE; i++)
{
    // ... calls to rand()   
} 
```

否则，您使用相同的种子播种随机生成器（因为它足够快以获得相同的时间）

顺便说一句，很多时候我发现为我初始化许多东西的程序/序列创建一个 init 函数非常传统，包括随机生成（例如 call `srand()`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T12:48:47.883

您不想`srand()`每次都为随机数生成器播种！只需在程序开始时调用一次。然后调用`rand()`以获取下一个随机数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T13:04:32.837

不要这样做：

```
rand()%RAND_RANGE + 0*I; 
```

，因为如果 RAND_RANGE 和 RAND_MAX+1 不​​相除，则会导致较低的值被过采样。（“几乎总是”是这种情况）

另外：基于 time(NULL) 重新启动生成器在大多数情况下将以完全相同的值重新启动，因为 time_t 的粒度是一秒。

最终：rand_max 将具有*至少*15 位 (32K) 的随机值。较旧的系统实际上可能仅提供 15 位，周期为 32 K。

更新：这是[wakkerbot](http://sourceforge.net/projects/wakkerbot/files/)的一个片段。urnd() 函数尝试返回一个介于 0 和范围之间的无偏值。测试可能可以更优雅地执行。

```
typedef unsigned long long BigThing;

unsigned int urnd(unsigned int range)
{
    static bool flag = FALSE;

    if (flag == FALSE) {
#if defined(__mac_os) || defined(DOS)
        srand(time(NULL));
#else
        srand48(time(NULL));
#endif
    }
    flag = TRUE;
#if defined(__mac_os) || defined(DOS)
    return rand()%range;
#else

if (range <= 1) return 0;

while(1)        {
    BigThing val, box;
#if WANT_RDTSC_RANDOM
    val = rdtsc_rand();
#else
    val =  lrand48();
#endif
/* we need this to avoid oversampling of the lower values.
 * Oversampling the lower values becomes more of a problem if (UNSIGNED_MAX/range) gets smaller
 */
    box = val / range;
    if ((1+box) *range < range) continue;
    return val % range;
        }
#endif
} 
```

# java - 为什么我的 java 应用程序在年轻代 gc 上花费了 30% 的时间？

> ID：10259032
> 
> 赞同：2
> 
> 时间：2012-04-21T12:47:25.640
> 
> 标签：java, solr, garbage-collection

我正在查看 Solr 安装的 gc 日志文件，我注意到它花费了 30% 的时间来执行年轻代 gc。下面的日志片段跨越大约一秒，gc 时间加起来为 0.34 秒。

我的问题是：这是一个问题吗？如果是，是什么原因造成的？

我在 Linux 上运行 jdk 1.6.0_24

```
1004626.109: [GC 1004626.109: [ParNew: 74847K->5219K(76672K), 0.0838750 secs] 10831779K-
10762151K(11525824K), 0.0841790 secs] [Times: user=0.24 sys=0.00, real=0.09 secs] 
1004626.320: [GC 1004626.320: [ParNew: 73379K->5468K(76672K), 0.0527070 secs] 10830311K->10762874K(11525824K), 0.0529680 secs] [Times: user=0.20 sys=0.00, real=0.06 secs] 
1004626.511: [GC 1004626.511: [ParNew: 73628K->4986K(76672K), 0.0591070 secs] 10831034K->10763002K(11525824K), 0.0593820 secs] [Times: user=0.20 sys=0.00, real=0.05 secs] 
1004626.698: [GC 1004626.698: [ParNew: 73146K->5611K(76672K), 0.0523060 secs] 10831162K->10764169K(11525824K), 0.0525820 secs] [Times: user=0.21 sys=0.00, real=0.05 secs] 
1004626.902: [GC 1004626.902: [ParNew: 73771K->6878K(76672K), 0.0653490 secs] 10832329K->10765868K(11525824K), 0.0656210 secs] [Times: user=0.22 sys=0.00, real=0.06 secs] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:53:01.503

不，这不是问题。这意味着你的对象来来去去——你在范围内创建它们，使用它们，然后它们就有资格进行 GC。我不认为这表明出了什么问题。

另一个极端将是一个问题：对象被创建、老化和停留时间过长。这就是发生内存泄漏和填充烫发空间的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:18:44.240

我觉得你这里*确实*有问题。

我不是阅读 GC 日志的专家，但我认为这是说你有一个 76672K 的“年轻”空间，总堆大小为 11525824K。此外，每个 GC 周期后的总堆使用量为 10765868K ......并且还在增长。它（显然）花费了大约 30% 的时间进行垃圾收集。

我的诊断是您的堆几乎已满，并且直接导致您花费大量（并且越来越多）时间进行垃圾收集。

我的建议是重新启动应用程序（短期），并寻找内存泄漏（长期）。如果没有内存泄漏（即您的应用程序正在*使用*所有堆空间），那么您需要寻找减少应用程序内存使用量的方法。

您的应用程序似乎确实产生了相当多的垃圾，但这并不一定是担心。HotSpot GC 可以非常有效地回收垃圾。它必须处理的非垃圾数量会导致性能问题。

# linux - 在 Windows / Linux 中为 Mac 创建包

> ID：10259033
> 
> 赞同：2
> 
> 时间：2012-04-21T12:47:32.847
> 
> 标签：linux, macos, r, package

我一直在努力自己制作 ar 包。我按照 stackoverflow 中上一个问题中关于[如何为外行开发包的说明进行](http://cran.r-project.org/bin/windows/Rtools/)操作。这是我在上一个问题之后使用的步骤。

1.  在新的 R 会话中运行 R 代码

    ```
    # random DNA function
    randDNA = function(n){
    paste(sample(c("A", "C", "T", "G"), n, replace = TRUE), collapse = "")
    }
    # DNA to RNA function
    dna2rna <- function(inputStr) {
      if (!is.character(inputStr))
        stop("need character input")
      is = toupper(inputStr)
      chartr("T", "U", is)
    }

    # complementary sequence function
    compSeq <-  function(inputStr){
     chartr("ACTG", "TGAC", inputStr)
     }

    # example data
    dnaseq1 <- c("ATTGTATCTGGGTATTTCCCTTAATTGGGGCCTTT")
    dnaseq2 <- c("TGGGGTAAACCCGGTTTAAAATATATATATTTTT")
    myseqdata <- data.frame(dnaseq1, dnaseq2)
    save(myseqdata, file = "myseqdata.RData") 
    ```

2.  安装[Rtools](http://cran.r-project.org/bin/windows/Rtools/)安装 R 包[utils](http://cran.r-project.org/web/packages/R.utils/index.html)

3.  Pefrom R 中的以下任务

    ```
    require(utils)
    package.skeleton(list = c("randDNA","dna2rna", "compSeq", "myseqdata"), 
    name = "dnatool",environment = .GlobalEnv, path = "c:", force = FALSE) 
    ```

4.  在 Windows 7 中编辑系统环境变量路径以跟随

    ```
    C:\Rtools\bin;C:\Rtools\perl\bin;C:\Rtools\MinGW\bin; 
    C:\Program Files\R\R-2.14.2\bin\x64; 
    ```

    （`>path`在命令行中输入以检查路径是否设置正确。

5.  复制步骤（3）中的文件夹 dnatool 并放入名为 rpackage 的新文件夹，现在将目录更改为该文件夹（在 DOS 中）

    ```
    c: \ repackage>  R CMD build dnatool 
    c: \ repackage>  Rcmd build dnatool 
    ```

    **编辑：我有时会得到 dnatool.zip，但有时会得到 dnatool.tar.gx**

6.  在命令行 (DOS) 中检查包

    ```
    c: \ repackage> R CMD check dnatool 
    ```

我能够在 Windows 中将其打包为“dnatool.zip”。

如何编译 MAC 或 unix 源？有哪些不同的步骤？

```
Unix source:     dnatool.tar.gz
Mac OS X binary: dnatool.tgz 
```

我需要Mac电脑吗。我确实有linux virtualbox并在其中安装了ubuntu？

编辑：

我应该使用以下逗号从步骤 (3) 文件夹 dnatool 获取源代码二进制文件吗？

```
$ tar -zcvf dnatool.tar.gz/home/dnatool 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:01:26.697

使用创建的软件包`R CMD build`可以安装在其他操作系统类型上。即使您的包包含 R（c 或 c++）以外的源代码，情况也是如此。仅当您创建二进制分发版时（我认为通过将 --binary 添加到 r cmd 构建调用），该包才成为特定于平台的。构建包所需的工具通常已经安装在 linux 或 mac 下。因此，如果您创建一个源代码发行版，它应该可以在所有主要发行版下工作。要创建 mac 二进制文件，您需要一个 mac，或者创建一个交叉编译器环境。第二个选项可能是一个相当大的挑战，我说你可以给谷歌。请注意，如果您将包上传到 CRAN，则所有包的构建都已为您完成。

# r - 在一个 data.frame 中查找具有相同数据的列

> ID：10259037
> 
> 赞同：0
> 
> 时间：2012-04-21T12:47:59.287
> 
> 标签：r, dataframe

我有 1 个名为 A 的 data.frame，其中有 5000 列。如何在此 data.frame 中找到彼此相等的列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:45:38.800

正如@John 提到的，使用`duplicated`. 我要补充一点，转置 data.frame 会强制将所有数据转换为相同的数据类型，然后再与`duplicated`. 举个例子，这里是一个data.frame：

```
df <- data.frame( a = LETTERS[1:3],
                  b = 1:3,
                  c = as.character(1:3),
                  d = LETTERS[1:3],
                  e = 1:3,
                  f = 1:3)
df
#   a b c d e f
# 1 A 1 1 A 1 1
# 2 B 2 2 B 2 2
# 3 C 3 3 C 3 3 
```

请注意， column与 columns 、和`c`非常相似，但由于类型不同（字符与数字）而不相同。@Jubbles 建议的解决方案将忽略这些差异。 `b``e``f`

`identical`相反，在 data.frame 的列上使用该函数似乎更合适。您可以使用以下方法两两比较列`outer`：

```
are.cols.identical <- function(col1, col2) identical(df[,col1], df[,col2])
identical.mat      <- outer(colnames(df), colnames(df),
                            FUN = Vectorize(are.cols.identical))
identical.mat
# [,1]  [,2]  [,3]  [,4]  [,5]  [,6]
# [1,]  TRUE FALSE FALSE  TRUE FALSE FALSE
# [2,] FALSE  TRUE FALSE FALSE  TRUE  TRUE
# [3,] FALSE FALSE  TRUE FALSE FALSE FALSE
# [4,]  TRUE FALSE FALSE  TRUE FALSE FALSE
# [5,] FALSE  TRUE FALSE FALSE  TRUE  TRUE
# [6,] FALSE  TRUE FALSE FALSE  TRUE  TRUE 
```

从这里，您可以使用聚类来识别相同列的组（可能有更好的方法，所以如果您知道，请随时评论甚至编辑我的答案。）

```
library(cluster)
distances <- as.dist(!identical.mat)
tree      <- hclust(distances)
cut       <- cutree(tree, h = 0.5)
cut
# [1] 1 2 3 1 2 2

split(colnames(df), cut)
# $`1`
# [1] "a" "d"
# 
# $`2`
# [1] "b" "e" "f"
# 
# $`3`
# [1] "c" 
```

**编辑1：**忽略浮点值的差异，可以使用

```
are.cols.identical <- function(col1,col2) isTRUE(all.equal((df[,col1],df[,col2])) 
```

**编辑2：**比聚类相同列的名称分组更有效的方法是

```
cut <- apply(identical.mat, 1, function(x)match(TRUE, x))
split(colnames(df), cut) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T09:18:14.800

[这个问题与这里](https://stackoverflow.com/q/10106163/1281189)的问题非常相似，有细微的差别，但有相同的警告。

我会再次建议使用`digest()`，如下所示（感谢@flodel 提供的 data.frame 和上面的一个非常好的建议）

```
df <- data.frame( a = LETTERS[1:3],
  b = 1:3,
  c = as.character(1:3),
  d = LETTERS[1:3],
  e = 1:3,
  f = 1:3)

dfDig <- sapply(df, digest)

ansL <- lapply(seq_along(dfDig), function(x) names(which(dfDig == dfDig[x])))

unique(ansL)

# [[1]]
# [1] "a" "d"

# [[2]]
# [1] "b" "e" "f"

# [[3]]
# [1] "c" 
```

不过，这仍然无法区分`1.0`and `1`。

**编辑**

正如@flodel 的评论中所建议的那样，在创建之后可以选择使用以下内容`dfDig`

```
split(colnames(df), vapply(dfDig, match, 1L, dfDig)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T13:04:14.940

如何转置数据帧并使用`duplicated()`？

```
B <- as.data.frame(t(A))
dup1 <- duplicated(B)
# if you want to identify all duplicated rows
dup2 <- duplicated(B, fromLast = TRUE)
dup_final <- dup1 * dup2
saved_colnames <- colnames(A)[dup_final] 
```

# google-app-engine - 将 OpenID 添加到我的 AppEngine 网站？用户如何创建帐户？

> ID：10259042
> 
> 赞同：0
> 
> 时间：2012-04-21T12:48:16.197
> 
> 标签：google-app-engine, openid

嗨，我即将开始使用 OpenID 登录我的用户。我没问题，登录过程看起来很简单。

但我不知道用户注册是如何工作的，当用户点击登录或注册链接时，会发生什么？我需要创建自己的 OpenID Provider 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:35:22.437

用户需要有一个[OpenID 提供者](http://openid.net/get-an-openid/)的帐户。OpenID 的全部意义在于，用户可以拥有一个帐户并使用它来登录所有支持 OpenID 的站点。

# java - JSF 使用 JSP 吗？

> ID：10259045
> 
> 赞同：11
> 
> 时间：2012-04-21T12:48:34.873
> 
> 标签：java, jsp, jsf, servlets

我正在学习 JSF，对此我有一些疑问。我知道 JSF 是一个用于制作页面的 UI 框架，我现在正在使用它并成功地制作了 zome。但是我不明白 JSF 是否建立在 JSP 之上，所以要编写自己的组件，您需要了解 JSP。或者这完全是另一种技术？我在 Servlet/JSP 编程方面没有扎实的基础，我想知道我是否需要先阅读它？除了 Core JavaServerFaces 书之外，还有哪些最好的学习场所？如果我也应该学习 servlet 和 jsp，我应该从哪些书开始阅读？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T12:56:58.417

JSF 2.0 是 Java EE 6 的一部分，于 2009 年 12 月发布（已经超过 2 年），JSP 作为视图技术已被**弃用**，取而代之的是基于 XML 的视图技术 Facelets。另请参阅[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)（重点是我的）：

> 术语 Facelets 是指 JavaServer Faces 技术的视图声明语言。JavaServer Pages (JSP) 技术以前用作 JavaServer Faces 的表示技术，它不支持 Java EE 6 平台中 JavaServer Faces 中可用的所有新功能。**JSP 技术被认为是 JavaServer Faces 不推荐使用的表示技术。**Facelets 是 JavaServer Faces 规范的一部分，也是构建基于 JavaServer Faces 技术的应用程序的首选表示技术。

至于学习JSF前的基础知识准备，请确保您至少了解并理解HTTP、HTML、CSS、JavaScript、Servlets和XML。HTTP，因为您需要了解它的无状态性质。HTML、CSS 和 JavaScript，因为这是 JSF 代码最终生成的内容，尤其是 HTML 表单很重要，所以 JSF 面向基于表单的应用程序。Servlet，因为这是构建 JSF 框架的地方。XML，因为那是 Facelets 的基础。

### 也可以看看：

*   [我们的 JSF 标签 wiki 页面](https://stackoverflow.com/tags/jsf/info)

# opengl - 使用 glut 的 OpenGL 三角形旋转 - 需要一个简单的修正

> ID：10259047
> 
> 赞同：1
> 
> 时间：2012-04-21T12:48:38.820
> 
> 标签：opengl, rotation, glut, glrotate

**这是我的代码：**

```
#include <stdio.h>
#include "glut.h"

float width = 800.0;
float height = 600.0;

void changeSize(int w,int h){
    if(h==0)
        h=1;
    width = w;
    height = h;
    GLdouble ratio = 1.0f*w/h;

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glViewport(0,0,w,h);

    gluPerspective(45,ratio,1,1000);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0,0,10,
              0,0,-1,
              0,1,0);
}

void renderScene(){
    glClearColor(0,0,255,1);
    glClearDepth(1.0f);
    glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);

    //glPushMatrix();

    glRotatef(0.09,0.0,0.0,0.09); 
    glColor3f(1.0,0.0,0.0);
        glBegin(GL_QUADS);
        glVertex3f(-1.0f,-1.0f,0.0f);
        glVertex3f(1.0f,-1.0f,0.0f);
        glVertex3f(1.0f,1.0f,0.0f);
        glVertex3f(-1.0f,1.0f,0.0f);
    glEnd();
    //glPopMatrix();

    glPushMatrix();
    glColor3f(0.0,1.0,0.0);
    glTranslatef(-3.0,0.0,0.0);

    glRotatef(0.09,0.0,0.0,-1.0);
    glBegin(GL_TRIANGLE_STRIP);
        glVertex2f(-1,-1);
        glVertex2f(0,1);
        glVertex2f(1,-1);
        glEnd();

    glPopMatrix();

    glutSwapBuffers();

}

int main(int argc, char **argv){

    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100,200);
    glutInitWindowSize(width,height);
    glutCreateWindow("OpenGL");

    glutDisplayFunc(renderScene);
    glutIdleFunc(renderScene);

    glutReshapeFunc(changeSize);

    glutMainLoop();

    return(0);

} 
```

我画了一个矩形和一个三角形。

它们现在都在旋转，但我希望矩形保持静止并仅旋转三角形。我在这里做错了什么？我是否需要更改推送流行线或其他内容。我尝试了很多组合，但我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:04:44.210

如果您不想旋转矩形，请`glRotatef(0.09,0.0,0.0,0.09);`在绘制矩形之前删除旋转调用。您需要在绘制三角形、矩形之前-之后推送矩阵。要停止旋转，您必须删除旋转调用，而不是推送矩阵。

编辑：要旋转三角形，您需要更改角度。如果您保持固定角度`0.09`，则不会有动画。一种简单的方法是将角度跟踪为全局变量。像这样的东西：

```
double ang = 0;  // global variable

void renderScene(){
    // other codes

    glRotatef(ang++,0.0,0.0,-1.0);  // use and change ang instead of using fixed 0.09
    glBegin(GL_TRIANGLE_STRIP);

    // remaining codes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:20:09.713

你应该做的是更换

```
glRotatef(0.09,0.0,0.0,0.09); 
glColor3f(1.0,0.0,0.0);
    glBegin(GL_QUADS);
    glVertex3f(-1.0f,-1.0f,0.0f);
    glVertex3f(1.0f,-1.0f,0.0f);
    glVertex3f(1.0f,1.0f,0.0f);
    glVertex3f(-1.0f,1.0f,0.0f);
glEnd(); 
```

和

```
glColor3f(1.0,0.0,0.0);
    glBegin(GL_QUADS);
    glVertex3f(-1.0f,-1.0f,0.0f);
    glVertex3f(1.0f,-1.0f,0.0f);
    glVertex3f(1.0f,1.0f,0.0f);
    glVertex3f(-1.0f,1.0f,0.0f);
glEnd(); 
```

推/弹出矩阵不会对矩形的变换做任何改变，它只会防止矩形的变换影响三角形的变换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:29:20.073

您的问题是围绕正方形的旋转是唯一实际复合每一帧的旋转。因为您推动/弹出围绕三角形的旋转，所以每次绘制它时它都会重置为默认状态。

而不是让它随着时间的推移旋转，你只是做一个小旋转，弹出它（从而消除旋转），然后当你绘制下一帧时，你做完全相同的小旋转，所以三角形看起来不像它永远移动，它只是每次都以相同的旋转状态绘制。

因为您不会围绕四边形弹出旋转，所以它会在每一帧上复合。你想要做的是每帧增加一个变量，然后旋转变量的数量。

首先将 a 定义`float rotationAngle`为类的成员变量。

然后在绘图调用中，运行如下内容：

```
rotationAngle += rotationSpeed;
glPushMatrix();
  //do quad specific transformations
  //draw quad
glPopMatrix(); //remove quad specific transforms from stack

glPushMatrix();
   glRotatef(rotationAngle, 0, 0, 1);
   //do other triangle specific rotations
   //draw triangle
glPopMatrix(); //remove triangle's rotation and other transforms 
```

# java - 从具有特定版本的包中检索文件

> ID：10259055
> 
> 赞同：2
> 
> 时间：2012-04-21T12:49:40.120
> 
> 标签：java, osgi

[这里](https://stackoverflow.com/questions/3810303/how-to-reference-an-included-file-in-osgi-bundle-when-performing-java-io-file-or)提出的问题显示了如何通过 URL 引用来自包的文件，例如`platform:/plugin/de.vogella.rcp.plugin.filereader/files/test.txt`.

我想让同一个包的两个版本同时运行，并且我正在检索的文件在不同版本中会有所不同。是否可以使用版本信息引用具有上述 URL 方案的包，以便我可以获得正确版本的文件？

如果这不可能，是否可以通过其他方式检索特定版本的捆绑包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:48:09.127

你有几个选择。将版本附加到插件名称（用下划线分隔）应该可以，但我现在无法尝试确认该表单与平台 URL 处理程序一起使用。例如：`platform://my.bundle_3.1/some/file.txt`。

否则，您可以直接使用 OSGi API。如果您有`BundleContext`，您可以使用它来查找您想要的确切捆绑包，然后调用`bundle.getResource()`以获取您想要的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:58:42.600

查看 BundleTracker，这使得无论版本如何都可以轻松跟踪捆绑包。一般来说，最好不要查看包的名称或版本，而是对它们包含的资源做出反应。也就是说，搜索 OSGi 扩展器模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:58:48.693

不可能同时运行同一个包的两个版本。OSGi 启动时有一个称为捆绑解析的过程，它将从所有可用的捆绑包中选择单个版本，以便最好地满足其所有依赖项。如果您确实需要两个版本，则需要通过将版本号推入捆绑包 id 以某种方式伪造它，此时将清楚如何区分它们。

# python - 如何使这个 python 脚本更快？

> ID：10259058
> 
> 赞同：0
> 
> 时间：2012-04-21T12:49:54.103
> 
> 标签：python

我试图从两组列表中找到重叠列表。我首先生成第一个列表

```
while True:
    line=f.readline()
    if not line:
        break
    list_1.append(line) 
```

并使用此列表扫描第二个文件：

```
while True:
    line1=f1.readline()
    if not line1:
        break
    for i in list_1:
        if i==line1[:17]:
            list_2.append(line1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:13:13.993

ThiefMasters answer 将以任意顺序输出公共行。如果您希望项目的输出顺序与它们在其中一个文件中出现的顺序相同，请首先将*另一个*文件读入一组：

```
with open("file1.txt") as f:
    file1_set = set(f) 
```

然后搜索控制顺序的文件：

```
with open("file2.txt") as f:
    list2 = [line for line in f if line in file1_set] 
```

如果生成`list2`的内存不适合内存（我想这有点牵强），我们仍然可以通过将结果连续写回输出文件来使其工作：

```
with open("file2.txt") as f:
    with open("out.txt", "w") as out:
        for line in f:
            if line in file1_set:
                out.write(line) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T12:52:24.403

只要没有文件太大，将所有行存储在[集合](http://docs.python.org/library/stdtypes.html#set)中，然后比较这些集合：

```
lines_1 = set(f)
lines_2 = set(f1)
lines_in_both = lines_1 & lines_2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T13:41:37.487

如果你想找出两个文件的不同之处，你也可以使用 difflib 模块，它包含在 python 标准库中。该模块提供用于比较序列的类和函数。例如，它可以用于比较文件，并且可以生成各种格式的差异信息，包括 HTML 和上下文以及统一差异。[您可以在difflib 文档](http://docs.python.org/library/difflib.html#difflib.SequenceMatcher)中找到有用的比较方法。

```
difflib.SequenceMatcher(None, file1.read(), file2.read()) 
```

# c# - 在 MonoMac 中绘制文本

> ID：10259068
> 
> 赞同：0
> 
> 时间：2012-04-21T12:50:42.797
> 
> 标签：c#, monomac

我正在尝试在 MonoMac 中绘制一些文本，但没有成功。在提供的示例中，绘制了圆圈，但没有出现文本。

```
var context = NSGraphicsContext.CurrentContext.GraphicsPort;
context.SetStrokeColor (new CGColor(1.0f, 0f, 0f)); // red
context.SetLineWidth (1.0F);
context.StrokeEllipseInRect (new RectangleF(5, 5, 10, 10));
context.SetTextDrawingMode(CGTextDrawingMode.Stroke);
context.TextPosition = new PointF(0f, 0f);
context.ShowText("My text"); // is not shown 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:28:09.950

您只需要指定要使用的字体。

```
public override void DrawRect (RectangleF dirtyRect)
{
    var context = NSGraphicsContext.CurrentContext.GraphicsPort;

    context.SetStrokeColor (new CGColor(1.0f, 0f, 0f)); // red
    context.SetLineWidth (1.0F);
    context.StrokeEllipseInRect (new RectangleF(5, 5, 10, 10));
    context.SetTextDrawingMode(CGTextDrawingMode.Stroke);
    context.TextPosition = new PointF(0f, 0f);
    context.SelectFont ("Arial", 5, CGTextEncoding.MacRoman);
    context.ShowText("My text");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T03:18:51.910

你只需要重写drawRect。

```
public override void DrawRect (RectangleF dirtyRect)
    {
        NSString s = new NSString ("test");
        s.DrawString (new PointF(25,100), new NSDictionary ());
    } 
```

如果你想定制它，这里有一个[很好的参考](http://blog.ac-graphic.net/how-to-display-text/)。

# java - spring中具有多个角色的组件

> ID：10259071
> 
> 赞同：0
> 
> 时间：2012-04-21T12:50:59.507
> 
> 标签：java, spring, seam, lifecycle

在 seam 中 @Role 注释让我们可以为组件定义一个额外的命名角色，具有不同的作用域——它允许我们将相同的组件类绑定到不同的上下文变量。（任何 Seam 组件实例都可能绑定到多个上下文变量，但这让我们可以在类级别进行，并利用自动实例化。）

```
@Name("user")
@Entity
@Scope(CONVERSATION)
@Roles({@Role(name="currentUser", scope=SESSION),
        @Role(name="tempUser", scope=EVENT)})
public class User { 

    ... 

} 
```

春天呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:53:52.837

在 Spring 中没有开箱即用的方法可以做到这一点。

您可以使用 XML 或 JavaConfig 在多个范围内连接相同的 bean 类型，但不能从 bean 类中连接。并且：我也没有看到这样做的必要性。如果您在不同的范围内使用相同的 bean 类，您可能会遇到架构问题。

**一种可能的解决方案：**

定义一个包含数据的抽象类和两个包含 Spring 注释的子类，每个范围一个：

```
public abstract class User{
   // fields, getters , setters
}

@Component @Scope("session")
public class SessionUser extends User{}

@Component @Scope("request")
public class TempUser extends User{} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:50:09.657

我使用了 JavaConfig：

```
@Bean
@Scope(value = "request", proxyMode = ScopedProxyMode.TARGET_CLASS)
public EntityService requestScopedEntityService() {
    return new EntityService();
}

@Bean
@Scope(value = "prototype")
public EntityService prototypeScopedEntityService() {
    return new EntityService();
} 
```

# php - 仅邮寄选中的复选框

> ID：10259072
> 
> 赞同：0
> 
> 时间：2012-04-21T12:51:00.277
> 
> 标签：php

我正在尝试编写一个脚本，该脚本将允许我仅包含用户选择的那些复选框，然后将它们邮寄给我到相应的电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:55:21.333

```
$message = "<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<title>Something</title>
</head>
<body>

    <strong>Name</strong> : $name <br />
    PHONE : $phone <br />
    Company : $company<br />
    Selected options:<br />" .

 (isset($_POST['cb2']) ? 'Add me to your email list for updates<br>' : '') . 
 (isset($_POST['cb3']) ? 'Contact me regarding partnership<br>' : '') . 
 (isset($_POST['cb4']) ? 'Others<br>' : '') .
 (!isset($_POST['cb1'] &&
  !isset($_POST['cb2'] &&
  !isset($_POST['cb3'] &&
  !isset($_POST['cb4'] ? "None selected<br>" : "") .
    "Comments/Questions:<br />
    <hr />
    $mess
    <br />

</body>
</html>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:57:24.560

无论如何，浏览器只会发送选中的复选框。所以有如下内容：

```
<form action="index.php" method="POST">
    <label><input type="checkbox" value="Value of checkbox one" name="check[]"> Label for checkbox one</label>
    <label><input type="checkbox" value="Value of checkbox two" name="check[]"> Label for checkbox two</label>
    <label><input type="checkbox" value="Value of checkbox three" name="check[]"> Label for checkbox three</label>
    <label><input type="checkbox" value="Value of checkbox four" name="check[]"> Label for checkbox four</label>

    <button type="submit">Go</button>
</form> 
```

然后在 PHP 中，`$_POST["check"]`将包含所有选定值的数组。

# c - 编译mruby

> ID：10259082
> 
> 赞同：1
> 
> 时间：2012-04-21T12:53:12.250
> 
> 标签：c, compilation, mruby

我正在尝试编译[mruby](https://github.com/mruby/mruby)。这是我第一次从命令行编译一些东西。当我在目录上运行 make 时，我得到了这个：

```
make -C mrblib --no-print-directory CC=gcc LL=gcc
make -C ../tools/mrbc --no-print-directory CC=gcc LL=gcc
gcc -Wall -Werror-implicit-function-declaration -g -MMD -I../../src -I../../src/../include -c ../../src/st.c -o ../../src/st.o
In file included from ../../src/regint.h:93,
                 from ../../src/st.c:6:
../../src/../include/mruby.h: In function ‘mrb_special_const_p’:
../../src/../include/mruby.h:100: warning: comparison is always true due to limited range of data type
../../src/st.c: In function ‘st_hash’:
../../src/st.c:1053: error: ‘SIZEOF_ST_INDEX_T’ undeclared (first use in this function)
../../src/st.c:1053: error: (Each undeclared identifier is reported only once
../../src/st.c:1053: error: for each function it appears in.)
make[2]: *** [../../src/st.o] Error 1
make[1]: *** [../bin/mrbc] Error 2
make: *** [src/mrblib/mrblib.o] Error 2 
```

Mac OS X 10.7.3 上的 Buildig 有没有我遗漏的步骤？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:31:36.283

此问题已在数小时前修复。只需获取行李箱的新副本即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T02:55:30.930

如果这可能对任何人都有帮助，这里有一个关于如何开始使用 mruby 的快速教程：

作为先决条件，请确保您拥有 git、C 编译器和 bison。您可能已经安装了这些。

克隆 mruby 源代码，在这种情况下，我将把它放入`~/mruby`：

```
git clone https://github.com/mruby/mruby.git ~/mruby 
```

在您的 bash 配置文件中，创建一个指向该目录根目录的变量。以后会有用的。

```
export MRUBY_HOME=~/mruby 
```

现在在 mruby 根目录中，运行`make`：

```
cd $MRUBY_HOME && make 
```

mruby 现在已经编译了一些东西并将它放在一个`build`目录中。在那里你会找到一个库供你包含在你自己的脚本中。

现在让我们编译一个示例脚本。将此文件命名为`example.c`：

```
#include <stdlib.h>
#include <stdio.h>
#include <mruby.h>

int main(void)
{
  mrb_state *mrb = mrb_open();
  char code[] = "p 'hello world!'";
  printf("Executing Ruby code from C!\n");
  mrb_load_string(mrb, code);
  return 0;
} 
```

要编译这个脚本，我们需要指定我们刚刚编译的 mruby 库存档，并包含包含头文件的 mruby 包含目录：

```
gcc example.c $MRUBY_HOME/build/host/lib/libmruby.a -I $MRUBY_HOME/include 
```

这将创建一个名为`a.out`. 要指定特定的文件名，您可以传递一个`-o`选项和应该用于编译输出的文件的名称。执行我们新编译的程序应该会按预期显示：

```
./a.out
Executing Ruby code from C!
hello world! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-06T16:25:49.660

我让这个适用于 Windows。虽然分享它，以防人们需要它:)

我使用过：Windows 操作系统、mingw 编译器、bison（提取二进制文件和依赖项，否则会出现 dll not found 错误）ruby

在PATH环境变量中设置（mindw、bison和ruby）的所有bin文件夹。

接下来，在 mruby 文件夹中运行：mingw32-make.exe（在您的 mingw 的 Bin 文件夹中找到）。

如果所有 PATH 变量都设置正确，您的代码应该可以编译。

现在你应该看到 .\build\host\bin 和可执行文件和 .\build\host\lib 和所需的库。

接下来创建一个 C++ 程序（我使用了 C::B）。

```
#include <stdlib.h>
#include <stdio.h>
#include <mruby.h>
#include <mruby/compile.h>

int main(void)
{
  mrb_state *mrb = mrb_open();
  if (!mrb) { /* handle error */ }
  puts("Executing Ruby code from C!");
  mrb_load_string(mrb, "p 'hello world!'");
  mrb_close(mrb);
  return 0;
} 
```

@Andrew 示例对我不起作用。我收到一个错误：'mrb_load_string' 没有在这个范围内声明

我纠正了错误，包括：#include

我希望这对于为 Windows 设置库非常有用！

# c# - 返回静态列表<>

> ID：10259085
> 
> 赞同：0
> 
> 时间：2012-04-21T12:53:54.653
> 
> 标签：c#, list, static, xna

谁能帮帮我吗

我有一个静态 ListHelper 类，我想用它来存储许多不同类型的列表（float、Vector2 等类型的列表）。然后，当我想访问特定的 List<> 时，我可以调用这个类的方法

例如，我有一个名为 CalculationHelper 的类，我将使用它来进行一些计算。完成特定计算后，我将这些值添加到 ListHelper 中的一个列表中。

但是如何将这个静态 ListHelper 类的值返回给例如 Game1 类？

这是我的代码来显示我正在尝试做的事情。首先，我调用 CalculationHelper 方法从 Game1 进行一些计算

```
CalculationHelper.ForceIntersections(LineList[i], LineList[i + 1]); 
```

然后在 CalculationHelper 中进行计算并将结果添加到 ListHelper 类中的 VanishingPoint 列表中

```
public static class CalculationHelper
{
    public static void ForceIntersections(Line line1,Line line2,List<Sprite> VanishingPointIntersectionList, String greenCirlce)
    {
        Vector2 intersectionPoint;
        // Do some calculations

        // Add value to ListHelper
        ListHelper.IntersectionPoint = intersectionPoint;
    }       
} 
```

然后在 ListHelper 中将intersectionPoint 添加到List

```
public static class ListHelper
{
    static List<Vector2> VanishingPoint = new List<Vector2>();

    static Vector2 intersectionPoint;
    public static Vector2 IntersectionPoint 
    {
        get
        {
            // How do I return the List?
            foreach (var value in VanishingPoint)
            {
                 return value;          // NOT WORKING
            }        
        }
        set
        {
            intersectionPoint = value;
            VanishingPoint.Add(intersectionPoint);
        }
    }
} 
```

谁能解释这是如何完成的，即使这是最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:02:44.263

你需要某种钥匙。密钥可以嵌入 Vector2 对象本身，或者您可以切换到`Dictionary<CalculationTypes, Vector2>`. 这将允许您指定哪个项目是 VanishingPoint。

要从列表中获取特定对象，您必须使用 Find 方法：

```
return VanishingPoint.Find(v => v.SpecificType == SomeTypes.IntersectionPoint); 
```

或者在你的情况下：

```
foreach(Vector2 v in VanishingPoint)
{
  if(v.SpecificType == SomeTypes.IntersectionPoint)
  {
    return v;
  }
}
return null; 
```

但是，如果您想返回整个列表，则需要进行一些重构：

```
public static class CalculationHelper   
{   
    public static void ForceIntersections(Line line1,Line line2,List<Sprite> VanishingPointIntersectionList, String greenCirlce)   
    {   
        Vector2 intersectionPoint;   
        // Do some calculations   

        // Add value to ListHelper   
        ListHelper.VanishingPoints.Add(intersectionPoint);   
    }          
}  

public static class ListHelper    
{    
    static List<Vector2> VanishingPoints = new List<Vector2>();    

    public static List<Vector2> VanishingPoints 
    {    
        get    
        {    
            return VanishingPoints;          
        }      
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:05:00.780

这个：

```
public static Vector2 IntersectionPoint 
```

意味着你将返回 Vector2 类型的东西。如果你想返回一个列表，你需要这样做：

```
public static List<Vector2> IntersectionPoint 
{
        get
        {
            List<Vector2> temp;
            foreach (var value in VanishingPoint)
            {
                 temp.Add(value);         
            }     
            return temp;   
        }
        set
        {
            intersectionPoint = value;
            VanishingPoint.Add(intersectionPoint);
        }
    } 
```

但是，您的代码非常糟糕。您显然正在使用一些类变量，它们在同一实例中相互依赖。忘记“静态”并创建一个普通类或者，如果您想确保只有一个实例，请使用单例模式。

# node.js - Response.redirect 不会更改 Node.js 中的地址栏 url

> ID：10259086
> 
> 赞同：1
> 
> 时间：2012-04-21T12:54:14.630
> 
> 标签：node.js, express

我正在使用 express js 创建一个网络应用程序。在一些获取请求中，每当他单击链接时，我都会将用户重定向到另一个页面：

```
a( data-icon='home', data-transition='fade', data-role='button', data-theme='a',href='/logout') Home 
```

以下代码处理注销： // app.get('/logout'...)

```
logout: function(req, res) {
    req.logout();
    res.redirect('/');
} 
```

这实际上注销了用户，但地址栏 url 仍然指向[http://localhost:3000/logout](http://localhost:3000/logout)。这有什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:47:51.120

```
app.get('/logout', function(req, res){ 
    res.redirect('/');
}); 
```

查看更多[https://github.com/visionmedia/express/blob/master/lib/response.js#L488](https://github.com/visionmedia/express/blob/master/lib/response.js#L488)

# java - hadoop os x mrjob $HADOOP_HOME 未设置

> ID：10259089
> 
> 赞同：0
> 
> 时间：2012-04-21T12:54:27.597
> 
> 标签：java, python, macos, hadoop, mapreduce

我已经使用以下教程在我的 os x 本地机器上设置了 hadoop - [http://blogs.msdn.com/b/brandonwerner/archive/2011/11/13/how-to-set-up-hadoop-on- os-x-lion-10-7.aspx](http://blogs.msdn.com/b/brandonwerner/archive/2011/11/13/how-to-set-up-hadoop-on-os-x-lion-10-7.aspx)

我运行了字数统计示例，一切正常。现在，我想使用 python 编写 map reduce 作业并在我的本地 hadoop 实现上运行它。我正在尝试开源“mrjob”框架。我能够在本地运行他们的字数统计示例作业，但是当我像这样在 hadoop 实现上尝试时 -

```
$python mrjob/examples/mr_word_freq_count.py README.rst -r hadoop > counts 
```

我收到一条错误消息，提示 $HADOOP_HOME 未设置，它必须显式传递。我编辑了 .bash_profile 文件，当我从终端回显 $HADOOP_HOME 时，我得到 '/usr/local/hadoop'

我在 hadoop 上找不到 mrjob 框架的好文档。我只需要开始，这样我就可以在 mrjob 中运行示例字数统计作业。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:38:01.277

我是维护者之一。下次遇到此类问题时，您应该在 Github 上开一张票。我们根本不看 Stack Overflow。

与框架的其他部分相比，Hadoop 运行器获得的喜爱较少，但我们正在修复一个听起来与下一个版本 v0.3.5 相关的问题：[https ://github.com/Yelp/mrjob/issues/482](https://github.com/Yelp/mrjob/issues/482)

请向 Github 发送更多错误报告。

# android - 如何让自己的安卓应用看起来不错？

> ID：10259093
> 
> 赞同：0
> 
> 时间：2012-04-21T12:54:56.740
> 
> 标签：android, android-widget, android-4.0-ice-cream-sandwich

我有三星 sgs2 和官方 ics。Google 应用在我的 android（gmail、地图等）上看起来不错，它们使用本机 ics 小部件，但我自己的应用使用三星的小部件。如何在项目的配置文件中指定我想使用本机 android ics 小部件？我的意思是小部件是按钮、对话框、单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:57:25.530

默认应用程序使用 Holo 主题。要将其应用于您的应用程序，请添加

```
android:theme="@android:style/Theme.Holo" 
```

到清单中的应用程序标记。更多信息可以在这里找到：[http ://android-developers.blogspot.com/2012/01/holo-everywhere.html](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T12:57:27.570

我相信这只是一个主题问题。

尝试将您的应用程序设置为 Android Holo 主题。

此处示例： [http ://android-developers.blogspot.com/2012/01/holo-everywhere.html](http://android-developers.blogspot.com/2012/01/holo-everywhere.html)

# php - Preg-replace - 如果不执行任何操作，如果包含单词，则替换标题

> ID：10259095
> 
> 赞同：2
> 
> 时间：2012-04-21T12:55:24.017
> 
> 标签：php, regex, preg-replace

我想替换这个标题：

```
Page 1 - example.com
Page 2 - example.com
Search engine optimization - example.com 
```

我**不想**替换这些标题：

```
Page 1
Page 2
Search engine optimization 
```

因此，只有包含 example.com 时，我才想替换它。我试过这样的事情：

```
$document = preg_replace('#(<title[^>]*>)(.*)[(example.com)][^<]+</title>#i', '$1Welcome to my site</title>', $document); 
```

但这行不通。有人有答案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:01:29.210

```
$document = preg_replace("/(<title>)(.*?) - example.com(<\/title>)/", "$1$2$3", $document) 
```

# android - 在常规课程中使用媒体播放器

> ID：10259099
> 
> 赞同：1
> 
> 时间：2012-04-21T12:56:23.273
> 
> 标签：android

我在非活动类中使用 android MediaPlayer 时遇到了一些问题，总是出现上下文错误。这是错误的行：

```
MediaPlayer Shoot = MediaPlayer.create(this, R.raw.shot); 
```

现在我知道我不能`this`在服务中使用，但我尝试过的所有其他东西都一直在给出错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:46:27.560

尝试：

```
try {
    MediaPlayer mp = new MediaPlayer();

    AssetFileDescriptor afd = getResources().openRawResourceFd(1);
    if (afd != null) {
        mp.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());
        afd.close();
        mp.prepare();
        mp.start();
    }
} catch (IllegalArgumentException e) {
} catch (IllegalStateException e) {
} catch (IOException e) {
} 
```

# qt - 使用 QTimer 唤醒应用程序

> ID：10259100
> 
> 赞同：2
> 
> 时间：2012-04-21T12:56:34.020
> 
> 标签：qt, wakeup

我需要在特定时间做一些事情。在 Android 中，我使用 AlarmManager 来执行此操作，但在 qt 中我不知道该怎么做。根据我使用 qt 的经验，QTimer::singleShot 在应用程序关闭时停止，但我需要在我的应用程序关闭后让它运行。我将在后台运行应用程序，但我真的不想在打开的应用程序屏幕上看到我的应用程序。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:19:05.353

你可以创建一个类来处理这个问题。下面的示例使用“WindowManager”类和子类 QMainWindow，但当然您可以使用任何 QWidget。

“wm.h”

```
#include <QtGui>

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    MainWindow() {}

signals:
    void startTimer(int);

protected:
    void closeEvent(QCloseEvent *event)
    {
        event->setAccepted(false);
        startTimer(5000);
        hide();
    }
};

class WindowManager : public QObject
{
public:
    WindowManager()
    {
        MainWindow *w = new MainWindow;
        QTimer *timer = new QTimer(this);

        connect(w, SIGNAL(startTimer(int)), timer, SLOT(start(int)));
        connect(timer, SIGNAL(timeout()), w, SLOT(show()));

        w->show();
    }
}; 
```

“主.cpp”

```
#include <QtCore/QCoreApplication>
#include "wm.h";

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    WindowManager wm;
    return a.exec();
} 
```

# c++ - 输入格式验证

> ID：10259106
> 
> 赞同：-3
> 
> 时间：2012-04-21T12:57:05.620
> 
> 标签：c++, linux

在 linux 中，如何检查给定的输入是 uint8_t 还是 uint16_t 还是 uint32_t？如何将给定的输入与它们进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:03:34.723

```
uint16_t value = boost::lexical_cast<uint16_t>(str); 
```

如果无法转换输入字符串，它将抛出 bad_cast 异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:08:02.933

如果您的意思是输入从文件或控制台读取的数字，那么只需执行如下 if 语句：

```
 #define max_uint8 (1<<8) - 1
    #define max_uint16 (1<<16) - 1
    #define max_uint32 (1<<32) - 1

    if(input > max_uint32) {
        // then it is greater than 32 bits
    } else if (input > max_uint16) {
        // then it is uint32
    } else if (input > max_uint8) {
        // then it is uint16
    } else {
        // then it is uint8
    } 
```

注意：我假设你的输入永远不会超过 32 位，否则你需要检查这个。

# html - HTML 画布的最大尺寸是多少？

> ID：10259108
> 
> 赞同：3
> 
> 时间：2012-04-21T12:57:11.723
> 
> 标签：html, canvas

在 HTML 中创建大型可视化。

在 Chrome (v. 18) 中，最大画布大小为 32,768 像素高。有没有办法显示更大的画布？

这个限制是从哪里来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:05:06.133

*32,768 = 2 ^(15)*和*2 ^(15) - 1 = 32,767*是`short int`可以容纳的最大数字。

所以谷歌浏览器可能使用数据类型`short int`来存储`<canvas>`元素的大小。

如果要显示更大的`<canvas>`元素，可以尝试使用多个元素。如果您确实需要约 33k 像素，您还应该考虑另一种实现技术！

# android - 三个带有手势的活动/视图布局

> ID：10259109
> 
> 赞同：0
> 
> 时间：2012-04-21T12:57:13.827
> 
> 标签：android, view, android-activity, gesture

我对 Android 开发非常陌生，大约 10 年没有使用 Java 开发了。除此之外，我正在寻找一些关于如何完成我的任务的指示。

我最初想要的只是三个活动/视图。

每个屏幕一个活动/视图，并排布置在 1,2,3 水平视图布局中。Activity/view 2 是应用程序启动时加载的默认视图。

![在此处输入图像描述](../Images/43e705e5513896d69ab109f33ce17dd9.png)

然后，我想添加手势侦听器以在三者之间移动。基本上来回滑动。

应该使用什么样的布局以及什么是最佳实践？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:03:23.607

你想要的完全可以实现。你必须设计三个活动。在 Android Manifest 中像这样声明 Activity 2

```
<activity android:name=".Activity2"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity> 
```

使用 Fling/Swipe 触发 Intent 从活动 2 移动到其他活动。

# iphone - NStimer 在 iOS 中无法正常工作

> ID：10259110
> 
> 赞同：4
> 
> 时间：2012-04-21T12:57:20.187
> 
> 标签：iphone, objective-c, ios5, xcode4.2, nstimer

我正在使用以下代码显示时间...我的 viewController 中有滚动视图...这里我显示的时间从 00:00.00 (mm:ss:SS) (minutes:seconds:milliseconds) 开始，目标是增加毫秒，基于毫秒的秒，基于秒的分钟...但是我想显示从 75:00.00 (mm:ss:SS) 开始的时间，并且我想将毫秒、秒和分钟递减到 00:00.00 (mm:ss .SS)...我怎么能...？

我已经在下面的链接中问过这个问题.. [NSTimer 将时间减少秒/毫秒](https://stackoverflow.com/questions/10257330/nstimer-in-objective-c)

我遵循该代码，当我拖动并按住滚动视图而不释放鼠标单击时，时间没有计算（也在后台）...帮助我更改以下代码...

```
enter code here
@interface ViewController : UIViewController
{
    IBOutlet UILabel *time;
    NSTimer *stopWatchTimer;
    NSDate *startDate;
    NSTimeInterval secondsAlreadyRun;
}

- (void)reset:(id)sender;
- (void)onStartPressed:(id)sender; 
- (void)onStopPressed:(id)sender;

enter code here
-(void)showActivity:(NSTimer *)tim 
{
    NSDate *currentDate = [NSDate date];

    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    // Add the saved interval
    timeInterval += secondsAlreadyRun;
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    static NSDateFormatter * dateFormatter = nil;
    if( !dateFormatter ){
        dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"mm:ss.SS"];
        [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    }
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    time.text = timeString;

    //    [dateFormatter release];
}

- (void)onStartPressed:(id)sender 
{
    stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1/10 
                                                      target:self 
                                                    selector:@selector(showActivity:) 
                                                    userInfo:nil 
                                                     repeats:YES];
    // Save the new start date every time
    startDate = [[NSDate alloc] init]; // equivalent to [[NSDate date] retain];
    [stopWatchTimer fire];
}

- (void)onStopPressed:(id)sender
{
    // _Increment_ secondsAlreadyRun to allow for multiple pauses and restarts
    secondsAlreadyRun += [[NSDate date] timeIntervalSinceDate:startDate];
    [stopWatchTimer invalidate];
    stopWatchTimer = nil;

    //    [startDate release];
    //    [self showActivity:stopWatchTimer];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T06:29:41.240

You have to register the timer to run in NSRunLoopCommonModes

```
stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1/10 
                                                  target:self 
                                                selector:@selector(showActivity:) 
                                                userInfo:nil 
                                                 repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:stopWatchTimer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T13:32:19.350

Timers are scheduled in run loops in certain run loop modes. They can only fire when the run loop is being run in one of those modes. The `+scheduledTimerWithTimeInterval:...` methods schedule the timer in the default mode. Tracking of events while a scroll bar is being manipulated uses `NSEventTrackingRunLoopMode`. You need to schedule the timer on the proper mode(s).

You might schedule it on `NSRunLoopCommonModes` which is a virtual set of modes. Run loops never run in such a mode, but they run in modes which are members of that set. The default mode and `NSEventTrackingRunLoopMode` are added to that set, as is `NSModalPanelRunLoopMode`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T13:04:06.207

```
IBOutlet UILabel * result;
NSTimer * timer;                
int currentTime;

- (IBAction) start;
- (IBAction) pause;
- (void)populateLabelwithTime:(int)milliseconds; 
```

.m 文件

```
- (void)viewDidLoad 
{
    currentTime = 270000000; // Since 75 hours = 270000000 milli seconds
    // ..... some codes....
}
- (IBAction) start
{
    timer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(updateTimer:) userInfo:nil repeats:YES];
}

-(IBAction)pause
{
    [timer invalidate]; 
}

- (void)updateTimer:(NSTimer *)timer {
    currentTime -= 10 ;
    [self populateLabelwithTime:currentTime];
}
- (void)populateLabelwithTime:(int)milliseconds 
{
    int seconds = milliseconds/1000;
    int minutes = seconds / 60;
    int hours = minutes / 60;

    seconds -= minutes * 60;
    minutes -= hours * 60;

    NSString * result1 = [NSString stringWithFormat:@"%@%02dh:%02dm:%02ds:%02dms", (milliseconds<0?@"-":@""), hours, minutes, seconds,milliseconds%1000];
    result.text = result1;

} 
```

# forms - Cakephp 验证后，所有表单字段都为空并出现表单错误

> ID：10259115
> 
> 赞同：2
> 
> 时间：2012-04-21T12:57:38.567
> 
> 标签：forms, validation, cakephp, post

我有问题..我尝试填写表单然后单击提交按钮然后它显示表单错误但所有文本框字段都变为空白并且可以显示表单错误。我希望它与验证之前的值相同。就像我不想在验证后清除/清空值一样。

我做了这样的事情：（在视图中）

```
<div class="regform">
        <div id="formleft">First Name<asterix>*</asterix></div>
        <div id="formright"><?php echo $this->Form->input('First Name', array(
                'name' => 'firstname',
                'label'=> false
            )); ?></div>
        <div id="formerror"><?php echo $this->Form->error('Customer.firstname'); ?></div>
    </div> 
```

（在模型中）：

```
'firstname' => array(
                    'firstname_cant_be_empty' => array(
                            'rule' => 'notEmpty',
                            'message' => 'First Name must be filled.'
                        ),
                    'firstname_must_be_alphabet' => array(
                            'rule' => '/^[a-z]{3,}$/i',
                            'message' => 'First Name is only letters. No numbers, Dotted, etc.'
                        )
                ) 
```

（在控制器中）：

```
if ($this->request->is('Post')) {

            if ($this->Customer->save($this->request->data) && $this->Customer->validates()) {
                //debug($this->request->data);
                $this->Session->setFlash('good!');
                //$this->redirect('/');
            } else {
                $this->Session->setFlash('Fill up form now!');
                $this->data = $this->request->data;
            }

        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T19:01:40.457

问题在你看来：

```
 <div id="formright"><?php echo $this->Form->input('First Name', array(
            'name' => 'firstname',
            'label'=> false
        )); ?></div> 
```

具体来说：

```
$this->Form->input('First Name', array( 
```

和

```
'name' => 'firstname', 
```

这导致要生成的表单元素如下：

```
<input id="UserFirstname" type="text" maxlength="50" name="firstname"> 
```

您的表单输入应该是这样的：

```
 echo $this->Form->input('firstname', array(
            'label'=> false
    )); 
```

注意差异。这会导致表单元素生成为：

```
<input id="UserFirstname" type="text" maxlength="50" name="data[User][firstname]"> 
```

主要区别是`name="data[User][firstname]"`。这会导致数据以熟悉的数组格式 $this->request->data 发布，这也允许在表单错误时重新填充表单。

# objective-c - 如何将手势识别器添加到一系列子视图中？

> ID：10259117
> 
> 赞同：0
> 
> 时间：2012-04-21T12:57:46.467
> 
> 标签：objective-c, ios, uiviewcontroller, uigesturerecognizer

我有一个显示在屏幕上的子视图图像网格；它基本上是以棋盘方式在屏幕上布置的一系列图像。我只是想为每个图像子视图添加手势识别器，以便当用户触摸其中一个图像子视图时，我可以检索子视图，即坐标、标签等。我的视图层次结构如下：

1.  超级视图
2.  一个 gridContainer 视图
3.  和每个单独的子视图 - 带有图像

在查看了苹果文档之后，似乎我应该能够向 gridContainer 视图添加一个手势识别器，并且每个子视图（带有图像）都应该继承手势识别器。到目前为止，这是我尝试过的：我已经在 getter 中分配了初始化网格容器视图。此外，在 getter 中，我调用了我的 createGesture 方法，该方法应该将手势识别器添加到 gridContainer 视图。但是，我在运行时遇到错误，指向我的操作 handleSingleTap 方法。它读取 EXC_BAD_EXCESS。还值得注意的是，我不希望我的 gridContainer 视图之外的视图响应任何触摸事件。提前感谢您的帮助。

这是我要实现的代码：

```
- (UIView *)gridContainerView
{
    if (!_gridContainerView)_gridContainerView = [[UIView alloc] init];
    [self createGesture];
    return _gridContainerView;
}
- (void)createGesture
{
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]
                                         initWithTarget:self.gridContainerView
                                         action:@selector(handleSingleTap:)];
    singleTap.numberOfTapsRequired = 1;

    [self.gridContainerView addGestureRecognizer:singleTap];
} 
```

如果您需要查看任何其他代码以使其有意义，请告诉我。

编辑：包括 handleSingleTap 方法：

```
- (IBAction)handleSingleTap:(id)sender
{
    CGPoint tapPoint = [sender locationInView:sender];
    NSLog(@"sender = %@",sender);
    NSLog(@"tappoint = %@", tapPoint);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:08:40.447

您正在为您的 gridContainerView 初始化一个plain `UIView`。然后将手势识别器附加到它（使用该视图实例作为目标）。然而，一个普通的`UIView`没有实现`handleSingleTap:`，因此你得到一个例外。

您应该创建一个（自定义`UIView`派生）类来实现您需要触发该手势的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:25:56.857

马上就有几个问题（甚至没有处理你的手势）。

每次访问 gridContainerView 时都会调用 createGesture。您可能只希望在创建视图时发生这种情况。此外，如果您查看 createGesture，它会回调到 gridContainerView，它会回调到 createGesture，它会回调到 gridContainerView 等。

你可能想要更像...

```
- (UIView *)gridContainerView
{
    if (!_gridContainerView) {
        _gridContainerView = [[UIView alloc] init];
        [self createGesture];
    }
    return _gridContainerView;
} 
```

接下来，您尝试在视图上调用 handleSingleTap。您可能希望它在控制器上：initWithTarget:self。

```
- (void)createGesture
{
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]
                                         initWithTarget:self
                                         action:@selector(handleSingleTap:)];
    singleTap.numberOfTapsRequired = 1;

    [self.gridContainerView addGestureRecognizer:singleTap];
} 
```

您可能想要重新使用两个像这样直接相互引用的独立方法的智慧。但是，至少我们对访问器所做的更改应该没问题。只要知道，如果您在访问器中添加更多代码，则必须在调用 createGesture 之前完全设置视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T13:26:04.657

几件事。首先，您将 gridContainerView 实例化为标准 UIView，然后向其发送消息：handleSingleTap:，它肯定不会响应。如果您希望您的 gridContainerView 响应消息，您需要子类化 UIView，创建适当的方法，并将您的 gridContainerView 实例化为子类。

其次，就整体方法而言，我将为 gridContainerView 创建子类（甚至可以这样称呼它）并创建处理手势的方法。在该方法中，您可以使用 UIGestureRecognizer 方法访问被触摸/点击的点`locationInView:`。使用这一点来确定 gridContainerView 中的哪个子视图被点击并执行相应的操作。要发现哪个子视图被点击，您可以遍历您的子视图并检查每个子视图以确定哪个包含被点击的点。UIView 有几种方法可以用来执行此操作：

`pointInside:withEvent:` `hitTest:withEvent:`

注意，你可以为事件传递`nil`。以上两件事做的事情略有不同。如果您只是测试该点是否位于视图中，请使用它，`pointInside:withEvent`因为它将返回一个`BOOL`. 该方法`hitTest:withEvent`将导致视图搜索其所有子视图并返回其自身或其子视图之一（如果该点超出其边界，则返回 nil）。 `hitTest:withEvent`可能需要更多的处理器密集型。此外，您也可以仅用于`CGRectContainsPoint()`测试。

# hibernate - GORM Criteria 按绝对值排序

> ID：10259118
> 
> 赞同：0
> 
> 时间：2012-04-21T12:57:50.260
> 
> 标签：hibernate, grails, grails-orm, criteria

一段时间以来，我一直在使用 GORM 标准，我真的很喜欢它们（有助于降低复杂性并使代码易于理解）。

我目前在尝试按属性的绝对值排序结果时遇到一些问题：

```
Person.createCriteria(){
    order("abs(rating)", "desc")
} 
```

这当然是行不通的。

有谁知道这样做的正确方法是什么？（在 GORM 中按绝对值排序）

谢谢，尼古拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:08:27.137

我想不出任何可以直接在标准中按 abs 排序的东西，但是在标准之后排序会起作用：

```
 def personInstanceList = Person.withCriteria {
      //whatever is necessary for your query
    }
    personInstanceList.sort {a, b-> java.lang.Math.abs(b.rating) <=> java.lang.Math.abs(a.rating)}  //b.rating <=> a.rating sorts desc 
```

# java - Play 框架中的控制器

> ID：10259122
> 
> 赞同：0
> 
> 时间：2012-04-21T12:58:03.920
> 
> 标签：java, eclipse, model-view-controller, playframework-1.x

我是新手玩框架。我无法理解控制器包的想法。我该如何使用它们，它们有什么用？如果我有一个可点击的按钮，我如何将它链接到我想要的操作？请，需要一个答案！谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T11:43:37.003

链接操作：

```
<a href="@{ControllerName.methodView(argName)}">${phone}</a> 
```

和形式：

```
<form action="@{ControllerName.methodSave()}" method="POST">
  <button type="submit" >Save</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T22:38:47.913

Play Framework中的Controller是常见的MVC控制器：[http ://en.wikipedia.org/wiki/Model–view–controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

正如 Olivier 在他的评论中提到的，您可以在 Play 的官方文档中了解它是如何工作的。

Play Framework 中还有[路由机制](http://www.playframework.org/documentation/1.2.4/routes)，可将您的请求“翻译”为 controller.action(params) 集。

尽管如此，我还是建议您从 Play 2.0 版开始。它也有 Java 支持，还有一些示例应用程序可以让您更快地了解 Play 的 MVC。

# xpages - xPages xAgent 安全性

> ID：10259124
> 
> 赞同：3
> 
> 时间：2012-04-21T12:58:20.477
> 
> 标签：xpages

我目前正在实现 Mark Leusink 的 OpenNTF 多文件上传器。

这个非常好的自定义控件使用 xAgent 将选定的文件附件嵌入到目标 Notes 文档中。在我将 Authors 和 Readers 字段添加到 Notes 文档之前，一切正常。现在上传文件时出现安全错误（402）。

我的想法是上传 xAgent 无法编辑目标文档以附加文件。如果我删除安全字段，一切都会再次运行。

我的问题是，xAgents 是否以与当前用户相同的安全性运行？如果没有，我是否可以像为 Lotus Script 代理一样为 xAgent 设置“运行身份”用户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:42:38.393

我建议您查看 xAgent 的代码并重写它以使用 sessionAsSigner 访问数据库/文档以上传文件。这将导致它作为应用程序的签名者运行，并绕过您遇到的安全问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T09:11:32.257

汤姆和德克兰的答案都是正确的，但这不包括文件上传者。

它使用 Flash 组件进行实际上传（称为 SWFUpload）。由于浏览器 cookie 不与 Flash 共享，因此它无法将用户的会话 cookie 与文件一起发送，因此执行上传的用户未登录（又名匿名）到 Domino 服务器。这就是为什么上传者需要允许匿名用户在 ACL 中读取/写入公共文档，并且处理上传文件 ( **aUpload.xsp** ) 的 XPage/XAgent 设置为允许“公共访问用户”。它使用**sessionAsSigner**对象来访问数据库的内容

通常，上述设置将允许每个人匿名上传文件。这就是为什么我根据 Mark Ba​​rton 的想法实现了自定义[身份验证解决方案](http://www.markbarton.com/?p=163)：在上传每个文件之前，都会向 XPage 发出请求以检索唯一密钥。该 XPage ( **aGetAuth.xsp** ) 确实在用户的凭据下运行，并将密钥存储在数据库的文档中。该密钥与上传的文件一起发送并与存储的密钥进行比较。仅当密钥匹配时才允许上传。

首先，如果 aUpload.xsp XAgent 中的代码可以使用 sessionAsSigner 调用读取和写入目标文档，我将检查您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:58:18.137

马克、德克兰和蒂姆，感谢您的参与。

我修改了`xAgent **aGetAuth.xsp**`用来`sessionAsSigner`获取当前数据库的。起初我得到了错误`"sessionAsSigner not found"`。

谷歌给出了一个快速的答案是在测试之前重新签署模板。在重新签署模板两次并执行“干净”之后，一切都运行良好。

# c# - 通过 LINQ 查询不重复显示

> ID：10259126
> 
> 赞同：2
> 
> 时间：2012-04-21T12:58:48.303
> 
> 标签：c#, asp.net, linq, sql-server-2008, razor

我有这张桌子：

![桌子](../Images/90dd4002d99c5eba280e3ee2d6329917.png)

我想`friend`通过 LINQ 显示所有名称都没有重复。我该怎么做？结果是：

```
martin
kevin
igor 
```

控制器：

```
dbEntities db = new dbEntities();

    public ActionResult Index()
    {
        IQueryable<string> dn = from f in db.table select f.friend;
        IQueryable<string> res = dn.Distinct();
        return View(res);
    } 
```

查看（ASP.NET MVC 3 剃刀）：

```
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.friend)
        </td>
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:18:31.263

您可以使用`Select`和的组合`Distinct`：

```
@foreach (var item in Model.Select(m => m.friend).Distinct()) {
    <tr>
        <td>
            @item
        </td>
    </tr>
} 
```

# javascript - CSS 问题：Javascript 密码验证消息放置错误

> ID：10259129
> 
> 赞同：1
> 
> 时间：2012-04-21T12:59:37.110
> 
> 标签：javascript, html, css

我正在使用[此链接进行密码匹配验证](http://www.keithscode.com/tutorials/javascript-tutorials/a-simple-javascript-password-validator.html)。一切都很好。但问题是我在字段顶部收到消息，而不是在确认密码字段旁边。这是我尝试过的；

**JavaScript 函数**

```
function checkPass(){
    var password = document.getElementById('password');
    var password2 = document.getElementById('password2');             
    var message = document.getElementById('confirmMessage');
    var goodColor = "#66cc66";
    var badColor = "#ff6666";

    if(password.value == password2.value){
        password2.style.backgroundColor = goodColor;
        message.style.color = goodColor;
        message.innerHTML = 'Passwords Match!'            
    }else{
        //The passwords do not match.
        //Set the color to the bad color and
        //notify the user.
        password2.style.backgroundColor = badColor;
        message.style.color = badColor;
        message.innerHTML = 'Passwords Do Not Match!'
    }
} 
```

**HTML**

```
<div id="wrapper">
    <form name="form" id="form" class="form" onsubmit="someFunction(this);return false">
        <label for="password">Password:</label><input type="password" style="color: #B8B894;" value="Password" onblur="if(this.value == '') { this.value='Password'}" onfocus="if (this.value == 'Password') {this.value=''}" name="password" id="password" />
        <label for="password2">Confirm Pass:</label><input type="password" name="password2" id="password2" onkeyup="checkPass(); return false;" />
        <span id="confirmMessage" class="confirmMessage"></span><br/>
        <input type="submit" value="Submit" class="submit" />
        <input type="button" name="reset_form" value="Reset All Fields " onclick="this.form.reset();">
    </form>
</div> 
```

**CSS**

```
<style type="text/css">
  #wrapper {width:75%; margin:70px auto}
  .form {float:left; padding:0 139px 10px 10px; background:#f3f3f3; border:2px solid #cfcfcf width: 100%;}
  .form label {float:left; width:100px; padding:10px 10px 0 0; font-weight:bold font:12px Verdana, Arial, Helvetica, sans-serif; color:#666}
  .form select {float:left; width:146px; margin-top:10px}
  .form input {float:left; margin-top:10px}
  .form .submit {clear:both}
  .form #confirmMessage {font-size: 0.9em; margin:5px; padding:10px 10px;}
  .form input.password {font:normal normal normal 1em verdana,arial,sans-serif; padding:4px 6px 3px 6px; border:1px solid #ccc; border-top-color:#aaa; border-bottom-color:#ddd; cursor:text; width:286px; -moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.1); -webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);}
  #msg {display:none; position:absolute; z-index:200; background:url(images/msg_arrow.gif) left center no-repeat; padding-left:7px}
  #msgcontent {display:block; background:#f3e6e6; border:3px solid #924949; border-left:none; padding:5px; min-width:150px; max-width:250px}
</style> 
```

结果如下图所示； ![图片](../Images/54ba7881ea4a5bb1b90fc7037f2bed6a.png)

如何解决？

**编辑：**我忘记在 CSS 中输入我的问题#wrapper。我现在在我的问题中添加了。

**编辑＃2：**现在我把所有东西都放在我的`<style>`标签之间。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:20:57.457

您现在将所有内容都浮动到左侧，因此跨度不知道它应该去哪里。
如果您使用了您说您从中获取代码的页面中的代码，则不会发生这种情况。

无论如何，我删除了一些浮点数和你在 CSS 中遇到的一些错误，现在看起来像这样。

```
 #wrapper {width:75%; margin:70px auto}
 .form {padding:0 10px 10px 10px; background:#f3f3f3; border:2px solid #cfcfcf;}
 .form label {display:inline-block; width:100px; margin:10px 0;
    font:bold 12px Verdana, Arial, Helvetica, sans-serif; color:#666}
 .form select {float:left; width:146px; margin-top:10px}
 .form .submit {clear:both}
 .form #confirmMessage {font-size: 0.9em;} 
```

我还在第一个`<br>`之后添加了一个`input`. 结果就像[这个 jsFiddle](http://jsfiddle.net/TesrL/)。

# node.js - 带有胡子模板、连接和 node.js 的空白输出

> ID：10259130
> 
> 赞同：2
> 
> 时间：2012-04-21T12:59:55.510
> 
> 标签：node.js, connect, mustache

我刚刚进入整个 node.js 业务并且到目前为止喜欢它；但是我遇到了一个涉及连接/胡子的问题。

这是一个简单的单页应用程序的代码；在这一点上，我真的只是想让应用程序使用我的小胡子模板，以便我可以从那里获取它。

```
var connect = require("connect"),
    fs = require("fs"),
    mustache = require("mustache");

connect(
  connect.static(__dirname + '/public'),
  connect.bodyParser(),
  function(req, res){
    var data = {
          variable: 'Some text that I'd like to see printed out. Should in the long run come from DB.'
        },
        htmlFile = fs.createReadStream(
          __dirname + "/views/index.html",
         { encoding: "utf8" }
        ),
        template = "",
        html;

    htmlFile.on("data", function(data){
      template += data;
    });
    htmlFile.on("end", function(){
      html = mustache.to_html(template, data);
    })

    res.end(html);
  }
).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

我的问题是上面的代码生成了一个空白网页。如果我记录`html`- 变量，我会得到两个带有附加文本的 html 输出`variable`，所以`to_html`- 函数似乎可以完成它的工作。如果我这样做`res.end('some string');`，字符串会按原样显示在浏览器中。

该模板是一个普通的旧 .html 文件，其正文中带有`<p>{{variable}}</p>`-tag。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:54:10.367

您的问题是您没有正确使用异步代码。到`res.end(html)`被调用的时候，文件还没有被读取。正确用法：

```
 htmlFile.on("end", function(){
      html = mustache.to_html(template, data);
      res.end(html);
 }) 
```

您还应该注意语法错误：（`variable: 'Some text that I'd like to see printed out. Should in the long run come from DB.'`
误用'）

# javascript - 100px后的jQuery滚动功能

> ID：10259132
> 
> 赞同：8
> 
> 时间：2012-04-21T12:59:59.883
> 
> 标签：javascript, jquery

使用此脚本：

```
<script>
$(function() {
    $(window).scroll(function(){
        $('#Your element id').slideUp('slow');
    });
});     
</script> 
```

是否只能在用户滚动 100 像素或更多后执行该操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T13:20:23.693

如前所述，您确实需要 scrollTop 。最好也包含一个“else”函数，这样当您滚动回顶部时，切换的元素会再次隐藏。像这样：

```
$(document).ready(function() {
    $('#scrollDiv').hide();
    $(window).scroll(function() {
        if ($(document).scrollTop() > 100) {
            $('#scrollDiv').fadeIn('slow');
        }
        else {
            $('#scrollDiv').fadeOut('slow');
        }
    });
});​ 
```

这是一个快速的[jsfiddle](http://jsfiddle.net/CgRx3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:12:08.840

您可以使用`.scrollTop()`来获取页面滚动的距离

```
<script>
$(function() {
    $(window).scroll(function(){
        if($(this).scrollTop() > 100) {
            $('#Your element id').slideUp('slow');
        }
    });
});     
</script> 
```

# android - android SearchableDictionary 示例 - 建议单词

> ID：10259135
> 
> 赞同：1
> 
> 时间：2012-04-21T13:00:23.177
> 
> 标签：android

我刚刚使用了`searchabledictionary`android 的示例，它位于`samples`android sdk for windows 的文件夹中。（API 9 级）

`definitions.txt`我以相同的格式 完成了文件，就像`key - value` 我在搜索区域中键入一个单词时，应用程序尝试建议单词，但它没有找到确切的单词。这里是一个例子。我搜索了这个词`test`，这是`definitions.txt`：

> 验收测试 - 意义
> 
> 酸性测试 - 含义
> 
> 阿尔法测试 - 意义
> 
> 基准测试 - 含义
> 
> ……
> 
> 试飞——意义
> 
> 负载测试 - 含义
> 
> ……
> 
> 测试 - 意义

它找到了这个列表的 15 个第一个词，（希望它不会搜索类似的词`attestaion`）但它没有显示确切的词`test`！

我读了`DictionaryProvider`，`DictionaryDatabase`但我无法意识到问题的根源！

问题是我如何`test`在列表的第一个建议确切的词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:22:00.173

检查 Dictionary.java，你会看到 loadWords 函数。该函数打开definitions.txt文件并迭代所有行，并用“-”分割每一行并添加到Hashmap字典中。

同样在同一个文件中还有 getMatches 函数，它获取您的搜索关键字并从字典中获取结果。

不确定，但因为当您搜索建议时，会显示前几个匹配项。并且由于“test”关键字存在于太多行中，并且 (“test - meaning”) 是您的最后一个定义，您无法在建议列表中看到。

您可以尝试将“test -meaning”行移到definitions.txt 的第一行。

# javascript - 在 td 中查找第一个 div

> ID：10259136
> 
> 赞同：1
> 
> 时间：2012-04-21T13:00:44.883
> 
> 标签：javascript, jquery

正如您在下面的 jQuery 代码中看到的那样，我指向表 td 中的第一个 div。

```
$('table tr td div').css("position", "relative"); 
```

但是我遇到了一些问题，所以我尝试了这个：

```
$('table tr td').parents('div:first').css({position:'relative'}); 
```

但是这个也不好用。我的代码有什么问题？

我的 HTML 结构是：

```
<table>
    <tr>
        <td><!-- all id for the div and image inside the td are dynamic -->
            <div><!-- Need to access this div -->
                <!-- content --->
            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:02:32.527

`.parents()`找到您选择的所有父母。你想要的是一个孩子。

```
$('table tr td div:first').css("position", "relative"); 
```

这将为您解决问题:)

* * *

您也可能只想选择确切的后代，在这种情况下，您可以使用：

```
$('table tr td > div:first').css("position", "relative"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T02:21:11.267

如果您想从 TD 中查找第一个 DIV 的出现，您可以使用以下 2 种方法，该类为“vx1”

```
$( "table tr td.vx1 > div:first" ).css( "width", "50" ); 
```

如果您想使用类“vx1”从 TH 中查找第一个 DIV 的出现，可以使用以下 2 种方法

```
$( "table tr th.vx1 > div:first" ).css( "width", "50" ); 
```

# asp.net - 如何播放从 asp.net 网站上传的 youtube 视频？

> ID：10259137
> 
> 赞同：0
> 
> 时间：2012-04-21T13:00:49.420
> 
> 标签：asp.net

我的 asp.net 代码可以成功上传视频。现在我想要那个视频的网址，并想用嵌入的 youtube 播放器播放那个视频。请帮帮我..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:08:49.660

嵌入式 YouTube 播放器可以播放 youtube 视频。在这种情况下，您的视频最初应先上传到 youtube，然后再将其嵌入播放器。为此，您可能必须使用[YouTube 数据 API](https://developers.google.com/youtube/2.0/developers_guide_dotnet)

# css - 如果高度太小，垂直居中元素并切换到顶部对齐

> ID：10259138
> 
> 赞同：0
> 
> 时间：2012-04-21T13:01:10.760
> 
> 标签：css, overflow, center, vertical-alignment

我一直在试图找到这个问题的答案，但我发现的只是在讨论垂直居中元素。

我想要做的是垂直居中一个 div，我知道如何用 css 来做。问题是如果高度太小，它仍然会居中并切断顶部和底部。

这是我的意思的演示：http: [//jsfiddle.net/reitermarkus/23B43/](http://jsfiddle.net/reitermarkus/23B43/)
全屏演示： http: [//fiddle.jshell.net/reitermarkus/23B43/show/light/](http://fiddle.jshell.net/reitermarkus/23B43/show/light/)

如果高度太小，你能告诉我如何将它与顶部对齐吗？最好没有JS。

谢谢你，
马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:59:48.187

您可以确定高度是否低于所需最小值的唯一方法是通过 JS：

```
 var el = document.getElementById('id');   
    var el_height = el.offsetHeight;

    if(el_height < min_height){
    //apply class or inline style
    el.className = 'align_top';
    } 
```

显然，您需要定义 min_height 变量。此外，对于 DOM 操作，最好使用 jQuery。将元素与文档顶部对齐只是删除负边距并将“顶部”定义为 0 的情况；

# wcf - 死信队列和毒药队列

> ID：10259142
> 
> 赞同：2
> 
> 时间：2012-04-21T13:01:34.980
> 
> 标签：wcf, msmq

我了解死信队列和毒药队列之间的区别。我将在交易和持久性的背景下发言。

DLQ：客户端发送消息。MSMQ 无法传递消息。消息保留在队列中，等待发送到目标队列。

PQ：消息发送成功。WCF 服务处理消息。WCF 操作期间发生了一些错误。消息被放置在毒物队列中。

（以上如有错误请指正）

现在，如果 WCF 服务遇到错误，并且事务范围（属性）到位，那么它如何将消息放入毒队列中，还是必须开发？如果它需要开发，那么它是如何完成的？处理毒消息呢？有没有办法将它们放回队列中再次处理？如何确定邮件是否有毒？例如，WCF 中的操作可能会遇到错误，但可以从中恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:04:31.743

您可以在 MSDN 上阅读有关[毒物消息处理的](http://msdn.microsoft.com/en-us/library/ms789028.aspx)更多信息 有关 MSDN 上的 MSMQ 的更多信息[- How to: Exchange Messages with WCF Endpoints and Message Queuing Applications](http://msdn.microsoft.com/en-us/library/ms789008.aspx)

“当服务从一个事务下的目标队列中读取消息时，服务可能会因为各种原因无法处理该消息。然后将消息放回队列中再次读取。为了处理重复失败的消息，一组绑定中可以配置毒消息处理属性。共有四个属性：ReceiveRetryCount、MaxRetryCycles、RetryCycleDelay 和 ReceiveErrorHandling。"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T04:56:35.110

只有消息队列将消息放在死信队列中。应用程序只能读取和删除死信队列中的消息。

# javascript - 以PHP形式以表格方式显示数据

> ID：10259143
> 
> 赞同：2
> 
> 时间：2012-04-21T13:01:50.050
> 
> 标签：javascript, php, mysql, html-table

我想做这样的事情..

我在 PHP 中有一个更新表单，其中包含大约 15 个字段，

当您打开页面进行更新时，我想以表格方式显示一些数据。

塞纳里奥：

如果你想每天更新一个人的记录，我有一个功能可以搜索那个人的表单数据库，当你点击更新数据时..

它应该以某种方式表明，

字段1 .....--------
字段2 .....-------- 字段3
.....--------

现在，

对于字段4,5,6,7

如果这些字段包含数据，则以表格方式显示，字段 4,5,6,7 为列，行数取决于条目数（应该是不可编辑的）（假设多个输入的情况）

然后表格将继续。
field4.....--------
field5 .....-------- field6
.....--------
field7 ..... ------

通常这些字段（4,5,6,7）会经常更新它们的值，我还必须维护以前的输入。

帮我解决一些问题，因为我不知道该怎么做？

在此之前我正在使用这个..这里我有一个可以生成5个选项的表单字段，如果你之前输入过数据，我会用数据填充字段，现在我想更改显示，因为我不想让用户玩使用旧数据，所以我想将旧数据显示到表格中并通过简单的文本字段输入新数据，

因为他们没有必要保留这些多个输入表单字段，因为用户一次只更新一个值。

```
<script>
                    function Submitted_Date(value,object)
                    {
                    value = document.getElementById("subdate_num").value;
                    if (value > -1) {
                    var input= new Array(value);
                    var p;
                    //alert("Enter The fields You Know ");

               var ele = document.getElementById("subdate");

              if(ele.hasChildNodes())
              {
              var len = ele.childNodes.length;
              while(ele.childNodes.length - value > 1)
             {
                ele.removeChild(ele.lastChild);
             }
             }

          for (var i=len-1;i<value;i++)
                    {
                        p= i+1;
                        input[i] = document.createElement('div');

                        input[i].innerHTML = 'Submitted_Date' + p + ':  &nbsp;&nbsp; <input type="text" value="" name="subdate' + p + '" id="subdate' + p +'" size = 25 onclick="javascript: showCalendar("Submitted_Date'+ p +'")"/>';
                                    document.getElementById("subdate").appendChild(input[i]);
                                    var subdate = 'subdate' + p;

                    }
              }
              document.getElementById("subdate1").focus();

                    }
                    </script>

                    <tr>
    <td> Submitted Date  : 
        <select name="subdate_num" id="subdate_num" onChange="return Submitted_Date(this.value,this.form)">
          <?php
  for ($i=0;$i<=5;$i++)
  {
    if ($i==0) { $temp = "<option value=$i> - </option>"; echo $temp; }
    else { $temp = "<option value=$i>$i</option>";
    echo $temp; }
  }
  ?>
        </select></td>
      </tr>
    </table> 
```

```
<table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:58:01.530

我认为这就是您想要的，这将在表格中显示您想要的尽可能多（或少）列的信息

```
$query = "SELECT * FROM announcements ORDER BY announceid";
$result = mysql_query($query);

echo "<table border='1'>
<tr>
<th>Announcement ID</th>
<th>Announcement Name</th>
<th>Announcement Category</th>
<th>Approved?</th>
<th></th>
</tr>";

if ($result && mysql_num_rows($result) > 0) {
$x = 0;
while ($row = mysql_fetch_array($result)) {

 echo "<tr>";
  echo "<td>" . $row['announceid'] . "</td>";
  echo "<td>" . $row['title'] . "</td>";
  echo "<td>" . $row['category_name'] . "</td>";
 echo "<td>" . $row['status'] . "</td>";
  echo '<td><a href="edit.php?announceid='.$row['announceid'].'">Edit</a></td>';
  echo "</tr>";
$x ++;
};

  echo "</table>"; 
```

让我知道这是否是您正在寻找的，或者是否有任何其他方式我可以提供帮助。谢谢！

# c# - 如何从标签中获取 pdu 的长度值

> ID：10259145
> 
> 赞同：1
> 
> 时间：2012-04-21T13:01:58.373
> 
> 标签：c#, at-command

我正在通过流动命令以 PDU 模式发送短信。“长度”是显示 pdu 长度的标签。

当我编写 AT+CMGS=20 或任何长度时，我的代码正在工作，但我希望该代码采用标签值而不是在代码中编写静态值，我在下面提到的方式使用它，但它不起作用。

如果我以错误的方式做事，谁能帮助我如何编写代码？

```
string recievedData = ExecCommand(port, "AT", 500000, "No phone connected");
recievedData = ExecCommand(port, "AT+CMGF=0", 500000, "Failed to set message format.");

string command = "AT+CMGS=\""+ length +" \"";
recievedData = ExecCommand(port, command, 500000, "Failed to accept phoneNo");
command = p1 + char.ConvertFromUtf32(26) + "\r";
recievedData = ExecCommand(port, command, 5000, "Failed to send message"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:09:12.167

线

```
string command = "AT+CMGS=\""+ length +" \""; 
```

会产生`AT+CMGS="20 "`. 如果你想让它变成`AT+CMGS=20`你应该写

```
string command = "AT+CMGS="+ length; 
```

# facebook-graph-api - Facebook 客户端身份验证和offline_access 弃用

> ID：10259146
> 
> 赞同：3
> 
> 时间：2012-04-21T13:02:10.830
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

在你开始对我大喊大叫之前，我知道很多用户已经要求过这样的事情，但我阅读了所有这些，但找不到与我的具体案例相关的任何回复：我最终设法让一些工作正常，但这不是我想的那样我（和其他开发人员）正在寻找。我想与大家分享我对此的经验，所以我将尝试描述我的场景以及我遵循的步骤来研究如何解决这个问题，所以请放纵我这篇长篇文章：我确定它也将帮助一些与我处于相同情况的开发人员清除他们的想法，就像我希望它会给其他人提供正确的信息来帮助我（和其他人）一样。

我编写了一个使用 Facebook API 的原生 Android 应用程序。我**不**使用 Facebook SDK，因为我不想依赖安装在设备上的官方应用程序（事实上，我的应用程序在一定程度上是该应用程序的替代品，所以这样做很愚蠢无论如何都需要首先安装它），但我宁愿直接通过 HTTP 发出 Graph API 调用并自己处理响应。所以如果这是你想给我的答案，请不要因为我不会走那条路。

因此，我使用客户端身份验证来授权我的应用程序，在 WebView 中显示 URL 并在最后获取 access_token。我在其他权限中请求了offline_access。

由于offline_access 将在5 月份被弃用，我开始研究如何获得长期存在的令牌，因此阅读了我能找到的几乎所有与此相关的内容，当然包括官方指南。长话短说，没有什么对我有用，而且我仍然坚持使用非常短暂的 access_tokens，我无能为力。

这就是我开始做的事情：

1.  **在设置中弃用了我的**应用程序的offline_access（不是应用程序，因为它现在被许多用户使用，但另一个基本相同，我仅用于测试目的，所以这是同一件事）。
2.  使用客户端身份验证授权用户：[https ://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=http://my.domain.com/yeah.htmlscope=publish_stream,read_stream,user_photos,friends_photos,offline_access&response_type =令牌&显示=wap](https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=http://my.domain.com/yeah.htmlscope=publish_stream,read_stream,user_photos,friends_photos,offline_access&response_type=token&display=wap)

我得到了我的 access_token，但我立即注意到它根本不存在，恰恰相反：expires_in 设置为 6800 秒（不到两个小时）。所以我所做的第一个假设（默认情况下 access_tokens 会更长寿）已经是错误的。

我当时研究了如何延长这个 access_token 的生命周期，并尝试了几乎所有的替代方案。不用说，每次尝试都失败了。这就是我尝试过的，确切地说：

1.  首先，我当然尝试了“官方”的方法，即通过新端点扩展令牌。现在跳过关于为这样的操作请求客户端密码是多么愚蠢的咆哮（正如许多人已经指出的那样，这样的秘密需要嵌入到 Android 应用程序中，就我们开发人员而言，这是一场安全噩梦。担心，并且代表用户移动这个位服务器端以延长令牌寿命对于他们所关心的事情来说是一场噩梦，因为他们需要相信我会弄乱他们的 access_token），我尝试发出 GET 请求该地址使用正确的参数：[https ://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN)...请求显然是成功的，但它并**没有**延长任何东西的生命周期。该请求刚刚返回与以前相同的 access_token，并带有一个 expires_in 参数，该参数仅反映了流逝的时间（与以前相同，减去自我授权以来经过的秒数）。基本上，该方法只告诉我已经可用的 access_token 可以存活多少，而无需刷新或更改任何内容，因此，尽管它引发了明显的安全问题，但它也毫无用处。
2.  然后我尝试了其他人的建议，即使用旧的 REST API 来完成这项工作，向以下地址发出 GET 请求：[https](https://api.facebook.com/method/auth.extendSSOAccessToken?access_token=EXISTING_ACCESS_TOKEN) ://api.facebook.com/method/auth.extendSSOAccessToken?access_token=EXISTING_ACCESS_TOKEN这显然也因臭名昭著的“未使用单点登录获得访问令牌”错误而失败。

在那些失败的尝试之后，我开始思考可能导致所有这些失败的原因。正如我所料，我的应用程序在 Android 设备上运行，但直接向 API 发出 HTTP 请求，我想这可能是问题的根源。

1.  在我的开发者应用页面的高级部分，我的应用被配置为“Web”而不是“Native/Desktop”。也就是说，将其更改为“Native/Desktop”只会在第一次注销时（大约 24 小时而不是 1-2 小时）给我一个寿命更长的 access_token，而已经描述的延长其寿命的尝试和以前一样失败了。
2.  官方指南有一个有趣且令人毛骨悚然的段落：“桌面应用程序将无法延长现有 access_token 的寿命，并且一旦令牌过期，用户必须登录到 facebook”。虽然这似乎被许多人忽视了，但我开始认为这可能是我的问题的原因，所以我尝试了另一种方法，即我尝试了服务器端身份验证而不是客户端身份验证：再次，这个需要 client_secret 所以对于 Android 应用程序来说是一个愚蠢的解决方案，但我还是想尝试一下。所以，我首先得到了代码，然后是 access_token（如[http://developers.facebook.com/docs/authentication/server-side/中所述](http://developers.facebook.com/docs/authentication/server-side/)）。这导致 access_token 的寿命更长（5183882 秒，即大约 59 天），但话又说回来，两种已知的扩展它的方法（即使在这种情况下并不真正需要）导致同样的事情：前者不刷新任何东西，后者抱怨它不是通过 SSO 获得的。

所以，长话短说（我知道，为时已晚），弃用offline_access 的最后期限是如此之近，以至于你可以感觉到它在你的脖子上呼吸，似乎没有任何效果**。**你对这一切有什么经验，如果你和我在同一条船上并且你设法让它工作，你是怎么做到的？

谢谢你的耐心。

# php - Facebook 图片链接

> ID：10259147
> 
> 赞同：0
> 
> 时间：2012-04-21T13:02:13.663
> 
> 标签：php, facebook, facebook-graph-api, image

嗨，我想知道如何获取 facebook 中个人资料图片的链接

```
<img src="https://graph.facebook.com/me/picture?type=large&access_token=<?php echo $params['access_token'] ?>"/> 
```

自动转换为链接（当我右键单击图像和属性时，会给出 .JPG 链接（下））

```
https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash2/573939_100000564553314_108738462_n.jpg 
```

我怎样才能直接获得第二个链接而不是使用 graph.facebook.com/me/picture.... 链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:05:47.740

`/me?fields=picture&type=large`- 将图像作为文本响应而不是 HTTP 重定向返回 - 请注意 FBCDN URL 在某些时候可能会发生变化，所以不要假设它是静态的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:57:29.073

使用 FQL：

```
SELECT pic FROM user WHERE uid = me() 
```

选择“图片”会将 CDN URL 返回到被查询用户的中型头像。

您可以根据您想要的大小将 'pic' 更改为 'pic_small'、'pic_big' 或 'pic_square'。[FB 开发人员页面](https://developers.facebook.com/docs/reference/fql/user/)上提供了每个的详细说明

# python - 更改 Geany 的执行 (F5) 选项的窗口大小

> ID：10259148
> 
> 赞同：3
> 
> 时间：2012-04-21T13:02:14.110
> 
> 标签：python, ide, geany

我正在使用 Geany 0.18 进行 python 开发，总的来说我真的很满意，但是有一件小事，仍然困扰着我：

我通常使用 F5 (Build-->Execute) 选项来测试我的脚本，出现的窗口很小，如果我的脚本打印的行太长，很难阅读。如果我按 F5，我想更改弹出的小窗口的默认窗口大小，但我还没有找到任何东西来完成这个。

这可能吗？

谢谢米莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:24:05.033

为了解决这个问题，我在 geany 运行的终端命令中添加了额外的参数。

*   在 Geany 中转到首选项（编辑->首选项）。
*   打开工具选项卡。
*   有一个名为 Terminal 的输入字段，您可以在其中指定要使用的终端程序。
*   我将其更改`"gnome-terminal --maximize"`为打开终端最大化。

对于 Gnome-Terminal，您可以找到更多从终端运行“gnome-terminal --help-window-options”的窗口选项。

# android - 其他用户是否可以访问 android SQ LITE 文件

> ID：10259156
> 
> 赞同：0
> 
> 时间：2012-04-21T13:02:54.463
> 
> 标签：android, android-layout, android-widget

我是android平台上的新蜜蜂并创建了一个应用程序。我需要将少量数据保存到数据库中并在两个应用程序之间共享。我用于许可的数据，所以我的问题是其他人是否可以复制我的数据库从 'data/data/pack_name/database_name' 并将其放入新设备？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:44:46.703

I don't think it is possible for application B to copy application A data without explicit permission of application B. We have content providers specifically for the purpose of sharing data between application. But you can always try this out by creating and application and trying to access it's data from another application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:48:56.857

如果设备已植根，那么我相信另一个应用程序可以复制您的数据。

# sql-server - SQL Server - 查询最近的日期范围

> ID：10259157
> 
> 赞同：5
> 
> 时间：2012-04-21T13:03:00.310
> 
> 标签：sql-server, tsql

如果我有这样的表结构：

```
ProductCode  Date
Foo          4/1/2012
Foo          4/2/2012
Foo          4/3/2012
Foo          4/6/2012
Foo          4/7/2012
Foo          4/8/2012
Foo          4/9/2012
Foo          4/10/2012
Foo          4/15/2012
Foo          4/16/2012
Foo          4/17/2012 
```

有没有办法查询给定的日期范围`ProductCode`和`Date`（假设范围必须是连续的）？换句话说，对于这个表，Foo 存在于 3 个日期范围内`4/1-4/3`：`4/6-4/10`; 并且`4/15-4/17`我正在寻找给定日期的日期范围。

请注意，没有`Foo`日期的`4/4`、`4/5`、`4/11`、`4/12`和。`4/13``4/14`

示例：
`ProductCode=Foo, Date=4/2`将返回`4/1-4/3`，因为条目是连续的。
`ProductCode=Foo, Date=4/4`将不返回任何内容
`ProductCode=Foo, Date=4/7`，`4/6-4/10`因为条目是连续的。
`ProductCode=Foo, Date=4/12`不会返回任何东西
等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:33:45.087

当前一天没有行时，新范围开始。如果您运行的是 SQL Server 2012，则可以使用`lag`窗口函数来检查一行是否引入了新范围。一旦您知道哪些行引入了一个新范围，您就可以计算头行的数量，以便为每个范围分配一个唯一编号。

拥有一个范围编号，您可以使用 和 查找开始和结束`min`日期`max`。之后，这只是选择行的问题：

```
; with  IsHead as
        (
        select  ProductCode
        ,       Date
        ,       case when lag(Date) over (partition by ProductCode 
                  order by Date) = dateadd(day, -1, Date) then 0 
                  else 1 end as IsHead
        from  YourTable
        )
,       RangeNumber as
        (
        select  ProductCode
        ,       Date
        ,       sum(IsHead) over (partition by ProductCode order by Date) 
                  as RangeNr
        from    IsHead
        )
,       Ranges as
        (
        select  *
        ,       min(Date) over (partition by RangeNr) as RangeStart
        ,       max(Date) over (partition by RangeNr) as RangeEnd
        from    RangeNumber
        )
select  *
from    Ranges
where   ProductCode = 'Bar'
        and Date = '4/2/2012' 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/211f0/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:06:40.820

如果 SQL Server 2005 支持它，可以使用 LAG。不幸的是， [LAG 窗口功能](http://www.postgresql.org/docs/8.4/static/functions-window.html)仅适用于 SQL Server 2012，以及[PostgreSQL 8.4 及更高](http://en.wikipedia.org/wiki/PostgreSQL)版本；-)

我想可以在 SQL Server 2005 上工作，SQLFiddle 没有 SQL 2005 支持，只尝试了 SQLFiddle 的 SQL Server 2008，而不是 2012：

```
with DetectLeaders as
(
    select cr.ProductCode, CurRowDate = cr.Date, PrevRowDate = pr.Date
    from tbl cr
    left join tbl pr 
    on pr.ProductCode = cr.ProductCode AND cr.Date = DATEADD(DAY,1,pr.Date)
),
MembersLeaders as
(
    select *, 
        MemberLeader = 
            (select top 1 CurRowDate 
            from DetectLeaders nearest
            where nearest.PrevRowDate is null 
                and nearest.ProductCode = DetectLeaders.ProductCode
                and DetectLeaders.CurRowDate >= nearest.CurRowDate 
            order by nearest.CurRowDate desc)   
    from DetectLeaders
)
select BeginDate = MIN(CurRowDate), EndDate = MAX(CurRowDate) 
from MembersLeaders
where MemberLeader = 
  (select MemberLeader 
   from MembersLeaders
   where ProductCode = 'Foo' and CurRowDate = '4/7/2012') 
```

现场测试：[http ://sqlfiddle.com/#!3/3fd1f/1](http://sqlfiddle.com/#!3/3fd1f/1)

* * *

基本上这是它的工作原理：

```
PRODUCTCODE     CURROWDATE  PREVROWDATE MEMBERLEADER
Foo             2012-04-01              2012-04-01
Foo             2012-04-02  2012-04-01  2012-04-01
Foo             2012-04-03  2012-04-02  2012-04-01
Foo             2012-04-06              2012-04-06
Foo             2012-04-07  2012-04-06  2012-04-06
Foo             2012-04-08  2012-04-07  2012-04-06
Foo             2012-04-09  2012-04-08  2012-04-06
Foo             2012-04-10  2012-04-09  2012-04-06
Foo             2012-04-15              2012-04-15
Foo             2012-04-16  2012-04-15  2012-04-15
Foo             2012-04-17  2012-04-16  2012-04-15
Bar             2012-05-01              2012-05-01
Bar             2012-05-02  2012-05-01  2012-05-01
Bar             2012-05-03  2012-05-02  2012-05-01
Bar             2012-05-06              2012-05-06
Bar             2012-05-07  2012-05-06  2012-05-06
Bar             2012-05-08  2012-05-07  2012-05-06
Bar             2012-05-09  2012-05-08  2012-05-06
Bar             2012-05-10  2012-05-09  2012-05-06
Bar             2012-05-15              2012-05-15
Bar             2012-05-16  2012-05-15  2012-05-15
Bar             2012-05-17  2012-05-16  2012-05-15 
```

[http://sqlfiddle.com/#!3/35818/11](http://sqlfiddle.com/#!3/35818/11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T13:30:56.790

可以使用递归 CTE。

```
declare @target_date datetime = convert(datetime, '04/07/2012', 101);

with source_table as (
  select ProductCode, convert(datetime, Date, 101) as Date
  from (
    values
    ('Foo', '4/1/2012')
   ,('Foo', '4/2/2012')
   ,('Foo', '4/3/2012')
   ,('Foo', '4/6/2012')
   ,('Foo', '4/7/2012')
   ,('Foo', '4/8/2012')
   ,('Foo', '4/9/2012')
   ,('Foo', '4/10/2012')
   ,('Foo', '4/15/2012')
   ,('Foo', '4/16/2012')
   ,('Foo', '4/17/2012')
  ) foo(ProductCode, Date)
),
recursive_date_lower as (
  select Date from source_table where Date = @target_date

  union all

  select dateadd(d, -1, r.Date) from recursive_date_lower r where exists (select 0 from source_table s where s.Date = dateadd(d, -1, r.Date))
),
recursive_date_upper as (
  select Date from source_table where Date = @target_date

  union all

  select dateadd(d, 1, r.Date) from recursive_date_upper r where exists (select 0 from source_table s where s.Date = dateadd(d, 1, r.Date))
)
select
   (select min(Date) from recursive_date_lower) as start,
   (select max(Date) from recursive_date_upper) as finish 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:07:30.317

您还可以使用 CROSS APPLY 查找最近的日期：

```
with DetectLeaders as
(
    select cr.ProductCode, CurRowDate = cr.Date, PrevRowDate = pr.Date
    from tbl cr
    left join tbl pr 
    on pr.ProductCode = cr.ProductCode AND cr.Date = DATEADD(DAY,1,pr.Date)
),
MembersLeaders as
(
    select *       
    from DetectLeaders
    cross apply(
        select top 1 MemberLeader = CurRowDate 
        from DetectLeaders nearest
        where nearest.PrevRowDate is null 
            and nearest.ProductCode = DetectLeaders.ProductCode
            and DetectLeaders.CurRowDate >= nearest.CurRowDate 
        order by nearest.CurRowDate desc
    ) as xxx
)
select BeginDate = MIN(CurRowDate), EndDate = MAX(CurRowDate) 
from MembersLeaders
where MemberLeader = 
  (select MemberLeader 
   from MembersLeaders
   where ProductCode = 'Foo' and CurRowDate = '4/7/2012') 
```

现场测试：[http ://sqlfiddle.com/#!3/3fd1f/2](http://sqlfiddle.com/#!3/3fd1f/2)

* * *

基本上这是它的工作原理：

```
PRODUCTCODE     CURROWDATE  PREVROWDATE MEMBERLEADER
Foo             2012-04-01              2012-04-01
Foo             2012-04-02  2012-04-01  2012-04-01
Foo             2012-04-03  2012-04-02  2012-04-01
Foo             2012-04-06              2012-04-06
Foo             2012-04-07  2012-04-06  2012-04-06
Foo             2012-04-08  2012-04-07  2012-04-06
Foo             2012-04-09  2012-04-08  2012-04-06
Foo             2012-04-10  2012-04-09  2012-04-06
Foo             2012-04-15              2012-04-15
Foo             2012-04-16  2012-04-15  2012-04-15
Foo             2012-04-17  2012-04-16  2012-04-15
Bar             2012-05-01              2012-05-01
Bar             2012-05-02  2012-05-01  2012-05-01
Bar             2012-05-03  2012-05-02  2012-05-01
Bar             2012-05-06              2012-05-06
Bar             2012-05-07  2012-05-06  2012-05-06
Bar             2012-05-08  2012-05-07  2012-05-06
Bar             2012-05-09  2012-05-08  2012-05-06
Bar             2012-05-10  2012-05-09  2012-05-06
Bar             2012-05-15              2012-05-15
Bar             2012-05-16  2012-05-15  2012-05-15
Bar             2012-05-17  2012-05-16  2012-05-15 
```

[http://www.sqlfiddle.com/#!3/3fd1f/3](http://www.sqlfiddle.com/#!3/3fd1f/3)

`CROSS APPLY/OUTER APPLY`与 JOIN 相比，也可以很好地扩展：[http ://www.ienablemuch.com/2012/04/outer-apply-walkthrough.html](http://www.ienablemuch.com/2012/04/outer-apply-walkthrough.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T01:00:10.090

您可以尝试这样的事情（假设 SQL Server 2005+）：

```
WITH partitioned AS (
  SELECT
    ProductCode,
    Date,
    GroupID = DATEDIFF(DAY, 0, Date)
            - ROW_NUMBER() OVER (PARTITION BY ProductCode ORDER BY Date)
  FROM atable
),
ranges AS (
  SELECT
    ProductCode,
    Date,
    MinDate = MIN(Date) OVER (PARTITION BY ProductCode, GroupID),
    MaxDate = MAX(Date) OVER (PARTITION BY ProductCode, GroupID)
  FROM partitioned
)
SELECT
  MinDate,
  MaxDate
FROM ranges
WHERE ProductCode = @ProductCode
  AND Date = @Date 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T13:41:38.020

**注意：**我添加了第二个解决方案（非递归），它的逻辑读取更少（性能更好）。

1.  您可以使用[递归 CTE （](http://msdn.microsoft.com/en-us/library/ms186243.aspx)[此处](https://data.stackexchange.com/stackoverflow/query/edit/67478)为演示）：

    DECLARE @Test TABLE ( ID INT IDENTITY NOT NULL UNIQUE, --ID 用于插入订单 ProductCode VARCHAR(10) NOT NULL, [Date] SMALLDATETIME NOT NULL, PRIMARY KEY(ProductCode, [Date]) );

    INSERT @Test (ProductCode , [Date]) SELECT 'Foo' , '20120401' UNION ALL SELECT 'Foo' , '20120402' UNION ALL SELECT 'Foo' , '20120403'

    UNION ALL SELECT 'Foo' , '20120404' --UNION ALL SELECT 'Foo' , '20120405'

    UNION ALL SELECT 'Foo' , '20120406' UNION ALL SELECT 'Foo' , '20120407' UNION ALL SELECT 'Foo' , '20120408' UNION ALL SELECT 'Foo' , '20120409' UNION ALL SELECT 'Foo' , '20120410' UNION ALL SELECT 'Foo' , '20120415' UNION ALL SELECT 'Foo' , '20120416' UNION ALL SELECT 'Foo' , '20120417';

    声明@MyProductCode VARCHAR(10)、@MyDate SMALLDATETIME；

    选择 @MyProductCode = 'Foo'，@MyDate = '20120402';

    WITH CteRecursive AS ( --Starting row SELECT t.ID, t.ProductCode, t.[Date], 1 AS RowType FROM @Test t WHERE t.ProductCode = @MyProductCode AND t.[Date] = @MyDate UNION ALL --添加接下来的几天 DATEADD(DAY, +1, ..) SELECT crt.ID, crt.ProductCode, crt.[Date], 2 AS RowType FROM CteRecursive prev INNER JOIN @Test crt ON DATEADD(DAY, 1, prev.[ Date]) = crt.[Date] AND prev.RowType IN (1,2) UNION ALL --添加前几天 DATEADD(DAY, -1, ..) SELECT crt.ID, crt.ProductCode, crt.[Date ], 0 AS RowType FROM CteRecursive prev INNER JOIN @Test crt ON DATEADD(DAY, -1, prev.[Date]) = crt.[Date] AND prev.RowType IN (0,1) ) SELECT * FROM CteRecursive r ORDER BY r.[Date] /*--或 SELECT MIN(r.[Date]) AS BeginDate, MAX(r.[Date]) AS EndDate FROM CteRecursive r */

结果：

```
ID          ProductCode Date                    RowType
----------- ----------- ----------------------- -------
1           Foo         2012-04-01 00:00:00     0
2           Foo         2012-04-02 00:00:00     1
3           Foo         2012-04-03 00:00:00     2
4           Foo         2012-04-04 00:00:00     2 
```

2.  非递归解决方案：

    DECLARE @Test TABLE ( ProductCode VARCHAR(10) NOT NULL, [Date] SMALLDATETIME NOT NULL, PRIMARY KEY(ProductCode, [Date]) );

    INSERT @Test (ProductCode , [Date]) SELECT 'Foo' , '20120401' UNION ALL SELECT 'Foo' , '20120402' UNION ALL SELECT 'Foo' , '20120403'

    UNION ALL SELECT 'Foo' , '20120404' --UNION ALL SELECT 'Foo' , '20120405'

    UNION ALL SELECT 'Foo' , '20120406' UNION ALL SELECT 'Foo' , '20120407' UNION ALL SELECT 'Foo' , '20120408' UNION ALL SELECT 'Foo' , '20120409' UNION ALL SELECT 'Foo' , '20120410' UNION ALL SELECT 'Foo' , '20120415' UNION ALL SELECT 'Foo' , '20120416' UNION ALL SELECT 'Foo' , '20120417';

    声明@MyProductCode VARCHAR(10)、@MyDate SMALLDATETIME；

    选择 @MyProductCode = 'Foo'，@MyDate = '20120402';

    声明@StartDate SMALLDATETIME，@EndDate SMALLDATETIME；

    SELECT @EndDate = MAX(b.[Date]) FROM
    ( SELECT a.[Date], ROW_NUMBER() OVER(ORDER BY a.Date ASC)-1 AS RowNum FROM @Test a WHERE a.ProductCode = @MyProductCode AND a .[Date] >= @MyDate ) b WHERE b.[Date] = DATEADD(DAY, b.RowNum, @MyDate);

    SELECT @StartDate = MIN(b.[Date]) FROM
    ( SELECT a.[Date], ROW_NUMBER() OVER(ORDER BY a.Date DESC)-1 AS RowNum FROM @Test a WHERE a.ProductCode = @MyProductCode AND a .[Date] <= @MyDate ) b WHERE b.[Date] = DATEADD(DAY, -b.RowNum, @MyDate);

    选择@StartDate [@StartDate]，@EndDate [@EndDate]；SELECT LEFT(CONVERT(VARCHAR(10), @StartDate, 101),5) [@StartDate], LEFT(CONVERT(VARCHAR(10), @EndDate, 101),5) [@EndDate];

结果：

```
@StartDate              @EndDate
----------------------- -----------------------
2012-04-01 00:00:00     2012-04-04 00:00:00

@StartDate @EndDate
---------- --------
04/01      04/04 
```

# java - Flex 与 Java VS Coldfusion VS PHP

> ID：10259158
> 
> 赞同：-2
> 
> 时间：2012-04-21T13:03:04.957
> 
> 标签：java, php, apache-flex, coldfusion

我正在开始/学习使用 Flash Builder 4.5 构建 Flex 应用程序。该教程将我链接到[http://www.adobe.com/devnet/flex/testdrive/articles/1_build_a_flex_app.html](http://www.adobe.com/devnet/flex/testdrive/articles/1_build_a_flex_app.html)，我注意到您可以将 Flex 与 Java、Coldfusion 或 PHP 一起使用。我想知道它们之间有什么区别，我应该选择哪一个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:57:44.880

您可以在此处找到与我的回答非常相似的问题：[在我的 Flex 应用程序中获取数据的最佳方式是什么？](https://stackoverflow.com/questions/8328097/which-is-the-best-way-to-get-data-in-my-flex-application/8328424#8328424).

然而，这个问题更多地涉及性能方面，所以我会详细说明。基本上你应该选择你最有效的语言。请注意，除了 Java、ColdFusion 和 PHP，它还可以是 Ruby、Python、.NET 等等，只要它具有 AMF（反）序列化的实现。

如果您最了解其中一种语言，请选择它。如果没有，请选择 ColdFusion 或 Java，因为我相信它们是与 Flex 通信最容易设置的。对于这两者之间的选择：

*   Java 是一种强类型语言，与您将在客户端使用的 ActionScript 3 非常相似。在[BlazeDS](http://opensource.adobe.com/wiki/display/blazeds/BlazeDS)站点上，您会发现一个集成了 BlazeDS 的 Tomcat 服务器以及一些带有 Flex 和 Java 的示例应用程序。
*   ColdFusion 是松散类型的，并且是建立在 Java 之上的生产力层。它与 BlazeDS 一起预先打包，并且很容易使用 Flex 进行设置。但是，与 Tomcat 相比，它的资源相当繁重，如果您打算在本地运行它，您可能需要考虑这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:09:09.657

Flex with Java 是我的选择，因为 Java 是强类型的，有很好的 API，有很多第三方库，并且擅长处理 XML。

# python - 如何从处理程序中的 blobstore 检索文件对象？

> ID：10259162
> 
> 赞同：4
> 
> 时间：2012-04-21T13:03:29.287
> 
> 标签：python, google-app-engine, blobstore

我在 blobstore 中保存了一个文档，并试图在处理程序（处理任务）中检索它。我已经阅读了有关如何使用 blobstore[的 appengine 文档](https://developers.google.com/appengine/docs/python/blobstore/overview)，但我很难让它适用于我的情况。我在处理程序中尝试了以下操作，但似乎无法将对象作为保存的文件（例如 .pdf 或 .txt）返回

```
class SendDocuments(webapp2.RequestHandler):
    def post(self):
        document_key = self.request.get("document_key")
        document_key = Key(str(document_key))
        the_document = DocumentsModel.all().filter("__key__ =", document_key).get()
        file_data = blobstore.BlobInfo.get(str(the_document.blobstore_key)) # returns a blobinfo object
        file_data.open() # returns a blobreader object
        file_data.open().read() # returns a string 
```

我也试过

```
class ServeSavedDocument(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, blob_key):
    self.send_blob(blob_key, save_as=True)
    return

class SendDocuments(webapp2.RequestHandler):
    def post(self):
        document_key = self.request.get("document_key")
        document_key = Key(str(document_key))
        the_document = DocumentsModel.all().filter("__key__ =", document_key).get()
        grab_blob = ServeSavedDocument()
        file_data = grab_blob.get(self, str(the_document.blobstore_key)) 
```

但是对 ServeSavedDocument 的调用失败了

```
'NoneType' object has no attribute 'headers' 
```

我已经查看了[文件 api](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)，但唯一不保存文件的示例似乎只是返回了 blob 密钥，即

```
blob_key = files.blobstore.get_blob_key(file_name) 
```

从处理程序中获取 blobstore 中已保存文件的最佳方法是什么？

## 编辑1：

我正在尝试以可以使用以下代码在发布请求中编码为文件的格式/状态从 blobstore 检索 txt 文件或 pdf 文件

```
from google.appengine.api import urlfetch
from poster.encode import multipart_encode
# assuming here that file_data is the file object
payload = {}
payload['user_id'] = '1234123412341234'
payload['test_file'] = MultipartParam('test_file', filename=file_data.filename,
                                      filetype=file_data.type,
                                      fileobj=file_data.file)
data,headers= multipart_encode(payload)
send_url = "http://127.0.0.0/"
t = urlfetch.fetch(url=send_url, payload="".join(data), method=urlfetch.POST, headers=headers) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:52:40.093

好的，经过一番折腾，我发现这行得通！关键是在 blobinfo 对象上简单地调用 open()。

```
class SendDocuments(webapp2.RequestHandler):
    def post(self):
        document_key = self.request.get("document_key")
        document_key = Key(str(document_key))
        the_document = DocumentsModel.all().filter("__key__ =", document_key).get()
        file_data = blobstore.BlobInfo.get(str(the_document.blobstore_key))
        payload = {}
        payload['user_id'] = '1234123412341234'
        payload['test_file'] = MultipartParam('the_file', filename="something",
                                      filetype=file_data.content_type,
                                      fileobj=file_data.open()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:09:27.447

尝试这样，指定文件名，并在`send_blob()`as 中输入：

```
def mime_type(filename):
    return guess_type(filename)[0]
    class ServeSavedDocument(blobstore_handlers.BlobstoreDownloadHandler):
        def get(self):
            blob_key = self.request.get("blob_key")
            if blob_key:
                blob_info = blobstore.get(blob_key)               
                if blob_info:
                    save_as1 =  blob_info.filename
                    type1=mime_type(blob_info.filename)
                    self.send_blob(blob_info,content_type=type1,save_as=save_as1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:15:26.337

看看 BlobReader 类，我认为这就是你要找的： [https ://developers.google.com/appengine/docs/python/blobstore/blobreaderclass](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)

它允许对 blobstore 数据进行类似文件的读取访问：

```
# blob_key = ..

# Instantiate a BlobReader for a given Blobstore value.
blob_reader = blobstore.BlobReader(blob_key)
# Read the entire value into memory. This may take a while depending
# on the size of the value and the size of the read buffer, and is not
# recommended for large values.
value = blob_reader.read() 
```

# php - PHP PayPal IPN 无效 URL 错误但 URL 存在并且文件工作

> ID：10259169
> 
> 赞同：1
> 
> 时间：2012-04-21T13:04:19.873
> 
> 标签：php, paypal-ipn

我完全不知道为什么我的 PayPal IPN 听众无法使用我的网络支付标准按钮

我正在使用 Micah Carricks PayPal 类，它被广泛使用，并且我已经配置并且似乎在我的服务器上工作正常

当我尝试处理我的 IPN 时出现了我的问题

沙盒模拟器工具告诉我我的 URL 无效，尽管 URL 存在并且当我直接访问它时处理和记录我的错误很好

谁能告诉我我做错了什么？

这是我的监听器代码

```
<?php 
ini_set('log_errors', true);
ini_set('error_log', '../car_errors.log');

// instantiate the IpnListener class
include('ipnlistener.php');
$listener = new IpnListener();
$listener->use_sandbox = true;
$account_owner = 'MY_EMAIL';

try 
{
    $listener->requirePostMethod();
    $verified = $listener->processIpn();
} 
catch (Exception $e) 
{
    error_log($e->getMessage());
    exit(0);
}

/*
The processIpn() method returned true if the IPN was "VERIFIED" and false if it
was "INVALID".
*/
if ($verified) 
{
    if()//My checks on the post data to update my database
    {
    } 
mail($account_owner, 'Verified Car IPN', $listener->getTextReport());
} 
else 
{
    mail($account_owner, 'Invalid Car IPN', $listener->getTextReport());
}
?> 
```

我还尝试了将 use_sandbox 设置为 false 的实时事务，并且 IPN 历史显示 IPN 为重试，表明它无法联系 URL

我开始对让这个工作失去所有希望。我担心这可能是我在服务器上的文件权限，但是它们都设置为 664。我说这是因为侦听器在共享主机上工作，但自从升级到 VPS 后一直存在问题

任何帮助将不胜感激

巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:57:33.543

如果它在您更改服务器之前工作，那么这听起来像是某种服务器配置问题。由于您可以访问该 URL，并且您在 Paypal 配置中具有相同的 URL，因此请验证您的 SSL 是否已正确安装。由于某些证书错误，Paypal 可能看不到 URL。

# scripting - vbscript 递归编程技术

> ID：10259170
> 
> 赞同：1
> 
> 时间：2012-04-21T13:04:26.537
> 
> 标签：scripting, recursion, vbscript

我正在寻找一些关于 vbscript 中递归的专家见解。从网上找到的各种示例中，我创建了以下代码，顺便说一句。

*   [http://saltwetbytes.wordpress.com/2010/05/04/vbscript-grabbing-subfolders-recursively/](http://saltwetbytes.wordpress.com/2010/05/04/vbscript-grabbing-subfolders-recursively/)
*   [http://technet.microsoft.com/en-us/library/ee198872.aspx](http://technet.microsoft.com/en-us/library/ee198872.aspx)

    ```
    Function GetAllSubFolders(RootFolder, ByRef pSubfoldersList)
        Dim fso, SubFolder, root
        Set fso = CreateObject("scripting.filesystemobject")
        set root = fso.getfolder(RootFolder)
        For Each Subfolder in root.SubFolders
            If pSubFoldersList = "" Then
                pSubFoldersList = Subfolder.Path         
            Else
                pSubFoldersList = pSubFoldersList & "|" & Subfolder.Path
            End If
            GetAllSubFolders Subfolder, pSubFoldersList
        Next
        GetAllSubFolders = pSubFoldersList
    End Function 
    ```

我的问题是：在创建递归函数（使用参数存储先前结果）时，这是一个好的方法吗？

我更喜欢把它放在一个（自包含的）“函数”中，所以该过程返回子子文件夹作为结果。但是发现的大多数示例都使用“sub”，当谈到“sub”与“function”时，我总是感到困惑（我理解当你想要一个需要返回你使用函数的东西的过程时，恕我直言，这似乎是本例中的情况）但我也可以使用“子”并简单地引用输出参数（ByRef pSubfoldersList）

那么最佳实践是什么，或者一起使用完全不同的方法更好？（与[shell.exec“cmd /c dir RootFolder /s /b /a:d”]相比，这个例子的功能也很慢，我想这是递归的副作用，或者FSO真的是减缓？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:18:17.353

将结果传递给递归函数是否是一种好习惯，我真的不知道，您可以通过这种方式和其他方式进行测试，并比较所花费的时间和内存。没有用你的版本尝试过这个，因为如果我从 c 的根目录开始，我会收到错误“Microsoft VBScript 运行时错误：权限被拒绝”：

您的解决方案的真正问题是连接，这需要时间，因为在您的情况下，每次都会创建 BIG 变量。最好将结果存储在数组中，或者在 VBscript 的情况下存储在字典中。我会发布一个例子。

sub 和 function 之间的区别是什么：你对主要区别是正确的，返回结果但这是可选的，所以我总是使用函数，唯一的缺点是如果你不将值分配给变量并且你使用超过 2 个参数，您必须使用“调用”。当您将方法与 ByRef 一起使用时，您还可以在主全局上下文中定义 var，它可能封装更少但更具可读性，您可以更轻松地重用或调试结果。

速度问题：vbscript 在文件处理方面非常慢，如果您使用 WMI，也许您可​​以加快一点速度，但速度并不快，确实对于某些操作，最好还是让操作系统来处理它。我现在用 Ruby 编程，大多数这样的工作你可以用一行代码编写，而且速度要快得多。

说到快速，如果您的唯一目的是拥有文件列表，请了解“搜索所有内容”工具，在不到一秒钟的时间内您可以搜索数百万个文件，如果您不知道，请查看！

这是一个使用字典的例子

```
set fso = CreateObject("Scripting.FileSystemObject")
set filelist = CreateObject("Scripting.Dictionary")
iCount = 0
ShowSubfolders fso.GetFolder("C:\Documents and Settings\peter")
PrintFilelist(filelist)
'--- ---
Function ShowSubFolders(Folder)
  For Each Subfolder in Folder.SubFolders
    on error resume next
    wscript.echo Subfolder.Path 'show some progress
    Set fFolder = fso.GetFolder(Subfolder.Path)
    if err.number <> 0 then wscript.echo err.description
    For Each File in fFolder.Files
      iCount = iCount+1
      filelist.add iCount, File.Path
    Next
    ShowSubFolders Subfolder
  Next
End Function
'--- ---'
Function PrintFilelist(ByRef dic)
  Dim index, allKeys, allItems, msg
  allKeys = dic.Keys
  ' allKeys is an array to all the keys
  allItems = dic.Items
  ' allItems is an array to all the items
  wscript.echo "There are " & dic.Count & " number of files in the dictionary"
  For index = 0 To dic.Count-1
    ' Notice, dictionary range goes from 0 to count-1
    wscript.echo "Key=" & allKeys(index) & " Filename=" & allItems(index)
  Next
End Function 
```

# php - 如何使用 PHP 从 URL 中提取域名

> ID：10259172
> 
> 赞同：0
> 
> 时间：2012-04-21T13:04:35.757
> 
> 标签：php, html, url

我想知道如何从 url 中提取域名

我在 HTML 文件中有数据：

```
<a href='http://google.com.site.com'>google.com</a><br /><a href='http://youtube.com.site.com'>youtube.com</a><br /> 
```

我可以通过

```
 preg_match_all ("/a[\s]+[^>]*?href[\s]?=[\s\"\']+".
                    "(.*?)[\"\']+.*?>"."([^<]+|.*?)?<\/a>/",
                    $var, &$matches);

    $matches = $matches[1];
    $list = array();
sort($matches); 
```

但我想提取标签之间的`google.com` and 。那么我该如何提取和？`youtube.com``<a> and </a>`
`google.com``youtube.com`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:56:06.110

在经历了很多麻烦之后，我编写了自己的正则表达式

```
<a[^>]*>(.*?)<\/a> 
```

这行得通

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:19:51.757

如果您乐于匹配链接文本，则此正则表达式有效。

```
>(.*?)</a> 
```

如果你想解析实际的 URL，你可以尝试忽略一些接受的字符串之后的所有内容，例如“com”、“net”和“org”。这可能会变得非常棘手。你想匹配主机名还是什么？

至于您的示例“youtube.com.site.com”，请参阅：[http ://en.wikipedia.org/wiki/Domain_name#Domain_name_syntax](http://en.wikipedia.org/wiki/Domain_name#Domain_name_syntax)

如果您可以轻松访问 URL，请检查 PHP 的[parse_url](http://php.net/manual/en/function.parse-url.php)函数。

* * *

更新。这是一个匹配 URL`href=`后跟单引号或双引号的正则表达式。在此之后它应该很容易使用`parse_url()`

```
<a href=['|"](.*?)?['|"]> 
```

* * *

更新2。空白是问题所在。我无法做一个优雅的解决方案，但这个解决方案负责`<br />`s。我很确定有更有效的解决方案。如果我找到一个我会回来的。

```
$s = '<a href='http://google.com.site.com'>google.com</a><br /><a href='http://youtube.com.site.com'>youtube.com</a><br /><a href='http://youtube.com.site.com'>extratube.com</a>';

$pattern = '#>(.*?)</a>(<br />)*#';
preg_match_all($pattern, $s, $result);
var_dump($result); 
```

# c# - 复杂的 NHibernate 查询...超出我的理解

> ID：10259180
> 
> 赞同：0
> 
> 时间：2012-04-21T13:05:14.003
> 
> 标签：c#, nhibernate, c#-4.0

我有两个 POCO 对象：

```
///<summary>
///Auto-generated concrete POCO for persistance use <strong>Log</strong>
///</summary>
public class Log : ILogExtended
{
    #region Primitive Properties

    ///<summary>
    /// The log entry ID
    ///</summary>
    public virtual int LogId { get; set; }

    ///<summary>
    /// The timestamp of the log entry (UTC)
    ///</summary>
    public virtual DateTime TimeStamp { get; set; }

    ///<summary>
    /// The thread ID that generated the log entry
    ///</summary>
    public virtual string Thread { get; set; }

    ///<summary>
    /// The severity of the log entry
    ///</summary>
    public virtual string Severity { get; set; }

    ///<summary>
    /// The source module of the log entry
    ///</summary>
    public virtual string Source { get; set; }

    ///<summary>
    /// The log entry message
    ///</summary>
    public virtual string Message { get; set; }

    ///<summary>
    /// The associated exception text associated with the log entry
    ///</summary>
    public virtual string Exception { get; set; }
    #endregion

    #region Navigation Properties

    ///<summary>
    /// The user associated with the log entry
    ///</summary>
    public virtual UserProfile UserProfile { get; set; }
    #endregion

    #region Navigation Collections
    #endregion
} 
```

和

```
///<summary>
///Auto-generated concrete POCO for persistance use <strong>UserProfile</strong>
///</summary>
public class UserProfile : IUserProfileExtended
{
    #region Primitive Properties

    ///<summary>
    /// The unique ID of the profile
    ///</summary>
    public virtual int UserID { get; set; }

    ///<summary>
    /// The given name of the profile
    ///</summary>
    public virtual string GivenName { get; set; }

    ///<summary>
    /// The middle name of the profile
    ///</summary>
    public virtual string MiddleName { get; set; }

    ///<summary>
    /// The family name of the profile
    ///</summary>
    public virtual string FamilyName { get; set; }

    ///<summary>
    /// The user name of the profile
    ///</summary>
    public virtual string UserName { get; set; }

    ///<summary>
    /// The nickname of the profile
    ///</summary>
    public virtual string NickName { get; set; }

    ///<summary>
    /// The first address line of the profile
    ///</summary>
    public virtual string Address1 { get; set; }

    ///<summary>
    /// The second address line of the profile
    ///</summary>
    public virtual string Address2 { get; set; }

    ///<summary>
    /// The mailing address city of the profile
    ///</summary>
    public virtual string City { get; set; }

    ///<summary>
    /// The mailing address state of the profile
    ///</summary>
    public virtual string State { get; set; }

    ///<summary>
    /// The mailing address zip code of the profile
    ///</summary>
    public virtual string ZipCode { get; set; }

    ///<summary>
    /// The user's self description
    ///</summary>
    public virtual string Bio { get; set; }

    ///<summary>
    /// The user's birth date.
    ///</summary>
    public virtual Nullable<DateTime> BirthDate { get; set; }

    ///<summary>
    /// The user's photo URL
    ///</summary>
    public virtual string LinkToAvatar { get; set; }

    ///<summary>
    /// The user's website URL
    ///</summary>
    public virtual string LinkToWebpage { get; set; }
    #endregion

    #region Navigation Properties
    #endregion

    #region Navigation Collections

    ///<summary>
    /// The log entries of the user's actions
    ///</summary>
    public virtual IList<Log> ActivityLogs { get; set; }
    #endregion
} 
```

这些对象在数据库中的映射如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                    assembly="C3.DataModel.Generated"
                    namespace="C3.DataModel">
    <class name="Log" table="Logs">
        <id name="LogId">
            <generator class="identity" />
        </id>
        <property name="TimeStamp" column="TimeStamp" index="ixLogTimeStamp" not-null="true" />
        <property name="Thread" length="255" column="Thread" not-null="true" />
        <property name="Severity" column="Severity" not-null="true" />
        <property name="Source" length="255" not-null="false" column="Source" />
        <property name="Message" length="4000" not-null="true" column="Message"/>
        <property name="Exception" length="4000" column="Exception"/>
        <many-to-one name="UserProfile" column="UserID" cascade="none" not-found="ignore"/>
    </class>
</hibernate-mapping> 
```

和

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                    assembly="C3.DataModel.Generated"
                    namespace="C3.DataModel">
    <class name="UserProfile" table="UserProfiles">
        <id name="UserID">
            <generator class="assigned" />
        </id>
        <property name="GivenName" length="40" column="GivenName" />
        <property name="MiddleName" length="40" column="MiddleName" not-null="false" />
        <property name="FamilyName" length="40" column="FamilyName" />
        <property name="UserName" length="250" index="ixUserName" unique="true" />
        <property name="NickName" length="40" column="NickName" />
        <property name="Address1" length="50" column="Address1" />
        <property name="Address2" length="50" column="Address2" />
        <property name="City" length="50" column="City" />
        <property name="State" length="2" column="State" />
        <property name="ZipCode" length="10" column="ZipCode" />
        <property name="Bio" length="2000" column="Bio" not-null="false" />
        <property name="BirthDate" not-null="false" column="BirthDate" />
        <property name="LinkToAvatar" length="250" column="LinkToAvatar" not-null="false" />
        <property name="LinkToWebpage" length="250" column="LinkToWebPage" not-null="false" />
    </class>
</hibernate-mapping> 
```

我正在尝试构建一个 Log Searcher 函数，如下所示：

```
 /// <summary>
    /// Searches the logs for matching records
    /// </summary>
    /// <param name="fromUTC">Start point timestamp of the search</param>
    /// <param name="toUTC">End point timestamp of the search</param>
    /// <param name="ofSeverity">Severity level of the log entry</param>
    /// <param name="orHigher">Retrieve more severe log entries as well that match</param>
    /// <param name="sourceStartsWith">The source field starts with these characters</param>
    /// <param name="usernameStartsWith">The username field starts with these characters</param>
    /// <param name="maxRecords">The maximum nuber of records to return</param>
    /// <returns>A list of Log objects with attached UserProfile objects</returns>
    public IEnumerable<Log> SearchLogs(
        DateTime fromUTC, 
        DateTime toUTC, 
        string ofSeverity, 
        bool orHigher, 
        string sourceStartsWith, 
        string usernameStartsWith, 
        int maxRecords)
    {
        var result = _Session
            (SOMETHING goes here)
    } 
```

作为 NHibernate 的一名 n00b，这种多方面的查询让我摸不着头脑，我希望能得到一些帮助。如果您能说明我将如何修改其他类似查询的语句，我将不胜感激。

注意：如果设置了参数，则 Severity 将为`IEnumerable<string>`一个或多个值`orHigher`。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T14:18:27.377

这是我最终得到的结果，如果我做错了什么或效率低下，请随时告诉我：

```
 /// <summary>
    /// Searches the logs for matching records
    /// </summary>
    /// <param name="fromUTC">Start point timestamp of the search</param>
    /// <param name="toUTC">End point timestamp of the search</param>
    /// <param name="ofSeverity">Severity level of the log entry</param>
    /// <param name="orHigher">Retrieve more severe log entries as well that match</param>
    /// <param name="sourceStartsWith">The source field starts with these characters</param>
    /// <param name="usernameStartsWith">The username field starts with these characters</param>
    /// <param name="maxRecords">The maximum number of records to return</param>
    /// <returns>A list of Log objects with attached UserProfile objects</returns>
    public IEnumerable<Log> SearchLogs(
        DateTime fromUTC,
        DateTime toUTC,
        string ofSeverity,
        bool orHigher,
        string sourceStartsWith,
        string usernameStartsWith,
        int maxRecords)
    {
        ofSeverity = ofSeverity ?? "INFO";

        var query = DetachedCriteria.For<Log>()
            .SetFetchMode("UserProfile", NHibernate.FetchMode.Eager)
            .Add(Restrictions.In("Severity", (orHigher ?
                Translator.SeverityOrHigher(ofSeverity) : Translator.Severity(ofSeverity)).ToArray()))
            .Add(Restrictions.Between("TimeStamp", fromUTC, toUTC))
            .AddOrder(Order.Desc("TimeStamp"))
            .SetMaxResults(maxRecords);

        if (!string.IsNullOrEmpty(usernameStartsWith))
        {
            query.CreateCriteria("UserProfile")
                .Add(Restrictions.InsensitiveLike("UserName",
                usernameStartsWith, MatchMode.Start));
        }

        if (!string.IsNullOrEmpty(sourceStartsWith))
        {
            query
                .Add(Restrictions.InsensitiveLike("Source", sourceStartsWith, MatchMode.Start));
        }

        return query.GetExecutableCriteria(_Session).List<Log>();

    } 
```

# java - 多人可以在同一个项目上工作吗？

> ID：10259181
> 
> 赞同：4
> 
> 时间：2012-04-21T13:05:40.357
> 
> 标签：java, eclipse

我和我的其他朋友程序员可以在 Eclipse 同步的情况下处理同一个项目，还是我们需要每 10 分钟共享一次 src？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:07:11.200

您正在寻找一个版本控制系统 (VCS)，例如 CVS、SVN、Git、Mercurial 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T13:09:30.590

您当然可以使用“团队”菜单，它可以让您访问版本控制系统。我会推荐 Git 或 Mercurial（分布式版本控制系统）。

[EGit/JGit](http://www.eclipse.org/egit/)现在是主流插件的一部分：您可以使用“安装新软件...”中的“Indigo”存储库（假设 Eclipse 3.7）安装它们。

集中式版本控制系统（如 CVS 或 SVN）也有 Eclipse 插件。但是，它们可能会在需要时使分支和合并冲突变得更加困难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T06:46:23.200

您似乎在询问 Eclipse 是否支持共享工作空间，以便您和您的朋友可以（实质上）合作编辑和实时运行同一组 java 文件。

像这样的东西 - [http://www.readwriteweb.com/cloud/2011/07/cloud9s-web-based-real-time-co.php](http://www.readwriteweb.com/cloud/2011/07/cloud9s-web-based-real-time-co.php)

答案是否定的。Eclipse 不直接支持这一点。

但是，有一个名为[Saros](http://www.saros-project.org/)的 Eclipse 插件/项目声称可以做到这一点。Saros 网站有可能相关的[相关项目的链接。](http://www.saros-project.org/#Related_Work)

（仅供参考 - 相关搜索词是“协作编程”。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T13:08:41.897

这就是你需要的： [http ://en.wikipedia.org/wiki/Revision_control](http://en.wikipedia.org/wiki/Revision_control)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T13:12:35.757

SVN 或 CVS - 一种版本控制系统将帮助您一起工作，或者您想在线维护您的存储库，然后请查看[https://stackoverflow.com/questions/59791/free-online-private-svn-repositories](https://stackoverflow.com/questions/59791/free-online-private-svn-repositories)链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T13:07:55.710

我使用位于系统托盘中的[SVN 通知程序](http://svnnotifier.tigris.org/)，并在每次存储库更改时通知我。我可以强烈推荐它。这意味着您仅在有要更新的内容时才更新！

或者，您可以设置一个计划的任务/cron 作业以`svn update`每小时/每天/任何时间在适当的目录中运行。

请参阅[这篇](http://support.microsoft.com/kb/308569)关于设置计划任务的 Microsoft 文章。

你想要一个名为 svnUpdate.bat 的批处理文件或类似这样的东西：

```
 cd C:/path/to/your/working/copy

svn update 
```

让计划任务随心所欲地运行它（一小时一次似乎是明智的）

确保您已安装 svn 的命令行版本（我使用[SlikSvn](http://www.sliksvn.com/en/download)）并且在您的 PATH 中可用（在命令窗口类型中`svn`并确保它显示“Type svn help...”或类似内容。

# javascript - 用于动态页面加载的引导输入选择器

> ID：10259184
> 
> 赞同：1
> 
> 时间：2012-04-21T13:06:50.077
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap

当我正常加载页面并使用此代码时：

```
$('#clientName').typeahead({
   //removed options since they are not needed for my question
}); 
```

预输入在#clientName 上运行良好。但是当我通过 AJAX 动态加载输入 #clientName 时，上面的代码不起作用。

有什么办法让它工作吗？

它等于这个问题：

```
$('#randomDiv').click(function() {
  alert("Handler for .click() called.");
}); 
```

这仅在内容未动态加载时才有效。但是这段代码可以工作：

```
$(document).on('click','#randomDiv',function() {
  alert("Handler for .click() called.");   
}); 
```

所以我想将处理程序添加到文档或正文，而不是#clientName div 本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:36:49.680

我认为您只能选择在动态`$('#clientName').typeahead(...);`插入`input`id*为 clientName*后再次调用。如果你封装调用`typehead`一个函数，你只需要再次调用该函数，而不需要再次设置所有选项。

# java - Math.ceil 返回 0.0？

> ID：10259189
> 
> 赞同：0
> 
> 时间：2012-04-21T13:07:38.673
> 
> 标签：java, math

所以我正在开发一个 Java 项目，我输入以下内容：

```
double totalPages;
int amountKits = 2;
totalPages = amountKits / 3;
System.out.println("Total pages before ceil: " + totalPages);
totalPages = Math.ceil(totalPages);
System.out.println("Amount of Kits: " + amountKits);
System.out.println("Total Pages: " + totalPages); 
```

结果如下：

```
Total pages before ceil: 0.0
Amount of Kits: 2
Total Pages: 0.0 
```

有谁知道为什么会这样？（对不起，我是菜鸟，我知道）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T13:09:06.987

因为你正在`2 / 3`用整数算术计算。

尝试：

```
totalPages = amountKits / 3.0; 
```

反而。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T13:10:09.843

`2/3`是返回 0 的**整数除法**。然后，当您分配给 . 时，它会转换为浮点值 0.0 `totalPages`。

您需要执行浮点除法，例如通过编写`amountKits/3.0`.

# android - debug.keystore 通过询问 Open with promp 打开

> ID：10259192
> 
> 赞同：0
> 
> 时间：2012-04-21T13:08:06.053
> 
> 标签：android, google-maps-api-3, md5-file

嗨，从早上开始，我一直在尝试获取 Google API 的 MD5 指纹，但无法获取，主要问题是我将 debug.keystore 文件的属性更改为**使用 Microsoft Word 打开** ，所以每当我试图从中获取它时命令提示符以编码格式在 MS-Word 中打开。请帮助我如何获得它。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:22:10.143

这个命令行命令也会打开 MS Word？

```
keytool -list -alias androiddebugkey -keystore .android/debug.keystore -storepass android -keypass android 
```

# windows-phone-7.1 - 动态创建画布

> ID：10259195
> 
> 赞同：0
> 
> 时间：2012-04-21T13:08:32.713
> 
> 标签：windows-phone-7.1

我开始在 WindowsPhone 中开发应用程序，但遇到了一些问题。我试图动态添加画布，但它不起作用，我可能忘记了一些事情，你能帮忙发现我的错误吗？下面的代码来自我的学习应用程序，它是基本的 Win Phone 应用程序。

cs代码：

```
public MainPage()
    {
        InitializeComponent();

        int size = 50;
        Canvas myCanvas = new Canvas();
        Canvas.SetLeft(myCanvas, 0);
        myCanvas.Width = size;

        Color c = new Color();
        c.R = 255;
        c.B = 0;
        c.G = 255;

        myCanvas.Background = new SolidColorBrush(c);

        ContentPanel.Height = 100;
        ContentPanel.Width = 100;
        ContentPanel.Children.Add(myCanvas);
        ApplicationTitle.Text = ContentPanel.ActualHeight.ToString();

    } 
```

xml

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:43:02.900

我不太确定你想用 Canvas 在这里完成什么。您可能需要查看其他控件以获取您想要执行的操作。

话虽如此，问题在于您缺少颜色中的“Alpha”组件。这使它变得透明。

改变：

```
 Color c = new Color();
    c.R = 255;
    c.B = 0;
    c.G = 255;

    c.A = 255;  // this is what you need to add to make it visible. 
```

# opengl - 2D HUD 中的纹理错误

> ID：10259198
> 
> 赞同：1
> 
> 时间：2012-04-21T13:08:41.263
> 
> 标签：opengl, hud

我正在尝试在我的 3d 应用程序中实现 HUD，我所取得的是我在某个位置有一个矩形，上面有纹理。问题是每当我旋转或移动相机时，纹理会随着相机缩放或移动，看起来很奇怪。任何想法为什么会发生？

这就是我添加 HUD 的方法：

```
glDisable(GL_DEPTH_TEST);  
glClear(GL_DEPTH_BUFFER_BIT);
glMatrixMode( GL_PROJECTION );
glPushMatrix();
glLoadIdentity();
gluOrtho2D( 0, 1, 0, 1);
glMatrixMode( GL_MODELVIEW );
glPushMatrix();
glLoadIdentity();

        glEnable (GL_TEXTURE_2D);
        glBindTexture (GL_TEXTURE_2D,4 );
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
        glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

        glBegin( GL_QUADS );
            glColor3f( 1.0f, 1.0f, 0.0f );

            glTexCoord2f(0,0);
            glVertex2f( 0.0f, 0.0f );
            glTexCoord2f(1,0);
            glVertex2f( 0.4f, 0.0f );
            glTexCoord2f(1,1);
            glVertex2f( 0.4f, 0.4f );
            glTexCoord2f(0,1);
            glVertex2f( 0.0f,0.4f );
        glEnd();

    glPopMatrix();

glMatrixMode( GL_PROJECTION );
glPopMatrix();
 glEnable(GL_DEPTH_TEST); 
glEnable( GL_LIGHTING ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:20:13.437

您的代码缺少另一个调用 glMatrixMode(GL_MODELVIEW); 在您第二次调用 glPopMatrix() 之后。

也许这在您的代码中较低，但从您对正在发生的事情的描述来看，这听起来确实是矩阵的问题。

# android - 结果接收器与信使

> ID：10259210
> 
> 赞同：12
> 
> 时间：2012-04-21T13:10:10.107
> 
> 标签：android, android-service, android-messaging

我正在根据本演示文稿的第一种方法实现 REST 客户端 - [http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

目前我正在使用`ResultReceiver`服务和服务助手之间的“绑定回调”，

有什么理由我应该更喜欢`Messenger`或`ResultReceiver`相反吗？

# java - 联系人模块的自动完成功能

> ID：10259211
> 
> 赞同：0
> 
> 时间：2012-04-21T13:10:11.030
> 
> 标签：java, html

我有一个应用程序，它有一个联系人模块，我正在使用 JAVA。我必须为它实现“自动完成”功能。即，当我开始输入字母时，搜索结果开始出现，并且在输入相同的字母后最终会缩小到匹配的字母。

请帮助我提供一些参考 JAVA 代码、API 和一些很酷的东西作为附加组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:12:39.310

我认为你需要使用 Ajax 来做同样的事情。查看 irctc.co.in，他们使用 Ajax 来完成站点，非常轻松

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:22:14.247

如果您正在寻找一些示例，请参阅此

[http://viralpatel.net/blogs/2009/06/tutorial-create-autocomplete-feature-with-java-jsp-jquery.html](http://viralpatel.net/blogs/2009/06/tutorial-create-autocomplete-feature-with-java-jsp-jquery.html)

这是自动完成的基本示例。如果你想要一些爵士的外观和领域，那么你可以在客户端使用 jquery 插件

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)

[http://www.ajaxdaddy.com/demo-jquery-autocomplete.html](http://www.ajaxdaddy.com/demo-jquery-autocomplete.html)

我想这会对你有所帮助。

# jquery - 带有数字的 jQuery 选择类。例如 foo1, foo2, foo3, foo4

> ID：10259213
> 
> 赞同：0
> 
> 时间：2012-04-21T13:10:44.070
> 
> 标签：jquery, loops, jquery-selectors

我正在尝试选择一个 div 列表（foo#）并在悬停时淡入另一个 div（zxcv#）。我在 javascript 中分配了一个 var，但最终效果只显示在 foo6 中？

```
<div class="foo1"><div class="zxcv1"></div></div>
<div class="foo2"><div class="zxcv2"></div></div>
<div class="foo3"><div class="zxcv3"></div></div>
<div class="foo4"><div class="zxcv4"></div></div>
<div class="foo5"><div class="zxcv5"></div></div>
<div class="foo6"><div class="zxcv6"></div></div>

<script type="text/javascript">
        for (var i = 1; i < 6; i++) {
        $(".foo"+i).hover(
                function ()
                {
                    $(".zxcv"+i).fadeIn();
                }, function ()
                {
                    $(".zxcv"+i).fadeOut();
                });
        }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:15:07.187

您可以使用“[以”选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("div[class^='foo']").hover(function() {
    $(this).find("div[class^='zxcv']").fadeIn();
}, function() {
    $(this).find("div[class^='zxcv']").fadeOut();
}); 
```

这消除了循环的需要，因为大多数 jQuery 方法适用于集合中的每个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T13:14:32.913

您正在关闭回调中的循环变量`i`，其最终结果`i`始终`6`在其中（您可以使用`console.log`or进行检查`alert`）。

要解决这个问题，您需要确保每个回调都有自己的`i`. 由于 Javascript 变量的作用域不是块而是整个函数，这意味着您需要使用`i`每次的当前值调用函数：

```
for (var i = 1; i < 6; i++) {
    (function(i) {
        $(".foo"+i).hover(
                function ()
                {
                    $(".zxcv"+i).fadeIn();
                }, function ()
                {
                    $(".zxcv"+i).fadeOut();
                });
    })(i);
} 
```

几点注意事项：

*   循环条件`i < 6`不是`i <= 6`-- 这是一个错误吗？
*   正如其他人已经说过的，在这种特定情况下，您可以通过使用不同的选择器完全避免关闭问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T13:15:31.827

您可以选择所有`$("[class^='foo']")`（另见[此处](http://api.jquery.com/attribute-starts-with-selector/)）：

```
$("[class^='foo']").hover(
    function () {
        $(this).find("[class^='zxcv']").fadeIn();
    }, function () {
        $(this).find("[class^='zxcv']").fadeOut();
    }
); 
```

另请参阅[我的示例](http://jsfiddle.net/HgCvt/3/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-02T14:32:11.380

尝试使用 :nth-child()

```
for (var i = 1; i < 6; i++) {
    $(".foo:nth-child("+i+")").hover(
            function ()
            {
                $(this).fadeIn();
            }, function ()
            {
                $(this).fadeOut();
            });
    } 
```

# javascript - 具有多个播放器的 YouTube API CSS 和控制

> ID：10259216
> 
> 赞同：1
> 
> 时间：2012-04-21T13:11:27.453
> 
> 标签：javascript, css, youtube, youtube-api, youtube-javascript-api

我试图创建一个包含 2 个或更多由 JavaScript 中的链接控制的 YouTube 播放器的页面，实际上我阅读了几次 YouTube API 文档，但我仍然无法理解如何嵌入 2 个或更多不同的播放器并仍然控制它们链接 ytplayer 的东西...另一个问题是我不能对那些使用 DIV 和 CSS 的播放器进行设计更改，当我这样做时，没有任何改变，任何人都可以帮助我，我对这些东西很陌生。 ..这是基本代码，我应该怎么做？这是代码的链接：

[http://pastebin.com/raw.php?i=bZQa1euR](http://pastebin.com/raw.php?i=bZQa1euR)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:24:44.767

我一直觉得这是一个有用的策略

```
function stop(videoId) {
    ytplayer = document.getElementById(videoId);
    ytplayer.stopVideo();
}; 
```

然后你只需使用

```
<a href="" onclick="stop('videoid')">Stop</a> 
```

# android - 从 Android 日历中的事件启动我的应用程序？

> ID：10259217
> 
> 赞同：1
> 
> 时间：2012-04-21T13:11:29.793
> 
> 标签：android, android-activity, calendar

是否可以创建一个可以打开我的应用程序的日历事件？警报响起，然后是这样的：“事件等等。你想启动 MyApp 吗？” -> 是 -> MyApp 的主要活动已启动。

这可能吗？

（针对 Android 2.2）

# iphone - 将 NSMutableArray 传递给 UITableViewController

> ID：10259218
> 
> 赞同：0
> 
> 时间：2012-04-21T13:11:30.867
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我有包含 NSMutableArray 的 UIViewController ，我想将此数组传递给 UITableViewController 并在桌子上查看它.. 我该怎么做？

我的意思是我想（传递）NSMutableArray 或从 UIViewController 到 UITableViewController 的任何变量而不是（创建）表

我想将 newBooksArray 传递给 UITableViewController，我在 UIViewController 中写道：

```
mytable.gettedBooks = newBooksArray; // gettedBooks is NSMutableArray in UITableViewController

mytable.try = @"Emyyyyy"; // try is a NSString in UITableViewController 
```

我在 DidloadView 的 UITableViewController 中写了

```
NSLog(@"Try: %@", try); // out is null
NSLog(@"my getted array count: %d", [gettedBooks count]); // out is 0 
```

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:24:31.020

[创建 UITableView 并填充数组](http://www.youtube.com/watch?v=FoRO0dSNgRM)

我专门为这个问题创建了上面的教程。

[您还可以在开发人员文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)中了解更多方法

首先，您要确保在您的`@interface`：

```
@interface RootViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    NSMutableArray         * feed;
    UITableView            * tableView;
} 
```

您需要在控制器中使用类似于以下内容的内容：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [feed count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = [mutableArray objectAtIndex:indexPath.row];
    return cell;
} 
```

`numberOfRowsInSection`确保您实际从`NSMutableArray`. 并且`cellForRowAtIndexPath`实际上将您的每一行的内容加载`NSMutableArray`到`UITableView`.

为了将它传递给另一个控制器，你不想要这样的东西吗？

```
UITableViewController *viewController = [[UITableViewController alloc] initWithNibName:@"TableXIB" bundle:nil];
[viewController setGettedBooks:newBooksArray];
[self.navigationController pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:17:00.823

[UITableview 教程和示例代码](http://www.icodeblog.com/2008/08/08/iphone-programming-tutorial-populating-uitableview-with-an-nsarray/)

希望，这会帮助你..享受

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:46:18.887

如果您使用的是 Tab Bar 控制器，第一个视图控制器是表格视图控制器，第二个是 UIView 控制器。您可以通过以下代码段将数据传递给表视图控制器。您需要`arrayData`在表视图控制器中声明名为（NSMutableArray）的变量并设置属性（因为我们需要从另一个类访问它。）从这里`arrayData`，您需要在表视图中加载数据。在视图控制器类中编写以下代码。

```
 NSArray *viewControllers = [self.tabBarController viewControllers];
    MyTableViewController *mTable = [viewControllers objectAtIndex:0];

    [mTable SetArrayData:arrayFromViewController];

    [mTable.tableView reloadData]; 
```

如果您使用的是导航控制器，您可以这样做

```
 NSArray *viewControllers = [self.navigationController viewControllers];
    MyTableViewController *mTable = [viewControllers objectAtIndex:0];

    [mTable SetArrayData:arrayFromViewController];

    [mTable.tableView reloadData]; 
```

您可以选择使用委托。

# php - 如何在 PHP 中维护全局会话？

> ID：10259219
> 
> 赞同：0
> 
> 时间：2012-04-21T13:11:31.540
> 
> 标签：php, session

我目前正在使用 PHP 中的一个应用程序，我需要在其中维护一个购物车。一切运作良好。

将商品添加到购物车时，如果购物车包含一个商品，我需要在**每个页面的标题**上显示一条消息，例如“*购物篮中的1 件商品”。*

当添加（或删除）附加项目时，消息应相应更改，**而无需刷新页面**，例如“*购物篮中有 2 个项目*”等。

我面临的问题是，当某些项目被删除或添加到购物车时，我需要刷新页面（然后只有这样我才能*在页面标题*上看到更新的项目）

例如，假设购物车现在包含 2 件商品，现在又添加了一件商品，*标题*上的消息仍将显示“购物篮*中的 2 件商品*”，而不是显示“*购物篮中的 3 件商品*”，直到页面被刷新。

* * *

在Java中，我们有`SessionListener`如下。

```
package sessionListener;

import javax.servlet.annotation.WebListener;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

@WebListener()
public class SessionListener implements HttpSessionListener
{
    private HttpSession session=null;        

    @Override
    public void sessionCreated(HttpSessionEvent se)
    {
        session=se.getSession();
        //Use this session            
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se)
    {

    }
} 
```

我可以使用该`sessionCreated()`方法来满足要求，因为它是在首次创建会话时只执行一次的方法。

同样在 .NET 中，我们有 Global.asax 应用程序文件，例如

```
<%@ Application Language="C#" %>

<script runat="server">

    protected void Application_AuthenticateRequest(Object sender, EventArgs e)
    {

    }

    void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup

    }

    void Application_End(object sender, EventArgs e) 
    {
        //  Code that runs on application shutdown            
    }

    void Application_Error(object sender, EventArgs e) 
    { 
        // Code that runs when an unhandled error occurs

    }

    void Session_Start(object sender, EventArgs e) 
    {
        // Code that runs when a new session is started
        Session.Add("Message", SomeValue);            
    }

    void Session_End(object sender, EventArgs e) 
    {
        // Code that runs when a session ends. 
        // Note: The Session_End event is raised only when the sessionstate mode
        // is set to InProc in the Web.config file. If session mode is set to StateServer 
        // or SQLServer, the event is not raised.

        Session.Abandon();

    }

</script> 
```

我可以使用该`void Session_Start(object sender, EventArgs e)`方法来满足要求，因为这是在会话开始时仅调用一次的方法（每个用户的会话一次）。

但是在 PHP 中，我找不到在创建新会话时只执行一次的类似概念（我现在没有在 PHP 中使用任何框架）。

如果是这样，那么当购物车状态更新而根本没有刷新页面时，如何在每个页面的标题上显示上述指定消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:21:02.663

要在不刷新的情况下更改页面的一部分，您将需要一种客户端语言。Javascript 可以帮助您，尤其是 AJAX 调用：您调用一个 PHP 脚本，该脚本返回您购物车中的商品数量。

即使用户在浏览器中打开多个选项卡，您也可以每 X 分钟调用一次以刷新项目计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:40:06.263

正如我在一个项目中所做的那样：每次更改时，购物车都会在两个地方更新：在服务器上和加载的页面中，动态更新。

单击购物车项目的 +/- 按钮以更改其数量将触发 JavaScript 事件，该事件执行以下操作：

1.  对服务器进行[ajax 调用](http://api.jquery.com/jQuery.get/ "使用 jQuery 的示例")，让它知道购物车的内容已更改；
2.  更新加载页面中显示的购物车。

例如，看看像[jQuery](http://jQuery.com)或[Mootools](http://mootools.net)这样的 JS 库。它们使 JS 脚本编写比从头开始编写代码容易得多！还有很多其他类似的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T13:24:47.103

您可以使用 JavaScript 的 AJAX 调用向服务器发出请求，而无需刷新页面。

但请注意，某些浏览器不支持（或禁用）JavaScript。因此，请确保您的脚本即使在页面刷新时仍然有效。

# php - 在 zend 框架中找不到页面

> ID：10259220
> 
> 赞同：0
> 
> 时间：2012-04-21T13:11:42.817
> 
> 标签：php, zend-framework

我无法访问其他模块（页面）。我只能访问公共目录[http://localhost:88/hotelrwanda/public](http://localhost:88/hotelrwanda/public)。我将项目置于开发模式并启用错误显示但没有。你能给出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:14:40.833

您是否设置了 zend 默认重写规则？

**公共/.htaccess**

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

# c# - 检测敌人的碰撞

> ID：10259221
> 
> 赞同：0
> 
> 时间：2012-04-21T13:11:51.757
> 
> 标签：c#, xna, collision-detection

我需要检测 XNA 中同类型敌人的碰撞。
如果检测到碰撞，我希望敌人转身朝另一个方向走。

如果我将所有实例保存到列表中，我如何检测不同（但相同）类型的敌人是否发生碰撞？

这是在 C# XNA 中。

编辑：我有一个名为“敌人”的类的敌人，我游戏中的所有敌人都是从这个类创建的，我需要能够检查敌人是否发生了碰撞。

编辑2：

这是一个代码示例：

```
 // Fields.        
    private List<Enemy> enemies = new List<Enemy>();

    // Add our enemies when we need to.
    enemies.Add(new Enemy(this, position, spriteSet));

    // Here is it's update method.
    private void UpdateEnemies(GameTime gameTime)
    {
        foreach (Enemy enemy in enemies)
        {
            enemy.Update(gameTime);

            // This code works because it's comparing the player.
            if (enemy.BoundingRectangle.Intersects(Player.BoundingRectangle))
            {
                OnPlayerKilled(enemy);
            }
            // This code is always ture because enemy is enemy I can't figure out how to solve this.
                            if (enemy.BoundingRectangle.Intersects(enemy.BoundingRectangle))
            {
                // Make enemies turn... This if statement is the problem.
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:40:37.737

要确定两个敌人是否发生碰撞，您需要找到每个敌人所在的 Rectangle。然后你可以用它[`Rectangle.Intersects(Rectangle)`](http://msdn.microsoft.com/en-us/library/bb464123.aspx)来找出它们是否重叠。

回复：编辑：

每个敌人总是在检查是否与自己发生碰撞。不是你想要的:(|)

像这样的东西是你想要的：

```
foreach (Enemy enemy1 in enemies)
{
    foreach (Enemy enemy2 in enemies)
    {
        if (enemy1 != enemy2 && enemy1.BoundingRectangle.Intersects(enemy2.BoundingRectangle))
        {
            // enemy1 is colliding!
        }
    }
} 
```

# eclipse - 用于 sublime text、netbeans 或 eclipse 的 Notepad++ 类型 FTP 插件

> ID：10259222
> 
> 赞同：7
> 
> 时间：2012-04-21T13:11:59.683
> 
> 标签：eclipse, netbeans-7, sublimetext

我喜欢崇高的文字。我唯一不喜欢的是没有内置的 FTP 插件。当您连续编辑和上传文件时，sublime sftp 包[http://wbond.net/sublime_packages/sftp很糟糕。](http://wbond.net/sublime_packages/sftp)我正在寻找诸如记事本 ftp 之类的东西，您可以在其中看到屏幕一侧的所有文件和文件夹，当您编辑某些内容并单击 Ctrl+S 时，它会自动上传到服务器。另一种选择是为此使用 NetBeans 或 Eclipse。最主要的是我应该能够看到侧面的所有文件和文件夹，并且应该能够通过保存来上传更改。我尝试了内置插件的netbeans，但没有让我满意，或者我做得不好。请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T21:25:20.370

[https://github.com/NoxArt/SublimeText2-FTPSync](https://github.com/NoxArt/SublimeText2-FTPSync)免费且非常好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:18:13.243

您可以右键单击侧栏中的文件（使用 SFTP）并选择“SFTP/FTP -> 同步本地 -> 远程”，当文件或目录中的任何内容发生变化时（例如保存时），它将自动上传该文件或目录。

您也可以选择“SFTP/FTP -> Browse Remote”直接浏览和打开服务器上的文件。如果您保存以这种方式打开的文件，它们也会自动上传。

# php - CakePHP 应用程序无法在 localhost 中启动

> ID：10259224
> 
> 赞同：2
> 
> 时间：2012-04-21T13:12:21.787
> 
> 标签：php, .htaccess, cakephp, xampp

我正在尝试让 CakePHP 应用程序工作。我使用 xampp 并将我的应用程序文件放在 /xampp/htdocs 中。对于 .htaccess 配置，我参考 [http://book.cakephp.org/1.2/view/37/Apache-and-mod_rewrite-and-htaccess](http://book.cakephp.org/1.2/view/37/Apache-and-mod_rewrite-and-htaccess)。之后我尝试运行我的应用程序，但我在浏览器中收到了这条消息。

```
The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there was an error in a CGI script. 
```

我没有使用 CakePHP 的所有其他应用程序在 localhost 上运行良好，没有任何错误。我认为这个问题与.htaccess 有关。有什么建议么 ？

**编辑了** 我的 .htaccess 文件

```
**/xampp/htdocs/app/webroot/.htaccess**

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule>

**/xampp/htdocs/app/.htaccess**

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule>

**/xampp/htdocs/.htaccess**

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule ^$ app/webroot/ [L]
    RewriteRule (.*) app/webroot/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:02:23.927

我认为您的 .htaccess 文件看起来正确。您可能需要告诉 Apache 您的应用程序的 webroot 在哪里。
尝试在您的 Apache 配置中添加一个虚拟主机条目

里面`\xampp\apache\conf\extra\httpd-vhosts.conf`

尝试添加类似：

```
<VirtualHost *:80>
   ServerName localhost
   DocumentRoot c:\xampp\htdocs\app\webroot  <-(use the actual path here)
</VirtualHost> 
```

然后，您应该能够访问 CackPHP 应用程序，`http://localhost`
请确保删除任何其他可能发生冲突的 VirtualHost 块，尽管如果您正在使用 XAMPP 的新副本，则此文件中的所有内容都将被注释掉。
不要忘记重新启动 Apache 以使更改生效。

# vim - 为什么一旦路径包含方括号，Vim 文件路径自动完成 (CTRL-X CTRL-F) 就会停止？

> ID：10259230
> 
> 赞同：2
> 
> 时间：2012-04-21T13:12:49.763
> 
> 标签：vim, autocomplete, path, brackets

我不知道如何使用 CTRL-X CTRL-F 自动完成包含方括号的路径。例如 /home/matt/Mail/Imap/imap.googlemail.com/[Gmail].sbd/ 。自动完成在目录 [Gmail].sbd 之后停止。方括号似乎阻止了进一步的路径完成。我怎样才能防止这种行为？是bug还是配置问题？我在 vim 文档中找不到答案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:42:46.427

请键入`:set isfname?`以检查它是否包含`[,]`.
如果没有，您应该键入`:set isfname+=[,]`以添加它们。

# spotify - 我的 libspotify 可以离线运行吗？

> ID：10259232
> 
> 赞同：1
> 
> 时间：2012-04-21T13:13:11.963
> 
> 标签：spotify

我有一个与 libspotify.dll（版本 11）成功集成的 Windows .Net 应用程序。我希望它在离线模式下运行，即当登录响应 UnableToContactServer 时？如果这是可能的（高级帐户），如何最好地完成？

# html - CSS在第二个不起作用 html中的标签

> ID：10259235
> 
> 赞同：0
> 
> 时间：2012-04-21T13:13:23.303
> 
> 标签：html, jquery-mobile, themes

我在第`<div id=child>`1 页的按钮单击时调用了第 2 页，`<div id = home>`并在两个页面中都使用了 jquery 主题，但问题出在第 2 页，没有像第 1 页那样的主题效果。我已将 css 文件放在同一个文件夹中，它在第一页而不是在第二页生效？

任何人都可以解决这个问题，让主题在第二页也有效果吗？下面是我的代码

```
 <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="jquerybasic/jquerymobilecss.css" />
        <style>
            /* App custom styles */
        </style>

        <script src="jquerybasic/jquery.min.js" type="text/javascript">
        </script>
        <script src="jquerybasic/jquery.mobile-1.1.0.min.js" type="text/javascript">
        </script>
        <script type="text/javascript">
        $(document).ready(function() {
                $('#buttonid').click(function() {
                    $('#child').toggle();
                    $('#home').toggle();
                });
                $('#buttonchild').click(function() {
                        $('#child').toggle();
                        $('#home').toggle();
                });

                $('#next').click(function() {
                        $('#home').show();
                        $('#child').hide();
                });
                $('#prev').click(function() {
                        $('#home').hide();
                        $('#child').show();
                });

                $('#nextchild').click(function() {
                        $('#home').show();
                        $('#child').hide();
                });
                $('#prevchild').click(function() {
                        $('#home').hide();
                        $('#child').show();
                });
        });

        </script>
    </head>
    <body>
        <div data-role="page" id="home">
            <div data-theme="d" data-role="header">
                <h3>
                    The Grand Bhagavati
                </h3>
                <a data-role="button" id="next"  data-inline="true" data-transition="slide"  >
                    &lt;&lt;
                </a>
                <a data-role="button" id="prev"  data-inline="true" data-transition="fade" >
                    &gt;&gt;
                </a>
            </div>
            <div data-role="content">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput1">
                            User:
                        </label>
                        <input id="textinput1" type="text" />
                    </fieldset>
                </div>
                <input id="buttonid" data-theme="d" value="Login" type="button"  />
            </div>
            <div data-theme="d" data-role="footer" data-position="fixed" >
                <h3>
                    Page 1
                </h3>

                </div>
        </div>

        <div data-role="page" id="child">
            <div data-theme="d" data-role="header">
                <h3>
                    The Grand Bhagavati
                </h3>
                <a data-role="button" id="nextchild" data-inline="true" data-direction="reverse" data-transition="slide" >
                    &lt;&lt;
                </a>
                <a data-role="button" id="prevchild" data-inline="true" data-direction="reverse" data-transition="fade" >
                    &gt;&gt;
                </a>
            </div>
            <div data-role="content">

                        <label>
                            hi khushbu. welcome...!
                        </label>

                <input id="buttonchild" data-theme="d" value="Login" type="button"  class="ui-btn-hidden" aria-disabled="false" />
            </div>
            <div data-theme="d" data-role="footer" data-position="fixed" >
                <h3>
                    Page 2
                </h3>

                </div>
        </div>

        <script>
            //App custom javascript
        </script>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:18:10.163

好的男孩:)

您似乎跳过了使用新软件的一个相当重要的部分，即阅读文档。

要在页面之间导航，您只需将其放在`href`链接的属性中：

```
<a data-role="button" href="#child">...</a> 
```

jQuery Mobile 将处理到下一个伪页面的转换。这是文档：http `Linking Pages`: [//jquerymobile.com/demos/1.1.0/docs/pages/page-links.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-links.html)

如果您想以编程方式执行此操作，那么您可以使用`$.mobile.changePage()`内部使用的内容。手动调用此函数（例如在`click`按钮的事件处理程序中）的优点是您可以为转换指定非默认选项：

```
$('#next').on('click', function () {
    $.mobile.changePage($('#child'), { transition : 'slide', reverse : true });
}); 
```

这是文档：http `$.mobile.changePage()`: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

如果您想滚动自己的转换，这比显示一个 div 并隐藏另一个要复杂得多。您必须设置一些使用 CSS3 动画转换的 CSS 类（转换、转换、关键帧等）。

*   最后，这是您的代码演示，我用一个有效的链接替换了标题中的链接：http: [//jsfiddle.net/MmKK4/](http://jsfiddle.net/MmKK4/)

# sql - 使用 SQL Server FULL-TEXT 进行类似字典的搜索

> ID：10259236
> 
> 赞同：0
> 
> 时间：2012-04-21T13:13:35.800
> 
> 标签：sql, sql-server, dictionary, full-text-search, ranking

我正在尝试为我的网站创建字典。使用 FREETEXTTable & Rank DESC 搜索“服务器”返回：

1.  名称服务器 - 映射人类可读名称的程序或服务器。
2.  服务器 - 服务的人；女服务员或服务员。
3.  服务器 - 盘子; 一个托盘。4...

“服务器”显然比“名称服务器”更接近“服务器”。如何固定排名？

我不能只是逆转到 ASC，因为还有更糟糕的比赛。“上帝”的前 3 个结果是“上帝的行为”、“上帝的羔羊”、“上帝”。

编辑：抱歉有任何混淆。nameserver、server、server.. 位于一个名为“word”的列中，这是通过全文搜索查询的列。定义在下一列“定义”中并作为查询结果返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:58:25.750

我曾一度使用 PATINDEX 函数来执行此操作。类似于以下内容：

```
SELECT
    Word,
    Definition
FROM
    FREETEXTTABLE(Dictionary, Word, @search, 20) AS Matches
    INNER JOIN Dictionary ON
        Matches.Key = Dictionary.ID
ORDER BY
    CASE PATINDEX('%' + @search + '%', Word) 
        WHEN -1 THEN 1000
        ELSE PATINDEX('%' + @search + '%', Word) 
    END 
```

由于您使用全文索引来获得较小的结果集（在这种情况下最多 20 个），因此它的性能并不太好。PATINDEX 在表达式中查找字符串。如果表达式中不存在搜索字符串，则返回 -1。如果您也在搜索定义，如果您的搜索与同义词或词干词匹配（例如：您搜索“took”，因此返回“take”），或者如果您的搜索涉及多个词，则可能会发生这种情况。CASE 语句将这些结果排序到最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:44:41.197

我认为您可以使用 union 来解决结果排序问题..

喜欢

```
select * from your_table_name where col_name = 'server'
union 
select * from your_table_name where col_name like '%server%' order by col1,col2.. 
```

这个查询应该给你第一行全文搜索，然后是部分搜索..

澄清..请注意，`col_name`我的意思是说列名是什么意思..说你的表结构是..

字典- ( c_word , c_definition, c_synonyms )

那么您必须将我的查询修改为

```
select * from Dictionary where c_word = 'server'
union 
select * from Dictionary where c_word like '%server%' order by c_definition,c_synonyms 
```

这样该查询将首先显示 c_word 值与单词“server”完全匹配的位置，然后是部分搜索..

对于动态查询 - 您需要替换`'server'`为您获得请求关键字的变量以进行搜索。

# c# - 如何在后面的代码中以编程方式分配图像 url？

> ID：10259238
> 
> 赞同：1
> 
> 时间：2012-04-21T13:14:15.003
> 
> 标签：c#, asp.net, visual-studio-2010, asp.net-4.0

我正在使用文件上传器上传图像，我将它保存在一个目录中，并且该图像的路径保存在数据库中。当我尝试在我的网页上检索它时，它确实成功检索了图像，但是当我将该路径分配给 asp.net 中图像控件的 url 时，它给出了一个错误，指出远程服务器位置不存在文件。有什么帮助吗？

```
<div id="user_pic">

          <img id="ImageMap1" src="~/App_Themes/Theme/UserPics/logo.png" />

        </div> 
```

错误：

“/WebSite2”应用程序中的服务器错误。

无法找到该资源。

说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/WebSite2/App_Themes/Theme/UserPics/logo.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:33:17.170

您可以使用该`System.Web.UI.WebControls.Image`控件从代码隐藏文件中分配 URL。请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:14:05.510

尝试将路径从“~”更改为“..”

作为：

```
<img id="ImageMap1" src="../App_Themes/Theme/UserPics/logo.png" runat="server" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T20:12:41.043

使用纯 HTML img 标签，您根本不需要前缀。尝试将“~/App_Themes/...”更改为“App_Themes/...”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T13:41:52.007

仔细检查路径是否正确保存在数据库中，并确保图像在保存的位置可用。

尝试将 runat = "server" 添加到 img 标签

```
<img id="ImageMap1" src="~/App_Themes/Theme/UserPics/logo.png" runat="server" /> 
```

# java - 所有应用程序顶部的浮动菜单

> ID：10259239
> 
> 赞同：4
> 
> 时间：2012-04-21T13:14:18.387
> 
> 标签：java, android, user-interface, interface, floating

我想制作一个浮动在所有应用程序之上的菜单。我确实看到了这个问题：[Creating a system overlay window (always on top)](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)
，但我也希望它在 ICS 中也能正常工作。
有一个应用程序，GameCIH，它有这样一个界面，支持 ICS 中的触摸： ![在此处输入图像描述](../Images/d37803ca7e531cd8ecb344c52504070c.png)

这怎么可能？谢谢！

# c# - 使用接口、基类和自定义类以及用户界面的 C# Web 应用程序的最佳方法架构

> ID：10259240
> 
> 赞同：0
> 
> 时间：2012-04-21T13:14:22.167
> 
> 标签：c#, asp.net, architecture, web

我正在 C# .net 4.0 中构建一个应用程序，它与来自多个制造商的硬件设备进行交互，并正在寻找以下最佳解决方案的建议

首先，我有一个通用接口 IHardware，它具有应用程序将与之交互的所有不同品牌的硬件共有的属性。

其次，我将 IHardware 实现为一个名为 HardwareController 的通用类。现在我目前支持三种品牌的硬件设备，每种都有额外的字段和不同的 API 来与设备交互。

我打算为从 HardwarController 类继承公共功能的每个品牌实现一个单独的控制器类。

最好的方法是什么？

在此之后，我有一个通用的 Asp.net 硬件用户控件，它在加载事件上实例化一个 HardwareController 类并将此类绑定到接口。这是为了允许用户远程修改硬件的属性并将它们持久化回设备。

我不确定如何实现品牌特定的用户控件、它们的保存行为和其他字段，同时尽可能多地重用通用硬件控制器和用户控件。

任何建议将不胜感激，因为我必须在一周内完成此项目。

谢谢科尔姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:40:26.607

你可以这样做：

*   所有设备的通用接口：IHardware
*   所有品牌都相同的通用基类
*   品牌内所有设备都相同的品牌基类，继承自公共基类
*   从品牌基类继承的设备类

# c# - 向表中添加新行后如何更新datagridview的行列表

> ID：10259251
> 
> 赞同：2
> 
> 时间：2012-04-21T13:15:31.537
> 
> 标签：c#, .net, datagridview

我有一个datagridview，在表单的加载事件中填充了一个表集合，我还有一个由用户填写的表单，并向表onclick事件添加新行，我想在添加新行后更新datagridview表，我使用绑定到绑定数据源的 sqladapter。这是代码

```
 private void button1_Click(object sender, EventArgs e)
        {
        connection.Open();
         string nv = textBox7.Text.Trim().Replace(',', '.');
         //
        string sql="";
        sql = "INSERT INTO Employe(id_cnss, nom, prenom, adresse,     tel,email,mt_heur_travail, titre)     VALUES('"+textBox1.Text.ToString().Trim()+"','"+textBox2.Text.ToString().Trim()+"','"+textBox3.Text.ToString().Trim()+"','"+richTextBox1.Text.ToString().Trim()+"','"+textBox4.Text.ToString().Trim()+"','"+textBox5.Text.ToString().Trim()+"',"+nv+",'"+textBox6.Text.Trim()+"')";
      //  sql = "UPDATE Employe SET id_cnss ='" +  + "' , nom ='" +  + "', prenom ='" +  + "', adresse ='" +  + "', tel ='" +  + "', email ='" + + "', mt_heur_travail =" +  + ", titre ='" +  + "'  where id_cnss=" + index;
        c = new SqlCommand(sql, connection);
        c.CommandText = sql;
       // IAsyncResult res;
       int ex = c.ExecuteNonQuery();
       if (ex != null)
       {
           MessageBox.Show("employé ajouté");
           //dataGridView1.Rows.Clear();
           //DataTable table = (DataTable)dataGridView1.DataMember;
           adapter = new SqlDataAdapter("select * from employe  where       id_emp=IDENT_CURRENT('EMPLOYE')", connection);
           adapter.Fill(dTable);
           //adapter.Update(dTable);
           dataGridView1.Refresh();
       }
            connection.Close();
    } 
```

此代码将表的所有行添加到 datagridview 但我只需要简单地添加添加到数据库中的最新行，当用户单击添加时，

我希望将新行添加到 datagridview 提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:34:30.423

更改 a`DataTable`未反映在 a`DataGridView`中的问题很常见。问题是大多数数据表和表适配器实现不会引发`ListChanged`事件，这些事件是`DataGridView`监听器知道何时更新自身的事件。

.Refresh() 没有解决问题，因为它只重绘客户区，而不重新查询数据源——底层`DataGridView`不知道任何变化，所以它像以前一样重绘。

通常的解决方法是重置数据源。

```
dataGridView1.DataSource = null;
// Your datatable goes in the place of newDataSource
dataGridView1.DataSource = newDataSource; 
```

你也可以这样做：

```
dataGridView1.DataSource = typeof(List);
dataGridView1.DataSource = newDataSource; 
```

这将保留任何自动生成的列。

您也可以使用 a`BindingSource`来解决这个问题 - 它可能无法自行解决问题，因为绑定源也依赖于列表更改事件，但可能意味着可以避免网格中的任何奇怪闪烁。

# c# - C#使用自己的协议在两台PC之间通过串口发送数据

> ID：10259253
> 
> 赞同：0
> 
> 时间：2012-04-21T13:15:32.217
> 
> 标签：c#

我有一个任务，我需要通过串行端口的链接调制解调器加载一些数据`user (pouzivatel)`，`int(stav odberu)`并将其存储在我的本地数据库中。我知道如何加载数据，通过串行端口发送数据，但我需要让它在图像上的结构中发生。

[![电子化](../Images/a879cc96540aab9e9d572643b2638252.png)](https://i.stack.imgur.com/hqHhh.jpg)

首先，我用 AT 命令拨打设备的电话号码，顺便说一句，这是可行的，但我现在不知道如何停止和等待`SOH+adresa objektu`（SOH+一些关于地址的字符串）。然后发送关于确认（ACK）的数据并等待新数据的到来。

等待顺序是我最大的问题。如何停止并等待接收数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-20T13:50:17.707

按照评论中的建议使用该组件并利用其 DataReceived 事件可能会轻松有效地解决您的问题。但是你可能一直在寻找更底层的东西来自己做。

如果您想/需要在没有任何花哨的基于事件的系统（假设您已经在某些基于消息队列的环境（如 WinForms）中）的情况下在线执行此操作，您可以执行类似的操作。

```
while (true)
{
  // check for new data
  ...
  // if you got some, respond to it
  ...

  if (someConditionThatTellsYouYouAreDoneOrSupposedToTerminate) break;

  System.Threading.Thread.Sleep(50);
} 
```

# c++ - 在 C++ 中的控件内绘图

> ID：10259254
> 
> 赞同：-1
> 
> 时间：2012-04-21T13:16:44.160
> 
> 标签：c++

如何在 Visual Studion 2010 中的 Form 或 Panel 或其他控件中绘制形状？我在主窗口中学习了绘图：只需使用 hdc = BeginPaint(hWnd, &ps) 在 WM_PAINT 部分编写代码。但是如何在表单中做到这一点，我必须使用什么 hWnd ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:25:09.490

您需要子类化控件并覆盖 WM_PAINT 的处理程序。并创建子类控件。

这可能会有所帮助： http: [//www.codeproject.com/Articles/480/Create-your-own-controls-the-art-of-subclassing](http://www.codeproject.com/Articles/480/Create-your-own-controls-the-art-of-subclassing)

# php - 拼字游戏生成器

> ID：10259261
> 
> 赞同：4
> 
> 时间：2012-04-21T13:18:07.467
> 
> 标签：php, sql, algorithm

在看到我的兄弟在像拼字游戏这样的 iphone 游戏中作弊后，我想知道它的算法是什么。

给定一些字母：ABCTEE

并且 SQL 表中充满了正确的单词。

我将如何创建所有字母组合以便在之后进行选择，例如：从单词 IN（'A'、'AT'、...）的单词中选择 *，只是从这些组合中获取正确的组合？¿

另一种可能的方式可能是一个 SQL 表，其中每个单词的每个字母在一列中。但之后系统应验证 select 的任何单词是否有更多的时间与给定的相同字母。

前任：

c1 c2 c3 c4 三通空气

这个问题只是为了满足好奇心，并学习巫婆算法，它可能用于创建所有这些组合（带有完整和部分给定字母），以便事后检查它们是否存在。

谢谢！

字体：http: [//icon.cat/worder/wordsfinder](http://icon.cat/worder/wordsfinder)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:13:12.003

要找到所有可能的有效单词，请执行以下步骤

1.  找到所有可能的组合
2.  找到组合中每个单词的每个排列
3.  在数据库中搜索单词
4.  列出单词

脚本

```
$tiles  = array( "A", "B", "C", "T", "E", "E") ;
$words = array();
$set = powerSet($tiles,2);

$mysql = new mysqli("localhost","root","","word");
$sql = "SELECT id from dic WHERE word = '%s'" ;

foreach ($set as $key => $value)
{
    $word = implode("", $value);
    $wordPermutation = permute($word);

    foreach($wordPermutation as $keyWord)
    {
        if(!in_array($keyWord, $words))
        {
            //if($result = $mysql->query(sprintf($sql,$keyWord)))
            //{
                //var_dump(sprintf($sql,$keyWord));
                //if($result->num_rows > 0)
                //{
                    $words[] = $keyWord ;
                //}
            //}
        }
    }
}

print_r($words); 
```

功能

```
function powerSet($in, $minLength = 1, $max = 10) {
    $count = count ( $in );
    $members = pow ( 2, $count );
    $return = array ();
    for($i = 0; $i < $members; $i ++) {
        $b = sprintf ( "%0" . $count . "b", $i );
        $out = array ();
        for($j = 0; $j < $count; $j ++) {
            if ($b {$j} == '1')
                $out [] = $in [$j];
        }
        if (count ( $out ) >= $minLength && count ( $out ) <= $max) {
            $return [] = $out;
        }

    }
    return $return;
}

function permute($str) {
    if (strlen($str) < 2) {
        return array($str);
    }
    $permutations = array();
    $tail = substr($str, 1);
    foreach (permute($tail) as $permutation) {
        $length = strlen($permutation);
        for ($i = 0; $i <= $length; $i++) {
            $permutations[] = substr($permutation, 0, $i) . $str[0] . substr($permutation, $i);
        }
    }
    return $permutations;
} 
```

请注意，我`commented`退出了数据库验证部分，以便演示可以工作

看演示

[http://codepad.viper-7.com/oG6E6w](http://codepad.viper-7.com/oG6E6w)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:23:35.250

我会尝试类似的东西

```
WHERE (word like '%A%' and not word like '%A%A%')
  AND (word like '%B%' and not word like '%B%B%') 
```

等等。但我相信一定有更专业的解决方案！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T17:17:10.077

我终于让它工作了。

如果有人对制作自我单词生成器感兴趣，我就是这样做的。

MySQL，一个表：

```
[id] , [Word] 
```

每个长度的视图：

```
V1 = Select Word from TABLE where LENGTH(Word) = 1
V2 = Select Word from TABLE where LENGTH(Word) = 2
[...] 
```

php端：

使用 baba 的函数，我创建了一个数组，其中：array[2] 是长度为 2 的字母组合，依此类推。

最后，我所要做的就是为每个数组选择一个视图，例如

```
Select Word from V3 where Word like ('asd','dsa',....); 
```

必须有一种更快的方法，但不到一秒（本地主机）和 700K 的单词字典就成功了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-11T04:19:50.827

实现解扰的更好方法是使用字谜。因此，不要使用包含所有可能单词的库，而是使用关联数组，使用构成单词的字母作为索引。

```
anagram['aer'] = ['are', 'ear', 'era'] 
```

要实现这一点，请遍历所有字典单词并将每个单词推入一个数组，其中索引是按字母顺序排列的单词的字母。

```
for(var i = 0; i < dictionary.length; i++) {
//Loop through dictionary array
    var str = words[i].split('').sort().join('');
    //break apart the word and sort it alphabetically
    if(!anagram[str]) {
        //check if there is already an index with that same anagram
        anagram[str] = [];
    }

    anagram[str].push(words[i]);
    //Add the word to the anagram array

} 
```

这种方式使您可以快速索引库，而无需经历数千种可能的排列。

javascript中此方法的一个示例：[Word Unscrambler](http://unscramble.jeremiason.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T13:22:30.723

这是关于[世界上最快的拼字游戏程序的精彩文章](http://www.cs.cmu.edu/afs/cs/academic/class/15451-s06/www/lectures/scrabble.pdf)

您应该对离散数学（Word Automats）有一些了解。希望它会帮助你:)

# c++ - 存储到函数内的地图

> ID：10259262
> 
> 赞同：0
> 
> 时间：2012-04-21T13:18:18.180
> 
> 标签：c++, function, map

我正在尝试编写一个函数，它将信息从文本文件输入到地图中。我的主要代码如下：

```
int main(){
    typedef map<int,student*> record;
    record allstudents;
    fileinput("inputtest.txt",allstudents);

    //rest of code....
} 
```

其中函数'fileinput'定义为：

```
void fileinput(string datafile, record map){ 
    fstream file1(datafile);
    if(!file1.good()){
    //error code
    }
    //Pulls information from file
    student* S1= new physics(name,ID); //creates a new pointer
    //(*S1).printinfo(); //Can print info if required for de-bug
    map[ID]=S1; //store to map
    entries++;  //counts entries read in            
    }
    cout<<"Import complete. "<<entries<<" new students entered."<<endl;
} 
```

当我从测试文件运行这段代码时，如果我取消注释，它将读入数据并正常输出，`(*S1).printinfo();`并且会正确计算已读入的学生人数。但是当我回到我的主要功能并输出时现在存储在`allstudents`那里的东西似乎什么都没有？

为什么会发生这种情况，有人知道解决这个问题的方法吗？我已经删掉了很多代码来尝试使其更易于阅读，但是如果您需要查看其余代码，我可以随时对其进行编辑。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:20:11.493

这是因为您是`map` *按值*传递的。将函数的签名更改为

```
void fileinput(string datafile, record &map) 
```

`map`简短说明：当您按值传递时，会生成参数 ( )的副本。在您的函数中，您对该副本执行修改，但是当函数返回并且副本超出范围时，这些修改会丢失。它们不会自动传播回“源”对象。

有关详细说明，请参阅[通过引用传递/C++ 中的值](https://stackoverflow.com/questions/410593/pass-by-reference-value-in-c)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T13:20:21.023

您正在按值传递地图，因此该函数使其成为自己的副本，而您的原始副本保持不变。尝试通过引用传递：

```
void fileinput(string datafile, record& map) { ... }
                                      ^ reference! 
```

# android - 保存 Activity 的实例以重用它

> ID：10259263
> 
> 赞同：2
> 
> 时间：2012-04-21T13:18:19.697
> 
> 标签：android, android-activity

我有一个 Activity A，上面有一个按钮，单击该按钮导航到 Activity B。现在，当按下后退按钮时，我从这个 Activity B 回到 Activity A，这很明显。但是，当我再次单击 Activity A 上的按钮时，将启动 Activity B 的新实例。

我的查询：有没有办法让我按下活动 B 上的后退按钮时，它的实例被存储，所以当我再次单击活动 A 上的按钮时，将启动保存的 B 实例而不是新实例。

希望有解决办法。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:21:16.710

如果您不想传递数据..或者只是想回到以前的活动

```
finish()  in onClick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:21:21.570

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

此外，方法 onSaveInstanceState(Bundle) 在将 Activity 置于此类后台状态之前被调用，允许您将 Activity 中的任何动态实例状态保存到给定的 Bundle 中，以便稍后在 onCreate(Bundle) 中接收该 Activity需要重新创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:24:15.640

想一想，处理起来并不容易。可以存储 android 中的活动，但是当您导航到活动 B 时，您不能调用 android 系统来使用您的该实例。

阅读此链接[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

它提供了你可以用它做的所有信息，但不是你想要的所有信息。

当您从活动 B 导航到活动 A 时，android 本身已将您的活动 B 的实例临时存储在内存中，并且该实例将在以后的任何时候完全销毁。如果您再次将它从 A 导航到 B，那么如果 Activity B 的实例仍然存在于内存中，它将再次被重用，否则它会再次重新创建该 Activity。在任何情况下，活动 B 被重用或重新创建，始终调用 onCreate 方法（生命周期中的所有方法，如 onResume ...等）然后您的活动 B 的所有数据现在都是新数据，在您导航之前不是旧数据活动 A。这是 android 系统所做的，因此如果不调用这些方法，您将无法启动活动 B。

如果您希望活动 B 看起来与导航到活动 A 之前相同，您可能应该在活动 B 的 onPause() 方法中保存必要的数据，然后在调用 onCreate() 时将这些数据设置回活动 B 的组件. 在这种情况下不应使用 onSaveInstanceState(Bundle) 方法，因为蜂窝（3.0）之前的 android os 版本没有调用该方法。

如果您使用在线数据或列表视图、webview 等，并且您自己保存数据，这可能很难处理，这可能会给您的应用程序本身带来风险。

无论如何，我希望这对您有所帮助。

# routing - Unix路由表中的“proto kernel”是什么意思？

> ID：10259266
> 
> 赞同：40
> 
> 时间：2012-04-21T13:19:10.570
> 
> 标签：routing, kernel, ip

我一直在 linux-ip.net 和整个互联网上搜索它，但似乎什么也没有。路由表中的“原型内核”部分是什么意思？

只是一个例子：

```
[root@tristan]# ip route show table local
local 192.168.99.35 dev eth0 proto kernel scope host src 192.168.99.35
broadcast 127.255.255.255 dev lo proto kernel scope link src 127.0.0.1 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-21T13:58:47.370

摘自`man ip(8)`：

```
 protocol RTPROTO
          the routing protocol identifier of this route.
          RTPROTO may be a number or a string from the
          file /etc/iproute2/rt_protos. If the routing
          protocol ID is not  given,  ip  assumes  protocol
          boot (i.e. it assumes the route was added by 
          someone who doesn't understand what they are doing).
          Several protocol values have a fixed interpretation.
          Namely:

             redirect - the route was installed due to an ICMP redirect.

             kernel - the route was installed by the kernel during
                   autoconfiguration.

             boot - the route was installed during the bootup sequence.
                 If a routing daemon starts, it will purge all of them.

             static - the route was installed by the administrator to
                   override dynamic routing. Routing daemon will
                   respect them and, probably, even advertise them
                   to its peers.

             ra - the route was installed by Router Discovery protocol.

          The rest of the values are not reserved and the administrator is free
          to assign (or not to assign) protocol tags. 
```

# perl - Perl 无法打开 slackware 上的源代码页面

> ID：10259267
> 
> 赞同：-1
> 
> 时间：2012-04-21T13:19:12.140
> 
> 标签：perl

> **可能重复：**
> [为什么我不能用 Perl 的 LWP::Simple 获取 www.google.com？](https://stackoverflow.com/questions/3757693/why-cant-i-fetch-www-google-com-with-perls-lwpsimple)

下面的代码可用于在 windows 中打开源页面，

但是为什么在linux（slackware）中我不能？

```
#!/usr/bin/perl
print "Content-type: text/html\n\n";
use LWP::Simple;
$URL = get("http://google.com");
print $URL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:17:17.340

```
#!/usr/bin/perl
use strict;
use warnings;
use LWP::Simple;

print "Content-type: text/html\n\n";
print get('http://google.com'); 
```

变化：

*   总是（！）使用严格和警告。
*   将 use 语句移动到脚本的开头。
*   消除使用 $URL - 如果 get() 调用失败，即使没有它，您也会收到警告。

# jquery - 使用 jQuery 在复选框列表中添加星号

> ID：10259268
> 
> 赞同：0
> 
> 时间：2012-04-21T13:19:25.547
> 
> 标签：jquery, css, checkboxlist

我正在使用一个 jQuery 插件，它通过操纵`div`.

jQuery 代码是

```
 <script type="text/javascript">
        $(function () {

            $('span.stars').stars();    

        });

        $.fn.stars = function () {
            return $(this).each(function () {
                $(this).html($('<span />').width(Math.max(0, (Math.min(5, parseFloat($(this).html())))) * 16));
            });
        }
</script> 
```

和 CSS 是

```
span.stars, span.stars span
{
    display: block;
    background: url(../../Images/star.png) 0 -16px repeat-x;
    width: 80px;
    height: 16px;
}
span.stars span
{
    background-position: 0 0;
} 
```

但是现在我想在复选框列表中应用它，但我没有得到正确的方法来做到这一点。

我的复选框列表如下：

```
<asp:CheckBoxList ID="chbStars" runat="server" AutoPostBack="true" OnSelectedIndexChanged="chbStars_SelectedIndexChanged">
                                <asp:ListItem Text="1" Value="1.0">    </asp:ListItem>
                                <asp:ListItem Text="2" Value="2.0">    </asp:ListItem>
                                <asp:ListItem Text="3" Value="3.0">    </asp:ListItem>
                                <asp:ListItem Text="4" Value="4.0">    </asp:ListItem>
                                <asp:ListItem Text="5" Value="5.0">    </asp:ListItem>
                            </asp:CheckBoxList> 
```

我通过像这样操作css来尝试这个

```
#ctl00_ContentPlaceHolder1_chbStars label
{

    background: url(../../Images/star.png) 0 -16px repeat-x;
    width: 80px;
    height: 16px;
}

#ctl00_ContentPlaceHolder1_chbStars  span
{
    background-position: 0 0;
} 
```

但我没有得到改变 jQuery 的正确方法？

任何方向都会对我有很大帮助。

对于 span 呈现的 HTML 是

```
<span style="width: 32px;"></span> 
```

对于 checkboxlist，呈现的 HTML 是

```
<table border="0" id="ctl00_ContentPlaceHolder1_chbStars">
    <tbody><tr>
        <td><input type="checkbox" onclick="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$chbStars$0\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$chbStars$0" id="ctl00_ContentPlaceHolder1_chbStars_0"><label for="ctl00_ContentPlaceHolder1_chbStars_0">1</label></td>
    </tr><tr>
        <td><input type="checkbox" onclick="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$chbStars$1\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$chbStars$1" id="ctl00_ContentPlaceHolder1_chbStars_1"><label for="ctl00_ContentPlaceHolder1_chbStars_1">2</label></td>
    </tr><tr>
        <td><input type="checkbox" onclick="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$chbStars$2\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$chbStars$2" id="ctl00_ContentPlaceHolder1_chbStars_2"><label for="ctl00_ContentPlaceHolder1_chbStars_2">3</label></td>
    </tr><tr>
        <td><input type="checkbox" onclick="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$chbStars$3\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$chbStars$3" id="ctl00_ContentPlaceHolder1_chbStars_3"><label for="ctl00_ContentPlaceHolder1_chbStars_3">4</label></td>
    </tr><tr>
        <td><input type="checkbox" onclick="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$chbStars$4\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$chbStars$4" id="ctl00_ContentPlaceHolder1_chbStars_4"><label for="ctl00_ContentPlaceHolder1_chbStars_4">5</label></td>
    </tr>
</tbody></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:14:33.447

1.  您必须将 jQuery 选择器更改为类似 `$('#ctl00_ContentPlaceHolder1_chbStars label').stars();`

2.  您必须调整 .css、#ctl00_ContentPlaceHolder1_chbStars 标签以跨越

我希望这会向您展示一些东西，需要对通过复选框的选择进行编码..

# c# - MonoMac 事件 - 更改 NSTable 行的颜色

> ID：10259269
> 
> 赞同：3
> 
> 时间：2012-04-21T13:19:28.433
> 
> 标签：c#, nstableview, monomac

我正在尝试通过订阅 WillDisplayCell 事件来更改 NSTableView 中的行颜色。首先，永远不会引发此事件。其次，NSTableView 中的字段不再可选择，因此功能被破坏。对于不起作用的 SelectionChanged 事件，可以观察到相同的行为。

```
//NSTableView table
table.SelectionDidChange += SelectionChanged;
table.WillDisplayCell += WillDisplay; 
```

如何使这些事件发挥作用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:39:41.227

不确定你是否解决了这个问题，但对于遇到这个问题的其他人来说，解决方案是添加一个类似于 tableview 示例的观察者，即

```
arrayController.AddObserver(this,new NSString("selectionIndexes"),NSKeyValueObservingOptions.New,IntPtr.Zero); 
```

然后覆盖观察值方法

```
public override void ObserveValue (NSString keyPath, NSObject ofObject, NSDictionary change, IntPtr context)
{
...
} 
```

这可行，但 NSTableviewBinding 示例使用了不同的方法，但这对我不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T16:24:25.197

在 AwakeFromNib 像这样注册观察者

```
NSNotificationCenter.DefaultCenter.AddObserver (this, new Selector ("selectionChanged"), "NSTableViewSelectionDidChangeNotification", yourTableView); 
```

然后像这样处理选择更改

```
[Export("selectionChanged")]
public void SelectionDidChangeNotification(NSObject o){
    ...
} 
```

# wcf - XmlSchemaType/XmlQualifiedName 类之间有什么区别

> ID：10259270
> 
> 赞同：0
> 
> 时间：2012-04-21T13:19:36.873
> 
> 标签：wcf

谁能告诉我**XmlSchemaType**和**XmlQualifiedName**类之间的区别。我有点困惑什么时候选择哪个课程。实际上，我正在为我的类使用**IXmlSerializable**接口并为此指定架构，我使用了**XmlSchemaProviderAttribute**并指定了可以返回**XmlSchemaType**或**XmlQualifiedName**的函数。两者都工作正常，我成功生成了代理。但无法找到一个综合分析哪个是在什么条件下使用。

根据微软

**XmlSchemaType Class**：所有简单类型和复杂类型的基类。

**XmlQualifiedName 类**：表示 XML 限定名。

但我无法理解这两者之间的确切区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:22:54.983

在做了谷歌并阅读了一些文章之后，我终于找到了这两者之间的区别并了解在哪里选择什么？

有 3 种不同的类型可以实现**IXmlSerializable 接口**

*   内容类型
*   元素类型
*   旧数据集类型

对于内容类型，我们需要使用 XmlQualifiedName 类作为返回参数（在 XmlSchemaProvider 中指定方法名称），这将要求 XSD 的主要根元素是复杂类型。

对于元素类型，我们需要使用 XmlSchemaType 类。您可以在此处指定 XSD 中的任何根元素。

对于 Legacy DataSet 类型，我们不使用 XmlSchemaProvider 属性。相反，他们依赖 GetSchema 方法来生成 Schema。

我从以下 MSDN 链接中找到了所有这些有用的信息。为了更好地理解 Xml 序列化在 WCF 中如何工作的必读文章。

[使用 XmlSerializer 类](http://msdn.microsoft.com/en-us/library/ms733901.aspx)

# apache - 如何在 Coldfusion8 (Apache 2.2) 中清除缓存和缓存的模板页面

> ID：10259273
> 
> 赞同：3
> 
> 时间：2012-04-21T13:20:00.830
> 
> 标签：apache, coldfusion, refresh, localhost

我要疯了……我在本地 Apache 2.2.0 网络服务器上运行 Coldfusion/MySQL 的第一天。

我有一个

```
 index.cfm 
```

文件，我修改并修改了 20k 的代码

```
 <p>HELLO WORLD</p> 
```

但是当我刷新浏览器时，旧的 index.cfm 不断出现。不管我做什么...
- 完全清空文件
- 禁用浏览器缓存
- 清除 ColdFusion 管理面板缓存
- 将 index.cfm 重命名为 wtf.cfm

如果我刷新......相同的旧 index.cfm。

一旦我更改它们，所有其他文件都会更新。

**问题：**
我错过了什么？必须是 Apache，因为其他一切都没有意义，不是吗？

感谢结束我的 index.cfm-misery...！

**编辑：**
我删除了除 index.cfm 之外的整个应用程序。现在刷新给了我*你好世界*。然后我添加了 Application.cfm，刷新后我又回到了完整的 index.cfm...

Application.cfm 看起来像这样：

```
... 
<CF_callLogin 
     datasource="dtb"
     TableName="table"
     UserField="user"
     ...  
 BGColor="FFFFFF"> 
```

所以我猜这会调用 callLogin.cfm 并传递上述参数。在尝试永久编辑它之后，我仍然删除了 callLogin.cfm，所以不应该有任何东西。

还是一头雾水……

**EDIT2：**
可能是**cf cache_pages**吗？我现在按照[http://www.houseoffusion.com/groups/cf-talk/thread.cfm/threadid:54088](http://www.houseoffusion.com/groups/cf-talk/thread.cfm/threadid:54088)删除了 wwwroot\WEB-INF\cfclasses 中的所有文件，让我们看看这是否有帮助....没有吨:-(

**EDIT3：**
可以是**缓存模板**吗？- [http://blogs.sanmathi.org/ashwin/2006/07/12/tangling-with-the-template-cache/](http://blogs.sanmathi.org/ashwin/2006/07/12/tangling-with-the-template-cache/)它是......见下面我的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:19:11.903

浪费了半天...

它是一个缓存模板，如果您编辑或删除文件，CF 或 Apache 似乎不会给出 *%&/$。

这是对我有用的黑客：
[http ://www.bennadel.com/blog/673-Force-ColdFusion-Server-To-Recompile-A-ColdFusion-Template.htm](http://www.bennadel.com/blog/673-Force-ColdFusion-Server-To-Recompile-A-ColdFusion-Template.htm)

= 生成一个长文本，将其附加到模板，保存，刷新和中提琴，突然间你的模板被更新了，因为文件大小改变到足以最终保证更新模板。

您也可以尝试在开发中使用 CF-Admin > Server Setting > Caching 将其关闭，但这在我的情况下根本不起作用（首先我开始尝试删除...）

无论如何，也许这可以为别人节省一天:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:51:56.123

重新启动 Apache 然后查看是否已解决，然后 CF 并查看是否已解决。我在 CF 中没有遇到过这样的问题，在 CF 服务重新启动后没有解决。

# c# - 如何在 C# 中以编程方式写入记事本

> ID：10259279
> 
> 赞同：0
> 
> 时间：2012-04-21T13:20:26.320
> 
> 标签：c#, .net

我制作了一个屏幕键盘程序。该程序有一些键，如普通键盘和底部的文本区域。我可以单击按钮，相应的字母会出现在文本区域中。

但我想以编程方式将这些字母写入记事本。

我怎样才能做到这一点？

编辑：

所以这是我的示例代码。sendkey API 应该如何表现？

```
public Form1()
{
  var myProcess = new Process
  {
    StartInfo =
    {
      FileName = "Notepad.exe",
      WindowStyle = ProcessWindowStyle.Normal
    }
  };
  myProcess.Start();
  InitializeComponent();
}

private void BtnBClick(object sender, EventArgs e)
{
  SendKeys.Send("{ENTER}");
}

private void BtnCClick(object sender, EventArgs e)
{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:29:41.657

在过去，我使用 SendKeys 构建了一个类似的解决方案：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)

这里有一个演示如何在不关注这些窗口的情况下将按键发送到不同的窗口：

[http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)

# python - web2py 多种形式

> ID：10259282
> 
> 赞同：0
> 
> 时间：2012-04-21T13:20:40.193
> 
> 标签：python, sqlite, web2py

我创建了一个多重表格

```
form = SQLFORM.factury(db.table1,db.table2) 
```

`db.table2`具有以下字段，该字段`invoice_id`链接到`db.table1`并且 a`catalogue_id`链接到另一个表`db.table0`

```
db.define_table('table2',
    Field('id','id'),
    Field('user_id', db.auth_user, default=auth.user_id, writable=False,readable=False,
          label=T('User Id')),
    Field('invoice_id', db.table1,  writable=False,readable=False,
          label=T('Invoice')), 
    Field('catalogue_id', db.table0,
          label=T('Catalogue')),
    format='%(thiscatalogue)s',
    migrate=settings.migrate) 
```

发送表单后，应从`invoice_id`web2py 自动填写并获取数据`ID``sent`

但是有了这个

```
Field('invoice_id', db.table1, ... ) 
```

使字段在提交之前必须有一个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:23:14.467

[请参阅此处](http://web2py.com/books/default/chapter/29/7#One-form-for-multiple-tables)的示例。在这种情况下，类似于：

```
form = SQLFORM.factory(db.table1, db.table2)
if form.process().accepted:
    invoice_id = db.table.insert(**db.table1._filter_fields(form.vars))
    form.vars.invoice_id = invoice_id
    db.table2.insert(**db.table2._filter_fields(form.vars)) 
```

首先将新发票插入到 table1 中，它返回新记录的 id。然后，在插入 table2 之前，将 form.vars.invoice_id 设置为新发票记录的 id。

# c# - 使用 HttpWebRequest 从 imdb 中剥离信息，但是当出现 ÅöØ 时，我得到难看的输出，如何解决？

> ID：10259283
> 
> 赞同：0
> 
> 时间：2012-04-21T13:20:42.360
> 
> 标签：c#, .net

这是我在 c# 中使用 winforms 编写的代码！我已经测试了 ENCODING UTF8 和我拥有的所有其他。结果相同。

导演-Måns.Mårlind,.Björn.Stein]

来自电影[http://www.imdb.com/title/tt1496025/](http://www.imdb.com/title/tt1496025/)

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
StreamReader sr = new StreamReader(resp.GetResponseStream(),Encoding.UTF8, true);
string sourceCode = sr.ReadToEnd();
sr.Close();
resp.Close();
return sourceCode; 
```

# android - 强制相机始终在android中以纵向模式打开

> ID：10259299
> 
> 赞同：6
> 
> 时间：2012-04-21T13:22:59.527
> 
> 标签：android, android-intent, android-camera

是否可以在android中仅以纵向模式打开Camera Intent，即即使用户翻转设备，相机仍将处于纵向模式，

我尝试了以下答案：[强制人像模式](https://stackoverflow.com/questions/9908387/force-portrait-mode-in-camera)但没有用，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:01:57.573

试试看 -

```
private void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 }

private void initCamera() {
     if(mCamera == null) {
          mCamera = Camera.open();
          setCameraDisplayOrientation(activity, CameraInfo.CAMERA_FACING_BACK, mCamera);
          mCamera.unlock();
      }
} 
```

# tcp - 使用 TCP 进行信号广播

> ID：10259301
> 
> 赞同：2
> 
> 时间：2012-04-21T13:23:59.807
> 
> 标签：tcp, broadcasting

有什么方法可以在 TCP 中广播信号或消息？我知道使用 UDP 广播。
例如，与服务器连接的多个客户端和服务器同时向所有连接的客户端发送广播信号。可以使用 TCP 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:29:46.993

不，TCP 是面向连接的，专为单端对端通信而设计。

# c++ - 可以为间接基类共享基类实例吗？

> ID：10259303
> 
> 赞同：0
> 
> 时间：2012-04-21T13:24:31.547
> 
> 标签：c++, inheritance

我必须承认我很难提出这个问题，但我会尽力做到准确。我试图寻找我的问题的答案，但我怀疑我无法找到我正在寻找的东西，因为我不知道该怎么称呼它。

我有一个基类 A，以及从这个基类继承的几个子类。然后我创建另一个类 X，它继承自一些提到的子类。我现在面临的问题是 X 继承的每个类都有自己的 A 类实例。下面的代码应该可以更好地理解我的意思。

```
class A;
class B : public A;
class C : public A;

class X : public B, public C; 
```

当 B 类和 C 类都充当同一个类的间接基类时，有没有办法让 B 类和 C 类共享 A 类的同一个实例？

举一个我为什么想要这个的例子，让我们看看这段代码。

```
 class A
    {
        int _x;
    };

    class B : public A
    {
        void outputX(){std::cout << A::_x << std::endl;
    };

    class C : public A
    {
       void setX(int x){A::_x=x;}
    };

    class X : public B, public C
    {
        C::setX(5);

        // this will output an un-initialized _x, 
        // as B and C have their own version of A
        B::outputX() 
    }; 
```

现在我意识到在这个例子中这似乎是不必要的，但在我的实际情况下，我认为如果 B 和 C 在类 X 中共享 A 的实例，这将是一个很好的解决方案。

这是可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:26:58.727

您可以通过使用虚拟继承来解决这个问题：

```
class B : virtual public A;
class C : virtual public A;

class X : virtual public B, virtual public C; 
```

查看更多关于[钻石问题的](http://en.wikipedia.org/wiki/Diamond_problem)信息。

# c# - 如何在运行时移动新的（自定义）按钮？

> ID：10259310
> 
> 赞同：1
> 
> 时间：2012-04-21T13:25:30.190
> 
> 标签：c#, winforms, button, move

我的 winforms C# 项目有问题。

我想在表单周围移动一个新的（自定义）按钮（在运行时）。我怎样才能做到这一点？

```
 Button[] buttons = new Button[1000];
        int counter = 0;
        Button myText = new Button();
private void button2_Click(object sender, EventArgs e)
        {
                Button myText = new Button();
                myText.Tag = counter;
                myText.Location = new Point(x2,y2);
                myText.Text = Convert.ToString(textBox3.Text);
                this.Controls.Add(myText);
                myText.MouseMove += new MouseEventHandler(myText_MouseMove);
                myText.MouseDown += new MouseEventHandler(myText_MouseDown);
                buttons[counter] = myText;
                counter++;
        }
 public void myText_MouseMove(object sender, MouseEventArgs e)
        {
            int s = e.GetHashCode();
            int check = 0;
            for (int i = 0; i < counter; i++)
            {
                if (buttons[i].GetHashCode() == s)
                    check = i;
            }
            if (e.Button == MouseButtons.Left)
            {
                buttons[check].Left += e.X - move.X;
                buttons[check].Top += e.Y - move.Y;
            }
        }
        void myText_MouseDown(object sender, MouseEventArgs e)
        {
            move = e.Location;
        } 
```

我使用上面的代码创建新按钮，并尝试在表单中移动它。

如果我只为 1 个按钮编写代码，我可以移动它，但是我也希望能够为更多按钮执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:34:13.607

试试这个

```
public void myText_MouseMove(object sender, MouseEventArgs e)
    {
        Button button = (Button)sender;
        if (e.Button == MouseButtons.Left)
        {
            button .Left += e.X - move.X;
            button .Top += e.Y - move.Y;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T13:34:15.820

我在做类似的事情时遇到了这个线程。
即使线程很旧；我正在分享我实现这一目标的方式。

**注：** 与上面的操作员问题不同；在下面的例子中；我没有使用带有 1000 个按钮的 Button[] （数组）；（但这很容易改变）。

在下面的示例中，我有：一个带有 1 个按钮的表单。单击此按钮时；它将创建一个新的（自定义）按钮（因此；在代码中有两个按钮单击事件只是为了测试目的）。

**您可以在下面找到：**一种生成按钮的方法；以及如何在表单周围拖动它。

```
/* Variables */

// Used to Store the Mouse Location on the Screen when Button is Clicked
private Point mouseDownLocation;

// Used to know if the Button can be Moved.
private bool isMoveable = false;

// Used to prevent clicking the button when being dragged
private bool clickEnabled = true;

/// <summary> Occurrs when the visible button on the Form is clicked. </summary>
private void Button_Click(object sender, EventArgs e)
{
    // Create a variable to set the Size of the new Button.
    Size size = new Size(100, 100);

    // Create the Button. Specifying the Button Text and its Size.
    CreateButton("Button Text", size);
}

/* Custom Button : Create & Configure the Button */
private void CreateButton(string btnText, Size btnSize)
{
    // Create the Button instance:
    Button btn = new Button();

    // Custom Button Style Configuration Code.
    // i.e: FlatStyle; FlatAppearance; BackColor; ForeColor; Text; Size; Location; etc...
    btn.FlatStyle = FlatStyle.Standard;
    btn.FlatAppearance.BorderColor = Color.White;
    btn.BackColor = Color.Purple;
    btn.ForeColor = Color.White;
    btn.Text = btnText;
    btn.Size = btnSize;
    btn.Location = new Point(100, 100);

    // Custom Button Event.
    btn.Click += new EventHandler(CustomButton_Click);
    btn.MouseDown += new MouseEventHandler(CustomButton_MouseDown);
    btn.MouseMove += new MouseEventHandler(CustomButton_MouseMove);
    btn.MouseUp += new MouseEventHandler(CustomButton_MouseUp);

    // Add Button to Control Collection.
    Controls.Add(btn);

    // Show Button.
    btn.Show();
}

/* Custom Button Events */

/// <summary> Occurrs whenever the Custom Button is Clicked </summary>
private void CustomButton_Click(object sender, EventArgs e)
{
    if (clickEnabled)
    {
        // Note: The "for" loop bellow lets you get the current button; so you can drag it.

        Button btn = (Button)sender;

        // Iterate over the Form Controls
        for (int i = 0; i < Controls.Count; i++)
        {
            // If the Button Clicked Corresponds to a Found Index in Control Collection...
            if (i == Controls.IndexOf(btn))
            {
                // Perform Corresponding Button Action.
                MessageBox.Show(btn.Name + " Clicked!");
            }
        }
    }
}

/// <summary> Occurrs whenever Left Mouse Button Clicks the Button and is Kept Down. </summary>
private void CustomButton_MouseDown(object sender, MouseEventArgs e)
{
    // Check if Left Mouse Button is Clicked.
    if (e.Button == MouseButtons.Left)
    {
        // Set mouseDownLocation (Point) variable, according to the current mouse location (X and Y).
        mouseDownLocation = e.Location;

        // Enable the hability to move the Button.
        isMoveable = true;
    }
}

/// <summary> Occurrs whenever Left Mouse Button is Down and Mouse is Moving the Button. </summary>
private void CustomButton_MouseMove(object sender, MouseEventArgs e)
{
    Button btn = (Button)sender;

    // If the hability to move the button is "true" and the mouse button used to drag the button is the left mouse button:
    if (isMoveable)
    {
        if (e.Button == MouseButtons.Left)
        {
            // Set the Button location X and Y...
            btn.Left = e.X + btn.Left - mouseDownLocation.X;
            btn.Top = e.Y + btn.Top - mouseDownLocation.Y;
        }
    }

    // Disable Click hability (See: Note at the end of this post).
    clickEnabled = false;
}

/// <summary> Occurrs whenever Left Mouse Button is not longer being hold down (Left Mouse Button is Up). </summary>
private void CustomButton_MouseUp(object sender, MouseEventArgs e)
{
    // Disables the hability to move the button
    isMoveable = false;
    clickEnabled = true;
}
Note: The Custom Button Click interferes with the MouseDown Event. In a "simple" manner: 
I updated the code by including a boolean value to prevent clicking the button when actually it is being dragged.
Hope this helps you out understanding how to accomplish this feature. 
```

希望这可以帮助人们实现这一目标。

# php - Zend mysql fetchAll 和计数

> ID：10259311
> 
> 赞同：1
> 
> 时间：2012-04-21T13:25:34.383
> 
> 标签：php, mysql, zend-framework

我有以下 SQL 查询：

```
SELECT `ka`.`id`, COUNT(kk.id) AS `clicks` FROM `karriere_anzeige` AS `ka` LEFT JOIN `karriere_klicks` AS `kk` ON `ka`.`id` = `kk`.`id_anzeige` WHERE (ka.id_kunde = '616') GROUP BY `ka`.`id` 
```

如果我在 phpMyAdmin 中运行此查询，我会得到正确的结果，fe：

编号 | 点击次数

4803 | 75

4822 | 144

但是这种尝试：

```
$rowset = $db->fetchAll($select); 
```

返回此行集：

```
array(2) {
    [0] => array(2) {
        ["id"] => string(4) "4803"
        ["clicks"] => string(1) "0"
    }
    [1] => array(2) {
        ["id"] => string(4) "4822"
        ["clicks"] => string(1) "0"
    }
} 
```

$db 是 Zend_Db_Adapter_Pdo_Mysql 对象

当我执行 INNER JOIN 而不是 LEFT JOIN 时，在 phpMyAdmin 中运行 SQL 查询会返回几行。如上所述，对 Zend Framework 执行相同操作会返回零行。我想我通常做错了什么，但我不知道是什么。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:09:29.280

如果您尝试将字符串作为 SQL 传递，请尝试以下操作：

```
//This assumes access from a controller/action
$db = Zend_Db_Table::getDefaultAdapter();
$sql = "SELECT `ka`.`id`, COUNT(kk.id) AS `clicks` FROM `karriere_anzeige` AS `ka` LEFT JOIN `karriere_klicks` AS `kk` ON `ka`.`id` = `kk`.`id_anzeige` WHERE (ka.id_kunde = '616') GROUP BY `ka`.`id`";
$stmt = new Zend_Db_Statement_PDO($db, $sql);
$stmt->execute(); 
```

你也可以建立一个[Zend_Db_Select](http://framework.zend.com/manual/en/zend.db.select.html)对象来查询你的表。

# python - 为移动应用程序编写新版本检查的最佳方式？

> ID：10259315
> 
> 赞同：0
> 
> 时间：2012-04-21T13:26:09.483
> 
> 标签：python, api, flask

我正在为移动应用程序编写 API，现在我们需要一个“检查新版本”API，它看起来像这样：

```
{
    version: 1.3,
    url: "http://abc.com/v1.3.apk",
    change_log: "Fix few bugs"
} 
```

现在我想知道编写这样一个api时的最佳实践是什么，在服务器端代码中硬编码这些信息是否可以（烧瓶，在我的例子中）：

```
@app.route("/update")
@jsonify
def checkForUpdate():
    return {
        version: 1.3,
        url: "http://abc.com/v1.3.apk",
        change_log: "Fix few bugs"
    } 
```

还是有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:34:42.933

硬编码版本信息可能是最后的解决方案。我会有一个静态文件，其中包含在部署时生成的 JSON 内容。然后您可以静态地提供它（直接在 Web 服务器上配置正确的 MIME 类型）或从您的 Web 应用程序中读取它。

# android - 圆圈上的水平文本

> ID：10259316
> 
> 赞同：0
> 
> 时间：2012-04-21T13:26:14.950
> 
> 标签：android

你好我想在一个圆圈周围放置几个文本，但不想旋转它，文本应该是水平的，就像一个速度计。旋转画布或 TextOnPath 旋转文本，因此它不是水平的。

我如何在 Android 中做到这一点？

```
 for (int i = minValue; i <= maxValue; ++i) {
        float y1 = scaleRect.top;
        float y2 = y1 - 0.020f;

        canvas.drawLine(0.5f, y1, 0.5f, y2, scalePaint);

            if (i%2==0) {
                String valueString = Integer.toString(i);
                canvas.drawText(valueString, 0.5f, y2 - 0.015f, scalePaint);
        }

        canvas.rotate(degreesPerNick, 0.5f, 0.5f);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:30:37.743

您需要为此制作自定义视图。在 onDraw 方法中，创建一个路径对象，向该对象添加圆形，然后使用 Canvas 对象在该路径上绘制文本。

```
Path path = new Path();
path.addCircle(x, y, radius, Path.Direction.CW);
myCanvas.drawTextOnPath(myText, path, offset, 0, myPaint); 
```

更新：：：

只需要像这样创建一个圆形可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="oval">
    <corners android:radius="10dip"/>
    <stroke android:color="@color/red" android:width="2dip"/>
    <solid android:color="@android:color/transparent"/>
</shape> 
```

并将此可绘制对象设置为您的 TextView 背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T08:51:33.047

```
int n = 10; // Anzahl Werte
float r = 0.28f; // Radius Kreis
for (int i = 0; i < (n); i++) 
{ 
    double fi = -2*Math.PI*i/n; 
    double x = r*Math.sin(fi + Math.PI) + 0.5f; 
    double y = r*Math.cos(fi + Math.PI) + 0.52f; 
    canvas.drawText(i+"", (float)x,(float)y , scalePaint);
} 
```

# google-api - Google 简单 API 访问 - 需要授权，但如何？

> ID：10259321
> 
> 赞同：6
> 
> 时间：2012-04-21T13:26:59.833
> 
> 标签：google-api

我正在尝试编写一个独立的 perl 应用程序，列出我存储在 Google 任务中的所有任务。我被引导相信我可以使用谷歌所谓的“简单 API 访问”，因为它只是我的任务而且它是只读的。

所以我做了以下事情：

```
#!perl
use LWP;
my $browser = LWP::UserAgent->new;
my $list = "Iyrhxu8sRTVOhE4hUBr4W1kwNTI6MDow";
my $key = "<api key removed>";
my $url = "https://www.googleapis.com/tasks/v1/lists/$list/tasks?pp=1&key=$key";
print $browser->get($url)->content; 
```

作为回报，我得到：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

不幸的是，我现在不知道它想要什么授权。我尝试将最后一行替换为：

```
my $auth = "...";
print $browser->get($url, "Authorization", $auth)->content; 
```

并使用 API 控制台中列出的 Google 列出的客户端 ID、电子邮件地址和客户端密码 - 但他们都给出了`Invalid Credentials`.

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T20:29:20.587

似乎不起作用，他们似乎已经禁用它以支持 oauth2，只是没有更新 apply-for-an-api-key 页面。改用 Oauth2：

```
https://developers.google.com/oauthplayground/ 
```

如果你需要一个 api 密钥，你可以在这里得到它：

```
https://code.google.com/apis/console 
```

# javascript - JSON到JavaScript中的过滤数组

> ID：10259322
> 
> 赞同：0
> 
> 时间：2012-04-21T13:27:07.753
> 
> 标签：javascript, arrays, json, parsing

我有这个 JSON 字符串：

```
[
   {
      "pk": "alpha",
      "item": [{
         "child": "val"
      }]
   },
   {
      "pk": "beta",
      "attr": "val",
      "attr2": [
         "child1"
      ]
   },
   {
      "pk": "alpha",
      "anotherkey": {
         "tag": "name"
      }
   }
] 
```

而且我需要生成一个没有重复PK的过滤数组，在上面的最后一个条目的示例中：`"pk": "alpha","anotherkey": {`...应该从输出数组中消除。所有这些都使用 JavaScript。我尝试使用对象 JSON.parse，但它返回了许多例如难以过滤的键值对`"key=2 value=[object Object]"`。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:55:47.733

```
<script type="text/javascript">

// Your sample data
var dataStore = [
   {
      "pk": "alpha",
      "item": [{
         "child": "val"
      }]
   },
   {
      "pk": "beta",
      "attr": "val",
      "attr2": [
         "child1"
      ]
   },
   {
      "pk": "alpha",
      "anotherkey": {
         "tag": "name"
      }
   }
];

// Helper to check if an array contains a value
Array.prototype.contains = function(obj) {
    var i = this.length;
    while (i--) {
        if (this[i] == obj) {
            return true;
        }
    }
    return false;
}

// temp array, used to store the values for your needle (the value of pk)
var tmp = [];

// array storing the keys of your filtered objects. 
var filteredKeys = [];

// traversing you data
for (var i=0; i < dataStore.length; i++) {
    var item = dataStore[i];

    // if there is an item with the same pk value, don't do anything and continue the loop
    if (tmp.contains(item.pk) === true) {
        continue;
    }

    // add items to both arrays
    tmp.push(item.pk);
    filteredKeys.push(i);
}

// results in keys 0 and 1
console.log(filteredKeys);

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:35:11.797

```
var data = JSON.parse(jsonString);
var usedPKs = [];
var newData = [];
for (var i = 0; i < data.length; i++) {
  if (usedPKs.indexOf(data[i].pk) == -1) {
    usedPKs.push(data[i].pk);
    newData.push(data[i]);
  }
}

// newData will now contain your desired result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T13:35:50.490

```
var contents = JSON.parse("your json string");

var cache = {},
    results = [],
    content, pk;
for(var i = 0, len = contents.length; i < len; i++){
    content = contens[i];
    pk = content.pk;
    if( !cache.hasOwnPropery(pk) ){
        results.push(content);
        cache[pk] = true;
    }

}

// restuls 
```

# amazon-appstore - 如何在适用于 Android 的 Amazon Appstore 中启用“立即试驾”？

> ID：10259323
> 
> 赞同：1
> 
> 时间：2012-04-21T13:27:12.767
> 
> 标签：amazon-appstore

我已经搜索和搜索，但我无法弄清楚如何在亚马逊 Appstore 的应用程序上启用“立即试驾”功能。我相信我需要上传一个为 x86 构建的额外 APK，但我在开发人员门户中找不到任何方法。也许应用 APK 同时需要 x86 和 ARM（即使您不使用任何 NDK 或原生 ARM 代码）？或者它可能是一个仅限邀请的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:03:37.433

我也搜索和搜索，也找不到它。所以今天，我刚刚浏览了开发者联系亚马逊链接，并要求他们在我的应用程序上启用它。我提供了一个非常简短的描述，说明为什么我认为它会很好。几个小时后，亚马逊在我的应用程序上启用了它！！

我刚刚使用了这个链接--> [https://developer.amazon.com/help/contact-us.html](https://developer.amazon.com/help/contact-us.html)

# java - 是否有 API 可用于使用三星电视网络远程控制功能？

> ID：10259326
> 
> 赞同：6
> 
> 时间：2012-04-21T13:27:36.807
> 
> 标签：java, android, samsung-mobile, television, samsung-smart-tv

我想编写一个通过 wifi 网络控制我的三星电视的 Android 应用程序。这是可能的，因为那里有应用程序可以做到这一点（包括三星自己的远程应用程序）。

是否有可用的三星 API 来执行此操作？应用程序如何与电视对话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:34:10.337

SamyGo 有一个开源项目，运行良好。我在我的 android 手机上使用它，并在该项目源的帮助下，我用 c# 创建了一个小遥控器。您可以随时查看他们的官方论坛链接以获取最新消息。

[http://sourceforge.net/p/samygo/code/1286/tree/](http://sourceforge.net/p/samygo/code/1286/tree/)

[http://forum.samygo.tv/index.php](http://forum.samygo.tv/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:18:20.147

这似乎是一个好的开始（三星的电视 SDK）：

[http://www.samsungdforum.com/Devtools/SdkDownload](http://www.samsungdforum.com/Devtools/SdkDownload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T16:23:15.117

我已经将它用于基于 PC 的 Java 应用程序，它运行良好......可能会有一些用处：

[https://github.com/mhvis/samsung-tv-control](https://github.com/mhvis/samsung-tv-control)

# python - 烧瓶。Python。显示渲染的模板

> ID：10259328
> 
> 赞同：1
> 
> 时间：2012-04-21T13:27:47.463
> 
> 标签：python, signals, flask

我对`Flask`和很新`python`，不要判断太多:) 我正在尝试修改`response`，所以我的应用程序会在页脚中显示渲染的模板列表。我的`get_rendered_templates`功能是：

```
def get_rendered_templates(context):
  from contextlib import contextmanager

  @contextmanager
  def rendered_templates(context):
    templates = []
    def add(sender, template, context):
      assert False
      templates.append((template, context))
    template_rendered.connect(add, context)
    try:
      yield templates
    finally:
      template_rendered.disconnect(add, context)

  with rendered_templates(context) as templates:
    return templates 
```

这是我在文档中找到`Flask`并稍作修改的内容。

无论如何，这个函数返回`None`，`add`函数永远不会被执行（或者应用程序会因为 而终止`assert False`）。

我的`after_request`：

```
@app.after_request
def after_request(response):
  rendered_templates = get_rendered_templates(app)
  templates_list = "<br />".join(["%s" % template for (template, context) in rendered_templates ])
  response.data = "%(current)s <br /> temsplates: %(templates)s" % {'current': response.data, 'templates' : templates_list }
  return response 
```

我做错了什么？做我正在做的事情的正确方法是什么？

# asp.net - Silverlight中的stackpanel可见性编辑

> ID：10259331
> 
> 赞同：1
> 
> 时间：2012-04-21T13:28:56.020
> 
> 标签：asp.net, visual-studio, silverlight, xaml, visibility

我正在开发托管在 Silverlight Web 应用程序上的 Silverlight Web 应用程序 (RIA)。

背景：我在其中一个 xaml 页面中有一个堆栈面板。我试图简化我的问题。下降如下：

我的 xaml 页面有一个堆栈面板，而该堆栈面板中只有文本块和按钮。导航到 xaml 页面时，只有授权用户才能看到文本块中的值。如果用户未经授权，我计划在文本块中显示“未经授权”消息（而不是值）（按钮也折叠。我不显示按钮。）

仅供参考，texblock 的这个值来自 WCF 服务，我已经为服务中的授权设置了适当的属性。如果未经授权，价值将不会来自服务的文本块。我现在所做的只是为了 UI，当一些用户试图从浏览器的地址栏中输入页面的 url 时，我想向他显示未经授权的消息。

到目前为止我做了什么:: 我给 stackpanel 起了个名字。我给文本块起了一个名字，给按钮起了一个名字。如果授权，我将文本块的文本值设置为服务返回值。

如果未经授权，我将更改 .cs 文件中的可见性和文本。

```
textblock.Text="unauthorized";
buttonname.Visibility = Visibility.Collapsed; 
```

问题：问题是我有一个想法。:( 当我为我的堆栈面板命名时，我可以说 stackpanelname.Visibility = Visibility.Collapsed;

但是我现在无法显示我的消息（文本块），因为子控件也与父控件一起折叠。有什么办法可以折叠我的堆栈面板（父控件），但只有一个控件（一个子控件或几个）是可见的。

解决方案：当我输入这个时，我得到了一个解决方案，我可以选择一个新的堆栈面板，带有一个文本块，我可以将其可见性设置为 VISIBLE，并将文本作为我的消息。但是，这是唯一的方法吗？我们如何处理这些情况？

一般来说，假设我的问题很清楚，在这种场景中提供安全性的一般方法是什么，从 UI。是否会重定向到错误页面/登录页面或同一页面上的用户消息或任何其他内容。假设后端服务将具有授权的属性和逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:30:40.077

通常我会用绑定来解决这样的问题。我不确定您是否愿意采用这种方法，但鉴于您愿意。例如，我会这样做：

```
<TextBlock Text="{Binding AuthorizationCaption,FallbackValue='Unauthorized'" /> 
```

此处的备用值用于查看其外观以用于设计目的。FallbackValues 仅在绑定失败时出现。

对于按钮，我会这样做：

```
<Button Content="My Button" Visibility="{Binding IsAuthorized,Converter={StaticResource VisibilityValueConverter},FallbackValue=Collapsed}" /> 
```

在上面的例子中，你会注意到我使用了我称之为 VisibilityValueConverter 的东西。这当然是我在 XAML 中定义的关于“LayoutRoot”的资源的一部分。例如

```
<UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/MyUICustomizationLib;component/rdMyResourceDictionary.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</UserControl.Resources> 
```

My VisibilityValueConverter 是一个简单的转换器，用于将布尔值转换为可见性属性。它非常可重复使用。它实现 了我认为在**System.Windows.Data中的****IValueConverter**。顺带一提：

 **```
public class TVisibilityValueConverter:IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        bool _visibility = (bool)value;
        return _visibility ? Visibility.Visible : Visibility.Collapsed;
    }
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        Visibility _visibility = (Visibility)value;
        return _visibility == Visibility.Visible;
    }
} 
```

我会将我的值转换器嵌入到我的 ResourceDictionary 中，首先，定义一个命名空间到它的位置 -

```
xmlns:muicl="clr-namespace:MyUICustomizationLib.ValueConverters" 
```

然后定义静态资源：

```
<muicl:TVisibilityValueConverter x:Key="VisibilityValueConverter" /> 
```

最后但并非最不重要的一点是，实现我的视图模型属性和命令以适应必须的内容。即，我进行了必要的服务器调用，并且在回调中，我相应地切换了 AuthorizationCaption 属性和 IsAuthorized 属性。最简单的方法是让 AuthorizationCaption 成为一个简单的 if 语句，它依赖于 IsAuthorized 属性。让 IsAuthorizedProperty 的 set 方法引发 AuthorizationCaption 也发生更改的事件通知。例如

```
set
{
    __fIsAuthorized = value;//set private member
    this.RaisePropertyChanged("IsAuthorized");
    this.RaisePropertyChanged("AuthorizationCaption");
} 
```

当然，它们可能更适合您设置。但这将是我将采取的路线。**

# wget - 从在 nmake 中完成的构建中，如何从 URL (wget) 下载文件？

> ID：10259340
> 
> 赞同：0
> 
> 时间：2012-04-21T13:30:30.930
> 
> 标签：wget, nmake

在 Windows 上，使用 nmake，如何包含从某个位置下载文件的规则？类似 wget 的东西，但在 Windows 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:32:31.600

在现代 Windows（Vista、Windows 7 和更高版本）上，您可以使用 Powershell，因此您可以执行以下操作：

```
# ==================================================================
_PS=${WINDIR}\System32\WindowsPowerShell\v1.0\powershell.exe
OAUTHCS_URL=https://cropperplugins.svn.codeplex.com/svn/Cropper.Plugins/OAuth1.0/OAuth.cs

OAuth.cs:
    $(_PS) -Command "& {(new-object System.Net.WebClient).DownloadFile('$(OAUTHCS_URL)','OAuth.cs')}" 
```

如果你不喜欢依赖powershell，你可以使用windows的wget命令行工具，像这样：

```
CSC=\Windows\Microsoft.NET\Framework\v4.0.30319\csc.exe

Oauth.cs: wget.exe 
    .\wget.exe $(OAUTHCS_URL)

wget.exe: wget.cs $(CSC)
    $(CSC) /t:exe /debug+ /out:wget.exe  wget.cs 
```

可用的 wget 工具的源代码可[在此处](https://cheesoexamples.svn.codeplex.com/svn/wget/wget.cs)获得。

# python - Python函数评估效率

> ID：10259342
> 
> 赞同：4
> 
> 时间：2012-04-21T13:30:51.690
> 
> 标签：python

如果我这样做：

```
x=[(t,some_very_complex_computation(y)) for t in z] 
```

显然 some_very_complex_computation(y) 不依赖于 t。所以它应该只评估一次。有没有办法让 Python 意识到这一点，所以它不会为每次迭代评估 some_very_complex_computation(y) ？

编辑：我真的很想在一行中做到这一点......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T13:39:32.983

通常你应该听从 San4ez 的建议，在这里只使用一个临时变量。我仍将介绍一些在某些情况下可能有用的技术：

通常，如果您只想为子表达式绑定名称（这通常是您需要临时变量的原因），您可以使用 lambda：

```
x = (lambda result=some_very_complex_computation(y): [(t, result) for t in z])() 
```

在这种特殊情况下，以下是一个非常干净且可读的解决方案：

```
x = zip(z, itertools.repeat(some_very_complex_computation(y))) 
```

### 关于这些自动优化的一般说明

在像 Python 这样的动态语言中，实现将很难确定*引用透明*`some_very_complex_computation`​​，也就是说，对于相同的参数，它总是会返回相同的结果。如果你想要这样的魔法，你可能想研究像 Haskell 这样的函数式语言。

 *### “显式”纯粹性：记忆

但是，您*可以*做的是`some_very_complex_computation`显式缓存其最近参数的返回值：

```
from functools import lru_cache

@lru_cache()
def some_very_complex_computation(y):
  # ... 
```

这是 Python 3。在 Python 2 中，您必须自己编写装饰器：

```
from functools import wraps

def memoize(f):
  cache = {}
  @wraps(f)
  def memoized(*args):
    if args in cache:
      return cache[args]
    res = cache[args] = f(*args)
    return res
  return memoized

@memoize
some_very_complex_computation(x):
  # ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T13:32:42.107

不，您应该将值保存在变量中

```
result = some_very_complex_computation(y)
x = [(t, result) for t in z] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T13:52:33.130

我理解有时将所有内容放在一行中的不正当冲动，但同时保持可读性是好的。您*可能*认为这比`lambda`版本更具可读性：

```
x=[(t,s) for s in [some_very_complex_calculation(y)] for t in z] 
```

但是，您可能更好地选择 San4ez 的答案，因为它简单、易读（并且可能比创建和迭代一个元素列表更快）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T13:41:26.660

您可以：

将调用移出列表理解

或者

使用记忆化（即当 some_very_complex_computation(y) 被调用时将结果存储在字典中，如果再次使用相同的值调用它，则返回存储在字典中的值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T13:43:38.907

**TL;DR 版本**

```
 zip(z, [long_computation(y)] * len(z)) 
```

**原答案：**

根据经验，如果您有一些执行时间很长的计算，最好将结果直接缓存在函数中，如下所示：

```
_cached_results = {}

def computation(v):
    if v in _cached_results:
        return _cached_results[v]
    # otherwise do the computation here...
    _cached_results[v] = result
    return result 
```

这也可以解决您的问题。

**单线**

为了他们而做单行代码是糟糕的编码，但是......如果你*真的*想在一行中做：

```
>>> def func(v):
...     print 'executing func'
...     return v * 2
... 
>>> z = [1, 2, 3]
>>> zip(z, [func(10)] * len(z))
executing func
[(1, 20), (2, 20), (3, 20)] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-21T14:18:16.673

@San4ez 给出了传统的、正确的、简单的、漂亮的答案。

不过，本着单线的精神，这是一种将所有内容放在一个语句中的技术。核心思想是使用嵌套的 for 循环来预评估子表达式：

```
result = [(t, result) for result in [some_very_complex_computation(y)] for t in z] 
```

如果这让您大吃一惊，您可以使用分号将多个语句放在一行中：

```
result = some_very_complex_computation(y); x = [(t, result) for t in z] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-21T13:34:42.433

它无法知道函数是否有副作用以及从运行到运行的变化，因此您必须手动将调用移出列表推导。*

# c - fread 在 C 中是如何工作的？

> ID：10259344
> 
> 赞同：2
> 
> 时间：2012-04-21T13:30:59.507
> 
> 标签：c, fread

我有内容为的文本文件：

```
12345678901222344567 
```

然后我用这段代码来阅读内容：

```
FILE * pFile;
  int c;
  char buffer [256];
  pFile = fopen ("myfile.txt","r");
  int a[50] = {0};
  fread(a, sizeof(a[0]), 5, pFile);
  fclose(pFile);
  for (c = 0; c < 5; c++)
  {
    printf("%d\n", a[c]);
  } 
```

我得到了结果：

![在此处输入图像描述](../Images/2fe4b7ffeb2e236f853e292323ca20d5.png)

我无法解释自己为什么会得到这样的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T13:40:15.553

您有一个文本文件，但 fread 读取二进制数据。因此，您存储的是文件中的字节而不是文件的文本。尝试使用 fread 来填充您未使用的`buffer`变量，您应该能够获得文本字符串，然后您可以使用例如 sscanf() 对其进行解析。或者您可以停止使用 fread 并改用 fscanf 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T13:40:27.100

那是正确的结果。您正在将数据读取为二进制数据，而不是文本或整数。前四个字节是 0x31323334，在 Intel 机器上读取时会翻转为 0x34333231，即十进制的 875770417。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T14:08:06.040

**文本文件与二进制文件**

`fread`您在应该用于二进制文件的文本文件上滥用该函数。[文本文件](http://en.wikipedia.org/wiki/Text_file)与二进制[文件](http://en.wikipedia.org/wiki/Binary_file)不同。

比方说，如果你用四个[ASCII 字符](http://en.wikipedia.org/wiki/ASCII) `"1"`, `"2"`, `"3"`,保存 txt `"4"`，那么实际存储在磁盘上的不是`1`, `2`, `3`, `4`。相反，它是他们的 ACSII 代码：`49`, `50`, `51`, `52`。因此，当您将`sizeof(a[0])`字节读入时`a[0]`，会在内存中读回四个字节，例如：

```
Memory Address    Byte In Memory        Little-endian
  0x12345678        00110001     <----least significant byte
  0x12345679        00110010
  0x12345680        00110011
  0x12345681        00110100     <----most significant byte 
```

（请注意，地址只是为了说明而伪造的）

**字节序**

至于这四个字节如何转成整数，都和[字节序](http://en.wikipedia.org/wiki/Endianness)有关。简而言之，如果您的平台是 little-endian（例如 Intel x86 处理器），`00110001`则最低内存地址 () 上的第一个字节 ( `0x12345678`) 将是构成整数的最低有效字节。

最终，整数是`00110100001100110011001000110001`二进制的，也就是`875770417`十进制的。

# actionscript-3 - 全局设置对 SWF 文件有什么作用？

> ID：10259345
> 
> 赞同：1
> 
> 时间：2012-04-21T13:31:07.007
> 
> 标签：actionscript-3, flash

很多次，当我的 SWF 无法正常运行，然后经过多次尝试，我只记得

右键单击 swf ==>（打开一个对话框“Flash Player 设置管理器”）==> 高级选项卡 ==> 受信任的位置设置（我在这里设置文件，或者它所在的文件夹）

万岁！一切运行。

我现在想明白，这里有什么魔力？

1) 受信任的位置设置在这里起什么作用。

2) 这仅在特定类别的应用程序中需要。（我相信并不是所有的 SWF 都依赖它）。这个类别是什么。为什么不需要在受信任的位置设置中指定其他 SWF 应用程序？

谢谢 V。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:46:07.380

它用于从文件系统加载文件。默认情况下不允许 SWF 执行此操作，但大多数 IDE 会为您处理（即在您从它们启动 SWF 时编写策略文件），因此您看不到那么多，除非您将 SWF 移到最初编译的地方。

# javascript - Backbone.js 大型多页面应用程序，干净地管理页面转换，销毁，创建等

> ID：10259346
> 
> 赞同：16
> 
> 时间：2012-04-21T13:31:07.217
> 
> 标签：javascript, design-patterns, backbone.js

我目前正在构建一个巨大的主干应用程序（facebook 克隆）。

在过去的几天里，感谢 Rob Conery 的优秀教程（如果您从 MVC 3 和 BB [http://tekpub.com/productions/mvc3](http://tekpub.com/productions/mvc3)开始，则必不可少的查看）对 BB 中的一切工作方式感到非常满意

现在我已经到了需要在我的应用程序中切换页面的阶段，我开始把它连接起来，但感觉就像我自己做了很多这样的事情。这很好，我知道我将能够做我想做的事。

我已经解决了内存泄漏问题，确保在切换页面时取消绑定并删除我的模型/集合/视图，[在主干中切换视图以在页面之间导航 - 什么是正确的方法？](https://stackoverflow.com/questions/9250759/switching-views-in-backbone-for-navigating-between-pages-whats-the-right-way)

但是除了这些东西之外，当我在页面之间切换时，我还想做一大堆任务。本质上是删除和添加页面的一部分。这稍微复杂一些，因为除了删除所有内容之外，我只想根据我想要进行的转换来删除/破坏需要更改的页面位。

如前所述，我现在正在自己工作，但我想知道是否有一种模式来处理这种拆解/拆解过程并保持清洁（而不是最终导致路由器臃肿（控制器膨胀！ ！！）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T21:43:59.173

木偶绝对是要走的路。具体来说，[Marionette.Layout](http://derickbailey.github.com/backbone.marionette/#marionette-layout)非常适合在不重新渲染整个页面的情况下交换特定区域。查看 Derick 的一些[示例应用程序](http://derickbailey.github.com/backbone.marionette/#backbone-marionette-sample-apps)以熟悉该框架。

我建议您在使用普通的旧事件使您的应用程序正常工作之前远离路由器。然后添加路由器支持之后。基本上路由器应该被连接起来以反映你的应用程序的状态，但你不应该依赖它作为你的控制器。

顺便说一句，我在一个大型多模块 Backbone 项目中使用 RequrieJS，这是天赐之物。这在 BB 社区中是有争议的，但是如果你有很多相互依赖的组件并且你想让另一个框架处理所有的依赖关系，那么它是值得研究的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T18:04:08.770

我遇到了同样的问题并想分享我是如何解决它的，所以我使用我的页面转换约定从 Backbone.js 文档重新设计了 ToDo 应用程序示例：

[http://ahamlett.com/Backbone.localStorage/](http://ahamlett.com/Backbone.localStorage/)

我还没有测试它的内存泄漏，但如果有一些只是在应用程序路由器的 SetView 方法中的 .remove() 之前调用 .unbind() 。

# android - 如何在 Ubuntu 11.10（32 位）上安装 Tegra Android 开发包

> ID：10259350
> 
> 赞同：1
> 
> 时间：2012-04-21T13:31:46.463
> 
> 标签：android, ubuntu, tegra

我从以下链接下载了带有 .run 扩展名的 Tegra 开发包。但是新的我不知道我应该如何运行这个包进行安装。我是 Ubuntu 和这个 tegra 环境的新手。

[http://developer.nvidia.com/sites/default/files/akamai/tools/files/Tegra/tegra-devpack-1.0-linux-2012-04-10-12749879.run](http://developer.nvidia.com/sites/default/files/akamai/tools/files/Tegra/tegra-devpack-1.0-linux-2012-04-10-12749879.run)

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T16:37:21.160

在 Ubuntu 操作系统中

1.  运行终端
2.  chmod +x yourPackage.run
3.  ./yourPackage.run

# c++ - C++11 中的元组有哪些好的用例？

> ID：10259351
> 
> 赞同：45
> 
> 时间：2012-04-21T13:31:56.483
> 
> 标签：c++, c++11, tuples

在 C++11 中使用元组有哪些好的用例？例如，我有一个定义局部结构的函数，如下所示：

```
template<typename T, typename CmpF, typename LessF>
void mwquicksort(T *pT, int nitem, const int M, CmpF cmp, LessF less)
{
  struct SI
  {
    int l, r, w;
    SI() {}
    SI(int _l, int _r, int _w) : l(_l), r(_r), w(_w) {}
  } stack[40];

  // etc 
```

我正在考虑用 struct 替换`SI`struct `std::tuple<int,int,int>`，这是一个更短的声明，带有已经预定义的方便的构造函数和运算符，但有以下缺点：

*   元组元素隐藏在模糊的、实现定义的结构中。即使 Visual Studio 很好地解释和显示了它们的内容，我仍然不能放置依赖于元组元素值的条件断点。
*   访问单个元组字段 ( `get<0>(some_tuple)`) 比访问结构元素 ( `s.l`) 详细得多。
*   按名称访问字段比按数字索引提供更多信息（而且更短！）。

最后两点在某种程度上由`tie`函数解决。考虑到这些缺点，什么是元组的好用例？

**更新**结果是 VS2010 SP1 调试器无法显示以下数组的内容`std::tuple<int, int, int> stack[40]`，但是当它使用结构编码时它可以正常工作。所以这个决定基本上是不费吹灰之力的：如果你必须检查它的值，使用 struct [esp. 对于像 GDB 这样的调试器很重要]。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-21T13:48:00.430

从函数返回多个值是一种简单的方法；

```
std::tuple<int,int> fun(); 
```

结果值可以优雅地使用如下：

```
int a;
int b;
std::tie(a,b)=fun(); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-21T14:03:17.190

好吧，恕我直言，最重要的部分是通用代码。编写适用于各种结构的泛型代码比编写适用于元组的泛型要困难得多。例如，[`std::tie`](http://en.cppreference.com/w/cpp/utility/tuple/tie)您自己提到的函数几乎不可能用于结构。

这使您可以执行以下操作：

*   存储延迟执行的函数参数（例如[这个问题](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)）
*   返回多个参数，无需繁琐（解）打包`std::tie`
*   组合（非等类型）数据集（例如来自并行执行），它可以像`std::tuple_cat`.

问题是，它并不止于这些用途，人们可以扩展这个列表并基于元组编写通用功能，这对于结构来说更难。谁知道呢，也许明天有人会发现用于序列化目的的绝妙用途。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-24T16:06:03.557

我认为 s 的大部分用途`tuple`来自`std::tie`：

```
bool MyStruct::operator<(MyStruct const &o) const
{
    return std::tie(a, b, c) < std::tie(o.a, o.b, o.c);
} 
```

以及此处答案中的许多其他示例。然而，我发现这个示例是最常用的，因为它比以前在 C++03 中的方式节省了很多精力。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-05-26T16:11:04.803

你用过`std::pair`吗？您使用的许多地方`std::tuple`都是相似的，但不限于恰好两个值。

您为元组列出的缺点也适用于 std::pair，有时您想要一种更具表现力的类型，其成员的名称比`first`and更好`second`，但有时您不需要。这同样适用于元组。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-12-25T05:56:50.000

我认为除了一些通用库功能的实现细节之外，元组没有什么用处。

（可能）节省打字并不能抵消结果代码的自文档属性的损失。

将元组替换为仅带走字段的有意义名称的结构，将字段名称替换为“数字”（就像 std::pair 的构思不当的概念一样）。

使用元组返回多个值的自文档化比其他方法要少得多——返回命名类型或使用命名引用。如果没有这种自我记录，如果返回值可以相互转换，则很容易混淆返回值的顺序。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-01-26T01:41:07.083

真正的用例是你有不可命名元素的情况——可变参数模板和 lambda 函数。在这两种情况下，您都可以拥有具有未知类型的未命名元素，因此存储它们的唯一方法是具有未命名元素的结构：std::tuple。在其他所有情况下，您都有已知类型的可命名元素#，因此可以使用普通结构，这是 99% 的最佳答案。

例如，您不应该使用 std::tuple 从具有固定数量的通用输入的普通函数或模板中获得“多次返回”。为此使用真实的结构。真实对象比 std::tuple 千篇一律更“通用”，因为您可以为真实对象提供任何接口。它还将在公共库中为您提供更多的类型安全性和灵活性。

只需比较这两个类成员函数：

```
std::tuple<double, double, double>  GetLocation() const; // x, y, z

GeoCoordinate  GetLocation() const; 
```

使用真正的“地理坐标”对象，我可以提供一个运算符 bool()，如果父对象没有位置，则返回 false。通过其 API，用户可以获得 x、y、z 位置。但重要的是——如果我决定通过在 6 个月内添加时间字段来制作 GeoCoordinate 4D，则当前用户的代码不会中断。我不能用 std::tuple 版本做到这一点。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-21T13:35:30.970

与其他使用元组的编程语言进行互操作，并返回多个值而无需调用者必须理解任何额外的类型。这是我想到的前两个。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-16T21:43:14.823

我无法评论 mirk 的答案，所以我必须单独给出一个答案：

我认为元组被添加到标准中也是为了允许函数式编程。例如，虽然代码像

```
void my_func(const MyClass& input, MyClass& output1, MyClass& output2, MyClass& output3)
{
   // whatever
} 
```

在传统的 C++ 中无处不在，因为它是让一个函数返回多个对象的唯一方法，这对于函数式编程来说是可憎的。现在你可以写

```
tuple<MyClass, MyClass, MyClass> my_func(const MyClass& input)
{
   // whatever
   return tuple<MyClass, MyClass, MyClass>(output1, output2, output3);
} 
```

因此有机会避免副作用和可变性，允许流水线，同时保持函数的语义强度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-11T17:34:37.413

*[F.21](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Rf-out-multi)：要返回多个“out”值，最好返回一个 struct**或 tuple***。

更喜欢在返回值有语义的地方使用命名结构。否则，无名元组在泛型代码中很有用。

例如，如果返回的值是来自输入流的值和错误代码，那么这些值将不会自负。它们的相关性不足以证明有一个专门的结构来容纳两者。不同的是，x 和 y 对宁愿具有类似 Point 的结构。

[我参考](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md)的来源由 Bjarne Stroustrup, Herb Sutter 维护，所以我认为有点值得信赖。

# c# - HttpWebRequest AddRange 方法查询

> ID：10259354
> 
> 赞同：2
> 
> 时间：2012-04-21T13:32:01.693
> 
> 标签：c#, http

在 HttpWebRequest 的 AddRange 方法中，我们可以指定要下载的字节范围。我想知道的是如何指定从某个偏移量到文件末尾的范围。

就像我们不知道文件的长度一样，我们可以在 Request Header 字符串中这样指定

“范围：字节 = 0 -”这意味着，从第一个字节开始到文件末尾。

但是使用 AddRange 方法，如何使用 EOF 的一个偏移值来指定它？

我知道我可以获取内容长度并像这样指定 AddRange(0, ContentLength)。但我问是否有任何方法可以将内容从某个“偏移”值提升到 EOF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:11:26.227

您只需要使用不同于 0 的起始值调用[AddRange](http://msdn.microsoft.com/en-us/library/7fy67z6d%28v=vs.90%29.aspx)方法。

像这样的东西：

```
myHttpWebRequest.AddRange(50,ContentLength); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:14:12.027

您对 AddRange 方法使用正值来获取从偏移量到实体结尾的字节；

```
 request.AddRange(10) 
```

告诉服务器返回除前 10 个字节之外的所有字节。

您可以使用负值，即结束点；

```
 request.AddRange(-10) 
```

告诉服务器返回字节 0 到 10。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:10:19.597

根据[范围规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)，

> 如果 last-byte-pos 值不存在，或者如果该值大于或等于 entity-body 的当前长度，则 last-byte-pos 被认为等于比实体的当前长度小一- 以字节为单位的正文。

换句话说，你`Range: bytes = 0 -`应该工作。事实上，`HttpWebRequest`有一个方法，[AddRange(Int32)](http://msdn.microsoft.com/en-us/library/4ds43y3w.aspx)，它完全符合您的要求。

# php - Pinterest 风格的图片网格

> ID：10259356
> 
> 赞同：0
> 
> 时间：2012-04-21T13:32:22.733
> 
> 标签：php, jquery, mysql, user-interface, grid

我有一个包含图像的 URL 和描述的数据库。我想以类似于[Pinterest](http://pinterest.com/)的形式排列它们。我还想拥有“获取图钉”的功能（当滚动条位于底部时，图片加载）并添加描述并保存它。

我怎么能做到这一点？任何理论想法或教程都会有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T13:36:16.380

查看 [jQuery Masonry 插件](http://masonry.desandro.com/) 和 [Isotope 插件](http://isotope.metafizzy.co/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T13:48:18.497

您可以在 www.maxmedia.com 找到一个很好的 Jquery 和 Masonry 插件示例。我已经为 TYPO3 编写了一个版本（使用 Masonry）。它基本上是一种装箱算法或树图算法，它添加到垂直列和水平行中的 DOM 排序。

# php - Ical VALARM 未注册

> ID：10259358
> 
> 赞同：13
> 
> 时间：2012-04-21T13:32:28.663
> 
> 标签：php, calendar, icalendar

我在过去几天创建了一个构建 .ics 文件（ical）的应用程序

它是用 php 编码的，基本功能可以正常工作（时区、Vevent 等），但是当我将 VALARM 添加到这些 VEVENT 的既不是谷歌日历也不是 Outlook 2010 中时，会将通知添加到他们的日历中

ics 文件的片段：

```
BEGIN:VEVENT
UID:f2f5672145d92702c71504ceccf77167@dyndns.org
DTSTAMP:20120420T174122Z
DTSTART;TZID=Europe/Berlin:20120416T081000
DTEND;TZID=Europe/Berlin:20120416T091000
LOCATION:A102 - Teori Frh.
SUMMARY:Hold: 2.B Kemi B
DESCRIPTION:Lærer: Jeppe Byrialsen Jensen (JBJ) Noter: Lab øvelser om alkoholers blandbarhed
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:Hold: 2.B Kemi B
TRIGGER:-P0DT0H30M0S
END:VALARM
END:VEVENT 
```

编辑：如果你从文件中导入它似乎可以工作，但遗憾的是我需要从网站导入它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T10:35:07.017

我们遇到了同样的问题，但发现`\n`在每行末尾使用的示例代码片段需要使用`\r\n`。

[http://severinghaus.org/projects/icv/](http://severinghaus.org/projects/icv/)上的 iCal 验证器将此突出显示为警告，尽管 iCal 文件可以正常工作，但 Outlook 2010 中未设置提醒警报。

这是一个示例 iCal 文件，它在 Outlook 2010 中打开时完全符合预期，包括将提醒设置为 1 小时（只要换行符为`\r\n`）：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Keeble Smith//NONSGML GETONCOURT.COM//EN
BEGIN:VEVENT
DTSTART:20130514T190000Z
DTEND:20130514T194000Z
LOCATION:Court 2\, Demo Squash Club
DESCRIPTION:View this court booking on getoncourt.com: http://democlub.getoncourt.com/booking-details/dmo3106
SUMMARY:Squash court booking for John Smith - DMO3106
BEGIN:VALARM
TRIGGER:-PT60M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR 
```

还要注意转义的特殊字符。确保在 TEXT 值中转义以下内容（但不是 EOL 实例）：

```
\  to  \\
;  to  \;
,  to  \,
\n to  \\n 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T01:51:38.043

我有同样的问题。我导出了在 Google 日历中创建的日历，VALARM 部分看起来与我导出的完全相同。我觉得这是谷歌方面的问题。我已经看到这个问题在 Stack Overflow 上被问了 2 到 3 次而没有答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T12:22:11.513

could you clarify what you mean by "not registering". For instance I copied your code and imported it in google calendar and it clearly shows Reminder : pop-up 30mn in the property of the event.

Is it that you expect to see an item in the calendar where the alarm should take place. I believe this is not what the RFC5545 implies as a behaviour for VALARM.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-22T03:13:28.723

MS 声明 Outlook 忽略了几个标准警报设置，请参阅：http: [//msdn.microsoft.com/en-us/library/ee624781 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/ee624781(v=exchg.80).aspx)

我发现在 Outlook 2013 中并非如此。我删除了：

操作：显示 描述：提醒

并且警报在 Outlook 2013 中对我有用。

似乎是 MS Outlook 不遵循 RFC5545 标准，也不遵循自己的实现标准的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T14:57:29.173

就其价值而言，这本身并不是一个错误，而是日历实施者选择的与 RFC 兼容的选择。见[http://sourceforge.net/p/dday-ical/discussion/656447/thread/01111137#23c5](http://sourceforge.net/p/dday-ical/discussion/656447/thread/01111137#23c5)

我认为担心的是，如果动作是音频，那么当触发事件发生时，客户端必须运行附件（可能是声音文件）。但是，不能保证声音文件确实是声音文件，而不是更邪恶的东西。

现在，我不知道为什么它会忽略显示动作的 valarms。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-21T13:50:45.597

如果有人仍然对此有疑问。事件前 15 分钟发出警报的 Ics。在 2013 年展望中进行了测试。

```
BEGIN:VCALENDAR
PRODID:-//MyTestProject//EN
VERSION:2.0
BEGIN:VEVENT
SUMMARY;LANGUAGE=sv-se:Room
UID:1af3ef4f-5997-4cf0-bde2-1f8705cfaef1
SEQUENCE:0
BEGIN:VALARM
TRIGGER:-PT15M
DESCRIPTION:Booking
ACTION:DISPLAY
END:VALARM  
CLASS:PUBLIC
DTSTAMP:20190221T132418
DTSTART:20190423T104000
DTEND:20190423T111000  
LOCATION:USA
END:VEVENT
END:VCALENDAR 
```

还有一些c#代码供参考。日期时间等

```
var icalStringbuilder = new StringBuilder();
    icalStringbuilder.AppendLine("BEGIN:VCALENDAR");
    icalStringbuilder.AppendLine("PRODID:-//MyTestProject//EN");
    icalStringbuilder.AppendLine("VERSION:2.0");

    icalStringbuilder.AppendLine("BEGIN:VEVENT");
    icalStringbuilder.AppendLine("SUMMARY;LANGUAGE=sv-se:Room");
    icalStringbuilder.AppendLine("UID:" + Guid.NewGuid());
    icalStringbuilder.AppendLine("SEQUENCE:0");
    icalStringbuilder.AppendLine("BEGIN:VALARM");
    icalStringbuilder.AppendLine("TRIGGER:-PT15M");
    icalStringbuilder.AppendLine("DESCRIPTION:Booking");
    icalStringbuilder.AppendLine("ACTION:DISPLAY");
    icalStringbuilder.AppendLine("END:VALARM");
    icalStringbuilder.AppendLine("CLASS:PUBLIC");
    icalStringbuilder.AppendLine($"DTSTAMP:{DateTime.UtcNow:yyyyMMddTHHmmss}");
    icalStringbuilder.AppendLine($"DTSTART:{starttimeDataTimeFormatVariable:yyyyMMddTHHmmss}");
    icalStringbuilder.AppendLine($"DTEND:{endtimeDataTimeFormatVariable:yyyyMMddTHHmmss}");
    icalStringbuilder.AppendLine("LOCATION:USA");
    icalStringbuilder.AppendLine("END:VEVENT");
    icalStringbuilder.AppendLine("END:VCALENDAR"); 
```

# java - 最大化时调整秋千中框架组件的大小

> ID：10259361
> 
> 赞同：-2
> 
> 时间：2012-04-21T13:32:46.397
> 
> 标签：java, swing, layout, frame

您好请告诉我在摆动中调整框架组件大小的代码，以便它们获得与之前提供的相同的屏幕百分比。

我用过三个面板，一个是主面板，另一个是子面板。主菜单有边框布局。一个子菜单有边框和其他网格布局。当我最大化窗口时，上面板向上移动，底部一个贴在底部我的代码：

```
JPanel mainPane = new JPanel(new BorderLayout()); 
mainPane.add(buttonPane, BorderLayout.SOUTH);
 mainPane.add(chatPane, BorderLayout.NORTH); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:47:29.823

在 Swing 中，您可以使用**布局管理器**来根据需要调整组件的大小。
可能最常用于这种情况的是`BorderLayout`：

```
JFrame myframe = new JFrame("Hello world!");
myframe.setLayout(new BorderLayout());
myframe.setSize(500,500);

//The CENTER component expands whenever the window is resized
myframe.add(new JScrollPane(new JTextArea()), BorderLayout.CENTER);

//The other components don't expand, they shrink to their minimum size
myframe.add(new JButton("Do something"), BorderLayout.SOUTH);
myframe.add(new JButton("Click me"), BorderLayout.NORTH);

myframe.setVisible(true); 
```

我建议您查看[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。这是帮助您入门的绝佳资源。

# delphi - 防止在透明表单上点击

> ID：10259365
> 
> 赞同：3
> 
> 时间：2012-04-21T13:33:34.747
> 
> 标签：delphi, delphi-xe, transparent, tform

我想在表单背景不可见的情况下绘制表单中的函数。创建了一个 TForm，TransparentColor 设置为 True，TransParentColorValue 设置为 clWhite。只需在上面放一个 TImage，在位图上绘制一个函数，将其分配给图像，效果很好。有一个问题。我不能再点击表格了。对表单标题和客户区的任何点击都会导致对底层应用程序的点击。这是由将 TransparentColor 设置为 True 引起的。我怎样才能防止这种“点击通过”？

**更新** 我尝试了 Sertac 的建议，我得到了一些显着的结果。我准备位图如下：

```
 Bitmap.Canvas.Brush.Color := clFuchsia;
   Bitmap.Canvas.FillRect (Rect (0, 0, Bitmap.Width, Bitmap.Height)); 
```

当 Color 设置为 clWhite 和 Forms TransparentColorValue 时，表单完全启用了点击。

都设置为 clBlack，窗体可以移动，但边框不能调整大小，系统按钮不起作用

两者都设置为 clFuchsia，它的行为与普通表单一样。好吧，它现在有效，但也许有人得到了解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:39:08.583

当使用某些特定颜色时，API 的行为似乎很奇怪。白色很明显，黑色的问题少一些。我试过黄色、灰色、纽扣脸、紫红色等。它们看起来很好。

如果有人想在不使用 Delphi 的“透明...”属性的情况下复制问题，这里有一个小片段：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Color: DWORD;
  DC: HDC;
begin
  Color := $00FFFFFF;
  SetWindowLong(Handle, GWL_EXSTYLE,
      GetWindowLong(Handle, GWL_EXSTYLE) or WS_EX_LAYERED );
  SetLayeredWindowAttributes(Handle, Color, 255, LWA_COLORKEY);

  DC := GetWindowDC(Handle);
  SetDCBrushColor(DC, Color);
  FillRect(DC, Rect(10, 10, 100, 80), GetStockObject(DC_BRUSH));
  ReleaseDC(Handle, DC);
end; 
```

注意：如果有人提供带有明确解释的答案，我很乐意删除此答案。

# vim - gvim 自动将所选文本复制到系统剪贴板（与应用程序共享）

> ID：10259366
> 
> 赞同：2
> 
> 时间：2012-04-21T13:33:38.690
> 
> 标签：vim, clipboard

我想知道，如何在 Ubuntu 中启用将选定文本自动复制到“+”寄存器中（在应用程序之间共享剪贴板）？在win XP上，我有

> 设置 guioptions+=a

它可以完美运行，但不能在 Ubuntu 11.10 中运行。

另外，我试过

> 设置剪贴板=unnamedplus,unnamed,autoselect,exclude:cons\|linux.

但没有成功。

请不要提供诸如 `vmap <C-Insert> "+y`鼠标复制/粘贴之类的手动单击解决方案。

测试用例（带有“behave mswin”选项）：

1.  打开gvim

2.  `shift`- `v`，移动光标和`Esc`（在视觉模式下选择行）

3.  转到 Firefox 并单击`ctrl`-`v`或`ctrl`-`Insert`粘贴文本

**解决方案**

在这个[线程](http://groups.google.com/group/vim_dev/browse_thread/thread/1b50de7f4163dbb5/b36e113b3abebad9?lnk=gst&q=vakulenko&pli=1)中，问题得到了解决。

您需要应用 Christian Brabandt 的补丁。

`shift`此外，如果在 ubuntu 中重新编译后使用-粘贴有问题`insert`，可以在 vimrc 中添加：

```
if has("gui_running")
    map <silent> <S-Insert> "+p
    cmap <S-Insert> <C-R>+
    imap <silent> <S-Insert> <Esc>"+pa
endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:50:57.470

`"+y`行得通吗？这不是建议：如果此命令不起作用，您可能会遇到一些潜在的问题，阻碍了简单的解决方案。因此，即使听起来很愚蠢，也需要先对其进行检查。

`set clipboard+=unnamedplus`**如果你的 Vim 版本支持它就**足够了。我的是 7.3.35，但它不起作用（不过，Vim 不会抱怨）。

我不确切知道引入了哪个补丁`unnamedplus`，但您可以`:help 'clipboard'`（使用单引号）获得可用选项列表。如果`unnamedplus`列出，上面的代码片段应该可以解决您的问题。如果它不在那里，您将无法使用它（显然）：是时候重新评估您的“不提供诸如`vmap "+y`鼠标复制/粘贴之类的手动单击解决方案”要求或编译更新版本的 Vim。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-14T20:32:12.857

尝试以下操作：

```
set guioptions+=P 
```

解释：

TLDR：`a`将文本放入`"*`寄存器。`P`将文本放入`"+`寄存器

从`:help guioptions`

> 'a' 自动选择：如果存在，那么无论何时启动 VISUAL 模式，或扩展可视区域，Vim 都会尝试成为窗口系统全局选择的所有者。这意味着可视化突出显示的文本可用于粘贴到其他应用程序以及 Vim 本身。当可视模式结束时，可能是由于对文本的操作，或者当应用程序想要粘贴选择时，突出显示的文本会自动拉到“*选择寄存器中。因此，选择后仍然可以粘贴到其他应用程序中VISUAL 模式已经结束。如果不存在，那么 Vim 将不会成为窗口系统的所有者
> 
> 'P' 与自动选择类似，但使用 "+ 寄存器而不是 "* 寄存器。

# jsp - 在 liferay portlet 中使用会话时出现 sql.exception 错误

> ID：10259367
> 
> 赞同：0
> 
> 时间：2012-04-21T13:33:39.707
> 
> 标签：jsp, liferay

我在使用会话时遇到了一些问题。在 view.jsp 中，我得到用户名和密码并将它们传递给 portlet 类。然后我从数据库中获取用户信息并将它们保存在会话中，然后使用“actionResponse.setRenderParameter("jspPage","/patientInfo.jsp")" 命令转到 patientInfo.jsp。我获取用户信息并使用以下代码打印它们：

```
<%  
ResultSet comments = (ResultSet)portletSession.getAttribute("comments");
ResultSet patientInfo = (ResultSet)portletSession.getAttribute("patientInfo");  
patientInfo.next();         
%>
<table>
<tr>
    <th><strong>Patient Name</strong></th>
    <th><strong>Insuline dose</strong></th>
</tr>
<tr>
    <td class="info"><%=patientInfo.getString("FirstName") + patientInfo.getString("LastName")%></td>
    <td class="info"><%=Integer.toString(patientInfo.getInt("InsulinDose"))%></td>
</tr> 
```

在此页面中，有一个指向 patientProfile.jsp 的链接：

```
<portlet:renderURL var="patientProfileURL">
    <portlet:param name="jspPage" value="/patientProfile.jsp" />
</portlet:renderURL>

<a href="<%= patientProfileURL%>">Edit Profile</a></p> 
```

到目前为止一切正常。但是，当我点击 PatientProfile.jsp 中的 Back 链接以使用以下代码返回到 patientInfo.jsp 时，堆栈跟踪中出现“java.SQL.Excqption：结果集结束后”错误，并且浏览器上出现“portlet 暂时不可用”错误：

```
<portlet:renderURL var="patientInfoURL">

    <portlet:param name="jspPage" value="/patientInfo.jsp" />

</portlet:renderURL>

<p><a href="<%= patientInfoURL %>">Back</a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:41:46.710

结果集和某些 JDBC 驱动程序支持的所有内容在会话中保存是一件坏事。通常，他们需要后端的数据库连接 - 在第一个事务（和页面呈现）完成后，该连接将被重用于下一个事务，因此您会看到异常。

您应该将您拥有的对象（无论如何如何从数据库中检索它们？普通/纯 jdbc 访问？）复制到一些没有任何数据库连接的业务/数据传输对象。

# java - Imagemagick 条件调整大小

> ID：10259368
> 
> 赞同：0
> 
> 时间：2012-04-21T13:33:41.270
> 
> 标签：java, imagemagick, dynamic-resizing

我只想在图像尺寸大于 300X100 尺寸时缩小图像，例如：

*   如果图像是 250X200 尺寸，我想要 250X100 尺寸
*   如果图像是 420X90 我想要 300X90
*   如果高度或宽度大于 300X100 那么我只需要收缩它
*   否则使用相同的高度或宽度

如何在我的 Java 程序中编写这种类型的条件 ImageMagick 命令？我是这样写的：

```
convert image.jpg -resize 387x97^> image_resized.jpg. 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:45:25.923

我认为这会起作用

```
convert image.jpg -resize 300x100 image_resized.jpg. 
```

# php - PHP 中的平均睡眠间隔

> ID：10259373
> 
> 赞同：2
> 
> 时间：2012-04-21T13:34:18.097
> 
> 标签：php, time, sleep, average, period

我需要从以下数据中获取平均睡眠间隔：

*   22:00-06:00
*   00:00-08:00
*   02:00-10:00

=>**预期**：00:00-08:00

*   22:00-06:00
*   00:00-08:00
*   02:00-10:00
*   04:00-08:00

=>**预计**：01:00-08:00

问题是在午夜前后振荡，部分在 00:00 以下，部分在 00:00 以上。简单的意思是 22+00+02+04 不起作用。我可以计算午夜的次数（在这种情况下为 3 次），如果超过午夜之前的次数，我应该添加 25 次共同补偿。*但这对于那些晚上工作并在 8 点到 14 点左右睡觉的人来说不算数*！

我的理论是：首先，*我*需要找到峰值，比如最常去的区域（例如，9-10 有 5 条记录，10-11 有 3 条等），然后我可以决定共同补偿边界值通过增加 24 小时。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:39:00.110

考虑到与午夜的相对差异怎么样？结果将是 (-2+0+2+4)/4 = 00:45

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:38:08.690

确定一个你可以说的下限

> 好吧，人们一天中的这个时间不会睡觉，如果我得到这个时间，那一定意味着他们整晚都在工作，现在才睡觉

如果时间低于该限制，则在开始和结束时增加 24 小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T13:41:50.413

假设这个人的睡眠时间不超过 24 小时，然后做一个这样计算的方法（伪代码）：

```
calculateSleepTime(sleepTime, wakeupTime) {
    if (sleepTime > wakeupTime) {
        return (24 - sleepTime) + wakeupTime;
    } else {
        return wakeupTime - sleepTime;
    }
}

averageSleepTime(sleepTimesArray) {
    totalSleptTime = 0;
    totalTimesSlept = 0;

    foreach (oneSleepTime in sleepTimesArray) { 
        totalTimesSlept++;
        totalSleptTime += calculateSleepTime(oneSleepTime);
    }

    return totalSleptTime / totalTimesSlept;
} 
```

获得平均睡眠时间后，计算平均睡眠时间或平均醒来时间，然后进行加法/减法以找到您的间隔。对此的替代方法是找到平均睡眠时间和平均唤醒时间（考虑相对于午夜时间）。

# python - Python 3 中的 __add__ 方法

> ID：10259374
> 
> 赞同：0
> 
> 时间：2012-04-21T13:34:22.483
> 
> 标签：python, python-3.x, queue

所以我在 python 3 中制作了我的第一个程序，其中运算符重载，我被**加**（+）运算符卡住了。

```
def __add__(self, newMember):
    if(isinstance(newMember, Queue)):
       tempList=self.myQueue[:] # makes a copy
       tempList.extend(newMember.myQueue)
       return Queue(tempList)

def __str__(self):
    if not self.myQueue:
        string="."
    else:
        string=""
        for x in self.myQueue:
            string=string+str(x)
            if(x<len(self.myQueue)):
                string=string+", "
            else:
                string=string+"."
    return string 
```

基本上我正在创建一个 Queue 类（我知道已经存在这样的一个），然后通过键入 c=c1+c2 连接两个 Queue 对象。但是当我打印（c）时，它弄乱了“，”和“。”。无法理解有什么问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:13:54.947

要回答您的第二个问题（这可能应该是关于 SO 的单独问题，而不是编辑这个问题）：

`if(x<len(self.myQueue)):`正在检查字符串的值是否小于列表的整数长度。这没有任何意义，而且永远都是假的。

您可以将整个方法重写为：

```
def __str__(self):
    return ', '.join(str(x) for x in self.myQueue) + '.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:51:21.083

在您的代码中，您设置`tempList`为`self.myQueue`，然后对其进行修改。这会更改*两个*队列。您要复制`myQueue`，而不是共享参考。

使用 tmplist = queue，两个变量都指向***同一个***对象。也许这将有助于理解：

```
>>> queue = []
>>> tmplist = queue
>>> tmplist.append(1)
>>> tmplist
[1]
>>> queue
[1]
>>> tmplist = queue[:] #make a copy
>>> tmplist.append(1)
>>> tmplist
[1, 1]
>>> queue
[1] 
```

# jqgrid - jqGrid多行选择高级

> ID：10259375
> 
> 赞同：0
> 
> 时间：2012-04-21T13:34:24.423
> 
> 标签：jqgrid

我想要 jqGrid 中的以下能力。当用户单击网格中的复选框时，会选择一行。当用户随后单击“控制键”并选择复选框时，用户随后可以选择更多行。然后，当用户单击复选框并且如果选择了当前行，则选择当前行。jqGrid可以做到这一点吗？但是，单击单元格时不会发生任何事情。复选框中应该只有事件可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:51:13.083

是的，这应该是可能的。看一下[复选框选择](http://www.trirand.com/blog/jqgrid/jqgrid.html)的正常示例- 它让您了解其中的一部分。但是，它并没有真正按照您期望的方式处理 SHIFT 选择内容。

我做了一些搜索，在 jqGrid 支持网站上找到了这段代码：

```
function multiSelectHandler(sid, e) {
    var grid = $(e.target).closest("table.ui-jqgrid-btable");
    var ts = grid[0], td = e.target;
    var scb = $(td).hasClass("cbox");
    if ((td.tagName == 'INPUT' && !scb) || td.tagName == 'A') {
        return true;
    }
    var sel = grid.getGridParam('selarrrow');
    var selected = $.inArray(sid, sel) >= 0;
    if (e.ctrlKey || (scb && (selected || !e.shiftKey))) {
        grid.setSelection(sid,true);
    } else {
        if (e.shiftKey) {
            var six = grid.getInd(sid);
            var min = six, max = six;
            $.each(sel, function() {
                    var ix = grid.getInd(this);
                    if (ix < min) min = ix;
                    if (ix > max) max = ix;
                });
            while (min <= max) {
                var row = ts.rows[min++];
                var rid = row.id;
                if (rid != sid && $.inArray(rid, sel)<0) {
                    grid.setSelection(row.id, false);
                }
            }
        } else if (!selected) {
            grid.resetSelection();
        }
        if (!selected) {
            grid.setSelection(sid,true);
        } else {
            var osr = grid.getGridParam('onSelectRow');
            if ($.isFunction(osr)) {
                osr(sid, true);
            }
        }
    }
} 
```

要使用它，您应该能够将 beforeSelectRow 处理程序设置为此函数。前任。像这样的东西：

```
$("#gridid").jqGrid({
// Rest of code to configure grid
beforeSelectRow: multiSelectHandler,
// Other handlers/configuration
}); 
```

# ruby-on-rails-3 - 将 pjax 与特定于页面的 javascript 和 css 一起使用

> ID：10259385
> 
> 赞同：4
> 
> 时间：2012-04-21T13:35:30.423
> 
> 标签：ruby-on-rails-3, pjax

我想在我的应用程序中使用 pjax 并且基本上可以正常工作，但我不知道如何将它与特定于页面的 JS 和 CSS 代码一起使用。

我通常每页有一个应用程序范围和一个特定于页面的 JS 和 CSS 文件。

为了避免几个特定于页面的 JS 文件之间发生冲突，我能想到的唯一解决方案是在加载另一个页面时手动取消绑定所有特定于页面的事件处理程序，但这会变得非常复杂，因为我必须取消绑定*所有*事件处理程序在任何特定于页面的代码中使用。

对于 CSS，解决方案将是增加特异性，例如通过为所有选择器添加特定于页面的 ID 前缀，这当然是可能的，但在我看来不是最优雅的解决方案。

有没有人找到将 pjax 与特定于页面的 JS 和 CSS 文件一起使用的优雅解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T23:46:12.933

我一直在研究 CSS 和 JS，包括.. 我已将代码发布到 github pjax 页面。看看[通过 PJAX 包含 CSS 和 JS 文件](https://github.com/defunkt/jquery-pjax/pull/232)

# scheme - Scheme中递归和迭代计算积分

> ID：10259388
> 
> 赞同：0
> 
> 时间：2012-04-21T13:35:39.633
> 
> 标签：scheme, integral

我正在尝试为在 Scheme 中的集成创建递归和迭代函数。到目前为止，我还没有成功。如何在 Scheme 中计算积分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:38:27.223

你想用什么方法计算什么样的积分？如果对您有帮助，请在 SICP 书的[1.3.1 节](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-12.html#%_sec_1.3.1)中解释如何使用 Scheme 过程近似积分。同样在同一本书中，在练习 1.29 中，它解释了如何使用辛普森法则计算积分，这是一种更准确的数值积分方法 - 这里有该练习的解决[方案](https://codereview.stackexchange.com/q/1538/9192)。

# video - 'keyint infinite' 是否使用 crf 和 mb-tree 改善整体压缩？

> ID：10259390
> 
> 赞同：0
> 
> 时间：2012-04-21T13:35:53.057
> 
> 标签：video, encoding, x264

在阅读了[内部刷新的](http://mewiki.project357.com/wiki/X264_Settings#intra-refresh)作用后，我有点困惑。我正在为 YouTube 编码，YouTube 无论如何都会重新编码视频文件，所以我想“为什么不删除所有这些沉重的 IDR 帧？” 我只想尽可能地压缩我的视频，启用所有可以帮助我获得较小文件大小但仍保持高质量的东西。

我曾经用无损 QP 编码测试过一些东西，但我唯一能做到的就是[merange](http://mewiki.project357.com/wiki/X264_Settings#merange)。这是我的 x264 设置的粘贴：[Pastebin。](http://pastebin.com/0vziKdAc)

我想在保持视觉无损质量的同时实现最高压缩。（使用大约 10 - 13 和 merange 32 的 crf 值）

谁能给我关于如何超级压缩我的视频的建议（不触及 crf 值！）。我也想知道这是否属实，keyint 无限减少了整体压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:23:16.287

说实话，你是在浪费时间。只需使用`--crf`,`--preset`和可能`--tune`。预设是由开发人员制作的，因此用户不必担心令人眼花缭乱的选项组合，除非您知道自己在做什么，否则不建议覆盖预设选项。我相信你会在#x264 IRC 频道上得到类似的回复。一般用法是：

1.  使用你有耐心的最慢预设（*安慰剂被认为是一个笑话，因为它完全是浪费时间，与非常**慢*的时间折衷相比，最多有 1% 的帮助）。有关`x264 --fullhelp`可用`--preset`和`--tune`选项的列表，请参阅。

2.  使用仍然可以为您提供可接受质量的最高 CRF 值。除非您使用的是 10 位 x264，否则 10-13 可能是过大的，但您没有说明这一点。就我上次检查的视觉质量而言，8 位和 10 位 x264 的 CRF 值并不“相等”。你能分辨出13和18的区别吗？

3.  将这些设置用于您的其余视频。

# ruby-on-rails - “rails generate plugin”给出“找不到生成器插件”。

> ID：10259391
> 
> 赞同：2
> 
> 时间：2012-04-21T13:36:05.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我找不到明确的资源告诉我如何生成 rails 3 插件。当我跑

```
rails generate plugin [your_plugin_name] 
```

我收到此错误找不到生成器插件。我认为生成插件骨架的命令与此不同！但它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T22:42:00.700

好的，插件应该像这样在您的供应商/插件文件夹中生成“rails plugin new [your_plugin_name]”。

也不赞成以这种方式制作插件，请阅读[如何为 RAILS 3.2 转换简单的 RAILS 2.3 样式](http://code.coneybeare.net/how-to-convert-simple-rails-23-style-plugins)插件，以免使用已弃用的方法！

祝你好运...

# node.js - 无法使用 sockets.io 从客户端发送/发送到 NodeJS 服务器

> ID：10259397
> 
> 赞同：0
> 
> 时间：2012-04-21T13:36:59.517
> 
> 标签：node.js, socket.io

我在这里束手无策，因此非常感谢任何帮助。

我正在尝试通过 socket.io 从我的客户端（网页）向我的 Node.JS 服务器发送或发出消息。这是在作为 localhost 运行的 Windows 7 上。

确切的问题是：

*   我可以很好地从服务器向客户端发送消息。
*   从客户端向服务器发送消息不起作用:(

服务器代码：

```
// create http server
var app = require('http').createServer(httpHandler);
// socket.io
var io = require('socket.io').listen(app);

var port = 8080;

app.listen(port);
console.log('Server running at http://127.0.0.1:' + port);

// socket connection handler
io.sockets.on('connection', function (client) {
    // this works great:    
    client.emit('text_msg', {msg: 'Welcome you are now connected.'});

    // plain message - this never works :(
    io.sockets.on('message', function(data){
        console.log("*************************** message : " + data.txt);
    });
}); 
```

这是一些客户端代码：

```
<script src="/socket.io/socket.io.js"></script>

...snip...

var socket = io.connect( 'http://localhost' );
socket.emit('message', {txt:"test"});

socket.on('text_msg', function (data) {
    alert( data.msg );
}); 
```

我试过以下浏览器：

*   铬 18 (Windows 7)
*   火狐 11 (Windows 7)
*   互联网浏览器 9 (Windows 7)

从 NodeJS 输出中，我可以看到 Chrome 和 Firefox 都使用 Websockets，而 IE9 使用“htmlfile”。

NodeJS 是 0.6.15 版本

npm 列表如下所示：

```
├── node-static@0.5.9
└─┬ socket.io@0.9.6
  ├── policyfile@0.0.4
  ├── redis@0.6.7
  └─┬ socket.io-client@0.9.6
    ├─┬ active-x-obfuscator@0.0.1
    │ └── zeparser@0.0.5
    ├── uglify-js@1.2.5
    ├─┬ ws@0.4.13
    │ ├── commander@0.5.2
    │ └── options@0.0.3
    └── xmlhttprequest@1.2.2 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T00:28:59.260

**改变：**

```
io.sockets.on('message', function(data){
console.log("*************************** message : " + data.txt);
}); 
```

**到：**

```
client.on('message', function(data){
console.log("*************************** message : " + data.txt);
}); 
```

你打电话时

```
io.sockets.on('connection', function (client) 
```

您正在定义“客户端”，它是客户端发出的套接字的当前命名空间。

# node.js - Node.js：需要本地人

> ID：10259401
> 
> 赞同：1
> 
> 时间：2012-04-21T13:37:55.490
> 
> 标签：node.js, module, require, locals

## 我想要的是

是否可以将本地人传递给所需的模块？例如：

```
// in main.js
var words = { a: 'hello', b:'world'};
require('module.js', words);

// in module.js
console.log(words.a + ' ' + words.b) // --> Hello World 
```

我问这个是因为在 PHP 中，当您需要或包含时，包含另一个文件的文件会继承它的变量，这在某些情况下非常有用，如果这也可以在 node.js 中完成，我会很高兴。

## 我尝试过但没有奏效的方法

```
 var words = { a: 'hello', b:'world'};
 require('module.js', words); 
```

* * *

```
 var words = { a: 'hello', b:'world'};
 require('module.js'); 
```

这两个都给出了`ReferenceError: words is not defined`何时`words`被调用`module.js`

那么没有全局变量有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:42:47.970

您要做的是使用参数导出它，以便您可以将变量传递给它。

`module.js`

```
module.exports = function(words){
    console.log(words.a + ' ' + words.b);
}; 
```

`main.js`

```
var words = { a: 'hello', b:'world'};
// Pass the words object to module
require('module')(words); 
```

您也可以在需要中去掉 .js :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:53:14.733

问题是：你想达到什么目标？

如果您只想导出静态函数，可以使用[tehlulz 的答案](https://stackoverflow.com/questions/10259401/node-js-require-locals/10259444#10259444)。如果你想在*export*属性中存储一个对象并从 require-caching 中受益，node.js 提供的（脏）方法对你来说是全局的。我想这就是你尝试过的。

在 Web 浏览器上下文中使用 JavaScript，您可以使用该`window`对象来存储全局值。Node 只为所有模块提供了一个全局`process`对象：对象：

`main.js`

```
process.mysettings = { a : 5, b : 6};
var mod = require(mymod); 
```

`mymod.js`

```
module.exports = { a : process.mysettings.a, b : process.mysettings.b, c : 7}; 
```

或者，如果您对导出缓存不感兴趣，您可以执行以下操作：

`main.js`

```
var obj = require(mymod)(5,6); 
```

`mymod.js`

```
module.exports = function(a,b){
 return { a : a, b : b, c : 7, d : function(){return "whatever";}};
}; 
```

# android - 使用 proguard 后 admob 的 adview 的 InflateException

> ID：10259405
> 
> 赞同：1
> 
> 时间：2012-04-21T13:38:28.363
> 
> 标签：android, admob, inflate-exception

我是 admob 的新手。我使用 Android froyo，并添加`Adview`到我的 main.xml 中，如下所示：

```
<com.google.ads.AdView
        xmlns:googleads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        googleads:adSize="BANNER"
        googleads:adUnitId="a14ed7ed1b71bc0" /> 
```

所以当我尝试使用 adb 部署我的应用程序时，一切正常。但是当我使用 proguard 并在手机上安装 apk 时，应用程序一开始就崩溃了。

Logcat 说：

> 引起：android.view.InflateException：二进制 XML 文件第 10 行：膨胀类 com.google.ads.AdView 时出错

所以我在这里关注了一些帖子，上面说将 lib app 文件夹重命名为 libs 但没有结果。我添加了

到我的清单应用程序。但没有结果。admpob 4.3.1 是否与 froyo 兼容？我真的不知道是什么问题。请帮助 ciao

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:10:42.170

在 proguard 手册中，给出了一些示例。那里说

> 如果您使用其他 Google API，则还必须指定这些 API，例如：
> 
> -libraryjars /usr/local/android-sdk/add-ons/google_apis-7_r01/libs/maps.jar

尝试在 proguard 配置文件中以这种方式指定 admob 库路径。

[链接到 Proguard 手册](http://proguard.sourceforge.net/index.html#manual/examples.html)

## 更新

您是否已将 jar 添加到构建路径？
[看看这是否有帮助](http://android.okhelp.cz/noclassdeffounderror-com-google-ads-adview-adt-17/)

# linux - 使用 awk 或其他转换最后一列中的日期格式

> ID：10259407
> 
> 赞同：2
> 
> 时间：2012-04-21T13:38:48.817
> 
> 标签：linux, bash, sed, awk

我在这样的文件中有数据......

```
405,,,405,15.4,0,04/21/12 14:13:29
402,,,402,15.4,0,04/21/12 14:13:37
404,,,404,15.5,0,2012/04/21 14:14:05
404,,,404,15.4,0,2012/04/21 14:14:11
403,,,403,15.4,0,2012/04/21 14:14:17 
```

我想将最后一列转换为 YYYY/MM/DD hh:mm:ss 格式的日期。

有些行已经采用这种格式，因此应该忽略它们。

我尝试了以下 awk 命令，但它似乎很慢，有时会抛出错误

```
awk -F ',' '{ ("date -d \""$7"\" \"+%Y/%m/%d %T\"") | getline $7; print }' MyFile 
```

这不必在 awk 中完成。我在标准 Debian 命令行中有任何可用的实用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T13:42:06.287

我会为此使用 sed 而不是 awk。像这样的东西：

```
sed 's@,\(..\)/\(..\)/\(..\) @,20\3/\1/\2 @' 
```

编辑问题之前的旧答案：

您可以使用`tr : /`将冒号转换为斜杠，或者您可以让 awk 直接进行替换。但是为什么你会认为 HH/MM/SS 是一种有效的格式，这超出了我的理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:07:32.333

既然你已经标记了你的问题[linux](/questions/tagged/linux "显示标记为“linux”的问题")，我假设你有`gawk`它有一些内置的时间函数：

```
awk --re-interval -F, '
    $7 !~ /[[:digit:]]{4}\// {
        split($7, a, "[/ :]");
        strftime("%Y/%m/%d %H:%M:%S", 
            mktime("20" a[3] " " a[1] " " a[2] " " a[4] " " a[5] " " a[6]))}'
    }
    {
        print
    }' 
```

# ms-access - VB中等于或小于x的日期

> ID：10259409
> 
> 赞同：2
> 
> 时间：2012-04-21T13:39:11.563
> 
> 标签：ms-access, vba, if-statement

我原以为`Form!MyForm!Date >= #1/12/2010#`会做到这一点，但它似乎没有奏效。

有人可以阐明我做错了什么吗

完整代码：

```
If (Forms!MyForm!DateSubmitted >= #1/01/2012#) Then
MsgBox ("Past due date")
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T08:18:06.667

使用 CDate 函数至少可以确保您正在比较两个日期：

```
If (CDate(Forms!MyForm!DateSubmitted) >= #1/1/2012#) Then
    MsgBox ("Past due date")
End If 
```

如果您的输入字符串不是有效的日期字符串，您将收到类型错误，但您会知道您没有将日期类型与日期进行比较。

另外，检查您比较的有效日期：

```
Form!MyForm!Date >= #1/12/2010# '2010 
```

对比

```
Forms!MyForm!DateSubmitted >= #1/01/2012# '2012 
```

# macvim - Macvim - 如何防止选项卡名称被缩写？

> ID：10259413
> 
> 赞同：3
> 
> 时间：2012-04-21T13:39:42.613
> 
> 标签：macvim

在 macvim 中，是否可以使选项卡名称全长（即不缩短？）

例如，如果我打开`a-very-really-quite-long-file-name.txt`，它在选项卡中的名称将缩短为`a-very-really-q...`。如果您打开几个以长名称打开的文件，这会令人沮丧，这在开始时是相似的。（在控制台 vim 中，不会发生这种缩短）。

是否有防止这种缩短的选项或设置？

（我的选项`guitablabel=%M%t`是`%t`文件名（文档似乎没有提到缩短），我使用的是 macvim 7.3。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:53:17.703

[我在http://code.google.com/p/macvim/wiki/UserDefaults](http://code.google.com/p/macvim/wiki/UserDefaults)找到了一个不错的解决方案
您可以使用在终端中输入以下代码来使标签标签更宽（$ 符号是提示，不要输入它们） ：

```
$ defaults write org.vim.MacVim MMTabMinWidth 200
$ defaults write org.vim.MacVim MMTabOptimumWidth 300
$ defaults write org.vim.MacVim MMTabMaxWidth 400 
```

您可以根据需要更改数字（即像素宽度）。这不是一个完美的解决方案——标签标签的宽度不是动态调整到文件名长度的。因此，如果您打开一个非常长的文件名，即使您设置的超宽设置也太宽，您仍然会得到缩写和点。

如果有人知道更好的解决方案，我很想听听......

# iphone - NSString 中字符的索引

> ID：10259414
> 
> 赞同：1
> 
> 时间：2012-04-21T13:39:54.543
> 
> 标签：iphone, objective-c, nsstring

我有`NSString *string = @"Helo";`和`NSString *editedString = @"Hello";`。如何查找更改字符或字符的索引（例如这里是`@"l"`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:43:28.530

开始遍历一个字符串并将每个字符与另一个字符串中相同索引处的字符进行比较。比较失败的地方是改变字符的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T16:07:54.967

我已经在 NSString 上编写了一个类别，可以满足您的要求。我使用我的 StackOverflow 用户名作为类别方法的后缀。这是为了阻止未来不太可能与同名方法发生冲突。随意改变它。

首先是接口定义`NSString+Difference.h`：

```
#import <Foundation/Foundation.h>

@interface NSString (Difference)

- (NSInteger)indexOfFirstDifferenceWithString_mttrb:(NSString *)string;

@end 
```

和实现“NSString+Difference.m”：

```
#import "NSString+Difference.h"

@implementation NSString (Difference)

- (NSInteger)indexOfFirstDifferenceWithString_mttrb:(NSString *)string; {

    // Quickly check the strings aren't identical
    if ([self isEqualToString:string]) 
        return -1;

    // If we access the characterAtIndex off the end of a string
    // we'll generate an NSRangeException so we only want to iterate
    // over the length of the shortest string
    NSUInteger length = MIN([self length], [string length]);

    // Iterate over the characters, starting with the first
    // and return the index of the first occurence that is 
    // different
    for(NSUInteger idx = 0; idx < length; idx++) {
        if ([self characterAtIndex:idx] != [string characterAtIndex:idx]) {
            return idx;
        }
    }

    // We've got here so the beginning of the longer string matches
    // the short string but the longer string will differ at the next
    // character.  We already know the strings aren't identical as we
    // tested for equality above.  Therefore, the difference is at the
    // length of the shorter string.

    return length;        
}

@end 
```

您将按如下方式使用上述内容：

```
NSString *stringOne = @"Helo";
NSString *stringTwo = @"Hello";

NSLog(@"%ld", [stringOne indexOfFirstDifferenceWithString_mttrb:stringTwo]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:38:01.360

您可以使用`-rangeOfString:`. 例如，`[string rangeOfString:@"l"].location`。该方法也有几种变体。

# java - JVM崩溃，怎么了？

> ID：10259417
> 
> 赞同：-1
> 
> 时间：2012-04-21T13:40:12.440
> 
> 标签：java, jvm

我遇到了 JVM 崩溃问题，下面是转储内容。什么是 RevokeBias？有人会帮助我吗？

**错误**

```
VM_Operation (0x00007f7129fbb450)：RevokeBias，模式：安全点，由线程 0x00007f712452d000 请求
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T12:48:24.220

您可能会遇到 Java 错误数据库中报告的此错误：[JDK-7116986 : Crash in SafepointSynchronize::begin()](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7116986)。不幸的是，还没有解决方案或解决方法。

# matlab - 在 Matlab 中使用输入对话框

> ID：10259420
> 
> 赞同：0
> 
> 时间：2012-04-21T13:40:21.183
> 
> 标签：matlab

假设我有一个类似这样的函数：

```
function [ c ] = input_args(m)

for i = 1 : m+1

    c{i} = inputdlg('Enter next m value');

end

end 
```

现在我想更改它，以便在 for 循环的第 i 个阶段对用户的指令说类似“输入第 i 个 m 值”，其中`i`是 for 循环中的更改索引。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:47:46.080

字符串是一个字符数组，因此您可以像任何其他数组一样连接它们。您需要使用`num2str`将数字转换为可打印字符。

```
inputdlg(['Enter the ' num2str(i) 'th m value']); 
```

更通用的解决方案是使用[sprintf](http://www.mathworks.co.uk/help/techdoc/ref/sprintf.html)格式化您的字符串；用 sprintf 做同样的事情，你会使用：

```
inputdlg(sprintf('Enter the %dth m value', i)); 
```

您可能会发现它更具可读性（并允许您使用标准 fprintf 格式化选项）。

# android - Activity 中 openFileOutput 的 NullPointerException

> ID：10259421
> 
> 赞同：2
> 
> 时间：2012-04-21T13:40:26.623
> 
> 标签：android, nullpointerexception

我有一个带有 ImageView 的 Activity，如果它是空的并被单击，它应该从 Internet 加载图像并将其保存到内部存储中。所以活动看起来像这样：

```
public class PlaceCreate extends Activity {
Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.create);
  context = this;

  ImageView img = (ImageView) findViewById(R.id.imageView);
  img.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        EditText edit = (EditText)findViewById(R.id.editTextName);
        Download(edit.getText().toString());
    }
  });
}

private boolean Download(String Name)
{
  try
  {
    URL u = new URL("http://example.com/img.png");
    HttpURLConnection c = (HttpURLConnection)u.openConnection();
    c.setRequestMethod("GET");
    c.setDoOutput(true);
    c.connect();
    FileOutputStream f = context.openFileOutput(Name, Context.MODE_PRIVATE);
    InputStream in = c.getInputStream();
    byte[] buffer = new byte[1024];
    int len1 = 0;
    while((len1 = in.read(buffer)) > 0 )
    {
      f.write(buffer, 0, len1);
    }
    f.close();

    FileInputStream is = openFileInput(Name);
    Bitmap bitmap = BitmapFactory.decodeStream(is);
    is.close();
    ImageView img = (ImageView) findViewById(R.id.imageViewPlan);
    img.setImageBitmap(bitmap);
  }
  catch(IOException e)
  {
    return false;
  }
  return true;
}} 
```

问题是我得到 NullPointerException 与`openFileOutput`. 我发现了几个类似的问题，但所有答案都暗示这`null`是一个缺失的上下文。因为在这种情况下它是一个活动，它显然有一个上下文（`this`），它不为空。我试图打电话`openFileOutput`（`this`暗示）并通过`context`会员。任何一种方法都失败了。我还尝试将`v.getContext()`from `onClick`into`Download`作为附加参数传递，并且该值不为 null，但也产生了相同的异常。（如果它很重要，则请求的文件的名称是有效的文件名，例如“abc”。）

有人可以对此有所了解吗？

这是堆栈的示例：

```
04-22 00:45:10.659: W/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-22 00:45:10.909: E/AndroidRuntime(330): FATAL EXCEPTION: main
04-22 00:45:10.909: E/AndroidRuntime(330): java.lang.NullPointerException
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.app.ContextImpl.openFileOutput(ContextImpl.java:420)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.content.ContextWrapper.openFileOutput(ContextWrapper.java:158)
04-22 00:45:10.909: E/AndroidRuntime(330):  at com.example.scanner.PlaceCreate.Download(PlaceCreate.java:93)
04-22 00:45:10.909: E/AndroidRuntime(330):  at com.example.scanner.PlaceCreate.access$0(PlaceCreate.java:84)
04-22 00:45:10.909: E/AndroidRuntime(330):  at com.example.scanner.PlaceCreate$3.onClick(PlaceCreate.java:67)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.view.View.performClick(View.java:2485)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.view.View$PerformClick.run(View.java:9080)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.os.Handler.handleCallback(Handler.java:587)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
04-22 00:45:10.909: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-22 00:45:10.909: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
04-22 00:45:10.909: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:507)
04-22 00:45:10.909: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-22 00:45:10.909: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-22 00:45:10.909: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method) 
```

这里还有一些发现。根据堆栈，错误发生在`ContextImpl`文件内部，我看到`parent`该方法内部的局部变量为空。这是代码：

```
public FileOutputStream openFileOutput(String name, int mode)
  throws FileNotFoundException {
  final boolean append = (mode&MODE_APPEND) != 0;
  File f = makeFilename(getFilesDir(), name);
  try {
     FileOutputStream fos = new FileOutputStream(f, append);
     setFilePermissionsFromMode(f.getPath(), mode, 0);
     return fos;
  } catch (FileNotFoundException e) {
 }

 File parent = f.getParentFile();
 parent.mkdir();
 FileUtils.setPermissions(
     parent.getPath(),
     FileUtils.S_IRWXU|FileUtils.S_IRWXG|FileUtils.S_IXOTH,
     -1, -1);
 FileOutputStream fos = new FileOutputStream(f, append);
 setFilePermissionsFromMode(f.getPath(), mode, 0);
 return fos;
} 
```

所以现在的问题是如何确保调用`f.getParentFile()`不会返回 null，为什么它有时会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:17:40.810

> 问题是我在 openFileOutput 的行上得到 NullPointerException。

您正在`NullPointerException`获得. *_* `openFileOutput()`这就是为什么您需要为 SO 提供堆栈跟踪，而不仅仅是提供异常名称。*行上*的异常与行*触发*的异常不同，尤其是`NullPointerException`.

根据我对`openFileOutput()`on的阅读[`ContextImpl`](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ContextImpl.java)，要么：

*   `Name`是`null`, 或
*   你有一个非常奇怪的`context`，或者
*   您正在运行的 Android 版本还有一些其他可能的问题，这些问题在当前的实现中不可见`openFileOutput()`

我将从`context`完全删除开始，因为您在其中`Activity`并且不需要它。然后，放入一些`Log`语句或设置断点，看看是什么`Name`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:21:53.503

这被证明是作为 SDK 的一部分安装在这里的 Android 2.3.3 模拟器的一个功能。如果我使用带有 Android 2.3.3 的真实设备，则不会出现此问题。如果我使用 Android 4.0.3 模拟器，代码也可以正常工作。因此，如果发生一些奇怪的事情，在另一个环境中进行测试可以提供一些启示。我希望这可以帮助其他人解决类似的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:34:53.077

我在运行 ICS 的华硕 TF101 上遇到了同样的问题——即一个真正的设备而不是一个模拟器。这很令人烦恼，因为事实证明这个问题与底层文件夹的 Linux 写权限有关。

我一直在`android:sharedUserId`尝试在清单文件中使用带有标签的共享资源。由于 UID 已更改，该活动不再具有数据文件目录中的写入权限。

所以任何可能改变 uid 的东西都可能导致这个问题。

为了解决我的问题：

1.  `sharedUserID`从清单中删除标签（可能是可选的）；
2.  从我的设备上手动卸载了该应用程序。
3.  重新安装了应用程序。

然后它完美地运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-23T15:07:07.383

通过阅读 openFileOutput() 的代码，我可以看到 f.getParentFile() 可能返回 null 的情况，这在此处的任何其他答案或评论中均未提及。

在行

```
File f = makeFilename(getFilesDir(), name); 
```

[如果dataDir](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#dataDir)不存在并且 `getFilesDir()`创建 dataDir 失败，[getFilesDir()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4_r1/android/app/ContextImpl.java#ContextImpl.getFilesDir%28%29)可以返回 null 。如果发生这种情况，文件只有在路径（例如“目录/文件”）而不仅仅是文件（例如“文件”）`f`时才会有父级。`name`

我不知道在什么情况下会丢失 dataDir 以及何时无法创建它，但听起来不太可能由于某种原因无法在 Android 2.3.3 模拟器中创建它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T15:13:56.740

看到[这个](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)完整的例子

```
URL url = new URL (strURL);
input = url.openStream();
byte[] buffer = new byte[1500];
OutputStream output = new FileOutputStream ("/sdcard/abc.png");
int bytesRead = 0;
while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) .
{
 output.write(buffer, 0, bytesRead);
 } 
```

# core-plot - 在Core Plot中画一条垂直线？

> ID：10259425
> 
> 赞同：1
> 
> 时间：2012-04-21T13:40:53.650
> 
> 标签：core-plot

我有一个 iPhone 项目，它在 Core Plot 中显示过去 24 小时的一些数据。x 轴显示时间，y 轴显示数据值。现在我想通过在午夜画一条垂直线来突出一天的变化。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:46:24.557

在图表中添加散点图以绘制垂直线。只需给它两个数据点——一个用于线的每一端。

# ios - 将静态表视图单元链接到详细的 UINavigationController

> ID：10259440
> 
> 赞同：0
> 
> 时间：2012-04-21T13:42:31.260
> 
> 标签：ios, xcode

我有 UITableViewController 有静态单元格。一旦用户选项卡在静态表视图单元之一上，我想显示另一个详细视图。

请注意，我正在使用带有情节提要的界面生成器。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T13:58:39.757

在情节提要中，单击主 TableViewController，然后转到“编辑器”菜单（最顶部）并选择嵌入 > 导航控制器。

然后将一个新的视图控制器拖到情节提要中。（带有虚线方形的黄色球）

然后按住 Control 键并从表格单元拖动到新视图以创建转场。当您释放鼠标按钮时，选择“Push”。

注意：要设置自定义“后退按钮”文本，您可以通过在 Tableview 控制器中选择“导航项”来实现，而不是在详细视图中。

希望有帮助。

# asp.net-mvc - 带数据库的实体框架

> ID：10259445
> 
> 赞同：0
> 
> 时间：2012-04-21T13:42:49.487
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework

这是我拥有的实体...

```
Public Class Account
    Public Property AccountId As integer
    Public Property AccountDescription As String
    Public Property Transactions As List(Of Transaction)
End Class

Public Class Transaction
     Public Property TransactionId As Integer
     Public Property AccountId As Integer
     Public Property TransactionDescription As String
End Class 
```

我想让它成功，例如，当我执行“db.Account.find(1)”时，它也会加载到具有对应 AccountId 的所有交易的列表中。我不太确定这是什么类型的关系？？无论如何，现在我可以做到

```
Dim acct As Account = db.Account.Find(1)
acct.Transactions = from ts in db.transactions select ts where ts.AccountId = acct.accountid 
```

但是我知道这不是正确的方法，必须有一种方法可以将其映射出来，以便实体可以一次性加载所有内容，对吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:53:08.183

您可以使用`db.Account.Include("Transactions").SingleOrDefault(1)`或将事务作为虚拟的（我认为它在 vb 中是可覆盖的）。

# asp.net-mvc - 我的网络市场中的托管账户

> ID：10259448
> 
> 赞同：1
> 
> 时间：2012-04-21T13:43:27.753
> 
> 标签：asp.net-mvc, paypal

我想在我的网站上建立一个市场。

我想监督这个marketPalce的所有交易，

因此我希望买家将他的钱存入我的托管账户

在向卖家付款之前。

我虽然使用贝宝。

我需要在我的 UI 中包含什么？

我网站的贝宝用户名？

任何序列号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T11:24:35.577

像 www.Transpact.com 这样的受政府监管的托管网站允许轻松集成（只需一行 .aspx 代码或 php 代码），并且内置了您需要的所有功能。正如 MisterJames 所说，托管很复杂，涉及许多法律问题，因此使用现有的政府监管网站更容易、更明智（也更便宜）。

# php - 无法找到 CodeIgniter 模型

> ID：10259457
> 
> 赞同：0
> 
> 时间：2012-04-21T13:45:03.413
> 
> 标签：php, codeigniter, mamp

我第一次在 MAMP 部署中尝试使用 codeigniter，但是我无法将模型加载到控制器中。最后的结果总是...

> 找不到您指定的模型：second_model

**控制器 -welcome.php**

```
class Welcome extends CI_Controller {

public function index()
{
    $this->load->model('second_model');
    $this->load->view('welcome_message');
}
} 
```

**模型 - second_model.php**

```
class Second_model extends Model {
public function __construct()
{
    // model constructor
    parent::__construct();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:55:31.753

你应该扩展`CI_Model`而不是`Model`

所以：

```
class Second_model extends CI_Model {

    public function __construct()
    {
        // model constructor
        parent::__construct();
    }

} 
```

# openxml - 如何使用 Excel 图表更新 PowerPoint 幻灯片

> ID：10259458
> 
> 赞同：0
> 
> 时间：2012-04-21T13:45:20.320
> 
> 标签：openxml, spreadsheetml, drawingml, presentationml

我有一个带有图表（条形图）的 Excel 文件。我还有一个带有 3 张幻灯片的 Powerpoint 演示文稿。请注意，在 Excel 表格或 Powerpoint 幻灯片上都没有图表“标题”。我需要使用 excel 文件中的图表更新幻灯片 #2 中的图表。

请注意，我已经搜索了这个论坛，我发现了创建新幻灯片以及使用标题更新图表的方法。

任何帮助将不胜感激。谢谢你的时间

编辑：您的解决方案很好，但对如何替换特定幻灯片中的图表没有帮助。在我的问题中，我已经说过有 3 张幻灯片。我想专门更新幻灯片 2 中的图表。没有图表标题，所以我需要根据幻灯片编号找到要替换的图表。这是怎么做的？再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:11:34.933

这可以通过以下步骤来完成：（注意：powerpoint是目标，excel是源）

1.  打开目标并找到要替换的 ChartPart。保留对 ChartPart 所在的父 SlidePart 的引用，并将 ChartPart 的 RelationshipId 复制到 SlidePart，然后从目标中删除 ChartPart。
2.  保存源并保持文件打开。

    ```
     foreach (var slidePart in targetPPT.PresentationPart.SlideParts)
            {
                if (slidePart.ChartParts.Any())
                {
                    slidePartBookMark = slidePart;

                    var chartPart = slidePart.ChartParts.First();
                    chartPartIdBookMark = slidePart.GetIdOfPart(chartPart);
                    slidePart.DeletePart(chartPart);
                    slidePart.Slide.Save();
                    return;
                }
            } 
    ```

3.  打开源并找到要复制到目标的 ChartPart。它将位于源中某处的 WorksheetPart 的 DrawingsPart 中。保留对 ChartPart 的引用并使文件保持打开状态。

    ```
     foreach (var worksheetPart in sourceXls.WorkbookPart.WorksheetParts)
            {
                if (worksheetPart.DrawingsPart != null)
                    if (worksheetPart.DrawingsPart.ChartParts.Any())
                    {
                        saveXlsChart = worksheetPart.DrawingsPart.ChartParts.First();
                        return;
                    }

            } 
    ```

4.  在第 1 步中的 SlidePart 参考中，使用 RelationshipId 创建一个新的 ChartPart 并调用 AddNewPart

    ```
     var newChartPart = slidePartBookMark.AddNewPart<ChartPart>(chartPartIdBookMark); 
    ```

5.  [将源图表的内容复制到您在第 4 步中创建的新图表部分，其中包含此处](http://amykinsgardiner.blogspot.de/2011/01/moving-images-in-headers-using-openxml.html)的 FeedData/GetStream 想法。保存幻灯片，然后关闭文件。

    ```
     newChartPart.FeedData(saveXlsChart.GetStream());
        slidePartBookMark.Slide.Save();
        sourceXls.Close();
        targetPPT.Close(); 
    ```

我能够让它与一个简单的源/目标一起工作，每个源/目标只包含一个图表。如果您的文件更复杂，您的定位逻辑将不仅仅是 First()。

希望这可以帮助。

# asp.net-mvc - 向 RoutValues 添加值并在 ASP.NET MVC 3 中保留当前值

> ID：10259463
> 
> 赞同：0
> 
> 时间：2012-04-21T13:46:20.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url, routevalues

我有一个视图，其中有两种形式，用于声明每页的行。在后期操作中，我需要我的 Url 相同，只需添加新参数。现在我这样使用：

```
[HttpPost]
public ActionResult Index(FormCollection collection) {

    //Calculate Row Count

    return RedirectToAction("Index", new { RC = RowCount });

   } 
```

有了这个实现，我的所有参数都丢失了，只是`RC = rowcountnumber`被替换了。如何保留参数并添加新参数`RC`？最快的方法是什么？这里有任何性能问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:08:08.033

检查这个，我不确定是最快的还是关于性能问题，但工作：

```
RouteValueDictionary rt = new RouteValueDictionary();
    foreach(string item in Request.QueryString.AllKeys)
      rt.Add(item,    Request.QueryString.GetValues(item).FirstOrDefault());

  rt.Add("RC", RowCount);
    return RedirectToAction("Index", rt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:41:09.957

不幸的是，我现在无法对其进行测试，但我怀疑这会起作用（尽管它确实会改变集合参数）。它会表现良好，因为它不会复制旧集合中的任何项目；只需向其中添加一项。

```
 [HttpPost]
    public ActionResult Index(FormCollection collection)
    {
        //Calculate Row Count
        collection.Add("RC", RowCount);
        return RedirectToAction("Index", collection);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:35:58.150

制作表单`GET`不是`POST`因为请求没有改变服务器上的任何东西，所以`GET`动词更合适，而且`GET`动词会将所有表单值作为查询字符串参数传递，这样你就会得到想要的效果

在第三个参数中做到这一点`Html.BeginForm`应该是`FormMethod.Get`

# android - Google Places API 实例化传输

> ID：10259464
> 
> 赞同：1
> 
> 时间：2012-04-21T13:46:52.647
> 
> 标签：android, google-places-api

所以我试图在我的 android 应用程序中使用 Google Places API，但它一直在崩溃。在测试了不同的东西之后，我发现它在尝试实例化时会崩溃。

```
package com.fender.isittoolate;

import java.io.IOException;
import com.gmail.yuyang226.flickr.places.PlacesList;
import com.google.api.client.googleapis.GoogleHeaders;
import com.google.api.client.http.GenericUrl;
import com.google.api.client.http.HttpRequest;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpRequestInitializer;
import com.google.api.client.http.HttpResponseException;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.apache.ApacheHttpTransport;
import com.google.api.client.http.json.JsonHttpParser;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.client.http.javanet.NetHttpTransport;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
public class IsItTooLateActivity extends Activity {
private final static String API_KEY = "key_here";
private final static String BASE_SEARCH_URL = "https://maps.googleapis.com/maps/api/place/search/json?";
private final NetHttpTransport transport = new NetHttpTransport();

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final Button button = (Button) findViewById(R.id.resultButton);
button.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    double longitude = location.getLongitude();
    double latitude = location.getLatitude();
    GenericUrl url = new GenericUrl(BASE_SEARCH_URL);
    url.put("key", API_KEY);
    url.put("location", latitude + "," + longitude);
    url.put("sensor", "true");
    url.put("radius", "500");
}

public HttpRequestFactory createRequestFactory(final HttpTransport transport) {
    return transport.createRequestFactory(new HttpRequestInitializer() {
        public void initialize(HttpRequest request) {
            GoogleHeaders headers = new GoogleHeaders();
            headers.setApplicationName("Google-Places-DemoApp");
            request.setHeaders(headers);
            JsonHttpParser parser = new JsonHttpParser(null);
            // parser.setJsonFactory(new JacksonFactory());
            request.addParser(parser);
        }
    });
}
});

}
} 
```

这是我用的。有人有什么建议吗？我在网上看到的其他演示并没有真正的帮助......

# iphone - 如何使用 theos 调整将布尔字符串添加到 plist？

> ID：10259466
> 
> 赞同：0
> 
> 时间：2012-04-21T13:47:17.780
> 
> 标签：iphone, plist, boolean, tweak

好吧，我需要创建一个调整，例如在**dict**字典中的**/var/mobile/test.plist中添加布尔字符串****测试**

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:29:16.983

[dict setValue:[NSNumber numberWithBool:YES] forKey:@"myKey"];****

# meteor - Meteor 会话有多大

> ID：10259474
> 
> 赞同：8
> 
> 时间：2012-04-21T13:48:10.060
> 
> 标签：meteor

从流星文档：

Session 在客户端上提供了一个全局对象，您可以使用它来存储任意一组键值对。使用它来存储列表中当前选定项目之类的内容。

**问题：** “任意”对于开发人员来说可能有点太模糊了。Meteor 会话是如何在客户端实现的，它的限制是什么（如果有的话）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T06:47:27.270

Session 的实现是非常轻量级的。它基本上是一个键值存储，也可以存储和使反应上下文无效。这也是学习如何使用您自己的反应函数扩展流星的一个很好的起点。

你可以在这里阅读整个实现： [https ://github.com/meteor/meteor/blob/master/packages/session/session.js](https://github.com/meteor/meteor/blob/master/packages/session/session.js)

# git - 如何从 TortoiseGit 中删除本地 Git 存储库？

> ID：10259477
> 
> 赞同：7
> 
> 时间：2012-04-21T13:48:16.953
> 
> 标签：git, tortoisegit

我今天开始玩弄 Git。我认为我做错了，因为当我安装 TortoiseGit 时，我的 C 和 F（第二个分区）中的很多文件夹旁边都有一个绿色勾号（意味着文件已提交？我想？）。我该怎么做才能去除这些蜱虫。有没有办法不删除实际的文件/文件夹，而只是一个或两个文件告诉 Windows 在图标上添加一个绿色勾号？我有点害怕在我的 C: 上使用类似的东西。**换句话说 - 有没有办法撤消“init”动作？！请在此处查看图片[http://i.stack.imgur.com/pKa1o.png](http://i.stack.imgur.com/pKa1o.png)**

我是 Git 新手，对于这个问题的非专业词汇感到抱歉。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-21T14:03:20.450

不知道 TortoiseGit，但该命令只是在存储库的根目录中`git init`创建一个（隐藏的）目录，并用一些需要的文件填充它。`.git`因此，要撤消初始化，您需要做的就是删除该`.git`目录。请注意，此目录中的某些文件可以写保护，因此可能会出现警告对话框。另请注意，您在此存储库中所做的所有提交都将丢失（在您的情况下应该没问题）。

但是我不知道这在使用 TortoiseGit 时是否有效或足够......</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-29T15:40:59.517

删除存储库中的 .git 文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-10T05:51:44.757

打开 git bash 然后执行以下命令

`$ rm -rf .git`

# ruby - 访问网站时查看所有 http 请求 [In Code]

> ID：10259481
> 
> 赞同：0
> 
> 时间：2012-04-21T13:48:35.767
> 
> 标签：ruby, http, httprequest

是否可以检索当我通过代码发送单个 GET http 请求时发生的所有 http 请求的列表（在我的例子中是 ruby​​）。

与 fiddler 或 firebug 中的 NET 选项卡基本相同。

例如，当我向 www.amazon.com 发送 GET 请求时，萤火虫说该页面有 94 个请求。我希望能够获得这 94 个请求的列表，以便我可以在我的代码中使用它们。

据我所知，我相信如果不使用其他类型的软件（例如 tcpdump），这是不可能的。但老实说，这超出了我的理解范围。

需要明确的是，我不想只使用 fiddler 或 firebug，因为我需要对我的 ruby​​ 代码中的请求进行进一步的数据操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:18:20.827

如果您执行单个 GET 请求，则将只有一个 GET 请求。

您所说的是当您在浏览器中键入 URL 时，您的浏览器被配置为下载大量 HTML 文件引用（css、javascript、图像），然后可以以 Firebug 的形式显示。

恐怕你必须再看看你在找什么......

# c - 使用 inotify 跟踪特定 PID 的 in_open 和 in_close 事件

> ID：10259483
> 
> 赞同：0
> 
> 时间：2012-04-21T13:48:50.510
> 
> 标签：c, inotify

我正在用 ANSI C 编写一个程序，它将 PID 作为参数，并且每次当给定的 PID 打开或关闭任何文件时，都需要在标准输出上打印有关文件名的信息。

基本上我们知道，/proc/PID/fd 目录包含指向文件的符号链接，由 PID 使用。

通过在while循环中读取该目录并读取每个元素，我可以获得所有文件的文件名，当前由PID打开并将它们打印到标准输出。但这并不能完全解决我最初的任务——我只需要将打开的文件描述符表中 PID 的更改事件打印到 STDOUT。此外，我不仅需要捕捉新文件何时打开，还需要捕捉它的 FD 何时关闭。

因此，我需要一些机制来捕获用户空间中给定 PID 的文件访问事件。

我还尝试使用 inotify() 机制来捕获 IN_OPEN / IN_CLOSE，但这仅适用于常规目录，不适用于 /proc (procfs) ！当我为 /proc/PID/fd 目录添加 inotify_watch 时 - 它根本不会捕获任何事件（很可能是由于 PROCFS 的性质）

您能否建议解决我的任务的机制？PS 对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:28:32.080

如果您需要特定于 Linux 的解决方案，您可以使用 fanotify。在这里查看例如 - [http://git.infradead.org/users/eparis/fanotify-example.git](http://git.infradead.org/users/eparis/fanotify-example.git)。您可以订阅全局通知，然后只过滤那些您感兴趣的 pid。

# php - Smarty + CodeIgniter - 使用模型的正确方法

> ID：10259484
> 
> 赞同：1
> 
> 时间：2012-04-21T13:49:25.410
> 
> 标签：php, codeigniter, smarty, template-engine

首先：我确实意识到在视图中使用模型是违反 MVC 层次结构的——但这是迄今为止我找到的最流畅的解决方案。

我已将 Smarty 集成到我的 CodeIgniter CMS 应用程序中。它的功能之一是使用模板以及缩小静态内容，例如 CSS 和 JavaScript。因此，我试图在模板文件中做这样的事情：

```
//Adding the static content
<?php
$this->content->css( array('my.css', 'style.css') );
?>

<html>
   <head>
      //Displaying the now minified static content
      <?php $this->content->display() ? >
   </head>
</html> 
```

由于最终模板应该可由最终用户或类似人员编辑，我相信这是最简单的解决方案。

感谢所有输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:18:46.920

我已经使用了 smarty 和 codeigniter，根据我的使用经验，这两者都是矫枉过正的。Smarty 只是弄乱了您的代码，恕我直言，使用起来很麻烦。将 codeigniter 视图视为您的 smarty 模板的等价物。

如果你担心缩小，你可以尝试使用这样的东西：[CSS Minification Library](http://codeigniter.com/forums/viewthread/103269/)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T14:25:59.797

我认为你不应该在 Smarty-templates 中使用任何与 codeigniter 相关的函数。CSS 目录是恒定的，因此无需调用 php 函数。

如果您需要来自 CI 的一些信息，您将`assign`在控制器功能中使用 smarty-variable - 所以不会破坏 MVC：

```
$smarty->assign(array(
   "display" => $this->content->display(),
   "css_include" => $this->content->css(array("my.css","style.css"))
)); 
```

正如[jco](https://stackoverflow.com/a/10260776/934599)上面在简单案例中所写的那样，CI&Smarty 可能“矫枉过正”。但在同样的情况下它非常有用（例如[模板继承](http://www.smarty.net/docs/en/advanced.features.template.inheritance.tpl)和[块](http://www.smarty.net/docs/en/language.function.block.tpl)可以用来创建相同的表单类型）。

# vim - Vim 中的 clang_complete

> ID：10259485
> 
> 赞同：19
> 
> 时间：2012-04-21T13:49:30.167
> 
> 标签：vim, clang, clang-complete

所以在玩弄了omnicpp、gccsense和clang_complete之后，我无法让它们中的任何一个工作。所以我`apt-get purge vim-*`再次尝试安装clang_complete，但没有成功。

这就是我所做的：

1.  下载`clang_complete.vmb`，将其移动到我新鲜、干净的`.vim`目录并执行`vim clang_complete.vmb -c 'so %' -c 'q'`。

2.  将此粘贴到我的 .vimrc 中：

    ```
    syntax on
    set number
    filetype plugin on
    let g:clang_user_options='|| exit 0'
    let g:clang_complete_auto = 1
    let g:clang_complete_copen = 1 
    ```

3.  创建典型示例

    ```
    #include <iostream>
    #include <string>

    int main() { std:: (I get: User defined pattern not found) } 
    ```

我还需要做什么/安装才能让它工作吗？我听说过关于 Clang 的愚蠢问题，我需要`apt-get install`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-05T16:11:05.210

**clang_complete** can be configured to use the **clang executable** or the **clang library**

clang_complete uses the clang executable by default but the clang **library will execute lot faster**

## clang_complete plugin (using the clang executable) needs:

1.  **clang** must be installed in your system and be in the PATH
2.  **do not** set (let) g:clang_library_path to a path containing the libclang.so library

## clang_complete plugin (using the clang library) needs:

1.  **python** installed in your system
2.  vim must be built with python support (do **:version** and look for a **+python/dyn** or **+python3/dyn** entry)
3.  set (let) **g:clang_library_path** to the directory path where **libclang.so** is contained

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-05T01:30:45.810

`let g:clang_library_path='/usr/lib/llvm3.5/lib/libclang.so.1'` 在我的 .vimrc 中，它工作正常。

# php - 显示类别而不重复每个有帖子的类别

> ID：10259488
> 
> 赞同：0
> 
> 时间：2012-04-21T13:50:02.023
> 
> 标签：php, mysql, sql

我有**类别**表：

```
cat_id
cat_name 
```

比类别 - 帖子关系表**cat_rel**：

```
cat_rel_id
cat_id
post_id 
```

和**帖子**表：

```
post_id
post_title
post_content 
```

现在我在所有这些表中都有数据，我需要提取类别而不重复那些超过 1 个帖子的类别。如果它有超过 1 个帖子，我会以某种方式重复类别，例如。类别如：

php，python，c++，java，红宝石

如果我在 PHP 下有 2 个帖子，我会得到：

php 蟒蛇 php java

这是我运行的查询：

```
SELECT categories.cat_name, cat_rel.post_id 
FROM categories 
LEFT JOIN cat_rel ON cat_rel.cat_ID = categories.cat_ID 
```

任何有关使这些类别不再重复的帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:59:48.460

使用 DISTINCT

看看这里： [SQL SELECT DISTINCT 语句](http://www.w3schools.com/sql/sql_distinct.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:00:40.613

这将列出包含多个帖子的类别：

```
SELECT  categories.cat_name as Category
,       count(distinct cat_rel.post_id) as PostCount
FROM    categories 
LEFT JOIN cat_rel 
ON      cat_rel.cat_ID = categories.cat_ID
GROUP BY categories.cat_name
HAVING  count(distinct cat_rel.post_id) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:09:48.033

试试这个：

```
SELECT DISTINCT categories.cat_name, cat_rel.post_id 
FROM categories 
LEFT JOIN cat_rel ON cat_rel.cat_ID = categories.cat_ID 
```

# php - 在 PHP 中计算每周的事件数

> ID：10259489
> 
> 赞同：9
> 
> 时间：2012-04-21T13:50:06.827
> 
> 标签：php, mysql, date, count, strtotime

我有一个包含会员注册的表格，我希望能够开始对数据进行一些图表和分析，并寻找注册趋势等，所以我希望能够绘制一个折线图，显示有多少人签署在过去的 52 周中每周上涨。

我的图表工作正常，因为我已经在广泛使用它们，但是我正在努力弄清楚如何使用 PHP 从 MySQL 中提取数据，这让我很恼火，因为我知道这应该不难 - 该表有一个名为格式为 Ymd 的日期戳。我怎样才能最好地创建一个循环来打印该周以及前 52 周的每周注册日期和计数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T14:02:41.893

假设您的时间戳列名为 signup_date，您可以执行如下查询：

```
SELECT
    WEEKOFYEAR(signup_date) AS weekno, 
    COUNT(1) AS signups 
FROM your_table 
GROUP BY WEEKOFYEAR(signup_date); 
```

这将为您提供一个包含 2 列的结果集、一年中的一周以及该周有多少注册。

**编辑1：**

要获取每个结果的星期几，您可以将以下内容添加到查询中**：**

```
SELECT
    WEEKOFYEAR(signup_date) AS weekno, 
    COUNT(1) AS signups,
    SUBDATE(signup_date, INTERVAL WEEKDAY(signup_date) DAY) AS date_of_week
FROM your_table 
GROUP BY WEEKOFYEAR(signup_date); 
```

# ios - uiscrollview 缩放时，内容视图刷新但首先闪烁屏幕

> ID：10259493
> 
> 赞同：0
> 
> 时间：2012-04-21T13:50:47.747
> 
> 标签：ios, uiscrollview, zooming

我在 uiscrollview 中有一个 contentview，我希望在 uiscrollview 放大或缩小特定级别时获得高分辨率。我得到了这个目标，但是在绘制高分辨率内容之前屏幕闪烁（与视图的背景或之前的一些平铺图片一起闪烁）。这不是一个平稳的过渡。我在 scrollviewsuite（一个苹果演示）中提到了平铺演示。我所做的不同之处在于我在一个线程中刷新内容，在这个线程中我在 tile uiview 中绘制内容（实际上我想在后台线程上绘制一个 CALayer）。我这样称呼它：

```
[self perform: @selector(refreshContent) OnThread:mythread withObject:nil waitUntilDone:YES] 
```

我`waiUntilDone:YES`在 UI 主线程中使用过。等待 mythread 完全重绘内容。但我遇到了这种情况：屏幕闪烁一些图块内容（未更新），然后获得高分辨率内容。

如果我`[self perform: @selector(refreshContent) OnThread:mythread...` 直接删除调用“refreshContent”，屏幕不会闪烁，立即更新屏幕上显示的内容，

有兴趣想帮助我的人，可以在苹果的scrollviewsuite demo中修改_Tiling [demo。](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Introduction/Intro.html). 使用线程以另一个分辨率刷新内容。

我所说的是，当在后台线程中更新 calayer 或 uiview 的内容时，但内容并没有像我希望的那样立即显示在屏幕上......谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:17:31.913

我找到了这个问题的解决方案。答案是不能直接在线程中更新ui（因为runloop在线程结束时，`[CATranscation flush]`可能不会被调用，所以更新屏幕的进度不连续，屏幕闪烁），但是如果你愿意，我们可以让它像这：

1.  根据需要将 calayer 的内容准备为线程中的图像（图像可以从 webkit 等引擎渲染或从网络下载）。

2.  将在线程中渲染的图像分配给主线程中 calayer 的内容属性。“在主线程中”，这很重要。

如果您按照上面的建议进行操作，屏幕的闪烁问题将被删除。.

可能有人怀疑为什么要在线程中渲染图像，因为我认为该线程是渲染线程，不能在其他线程和主线程中渲染任何内容。

# javascript - 将jquery变量传递给ajax数据

> ID：10259494
> 
> 赞同：1
> 
> 时间：2012-04-21T13:50:55.033
> 
> 标签：javascript, ajax, json

我正在尝试将这些变量从 3 个隐藏字段传递给 ajax 的数据。

我得到了正确的变量。我通过console.log 验证。我试图解析 json，但它不适合我。

我收到未捕获异常的错误：[异常...“无法转换 JavaScript 参数”nsresult：“0x80570009 (NS_ERROR_XPC_BAD_CONVERT_JS)”位置：“JS 框架 :: [http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js) :: :: line 7740" 数据：无] 第 2 行

我正在尝试使用 ajax 请求将这些变量传递给我的控制器。数据字符串中的其他变量我完全没有问题。当用户点击星级评分时，这些值会被发布并插入到数据库中。

以下是变量：

```
 var TweetUserId =  $(this).parents().prevAll('input[type=hidden:first]') ;
          var TweetScreenName =  $(this).parents().prevAll('input[type=hidden:second]') ;
          var TweetPostText = $(this).parents().prevAll('input[type=hidden:third]') ;
 // making it an object didnt work
         //  TweetUserId = new Object; TweetUserId = (TweetUserId);
          // TweetScreenName = new Object; TweetScreenName = (TweetScreenName);
         //  TweetPostText = new Object; TweetPostText = (TweetPostText); 
```

这是请求

```
 $.ajax({
              url: '/Home/GetRating', //your server side script
              dataType: "json",
              data: { id: ratingid, value: value, TweetUserId: TweetUserId, TweetScreenName: TweetScreenName, TweetPostText: TweetPostText, tweetday: dateoftweet, tweettime: timeoftweet }, //our data
              type: 'POST',
              success: function (data) {
                  //$('#ratemsg').html(data);
                  msg.html(" The TweetId is " + ratingid + " the vote value is " + value + " " + dateoftweet + "  " + timeoftweet  );
                  //       console.log(hiddenValue);
              },
              error: function (jxhr, msg, err) {
                  //  $('#response').append('<li style="color:red">' + msg + '</li>');
                  msg.html(data);
              }
          });
      });

  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:56:48.227

1.  您以错误的方式使用选择器，有些是无效的`:first` `:second` `:third`
    （它们应该在外面`[type=hidden]`并且没有`:second` `:third`.. 改用[`:eq()`](http://api.jquery.com/eq-selector/)选择器
2.  您将元素而不是它们的值传递给 ajax 请求..

填充变量时使用它..

```
 var TweetUserId =  $(this).parents().prevAll('input[type="hidden"]:eq(0)').val();
 var TweetScreenName =  $(this).parents().prevAll('input[type="hidden"]:eq(1)').val();
 var TweetPostText = $(this).parents().prevAll('input[type="hidden"]:eq(2)').val(); 
```

* * *

作为一般模式，当您打算多次使用 jQuery 对象时，最好缓存它，而不是重新选择它。

所以你可以改进你的代码

```
 var hiddenElements = $(this).parents().prevAll('input[type="hidden"]'),
     TweetUserId =  hiddenElements.eq(0).val(),
     TweetScreenName =  hiddenElements.eq(1).val(),
     TweetPostText = hiddenElements.eq(2).val(); 
```

# javascript - 使用命令行寻找用于 Javascript 编码/实验的外壳

> ID：10259495
> 
> 赞同：4
> 
> 时间：2012-04-21T13:51:04.537
> 
> 标签：javascript, node.js, command-line, ipython

是否有使用命令行提供历史、完成、帮助、调试等的 Javascript 编码/实验外壳？我发现[iPython](http://ipython.org/)对于快速编写 Python 脚本非常有用。

我查看了各种 shell，如[node](http://nodejs.org/)、[Rhino](https://developer.mozilla.org/en/Rhino_Shell)、[JSDB](http://www.jsdb.org/)，但它们的命令行功能似乎有些受限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T13:53:58.843

[Firebug](http://getfirebug.com/)控制台完全符合您的要求，Chrome 开发者工具也是如此（可通过按 F12 或通过菜单导航访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:19:10.593

我在 cscript.exe 上使用[kobyk 的 REPL 。](http://kobyk.wordpress.com/2007/09/14/a-jscript-interactive-interpreter-shell-for-the-windows-script-host/)

另外，我使用 emacs，并且有一个 elisp 模块允许在 emacs 中托管该 REPL，称为[jsshell](http://marmalade-repo.org/packages/jsshell-bundle)。这意味着您可以进行剪切/粘贴、搜索/替换、命令行编辑等等——所有可用于 emacs 缓冲区的文本操作都可在交互式 Javascript shell 中使用。

```
Welcome to the JScript shell.
Running JScript Version 5.8.16982
'exit' to exit.

js> 
loading c:\dev\js\json2.js
js> 

loading c:\dev\js\stringExtensions.js
js> 

loading c:\dev\js\moment.js
js> 

loading c:\dev\js\arrayExtensions.js
js> 
Multi-line input. Use two consecutive blank lines to eval.

var id = "11111;22222;33333"; 

id = id.split(";"); 

js> function say (x) {WScript.echo(x);}
js> for (var i in id) { say (i); } 
0
1
2
forEach
every
map
filter
remove
removeAt
indexOf
contains
js> for(var i=0;i<id.length;i++) { say (i + ": " + id[i]); } 
0: 11111
1: 22222
2: 33333
js> 
```

# java - java字符编码

> ID：10259496
> 
> 赞同：2
> 
> 时间：2012-04-21T13:51:08.090
> 
> 标签：java, character-encoding

我正在搜索立陶宛字符编码。我找到了这些：IBM775、IBM921。但在 Java 名称中，它们就像 Cp775 和 Cp921。但是当我在应用程序中使用它时，它不起作用。他们是正确的吗？

**已编辑** Mysql 数据库具有 UTF 编码。我也试过了，但它不起作用。在应该有立陶宛字符的地方，我得到了空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:14:42.370

使用编码`ISO-8859-4`或`Cp1112`.

Here the official java page of [supported encondings](http://docs.oracle.com/javase/6/docs/technotes/guides/intl/encoding.doc.html)。

在这里，您可以在[维基百科页面](http://en.wikipedia.org/wiki/Character_encoding)中获得带有描述的完整列表。

# webdriver - 代码适用于 FirefoxDriver 但不适用于 HtmlUnitDriver

> ID：10259497
> 
> 赞同：0
> 
> 时间：2012-04-21T13:51:11.027
> 
> 标签：webdriver, htmlunit, selenium-firefoxdriver

我需要点击以下xPath指向的链接：html/body/div[2]/ul/li[9]/a（使用firepath生成）相应的Html片段如下： **<a href="/abb/注销">注销**

我的代码是这样的：

```
HtmlUnitDriver driver= new HtmlUnitDriver(BrowserVersion.FIREFOX_3_6);
WebElement logoffElement = (new WebDriverWait(driver, 10))
    .until(new ExpectedCondition<WebElement>(){
        @Override
        public WebElement apply(WebDriver d) {
      return d.findElement(By.xpath("html/body/div[2]/ul/li[9]/a"));
    }});

logoffElement.click(); 
```

上面的代码适用于 Firefoxdriver，但不适用于 HtmlUnitdriver。HtmlUnitdriver 给出以下错误：

```
Caused by: org.openqa.selenium.NoSuchElementException: Unable to locate a node using html/body/div[2]/ul/li[9]/a
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.21.0', revision: '16552', time: '2012-04-11 19:08:38'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_23'
Driver info: driver.version: HtmlUnitDriver
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElementByXPath(HtmlUnitDriver.java:802)
    at org.openqa.selenium.By$ByXPath.findElement(By.java:344)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver$5.call(HtmlUnitDriver.java:1244)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver$5.call(HtmlUnitDriver.java:1)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.implicitlyWaitFor(HtmlUnitDriver.java:984)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElement(HtmlUnitDriver.java:1241)
    at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElement(HtmlUnitDriver.java:396)
    at com.nike.automation.Task$1.apply(Task.java:70)
    at com.nike.automation.Task$1.apply(Task.java:1)
    at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:201) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:18:13.033

HtmlUnitDriver 是一个假浏览器，它不能处理 javascript 并且缺乏普通浏览器所具有的功能。FirefoxDriver 或 ChromeDriver 使用真实的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T09:55:40.640

//html/body/div[2]/ul/li[9]/a -- 绝对 XPath。

不建议使用绝对 XPath。使用相对 XPath，以便它可以在所有浏览器中工作。

谢谢！

# iphone - 从 tableview 获取 textfield.text

> ID：10259499
> 
> 赞同：0
> 
> 时间：2012-04-21T13:51:11.927
> 
> 标签：iphone, uitextfield

我有 UIButton 、 UILable 和 UITextfield 的表格视图，我在 cellForRowAtIndexPath 中写过：

UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

[cell addSubview:button];    
[cell addSubview:lable];
[cell addSubview:textfield]; 
```

我已经在标签上设置了文本，并且文本字段工作正常。当我更改文本字段上的文本时也可以正常工作。

而且我还有其他用于保存数据的按钮 - 它位于 tableview 的外侧，但在同一个视图中。

我的问题是当我单击保存按钮时，我想获取 tableview 文本字段的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:10:44.450

如果您有一个或两个文本字段在 IB 中但在当前视图之外创建它，挂钩到插座，然后使用插座保存文本。如果您的表视图包含许多行，这不是一个好主意，在这种情况下考虑创建自定义细胞

[检查这个答案](https://stackoverflow.com/questions/1839772/textfield-in-uitableview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:21:56.553

所有的文本字段？我建议在创建时将 textFields 添加到 mutableArray，创建另一个 mutableArray 来存储 textField 文本，然后按下按钮，调用：

```
for(UITextField *textField in myArray){ [myTextArray addObject:textField.text];} 
```

然后你可以保存数组，或者其他什么。如果只有一个 textField，您如何访问它将取决于它的声明位置等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:34:34.237

您想要每个文本字段中的文本还是单行中的文本？

此外，您用于创建表格视图单元格的代码并没有按照您的意愿进行操作。首先，您尝试使可重复使用的单元出列，这很棒。但是您随后会立即通过每次分配/初始化一个全新的单元格来覆盖该重用单元格。只有当 cell == nil 时，你才应该分配/初始化一个新的。

# jquery - Thickbox 以某种方式修改了链接的 href - 为什么？

> ID：10259501
> 
> 赞同：0
> 
> 时间：2012-04-21T13:51:20.087
> 
> 标签：jquery, thickbox

我有一个带有一些插件和自定义主题的 wordpress 安装。在一页上，Thickbox 用于显示图片弹出窗口。

问题是它只适用于第一个点击的图片。当单击thickbox.js 时不知何故修改了我想用thickbox 显示的所有其他图像的href，并且进一步单击失败。

问题出现在以下页面： `http://www.zaengerlein.de/shop`

例如，原始图像 URL 是： `http://www.zaengerlein.de/wp-content/uploads/produktbilder/3/tn/s-150-150-P1010053.JPG`

单击图像后，URL 将更改为以下内容： `http://www.zaengerlein.de/wp-content/uploads/produktbilder/3/tn/s-150-150-P1010053.JPG&width=640&height=666`

当然，当我单击另一张图片时，thickbox 将无法加载该图片。

任何帮助我都会非常感激:)

问候， Goeran

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:01:46.673

这个问题是由[https://www.zaengerlein.de:443/wp-admin/js/media-upload.js](https://www.zaengerlein.de:443/wp-admin/js/media-upload.js)强制执行的，它操纵了 href 属性。

仅当 tinymce 可用时，您可以通过在 jQuery 的 ready-event 上执行此脚本中调用的函数来解决它：

替换脚本中的这部分：

```
var tb_position;(function(a){ 
```

这样：

```
var tb_position;(function(a){if(typeof tinymce=='undefined'){return;} 
```

这将为客人解决问题（没有加载 tinymce），但我无法告诉您加载 tinymce 时会发生什么。

当然，更好的方法是仅在需要时包含脚本（tinymce 可用）

# mysql - MySQL 中的分隔符

> ID：10259504
> 
> 赞同：189
> 
> 时间：2012-04-21T13:51:24.843
> 
> 标签：mysql, delimiter

我经常看到人们使用分隔符。我试图自己找出什么是分隔符以及它们的目的是什么。经过 20 分钟的谷歌搜索，我无法找到令我满意的答案。所以，我现在的问题是：什么是分隔符，我应该什么时候使用它们？

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2012-04-21T13:54:59.307

`;`在定义必须定义多个语句的函数、存储过程和触发器时，通常使用默认分隔符以外的分隔符 。您定义了一个不同的分隔符，例如`$$`用于定义整个过程的结尾，但在其中，各个语句均以`;`. 这样，当代码在`mysql`客户端运行时，客户端可以知道整个过程在哪里结束，并将其作为一个单元执行，而不是执行内部的单个语句。

请注意，`DELIMITER`关键字只是命令行`mysql`客户端（和其他一些客户端）的功能，而不是常规的 MySQL 语言功能。如果您尝试通过编程语言 API 将其传递给 MySQL，它将无法正常工作。其他一些客户端，如 PHPMyAdmin，还有其他方法来指定非默认分隔符。

### 例子：

```
DELIMITER $$
/* This is a complete statement, not part of the procedure, so use the custom delimiter $$ */
DROP PROCEDURE my_procedure$$

/* Now start the procedure code */
CREATE PROCEDURE my_procedure ()
BEGIN    
  /* Inside the procedure, individual statements terminate with ; */
  CREATE TABLE tablea (
     col1 INT,
     col2 INT
  );

  INSERT INTO tablea
    SELECT * FROM table1;

  CREATE TABLE tableb (
     col1 INT,
     col2 INT
  );
  INSERT INTO tableb
    SELECT * FROM table2;

/* whole procedure ends with the custom delimiter */
END$$

/* Finally, reset the delimiter to the default ; */
DELIMITER ; 
```

尝试`DELIMITER`与不支持它的客户端一起使用将导致它被发送到服务器，服务器将报告语法错误。例如，使用 PHP 和 MySQLi：

```
$mysqli = new mysqli('localhost', 'user', 'pass', 'test');
$result = $mysqli->query('DELIMITER $$');
echo $mysqli->error; 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DELIMITER $$”附近使用正确的语法

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-02-02T09:28:23.220

DELIMITER 语句将分号 (;) 的标准分隔符更改为另一个。分隔符从分号 ( ;) 更改为双斜杠 //。

为什么我们必须更改分隔符？

因为我们希望将存储过程、自定义函数等作为一个整体传递给服务器，而不是让 mysql 工具一次解释每个语句。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-08-16T23:53:23.873

当您创建具有`BEGIN...END`块的存储例程时，块中的语句以分号终止`(;)`。但该`CREATE PROCEDURE`语句还需要一个终止符。因此，程序主体中的分号是终止`CREATE PROCEDURE`，还是终止过程主体中的语句之一变得模棱两可。

解决歧义的方法是声明一个不同的字符串（不能出现在过程的主体中），MySQL 客户端将其识别为`CREATE PROCEDURE`语句的真正终止符。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-12-06T14:37:54.600

您定义一个 DELIMITER 来告诉 mysql 客户端将语句、函数、存储过程或触发器视为整个语句。通常在 .sql 文件中设置不同的 DELIMITER，例如 $$。DELIMITER 命令用于更改 MySQL 命令的标准分隔符（即；）。由于例程（函数、存储过程或触发器）中的语句以分号 (;) 结尾，因此我们使用 DELIMITER 将它们视为复合语句。如果在同一文件或命令行中使用不同的例程时未定义，则会出现语法错误。

请注意，您可以使用各种非保留字符来制作自己的自定义分隔符。您应该避免使用反斜杠 (\) 字符，因为它是 MySQL 的转义字符。

DELIMITER 并不是真正的 MySQL 语言命令，它是一个客户端命令。

### 例子

```
DELIMITER $$

/*This is treated as a single statement as it ends with $$ */
DROP PROCEDURE IF EXISTS `get_count_for_department`$$

/*This routine is a compound statement. It ends with $$ to let the mysql client know to execute it as a single statement.*/ 
CREATE DEFINER=`student`@`localhost` PROCEDURE `get_count_for_department`(IN the_department VARCHAR(64), OUT the_count INT)
BEGIN

    SELECT COUNT(*) INTO the_count FROM employees where department=the_department;

END$$

/*DELIMITER is set to it's default*/
DELIMITER ; 
```

# c# - 透明键弄乱了透明图像

> ID：10259505
> 
> 赞同：0
> 
> 时间：2012-04-21T13:51:52.023
> 
> 标签：c#, winforms, .net-4.0, transparency

我有一个具有 Lime 透明键的 C# WinForm。我还将表单的背景颜色设置为 Lime。这适用于按钮之类的东西以及您能想到的几乎任何东西。该表单看起来不存在，并允许我创建一个自定义外观的表单。

我有一个透明背景的图片框，图片框图像有一个阴影。当我运行应用程序时，投影不透明。卓尔阴影的背景颜色为表单背景颜色（石灰）。看起来很可怕。

我如何拥有一个透明的表单，它还允许将透明图像正确放置在其上。

诸如 SWTOR 游戏启动器之类的程序有这个漂亮的背景阴影，所以我知道这是可能的。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:28:39.963

您正在寻找两件事之一，[Windows 区域](http://msdn.microsoft.com/en-us/library/dd145207%28v=vs.85%29.aspx)
或
[分层 Windows](http://msdn.microsoft.com/en-us/library/ms997507.aspx)

这是C#的一个[很好的例子](http://www.vcskicks.com/custom_shape_form_region.php)

或者我放在一起的一个小例子：

```
 protected override void OnPaint(System.Windows.Forms.PaintEventArgs e)
    {
        GraphicsPath gp = new GraphicsPath();
        Region r;
        PointF[] p = new PointF[9];
        p[0] = new PointF(70, 0);
        p[1] = new PointF(170, 0);
        p[2] = new PointF(240, 70);
        p[3] = new PointF(240, 170);
        p[4] = new PointF(170, 240);
        p[5] = new PointF(70, 240);
        p[6] = new PointF(0, 170);
        p[7] = new PointF(0, 70);
        p[8] = new PointF(70, 0);
        gp.AddPolygon(p);

        r = new Region(gp);
        this.Region = r;

        gp.Dispose();
        r.Dispose();
    } 
```

您需要将此代码放入您希望它生效的表单中。

# perl - 使用 TAP::Formatter::HTML 生成 HTML 报告并证明

> ID：10259511
> 
> 赞同：1
> 
> 时间：2012-04-21T13:52:34.580
> 
> 标签：perl

我在 t/ 下有一个简单的测试文件。我想在运行所有测试后显示摘要。由于某种原因，在显示“04.pl”的结果之前显示摘要。运行所有测试后如何显示摘要？

```
==> t/test.t

#!/usr/bin/perl

use strict;
use warnings;

use Test::More;
plan tests => 4;

require "/home/mydir/perl5/lib/perl5/TAP/Harness.pm";
require "/home/mydir/perl5/lib/perl5/TAP/Formatter/HTML.pm";
require "/home/mydir/perl5/lib/perl5/TAP/Parser/Aggregator.pm";

my $f = TAP::Formatter::HTML->new;
$f->verbosity(-1);
$f->force_inline_css(0);

my %args = (
    formatter => $f,
    merge => 1,
);
my $a = TAP::Parser::Aggregator->new;
my $h = TAP::Harness->new(\%args);

my @files = qw[01.pl 02.pl 03.pl 04.pl];

$a->start;
$h->aggregate_tests($a, @files);
$a->stop;

done_testing(4);

my $summary = <<'END_SUMMARY';
  Total Tests:    %s
  Passed:    %s
  Failed:    %s
  Unexpectedly succeeded: %s
  END_SUMMARY

  printf $summary,
  scalar $a->total,
  scalar $a->passed,
  scalar $a->failed,
  scalar $a->todo_passed;

  ==> Output (in html format)

    1..4 
    ok 1 - First 
    ok 1 - Second 
    ok 1 - Third 
    Total Tests: 4 
    Passed: 4 
    Failed: 0 
    Unexpectedly succeeded: 0 
    ok 1 - Four 
```

为了运行测试，我使用了“prove”实用程序：/home/mydir/perl5/bin/prove -Q --formatter=TAP::Formatter::HTML > output.html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:55:51.670

以下命令将运行 t/ 子目录中的所有 .t 文件，合并 STDOUT 和 STDERR (-m) 并安静运行 (-Q)。

```
prove -m -Q --state=last --formatter=TAP::Formatter::HTML t/ > output.html 
```

在 Perl 中执行它的最简单方法是：

```
$output = `prove -m -Q --state=last --formatter=TAP::Formatter::HTML t/`; 
```

查看[http://perldoc.perl.org/prove.html#--state](http://perldoc.perl.org/prove.html#--state)以查看参数的所有可能性`--state`。

# c++ - 以毫秒为单位比较时间

> ID：10259514
> 
> 赞同：-2
> 
> 时间：2012-04-21T13:53:11.447
> 
> 标签：c++, linux

我想以毫秒为单位检查在服务器客户端架构中执行特定任务的时间？例如，服务器必须在 1800 英里秒时向客户端发送消息说 m1，它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:40:51.897

使用 gettimeofday 例程。它为您提供以微秒为单位的时间。这是您在 C 中可以得到的最好的。

```
 gettimeofday(&tv1, NULL);//Init
     .....
     gettimeofday(&tv2, NULL);//Final
     printf("\nTime:%ld usec", ((tv2.tv_sec-tv1.tv_sec)*1000000 + tv2.tv_usec-tv1.tv_usec)); 
```

PS：我假设您需要 C 的信息。请提供您在提问时尝试的详细信息。

# c# - XNA - 如何将对象画得更远

> ID：10259515
> 
> 赞同：1
> 
> 时间：2012-04-21T13:53:12.037
> 
> 标签：c#, xna

下面是我如何绘制一些由此处未显示的顶点定义的形状。

```
 Vector3 position = (5,5,1);
        Matrix world = Matrix.CreateTranslation(position);
        BasicEffect basicEffect = new BasicEffect(graphicsDevice);

        Matrix view = Matrix.CreateLookAt(new Vector3(0, 0, -20), new Vector3(0, 0, 100), Vector3.Up);
        Matrix projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4,
                                                    graphics.Viewport.AspectRatio,
                                                    1.0f,
                                                    100);

        // Set BasicEffect parameters.
        basicEffect.World = world;
        basicEffect.View = view;
        basicEffect.Projection = projection;

        //....draw some shape with basicEffect 
```

我想在更远的地方绘制相同的形状，以便它的中心保持在屏幕上的相同 (x,y) 像素中，但由于距离更远，所以整体更小。

我试过缩放位置向量但没有成功：

```
 position .Z *= 2;
                position .X *= 2;
                position .Y *= 2; 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:28:07.793

从几何角度考虑：将对象从相机移开意味着沿着由两点定义的线移动它：相机的位置和对象的位置。

现在很容易！

1）找到对象到相机的向量，即

```
Vector3 direction = objectPosition - cameraPosition; 
```

2) 将对象沿该向量移动一定量，即：

2.1) 归一化方向

```
direction.Normalize(); 
```

2.2) 在那个方向上移动物体 x

```
objectPosition += direction * x; 
```

你有它。

# mysql - Fluent Nhibernate mysql日期问题

> ID：10259518
> 
> 赞同：1
> 
> 时间：2012-04-21T13:53:32.160
> 
> 标签：mysql, nhibernate, datetime, fluent-nhibernate

当 MySql 中的日期时间字段等于“0000-00-00 00:00:00”时，NHibernate 无法将其转换为 .net 日期时间。

错误信息：

```
"Unable to convert MySQL date/time value to System.DateTime" 
```

如何配置 Fluent NHibernate 将值转换为 null 或 datetime.min？

编辑：

我试过这个： [NHibernate Unable to convert MySQL date/time value to System.DateTime](https://stackoverflow.com/questions/4626820/nhibernate-unable-to-convert-mysql-date-time-value-to-system-datetime) 但它不起作用。这是我的配置：

```
string connectionString = "Server=SERVER;Port=3306;Database=DB;Uid=USER;Pwd=PASSWORD; Allow Zero Datetime=true;";
        return Fluently.Configure()
          .Database(MySQLConfiguration
                        .Standard
                        .ConnectionString(connectionString)
                        )
         .Mappings(m => 
                        m.FluentMappings
                        .AddFromAssemblyOf<MyMapping>()
                    )
         .BuildSessionFactory()
         ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:33:01.373

我提到的帖子有关于转换零日期时间的建议，我在您的配置中看不到它。

你有没有这样尝试过：

```
string connectionString = "Server=SERVER;Port=3306;Database=DB;Uid=USER;Pwd=PASSWORD; Allow Zero Datetime=true;Convert Zero Datetime=true";
        return Fluently.Configure()
          .Database(MySQLConfiguration
                        .Standard
                        .ConnectionString(connectionString)
                        )
         .Mappings(m => 
                        m.FluentMappings
                        .AddFromAssemblyOf<MyMapping>()
                    )
         .BuildSessionFactory()
         ; 
```

# python - x==x 在 Python 中是否为 False？

> ID：10259519
> 
> 赞同：8
> 
> 时间：2012-04-21T13:53:39.993
> 
> 标签：python, floating-point, equality

我在 SciPy 的源代码中偶然发现了这行代码，在[stats 模块](https://github.com/scipy/scipy/blob/master/scipy/stats/distributions.py#L5171)中：

```
return 1.0*(x==x) 
```

这是返回的东西不是`1.0`吗？换句话说，x 的任何值是否`x == x`成立`False`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T17:46:05.153

根据 IEEE 754 标准，非数字 (NaN) 必须始终比较为假，无论它与什么进行比较。

```
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> x=float("NaN")
>>> x==x
False 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T17:49:14.590

用户定义的类型可以覆盖相等运算符来做任何你想做的事情：

```
Python 3.2.2 (default, Feb 10 2012, 09:23:17) 
[GCC 4.4.5 20110214 (Red Hat 4.4.5-6)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> class A:
...     def __eq__(self, other):
...         return False
... 
>>> x=A()
>>> x==x
False 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T17:50:03.513

这取决于 x 的值。我还没有查看源代码，但是假设您执行以下操作：

```
class A:
 def __eq__(self,other):
  return bool(random.getrandbits(1))

x = A() 
```

现在`x == x`可能返回 false。

# php - 首次运行脚本处理时间

> ID：10259529
> 
> 赞同：1
> 
> 时间：2012-04-21T13:54:59.803
> 
> 标签：php, mysql

在本地食品银行的管理应用程序中，我构建了一个 PHP 脚本来从 MySQL 数据库生成一组月度报告统计信息。看来，如果脚本在不确定的时间内没有运行，则需要几秒钟才能运行。一旦运行，脚本的后续运行将花费几分之一秒。我试图弄清楚是什么因素导致了漫长的第一次运行以及我是否可以控制它们。这种行为在我的开发系统和食物银行的主机之间是可比的，所以这不仅仅是本地现象。

我已经尝试过“刷新表”和“重置查询缓存”，但从长远来看我无法重现。关闭并重新启动 MySQL 服务器（仅在开发系统上可能）也不会延长运行时间。

我还能去哪里看？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:07:54.503

在这种情况下，我的第一个停靠点是分析脚本以查看花费时间的内容。你说你可以在本地复制问题。在这种情况下，给自己一个分析器（[xDebug](http://xdebug.org/docs/profiler)和[Zend Debugger](http://www.zend.com/en/products/studio/features#debug)都可以分析脚本，可能还有其他脚本）并分析你的脚本以查看时间的去向。

# sip - 错过了 eXosip2 功能？

> ID：10259530
> 
> 赞同：0
> 
> 时间：2012-04-21T13:55:02.037
> 
> 标签：sip, voip, exosip

我正在为嵌入式设备编写软件，基本功能是 VoIP，现在我想使用 eXosip2 实现 SIP。我已经从[http://savannah.nongnu.org/projects/exosip/下载了 libeXosip2-3.6.0 源代码](http://savannah.nongnu.org/projects/exosip/)

我检查了一些示例代码，发现要发送邀请消息，我需要调用：（ `eXosip_call_build_initial_invite`在 eXcall_api.c 中）

在这个函数中，它会调用`osip_to_init`, `osip_to_parse`,`osip_to_free`等函数，但是我在 eXosip2 文件夹中找不到这些函数....为什么？

其实我也下载了osip2库，可以找到这些函数，但是在eXosip2中看不到。这些功能是否包含在某些我无法读取内容的目标文件中？或者实际上我需要同时包含 osip2 和 eXosip2？

如果这是一个微不足道的问题，我很抱歉，我是编程新手，如果你能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:42:20.843

您还需要构建 libosip2。然后将 libeXosip2 链接到 libosip2 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T10:39:23.560

要完整，您需要下载[libosip-3.6.0](http://ftp.gnu.org/gnu/osip/)并使用这些命令行安装它（在 linux/unix 平台上）：

```
$> tar -xvzf libosip-0.X.X.tar.gz
$> mkdir linux-build
$> cd linux-build
$> ../libosip-0.X.X/configure
$> make
# make install 
```

然后 eXosip2 的编译应该可以工作。对于较新的版本也是如此。

# php - 带有模型字段的 ATK 单选按钮

> ID：10259541
> 
> 赞同：0
> 
> 时间：2012-04-21T13:57:33.967
> 
> 标签：php, frameworks, atk4

如何为模型字段定义单选按钮。

```
class Model_Campaign extends Model_Table {
  public $entity_code = 'campaign';
  function init() {
    parent::init();

    $this->addField('nombres')->mandatory(TRUE);
    $this->addField('email')->mandatory(TRUE);
    $this->addField('celular')->mandatory(TRUE);
    $this->addField('ciudad');
    $this->addField('operador')->mandatory(TRUE);
  }
} 
```

我想'operador' 字段显示像单选按钮，我想'celular' 字段只接受数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:23:13.503

1#关于单选按钮

因此，如果您想要单选按钮，这意味着您有静态值列表或者您正在引用其他模型，因此请执行以下操作：

a: `$this->hasOne("Operador", "operador")`，假设你有 Model_Operator
b:`$this->addField("operador")->datatype("list")->listData(array());`

这将使下拉出现。如果你想有单选按钮：添加`->display("radio");`

2# 验证 - 阅读文档：[http ://agiletoolkit.org/doc/form/validation](http://agiletoolkit.org/doc/form/validation)

```
->validateField('filter_var($this->get(), FILTER_VALIDATE_INT)'); 
```

例如

```
$this->addField("fieldx")->validateField('filter_var($this->get(), FILTER_VALIDATE_INT)'); 
```

请确保您使用 atk4.2（github 中的主分支）

更多过滤器：http: [//php.net/manual/en/filter.filters.validate.php](http://php.net/manual/en/filter.filters.validate.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:00:50.287

```
$this->addRadioAttribute("gender",array("male","female")); 
```

这里：`gender`是**字段名**`male`，是`female` **值**。

# ios - IOS视图控制器通信

> ID：10259542
> 
> 赞同：0
> 
> 时间：2012-04-21T13:57:34.863
> 
> 标签：ios

嗨，我有一个处理视图 A 的视图控制器 A，以及一个用于视图 B 的视图控制器 B。现在当用户单击视图 A 中的按钮时转到视图 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:37:30.430

您可以创建一个 UINavigationController ， NavigationController 的 rootViewController 是视图 A 。当用户单击视图 A 上的按钮时，将视图控制器 B 推到 NavigationController 上。使用这个方法：pushViewController：

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:03:20.367

如果您使用 Storyboard，这将变得容易得多。只需在 Storyboard 视图中选择 View A 的场景，然后在菜单栏上单击 Editor->Embed In->Navigation Controller。这将自动添加导航控制器并使视图 A 成为根视图控制器。然后只需将 Segue 从视图 A 连接到视图 B。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:05:07.803

为按钮创建 IBAction 方法，初始化视图 B，并将其推送到视图堆栈上。

这在文档中有很好的记录。你应该检查一下！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:03:04.420

将 View Controller A 推到 UINavigationController 上开始。当用户单击视图 A 中的按钮时，将视图控制器 B 推到导航控制器上。

# iphone - ASIHTTP 请求

> ID：10259543
> 
> 赞同：2
> 
> 时间：2012-04-21T13:57:36.307
> 
> 标签：iphone

请任何人知道如何发送请求并在 ASIHTTP 中发送带有一些参数的文件我的代码如下我无法发送文件

```
NSURL *audiourl = [NSURL URLWithString:@"http://dev.kuwait.tt/demo_radioapps/radio_mobile/adduserrequest.php?program_id=3&user_name=abhishek&user_email_id=abhi@tets.com&audiofile=review.caf&mode=AddRequest"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:audiourl];
[request addData:tempData withFileName:@"review.caf" andContentType:@"audio/caf" forKey:@"audiofile"];

[request setRequestMethod:@"POST"];

[request setDelegate:self];

[request startSynchronous]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:29:02.847

你有没有尝试过：`[request setData:tempData withFileName:@"review.caf" andContentType:@"audio/caf" forKey:@"audiofile"];`

// 将一个 NSData 对象的内容添加到请求中，您可以指定内容类型和文件名

```
- (void)addData:(id)data withFileName:(NSString *)fileName andContentType:(NSString *)contentType forKey:(NSString *)key 
```

// 将一个 NSData 对象的内容添加到请求中，清除任何其他具有相同 key 的内容，您可以指定 content-type 和文件名

```
- (void)setData:(id)data withFileName:(NSString *)fileName andContentType:(NSString *)contentType forKey:(NSString *)key; 
```

也许您可以验证请求是否成功

```
if ([request responseStatusCode] == 200) {
            NSLog (@"Response status code: %i", [request responseStatusCode]); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T06:17:18.667

以下是我在我的应用程序中使用的一个工作功能，请检查它是否有帮助：

```
 - (void)uploadAudioFile:(NSString  *)audioPath{
        NSURL *audiourl=[NSURL URLWithString:audioPath];
    NSData *audioData=[NSData dataWithContentsOfFile:audiourl.path];
            @try {
        NSString *strURL = @"http://www.abc.com/data/default.aspx";
        ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:strURL]];
        request= [request initWithURL:[NSURL URLWithString:strURL]];
        [request setShouldContinueWhenAppEntersBackground:YES];
        [request setShouldAttemptPersistentConnection:YES];
        [request setPostValue:[Settings UserName] forKey:@"lblUsername"];
        [request setPostValue:[Settings Password] forKey:@"lblpassword"];
        [request addData:audioData withFileName:@"audio.caf" andContentType:@"audio/x-caf" forKey:@"filMyFile"];

        [request setCompletionBlock:^{
            NSLog(@"Request Completed");             
            [self requestFinished:request];
        }];

        //if request failed
        [request setFailedBlock:^{
            [self requestFailed:request];
            NSLog(@"request Failed: %@",[request error]); 
        }];
        [request startAsynchronous];
    }
    @catch (NSException *exception) {
        NSLog(@"Exception name and reson is %@  -------  %@",exception.name, exception.reason);   
    }
    @finally {
        NSLog(@"finalyy of upload audio");
    }   
}

 - (void)requestFinished:(ASIHTTPRequest *)request {    
     NSLog(@"requestFinished");

 }

 - (void)requestFailed:(ASIHTTPRequest *)request {
       NSLog(@"requestFailed");

 } 
```

# wpf - 将鼠标移到richtextbox中的装饰器上时，WPF丢失插入符号位置

> ID：10259544
> 
> 赞同：1
> 
> 时间：2012-04-21T13:57:44.717
> 
> 标签：wpf, richtextbox, adornerlayer

我的richtextbox 中有一个装饰层。每当一个单词拼错时，我都会在richtextbox 的装饰层中添加一个装饰器。我希望能够右键单击装饰器并捕获该事件，但是当鼠标悬停在装饰元素上时，我不想丢失richtextbox 的插入符号。

我试过设置 IsHitTestVisible=False。当我像我想要的那样在装饰元素上方时，这可以防止鼠标变为指针，以便我可以单击底层的richtextbox，但它会使鼠标右键单击捕获复杂化。

```
Protected Sub Editor_PreviewRightMouseButtonUp(ByVal sender As Object, ByVal e As MouseEventArgs)

    ' Retreive the coordinates of the mouse button event.
    Dim pt As Point = e.GetPosition(CType(sender, UIElement))

    ' Initiate the hit test by setting up a hit test result callback method.
    VisualTreeHelper.HitTest(Me, Nothing, New HitTestResultCallback(AddressOf HitTestCallBack_PreviewRightMouseButtonUp), New PointHitTestParameters(pt))
    e.Handled = True
End Sub

Public Function HitTestCallBack_PreviewRightMouseButtonUp(ByVal result As HitTestResult) As HitTestResultBehavior
    If result.VisualHit.GetType() Is GetType(HighLightAdorner) Then
        Dim adornerControl As HighLightAdorner = DirectCast(result.VisualHit, HighLightAdorner)
        Dim e = New MouseButtonEventArgs(Mouse.PrimaryDevice, Environment.TickCount, MouseButton.Right)
        e.RoutedEvent = Mouse.PreviewMouseUpEvent
        adornerControl.RaiseEvent(e)
        Return HitTestResultBehavior.Stop
    End If
    Return HitTestResultBehavior.Continue
End Function 
```

这使我可以捕获鼠标右键单击，但它似乎仅在我单击 adornedElement 底部的右侧时才起作用。如果我尝试单击 adornedElement 的主体，它不会在 hitTesting 中找到它。

我是正确地解决这个问题还是有更好的方法来允许底层控件在其上方的元素需要能够接受鼠标事件时保持它的光标。

谢谢您的帮助！

# java - Java - 最终变量

> ID：10259547
> 
> 赞同：11
> 
> 时间：2012-04-21T13:58:05.207
> 
> 标签：java, variables, static, final

我知道一旦为最终变量分配了一个值，就无法更改它。但是，我对此有几个问题：

*   当我有一个字段时，比如说`static final JButton button;`在一个类之外，然后在`main`方法中，尝试为它分配一个值，`button = new JButton("OK");`我得到一个错误，告诉我删除 final 修饰符？但是，由于原始`button`变量尚未引用对象，我的印象是我可以分配一次？

*   其次，如果我完全删除了对类外的引用，`button`我`static final JButton button;`的 IDE 会声称“空白的最终字段按钮可能尚未初始化”。这是否意味着***必须***初始化所有最终字段？如果是这样，它们必须在那里初始化，然后我似乎无法在以后初始化它。

*   另外，愚蠢的问题，但我最初的假设是，当最终变量被引用到实例或数据类型时，它不能分配给其他任何东西是正确的，对吧？

此代码不完整，但用于说明我的观点：

```
public class FinalVarTester {

    static final JButton button;

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        Container container = frame.getContentPane();
        container.setLayout(new BorderLayout());
        button = new JButton("OK");
        container.add(button, BorderLayout.SOUTH);
    }

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-21T14:04:18.880

您应该在静态初始化程序中或直接初始化静态最终变量。所以要么

```
static final JButton button = new JButton(); 
```

或者

```
static final JButton button;

static {
  button = new JButton();
} 
```

The Java language specification has some more documentation about it: the [section about final variables](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4) specifies why you get the compile error:

> It is a compile-time error if a final variable is assigned to unless it is definitely unassigned (§16) immediately prior to the assignment.

and [chapter 16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html) talks about the definite assignment

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T14:03:34.917

`final`确实必须初始化字段，因为这将是程序其余部分的值。

一个例外是`final`可以在构造函数中初始化变量。由于静态字段不属于实例，它们必须被初始化（没有构造函数）直接初始化，或者静态初始化块是这样做的选项。

关于你的最后一个问题，是的，这就是为什么它被称为final。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:02:46.587

类范围内的最终变量必须在声明或构造函数中初始化。除非在主函数中声明，否则不能在主函数中分配最终变量。所有最终字段都必须初始化。所有变量都必须在使用前进行初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:13:29.513

The problem is with initiallizing the final variable in a method inside the class(main method is method too :) ). In java "final" is like constant and it could be initiallized just once. Do it with composition instead of aggregation.

```
public class FinalVarTester {

    static final JButton button = new JButton("OK");

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        Container container = frame.getContentPane();
        container.setLayout(new BorderLayout());
        container.add(button, BorderLayout.SOUTH);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T14:32:50.660

The correct answer is that a `static final` var is **always** initialized at class init time -- either to the value you supply or to the default value (null, 0, false).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-15T04:47:53.193

A final variable can only be initialized once, either via an initializer or an assignment statement. It does not need to be initialized at the point of declaration: this is called a "blank final" variable.

Types of Final Variables

1) INSTANCE FINAL VARIABLE:

A blank final instance variable of a class must be definitely assigned at the end of every constructor of the class in which it is declared; otherwise, a compile-time error occurs

2) STATIC FINAL VARIABLE

A blank final static variable must be definitely assigned in a static initializer of the class in which it is declared; otherwise, a compile-time error occurs

In both the cases the intention is to avoid using the final variable before it is initialized.

So in your case it must be initialized via the static initializer block which initializes when the class is loaded.

Ref : [http://en.wikipedia.org/wiki/Final_(Java)](http://en.wikipedia.org/wiki/Final_(Java))

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-16T18:08:45.670

A better nice codding way :

```
public class FinalVarTester 
{    
    static final JButton button; 
    public FinalVarTester()
    {    
        JFrame frame = new JFrame();
        Container container = frame.getContentPane();
        container.setLayout(new BorderLayout());
        container.add(button, BorderLayout.SOUTH);
        button = new JButton("OK");
    }
    public static void main(String[] args)    
    {
        FinalVarTester vTester = new FinalVarTester();    
    }
} 
```

# java - 您如何获取磁盘上的文件，而不仅仅是 Java 中的文件大小？

> ID：10259549
> 
> 赞同：8
> 
> 时间：2012-04-21T13:58:28.220
> 
> 标签：java, filesystems

我需要磁盘上的文件大小而不是文件大小。

```
File myFile = new File ("C:\\Send\\Capture.png");
System.out.println((int)myFile.length()); 
```

此代码给出文件大小。我需要磁盘上的文件大小。它们总是碰巧不同，如下图所示，对吧？

![在此处输入图像描述](../Images/cabaed4dbb738af60cbdbec7a7fe18ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:04:26.273

看看[链接](https://stackoverflow.com/questions/3750590/c-sharp-get-file-size-on-disk)

答案是为 c# 提供的，但由于它使用 win32 API 函数，因此您可以轻松地将其转换为 java。用于获取磁盘大小的函数是[GetCompressedFileSize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364930%28v=vs.85%29.aspx)

希望有帮助

# javascript - fadeIn() 后元素立即再次消失

> ID：10259553
> 
> 赞同：0
> 
> 时间：2012-04-21T13:59:00.917
> 
> 标签：javascript, jquery, html

[http://robinj.be/unity-2d-config-util/](http://robinj.be/unity-2d-config-util/)

在源代码中有这样的：

```
<div class="dash page" id="home">
    <?php include ('pages/home.php'); ?>
</div>
<div class="dash page" id="screenshots">
    <?php include ('pages/screenshots.php'); ?>
</div> 
```

但是当打开页面时，Firebug 只显示该`div.cash.page#home`部分。

当您单击页面底部的相机图标时，应该会发生以下情况：

1.  当前页面消失。
2.  带有屏幕截图的页面淡入。

但是会发生什么：

1.  当前页面消失。
2.  带有屏幕截图的页面淡入。
3.  带有屏幕截图的页面消失。

在这种情况下可能会出现什么问题？

--Edit--
对于*最近的修订版块，我从*[Launchpad](http://launchpad.net)下载一个页面，然后使用*正则表达式*对其进行过滤。不过，显然，我的正则表达式使用了太多的 HTML：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:15:51.343

在我的 Chrome 上，它们加载在您的背景后面。添加位置时：相对；到包装器 div （破折号页），它们出现在顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T14:21:28.317

这可能不适用于这里的特定场景，但是当我遇到与 HTML/jQuery 类似的问题时，我来到了这个页面，后来意识到问题源于忘记添加 event.preventDefault(); 给事件处理程序，以防这对将来解决此问题的人有所帮助。

# ruby-on-rails - 如何在rails中建立多对多关系

> ID：10259554
> 
> 赞同：10
> 
> 时间：2012-04-21T13:59:01.753
> 
> 标签：ruby-on-rails, migration, associations, has-and-belongs-to-many

我是 Rails 新手，正在尝试在我的 Rails 项目中建立多对多关系。我有一个小策略，但我不确定它是否正确。

**目标：** 我有一张用户表和一张组表。用户可以是许多组的一部分，每个组可能有很多用户。

**战略：**

1.  将用户迁移设置为具有名称：字符串
2.  将组迁移设置为具有名称：字符串
3.  设置连接表迁移
4.  设置用户模型，使其具有 has_and_belongs_to_many :groups
5.  设置组模型，使其具有 has_and_belongs_to_many :users

这会是正确的策略吗？谢谢！

**Railcast 答案摘要：** 对于那些感兴趣的人 - Railcast 建议您使用 has_many :through 关联，因为上述策略的限制是您无法添加额外的特定于关系的信息。

退房： http: [//kconrails.com/tag/has_many/](http://kconrails.com/tag/has_many/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T18:43:27.230

首先，我假设您有一个带有“名称”字段的用户模型和一个带有“名称”字段的组模型。

您需要**用户和组之间的模型**。我们称之为分组：

```
rails g model grouping user_name:string group_name:string 
```

在分组模型（grouping.rb）中，您输入：

```
belongs_to :user  
belongs_to :group 
```

在用户模型中：

```
has_many :groupings, :dependent => :destroy
has_many :groups, :through => :groupings 
```

在组模型中：

```
has_many :groupings, :dependent => :destroy  
has_many :users, :through => :groupings 
```

在用于编辑或更新用户配置文件的 _form 文件中，您输入：

```
<div class="field">
    <%= f.label :group_names, "Groups" %>  
    <%= f.text_field :group_names %>  
</div> 
```

最后，用户类必须知道如何处理来自表单的信息。插入 user.rb：

```
 attr_writer :group_names
  after_save :assign_groups

  def group_names
    @group_names || groups.map(&:name).join(' ')
  end

  private

  def assign_groups
    if @group_names
      self.groups = @group_names.split(/\,/).map do |name|
        if name[0..0]==" "
          name=name.strip
        end
        name=name.downcase
        Group.find_or_create_by_name(name)
      end
    end
  end 
```

assign_groups 删除空格并将所有单词小写，因此您不会有多余的标签。

现在，您可以在用户个人资料的显示文件中显示用户的组：

```
<p>Groups:
  <% @user.groups.each do |group|%>
    <%= group.name %>
   <% end %>
</p> 
```

希望，这有帮助。

# javascript - 检查客户端是否可以访问资源的 RESTful 方法是什么？

> ID：10259560
> 
> 赞同：6
> 
> 时间：2012-04-21T13:59:48.693
> 
> 标签：javascript, http, rest, google-chrome, firebug

我正在尝试确定 REST API 中的最佳实践，以确定客户端是否可以访问特定资源。两个快速示例场景：

电话目录查找服务。客户通过访问例如查找电话号码。
`GET http://host/directoryEntries/numbers/12345`
...在`12345`目录中尝试查找的电话号码在哪里。如果存在，它将返回电话号码所在的人的姓名和地址等信息。

视频格式转换服务。客户将一种格式的视频提交给例如。
`POST http://host/videos/`
...并接收服务器为此视频生成的“视频 GUID”。客户然后检查例如。
`GET http://host/videos/[GUID]/flv`
... 获取视频，转换为 FLV 格式，如果转换后的版本存在。

您会注意到，在上述两种情况下，我都没有提到如果要检查的资源*不*存在会发生什么。这是我的问题。我在[其他](http://watchitlater.com/blog/2009/11/http-method-primer-for-restful-web-services/)[各种](https://stackoverflow.com/questions/1533510/rest-standard-for-get-on-a-resource-that-doesnt-exist) [地方](https://stackoverflow.com/questions/9431922/rest-standard-for-checking-if-resource-exists)读到，客户端检查资源是否存在于此处的正确 RESTful 方式是调用（或可能）资源，如果资源不存在，它应该期待 404 响应。这很好，除了 404 响应被广泛认为是“错误”；[HTTP/1.1 规范](https://www.rfc-editor.org/rfc/rfc2616)指出4xx 类状态码是用于客户端“似乎出错”的情况。可是等等; 在这些例子中，客户肯定没有犯错。它*预计* `HEAD``GET`*它可能会返回 404（或其他；如果未授权访问此资源，可能会返回 403），并且在请求资源时没有任何错误。404 并非旨在指示“错误条件”，它只是信息 - “这不存在”。*

 *正如 HTTP 规范所暗示的，浏览器的行为就像 404 响应是一个真正的错误一样。每次 XHR 请求收到 404 时，无论是否由错误处理程序处理，Google Chrome 和 Firebug 的控制台都会在 Javascript 控制台中喷出一条大红色的“404 Not Found”错误消息，并且没有禁用它的方法。这对用户来说不是问题，因为他们看不到控制台，但作为开发人员，当我完全了解时，我不想在我的 JS 控制台中看到一堆 404（或 403 等）错误好吧，它们不是错误，而是由我的 Javascript 代码处理的信息。是线路噪音。在我给出的第二个示例中，线路噪音达到了极致，因为客户端可能会为此轮询服务器`/flv`因为编译可能需要一段时间，并且客户端希望显示“尚未编译”，直到它获得非 404。JS 控制台可能每隔一两秒就会出现 404 错误。

那么，这是我们使用 REST 检查资源是否存在的最佳或最合适的方法吗？我们如何绕过 JS 控制台中的线路噪音？很可能会建议，在我的第二个示例中，可以查询不同的 URI 来检查编译*状态*，例如：
`GET http://host/videos/[GUID]/compileStatus`
...但是，对我来说，这似乎有点违反 REST 原则；您没有完全使用 HTTP 并注意 HTTP 标头，而是创建自己的协议，通过该协议您在正文中返回信息，告诉您您想知道的内容，并始终返回 HTTP 200 以关闭浏览器. 这是对 SOAP 的主要批评——它试图“绕过”HTTP，而不是充分利用它。根据这一原则，为什么需要返回 404 状态码？您总是可以返回 200 - 当然，200 表示资源的*状态信息*可用，并且状态信息告诉您您真正想知道的内容 - 资源未找到。当然，RESTful 方式应该是返回 404 状态码。

如果我们将它应用到我上面的第一个例子中，这个机制似乎更加人为；客户可能会询问：
`GET http://host/directoryEntries/numberStatuses/12345`
...当然会收到 200；该号码`12345`的*状态信息*存在，并告诉您...在目录中找不到该号码。这意味着查询的任何数字都是“200 OK”，即使它可能不存在——这看起来像是一个好的 REST 接口吗？

我错过了什么吗？是否有更好的方法来确定资源是否存在 RESTfully，或者是否应该更新 HTTP 以指示非 2xx 状态代码不一定被视为“错误”，而只是信息？浏览器是否应该能够进行配置，以便它们不会总是在 JS 控制台中将非 2xx 状态响应输出为“错误”？

PS。如果你读到这里，谢谢。;-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T14:53:31.337

使用 404 表示未找到资源是完全可以的*。*“RESTful Web Services”一书中的一些引用（顺便说一句，关于 REST 的非常好的书）：

> 404 表示服务器无法将客户端的 URI 映射到资源。[...] Web 服务可以使用 404 响应作为向客户端发出 URI 是“免费”的信号；然后，客户端可以通过向该 URI 发送 PUT 请求来创建新资源。请记住，404 可能是掩盖 403 或 401 的谎言。可能是资源存在，但服务器不想让客户端知道它。

当服务找不到请求的资源时使用404，不要过度使用来指示实际上与资源存在无关的错误。此外，客户端可以“查询”服务以了解此 URI 是否免费。

### 执行长时间运行的操作，例如视频文件的编码

> HTTP 有一个同步的请求-响应模型。客户端向服务器打开一个 Internet 套接字，发出请求，并保持套接字打开，直到服务器发送响应。[...]
> 
> 问题不是所有的操作都可以在我们期望的 HTTP 请求的时间内完成。有些操作需要数小时或数天。在这种不活动之后，HTTP 请求肯定会超时。即使没有，谁愿意让套接字保持打开数天只是等待服务器响应？有没有办法通过HTTP异步暴露这样的操作？
> 
> 有，但它要求将操作拆分为两个或多个同步请求。第一个请求产生操作，随后的请求让客户端了解操作的状态。秘密是状态码 202（“已接受”）。

所以你可以做`POST /videos`一个视频编码任务。该服务将接受任务，回答 202 并提供指向描述任务状态的资源的链接。

```
202 Accepted
Location: http://tasks.example.com/video/task45543 
```

客户端可以查询此 URI 以查看任务的状态。一旦任务完成，资源的表示将变得可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:27:50.367

我认为您已经更改了请求的语义。使用 RESTful 架构，您正在请求资源。因此，请求不存在或未找到的资源被视为错误。

我用：

*   404 如果`GET http://host/directoryEntries/numbers/12345`不存在。

*   400 实际上是一个错误的请求`400 Bad Request`

也许，在您的情况下，您可以考虑改为搜索。使用资源集合上的查询参数完成搜索

你想要的是 `GET http://host/directoryEntries/numbers?id=1234` 哪个将返回 200 和一个空列表（如果不存在）或匹配列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T14:28:11.503

IMO 客户确实在请求不存在的资源时犯了错误。在您的两个示例中，可以以不同的方式设计服务，以便在客户端避免错误。例如，在已分配 GUID 的视频转换服务中，videos/id 处的消息正文可以包含指示转换是否完成的标志。

同样，在电话目录示例中，您正在搜索资源，这可以通过 /numbers/?search_number=12345 等方式处理，以便服务器返回匹配资源列表，然后您可以进一步查询。

浏览器是为使用 HTTP 规范而设计的，显示错误是真正的响应（也很有帮助）。但是，您需要将 Javascript 代码视为独立于浏览器的实体。所以你有你的 Javascript REST 客户端，它知道服务是什么样的，而浏览器对你的服务来说有点愚蠢。

此外，REST 在理论上独立于协议。HTTP 恰好是使用 REST 的最常见协议。我能想到的另一个例子是 Android 内容提供程序，它的设计是 RESTful 但不依赖于 HTTP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:07:11.700

我只见过 GET/HEAD 请求在资源不存在时返回 404（未找到）。我认为，如果您只想获取资源的状态，则头部请求会很好，因为它不应该返回资源的主体。通过这种方式，您可以区分您尝试检索资源的请求和您尝试检查其是否存在的请求。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

编辑：我记得通过在原始请求中添加一个标头来指示服务器应如何处理 404 错误，从而了解了另一种解决方案。类似于用 200 响应的东西，但是一个空的身体。*

# android - Android第一个TableRow没有显示

> ID：10259562
> 
> 赞同：0
> 
> 时间：2012-04-21T14:00:08.067
> 
> 标签：android, button, tablerow

我有一个奇怪的问题。我从 TableRow 派生了 MessageRow。我用一个 TableRow（标题）和 100 个 MessageRows 填充了一个表。但是当我将表格添加到 Horizo​​ntalScroll 视图时，**只有 Messagerows 显示**。如果我在调试器中检查表，所有行都在那里，包括标题，以及正确的子项和文本。

这是简化的代码：

```
public class MessageRow extends TableRow {
    public TextView tvData1;
    public TextView tvData2;
    public TextView tvData3;

    public MessageRow(Context context) {
        this(context, null);
    }

    public MessageRow(Context context, AttributeSet attrs) {
        super(context, attrs);
        tvData1 = new TextView(context);
        tvData2 = new TextView(context);
        tvData3 = new TextView(context);
    }

    public void setData(String data1, String data2, String data3) {
        tvData1.setText(data1);
        tvData2.setText(data2);
        tvData3.setText(data3);

        addView(tvData1);
        addView(tvData2);
        addView(tvData3);
    }
} 
```

活动代码：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewer);

        mTable = new TableLayout(this);

        HorizontalScrollView hview = (HorizontalScrollView) findViewById(R.id.hscroll);
        mTable.setBackgroundColor(Color.WHITE);
        populate(mTable);
        hview.addView(mTable);
    }

    public void setHeader(TableLayout tl) {
        TableRow mHeader = new TableRow(getContext());
        mHeader.addView(getColumnHeader("Data#1"));
        mHeader.addView(getColumnHeader("Data#2"));
        mHeader.addView(getColumnHeader("Data#3"));
        mHeader.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        tl.addView(mHeader);
    }

    public void populate(TableLayout tl) {
        setHeader(tl);
        for(int i = 0; i < 100; i++) {
            MessageRow mr = new MessageRow(getContext());
            mr.setMessage("xxx"+i,"yyy"+i,"zzz"+i);
            mr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
            tl.addView(mr);
        }
    }

    private Button getColumnHeader(String name) {
        Button bt = new Button(getContext());
        LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        params.rightMargin = params.leftMargin = 2;
        bt.setLayoutParams(params);
        bt.setText(name);
        return bt;
    } 
```

现在，我尝试像这样*绕过***getColumnHeader()**函数：

```
 public void setHeader(TableLayout tl) {
        TableRow mHeader = new TableRow(getContext());
        //mHeader.addView(getColumnHeader("Data#1"));
-->         Button bt1 = new Button(getContext());
-->         bt1.setText("Data#1");
-->         mHeader.addView(bt1);
        //mHeader.addView(getColumnHeader("Data#2"));
-->         Button bt2 = getColumnHeader("Data#2");
-->         mHeader.addView(bt2);

        mHeader.addView(getColumnHeader("Data#3"));
        mHeader.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        tl.addView(mHeader);
    } 
```

然后显示 bt1 (Data#1)！！！但不是 Data#2 或 Data#3。这暗示函数**getColumnHeader()**是不好的。但不是根据调试器，当我**检查**bt1 和 bt2 时它们看起来不错，我无法检测到手动实例化的按钮 bt1 和返回的按钮 bt2 之间有什么**区别。**

*旁注：我不知道这是否是最好的方法，但是为了比较两个变量，我只是右键单击并复制变量，然后将其粘贴到记事本++中的两个不同文件（一个用于 bt1，一个用于 bt2）并使用比较插件。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T07:10:10.200

更多信息。
我设法显示按钮，进一步调试表明在函数**getColumnHeader()**中为每个按钮设置布局参数会导致问题。
我仍然不知道为什么。

按钮成员 mLayoutParams 为空是可以的，但是当创建（**.setLAyoutParams()**）并分配值（例如宽度和高度）时，按钮突然不显示。
这是补丁，...直到我弄清楚原因。

```
private Button getColumnHeader(String name) {
    Button bt = new Button(getContext());
    //LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    //params.rightMargin = params.leftMargin = 2;
    //bt.setLayoutParams(params);
    bt.setText(name);
    return bt;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:29:48.367

最后一块拼图。
我尝试了很多变化，终于成功了！用**TableRow.LayoutParams**
替换**LayoutParams**就可以了。 它们的结构非常相似，甚至可能 TableRow.LayoutParams 都是从 LayoutParams 派生的。 我将把谜团留在这里，直到一些专家阐明为什么会发生这种情况。 最终代码：

 **```
private Button getColumnHeader(String name) {
    Button bt = new Button(getContext());
    TableRow.LayoutParams params = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.MATCH_PARENT);
    params.rightMargin = params.leftMargin = 2;
    bt.setLayoutParams(params);
    bt.setText(name);
    return bt;
} 
```**

# macos - 尝试移植 intall gcc47，错误：找不到依赖项 'ld64'

> ID：10259568
> 
> 赞同：3
> 
> 时间：2012-04-21T14:01:01.393
> 
> 标签：macos, gcc, macports

尝试在 osx 10.6.8 上安装 gcc47 但出现以下错误：

```
 sudo port install gcc47
--->  Computing dependencies for gcc47
Error: Dependency 'ld64' not found.
Error: Status 1 encountered during processing.
To report a bug, see <http://guide.macports.org/#project.tickets> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:14:57.227

我认为它仍然存在于 /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports/devel/ld64 但是，Portfile 似乎有很多错误，以至于端口索引无法解析它。我先安装了 llvm-3.0，然后编辑了 Portfile，注释掉以下几行

```
#if {![variant_isset llvm29] && ![variant_isset llvm30] && ![variant_isset llvm31]} {
#    default_variants +llvm30
#}

#set llvm_version {}
#variant llvm29 conflicts llvm30 llvm31 description {Use llvm-2.9 for libLTO} {
#    set llvm_version        2.9
#    depends_lib-append      port:llvm-${llvm_version}
#}

#variant llvm30 conflicts llvm29 llvm31 description {Use llvm-3.0 for libLTO} {
set llvm_version        3.0
#    depends_lib-append      port:llvm-${llvm_version}
#}

#variant llvm31 conflicts llvm29 llvm30 description {Use llvm-3.1 for libLTO} {
#    set llvm_version        3.1
#    depends_lib-append      port:llvm-${llvm_version}
#} 
```

在此之后，运行“sudo portindex”解决了这个问题。最后我能够安装 ld64 和 gcc47。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T19:11:23.540

以下命令解决了我的问题。因为在我的情况下，该错误仅适用于 ld64 和 cctools 端口。

```
sudo port clean ld64 cctools
sudo port install gcc47 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T02:30:31.210

运行以下命令；似乎现在工作。

```
sudo port selfupdate
sudo port install gcc47 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T00:24:55.730

我不知道你是怎么得到这个问题的。**将系统升级到Mavericks**后，我也遇到了这个问题。检查**main.log**文件后发现报错是因为build找不到。然后，我**安装了最新版本的 Xcode 命令行工具**，它可以工作了！希望我的经验对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T21:22:18.123

ld64 包重新出现在索引上，但无法构建:-(

首先，许可协议存在 xcodebuild 问题。我用[1](https://github.com/kokoabim/iOSOpenDev/wiki/Troubleshoot)的尖端固定它。但是现在由于未声明的标识符而导致构建失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T14:40:21.187

截至今天，ld64 软件包已从 macports 中提取： [http](http://www.macports.org/ports.php?by=name&substr=ld64) ://www.macports.org/ports.php?by=name&substr=ld64 不过昨天它仍然可用。

但是，由于 llvm-3.0 的构建错误，我昨天尝试时没有正确构建包。

# javascript - 父 div 上的垂直到水平菜单调整大小

> ID：10259570
> 
> 赞同：0
> 
> 时间：2012-04-21T14:01:23.383
> 
> 标签：javascript, jquery, css, resize, media-queries

我会是一个简单的css效果或js，但我还没有找到解决方案。

我的目标是在 div 中创建一个菜单，当我调整浏览器窗口或父 div 的大小时，这会将自身设置为隐藏，我需要将另一个 div 设置为可见，其中包含水平方向的相同菜单。

```
<div id="when_size_if_of_100px_visible_if_not_hidden">[menu item1 item2 item 3 item4]</div>

<div id="when_size_sup_of_100px_visible_if_not_hidden">
 menu  
 item1
 item2
 item3
</div> 
```

我希望清楚。感谢您的所有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:04:51.527

您可以使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)根据浏览器窗口大小编写不同的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:22:28.577

正如 newtron 所说，您应该使用媒体查询来执行此操作。您只有一个内容，但它会根据窗口大小以不同的方式显示。这是一个工作示例[http://jsfiddle.net/pomeh/Gdve3/](http://jsfiddle.net/pomeh/Gdve3/)

使用的 HTML 代码是

```
<ul>
    <li>menu A</li>
    <li>menu B</li>
    <li>menu C</li>
    <li>menu D</li>
</ul>

<div>
    Window width is lower than 500px !
</div> 
```

和CSS代码

```
li {
    border: solid black 1px;
    width: 100px;
    display: inline-block;
}

div {
    display: none;
}

@media (max-width:500px) {
    li {
        display: block;
    }
    div {
        display: block;
    }
}​ 
```

另请注意，IE 不支持媒体查询。为此，您可以使用 Respond.js Javascript 库[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:05:02.153

你可以使用`resize`：

```
$(window).resize(function(){
  if (window.innerWidth < 100){
    $("#when_size_if_of_100px_visible_if_not_hidden").hide();
    $("#when_size_sup_of_100px_visible_if_not_hidden").show();
  } else {
    $("#when_size_if_of_100px_visible_if_not_hidden").show();
    $("#when_size_sup_of_100px_visible_if_not_hidden").hide();
  }
}); 
```

# ruby - 尝试解析 JSONfile 时出现嵌套错误

> ID：10259571
> 
> 赞同：4
> 
> 时间：2012-04-21T14:01:33.033
> 
> 标签：ruby, json, reddit

我正在尝试解析 Reddit 线程的 JSON 文件及其所有评论。但是当我尝试解析 JSON 时，我得到一个**“in `parse': nesting of 20 is too deep”**错误。

以下是我使用的代码：

```
#require 'net/http'
#require 'rubygems'
#require 'json'

@response = Net::HTTP.get(URI.parse("http://www.reddit.com/r/AskReddit/comments/sjm1z/what_is_your_most_useless_talent/.json"))
result = JSON.parse(@response) 
```

无论如何我可以解决这个问题吗？

对我来说，解析所有较小的子线程并不是必需的。有没有办法设置嵌套深度限制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T14:05:23.090

尝试设置 max_nesting 值：

```
result = JSON.parse(@response, :max_nesting => 100) 
```

# html - HTML 页面部分

> ID：10259573
> 
> 赞同：-2
> 
> 时间：2012-04-21T14:02:09.437
> 
> 标签：html

有什么方法可以测量我的 HTML 页面，然后找出它的 40% 或 60% 的长度，以便页面的某些元素只能占据那么多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:06:22.327

是的，使用 CSS 这很简单

```
<div style="width: 70%;"> this will take up 70% of your width </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:13:25.100

（就水平对齐而言）您可以使用 2 个 div 元素和 CSS 实现这种样式/标记；

```
<!--Your HTML-->
<div id="fortypercent" class="next_to_each_other"></div>
<div id="sixtypercent" class="next_to_each_other"></div>
<!--Ends here-->

/***Your CSS***/
div.next_to_each_other {position:relative; float:left;}
div#fortypercent {width:40%;}
div#sixtypercent {width:60%;}
/***Ends here***/ 
```

就这样。

（就垂直对齐而言）您也可以使用 2 个 div 元素和 CSS 来实现这种样式/标记；这次标记保持不变，样式如下。

```
/***Your CSS***/
html, body {width:100%; height:100%; margin:0px; padding:0px;}
div.next_to_each_other {position:relative; float:left;}
div#fortypercent {width:100%; height:40%;}
div#sixtypercent {width:100%; height:60%;}
/***Ends here***/ 
```

您可以通过为每个 div 分配不同的背景颜色来确定它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:07:24.867

这很容易做到，尽管您需要了解 JavaScript。

这个语句将给 "foo" id "bar" 的像素长度：

```
foo = document.getElementById('bar').offsetHeight; 
```

如果你这样做

```
height1 = foo * 0.4;
height2 = foo * 0.6; 
```

你可以用它来做

```
document.getElementById('height1').style.height = height1 + 'px';
document.getElementById('height2').style.height = height2 + 'px'; 
```

使用此方法，您可以查看一个元素的高度，并根据第一个元素设置其他元素的高度。

告诉我是否有您要我添加的内容！

# java - 使用 Log4J 捕获并记录所有未处理的异常

> ID：10259574
> 
> 赞同：5
> 
> 时间：2012-04-21T14:02:22.860
> 
> 标签：java, exception-handling, log4j

我有一个使用 Log4J 作为日志框架的中型 Java Web 应用程序。现在我正在通过我的异常处理和日志记录来使我的应用程序更加健壮。它在 Tomcat 6 上运行，以 spring、hibernate 和 Struts2 作为框架。

我想做的是记录应用程序中发生的每一个未处理的异常。这样我就可以记录它们，让 log4j 给我发一封电子邮件，然后看看我在哪里错过了 try-catch 块。最后相应地修改我的代码。

因为现在所有未处理的异常都直接打印到屏幕上，我的用户通常不会费心复制我的异常。

我知道我可以阅读 tomcat 日志，但我想让它们由 log4j 处理，这样我就可以收到关于每个此类异常的电子邮件。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:28:49.587

使用 Struts2，您可以为特定类型定义[全局异常映射。](http://struts.apache.org/2.3.1.2/docs/exception-handling.html)`Exception`如果您为 java.lang.Exception 定义一个，它可以作为任何未映射到其他地方的异常的包罗万象：

```
<global-exception-mappings>
  <exception-mapping exception="com.example.MyException result="myError" />
  <exception-mapping exception="java.lang.Exception" result="error" />
</global-exception-mappings>

<global-results>
  <result name="myError">/myError.jsp</result>
  <result name="error">/error.jsp</result>
</global-results> 
```

在您的错误 JSP (*) 中，您可以使用 log4j 记录它们并为您的用户提供一个很好的“出现问题”错误页面，而不会让他们面对令人困惑的堆栈跟踪。

(*) 更好：一个错误*操作*，您可以在其中记录异常，然后才让 Struts 呈现一个 JSP，您可以在其中告诉用户出现问题。无需使用日志记录代码使 JSP 混乱。

**关于修改所有代码：**

不要盲目地在代码中添加 catch 块——如果某些代码不能处理异常，就让它传播（`throws`如果需要，在方法签名上添加一个子句）。在堆栈中的某些级别，考虑包装抛出的异常并添加一些信息来帮助识别原因并重新抛出它：

```
 catch (IllegalArgumentException ex) {
    // Always pass the original exception along, never just the message.
    // It's much easier to find the root cause that way.
    throw new UpdateException("Failed to parse foo object: " + foo, ex);
 } 
```

此外，抵制空捕获块的诱惑。他们吞下了异常，您可能永远不会发现您的应用程序中可能出现的问题或问题。记录所有异常，除非你非常确定你永远不会对它们感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:28:05.357

创建自定义错误页面，请参见此处：[当 servlet 抛出运行时异常时，如何在浏览器中显示用户友好的错误页面？](https://stackoverflow.com/questions/2748220/how-to-show-user-friendly-error-page-instead-of-tomcat-log-with-stack-trace-in-b)

在错误页面中，您可以添加一些 java 代码以使用 log4j 记录异常。

注意：将 java 代码放在 JSP 中通常被认为是不好的做法，但在 JSP 中记录错误是我认为可以接受的一个地方。

# magento - Magento 1.5.0.1 偶尔“调用非对象上的成员函数 getId()”

> ID：10259583
> 
> 赞同：1
> 
> 时间：2012-04-21T14:03:26.367
> 
> 标签：magento, magento-1.5

我正在使用 Magento 1.5.0.1，并且在结帐时偶尔会出现“在非对象上调用成员函数 getId()”错误。

客户将尝试使用相同的详细信息进行多次结帐，并且错误“调用非对象上的成员函数 getId()”将不断出现，但几秒钟或几分钟后，该错误将停止，结帐将通过。

这不会发生 100% 的时间。

我已经检查过： 1) Apache 错误日志是干净的，apache 有很多可用的系统资源。根据官方指南针对 Magento 进行了优化。2) MySQL 错误日志是干净的，mysql 有大量的系统资源免费。根据官方指南针对 Magento 进行了优化。3) PHP 错误日志只会显示“调用非对象上的成员函数 getId()”，没有迹象表明 PHP 内存不足，即分配内存失败的典型错误是内存耗尽。4) 已执行所有其他 Magento 优化：缓存、编译、APC、PHP 限制为 256mb。5) APC 有大量的系统资源费用。6) CPU 从未达到 25-50% 的使用率，RAM 仅使用了 40-50%，超过 50% 的空闲！

还可以获得“在非对象上调用成员函数 getStoreId()”错误消息。

我正在撕扯我的头发，尝试我还能做些什么！在 50 个订单中，大约有 2-3 个订单会搞砸，即客户在 5-10 分钟的时间内尝试结账约 5-10 次。

可以锁定什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T01:54:18.240

当我分析我的 Magento 安装 (1.4.2) 上的类似错误时，我能够总结出这是基于 whois 和 nslookup 搜索对网站的某种黑客攻击。人们（机器人？）在没有正确初始化会话的情况下下订单，因此没有为来自 Id 的商店（或任何其他）对象建立。这应该被标记为一个错误，以便他们可以正确处理这种情况并重新初始化会话或执行一些其他操作，以更好地防止人们在表单逻辑周围戳。

此外，代码中存在某种错误，有时客户可以订购 0 美元的商品。在每种情况下，都是普通客户，当他打电话时，他很惊讶，并给了我们人工付款处理的 CC 详细信息。每天清除缓存和所有第一件事都会对此有所帮助。

# java - Tomcat 无法启动 - java.lang.ClassNotFoundException: org.hibernate.Query

> ID：10259586
> 
> 赞同：0
> 
> 时间：2012-04-21T14:04:12.510
> 
> 标签：java, hibernate, tomcat, servlets

我尝试在 Servlet 中使用 Hibernate，但是当我启动服务器（Tomcat 7.0 - 右键单击​​>>启动）时，服务器无法启动，而是给了我这个错误：

```
.....
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start  component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/stockservletconnection]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at java.util.concurrent.FutureTask.get(Unknown Source)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component   [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/stockservletconnection]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
... 7 more
    Caused by: java.lang.NoClassDefFoundError: org/hibernate/Query
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Unknown Source)
at java.lang.Class.getDeclaredFields(Unknown Source)
at org.apache.catalina.startup.WebAnnotationSet.getDeclaredFields(WebAnnotationSet.java:452)
at   org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:257)
at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:136)
at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
  Caused by: java.lang.ClassNotFoundException: org.hibernate.Query
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
... 21 more
 Apr 21, 2012 8:42:42 PM org.apache.catalina.core.ContainerBase startInternal
 SEVERE: A child container failed during start
 java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start    component [StandardEngine[Catalina].StandardHost[localhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at java.util.concurrent.FutureTask.get(Unknown Source)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
 Caused by: org.apache.catalina.LifecycleException: Failed to start component   [StandardEngine[Catalina].StandardHost[localhost]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
  Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
  Apr 21, 2012 8:42:42 PM org.apache.catalina.startup.Catalina start
  SEVERE: Catalina.start: 
  org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
 Caused by: org.apache.catalina.LifecycleException: Failed to start component    [StandardService[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
 Caused by: org.apache.catalina.LifecycleException: Failed to start component   [StandardEngine[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more
 Apr 21, 2012 8:42:42 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 564 ms 
```

根据这条线：

```
 Caused by: java.lang.ClassNotFoundException: org.hibernate.Query 
```

我认为这个 servlet 找不到休眠 jar 库。

这是我的 servlet 的结构（DataServlet.java 是我的 servlet 类）：

我还将所有需要的 jar 复制到 WEB-INF/lib..

![在此处输入图像描述](../Images/1c0b7220e30e2ef861dcfeb2760cff58.png)

我哪里错了？

```
 EDIT : I SOLVED THE PROBLEM, ONE FILE WAS MISSING WHEN ADDED TO WEB-INF/lib. 
```

# java - 如果我想构建一个不需要使用 gsm 调制解调器的 java 应用程序，有没有出路？

> ID：10259594
> 
> 赞同：0
> 
> 时间：2012-04-21T14:05:28.000
> 
> 标签：java, telephony

我想构建一个能够向任何手机号码发送短信的 java 应用程序。但问题是我没有 gsm 调制解调器。是否有任何替代方式可用。我可以通过连接将自己的手机用作调制解调器吗它用 USB 电缆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:13:43.243

是的，您可以通过电缆连接自己的手机并以这种方式发送/接收短信。然而，使用一些可以将电子邮件转换为 SMS 的在线服务可能会更容易。这样你的应用程序就变得简单多了。

关于电子邮件到 SMS 的一些 SO 问题：

*   [测试电子邮件到 SMS](https://stackoverflow.com/questions/4075179/testing-email-to-sms)
*   [通过电子邮件发送短信](https://stackoverflow.com/questions/2523670/sms-through-email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:50:28.147

您需要在任何第三方`SOAP`或简单`HTTP`的 SMS 服务提供商处拥有订阅帐户。例如[`SimpleWire / OpenMarket`](http://www.openmarket.com/)，第三方消息传递提供商代表您发送 SMS 并让您的服务器应用程序传递该消息的状态。您需要将其 API 与您的服务器应用程序集成，并且您的应用程序不需要任何 GSM 调制解调器来连接以进行 SMS 处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:13:22.653

在大多数情况下，现代手机都有可能，但这取决于手机型号。你的手机型号是什么？

# database - 将大型火鸟数据文件表加载到数据集中

> ID：10259597
> 
> 赞同：0
> 
> 时间：2012-04-21T14:05:44.477
> 
> 标签：database, firebird, interbase

我有一个 Firbird 1.0 数据文件，我正在使用它，权重约为 25 GB。它有一个表，其中将文档和文档的图片存储为 blob。所以，我问是否可以使用fib数据集打开这样的大数据文件，我首先尝试在运行时打开数据集=没有成功，因为网格是空的，所以另一个尝试是在设计模式下将其设置为活动，它也无法打开，因为它的 active 属性设置为 true 但网格中没有获取数据！

你有什么想法让它工作吗？我必须设置任何 blob Cashe 选项吗？还是根本不可能？

现在我正在使用我的笔记本电脑（Win 7 x64 4GB Ram）进行开发，稍后它将被部署到我的服务器机器上！

我已经修好了！

所以我的另一个问题是关于使用流将 blob 数据加载到 TImage 组件

我正在这样做，但它会弹出访问冲突

这是我的代码，您可以查看

```
 DM->stImage->Active=true;
    try {
        TMemoryStream *ms=new TMemoryStream();
        TStream *ps=DM->stImage->CreateBlobStream(DM->stImage->FieldByName("PHOTO") ,bmRead);
        ms->Position=0;
        ms->CopyFrom(ps,ps->Size);
        ms->SaveToFile("c:\\1.jpg");
//      imgPass->Picture->LoadFromStream(ms);
        imgPass->Picture->Graphic->LoadFromStream(ps);
        delete ms;
        delete ps;
    }
    catch (Exception &e) {
        ShowMessage(e.ToString());
    } 
```

它可以保存它但 `imgPass->Picture->Graphic->LoadFromStream(ps);`不起作用！可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:36:13.623

为了避免 AV，您需要重置流位置，在调用“CopyFrom”函数期间向前移动。

因此，您的代码应如下所示（仅相关行）：

```
ms->CopyFrom(ps,ps->Size);
ms->SaveToFile("c:\\1.jpg");
ps->Position = 0; //<<<<<<<<<< here we reset the stream position
imgPass->Picture->Graphic->LoadFromStream(ps);
//imgPass->Picture->Bitmap->LoadFromStream(ps); // <<< if a bitmap and not JPEG 
```

希望这对您有所帮助。

PS：这个问题应该被标记为 C++（或 C++Builder），因为它不仅仅是一个数据库主题。

# java - 如何使用 ArrayList 的 get() 方法

> ID：10259599
> 
> 赞同：10
> 
> 时间：2012-04-21T14:05:51.517
> 
> 标签：java, arraylist

我是 java 新手（也是 OOP 的新手），我正在尝试了解类 ArrayList，但我不明白如何使用 get()。我尝试在网上搜索，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T14:08:22.170

这是[ArrayList.get()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#get%28int%29)的官方文档。

无论如何它很简单，例如

```
ArrayList list = new ArrayList();
list.add("1");
list.add("2");
list.add("3");
String str = (String) list.get(0); // here you get "1" in str 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-18T20:00:17.427

简单地说，`get(int index)`返回指定索引处的元素。

所以说我们有一个`ArrayList`of `String`s：

```
List<String> names = new ArrayList<String>();
names.add("Arthur Dent");
names.add("Marvin");
names.add("Trillian");
names.add("Ford Prefect"); 
```

可以将其可视化为： [![数组列表的可视化表示](../Images/7d300f5a3df2612db9b4fe6996603f16.png)](https://i.stack.imgur.com/GhDrK.png) 其中 0、1、2 和 3 表示`ArrayList`.

假设我们想要检索其中一个名称，我们将执行以下操作： `String name = names.get(1);` 返回索引为 1 处的名称。

[![获取索引 1 处的元素](../Images/2ebc7f5e6245d3cbfc173a34c5825fa2.png)](https://i.stack.imgur.com/rijg9.png) 因此，如果我们要打印出名称`System.out.println(name);`，输出将是`Marvin`- 尽管他可能对我们打扰他不太高兴。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T14:09:09.860

您使用列表中[`List#get(int index)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)的索引来获取对象`index`。你这样使用它：

```
List<ExampleClass> list = new ArrayList<ExampleClass>();
list.add(new ExampleClass());
list.add(new ExampleClass());
list.add(new ExampleClass());
ExampleClass exampleObj = list.get(2); // will get the 3rd element in the list (index 2); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-19T00:03:49.153

ArrayList`get(int index)`方法用于从列表中获取元素。我们需要在调用 get 方法时指定索引，它会返回指定索引处的值。

```
public Element get(int index) 
```

**示例**：在下面的示例中，我们使用 get 方法获取数组列表的几个元素。

```
package beginnersbook.com;
import java.util.ArrayList;
public class GetMethodExample {
   public static void main(String[] args) {
       ArrayList<String> al = new ArrayList<String>();
       al.add("pen");
       al.add("pencil");
       al.add("ink");
       al.add("notebook");
       al.add("book");
       al.add("books");
       al.add("paper");
       al.add("white board");

       System.out.println("First element of the ArrayList: "+al.get(0));
       System.out.println("Third element of the ArrayList: "+al.get(2));
       System.out.println("Sixth element of the ArrayList: "+al.get(5));
       System.out.println("Fourth element of the ArrayList: "+al.get(3));
   }
} 
```

输出：

```
First element of the ArrayList: pen
Third element of the ArrayList: ink
Sixth element of the ArrayList: books
Fourth element of the ArrayList: notebook 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-21T14:08:31.513

这会有帮助吗？

```
final List<String> l = new ArrayList<String>();
for (int i = 0; i < 10; i++) l.add("Number " + i);
for (int i = 0; i < 10; i++) System.out.println(l.get(i)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-12T15:00:02.053

get() 方法返回一个元素。例如：

```
ArrayList<String> name = new ArrayList<String>();
name.add("katy");
name.add("chloe");
System.out.println("The first name in the list is " + name.get(0));
System.out.println("The second name in the list is " + name.get(1)); 
```

输出：

列表中的第一个名字是 katy 列表中的第二个名字是 chloe

# c# - 暂停 CS 脚本

> ID：10259600
> 
> 赞同：0
> 
> 时间：2012-04-21T14:05:56.907
> 
> 标签：c#, scripting

使用 CS-Script 时是否有等效于 Lua 的 lua_yield 的方法，用于暂停脚本，并在获得所需数据后继续？一个例子可以是一个脚本，它调用一个是或否函数，并且必须首先通过网络从客户端接收答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:50:27.657

我们正在将该功能添加到 C# 5 中，该功能目前处于测试阶段。

你可以在这里读到它：

[http://msdn.microsoft.com/en-us/async](http://msdn.microsoft.com/en-us/async)

# java - Weka：ADTree 和 LADTree 非法选项错误

> ID：10259602
> 
> 赞同：1
> 
> 时间：2012-04-21T14:06:10.673
> 
> 标签：java, weka

在我开始我的问题之前，我应该先说 Weka 主站点已关闭，我无法访问其支持页面。

我正在尝试从某些自动化软件中调用 Weka 分类器，但遇到了问题 - 我使用资源管理器 GUI 中我知道是合法的选项来调用它，但我收到一个异常，告诉我这些选项是非法的：

资源管理器分类器路径：

```
weka.classifiers.trees.ADTree -B 10 -E -3 
```

我的代码：

```
classifier = trainWekaClassifier(matlab2weka('training', featurelabels, train), trees.ADTree', {strcat('-B 10 -E -3')}); 
```

错误是：

```
??? Java exception occurred:
java.lang.Exception: Illegal options: -B 10 -E -3

    at weka.core.Utils.checkForRemainingOptions(Utils.java:482)

    at weka.classifiers.trees.ADTree.setOptions(ADTree.java:1144)

Error in ==> trainWekaClassifier at 40
        wekaClassifier.setOptions(options);

Error in ==> classifier_search at 223
            classifier = trainWekaClassifier(matlab2weka('training', featurelabels,
            train), 'trees.ADTree', {strcat('-B 10 -E -3')}); 
```

您能提供的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T00:12:29.830

答案在这里： http: [//old.nabble.com/API-questions-td24569571.html](http://old.nabble.com/API-questions-td24569571.html)

如果该网站再次出现故障并且您的搜索将您带到这里，问题是“-B 10”不是有效的输入。它需要是一个字符串数组，{"-B", "10"}。

# c - 实现功能/持久字典数据结构

> ID：10259605
> 
> 赞同：7
> 
> 时间：2012-04-21T14:06:25.197
> 
> 标签：c, data-structures, functional-programming

我正在尝试在 C 中实现一个函数式字典。实现函数式列表或 b 树相当容易，但我几乎找不到关于字典/关联数组的任何引用。

我查看了 erlang 的 dict 实现——在他们参考这篇论文的源代码中：
[The Design and Implementation of Dynamic Hashing for Sets and Tables in Icon](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.14.5908&rep=rep1&type=pdf)。

如果有人能简要解释一下 erlang 的方法或解决此问题的其他方法，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T11:39:11.373

在 C 中实现持久数据结构的工作方式与在函数式语言中的实现方式基本相同。Chris Okasaki 的[Purely Functional Data Structures](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)是一个很好的参考。

一般来说，将固定宽度的整数映射到对象就足够了，因为虽然这本身并不能为您提供一个完整的字典，但您可以在上面构建一个字典：使用实际键的哈希作为底层映射，并让叶子指向相同哈希值的（键，值）对列表。

棘手的部分是内存管理，因为您通常不知道数据结构的某些部分何时变得无法访问。幸运的是，由于大多数持久性数据结构都基于树，因此引用计数通常效果很好。为了能够管理数据结构引用的对象，您可以为当叶节点的引用计数变为 0 时调用的回调提供挂钩。

例如，我的位图[Patricia Trees](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.37.5452)的 C 实现提供了以下 API：

```
// Querying
void *bpt_get(bpt_t bpt, bpt_key_t key);
bool bpt_has_key(bpt_t bpt, bpt_key_t key);

// Adding and Removing Entries
bpt_t bpt_assoc(bpt_t bpt, bpt_key_t key, void *item);
bpt_t bpt_dissoc(bpt_t bpt, bpt_key_t key);

// Managing Memory
void bpt_retain(bpt_t bpt);
void bpt_release(bpt_t bpt);
void bpt_dealloc(bpt_t bpt);
void bpt_set_dealloc_hook(bpt_t bpt,
                          bpt_key_t key,
                          void (*hook)(bpt_key_t key,
                                       void* value));

// Iteration
void bpt_for_mappings(bpt_t bpt,
                      void (*thunk)(bpt_key_t, void*, void*),
                      void *user_data);

// Making a Map Persistent (you can elide this if you don't
// want to support transients)
void bpt_seal(bpt_t bpt); 
```

该[实现](https://matthias.benkard.de/journal/118)也可能会给您一些想法。

# visual-studio-2010 - 将 *.sdf 文件添加到 .gitignore 的可能影响

> ID：10259606
> 
> 赞同：7
> 
> 时间：2012-04-21T14:06:26.073
> 
> 标签：visual-studio-2010, visual-c++, version-control, github, gitignore

我最近将一个 Visual Studio C++ 项目推送到了 github。我注意到 VS 创建了一个相对较大（~25MB）的 .sdf 文件。我尝试在我的工作区中删除此文件以查看 VS 是否会引发错误。在 VS 中打开项目后，没有报告任何错误，并且文件已重新创建。因此，我正在考虑删除当前在我的存储库中的 .sdf 文件，并将 *.sdf 条目添加到存储库的 .gitignore 文件中。

这样做的结果是，当用户第一次提取 repo 的内容并在 Visual Studio 中打开它时，VS 将不得不生成 .sdf 文件。但是，如果用户从另一个用户所做的 repo 中提取更改，.sdf 是否会不同步，如果是这样，有谁知道 VS 是否会以合理的方式处理这个问题（例如重新生成 .sdf 文件）？会不会有其他我不知道的影响？

任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T14:26:37.400

看起来`*.sdf`通常包含在 .gitignore 文件中；如“[`.gitignore`用于 Visual Studio 项目和解决方案](https://stackoverflow.com/questions/2143956/gitignore-for-visual-studio-projects-and-solutions)”中所示，也可在[GitHub gitignore 项目](https://github.com/github/gitignore/blob/master/VisualStudio.gitignore)中。

一种潜在的影响可能是某些本地修改被覆盖：请参阅“[本地数据缓存同步不会将客户端更改保存到 sdf 文件](https://stackoverflow.com/questions/1769491/local-data-cache-sync-does-not-save-client-changes-to-sdf-file)”。

但除此之外，忽略源代码控制存储库中的缓存文件是一种很好的做法。

# html - 一般而言，HTML5 大纲算法对 SEO 的提升有多大？

> ID：10259607
> 
> 赞同：0
> 
> 时间：2012-04-21T14:06:38.130
> 
> 标签：html, seo

因此，正如标题所示，我对 HTML 5 大纲在总体上有助于提升 SEO 有多大兴趣/好奇。

有很多关于 HTML5 将为 XYZ 做什么的教程和解释，以及很多操作方法，但是对于 HTML5 当前（和未来）带来的一些优点，没有明确提及（我知道）至于它将/或目前使事情变得更好。

我在一个……正常的团队工作，我想我们有专门的平面设计师、编码员、程序员等，当然这个团队的一部分是 SEO 人员。

现在许多网站（在文档大纲工具下）显示许多设计人员/开发人员正在使用 HTML5，但是当您查看他们的文档大纲时，它到处都是，甚至在大纲中有未命名的部分。

我的猜测是，他们只是使用常规的 DOC 类型的 HTML`<!DOCTYPE HTML>`并使用它滚动，而不是输入长/大量的 doctype 以及其中的所有内容等...

但话虽如此，并且与 H1 标签等常规“旧”规则和辩论相反......由于许多 HTML5 功能已经在发挥作用，并且大多数当前的浏览器都支持它们（在差异级别），所以它是否会受到伤害大纲中的半混乱，未命名的部分会伤害吗？

总的来说，如果我将我的页面从旧的 html 转换为新的 HTML5 标准和适当的大纲等，它会让我的排名更好吗？

在一个简单的问题中，例如，如果我当前的页面排名在 google 上是 5/100，那么使用 HTML5 实施更好、更新的文档大纲会给我带来更高的排名，比如 3/100 甚至 1/100

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:31:53.333

您错误地认为代码的格式或标准的使用与搜索引擎如何对您的页面进行排名有关。事实并非如此。

语义标签/类/ID、验证文档和符合标准的标记会发生什么让搜索引擎更容易正确解释页面。

内容，其级别/顺序和重要性（例如标题标签）标记了它的相关程度，并且格式正确的文档仅有助于识别不同的部分，但对其排名没有内在影响。

最后，尽管 SEO 稍微猜测了搜索引擎算法的智能程度，但人们可能会假设 Google 有某种考虑对 HTML4 标记页面与 HTML5 进行评分。由于 HTML5 是较新的，由于 HTML4 已经过时，它可能会*比*HTML4 标记更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:17:36.710

使用 HTML5 没有任何提升。语义标记有助于 SEO，但您使用的版本或格式（如微格式）没有。获得排名的是内容，而不是您的标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:35:38.467

我不确定大纲是什么意思。您是否打算验证您的文档没有像[本文](http://html5doctor.com/outlines/#untitled-sections)中那样的无标题部分？

你的问题是：

*   Google 是否比其他 HTML 更喜欢 HTML5？
*   Google 是否比其他没有有效 HTML5 结构（即混乱或无标题部分）的有效 HTML 更喜欢有效的 HTML5？

这只是我的直觉，但我猜你使用什么 HTML 并不重要。[本文](http://www.webmarketingnow.com/tips/link-baiting-article.html)表明代码有效性不是页面排名的问题。[这里](http://www.vaughns-1-pagers.com/internet/google-ranking-factors.htm)它说 Doctype 甚至没有被谷歌注册。（只是几个链接，不知道它们有多可靠。）这是有道理的想法。PageRank 算法不能真的（再次只是我的直觉）如此简单，以至于会对代码的有效性或使用的 HTML 语言产生很大的影响。独特的内容、位置、到其他 quelity 站点的链接等比缺少标题标签或使用最新的 HTML 规范编写的事实源代码更重要。它会在哪里结束？PHP 页面是否应该比“纯”HTML 更好。JavaScript 是不是一个促进因素？哪个 JS 库是最重要的？

抱歉，如果我要分头，但使用的技术不应该重要，内容应该。（真的不知道是否**只有**内容才重要……）

# c# - 将 SqlParameter 用于 C# ASP.NET 和 SQL Server 2008 R2 的安全性

> ID：10259613
> 
> 赞同：1
> 
> 时间：2012-04-21T14:06:58.467
> 
> 标签：c#, asp.net, sql

我将以下 C# 标记转换为使用 SqlParameter（我是 SqlParameter 新手）以增强安全性：

```
public static void EmptyTable(string TableToEmpty)
{
    try
    {
        using (SqlConnection conn = new SqlConnection(DatabaseConnectionString))
        {
            using (SqlCommand cmd = new SqlCommand("TRUNCATE TABLE @prmTableToEmpty", conn))
            //using (SqlCommand cmd = new SqlCommand("TRUNCATE TABLE " + TableToEmpty, conn))
            {
                cmd.Parameters.Add(new SqlParameter("@prmTableToEmpty", TableToEmpty));
                cmd.Connection.Open();
                cmd.ExecuteNonQuery();
            }
        }
    }
    catch
    {
        throw;
    }
} 
```

没有参数使用它工作顺利。但是，使用这种语法，我得到了这个异常：

```
 [SqlException (0x80131904): Incorrect syntax near '@prmTableToEmpty'.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +2073550
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5064508
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2275
   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +215
   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +987
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
   System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe) +178
   System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +137
   pjsql.EmptyTable(String TableToEmpty) in c:\website\App_Code\mySqlClass.cs:67
   _Default.btnEmptyTheTable_Click(Object sender, EventArgs e) in c:\website\Default.aspx.cs:83
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

提到的两个行号都包含抛出；命令。

我经历了这个： http: [//msdn.microsoft.com/en-us/library/4f844fc7 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/4f844fc7%28v=vs.71%29.aspx)

并尝试了这种替代语法：[http ://www.csharp-station.com/Tutorials/AdoDotNet/Lesson06.aspx](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson06.aspx)

但没有运气。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:10:01.717

不能使用参数代替对象名称。

要在动态替换对象名称时增强安全性，请使用[`quotename`](http://msdn.microsoft.com/en-us/library/ms176114.aspx)（首先使用参数执行命令`select quotename(@prmTableToEmpty)`，然后使用此命令的结果来构建`truncate`命令并在不带参数的情况下执行它）。

```
using (SqlConnection conn = new SqlConnection(DatabaseConnectionString))
{
    conn.Open();

    string sanitized_name;

    using (SqlCommand cmd = new SqlCommand("select quotename(@prmTableToEmpty)", conn))
    {
        cmd.Parameters.Add(new SqlParameter("@prmTableToEmpty", TableToEmpty));
        sanitized_name = (string)cmd.ExecuteScalar();
    }

    using (SqlCommand cmd = new SqlCommand("TRUNCATE TABLE " + sanitized_name, conn))
    {
        cmd.ExecuteNonQuery();
    }
} 
```

# android - 在 Android 中调整 AppWidgetProvider 的大小

> ID：10259614
> 
> 赞同：0
> 
> 时间：2012-04-21T14:07:02.187
> 
> 标签：android, android-widget, widget

我有一门派生自`AppWidgetProvider`. 据我了解，调整小部件的大小是 android 的基本方法。我怎样才能覆盖它或其他东西，只是为了添加我自己的实现？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:22:15.153

你没有。在支持的情况下调整大小由主屏幕与`AppWidgetHost`.

当然，欢迎您编写自己的主屏幕，并在那里做任何您想做的调整大小的工作。

# ios5 - 选择 ios 时更改标签栏图像颜色

> ID：10259624
> 
> 赞同：0
> 
> 时间：2012-04-21T14:08:11.913
> 
> 标签：ios5, tabs

在我的应用程序中，我有标签栏控制器。我想在被选中时更改标签栏图像的默认颜色，即默认蓝色。

请注意：**我不想更改标签栏的背景颜色，而只想更改从默认蓝色中选择的标签栏项目的颜色**。这是我的代码：

```
 NSArray *tabObjects=[NSArray arrayWithObjects:nav,video,about, nil];
 tabView=[[UITabBarController alloc] init];   
 tabView.viewControllers=tabObjects; 
```

我在这里看到了很多问题，也搜索了互联网。有些人建议我不感兴趣的私有 API。有人说在选择选项卡时放置自定义图像。

请建议我这样做的正确方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:59:28.360

好像你需要

```
[[UITabBar appearance] setSelectedImageTintColor:[UIColor purpleColor]]; 
```

**注意：**仅适用于 iOS >=5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T08:53:28.137

//设置标签栏为图片

```
[[[self tabBarController] tabBar] setBackgroundImage:[UIImage imageNamed:@"menubar"]];

//set the color of selected  image color
[[[self tabBarController] tabBar] setSelectedImageTintColor:[UIColor redColor]]; 
```

# serialization - 序列化/反序列化 System.Uri

> ID：10259630
> 
> 赞同：2
> 
> 时间：2012-04-21T14:08:50.550
> 
> 标签：serialization, ravendb

我已经使用 RavenDB 两个小时了，如果我遗漏了一些明显的东西，我深表歉意。

我正在存储一个具有 System.Uri 类型属性的非规范化视图模型。Uri 被序列化为字符串，我猜这没问题，但是当我加载文档时抛出此异常：

```
Message=Could not cast or convert from System.String to System.Uri.
Source=Newtonsoft.Json
StackTrace:
    at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Utilities\ConvertUtils.cs:line 267
    at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Utilities\ConvertUtils.cs:line 244
    at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType) in d:\Development\Releases\Json\Working\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 544 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T00:46:40.877

知道了！有两个秘密。首先是为 Uri 类型创建一个 JsonConverter。

```
public class UriJsonConverter : JsonConverter 
{

    public override bool CanConvert(Type objectType)
    {
        return object.Equals(objectType, typeof (Uri));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        switch (reader.TokenType)
        {
            case JsonToken.String:
                return CreateUri((string) reader.Value);
            case JsonToken.Null:
                return null;
            default:
                var msg = string.Format("Unable to deserialize Uri from token type {0}", reader.TokenType);
                throw new InvalidOperationException(msg);
        }
    }

    private static Uri CreateUri(string uriString)
    {
        Uri uri;
        if (!Uri.TryCreate(uriString, UriKind.Absolute, out uri))
            if (!Uri.TryCreate(uriString, UriKind.Absolute, out uri))
                if (!Uri.TryCreate(uriString, UriKind.RelativeOrAbsolute, out uri))
                {
                    var msg = string.Format("Unable to determine proper UriKind for Uri {0}", uriString);
                    throw new InvalidOperationException(msg);
                }
        return uri;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        if (null == value)
        {
            writer.WriteNull();
            return;
        }

        var uri = value as Uri;
        if (uri != null)
        {
            writer.WriteValue(uri.OriginalString);
            return;
        }
        var msg = string.Format("Unable to serialize {0} with {1}", value.GetType(), typeof (UriJsonConverter));
        throw new InvalidOperationException(msg);
    }

} 
```

第二个是向 RavenDB 序列化程序注册转换器。

```
private static DocumentStore OpenStore()
{
    var store = new DocumentStore()
                    {
                        ConnectionStringName = "RavenDB"
                    };

    store.Conventions.CustomizeJsonSerializer = CustomJsonSerializer;

    store.Initialize();
    return store;
}

private static void CustomJsonSerializer(JsonSerializer serializer)
{
    serializer.Converters.Add(new UriJsonConverter());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:05:59.133

我不肯定在`Newtonsoft`幕后做了什么，但如果它在没有在构造函数中`new System.Uri("/about-us")`指定的情况下调用，则会抛出一个。`UriKind.Relative``UriFormatException`

因此，根据您在模型中创建 Uri 的方式，您可以选择在存储它之前确保它是绝对的。

我不是很肯定，但我认为 Uri like`new System.Uri("http://foo.com/about-us")`会被存储为“http://foo.com/about-us”，当它回来时会转换为 OK。

# php - 查找文本文件中出现的最大字符串

> ID：10259631
> 
> 赞同：0
> 
> 时间：2012-04-21T14:08:58.877
> 
> 标签：php, html, text, flat-file

因此，我已经看到之前提出的问题类似于查找文件中字符串的最大出现次数，但所有这些问题都依赖于知道要查找的内容。

我有一个你几乎可以称之为平面文件数据库的东西，它抓取一堆输入数据，基本上将它的不同部分包装在带有引用 id 的 html span 标签中。

每一行都以这种方式出现：

```
<p>
<span class="ip">58.106.**.***</span> 
Wrote <span class='text'>some text</span>
<span class='effect1'> and caused seizures </span>
<span class='time'>23:47</span> 
</p> 
```

然后我将如何查找出现次数最多的#test 内容。

即如果我有

```
<p>
    <span class="ip">58.106.**.***</span> 
    Wrote <span id='text'>woof</span>
    <span class='effect1'> and caused seizures </span>
    <span class='time'>23:47</span> 
    </p>

<p>
    <span class="ip">58.106.**.***</span> 
    Wrote <span class='text'>meow</span>
    <span class='effect1'> and caused mind-splosion </span>
    <span class='time'>23:47</span> 
    </p>

<p>
    <span class="ip">58.106.**.***</span> 
    Wrote <span class='text'>meow</span>
    <span class='effect1'> and used no effect </span>
    <span class='time'>23:47</span> 
    </p>

<p>
    <span class="ip">58.106.**.***</span> 
    Wrote <span class='text'>meow</span>
    <span class='effect1'> and used no effect </span>
    <span class='time'>23:47</span> 
    </p> 
```

输出将是“喵”。

我将如何在 php 中完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:13:56.177

看看[DOMXPath](http://php.net/manual/en/class.domxpath.php)，您可以使用 XPath 查询来获取所有内容`#text`，然后使用 php 找到最常用的一个。
有一个问题是您多次使用相同的 id，这不是有效的 HTML，因此 DOM 可能会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:25:51.257

首先：您的格式不利于这种类型的数据操作；您可能要考虑更改它。

也就是说，基于这种结构，合乎逻辑的解决方案是`DOMXPath`像 Dani 所说的那样利用。这可能是有问题的，因为`id`那里有所有重复的 s，但实际上它可以工作（*在发出大量警告之后*，这是数据结构提供修订的另一个原因）。

下面是一些与这个想法相关的代码：

```
$input = '<body>'.get_input().'</body>';
$doc = new DOMDocument;
$doc->loadHTML($input); // lots of warnings, duplicate ids!
$xpath = new DOMXPath($doc);
$result = $xpath->query("//*[@id='text']/text()");

$occurrences = array();
foreach ($result as $item) {
    if (!isset($occurrences[$item->wholeText])) {
        $occurrences[$item->wholeText] = 0;
    }
    $occurrences[$item->wholeText]++;
}

// Sort the results and produce final answer    
arsort($occurrences);
reset($occurrences);

echo "The most common text is '".key($occurrences).
     "', which occurs ".current($occurrences)." times."; 
```

**[看到它在行动](http://codepad.viper-7.com/CuMZLv)**。

**更新**（看到您修复了重复的 id 问题）：您只需将 xpath 查询更改为`"//*[@class='text']/text()"`使其继续匹配。然而，这种做事方式仍然效率低下，所以如果其中一个或多个适用：

*   你会一直这样做
*   你有很多数据
*   你需要它非常快

那么更改数据格式是个好主意。

# google-translate - 仅对正文内容使用谷歌翻译，而不是导航

> ID：10259634
> 
> 赞同：0
> 
> 时间：2012-04-21T14:09:16.250
> 
> 标签：google-translate

我想合并谷歌翻译的代码片段，但意识到它在翻译我的导航下拉菜单时完全弄乱了我的布局。我只能定位具有某些 div 标签的区域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:16:22.777

不确定它的效果如何，但您可以让每个下拉项目成为带有文本的图像。那会阻止翻译

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:53:59.457

如何创建一个生成菜单项文本的 javascript 函数？这样每个字母都用 html-tags 封装，这不会阻止谷歌翻译尝试翻译文本吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T12:12:35.820

您可以在您不想翻译的任何 HTML 部分上使用 class="notranslate"。因此，您可以尝试用它在整个导航周围包裹一个 div。

还有一个元标题 meta name="google" value="notranslate" 可以阻止整个页面被翻译。

# java - 我们是否必须在静态类上新建

> ID：10259644
> 
> 赞同：6
> 
> 时间：2012-04-21T14:10:59.377
> 
> 标签：java, android, static

在浏览文档时，我读到了一些 ViewHolder 是静态类的地方，但它是否需要在静态类上创建新的？在那个例子中，他们做了新的吗？但是根据概念，新的不应该在静态类上完成，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:13:52.857

您只能通过四种方式构造类：

1.  使用“新”
2.  使用使用 Class.newInstance
3.  使用内部使用 new 创建新实例的方法/工厂
4.  使用 object.clone（如果支持）

1 和 3 是迄今为止最常用的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:19:02.000

将类称为静态并不是最好的表达方式，因为它通常意味着不必实例化这些类。但这也可能取决于上下文，这需要首先讨论，因为您的问题没有给出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:20:23.290

[这很好地解释了它](http://www.techrepublic.com/article/explore-javas-static-nested-classes-and-inner-classes/5815620)：

> 创建嵌套类实例的语义可能会令人困惑。下面是一个简单的类，它定义了一个静态嵌套类和一个内部类。特别注意 main 方法，其中创建每个实例类的实例。
> 
> ```
>  // creating an instance of the enclosing class 
>  NestedClassTip nt = new NestedClassTip();
> 
>  // creating an instance of the inner class requires 
>  // a reference to an instance of the enclosing class 
>  NestedClassTip.NestedOne nco = nt.new NestedOne();
> 
>  // creating an instance of the static nested class 
>  // does not require an instance of the enclosing class 
>  NestedClassTip.NestedTwo nct = new NestedClassTip.NestedTwo();
> 
> public class NestedClassTip {
> private String name = "instance name";
> private static String staticName = "static name";
> 
> public static void main(String args[]) {
>     NestedClassTip nt = new NestedClassTip();
> 
>     NestedClassTip.NestedOne nco = nt.new NestedOne();
> 
>     NestedClassTip.NestedTwo nct = new NestedClassTip.NestedTwo();
> }
> 
> class NestedOne {
>     NestedOne() {
>         System.out.println(name);
>         System.out.println(staticName);
>     }
> }
> 
> static class NestedTwo {
>     NestedTwo() {
>         System.out.println(staticName);
>     }
> } } 
> ```
> 
> 嵌套类可能会令人困惑，但是一旦您了解了它们的用途并习惯了语义，它们就不会有太多东西了。如果您想了解更多有关嵌套类的详细信息，请查看 Java 语言规范。

# linux - 使用 NPTL，同时将 glibc 与 linuxthreads 保持一致

> ID：10259646
> 
> 赞同：1
> 
> 时间：2012-04-21T14:11:59.517
> 
> 标签：linux, glibc, nptl, linuxthreads

我想知道是否可以使用 nptl 而不是嵌入在我的 glibc 中的 linuxthreads 来测试特定的二进制文件。我不想重新编译 glibc，因为它是随我的特定硬件/软件提供的，我不想破坏一切。我只想能够测试这个实现，看看有什么收获

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:11:11.017

> 我不想重新编译 glibc

如果你的 glibc 是用 linuxthreads 而不是 nptl 编译的，那么显然你不能用它来测试带有 nptl 的二进制文件。

您的选择是：

1.  使用启用了 nptl 的 glibc 的其他（较新）系统，或
2.  构建一个单独的支持 nptl 的 glibc 版本，并使用*它*，例如

    cd glibc-2.15 ./configure --prefix=/usr/glibc-nptl && make && sudo make install

    # 现在使用新建的 glibc 运行二进制文件：
    /usr/glibc-nptl/lib/ld-2.15.so /path/to/binary

另请参阅[此答案](https://stackoverflow.com/a/851229/50617)。

# jquery-mobile - 使用 Knockoutjs 填充 JqueryMobile listView

> ID：10259650
> 
> 赞同：0
> 
> 时间：2012-04-21T14:12:51.433
> 
> 标签：jquery-mobile, knockout.js

我正在尝试使用 knockoutjs 库填充 jquery mobile listivew，但我的问题是重复列表视图（列表分隔符）的标题。我想知道如何解决这个问题，

这是我的代码，感谢您的帮助。

```
<!DOCTYPE html> 
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> 
<meta name="apple-mobile-web-app-capable" content="yes"> 
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
 <script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.js" type="text/javascript"></script>

</head> 
<body> 

 <div data-role="page">
    <div data-role="header">
        <h1>Header</h1>
    </div>
    <div data-role="content">
          <ul data-role="listview" data-inset="true" data-bind="foreach:seats"  data-theme="b"  data-filter="true"
            >
                <li data-role="list-divider">List </li>

        <li>
            <a  href="#" ><span  data-bind="text:reservationId"></span></a>

        </li>

    </ul>
    </div>

 </div>
 <script type="text/javascript">

function Reservation(reservationId, covers) {

    var self = this;
    self.reservationId = reservationId;
    self.covers = covers;

}

function ReservationsViewModel()
{
 var self = this;   
self.seats = ko.observableArray();

self.fillReservations=function()
{   

var mydata={
             "result":[
     {
         "reservationId": "23424574367436523452345",
         "covers"       : "4"
      },
      {
         "reservationId": "23424574367436523452345",
         "covers"       : "4"

     }
]  
  };                    

 $.each(mydata.result, function (index, value) {                 
      self.seats.push(new Reservation(this.reservationId,this.covers));
    });

}//End fillReservations
self.fillReservations();
}// End ReservationsViewModel

ko.applyBindings(new ReservationsViewModel());      
    </script>  

</body> 

</html> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:32:52.627

我通过使用**无容器控制流语法**解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T09:56:41.707

试试这样：

```
 <ul data-role="listview" id="ListSearch" data-divider-theme="b" data-inset="true" >
         <li data-role="list-divider" role="heading">
              Criteria Selected
          </li>
          <!-- ko foreach: Contacts  -->
          <li data-theme="c">
              <a href="#page3" data-transition="slide">
                  <span data-bind="text: FirstName " ></span>
              </a>
          </li>
          <!-- /ko -->
      </ul> 
```

# sql - MS Access SQL 语句计数使用情况

> ID：10259661
> 
> 赞同：2
> 
> 时间：2012-04-21T14:14:05.853
> 
> 标签：sql, ms-access

我是 SQL 新手。我收到了一份报告过去 2 个月使用数据的课程。有人可以帮我处理 SQL 语句吗？

```
SELECT COUNT(Member_ID,Non_Member_Name) AS Pool_usage_last_2_months
FROM Use_of_pool
WHERE DATEDIFF(‘2012-04-21’,’2012-02-21’) 
```

我的意思是统计过去两个月的会员使用（member_ID）和非会员使用（无ID，仅姓名）的总数，然后输出姓名和日期和时间等。在同一份报告中。是否有任何 SQL 语句可以输出此类信息？欢迎更正/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:13:27.240

您需要一个不同的 WHERE 子句。假设您的`Use_of_pool`表包含一个日期/时间字段，`date_field`：

```
WHERE date_field >= #2012-02-21# AND date_field <= #2012-04-21# 
```

如果`date_field`值可以包含除午夜之外的时间分量，则将结束日期范围提前一天以捕获从 4 月 21 日开始的所有可能的日期/时间值：

```
WHERE date_field >= #2012-02-21# AND date_field <= #2012-04-22# 
```

这应该限制行以匹配我认为你想要的。它应该通过索引提供快速的性能`date_field`。

我不清楚您想要的计数……是对所有访问（会员和非会员）计算一次，还是对会员和非会员单独计算。

**编辑**：如果表格的每一行代表一个人的访问，您可以简单地计算行数以确定您选择的时间范围内的访问次数。

```
SELECT Count(*) AS CountOfVisits
FROM Use_of_pool
WHERE date_field >= #2012-02-21# AND date_field <= #2012-04-21# 
```

请注意，同一个人的每次访问都会促成`CountOfVisits`，这就是我认为您想要的。如果您想知道访问了多少*不同的*人，我们将需要一种不同的方法。

**Edit2**：听起来您可以使用 Member_ID 和 Non_Member_Name 来区分会员和非会员访问。Member_ID 对于非成员为 Null，对于成员为非 Null。Non_Member_Name 对于成员是 Null，对于非成员是非 Null。

如果是这样，请尝试使用此查询分别计算成员和非成员访问次数。

```
SELECT
    Sum(IIf(Member_ID Is Not Null, 1, 0)) AS member_visits,
    Sum(IIf(Non_Member_Name Is Not Null, 1, 0)) AS non_member_visits
FROM Use_of_pool
WHERE date_field >= #2012-02-21# AND date_field <= #2012-04-21# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:49:37.250

SQL 的聚合函数使用列中的所有数据（更准确地说，是您的 WHERE 子句选择的所有数据）来生成单个数据。COUNT 为您提供与 WHERE 子句匹配的数据行数。例如：

```
SELECT COUNT(*) AS Non_members FROM Use_of_pool WHERE Member_ID IS NULL 
```

将为您提供非会员使用该池的次数，以及

```
SELECT COUNT(DISTINCT Member_ID) AS Members FROM Use_of_pool 
```

将为您提供至少使用过一次池的成员数量（DISTINCT 告诉数据库引擎在计数时忽略重复项）。

您可以扩展 WHERE 子句以进一步指定要计数的内容。如果“过去两个月”是指当前和上一个日历月，您需要：

```
... WHERE DateDiff("m",Date_field,Date())<=1 
```

如果这意味着滚动 2 个月，我会用 60 天来近似，然后说

```
... WHERE DateDiff("d",Date_field,Date())<60 
```

（将 Date_field 替换为包含日期的字段的名称。）

如果您想根据多个不同的条件计算行数，或者同时输出聚合数据和单个数据，最好使用单独的 SELECT 语句。

# c++ - 当我一步编译所有内容时，GCC 可以更好地优化事情吗？

> ID：10259665
> 
> 赞同：12
> 
> 时间：2012-04-21T14:14:23.213
> 
> 标签：c++, optimization, gcc

当我将`-O2`标志传递给 gcc 时，gcc 会优化代码，但我想知道如果我将所有源文件编译为目标文件然后将它们链接起来，它实际上能做到这一点。

这是一个例子：

```
// in a.h
int foo(int n);

// in foo.cpp
int foo(int n) {
  return n;
}

// in main.cpp
#include "a.h"
int main(void) {
  return foo(5);
}

// code used to compile it all
gcc -c -O2 foo.cpp -o foo.o
gcc -c -O2 main.cpp -o main.o
gcc -O2 foo.o main.o -o executable 
```

通常， gcc 应该内联`foo`，因为它是一个小函数并且`-O2`可以使能`-finline-small-functions`，对吗？但是在这里，gcc 在创建目标文件之前只看到`foo`和`main`独立的代码，所以不会有任何这样的优化，对吧？那么，这样编译真的会让代码变慢吗？

但是，我也可以像这样编译它：

```
gcc -O2 foo.cpp main.cpp -o executable 
```

那会更快吗？如果没有，这样会更快吗？

```
// in foo.cpp
int foo(int n) {
  return n;
}

// in main.cpp
#include "foo.cpp"
int main(void) {
  return foo(5);
} 
```

**编辑**：我看了看`objdump`，它的反汇编代码显示只有这`#include "foo.cpp"`件事有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T15:57:46.313

看来您自己重新发现了关于 C 和 C++ 使用的单独编译模型的问题。虽然它确实减轻了内存需求（这在创建时很重要），但它通过仅向编译器公开最少的信息来实现这一点，这意味着无法执行一些优化（如这个）。

较新的语言，其模块系统可以根据需要公开尽可能多的信息，如果模块进入下一个 C++ 版本，我们可以希望能获得这些好处......

同时，最简单的方法称为链接时间优化。这个想法是您将在每个 TU（翻译单元）上执行尽可能多的优化以获得目标文件，但您还将使用 IR（中间表示）丰富传统的目标文件（包含程序集），编译器使用它来优化) 用于部分或全部功能。

当链接器将被调用以将这些目标文件合并在一起时，它不仅仅是将文件合并在一起，它还会合并 IR 表示，重新执行一些优化通道（常量传播、内联，...），然后在其上创建程序集自己的。这意味着它不仅仅是一个链接器，它实际上是一个后端优化器。

当然，就像所有优化过程一样，这是有代价的，因此需要更长的编译时间。此外，这意味着编译器*和*链接器都应该被传递一个特殊的选项来触发这种行为，在 gcc 的情况下，它应该是`-lto`or `-O4`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-21T14:18:36.940

您可能正在寻找[链接时间优化](http://gcc.gnu.org/wiki/LinkTimeOptimization)(LTO)，也就是整个程序优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:47:56.203

由于您使用的是 GCC，因此您可以使用 C99`inline`函数说明符机制。这是来自 ISO/IEC 9899:1999。

> § 6.7.4 函数说明符
> 
> ### 句法
> 
> ¶1*函数说明符：*
> 
> ```
>  inline 
> ```
> 
> ### 约束
> 
> ¶2 函数说明符只能在函数标识符的声明中使用。
> 
> ¶3 具有外部链接的函数的内联定义不应包含具有静态存储持续时间的可修改对象的定义，并且不应包含对具有内部链接的标识符的引用。
> 
> ¶4 在托管环境中，`inline`函数说明符不应出现在`main`.
> 
> ### 语义
> 
> ¶5 使用`inline`函数说明符声明的函数是*内联函数*。函数说明符可能出现多次；行为就像它只出现一次一样。使函数成为内联函数意味着对函数的调用尽可能快。^(118))此类建议的有效程度由实施定义。^(119))
> 
> ¶6任何具有内部链接的函数都可以是内联函数。对于具有外部链接的函数，适用以下限制： 如果函数用`inline` 函数说明符声明，则它也应在同一翻译单元中定义。如果翻译单元中函数的所有文件范围声明都包含`inline`函数说明符而没有`extern`，则该翻译单元中的定义是*内联定义*. 内联定义不为函数提供外部定义，也不禁止在另一个翻译单元中进行外部定义。内联定义提供了外部定义的替代方案，翻译器可以使用它来实现对同一翻译单元中函数的任何调用。未指定对函数的调用是使用内联定义还是外部定义。120)
> 
> ¶7 示例带有外部链接的内联函数的声明可以导致外部定义或仅在翻译单元内可用的定义。文件范围声明 `extern`创建一个外部定义。以下示例显示了整个翻译单元。
> 
> ```
> inline double fahr(double t)
> {
>     return (9.0 * t) / 5.0 + 32.0;
> }
> inline double cels(double t)
> {
>     return (5.0 * (t - 32.0)) / 9.0;
> }
> extern double fahr(double); // creates an external definition
> double convert(int is_fahr, double temp)
> {
>     /* A translator may perform inline substitutions */
>     return is_fahr ? cels(temp) : fahr(temp);
> } 
> ```
> 
> ¶8 请注意，of 的定义`fahr`是外部定义，因为`fahr`也使用 extern 声明，但 cels 的定义是内联定义。因为`cels`具有外部链接并被引用，外部定义必须出现在另一个翻译单元中（见 6.9）；内联定义和外部定义是不同的，都可以用于调用。
> 
> ^(118))例如，通过使用通常的函数调用机制的替代方法，例如“内联替换”。内联替换不是文本替换，也不会创建新函数。因此，例如，在函数体中使用的宏的扩展使用它在函数体出现时的定义，而不是调用函数的位置；标识符指的是正文出现的范围内的声明。同样，该函数具有单个地址，而不管除外部定义之外出现的内联定义的数量。
> 
> ^(119))例如，一个实现可能永远不会执行内联替换，或者可能只对`inline`声明范围内的调用执行内联替换。
> 
> ^(120))由​​于内联定义不同于相应的外部定义和其他翻译单元中的任何其他相应的内联定义，所有具有静态存储持续时间的相应对象在每个定义中也是不同的。

* * *

请注意，GCC`inline`在标准化之前也有 C 中的函数。如果您需要该符号，请阅读 GCC 手册了解详细信息。

# java - java中的错误-在ArrayList中查找最大值

> ID：10259666
> 
> 赞同：0
> 
> 时间：2012-04-21T14:14:29.000
> 
> 标签：java, if-statement, for-loop, arraylist

以下是我写的作为问题答案的程序 -

“现在使用 ArrayList 和 Integer 包装类来存储值并通过使用 Scanner 类从控制台读取输入来初始化元素。扩展程序以识别 ArrayList 中的 n 个最大值。”

```
import java.util.ArrayList;
import java.util.Scanner;    

public class ArraylistInput {
/**
 * @param args
 */
public static void main(String[] args) {

    ArrayList<Integer> val = new ArrayList<Integer>();
    Scanner in = new Scanner(System.in);
    System.out.println("Enter the length of you Array List ");
    int nos = in.nextInt();
    // Recorrd the input numbers
    for (int i = 0 ; i < nos; i++)
    {
        System.out.println("Enter values for the ArrayList ");
        int Input = in.nextInt();
        val.add(Input);
    }

    // Display the arraylist
    for (int j = 0; j < nos; j++)
    {
        int x = val.get(j);
        System.out.println("Index " + (j+1) + ": " +  x);
    }
    System.out.println("How meny maximmum values do you want? ");
    int max =0; // initial max value
    int nmax = in.nextInt(); // number of maximum values
    int length = val.size(); // size of the arraylist

    // finding the maximum values in ascending order without sorting
    for (int h = 1; h <= nmax ; h++)
    {           
        for (int k=0;k < length; k++)
        {
            if (val.get (k) > max)
            {
                 max = val.get(k);
            }               
        }
        System.out.println ("maximmum = " + max);
        int z = val.indexOf(max); // removing the higest value after printing
        val.remove(z);
    }           
    }
} 
```

> 输出和错误：
> 
> 输入数组列表的长度
> 
> 3
> 
> 输入 ArrayList 的值
> 
> 12
> 
> 输入 ArrayList 的值
> 
> 45
> 
> 输入 ArrayList 的值
> 
> 8
> 
> 索引 1：12 索引 2：45 索引 3：8
> 
> 你想要多少个最大值？
> 
> 2
> 
> 最大值 = 45
> 
> 线程“主”中的异常最大值 = 45 java.lang.ArrayIndexOutOfBoundsException: -1 at java.util.ArrayList.elementData(Unknown Source) at java.util.ArrayList.remove(Unknown Source) at ArraylistInput.main(ArraylistInput.java: 46)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:22:47.827

我会做以下事情：

```
Collections.sort(myList, Collections.reverseOrder());
List<Integer> maxn = myList.subList(0, n);
System.out.printf("The maximum %d values are: %s%n", n, maxn);
maxn.clear(); //This clears the sublist and removes its elements from the source list 
```

这将为您提供一个列表，其中包含列表中最多 n 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:18:23.493

你只有一个 ArrayList 你不需要嵌套的 for 循环来找到最大值：

```
int max = Integer.MIN_VALUE;

for(int i = 0; i < list.size(); i++)
{
   current = list.get(i);
   if(current > max)
      max = current;
} 
```

搜索最大值时的嵌套 for 循环尝试访问列表中不存在的值，这就是您收到此错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:19:13.990

你`max`永远不会被分配，然后你试图从数组列表中删除一个不存在的元素。设置`max`为列表中不能出现的某个值，然后检查它是否曾在循环中分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:20:00.783

当您从列表中删除一个元素时：

`val.remove(z);`

您更改了列表的大小，但没有更新您的`length`变量。这会导致您尝试访问超出数组大小的索引，从而导致`java.lang.ArrayIndexOutOfBoundsException`.

另外，考虑保存最大值的*索引*和*最大值本身*。然后，当您删除该值时，您可以`ArrayList.remove()`直接使用而无需再次搜索整个列表以获取最大索引（这`ArrayList.indexOf()`将是什么）。

# cassandra - 如何在 Cassandra 中排列数据以获取后进先出格式的数据

> ID：10259667
> 
> 赞同：0
> 
> 时间：2012-04-21T14:14:30.980
> 
> 标签：cassandra, phpcassa, cassandra-0.7

由于我们无法在 Cassandra 中对数据进行排序，我想以这样的格式存储数据，当我检索数据时，我需要以“后进先出格式”获取数据，即如果用户在我检索数据时输入评论，我应该首先得到首先是最新评论，然后是旧评论。我认为这与比较器有关。

我在配置 Cassandra 时设置了以下内容：

```
assume posts comparator as utf8;
assume posts validator as utf8;
assume posts keys as utf8; 
```

请帮助-我应该如何创建列以按时间格式排列数据，以便首先存储最新数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:26:13.587

行中的列始终是排序的，您可以以相反的顺序遍历行中的列。鉴于这两个事实，我们可以通过将评论存储在名为“comments”的列族中来模拟您所描述的情况，其中行键是帖子 ID，列表示对相应帖子的评论。列是时间戳（ISO 格式日期、UNIX 时间戳或时间 UUID），值是注释文本正文。

如果您现在要获取一行的列并指定您希望它们以相反的顺序排列，您将得到您想要的。如何指定反向顺序取决于您的驱动程序，但它通常只是检索行或列切片的命令的一个选项。

另一种更骇人听闻的方法是获取帖子的 UNIX 时间戳，然后从一个大整数（如 2^31）中减去它，并将其用作列键。这样，默认情况下列将按相反的顺序排序。它不漂亮，上面的方法更优雅。

如果您担心使用时间戳，因为可能会在同一时间发布两条评论发生冲突，请使用 Cassandra 的时间 UUID 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:31:35.230

您需要组织数据，以便比较器是时间戳。您以自然顺序存储数据并在切片查询中指定相反的顺序。

# c# - itextshart 字体太小：0 错误

> ID：10259673
> 
> 赞同：3
> 
> 时间：2012-04-21T14:15:07.283
> 
> 标签：c#, asp.net, html, itextsharp

我正在尝试从 html 内容创建一个 pdf 文件。然而，有一个问题可以阻止它，这是**Font size too small: 0** error when i click the button in hw.Parse(new StringReader(HTML)); 线。

请帮助我如何解决这个问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

 namespace PTCreportingProject.PDF
{  
public class CreatePDFReport
{
    private string htmlContent = "";

    public string createReport()
    {
        string res = "";
        res = prepareHeader();
            return res;
    }
    private string prepareHeader()
    {
        string hed = "";
        System.Text.StringBuilder sbHtml = new System.Text.StringBuilder();
        sbHtml.Append("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>");
        sbHtml.Append("<html xmlns='http://www.w3.org/1999/xhtml'>");
        sbHtml.Append("<head><title>");
        sbHtml.Append("</title>");
        sbHtml.Append(" <style type='text/css'>");
        sbHtml.Append("  .style16 { width: 80%;  margin-left: auto; margin-right: auto; border-color: red; }");
        sbHtml.Append(".style19  { border-color: red; }");
        sbHtml.Append(".style30 {  width: 35px;  border-color: red;  }");
        sbHtml.Append("  .style31 { border-color: red;  }");
        sbHtml.Append(".style41 { border-color: red; }");
        sbHtml.Append(" .style55  { height: 23px;  border-color: red; }");
        sbHtml.Append(".style56  { border-color: red; }");
        sbHtml.Append(".style59  { border-color: red; }");
        sbHtml.Append(" .style60  {  width: 66px; border-color: red; }");
        sbHtml.Append(".style62 {  height: 27px; border-color: red; }");
        sbHtml.Append(" .style63  {  height: 26px; border-color: red; }");
        sbHtml.Append(".style95 { width: 92px; border-color: red;}");
        sbHtml.Append(".style100 {  width: 123px;  border-color: red; }");
        sbHtml.Append(".style101{ width: 195px; border-color: red; }");
        sbHtml.Append(" .style102 { width: 192px;  border-color: red; }");
        sbHtml.Append(".style103 { border-color: red; }");
        sbHtml.Append(" .style104 { border-color: red; }");
        sbHtml.Append(" .style106 {  width: 113px; height: 7px;  border-color: red; }");
        sbHtml.Append("  .style107 { width: 169px; border-right: #ff0000 1pt solid; border-left-color: red; border-top-color: red; border-bottom-color: red; }");
        sbHtml.Append("  .style108 { width: 113px;  height: 12px; border-color: red; }");
        sbHtml.Append("  .style109 { width: 366px; height: 12px; border-color: red; }");
        sbHtml.Append(" .style110 { height: 7px; border-color: red; }");
        sbHtml.Append("   .style111 { width: 77px; border-color: red; }");
        sbHtml.Append("   .style112 { width: 506px; border-color: red; }");
        sbHtml.Append("   .style114 { width: 87px; border-color: red; }");
        sbHtml.Append(" .style116 { width: 82px; border-color: red; }");
        sbHtml.Append(" .style117 { width: 137px; border-color: red; }");
        sbHtml.Append(" .style150 { width: 83px; border-color: red; }");
        sbHtml.Append(" .style161 {  width: 165px; border-color: red; }");
        sbHtml.Append(".style167 { width: 138px; border-color: red; }");
        sbHtml.Append("  .style177 { width: 162px; border-color: red; }");
        sbHtml.Append(" .style181 { width: 157px; border-color: red; }");
        sbHtml.Append(" .style185 { width: 180px; border-color: red; }");
        sbHtml.Append(".style189 { width: 35px; border-color: red; }");
        sbHtml.Append(" .style190 { width: 100px;  border-color: red; }");
        sbHtml.Append(".style191 { width: 91px; border-color: red; }");
        sbHtml.Append(" .style192 { width: 35px; border-color: red; }");
        sbHtml.Append(" </style>");
        sbHtml.Append("</head>");
        sbHtml.Append("<body>");
        sbHtml.Append("<form method='post' action='EngineeringChangeNoticeReport.aspx' id='form1'>");
        sbHtml.Append(" <table width='80%' align='center'>");
        sbHtml.Append(" <tr>");
        sbHtml.Append("<td>");
        //sbHtml.Append("<img id='Image1' src='images/mikes.png' style='height:51px;width:163px;' />");
        sbHtml.Append(" </td>");
        sbHtml.Append("<td>");
        sbHtml.Append(" <h2 >");
        sbHtml.Append("<span id='Label29' style='color:Red;'>ENGINEERING CHANGE NOTICE</span>");
        sbHtml.Append(" </h2>");
        sbHtml.Append("</td>");
        sbHtml.Append("</tr>");
        sbHtml.Append(" </table>");
        sbHtml.Append(" <table class='style16' border='1' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append("<tr>");
        sbHtml.Append("<td class='style108'>");
        sbHtml.Append("  <span id='Label1' style='color:Red;'>Class of Change</span>");
        sbHtml.Append(" </td>");
        sbHtml.Append(" <td class='style109'>");
        sbHtml.Append(" <span id='Label2' style='color:Red;'>Priority</span>");
        sbHtml.Append(" </td>");
        sbHtml.Append(" <td class='style104' rowspan='2' colspan='2'>  <span id='Label3' style='color:Red;font-size:XX-Large;font-weight:bold;'>ECN NO:</span> <span id='Label48' style='font-size:X-Large;'>aaa</span>  </td>");
        sbHtml.Append(" </tr>");
        sbHtml.Append(" <tr>");
        sbHtml.Append("<td class='style108'> <input id='CheckBox1' type='checkbox' name='CheckBox1' checked='checked' /><label for='CheckBox1'>I</label>  </td>");
        sbHtml.Append(" <td class='style109'> <span id='Label50'></span>  </td>");
        sbHtml.Append("</tr>");
        sbHtml.Append(" <tr> <td class='style106'>  <input id='CheckBox2' type='checkbox' name='CheckBox2' /><label for='CheckBox2'>II</label> </td>  <td class='style110' colspan='3'>  &nbsp;</td>  </tr>");
        sbHtml.Append(" <tr> <td class='style107' colspan='3'> <span id='Label4' style='color:Red;'>Project Code/Name:</span>  <span id='Label51'>aaa</span> </td>  <td class='style19'>  <span id='Label5' style='color:Red;'>Releted ECRs</span>  <span id='Label53'>aaa</span> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style107' colspan='3'> <span id='Label6' style='color:Red;'>Requested by:</span> <span id='Label52'>aaa</span> </td> <td class='style19'> <span id='Label7' style='color:Red;'>Date:</span> <span id='Label54'>03.04.2012</span> </td> </tr>");
        sbHtml.Append("</table>");

        sbHtml.Append(" <table class='style16' border='1' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append(" <tr> <td class='style55' colspan='6'> <span id='Label14' style='color:Red;'>Material / Affected Item</span> </td> </tr>");
        sbHtml.Append("  <tr> <td class='style114'> <span id='Label15' style='color:Red;'>PART NO</span> </td>");
        sbHtml.Append(" <td class='style150'> <span id='Label16' style='color:Red;'>on Order</span> </td>");
        sbHtml.Append(" <td class='style116'> <span id='Label17' style='color:Red;'>in Process</span> </td>");
        sbHtml.Append(" <td class='style111'> <span id='Label18' style='color:Red;'>in Stock</span> </td>");
        sbHtml.Append(" <td class='style117'> <span id='Label19' style='color:Red;'>in Next Higher Assy</span> </td>");
        sbHtml.Append(" <td class ='style56'> <span id='Label20' style='color:Red;'>Customer Accepted</span> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style114'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style150'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style116'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style111'> aaa &nbsp;</td>");
        sbHtml.Append("<td class='style117'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style30'> aaa &nbsp;</td> </tr>");
        sbHtml.Append(" </table>");
        sbHtml.Append(" <table class='style16' border='1' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append(" <tr> <td class='style41' colspan='7'> <span id='Label21' style='color:Red;'>Affected End Item/Seial Item</span> </td> </tr>");
        sbHtml.Append("<tr> <td class='style161'> <span id='Label22' style='color:Red;'>Part No</span> </td>");
        sbHtml.Append(" <td class='style177'> <span id='Label23' style='color:Red;'>Conform</span> </td>");
        sbHtml.Append(" <td class='style181'> <span id='Label24' style='color:Red;'>Rework</span> </td>");
        sbHtml.Append(" <td class='style185'> <span id='Label25' style='color:Red;'>Use</span> </td>");
        sbHtml.Append(" <td class='style167'> <span id='Label26' style='color:Red;'>Retrofit</span> </td>");
        sbHtml.Append("<td class='style189' align='center'> <span id='Label27' style='color:Red;'>Old CS</span> </td>");
        sbHtml.Append(" <td class='style189' align='center'> <span id='Label28' style='color:Red;'>New CS</span> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style161'> aaa &nbsp;</td>");
        sbHtml.Append("<td class='style177'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style181'> aaa &nbsp;</td>");
        sbHtml.Append("<td class='style185'> aaa &nbsp;</td>");
        sbHtml.Append("<td class='style167'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style189'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style189'> aaa &nbsp;</td> </tr>");
        sbHtml.Append("</table>");
        sbHtml.Append(" <table class='style16' border='1' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append(" <tr> <td class='style31' colspan='5'> <span id='Label8' style='color:Red;'>Documents</span> </td> </tr>");
        sbHtml.Append("<tr> <td class='style191'> <span id='Label9' style='color:Red;'>Prefix</span> </td>");
        sbHtml.Append(" <td class='style190'> <span id='Label10' style='color:Red;'>Number</span> </td>");
        sbHtml.Append(" <td class='style112'> <span id='Label11' style='color:Red;'>Description</span> </td>");
        sbHtml.Append("<td class='style192' align='center'> <span id='Label12' style='color:Red;'>Old Rev</span> </td>");
        sbHtml.Append(" <td class='style30' align='center'> <span id='Label13' style='color:Red;'>New Rev</span> </td> </tr>");
        sbHtml.Append("  <tr> <td class='style191'> aaa &nbsp;</td>");
        sbHtml.Append("<td class='style190'> aaa &nbsp;</td>");
        sbHtml.Append("  <td class='style112'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style192'> aaa &nbsp;</td>");
        sbHtml.Append(" <td class='style30'> aaa &nbsp;</td> </tr>");
        sbHtml.Append("</table>");
        sbHtml.Append(" <table class='style16' border='1' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append(" <tr> <td class ='style56'> <span id='Label30' style='color:Red;'>Change Description</span> <span id='Label55'>aaa</span> </td> </tr> </table>");
        sbHtml.Append(" <table border='1' class='style16' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append("<tr> <td class='style59' colspan='6'> <span id='Label31' style='color:Red;'>Classification of Reason for Change</span> </td> </tr>");
        sbHtml.Append("<tr> <td class='style60'> &nbsp;</td> <td class='style95' align='center'> <span id='Label35' style='color:Red;'>Document</span> </td> <td class='style116' align='center'> <span id='Label36' style='color:Red;'>Design</span> </td> <td class='style95' align='center'> <span id='Label37' style='color:Red;'>Production</span> </td> <td class='style116' align='center'> <span id='Label39' style='color:Red;'>Purchasing</span> </td> <td class='style100' align='center'> <span id='Label40' style='color:Red;'>Customer Request</span> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style60'> <span id='Label32' style='color:Red;'>Improvement</span> </td> <td class='style95' align='center'> <input id='CheckBox24' type='checkbox' name='CheckBox24' checked='checked' /> </td> <td class='style116' align='center'> <input id='CheckBox25' type='checkbox' name='CheckBox25' /> </td> <td class='style95' align='center'> <input id='CheckBox26' type='checkbox' name='CheckBox26' /> </td> <td class='style116' align='center'> <input id='CheckBox28' type='checkbox' name='CheckBox28' /> </td> <td class='style100' align='center' <input id='CheckBox29' type='checkbox' name='CheckBox29' /> </td> </tr>");
        sbHtml.Append("  <tr> <td class='style60'> <span id='Label33' style='color:Red;'>Error</span> </td> <td class='style95' align='center'> <input id='CheckBox31' type='checkbox' name='CheckBox31' /> </td> <td class='style116' align='center'> <input id='CheckBox32' type='checkbox' name='CheckBox32' checked='checked' /> </td> <td class='style95' align='center'> <input id='CheckBox33' type='checkbox' name='CheckBox33' checked='checked' /> </td> <td class='style116' align='center'> <input id='CheckBox35' type='checkbox' name='CheckBox35' /> </td> <td class='style100' align='center'> <input id='CheckBox36' type='checkbox' name='CheckBox36' checked='checked' /> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style60'> <span id='Label34' style='color:Red;'>Requirement</span> </td> <td class='style95' align='center'> <input id='CheckBox38' type='checkbox' name='CheckBox38' /> </td> <td class='style116' align='center'> <input id='CheckBox39' type='checkbox' name='CheckBox39' /> </td> <td class='style95' align='center'> <input id='CheckBox40' type='checkbox' name='CheckBox40' /> </td>  <td class='style116' align='center'> <input id='CheckBox42' type='checkbox' name='CheckBox42' checked='checked' /> </td> <td class='style100' align='center'> <input id='CheckBox43' type='checkbox' name='CheckBox43' /> </td>  </tr>");
        sbHtml.Append("</table>");
        sbHtml.Append(" <table border='1' class='style16' cellpadding = '0' cellspacing ='0'> <tr>");
        sbHtml.Append("  <td class ='style56'> <span id='Label42' style='color:Red;'>Explanition of Reson for Change</span> <span id='Label56'>aaa</span> <br /> </td> </tr>");
        sbHtml.Append(" </table>");
        sbHtml.Append(" <table border='1' class='style16' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append(" <tr> <td colspan='4' class ='style56'> <span id='Label43' style='color:Red;'>Configuration Baseline Affected</span> </td> </tr>");
        sbHtml.Append("  <tr> <td class ='style56'> <input id='CheckBox6' type='checkbox' name='CheckBox6' checked='checked' /><label for='CheckBox6'>No</label> </td> <td class='style101'> <input id='CheckBox7' type='checkbox' name='CheckBox7' checked='checked' /><label for='CheckBox7'>Functional</label> </td> <td class='style102'> <input id='CheckBox8' type='checkbox' name='CheckBox8' /><label for='CheckBox8'>Allocated</label> </td> <td class ='style56'> <input id='CheckBox9' type='checkbox' name='CheckBox9' /><label for='CheckBox9'>Product</label> </td> </tr>");
        sbHtml.Append("   </table>");
        sbHtml.Append(" <table border='1' class='style16' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append("  <tr> <td class ='style56'> <span id='Label44' style='color:Red;'>BOM Affected</span> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style103'> <input id='CheckBox10' type='checkbox' name='CheckBox10' checked='checked' /><label for='CheckBox10'>Yes</label> <input id='CheckBox11' type='checkbox' name='CheckBox11' /><label for='CheckBox11'>No</label> </td> </tr>");
        sbHtml.Append("</table>");
        sbHtml.Append("<table border='1' class='style16' cellpadding = '0' cellspacing ='0'>");
        sbHtml.Append("<tr> <td class ='style56'> <span id='Label45' style='color:Red;'>Evaluation</span> </td> </tr>");
        sbHtml.Append("<tr> <td class ='style56'> <input id='CheckBox12' type='checkbox' name='CheckBox12' checked='checked' /><label for='CheckBox12'>Interchangeability effected</label> </td> </tr>");
        sbHtml.Append(" <tr> <td class ='style56'> <input id='CheckBox13' type='checkbox' name='CheckBox13' /><label for='CheckBox13'>Affects test/assembly tools</label> </td> </tr>");
        sbHtml.Append(" <tr> <td class ='style56'> <input id='CheckBox14' type='checkbox' name='CheckBox14' /><label for='CheckBox14'>Affects the articles of contract</label> </td > </tr>");
        sbHtml.Append(" <tr> <td class ='style56'> <input id='CheckBox15' type='checkbox' name='CheckBox15' /><label for='CheckBox15'>Affects the contract cost</label> </td> </tr>");
        sbHtml.Append(" <tr> <td class ='style56'> <input id='CheckBox16' type='checkbox' name='CheckBox16' /><label for='CheckBox16'>Affects the maintenace</label> </td> </tr>");
        sbHtml.Append("<tr> <td class ='style56'> <input id='CheckBox17' type='checkbox' name='CheckBox17' checked='checked' /><label for='CheckBox17'>Affects the software</label> </td> </tr>");
        sbHtml.Append("  <tr> <td class ='style56'> <input id='CheckBox18' type='checkbox' name='CheckBox18' /><label for='CheckBox18'>Affects the test software</label> </td> </tr>");
        sbHtml.Append("<tr> <td class ='style56'> <input id='CheckBox20' type='checkbox' name='CheckBox20' /><label for='CheckBox20'>Affects the performance, safety, security</label> </td> </tr>");
        sbHtml.Append(" <tr> <td class ='style56'> <input id='CheckBox22' type='checkbox' name='CheckBox22' /><label for='CheckBox22'>Affects reference documents (explain)</label> </td> </tr>");
        sbHtml.Append(" <tr> <td class ='style56'> <input id='CheckBox23' type='checkbox' name='CheckBox23' /><label for='CheckBox23'>Others (explain)</label> </td> </tr>");
        sbHtml.Append(" <tr> <td class='style62'> <span id='Label46' style='color:Red;'>Attachments</span> <span id='Label57'>aaa</span> </td> </tr>");
        sbHtml.Append("  <tr> <td class='style63'> <span id='Label47' style='color:Red;'>Comments</span> <span id='Label58'>aaa</span> </td> </tr>");
        sbHtml.Append("</table></form></body></html>");

        hed = sbHtml.ToString();

        return hed;
    }

}
}

    protected void Button1_Click(object sender, EventArgs e)
    {
        PDF.CreatePDFReport pdf = new PDF.CreatePDFReport();
        string reportContent = pdf.createReport();
       string pathFile = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory)  + "\\engineeringChangeNoticeReport1" + ".pdf";

       HTMLToPdf(reportContent, pathFile);
    }
    public void HTMLToPdf(string HTML, string FilePath)
    {
        Document document = new Document();

        PdfWriter.GetInstance(document, new FileStream(FilePath, FileMode.Create));
        document.Open();
        //Image pdfImage = Image.GetInstance(Server.MapPath("Penguins.jpg"));

        //pdfImage.ScaleToFit(100, 50);

        //pdfImage.Alignment = iTextSharp.text.Image.UNDERLYING; pdfImage.SetAbsolutePosition(180, 760);

        //document.Add(pdfImage);
        iTextSharp.text.html.simpleparser.StyleSheet styles = new iTextSharp.text.html.simpleparser.StyleSheet();
        iTextSharp.text.html.simpleparser.HTMLWorker hw = new iTextSharp.text.html.simpleparser.HTMLWorker(document);
        hw.Parse(new StringReader(HTML));
        document.Close();
        ShowPdf(FilePath);
    }

    private void ShowPdf(string s)
    {
        Response.ClearContent();
        Response.ClearHeaders();
        Response.AddHeader("Content-Disposition", "inline;filename=" + s);
        Response.ContentType = "application/pdf";
        Response.WriteFile(s);
        Response.Flush();
        Response.Clear();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T16:33:01.243

iText[Sharp]`HTMLWorker`不支持[CSS absolute-size values](http://www.w3.org/TR/CSS2/fonts.html#font-size-props)，您的 HTML 中至少有一行正在使用它，并导致异常：

```
<span id='Label3' style='color:Red;font-size:xx-Large;font-weight:bold;'>ECN NO:</span> <span id='Label48' style='font-size:x-Large;'>aaa</span> 
```

删除类似的样式`font-size:xx-Large`，你应该没问题。

如果您愿意使用新的 iText[Sharp] XML/HTML 解析器，您**可以**使用 CSS 绝对大小值——类似这样的东西适用于 XML Worker 版本 1.1.3.0：

```
StringReader stringReader = new StringReader(@"
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head><title></title></head>
<body>
<span id='Label3' style='color:Red;font-size:XX-Large;font-weight:bold;'>ECN NO:</span>
<span id='Label48' style='font-size:X-Large;'>aaa</span>
</body></html>
");
using (Document document = new Document()) {
  PdfWriter writer = PdfWriter.GetInstance(document, STREAM);
  document.Open();
  XMLWorkerHelper.GetInstance().ParseXHtml(
    writer, document, stringReader
  );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T05:27:18.150

在可能的情况下，我使用**了 style="font-size:large;"** 这导致了错误。将其更改为**style="font-size:18px;"** 解决了这个问题。

# c# - C# Forms - 在资源中使用新文件夹

> ID：10259674
> 
> 赞同：0
> 
> 时间：2012-04-21T14:15:37.657
> 
> 标签：c#, forms, resources, directory, new-operator

又是我。这就是问题所在，在资源文件夹的 C# 表单中，我添加了另一个文件夹并将其命名为 Buttons。因为我喜欢纽扣。这是一个问题，如何使用该文件夹中的图像/其他？

到目前为止我的尝试：

```
 ThisBtnImg.Image = Properties.Resources.Buttons.ThisButton; 
```

我没有看到我的尝试成功......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:19:07.157

您需要将资源添加到项目中。转到项目属性，然后选择“资源”选项卡。在那里，您可以添加新资源并从磁盘中选择图像。选择资源类型“图像”，然后选择“添加资源->添加现有文件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:41:34.320

请参阅此答案[如何在单独的文件夹中添加资源？](https://stackoverflow.com/questions/859699/how-to-add-resources-in-separate-folders)

您需要将文件夹的构建操作设置为“嵌入式资源”。然后你可以访问这样的文件

```
using(Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("<root namespace for the      assembly>.<folder name>.<image file name>"))
{
    pictureBox1.Image = Image.FromStream(stream);
} 
```

# javascript - 将结构化字符串转换为数组

> ID：10259675
> 
> 赞同：0
> 
> 时间：2012-04-21T14:15:44.957
> 
> 标签：javascript

这个问题可能已经被问过了。但我真的不知道要搜索什么。

如果我有一个字符串

```
{{aa:bb,aaa:bbb,cc:ee{{aa:cd,cdc:dd,{{ss:ee}},kk:ee}},se:ff}} 
```

我需要在数组中获取输出

ar[0] = aa:bb, ar[1]=aaa:bbb, ar[3] = {{...}}

我尝试使用`variable.split("}}")`

这是破坏字符串而不是获取实际数据。

是否有任何递归函数可以做到这一点？我无法搜索，因为我不清楚什么对象、字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:19:58.127

如果您使用现有格式来构建字符串，例如 JSON：

```
["aa:bb","aaa:bbb","cc:ee",["aa:cd","cdc:dd",["ss:ee"],"kk:ee"],"se:ff"] 
```

然后你可以运行它`JSON.parse()`。- 这比在不被告知其含义的情况下尝试解码该字符串的含义要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:18:35.550

我认为您正在寻找的是如何将 JSON 字符串解析为对象。我不确定，但至少它看起来像基于你的字符串格式。您能否确认来源是否提供 JSON 输出？

如果是：

阅读[这个](https://stackoverflow.com/questions/45015/safely-turning-a-json-string-into-an-object)其他 SO 问题。

# c# - 如果我有大量数据要在 Microsoft Chart 中显示，如何快速刷新图表

> ID：10259677
> 
> 赞同：3
> 
> 时间：2012-04-21T14:15:53.920
> 
> 标签：c#, charts

我正在使用C#，并且想绘制一个折线图来可视化我的数据，数据可以存储为双数组，数字可能非常大，可能超过100000，我也想更新数据源所有时间，但是当我使用Microsoft Win Chart时，如果数字太大，刷新率会很慢（20000会给用户带来非常糟糕的体验），我使用FastLine/FastPoint chartType，但它没有给我改进太大了，我也试过直接将数据绑定到Points.DataBindY方法，还是感觉不太好。

有没有人有如何处理这个问题的经验？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:00:27.500

您会发现，即使是最强大的图表控件，尝试绘制该点数（100k）也将不堪重负。我会质疑为什么甚至有必要这样做。你怎么可能区分图表上的 100k 点？似乎没有必要。大多数图表控件（我最熟悉 WPF 控件）允许您“采样”数据（通过采样阈值）。这允许您仍然保留数据的一般形状，但使用更少的数据点和更好的性能来做到这一点。

另外，绑定数据时要非常小心。对于许多图表控件，当您绑定数据时，绑定到图表的每个数据点都会导致图表刷新。您可以想象 100k 刷新会做什么 :(。如果可以，请在所有数据都绑定到图表后找到刷新图表的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T20:58:02.473

一种解决方案可能是将比例减小到 1:10000，从而在保持相同绘制的同时大大减少绘制点。

您可以通过在将数据数组提供给图​​表之前对其进行处理来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T09:34:39.493

尝试这个：

```
chart1.Series[0].ChartType = SeriesChartType.FastLine; 
```

或者

```
chart1.Series[0].ChartType = SeriesChartType.FastPoint; 
```

如果您需要绘制超过 100,000 个数据点，您还可以考虑使用 FastLine 和 FastPoint 图表类型。它们不支持常规折线图和点图的所有功能，但会显着提高图表性能。

[https://blogs.msdn.microsoft.com/alexgor/2008/12/02/microsoft-chart-control-how-to-improve-chart-performance/](https://blogs.msdn.microsoft.com/alexgor/2008/12/02/microsoft-chart-control-how-to-improve-chart-performance/)

对于其他类型的图表。我也知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:16:16.917

试图留下评论，但由于代表不能，每'x'点手动更新图表：

[https://stackoverflow.com/a/10621610/1360625](https://stackoverflow.com/a/10621610/1360625)

对速度和效率有巨大影响。

# java - 查找具有透明环境的图像的边界像素（用于碰撞检测）

> ID：10259679
> 
> 赞同：5
> 
> 时间：2012-04-21T14:15:54.820
> 
> 标签：java, android, sprite, collision-detection, transparent

我正在编写游戏，我想将带有透明边框（精灵）的图像与圆形碰撞。

通过检查与不透明像素的碰撞，很容易知道圆圈是否与图像重叠。

我遇到的问题是要知道法线角度以便反弹。

我需要一个库（Java）或算法，给定一个图像，它将返回一个数组，其中包含图像边界处的像素，这样我就可以找到表面两点之间的斜率。

有没有我可以学习的库/算法/代码片段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T14:33:33.737

这是一个简单的方法：

`0`从所有透明像素和所有非透明像素的原始图像创建蒙版`1`

`(x,y)`然后，通过从像素中减去每个像素（即`0`或`1`）`(x+1,y+1)`并取绝对值，对您的蒙版执行简单的边缘检测。

这将为您`1`提供图像边缘的像素和`0`其他任何地方的像素。

注意：这种方法本质上等同于将图像视为二维函数并计算其梯度。边缘是强度表面的*陡峭*部分（对应于大梯度值）。[这是有关基于梯度的边缘检测](http://en.wikipedia.org/wiki/Edge_detection#Other_first-order_methods)的更多信息。

* * *

这是一个示例图像：

![原始测试图像](../Images/416d9211482bff78eeff4edaf0127bee.png)

首先屏蔽所有不透明的像素：

![图像蒙版](../Images/6d30d0ddac30a145d57dc5cc08c05cc3.png)

然后将图像向下移动一个像素，然后将其从自身中减去。

这将创建下面的图像。现在只需用 value 读出矩阵索引`1`。

那是你的边缘像素数组。

![边缘蒙版](../Images/85b6a2003c3476393bd13674561f0f28.png)

注意：如果您的图像包含内部透明像素，此技术也会发现内部边缘，这对您来说可能是也可能不是问题......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:18:37.817

这是我长期以来实施的：（detectionStrength 最好 10）

```
public static List<Pixel> getEdges(Image image, int detectionStrength) {

    boolean[][] opaque = new boolean[image.getWidth(null)][image
            .getHeight(null)];
    LinkedList<Pixel> edges = new LinkedList<Pixel>();
    int rgb;

    /*
     * convert to BufferedImage to get individual pixel colors
     */
    BufferedImage bufferedImage;
    if (image instanceof BufferedImage)
        bufferedImage = (BufferedImage) image;
    else {
        bufferedImage = new BufferedImage(image.getWidth(null),
                image.getHeight(null), BufferedImage.TYPE_INT_ARGB);
        bufferedImage.createGraphics().drawImage(image, 0, 0, null);
    }

    for (int i = 0; i < opaque.length; i++) {
        for (int j = 0; j < opaque[i].length; j++) {
            rgb = bufferedImage.getRGB(i, j);
            opaque[i][j] = (rgb >> 24 & 0xFF) > detectionStrength; // transparency
        }
    }

    /*
     * If a pixel is opaque, but is surrounded, with at least one
     * transparent pixel, it is considered an edge.
     */
    for (int x = 0; x < opaque.length; x++) {
        for (int y = 0; y < opaque[x].length; y++) {
            if ((x == 0) || (x == opaque.length - 1) || (y == 0)
                    || (y == opaque[x].length - 1)) { // border pixel
                if (opaque[x][y]) // if opaque, it is automatically an edge,
                                    // no matter its surrounding...
                    edges.add(new Pixel(x, y, new Color(bufferedImage
                            .getRGB(x, y))));

            } else { // not a border pixel
                if (opaque[x][y]
                        && (!opaque[x - 1][y - 1] || !opaque[x][y - 1]
                                || !opaque[x + 1][y - 1]
                                || !opaque[x - 1][y] || !opaque[x + 1][y]
                                || !opaque[x - 1][y + 1]
                                || !opaque[x][y + 1] || !opaque[x + 1][y + 1]))
                    edges.add(new Pixel(x, y, new Color(bufferedImage
                            .getRGB(x, y))));
            }
        }
    }

    return edges;
} 
```

还有 Pixel 类（只是一个非常简单的扩展`Point`）：

```
public class Pixel extends Point implements Cloneable {

    private static final long serialVersionUID = -9053911985748552077L;

    public Color color;

    public Pixel(int x, int y, Color c) {
        super(x, y);
        color = c;
    }

    public Pixel(Pixel other) {
        super(other.x, other.y);
        color = other.color;
    }

    public Color getColor() {
        return color;
    }

    public void setColor(Color newColor) {
        color = newColor;
    }

    public int hashCode() {
        final int prime = 31;
        int result = super.hashCode();
        result = prime * result + ((color == null) ? 0 : color.hashCode());
        return result;
    }

    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (!super.equals(obj))
            return false;
        if (!(obj instanceof Pixel))
            return false;
        Pixel other = (Pixel) obj;
        if (color == null) {
            if (other.color != null)
                return false;
        } else if (!color.equals(other.color))
            return false;
        return true;
    }

    public Object clone() {
        return new Pixel(x, y, color);
    }

    public String toString() {
        return "Pixel [color=" + color + ", x=" + x + ", y=" + y + "]";
    }
} 
```

使用该算法创建的图像将是：

![StackOverflow 徽标](../Images/32a2cf21aef65e8a8ff6125f5dedb636.png)

# android - 使 Android 画廊视图看起来更好看

> ID：10259681
> 
> 赞同：0
> 
> 时间：2012-04-21T14:16:22.530
> 
> 标签：android, gallery

关于如何使厨房视图看起来更好的任何想法？因为它目前不是最好的。任何帮助将不胜感激，它可以是从大小到边框甚至布局的任何内容:)

.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <Gallery android:id="@+id/gallery1" android:layout_width="fill_parent"
            android:layout_height="wrap_content"></Gallery>
    <ImageView android:id="@+id/ImageView01"
            android:layout_gravity="center_vertical|center_horizontal"
            android:layout_width="wrap_content" android:layout_height="wrap_content"></ImageView>
</LinearLayout> 
```

我的活动：

```
package kevin.erica.box;
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
public class App2Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);
    Gallery g = (Gallery) findViewById(R.id.gallery1);
    g.setAdapter(new ImageAdapter(this));
    g.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(@SuppressWarnings("rawtypes") AdapterView parent, View v, int position, long id) {
            ImageView imageview = (ImageView) findViewById(R.id.ImageView01);
            imageview.setImageResource(mImageIds[position]);

        }
    });
}

public Integer[] mImageIds = {
        R.drawable.lemon,
        R.drawable.kevin,
        R.drawable.mirror
};
public class ImageAdapter extends BaseAdapter {
int mGalleryItemBackground;
private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
    TypedArray a = obtainStyledAttributes(R.styleable.HelloGallery);
    mGalleryItemBackground = a.getResourceId(
            R.styleable.HelloGallery_android_galleryItemBackground, 0);
    a.recycle();
}
public int getCount() {
    return mImageIds.length;
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
}
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView i = new ImageView(mContext);
    i.setImageResource(mImageIds[position]);
    i.setLayoutParams(new Gallery.LayoutParams(150, 100));
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setBackgroundResource(mGalleryItemBackground);
    return i;
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:28:33.377

您可以使用coverflow one 更改整个画廊的形状，如果您愿意，也可以与您的叠加并调整它。

检查此链接：

[http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

希望这有帮助

# c# - 是否可以更改通过远程处理返回的对象的名称空间名称？

> ID：10259683
> 
> 赞同：1
> 
> 时间：2012-04-21T14:16:39.300
> 
> 标签：c#, .net

我有一个 3 层应用程序。1 层和 2 层通过远程处理相互通信。

此外，假设我们有一个通用程序集，由 1 层和 2 层引用。2 层将该公共程序集的类返回到 1 层。

所以在这个场景中，两个层（1 和 2）都必须引用公共程序集。

问题（可能很愚蠢）是......是否可以即时更改返回的类型（命名空间）（从 2 层到 1 层），以便所有类都引用主命名空间。

通常的想法是将所有类打包到只有一个程序集（在 1 层中），我只能有一个可执行文件......我只想摆脱外部程序集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:34:31.167

当您使用 .Net Remoting 时，您需要引用一个通用程序集。

对象创建后不能更改其命名空间。您可以将对象映射到具有相同结构但名称空间不同的新对象。但这并不能减少您使用原始对象引用 dll 的需要。

如果可能，您应该开始从 Remoting 迁移到 WCF。

# android - android deplayed通知，立即工作

> ID：10259688
> 
> 赞同：0
> 
> 时间：2012-04-21T14:17:28.577
> 
> 标签：android, android-intent, notifications

下面是我在内部和 onClickListner 中使用的代码，我想显示通知，一段时间后说 30 秒，但它会立即显示。

```
 String title = "sample title"
        String text = "sample text";

        Calendar target = Calendar.getInstance();
        target.set( Calendar.HOUR_OF_DAY, model.getAlarmHour() );
        target.set( Calendar.MINUTE, model.getAlarmMinute() );
        target.set( Calendar.SECOND, 0 );

        int icon = android.R.drawable.stat_notify_error;

        String ns = context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);

        Intent notificationIntent = new Intent( context, WakeUpNotify.class );
        PendingIntent contentIntent = PendingIntent.getActivity( context, 0, notificationIntent, 0);

        Notification notification = new Notification(icon, text, target.getTimeInMillis() );
        notification.setLatestEventInfo(appContext, title, text, contentIntent);

        mNotificationManager.notify( notifyId, notification ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:11:36.680

您`target`无法控制*何时*显示`Notification`。它仅确定该项目的通知抽屉条目中显示的时间。

# php - 使用 PHP 将文本拆分为两列

> ID：10259689
> 
> 赞同：7
> 
> 时间：2012-04-21T14:17:31.997
> 
> 标签：php, split

我想知道是否可以将文本分成两部分。

在我的网站上，我有一个产品描述（500-1000 字），我想这样显示：

```
<div class="text-col">
    <?php echo nl2br($col1); ?>
</div>

<div class="text-col">
    <?php echo nl2br($col2); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T14:22:34.147

像这样的东西？

```
$len = strlen($input);
$space = strrpos($input," ",-$len/2);
$col1 = substr($input,0,$space);
$col2 = substr($input,$space);
// now output it 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-21T14:36:03.233

恕我直言，这是一个典型的问题，应该通过 CSS 完成，因为它只影响它的显示方式。你为什么不使用 CSS3 的`column-count`：

```
div#multicolumn1 {
  -moz-column-count: 3;
  -moz-column-gap: 20px;
  -webkit-column-count: 3;
  -webkit-column-gap: 20px;
  column-count: 3;
  column-gap: 20px;
} 
```

[（从http://www.quirksmode.org/css/multicolumn.html](http://www.quirksmode.org/css/multicolumn.html)复制）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:39:36.030

您可以在 PHP 中轻松地将文本分成两部分：

```
$text = "my very long text with a lot of words";
$length = strlen($text);
$middle = round($length/2, 0);
$col1 = substr($text, 0, $middle);
$col2 = substr($text, $middle); 
```

但是这个mos经常在一个单词的中间切断这个短语。因此，您需要更新代码以找到中间最近的空间：

```
for ($i = $middle; $i < $length; $i ++) {
    if ( substr($text, $i, 1) == " " ) return;
}
$cut = $i;
$col1 = substr($text, 0, $cut);
$col2 = substr($text, $cut+1); 
```

空间不是一个漂亮的文本剪切的唯一地方。因此，您将不得不寻找行尾。有些空间也不好。例如分号前的空格。因此，您将添加以改进此代码以获得改进的结果。

您也可以尝试 css3 多列指令： [http](http://www.css3.info/preview/multi-column-layout/) ://www.css3.info/preview/multi-column-layout/ 但它是 IE 支持的注释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:27:36.313

这很简单：

```
$text = "This should be a very long product description with some bold specs in it.";
$splitat = strpos($text," ",strlen($text)/2);
$col1 = substr($text, 0, $splitat);
$col2 = substr($text, $splitat); 
```

但实际上您可能希望在客户端执行此操作，因为可能涉及其他因素，如浅段落宽度、连字符、文本块高度等。

在 CSS3 中，您已经支持[多列文本](http://www.w3.org/TR/css3-multicol/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T14:46:16.863

你可以使用 wordwrap() 函数吗？

# perl - 尝试重命名脚本和 cmd 行中的文件时出错

> ID：10259691
> 
> 赞同：1
> 
> 时间：2012-04-21T14:17:45.777
> 
> 标签：perl, bash

```
$dir = "/home/naveen/mp3tag/testfolder";
opendir(DMP3, $dir) || die("Cannot open directory");
@files= readdir(DMP3;
foreach $f (@files)
{
  unless ( ($f eq ".") || ($f eq "..") )
  {
    $oldfile = $f;
    $newfile = $f;
    $newfile =~ s/ /_/g;
    print "Old file: $oldfile \t";
    print "New file: $newfile";
    print "\n";
    rename ("$oldfile", "$newfile") or warn "Couldn't rename $oldfile to $newfile !\n";
  } 
} 
```

我正在编写一个简单的程序来为现有文件添加下划线并重命名它。这就是我对代码的了解。但是它无法重命名文件并给我一个警告，我不确定错误在哪里。

此外，当我在 cmd 行上尝试同一行时，我收到以下错误消息。

```
$ rename Jacques\ Greene\ -\ Clark\ \(Original\ Mix\).mp3 JG - C.mp3
Bareword "mp3" not allowed while "strict subs" in use at (eval 1) line 1.

$ rename Jacques\ Greene\ -\ Clark\ \(Original\ Mix\) JG - C
Can't locate object method "Original" via package "Mix" (perhaps you forgot to load "Mix"?) at (eval 1) line 1. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:44:09.293

您正在尝试重命名目录中的*所有*文件，而不仅仅是一个文件。错误可能很多，因为你没有提到它，我只能猜测。

`rename`是，我记得，有点不稳定，使用`move`from [File::Copy](http://search.cpan.org/perldoc?File%3a%3aCopy)是一个更安全的选择。此外，您可能希望避免重命名目录。使用更直观的界面也可能不是一个坏主意。

您最大的错误之一是不使用`use strict; use warnings;`. 忽略这些给自己带来的麻烦是不可低估的。

```
use strict;
use warnings;
use File::Copy qw(move);

for (@ARGV) {
    my $org = $_;
    tr/ /_/;
    move($org, $_) or warn "Couldn't move $org to $_: $!";
} 
```

**用法：**

```
perl script.pl /home/naveen/mp3tag/testfolder/*.mp3 
```

因此，只要您提供适当的 glob 作为参数，您的脚本只会影响这些文件。您可以添加更多检查以使其更严格。

如果您的命令行尝试是使用 /usr/bin/rename 中的工具，我会冒险猜测您的错误可以通过使用引号来避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T07:58:48.347

这个工作示例可能会有所帮助

```
use strict;
use warnings;
use File::Copy;

my $dir = '/home/naveen/mp3tag/testfolder';
my @mp3s = glob ("$dir/*.mp3");

for my $mp3 (@mp3s) {
    my $new_mp3 = $mp3;
    $new_mp3 =~ s/\s/_/g;
    move($mp3, $new_mp3);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:22:21.807

你在`rename`打电话`/usr/bin`。如果要调用程序，请为其选择更好的名称，或指定完整路径来调用它。

但在此之前，请至少将缺少的右括号添加到`readdir`.

# objective-c - 应用沙盒：文档范围的书签无法解析；不返回任何错误

> ID：10259692
> 
> 赞同：17
> 
> 时间：2012-04-21T14:17:56.447
> 
> 标签：objective-c, macos, cocoa, osx-lion, appstore-sandbox

我正在对我的应用程序进行沙箱处理，并尝试允许导入/导出多个文件，使用 XML 文件来引用它们。为了允许我的应用程序（或其他沙盒应用程序）访问 XML 中列出的文件，我还包括一个序列化的安全范围书签。我正在按照[这个答案](https://stackoverflow.com/a/10193426/105717)中的描述对其进行序列化，并且我的单元测试（*不是*沙盒）可以毫无问题地写入和读取 XML 数据。当我的应用程序解析书签时，`NSURL`返回为零，`NSError`参考也是。既然我不认为应该是这样，为什么会这样？我可以通过提示用户选择带有 . 的文件/目录来解决这个问题`NSOpenPanel`，但我仍然希望书签能够正常工作。

**在测试项目中重现**

要在家中重现，请在 Xcode 中创建一个新的 Cocoa 应用程序，并为项目中的文件使用以下 Gist：[https](https://gist.github.com/2582589) ://gist.github.com/2582589 （*使用正确的 next-view 循环更新*）

然后，按照[Apple 的说明](https://developer.apple.com/library/mac/documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxQuickStart/AppSandboxQuickStart.html#//apple_ref/doc/uid/TP40011183-CH2-SW8)对项目进行代码签名。您可以通过按顺序单击按钮来重现问题（我以[rdar://11369377的形式提交给 Apple）。](http://openradar.appspot.com/radar?id=1688402)您选择磁盘上的任何文件（在应用程序容器之外），然后选择要导出到的 XML，然后要导入相同的 XML。

希望你们能够帮助我弄清楚我做错了什么。要么我做错了，框架错误地保持自己的状态，要么我做对了，但它完全坏了。我尽量不[怪框架](http://www.codinghorror.com/blog/2008/03/the-first-rule-of-programming-its-always-your-fault.html)，那是什么？还是有另一种可能？

**示例代码**

将 XML 导出到`docURL`：

```
// After the user picks an XML (docURL) destination with NSSavePanel

[targetURL startAccessingSecurityScopedResource];
NSData *bookmark = [targetURL bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope
                       includingResourceValuesForKeys:nil
                                        relativeToURL:docURL
                                                error:&error];
[targetURL stopAccessingSecurityScopedResource]; 
```

从以下位置导入 XML `docURL`：

```
// After the user selected the XML (docURL) from an NSOpenPanel

NSURL *result = [NSURL URLByResolvingBookmarkData:bookmarkData
                                          options:NSURLBookmarkResolutionWithSecurityScope
                                    relativeToURL:docURL
                              bookmarkDataIsStale:nil
                                            error:&error]; 
```

我尝试用 包围这个调用[`[docURL ..AccessingSecurityScopedResource]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/uid/20000301-SW94)，这没有任何区别（正如预期的那样，因为在打开面板中选择 docURL 后，它已经在范围内

另外，我在我的`app.entitlements`文件中指定了以下内容：

```
com.apple.security.files.user-selected.read-write
com.apple.security.files.bookmarks.app-scope
com.apple.security.files.bookmarks.collection-scope 
```

如上所述，第二步（解析书签）完成了，但两者都为`error`空`result`。由于我一直在实施沙盒，所以我犯的大多数错误都导致`NSError`返回，这帮助我解决了这个错误。但是现在没有错误，也没有解析 URL。

**其他故障排除步骤**

*   我尝试将 XML 文件放入我的应用程序的沙箱中，但没有任何区别，因此访问 XML 文件不是问题

*   该应用程序使用 ARC，但单元测试也是如此，它成功了。我也尝试使用 alloc/init 而不是 autoreleased 类方法（以防万一）

*   我在创建书签后立即粘贴了 URL 解析代码，它运行良好，生成了一个安全范围的 URL

*   我`po`在最初创建的书签（序列化之前）上做了一个，然后在反序列化后的书签上做了一个，它们匹配 100%。序列化不是问题

*   我用 替换了分辨率调用[`CFURLCreateByResolvingBookmarkData(..)`](https://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/func/CFURLCreateByResolvingBookmarkData)，没有任何变化。如果它是一个错误，它存在于 Core Foundation API 以及 Cocoa 层中

*   指定值`bookmarkDataIsStale:`无效

*   如果我指定`0`for `options:`，那么我***会***返回一个有效的 NSURL，但它没有安全范围，因此后续读取文件的调用仍然失败

    换句话说，反序列化的书签似乎是有效的。如果书签数据已损坏，我怀疑 NSURL 是否可以用它做任何事情

*   `NSURL.h`没有包含任何有用的评论来指出我做错了什么

是否有其他人在沙盒应用程序中成功使用安全范围的文档书签？如果是这样，你在做什么和我不一样？

**操作系统版本请求**

可以访问 Mountain Lion 测试版的人可以验证我的示例项目是否显示相同（缺少）错误？如果是 Lion 之后修复的 bug，我就不用担心了。我还没有加入开发者计划，所以没有访问权限。我不确定回答这个问题是否会违反 NDA，但我希望不会。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T21:37:37.023

在您的 Gist 代码中，更改 AppDelegate.m 中的以下行（第 61 行）：

```
[xmlTextFileData writeToURL:savePanel.URL atomically:YES]; 
```

到

```
[xmlTextFileData writeToURL:savePanel.URL atomically:NO]; 
```

然后您的代码将起作用。

其原因可能与在调用之前需要有一个包含文档范围书签的现有（但为空的）文件的原因相同`[anURL bookmarkDataWithOptions]`：在创建 NSData 实例时，ScopedBookmarkAgent 添加了一些东西（比如标签，可能扩展文件属性）到该文件。

如果您以原子方式将数据（即书签 URL）写入该文件，实际上它们不是直接写入该文件，而是首先写入一个临时文件，如果写入操作成功，该临时文件将被重命名。在写入临时文件然后重命名它的过程中，似乎已添加到包含书签的（空但现有的）文件中的标签丢失了（因此可能会删除原始的空文件） .

顺便说一句：在将相应的 URL 传递给包含文档范围书签的 xml 文件之前，不必创建应用范围的书签。

补充：`com.apple.security.files.bookmarks.collection-scope`已`com.apple.security.files.bookmarks.document-scope`在 10.7.4 中重命名为。

# c# - C# 套接字编程新手

> ID：10259693
> 
> 赞同：1
> 
> 时间：2012-04-21T14:18:09.097
> 
> 标签：c#, sockets, client

我是使用 C# 进行套接字编程的新手。我正在开发具有多个客户端的客户端-服务器应用程序。我不太确定如何在服务器与其客户端之间建立通信。

*   客户端发送将调用服务器执行某些操作的关键字消息（即“字符串”）是一个好主意吗？
*   客户端发送需要处理的某些类（我创建的）的实例是个好主意吗？
*   在服务器和客户端之间发送/接收文件（我正在使用 XML）是一个好主意吗？

如果我的问题很幼稚，我很抱歉，因为这是我第一次开发具有客户端-服务器架构的应用程序。

我发现[这个链接](http://csharp.net-informations.com/communications/csharp-multi-threaded-socket.htm)有一个这样的应用程序的例子，但我想知道是否有人知道任何其他网站/书籍/教程和解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:31:07.463

如果您创建一个现代 c# 应用程序，您很少需要借助普通套接字来创建客户端-服务器应用程序。相反，您可以创建 WCF 服务。（选择一个[教程](http://www.codeproject.com/Articles/42643/Creating-and-Consuming-Your-First-WCF-Service)并尝试）。

使用 WCF 服务而不是普通套接字将使您免于创建协议、解析和类似的东西的大量管道工作。

# iphone - 将 iOS 应用程序翻译成不受支持/非标准的语言

> ID：10259695
> 
> 赞同：12
> 
> 时间：2012-04-21T14:18:14.413
> 
> 标签：iphone, ios, localization, internationalization

我正在扩展现有的 iPhone 应用程序（4.x 及更高版本）以支持更多语言：爱沙尼亚语、拉脱维亚语和立陶宛语。

在我的 iPhone 和模拟器中，不支持这些语言，而且我很确定在这些地区也不存在用于它们的特殊固件。

**我怎样才能最好地制作支持它们的应用程序？**

我想出了两个我不太喜欢的解决方案。它们都不允许我在应用程序中使用一种以上的语言，因为用户无法从 Settings.app 列表中选择捆绑的语言。这意味着必须为每种语言提交一个版本。

## 选项 1：滥用 en.lproj 目录

对于每种目标语言（lt、lv、et），我将该语言的字符串文件放入 en.lproj 目录中。

**优点：**使用众所周知的机制。该应用程序只是认为它正在运行英语。

**缺点：**对我的本地化工具造成严重破坏。它让未来的维护者感到困惑，因此容易出错。需要一个奇怪的构建设置。

## 选项 2：滥用 NSUserDefaults[AppleLanguages]

NSUserDefaults 中的`AppleLanguages`对象包含应用程序要使用的语言列表。通过这样设置，我可以让应用程序从 lt.lproj 目录加载例如立陶宛语：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"lt", nil] forKey:@"AppleLanguages"]; 
```

（由于历史原因，我已经在做一个稍微复杂的版本，以删除应用程序的某些版本中不推荐使用的翻译。否则即使我不再将它与应用程序捆绑在一起，较旧的安装也会选择 lproj 目录。）

**优点：**使用正确命名的 lproj 目录。与本地化工具很好地集成。简单的设置。只需输入一行`main.m`即可实施。

**缺点：**尽管`AppleLanguages`很多人都在使用密钥，但这个解决方案使用它来加载其他不受支持的语言，所以我担心我可能会如履薄冰。

## 乐问题

*   其他应用程序通常如何支持这些“不受支持”的语言？
*   有没有办法支持它们以及通常支持的语言？
*   你对`AppleLanguages`黑客有什么看法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T19:44:22.210

为什么不在您的应用程序中添加语言设置然后使用此代码（我在一个项目中使用它，用户可以在我的客户要求后在应用程序中切换语言）。

它基本上覆盖了 NSLocalizedString 并使用相同的文件结构（en.lproj 等）来保持您在使用“apple-way”时使用的相同语言文件。

试试看！

.h 文件

```
#import <Foundation/Foundation.h>

//#undef NSLocalizedString

#define ___(key) \
[[I7I18N sharedInstance] localizedStringForKey:(key)]

#undef NSLocalizedString
#define NSLocalizedString(key,value) \
[[I7I18N sharedInstance] localizedStringForKey:(key)]

@interface I7I18N : NSObject

@property (nonatomic, retain) NSMutableDictionary *i18nTable;
+ (I7I18N *)sharedInstance;
- (NSString *)localizedStringForKey:(NSString *)key;
- (void)setLocale:(NSString *)lProjFile;

@end 
```

.m 文件

```
#import "I7I18N.h"

static I7I18N *sharedInstance;

@implementation I7I18N
@synthesize i18nTable=_i18nTable;

+ (I7I18N *)sharedInstance {
    if(!sharedInstance) {
        sharedInstance = [[I7I18N alloc] init];
    }

    return sharedInstance;
}

- (id)init
{
    self = [super init];
    if (self) {
        self.i18nTable = [NSMutableDictionary dictionary];

        NSArray *validLocalizations = [[NSBundle mainBundle] localizations];
        [self setLocale:[validLocalizations objectAtIndex:0]];
    }
    return self;
}

- (void)setLocale:(NSString *)lProjFile {
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Localizable.strings" ofType:@"" inDirectory:[NSString stringWithFormat:@"%@.lproj",lProjFile]];
    self.i18nTable = [NSDictionary dictionaryWithContentsOfFile:path];
}

- (NSString *)localizedStringForKey:(NSString *)key {
    NSString *possibleI18NString = [self.i18nTable objectForKey:key];
    if(!possibleI18NString) {
        return key;
    }
    return possibleI18NString;

}

@end 
```

**更新 1：** 不要忘记构建所有视图（`NSLocalizedString`使用`[[I7I18N sharedInstance] setLocale:@"yourlang.lproj"]`.

# process - createprocess parent child，没有来自孩子的信息

> ID：10259700
> 
> 赞同：0
> 
> 时间：2012-04-21T14:18:34.833
> 
> 标签：process, cmd, msdn

我为 createprocess parent 和 child 运行 MSDN 示例，但它无法正常工作，因为它将信息写入子输入（我通过将其打印到 cmd 来检查），但在 printf( "\n->Contents of子进程 STDOUT:\n\n"); 当它调用时

```
ReadFromPipe(); 
```

在调用应用程序的 cmd 中，我什么也没收到，但它等待，等待。只有当我执行 ctrl+c 时它才会结束。可能是什么原因？

```
#include "stdafx.h"
#include <windows.h> 
#include <tchar.h>
#include <stdio.h> 
#include <strsafe.h>
#include <iostream> //only for cout

#define BUFSIZE 4096 

HANDLE g_hChildStd_IN_Rd = NULL;
HANDLE g_hChildStd_IN_Wr = NULL;
HANDLE g_hChildStd_OUT_Rd = NULL;
HANDLE g_hChildStd_OUT_Wr = NULL;

HANDLE g_hInputFile = NULL;

void CreateChildProcess(void); 
void WriteToPipe(void); 
void ReadFromPipe(void); 
void ErrorExit(PTSTR); 

int _tmain(int argc, TCHAR *argv[]) 
{ 
   SECURITY_ATTRIBUTES saAttr; 

   printf("\n->Start of parent execution.\n");

// Set the bInheritHandle flag so pipe handles are inherited. 

   saAttr.nLength = sizeof(SECURITY_ATTRIBUTES); 
   saAttr.bInheritHandle = TRUE; 
   saAttr.lpSecurityDescriptor = NULL; 

// Create a pipe for the child process's STDOUT. 

   if ( ! CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &saAttr, 0) ) 
      ErrorExit(TEXT("StdoutRd CreatePipe")); 

// Ensure the read handle to the pipe for STDOUT is not inherited.

   if ( ! SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0) )
      ErrorExit(TEXT("Stdout SetHandleInformation")); 

// Create a pipe for the child process's STDIN. 

   if (! CreatePipe(&g_hChildStd_IN_Rd, &g_hChildStd_IN_Wr, &saAttr, 0)) 
      ErrorExit(TEXT("Stdin CreatePipe")); 

// Ensure the write handle to the pipe for STDIN is not inherited. 

   if ( ! SetHandleInformation(g_hChildStd_IN_Wr, HANDLE_FLAG_INHERIT, 0) )
      ErrorExit(TEXT("Stdin SetHandleInformation")); 

// Create the child process. 

   CreateChildProcess();

// Get a handle to an input file for the parent. 
// This example assumes a plain text file and uses string output to verify data flow. 

   if (argc == 1) 
      ErrorExit(TEXT("Please specify an input file.\n")); 

   g_hInputFile = CreateFile(
       argv[1], 
       GENERIC_READ, 
       0, 
       NULL, 
       OPEN_EXISTING, 
       FILE_ATTRIBUTE_READONLY, 
       NULL); 

   if ( g_hInputFile == INVALID_HANDLE_VALUE ) 
      ErrorExit(TEXT("CreateFile")); 

// Write to the pipe that is the standard input for a child process. 
// Data is written to the pipe's buffers, so it is not necessary to wait
// until the child process is running before writing data.

   WriteToPipe(); 
   printf( "\n->Contents of %s written to child STDIN pipe.\n", argv[1]);

// Read from pipe that is the standard output for child process. 

   printf( "\n->Contents of child process STDOUT:\n\n");
   ReadFromPipe(); 

   printf("\n->End of parent execution.\n");

// The remaining open handles are cleaned up when this process terminates. 
// To avoid resource leaks in a larger application, close handles explicitly. 

   return 0; 
} 

void CreateChildProcess()
// Create a child process that uses the previously created pipes for STDIN and STDOUT.
{ 
   TCHAR szCmdline[]=TEXT("C:\\Windows\\notepad.exe");//TEXT("C:\\Windows\\System32\\cmd.exe");
   PROCESS_INFORMATION piProcInfo; 
   STARTUPINFO siStartInfo;
   BOOL bSuccess = FALSE; 
    std::cout<<"\nCreateChildProcess.\n";
// Set up members of the PROCESS_INFORMATION structure. 

   ZeroMemory( &piProcInfo, sizeof(PROCESS_INFORMATION) );

// Set up members of the STARTUPINFO structure. 
// This structure specifies the STDIN and STDOUT handles for redirection.

   ZeroMemory( &siStartInfo, sizeof(STARTUPINFO) );
   siStartInfo.cb = sizeof(STARTUPINFO); 
   siStartInfo.hStdError = g_hChildStd_OUT_Wr;
   siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;
   siStartInfo.hStdInput = g_hChildStd_IN_Rd;
   siStartInfo.dwFlags |= STARTF_USESTDHANDLES;

// Create the child process. 

   bSuccess = CreateProcess(NULL, 
      szCmdline,     // command line 
      NULL,          // process security attributes 
      NULL,          // primary thread security attributes 
      TRUE,          // handles are inherited 
      0,             // creation flags 
      NULL,          // use parent's environment 
      NULL,          // use parent's current directory 
      &siStartInfo,  // STARTUPINFO pointer 
      &piProcInfo);  // receives PROCESS_INFORMATION 

   // If an error occurs, exit the application. 
   if ( ! bSuccess ) 
      ErrorExit(TEXT("CreateProcess"));
   else 
   {
      // Close handles to the child process and its primary thread.
      // Some applications might keep these handles to monitor the status
      // of the child process, for example. 

      CloseHandle(piProcInfo.hProcess);
      CloseHandle(piProcInfo.hThread);
   }
}

void WriteToPipe(void) 

// Read from a file and write its contents to the pipe for the child's STDIN.
// Stop when there is no more data. 
{ 
   DWORD dwRead, dwWritten; 
   CHAR chBuf[BUFSIZE];
   BOOL bSuccess = FALSE;

   for (;;) 
   { 
      bSuccess = ReadFile(g_hInputFile, chBuf, BUFSIZE, &dwRead, NULL);
      if ( ! bSuccess || dwRead == 0 ) break; 

      bSuccess = WriteFile(g_hChildStd_IN_Wr, chBuf, dwRead, &dwWritten, NULL);
      if ( ! bSuccess ) break; 
   } 
    std::cout<<"\nchBuf: "<<chBuf<<std::endl; 
// Close the pipe handle so the child process stops reading. 

   if ( ! CloseHandle(g_hChildStd_IN_Wr) ) 
      ErrorExit(TEXT("StdInWr CloseHandle")); 
} 

void ReadFromPipe(void) 

// Read output from the child process's pipe for STDOUT
// and write to the parent process's pipe for STDOUT. 
// Stop when there is no more data. 
{ 
   DWORD dwRead, dwWritten; 
   CHAR chBuf[BUFSIZE]; 
   BOOL bSuccess = FALSE;
   HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);

        bSuccess = ReadFile( g_hChildStd_OUT_Rd, chBuf, 4, &dwRead, NULL); 
        std::cout<<"\nchBuf: "<<chBuf<<std::endl;

   /*for (int i=0;i<2;i++) //read twice
   { 
      bSuccess = ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &dwRead, NULL);
      if( ! bSuccess || dwRead == 0 ) break; 
      std::cout<<"\nchBuf: "<<chBuf<<std::endl;

      bSuccess = WriteFile(hParentStdOut, chBuf, 
                           dwRead, &dwWritten, NULL);
      if (! bSuccess ) break;
   } */

} 

void ErrorExit(PTSTR lpszFunction) 

// Format a readable error message, display a message box, 
// and exit from the application.
{ 
    LPVOID lpMsgBuf;
    LPVOID lpDisplayBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );

    lpDisplayBuf = (LPVOID)LocalAlloc(LMEM_ZEROINIT, 
        (lstrlen((LPCTSTR)lpMsgBuf)+lstrlen((LPCTSTR)lpszFunction)+40)*sizeof(TCHAR)); 
    StringCchPrintf((LPTSTR)lpDisplayBuf, 
        LocalSize(lpDisplayBuf) / sizeof(TCHAR),
        TEXT("%s failed with error %d: %s"), 
        lpszFunction, dw, lpMsgBuf); 
    MessageBox(NULL, (LPCTSTR)lpDisplayBuf, TEXT("Error"), MB_OK); 

    LocalFree(lpMsgBuf);
    LocalFree(lpDisplayBuf);
    ExitProcess(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:48:48.203

原因是您正在启动一个 GUI 应用程序 notepad.exe，它永远不会写入标准输出。所以 stdout 处于打开状态并且没有写入任何内容，因此调用`ReadFile`阻塞等待某些东西出现。切换回您已注释掉的 cmd.exe，您将在`ReadFromPipe`通话时获得输出。

此外，您的 ReadFromPipe 函数将主要输出垃圾。为了测试它，我将其更改为：

```
void ReadFromPipe(void) 

// Read output from the child process's pipe for STDOUT
// and write to the parent process's pipe for STDOUT. 
// Stop when there is no more data. 
{ 
   DWORD dwRead;
   CHAR chBuf[BUFSIZE]; 
   BOOL bSuccess = TRUE;

   do
   {
        dwRead = 0;
        bSuccess = ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE-1, &dwRead, NULL); 
        chBuf[dwRead] = '\0';
        std::cout<<"\nchBuf: "<<chBuf<<std::endl;
   } while (bSuccess && dwRead > 0);
} 
```

# javascript - 如何在 2 个客户端之间直接连接流式传输视频

> ID：10259705
> 
> 赞同：2
> 
> 时间：2012-04-21T14:18:50.233
> 
> 标签：javascript, video, web, streaming, p2p

我想在 2 个客户端之间流式传输视频而不通过服务器传递它

双方发送实时视频，也接收对方实时视频

是否有允许这样做的开源项目？

有那个API吗？我愿意付钱

我想在移动 Js、html、Ajax、websockets、css 的 web 应用程序中创建它...

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:09:01.990

如果您将视频直接从一个客户端流式传输到另一个客户端，那么您必须了解两种网络模型之间的关系：客户端到服务器和点对点。服务器通常是静态机器，具有网络基础设施、静态 IP 和许多允许公众访问的东西。对于点对点，您将面临许多问题，首先是在您创建用于接收的套接字时通过 NAT。客户端之一可能需要创建套接字来接受连接，第二个来接受。他们可能同时做这两件事并坚持第一次连接。目前无法使用网络流式传输视频。Chrome 和 FireFox 只有一些测试版开发，不会很快公开。您也无法使用 WebSockets 建立对等连接。

因此，没有办法使用 Web 技术来做到这一点。您可能想了解原生移动开发，但在那里您也将面临点对点连接的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:39:11.430

[VLC](http://www.videolan.org)有一个内置的流服务器，以及它可以通过命令行使用的 gui，因此可以编写脚本以满足您的要求

[http://www.videolan.org/doc/streaming-howto/en/](http://www.videolan.org/doc/streaming-howto/en/)

# file-io - 使用 Fortran 90 在输入文件中正确读取注释行

> ID：10259712
> 
> 赞同：5
> 
> 时间：2012-04-21T14:20:17.790
> 
> 标签：file-io, comments, fortran, gfortran

据我了解，Fortran 在从文件中读取数据时，会跳过以星号 (*) 开头的行，假设它们是注释。好吧，我似乎在用我创建的一个非常简单的程序实现这种行为时遇到了问题。这是我的简单 Fortran 程序：

```
 1       program test
  2 
  3       integer dat1
  4 
  5       open(unit=1,file="file.inp")
  6 
  7       read(1,*) dat1
  8 
  9 
 10       end program test 
```

这是“file.inp”：

```
 1 *Hello
  2 1 
```

我用

```
gfortran -g -o test test.f90 
```

当我运行时，我收到错误：

```
At line 7 of file test.f90 (unit = 1, file = 'file.inp')
Fortran runtime error: Bad integer for item 1 in list input 
```

当我运行删除了注释行的输入文件时，即：

```
1 1 
```

代码运行良好。因此，Fortran 正确解释该注释行似乎是一个问题。这一定是我在这里想念的非常简单的东西，但我无法在谷歌上找到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T15:19:01.920

Fortran 不会自动跳过输入文件中的注释行。您可以很容易地做到这一点，首先将行读入字符串，检查您的注释符号的第一个字符或在字符串中搜索该符号，然后如果该行不是注释，则对字符串进行“内部读取”以获取数值。

就像是：

```
use, intrinsic :: iso_fortran_env

character (len=200) :: line
integer :: dat1, RetCode

read_loop: do
   read (1, '(A)', isostat=RetCode)  line
    if ( RetCode == iostat_end)  exit ReadLoop
    if ( RetCode /= 0 ) then
      ... read error
      exit read_loop
    end if
    if ( index (line, "*") /= 0 )  cycle read_loop
    read (line, *) dat1
end do read_loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:05:12.687

Fortran 默认情况下不会忽略任何内容，除非您使用名称列表并且在这种情况下注释以感叹号开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-12T16:43:14.257

我发现使用[退格](http://www.lahey.com/docs/lfpro78help/F95ARBACKSPACEStmt.htm)语句比建议的解决方案更直观。当在行首遇到注释字符“#”时，以下子例程将跳过该行。

```
subroutine skip_comments(fileUnit)
  integer, intent(in) :: fileUnit
  character(len=1) :: firstChar

  firstChar = '#'
  do while (firstChar .eq. '#')
    read(fileUnit, '(A)') firstChar
  enddo
  backspace(fileUnit)

end subroutine skip_comments 
```

该子例程可以在`read`语句之前的程序中使用，如下所示：

```
open(unit=10, file=filename)
call skip_comments(10)
read(10, *) a, b, c
call skip_comments(10)
read(10, *) d, e
close(10) 
```

上述实现的限制：

1.  *如果注释放在跨越多行的变量的值之间*，它将不起作用，例如数组。
2.  对于大型输入文件，这是非常低效的，因为当遇到退格语句时，会从头开始重新读取整个文件直到前一个字符。
3.  只能用于`sequential`访问文件，即典型的 ASCII 文本文件。`direct`使用或访问类型打开的文件`append`将不起作用。

但是，我发现它非常适合用于提供用户参数的短文件。

# jquery - 成功的jQuery ajax错误

> ID：10259715
> 
> 赞同：0
> 
> 时间：2012-04-21T14:20:48.717
> 
> 标签：jquery, json, api, mustache

我一直在搞乱 Mustache.js 和 Github api，当我尝试加载更多实际上不可用的结果时遇到了一些障碍。我希望在发生这种情况时显示一条消息或抛出一个错误，但它不起作用。

看看[http://jsbin.com/upohuz/4/edit](http://jsbin.com/upohuz/4/edit)看看我在哪里，因为我确信它是一个简单的修复或我忽略的东西。

当我尝试加载不可用的项目时出现的错误是：

```
Uncaught Error: Syntax error, unrecognized expression: 
```

这与示例的第 59 行有关：

```
$(html).appendTo('#foo'); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:24:17.433

你需要写

```
$('#foo').append(html); 
```

它不会在空 html 上抛出任何错误。

# c - 如何设置存储结构内的变量

> ID：10259717
> 
> 赞同：0
> 
> 时间：2012-04-21T14:21:22.337
> 
> 标签：c, string, char

我想做的是为管理员存储用户名和密码，以便我可以将用户输入的内容与存储的内容进行比较，但我不知道如何存储它并使用指针，我认为我应该使用 strcpy 但现在我很困惑......对不起，我希望能解释我需要帮助的内容

```
#include <stdio.h>
#include <stdlib.h>

struct profile
{

char First[15];
char Last[15];
char Pwd[10];
char UserName[10];
};

void main_menu(struct profile user[]);
void admin_signIn(struct profile user[]);
void userSignUp(struct profile user[]);
void userSignOn(struct profile user[]);
void quit(struct profile user[]);
void admin_menu(struct profile user[]);

int main(int argc, char *argv[])
{
   struct profile user[100];
   struct profile *puser;
   puser=&user[0];   
   puser.UserName[0] = "a";
 //puser.Pwd = "password";

   main_menu(user);

  system("PAUSE");
  return 0;
}

void main_menu(struct profile user[])
{
    int choice = 0;

   printf("User Menu\n");
   printf("          \n");
   printf("1 - Admin Sign In\n");
   printf("2 - Sign Up\n");
   printf("3 - Sign On\n");
   printf("4 - Quit\n");
   printf("Enter Choice:");
   scanf("%d", &choice);
   getchar();

   if (choice == 1)
    admin_signIn(user);
    else
       if (choice == 2)
          userSignUp(user);
          else
              if(choice == 3)
                userSignOn(user);
                else
                    if(choice == 4)
                    quit(0);

}

void admin_signIn(struct profile *puser)
{
     int i=0;
     char buff_in[20];
     //UserName="admin";
     //puser->Pwd = "password";
     //user[0].Last = "     ";
     //user[0].UserName="admin";
     //user[0].Pwd="password";

     //do
     //{
     printf("Enter admin user name:");
     fgets(buff_in,10,stdin);
     strcmp((puser+i)->UserName,buff_in);

     printf("Enter admin password:");
     fgets(buff_in,10,stdin);
     strcmp((puser+i)->Pwd,buff_in);
     i++;
     fflush(stdin);

     //printf("the user name is %s:", user[0].UserName);

     //if(user[i].UserName==user[0].UserName && user[i].Pwd ==user[0].Pwd)
              admin_menu(user);
     else
        printf("try again");
    // }while(i<2);
}

void userSignUp(struct profile user[])
{
     int i=0;

 do
 {
     printf("Enter user name that you would like to use:\n");
     gets(user[i].UserName);
     //printf("enter user password:");
     //gets(user[i].Pwd);
     i++;

  }while(i<2);
}

void userSignOn(struct profile user[])
{
     printf("you are in the user sign on menu\n");
}

void quit(struct profile user[])
{
     printf("the is the quit function\n");
}

void admin_menu(struct profile user[])
{
     printf("you are in the admin menu\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:22:48.547

```
puser.UserName[0] = "a";  // This is wrong. Needs to be 'a' 
```

`puser.UserName[0]`是 类型`char`并且`"a"`是 类型`const char*`。

使用[strncpy](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/) -

```
strncpy( puser.Pwd, "password", strlen("password") ); 
```

注意：目标中的源和空终止字符应该有足够的空间。

# android - 为什么我需要在我的应用程序中使用两项服务？

> ID：10259720
> 
> 赞同：0
> 
> 时间：2012-04-21T14:21:43.023
> 
> 标签：android, android-service

我正在使用专用网络在机场的高级对讲机上开发类似 MMS 的应用程序。我使用套接字从特定服务器接收消息。如果用户登录消息系统，用户应该始终收到消息，直到他注销。

我解决此类问题的想法如下：

1.  通过使用一个本地服务作为 Manager 服务，该服务将接收来自 UI 的命令，并使用一个远程服务来保持与服务器的连接。
2.  当本地服务从 UI 接收到不同的 cmd 时，它会检查存储在 Application 子类中的***UserState ，然后将所需的信息发送给远程服务。***
3.  远程服务将生成不同的消息包发送到服务器。
4.  而接收过程是这样的：远程服务接收并解析不同的消息（如短信、联系人地址列表）后，将必要的字符串、文件URI或对象发送给本地服务，本地服务将信息发送给本地服务。活动。

我不知道这个想法是否会奏效。对于我需要像 Manager 这样的角色来处理不同的发送 cmd 和接收消息以及一致的连接，我的应用程序应该是什么样的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:09:58.333

> 使用一个本地服务作为 Manager 服务，该服务将接收来自 UI 的命令，并使用一个远程服务来保持与服务器的连接。

不，使用一项本地服务，期间。第二项服务不会增加任何价值；远程服务会浪费 RAM、CPU 和电池而没有任何好处，从而使您的应用程序变得更糟，而不是更好。

> 你能告诉我一种方法如何使连接服务始终运行吗？

您不能让服务“始终”运行。如果您使用`startService()`and `startForeground()`，它将最不可能被自动终止。但是，用户可以选择强制停止您的应用程序或使用任务杀手，如果他们愿意的话。

> 在服务文档中，本地服务比远程服务（在自己的进程中运行）更容易被系统杀死。

这是不正确的。

# ruby - Google Places API Search 按关键字“Wakeboards”返回律师事务所结果？

> ID：10259722
> 
> 赞同：1
> 
> 时间：2012-04-21T14:22:09.390
> 
> 标签：ruby, json, google-places-api

我正在尝试通过 Places API 进行查询，以查找与华盛顿特区附近的滑水板相关的地点。然而，我得到的结果显示律师事务所。这是我正在做的查询：

```
https://maps.googleapis.com/maps/api/place/search/json?location=38.897244,-77.0413344&sensor=false&radius=5000&keyword=wakeboards&key=XXXYYYZZZ 
```

而且，这是我得到的结果......

> {“html_attributions”：[]，“结果”：[{“几何”：{

```
 "location" : {

           "lat" : 38.9088260,

           "lng" : -77.04382099999999

        }

     },

     "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",

     "id" : "54ebf52e053beb9b3f4d8c753975571eb532a8d7",

     "name" : "Marshfield Associates",

     "reference" : "snip",

     "types" : [ "finance", "establishment" ],

     "vicinity" : "21 Dupont Cir NW # 500, Washington"

  },

  {

     "geometry" : {

        "location" : {

           "lat" : 38.8932170,

           "lng" : -77.02048499999999
        }

     },

     "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",

     "id" : "82d45a91169dda03932d8cba1cbb66007ce985ef",

     "name" : "Gravitas Capital Advisors",

     "reference" : "snip",

     "types" : [ "finance", "establishment" ],

     "vicinity" : "601 Pennsylvania Ave NW, Washington"

  },

  {

     "geometry" : {

        "location" : {

           "lat" : 38.9195570,

           "lng" : -77.027940
        }

     },

     "icon" : "http://maps.gstatic.com/mapfiles/place_api/icons/generic_business-71.png",

     "id" : "dba09f9090c092573b8c4ab0de10b8d2ac921e3e",

     "name" : "Casa Iris",

     "reference" :"shortersnip",

     "types" : [ "establishment" ],

     "vicinity" : "2201 12th Street Northwest, Washington"
  } ], "status" : "OK" } 
```

显然，“Marshfield Associates”不销售滑水板。那么，我在这个查询中做错了什么？我也通过第三方 API/包装器尝试过，它返回相同的结果。

感谢您的任何帮助，您可以提供。

Ps 对 json 响应的糟糕格式感到抱歉。不知道如何让它很好地包装在 SO 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:30:06.387

解决此问题的简单方法是转到 Google 地图，插入您的位置 (38.897244,-77.0413344)，然后手动“搜索附近”寻找滑水板。网站上的完整搜索结果通常会引起人们对精确匹配的注意。

我这样做了，我的结果表明 Marshfield Associates 即将出现，因为 findthebest.com 在他们的业务列表中是关键字垃圾邮件，而“wakeboards”恰好是该页面上垃圾邮件的关键字之一。不幸的是，像这样的误报在谷歌地图上很常见，因为位置的权重非常大——在普通的网络搜索中，像这样的关键字垃圾邮件甚至不会进入前 1000 名。

其他明显的误报也在 findthebest.com 上，带有完全相同的关键字垃圾邮件文本（这是相当不寻常的，可能表明该网站存在技术故障）。这是一个链接，应该指向我正在查看的确切搜索：http: [//g.co/maps/2ny2p](http://g.co/maps/2ny2p)参见 H、I 和 J。

# apache - 如何在 Apache CXF 中使用 HTTPS 端点创建 Web 服务

> ID：10259727
> 
> 赞同：2
> 
> 时间：2012-04-21T14:22:27.930
> 
> 标签：apache, service, web, cxf

我将 Apache 作为我部署了 CXF Web 服务的 Tomcat 服务器的前端。对我的 Web 服务的所有访问都是通过由 Apache Web 服务器处理的 SSL 进行的。这意味着我的 Tomcat 服务器完全不知道 SSL。因此，我的 CXF 生成的 Web 服务有一个**http**端点 URL。如何在为 Apache Web 服务器提供处理 SSL 的机会的同时使其成为**HTTPS 。****覆盖端点URL 方案**的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T11:41:17.500

如果这样做，您还应该在 publishedEndpointURL 中设置正确的地址（使用 HTTPS）。像这里：[如何在 localhost 上启动 cxf 服务但在 wsdl 中返回外部地址？](https://stackoverflow.com/questions/1750683/how-to-start-cxf-service-on-localhost-but-return-external-address-in-wsdl)

这将使生成的 WSDL 中的导入指向正确的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T12:15:15.190

如果您需要[为 Tomcat 启用 SSL 连接器](http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html#Edit_the_Tomcat_Configuration_File)（如果您`mod_proxy`在 Apache 中使用），或者您需要启用安全 AJP 连接器（如果您使用`mod_jk`）：

`<Connector protocol="AJP/1.3" redirectPort="443" scheme="https" secure="true" address="127.0.0.1" port="8009" />`

CXF 在这里不受欢迎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T22:31:41.797

我遇到了同样的问题，并通过对基本 URL 使用 JNDI 查找来解决它，然后为 publishEndpointUrl 构造一个 url。在 XML 配置中，它看起来像这样：

```
 <jee:jndi-lookup id="ProxyURL" jndi-name="myProxyURL" resource-ref="true" cache="true" />     
 <bean id="EndpointURL"  class="java.lang.String">
    <constructor-arg value="#{ProxyURL+'/myServiceAddress'}"/>
     </bean>
 <jaxws:endpoint
    id="myServiceEndpoint"
    ...[other parameters]...
    publishedEndpointUrl="#EndpointURL"> 
```

# c# - 歧义错误

> ID：10259730
> 
> 赞同：0
> 
> 时间：2012-04-21T14:22:32.707
> 
> 标签：c#, linq

这是我的代码

```
 HotelMGT _DB = new HotelMGT();

    public virtual ActionResult Index()
    {
        ViewBag.TypeID = new string[] { "Assets", "Liabilities", "Income","Expenses" };
        var model = from r in _DB.AccountHead
                    orderby r.AccountHeadID ascending
                    //where r.AccountTypeID == AccountTypeID || (AccountTypeID==null)
                    select r; //_DB.AccountType;
        return View(model );
    } 
```

我收到以下错误。

```
 Ambiguity between 'MyHotel.Models.HotelMGT.AccountHead' and   
 'MyHotel.Models.HotelMGT.AccountHead' 
```

Id 与 C# 或 MVC 相关的错误，我该如何解决？欢迎所有建议。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:33:07.023

您比较相同的值，因此请指定您从中获取数据的表。

错误实际上是说您将鸡蛋与鸡蛋进行比较，但您只有一个鸡蛋，我们需要另一个鸡蛋。

# php - 首次安装后 XAMPP Apache 和 MySQL 服务未启动或停止

> ID：10259737
> 
> 赞同：2
> 
> 时间：2012-04-21T14:23:16.603
> 
> 标签：php, xampp

嗨，我想开始学习 PHP 和 MySql，并且我对 Javascript 女巫的了解目前非常有限，我只使用 jQuery 并且只知道该语言的核心语法。我选择阅读[学习 PHP MySQL 和 Javascript](https://rads.stackoverflow.com/amzn/click/com/0596157134)女巫似乎适合我所有的需求。

在安装新东西时总是运气不好，我立即在 XAMPP 1.7.7 中遇到了死胡同。

服务器在首次安装时运行正确，我可以从控制面板停止运行 MySQL 和 Apache。但是如果关闭控制面板并重新打开它，我会出错。

如果第一次打开它时我离开了 apache 并打开了 Mysql 我得到错误 Apache Service not stop [-1] MySQL 也是如此。如果服务关闭我得到相同的错误，说 apache 服务无法启动相同mysql。

我尝试了多次安装，同样的事情发生了。

我首先要安装它并将它们打开，这样我就可以开始工作了，但遗憾的是它不能正确运行，或者我不知道如何正确运行 PHP 脚本。

这是我所做的：

我打开 PHPStorm 并粘贴了这个带有 PHP 扩展的小脚本：

```
 <?php

    echo "Hello world";

 ?> 
```

之后我尝试运行它，但我收到错误“未安装 PHP 解释器”。如果 apache 服务器正在运行，它不应该工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T15:38:19.590

您应该在停止 apache 或 mysql 后等待让它们清理。如果你想强制他们结束他们的进程，你可以从任务管理器中杀死**httpd.exe**和**mysqld.exe**，然后尝试从 xampp 控制面板启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:43:28.040

会不会是您在同一台机器上运行 Skype？这是一个已知问题，Skype 控制端口 80 以成为 Skype 网络中的超级节点。

转到 Skype 并在`"Tools"`菜单中找到小节`"Advanced"`选项`"Connection"`。在那里你会找到一个选项说`"Use port 80 and 443 as alternatives for incoming connections"`。取消选中它，单击`"Save"`并尝试重新启动服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T10:10:24.063

您使用的是什么操作系统？你在使用 XAMPP 控制面板吗？

在 Windows 按

```
Start
Run
Type "Services.msc"
Find the "Apache" service
Right click and stop 
```

如果我在没有控制面板的情况下启动 apache 服务但尝试使用控制面板停止它，我发现我会收到此错误。

# java - 如何在ubuntu中重启tomcat 6

> ID：10259738
> 
> 赞同：99
> 
> 时间：2012-04-21T14:23:32.880
> 
> 标签：java, tomcat, ubuntu

如何使用默认安装从命令行在 Ubuntu 上重新启动和启动 Tomcat 6？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-04-21T14:27:06.200

如果您使用的是提取的tomcat，那么，

`startup.sh`并且`shutdown.sh`是位于 TOMCAT/bin/ 中的两个脚本来启动和关闭 tomcat，您可以使用它

如果安装了tomcat，那么

```
/etc/init.d/tomcat5.5 start
/etc/init.d/tomcat5.5 stop
/etc/init.d/tomcat5.5 restart 
```

# file - PowerShell：如何按列对文本文件进行排序？

> ID：10259741
> 
> 赞同：5
> 
> 时间：2012-04-21T14:24:01.830
> 
> 标签：file, sorting, text, powershell

我想在 PowerShell 中对文本文件进行排序。文本文件如下所示：

```
name1 4
name2 2.3
name3 6.7
name4 5.1 
```

我想像这样输出该文件：

```
name3 6.7
name4 5.1
name1 4
name2 2.3 
```

如您所见，它按与名称关联的数字降序排列。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T15:13:49.813

您可以按表达式排序，拆分每一行（空格分隔符），将最后一项转换为 system.double 并对其进行排序：

```
Get-Content .\file.txt | Sort-Object { [double]$_.split()[-1] } -Descending 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T08:11:01.587

另一种变体：

```
gc c:\f1.txt | add-member scriptproperty sortby {$this.split()[-1]} {[double]$this} -pass | sort sortby -desc 
```

# windows - cgo - 如何将 go 字符串转换为 LPCWSTR

> ID：10259742
> 
> 赞同：3
> 
> 时间：2012-04-21T14:24:02.800
> 
> 标签：windows, go, cgo

我想使用一些 windows api，但我不知道如何开始。有没有它的教程？

无论如何，我有一个简单的代码。你能帮我纠正一下吗？

```
package mypackage
/*
#cgo LDFLAGS: -luser32
#include <windows.h>
*/
import "C"
import "unsafe"

func MessageBox(m string) {
      cm := C.CString(s)
      defer C.free(unsafe.Pointer(cm))
      C.MessageBoxA(C.HWND(nil), (*C.CHAR)(cm), C.LPCSTR(nil), 0) // It display a message.
} 
```

编辑：我可以处理 char* 但仍然不知道 wchar_t* 是什么。

```
import "syscall"

func MessageBoxU(m string) {
        C.MessageBoxW(C.HWND(nil), (*C.WCHAR)(unsafe.Pointer(syscall.StringToUTF16Ptr(m))), C.LPCWSTR(nil), 0)
} 
```

如果这不是成语，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T16:04:59.503

以下是将 Windows API 封装到 Go 的两个项目：

*   [github.com/antonlahti/go-winapi](https://github.com/antonlahti/go-winapi)
*   [github.com/AllenDang/w32](https://github.com/AllenDang/w32)

一个使用示例：

```
 func setWidgetText(hwnd HWND, text string) error {
        if TRUE != go-winapi.SendMessage(hwnd, WM_SETTEXT, 0, uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(text)))) {
            return newError("WM_SETTEXT failed")
        }
        return nil
    } 
```

# entity-framework - 选择单个实体的一部分而不检索整个实体

> ID：10259747
> 
> 赞同：3
> 
> 时间：2012-04-21T14:24:24.440
> 
> 标签：entity-framework, linq-to-entities

我想从单个实体（按 ID）获取单个属性（blob）。我有：

```
context.References
    .Single(r => r.ID == id)
    .Blob; 
```

这让我觉得效率低下，因为我得到了整个参考，只是丢弃了除了 Blob 之外的所有东西。这导致

```
context.References
    .Where(r => r.ID == id)
    .Select(r => r.Blob)
    .Single(); 
```

应该只查询 Blob，但最后将 Single 作为事后的想法有点烦人（但我认为有必要强制执行奇异性）。我的问题是：有没有更好的方法来实现这一点，或者我的第二个代码块就是这样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:41:01.173

恐怕就是这样。在 LINQPad 中运行查询表明 Entity Framework 将查询转换为：

```
SELECT TOP (2) 
[Extent1].[Id] AS [Id], 
[Extent1].[Blob] AS [Blob], 
... etc for all columns
FROM [dbo].[References] AS [Extent1]
WHERE 1 = [Extent1].[Id] 
```

和

```
SELECT TOP (2) 
[Extent1].[Blob] AS [Blob]
FROM [dbo].[References] AS [Extent1]
WHERE 1 = [Extent1].[Id] 
```

所以你说第二个查询效率更高*一点是正确的。*这是否重要是由您测试和决定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:48:45.257

您可以使用`context.References.Single(r => r.ID == id).Blob`组合 Where 和 Single，但这将转移整个实体。为了效率起见，您的解决方案是最好的。

# html - 我可以将两个 div 并排放置，当一个被移除时，另一个扩展以填充空间？

> ID：10259749
> 
> 赞同：0
> 
> 时间：2012-04-21T14:24:31.863
> 
> 标签：html, css

假设我在一个固定宽度的容器中有 2 个相邻的 div。水平相邻即是。然后说一个 div 被删除了，我怎样才能让另一个 div 填充另一个 div 所在的旁边的空间？因为它应该扩大它的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:54:40.700

我认为这在 IE 中不起作用……我已经在 Chrome、Firefox 和 Safari 中对其进行了测试，但这可能对你有用。

[这](http://jsfiddle.net/W9USV/)是一个小提琴。

CSS：

```
#container {
    width: 400px;
}
#left {
    width: 200px;
    height: 200px;
    background: #ddd;
    float: left;
}
#right {
    width:100%;
    float: right;
    height: 200px;
    position: relative;
    background: #CCC;
}
#left + #right {
    width: 200px;
} 
```

Javascript：

```
function removeElement(divNum) {
  var d = document.getElementById('container');
  var olddiv = document.getElementById(divNum);
  d.removeChild(olddiv);
} 
```

HTML：

```
<div id="container">
   <div id="left"></div>
   <div id="right"></div>
   <input onclick="removeElement('left')" type="button" value="X"/>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:40:22.493

[这是](http://jsfiddle.net/cFeFx/)一种无需 Javascript 即可实现的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:14:26.590

你可以这样做，`display: table;`但它在 IE 7 及更低版本中不起作用。这是代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Test div</title>
    <style type="text/css">
        #container {
            width: 400px;
            display: table;
        }

        #row-container {
            display: table-row;
        }

        #left, #right {
            display: table-cell;
            height: 200px;
        }

        #left {
            background-color: red;
        }

        #right {
            background-color: blue;
        }
    </style>
</head>
<body>
<div id="container">
    <div id="row-container">
        <div id="left"></div>
        <div id="right"></div>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:48:06.503

您可以使用 jQuery 来操作 CSS 属性和可见性。在[这个例子](http://jsfiddle.net/XS7V3/5/)中，我改变了宽度。

# c - flock()，然后是 fgets()：低级锁，然后是 stdio 读/写库函数。是否可以？

> ID：10259752
> 
> 赞同：2
> 
> 时间：2012-04-21T14:24:44.017
> 
> 标签：c, stdio, locks, flock

我正在写一个服务器网络。

每个连接都由一个单独的线程提供服务，所以**我事先不知道线程的数量**。

还有一组文本文件（也不知道数量），每个线程可以对每个文件进行读/写。

一个文件一次只能由一个线程写入，但不同的线程可以同时写入不同的文件。

如果一个文件被一个或多个线程读取（读取可以是并发的），则没有线程可以在该文件上写入。

现在，我注意到了这个（[线程安全的多文件写入](https://stackoverflow.com/questions/4998778/thread-safe-multi-file-writing)）解决方案，但我也想使用函数作为 fgets()，例如。

那么，我可以*flock()*一个文件，然后使用fgets() 或另一个stdio 读/写库函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:29:29.683

首先，使用`fcntl`，而不是`flock`。后者是非标准的、已弃用的 BSD 功能，不适用于 NFS 和可能的其他文件系统。`fcntl`另一方面，锁定是 POSIX 标准，*旨在*在任何地方工作。

现在，如果您想将文件级读写器锁定与 stdio 混合使用，它会起作用，但您必须注意确保缓冲不会破坏您对锁定的假设。我要解释的方法不是唯一的，但我相信它是最清晰/最简单的：

当您想使用 stdio 对您的一个文件进行操作时，获得正确类型的锁（读或写，也就是共享或独占）应该是您在`fopen`. 用于`fileno`获取文件描述符编号并对其应用锁定。之后，执行整个读取或写入操作。**不要**尝试解锁文件；相反，调用`fclose`关闭文件并让它在关闭时隐式解锁。否则，您可能会在未写入未缓冲的数据时释放锁，或者稍后读取在释放锁之前缓冲的数据，在释放锁后不再有效。

# c++ - 编译器如何决定调用哪个函数？

> ID：10259757
> 
> 赞同：5
> 
> 时间：2012-04-21T14:25:28.803
> 
> 标签：c++, constants, overloading

假设 String 类中有两个重载的成员函数（一个 const 版本和一个非常量版本）：

```
char & String::operator[](int i)         //Version 1
{
    cout<<"char & String::operator[](int i) get invoked."<<std::endl;
    return str[i];
}

const char & String::operator[](int i) const       //Version 2
{

    cout<<"const char & String::operator[](int i) const get invoked."<<std::endl;
    return str[i];
} 
```

并且有一个测试代码片段

```
int main(){
    String a;
    cout<<a[0]<<endl;  //Line 1
    a[0]='A';     //Line 2
} 
```

编译器如何决定调用哪个函数？我发现运行程序时总是会调用版本 1。谁能告诉我为什么会这样？版本 2 怎么会被调用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T14:26:42.990

如果`a`是 const，则将调用第二个重载。

```
int main(){
    const String a;
    cout<<a[0]<<endl;   // would call const version
    a[0]='A';           // will not compile anymore
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:45:22.387

如果对象是**const**，则将调用**const**成员函数。如果对象是**非常量的**，则调用**非常量**成员函数。

**异常**
如果它们只是 const 函数，则无论如何都会调用它。

```
#include <iostream>
using namespace std;

class Foo {
public:
    void print() {
        cout << "Foo non-const member function\n";
    }
    void print() const {
        cout << "Foo const member function\n";
    }
};

class Bar {
public:
        void print() const {
                cout << "Bar const member function\n";
        }
};

int main() {
    Foo foo_non_const;
    const Foo foo_const;

    Bar bar_non_const;
    const Bar bar_const;

    foo_non_const.print();
    foo_const.print();

    bar_non_const.print();
    bar_const.print();

    return 0;
} 
```

$ ./废话

```
Foo non-const member function
Foo const member function
Bar const member function
Bar const member function 
```

# php - 井字游戏与 PHP

> ID：10259758
> 
> 赞同：0
> 
> 时间：2012-04-21T14:25:37.327
> 
> 标签：php, tic-tac-toe

我被我的家庭作业困住了。. 如何使用 php_self 制作井字游戏？

所以，我有 9 个按钮，数字范围从 1 到 9。然后，当单击第一个按钮时，值将更改为“O”。在带有“O”符号的玩家按下按钮后，如果用户单击该按钮，则会出现“X”符号。该过程将继续进行，直到相同的符号出现在水平、垂直或对角线系列上。

我希望有人可以帮助我:(谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:22:08.680

不确定您是否需要`re-event the wheel`..您需要做的是更改界面...

网上有很多解决方案可以帮助您解决这个问题

**PHP & HTML & Javascript**

[http://code.activestate.com/recipes/276962-php-tic-tac-toe/](http://code.activestate.com/recipes/276962-php-tic-tac-toe/)

[http://t-dev.iglu.cz/](http://t-dev.iglu.cz/)

[http://scripts.franciscocharrua.com/javascript/tic-tac-toe/](http://scripts.franciscocharrua.com/javascript/tic-tac-toe/)

[http://www.mystcommunity.com/board/index.php?/topic/11367-tic-tac-toe-in-php/](http://www.mystcommunity.com/board/index.php?/topic/11367-tic-tac-toe-in-php/)

**PHP 和 HTML**

[http://refactormycode.com/codes/1524-simple-tic-tac-toe-php-pure-html](http://refactormycode.com/codes/1524-simple-tic-tac-toe-php-pure-html)

[http://jadendreamer.wordpress.com/2012/01/31/php-tutorial-2-player-tic-tac-toe-game-no-database-required/](http://jadendreamer.wordpress.com/2012/01/31/php-tutorial-2-player-tic-tac-toe-game-no-database-required/)

**结论**

如果您选择任何您感兴趣的脚本，那么如果您在使其工作有任何困难时可以回来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:44:37.063

好吧，在回答这个问题的过程中，我几乎为你做了功课。但是你应该假装我没有，我也会忘记这一点，只专注于你所问的。

此外，PHP_SELF 本身没有任何意义。$_SERVER['PHP_SELF'] 你最有可能指的是你正在编写代码的页面本身。你让它看起来好像有一些东西可以帮助你制作井字游戏-toe 但我不这么认为。如果我错了，也许你可以纠正我。

您似乎提到您已经有一个正在使用的界面。我没有这个接口的代码，所以我假设它看起来像这样：

[http://jsfiddle.net/vyyXP/1/](http://jsfiddle.net/vyyXP/1/)

form html 标记通常包含另一个称为 action 的属性。如果您希望表单中的数据转到其他页面，则通常使用此选项。由于我们不想创建另一个页面，我们可以完全省略它或使用类似的东西：

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"></form> 
```

这是您的 PHP_SELF 唯一出现的地方。同样，如果您对此有所了解，请告诉我。

所以..现在让我们真正开始解决你的这个问题。

第 1 步：**弄清楚如何获取和使用按钮点击。**

每次点击按钮。表单提交并重新加载页面。如果您了解标题，则每次单击按钮并提交表单时，它都会添加额外的pressed=1 或pressed=2 等。这个“按下”关键字来自于我们的按钮具有`name="pressed"`属性这一事实。（请注意，所有按钮都具有相同的名称！）。

我们将需要使用这些数据并找出用户实际点击的内容。

由于我正在使用`<form method="post">`您可以通过使用来获取此数据，`<?php $pressed = $_POST['pressed'] ?>`如果您使用`method="get"`过，您将不得不使用`$_GET['pressed']`。

作为练习，只需在用户单击的任何按钮上显示一个“X”。您应该为表单内的按钮动态生成 html 代码，以使您的生活更轻松。

```
<?php
    for ($i=0; $i<9; $i++) {
    echo '<button name="pressed" value="'.$i.'">';
        if ($_POST['pressed']==$i)
            echo 'X';
        echo '</button>';
    if ($i!=0 && ($i+1)%3==0)
        echo "</br>\n";
    }
?> 
```

第 2 步：**弄清楚如何记住数据。**

由于您使用的是 php.ini。我建议您使用 php 会话。您基本上只需要将 session_start() 放在文件的开头，然后您可以将值存储到 $_SESSION 变量中，php 会在您下次访问该页面时记住。您可以使用它来计算按钮被按下的次数，以便您可以在 O 和 X 之间切换。

弄清楚如何销毁会话。（使该重置按钮起作用）。这很重要。

如果需要，您还可以使用 cookie 或写入文件，但会话可能是最容易使用的东西。

这是一个简单计数器的示例。

```
<?php
  session_start();
  $count = 0;
  if (isset($_SESSION['count']))
    $count = $_SESSION['count'];
  echo $count;
  $_SESSION['count'] = $count+1;
?> 
```

而且..你完成了！

这可能是您需要做的所有重要事情。剩下的只是实现井字游戏的工作方式。如果您需要对我所写的任何内容进行任何澄清，或者您是否需要更多信息，请告诉我。希望这可以帮助！

# java - 重构后更改序列化 Java 对象的路径/类名

> ID：10259760
> 
> 赞同：1
> 
> 时间：2012-04-21T14:25:51.380
> 
> 标签：java, android, serialization, refactoring, deserialization

我已经启动了一个应用程序，它使用序列化对象 myfirstpath.UserState 保存其状态。

现在我想将此对象的路径更改为 mycleanpath.UserState （相同的对象，只有路径更改）。这将适用于第一次安装应用程序的新用户，但对于更新应用程序的用户，他们将失去他们的状态。

有没有办法将序列化的对象 myfirstpath.UserState 加载到 mycleanpath.UserState 中？（当然没有在我的源代码中保留 myfirstpath.UserState ）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T22:56:31.447

我写了一小段代码来搜索/替换包含序列化数据的文件中的旧路径/新路径。我在加载文件之前对其进行了转换，这样我可以将序列化的类移动到新路径，而无需将此类的副本保留在旧路径中。这就是你使用它的方式：

```
File baseDirectory = applicationContext.getFilesDir();
File file = new File( baseDirectory, "settings.data" );
if (file.exists()) {
    //We have to convert it to newsettings.Data
    byte[] convertedBytes = common.utils.SerializeTools.changePathInSerializedFile(file, "old.path.data", "new.path.data");

    //Write converted file
    File newFile = new File( baseDirectory, "newsettings.data" );
    FileOutputStream fos = new FileOutputStream(newFile);
    fos.write(convertedBytes);
    fos.close();

    //Remove old file
    file.delete();
} 
```

这是 SerializeTools.java 的代码。我在这篇很棒的博客文章[http://www.javaworld.com/community/node/2915](http://www.javaworld.com/community/node/2915)中学习了 java 序列化格式。

```
package common.utils;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

public class SerializeTools {

static public byte[] changePathInSerializedFile(File f, String fromPath, String toPath) throws IOException {
    byte[] buffer = new byte[(int)f.length()];
    FileInputStream in = new FileInputStream(f);
    in.read(buffer);
    in.close();
    return SerializeTools.changePathInSerializedData(buffer,fromPath,toPath);
}

static public byte[] changePathInSerializedData(byte[] buffer, String fromPath, String toPath) throws IOException {
    byte[] search = fromPath.getBytes("UTF-8");
    byte[] replace = toPath.getBytes("UTF-8");

    ByteArrayOutputStream f = new ByteArrayOutputStream();

    for (int i=0;i<buffer.length;i++) {
        //Search 2 bytes ahead to let us modify the 2 bytes length of the class name (see Serialize format http://www.javaworld.com/community/node/2915 )
        boolean found=false;
        int searchMaxIndex=i+search.length+2;
        if (searchMaxIndex<=buffer.length) {
            found=true;
            for (int j=i+2;j<searchMaxIndex;j++) {
                if (search[j-i-2]!=buffer[j]) {
                    found=false;
                    break;
                }
            }
        }
        if (found) {
            int high=((int)(buffer[i])&0xff);
            int low=((int)(buffer[i+1])&0xff);
            int classNameLength=(high<<8)+low;
            classNameLength+=replace.length-search.length;
            //Write new length
            f.write((classNameLength>>8)&0xff);
            f.write((classNameLength)&0xff);
            //Write replacement path
            f.write(replace);
            i=searchMaxIndex-1;
        } else {
            f.write(buffer[i]);
        }
    }

    f.flush();
    f.close();

    return f.toByteArray();
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:55:17.407

您必须在您的类中实现[Serializable Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)`readResolve`中提到的方法。这必须返回对象。`myfirstpath.UserState``readResolve``mycleanpath.UserState`

# c# - 如何使用点类在 c# 上动态添加多个按钮？

> ID：10259761
> 
> 赞同：0
> 
> 时间：2012-04-21T14:25:56.947
> 
> 标签：c#, winforms, button

您好，我尝试在表单上的面板上添加多个按钮，并且彼此相邻，而是将它们放在彼此之上。我正在使用以下功能。编码：

```
 private void CreatBtn()
    {
        Point[] p = new Point[6];
        string log = "";
       Form2 frm2 = new Form2();

        Button[] btn = new Button[6];
        for (int i = 0; i < btn.GetLength(0); i++)
        {
                btn[i] = new Button();
                btn[i].Height = 65;
                btn[i].Width = 80;

                p[i] = new Point();
                p[i].X = i * 83;

                p[i].Y =0;

                log +=p.ToString() +"\n";
                btn[i].PointToClient(p[i]);
                btn[i].Show();         
        }

        panel1.Controls.AddRange(btn);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:38:54.123

`Left`为按钮添加值

```
btn[i] = new Button();
btn[i].Height = 65;
btn[i].Width = 80;
btn[i].Left = i * 83; //Now they'll be next to each other. 
```

您也可以考虑使用[`FlowLayoutPanel`](http://msdn.microsoft.com/en-us/library/f9e8s203.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:39:56.430

在它的面板中使用 flowLayoutPanel 但彼此相邻，直到按钮到达它的末尾，然后它将创建一个新的原始

```
 Point[] p = new Point[6];
        string log = "";

        Button[] btn = new Button[6];
        for (int i = 0; i < btn.GetLength(0); i++)
        {
            btn[i] = new Button();
            btn[i].Height = 65;
            btn[i].Width = 80;

            p[i] = new Point();
            p[i].X = i * 83;

            p[i].Y = 0;

            log += p.ToString() + "\n";
            btn[i].PointToClient(p[i]);
            btn[i].Show();
        }

        FlowLayoutPanel pan = new FlowLayoutPanel();
        pan.Width=500;//width of all buttons
        pan.Height = 100;
        pan.Controls.AddRange(btn);

        panel1.Controls.Add(pan); 
```

# python - 了解列表列表

> ID：10259763
> 
> 赞同：0
> 
> 时间：2012-04-21T14:26:11.193
> 
> 标签：python, list

> **可能重复：**
> [Python 列表列表中的意外功能](https://stackoverflow.com/questions/240178/unexpected-feature-in-a-python-list-of-lists)
> [Python 列表混淆](https://stackoverflow.com/questions/5957341/python-list-confusion)

考虑以下代码：

```
a = [[]] * 3
a[1].append("foo") 
```

我希望 的值`a`变为：

```
[[], ["foo"], []] 
```

相反，每个元素`a`都会更新：

```
[["foo"], ["foo"], ["foo"]] 
```

有人可以解释为什么列表的每个元素都更新了，而不仅仅是定义的元素（`a[1]`）？我的逻辑有什么根本错误吗？

为了它的价值，我正在运行 Python2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:31:25.873

Python 中的列表是对象，这意味着当您将列表分配给另一个变量时，更改任何一个都会更改实际列表，例如

```
a = []
b = a
b.append("hi")
print a
// a is now ["hi"] 
```

当你做作业时

```
a = [[]] * 3 
```

这和说的一样

```
inner_list = []
outer_list = [inner_list, inner_list, inner_list] 
```

换句话说，所有的内部列表都是*同一个*对象。不像你想的那样不同的对象。

为了得到你想要的效果，你应该这样做：

```
outer_list = []
for i in range(0, 3):
    outer_list.append([]) 
```

它创建了 3 个内部列表对象并将其放入外部对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:31:28.773

我想你会发现正在发生的事情是 python 正在做的是创建：

```
outer_list = []
inner_list = []
outer_list = [inner_list,inner_list,inner_list] 
```

或者更清楚地解释它， `outer_list`内部列表创建一次，然后`inner_list`复制`* 3`到`outer_list`中，这意味着所有 3 个列表`outer_list`实际上是对相同`inner_list`复制 3 次的引用。

# matlab - Matlab Weka 接口 AdaBoost 问题：越界异常

> ID：10259766
> 
> 赞同：0
> 
> 时间：2012-04-21T14:26:19.167
> 
> 标签：matlab, weka, adaboost

我正在使用从文件交换中获得的 Matlab Weka 接口进行一些交叉验证。我的循环结构似乎适用于 Weka 的 Logistic 分类器。但是，当我尝试对 AdaBoostM1 执行完全相同的操作时，它会引发以下错误：

```
??? Java exception occurred: java.lang.ArrayIndexOutOfBoundsException

Error in ==> wekaClassify at 24 classProbs(t+1,:) = (classifier.distributionForInstance(testData.instance(t)))';

Error in ==> classifier_search at 225 [pred ~] = wekaClassify(matlab2weka('instance', featurelabels, tester), classifier); 
```

我通过一些测试确定只有当训练集中的实例数大于测试集中的实例数时才会发生这种情况。我相信你会明白为什么这对我来说是个问题，因为在大多数情况下，训练集的大小要大于测试集。

在使用 Adaboost 而不是 Logistic 时，我应该如何格式化我的输入有什么不同吗？您可以提供的有关此问题的任何信息都会非常有帮助。

我从这个页面下载了这段代码：http: [//www.mathworks.com/matlabcentral/fileexchange/21204-matlab-weka-interface](http://www.mathworks.com/matlabcentral/fileexchange/21204-matlab-weka-interface)

电子邮件从制作它的人的帐户中退回，并且他似乎没有回应页面上的评论 - 我希望这里的人可能已经使用了这个。

编辑：这是我用来训练和测试分类器的代码：

```
classifier = trainWekaClassifier(matlab2weka('training', featurelabels, train), 'meta.AdaBoostM1', { strcat('-P 100 -S 1 -I ', num2str(r), '-W weka.classifiers.trees.DecisionStump')});
[pred ~] = wekaClassify(matlab2weka('instance', featurelabels, tester), classifier); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:52:08.140

我没有使用过这种软件组合，所以我只能猜测可能导致这种情况的原因。

您的训练/测试数据矩阵是否正确？它们应该是 N-by-D（N 个实例，D 个特征）。

如果您传入一个 D-by-N 训练矩阵和一个 D-by-M 测试矩阵，那么我希望它仅在 M < N 时才有效 - 这就是您所描述的 - 即使那样，它也不会给出有意义的结果。

# api - PayPal 自适应付款 - 错误 520009 - 帐户受到限制

> ID：10259767
> 
> 赞同：6
> 
> 时间：2012-04-21T14:26:21.300
> 
> 标签：api, paypal, payment, account

如果这是一个愚蠢的问题，请提前道歉。我确实尝试过挖掘，但找不到答案。

我正在尝试设置链式支付（在沙盒环境中），但收到错误 520009（帐户受限）。尝试了几个电子邮件地址，它们都给了我这个错误。电子邮件地址未在 Paypal 注册，但据我所知，这应该不是问题，因为自适应支付模块不要求收款人提前拥有 Paypal 账户（尽管他们需要账户才能真正收到钱） ， 当然）。

我究竟做错了什么？我确实将费用支付者设置为 EACHRECEIVER（如某些线程所建议的那样），但错误仍然存​​在。

这就是我返回的内容：错误代码：520009 错误消息：帐户someone1@gmail.com 受到限制

这是我的代码：

```
// Config
$endpoint = trim("https://svcs.sandbox.paypal.com/AdaptivePayments/Pay"); 
$API_UserName = "MY_USERNAME_FROM_SANDBOX";
$API_Password = "MY_PASSWORD_FROM_SANDBOX"; 
$API_Signature = "MY_SIGNATURE_FROM_SANDBOX";
$API_AppID = "APP-80W284485P519543T";    
$API_RequestFormat = "NV";
$API_ResponseFormat = "NV";

    // Create request payload with minimum required parameters
$bodyparams = array (   
        "requestEnvelope.errorLanguage" => "en_US",
        "actionType" => "PAY_PRIMARY",
        "cancelUrl" => 'http://www.beta.com/cancel',
        "returnUrl" => 'http://www.beta.com/return',
        "currencyCode" => 'USD',
        "feesPayer" => "EACHRECEIVER",
        "actionType" => "PAY_PRIMARY",
        "receiverList.receiver[0].email" => 'someone1@gmail.com',
        "receiverList.receiver[0].amount" => '10',
        "receiverList.receiver[0].primary" => 'true', 
        "receiverList.receiver[1].email" => 'someone2@gmail.com',
        "receiverList.receiver[1].amount" => '5',
        "receiverList.receiver[1].primary" => 'false', 
    );

    // Convert payload array into url encoded query string
    $body_data = http_build_query($bodyparams, "", chr(38));

try
{
     //create request and add headers
$params = array("http" => array(
    "method" => "POST",
    "content" => $body_data,
    "header" =>  
        "X-PAYPAL-SECURITY-USERID: " . $API_UserName . "\r\n" .
        "X-PAYPAL-SECURITY-SIGNATURE: " . $API_Signature . "\r\n" .
        "X-PAYPAL-SECURITY-PASSWORD: " . $API_Password . "\r\n" .
        "X-PAYPAL-APPLICATION-ID: " . $API_AppID . "\r\n" .
        "X-PAYPAL-REQUEST-DATA-FORMAT: " . $API_RequestFormat . "\r\n" .
        "X-PAYPAL-RESPONSE-DATA-FORMAT: " . $API_ResponseFormat . "\r\n" 
        ));

    //create stream context
     $ctx = stream_context_create($params);

    //open the stream and send request
 $fp = @fopen($endpoint, "r", false, $ctx);

    //get response
     $response = stream_get_contents($fp);

    //check to see if stream is open
 if ($response === false) {
    throw new Exception("php error message = " . "$php_errormsg");
     }

    //close the stream
     fclose($fp);

    //parse the ap key from the response 
$keyArray = explode("&", $response);

    foreach ($keyArray as $rVal){
        list($qKey, $qVal) = explode ("=", $rVal);
            $kArray[$qKey] = $qVal;
    }

    //print the response to screen for testing purposes
If ( $kArray["responseEnvelope.ack"] == "Success") {

         foreach ($kArray as $key =>$value){
        echo $key . ": " .$value . "<br/>";
}
 }
else {
    echo 'ERROR Code: ' .  $kArray["error(0).errorId"] . " <br/>";
  echo 'ERROR Message: ' .  urldecode($kArray["error(0).message"]) . " <br/>";
    }

   } 
catch(Exception $e) {
    echo "Message: ||" .$e->getMessage()."||";
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-21T10:14:29.857

**编辑：我可以通过删除“feesPayer”参数来解决问题，在单方面付款的情况下，该参数必须是默认值（即 EACHRECEIVER）。**

我也被这个问题困住了。

我想知道如何才能实现“单边支付”，PayPal 描述如下：

> 您可以在有限的情况下使用 Pay API 操作进行单边付款。单方面付款是向没有 PayPal 账户的收款人支付的款项。单边付款可用于隐含或预先批准的简单或平行付款。单边支付不适用于链式支付或需要通过网络流程手动批准的支付。当您发送单方付款时，您发送的付款请求中包含收款人的电子邮件地址，并且此电子邮件地址未链接到注册的 PayPal 帐户。收款人会收到一封电子邮件，通知收款人创建一个帐户并要求付款。PayPal 会向尚未注册或确认电子邮件地址的收款人保留付款，直到收款人创建 PayPal 帐户并确认电子邮件地址。如果退款指定收件人的电子邮件地址尚未注册或确认，则取消对收件人的付款。

任何人都知道需要使用 NVP 进行什么参数设置才能实现这一目标，而无需获得`ERROR Code: 520009 ERROR Message: Account someone1@gmail.com is restricted`

任何提示都非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T19:26:44.150

> “但据我所知，这应该不是问题，因为自适应支付模块不需要收款人提前拥有 Paypal 账户”

这是不正确的。对于自适应链式支付，所有收款人都必须拥有有效且经过验证的个人、高级或企业 PayPal 账户。

# android - 用户重新打开应用程序时如何保存精确定位并将其加载回地图

> ID：10259768
> 
> 赞同：0
> 
> 时间：2012-04-21T14:26:34.547
> 
> 标签：android, google-maps, instance, sharedpreferences

我现在遇到了一些麻烦并且头疼了一段时间。我正在开发的应用程序是基于 GPS 并嵌入了谷歌地图。当我点击地图的任何地方时，我可以放置一个图钉，我需要的是当我重新打开应用程序以查看所有已放置的图钉时。

我考虑过使用`SharedPreferences`（保存方法和加载回方法），但由于引脚保存在`ArrayList<Overlay>`我真的不知道如何检索它（只有 long、int、string、float、boolean 可用）。

还有其他选择吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:55:46.723

这是一个非常普遍的问题。使用`Bundles`这些问题解决它应该为您提供所需的一切。第一个解释了如何使用 bundle 来保存和加载状态。其他人解释了如何将一个保存`ArrayList`到包中。

[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

[如何将 ArrayList 保存在 Bundle 对象中](https://stackoverflow.com/questions/4519820/how-to-save-arraylist-in-an-bundle-object)

[通过 Bundle 传递 ArrayList 对象？](https://stackoverflow.com/questions/5084355/passing-arraylist-objects-through-bundle)

# build-process - aptana studio 3 中是否有一般的构建过程？

> ID：10259769
> 
> 赞同：1
> 
> 时间：2012-04-21T14:26:35.720
> 
> 标签：build-process, build-automation, aptana, aptana3

例如，我在一个 JavaScript 项目中工作，我已经将单个文件拆分为多个文件以简化开发过程。现在是否有某种工具/过程可以让我加入它并可能自动压缩成一个新的单个文件或作为构建过程的一部分？

# javascript - == 与 === 在远程 JavaScript 文件中。哪个更快？

> ID：10259774
> 
> 赞同：0
> 
> 时间：2012-04-21T14:27:15.687
> 
> 标签：javascript, performance, download, comparison-operators

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

在比较 JavaScript 中相同类型的两个操作数是否相等时，使用`==`or`===`不会产生任何概念上的差异，所以我想知道在我的情况下，当必须从远程下载 JavaScript 文件时，哪个运算符实际上更快互联网位置。

虽然严格相等运算符`===`可能在许多用户代理上执行得更快，但它还需要 8 位以上的未压缩信息与 JavaScript 文件一起在网络上传送。

碰巧的是，今天的平均 CPU 在执行数百个条件跳转时比 Internet 连接在提供单个位时要快得多，所以我热衷于在可能的情况下使用`==`代替`===`和`!=`代替`!==`。然而，我对阅读这么多推荐相反的博客感到困惑。

我有什么重要的地方遗漏了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:37:40.470

正如您所说，为了比较两个操作数都保证是相同类型，两个运算符被指定为执行完全相同的步骤，并且除非编译器优化，否则它们的执行可能足够接近相同。因此，在这些情况下使用`==`over在文件大小方面略有优势。`===`

但是，有些人认为一致性更重要：`===`通常更接近您在测试相等性时的意图，并且仅使用`===`and`!==`是许多人认为有用且可读的东西。就个人而言，我有相反的规则，只有`===`在操作数类型不确定时才使用，但我不会推荐任何一种方式。

如果您了解严格相等和非严格相等之间的区别，并且您确信使用`==`并且`!=`不会导致您或其他任何人在将来使用您的代码时出现任何阅读和理解代码的问题，请继续使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:38:05.853

据推测，推荐一个而不是另一个的博客这样做是出于与类似操作的逻辑一致性的原因，而不是为了速度。试图修剪你的 Javascript 程序以从脚本中删除单个字符是不明智的。在提供服务之前通过 minify 或其他自动化工具运行它是一回事，但是手动调整 Javascript 以实现最小文件大小或单个操作数级别的执行速度是一项没完没了、吃力不讨好的任务，这将使您的网站更难维护。

使用对您来说更具逻辑意义的任何操作数，这样当您两年后不记得这条查询线时，您就不会感到困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:38:22.980

```
var test="1";
console.log(test==1); // true
console.log(test===1); // false 
```

`==`检查 test 是否有 1 但`===`检查 test 是否有 1 并检查它的数据类型。在这种情况下，第二个表达式为假，因为它的数据类型是字符串（测试是字符串），但右手操作数不是字符串。下面的测试不同

```
var test=1;
console.log(test==1); // true
console.log(test===1);​ // true 
```

因为 test 包含`Integer`评估为`Boolean`true 的 1 和右手操作数也是相同的。`===`还检查两个操作数是否类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T14:48:01.013

如果我可以引用 Douglas Crockford 的**Javascript: The Good Parts 的**话：

> JavaScript 有两组相等运算符：=== 和 !==，以及它们的邪恶双胞胎 == 和 !=。好的工作按您期望的方式工作。如果两个操作数的类型相同且值相同，则 === 产生真，!== 产生假。当操作数是相同类型时，邪恶双胞胎会做正确的事情，但如果它们是不同类型，它们会尝试强制值。他们这样做的规则既复杂又难以记忆……缺乏传递性令人担忧。我的建议是永远不要使用邪恶的双胞胎。相反，请始终使用 === 和 !==。

无论是否存在性能差异，都很难证明使用“邪恶双胞胎”的合理性。

# android - 如何在方向更改时使用 onSaveInstanceState 和 onRestoreInstanceState 保存状态

> ID：10259776
> 
> 赞同：3
> 
> 时间：2012-04-21T14:27:35.593
> 
> 标签：android, android-orientation

我在堆栈溢出中阅读了几乎所有关于 onSaveInstanceState 和 onRestoreInstanceState 的文章，但我无法解决我的问题。
我的 main.java 中有一个文本视图和按钮，当您单击一个（**a**是一个 int 变量）变量的按钮值时，变量将增加并显示在文本视图中，但是，当我旋转我的手机（方向更改）时，文本视图重置。

我覆盖 onSaveInstanceState 和 onRestoreInstanceState 但它不起作用。还有一件事，我有用于横向视图的特殊 layout-land.xml 文件。

这是我的代码

```
 import android.app.Activity; 
 import android.graphics.Typeface; 
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;
 import android.widget.TextView;

 public class main extends Activity {
     /** Called when the activity is first created. */   
   public int a = 0;     
   public String fonts="TAHOMA.TTF";

   TextView tv = (TextView) findViewById(R.id.salavat);      
   Button b = (Button) findViewById(R.id.showsalavat);

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       b.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View arg0) {
               a++;
               tv.setText(""+a);
            }
       });
   }
   @Override        
   protected void onSaveInstanceState(Bundle SavedInstanceState) {
      super.onSaveInstanceState(SavedInstanceState);            
      SavedInstanceState.putInt("salavat-count", a);
   }
   @Override    
   protected void onRestoreInstanceState(Bundle savedInstanceState) {
       super.onRestoreInstanceState(savedInstanceState);     
       a= savedInstanceState.getInt ("salavat-count");   
   } 
} 
```

这里是我的 main.xml

> ```
>  <TextView
>         android:id="@+id/shoma"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:gravity="right"
>         android:text="@string/shoma"
>         android:textSize="20sp" />
> 
>     <Button
>         android:id="@+id/showsalavat"
>         android:layout_width="fill_parent"
>         android:layout_height="150dp"
>         android:text="+"
>         android:textSize="100sp" />
> 
>     <TextView
>         android:id="@+id/eltemas"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginBottom="55dp"
>         android:text="@string/eltemas" />
> 
>     <TextView
>         android:id="@+id/salavat"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:text="Large Text"
>         android:textAppearance="?android:attr/textAppearanceLarge"
>         android:textSize="35sp" />
> 
>     <TextView
>         android:id="@+id/ferestade"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginBottom="24dp"
>         android:text="@string/salavat"
>         android:textSize="20sp" />
> 
> </LinearLayout> 
> ```

我真的需要一些帮助。我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T14:34:52.157

作为更新，您可以设置`freezesText="true"`

[http://developer.android.com/reference/android/R.attr.html#freezesText](http://developer.android.com/reference/android/R.attr.html#freezesText)

```
 <TextView
    android:id="@+id/eltemas"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:freezesText="true"/> 
```

或者

* * *

这是最简单的例子：

```
TextView yourTextView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    yourTextView = (TextView) findViewById(R.id.your_textview);

}

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("YourTextViewTextIdentifier", yourTextView.getText().toString());

        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        yourTextView.setText(savedInstanceState.getString("YourTextViewTextIdentifier"));
    } 
```

但是，当您开始在方向更改时保存大量对象时，拥有一个表示您的状态的内部类会更好。

使用内部类，它看起来像下面这样。您可以想象，当您拥有越来越多的状态来保存内部类时，处理起来会变得更加容易（不那么混乱）。

```
 private static class State implements Serializable {

    private static final String STATE = "com.your.package.classname.STATE";

    private String yourTextViewText;

    public State(String yourTextViewText) {
        this.yourTextViewText = yourTextViewText;
    }

    public String getYourTextViewText() {
        return yourTextViewText;
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    State s = new State(yourTextView.getText().toString());

    outState.putSerializable(State.STATE, s);

    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);

    State s = (State) savedInstanceState.getSerializable(State.STATE);

    yourTextView.setText(s.getYourTextViewText());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T12:43:56.463

我认为这段代码对你有帮助..

```
public class MainActivity extends Activity 
{

    protected void onSaveInstanceState(Bundle outState) 
    {
        super.onSaveInstanceState(outState);
        System.out.println("TAG, onSavedInstanceState");

        final TextView text = (TextView)findViewById(R.id.textView1);
        CharSequence userText = text.getText();
        outState.putCharSequence("savedText", userText);
    }
    protected void onRestoreInstanceState(Bundle savedState) 
    {       
        System.out.println("TAG, onRestoreInstanceState");
        final TextView text = (TextView)findViewById(R.id.textView1);
        CharSequence userText = savedState.getCharSequence("savedText");
        text.setText(userText);
    }
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final String name = "5";

        final TextView show = (TextView)findViewById(R.id.textView1);
        Button btn = (Button)findViewById(R.id.button1);
        btn.setOnClickListener(new View.OnClickListener() 
        {

            public void onClick(View v) 
            {
                // TODO Auto-generated method stub

                show.setText(name);

            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:35:48.847

您需要使用保存的值重建视图组件。用保存的值填充您的文本视图。

```
@Override   
protected void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);
  a = savedInstanceState.getInt ("salavat-count");
  tv.setText(""+a);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T19:10:33.537

你真的要使用这些方法吗？

在这里，您可以找到一种解决问题的方法，只需将其放在清单文件中

```
<activity android:name="package.subpackage.xptoactivity" android:configChanges="orientation"></activity> 
```

如果你这样做，当你改变方向时，你的 Activity 不会重新加载所有视图来重置它们的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T20:18:10.650

一个被忽视但严重的错误。您必须首先将数据传递给 onSavedInstanceState() 并调用 onSavedInstanceState() 。如果您认为那么您会发现在传递要保存的数据之前调用 onSavedInstanceState 是没有用的。它不会保存活动实例，因为之前调用了 onSavedInstanceState ()。它应该是：

```
@Override
protected void onSaveInstanceState(Bundle SavedInstanceState) 
{           
    SavedInstanceState.putInt("salavat-count", a);
    super.onSaveInstanceState(SavedInstanceState); 
} 
```

# c# - '反序列化操作的回复消息正文时出错......' - 对于我调用的每个方法

> ID：10259778
> 
> 赞同：4
> 
> 时间：2012-04-21T14:27:44.733
> 
> 标签：c#, .net, wcf, web-services, soap

我正在尝试为我们的波兰拍卖服务 Allegro 创建非常简单的客户端应用程序。他们在 SOAP 架构中提供 API。问题是，每次我尝试调用任何方法时，我都会收到：

> 反序列化操作“方法名称”的回复消息正文时出错

一般来说，我是 Web 服务的新手，所以我不知道如何找到问题的根源。我绝对确定我正在将正确的参数传递给下面示例中的方法：

```
class Program
{

    static void Main(string[] args)
    {
        string ALLEGRO_KEY = "******";
        AllegroWebAPI.AllegroWebApiPortTypeClient allegro = new AllegroWebApiPortTypeClient();
        long version = 0;
        String versionStr = allegro.doQuerySysStatus(out version, 1, 1, ALLEGRO_KEY);

    }
} 
```

我在 Visual Studio 2010 中使用 .NET 4.0。我知道有很多人在 .NET 中使用这个 API，甚至 Allegro 本身也有使用这个 API 的官方 Windows Phone 7 客户端。我该如何解决这个问题？

这是 WSDL 地址：

[https://webapi.allegro.pl/uploader.php?wsdl](https://webapi.allegro.pl/uploader.php?wsdl)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:32:17.577

我有类似的问题。看看你内心的异常。我通过扩展 web.config 中 readerQuotas 的大小来解决它:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T06:59:32.750

听起来 Web 服务的响应消息中有一些东西，WCF 难以理解。

在启用服务和消息跟踪的情况下配置[WCF 跟踪。](http://msdn.microsoft.com/en-us/library/ms732023.aspx)这应该会为您提供来自 Web 服务的实际响应消息，并且还会为您提供更详细的错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-06T10:41:57.577

类似的问题在这里。在其依赖项之一更改后需要更新服务引用。

# java - BouncyCastle 有 SecureRandom 服务吗？

> ID：10259780
> 
> 赞同：8
> 
> 时间：2012-04-21T14:28:04.720
> 
> 标签：java, android, bouncycastle

我正在尝试使用 Java 生成加密安全随机数，并使用以下代码部分创建 SecureRandom 对象以查看其提供程序和算法：

```
Provider prov=new org.spongycastle.jce.provider.BouncyCastleProvider();
Security.insertProviderAt(prov, 1);

SecureRandom sr=new SecureRandom();
srProvider=sr.getProvider().toString();
srAlgorithm=sr.getAlgorithm(); 
```

（海绵城堡相当于由 Roberto Tyley 制造的 android 的充气城堡 - [https://github.com/rtyley](https://github.com/rtyley)）

当我显示提供者和算法时，它显示： Crypto version 1.0 SHA1PRNG

令我惊讶的是，即使它作为代码中的第一个提供程序安装，提供程序也不是 Spongycastle。我想问你 a) SecureRandom 是否在 Spongy Castle（或 Bouncy Castle）中实现。b）“加密版本 1.0”到底是什么（我的意思是它是 Sun JCE 提供者还是什么？）

谢谢...

鲁比

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-20T15:21:50.980

Bouncy Castle *does* provide a set of **Pseudo** Random Number Generators (PRNGs). There are many names for PRNG's; NIST calls them **Deterministic** Random Bit Generators (DRBGs). They are however only available in the "Lightweight" API of Bouncy Castle, in the package `org.bouncycastle.crypto.prng`.

However, Bouncy Castle is a software-only implementation of cryptographic algorithms. This means that it doesn't contain a source for *entropy*. Entropy cannot be generated by software alone as software algorithms themselves are deterministic. So even if the Bouncy Castle provider would register some of the generators in its `"BC"` provider (or Spongy provider for Android) then it would still have to rely on the same entropy source as the platform `SecureRandom` implementation.

As the entropy source is likely the culprit for most performance issues, you should not expect wonders of Bouncy Castle with regards to random number generation efficiency.

Currently (v1.54) the Bouncy Castle provider doesn't register any `SecureRandom` implementations at all, so there's that.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T16:46:08.647

假设您在 Android 上运行（您没有明确说明这一点）。Bouncy Castle 不提供`SecureRandom`实现。'Crypto' 是 Apache Harmony（Android 的大部分核心 Java 代码都基于它）JCE 提供程序。Android 中没有 Sun JCE 代码。顺便说一句，“加密”提供者只提供 SHA1PRNG (RNG)、SHA-1 (hash) 和 SHA1withDSA (signature) 实现。其他一切都由 Bouncy Castle 或基于 OpenSSL 的提供商提供。

问题：您认为为什么需要`SecureRandom`Bouncy/Spongy Castle 的实现？

# gwt - GWT 和 getClass().getPackage()

> ID：10259783
> 
> 赞同：4
> 
> 时间：2012-04-21T14:28:23.207
> 
> 标签：gwt

当我尝试在我的 FooterViewImpl 类中使用 getClass.getPackage().getImplementationVersion() 在网页上显示我的项目的版本号（来自 pom.xml 文件）时，我在运行时收到此错误。我认为错误来自 gwt java-to-javascript 编译器。

```
[ERROR] [OnlineGlom] - Line 52: The method getPackage() is undefined for the type Class<capture#1-of ? extends FooterViewImpl>

java.lang.RuntimeException: Deferred binding failed for 'org.glom.web.client.ClientFactory' (did you forget to inherit a required module?) 
```

我应该期望这行得通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:53:23.620

不。

`getPackage()`GWT 不模拟：[https](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation) ://developers.google.com/web-toolkit/doc/latest/RefJreEmulation 。GWT 的座右铭是在编译时而不是运行时做到最大。

# events - 活动方式邀请参加人数限制

> ID：10259785
> 
> 赞同：1
> 
> 时间：2012-04-21T14:28:31.677
> 
> 标签：events, facebook-graph-api

我正在尝试帮助在下次通话时使用邀请用户

```
/EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 
```

我想我会邀请用户的所有朋友。

然而，我遇到了麻烦，邀请人是有限制的。是否可以知道邀请用户的上限？另外，是APP限制还是PER-USER限制？

或者，是否有任何 JS API/对话框允许用户自己邀请参与者，这样我们就不会达到这个限制？

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/228861470548080/invited");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $curlpostf); 
$result = curl_exec($ch); 
curl_close($ch);
echo $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:54:26.570

受邀用户的数量没有限制（至少官方文档中没有以任何方式说明）。

目前没有任何对话框或 JS-SDK 功能允许您邀请用户参加活动，但您可以轻松地指示用户使用活动页面顶部的“邀请朋友”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T21:38:05.860

从理论上讲，**您根本无法批量邀请**：

“必须提示人们邀请特定朋友参加活动” [https://www.facebook.com/help/www/245886992192344](https://www.facebook.com/help/www/245886992192344)

从技术上讲 - 在删除之前 - 您可以在请求中同时邀请**499人。**

否则，图表将显示错误：

*(#105) 参数数量超过此操作的最大值*

这个**PER-REQUEST 限制**问题可以通过将你的“用户”参数切割成碎片，然后**在更多的 Graph API 调用中发送它们**来解决。

（关于**PER-APP**和**PER-USER**限制，我没有任何信息。）

实际上，如果您违反条款，**您的应用将在**没有任何通知的情况下被删除。

# java - 在 Java Webstart App 中显示图像

> ID：10259788
> 
> 赞同：0
> 
> 时间：2012-04-21T14:28:37.543
> 
> 标签：java, image, resources, java-web-start

请原谅我对 Java Webstart 的有限理解，因为我对此很陌生。

所以我让我的应用程序在我的计算机上的一个 JAR 文件中工作，在静态方法中使用这个片段（类扩展 JFrame）：

```
ImageIcon image = new javax.swing.ImageIcon(window.getClass().getResource("/resources/img/loginWindowTop.jpg"));
//ImageIcon image = new ImageIcon(window.getClass().getResource("/resources/img/loginWindowTop.jpg")); // tried this too
JLabel imageLabel = new JLabel(image);
imageLabel.setBounds(rect);
window.add(imageLabel); 
```

当直接从 JAR 文件在我的计算机上启动应用程序时，它可以工作。当使用 JNLP 文件从 Web 服务器进行测试时，应用程序崩溃并显示以下内容：

```
java.lang.NullPointerException
at javax.swing.ImageIcon.<init>(Unknown Source)
at gui.LoginWindow.create(LoginWindow.java:42)
at main.Starter.main(Starter.java:13)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.javaws.Launcher.executeApplication(Unknown Source)
at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
at com.sun.javaws.Launcher.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

如果有人能解释该怎么做，我将不胜感激。我在互联网上搜索了很长时间，但没有解决方案可以帮助我（还）。我希望这不是因为我正在使用静态 JFrame（在我的代码片段中称为窗口）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:35:29.067

用 WinZip 或 7Zip 打开 jar 并查看路径是否确实`/resources/img/loginWindowTop.jpg`，并且*区分大小写*。（特别是在那种骆驼情况下，文件名应该在文件系统上。）类加载器会出现一些深奥的错误，然后你可以尝试而不是`window.getClass...`简单的`getClass...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:23:18.577

感谢您的提示，我终于找到了一种方法。由于我的类 LoginWindow 仅以静态方式使用，因此我不得不使用

```
ImageIcon image = new ImageIcon(LoginWindow.class.getResource("/resources/img/loginWindowTop.jpg")); 
```

LoginWindow.getClass() 只能以非静态方式工作。

谢谢大家的意见，我希望这对其他人也有帮助！

# php - 关于 mysql_real_escape_string 的问题

> ID：10259790
> 
> 赞同：5
> 
> 时间：2012-04-21T14:28:51.503
> 
> 标签：php, mysql, escaping, wildcard

我正在使用 php 开发我的个人网站。一切都很好，但我刚刚阅读了[php.net](http://www.php.net/manual/en/%E2%80%8Bfunction.mysql-real-escape-string.php)`mysql_real_escape_string`中的手册，发现了两件事：

> 1.  在向 MySQL 发送查询之前，必须始终（**除了少数例外）使用此函数来确保数据安全。**
> 2.  mysql_real_escape_string()**不会转义 % 和 _**。如果与 LIKE、GRANT 或 REVOKE 结合使用，这些是 MySQL 中的通配符。

我有两个问题：
1-这些例外是什么？
2-如何转义这些字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:37:25.747

> 在向 MySQL 发送查询之前，必须始终（除了少数例外）使用此函数来确保数据安全。

令我非常失望的是，手册页说完全是垃圾，[他们拒绝纠正](https://bugs.php.net/bug.php?id=60398)。
因此，恰恰相反，只有少数情况下您需要此功能。所以只能说一个：当您将*字符串*添加到 SQL 查询中时。

> mysql_real_escape_string() 不会转义 % 和 _。如果与 LIKE、GRANT 或 REVOKE 结合使用，这些是 MySQL 中的通配符。

没关系。只要您故意使用 LIKE 运算符，这些字符就不会造成任何伤害。

但是如果你想转义字符串去 LIKE 语句，你可以使用这个代码

```
$like = addCslashes($like,'\%_'); 
```

（注意斜线 - 它也需要作为手册说明它进行转义。还请注意`C`函数名称中的字母）。
在此过程之后，您可以以`$like`任何方式使用生成的变量来构建查询 - 引用并转义它们或在准备好的语句中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T14:34:21.300

我不确定手册在谈论使数据安全时所指的例外情况。您可以说例外情况是*已知数据是安全*的。例如，下面是一些我想到的案例：

*   数据以数字形式输入（这实际上是下一项的特化）
*   您已经知道它不包含任何需要转义的字符（例如，它来自在包含您硬编码的一些选项的“白名单”数组中查找某些内容）

例如，如果您有，`$id = intval($_GET['id'])`那么您不需要`$id`在将其注入查询之前转义。

**然而！***转义所有*输入永远不会对您造成伤害，并且这样做可以消除您在代码中引入漏洞的机会（例如，如果您忘记转义，如果需求发生变化，或其他任何事情）。所以我建议养成逃避一切并忘记“例外”的习惯。

至于作为输入一部分的`%`和`_`字符，这些不需要转义*，除非您将此输入提供给识别它们的命令*。例如，如果您有这样的查询：

```
$term = $_GET['term'];
$sql = sprintf("SELECT FROM table WHERE column LIKE '%%s%'",
               mysql_real_escape_string($term)); 
```

在这种情况下，如果用户键入 a`%`作为其中的一部分，`$term`则可以合理地假设他们想要实际搜索文字`%`。因此，在这种情况下，您应该`%`通过将其替换为`\%`(`\`是默认转义字符) 来进行转义。`str_replace`或者`strtr`是两个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:42:16.570

您可以`write your own function`;) 有关更多信息，请参阅[此线程](https://stackoverflow.com/questions/574805/how-to-escape-strings-in-mssql-using-php)。

否则，您可以使用[PDO 库](http://au.php.net/manual/en/intro.pdo.php)或任何其他此类库。

# mysql - MySQL group by 查询复杂度分析

> ID：10259791
> 
> 赞同：1
> 
> 时间：2012-04-21T14:28:54.547
> 
> 标签：mysql, complexity-theory

MySQL 中“group by”语句的复杂性是什么？

我正在管理各种大表，我也想知道是否有任何方法可以计算查询将花费多少时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:42:02.780

这个问题不可能通过了解整个查询的样子来回答。有些分组可能非常昂贵，而另一些则非常便宜，这完全取决于数据库中的索引是如何设置的，您分组的值是否可以缓存等。

例如，这是一个非常便宜的组：

```
CREATE TABLE t (a INT, KEY(a));
SELECT * FROM WHERE 1 GROUP BY a; 
```

因为 a 是一个索引。

但是对于这样的事情，它非常昂贵，因为它需要进行表扫描。

```
CREATE TABLE t (a INT);
SELECT * FROM WHERE 1 GROUP BY a; 
```

一般如果某个key不可用，数据库会在内存中为group by子句创建一个临时表，遍历所有的值，将每个值插入到临时表中，并在结果集中对应行的索引，然后它会从临时表中选择，从每一列中选择第一行并将其作为结果发送回来。根据您是否使用每个 group by 子句的“额外”行（即使用 MAX()、GROUP_CONCAT() 或类似方法），它将需要再次获取所有行。

您可以使用 EXPLAIN 来确定 MySQL 将使用什么策略，如果可以使用索引，则使用“Extra”（按执行成本升序排列）“Using index”，如果需要从磁盘读取所有行，则使用“Using filesort” , 如果需要临时文件，则列将包含“使用临时文件”

# c# - 您将如何对数据注释进行单元测试？

> ID：10259793
> 
> 赞同：6
> 
> 时间：2012-04-21T14:29:01.570
> 
> 标签：c#, unit-testing, tdd, data-annotations

其中两个类属性具有以下注释：

```
 [Key]
    [Column]
    [Required]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [MaxLength(25)]
    public string Name { get; set; } 
```

我知道测试 Key、Column 和 Required 属性不再是一个单元测试，它是一个集成测试，因为它取决于底层数据库，但是你如何测试 MaxLength(25) 属性？

我能想到的替代方案之一是将代码合同添加到属性中。

**更新**

按照建议，我编写了以下帮助程序：

```
 public class AttributeHelper <T> where T : class
    {
        private Type GivenClass 
        { 
            get { return typeof (T); }
        }

        public bool HasAnnotation(Type annotation)
        {
            return GivenClass.GetCustomAttributes(annotation, true).Single() != null;
        }

        public bool MethodHasAttribute(Type attribute, string target)
        {
           return GivenClass.GetMethod(target).GetCustomAttributes(attribute, true).Count() == 1;
        }

        public bool PropertyHasAttribute(Type attribute, string target)
        {
            return GivenClass.GetProperty(target).GetCustomAttributes(attribute, true).Count() == 1;
        }

    } 
```

然后我测试了我的助手：

```
 [TestMethod]
    public void ThisMethod_Has_TestMethod_Attribute()
    {
        // Arrange
        var helper = new AttributeHelper<AttributeHelperTests>();

        // Act
        var result = helper.MethodHasAttribute(typeof (TestMethodAttribute), "ThisMethod_Has_TestMethod_Attribute");

        // Assert
        Assert.IsTrue(result);
    } 
```

一切都很好，除了方法和属性必须是公共的才能让我使用反射。我想不出我必须向私有属性/方法添加属性的任何情况。

然后测试 EF 注释：

```
 public void IdProperty_Has_KeyAttribute()
        {
            // Arrange
            var helper = new AttributeHelper<Player>();

            // Act
            var result = helper.PropertyHasAttribute(typeof (KeyAttribute), "Id");

            // Assert
            Assert.IsTrue(result);
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T14:52:25.787

> 我了解测试 Key、Column 和 Required 属性不再是单元测试，而是集成测试，因为它取决于底层数据库

怎么会这样？您可以测试`Id`属性是否标记有所有这些属性就好了。它属于单元测试类别。

```
[Test]
public void Id_IsMarkedWithKeyAttribute()
{
    var propertyInfo = typeof(MyClass).GetProperty("Id");

    var attribute = propertyInfo.GetCustomAttributes(typeof(KeyAttribute), true)
        .Cast<KeyAttribute>()
        .FirstOrDefault();

    Assert.That(attribute, Is.Not.Null);
} 
```

通过这种方式，您可以确保您的属性标有您能想到的任何属性。当然，这涉及一些反射工作，但这就是您测试属性标记的方式。

# java - 来自 JIT 编译器的本机代码中注释的含义

> ID：10259795
> 
> 赞同：4
> 
> 时间：2012-04-21T14:29:03.050
> 
> 标签：java, jit, jvm-hotspot

我想知道通过 -XX:+PrintOptoAssembly 命令行选项（JIT 编译器输出）在 i686 GNU/Linux 上使用 OpenJDK 版本 6-src-b23-05_jul_2011 的 fast_debug 构建的汇编代码中的一些类似注释的额外信息.

在汇编代码中，每个块的标签后面都有一些“注释”：

```
02c   B2:  #    B14 B3 <- B1 B13  Freq: 1
...
063   B11: #    B15 B12 <- B4 B3  Freq: 9.53674e-07 
```

我的第一个猜测是`B14 B3 <- B1 B13`一些控制流信息和`Freq: 1`一些关于达到这个标签的频率的信息。这些注释是否有分支提示（在支持它们的平台上）？它们是否（公开）记录在案？

`P=...`此外，`C=...`和的含义是什么`,s`？

```
02a     Je,s  B13  P=0.000000 C=6700.000000 
```

如果您需要代码示例，请告诉我。

# apache - Apache htaccess 帮助 RewriteRule

> ID：10259797
> 
> 赞同：0
> 
> 时间：2012-04-21T14:29:26.073
> 
> 标签：apache, mod-rewrite

这是我想要做的：

```
mysite.com/video      >    mysite.com/index.php?find=video
mysite.com/video/pag/10      >    mysite.com/index.php?find=video&pag=10
mysite.com/video/min/20/pag/10      >    mysite.com/index.php?find=video&pag=10&min=20
mysite.com/video/min/20/pag/10/max/30      >    mysite.com/index.php?find=video&pag=10&min=20&max=30 
```

等等

参数 min,pag,max 可以是随机顺序。例如，这些网址 mysite.com/video/min/20/pag/10/max/30 mysite.com/video/max/30/pag/10/min/20 必须始终返回 mysite.com/index.php？查找=视频&pag=10&min=20&max=30

我整天都没有任何解决方案谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:43:26.773

我正要完成繁琐的任务，试图写出整本书。但后来我想为什么不这样做：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L] 
```

然后`index.php`只是解析`$_SERVER['REQUEST_URI']`和提取你需要的东西。

聪明地工作，而不是努力。

# javascript - 调用 javascript 函数来显示它时，Div 不显示

> ID：10259799
> 
> 赞同：0
> 
> 时间：2012-04-21T14:29:34.640
> 
> 标签：javascript, jquery

我是新来的`JavaScript`，`jQuery`所以请不要介意我的基本问题：

我制作了以下 div，我想`JavaScript`在调用某些函数时显示它：

```
<div id='faix' class="bg4 w460 h430 tac poa dpn">
    <h4 class="fwb fs22 cf3 mb5 ff3 mt150 ">Thank you John for contacting us!</h4><h4 class="fwb fs22 cf3 mb5 ff3"> We will get in touch with you shortly.</h4>
</div> 
```

但是当调用该函数并将其传递给该函数时，ID为“faix”的相应div没有显示

```
$('#faix').fadeIn(500); 
```

上面的代码我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:32:43.407

确保您已将

```
$('#faix').fadeIn(500); 
```

进入

```
$(function() {
    $('#faix').fadeIn(500);
}); 
```

因为它应该，wenn jQuery 已经准备好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:32:30.943

你的代码没问题；我认为您正在调用它，当 html 尚未构建时。将您的代码包装在[$(document).ready](http://api.jquery.com/ready/)中：

```
$(document).ready(function() {
    $('#faix').fadeIn(500);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:34:25.777

尝试将您的代码包装在：

```
$(function(){

}); 
```

并通过以下代码查看您的 div 是否使用 css 隐藏以实现跨浏览器兼容性：

```
display:none; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T14:35:24.450

确保这些课程中没有一个`bg4 w460 h430 tac poa dpn`说类似`display:none !important`或`visibility:hidden !important`那样`margin-top: -99999px`的东西。

拨打电话后，使用 Inspector (Ctrl+Shift+I) 找到有病的 div 并查看它的 CSS 属性以确定它是否应该可见或有其他东西阻止您看到它。还要查看控制台以查看错误，也许它在一系列功能中，如果一个失败，后续功能也会失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T14:37:52.483

查看基本的东西，比如你是否导入了 jquery api，把它放在 document.ready 函数中等等。

我还记得曾经遇到过这样的问题，因为 div id 可能与 jquery api 中的 div 名称发生冲突，因此请尝试更改 div 名称。

# c++ - 在派生类中无法访问受保护的成员

> ID：10259802
> 
> 赞同：6
> 
> 时间：2012-04-21T14:30:25.093
> 
> 标签：c++, inheritance, protected, private-members

为什么基类中的受保护成员在派生类中无法访问？

```
class ClassA
{
public:
    int publicmemberA;

protected:
    int protectedmemberA;

private:
    int privatememberA;

    ClassA();
};

class ClassB : public ClassA
{
};

int main ()
{
    ClassB b;
    b.protectedmemberA; // this says it is not accesible, violation?
    //.....
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T14:32:07.603

可以进入`protectedmemberA` **里面** `b`。您正试图从外部访问它。它与继承无关。

发生这种情况的原因与以下相同：

```
class B
{
protected:
   int x;
};

//...

B b;
b.x = 0;  //also illegal 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T14:32:11.207

因为受保护的成员仅在 B 类*的范围内*可见。因此您可以在此处访问它，例如：

```
class ClassB : public ClassA
{
    void foo() { std::cout << protectedMember;}
}; 
```

但是一个表达式，例如

```
someInstance.someMember; 
```

需要`someMember`公开。

一些相关的 SO 问题[here](https://stackoverflow.com/questions/37011/should-you-ever-use-protected-member-variables)和[here](https://stackoverflow.com/questions/224966/private-and-protected-members-c)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:48:35.310

您只能从(or )`protectedmemberA`范围内访问- 您正在尝试从范围内访问它`B``A``main()`

# soundcloud - 当我连接到公司 FaceBook 帐户时，CocoaSoundCloudAPI 崩溃。需要修复

> ID：10259803
> 
> 赞同：0
> 
> 时间：2012-04-21T14:30:49.413
> 
> 标签：soundcloud

（我之前曾尝试过 SoundCloud GoogleGroups（已失效？），并为此直接联系了我的 SoundCloud 联系人。被告知在此处发布问题。）

只是试图在 iOS 上掌握 SoundCloudAPI，我发现了一个令人讨厌的错误。要么这是 API 中的错误，要么是 SoundCloud 中的错误，或者（很可能）我做错了什么。:) 但最终结果将是一个损坏的应用程序，所以我很想了解这里出了什么问题。

我按照 Tobias 视频和 CocoaSoundCloudAPI 自述文件建立了一个新的 iOS 项目。

使用 SCShareViewController 连接到我为公司创建的测试 SoundCloud 帐户。然后，我在应用程序中创建一个与测试公司 FaceBook 帐户的新连接。我单击安装，然后单击允许所有权限。

然后应用程序挂起，由于未捕获的异常“NSInvalidArgumentException”而终止应用程序（在 SCRecordingSaveViewController.m 中）：

```
cell.textLabel.text = [connection objectForKey:@"display_name"]; 
```

每当我现在运行应用程序时，它都会在这条线上崩溃。

当我转储连接 NSDictionary 的内容时，似乎 self.availableConnections 中列出了两个连接，一个“facebook_page”连接与我为公司 FaceBook 页面提供的 display_name 连接。但还有第二个“facebook_profile”，显示名称为空。正是这第二个连接导致 API 崩溃。大概 API 开发人员从来没有期望一个空的 display_name，但我也不明白为什么它会列出两个 FaceBook 连接。

如果我进一步调查“display_name”的值，那么 Xcode 会告诉我“Variable is not a CFString”，事实上，如果我查看这个类，那么它不是。

在浏览器中进入 SoundCloud，我可以列出连接，并显示其中两个。一个是我公司 FB 帐户的名称，另一个是：

“http://facebook.com/profile.php?id= ***** ** *** ***是您的主要 Facebook 用户帐户”

如果我断开这两者，我可以再次使用 SoundCloudAPI 而不会崩溃。

然后我创建了新的个人测试 SoundCloud 和 FaceBook 帐户，并在应用程序中再次做同样的事情。这次它没有崩溃（实际上效果很好），并且连接 NSDictionary 有一个连接“facebook_profile”，其显示名称有效。SoundCloud 通过浏览器也只列出了一个连接。

请注意，这也发生在没有代码更改的 CocoaSoundCloudDemo 上。

我还可以修改代码以避免在连接到我的公司帐户时崩溃：-

```
// cell.textLabel.text = [connection objectForKey:@"display_name"]; 

id displayName = [connection objectForKey:@"display_name"];
if ([displayName isKindOfClass:[NSString class]]) 
{
    cell.textLabel.text = (NSString*)displayName;
} 
```

...这给了我两行 FB 连接，但第二行是空白的。通过一些努力，我可以弄清楚他们在代码中所做的事情，并且如果 display_name 无效，则不会显示一行，但显然我宁愿不必这样做并使用标准 API 代码。

所以，长话短说：-

1) SoundCloud 是否允许您连接到公司的 Facebook 帐户？您是否需要在该 Facebook 帐户上进行一些特殊设置，以便 SoundCloud 只能看到“Facebook_profile”而不能看到“Facebook_page”？问题似乎出在 SoundCloud 本身，而不是 iOS API，而是崩溃的 API。

2) 从我的测试应用程序中，如果用户尝试将 SoundCloud 帐户连接到公司 FaceBook 帐户（至少，使用我的最小设置），那么 SoundCloudAPI 将因异常而崩溃，我的整个应用程序将继续崩溃，直到用户使用浏览器登录 SoundCloud 并手动删除这两个连接。这肯定不好，但我已经用谷歌搜索过任何有类似问题的人，但一无所获。如果没有找到解决方案，我无法在我的应用程序中使用完整的 API，因为担心我的用户会遇到相同的崩溃错误，并且可能必须创建一个精简的自定义 UI，以避免需要共享到 FaceBook 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:21:18.627

很抱歉我们没有早点回复您。从我们的 SDK 用户那里收到反馈总是好的，是的，我们应该检查`nil`值并相应地处理这种情况。

但是，我调查了您所描述的情况，实际上它对我来说完美无缺。在我将 SoundCloud 帐户与 SoundCloud 个人资料设置中的新 Facebook 页面连接后，Facebook 的两行就会正确显示。

您还可以通过运行检查哪些帐户已连接

```
curl "https://api.soundcloud.com/me/connections.json?oauth_token=<YOUR_OAUTH_TOKEN> 
```

就我而言，我收到了这样的东西

```
{
"kind": "connection",
"id": 12345678,
"created_at": "2013/01/10 15:55:20 +0000",
"display_name": "Testpage",
"post_publish": true,
"post_favorite": true,
"type": "facebook_page",
"service": "facebook_page",
"uri": "https://api.soundcloud.com/connections/12345678"
},
{
"kind": "connection",
"id": 12345679,
"created_at": "2013/01/10 11:07:56 +0000",
"display_name": "Rob",
"post_publish": true,
"post_favorite": true,
"type": "facebook_profile",
"service": "facebook_profile",
"uri": "https://api.soundcloud.com/connections/12345679"
} 
```

因此，通过 SDK 上传新声音时，我在分享部分获得了两行 Facebook 行。你还在遇到这个问题吗？

我们将很快发布对 iOS SDK 的更新，敬请期待并感谢您的反馈。

# c++ - 插入usb时如何触发事件

> ID：10259805
> 
> 赞同：1
> 
> 时间：2012-04-21T14:31:16.077
> 
> 标签：c++, c, winapi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:57:51.437

您可以使用 RasDial API 函数实现拨号连接。请参阅此[项目](http://www.codeproject.com/Articles/2813/Creating-Dialup-Connections)以获取指南。您可以创建一个窗口，使用它注册[`RegisterDeviceNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363431%28v=vs.85%29.aspx)并监听 WM_DEVICECHANGE。您也可以查看[此项目](http://www.codeproject.com/Articles/14500/Detecting-Hardware-Insertion-and-or-Removal)作为示例。祝你好运

# cocoa - 子类化 NSWindow 悬停调整大小

> ID：10259810
> 
> 赞同：2
> 
> 时间：2012-04-21T14:31:57.900
> 
> 标签：cocoa, cursor, hover, nswindow

我创建了一个自定义 NSWindow 使用：

```
self = [super initWithContentRect:contentRect styleMask:8 backing:bufferingType defer:flag]; 
```

哪个可以很好地调整大小。但是，当我将鼠标悬停在边框上时，它不会改变光标。我可以自己做，但我不能创建一个超出窗口边缘的 trackingRect。

任何我如何管理这个的想法都会很棒。

谢谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T21:38:12.450

我遇到了这个问题，对我来说，解决方法是将 NSWindow 子类化并将其放入实现中：

```
- (BOOL)canBecomeKeyWindow
{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T08:21:00.347

NSWindow.styleMask 指示它显示的控件类型应该包括 NSResizableWindowMask，它告诉显示调整大小的控件。

`[window setStyleMask:NSResizableWindowMask];`

# java - 反转 long 的字节顺序

> ID：10259813
> 
> 赞同：4
> 
> 时间：2012-04-21T14:32:20.753
> 
> 标签：java, bit-manipulation, bitwise-operators

我有一个`long`变量，我需要颠倒它的字节顺序。例如：`B1, B2, ... , B8`我应该返回一个由`B8, B7, ..., B1`. 如何使用按位运算来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T14:36:04.580

你可以使用[Long.reverseBytes(long)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Long.html#reverseBytes%28long%29)

或者对于更多包含按位运算的方法，你可以参考这个[堆栈溢出问题](https://stackoverflow.com/questions/1586882/how-do-i-convert-a-byte-to-a-long-in-java/1586920#1586920)

这是您可能喜欢的另一种方法，我仍然推荐上述方法，但它比按位更好，因为您很容易出错。

[字节缓冲区](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)

```
byte[] bytes = ByteBuffer.allocate(8).putLong(someLong).array();
for (int left = 0, right = bytes.length - 1; left < right; ++left, --right) {
    byte temp = bytes[left]; 
    bytes[left]  = bytes[right]; 
    bytes[right] = temp;
} 
```

我试图引导您远离按位解决方案，因为如果您不知道自己在做什么，它们很麻烦而且很容易搞砸......但是按位看起来像这样：

```
byte[] bytes = new byte[8];

// set the byte array from smallest to largest byte
for(int i = 0; i < 8; ++i) {
    byte[i] = (your_long >> i*8) & 0xFF;
}

// build the new long from largest to smallest byte (reversed)
long l = ((buf[0] & 0xFFL) << 56) |
         ((buf[1] & 0xFFL) << 48) |
         ((buf[2] & 0xFFL) << 40) |
         ((buf[3] & 0xFFL) << 32) |
         ((buf[4] & 0xFFL) << 24) |
         ((buf[5] & 0xFFL) << 16) |
         ((buf[6] & 0xFFL) <<  8) |
         ((buf[7] & 0xFFL) <<  0) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:36:32.857

您可能希望使用`Long.reverseBytes`而不是使用按位运算。有关详细信息，请参阅[Java 参考](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#reverseBytes%28long%29)。

否则，您可以查看 JDK 源代码（JDK 文件夹中的 src.zip），`Long.java`但请注意 Oracle 的版权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T15:08:29.803

这是一个旧技巧，可用于字节序交换寄存器：

```
static long swapblock(long a, long mask, int shift) {
    long b1 = a & mask; // extract block
    long b2 = a ^ b1;   // extract remaining bits
    return (b1 << shift) |
           ((b2 >> shift) & mask); // mask again to clear sign extension
}

static long endianswap(long a) {
    a = swapblock(a, 0x00000000ffffffffL, 32);
    a = swapblock(a, 0x0000ffff0000ffffL, 16);
    a = swapblock(a, 0x00ff00ff00ff00ffL, 8);
    return a;
} 
```

这个想法是逐步交换子块，直到达到您想要停止的所需级别。通过添加大小为 4、2 和 1 的交换，您可以将其更改为位镜像功能。

由于 java 中缺少无符号类型，因此只有一个棘手的问题。`0x8000000000000000 >> 8`右移时需要屏蔽高位，因为符号位被移位量复制，用 1 ( is )填充高位`0xFF80000000000000`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-09T22:16:04.910

带循环的简单答案：

```
public static long byteReverse(long a) {

    long result = 0;
    for(int i = 0; i < 8; i++){
        // grab the byte in the ith place
        long x = (a >> (i*8)) & (0b11111111);
        result <<= 8;
        result |= x;
    }
    return result;
} 
```

仅按位：

```
public static long byteReverse(long a) {

    a = (a << 32) | (a >>> 32);
    a = ((a & 0xffff0000ffff0000L) >>> 16) | ((a & 0x0000ffff0000ffffL) << 16);
    a = ((a & 0x00ff00ff00ff00ffL) << 8) | ((a & 0xff00ff00ff00ff00L) >>> 8);

    return a;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-09T19:25:28.157

```
long reverse(long x){
     x = (x >> 32) | (x << 32); // step 1
     x = ((x & 0xffff0000ffff0000 ) >> 16) 
          | ((x & 0x0000ffff0000ffff ) << 16); // step 2
     x = ((x & 0xff00ff00ff00ff00 ) >> 8) 
          | ((x & 0x00ff00ff00ff00ff ) << 8); // step 3
     return x;
} 
```

如果我们假设按位运算符在 O(1) 时间内工作，则反向函数在 O(lg(number of bits) ) 时间内工作。

说明
步骤 0 ： B1 B2 B3 B4 B5 B6 B7 B8
步骤 1 ： B5 B6 B7 B8 B1 B2 B3 B4
步骤 2 ： B7 B8 B5 B6 B3 B4 B1 B2
步骤 3 ： B8 B7 B6 B5 B4 B3 B2 B1

# android - android谷歌地图一起收集标记

> ID：10259817
> 
> 赞同：0
> 
> 时间：2012-04-21T14:32:34.470
> 
> 标签：android, google-maps-api-3

我有一张上面有多个标记的地图。
现在很少有一些标记彼此超级接近，然后它们相互覆盖，只有一个标记会看到。

我怎样才能将一堆标记收集到一个标记上，上面有一些（一堆标记）？

现在我刚刚做了一个递归方法，如果标记太靠近其他标记，它会移动标记，但这不是标记丢失的好解决方案。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:04:18.160

我认为您正在寻找[Google Maps Marker Clusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)。

# jquery - 带有下一个/上一个链接的简单循环幻灯片

> ID：10259820
> 
> 赞同：2
> 
> 时间：2012-04-21T14:32:45.093
> 
> 标签：jquery, jquery-animate, slideshow, cycle

我或多或少是 Jquery 的初学者，从它开始，我尝试制作一个可点击的循环幻灯片，基于[这个](http://jonraasch.com/blog/a-simple-jquery-slideshow)。到现在为止还挺好。该代码有效（见下文）。我的问题：

1.  没有更简单的方法来编写代码。我有点为 prev 和 next 重复相同的代码。

2.  当我单击下一个/上一个链接并开始动画时 - 在动画期间我再次单击时，有时图像会闪烁或出现错误。有没有办法强制动画在我的点击做出反应之前完成。

Javascript：

```
 $(function() {

    $('#prev').click(function() {
        var $active = $('#slideshow IMG.active');
        var $prev = $active.prev();
        $active.addClass('last-active');

    if($active.is(":first-child")){$prev = $("IMG:last-child");}
        $prev.css({opacity: 0.0})
            .addClass('active')
            .animate({opacity: 1.0}, 1000, function() {
                $active.removeClass('active last-active');
            }); 

    }); 

    $('#next').click(function() {
        var $active = $('#slideshow IMG.active');
        var $next = $active.next();
        $active.addClass('last-active');

    if($active.is(":last-child")){$next = $("IMG:first-child");}
        $next.css({opacity: 0.0})
            .addClass('active')
            .animate({opacity: 1.0}, 1000, function() {
                $active.removeClass('active last-active');
            }); 

    }); 

    }); 
```

CSS：

```
 #slideshow {position:relative; height:350px; opacity:1.0;}
    #slideshow IMG {position:absolute; top:0; left:0; z-index:8; opacity:0.0;}
    #slideshow IMG.active {z-index:10; opacity:1.0;}
    #slideshow IMG.last-active {z-index:9;}
    #next {color:#0000ff; cursor:pointer;}
    #prev {color:#0000ff; cursor:pointer;} 
```

HTML：

```
 <div id="slideshow">
        <img src="image1.jpg" class="active" />
        <img src="image2.jpg" />
        <img src="image3.jpg" />
        <img src="image4.jpg" />
    </div>
    <div id="next">NEXT</div>
    <div id="prev">PREV</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:43:00.923

好吧，每次我遇到构建一些循环东西的需要时，我都会使用[jQuery Cycle PlugIn](http://jquery.malsup.com/cycle/)。这可能不是您优化问题的答案，但我认为每个人都应该看看 Cycle 插件。

正如您[在演示页面上](http://jquery.malsup.com/cycle/int2.html)看到的那样，您也可以非常轻松地使用下一个/上一个按钮。就像

```
$('#slideshow').cycle({ 
    fx:     'fade', 
    speed:  'fast', 
    timeout: 0, 
    next:   '#next', 
    prev:   '#prev' 
}); 
```

您的 HTML 代码可以保持这种状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:48:15.147

[http://jsfiddle.net/kPD4n/](http://jsfiddle.net/kPD4n/)

你去吧。

1）为“NEXT”和“PREV”按钮添加相同的类，然后检查哪个被单击。
2) 添加 .stop(0,1) 跳转到动画结尾。

不过还是有点小毛病...

# android - android - 如何关注一个值

> ID：10259825
> 
> 赞同：0
> 
> 时间：2012-04-21T14:33:21.737
> 
> 标签：android, shell, broadcastreceiver, android-service

场景是，我正在开发一个应用程序，它从文件中读取整数值并将其存储为整数。我从该文件中获得的值总是在变化，因为它是 cpu 频率值。

我如何从我的活动中监视这个值？我脑海中的方式是通过广播接收器、服务、观察者等。但不知道我该如何实现..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:38:41.420

您可以使用监听器：

```
public class CpuValueReader {
    private CpuValueReaderListener listener = null;
    int cpuValue;

    public void setListener(CpuValueReaderListener listener) {
        this.listener = listener;
    }

    public void startReading() {
    // this is an exmaple, you may read the file here
    // found value:
        setValue(theNewValue);
    }

    private setValue(int value) {
        if (value != cpuValue) {
            cpueValue = value;
            if (listener != null)
                listener.cpuValueChanged(value);
        }
    }
} 
```

界面：

```
public inteface CpuValueReaderListener {
    public void cpuValueChanged(int newValue);
} 
```

使用它（只是一个例子）：

```
CpuValueReader instance = new CpuValueReader ();
instance.setListener(new CpuValueReaderListener() {
    @Override
    public void cpuValueChanged(int newValue) {
        // do cool things with new value
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:05:12.877

我使用计时器刻度监听器来实现这一点。因此，在计时器的每一个刻度上，我都会读取文件并将值设置为文本视图

```
chronometer = (Chronometer)findViewById(R.id.chronometer1);
    chronometer.setOnChronometerTickListener(new OnChronometerTickListener() 
    {

        @Override
        public void onChronometerTick(Chronometer arg0) 
        {
            //read file here and set the value to my textView
        }
    });
    chronometer.start(); 
```

# node.js - 尝试启动 server.js 时出现 node.js 错误

> ID：10259830
> 
> 赞同：1
> 
> 时间：2012-04-21T14:34:07.897
> 
> 标签：node.js, ubuntu-11.04

我正在尝试在新版本的 Ubuntu 11.04 64 位上创建 node.js 服务器。我可以远程访问系统，因为它是来自外部提供商的虚拟服务器。

我在“/home”目录中创建了两个文件夹：“server”和“http”。我在“server”文件夹中安装了 node.js（v0.79-pre），然后安装了“npm”（1.1.18）。像这样：

```
sudo apt-get install git-core curl build-essential openssl libssl-dev
git clone https://github.com/joyent/node.git && cd node
./configure
make
sudo make install
curl http://npmjs.org/install.sh | sudo sh 
```

完成后，我在“http”文件夹中创建了一个名为“server.js”的文件，如下所示：

```
var http = require(‘http’);
http.createServer(function (req, res) {
res.writeHead(200, {‘Content-Type’: ‘text/html’});
res.write(‘It works‘);
res.end();
}).listen(8080);
console.log(‘Serveur tourne sur http://xxxxx:8080/’); 
```

完成后，我将自己放在 http 文件夹中，如下所示：

```
cd /home/http 
```

最后，启动服务器，如下所示：

```
node server.js 
```

这就是我得到的：

```
/home/http/server.js:1
require(‘http’);
    ^

node.js:256
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
SyntaxError: Unexpected token ILLEGAL
   at Module._compile (module.js:432:25)
   at Object..js (module.js:462:10)
   at Module.load (module.js:351:32)
   at Function._load (module.js:309:12)
   at module.js:482:10
   at EventEmitter._tickCallback (node.js:245:11) 
```

我究竟做错了什么？

请记住，我正在发现 shell 的使用，而且我以前从未搞砸过服务器。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:35:28.677

您到处都在使用错误的引号。例如，`require(‘http’);`应该是`require('http');`或`require("http");`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:35:41.473

尝试更换

```
require(‘http’); 
```

和

```
require('http'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:38:48.323

你有错别字试试这个

```
var http = require('http');
http.createServer(function (req, res) {
res.writeHead(200, {'Content-Type': 'text/html'});
res.write('It works');
res.end();
}).listen(8080);
console.log('Serveur tourne sur http://xxxxx:8080/'); 
```

使用后工作正常`'`而不是反引号

# .net - System.Security.SecurityException：请求“System.Security.Permissions.ReflectionPermission”类型的权限失败

> ID：10259834
> 
> 赞同：1
> 
> 时间：2012-04-21T14:34:36.263
> 
> 标签：.net, iis, iis-7, web-config

我已经将我的 web.config 文件设置为完全信任，为什么我仍然收到此错误？

该站点在 Mono .NET 和内置的 .NET 网络服务器下运行良好，但在 IIS 7 下运行良好。

```
<system.web>
    <!-- trust level-->
    <securityPolicy>
      <trustLevel name="Full" policyFile="internal" />
      <trustLevel name="High" policyFile="web_hightrust.config" />
      <trustLevel name="Medium" policyFile="web_mediumtrust.config" />
      <trustLevel name="Low" policyFile="web_lowtrust.config" />
      <trustLevel name="Minimal" policyFile="web_minimaltrust.config"/>
    </securityPolicy>
    <trust
       level="Full"
       originUrl=""
       processRequestInApplicationTrust="true"
   />

   ...
   </system.web> 
```

# sql-server - 按字符串的一部分排序

> ID：10259835
> 
> 赞同：0
> 
> 时间：2012-04-21T14:34:36.960
> 
> 标签：sql-server, tsql, sorting, sql-server-2008-r2

基本上我有一个像这个例子一样的“歌曲”表。

![在此处输入图像描述](../Images/34238f7ea285842cefb60699283edf00.png)

我需要获取数据并在网格视图中显示。桌子很乱，歌曲可以按任​​何顺序排列，不一定按专辑或歌手分组。我需要先按歌手对行进行排序，它应该按字母顺序对艺术家进行排序。专辑也应该分组。但更重要的是，歌曲应按字母顺序/或数字排序。

上表显示了我想要的理想排序列表。谁能指出如何为此编写T-SQL。我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:38:15.150

```
select  *
from    Songs
order by
        Singer
,       Album
,       Title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T17:38:56.797

您需要选择是要按字母顺序（不太可能是恕我直言）还是按数字（更可能，因为我不想以除原始意图之外的任何顺序听《月亮的黑暗面》）来排序专辑中的歌曲）。正如我在上面的评论中提到的那样，你不能两者都做。

按数字排序：

```
SELECT Title, Singer, Album
  FROM dbo.Songs
  ORDER BY Singer, Album, 
    CONVERT(INT, SUBSTRING(Title, 1, CHARINDEX('.', Title))); 
```

要按字母顺序对标题进行排序：

```
SELECT Title, Singer, Album
  FROM dbo.Songs
  ORDER BY Singer, Album, 
    SUBSTRING(Title, CHARINDEX('.', Title) + 1, 255); 
    -- 255 or whatever the column is defined as 
```

很多人会建议`LEN(Title)`，但对我来说，这是一个不必要的计算。恕我直言，唯一合理的情况是模式发展迅速并且该列的最大长度不能被视为“稳定”的情况。在这些情况下，我可能仍然建议只使用一个更高的数字，以适应该列的任何未来大小增加，例如`4000`.

正如@a1ex07 所暗示的，您应该考虑分别存储数字和标题。您可以按如下方式执行此操作：

```
ALTER TABLE dbo.Songs ADD SongNumber TINYINT;
ALTER TABLE dbo.Songs ADD SongTitle VARCHAR(255);

UPDATE dbo.Songs SET 
  SongNumber = CONVERT(TINYINT, SUBSTRING(Title, 1, CHARINDEX('.', Title))),
  SongTitle  = SUBSTRING(Title, CHARINDEX('.', Title) + 1, 255);

-- once you've verified:    
ALTER TABLE dbo.Songs DROP COLUMN Title; 
```

您还必须更新访问此表的所有进程（或创建一个视图并将它们指向该视图）。现在，如果您想按`SongNumber`or排序`SongTitle`，您的`ORDER BY`子句要简单得多。（但您仍然无法同时对两者进行排序，如果您考虑一下，这很有意义。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:59:15.117

看起来排序依据的唯一问题`Singer, Album,Title`是标题包含数字和字符串（这不好，因为它破坏了 1NF）。如果您绝对确定`title`格式，则可以

```
ORDER BY Singer, Album,
cast(substring(Title,0,CHARINDEX( '.',Title)) as int),
substring(Title,CHARINDEX( '.',Title)+1,LEN(Title))
-- LEN(Title) should work, even though it would be more correct to put the right number of
-- characters (from position of '.' to the end) 
```

# linux - 为目录中的每个文件运行 shell 脚本

> ID：10259836
> 
> 赞同：7
> 
> 时间：2012-04-21T14:34:46.497
> 
> 标签：linux, bash, unix, find, xargs

我在一个名为 YYYY_MM_DD 的目录中有一堆文件

```
-rw-r--r-- 1 root root 480K Apr 21 13:17 2012_04_05
-rw-r--r-- 1 root root 483K Apr 21 13:17 2012_04_06
-rw-r--r-- 1 root root 484K Apr 21 13:17 2012_04_07
-rw-r--r-- 1 root root 480K Apr 21 13:17 2012_04_08
-rw-r--r-- 1 root root 344K Apr 21 13:17 2012_04_09
-rw-r--r-- 1 root root  66K Apr 21 13:17 2012_04_10
-rw-r--r-- 1 root root 461K Apr 21 13:17 2012_04_11
-rw-r--r-- 1 root root 475K Apr 21 15:09 2012_04_17
-rw-r--r-- 1 root root 480K Apr 21 15:10 2012_04_18
-rw-r--r-- 1 root root 474K Apr 21 15:10 2012_04_19
-rw-r--r-- 1 root root 474K Apr 21 15:10 2012_04_20 
```

我有一个 shell 脚本，它接受一个文件作为参数并根据文件中的数据计算数字，我这样调用脚本

```
sh Calculate.sh MyFile 
```

我想为这个目录中的每个文件运行这个 shell 脚本。

我该怎么做呢，xargs ??

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T14:49:35.130

您是否尝试过`find`执行命令？

我的示例将回显文件，但您可以使用文件名作为参数调用 shell 脚本

```
find . -maxdepth 1 -type f -exec echo {} \; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T18:36:55.287

shell中的一个简单的for循环：

```
for file in *; do sh Calculate.sh "$file"; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T15:01:36.500

`find . -maxdepth 1 -type f | xargs -n 1 -I % Calculate.sh %`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T12:33:37.197

```
./Calculate.sh 2012_04_{05..20} 
```

# events - 谷歌日历 java api：如何通过与会者详细信息（电子邮件、姓名等）搜索活动

> ID：10259839
> 
> 赞同：4
> 
> 时间：2012-04-21T14:35:01.193
> 
> 标签：events, search, google-calendar-api

是否可以使用 Google Calendar Java API 通过一些与会者详细信息（姓名、电子邮件等）搜索 google 日历事件？我可以使用 CalendarQuery 通过文本搜索事件，它搜索在标题或描述中具有给定文本的事件。查询中是否有任何参数可用于获取按给定与会者电子邮件、姓名等过滤的事件？

# drupal - 在 Drupal 7 中为表单调用自定义 Theme() 函数

> ID：10259840
> 
> 赞同：3
> 
> 时间：2012-04-21T14:35:20.583
> 
> 标签：drupal, themes, hook

Drupal 不会在我的模块中为我的表单调用我的主题函数。

我在 .module 文件中添加了 hook_theme，如下所示：

```
function agil_theme() {
    return array(
        'agil_list_form' => array(
            'render element' => 'form',
        ),
    );
} 
```

在哪里 ：

*   agil 是我的模块的名称（不是我的主题）
*   agil_list_form 是我的表单声明的名称（带有默认主题的 chich 渲染）

我想调用一个函数来创建我自己的标记，如下所示：

```
function theme_agil_list_form($form) {
  $output  = "<table><th><td></td><td>".t('Title')."</td><td>".t('Link')."</td></th>";
    $output .= "<tr><td>";
  $output .= drupal_render($form['name']);
  ... 
```

但是 Drupal 从来没有调用这个函数......我清除了缓存但什么都没有......

我在哪里错过了什么？

我还阅读了有关 Drupal 7 中新主题声明的信息：http: [//drupal.org/update/modules/6/7#hook_theme_render_changes](http://drupal.org/update/modules/6/7#hook_theme_render_changes)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T16:12:48.007

Drupal 7 中的所有主题函数都采用单个数组参数（通常命名为`$vars`或`$variables`按约定命名），并且该数组包含您已声明的变量/渲染元素。主题函数本身如下所示：

```
function theme_agil_list_form($vars) {
  $form = $vars['form'];
  // Now manipulate $form
} 
```

您还需要通过在表单函数中执行此操作来告诉 Drupal 您的表单将使用此主题：

```
$form['#theme'] = 'agil_list_form'; 
```

# javascript - 在 Lua VM 上运行 JavaScript 有意义吗？

> ID：10259842
> 
> 赞同：4
> 
> 时间：2012-04-21T14:35:24.807
> 
> 标签：javascript, node.js, compiler-construction, lua

Lua 体积小，易于嵌入。当前的 JavaScript 虚拟机很大，很难集成到现有的应用程序中。
那么是否有可能将 JavaScript 编译为 Lua 或 Lua 字节码？
特别是对于移动应用程序中的限制，这似乎很合适。能够轻松地将最流行的脚本语言之一集成到任何 iPhone 或 Android 应用程序中会很棒。

我对 Lua 不是很熟悉，所以我不知道这在技术上是否可行。
Luvit有一个活跃的项目试图将 Node.js 架构移植到 Lua [。](https://github.com/luvit/luvit)因此，事件发生的 JavaScript 世界与 Lua 中的可能性相去不远。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:20:02.577

将 Javascript 编译为 Lua 的好处并不像您最初想象的那么好。Javascript 的语义与 Lua 的语义非常不同（LuaJIT 作者引用 Lua 的设计是 LuaJIT 可以与 Javascript JIT 编译器竞争的主要原因之一）。

拿这个代码：

```
if("1" == 1)
{
    print("Yes");
} 
```

这会在 Javascript 中打印“是”。Lua 中的等效代码没有，因为字符串永远不会等于 Lua 中的数字。这似乎是一个小问题，但它有一个根本的后果：我们不能再使用 Lua 内置的相等测试。

我们可以采取两种解决方案。我们可以重写`1 == "1"`为`javascript_equals(1, "1")`. 或者我们可以将每个 Javascript 值包装在 Lua 中，并使用 Lua 的元表来覆盖 == 运算符的行为。

因此，通过将 Javascript 映射到 Lua，我们已经失去了一些效率。这是一个简单的例子，但它一直这样继续下去。例如，Javascript 和 Lua 之间的所有运算符规则都不同。

我们甚至必须包装 Javascript 对象，因为它们与 Lua 表不同。例如 Javascript 对象仅支持字符串键，并强制对字符串的任何索引：

```
> a = {}
{}
> a[1] = "Hello"
'Hello'
> a["1"]
'Hello' 
```

您还必须注意 Javascript 的范围规则、可变参数函数等。

现在，如果有人将精力投入到完整的编译器中，所有这些事情都是可以克服的。然而，任何效率提升都将很快被淹没。你最终会在 Lua 中构建一个 Javascript 解释器。大多数 Javascript 解释器都是用 C 语言编写的，并且已经针对 Javascript 的语义进行了优化。

因此，为了效率而这样做是一个失败的原因。可能还有其他原因——例如在仅限 Lua 的环境中支持 Javascript，尽管即使这样，如果可能的话，仅将 Lua 绑定写入现有的 Javascript 解释器可能会减少工作量。

如果你想玩 Javascript->Lua 源代码到源代码的翻译器，看看[js2lua](http://code.matthewwild.co.uk/js2lua/)，这是我前段时间创建的一个玩具项目。它在任何地方都不完整，但玩它肯定会让人深思。它已经包含一个 Javascript 词法分析器，因此已经完成了艰苦的工作。

# objective-c - dataWithBytesNoCopy:length: 内存管理

> ID：10259845
> 
> 赞同：1
> 
> 时间：2012-04-21T14:35:31.050
> 
> 标签：objective-c, cocoa, nsdata

我正在`dataWithBytesNoCopy:length:`使用`NSData`从`bytes`.

```
-(NSData *)dataFromBytes
{ 
...
   void *data = malloc(bytes);
... 
    return [NSData dataWithBytesNoCopy:data length:bytes];;
} 
```

来自苹果文档：

> 返回的对象获取字节指针的所有权并在释放时释放它。

我应该在调用者函数中释放返回数据对象吗？

```
-(void)testFunction
{
NSAutoreleasePool *nsp = [[NSAutoreleasePool alloc] init];

NSData *ldata = [mObject dataFromBytes];
NSlog(@"%@", ldata)//printing data
[nsp release];
NSlog(@"%@", ldata)//Not printing data //sometimes getting exc_bad_access

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T14:41:15.773

**简短回答**：不，调用者应该只在保留返回的数据时才释放它。在你的`testFunction`你没有保留它，所以你不应该释放它。

**更长的答案**：首先，`dataFromBytes`您上面代码中的方法没有返回值，大概这实际上应该返回`NSData *`。

无论如何，该`dataWithBytesNoCopy:length:`方法返回一个自动释放的`NSData`实例，该实例立即从该方法返回。我们知道它是自动释放的，因为方法名称不包含 init、new 或 copy。这意味着调用者**不会**自动获得返回数据的所有权，因此它不应该释放它（除非它保留它）。

已分配的所有权`data`由 NSData 对象接管，不应被释放。当 NSData 实例被解除分配时，它将释放被分配的内存。

在你的，`testFunction`你正在接收`NSData`对象并打印它。接下来释放自动释放池，这将导致自动释放的对象被释放和释放。您再次打印它，但它已经被释放，这很危险（我很惊讶它并不总是`EXC_BAD_ACCESS`.

# c++ - 在 C++ 中使用自己的模板比较函数对数组进行排序

> ID：10259846
> 
> 赞同：1
> 
> 时间：2012-04-21T14:35:31.227
> 
> 标签：c++, sorting, compare

```
template <class T>
bool cmp(const T &a, const T &b){
    return a <= b;
}

template <class T>
void bubble_sort(T tablica[], int size, bool compare(T,T)){
    bool change = true;

    while(change){
        change = false;
        for(int i=0; i < size-1; ++i){
            if(compare(tablica[i+1], tablica[i])){
                zamien(tablica[i+1], tablica[i]);
                change = true;
            }
        }
    }
} 
```

它不起作用，我有错误：

```
'void bubble_sort(T [],int,bool (__cdecl *)(T,T))' : 
 could not deduce template argument for 'T []' from 'int [10]'  
'void bubble_sort(T [],int,bool (__cdecl *)(T,T))' :
 cannot use function template 'bool cmp(const T,const T)' as a function argument' 
```

但是当我用它替换 cmp 函数时：

```
bool cmp(const int a, const int b){
    return a <= b;
} 
```

一切正常。如何更改我的 cmp 函数以使用模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:44:45.087

问题是`bubble_sort`期望的“比较”函数参数的类型是：

```
bool compare(T,T) 
```

而“cmp”函数的类型是：

```
bool compare(const T&,const T&) 
```

为了修复它，修改“比较”参数的类型：

```
template <class T>
void bubble_sort(T tablica[], int size, bool compare(const T&,const T&)){
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:31:42.500

这就是我处理这个问题的方式：

```
int (*cmp_int)(int,int) = compare<int>;
bubble_sort(in, 5, cmp_int); 
```

现在它在 MS Visual 中应该可以正常工作了。

# php - PHP empty() 奇怪的行为

> ID：10259848
> 
> 赞同：3
> 
> 时间：2012-04-21T14:35:36.820
> 
> 标签：php

以下代码（＃1）：

```
var_dump($myObject->getBook()->getCollection());
$testArray=Array();
var_dump($testArray);
var_dump(empty($testArray)); 
```

...将输出：

```
array(0) { } array(0) { } bool(true) 
```

以下代码（#2）：

```
var_dump($myObject->getBook()->getCollection());
$testArray=Array();
var_dump($testArray);
var_dump(empty($myObject->getBook()->getCollection())); 
```

...将输出：

没有。没有错误，没有一个字符。没什么。

```
class Book{
  protected $bidArray=Array();
  public function getCollection(){
    return $this->bidArray;
  }
} 
```

那里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T14:39:27.217

[`empty()`](http://php.net/manual/en/function.empty.php)不是一个函数，虽然它看起来**像**一个函数。它只是一种*仅适用*于变量的特殊语法，例如`empty($abc)`. 您根本不能使用诸如`empty(123)`or之类的表达式`empty($obj->getSth())`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T14:40:51.650

You cannot use `empty()` with anything other than variable (that means no function call as well).

`var_dump(empty($myObject->getBook()->getCollection()));`

You must have your error display turned off, as the following:

```
<?php

class Bar {
        function foo() {
        }
}

$B = new Bar();
empty($B->foo()); 
```

Gives

> PHP Fatal error: Can't use method return value in write context in D:\cw\home\andreas\test\empty.php on line 9
> 
> Fatal error: Can't use method return value in write context in D:\cw\home\andreas\test\empty.php on line 9

On my local.

Try doing `ini_set('display_errors', true)` prior to your `var_dump`'s and see if the error messages crop up

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T14:40:07.030

和[php.net一样](http://www.php.net/manual/en/function.empty.php)

> empty() 仅检查变量，因为其他任何内容都会导致解析错误。换句话说，以下内容将不起作用：empty(trim($name))。

这是因为`empty()`不是函数，而是语言构造，因此仅限于这种行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T14:40:17.280

Using empty() you can't check directly against the return value of a method. More info here: [Can't use method return value in write context](https://stackoverflow.com/questions/1075534/cant-use-method-return-value-in-write-context)

# javascript - 所见即所得文本处理器，配置打印边距

> ID：10259851
> 
> 赞同：0
> 
> 时间：2012-04-21T14:35:52.677
> 
> 标签：javascript, web, editor, wysiwyg

可以在 CKEditor 中配置打印边距。如果不是，您会推荐文本处理器吗？

我在一个项目中工作，使用边距和模板打印非常重要，用户要求我的主要功能之一是使用“不对称边距”打印。

我找不到这个选项，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:39:16.833

这些设置在浏览器设置中确定。我很确定它们不能以编程方式设置。

# java-me - 在 j2me 中实现 yahoo 股票报价 - 白色@故障“重定向”响应（301）

> ID：10259855
> 
> 赞同：1
> 
> 时间：2012-04-21T14:36:13.420
> 
> 标签：java-me, midp, httpconnection

我打算实施报价雅虎股票。当它运行时，程序没有连接到我输入的指定 url。

它在模拟器中显示一团糟`white @ fault "redirect " response(301)`

这是我连接到 url 的代码：

```
public String getQuote() throws IOException,NumberFormatException { 
String url ="http://quote.yahoo.com/d/quotes.csv?s=ibm&f=slc1wop"; 
HttpConnection c = null; 
c =(HttpConnection) Connector.open(url,Connector.READ_WRITE, true); 
c.setRequestMethod(HttpConnection.GET); 
InputStream is = c.openInputStream(); 
StringBuffer sb = new StringBuffer(); 
int ch; 
  while ((ch = is.read()) != -1) { 
    sb.append((char) ch); 
  } 
return (sb.toString()); 
} 
```

# html - 如何使用 safari 或 opera mini 浏览器在 iPad 上启用 HTML5？

> ID：10259859
> 
> 赞同：-1
> 
> 时间：2012-04-21T14:37:13.380
> 
> 标签：html

我刚刚安装了一个gateone服务器，这个软件可以让你只用一个html5浏览器来ssh其他主机，我可以在Windows 7上用Chrome做到这一点，但它在ipad的默认浏览器——safari中不起作用，我刚刚安装了一个 Opera Mini 在 App Store 中，但它也不会工作。

伙计们，如果你愿意，你也可以使用它。地址是[https://www.myciscolab.net/](https://www.myciscolab.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:39:49.337

Safari 部分支持 HTML 5，因此 Safari 或 Opera Mini 可能不支持您在网站上使用的 HTML5。您可以使用[http://www.browsercompatible.com](http://www.browsercompatible.com)之类的网站来确定可以使用哪些 HTML5 功能，哪些不能使用。还有其他网站也可以[点击这里](http://fmbip.com/litmus/)

# android - Android 3.x 模拟器只支持 WXGA 皮肤

> ID：10259867
> 
> 赞同：0
> 
> 时间：2012-04-21T14:37:42.217
> 
> 标签：android, android-emulator

出于某种原因，Android 3.x 模拟器只支持 WXGA 皮肤。为什么会这样，如果我想为其他皮肤定义一个模拟器，就像所有其他版本支持一样，我该怎么办？我是否必须使用分辨率选项，或者我可以以某种方式安装丢失的皮肤？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:53:51.167

> 这是为什么

因为 Android 3.x 仅在平板电脑上发布，所以大多数（如果不是全部）运行 WXGA 分辨率。因此，以任何其他分辨率运行 Android 3.x 模拟器几乎没有价值。

> 我必须使用分辨率选项吗

是的。

# ipad - iPad 2 相机与 iPad 3 相机的视野是多少？

> ID：10259868
> 
> 赞同：4
> 
> 时间：2012-04-21T14:37:43.310
> 
> 标签：ipad, camera, angle, fieldofview

iPad 2 相机（背面的那个）的视角（水平和垂直）是多少？新 iPad 拥有更好的摄像头，但视角是否提升了很多？在视野中拍照和使用视频也有区别吗？

在[维基百科](http://en.wikipedia.org/wiki/Angle_of_view)上我找到了这个公式

![视野](../Images/1dfc3d4bbe2d8551cedb776dbf600dde.png)

对于投影直线图像的镜头，视角 (α) 可以根据所选尺寸 (d) 和有效焦距 (f) 计算得出。

我不知道如何使用这个公式。如果你也不知道，只有结果也是好的。;)

# xml - 在 j2me 中更新 XML 文件

> ID：10259873
> 
> 赞同：0
> 
> 时间：2012-04-21T14:38:09.300
> 
> 标签：xml, java-me

我有一个`books.xml`文件，其中包含一些这样的数据

```
<BookDetails>
<Book>
<name>J2ME</name>
<author>abc</author>
<price>123</price>
</Book>
<Book>
<name>java</name>
<author>xyz</author>
<price>1234</price>
</Book>
</BookDetails> 
```

我需要更新名为 java 的书的价格。我需要用新内容更新这个 xml 文件。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:12:12.093

我建议使用 JSoup 一个您可能可以用于您的 java-me 环境的 java 库。在类路径中拥有该库后，您可以将 xml 转换为 Dom 树，并在其中导入以下代码：

```
import org.jsoup.*
import org.jsoup.nodes.* 
```

然后使用 JSoup 和 Document 类来解析 xml：

```
String xml = "<BookDetails><Book><name>J2ME</name><author>abc</author><price>123</price</Book>" +
"<Book><name>java</name><author>xyz</author><price>1234</price></Book></BookDetails>";

Document doc = Jsoup.parse(xml); 
```

然后使用下面的方法来更新你的xml书在内存中的价格：

```
public void updatePrice(Document doc, String bookName, String newPrice){
    for(Element name : doc.select("book name")){
        if(name.ownText() == bookName){
          name.parent().getElementsByTag("price")[0].text(newPrice);
     }
    }

} 
```

您可以轻松调用的方法：

```
updatePrice(doc, "java", "234"); 
```

正如我之前所说，这将更新内存中的 xml，那么您需要将变量 doc 表示的修改后的 xml 保存在文件中。

# typo3 - 将 locallang 值插入 TypoScript [stdWrap]

> ID：10259875
> 
> 赞同：2
> 
> 时间：2012-04-21T14:38:19.963
> 
> 标签：typo3, typoscript

我想知道是否可以将 locallang 值插入到我的打字稿 wrap / stdWrap 对象中：

我有：

```
singleView {
   related.wrap = <div class="related">Related items: |</div>
} 
```

我需要的是*这样的*：

```
singleView {
   related.wrap = <div class="related">{LLL:related_items}:|</div>
} 
```

**编辑：**
我正在寻找的是 TS 等价物`$this->pi_getLL`（效果很好）。在我们的例子中，我们将扩展中的值替换为
`$this->cObj->stdWrap($item, $this->conf['singleView.']['related']);`

*扩展*/pi1*目录 中的*locallang.xml ：**

 *```
<languageKey index="default" type="array">
    <label index="related_items">Related items: </label>
</languageKey> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:05:30.347

```
singleView {
   related.dataWrap = <div class="related">{LLL:EXT:myextensionkey/pi1/locallang.xml:related_items}:|</div>
} 
```

当然`related_items`必须是有效的 locallang 键。

**编辑：不要在这里使用`wrap`with `insertData`，因为`insertData`它会在整个内容上运行，包括用户输入。如果有人`{DB:be_users|0|password}`在您包装的内容中使用，他只能看到 uid 为 0 的后端用户的密码（哈希）。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T07:46:34.470

基于 pampe here 的答案，遗憾的是我没有足够的声誉在评论中这样做。

为了更容易使用，请执行以下操作：

常数：

```
extension.key = myextensionkey
LLL = LLL:EXT:{$extension.key}/Resources/Private/Language/locallang.xlf 
```

在你的打字稿中：

```
singleView {
   related.dataWrap = <div class="related">{{$LLL}:related_items}:|</div>
} 
```*

# meteor - 在 Meteor 中渲染模板时如何收听？

> ID：10259879
> 
> 赞同：5
> 
> 时间：2012-04-21T14:38:41.453
> 
> 标签：meteor

每当从后端更新 HTML 元素列表时，我都必须对它们进行一些后期处理。是否有一些我可以在模板上收听的事件（如 onRender）来促进这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T01:54:27.330

对于从 0.4.0 预览版开始的 Meteor，您可以使用[`Template.myTemplate.rendered`](http://docs.meteor.com/#template_rendered)它。

```
Template.myTemplate.rendered = function() {
      console.log('Template has been (re-)rendered');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:58:40.510

另请参阅此对话：[在 Meteor.js 中更新 DOM 后的回调](https://stackoverflow.com/questions/10109788/callback-after-the-dom-was-updated-in-meteor-js)

[在我的排行榜示例的 CoffeeScript 端口中](https://github.com/srackham/leaderboard-coffeescript)进行模板（重新）渲染后，我使用该技术在 DOM 中设置引导工具提示弹出事件。

这在模板中：

```
{{enable_tooltips}} 
```

在客户端调用此 (CoffeeScript) 模板属性方法：

```
enable_tooltips: ->
  # Update tooltips after the template has rendered.
  Meteor.defer -> $('[rel=tooltip]').tooltip()
  '' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T17:43:01.010

```
Template.userDashboard.onRendered(function() {
  // Initialize animate panel function
  $('.animate-panel').animatePanel();
} 
```

在 Meteor 1.0.4 中从 render 重命名为`onRendered`. 它现在也需要一个回调函数。

[http://docs.meteor.com/#/full/template_onRendered](http://docs.meteor.com/#/full/template_onRendered)

# javascript - 谷歌浏览器不考虑 window.name

> ID：10259887
> 
> 赞同：3
> 
> 时间：2012-04-21T14:39:20.233
> 
> 标签：javascript, css, google-chrome, popup, window.open

我知道在 window.open(url,name... 中，如果已经存在具有该名称的弹出窗口，该名称基本上会限制浏览器不要再次打开弹出窗口

例如，页面 A 打开名为“thug”的弹出窗口

现在我打开一个新标签。输入 localhost/pageA ，然后看到一个弹出窗口

这是问题所在，如果我在新选项卡中再次输入 URL localhost/pageA，它将重新打开弹出窗口，而不是它应该引用了之前的弹出窗口。因为他们有相同的名字

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:54:26.720

Chrome 中两个选项卡中的 JS 脚本在不同的上下文中运行，因此无法共享有关哪些窗口打开了一个窗口、一个窗口打开到另一个窗口的信息。此行为是一项安全功能，我相信[Google 会在此处更好地解释它](http://code.google.com/chrome/extensions/content_scripts.html)。

根据您的应用程序所需的防弹级别，您应该使用 AJAX、cookie 甚至持久存储来检查该窗口的存在和状态。

# html - 如何删除 HTML 中字符之间的空格？填充不起作用

> ID：10259888
> 
> 赞同：5
> 
> 时间：2012-04-21T14:39:25.417
> 
> 标签：html, css, fonts, padding

![在此处输入图像描述](../Images/dcc167bb2a807c4f2af0104bfec8ce40.png)

即使我将填充添加为 0px，为什么在字母“അ”之前有空格（标记为红色）？

```
<span style="margin:0;padding:0;border:1px solid blue;font-size:128px">അ&lt;/span> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T14:44:31.310

该空间是字体的一部分。在其上使用负片以将其删除。~~`letter-spacing`~~ `margin-left`

**[例子](http://dabblet.com/gist/2437505)**

**注意：**这只会将整个跨度向后移动几个 px。实际上，空间仍然存在，无法正确移除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T15:02:47.340

在排版中，出于美观和可读性的考虑，通常会调整字符之间的间距。空格甚至在常见的 ascii 字母中也存在：

```
<span style="margin:0;padding:0;border:1px solid blue;font-size:128px;letter-spacing:0px;">a</span> 
```

![在此处输入图像描述](../Images/89062198b2e48240543bb81ce4558e98.png)

但是空间是不同的，因为不同的变量，比如前一个字符和下一个字符是什么。

你可以通过玩消极`padding`和`letter-spacing`

[更多信息](http://www.cs.tut.fi/~jkorpela/www/letter-spacing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-12T14:28:42.037

使用内联定位会产生空白，并且跨度始终是内联元素。解决方案：[https ://css-tricks.com/fighting-the-space-between-inline-block-elements/](https://css-tricks.com/fighting-the-space-between-inline-block-elements/)

你看过 lettering.js 吗？它是一个专门用于排版的 jquery 插件。

# java - 数据未添加到 arrayList

> ID：10259895
> 
> 赞同：-2
> 
> 时间：2012-04-21T14:40:13.617
> 
> 标签：java

我的 java 代码有问题。出于某种原因，我试图添加到列表中的属性有点工作，但它只保留或显示列表中的对象。我不知道是属性被删除还是什么，但这真的很烦人。

```
public static Program parseProgram(File fileName)
        throws FileNotFoundException {
    Scanner in1 = new Scanner(fileName);

    Program program = new Program();
    Short value = 0;
    Short address = 0;
    boolean indirect = false;
    String[] temp = null;

    while (in1.hasNextLine()) {
        String line = in1.nextLine();
        temp = line.split("\\s+");

        Scanner in2 = new Scanner(temp[0]);

        if (in2.hasNextInt(16)) {
            int temp1 = Integer.parseInt(temp[0]);
            Short temp2 = (short) temp1;
            int temped = Integer.parseInt(temp[1]);
            Short temp3 = (short) temped;
            DataLine data = new DataLine(temp2, temp3);
            try {
                program.addDataLine(data);
            } catch (DataAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } else {
            String s = "*";
            String ss = new String();

            Instruction instruction = Instruction.getByName(temp[0]);

            if (instruction.requiresArgument()) {
                int temped = Integer.parseInt(temp[1], 16);
                Short arg = (short) temped;
                if (temp.length > 1) {
                    if (temp[1].endsWith("*")) {
                        indirect = true;
                        ss = temp[1].substring(0, temp[1].indexOf("*"));
                        arg = (short) Integer.parseInt(ss);
                        CodeLine code = new CodeLine(instruction, arg,
                                indirect);
                        try {
                            program.addCodeLine(code);
                        } catch (CodeAccessException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    } else if (line.contains(s)) {
                        indirect = true;
                        String sg = temp[1].substring(0,
                                temp[1].indexOf("*"));
                String st = temp[1]
                                .substring(temp[1].indexOf("*") + 1);
                        ss = sg + st;
                        arg = (short) Integer.parseInt(ss);
                CodeLine code = new CodeLine(instruction, arg);
                        try {
                            program.addCodeLine(code);
                        } catch (CodeAccessException e) {
                        // TODO Auto-generated  catch block
                            e.printStackTrace();
                        }
                    }
                } else {
                    System.out.println("error");
                }
            }

            else {
                CodeLine code = new CodeLine(instruction);
                try {
                    program.addCodeLine(code);
                } catch (CodeAccessException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }

    }
    return program;

} 
```

} }

公共类程序实现可序列化{

```
private List<CodeLine> codeSegment = new ArrayList<CodeLine>();

private List<DataLine> dataSegment = new ArrayList<DataLine>();

/**
 * Add a line of code to this program.
 * 
 * @param line must not be null.
 * @throws CodeAccessException if line is null
 */
public void addCodeLine(CodeLine line) throws CodeAccessException{
    if(line == null)
        throw new CodeAccessException("Cannot add null code lines to a program.");
    codeSegment.add(line);
}

/**
 * Add a data instructionn to this program.  A data instruction is
 * a address - value pair.
 * 
 * @param line must not be null.
 * @throws DataAccessException if line is null
 */
public void addDataLine(DataLine line) throws DataAccessException{
    if(line == null)
        throw new DataAccessException("Cannot add null data lines to a program.");
    dataSegment.add(line);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:52:51.400

我的建议是从头开始重写整个事情。真的。丢弃此代码并重新编写它。

# asp.net - 如何将数据表的第一行作为我的数据网格标题？-ASP.NET

> ID：10259897
> 
> 赞同：0
> 
> 时间：2012-04-21T14:40:19.983
> 
> 标签：asp.net

如果我们使用类似的类，则会自动生成 Datagrid 标题

```
 public Class student{ public int id {get; set;} public int name {get; set;} } 
```

在生成班级学生列表以填充数据网格标题时会自动设置。

我的问题是我没有任何静态标题我正在读取用户上传的 .ods 文件

**如何将数据表的第一行作为我的数据网格标题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:24:12.923

利用`DataGridColumn.HeaderText`属性设置每个网格列的标题。但是，由于您想为此使用 dataTable 的第一行，请确保至少有一个数据行可用。在将数据表设置为数据源之前，您必须删除第一行（因为它已被用作标题）。请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagridcolumn.headertext%28v=vs.100%29.aspx)

# android - 设置方向 - 原生相机/映射一些其他应用程序

> ID：10259899
> 
> 赞同：0
> 
> 时间：2012-04-21T14:40:32.437
> 
> 标签：android

我正在开发一个应用程序来使用Android原生相机拍照并加载地图等。地图的方向随着我的改变而改变，但我真正需要的是即使在原生应用程序上也只有横向方向，因为我的整个应用程序仅限横向。

但是如何设置方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:43:49.230

在该`AndroidManifest.xml`文件中，您可以为您的应用程序指定可接受的方向。

要强制您的活动保持横向模式，只需`android:screenOrientation`在活动的定义标记中包含该标记。

```
<activity android:name=".SomeActivity"
   android:label="@string/app_name"
   android:screenOrientation="landscape"> 
```

# unix - 用于测试文件名中的分隔符的 Shell 脚本

> ID：10259900
> 
> 赞同：0
> 
> 时间：2012-04-21T14:40:34.057
> 
> 标签：unix, shell

感谢您的阅读和您的建议。我将文件移动到各自的目录中，只有一些文件使用`_`和一些使用`-`（下划线和连字符）作为分隔符。有没有办法测试不同的分隔符？

例如：

```
ParentDir
    1897/
    1898/
    1994summer/
    file-1897-001.txt
    file-1897-002.txt
    file-1898-001.txt
    file-1898-002.txt
    file_1994summer_001.txt
    file_1994summer_002.txt 
```

我一直在处理以下（详细以便我能理解）shell 脚本：

```
!/bin/sh
for f in *.jp2
do
base=${f%.txt}
echo "base fileName is $base"
fileName=`echo "$base" | cut -f 2 -d _`
echo "truncated fileName is $fileName"
dir=$fileName
echo "Directory is $dir"
mv -v "$f" "$dir"
sleep 1
done 
```

使用 cut 命令时，我希望能够区分分隔符。那可能吗？提前感谢您的时间和建议。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:23:52.977

```
case "${fName}" in 
    *_* ) underscore_funnyFace_processing "${fName}" ;; 
    *-* ) hyphen_funnyFace_process "${fName}" ;; 
    * ) all_other_processing "${fName}" ;; 
esac 
```

我几乎可以肯定 bourne shell 支持案例处理。无权使用一个进行测试。

bourne/bash/ksh/zsh 之间的区别在于每个 shell 具有的 shell 通配符模式，作为 bourne shell 支持的基本模式的扩展。

我希望这有帮助。

# php - 使用多个类别 ID 调用 Wordpress 存档页面

> ID：10259902
> 
> 赞同：0
> 
> 时间：2012-04-21T14:40:40.410
> 
> 标签：php, wordpress

我在我的模板页面上使用自定义字段，我想创建一个指向多个类别 ID 的超链接。

此片段获取我的自定义帖子字段并返回类别 ID 23 和 19，或我放入自定义字段中的任何系列，即：23、9、17：

```
<?php $featuredpost_cat = get_field('featured_category_id'); ?> 
```

我想做这样的事情（我不知道正确的调用和语法）：

```
<a href="<?php wp link to $featuredpost_cat ?>"My Link Title </a> 
```

我希望这足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:42:38.010

按类别 ID 分类链接：

```

`<?php
  $featuredpost_cat = get_field('featured_category_id');
  $category_link = get_category_link( $featuredpost_cat );
  ?>

  <a href="<?php echo esc_url( $category_link ); ?>"> My Link Title </a>` 

您可以在 wordpress 函数参考站点中获得更多详细信息。
[http://codex.wordpress.org/Function_Reference/get_category_link](http://codex.wordpress.org/Function_Reference/get_category_link)

            回答 #2

赞同：0

时间：2012-04-21T15:25:34.987

Try this: 

```
<a href="http://www.yourwebiteurl/yourcategoriepage/<?=$featuredpost_cat?>">My Link Title</a> 
```

Im just giving an general solution how you can link to the id hope this helps.

```

# java - 仅从输入中读取某些行？

> ID：10259905
> 
> 赞同：0
> 
> 时间：2012-04-21T14:40:58.067
> 
> 标签：java, input

如果我有一些代码，例如`input = new BufferedReader(new FileReader(args[0]));` 并且输入文件包含成对的行，我该如何制作它，以便只导入每行的第一行？换句话说，只有每条奇数行？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:49:01.763

您可能想考虑使用来简化`java.io.LineNumberReader`奇数行 ( ) 的过滤。`lineNo % 2 == 1`或者在另一种方法中，如果您使用的是 JDK7，您可以使用该`java.nio.files.Files.readAllLines()`方法并在迭代时再次过滤奇数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:50:54.833

```
String line = input.readLine();
while (line != null) {
   // do something with the line

   // Skip every other line
   input.readLine();
   // Get next line
   line = input.readLine();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:05:48.790

像这样的东西会读入文件，并在字符串缓冲区中为您提供每 2 行。

```
BufferedReader br = new BufferedReader(new FileReader(args[0]));
String line;
StringBuffer endResult = new StringBuffer(1000);
int lineNumber=1;
while ((line=br.readLine()) != null) {
    //every odd line will be added, 1, 3, 5 etc
    if (lineNumber++%2==1) {
       endResult.append(line+"\n");
    }
} 
```

# java - Lucene：异常 - 遇到查询解析器 在“一些词”之后

> ID：10259907
> 
> 赞同：18
> 
> 时间：2012-04-21T14:41:06.553
> 
> 标签：java, lucene, classification, query-parser

我正在研究一个分类问题，根据使用 Lucene API 的训练数据将产品评论分类为正面、负面或中性。

我正在使用评论对象的 ArrayList - “reviewList”，它在抓取网页时存储每个评论的属性。

然后使用索引器对包括“极性”和“评论内容”的评论属性进行索引。此后，根据索引对象，我需要对剩余的评论对象进行分类。但是在这样做的同时，查询解析器在“评论内容”中遇到了一个 EOF 字符，因此终止了一个评论对象。

导致错误的行已相应注释 -

```
 IndexReader reader = IndexReader.open(FSDirectory.open(new File("index")));
    IndexSearcher searcher = new IndexSearcher(reader);
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_31);
    QueryParser parser = new QueryParser(Version.LUCENE_31, "Review", analyzer);

    int length = Crawler.reviewList.size();
    for (int i = 200; i < length; i++) {
        String true_class;
        double r_stars = Crawler.reviewList.get(i).getStars();

        if (r_stars < 2.0) {
            true_class = "-1";
        } else if (r_stars > 3.0) {
            true_class = "1";
        } else {
            true_class = "0";
        }

        String[] reviewTokens = Crawler.reviewList.get(i).getReview().split(" ");
        String parsedReview = "";

        int j;

        for (j = 0; j < reviewTokens.length; j++) {
            if (reviewTokens[j] != null) {
                if (!((reviewTokens[j].contains("-")) || (reviewTokens[j].contains("!")))) {
                    parsedReview += reviewTokens[j] + " ";
                }
            } else {
                break;
            }
        }

        Query query = parser.parse(parsedReview); // CAUSING ERROR!!

        TopScoreDocCollector results = TopScoreDocCollector.create(5, true);
        searcher.search(query, results);
        ScoreDoc[] hits = results.topDocs().scoreDocs; 
```

我已经手动解析了文本以删除导致错误的字符，除了检查下一个字符串是否为空......但错误仍然存​​在。

这是错误堆栈跟踪 -

```
Exception in thread "main" org.apache.lucene.queryParser.ParseException: Cannot parse 'I made the choice ... be all "thumbs ': Lexical error at line 1, column 938\.  Encountered: <EOF> after : "\"thumbs "
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:216)
at Sentiment_Analysis.Classification.classify(Classification.java:58)
at Sentiment_Analysis.Main.main(Main.java:17)
Caused by: org.apache.lucene.queryParser.TokenMgrError: Lexical error at line 1, column 938\.  Encountered: <EOF> after : "\"thumbs "
at org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(QueryParserTokenManager.java:1229)
at org.apache.lucene.queryParser.QueryParser.jj_scan_token(QueryParser.java:1709)
at org.apache.lucene.queryParser.QueryParser.jj_3R_2(QueryParser.java:1598)
at org.apache.lucene.queryParser.QueryParser.jj_3_1(QueryParser.java:1605)
at org.apache.lucene.queryParser.QueryParser.jj_2_1(QueryParser.java:1585)
at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1280)
at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1266)
at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1313)
at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1266)
at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1226)
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
... 2 more
Java Result: 1 
```

请帮我解决这个问题……我已经为此烦恼了好几个小时了！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-21T14:45:53.590

您应该通过转义双引号和其他特殊字符

```
Query query = parser.parse(QueryParser.escape(parsedReview)); 
```

正如[QueryParser.escape](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/queryParser/QueryParser.html#escape%28java.lang.String%29) Javadoc 所建议的那样，

> 返回一个字符串，其中 QueryParser 期望转义的那些字符由前面的 '\' 转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-05T12:17:30.643

我认识到这个问题。

在 Teradata 中声明`GROUP BY`之前的`WHERE`声明工作正常，但在解析时会引发错误。

要修复，请将声明移到`GROUP BY`声明之后`WHERE`。

# c# - C# 和 Windows 中的时间

> ID：10259909
> 
> 赞同：0
> 
> 时间：2012-04-21T14:41:17.943
> 
> 标签：c#, .net, time

我想编写一个必须知道实时的程序。如果有人更改了 Windows 时间，我不希望我的程序的时间改变。如何？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T14:46:18.377

如果您不愿意信任系统时间，则必须通过网络获取时间。找到ac#ntp客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:47:52.290

这里有一些例子：

[http://www.codeproject.com/Articles/1005/SNTP-Client-in-C](http://www.codeproject.com/Articles/1005/SNTP-Client-in-C)

[http://www.codeproject.com/Articles/5972/Daytime-Internet-Time-Service-Class](http://www.codeproject.com/Articles/5972/Daytime-Internet-Time-Service-Class)

# java - JTable cellEditor 在表格数据模型更改后保留

> ID：10259912
> 
> 赞同：2
> 
> 时间：2012-04-21T14:41:49.720
> 
> 标签：java, swing, jtable, tablecelleditor, jspinner

我已经将其中一列的单元格编辑器设置为 JSpinner 并且它可以工作，但是当数据模型中的数据发生更改时，我之前启用的编辑器仍然处于启用状态，它显示旧行的值（它不存在或者它在更改的数据中位于不同的位置）。

如何在数据更改时使所选单元格的编辑器消失并保存输入的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:15:06.380

这可能是您的[SSCCE的好代码](http://sscce.org/)

![在此处输入图像描述](../Images/023ae71b9afcf66e9d10f446b7f617ba.png)

```
import java.awt.*;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.border.*;
import javax.swing.table.*;

public class SpinnerColumn extends AbstractCellEditor implements TableCellEditor, TableCellRenderer {

    private static final long serialVersionUID = 1L;
    private JSpinner editSpinner, renderSpinner;
    private JTable table;
    private String[] list;
    private Border originalBorder;

    public SpinnerColumn(JTable table, int column) {
        editSpinner = new JSpinner();
        renderSpinner = new JSpinner();
        originalBorder = editSpinner.getBorder();
        editSpinner.setBorder(new LineBorder(Color.BLUE));
        this.table = table;
        table.getColumnModel().getColumn(column).setCellEditor(this);
    }

    public SpinnerColumn(String[] list, JTable table, int column) {
        editSpinner = new JSpinner();
        editSpinner.setModel(new SpinnerListModel(list));
        renderSpinner = new JSpinner();
        originalBorder = editSpinner.getBorder();
        editSpinner.setBorder(new LineBorder(Color.BLUE));
        this.list = list;
        this.table = table;
        table.getColumnModel().getColumn(column).setCellEditor(this);
    }

    @Override
    public Object getCellEditorValue() {
        return editSpinner.getValue();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected,
            int row, int column) {
        if (list != null) {
            editSpinner.setValue(list[0]);
        } else {
            editSpinner.setValue(0);
        }
        if (value != null) {
            editSpinner.setValue(value);
        }
        return editSpinner;
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected,
            boolean hasFocus, int row, int column) {
        if (hasFocus) {
            renderSpinner.setBorder(new LineBorder(Color.BLUE));
        } else {
            renderSpinner.setBorder(originalBorder);
        }// *** here's where we set the spinner's value
        if (value == null) {
            renderSpinner.setValue(0);
        } else {
            int intValue = ((Integer) value).intValue();
            renderSpinner.setValue(intValue);
        }
        return renderSpinner;
    }

    @Override
    public boolean isCellEditable(EventObject evt) {
        return true;
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame("SpinnerColumn");
                JPanel panel = new JPanel(new GridLayout(1, 1));
                JTable table = new JTable(5, 1);
                SpinnerColumn spinnerColumn = new SpinnerColumn(table, 0);
                table.setDefaultRenderer(Object.class, spinnerColumn);
                panel.add(table);
                frame.setContentPane(panel);
                frame.pack();
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            }
        });
    }
} 
```

# qt - 带有 qt 的端口定向短信

> ID：10259914
> 
> 赞同：0
> 
> 时间：2012-04-21T14:41:57.287
> 
> 标签：qt, sms, port, symbian, symbian3

我需要编写一个使用端口定向 SMS 和通知 API 的应用程序

我搜索但我找不到任何关于它的线程，端口定向短信在 j2me 中使用，但我需要在 qt 上开发我的应用程序是否有一些关于此的文章或示例代码？或者我应该问，可以在qt中使用端口定向短信吗？

感谢您的回复。

# maven - 在 Maven 中如何记录运行的命令？

> ID：10259918
> 
> 赞同：2
> 
> 时间：2012-04-21T14:42:26.943
> 
> 标签：maven

我们很自然地在 maven 中使用 aspectj 编译器进行堆栈溢出，我想记录运行的确切命令行命令（就像 ant 可以做的那样），以便我可以运行它并将调试器附加到正在运行的命令。我如何在 Maven 中做到这一点？

```
[ERROR] at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:427)
[ERROR] at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:393)
[ERROR] at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:427)
[ERROR] at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:393)
[ERROR] at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:427)
[ERROR] at org.aspectj.weaver.ReferenceType.isAssignableFrom(ReferenceType.java:393) 
```

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T16:57:39.703

要从 Maven 获取额外的调试信息，请使用该`-X`选项。这通常会记录所有衍生进程（例如编译器）的命令行。这将从所有插件中产生大量输出。

如果您使用的是[AspectJ Maven 插件](http://mojo.codehaus.org/aspectj-maven-plugin/plugin-info.html)，命令行将保存到插件的[argumentFileName](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html#argumentFileName)参数定义的文件中，该文件默认`builddef.lst`位于项目的构建输出目录中（默认为`target`）。这可能比扫描 Maven 的大量调试输出更有用且更容易。

# .net - 窗口冻结在绘图形状上

> ID：10259923
> 
> 赞同：1
> 
> 时间：2012-04-21T14:42:54.550
> 
> 标签：.net, wpf, multithreading, drawing

我的 WPF 窗口中有一个[画布](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)，我想绘制大量形状（大约十万个或更多）。像这样的东西：

```
<Window>
<Canvas>
    <!--<Shape1/>
    <Shape2/>
    ... and so on ... -->
</Canvas>
</Window> 
```

要绘制形状，我有一种方法可以完成这样的工作：

```
public void DrawShape()
{
    // Create the shape
    ShapeT MyShape = new ShapeT();
    // Set shape's properties (like Width, Fill, ...)

    // Add shape as MyCanvas children.
    MyCanvas.Children.Add(MyShape);
} 
```

然后画，例如，我做的四万个形状：

```
for (uint i = 0; i < 0x9C40; ++i)
     DrawShape(); 
```

**问题是：**

1.  直到没有绘制所有图形，即直到循环完成，没有绘制图形并且我的窗口一直没有响应。

2.  即使循环完成后，仍然需要几秒钟才能在视频上绘制数字，并且我的窗口继续被冻结。

我尝试使用[Dispatcher](http://msdn.microsoft.com/en-us/library/System.Windows.Threading.Dispatcher.aspx)：

```
Dispatcher.BeginInvoke(DispatcherPriority.Background, new MyDrawDelegate(DrawShape)); 
```

我试图创建一个新线程：

```
Thread DrawThread = new Thread(new ThreadStart(DrawShape));
DrawThread.SetApartmentState(ApartmentState.STA);
DrawThread.Priority = ThreadPriority.Lowest;
DrawThread.Start(); 
```

但没有任何变化。我该如何解决这些问题？

[PS：出于性能原因，我使用Visual](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.aspx)而不是[Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx)对象绘制我的形状。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:25:22.820

据我所知，WPF（直到 3.5）只允许一个线程访问 WPF 对象，所以我认为您需要优化它而不是使用线程。

例如：您是否需要将所有形状都显示在一起？您可以仅加载其中的一个子集并在第二次加载其他一些对象吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T17:52:56.837

当您使用 Dispatcher 时，您的 ArangePass 可能需要很长时间才能将更新的更改呈现到 UI。您可以通过添加以下代码片段让您的父容器等待：

```
 using (var temporaryPresentationSource = new HwndSource(new HwndSourceParameters()) { RootVisual = (VisualTreeHelper.GetParent(yourRenderTarget) == null ? yourRenderTarget: null) })
        {
            // Flush the dispatcher queue
            yourRenderTarget.Dispatcher.Invoke(DispatcherPriority.Background, 
            new Action(() => {/*required action*/ }));
         } 
```

试一试，它对我有用.. !!

# android - 如何制作具有链接的多个按钮？

> ID：10259927
> 
> 赞同：0
> 
> 时间：2012-04-21T14:43:29.003
> 
> 标签：android, button, hyperlink

我已经制作了所有按钮和所有链接都可以正常工作，但我遇到的问题是我必须从顶部按钮开始并选择它，然后才能继续使用后续按钮才能使每个按钮正常工作。换句话说，在我按顺序选择每个按钮之前，没有一个按钮起作用。我确定我在这里遗漏了一些简单的东西，只是对我在这里所做的事情一无所知。任何帮助表示赞赏，谢谢！

```
 package rainbow.cheetah.go.sms;

import android.app.Activity;
import android.os.Bundle;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
public class RainbowCheetahGOSMSActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn = (Button) findViewById(R.id.More);
        btn.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                        myWebLink.setData(Uri.parse("https://play.google.com/store/search?q=stealthychief&c=apps"));
                        startActivity(myWebLink); 

                       Button btn = (Button) findViewById(R.id.match);
                        btn.setOnClickListener(new OnClickListener() {
                                public void onClick(View v) {
                                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                                        myWebLink.setData(Uri.parse("https://play.google.com/store/search?q=rainbow+cheetah+stealthychief&c=apps"));
                                        startActivity(myWebLink);  

                        Button btn = (Button) findViewById(R.id.rate);
                        btn.setOnClickListener(new OnClickListener() {
                                public void onClick(View v) {
                                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                                        myWebLink.setData(Uri.parse("https://play.google.com/store/apps/details?id=rainbow.cheetah.go.sms&feature=search_result#?t=W251bGwsMSwxLDEsInJhaW5ib3cuY2hlZXRhaC5nby5zbXMiXQ.."));
                                        startActivity(myWebLink);               

                                        Button btn = (Button) findViewById(R.id.twitter);
                                        btn.setOnClickListener(new OnClickListener() {
                                                public void onClick(View v) {
                                                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                                                        myWebLink.setData(Uri.parse("https://twitter.com/#!/Stealthychief"));
                                                        startActivity(myWebLink);

                        Button btn = (Button) findViewById(R.id.google);
                        btn.setOnClickListener(new OnClickListener() {
                                public void onClick(View v) {
                                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                                        myWebLink.setData(Uri.parse("https://plus.google.com/u/0/105194414710791941012/posts"));
                                        startActivity(myWebLink);     }
                        });           
                  }
                });
    }

    });

    }
        });

}});

    }}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:46:29.537

这是因为您完全弄乱了括号。我想你的意思是这样的：

```
public class RainbowCheetahGOSMSActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button btn = (Button) findViewById(R.id.More);
        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent myWebLink = new Intent(
                        android.content.Intent.ACTION_VIEW);
                myWebLink.setData(Uri
                        .parse("https://play.google.com/store/search?q=stealthychief&c=apps"));
                startActivity(myWebLink);
            }
        });

        Button btn2 = (Button) findViewById(R.id.match);
        btn2.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                        myWebLink.setData(Uri.parse("https://play.google.com/store/search?q=rainbow+cheetah+stealthychief&c=apps"));
                        startActivity(myWebLink);
                }
        });

        Button btn3 = (Button) findViewById(R.id.rate);
        btn3.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                        myWebLink.setData(Uri.parse("https://play.google.com/store/apps/details?id=rainbow.cheetah.go.sms&feature=search_result#?t=W251bGwsMSwxLDEsInJhaW5ib3cuY2hlZXRhaC5nby5zbXMiXQ.."));
                        startActivity(myWebLink);
                }
        });

        Button btn4 = (Button) findViewById(R.id.twitter);
        btn4.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                        myWebLink.setData(Uri.parse("https://twitter.com/#!/Stealthychief"));
                        startActivity(myWebLink);
                }
        });

        Button btn5 = (Button) findViewById(R.id.google);
        btn5.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                        Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
                        myWebLink.setData(Uri.parse("https://plus.google.com/u/0/105194414710791941012/posts"));
                        startActivity(myWebLink); 
                }
        });

    }
} 
```

# java - 从 ArrayList 中读取值

> ID：10259928
> 
> 赞同：-2
> 
> 时间：2012-04-21T14:43:49.187
> 
> 标签：java

我有一个数组列表：

```
{IDS=[10, 12], SALARY=[10000, 20000]} 
```

我想要的是，我应该能够像这样打印

```
IDS=10,12
SALARY=10000,20000 
```

代码：

```
 ArrayList<HashMapImpl> ds = XmlUtils.getListFromXml("Abc", "XYZ", str);
    System.out.println("Array Content====>");
    Object[] elements = ds.toArray();
    for(int i=0;i<elements.length;i++){
        System.out.println(elements[i]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:58:43.253

我只是自己做了解决方案。

我添加了以下内容

代码：

```
 for(HashMapImpl map : ds){
           System.out.println("----------------------------------------------");
           System.out.println("IDS: " + map.get("IDS"));
           System.out.println("SALARY: " + map.get("SALARY"));
        } 
```

# android - 每次我在手机上运行它时应用程序崩溃

> ID：10259930
> 
> 赞同：0
> 
> 时间：2012-04-21T14:43:52.450
> 
> 标签：android, media-player

我想做一个通用音板。
但它不会运行，这很奇怪，而我没有任何错误。
我在网上搜索了解决方案，但找不到。
这是我使用的代码：

```
package com.soundboard;

import java.io.IOException;
import android.app.Activity;
import android.content.res.AssetFileDescriptor;
import android.content.res.Resources;
import android.media.MediaPlayer;
import android.graphics.Typeface;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;

public class Soundboard extends Activity implements OnClickListener {
MediaPlayer player = new MediaPlayer();
Resources res = getResources();
int[] buttonIds = {R.id.sound1,R.id.sound2,R.id.sound3,R.id.sound4,R.id.sound5,R.id.sound6,R.id.sound7,R.id.sound8,R.id.sound9,R.id.sound10,R.id.sound11,R.id.sound12,R.id.sound13,R.id.sound14,R.id.sound15,R.id.sound16};
int[] soundIds = {R.raw.sound1, R.raw.sound2, R.raw.sound3, R.raw.sound4, R.raw.sound5, R.raw.sound6, R.raw.sound7, R.raw.sound8, R.raw.sound9, R.raw.sound10, R.raw.sound11, R.raw.sound12, R.raw.sound13, R.raw.sound14, R.raw.sound15, R.raw.sound16};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
} 

public void onClick(View v) {
    //find the index that matches the button's ID, and then reset
    //the MediaPlayer instance, set the data source to the corresponding
    //sound effect, prepare it, and start it playing.
    for(int i = 0; i < buttonIds.length; i++) {
        if(v.getId() == buttonIds[i]) {
            AssetFileDescriptor afd = getResources().openRawResourceFd(soundIds[i]);
                try {
                    player.reset();
                    player.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getDeclaredLength());
                    player.prepare();
                    player.start();
                    afd.close();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

我希望你们能帮助我。

谢谢，
流

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:41:38.903

I think the problem is you didn'yt set the onclickListener on the View you are clicking. I think the view is a button. call setOnclickListener() on the button in the javacode.

# wcf - f# 中长时间运行的代理

> ID：10259933
> 
> 赞同：4
> 
> 时间：2012-04-21T14:44:19.170
> 
> 标签：wcf, f#, agent, mailboxprocessor

我以不同的方式使用代理，其中一种由 100 个代理监控网站更改组成，并向主管报告，我可以调用它来生成新的监视器，或收听合并的更改。这只是我计划的一部分，我对此很满意。我现在想将它分离出来，让它真正独立于我的主程序运行。

（但我希望这个独立的衍生产品尽可能多地保留在语言中，并尽可能使用最少的胶水代码）

我在这里有什么策略/你会推荐什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T15:02:26.233

执行长时间运行代理的一种选择是编写一个随操作系统启动（甚至可能在登录之前）并在后台运行的 Windows 服务。然后，您的主应用程序可以连接到该服务并与之通信。

*   这是MSDN 上[的 F# Windows 服务的基本示例。](http://msdn.microsoft.com/en-us/library/hh297113.aspx)

在服务中运行代理非常容易。服务和主应用程序之间的通信更加棘手，因为它们是两个独立的进程。该示例使用 .NET Remoting，它现在已被 WCF 取代，所以我认为这是值得关注的（尤其是如果您想要异步通信）。或者，有一些 F# 项目实现了简单的基于套接字的通信，这可能更易于使用。

# java - Java - 在什么情况下 JVM 可能会突然崩溃？

> ID：10259934
> 
> 赞同：3
> 
> 时间：2012-04-21T14:44:23.650
> 
> 标签：java, unix, process, jvm, daemon

我在我的 ubuntu 机器上运行一个守护进程 java 进程：

```
java -cp (...) &> err.log& 
```

该过程会随机运行一段时间，然后消失。日志中没有任何内容，err.log，没有创建 JVM 崩溃文件 (hs_err_*.log)，什么都没有。我的两个问题是：

1）java进程在什么情况下会突然结束？

2）有没有办法知道进程发生了什么（知道PID）？UNIX 是否以某种方式保存有关已完成进程的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:03:33.550

***1）java进程在什么情况下会突然结束？***

当它自行退出时，但我猜你排除了这一点，或者当它被 SIGKILL 杀死时。如果您在 Linux 上，这可能是 oom 杀手。你看过系统消息日志吗？

***2）有没有办法知道进程发生了什么（知道PID）？***

通常不会，除非您配置一些跟踪工具来获取该信息

***UNIX 是否以某种方式保存有关已完成进程的信息？***

不，但根据您使用的 Unix 变体，这可能很容易添加。在您的示例中，您可以使用打印进程退出状态`echo $?`

如果是`265`，则意味着进程被信号 9 ( `=265-256`) 杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:15:28.800

我会编写一个简单的 shell 脚本，当 JVM 终止时它会以某种方式提醒我。也许发送一封带有 JVM 退出代码的电子邮件。

```
#!/bin/sh

# Launch JVM and wait...
java -cp ...

# do something with the exit code $?
# log it to a file or mail it yourself 
```

也许，退出代码可能会揭示一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:25:47.083

我会将它作为[YAJSW](http://yajsw.sourceforge.net)的守护进程运行，因为它允许多种方式来监控内存等，具有重新启动选项，并且您还可以启用包装进程的日志，以便在出现问题时获得更多信息。

# .htaccess - RewriteRule - mod-rewrite

> ID：10259935
> 
> 赞同：0
> 
> 时间：2012-04-21T14:44:29.253
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 文件中有以下技巧，在我的本地服务器或生产服务器上一切正常，但是当我将此文件上传到远程服务器时，它给我一个错误**500 Internal server error**，以下几行给我一个错误

.htaccess 在我的生产服务器上工作正常，但在远程服务器上却不行

```
Options +FollowSymLinks
Redirect /othersite.html http://www.othersite.com
RewriteEngine on
RewriteRule ^(.*)\.htm$ $1.php [nc]
RewriteRule ^Old_One$ nomoreoldies.php [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:12:58.863

请检查该服务器上是否启用了 mod_rewrite，并且您可以通过目录中的 .htaccess 使用重写规则。

*编辑（总结评论）：*

附加提示：检查日志文件是否有错误。在*无效命令*的情况下，检查拼写和错误的文件编码，这可能会用其他一些字符替换空格，以便 mod_rewrite 无法识别该行的部分。

如有疑问，请使用（或类似的编辑器）直接在服务器上重新创建整个文件`vi`，无需复制和粘贴以确保服务器上的文件编码正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-16T10:44:51.840

将本地文件部署到远程服务器时要小心。使用 ftp 编辑文件并检查实际隐藏的无效字符。或重新创建文件，删除无效字符

# performance - 快速模 511 和 127

> ID：10259937
> 
> 赞同：4
> 
> 时间：2012-04-21T14:44:45.087
> 
> 标签：performance, modulo

有没有办法，如何使 511（和 127）的模数比使用“%”运算符更快？

```
int c = 758 % 511;
int d = 423 % 127; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T10:59:19.903

这是一种通过 511 进行快速模运算的方法，假设 x 最多为 32767。它的速度大约是`x%511`. 它分五步进行模运算：两次乘法，两次加法，一次移位。

```
inline int fast_mod_511(int x) {
    int y = (513*x+64)>>18;
    return x - 511*y;
} 
```

这是我如何得出这个结论的理论。我在最后发布了我测试过的代码

让我们考虑一下

```
y = x/511 = x/(512-1) = x/1000 * 1/(1-1/512). 
```

让我们定义 z = 512，然后

```
y = x/z*1/(1-1/z). 
```

使用泰勒展开

```
y = x/z(1 + 1/z + 1/z^2 + 1/z^3 + ...). 
```

现在，如果我们知道 x 的范围有限，我们就可以减少展开。假设 x 总是小于 2^15=32768。然后我们可以写

```
512*512*y = (1+512)*x = 513*x. 
```

在查看了重要的数字之后，我们得出了

```
y = (513*x+64)>>18 //512^2 = 2^18. 
```

**我们可以将 x/511（假设 x 小于 32768）分为三个步骤：**

```
multiply,
add,
shift. 
```

这是我在 Ivy Bridge 内核上的 MSVC2013 64 位发布模式下分析此代码的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <omp.h>

inline int fast_mod_511(int x) {
    int y = (513*x+64)>>18;
    return x - 511*y;
}

int main() {
    unsigned int i, x;
    volatile unsigned int r;
    double dtime;

    dtime = omp_get_wtime();
    for(i=0; i<100000; i++) {
        for(int j=0; j<32768; j++) {
            r = j%511;
        }     
    }
    dtime =omp_get_wtime() - dtime;
    printf("time %f\n", dtime);

    dtime = omp_get_wtime();
    for(i=0; i<100000; i++) {
        for(int j=0; j<32768; j++) {
            r = fast_mod_511(j);
        }
    }
    dtime =omp_get_wtime() - dtime;
    printf("time %f\n", dtime);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:08:06.840

您可以使用预先存储解决方案的查找表。如果您创建一个包含一百万个整数的数组，那么查找的速度大约是在我的 C# 应用程序中实际执行取模的速度的两倍。

```
// fill an array
var mod511 = new int[1000000];
for (int x = 0; x < 1000000; x++) mod511[x] = x % 511; 
```

而不是使用

```
c = 758 % 511; 
```

你用

```
c = mod511[758]; 
```

这将花费您（可能很多）内存，并且如果您也想将它用于非常大的数字，显然将无法正常工作。但它更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T13:15:48.257

如果您必须对大量数据重复这两个模数运算并且您的 CPU 支持 SIMD（例如 Intel 的 SSE/AVX/AVX2），那么您可以对这些运算进行矢量化，即并行对许多数据进行运算。您可以通过使用内在函数或内联汇编来做到这一点。是的，解决方案将是特定于平台的，但也许这很好......

# c - 为什么我在 C 中看到重新定义错误？

> ID：10259939
> 
> 赞同：1
> 
> 时间：2012-04-21T14:45:07.457
> 
> 标签：c, visual-studio

以下是我的代码，我正在尝试在 Visual Studio 中运行它。

```
#include <stdio.h>
#include <conio.h>
int main()
{
    //int i;
    //char j = 'g',k= 'c';
    struct book 
    {
        char name[10];
        char author[10];
        int callno;
    };
    struct book b1 = {"Basic", "there", 550};
    display ("Basic", "Basic", 550);
    printf("Press any key to coninute..");
    getch();
    return 0;
}

void display(char *s, char *t, int n)
{
    printf("%s %s %d \n", s, t, n);
} 
```

它在键入函数的左大括号的行上给出重新定义错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:46:47.017

您在声明之前调用`display`它，在这种情况下，编译器假定返回类型是`int`，但您的返回类型是`void`。

在使用之前声明函数：

```
void display(char *s, char *t, int n);
int main() {
    // ... 
```

另请注意，您将其声明为接收`char*`，但将字符串文字传递给它（`const char*`）要么更改声明，要么更改参数，例如：

```
void display(const char *s, const char *t, int n);
int main()
{
    // snip
    display ("Basic", "Basic", 550);
    //snap
}

void display(const char *s, const char *t, int n)
{
    printf("%s %s %d \n", s, t, n);
} 
```

# javascript - 如何使用原型来避免在 javascript 中复制函数？

> ID：10259943
> 
> 赞同：0
> 
> 时间：2012-04-21T14:45:44.020
> 
> 标签：javascript

我编写了这段代码来模拟 OOP 继承并在 javascript 中调用基类，它可以工作：

```
function Animal(name,age)
  {
    this._name = name; 
    this.setName = function (name) { this._name = name }
    this.getName = function() { return this._name }
  }

  function Cat(name,age)
  {
    Animal.call(this,name,age); // call baseclass constructor
    this.getName = function() { return Cat.prototype.getName.call(this)+", a cat" }
  }
  Cat.prototype = new Animal(); // will create the baseclass structure

  /// *****  actual execution  *****
  var puss = new Cat("Puss",3);
  var cheshire = new Cat("Cheshire",10);
  // do some actions
  console.log ( puss.getName() );
  // change cat's name
  puss.setName("Puss in boots");
  alert ( "new name -->"+puss.getName() ); 
```

问题是，对于“new Cat()”的每个实例，“getName”和“setName”函数都会被复制。我已经阅读了很多关于原型设计的文章，但没有一篇涉及调用基类函数的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:55:44.783

您应该将方法分配给函数的原型，例如，

```
function Animal(name, age) {
    this._name = name;
    this._age = age;
}
Animal.prototype.getName = function () { return this._name; }
Animal.prototype.setName = function (value) { this._name = value; }

function Cat(name, age) {
    Animal.call(this, name, age);
}
Cat.prototype = new Animal();
Cat.prototype.getName = function () { 
    return Animal.prototype.getName.call(this) + ", a cat"; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:02:14.610

您在寻找`__proto__`哪些存储原型数据？ [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/Proto)

如果你这样做，`console.log(puss.__proto__.getName)`你会得到似乎是“基类”功能，但我不确定这是如何跨浏览器的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:01:18.107

来自[http://phrogz.net/js/classes/OOPinJS2.html](http://phrogz.net/js/classes/OOPinJS2.html)

> Javascript 没有任何指向其父类的“超级”属性。相反，您使用 Function 对象的 call() 方法，它允许您使用不同的对象作为它的上下文来运行函数。如果您需要将参数传递给此函数，它们将在“this”之后。

在您的情况下，它与“方法”的功能相同，因此您可以执行以下操作：

```
Animal.prototype.setName.call(this, name); 
```

# netbeans - Netbeans：如何将文件上传到不同的文件夹？

> ID：10259945
> 
> 赞同：0
> 
> 时间：2012-04-21T14:45:59.667
> 
> 标签：netbeans, ftp, directory, sftp, file-upload

我想在 Netbeans 中上传文件，例如从：`C:/my_folder`在我的计算机中到`/home/public_html`服务器上的文件夹中。我已将初始路径指定为`/home`并将上传目录指定为`/public_html`，并且在属性中我的路径如下所示`sftp://host.name.com/home/public_html`：

但是当我上传文件时，我发现它们在`/home/public_html/my_folder`......如何修复它？因为我已经尝试了属性中的所有选项，但仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:52:28.647

您必须创建一个新项目并将项目文件夹设置为`C:/my_folder`. 将您的上传路径设置`/home/public_html`为您所拥有的。

现在，如果您有一个文件`C:/my_folder/x.html`，它将被上传到`/home/public_html/x.html`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T17:09:29.003

这是从 Netbeans 上传文件的分步说明。

[http://www.gridsandguides.com/blog/how-to-use-net-beans-to-edit-file-on-server](http://www.gridsandguides.com/blog/how-to-use-net-beans-to-edit-file-on-server)

# jquery - 我想用 .load 将页面内容加载到变量中，然后发出警报

> ID：10259948
> 
> 赞同：0
> 
> 时间：2012-04-21T14:46:15.540
> 
> 标签：jquery

但下面的代码不起作用。提交.php：回声“嗨”；

```
<script type="text/javascript">
$(document).ready(function(){
$("#button").click(function(){
    var input;
    input.load("submit.php");       
    alert(input);
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:47:44.080

[请在此处](http://api.jquery.com/jQuery.post/)查看 jquery $.post

[另请在此处](http://jqapi.com)查看 jquery api 文档以获取更多参考

通常 ajax 请求看起来像这样

```
$.ajax({
  type: 'POST',
  url: 'sample.php',
  data: data,
  success: function(response){ alert(response); },
  dataType: dataType
}); 
```

`sample.php`

```
<?
    echo "hai";
?> 
```

$.load 的演示**[在这里](http://jsfiddle.net/dhirajbodicherla/ntfGk/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:49:38.797

你必须像这样使用 .load()

```
$('#result').load('ajax/test.html'); 
```

不向 var 返回任何内容。利用 jQuery 的[.post](http://api.jquery.com/jQuery.post/)、[.get](http://api.jquery.com/jQuery.get/)、[.ajax](http://api.jquery.com/jQuery.ajax/)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:57:32.693

首先，您应该了解 jQuery 是一个扩展 javascript 功能的框架。要使用它，您必须拥有 jquery 对象。您已经声明了 javascript 变量，并尝试在其上调用 jquery 函数。

如果你想要一个带有结果的变量，你可以这样做：

```
jQuery.get("submit.php", function(response) {
   //here you have response that contains submit.php response
   alert(response);
}); 
```

抱歉，我刚刚注意到@Dhiraj 的回答。这个方法做同样的事情只使用get 女巫可以通过将“POST”切换为“GET”来完成他的回答。

# javascript - 速记加法运算符和速记 If/Else - Javascript

> ID：10259954
> 
> 赞同：1
> 
> 时间：2012-04-21T14:46:35.613
> 
> 标签：javascript, if-statement, addition, shorthand

是否可以同时使用加/减运算符`number += 1` 的简写和 if / else 的简写`number = (true ? 1 : 0);`？

条件应决定加法或减法。

像这样：`number = (true ? +=1 : -=1);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:52:21.387

你可以使用这样的东西：

```
number += 1 * (condition ? 1 : -1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:54:06.990

如果要使用`+=`运算符，则需要首先声明变量，否则无法工作。如果你有它，那么你可以简单地拥有：

```
number += condition ? 1 : -1; 
```

请注意，如果您只有数字`1`and `-1`，并且`condition`是布尔值，您可以执行以下操作：

```
number += +condition || -1; 
```

准确地说，是返回`1`的`true`东西和其他的东西`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:54:47.763

这应该有效并且具有添加或减去操作的效果

```
var number = 0;
number += (condition) ? (1 * (<operation>)) : (-1 * (<operation>)); 
```

# matlab - 如何以图形方式表示数据

> ID：10259959
> 
> 赞同：0
> 
> 时间：2012-04-21T14:46:57.877
> 
> 标签：matlab, graph

我有 100 个传感器会出现故障。将进行 100 次运行。在每一轮中，将计算所有传感器值的平均值，并找出与正常值的偏差。

偏差可以是：0 1 2 3 4 或 5 偏离正常值。

还将在每一轮计算活动传感器的数量。如何使用matlab以图形方式显示这3个数据？我需要使用 3d 绘图吗？

1.  正确的传感器

2.  仍在运行（未死）

3.  & 所有 100 轮

即我需要在每一轮中查看每轮的平均值与正常值的偏差，一些传感器可能已经失效，所以我还需要包括平均值来自 100-x 传感器。

如何显示它？

3D太复杂而无法阅读，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:00:09.777

由于传感器的身份似乎并不重要（即您正在获得功能/正确传感器的*数量*），我认为您不需要 3d 图。这个怎么样：

```
correct = .... (size: 100-by-1)
functioning = .... (size: 100-by-1)
bar([correct functioning - correct], 'stacked');
legend('Correct', 'Functioning');
xlabel('Run');
ylabel('Sensor Count'); 
```

这将显示 100 个柱 - 每次运行一个。条的顶部将是功能传感器的数量，其下方将有一个条指示这些功能条中有多少是正确的。

我假设传感器必须正常工作才能正确 - 所以`all(functioning > correct) = true`

如果您不喜欢堆叠条（它们可能不明确），那么您可以将`bar(...)`命令替换为：

```
bar([correct functioning]); 
```

* * *

现在看这个问题，我认为 3-D 情节可能是最好的：

```
correct = ... (size: 100-by-1)
functioning = ... (size: 100-by-1)
deviation = ... (size: 100-by-1)
scatter3(correct, functioning, deviation);
xlabel('Correct');
ylabel('Functioning');
zlabel('Deviation'); 
```

尽管查看正确的功能传感器的比例可能也很有意义，但在这种情况下，您可以进行 2-D 散点图：

```
scatter(correct ./ functioning, deviation); 
```

# javascript - 以 W 开头的 Javascript、CSS、HTML5 IDE

> ID：10259960
> 
> 赞同：2
> 
> 时间：2012-04-21T14:46:58.483
> 
> 标签：javascript, ruby, html, css

几周前我发现了一个很棒的新 IDE，并将它安装在我的 Windows 笔记本电脑上。然后我决定在我的 Linux 笔记本电脑上设置它会更好。我从 Windows 上卸载了它，最近有机会尝试在我的 Linux 上下载它。现在我在任何地方都找不到它。它基于 javascript，我也相信 Ruby。它以 W 开头，是一个愚蠢的名字。Wandaba 或 Wandava 或类似的东西。它有一个非常流畅和简单的设计。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T14:51:32.133

我很确定你指的是[瓦坎达](http://www.wakanda.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:51:48.460

[WebStorm ，在](http://www.jetbrains.com/webstorm/)[此 Google 搜索](http://www.google.com/#q=html+ide+for+windows)的第一页上找到。

# python - Python 嵌套列表 - 更改和替换单个项目

> ID：10259961
> 
> 赞同：-1
> 
> 时间：2012-04-21T14:47:00.617
> 
> 标签：python, list, nested

我正在完成一个简单的编程练习（我还是新手），通过将 30 个点分配给 4 个不同的角色属性来创建角色配置文件。程序功能包括：显示当前配置文件、创建新配置文件或更改现有配置文件。第一个和第二个功能工作正常，但最后一个有问题：程序旨在解压缩嵌套列表项（属性+分配的分数），要求新的分数，取新旧之间的差值并更改数字池中相应的可用点数。最后，在列表的位置 0 处添加一个新条目（属性 + 新分配的分数），然后删除位置 1 处的条目，它应该是该属性的旧条目。遍历列表，完成。但是，一旦您执行代码，您会发现它不起作用。请看下面的完整代码：

```
options = ["Strength", "Health", "Wisdom", "Dexterity"]
profile = []
points = 30

choice = None
while choice != "0":

    print(
        """
    CHARACTER CREATOR PROGRAM

    0 - Exit
    1 - See current profile
    2 - Build new profile
    3 - Amend existing profile

    """
        )

    choice = input("Please choose an option: ")
    print()

    if choice == "0":
        print("Good bye.")
    elif choice == "1":
        for item in profile:
            print(item)
        input("\nPress the enter key to continue.")
    elif choice == "2":
        print("You can now equip your character with attributes for your adventures.")
        print("You have",points,"points to spent.")
        print("Now configure your character: \n")
        #Run the point allocation loop
        for item in options:
            point_aloc = int(input("Please enter points for " + str(item) + ":"))
            if point_aloc <= points:
                entry = item, point_aloc
                profile.append(entry)
                points = points - point_aloc
                print("\nYour current choice looks like this: ")
                print(profile)
                input("\nPress the enter key to continue.")
            else:
                print("Sorry, you can only allocate", points," more points!")
                print("\nYour current choice looks like this: ")
                print(profile)
                input("\nPress the enter key to continue.")
        print("\nWell done, you have configured your character as follows: ")
        for item in profile:
            print(item)
        input("Press the enter key to continue.")
    elif choice == "3":
        print("This is your current character profile:\n")
        for item in profile:
            print(item)
        print("\nYou can change the point allocation for each attribute.")
        for item in profile:
            point_new = int(input("Please enter new points for " + str(item) + ":"))
            attribute, points_aloc = item
            diff = points_aloc - point_new
            if diff >0:
                points += diff
                print("Your point allocation has changed by", -diff,"points.")
                print(diff,"points have just been added to the pool.")
                print("The pool now contains", points,"points.")
                entry = item, point_new
                profile.insert(0, entry)
                del profile[1]
                input("Press the enter key to continue.\n")
            elif diff <0 and points - diff >=0:
                points += diff
                print("Your point allocation has changed by", -diff,"points.")
                print(-diff,"points have just been taken from the pool.")
                print("The pool now contains", points,"points.")
                entry = item, point_new
                profile.insert(0, entry)
                del profile[1]
                input("Press the enter key to continue.\n")
            elif diff <0 and points - diff <=0:
                print("Sorry, but you don't have enough points in the pool!")
                input("Press the enter key to continue.\n")
    else:
        print("Sorry, but this is not a valid choice!")
        input("Press the enter key to continue.\n")

input("\n\nPress the enter key to exit.") 
```

注意：您需要先创建配置文件才能运行更改。

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:37:57.087

正如对您问题的评论所表明的那样，您没有以最好的方式提出您的问题。但是，我知道它有什么问题。我可以向您展示如何修复您当前的代码，但事实是修复它的*最佳*方法是完全重写它。当你这样做时，你应该采取以下策略：

1.  把你的代码分成几部分。在这种情况下，我建议您创建几个不同的函数。可以调用一个`main_loop`，并且将包含用于循环菜单的逻辑。它不包含任何用于更新或显示配置文件的代码。相反，它会调用其他函数`display_profile`、`build_profile`和`amend_profile`。这些函数将接受诸如 、 和 之类的变量`options`，`profile`并`points`返回诸如`options`和之类的值`points`。这将极大地简化您的代码，并使测试和调试变得更加容易。`main_loop`这是一个可能看起来像的示例：

    ```
    def main_loop():
        options = ["Strength", "Health", "Wisdom", "Dexterity"]
        profile = []
        points = 30

        choice = None
        while choice != "0":
            print(menu_string)   #define menu_string elsewhere
            choice = input("Please choose an option: ")
            print()

            if choice == "0":
                print("Good bye.")
            elif choice == "1":
                display_profile(profile)
            elif choice == "2":
                profile, points = build_profile(options, profile, points)
            elif choice == "3":
                profile, points = amend_profile(profile, points)
            else:
                print("Sorry, but this is not a valid choice!")
                input("Press the enter key to continue.\n")

        input("\n\nPress the enter key to exit.") 
    ```

    看看这有多好？现在您所要做的就是定义其他函数。就像是...

    ```
     def build_profile(options, profile, points):
            # insert logic here
            return profile, points 
    ```

    这种方法的另一个优点是现在您可以单独测试这些功能，而无需运行整个程序。

2.  使用正确的习语进行列表修改。在迭代列表时修改列表需要特别小心，并且在某些情况下（例如，当您通过删除或添加已经迭代的项目来更改列表的长度时）它根本不起作用。有很多方法可以做您尝试做的事情`profile`，但对于初学者来说，我会推荐一些更简单的方法：只需创建一个新列表！然后返回该列表。所以在你的`amend_profile`函数中，做这样的事情：

    ```
     def amend_profile(profile, points):
            # other code ...
            new_profile = []
            for item in profile:
                attribute, points_aloc = item
                # other code ...
                new_proflie.append(entry)
            # other code ...

            return new_profile, points 
    ```

    另请注意，这是您的主要错误之一；你创建了一个`entry`包含`(item, point_new)`而不是，所以你的新元组里面`(attribute, point_new)`有一个元组，而不是预期的一个单独的字符串。`item``attribute`

# codeigniter - 获取 Codeigniter 中数据库错误的实际行号（或文件名）

> ID：10259964
> 
> 赞同：1
> 
> 时间：2012-04-21T14:47:12.870
> 
> 标签：codeigniter, codeigniter-2

当您在 codeigniter 中的 sql 语句出现错误时，您会收到如下消息：-

```
 A Database Error Occurred

Error Number: 1096

- some sql -

Filename: \system\database\DB_driver.php

Line Number: 334 
```

这一切都很好，但是当您为单个页面运行大量语句时，了解哪一行代码生成了查询会有所帮助。

如何获取生成查询的`model`和`method`（或文件名）的名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T14:51:57.003

我在这里回答我自己的问题，因为我找到了一个用于调试目的的快速而肮脏的解决方案。我强烈建议保留 CI 系统文件，这应该只用于调试。当我有时间时，我可能会为 CI 编写一个扩展来执行此操作。

**CI 2 的解决方案：-**

去编辑`system\database\DB_driver.php`并添加以下代码`line 321`： -

```
echo "<pre>";
debug_print_backtrace();
echo "</pre>"; 
```

# asp.net - Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

> ID：10259965
> 
> 赞同：1
> 
> 时间：2012-04-21T14:47:15.520
> 
> 标签：asp.net, vb.net

谁能帮我解决这个 VB 代码：

```
 <%If (Eval("NewPrice")) =0 Then%>
                        <% Session("OrigenalPrice") = True%>
                        <asp:Label ID="Pricelabel" runat="server" Text='<%# Eval("Price") %>' />
                        <%Else%>
                        <% Session("OrigenalPrice") = False%>
                        <asp:Label ID="NewPricelabel" runat="server" Text='<%# Eval("NewPrice") %>' />
                        <asp:Label ID="OldPricelabel" runat="server" Text='<%# Eval("Price") %>' />
                        <%End If%> 
```

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:51:14.813

[在这里](https://stackoverflow.com/questions/2571545/databinding-methods-such-as-eval-xpath-and-bind-can-only-be-used-in-the)你会找到答案（你应该把这`<%If (Eval("NewPrice")) =0 Then%>`部分移到后面的代码中）。

# ssis - 如何将文件中的 mm/dd/yyyy 值导入 yyyy-mm-dd 格式的数据库字段？

> ID：10259968
> 
> 赞同：3
> 
> 时间：2012-04-21T14:47:37.473
> 
> 标签：ssis

我有一个 CSV 文件，其日期列采用以下格式*mm/dd/yyyy* (4/20/2012)，我需要将此列加载到日期时间列在*yyyy-mm-dd* (2012-04- 20)。

我为此目的使用了派生列转换，并像这样写和表达

```
(DT_WSTR)(SUBSTRING(ReceivedDateTime,1,4) + "-" + 
SUBSTRING(ReceivedDateTime,5,2) + "-" + SUBSTRING(ReceivedDateTime,7,2)) 
```

运行我的包后，它会抛出错误*`Unable to perform type cast`*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T15:57:15.783

如果来自 CSV 文件的传入值始终采用`04/20/2012`( `MM/DD/YYYY`) 格式，那么您不必执行任何类型转换。您只需配置平面文件连接管理器以将文件中的值视为`date`数据类型。

假设您的 CSV 文件看起来像这样，其中有一列包含 .

![CSV 文件](../Images/242773140e3281614c914b6372ebcdbd.png)

在 SSIS 包中，创建一个平面文件连接管理器来读取 CSV 文件。我将 CSV 存储在路径中`C:\temp\Source.csv`

![平面文件源通用部分](../Images/6b31e9e58eb99e69c639e3a29bca1bce.png)

在该`Advanced`部分中，您会注意到平面文件连接管理器将第一列命名为`Column1`，并且 DataType 属性设置为`string [DT_STR]`。但是，文件中的值实际上是日期。您可以手动配置数据类型或单击**`Suggest Types...`**按钮。

![高级建议类型](../Images/469875ea15b5c813314f7922a1f9d47c.png)

在*Suggest Column Types*上，保留默认值并单击*OK*。这将读取文件的前 100 行，并根据文件中可用的数据确定列类型。

![建议列类型](../Images/fdcd3d28c4bc1c2dc20ed1664ef71560.png)

单击`OK`“*建议列类型*”对话框后，您会注意到平面文件连接管理器上的数据类型`Column 0`已更改为**`date [DT_Date]`**. 单击*确定*以配置平面文件连接管理器。您还可以根据您的要求重命名该列（例如*InvoiceDate*或*OrderDate*等）

![数据类型已更改](../Images/01b78e0a10ed6219b2930d20d6bc003f.png)

现在您已经配置了平面文件连接管理器，您可以在数据流任务的平面文件源中使用它来读取数据并填充您的数据库。因此，无需使用派生列转换来操作值。

但是，如果您传入的文件值是类似的字符串`120420 (YYMMDD)`，则这些值不能配置为日期数据类型。在这些情况下，您需要按照[**此答案中的建议**](https://stackoverflow.com/a/10243846/756519)使用派生列转换。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T22:18:18.910

如果您的传入值是一个字符串`20140106(YYYYMMDD)`，那么使用 () 对语句进行类型转换`DDT_DBDATE`将引发错误。我遇到了这个问题，所以我取出了类型转换，映射看起来像这样：

```
(LEN(TRIM(SUBSTRING([Screening Date],1,8))) > 0 ? (SUBSTRING([Screening Date],1,4) + "/" + SUBSTRING([Screening Date],5,2) + "/" + SUBSTRING([Screening Date],7,2)) : NULL(DT_WSTR,5)) 
```

后来我添加了一个数据转换转换并将其更改为数据库时间戳，它对我有用。您也可以将其更改为键入 date( `DT_DATE`)。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T09:13:11.570

尝试以下，（我成功地做到了）

```
(LEN(TRIM(SUBSTRING(ReceivedDateTime,1,8))) > 0 ? (DT_DBDATE)(SUBSTRING(ReceivedDateTime,1,4) + "-" + SUBSTRING(ReceivedDateTime,5,2) + "-" + SUBSTRING(ReceivedDateTime,7,2)) : (DT_DBDATE)NULL(DT_WSTR,5)) 
```

只需使用 (DT_DBDATE) 对语句进行类型转换。如果该位置没有日期，即如果接收到的字符串的位置 1 到 8 为空，那么它也会设置为 NULL。

# objective-c - 为 mac 创建一个可定制的 GUI 有多难？

> ID：10259969
> 
> 赞同：2
> 
> 时间：2012-04-21T14:47:41.530
> 
> 标签：objective-c, xcode, macos, cocoa

我的意思是，如果用户愿意，以允许标准 OS X 外观和自定义外观（从图像文件加载）的方式重写/扩展默认 AppKit 控件将涉及多少工作？（想想 WinAmp 或 Windows Media Player。）有没有人试图把它带到 Mac 上？

我了解如何重绘一个`NSWindow`或一个纽扣电池，但这都是硬编码的。我想要用户可以添加到自己的东西。我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T16:31:00.713

嗯，它真的需要从头开始重新绘制您需要的所有自定义组件，无论是在代码中还是使用图像。AppKit 并不是要定制的，因为它严格遵循 Apple 的[人机界面指南](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)；Apple 希望在所有原生应用程序中创建一个一致的 UI 隐喻。

这在实践中意味着您将不得不做很多自定义绘图来为您的应用程序设置主题。使用图像使事情变得更容易，但不是太多。如果您想要一个自定义按钮，您必须创建一个子类`NSButton`并`NSButtonCell`加载您想要和绘制的图像（查看`NSDrawThreePartImage()`并`NSDrawNinePartImage()`了解如何更轻松地绘制可调整大小的按钮）。要主题化`NSWindow`，您必须子类`NSThemeFrame`化，这是一个绘制标准 OS X 窗口外观的半私有类。

本质上，您只需要进行大量子类化即可获得所需的外观。可能吗？绝对地。推荐还是容易做？没那么多。

* * *

当然，你必须问这是否真的有必要。HIG 的重点是尝试在 OS X 上创建一种标准外观。如果没有熟练地完成，主题外观可能会很俗气，甚至可能会让习惯于默认 OS X 外观的用户感到困惑。如果你想包含 UI 主题，通常需要有充分的理由（要么保持跨平台兼容性，但在这种情况下，所有 HIG 规则都不在窗外；要么实现特定的外观，là 游戏UI），但我真的不建议这样做，更不用说让用户自己自定义您的 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T20:30:49.057

是的，这完全有可能。但是您确定要使用 AppKit 来执行此操作吗？也许更好地使用像 QT 这样支持通过 CSS 换肤的跨平台解决方案？

# ios - 在iOS上，如何实现流畅的动画？

> ID：10259972
> 
> 赞同：4
> 
> 时间：2012-04-21T14:47:56.193
> 
> 标签：ios, animation, opengl-es, cocos2d-iphone

是不是Angry Birds或者Cut the Rope都是先画全屏的整帧（全视图），再把整帧画到屏幕上，让动画流畅？

这是因为如果我们为一个大小为 20 x 20 像素的金属球设置动画，并且如果我们先擦除球，然后在新位置绘制球，那么可能会出现一些非常微妙但很明显的闪烁。

如果它是由 动画制作的`drawRect`，这将擦除整个屏幕，然后在它们的新位置绘制所有内容，这可能比上面的闪烁更多？

回到绘制全帧的方法：如果一个球在坐标（100,100），现在球被绘制在整个屏幕截图的顶部（新背景暴露），坐标（103,100），那么它是变化非常不明显。（根本没有消失然后再次出现）。

如何实现看起来像愤怒的小鸟或割绳子游戏的流畅动画？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T15:09:35.433

他们使用 OpenGL，这*比*任何 Quartz 方法（即 drawRect）都要快得多，因为它使用 GPU 而不是 CPU 进行渲染。使用 Quartz 可能会慢数百或数千倍，具体取决于您正在做什么。

如果你不想求助于 OpenGL。您可以将对象放在 UIView 中，然后对其进行动画处理。只要视图的内容是静态的，这对于大多数应用程序来说已经足够快了。例如，将背景设置为视图，将金属球设置为视图，您可以移动该视图并实现非常流畅的动画而不会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T01:17:36.147

如果应用程序使用 OpenGL，答案是肯定的，它会在帧缓冲区呈现到屏幕**之前进行渲染。**我认为在将完成的图像传输到屏幕之前，绘制到屏幕的其他方法使用相同的绘制到屏幕外缓冲区的技术，但我对此不太确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T17:18:17.133

使用 CALayers。它们比视图更轻量级。

# android - Android - 试图制作一个滚动视图并且它正在崩溃

> ID：10259976
> 
> 赞同：0
> 
> 时间：2012-04-21T14:48:10.583
> 
> 标签：android, android-layout

我有这样的看法：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<ScrollView
     xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"    >    

<TextView
    android:id="@+id/page_exlain"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text here"
    android:layout_marginTop ="20dp" 
    />          

<TextView
    android:id="@+id/exec_summary_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp" 
        android:text="1) EXECUTIVE SUMMARY"
    />
<TextView
    android:id="@+id/exec_summary_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here."
    android:layout_marginTop ="10dp"    
    />              

<TextView
    android:id="@+id/product_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp"    
        android:text="2) YOUR PRODUCT OR SERVICE"
    />
<TextView
    android:id="@+id/product_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here......"
    android:layout_marginTop ="10dp"    
    />    

</ScrollView>

</LinearLayout> 
```

这崩溃了。知道为什么吗？我不确定如何使整个页面可滚动。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:51:24.663

scrollview 只能有一个直接子级

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<ScrollView
     xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"    >    

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<TextView
    android:id="@+id/page_exlain"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text here"
    android:layout_marginTop ="20dp" 
    />          

<TextView
    android:id="@+id/exec_summary_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp" 
        android:text="1) EXECUTIVE SUMMARY"
    />
<TextView
    android:id="@+id/exec_summary_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here."
    android:layout_marginTop ="10dp"    
    />              

<TextView
    android:id="@+id/product_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp"    
        android:text="2) YOUR PRODUCT OR SERVICE"
    />
<TextView
    android:id="@+id/product_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here......"
    android:layout_marginTop ="10dp"    
    />    

</LinearLayout>
</ScrollView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T14:54:26.563

您需要将您的文本视图放在另一个布局中，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<ScrollView
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"    >    

<LinearLayout 
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<TextView
    android:id="@+id/page_exlain"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text here"
    android:layout_marginTop ="20dp" 
    />          

<TextView
    android:id="@+id/exec_summary_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp" 
        android:text="1) EXECUTIVE SUMMARY"
    />
<TextView
    android:id="@+id/exec_summary_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here."
    android:layout_marginTop ="10dp"    
    />              

<TextView
    android:id="@+id/product_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp"    
        android:text="2) YOUR PRODUCT OR SERVICE"
    />
<TextView
    android:id="@+id/product_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here......"
    android:layout_marginTop ="10dp"    
    />    

</LinearLayout>

</ScrollView>

</LinearLayout> 
```

（您需要删除`xmlns:android="http://schemas.android.com/apk/res/android"`Scrollview 上的行）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:52:43.420

像这样使用它

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<ScrollView
     xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"    >  

  <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<TextView
    android:id="@+id/page_exlain"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text here"
    android:layout_marginTop ="20dp" 
    />          

<TextView
    android:id="@+id/exec_summary_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp" 
        android:text="1) EXECUTIVE SUMMARY"
    />
<TextView
    android:id="@+id/exec_summary_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here."
    android:layout_marginTop ="10dp"    
    />              

<TextView
    android:id="@+id/product_heading"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@color/light_best_blue"
    android:layout_marginTop ="10dp"    
        android:text="2) YOUR PRODUCT OR SERVICE"
    />
<TextView
    android:id="@+id/product_text"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Lots of text goes here......"
    android:layout_marginTop ="10dp"    
    />    

</LinearLayout>

</ScrollView>

</LinearLayout> 
```

原因是`ScrollView`Android 中的 a 一次只能托管 1 个孩子。因此，您必须将所有`TextView`要滚动的 s`LinearLayout`再次像 a 一样放入 Container 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T15:20:54.250

看看这些关于创建简单列表视图和复杂自定义列表视图的简单示例。

[在android中创建滚动ListView](http://www.coderzheaven.com/2011/03/12/creating-scrolling-listview-in-android/)

而这个更复杂。

[带有图标的 Android 列表视图](http://www.coderzheaven.com/2011/03/25/android-image-listview/)

在-android/

# xml - xslt 转换链接

> ID：10259977
> 
> 赞同：-2
> 
> 时间：2012-04-21T14:48:12.850
> 
> 标签：xml, xslt, xsd, hyperlink

我试图通过单击表中的元素来弄清楚如何使用 xml 文件上的 xslt 转换来更改 html 页面。我环顾四周，找不到答案，这是一个简单的代码，我想知道如何更改页面并显示一些内容：我认为您没有必要阅读代码，除了最后一个，XSLT。我已经添加了代码的其他部分，以防它们也需要一些更改。

XSD：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3schools.com"
 xmlns="http://www.w3schools.com">

 <xs:element name="Table">
 <xs:complexType>
 <xs:sequence maxOccurs="unbounded">
 <xs:element ref="Person"/>
 </xs:sequence>
 </xs:complexType>
 </xs:element>
 <xs:element name="Person">
 <xs:complexType>
 <xs:all maxOccurs="1">
 <xs:element ref="Name"/>
 <xs:element minOccurs="1" ref="Age"/>
 </xs:all>
 </xs:complexType>
</xs:element>
<xs:element name="Name">
 <xs:complexType>
 <xs:sequence>
 <xs:element maxOccurs="1" ref="theName"/>
 <xs:element maxOccurs="1" ref="Description"/>
 </xs:sequence>
 </xs:complexType>
 </xs:element>
 <xs:element name="theName" type="xs:string"/>
 <xs:element name="Description" type="xs:string"/>
 <xs:element abstract="false" name="Age" type="xs:positiveInteger"/>
 </xs:schema> 
```

所以我创建了两个元素，theName 和 age。名称由字符串 TheName 和字符串描述组成。年龄只是一个正整数。现在我创建了一个 XML 文件，它只选择了两个不同的人：

XML:

```
 <?xml version="1.0" encoding="UTF-8"?>
 <?xml-stylesheet type="text/xsl" href="try.xsl"?>
 <Table xmlns="http://www.w3schools.com"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.w3schools.com try.xsd">
 <Person>
 <Name>
 <theName>Thomas</theName>
 <Description>He is a nice guy</Description>
 </Name>
 <Age>10</Age>
 </Person>

 <Person>
 <Name>
 <theName>Peter</theName>
 <Description>He is good at swimming</Description>
 </Name>
 <Age>12</Age>
 </Person>

 </Table> 
```

我现在的转变是做一个表格，上面有年龄函数的人的名字：

XSLT：

```
 <?xml version="1.0" encoding="UTF-8"?>

 <xsl:stylesheet

 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ws="http://www.w3schools.com"
 version="1.0"> 

 <xsl:template match="/">
 <html>

 <table border="2">
 <tr bgcolor="red">
 <th>Name</th>
 <th>Age</th>
 </tr>
 <xsl:for-each select="ws:Table/ws:Person">
 <tr>

 <td><xsl:value-of select="ws:Name/ws:theName"/></td>
 <td><xsl:value-of select="ws:Age"/></td>

 </tr>
 </xsl:for-each>
 </table> 
```

这是我需要帮助的地方，如果我单击此人的姓名，如何显示此人的描述。所以基本上，如果我点击 Thomas，我想显示“他是个好人”，如果我点击 Peter，我想显示“他是个游泳好手”。

```
 </html>
 </xsl:template>
 </xsl:stylesheet> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T16:00:33.660

XSLT 脚本将生成一个文本文件，在本例中是一个 HTML（Web）页面，而该文件又将由另一个应用程序（Web 浏览器）解释。有关如何创建具有流畅交互的动态网页的信息，请查看[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)和[JavaScript](http://en.wikipedia.org/wiki/JavaScript)教程。

# c# - XP上的WPF文本太模糊

> ID：10259982
> 
> 赞同：1
> 
> 时间：2012-04-21T14:48:47.020
> 
> 标签：c#, wpf, windows-xp

我有一个问题：在我的 WPF 应用程序中的 xp 上文本太模糊，我该如何解决这个问题？在 Windows 7 上一切正常！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T14:51:36.083

如果是 WPF4，请尝试将：`TextOptions.TextFormattingMode="Display"`附加属性附加到带有文本的窗口。

# hibernate - 这个 HQL 查询有什么问题？

> ID：10259984
> 
> 赞同：2
> 
> 时间：2012-04-21T14:48:51.410
> 
> 标签：hibernate, nhibernate, hql

尝试 HQL，总 NHibernate n00b。

```
public IEnumerable<Log> GetLast(int numRecords, string severity)
{
    var query = _Session.CreateQuery(
        "from Log as l inner join fetch l.UserProfile order by l.TimeStamp desc where l.Severity in (:severities)")
        .SetParameterList("severities", Translator.SeverityOrHigher(severity))
        .SetMaxResults(numRecords)
        .Enumerable<Log>();

    return query;
} 
```

`Translator.SeverityOrHigher`返回一个`IList<string>`.

我有一个对象以多对一的方式`Log`引用一个对象。这些对象分别以和`UserProfiles`的形式保存在数据库中。`Logs``UserProfiles`

我收到以下异常`var query = ...`：

```
Exception of type 'Antlr.Runtime.MismatchedTokenException' was thrown. 
```

我什至不知道这意味着什么，而且谷歌搜索并不是特别有用。我不知道 HQL 是否有问题，或者我设置它的方式有问题。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:10:12.360

我已经很久没有使用 NHib 了……你有没有尝试在最后按语句排序？可能它是这样工作的，我总是把它放在最后。

# java - Java - 访问在 Windows Azure 上运行的 MongoDB 服务器

> ID：10259985
> 
> 赞同：2
> 
> 时间：2012-04-21T14:48:51.637
> 
> 标签：java, mongodb, azure

我正在开发一个将使用在 Windows Azure 上运行的 MongoDB 的应用程序。此页面[http://www.mongodb.org/display/DOCS/MongoDB+on+Azure](http://www.mongodb.org/display/DOCS/MongoDB+on+Azure) on MongoDB 指的是一个 VisualStudio 解决方案，它具有帮助类来访问 mongo 服务器设置和部署/配置 mongo 实例。是否有基于 Java 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:34:27.467

开箱即用的 10gen 提供的解决方案只是一个 .net / Visual Studio 版本，它创建了一个具有多个 Worker Role 实例的 Replica Set。然后，您需要添加其他角色来运行您的应用程序（例如 Web 角色中的基于 IIS 的 Web 应用程序，或工作角色中的基于 Tomcat 的 Java 应用程序）。

您将遇到的问题：您需要：

*   在 Eclipse 中进行 Java 开发
*   生成 WAR 文件
*   在 Visual Studio 中的 Worker Role 中创建您的 java*脚手架*，它解压缩 Tomcat 和 JRE，将您的 WAR 文件复制到适当的目录，设置环境并启动 Tomcat。

如果你想完全放弃 Visual Studio，你需要从你的 Java 启动脚本中配置和启动 mongod.exe。当您从 Eclipse 创建 Windows Azure 项目时，您会看到有几个示例启动脚本：一个用于 JBoss，一个用于 Tomcat，等等。选择与您正在使用的匹配的一个，将其复制到主项目启动脚本。然后您可以自定义它以获取 mongod.exe 并启动它。创建一个独立的 MongoDB 实例应该非常简单，但是您需要做很多工作来构建一个副本集。10gen 还没有为此构建的开箱即用的 Java 项目。

# ruby-on-rails - 签入查看用户所在的页面

> ID：10259999
> 
> 赞同：2
> 
> 时间：2012-04-21T14:50:31.370
> 
> 标签：ruby-on-rails

Rails 中是否有任何方法可以检查用户当前正在查看的页面？

我的例子：在我网站的 head 部分，我需要知道用户是否打开了博客文章。如果用户正在查看帖子，则需要在头部部分添加 facebook 打开图元标记，因为用户可以选择喜欢该博客帖子。

如果有人可以帮助我，那将是无价的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T23:22:39.913

正如其他答案所提到的，您可以通过检查`request`对象或`params`哈希来检查当前页面。

但是有更好的方法来设置 Facebook 元标记，而无需明确检查页面上下文。`content_for`辅助方法在这里是一个完美的选择。请参阅此处的文档：http: [//api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)

基本上，`content_for`将块作为参数并捕获可以在其他地方显示的输出`yield`。

因此，您可以在视图中捕获一些内容：

```
# index.html.erb (blog index)
<% content_for :facebook_meta do %>
  <meta content='My blog' property='og:site_name'>
  ...
<% end %>

# show.html.erb (single blog post)
<% content_for :facebook_meta do %>
  <meta content='<%= @post.title %>' property='og:site_name'>
  ...
<% end %> 
```

并在布局中显示它们：

```
# application.html.erb (application layout)
<html>
  <head>
    <%= yield :facebook_meta %>
  </head>
</html> 
```

在这种情况下，上述内容比检查当前控制器/动作要干净得多。您只需在它们适用的地方定义 Facebook 元标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T23:02:20.337

在#RubyOnRails IRC 频道中 Radar 的帮助下，我使用了以下代码：

`params[:action]`和`params[:controller]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T14:54:10.417

您可以使用控制器中可用的请求助手检查请求的所有上下文（操作、控制器、标头...）

[http://api.rubyonrails.org/classes/ActionDispatch/Request.html](http://api.rubyonrails.org/classes/ActionDispatch/Request.html)