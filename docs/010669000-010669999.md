# StackOverflow 问答 10669000-10669999

# visual-studio-2010 - 通过宏/环境变量在解决方案中定义项目路径

> ID：10669000
> 
> 赞同：13
> 
> 时间：2012-05-19T21:32:11.760
> 
> 标签：visual-studio-2010, visual-studio, environment-variables, projects-and-solutions

有没有办法使用用户宏/环境变量在解决方案中定义项目文件路径？我似乎不能这样做。

有点像环境变量用于定义 C++ 项目中的其他包含目录，但我想对解决方案中项目文件的位置执行相同的操作。

我尝试在文本编辑器中编辑解决方案以更改以 %MyMacroName% 或 $(MyMacroName) 开头的路径，但它们似乎都没有正确解析。打开解决方案时找不到项目文件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T08:53:07.800

在 .sln 文件中使用语法“%ENV_VAR%rest_of_the_path\test.csproj”

在 .csproj 文件中使用语法“$(ENV_VAR)rest_of_the_path\test.dll”

这对我有用，ENV_VAR 是为操作系统定义的自定义环境变量，例如 ENV_VAR = "C:\MyPath\"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:35:11.487

MSBuild 允许您使用环境变量，

[http://msdn.microsoft.com/en-US/library/ms171459(v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/ms171459(v=VS.80).aspx)

这样您就应该能够根据需要定义环境变量，然后修改 vCxproj 文件以使用它们。

我不确定该提示是否适用于 sln 文件，因为 sln 文件不是 MSBuild 脚本。

# html - 这个第二个 /head 标签来自哪里，以及如何删除它？

> ID：10669004
> 
> 赞同：1
> 
> 时间：2012-05-19T21:33:06.593
> 
> 标签：html, wordpress

我的网站一直有问题，我才意识到我有 2 个标签。这是一个 wordpress 主题，我不确定这个额外的标签在哪里，以及我需要做什么来删除它。有任何想法吗？

顺便说一句，不知道那个额外的标签已经存在了多久，这会给我的网站带来什么样的问题？

谢谢。

```
<head>  
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <link rel="pingback" href="http://noahsdad.com/xmlrpc.php" />
        <title>Noah&#039;s Dad - A Blog About Noah, Down Syndrome, His Family and the Videos, Pictures and Facts that Tell Their Story</title>
                            <script type="text/javascript">
                var _gaq = _gaq || [];
                _gaq.push(['_setAccount', 'UA-7239203-2']);
                _gaq.push(['_trackPageview']);

                (function() {
                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            </script>
                </head>
                <body class="home blog custom-background">

<script type='text/javascript'> 
(function(){ 
var bsa = document.createElement('script'); 
bsa.type = 'text/javascript'; 
bsa.async = true; 
bsa.src = '//cdn.beaconads.com/ac/beaconads.js'; 
(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa); 
})(); 
</script> 

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.1.5 - http://yoast.com/wordpress/seo/ -->
<meta name="description" content="We invite you to join the story we are telling through our daily one minute videos about our son who was born with Down syndrome. We will share facts, information, therapy resources, and lots more."/>
<link rel="canonical" href="http://noahsdad.com/" />
<link rel="next" href="http://noahsdad.com/page/2/" />
<meta name="google-site-verification" content="bM3Xh77FD51oIfTMMStTA5VF0dLwInO00n_Z787BXdo" />
<meta name="msvalidate.01" content="FE5E9CAC2BE0360684519396A5E187CF" />
<meta property='og:locale' content='en_US'/>
<meta property='fb:page_id' content='164848533579702'/>
<meta property='og:title' content='Noah&#039;s Dad'/>
<meta property='og:description' content='We invite you to join the story we are telling through our daily one minute videos about our son who was born with Down syndrome. We will share facts, information, therapy resources, and lots more.'/>
<meta property='og:url' content='http://noahsdad.com/'/>
<meta property='og:site_name' content='Noah&#039;s Dad'/>
<meta property='og:type' content='website'/>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="Noah&#039;s Dad &raquo; Feed" href="http://noahsdad.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Noah&#039;s Dad &raquo; Comments Feed" href="http://noahsdad.com/comments/feed/" />
<link rel='stylesheet' id='wpinstagram-css'  href='http://noahsdad.com/wp-content/plugins/instagram-for-wordpress/wpinstagram.css?ver=0.3.5' type='text/css' media='all' />
<link rel='stylesheet' id='fancybox-css-css'  href='http://noahsdad.com/wp-content/plugins/instagram-for-wordpress/js/fancybox/jquery.fancybox-1.3.4.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='tentblogger-gravatar-reminder-css'  href='http://noahsdad.com/wp-content/plugins/tentblogger-gravatar-reminder/css/style.css?ver=3.3.2' type='text/css' media='all' />
<link rel='stylesheet' id='tentblogger-rss-reminder-css'  href='http://noahsdad.com/wp-content/plugins/tentblogger-rss-reminder/css/style.css?ver=3.3.2' type='text/css' media='all' />
<link rel='stylesheet' id='nrelate-style-common-0-05-1-css'  href='http://static.nrelate.com/common_wp/0.05.1/nrelate-panels-common.min.css' type='text/css' media='all' />
<!--[if IE 6]>
<link rel='stylesheet' id='nrelate-ie6-0-05-1-css'  href='http://static.nrelate.com/common_wp/0.05.1/ie6-panels.min.css' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='nrelate-style-default-0-05-1-css'  href='http://static.nrelate.com/common_wp/0.05.1/nrelate-text-default.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-css'  href='http://noahsdad.com/wp-content/themes/standard3/css/lib/bootstrap.css?ver=3.3.2' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-responsive-css'  href='http://noahsdad.com/wp-content/themes/standard3/css/lib/bootstrap-responsive.css?ver=3.3.2' type='text/css' media='all' />
<link rel='stylesheet' id='standard-css'  href='http://noahsdad.com/wp-content/themes/eightbit-standard-child-theme-kit-23729a7/style.css?ver=3.3.2' type='text/css' media='all' />
<link rel='stylesheet' id='sharedaddy-css'  href='http://noahsdad.com/wp-content/plugins/jetpack/modules/sharedaddy/sharing.css?ver=3.3.2' type='text/css' media='all' />
<script>
        __kws = 11124;
        (function() {
            var kws = document.createElement('script'); kws.async = true;
            kws.src = ('https:' == document.location.protocol ? 'https://d2qi79k7w4ifvj.cloudfront.net' : 'http://dl.keywordstrategy.org') + '/track.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(kws, s);
        })();
    </script><script type='text/javascript' src='http://noahsdad.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/plugins/instagram-for-wordpress/js/jquery.easing-1.3.pack.js'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/plugins/instagram-for-wordpress/js/jquery.cycle.lite-1.5.min.js'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/plugins/instagram-for-wordpress/js/jquery.fancybox-1.3.4.pack.js'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/plugins/instagram-for-wordpress/js/jquery.mousewheel-3.0.4.pack.js'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/themes/standard3/lib/activity/js/widget.js?ver=3.3.2'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/plugins/nrelate-most-popular/admin/common_frontend.min.js'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/themes/standard3/js/lib/bootstrap/bootstrap.js?ver=3.3.2'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/themes/standard3/js/lib/jquery.fitvids.js?ver=3.3.2'></script>
<script type='text/javascript' src='http://noahsdad.com/wp-content/themes/standard3/js/theme.js?ver=3.3.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://noahsdad.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://noahsdad.com/wp-includes/wlwmanifest.xml" /> 
<link rel='shortlink' href='http://wp.me/1Az7o' />
<link rel="stylesheet" href="http://noahsdad.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=5.2.6" type="text/css" media="screen" /><link rel="image_src" href="http://noahsdad.com/wp-content/uploads/2012/05/down-syndrome-children-playing-kids-playing-bounce-house-1-640x395.jpg" /><script>
        __kws = 11124;
        (function() {
            var kws = document.createElement('script'); kws.async = true;
            kws.src = ('https:' == document.location.protocol ? 'https://d2qi79k7w4ifvj.cloudfront.net' : 'http://dl.keywordstrategy.org') + '/track.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(kws, s);
        })();
    </script><script type='text/javascript' src='http://noahsdad.api.oneall.com/socialize/library.js'></script>
<link rel="stylesheet" href="http://noahsdad.com/wp-content/plugins/wp-page-numbers/classic/wp-page-numbers.css" type="text/css" media="screen" />          <style type="text/css">
                                    #site-title,
                    #site-description,
                    #logo {
                        position: absolute !important;
                        clip: rect(1px 1px 1px 1px);
                        clip: rect(1px, 1px, 1px, 1px);
                    }

            </style>
        <style type="text/css">
body.custom-background { background-color: #1A1A1A; }
</style>
<style type="text/css">.broken_link, a.broken_link {
    text-decoration: line-through;
}</style>   </head>
    <body class="home blog custom-background">

                    <div id="header" class="imageyup">
                <div id="head-wrapper" class="clearfix">
                    <div class="container">
                        <div class="row"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:46:35.430

您必须为您的主题打开标题模板，并查看包含哪些内容来构建您在上面发布的输出。

# javascript - 如何识别 UIWebView 中堆叠的 HTML 元素上的触摸事件

> ID：10669007
> 
> 赞同：1
> 
> 时间：2012-05-19T21:33:39.623
> 
> 标签：javascript, objective-c, xcode, uiwebview, onclick

假设我有一个包含 span 元素的 div，两者都具有 onclick 功能。当我单击 div 时，它调用它的函数，但是当我单击 span 时，它首先调用 span 的函数，然后是 div 的函数。我该怎么做才能只调用 span 的函数而忽略 div 的函数？（换句话说，调用 HTML 层次结构中底部元素的函数，忽略其余部分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:46:18.117

一个快速的技巧是设置一个“shouldIgnoreNext”布尔值，并在收到跨度调用时忽略下一个 div 发起调用。

# php - imagejpeg() Unicode 字符问题

> ID：10669009
> 
> 赞同：2
> 
> 时间：2012-05-19T21:34:35.643
> 
> 标签：php, image-processing

我`imagejpeg()`用来将调整大小的图像保存到文件中，文件名可以包含非拉丁字符，问题是它用一些奇怪的字符弄乱了文件名。

知道如何解决这个问题吗？如果不是如何返回内容`imagejpeg()`而不是保存或打印它以便我可以使用`fwrite()`？

*`imagepng()`PS 同样的事情`imagegif()`也会发生。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:41:22.713

尽管我建议不要在文件名中使用非拉丁字符，但您可以使用输出缓冲来捕获输出`imagejpeg`并将其存储在变量中。如果`fwrite`确实接受您的文件名，则可以使用它将变量写入文件。

就像是：

```
ob_start();
imagejpeg($your_image);
$your_image_variable = ob_get_contents();
ob_end_clean(); 
```

# c# - 当鼠标滚轮在另一个控件中转动时，如何使 TextBox 滚动？

> ID：10669011
> 
> 赞同：1
> 
> 时间：2012-05-19T21:34:55.630
> 
> 标签：c#

我正在制作一个 IRC 客户端，其中聊天显示在名为 chatBox 的多行 TextBox 控件中。在聊天下方有一个名为 editBox 的单行文本框，用户可以在其中输入消息。我希望用户即使在 editBox 具有焦点时也能够在 chatBox 中滚动。有什么办法可以做到吗？

我查看了 textBox 的事件，但找不到任何类似于滚动事件的东西，并且我在 Google 上搜索了一个没有成功的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:37:51.443

不能直接滚动，但可以移动光标。您可以将光标移动到文本框的末尾，例如，使用`textBox.SelectionStart = textBox.Text.Length`.

通过操纵选择，您可以使用 模拟滚动`textBox.ScrollToCaret()`。

# twig - 是否可以仅在树枝中的某些情况下打开无空间模式？

> ID：10669012
> 
> 赞同：4
> 
> 时间：2012-05-19T21:35:45.977
> 
> 标签：twig, template-engine

我想做这样的事情：

```
{% if compress %}{% spaceless %}{% endif %}
...
{% if compress %}{% endspaceless %}{% endif %} 
```

我正在尝试`['compress' => true]`从 PHP 传递给模板以打开`spaceless`模式。但这会导致错误；模板标签需要正确嵌套。

有没有什么技术可以让我从 PHP 中打开/关闭空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:38:08.300

您将不得不重组您的模板以执行类似的操作。

```
{% import _self as example %}
{% macro stuff(obj) %}
  output stuff with {{ obj.name }}, etc...
{% endmacro %}

{% if compress %}
  {% spaceless %}
    {{ example.stuff(bla) }}
  {% endspaceless %}
{% else %}
    {{ example.stuff(bla) }}
{% endif %} 
```

使用[宏](http://twig.sensiolabs.org/doc/tags/macro.html)可以避免您必须复制内容。顶部的 import 语句很重要，所以不要忘记它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-23T16:44:04.213

page.twig：

```
{% block page %}
page content
{% endblock %} 
```

index.twig：

```
{% extends 'page.twig' %}
{% block page %}
    {% if compress %}
        {% spaceless %}
           {{ parent() }}
        {% endspaceless %} 
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %} 
```

# c - 解析 C 文件而不对其进行预处理

> ID：10669016
> 
> 赞同：4
> 
> 时间：2012-05-19T21:36:17.877
> 
> 标签：c, parsing

我想对 C 文件进行简单分析（例如，如果您`foo`使用作为参数调用宏`INT_TYPE`，然后将响应转换为`int*`），我不想预处理文件，我只想解析它（例如，我'会有正确的行号）。

即，我想从

```
#include <a.h>

#define FOO(f)

int f() {FOO(1);} 
```

令牌列表，例如

```
<include_directive value="a.h"/>
<macro name="FOO"><param name="f"/><result/></macro>
<function name="f">
    <return>int</return>
    <body>
        <macro_call name="FOO"><param>1</param></macro_call>
    </body>
</function> 
```

无需设置包含路径等。

是否有任何预先存在的解析器可以做到这一点？我知道的所有解析器都假设 C 已经过预处理。我想访问宏和实际包含指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:56:27.440

我们的[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)可以解析包含预处理器元素的代码，可以在很大程度上做到这一点，并且仍然可以构建可用的 AST。（是的，解析树具有精确的文件/行/列号信息）。

有许多限制，允许它处理大多数代码。在它无法处理的少数情况下，通常对源文件进行小而简单的更改，提供等效代码即可解决问题。

这是一组粗略的规则和限制：

*   #includes 和 #defines 可以出现在可以出现声明或语句的任何地方，但不能出现在语句的中间。这些很少引起问题。
*   宏调用可以出现在函数调用出现在表达式中的地方，也可以不使用分号代替语句出现。跨越非格式良好的块的宏调用处理得不好（有人感到惊讶吗？）。后者偶尔发生但并非很少发生，需要手动修改。OP 的“j(v,oid)*”示例是有问题的，但这在代码中确实很少见。
*   #if ... #endif 必须[围绕主要语言概念（非终结符）](http://www.semdesigns.com/products/formatters/CPreprocessorConstraints.html)（常量、表达式、语句、声明、函数）或此类实体的序列，或围绕某些格式不正确但经常出现的习语，例如**if (exp) {** . 条件的每个分支必须包含与其他分支相同类型的句法结构。#if 包裹在用作不良评论的随机文本周围是有问题的，但通过制作真正的评论很容易在源中修复。在不满足这些条件的地方，你需要修改原始源代码，通常通过移动#if #elsif #else #end 几个标记。

根据我们的经验，可以在几个小时内修改 50,000 行代码库来解决这些问题。虽然这看起来很烦人（确实如此），但替代方法是根本无法解析源代码，这比烦人要糟糕得多。

您还需要的不仅仅是解析器。请参阅[解析后的生活](http://semanticdesigns.com/Products/DMS/LifeAfterParsing.html)，以了解成功获取解析树后会发生什么。我们在构建符号表方面做了一些额外的工作，其中声明与嵌入它们的预处理器上下文一起记录，从而使类型检查能够包括预处理器条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:01:17.917

你可以看看这个[ANTLR 语法](http://www.antlr.org/grammar/1153358328744/C.g)。不过，您必须为预处理器令牌添加规则。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T13:56:48.583

您可以通过编写自己的解析来处理您的具体示例并忽略宏扩展。

因为`FOO(1)`它本身可以解释为函数调用。

然而，当考虑更多情况时，解析器会更加困难。您可以参考[PDF 链接](https://www.ideals.illinois.edu/bitstream/handle/2142/10856/UIUCDCS-R-2008-3009.pdf)以查找更多信息。

# php - 在 PHP 中自动捕获 PDO 的异常

> ID：10669017
> 
> 赞同：2
> 
> 时间：2012-05-19T21:36:25.493
> 
> 标签：php, mysql, pdo

晚上，

我目前正在处理这样的 PDO 异常：

```
try{
$db = Db::connect();
$query = $db->prepare( "SELECT * FROM table;" );
$query->execute();
}
catch( PDOException $e ) { error( 'MySQL error: ' . $e->getMessage(), __FILE__, __LINE__ ); } 
```

我每次的处理都是一样的。所以我想知道是否有一种方法可以设置它在出现 PDO 异常时自动运行：

```
catch( PDOException $e ) { error( 'MySQL error: ' . $e->getMessage(), __FILE__, __LINE__ ); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:00:53.570

查看[PDO 的文档](http://php.net/manual/en/pdo.error-handling.php)

您可以将错误处理更改为**PDO::ERRMODE_SILENT**或**PDO::ERRMODE_WARNING**

```
$dbh = new PDO($dsn, $user, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_SILENT); 
```

或者使用[set_exception_handler](http://php.net/manual/en/function.set-exception-handler.php)并为所有异常定义一个处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:37:56.903

尝试编辑类本身来捕捉它。

# c# - 识别显示器

> ID：10669024
> 
> 赞同：5
> 
> 时间：2012-05-19T21:37:21.240
> 
> 标签：c#, .net, uniqueidentifier, multiple-monitors

我正在尝试在多显示器设置中识别一个屏幕，以保存一些链接到该屏幕的数据。重新启动后，如何可靠地识别屏幕？

我知道`Screen`.Net 中的类，但`Screen.DeviceName`似乎并没有始终指向一个屏幕（例如在安装新的图形驱动程序之后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:08:27.920

尝试 WMI 而不是 WinForms。

以下帖子显示了如何获取监视器及其详细信息（例如 DisplayDetails 类）：[监视器 ID 和序列号](https://stackoverflow.com/questions/7270519/monitor-id-and-serial-number)

编辑：

我的建议：

```
using System.Management;

ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM Win32_DesktopMonitor");     
foreach (ManagementObject obj in searcher.Get())
    Console.WriteLine("PNP Device ID: {0}", obj ["PNPDeviceID"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:11:35.960

我通过使用`EnumDisplayDevices`API 获取 DeviceID 解决了这个问题。每个屏幕似乎都是唯一的，例如在驱动程序更新后不会改变。

WMI 对我来说是不可能的，因为我之前尝试过它，它只返回一个带有我的多显示器设置的显示器。

# android - OrientationEventListener (Tablet vs Mobile) 90度差异

> ID：10669027
> 
> 赞同：4
> 
> 时间：2012-05-19T21:37:51.477
> 
> 标签：android, mobile, screen, orientation, tablet

我使用 OrientationEventListener 来检测方向，但我有一个问题，平板电脑是横向的，而手机默认是纵向的。这意味着 OrientationEventListener 为平板电脑上的肖像返回值 90，但在手机上为肖像返回 0。

我正在使用的活动有摄像头，因此我无法在方向之间进行更改，因此我使用 Orientation 的值根据需要在屏幕上重新定位几个元素。

是否可以检测设备是否是平板电脑，以便我可以相应地调整值。ie 如何计算 isTablet 的值？

```
 if(isTablet)
            {
                orientation += -90;
                if(orientation < 0) //Check if we have gone too far back, keep the result between 0-360
                {
                    orientation += 360;
                }   
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:14:54.080

由于您提到无法在方向之间更改，因此您必须使用设备的属性来确定它是否是平板电脑。

看看[这个参考](http://developer.android.com/reference/android/os/Build.html#DEVICE)。

您可以使用`android.os.Build.DEVICE`,`android.os.Build.MODEL`和`android.os.Build.PRODUCT`来获取设备的身份，并且根据这些知识，您可以使用[此](http://www.glbenchmark.com/phonedetails.jsp?benchmark=glpro21&D=Amazon+Kindle+Fire&testgroup=system)引用来查找它们的值并确定设备类型。

但是使用这种方法，您必须在每次发布新平板电脑时更新软件。（我已[将此](https://stackoverflow.com/questions/3213205/how-to-detect-system-information-like-os-or-device-type)问题用作这部分答案的参考）。

替代是我在[这里](https://stackoverflow.com/questions/5832368/tablet-or-phone-android)找到的，引用答案：

```
public boolean isTablet(Context context) {
    boolean xlarge = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4);
    boolean large = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE);
    return (xlarge || large);
} 
```

> LARGE 和 XLARGE 屏幕尺寸由制造商根据与眼睛的距离来确定（因此是平板电脑的概念）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-24T22:17:05.013

还有另一种方法。您可以结合使用当前配置的方向和显示旋转来确定设备的自然方向，如下所述：[如何在 Android 上检查设备自然（默认）方向（即获取横向，例如 Motorola Charm 或 Flipout）](https://stackoverflow.com/questions/4553650/how-to-check-device-natural-default-orientation-on-android-i-e-get-landscape/9888357#9888357) . 使用那里描述的 getDeviceDefaultOrientation() 方法，您可以按如下方式设置 isTablet 变量：

`isTablet = (getDeviceDefaultOrientation() == Configuration.ORIENTATION_LANDSCAPE)`

如果您的应用有时会强制配置进入纵向或横向模式，您可能希望在应用生命周期的早期（在强制配置方向之前）调用 getDeviceDefaultOrientation() 并存储该值以供以后使用。否则，您可能会处于设备的物理旋转与配置方向不同步的状态，当视频被强制进入横向模式以进行全屏观看而设备本身仍然具有纵向旋转时，通常会发生这种情况。这可以通过在运行时调用 Activity.setRequestedOrientation() 来完成，之后存储 getDeviceDefaultOrientation() 的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:19:33.313

当设备方向改变时，您的活动将被销毁并重新创建，这意味着您不需要实际“监听”特定事件。要知道您是纵向还是横向，无论哪种设备正在运行您的代码：

```
switch (yourContext.getResources().getConfiguration().orientation) {
    case Configuration.ORIENTATION_LANDSCAPE:
        //xxx
        break;
    case Configuration.ORIENTATION_PORTRAIT:
        //xxx
        break;
} 
```

“onCreate”可能是一个很好的位置=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T01:06:12.483

实际上，我使用了一个糟糕的 hack 来解决同样的问题（我真的很惭愧 :)。当您获得传感器方向时，将其与屏幕尺寸比（宽与高）进行比较。

来自传感器的方向 == 来自屏幕的方向意味着手机，否则意味着平板电脑（或电视，......或任何即将到来的东西）。这是我用来获取屏幕比例/方向的代码（不幸的是，只有 2 种模式是可识别的）。

```
int getScreenOrientation(Activity ctx)  {
  Point pt = new Point(0,0);
  try {
    Display dsp =  ctx.getWindowManager().getDefaultDisplay();
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
      dsp.getSize(pt);
    } else {
      pt.x = dsp.getWidth();   
      pt.y = dsp.getHeight();
    }
  return  (pt.x <= pt.y) ?  
    ActivityInfo.SCREEN_ORIENTATION_PORTRAIT :
    ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
  }
  catch (Exception e) {}
  return ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED;
} 
```

这仅解决了方向问题，它不检测它是否是平板电脑。事实上，我的大多数 7 英寸标签都没有方向不匹配的问题。我只在我的 NEXUS 10 和 TV android dongle 上找到了它。

“不要像我一样编码，你会没事的。”

肖恩

# php - 为什么当“display_errors”打开时，这个语法错误会返回 HTTP 错误 500？

> ID：10669029
> 
> 赞同：2
> 
> 时间：2012-05-19T21:38:40.243
> 
> 标签：php

给出以下脚本

```
<?php

ini_set('display_errors','On');
error_reporting(E_ALL);

thisisanerror

?> 
```

我得到了预期

```
Notice: Use of undefined constant error - assumed 'error' in /htdocs/test.php on line 8 
```

但是如果我在脚本中添加一些东西

```
<?php

ini_set('display_errors','On');
error_reporting(E_ALL);

error

function test () {

    echo('test');

}

?> 
```

我明白了

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

为什么在后一种情况下我收到 500 错误而不是正常的语法错误？display_errors 不应该总是显示错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T21:57:29.723

第二个代码示例是一个彻底的语法错误。这意味着 PHP 将不会进展到代码执行点，并且会在解析时死掉。由于没有执行任何代码`ini_set()`，因此看不到调用的效果，因此您不会收到指示问题的 PHP 文本错误。

解析错误是致命的，并且 Web 服务器（正确地）设置为使用 500 响应代码处理 PHP 致命错误。由于您的 PHP 脚本没有产生任何输出，因此 Web 服务器将返回 500 条件的默认错误文档。

如果您想在浏览器中查看解析错误的文本消息 - 顺便说一下，通常不会这样做是生产 - 您需要在 php.ini 中打开错误报告或使用 .htaccess 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T21:48:21.767

如果强制 php 在运行时显示错误对您不起作用，您可以尝试其他选项，例如在 php.ini 中设置它：

```
error_reporting = E_ALL | E_STRICT
display_errors: On 
```

祝你好运！

# jdbc - Azure、Oracle SQL Developer 和 JDBC 驱动程序

> ID：10669030
> 
> 赞同：0
> 
> 时间：2012-05-19T21:38:51.887
> 
> 标签：jdbc, azure, azure-sql-database, jtds

我有一个 SQL Azure 数据库和 Oracle SQL Developer。我想使用 Oracle SQL Developer 连接到我的 Azure 实例。SQL Developer 需要 JDBC 驱动程序才能使用 MSSQL 数据库。jTDS 驱动程序适用于 SQL Developer，但不适用于 SQL Azure 数据库（显然）。4.0 版的 MS JDBC 驱动程序适用于 SQL Azure，但不适用于 Oracle SQL Developer（显然）。有没有其他人来过这里并找到了解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:58:58.113

使用JTDS驱动没有问题但是需要添加ssl=require

所以字符串就像： driver=net.sourceforge.jtds.jdbc.Driver database=jdbc:jtds:sqlserver://YourSQLServer.database.windows.net:1433/YourDBName;ssl=require

# c++ - 如何访问和读取 C++ 文件中的各个行？

> ID：10669035
> 
> 赞同：0
> 
> 时间：2012-05-19T21:39:36.340
> 
> 标签：c++

我正在为我的 C++ 课程做一个最终项目。这是一个多项选择测验，其中需要通过将用户的答案与`answer.txt`包含所有 20 个答案的相应答案进行比较来检查正确答案。此外，学生的姓名和分数需要在另一个文本文件中，以便学生查看它以查看他们的分数。该程序，`answer.txt`以及`scores.txt` PLUS 两个功能以及您在本课期间所学的任何其他功能都需要使用。

我无法从文件中读取个别答案`answer.txt`。我试图一次阅读一个答案，并将其与用户在名为`check_answer`. 我使用整数而不是字符来轻松检查大小写（通过添加 32）。程序可以编译，但唯一的问题是，在我回答完第一个问题后，所有其他问题都弹出，`"You answered correctly!"`程序运行完成。

我正在使用 DevC++。下面是我的程序的代码和 txt 文件的内容`answers.txt`。

```
#include<iostream.h>
#include<fstream.h>
#include<string.h>

int total_correct = 0;
ifstream infile;

void name_prompt();
void check_answer();
void scores();

int main()
{
      name_prompt();

      cout << "\nGREAT WHITE SHARK TRIVIA\n";
      cout << "Enter the letter corresponding to the correct answer choice, then press enter.\n";

      cout << "\nQuestion 1\n" << "What is the Great White Shark's scientific name?\n";
      cout << "A. Hemipristis elongatus" << endl;    // Snaggletooth shark
      cout << "B. Odontaspis ferox" << endl;         // Smalltooth sand tiger
      cout << "C. Carcharodon carcharias" << endl;   // Great White Shark
      cout << "D. Oxynotus caribbaeus" << endl;      // Caribbean roughshark
      check_answer();

      cout << "\nQuestion 2\n" << "Carcharodon is a mix of two Greek words that translate in English to:\n";
      cout << "A. Ragged tooth" << endl;    
      cout << "B. Swift killer" << endl;        
      cout << "C. White fish" << endl; 
      cout << "D. Sea warrior" << endl;     
      check_answer();

      cout << "\nQuestion 3\n" << "How big do Great White Sharks grow?\n";
      cout << "A. Approximately 10 feet long" << endl;    
      cout << "B. Approximately 17 feet long" << endl;        
      cout << "C. Approximately 21 feet long" << endl; 
      cout << "D. Approximately 30 feet long" << endl;  
      check_answer();

      cout << "\nQuestion 4\n" << "What is the name of the organ on the Great White Shark that allows it to\nsense electromagnetic fields radiating from its prey?\n";
      cout << "A. Duodenom antennae" << endl;    
      cout << "B. Ampullae of Lorenzini" << endl;        
      cout << "C. Spiracle gland" << endl; 
      cout << "D. Dermal denticles" << endl;     
      check_answer();

      cout << "\nQuestion 5\n" << "How long do Great White Shark mothers stay with their young?\n";
      cout << "A. No time whatsoever" << endl;    
      cout << "B. 3 months" << endl;        
      cout << "C. 6 months" << endl; 
      cout << "D. 1 year" << endl;     
      check_answer();

      cout << "\nQuestion 6\n" << "How old are female Great Whites when they usually bear their first young?\n";
      cout << "A. 2-4 years" << endl;    
      cout << "B. 6-8 years" << endl;        
      cout << "C. 8-10 years" << endl; 
      cout << "D. 12-14 years" << endl;     
      check_answer();

      cout << "\nQuestion 7\n" << "What is the favorite prey of an adult Great White Shark?\n";
      cout << "A. Crustaceans" << endl;    
      cout << "B. Fish" << endl;        
      cout << "C. Plankton" << endl; 
      cout << "D. Sea mammals" << endl;     
      check_answer();

      cout << "\nQuestion 8\n" << "What is the tactic used by Great Whites to attack prey on the surface\nof the water?\n";
      cout << "A. Attack from the side" << endl;    
      cout << "B. Attack from below" << endl;        
      cout << "C. Jump out of the water and land on the desired target" << endl; 
      cout << "D. Wait until the surface prey dives and then attack" << endl;     
      check_answer();

      cout << "\nQuestion 9\n" << "After spotting surface prey from below, Great Whites swim upward and launch\nthemselves out of the water grabbing their prey. This is called: \n";
      cout << "A. Skipping" << endl;    
      cout << "B. Jumping" << endl;        
      cout << "C. Breaching" << endl; 
      cout << "D. Charging" << endl;     
      check_answer();

      cout << "\nQuestion 10\n" << "How do Great White Sharks consume their food?\n";
      cout << "A. Rip off chunks of meat and swallow them whole" << endl;    
      cout << "B. Chew thoroughly and swallow" << endl;        
      cout << "C. Hold in mouth, let saliva break it down, and then swallow" << endl; 
      cout << "D. Suck out bodily fluids and leave carcass" << endl;     
      check_answer();

      cout << "\nQuestion 11\n" << "Of the following, which is the best location to view Great White\nbreaching behavior?\n";
      cout << "A. Myrtle Beach, South Carolina" << endl;    
      cout << "B. Cape Cod, Massachusetts" << endl;        
      cout << "C. Oban, Scotland" << endl; 
      cout << "D. False Bay, South Africa" << endl;     
      check_answer();

      cout << "\nQuestion 12\n" << "On average, how many non-fatal Great White Shark attacks occur each year?\n";
      cout << "A. 2-3" << endl;    
      cout << "B. 3-4" << endl;        
      cout << "C. 8-10" << endl; 
      cout << "D. 15-20" << endl;     
      check_answer();

      cout << "\nQuestion 13\n" << "What is one of the main predators juvenille Great Whites have to watch out for?\n";
      cout << "A. Humboldt Squid" << endl;    
      cout << "B. Various Whale Species" << endl;        
      cout << "C. Lion's Mane Jellyfish" << endl; 
      cout << "D. Other Great White Sharks" << endl;     
      check_answer();

      cout << "\nQuestion 14\n" << "After eating a marine mammal (such as a seal or sea lion), a Great White\nShark can go how long without another large meal?\n";
      cout << "A. 3-4 days" << endl;    
      cout << "B. 1 week" << endl;        
      cout << "C. 2 weeks" << endl; 
      cout << "D. 1-2 months" << endl;     
      check_answer();

      cout << "\nQuestion 15\n" << "How fast can adult Great White Sharks swim?\n";
      cout << "A. Up to 64 mph" << endl;    
      cout << "B. Up to 43 mph" << endl;        
      cout << "C. Up to 20 mph" << endl; 
      cout << "D. Up to 14 mph" << endl; 
      check_answer();

      cout << "\nQuestion 16\n" << "The teeth of a Great White Shark can measure up to?\n";
      cout << "A. 0.5 in" << endl;    
      cout << "B. 1.0 in" << endl;        
      cout << "C. 2 in" << endl; 
      cout << "D. 2.5 in" << endl;         
      check_answer();

      cout << "\nQuestion 17\n" << "Great White Sharks have which of the following?\n";
      cout << "A. Acute hearing" << endl;    
      cout << "B. Good eyesight" << endl;        
      cout << "C. Keen sense of smell" << endl; 
      cout << "D. All of the above" << endl;     
      check_answer();

      cout << "\nQuestion 18\n" << "In addition to its normal function, a Great White Shark's liver helps it to:\n";
      cout << "A. Float" << endl;    
      cout << "B. Swim aerodynamically" << endl;        
      cout << "C. Sense prey" << endl; 
      cout << "D. All of the above" << endl;     
      check_answer();

      cout << "\nQuestion 19\n" << "Great White Sharks can detect tiny amounts of blood up to how far away?\n";
      cout << "A. 500 feet" << endl;    
      cout << "B. 1 mile" << endl;        
      cout << "C. 3 miles" << endl; 
      cout << "D. 5 miles" << endl;     
      check_answer();

      cout << "\nQuestion 20\n" << "Great White Shark's mouths contain up to how many teeth?\n";
      cout << "A. 50" << endl;    
      cout << "B. 100" << endl;        
      cout << "C. 200" << endl; 
      cout << "D. 300" << endl;     
      check_answer();

      scores();

      system("pause");
      return 0;
}

void name_prompt()
{
     char user_name[30];
     ofstream outfile;

     cout << "Please enter your name: ";
     cin.get(user_name, 30);

     outfile.open("SCORES.TXT", ios::out);

     if(!outfile)
      {
                 cout << "Error opening file.\n";
      }

      outfile << user_name << endl;
      outfile.close();
}

**void check_answer()
{
      ifstream infile;
      infile.open("ANSWERS.TXT", ios::in);

      if(!infile)
      {
                 cout << "Error opening file.\n";
      }

     int x, answer;

      cin >> x;

      infile >> answer;

      if(x == answer || x == (answer + 32))
      {
           cout << "You answered correctly!\n" << endl;
           total_correct++;
      } 
      else
      {
          cout << "You answered incorrectly.\n" << endl;
      }
      infile.close();
}**

void scores()
{
     ofstream outfile2;         
     int score;

     score = (total_correct * 5);

     outfile2.open("SCORES.TXT", ios::app);

     if(!outfile2)
      {
                 cout << "Error opening file.\n";
      }

      outfile2 << "You answered " << total_correct << " out of 20 questions correctly." << endl;
      outfile2 << "You earned a score of " << score << "%.\n";
      outfile2.close();

      cout << "Please see SCORES.TXT if you wish to view your results." << endl;
} 
```

“answers.txt”的内容：

```
C
A
C
B
A
D
D
B
C
A
D
A
D
D
B
D
D
A
C
D 
```

帮助将不胜感激。非常感谢您花时间看这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:18:13.210

我认为问题在于您正在尝试将字符读入整数：

```
int x, answer;

cin >> x; 
```

基本上`cin >> x`说“从标准输入中读取一个**整数**`x`到”。问题是流中没有整数，只有一个字符。因此读取操作失败**并且**该字符留在流中。下次您尝试阅读答案时，您最终会一次又一次地阅读相同的字符。

首先，您应该重新考虑使用整数来阅读答案的选择。你真的需要一个整数来达到你想要达到的目的吗？您也可以使用算术运算`char`...

一般建议：始终将数据与代码分开......在这种情况下，您应该将问题放在单独的文件中。这将使您的代码更具可读性和更易于管理。

# php - jqgrid - $page 不工作

> ID：10669037
> 
> 赞同：0
> 
> 时间：2012-05-19T21:39:41.613
> 
> 标签：php, javascript, jqgrid

我有问题... $page = $_request['page']; ...不起作用。

当我输入 localhost/example2.php 时，我得到了这个......

```
<?xml version='1.0' encoding='utf-8'?>
    <rows>
        <page></page>
        <total>0</total>
        <records>1</records>
        <row id='1'>
            <cell>1</cell>
            <cell>2001-01-10</cell>
            <cell>103.98</cell>
            <cell>45.34</cell>
            <cell>149.32</cell>
            <cell><![CDATA[xxx]]></cell>
        </row>
    </rows> 
```

**为什么 $page 为空？**

* * *

这是我的代码（从 jqgrid wiki 复制）...

索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PHP jqGrid Class Example</title> 

    <!-- installation files of jqgrid -->
    <link rel="stylesheet" type="text/css" media="screen" href="themes/redmond/jquery-ui-1.8.16.custom.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="themes/ui.jqgrid.css" />
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <!-- installation files of jqgrid -->

<script type="text/javascript">
    jQuery(document).ready(function(){
      $("#list").jqGrid({
        url:'example.php',
        datatype: 'xml',
        mtype: 'GET',
        colNames:['Inv No','Date', 'Amount','Tax','Total','Notes'],
        colModel :[ 
          {name:'invid', index:'invid', width:55}, 
          {name:'invdate', index:'invdate', width:90}, 
          {name:'amount', index:'amount', width:80, align:'right'}, 
          {name:'tax', index:'tax', width:80, align:'right'}, 
          {name:'total', index:'total', width:80, align:'right'}, 
          {name:'note', index:'note', width:150, sortable:false} 
        ],
        pager: '#pager',
        rowNum:10,
        rowList:[10,20,30],
        sortname: 'invid',
        sortorder: 'desc',
        viewrecords: true,
        gridview: true,
        caption: 'My first grid'
      }); 
    });
</script>

</head>
<body>
<table id="list"><tr><td/></tr></table> 
<div id="pager"></div> 
</body>
</html> 
```

例子.php

```
<?php
    $page = $_GET['page'];
    $limit = $_GET['rows'];
    $sidx = $_GET['sidx'];
    $sord = $_GET['sord'];

    if(!$sidx) $sidx =1; 

    $dbhost = 'localhost';
    $dbuser = 'root';
    $dbpassword = '1234';
    $database = 'northwind';

    $db = mysql_connect($dbhost, $dbuser, $dbpassword) or die("Connection Error: " . mysql_error()); 
    mysql_select_db($database) or die("Error connecting to db."); 

    $result = mysql_query("SELECT COUNT(*) AS count FROM invheader"); 
    $row = mysql_fetch_array($result,MYSQL_ASSOC); 
    $count = $row['count']; 

    if($count > 0 && $limit > 0)
    { 
        $total_pages = ceil($count/$limit); 
    }
    else
    { 
        $total_pages = 0; 
    } 
    if($page > $total_pages)
    {
        $page=$total_pages;
    }
    $start = $limit*$page - $limit;

    if($start <0)
    {
        $start = 0;
    }

    //$SQL = "SELECT invid, invdate, amount, tax,total, note FROM invheader ORDER BY $sidx $sord LIMIT $start , $limit"; 
    $SQL = "SELECT invid, invdate, amount, tax,total, note FROM invheader"; 
    $result = mysql_query( $SQL ) or die("Couldn't execute query.".mysql_error()); 

    header("Content-type: text/xml;charset=utf-8");
    $s = "<?xml version='1.0' encoding='utf-8'?>";
    $s .=  "<rows>";
    $s .= "<page>".$page."</page>";
    $s .= "<total>".$total_pages."</total>";
    $s .= "<records>".$count."</records>";

    while($row = mysql_fetch_array($result,MYSQL_ASSOC)) {
        $s .= "<row id='". $row['invid']."'>";            
        $s .= "<cell>". $row['invid']."</cell>";
        $s .= "<cell>". $row['invdate']."</cell>";
        $s .= "<cell>". $row['amount']."</cell>";
        $s .= "<cell>". $row['tax']."</cell>";
        $s .= "<cell>". $row['total']."</cell>";
        $s .= "<cell><![CDATA[". $row['note']."]]></cell>";
        $s .= "</row>";
    }
    $s .= "</rows>"; 

    echo $s;
?> 
```

* * *

> 感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:44:56.887

如果在 example2.php 你有：

```
$page = $_request['page']; 
```

正如您在帖子中所说，它不起作用，因为它应该是：

```
$page = $_REQUEST['page']; 
```

# java - 如何让 Java 看起来像 Windows 程序？

> ID：10669039
> 
> 赞同：13
> 
> 时间：2012-05-19T21:39:46.857
> 
> 标签：java, windows, swing, user-interface, awt

有没有办法（使用 Java）使您创建的 GUI 看起来像普通的 Windows 程序？我不喜欢 Java 按钮、滚动条和其他东西的外观和感觉……如果它在 Mac 或 Linux 上运行，它可以使用它们，但我希望它从 Windows 继承按钮和东西。有什么建议么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-19T21:43:26.007

您可以通过一次调用将任何 Swing 程序的外观设置为本地操作系统。

[`UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName())`](http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html)

Windows PLAF 可以在[嵌套布局示例](https://stackoverflow.com/a/5630271/418556)中看到。

![](../Images/60a0b7bf612456f6f55341b1fa72d330.png)

# android - 小部件自动调整图像大小

> ID：10669040
> 
> 赞同：1
> 
> 时间：2012-05-19T21:39:57.933
> 
> 标签：android, android-widget, android-imageview

我有一个包含 2 个图像视图的小部件。当我调整小部件的大小时，其中一个图像视图的大小保持不变，但另一个发生了变化。我希望它们都保持相同的大小，但我不知道图像之间的区别是什么。两者都在布局中使用相同的属性定义（当然 src 除外），并且都位于 drawable-hdpi 中。Android如何确定是否调整图像大小？它需要具备一些特殊属性吗？谢谢你的帮助。

这是布局：

```
<LinearLayout android:layout_width="0dip" android:layout_height="fill_parent"
    android:orientation="vertical" android:layout_gravity="right"
    android:layout_weight="0.1">
    <ImageView android:id="@+id/update_button" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:src="@drawable/update_blue_small"
        android:contentDescription="@string/update_content_description"/> 
        <!-- android:text="@string/update_button_label"/> -->
    <ImageView android:id="@+id/configure_button" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:src="@drawable/update_blue_small"
        android:contentDescription="@string/config_content_description"/>
        <!-- android:text="@string/configure_button_label"/> -->
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:34:23.447

尝试`android:scaleType="center"`在每个 ImageViews 上进行设置。

查看 ImageView.ScaleType 的文档以获取更多详细信息。 [http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# javascript - jQuery-ui 打破动画

> ID：10669042
> 
> 赞同：0
> 
> 时间：2012-05-19T21:40:09.157
> 
> 标签：javascript, jquery, jquery-ui

我有一个 div，里面有一些动画，当我添加 jquery-ui 时，动画事件不会触发。如果我注释掉启用 jQuery-UI 的行，一切正常（当然除了 ui 函数）。这是我遇到问题的代码片段。

```
 <script type="text/javascript">
        $(document).ready(function() {
    $("#content").children().hide();
    $("#Home").show();

    $("#pagenav ul li").click(function() {
    $("nav ul li").removeClass("selected");
    $(this).addClass("selected");
    $("#content").children().hide();
    $("#" + $(this).data("name")).show();
    });
    $("#myImageBox ul li").hide(function() {
    $("#myImageBox ul li").each(function(index) {
        $(this).delay(1000*index).fadeIn(500);
    });
    });
    $("#accordion").accordion({ header: "h3" });
    });
 </script> 
```

关于为什么这会导致问题的任何想法？感谢您的任何建议。

编辑：这是我用来调用脚本/css等的代码。

```
 <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>
    <link rel="stylesheet" type="text/css" href="layout.css">
    <link rel="stylesheet" type="text/css" href="css/south-street/jquery-ui-1.8.20.custom.css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:53:29.153

我没有仔细看，但是在 JS 之后加载 CSS 可能会导致问题。

尝试更改加载顺序，以便首先调用 css，并在样式表之前加载 jQuery.UI Css，以便您的样式表可以进行所需的修改。

# uiview - 如何创建可平滑调整大小的圆形 UIView？

> ID：10669051
> 
> 赞同：10
> 
> 时间：2012-05-19T21:42:05.090
> 
> 标签：uiview, core-graphics, uiviewanimation

我正在尝试创建一个 UIView，它显示一个半透明的圆圈，其边界内有一个不透明的边框。我希望能够以两种方式更改边界 - 在`-[UIView animateWithDuration:animations:]`块内和在每秒触发几次的捏手势识别器动作中。我已经根据 SO 其他地方的答案尝试了三种方法，但没有一种是合适的。

1.  设置视图层的圆角半径可以`layoutSubviews`提供平滑的平移，但视图在动画期间不会保持圆形；似乎cornerRadius 是不可动画的。

2.  绘制圆圈`drawRect:`会产生一致的圆形视图，但如果圆圈变得太大，则在捏合手势中调整大小会变得不稳定，因为设备花费了太多时间来重绘圆圈。

3.  添加一个 CAShapeLayer 并将其 path 属性设置为`layoutSublayersOfLayer`，它不会在 UIView 动画中进行动画处理，因为 path 不是隐式可动画的。

有没有办法让我创建一个始终圆形且可平滑调整大小的视图？我可以使用其他类型的层来利用硬件加速吗？

更新

当我说我想更改`-[UIView animateWithDuration:animations:]`块内的边界时，一位评论者要求我扩展我的意思。在我的代码中，我有一个包含我的圆形视图的视图。圆形视图（使用cornerRadius的版本）覆盖`-[setBounds:]`以设置角半径：

```
-(void)setBounds:(CGRect)bounds
{
    self.layer.cornerRadius = fminf(bounds.size.width, bounds.size.height) / 2.0;
    [super setBounds:bounds];
} 
```

圆形视图的边界设置在`-[layoutSubviews]`：

```
-(void)layoutSubviews
{
    // some other layout is performed and circleRadius and circleCenter are
    // calculated based on the properties and current size of the view.

    self.circleView.bounds = CGRectMake(0, 0, circleRadius*2, circleRadius*2);
    self.circleView.center = circleCenter;
} 
```

视图有时会在动画中调整大小，如下所示：

```
[UIView animateWithDuration:0.33 animations:^(void) {
    myView.frame = CGRectMake(x, y, w, h);
    [myView setNeedsLayout];
    [myView layoutIfNeeded];
}]; 
```

但是在这些动画中，如果我使用带有cornerRadius的图层绘制圆形视图，它会变成有趣的形状。我无法将动画持续时间传递给 layoutSubviews 所以我需要在`-[setBounds]`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-20T14:02:11.670

正如“View Programming Guide for iOS”中[关于动画的部分所说](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)

> UIKit 和 Core Animation 都提供了对动画的支持，但每种技术提供的支持程度各不相同。在 UIKit 中，动画是使用 UIView 对象执行的

您可以使用旧版本设置动画的**完整属性列表**

```
[UIView beginAnimations:context:];
[UIView setAnimationDuration:];
// Change properties here...
[UIView commitAnimations]; 
```

或更新的

```
[UIView animateWithDuration:animations:]; 
```

（您正在使用的）是：

*   框架
*   界限
*   中央
*   变换（CGAffineTransform，不是 CATransform3D）
*   α
*   背景颜色
*   内容拉伸

让人迷惑的是，你还可以在 UIView 动画块内部的图层上设置相同的属性，即 frame、bounds、position、opacity、backgroundColor。

同一部分继续说：

> 在你想要执行更复杂的动画，或者 UIView 类不支持的动画的地方，你可以使用 Core Animation 和视图的底层来创建动画。因为视图和图层对象错综复杂地链接在一起，所以对视图图层的更改会影响视图本身。

几行之后，您可以阅读 Core Animation 可动画属性列表，您可以在其中看到：

> *   图层的边框（包括图层的角是否圆角）

* * *

至少有两个不错的选择可以达到您所追求的效果：

*   动画圆角半径
*   使用 CAShapeLayer 并为路径设置动画

这两者都要求您使用 Core Animation 制作动画。如果您需要多个动画作为一个动画运行，您可以创建一个 CAAnimationGroup 并向其中添加一组动画。

* * *

### 更新：

通过与其他动画“同时”在图层上执行圆角半径动画，可以通过尽可能少的代码更改来修复问题。*我在同一时间加上引号，因为不能保证不在同一组中的动画将在完全相同的时间完成。*根据您正在执行的其他动画，最好只使用基本动画和动画组。如果您正在对同一视图动画块中的许多不同视图应用更改，那么也许您可以查看 CATransactions。

下面的代码非常像您描述的那样为框架和角半径设置动画。

```
UIView *circle = [[UIView alloc] initWithFrame:CGRectMake(30, 30, 100, 100)];
[[circle layer] setCornerRadius:50];
[[circle layer] setBorderColor:[[UIColor orangeColor] CGColor]];
[[circle layer] setBorderWidth:2.0];
[[circle layer] setBackgroundColor:[[[UIColor orangeColor] colorWithAlphaComponent:0.5] CGColor]];
[[self view] addSubview:circle];

CGFloat animationDuration = 4.0; // Your duration
CGFloat animationDelay = 3.0; // Your delay (if any)

CABasicAnimation *cornerRadiusAnimation = [CABasicAnimation animationWithKeyPath:@"cornerRadius"];
[cornerRadiusAnimation setFromValue:[NSNumber numberWithFloat:50.0]]; // The current value
[cornerRadiusAnimation setToValue:[NSNumber numberWithFloat:10.0]]; // The new value
[cornerRadiusAnimation setDuration:animationDuration];
[cornerRadiusAnimation setBeginTime:CACurrentMediaTime() + animationDelay];

// If your UIView animation uses a timing funcition then your basic animation needs the same one
[cornerRadiusAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

// This will keep make the animation look as the "from" and "to" values before and after the animation
[cornerRadiusAnimation setFillMode:kCAFillModeBoth];
[[circle layer] addAnimation:cornerRadiusAnimation forKey:@"keepAsCircle"];
[[circle layer] setCornerRadius:10.0]; // Core Animation doesn't change the real value so we have to.

[UIView animateWithDuration:animationDuration
                      delay:animationDelay
                    options:UIViewAnimationOptionCurveEaseInOut 
                 animations:^{
                     [[circle layer] setFrame:CGRectMake(50, 50, 20, 20)]; // Arbitrary frame ...
                     // You other UIView animations in here...
                 } completion:^(BOOL finished) {
                     // Maybe you have your completion in here...
                 }]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-05T17:33:17.590

非常感谢大卫，这是我找到的解决方案。最后，结果证明它的关键是使用视图的`-[actionForLayer:forKey:]`方法，因为它在 UIView 块内使用，而不是图层`-[actionForKey]`返回的任何内容。

```
@implementation SGBRoundView

-(CGFloat)radiusForBounds:(CGRect)bounds
{
    return fminf(bounds.size.width, bounds.size.height) / 2;
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor clearColor];
        self.opaque = NO;
        self.layer.backgroundColor = [[UIColor purpleColor] CGColor];
        self.layer.borderColor = [[UIColor greenColor] CGColor];
        self.layer.borderWidth = 3;
        self.layer.cornerRadius = [self radiusForBounds:self.bounds];
    }
    return self;
}

-(void)setBounds:(CGRect)bounds
{
    self.layer.cornerRadius = [self radiusForBounds:bounds];
    [super setBounds:bounds];
}

-(id<CAAction>)actionForLayer:(CALayer *)layer forKey:(NSString *)event
{
    id<CAAction> action = [super actionForLayer:layer forKey:event];

    if ([event isEqualToString:@"cornerRadius"])
    {
        CABasicAnimation *boundsAction = (CABasicAnimation *)[self actionForLayer:layer forKey:@"bounds"];
            if ([boundsAction isKindOfClass:[CABasicAnimation class]] && [boundsAction.fromValue isKindOfClass:[NSValue class]])
        {            
            CABasicAnimation *cornerRadiusAction = [CABasicAnimation animationWithKeyPath:@"cornerRadius"];
            cornerRadiusAction.delegate = boundsAction.delegate;
            cornerRadiusAction.duration = boundsAction.duration;
            cornerRadiusAction.fillMode = boundsAction.fillMode;
            cornerRadiusAction.timingFunction = boundsAction.timingFunction;

            CGRect fromBounds = [(NSValue *)boundsAction.fromValue CGRectValue];
            CGFloat fromRadius = [self radiusForBounds:fromBounds];
            cornerRadiusAction.fromValue = [NSNumber numberWithFloat:fromRadius];

            return cornerRadiusAction;
        }
    }

    return action;
}

@end 
```

通过使用视图为边界提供的操作，我能够获得正确的持续时间、填充模式和计时功能，最重要的是委托 - 没有这些，UIView 动画的完成块不会运行。

半径动画几乎在所有情况下都遵循边界动画 - 我正在尝试消除一些边缘情况，但它基本上就在那里。还值得一提的是，捏合手势有时仍然很生涩——我想即使是加速绘图也很昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-22T19:59:24.823

从 iOS 11 开始，`cornerRadius`如果您在动画块内更改 UIKit，它就会动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T22:16:00.187

CAShapeLayer 的 path 属性不是**隐式**可动画的，但它是可动画的。创建一个改变圆路径大小的 CABasicAnimation 应该很容易。只需确保路径具有相同数量的控制点（例如更改整圆弧的半径）。如果您更改控制点的数量，事情会变得非常奇怪。根据文档，“结果未定义”。

# jquery - 如何通过单击 href 来启动/停止自动完成插件？

> ID：10669052
> 
> 赞同：1
> 
> 时间：2012-05-19T21:42:20.513
> 
> 标签：jquery, autocomplete, unbind

我正在使用 Joern Zaefferer 的 jQuery Autocomplete 插件 1.1。

代码上一切正常。

然而，文档很少。我需要有人帮助我了解如何使用 href 链接打开或关闭自动完成功能。

似乎 unautocomplete() 函数应该以某种方式禁用它，但不确定如何正确调用它。

我在页面加载时使用它来激活它：

```
$().ready(function() {
  $("#term").autocomplete("autocomplete.php", {
    width: 260,
    matchContains: true,
    noCache: true,
    minChars: <?php echo $auto_char; ?>,
    selectFirst: false
  });
}); 
```

我所做的是在返回结果的末尾添加了一个“隐藏建议”链接，并试图在用户单击它时禁用自动完成功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:59:16.680

假设您的 HTML 如下所示：

```
<input type="text" id="term" />
...
<button id="hide">Hide suggestions</button> 
```

您可以调用`$.unautocomplete`这种方式来禁用该`#term`元素。

```
$(document).ready(function(){
  $("#hide").click(function(){
    $("#term").unautocomplete();
  });
}); 
```

或者，我想您可以使用它来禁用所有自动完成功能：

```
$(document).ready(function(){
  $("#hide").click(function(){
    $(":input").unautocomplete();
  });
}); 
```

此外，您可能希望升级到 AutoComplete 插件的更新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:52:57.327

您应该知道这[在 jQuery UI 自动完成插件的 1.1 版本中不可用](http://forum.jquery.com/topic/disable-autocomplete)。这似乎是一个错误。它在 1.8.3 jQuery UI 版本中得到修复。

但是您甚至没有使用旧版本的 jQuery UI。参见下文...

从您发布的代码来看，您正在使用[由 Joern Zaefferer 编写的已弃用的 1.1 版本。](http://bassistance.de/jquery-plugins/jquery-plugin-autocomplete/)这个插件几乎在两年前就被弃用了，旧插件的链接有参考资料，可以指导您完成任何迁移挑战。

自动完成插件现在是 jQuery UI 的一部分，版本为 1.8.20！我强烈建议您[升级到最新版本的 jQuery UI](http://jqueryui.com/download)并改用该自动完成插件。

之后，[文档](http://jqueryui.com/demos/autocomplete/)显示您可以通过在自动完成最初绑定到的选择器上调用以下方法来禁用自动完成：

```
$( ".selector" ).autocomplete({ disabled: true }); 
```

请记住，您基本上使用的是很长时间没有升级的东西，并且随着更新的浏览器的出现，您的代码只会变得更加难以升级。因此，您基本上会从升级中获得两个好处。您将使用包含所有最新错误修复和易于查找的文档的最新版本，并且您将能够禁用自动完成功能。

# javascript - JavaScript 不会在 Opera 以外的其他浏览器中触发

> ID：10669053
> 
> 赞同：0
> 
> 时间：2012-05-19T21:42:31.533
> 
> 标签：javascript, html, .net, dom-events

我遇到了一个问题，我开始看到我的日志已经开始显示用户没有登录，所以我开始检查并注意到新的登录框架在除 Opera 之外的任何其他浏览器中都看不到。

我知道 div 是可见的，如果我删除`display:none`了所有浏览器中应该显示的框，所以我的赌注是 JavaScript 不会触发。

如果它有任何用途，我试图显示的框是一个 div 框架，如下所示，但它位于页面顶部。

```
<script type="text/javascript">
    function ShowHideRegLog() {
        var box = document.getElementById('LoginReg');
        if (box.style.display === 'none') {
            box.style = 'display:block; position:absolute; top:50%; left:50%; margin:-150px 0 0 -120px; z-index:99;';
        }
        else if (box.style.display === 'block') {
            box.style = 'display:none;';
        }
    }
</script>

<div class="RegFullFrame" id="LoginReg" style="display:none;">
    <div style="color:#defdef; font-size:22px; z-index:99; margin: 0 0 5px 5px; font-weight:bold;">
        Login:
    </div>
    <div class="RegTextFrame">
        <asp:TextBox CssClass="RegTextBox RegTopTexBox" ID="Usertxt" runat="server">
        </asp:TextBox>
        <asp:TextBox CssClass="RegTextBox RegBottomTexBox" style="color:#989898;" ID="Pwdtxt" onfocus="this.value=''; this.type='password'; this.style.color='#000';" runat="server">
            Password
        </asp:TextBox>
    </div>
    <asp:Button CssClass="RegButton" ID="RegButton" runat="server" Text="Login" 
            onclick="Login_Click" OnClientClick="ShowHideRegLog();" />
</div>
<input id="RegButton" style=" background:none; border:none; font-weight:bold; padding-top:6px; color:red;" runat="server" 
        type="button" value="Login" onclick="ShowHideRegLog()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:03:46.977

包括 jquery`<head>`并使用以下脚本。

```
 function ShowHideRegLog() {
        var box = document.getElementById('LoginReg');
        if (box.style.display == 'none') {
            $("#LoginReg").show();
        }
        else if (box.style.display == 'block') {
            $("#LoginReg").hide();
        }
    } 
```

**没有 jquery : **

```
 function ShowHideRegLog() {
        var box = document.getElementById('LoginReg');
        if (box.style.display === 'none') {
            box.style.display = 'block';
            box.style.position = 'absolute';
            box.style.top = '50%';
            box.style.margin = '-150ps 0 0 -120px';
            box.style.zIndex = '99';
        }
        else if (box.style.display === 'block') {
            box.style.display = 'none';
        }
    } 
```

# objective-c - 如何获取支持文件中的 PNG 名称列表？

> ID：10669063
> 
> 赞同：0
> 
> 时间：2012-05-19T21:44:24.637
> 
> 标签：objective-c, xcode, png, image-uploading, imagenamed

我已经在“支持文件”中将大约 30 张图像（并将在不久的将来添加更多）拖放到我的 Xcode 项目中的“支持文件”中，并且我希望能够以编程方式获取每个具有扩展名“.PNG”的名称。这甚至可能吗？

非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:55:32.847

```
NSArray *pngFilePaths = [[NSBundle mainBundle] pathsForResourcesOfType:@"PNG" inDirectory:@""]; 
```

请注意，扩展名是区分大小写的，这只会获取扩展名是“PNG”的文件，而不是“png”。

# flash - 为影片剪辑设置参数以确定它们在 Flash Builder 上出现的频率

> ID：10669065
> 
> 赞同：0
> 
> 时间：2012-05-19T21:44:53.127
> 
> 标签：flash, apache-flex, parameters, flash-builder, swc

我正在使用 Flash Builder（如果您愿意，可以使用 Flex）制作一个类似视频游戏的项目。

我有一系列影片剪辑（它们是我从 Flash 中调用的 SWC）。这些影片剪辑是游戏中角色的独立动作，将被玩家“喜欢”或“不喜欢”。

每个影片剪辑都有自己的参数，如果单击“喜欢”按钮，则该参数将获得正值，如果播放器单击“不喜欢”按钮，则该参数将获得负值（顺便说一下，这些按钮属于不同的类）。不知道如何编写此代码。

另外，我想根据它们的参数按顺序（或者说频率）调用舞台上的电影剪辑。喜欢的人越高，上台的次数就越多；他们的厌恶程度越高，他们出现在舞台上的次数就越少。我真的不知道如何写这个。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:54:03.990

Math.random() 会给你一个百分比（基本上是 0 到 1 之间的某个分数）。如果您将其乘以基于喜欢/不喜欢的某个数字，那么您可以获得仍然是随机的概率，但会根据喜欢/不喜欢而更高。您可能需要对其进行试验以找到一些阈值，该阈值是根据项目的实际需求显示某些内容所需满足的最小值。

MPO 是在给原始发帖人机会回应负面反馈之前对问题投反对票是不礼貌的。

# python - 是否有现有的库或 api 可用于分隔基于字符的语言中的单词？

> ID：10669069
> 
> 赞同：4
> 
> 时间：2012-05-19T21:45:39.607
> 
> 标签：python, api, unicode, utf-8, nlp

我正在从事一个小爱好 Python 项目，该项目涉及使用以该语言编写的大量文本为各种语言创建字典。对于大多数语言，这相对简单，因为我可以使用单词之间的空格分隔符将段落标记为字典的单词，但例如，中文在单词之间不使用空格字符。如何将一段中文文本标记为单词？

我的搜索发现这是一个有点复杂的问题，所以我想知道是否有现成的解决方案可以通过 api 或任何其他语言在 Python 或其他地方解决这个问题。这一定是一个常见问题，因为任何为亚洲语言制作的搜索引擎都需要克服这个问题才能提供相关结果。

我尝试使用谷歌搜索，但我什至不确定这种类型的标记化被称为什么，所以我的结果没有找到任何东西。也许只是朝着正确的方向轻推会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T21:58:13.527

语言标记化是自然语言处理 (NLP) 的一个关键方面。对于大公司和大学来说，这是一个巨大的话题，并且一直是许多博士论文的主题。

我刚刚提交了对您问题的编辑以添加“nlp”标签。我建议您查看“nlp”标签的“关于”页面。您将找到指向[自然语言工具包](http://nltk.org "自然语言工具包")等网站的链接，其中包括基于 Python 的标记器。

您还可以在 Google 上搜索以下术语：“语言标记化”和 NLP。

# data-structures - 逻辑门模拟的数据模型

> ID：10669073
> 
> 赞同：2
> 
> 时间：2012-05-19T21:46:45.180
> 
> 标签：data-structures, logic

我正在尝试为逻辑门开发一个模拟器。模拟器需要计算给定电路的真值表。

这是一个示例电路。`a`, `b`, `c`, `d`,`e`是输入，`z`是输出。

![在此处输入图像描述](../Images/eed7192af162645f0a2724abcb66c54b.png)

我对编程很陌生。我找不到为大门建模的方法。你能给我一个方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:05:35.657

对于每个输入，您需要为状态（真、假）生成真值表。因此，如果您有 5 个输入 = 总组合 = 2^5。

你没有指定你需要什么语言。所以，我会给你一个流动的`Java`方法。

我假设您已经为不同的门定义了所有特定功能，例如,`XNOR`等。例如，您可以将门的功能设置为：`AND``OR``XNOR``boolean XNOR(boolean ip1, boolean ip2)`

现在该过程简化为为输入生成所有组合 (2^5)。这简化为一个简单的排列问题 - 您可以这样做：（想法是将值从数组末尾更改为开头。由于它只需要两个值，因此很容易实现）

```
//inputs  - all initialized to FALSE; - ready for 1st case of (2^5)
//Let the inputs a,b,c,d,e correspond to values of this array
boolean inp[]=new boolean[5]; 

//need a pointer variable for the array
//first pointing to the last-1 element of the array
int main_col=inp.length-2; 

//Generate the combinations for input from all FALSE to until you reach all inputs to TRUE values
boolean looptf=true;
while(looptf){
   call_Appropriate_gates_from_inputs(inp); 
   inp[inp.length-1]=!inp[inp.length-1]; //last array element value changed 
   call_Appropriate_gates_from_inputs(inp);
   inp[inp.length-1]=!inp[inp.length-1]; //reset
   for(int i=inp.length-2;i>=0;i--){
        if (inp[i]){
          inp[i]=false; 
          if (main_col==i){
             main_col--;
             if (main_col<0){
               looptf=false;
               break;
             }
          }           
        }else{
          inp[i]=true;
          break;
        }
    }//for        
}//while 
```

现在您可以定义方法`call_Appropriate_gates_from_inputs(boolean[])`并执行门逻辑并获取结果。

# java - 最终字段名称的 getter 方法

> ID：10669074
> 
> 赞同：0
> 
> 时间：2012-05-19T21:46:53.203
> 
> 标签：java, naming-conventions

这似乎是一个微不足道的问题，但我搜索了很多，但找不到答案。
如果我有这样的最终字段：

```
private final double DEGREES; 
```

变量是用大写字母写的，因为它是最终的，但 getter 方法也应该用大写字母写吗？那么它会是getDEGREES 还是getDegress？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T21:47:58.923

应该是`getDegrees`。而且，在我看来，唯一应该全部大写的字段是一些字段`static final`。最终的成员字段不需要全部大写。

/edit
实际上，Oracle 的[Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)说只有`static final`常量全部大写，所有成员变量都应该是 lowerCamelCase。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T21:49:26.970

如果这是一个常量，您可以在没有 getter 的情况下将其公开为静态字段。这似乎是标准做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:49:04.150

getter 的正确命名约定是 getDegrees

# c# - 比较 XML 和 TXT C#

> ID：10669077
> 
> 赞同：0
> 
> 时间：2012-05-19T21:47:43.540
> 
> 标签：c#, xml, text, compare

我正在寻找一种将指定文本文件的全部内容与 XML 文件内容的某个分支进行比较的方法，并根据两者是否匹配让控制台输出 1 或 0。我想比较的 xml 部分如下所示：

```
-<root>-<Info><Seperator>DATA TO BE COMPARED</Seperator></Info> 
```

XML 下面有更多数据，但我只想将此行与文本文件进行比较。例如。如果 xml 文件在列中包含“test”，并且其中写入的所有文本文件都是“test”，它将输出 1，但 xml 表示“test”并且文本文件表示“test123”它不会.

我发现最接近的事情是：[C# 中的 Xml 比较](https://stackoverflow.com/questions/794331/xml-comparison-in-c-sharp)来比较两个 xml 文件，以及[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/59db1bb1-d822-4db7-b09c -f7d2d5c705b4](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/59db1bb1-d822-4db7-b09c-f7d2d5c705b4)比较两个 txt 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:57:04.140

忽略 Seperator 拼写错误的事实，并假设 XML 中有一个 Seperator 节点，您可以使用 LINQ to XML 读取相关节点：

```
var xml = "<root><Info><Seperator>DATA TO BE COMPARED</Seperator></Info></root>";   
var xmlString = XElement.Parse(xml).Descendants("Seperator").FirstOrDefault().Value; 
```

然后您可以使用`File.ReadAllText`将文件作为字符串读取：

```
var fileString = File.ReadAllText(@"c:\test.txt"); 
```

最后是对比：

```
Console.WriteLine("{0}", fileString == xmlString ? 1 : 0); 
```

# solr - solr 递增索引但未存储的数字字段

> ID：10669083
> 
> 赞同：2
> 
> 时间：2012-05-19T21:48:23.840
> 
> 标签：solr

有没有办法在 solr 中增加索引但未存储的数字字段？

即我有

```
<add>
    <doc>
        <field name="n">10</field>
    </doc>
</add> 
```

架构类似于：

```
<field name="n" indexed="true" stored="false" type="tint" /> 
```

我想对 n 进行更新，例如我将当前值增加某个值 m。

我唯一能想到的就是将值同时存储和索引，然后当我想更新值时，我必须查询 solr 以获取现有值，然后调用更新端点来写出新值。或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:35:24.713

[SOLR-139](https://issues.apache.org/jira/browse/SOLR-139)最近提交了允许添加等，但是：

*   必须存储字段
*   修复版本未设置，但我猜只在主干上

# eclipse - 如何使用draw2d绘制图表？

> ID：10669086
> 
> 赞同：0
> 
> 时间：2012-05-19T21:48:51.440
> 
> 标签：eclipse, graphics, eclipse-plugin, eclipse-gef, draw2d

我为我的系统设计了一个元模型，我想创建一个图形编辑器来促进模型的创建。为此，我正在使用 GEF 编辑器。我没有遇到任何易于理解的关于如何使用 draw2d 绘制图表然后使用 GEF 中的 editparts 等实现的教程。

谁能建议我任何有用的资源。视频教程当然会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:40:26.787

GEF 是在 draw2d 和 SWT Tree 之上开发的图形框架。

这是在 POJO 模型上创建图形编辑器的分步教程，同样可用于 EMF 模型或任何其他域模型

网址： http: [//www.inf.ed.ac.uk/teaching/courses/ip/resources/GEF/GEF_Tutorial_2up.pdf](http://www.inf.ed.ac.uk/teaching/courses/ip/resources/GEF/GEF_Tutorial_2up.pdf)

GEF 资源清单： [教程](http://wiki.eclipse.org/GEF/Articles,_Tutorials,_Slides)

希望这有帮助！

# asp.net - 如何将我的登录系统从 sqlexpress 转移到我自己的服务器？

> ID：10669090
> 
> 赞同：1
> 
> 时间：2012-05-19T21:49:17.217
> 
> 标签：asp.net

我对 Visual Studio 附带的登录系统相当陌生，我一直想知道是否可以将 Visual Studio 自动创建的所有用户信息从 sqlexpress 传输到我自己的数据库？，我注意到 ASPNETDB.MDF 包含为用户创建的数据库信息，我希望使用它或将其存储在我自己的 sqlserver 而不是 sqlexpress 中。

最终我的目标是将以下连接字符串更改为我自己的连接字符串，其中包含我自己的服务器和数据库的名称：

```
<connectionStrings>
     <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated           Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"  providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:57:30.690

是的，你可以这样做。SQLEXPRESS 数据库中的库存 ASP.NET 成员表是使用`aspnet_regsql.exe`位于`%WINDIR%\Microsoft.Net\Framework\(FrameworkVersion)`. 因此，您应该能够在指向新的 sql 服务器时运行此工具。然后从 ASPNETDB 数据库备份和恢复数据（只要你的 sqlexpress 和 sql server 版本匹配）。 [这](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-cs)是一篇关于生成成员表的好文章。

# mfc - 使用带有 CEdit 控件的 SHAutoComplete

> ID：10669093
> 
> 赞同：1
> 
> 时间：2012-05-19T21:49:55.217
> 
> 标签：mfc, autocomplete, cedit

我正在开发 MFC 应用程序，我可以将 SHAutoComplete 与 CEdit 控件一起使用吗？还有任何现成的自动完成控件可用吗？或者我需要使用编写所有代码来创建编辑控件下方的列表框，因为用户在编辑控件中键入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:14:59.087

只需将 CEdit 的 m_hwnd 成员传递给 SHAutoComplete。我不认为扩展保证另一个类。列表框由 SHAutoComplete 创建的 AutoComplete 对象创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:50:37.063

SHAutoComplete 有助于自动完成路径（系统或 URL）。如果这是一个组合框，并且您想使用自动完成来建议组合中包含的字符串，则必须编写代码来处理它。

您可以找到一些样本。我发现的一个（工作）： [http ://www.ucancode.net/Visual_C_MFC_COM_faq/Visual-C-Auto-completion-ComboBox-CComboBox.htm](http://www.ucancode.net/Visual_C_MFC_COM_faq/Visual-C-Auto-completion-ComboBox-CComboBox.htm)

# asp.net - 持久不可编辑的浏览器（客户端）存储对象

> ID：10669096
> 
> 赞同：1
> 
> 时间：2012-05-19T21:50:10.737
> 
> 标签：asp.net, .net

我试图弄清楚如何存储一些用户信息，这些信息将以以下方式控制内容可见性：

*   不需要经常访问服务器来查询 SQL 以查看用户可以/无权访问 AND
*   用户无法在浏览器的开发者工具/控制台中进行编辑

Cookie、查询字符串甚至 HTML5 本地存储或 SQLite 都是很好的存储选项，但它们都可以由精通技术的用户进行编辑。如何根据用户的安全级别控制内容，同时限制查询并防止用户对其进行破解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:54:22.670

阻止用户查看特定内容的*唯一方法是验证他们对内容**服务器端*的访问权限，而不是将其呈现给他们。 可以绕过*任何客户端验证。*即使您设计了一种在本地存储用户看不到的信息的方法，您仍然*会将*内容发送给他们并使用*客户端*代码来检查该值。

用户可以看到您发送给他们的任何内容。

您不一定需要经常访问 SQL 数据库来检查角色和权限。您可以在服务器端保留一些缓存的角色和授权，例如在会话状态中，并在用户会话的生命周期内针对这些角色和授权进行验证。此时，您不会产生性能成本，因为用户无论如何都在请求页面。对于每个页面请求，您只需确定用户在响应中能看到或不能看到的内容。

# mysql - 奇怪的 sql 错误，变量未被正确识别

> ID：10669097
> 
> 赞同：1
> 
> 时间：2012-05-19T21:50:19.060
> 
> 标签：mysql, variables, select

我目前在这个问题的第二个小时，我无法解释它，所以我将简单地展示发生了什么。我不知道这是否重要，但我正在使用linkedIN API 来检索用户的linkedIn 唯一ID。

用英语，我在做什么：

1.  用户使用 LinkedIn 登录
2.  我读入了用户的 LinkedIn ID（从 API 返回）
3.  如果 ID 存在于数据库中，说“你好”，如果不存在，向他们展示一个表格进行注册

**我遇到的问题：**

以下行有效并正确返回了`1`我在数据库中的用户，其linkedIn ID 为`OtOgMaJ2NM`

```
$company_data = "SELECT * FROM s_user WHERE `LI_id` = 'OtOgMaJ2NM'"; 
```

以下查询不返回任何结果 - 使用表中具有相同记录的相同数据库`s_user`：

```
$linkedIn_id = "<?js= id ?>";
echo $linkedIn_id; 
```

以下代码输出`OtOgMaJ2NM`没有尾随空格。

到目前为止一切顺利......除了这次我使用变量运行查询时，没有返回任何记录！

```
$company_data = "SELECT * FROM s_user WHERE `LI_id` = '$linkedIn_id'"; 
```

进一步说明：当`echo` `$company_data`我使用变量时显示相同的查询时，就像我使用查询的纯文本版本时一样。

有人有想法么？

谢谢，

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:08:14.220

如果您在“”之间发送变量，MySQL 引擎将按字面意思搜索 $linkedIn_id 而不是其内容。似乎您正在使用 php，但我不确定正确的语法。看看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:56:16.733

我只能假设在回显变量时它会剥离标签，所以当你将它与查询一起使用时，你实际上是在说：

```
$company_data = "SELECT * FROM s_user WHERE `LI_id` = '<?js= OtOgMaJ2NM ?>'"; 
```

我可能是错的，但是您是否尝试过从变量中剥离标签？

# restructuredtext - 斜体包含链接的文本

> ID：10669099
> 
> 赞同：20
> 
> 时间：2012-05-19T21:50:21.673
> 
> 标签：restructuredtext

我有一个 RST，我想要一个斜体链接。然而，标记

```
*Warning: `Watch this <http://www.youtube.com/watch?v=dQw4w9WgXcQ&ob=av3e>`_!* 
```

在 HTML 中呈现为

```
<em>Warning: `Watch this <http://www.youtube.com/watch?v=dQw4w9WgXcQ&ob=av3e>`_!</em> 
```

也就是说，斜体呈现但链接不呈现。如何在链接周围显示斜体？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-26T13:25:25.370

问题是 reST 标记不能嵌套。

我设法让它与这个一起工作：

```
Warning: |text|_

.. _text: http://www.youtube.com/watch?v=dQw4w9WgXcQ&ob=av3e

.. |text| replace:: *Watch this* 
```

# ruby-on-rails - 石墨服务器有问题的橡胶宝石

> ID：10669100
> 
> 赞同：0
> 
> 时间：2012-05-19T21:50:37.010
> 
> 标签：ruby-on-rails, rubygems, amazon-ec2, amazon-web-services

我在使用时遇到问题`rubber`，每当我尝试`cap rubber:bootstrap`使用暂存实例时，它总是卡在这个错误上。

```
* executing "sudo -p 'sudo password: '  bash -l -c 'cd /mnt/localstore-production/releases/20120519213905 && RUBBER_ENV=production RAILS_ENV=production ./script/rubber config  --force --file=\"role/graphite_server\"'"
    servers: ["production.localstore.com"]
    [production.localstore.com] executing command
 ** [out :: production.localstore.com] Instance not found for host: ip-10-2-118-252
 ** [out :: production.localstore.com] 
    command finished in 5849ms
failed: "/bin/bash -l -c 'sudo -p '\\''sudo password: '\\''  bash -l -c '\\''cd /mnt/localstore-production/releases/20120519213905 && RUBBER_ENV=production RAILS_ENV=production ./script/rubber config  --force --file=\"role/graphite_server\"'\\'''" on production.localstore.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:32:24.907

实际上问题是我从 AWS 控制台更改了实例的静态 IP，那么为什么实例的主机信息会发生一些变化。

所以我使用这个命令`cap rubber:referesh`来刷新每件事，然后引导实例，它解决了我的问题。

# opencv - 如何从相机捕获的显示测试测试图像中计算伽马校正值？

> ID：10669102
> 
> 赞同：1
> 
> 时间：2012-05-19T21:51:42.887
> 
> 标签：opencv, gamma

我想开发一种可以计算显示系统的伽马校正值的仪器设备，这个想法是使用校准的相机（例如，通过 USB 上的 PTP 从 DSLR 的原始输出）来按值（伽马 = 0，Y = 0,1 step =bit(Y))，然后使用openCV或其他图像处理软件确定实际灰度值并与输入值进行比较，通过曲线拟合或其他方式计算gamma。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:24:08.613

这是可能的，当然。它在很大程度上取决于捕获设备，特别是其准确性和线性度。您提到它是经过校准的相机，但这可能意味着很多事情（例如，它已校准到某个输出色彩空间）。仅仅通过校准并不能告诉您有关其特性的所有信息。例如，在读取 RAW 数据时，您会得到一个线性化表吗？或者你有设备的OECF吗？这是您可以将传感器输出转换为适合您的伽马计算的指标的两种主要方法。

控制回路可能类似于：

```
Monitor ===> Sensor ===> LUT ==> Measurements
   ^                                  |
   |                                  |
   +<-- GPU <--- OS <-- Control SW ---+ 
```

其中传感器是您的相机，LUT 是给定的线性化表或从 OECF 生成的。

您还需要确保在图形库、操作系统、驱动程序和 GPU 硬件之间，您确切知道对指定颜色应用了哪些转换，以便您知道显示器上正在显示什么。（例如，各种 RGB 颜色空间之间的转换）。

根据监视器色域，您可能会发现灰度响应与单个纯通道的响应不同，因此您可能需要分别测量 R、G、B 和 W。

通常，专用传感器（光电二极管等）用于这类事情而不是数码单反相机，但你当然可以从它开始，看看你得到什么样的结果！

您可能对这些 FLOSS 工具感兴趣：

*   [ColorHug](http://www.hughski.com/) - 显示色度计；定制硬件和软件
*   [dispcalGUI](http://dispcalgui.hoech.net/) - 颜色校准软件（支持一系列商业硬件）

# node.js - Nodejs grunt 混淆

> ID：10669104
> 
> 赞同：3
> 
> 时间：2012-05-19T21:52:09.943
> 
> 标签：node.js, obfuscation

我正在使用 Nodejs grunt 模块。我知道 grunt min 选项会缩小文件。但现在我需要混淆像谷歌闭包编译器这样的文件。咕噜有这个功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:16:16.080

grunt min 任务允许您设置 UglifyJS（grunt min 工具）选项，这可以让您更好地控制目标文件的损坏和压缩方式。

[https://github.com/cowboy/grunt/blob/master/docs/task_min.md#specifying-uglifyjs-options](https://github.com/cowboy/grunt/blob/master/docs/task_min.md#specifying-uglifyjs-options)

[https://github.com/mishoo/UglifyJS](https://github.com/mishoo/UglifyJS)

来自 grunt task_min 文档：

```
Specifying UglifyJS options

In this example, custom UglifyJS mangle, squeeze and codegen options are
specified. The listed methods and their expected options are explained in
the API section of the UglifyJS documentation:

The mangle object is passed into the pro.ast_mangle method.
The squeeze object is passed into the pro.ast_squeeze method.
The codegen object is passed into the pro.gen_code method.

// Project configuration.
grunt.initConfig({
  min: {
    dist: {
      src: ['dist/built.js'],
      dest: 'dist/built.min.js'
    }
  },
  uglify: {
    mangle: {toplevel: true},
    squeeze: {dead_code: false},
    codegen: {quote_keys: true}
  }
}); 
```

# php - 在 PHP 中使用 Header 将 XML 文件转换为 CSV

> ID：10669105
> 
> 赞同：-1
> 
> 时间：2012-05-19T21:52:31.127
> 
> 标签：php, xml, csv, xml-parsing

需要帮助将此 xml 文件转换为 csv....

```
<DATA>
  <CONTENT data="123456" data1="0"/>
  <CONTENT data="123456" data1="1"/>
  <CONTENT data="123456" data1="0"/>
</DATA> 
```

csv的结构：

```
data,data1
123456,0
123456,1
123456,0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:35:00.060

此代码将从 XML 转换为 CSV，将其更改为您的需要：

```
 <?
$filexml='cars.xml';
if (file_exists($filexml)) {
    $xml = simplexml_load_file($filexml);
$f = fopen('cars.csv', 'w');
foreach ($xml->car as $car) {
    fputcsv($f, get_object_vars($car),',','"');
}
fclose($f);
}
?> 
```

为了根据您的需要对其进行自定义，请查看[fputcsv](http://php.net/manual/en/function.fputcsv.php)文档和[simplexml_load_file](http://php.net/manual/en/function.simplexml-load-file.php)文档。

# javascript - jQuery 跳转到锚点上方 100px

> ID：10669109
> 
> 赞同：2
> 
> 时间：2012-05-19T21:53:00.923
> 
> 标签：javascript, jquery, html, css

而不是窗口跳转使锚点位于页面顶部，我希望它位于页面顶部下方 100px 处。我不想动画，我宁愿它没有跳两次。

我希望它是一个通用的解决方案。

这是我尝试过的，但它似乎不起作用......

```
$("a.inpage").click(function (e) {
    e.preventDefault();
    $(":target").each(function () {
        var targetpos = $(this).position();
        var scrollpos = targetpos.top - 100;
        window.scrollTo(0,scrollpos);
    })
} 
```

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:01:29.343

:target CSS3 选择器匹配 id 是 URL 的一部分的元素。但是您正在使用 ev.preventDefault() 所以您不关注链接并且 URL 不会更改

最好是做某事

```
$("a.inpage").click(function (e) {
    e.preventDefault();
    var targetpos = $($(this).attr('href')).position(); // note this line
    var scrollpos = targetpos.top - 100;
    window.scrollTo(0,scrollpos);
} 
```

# jquery - 表中的动态输入字段

> ID：10669110
> 
> 赞同：1
> 
> 时间：2012-05-19T21:53:09.347
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, dynamic-tables

我有一个可排序的行表，其中包含用户可以动态添加更多行的输入。但现在我希望能够将这些行分组。理论上：

```
<tr>
  <td><input type="text" name="set[0][name]" value="setname" /></td>
<tr>
<tr>
  <td><input type="text" name="set[0][items][0][itemname]" value="itemname" /><td>
</tr>
<tr>
  <td><input type="text" name="set[0][items][1][itemname]" value="itemname" /><td>
</tr>
<tr>
  <td><input type="text" name="set[1][name]" value="setname" /></td>
<tr>
<tr>
  <td><input type="text" name="set[1][items][0][itemname]" value="itemname" /><td>
</tr>
<tr>
  <td><input type="text" name="set[1][items][1][itemname]" value="itemname" /><td>
</tr> 
```

我希望集合和项目都是可排序的，以便用户可以通过拖动集合行来更改集合的起点，或者通过拖动项目来更改集合中的项目（我使用的是 jQuery 可排序 UI为了这）。

我遇到的问题是弄清楚如何动态添加集合和项目行，同时在排序时保持正确的数组键和值对。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-28T08:13:37.627

```
$(document).on("click", $('.sortable'), function (e) {
    $('.sortable').sortable({
        start: function (event, ui) {
            var start_pos = ui.item.index();
            ui.item.data('start_pos', start_pos);
        },
        change: function (event, ui) {
            var start_pos = ui.item.data('start_pos');
            var index = ui.placeholder.index();
            if (start_pos < index) {
                $('.sortable :nth-child(' + index + ')').addClass('highlights');
            } else {
                $('.sortable').children(' :eq(' + (index + 1) + ')').addClass('highlights');
            }
        },
        update: function (event, ui) {
            var redirectUrl = $('#hiddenRedirectUpdateOrder').val();
            $.ajax({
                url: redirectUrl,
                type: 'POST',
                cache: false,
                contentType: 'application/json',
                data: JSON.stringify({ orders: $(this).sortable('toArray') }),
            });
            $('.sortable').removeClass('highlights');
        }
    });
}); 
```

# c# - ItemCommand事件后如何获取TextBox的Text属性

> ID：10669111
> 
> 赞同：2
> 
> 时间：2012-05-19T21:53:10.600
> 
> 标签：c#, asp.net, textbox, datalist

我在面板中有一个 TextBox 控件，这个面板位于 DataList ItemTemplate 中。

触发 ItemCommand 事件后，一切正常，除了 TextBox.Text 属性始终为空字符串“”，尽管其中有一些文本。

我尝试了几种方法，但没有成功。如果有人可以帮助我，我将不胜感激。简化代码如下所示。谢谢！

ASPX 页面：

```
<asp:DataList ID="dlDataList" runat="server" onitemcommand="dlDataList_ItemCommand">
       <ItemTemplate>

           <asp:Panel ID="pnlReply" runat="server" Visible="False">
             <asp:TextBox ID="txtTextBox" runat="server"></asp:TextBox><br />
             <asp:LinkButton ID="lnkbtnSend" CommandName="Send" runat="server">Send</asp:LinkButton>
           </asp:Panel><br />
           <asp:LinkButton ID="OpenPanel" CommandName="OpenPanel" runat="server">Open panel</asp:LinkButton>
       </ItemTemplate>
</asp:DataList>

</asp:Content> 
```

ASPX.CS 后面的页面代码

```
protected void Page_Load(object sender, EventArgs e)
    {

        FillDataList();

    }

    private void FillDataList()
    {
        List<string> list = new List<string>();
        list.Add("First");
        list.Add("Second");
        list.Add("Third");

        dlDataList.DataSource = list;
        dlDataList.DataBind();
    }

    protected void dlDataList_ItemCommand(object source, DataListCommandEventArgs e)
    {
        if (e.CommandName == "OpenPanel")
        {
            Panel pnlReply = (Panel)e.Item.FindControl("pnlReply");
            pnlReply.Visible = true;
        }
        if (e.CommandName == "Send")
        {
            TextBox txtTextBox = (TextBox)e.Item.FindControl("txtTextBox");
            //I tried this way also..
            //TextBox txtTextBox = (TextBox)e.item.FindControl("pnlReady").FindControl("txtTextBox");
            Label1.Text = txtTextBox.Text;

        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T21:59:50.270

请`IsPostBack`在页面加载事件中使用。没有它，您`FillDataList();`将在每次回发时执行并重置您的`DataList`.

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            FillDataList();

        }
     } 
```

# html - 在此代码中添加空格并更改字体

> ID：10669112
> 
> 赞同：0
> 
> 时间：2012-05-19T21:53:26.360
> 
> 标签：html, css

我的问题是我需要添加一个空格并将字体更改为较小的斜体。

这是我的代码：

```
 $output .= '<tr> '.
    '   <td class="contentfont">&nbsp;&raquo; <a href="' . $subcat_link . '">' . $category_lang[$cat_details['category_id']] . '</a>'.$cat_details['items_counter'].'</td> '.
    '</tr> '; 
```

我想添加一个空格并更改此部分的字体：

```
</a>'.$cat_details['items_counter'].'</td> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:56:09.733

将项目计数器放在一个跨度中，并给它一个类：

```
$output .= '<tr> '.
    '   <td class="contentfont">&nbsp;&raquo; <a href="' . $subcat_link . '">' . $category_lang[$cat_details['category_id']] . '</a><span class="items_counter">'.$cat_details['items_counter'].'</span></td> '.
    '</tr> '; 
```

然后将您想要的样式设置为该类：

```
<style>
.items_counter {
  font-style: italic;
  padding: 0 2px; /* change 2px by whatever you want */
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:57:54.400

只需附加一个额外的空间，听起来很脏，但可以做到：

```
. ' ' . $cat_details['items_counter'] . ' ' . 
```

为了使字体更小，为什么不使用css？

```
td.contentfont{
    font-size: 2px;
    font-style: italic
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:59:29.913

之后`</a>`，添加`&nbsp;<font size="#"><em>`，并在之前`</td>`，添加`</em></font>`？

这很实用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T21:59:49.897

将其包装在 a 中`<span class="classNameThatMakesFontFaceWhatYouWant">...</span>`，并在任何你想要的地方添加空格。

```
$output .= '<tr> '.
    '   <td class="contentfont">&nbsp;&raquo; <a href="' . $subcat_link . '">' . $category_lang[$cat_details['category_id']] . '</a>'. ' <span class="classNameThatMakesFontFaceWhatYouWant">' . $cat_details['items_counter'] . ' </span>' . '</td> '.
    '</tr> '; 
```

# java - 在tomcat上设置一个servlet

> ID：10669113
> 
> 赞同：0
> 
> 时间：2012-05-19T21:53:33.553
> 
> 标签：java, tomcat, servlets

我对 Web 开发非常陌生，我正在尝试用 java 制作一个 servlet。我已经想出了如何设置一个 apache tomcat 服务器。现在，服务器具有以下文件结构：

```
Tomcat6：
       -工作
            -卡特琳娜
                 -本地主机
                       -_
            -catalina.policy
       -webapps
            -根
                 -META-INF
                 -index.html
       -共享
            -类
       -服务器
            -类
       -日志
            -localhost.2012-05-19.log
            -catalina.out
            -catalina.2012-05-19.log
       -conf
            -policy.d
                 - 大量 .policy 文件
            -卡特琳娜
                 -本地主机
                      -ROOT.xml
            -web.xml
            -tomcat-useres.xml
            -server.xml
            -logging.pproperties
            -context.xml
            -pcatalina.properties
       -常见的
            -类

```

我刚刚在 NetBeans 中编辑了一个自动生成的 servlet，并且在 IDE 中它工作正常，但是无论我把它放在我的 tomcat 服务器上的哪个位置，我都会得到 404，或者它只是尝试下载 .class 文件。

我应该把课程放在哪里才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:56:37.117

您必须构建一个 WAR 文件，然后将 warfile 放入 webapps 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:06:04.930

您需要告诉 tomcat 您的 webapp 有 servlet，哪些类实现了 servlet，以及 servlet 映射到哪些 URL 路径。这是在`WEB-INF/web.xml`.

首先，您需要在以下位置定义 servlet `web.xml`：

```
<servlet>
    <servlet-name>HelloWorldServlet</servlet-name>
    <servlet-class>com.foo.myapp.servlets.HelloWorld</servlet-class>
</servlet> 
```

然后，您需要将 servlet（通过它`servlet-name`）映射到 URL 路径，也在`web.xml`：

```
<servlet-mapping>
    <servlet-name>HelloWorldServlet</servlet-name>
    <url-pattern>/HelloWorld</url-pattern>
</servlet-mapping> 
```

假设你有 tomcat 在端口 8080 上监听，如果你去

```
http://your.tomcat.host:8080/webappname/HelloWorld 
```

您将点击 servlet。

请注意，这`HelloWorldServlet`是任意文本。它可以是任何东西，不必与类名或 URL 路径相关（尽管它与它们相似很有用）。重要的是您在标签和标签中的`servlet-name`标签中使用相同的字符串。`servlet``servlet-mapping`

要编写 servlet，您需要实现`Servlet`接口。 **但是**，您很少直接这样做。相反，您（最常见的是）扩展`HttpServlet`和覆盖一个或多个`doXXX()`方法。如果您不编写基于 HTTP 的 servlet，您可以扩展`GenericServlet`并覆盖该`service()`方法。Servlet API 之外的其他库可能会提供您可以扩展的其他特定于协议的 servlet 基类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:28:13.510

如果您在没有任何 IDE 的情况下手动执行此操作，那么这就是结构

```
 Apache Tomcat folder --> wep-app folder --> your_web_app_name --> WEB-INF,.html,.jsp 
                                                                      |
                                                                      |--> classes
                                                                      |
                                                                      |--> lib
                                                                      |
                                                                      |--> web.xml (Description Descriptor) 
```

# c++ - C++11 - std::function、模板和函数对象、奇怪的问题

> ID：10669114
> 
> 赞同：0
> 
> 时间：2012-05-19T21:53:34.820
> 
> 标签：c++, templates, c++11, function-pointers, anonymous-function

我正在玩一些代码，我对一些东西有点困惑。这是一个简化的示例：

我有`Nodes`它执行算术运算（加法，减法等）。我有一个容器，其中包含我的程序中可用的不同操作。这是一个例子：

```
typedef std::binary_function<double, std::vector<double>&, std::vector<Node*>& > my_binary_function;
auto const & product = [](double v, Node* n){ return v * n->GetEvaluation(); };
struct addition : public my_binary_function {
double
    operator()(std::vector<double>& weights, std::vector<Node*>& subtrees) {
        return std::inner_product(weights.begin(), weights.end(), 
        subtrees.begin(), 0, std::plus<double>(), product);
    }
}; 
```

现在，此时有两种选择：

1）使用函数类型：

```
typedef double (*my_function)(std::vector<double>&, std::vector<Node*>&); 
```

然后使用以下模板化函数来转换函子：

```
template<typename F> typename F::result_type
func(typename F::first_argument_type arg1, typename F::second_argument_type arg2) {
    return F()(arg1, arg2);
} 
```

2）使用函数包装类型，即`std::function`，这样我就有

```
typedef std::function<double (std::vector<double>&, std::vector<Node*>&)> my_function; 
```

这一切都归结为这样的事情：

```
LoadDefaultFunctions() {
    int minArity = 2;
    int maxArity = 2;
    function_set_.AddFunction("Add", func<addition> , minArity, maxArity, 1.0); // case 1
OR
    function_set_.AddFunction("Add", addition(), minArity, maxArity, 1.0); // case 2 
```

现在的问题是：

a) 如果我使用方法 1，我会收到以下编译错误：

```
error: invalid initialization of non-const reference of type 
'std::binary_function<double, std::vector<double>&, 
std::vector<Node*>&>::result_type {aka std::vector<Node*>&}' 
from an rvalue of type 'double' 
```

如果我更改模板，错误就会消失（请注意参数现在没有真正意义）：

```
template <typename F> typename F::first_argument_type
func1(typename F::second_argument_type arg1, typename F::result_type arg2) {
    return F()(arg1, arg2); 
} 
```

我觉得很奇怪，因为对于其他类型，例如`binary_op<double, double, double>`，第一种形式可以正常工作。那么，发生了什么事？

b) 1) 比 2) 快（小幅度）。我在想我可能错过了一些通过引用传递函子的巧妙技巧，或者以某种方式可以`std::function`更有效地包装它。有任何想法吗？

c) 如果我使用 2) 中的 typedef，但另外我仍然使用`func`函子产生一个函数，然后`std::function`处理它，它仍然比 2) 快。那是：

```
`my_function = func<addition>` is faster than `my_function = addition()` 
```

如果有人能帮助我理解这一切背后的机制，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:06:45.257

> b) 1) 比 2) 快（小幅度）。我在想我可能错过了一些通过引用传递函子的巧妙技巧，或者以某种方式使 std::function 能够更有效地包装它。有任何想法吗？

是的，我希望 1 比 2 快。`std::function`执行类型擦除（存储的*可调用*的确切类型不存在于封闭`std::function`类型中），这需要使用虚函数调用。另一方面，当您使用模板时，确切的类型是已知的，编译器有更大的机会内联调用，使其成为一种免费的解决方案。这与您如何传递函子无关。

**错误**

模板参数的顺序不正确：

```
typedef std::binary_function<double,                 // arg1
                             std::vector<double>&,   // arg2
                             std::vector<Node*>&     // return type
                            > my_binary_function;

struct addition : public my_binary_function {
    double                                           // return type
    operator()( std::vector<double>& weights,        // arg1 
                std::vector<Node*>& subtrees)        // arg2
    { ... 
```

也就是说，继承 from`binary_function`正在向您的类添加一些 typedef，但这些不是正确的 typedef。然后，当您在下一个模板中使用 typedef 时，类型不匹配。该模板期望您`operator()`将返回 a `std::vector<Node*>&`，这是 的返回类型`func`，但是当您调用仿函数时，您得到的是 a `double`，这会导致错误：

> `std::vector<Node*>&`... from的无效初始化`double`

# javascript - 用于 ipad 的 javascript 网格控件

> ID：10669115
> 
> 赞同：3
> 
> 时间：2012-05-19T21:53:39.690
> 
> 标签：javascript, ipad, datagrid

我们有一个专为电脑浏览而设计的网络应用程序。对于这个应用程序，我们使用基础网格控件来呈现信息，其中一些是分层的。我们可以按列分组，对它们进行排序等。

我们想将此应用程序转换为与 Ipad 兼容的 Web 应用程序。我们正在考虑使用jquery mobile，但仍处于早期阶段。jquery mobile 中没有类似网格的控件，有列表和可折叠控件，但没有像排序、分组等灵活性的网格。

有没有其他选择或建议。

我们并没有真正专注于 Jquery mobile，它可以是任何东西，但应该是基于 javascript 的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-31T07:29:30.687

您可以使用 JSLightGrid 插件。它响应迅速，受移动浏览器支持，重量非常轻，性能非常好，总之适合移动应用程序。[https://github.com/chanakyachatterjee/JSLightGrid](https://github.com/chanakyachatterjee/JSLightGrid)

但是您需要编写自定义代码分组，除非它们包含在下一个版本中。

它是纯 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:07:13.603

移动 Web 框架不如桌面框架成熟。您所描述的功能很难在移动环境的限制下实现。我不知道可以满足您需要的移动框架。

您的选择是：

1.  使用像 jQuery Mobile 这样的东西作为基础自己构建这个（我会使用[Sencha Touch](http://www.sencha.com/products/touch/)）。
2.  花钱请人做#1。
3.  更改您的 iPad 设计，使其不需要此功能。

（对不起，我没有更好的消息。）

# android - 在安卓平板电脑上分屏

> ID：10669120
> 
> 赞同：6
> 
> 时间：2012-05-19T21:54:46.447
> 
> 标签：android, android-layout

我见过几个将屏幕分成两部分的平板电脑应用程序。通常是一个菜单和一个主窗口。我试图用谷歌搜索一些关于它的东西，但找不到任何东西。是否有开箱即用的解决方案，还是我自己构建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:48:09.313

查看Android 设计网站上有关[**多窗格布局的文章。**](http://developer.android.com/design/patterns/multi-pane-layouts.html)它应该有助于澄清其背后的想法。

至于实际实现它们，您必须使用[`Fragment`](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)s. 这里有几个[教程](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)可以帮助您[入门](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T22:04:38.640

sdk 代码示例很可能已经在您的计算机上，并且可以通过 Eclipse 的“新 Android 项目...”向导访问。

或者，如果您拥有 Honeycomb 平板电脑并且只想在不查看代码的情况下使用 ApiDemos 示例，您可以在 Google Play 商店中搜索 ApiDemos 并下载旁边有 4 到 5 颗星的一个 ApiDemos 项目。

在平板本身上，很多 ApiDemos 都会被双重列出，但那是因为第一个通常是蜂窝前版本，第二个是蜂窝后版本。

# node.js - mongo native ensureIndex 不创建索引

> ID：10669121
> 
> 赞同：5
> 
> 时间：2012-05-19T21:54:50.563
> 
> 标签：node.js, mongodb

我正在为节点使用 mongodb 本机驱动程序。我`ensureIndex({ keywords: 1})`在检索集合后打电话。当我签入 mongo 控制台时，调用`db.mycol.getIndexes()`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:29:19.457

API 文档有点帮助：http: [//mongodb.github.com/node-mongodb-native/api-generated/db.html#ensureindex](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#ensureindex)

您应该在数据库对象上调用 ensureIndex，而不是在集合上。这与 JavaScript 控制台相矛盾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T21:31:46.600

我遇到了类似的问题，问题是我在调用 ensureIndex 之前没有打开数据库。我正在做的是（咖啡脚本）

```
db.collection('resources').ensureIndex {"$**": "text"}, {name: "email_index_text"},(err, indexName) ->
        console.log indexName
        console.log err
        db.close() 
```

有效的是

```
db.open (err,database) ->
    db.collection('resources').ensureIndex {"$**": "text"}, {name: "email_index_text"},(err, indexName) ->
        console.log indexName
        console.log err
        db.close() 
```

第一个片段根本没有做任何事情。没有创建索引，也没有抛出错误。

# maven - 如何教maven CAS Authentification

> ID：10669125
> 
> 赞同：1
> 
> 时间：2012-05-19T21:55:31.040
> 
> 标签：maven, cas

我想向 maven 添加 CAS（带有 HTML 登录表单）支持

我目前正在对我的想法进行原型设计：

1.  我已经设置了一个全新的 nexus 安装
2.  将它放在启用 CAS 的 Apache 后面
3.  将 apache 与我的目标 CAS 服务器连接起来
4.  从浏览器测试整个事情 ==> OK
5.  测试 maven 工件分辨率 ==> KO（如预期）

最糟糕的是maven将响应页面作为jar处理......

我的第一次尝试是构建一个[Alternative Wagon Providers](http://maven.apache.org/guides/mini/guide-wagon-providers.html)，但我无法使其工作......部署了替代提供程序，但我的配置在运行时被忽略：

```
-Dmaven.wagon.provider.http=extendedHttp 
```

也不

```
<wagonProvider>http-extendedHttp</wagonProvider> 
```

在新提供者的 jar 中：

```
<component-set>
    <components>
      <component>
        <role>org.apache.maven.wagon.Wagon</role>
        <role-hint>http-extendedHttp</role-hint>
        <implementation>org.apache.maven.wagon.providers.http.extended.ExtHttpWagon</implementation>
        <instantiation-strategy>per-lookup</instantiation-strategy>
      </component>
      <component>
        <role>org.apache.maven.wagon.Wagon</role>
        <role-hint>https-extendedHttp</role-hint>
        <implementation>org.apache.maven.wagon.providers.http.extended.ExtHttpWagon</implementation>
        <instantiation-strategy>per-lookup</instantiation-strategy>
      </component>
    </components>
</component-set> 
```

我做错了什么 ？？

# python - Python 正则表达式匹配或潜在匹配

> ID：10669133
> 
> 赞同：1
> 
> 时间：2012-05-19T21:56:34.307
> 
> 标签：python, regex

# 问题：

如何使用 Python 的正则表达式模块 ( `re`) 来确定是否已进行匹配，或者是否可以进行潜在匹配？

# 细节：

我想要一个正则表达式模式，它以正确的顺序搜索单词模式，而不管它们之间是什么。我想要一个函数，`Yes`如果找到，`Maybe`如果仍然可以找到匹配项或者`No`找不到匹配项，则返回。我们正在寻找模式`One|....|Two|....|Three`，这里有一些示例（注意名称、计数或顺序并不重要，我只关心三个单词`One`, `Two`and `Three`，中间可接受的单词是`John`, `Malkovich`, `Stamos`and `Travolta`）。

**返回是：**

```
One|John|Malkovich|Two|John|Stamos|Three|John|Travolta 
```

**返回是：**

```
One|John|Two|John|Three|John 
```

**返回是：**

```
One|Two|Three 
```

**返回可能：**

```
One|Two 
```

**返回可能：**

```
One 
```

**返回否：**

```
Three|Two|One 
```

我知道这些例子不是无懈可击的，所以这就是我为正则表达式获得“是”的条件：

```
if re.match('One\|(John\||Malkovich\||Stamos\||Travolta\|)*Two\|(John\||Malkovich\||Stamos\||Travolta\|)*Three\|(John\||Malkovich\||Stamos\||Travolta\|)*', 'One|John|Malkovich|Two|John|Stamos|Three|John|Travolta') != None
   return 'Yes' 
```

显然，如果`Three|Two|One`上面的模式会失败，我们可以 return `No`，但是我该如何检查这种`Maybe`情况呢？我想过嵌套括号，就像这样（注意，未经测试）

```
if re.match('One\|((John\||Malkovich\||Stamos\||Travolta\|)*Two(\|(John\||Malkovich\||Stamos\||Travolta\|)*Three\|(John\||Malkovich\||Stamos\||Travolta\|)*)*)*', 'One|John|Malkovich|Two|John|Stamos|Three|John|Travolta') != None
   return 'Yes' 
```

但我不认为那会做我想做的事。

# 更多细节：

我实际上并不是在寻找`Travoltas`和`Malkovichs`（令人震惊，我知道）。我正在匹配 inotify 模式，例如`IN_MOVE`, `IN_CREATE`, `IN_OPEN`，并且我正在记录它们并获取数百个，然后我进入然后寻找特定模式，例如`IN_ACCESS`... `IN_OPEN`.... `IN_MODIFY`，但在某些情况下我没有我不想要在其他人`IN_DELETE`之后`IN_OPEN`。我本质上是模式匹配，以使用 inotify 来检测*文本编辑器何时变得疯狂*，并且他们试图通过执行临时文件交换保存而不是仅仅修改文件来粉碎程序员的灵魂。我不想立即释放这些日志，但我只想在必要时保留它们。`Maybe`意味着不要删除日志。`Yes`意味着做某事然后擦除日志，`No`意味着不做任何事情但仍然擦除日志。因为我将为每个程序设置多个规则（即`vim`v `gedit`v `emacs`），所以我想使用一个正则表达式，它更易于阅读，更容易编写，然后创建一个巨大的树，或者正如用户[Joel](https://stackoverflow.com/users/1142167/joel-cornett)建议的那样，只需使用一个循环

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:21:43.793

我不会为此使用正则表达式。但这绝对是可能的：

```
regex = re.compile(
    r"""^           # Start of string
    (?:             # Match...
     (?:            # one of the following:
      One()         # One (use empty capturing group to indicate match)
     |              # or
      \1Two()       # Two if One has matched previously
     |              # or
      \1\2Three()   # Three if One and Two have matched previously
     |              # or
      John          # any of the other strings
     |              # etc.
      Malkovich
     |
      Stamos
     |
      Travolta
     )              # End of alternation
     \|?            # followed by optional separator
    )*              # any number of repeats
    $               # until the end of the string.""", 
    re.VERBOSE) 
```

现在，您可以通过检查是否完全匹配来检查 YES 和 MAYBE：

```
>>> yes = regex.match("One|John|Malkovich|Two|John|Stamos|Three|John|Travolta")
>>> yes
<_sre.SRE_Match object at 0x0000000001F90620>
>>> maybe = regex.match("One|John|Malkovich|Two|John|Stamos")
>>> maybe
<_sre.SRE_Match object at 0x0000000001F904F0> 
```

您可以通过检查是否所有组都参加了比赛（即 are not ）来区分 YES 和 MAYBE `None`：

```
>>> yes.groups()
('', '', '')
>>> maybe.groups()
('', '', None) 
```

如果正则表达式根本不匹配，那对您来说就是“否”：

```
>>> no = regex.match("Three|Two|One")
>>> no is None
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T22:10:25.553

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。- 杰米扎温斯基

也许像这样的算法会更合适。这是一些伪代码。

```
matchlist.current = matchlist.first()
for each word in input
    if word = matchlist.current
        matchlist.current = matchlist.next() // assuming next returns null if at end of list
    else if not allowedlist.contains(word)
        return 'No'
if matchlist.current = null // we hit the end of the list
    return 'Yes'
return 'Maybe' 
```

# eclipse - pydev 不会安装在 Eclipse 3.72 中

> ID：10669134
> 
> 赞同：2
> 
> 时间：2012-05-19T21:56:37.107
> 
> 标签：eclipse, pydev

Ubuntu 上 w/3.72 的新用户。我正在尝试按照说明进入帮助>安装新软件的教程。然后添加，然后输入位置 pydev.org/updates 或尝试 update-production-pydev.s3.amazonaws.com/pydev/updates/site.xml 以获取将 pydev 安装到 Eclipse 的选项。

我尝试但在输入/拨号添加框中点击确定后没有任何反应。还有其他事情要做吗 - 什么也没有发生，下面的文本区域中没有出现复选框，我在大文本区域中看到了一些选项？

我有一个快速的连接。有什么我想念的吗？似乎应该很容易。什么都没发生。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:58:20.237

我也遇到了这个问题，并通过取消选中安装窗口底部的“在安装过程中联系所有更新站点以查找所需软件”来修复它。

/Edit... 我使用**http://pydev.org/updates**作为位置

# iphone - UITableView 滚动慢，内存泄漏问题

> ID：10669139
> 
> 赞同：1
> 
> 时间：2012-05-19T21:57:10.110
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个`UITableView`和一个`UITableCell`子类。每个表格单元格都有两个`scrollviews`，每个都旋转动态数量的标签，这些标签是在我的表格单元格实现中创建的。我的滚动性能很差，我相信这是由于内存泄漏造成的。我引用这个`stackoverflow correct answer to fix my problem`：[cellForRowAtIndexPath 内存管理](https://stackoverflow.com/questions/8859735/cellforrowatindexpath-memory-management)。

我不知道如何调整我的代码，所以我不必每次创建标签时都分配内存。

**视图控制器.m**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Custom Cell";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSDictionary *dictionary = [parseDataArray objectAtIndex: indexPath.row];

NSArray *popularLinkTitleArray = [dictionary objectForKey:@"popularLinkTitleArray"];
NSString *soundCloudLink = [dictionary objectForKey:@"soundCloudLink"];
NSArray *soundCloudTrackTitleArray = [dictionary objectForKey:@"soundCloudTrackTitleArray"];

cell.artistNameLabel.text = artistName;

[cell createPopularLinkLabels: popularLinkTitleArray];

return cell;
} 
```

**CustomCell.m**

```
- (void)layoutScrollLabelsForPopularLinkScrollView: (float)arrayCount
{
UIView *view = nil;
NSArray *subviews = [popularLinkScrollView subviews];

// reposition all image subviews in a horizontal serial fashion
CGFloat curXLoc = 0;
for (view in subviews)
{
    if ([view isKindOfClass:[UILabel class]] && view.tag >= 0)
    {
        CGRect frame = view.frame;
        frame.origin = CGPointMake(curXLoc, 0);
        view.frame = frame;

        curXLoc += (kScrollObjWidth);
    }
}

[popularLinkScrollView setContentSize:CGSizeMake((arrayCount * kScrollObjWidth),    [popularLinkScrollView bounds].size.height)];

}

-(void) createPopularLinkLabels:(NSArray *) popularLinkTitleArray
{

popularLinkScrollView.clipsToBounds = YES;

kScrollObjHeight = popularLinkScrollView.frame.size.height;
kScrollObjWidth = popularLinkScrollView.frame.size.width;

for (UIView* subView in popularLinkScrollView.subviews)
    [subView removeFromSuperview];

NSUInteger i;
    for (i = 0; i < popularLinkTitleArray.count; i++)
    {
        NSString *string = [NSString stringWithFormat:@"%@", [popularLinkTitleArray objectAtIndex: i]];
        UILabel *label = [[UILabel alloc] init];
        label.text = [NSString stringWithFormat:@"%@", string];
        label.backgroundColor = [UIColor clearColor];
        label.numberOfLines = 5;
        [label setFont:[UIFont fontWithName:@"Calibri" size:18]];

        // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
        CGRect rect = label.frame;
        rect.size.height = kScrollObjHeight;
        rect.size.width = kScrollObjWidth;
        label.frame = rect;
        label.tag = i;  // tag our images for later use when we place them in serial fashion
        [popularLinkScrollView addSubview:label];
    }

[self layoutScrollLabelsForPopularLinkScrollView:popularLinkTitleArray.count];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:17:05.293

你在用ARC吗？如果没有，你应该自动释放到

```
cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease] 
```

单元格对象被重复使用，您无需在每次更改内容时重新添加子视图。如果需要，只需更改数据并更新标签框架。

如果您有明显不同的单元格，请考虑使用单独的自定义单元格类。您需要为重用标识符使用单独的值。

还可以考虑不创建自定义单元格，而只是将元素添加到标准 UITableViewCell。 [阅读有关设置单元格样式的内容](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:16:51.410

您可以做的第一件事是尝试在 createPopularLinkLabels 中重用 UILabel。现在，您只是在添加更多之前删除它们。

但是，如果所有单元格中流行链接的数量不同，那么您将不得不删除剩余的链接或隐藏它们，并且无法避免内存分配。

更好的解决方案是在滚动视图中插入自定义 UIView 并手动绘制所有文本，而不是创建大量子视图。

希望这会有所帮助，托马斯

# compiler-errors - NASM 'org' 指令与'-fobj'

> ID：10669144
> 
> 赞同：1
> 
> 时间：2012-05-19T21:57:58.697
> 
> 标签：compiler-errors, syntax-error, nasm, object-files

为什么 NASM 不使用 org 指令编译成目标文件？

```
org 0x7C00
nop
mov ax, ax
nop 
```

如果我编译这个：

```
nasm -O0 -fobj temp.asm 
```

无论出于何种原因，NASM 都会给我一个错误：

```
temp.asm:1: error: parser: instruction expected 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:47:19.087

在这种情况下，`org`您应该使用`resb`：

```
; file: nasmOrg.asm
; assemble: nasm -f obj nasmOrg.asm -o nasmOrg.obj

SEGMENT _TEXT PUBLIC CLASS=CODE USE16

;        resb    0x0100 ; reserve 0x0100 bytes for a .COM program
        resb    0x7C00 ; reserve 0x7C00 bytes for a boot sector
..start:
nop
mov ax, ax
nop 
```

这就是您如何将 .COM 程序的不同部分编译成单独的目标文件的方法。如果您使用 TLINK 作为链接器，下一步将是：

> tlink.exe /t nasmOrg.obj [任何其他目标文件], nasmOrg.bin

请注意，如果您省略了生成的二进制文件 (nasmOrg.bin) 的逗号和以下名称，或者您指定了带有 .COM 扩展名的名称（例如 nasmOrg.com），TLINK 将拒绝链接，它会显示如下内容：

> 错误：无法生成 COM 文件：初始入口点地址无效

您必须将 0x7C00 更改为 0x0100 才能制作 .COM 程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T22:22:46.447

使用该`-obj`选项将以[Object Module Format](http://en.wikipedia.org/wiki/Relocatable_Object_Module_Format)输出组装文件。[根据手册](http://www.nasm.us/doc/nasmdoc7.html)`org`，仅支持以二进制格式使用该指令。

这样做的原因是链接器应该为您处理重定位。

如果您想创建可用空间，也许该`times`指令会帮助您：

```
times 10   db 0    ; 10 zero bytes 
```

# excel - 如果单元格的内容与条件 VBA-EXCEL 匹配，则将整行复制到另一个工作表

> ID：10669145
> 
> 赞同：1
> 
> 时间：2012-05-19T21:58:06.883
> 
> 标签：excel, vba

如果数量等于 0，我想复制名称和描述，这样我就可以订购我没有的水果。每当看到“STOP”时，它就会从 A2 开始，然后停止。

![在此处输入图像描述](../Images/bbb942695924eb1baf9321a04e85a57d.png)

我有代码： ![在此处输入图像描述](../Images/3f413fff7fe28aa2e9d25a9aa90b05d8.png)

**但是，代码不会自行停止，我必须在它运行时中断它。当我只需要前 2 列时，它会复制整个行之间的所有空行。我的问题是 1\. 如何让程序知道在 A 列看到“STOP”时它应该停止？只复制一个空行？并且只复制前两列（或我想要的列数）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:12:17.520

1.  停止循环
    问题出在您的`While`子句中：您正在将字符串的长度与字符串进行比较-永远不会`TRUE`

2.  仅复制非空行
    测试有效数据

3.  复制所需的列数
    参见示例代码

FWIW 您的代码可以做一些改进 - 这是我对您的要求的看法

```
Sub CopySample()
    Dim shSrc As Worksheet
    Dim shDst As Worksheet
    Dim rSrc As Range
    Dim rDst As Range
    Dim numCol As Long ' number of columns to copy

    On Error GoTo EH

    numCol = 2

    ' select source and dest sheets
    Set shSrc = ActiveWorkbook.Worksheets("Sheet1")
    Set shDst = ActiveWorkbook.Worksheets("Sheet2")

    ' Select initial rows
    Set rSrc = shSrc.Cells(2, 1)
    Set rDst = shDst.Cells(23, 1)

    ' loop over source
    Do While rSrc <> "STOP"
        ' Test Source row, Qty = 0 and Name is not blank
        With rSrc
            If .Offset(0, 2) = 0 And .Value <> "" Then
                'Copy
                .Resize(1, numCol).Copy rDst.Resize(1, numCol)
                Set rDst = rDst.Offset(1, 0)
            End If
        End With
        Set rSrc = rSrc.Offset(1, 0)
    Loop
Exit Sub
EH:
    MsgBox "Error " & Err.Description
End Sub 
```

请注意，对于大量数据，在一个范围内循环可能会很慢。在这种情况下可能没问题，但有一些方法可以提高速度。

# android - 在android中动态填充地图

> ID：10669155
> 
> 赞同：1
> 
> 时间：2012-05-19T22:00:15.263
> 
> 标签：android, dynamic, map, overlay, point

所以我有一个 mapView，我想根据数据库动态填充它。我可以单独完成每个地理点，但由于某种原因，当我尝试全部完成时，它不会在地图上显示这些点。如果有人有建议，请告诉我:-)

```
public class FieldTrip extends MapActivity {
  private MapView map=null;
  private MyLocationOverlay me=null;
  private String theLat;
  private String theLong;
  private Double theDLat;
  private Double theDLong;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maptastic);

    map=(MapView)findViewById(R.id.mapView);

    map.getController().setCenter(getPoint(40.76793169992044,
                                            -73.98180484771729));
    map.getController().setZoom(17);
    map.setBuiltInZoomControls(true);

    Drawable marker=getResources().getDrawable(R.drawable.supaaaa);

    marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                            marker.getIntrinsicHeight());

    map.getOverlays().add(new SitesOverlay(marker));

    me=new MyLocationOverlay(this, map);
    map.getOverlays().add(me);
  }

  @Override
  public void onResume() {
    super.onResume();

    me.enableCompass();
  }   

  @Override
  public void onPause() {
    super.onPause();

    me.disableCompass();
  }   

  @Override
  protected boolean isRouteDisplayed() {
    return(false);
  }

  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_S) {
      map.setSatellite(!map.isSatellite());
      return(true);
    }
    else if (keyCode == KeyEvent.KEYCODE_Z) {
      map.displayZoomControls(true);
      return(true);
    }

    return(super.onKeyDown(keyCode, event));
  }

  private GeoPoint getPoint(double lat, double lon) {
    return(new GeoPoint((int)(lat*1000000.0),
                          (int)(lon*1000000.0)));
  }

private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> items=new ArrayList<OverlayItem>();

    ///need to make this dy-NAMIK :p
    public SitesOverlay(Drawable marker) {
      super(marker);

      for (Entry<Integer, FieldTripStop> cur : Statics.fieldTripStops.entrySet())
        {
            // get the FieldTripStop object from the current hash table entry
            Statics.currentFTStop = cur.getValue();
            // concatenate numbers before (all) and after (6) the decimal, since
            // geopoints only accept 6 numbers past the decimal.
            theLat = Statics.currentFTStop.latitude;
            theLong = Statics.currentFTStop.longitude;
            theDLat = Double.parseDouble(theLat);
            theDLong = Double.parseDouble(theLong);

      boundCenterBottom(marker);

      items.add(new OverlayItem(getPoint(theDLat,
              theDLong),
                                "RANDOM TEXT?",
                                "RANDOM TEXT LALALA"));

        }
      populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
      return(items.get(i));
    }

    @Override
    protected boolean onTap(int i) {
      Toast.makeText(FieldTrip.this,
                      items.get(i).getSnippet(),
                      Toast.LENGTH_SHORT).show();

      return(true);
    }

    @Override
    public int size() {
      return(items.size());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:52:38.143

这段代码对我来说是正确的。如果您没有看到所有的点，那么`fieldTripStops`就没有您希望显示的所有点。仔细检查集合中的元素`fieldTripStops`。

# excel - 尝试使用 VBA 设置依赖列表验证，得到“应用程序定义或对象定义错误”

> ID：10669156
> 
> 赞同：2
> 
> 时间：2012-05-19T22:00:25.353
> 
> 标签：excel, validation, vba

我正在尝试根据另一个单元格的内容为一个单元格设置列表验证，使用一个命名范围，该范围将我的数据输入表上的单元格内容与工作表上的范围相匹配`Validation`（请参阅[此 SO question](https://stackoverflow.com/questions/10657811/set-drop-down-values-based-on-vlookup)）。命名范围的公式为：

```
=OFFSET(validation!$B$1,MATCH(INDIRECT(ADDRESS(CELL("row"),CELL("col")-2)),validation!$A:$A,0)-1,0,COUNTIF(validation!$A:$A,INDIRECT(ADDRESS(CELL("row"),CELL("col")-2))),1) 
```

问题是，如果引用的单元格`ADDRESS(CELL("row"),CELL("col")-2)`为空，则使用 VBA 设置验证`Range.Validation.Add`会出现错误：

```
Application-defined or object-defined error 
```

然后它不会将验证添加到单元格中。我可以在`Validation.Add`通话中进行任何类型的错误处理以确保设置验证吗？或者一种修改命名范围公式的方法，以便即使内容`ADDRESS(CELL("row"),CELL("col")-2)`不返回工作`validation`表上的匹配项，它也会输出一个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:05:40.830

作为*解决方法，*请尝试以下操作：

1.  修改`ValList`命名范围以引用简单范围。
2.  设置验证。
3.  将“ValList”恢复为原始参考。

有点笨拙，但它似乎工作。

```
Sub SetVal()
    Dim s As String

    s = ActiveWorkbook.Names("ValList").RefersTo
    ActiveWorkbook.Names("ValList").RefersTo = "=UserEntry!$A$3:$A$6"

    With Selection.Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, Formula1:="=ValList"
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With

    ThisWorkbook.Names("ValList").RefersTo = s
End Sub 
```

# javascript - 获取名为 qTip 的元素？

> ID：10669162
> 
> 赞同：0
> 
> 时间：2012-05-19T22:01:33.897
> 
> 标签：javascript, jquery, html, object, qtip

我想获取调用 qtip 弹出窗口的元素。[在此处](http://craigsworks.com/projects/qtip/docs/reference/#position-target)的文档中，它允许您设置位置。我想使用 jquery 选择器来设置位置，例如`$(this).find('.icon')`. 问题是这`this`不是称为 qtip 的元素（我认为它是`window`）。

有谁知道我如何获得调用它的句柄（就像我将 target 设置为 一样`false`）？

谢谢。

在 qtip 源代码中，我发现了这个： `if(config.position.target === false) config.position.target = $(this);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:54:54.913

这是我想出的解决方案，它似乎有效。如果我修改了 qtip 脚本，可能有更好的方法，但我想不管它。

```
$(".report-error").qtip(
{
    content: 'test content',
    position:
    {
        adjust:
        {
            screen: true
        },
        target: false, //it is changed in the 'beforeRender' part in api section. by leaving it as false here in the qtip it will set it as the position I need using $(this)
        corner:
        {
            target: 'bottomMiddle',
            tooltip: 'topRight'
        }
    },
    show:
    {
        when:
        {
            event: 'click'    
        }
    },
    style:
    { 
        name: 'cream',
        tip:
        {
            corner: 'topRight'
        },
        padding: 0,
        width: 400,
        border:
        {
            radius: 5,
            width: 0
        }
    },
    hide:
    {
        when:
        {
            event: 'unfocus'
        }
    },
    api:
    {
        beforeRender: function() { //get the position that qtip found with $(this) in it's script and change it using that as the start position

            this.options.position.target = $(this.elements.target).find('.icon');
            this.elements.target = this.options.position.target; //update this as well. I don't actually know what it's use is
        }
    }
}); 
```

它现在在[http://wncba.co.uk/results/的网站上运行](http://wncba.co.uk/results/)

# jquery - Jquery：选择所有元素，除了具有特定属性的特定子元素

> ID：10669163
> 
> 赞同：3
> 
> 时间：2012-05-19T22:01:36.497
> 
> 标签：jquery, jquery-selectors

假设我有这样的事情：

```
<div class="testdiv">
    <a href="/link1">link 1</a>
</div>
<div class="testdiv">
    <a href="/link2">link 2</a>
</div>
<div class="testdiv">
    <a href="/link3">link 3</a>
</div>
<div class="testdiv">
    <a href="/link4">link 4</a>
</div> 
```

现在我想选择所有`<div>`的类，`testdiv`除了`div`有一个`<a>`带有属性的孩子`href="/link3"`，如何用 jQuery 做到这一点？

我知道我可以这样做：

```
$('div.testdiv') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T22:08:35.380

使用`:not`+`:has`可以通过一个选择器轻松完成：

```
$('div.testdiv:not(:has(a[href="/link3"]))') 
```

如果您不引用属性中的值（“CSS 标识符”），则需要`/`使用两个反斜杠（ ）转义斜杠（ `\\`）：

```
$('div.testdiv:not(:has(a[href=\\/link3]))') 
```

[**现场演示**](http://jsfiddle.net/pF5y8/)

如果一个 div 中只能有一个锚点，你可以使用这个：

```
$('div.testdiv:has(a[href!="\\/link3")') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T22:06:03.817

您可以[`filter`](http://api.jquery.com/filter/)为此使用：

```
var elements = $('.testdiv').filter(function(){
    return !$(this).find('a[href=\\/link3]').length;
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T22:03:53.803

```
$('div.testdiv a[href^=/link3').parents(); 
```

# android - 安卓网络连接

> ID：10669165
> 
> 赞同：0
> 
> 时间：2012-05-19T22:02:03.277
> 
> 标签：android, networking

有人可以解释为什么我收到错误：

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.project/com.project.Deals}: java.lang.IllegalStateException: System services not available to Activities before onCreate() 
```

当我使用下面的两个类时，已经这样做了很长时间了。我很感激帮助

```
public class Deals extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textview = new TextView(this);
        textview.setText("This is the Artists tab");
        setContentView(textview);

        NetworkConnection nc = new NetworkConnection();
        boolean networkAvail = nc.isNetworkConnAvail();
        if (networkAvail == true){
        }

    }
};

public class NetworkConnection extends Activity {
/** Called when the activity is first created. */

public boolean isNetworkConnAvail() {

        ConnectivityManager connMgr = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if (networkInfo != null)
            return networkInfo.isConnected();

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:25:07.687

将此添加到您的清单中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

并删除这个：

```
extends Activity 
```

在`class NetworkConnection`

**更新**

更好的主意是将您的代码更改为：

```
public class Deals extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

boolean networkAvail = isNetworkConnAvail();
if (networkAvail == true){
  //do something
}

}

public boolean isNetworkConnAvail() {

ConnectivityManager connMgr = (ConnectivityManager) 
    getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
if (networkInfo != null)
    return networkInfo.isConnected();

return false;
}

} 
```

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T22:30:39.550

问题出在你的 NetworkConnection 类中，你从不调用 onCreate 试试这个：

```
public boolean isNetworkConnAvail(Context context) {

    ConnectivityManager connMgr = (ConnectivityManager) 
        context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    if (networkInfo != null)
        return networkInfo.isConnected();

    return false;
} 
```

并从您的其他班级这样称呼它：

```
nc.isNetworkConnAvail(this); 
```

或者在 NetworkConnection 的构造函数中调用超类的 onCreate 方法。如果您只是为了能够使用 getSystemService 而扩展 Activity ，那么您最好不要扩展 Activity ，而只需在构造函数或方法本身中传递 Context ，因为这样您就可以访问这些方法： )

# java - Java 读取/写入文件 - BufferedReader BufferedWriter

> ID：10669168
> 
> 赞同：4
> 
> 时间：2012-05-19T22:02:42.460
> 
> 标签：java, io, bufferedreader, bufferedwriter

这是一个代码片段，但基本上我想要做的是从名为“listings.txt”的文件中读取并写入名为“overview.txt”的文件。我想从“listings.txt”中取出信息并将它们按原样放入“overview.txt”（我稍后会弄清楚其余部分）。

文件“overview.txt”被创建并似乎循环通过文件“listings.txt”并写入“overview.txt”。但是，一旦我打开文件“overview.txt”，它就是空的。
有人可以快速浏览一下我的代码并发现错误吗？

```
package yesOverview;

import java.io.BufferedReader;
import java.io.*;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;

public class yesOverview {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        String strInput = "foo.bar";
        System.out.print("Please enter the listings file (the full path to the file): ");
        strInput = input.next();

        //This makes sure that the inputed file is listings.txt as required for KET1 task 2
        while (strInput.contains("listings.txt") == false) {
            System.out.print("Incorrect file. Please enter listings file(the full path to the file): ");
            strInput = input.next();
        }

        infos(strInput);
        input.close();
    }

    public static void infos(String strInput) {
        Scanner input2 = new Scanner(System.in);
        System.out.print("Please enter the overview.txt file (the full path to the file): ");
        String strInput2 = "foo.bar";
        strInput2 = input2.next();

        //This also makes sure that the overview.txt file is provided. 
        while (strInput2.contains("overview.txt") == false) {
            System.out.print("Incorrect file. Please enter overview file(the full path to the file): ");
            strInput2 = input2.next();
        }

        //Creates the file f then places it in the specified directory.
        File f = new File(strInput2);

        try {
            //Creates a printerwriter out that writes to the output file. 
            PrintWriter out = new PrintWriter(strInput2);
        } catch (FileNotFoundException ex) {
            Logger.getLogger(KETTask2Overview.class.getName()).log(Level.SEVERE, null, ex);
        }

        //String that holds the value of the next line. 
        String inputLine = "";

        //Creates the Buffered file reader / writer.  
        try {
            BufferedReader in = new BufferedReader(new FileReader(strInput));
            FileWriter fstream = new FileWriter(strInput2);
            BufferedWriter out = new BufferedWriter(fstream);
            while (in.readLine() != null) {
                out.write(in.read());
            }
            in.close();
        } catch (IOException e) {
            System.err.println("Error: " + e.getMessage());
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T22:19:03.483

尝试这个

关闭 BufferedWriter 流（即 out.close() ）

尝试使用 nextLine() 而不是 next()，因为 next() 只包含一个单词，但对于完整的行使用 nextLine()，尽管这似乎不是这里的问题。

当我必须读取和写入文件时我会做什么，我通常遵循这些步骤

从文件中读取

```
File f = new File("my.txt");
FileReader fr = new FileReader(f);
BufferedReader br  = new BufferedReader(fr);

String s = null;

while ((br.readLine())!=null) {

// Do whatever u want to do with the content of the file,eg print it on console using SysOut...etc

}

br.close(); 
```

对于写入文件：

```
Boolean isDone = true;
Scanner scan = new Scanner(System.in);
File f = new File("my.txt");
FileWriter fr = new FileWriter(f);
BufferedWriter br  = new BufferedWriter(fr);

while (isDone) {

   if (!isDone) {

 br.write(new Scanner(System.in).nextLine());

 }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-10T20:01:16.243

```
public static long copy (Reader input, Writer output) throws IOException {

    char[] buffer = new char[8192];
    long count = 0;
    int n;
    while ((n = input.read( buffer )) != -1) {
        output.write( buffer, 0, n );
        count += n;
    }
    return count;
} 
```

使用示例：

```
 copy( reader, new FileWriter( file ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T22:18:47.570

你没有关闭。writeList 方法的 finally 块清理然后关闭 BufferedWriter。

```
finally {
    if (out != null) { 
        System.out.println("Closing BufferedWriter");
        out.close(); 
    } else { 
        System.out.println("BufferedWriter not open");
    } 
} 
```

# c# - compaction发生后GC如何更新引用

> ID：10669173
> 
> 赞同：20
> 
> 时间：2012-05-19T22:03:59.387
> 
> 标签：c#, .net, garbage-collection, clr

.NET 垃圾收集器收集对象（回收它们的内存）并执行内存压缩（将内存碎片保持在最低限度）。

我想知道，由于应用程序可能对对象有很多引用，当对象的地址由于 GC 进行压缩而发生变化时，GC（或 CLR）如何管理对对象的这些引用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T14:49:59.043

这个概念很简单，垃圾收集器只是更新任何对象引用并将它们重新指向移动的对象。

实现有点棘手，本机代码和托管代码之间没有真正的区别，它们都是机器代码。对象引用并没有什么特别之处，它只是运行时的指针。收集器需要一种可靠的方法来找到这些指针并将它们识别为引用托管对象的类型。不仅要在压缩时移动指向的对象时更新它们，还要识别实时引用以确保不会过早收集对象。

对于存储在 GC 堆上的类对象中存储的任何对象引用，这很简单，CLR 知道对象的布局以及哪些字段存储指针。对于存储在堆栈或 cpu 寄存器中的对象引用来说，这并不是那么简单。像局部变量和方法参数一样。

执行托管代码与本机代码不同的关键属性是 CLR 可以可靠地迭代托管代码拥有的堆栈帧。通过限制用于设置堆栈帧的代码类型来完成。这在本机代码中通常是不可能的，“帧指针省略”优化选项特别讨厌。

堆栈帧遍历首先让它找到存储在堆栈中的对象引用。并让它知道线程当前正在执行托管代码，因此也应该检查 cpu 寄存器的引用。从托管代码到本机代码的转换涉及在收集器识别的堆栈上编写一个特殊的“cookie”。因此它知道不应检查任何后续堆栈帧，因为它们将包含从未引用托管对象的随机指针值。

当您启用非托管代码调试时，您可以在调试器中看到这一点。查看调用堆栈窗口并注意 [Native to Managed Transition] 和 [Managed to Native Transition] 注释。那就是识别这些cookie的调试器。对它也很重要，因为它需要知道 Locals 窗口是否可以显示任何有意义的内容。堆栈遍历也在框架中公开，请注意 StackTrace 和 StackFrame 类。并且对于沙盒非常重要，代码访问安全性 (CAS) 执行堆栈遍历。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-16T18:58:40.167

为简单起见，我将假设一个 stop-the-world GC，其中没有对象被固定，每个对象在每个 GC 周期都被扫描和重定位，并且没有一个目标与任何源重叠。实际上，.NET GC 有点复杂，但这应该可以很好地了解事情的工作方式。

每次检查参考文献时，都有三种可能性：

1.  它是空的。在这种情况下，不需要任何操作。

2.  它标识一个对象，其标题表明它不是重定位标记（下面描述的一种特殊对象）。在这种情况下，将对象移动到新位置并用包含新位置的三字重定位标记替换原始对象，该对象的*旧*位置包含对当前对象的刚刚观察到的*引用*，以及其中的偏移量那个物体。然后开始扫描新对象（系统可以暂时忘记正在扫描的对象，因为它只是记录了它的地址）。

3.  它标识一个对象，其标头说它是一个重定位标记。在这种情况下，请更新正在扫描的引用以反映新地址。

一旦系统完成扫描当前对象，它可以查看它的旧位置以找出它在开始扫描当前对象之前正在做什么。

一旦一个对象被重新定位，它的前三个单词的先前内容将在其新位置可用，而在旧位置将不再需要。因为一个对象的偏移量总是四的倍数，并且单个对象每个限制为 2GB，所以只需要所有可能的 32 位值的一小部分来保存所有可能的偏移量。假设一个对象头中的至少一个词至少有 2^29 个值，除了对象重定位标记之外，它永远不能保存任何值，并且假设每个对象都分配了至少 12 个字节，对象扫描可以处理任何树的深度，而不需要在不再需要其内容的对象的旧副本所占用的空间之外的任何深度相关存储。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T22:24:37.603

## 垃圾收集

每个应用程序都有一组根。根标识存储位置，这些位置引用托管堆上的对象或设置为空的对象。例如，应用程序中的所有全局和静态对象指针都被视为应用程序根的一部分。此外，线程堆栈上的任何局部变量/参数对象指针都被视为应用程序根的一部分。最后，任何包含指向托管堆中对象的指针的 CPU 寄存器也被视为应用程序根的一部分。活动根列表由即时 (JIT) 编译器和公共语言运行时维护，并且可供垃圾收集器的算法访问。

当垃圾收集器开始运行时，它会假设堆中的所有对象都是垃圾。换句话说，它假定应用程序的根都没有引用堆中的任何对象。现在，垃圾收集器开始遍历根并构建从根可到达的所有对象的图。例如，垃圾收集器可能会定位一个指向堆中对象的全局变量。

一旦图的这一部分完成，垃圾收集器检查下一个根并再次遍历对象。当垃圾收集器从一个对象到另一个对象时，如果它试图将一个对象添加到它之前添加的图表中，那么垃圾收集器可以停止沿着这条路径走。这有两个目的。首先，它显着提高了性能，因为它不会多次遍历一组对象。其次，如果您有任何对象的循环链表，它可以防止无限循环。

一旦检查了所有的根，垃圾收集器的图就会包含从应用程序的根以某种方式可以到达的所有对象的集合；任何不在图中的对象都不能被应用程序访问，因此被视为垃圾。**垃圾收集器现在线性地遍历堆，寻找连续的垃圾对象块（现在被认为是空闲空间）。然后垃圾收集器将非垃圾对象向下移动到内存中（使用您多年来知道的标准 memcpy 函数），消除堆中的所有间隙。当然，移动内存中的对象会使所有指向对象的指针无效。所以垃圾收集器必须修改应用程序的根，以便指针指向对象的新位置。此外，如果任何对象包含指向另一个对象的指针，垃圾收集器也负责纠正这些指针。**

## C# 固定语句

固定语句设置一个指向托管变量的指针，并在语句执行期间“固定”该变量。如果没有固定，指向可移动托管变量的指针将几乎没有用处，因为垃圾收集可能会不可预测地重新定位变量。C# 编译器仅允许您在固定语句中分配指向托管变量的指针。

[垃圾收集：Microsoft .NET Framework 中的自动内存管理](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)

[固定语句（C# 参考）](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.80%29.aspx)

# php - 循环插入两个表单域

> ID：10669174
> 
> 赞同：-3
> 
> 时间：2012-05-19T22:04:11.913
> 
> 标签：php, forms

我有两个表单字段“名字”和“姓氏”我还可以克隆这两个字段以在一次提交时添加更多用户。我希望每条记录在插入数据库后都有自己的 ID。但是我看不到让它在一个循环中一次插入两个值。

我的表单字段是

```
 <input type="text" name="firstname_0" size="35" value="" />
 <input type="text" name="lastname_0" size="35" value="" /> 
```

每次我想添加另一个用户 firstname_1、lastname_1 等时，名称都会自动递增...

我想在一个表单提交中添加 1 个或无限个用户。

任何帮助，将不胜感激。

我尝试使用 foreach() 和 while 但无法理解这个概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:07:47.247

在输入的名称属性中使用数组。

```
<input type="text" name="users[0]['firstname']" size="35" value="" />
<input type="text" name="users[0]['lastname']" size="35" value="" />

<input type="text" name="users[1]['firstname']" size="35" value="" />
<input type="text" name="users[1]['lastname']" size="35" value="" /> 
```

进而：

```
foreach ($_POST['users'] as $user) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:12:14.017

我建议用数组更改您的输入字段

```
<input type="text" name="firstname[0]" size="35" value="" />
<input type="text" name="lastname[0]" size="35" value="" /> 
```

而且您不断添加输入以增加其关键

```
<input type="text" name="firstname[1]" size="35" value="" />
<input type="text" name="lastname[1]" size="35" value="" />
......
<input type="text" name="firstname[2]" size="35" value="" />
<input type="text" name="lastname[2]" size="35" value="" /> 
```

然后在您的 PHP 上，您可以轻松地处理数据。

```
$firstName = $_POST['firstname'];
$lastName  = $_POST['lastname'];
.... do some checks ....

foreach ($firstName as $key => $name)
{
     insert_to_db($name, $lastName[$key]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:22:28.753

```
<input type="text" name="user[][firstname]" size="35" value="" />
<input type="text" name="user[][lastname]" size="35" value="" /> 
```

像这样使用你的输入..

比 print_r($_POST['user']); 你会看到发生了什么..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T22:24:21.257

```
<input type="text" name="firstname[]" size="35" value="Waqar" />
<input type="text" name="lastname[]" size="35" value="Alamgir" />

<input type="text" name="firstname[]" size="35" value="Natasha" />
<input type="text" name="lastname[]" size="35" value="Milla" /> 
```

# jquery - 停止在页脚浮动粘性侧边栏 div（几乎可以工作）

> ID：10669175
> 
> 赞同：7
> 
> 时间：2012-05-19T22:04:15.100
> 
> 标签：jquery, sticky

我想得到它，所以当页面滚动时，我侧边栏上的最后一个 div 保持粘性，但在页脚处停止。我几乎可以使用[在线教程](http://www.webresourcesdepot.com/smart-floating-banners/)，但是当 disqus 评论加载时计算会混乱，并且只会到某个点。

这是一个工作版本[http://jsfiddle.net/k56yR/1/](http://jsfiddle.net/k56yR/1/)，但是有没有一种简单的方法可以计算页脚高度，然后告诉它停止滚动到离页面底部那么远的地方？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-19T22:13:50.397

我认为您的问题是`$('#footer').offset().top`您的 disqus 评论加载后您的价值会发生变化。所以你需要更新`footerTop`（并`limit`基于新的`footerTop`在评论加载后或每次事件触发时

就像是：

```
$(function(){ // document ready
   if ($('#sticky').length) { // make sure "#sticky" element exists
      var el = $('#sticky');
      var stickyTop = $('#sticky').offset().top; // returns number
      var stickyHeight = $('#sticky').height();

      $(window).scroll(function(){ // scroll event
          var limit = $('#footer').offset().top - stickyHeight - 20;

          var windowTop = $(window).scrollTop(); // returns number

          if (stickyTop < windowTop){
             el.css({ position: 'fixed', top: 0 });
          }
          else {
             el.css('position','static');
          }

          if (limit < windowTop) {
          var diff = limit - windowTop;
          el.css({top: diff});
          }
        });
   }
}); 
```

与大多数情况一样，正如[julianm](https://stackoverflow.com/users/537135/julianm)在他的评论中指出的那样，有一个 jQuery 插件，可[在此处](https://github.com/AndrewHenderson/jSticky)获得。它还支持停止值，以将粘性框停止在任何所需的位置。

# c# - C# 线程 - 如何启动和停止线程

> ID：10669181
> 
> 赞同：27
> 
> 时间：2012-05-19T22:05:08.613
> 
> 标签：c#, multithreading

谁能给我一个关于线程主题的先机？我想我知道如何做一些事情，但我需要知道如何做以下事情：

设置一个将保持活动状态的主线程，直到我发出信号停止（如果您想知道，它将在收到数据时终止）。然后我想要启动第二个线程，它将从文本框中捕获数据，并且当我向它发出信号时应该退出，当用户按下回车键时会发生这种情况。

干杯!

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-19T22:38:07.940

我就是这样做的...

```
public class ThreadA {
    public ThreadA(object[] args) {
        ...
    }
    public void Run() {
        while (true) {
            Thread.sleep(1000); // wait 1 second for something to happen.
            doStuff();
            if(conditionToExitReceived) // what im waiting for...
                break;
        }
        //perform cleanup if there is any...
    }
} 
```

然后在它自己的线程中运行它......（我这样做是因为我也想将 args 发送到线程）

```
private void FireThread(){
    Thread thread = new Thread(new ThreadStart(this.startThread));
    thread.start();
}
private void (startThread){
    new ThreadA(args).Run();
} 
```

通过调用“FireThread()”创建线程

新创建的线程将一直运行，直到满足其停止条件，然后它就死了……

您可以用代表向“main”发出信号，告诉它线程何时死亡..这样您就可以启动第二个......

最好通读：[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms173178%28v=vs.10%29.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-19T22:07:05.063

```
Thread th = new Thread(function1);
th.Start();
th.Abort();

void function1(){
//code here
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T00:10:00.497

在生成的线程中使用静态 AutoResetEvent 以使用 Set() 方法回调主线程。这家伙在 SO 中有一个关于如何使用它的相当好的演示。

[AutoResetEvent 说明](https://stackoverflow.com/questions/1787816/autoresetevent-clarification)

# javascript - 在屏幕上显示平铺地图 (HTML5/JavaScript)

> ID：10669185
> 
> 赞同：1
> 
> 时间：2012-05-19T22:06:07.440
> 
> 标签：javascript, html, canvas

我的错误控制台没有显示任何 JavaScript 错误。我已经查看了我的代码，似乎没有任何问题。我的屏幕上什么都没有显示，应该有一个平铺地图。

[http://www.exeneva.com/html5/movingTankExample/](http://www.exeneva.com/html5/movingTankExample/)

目标是最终创建一个动画坦克并让它在瓦片地图上移动。这只是一个个人实验，旨在更好地使用平铺地图和平铺（基于单元格的）动画。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:25:59.683

## 第 21 行：

```
tileSheet.addEventListener('load', drawScreen(), false);  //wrong

tileSheet.addEventListener('load', drawScreen, false);    //right 
```

然后你会发现你又犯了一个错误：

```
Line 47: Uncaught ReferenceError: colrCtr is not defined 
```

改成`colCtr`！

![在此处输入图像描述](../Images/4cccbeb79e7ee5266a21bb39be765655.png)

> 你很酷的游戏，现在工作。

# c++ - Visual Studio 2010，PortAudio DLL 编译和链接问题，C++

> ID：10669187
> 
> 赞同：0
> 
> 时间：2012-05-19T22:06:33.810
> 
> 标签：c++, visual-studio-2010, include-path, portaudio

嗨堆栈溢出用户。

**错误描述：**

对于一个迷你项目，我决定使用 portaudio 库（我使用 Windows 7 64 位和 C++）： http: [//portaudio.com/](http://portaudio.com/)

在使用该库之前，我必须在另一个 Visual Studio 项目中构建一个 .DLL 文件，然后将输出链接到我自己的 Visual Studio 2010 项目（32 位）。我尝试使用这段简单的代码：

```
#include <iostream>
#include <portaudio.h>
using namespace std;
void main()
{
  cout << "Hello World!" << endl;   cout << "Welcome to C++ Programming" << endl; } 
```

我收到此错误消息： *致命错误 C1083：无法打开包含文件：'portaudio.h'：没有这样的文件或目录*

我个人认为 .DLL 的创建不是问题，而是链接问题。

**我的尝试：**

首先，我尝试遵循本指南： http: [//portaudio.com/docs/v19-doxydocs/compile_windows.html](http://portaudio.com/docs/v19-doxydocs/compile_windows.html)

通过遵循本指南，我在发布文件夹中获得了一个已编译的 .DLL 和 .Lib 文件（图 1）：

之后我尝试将我的 Visual Studio 2010 与 portaudio_x86.lib 链接并包含它所在的目录（.DLL 创建的输出文件夹）（图 2 和 3）

我自己在使用外部库方面的经验很差，在自己编译时经验更差。我对以前的编程只有一点经验，所以我很确定这只是我错过了一些重要的东西。

![装满 .DLL 和 .Lib 文件的文件夹](../Images/05e72dc80036c79805ea614c1e004a60.png)![告诉链接器要包含哪个库](../Images/877876230510b9d6f2365b4607b18fee.png) ![告诉项目要包含哪个目录（在这种情况下，.DLL 和 .Lib 所在的文件夹](../Images/8f6f749f767cffba0db38316e40589d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:16:08.553

编译器找不到`portaudio.h`头文件。根据上一个屏幕截图，在*Additional Include Directories*中，您需要指向`<portaudio.h>`文件所在的目录，而不是二进制文件 ( `.lib`, `.dll`) 所在的目录。文件的路径`.lib`需要明确指定（如最后一个屏幕截图的旁边，不仅仅是`portaudio.lib`完整路径）或在*VC++ 目录*属性页面中设置，这也是设置包含目录的首选位置。

# java - java.lang.NoClassDefFoundError：无法初始化类 java.awt.Component

> ID：10669190
> 
> 赞同：2
> 
> 时间：2012-05-19T22:07:16.063
> 
> 标签：java, matlab

在 Ubuntu 中运行 MATLAB 安装脚本时，出现以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Could not initialize class java.awt.Component 
```

更长的输出可用[here](http://pastebin.com/4fgu56MV)

我知道这是一个 Java 问题，可以通过更改类路径或类似的东西来解决，但我不完全知道如何。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T11:47:51.067

对我来说，当我在系统上安装 JRE 时，此错误已修复：

```
apt-get install default-jre 
```

在 Ubuntu 12.04 上，而不是让 MATLAB 使用它自己的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:04:45.597

我整个晚上都在与这个问题作斗争，但我偶然发现了一个至少对我有用的解决方案。

在尝试使用静默安装程序进行安装后，我得到了一个不同的错误，并提供了更多信息。结果发现缺少一个库（libXtst.so.6）。我能够在我的 Ubuntu 系统上安装它：

```
apt-get install libxtst6 
```

之后我尝试运行 GUI 安装程序（通过 X 转发），看起来它现在可以工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T23:48:06.880

对于 MATLAB R2012a 学生版，在 Ubuntu 14.04 中，我必须先安装这些先决条件：

```
sudo apt-get install default-jre libxtst6:i386 libXext6:i386 libxi6:i386 libncurses5:i386 libxt6:i386 libxpm4:i386 libxmu6:i386 libxp6:i386 
```

接下来，我按照 MATLAB 的说明 ( ) 安装/激活`sudo ./install`。当安装程序要求在 /usr/local/bin/ 中添加符号链接时，我回答“是”

最后，在启动 MATLAB 时，我必须指定它以 32 位模式运行：

```
matlab -glnx86 
```

我从这个答案中组装了这些步骤：[https ://askubuntu.com/questions/363878/how-to-install-32-bit-matlab-in-ubuntu-64-bit](https://askubuntu.com/questions/363878/how-to-install-32-bit-matlab-in-ubuntu-64-bit)

和 Ubuntu MATLAB 指南： [https ://help.ubuntu.com/community/MATLAB](https://help.ubuntu.com/community/MATLAB)

### 可选的

我不想每次启动 MATLAB 时都输入 -glnx86 选项，因此我将 /usr/local/bin/ 中的 matlab 符号链接替换为自动指定 -glnx86 选项的脚本：

```
ls -l /usr/local/bin/matlab #note the destination of the symbolic link
sudo mv /usr/local/bin/matlab /usr/local/bin/matlab.bak
#ensure the first path below matches your symbolic link's destination
echo '/usr/local/MATLAB/R2012a_Student/bin/matlab -glnx86  "$@"' | sudo tee /usr/local/bin/matlab
sudo chmod +x /usr/local/bin/matlab 
```

有了它，我可以输入“matlab”并正确启动。（`"$@"`脚本中的 将所有输入参数转发给 matlab。）可能有一种更优雅的方式来完成此操作，但它确实有效。

我还在 matlab 启动时遇到了“/lib/libc.so.6: not found”错误，我按照[这个答案](http://www.mathworks.com/matlabcentral/answers/95976-why-do-i-get-a-libc-so-6-not-found-error-when-launching-matlab-in-ubuntu)修复了这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:35:21.500

安装 gnome (sudo apt-get install gnome) 为我解决了这个问题。我敢肯定这完全是矫枉过正，但是现在可以使用所需的库。

# c# - MVCCrud 使用 LinqToEntities

> ID：10669196
> 
> 赞同：0
> 
> 时间：2012-05-19T22:09:13.673
> 
> 标签：c#, entity-framework, linq-to-entities

有一个名为 MVCCrud 的示例应用程序。这个例子非常好，我想将它用作我正在从事的项目的框架。

问题是 MVCCrud 使用 LingToSQL，我想使用 LinqToEntities。一旦我转换为 LinqToEntities，除了一个地方之外，我几乎所有的东西都能正常工作。

在 i = typeof(TModel).GetProperty(primaryKey).GetValue(p, null), cell = getCells(p) 行的以下代码中，它为实体提供了一个 Linq 无法识别 GetValue。

有人可以帮我重构以下代码吗？

```
 items = items.OrderBy(string.Format("{0} {1}", sidx, sord)).Skip(pageIndex * pageSize).Take(pageSize).AsQueryable();

            // Generate JSON
            var jsonData =
                new
                    {
                        total = totalPages,
                        page,
                        records = totalRecords,
                        rows = items.Select(
                            p => new
                                {
                                    // id column from repository
                                    i = typeof(TModel).GetProperty(primaryKey).GetValue(p, null),
                                    cell = getCells(p)
                                }).ToArray()
                    };
            return Json(jsonData); 
```

这是 getCell 方法：

```
 private string[] getCells(TModel p)
    {
        List<string> result = new List<string>();

        string a = actionCell(p);
        if (a != null)
        {
            result.Add(a);
        }

        foreach (string column in data_rows.Select(r => r.value))
        {
            try
            {
                // hack for tblcategory.name
                string[] parts = column.Split('.');

                // Set first part
                PropertyInfo c = typeof(TModel).GetProperty(parts[0]);
                object tmp = c.GetValue(p, null);

                // loop through if there is more than one depth to the . eg tblCategory.name
                for (int j = 1; j < parts.Length; j++)
                {
                    c = tmp.GetType().GetProperty(parts[j]);
                    tmp = c.GetValue(tmp, null);
                }

                if (tmp.GetType() == typeof(DateTime))
                {
                    result.Add(((DateTime)tmp).ToString(dateTimeFormat));
                }
                else if (tmp.GetType() == typeof(float))
                {
                    result.Add(((float)tmp).ToString(decimalFormat));
                }
                else if (tmp.GetType() == typeof(double))
                {
                    result.Add(((double)tmp).ToString(decimalFormat));
                }
                else if (tmp.GetType() == typeof(decimal))
                {
                    result.Add(((decimal)tmp).ToString(decimalFormat));
                }
                else
                {
                    result.Add(tmp.ToString());
                }
            }
            catch (Exception)
            {
                result.Add(string.Empty);
            }
        }

        return result.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:40:58.260

这样做`ToList()`而不是`AsQueryable()`：

```
items = items.OrderBy(string.Format("{0} {1}", sidx, sord)).Skip(pageIndex * pageSize).Take(pageSize).ToList(); 
```

您不能在“内部”linq 查询中执行任何外部方法。

你可能会说它在 Linq2Sql 中工作，那么你应该知道当你调用任何外部方法“Like `ToString()`”时，Linq2Sql 将从数据库中获取所有数据，然后在内存中处理你的查询，如果你有很多记录，这可能会造成严重伤害。

有关更多信息，请查看[此](https://stackoverflow.com/questions/3355416)

# jquery - 如何为 /#!/ 更改哈希 /#/

> ID：10669198
> 
> 赞同：1
> 
> 时间：2012-05-19T22:09:47.357
> 
> 标签：jquery, ajax, wordpress, hash

我正在使用 wordpress，一旦您单击任何本地链接，我想更改 url。我正在使用 ajax 加载页面，这就是我想要这样做的原因。
我可以更改网址，在“http://site.com/”和加载的内容/example-page/之间添加一个哈希，结果：“http://site.com/#/example-page”和它加载示例页面，但我想添加“！” 标记以获取“http://site.com/#!/example-page”[就像这个主题](http://elegantthemes.com/preview/Gleam/)
我正在使用[jquery-hashchange](http://benalman.com/projects/jquery-hashchange-plugin/)插件顺便说一句。
请让我知道你在想什么。

*此代码是在解决后编辑的，所以这是正确的代码。*

```
jQuery(document).ready(function($) {
  var $mainContent = $("#container"),
    siteUrl = "http://" + top.location.host.toString(),
    url = '';
  $(document).delegate("a[href^='"+siteUrl+"']:not([href*=/wp-admin/]):not([href*=/wp-login.php]):not([href$=/feed/])", "click", function() {
    location.hash = '!' + this.pathname;
    return false;
  });
  $("#searchform").submit(function(e) {
    location.hash = 's/' + $("#s").val();
    e.preventDefault();
  });
  $(window).bind('hashchange', function(){
    url = window.location.hash.substring(3);
    if (!url) {
      return;
    }
    url = url + " #content";
    $mainContent.animate({opacity: "0.1"}).html('Please wait...').load(url, function() {
      $mainContent.animate({opacity: "1"});
    });
  });
  $(window).trigger('hashchange');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:55:10.863

改变

```
location.hash = this.pathname; 
```

到

```
location.hash = "#!" + this.pathname; 
```

（严格来说，您之前应该有哈希）并更改

```
url = window.location.hash.substring(1); 
```

到

```
url = window.location.hash.substring(2); 
```

也改变

```
location.hash = '?s=' + $("#s").val(); 
```

到

```
location.hash = '#!?s=' + $("#s").val(); 
```

# javascript - 在开发过程中自动连续运行 Jasmine 测试

> ID：10669203
> 
> 赞同：4
> 
> 时间：2012-05-19T22:11:39.417
> 
> 标签：javascript, jasmine

在开发过程中自动连续运行 Jasmine 测试有什么好的策略吗？更新文件保存的测试应该足够好——这可能会使任何解决方案减少对特定编辑器和/或检测未保存更改所需的其他软件的依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:30:11.180

在 Ruby on Rails 中，这很容易使用[jasminerice](https://github.com/bradphelan/jasminerice)进行设置，用于 Jasmine 设置和[guard-jasmine](https://github.com/netzpirat/guard-jasmine)以在每个文件保存时自动运行完整的测试套件。您甚至可以添加[咆哮](https://github.com/visionmedia/growl)gem 以使[守卫](https://github.com/guard/guard)在完成时通过一个小的桌面通知显示自动测试运行的结果。

# css - 仅定位具有特定类的“a”的父级“li”

> ID：10669204
> 
> 赞同：0
> 
> 时间：2012-05-19T22:12:02.550
> 
> 标签：css, wordpress

> **可能重复：**
> [是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

```
<ul class="page-numbers">
    <li><a href="/blog/page/1/" class="prev page-numbers">«</a></li>
    <li><a href="/blog/page/1/" class="page-numbers">1</a></li>
    <li><span class="page-numbers current">2</span></li>
    <li><a href="/blog/page/3/" class="page-numbers">3</a></li>
    <li><a href="/blog/page/4/" class="page-numbers">4</a></li>
</ul> 
```

有没有办法只针对`li`它的父级`a.prev`？我不能使用`first-child`，因为当我在第一页时，`a.prev`不显示。将不胜感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:25:07.267

不是只有 CSS。[CSS 中没有父选择器](http://css-tricks.com/parent-selectors-in-css/)。但是，如果您可以/想要深入了解[javascript/jQuery](http://jquery.com/)，您可以执行以下操作：

```
$('.page-numbers a').closest('li').css({
    'height': '18px',
    'background': '#ccc'
}); 
```

# ios - 核心数据 - 重新排序 TableView 不会保存

> ID：10669206
> 
> 赞同：0
> 
> 时间：2012-05-19T22:12:16.297
> 
> 标签：ios, uitableview, core-data

.

你好，

我有以下代码来设置 tableView 的重新排序。

```
#pragma mark Row reordering
// Determine whether a given row is eligible for reordering or not.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
return YES;
}
// Process the row move. This means updating the data model to <span id="IL_AD6" class="IL_AD">correct</span> the item indices.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath
  toIndexPath:(NSIndexPath *)toIndexPath {
NSString *item = [arr objectAtIndex:fromIndexPath.row];
[arr removeObject:item];
[arr insertObject:item atIndex:toIndexPath.row];

} 
```

但是，当我重新加载 TableView（注意不是 TableViewController）时，顺序会恢复到我更改任何内容之前的状态。

现在，当我为这个视图设置编辑（删除按钮）时，我必须添加这一行：

```
[self.mainTableView setEditing:YES animated:YES]; 
```

在它出现在我的视野之前。

**我需要设置类似的东西来重新排序表格视图以保存它吗？**

数据是从 Core Data 数据库中获取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:46:02.047

为了保持对象的顺序，恐怕**您需要为您的数据模型添加**一个**属性**。只需使用`int`/`[NSNumber]`并在移动表视图行时循环重新计算它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:23:41.997

当您重新加载数据时，您是否使用从核心数据实体中获取的结果重新填充该数组？如果是这样，您对数组（我假设它是电视的数据源）所做的更改将被吹走。如果您希望保留这些更改，则需要以某种方式更新模型，以确保重新填充数组会导致数组以您需要的方式被索引。

# ios - UITableView 设置不同的图片

> ID：10669209
> 
> 赞同：0
> 
> 时间：2012-05-19T22:12:39.073
> 
> 标签：ios, xcode, uitableview

有人可以帮我提供一个示例代码来说明如何做到这一点：我有我的 UITableView 并且我已经设置了所有内容，我希望当你单击一个单元格时它会给你一个图像，我已经有了，有 8 个图像，因此 8 个单元格每个都有不同的名称，那么我该怎么办？例如我的单元格名称，“苹果”，“橙色”，“香蕉”等等，所以我需要为每个单元格提供一张图片，但当然在订单，我的意思是香蕉和香蕉等等。我知道这很简单，但是我还没有找到任何示例，而且我对这一切都很陌生，谢谢，XD ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:34:56.367

你需要的是两个用文本描述和图像构建的 NSArray（这也可以用一个`NSArray`和`NSDictionary`两个键值对来完成）。在这种情况下，每个字典都有两个键值对（一个用于文本，一个用于图像）。

但为了简单起见，我们将使用两个 NSArray。

所以是这样的：在`viewDidLoad`：

```
textArray = [[NSArray alloc] initWithObjects:@"Banana",
                          @"Orange",
                          @"Apple",
                          @"Grape",
                          @"Pineapple",
                          @"Apricot",
                          @"Pear",
                          @"Kiwi", nil];
imagesArray = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"Banana.png"],
                        [UIImage imageNamed:@"Orange.png"],
                        [UIImage imageNamed:@"Apple.png"],
                        [UIImage imageNamed:@"Grape.png"],
                        [UIImage imageNamed:@"Pineapple.png"],
                        [UIImage imageNamed:@"Apricot.png"],
                        [UIImage imageNamed:@"Pear.png"],
                        [UIImage imageNamed:@"Kiwi.png"],
                        nil]; 
```

***这假设您的项目中有 png 图像，名称如上所述。

然后对于`UITableView`数据源和委托方法：

```
#pragma mark - UITableView Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.   
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return count of our text array
    return [textArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"tvCell"];

    cell.textLabel.text = [textArray objectAtIndex:indexPath.row];
    cell.imageView.image = [imagesArray objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Do whatever you need to here
} 
```

完整的项目可以在[这里](http://dl.dropbox.com/u/3660978/SOImageTVC.zip)下载（我将在接下来的 24 小时内保留它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:30:35.033

当然有几种方法可以做到这一点。完全不涉及代码的最简单方法之一是使用 Xcode 中的场景构建器。

1 - 将 UITableViewController 添加到使用场景的应用程序 2 - 在此控制器和属性中选择表格视图，将其设置为“静态列表”（我不记得该属性的确切名称 - 我将编辑如果找不到，我的答案是添加它） 3 - 编辑列表中的项目数和每个单元格以具有您想要的标签 4 - 在场景中添加一些 UIController 并在其中添加图像 5 - 链接每个表使用 segue 将单元格移动到匹配的控制器（按住 ctrl 单击并拖动或单击选项） 6 - 单击构建和运行。

就是这样——不是一行代码！

Ps：我现在在我的 iPhone 上，但如果你需要，我可以发布一个完整的例子。对于快速原型来说，这实际上是一个非常酷的技巧。

# asp.net - 如何将列对齐应用于数据网格

> ID：10669210
> 
> 赞同：0
> 
> 时间：2012-05-19T22:13:06.733
> 
> 标签：asp.net, vb.net, visual-studio-2008, datagrid, alignment

我有一个 VB.Net ASP 页面，上面有一个数据网格，有 5 列和几行数据。该页面将很好地显示数据和网格。我现在需要对数据网格列应用对齐。

```
dgLast5Bills.DataSource = dtBill
dgLast5Bills.DataBind()
dgLast5Bills.Columns(0).ItemStyle.HorizontalAlign = HorizontalAlign.Center 
```

上面的代码在到达对齐线时会出错。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:45:17.927

您的`dgLast5Bills.Columns(0).ItemStyle.HorizontalAlign = HorizontalAlign.Center`代码给您`Index was out of range`错误，因为在您的`aspx`页面中您没有定义任何列，因此在编译时没有`0`索引。

你应该试试这个。

```
 Sub Item_Bound(sender As Object, e As DataGridItemEventArgs) 
     If e.Item.ItemType = ListItemType.Item Then
         e.Item.Cells(0).HorizontalAlign = HorizontalAlign.Center
     End If         
  End Sub 
```

[如需更多阅读，请查看它。DataGrid.ItemDataBound 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.itemdatabound.aspx#Y2071)

# javascript - 使用 href/Javascript 访问锚点

> ID：10669211
> 
> 赞同：1
> 
> 时间：2012-05-19T22:13:34.453
> 
> 标签：javascript, phantomjs, href, casperjs

在具有附加到 javascript 的 href 的锚点的系统上测试 CasperJS。照常做

```
casper.then(function() {
this.evaluate(function() {
//      document.querySelector('a[id="CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH"]').click();    // works in FF
//  window.onload=submitAction_win0(document.win0,'CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH');

      //eval("submitAction_win0(document.win0,'CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH_1');");
//submitAction_win0(document.win0,'CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH');
//  window.onload=submitAction_win0(document.win0,'CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH');

//      this.click('a[id="CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH"]');
//      click('a[id="CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH"]');
//      self.click('a[id="CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH"]');
//      this.this.click('a[id="CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH"]');
..

});

}); 
```

上述方法均无效。项目的 Git 存储库表明 Casper 有一个 CasperUtils/ClientUtils 库，该库似乎`__utils__`有一个 click 方法，这是调用的方式`href="javascript:foo()"`元素的方法。

但是，我似乎无法弄清楚如何让它运行。

如果有人使用过 CasperJS，并且有关于如何实现的代码示例，我们将不胜感激！

理想情况下，最终结果应该是这样的：

```
casper.then(function() {
  e=document.querySelector("id['foo']");
  CasperUtilsSomething.click(e);
}); 
```

或者，如果你有一个指向我可以运行的测试代码用例的指针，那会让我们看看应该如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:48:26.287

看起来这里的问题是对函数范围的混淆。这是使用 PhantomJS（CasperJS 建立在其之上）的棘手问题 - 有两个完全独立的范围，其中一个在 PhantomJS 上下文中运行并可以访问`casper`对象，以及远程代码的“沙盒”范围运行在 -`casper.evaluate()`例如，任何运行在的东西都在远程上下文的沙箱中运行，无法访问`casper`对象或其方法。

因此，尝试在`this.click()`内部调用`casper.evaluate()`将失败 - 您正在运行的函数无法访问`casper`实例，并且`this`将引用`window`浏览器中的对象。

通常，您这样做的方式只是：

```
casper.then(function() {
    casper.click('#CLASS_SRCH_WRK2_SSR_PB_CLASS_SRCH');
    casper.evaluate(function() {
        // some function that needs to run after clicking
    });
}); 
```

另请注意，据我所知，您通常无法在其中运行任何`window.onload`代码`casper.evaluate()`- 窗口`load`事件在您运行代码时已经触发。

# php - PHP：如果语句问题

> ID：10669215
> 
> 赞同：0
> 
> 时间：2012-05-19T22:14:35.507
> 
> 标签：php

该数组`resAlloc`包含 10 列和 5 行。所有条目都等于 0。所以，我希望下面的 IF 语句为 TRUE，但由于某种原因它是错误的……为什么？

```
if ($resAlloc[$i][$j] != 'ts' && $resAlloc[$i][$j] != 't' && $resAlloc[$i][$j] != 'st') {
    $count++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:16:54.187

`!=`评估`0`为`false`。使用`!==`哪个更*严格*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:16:13.930

IIRC 任何等于 0 的 != 都将返回 FALSE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:43:16.070

问题是您正在比较一个字符串和一个整数，而 PHP 正在“帮助”将字符串转换为一个整数——整数零。`0!='ts'`评估为`false`，因为它在转换后最终进行的比较是`0!=0`. 您可以通过将数组的内容显式处理为字符串来防止这种情况：

```
strval($resAlloc[$i][$j]) != 'ts' 
```

这将进行比较`'0'!='ts'`，正确评估为`true`。如果你传递 strval() 一个字符串，它会原封不动地返回它，所以无论你的数组中有什么，这都应该是安全的。

或者，正如 Samy Dindane 所说，您可以使用 !== 不会进行任何类型转换。

# mysql - 前瞻性（非回顾性）搜索的数据库解决方案

> ID：10669216
> 
> 赞同：-1
> 
> 时间：2012-05-19T22:14:39.313
> 
> 标签：mysql, sql, database, search, nosql

假设我们需要创建一个系统，该系统使用大量、实时的文档数据流，并在这些文档可用时将这些文档与一组用户定义的搜索查询进行匹配。这是一项前瞻性的，而不是回顾性的搜索服务。什么是合适的持久性解决方案？

假设用户想要查看与其查询匹配的文档的实时提要（想想 Google 快讯），并且提要必须显示每个文档的某些元数据。让我们假设比赛的寿命是无限期的；即，系统将允许用户从创建特定查询时查看查询的所有匹配项。因此，流中出现的每个文档的元数据，以及文档与匹配该文档的用户查询之间的关联，都必须保存到数据库中。

让我们提出另一个要求，即用户希望能够对某些元数据进行分面：例如，用户希望仅查看特定查询的匹配文档，其元数据字段“结果类型”等于“博客”，并且想要一个博客匹配数的计数。

以下是一些假设的数字：

1.  每天数据流中有 200,000 个新文档。

    - 每个文档的元数据都被持久化。

2.  1000 个用户，每个用户有大约 5 个搜索查询：大约 5000 个用户搜索查询。

    - 这些查询是简单的布尔查询。

    - 当每个新文档进来时，它会针对所有 5000 个查询进行处理，以查看哪些查询是匹配的。

3.  每个提要（每个用户查询一个提要）每分钟向用户刷新一次。换句话说，对于每个提要，每分钟都会向数据库查询最新的匹配页面。

向用户显示提要的速度至关重要。可扩展性和高可用性也很重要。

用户和查询之间的关系是关系的，查询和匹配文档之间的关系也是如此，但文档元数据本身只是键值对。所以我最初的想法是将关系数据保存在像 MySQL 这样的关系数据库中，将元数据保存在 NoSQL DB 中，但是在 NoSQL DB 中可以实现分面要求吗？此外，构建提要需要调用两个单独的数据存储，这会增加复杂性。或者也许将所有内容都推入 MySQL，但这将需要大量的连接和计数。如果我们将所有数据作为键值对存储在其他类型的数据存储中，我们将如何进行分面？对于匹配多个搜索查询的文档，会有大量冗余元数据。

什么样的数据库适合这种情况？我知道诸如[Twitter Storm](https://github.com/nathanmarz/storm)和 Yahoo's [S4](http://incubator.apache.org/s4/)之类的工具，它们可用于构建此类系统的整体架构，但鉴于数据存储、容量和查询/分面，我想专注于数据库要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:26:08.363

考虑到这一点，这听起来像是一个事件处理任务，而不是常规的数据处理操作，因此可能值得研究[复杂事件处理](http://en.wikipedia.org/wiki/Complex_event_processing)系统 - 而不是在常规数据库上构建所有内容，使用处理查询的系统流入系统的传入数据。有些商业系统可以达到速度和高可用性标准，但我还没有研究过可用的 OSS 选项（幸运的是，[quora](http://www.quora.com/Complex-Event-Processing-CEP/Are-there-any-open-source-CEP-tools)上的人已经这样做了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T02:42:03.807

看看弹性搜索。它具有过滤器功能，可以将文档与已注册的查询进行匹配。 [http://www.elasticsearch.org/blog/2011/02/08/percolator.html](http://www.elasticsearch.org/blog/2011/02/08/percolator.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:38:05.047

首先，我不同意本。每天 20 万条新记录与每天 86,400 秒相比，所以我们说的是每秒 3 条记录。这不是惊天动地的，但它是新数据的可敬剪辑。

其次，我认为这是人们面临的一个现实问题。我不会说这个论坛不适合这个话题。

我认为这个问题的答案与支持的用户查询的复杂性和类型有很大关系。例如，如果查询由一堆二进制谓词组成，那么您可以从文档数据中提取特定规则，然后轻松应用这些规则。另一方面，如果查询包含对文档文本的复杂评分，那么您可能需要一个倒排索引与每个用户查询的评分算法配对。

我对这样一个系统的方法是将查询解析为可以从每个文档中确定的单个数据元素（我可能将其称为“查询签名”，因为结果将包含满足查询所需的所有字段）。每次加载文档时都会创建此“查询签名”，然后可以使用它来满足查询。

添加新查询需要处理所有文档以分配新值。鉴于数据量，这可能需要更多的批处理任务。

SQL 是否合适取决于您需要从数据中提取的特征。这又取决于用户查询的性质。SQL 可能就足够了。另一方面，您可能需要更复杂的工具，尤其是当您使用文本挖掘概念进行查询时。

# haskell - 有限双射的高效函数数据结构

> ID：10669217
> 
> 赞同：9
> 
> 时间：2012-05-19T22:14:53.270
> 
> 标签：haskell, data-structures, functional-programming, ocaml, bijection

我正在寻找一种表示两种类型之间有限双射的功能数据结构，即节省空间和节省时间。

例如，如果考虑到大小为 n 的双射 f，我会很高兴：

*   用一对新元素扩展 f 的复杂度为 O(ln n)
*   查询 f(x) 或 f^-1(x) 的复杂度为 O(ln n)
*   f 的内部表示比具有 2 个有限映射（表示 f 及其逆）更节省空间

我知道排列的有效表示，比如[这篇论文](http://www.springerlink.com/content/g6ab7lxurchvu8qf/)，但它似乎并没有解决我的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T07:49:56.977

请查看[我](https://stackoverflow.com/questions/5686255/is-there-a-bidirectional-multimap-persistent-data-structure)对一个相对相似的问题的回答。提供的[代码](http://hpaste.org/45805/bimap_as_a_nonregular_recursi)可以处理一般的 NxM 关系，但也可以专门用于双射（就像二叉搜索树一样）。

为了完整起见，在此处粘贴答案：

> 最简单的方法是使用一对单向地图。它有一些成本，但您不会变得更好（使用专用二叉树可能会变得更好，但是如果您必须自己实现它，则需要付出巨大的复杂性成本）。本质上，查找速度会一样快，但添加和删除速度会慢一倍。这对于对数运算来说还不错。这种技术的另一个优点是，如果您有可用的键或值类型，您可以使用专门的映射类型。对于特定的通用数据结构，您不会获得那么多的灵活性。
> 
> 另一种解决方案是使用四叉树（而不是将 NxN 关系视为一对 1xN 和 Nx1 关系，您将其视为您的类型的笛卡尔积 (Key*Value) 中的一组元素，即空间飞机），但我不清楚时间和内存成本是否比两张地图更好。我想它需要进行测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T22:57:03.077

尽管它不满足您的第三个要求，但[bimap](http://hackage.haskell.org/packages/archive/bimap/0.2.4/doc/html/Data-Bimap.html)似乎是要走的路。（他们只是制作了两张有限地图，每个方向一张，使用方便。）

# python - python中的相似度匹配计算

> ID：10669221
> 
> 赞同：0
> 
> 时间：2012-05-19T22:15:38.400
> 
> 标签：python

我正在用python做一个问答项目。我已经有了问答文档的向量以及 tfidf 的值。但后来我不知道如何在 python 中计算相似度匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:04:37.283

您可以使用 Levenshtein 距离，请看这里：[http](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance#Python) ://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance#Python代码，这里：[http](http://en.wikipedia.org/wiki/Levenshtein_distance) : //en.wikipedia.org/wiki/Levenshtein_distance算法的讨论。

这是从上面的链接复制的片段：

```
def levenshtein(s1, s2):
    if len(s1) < len(s2):
        return levenshtein(s2, s1)
    if not s1:
        return len(s2)

    previous_row = xrange(len(s2) + 1)
    for i, c1 in enumerate(s1):
        current_row = [i + 1]
        for j, c2 in enumerate(s2):
            insertions = previous_row[j + 1] + 1 # j+1 instead of j since previous_row and current_row are one character longer
            deletions = current_row[j] + 1       # than s2
            substitutions = previous_row[j] + (c1 != c2)
            current_row.append(min(insertions, deletions, substitutions))
        previous_row = current_row

    return previous_row[-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T22:29:46.190

**余弦相似度**

```
length_question = .0
length_answer = .0

for word_tfidf in question:
    length_question += word_tfidf**2

for word_tfdif in answer:
     length_answer += word_tfidf**2

similarity = .0
for word in question:
    question_word_tfidf = question[word]
    answer_word_tfidf = answer.get(word, 0)
    similarity += question_word_tfidf * answer_word_tfidf
similarity /= math.sqrt(length_question * length_answer) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T22:19:04.750

您可以使用两个向量之间的[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_distance)，或另一个距离度量（例如，[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)），或向量的[互相关](https://stackoverflow.com/questions/3045040/python-how-to-find-a-correlation-between-two-vectors)。

# iphone - 截取窗口的屏幕截图

> ID：10669222
> 
> 赞同：1
> 
> 时间：2012-05-19T22:15:44.170
> 
> 标签：iphone, objective-c, ios4

我正在使用这种方法来截取我的应用程序的屏幕截图：

```
+ (NSData*)TakeScreenshot 
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext

    CGSize imageSize = [[UIScreen mainScreen]bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point

            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);

        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    NSData *imageData = UIImageJPEGRepresentation(image, 100);

    UIGraphicsEndImageContext();

    return imageData;
} 
```

问题是，我没有看到状态栏。我只得到一个没有状态栏的白色区域。如何使用状态栏和其他控件（如标签栏、导航栏等）截取整个屏幕的屏幕截图。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:40:44.683

您使用的或多或少是Apple建议截屏的[官方方式。](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)

问题是这种方法会在屏幕上截取您的应用程序输出而不是整个屏幕。状态栏位于其自己的窗口中，无法在您的应用程序中使用。

您应该将自己的状态栏创建为图像并将其添加到您的项目中，或者只是剪切不需要的屏幕截图部分。

然后，我建议在论坛中搜索您的问题的可能重复项，例如：[Capturing full screenshot with status bar in iOS programmatically](https://stackoverflow.com/questions/8508428/capturing-full-screenshot-with-status-bar-in-ios-programmatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:28:16.197

没有公共方法可以让您截取整个屏幕（即使用状态栏）。虽然有一个[私有方法](http://mobiledevelopertips.com/user-interface/screen-capture-using-uigetscreenimage.html)`UIGetScreenImage`允许您使用实现此功能。但是，由于这是一种私有方法，如果您将其提交到 App Store，您的应用程序将被拒绝。

# css - 访问不同目录中的字体

> ID：10669235
> 
> 赞同：0
> 
> 时间：2012-05-19T22:17:50.550
> 
> 标签：css

我在网站根目录中标记为“fonts.css”的 CSS 文件中有此代码：

```
@font-face
{
    src:url(Fonts/Champagne%20&%20Limousines.ttf);
    font-family:'Champagne';
}

@font-face
{
    src:url(Fonts/Cicle%20Fina.ttf);
    font-family:'Ciclef';
} 
```

我的所有字体都在我的根目录（“RootDirectory/Fonts”）中标有“Fonts”的文件夹中。当我尝试使用位于根目录中的 HTML/CSS 页面访问它们时，这些字体工作正常。但是，当我尝试从不在根目录中的页面（它是“RootDirectory/About”）访问它们时，字体不起作用。我有一些页面的 HTML 不能像这样工作（链接到“fonts.css”文件）：

```
<link rel="stylesheet" href="../fonts.css" /> 
```

它应该工作，对吧？这不可能是错字，因为我直接从字体工作的第一页复制了新的 HTML 和 CSS。

PS这是唯一在新页面中不起作用的东西，图像和其他一切都运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:20:47.093

除非您知道自己在做什么，否则您应该通过从文档根目录指定它们的整个路径来根植本地 url。这是通过在 url 前加上斜杠来完成的。

所以..

```
src:url(Fonts/Champagne%20&%20Limousines.ttf); /*and*/
src:url(Fonts/Cicle%20Fina.ttf); 
```

变得...

```
src:url(/Fonts/Champagne%20&%20Limousines.ttf); /*and*/
src:url(/Fonts/Cicle%20Fina.ttf); 
```

和...

```
<link rel="stylesheet" href="../fonts.css" /> 
```

变成...

```
<link rel="stylesheet" href="/fonts.css" /> 
```

前导斜杠表示它相对于网站的文档根目录。这也意味着它将在您的网站上运行。这使得重用和重组代码变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T10:30:38.583

请尝试取消路径中的空格并删除 %20。同时删除 & 符号。结果是什么？

# jquery - 为什么我的代码执行错误请求错误 URI [object%20Object]？

> ID：10669241
> 
> 赞同：2
> 
> 时间：2012-05-19T22:19:04.747
> 
> 标签：jquery, ruby-on-rails, ajax, coffeescript

当复选框更改为更改资源“任务”上的布尔属性“已完成”时，我正在使用 jquery 触发 ajax 请求。我有以下关于 AJAX 部分的代码，但我收到此错误 > **bad URI `/projects/1/tasks/[object%20Object]'**

**tasks.js.coffee**

```
 $('#task_completed').bind 'change', (event) =>
      url = $('#task_completed').closest('form').attr('action')
      data = {}
      data.task = {}
      $.post({
        url: url
        data: data
        success: ->
          $('.task_headline').toggleClass('completed_task')
      }) 
```

**任务/show.html.erb**

```
 <%= form_for [@project, @task], :remote => true do |f| %>
         <%= f.label :completed %>       
         <%= f.check_box :completed %> <!-- this automatically has the id="task_completed" -->
       <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:28:39.767

如果您不想指定数据，请不要指定数据。

```
 $('#task_completed').bind 'change', (event) =>
      url = $('#task_completed').closest('form').attr('action')

      $.post({
        url: url
        success: ->
          $('.task_headline').toggleClass('completed_task')
      }) 
```

此外，您忘记了 url:url 后面的逗号，这可能是必要的。

```
 $('#task_completed').bind 'change', (event) =>
      url = $('#task_completed').closest('form').attr('action')

      $.post({
        url: url,
        success: ->
          $('.task_headline').toggleClass('completed_task')
      }) 
```

如果它仍然发生，您将希望通过以下方式临时替换该功能：

```
window.alert($('#task_completed').closest('form').attr('action')) 
```

如果这显示`[object%20Object]`在警报中，那么您保存表单的位置有问题。请注意，这`[object%20Object]`意味着您正在尝试打印出一个没有明确定义 toString() 的对象。这正是您尝试转换`{}`为字符串时发生的情况。

不相信我？将以下内容复制到您的地址栏，然后按 Enter：

```
javascript:var test = {};window.alert(test.toString()); 
```

# jquery - 盒子阴影不工作

> ID：10669247
> 
> 赞同：0
> 
> 时间：2012-05-19T22:20:12.873
> 
> 标签：jquery, html, css, jquery-plugins

我目前正在创建 Premiumpress - realtorpress 的子主题。

好吧，实际上我在使用 css 时遇到了麻烦。

当我创建一个地图框并且我想显示这个 div 的影子 insdie 时。

所以我做了类似的事情

```
<div class="map-box">
    <div id="map_homepage"></div>
</div> 
```

主题是使用“Put Me On The Map”jquery API .. 可在[codecanyon.net](http://codecanyon.net/item/put-me-on-the-map/51284)

所以我包装了地图框的CSS

```
.map-box {
    width: 610px;
    height: 357px;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.44);
    overflow: hidden;
} 
```

但我不知道为什么内部阴影不起作用......它没有显示......请有人帮我解决这个问题并告诉我为什么我会导致这个问题。

如果你想检查真正的源代码，你可以访问我现在正在工作的网站[http://goo.gl/zXCnU](http://goo.gl/zXCnU)

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:29:38.677

阴影正在显示 - 谷歌地图代码将地图放在它的顶部。

您可以尝试使用盒子（或地图）的 z-index 来让它漂浮在地图的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:30:16.580

您需要添加一些填充以显示阴影：[https ://img.skitch.com/20120520-batg116c5eni4h9arp71srreew.jpg](https://img.skitch.com/20120520-batg116c5eni4h9arp71srreew.jpg)

**编辑**：[https ://img.skitch.com/20120520-cc6dun4ecqrekik51s6pgtut35.jpg](https://img.skitch.com/20120520-cc6dun4ecqrekik51s6pgtut35.jpg)

# maven - Maven在注释上构建失败

> ID：10669248
> 
> 赞同：0
> 
> 时间：2012-05-19T22:20:25.057
> 
> 标签：maven, annotations, ejb-3.0

我正在尝试用几个无状态会话 bean 创建一个简单的项目。我花了一个多星期的时间来发现问题。尝试了各种依赖，但没有任何效果。可能有人可以帮助我解决这个问题。但是当我用 maven 编译它时，我得到以下错误：

无法在项目测试中执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile)：编译失败：编译失败：[ERROR] \workspace\test\src\main\ java\com\test\services\Test1ServiceImpl.java:[14,1] 找不到符号 [ERROR] 符号：类 Stateless [ERROR] @Stateless [ERROR] \workspace\test\src\main\java\com\test\ services\Test1ServiceImpl.java:[16,1] 找不到符号 [ERROR] 符号：远程类 我的 POM 看起来像这样：http://maven.apache.org/maven-v4_0_0.xsd">4.0.0

```
<groupId>com.test</groupId>
<artifactId>test</artifactId>
<version>1.0-SNAPSHOT</version>
<name>test-common</name>
<packaging>ejb</packaging>

<repositories>
    <repository>
        <id>repository.jboss.org-public</id>
        <name>JBoss.org Maven repository</name>
        <url>https://repository.jboss.org/nexus/content/groups/public</url>
    </repository>
</repositories>
<dependencies>

    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>org.jboss.ejb3</groupId>
        <artifactId>jboss-ejb3-ext-api</artifactId>
        <version>1.1.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-annotations-ejb3</artifactId>
        <version>4.2.3.GA</version>
        <scope>provided</scope>
    </dependency>
    <dependency>

        <groupId> com.thoughtworks.xstream</groupId>
        <artifactId>xstream</artifactId>
        <version>1.2.2</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.jms</groupId>
        <artifactId>jms</artifactId>
        <version>1.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging-api</artifactId>
        <version>1.1</version>
        <scope>provided</scope>
    </dependency>

</dependencies>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.4.3</version>
            <configuration>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <ejbVersion>3.0</ejbVersion>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:47:49.067

“无国籍阶级”？没有包裹？您的 JAva 源代码是否正确（带有导入？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:49:33.113

您必须包含包含 javax.ejb.* API 的 jar。

将依赖项添加到 pom.xml 中的以下 jar。

对于 Java EE 6：http: [//download.java.net/maven/2/javax/javaee-api/6.0/javaee-api-6.0.jar](http://download.java.net/maven/2/javax/javaee-api/6.0/javaee-api-6.0.jar)

# formatting - Python中的数字货币格式

> ID：10669255
> 
> 赞同：0
> 
> 时间：2012-05-19T22:22:01.117
> 
> 标签：formatting, python-3.x, currency

我正在上一门计算机科学课程，任务是设计一个没有用户输入的退休计划器。我设计了一个有效的程序：

```
def main():

    calcFinalBalance(age=30,rate=6,savings=3000)

def calcFinalBalance(age,rate,savings):
    balance = 0
    while age < 70:
        balance += savings
        balance = balance + (balance * ((rate)/100))
        age += 1

    print('$' + format(balance, ',.2f'))
main() 
```

计算 $492,143.05

但这不是作业的正确格式。

我需要打印`('$' + format(calcFinalBalance(30,6,3000), '.2f'))` 来计算我的答案，我需要返回值。我想我需要在我的 while 语句之后返回余额，我的问题是我无法弄清楚如何在不执行上述操作的情况下将值传递给我的参数。我不断收到未定义的参数，如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:25:34.667

不知道这对你有没有帮助？它应该用“$”符号打印您的余额。您可以使用可以在网上找到的正确代码更改货币。

```
>>> import babel.numbers
>>> import decimal
>>> babel.numbers.format_currency( decimal.Decimal( balance, "USD" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:55:08.163

我不完全确定问题是什么，但`calcFinalBalance(age=30,rate=6,savings=3000)`相当于`calcFinalBalance(30,6,3000)`- 它应该也能正常工作。您可以想象用 30 代替年龄，用 6 代替利率，用 3000 代替储蓄。

该`format(calcFinalBalance(30,6,3000), '.2f'))`调用表明`calcFinalBalance`应该返回一个浮点数，我认为如果你只是`balance`从返回`calcFinalBalance`（现在你正在打印它，从而返回`None`）应该这样做

# javascript - 所见即所得删除标记

> ID：10669259
> 
> 赞同：2
> 
> 时间：2012-05-19T22:22:31.960
> 
> 标签：javascript, editor, wysiwyg

我正在尝试学习 javascript 和 jquery，作为我有法师图像编辑器和现在所见即所得编辑器的项目，我遇到的问题是从选定文本中删除标记

这就是我到目前为止所拥有的

```
 function removemarkup() {
  var range = window.frames['textEditor'].getSelection().getRangeAt(0);
  var selectionContents = range.extractContents();
  alert(selectionContents);
   var selectedText = selectionContents.toString();  
  alert(selectedText);
} 
```

所有这一切都是替换选定的文本任何想法

先感谢您

[http://www.html5imageeditor.co.uk/texteditor/index.html](http://www.html5imageeditor.co.uk/texteditor/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:37:12.107

```
function removemarkup() {
  var range = window.frames['textEditor'].getSelection().getRangeAt(0);
  var selectionContents = range.startContainer.data;
  alert(selectionContents);
} 
```

# c# - 使用秒表对应用程序使用情况进行基准测试

> ID：10669262
> 
> 赞同：4
> 
> 时间：2012-05-19T22:22:54.170
> 
> 标签：c#, oop, class, stopwatch

嗨，我正在尝试制作一个可以在我的项目中使用的全局类，我打算将其用作我的默认模板，我是新手，所以请耐心等待；）

```
Stopwatch Masterstopwatch = new Stopwatch();

#if DEBUG

    private static void ApplicationLogStart()
    {
        StartTime = DateTime.Now;
        Masterstopwatch.Start();

        String eventName = "Program Loaded";
        String errorDetails = "Program has started Succesfully";
        DataLogEntry(eventName, errorDetails);
    }
    private static void ApplicationLogclosing()
    {
        String eventName = "Program is closing";
        String errorDetails = "Program has closed Succesfully";
        DataLogEntry(eventName, errorDetails);
        StopTime = DateTime.Now;
        Masterstopwatch.Stop();
        Benchmark(StartTime,StopTime,Masterstopwatch.Elapsed);
    }
#endif 
```

我怀疑我的设计存在根本缺陷，因为我想要秒表 Masterstopwatch = new Stopwatch(); 要在不使用方法的情况下全局声明，我怀疑这是不可能的，但我需要问谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T22:47:23.023

听起来您需要[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)。

如果您如下声明秒表的包装器，您可以在应用程序的任何位置使用它并访问相同的秒表实例。

```
// Declare singleton wrapper of a stopwatch, which instantiates stopwatch
// on construction
public class StopwatchProxy 
{
    private Stopwatch _stopwatch;
    private static readonly StopwatchProxy _stopwatchProxy = new StopwatchProxy();

    private StopwatchProxy()
    {
        _stopwatch = new Stopwatch();
    }

    public Stopwatch Stopwatch { get { return _stopwatch; } } 

    public static StopwatchProxy Instance
    { 
        get { return _stopwatchProxy; }
    }
}

// Use singleton
class Foo
{
    void Foo()
    {
        // Stopwatch instance here
        StopwatchProxy.Instance.Stopwatch.Start();
    }
}

class Bar
{
    void Bar()
    {
        // Is the same instance as here
        StopwatchProxy.Instance.Stopwatch.Stop();
    }
} 
```

# html - 加速器示例 Phonegap 不起作用

> ID：10669263
> 
> 赞同：0
> 
> 时间：2012-05-19T22:23:02.017
> 
> 标签：html, mobile, jquery-mobile, cordova

我在我的程序中包含了一个页面，该页面使用 PhoneGap Cordova 显示来自移动设备的加速器数据。我也在使用 JQuery。我的问题是它没有显示数据。我究竟做错了什么？我对移动 HTML 和 JavaScript 开发非常陌生。

```
 <!DOCTYPE html> 
    <html>
    <head>
    <meta charset="UTF-8">
    <title>jQuery Mobile Web App</title>
    <link href="jquery-mobile/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
    <link href="jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
    <script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
    </head> 
    <body> 

    <div data-role="page" id="page">
        <div data-role="header">
            <h1>Page One</h1>
        </div>
        <div data-role="content">   
            <ul data-role="listview">
                <li><a href="#page2">Page Two</a></li>
                <li><a href="#page3">Page Three</a></li>
                <li><a href="#page4">Page Four</a></li>
                <li><a href="#page6">Accelerator Example</a></li>
                <li><a href="#page5">Alert Example</a></li>
            </ul>       
        </div>
        <div data-role="footer">
            <h4>Page Footer</h4>
        </div>
    </div>

     //code from other pages excluded

    <div data-role="page" id="page6">
    <div data-role="header">
        <h1>Accelerator example 2</h1>
    </div>
    <div data-role="content" data-theme="b">
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">
    document.getElementById("ready").innerHTML = "false";
    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        document.getElementById("ready").innerHTML = "true";
        navigator.accelerometer.getCurrentAcceleration(onSuccess, onError);
    }

    // onSuccess: Get a snapshot of the current acceleration
    //
    function onSuccess(acceleration) {
        /*alert('Acceleration X: ' + acceleration.x + '\n' +
              'Acceleration Y: ' + acceleration.y + '\n' +
              'Acceleration Z: ' + acceleration.z + '\n' +
              'Timestamp: '      + acceleration.timestamp + '\n');
              document.writeln(
              'Acceleration X: ' + acceleration.x + '\n' +
              'Acceleration Y: ' + acceleration.y + '\n' +
              'Acceleration Z: ' + acceleration.z + '\n' +
              'Timestamp: '      + acceleration.timestamp + '\n');*/
             /* $("ax").html(acceleration.x);
    $("ay").html(acceleration.y);
    $("az").html(acceleration.z);
    */
    document.getElementById("ax").innerHTML = acceleration.x;
    document.getElementById("ay").innerHTML = acceleration.y;
    document.getElementById("az").innerHTML = acceleration.z;
    }

    // onError: Failed to get the acceleration
    //
    function onError() {
        alert('onError!');
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>getCurrentAcceleration</p>
    <p id="ax"></p>
    <p id="ay"></p>
    <p id="az"></p>
    <p id="ready"></p>
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:09:16.087

您的示例有两个正文标签，第二个正文中的内容未显示。

[此处](http://code.google.com/a/eclipselabs.org/p/mobile-web-development-with-phonegap/source/browse/#svn/tags/r1.2/com.mds.apg/resources/jqm/phonegapExample)提供了带有 jQ​​uery Mobile 和 PhoneGap 的加速度计的工作示例。

如果您的目标是 Android，[AppLaud Eclipse 插件](http://www.mobiledevelopersolutions.com/)或[AppLaud Cloud](http://applaudcloud.com/)中的项目创建向导将为您提供一个完全运行的项目。

# objective-c - 如何在 Xcode 中获取 PNG 名称而不是整个目录路径？

> ID：10669264
> 
> 赞同：1
> 
> 时间：2012-05-19T22:24:05.100
> 
> 标签：objective-c, xcode, png, filenames, nsbundle

所以我在我的“支持文件”Xcode 项目中有一个 PNG 列表。我这样做是为了访问所有扩展名为 PNG 的文件：

```
NSArray *pngFilePaths = [[NSBundle mainBundle] pathsForResourcesOfType:@"png" inDirectory:@""];
NSLog(@"PNG:%@", pngFilePaths); 
```

打印出这个：

```
"/Users/John/Library/Application Support/iPhone Simulator/5.1/Applications/123456-1234-1234-1234-B123412341234/MyPNGProject.app/UI_daily_time.png" 
```

但是，我只想要 PNG 名称“UI_daily_time”，而不是整个路径。所以我只是添加了上面的目录来访问 png：

```
NSArray *pngFilePaths = [[NSBundle mainBundle] pathsForResourcesOfType:@"png" inDirectory:@"/Users/John/Library/Application Support/iPhone Simulator/5.1/Applications/123456-1234-1234-1234-B123412341234/MyPNGProject.app/"];
NSLog(@"PNG:%@", pngFilePaths); 
```

但是 pngFilePaths 现在是空的，我猜我给它的“inDirectory”路径是错误的，但我不知道为什么。非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:29:04.027

获得完整路径后，使用 stringByDeletingPathExtension 删除扩展名，然后使用 lastPathComponent 仅获取名称：

```
NSString *pngFilePath = [pingFilePaths objectAtIndex:0];
NSString *pngName = [[pngFilePath stringByDeletingPathExtension] lastPathComponent]; 
```

# python - Python numpy memmap 矩阵乘法

> ID：10669270
> 
> 赞同：3
> 
> 时间：2012-05-19T22:24:53.913
> 
> 标签：python, numpy, memory-management, matrix-multiplication, large-data

我试图在两个巨大的矩阵（10 * 25,000,000）之间产生一个通常的矩阵乘法。当我这样做时，我的记忆就会耗尽。我如何使用 numpy 的 memmap 来处理这个问题？这甚至是个好主意吗？我并不担心操作的速度，我只想要结果，即使这意味着等待一段时间。提前谢谢你！

8 GB 内存，I7-2617M 1.5 1.5 ghz，Windows7 64 位。我使用 64 位版本的一切：python(2.7)、numpy、scipy。

编辑1：

也许 h5py 是一个更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:42:13.517

您可能会尝试使用`np.memmap`，并一次计算一个元素的 10x10 输出矩阵。

所以你只需加载第一个矩阵的第一行和第二个矩阵的第一列，然后`np.sum(row1 * col1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T13:05:34.707

试试 numpy.memmap 和 numexpr！这将在没有内存 xD 的情况下使用您的磁盘和 CPU 缓存。它像fortran循环一样好。这里有一些代码：[python-way to do fast matrix multiplication and reduction while working in memmaps and CPU](https://stackoverflow.com/questions/32551007/python-way-to-do-fast-matrix-multiplication-and-reduction-while-working-in-mem)。但要注意它将创建的文件的大小 - 如果它们只是临时文件，请稍后删除它们，如果不是，那么我认为最好将它们与压缩 9x 的 pandas.hdf5 文件结合起来。所以你创建data.tofile用memmap加载它，计算，将memmap保存到pandas.hd5f，删除memmap。将数据存储在一行中也是 hdf5 文件的一些选项，它应该占用更少的空间 - 我想我在某处读过它。此外，当您使用 numpy 对 1row 数据进行 memmap 时，只需给出一些具有正确顺序的形状，numpy memmap 将以所选形状读取该 1row 数据。

# .net - 注册具有唯一记录器名称的记录器类型

> ID：10669271
> 
> 赞同：1
> 
> 时间：2012-05-19T22:25:04.777
> 
> 标签：.net, logging, castle-windsor, structuremap

我以前用 StructureMap 做过这个，现在我希望用 Windsor Castle 做同样的事情。有谁知道该怎么做？

```
Registry.For<ILogger>().Use(s => 
new Logger(s.ParentType ?? s.BuildStack.Current.ConcreteType)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:38:26.937

好吧，我从一个使用温莎城堡的团队成员那里得到了一些帮助。

这就是它需要编写的方式。

```
Component.For<ILogger>().UsingFactoryMethod((m, v, i) =>
                    new Logger(i.Handler.ComponentModel.Implementation.Name)
                ).LifeStyle.Transient 
```

# java - 仅在特定时间内显示错误文本？

> ID：10669279
> 
> 赞同：1
> 
> 时间：2012-05-19T22:27:20.453
> 
> 标签：java, android, android-edittext

如何仅在特定时间内显示 setError()？

```
if(editText.getText().length()==0)   
   editText.setError("please input text"); 
```

我可以让它在几秒钟后消失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:52:33.333

考虑使用[toast 通知](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-19T22:33:30.107

试试这个：

在 OnCreate 方法中使用 Handler 来保持从非 ui 线程返回到 UI 线程的引用，因为一旦我们创建了一个线程，我们就会丢弃 Ui 线程.. 很抱歉给您留下的不便上一篇文章。现在它将按您的意愿工作

```
 Handler h;

    onCreate(......) {

    h = new Handler();

    ....
    ....

    }

        if(editText.getText().length()==0) {  
           editText.setError("please input text"); 
           new Thread (new Runnable() {
              public void run(){
                 try{
                    Thread.sleep(1000);

                    h.post(new Runnable() {

                      editText.setText("");    // this will put the non-ui work on the ui thread back

                  }
                 }catch(Exception ex){}
              }    
           }.start();

  } 
```

# python - 如何使用 python 在多元回归中将截距归零？

> ID：10669282
> 
> 赞同：3
> 
> 时间：2012-05-19T22:28:03.350
> 
> 标签：python, numpy, scipy, regression

在 python/scipy/numpy 中是否可以将多元回归的截距归零？[我在 OLS 食谱（ http://www.scipy.org/Cookbook/OLS](http://www.scipy.org/Cookbook/OLS)）中找不到它。

我宁愿不必使用 RPython，但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:17:35.173

[http://statsmodels.sourceforge.net/stable/generated/statsmodels.regression.linear_model.OLS.html](http://statsmodels.sourceforge.net/stable/generated/statsmodels.regression.linear_model.OLS.html)

statsmodels 要求您创建名为 exog 的设计矩阵，它不会自动添加常量/截距。因此，使用 statsmodels 您可以省略常量并运行回归。

在这种情况下，某些测试或结果统计数据可能不正确，因为如果我没记错的话，它们假设包含一个常量，例如 r_squared。

# c++ - 如何解析后跟分号或换行符（boost::spirit）的条目？

> ID：10669287
> 
> 赞同：5
> 
> 时间：2012-05-19T22:29:05.093
> 
> 标签：c++, boost-spirit, boost-spirit-qi

在 Boost::Spirit 中，如何解析后跟分号或带有可选分号的换行符的条目？

示例输入，其中每个条目是一个 int 和一个 double：

```
12 1.4;
63 13.2
2423 56.4 ; 5 8.1 
```

这是仅解析后跟空格的条目的示例代码：

```
#include <iostream>
#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/fusion/include/std_pair.hpp>
namespace qi = boost::spirit::qi;

typedef std::pair<int, double> Entry;

template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, std::vector<Entry>(), Skipper> {
  MyGrammar() : MyGrammar::base_type(entries) {
    entry = qi::int_ >> qi::double_;
    entries = +entry;
  }
  qi::rule<Iterator, Entry(), Skipper> entry;
  qi::rule<Iterator, std::vector<Entry>(), Skipper> entries;
};

int main() {
  typedef boost::spirit::istream_iterator It;
  std::cin.unsetf(std::ios::skipws);
  It it(std::cin), end;

  MyGrammar<It, qi::space_type> entry_grammar;
  std::vector<Entry> entries;
  if (qi::phrase_parse(it, end, entry_grammar, qi::space, entries)
      && it == end) {
    BOOST_FOREACH(Entry const& entry, entries) {
      std::cout << entry.first << " and " << entry.second << std::endl;
    }
  }
  else {
    std::cerr << "FAIL" << std::endl;
    exit(1);
  }
  return 0;
} 
```

现在，为了解析我想要的方式（每个条目后跟分号或带有可选分号的换行符），我替换了这个：

```
 entries = +entry; 
```

这样：

```
 entries = +(entry >> (qi::no_skip[qi::eol] || ';')); 
```

其中`boost::spirit`运算符`||`表示：（a 后跟可选 b）或 b。`1.4`但是，如果在此示例输入之后有空格，则会出现错误：

```
12 1.4
63 13.2 
```

空间不匹配是有道理的，`no_skip`但我无法找到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T01:34:24.130

这是我的看法。

*   您可能想知道`qi::blank`（`qi::space`除了`qi::eol`）。这将消除对`no_skip`.
*   核心语法变为：

    ```
     entry = qi::int_ >> qi::double_;
        entries = entry % +qi::char_("\n;") >> qi::omit[*qi::space]; 
    ```

*   使用 BOOST_SPIRIT_DEBUG 了解解析失败的位置和原因（例如回溯）

输出：

```
12 and 1.4
63 and 13.2
2423 and 56.4
5 and 8.1 
```

完整代码：

```
//#define BOOST_SPIRIT_DEBUG
#include <iostream>
#include <boost/foreach.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/fusion/include/std_pair.hpp>
namespace qi = boost::spirit::qi;

typedef std::pair<int, double> Entry;

template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, std::vector<Entry>(), Skipper> {
    MyGrammar() : MyGrammar::base_type(entries) {
        entry = qi::int_ >> qi::double_;
        entries = 
            entry % +qi::char_("\n;")          // the data
            >> qi::omit[*qi::space] > qi::eoi; // trailing whitespace
        BOOST_SPIRIT_DEBUG_NODE(entry);
        BOOST_SPIRIT_DEBUG_NODE(entries);
    }
    qi::rule<Iterator, Entry(), Skipper> entry;
    qi::rule<Iterator, std::vector<Entry>(), Skipper> entries;
};

int main() {
    typedef boost::spirit::istream_iterator It;
    std::cin.unsetf(std::ios::skipws);
    It it(std::cin), end;

    MyGrammar<It, qi::blank_type> entry_grammar;
    std::vector<Entry> entries;
    if (qi::phrase_parse(it, end, entry_grammar, qi::blank, entries)
            && it == end) {
        BOOST_FOREACH(Entry const& entry, entries) {
            std::cout << entry.first << " and " << entry.second << std::endl;
        }
    }
    else {
        std::cerr << "FAIL" << std::endl;
        exit(1);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:46:35.900

好的，我发现这很好用：

```
entries = +(entry >> (qi::no_skip[*qi::lit(' ') >> qi::eol] || ';')); 
```

所以直接的问题就解决了。

`1.4`但是如果标签经常出现，它仍然会失败

```
12 1.4
63 13.2 
```

这会更好，但它不会编译：

```
entries = +(entry >> (qi::no_skip[*qi::space >> qi::eol] || ';')); 
```

错误：

```
error: invalid static_cast from type ‘const std::pair<int, double\
>’ to type ‘int’ 
```

# ruby-on-rails-3 - 导入 CSV 时如何覆盖模型中的 created_at 字段？

> ID：10669288
> 
> 赞同：5
> 
> 时间：2012-05-19T22:29:05.417
> 
> 标签：ruby-on-rails-3

我正在将一个包含先前创建日期的候补名单注册的 CSV 导入到我的数据库中，如何在保持初始日期的同时导入它们，而不是让它们都显示相同的导入日期？

我得到错误：`Rails can't mass-assign protected attributes for id, created_at`

编码：

```
 csv_file = params[:csv][:file].read
    csv = CSV.parse(csv_file, :headers => false) 
    csv.each do |row|
       Model.create!(:email => row[0], :created_at => row[1])    
    end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-04T03:31:35.183

在 Rails 4 中：

`attr_accessible`不再使用并且将其包含在模型的顶部可能会破坏您的代码。仅仅包括`:created_at`在传递给的参数中就`create!`应该这样做。

在这里将@Ghoti 的评论变成答案，以使其更具可见性

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T00:26:46.983

您需要将所需的列添加到`attr_accessible`

```
class Tutorial < ActiveRecord::Base
  attr_accessible :created_at
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-15T02:32:00.897

也许你可以做这样的事情：

```
csv.each do |row|
   doc = Model.create!(:email => row[0])
   doc.update(created_at: row[1])
end 
```

* * *

我需要做类似的事情，通过组织返回，并根据最早注册的用户（如果适用）更新创建。（组织 ID 是自定义字符串 :-)

所以你可以看到`update`命令是如何工作的......你可以看到使用 BSON id 获取日期的**巧妙技巧。**

```
Org.all.to_a.collect do |o|
  u = o.users.first
  if u
    o.update(created_at: Time.parse(u.id.generation_time.strftime('%Y-%m-%d %H:%M')))
  else
    o.update(created_at: Time.now.utc)
  end
end 
```

# php - 从视图脚本中替换 zend 占位符内容

> ID：10669290
> 
> 赞同：0
> 
> 时间：2012-05-19T22:29:22.917
> 
> 标签：php, zend-framework

我像这样初始化占位符：

**default.phtml（布局文件）**

```
<?php $this->placeholder('hero')->captureStart(); ?>
<div class="primary">
  <h1>Foo bar!</h1>
</div>
<?php $this->placeholder('hero')->captureEnd(); ?>
<?php echo $this->placeholder('hero'); ?> 
```

**index.phtml（查看脚本文件）**

```
<?php $this->placeholder('hero')->captureStart(); ?>
<div class="primary">
  <h1>Bar Baz!</h1>
</div>
<?php $this->placeholder('hero')->captureEnd(); ?>
<?php echo $this->placeholder('hero'); ?> 
```

**输出：** 在我的输出中，我最终得到了两个标题。我只想显示 Bar baz。

# 巴兹！

# 福吧！

我如何替换/覆盖占位符的视图脚本中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:24:48.623

`captureStart()`[（检查示例 #13）](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)的默认设置正在`append`尝试将其设置为`set`：

```
<?php $this->placeholder('hero')->captureStart('SET'); ?>
<div class="primary">
  <h1>Bar Baz!</h1>
</div>
<?php $this->placeholder('hero')->captureEnd(); ?>
<?php echo $this->placeholder('hero'); ?> 
```

# ruby-on-rails-3 - Rails 3 应用程序中的 Mp3 播放器

> ID：10669302
> 
> 赞同：1
> 
> 时间：2012-05-19T22:31:20.543
> 
> 标签：ruby-on-rails-3, mp3

我想在网页上放一个播放器，我正在使用 mp3_player (https://github.com/sekrett/mp3_player)。我安装了插件，一切正常，除了播放器找不到文件的路径。我已将名为 file.mp3 的文件放在公用文件夹中，并在我的代码中添加了以下标签：

> $ <%= mp3_player("/public/file.mp3") %>

播放器出现在页面上，但是当我单击播放时，播放器说文件丢失。日志中出现以下路由错误：

> ActionController::RoutingError (没有路由匹配 [GET] "/public/file.mp3")

我做错了什么，有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:36:47.727

试着写`<%= mp3_player("/file.mp3") %>`。“公共”文件夹是您项目的根文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:41:36.140

[kasper375 的](https://stackoverflow.com/users/1179976/kasper375)建议应该有效。如果您不关心 HTML5 之前的支持，您也可以[将音频文件包装在`audio`标签](http://www.catswhocode.com/blog/mastering-the-html5-audio-property)中，浏览器会自动为您提供浏览器内播放器。据我了解，通常支持`.mp3`和文件。`.ogg`

附带说明一下，使用 HTML5 的`video`标签可以轻松播放视频。

# php - （大）Python 项目的数据库引擎

> ID：10669305
> 
> 赞同：0
> 
> 时间：2012-05-19T22:32:34.163
> 
> 标签：php, python, mysql, database, performance

我有一个用 PHP 编写的大型项目，数据存储在 MySQL 中（主要是 MyISAM 表和一些 InnoDB）。因为项目变得更大更复杂，我想使用面向对象编程和 Python 重写它。在 Python 中有哪些数据库引擎可供选择？哪些 DB 最常用于大型 Python 项目（网站上大约有 500 个同时活跃的用户）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:37:02.803

我认为 PostgreSQL 在 Python 世界中最常见，而 MySQL 紧随其后。但是，这并不重要 - [python 数据库 api](http://www.python.org/dev/peps/pep-0249/)是相同的，只有数据库引擎之间的细微差别（主要是值的占位符 - 它可能是`?`等等`%s`）。

但是，请考虑使用 SQLAlchemy - 仅用于 SQL 抽象或它的 ORM，这非常棒。无论哪种方式，除非你想使用特定于数据库引擎的东西，否则你可以使用*任何*数据库——无论是 sqlite、mysql、pgsql、oracle 还是 SQLAlchemy 支持的任何其他数据库。

即使您可能使用完全不同的东西，以防万一您使用[Flask](http://flask.pocoo.org/)作为您的 Web 框架（您*确实*打算使用 WSGI 框架，对吗？！），有[Flask-SQLAlchemy](http://packages.python.org/Flask-SQLAlchemy/)可以非常容易地开始使用它.
如果您要使用[Django](https://www.djangoproject.com/)，它已经带有自己的 ORM。

# css - 如何在导航“div”中定位文本。

> ID：10669308
> 
> 赞同：0
> 
> 时间：2012-05-19T22:32:57.853
> 
> 标签：css, html

好的。感谢您给我宝贵的时间来研究这个问题。

基本上，我在屏幕顶部有一个“div”用于导航栏。这是一个简单的导航栏，只有 80% 宽的“div”，其中包含一些在悬停时会改变颜色的文本。

我遇到的问题是；文本自动从“div”的顶部开始，我想将它居中。我已经尝试过边距、填充、浮动、“div”内的“div”等。等等。

我将在此处发布导航栏的代码，如果您碰巧知道如何修复它，请告诉我吗？

谢谢

HTML 代码：

```
<div class="header">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Repairs</a></li>
                <li><a href="#">Tune up/ Viruses</a></li>
                <li><a href="#">System Builds</a></li>
                <li><a href="#">Cables</a></li>
                <li><a href="#">Contact us</a></li>
                <li><a href="#">Find us</a></li>
                <li><a href="#">Links</a></li>
               <!-- <li><a href="/"><img src="facebook.png"></a></li>   -->
            </ul>
    </div> 
```

代码：

```
.header ul { margin:0px;}
        div.header
        {
            width: 80%;
            height: 40px;
            margin-top: none;
            margin-bottom: none;
            margin-left: auto;
            margin-right: auto;
            border-top: none;
            border-left: none;
            border-right: none;
            border-bottom: none;
            background-color:  #575757;
        }
        li
        {
            display: inline;
            font-family: 'open sans,' arial;
            padding-right: 10px;
            padding-top: 10px;
            margin-left: 10px;
            font-size: 20px;
        }
        li a 
        {
            text-decoration: none;
            color: white;
        }
        li a:hover
        {
            color: #00ccff;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:37:40.763

您可以使用一堆东西将元素垂直居中。

最好的一对一元素（例如，只有一行文本的元素）是`line-height`

将 设置`line-height`为等于其父项的高度：

```
li { line-height: 40px; } 
```

# ruby-on-rails - omn iauth 如何在 Rails 中拦截 /auth/facebook？

> ID：10669310
> 
> 赞同：0
> 
> 时间：2012-05-19T22:33:33.610
> 
> 标签：ruby-on-rails, omniauth

我正在尝试了解omniauth 的内部情况，并对它如何知道拦截/auth/facebook url 感到好奇。它是否附加到现有的路由文件？我在哪里可以找到它的内部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:50:22.253

它使用机架中间件来嗅探被请求的路径，如果匹配，则调用相关的策略。有问题的文件是[`lib/omniauth.rb`](https://github.com/intridea/omniauth/blob/master/lib/omniauth.rb)和[`lib/omniauth/strategy.rb`](https://github.com/intridea/omniauth/blob/master/lib/omniauth/strategy.rb)。

要查看所采用的路径，请从 中的[`call!`](https://github.com/intridea/omniauth/blob/master/lib/omniauth/strategy.rb#L165)方法开始`strategy.rb`。请特别注意任何检查的内容`path_prefix`，默认为`/auth`.

# xslt-1.0 - XPath 中 sum 和 product 的聚合函数

> ID：10669313
> 
> 赞同：3
> 
> 时间：2012-05-19T22:34:08.720
> 
> 标签：xslt-1.0, xpath-1.0

与这个问题（http://stackoverflow.com/q/1333558/948404）类似，我想使用 XPath 计算结构中的产品总和，如下所示：

```
<items>
    <item>
        <value>1.0</value>
        <quantity>3</quantity>
    </item>
    <item>
        <value>2.5</value>
        <quantity>2</quantity>
    </item>
    <!-- ... -->
</items> 
```

是否有一个 XPath 表达式计算每个项目的乘积之`value`和`quantity`？

**更新：**该解决方案必须与 PHP 的 XSLTProcessor 类一起使用，这意味着它可能必须符合 XSLT 1.0。这就是为什么我还没有接受使用 XSLT 2.0 的两个可能正确的答案。我无法在我的 PHP 实现、浏览器或 w3schools 的 Tryit Editor [1] 中测试它们。对不起！

1.  [http://w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog](http://w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:32:04.120

**使用这个 XPath 2.0 表达式**：

```
sum(/items/item/(value * quantity)) 
```

**Here is an XSLT 2.0 transformation as verification**:

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:template match="/">
        <xsl:sequence select="sum(/items/item/(value * quantity))"/>
    </xsl:template>
</xsl:stylesheet> 
```

**When this transformation is applied on the provided XML document:**

```
<items>
    <item>
        <value>1.0</value>
        <quantity>3</quantity>
    </item>
    <item>
        <value>2.5</value>
        <quantity>2</quantity>
    </item>
    <!-- ... -->
</items> 
```

**the XPath expression is evaluated and the result of this evaluation is output:**

```
8 
```

**Explanation**:

In XPath 2.0 it is legal for a location step to be

`/(expression)`,

or even

`/someFunction(argumentList)`

* * *

**II. XSLT 1.0 solution**:

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:call-template name="sumProducts">
    <xsl:with-param name="pNodes" select="item"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="sumProducts">
   <xsl:param name="pNodes" select="/.."/>
   <xsl:param name="pAccum" select="0"/>

   <xsl:choose>
    <xsl:when test="not($pNodes)">
     <xsl:value-of select="$pAccum"/>
    </xsl:when>
    <xsl:otherwise>
     <xsl:call-template name="sumProducts">
      <xsl:with-param name="pNodes" select="$pNodes[position() >1]"/>
      <xsl:with-param name="pAccum" select=
      "$pAccum + $pNodes[1]/value * $pNodes[1]/quantity"/>
     </xsl:call-template>
    </xsl:otherwise>
   </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**when this transformation is applied on the provided XML document (above), again the wanted, correct result is produced**:

```
8 
```

**Do note**: Such kind of problems are easy to solve using the **[FXSL library](http://fxsl.sf.net)**. The template to call is `transform-and-sum` .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:03:06.840

试试这个：

```
<xsl:stylesheet version="2.0"xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:template match="/">
        <xsl:sequence select="sum(/items/item/(value * quantity))"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:32:13.557

Based on this suggestion [https://stackoverflow.com/a/1334165/948404](https://stackoverflow.com/a/1334165/948404) I came up with a solution compliant with XSLT 1.0 and XPath 1.0, which are implemented by libxml/libxslt, used by PHPs implementation of `XSLTProcessor` (thanks to @Dimitre Novatchev for confirmation).

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/items">
        <xsl:call-template name="recursivesum">
            <xsl:with-param name="items" select="*" />
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="recursivesum">
        <xsl:param name="items" />
        <xsl:param name="sum" select="0" />
        <xsl:variable name="head" select="$items[1]" />
        <xsl:variable name="tail" select="$items[position()>1]" />
        <xsl:variable name="thissum" select="$head/value * $head/quantity" />
        <xsl:choose>
            <xsl:when test="not($tail)">
                <xsl:value-of select="$sum+$thissum" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:call-template name="recursivesum">
                    <xsl:with-param name="sum" select="$sum+$thissum" />
                    <xsl:with-param name="items" select="$tail" />
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:transform> 
```

# ios - 带有许多圆圈的 UIView

> ID：10669323
> 
> 赞同：1
> 
> 时间：2012-05-19T22:36:05.643
> 
> 标签：ios, uiview

我正在创建一个 iphone 应用程序，但在 UIVIew 中绘制了太多实心圆圈时遇到了一些问题。我的目标是创建一个绘画应用程序，当触摸屏幕时，它应该在该区域绘制一个实心圆圈。我有一个派生自 UIView 的类，它有 2 个方法 AddCircle 接受 Point 并将其添加到列表中。遍历列表并绘制圆圈的重写 Draw 方法。

当有超过 300 个圆圈时，我的 ios 模拟器无法像以前那样快速绘制圆圈。

我最初尝试在 Draw 中绘制一个新圆圈，但这会删除调用之前绘制的所有内容。我想用同一个视图画很多圈（或者每次触摸屏幕时创建一个新视图更好？看起来它会创建很多很多视图......）

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:42:27.080

你的做法是错误的。对于绘图应用程序，您应该考虑使用 CGBitmapContext 来绘制位图上下文的内容并将其显示到 UIImageView 中。这样你实际上是在绘制像素。

那是假设您没有尝试制作矢量艺术应用程序。

# javascript - 有没有办法24小时禁用按钮？

> ID：10669325
> 
> 赞同：0
> 
> 时间：2012-05-19T22:36:05.693
> 
> 标签：javascript, jquery, button, cookies, onclick

好的，所以我一直在寻找如何做到这一点：当一个按钮被点击时，它会被禁用并变成一个 24 小时的倒数计时器。我找不到任何方法来做到这一点。例如，请参阅：[http ://www.donaldscott.com/Minecraft/interface.php?noCache=10](http://www.donaldscott.com/Minecraft/interface.php?noCache=10)

它需要允许您单击一个按钮，使用该`onclick`功能将其禁用 24 小时，然后显示该按钮的倒计时。当您刷新页面时，它将继续倒计时。你能用cookies做到这一点吗？jQuery？请帮帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:51:13.300

有两种主要方法可以做到这一点：

1.  通过在用户的机器上存储一些东西。
2.  通过在您的服务器上存储特定于该用户的内容。

Cookie 是选项 1 的一个示例。这种方法的好处是它比其他方法更容易。缺点是用户清除 cookie 或任何其他形式的本地存储并不难。如果您的 web 应用程序依赖于用户无法在 24 小时内再次单击该按钮，则 cookie 不是一种安全的方法。

选项 2 要复杂得多。您需要在服务器上的数据库中存储您对用户的了解，并使用该信息来决定是否启用按钮以及在柜台上显示的时间。

决定存储什么是棘手的。唯一真正安全的存储是登录令牌（用户是否登录才能使用您的应用程序？）。这样，您就可以为每个用户拥有一个唯一的令牌，用户是否从另一台计算机登录等都没有关系。其他方法是使用会话 cookie（与选项 1 相同的问题）或存储 IP 地址（更好，但仍然不可靠，尤其是对于使用移动设备或笔记本电脑的用户。）

除非您已经建立了数据库，并且使用了一些服务器端代码来生成视图，并且拥有登录机制，否则您可能需要考虑此功能的重要性。仅为这个按钮添加所有这些将是一项艰巨的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:54:49.180

这里是 cookie 的倒计时：

[http://www.wezelkrozum.nl/temp/countdown.php](http://www.wezelkrozum.nl/temp/countdown.php)

请注意，这不是安全的方法。节省用户必须在服务器端等待的时间，这样用户就无法更改值。

# cakephp - CakePHP：模型返回空值

> ID：10669326
> 
> 赞同：2
> 
> 时间：2012-05-19T22:36:06.783
> 
> 标签：cakephp

我的协会有一些问题。我有 3 个模型：用户、会员、公司。用户可能（或可能没有）拥有公司/会员资格。这是我的模型的粘贴箱：

[http://pastebin.com/xTCQeytn](http://pastebin.com/xTCQeytn)

我有2个问题：

1.  为什么 Company/Membership 会返回一个充满空值的数组（如果不存在）。
2.  我的同事对我想要完成的事情看起来是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T22:53:15.700

这对于 BelongsTo/HasOne 关系是正常的。因为它们与您的主要记录处于同一水平。只有 HasMany/Habtm 关系会导致一个空的子数组（因为这些将是一个数组数组）。这主要是由于返回数组结构的方式。

是的，你的模型关系在我看来很好。

# php - 如何在 PHP 代码中引入 JavaScript 警报窗口

> ID：10669335
> 
> 赞同：1
> 
> 时间：2012-05-19T22:37:19.020
> 
> 标签：php, javascript, alert

我需要`show_alert()`在 PHP 代码中引入 JavaScript 警报功能。如何做到这一点？

```
script type="text/javascript">
        function show_alert() {
            var msg = "No solution found.";
            alert(msg);
        }
</script>
<?php
//...
    $outputs = -1;
    if ($outputs == -1) {
        echo '<script type="text/javascript"> show_alert(); </script>';
    } else {
        ?>
        <table width="100%">
            <tr>
                <td width="100%"> 
                    <div class="scrollbar" id="chart">
                        <img src="ganttchart.php">
                    </div>
                </td>
            </tr>
        </table>
    <?php
    }
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T22:38:35.633

内嵌 JavaScript 需要在`<script>`标签内。只需在有效位置输出这些内容。请注意，您不能以这种方式影响 PHP 代码的操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T22:43:28.737

试试这个，它呼应了 show_alert(); 在 PHP 中：

```
<script type="text/javascript">
    function show_alert() {
    var msg = "No solution found";
    alert(msg);
    }
</script>

<?php
//...

$output = run_function();
if ($output == -1) {
   echo '<script type="text/javascript"> show_alert(); </script>';
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T22:41:41.350

用这个

```
<script type="text/javascript">
         show_alert();
    </script> 
```

像这样

```
$output = run_function();
if ($outputs == -1) {
?>
<script type="text/javascript">
             show_alert();
        </script>
<?php
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T22:52:58.747

我会建议

```
 $msg = "My message";
    echo "<script type=\"text/javascript\"> alert($msg); </script>"; 
```

你是对的，大卫

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T22:55:07.960

```
<?php
    $output = run_function();
    if ($outputs == -1) {
        echo "<script type='text/javascript'>alert("No Solution Found");</script>"
    }
?> 
```

# javascript - 使用 $(document).ready 为什么必须在匿名函数中？

> ID：10669338
> 
> 赞同：0
> 
> 时间：2012-05-19T22:38:13.463
> 
> 标签：javascript, jquery

我一直在使用准备好的文档，但我正在观看一些教程视频来真正了解发生了什么，而不是仅仅通过输入这么多才知道。

我总是出于习惯将它放在匿名函数中，因为它总是这样做，但现在我看到它是否不在匿名函数中（`alert();`例如），它不会在加载 DOM 时执行，而是在加载 javascript 时立即执行负载。它必须在一个匿名函数中才能发生它应该如何（当整个页面加载时）并且事件侦听器触发它的“准备好”。

为什么是这样？

此外，我经常看到类似 function(i){}(i) 的东西，这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T22:43:47.067

*在这个答案中，我将使用 的简写`$(document).ready(...)`，即`$(...)`如果传递了一个函数*。

该函数不必是匿名的；你可以这样写，例如：

```
function doStuff() {
}

$(doStuff); 
```

我想你的意思是如果你试试这个：

```
$(alert('Yo!')); 
```

它确实会立即发出警报。这是因为函数是预期的，并且`alert()`是函数*调用*。另一方面，这会起作用（尽管很奇怪）：

```
$(alert); 
```

对于第二个问题，什么`function(i){}(i)`是声明一个带有一个参数的函数对象，然后立即使用提供的参数运行它。这是一种使用对象的有用方法，不需要它是全局的，也不需要具有特定名称。例如，这个：

```
(function($) {
    // Do stuff with $
})(jQuery); 
```

让您别名`jQuery`为`$`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T22:42:35.593

好吧，这就是 JavaScript 的工作方式：

`$(document).ready(alert('x'));`将执行`alert('x')`并将其返回值传递给`$(document).ready()`. 这显然没有任何意义——您希望在 DOM 准备好时执行代码。因此，您将包含该代码的*函数*`$(document).ready()`传递给 - 一旦 DOM 准备好，jQuery 将执行传递给该函数的所有函数。

`(function(i){})(i);`是一种在新范围内创建新变量的方法。当您在循环内创建回调并想要循环变量的当前值时，这是必要的。

如果您谈论的是匿名函数，它有时会在问题的第一部分包装 jQuery 代码，即`(function($){ /* code here *= })(jQuery);`-`$`即使它不指向全局范围内的 jQuery，也可以使用它。它类似于我在上一段中提到的，只是用于不同的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T22:54:39.350

当你这样做

```
$(alert()) 
```

它相当于

```
var alertresult = alert()
$(alertresult); 
```

在这种情况下，很明显警报会立即运行。如果要传递函数本身，则需要避免调用它：

```
$(alert) 
```

* * *

至于`function(i){ dosomething }(somevalue)`东西，它基本上是一个shiort版本

```
(function(){
    var i = somevalue;
    dosomething;
}()); 
```

也就是说，您可以在 dosomething 位中使用变量“i”。将代码包装在立即调用的函数中的原因是，这会使`i`变量成为只能在您的函数上访问的局部变量，这样它就不会与其他全局变量发生冲突，也不会被其他函数覆盖。

# ios - 当 scrollViewDidEndDragging 时 UITableView 滚动到特定点

> ID：10669339
> 
> 赞同：1
> 
> 时间：2012-05-19T22:38:18.193
> 
> 标签：ios, uitableview, scroll

我有一个`UITableView`可滚动的。当用户滚动`UITableView`一定量然后松开手指时，我希望它从顶部滚动 50 点，而不是滚动回顶部，有效地在屏幕顶部和最顶部之间留下 50 点的间隙细胞。

目前我已经实现了`scrollViewDidEndDragging`，但我不知道如何设置视图将滚动回的位置。

我已经尝试了以下方法，但它没有按预期工作。

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    // If scrolled over 100 points
    if(-100 > (double)self.tableView.contentOffset.y) {
        [self.tableView setContentOffset:CGPointMake(0, -50) animated:YES];
    }
} 
```

上面的代码会导致奇怪的闪烁，就像动画同时运行一样，但我不确定。

任何帮助，将不胜感激。

## 更新更多信息

我正在根据这篇文章实现“下拉​​刷新”功能： [https ://stackoverflow.com/a/6392145/120615](https://stackoverflow.com/a/6392145/120615)

我`UIView`在顶部添加了一个额外的`UITableView`，当您滚动 时，向下`UITableView`移动`UIView`到视图中。当您从屏幕上松开手指时，`UITableView`滚动回顶部隐藏`UIView`我添加的新内容。

我**想要**发生的是，当您松开手指时，`UITableView`滚动回顶部但从顶部停止 100 点（因此我可以向用户显示活动指示器），*然后*在 2/3 秒后完全滚动到顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:54:37.390

我认为你是对的，动画是同时运行的，因为滚动视图具有减速功能。

而不是使用 DidEndDraging 回调函数试试这个：

*   (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView

这只会在用户触发的动画完成后调用。

# javascript - 调用事件侦听器 - 两种方式之一有效，有什么区别？

> ID：10669340
> 
> 赞同：0
> 
> 时间：2012-05-19T22:38:22.267
> 
> 标签：javascript

这种方式不起作用（元素是从函数中拉入的）。

```
 function styleTwitter1( pair_array )
    {
        var i;
        var input;
        var label;
        var font_size;

        for ( i = 0; i < pair_array.length; i+=2 ) 
        {
/*
*/
            input = document.getElementById( pair_array[ i ] );
            label = document.getElementById( pair_array[ i + 1 ] );
/*
*/
            label.fontSize = window.getComputedStyle( label, null ).getPropertyValue("font-size");
/*
*/
            input.addEventListener( "keypress", function()
            { 
                label.style.opacity = 0; 
            }, false );
/*
*/
            input.addEventListener( "focus", function()
            { 
                if( input.value === '' )
                {
                    label.style.opacity = 0.2; 
                    input.style.border = '1px solid #888888'; 
                }
            } , false );
/*
*/
            input.addEventListener( "blur", function()
            {
                if( input.value === '' )
                {
                    label.style.opacity = 1;
                    new EffectsFont( label ).fade( 'up', 150 );
                    input.style.border = '1px solid #dddddd'; 
                }   
            } , false );
/*
*/
        }
    } 
```

但是，这种方式可以（元素是从函数外部注入的）。

```
 function initTwitterStyle( input, label )
    {
/*
*/
        input.addEventListener( "keypress", function()
        { 
            label.style.opacity = 0; 
        }, false );
/*
*/
        input.addEventListener( "focus", function()
        { 
            if( input.value === '' )
            {
                label.style.opacity = 0.2; 
                input.style.border = '1px solid #888888'; 
            }
        }, false );
/*
*/
        input.addEventListener( "blur", function()
        {
            if( input.value === '' )
            {
                label.style.opacity = 1;
                new EffectsFont( label ).fade( 'up', 150 );
                input.style.border = '1px solid #dddddd'; 
            }

        }, false );
/*
*/
    } 
```

如果我无法弄清楚差异，我最终会做的是将我的数组循环拉到外面，然后将元素注入 twitterStyle2。

目前，我无法获得错误代码，但只有一对正在初始化..然后 EffectsFont 不起作用。

Jshint 警告不要在循环中创建函数，但我不明白为什么？问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:04:40.173

你有一个关闭问题。处理程序对变量进行闭包`label`。但是，当循环完成时，`label`将是最后一个元素 - 所有处理程序`label`在触发时都将视为最后一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:10:09.980

我称之为冻结闭包变量，基本上是通过使用一个自调用函数来创建一个不共享的新闭包。

```
var divs = [...];
for (var i=0; i < 10; i++) {
  // Here's the self calling function
  div.onclick = (function(i){
    return function() {
      console.log("Clicked div with index" + i);
    }
  })(i);// Passing the variable to the self calling function creating a new closure 
} 
```

但是，我的首选方法是使用[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

```
var divs = [...];
for (var i=0; i < 10; i++) {
  div.onclick = (function(i) {
      console.log("Clicked div with index" + i + "and id" + this.id );
    }
  }).bind(div, i);
} 
```

# java - 如何使特定标签在 JList 中闪烁

> ID：10669342
> 
> 赞同：1
> 
> 时间：2012-05-19T22:38:25.510
> 
> 标签：java, swing, jlabel, jlist, renderer

我已经设法将面板用作`JList`. 面板中包含的闪烁标签本身就可以正常工作。但是在我将渲染添加到列表后，标签停止闪烁。

我通过以一定间隔刷新列表来解决问题，以便能够看到闪烁，但是这次列表中的所有标签都开始闪烁（我只希望列表中的某些标签满足条件闪烁）。我已经研究了好几个小时试图解决它，但机会看起来很渺茫。

我的问题分为两层：

1.  为什么自带的blink-label-prove面板需要`JList`刷新才能查看blink？
2.  为什么在渲染过程中没有单独选择特定标签导致列表中的所有标签都在唱歌和跳舞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:07:21.693

这个[SSCCE](http://sscce.org)对我有用：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class BlinkingLabelInList extends JPanel {
   public static final Color FLASH_COLOR = Color.red;
   public static final int TIMER_DELAY = 500;
   private String[] data = {"Mon", "Tues", "Wed", "Thurs", "Fri"};
   private JList list = new JList(data);
   public Color cellColor = null;

   public BlinkingLabelInList() {
      add(new JScrollPane(list));
      list.setCellRenderer(new MyListCellRenderer());
      new Timer(TIMER_DELAY, new TimerListener()).start();
   }

   private class TimerListener implements ActionListener {
      @Override
      public void actionPerformed(ActionEvent e) {
         cellColor = (cellColor == null) ? FLASH_COLOR : null;
         list.repaint();
      }
   }

   private class MyListCellRenderer extends DefaultListCellRenderer {
      @Override
      public Component getListCellRendererComponent(JList list,
            Object value, int index, boolean isSelected, boolean cellHasFocus) {
         Component cellRenderer = super.getListCellRendererComponent(list, value, index, isSelected,
               cellHasFocus);
         if (isSelected || cellHasFocus) {
            cellRenderer.setForeground(cellColor );
         } else {
            cellRenderer.setForeground(null);
         }
         return cellRenderer;
      }

   }

   private static void createAndShowGui() {
      BlinkingLabelInList mainPanel = new BlinkingLabelInList();

      JFrame frame = new JFrame("BlinkingLabelInList");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# javascript - 检测圆圈附近的其他物体

> ID：10669344
> 
> 赞同：1
> 
> 时间：2012-05-19T22:38:36.890
> 
> 标签：javascript, math, canvas

我的项目有很大的问题。我目前正在尝试制作一些在我看来像塔防游戏的东西。使用 HTML 画布元素。

我目前的问题是，我似乎无法找到一个方程来检测蠕变是否在圆形塔附近。

假设小兵在 10 上有 ax，在 10 上有 ay。然后塔在 30 上有 ax，在 30 上有 ay。现在，如果我想以直径为 20 的圆圈检测塔附近的所有小兵。

这个等式在 JavaScript 中会是什么样子？

-

万分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:46:23.117

方程如下（两个向量/点之间的距离）：

```
sqrt((x1-x2)^2 + (y1-y2)^2) 
```

这是二维向量。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:22:43.090

Sheesh，你们中的一些评论者需要让提问者更加放松。对于很多人来说，这甚至可以分解为一个关于直角三角形的问题并不一定很明显。

* * *

Marjin 的回答是正确的，但实际上你可以更进一步，效率更高，这将有助于最终提高游戏的整体性能。

`Math.sqrt(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2));`

会给你 x1,y1 和 x2,y2 之间的距离，但你实际上不需要做平方根部分。

你看，你并不*真正*关心距离是多少，你只关心它是否大于或小于另一个距离。因此，您将始终比较两个距离，在这种情况下，您将与上述公式的距离与 200 进行比较。由于您正在比较距离，您可以改为平方 200：

`Math.pow(200, 2)`

得到距离的平方。然后你可以使用上面没有平方根的公式：

`Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2);`

并将公式与 40000 而不是 200 进行比较。这样做的好处是您只需调用`Math.pow`200 一次，作为回报，您永远不必调用`Math.sqrt`！由于您将在一秒钟内多次检查大量小兵，因此这些调用加起来，如果您比较平方距离而不是距离，它应该会让您的游戏更高效。

下面是一些示例代码，说明如何使用它们与您的目的几乎相同。它使用`console.log`，如果您不知道如何查看，您应该查看[本教程](http://code.google.com/chrome/extensions/tut_debugging.html)前两部分中的视觉效果。

这是代码：

[http://jsfiddle.net/4aPjB/](http://jsfiddle.net/4aPjB/)

# ruby - 从 irb 或 pry 运行单元测试

> ID：10669346
> 
> 赞同：5
> 
> 时间：2012-05-19T22:39:07.630
> 
> 标签：ruby, testing, irb, pry

有没有办法从 irb 或 pry 会话中运行测试文件？

我试过`load './testfile.rb`了，但这并没有运行测试文件中的测试。

我的测试文件如下所示：

```
require 'test/unit'
require './sudoku.rb'

class SudokuTest < Test::Unit::TestCase
  def test_initialize
    assert_nothing_raised do
      Sudoku.new(Array.new(9*9))
    end
    assert_nothing_raised do
      Sudoku.new(Array.new(9*9,Field.new(nil)))
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T03:29:59.263

测试并不是真的要像那样以交互方式运行，但是如果您查看 ruby​​ 标准库并查看文件`test/unit.rb`，您会发现它在以下情况下设置了一个`at_exit`处理程序`require 'test/unit'`：

```
at_exit do
  unless $! || Test::Unit.run?
    Kernel.exit Test::Unit::AutoRunner.run
  end
end 
```

因此，查看这一点，您在`irb`会话中需要做的就是调用：

```
Test::Unit::AutoRunner.run 
```

这将运行您已加载的所有测试，这些测试是从`Test::Unit::TestCase`.

如果您只想运行测试文件而不将其加载到`irb`会话中，您可以简单地执行以下操作：

```
system 'ruby testfile.rb' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:42:08.980

它不会运行测试，因为您没有要求它。您只是在*创建*课程。

试试这个：

```
tests = SudokuTest.new
tests.test_initialize 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:36:40.400

也许[普利茅斯](https://github.com/banister/plymouth)就是你想要的。它可以在测试失败的情况下自动启动 Pry 会话。

# javascript - 如何对通过 ajax 添加到页面的元素执行 jQuery 方法？

> ID：10669348
> 
> 赞同：1
> 
> 时间：2012-05-19T22:39:19.643
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript, twitter-bootstrap

我通过 jQuery 通过 AJAX 请求将表单插入到 DOM 中。我正在使用 Twitter Bootstrap 框架提供的 typeahead jQuery 函数进行实时搜索，并且我想在`input`元素进入 DOM 时将其附加到输入字段。为此，我需要`typeahead`在输入字段上调用该方法，但我不知道如何实现这一点（初始页面加载除外）。

我如何监听要添加到 DOM 的输入字段并在那时对它们调用 jQuery 方法？

**更新**

我的问题不够具体。我想知道如何在每个元素加载到 DOM 时只调用一次 jQuery 方法。因为它`<input />`是我正在关注的标签，所以我决定每次在项目上有焦点事件时调用该方法。

```
$("#your_div").on "focus", "input[name='your_name_here']", (event) ->
  $(this).typeahead
    source: ... 
```

这有效，但是当它真的只需要在元素的负载上被调用时，在每个焦点上都会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:08:32.757

使用`$.live()`jQuery 中的函数。我也有这个问题，但是有点混乱。这是它可能如何工作的示例
**EDIT** `$.live()`已过时，我已经编辑了我的答案，这要感谢下面的评论之一以使用更新的`$.on()`功能。

```
$("div").on("form.html",function(data){
    //Blah Blah
    });
});
$(function(){
    ("divthatloaded").on("listener",function(){ //By listener I mean click, hover, mouseon, etc...
    //Does stuff to it...
    });
}); 
```

真的，只需使用`$.on`适当的侦听器/回调来使用由 ajax 加载的 div

# sass - 在 Sass 中测试 value 是否为整数

> ID：10669351
> 
> 赞同：10
> 
> 时间：2012-05-19T22:39:28.563
> 
> 标签：sass

如何在 Sass 中测试一个值是否为整数？

我看到一些文档说明有一个`int?`功能，但我认为我没有正确使用它。那，或者我误解了文档。

我目前正在这样做，但出现错误：

```
int?(16) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T18:40:47.907

Chris Eppstein 帮我解决了这个问题。事后看来很容易：

```
round($n) == $n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-22T13:09:58.550

只是为了让你知道，我将 Chris 的方法放在 Sass 函数中。你可以[在 Github](https://github.com/pentzzsolt/sass-is-int)和[npm](https://www.npmjs.com/package/sass-is-int)上找到它。

它本质上做同样的事情，但包装在一个可重用的函数中。

你可以像这样使用它：

```
.selector {
    @if is-int(16) {
        color: red;
    }
} 
```

在这种情况下输出：

```
.selector {
    color: red;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-19T23:18:13.510

*   （布尔）无单位（数字）

检查数字的单位，返回一个布尔值，指示它是否是无单位的。

例子：

```
 unitless(100) => true

  unitless(100px) => false 
```

参数： (Literal) number - 要检查的数字

返回： (Bool) — 数字是否无单位

引发： (ArgumentError) — 如果数字不是数字

# c# - DateTimePicker BindingSource 如果未手动更改，则为 NULL

> ID：10669353
> 
> 赞同：0
> 
> 时间：2012-05-19T22:39:32.543
> 
> 标签：c#, winforms, datetimepicker, bindingsource, click

我对 DateTimePicker 和 bindingsource 有疑问。

当我添加新记录而不从 DateTimePicker 更改日期时，绑定源将日期设置为空，因此我的数据库中出现问题

数据绑定代码是：

```
this.dateDateTimePicker.DataBindings.Add(
    new System.Windows.Forms.Binding("Value", 
         this.storeBindingSource, 
         "date", 
         true)); 
```

如果从 DateTimePicker 中选择一个日期一切正常！

有什么问题，我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:55:52.983

`<datetimepicker>.Value = DateTime.Now;`在表单加载时添加并`<datetimepicker>.Value`在插入前通过 messabebox 检查。

# javascript - 在three.js中切换画布/渲染目标

> ID：10669354
> 
> 赞同：2
> 
> 时间：2012-05-19T22:40:03.193
> 
> 标签：javascript, webgl, three.js

我的页面上有两个画布元素，我开始渲染到我的：

```
new THREE.WebGLRenderer({canvas:myFirstCanvas}); 
```

并且按照我的预期正确渲染了 3D 场景

但是，如果我尝试使用以下任一方法更改渲染器指向的画布元素：

```
renderer.domElement = mySecondCanvas; 
```

或者

```
renderer.setRenderTarget({canvas:mySecondCanvas}); 
```

我查看了 github 上的文档，但 setRenderTarget() 不幸的是说 TODO。是否可以切换渲染器正在使用的画布元素？如果是这样，我该怎么做？目前我的尝试只是模糊原始画布元素中的图像，大概是因为我还调整了渲染器的大小：

```
renderer.setSize(mySecondCanvas.width,mySecondCanvas.height); 
```

当我试图切换到另一个画布时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:03:07.213

不幸的是，这是由于 WebGL 的工作，与 Three.js 的细节无关，但是每个 WebGL 上下文（在 Three.js 中由 WebGL 渲染器表示）都绑定到一个画布元素，您无法更改哪个元素WebGL-context 应该渲染到。

所以：制作两个 THREE.WebGLRenderer，每个画布元素一个。

# mysql - 在 localhost 上运行 rails 应用程序

> ID：10669356
> 
> 赞同：0
> 
> 时间：2012-05-19T22:41:02.513
> 
> 标签：mysql, ruby-on-rails, localhost

嘿伙计们这里的菜鸟问题。我在启动时遇到问题`rails s`。我认为这是一个 mysql 问题，但是当我在那里检查 gemfile 文件时`gem 'mysql'`。

我在下面粘贴控制台日志：

```
$ rails s
=> Booting WEBrick
=> Rails 3.2.2 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
/Users/username/Sites/projectname/config/initializers/omniauth.rb:2: warning: already initialized constant VERIFY_PEER
[2012-05-19 18:33:15] INFO  WEBrick 1.3.1
[2012-05-19 18:33:15] INFO  ruby 1.9.3 (2012-04-20) [x86_64-darwin11.3.0]
[2012-05-19 18:33:15] INFO  WEBrick::HTTPServer#start: pid=74815 port=3000

Started GET "/" for 127.0.0.1 at 2012-05-19 18:33:30 -0400

NoMethodError (undefined method `init' for Mysql:Class):
activerecord (3.2.2) lib/active_record/connection_adapters/mysql_adapter.rb:32:in `mysql_connection'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `new_connection'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_connection'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:235:in `block (2 levels) in checkout'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `loop'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `block in checkout'
/Users/gorteks/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connection'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
activerecord (3.2.2) lib/active_record/query_cache.rb:67:in `rescue in call'
activerecord (3.2.2) lib/active_record/query_cache.rb:61:in `call'
activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2560155742155290980__call__1944809023615832682__callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
railties (3.2.2) lib/rails/engine.rb:479:in `call'
railties (3.2.2) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/gorteks/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/gorteks/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/gorteks/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

Rendered /Users/gorteks/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.6ms)
Rendered /Users/gorteks/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
Rendered /Users/gorteks/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.7ms) 
```

当访问 localhost 我看到这个：

```
NoMethodError

undefined method `init' for Mysql:Class

Rails.root: /Users/username/Sites/projectname
Application Trace | Framework Trace | Full Trace

Request

Parameters:

None

Show session dump

Show env dump
Response

Headers:

None 
```

感谢您的帮助！我被困住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:43:07.233

您应该将[`mysql2`](https://github.com/brianmario/mysql2)gem 用于您正在使用的 Rails 版本，而不是`mysql`gem。只需进行该切换即可解决您的问题。

# iphone - 从 iPhone 中的联系人列表发送邀请

> ID：10669357
> 
> 赞同：0
> 
> 时间：2012-05-19T22:41:05.243
> 
> 标签：iphone, abpersonviewcontroller

在应用程序中，我必须通过 iPhone 中的联系方式发送邀请。我知道可以通过 ABPeoplePickerNavigationController 获取联系方式。通过按钮操作，我可以获得联系方式。现在，在选择任何联系人姓名时，我应该能够向该联系人用户发送邮件。

现在，请分享一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:49:14.640

检查联系人是否有电子邮件，如果有，

```
NSString *subject = [NSString stringWithFormat:@"Subject"];
NSString *mail = [NSString stringWithFormat:@"contact@mail.com"];

NSURL *url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"mailto:?to=%@&subject=%@", 
                                           [mail stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding], 
                                           [subject stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]];

[[UIApplication sharedApplication] openURL:url]; 
```

**仅供参考：**如果用户没有为特定联系人设置电子邮件，那么您将无法发送电子邮件:)

# php - PHP curl 与 Microsoft Dynamics CRM 2011 对话

> ID：10669377
> 
> 赞同：3
> 
> 时间：2012-05-19T22:43:54.193
> 
> 标签：php, rest, curl, dynamics-crm, odata

我正在尝试从位于远程主机上的 Microsoft Dynamics CRM 2011 Online 中提取一些数据；如果我手动（从浏览器）登录并从在 Linux 主机上运行 PHP 的服务器执行我的，它可以工作，但我当然想在没有我的调解的情况下进行身份验证和运行 CRUD 操作:)。

但它一直向我显示“对象已移至此处”。认证页面。如果我设置 CURLOPT_FOLLOWLOCATION => 1，它会显示 crm 的登录页面。

如果有人可以提出解决问题的任何线索...谢谢！

```
<?php

$useragent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1";
$urlValue  = "/LeadSet?$select=Address1_City,FirstName,LastName";

$username  = "domain\user";
$pass      = "pass";

$handle = curl_init();    
curl_setopt_array($handle, 
        array (
            CURLOPT_USERAGENT => $useragent,
            CURLOPT_USERPWD   => $username . ':' . $pass,
            CURLOPT_HTTPAUTH  => CURLAUTH_ANY,
            CURLOPT_SSL_VERIFYPEER => false,
            CURLOPT_SSL_VERIFYHOST => false,
            CURLOPT_URL  => 'https://myhost.com/xrmservices/2011/OrganizationData.svc',
            CURLOPT_POST => 1,
            CURLOPT_POSTFIELDS     => $urlValue,
            CURLOPT_RETURNTRANSFER => true,
        )
);

$response = curl_exec($handle);
curl_close($handle);

header('Content-Type: text/plain;');
print_r($response); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T16:36:47.213

我解决了通过 ntml 进行身份验证的问题，此代码显示了如何以 JSON 格式从 CRM 检索联系人。

```
$url='http://<server_adress>/organizationName/XRMServices/2011/OrganizationData.svc/ContactSet';
$ch = curl_init();
 $headers = array(
      'Method: GET',
      'Connection: keep-alive',
      'User-Agent: PHP-SOAP-CURL',
      'Content-Type: application/json; charset=utf-8',
      'Accept: application/json',
      'Host <server network adress>');

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_NTLM);
curl_setopt($ch, CURLOPT_USERPWD, '<user>:<password>');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$response = curl_exec($ch);
curl_close($ch);
//echo $response; 
$array=json_decode($response, true);
$size=count($array['d']['results']);
echo "Numero de registos:".$size."<p>";
echo "Contactos:<p>";
for($i=0;$i<$size;$i++){
 echo "Nome: ". $array['d']['results'][$i]['FullName']."<p>";
 echo "Cidade: ". $array['d']['results'][$i]['Address1_City']."<p>";
 echo "Emprego: ". $array['d']['results'][$i]['JobTitle']."<p>";
 echo "Morada: ". $array['d']['results'][$i]['Address1_Name']."<p>";
 echo "Telefone: ". $array['d']['results'][$i]['Address1_Telephone1']."<p>";
 echo "Email: ". $array['d']['results'][$i]['EMailAddress1']."<p>";
 echo "Pais: ". $array['d']['results'][$i]['Address1_Country']."<p>";
 echo "Codigo-postal: ". $array['d']['results'][$i]['Address1_PostalCode']."<p>";
 echo "Criado por: ". $array['d']['results'][$i]['CreatedBy']['Name']."<p>";
 echo "...................................................................................<p>";       
} 
```

如果有人知道如何在休息端点进行 crud 操作，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:08:31.673

添加以下 CURL 选项有帮助吗？

```
CURLOPT_HTTPAUTH => CURLAUTH_NTLM 
```

它对我有用。显然，我连接的服务器不支持基本 HTTP 身份验证，但强制执行 NTLM。可能对您的情况有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T14:42:48.357

恐怕我已经回答了我自己的问题，我试图实现的目标是不可能的，因为： **身份验证只能在应用程序内进行**。

如此处所述：

[http://msdn.microsoft.com/en-us/library/gg334279](http://msdn.microsoft.com/en-us/library/gg334279)

我正在尝试从远程站点进行身份验证。

# php - 从 process.php 选择、提交和发送结果后，在 HTML 中显示复选框值

> ID：10669378
> 
> 赞同：1
> 
> 时间：2012-05-19T22:45:03.033
> 
> 标签：php, mysql, html, checkbox, selection

我有一个清单，分为天数、舞台、时间秀和乐队名称。我正在使用此脚本显示数据库中的选项，并尝试在“流程”页面上向用户显示结果（并最终通过电子邮件发送）。如何将 $result_x 转移到下一页？这是星期六第 1 阶段的“块”之一的示例，选择的值是该行的“ID”。

更新-第一部分已解决。现在希望将结果发送到用户输入的电子邮件地址。

表单解决方案 - 'Selection.php'

```
 $sql_Sat1 = "SELECT * FROM bandSched WHERE day='saturday' AND stage='stage 1'"; 
    mysql_query($sql_Sat1); 
    $result_Sat1 = mysql_query($sql_Sat1);

            while($row = mysql_fetch_array($result_Sat1))
            {
                echo "<ul><li>";
    echo'<input type="checkbox" name="id[]" value="'.$row['id'].' " id="bandSched_' . $row['id'] . '" />';
    echo '<label for="bandSched_' . $row['id'] . '">' . $row['timeShow']." ".$row['bandName'] . '</label>'; 
    echo "</li></ul>";

            } 
```

解决方案 - 'process.php'

```
 if ( ! empty($_POST['id']))
    { foreach($_POST['id'] as $key => $id) { $_POST['id'][$key] = mysql_real_escape_string($_POST['id'][$key]); } 
    $in = implode(', ', $_POST['id']); 
    $sql_Sat2 = "SELECT * FROM bandSched WHERE id IN ($in) ORDER BY FIELD(id, $in)"; 
    $result = mysql_query($sql_Sat2) or die('MySQL Error ' . mysql_errno() . ': ' . mysql_error()); 
    }
     if ( ! isset($result))
    {
    echo 'You did not select anything';
    }
    else
    {
    while ($row=mysql_fetch_assoc($result))
    {

    echo "<tr>";
    echo "<td>". $row['timeShow'] ."</td><td>" . $row['bandName'] . "</td>";
    echo "</tr>";
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:41:26.430

除非您在 <input type="checkbox" /> 中有属性 checked="checked" ，否则该值不会与表单数据一起发送。

试试这个：

```
 echo '<input type="checkbox" value="' . $row['id'] .'"name="selected" checked="checked" />'; 
```

这能解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:53:43.220

可以使用会话、Cookie 或发布包含数据的隐藏表单元素来完成从页面到页面的数据传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:28:00.003

会话为您提供数据，但您仍需要进行有效查询。会话所做的唯一事情就是在服务器上存储数据。它们不保留任何程序执行、变量等。

您的错误消息告诉您 mysql_fetch_array 没有提供 MYSQL 结果资源（并且不是您提供了 id 值的整数）。该查询将不会在整个会话中被记住。

此外，不推荐使用 mysql_*，请使用 PDO 或 mysqli。

# azure - 使用 SQL Azure 管理每个用户的数据

> ID：10669379
> 
> 赞同：0
> 
> 时间：2012-05-19T22:45:08.790
> 
> 标签：azure, azure-sql-database

我正在开发一个应用程序，它以每个用户为基础将用户生成的数据集合存储在云中。我在决定处理最终用户孤岛的基础方法时遇到了麻烦。

以仅由一组用户指定的凭据访问的方式存储每个最终用户的数据集合的最佳方法是什么。

由于集合可以通过电话客户端修改其实体，因此我希望在每次更新时通过网络来回发送保持集合。

我正在使用 .net 进行开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:54:26.887

您可以想到 SQL Azure 存储或 blob 容器。你可以让私有容器只允许你和你选择的签名标识符，你的最终用户。

问候，

米克尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:57:41.053

请介绍身份验证。例如，我们可以使用 ASP.NET 成员资格：http: [//msdn.microsoft.com/en-us/library/yh26yfzy.aspx](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)。它帮助我们对用户进行身份验证。我们可以将 ASP.NET 成员数据存储在 SQL Azure 数据库中。我们还可以在 Windows Phone 应用程序中使用 ASP.NET 成员资格。有关详细信息，请参阅[http://www.kotancode.com/2010/08/06/aspnet-authentication-wp7/](http://www.kotancode.com/2010/08/06/aspnet-authentication-wp7/)。

最好的祝福，

明旭。

# php - 在查询中使用 echo

> ID：10669382
> 
> 赞同：3
> 
> 时间：2012-05-19T22:45:24.697
> 
> 标签：php, sql, echo

我需要在登录时包含linkedIn API 返回的对象的**值**。当我将返回的 ID 的值分配给 php 变量时，我可以简单地`echo`返回输出正确 ID 的变量。但是，当我尝试在查询中包含存储 ID 的变量时，查询会逐字读取linkedIn JS 代码，而不仅仅是检索值。

好吧，这可能根本没有意义，所以这里有一个例子：

```
$someVar = "<?js= id ?>";
echo $someVar; // Outputs: MD93l2jdJ

$sql = "select * from myTable where my_col = $someVar"; 
```

在上面的查询中，服务器读取`$someVar`的是`<?js= id ?>`而不是`MD93l2jdJ`

那么，有什么方法可以`echo`在查询中使用，如...

```
$sql = "select * from myTable where my_col = echo $someVar"; 
```

## 编辑

`<?js is LinkedIn Jargin`- 见这里：[https ://developer.linkedin.com/documents/getting-started-javascript-api](https://developer.linkedin.com/documents/getting-started-javascript-api)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:52:30.583

我认为这将比您预期的要复杂得多。我怀疑 Linkedin 查询是在页面的 javascript 中执行的，这意味着它是客户端的。PHP 在服务器端执行，远早于客户端代码运行。这意味着您无法在 PHP 中访问此值，因为它尚未被填充。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T22:59:07.200

问题是这种替换是由 Javascript 在客户端（即浏览器）上执行的。该值`MD93l2jdJ`永远不会存在于您的服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:47:56.497

使用此查询：

```
$sql = "select * from myTable where my_col =" . $someVar; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T22:49:01.770

尝试

```
$sql = "select * from myTable where my_col = '$someVar'"; 
```

但是，您可能需要在将 var 放入之前准备好它，例如

```
$someVar = mysql_real_escape_string($someVar);
$sql = "select * from myTable where my_col = '$someVar'"; 
```

# google-maps - 谷歌标记开始不可点击

> ID：10669385
> 
> 赞同：1
> 
> 时间：2012-05-19T22:45:58.380
> 
> 标签：google-maps, google-api

嘿，我在这里有以下代码：http: [//jsfiddle.net/DDT4p/](http://jsfiddle.net/DDT4p/)

这表明“B”是可点击的，而“A”不是。我没有在代码中找到为什么会这样，因为它们都使用相同的代码，但目标名称（开始，目的地）不同

如果有人能找出原因，请告诉我：o）

**修复它的代码如下：**

```
var imageStart = new     
google.maps.MarkerImage('https://maps.gstatic.com/mapfiles/markers2/icon_greenA.png', 
new google.maps.Size(42,25), new google.maps.Point(0,0), new google.maps.Point(0,25)); 
```

我点错了！感谢 Andrew 和 GHz 指出这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:04:48.667

你的：

```
var imageStart = new 
google.maps.MarkerImage('https://maps.gstatic.com/mapfiles/markers2/icon_greenA.png',
new google.maps.Size(68, 40), **new google.maps.Size(42,25),** new google.maps.Point(0,0), 
new google.maps.Point(0,25));` 
```

删除第二个“大小”参数，它将起作用......

:)

# php - PHP - instanceof v === null

> ID：10669388
> 
> 赞同：2
> 
> 时间：2012-05-19T22:46:15.353
> 
> 标签：php, zend-framework

在 php.ini 中初始化对象之前使用 instanceof 而不是 === null 是否有特定的好处？

我一直在 Zend 框架中看到这样的代码：

```
if (!self::$_httpClient instanceof Zend_Http_Client) {
        /**
         * @see Zend_Http_Client
         */
        #require_once 'Zend/Http/Client.php';
        self::$_httpClient = new Zend_Http_Client();
    }

    return self::$_httpClient; 
```

但是该属性不能在外部设置，因此在设置之前将为空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:51:20.570

如果您绝对希望 self::$_httpClient 成为 Zend_Http_Client 而不是其他任何东西，那么检查会更加明确。

尽管良好的编程可能会阻止它成为其他任何东西，但如果变量要成为 String、int 或另一个对象的实例，它将在检查 null 的情况下得到纠正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T22:50:29.960

它是正确的，你可以用你的解决方案和“===”来做，但是你不能检查这个实例是否真的是“Zend_Http_Client”的一个实例，也许你调用另一个类到 $_httpClient 然后它不是 NULL 并且它不工作。

在我看来，最好使用 php 的内部函数来检查这些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T22:48:33.063

这看起来像一个单例实现。如果这是真的，则没有充分的理由进行此检查-检查`null`会很好，也更合乎逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T14:36:15.683

您几乎可以扩展 ZF 中的任何类。因此，您永远无法确定子类不会用不同的实现替换 setHttpClient()。您也不能确定有人不想使用他自己的 HTTP 客户端实现。使用此代码，您可以同时检查两者。如果它为空，它可以工作。此外，当它是一个不扩展 Zend_Http_Client 的类时，它也可以工作。

# ios - 应用内购买？

> ID：10669393
> 
> 赞同：0
> 
> 时间：2012-05-19T22:46:31.833
> 
> 标签：ios, xcode, ipad, in-app-purchase

在我的项目中，我想包含一个商店功能，而不必设置一个服务器，用户可以从其中下载它作为文档。我想使用一种方法，将所有商店购买的功能都包含到我的应用程序中，但除非他们为特定功能付费，否则他们将无法使用它们。所以基本上，我是说我希望用户在支付允许使用按钮后触发 BOOLEAN 到 YES，而不是从 URL 或服务器下载它。我的商店功能是音板中的不同声音。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:08:09.223

将布尔设置保存在[NSUserDefaults](http://mobile.tutsplus.com/tutorials/iphone/nsuserdefaults_iphone-sdk/)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:22:01.443

我强烈推荐使用[MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)。它`isFeaturePurchased`会返回一个 BOOL 告诉你用户是否购买了东西。在处理应用程序购买时，它处理所有坚韧的 StoreKit 功能和几乎所有内容。

# c++ - 在 emacs 中寻求自动完成功能

> ID：10669394
> 
> 赞同：5
> 
> 时间：2012-05-19T22:46:32.130
> 
> 标签：c++, emacs, cedet

我正在寻找一个插件来为 emacs 中的 c++ 开发做自动完成弹出窗口。我尝试过的是 Cedet Semantics 和[Autocompletion mode](http://cx4a.org/software/auto-complete/index.html)，只要我已经有几句话，它们在完成变量和函数名称方面非常简洁。例如，我有一个名为 foo 的类和一个返回整数 1 的函数

```
class foo{
   int getInt(){return 1};
}; 
```

在 main 方法中，只要我开始输入这个

```
int main(){
 foo bar;
 bar.get...
} 
```

插件弹出 bar.getInt() 之类的建议没有问题。但是，我真正想要的是在 Eclipse 中，只要我按下“点”，就可以为我生成可能的选择。这在 Emacs 中可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:12:29.350

这取决于您的自动完成和 CEDET 设置。看起来自动完成设置为仅在输入几个字符后才显示可能的完成。您可以检查`ac-auto-start`变量的值 - 如果这是一个数字，那么在这个字符数之后将调用自动完成。另一个重要的事情是你的`ac-sources`变量中有什么 - 使用 CEDET 你需要使用`ac-source-semantic-raw`或`ac-source-semantic`完成源。要在之后自动完成，`.`或者`->`您可以尝试使用 Semantic 的内置完成功能，例如：

```
(defun my-c-mode-cedet-hook ()
 (local-set-key "." 'semantic-complete-self-insert)
 (local-set-key ">" 'semantic-complete-self-insert))
(add-hook 'c-mode-common-hook 'my-c-mode-cedet-hook) 
```

PS 你看过[我关于 CEDET & C++ 的文章了](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T21:21:54.667

我发现 cedet 真的很不起眼，尤其是在 cmake 项目下。

我建议使用 [https://github.com/Andersbakken/rtags](https://github.com/Andersbakken/rtags) 它会在您键入时强调错误以及使用智能完成。获取所需的 emacs 包后，只需将其添加到您的 init 文件中

```
(require 'rtags)
(require 'popup)
(require 'rtags-ac)
(setq rtags-completions-enabled t)
(rtags-enable-standard-keybindings c-mode-base-map)
(add-hook 'c++-mode-hook
          (lambda ()
            (setq ac-sources '(ac-source-rtags)
))) 
```

# c++ - Poco C++ 1.4.3p1 的 DatagramSocket ReceiveBytes() 永远不会返回。我是否滥用了该功能？

> ID：10669398
> 
> 赞同：1
> 
> 时间：2012-05-19T22:47:30.030
> 
> 标签：c++, visual-studio-2010, udp, poco-libraries

我刚刚开始使用 Poco 库。我在让两台计算机使用 Poco 的 DatagramSocket 对象进行通信时遇到问题。具体来说，receiveBytes 函数似乎没有返回（尽管运行 Wireshark 并看到我发送的 UDP 数据包正在到达目标机器）。我假设我省略了一些简单的东西，这完全是由于我的一个愚蠢的错误。我已经使用 Visual Studio Express 2010 在 Windows 7 上编译了 Poco 1.4.3p1。下面是显示我如何尝试使用 Poco 的代码片段。任何建议将不胜感激。

*发送*

```
#include "Poco\Net\DatagramSocket.h"
#include "Serializer.h" //A library used for serializing data

int main()
{
   Poco::Net::SocketAddress remoteAddr("192.168.1.140", 5678); //The IP address of the remote (receiving) machine
   Poco::Net::DatagramSocket mSock; //We make our socket (its not connected currently)
   mSock.connect(remoteAddr); //Sends/Receives are restricted to the inputted IPAddress and port
   unsigned char float_bytes[4];
   FloatToBin(1234.5678, float_bytes); //Serializing the float and storing it in float_bytes
   mSock.sendBytes((void*)float_bytes, 4); //Bytes AWAY!
   return 0;
} 
```

*接收（我遇到问题的地方）*

```
#include "Poco\Net\DatagramSocket.h"
#include "Poco\Net\SocketAddress.h"
#include "Serializer.h"
#include <iostream>

int main()
{
   Poco::Net::SocketAddress remoteAddr("192.168.1.116", 5678); //The IP address of the remote (sending) machine
   Poco::Net::DatagramSocket mSock; //We make our socket (its not connected currently)
   mSock.connect(remoteAddr); //Sends/Receives are restricted to the inputted IPAddress and port
   //Now lets try to get some datas
   std::cout << "Waiting for float" << std::endl;
   unsigned char float_bytes[4];
   mSock.receiveBytes((void*)float_bytes, 4); //The code is stuck here waiting for a packet. It never returns...
   //Finally, lets convert it to a float and print to the screen
   float net_float;
   BinToFloat(float_bytes, &net_float); //Converting the binary data to a float and storing it in net_float
   std::cout << net_float << std::endl;
   system("PAUSE");
   return 0;
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:11:03.077

POCO 插座以伯克利插座为模型。您应该阅读有关 Berkeley 套接字 API 的基本教程，这将使您更容易理解 POCO OOP 套接字抽象。

您不能在客户端和服务器上都连接（）。您仅在客户端上连接（）。对于 UDP，connect() 是可选的，并且可以跳过（然后您必须使用 sendTo() 而不是 SendBytes()）。

在服务器上，您可以在通配符 IP 地址上绑定（）（意思是：然后将在主机上的所有可用网络接口上接收），或者到特定的 IP 地址（意思是：然后将仅在该 IP 地址上接收）。

查看您的接收器/服务器代码，您似乎想要过滤远程客户端的地址。你不能用 connect() 来做，你必须用 receiveFrom(buffer, length, address) 读取，然后在“地址”上过滤自己。

安全方面，请注意您对收到的 UDP 数据包的源地址所做的假设。欺骗 UDP 数据包是微不足道的。换句话说：不要根据 IP 地址（或任何未通过适当加密保护的东西）做出身份验证或授权决定。

POCO 演示文稿[http://pocoproject.org/slides/200-Network.pdf](http://pocoproject.org/slides/200-Network.pdf)通过代码片段解释了如何使用 POCO 进行网络编程。有关 DatagramSocket，请参见幻灯片 15、16。请注意，在幻灯片 15 上存在拼写错误，请将 msg.data()、msg.size() 替换为 syslogMsg.data()、syslogMsg.size() 以进行编译:-)

还可以查看“poco/net/samples”目录中的简短示例，这些示例还显示了使用 POCO 的最佳实践。

# ruby-on-rails - 当原始文件太大时如何使用imagemagick减小大小

> ID：10669400
> 
> 赞同：1
> 
> 时间：2012-05-19T22:47:39.383
> 
> 标签：ruby-on-rails, imagemagick

我使用 8 作为质量将 2.9M jpg 转换为 20x20。但该文件的大小仍然是 48k。

这是我的命令

```
 convert 238832c58dc3bc0b_29M.jpg -quality 8 -resize '20x20>' +repage 238832c58dc3bc0b_20x20.jpg 
```

转换后，238832c58dc3bc0b_20x20.jpg 为 48k。我尝试了更小的尺寸和质量，仍然是 48k。它不应该那么大。它应该小于10k。有人知道如何增强它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:00:20.643

使用 -thumbnail 代替 -resize 或在命令中添加 -strip。缩略图会从颜色配置文件中删除 EXIF 信息，而条带也会删除颜色配置文件。

# jquery - jQM中如何找到第一个pageinit的活动页面？

> ID：10669408
> 
> 赞同：3
> 
> 时间：2012-05-19T22:48:44.700
> 
> 标签：jquery-mobile, jquery, jquery-mobile

我需要获取[jquery-mobile](/questions/tagged/jquery-mobile "显示标记为“jquery-mobile”的问题")加载的活动页面元素的 ID 。我知道我们可以使用`$.mobile.activePage`来获取当前页面，并且我们可以使用`$.mobile.activePage.attr('id')`. 但是，它是`undefined`在应用程序的第一次加载时。在我的特定应用程序中，我希望用户能够从任何 URL 输入，并且我需要知道当前加载的页面才能正确初始化我的导航系统

```
$(document).bind('pageinit', function() { 
    if($.mobile.activePage !== undefined) {
        console.log($.mobile.activePage.attr('id'));
    }
    else {
        console.log('1st page load detected');
    }
}); 
```

**输出：** `1st page load detected`第一次加载时和每个后续页面上的 ID。我怎样才能在第一次加载时获得 ID？！？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T23:55:30.630

我认为您的问题是，**pageinit**查询活动页面类还为时过早。

如果加载第一页，pageinit 将在调用第一页的 changePage 之前触发（第一页也通过 changePage 调用加载）。只有@about JQM 中的第 3639 行，活动页面类被分配给该页面。

到那时，pageinit 早已不复存在。

如果您想获取第一页的 ID，请使用任何其他可用的[页面事件](http://jquerymobile.com/test/docs/api/events.html)：

```
pagebeforeload = triggered before the load request (inside changepage) is made
pageload = triggered after the page was loaded
pagebeforechange = triggered before a changepage is made
pagechange = triggered after changepage is done
pagebeforeshow = triggered before the page is shown
pageshow = triggered when the page is shown 
```

我会使用 pagebeforeshow，或者如果您想调整很多内容，请尝试 pagechange 或 pagebeforechange。

希望有帮助！

# ruby-on-rails - Rails 3.2：在 application.js.erb 中需要不同的 js 文件

> ID：10669418
> 
> 赞同：4
> 
> 时间：2012-05-19T22:51:42.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline

我如何在 Rails 3.2 中的 application.js.erb 中需要不同的文件？我尝试了以下但没有奏效

```
<% if Rails.env == production %>
  //= require production_config.js
<% else %>
  //= require other_config.js
<% end %>
//= require jquery
//= require jquery_ujs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:11:46.183

您的示例将不起作用，因为`assets:precompile`在 erb 转换为干净的 js 之前。而且您的资产语法错误。是什么`//= require 'production_config.rb'`？可能是`'production_config.js'`。但是你不应该在资产注释中写引号和文件扩展名。

您可以编写文件*config.js.erb*并在其中写入如下内容：

```
<% if Rails.env == production %>
  productionConfig();
<% else %>
  otherConfig();
<% end %> 
```

在你的*application.js*文件中简单地写

```
//= require config
//= require jquery
//= require jquery_ujs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:18:11.920

您可以这样做，但您需要在 application.html.erb 中包含代码（在我建议的 head 操作中）。

如果您将**production_config.js**文件添加到“asset/javascript”文件夹，则可以使用以下方法添加它：

```
<% if Rails.env == production %>
   <%= javascript_include_tag "production_config" %>
<% else %>
  <%= javascript_include_tag "other_config" %>
<% end %> 
```

确保您**不**将其称为 production_config.js.coffee （这些会自动捆绑）并且也不要将其添加到您的 application.js 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T15:14:05.050

Sprocket 需要`//= require`从文件开头设置语句，因此它们不起作用。

在这种情况下，您可以使用 ruby​​ 方法： [sprokets github](https://github.com/sstephenson/sprockets/blob/1566cd10486b677d52d93c74f489ad7a8d2acd79/lib/sprockets/context.rb#L145)

此外，最好在单独的文件中执行此操作。像这样的东西：

应用程序.js

```
//= require 'config'
//= require 'jquery' 
```

配置.js.erb

```
<% require_asset(Rails.env.production? ? 'production_config' : 'other_config') %> 
```

PS 另一个有用的方法是`depend_on`，当你的资产需要在其他文件更改后重新编译时，它会有所帮助。

前任。如果您需要`rails_config`gem的一些值

```
<%
  paths = %w(config/settings.yml config/settings.local.yml config/settings)
  paths.map(&Rails.root.method(:join)).each { |full_path| depend_on(full_path) if File.exist?(full_path) }
%> 
```

# asp.net-mvc - 从表中获取下拉列表值的正确方法是什么？

> ID：10669422
> 
> 赞同：1
> 
> 时间：2012-05-19T22:52:37.900
> 
> 标签：asp.net-mvc, entity-framework

假设我有一个名为... Person 的表，我猜它包含 Name、Email、AgeGroupId 列。

AgeGroupId 是一个 int，它与表 AgeGroup 相关。Agegroup 只有两列：Id 和 AgeGroupName。

现在，在我看来，这是一个编辑“人”的页面，我想要一个下拉框，其中包含每个 AgeGroupName 作为文本，ID 作为值。这样，以后，我可以在我的年龄组表中添加一个新的“年龄组”，我所有的下拉框都会更新。还是有更好的方法我应该这样做？

我目前正在传递我的模型，并这样做：

@Html.DropDownListFor(model => model.AgeGroupId, @agegroups)

在视图的顶部，我正在制作一个带有硬编码值的 SelectList。我不希望他们硬编码，我不认为？我会做什么而不是 @agegroup 从 AgeGroups 表中获取列表？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:04:56.980

正确的方法是使用 ViewModels。基本上，您必须为您的视图创建一个视图模型，而不是将数据库结果直接传递给您的视图。就像是：

```
public class PersonViewModel
{
    public Person Person {get ; set;}
    public Dictionary<int, string> AgeGroups { get; set; }
    public PersonViewModel() {}
    public PersonViewModel(int personId)
    {
        var ctx = new Context();
        this.Person = ctx.Persons.SingleOrDefault(p => p.Id == personId);
        foreach(var ageGroup in ctx.AgeGroups)
        {
            this.AgeGroups.Add(ageGroup.Id, ageGroup.AgeGroupName);
        }
    } 
```

然后您的控制器方法将如下所示：

```
public ActionResult Add(PersonViewModel vm)
{
    var ctx = new Context();
    if(ModelState.IsValid)
    {
        ctx.Persons.Add(vm.Person);
        return View("Index"); 
    }

    return View(vm);
} 
```

在您看来，简单地说：

```
@Html.DropDownListFor(model => model.Person.AgeGroupId,
new SelectList(model.AgeGroups, "Id", "AgeGroupName")) 
```

当然，您的视图模型现在是`PersonViewModel`.
**更新**
似乎 ASP.NET MVC 3 工具更新默认为关系添加下拉菜单。更多信息[在这里](http://blogs.msdn.com/b/joecar/archive/2011/04/15/asp-net-mvc-3-tools-update.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:42:20.810

正确的方法似乎来自 Kamyars 编辑，在此处的 msdn 博客上：http: [//blogs.msdn.com/b/joecar/archive/2011/04/15/asp-net-mvc-3-tools-update。 aspx](http://blogs.msdn.com/b/joecar/archive/2011/04/15/asp-net-mvc-3-tools-update.aspx)

# django - urls无效语法中的Django 1.4导入错误

> ID：10669424
> 
> 赞同：1
> 
> 时间：2012-05-19T22:52:55.483
> 
> 标签：django, apache, django-views, syntax-error, django-urls

我有一个带有 2 个应用程序的 django 1.4 项目：RemoteStorage 和 WeShouldServer（那个是在项目创建时自动创建的，包含 url、设置等）

当我尝试转到我的管理页面时，我收到此错误：

```
SyntaxError at /admin
invalid syntax (views.py, line 33) 
```

堆栈跟踪的最后一行是：

```
from RemoteStorage.views import refer 
```

我认为这是一个一般性的导入错误，因为我从 RemoteStorage.views 导入了 3 个方法，当我更改顺序时，无论第一次导入是什么，我仍然会遇到导入错误。

我的 urls.py：

```
from django.conf.urls import patterns, include, url
from RemoteStorage.views import refer
from RemoteStorage.views import check_referrals
from RemoteStorage.views import save_item

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'WeShouldServer.views.home', name='home'),
    # url(r'^WeShouldServer/', include('WeShouldServer.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^save-item/', save_item),
    url(r'^check-referrals/', check_referrals),
    url(r'^refer', refer),
) 
```

我的 settings.py 包含我的应用程序：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    **'RemoteStorage',**
) 
```

我的意见.py：

```
# Create your views here.
from RemoteStorage.models import Item, Tag, Category, User, Referral
from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse
import json

def save_item(request):
        try:

                print request.GET
#               print request.user
                i = Item()
                i.user = User.objects.get_or_create(email=request.GET['user_email'])[0]
#       i.website = request.GET.get('website', "")
#       i.comment = request.GET.get('comment', "")
#       i.rating = request.GET.get('rating', "")
#       i.phone_numger = request.GET.get('phone number', "")
#               i.address = request.GET.get('address', "")      
                i.save()

                print i
        except Exception as e:
                print e.message()

        return HttpResponse()

def check_referrals(request):
        try:
                print request
                user = User.objects.get_or_create(email = request.GET.get("user_email", "")[0]
#       referrals = Referral.objects.filter(referred_to = user)
#       return HttpResponse(content = json.dumps(referrals))
                return HttpResponse()
        except Exception as e:
                print e.message()

def refer(request):
        print request
        user = User.objects.get_or_create(email = request.GET.get("user_email", "")[0]
        refer_to = request.GET.get("email_list", "")
        refer_to_list = refer_to.split(",")

        for rt in refer_to_list:
                r = Referral()
                r.data = request.GET.get("item_data", "")
                r.referred_by = user
                r.referred_to = rt
                r.save()
        return HttpResponse() 
```

我不知道出了什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:25:21.443

检查第**32**行(33 - 1)

```
user = User.objects.get_or_create(email = request.GET.get("user_email", "")[0] 
```

它缺少一个正确的括号，应该是

```
user = User.objects.get_or_create(email = request.GET.get("user_email", ""))[0] 
```

# javascript - highchart上的垂直线，位置与另一个div的动画帧相关联？

> ID：10669426
> 
> 赞同：2
> 
> 时间：2012-05-19T22:52:59.583
> 
> 标签：javascript, highcharts

我在一个 div 中有一个 100 帧的动画，`area`在另一个 div 中有一个标准的高图，在 x 轴上有 100 个位置。在图表上，我可以使用以下代码显示一条跟踪鼠标悬停的垂直线：

```
 tooltip: {
    shared: true,
    crosshairs: true
  } 
```

我想创建相同类型的线条，但它的位置与动画帧相关联。也就是说，随着动画的进行，图表上的线条将移动到匹配的位置（如果动画在第 33 帧，线条将移动到图表 x 轴上的位置 33）。

我怎样才能做到这一点？

我想简单地更新 plotLine 的值，而不是每次都添加/删除，但我没有看到一个`Axis.updatePlotLine`或等价的。如果有办法做到这一点，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:51:13.430

您可以将第二个系列作为垂直线，然后使用 setTimeout 和 setData 调用来操作该系列以匹配动画的帧速度（或者甚至更好地触发动画中的线条移动到下一帧）。

[在这里](http://jsfiddle.net/larsenmtl/22DKq/1/)看小提琴。

```
$(function () {

    var someData = [];
    var maxY = -9999, minY = 9999;
    for (var i = 0; i < 60; i++)
    {
        var x = i;
        var y = Math.random() * 10;
        if (y < minY) minY = y;
        if (y > maxY) maxY = y;
        someData.push([x,y]);
    }

    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            minPadding: 0.05,
            maxPadding: 0.05
        },
        yAxis: {min: minY, max: maxY},        
        series: [{
            data: someData
        },
        {
            data: [[0,minY],[0,maxY]]
        }]
    });

    moveLine = function(){
       if (chart.series[1].data[0].x == 59){
          x = 0;
        }else{
          x = chart.series[1].data[0].x + 1;
        }
        chart.series[1].setData([[x,minY],[x,maxY]]);
       setTimeout(moveLine,1000);
    }

    setTimeout(moveLine,1000);

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T16:39:19.903

您可以像您发现的那样使用 plotLines，但可以避免添加/删除线的方法并依靠 Highchart 的渲染器为现有线设置动画。看到[这个小提琴](http://jsfiddle.net/21mog96m/)。

相关代码：

```
$(function () {
    window.chart_instance = new Highcharts.Chart({
        yAxis: {
            plotLines: [{
                color: '#777',
                value: 55,
                width: 1
            }]
        },
        chart: {
            type: 'bar',
            renderTo: $('#container')[0]
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4]
        }]
    });

    $("#btn").click(function(){
       var chart = chart_instance;
       var axis = chart.yAxis[0]; // Get a reference to the Axis object that your plotline is associated with
       var line = axis.plotLinesAndBands[0]; // Get a reference to the plotLine
       line.options.value = 190; // Set desired new value
       line.render(); // Render with updated values. Will animate if animation enabled for the chart.
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T19:44:07.757

我能够使用 plotLines ( [http://www.highcharts.com/ref/#xAxis-plotLines](http://www.highcharts.com/ref/#xAxis-plotLines) ) 完成这项工作：

```
function addPlotLine(ts) {
  chart.xAxis[0].addPlotLine({
    value: ts,
    color: 'rgb(255, 0, 0)',
    width: 1,
    id: 'tsline'
  });
}

function removePlotLine() {
  chart.xAxis[0].removePlotLine('tsline');
}

function doAnimation(ts) {
  // animation code here
  removePlotLine();
  addPlotLine(ts);
} 
```

# javascript - Bootstrap Carousel Interval False 不工作

> ID：10669430
> 
> 赞同：1
> 
> 时间：2012-05-19T22:53:29.460
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我已经在一个站点上安装了 Twitter Bootstrap-Carousel，我希望能够使用它来逐步浏览模块的窗格，但是，将间隔设置为 false 不起作用。如果我给它一个间隔，它会按计划逐步完成，但作为错误，我无法使用控件来逐步完成幻灯片。我通过 ID 而不是 $('.carousel') 选择容器，所以我不知道这是否与它有关。是否需要另一个模块来提供间隔错误功能？

我的 html 的一个简短示例是：

```
 <div class="carousel" id="module-rotator">
        <div class="carousel-inner">
            <div class="item active">foo</div>
            <div class="item">bar</div>
        </div>
        <a class="carousel-control left" href="#module-rotator" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#module-rotator" data-slide="next">&rsaquo;</a>
    </div> 
```

我用这个初始化轮播：

```
$('#module-rotator').carousel({ interval: false }); 
```

我正在使用 bootstrap-carousel.js v2.0.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T00:13:22.340

我正在使用与您类似的代码，一切都按预期工作。唯一的区别是；

*   我正在使用完整的 bootstrap.js（v2.0.3）（所以不是单独的 bootstrap js 文件）
*   我在“carousel”类旁边还有一个“slide”类——没有这个，divs 仍然会改变，只是不会滑动。

[在阅读了使用 bootstrap-carousel.js 失败](https://stackoverflow.com/questions/9227416/failed-using-bootstrap-carousel-js)的类似问题的答案后，我怀疑您还需要在 bootstrap-carousel.js 之前包含 bootstrap-transition.js

我建议使用完整的 bootstrap.js 文件来验证它是否有效，然后使用各个 js 文件。

# iphone - 不断检查服务器 iOS？

> ID：10669433
> 
> 赞同：0
> 
> 时间：2012-05-19T22:53:36.870
> 
> 标签：iphone, objective-c, ios

我正在为 iOS 设备开发一款游戏，应用程序将从数据库（消息）中获取数据。我希望应用程序更新为仅在有新消息时通知用户（并且仅当用户在应用程序中或当它正在运行时）。解决这个问题的最佳方法是什么？我正在考虑每 2 分钟检查一次服务器是否有新消息，但是我不知道这样做的效率如何。请让我知道是否有更好的方法或者我正在考虑的方法就可以了

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:10:44.360

轮询服务器是一个非常好的解决方案。您的电子邮件客户端整天都在这样做。推送不是一个合适的解决方案（不能保证消息传递，如果您只需要在应用程序运行时发送消息，这不是推送通知的目的）。请参阅我对这个类似问题的回答：[Web 服务向 iPhone 发送信息](https://stackoverflow.com/questions/10200082/web-service-sending-information-to-iphone/10202068#10202068)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:55:05.790

您可以使用 Urban Airship 等平台的推送技术。

# php - 如果返回值则包括 如果没有返回值则否

> ID：10669435
> 
> 赞同：-1
> 
> 时间：2012-05-19T22:54:07.977
> 
> 标签：php, wordpress, if-statement, null

```
 <?php echo c2c_get_custom('contactname', '<strong>Contact: ', '</strong>'); ?></br>
    <?php echo c2c_get_custom('address', '', '</br>'); ?></br>
    <?php echo c2c_get_custom('mailingaddress', '', ''); ?></br>
    <?php echo c2c_get_custom('Town', '', ', MB'); ?></br>
    <?php echo c2c_get_custom('phone_1', 'Phone:', ''); ?></br>
    <?php echo c2c_get_custom('phone_2', 'Phone:', ''); ?></br>
    <?php echo c2c_get_custom('phone_tollfree', 'Toll Free:', ''); ?></br>
    <?php echo c2c_get_custom('email', 'Email:', ''); ?></br>
    <?php echo c2c_get_custom('website', 'Website:', ''); ?></br> 
```

我如何拥有它，以便如果 Phone_2 没有 Value`</br>`之后不存在的值。. . 或者基本上如果值为 null 则没有`</br>`

我猜这将是一个 if 语句，我对这一切都是全新的。. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:01:03.900

```
<?php
$phone2 = c2c_get_custom('phone_2', 'Phone:', '');
if (!empty ($phone2)) {
    echo $phone2 . '<br />';
}
?> 
```

注意：我也更改`</br>`为，`<br />`因为您不能那样使用 br 。（嗯，你不应该）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:05:52.380

函数的定义是这样的：

```
function c2c_get_custom( 
    $field, 
    $before='', 
    $after='', 
    $none='', 
    $between='', 
    $before_last=''
) 
```

从这里获得：[http ://wordpress.org/extend/plugins/get-custom-field-values/other_notes/](http://wordpress.org/extend/plugins/get-custom-field-values/other_notes/)

因此，每一行都应该类似于：

```
c2c_get_custom('phone_2', 'Phone:', '<br />', ''); 
```

如果上述方法不起作用，那么以下就足够了：

```
<?php 
   $phone2 = c2c_get_custom('phone_2', 'Phone:', ''); 
   echo (is_null($phone2) || $phone2 == '' ? '' : $phone2.'<br />')
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:59:26.570

```
$phone2 = c2c_get_custom('phone_2', 'Phone:', '');

/*You can use an if statement like: */
if(is_null($phone2) || !isset($phone2))
{
    print "no" . "<>";
}
else
{
    print $phone2;
}

/* or you can also do: */

print (is_null($phone2) || !isset($phone2)) ? "no" : $phone2;

/*You can add in your </br> anywhere needed here. 
Also if your trying to put a line break there, its <br /> and not </br>*/ 
```

# java - 我不断使用公共数组获取 NullPointerException

> ID：10669443
> 
> 赞同：1
> 
> 时间：2012-05-19T22:55:00.270
> 
> 标签：java, arrays, nullpointerexception

我有两个班级：`Main`和`Sub1`。

`anArray`声明`Sub1`如下：

```
 public static int[] anArray;
  public Sub1 () {
      anArray = new int[15]; 
```

然后在 中`Sub1`，我尝试设置它：

```
 public static void methodOne() {
      anArray[0] = 5; 
```

但是当我尝试运行代码时，我得到一个`NullPointerException`，并且消息指定：

```
Sub1.methodOne (Sub1.java:249) 
```

其中指的是这段代码：

```
 anArray[0] = 5; 
```

为什么它不让我改变数组？如果我将其注释掉，错误仍然会发生，并且只是移动到我试图更改数组索引值的另一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:58:43.417

`anArray`是一个`static`字段，尝试在该类的构造函数中对其进行初始化是没有意义的。如果你想要它`static`，只需在声明时初始化它：

```
public static int[] anArray = new int[15]; 
```

如果您打算成为实例成员`anArray`并`methodOne`成为实例成员，则删除它们的`static`修饰符。

无论哪种方式，我都建议您创建变量`anArray` `private`，以便只有公开公开的方法才能修改其内容，`final`这样您就不会意外地重新分配它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T23:02:45.513

尝试如下初始化数组，

```
public static int[] anArray = new int[15]; 
```

`static`变量并不特定于类的实例，因此在默认构造函数中初始化变量可能没有意义（尽管我必须查看更多代码才能确定是否是这种情况）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T22:58:44.393

您需要显示更多代码，但您的方法和数组是静态的，并且您在构造函数中初始化数组。我的猜测是你没有在任何地方调用构造函数。

# objective-c - 玩弄 ARC：强制释放刺激？

> ID：10669448
> 
> 赞同：3
> 
> 时间：2012-05-19T22:55:27.323
> 
> 标签：objective-c, automatic-ref-counting, weak-references

在开始实际工作之前，我目前正在使用 ARC 来弄清楚一些事情。我确实设置了这段代码：

```
NSNumber* n = [[NSNumber alloc] initWithInt:3];
__weak NSNumber* weakN = n;
n = nil;
NSLog(@">>>: %@ %@", n, weakN); 
```

我预计 n 和 weakN 为零，因为 n = nil; 应该触发我眼中的释放吗？不幸的是，它没有。输出是 >>>: (null) 3"。我在这里想念什么？

另一件事是，我很确定，下面的代码让我从 arc 开始时遇到了困难：

```
__weak NSNumber* weakN2 = [[NSNumber alloc] initWithInt:3];
NSLog(@">>>: %@", weakN2); 
```

我很确定，我在使用类似代码时遇到了一些问题，因为 arc 会在初始化后立即释放对象，因为没有对该对象的强引用。不幸的是，上面的输出是 >>>: 3"。

对这些东西进行一些澄清会很棒。我显然在这里遗漏了一些东西！

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:22:10.400

除了 kevboh 所说的之外，创建对简单不可变 Foundation 对象（如 NSNumber）的弱引用也是毫无意义的。出于性能原因，Foundation 很可能会向您出售一个缓存对象，而不是创建一个全新的对象。如果现在没有，那么它可能会在未来的某个版本中。

结果是，`[[NSNumber alloc] initWithInt:3]`无论您怎么想，您都可能不是返回的对象的唯一所有者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T02:40:17.337

好吧，你刚刚选择了一个坏对象来测试它。如果您使用 NSString（或大多数其他对象）执行此操作，您会得到预期的结果：

```
NSString* n = [[NSString alloc] initWithFormat:@"3"];
__weak NSString* weakN = n;
n = nil;
NSLog(@">>>: %@ %@", n, weakN);
// Output is (null) (null)

__weak NSString* weakN2 = [[NSString alloc] initWithFormat:@"3"];
NSLog(@">>>: %@", weakN2);
// Output is (null) 
```

The behavior of NSNumber is caused because the class is caching the number that was created so is actually still valid. The same behavior will be exhibited if you use string constants that are compiled in as part of the code. (Like `NSString* n = @"3";`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T23:47:24.567

> 我预计 n 和 weakN 为零，因为 n = nil; 应该触发我眼中的释放吗？不幸的是，它没有。输出是 >>>: (null) 3"。我在这里想念什么？

ARC 不是那样工作的。对象的所有权是不确定的；ARC 可能会一直坚持到您的功能结束。当您打算发生所有权时，您不应该期望会发生 deallocs，而是使用强/弱引用。

# git - 多平台 Git 服务器

> ID：10669450
> 
> 赞同：0
> 
> 时间：2012-05-19T22:55:32.050
> 
> 标签：git

我正在为更多平台寻找一些 git 服务器，例如 Windows、Linux 和 Solaris。我只知道 msysgit 是为了赢。这三个平台有什么等价物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:59:19.537

是的**“GIT”**它独立并用 C/C++ 编写。所有平台都有 git 客户端。但是你在“GIT -Server”下理解它有点困难。当您将它们添加为远程服务器时，每个拥有存储库的客户端都可以成为服务器。

在 Ubuntu 和 Debian 上：

```
apt-get install git-core 
```

在 Mac 上是这样的：

```
sudo port install git-core 
```

如果没有客户端，您可以编译源代码。

但这是一个非常普遍的问题。谷歌一开始。

编辑：您没有直接的服务器。例如，您将存储库放在服务器上并从外部访问它们。例如，您可以制作裸存储库，这会创建一个文件夹，例如“test.git”，然后您可以通过 ssh 或其他访问方法调用该文件。

但是也许您应该考虑像“gitolite”这样的 gitkeeper 来授予用户访问权限并控制流程并提供存储库。

但是@rcdmk 如何说它为 linux 和 unix 系统构建的主要版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T16:12:45.353

你可以试试 Git Candy，一个基于 ASP.NET MVC 的 Git 平台。

来源：http: [//github.com/Aimeast/GitCandy](http://github.com/Aimeast/GitCandy)

演示： http: [//gitcandy.com/](http://gitcandy.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T11:53:05.380

有一个与 GitHub 相当的多合一开源解决方案，它是用 Java 编写的，称为 GitBlit。

[http://gitblit.com/](http://gitblit.com/)

# ruby-on-rails - 根据 lynda.com 的截屏视频，rails 应该使用 form_for (view) 方法生成一个按钮，但事实并非如此

> ID：10669451
> 
> 赞同：0
> 
> 时间：2012-05-19T22:55:33.453
> 
> 标签：ruby-on-rails, forms, model-view-controller, crud, erb

编辑：第一个问题是我的前提本身。rails/html 是否应该在没有我明确要求的情况下生成“创建主题”按钮？

所以这是使用视图的控制器

```
class SubjectsController < ApplicationController

  def index
     list
    render('list')
  end

  def list
    @subjects = Subject.order("subjects.position ASC")
  end

  def show
    @subject = Subject.find(params[:id])
  end

  def new
    @subject = Subject.new(:name => 'default')
  end
  def create
    #instantiate a new object using form params
    @subject = Subject.new(params[:subject])
    #save the subject
    if @subject.save
      #if save succeeds redirect to list action
    else
      #if save fails, redisplay form
      render('new')
    end
  end
end 
```

这是行为不端的视图（html.erb）文件，它没有生成我的按钮

```
<%= link_to("<< Back to List", {:action => 'list'}, :class => 'back-link') %>

<div class="subject new">
  <h2>Create Subject</h2>

  <%=  form_for(:subject, :url => {:action => 'create'}) do |f| %>

  <table summary="Subject form fields">
    <tr>
      <th>Name</th>
      <td><%= f.text_field(:name) %></td>
    </tr>
    <tr>
      <th>Position</th>
      <td><%= f.text_field(:position) %></td>
    </tr>
    <tr>
      <th>Visible</th>
      <td><%= f.text_field(:visible) %></td>
    </tr>
  </table>
<% end %>
</div> 
```

目前，浏览器上的输出为：

```
'<< Back to List' (link)

<h2>Create Subject</h2>

Name     [blank-form]
Position [blank-form]
Visible  [blank-form]
[missing button location] 
```

应该（根据 lynda.com）在缺少的按钮位置有一个显示“创建主题”的按钮，但它不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:02:45.967

您的代码中的任何内容都不应该生成按钮。

您需要添加：

```
<%= f.submit 'Create Subject' %> 
```

表格内。也许在`</table>`和之间`<% end %>`

# winapi - 检查 .exe 以了解它是用什么版本的 Visual C++ 构建的

> ID：10669459
> 
> 赞同：2
> 
> 时间：2012-05-19T22:58:17.867
> 
> 标签：winapi, visual-c++

有没有办法检查用于构建给定 .exe 的 Visual C++ 版本？

我知道如果 .exe 使用带有 CRT 的动态链接很容易：我可以使用 Dependency Walker 并读取 MSVCRxx.DLL 版本，例如对 MSVCR90.DLL 的依赖意味着 .exe 是用 Visual C++ 2008 即 VC9 构建的; 但是使用 CRT 进行静态链接的情况呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:58:09.273

是否可以检查 Depends.exe 中的链接器版本，与 VisualC++ 版本几乎相同。

在 Dependency Walker 的下部视图中，选择列**Linker Ver**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:40:40.010

我在 MSDN 上发现了 Matt Pietrek 的这篇有趣的文章：

[Windows 内部：深入了解 Win32 可移植可执行文件格式](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)

感兴趣的领域是`IMAGE_OPTIONAL_HEADER32/64::MajorLinkerVersion`和`MinorLinkerVersion`。它们几乎与 Visual C++ 版本相同（例如 VC10 的“10”和“0”）。

（我认为这些是 Dependency Walker在其用户界面中用于*Linker Ver列的字段。）*

# opengl - 在 OpenGL 中设置相机和截锥体

> ID：10669460
> 
> 赞同：3
> 
> 时间：2012-05-19T22:58:28.243
> 
> 标签：opengl

为什么不渲染四边形？我尝试过 glOrtho 和 glFrustrum，输出是一样的：黑屏。据我了解，这段代码表示相机设置在位置 (0,0,-3) 并且它正在查看原点。近平面在 -2 处（距离相机 1 m）。我究竟做错了什么？

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode (GL_PROJECTION);
glLoadIdentity ();
//glOrtho (-5,5,-5,5,-5,5);
glFrustum(-5,5,-5,5,1,1000);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(0,0,-3,0,0,0,0,1,0);

glColor3f(1.0,1.0,1.0);
glBegin(GL_QUADS);                                  
glVertex3f(-0.5,-0.5,-0.5);
glVertex3f(0.5,-0.5,-0.5);
glVertex3f(0.5,0.5,-0.5);
glVertex3f(-0.5,0.5,-0.5);
glEnd();
// Don't wait start processing buffered OpenGL routines
glFlush();
glutSwapBuffers(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:20:30.607

它对我来说很好，你的代码的另一部分一定有问题。

这是我使用的完整代码：

```
#include <GL/glut.h>

void display(void) {

  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

  glMatrixMode (GL_PROJECTION);
  glLoadIdentity ();
  //glOrtho (-5,5,-5,5,-5,5);
  glFrustum(-5,5,-5,5,1,1000);
  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
  gluLookAt(0,0,-3,0,0,0,0,1,0);

  glColor3f(1.0,1.0,1.0);
  glBegin(GL_QUADS);                                  
  glVertex3f(-0.5,-0.5,-0.5);
  glVertex3f(0.5,-0.5,-0.5);
  glVertex3f(0.5,0.5,-0.5);
  glVertex3f(-0.5,0.5,-0.5);
  glEnd();
  // Don't wait start processing buffered OpenGL routines
  glFlush();
  glutSwapBuffers();

}

int main(int argc, char **argv) {
  glutInit(&argc, argv);

  glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);  
  glutInitWindowPosition(200,200);
  glutInitWindowSize(512,512);
  glutCreateWindow("Test");
  glutDisplayFunc(display);

  glutMainLoop();

  return 0;
} 
```

我是这样编译的：

```
gcc test.cpp -lGL -lglut -lGLU -o test 
```

这是一个屏幕截图：

![在此处输入图像描述](../Images/ae395c05b784029f907371dd49551126.png)

# php - 如何使用 PHP 调用外部 Web 服务

> ID：10669462
> 
> 赞同：1
> 
> 时间：2012-05-19T22:58:39.290
> 
> 标签：php, curl

我正在使用服务通过重定向到服务页面（例如[http://example.com?receiver=38383&msg=test](http://example.com?receiver=38383&msg=test)）使用 php 发送短信

如果我想向一个电话号码发送消息，我可以重定向到此页面，但我想使用 for 循环发送大量消息。我无法重定向到该页面，因为它会停止 PHP 脚本。我尝试了 cURL，但没有任何结果。你能帮助我吗？

这是 cURL 的代码：

```
$path = "http://example.com?receiver=38383&msg=test";
$opts = array(CURLOPT_URL => $path,
              CURLOPT_RETURNTRANSFER => true,
              CURLOPT_HEADER => true,
           CURLOPT_FOLLOWLOCATION => true);
$ch = curl_init();
curl_setopt_array($ch, $opts);
$return = curl_exec($ch);
curl_close($ch);
echo $return; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:05:55.503

```
function sendSMS($receiver, $message) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, "http://example.com?receiver" . $receiver . "&msg=" . $message);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $content = curl_exec($ch);

    curl_close($ch);

    return $content;
}

echo sendSMS (38383, "test"); 
```

# ruby-on-rails-3 - Bundler 与 RubyGems 一起将 Git 存储库推送到 Heroku 有什么问题？

> ID：10669468
> 
> 赞同：1
> 
> 时间：2012-05-19T22:59:12.870
> 
> 标签：ruby-on-rails-3, git, heroku

我已确保所有文件都按照[本讨论](https://stackoverflow.com/questions/9542665/remote-rejected-master-master-pre-receive-hook-declined)中的建议位于存储库的根目录中。但是，当我按照[本书这一部分的](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec:deploying)说明进行操作时，我无法顺利完成这一部分。您认为导致错误的我的系统发生了什么？尽管阅读了日志中的以下内容，但我目前不知道问题的含义。在此先感谢您的帮助！

```
stanley@ubuntu:~/rails_sample/first_app$ git push heroku master
Warning: Permanently added the RSA host key for IP address '50.19.85.156' to the list of known hosts.
Counting objects: 96, done.
Compressing objects: 100% (79/79), done.
Writing objects: 100% (96/96), 28.81 KiB, done.
Total 96 (delta 22), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.0.pre
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from https://rubygems.org/.......
       Installing rake (0.9.2.2)
       Installing i18n (0.6.0)
       Installing multi_json (1.3.5)
       Installing activesupport (3.2.3)
       Installing builder (3.0.0)
       Installing activemodel (3.2.3)
       Installing erubis (2.7.0)
       Installing journey (1.0.3)
       Installing rack (1.4.1)
       Installing rack-cache (1.2)
       Installing rack-test (0.6.1)
       Installing hike (1.2.1)
       Installing tilt (1.3.3)
       Installing sprockets (2.1.3)
       Installing actionpack (3.2.3)
       Installing mime-types (1.18)
       Installing polyglot (0.3.3)
       Installing treetop (1.4.10)
       Installing mail (2.4.4)
       Installing actionmailer (3.2.3)
       Installing arel (3.0.2)
       Installing tzinfo (0.3.33)
       Installing activerecord (3.2.3)
       Installing activeresource (3.2.3)
       Installing coffee-script-source (1.3.3)
       Installing execjs (1.3.2)
       Installing coffee-script (2.2.0)
       Installing rack-ssl (1.3.2)
       Installing json (1.7.3) with native extensions
       Installing rdoc (3.12)
       Installing thor (0.14.6)
       Installing railties (3.2.3)
       Installing coffee-rails (3.2.2)
       Installing jquery-rails (2.0.2)
       Using bundler (1.2.0.pre)
       Installing rails (3.2.3)
       Installing sass (3.1.18)
       Installing sass-rails (3.2.5)
       Installing sqlite3 (1.3.6) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_3tplrxvj7qa81/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_3tplrxvj7qa81/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:growing-mountain-2788.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:growing-mountain-2788.git' 
```

------Gemfile------------

根据要求，这是自动生成的 gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:03:51.083

问题是服务器上的 sqlite3 缺少头文件，并且 gem 无法构建扩展。你需要sqlite吗？尝试从 Gemfile 中删除它，或者如果可能的话，在服务器上安装 sqlite3-dev 包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:14:30.540

Heroku 尝试自动使用 postgres。（好东西，因为 sqlite 不适合生产） sqlite 脚本与 postgres 兼容，因此无需更改。

在您的 Gemfile 中执行此操作：

```
gem "sqlite3", :groups => [:development, :test]
gem "pg", groups => [:production] 
```

请注意，sqlite 和 postgres 之间可能存在行为差异。**强烈建议在您的开发环境中使用 postgres**

见[https://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development](https://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T03:12:12.133

我遇到了同样的问题，当我完成推送到 GitHub 后问题就消失了。

我需要完成这一步：

```
$ git remote add origin ...
$ git push -u origin master 
```

之后它毫无​​问题地推到了heroku。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T23:12:40.790

用 postgres 的 pg gem 替换 SQLite gem。Heroku 使用 Postgres，而且您在生产模式下也不需要 SQLite。

将 Gemfile 中的 sqlite 替换为“gem pg”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T23:16:45.057

Heroku 使用 PostgreSQL，而不是 SQLite。按照此说明解决您的问题[https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

# javascript - 无法在街景中触发事件

> ID：10669472
> 
> 赞同：2
> 
> 时间：2012-05-19T22:59:50.257
> 
> 标签：javascript, google-maps-api-3

我无法`pano_change`在信息窗口中嵌入的街景中触发事件。每次用户在街景信息窗口中导航时，我都需要获取对象的数组`getLinks()`和`getPosition()`对象。`StreetViewPanorama`它声明如下。我真的不明白为什么（它适用于标记和信息窗口上的事件）。

```
//code here

var contentString = '<input type="button" value="Grab this picture" onClick="captureImage()" /> <div id="content" style="width:200px;height:200px;"></div>';      

//code here

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

//code here//

google.maps.event.addListener(infowindow, 'domready', function() {
    if (pano != null) {
        pano.unbind("position");
        pano.setVisible(false);     
    }
    pano = new google.maps.StreetViewPanorama(document.getElementById("content"), {
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.ANDROID},
        enableCloseButton: false,
        addressControl: false,
        linksControl: false 
    });

    pano.bindTo("position", marker);
    pano.setVisible(true);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:11:47.643

您需要添加`google.maps.event.addListener(pano, 'links_changed', XXXX)`and `google.maps.event.addListener(pano, 'position_changed', XXXXX)`才能获取事件。

**初始化**

```
var pano = new google.maps.StreetViewPanorama(<element>, panoramaOptions);
google.maps.event.addListener(pano, 'pano_changed', function() {
    // whatever
});

google.maps.event.addListener(pano, 'links_changed', function() {
    var links = pano.getLinks();
    for (var i in links) {
        // whatever
    }
});

google.maps.event.addListener(panorama, 'position_changed', function() {
    var newPos = pano.getPosition();
});

google.maps.event.addListener(pano, 'pov_changed', function() {
    var newPoV = panorama.getPov();
}); 
```

现在，每当您在这三个事件（链接、pov、位置）中的任何一个发生变化时，都会调用相关函数。

# java - 根据配置文件在 Spring 中加载属性文件

> ID：10669474
> 
> 赞同：4
> 
> 时间：2012-05-19T23:00:22.357
> 
> 标签：java, spring

我有一个 Spring 3.1 应用程序。假设它有一个包含以下内容的 XML：

```
<context:property-placeholder location="classpath:somename.properties" />

<context:property-placeholder location="classpath:xxx.properties" /> 
```

我希望 some.properties 始终被加载（假设它存在），但是第二个占位符的 xxx 部分将被替换为某个名称，具体取决于活动配置文件。我试过这个：

```
<beans profile="xx1">
    <context:property-placeholder location="classpath:xx1.properties" />
</beans>

<beans profile="xx2">
    <context:property-placeholder location="classpath:xx2.properties" />
</beans> 
```

此外，这两个文件都具有具有相同键但值不同的属性。

但是它不起作用，因为后来的某个 bean 具有一个属性的占位符，该属性的键定义在 xx1.properties（和 xx2.properties）中，这使 Spring 抱怨在应用程序上下文中找不到该键。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-25T11:12:00.773

你可以做：

```
 <context:property-placeholder location="classpath:${spring.profiles.active}.properties" /> 
```

它工作正常，但在同时使用多个配置文件时可能不适应。

* * *

在声明 2 个属性占位符时，如果第一个不包含所有应用程序键，则应将属性忽略 unresolvable = true，以便使用第二个占位符。我不确定这是否是您想要做的，如果您希望 xx1 和 xx2 配置文件同时处于活动状态，则可能是这样。

请注意，像这样声明 2 个属性占位符会使它们独立，并且在 xx2.properties 的声明中，您不能重用 xx1.properties 的值。

* * *

如果您需要更高级的东西，您可以在应用程序启动时注册您的 PropertySources。

web.xml

```
 <context-param>
    <param-name>contextInitializerClasses</param-name>
    <param-value>com.xxx.core.spring.properties.PropertySourcesApplicationContextInitializer</param-value>
  </context-param> 
```

您创建的文件：

```
public class PropertySourcesApplicationContextInitializer implements ApplicationContextInitializer<ConfigurableApplicationContext> {

  private static final Logger LOGGER = LoggerFactory.getLogger(PropertySourcesApplicationContextInitializer.class);

  @Override
  public void initialize(ConfigurableApplicationContext applicationContext) {
    LOGGER.info("Adding some additional property sources");
    String profile = System.getProperty("spring.profiles.active");
    // ... Add property sources according to selected spring profile 
    // (note there already are some property sources registered, system properties etc)
    applicationContext.getEnvironment().getPropertySources().addLast(myPropertySource);
  }

} 
```

完成后，您只需在上下文中添加：

```
<context:property-placeholder/> 
```

恕我直言，这是处理 spring 属性的最佳方式，因为您不再在任何地方声明本地属性，您可以对正在发生的事情进行编程控制，并且可以在 xx2.properties 中使用属性源 xx1 值。

* * *

在工作中，我们正在使用它，它运行良好。我们注册了 3 个额外的属性来源： - 基础设施：由 Puppet 提供 - 配置文件：根据配置文件加载的不同属性。- 通用：包含默认值，当所有配置文件共享相同的值等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-01T17:33:23.357

我决定提交并回答这个问题，因为它尚未被接受。它可能不是您正在寻找的具体内容，但它对我有用。另请注意，我正在使用新的注释驱动配置，但它可以移植到 xml 配置。

我有每个环境的属性文件（dev.properties、test.properties 等）

然后我有一个 RootConfig 类，它是用于所有配置的类。这个类只有两个注解：@Configuration 和@ComponentScan(basePackageClasses=RootConfig.class)。这告诉它扫描与它相同的包中的任何东西。

然后有一个包含我所有正常配置的配置坐在任何地方。与上面的根配置类在同一个包中也有针对每个环境的配置。

特定于环境的配置只是具有以下注释的标记类，以将其指向特定于环境的属性文件：

```
@Configuration
@PropertySource("classpath:dev.properties")
@Import(NormalConfig.class)
@Profile("dev") 
```

导入告诉它引入正常的配置类。但是当它进入那里时，它将设置环境特定的属性。

# ruby-on-rails - Mongoid update_attributes 不持久

> ID：10669477
> 
> 赞同：1
> 
> 时间：2012-05-19T23:01:01.350
> 
> 标签：ruby-on-rails, mongoid

我正在运行一个`update_attributes`命令，以在我的 rails 控制台中的一个用户文档中**添加**`true`两个新添加的字段，它在正在运行的命令上显示，但数据库中没有任何内容。

User.last（简化）：

```
#<User _id: 4c77d555b1382g539f000022, first_name: "Jason", last_name: "Johnson"> 
```

我尝试运行的命令（遵循[http://mongoid.org](http://mongoid.org)文档）：

```
User.last.update_attributes(nickname: 'Josh', email: 'josh@gmail.com')
User.last.update_attribute(:nickname, 'Josh') # I get a NoMethodError: undefined method `update_attribute' 
```

用户.rb

```
 field :first_name
  field :last_name
  field :nickname # just added this
  field :email # just added this 
```

mongoid 宝石版本：

```
rails (3.0.3)
mongoid (2.0.0.beta.20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:56:20.500

我怀疑当您收到 NoMethodError 时您的用户集合为空。以下适用于 Rails 3.2.3、Mongoid 2.4.10。我建议复制并运行测试，以便您对正在测试的每件事都有一个已知的环境。

```
class User
  include Mongoid::Document
  field :first_name
  field :last_name
  field :nickname
  field :email
end 
```

测试/单元/user_test.rb

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  def setup
    User.delete_all
  end

  test "update_attribute" do
    User.create(first_name: 'Jason', last_name: 'Johnson')
    assert_equal(1, User.count)
    p User.last
    User.last.update_attribute(:nickname, 'Josh')
    p User.last
    User.last.update_attributes(nickname: 'Josh', email: 'josh@gmail.com')
    p User.last
  end
end 
```

测试输出

```
Run options: --name=test_update_attribute

# Running tests:

#<User _id: 4fc63ff5e4d30b08ca000001, _type: nil, first_name: "Jason", last_name: "Johnson", nickname: nil, email: nil>
#<User _id: 4fc63ff5e4d30b08ca000001, _type: nil, first_name: "Jason", last_name: "Johnson", nickname: "Josh", email: nil>
#<User _id: 4fc63ff5e4d30b08ca000001, _type: nil, first_name: "Jason", last_name: "Johnson", nickname: "Josh", email: "josh@gmail.com">
.

Finished tests in 0.019296s, 51.8242 tests/s, 51.8242 assertions/s. 
```

# objective-c - 什么在调用 CFStringCreateFromExternalRepresentation？

> ID：10669479
> 
> 赞同：0
> 
> 时间：2012-05-19T23:01:38.253
> 
> 标签：objective-c, cocoa, stack-trace, core-foundation

我对这个堆栈跟踪感到很困惑（只显示了令人困惑的部分）：

```
-[NSXMLDocument length]: unrecognized selector sent to instance 0x10187e010
An uncaught exception was raised
-[NSXMLDocument length]: unrecognized selector sent to instance 0x10187e010
(
   0   CoreFoundation                      0x00007fff8f5d6286 __exceptionPreprocess + 198
   1   libobjc.A.dylib                     0x00007fff9213bd5e objc_exception_throw + 43
   2   CoreFoundation                      0x00007fff8f6624ce -[NSObject doesNotRecognizeSelector:] + 190
   3   CoreFoundation                      0x00007fff8f5c3133 ___forwarding___ + 371
   4   CoreFoundation                      0x00007fff8f5c2f48 _CF_forwarding_prep_0 + 232
   5   CoreFoundation                      0x00007fff8f548c66 CFDataGetLength + 118
   6   CoreFoundation                      0x00007fff8f5791df CFStringCreateFromExternalRepresentation + 31
   7   asLJ                                0x0000000100013828 +[stripHTML stripAllHtmlFromString:] + 212 
```

特别是，我不明白调用在哪里`CFStringCreateFromExternalRepresentation`发生，所以我不知道我的代码 ( `+[stripHTML stripAllHtmlFromString:]`) 的哪一部分导致了异常。是什么导致调用`CFStringCreateFromExternalRepresentation`？如果很明显，我做错了什么导致异常？将来，我该如何确定调用的是`CFStringCreateFromExternalRepresentation`什么？

这是`+[stripHTML stripAllHtmlFromString:]`：

```
+ (NSString *)stripAllHtmlFromString:(NSString *)inputString
{
    // based on code from http://sugarmaplesoftware.com/25/strip-html-tags/#comment-71

    NSError *theError = NULL;
    NSString *modifiedInputString = [NSString stringWithFormat:@"%@\n\n\n\n\n\n\n\n\n\n\n\n",inputString]; // adding some spare newlines at the end to ensure that things will work even with a short non-HTML string
    NSXMLDocument *theDocument = [[NSXMLDocument alloc] initWithXMLString:modifiedInputString
                                                                  options:NSXMLDocumentTidyHTML
                                                                    error:&theError];

    NSString *theXSLTString = @"<?xml version='1.0' encoding='utf-8'?>"
                                "<xsl:stylesheet version='1.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform' xmlns:xhtml='http://www.w3.org/1999/xhtml'>"
                                "<xsl:output method='text'/>"
                                "<xsl:template match='xhtml:head'></xsl:template>"
                                "<xsl:template match='xhtml:script'></xsl:template>"
                                "</xsl:stylesheet>";    
    NSData *theData = [theDocument objectByApplyingXSLTString:theXSLTString arguments:NULL error:&theError];
    [theDocument release];
    return [[[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding] autorelease];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:06:17.053

哦，实际上，可能`-objectByApplyingXSLTString:arguments:error:`返回了一个`NSXMLDocument`而不是一个`NSData`. 因此，调用 to`-[NSString initWithData:encoding:]`调用`-length`它认为是的`NSData`，但`NSXMLDocument`不承认这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:16:00.777

[Ken Thomases 的回答](https://stackoverflow.com/a/10669759/291280)似乎完全正确——出于某种原因，对于非常短的输入（特别是空字符串），`-objectByApplyingXSLTString:arguments:error:`给定的 XSLT 返回一个`NSXMLDocument`（尽管我认为它不应该）。为了修复它，我首先检测我们是否得到了一个`NSXMLDocument`，如果有，则将其转换为 XML 的字符串表示形式并将其反馈给方法；否则假设我们得到了`NSData`我们最初预期的结果。

用下面的代码替换给定方法的最后 3 行（从`NSData *theData =`...开始）似乎已经解决了这个问题。

```
// Had a report of an exception that seemed to indicate objectByApplyingXSLTString:arguments:error: was returning an NSXMLDocument objectinstead of an NSData object, so let's guard against that.  (discussed at https://stackoverflow.com/q/10669479/291280 )
NSObject *XSTLresult = [theDocument objectByApplyingXSLTString:theXSLTString arguments:NULL error:&theError];
[theDocument release];
if ([XSTLresult isKindOfClass:[NSXMLDocument class]]) {
    // If the result is an NSXMLDocument, call XMLData to get an NSData object, turn it into a string, and feed that back into this method...
    return [self stripAllHtmlFromString:[[[NSString alloc]
                                          initWithData:[(NSXMLDocument *)XSTLresult XMLData]
                                          encoding:NSUTF8StringEncoding]
                                         autorelease]
            ];
} else {
    // Otherwise, assume we have an NSData object.
    return [[[NSString alloc] initWithData:(NSData *)XSTLresult encoding:NSUTF8StringEncoding] autorelease];
} 
```

# garbage-collection - ParNew 和 CMS 初始相关性

> ID：10669482
> 
> 赞同：4
> 
> 时间：2012-05-19T23:02:35.437
> 
> 标签：garbage-collection, jvm

我观察到，当没有最近的 ParNew 时，如果 CMS-Initial-Mark 阶段开始，CMS-Initial-Mark 阶段需要更长的时间来标记老年代中的对象。

好的部分是我发现 ParNew 的大部分时间（可能是偶然的或 JVM 在内部执行此操作）发生在 CMS-Initial-Mark 阶段之前，然后在老年代标记相同数量的对象，CMS 花费的时间更少。

想知道这个观察背后的原因。

注意：考虑到 CMS-Initial-Mark 阶段是 stop-the-world，应尽最大努力减少其持续时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T06:42:01.090

通常 CMS 初始标记搭载在年轻集合上。CMS 可以等待年轻收集一段时间（默认为 2 秒）。如果没有发生，初始标记将使用单线程扫描所有年轻空间，这可能非常耗时。

阅读[http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots_02.html](http://blog.ragozin.info/2011/06/understanding-gc-pauses-in-jvm-hotspots_02.html)了解更多详情。

HotSpot 选项 –XX:CMSWaitDuration=<delay in ms> 控制 CMS 初始标记可以延迟多长时间以搭载年轻收集。

# android - Android 多核手机上的本机代码分析

> ID：10669486
> 
> 赞同：2
> 
> 时间：2012-05-19T23:03:42.987
> 
> 标签：android, performance, native, multicore

在 Android 多核手机上分析本机代码的方法有哪些？

我正在寻找基于墙上时间/实时经过的配置文件，CPU时间，用于在方法中执行指令的系统时间。

我使用了 gprof，但它似乎只测量每个函数的 CPU 时间。Oprofile 需要内核构建，所以这是一个过度杀戮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T11:03:37.500

我建议您使用 Intel VTune Amplifier。此分析器允许您在**Android**设备上收集具有堆栈的热点，而无需 root 或任何操作系统修改。这是简单的指南： http: [//software.intel.com/en-us/articles/using-intel-vtune-amplifier-on-non-rooted-android-devices](http://software.intel.com/en-us/articles/using-intel-vtune-amplifier-on-non-rooted-android-devices)

# xcode4 - 从另一个视图控制器写入全局数组

> ID：10669489
> 
> 赞同：0
> 
> 时间：2012-05-19T23:04:22.577
> 
> 标签：xcode4, nsarray, global-variables

我在 viewController 中有一个数组，我想从另一个 viewController 写入该数组，所以我将该数组定义为全局但我没有设法写入它！

**ViewController1.h**

```
extern NSArray *xArray;
@property (nonatomic, retain) NSArray *xArray; 
```

**ViewController1.m**

```
@synthesize xArray;
NSArray *xArray;
xArray = [[NSArray alloc] init]; 
```

**视图控制器2.m**

```
#import "ViewController1.h"
NSArray *zArray = [NSArray arrayWithObjects:@"a",@"b",nil];
ViewController1.xArray = zArray; 
```

我收到以下错误： *在“ViewController1”类型的对象上找不到属性“xArray”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:12:38.080

找到解决方案，在应用委托中定义数组并在任何类中使用它

**AppDelegate.h**

```
NSArray *xArray;
..
@property (nonatomic, retain) NSArray *xArray;
..
@synthesize *xArray; 
```

**ViewController1.m**

```
NSArray *tmpArray1;
AppDelegate *mainDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
mainDelegate.xArray = tmpArray1; 
```

**视图控制器2.m**

```
NSArray *tmpArray2;
AppDelegate *mainDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
mainDelegate.xArray = tmpArray2; 
```

# php - php：我希望每 1 分钟执行一次代码

> ID：10669495
> 
> 赞同：2
> 
> 时间：2012-05-19T23:05:02.400
> 
> 标签：php, mysql, database, automation

我会尽量明确和具体:)

所以我有一个网站，人们在那里互相购买东西。为了保持一切井井有条，当有人从另一个用户那里购买东西时，该购买将被移动到数据库中的一个表中，称为 Pending。（注：购买的尚未处理）

（因此所有购买都将被移动并排队进入此“待处理”表）

现在我想要做的是，这张“待处理”表开始自动一次处理 1 次购买（假设每分钟 1 次购买 --> 如果有的话）。

现在我不知道该怎么做，如果有人可以至少给我一个提示，我可以使用什么或寻找什么，以便做到这一点。

注意：我正在使用 php & mysql

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:08:49.060

您可以编写一个 PHP 脚本以由[cron 作业](http://en.wikipedia.org/wiki/Cron)执行。PHP 不必从浏览器请求中执行，它可以[从命令行运行](http://php.net/manual/en/features.commandline.php)。Cron 会利用这个功能。

每分钟执行一个命令的 crontab 行如下：

```
* * * * * /path/to/script.php 
```

每列都有一个`*`指示“任何值”，因此这表示运行脚本“任何分钟、任何小时、任何一天、任何月份、一周中的任何一天”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:07:48.247

cronjob 将是你最好的选择，[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T23:07:24.000

使用 MySQL 查询创建一些名为 MovePending.php 的文件，该查询将购买从待处理“移动”到已处理，并通过 cron 作业每分钟运行一次。

# ruby-on-rails-3 - Rails：检测机器人 IP 以绕过缩短 ping

> ID：10669496
> 
> 赞同：2
> 
> 时间：2012-05-19T23:05:29.350
> 
> 标签：ruby-on-rails-3, web-crawler, honeypot

我有一个记录用户点击的应用程序。问题是，这些点击是通过 Twitter 推送的，这缩短了与 t.co 的每个链接。正因为如此，Twitter 似乎从不同的 IP 中点击了 7-15 次之间的链接，可能是为了做日志记录和垃圾邮件保护之类的事情。问题是这会在我的应用程序上记录 7 到 15 次“点击”，而不是来自实际用户。

我想知道是否有一种方法可以检测访问是来自实际用户还是只是被 cURL 或来自机器人或蜘蛛的某种东西。

似乎可行的一种方法是使用[http://www.projecthoneypot.org/](http://www.projecthoneypot.org/)的 API 来查看访问我网站的 IP 是否来自已知机器人。我找到了一个可以提供帮助的 gem (http://cl.ly/GlT8)，但在尝试使用它时不断收到 NET DNS 错误。

我的想法很新鲜。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:37:08.897

Twitter 应`User-Agent:`正确设置其 http 标头，以便您可以将其过滤掉。这当然可以伪造，但这是一个开始。

您可以使用`request.headers["User-Agent"]`.

# python - 在构建解释器中包含本地开发的 python 包

> ID：10669497
> 
> 赞同：0
> 
> 时间：2012-05-19T23:05:34.643
> 
> 标签：python, buildout

我正在使用 isotoma.buildout.autodevelop 来开发我目前正在构建中开发的鸡蛋。

我想将这些开发的鸡蛋（位于我的 buildout.cfg 旁边的文件系统上）作为命名空间包含在我的 buildout 的自定义解释器中。

任何人都可以提供一个例子或链接到一些资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:16:30.523

在构建中，您可以使用开发选项：

```
[buildout]
develop = .
  ../package_name
  ../another_package_name 
```

在此示例中，当前目录和父目录中的其他两个包将在构建过程中包含在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T00:14:46.880

A) 您的食谱页面上提到的 mr.developer 食谱可能是更好的选择。

B）你想把你的鸡蛋放在 bin/python 里吗？将它们包含在生成 bin/python 的构建中 zc.recipe.eggs 部分的“eggs”中。

# rspec - rails generate rspec:install 返回“在任何源中都找不到 addressable-2.2.8”

> ID：10669499
> 
> 赞同：1
> 
> 时间：2012-05-19T23:05:46.750
> 
> 标签：rspec, ruby-on-rails-3.2

目前，我正在阅读 Michael Hartl 编写的 Ruby on Rails 教程第 3 章（[http://ruby.railstutorial.org/chapters/static-pages#top](http://ruby.railstutorial.org/chapters/static-pages#top)），运行以下命令后收到错误消息：

```
rails generate rspec:install 
```

这是我得到的错误：

```
Could not find addressable-2.2.8 in any of the sources
Run 'bundle install' to install missing gems. 
```

如果我重新运行“捆绑安装”，这就是我得到的输出：

```
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.5) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using addressable (2.2.8) 
Using bundler (1.1.3) 
Using nokogiri (1.5.2) 
Using ffi (1.0.11) 
Using childprocess (0.3.2) 
Using libwebsocket (0.1.3) 
Using rubyzip (0.9.8) 
Using selenium-webdriver (2.21.2) 
Using xpath (0.1.4) 
Using capybara (1.1.2) 
Using coffee-script-source (1.3.3) 
Using execjs (1.3.2) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.3) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 
Using diff-lcs (1.1.3) 
Using jquery-rails (2.0.0) 
Using rails (3.2.3) 
Using rspec-core (2.10.1) 
Using rspec-expectations (2.10.0) 
Using rspec-mocks (2.10.1) 
Using rspec (2.10.0) 
Using rspec-rails (2.10.0) 
Using sass (3.1.18) 
Using sass-rails (3.2.4) 
Using sqlite3 (1.3.5) 
Using uglifier (1.2.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

如果我输入“bundle show addressable”，我可以看到“addressable-2.2.8”的路径。

这就是我的 gemfile 的样子：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

group :development, :test do
gem 'sqlite3', '1.3.5'
gem 'rspec-rails', '2.10.0'
gem 'addressable', '2.2.8'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
    gem 'sass-rails', '3.2.4'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
gem 'capybara', '1.1.2'
end

group :production do
gem 'pg', '0.12.2'
end 
```

知道我使用的是 rbenv、rails 3.2.3 和 ruby​​ 1.9.3p194 可能会有所帮助。

**编辑：**我觉得这可能与我使用 rbenv 的事实有关。我有一种感觉，rails 项目正在为这种特定的依赖项寻找错误的位置。有什么方法可以强制 Rails 应用程序在应用程序本身中存储依赖项/gems 并始终将它们加载到那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:45:28.313

我遇到了同样的问题。这是我修复它所遵循的步骤。

1.  确保`source 'https://rubygems.org'`是 Gemfile 中的第一行。
2.  `rm -rf .bundle`
3.  `bundle install`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:38:10.380

尝试：`bundle exec rails generate rspec:install`

# javascript - CSS 溢出回退？

> ID：10669501
> 
> 赞同：1
> 
> 时间：2012-05-19T23:06:11.357
> 
> 标签：javascript, jquery, android, css

对于 CSS 溢出不起作用的浏览器，是否有一个很好的后备方案？我正在编写一个严重依赖于溢出属性的新布局，但似乎 android 浏览器不支持它，所以我的布局完全被破坏了。我已经在使用 jquery，所以添加一些额外的代码不会有什么大不了的，我只是想知道是否有一种可以接受的模仿效果的方式。

为了更详细一点，我有一个宽度很大的轮播，我需要它在页面末尾水平切断。除了 android 浏览器之外，它几乎适用于所有东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T23:21:22.347

溢出已经存在了很长时间，并且绝对应该被任何不古老的浏览器支持（例如任何晚于 Netscape 4.7 的浏览器）。

如果您的布局在某些浏览器中不起作用，则很可能是由于其他原因。例如，标记不正确，因此元素不会像您想象的那样结束，或者您试图将其应用于不受支持的元素。

# z3 - 非线性算术和未解释的函数

> ID：10669503
> 
> 赞同：3
> 
> 时间：2012-05-19T23:06:47.857
> 
> 标签：z3

```
(declare-const x Real)
(declare-fun f (Real) Real)
(assert (= (f 1.0) 0.0))
(assert (= (* x x) (* 1.0 1.0)))
(check-sat)
(get-model) 
```

我有两个独立的断言，一个是非线性算术和其他未解释的函数。Z3 对上述问题给出“模型不可用”。有没有办法将逻辑设置为可以同时处理两者的东西？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:54:13.750

新的非线性求解器尚未与其他理论（数组、未解释函数、位向量）集成。在 Z3 4.0 中，它只能用于解决仅包含非线性算术断言的问题。这将在未来的版本中改变。

# javascript - 新的 dijit.form.Button 在声明时保持自动点击

> ID：10669504
> 
> 赞同：1
> 
> 时间：2012-05-19T23:07:16.770
> 
> 标签：javascript, ajax, dojo

我正在尝试以编程方式将 dijit.form.Button 插入到一些 HTML 中，我的代码如下所示：

```
row.innerHTML = '<td>Name:</td><td id="showname" />';
var showButton = new dijit.form.Button({
    label: "Show name",
    style: "float: right",
    onClick: show_name(),
}, "showname") 
```

但是每次我刷新和更新页面时，它都会自动运行show_name()，这不是我想要的。谁能给我一些关于为什么会发生这种情况的见解，以及我如何修复它以便 show_name() 仅在单击按钮时运行？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:14:27.967

试试`show_name`, 或`function() { show_name(); }`.

我的解释是你需要一个函数引用，而不是函数调用，它将返回值（可能没有）传回给`onClick`. 第一个选项在没有传递参数时有效，在第二个选项中，您可以将任何内容传递给`show_name()`.

# c++ - 使用函数将结构写入/读取到文件，Visual C++ 2008 express

> ID：10669513
> 
> 赞同：0
> 
> 时间：2012-05-19T23:08:13.217
> 
> 标签：c++, function, struct, read-write, visual-c++-2008-express

我使用 Visual C++ 2008 express 为基于文本的 RPG 游戏制作了三个文件。在我真正深入了解整个事情之前，我想先搞清楚基础知识：新游戏、保存游戏、继续游戏、退出游戏。到目前为止，我已经完成了制作角色部分（在这种情况下找到武器）并退出游戏。我坚持如何将武器统计数据从结构传递到保存文件。我似乎毫无问题地传递了结构的成员并检查文件以找到“垃圾”：Ì 和 -858993460 代替我的值。

我应该如何修复我的 save_game 和 continue_game 功能？我做了很多研究试图弄清楚这一点，但我尝试过的任何东西似乎都没有帮助。

这是代码的重要部分：

```
struct player_character
{
char type;
int damage;
int stability;
};

void save_game(player_character& pc, ofstream &save);
void continue_game(player_character& pc, ifstream &get);

int main()
{   
player_character pc;
ofstream save;
ifstream get;

//rest of main() goes here.

//pause screen
system("pause");
return 0;
}

//rest of functions go here.

void save_game(player_character &pc, ofstream &save_data) 
{
save_data.open  ("save.dat", ios::binary);
    if (save_data.is_open())
    {
    save_data << "pc.type = " << pc.type << endl;
    save_data << "pc.damage = " << pc.damage << endl;
    save_data << "pc.stability = " << pc.stability << endl;
                //doesn't work
    //save_data.write(reinterpret_cast<char*>(&pc), sizeof(pc));
    save_data.close();
    }
    else
    {
    cout << " Error. Unable to open file.";
    }
}

void continue_game(player_character &pc, ifstream &get_data) 
{
get_data.open("save.dat");
if (get_data.is_open())
    {
                //doesn't work
    //get.read(reinterpret_cast<char*>(&pc), sizeof(pc));
    get.close();
    }
    else
    {
    cout << " Error. Unable to open file.";
    }
} 
```

* * *

感谢您的回复。我正在尝试以下修订。continue_game 功能似乎可以工作。我没有收到任何错误（还）。当我在创建一个字符后选择保存时，我收到以下错误：Undone.exe 中 0x69197a28 处的未处理异常：0xC0000005：访问冲突读取位置 0xffffffcc。

谷歌将其显示为某种 Windows 问题。

为什么我的函数会导致此错误？

```
void save_game(ofstream &save, player_character const &pc) 
{
save.open  ("save.dat");
    if (save.is_open())
    {
    save.write(reinterpret_cast<char const *>(pc.type), sizeof pc.type); 
    save.write(reinterpret_cast<char const *>(pc.damage), sizeof pc.damage); 
    save.write(reinterpret_cast<char const *>(pc.stability), sizeof pc.stability); 
    save.close();
    }
    else
    {
    cout << " Error. Unable to open file.";
    }
}

int continue_game(ifstream &get) 
{
if (!get.read(reinterpret_cast<char *>(&pc.type), sizeof pc.type)) { /* error */ } 
if (!get.read(reinterpret_cast<char *>(&pc.damage), sizeof pc.damage)) { /* error */ } 
if (!get.read(reinterpret_cast<char *>(&pc.stability), sizeof pc.stability)) { /* error */ } 

return pc.type;
return pc.damage;
return pc.stability;
} 
```

* * *

我已更改 save_game 和 continue_game 代码并将其包含在此处。我还收集了调试器和汽车输出（汽车的小版本，不是全部七页）。显然我的值没有在 save_game 中进行评估，所以 continue_game 没有什么可使用的，也不会导致错误。

这是代码和调试器/自动打印输出：

```
int save_game(ofstream &save, player_character& pc) 
{
save.open  ("save.dat", ios::binary);
if (save.is_open())
{
//the error hits here:
    save.write(reinterpret_cast<char const *>(pc.type), sizeof pc.type); 
    save.write(reinterpret_cast<char const *>(pc.damage), sizeof pc.damage); 
    save.write(reinterpret_cast<char const *>(pc.stability), sizeof pc.stability); 
    save.close();
}
else
{
    cout << " Error. Unable to open file.";
}
return pc.type;
return pc.damage;
return pc.stability;
}

int continue_game(ifstream &get, player_character& pc)
{
get.open  ("save.dat", ios::binary);
if (get.is_open())
{
    if (!get.read(reinterpret_cast<char *>(&pc.type), sizeof pc.type)) { /* error */ } 
    if (!get.read(reinterpret_cast<char *>(&pc.damage), sizeof pc.damage)) { /* error */ } 
    if (!get.read(reinterpret_cast<char *>(&pc.stability), sizeof pc.stability)) { /* error */ } 
    get.close();
}
else
{
    cout << " Error. Unable to open file.";
}
return pc.type;
return pc.damage;
return pc.stability;
} 
```

调试器输出窗口：Undone.exe 中 0x644e7a28 处的第一次机会异常：0xC0000005：访问冲突读取位置 0xffffffcc。Undone.exe 中 0x644e7a28 处的未处理异常：0xC0000005：访问冲突读取位置 0xffffffcc。

自动： - pc {type='Ì' 伤害=-858993460 稳定性=-858993460 } player_character & type -52 'Ì' char 伤害 -858993460 int 稳定性 -858993460 int pc.type -52 'Ì' char - 保存 {_Filebuffer= {...} } std::basic_ofstream > & + std::basic_ostream > {...} std::basic_ostream > + _Filebuffer {_Pcvt=0x00000000 _Mychar='Ì' _Wrotesome=false ...} std::basic_filebuf >

* * *

好吧，我已经设法取得了一些进展。我发现我需要将参数放入我的 main_menu 函数（请注意，我不是在讨论 main() 函数，而是我创建的一个），以便将它们传递给我的 save_game 函数。我还可以通过在我的写入函数中添加一个 & 来停止访问错误。所以这：

```
save.write(reinterpret_cast<char const *>(&pc.type), sizeof pc.type); 
save.write(reinterpret_cast<char const *>(&pc.damage), sizeof pc.damage); 
save.write(reinterpret_cast<char const *>(&pc.stability), sizeof pc.stability); 
```

代替：

```
save.write(reinterpret_cast<char const *>(pc.type), sizeof pc.type); 
save.write(reinterpret_cast<char const *>(pc.damage), sizeof pc.damage); 
save.write(reinterpret_cast<char const *>(pc.stability), sizeof pc.stability); 
```

savve_game 代码在将数据放入文件时仍然无法正常工作，但它会打印到屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:50:12.707

您必须逐个读取和写入每种原始数据类型，并且仅使用未格式化的 I/O。例子：

```
void serialize(std::ostream & o, Player const & p)
{
    o.write(reinterpret_cast<char const *>(p.type), sizeof p.type);
    o.write(reinterpret_cast<char const *>(p.damage), sizeof p.damage);
    o.write(reinterpret_cast<char const *>(p.stability), sizeof p.stability);
}

Player deserialize(std::istream & i)
{
    Player p;
    char pt;
    int pd, ps;

    if (!i.read(reinterpret_cast<char *>(&pt), sizeof pt)) { /* error */ }
    if (!i.read(reinterpret_cast<char *>(&pd), sizeof pd)) { /* error */ }
    if (!i.read(reinterpret_cast<char *>(&ps), sizeof ps)) { /* error */ }

    p.type = pt; p.damage = pd; p.stability = ps;
    return p;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:33:19.220

对上一个答案和已编辑问题的跟进。

从您的 continue_game 签名来看，

```
int continue_game(ifstream &get) 
```

pc 必须是某种形式的全局结构，它包含您要恢复的字符。如果 pc 是在运行时分配的，那么您使用它不正确。

当你这样做时：

```
 return pc.type;
    return pc.damage;
    return pc.stability; 
```

一个函数只能有一个返回类型；只会返回 pc.type。这不是错误的原因，而是您应该注意的设计缺陷。

您对 continue_game 的初始方法，其中您将相关结构作为参数传递，

```
void continue_game(player_character &pc, ifstream &get_data) 
```

这是一个更好的主意。我相信，如果您将两者结合起来，您会发现自己没有错误。

如果错误仍然存​​在，请使用调试器并粘贴该行。此外，如果您愿意，我可以提供我描述的代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T07:00:27.707

看来我想通了！这是我想出的：数组中的结构......它似乎工作得很好。

```
void save_game(fstream& file, player_type& pc)
{
    file.open("save.dat");
    if (file.is_open())
        for (int i = 0; i < 1; i++)
        {
            file << pc.w_name << endl;
            file << pc.d_rate << endl;
            file << pc.s_rate << endl;
            file.close();
        }
        else
            cout << " Error. Unable to open file.";
    menu(pc);
}//end save function

void continue_game(fstream& file, player_type player[])
{
    file.open("save.dat");
    if (file.is_open())
        for (int i = 0; i < 1; i++)
        {
            file >> player[i].w_name;
            file >> player[i].d_rate;
            file >> player[i].s_rate;
            file.close();
        }                   
        else
            cout << " Error. Unable to open file.";
    for (int i = 0; i < 1; i++)
    {
        cout << "You are continuing the game with the following weapon: " << player[i].w_name << endl;
        cout << "Which has a damage rating of " << player[i].d_rate << " and a stability rating of " << player[i].s_rate << endl; 
    }
    cout << endl;
    menu(pc);
}//end continue_game 
```

# objective-c - 设置包中的格式化字符串

> ID：10669515
> 
> 赞同：0
> 
> 时间：2012-05-19T23:08:23.963
> 
> 标签：objective-c, ios

我在 iPhone 项目的设置包中有一个字符串。

```
test string that formats something like this => string%@inside%dastring 
```

用一个字符串和一个整数，然后我用这个字符串

```
NSString *result = [NSString stringWithFormat:stringFromBundle, replace_string, an_int_number]; 
```

但结果字符串未格式化。我是否必须将从捆绑包中获得的字符串转换为其他编码？

# git - 我在 git 存储库中看不到文件

> ID：10669517
> 
> 赞同：1
> 
> 时间：2012-05-19T23:08:27.437
> 
> 标签：git, ssh

我通过 ssh 创建了一个 git 存储库。它可以工作，但我看不到目录中的文件。

远程（SSH）：

```
mkdir test.com
cd test.com
git init

client(git bash)
cd /apache/htdocs
git clone git://myserverip/test.com
cd test.com
git add --all .
git commit -a -m "first"
git push origin master 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:17:53.930

我认为，您必须在服务器上的存储库中添加文件并提交。为什么你不尝试裸存储库？

如果您需要通过远程推送提交，请尝试以下命令：

在服务器上创建存储库：

```
cd /usr/local/git/    ## or your own repo destination
mkdir repo.git
cd repo.git
git init
touch README
git add .
git commit -a -m "start my repository" 
```

在客户端（例如 ubuntu）上：

```
git clone ssh://User@serverip:sshport/usr/local/git/repo.git myrepo
cd myrepo
git branch someUser   # create new branch
vim README   ## some change on the file
git add README
git commit -a -m "some change by someUser"    ## user commit changes
git push origin someUser   ## push commit to server 
```

用户推送更改后的系统管理员必须合并提交，简单的方法是：

```
cd /usr/local/git/repo.git
git merge someUser   ##  merge repo by user commit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:14:49.847

将文件推送到远程存储库不会更新文件树（“索引”）。它更新对象的存储。

要更新树以反映存储的对象，您必须`git reset --hard`在该远程存储库中执行操作以将其更新为新的`HEAD`.

这是一件坏事，因此远程存储库通常设置为“裸”：一种用于 git 托管的特殊存储库格式，它没有工作树（以及其他区别：例如没有`.git`目录：配置文件更方便存储在其根目录中）。

为您的上游使用裸存储库：`git init --bare`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:11:07.320

我找到了解决方案

```
mkdir test.com
cd test.com
git init
cd .git
cd hooks
vi post-receive
chmod +x post-receive 
```

接收后

```
#!/bin/sh
cd ..
env -i git reset --hard 
```

# jquery - 防止css在放置时更新

> ID：10669520
> 
> 赞同：2
> 
> 时间：2012-05-19T23:08:40.233
> 
> 标签：jquery, jquery-ui

当我在 drop 上设置 disabled 时：

```
$( "myDiv" ).droppable(
{
    drop: function( event, ui )  {
        $(this).droppable('disable');
    }
}); 
```

被删除元素的 CSS 更新，背景变灰。我可以覆盖它以保持元素的外观不变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:00:09.103

经过多次尝试，我无法在 jsfiddle 上重现这一点。经过大量挖掘后，我发现了这个：[http](http://bugs.jqueryui.com/ticket/6039?cversion=0&cnum_hist=1) ://bugs.jqueryui.com/ticket/6039?cversion=0&cnum_hist= 1 我想我遇到了同样的错误。对我来说，修复是在设置“禁用”时删除类“ui-state-disabled”，如下所示：

```
$("#"+this.id).droppable('disable').removeClass("ui-state-disabled"); 
```

非常感谢有关此问题的更多信息。

# android - 手机间隙安卓应用中页面的每日更新

> ID：10669521
> 
> 赞同：1
> 
> 时间：2012-05-19T23:08:43.413
> 
> 标签：android, cordova

我正在使用电话间隙来编写一个 android 应用程序，并且我希望应用程序上的一个页面每天都会更新新闻和信息。

我有一些想法并尝试了一些解决方案，主要只是链接到我托管我更新的页面的网站。

有没有人有更好、更内置的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:02:09.763

您是否考虑过 RSS 提要（或多个）？Phonegap 中有很多基本的 RSS 阅读器示例。这个[http://www.raymondcamden.com/index.cfm/2011/10/11/PhoneGap-RSS-Reader](http://www.raymondcamden.com/index.cfm/2011/10/11/PhoneGap-RSS-Reader)可能是一个好的开始。

# c - char 缓冲区中的许多缓冲区

> ID：10669524
> 
> 赞同：0
> 
> 时间：2012-05-19T23:09:38.627
> 
> 标签：c, pointers, char, buffer, void

```
int main(int argc, char **args) {
    unsigned char* str = "hallo";
    printf("String: %s\n",str);
    uint8_t aktion, id;
    uint32_t str_length;
    aktion = 1;
    id = 4;
    str_length = strlen(str)+1;

    unsigned char *buff;    
    buff = (unsigned char*) calloc(1,str_length+6);
    memcpy(buff, &id, sizeof(id));
    memcpy(buff+sizeof(id), &str_length, sizeof(str_length));
    strcpy(buff+sizeof(id)+sizeof(str_length), str);
    printf("Buffer+5: %s\n",buff+5));
    memcpy(buff+sizeof(id)+sizeof(str_length)+str_length, &aktion, sizeof(aktion));
    return 0;
} 
```

为什么我没有得到输出“你好”？我仍然不确定是否使用指针算法和缓冲区。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:25:42.507

```
uint32_t str_length;
aktion = 1;
id = 4;
str_length = strlen(str)+1;

unsigned char *buff;    
buff = (unsigned char*) calloc(1,str_length); 
```

你不应该在 C 中转换 malloc/calloc 的返回指针。

你的`buff`尺码是 6

```
memcpy(buff, &id, sizeof(uint8_t)); 
```

你在这里写了 1 个字节

```
memcpy(buff+1, &str_length, sizeof(uint32_t)); 
```

你在这里写了 4 个字节：

这意味着您已经用尽了分配给的 6 个字节中的 5 个字节`buff`

```
strcpy(buff+5, &str); 
```

您正在为 buff 写入分配的字节。这会导致**内存损坏**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:23:55.747

它应该是：

```
strcpy(buff + sizeof id + sizeof str_len, str);
/*                                        ^^^^   no '&'!  */ 
```

`str`已经是一个指针。相比之下，`&str`是指针的*地址*，这不是您所追求的。

您还需要在缓冲区中为两个初始变量腾出空间。

# java - 如何在java中返回四分之三布尔值的答案

> ID：10669526
> 
> 赞同：0
> 
> 时间：2012-05-19T23:10:23.753
> 
> 标签：java, boolean, boolean-logic, fractions

嘿伙计们，我想知道是否有任何方法可以在 java 中返回一堆布尔值的一部分。简单地说，我想知道是否有一种方法可以创建一个方法，当给定四个布尔值时，如果其中三个为真，则返回真，但如果少于三个为真，则返回假。我知道这可能很难理解，如果您不理解，只需发表评论即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:16:32.570

数数数组中的真值...

```
public boolean checkBools(boolean[] bools){
    int cnt=0;
    for(boolean b : bools)
        if(b) cnt++;
    return cnt < 3 ? false : true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:19:35.450

奇怪的问题......无论如何，这只是 4 个布尔值的可能解决方案：

```
public boolean booleanFraction(boolean a, boolean b, boolean c, boolean d) {
    int ia = a ? 1 : 0;
    int ib = b ? 1 : 0;
    int ic = c ? 1 : 0;
    int id = d ? 1 : 0;
    return ia + ib + ic + id == 3;
} 
```

对于更通用的解决方案，这里有一个方法，它接收`true`考虑`true`整个表达式所需的布尔值数量和大于零的布尔值变量数量作为参数：

```
public static boolean booleanFraction(int number, boolean... bools) {
    int acc = 0;
    for (boolean b : bools)
        acc += b ? 1 : 0;
    return acc == number;
} 
```

像这样称呼它，例如问题中的示例：

```
booleanFraction(3, true, true, true, false);
> true

booleanFraction(3, false, false, true, false);
> false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T23:12:56.983

只需创建一个为每个 true 递增 1 的 int。如果大于或等于 3，则返回 true。话虽如此，我不确定您的卡在哪里，因为这似乎太简陋了，甚至无法提及。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T23:16:45.580

```
public boolean checkBooleans(boolean b1, boolean b2, boolean b3, boolean b4) {
    boolean[] array = new boolean[4];
    boolean[0] = b1;
    boolean[1] = b2;
    boolean[2] = b3;
    boolean[3] = b4;
    int j = 0;
    for(int i = 0; i < array.length; i++) {
        if(array[i]) {
            j++;
        }
        if(j == 3) {
            return true;
        }
    }
return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-20T19:52:50.583

使用流：

```
static boolean threeOrMore(Boolean... bools) {
    return Stream.of(bools).filter(x -> x).count() >= 3;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-28T06:04:38.703

```
 boolean nOfM(int n, boolean... m) {
    for (boolean mi : m) if (mi) n--;

    return n < 1;
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-19T23:21:03.243

如果您希望您的答案作为一种`boolean`表达方式，您可以尝试，

```
boolean atLeastThree(boolean a, boolean b, boolean c, boolean d) {
    return a ? (b && (c || d) || (c && d)) : (b && c && d);
} 
```

统计 s的个数`true`更优雅一点，也更容易理解，

```
boolean atLeastThree(boolean a, boolean b, boolean c, boolean d) {
    return (a ? 1 : 0) +
           (b ? 1 : 0) + 
           (c ? 1 : 0) + 
           (d ? 1 : 0) > 2;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-25T20:09:42.077

[我对2-out-of-3 问题的](https://stackoverflow.com/questions/3076078/check-if-at-least-two-out-of-three-booleans-are-true/3076954#3076954)答案的变体：

```
boolean atLeastThree(boolean a, boolean b, boolean c, boolean d)
{
    int  n = -3;

    if (a) n++;
    if (b) n++;
    if (c) n++;
    if (d) n++;

    return (n >= 0);
} 
```

# javascript - 如何在 Ruby on Rails 中自动添加 _blank 到锚链接

> ID：10669528
> 
> 赞同：0
> 
> 时间：2012-05-19T23:10:44.723
> 
> 标签：javascript, ruby-on-rails, anchor

是否可以让脚本自动将**target="_blank"**添加到 Ruby on Rails 中的锚链接。

例如，当我在博客中添加链接时，我希望它自动在每个链接上添加**_blank**，以便链接在新窗口中打开。

这可以用 Javascript 或 Rails 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:13:26.890

您可以使用 JavaScript 实现此目的：

```
$("a").click(function() {
    if (!/^#/.test($(this).attr('href'))) {
        window.open(this.href, '_blank');
        return false;
    }
}); 
```

此代码将打开`target`属性设置为的所有锚点`_blank`。

# python - 使用python将文本打印到网页

> ID：10669529
> 
> 赞同：1
> 
> 时间：2012-05-19T23:11:08.203
> 
> 标签：python, web

我想知道; 这可能吗？我在 00 年代初学习 HTML，曾经有 PHP 和 javascript 的基础知识。现在我只记得基本的 HTML 和 python。目前，我有一个 python 脚本，根据用户的定义，每隔几秒重复一次打印到 GUI Tkinter 条目。

我想用网页来做到*这一点。*

是否可以将文本打印到动态更新的网页？我在想 RSS 提要.. 这肯定会奏效。但它可能不会很整洁。我想在页面上重新创建我的 Tkinter GUI，并在网络上提供“闪存卡”服务。python 脚本从 SQL Lite 数据库中检索值。而且我听说 python 是网络安全的，我不想学习一种全新的语言，比如 PHP。

如果可能的话，我还想将整个动态更新的表单嵌入到 drupal 站点中。有任何想法吗？使用 python 向网页动态添加文本的示例教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:14:51.023

也许您正在尝试创建 CGI 脚本？[http://en.wikipedia.org/wiki/Common_Gateway_Interface](http://en.wikipedia.org/wiki/Common_Gateway_Interface)

这是 CGI 编程的 Python 特定教程：[http ://www.tutorialspoint.com/python/python_cgi_programming.htm](http://www.tutorialspoint.com/python/python_cgi_programming.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:23:13.373

虽然@fulhack 推荐了 CGI python 模块，而且我个人过去也使用过它，但现在它并不是一个最佳选择。它的效率很低，因为每个请求都必须启动一个新的 python 进程（如果我没记错的话）。

为了让自己走上正确的起步之路，您可能想做的是查看 Python Web 框架的丰富选择：
[http ://wiki.python.org/moin/WebFrameworks](http://wiki.python.org/moin/WebFrameworks)

有些非常大且功能齐全，例如 django。而其他的则非常轻巧且小巧。我听说烧瓶很轻，尽管我个人有很多经验就是 django。如果您比较其中一些并选择一个适合您的需求，从长远来看，您可能会更快乐，并且学习一个可重用的过程。

# vb.net - VB.NET 赋值字符串 ---- String1 = String1+String2

> ID：10669543
> 
> 赞同：0
> 
> 时间：2012-05-19T23:14:27.833
> 
> 标签：vb.net, string, vb6

回到 VB6，您可以将字符串的值重新分配给自身以及其他字符串值，例如：

```
str_Duplications_Line = str_Duplications_Line & pRow_Prime.Value(i_FieldNum) 
```

现在，intellisense 不会将其视为错误，编译器也不会抱怨，但是当它运行时，它会在该行和其他多行中爆炸，例如：

```
str_Duplications_Line = str_Duplications_Line & ","

str_Duplications_AllFields = str_Duplications_AllFields + str_Duplications_Line + vbCrLf 
```

知道为什么会发生这种情况，以及如何解决这个问题吗？或者至少，在 VB.NET 中模拟同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:34:07.427

`&`这是和之间的区别`+`

```
"abc" + "def" = "abcdef"
"abc" & "def" = "abcdef"
"111" + "222" = "111222"
"111" & "222" = "111222"
"111" & 222 = "111222"
"111" + 222 = 333
"abc" + 222 = conversion error 
```

如果任何一个操作数为空，您可能会收到错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:20:39.500

确保您没有尝试将 null 连接到您的字符串

# java - 不同容器之间的 EJB 性能优化

> ID：10669555
> 
> 赞同：-2
> 
> 时间：2012-05-19T23:16:15.203
> 
> 标签：java, jakarta-ee, jboss, glassfish, ejb

EJB 比纯优化的 JDBC 慢，但据说这里[http://www.javaperformancetuning.com/news/qotm047.shtml](http://www.javaperformancetuning.com/news/qotm047.shtml)

> “简单的 JDBC/EJB 比较假定您的 JDBC 与 EJB 生成的 JDBC 一样高效。这绝不是肯定的，因为容器供应商可以拥有擅长生成最佳 SQL 的专业开发人员。”

我如何知道 JBoss、Glassfish、TomEE 之间的优化逻辑？我怎么知道它实际上适合我的特定应用程序，因为通用优化是一种过早的优化：我可以检查以某种方式生成的代码吗？如果需要的话，我可以覆盖那个优化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:49:56.543

是的，你可以看到生成的sql，是的，你一般可以使用你自己的。大多数 Java EE 容器使用其他 jpa 库，例如 hibernate 和 eclipselink。这些库有办法显示它们正在使用的 sql。他们也有使用你自己的 jpql 或 sql 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T02:26:22.277

> 我如何知道 JBoss、Glassfish、TomEE 之间的优化逻辑？

通过查看生成的 SQL 并检查源代码。另外，通过阅读文档。

> 我怎么知道它实际上适合我的特定应用程序，因为通用优化是一种过早的优化

那没有意义。“过早优化”综合症是当您（程序员）花时间*优化*代码时......在确定需要优化之前。相比之下，容器正在执行的优化是自动完成的，并且需要零开发人员时间。

> ：我可以检查以某种方式生成的代码吗？

是的。但是你如何做到这一点是特定于容器的。阅读容器特定文档。

> 如果需要的话，我可以覆盖那个优化吗？

我认为这也取决于容器。

* * *

您是否注意到这个答案中有一个共同的模式？还值得注意的是，Tomcat 不是 EJB 容器，并且没有“TomcatEE”之类的东西。

# ruby-on-rails - 绕过 seed.rb 中的 attr_accessible

> ID：10669556
> 
> 赞同：5
> 
> 时间：2012-05-19T23:16:27.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在创建种子数据时，我真的找不到绕过 attr_accessible 的干净方法。我希望能够毫无问题地使用批量分配，因为我知道这个种子文件是完全安全的。

有没有一种干净的方法可以强制 Rails 3 接受这些？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T21:36:37.740

这是一个快速破解（感谢 Mike），把它放在你的种子.rb 的顶部：

```
# Dodge the mass assignment
User.send(:attr_accessible, :username)
User.send(:attr_accessible, :admin) 
```

现在您可以轻松调用它，而不会弄乱您的模型（使用 :as => :seed）：

```
@user = User.find_or_create_by_username(:username => 'ryanonrails', :admin => true) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T01:11:47.957

```
#in model
attr_accessible :name, :role,.... :as => :seed

#in seed.rb
model.assign_attributes({name: "Putin", role: "president"....},:as => :seed)
model.save 
```

# php - 登录仅在单击提交按钮两次时有效

> ID：10669558
> 
> 赞同：0
> 
> 时间：2012-05-19T23:16:39.977
> 
> 标签：php, mysql

我需要您对此登录脚本的帮助。当用户注册时，`active`数据库中的一列设置为零 (0)，并且激活链接将发送到他们提供的电子邮件。单击激活链接时，如果成功，则它们各自的`active`列设置为 1。

但是只有当我单击提交按钮两次时，用户名和密码的正确组合才有效。

在第一次单击时，我得到以下几行

**注意：未定义的索引：请记住第 37 行的 C:\wamp\www\church\login.php**

**尚未验证**

但是当我第二次单击登录时。

```
<?php
if (isset($_POST['submit'])) {
    $username = trim($_POST['username']);
    $username = strip_tags($_POST['username']);
    $username = htmlentities($_POST['username']);
    $username = stripslashes($_POST['username']);
    $username = mysql_real_escape_string($_POST['username']);
    $password = sha1($_POST['password']);

    if (isset($_POST['username']) && isset($_POST['password'])) {
        $query = mysql_query("SELECT username, password
                           FROM USERS
                           WHERE username = '$username'
                           AND password = '$password'") or die (mysql_error());

        $user = mysql_num_rows($query);
        if ($user == 1) {
            $row = mysql_fetch_assoc($query);
            if ($row['active'] == 1) {
                $_SESSION['logged_username'] = $username;
                if ($_POST['remember']) {
                    setcookie("CookieUser", $_SESSION['logged_username'], time() + 60 * 60 * 24 * 100, "/");
                    setcookie("CookiePass", $password, time() + 60 * 60 * 24 * 100, "/");

                    header('Location: http://127.0.0.1/church/index.php?id=1');
                }
            }
            if ($row['active'] !== 1) {
                echo "Not Verified Yet";
            }
        }
        else {
            echo "<div id='content' >";
            echo "<div class='OpenError' >";
            echo "Username & Password Combination Is Wrong";
            echo "</div>";
            echo "</div>";

        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:19:34.193

更改`if ($_POST['remember']) {`为`if (isset($_POST['remember']) && $_POST['remember']) {`

老实说，从错误消息中应该很明显，尤其是。看到您`isset`在脚本中的其他任何地方都有测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:24:17.173

问题*不*在于您没有登录。而是您的代码`die()`在发送重定向标头后没有登录，因此继续执行该页面上的代码。此外，如果用户不选择`remember`，则不会发生任何事情。要修复（第一个问题），只需`die();` *在* `header("location: ...");`.

## 为什么我需要`die();`after `header("location: ...");`？

该`header()`函数将字符串（文本）发送到浏览器（或其他请求页面的程序）。但是，服务器不知道 和 之间的区别`header("location: ...");`，`header("somerandomthing: ...");`因此它会继续执行代码，直到到达脚本末尾、出现错误或客户端断开连接。因此，为了防止代码继续执行，只需在*每次*调用`die();`后添加即可。 *`header("location: ...");`*

 *# 关于不检查“记住”的更新

```
<?php
if ($user == 1) {
        $row = mysql_fetch_assoc($query);
        if ($row['active'] == 1) {
            $_SESSION['logged_username'] = $username;
            if ($_POST['remember']) {
                setcookie("CookieUser", $_SESSION['logged_username'], time() + 60 * 60 * 24 * 100, "/");
                setcookie("CookiePass", $password, time() + 60 * 60 * 24 * 100, "/");

            }
            // Redirect even if not 'remembered'
            header('Location: http://127.0.0.1/church/index.php?id=1');
            die;
        }
        if ($row['active'] !== 1) {
            echo "Not Verified Yet";
        }
    } 
```*

# node.js - 使用“require”（节点 ORM）处理 Node.js 异步返回

> ID：10669561
> 
> 赞同：4
> 
> 时间：2012-05-19T23:17:27.687
> 
> 标签：node.js, orm, require

我正在使用 Node.js ORM 模块：[https ://github.com/dresende/node-orm](https://github.com/dresende/node-orm)

我可以通过这样做来创建一个模型：

```
 var orm = require("orm");
    var db = orm.connect("creds", function (success, db) {
        if (!success) {
            console.log("Could not connect to database!");
            return;
        }

      var Person = db.define("person", {
        "name"   : { "type": "string" },
        "surname": { "type": "string", "default": "" },
        "age"    : { "type": "int" }
      });
    }); 
```

问题是我想将 Person （以及所有其他模型）放在外部包含中。

如果我做这样的事情：

```
 require("./models/person.js"); 
```

我不能在其中使用 db 变量，因为它只存在于 orm.connect() 的回调函数的上下文中。我无法将 orm.connect 移动到 require (person.js) 并为模型信息执行 module.export，因为在父脚本中，require 会发生，然后下一行模型将无法准备好，因为它不等待回调。IE

```
//person.js
// db and orm get defined up here as before
Person = {}; // code from above, with the define and etc. 
Module.exports = Person;
//app.js 
person = require("./models/person.js");
console.log(person); // returns undefined, connect callback isn't done yet 
```

我觉得有一种明显的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T23:35:24.947

也许可以将person.js的导出变成一个函数，并传入db？像这样：

```
//app.js
var orm = require("orm");
var db = orm.connect("creds", function (success, db) {
    if (!success) {
        console.log("Could not connect to database!");
        return;
    }

  var Person = require("./models/person.js")(db);
});

//person.js
module.exports = function(db){
    return db.define("person", {
        "name"   : { "type": "string" },
        "surname": { "type": "string", "default": "" },
        "age"    : { "type": "int" }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:31:30.280

如果您将此处发布的代码放入函数中，则可以将其导出并在 person.js 中使用（或相反）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T13:41:35.383

Node-orm 不是很好。Node-mysql 驱动程序具有本机实现，但 node-orm 没有。您可以使用 light-orm 作为 node-mysql 的包装器。您将获得非常灵活的模型。

[https://npmjs.org/package/light-orm](https://npmjs.org/package/light-orm)和[https://npmjs.org/package/mysql](https://npmjs.org/package/mysql)

# javascript - 对象对自身的引用

> ID：10669568
> 
> 赞同：0
> 
> 时间：2012-05-19T23:18:52.963
> 
> 标签：javascript, jquery

我不确定如何正确地陈述这个问题，但我正在尝试创建一个处理图像数组的 javascript 对象，以便它们可以重新排序/移动。

```
function imgHandler(divname) {
    this.imgDiv = divname;
    this.img = Array("bigoldlizard.png","scarytiger.gif");
    this.update = function() {
        var htmlstr = "";
        for(i=0; i<this.img.length; i++) {

//This is the line in question:
        htmlstr += "<img src=\"" + this.img[i] + "\" onclick=\"javascript:" + ??? + ".remove(" + i + ")\"/></span>";

        }
        $("#" + this.imgDiv).html(htmlstr);
    }

    //remove an image from the array
    this.remove = function(index) {
        if (index >= 0 && index < this.img.length) {
            this.img.splice(index, 1);
            this.update();
            return true;
        }
        else
            return false;
    }
} 
```

所以基本上，我需要对象能够添加自己的名称，或者能够引用自己......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:31:18.130

创建元素而不是 HTML 代码，并创建一个闭包来保存循环迭代中的变量，然后事件处理程序代码可以使用这些变量：

```
 this.update = function() {
    var i, img;
    for(i=0; i<this.img.length; i++) {

      // closure for "this" and "i"
      (function(t, i){

        img = $('<img/>', { src: this.img[i] }).click(function(){
          t.remove(i);
        });

      })(this, i);

      $("#" + this.imgDiv).append(img);
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:13:53.633

Guffa 的解决方案可能就足够了，但在循环中创建闭包通常不是一个好主意。我有一种不同的方法，它不需要您对代码进行太多重构，并提供了一个可重用的组件，尽管代码更多：

```
// CALLBACK MANAGER MODULE BEGIN
// Create a manager for creating callbacks.
var callbackManager = (function () {
    var win = window,
        random = Math.random,
        // Create a hash for us to save all callbacks on.
        callbacks = {},
        // Generates the next unique ID for a callback.
        nextId = (function () {
            var next = 1;

            return function () {
                var n = next;
                next += 1;
                return n;
            };
        }()),
        // Generates the next valid callback name.
        nextCallbackName = function (prefix) {
            prefix = prefix || "___callback";
            return prefix + nextId(); 
        };

    // Save our hash of callbacks on the window object
    // so we can get access to the callbacks globally.
    win.callbacks = callbacks;

    return {
        // Creates a callback that will call the specified 
        // method on the 'thisObj'. Can specify optional arguments 
        // to have passed to the method call:
        //
        // callbackManager.makeMethodCallCallback(myObj, "welcome", "Alex");
        //
        // The callback will be returned and saved so it can 
        // be accessed globally.
        //
        // Each callback will be a function with the following methods:
        // getPath - Get the exported (i.e. global) path of the callback.
        // dispose - Disposes the callback by nulling out all references
        //      and removing it from global access.
        //
        // makeCallback(thisObj, methodName, ...)
        makeMethodCallCallback: function (thisObj, methodName) {
            var name = nextCallbackName(),
                args = Array.prototype.slice.call(arguments, 2),
                callback = function () {
                    if (thisObj && 
                        typeof thisObj[methodName] === "function") {
                        return thisObj[methodName].apply(thisObj, args);
                    }
                };

            callback.getPath = function () {
                return "window.callbacks." + name;
            };
            callback.dispose = function () {
                thisObj = null;
                callback = null;
                args = [];
                delete callbacks[name];
            };

            return callback;
        };
    };
}());
// CALLBACK MANAGER MODULE END

function imgHandler(divname) {
    this.imgDiv = divname;
    this.img = Array("bigoldlizard.png","scarytiger.gif");
    // Define an array of callbacks.
    var callbacks = [];

    this.update = function() {
        var htmlstr = "",
            // Declare a local variable for a callback.
            callback;

        for(i=0; i<this.img.length; i++) {

        // Create a new callback and save it so we can dispose it when
        // this image is removed. We also pass the index of the image.
        callback = callbackManager.makeMethodCallCallback(this, "remove", i);
        callbacks.push(callback);
        // All callbacks have a getPath() method that will return
        // the callback's exported (i.e. global) path, such as "window.callbacks.__callback92".
        htmlstr += '<img src="' + this.img[i] + '" onclick="' + callback.getPath() + '(); return false;/></span>';

        }
        $("#" + this.imgDiv).html(htmlstr);
    }

    //remove an image from the array
    this.remove = function(index) {
        if (index >= 0 && index < this.img.length) {
            this.img.splice(index, 1);
            this.update();

            // Dispose the callback associated to this image
            // then tombstone it so that the order other callbacks
            // will be maintained.
            if (callbacks[index]) {
                callbacks[index].dispose();
                // Tombstone the callback.
                callbacks[index] = undefined;
            }

            return true;
        }
        else
            return false;
    }
} 
```

Guffa 的技术和这个应该可以解决问题。

编辑：我没有意识到你正在使用 jQuery。如果可以的话，我建议使用 jQuery 的`click()`事件助手而不是属性。`onclick`也许尝试结合我`callbackManager`和 Guffa 的方法可以提供两全其美的方法；创建`<img>`元素并使用 jQuery 的`click()`帮助器并使用可重用的回调管理器模块。

# php - php中的背景css

> ID：10669573
> 
> 赞同：0
> 
> 时间：2012-05-19T23:20:00.803
> 
> 标签：php, css, background

我使用 style.php 作为样式文件.. 这是该文件的一部分

```
.<?php echo $cty2; ?> {
background: url(images/<?php echo $cty2; ?>.jpg) no-repeat;
} 
```

当我去 style.php （浏览器），这会出现

```
.newyorkny {
background: url(images/newyorkny.jpg) no-repeat;
} 
```

但是页面背景没有出现！

* * *

当我改变这个

```
.<?php echo $cty2; ?> {
background: url(images/<?php echo $cty2; ?>.jpg) no-repeat;
} 
```

对此（没有php）

```
.newyorkny {
background: url(images/newyorkny.jpg) no-repeat;
} 
```

然后BG出现了

那么，我如何强制 BG 以 php 样式出现？

========已编辑=============

这是 style.php 文件

```
<?php
    header("Content-Type: text/css ");

?>

@font-face {
font-family: "Segoe WPC";
src: url("http://cdn-resources.windowsphone.com/Resources/Fonts/SegoeWPCRegular/Latin1_1252/87c56796-f4c3-4861-9f31-035d303c63ce-1.ttf") format("truetype");
font-style: normal;
font-weight: normal;
}
@font-face {
font-family: "Segoe WPC Light";
src: url("http://cdn-resources.windowsphone.com/Resources/Fonts/SegoeWPCLight/Latin1_1252/bd84c8dc-054a-427a-9fde-3ebb63965f38-1.ttf") format("truetype");
font-style: normal;
font-weight: normal;
}
@font-face {
font-family: "Segoe WPC Black";
src: url("http://cdn-resources.windowsphone.com/Resources/Fonts/SegoeWPCBlack/Latin1_1252/f513a30a-82ae-4466-acac-96337207a433-1.ttf") format("truetype");
font-style: normal;
font-weight: bold;
}

body {
color:#a8a8a8;
font-family: 'Segoe WPC', Segoe UI, Arial, Tahoma, sans-serif;
font-size:13px;
margin:0;
padding:0;
background: #141414;
}

img { margin: 2px; }

h1 {
margin-top: 5px;
font-weight:400;
}

a {
color:#a8a8a8;/*333*/
text-decoration: none;
}

a:hover {
color:#eee;
}

option {
font-weight: bold;
}
option:hover {
cursor: pointer;
}

img { border: 0 }

input, select, textarea {
font-family: 'Segoe WPC', Segoe UI, Arial, Tahoma, sans-serif;
border:1px solid #D9D9D9;
border-top:1px solid #C0C0C0;
font-size:14px;
outline:none;
padding:5px;
}
input:hover, select:hover, textarea:hover{
border:1px solid #C0C0C0;
border-top: 1px solid #777;
}
input:focus, select:focus, textarea:focus {
border:1px solid #2a2a2a;
box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
}
input#search {
width: 176px;
background: #f0f0f0;
border:2px solid #000;
font-size:14px;
outline:none;
padding:5px;
color:#aaa;
margin-top: 10px;
}
input#search:hover {
background: #fff;
color: #202020;
}
input#search:focus {
background: #fff;
color: #202020;
}
hr { 
border:none;
color:white;
height:1px;
background:#ccc;
background: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 600, from(#ccc), to(#fff)); 
}

/* Selectie */
::selection {
background:#000;
color:#fff;
}
::-moz-selection {
background:#000;
color:#fff;
}
::-webkit-selection {
background:#000;
color:#fff;
}

/*General*/

#header {
font-family: 'Open Sans', Segoe UI, sans-serif;
margin: 0 auto;
padding: 7px 10px 13px 10px;
height: 69px;
}

#content {
width:1006px;
margin:20px auto 0 auto;
}

.content {
border: 3px solid #000;
width: 1000px;
height: 575px;
background: #fafafa;
}
.Freeze {
background: url(images/bg_freeze.png) no-repeat;
}
.Cold {
background: url(images/bg_cold.png) no-repeat;
}

/* new york */
<?php
function PageMain() {
    global $TMPL;
    $resultSettings = mysql_fetch_row(mysql_query(getSettings($querySettings)));
            $year = date("Y");
            $month = date("m"); 
    # Detecteaza locatia IP-ului vizitatorului
    include("includes/geoipcity.inc");
    include("includes/geoipregionvars.php");

    $ip = $_SERVER['REMOTE_ADDR'];
    $gi = geoip_open("includes/GeoLiteCity.dat", GEOIP_STANDARD);
    $record = geoip_record_by_addr($gi, $ip);
    geoip_close($gi);

    $city = $record->city;

    # Hotaraste ce oras este folosit
    if(isset($_GET['city'])) { # Daca e setat ?city schimba
        $city = htmlspecialchars($_GET['city']);
    } elseif (empty($city)) { # Daca nu deteacteaza locatia IP-ului, pune default
        $city = $resultSettings[1];
    }

    # Preia informatia (cURL pentru formatul UTF-8)
    $city = urlencode($city);
    $city = utf8_encode($city);
    $url = 'http://www.google.com/ig/api?weather='.$city.'&hl=en';
    $ch = curl_init();
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt ($ch, CURLOPT_TIMEOUT, 60);
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0);
    $utf8 = curl_exec($ch);
    curl_close($ch);

    $xml = simplexml_load_string($utf8);
    # Seteaza preferinta formatului temperaturii
    if($_GET['f'] == 'f') {
        setcookie("format", 'fahrenhite', time() + 10080);  
        $TMPL['cf'] = 'f';
        $TMPL['f'] = 'c';
    } elseif($_GET['f'] == 'c') {
        setcookie("format", 'celsius', time() + 10080); 
        $TMPL['cf'] = 'c';
        $TMPL['f'] = 'f';
    } elseif($_COOKIE['format'] == '') {
        $TMPL['cf'] = 'c';
        $TMPL['f'] = 'f';
    } elseif($_COOKIE['format'] == 'fahrenhite') {
        $TMPL['cf'] = 'f';
        $TMPL['f'] = 'c';
    } elseif($_COOKIE['format'] == 'celsius') {
        $TMPL['cf'] = 'c';
        $TMPL['f'] = 'f';
    }

    # Defineste radacinile in variabile cu xpath
    $information = $xml->xpath("/xml_api_reply/weather/forecast_information");
    $current = $xml->xpath("/xml_api_reply/weather/current_conditions");
    $forecast = $xml->xpath("/xml_api_reply/weather/forecast_conditions");
$cty = $information[0]->city['data'];
$ctyy = utf8_encode($cty);

    if(isset($_COOKIE['username']) && isset($_COOKIE['password'])) {

        $query = sprintf('SELECT * from users where username = "%s" and password ="%s"', 
        mysql_real_escape_string($_COOKIE['username']), 
        mysql_real_escape_string($_COOKIE['password']));

        if(mysql_fetch_row(mysql_query($query))) {
            $user = $_COOKIE['username'];       
            if($_GET['fav'] == '1') {

                $query = sprintf("INSERT INTO favorites (`username`, `location`) values ('%s', '%s')",
                mysql_real_escape_string($user),
                mysql_real_escape_string($city));
                mysql_query($query);

            }

            if(isset($_GET['city'])) {

                $TMPL['fav'] = '?city='.$_GET['city'].'&fav=1';

            } else {

                $TMPL['fav'] = '?fav=1';
            }

        } else {
            $user = 'anonymous';
            $TMPL['notLogged'] = '<despartitor></despartitor>You must be logged in to add favorites';
        }
    } else { 
        $user = 'anonymous';
        $TMPL['notLogged'] = '<despartitor></despartitor>You must be logged in to add a city to favorites.';
    }

    $cookieFormat = $TMPL['cf']; # Seteaza variabila cookies format, ca s-o pot folosi si in rows

    $TMPL_old = $TMPL; $TMPL = array();
    $skin = new skin('welcome/rows'); $all = '';

    # Citeste formatul ales de user, si arata-i informatiile in formatul ales de el
    if($cookieFormat == 'f') {
        foreach($forecast as $foreca) {
            $TMPL['day'] = $foreca->day_of_week['data'];
            $TMPL['low'] = $foreca->low['data'].'&deg;';
            $TMPL['high'] = $foreca->high['data'].'&deg;';
            $TMPL['icon'] = str_replace(array('/ig', '.gif'), array('', '.png'), $foreca->icon['data']);
            $TMPL['condition'] = $foreca->condition['data'];
            $all .= $skin->make();
        }
    } else {
        foreach($forecast as $foreca) {
            $TMPL['day'] = $foreca->day_of_week['data'];
            $TMPL['low'] = round(($foreca->low['data'] - 32) /1.8, 0).'&deg;'; # Converteste din Fahrenhite in Celsius
            $TMPL['high'] = round(($foreca->high['data'] - 32) /1.8, 0).'&deg;'; # Converteste din Fahrenhite in Celsius
            $TMPL['icon'] = str_replace(array('/ig', '.gif'), array('', '.png'), $foreca->icon['data']);
            $TMPL['condition'] = $foreca->condition['data'];
            $all .= $skin->make();
        }
    }

    $TMPL = $TMPL_old; unset($TMPL_old);
    $TMPL['rows'] = $all;

    if($cookieFormat == 'f') {

            $TMPL['city'] = $information[0]->city['data'];
            $TMPL['temp'] = $current[0]->temp_f['data'].'&deg;';

            $cty = trim($TMPL['city']);
            $cty2 = str_replace(" ", "", "$cty");
            $cty2 = str_replace(",", "", "$cty2");
            $cty2 = strtolower($cty2);
            $ct = $TMPL['city'];
            $TMPL['weather'] = $cty2;
            mysql_query("INSERT INTO city (city, css, year, month) VALUES ('$city','$cty2','$year','$month')");
            $year = date("Y");
            $month = date("m");

        } else {

            $TMPL['city'] = $information[0]->city['data'];
            $TMPL['temp'] = $current[0]->temp_c['data'].'&deg;';

            $cty = trim($TMPL['city']);
            $cty2 = str_replace(" ", "", "$cty");
            $cty2 = str_replace(",", "", "$cty2");
            $cty2 = strtolower($cty2);
            $ct = $TMPL['city'];
            $TMPL['weather'] = $cty2;

        $ce = $TMPL['city'];

$query2 = "SELECT * FROM city WHERE city='$ce' ";
$result2 = mysql_query($query2) or die(mysql_error());

        while($row2 = mysql_fetch_array($result2)) {

        $visits = $row2['visits'];

        }

    if (mysql_num_rows($result2)){

        mysql_query("UPDATE city SET visits='$visits'+1 WHERE city='$ce' ");

    }
    else
    {
        $visits = '1';

        $query3 = "INSERT INTO city (city, css, visits) VALUES ('$ce','$cty2','$visits')";
        $result3 = mysql_query($query3) or die(mysql_error());
    }

    $cty2 = utf8_encode($cty2);

$con = mysql_connect("localhost","hatim_wea","*F7W,vrBEzC=");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$sel = mysql_select_db("hatim_weather", $con) or die();
$ce = $TMPL['city'];
$queryw = "SELECT * FROM city where city='$ce' ";
$resultw = mysql_query($queryw,$con) or trigger_error("SQL", E_USER_ERROR);
$numw = "mysql_num_rows($queryw)";

    while($roww = mysql_fetch_array($resultw)) {
        $sete = $roww["city"];
        $visits = $roww["visits"];

        $cess = $roww["css"];

    }   
    if (mysql_num_rows($resultw)){

$ss = utf8_encode($cess);

echo"

.$ss {
background: url(images/$ss.jpg);
} 

";
}

        }

}

require_once('./includes/config.php');
require_once('./includes/skins.php');
require_once('./includes/functions.php');

mysql_connect($conf['host'], $conf['user'], $conf['pass']);
mysql_query('SET NAMES utf8');
mysql_select_db($conf['name']);

$TMPL['content'] = PageMain();

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:23:25.957

你这样做完全错了，为什么不把它做成一个.css文件，然后根据城市包含它，你的意思是它显示了背景？在哪里？

根据城市包括它，我的意思是：

```
echo '<link rel="stylesheet" type="text/css" href="'.$cty2.'" />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:24:18.717

您需要设置内容类型，服务器将您的 style.php 作为 text/html 提供，浏览器需要 text/css，使用该`header`函数设置内容类型。

```
header('Content-Type: text/css'); 
```

# mysql - 如何知道插入行的ID

> ID：10669584
> 
> 赞同：0
> 
> 时间：2012-05-19T23:22:04.133
> 
> 标签：mysql, database, pdo, relational-database

我有一个包含两个列的表，第一个是 ID，第二个是文本，像这样

```
oneContent (ID,contentText) 
```

我还有一张桌子

```
ioContents (IOID,oneContentID) 
```

我想将此消息（“嗨，我是 WilliamRoma”）插入到 oneContent 中，然后在 ioContents 中将其链接到 IOID =3

我可以通过首先在 oneContent 表中插入消息然后将其 ID 插入到 ioContents 来做到这一点，但是我怎样才能获得它的 ID？? ? ,

一种方法是

```
SELECT ID FROM oneContent WHERE contentText = "hi man i am WilliamRoma" 
```

但我认为这是一个不好的方式，你建议在插入消息后获取它的 id 吗？

曾经的 ID 是自动递增的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:23:52.360

看这里：[http ://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html](http://dev.mysql.com/doc/refman/5.0/en/getting-unique-id.html)

我想你想要`LAST_INSERT_ID()`

# jquery - 包含 Jquery 图形库时，$ 是 WordPress 中的未定义错误

> ID：10669585
> 
> 赞同：2
> 
> 时间：2012-05-19T23:22:27.377
> 
> 标签：jquery, wordpress, undefined, jqplot

我在我的 functions.php 文件中使用以下代码在 wordpress 中包含了一个名为 JQplot 的图形和绘图 Jquery 库：

```
function rw_jqplot() {
    // JS
    wp_deregister_script('jqplot');
    wp_enqueue_script('jqplot', plugins_url('/js/jquery.jqplot.min.js', __FILE__), array("jquery"), '1.0.0.1012');
    // CSS
    wp_deregister_style('jqplot');
    wp_enqueue_style('jqplot', plugins_url('/css/jquery.jqplot.min.css', __FILE__), false, '1.0.0.1012'); 
```

`} add_action('init', 'rw_jqplot'); ?>`

问题是我收到一条错误消息（在萤火虫中）：$ 未定义。

我做了一些研究，我认为它必须与 jquery 在无冲突模式下运行有关。所以也许解决这个问题的方法是以某种方式将上述代码包含在 wordpress 无冲突模式中？那有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:51:06.933

查看 JQPlot 代码，整个插件在闭包中声明：

```
(function($) { 
  // JQPlot code
})(jQuery); 
```

所以插件很好（`$ = jQuery`在插件范围内）。但是，效果声明不是：

```
var backCompat = $.uiBackCompat !== false;
// And then, JQPlot effects declaration 
```

这是一个问题，您应该向开发团队报告。为了快速修复，您可以在`(function($) {`10577 行和.`})(jQuery);``jquery.jqplot.js`

## 编辑

最新的稳定版本（0.9.7r635）似乎没有这个问题。也许[试一试](https://bitbucket.org/cleonello/jqplot/downloads/)！

# batch-file - 使用 .bat 自行删除未知路径的文件

> ID：10669588
> 
> 赞同：-1
> 
> 时间：2012-05-19T23:23:05.223
> 
> 标签：batch-file, cmd, delete-file

我想做的是在执行后自行删除我的文件，这涉及退出 cmd 的脚本。有没有办法排列一个.bat，它将位于一个未知目录中，在.cmd关闭后标记为删除，这样它就不会弄乱我的代码？

我现在使用的代码只是为了找到我需要的路径

```
 dir /B /S filename.bat 
```

如果我尝试将其设置为变量，

```
 set var=dir /B /S filename.bat
    del %var% 
```

我收到的返回消息是“B”是一个无效的开关。这将（希望）在 Windows 7 机器上大规模远程实施（阅读：成像）。最重要的是，上面的代码会在执行过程中被删除，导致程序终止。我可能正在查看记录响应，然后将其打印到 var，但我对此并不陌生，而且我几乎不知道如何在 cmd 关闭后执行删除命令。我愿意接受比查找/删除文件更好/更有效的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T00:29:33.903

在批处理文件中插入这一行：

```
del "%~F0" & exit 
```

上一行删除正在运行的批处理文件并退出 cmd.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:26:35.657

您可以使用`%0`来获取正在执行的批处理文件的名称。

因此，要删除并退出，您可以使用：

```
del %0 /f /s /q
exit >nul 
```

# git - 如何创建忽略原始存储库中某些文件的 Git 远程存储库？

> ID：10669595
> 
> 赞同：2
> 
> 时间：2012-05-19T23:24:07.587
> 
> 标签：git, github

我有项目文件（包括测试文件），我希望在本地计算机上使用 Git 进行版本控制。我想创建一个公共远程存储库（在 GitHub 上），它只包含我的项目文件的一个子集（我希望我的项目中的一些测试文件从公共远程存储库中省略。）

如何设置远程存储库，以便省略某些文件，并且在远程存储库或其历史记录中没有引用这些文件曾经存在过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:50:46.887

尝试这个：

*   初始化您的 git 存储库：

    ```
    git init 
    ```

*   添加所有*公共*文件并进行初始提交：

    ```
    git add public1 public2 ...
    git commit -m 'initial commit' 
    ```

*   创建一个新`private`分支：

    ```
    git checkout -b private 
    ```

*   添加你的测试文件和其他你不想公开的东西：

    ```
    git add testcase1 testcase2 ...
    git commit -m 'added test cases' 
    ```

现在您有一个包含两个分支的存储库。该`master`分支仅包含您想要公开的内容。该`private`分支基于 master 分支，但有一些附加文件。

添加你的 github`remote`并推送 master 分支。

您将希望在分支上完成大部分工作，并根据需要`master`定期将更改合并到`private`分支中。

**更新**：如果您需要经常处理文件，这会变得复杂，因为很难将“私人”文件的更改与公共文件的更改分开。如果您的所有私有文件都可以限制在一个特定的子目录中，那么最简单的做法就是将您的私有文件放在一个单独的存储库中（并在公共存储库中签出工作副本）。

即使您不能将所有内容都限制在同一个子目录中，您也可以通过创造性地使用符号链接来寻求类似的解决方案。

# java - 欧拉计划 #4

> ID：10669599
> 
> 赞同：4
> 
> 时间：2012-05-19T23:24:54.467
> 
> 标签：java

目标是找到两个三位数的乘积并且是回文的最大数。我在java中编写了以下代码，但是当我运行它时，我没有得到任何输出。有什么问题？

```
public class Problem4{
    public static void main(String[] args){
        int reversedProduct=0;
        int temp=0;
        int product;
        for (int a=100; a<1000; ++a){
            for (int b=100; b<1000; ++b){
                product=a*b;
                while (product>0){
                    temp = product%10;
                    reversedProduct=reversedProduct*10+temp;
                    product=product/10;
                } if (reversedProduct==product){
                    System.out.println(product);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T23:28:50.827

你`product`在扭转它的过程中归零。您应该制作一个副本，并将反转的产品与它进行比较。

```
int orig = product;
while (product>0){
    temp = product%10;
    reversedProduct=reversedProduct*10+temp;
    product=product/10;
}
if (reversedProduct==orig){
    System.out.println(reversedProduct);
} 
```

请注意，此时您的解决方案将打印*所有*回文，而不仅仅是最迟的回文。不过，获得最大的应该是微不足道的。

# python - Python 3 中大规模、蛮力最大化的高效多处理

> ID：10669600
> 
> 赞同：8
> 
> 时间：2012-05-19T23:25:30.763
> 
> 标签：python, parallel-processing, python-3.x

这是我最近的问题[Avoiding race conditions in Python 3's multiprocessing Queues](https://stackoverflow.com/questions/10607747/avoiding-race-conditions-in-python-3s-multiprocessing-queues)的扩展。希望这个版本的问题更具体。

**TL;DR：在多处理模型中，工作进程使用 队列从队列中馈送`multiprocessing.Queue`，为什么我的工作进程如此空闲？**每个进程都有自己的输入队列，因此它们不会相互争夺共享队列的锁，但队列实际上只是空了很多时间。主进程正在运行一个 I/O-bound 线程——这会减慢 CPU-bound 填充输入队列的速度吗？

我试图在一定的约束下找到 N 个集合的笛卡尔积的最大元素，每个集合都有 M_i 个元素（对于 0 <= i < N）。回想一下笛卡尔积的元素是长度为 N 的元组，其元素是 N 个集合的元素。我将这些元组称为“组合”以强调我正在循环遍历原始集合的每个组合这一事实。当我的函数`is_feasible`返回时，组合满足约束`True`。在我的问题中，我试图找到元素权重最大的组合：`sum(element.weight for element in combination)`.

我的问题很大，但我公司的服务器也很大。**我正在尝试将以下串行算法重写为并行算法。**

```
from operator import itemgetter
from itertools import product # Cartesian product function from the std lib
def optimize(sets):
    """Return the largest (total-weight, combination) tuple from all
    possible combinations of the elements in the several sets, subject
    to the constraint that is_feasible(combo) returns True."""
    return max(
                map(
                    lambda combination: (
                        sum(element.weight for element in combination),
                        combination
                    ),
                    filter(
                        is_feasible, # Returns True if combo meets constraint
                        product(*sets)
                    )
                ),
                key=itemgetter(0) # Only maximize based on sum of weight
            ) 
```

我目前的多处理方法是创建工作进程并将它们与输入队列组合。当工人收到[毒丸](https://stackoverflow.com/questions/10607747/avoiding-race-conditions-in-python-3s-multiprocessing-queues)时，他们将他们见过的最佳组合放在输出队列中并退出。我从主进程的主线程填充输入队列。这种技术的一个优点是我可以从主进程产生一个辅助线程来运行一个监控工具（只是一个 REPL，我可以使用它来查看到目前为止已经处理了多少组合以及队列有多满）。

```
 +-----------+
            in_q0   |   worker0 |----\
            /-------+-----------+     \
+-----------+   in_q1   +-----------+  \ out_q  +-----------+
|   main    |-----------|   worker1 |-----------|   main    |
+-----------+           +-----------+  /        +-----------+
            \-------+-----------+     /
            in_q2   |   worker2 |----/
                    +-----------+ 
```

我最初让所有工作人员从一个输入队列中读取，但发现他们都没有访问 CPU。考虑到他们一直在等待 queue.get() 解除阻塞，我给了他们自己的队列。这增加了 CPU 的压力，所以我认为工作人员更频繁地活动。但是，队列大部分时间都是空的！（我从我提到的监控 REPL 中知道这一点）。这向我表明填满队列的主循环很慢。这是那个循环：

```
from itertools import cycle
main():
    # (Create workers, each with its own input queue)
    # Cycle through each worker's queue and add a combination to that queue
    for combo, worker in zip(product(*sets), cycle(workers)):
        worker.in_q.put(combo)
    # (Collect results and return) 
```

我猜瓶颈是`worker.in_q.put()`. 我怎样才能让它更快？我的第一直觉是让工作人员变慢，但这没有任何意义......监视器线程过于频繁地停止循环的问题是什么？我怎么能说出来？

或者，是否有另一种不涉及太多等待锁的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:19:02.547

你的元素是什么样的？可能是酸洗它们以将它们放入队列中很慢，这显然是一个瓶颈。请注意，每个元素都被一遍又一遍地独立腌制。

如果是这种情况，这种方法可能会有所帮助：

*   选择一个基数 >= 你的工人数量的集合。理想情况下，这将远远超过工人的数量。将此集合称为 A，并将 A 的大致相等的子集分配给每个工人。将该子集传输给每个工作人员。
*   将除 A 之外的所有集合的全部内容分发给每个工作人员（可能通过`pickle.dumps`一次，然后将相同的字符串传输给每个工作人员，或者可能通过共享内存或其他方式）。
*   然后每个工人都拥有完成其子集所需的全部信息。它可以愉快地开始`product(my_A_subset, *other_sets)`（可能顺序不同），在每个作业（或每三个作业或其他）之间轮询某种停止信号。这不需要通过队列，一位共享内存值可以正常工作。

# debugging - Windows Azure 角色无响应

> ID：10669606
> 
> 赞同：5
> 
> 时间：2012-05-19T23:27:52.780
> 
> 标签：debugging, azure, azure-worker-roles, role

我有一个工作角色，其中运行许多线程来处理来自客户端的连接。在负载测试期间，我们注意到角色变得无响应，并保持在该状态直到我们重新启动它。在 Visual Studio 调试器中查看它（通过暂停活动进程），我们可以看到许多线程在等待，但是当它取消暂停时，没有任何活动发生。我如何知道是什么导致该角色保持在该状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T00:50:13.693

正如您提到的，当您执行负载测试时，您的 Worker 角色开始出现问题，可以安全地假设该角色最初工作正常。这会得出结论，即问题是特定于应用程序的，而不是特定于平台的。有两种方法可以从 Windows Azure VM 获取一些诊断信息：

*   选项 1（首选）：为了检查您的 Azure VM 中发生的情况，您确实需要为您的角色添加 Windows Azure 诊断，以便您可以获得性能计数器、内存详细信息、角色进程运行状况和其他从 Azure VM 转移到的数据您可以离线分析的 Azure 存储。

*   选项 2：启用对 Azure VM 的 RDP 访问，然后登录到 Azure VM 并在 Azure VM 中安装 Perfmon、Process Explorer 和其他运行状况监控工具并监控正在发生的事情。

*   选项 3（最后的手段）：RDP 到您的 Azure VM 并安装 WinDBG 并调试主机进程

在这种情况下，当您的工作人员角色停止工作时，这是我对任何人的真正建议：

1.  查找 CPU、内存压力、线程列表并找出哪些线程被阻塞以及可能是什么原因。
2.  查找主机工作进程健康，上次启动时，是否由于某种原因被回收，它在 Azure VM 中运行了多长时间
3.  如果您有一个在您的工作角色中设置为“ProgramEntryPoint”的单独进程，请检查其运行状况
4.  在应用程序和系统级别检查事件日志以获取任何线索。在 Worker 角色中，我看不到应用程序事件日志中会有任何内容，但值得一看。
5.  我使用进程监视器来监视一些进程并收集日志以查看进程何时死亡，最后一个状态是什么，它正在访问什么以及它是否被其他问题饿死。

最重要的是，您确实需要在 Azure VM 中挖掘根本原因，这与在本地计算机中所做的方式几乎相同。

# python - Python IOError：无法打开两个文件

> ID：10669608
> 
> 赞同：0
> 
> 时间：2012-05-19T23:28:33.790
> 
> 标签：python, ioerror

我在 Python 中遇到了一个我无法掌握的 IOError。我有一个相对简单的脚本来检索各种科学文章并将它们组织成一个目录结构。

编写每个输出文件的调用在这里（在 for-each 循环中）：

```
 (58)    outfile = open(curr_dir + "/" + article + ".txt",'w')
        (59)    outfile.write("title: " + title + '\n')
        (60)    outfile.write("abstract: " + abstract + '\n')
        (61)    outfile.close() 
```

对于一千多篇文章，输出文件可以毫无问题地打开和编写。但是，在两个上，它失败，以下 IOError 指向上面显示的第一行：

```
 Traceback (most recent call last):
    File "script.py", line 58, in <module>
    outfile = open(curr_dir + "/" + article + ".txt",'w')
    IOError: [Errno 2] No such file or directory: '/path/to/file/text.html.txt' 
```

这是两个文件：

```
 /path/2-minute-not-invasive-screening-for-cardio-vascular-diseases-relative-limitation-of-c-reactive-protein-compared-with-more-sensitive-l-homocystine-as-cardio-vascular-risk-factors-safe-and-effective-treatment-using-the-selective-drug-uptake-enhancementme.html.txt

    /path/expression-of-chemokine-receptors-i-immunohistochemical-analyses-with-new-monoclonal-antibodies-from-the-8th-iifferentiation-antigens.html.txt 
```

据我所知，所有其他 1000 多个文档看起来或多或少相同。例如，其他文档以数字开头，并且在打印时打开它们没有问题。此外，这些文章正试图写入其他文章已经打印过的同一目录。我会怀疑第一种情况的长度，但第二种情况可能不是问题。

有什么我想念的吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-17T19:07:02.870

回想起来，我应该将我的解决方案作为答案发布，而不是仅仅将其留在评论中。

这个问题与绝对文件路径的长度有关（不仅仅是文件名！）。将这些修剪到少于 325 个字符就可以了。就像是：

```
article = article[:325-len(current_dir)]
out.write(os.path.join(current_dir, article + '.txt')) 
```

# php - Yii 交易和验证问题

> ID：10669611
> 
> 赞同：0
> 
> 时间：2012-05-19T23:29:52.533
> 
> 标签：php, mysql, yii

我正在做一个网络应用程序，用户可以在其中选择他们的假期。因为他不需要一次选择所有的星期，所以我在 HolidayPeriod 模型的 save() 方法中（在事务中）融合了连续的假期。

我的问题是，HolidayPeriod 的 rules() 中的验证之一是新时期不与任何现有时期重叠。所以我的实际代码是：

```
public function save($runValidation = true, $attributes = null)
{
    $ts = Yii::app()->db->beginTransaction();
    try {
       $periods=$this->user->holidayPeriods;
       foreach ($periods as $period){
            if ($this->isConsecutiveWith($period)){
                $this->fusion($period);
            } 
       }
       if ($result = parent::save($runValidation, $attributes)) {

         ....................
         ....................

private function fusion($period){
    $this->start=date('Y-m-d',min(strtotime($this->start),strtotime($period->start)));
    $this->end=date('Y-m-d',max(strtotime($this->end),strtotime($period->end)));
    if (!$period->delete()){
        echo "FAIL<BR>";
        throw new Exception();
    }else {
        echo "OK<BR>";          
    }   
} 
```

问题在于，当调用**parent::save($runValidation, $attributes)**时，验证检测到已删除的期间重叠并且失败。于是我做了一个简单的测试：

```
 $periods=$this->user->holidayPeriods;
 echo count($periods);
 foreach($periods as $period){
     $period->delete();
 }
 echo count($this->user->holidayPeriods); 
```

并且两个调用**echo**在开始和结束时打印相同的数字。

如何在 delete() 之后更新 $this->user->holidayPeriods？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:21:15.380

> 如何在 delete() 之后更新 $this->user->holidayPeriods？

（假设这是在 中定义的关系`relations()`）您可以：

*   `unset($this->user->holidayPeriods)`- 下次访问`$this->user->holidayPeriods`时，将从数据库中加载。
*   `$this->user->getRelated('holidayPeriods', true)`- 强制`holidayPeriods`从数据库中刷新关系。
*   完全避免从数据库刷新：

    ```
     $periods = $this->user->holidayPeriods;
    foreach ($periods as $ix => $period){
      if ($this->isConsecutiveWith($period)){
        $this->fusion($period);
        unset($periods[$ix]);
      }
    }
    $periods = array_values($periods); // fix period indexes
    unset($this->user->holidayPeriods);
    $this->user->addRelatedRecord('holidayPeriods', $periods, false); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:00:44.480

您不会从“$this->user->holidayPeriods”中删除任何内容。通过这样做：`$periods=$this->user->holidayPeriods;`您只是将值传递`$this->user->holidayPeriods`给变量“$periods”。因此，当您修改 "$periods" 时，您并没有对`$this->user->holidayPeriods`. 所以尝试这样的事情：

```
 foreach($this->user->holidayPeriods as $period){
    if ($this->isConsecutiveWith($period)){
       $this->fusion($period);
     } 
 } 
```

# sql - MDX 解决方案：每组提取 1 条记录并添加到主结果集中

> ID：10669612
> 
> 赞同：0
> 
> 时间：2012-05-19T23:30:05.607
> 
> 标签：sql, ssas, mdx, resultset, dimension

我有一个非常简单的事实/维度架构，可用于 SSAS 2008 R2 数据库中的房地产数据。

我想构建一个结果集，概述房屋首次出售的时间、售价以及房屋在每月增量出售后的价值。

请考虑以下维度和措施：

# 方面：

* * *

## 暗房号

门牌号码

* * *

## 估值日期

估值日期

* * *

## 销售日期

销售日期

# 措施：

SoldAmount
CurrentValue
CountofHouse

1.  [DimHouseNumber].[HouseNumber] 属性层次结构表示门牌号
2.  [DimSoldDate].[SoldDate] 属性层次结构表示房屋出售的日期。
3.  [DimValuationDate].ValuationDate 属性层次结构表示房屋在出售后评估的日期。
4.  [SoldAmount] 度量代表房屋的原始售价。
5.  [CurrentValue] 度量表示基于所讨论的 [DimValuationDate].ValuationDate 属性层次结构成员出售后房屋的当前价值。

话虽如此，请考虑以下结果集，其中包含基于上述维度和度量的所有可能的元组和度量：

* * *

## 门牌号 | 出售日期 | 售出金额 | 估值日期 | 当前值

```
 1                  1/3/2011        $100,000.00     1/31/2011           $100,000.00
 1                  1/3/2011        $100,000.00     2/28/2011           $110,000.00
 1                  1/3/2011        $100,000.00     3/31/2011           $112,000.00
 2                  1/20/2011       $50,000.00      1/31/2011           $51,000.00
 2                  1/20/2011       $50,000.00      2/28/2011           $53,000.00
 2                  1/20/2011       $50,000.00      3/31/2011           $75,000.00 
```

可以在上面看到，每个月的销售日期和销售金额值都保持不变，所讨论的门牌号码是根据基础事实表的配置方式进行评估的。

插入相应事实表的记录代表房屋售出后的每月估值。

话虽这么说，我想将上面的结果集变成如下所示：

* * *

## 门牌号 | 估值日期 | 当前值

```
 1                    1/3/2011        $100,000.00 
 1                    1/31/2011       $100,000.00 
 1                    2/28/2011       $110,000.00 
 1                    3/31/2011       $112,000.00 
 2                    1/20/2011       $50,000.00 
 2                    1/31/2011       $51,000.00 
 2                    2/28/2011       $53,000.00 
 2                    3/31/2011       $75,000.00 
```

你可以在上面看到，我正在尝试创建一个按时间顺序排列的时间线，说明房子的价值，包括出售时的价值。

从本质上讲，对于每所售出的房屋，我想要 1 条记录来概述房屋的价值和估价日期。

您可以看到，上述 2 个结果集的不同之处在于，上述第 2 个结果集包括房屋的出售日期以及作为“估价”期间的一部分出售的价格。上面的第一个结果集仅包括房屋出售后的日期。

我需要根据上面概述的第一个结果集中包含的数据生成上面的第二个结果集。

不幸的是，我没有在 OLTP 端或 SSAS 多维数据集本身上修改源数据的奢侈，因此我需要一个仅 MDX 的解决方案。

如果有人可以根据我上面概述的维度和措施向我展示完成此任务所需的 MDX 声明，我将不胜感激。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:54:29.150

假设您在 [DimValuationDate] 中有可用的所有天数，您可以尝试以下计算度量：

```
with 
    member [Measures].[Value] as 
           iif( not isEmpty( ( [Measures].[Current Value], [DimValuationDate].currentMember )),
                ( [Measures].[Current Value], [DimValuationDate].currentMember ),
                iif( not isEmpty( ([Measures].[Sold Amount], LinkMember( [DimValuationDate].currentMember, [DimSoldDate] ))),
                     ([Measures].[Sold Amount], LinkMember( [DimValuationDate].currentMember, [DimSoldDate] )),
                     null
                )
            )

select 
    [Measures].[Value] on 0,
    non empty [DimHouseNumber].members * [DimValuationDate].members on 1

from 
    [my-cube] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:00:37.597

这似乎是一个简单的 UNION 查询：

```
select *
from ((select distinct HouseNumber, SoldDate as ValuationDate, CurrentValue
       from fact
      ) union all
      (select HouseNumber, ValuationDate, CurrentValue
       from fact
      )
     ) f
order by HouseNumber, ValuationDate 
```

此查询将销售数据与估值数据相结合。

# windows - NPM 无法在 Windows 上运行

> ID：10669614
> 
> 赞同：2
> 
> 时间：2012-05-19T23:30:48.330
> 
> 标签：windows, cmd, npm

我已经使用安装程序在 Windows 上安装了 Node.js，并尝试运行 npm 命令，但它不会运行。当我输入以下内容时。

```
npm install socket.io 
```

我懂了

```
module.js:337
    throw new Error("Cannot find module '" + request + "'");
          ^
Error: Cannot find module 'C:\Windows\System32\node_modules\npm\bin\npm-cli.js'
    at Function._resolveFilename (module.js:337:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

当我输入

```
npm 
```

我懂了

```
module.js:337
    throw new Error("Cannot find module '" + request + "'");
          ^
Error: Cannot find module 'C:\Windows\System32\node_modules\npm\bin\npm-cli.js'
    at Function._resolveFilename (module.js:337:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

我检查了一下，我在正确的位置有 npm-cli.js 文件。我如何让 npm 命令工作。我需要为 npm-cli.js 文件设置一个环境变量吗？如果我这样做，你能引导我完成这个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T17:58:36.873

我忘记将 NodeJS 和 NPM 添加到我的系统变量中。

# javascript - Instagram 自动喜欢 Bookmarklet

> ID：10669617
> 
> 赞同：2
> 
> 时间：2012-05-19T23:31:34.263
> 
> 标签：javascript, instagram, bookmarklet, social-media-like

Instagram Like (heart) 自动点击 Post Bookmarklet

目标：点击页面[http://www.gramfeed.com/instagram/tags#photo上的所有“Like”心](http://www.gramfeed.com/instagram/tags#photo)

这是我正在使用的代码。这个在另一个网站上工作，

```
var a = document.getElementsByTagName('a'); var b = []; for(var i=0, len = a.length; i < len; i++){ if(a[i].id.indexOf('like') !== -1){b.push(a[i]) } }; for(var i=0, len = b.length; i < len; i++){ b[i].click() }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:58:04.117

以下应该有效；我已经对它进行了测试，它喜欢心脏（尽管这不起作用，因为我没有登录等）。

```
javascript:(function(){for(i=0;i<document.getElementsByTagName('img').length;i++){if((' '+document.getElementsByTagName('img')[i].className+' ').indexOf(' liker ')> -1){document.getElementsByTagName('img')[i].click();}}})(); 
```

[至于检查“功能”的班级，关于这个](https://stackoverflow.com/a/5898748/785241)答案的信用是应得的。

**更新**

```
javascript:(function(){for(i=0;i<document.getElementsByTagName('img').length;i++){if((' '+document.getElementsByTagName('img')[i].className+' ').indexOf(' liker ')>-1){var t=document.getElementsByTagName('img')[i];if(document.dispatchEvent){var o=document.createEvent('MouseEvents');o.initMouseEvent('click',true,true,window,1,1,1,1,1,false,false,false,false,0,t);t.dispatchEvent(o)}else if(document.fireEvent){t.fireEvent('onclick')}else if(t.click()){t.click()}}}})(); 
```

我仍然不确定上面的代码是否真的有效，但到目前为止它在 jsfiddle 中[“有效”](http://fiddle.jshell.net/vCVbA/2/show/)（将链接拖动到按钮栏，单击按钮栏中的链接，观察控制台）。

# actionscript-3 - 如何在 away3d 4.0 Beta 中使用多类灯光？

> ID：10669620
> 
> 赞同：0
> 
> 时间：2012-05-19T23:32:31.170
> 
> 标签：actionscript-3, mesh, light, away3d

我从awayd3D开始，在4.0beta版本上没有找到解决方案，我可以向你求助。

我在互联网上做了很多研究，希望找到关于灯光使用的解释，但很少有与每个版本 3 相关的解释。

我意识到这个场景（http://goupix.com/test/）。您可以使用 WASD 键或箭头键来移动。

为了实现这个场景，我有几个文件： Exploration.as：创建场景、相机和灯光。光：

```
PointLight light = new ();
light.x = -2000;
light.y = 1000;
light.z = -1000;
light.color 0xffeeaa = / / Here, select the new color of the light source
view.scene.addChild (light); 
```

ClassGeneratemap.as：使用为我的装饰生成的表 ClassGenerateobjet.as：由 ClassGeneratemap 调用并将元素放置在场景中

```
public function onAssetComplete(event:AssetEvent):void {
    if ( event.asset.assetType == AssetType.MESH && event.asset.assetNamespace == token ) {
        AssetLibrary.removeEventListener(AssetEvent.ASSET_COMPLETE, onAssetComplete);               
        trace("position : " + posX + " : " + posY );
        mesh = event.asset as Mesh;
        mesh.geometry.scale(1);
        mesh.x = -posX * instData.scale;
        mesh.z = posY * instData.scale;
        mesh.castsShadows = true ;
        //trace("position : " + mesh.x + " : " + mesh.z );
        instExploration.scene.addChild( mesh );
    }//End If
}//End onAssetComplete 
```

我真的不知道如何使用我放置的灯。我不知道这是否确实是一种正确的光。

我希望你能帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:50:50.447

从 Away3d 的 GitHub 中提取示例会有所帮助。

[https://github.com/away3d/away3d-examples-fp11](https://github.com/away3d/away3d-examples-fp11)

```
 /**
     * Initialize the lights
     */
    private function initLights():void
    {
        moonLight = new DirectionalLight();
        moonLight.position = new Vector3D(3500, 4500, 10000); // Appear to come from the moon in the sky box.
        moonLight.lookAt(new Vector3D(0, 0, 0));
        moonLight.diffuse = 0.5;
        moonLight.specular = 0.25;
        moonLight.color = 0xFFFFFF;
        scene.addChild(moonLight);

        cameraLight = new PointLight();
        cameraLight.diffuse = 0.25;
        cameraLight.specular = 0.25;
        cameraLight.color = 0xFFFFFF;
        cameraLight.radius = 1000;
        cameraLight.fallOff = 2000;
        scene.addChild(cameraLight);

        skyLight = new DirectionalLight();
        skyLight.diffuse = 0.1;
        skyLight.specular = 0.1;
        skyLight.color = 0xFFFFFF;
        scene.addChild(skyLight);

        lightPicker = new StaticLightPicker([moonLight, cameraLight, skyLight]);

        //create a global fog method
        fogMethod = new FogMethod(0, 200000, 0x000000);
    }

    private function createTreeShadow(x:Number, z:Number):void
    {
        // Paint on the terrain's shadow blend layer
        var matrix:Matrix = new Matrix();
        var dx:Number = (x/terrainWidth + 0.5)*512 - 8;
        var dy:Number = (-z/terrainDepth + 0.5)*512 - 8;
        matrix.translate(dx, dy);
        var treeShadowBitmapData = new BitmapData(16, 16, false, 0x0000FF);
        treeShadowBitmapData.draw(createGradientSprite(16, 16, 0, 1), matrix);
        blendBitmapData.draw(treeShadowBitmapData, matrix, null, BlendMode.ADD);

        // Update the terrain.
        blendTexture.bitmapData = blendBitmapData; // TODO: invalidation routine not active for blending texture
    }

    /**
     * Initialize the material
     */
    private function initMaterials():void
    {
        //create skybox texture
        cubeTexture = new BitmapCubeTexture(new EnvPosX().bitmapData, new EnvNegX().bitmapData, new EnvPosY().bitmapData, new EnvNegY().bitmapData, new EnvPosZ().bitmapData, new EnvNegZ().bitmapData);

        //create tree material
        trunkMaterial = new TextureMaterial(new BitmapTexture(new TrunkDiffuse().bitmapData));
        trunkMaterial.normalMap = new BitmapTexture(new TrunkNormals().bitmapData);
        trunkMaterial.specularMap = new BitmapTexture(new TrunkSpecular().bitmapData);
        trunkMaterial.diffuseMethod = new BasicDiffuseMethod();
        trunkMaterial.specularMethod = new BasicSpecularMethod();
        trunkMaterial.addMethod(fogMethod);
        trunkMaterial.lightPicker = lightPicker;

        //create leaf material
        leafMaterial = new TextureMaterial(new BitmapTexture(new LeafDiffuse().bitmapData));
        leafMaterial.addMethod(fogMethod);
        leafMaterial.lightPicker = lightPicker;

        //create height map
        heightMapData = new BitmapData(512, 512, false, 0x0);
        heightMapData.perlinNoise(200, 200, 4, uint(1000*Math.random()), false, true, 7, true);
        heightMapData.draw(createGradientSprite(512, 512, 1, 0));

        //create terrain diffuse method
        blendBitmapData = heightMapData.clone();
        blendBitmapData.threshold(blendBitmapData, blendBitmapData.rect, destPoint, ">", 0x444444, 0xFF00FF00, 0xFFFFFF, true);
        blendBitmapData.colorTransform(blendBitmapData.rect, new ColorTransform(1, 1, 1, 1, 255, 0, 0, 0));
        blendBitmapData.applyFilter(blendBitmapData, blendBitmapData.rect, destPoint, new BlurFilter(16, 16, 3));
        blendTexture = new BitmapTexture(blendBitmapData);
        terrainMethod = new TerrainDiffuseMethod([new BitmapTexture(new Grass().bitmapData), new BitmapTexture(new Rock().bitmapData), new BitmapTexture(new BitmapData(512, 512, false, 0x000000))], blendTexture, [1, 20, 20, 1]);

        //create terrain material
        terrainMaterial = new TextureMaterial(new BitmapTexture(heightMapData));
        terrainMaterial.diffuseMethod = terrainMethod;
        terrainMaterial.addMethod(new FogMethod(0, 200000, 0x000000)); //TODO: global fog method affects splats when updated
        terrainMaterial.lightPicker = lightPicker;
    } 
```

# android - Android中的自定义按钮

> ID：10669621
> 
> 赞同：-2
> 
> 时间：2012-05-19T23:32:46.337
> 
> 标签：android

Android 中的默认按钮具有圆形边缘和大量填充，因此当按钮和背景颜色不同时，可以在边缘周围看到背景。我想制作自己的自定义按钮，这些按钮具有：

1.  方角
2.  边缘没有填充
3.  锋利的边缘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:53:27.493

在 Photoshop 中绘制一个具有锐利边缘和方角的按钮，将其另存为 .PNG。导航到`/android-sdk/tools/draw9patch.bat`.PNG 并将其转换为 9-patch 图像。导入您的项目并将其设置为按钮背景。有关更多信息，请参阅[Android 上的 9-Patch](http://developer.android.com/guide/developing/tools/draw9patch.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:54:01.663

只需将您想要的背景设置为 ButtonView。

# 3d - Three.js 学习顶点、向量和矩阵

> ID：10669622
> 
> 赞同：0
> 
> 时间：2012-05-19T23:32:50.033
> 
> 标签：3d, three.js

我对 Three.js 的 3D JavaScript 库非常熟悉，我知道如何添加对象、灯光、纹理，对它们进行分组并稍微移动它们，也许还可以玩弄相机。

我想知道的是如何通过了解内部运作将其提升到一个新的水平。我已经很好地查看了有关矩阵之类的信息，但我发现的只是复杂的数学示例。

我想知道是否有人可以将我指向任何可以帮助我学习如何在three.js中做更复杂的事情的网站或书籍，例如将对象添加到对象上的特定顶点，或者如何找到边缘一个球体并让另一个球体围绕它滚动。

然后使用向量，我可以学习如何让对象以特定方式移动吗？我愿意付出努力，但我不知道我应该阅读什么以及与这种类型的图书馆相关的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T06:56:11.970

研究计算机图形学[的线性代数](https://www.google.co.uk/search?aq=1&oq=linear%20algebra%20for%20comp&sugexp=chrome,mod=10&sourceid=chrome&ie=UTF-8&q=linear%20algebra%20for%20computer%20graphics)。有很多资源可供选择。试着找到更接近你背景的东西。如果数学不是您背景的一部分，没问题，请转向更多与游戏开发相关的领域。

我个人推荐[3D Math Primer](http://gamemath.com/about-the-book/)，因为它是由经验丰富的游戏开发人员以易于理解的方式编写的。使用数字从一维数羊开始，就是这么简单！这本书详细解释了向量、矩阵、四元数等概念背后的数学（线性代数、几何）和代码。本书使用 C++，但如果您已经熟悉 javascript，理解语法将相当简单。重点是熟悉这些概念，因为 three.js 已经实现了向量、矩阵、四元数等。这是了解它们的作用，尤其是如何使用它们的问题。

如果有帮助，您还可以查看[可汗学院关于线性代数的资源](http://www.khanacademy.org/math/linear-algebra)（例如[向量](http://www.youtube.com/watch?feature=player_embedded&v=5cWB52I-SF0#t=460svectors)、[矩阵](http://www.khanacademy.org/math/linear-algebra/v/introduction-to-matrices)等，但数学方面的重点越来越少地放在计算机图形方面。[游戏学院的数学教程](http://www.gameinstitute.com/package.php#programming-math)很棒，但是不幸的是不是免费的。

从基础开始：什么是向量，什么是典型的向量运算（使用叉积得到 2 个向量之间的垂线，使用点积得到两个向量之间的角度等），然后从那里找到自己的步调。矩阵可能看起来很可怕，但在你理解了向量之后，它们会变得更有意义。

由于three.js 已经提供了很多功能，您可以阅读数学知识并直接在three.js 中尝试——边做边学。

只是为了补充一点，mr.doob 添加了一个链接，指向一个非常酷（且免费）的[交互式 3D 图形](http://www.udacity.com/overview/Course/cs291/)课程，该课程在 three.js 中教授，涵盖向量和矩阵。我热烈推荐它，它的解释非常好，而且很容易理解。

![交互式 3D 图形 Udacity 课程](../Images/762c906b07f2c963f0991c26bcfe7670.png)

# javascript - jQuery平滑滚动外部锚链接

> ID：10669625
> 
> 赞同：0
> 
> 时间：2012-05-19T23:33:52.387
> 
> 标签：javascript, jquery, web

好的，你能帮我一些jquery代码吗？这就是我想要发生的事情。我的网站就是cyberfanatic.com。因此，例如让我们现在只使用页脚。我有一个带有页脚 id 的标签。所以说如果有人现在访问cyberfanatic.com/#footer，页面将加载，然后直接跳转到页面底部到带有页脚的锚链接所在的位置。我怎样才能得到它，以便当页面 cyberfanatic.com#footer 加载页面加载并且平滑滚动到具有页脚 id 的锚点时。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:37:42.120

使用`scrollTo()` [插件](http://demos.flesler.com/jquery/scrollTo/)功能

```
$.scrollTo("#footerid"); 
```

# javascript - 如何在咖啡脚本中编写文字 jQuery 对象

> ID：10669627
> 
> 赞同：1
> 
> 时间：2012-05-19T23:34:25.553
> 
> 标签：javascript, jquery, coffeescript

我正在尝试将一些代码转换为咖啡脚本，但遇到了问题：

```
var $el = $('<span/>', {
    class : 'myclass',
    click : function () {
        var $this = $(this)
        if (foo) { // radio & check
            baz($this)
        }else{
            bla($this)
        }
    }
}); 
```

我在咖啡中这样写道：

```
$el = $('<span/>',
  class: 'myclass'
  click: ->
    $this = $(this)
    if foo
      baz $this
    else
      bla $this
) 
```

哪个工作得很好，但我真的不喜欢最后一个括号，有没有什么办法可以在没有括号的情况下编写这段代码，只是缩进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T23:59:41.190

如果你去掉两个括号，效果很好。

```
$el = $ "<span/>",
  class: "myclass"
  click: ->
    $this = $(this)
    if foo
      baz $this
    else
      bla $this 
```

另见：http: [//js2coffee.org/](http://js2coffee.org/)

# wordpress - Wordpress 页面编辑器挂钩？

> ID：10669629
> 
> 赞同：0
> 
> 时间：2012-05-19T23:35:11.593
> 
> 标签：wordpress, hook

我想知道 wordpress 是否有一个钩子可以让我编辑页面编辑器的这一部分（在“添加新”按钮附近的顶部）？

![wordpress 页面编辑器](../Images/034ef6a784c27157252578069316f596.png)

# .htaccess - htaccess，url重写

> ID：10669634
> 
> 赞同：0
> 
> 时间：2012-05-19T23:36:02.033
> 
> 标签：.htaccess

任何人都可以帮我重写上面的链接，我制作了自定义脚本，但现在重写这个有问题，我用这样的东西启动 htaccess ......

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^/]*)$ /index.php?page=$1 [L]
RewriteRule ^([^/]*)$ /index.php?query=$1 [L]
RewriteRule ^([^/]*)/([^/]*)$ /index.php?query=$1&page=$2 [L] 
```

但这不起作用，我有服务器错误 500 ...

这是我需要重写的..

```
http://site.com/index.php?page=1 ==> http://site.com/1
http://site.com/index.php?type=news&page=1 ==> http://site.com/news/1
http://site.com/index.php?query=searching ==> http://site.com/searching 
http://site.com/index.php?query=searching&page=1  ==> http://site.com/searching/1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:00:36.777

试试这些——我认为你有从前的规则：

[http://site.com/1](http://site.com/1)执行[http://site.com/index.php?page=1](http://site.com/index.php?page=1)

```
RewriteRule ^([0-9]+) /index.php?page=$1 [L] 
```

[http://site.com/news/1](http://site.com/news/1)执行[http://site.com/index.php?type=news&page=1](http://site.com/index.php?type=news&page=1)

```
RewriteRule ^news/([0-9]+) /index.php?type=news&page=$1 [L] 
```

[http://site.com/searching](http://site.com/searching)执行[http://site.com/index.php?query=searching](http://site.com/index.php?query=searching)

```
RewriteRule ^searching/?$ /index.php?query=searching [L] 
```

[http://site.com/searching/1](http://site.com/searching/1)执行[http://site.com/index.php?query=searching&page=1](http://site.com/index.php?query=searching&page=1)

```
RewriteRule ^searching/([0-9]+)$ /index.php?query=searching&page=$1 [L] 
```

# parsing - 如何在 C# 中解析 Xml 文本？

> ID：10669635
> 
> 赞同：1
> 
> 时间：2012-05-19T23:36:02.527
> 
> 标签：parsing, xml-parsing

我在 Hml 中有这段代码

并且 ai 需要在列中打印：html body font color=blue size=3 input type=text name=name maxlength=8 br font size=2

在这里阅读其他问题我做了这个：

```
 var doc = XDocument.Parse("<html><body><font color='blue' size='3'>
    Enter your name</font><input type='text' name='name' maxlength='8'/>
    <br/><font size='2'>Maximum 8 characters</font></body></html>");

    foreach (var item in doc.Descendants().Select(n => n.Name))
    {
        Console.WriteLine(item);
    }       
     Console.ReadKey(); 
```

但这仅打印名称（Html、正文、字体、输入、br 和字体）。

我的问题是如何打印其他内容？

# php - 通过 include() 插入代码会回显内容

> ID：10669636
> 
> 赞同：0
> 
> 时间：2012-05-19T23:36:30.437
> 
> 标签：php

`include()`我对（以及所有相关）函数的行为有点困惑。如果我有一个文件`library.php`，其中包含一些代码（在我的例子中是一个数组）：

```
<?php
$exampleArray = array(
    "Item1" => "Item 1 description",
    "Item2" => "Item 2 description"
);
?> 
```

并且我希望能够在另一个文件 ( `index.php`) 中访问该数组，然后在`index.php`我需要做的`require_once('library.php');`. 如果我没有 PHP 标记，则会回显代码。但是，[PHP网站上的这条评论](http://www.php.net/manual/en/function.include.php#103011)暗示，无论是否包含标签，如果包含文件的标题被修改，内容都会被回显。

1.  这是正确的吗？如果我将要包含的文件更改为`library.txt`，但仍有 PHP 标记，则内容不会回显（尽管我意识到`text/plain`在这两种情况下内容类型仍然几乎可以肯定）
2.  评论还说“只需要一个错误的字符就可以向世界上的每个人展示这些信息。” - 他指的是哪个错误的角色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:42:29.503

那么为什么不把它和`<?php`标签一起保存呢？到目前为止，我已经测试过，没有标签的任何东西都不会被解析为 PHP。IIRC，PHP 标记中的任何内容都会被 PHP 解析，因此您需要 PHP 的这些标记来解析包含文件中的内容。

```
<?php
require_once("test.txt");
echo $exampleArray["Item1"];
?> 
```

没有`<?php`标签返回

```
$exampleArray = array( "Item1" => "Item 1 description", "Item2" => "Item 2 description" ); 
```

如果我使用`require_once("test.php");`, 文件中没有`<?php`标签仍然会给我未解析的内容。

所以你需要标签才能让它工作。

[http://meowman.sytes.net/so/incfile/tag.php](http://meowman.sytes.net/so/incfile/tag.php)和[http://meowman.sytes.net/so/incfile/test.php](http://meowman.sytes.net/so/incfile/test.php)显示包含文件有标签时的回声。

[http://meowman.sytes.net/so/incfile/notag.php](http://meowman.sytes.net/so/incfile/notag.php)和[http://meowman.sytes.net/so/incfile/testno.php](http://meowman.sytes.net/so/incfile/testno.php)显示包含文件没有标签时的回声。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:43:59.637

总是 - 是的，总是在要包含的 PHP 文件中使用开始标签。（虽然不一定需要关闭标签）。

如果您不使用 php 开始标签，则内容也将对仅通过 HTTP 请求文件的用户可见，因此用户可以看到源代码，因为代码实际上并未由 PHP 解释器解析，而是只是作为纯文本回显。

# c# - 如何从脚本访问和使用 Scripting.FileSystemObject#

> ID：10669637
> 
> 赞同：2
> 
> 时间：2012-05-19T23:37:00.700
> 
> 标签：c#, scripting, script#, activexobject, filesystemobject

我需要访问文件信息，例如文件大小。

我可以创建 ActiveXObject：

ActiveXObject fileSystem = new ActiveXObject("Scripting.FileSystemObject");

但是现在，我应该如何访问 FileSystemObject 的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:23:44.830

查看 Script.Windows.dll 程序集 - 已创建导入库 - 并与 Script# 一起提供。

另请查看 Script Gadget 项目模板 - 它包含一些与 Script.Windows.dll 密切相关的引导程序脚本......基本上是一个脚本友好的包装器，用于执行等效于 new ActiveXObject("Scripting.FileSystemObject") .

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:40:32.570

您需要创建一个导入库来定义 Scripting.FileSystemObject 类可用的方法。

# java - Java-如何使用抽象类

> ID：10669638
> 
> 赞同：2
> 
> 时间：2012-05-19T23:37:13.680
> 
> 标签：java, class, abstract

所以我在学习java中的抽象类，当我阅读其他人的代码时，我看到了以下内容：

```
public abstract class Message implements Serializable, Comparable<Message> {
    //stuff in this class
} 
```

在同一个项目下的另一个类中，程序员声明了一个方法如下：

```
public void notifyMessage(Message msg, HostType sourceType) {
    //some stuff in this method
} 
```

请注意，在 notifyMessage 声明中，变量 msg 的类型为“Message”。我以为所有抽象类都不能实例化？那么声明“Message msg”是什么意思呢？有人可以解释这对我意味着什么吗？提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T23:40:29.973

那么这意味着你可以接收任何类型的消息（子）对象，让我们换一种方式，如果你有

```
public class Letter extends Message ... 
```

您可以发送一个 Letter 对象作为 notifyMessage 的参数

这样的事情是可能的：

```
someObject.notifyMessage(  new Letter() , ... ) 
```

java.awt.Component 是抽象 JPanel 继承 Container（实际上是 JComponent 先） Container 有 add(Component c)

这意味着您可以添加任何组件，例如 JButton、JLabel 等。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Container.html#add(java.awt.Component)](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Container.html#add(java.awt.Component)) [http://docs.oracle.com/javase/1.4。 2/docs/api/java/awt/Component.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html)

如果您定义抽象方法和该对象的主体，您也可以创建抽象类的对象。

```
 Message m = new Message() {
        //if no abstract method, then this is empty
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T23:45:19.757

基本上，`msg`的实际类是 Message 类型的派生类，但它的引用类型是 message 的，即它是多态的。如果您有多个消息子类，但不确定方法中将引用哪个子类，则使用此选项。代码是

> 消息消息 = 新的 SubclassOfMessage()

但确实你不能有一个新的 Message 对象

# iphone - 从另一个 uiviewcontroller 将字符串分配给 UILabel

> ID：10669641
> 
> 赞同：0
> 
> 时间：2012-05-19T23:37:33.590
> 
> 标签：iphone, ios, xcode, uiviewcontroller, nsstring

我有两个视图控制器，在调用第二个 VC 之前，我为其分配了一些参数，如下所示：

```
 Results *resultsViewController = [[Results alloc] initWithNibName:nil bundle:nil];
    resultsViewController.tempBarcode = barcode;
    resultsViewController.address = useraddress;
    resultsViewController.key = keyAccess;
    resultsViewController.product.text = tempProduct; 
```

问题是最后一个（产品）不起作用。唯一的区别是“产品”是一个 UILabel，而其余的都是 NSStrings。

我试图避免在我的第二个 VC 中为每个 UILabel 创建另一个 NSString（因为我将来会有更多）。

我在这里做错了什么，如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:28:56.233

您的问题是 IBOutlets 在加载视图之前未初始化。因此，当您分配文本时，尚未创建标签。您需要先推动它并让它加载。

因此，您要么需要创建临时变量来存储文本，然后在 viewDidLoad 中设置标签，要么需要在 viewDidLoad 上回调父视图控制器（使用委托方法）让父视图控制器设置标签。

# magento - Magento 1.6 自定义选项不更新价格

> ID：10669642
> 
> 赞同：1
> 
> 时间：2012-05-19T23:37:41.043
> 
> 标签：magento, magento-1.6

Magento 网站不会根据添加的自定义选项更新价格。

由于自定义主题，我已经缩小了范围，尽管我基本上复制并完全改变了空白主题。我比较了主题、view.phtml、价格等，看不到任何遗漏的问题。

我检查了每个主题调用的 javascript 文件的每个主题，并确保它们都是相同的 JS 文件，

功能 - 自定义选项都在调用 onchange="opConfig.reloadPrice()" 这是常态，但我该如何追踪这个错误？调试或代码检查器中没有错误出现！

还搜索了许多论坛，在这里 - 类似但没有解决方案......所以希望如果我们能解决这个问题，它将帮助其他人解决同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:35:44.510

我想通了，在模板中，我删除了 view.phtml 中的最高价格，而 magento 显然已设置为将其放置在那里，以使用更新价格的功能。

听起来很明显，但是有两个价格框，一个在顶部，一个在底部，我删除了顶部价格变量/div，而不是用 css 隐藏它。

隐藏在 CSS 和 Wallah 中，它再次更新价格并正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T11:47:13.203

要更改自定义选项值，您应该更改为 js/varient/product.js

在你找到的那个页面中， reload:function()

在 on change 事件时调用该函数。

祝你好运

# php - 多表选择查询错误

> ID：10669646
> 
> 赞同：0
> 
> 时间：2012-05-19T23:38:01.300
> 
> 标签：php, mysql, html

我在输出我网站的邮件垃圾部分时遇到了一些麻烦，原因是我试图在一个选择查询中从两个不同的表中获取数据，我知道这很容易做到，但出于某种原因，每当我尝试我不断收到错误

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\Arken\mail.php on line 285 
```

这里是选择的代码的顶部（语句中拆分的原因是为了使用分页）

```
$trash_statement = "user_inbox, user_outbox WHERE (user_inbox.receiver_user_id='$user_id' AND user_inbox.mail_deleted ='1') OR WHERE (user_outbox.sender_user_id='$user_id' AND user_outbox.mail_deleted ='1')"; 
```

这是页面主要部分的代码

```
<?php 
      $query = mysql_query("SELECT * FROM {$trash_statement} LIMIT {$startpoint} , {$limit}");

      while($row = mysql_fetch_assoc($query)) : ?> 
```

之后就是用于显示记录的 php/html。

关于可能导致问题的任何想法，我已经尝试了一切。

谢谢

编辑：好的，我在 sql 中再次尝试过，我得到了正确的结果，应该是 user_inbox 中的 3 和 user_outbox 中的 2，但是，这是出于某种原因复制结果，所以对于 user_inbox，我得到了3 条记录两次，从 user_outbox 我得到 2 条记录 3 次，这意味着我得到 12 个结果，而我应该只得到 5 个。这是新查询有什么想法吗？`SELECT * FROM user_inbox, user_outbox WHERE user_inbox.receiver_user_id='4' AND user_inbox.mail_deleted ='1' AND user_outbox.sender_user_id='4' AND user_outbox.mail_deleted ='1'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:16:07.763

你正在做 a[`cross join`](http://dev.mysql.com/doc/refman/5.1/en/join.html)而不是 a [`union`](http://dev.mysql.com/doc/refman/5.1/en/union.html)。

使用一种`cross join`方法，您可以获得与您的`where`条件匹配的收件箱/发件箱记录的每个组合的一个结果。由于您有 2 个收件箱匹配项和 3 个发件箱匹配项，因此您将获得 6 个结果（其中每个结果包含一个收件箱结果和一个发件箱结果）。如果您在收件箱中删除了某些内容，但在发件箱中没有删除，那么即使您删除了一次，您的查询也不会得到任何结果。

*更新*

根据我链接的文档，联合声明看起来像

```
(SELECT a FROM t1 WHERE a=10 AND B=1)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2)
ORDER BY a LIMIT 10; 
```

由于我不知道你的表结构，所以我不能给你一个确切的查询。您可能需要包含一个标志，以便您知道数据是来自收件箱表还是发件箱表。就像是：

```
(SELECT 0 AS inoutFlg, receiver_user_id AS user_id, mail_deleted
 FROM user_inbox
 WHERE receiver_user_id = '4' and mail_deleted = 1)
UNION ALL
(SELECT 1 AS inoutFlg, sender_user_id AS user_id, mail_deleted
 FROM user_outbox
 WHERE sender_user_id = '4' and mail_deleted = 1)
LIMIT {$startpoint} , {$limit} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:53:00.367

检查 mysql_error() 怎么样？或者只是使用 phpMyAdmin 对数据库手动运行 mysql 查询？

```
$error = mysql_error();
if(!empty($error)){ echo 'errno: ' . mysql_errno() . ' msg: ' . $error; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T23:43:40.807

我认为你错过了一步。你所要做的：

```
$query = "whatever query";
$result = mysql_query($query);
while($row = mysql_fetch_array($result)){
    //whatever you want to do here...
    //$row['column name'] is the format of the data that you'd be getting
} 
```

每次都对我有用。希望有帮助！

# extjs - 从另一个控制器调用控制器的功能/在控制器之间共享数据

> ID：10669647
> 
> 赞同：10
> 
> 时间：2012-05-19T23:38:25.223
> 
> 标签：extjs, sencha-touch-2

目前，当我在一个控制器中并且我想从另一个控制器调用一个函数时，我这样做：

```
App.app.getControllerInstances()['App.controller.OtherController'].do_something(); 
```

对我来说似乎有点沉重，是否有另一种（更好的）方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-20T09:21:57.033

我会使用 getController 方法：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-getController](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-getController)

例如：`this.getApplication().getController('ControllerName').doSomething();`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-25T20:34:36.083

如果您不在控制器的上下文中（例如在某个对象的回调函数中），您可以这样做。

```
MyAppName.app.getController('ControllerName').doSomething(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-17T19:23:25.850

在 Sencha Touch 2 中使用 MVC 约定时，当尝试从“ControllerA”内部调用“ControllerB”中名为“SomeMethodInB”的方法时，我会推荐以下内容：

> MyAppName.app.getController('ControllerB')。

“MyAppName”是您在核心应用定义中定义的应用的名称 - 通常在您的 app.js 文件中。

根据 Sencha 论坛，以下是折旧的：

> this.getApplication().getController('ControllerB').SomeMethodInB();

[http://www.sencha.com/forum/showthread.php?158996](http://www.sencha.com/forum/showthread.php?158996)

事实上，我可以调用“this.getApplication()”方法甚至工作的唯一方法是从我的应用程序定义文件 (app.js) 中调用它。

# ios - 将 iOS Facebook Auth 凭据推送到 Web 视图

> ID：10669649
> 
> 赞同：2
> 
> 时间：2012-05-19T23:39:23.577
> 
> 标签：ios

是否有可能/如何将 Facebook iOS sdk 身份验证凭据传递给 Web 视图（用于 PHP sdk）。

facebook 应用程序可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:58:04.933

您可以对 webview 执行 javascript，作为使用 stringByEvaluatingJavaScriptFromString 方法将值设置到其中的一种方式。

[http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW21](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW21)

# django - django forms - 用于根据输入更改字段类型的重写构造函数

> ID：10669651
> 
> 赞同：1
> 
> 时间：2012-05-19T23:39:32.203
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我需要重写表单的构造函数：如果我在输入中有一些值，则某些字段必须是 ChoiceField，否则它们必须是 CharField。这是代码：

```
class AnagraficaForm(forms.Form):

    usertype = ((1,'Privato'),(0,'Libero professionista/Azienda'))
    nome = forms.CharField(max_length=100)
    cognome = forms.CharField(max_length=100)
    telefono = forms.CharField(max_length=50,required=False)
    email= forms.EmailField(max_length=100,required=False)
    indirizzo = forms.CharField(max_length=100)
    nazione = forms.ChoiceField(choices = util.get_countries_tuple_list())
    provincia = forms.CharField(max_length=100)
    citta = forms.CharField(max_length=100)
    cap = forms.CharField(max_length=10)
    codfisc = ITSocialSecurityNumberField(required=False)
    piva = ITVatNumberField(required=False)
    ragsociale = forms.CharField(max_length=100,required=False)
    is_privato = forms.TypedChoiceField(
        initial=1,
        coerce=lambda x: bool(int(x)),
        choices=usertype,
        #using custom renderer to display radio buttons on the same line
        widget=forms.RadioSelect(renderer=HorizRadioRenderer, attrs={"id":"is_privato"})
    )

    def __init__(self, country_name = 'ITALIA', region_name = 'MILANO', city_name = 'MILANO', zipcode = '', *args, **kwargs):
        if country_name != 'ITALIA':
            print 'in if'
            self.nazione = forms.ChoiceField(choices = util.get_countries_tuple_list())
            self.provincia = forms.CharField(max_length=100, initial = region_name)
            self.citta = forms.CharField(max_length=100, initial = city_name)
            self.cap = forms.CharField(max_length=10, initial = zipcode)
            kw = {'initial':{'nazione': util.get_country_id(country_name)}}
            kw.update(kwargs)
            return super(AnagraficaForm, self).__init__(*args, **kw)
        else:
            print 'in else'
            self.nazione = forms.ChoiceField(choices = util.get_countries_tuple_list())
            self.provincia = forms.ChoiceField(choices = util.get_regions_tuple_list(util.get_country_id(country_name)))
            self.citta = forms.ChoiceField(choices = util.get_cities_tuple_list(util.get_country_id(country_name), util.get_region_code(region_name)))
            self.cap = forms.ChoiceField(choices = util.get_zips_tuple_list(util.get_country_id(country_name), util.get_region_code(region_name), city_name))
            initial = {
                        'nazione' : 'IT',
                        'provincia' : util.get_region_code(region_name),
                        'citta' : util.get_region_from_cityname(city_name),
                        'cap' : util.get_city_id(zipcode)
                      }
            kw = {'initial': initial}
            kw.update(kwargs)
            return super(AnagraficaForm, self).__init__(*args, **kw) 
```

但这种方式行不通。即使我在字段之前声明为 CharField 然后在**init**中覆盖它们，它们也不会在模板中呈现（我收到此消息：）。

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:02:21.203

您应该`self.fields[name]`在表单创建之后进行操作，而不是`self.field`在它之前进行操作。例如，而不是：

```
self.nazione = forms.ChoiceField(choices = util.get_countries_tuple_list())
super(AnagraficaForm, self).__init__(*args, **kw) 
```

应该有（顺便说一句，`__init__`应该什么都不返回）：

```
super(AnagraficaForm, self).__init__(*args, **kw)
self.fields['nazione'] = forms.ChoiceField(choices = util.get_countries_tuple_list()) 
```

或者，如果两个字段的类型相同，只需修改必要的属性：

```
self.fields['nazione'].choices = util.get_countries_tuple_list() 
```

# oauth - 如何使用 Gnome 密钥环存储 OAuth 凭据

> ID：10669656
> 
> 赞同：2
> 
> 时间：2012-05-19T23:42:25.300
> 
> 标签：oauth, vala, gnome-keyring-daemon

我正在尝试构建一个简单的 Vala/Gtk Twitter 应用程序，并且我已经成功地发送了推文；但是，用户每次都必须进行身份验证，这需要访问 URL、单击以授予我的应用程序发布权限、复制 PIN 并将所述 PIN 粘贴到我的应用程序中。对于每条推文。

我想将此身份验证信息存储在 GNOME 密钥环中；但是，我对 OAuth 几乎一无所知，对 Keyring 也一无所知。

如何将 OAuth 数据存储到 Gnome 密钥环中？我会接受任何语言的答案，但 Vala 的答案将获得奖励积分。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:07:15.520

您可以使用通过 Dbus 协议与“秘密服务”通信的*libsecret库。*

首先，您需要定义一个密码模式，稍后将用于令牌存储/提取。

瓦拉示例：

```
var example_schema = new Secret.Schema ("org.yor_schema.name",Secret,SchemaFlags.NONE,
    "number", Secret.SchemaAttributeType.INTEGER,
    "string", Secret.SchemaAttributeType.STRING); 
```

现在你应该存储你的令牌：

```
var attributes = new GLib.HashTable<string,string> ();
attributes["number"] = "18";
attributes["string"] = "Hello";

Secret.password_storev.begin(example_schema,attributes,Secret.COLLECTION_DFAULT,
    "Label","Token",null,(obj,async_res) => {
        bool res = Secret.password_store.end(async_res);
        /* Password has been stored - do something ... */
}); 
```

要提取存储的令牌：

```
var attributes = new GLib.HashTable<string,string> ();
attributes["number"] = "18";
attributes["string"] = "Hello";

Secret.password_lookupv.begin(example_schema,attributes,null,(obj,async_res) => {
    String token = Secret.password_lookup.end(async_res);
}); 
```

包名叫做`libsecret-1`.

要编译，请将以下标志添加到您的 makefile 中。

```
AM_VALAFLAGS = \
    --pkg=libsecret-1 
```

# vim - 标签和书呆子树

> ID：10669661
> 
> 赞同：0
> 
> 时间：2012-05-19T23:42:43.083
> 
> 标签：vim, vi, nerdtree

我正在寻找一种方法：

*   在所有打开的选项卡中保留 NerdTree 或
*   在新选项卡中打开文件，同时保持对 NERDTree 的关注

我尝试了多种方法。例如使用

```
autocmd TabEnter * NERDTreeToggle 
```

这变得相当混乱。该选项卡将在右侧打开 NERDTree。如果我专注于另一个选项卡并返回新选项卡，它会在右侧打开第三个拆分，NERDTree 正确。

我也试图`T`在打开文件时简单地使用。焦点不会更改为新文件，但是 NERDTree 消失了，我留在了“无名称”选项卡中。

有人在这里有一个简洁的解决方案吗？

更新：

将 NERDTree 重置为 HEAD -`T`打开时开始工作

我仍然非常希望在所有选项卡左侧默认保持 NERDTree 打开的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T06:36:48.937

我前段时间看过[这个项目。](https://github.com/jistr/vim-nerdtree-tabs)我从来没有尝试过，因为我对那个功能不感兴趣，也许其他人有？

但是你应该停止尝试使用 Vim，就好像它是 Gedit 或 TextMate 或任何其他你习惯的编辑器一样。Vim 中的选项卡与其他编辑器中的选项卡完全不同：您不能将它们视为特定文件的 1:1“代理”，因为它们可以包含任意数量的“文件”并且它们的名称可以更改很多种方法。

相反，了解“缓冲区”和“窗口”。

# c++ - WINAPI ReadProcessMemory 总是相同的地址

> ID：10669664
> 
> 赞同：3
> 
> 时间：2012-05-19T23:43:16.437
> 
> 标签：c++, winapi, readprocessmemory, object-address

我使用 WINAPI 函数从进程（地址：0x58F03C）中读取了一些数据`ReadProcessMemory`：

```
DWORD proc_id;
GetWindowThreadProcessId(hwnd, &proc_id);
HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, proc_id);
int value=0;

while (1)
{
    ReadProcessMemory(hProcess, (LPVOID)0x58F03C, &value, sizeof(value), 0);
    cout << "val: " << value << endl;
} 
```

由于每次重新启动进程时地址都会更改，我想知道是否有办法始终获得相同的地址？必须有一个，因为我看到很多能够做到这一点的“培训师计划”。他们如何获得正确的地址值来读取/写入？

目前，我通过使用 扫描一个值来获得它，`CheatEngine`并执行下一次扫描以查找更改的值。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:42:47.520

您遇到动态内存分配。在 CheatEngine 世界中，这些被称为“指针”。

考虑内存中的一些数据（例如`uint32_t`/ ）是'd。如果找到数据的地址，则无法保证下次启动进程时，地址会相同。这是因为返回的内存可能基于内存中的不同点。`DWORD``malloc``malloc`

用于阻止动态内存分配的技巧是找到一个静态堆地址，它可以引导您找到您感兴趣的值的地址。CheatEngine 教程向您展示了这是如何完成的。这同样适用于多级指针。在更高的层次上，这对应于动态分配的内存，其中包含指向其他一些动态分配的内存的指针，依此类推。

CheatEngine 中用于获取指针的方法大致如下：

*   在你感兴趣的数据值的地址处设置访问硬件断点
*   当代码访问它时，硬件断点会显示代码的样子

代码通常如下所示：

```
mov eax, 0x1234ABCD 
dec dword ptr ds:[eax+0x85] 
```

这可能对应于一些代码，当被敌人击中时会减少你的 HP。在这种情况下，0x1234ABCD 是指针，而 0x85 是偏移量。在 C 代码中，这可能会发生：

```
struct some_struct* blah = malloc(...);
...
blah->HP--; 
```

0x1234ABCD 将是`blah`. HP 值位于 所指向的块内的某个位置`blah`。到内存块的偏移量是 0x85。然后，如果您正在编写一个训练器，您将读取 0x1234ABCD 处的`DWORD`（`QWORD`如果是 64 位）并将 0x85 添加到该值。这将为您提供 HP 值的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:23:06.933

如果地址位于预分配变量所在的数据部分的可执行文件部分中（不适合堆和堆栈），这将起作用......

查看 MSDN 上的[“枚举进程的所有模块”示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682621%28v=vs.85%29.aspx)。

它使用[EnumProcessModules()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682631%28v=vs.85%29.aspx)来获取模块句柄。这些是图像基址。

您可以获取可执行文件的映像基地址并通过它调整您的地址。

# python - Pythonic 插入字符的方法

> ID：10669665
> 
> 赞同：2
> 
> 时间：2012-05-19T23:43:39.623
> 
> 标签：python, string

我有两个转换案例：

```
s = "foo bar" #-> "foo bar &"
s = "foo ! bar" # -> "foo & ! bar" -> notice not '&!' 
```

我是这样做的：

```
t = s.split("!", 1)
t[0] = t[0] + "  &"
" !".join(t) 
```

什么是更蟒蛇的方式来做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:54:17.150

不确定这是否更 Pythonic，但上面的示例可以作为单行来完成。

```
>>> s = "foo ! bar"
>>> s = s.replace(' ! ', ' & ! ') if '!' in s else s + ' &'
>>> s
'foo & ! bar' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T00:37:07.730

`str.partition`为运算符解析而构建：

```
p = s.partition(' !')
print p[0]+' &'+p[1]+p[2] 
```

适应从左到右解析时的前缀和中缀运算符。它始终返回一个 3 元组的事实允许即使在找不到您的运算符时也可以使用它并对结果应用操作，如上所示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T00:16:34.740

```
>>> import re
>>> re.sub(r'( !|$)', r' &\1', 'foo bar', 1)
'foo bar &'
>>> re.sub(r'( !|$)', r' &\1', 'foo ! bar', 1)
'foo & ! bar' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T23:57:05.343

在一行中做多个句子：

```
>>> s = ["foo bar", "foo ! bar"]
>>> [x + ' &' if not '!' in x else x.replace('!','& !', 1) for x in s]
['foo bar &', 'foo & ! bar'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T00:15:20.467

```
s1 = "foo bar"
s2 = "foo ! bar"

import re

print re.sub(r'^([^!]+)( |$)', r'\1 &\2', s1) # foo bar &
print re.sub(r'^([^!]+)( |$)', r'\1 &\2', s2) # foo & ! bar 
```

# javascript - jQuery将所有属性作为字符串变体

> ID：10669668
> 
> 赞同：1
> 
> 时间：2012-05-19T23:44:09.140
> 
> 标签：javascript, jquery, html, string

我有一些简单的 html 有点像这样

```
<a href="" data-type="" data-id="" data-tags="" id="" class="">balrbalr</a> 
```

我希望能够以`<a>`字符串的形式获取完整内容。

我知道你可以`.html`用来获取内部 html，但是如果我使用

```
var string = $('a').html(); 
```

如果会回来，`balrblabrlabr`

如果我做`string = $('a').parent.html();`

我会把所有的`<a>`' 都放在父母里面。

我将如何获取自身的完整 html 内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T23:51:40.197

您可以使用`outerHTML`DOM 元素的原生 javascript 属性：

```
var string = $('a')[0].outerHTML; 
```

**[现场演示](http://jsfiddle.net/GZXpV/)**

> 元素 DOM 接口的 outerHTML 属性获取描述元素（包括其后代）的序列化 HTML 片段。它可以设置为用从给定字符串解析的节点替换元素。

[**MDN**](https://developer.mozilla.org/en/DOM/element.outerHTML)

* * *

如果您希望获取多个元素的 outerHTML，可以使用 jQuery`map`函数，如下例所示：

```
var str = $('#foo a').map(function() {
    return this.outerHTML;
}).get(); 
```

[**现场演示**](http://jsfiddle.net/GZXpV/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:08:53.887

将元素的 id 设置为“a”并使用此函数

```
 function msg() {
        var attrib="";
        var el =document.getElementById('a');
        for (var i = 0; i < el.attributes.length; i++) {
            attrib = attrib + ' ' + el.attributes.item(i).nodeName + ' = "' + el.attributes.item(i).nodeValue + '"';
        }
        alert(attrib);
    } 
```

# delphi - 从调用重写过程的通用类类型继承的对象列表？

> ID：10669671
> 
> 赞同：5
> 
> 时间：2012-05-19T23:44:49.833
> 
> 标签：delphi, list, opengl, inheritance, delphi-xe2

我正在构建一个自定义 OpenGL 控件，它包含一个项目列表，其中每个项目可能是一个不同的类，但继承自某个公共类类型。我不知道如何以一种可以循环遍历这些项目并执行某些操作的方式来执行此操作，这些操作预计将在继承的类中被覆盖。

更具体地说，这是要绘制到画布上的视觉对象列表。我有一个通用类`TGLItem`，用于创建许多继承类。例如，`TGLCar`继承自`TGLItem`并添加到列表中`TGLItems`。此自定义列表类是控件的一部分。

当控件绘制时，它会循环遍历这个项目列表并调用`Draw`每个项目的过程。`Draw`旨在被实际绘制项目的继承类覆盖。所以真正的工作是从类`Draw`中实现的过程中完成的，`TGLCar`但它只能从主控件中调用。

主控件 ( `TGLImage`) 不知道实际继承的项目是什么，但能够调用它的`Draw`过程，期望它绘制到 OpenGL。

如何以适应这种情况的方式构建此项目列表和项目库？这是我到目前为止所拥有的：

```
 TGLItems = class(TPersistent)
  private
    FItems: TList;
    function GetItem(Index: Integer): TGLItem;
    procedure SetItem(Index: Integer; const Value: TGLItem);
  public
    constructor Create;
    destructor Destroy; override;
    procedure Add(AItem: TGLItem);
    function Count: Integer;
    property Items[Index: Integer]: TGLItem read GetItem write SetItem; default;
  end;

  TGLItem = class(TPersistent)
  private
    FPosition: TGLPosition;
    FDimensions: TGLDimensions;
    FOwner: TGLItems;
    FItemClass: TGLItemClass;
    procedure PositionChanged(Sender: TObject);
    procedure DimensionsChanged(Sender: TObject);
    procedure SetPosition(const Value: TGLPosition);
    procedure SetDimensions(const Value: TGLDimensions);
  public
    constructor Create(Owner: TGLItems);
    destructor Destroy; override;
    procedure Draw;
    property Owner: TGLItems read FOwner;
    property ItemClass: TGLItemClass read FItemClass;
  published
    property Position: TGLPosition read FPosition write SetPosition;
    property Dimensions: TGLDimensions read FDimensions write SetDimensions;
  end; 
```

执行...

```
{ TGLItem }

constructor TGLItem.Create;
begin
  FPosition:= TGLPosition.Create;
  FPosition.OnChange:= PositionChanged;
  FDimensions:= TGLDimensions.Create;
  FDimensions.OnChange:= DimensionsChanged;
end;

destructor TGLItem.Destroy;
begin
  FPosition.Free;
  FDimensions.Free;
  inherited;
end;

procedure TGLItem.DimensionsChanged(Sender: TObject);
begin

end;

procedure TGLItem.Draw;
begin
  //Draw to gl scene

end;

procedure TGLItem.PositionChanged(Sender: TObject);
begin

end;

procedure TGLItem.SetDimensions(const Value: TGLDimensions);
begin
  FDimensions.Assign(Value);
end;

procedure TGLItem.SetPosition(const Value: TGLPosition);
begin
  FPosition.Assign(Value);
end;

{ TGLItems }

procedure TGLItems.Add(AItem: TGLItem);
begin
  FItems.Add(AItem);
  //Expects objects to be created and maintained elsewhere
  //This list object will not create/destroy any items
end;

function TGLItems.Count: Integer;
begin
  Result:= FItems.Count;
end;

constructor TGLItems.Create;
begin
  FItems:= TList.Create;
end;

destructor TGLItems.Destroy;
begin
  FItems.Free;
  inherited;
end;

function TGLItems.GetItem(Index: Integer): TGLItem;
begin
  Result:= TGLItem(FItems[Index]);
end;

procedure TGLItems.SetItem(Index: Integer; const Value: TGLItem);
begin
  TGLItem(FItems[Index]).Assign(Value);
end; 
```

它的 OpenGL 部分在这种情况下不一定相关，我只是想解释一下它的目的是什么，以便了解我期望它如何工作。

我也有将`TGLItems`列表对象传递给其构造函数中的每个单独项目的想法，并让每个项目在项目列表中注册其自身。在这种情况下，项目列表将没有任何添加过程，我什至可能不需要单独的列表对象。我只是确定应该有一些我缺少的大技巧，并且我愿意对结构进行任何大规模更改以更有效地适应这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T01:21:38.970

这是[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)的经典用法。根据[XE2 文档](http://docwiki.embarcadero.com/RADStudio/en/Polymorphic_Classes_Index)（C++，但适用于此处）：

> 多态类：提供相同接口但可以实现以满足不同特定需求的类称为多态类。如果一个类声明或继承了至少一个虚拟（或纯虚拟）函数，则它是多态的。

这是一个完全完成您想要做的事情的例子。它创建了一个基类型 ( )，其中包含每个后代必须实现`TBase`的抽象虚拟方法 ( )，以及两个独立的后代类型 ( and )，每个都实现自己的方法。`Draw``TChildOne``TChildTwo``Draw`

声明了一个数组`TBase`，有 10 个项目（见`NumChildren`常量）和`SetLength(BaseArray, NumChildren)`行。遍历数组，如果当前索引为奇数，则创建一个子类型实例；如果是偶数，则创建另一个子类型。

然后再次反向迭代数组，并`TBase.Draw`调用泛型。该代码根据`Draw`调用的类类型输出不同的行前缀。请注意，对每个数组项的`Draw`调用只是调用`TBase.Draw`（不检查该索引处的数组中的类型），但是`Draw`根据在数组中找到的类型，调用不同类型的特定方法那个索引。

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils;  // XE2: uses System.SysUtils;

type
  TBase = class(TObject)
    procedure Draw(const Msg: string); virtual; abstract;
  end;

  TChildOne = class(TBase)
    procedure Draw(const Msg: string); override;
  end;

  TChildTwo = class(TBase)
    procedure Draw(const Msg: string); override;
  end;

  TBaseArray = array of TBase;

procedure TChildOne.Draw(const Msg: string);
begin
  // Hard-coded for clarity. Change to something like this
  // to see without hard-coded name
  // WriteLn(Self.ClassName + '.Draw: ', Msg);
  Writeln('Type TChildOne.Draw: ', Msg);
end;

procedure TChildTwo.Draw(const Msg: string);
begin
  // Note missing 'T' before class type to make more apparent.
  // See note in TChildOne.Draw about removing hard-coded classname
  WriteLn('Type ChildTwo.Draw: ', Msg);
end;

var
  BaseArray: TBaseArray;
  i: Integer;

const
  NumChildren = 10;

begin
  SetLength(BaseArray, NumChildren);

  for i := 0 to NumChildren - 1 do
  begin
    if Odd(i) then
      BaseArray[i] := TChildOne.Create
    else
      BaseArray[i] := TChildTwo.Create;
  end;

  for i := NumChildren - 1 downto 0 do
    BaseArray[i].Draw('This is index ' + IntToStr(i));
  Readln;

end. 
```

控制台窗口的输出如下所示：

![在此处输入图像描述](../Images/79ac79ce2f2ad85fb55c9b142ccbdef5.png)

# c - 保存当前的读取位置，以便稍后查找

> ID：10669673
> 
> 赞同：4
> 
> 时间：2012-05-19T23:45:13.380
> 
> 标签：c, io, scanf

我有一个程序可以读取具有已知结构的文本文件。

例如，我在文件的每一行上有两个整数和一个字符串。

当我`fscanf`在循环中使用时，我可以重新获得`n`上面提到的结构。如何获取数据文件中的当前位置，以便将其存储在某个位置，然后从我之前离开的位置继续读取我的文本文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T00:05:08.487

使用 ftell() 函数。它将返回文件中的偏移量。

```
unsigned long position = ftell(file); 
```

但是，对于文本文件，知道 ftell() 可以报告错误的位置非常重要，除非内部缓冲区已被清除。去做这个，

```
unsigned long position;
fflush(file);
position = ftell(file); 
```

稍后，您可以使用 fseek

```
fseek(file,position,SEEK_SET); 
```

ftell() 告诉使用较早文件开头的偏移量。在这里，您使用 SEEK_SET 来指示您传递的位置是从文件的开头开始的。

编辑：理查德问 fflush() 做什么。当您读取或写入文件时，C 库几乎总是保留信息的缓冲区。“刷新”该缓冲区是将其写入磁盘，以保存任何更改。由于允许 C 库处理文本文件的方式，这个缓冲区可能会导致 ftell() 报告错误的位置，除非缓冲区被刷新。这就是 fflush() 所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T23:50:41.123

使用[ftell](http://www.cplusplus.com/reference/clibrary/cstdio/ftell/)存储文件的位置[fseek](http://www.cplusplus.com/reference/clibrary/cstdio/fseek/)以便稍后返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T23:56:30.680

`ftell`使用和的过程很简单`fseek`。查看示例代码

```
int i, int1, int2;
FILE *file;
char *str1;

...
// read 10 lines
for(i=0; i<10; i++){
   fscanf(file, "%d %d %s", int1, int2, str1);
}

// save the position;
pos = ftell(file);

// close the file
fclose(file)

...
// later go to that same location after opening the same file
fseek(file, pos, 0);

// continue reading
fscanf(file, "%d %d %s", int1, int2, str1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-25T02:26:14.067

`fflush`在读取记录之前`ftell`先获取文件位置，然后搞砸下一个记录。在我的应用程序中，just `ftell`and later`fseek`正在为我工​​作。

我的错误是尝试使用`fsetpos`而不是`fseek`. 前者的论点很奇怪，通过强制`ftell`输出到它导致我的应用程序立即退出（不是错误，但显然是我没想到这么快的 EOF）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T23:50:43.510

如果我理解正确，您正在寻找[ftell](http://www.cplusplus.com/reference/clibrary/cstdio/ftell/)功能

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-02T20:48:54.547

`ftell()`返回一个 long，这对于小文件是可以的。

对于较长的文件，我使用`uint64_t pos = lseek(fd, 0, SEEK_CUR)`, 因为`lftell()`似乎不存在。

# c# - 不一致的可访问性 2

> ID：10669674
> 
> 赞同：1
> 
> 时间：2012-05-19T23:45:18.707
> 
> 标签：c#, mysql, winforms

我一直在寻找类似的问题，并查看了大多数类似的问题，但没有一个答案是有用的......

我收到此错误：

> 可访问性不一致：参数类型“FinalProject.MySQL”比方法“FinalProject.Form2.Form2(FinalProject.MySQL)”更难访问

```
namespace FinalProject
{
    public partial class Form2 : Form
    {
        MySqlConnection c;
        public Form2(MySqlConnection connection) //this is the line of the error.
        {
            InitializeComponent();
            c = connection;
        }

        private void okBtn_Click(object sender, EventArgs e)
        {
            if (c.State == ConnectionState.Open)
            {
                textBox1.Text += "conection open";
            }
        }
    }
}

namespace FinalProject
{
    public class MySQL
    {
        public MySqlConnection connection;
        private string server;
        private string port;
        private string database;
        private string uid;
        private string password;

        //Constructor
        public MySQL()
        {
            Initialize();
        }

        //Initialize values
        private void Initialize()
        {
      .
      .
      . 
```

我试图将“公共”修饰符放在我能想到的所有东西上……不走运:)))

# php - 将 java 脚本添加到 Wordpress 子主题的最佳实践？

> ID：10669676
> 
> 赞同：-1
> 
> 时间：2012-05-19T23:45:31.647
> 
> 标签：php, javascript, wordpress, wordpress-theming

我正在尝试找到一种方法将一些 java 脚本添加到我的 wordpress 子主题中，但我不确定这样做的最佳实践。

我已将 header.php 文件复制到我的子主题中，但假设我想添加 google ant 代码。有些人建议将其添加到顶部，而其他人则建议在页脚中添加。Facebook 代码和其他各种代码也是如此。

有人告诉我最好的做法是使用插件将代码放入，其他人说使用子主题。然后其他人说放在页眉中，其他人说放在页脚中。

这最终让我感到困惑。有人介意给我一些反馈吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:06:10.530

我很高兴你回答了你的最后一个问题，瑞克。你总是可以用 jQuery 和 ajax 调用来做这样的事情，这样当页面加载时，它会从外部文件中提取你的代码并加载它。在这种情况下，您不必编辑模板，但您必须添加到您的 javascript 文件中。

查看[http://api.jquery.com/prependTo/](http://api.jquery.com/prependTo/)

# python - 包括 Python/Django 所需的

> ID：10669677
> 
> 赞同：0
> 
> 时间：2012-05-19T23:46:02.910
> 
> 标签：python, django, include

首先，让我先说我对 Python 和 Django 都是全新的。我想使用我已经知道、喜欢和喜欢的语言，可惜框架根本不存在。归根结底，我不是“pythonista”。

无论如何，我在 Django 教程的前几页，并且正在创建数据模型。我立即看到该示例对模型中的字符字段的最大长度等内容进行了硬编码。这是我根本不会做的事情，因为这些信息不仅会经常更改并且在许多地方都需要，而且当我用另一种编程语言编写后端应用程序时也会使用它。

关键问题是，我不会将 python 用于后端。我将使用另一种语言。该语言的程序将需要访问诸如字符字段的最大长度之类的内容。

在我使用的任何其他语言中，这都是一件简单的事情。我只是在一个名为 MAXLENGTH 的文件中粘贴了类似最大长度的内容，并将该文件包含在我需要的任何地方。如果最大长度需要改变（它会改变），我会在一个地方改变它。然后在所有其他地方更改它，无论使用什么其他语言。

我需要 Python/Django 中的这种功能，或者以最少的麻烦达到类似效果的东西。我确实找到了一个 import 语句，但它似乎并没有完全符合我的要求（它似乎导入了 Python 代码，但我不能在这里使用纯 Python 的解决方案）。

请注意，我不太可能接受涉及大量复杂类声明的异国情调、复杂的解决方案等等。这是一个简单的问题，我需要一个简单的解决方案。

另外，我会接受 Python 或 Django 中的解决方案（如果 Django 在这方面有一些特殊能力）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:38:29.380

**django中的常用方式**

我相信这是最接近你所要求的。您在 django 中创建的任何应用程序都可以在 django 中设置自定义设置以`settings.py`供用户配置。这允许轻松分发。在这里阅读：
[https ://docs.djangoproject.com/en/1.4/topics/settings/#creating-your-own-settings](https://docs.djangoproject.com/en/1.4/topics/settings/#creating-your-own-settings)

您设置默认值，并记录它们。然后用户可以在`settings.py`项目中重载它们以自定义值。

**django 中不太常见的方式，但从一般编程的角度来看可能很常见**

就“幻数”而言，我认为数据库字段属性并不是真正的幻数。它通常是特定于模型设计的，但如果你真的不想使用 settings.py，而你想要的只是一个常量模块，那么只需执行以下操作：

*常量.py*

```
MODEL1_FIELD1_MAXLENGTH = 100 
```

*模型.py*

```
import constants

a = CharField(max_length=constants.MODEL1_FIELD1_MAXLENGTH) 
```

但老实说，我不经常看到这种情况发生。该值通常与设计紧密耦合，并对将使用该模型的其他代码产生影响，例如格式化情况等。它有点像允许最终用户为内部缓冲区设置任意值。它可能会影响期望合理缓冲区的代码，因为它是设计决策的一部分。但我确实从一般的角度理解常量的概念。在这个特定的框架中，在这个特定的领域，它并不常见。

从技术上讲，您可以为配置文件使用 JSON 等通用格式，但您必须决定如何以及何时解码。在 django 中，模块会被加载一次，并在 django 实例的整个生命周期内保持加载状态。这可能是您从 settings.py 初始化的内容，以确保操作顺序。

*配置文件*

```
{
    "MAX_LENGTH": 100
} 
```

*常量.py*

```
import json

CONSTANTS = {}
CONSTANTS_FILE = "config.json"

def initConstants():
    global CONSTANTS_FILE
    with open(CONSTANTS_FILE) as f:
        CONSTANTS_FILE = json.load(f)
        print CONSTANTS_FILE
        # {"MAX_LENGTH": 100} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:06:48.763

除了评论，通过 jdi，您需要将 max_length 属性添加到 CharField，但您可以做的是：

在 models.py 或任何其他“通用”文件的顶部添加一个属性说：

```
MAX_LENGTH=100 
```

然后，导入 Commpn.py

```
a = CharField(max_length=Common.MAX_LENGTH, ....) 
```

希望这可以帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T02:01:16.300

这不是火箭科学。

创建一个常量文件，比如 constants.txt。以易于解析的格式将名称/值对放入该文件中。例如名称：值。用您选择的语言编写一个小程序（Python 非常适合）。该程序读取 constants.txt，然后为您将使用的每种语言写出一个适当的文件（如 constants.py、constants.h 等）

例如，如果 constants.txt 包含“MODEL1_FIELD1_MAX_LENGTH: 20”条目，则 constants.h 可以包含“#define MODEL1_FIELD1_MAX_LENGTH 20”形式的条目，但 constants.py 将包含“MODEL1_FIELD1_MAX_LENGTH=20”形式的条目'。你得到图片。

现在，只要更改了 constants.txt，就可以将这个小程序作为项目构建过程的一部分自动运行。

你去 - 你的常量保存在一个文件中，但始终同步并可用于你使用的任何语言。

# java - 使用 buildr 编译期间的 jar 插件

> ID：10669682
> 
> 赞同：0
> 
> 时间：2012-05-19T23:49:12.390
> 
> 标签：java, ruby, jar, buildr

我有一个需要运行其插件的 java 项目，每个插件的类文件都位于 com/digitaltea/splat/plugins/ 下的单独目录中。我目前使用休闲代码来构建它们，但它仅在 jar 位于 PATH 中时才有效。如何在不使用系统的情况下 jar 文件？

```
task :compile do
  chdir(_(:target, :main, :classes)){
    mkdir_p "plugins"
    Dir["com/digitaltea/splat/plugins/*"].each do |file|
      if File.directory?(file)
        system "jar cf #{_(:target, :main, :classes)}/plugins/#{File.basename(file)}.jar #{file}"
        rm_r file
      end
    end
    system "jar cf plugins/CorePlugin.jar com/digitaltea/splat/core"
  }
end 
```

# ios - 为什么在使用情节提要时反复调用 AwakeFromNib？

> ID：10669688
> 
> 赞同：0
> 
> 时间：2012-05-19T23:50:13.723
> 
> 标签：ios, xamarin.ios, awakefromnib

我有一个故事板应用程序。当第一个视图在启动时加载时，我有这段代码来实例化我的主后台线程，并且一切正常。

```
 public override void AwakeFromNib()
    {
        base.AwakeFromNib();
        // Perform one-time initialization in this function

        // Create and start the main worker thread
        MainBackgroundThread = new Thread(new ThreadStart(MainLoop.RunWorker));
        MainBackgroundThread.Start();
    } 
```

但是，当用户转到不同的视图然后通过 segue 返回到第一个视图时，将再次调用 AwakeFromNib()。我以为它只应该被调用一次......我在哪里启动我的主后台线程，所以它只启动一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:52:16.823

`AwakeFromNib`每次从情节提要/segue 加载该视图的新实例时都会调用它。如果您在情节提要中进行转场，则应该期望`AwakeFromNib`每次都被调用，因为您实际上是从 nib 对象创建视图的新实例。如果要启动后台线程，可以尝试以下操作：

```
public override void AwakeFromNib()
{
    static NSThread * thread;

    base.AwakeFromNib();
    // Perform one-time initialization in this function

    // Create and start the main worker thread
    if(!thread)
    { 
         thread = new Thread(new ThreadStart(MainLoop.RunWorker));
    }

    MainBackgroundThread = thread;
    MainBackgroundThread.Start();
} 
```

# java - 为什么 ScheduledExecutorService.shutdown() 使用 100% 的 CPU？

> ID：10669692
> 
> 赞同：9
> 
> 时间：2012-05-19T23:50:41.440
> 
> 标签：java, linux, concurrency, executor, busy-waiting

我有以下简单的代码：

```
package main;

import java.util.concurrent.*;

public class Main {

    public static void main(String[] args) throws InterruptedException {
        new Main();
    }

    public Main() throws InterruptedException {
        ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
        executor.schedule(new MyRunnable(), 10, TimeUnit.SECONDS);
        System.out.println("Shutting down...");
        executor.shutdown();
        System.out.println("Awaiting termination...");
        executor.awaitTermination(Long.MAX_VALUE, TimeUnit.MINUTES);
        System.out.println("Main finished!");
    }

    private class MyRunnable implements Runnable {
        public void run() {
            System.out.println("Finished running!");
        }
    }

} 
```

实际上，虽然我的真实代码比这要复杂一些，但我可以在这些行中隔离问题。代码基本上是等待10秒运行runnable然后通知主程序结束。

但是，我注意到在 10 秒内，我的一个核心以 100% 的速度使用。

如果我评论这一行：

```
executor.awaitTermination(Long.MAX_VALUE, TimeUnit.MINUTES); 
```

cpu 核心也以 100% 使用，并且主程序在 Runnable 之前完成。

如果我评论这一行：

```
executor.shutdown(); 
```

cpu 使用正确，但程序无法完成。

如果我评论前两行，则 cpu 使用正确，但主程序不会完成。

1.  我的代码有问题吗？
2.  是`executor.shutdown();` 在做某种忙碌的等待，而不是仅仅禁止提交新任务吗？
3.  或者我应该责怪JVM？

附加细节：

```
$ java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) Server VM (build 20.1-b02, mixed mode)

$ uname -a
Linux XPSG 2.6.32-5-686-bigmem #1 SMP Sun May 6 04:39:05 UTC 2012 i686 GNU/Linux 
```

PS：请不要让我使用`CountDownLatch`nor `newSingleThreadScheduledExecutor`。这与我要问的问题无关。谢谢。

**编辑：**

这是java转储：

```
Full thread dump Java HotSpot(TM) Server VM (20.1-b02 mixed mode):

"pool-1-thread-1" prio=10 tid=0x08780c00 nid=0x32ee runnable [0x6fdcc000]
   java.lang.Thread.State: RUNNABLE
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:943)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
    at java.lang.Thread.run(Thread.java:662)

"Low Memory Detector" daemon prio=10 tid=0x0874dc00 nid=0x32ec runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x0874c000 nid=0x32eb waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x0874a000 nid=0x32ea waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x08748800 nid=0x32e9 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x0873a000 nid=0x32e8 in Object.wait() [0x70360000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x9e8f1150> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x9e8f1150> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x08735400 nid=0x32e7 in Object.wait() [0x703b1000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x9e8f1050> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <0x9e8f1050> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x086b5c00 nid=0x32e3 waiting on condition [0xb6927000]
   java.lang.Thread.State: TIMED_WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x9e958998> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
    at java.util.concurrent.ThreadPoolExecutor.awaitTermination(ThreadPoolExecutor.java:1253)
    at main.Main.<init>(Main.java:19)
    at main.Main.main(Main.java:10)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)

"VM Thread" prio=10 tid=0x08731800 nid=0x32e6 runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x086bd000 nid=0x32e4 runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x086be400 nid=0x32e5 runnable 

"VM Periodic Task Thread" prio=10 tid=0x0874fc00 nid=0x32ed waiting on condition 

JNI global references: 931

Heap
 PSYoungGen      total 18752K, used 645K [0x9e8f0000, 0x9fdd0000, 0xb3790000)
  eden space 16128K, 4% used [0x9e8f0000,0x9e991510,0x9f8b0000)
  from space 2624K, 0% used [0x9fb40000,0x9fb40000,0x9fdd0000)
  to   space 2624K, 0% used [0x9f8b0000,0x9f8b0000,0x9fb40000)
 PSOldGen        total 42880K, used 0K [0x74b90000, 0x77570000, 0x9e8f0000)
  object space 42880K, 0% used [0x74b90000,0x74b90000,0x77570000)
 PSPermGen       total 16384K, used 2216K [0x70b90000, 0x71b90000, 0x74b90000)
  object space 16384K, 13% used [0x70b90000,0x70dba198,0x71b90000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:00:16.073

它实际上是在忙着等待。ThreadPoolExecutor 似乎没有退避逻辑来等待所有任务完成（**请注意**，这只发生在您`shutdown()`否则它将正确挂起线程时）。

它会不断检查任务是否已准备好执行，如果尚未准备好执行，它将再次尝试，直到经过了要调度的任务的经过时间。

关闭计划的线程池需要权衡（这种权衡是由实现强加的）。它是忙于旋转，直到任务准备好调度或`shutdownNow`没有队列任务将被执行。但是，您可以获取 Runnable 返回的列表并自己执行它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T01:26:28.467

这是一个特定于平台的问题。当我在我的机器上运行你的测试程序时，在 10 秒的关机时间内 CPU 使用率大约为零……根据我机器的 CPU 使用率监控。

```
$ java -version
java version "1.7.0_03"
Java(TM) SE Runtime Environment (build 1.7.0_03-b04)
Java HotSpot(TM) Client VM (build 22.1-b02, mixed mode, sharing) 
```

我粗略地搜索了 Java 错误数据库，但没有任何相关信息出现。

查看网上（Google）上可以找到的不同版本的源代码，很明显，getTask 方法和朋友在（早期）Java 1.6 和（当前）Java 1.7 之间做了很多工作.

我建议您尝试将 JVM 升级到最新的 Java 1.6 或 Java 1.7。或者至少为您的测试程序尝试一下。（或者只是忍受它。这几乎不是表演的终结者......）

* * *

仅供参考，[此页面](https://help.ubuntu.com/community/Java)包含有关如何在 Ubuntu 上安装各种 Java 版本的说明。

*   一种选择（对于 Java 7）是使用“duinsoft”安装程序，这是一个从 Oracle 站点拉取安装程序的脚本。他们甚至设置了一个 deb 存储库来托管安装程序。

*   另一种选择是安装 11.10 存储库中的 openjdk-7-jdk 或 openjdk-7-jre 软件包。

当您在该地区时，不要忘记投票给这个 RFE 以[提供 Java 7 的 debian 包/安装程序。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7108196)

根据记录，这种混乱主要是由于 Oracle[撤销了 OEM 再分发许可，](http://www.omgubuntu.co.uk/2011/12/java-to-be-removed-from-ubuntu-uninstalled-from-user-machines/)这意味着必须撤销“sun-java-6”包。当然，Oracle 不提供 DEB 的“小问题”。

# asp.net-mvc - MS MVC 基本应用程序在注册后批准用户

> ID：10669698
> 
> 赞同：0
> 
> 时间：2012-05-19T23:51:14.000
> 
> 标签：asp.net-mvc, login-control

我正在处理用户注册。我默认使用项目中使用的基本注册。问题是注册后的用户可以访问网站的受保护部分。是否类似于内置功能以批准新注册用户？

我找到这篇文章：[http ://www.4guysfromrolla.com/articles/062508-1.aspx](http://www.4guysfromrolla.com/articles/062508-1.aspx)

“好消息是配置 CreateUserWizard 控件以使新帐户处于非活动状态是小菜一碟 - 只需将控件的 DisableCreatedUser 属性设置为 True” [我认为，注册用户将未被批准，直到管理员在网站管理工具中批准它， 正确的？]

但我找不到 DisableCreatedUser 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:59:10.020

我建议您使用 `[Authorize(Roles="Role1,Role2")]` [http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx) 将具有特定角色的用户限制为某些操作或控制器。就我个人而言，我不使用字符串，而是将 Enum 传递给 Roles="" 并且您可以这样做使您自己的 MyAuthorizeAttribute 派生自`AuthorizeAttribute` 要批准用户以某种方式激活他，请向他发送一封激活电子邮件，批准他手动将数据库中的 IsActive 设置为真的什么的。也不要使用默认的 Membership 数据库，自己创建并从 MembershipProvider [http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)和 RoleProvider [http 派生您的成员资格和角色类： //msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx).

# c - 有没有办法自动释放所有内存而不是执行大量的 free() 函数？

> ID：10669699
> 
> 赞同：0
> 
> 时间：2012-05-19T23:51:22.190
> 
> 标签：c

我只是想知道是否有一种方法可以在程序中一次释放所有内存，而不是执行大量的 free() 函数，如下所示；

```
free(somevariable); 
```

这不是一个真正的问题，但如果程序包含许多变量，如果有一种包罗万象的方法可以在最后释放所有内存，或者提供超过一次一个变量释放（），如下所示，我会发现这非常有帮助，谢谢！

```
free(var1,var2,var3) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T00:23:46.660

`free()`每次调用 都需要调用`malloc()`。

这并不*一定*意味着`malloc()`源代码中的每个调用都需要有相应的`free()`调用；必须匹配的是运行时的调用，而不是源代码中的调用。但通常源调用会匹配。

我还应该注意，并不是绝对需要`free()`ing all ed 内存。`malloc()`当您的程序终止时，所有分配的内存都将返回给操作系统。（C 标准不保证这一点，但您可能使用的任何操作系统都可以做到这一点。）但是自己清理是一个好习惯。例如，一个程序可以成为一个更大的程序的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:01:36.477

这里：

```
#include <stdlib.h>
#include <stdarg.h>

void vfree(int count, ...) {
        va_list ap;
        int i;

        va_start(ap, count);

        for (i=0; i<count; i++) {
                void *ptr;
                ptr = va_arg(ap, void *);
                printf("arg %d = %p\n", i, ptr);
                free(ptr);
        }

        va_end(ap);
} 
```

像这样称呼它：

```
vfree(3, ptr1, ptr2, ptr3); 
```

也就是说，给它一个指针计数，然后是指针列表，它会在所有指针上调用 free。

注意：这是一个糟糕的想法和糟糕的实现，你不应该使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:23:03.210

如果您的编译器支持`__VA_ARGS__`（gcc 支持并且最新的 Visual C++ 应该支持），那么您可以执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>

#define FREE(...) \
  { \
    void* pointers[] = { __VA_ARGS__ }; \
    size_t i; \
    for (i = 0; i < sizeof(pointers) / sizeof(pointers[0]); i++) \
      printf("freeing %p\n", pointers[i]); \
      free(pointers[i]); \
  }

int main(void)
{
  void *p1 = malloc(1), *p2 = malloc(2), *p3 = malloc(3);
  printf("p1=%p, p2=%p, p3=%p\n", p1, p2, p3);
  FREE(p1, p2, p3);
  return 0;
} 
```

输出：

```
p1=005E17C0, p2=005E17E0, p3=005E17F0
freeing 005E17C0
freeing 005E17E0
freeing 005E17F0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T04:07:34.067

你应该停下来想一想你要的是什么。这没有意义。如果您的唯一目标是在退出前调用“freeall”，那是没有用的；终止程序将导致其整个内存空间（包括 malloc 进行的所有分配）不复存在。另一方面，如果您想在程序终止之前的某个其他时间“释放所有”，那么您刚刚违反了所有可能链接到您的程序的第三方代码，方法是在其背后释放内存（它怎么会知道您的代码会释放它的内存吗？）

话虽如此，有一些类似于你想要的东西，它确实有效：talloc：

[http://talloc.samba.org/talloc/doc/html/index.html](http://talloc.samba.org/talloc/doc/html/index.html)

talloc 的想法是您可以创建相关内存分配的上下文，并通过一次调用talloc_free 将它们全部释放。它不仅非常方便，而且还简化了分配/释放逻辑，并且应该减少由于不正确释放（双重释放、泄漏等）而导致的错误发生率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T00:52:54.863

您需要一个[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来处理数据结构的内存管理。

编辑：-感谢 Oli ，刚刚意识到它是一个纯 C 问题。智能指针是一种 C++ 结构。

在 C 语言中，你必须为你所做的每一个显式分配基本上都有一个空闲。

# java-me - 如何在 J2ME 中添加按钮？

> ID：10669700
> 
> 赞同：2
> 
> 时间：2012-05-19T23:51:29.570
> 
> 标签：java-me, midp, lcdui

我想知道，如何在表单中添加按钮？

下面是我的代码

```
 form = new Form("ePolicia Transgressor Accuse");
        tb = new TextField("Complaint Id: ", "", 30, TextField.ANY);
        form.append(tb);
        ticker = new Ticker("Creating Safer City for You");
        form.addCommand(submitCommand);
        form.addCommand(exitCommand);
        form.setCommandListener(this);
        form.setTicker(ticker);
        display.setCurrent(form); 
```

现在，我想在表单中添加一个按钮，我可以使用它。

注意：我不是在询问退出、提交等软按钮。我想添加我自己的按钮。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T16:05:33.737

我使用 Netbeans 和 Visual Midlet 为您创建了以下演示代码，希望它对您的代码有所帮助，

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package hello;

import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;

/**
 * @author 
 */
public class HelloMIDlet extends MIDlet implements CommandListener, ItemCommandListener {

    private boolean midletPaused = false;

    //<editor-fold defaultstate="collapsed" desc=" Generated Fields ">                      
    private Command exitCommand;
    private Command okCommand;
    private Command exitCommand1;
    private Form form;
    private StringItem lblUserName;
    private TextField txtUserName;
    private StringItem lblPassword;
    private TextField txtPassword;
    private StringItem lblBlankSpace;
    private StringItem cmdOK;
    private StringItem stringItem;
    //</editor-fold>                    

    /**
     * The HelloMIDlet constructor.
     */
    public HelloMIDlet() {
    }

    //<editor-fold defaultstate="collapsed" desc=" Generated Methods ">                       
    //</editor-fold>                     

    //<editor-fold defaultstate="collapsed" desc=" Generated Method: initialize ">                                           
    /**
     * Initilizes the application.
     * It is called only once when the MIDlet is started. The method is called before the <code>startMIDlet</code> method.
     */
    private void initialize() {                                         
        // write pre-initialize user code here

        // write post-initialize user code here
    }                            
    //</editor-fold>                          

    //<editor-fold defaultstate="collapsed" desc=" Generated Method: startMIDlet ">                                        
    /**
     * Performs an action assigned to the Mobile Device - MIDlet Started point.
     */
    public void startMIDlet() {                                      
        // write pre-action user code here
        switchDisplayable(null, getForm());                                        
        // write post-action user code here
    }                             
    //</editor-fold>                           

    //<editor-fold defaultstate="collapsed" desc=" Generated Method: resumeMIDlet ">                                         
    /**
     * Performs an action assigned to the Mobile Device - MIDlet Resumed point.
     */
    public void resumeMIDlet() {                                       
        // write pre-action user code here

        // write post-action user code here
    }                              
    //</editor-fold>                            

    //<editor-fold defaultstate="collapsed" desc=" Generated Method: switchDisplayable ">                                              
    /**
     * Switches a current displayable in a display. The <code>display</code> instance is taken from <code>getDisplay</code> method. This method is used by all actions in the design for switching displayable.
     * @param alert the Alert which is temporarily set to the display; if <code>null</code>, then <code>nextDisplayable</code> is set immediately
     * @param nextDisplayable the Displayable to be set
     */
    public void switchDisplayable(Alert alert, Displayable nextDisplayable) {                                            
        // write pre-switch user code here
        Display display = getDisplay();                                               
        if (alert == null) {
            display.setCurrent(nextDisplayable);
        } else {
            display.setCurrent(alert, nextDisplayable);
        }                                             
        // write post-switch user code here
    }                                   
    //</editor-fold>                                 

    //<editor-fold defaultstate="collapsed" desc=" Generated Method: commandAction for Displayables ">                                                 
    /**
     * Called by a system to indicated that a command has been invoked on a particular displayable.
     * @param command the Command that was invoked
     * @param displayable the Displayable where the command was invoked
     */
    public void commandAction(Command command, Displayable displayable) {                                               
        // write pre-action user code here
        if (displayable == form) {                                           
            if (command == exitCommand) {                                         
                // write pre-action user code here
                exitMIDlet();                                           
                // write post-action user code here
            }                                                  
        }                                                
        // write post-action user code here
    }                               
    //</editor-fold>                             

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: exitCommand ">                                   
    /**
     * Returns an initiliazed instance of exitCommand component.
     * @return the initialized component instance
     */
    public Command getExitCommand() {
        if (exitCommand == null) {                                 
            // write pre-init user code here
            exitCommand = new Command("Exit", Command.EXIT, 0);                                   
            // write post-init user code here
        }                         
        return exitCommand;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: form ">                                   
    /**
     * Returns an initiliazed instance of form component.
     * @return the initialized component instance
     */
    public Form getForm() {
        if (form == null) {                                 
            // write pre-init user code here
            form = new Form("Welcome", new Item[] { getLblUserName(), getTxtUserName(), getLblPassword(), getTxtPassword(), getLblBlankSpace(), getCmdOK(), getStringItem() });                                    
            form.addCommand(getExitCommand());
            form.setCommandListener(this);                                  
            // write post-init user code here
        }                         
        return form;
    }
    //</editor-fold>                       
    //</editor-fold>

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: lblUserName ">                                   
    /**
     * Returns an initiliazed instance of lblUserName component.
     * @return the initialized component instance
     */
    public StringItem getLblUserName() {
        if (lblUserName == null) {                                 
            // write pre-init user code here
            lblUserName = new StringItem("User Name :", "");                                    
            lblUserName.setLayout(ImageItem.LAYOUT_CENTER);                                  
            // write post-init user code here
        }                         
        return lblUserName;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: txtUserName ">                                   
    /**
     * Returns an initiliazed instance of txtUserName component.
     * @return the initialized component instance
     */
    public TextField getTxtUserName() {
        if (txtUserName == null) {                                 
            // write pre-init user code here
            txtUserName = new TextField("", "", 32, TextField.ANY);                                    
            txtUserName.setLayout(ImageItem.LAYOUT_CENTER | ImageItem.LAYOUT_NEWLINE_AFTER);                                  
            // write post-init user code here
        }                         
        return txtUserName;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: lblPassword ">                                   
    /**
     * Returns an initiliazed instance of lblPassword component.
     * @return the initialized component instance
     */
    public StringItem getLblPassword() {
        if (lblPassword == null) {                                 
            // write pre-init user code here
            lblPassword = new StringItem("Password :", "");                                    
            lblPassword.setLayout(ImageItem.LAYOUT_CENTER | ImageItem.LAYOUT_NEWLINE_AFTER);                                  
            // write post-init user code here
        }                         
        return lblPassword;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: txtPassword ">                                   
    /**
     * Returns an initiliazed instance of txtPassword component.
     * @return the initialized component instance
     */
    public TextField getTxtPassword() {
        if (txtPassword == null) {                                 
            // write pre-init user code here
            txtPassword = new TextField("", "", 32, TextField.ANY);                                    
            txtPassword.setLayout(ImageItem.LAYOUT_CENTER | ImageItem.LAYOUT_NEWLINE_AFTER);                                  
            // write post-init user code here
        }                         
        return txtPassword;
    }
    //</editor-fold>                       
    //</editor-fold>

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: lblBlankSpace ">                                   
    /**
     * Returns an initiliazed instance of lblBlankSpace component.
     * @return the initialized component instance
     */
    public StringItem getLblBlankSpace() {
        if (lblBlankSpace == null) {                                 
            // write pre-init user code here
            lblBlankSpace = new StringItem("", "");                                   
            // write post-init user code here
        }                         
        return lblBlankSpace;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Method: commandAction for Items ">                                                           
    /**
     * Called by a system to indicated that a command has been invoked on a particular item.
     * @param command the Command that was invoked
     * @param displayable the Item where the command was invoked
     */
    public void commandAction(Command command, Item item) {                                                         
        // write pre-action user code here
        if (item == cmdOK) {                                                
            if (command == okCommand) {                                              
                // write pre-action user code here

                // write post-action user code here
            }                                                
        } else if (item == stringItem) {
            if (command == exitCommand1) {                                              
                // write pre-action user code here
                exitMIDlet();                                                
                // write post-action user code here
            }                                                            
        }                                                          
        // write post-action user code here
    }                                    
    //</editor-fold>                                  

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: okCommand ">                                   
    /**
     * Returns an initiliazed instance of okCommand component.
     * @return the initialized component instance
     */
    public Command getOkCommand() {
        if (okCommand == null) {                                 
            // write pre-init user code here
            okCommand = new Command("Ok", Command.OK, 0);                                   
            // write post-init user code here
        }                         
        return okCommand;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: cmdOK ">                                   
    /**
     * Returns an initiliazed instance of cmdOK component.
     * @return the initialized component instance
     */
    public StringItem getCmdOK() {
        if (cmdOK == null) {                                 
            // write pre-init user code here
            cmdOK = new StringItem("Login", "", Item.BUTTON);                                    
            cmdOK.addCommand(getOkCommand());
            cmdOK.setItemCommandListener(this);                                  
            // write post-init user code here
        }                         
        return cmdOK;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: stringItem ">                                   
    /**
     * Returns an initiliazed instance of stringItem component.
     * @return the initialized component instance
     */
    public StringItem getStringItem() {
        if (stringItem == null) {                                 
            // write pre-init user code here
            stringItem = new StringItem("Cancel", "", Item.BUTTON);                                    
            stringItem.addCommand(getExitCommand1());
            stringItem.setItemCommandListener(this);                                  
            // write post-init user code here
        }                         
        return stringItem;
    }
    //</editor-fold>                       

    //<editor-fold defaultstate="collapsed" desc=" Generated Getter: exitCommand1 ">                                   
    /**
     * Returns an initiliazed instance of exitCommand1 component.
     * @return the initialized component instance
     */
    public Command getExitCommand1() {
        if (exitCommand1 == null) {                                 
            // write pre-init user code here
            exitCommand1 = new Command("Exit", Command.EXIT, 0);                                   
            // write post-init user code here
        }                         
        return exitCommand1;
    }
    //</editor-fold>                       

    /**
     * Returns a display instance.
     * @return the display instance.
     */
    public Display getDisplay () {
        return Display.getDisplay(this);
    }

    /**
     * Exits MIDlet.
     */
    public void exitMIDlet() {
        switchDisplayable (null, null);
        destroyApp(true);
        notifyDestroyed();
    }

    /**
     * Called when MIDlet is started.
     * Checks whether the MIDlet have been already started and initialize/starts or resumes the MIDlet.
     */
    public void startApp() {
        if (midletPaused) {
            resumeMIDlet ();
        } else {
            initialize ();
            startMIDlet ();
        }
        midletPaused = false;
    }

    /**
     * Called when MIDlet is paused.
     */
    public void pauseApp() {
        midletPaused = true;
    }

    /**
     * Called to signal the MIDlet to terminate.
     * @param unconditional if true, then the MIDlet has to be unconditionally terminated and all resources has to be released.
     */
    public void destroyApp(boolean unconditional) {
    }

} 
```

这是输出

![在此处输入图像描述](../Images/e3562b263f8d288245ab75f393082f77.png)

# jquery - 请求json数据并保存到数据库

> ID：10669702
> 
> 赞同：0
> 
> 时间：2012-05-19T23:51:49.850
> 
> 标签：jquery, json, asp-classic

在过去的 2 个小时里，这一直让我发疯，希望有人能给出答案。我需要使用 Querystrings 从另一个网站请求数据。响应是一行 JSON 格式，我需要将它保存到我的数据库中。我该怎么做？我尝试了以下方式，但没有奏效。

```
<script>
    $(document).ready(function() { 
        $.ajax({
                type: "GET",
                data: { client_id: "xxx", client_secret: "xxx", grant_type: "authorization_code", redirect_uri: "http://www.xxx.com/savetodb.asp", CODE: "<%=Request.QueryString("CODE")%>",
                url: "https://xyz.com/access_token", 
        success: function(output) { 
        $("#result").html(output);
        $("#result").css("display", "block");
        }
        }); 
    });

</script>  

<div id="result"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T23:55:58.877

您不能使用 GET 请求并发送 json 数据。您拥有的 data 参数选项没有意义，因为括号没有关闭。您必须使用“发布”请求。如果您只是想获取数据，请使用带有查询字符串的 url ex) [http://www.test.com?q1=key1&q2=key2](http://www.test.com?q1=key1&q2=key2)然后函数语法是。使用 fiddler 确定实际 ajax 请求的 url 是什么，并确保它是正确的。

```
$.ajax({
    type: "GET",
    url: url,
    dataType: "json",
    cache: true,
    success: function (data) {

    }
}); 
```

结合做post然后get，使用单独的函数可能更好，但这将适用于演示：

```
$.ajax({
    type: "POST",
    url: url,
    dataType: "json",
    cache: true,
    success: function (data) {
           $.ajax({
                type: "GET",
                url: url,
                dataType: "json",
                cache: true,
                success: function (data) {

                }
           });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:49:45.160

见 - [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# scala - 使用 Java 7 在 Scala 中编写 JNI 时出现 javah 错误

> ID：10669704
> 
> 赞同：8
> 
> 时间：2012-05-19T23:52:18.970
> 
> 标签：scala, java-native-interface

在 java 6 中，我能够在 Scala 中使用 JNI 就好了。我会有如下代码：

```
package mypackage
object MyClass {
    System.loadLibrary("myclass-native")
    @native def foo(): Int = sys.error("")
} 
```

然后我会跑：

```
javah -classpath target/scala-2.9.1/classes -d target/jni mypackage.MyClass$ 
```

我会得到我的头文件就好了。

在 java 7 中，我收到以下错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: Not a valid class name: mypackage.MyClass.
at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:177)
at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:68)
at com.sun.tools.javah.JavahTask.run(JavahTask.java:509)
at com.sun.tools.javah.JavahTask.run(JavahTask.java:335)
at com.sun.tools.javah.Main.main(Main.java:46) 
```

就像 javah 不再接受类名中的美元符号一样，但我需要在 Scala 中使用美元符号来获得等效于静态方法的方法。

参考 java 6：

```
$ java -version
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)
$ javah -version
javah version "1.6.0_29" 
```

使用 Java 7：

```
$ java -version
java version "1.7.0_03"
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu2)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode)
$ javah -version
javah version "1.7.0_03" 
```

有没有人在java 7中使用javah for JNI和Scala？

**编辑**

作为错误发布在[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7185778](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7185778)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:51:53.387

了解正在发生的事情的最佳方法是直接通过 OpenJDK 网站访问源代码。如果我们看`com.sun.tools.javac.api.JavacTool`

```
 public JavacTask getTask(Writer out,
                         JavaFileManager fileManager,
                         DiagnosticListener<? super JavaFileObject> diagnosticListener,
                         Iterable<String> options,
                         Iterable<String> classes,
                         Iterable<? extends JavaFileObject> compilationUnits)
{
    try {
        Context context = new Context();
        ClientCodeWrapper ccw = ClientCodeWrapper.instance(context);

    final String kindMsg = "All compilation units must be of SOURCE kind";
    if (options != null)
        for (String option : options)
            option.getClass(); // null check
    if (classes != null) {
        for (String cls : classes)
            if (!SourceVersion.isName(cls)) // implicit null check
                throw new IllegalArgumentException("Not a valid class name: " + cls);
    }
    if (compilationUnits != null) {
        compilationUnits = ccw.wrapJavaFileObjects(compilationUnits); // implicit null check
        for (JavaFileObject cu : compilationUnits) {
            if (cu.getKind() != JavaFileObject.Kind.SOURCE)
                throw new IllegalArgumentException(kindMsg);
        }
    }

    if (diagnosticListener != null)
        context.put(DiagnosticListener.class, ccw.wrap(diagnosticListener));

    if (out == null)
        context.put(Log.outKey, new PrintWriter(System.err, true));
    else
        context.put(Log.outKey, new PrintWriter(out, true));

    if (fileManager == null)
        fileManager = getStandardFileManager(diagnosticListener, null, null);
    fileManager = ccw.wrap(fileManager);
    context.put(JavaFileManager.class, fileManager);
    processOptions(context, fileManager, options);
    Main compiler = new Main("javacTask", context.get(Log.outKey));
    return new JavacTaskImpl(compiler, options, context, classes, compilationUnits);
} catch (ClientCodeException ex) {
    throw new RuntimeException(ex.getCause());
} 
```

}

您可以看到有问题的行：

```
 if (!SourceVersion.isName(cls)) // implicit null check
                        throw new IllegalArgumentException("Not a valid class name: " + cls); 
```

所以现在让我们看看 javax.lang.model.SourceVersion

```
 /**
     *  Returns whether or not {@code name} is a syntactically valid
     *  qualified name in the latest source version.  Unlike {@link
     *  #isIdentifier isIdentifier}, this method returns {@code false}
     *  for keywords and literals.
     *
     * @param name the string to check
     * @return {@code true} if this string is a
     * syntactically valid name, {@code false} otherwise.
     * @jls 6.2 Names and Identifiers
     */
    public static boolean isName(CharSequence name) {
        String id = name.toString();

        for(String s : id.split("\\.", -1)) {
            if (!isIdentifier(s) || isKeyword(s))
                return false;
        }
        return true;
    } 
```

所以你可以看到我们期望返回true（但返回false）的方法是：

```
 public static boolean isIdentifier(CharSequence name) {
        String id = name.toString();

        if (id.length() == 0) {
            return false;
        }
        int cp = id.codePointAt(0);
        if (!Character.isJavaIdentifierStart(cp)) {
            return false;
        }
        for (int i = Character.charCount(cp);
                i < id.length();
                i += Character.charCount(cp)) {
            cp = id.codePointAt(i);
            if (!Character.isJavaIdentifierPart(cp)) {
                return false;
            }
        }
        return true;
    } 
```

问题是 `!Character.isJavaIdentifierPart(cp)`

现在如果我们看一下 1.6 版本：

```
public static boolean isJavaIdentifierPart(int codePoint) {
        boolean bJavaPart = false;

        if (codePoint >= MIN_CODE_POINT && codePoint <= FAST_PATH_MAX) {
            bJavaPart = CharacterDataLatin1.isJavaIdentifierPart(codePoint);
        } else {
            int plane = getPlane(codePoint);
            switch(plane) {
            case(0):
                bJavaPart = CharacterData00.isJavaIdentifierPart(codePoint);
                break;
            case(1):
                bJavaPart = CharacterData01.isJavaIdentifierPart(codePoint);
                break;
            case(2):
                bJavaPart = CharacterData02.isJavaIdentifierPart(codePoint);
                break;
            case(3): // Undefined
            case(4): // Undefined
            case(5): // Undefined
            case(6): // Undefined
            case(7): // Undefined
            case(8): // Undefined
            case(9): // Undefined
            case(10): // Undefined
            case(11): // Undefined
            case(12): // Undefined
            case(13): // Undefined
                bJavaPart = CharacterDataUndefined.isJavaIdentifierPart(codePoint);
                break;
            case(14): 
                bJavaPart = CharacterData0E.isJavaIdentifierPart(codePoint);
                break;
            case(15): // Private Use
            case(16): // Private Use
                bJavaPart = CharacterDataPrivateUse.isJavaIdentifierPart(codePoint);
                break;
            default:
                // the argument's plane is invalid, and thus is an invalid codepoint
                // bJavaPart remains false;
                break;
            }
        }
        return bJavaPart;
    } 
```

和 1.7 版本：

```
 public static boolean isJavaIdentifierPart(int codePoint) {
        return CharacterData.of(codePoint).isJavaIdentifierPart(codePoint);
    } 
```

这里发生了一些重构，如果你查看 CharacterData，你会发现它返回了一些类，这些类是在`/openjdk/make/tools/GenerateCharacter/CharacterData**.java.template`构建 java 分发时从模板中动态生成的：

```
// Character <= 0xff (basic latin) is handled by internal fast-path
    // to avoid initializing large tables.
    // Note: performance of this "fast-path" code may be sub-optimal
    // in negative cases for some accessors due to complicated ranges.
    // Should revisit after optimization of table initialization.

static final CharacterData of(int ch) {
    if (ch >>> 8 == 0) {     // fast-path
        return CharacterDataLatin1.instance;
    } else {
        switch(ch >>> 16) {  //plane 00-16
        case(0):
            return CharacterData00.instance;
        case(1):
            return CharacterData01.instance;
        case(2):
            return CharacterData02.instance;
        case(14):
            return CharacterData0E.instance;
        case(15):   // Private Use
        case(16):   // Private Use
            return CharacterDataPrivateUse.instance;
        default:
            return CharacterDataUndefined.instance;
        }
    }
} 
```

我认为您可以尝试在调试模式下运行 javah 并查看在这两种情况下会发生什么，然后将准确的错误报告发送给 OpenJDK 人员，因为此重构显然已经引入了错误。

# php - 除非删除 PHP 代码，否则不会显示登录页面

> ID：10669709
> 
> 赞同：0
> 
> 时间：2012-05-19T23:53:53.400
> 
> 标签：php, mysql, html, mamp

我一直在关注一些在线示例来使用 PHP+MySQL 设置用户注册和登录系统。

我的注册工作正常，但我的 login.php 页面不会显示。这是一个简单的html表单。当我删除 PHP 代码时会显示该表单，但是当我将代码放回原处时，我只会得到一个空白页。

这是PHP：

```
<?php
session_start();
include("db.php"); 
if (isset($_POST['username'] && isset($_POST['password'])) 
{     
user_login($_POST['username'], $_POST['password']); 
} 
?> 
```

由于语法错误，我之前发生过这种情况，但在这里看不到任何内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:58:29.443

`isset($_POST['username']`没有关闭。

代码应该是：

```
<?php
session_start();
include("db.php"); 
if (isset($_POST['username']) && isset($_POST['password'])) 
{     
user_login($_POST['username'], $_POST['password']); 
} 
?> 
```

但是，如果您执行此类操作，PHP 通常会向您显示错误。您的 php.ini 设置可能抑制了错误，这就是出现空白页的原因

IMO，对于开发而言，关闭错误并不是一个好主意。在实时站点上这是一个好主意，但在开发期间却不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:58:31.877

我想你在行尾缺少一个右括号`if`。

# php - 只有 edu 电子邮件地址

> ID：10669715
> 
> 赞同：-2
> 
> 时间：2012-05-19T23:55:13.953
> 
> 标签：php

我想验证电子邮件地址以确保它们具有大学教育地址。例如，对于美国只有“edu”电子邮件持有人，对于澳大利亚只有“edu.au”，对于土耳其只有“edu.tr”等。

有没有人有一个PHP函数可以让我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:09:17.503

没有“功能”。你必须为此提出自己的逻辑。我会说首先通过 Regex 和 preg_match 或其他方式验证电子邮件地址格式。

然后，在您确认其格式有效的电子邮件地址后，您可以使用 . 作为您的分隔符/定界符。然后搜索为“edu”创建的数组。至于每一个。在字符串中，您将得到它们之间的内容作为数组中的值，您甚至不需要找到 .au、.tr 或其他任何内容。只是一个想法。要么接受，要么离开它..

# javascript - 如何自定义返回的 jQuery UI 自动完成列表

> ID：10669716
> 
> 赞同：0
> 
> 时间：2012-05-19T23:55:16.900
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我有一个必须实现自动完成的要求，但我不确定是否可以在 jQuery UI 自动完成中实现这一点。如果我不能在 jQuery UI 自动完成中做到这一点，你能否建议可以做到这一点的库，或者我应该建立自己的库。

要求是我有一个列表，它只是普通的 javascript 有序数组，当用户键入一些内容时，文本框会建议可能的结果。当用户单击结果时，列表应更改为在单击结果上方显示 3 个结果，在单击结果下方显示 3 个结果。

这是我正在尝试做的代码。

```
 $(function() {
        var projects = [
            "List1","List2","List3","List4","List5","List6","List7","List8"
        ];

        $( "#project" ).autocomplete({
            minLength: 0,
            source: projects,
            focus: function( event, ui ) {
                $( "#project" ).val( ui.item.label );
                return false;
            },
            select: function( event, ui ) {
                $( "#project" ).val( ui.item.label );
                return false;
            }
        })
        .data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "`" )
                .data( "item.autocomplete", item )
                .append( "" + item.label + "" )
                .appendTo( ul );
        };
    });` 

例如，如果用户键入“Li”，它应该会弹出“List1”、“List2”、“List3”、“List4”、“List5”。一旦用户单击“List3”，结果列表应更改为“List1”、“List2”、“List3”、“List4”、“List5”、“List6”并忽略“List7”、“List8”

这在 jQuery UI 自动完成中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2012-05-20T00:00:46.827

是的，听起来您需要简单地询问正在引用哪个选项，然后使用 .next() 或 .prev() jquery 函数。这些是相对的迭代工具（一个前向，一个后向），稍加技巧就可以满足您的需求。这是纯 jane jquery，因此您需要将其构建到您的侦听器中（在这种情况下为击键）

下一个： http: [//api.jquery.com/next/](http://api.jquery.com/next/)

上一页：[http ://api.jquery.com/prev/](http://api.jquery.com/prev/)

```

# tsql - 如何使用 WITH ROLLUP 结果确定百分比

> ID：10669720
> 
> 赞同：0
> 
> 时间：2012-05-19T23:56:27.653
> 
> 标签：tsql

我正在尝试使用 With Rollup 函数来确定查询中返回的总行数，并使用该数字来确定每个结果相对于查询中的总行数的百分比。这是我的代码：

```
Declare @startDate DateTime, @endDate DateTime;
Set @startDate = '01/01/01'
Set @endDate = '01/01/13'

SELECT
  isnull(EducationType.EducationTypeDesc, 'UNKNOWN') as 'Education Type Description',
  COUNT(isnull(EducationType.EducationTypeDesc, 'UNKNOWN')) as 'Record Count'
FROM
  EducationType LEFT OUTER JOIN
  Education ON EducationType.EducationTypeID = Education.EducationTypeID LEFT OUTER JOIN
  Volunteer ON Volunteer.PartyID = Education.PartyID
WHERE     (Volunteer.SwornDate BETWEEN @startDate AND @endDate)
GROUP BY isnull(EducationType.EducationTypeDesc, 'UNKNOWN')
WITH ROLLUP 
ORDER BY isnull(EducationType.EducationTypeDesc, 'UNKNOWN') 
```

我得到了 EducationType.EducationTypeDesc 显示为 NULL 但无法弄清楚如何计算查询中的百分比的记录中的总数。

谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T14:39:22.683

从查询的未分组版本加载行数，并计算百分比：

```
Declare @startDate DateTime, @endDate DateTime;
Set @startDate = '01/01/01';
Set @endDate = '01/01/13';
DECLARE @rows MONEY;

SELECT @rows=COUNT(1)
FROM
  EducationType LEFT OUTER JOIN
  Education ON EducationType.EducationTypeID = Education.EducationTypeID LEFT OUTER JOIN
  Volunteer ON Volunteer.PartyID = Education.PartyID
WHERE     (Volunteer.SwornDate BETWEEN @startDate AND @endDate);

SELECT
  isnull(EducationType.EducationTypeDesc, 'UNKNOWN') as 'Education Type Description',
  COUNT(isnull(EducationType.EducationTypeDesc, 'UNKNOWN')) as 'Record Count',
  COUNT(isnull(EducationType.EducationTypeDesc, 'UNKNOWN')) / @rows * 100 as 'Percent'
FROM
  EducationType LEFT OUTER JOIN
  Education ON EducationType.EducationTypeID = Education.EducationTypeID LEFT OUTER JOIN
  Volunteer ON Volunteer.PartyID = Education.PartyID
WHERE     (Volunteer.SwornDate BETWEEN @startDate AND @endDate)
GROUP BY isnull(EducationType.EducationTypeDesc, 'UNKNOWN')
WITH ROLLUP 
ORDER BY isnull(EducationType.EducationTypeDesc, 'UNKNOWN'); 
```

# database - 3NF归一化

> ID：10669722
> 
> 赞同：1
> 
> 时间：2012-05-19T23:56:32.347
> 
> 标签：database, database-design, 3nf

我必须在 3NF 中规范化以下内容：

```
Service (Service_ID, Service Item, service item cost, date of service)  
Customer (customer ID, customer name, customer telephone number, customer address)  
Vehicle (Vehicle ID, vehicle make, vehicle model, vehicle year)  
Parts (Parts ID, part code, part describtion, part cost) 
```

标准化后得到的结果：

```
Service (Service_ID (PK), Service Item, service item cost, date of service, Vehicle_ID (FK))  
Customer (customer ID (PK), customer name, customer telephone number, customer address)  
Vehicle (Vehicle ID (PK), vehicle make, vehicle model, vehicle year, Customer_ID (FK))  
Parts (Parts ID (PK), part code, part describtion, part cost, Vehicle_ID (FK)) 
```

你认为我完全走错了路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:17:57.723

起始关系

*   服务（Service_ID、服务项目、服务项目成本、服务日期）

结束关系

*   服务（Service_ID (PK)、服务项目、服务项目成本、服务日期、Vehicle_ID (FK)）

高达 3NF 的规范化识别了几种函数依赖关系，并通过投影去除了麻烦的依赖关系。（通过创建另一个关系。）如果您通过投影删除关系中的一个麻烦的依赖关系，它最终的属性*总是*比开始时要少。

您的关系“服务”以比您开始时*更多的列结束。*虽然记录服务适用于哪辆车是有意义的，但这可能与标准化没有任何关系，仅基于您开始使用的内容。

识别丢失的外键虽然无疑是一件重要的事情，但它本身并不是规范化的一部分。从 {Service_ID, Service Item, service item cost, date of service, Vehicle_id, vehicle make, vehicle model, vehicle year} 开始，标准化会表示 Service_ID -> Vehicle_ID 和 Vehicle_ID -> vehicle make, vehicle model, and vehicle年。这是一个传递依赖。为了解决这种传递依赖，

*   这四列将被投影，形成一个新的关系（您的 Vehicles 表），
*   车辆制造商、车辆型号和车辆年份将从起始关系中*删除*，使其比开始时少 3 个属性。

并且服务关系中还有一个车辆ID。

所以你的老师给了你一个*不需要*你标准化的作业。它要求您确定其他人在哪里搞砸了规范化，并修复它。这种分配没有错，但称其为规范化有很多错误。（恕我直言）

# sql - 当字段包含第二个表的索引时从另一个更新表

> ID：10669729
> 
> 赞同：0
> 
> 时间：2012-05-19T23:58:28.370
> 
> 标签：sql, sql-update

```
The case: 
```

我有一个包含以下详细信息的表格（300 行）：

```
 id     | locality| postcode| declat  | declong | alias             |
    ---------------------------------------------------------------------    
     13     |         |         |         |         | bla bla wimar bla |
     14     |         |         |         |         | bla bla bla bla   |
     15     |         |         |         |         | bla bla bla arafo | 
```

和其他包含此数据的邮政编码表（900 行）：

```
 locality| postcode | lat        | long
    ---------------------------------------------    
      cande | 504      | 37.9418594 | -0.7795244
      arafo | 501      | 38.9418594 | -0.7795255  
      wimar | 500      | 39.9418594 | -0.7795277 
```

我需要像这样更新表格不动产的行：

```
 id     | locality| postcode| declat     | declong   | alias             |
    ---------------------------------------------------------------------------    
      13     |  wimar  | 500     | 39.9418594 |-0.7795277 | bla bla wimar bla |
      14     |         |         |            |           | bla bla bla bla   |
      15     |  arafo  | 501     | 38.9418594 |-0.7795255 | bla bla bla arafo | 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:57:57.607

根据您的 rdbms，如果这只是一个关闭，您可以尝试这样的事情：

```
UPDATE realty
  SET locality = p.locality
     ,postcode = p.postcode
     ,declat =  p.declat
     ,declong = p.declong
  FROM postcodes p
  WHERE alias LIKE '%' || p.locality || '%' 
```

不过，需要注意一堆东西（扫描、重复匹配等）

# python - 将变量传递给自定义 Django 模板标签

> ID：10669732
> 
> 赞同：2
> 
> 时间：2012-05-19T23:58:36.857
> 
> 标签：python, django, django-templates

我正在向我的 django 应用程序添加自动完成功能。

HTML

```
<script type="text/javascript"> 
            var a = {% get_fields_task_name %}
            $( "#auto_task_name" ).autocomplete({
              source: a           
            }); 
```

看法

```
def get_fields_task_name():    
    task = Task.objects.all()    
    output = []

    for e in task:
        output.append(e.name)

    x = json.dumps(output)
    return x
get_fields_task_name = register.simple_tag(get_fields_task_name) 
```

我需要将参数传递给`get_fields_task_name`，如何在模板中而不是在模板中执行此操作`{% get_fields_task_name %}`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T00:55:32.667

这取决于参数到底是什么，但如果它是您可以在模板渲染时在单个变量中获得的东西，只需将其作为参数添加到函数中（[请参阅文档`simple_tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)）。

例如：

```
@register.simple_tag
def get_fields_task_name(kind):
    tasks = Task.objects.filter(kind=kind)
    return json.dumps([e.name for e in tasks]) 
```

（使用列表推导来使函数体更短更清晰，并且还使用更好的装饰器语法）。

然后您可以将模板中的相关行更改为

```
var a = {% get_fields_task_name some_variable.kind %}; 
```

# html - 流体高度约束图像 HTML

> ID：10669736
> 
> 赞同：1
> 
> 时间：2012-05-20T00:00:22.287
> 
> 标签：html, css

如果可以在 CSS 中制作流体高度图像，请寻求帮助。

例如）[http://jsfiddle.net/VDB7A/20/](http://jsfiddle.net/VDB7A/20/)

我想让盒子 div 处于设定的高度，但动态调整容器的大小以在底部显示所有文本而不超过设定的盒子高度。基本上这是针对一个流体宽度的网站，我想在其中限制框的高度并自动调整图像大小以显示所有文本而不会超过高度。

谢谢！

想出了我自己的答案：

我需要在宽度上缩放所有东西。所以我需要在容器上放一个最小宽度和最大宽度。然后我需要把 width:100% 放在图像上。高度将始终是自动的。

[http://jsfiddle.net/VDB7A/27/](http://jsfiddle.net/VDB7A/27/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T00:32:33.173

我需要在宽度上缩放所有东西。所以我需要在容器上放一个最小宽度和最大宽度。然后我需要把 width:100% 放在图像上。高度将始终是自动的。

[http://jsfiddle.net/VDB7A/27/](http://jsfiddle.net/VDB7A/27/)

# java - SQLite中带有按钮的多查询

> ID：10669739
> 
> 赞同：0
> 
> 时间：2012-05-20T00:00:58.193
> 
> 标签：java, android, sqlite

我目前正在编写一个应用程序，我有一个 SQLite 数据库，其中包含可交易收集卡牌游戏的数据。每张卡片都有名称、额定功率、卡片组、颜色和其他信息。我想知道的是如何编写查询语句来说明某人想要搜索一张名为 Moses 的卡片，他们可以输入名称并获取数据库中所有不同 Moses 卡片的结果，但说他们想要缩小范围，他们知道摩西是一张白卡，然后他们可以输入摩西，然后单击一个名为 White 的按钮，然后提交，然后在数据库中查询颜色列中是单词 White 的 Moses 卡然后显示结果。现在更进一步，如果他们想从国王系列中找到所有的牌，比如颜色白色和蓝色，怎么办？

我知道这是很多信息，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:19:33.910

您需要在 dbhelper 中编写一些方法：

```
public Cursor fetchSearch(String find) {
    String query = "SELECT name, power, set, color FROM cards WHERE name = '" + find + "%'";
    return mDb.rawQuery(query, null);
}

public Cursor fetchSearchColor(String find, String color) {
    String query = "SELECT name, power, set, color FROM cards WHERE name = '" + find + "%' AND color = '" + color + "'";
    return mDb.rawQuery(query, null);
} 
```

您可以调用 fetchSearch 进行普通搜索，调用 fetchSearchColor 来搜索特定颜色。从这里您可能可以弄清楚如何进行多种颜色搜索。

# php - 有一个函数来等待 AJAX 调用，没有同步 AJAX(SJAX)

> ID：10669741
> 
> 赞同：1
> 
> 时间：2012-05-20T00:01:03.340
> 
> 标签：php, ajax, jquery, wait

我正在网页上创建一个动态待办事项列表。在页面上，您有一个用于注册待办事项的表格和一个显示所有已注册待办事项的表格。这个想法是你在表单中注册你想要完成的事情，点击提交按钮，然后 todo-list-table 会自动更新最新注册的 todo。我的脚本管理所有这些，除了自动更新最新注册的待办事项。这是我的代码：

```
 $(document).ready( function() {
            $('#todo_registration input[type="submit"]').click(function(evt){
                evt.preventDefault();

                var todo = $('#todo_registration input[name="daily_todo"]').val();
                $('#todo_registration input[name="daily_todo"]').val(null);

                $.when( registerTodo(todo) )
                    .then (
                        updateTodoDisplay()
                    );
            });
        });

        function updateTodoDisplay() {
            $.post("./daily_todo_display.php", null, replaceTbodyHTML);
        }

        function replaceTbodyHTML(data) {
            $('#todo_display_table tbody').html(data);
        }

        function registerTodo(todo) {
            var parameters = {
                daily_todo: todo,
                registration_button: 'clicked'
            };

            $.post("./daily_todo_registration.php", parameters); //, printRegistrationStatus);
        } 
```

我检查了脚本是否成功在数据库中注册了待办事项。获取更新的待办事项列表的 php 脚本也可以工作。我认为，我的问题是函数 updateTodoDisplay() 在运行之前没有等待 registerTodo() 中的 AJAX 调用成功完成。但我认为我使用 #.when() 应该让 updateTodoDisplay() 等待。

我知道使 AJAX 调用同步可能会解决我的问题，但在我看来这是一个糟糕的解决方案。我只想要这个唯一的函数来等待 AJAX 调用完成。因此，我希望网页的其余部分在进行这些调用时能够正常运行。

有人知道我的问题的解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:21:52.153

您需要的是可能的，但看起来您的代码中有错误。

更改

```
.then (
     updateTodoDisplay()
); 
```

到

```
.then (function(){ updateTodoDisplay(); } ); 
```

甚至

```
.then (updateTodoDisplay); 
```

问题是，当您注册回调时，在当前代码中您传递的是执行结果，`updateTodoDisplay()`而不是作为函数传递。这就是您立即执行它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:15:51.887

您应该 $.post 您的数据，**并且**在服务器端更新完成后，也从服务器端响应 - 将 text/json/xml 发送回 UI。你保存了一个（第二个）请求，你保持 ajax 异步，你的代码更短/更易于维护，你摆脱了这个问题。=)

```
$.post("url/todo.php", params, function (data) {
    // callback
    // do UI update here
    // "json" but you can say "xml" too
}, "json"); 
```

您需要做的就是弄清楚您的服务器端响应。

[**jQuery.post()**](http://api.jquery.com/jQuery.post/)

祝您实施愉快！=)

# android - Android：写入和获取对象

> ID：10669742
> 
> 赞同：5
> 
> 时间：2012-05-20T00:01:16.383
> 
> 标签：android

我想将一个可序列化的对象写入内部存储器中的文件。然后，我想稍后从该文件中加载该对象。我怎么能在 Android 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T00:07:50.830

首先你的对象必须实现`Serializable`。不要忘记`serialVersionUID`在可序列化的类上添加一个。

然后，如果您不想保存对象的特定字段，请将其标记为`transient`. 确保所有字段都是可序列化的。

接下来在内部存储器中创建一个文件并创建一个 ObjectOutputStream 来保存您的对象。如果要保存在特定文件夹中，可以创建如下路径：

```
File path=new File(getFilesDir(),"myobjects");
path.mkdir(); 
```

然后您可以使用该路径来保存您的对象：

```
File filePath =new File(path, "filename");
FileOutputStream fos = new FileOutputStream(filePath);
ObjectOutputStream oos = new ObjectOutputStream(fos);               

oos.writeObject(object);
oos.close(); 
```

读法类似：

```
FileInputStream fis = new FileInputStream(file);
ObjectInputStream in = new ObjectInputStream(fis);              

MyObjectClass myObject = (MyObjectClass ) in.readObject();

in.close(); 
```

# javascript - 部分视图中不显眼的客户端验证不起作用

> ID：10669745
> 
> 赞同：0
> 
> 时间：2012-05-20T00:02:09.043
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-validate

我已经阅读了此处与此问题有关的大部分帖子，但我仍然看不出有什么问题。请问有人可以看吗？我收到一个错误“无法读取未定义的属性'unobtrusive'”如果我注释掉该行然后我得到“无法读取未定义的属性'选项'”所以显然我有一些不正确的引用但我看不到它。如果我取出所有验证代码，表单会弹出并且工作正常，但当然没有验证。另外，我尝试用“#updateContactForm”代替“#updateDialog”并得到相同的结果。希望这是一件简单的事情，我只是看太久就看不到了。提前致谢！

```
 <div id="updateDialog" title="Update Contact"></div>
    <script type="text/javascript">
     var linkObj;
$(function () {
    $(".editLink").button();

    $("#updateDialog").dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        modal: true,
        buttons: {
            "Update": function () {
                $("#update-message").html(''); //make sure there is nothing on the message before we continue                         
                $("#updateContactForm").submit();
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });

            $(".editLink").click(function () {
        //change the title of the dialog
        linkObj = $(this);
        var dialogDiv = $("#updateDialog");
        var viewUrl = linkObj.attr('href');
        $.get(viewUrl, function (data) {
            dialogDiv.html(data);
            //validation
            var $form = $("#updateContactForm");
            $form.unbind();
            $form.data("validator", null);
            $.validator.unobtrusive.parse($("#updateDialog"));
            // Re add validation with changes
            $form.validate($form.data("unobtrusiveValidation").options);
            //open dialog
            dialogDiv.dialog("open");
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T05:40:33.280

只是为了检查一下，您是否正确引用了 cshtml 或母版页中的 jquery 验证脚本？

您应该先加载脚本`jquery.validate.js`，然后再加载脚本`jquery.validate.unobtrusive.js`。

# sparse-matrix - 稀疏数据的特征缩放/归一化

> ID：10669747
> 
> 赞同：3
> 
> 时间：2012-05-20T00:03:30.190
> 
> 标签：sparse-matrix, missing-data, neural-network, missing-features

我在用稀疏输入数据训练神经网络来解决监督回归问题时遇到问题。当我对输入数据执行平均归一化（减去平均值然后除标准差）时，我得到了很多 NaN 值。我想知道是否有人有处理此类问题的经验。缩放稀疏输入数据的正确方法是什么？

谢谢乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:08:15.573

听起来您的数据非常稀疏，以至于标准偏差偶尔为零。

对此进行测试，如果是这样，请不要将您的输入除以它（在这种情况下无论如何都不需要stdev规范化）。

# perl - 使用 mod_perl 创建新的数据库句柄

> ID：10669752
> 
> 赞同：1
> 
> 时间：2012-05-20T00:04:40.720
> 
> 标签：perl, dbi, mod-perl2, apache-dbi

在对数据库连接消失的 mod_perl 进行压力测试时，我遇到了一个问题。我怀疑进程正在共享数据库连接，从而导致了问题。

但是我已经遵循了 Apache::DBI 的所有说明，但无法弄清楚这一点。

我在子进程中而不是在 startup.pl 中建立连接。但是当我检查每个子进程从 DBI->connnect 返回的 $dbh 时，每个 httpd 进程的地址都是相同的。首先，如果这工作正常并为每个进程重新连接，那么 DBI->connect 返回的地址对于每个子进程是否应该不同？我假设是这样，但据我所知，DBI 中的核心 C 代码（dbih_setup_handle）正在管理它并返回相同的地址。所以也许我不明白重新连接孩子意味着什么。

如果 $dbh 句柄相同，我是否可以正确重新连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:14:22.197

听起来您正在`<perl>...</perl>`启动配置中的某个部分或启动时加载的模块中建立数据库连接，并保留它直到分叉进程尝试使用它。

不幸的是，你无法摆脱这一点。您需要以某种方式确保新进程获得新连接。

我对这个问题的解决方案是获取一个 dbh 的中心函数，该函数跟踪`$$`建立连接时（当前进程 ID）是什么。如果在移交连接时，该函数发现`$$`发生了变化，它将处置任何现有的连接*而不关闭它们*，并创建一个新的：

```
my $_dbh;
my $pid;

sub dbh {
        if($pid != $$) {
                $_dbh = DBI->connect(...);
                $pid = $$;
        }
        return $_dbh;
} 
```

任何想要使用数据库的代码都会首先调用`dbh()`以获取数据库句柄，并在必要时让它创建一个新的句柄，或者如果可以使用则交出先前建立的连接。

# asp.net-mvc - MVC 路由错误 404

> ID：10669756
> 
> 赞同：2
> 
> 时间：2012-05-20T00:05:34.253
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我究竟做错了什么？

我的默认 /User 路由

```
 routes.MapRoute(
            "User", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new {controller = "User", action = "Index", id = UrlParameter.Optional} // Parameter defaults
            ); 
```

我想分离代码，所以我创建了另一个控制器“UserProducts”

我的路线

```
 routes.MapRoute(
            "UserProducts", // Route name
            "user/products/{action}/{id}", // URL with parameters
            new { controller = "UserProducts", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

我的 UserProducts 控制器中有 ActionResult 索引，但是我的

```
localhost/user/products 
```

不起作用：

```
Error 404 - The resource cannot be found. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T00:11:54.463

您可能按错误的顺序排列它们。注册这些路由的顺序很重要，第一个映射将覆盖它之后的映射。将这`UserProducts`一行放在上面的那一行 for `User`。

# ruby-on-rails - rails中的多个搜索字段

> ID：10669765
> 
> 赞同：0
> 
> 时间：2012-05-20T00:07:50.447
> 
> 标签：ruby-on-rails

我仍在学习 RoR，我花了一整天时间找出一个简单的搜索字段，该字段可以按卧室数量过滤房产。它现在运行良好，但我不知道这是否是正确的方法，因为我不知道如何调整它，以便我可以添加额外的浴室搜索字段、最低价格、最高价格、拉链等。

搜索字段和提交按钮以及结果在列表页面上，所以在控制器中我有：

```
def list
@properties = Property.bedrooms(params[:bedrooms])
end 
```

在我的模型中：

```
def self.bedrooms(bedrooms)
 if bedrooms
   find(:all, :conditions => ["bedrooms LIKE ?", "%#{bedrooms}%"])
 else
   find(:all)
 end 
```

结尾

list.html.erb 页面是：

```
<%= form_tag( 'list', :method => 'get') do %>
<p>
<%= text_field_tag 'bedrooms', (params[:bedrooms]) %>

<%= submit_tag "Search", :name => nil %>
</p>
<% end %> 
```

如何添加浴室搜索栏、最低价搜索栏、最高价搜索栏、邮编搜索栏等？谢谢，亚当

尝试将其添加到控制器时出现语法错误：

```
scope :bedrooms, {|b| where("bedrooms LIKE ?", b)}  
scope :price_greater, {|p|  where("price > ?", p)} 
```

错误是：

```
SyntaxError in PropertiesController#list

/Users/Adam/Documents/Websites/idx_app/app/models/property.rb:4: syntax error,    unexpected '|', expecting '}'
 scope :bedrooms, {|b| where("bedrooms LIKE ?", b)}  
                  ^
/Users/Adam/Documents/Websites/idx_app/app/models/property.rb:4: syntax error, unexpected '}', expecting keyword_end
scope :bedrooms, {|b| where("bedrooms LIKE ?", b)}  
                                                 ^
/Users/Adam/Documents/Websites/idx_app/app/models/property.rb:5: syntax error, unexpected '|', expecting '}'
scope :price_greater, {|p|  where("price > ?", p)}
                       ^
/Users/Adam/Documents/Websites/idx_app/app/models/property.rb:5: syntax error, unexpected '}', expecting keyword_end 
```

是的，添加 lambdas 修复了上述语法错误，但现在好像 @properties 没有返回数组，因为我收到以下错误消息：

```
undefined method `each' for #<Class:0x007fd5235250f8>

Extracted source (around line #29):

26:       <th>Price</th>
27:     
28:     </tr>
29:     <% @properties.each do |property| %>
30:     <tr>
31:       
32:       <td><%= link_to(property.address, {:action => 'show', :id => property.id}) %></td> 
```

修复了这个错误消息，我没有在控制器中正确定义它，我放了@properties.all 而不是@properties = @properties.all

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:25:06.360

通过使用范围来做到这一点......

```
 scope :bedrooms, lambda{ |b| where("bedrooms LIKE ?", b) }    
  scope :price_greater, lambda{ |p|  where("price > ?", p)  } 
```

在控制器中

```
 @properties = Property.scoped
  @properties = @properties.bedrooms(params[:bedrooms]) if params[:bedrooms].present?
  @properties = @properties.price_greater(params[:min]) if params[:min].present?
  .....
  @properties = @properties.paginate.... or just @properties.all 
```

# objective-c - 从较大的图像创建子图像

> ID：10669770
> 
> 赞同：0
> 
> 时间：2012-05-20T00:08:17.390
> 
> 标签：objective-c, ios, jpeg

从 REST 端点传输大图像后，我需要将图像分成许多较小的图像块。

初始图像（例如）1024x1024，存储在 NSData 中；我需要创建大小为 256x256 的子图像（在这种情况下，将有 16 个子图像）。

这将如何完成？（我还没有找到任何接近的文章，但我认为这一定是可能的，因为大多数图像编辑软件都支持图像裁剪。）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:34:25.067

这是我在某些项目中用来裁剪图像的功能。

```
- (UIImage *)cropImage:(UIImage *) image{
   CGRect rect = CGRectMake(0, 0, 256, 256);
   CGImageRef subImageRef = CGImageCreateWithImageInRect(image.CGImage, rect);
   CGRect smallBounds = CGRectMake(0, 0, CGImageGetWidth(subImageRef), CGImageGetHeight(subImageRef));

   UIGraphicsBeginImageContext(smallBounds.size);
   CGContextRef context = UIGraphicsGetCurrentContext();
   CGContextDrawImage(context, smallBounds, subImageRef);
   UIImage* smallImg = [UIImage imageWithCGImage:subImageRef];
   UIGraphicsEndImageContext();

   return smallImg;
} 
```

我认为你可以从那里多次调用它来裁剪你的照片 16 次。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:07:46.787

originalImageView 是一个 IBOutlet ImageView。此图像将被裁剪。

```
#import <QuartzCore/QuartzCore.h> 
```

为了更好地理解，每个切片周围的边界都需要这样做。

```
-(UIImage*)getCropImage:(CGRect)cropRect
{
CGImageRef image = CGImageCreateWithImageInRect([originalImageView.image CGImage],cropRect);
UIImage *cropedImage = [UIImage imageWithCGImage:image];
CGImageRelease(image);
return cropedImage;
}

-(void)prepareSlices:(uint)row:(uint)col
{
float flagX = originalImageView.image.size.width / originalImageView.frame.size.width;
float flagY = originalImageView.image.size.height / originalImageView.frame.size.height;

float _width    = originalImageView.frame.size.width / col;
float _height   = originalImageView.frame.size.height / row;

float _posX = 0.0;
float _posY = 0.0;

for (int i = 1; i <= row * col; i++) {

    UIImageView *croppedImageVeiw = [[UIImageView alloc] initWithFrame:CGRectMake(_posX, _posY, _width, _height)];
    UIImage *img = [self getCropImage:CGRectMake(_posX * flagX,_posY * flagY, _width * flagX, _height * flagY)];
    croppedImageVeiw.image = img;

    croppedImageVeiw.layer.borderColor = [[UIColor whiteColor] CGColor];
    croppedImageVeiw.layer.borderWidth = 1.0f;

    [self.view addSubview:croppedImageVeiw];
    [croppedImageVeiw release];

    _posX += _width;

    if (i % col == 0) {
        _posX = 0;
        _posY += _height;
    }

}

originalImageView.alpha = 0.0;

} 
```

像这样称呼它：

```
[self prepareSlices:16 :16]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:19:29.987

```
@interface UIImage (Sprite)
- (NSArray *)spritesWithSpriteSheetImage:(UIImage *)image spriteSize:(CGSize)size;
- (NSArray *)spritesWithSpriteSheetImage:(UIImage *)image inRange:(NSRange)range spriteSize:(CGSize)size;
@end

@implementation UIImage (Sprite)

-(NSArray *)spritesWithSpriteSheetImage:(UIImage *)image spriteSize:(CGSize)size {
    return [self spritesWithSpriteSheetImage:self inRange:NSMakeRange(0, lroundf(MAXFLOAT)) 
                              spriteSize:size];
}
-(NSArray *)spritesWithSpriteSheetImage:(UIImage *)image 
                            inRange:(NSRange)range 
                         spriteSize:(CGSize)size {
if (!image || CGSizeEqualToSize(size, CGSizeZero) || range.length == 0) 
    return nil;
NSLog(@"%i %i", range.location, range.length);
CGImageRef spriteSheet = [image CGImage];
NSMutableArray *tempArray = [[[NSMutableArray alloc] init] autorelease];

int width = CGImageGetWidth(spriteSheet);
int height = CGImageGetHeight(spriteSheet);

int maxI = width / size.width;
int startI = 0;
int startJ = 0;
int length = 0;
int startPosition = range.location;

// Extracting initial I & J values from range info
//
if (startPosition != 0) {
    for (int k=1; k<=maxI; k++) {
        int d = k * maxI;
        if (d/startPosition == 1) {
            startI = maxI - (d % startPosition);
            break;
        }
        else if (d/startPosition > 1) {
            startI = startPosition;
            break;
        }
        startJ++;
    }
}
int positionX = startI * size.width;
int positionY = startJ * size.height;
BOOL isReady = NO;
while (positionY < height) {
    while (positionX < width) {
        CGImageRef sprite = CGImageCreateWithImageInRect(spriteSheet, CGRectMake(positionX, positionY, size.width, size.height));
        [tempArray addObject:[UIImage imageWithCGImage:sprite]];
        CGImageRelease(sprite);
        length++;
        if (length == range.length) {
            isReady = YES;
            break;
        }
        positionX += size.width;
    }
    if (isReady) 
        break;
    positionX = 0;
    positionY += size.height;
}
return [NSArray arrayWithArray:tempArray];
  }
@end 
```

# java - 为每个 jar 文件获取 java.lang.NoClassDefFoundError

> ID：10669771
> 
> 赞同：0
> 
> 时间：2012-05-20T00:08:40.347
> 
> 标签：java, android, jar

我最近重新安装了我的电脑，安装了最新版本的 Android SDK 和 Eclipse。现在，我拥有的每个项目，每个项目中包含的每个 jar 文件都会得到一个“java.lang.NoClassDefFoundError”。

我是一名 Java 初学者，我上周在论坛上度过，但无法修复它。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:15:07.813

在重新格式化之前，您可能使用的是过时版本的 ADT。在 ADT 17 之后，需要将库复制到`libs`项目的文件夹中，或者需要在构建路径上将它们标记为导出。否则，这些库将不会与 APK 二进制文件一起打包，因此您`NoClassDefFoundError`在使用这些库时会得到。

# c# - 在jquery中更改htmltablerowelement的背景

> ID：10669773
> 
> 赞同：0
> 
> 时间：2012-05-20T00:09:05.823
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

我正在 MVC3 C# 4.0 中构建应用程序

在我看来，我有一张桌子。每行都有一个类`myrowclass` ，我可以通过执行它来获取 jquery 中表的行`$(".myrowclass")` 它返回一个集合`htmltablerowelement`

现在我想更改第 1 行的背景，但我无法这样做

HTML 表格有许多 . 每个都有很多 每个都有一个标签。

我正在单击一行并单击每个内部的单击事件，我想触发一个事件，该事件将更改 this.parentElement.parentElement 的背景颜色

this.parentElement.parentElement.css("背景色", "绿色"); <-- 不工作

但我不断收到 HtmlTableRowElement 没有 .css 属性的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:10:58.233

了解更多关于 jQuery 的[**`.css()`**](http://api.jquery.com/css/).

```
$(".myrowclass").css("background-color","green"); 
```

或者[**`.addClass()`**](http://api.jquery.com/addClass/)：

```
$(".myrowclass").addClass("greencssclass"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:11:16.817

要更改 CSS 样式，请使用：

```
$(".myrowclass").css("background-color", "green"); 
```

要将 CSS 类添加到元素，请使用：

```
$(".myrowclass").addClass("greencssclass"); 
```

# javascript - 普通函数与立即函数的效率？

> ID：10669775
> 
> 赞同：1
> 
> 时间：2012-05-20T00:09:30.377
> 
> 标签：javascript

有人提到立即或自执行函数必须存储整个堆栈。这是真的吗...如果是这样，使用模块模式（基于立即函数）与普通函数之类的优缺点是什么？

函数本质上是私有的，但您可以返回想要公开的项目，因此它可以处理隐私。

我看到的主要区别是，您没有全局导入或确保开发人员（等等我）使用 new 的功能（或者它很复杂）的能力。

一般来说，当试图提供隐私和状态时，什么时候应该使用模块模式，什么时候应该只使用普通函数？

第二个问题是函数在与 new 一起使用时是否提供状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:38:43.917

任何因为内部存在对变量或函数的持久引用而持续存在的函数闭包会占用一定量的内存。在当今的计算机（甚至电话）中，除非您以某种方式重复它数千次，否则这种内存量通常是微不足道的。因此，使用语言特性来解决您的设计问题通常比担心内存量更重要。

当您说“整个堆栈”时，顶级自执行函数的调用堆栈非常小。除了被调用的一个函数之外，堆栈上真的没有其他任何东西。

函数也是对象。因此，当它与 一起使用时`new`，如果您为这些属性分配值，它会创建一个可以具有状态（它的属性）的新对象。这是在 javascript 中创建对象的主要方式之一。您可以调用一个函数并检查它的返回值，也可以使用它，`new`该函数用作新对象的构造函数。给定的功能通常设计为以一种方式或另一种方式使用，而不是两者兼而有之。

模块模式通常用于控制哪些变量是公共的，以及何时将它们公开以将它们放入使用很少顶级全局变量的结构化命名空间中。它不是您真正选择的东西，而不是自执行功能，因为它们并不能真正解决相同的问题。您可以在此处阅读有关模块模式的更多信息：[http ://www.yuiblog.com/blog/2007/06/12/module-pattern/](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)

您可以在此处阅读许多选项：http: [//www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)和[http://www.klauskomenda.com/code/javascript-programming -模式/](http://www.klauskomenda.com/code/javascript-programming-patterns/)。

根据一个人试图解决的特定问题或特定设计问题来讨论给定技术的优点/缺点，而不是当你问的事情不是真的时，一般性地讨论哪个更好解决等价问题。

我所知道的受保护成员和私有成员（可以被入侵 javascript，但不是核心语言功能）的最佳参考是这个：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)。当你使用这种方法而不是语言的默认原型特性时，你正在做出权衡，但如果你真的需要它，你可以实现隐私。但是，您应该知道构建 javascript 时并没有考虑到私有或受保护的方法，因此为了获得这种级别的隐私，您正在使用一些关于如何编写代码的约定来获得它。

# android - 如何在视图中添加角

> ID：10669777
> 
> 赞同：1
> 
> 时间：2012-05-20T00:09:39.297
> 
> 标签：android

我在视图周围添加了一个完整的边框，但我只需要添加一个角，如下图所示：

![在此处输入图像描述](../Images/6c0ba2bc0fe4f5c48aefcfd90dd52c3f.png)

**我的意思是只有红色的角落。**

我试图调整下面的边框 xml ，但没有奏效：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
  android:shape="rectangle">
    <stroke android:width="10dp" android:height="10dp" android:color="#B22222" /> 
    <solid android:color="#FCE6C9" /> 
    <corners android:radius="20dp"  /> 
</shape> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:44:18.237

我认为使用 a 不可能做到这一点`ShapeDrawable`，因为它需要您在可绘制对象本身上使用某种边距或填充。实际上有一个`padding`属性，但不幸的是，它只对 的内容有影响`View`，而不是可绘制对象本身。

话虽如此，一个简单的解决方案是创建一个 9-patch 并将其作为背景应用到`TextView`. 仅用于演示目的：使 9-patch 看起来像这样：

![红色圆角 9-patch 示例](../Images/6b98c4ae2ea71912520b9d64c5453e02.png)

* * *

**编辑：** 再想一想，实际上还有另一个选项依赖于使用 a`LayerDrawable`来创建所需的效果。创建有点乏味，我怀疑它会比使用 9-patch 更有效，但至少你不必渲染图像，这意味着如果你需要改变颜色，更直接。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/rounded" />
    <item android:drawable="@android:color/white" android:left="30dp"
        android:right="30dp" />
    <item android:bottom="30dp" android:drawable="@android:color/white"
        android:top="30dp" />
    <item android:bottom="30dp" android:left="10dp" android:right="10dp"
        android:drawable="@color/pink" android:top="30dp" />
    <item android:bottom="10dp" android:left="30dp" android:right="30dp"
        android:drawable="@color/pink" android:top="10dp" />

</layer-list> 
```

一些细节：`@drawable/rounded`是您自己发布的代码片段。以下两项只是带有偏移的白色矩形，用于创建白色边缘。现在，由于这些也会覆盖粉红色的表面，我们需要另外两个粉红色的矩形（同样具有特定的偏移量）来解决这个问题。结果是一个看起来与您在问题中显示的完全一样的背景。

请注意，您可能想看看是否可以对此进行一些优化。至少我建议不要硬编码偏移量（就像我为简单起见所做的那样），而是将它们存储在一个文件中，这样您就可以通过从和`dimens.xml`引用它们来保持这些值集中和一致。`ShapeDrawable``LayerDrawable`

**附录：**`android:drawable`在 ICS 之前（或者可能是 Honeycomb 之前）设备上，使用属性直接引用颜色似乎存在问题。但是，您可以通过设置另一个可绘制对象（无论是 9-patch 还是`ShapeDrawable`）来表示这种颜色，从而轻松解决这个问题。例如，在上面的代码片段中，您可以替换`android:drawable="@color/pink"`为`android:drawable="@drawable/color_pink"`，其中`color_pink`可以简单地是一个包含以下内容的 xml 文件：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
  android:shape="rectangle">
    <solid android:color="#FCE6C9" /> 
</shape> 
```

显然，您需要对`LayerDrawable`. 在姜饼 2.3.7 上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:59:26.657

我将创建一个 9-patch 文件并将其设置为主容器的背景。这样做的步骤是。

1.  您可以在烟花、插画或任何您喜欢的图像编辑软件中大致创建您想要的背景。
2.  然后裁剪图稿，使图稿周围只有 1 个像素的边框。将其保存为png。
3.  打开电脑 C:\Program Files (x86)\Android\android-sdk\tools 上 android sdk 文件夹中的 draw9patch.bat 文件。
4.  打开你的png文件。然后，您可以使用鼠标单击外部 1 像素边框，这会将单击的像素变为黑色。在顶部和底部或左右两侧都有黑色像素的区域将是被拉伸的区域。在您的情况下，您只想让没有红色拉伸的中间区域。
5.  我个人的偏好是只打开上面的文件并将其保存为 9 补丁文件。然后在我的照片编辑软件中打开它，以与上述相同的方式创建一条 1 像素粗的线。它更快更精确。
6.  最后将文件添加到您的可绘制文件夹中。然后将主视图容器的背景设置为可绘制对象。

应该是这样的。希望有帮助。

# javascript - 如何在jQuery中通过字符串值调用变量？

> ID：10669782
> 
> 赞同：1
> 
> 时间：2012-05-20T00:10:10.683
> 
> 标签：javascript, jquery, variables

我有一个数据集

```
var data1 = {values:[
  { X: "33", Y: 12 },
  ....
  ]};
var data2 = { values:[
  { X: "Jan", Y: 2 },
  ...
  ]}; 
```

我想加载适当的数据集

```
$(document).ready(function() {
  $(".test").click(function(){
  var data = $(this).val() // the value will be data1 or data2
           // how can I make the data a JSON equal to data1 or data2 instead of
           // assigning the static value of $(this).val() to it.
  }
}); 
```

如何`var data`从静态值创建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:12:30.937

不。

将`data1`,`data2`作为对象的属性，并使用方括号成员运算符来访问它们。

```
var dataset = {

    data1: {
        values: [{
            X: "33",
            Y: 12
        }, ....]
    }
    data2: {
        values: [{
            X: "Jan",
            Y: 2
        }, ...]
    };
} 
```

* * *

```
var data = dataset[$(this).val()] 
```

* * *

虽然如果您的`data1`和`data2`是全局变量，您可以从`window`对象以相同的方式访问它们。

```
var data = window[$(this).val()] 
```

但是像这样的对象`dataset`仍然比一堆全局对象好。

# actionscript-3 - 在 adobe flash builder 中动态处理 facebook 提要

> ID：10669784
> 
> 赞同：0
> 
> 时间：2012-05-20T00:10:36.970
> 
> 标签：actionscript-3, apache-flex, facebook-graph-api, flash-builder

我正在尝试通过动态地将它们添加到 Flash 应用程序来处理从 facebook 检索到的用户提要，并且我需要将提要显示在一个带有其发布者名称和图片旁边的框中（正常）..

问题是如果我不知道它们的高度，我怎么能显示它们相互对齐？有没有办法在不指定高度的情况下将它们相互添加？就像在 html 中相互添加 div 一样？

和其他问题如果内容超出 Flash 窗口，如何添加滚动条？

我是 as3 和 flash 的新手，所以任何建议都会有所帮助.. 谢谢..

我的代码：

```
 protected function getFeedsHandler(result:Object,fail:Object):void
        {
            if(result)
            {
                var i:Number;

                for(i=0;i<10;i++)
                    if(result[i])
                    {
                        var fdLbl= new Label();
                        addElementAt(fdLbl,1);

                        fdLbl.text=result[i].message;
                        fdLbl.x=20;
                        fdLbl.y=(i+2)*100;
                        fdLbl.width=400;

                        var fdImg= new Image();
                        addElementAt(fdImg,1);

                        fdImg.source=FacebookDesktop.getImageUrl(result[i].from.id,"small");
                        fdImg.x=20;
                        fdImg.y=(i+2)*80;
                        fdImg.width=400;

                        var nameLbl= new Label();
                        addElementAt(nameLbl,1);

                        nameLbl.text=result[i].from.name;
                        nameLbl.x=20;
                        nameLbl.y=(i+2)*90;

                    }
            } 
```

界面：

```
<s:Button id="loginoutBtn" right="10" top="10" label="Log out"
          click.loggedin="logout(event)"
          label.loggedout="Log in" click.loggedout="login(event)"/>
<s:Form includeIn="loggedin" left="70" top="10">
    <s:FormItem label="User">
        <s:Label id="nameLbl" text=""/>
    </s:FormItem>
    <s:FormItem label="birthday">
        <s:Label id="brthday"/>
    </s:FormItem>
    <s:FormItem label="feeds">
        <s:Image id="feedImg"/>
        <s:Label id="feedLbl" x="0"/>
        <s:Label id="statusLbl" width="405"/>
    </s:FormItem>
</s:Form>
<s:Image id="userImg" includeIn="loggedin" left="10" top="10" width="50"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:44:54.180

所以看起来您正在使用 Flex，特别是您正在使用 spark 组件。在使用 Spark 时，有几种方法可以实现这一点，一种选择是将上面制作的组件放入 VGroup 中。VGroup 垂直堆叠视觉组件，它有一个称为 gap 的属性，您可以设置以添加或删除组件之间的间距（嵌套到 VGroup 中的每个对象之间的像素数）。添加包装 VGroup 的 as:Scroller 组件将为您提供滚动条，本质上它的工作方式是将 s:Scroller 上的大小设置为您想要可见的大小（可以是 100% 宽度/高度等百分比视图/容器的），然后您没有在 VGroup 上设置显式大小，VGroup 将扩展为具有等于嵌套在其中的所有组件的高度加上任何填充加上间隙空间的高度，滚动条将负责确定滚动选项卡按钮的大小并调整 VGroup 上的 scrollRect对你来说，基本上它会像魔术一样工作:)。这将类似于以下内容：

```
<s:Scroller width="100%" height="100%">
    <s:VGroup id="loadedContentVGroup">
        <yourpackage:YourCustomComponent/>
    </s:VGroup>
</s:Scroller> 
```

如果您不限制滚动条的高度和宽度，它将无法工作，因为它没有定义的区域可供绘制，并且只会变得与其子项（嵌套组件）一样大。您很可能会在 AS3 中向 VGroup 添加元素，因此您可能希望给它一个 ID。

您的另一个选择是使用火花列表，然后将您的视觉组件设置为 itemRenderer。对于列表的数据提供程序中的每个数据元素（某种集合类、ArrayCollection、XMLCollection 等），它会将数组的元素设置为可视组件上的“数据”属性。然后，您将使用绑定到可视组件中的 data 属性来确保渲染器是否被重新使用/回收，其中的元素会自动更新。这是一个例子：

```
 <s:List dataProvider="{new ArrayCollection([{name:'Shaun', birthday:'04-28-1983', imageSource:'someImage.png'}])}"
            itemRenderer="views.YourCustomComponent"
            width="100%"/> 
```

在您的情况下，可以在上面的结果处理程序代码中分配列表的 dataProvider，结果似乎是一个数组，因此您可以将其包装在 ArrayCollection 中，例如 myList.dataProvider = new ArrayCollection(result);

这是列表中单个条目的潜在视图定义（上面使用的 itemRenderer 类）

[views.YourCustomComponent]

```
<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark"
          implements="mx.core.IDataRenderer">
    <fx:Script>
        <![CDATA[
            private var _data:Object;

            [Bindable(eventName="dataChanged")]
            public function get data():Object
            {
                return _data;   
            }
            public function set data(value:Object):void
            {
                if(_data == value)
                    return;
                _data = value;
                dispatchEvent(new Event("dataChanged"));
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <s:Label text="{data.name}"/>
    <s:Label text="{data.birthday}"/>
    <s:Image source="{data.imageSource}"/>
</s:VGroup> 
```

这些答案肯定有警告和替代方案，但这有望使您朝着正确的方向前进，如果您这样做是为了移动开发，请务必查看有关为移动设备创建渲染器的建议，这里的想法是尽可能减少在移动设备上创建和重用渲染器所需的处理，以减轻 CPU 和内存的负载。

需要注意的另一件事是，您在 AS3 和 MXML 中定义视图的混合出现，虽然这在技术上是可以的，但我觉得我自己有点困惑。我通常会在 MXML 中定义整个布局，或者如果需要完全在 AS3 中。如果在 MXML 中定义并且需要通过代码有条件地隐藏组件，我只需切换可见/includeInLayout 属性。我想这只是一种偏好，但是当您必须在两者之间进行查看以将其拼凑在一起时，确定导致特定布局发生的原因似乎会变得很棘手。

对所用类的 AS3 参考的引用：http: [//help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/spark/components/VGroup.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/spark/components/VGroup.html)

[http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/spark/components/Scroller.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/spark/components/Scroller.html)

[http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/spark/components/List.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/spark/components/List.html)

有关自定义项目渲染器的详细信息[http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-23c04461124bbeca597-8000.html](http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-23c04461124bbeca597-8000.html) <-- 引用 Jeffry Houser 是 SO 上的常客，名称为 www.flextras.com

# java - 接收 HTTP 请求并使用 Java 程序进行响应

> ID：10669791
> 
> 赞同：0
> 
> 时间：2012-05-20T00:12:08.507
> 
> 标签：java, http, streaming, vlc

VLC 播放器可以通过提供正确的 URL 来播放文件流。

我的目的是制作一个 Java 程序，它监听来自 VLC 的 HTTP 请求的本地地址和端口，然后用视频文件流进行响应。

问题是如何在特定地址和端口上侦听 HTTP 请求，然后如何将我的视频文件作为 http 响应流式传输回 VLC。

我知道 Apache 有各种库，但我需要更简单的东西。

# c++ - 将文件中的数据分配给矩阵 C++

> ID：10669794
> 
> 赞同：0
> 
> 时间：2012-05-20T00:12:23.897
> 
> 标签：c++, arrays, file, printing

大家好，我是 C++ 的初学者。我想要达到的目标是安静的愚蠢。但我不明白/不明白错误在哪里。我将非常感谢任何 bluecode 帮助。

所以...我想分配文件“REL”的内容，它是一个 46x2 的矩阵 [无空行]：

```
28 28
28  6
28 21
28 30
28 16
22 22
22 33
22 9
39 39
39 32
39 46
39 10
39 24
36 36
36 7
36 43
36 23
11 11
11 26
11 41
15 15
15 17
15 45
15 29
15 40
3 3
3 37
3 42
3 34
3 2
35 35
35 4
35 14
35 44
35 18
13 13
13 12
13 25
13 5
13 1
13 8
13 31
20 20
20 27
20 19
20 38 
```

我的 C++ 代码是：

```
 include <stdlib.h>
    include <malloc.h>
    include <iostream>
    include <fstream>

    using namespace std;

    void allocateMatrix(int **& A, int row, int col)
    {
        int i;
        A = new int*[row];
        for (i=1; i<=col; i++)
            A[i] = new int[col];
    }

    void ReadData(int **& A, int row, int col) // read data from file
    {  
    int i,j;
    ifstream REL1;
    REL1.open ("REL");  // open file for reading                
    for(i=1;i<=row;i++)   // row loop
    {
        for(j=1;j<=col;j++)  // column loop
        {
            REL1 >> A[i][j]; // read data into matrix
        }
        REL1.close(); // close the file                
    }
    }

    void Display(int **& A, int row, int col) // display matrix
    { 
    int i,j;
    for(i=1;i<=row;i++)
    {
        for(j=1;j<=col;j++)
        { 
            cout << A[i][j] << "\t ";  // display numbers
        }
        cout << endl;
    }    
    }

    void Cero(int **& A, int row, int col) // display matrix
    {
    int i,j;
    for(i=1;i<=row;i++)
    {
        for(j=1;j<=col;j++)
        {
            A[i][j]=0;
        }
    }   
    }   

    int main()
    {
    int tm,rowR,colR,rowM,colM,**A,**B; 

    ifstream TM;
    TM.open("TM");
    TM >> tm;
    TM.close();

    rowR = rowM = colM = tm;
    colR = 2;

    allocateMatrix(A, rowM, colM);
    allocateMatrix(B, rowR, colR);
    Cero(A, rowM, colM); 
    //Display(A, rowM, colM);
    ReadData(B ,rowR, colR);
    Display(B, rowR, colR);

    } 
```

并且...当我在 bash 中运行它时，shell 提示我：

```
28   28  
0    0   
Segmentation fault (core dumped) 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:20:27.467

```
for(i=1;i<=row;i++)   // row loop
{
    for(j=1;j<=col;j++)  // column loop
    {
        REL1 >> A[i][j]; // read data into matrix
    }
    REL1.close(); // close the file                
} 
```

阅读第一行后，您将关闭文件。将文件结束行移出循环。

```
for(i=1;i<=row;i++)   // row loop
{
    for(j=1;j<=col;j++)  // column loop
    {
        REL1 >> A[i][j]; // read data into matrix
    }               
}
REL1.close(); // close the file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T00:17:52.023

数组索引从 0 开始，而不是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T10:07:56.223

这是一个典型的、健壮的、虽然不是完全最优的读取输入的通用方法：首先读取每一行，然后将每一行解析为标记。当然可以添加长度检查，这样您就不会尝试读取具有数十亿行的文件，但我将其留给您。

请注意，我们从不明确调用`close()`，因为这不是必需的。

```
#include <iostream>
#include <sstream>
#include <iterator>  // for istream_iterator
#include <string>    // for getline and string
#include <vector>    // for vector
#include <cstdlib>   // for exit

namespace
{
    void die(int code, char const * msg)
    {
        std::cerr << msg << std::endl;
        std::exit(code);
    }
}

int main()
{
    std::ifstream tm("TM.txt");

    if (!tm) { die(1, "Could not open file."); }

    std::vector<std::vector<int>> matrix;

    for (std::string line; std::getline(tm, line); )
    {
        std::istringstream iss(line);
        std::vector<int> row(2);

        if (!(iss >> row[0] >> row[1])) { die(1, "Invalid line!"); }

        matrix.push_back(row);
    }

    // done, now use matrix[i][j]
} 
```

在 C++11 中，您可以添加各种小的优化，但现在不要介意。在更一般的设置中，您还可以删除每行仅包含两个元素的限制，而是读取尽可能多的元素，可能会检查最终大小：

```
std::vector<int> row(std::istream_iterator<int>(iss), std::istream_iterator<int>());
// check that row.size() has the desired value! 
```

最后，您可能想在外部循环中添加一个计数器，如果行数超出预期（例如，在您的情况下为 46 行），则中止，这样您就不会被巨大的输入文件破坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:50:08.687

感谢@KerrekSB 的回复。这一级别的 C++ 编程比 C++ 的基本知识领先一步。不过，我尝试了您的建议并重写了发布的代码：

```
#include <stdlib.h>
#include <malloc.h>
#include <iostream>
#include <fstream>
#include <sstream>
#include <iterator>  // for istream_iterator
#include <string>    // for getline and string
#include <vector>    // for vector
#include <cstdlib>   // for exit

using namespace std;

namespace
{
    void die(int code, char const * msg)
    {
        std::cerr << msg << std::endl;
    std::exit(code);
    }
}

void AllocateMatrix(int **& A, int row, int col)
{
int i;
A = new int*[row];
for (i=0; i<col; i++)
    A[i] = new int[col];
}

void ReadData(int **& A, int row, int col) // read data from file
{  
int i,j,in;
ifstream REL1;
REL1.open ("REL");  // open file for reading                
for(i=0;i<row;i++)   // row loop
{
    REL1 >> in; // read data into matrix
    for(j=0;j<col;j++)  // column loop
    {
        A[i][j]=in;
    }
}
REL1.close(); // close the file                
}

void Display(int **& A, int row, int col) // display matrix
{ 
int i,j;
for(i=0;i<row;i++)
{
    for(j=0;j<col;j++)
    { 
        cout << A[i][j] << "\t ";  // display numbers
    }
}
cout <<endl;    
}

void Cero(int **& A, int row, int col) // display matrix
{
int i,j;
for(i=0;i<row;i++)
{
    for(j=0;j<col;j++)
    {
        A[i][j]=0;
    }
}   
}   

int main()
{
int tm,rowR,colR,rowM,colM,**A,**B; 

ifstream TM;
TM.open("TM");
TM >> tm;
TM.close();

rowR = 46; 
rowM = colM = tm;
colR = 2;

AllocateMatrix(A, rowM, colM);
AllocateMatrix(B, rowR, colR);
Cero(A, rowM, colM); 
//Display(A, rowM, colM);
//ReadData(B ,rowR, colR);

std::ifstream rel("REL");
if (!rel) { die(1, "Could not open file."); }
std::vector<std::vector<int> > matrix;
for (std::string line; std::getline(rel, line); )
{
    std::istringstream iss(line);
    std::vector<int> row(2);
    if (!(iss >> row[0] >> row[1])) { die(1, "Invalid line!"); }
    matrix.push_back(row);
}

Display(B, rowR, colR);
} 
```

当我执行它时，它会提示：

```
Invalid line! 
```

# c++ - 匿名命名空间中的静态结构

> ID：10669800
> 
> 赞同：1
> 
> 时间：2012-05-20T00:14:28.513
> 
> 标签：c++, initialization, static-initialization

那这段代码实际上是做什么的？

```
#include <iostream>
#include <cstdio>
#include <cstdlib>
using namespace std;

void test();

namespace {
    static struct StaticStruct {
        StaticStruct() { 
            test(); 
        }
    } TheStaticSupport;
}

int main(void) {

    return 0;
}

void test() {
    printf("testing function\n");
} 
```

为什么测试函数实际上被调用？为什么使用“匿名”命名空间？我在一个开源项目中找到了这段代码......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T00:17:25.173

这个：

```
static struct StaticStruct {
    StaticStruct() { 
        test(); 
    }
} TheStaticSupport; 
```

相当于这个：

```
struct StaticStruct {
    StaticStruct() { 
        test(); 
    }
};

static StaticStruct TheStaticSupport; 
```

它定义了一个名为的类型`StaticStruct`和一个以内部链接命名的类型的实例`TheStaticSupport`（不过，由于它是在未命名的命名空间中声明的，因此`static`是多余的）。

`TheStaticSupport`在进入之前调用for的构造函数`main()`来构造对象。这调用了`test()`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:21:17.777

匿名命名空间为包含的对象提供了内部链接，因为它们的完全限定名称永远不会被翻译单元之外的任何人知道。这是 C 语言中老练的男人的版本`static`。

请注意，您确实声明了一个类型为 的全局对象`StaticStruct`，并且*它的*构造函数（在调用之前运行`main()`）调用了`test()`。

# java - 根据屏幕尺寸调整自定义视图

> ID：10669801
> 
> 赞同：4
> 
> 时间：2012-05-20T00:14:29.153
> 
> 标签：java, android, android-layout, drawing

我一直在努力寻找解决方案，但也许我不明白“onMeasure()”方法在 Android 中的效果如何！

这是我第一次在 Android 中制作“动态”自定义视图，因此我了解到您需要覆盖“onMeasure()”方法才能根据屏幕大小调整视图大小。我希望我的视图是屏幕宽度的一半，再加上一点额外的（这个数字是任意的，只要它相对较小，在 3 到 5 之间），所以我为 onMeasure 方法编写了以下代码：

```
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    int halfWidth = (MeasureSpec.getSize(widthMeasureSpec) / 2) - 5;

    this.setMeasuredDimension((int) halfWidth, (int) halfWidth);
} 
```

我确信这是一种糟糕的处理方式，因为我在网上找到的所有代码都比我在尝试完成类似的事情时所做的要多得多！

当我在 XML 中将这些视图彼此相邻放置时，第一个视图的大小是正确的（它确实是宽度的一半减去一点点），但第二个视图要小得多，可能是宽度的一半最后一个视图减去更多！（我会发布一张照片，但不幸的是我没有足够的声誉来这样做......）

*应该*发生的是这两个框应该是相同的大小，无论我将它们放在 XML 中的什么位置。它们都应该是屏幕宽度的一半，减去一点额外的。

我知道这与我如何使用“setMeasuredDimension()”有关，但我不知道它是什么。我真的希望有人能为我澄清一下！谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T13:41:47.650

实际上，我今天通过基于蒂姆所说的一些实验完成了这一点。我离开了“onMeasure()”，只为它写了这段代码：

```
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    // Call the super class.
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    // Set the dimensions of this view.
    this.setMeasuredDimension((int) width, (int) width);
} 
```

宽度是一个全局浮点数。宽度从何而来？我从我在视图中编写的这个方法派生了宽度以调整大小：

```
public void initSize(float size)
{
    width = size;
    this.invalidate();
} 
```

我调用“invalidate()”来重绘视图。不过有些东西必须调用这个方法，所以我在活动中这样做了。首先，我使用以下代码在 Activity 中获取屏幕大小，而不是在 View 中：

```
Display thisDisplay = this.getWindowManager().getDefaultDisplay();
Point desiredSize = new Point();
display.getSize(desiredSize);
int width = size.x; 
```

您曾经可以在“thisDisplay”上调用名为“getWidth()”的方法，但该方法现在已弃用，因此您应该改用“getSize()”。最后，在初始化构造函数之后，立即调用“initSize()”方法：

```
nameBox = (InfoBoxView) findViewById(R.id.nameBox);
    nameBox.initSize(width); 
```

现在，所有视图都将具有相同的大小。我不知道这是否是*最好*的方法，但它现在有效，我想我会把它贴在这里让每个人都知道。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-03T18:30:50.457

老问题..但这里是 onMeasure ，它使视图呈方形并且小于屏幕的一半，而无需在 Activity 中编写任何额外的代码。您可以更改它以产生任何其他尺寸比。

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // get view dimensions suggested by layout
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    // width should never be more than half of a screen
    int displayWidth = getContext().getResources().getDisplayMetrics().widthPixels;
    width = Math.min(width, displayWidth/2);
    // always make it a square (use the smaller dimension of the two)
    if (width > height) {
        width = height;
    } else {
        height = width;
    }
    // use the values
    super.onMeasure(
            MeasureSpec.makeMeasureSpec(width, MeasureSpec.EXACTLY),
            MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY)
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:34:16.980

我认为您需要阅读有关[onMeasure](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)的文档并了解它是如何工作的。

它实际上被多次调用，具体取决于视图所在的布局容器的类型，具体细节会因视图组而异。通常，第一次尺寸最松散，然后随着更多组件的布局变得更细粒度。

当 onMeasure 被调用时，你首先想通过调用来查看你收到了什么样的 MeasureSpec `MeasureSpec.getMode(widthMeasureSpec)`。这将返回`MeasureSpec.AT_MOST`或`MeasureSpec.EXACTLY`。

如果它返回 AT_MOST，则表示此时视图可以填充的最大可能区域。当您布置第一个视图时，可能会说您的第一个视图最多可以使用屏幕的整个宽度，因为还没有布置其他组件。将容器的整个宽度除以 2，然后通过调用`setMeasuredDimension`.

接下来，当`onMeasure`为您的第二个视图调用时，现在只有容器水平宽度的一半可用，因为您已经为第一个视图请求了一半的屏幕。

然后将该数字除以 2，使第二个视图仅占容器水平宽度的 25%，而第一个视图占水平宽度的 50%。

我建议覆盖 onMeasure 不是让视图使用一半屏幕的正确方法，尽管我想解释它是如何工作的。您认为仅使用标准 xml 布局无法实现这一点有什么原因吗？

**编辑**：再次阅读您的问题，我认为您的问题是您假设 widthMeasureSpec 与屏幕宽度的含义相同（它不是）。您可以尝试正确查询屏幕的宽度并`setMeasureDimension`以此为基础进行调用，尽管它可能并非在每种情况下都有效。如果您不小心，您可能会要求宽度大于根据测量分配给您的宽度。或者有时你会被称为`onMeasure`with `MeasureSpec.EXACTLY`，此时你别无选择，只能使用提供的宽度或高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T05:14:58.197

我认为问题在于父视图的大小也已减小，根据您的说法，可能是大小的一半。因此我建议代码：

```
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
   // Prevent reducing the size of the parent view
   super.onMeasure(widthMeasureSpec, heightMeasureSpec);

   int halfWidth = (MeasureSpec.getSize(widthMeasureSpec) / 2) - 5;

   this.setMeasuredDimension((int) halfWidth, (int) halfWidth);
} 
```

另外，您的 XML 布局是什么样的？这可能也需要修复，尽管怀疑这是问题所在。

我没有用我的 Android SDK 尝试这个。

# winapi - 无法将我的应用程序添加到自动启动

> ID：10669803
> 
> 赞同：0
> 
> 时间：2012-05-20T00:14:39.503
> 
> 标签：winapi, registry, autostart

我用纯 C++ 编写小应用程序。但现在我鼓励奇怪的问题。我想将我的应用程序添加到自动启动，但它不起作用。我使用此代码访问注册表：

```
BOOL SetKeyData(HKEY hRootKey, WCHAR *subKey, DWORD dwType, WCHAR *value, LPBYTE data, DWORD cbData)
{
    HKEY hKey;
    if(RegCreateKeyW(hRootKey, subKey, &hKey) != ERROR_SUCCESS)
        return FALSE;

    LSTATUS status = RegSetValueExW(hKey, value, 0, dwType, data, cbData);
    if(status != ERROR_SUCCESS)
    {
        RegCloseKey(hKey);
        return FALSE;
    }

    RegCloseKey(hKey);
    return TRUE;
} 
```

起初我认为问题出在我服务的数据中，所以我像这样将带有路径的 WCHAR 转换为 LPBYTE 并以这种方式执行此函数：

```
size_t i;
char *pMBBuffer = (char *)malloc( MAX_PATH );
wcstombs_s(&i, pMBBuffer, MAX_PATH, my_program, MAX_PATH-1 );
SetKeyData(HKEY_LOCAL_MACHINE, L"Software\\Microsoft\\Windows\\CurrentVersion\\Run", REG_SZ, L"zwApplication", (LPBYTE)pMBBuffer, i)) 
```

我得到状态码 ERROR_ACCESS_DENIED。也许问题是 Windows 7 中的策略，但我认为我可以完全访问 HKEY_LOCAL_MACHINE 中的所有内容。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:42:06.647

写入 HKEY_LOCAL_MACHINE 要求您的应用程序以提升的权限运行。这意味着您的应用需要在其[清单文件](http://msdn.microsoft.com/en-us/library/bb756929.aspx)中进行设置。

如果没有这个，您只能写入 HKEY_CURRENT_USER，或从 HKEY_LOCAL_MACHINE**读取**- 但对于您的自动启动要求，这也可以正常工作。

# objective-c - NSMutableArray removeAllObjects 问题

> ID：10669806
> 
> 赞同：0
> 
> 时间：2012-05-20T00:15:38.173
> 
> 标签：objective-c, uitableview, ios5, nsmutablearray, xcode4.2

我正面临一个问题，无缘无故`NSMutableArray`地给我一个。`Exc_Bad_Access`

我有一个`UITableView`包含大约 700 条记录的记录，我想对其激活一个过滤过程，我正在使用以下方法来过滤的内容`UITableView`：

```
- (void) filterTableContentWith:(int)_minValue andWith:(int)_maxValue {

       [tableContent removeAllObjects];
       tableContent = [[NSMutableArray alloc] initWithArray:originalTableContent copyItems:YES];

       if (_minValue == 0 && _maxValue == 0) {
            NSLog(@"This is mean that no filter is activate here");
       } else {
            for (int x = ([tableContent count] - 1); x >= 0; x--) {
                 if ([[[tableContent objectAtIndex:x] objectForKey:@"price"] intValue] < _minValue && [[[tableContent objectAtIndex:x] objectForKey:@"price"] intValue] > _maxValue) {
                       [tableContent removeObjectAtIndex:x];
                 }
            }
       }
       NSLog(@"tableContent count = %@",[tableContent count]);
       [self.tableView reloadData];
} 
```

当我调用这个方法时，它给了`Exc_Bad_Access`我`NSLog(@"tableContent count ...`

我认为这`[tableContent removeAllObjects];`是释放数组，但这是不合理的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:20:25.453

`count`返回一个`int`，因此将您的更改`NSLog`为：

```
NSLog(@"tableContent count = %d",[tableContent count]); 
```

你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:40:48.850

除了使用 %d 更改计数的 NSLog 之外，我认为以下代码比删除循环中的内容更好：

```
...
} else {
  NSPredicate* predicate = [NSPredicate predicateWithFormat:
    @"price < %d AND price > %d", _minValue, _maxValue];
  NSArray* array = [tableContent filteredArrayUsingPredicate:predicate];
  tableContent = array;
}
... 
```

# objective-c - Xcode中可能的编译器错误？

> ID：10669810
> 
> 赞同：-1
> 
> 时间：2012-05-20T00:16:15.647
> 
> 标签：objective-c, ios, xcode, xcode4.2

情况如下：我创建了一个自定义视图类，其中 UITextView 作为其成员。在某些事件发生后，我将 textView 作为第一响应者。

```
@inteface MyCustomView : UIView{
   UITextView* textView;
}

- (void) doSomething;

@end 
```

在程序执行期间，我向 MyCustomView 的实例发送 [doSomething] 消息。

```
[myCustomViewInstance doSomething]; 
```

发生的事情非常有趣，程序因抱怨 UITextView:doSomething 是无法识别的选择器而崩溃。

为什么程序在 UITextView（它的成员变量）而不是 MyCustomView 的实例上调用 doSomething。

这里可能有什么问题？（当然，这是我正在做的事情的规范版本，但我不明白在任何逻辑错误情况下这可能是真的，除非在编译器级别搞砸了）

你认为我应该进一步调查什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:25:50.020

首先，Objective-C 没有“成员”变量，它有实例变量。小事；但术语确实很重要。

其次，崩溃正在发生，因为`myCustomViewInstance`它指向的是一个实例，`UITextView`而不是你的子类。这可能是因为您无意中进行了这样的分配，或者可能是因为您遇到了过度释放问题，并且碰巧所述变量最终巧合地指向了错误的对象。

最后，虽然肯定存在编译器错误，但如此简单的代码*极不可能*揭示迄今为止未知的编译器错误。您使用的编译器与用于编译操作系统数百万行代码的编译器完全相同；这样一个简单的错误很可能意味着没有应用程序可以运行，或者很可能设备甚至无法启动。

假设所述代码行实际上是崩溃的。

# python - Django Scale (2012) 吗？

> ID：10669813
> 
> 赞同：-1
> 
> 时间：2012-05-20T00:17:05.270
> 
> 标签：python, mysql, django, web-applications

这个问题的答案[——Django 可以扩展吗？](https://stackoverflow.com/q/886221/651174)- 问同样的问题，大约已经过时了 2.5 年。我希望这可以就主题和相关链接进行很好的讨论/潜在的 wiki。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:25:31.107

这个问题的答案是——是和不是。

Web 应用程序的可扩展性完全取决于实现和您的要求。如果正确完成（需求套件 Django），那么，

1.  Django 可以很好地水平扩展。
2.  每件事都是垂直扩展的，Django 也不例外。

有关大规模扩展的更多指南，

1.  Disqus 是如何做到的 -> [http://blog.disqus.com/post/1083759994/scaling-disqus](http://blog.disqus.com/post/1083759994/scaling-disqus)
2.  Pownce -> [http://www.slideshare.net/mmalone/scaling-django-1393282](http://www.slideshare.net/mmalone/scaling-django-1393282)

请下次在这里提问之前做功课。

# java - 从Java中的单独进程捕获击键

> ID：10669819
> 
> 赞同：4
> 
> 时间：2012-05-20T00:18:58.407
> 
> 标签：java, process, keylistener, keyevent, awtrobot

我希望发生这种情况：

1.  启动我的java程序
2.  我的 java 程序启动 notepad.exe
3.  如果我在记事本中输入一个字母，我的 java 程序应该做出反应并打印出该字母

简而言之：是否可以为另一个进程创建一个关键事件侦听器？java程序不会有焦点。

如果不可能，我希望能够在我的 Java 摆动窗口和记事本进程之间改变焦点。例如：

A）我的 java 程序有焦点（小摆动窗口），我输入字母“A”
B）记事本快速获得焦点，并在那里输入字母 A（例如使用 Robot 类）
C）我的 java 程序再次获得焦点

* * *

引用[为位于系统托盘中的 Java 程序创建键盘挂钩中给出的答案](https://stackoverflow.com/questions/10340024/creating-a-keyboard-hook-for-a-java-program-that-sits-in-the-system-tray/)

所以，创建一个键盘钩子并不像看起来那么容易，java 没有提供直接的方式来与系统事件进行交互以保证安全；因为它可能会导致有关 JVM 、系统内存和 Java 框架的可移植性的严重问题。

你有 4 种方法来制作全局键盘钩子：

1.  学习 JNI / JNA，我更喜欢 JNA，因为它比 JNI 容易得多，在这两种情况下你都需要处理 .dll 文件。
2.  使用 JIntellitype ，正如您所说，它会产生一些问题。
3.  Sergei Biletnikov 的优雅解决方案在这里[http://biletnikov-dev.blogspot.com/2009/09/global-hotkeys-for-java-applications_25.html](http://biletnikov-dev.blogspot.com/2009/09/global-hotkeys-for-java-applications_25.html)
4.  忽略 Java，并尝试 Autoit V3（我不是 100% 确定它，但我认为您可以将信号/事件从 Autoit 发送到您的 Java 应用程序，因此 Autoit 可以作为捕捉全局击键的桥梁）

使用数字 3，这是一个很好的教程。如果链接有 404'd 可能项目源仍然存在：gigapeta.com/dl/1917618aba749a

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:22:06.443

使用您提出的解决方案＃1：

> 学习 JNI / JNA，我更喜欢 JNA，因为它比 JNI 容易得多，在这两种情况下你都需要处理 .dll 文件。

你应该看看这个stackoverflow线程：

[Windows 中的 JNA 键盘挂钩](https://stackoverflow.com/questions/3078646/jna-keyboard-hook-in-windows)

有演示 JNA 密钥挂钩的复制/粘贴代码。您需要从[http://jna.java.net/](http://jna.java.net/)下载 JNA 依赖项才能使示例工作。您甚至不需要摆弄愚蠢的 DLL。

此外，您可能想尝试一下这个库。虽然我没有这方面的经验，但它出现在我的谷歌搜索“java 键盘挂钩”中。它似乎完成了拦截击键的目标：

[http://code.google.com/p/jnativehook/](http://code.google.com/p/jnativehook/)

请注意，您需要一些额外的本机代码才能查看当前的“活动窗口”是什么。如果活动窗口与“Notepad.exe”匹配，那么您应该记录本机按键事件。

祝你好运！

# c# - 具有未知数量的 URL 变量的 RedirectToAction

> ID：10669820
> 
> 赞同：1
> 
> 时间：2012-05-20T00:19:01.400
> 
> 标签：c#, asp.net-mvc-3, query-string, redirecttoaction

我将以此作为开头，如果您知道更好的方法来做我想做的事情，请告诉我。

因此，我在我的布局（又名 MasterPage）中登录，以便用户无论在哪个页面上都可以登录。（我想确定）所以，在他们成功登录后，我想将他们重定向回他们所在的页面。我使用 Request.UrlReferrer.AbsoluteUri 来获取 URI 并解析出 Controller 名称和 Action 名称。带有动作名称的长是未知数量的 URL 变量，可能没有，也可能很多。因此，MVC3 不喜欢在 Action 名称中传递的变量。我在代码的其他部分通过以下方式解决了这个问题：

`return RedirectToAction("Message", new { msg = "error" });`

但是，就像我说的，我不知道有多少变量会进来，也不知道变量的名称。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:31:19.040

这是我的登录后操作。如果不存在这样的 url，它将重定向到用户所在的最后一页或主页

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (MembershipService.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

这部分是你需要的

```
 if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
            && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
        {
            return Redirect(returnUrl);
        }
        else
        {
            return RedirectToAction("Index", "Home");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T21:40:15.380

我找到了一个很好的方法来做到这一点。由于我已经在解析 URI，因此我可以获取变量和值，然后将它们添加到

`RouteValueDictionary queryString = new RouteValueDictionary();`

然后我可以传递给：

```
return RedirectToAction(action, queryString); 
```

# cordova - Phonegap - 强制屏幕弹出警报

> ID：10669823
> 
> 赞同：1
> 
> 时间：2012-05-20T00:19:44.460
> 
> 标签：cordova

我是 Phonegap 的新手，我目前正在构建一个简单的警报应用程序。一切正常，除了我不知道如何打开屏幕并在播放闹钟时显示应用程序（例如，就像普通电话预定闹钟的工作方式一样）。

我正在使用 jQuerymobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:11:51.863

查看 localnotifications 插件... [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/LocalNotifications](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/LocalNotifications)

# node.js - 使用 Node.js 和 MongoDB 从外部 URL 将图像保存到 S3

> ID：10669824
> 
> 赞同：2
> 
> 时间：2012-05-20T00:20:02.723
> 
> 标签：node.js, mongodb, amazon-s3

我正在尝试使用 Node.js 和 MongoDB 将图像从第三方 API 保存到我自己的 S3 存储桶中。API 提供第三方服务器上图像的 URL。我以前从未这样做过，但我假设我必须将图像下载到我自己的服务器，然后将其上传到 S3？

我应该使用 GridFS 将图像保存到 mongodb，然后在 S3 上删除它吗？如果是这样，最好的方法是什么？

我已经阅读并重新阅读了上一个问题：

[MongoDB GridFS 使用 Node.JS 保存文件的问题](https://stackoverflow.com/questions/6936396/problem-with-mongodb-gridfs-saving-files-with-node-js)

但是我找不到关于如何确定 JPEG 图像文件的缓冲区/块大小和其他属性的好的文档。

一旦我将文件保存在我的服务器/数据库上，那么我似乎应该使用：

[https://github.com/appsattic/node-awssum](https://github.com/appsattic/node-awssum)

将其上传到 S3。这是一个好主意吗？

如果这是一个明显的答案，我深表歉意，在数据库和服务器脚本方面我很绿色。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-29T04:19:47.387

最简单的做法是将图像保存到磁盘上，然后使用 AwsSum 的 S3 PutObject 操作从那里流式传输上传。或者，如果您在缓冲区中有文件内容，则可以使用它。

查看以下两个示例，它们应该可以帮助您弄清楚该怎么做：

*   [https://github.com/appsattic/node-awssum/blob/master/examples/amazon/s3/put-bucket.js](https://github.com/appsattic/node-awssum/blob/master/examples/amazon/s3/put-bucket.js)
*   [https://github.com/appsattic/node-awssum/blob/master/examples/amazon/s3/put-object-streaming.js](https://github.com/appsattic/node-awssum/blob/master/examples/amazon/s3/put-object-streaming.js)

如果您需要更多帮助，请告诉我。:)

干杯，安迪

免责声明：我是 AwsSum 的作者。

# eclipse - 无法在 Eclipse 中打开现有项目

> ID：10669825
> 
> 赞同：15
> 
> 时间：2012-05-20T00:20:11.147
> 
> 标签：eclipse

我正在尝试在 Eclipse 中打开一个现有的 Android 项目。我去了文件>导入>常规>现有项目（或类似的东西）。我选择了文件项目文件夹。但是每次我尝试打开文件夹时，我得到的只是一个错误。

*   某些项目无法导入，因为它们已存在于工作区中*

还有其他方法可以打开我的项目吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T00:21:34.413

您不能导入名称已存在于当前 Eclipse 工作区中的项目。

解决这个问题的最可靠方法是**[切换工作区](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-workspaceswitch.htm)**（菜单文件/切换工作区），并创建一个新工作区（您将能够在其中导入该项目）。

![切换工作区](../Images/8210f5b29439c9e6c522411ade48a300.png)

更复杂的解决方案是尝试[重命名当前工作区中的现有项目](http://impossible-is-development.blogspot.fr/2010/08/some-projects-cannot-be-imported.html)。

检查其他原因：

*   “[某些项目无法导入，因为它们已经存在于 Eclipse 的工作区错误中](https://stackoverflow.com/questions/6715403/some-projects-cannot-be-imported-because-they-already-exist-in-the-workspace-err)”
*   "[从 Project Explorer 中删除的项目，无法重新导入](https://stackoverflow.com/questions/8703085/erased-project-from-project-explorer-and-cannot-re-import-it)"
*   “[如何导入你刚刚在eclipse中删除的项目](https://stackoverflow.com/questions/8415696/how-to-import-a-project-which-u-just-deleted-in-eclipse)”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-07T11:15:44.250

我遇到了同样的问题，但它是按设计的。当人们关闭项目时，它只会使项目在 Eclipse 项目视图中不可用。这就是为什么人们认为它已完全从视图中删除。

所以你所要做的就是去

> 窗口 -> 显示视图 -> 项目资源管理器

现在，您将在 Project Explorer 侧边栏中看到您的项目，其中包含一个不同的已关闭文件夹图标，如图所示。

![当您从项目资源管理器中查看时，这就是关闭的项目在您的工作区中的外观。](../Images/64ca7f96319beaf3ddd4f013a212a775.png)

右键单击并打开项目后，您将看到您正在寻找的魔法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-11T20:19:40.993

我有同样的问题，我终于解决了。因此，假设您想在 Eclipse 上打开“TEST”项目。您的项目位于此路径中：那么您的工作区不`C:\Users\Sabina Comp\Desktop`应该是 . 您可以通过转到文件->切换工作区->其他来切换工作区，希望对您有所帮助！`C:\Users\Sabina Comp\Desktop``C:\Users\Sabina Comp\Desktop\TEST`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-22T11:10:20.983

只需删除 .project 文件并尝试在 Eclipse 文件资源管理器中再次打开该项目 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-19T04:43:25.927

I faced the same problem. Maybe the cause of your problem is as simple as mine.

I closed (not delete) my project in the Java Browsing view. Unlike the Java view, the project becomes invisible in the Java Browsing view. So I thought I deleted the project. But turns out my project is still in use when I try to import it.

So I went to Java Browsing view and right click the blank space in the Projects panel, click Open Project and the project is back!

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-13T10:37:13.577

就我而言，问题是 - 我从其位置删除了代码目录。同时我关闭了 Eclipse。因此，当我重新打开 Eclipse 时，它​​搜索了项目并且无法获取它。

我在原始位置恢复了代码目录。打开 Eclipse。当再次尝试导入项目时，我发现它处于`closed`状态。

我打开它，它开始正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-24T04:49:02.940

这对我有用：

右键单击项目>源>格式

[![](../Images/ee8360328c504de5952f9e9b7702fe33.png)](https://i.stack.imgur.com/Sizlj.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-11T05:52:21.753

我猜您想创建现有项目的副本并对新项目进行更改。或者您有一个名称与现有项目名称匹配的项目，并且您也想导入新项目。

在第一种情况下，您只需在 Eclipse 中的包或项目资源管理器中简单地复制（Ctrl+C）和粘贴（Ctrl+P），它会询问您一个新的项目名称——而不是复制项目文件夹在 Windows 资源管理器中并重命名项目文件夹名称。

如果您在 windows 资源管理器中复制了项目并尝试在 eclipse 中导入项目，您将收到上述错误，或者如果您有一个名称与 eclipse 中现有项目名称匹配的项目，您也会收到上述错误。两者的解决方案 - 是删除 .project 、 .classpath 和 .settings 文件并导入项目。如果您更改了文件夹名称，它将成功导入。

提示：如果它是 maven 项目，您可以将其作为 Java 项目导入，然后右键单击该项目并配置 -> 转换为 maven 项目。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-06T10:57:48.077

右键单击工作集-> 属性。您应该能够看到工作区中可用的所有项目。选择它。接下来，所有项目都应列在您的工作集中。

# java - Java ArrayList - 返回 ArrayList

> ID：10669826
> 
> 赞同：0
> 
> 时间：2012-05-20T00:20:18.917
> 
> 标签：java, file, io, arraylist

基本上我有两个代码片段。一个调用一个填充并返回一个的函数`ArrayList`，但我遇到了一些问题。下面是两个代码：

1.  定义接收`ArrayList`，然后捕获返回`ArrayList`。

    ArrayList agentArray = new ArrayList<>(); agentArray = agentListings(strInput);

2.  构建 ArrayList 然后返回它。

    ```
    public static ArrayList agentListings(String strInput) throws FileNotFoundException {
         File inputFile = new File(strInput);
         Scanner in = new Scanner(inputFile);
         ArrayList<String> agentArray = new ArrayList<>();

         while (in.hasNextLine()) {
             agentArray.add(in.next());
             in.next();
             in.next();
             in.next();
         }

         Collections.sort(agentArray);
         in.close();
         return agentArray;
     } 
    ```

问题是当我回到我试图将它放入`ArrayList`曾经返回的地方时，它似乎工作正常。但是当我尝试将其写入文件时，它会从此代码中引发此错误。

```
out.write(agentArray.get(1)); 
```

我正在写入一个文件，而不是使用简单文本等的缓冲写入器。

基本上我不知道如何将 ArrayList“agentArray”写入文件。我在做什么明显的错误？

===============================================

***编辑：*** 忘记包含错误。当我将鼠标悬停在`out.write(agentArray.get(1));`带有`agentArray`红色下划线的 get 上时，错误是

> 找不到符号符号：变量agentArray
> 位置：类blabla.blabla

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:05:35.237

如果您收到这样的错误：

```
cannot find symbol symbol: varible agentArray
location: class blabla.blabla 
```

1）这是一个编译错误，所以你甚至不应该尝试运行你的程序。

2）错误消息实际上告诉你问题是什么......如果你从编译器的角度考虑它。它是这样说的：

> “此时在代码中，我查找了 的范围内声明`agentArray`，但找不到。我没有尝试查找不在范围内的声明，因为它们无法使用，而我读不懂你的心思……”

现在，我们无法确切地看到问题出在哪里，因为您只向我们展示了片段，而不是与它们相关的代码。但是，假设您了解基本的 Java 范围规则，您应该能够弄清楚。

* * *

当您发布错误消息时，您应该剪切并粘贴真正的错误消息，而不是一些删节/ baudlerized/mangled 版本。如果您希望人们花时间回答，您应该花时间适当地提问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T05:26:12.587

Maybe add a type when declaring agentArray outside your method

```
ArrayList<String> agentArray = new ArrayList<>(); agentArray =agentListings(strInput); 
```

# c# - raisepropertychanged 和 PropertyChanged 有什么区别？

> ID：10669829
> 
> 赞同：11
> 
> 时间：2012-05-20T00:20:32.763
> 
> 标签：c#, mvvm

我认为两者是相同的，但我发现它们只在一个文件中使用，例如下面的代码。这里是 raisepropertychanged 的​​代码。

```
public decimal Amount
        {
            get
            {
                return _amount;
            }
            set
            {
                _amount = value;
                RaisePropertyChanged("Amount");
            }
        } 
```

这里是 PropertyChanged 的​​代码：

```
 public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged(string propertyName)
    {
        // take a copy to prevent thread issues
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

请解释它们之间的区别：

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T00:35:59.277

`PropertyChanged`是一个事件。`RaisePropertyChanged`是用于引发事件的方法。

当然，您可以直接从您的属性设置器调用该事件，但是您必须每次都检查处理程序是否不为空......最好在一个地方进行。

# windows-phone-7 - 如何自定义列表选择器的整页？

> ID：10669832
> 
> 赞同：1
> 
> 时间：2012-05-20T00:21:25.967
> 
> 标签：windows-phone-7, listpicker

> **可能重复：**
> [ListPicker FullMode 所选项目颜色](https://stackoverflow.com/questions/9738204/listpicker-fullmode-selected-item-color)

我有一长串从列表选择器加载的东西，大多是“无用的”。

当我单击列表选择器时，是否可以在打开的整个页面顶部添加一个按钮（所以当我单击它时，我只显示最有用的东西？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:46:02.047

为此，您必须在应用程序中从 Silverlight for Windows Phone 工具包创建[ListPickerPage.xaml](http://silverlight.codeplex.com/SourceControl/changeset/view/74775#1510235)文件的副本，更改它以满足您的要求，然后在您的 ListPicker 控件上将 PickerPageUri 属性设置为新的 ListPickerPage .xaml

# python - Eclipse：“未配置 Python”

> ID：10669846
> 
> 赞同：11
> 
> 时间：2012-05-20T00:23:48.580
> 
> 标签：python, eclipse, pydev

这是正在发生的事情的屏幕截图：

![Python 未配置](../Images/a1e5b74b8e1b8d5d7511b28a4bec2ad6.png)

基本上，我通过命令行执行所有操作，但在 eclipse 中编辑源代码。
此错误会阻止令人讨厌的自动完成功能。

我已经`window>preferences>PyDev>Interpreter - Python`设置了正确的值，但它们并没有留下来，即使我点击了应用，它们似乎也没有用于当前会话。

关于什么可能导致此错误消息的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-24T06:55:47.450

同样有效的是 RClick --> PyDev --> Remove PyDev Project Config。

[![steps_screen_shoot](../Images/93e3ec18397321c381cc37440ee5837e.png)](https://i.stack.imgur.com/leXmP.png)

请注意，即使在清理/构建之后，错误标记也可能不会被删除，您可能需要手动删除标记（只需选择并删除）然后清理，构建并运行

PS：我找不到投票答案中提到的“项目性质”选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-17T07:20:23.480

转到窗口→首选项。在 Preferences 窗口中，展开 PyDev 并选择 Interpreter-Python。单击“新建...”并键入 Python32 作为解释器名称。对于解释器可执行文件，浏览到您的 Python 副本 (C:\Program Files\Python32\python.exe)，然后按打开。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T14:17:05.623

项目属性 > 项目性质并取消选中 python 事物。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-29T07:50:51.183

```
 1\. Select your project and right click and click on Properties
       2\. Select PyDev-Interpreter/Grammer,click on "Click here to configure an    
          Interpreter not listed" Link. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-13T10:11:08.350

在 Mac 上，

```
open eclipse application,   
click preferences    
click PyDev    
Click Interpreter  
Click Python Interpreter  (below Figure 1)
Click Choose from List button (below Figure 2)
Select what ever Python version you want to use  
Click Apply  
Click OK   
Exit Eclipse
ReOpen it and all fixed. 
```

[![在此处输入图像描述](../Images/30734931e2f90de9cf30c015bda4af30.png)](https://i.stack.imgur.com/QVMbs.png) [![在此处输入图像描述](../Images/12b27dfb8e6325cd278b1fcdb8452312.png)](https://i.stack.imgur.com/EUXOf.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T13:32:40.530

当多个用户使用 DropBox 设置时，权限问题（`.pydevproject`在“[如何持久`PYTHONPATH`设置 Eclipse Pydev 项目？](https://stackoverflow.com/questions/9249995/how-to-persist-pythonpath-setting-of-an-eclipse-pydev-project) ”中提到）很容易发生。

例如，请参阅“[如何在 10.5 中修复 Drop Box 权限问题](http://www.macworld.com/article/1136000/105dropbox.html)”（如果您使用的是 Mac，但总体思路也适用于其他类似 unix 的操作系统）

> 此问题的永久解决方法是将正确的 ACL 添加到投递箱文件夹。
> 为此，请打开终端，然后输入此命令 - 请注意，您不能按原样复制和粘贴它，因为您需要将两次出现的 short_username 替换为用户的实际短用户名。
> 出于这个原因，我建议将其复制到 TextEdit 中，根据需要对其进行编辑，然后将其粘贴到终端中。

```
chmod +a "short_username allow list,add_file,search,delete,add_subdirectory,delete_child,readattr,writeattr,readextattr,writeextattr,readsecurity,writesecurity,chown,file_inherit,directory_inherit" /Users/short_username/Public/Drop\ Box 
```

> 运行此命令后，您应该会发现您的 Drop Box 可以正常工作，并且您对其他人留给您使用的文件拥有完全的权限

# ruby-on-rails - Rails - 多个父母的孩子

> ID：10669851
> 
> 赞同：3
> 
> 时间：2012-05-20T00:26:06.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如果我有两个模型 - `parent`and`child`和 parent has_many 孩子，并且我有一个父母数组并且想要检索所有这些父母的所有孩子，有没有一种方法可以在 Rails 中执行此操作而无需手动编写 SQL 语句?

这就是我想要做的：

```
@parents = Parent.where("[various conditions]")
@children = @parents.children 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T00:57:39.210

```
Child.where(:parent_id => @parents.pluck(:id)) 
```

或者

```
@parent_ids = Parent.where("[various conditions]").pluck(:id)
Child.where(:parent_id => @parent_ids} 
```

或者你可以使用加入

```
Child.join(:parent).merge(Parent.where("[various conditions]")) #!!readonly 
```

# c - 防止重复使用文件描述符

> ID：10669853
> 
> 赞同：7
> 
> 时间：2012-05-20T00:26:34.937
> 
> 标签：c, linux, io, posix

在 Linux 中（或更一般地在 POSIX OS 中）是否有保证在程序执行期间不会重用任何文件描述符，即使一个文件已关闭而另一个文件已打开？我的理解是这种情况通常会导致关闭文件的文件描述符被重新分配给新打开的文件。

我正在开发一个 I/O 跟踪项目，如果我可以假设在 open()/fopen() 调用之后，对该文件描述符的所有后续 I/O 都指向同一个文件，这将使生活变得更简单。

我将采用编译时或运行时解决方案。

如果不可能，我可以在处理跟踪文件时进行自己的核算（注意所有打开和关闭调用的位置），但我更愿意在跟踪程序的执行过程中解决问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T00:41:22.080

请注意，[POSIX 要求](http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html#tag_16_357_03)：

> *open* () 函数应返回指定文件的文件描述符，该文件描述符是当前未为该进程打开的最低文件描述符。

因此，从最严格的意义上讲，您的请求将更改程序的环境，使其不再符合 POSIX。

也就是说，我认为你最好的选择是使用[LD_PRELOAD 技巧](https://stackoverflow.com/questions/69859/#69884)来拦截调用`close`并忽略它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:29:41.920

您必须编写一个包含在旧 FD`close(2)`上打开的 SO，`/dev/null`然后`$LD_PRELOAD`在启动应用程序之前将其加载到进程空间中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T00:34:14.450

您必须已经在`ptrace`使用应用程序来拦截其文件打开和关闭操作。

`dup2(X, Y); close(X);`通过将调用“注入”应用程序并调整`Y`为您想要的任何内容来防止 FD 重用似乎是微不足道的。

但是，应用程序*本身*可以`dup2`用来强制重新使用以前关闭的 FD，如果你阻止它可能无法工作，所以我认为你只需要在后处理步骤中处理这个问题。

此外，如果您不允许重复使用，编写一个将用完 FD 的应用程序也很容易。

# javascript - 从 HTML 调用 JavaScript 函数

> ID：10669855
> 
> 赞同：1
> 
> 时间：2012-05-20T00:26:56.203
> 
> 标签：javascript

如何从 HTML 链接执行 JS 对象的函数属性？我有以下JS：

```
function Tester(elem) {
    this.elem = document.getElementById(elem);
}

Tester.prototype.show = function() {
    this.elem.innerHTML = '<a href="javascript: this.test();">test</a>';
};

Tester.prototype.test = function() {
    alert("a");
};  
​ 
```

这是HTML：

```
<script type="text/javascript">
    var test = new Tester("test");
    test.show();
</script> 
```

当我单击呈现的链接时，它无法识别该`test()`功能。当用户单击链接时，我将如何获得它，该`test()`功能被执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T00:32:26.103

正确的方法是创建一个 DOM 元素并使用 JavaScript 附加事件处理程序：

```
Tester.prototype.show = function() {
    var a = document.createElement('a'),
        self = this; // assign this to a variable we can access in the 
                     // event handler

    a.href = '#';
    a.innerHTML = 'test';
    a.onclick = function() {     
        self.test();
        return false; // to prevent the browser following the link
    };

    this.elem.appendChild(a);
}; 
```

由于事件处理程序形成一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，它可以访问外部函数 ( `Tester.prototype.show`) 中定义的变量。请注意，在事件处理程序内部，`this`不是指您的实例，而是指处理程序绑定到的元素（在这种情况下`a`）。[MDN 对`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this).

[quirksmode.org](http://quirksmode.org/)有一些关于事件处理、绑定事件处理程序的各种方法、它们的优缺点、浏览器中的差异以及[事件](http://www.quirksmode.org/js/this.html)[处理程序中的行为方式的](http://www.quirksmode.org/js/this.html)[精彩文章](http://www.quirksmode.org/js/introevents.html)。[`this`](http://www.quirksmode.org/js/this.html)

熟悉[DOM 接口](https://developer.mozilla.org/en/DOM)当然也很有帮助。

# c# - 如何从另一个类文件中的函数使用网络浏览器？

> ID：10669856
> 
> 赞同：0
> 
> 时间：2012-05-20T00:27:15.363
> 
> 标签：c#, browser

这是我的 Program.cs

```
 private void button2_Click(object sender, EventArgs e)
    {
        InputSimulator IS = new InputSimulator();
        IS.SimulateTextInput("login", "username");
        IS.SimulateTextInput("lpass", "password");
        IS.SimulateButtonClick("login");
    } 
```

这是我的 InputSimulator.cs

```
namespace Functions
{
    class InputSimulator
    {
        public void SimulateTextInput(string attName, string attValue)
        {
            Form1 mainForm = new Form1();
            HtmlElementCollection col = mainForm.webBrowser1.Document.GetElementsByTagName("input");

            foreach (HtmlElement element in col)
            {
                if (element.GetAttribute("name").Equals(attName))
                {
                element.SetAttribute("value", attValue);
                }
            }
        }

        public void SimulateButtonClick(string attName)
        {
            Form1 mainForm = new Form1();
            HtmlElementCollection col = mainForm.webBrowser1.Document.GetElementsByTagName("input");

            foreach (HtmlElement element in col)
            {
                if (element.GetAttribute("value").Equals(attName))
                {
                    element.InvokeMember("click");
                }
            }
        }
    }
} 
```

出于某种原因，它给了我一个 NullReferenceException ，我似乎无法弄清楚我做错了什么，因为它没有给我任何直接错误。出错的地方是当我单击按钮时，然后在以下行：

```
HtmlElementCollection col = mainForm.webBrowser1.Document.GetElementsByTagName("input"); 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:33:13.113

您正在创建新的表单实例，该实例是隐藏的（不可见）并且 webBrowser1 未初始化，因此 Document 为空。如果您喜欢使用现有的 Form1 实例，您可以将其作为引用传递给此函数或添加到构造函数中。

例如将其作为参考传递：

```
public void SimulateTextInput(Form1 mainForm, string attName, string attValue)
{
   //Form1 mainForm = new Form1();
   if(mainForm == null)
        throw new ArgumentNullException("mainForm");
   HtmlElementCollection col = mainForm.webBrowser1.Document.GetElementsByTagName("input");

   foreach (HtmlElement element in col)
   {
      if (element.GetAttribute("name").Equals(attName))
      {
         element.SetAttribute("value", attValue);
      }
   } 
```

}

添加到构造函数：

```
class InputSimulator
{
    Form1 mainForm = null;

    public InputSimulator(Form1 inputForm)
    {
        if (inputForm == null)
            throw new ArgumentNullException("inputForm");

        mainForm = inputForm;
    }

    public void SimulateTextInput(string attName, string attValue)
    {
        HtmlElementCollection col = mainForm.webBrowser1.Document.GetElementsByTagName("input");

        foreach (HtmlElement element in col)
        {
            if (element.GetAttribute("name").Equals(attName))
            {
                element.SetAttribute("value", attValue);
            }
        }
    }

    public void SimulateButtonClick(string attName)
    {
        HtmlElementCollection col = mainForm.webBrowser1.Document.GetElementsByTagName("input");

        foreach (HtmlElement element in col)
        {
            if (element.GetAttribute("value").Equals(attName))
            {
                element.InvokeMember("click");
            }
        }
    }
} 
```

# php - 如何将文本作为 PHP 执行

> ID：10669859
> 
> 赞同：6
> 
> 时间：2012-05-20T00:27:38.020
> 
> 标签：php, scripting, execute

我有一个问题，我想获取文本并将文本作为 PHP 执行，但是我该怎么做呢？例如，我在 .txt 文件中有此代码：

```
$tweetcpitems->post('statuses/update', array('status' => wordFilter("The item Blue has             been released on Club Penguin.")));
$tweetcpitems->post('statuses/update', array('status' => wordFilter("The item Green has been     released on Club Penguin."))); 
```

现在的问题是我抓取了这个文本，我想将它作为 PHP 脚本执行，我该怎么做？请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T00:30:41.603

```
eval(file_get_contents('yourfile.txt')); 
```

当心！

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

[http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T07:00:10.143

您可以从同一个脚本同时运行 text 和 eval，但就像前面提到的那样。安全必须非常严格。不过，如果使用得当，eval 功能确实非常强大。试试下面的代码。

```
$b = 123;
$a = "hello <?php echo 'meeeee'; ?>. I just passed $b from the mother script. Now I will pass a value back to the mother script" . '<?php $c; $c = 1 + 8; ?>' .
     "I was call within a function, therefore my variable can't passed to the global script. Nonetheless, let try something globally" .
     "<?php 
        global \$d;
        \$d = 'I am now a global var. Take care though, don\\'t let anyone edit your file' ;
      ";

function parseTxtAsCode($invalue){
    if( !is_string($invalue) ) return false;
    eval('?>' . $invalue);
    echo "\n\n\n\n Can't believe I got this from my child: $c \n";
}

parseTxtAsCode($a);
echo "\n\n\n I am global and this is what I got from the eval function: $d"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:32:22.867

[您可以使用eval](http://php.net/manual/en/function.eval.php)将文本评估为 PHP ；但是，请阅读下面的非常重要的免责声明！

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

```
// $result is a string containing PHP code. Be sure you trust the source of
 // the PHP code prior to running it!
eval( $result ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-15T18:58:11.140

您可以使用 include() 或 require() 函数：

```
include(/your_text_file.txt);

// OR
require(/your_text_file.txt);
```

或 Eval 函数（如第一条评论）

# ios - 将数据重新加载到 UIPickerView

> ID：10669861
> 
> 赞同：6
> 
> 时间：2012-05-20T00:27:56.203
> 
> 标签：ios, xcode, uipickerview

我需要刷新 UIPickerView 中的数据。我正在使用

```
[pickerView reloadAllComponents]; 
```

但我的问题是我也需要重置选定的行，我希望选定的行回到索引 0，此时它与调用 reloadAllComponents 函数之前的索引保持一致

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T00:43:53.343

```
[pickerView selectRow:0 inComponent:0 animated:YES]; 
```

应该这样做

# ms-word - 使用 Coded UI Word 插件访问其他文档字段

> ID：10669863
> 
> 赞同：0
> 
> 时间：2012-05-20T00:28:08.167
> 
> 标签：ms-word, coded-ui-tests

我正在使用来自[http://vsarcodeduiword.codeplex.com/](http://vsarcodeduiword.codeplex.com/)的 ALM Rangers Coded UI Word 插件，并且我希望能够对选定文本中的字段代码进行断言。

我可以对选定的文本进行断言，该文本由 UITestControl 对象表示。问题是 Coded UI Word Add-in 支持的属性是有限的。由于它是开源的，我尝试自己添加对 Fields 属性的支持（我相信所选文本是 Word.Range 对象）

我在上面提到的外接程序中WordAddIn项目的UITestCommunicator.cs中的GetSelectionProperty中添加了下面这行代码：case PropertyNames.Fields: return selection.Fields;

问题是当我尝试访问该属性时，测试失败并出现下面发布的错误。是否有另一种方法来添加支持，或者

测试方法 CuiAutoTagTagTestProject.CuiAutoTagTagTests.InsertOutTag 抛出异常：System.IO.FileNotFoundException：无法加载文件或程序集 'Microsoft.VisualStudio.TestTools.UITest.Extension, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其中之一它的依赖关系。系统找不到指定的文件。Assembly manager加载自：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll在可执行文件C:\Program Files\Microsoft Office\Office14\WINWORD.EXE下运行---详细的错误日志如下。=== 预绑定状态信息 ===LOG: User = WINDWARD\marcusjLOG: DisplayName = Microsoft.VisualStudio.TestTools.UITest.Extension, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a (Fully-specified)LOG ：应用程序库=文件：///C：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:45:11.920

这就是问题所在，有一个文件没有被复制过来。file:///C:/Users/marcusj/AppData/Roaming/Microsoft Visual Studio ALM Rangers/Coded UI Word 2010 Add-in/Microsoft.VisualStudio.TestTools.UITest.Extension.DLL 丢失。

于是解决办法：我搜了C:，在这里找到了：C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies 复制过来，一切都好。

除了向 GetSelectionProperty(WordSelectionInfo, string) 添加一行代码：

```
case PropertyNames.Fields: return selection.Fields; 
```

我还在 WordPropertyProvider (WordExtension/WordPropertyProvider.cs) 中添加了一行代码：

```
map.Add(PropertyNames.Fields, new UITestPropertyDescriptor(typeof(Word.Fields), Read)); 
```

有了这个，一切似乎都很好。

# android - Android ScrollView 不工作

> ID：10669866
> 
> 赞同：2
> 
> 时间：2012-05-20T00:28:34.073
> 
> 标签：android, scrollview

这是我的 .xml 文件，我在其中使用了两个滚动视图，输入 Edittext 和输出 TextView 中的一个。这里有什么问题......它在android设备中不起作用。

另一个问题是，当我转动我的设备时，它只显示输入文本区域。输出文本区域下降。我想看到输入区域的半屏和输出区域的半屏。

怎么解决？？

谢谢

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

  <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="35dp"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/test"
        android:layout_width="60dp"
        android:layout_height="38dp"
        android:text="@string/test" />

    <Button
        android:id="@+id/rdf"
        android:layout_width="60dp"
        android:layout_height="38dp"
        android:text="@string/rdf" />

    <Button
        android:id="@+id/load"
        android:layout_width="75dp"
        android:layout_height="38dp"
        android:text="@string/load" />

    <Button
        android:id="@+id/clear"
        android:layout_width="60dp"
        android:layout_height="38dp"
        android:text="@string/clear" />

    <Button
        android:id="@+id/close"
        android:layout_width="fill_parent"
        android:layout_height="38dp"
        android:text="@string/close" />

  </LinearLayout>

   <ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/input"
            android:layout_width="0dp"
            android:layout_height="175dp"
            android:layout_weight="1"
            android:background="#fff"
            android:ems="10"
            android:gravity="top|left"
            android:textSize="14dp"
            android:inputType="textMultiLine" >

            <requestFocus />
        </EditText>
    </LinearLayout>
   </ScrollView>

   <Button
    android:id="@+id/run"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/run" />

   <ScrollView
    android:id="@+id/scrollView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/output"
            android:layout_width="match_parent"
            android:layout_height="225dp"
            android:background="#fff"
            android:text="@string/output"
            android:textColor="#1e90ff" />
    </LinearLayout>
 </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:10:48.113

尝试为两个滚动视图设置 layout_weight=1 和 layout_height=0dp 而不是它们的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:27:59.417

> 这里有什么问题......它在android设备中不起作用。

这很模糊。你的期望是什么？什么不工作？换句话说，请更具体一点。

但是，根据给出的布局代码，这里有一些建议：

1.  避免硬编码视图的大小。您无法对屏幕尺寸、密度和设备种类繁多的屏幕尺寸做出假设。此外，即使您能够使布局在纵向模式下看起来不错，它可能甚至不会接近横向模式。
2.  如果您只想将单个`View`放入 a 中`ScrollView`，则无需将其包装在`ViewGroup`容器中；只需`View`直接设置，无需再次嵌套，并为视图层次结构增加了一层额外的复杂性。
3.  没有必要用 a`TextView`或`EditText`a包装`ScrollView`，因为这两个视图本身都是可滚动的。

关于您的第二个问题：当键盘弹出时剩下的布局空间很少时，您可以阻止 Android 提取所有 UI 组件。您需要[`IME_FLAG_NO_EXTRACT_UI`](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_FLAG_NO_EXTRACT_UI)在 EditText 或 xml: 中设置标志[`android:imeOptions="flagNoExtractUi"`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aimeOptions)。

我想指出，Android 默认具有这种行为是有原因的。在大多数情况下，强制 UI 的一小部分可见几乎没有意义，更何况用户输入的任何内容可能才是真正重要的。

# linux - bash：一次获取多个数组元素的更简单方法？

> ID：10669867
> 
> 赞同：3
> 
> 时间：2012-05-20T00:28:55.320
> 
> 标签：linux, bash, unix

是否有 *nix 命令格式化输入（由换行符分隔），以便每行只出现特定的最大元素数？例如：

```
$ 是 x | 头-10 | 命令 4
xxxx
xxxx
xx

```

我编写了一个执行此任务的快速`bash`脚本（如下所示），但它看起来很长并且可能效率低下。有一个更好的方法吗？

```
#!/bin/sh

if [ -z "$1" -o -z "$2" ]; then
        echo Usage `basename $0` {rows} {columns}
        exit 1
fi

ROWS=$1
COLS=$2

input=$(yes x | head -${ROWS})
lines=()
i=0
j=0
eol=0

for x in ${input[*]}
do
        lines[$i]="${lines[$i]} $x"
        j=`expr $j + 1`
        eol=0
        if [ $j -ge ${COLS} ]; then
                echo lines[$i] = ${lines[$i]}
                i=`expr $i + 1`
                j=0
                eol=1
        fi
done

if [ ${eol} -eq 0 ]; then
        echo lines[$i] = ${lines[$i]}
fi 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T00:34:04.870

数组可以切片。

```
$ foo=(q w e r t y u)
$ echo "${foo[@]:0:4}"
q w e r 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T02:06:48.730

```
printf '%-10s%-10s%-10s%s\n' $(command | command) 
```

`printf`将一次消耗格式字符串中指定的参数数量并继续直到它们全部消耗。

示范：

```
$ printf '%-10s%-10s%-10s%s\n' $(yes x | head -n 10)
x         x         x         x
x         x         x         x
x         x
$ printf '%-10s%-10s%-10s%s\n' $(<speech)
now       is        the       time
for       all       good      men
to        come      to        the
aid       of        their     country 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T00:49:00.730

```
yes x | head -10 | awk 'BEGIN { RS = "%%%%%%%" } { split($0,a,"\n"); for (i=1; i<length(a); i+=4) print a[i], a[i+1], a[i+2], a[i+3] }' 
```

更具可读性：

```
yes x | \
head -10 | \
awk 'BEGIN { RS = "%%%%%%%" }
     { split($0,a,"\n"); 
       for (i=1; i<length(a); i+=4) print a[i], a[i+1], a[i+2], a[i+3] }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T02:08:27.683

你为什么不尝试类似的东西

```
sed 's|\(.{10}\)|\1\n|' 
```

我在 Window 机器上工作并没有尝试过。我的想法是将所有内容匹配 N 次，然后用匹配的模式和换行符替换它们。

PS 请更正任何语法错误的 sed 表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-24T19:29:54.200

为此，您可以使用[xargs(1)](http://mdoc.su/-/xargs.1)`-n`和or`--max-args=`选项来限制每个命令行的参数数量：

```
$ yes x | head -10 | xargs -n4
x x x x
x x x x
x x
$ 
```

显然，您必须能够信任输入；例如，如果引号不匹配，xargs 就会中断：

```
$ yes 'x"' | head -10 | xargs -n4
xargs: unmatched double quote; by default quotes are special to xargs unless you use the -0 option
$ 
```

# javascript - 带有滚动/加速功能的 Javascript (jQuery) 触摸/滑动垂直轮播

> ID：10669868
> 
> 赞同：3
> 
> 时间：2012-05-20T00:29:05.757
> 
> 标签：javascript, jquery, mobile

我环顾四周，发现了一两个垂直可滑动的旋转木马，但没有一个加速。

基本上，垂直旋转木马上有 10 个项目。如果用户上下拖动，它应该以手指的速度滚动项目。如果用户快速滑动，它应该快速浏览项目。

考虑在任何触摸设备上滚动页面。我希望它就像加速方式一样，除了它不是一个页面，它是一个圆形垂直图像轮播。想象一下老虎机，但您可以用手指滚动物品。

有谁知道这样做的插件？如果没有，我将如何自己制作这个（我目前正在使用hammer.js 进行触摸事件，但它在我的项目中还处于早期阶段，如果有更好的轻量级触摸事件库我可以切换）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:42:27.480

正如@Yuri Barbashov 所说，iScroll 是正确的解决方案。

# .htaccess - 使用 mod_rewrite 重定向移动网站 url

> ID：10669873
> 
> 赞同：0
> 
> 时间：2012-05-20T00:30:41.220
> 
> 标签：.htaccess, mod-rewrite

我需要重写一个 url，以便它将一个 url 变量添加到对子域的所有请求。

例子：

m.mydomain.com ==> m.mydomain.com?mobileFormat=true

这是触发我的网站的移动版本加载的标志。

应该很容易吧？到目前为止我所尝试的一切都不起作用。

这是我目前在 .htaccess 文件中的代码：

```
 RewriteEngine On
   RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-d
   RewriteRule ^([a-zA-Z0-9/-]+)$ /index.cfm%{REQUEST_URI} [PT]

   RewriteRule ^locale/([^/]*)$ /?siteLocale=$1 [L]

   RewriteCond %{HTTP_HOST} ^m\.(.*)$
   RewriteRule ^(.*)$  m.%1/$1?mobileFormat=true [QSA] 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:40:06.913

我假设这是您尝试过的：

```
RewriteCond %{HTTP_HOST} ^m\.(.*)$
RewriteRule ^(.*)$  m.%1/$1?mobileFormat=true [QSA] 
```

QSA 是 Query String Append - 如果他们试图访问的 URL 是：

```
m.mydomain.com?test=yes 
```

那么上面将把它重写为：

```
m.mydomain.com?mobileFormat=true&test=yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:12:55.850

我正在寻找的解决方案是：

```
RewriteCond %{HTTP_HOST} ^m\.(.*)$ [NC]
RewriteCond %{REQUEST_URI} !\.(xml|jpg|gif|png|js|css)$
RewriteRule .? $1?mobileFormat=true [QSA,L] 
```

感谢所有的帮助。

# c# - 在 Windows 窗体中填充点数组

> ID：10669875
> 
> 赞同：0
> 
> 时间：2012-05-20T00:30:43.340
> 
> 标签：c#, .net, fill, points

我使用多维布尔数组作为地图/浮雕/山。

所以基本上，我有：

```
[ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][#][ ][#][#][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][#][ ][#][#][ ][ ][ ][ ][ ][ ][ ][ ][ ]
[ ][#][ ][#][#][ ][ ][#][ ][ ][#][ ][ ][ ]
[ ][#][ ][#][#][ ][ ][#][#][ ][#][#][ ][ ]
[ ][#][#][#][#][#][ ][#][#][#][#][#][ ][ ]
[ ][#][#][#][#][#][#][#][#][#][#][#][#][ ] 
```

作为数组的布尔数组。如果该值为 true，则应该显示一个点。

用 1 像素椭圆填充非常慢。

我试图用所有“有效”像素填充一个点数组，然后使用内置函数，但我找不到一个快速且工作良好的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:32:03.657

为什么不使用要显示的图像创建一个 PNG，然后在图形上所需的位置绘制图像。与绘图功能相比，这些往往非常快。

# java - 读取文件并将文本添加到随机字符位置

> ID：10669876
> 
> 赞同：0
> 
> 时间：2012-05-20T00:32:20.230
> 
> 标签：java, file, replace, random-access

我有一个文本文件，其中包含一系列从 AD 开始的 4194304 个字母（4 MB）。我如何随机指向一个字符并将以下一组字符替换为另一个 100 个字符长的文件并将其写入文件？我实际上目前能够做到这一点，但是当我多次迭代它时，我觉得它真的效率很低。

这是我上面提到的一个例子： [链接到Imageshack](http://desmond.imageshack.us/Himg716/scaled.php?server=716&filename=goalw.jpg&res=landing)

这是我目前实现这一目标的方式：

```
Random rnum = new Random();
FileInputStream fin = null;
FileOutputStream fout = null;
int count = 10000;
FileInputStream fin1 = null;

File file1 = new File("fileWithSet100C.txt");

int randChar = 0;
while(cnt > 0){
    try {
        int c = 4194304 - 100;

        randChar = rnum.nextInt(c);
        File file = new File("file.txt");

                    //seems inefficient to initiate these guys over and over 
        fin = new FileInputStream(file);
        fin1 = new FileInputStream(file1);

        //would like to remove this and have it just replace the original
        fout = new FileOutputStream("newfile.txt");

        int byte_read;
        int byte_read2;

        byte[] buffer = new byte[randChar]; 
        byte[] buffer2 = new byte[(int)file1.length()]; //4m

        byte_read = fin.read(buffer);
        byte_read2 = fin1.read(buffer2);

        fout.write(buffer, 0, byte_read);
        fout.write(buffer2, 0, byte_read2);

        byte_read = fin.read(buffer2);
        buffer = new byte[4096]; //4m
        while((byte_read = (fin.read(buffer))) != -1){
            fout.write(buffer, 0, byte_read);
        }

        cnt--;
    }
    catch (...) {
        ...
    }
    finally {
          ...
    }
    try{
        File file = new File("newfile.txt");
        fin = new FileInputStream(file);
        fout = new FileOutputStream("file.txt");
        int byte_read;
        byte[] buffer = new byte[4096]; //4m
        byte_read = fin.read(buffer);
    while((byte_read = (fin.read(buffer))) != -1){
        fout.write(buffer, 0, byte_read);
    }
    }
    catch (...) {
        ...
    }
    finally {
          ...
    } 
```

谢谢阅读！

编辑：对于那些好奇的人，这是我用来解决上述问题的代码：

```
String stringToInsert = "insertSTringHERE";
byte[] answerByteArray = stringToInsert.getBytes();
ByteBuffer byteBuffer = ByteBuffer.wrap(answerByteArray);
Random rnum = new Random();
randChar = rnum.nextInt(4194002); //4MB worth of bytes

File fi = new File("file.txt");

RandomAccessFile raf = null;
try {
    raf = new RandomAccessFile(fi, "rw");
} catch (FileNotFoundException e1) {
    // TODO error handling and logging
}

FileChannel fo = null;
fo = raf.getChannel();

// Move to the beginning of the file and write out the contents
// of the byteBuffer.
try {
    outputFileChannel.position(randChar);
    while(byteBuffer.hasRemaining()) {
        fo.write(byteBuffer);
}
} catch (IOException e) {
    // TODO error handling and logging
}
try {
    outputFileChannel.close();
} catch (IOException e) {
    // TODO error handling and logging
}
try {
    randomAccessFile.close();
} catch (IOException e) {
    // TODO error handling and logging
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:58:29.087

您可能想要使用 Java 的随机访问文件功能。Sun/Oracle 有一个[Random Access Files 教程](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)，可能对您有用。

如果您不能使用 Java 7，请查看[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)，它也具有搜索功能并且自 Java 1.0 以来就存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T00:59:17.557

首先，对于您的文件，您可以将文件作为全局变量。这将使您在需要时使用该文件而无需再次阅读它。另请注意，如果您继续制作新文件，那么您将丢失已获取的数据。

例如：

```
public class Foo {

  // Gloabal Vars //
  File file;

  public Foo(String location) {
     // Do Something
    file = new File(location);
  }

  public add() {
    // Add
  }

} 
```

回答您的问题，我将首先读取这两个文件，然后在内存中进行您想要的所有更改。完成所有更改后，我会将更改写入文件。

但是，如果文件非常大，那么我会在磁盘上一个一个地进行所有更改......它会更慢，但你不会用这种方式耗尽内存。对于您正在做的事情，我怀疑您是否可以使用缓冲区来帮助应对它的速度。

我的总体建议是使用数组。例如，我将执行以下操作...

```
public char[] addCharsToString(String str, char[] newChars, int index) {
        char[] string = str.toCharArray();
        char[] tmp = new char[string.length + newChars.length];
        System.arraycopy(string, 0, tmp, 0, index);
        System.arraycopy(newChars, index, tmp, index, newChars.length);
        System.arraycopy(string, index + newChars.length, tmp, index + newChars.length, tmp.length - (newChars.length + index));
        return tmp;
} 
```

希望这可以帮助！

# javascript - 即不喜欢范围

> ID：10669879
> 
> 赞同：0
> 
> 时间：2012-05-20T00:32:28.693
> 
> 标签：javascript, internet-explorer, wysiwyg

我有一个所见即所得的编辑器，可以在除 IE（所有版本）之外的所有浏览器中使用。我对以下功能有疑问：

```
function tag(tag) {
    var range = window.frames['textEditor'].getSelection().getRangeAt(0);
    var newNode = document.createElement(tag);
    range.surroundContents(newNode);
} 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:11:02.387

IE < 9 不支持标准 DOM 范围和选择。对于在这些和所有主要浏览器中工作的这些 API 的实现，您可以使用我的[Rangy](http://code.google.com/p/rangy)库。

顺便说`surroundContents()`一句，仅当范围在同一节点或同一节点的子节点中开始和结束时，使用范围的方法才有效。例如，它不适用于以下范围（范围边界由方括号表示）：

```
One |two <b>three| four</b> 
```

要为这样的范围设置样式，您需要一种更微妙的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T00:38:11.233

IE 不支持范围，因为它是一个大宝贝。但是，它会做你想做的事，但有单独的逻辑。查看[Quirksmode Range Page](http://www.quirksmode.org/dom/range_intro.html)了解如何将 IE 调整为形状。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:39:05.990

如果有人需要脚本，我现在可以在所有浏览器中使用它，我将在下面发布

```
 function changeHeading(heading) {

  if($.browser.msie && $.browser.version == 7 || $.browser.version == 8)
  {
    theSelection = window.frames['textEditor'].document.selection.createRange().htmlText;
    window.frames['textEditor'].document.selection.createRange().pasteHTML("<"+heading+">"+theSelection+"</"+heading+">")
    $("#textEditor").contents().find(heading).unwrap();
  }

  else {
    var needle =window.frames['textEditor'].getSelection().getRangeAt(0);
    var haystack = $('#textEditor').contents().find("body").text();
    var newText = haystack.replace(needle,"<"+heading+">"+needle+"</"+heading+">");
    $('#textEditor').contents().find("body").html(newText);
    $("#textEditor").contents().find(heading).unwrap();
}
} 
```

谢谢您的帮助

# encapsulation - 告诉不要问——它如何应用于这个例子？

> ID：10669880
> 
> 赞同：1
> 
> 时间：2012-05-20T00:33:10.127
> 
> 标签：encapsulation, tell-dont-ask

作为我正在研究的真实事物的代理，请考虑建立一个模型。我们有一个`Parts`代表模型零件的类，包括根据给定参数制造零件的方法、验证等。我们有一个`Glue`做同样事情的类和一个`ModelBuilder`类。

我可以用很好的封装制造我的胶水和零件。然后我将 my`PartsInstance`和`GlueInstance`my`ModelBuilder`作为参数传递给 my。这就是一切都崩溃的地方。我可以告诉我的模型构建器进行构建，但要这样做，它需要访问`Parts`（可能还有`Glue`）中的数据。例如，我可能需要知道角落或中心在哪里`PartsInstance.Part[0]`才能正确构建。

我在这里陷入困境，因为似乎告诉，不问阵营会说该部分应该以某种方式自行构建。但这对我来说没有意义。零件是零件，而不是整个模型。这就是应该建立自己的东西。`ModelBuilder`可能非常复杂，并且可能会`Parts`在其他地方使用。另一方面，我正在询问`PartsInstance`对象的状态，然后根据该状态做出决定。`Parts`此外，无论如何，该决定可能并不完全适合该概念。它可能涉及`Glue`我选择的类型。

我怎样才能构造或修改这个例子，使它不违反封装？

# c# - C# 窗口高度只会变大，不会变小

> ID：10669888
> 
> 赞同：3
> 
> 时间：2012-05-20T00:34:38.140
> 
> 标签：c#, winforms, show-hide, collapse

我有一个带有可折叠组框的表单（从[http://www.codeproject.com/Articles/12835/XP-Style-Collapsible-GroupBox](http://www.codeproject.com/Articles/12835/XP-Style-Collapsible-GroupBox)获得）。我基本上使用它来显示/隐藏表单上的高级选项。然而，组框本身并没有问题，因为我只使用了一个我更改了 Visible 属性的常规器做了同样的事情，`Panel`问题是一样的：

当我隐藏这个框时，我希望窗口相应地缩小。因此，当您单击框标题时，我得到了基本上如下所示的代码：

```
if (OptionsPanel.IsCollapsed)
    this.Height -= (OptionsPanel.Height - OptionsPanel.CollapsedHeight);
else
    this.Height += (OptionsPanel.Height - OptionsPanel.CollapsedHeight); 
```

问题是 - 当你展开盒子时，窗口确实会相应地增长，但是当你折叠盒子时，它不会缩小。事实上，我所做的一切似乎都无法让窗口变小——我什至尝试过硬编码窗口大小，但它永远不会变小，只会变大。

我缺少什么来完成这项工作吗？还是有更好的组件可以做到这一点？老实说，我很震惊工具箱中没有用于执行此类操作的默认控件，因为这似乎是一件相当普遍的事情，而且我在很多表单上都看到过类似的事情。似乎不是那种你应该去 3rd 方插件或滚动你自己的代码的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:03:12.843

确保您的表单[`AutoSize`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.autosize.aspx)设置为 True 并[`AutoSizeMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.autosizemode.aspx)设置为[`GrowAndShrink`](http://msdn.microsoft.com/en-us/library/system.windows.forms.autosizemode.aspx)默认值[`GrowOnly`](http://msdn.microsoft.com/en-us/library/system.windows.forms.autosizemode.aspx)

![在此处输入图像描述](../Images/92901e44a45b3aec92bebf60d5fe71a8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T01:05:42.547

您是否尝试添加 AutoSizeMode=GrowAndShrink 属性？

最好同时 AutoSize=true, AutoSizeMode=GrowAndShrink

在 C# 中

```
OptionsPanel.AutoSize = true;
OptionsPanel.AutoSizeMode = AutoSizeMode.GrowAndShrink; 
```

参考：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.autosizemode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.autosizemode.aspx)

# python - Twisted Socket 立即发送消息

> ID：10669897
> 
> 赞同：2
> 
> 时间：2012-05-20T00:36:18.677
> 
> 标签：python, twisted

我正在制作一个与 Twisted 套接字通信的 iPhone 应用程序，当我要发送一条消息时它工作得很好。但是，我的问题是我需要向应用程序发送许多不同的信息。这是我的代码。

```
 if numrows == 1:
                #Did login
                msg = "%s: Login Credentials Success" % _UDID
                print msg
                for c in self.factory.clients:
                    c.message(msg)
                    time.sleep(0.5)

                for result in results:
                    for i in range(1, 6):
                        msg = "%s:L%d;%s" % (_UDID, i, result[i])
                        print msg
                        for c in self.factory.clients:
                            c.message(msg)
                            time.sleep(0.5)
            else:
                msg = "%s: Login Credentials Failed" % _UDID
                print msg
                for c in self.factory.clients:
                    c.message(msg)
                    time.sleep(0.5)

            cursor.close()
            database.close()

        #print msg

        #for c in self.factory.clients:
            #c.message(msg)

def message(self, message):
    self.transport.write(message) 
```

假设我只发送第一个 msg，并且所有其他 msg 与 print 和每个 msg 下面的方法都不存在，消息 Login Credentials Success 将被发送到应用程序。但是，如果像您看到的那样放入其余部分，则不会发生任何事情，因为它会一次发送所有内容，即使在代码中添加 time.sleep 也是如此。

该应用程序每 0.05 秒或更短时间检查一次响应。即使登录凭据位于顶部，它也不会通过，因为之后会发送更多信息，但是如果没有凭据消息之后的所有信息，它也会通过。

我迫不及待地想找到这个问题的答案。我已经尝试了我能想到的一切。应用程序不是问题，是 Python。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:00:09.373

冒着矛盾冒犯的风险，您可能需要重新检查您的应用程序不是问题的说法。听起来您希望完全控制每个传出 TCP 数据包的内容，并且您的应用程序*依赖数据包边界来确定消息边界*。一般来说，这不是一个很好的联网方法。一些网络中介可能会在此过程中拆分（碎片）甚至合并数据包，这会使您的应用程序感到困惑。请记住，*TCP 不是数据包协议*：它是流协议，因此您只能真正保证您发送的八位字节将按顺序接收（如果有的话）。

处理不同大小的消息的常用方法是在每条消息前面加上一个 X 位大端大小字段，说明后面的消息有多大。通信的接收端首先读取 X 位，然后读取“大小”八位字节以获取完整消息（阻塞直到该点，并将任何附加信息留在缓冲区中以供下一个消息处理程序获取）。

我不介意为您的 Twisted 代码提供更多帮助，但很可能它已经正确编写。至少，我建议不要立即尝试使 Twisted 刷新网络写入缓冲区。虽然它可能有助于使您的代码看起来可以正常工作，但现在，它实际上只是隐藏了稍后会出现的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T00:59:32.347

您的问题似乎是 Twisted 缓冲了您写入的数据。

显然，在不重构大量代码的情况下，没有简单的方法可以强制数据自行发送。请参阅[Twisted transport.write](https://stackoverflow.com/questions/3617584/twisted-transport-write)和[使用 Twisted 的 twisted.web 类，如何刷新传出缓冲区？](https://stackoverflow.com/questions/776631/using-twisteds-twisted-web-classes-how-do-i-flush-my-outgoing-buffers).

在粘贴之前不知道您的代码是什么样的，并且根据最后一个链接的接受答案：

*   `wait`就像在接受的答案中一样定义函数
*   确保你的类继承自`http.Request`
*   装饰你的`message`方法`defer.inlineCallbacks`
*   在调用方法后添加`yield wait(N)`（对于您必须测试和确定的 N 值）`write``message`

我对 Twisted 没有足够的经验，无法知道需要哪些步骤，哪些只是原始答案的代码中的一部分，不适用于您的代码。

不过，重新编写 iPhone 应用程序以接受在单个消息中包含多个写入时发送的消息类型可能是可能的（并且更容易）。

# javascript - V8 和 PostgreSQL 的 Javascript 序列化和性能

> ID：10669900
> 
> 赞同：27
> 
> 时间：2012-05-20T00:37:39.503
> 
> 标签：javascript, postgresql, v8, plv8

我一直在[试验 PostgreSQL 和 PL/V8](https://github.com/tobyhede/postsql)，它们将 V8 JavaScript 引擎嵌入到 PostgreSQL 中。使用它，我可以查询到数据库中的 JSON 数据，这非常棒。

基本方法如下：

```
CREATE or REPLACE FUNCTION 
  json_string(data json, key text) RETURNS TEXT AS $$
  var data = JSON.parse(data); 
  return data[key];
$$ LANGUAGE plv8 IMMUTABLE STRICT;

SELECT id, data FROM things WHERE json_string(data,'name') LIKE 'Z%'; 
```

使用 V8，我可以将 JSON 数据解析为 JS，然后返回一个字段，我可以将其用作常规 pg 查询表达式。

**但**

在大型数据集上，性能可能是一个问题，因为我需要解析数据的每一行。解析器很快，但它绝对是过程中最慢的部分，而且每次都必须发生。

我想要解决的问题（最终解决一个实际问题）是是否有办法缓存或预处理 JSON ......甚至将 JSON 的二进制表示形式存储在 V8 可以使用的表中自动作为 JS 对象可能是一个胜利。我已经研究过使用诸如 messagepack 或 protobuf 之类的替代格式，但我认为它们在任何情况下都不一定会像本机 JSON 解析器一样快。

**想法**

PG 有 blob 和二进制类型，所以数据可以以二进制形式存储，然后我们只需要一种方法将其编组到 V8 中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T16:06:25.560

Postgres 支持任意函数调用的索引。以下索引应该可以解决问题：

```
CREATE INDEX json_idx ON things (json_string(field,'name')); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T23:54:31.467

简短的版本似乎是在 Pg 的新`json`支持下，到目前为止，除了序列化的 json 文本之外，没有办法直接以任何形式存储 json。（这看起来可能会在 9.4 中改变）

您似乎想要存储一个预解析的表单，它是 v8 如何在内存中表示 json 的序列化表示，目前不支持。甚至不清楚 v8 是否提供任何类型的 json 结构的二进制序列化/反序列化。如果它本身不这样做，则需要将代码添加到 Pg 以生成这样的表示并将其转换回 v8 json 数据结构。

它也不一定会更快：

*   如果`json`以 v8 特定的二进制形式存储，则向客户端返回正常 json 表示的查询必须在每次返回时对其进行格式化，从而产生 CPU 成本。

*   json 的二进制序列化版本与将 v8 json 数据结构直接存储在内存中不同。您不能编写涉及直接指向磁盘的任何类型的指针图的数据结构，它必须被序列化。这种序列化和反序列化是有代价的，它甚至可能不会比解析 json 文本表示快多少。这在很大程度上取决于 v8 如何在内存中表示 JavaScript 对象。

*   二进制序列化表示很容易变得更大，因为大多数 json 是文本和小数字，您不会从二进制表示中获得任何紧凑性。由于存储大小直接影响表扫描速度、从 TOAST 获取值、TOAST 值所需的解压缩时间、索引大小等，因此您可以轻松地使用较慢的查询和更大的表。

我很想看看像您描述的那样的优化是否可行，以及它是否会成为一种优化。

为了在进行表扫描时获得您想要的好处，我想您真正需要的是一种无需解析即可遍历的格式，并将其转换为可能是 malloc() 的 javascript 对象图。您希望能够为字段提供路径表达式，并直接从序列化表单中将其读取到 Pg 读取缓冲区或 shared_buffers 中。那将是一个非常有趣的设计项目，但如果 v8 中存在类似的东西，我会感到惊讶。

你真正需要做的是研究现有的基于 json 的对象数据库如何快速搜索任意 json 路径以及它们在磁盘上的表示是什么，然后报告 pgsql-hackers。也许从已经解决了这个问题的人那里可以学到一些东西——当然，假设他们已经解决了。

与此同时，我想关注的是这里的其他答案正在做什么：解决慢点并找到其他方法来做你需要的事情。您还可以考虑帮助优化 json 解析器，但取决于使用的是 v8 解析器还是其他某个可能已经远远超过收益递减点的解析器。

我想这是在速度和灵活的数据表示之间进行权衡的领域之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T04:14:31.960

也许不是让检索阶段负责解析数据，而是创建一种可以在输入上预先传播 json 数据的新数据类型可能是一种更好的方法？

[http://www.postgresql.org/docs/9.2/static/sql-createtype.html](http://www.postgresql.org/docs/9.2/static/sql-createtype.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T17:08:42.597

我对此没有任何经验，但这让我很好奇，所以我做了一些阅读。

# 仅 JSON

像下面这样的东西（未经测试，顺便说一句）呢？它没有解决您关于存储 JSON 的二进制表示的问题，它试图为您正在检查的所有行一次解析所有 JSON，希望通过减少处理来产生更高的性能为每一行单独执行此操作的开销。如果它成功了，我认为它可能会导致更高的内存消耗。

这些`CREATE TYPE...set_of_records()`东西改编自[wiki](http://code.google.com/p/plv8js/wiki/PLV8)上的示例，其中提到“您还可以返回带有 JSON 数组的记录”。我想它真的意味着“一组对象”。

数据库记录中的`id`值是否嵌入在 JSON 中？

## 版本 #1

```
CREATE TYPE rec AS (id integer, data text, name text);

CREATE FUNCTION set_of_records() RETURNS SETOF rec AS
$$

  var records = plv8.execute( "SELECT id, data FROM things" );

  var data = [];

  // Use for loop instead if better performance

  records.forEach( function ( rec, i, arr ) {

    data.push( rec.data );

  } );

  data = "[" + data.join( "," ) + "]";

  data = JSON.parse( data );

  records.forEach( function ( rec, i, arr ) {

    rec.name = data[ i ].name;

  } );

  return records;

$$
LANGUAGE plv8;

SELECT id, data FROM set_of_records() WHERE name LIKE 'Z%' 
```

## 版本 #2

这让 Postgres 聚合/连接一些值以减少在 JS 中完成的处理。

```
CREATE TYPE rec AS (id integer, data text, name text);

CREATE FUNCTION set_of_records() RETURNS SETOF rec AS
$$

  var cols = plv8.execute(

    "SELECT" +

    "array_agg( id ORDER BY id ) AS id," +

    "string_agg( data, ',' ORDER BY id ) AS data" +

    "FROM things"

  )[0];

  cols.data = JSON.parse( "[" + cols.data + "]" );

  var records = cols.id;

  // Use for loop if better performance

  records.forEach( function ( id, i, arr ) {

    arr[ i ] = {

      id : id,

      data : cols.data[ i ],

      name : cols.data[ i ].name

    };

  } );

  return records;

$$
LANGUAGE plv8;

SELECT id, data FROM set_of_records() WHERE name LIKE 'Z%' 
```

# hstore

这个比较的性能如何？：在写入时将 JSON 数据复制到 hstore 列中（或者如果性能以某种方式设法足够好，在选择时将 JSON 转换为 hstore）并在您的 中使用 hstore `WHERE`，例如：

```
SELECT id, data FROM things WHERE hstore_data -> name LIKE 'Z%' 
```

我从这里听说过 hstore：http: [//lwn.net/Articles/497069/](http://lwn.net/Articles/497069/)

文章还提到了一些其他有趣的事情：

> PL/v8 允许您...在特定 JSON 元素上创建表达式索引并保存它们，为您提供存储的搜索索引，就像 CouchDB 的“视图”一样。

它没有详细说明，我真的不知道它指的是什么。

有一条[评论被归为“jberkus”](http://lwn.net/Articles/497175/)，上面写着：

> 我们也讨论了二进制 JSON 类型，但是没有传输二进制值的协议（BSON 根本不是标准，并且有一些严重的故障），似乎没有任何意义。
> 
> 如果您有兴趣为 PostgreSQL 提供二进制 JSON 支持，我们很乐意为您提供帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T22:18:50.887

我不知道它在这里是否有用，但我遇到了这个：[pg-to-json-serializer](http://code.google.com/p/pg-to-json-serializer/)。它提到了以下功能：

> 解析 JSON 字符串并从中填充 postgreSQL 记录/数组

我不知道它是否会比您迄今为止所做的工作提供任何性能优势，而且我什至不了解他们的示例。

只是觉得值得一提。

# android - 用于移动应用的 Rails REST API。会话

> ID：10669901
> 
> 赞同：2
> 
> 时间：2012-05-20T00:37:55.900
> 
> 标签：android, ruby-on-rails, session, ios4

我正在创建一个拥有用户并与后端自定义 Rails REST API 对话的移动应用程序。我应该在登录时创建会话吗？还是我应该在每个请求中发送用户名和密码？如果会议是要走的路，那通常是如何实施的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:49:31.307

只需生成令牌，并使用它们来识别用户

# javascript - 通过 Facebook JavaScript SDK 调用图形 API

> ID：10669902
> 
> 赞同：1
> 
> 时间：2012-05-20T00:38:04.103
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

Facebook 提供了一个[很好的指南](https://developers.facebook.com/docs/reference/javascript/)，介绍如何通过客户端 JavaScript SDK 对 Facebook API 进行身份验证。下面的 JavaScript 代码将打印出用户的数据。

```
FB.api('/me', function(response) {
  console.log(response);
}); 
```

我使用以下 FB 登录按钮启动并运行了一个身份验证系统

```
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1" scope="user_relationships,friends_relationships,user_photos,friends_photos"></div> 
```

如何使用类似的 JavaScript API 调用获取 user_relationships、friend_relationships、user_photos、friends_photos？我不确定用什么替换“/我”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:44:06.773

您的应用程序需要访问 user_photos、user_relationship_details、friends_relationship_details、friends_photos 的权限（**[参考](https://developers.facebook.com/docs/authentication/permissions/)**）。一旦用户授予它们，您的应用程序就可以访问它们。

用于**用户关系状态** `/me?fields=relationship_status`和**好友关系状态** `/<friend-user-id>?fields=relationship_status`

对于您可以使用的用户相册`/me/albums`和`/me/photos/`标记用户的照片以及朋友的照片和相册，同上

# java - Android将打开的mp4（摄像机）文件发送到服务器

> ID：10669904
> 
> 赞同：2
> 
> 时间：2012-05-20T00:38:12.720
> 
> 标签：java, android, sockets, seek, mediarecorder

您知道是否有可能在 mediarecorder 仍在录制时开始发送由 mediarecorder 创建的视频文件？场景看起来像这样：我正在将视频录制到本地文件，过了一会儿我想在远程服务器上制作一个副本。我可以创建一个套接字，从文件中获取 FileDescriptor 并将流推送到那里吗？不可搜索的套接字仍然存在问题。操作结束后，是否可以复制文件的开头以在远程服务器上的文件中使用它的标题？

# jquery - 在 jQuery 中通过 AJAX 加载内容（CodeIgniter 视图）

> ID：10669905
> 
> 赞同：-3
> 
> 时间：2012-05-20T00:38:16.333
> 
> 标签：jquery, ajax, codeigniter

我在这个链接上找到了一个关于如何在 jQuery 中使用 AJAX 的好例子：http: [//yensdesign.com/2008/12/how-to-load-content-via-ajax-in-jquery/](http://yensdesign.com/2008/12/how-to-load-content-via-ajax-in-jquery/)

我将文件中的内容添加`index.html`到我的`view.php`文件中（我正在使用 CodeIgniter）。

一切看起来都不错，但是当您想切换到另一个部分时，页面内容不会改变（显示的内容与之前相同）。

我认为可能存在问题，`menu.js`文件将数据传递给 CodeIgniter`view.php`文件？

你能给我一些关于如何解决这个问题的建议吗？我希望这对其他人也有帮助。

Menu.js 文件：

```
$(document).ready(function(){
//References
var sections = $("#menu li");
var loading = $("#loading");
var content = $("#content");

//Manage click events
sections.click(function(){
    //show the loading bar
    showLoading();
    //load selected section
    switch(this.id){
        case "home":
            content.slideUp();
            content.load("sections.html #section_home", hideLoading);
            content.slideDown();
            break;
        case "news":
            content.slideUp();
            content.load("sections.html #section_news", hideLoading);
            content.slideDown();
            break;
        case "interviews":
            content.slideUp();
            content.load("sections.html #section_interviews", hideLoading);
            content.slideDown();
            break;
        case "external":
            content.slideUp();
            content.load("external.html", hideLoading);
            content.slideDown();
            break;
        default:
            //hide loading bar if there is no selected section
            hideLoading();
            break;
    }
});

//show loading bar
function showLoading(){
    loading
        .css({visibility:"visible"})
        .css({opacity:"1"})
        .css({display:"block"})
    ;
}
//hide loading bar
function hideLoading(){
    loading.fadeTo(1000, 0);
}; 
```

});

来自 javascript 的动画正在运行 (loading/content/sections) ，但实际内容不是从 html 文件加载的。

正如我所说，看起来这个脚本无法将内容加载到 view.php 文件（这是 CodeIgniter 'view' 文件）

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:36:01.910

CodeIgniter 需要服务`sections.html`和`external.html`. 默认情况下它不会这样做。

假设`view.php`用于 URL `http://example.com/index.php/mycontroller/view`，则 jQuery 将发送对以下 URL 的请求。

```
http://example.com/index.php/mycontroller/sections.html
http://example.com/index.php/mycontroller/external.html 
```

除非您告诉 CodeIgniter 对这些请求做什么，否则 CodeIgniter 将返回 404 并且您的页面内容不会更新。

# c - eclipse: C - 控制台窗口输入

> ID：10669906
> 
> 赞同：0
> 
> 时间：2012-05-20T00:38:18.097
> 
> 标签：c, eclipse

在eclipse中，我如何告诉控制台提交文本？当我按下回车键时，它只是进入一个新行，我可以继续输入，而不是提交文本以继续处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:22:15.700

见鬼的 Eclipse.. 我找到了一种让 Visual Studio 将 C++ 项目编译为 C 项目的方法.. 好多了......在花了这么多小时试图让 IDE 处理它的所有怪癖之后......我不我想我会再次回到那个状态（至少不会因为任何 C 语言）。

对于任何有兴趣的人： [http ://www.daniweb.com/software-development/cpp/threads/16256/compiling-c-in-visual-studio.net](http://www.daniweb.com/software-development/cpp/threads/16256/compiling-c-in-visual-studio.net)

基本上：

1.  转到项目属性
2.  转到 C/C++ 节点
3.  选择“高级”子节点
4.  转到属性“编译为”并选择选项“编译为 C 代码 (/TC)”
5.  单击确定并返回解决方案资源管理器。
6.  将文件扩展名从 .cpp 更改为 .c

而已..

# php - 将 Notepad++ 正则表达式转换为 PHP 正则表达式

> ID：10669908
> 
> 赞同：1
> 
> 时间：2012-05-20T00:38:40.757
> 
> 标签：php, regex, preg-replace

我正在尝试将 Notepad++ 正则表达式转换为 PHP 正则表达式，它基本上以这种格式从 URL 列表中获取 ID：

```
http://www.example.com/category-example/1371937-text-blah-blah-blah-2012.html
http://www.example.com/category-example/1471337-text-blah-blah-2-blah-2010.html 
```

使用 Notepad++ 正则表达式函数，我分两步得到我需要的输出（逗号分隔的 ID 列表）

(.*)/ 替换为空格

-(.*) 用逗号替换

结果：1371937,1471337

我尝试用 PHP preg_replace 做类似的事情，但我不知道如何获得正确的正则表达式，下面的示例删除了除数字之外的所有内容，但它不能按预期工作，因为也可能存在不属于 ID 的数字。

```
$bb =   preg_replace('/[^0-9]+/', ',', $_POST['Text']);

?> 
```

哪个是正确的结构？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:02:06.000

如果您匹配：

```
http://www.example.com/category-example/1371937-text-blah-blah-blah-2012.html 
```

要得到：

```
1371937 
```

你会：

```
$url = "http://www.example.com/category-example/1371937-text-blah-blah-blah-2012.html";
preg_match( "/[^\d]+(\d+)-/", $url, $matches );
$code = $matches[1]; 
```

..它匹配所有非数字字符，然后是一个完整的数字字符串，直到它到达一个'-'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:12:30.777

如果您只想找到 ID，那么您应该使用`preg_match`，而不是`preg_replace`。

您已经失去了该模式的选项，最简单的是：

```
$url = 'http://www.example.com/category-example/1371937-text-blah-blah-blah-2012.html';
preg_match('/\d+/', $url, $matches);
echo $matches[0]; 
```

它只是在 URL 中找到第一组数字。这适用于示例。

# javascript - HTML 表单 - 值取决于两个不同的下拉菜单

> ID：10669911
> 
> 赞同：0
> 
> 时间：2012-05-20T00:39:05.543
> 
> 标签：javascript, forms, drop-down-menu

你好javascript专家！

我是这里的新手，正在尝试创建一个脚本来在网站上添加会员费（我是一名志愿者）。任何帮助是极大的赞赏。

我使用这个网站：[http](http://www.javascript-coder.com/javascript-form/javascript-calculator-script.phtml) ://www.javascript-coder.com/javascript-form/javascript-calculator-script.phtml来设置我的html。

它工作得很好（我设置了 3 个函数，一个用于计算会员价格，另一个用于计算邮资，另一个用于计算应付总额 - 我没有将它们包括在下面，但知道它们工作正常）。

直到我意识到邮资的价值（我仅使用第一个下拉菜单：id=country 计算）也取决于第二个下拉菜单中的金额（第二个下拉菜单的 id：membership_type）。也就是说，邮费不仅由国家决定，而且由会员类型决定。我尝试设置一个脚本，该脚本会根据会员类型的值改变邮资的值，但它不起作用。

正如你所知道的那样，我不是编码员，所以我花了很多时间寻找正确的方法来做到这一点，但已经走到了死胡同......

* * *

```
 var membership_prices = new Array();
    membership_prices["regular"]=40;
    membership_prices["student"]=24;
    membership_prices["emeritus"]=24;
    membership_prices["regularplus"]=62;
    membership_prices["studentplus"]=46;
    membership_prices["emeritusplus"]=46;

    var extra_postage_cost = new Array();
    extra_postage_cost["USA"]=0;
    extra_postage_cost["Canada"]=0;

    <!-- this is the part that needs work: Edited since original post -->
       extra_postage_cost["Other_Country"]
   if (document.getElementById('membership_type').value =="regular")
       extra_postage_cost["Other_Country"]=8;
   else if (document.getElementById('membership_type').value =="student")
       extra_postage_cost["Other_Country"]=8;
   else if (document.getElementById('membership_type').value =="emeritus")
       extra_postage_cost["Other_Country"]=8; 
   else if (document.getElementById('membership_type').value =="regularplus")
       extra_postage_cost["Other_Country"]=16;
   else if (document.getElementById('membership_type').value =="studentplus")
       extra_postage_cost["Other_Country"]=16;
   else if (document.getElementById('membership_type').value =="emeritusplus")
       extra_postage_cost["Other_Country"]=16;
   else 
       extra_postage_cost["Other_Country"]=0;
   <!-- end of what I believe needs work --> 
```

这是其余的代码：

```
 function getMembershipPrice ()
        {
        var membershipPrice=0;
        var theForm = document.forms["membershipform"];
        var selectedMembership = theForm.elements["membership_type"];
        membershipPrice = membership_prices[selectedMembership.value];
        return membershipPrice;
        }

    function getExtraPostagePrice ()
        {
        var extraPostagePrice = 0;
        var theForm = document.forms["membershipform"];
        var selectedPostage = theForm.elements["country"];
        extraPostagePrice = extra_postage_cost[selectedPostage.value];
        return extraPostagePrice;
        }

    function getAmountDue()
        {
        var amountDue = getMembershipPrice() + getExtraPostagePrice();
        document.getElementById('amountDue').innerHTML ="Amount Due $"+amountDue;
        } 
```

在下拉菜单本身中，我在每个下拉菜单的括号内都有这种代码：

```
 select name="membership_type" id="membership_type" onchange="getAmountDue()"
   select name="country" id="country" onchange="getAmountDue()" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:46:59.597

作为一个自称是业余爱好者的你做得很好。我认为您可以使用多维数组更轻松地解决您的问题，这样您就可以将会员价格与相应的邮资相关联：

```
var MEMBERSHIP = 0;
var POSTAGE = 1;

var membership_prices = new Array();
membership_prices["regular"] = [40, 8];
membership_prices["student"] = [24, 8];
membership_prices["emeritus"] = [24, 8];
membership_prices["regularplus"] = [62, 16];
membership_prices["studentplus"] = [46, 16];
membership_prices["emeritusplus"] = [46, 16]; 
```

现在，要访问会员价格和邮费，如果选择了其他国家，您可以简单地运行：

```
membership_prices["regular"][MEMBERSHIP]   // returns 40
membership_prices["regular"][POSTAGE]      // returns 8 
```

我使用了 MEMBERSHIP 和 POSTAGE 而不是 0 和 1，因此当您获取会员和发布的值时，它可能会使您的代码更具可读性。或者，如果您愿意，您可以简单地使用 0 和 1 访问内部数组：

```
membership_prices["regular"][0]   // returns 40
membership_prices["regular"][1]      // returns 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:48:46.250

如果我理解您正在尝试做的事情，那么您看起来是在正确的轨道上，但需要颠倒您对与变量相关的逻辑的思考方式。你还有一些额外`"`的 s 和`{}`s。

试试这个代替下面的代码`<!-- this is the part that needs work: -->`。

```
if (document.getElementById('membership_type').value =="regular")
    extra_postage_cost["Other_Country"]= 8;
else if (document.getElementById('membership_type').value =="student")
    extra_postage_cost["Other_Country"]= 8;
else if (document.getElementById('membership_type').value =="emeritus")
    extra_postage_cost["Other_Country"]= 8; 
else if (document.getElementById('membership_type').value =="regularplus")
    extra_postage_cost["Other_Country"]= 16;
else if (document.getElementById('membership_type').value =="studentplus")
    extra_postage_cost["Other_Country"]= 16;
else if (document.getElementById('membership_type').value =="emeritusplus")
    extra_postage_cost["Other_Country"]= 16;
else 
    extra_postage_cost["Other_Country"]= 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T01:01:24.597

试试这个：

```
var otherCountryPostageCost = 0,
    membershipType = document.getElementById('membership_type');

if (membershipType == "regular" || membershipType == "student" || membershipType == "emeritus"){
  otherCountryPostageCost = 8;
} else if (membershipType == "regularplus" || membershipType == "emeritusplus") {
  otherCountryPostageCost = 16;
}

extra_postage_cost["Other_Country"] = otherCountryPostageCost; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T01:21:56.797

我也是新手 :) 一段时间以来，我认为添加其他国家/地区的额外邮资最易读的方法，假设会有很多，并得出以下结论：

`extra_postage_cost["Country"] = [ (regular), (student), (emeritus) ]`

其中括号中的每个值都是一个数字。例如：

`extra_postage_cost["Ostia"] = [10, 20, 30, 60, 60, 30];`

为此，我们需要定义一些变量和函数。这个想法是将类型（学生，普通）的数字顺序链接`membership_types`到每个额外邮资成本数组中的数字位置。

```
 membership_types = ["regular", "student", "emeritus", 
    "regularplus", "studentplus", "emeritusplus"];

  function membership_index(m_type) {
    var index = -1;
    for(var i = 0; i < membership_types.length; i++) {
      if(m_type == membership_types[i]) {
        index = i;
      }
    }
    return index;
  } 
```

然后在检索时，它有点难看:(但我们想首先解决国家，然后是成本的数字位置，这与会员类型相匹配。

```
extraPostage = extra_postage_cost[whichCountry][membership_index(whichMembership)]; 
```

结果在这里：http: [//jsfiddle.net/TgdEW/](http://jsfiddle.net/TgdEW/)

ps我认为从技术上讲你不是在创建数组，而是对象，所以我声明`variable_name = {}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T01:35:18.117

我假设国家下拉菜单默认为美国。如果是这种情况，只需将“onchange”事件侦听器添加到调用函数以更新额外费用的下拉列表中。

因此，无需使用数组对象来存储额外邮资，只需将变量 extraPostage 初始设置为零并在下拉列表更改时更新它。

```
 var extraPostage = 0;

    function onSelectChange(){
      var countrySelect = document.getElementById('countrySelect'); 
      var typeSelect = document.getElementById('membership_type');
      if(countrySelect.value != "Other Country"){
        extraPostage = 0;
        return;
      }
      else{
        var type = typeSelect.value;
        switch(type){
          case "regular":
            extraPostage = 8;
            break;
          case "student":
            extraPostage = 8;
            break;
          case "emeritus":
            extragPostage = 8;
            break;
          //keep going for each different possibility
        }

    } 
```

# zend-framework - Zend Navigation 为路线设置语言参数未反映在应用程序中

> ID：10669912
> 
> 赞同：0
> 
> 时间：2012-05-20T00:39:11.390
> 
> 标签：zend-framework, zend-route, zend-navigation, zend-translate, zend-locale

我有一个像这样的zend xml配置：

```
<design>
    <navigation>
        <frontend>
            <company>
                <label>Company</label>                  
                <route>sitepage</route>                                 
                <pages>
                    <about>
                        <label>About us</label>
                        <route>sitepage</route>
                        <params>
                            <page>about-us</page>
                            <language>en</language>
                        </params>                                                       
                    </about> 
```

这是我的网站页面路线：

```
resources.router.routes.sitepage.type = Zend_Controller_Router_Route
resources.router.routes.sitepage.route = ":language/page/:page"
resources.router.routes.sitepage.defaults.module ="core"
resources.router.routes.sitepage.defaults.controller = "page"
resources.router.routes.sitepage.defaults.action = "view"
resources.router.routes.sitepage.defaults.page = "home"
resources.router.routes.sitepage.defaults.language = "en" 
```

如您所见，我所做的是在`<params>`xml 节点中设置页面参数。我尝试添加`<language>`参数，认为它会自动更新为应用程序语言，但它似乎并没有那样工作。例如，我的导航菜单只输出`http://localhost/en/page/about-us`应该是什么时候`http://localhost/it/page/about-us`（假设我的应用程序已注册为使用该`it`语言）。如何让我的导航识别应用程序语言 ( `it`)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:50:11.857

我用不同的方式解决了这个问题......

以下是主注册页面的示例：

```
routes.register_index.route = @lang/@register
routes.register_index.defaults.controller = register
routes.register_index.defaults.action = index 
```

我的 navigation.xml 是空的，但您可以只使用标签和路线。

您可能已经注意到我的路线中的 @ 而不是 :。这主要是为 i18n 网站设计的。

在我的语言文件夹中，我有常规的 en.php 等和 url-en.php 等。

这是它的样子：

```
<?php
return array(
    'lang' => 'en',
    'register' => 'register',
    'about' => 'about-us',
); 
```

这样，相同的路由将用于 /en/register、/fr/inscription 等（每个语言文件一个）

在我的引导程序中，我将这些包含在重写启动中：

```
protected function _initRewrite()
    {
        $translator = new Zend_Translate('array', APPLICATION_PATH . '/language/url-fr.php', 'fr');
        $translator->addTranslation(APPLICATION_PATH . '/language/url-en.php', 'en');

        // Set the current locale for the translator
        $locale = Zend_Registry::get('Zend_Locale');
        $translator->setLocale($locale);

        // Set it as default translator for routes
        Zend_Controller_Router_Route::setDefaultTranslator($translator);

        $front_controller = Zend_Controller_Front::getInstance();
        $router = $front_controller->getRouter();

        $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini', APPLICATION_ENV);
        $router->addConfig($config, 'routes');

        $router->addDefaultRoutes();
    } 
```

这基本上告诉您的应用程序根据当前语言环境通过其值从 url- *lang.php*转换 @lang 。在您的引导程序中，必须在此之前设置语言环境。您可以从会话、cookie、URL 等任何内容中检索它。

完成此操作后，您可以使用特殊语言文件中的数据在任何地方调用您的路线，它将位于当前语言环境中。确保您的导航文件与您的路线具有相同的名称，您应该没问题。

# android - 处理 Android 上的物理按钮

> ID：10669913
> 
> 赞同：-1
> 
> 时间：2012-05-20T00:39:26.153
> 
> 标签：android

我正在为 android 创建一个 2d 游戏。我想处理 Android 上的物理按钮，但是如果我要从另一个类而不是 Activity 处理这些按钮，我必须做些什么。因为我正在使用我自己的基于 opengl 的屏幕类我的游戏，我想处理来自不同屏幕的菜单按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:51:07.513

您可以使用 TabActivity 在两个不同的活动之间切换。

# c# - WCF ChannelFactory 和 OperationBehavior

> ID：10669914
> 
> 赞同：1
> 
> 时间：2012-05-20T00:39:34.570
> 
> 标签：c#, .net, wcf, channelfactory

我有如下服务合同

```
[ServiceContract]
public interface IService
{
     [MyCustomBehavior]
     [OperationContract]
     void MyOperation();
} 
```

问题是是否调用

```
 new ChannelFactory<IService>(myBinding, myUri) 
```

是否会在调用之前隐式添加 MyCustomBehavior，仅通过我将 IService 传递给 ChannelFactory 还是需要更深入地挖掘并将 MyCustomBehavior 显式设置为 MyOperation 操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:53:11.927

> **操作行为**
> 
> 实现 IOperationBehavior 接口的操作行为用于扩展每个操作的客户端和服务运行时。
> 
> 有两种机制可以将操作行为添加到操作中。第一种机制是创建一个自定义属性，用于对操作建模的方法。将操作添加到 ServiceHost 或 ChannelFactory 时，WCF 会将任何 IOperationBehavior 属性添加到为该操作创建的 OperationDescription 上的行为集合中。
> 
> 第二种机制是直接将行为添加到构造的 OperationDescription 上的行为集合中。

我建议你先阅读这篇文章。

[使用行为配置和扩展运行时](http://msdn.microsoft.com/en-us/library/ms730137.aspx)

# syntax - 我怎样才能 OR 一起到 gnumakefile 条件？

> ID：10669915
> 
> 赞同：0
> 
> 时间：2012-05-20T00:39:55.730
> 
> 标签：syntax, makefile, logic, boolean-expression, gnu-make

使用 gmake v3.80，我怎样才能创建一个将两件事 OR 在一起的规则。我从这段代码开始：

```
ifeq "$(BUILD_ARCH)" "lnx86_22"
TEST_ARCH := i86
endif
ifeq "$(BUILD_ARCH)" "linux_24_i86"
TEST_ARCH := i86
endif 
```

并且想将这两个 ifeq(s) 组合成一个 if 将这两个条件 OR 在一起，也许是这样的？

```
ifeq "$(BUILD_ARCH)" "lnx86_22" OR "$(BUILD_ARCH)" "linux_24_i86"
TEST_ARCH := i86
endif 
```

允许我这样做的实际语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:45:43.297

您可以为此使用 $(filter ...) 。像这样：

```
ifneq (,$(filter $(BUILD_ARCH),lnx86_22 linux_24_i86))
TEST_ARCH := i86
endif 
```

另一种选择是使用构造的变量名称：

```
lnx86_22_ARCH :=     i86
linux_24_i86_ARCH := i86
    ...

TEST_ARCH := $($(BUILD_ARCH)_ARCH)

ifeq (,$(TEST_ARCH))
$(error Failed, unknown arch $(BUILD_ARCH))
Failed, unknown arch $(BUILD_ARCH)
endif 
```

如果您能够升级到较新版本的 GNU make，那么还有其他可用选项。

# java - 更改/删除默认标记/关注元素

> ID：10669920
> 
> 赞同：0
> 
> 时间：2012-05-20T00:40:52.073
> 
> 标签：java, swing, jbutton

我有以下简单的 Java Swing 应用程序：

![](../Images/688829302da20fb39bde53abb77281a1.png)

我的按钮“新按钮”默认标记/聚焦，但我想更改/删除该默认标记。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:13:32.353

> 我想更改/删除该默认标记。

可以通过以下方式更改此属性

*   [JButton#setFocusPainted(boolean b)](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setFocusPainted%28boolean%29)

*   [JButton#setFocusable（布尔可聚焦）](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setFocusable%28boolean%29)

# r - 如何在多列中构造因子变量分布

> ID：10669921
> 
> 赞同：3
> 
> 时间：2012-05-20T00:41:04.133
> 
> 标签：r

我有从调查中收集的数据。一个因素变量是这样的：

```
Column1  Column2  Column3  Column4  Column5
A        B        C
B        C
A        B        C        D        E
A        C        E
C        E
B        D        E 
```

换句话说，类分布在许多不同的变量中。我想为每个类（A、B、C、D、E）创建一个二进制变量（1 或 0）。但是，我不清楚该怎么做。我该怎么做？

编辑

输出将是这样的：

```
A      B      C      D      E
1      1      1      0      0
0      1      1      0      0
1      1      1      1      1
1      0      1      0      1
0      0      1      0      1
0      1      0      1      1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T01:05:53.633

```
> data <- data.frame(Column1=c("A","B","A"),Column2=c("B","A","A"))
> data
  Column1 Column2
1       A       B
2       B       A
3       A       A
> f <- unique(unlist(data))
> tb <- data.frame(sapply(f, function(x) (rowSums(data == as.character(x)) != 0)*1))
> names(tb) <- f
> tb
  A B
1 1 1
2 1 1
3 1 0 
```

# objective-c - 编辑 .plist 文件

> ID：10669922
> 
> 赞同：0
> 
> 时间：2012-05-20T00:41:08.393
> 
> 标签：objective-c, ios, plist, jailbreak

我正在为越狱手机开发一个应用程序。我是 Obj-c 的新手。我想要：

1.  读取 /var/mobile/Library/Preferences [特别是 com.apple.assistant.plist] 中的 plist 文件（越狱，记得吗？）

2.  更改键的字符串“主机名”。

3.  保存 plist 文件。

然后我计划将代码放入 IBAction 并将其链接到 IB 中的按钮。

有谁知道如何实现这一目标？你可以发布它的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T07:17:38.293

我假设您主要想知道如何读/写 plist。这是一个这样做的例子：

```
NSString* filename = @"/var/mobile/Library/Preferences/com.apple.assistant.plist";
NSMutableDictionary* prefs = [[NSMutableDictionary alloc] initWithContentsOfFile: filename];
NSString* hostnamePref = (NSString*)[prefs valueForKey: @"Hostname"];
NSLog(@"current hostname is %@", hostnamePref);

[prefs setValue: @"Some New Value Here" forKey: @"Hostname"];

[prefs writeToFile: filename atomically: YES];
[prefs release];  // not needed if you use Automatic Reference Counting in your project 
```

**编辑：**如果您的字典（plist）实际上是字典字典，您可能会使用如下内容：

```
NSMutableDictionary* prefs = [[NSMutableDictionary alloc] initWithContentsOfFile: filename];
NSString* nestedKeyname = @"124-37HGSH-CF12-67TY";
NSMutableDictionary* nestedPrefs = (NSMutableDictionary*)[prefs valueForKey: nestedKeyname];
NSString* hostnamePref = (NSString*)[nestedPrefs valueForKey: @"Hostname"];
NSLog(@"current hostname is %@", hostnamePref);

[nestedPrefs setValue: @"Some New Value Here" forKey: @"Hostname"];
[prefs setValue: nestedPrefs forKey: nestedKeyname]; 
```

**上面的代码应该适用于用户移动**有权读写的任何路径。

# bash - find: -type 的参数应该只包含一个字母

> ID：10669923
> 
> 赞同：2
> 
> 时间：2012-05-20T00:41:20.240
> 
> 标签：bash, shell

```
#!/bin/bash 

echo "please enter a path where to search:"
read myPath

touch --date "2012-01-01" /tmp/start
touch --date "2012-01-01" /tmp/end

until  [ "$myPath" = $(pwd) ] 
do
echo "please enter a correct path where to search:"
read myPath
done

RESULT= "$(find  $HOME "-type -f" -newer /tmp/start -not -newer tmp/end)"

echo $RESULT 
```

当我尝试执行它时，我得到：

```
find: Arguments to -type should contain only one letter
TimeStamp: line 17: : command not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:45:07.587

首先，为什么你有引号`-type -f` *之外的东西？*它 `-type f`不是`-type -f`（在 之前没有破折号`f`）

尝试这个：

```
"$(find $HOME -type f -newer /tmp/start -not -newer tmp/end)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:47:22.197

你有：

```
RESULT= "$(find  $HOME "-type -f" -newer /tmp/start -not -newer tmp/end)" 
```

### find: -type 的参数应该只包含一个字母

几件事：删除`-type -f`. 我不知道你为什么把它们放在那里。参数的正确`-type`参数应该是`f`而不是`-f`。

### 时间戳：第 17 行：：找不到命令

你做了触摸`/tmp/end`，但你在看`tmp/end`。这与`$PWD/tmp/end`. 您需要在前面添加一个斜杠，以将其锚定到目录结构的根目录。你需要`/tmp/end`而不是`tmp/end`。

尝试：

```
RESULT= "$(find "$HOME" -type f -newer /tmp/start -not -newer /tmp/end)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T00:45:53.647

我会试试这个：

```
"$(find $HOME -type f -newer /tmp/start -not -newer tmp/end)" 
```

# ascii - ₧ 符号是干什么用的？

> ID：10669928
> 
> 赞同：1
> 
> 时间：2012-05-20T00:43:48.457
> 
> 标签：ascii

在 ASCII 中，符号 158 是₧。

这个符号代表什么，它是用来做什么的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T00:46:02.040

ASCII 只上升到 126，所以你的问题没有意义。但是，符号“₧”代表[西班牙比塞塔](http://en.wikipedia.org/wiki/Spanish_peseta)，是旧代码页 437 的一部分。现在它是 Unicode 的一部分，即[U+20A7](http://www.fileformat.info/info/unicode/char/20a7/index.htm)。

# response - 调用 recv() 时，程序运行非常缓慢

> ID：10669933
> 
> 赞同：-5
> 
> 时间：2012-05-20T00:44:49.007
> 
> 标签：response, winsock, python-idle, recv, performance

我的代码是：http: [//ideone.com/nVXIQ](http://ideone.com/nVXIQ)。

`recv()`功能总是空转（它工作得很慢）；需要几秒钟才能得到结果，并且`recv()`应该快速处理如此少量的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:50:43.973

您对 recv 的阻塞行为有疑问吗？如果是这样，那么研究使用非阻塞 IO 和选择/轮询循环之类的东西。

# ruby-on-rails - 将 fragment_caching 的 rails 缓存存储设置为不同

> ID：10669938
> 
> 赞同：1
> 
> 时间：2012-05-20T00:45:55.340
> 
> 标签：ruby-on-rails, fragment-caching

是否可以将 rails 片段缓存配置为 file_store 并让 Rails.cache 对象使用内存存储来存储值？或者它们到底是相同的存储机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:24:01.287

据我所知，如果没有猴子补丁，他们将不得不共享同一个缓存存储。

我认为可以对东西进行修补，让它寻找在其他地方使用的商店，然后让两者分开工作，但这听起来有点像一场噩梦。

# encryption - 如何在 linux 中使用 Openssl 进行加密时测量经过的时间

> ID：10669941
> 
> 赞同：2
> 
> 时间：2012-05-20T00:46:10.543
> 
> 标签：encryption, openssl, measure

我不知道如何测量使用 openssl 加密的经过时间。

我已经将 openssl 下载到我的 linux 系统没有问题，我可以对不同的文件进行加密，但我不知道如何测量时间以查看哪种加密算法更有效。

这是我用来进行加密的命令：

```
 OpenSSL> enc -des-cbc -salt -a -in "/usr/local/openssl/file1.txt" -out "/usr/local/openssl/file1_des.enc" -k "123456" 
```

这是另一种算法：

```
 OpenSSL> enc -aes-128-cbc -salt -a -in "/usr/local/openssl/file2.txt" -out "/usr/local/openssl/file2_aes.enc" -k "123456" 
```

有没有办法测量执行时间？我试图打开另一个终端并执行（时间）但它没有帮助。我也没有太多使用linux的经验。但是，我尝试在 Windows 上做同样的事情，但仍然没有办法测量时间。

希望大家能帮忙。

感谢：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:33:03.233

呃，你的意思是像`openssl speed`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T00:50:14.197

在 Linux 上，我在 shell 提示符下输入了这个：

```
 time openssl enc -des-cbc -salt -a -in foo.txt -out foo_des.enc -k "123456" 
```

并得到输出：

```
real    0m0.214s
user    0m0.008s
sys     0m0.016s 
```

也就是说，如果您引入某种循环结构，您将获得更有意义的结果。至少，考虑创建一个包含多个`openssl`命令行的文本文件：

opensslcmds.txt：

```
enc -des-cbc -salt -a -in foo.txt -out file1_des.enc -k 123456
enc -des-cbc -salt -a -in foo.txt -out file2_des.enc -k 123456
enc -des-cbc -salt -a -in foo.txt -out file3_des.enc -k 123456
(and so on) 
```

然后运行

```
time openssl < opensslcmds.txt 
```

# android - android中的netty有错误找不到类ClientBootstrap

> ID：10669942
> 
> 赞同：0
> 
> 时间：2012-05-20T00:46:10.647
> 
> 标签：android, netty

我正在尝试在 Android 的模拟器上运行 Echo 示例：
-服务器在我的计算机上运行良好（Windows 7）
-在 AndroidWithNettyActivity 的 OnCreate 方法中（该类是在我创建 Android 项目时创建的）我创建了新的 AndroidEchoClient 实例和调用运行方法。

当模拟器启动我的活动（AndroidWithNettyActivity）时，它会失败并显示对话框强制关闭。有没有人有这个问题的经验？在日志猫中，有错误：[05-20 07:21:13.444: E/dalvikvm(325): Could not find class 'org.jboss.netty.bootstrap.ClientBootstrap'，引用自方法 Archer.Netty.Android .AndroidEchoClient.run]

似乎模拟器找不到netty库的ClientBootstrap类（netty-3.4.5.Final.jar），但我不知道为什么，因为我已经在我的项目的构建路径中添加了netty的库。

请帮助我，在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:57:36.623

这是我的愚蠢错误，我只是通过使用我的 android 应用程序导出 netty 的库来解决这个问题

# android - AlertDialog 这是一个错误吗？

> ID：10669948
> 
> 赞同：1
> 
> 时间：2012-05-20T00:47:07.563
> 
> 标签：android

我的应用程序创建了一个 AlertDialog，用户在其中输入要保存的名称。当用户单击保存按钮时，onClickListener 将检查重复名称。如果名称已经存在，则会弹出另一个对话框，提醒用户现有数据将被替换。然后，用户可以选择取消并返回以更改为新名称，或者继续进行数据替换。
当第二个对话框出现时，我希望第一个对话框仍然可见，直到我调用dismiss。但是，第一个 AlertDialog 在第二个 AlertDialog 出现之前消失了。当单击按钮时，将自动调用关闭。这是一个错误还是设计使然？
我编写了下面的测试用例，我在 3 台设备上进行了检查：Nexus S android 4.0、HTC Rezound android 2.3 和 Motorola Droid Bionic android 2.3。

**布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >

    <TextView 
        android:id="@+id/message"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Some message will be here"
    />

    <Button
        android:id="@+id/show_btn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:text="Show"
    />

</LinearLayout> 
```

**代码**

```
public class AlertDialogBug extends Activity 
{
    static final int DIALOG_ALERT_ID = 1;
    AlertDialog alertDlg;  
    TextView message;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        message = (TextView) findViewById(R.id.message);
        Button showButton = (Button) findViewById(R.id.show_btn);
        showButton.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                showDialog(DIALOG_ALERT_ID);
            }   
         });
     }

    private AlertDialog createAlertDialog()
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Bug?");

        builder.setPositiveButton("OK", new DialogInterface.OnClickListener()
        {

            @Override
            public void onClick(DialogInterface dialog, int which)
            {
                // No dismiss, cancel, finish, or removeDialog,
                // but the dialog will disappear when this button is clicked.
            }

          });

         alertDlg = builder.create();
         alertDlg.setOnDismissListener(new OnDismissListener()
         {

             @Override
             public void onDismiss(DialogInterface dialog)
             {
                message.setText("onDismiss was called");
             }

          });

          return alertDlg;
    }

    @Override
    protected Dialog onCreateDialog(int id)
    {
        switch (id)
        {
            case DIALOG_ALERT_ID:
                return createAlertDialog();

            default:
                return super.onCreateDialog(id);
        }       
    } 

} 
```

我最初使用 android:theme="@android:style/Theme.Dialog" 将保存对话框编写为一个活动。UI 在 Nexus S 和 Rezound 上看起来不错，但在 Droid Bionic 上看起来很糟糕（编辑框和按钮只占宽度的一半，另一半是空白的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:29:54.017

这是设计使然。如果您不想通过单击按钮取消对话框，下面是一些代码。当您不想取消对话框时，将其添加到您的 setPositiveButton 方法中。

```
try { 
Field field = dialog.getClass().getSuperclass().getDeclaredField("mShowing"); 
field.setAccessible(true); 
field.set(dialog, false);

} catch (Exception e) { 
e.printStackTrace(); 
} 
```

然后如果要取消对话框，只需在下面添加即可。

```
try {
Field field = dialog.getClass().getSuperclass().getDeclaredField("mShowing");
field.setAccessible(true);
field.set(dialog, true);
} catch (Exception e) {
e.printStackTrace();
} 
```

顺便说一句，您的警报对话框永远不会调用您的 xml。因为 setTitle() 和 setMessage 方法由警报对话框提供。

如果要提供自定义对话框，请调用 setCustomeView(layout)。

有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:18:24.680

不是错误 - 在这种情况下，仅提供 onClick() 以便您可以在单击按钮时更新 UI/执行操作。

如果您想在单击“确定”按钮时保留对话框，您可以尝试使用确定/取消按钮创建具有透明背景的自定义活动。

# java - 用算法找到组合位的奇怪行为

> ID：10669949
> 
> 赞同：2
> 
> 时间：2012-05-20T00:47:30.933
> 
> 标签：java, algorithm

我正在尝试获得所有独特的位组合（真的很有趣..我知道..zzz）。基本上它适用于小数字，如 10 位和 3 个唯一或 100 位和 4 个唯一。我正在大规模测试它，但是当我使用 200 位和 30 个项目时会发生一些奇怪的事情……我什么也没得到。我试图调试代码，但不明白为什么。

我正在使用所有长，所以我不知道为什么，位是否受到某种限制，或者这是我的数学问题？另外，我正在为非常多的位做可能还是有一些限制（即在我的程序完成之前太阳燃烧）？理想情况下，我想从 2000 个列表中获取 30 个唯一位。这种方法是唯一超过 100 个的方法，但我不知道它的限制。

这是代码：

```
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.SortedMap;
import java.util.TreeMap;

public class Combinatorics {

    static final class CombinationsIterator implements Iterator<Long> {
        private int n;
        private int k;
        private long next;

        public CombinationsIterator(int n, int k) {
            this.n = n;
            this.k = k;
            next = (1L << k) - 1;
        }

        @Override
        public boolean hasNext() {
            return (next & (1L << n)) == 0;
        }

        @Override
        public Long next() {
            long result = next;
            long x = next;
            long u = x & -x;
            long v = u + x;
            x = v + (((v ^ x) / u) >> 2);
            next = x;
            return result;
        }

        @Override
        public void remove() { throw new UnsupportedOperationException(); }
    }

    static final class PermutationsIterator implements Iterator<List<Integer>> {
        int n;
        int k;
        int nPk;
        List<Integer> elements;
        int i;
        List<Integer> next;

        public PermutationsIterator(int n, int k) {
            this.n = n;
            this.k = k;

            nPk = permute(n, k);

            List<Integer> elements = new ArrayList<Integer>();
            for (int i = 0; i < n; i++)
                elements.add(i);
            this.elements = Collections.unmodifiableList(elements);
        }

        @Override
        public boolean hasNext() { return i < nPk; }

        @Override
        public List<Integer> next() {
            List<Integer> next = new ArrayList<Integer>();
            List<Integer> notNext = new ArrayList<Integer>(elements);
            int r = i;
            int np = nPk;
            for (int j = 0; j < k; j++) {
                np /= n - j;
                next.add(notNext.remove(r / np));
                r %= np;
            }
            i++;
            return next;
        }

        @Override
        public void remove() { throw new UnsupportedOperationException(); }
    }

    public static long toCombination(List<Integer> permutation) {
        long combination = 0;
        for (int i : permutation)
            combination |= (1L << i);
        return combination;
    }

    public static List<Integer> toPermutation(long combination) {
        List<Integer> permutation = new ArrayList<Integer>();
        long combinationRemaining = combination;
        int i = 0;
        while (combinationRemaining > 0) {
            if ((combinationRemaining & 1) > 0) {
                permutation.add(i);
            }
            combinationRemaining >>= 1;
            i++;
        }
        return permutation;
    }

    public static SortedMap<Integer, Integer> multiplicitiesOf(List<Integer> multiset) {
        SortedMap<Integer, Integer> multiplicities = new TreeMap<Integer, Integer>();
        for (Integer k : multiset) {
            Integer v = multiplicities.get(k);
            v = (v == null) ? 1 : (v + 1);
            multiplicities.put(k, v);
        }
        return multiplicities;
    }

    public static Iterator<Long> combinationsIterator(int n, int k) {
        return new CombinationsIterator(n, k);
    }

    public static Iterator<List<Integer>> permutationsIterator(int n, int k) {
        return new PermutationsIterator(n, k);
    }

    public static int factorial(int n) {
        int result = 1;
        for (int i = 1; i <= n; i++)
            result *= i;
        return result;
    }

    public static int permute(int n, int k) {
        int result = 1;
        for (int i = n - k + 1; i <= n; i++)
            result *= i;
        return result;
    }

    public static int choose(int n, int k) {
        return permute(n, k) / factorial(k);
    }

    public static void main(String[] args) throws IOException {
        System.out.println("Starting");
        for (Iterator<Long> it = combinationsIterator(200, 2); it.hasNext(); ) {
            long next = it.next();
            System.out.format("%d\t%10s\n", next, Long.toBinaryString(next));
        }

    }
} 
```

在`main`更改方法`combinationsIterator(200, 2);`中会产生奇怪的行为（10,3 很快就给出了正确的结果，甚至 100,5 ..但是随着数字变高它只是没有给出结果而不是花时间处理）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T00:51:29.003

由于您使用的是 a `long`，因此它仅限于 64 位。但话虽如此， `200`选择`30`会带你——基于一些粗略的粗略数学——在现代 PC 上迭代 10 亿千年。

# ruby - Rails 教程 - 第 5.2 节 Routing/Rspec 错误

> ID：10669951
> 
> 赞同：1
> 
> 时间：2012-05-20T00:47:58.163
> 
> 标签：ruby, rspec, routes, railstutorial.org

红宝石新手在这里。我正在关注 Rails 教程并被困在 5.3 re: routes 附近。

我有 5 页（主页、关于、帮助、联系方式），都具有类似的测试集，而 rspec 仅在“主页”上的测试中失败。由于我使用的是 application_helper，所以我不需要在 home.html.erb 中指定，对吧？我还接受了[了解 Rails 路由的建议：在 routes.rb 中匹配与根，并在 routes.db 中](https://stackoverflow.com/questions/5733101/understanding-rails-routes-match-vs-root-in-routes-rb)添加了“match '/static_pages/home' => 'static_pages#home'”。

一直停留在这两个错误上。请帮忙。谢谢！

错误：

```
1) Static pages Home page should have the h1 'Sample App'
Failure/Error: page.should have_selector('h1', text: 'Sample App')
expected css "h1" with text "Sample App" to return something
# ./spec/requests/static_pages_spec.rb:9:in `block (3 levels) in <top (required)>'

2) Static pages Home page should have the base title
Failure/Error: page.should have_selector('title',
expected css "title" with text "Ruby on Rails Tutorial Sample App" to return something
# ./spec/requests/static_pages_spec.rb:13:in `block (3 levels) in <top (required)>' 
```

主页.html.erb

```
<div class="center hero-unit">
<h1>Welcome to the Sample App</h1>

<h2>
This is the home page for the
<a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
sample application.
</h2>

<%= link_to "Sign up now!", '#', class: "btn btn-large btn-primary" %>
</div>

<%= link_to image_tag("rails.png", alt: "Rails"), 'http://rubyonrails.org/' %> 
```

static_pages_spec.rb

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do

  it "should have the h1 'Sample App'" do
    visit root_path
    page.should have_selector('h1', text: 'Sample App')
  end

  it "should have the base title" do
    visit root_path
    page.should have_selector('title', text: "Ruby on Rails Tutorial Sample App")
  end

  it "should not have a custom page title" do
    visit root_path
    page.should_not have_selector('title', text: '| Home')
  end
end 
```

应用程序.html.erb

```
<!DOCTYPE html>
<html>
  <head>
    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>    
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <%= yield %>
      <%= render 'layouts/footer' %>
    </div>
  </body>
</html> 
```

application_helper.rb

```
module ApplicationHelper

# Returns the full title on a per-page basis.
def full_title (page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
        base_title
    else
        "#{base_title} | #{page_title}"
    end
end

end 
```

路线.rb

```
SampleApp::Application.routes.draw do
  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
  match '/static_pages/home' => 'static_pages#home'

  root to: 'static_pages#home'
end 
```

需要帮助请叫我。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T01:12:48.160

您是否删除了 public/index.html 文件并直观地验证了您可以在浏览器中访问 /，并且正在呈现预期的模板？否则，您的规格看起来不错。

# uploadify - Uploadify（或其他）文件选择器对话框，带有复选框或灰色的先前上传

> ID：10669964
> 
> 赞同：0
> 
> 时间：2012-05-20T00:52:54.057
> 
> 标签：uploadify

Uploadify 是否提供以下任何选项？

在向用户显示的文件对话框中，显示一个复选框而不是启用 CTRL + 鼠标单击以允许用户指定要上传的项目。

在向用户显示的文件对话框中，以灰色显示已上传的项目。

显示文件的树视图而不是显示文件对话框。

如果您知道另一个允许这些功能并且跨浏览器兼容的库，也请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:43:31.043

它不支持任何这些，因为用于 Uploadify 的 Flash 播放器（虽然现在也有 HTML5 实现，我不能说，因为我不知道）不支持它们。

# ruby-on-rails - Rails RuntimeError：“为 nil 调用 id”。Rails 告诉我，我通过 params[:id] 传入的实例变量为 null

> ID：10669965
> 
> 赞同：0
> 
> 时间：2012-05-20T00:52:54.600
> 
> 标签：ruby-on-rails, model-view-controller, crud, params, instance-variables

EDIT2：[已解决]控制器文件中的“创建”方法在“编辑”方法之后才会“结束”。但是，直到 8 小时后，我才能回答我自己的问题。

编辑：我注意到这可能是我的 routes.rb 文件的问题。就在下面。

路线.rb

```
SimpleCms::Application.routes.draw do

  root :to => "subjects#list"

  match ':controller(/:action(/:id))(.:format)'
end 
```

本质上这是一个@instance_variable 问题。更具体地说，@instance_variable[:id => nil] 问题。不知何故，我将 nil (null) :id (primary key) 值传递给 rails 但我单击的编辑按钮（此列表中的最后一个文件是 list.html.erb 文件，其中包含需要的按钮您编辑.html.erb) 应该传递与列表页面上给定主题相对应的 :id 值。

因此，首先是来自浏览器的错误消息：

```
 RuntimeError in Subjects#edit

Showing C:/Users/davo/Desktop/RailsProjects/simple_cms/app/views/subjects/edit.html.erb     where line #6 raised:

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil,     use object_id
Extracted source (around line #6):

3: <div class="subject edit">
4:   <h2>Update Subject</h2>
5: 
6:   <%=  form_for(:subject, :url => {:action => 'update', :id => @subject.id}) do |f| %>
7: 
8:       <table summary="Subject form fields">
9:         <tr>
Rails.root: C:/Users/davo/Desktop/RailsProjects/simple_cms

Application Trace | Framework Trace | Full Trace
app/views/subjects/edit.html.erb:6:in     `_app_views_subjects_edit_html_erb__829468061_51428148'
Request

Parameters:

{"id"=>"1"} 
```

这是控制器（“subjects_controller.rb”），所以你可以看到实例变量的东西。编辑和更新方法在底部 **所有其他调用 params[:id] 的方法都在工作。控制器可能没有任何问题，而只是视图。特别是，根据这种观点，@subject 与 :subject 与subjects.method 的东西......该语法似乎有问题。

```
class SubjectsController < ApplicationController

  def list
    @subjects = Subject.order("subjects.position ASC")
  end

  def index
    list
    render('list')
  end

  def show
    @subject = Subject.find(params[:id])
  end

  def new
    @subject = Subject.new(:name => 'default')
  end
  def create
    #instantiate a new object using form params
    @subject = Subject.new(params[:subject])
    #save the subject
    if @subject.save
      redirect_to(:action => 'list')
      #if save succeeds redirect to list action
    else
      #if save fails, redisplay form
      render('new')
    end
  def edit
    @subject = Subject.find(params[:id])
  end
  #passing an @instancevariable inside of a {hash}...is there anything odd about that?
  #I'm just trying to inspire you guys -->
  #
  #I have a hunch that the :syntax/@syntax/#{etc} involving params, :id and
  #:subject could be the root of this issue...just a hunch
  #
  def update
    #Find object using form parameters
    @subject = Subject.find(params[:id])
    #Update the object
    if @subject.update_attributes(params[:subject])
      redirect_to(:action => 'show', :id => @subject.id)
    else
      render('edit')
    end
  end
  end
end 
```

最后，这里是edit.html.erb

```
<%= link_to("<< Back to List", {:action => 'list'}, :class => 'back-link') %>

<div class="subject edit">
  <h2>Update Subject</h2>

  <%=  form_for(:subject, :url => {:action => 'update', :id => @subject.id}) do |f| %>

      <table summary="Subject form fields">
        <tr>
          <th>Name</th>
          <td><%= f.text_field(:name) %></td>
        </tr>
        <tr>
          <th>Position</th>
          <td><%= f.text_field(:position) %></td>
        </tr>
        <tr>
          <th>Visible</th>
          <td><%= f.text_field(:visible) %></td>
        </tr>
      </table>
      <tr>
        <td><%= f.submit 'Update Subject' %></td>
      </tr>
  <% end %>
</div> 
```

编辑：这是 list.html.erb 文件，其中包含指向 edit.html.erb 文件的链接，该文件目前未打开并显示错误消息。

```
<html>
    <div class="subject list">
      <h2>Subjects</h2>

      <!--- header row with all the different attributes --->
      <table class="listing" summary="Subject list">
        <tr class="header">
          <th>#</th>
          <th>Subject</th>
         <th>Visible</th>
          <th>Pages</th>
          <th>Actions</th>
        </tr>
        <!-- this is the beginning of a loop, that ends way down there -->
        <% @subjects.each do |subject| %>
        <tr>
          <td><%=  subject.position %></td>
          <td><%=  subject.name %></td>
          <td class="center"><%= subject.visible ? 'Yes' : 'No' %></td>
          <td class="center"><%=  subject.pages.size %></td>
          <td class="actions">
            <%=  link_to("Show", {:action => 'show', :id => subject.id}, :class => 'action show') %>
            <%= link_to("Edit", {:action => 'edit', :id => subject.id}, :class => 'action edit') %>
            <%=  link_to("Delete", '#', :class => 'action delete') %>
          </td>
            <% end %>
        </tr>
        </table>
        <%= button_to "Create New Subject", {:action => 'new'}, {:class => "buttonTo"} %>
    </div>
</html> 
```

编辑： - 如果您需要查看特定的 model.rb 文件，请告诉我。如果您需要查看其中的任何一个，在我的模型文件夹中，我有“subject.rb”、“section.rb”、“section_edit.rb”、“page.rb”和“admin_user.rb”。我对这个有点困惑，所以也许它们会有用。它们都包含一堆模式（has_many、belongs_to 等）指令和一些自定义控制台调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:05:56.540

```
= form_for(@subject, :as => :subject, ..... 
```

@subject 不是 nil，因为如果没有找到记录， find 会引发异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T02:33:09.363

我在控制器中执行一些 def/end 语法时打错了字。我认为这是'def create'，我没有结束它。

# web-scraping - 如何在 Groupon Html 中获得剩余时间？

> ID：10669969
> 
> 赞同：2
> 
> 时间：2012-05-20T00:53:43.550
> 
> 标签：web-scraping, web-crawler

我无法从 groupon HTML 获得剩余时间。我之前确实通过点击链接找到了一个方法，它以 JSON 格式返回，但该链接不再有效。

那么有没有办法从交易中获得剩余时间？仅适用于商品、度假和所有交易。我可以从现在的交易中获得（这只是文本），不像其他倒计时计数器。

要在同一页面上，让我们从这个链接开始：

[http://www.groupon.com/deals/3rd-coast-cruising-1?c=all&p=23](http://www.groupon.com/deals/3rd-coast-cruising-1?c=all&p=23)

在我曾经打过之前：

[http://www.groupon.com/deals/3rd-coast-cruising-1/deal_status.json](http://www.groupon.com/deals/3rd-coast-cruising-1/deal_status.json)

并获得了包括剩余时间在内的信息，但它不再这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:06:55.907

它仍然存在，以时间戳的形式存在。使用第一个链接的来源：

```
<li class='groupon_countdown' data-deadline='1337576399' ... 
```

在第二个链接中：

```
"deadline":"1337576399" 
```

我不知道您使用的是什么语言，但是使用 python，您可以将其转换为这样的可读格式：

```
>>>import time
>>>time.asctime(time.localtime(1337576399))
'Mon May 21 06:59:59 2012' 
```

无论如何，在我的时区，这与现在+他们计时器上剩余的时间相对应。

# c# - 为实现可扩展性而正确/错误地使用委托

> ID：10669984
> 
> 赞同：7
> 
> 时间：2012-05-20T00:59:47.923
> 
> 标签：c#, generics, animation, delegates, code-reuse

**我试图让我的 GUI 库的用户不受限制地自定义输入/输出过渡效果，同时仍然保持简单性/防止误用**（当控件进入或退出视图时）。

为此，我向 Control 类添加了一个委托，该委托将采用 Control 引用和转换完成百分比，以便用户能够以他想要的任何方式平滑地转换控件的位置/不透明度，基于给定百分比。他所要做的就是在控制入口/出口之前订阅一个转换函数。

但是，我意识到仅使用当前完成百分比来转换/动画控件是不可能的，因为您还必须存储和比较控件的初始位置。
**为了使这个存储要求明显，我应该强制使用委托函子吗？**

如果是这样，我该如何以简约/干净的方式做到这一点？

* * *

**随意提出另一种允许用户应用自定义过渡动画的方法！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T09:41:26.660

IMO 您不必向控件的用户提供控件的初始位置，因为他可以相对于初始位置定位它：负数用于左侧和顶部，正数用于右侧和底部。

下面的代码是一个快速转换的函数：

```
Point FastTranDiagonial(float Percentage){
   Thread.Sleep(10);
   int pixelsDist = (1 - Percentage)* 300;//300 is the maximum distance 
   return new Point(-pixelsDist ,pixelsDist);
} 
```

当您调用委托时，您必须将 Point 添加到控件的初始位置。您必须注意到委托包含一个 Thread.Sleep(X)，这必须由用户控制，因为他可能想要执行快速或慢速事务。

您可能还想考虑添加像 jQuery 这样的顺序转换，以便一个转换在另一个转换完成后开始。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T09:52:11.350

如果我理解正确，您的 Control 会调用 Animation(calculation) 委托（不时地，可能在每一帧上）并传递过渡竞争百分比。然后，动画委托计算并将平移和位置返回/应用到控件。这个对吗？

假设上面是正确的，有几种解决方案：

1.  仅对位置和不透明度进行动画处理时：

    除了竞争百分比，您还必须在调用委托时发送初始控制状态的位置和不透明度。必须在转换开始时记住初始状态，并在每次调用中发送给委托。

2.  通常为任意属性设置动画时：

    除了竞争百分比，您还提供了 State 属性（Object 类型甚至更好的 Dictionary）。此 State 属性完全由委托及其动画逻辑控制。

    对于您的控件，State 属性将没有任何语义或含义。您的控件仅必须在后续调用委托之间保留 State 属性的值。

    总而言之，代表在第一次调用时用初始值填充状态，在后续调用中使用这些值 - 做任何它想做的事情。Delegate 还将计算的值应用于 Control。请注意，可以在委托中使用的所有属性都必须是公共的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T12:18:24.593

我认为您至少需要将以下参数传递给委托：-

*   控件本身
*   包含控件的容器（例如面板）
*   完成百分比

通过传递控件本身，用户将获得其所有初始状态信息（例如位置）。此外，如果用户需要设置控件的任何属性，他肯定需要对控件本身的引用。

如果用户需要容器的大小/位置信息，或者如果他需要对容器做一些特殊的控制，他可能需要容器。

# bash - 如何替换除了出现在 TeX 命令之后的所有空格？

> ID：10669985
> 
> 赞同：2
> 
> 时间：2012-05-20T00:59:50.647
> 
> 标签：bash, sed, replace

我有一个文件，`file1.tex`，其中包含 TeX 命令，例如`\em`和`\par`。所有命令的格式都是`\`+ 一些来自 AZ 的大写和小写字母字符串，并且后面都跟一个空格。

我需要使用这样的命令，它将所有空格替换为`\`、斜杠和空格。

```
sed -i "s/\ /\\\\\ /g" ./file1.tex 
```

我不希望这些替换在 TeX 命令之后立即出现的空格。例如，我想要这个：

```
\noindent This is a sentence {\em which has some words}.
This is another \hfill sentence \ldots with some more words. 
```

成为：

```
\noindent This\ is\ a\ sentence\ {\em which\ has\ some\ words}.
This\ is\ another\ \hfill sentence\ \ldots with\ some\ more\ words. 
```

如何替换所有空格，除了出现在任何形式的命令之后的空格`\sometext`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:47:26.373

由于`sed`不支持后视，我认为使用 Perl 会容易得多。

```
$ perl -pe 's/\b(?<!\\)(\w+)\b /$1\\ /g' texfile
\noindent This\ is\ a\ sentence\ {\em which\ has\ some\ words}.
This\ is\ another\ \hfill sentence\ \ldots with\ some\ more\ words. 
```

要就地对文件进行永久更改：

```
perl -pi -e 's/\b(?<!\\)(\w+)\b /$1\\ /g' texfile 
```

解释：

正则表达式匹配不以反斜杠开头且后跟空格的单词。

*   `\b`- 单词边界
*   `(?<!`- 开始一个非捕获的负面回顾（不匹配）
*   `\\`- 转义反斜杠
*   `)`- 关闭后视
*   `(`- 开始一个捕获组
*   `\w+`- 匹配一个或多个单词字符（字母数字加下划线）
*   `)`- 关闭捕获组
*   `$1`- 将捕获组复制到替换中
*   `\\`- 添加反斜杠
*   `g`- 全局替换

我在清单之外留下了一些不言而喻的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T08:07:27.637

这可能对您有用：

```
 sed -i 's/\(\\[^ ]*\) /\1\n/g;s/ /\\ /g;y/\n/ /' file 
```

解释：

*   用换行符替换命令后的所有单个空格。`s/\(\\[^ ]*\) /\1\n/g`
*   在所有其他空格前加上`\`.`s/ /\\ /g`
*   用空格替换所有换行符。`y/\n/ /`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T02:18:55.460

我会这样使用`awk`：

`awk '{ for (i=1; i<NF; i++) if ($i ~ /\\/) printf "%s ", $i; else if ($i !~ /\\/) printf "%s\\ ", $i; printf $NF"\n" }' file.tex`

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T08:03:37.757

用一些可识别的文本替换 TeX 命令末尾的空格，在所有空格之前添加斜杠，最后删除您添加的文本。例如：

```
s;\(\\[[:alpha:]]\{1,\}\);\1{};g
s; ;\\ ;g
s;\(\\[[:alpha:]]\{1,\}\){};\1 ;g 
```

在这里，我选择添加`{}`到 TeX 命令的末尾，这是安全的，因为您知道该结构中不存在任何 TeX 命令。

# javascript - 将动画帧更改为仅在坦克移动时

> ID：10669987
> 
> 赞同：2
> 
> 时间：2012-05-20T01:00:09.070
> 
> 标签：javascript, html, canvas

我在画布的屏幕上渲染了瓷砖地图和坦克：

[http://www.exeneva.com/html5/movingTankExample/](http://www.exeneva.com/html5/movingTankExample/)

但是，您会注意到坦克的动画运动（移动轨迹）经常发生。你将如何改变它，以便坦克履带的移动仅在坦克移动时发生？请注意，目前没有物理学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:06:51.817

您将必须实现一个`state machine`控制坦克实际状态的基础。

例如。

1.  在 STOPPED 状态下，坦克没有动画，它以这个状态开始；
2.  当您按下一个键时，您将状态切换为 MOVING，因此动画功能将使用此标志来知道何时为您的精灵设置动画；
3.  当您释放一个键时，您将状态切换回 STOPPED。

看看这个链接（第二部分多为真实动作，第一部分更理论化）：[http ://active.tutsplus.com/tutorials/actionscript/the-power-of-finite-state-machines-概念与创造/](http://active.tutsplus.com/tutorials/actionscript/the-power-of-finite-state-machines-concept-and-creation/)

它是关于 Flash 的，但这个概念是通用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:11:57.933

您的`startUp`函数`drawScreen`每 100 毫秒调用一次，其中坦克运动得到动画。您需要将动画逻辑提取`drawScreen`到它自己的函数中，例如`animateMovement`并从您的处理程序中调用它`onkeydown`。就像是：

```
function animateMovement(){
    var int = setInterval(function(){
        // Tank tiles
          var tankSourceX = Math.floor(animationFrames[frameIndex] % tilesPerRow) * tileWidth;
          var tankSourceY = Math.floor(animationFrames[frameIndex] / tilesPerRow) * tileHeight;    
          // Draw the tank
          context.drawImage(tileSheet, tankSourceX, tankSourceY, tileWidth, tileHeight, tankX, tankY, tileWidth, tileHeight);
          // Animation frames
          frameIndex += 1;
          if (frameIndex == animationFrames.length) {
            frameIndex = 0;
          }
    },100);
    setTimeout(function(){clearInterval(int);}, 1000);
} 
```

把它放在你的`drawScreen`函数之前，然后在你调用之后从你的`document.onkeydown`处理程序中调用它`drawScreen`。显然，您还需要从`drawScreen`函数中删除动画代码：

```
function drawScreen() {
  // Tile map
  for (var rowCtr = 0; rowCtr < mapRows; rowCtr += 1) {
    for (var colCtr = 0; colCtr < mapCols; colCtr += 1) {
      var tileId = tileMap[rowCtr][colCtr] + mapIndexOffset;
      var sourceX = Math.floor(tileId % tilesPerRow) * tileWidth;
      var sourceY = Math.floor(tileId / tilesPerRow) * tileHeight;

      context.drawImage(tileSheet, sourceX, sourceY, tileWidth, 
        tileHeight, colCtr * tileWidth, rowCtr * tileHeight, tileWidth, tileHeight);
    }
  }
  /*tank animation was here*/
} 
​ 
```

# java - java中最终局部变量的范围

> ID：10669993
> 
> 赞同：6
> 
> 时间：2012-05-20T01:02:09.600
> 
> 标签：java, inner-classes, final, local-variables

方法局部内部类无法访问局部变量，因为方法局部内部类的实例在方法结束后可能仍然存在。但是一旦局部方法结束，局部变量就会消失。我了解到方法局部内部类可以访问最终局部变量，这是否意味着最终局部变量在方法结束后仍然存在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T01:09:17.310

有点。Java 匿名内部类的行为类似于“闭包”，也就是说，它们围绕当前本地状态“关闭”。然而，Java 只允许这些类围绕最终变量关闭。如果没有，变量的本地状态可能会改变，但内部类中保存的版本不会改变，因此它将访问“过期”实例。这可能会让程序员感到困惑。

相反，Java 要求实例通过方法而不是变量重新分配来处理可变性。这会带来更好的清晰度并允许更简单的调试。有关 Java 为何这样做的更多信息，请参阅[此答案](https://stackoverflow.com/a/4732617/465378)。

由于该类仍然持有对该变量的引用，因此您的问题的答案是*肯定*的，在内部类放弃该变量的所有权之前，该实例不会被垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T02:20:57.393

不，它没有。这意味着局部变量的*副本*仍然存在，在内部类实例中。“最终”只是确保两个副本的价值不会混淆。

# c++ - 从刚刚序列化的对象创建对象的xerces c问题

> ID：10669994
> 
> 赞同：0
> 
> 时间：2012-05-20T01:02:47.403
> 
> 标签：c++, visual-studio-2010, xerces-c

我遇到了一个问题，我将一个对象序列化为一个字符串，然后从同一个字符串再次创建它。当我尝试从字符串创建相同的对象并检查值时，函数没有正确返回。它将整个 XML 对象作为字符串返回。

我查看了生成的 xml，它看起来是正确的。所以我不知道该怎么做。

感谢您对此问题的任何见解。

下面是一个例子。

```
#include "XMLHelper.hxx"

void serializeObject(XmlHelper::Object& mess, std::string& result);

int _tmain(int argc, _TCHAR* argv[])
{

   XmlHelper::objectType oType(XmlHelper::objectType::Status);
   XmlHelper::Object obj(oType);

   unsigned long time(134000000);
   XmlHelper::Status status(time);
   obj.status().set(status);

   std::string result;

   serializeObject(obj, result);

   if (obj.status().present()  )
   {
    std::cout<<"Message is Status"<<std::endl;
   }
   if (obj.objectType() == "Status" )
   {
    std::cout<<"Message is Status"<<std::endl;
   }
   if (obj.objectType() == XmlHelper::objectType::Status )
   {
    std::cout<<"Message is Status"<<std::endl;
   }

   XmlHelper::Object otherObj(result);

   if (otherObj.status().present()  )
   {
    std::cout<<"Message is Status"<<std::endl;
   }
   else if (otherObj.objectType() == "ThingA")
   {
    std::cout<<"Message is ThingA"<<std::endl;
   }
   else if (otherObj.objectType() == "ThingB")
   {
    std::cout<<"Message is ThingB"<<std::endl;
   }

   return 0;
}

void serializeObject(XmlHelper::Object& mess, std::string& result)
{

    std::ostringstream buff;
    xml_schema::namespace_infomap nsm;

    nsm[""].schema = "XMLHelper.xsd";

    Object_(buff, mess, nsm, "UTF-8", xml_schema::flags::no_xml_declaration);

    result=buff.str();

 }

<?xml version="1.0" encoding="utf-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">

  <!--<schema xmlns="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.com/TENAXML">-->

  <xsd:complexType name ="Status" >
    <xsd:sequence>
      <xsd:element name="timeOfUpdate" type="xsd:unsignedLong" minOccurs="1" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name ="ThingA" >
    <xsd:sequence>
      <xsd:element name="number" type="xsd:unsignedLong" minOccurs="1" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:complexType name ="ThingB" >
    <xsd:sequence>
      <xsd:element name="number" type="xsd:unsignedLong" minOccurs="1" maxOccurs="1"/>
    </xsd:sequence>
  </xsd:complexType>

  <xsd:simpleType name="objectType">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="Status"/>
      <xsd:enumeration value="ThingA"/>
      <xsd:enumeration value="ThingB"/>
    </xsd:restriction>
  </xsd:simpleType>

  <xsd:complexType name="Object" >
    <xsd:sequence>
      <xsd:element name="objectType" type ="objectType" minOccurs="1" maxOccurs="1" />
      <xsd:element name ="thingA" type ="ThingA" minOccurs="0" maxOccurs="1"/>
      <xsd:element name ="thingB" type ="ThingB" minOccurs="0" maxOccurs="1"/>
      <xsd:element name ="status" type ="Status" minOccurs="0" maxOccurs="1"/>
    </xsd:sequence>

  </xsd:complexType >

  <xsd:element name="Object" type="Object" />
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:41:08.480

来发现我正在构建完全错误地解析 XML 的对象。似乎正确的方法如下。

```
std::istringstream iss (result); 
std::auto_ptr<XmlHelper::Object> otherObj(XmlHelper::Object_(iss)); 
```

我的 xsd 文件也没有在正确的目录中。

希望这对其他人有所帮助。

# javascript - 如何检查每个循环中的复选框

> ID：10669998
> 
> 赞同：1
> 
> 时间：2012-05-20T01:03:30.113
> 
> 标签：javascript, html, checkbox, jquery

考虑一个简单的 each 循环来检查选中的复选框：

```
$(':checkbox').filter(':checked').each(function(){
    var name = $(this).val();
}); 
```

此代码适用于在原始 HTML 代码中选中的复选框

```
<input type="checkbox" name="test" value="test" checked="checked" /> 
```

如何使此 jQuery 代码实时工作，`filter`每次选中新框或删除选中框时执行该过程。我想在复选框（选中或未选中）发生任何更改时运行每个循环以返回当前选中值的更新值。

**注意：**这是表达问题的简化代码。目的不是记录`name`，而是处理`each`循环中的检查值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:16:28.020

使用`click`：

```
$(':checkbox').click(function() {
    $(':checkbox').filter(':checked').each(function() {
        var name = this.value;
    });
}); 
```

**笔记：**

*   您可以避免多次查询 DOM。
*   `:checkbox`是一个非常慢的选择器，因为它不是一个 css 选择器而是一个 jQuery 扩展。
*   不要使用 jQuery 来获取`this`价值。

你可以像这样改进你的代码：

```
var $checkboxes = $('input[type="checkbox"]');
$checkboxes.filter(':checked').each(function() {
    var name = this.value;
}); 
```

**阅读资源：**

*   [的代价`$(this)`](https://stackoverflow.com/q/10433014/601179)
*   [为什么我们在 jQuery 中为变量添加 $ 前缀](https://stackoverflow.com/q/10204606/601179)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:09:35.867

您需要将循环绑定到复选框的[`change`事件](http://api.jquery.com/change/)。

```
$(':checkbox').change(function() {
    $(':checkbox').filter(':checked').each(function() {
        var name = $(this).val();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:29:24.237

由于您正在执行循环，我假设可以有许多复选框。我有点困惑为什么你`name`每次都会覆盖变量，最后只留下最后一个复选框的值。相反，我提供了一个数组，我们将所有检查的值推送到：

```
// Declare a names variable for storing values
var names;

// Any time a checkbox changes on our form
$("form").on("change", ":checkbox", function(e){
  // Empty the names array
  names = [];
  // Get all checked checkboxes from our form and add their value to our array
  $(":checkbox:checked", e.delegateTarget).each(function(){
    names.push( $(this).val() ); 
  });
}).find("input:checkbox").trigger("change");

// Method of revealing what we currently have checked
$("#reveal").on("click", function(){
  alert( names.join(", ") );
}); 
```

演示：http: [//jsbin.com/uyecux/2/edit](http://jsbin.com/uyecux/2/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T01:10:48.780

您需要创建一个事件处理程序。在 jQuery 中，这可能看起来像这样：

```
$(':checkbox').on('change', function() {
  // Execute your code here.
}); 
```

有关 jQuery中事件处理的更多详细信息，请参阅此处的 jQuery 文档：[http ://api.jquery.com/on/。](http://api.jquery.com/on/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T01:13:20.997

```
var $checkboxes = $('input[type=checkbox]')  
$checkboxes.click(function (){  
    $(':checkbox').filter(':checked').each(function(){
        var name = $(this).val();
    });
}); 
```

尝试使用上述功能。