# StackOverflow 问答 11933000-11933999

# php - 将选定的选项名称发送到注解（路由）

> ID：11933002
> 
> 赞同：0
> 
> 时间：2012-08-13T11:01:17.260
> 
> 标签：php, symfony

嘿，我正在尝试在我的路线（注释）中获取选定的选项值。我有包含索引视图的投资组合控制器。在索引视图中有一个只有一个选择下拉列表的表单。最初的 URL 看起来像

```
http://localhost/idp/web/app_dev.php/portfolio/ 
```

索引视图内的表单是

```
<form name="portfolios" action="{{ path('v2_pm_portfolio_switch') }}" method="post" >
    <select name="portfolio" style="width: 200px; height:25px;">
        <option selected="selected" value="default">Switch Your Portfolio</option>
        {% for portfolio in portfolios %}
            <option value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
        {% endfor %}
    </select>
   <input type="submit"class="portfolio_input button2 tooltip" value="Switch">
</form> 
```

当用户提交表单时，它会调用`switchportfolio`Action（在投资组合控制器内）我的开关投资组合 Action 是

```
/**
* Switch Portfolio action.
* @Route("/{user selected option name should come here}", name="v2_pm_portfolio_switch")
* @Secure(roles="ROLE_Normal_Registered_User")
* @Template("MunichInnovationGroupPatentBundle:Portfolio:index.html.twig")
*/
public function switchportfolioAction(Request $request){
    } 
```

**如何将选定的选项名称发送到 Symfony2 中的 URL？** 因此，如果用户选择 portofolio1，并提交表单，则 URL 变为：

```
http://localhost/idp/web/app_dev.php/portfolio/portfolio1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:06:38.617

HTML 表单的行为并非如此。您需要添加一些 javascript，在提交表单时运行，停止提交并根据所选选项更改当前位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:12:25.017

做这样的事情：

```
/**
 * Switch Portfolio action.
 * @Route("/v2_pm_portfolio_switch", name="v2_pm_portfolio_switch")
 * ...
 */
public function switchPortfolioAction(Request $request){
    //check that the form parameters are OK and get the portfolio id from the request
    return $this->redirect($this->generateUrl('show_portfolio',array('portfolio'=>$portfolioId)));                

}

/**
 * Show Portfolio action.
 * @Route("/portfolio/{portfolio)", name="show_portfolio")
 * ...
 */
public function showPortfolioAction($portfolio){
    //do whatever you need to show this portfolio
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:38:46.713

我认为这不是正确的做法。

我的意思是，如果您只想拥有一个带有修改 URL 的选择的表单，则不应使用 POST 作为表单提交方法。那将更适合 GET 方法。

在我看来，这不是 Symfony2 的问题。

您可以像@carlos-granados 所指的那样做，但不是创建转发，而是抓住提交事件，并使用 javascript 使用[此处描述](https://stackoverflow.com/questions/3669050/change-window-location-jquery)`window.location`的方式进行重定向

## 调整表格

您可以只删除`<form>` `action=""`属性并仅填充每个

```
<option value="{{ path('show_portfolio', { 'slug': portfolio.name }}">{{ portoflio.name }}</option> 
```

将生成正确的完全生成路径的节点。然后，确保您`show_portfolio`已`{slug}`准备好从数据库中获取正确的条目

## 调整控制器方法

```
$entry = $em->getRepository('Bundle:Portoflio')->findBy(array('slug'=>$request->get('slug'))); 
```

但这就是我最初的答案。您应该寻找[`@ParamConverter`](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html)并[查看类似于此处的内容](https://stackoverflow.com/questions/11619514/symfony-2-doctrine-2-find-a-record-based-on-a-date-field-using-a-datetime-val)

## 然后添加javascript

```
$('form').submit(function(event){ 
    event.preventDefault(); 
    window.location.href = $('form select').value(); 
}); 
```

# google-chrome-frame - Google Chrome Frame - 如何检测 GCF 何时安装失败（一般失败或被阻止）

> ID：11933015
> 
> 赞同：1
> 
> 时间：2012-08-13T11:02:02.030
> 
> 标签：google-chrome-frame

有什么方法可以检测 Google Chrome Frame 的安装是否失败或被阻止？我正在使用 CFInstall 脚本。这是我的实现：

```
CFInstall.check(
{
    preventPrompt: true,
    destination: window.location.toString(),

    onmissing: function ()
    {
        /* User clicks a button, iframe is shown... */
    }
}); 
```

...

```
<iframe src="https://www.google.com/chromeframe/eula.html?user=true"
        id="googlechromeframe"
        name="googlechromeframe"></iframe> 
```

请注意，我将用户指向用户特定的安装程序，它不需要管理员权限。安装仍然可以被阻止，但......

# .net - 只读 System.Xml.XmlElement

> ID：11933018
> 
> 赞同：0
> 
> 时间：2012-08-13T11:02:28.880
> 
> 标签：.net, xml

是否可以轻松返回 read-only `System.Xml.XmlElement`，使其属性和子项无法修改？

我建议应该使用[XmlNode.IsReadOnly 。](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.isreadonly.aspx)例如，

```
System.Xml.XmlElement xml = ...;
//this line does not compile because the IsReadOnly property is read only
xml.IsReadOnly = true; 
return xml; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:05:05.000

不，您必须将其包装在您自己的类/结构中以公开此行为。

# ios - UIPicker View 在操作表上没有完全响应触摸

> ID：11933020
> 
> 赞同：1
> 
> 时间：2012-08-13T11:02:36.183
> 
> 标签：ios, cocoa-touch, uipickerview

我`UIPicker`在操作表上添加了一个视图并调用了文本字段触摸。动作表出现选择器显示，但选择器没有正确响应触摸，只有选择器的选择栏响应触摸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:59:07.210

发生这种情况的一个原因是，如果您将其显示在选项卡栏的顶部并使用该选项

```
[selectYearOfBirth showInView:(UIView *)]

rather use the option 

[selectYearOfBirth showFromTabBar:(UITabBar *)] 
```

如果我是对的，这应该可以解决您的问题

# openerp - 进行自动备份的最佳方法是什么？

> ID：11933022
> 
> 赞同：5
> 
> 时间：2012-08-13T11:02:44.003
> 
> 标签：openerp

我正在使用 openERP v6.1，我想知道哪个是自动备份数据库的最佳选择（比如说每天备份）

管理数据库中 Web UI 中的备份选项非常好，可以一步还原和创建数据库。当然，这必须手动完成。有没有办法使这个过程自动化并获得相同类型的备份？（我不确定它导出为 *.dump 的文件类型）

我尝试做 pg_dump 但我无法从 Web UI 导入该文件（我尝试了原始 sql 文本和 gzip），当然必须是不同的格式。我在尝试使用 psql 将 pg_dump 备份导入到 postgres 时遇到一些问题。我可以恢复备份，但是当在网络上访问该站点时，我看到一个 openERP 为空

关于最佳实践的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:12:02.583

假设您可以访问运行 OpenERP 的服务器，我建议通过系统级 cron 任务使用 pg_dump（具有“自定义”格式）。

理由：

*   您可以更好地控制备份，包括必要时的持续归档和时间点恢复（参见[http://www.postgresql.org/docs/9.1/static/backup.html](http://www.postgresql.org/docs/9.1/static/backup.html)）

*   您不会依赖 OpenERP 的启动和运行来进行备份。*特别是，OpenERP 以在重新启动后不*运行其计划任务而闻名，直到第一次连接到服务器，这在某些情况下可能是一个真正的痛苦。

关于您的“尝试使用 psql 将 pg_dump 备份导入到 postgres 的问题。我可以恢复备份，但是当在 Web 中访问该站点时，我看到 openERP 是空的”，您必须告诉我们更多关于命令的信息你用过。在我的 OpenERP 数据库中使用 pg_dump / pg_restore 时我从来没有遇到过任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:33:58.137

您可以创建一个 python 脚本，它将您的数据库备份到特定的目录中。然后做一个 cron 作业，让你的 python 脚本每天执行。

您也可以从 apps.openerp.com 下载模块：http: [//apps.openerp.com/addon/1759](http://apps.openerp.com/addon/1759)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-21T01:54:08.730

这是一种解决方案，用于自动备份部署在运行 DSM5.2 的 Synology 机器上的一个感兴趣的 OpenERP7 数据库。该解决方案复制了使用 OpenERP 用户界面手动备份数据库的方式。为了实施该解决方案，需要使用 SSH 来访问 Synology NAS 文件系统。可以调整参数以满足最终用户的需求。

```
#!/bin/sh
# Synology OpenERP database backup utiliy. Specify variable information below.
# Run at /etc/crontab at the desired interval.
DIR=/volume1/OpenERP_Backup/
DATESTAMP=$(date +"%Y-%m-%d")                                           
DB_USER=OPENERP7                                                        
DATABASE=Demo

# create backup dir if it does not exist                        
mkdir -p ${DIR}

# remove all backups except the $KEEP latest                    
KEEP=7                                                          
BACKUPS=`find ${DIR} -name "${DATABASE}_*.dump" | wc -l | sed 's/\ //g'`
while [ $BACKUPS -ge $KEEP ]                                            
 do                                                                      
  ls -tr1 ${DIR}${DATABASE}_*.dump | head -n 1 | xargs rm -f            
  BACKUPS=`expr $BACKUPS - 1`                                         
done

# dump the database in a file                                       
FILENAME=${DIR}${DATABASE}_${DATESTAMP}.dump                        
/usr/syno/pgsql/bin/pg_dump --format=c --no-owner --username=${DB_USER} 
--file=${FILENAME} ${DATABASE}

#Development Notes
#Notes on how OpenERP handles backup & restore: 
#For backup
#pg_dump --format=c --no-owner --username=<> --host=<> --port=<> <dbname>
#For restore:
#pg_restore --no-owner --dbname=<> 

#Notes on how Synology DSM handles crontab jobs:
#Run script by assigning job to the crontab. Crontab on Synology NAS can
be found at:
#/etc/crontab 
#crontab entry would look something like the following:
#10  1  *   *   *   root    sh /volume1/OpenERP_Backup/backup.sh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T09:20:42.417

用于创建 postgresql 数据库的自动备份

1.  在home目录下创建一个文件夹

    ```
    mkdir database_backup 
    ```

2.新建文件

```
 nano pg-backup.sh 
```

在该文件中写入此代码

```
#enable this option, if you are creating hourly backup
if [ ! -d "$2/`date +%F-%H`" ]; then
mkdir $2/`date +%F-%H`
pg_dump $1 > $2/`date +%F-%H`/$1.sql
else
echo "Do not run this script manually !"
fi

#enable this option, if you are creating daily backup
if [ ! -d "$2/`date +%F`" ]; then
mkdir $2/`date +%F`
pg_dump $1 > $2/`date +%F`/$1.sql
else
echo "Do not run this script manually !"
fi 
```

3.  现在运行这个命令

    ```
    chmod 755 pg_backup.sh 
    ```

现在运行此命令进行每小时备份

```
 sudo crontab -e 
```

添加这一行

```
@hourly /home/openerp/database_backup/pg_backup.sh database_name /home/openerp/database_backup/ 
```

用于创建每日备份

您可以使用以下命令创建每日备份

```
 sudo crontab -e 
```

将以下行添加到该编辑过的文件并保存。

```
 @daily /home/openerp/database_backup/pg_backup.sh database_name /home/openerp/database_backup/ 
```

要执行此操作，您应该在 postgresql 数据库下创建 root 用户现在如果您想将数据库恢复到 openerp

使用 postgres 用户登录，然后运行此命令

```
psql -username <openerp_database_user> -dbname <New_database_name> -f <path_of_backuped_.sql_file> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-18T09:01:06.677

关于您“尝试使用 psql 将 pg_dump 备份导入到 postgres 的问题。我可以恢复备份，但是当访问 Web 站点时，我看到 openERP 为空”

您必须代表 openerp postgres 用户创建数据库并运行 psql。

# c - 在多维数组中混合聚合初始值设定项和标量初始值设定项

> ID：11933023
> 
> 赞同：1
> 
> 时间：2012-08-13T11:02:48.647
> 
> 标签：c, multidimensional-array

那可能吗？如果有人可以指导我在标准中提到的位置，我会很高兴。

对我来说，它按我期望的那样工作，使用`MinGW`. 但是，我想知道这是否是标准的。这是我测试的代码：

```
#include <stdio.h>

int main(void) {

    int me[3][2] = {{1, 2}, 3, 4, 5, 6};
    int x = 0;

    while(x<6) printf("%d_", ((int*)me)[x]), ++x;

    return 0;

} 
```

输出是：`1_2_3_4_5_6_`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:14:28.077

> 那可能吗？如果有人可以指导我在标准中提到的位置，我会很高兴。

我*认为*这是标准的，但我不会说我有明确的证据。

> 6.7.9
> 
> 如果聚合或联合包含属于聚合或联合的元素或成员，则这些规则递归地应用于子聚合或包含的联合。如果子聚合或包含联合的初始化程序**以左大括号开头，**则由该大括号及其匹配的右大括号括起来的初始化程序初始化子聚合或包含联合的元素或成员。**否则**，仅从列表中获取足够多的初始化器来考虑子聚合的元素或成员或包含的联合的第一个成员；剩下的任何初始化器都将用于初始化当前子聚合或包含的联合所属的聚合的下一个元素或成员。

后来，虽然不是专门针对数组，但它给出了一个*括号不一致的初始化*示例：

> ```
> struct { int a[3], b; } w[] = { { 1 }, 2 }; 
> ```
> 
> `w[0].a[0]`是 1 和`w[1].a[0]`2；所有其他元素都为零

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:09:45.747

至于初始化程序，是的，这是标准的。

至于印刷。嗯，这更复杂。内存保证是连续的，但编译器实际上可以在那条线上触发 UB（但我真的不认为你会找到一个这样做的）。

# java - 无法检测到 android 中的 SIM 更改

> ID：11933024
> 
> 赞同：0
> 
> 时间：2012-08-13T11:02:51.757
> 
> 标签：java, android, file

嗨朋友我正在使用以下代码来检测 SIM 卡更改但无法获得结果。请建议我在哪里犯了错误。

我正在使用 MainActivity.java 类来存储 SIM msisdn。像这样

```
public class MainActivity extends Activity {
String FILENAME = "old_file.txt";
int simstatus;
String msisdn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TelephonyManager tManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    simstatus = tManager.getSimState();
    if (simstatus != TelephonyManager.SIM_STATE_ABSENT) {
        System.out.println("--------SIM Present:" + simstatus);
        msisdn = tManager.getLine1Number();
        FileOutputStream fos;
        try {
            fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
            fos.write(msisdn.getBytes());
            System.out.println("---------Data written to files is:"
                    + msisdn);
            fos.close();
        } catch (Exception e) {
            e.printStackTrace();

        }
    }

} 
```

为了接收 Reboot 事件，我正在使用这样的 SIMTestReceiver 类。

```
public class SIMTestReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction()))  {
        Intent CompareSimServiceIntent = new Intent(context,TestDATAScreen.class);
        context.startService(CompareSimServiceIntent);
    }

} 
```

为了比较旧 SIM 和新 SIM，我正在使用这样的 TestDATAScreen 服务类。

```
public class TestDATAScreen extends Service {

String FILENAME = "old_file.txt";

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, final int startId) {
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    TelephonyManager tManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    try {
        FileInputStream fis = openFileInput(FILENAME);
        InputStreamReader in = new InputStreamReader(fis);
        BufferedReader br = new BufferedReader(in);
        String data = br.readLine();
        System.out.println("---Data Read From File is:" + data);
        String newsiminfo = tManager.getLine1Number();
        System.out.println("---New SIM no is:" + newsiminfo);
        if (data.equals(tManager.getLine1Number())) {
            System.out.println("------Old sim Present:");

            Toast.makeText(this, "Old SIM", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(this, "New SIM", Toast.LENGTH_LONG).show();
            SmsManager smsMngr = SmsManager.getDefault();
            String destinationaddress = "8689908070";
            String scAddress = null;
            String text = "New Sim Is Inserted In Your Device";
            PendingIntent sentIntent = null;
            PendingIntent deliveryIntent = null;
            smsMngr.sendTextMessage(destinationaddress, scAddress, text,
                    sentIntent, deliveryIntent);
            System.out.println("-----SMS Send");
        }

    } catch (Exception e) {

    }
    return startId;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:08:01.423

您首先保存 sim，然后将保存的 sim 与当前 sim 进行比较。您永远不会加载旧 sim 的序列号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:00:01.677

我找到了解决方案。`tManager.getSimSerialNumber()`实际上使用解决我的问题比较序列号。`tManager.getLine1Number()`AS由于电话号码并非物理存储在所有 SIM 卡上，或从网络广播到电话，因此无法保证此问题的结果。

# c - C中的半浮点转换算法？

> ID：11933027
> 
> 赞同：1
> 
> 时间：2012-08-13T11:03:02.863
> 
> 标签：c

> **可能重复：**
> [32 位到 16 位浮点转换](https://stackoverflow.com/questions/1659440/32-bit-to-16-bit-floating-point-conversion)

如何在 C 中转换 32 位浮点数和 16 位半精度浮点数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:09:48.897

我建议你检查一下这个[half_floats](http://www.mathworks.com/matlabcentral/fileexchange/23173 "关联")

您还应该考虑存储这些半浮点数的方式（C 中没有这种类型）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:12:52.500

由于 C 通常没有内置的 16 位浮点类型，我希望您要么必须

1.  使用一些超级特定的平台“魔法”，如可用的专用 CPU 指令。这当然不是 C 解决方案，它可能是 C 源代码中的内联汇编。不便携。
2.  手动将所需的位提取到一个`unsigned short`. 这将是可移植的，但可能会慢很多。

这两个都假设您想要做的只是构建值的表示，当然您不能使用 C 的运算符进行算术运算。

# jquery - IE 不从 Ajax 响应中检索 Flash Object src

> ID：11933033
> 
> 赞同：0
> 
> 时间：2012-08-13T11:03:30.893
> 
> 标签：jquery, ajax, flash, internet-explorer, src

我正在尝试读取我在 url 的响应中获得的 flash 文件的 src 属性，并通过 swfobject 创建一个新文件。但是当我阅读嵌入标签的 src 时，它返回“未定义”。我的代码如下。

我正在发帖的页面，里面只有 flash 文件。

## 回复如下：

## AJAX 响应

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"     codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" width="930" height="630" title="Campaign">
  <param name="movie" value="final5.swf" />
  <param name="quality" value="high" />
  <embed src="final5.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="930" height="630"></embed>
</object> 
```

* * *

## 脚本

```
$.ajax({
 url: flashUrl,
 type: "POST",
 dataType:"html",
 success: function(data, status, xhr) {
   var swfUrl = flashUrl.substr(0, flashUrl.lastIndexOf('/')) + "/" + $(data).find('embed').attr('src'); 
   $('.content').html('<div id="mySwf"></div>');
   swfobject.embedSWF(swfUrl, "mySwf", "200", "200", '9.0.0', "/resources/expressInstall.swf", flashvars, attributes, params);

  }
}); 
```

* * *

## * *** *更新（找到问题区域但未找到解决方案）

我有点知道问题是什么，但我不知道它发生了。当我在 IE 中运行带有 flash 文件的页面时。它以一种奇怪的方式呈现它

```
<object width="930" height="630" title="Campaign" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codeBase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0" altHtml="     

 <embed src="skf-final5.swf" type="application/x-shockwave-flash" width="930" height="630" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" >    </embed>
     "> 
```

它向对象添加了一些*altHTML*属性，并且整个 embed 标记都进入其中，从而搞砸了整个东西。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:41:51.657

好吧，找到我们在标签中得到“altHTML”的原因。但找到了解决这个问题的方法。

* * *

## 这是我的解决方案。（请提出是否有任何改进）

```
$.ajax({
url: flashUrl,
type: "POST",
dataType:"html",
success: function(data, status, xhr) {
    $('.layer-view .content').html('<div id="kcSwf"></div>');
                        // Building path for flash url
    var swfUrl = flashUrl.substr(0, flashUrl.lastIndexOf('/')) + "/" + $(data).findAndSelf('param[name="movie"]').attr('value'); 
    var swfWidth = $(data).findAndSelf('object').attr('width'); 
    var swfHeight = $(data).findAndSelf('object').attr('height'); 
    var swfBgColor = $(data).findAndSelf('param[name="bgcolor"]').attr('value');

    if(swfBgColor=="undefined") swfBgColor="#ffffff";

        var layerviewWidth = parseInt(swfWidth) + 20; 
        $('.layer-view .view').css('width', layerviewWidth);

        var flashvars = false;
        var params = {salign:'t', bgcolor:swfBgColor};
        var attributes = {};
        swfobject.embedSWF(swfUrl, "kcSwf", swfWidth, swfHeight, flashVersion, "/resources/expressInstall.swf", flashvars, params, attributes);
    }
}); 
```

注意：仅供参考.... swfobject 中的属性顺序也很重要。参数必须在属性之前，否则它会在 IE 中搞砸一些东西。:)

# java - 收藏的并发更新

> ID：11933039
> 
> 赞同：0
> 
> 时间：2012-08-13T11:04:10.307
> 
> 标签：java, collections, arraylist

我正在开发一个系统，它`ArrayList`可以在多个地方访问（插入、删除和更新值）。由于`ArrayList`在我运行程序时访问了多个地方，它给出了并发更新错误。

而不是`ArrayList`我可以使用`Vector`因为`Vector`是同步的。但是如果我使用`Vector`它会导致系统性能下降吗？给我想法。我该如何解决这个问题？

这是我得到的例外的一部分：

```
].[localhost].[/uckt].[Faces Servlet]] (http-127.0.0.1-8080-144) 
Servlet.service() for servlet Faces Servlet threw exception: java.util.ConcurrentModificationException
at java.util.ArrayList$Itr.checkForComodification(Unknown Source) [:1.7.0_02]
at java.util.ArrayList$Itr.next(Unknown Source) [:1.7.0_02] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:35:53.793

还有一件事：您的 ConcurrentModificationException 可能不会从通过两个线程的实际并发修改中产生。还有一个可能的原因：

在遍历 ArrayList 时，您可能会删除一个元素。如果你试试这个

```
Object o = iterator.next()
if(someCondition)
    arrayList.remove(o) 
```

在单个线程中，您将获得 ConcurrentModificationException。在这种情况下，您将不得不使用 ListIterator 和它的 remove 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:06:44.827

您是否考虑过[CopyOnWriteArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)？

> ArrayList 的线程安全变体，其中所有可变操作（添加、设置等）都是通过制作底层数组的新副本来实现的。

*与以往一样，在您知道*这是一个问题之前，我不会太担心效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:10:58.417

请参阅[Collections#synchronizedCollection(Collection)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedCollection%28java.util.Collection%29)。这将返回一个同步`ArrayList`的，您可以使用它来安全地添加/删除/更新列表中的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:15:13.360

您还可以在每次访问时同步您的 ArrayList：

```
synchronize(myList)
{
  myList.add(object);
} 
```

# javascript - 使用 phantomjs 在本地文件上使用 extjs 代理进行 ajax 调用

> ID：11933044
> 
> 赞同：3
> 
> 时间：2012-08-13T11:04:23.307
> 
> 标签：javascript, unit-testing, extjs, jasmine, phantomjs

我有一个基本的 EXT JS 存储，它使用代理访问本地 json 文件。

例如

```
...
proxy: {
    type: 'ajax',
    api: {
        read: 'data/mydata.json'
    },
    reader: {
        type: 'json',
        root: 'datas',
        successProperty: 'success'
    }
} 
... 
```

我想使用 Maven、Jasmine 和 PhantomJS 使用 Atlassian Bamboo（我的 CI 服务器）构建和测试我的项目。

当我在本地执行 PhantomJS 时，如下所示：

```
$ phantomjs "c:\phantomjs-1.6.1\examples\run-jasmine.js" run-tests.html 
```

我得到以下输出：

```
'waitFor()' finished in 422ms.
 4 specs, 2 failures in 0.075s 
```

这是因为 PhantomJS 无法使用EXT JS 代理的*file://协议加载本地文件。*

我正在关注[这个](http://docs.sencha.com/ext-js/4-0/#!/guide/testing)示例，并且想知道是否可以模拟我的代理响应，以便我可以在本地（在我的 Bamboo 服务器上）使用 PhantomJS 和测试 html 文件，而不必将项目托管在像 Apache 这样的 Web 服务器中（我必须用 Maven 管理一个外部依赖项）。

如果没有，是否有任何其他机制（内置于 Jasmine、PhantomJS 或其他），我可以用来实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T05:14:05.817

从文件系统加载时，实际上*可以*使用 PhantomJS 执行 XHR！

直接来自[PhantomJs wiki](http://code.google.com/p/phantomjs/wiki/Interface)：

```
--web-security=[yes|no] disables web security and allows cross-domain XHR (default is yes) 
```

另请参阅[PhantomJs 的此问题报告，](http://code.google.com/p/phantomjs/issues/detail?id=291)它可能会对该主题有所了解。

Sencha 的 'sencha create jsb' 命令使用 PhantomJs（Ext.Loader 使用 XHR），它支持从文件系统加载。

```
name: 'app-entry',
alias: 'a',
description: 'The file or URL path to your application\'s HTML entry point', 
```

结帐`[senchasdktools]/compat/command/src/modules/GenerateJSB.js`和`[senchasdktools]/compat/command/scripts/phantomjs-jsb.js`.

不过，我没有看到与上述`web-security`开关相关的任何内容。也许他们使用自定义 phantomJs 构建。

**更新** 此代码片段允许向文件系统发出 XHR 请求。用最新版本的 phantomJs (1.6.1/Windows) 测试：

```
var page = new WebPage();
page.settings.localToRemoteUrlAccessEnabled = true; 
```

**UPDATE2** 这是一个工作示例。

将所有内容放在同一个文件夹中，添加一个`test.txt`包含一些内容的文件，然后运行

```
phantomjs script.js test.html 
```

phantomjs 脚本（script.js）：

```
var fs = require('fs');

var appLocation = phantom.args[0];

var page = new WebPage();

page.settings.localToRemoteUrlAccessEnabled = true;
page.settings.ignoreSslErrors = true;

page.onConsoleMessage = function(message, url, lineNumber) {
    console.log((url ? url + " " : "") + (lineNumber ? lineNumber + ": " : "") + message);
};

page.onError = function (msg, trace) {
    console.log(msg);
    trace.forEach(function(item) {
        console.log('  ', item.file, ':', item.line);
    });
    phantom.exit(1);
};

if (!/^file:\/\/|http(s?):\/\//.test(appLocation)) {
    appLocation = 'file:///' + fs.absolute(appLocation).replace(/\\/g, '/');
}

page.open(appLocation, function(status) {
    if (status !== 'success') {
        error("Failed opening: '" + appLocation + "'. Please verify that the URI is valid");
    }

    page.evaluate(function() {
        window.onerror = function(message, url, lineNumber) {
            console.log((url ? url + " " : "") + (lineNumber ? lineNumber + ": " : "") + message);
        };

    });

    timer = setInterval(function() {
        console.log('Timeout!');
        phantom.exit(1);
    }, 2000);
}); 
```

html文件（test.html）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html class="x-border-box x-strict">
<head>
    <title>Test</title>
    <script type="text/javascript">
    var xhr = new XMLHttpRequest();

    try {
        xhr.open('GET', 'test.txt', false);
        xhr.send(null);
    } catch (e) {
        console.log('cross origin?');
    }

    console.log('status', xhr.status);
    console.log('response', xhr.responseText);

    </script>
</head>
<body class="x-body">
</body>
</html> 
```

**Chrome 和 --disable-web-security 和 ExtJs**

我实际上是`--disable-web-security`在开发过程中使用 Google Chrome 的启动参数来从文件系统运行我的 webapp，并且它在那里工作（启动 Chrome 时必须运行其他 Chrome 进程）。Chrome 将显示一条警告消息，指出您正在使用不受支持的选项（顶部的黄色通知栏）。

然而，为了让 Ext 在这样的设置中工作，我需要对 Ext.Connection 附加一个补丁来解决两个问题： (1) xhr.status 总是`0`在加载文件系统资源时出现。分机不将此状态代码视为`successful`. 当 Ext 在 PhantomJs 中运行时，有专门的代码来处理这个问题——这就是它应该在那里工作的原因。

(2) 当 URL 包含查询字符串时，Chrome 加载文件系统资源失败。在文件系统模式下，我覆盖 Connection 类以去除所有 url 参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T02:18:25.900

即浏览器和 WebKit，限制（安全），除非您运行自己的网络服务器，否则无法绕过。nodejs 有很简单的方法。在本地机器的某个端口上运行服务器大约需要几行代码。

只需如下创建 server.js 并`node server.js`在运行 phantomjs 之前运行它

```
var http = require('http');
var fs=require('fs');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.end(fs.readFileSync(__dirname + req.url, 'utf8')); 
}).listen(3000, '127.0.0.1');
console.log('Server running at http://127.0.0.1:3000/'); 
```

将此文件保存在项目根目录或更新行中

```
res.end(fs.readFileSync(__dirname + req.url, 'utf8')); 
```

__dirname 是 server.js 所在文件夹的路径，由节点进程设置....

现在您可以保留 data/*.json 甚至在节点中创建模拟数据；）

# ===更新====

在阅读了 PhantomJS 文档后，我发现你可以在没有 nodejs 的情况下做同样的事情。显然，PhanotmJS 包含所有上述模块

考虑检查：

*   [http://code.google.com/p/phantomjs/wiki/Interface#WebServer_Module](http://code.google.com/p/phantomjs/wiki/Interface#WebServer_Module)
*   [http://code.google.com/p/phantomjs/wiki/Interface#Filesystem_Module](http://code.google.com/p/phantomjs/wiki/Interface#Filesystem_Module)

你会很高兴去的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-22T17:00:56.333

I wrote 2 repos for dealing with ExtJS 4 for unit testing using Karma test runner/ Jasmine 1.x and 2.0 versions and dealing with Async Issues: here they are: [https://github.com/cgauthier/karma_jasmine_1_extjs4](https://github.com/cgauthier/karma_jasmine_1_extjs4) and [https://github.com/cgauthier/karma_jasmine_2_extjs4](https://github.com/cgauthier/karma_jasmine_2_extjs4).

# javascript - 主干视图问题

> ID：11933045
> 
> 赞同：0
> 
> 时间：2012-08-13T11:04:27.537
> 
> 标签：javascript, jquery, backbone.js

我正在视图中创建一个 blockView 实例并将模型作为参数传递。但是当我运行它时，它给了我错误“TypeError：无法将未定义转换为对象”。我试图追踪这个错误，但我无法得到。任何人请。请在下面找到代码

```
 var DCSSPACE = DCSSPACE || {};
    $(document).ready(function(){
        WorkSpace = new draw2d.Workflow( "canvasdiv" );
        collection = new DCSSPACE.collection.collection();
        view = new DCSSPACE.view.view({WorkSpace : WorkSpace, collection : collection});

    });

    DCSSPACE.view = function(){
        var uniqueid = 1, blockCounter = 0;
    var view = Backbone.View.extend({
        el : $("#canvasdiv"),
        views : {},

        initialize : function() {
            console.log("View");

            this.collection.bind("add", function(m, temp, data){
                console.log(data.evt);
//Here i am getting error "TypeError: can't convert undefined to object"                
this.views[m.cid] = new blockView({data : data, model : m, id : "view_" + m.cid});
                },this);

            this.collection.bind("remove", function(m){
                this.views[m.cid].remove();
                delete this.views[m.cid];
            }, this);
            this.render(WorkSpace);
        },
        render : function(WorkSpace) {
            $("#sidediv").accordion();
            this.disableSelection(document.body);
            var menu = new draw2d.FlowMenu(WorkSpace);
            WorkSpace.addSelectionListener(menu);
            var toolwindow = new draw2d.Toolbox();
            WorkSpace.setToolWindow(toolwindow);
            toolwindow.setPosition(0,0);
            $(".btn").draggable({
                helper : "clone",
                stop : function(event, ui) {
                    var data = {
                        id : this.id,
                        evt : event.originalEvent,
                    };
                    if(event.originalEvent.pageX >= 220) {
                        var m = new DCSSPACE.model.FunctionBlockModel();
                        collection.add(m, data);
                    }
                }
            });

            return this;
        },
        /* Function for deselect body contents */
        disableSelection : function(target) {
            if( typeof target.onselectstart != "undefined")//IE
                target.onselectstart = function() {
                    return false;
                }
            else if( typeof target.style.MozUserSelect != "undefined")//Firefox
                target.style.MozUserSelect = "none"
            else//All other
                target.onmousedown = function() {
                    return false
                }
            target.style.cursor = "default"
        }
    });

    var blockView = Backbone.View.extend({
            initialize : function(formalObj){
                console.log("block view");
                $("#canvasdiv").mousemove(this, this.mousemove).mouseup(this, this.mouseup);
                this.model.set({id : formalObj.data.id});
                console.log(JSON.stringify(collection));
                var nodeObj = this.block(formalObj.data);

            },

            block : function(data){
                var Obj = new draw2d.node();
                var self = this;
                Obj.onDoubleClick = function(){
                    self.informationBlock(Obj.getnodeName());
                };
                    Obj.setTitle(collection.get(data.id).get("id")+" "+ (uniqueid++));
                    Obj.setFooter("#" + (++blockCounter));
                    WorkSpace.addFigure(Obj, data.evt.pageX - 205, data.evt.pageY);

    });
    return{
        view : view,
        blockView : blockView
    }

    }(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:25:07.743

尝试像这样实例化您的视图：

```
view = new DCSSPACE.view.view({model : WorkSpace, collection : collection}); 
```

`WorkSpace`并在您的 View 实现中替换`this.model`.

*个人说明*：我认为您应该努力清理和组织您的代码 :)
*个人说明2*：当您收到 JS 错误时，通常会有更多信息有助于找到问题，例如，确切的代码行。

# redirect - nginx通配符子域ssl重写

> ID：11933048
> 
> 赞同：1
> 
> 时间：2012-08-13T11:04:45.637
> 
> 标签：redirect, nginx, ssl-certificate, wildcard-subdomain

有一个通配符 dns 子域记录。使用仅域验证 SSL 证书。需要这样设置nginx重写规则：

```
http://site.com   => https://site.com

http://*.site.com => http://*.site.com 
```

我想是这样的

```
server {
    listen  80;
    server_name site.com *.site.com;
    if ($host ~* "^([^.]+(\.[^.]+)*)\.site.com$"){
        set $subd $1;
        rewrite ^(.*)$ http://$subd.site.com$1 permanent;
        break;
    }
    if ($host ~* "^site.com$"){
        rewrite ^(.*)$ https://site.com$1 permanent;
        break;
    }
    #rewrite    ^ https://$server_name$request_uri? permanent;
    charset utf-8;
}

server {

    listen   443;

    server_name  site.com;
    ssl On;
    ssl_certificate     /root/site.com.crt;
    ssl_certificate_key /root/site.com.key;

    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:8888;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  /var/www/site$fastcgi_script_name;
        fastcgi_param  QUERY_STRING     $args;
        include fastcgi_params;
    }

    location / {
        root   /var/www/site;
        index  index.php index.html;
        if ($host !~ ^(site.com)$ ) {
            return 444;
        }
        try_files $uri $uri/ /index.php?$args;
    }
} 
```

它无限循环。什么是让这个工作的正确方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:12:45.380

您应该将服务器块重写为两部分。第一部分仅适用于域“site.com”并重定向到 https 第二部分，对于所有其他域，“*.site.com”

```
server {
    listen  80;
    server_name site.com;
    rewrite ^(.*)$ https://site.com$1 permanent;
}

server {
    listen  80;
    server_name *.site.com;
    #etc... rewrites not necessary
} 
```

因此，您的 nginx.conf 将是：

```
服务器 {
    听 80；
    server_name site.com;
    重写 ^(.*)$ https://site.com$1 永久；
}
服务器 {
    听 80；
    server_name *.site.com;
    字符集 utf-8；
    ＃ ETC ...
}

服务器 {

    听443；

    server_name site.com;
    ssl开启；
    ssl_certificate /root/site.com.crt；
    ssl_certificate_key /root/site.com.key；

    位置 ~ \.php$ {
        fastcgi_pass 127.0.0.1:8888；
        fastcgi_index index.php；
        fastcgi_param SCRIPT_FILENAME /var/www/site$fastcgi_script_name;
        fastcgi_param QUERY_STRING $args;
        包括 fastcgi_params；
    }

    地点 / {
        根 /var/www/site;
        索引 index.php 索引.html；
        如果 ($host !~ ^(site.com)$) {
            返回 444；
        }
        try_files $uri $uri/ /index.php?$args;
    }
}

```

# c# - C# 发送邮件失败

> ID：11933050
> 
> 赞同：1
> 
> 时间：2012-08-13T11:04:49.973
> 
> 标签：c#

我创建了一个应用程序，因为我可以选择发送邮件。直到昨天它都正常工作。**但是今天我在发送诸如“发送邮件失败”**之类的邮件时遇到错误。为此，我在下面给出了我的代码，请帮助我更正它。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            if (TextBox1.Text == "")
            {

                string alertmessage = "";
                alertmessage = "Email ID. cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox1.Focus();
            }
            else if (TextBox2.Text == "")
            {

                string alertmessage = "";
                alertmessage = "CC To cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox2.Focus();
            }
            else if (TextBox3.Text == "")
            {

                string alertmessage = "";
                alertmessage = "Subject cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox3.Focus();
            }
            else if (TextBox4.Text == "")
            {

                string alertmessage = "";
                alertmessage = "Message Body cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox4.Focus();
            }
            //else if (upSignature.FileName == "")
            //{
            //    ctr = 1;
            //    string alertmessage = "";
            //    alertmessage = "Attachment  Missing...";
            //    this.CreateMessageAlert(this, alertmessage, "alertKey");
            //    upSignature.Focus();
            //}

            else
            {

                string photo = "Enquiry" + Session["MRNO"].ToString() + FileUpload1.FileName;
                string strpath = Request.MapPath("~/");
                FileUpload1.SaveAs(strpath + "/Enquiry/" + photo);

                try
                {
                    MailMessage mail = new MailMessage();
                    mail.To.Add(new MailAddress(TextBox1.Text.Trim()));
                    mail.From = new MailAddress("purchase@oeg.co.in");
                    mail.Subject = "Enquiry for MRNO " + " " + " " + Session["MRNO"].ToString() + " " + " " + "Reg.";
                    mail.CC.Add(TextBox2.Text.Trim());
                    mail.Body = TextBox4.Text.Trim();

                    mail.Attachments.Add(new Attachment(FileUpload1.PostedFile.InputStream, FileUpload1.FileName));
                    mail.Attachments.Add(new Attachment(FileUpload2.PostedFile.InputStream, FileUpload2.FileName));
                    //Attachment attach = new Attachment(strpath + "/Enquiry/" + photo);
                    //mail.Attachments.Add(attach);

                    SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);

                    smtp.EnableSsl = true;

                    smtp.UseDefaultCredentials = false;
                    smtp.Credentials = new NetworkCredential("purchase@oeg.co.in", "xxxxx");
                    //smtp.Credentials = new NetworkCredential("purchaseoeg", "xxxxx");
                    smtp.Send(mail);

                    string alertmessage = "";
                    alertmessage = "Mail Has Been Sent";
                    this.CreateMessageAlert(this, alertmessage, "alertKey");

                    //   Page.RegisterStartupScript("close", "<script language=javascript>self.close();</script>");

                }
                catch (Exception ex)
                {
                    Response.Write(ex.Message);
                }
            }
        }
        catch (Exception ex1)
        {
            Response.Write(ex1.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:47:19.037

如果它以前可以工作，而现在不行，那么它很可能是 SMTP 服务器。

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="SpecifiedPickupDirectory">
      <specifiedPickupDirectory pickupDirectoryLocation="C:\TestMailMessages\" />
    </smtp>
  </mailSettings>
</system.net> 
```

将上述代码放在您的 App.config 或 Web.config 中。当您发送消息时（通过 var smtpClient = new SmtpClient();），它现在将作为文件存储在“ [pickingDirectoryLocation](http://weblogs.asp.net/gunnarpeipman/archive/2010/05/27/asp-net-using-pickup-directory-for-outgoing-e-mails.aspx) ”目录中。

如果消息可以到达那里，*那么您的代码就可以了*

然后您可能会继续测试您的 smtp 设置/测试服务器。有很多方法可以做到这一点，包括使用 Telnet。

如果问题是间歇性的，可能会向 SMTP 发送添加重试逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:10:58.067

```
public string btnSendmail( )
{
    try
    {
        //Code for send Email
        string msg = txtEmail.Text;
        MailMessage sendMailforSA = new MailMessage();
        SmtpClient smtpforSA = new SmtpClient();
        string subjectforSA = null;
        subjectforSA = "Thanks for apply";
        System.Net.NetworkCredential credforSA = new System.Net.NetworkCredential("yourGmailID@gmail.com", "password");
        sendMailforSA.To.Add("ToEmailID");

        sendMailforSA.From = new MailAddress("yourGmailID@gmail.com");
        sendMailforSA.Subject = subjectforSA.ToString();
        sendMailforSA.Body = "hiii This is Test Message";
        sendMailforSA.IsBodyHtml = false;
        smtpforSA.Host = "smtp.gmail.com";
        smtpforSA.Port = 587;
        smtpforSA.EnableSsl = true;
        smtpforSA.UseDefaultCredentials = false;
        smtpforSA.Credentials = credforSA;
        smtpforSA.Send(sendMailforSA);
        return "Email successfully sent.";
    }
    catch (Exception ex)
    {
        return  "Send Email Failed." + ex.Message;
    }
} 
```

还要写在 web.config 文件中：

```
<system.net>
    <mailSettings>
        <smtp from="yourGmailID@gmail.com">
            <network host="smtp.gmail.com" port="587" userName="yourGmailID@gmail.com"    password="password" defaultCredentials="false"/>
        </smtp>
    </mailSettings>
</system.net> 
```

# android - 精灵运动 - 限制在特定区域？

> ID：11933054
> 
> 赞同：1
> 
> 时间：2012-08-13T11:05:31.033
> 
> 标签：android, andengine

我有一个使用路径修改器移动的动画精灵，我想限制该精灵不应该在特定的像素颜色上移动。所以我尝试使用获取像素和颜色，但我无法找到该颜色的颜色代码。谁能帮我在andengine 2.0中做到这一点？

```
 int width = src.getWidth();
      int height = src.getHeight();
      // create output bitmap
      Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
      // color information
      int A, R, G, B;
      int pixel;
      int px;
      px = src.getPixel(CAMERA_WIDTH / 2, CAMERA_HEIGHT / 2);
      R = Color.red(px);
      G = Color.green(px);
      B = Color.blue(px);
      int colblck = Color.rgb(R, G, B);
      Log.e("Tag","Color code for center " + colblck);
      // scan through all pixels
      for (int x = 0; x < width; ++x) {
       for (int y = 0; y < height; ++y) {
        // get pixel color
        pixel = src.getPixel(x, y);

        // get color on each channel
        // A = Color.alpha(pixel);
        R = Color.red(pixel);
        G = Color.green(pixel);
        B = Color.blue(pixel);

        String cd = "" + 00 + 00 + 00;

        bmOut.setPixel(x, y, Color.rgb(255, 0, 0)); 
```

# ios - UIDocument openWithCompletionHandler：崩溃

> ID：11933055
> 
> 赞同：3
> 
> 时间：2012-08-13T11:05:31.677
> 
> 标签：ios, core-data, crash, uidocument

我在我的项目中使用 Core Data 并在以下代码部分中遇到了罕见的崩溃

```
 -(void) useDocument{
     AFFormsCoreDataEngine* engine = [AFFormsCoreDataEngine sharedInstance];
     if (![[NSFileManager defaultManager] fileExistsAtPath: [engine.formsDatabase.fileURL path]])
     {
         [engine.formsDatabase saveToURL: engine.formsDatabase.fileURL forSaveOperation: UIDocumentSaveForCreating completionHandler: ^(BOOL success){
            // setup
         }];
    }
    else if (engine.formsDatabase.documentState == UIDocumentStateClosed)
    {
        [engine.formsDatabase openWithCompletionHandler: ^(BOOL success){
             // setup
        }];
    }
    else if (engine.formsDatabase.documentState == UIDocumentStateNormal)
    {
         // setup
    }
} 
```

这是崩溃日志所说的：

```
Last Exception Backtrace:
0   CoreFoundation                  0x371fd88f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x31272259 objc_exception_throw + 33
2   CoreFoundation                  0x371fd789 +[NSException raise:format:] + 1
3   Foundation                      0x32ce83a3 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 91
4   UIKit                           0x306b3149 -[UIDocument openWithCompletionHandler:] + 173
5   EETECH                          0x00014d23 -[AFFormListViewController useDocument] (AFFormListViewController.m:150) 
```

谁能帮我解决这个问题？它很少发生，但仍然很不愉快

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T19:15:05.590

如果您的应用程序尝试连续两次调用您的 useDocument 方法，则会发生错误。

因为 openWithCompletionHandler: 是异步打开文档的，所以当再次调用该方法时，文档可能还在打开中。

如果发生这种情况，您的应用程序最终会尝试打开文档两次（因为文档状态将保持 UIDocumentStateClosed 直到完成），这会导致引发异常。

如果您有异常断点，您可能会在控制台中看到类似这样的内容：

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'attempt to open or a revert document that already has an open or revert operation in flight: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:11:18.250

好吧，UIDocument 代码中的断言失败了。您可能应该提供更多代码，因为您显然设置不正确。

然后断言抛出异常。如果您在此方法中@catch 异常，则可以记录该异常。

或者，您可以将自己的 NSAssertionHandler 分配给线程，并直接查看断言。

# groovy - 在 jboss 上部署 groovy 代码

> ID：11933057
> 
> 赞同：0
> 
> 时间：2012-08-13T11:05:35.507
> 
> 标签：groovy, jboss

请问有没有人有在JBoss上部署groovy代码的经验？我想做那件事，但我不知道如何开始。我正在使用 JBoss 4.2.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:58:39.980

大多数 Web 框架 ( [Grails](http://grails.org) ) 可以打包一个 .war 文件，您可以将其部署到 Web 服务器。您还可以将 .groovy 文件编译为将在服务器上运行的 .class 文件，但您需要使用构建工具（如[Ant](http://ant.apache.org/)或[Gradle](http://gradle.org/)）将这些文件与 Java 源代码一起构建。一旦你的 .groovy 源被翻译成字节码，如果它们是用 Java 或 Groovy 编写的，应该不会有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:31:57.890

所以.. 我在 NetBeans 中有 servlet。然后我发现了这个话题：

[从 Java 调用 Groovy 函数](https://stackoverflow.com/questions/3989592/calling-a-groovy-function-from-java)

所以我在 index.jsp 中使用 scriptlet 来调用 Runner.java（Runner.java 在名为 groovy 的包中）。

```
<body>
    <%
    out.println("test");        
    groovy.Runner runner = new groovy.Runner();        
    runner.main();
    %>         
</body> 
```

现在我必须在jboss上检查它。问候。

//它正在工作。

# scala - Scala，一个选项的折叠选项

> ID：11933058
> 
> 赞同：3
> 
> 时间：2012-08-13T11:05:37.337
> 
> 标签：scala, scala-option

我想知道是否有折叠选项地图的短手。例如

```
def divideByThree(x:Int) = if (x == 0) None else Some(x/3)

val result = Some(6) map (divideByThree(_))
resut:Option[Option[Int]] = Some(Some(2)) 
```

为了解决这个问题，我做

```
val result = Some(6) match {
   case Some(i) => divideByThree(i)
   case None    => None
} 
```

这似乎有点沉重。我可以在 Option 上创建一个隐式函数说 mapOption 来处理这个问题，但我想知道是否有更好的方法我没有想到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T11:09:48.443

你可以`flatMap`像这样使用：

```
def divideByThree(x:Int) = if (x == 0) None else Some(x/3)

val opx = None // Or: Some(10)
val mapped = opx.flatMap(divideByThree)

println(mapped) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:11:44.137

怎么样`flatMap()`？它会执行`map`然后`flatten`

```
val result = Some(6) flatMap (divideByThree(_))
result: Option[Int] = Some(2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T18:35:39.977

Scala 有一种单子语法：*用于理解*

```
val div = ( case x if x%3 == 0 => x/3} : PartialFunction[Int,Int] ).lift
val exp = (l : Option[Int]) => for {
             x <- l
             r <- div(x)
           } yield r 
```

测试它：

```
scala> exp(Some(3))
res1: Option[Int] = Some(1)

scala> exp(Some(4))
res2: Option[Int] = None

scala> exp(None)
res3: Option[Int] = None 
```

# c# - exec master..xp_cmdshell bcp select

> ID：11933063
> 
> 赞同：0
> 
> 时间：2012-08-13T11:05:49.630
> 
> 标签：c#, sql-server, database, bcp

下面，我从 c#.net windows 窗体调用一个存储过程。

存储过程包含以下内容：

```
 exec master..xp_cmdshell ''bcp "select ''''Column1'''',''''Column2'''',''''Column3'''',''''Column4'''',''''Column4'''',''''Column5'''',''''Column6'''',''''Column7'''',''''Column8''''" queryout "' + @Parent_Folder + @Transformed_Tbl + '.csv" -c -t, -T -Slocalhost'''

    exec master..xp_cmdshell ''bcp Databasename..' + @database table+ ' out "' + @serverfolder+ 'temp_' + @user specified file name + '.csv" -c -t, -T -Slocalhost'''

    exec master..xp_cmdshell ''copy /b "' + @serverfolder+ @user specified file name + '.csv" + "' + @serverfolder+ 'temp_' + @user specified file name + '.csv" "' + @serverfolder + @user specified file name+ '.csv"''' 
```

它运行完美，

但有时用户想取消这个过程。当用户点击取消按钮时，如何取消这个正在运行的 bcp 进程。这是我在本地系统中的应用程序，我正在从另一个 sql server 系统访问数据库，然后将文件保存在同一个 sql server 系统中。

请给我一个关于这个问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:35:25.100

使用“xp_cmdshell”并不安全，因为它允许您执行所有操作系统级别的操作，例如运行外部可执行文件。建议不要使用“xp_cmdshell”。

你应该寻找替换 xp_cmdshell-

[http://www.mssqltips.com/sqlservertip/2014/replace-xpcmdshell-command-line-use-with-sql-server-agent/](http://www.mssqltips.com/sqlservertip/2014/replace-xpcmdshell-command-line-use-with-sql-server-agent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:24:45.690

`xp_cmdshell`无法使用 T-SQL 命令从 SQL Server 取消。您必须从您的应用程序中删除“取消”和导出的功能，因为这实际上是不可能的。如果您想要一个可取消的导出，您必须使用 xp_cmdshell 滚动您自己的 w/o。

有些人可能会建议终止生成的 bcp 进程，但这存在许多问题（发现正确的进程是最简单的），并且毫不客气地终止进程可能会产生可预测的结果，例如部分完成的损坏的导出文件被输入上游消费工作流。

# jquery - jquery视差效果函数

> ID：11933070
> 
> 赞同：0
> 
> 时间：2012-08-13T11:06:18.110
> 
> 标签：jquery

基本上，我要的是对执行以下操作的最佳方法的意见；

我基本上已经有了这个：http: [//jsfiddle.net/BnJ3G/1/](http://jsfiddle.net/BnJ3G/1/)这或多或少是一个取决于滚动事件的背景动画。类似于视差类型函数。

我只是想知道，用很少的编码来处理多轴的最简单方法，我需要大约 10 种不同的东西来应用这种效果，但目前我仅限于 +x 轴，因为我需要（ +X、-X、+Y 和 -Y)。有没有办法可以改变它，以便我可以在主要功能之外做一些简单的事情？

```
$('#element1').animatePosX(percentage);
$('#element2').animateNegY(percentage); 
```

ETC...

如果可能的话，我很想得到帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:51:56.787

我们开发了一个 jQuery 插件来以一种简单的方式做到这一点：[http](http://globocom.github.com/destaque/) ://globocom.github.com/destaque/ 仅使用 animate 来实现这种效果并不是那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T21:20:42.793

我花了一段时间才弄清楚简单地模拟视差滚动的基本数学。这可能不是向网站添加视差的最佳方式，但它目前对我有用。希望这对其他人来说是一个有用的起点。它不会影响大小或模糊或任何东西——只会影响滚动的速度。

```
// i is id, t is distance from top, d is depth (1-100)
// depth of 50 will scroll at normal scroll speed.
plax = [{
    "i": "sue",
    "t": 50,
    "d": 90
  },
  {
    "i": "mark",
    "t": 100,
    "d": 50
  },
  {
    "i": "janis",
    "t": 500,
    "d": 50
  },
  {
    "i": "donna",
    "t": 300,
    "d": 1
  }
];

$window = $(window);
$(function() {
  $.each(plax, function() {
    eyedee = "#" + this['i'];
    $(eyedee).addClass("plax");
    m = mathIt(this['d'], this['t']);
    $(eyedee).css({
      "top": m,
      "z-index": -this['d']
    });

  });
  $window.scroll(function() {
    $.each(plax, function() {
      eyedee = "#" + this['i'];
      m = mathIt(this['d'], this['t']);

      $(eyedee).css("top", m);
    });
  });
});

function mathIt(d, t) {
  return ((((d - 50) * 2) / 100) * $(window).scrollTop()) + t;
}
```

```
.plax {
  position: absolute;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="sue">here's sue</div>
<div id="mark">
  <h2>here's mark</h2>
</div>
<div id="donna">
  <h1>here's donna</h1>
</div>
<div id="janis">
  <h2>here's janis</h2>
</div>
```

# sql - 仅在使用 ROW_NUMBER 对内部选择进行过滤时才返回 SQL 数据

> ID：11933071
> 
> 赞同：0
> 
> 时间：2012-08-13T11:06:18.093
> 
> 标签：sql, sql-server-2008

我试图找到一个查询的底部，如果我过滤以下语句的内部选择，则只返回数据：

作品：

```
SELECT * FROM 
(
SELECT    
      [szPhoneNo] Email      
      ,ROW_NUMBER() OVER (PARTITION BY CLID ORDER BY t_clientphone.PhoneType_Id ASC) AS Seq       
  FROM [SLacsis_SLM].[dbo].[T_ClientPhone] t_clientphone INNER JOIN 
  [SLacsis_SLM].[dbo].[TL_PhoneType] PT ON t_clientphone.PhoneType_ID = PT.PhoneType_ID  
  WHERE t_clientphone.szPhoneNo LIKE '%reg28%'          
            ) T where T.Seq = 1 --AND Email LIKE '%reg28%' 
```

（返回 10 行）

不工作：

```
SELECT * FROM 
(
SELECT    
      [szPhoneNo] Email      
      ,ROW_NUMBER() OVER (PARTITION BY CLID ORDER BY t_clientphone.PhoneType_Id ASC) AS Seq       
  FROM [SLacsis_SLM].[dbo].[T_ClientPhone] t_clientphone INNER JOIN 
  [SLacsis_SLM].[dbo].[TL_PhoneType] PT ON t_clientphone.PhoneType_ID = PT.PhoneType_ID  
  --WHERE t_clientphone.szPhoneNo LIKE '%reg28%'            
            ) T where T.Seq = 1 AND Email LIKE '%reg28%' 
```

（返回 0 行）

谁能解释为什么第二个查询没有返回行以及是否有办法解决它？

我知道`ROW_NUMBER`当`PARTITION BY`和`ORDER BY`列不是唯一的（内部选择中的一些行就是这种情况）时，这是不确定的。

我会看看我是否可以同时使用临时表重新创建问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:08:42.120

第二个查询中的第一项（即：Seq=1 的那些）没有像 %REG28% 这样的电子邮件。

# jquery - 我的 jquery 插件不工作

> ID：11933076
> 
> 赞同：0
> 
> 时间：2012-08-13T11:06:50.893
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors

我的应用程序有自己的 jquery 插件。它对第一个回调工作正常，第二个回调没有分配。

```
$('element1').myplugin({callback:foo});
$('element2').myplugin({callback:bla}); 
```

第二个回调不起作用总是调用'foo'。

插件代码：

```
(function($) {
    $.fn.myplugin = function(options) {
          //some code.
          options.callback();
        }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:18:17.820

`(jQuery)`在插件末尾添加。演示： http: [//jsfiddle.net/wLEEK/](http://jsfiddle.net/wLEEK/)
这就是它起作用的原因。现在，您的插件如下所示：

```
(function($) {
  $.fn.myplugin = function(options) {
      //some code.
      options.callback();
    }
})(jQuery); 
```

您正在创建 jQuery 方法`myplugin`。但请注意第一行`function ($) {`和最后一行的代码`}`。您已将插件创建代码包装在一个函数中。该函数接受您调用的一个参数`$`。所以插件创建代码在一个函数内部，所以我们使用`(jQuery)`- 作为参数传入 jQuery 来调用该函数。这有点复杂，但这里有一个更熟悉的表格来帮助你理解发生了什么：

```
function createPlugin ($) {
  $.fn.myplugin = function(options) {
      //some code.
      options.callback();
    }
}//end of createPlugin
// myplugin isn't created yet; we need to call the function createPlugin
createPlugin(jQuery) // now myplugin is created 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:30:03.507

如果您包含任何 javascript，则使用升级版本，并验证您传递的请求以及您得到的响应....还要确保是否包含一个或多个 javascript，然后使用 $.noConflict(true); 可能这对你很有帮助…………

# java - Eclipse 版本控制项目

> ID：11933080
> 
> 赞同：1
> 
> 时间：2012-08-13T11:07:09.300
> 
> 标签：java, eclipse

我们和我的同事开发了相同的项目。我们不使用任何团队计划。因此，当我编辑由我的同事同时编辑的同一个课程时，但正如我所说，没有像团队开发这样的插件。同一个项目正在开发两种不同的日食。我想这样做来对位于我的 Eclipse 工作区中的项目进行版本控制。然后，我的同事也对他的项目进行了版本控制，我想将它们结合到我或他的 Eclipse 中。是否有任何插件或 Eclipse 功能可以做到这一点？我希望我清楚地解释我想要什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T11:08:51.937

学习和使用[版本控制系统](http://en.wikipedia.org/wiki/Revision_control)，例如 Subversion 或 Git。几乎所有的 Eclipse 版本控制系统都有插件。

例如，有[Subclipse ，一个用于使用](http://subclipse.tigris.org/)[Subversion](http://subversion.tigris.org/)的 Eclipse 插件，或用于使用[Git的](http://git-scm.com/)[EGit](http://www.eclipse.org/egit/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:10:05.960

使用[`git`](http://git-scm.com).

这是一个分布式代码版本控制系统，将帮助您实现您想要实现的目标。它不需要中央存储库，因此您不需要任何*服务器*，您只需将私有存储库与您的同事同步即可。

要与 Eclipse 集成，请使用[`EGit`](http://www.eclipse.org/egit)

如果它是开源的，你可以考虑在[github.com](http://github.com)上创建一个帐户并在那里托管你的 repo。Github 在使用`git`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:13:23.247

你使用的 Github 工作得非常好，在很多情况下可能比 SVN 更好。它有非常方便的工具，比如 git gui 和 git pull 命令，它们工作得非常好，没有任何复杂性

[这](https://github.com/)是它的官方网站

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:20:36.073

您应该使用版本控制系统，但如果您这样做：

> 当我编辑我的同事同时编辑的同一个班级时

您仍然会遇到问题，因为每个人都会在自己的文件版本中编码，并且您必须仔细合并更改（我的经验是使用 Clearcase）

# php - 在非对象上调用成员函数 createTemplate()

> ID：11933085
> 
> 赞同：0
> 
> 时间：2012-08-13T11:07:31.470
> 
> 标签：php, smarty

我正在迁移一个基于 Smarty 的网站，我试图满足所有先决条件，这样就不会有任何问题，但是（“总是”我可能会添加）我有这个问题，在安装所有必要的包后网站不工作（我在浏览器中有 HTTP 500 错误）我在错误日志中发现了这个错误：

> PHP 致命错误：在第 47 行的 /var/www/vhosts/placeholder.com/httpdocs/includes/sysplugins/smarty_internal_templatebase.php 中的非对象上调用成员函数 createTemplate()

这实际上出现在我有这段代码的 index.php 文件中

```
$smarty = new SmartyEC($page->template);
$smarty->display('index.tpl'); 
```

问题出在某处显示索引模板，但我不知道为什么。

为了提供更多上下文，我的构造函数如下所示：

```
<?php

require 'Smarty.class.php';

class SmartyEC extends Smarty{

    function SmartyEC()
    {
        function __construct()  
        {
            parent::__construct();
            $appname ='website';
            $path= Utils::getTemplatesPath();   
            $this->caching = false;

        }       

    }
}

?> 
```

服务器有 PHP 5.3.2。已安装并且还安装了最新版本的 Smarty。我检查了配置路径并相应地更改了它们以及文件包含。

先感谢您！

**更新#1**

我也尝试过删除这样的函数定义：

```
class SmartyEC extends Smarty {
    public function __construct()  
    {
        parent::__construct();
        $appname ='website';
        $path= Utils::getTemplatesPath();   
        $this->caching = false;
    }
} 
```

但现在错误变为：

> 在 /var/www/vhosts/website/httpdocs/includes/sysplugins/smarty_internal_templatebase.php:127 中带有消息“无法加载模板文件 'index.tpl'”的未捕获异常“SmartyException”：127\n堆栈跟踪：\n#0 /var /www/vhosts/website/httpdocs/includes/sysplugins/smarty_internal_templatebase.php(374): Smarty_Internal_TemplateBase->fetch('index.tpl', NULL, NULL, NULL, true)\n#1 /var/www/vhosts/ website/httpdocs/index.php(58): Smarty_Internal_TemplateBase->display('index.tpl')\n#2 {main}\n 在 /var/www/vhosts/website/httpdocs/includes/sysplugins/smarty_internal_templatebase 中抛出。第 127 行的 php

**更新 2**

我发现这个主题[CodeIgniter + Smarty = Error](https://stackoverflow.com/questions/7883300/codeigniter-smarty-error)给出了相同的错误，但情况与这里不同。更有趣的是，在另一台服务器上它工作正常，所以我的猜测是存在配置故障而不是编程问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:33:06.490

你确定 inside 的嵌套`__construct()`吗`SmartyEC()`？（修辞问题，对不起）

如果您明确命名您的函数`public`，错误将立即浮出水面：

```
class SmartyEC extends Smarty {
    public function SmartyEC()
    {
        public function __construct()  
        {
            parent::__construct();
            $appname ='website';
            $path= Utils::getTemplatesPath();   
            $this->caching = false;
        }
    }
} 
```

给你

```
Parse error: syntax error, unexpected T_PUBLIC in test.php on line 7 
```

* * *

从 PHP5 开始，我们不再使用类名构造函数。我们使用`__construct()`. 除非您在`$ec = new SmartyEC(); $ec->SmartyEC();`某处显式调用，否则应删除该函数声明：

```
class SmartyEC extends Smarty {
    public function __construct()  
    {
        parent::__construct();
        $appname ='website';
        $path= Utils::getTemplatesPath();   
        $this->caching = false;
    }
} 
```

另请注意，您的示例调用`$smarty = new SmartyEC($page->template);`传递了一个参数 - 一个既不`SmartyEC()`也不`__construct()`预期的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:45:55.980

最后我明白了......这是一个无效的 4 个因素的复合体：

1.  我从 smarty 3.1.11 降级到 3.0.7
2.  我找到了另一个与旧主机相关的配置路径 - 很容易修复
3.  `$this->allow_php_tag = true;`.tpl 文件包含 php 代码，例如“{php} some code here {/php}”，并在构造函数中对其进行了修复
4.  即使我设置了正确的权限，系统也无法重写编译文件夹，因此我删除了编译文件夹中的所有内容。

# ruby-on-rails - 直接下载一个csv文件而不写入目录

> ID：11933086
> 
> 赞同：2
> 
> 时间：2012-08-13T11:07:46.257
> 
> 标签：ruby-on-rails, csv

我正在使用带有 ruby​​ 1.8.7 的 rails 2.3.14，我想下载一个 csv 文件而不将其写入任何目录。

我的代码：

```
 def export
    @news = News.find(:all, :conditions => ["updated_at >= ? and news_source_id != 1 and ready = 1", 1.week.ago])
    file_name = "Non_linksv_news_#{1.week.ago.strftime('%b-%d-%Y')}_to_#{Time.now.strftime('%b-%d-%Y')}.csv"
    File.open(file_name, "w") do |file|
      file_name << %w(Source Headline).to_csv
      @news.each { |news| file_name << [news.news_source.name, news.news_headline].to_csv }
    end
    send_file file_name
  end 
```

它在目录中创建一个文件，然后下载。我不想创建文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:22:51.913

解决了

```
 def export
    ns = NewsSource.find_by_name 'Linksv', :select => :id
    @news = News.find(:all, :conditions => ["updated_at >= ? and news_source_id != ? and ready = 1", 1.week.ago, ns.id])
    file_name = "linksv_news_#{1.week.ago.strftime('%b-%d-%Y')}_to_#{Time.now.strftime('%b-%d-%Y')}.csv"
    csv = %w(Source Headline).to_csv
    @news.each { |news| csv << [news.news_source.name, news.news_headline].to_csv }

    send_data csv, :filename => file_name, :type => "text/csv"
  end 
```

它将以正确的方式生成带有行和列的csv文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:32:17.047

我们使用这种方法

```
def export    
  output = [["Source", "Headline"]]   
  @news.each do |a_new| 
    output << [a_new,news_source.name.to_s, a_new.news_headline.to_s]   
  end
  respond_to do |format|
    format.csv {
      send_data output.to_csv, :type => "text/csv", :filename => "My news csv.csv"
    }
  end
end 
```

# php - 如何用php写出好的代码？

> ID：11933088
> 
> 赞同：-2
> 
> 时间：2012-08-13T11:07:52.093
> 
> 标签：php, optimization

我必须在 php 中编写一个货币转换器，它可以转换以下货币：

```
EUR -> USD
EUR -> GBP 
```

代码必须结构良好且清晰。我的代码如下所示：

在 index.php 中，我将 html 输入编写如下：

```
 <select name="fT">
                    <option value="euro-usd@EUR-USD">EUR -> USD</option>
                    <option value="euro-gbp@EUR-GBP">EUR -> GBP</option>
                <select>
                   <input type="text" name="amount" id="amount" value="">
                   <input type="submit"/> 
```

convert.php 看起来像这样：

```
<?php
include ("functions.php");
$fT = $_POST['fT'];
$amount = $_POST['amount'];

$valueAndText = explode('@', $fromTo);
$fromTo = $valueAndText[0];
$text = explode('-', $valueAndText[1]);
$from = $text[0];
$to = $text[1];

echo convertCurr($fT, $amount) ;
?> 
```

对改进此代码有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:17:52.937

尝试从我们的项目中删除所有硬代码。

将它们移动到配置文件并将它们包含在您的项目中。这样您就可以随时更改它们，而无需在编码部分进行任何修改。

使用含义完整的变量名，不要让它们太大。

尝试添加一些小注释来解释代码或让代码更容易理解 由另一个人

我们必须看的主要内容是

**使代码可读**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:27:43.863

您可以将股价放在一个配置文件中，每次更改都可以替换该文件。我正在考虑您确实希望将数据存储在文件中而不是数据库中。

配置文件可能如下所示：

```
<?php
 $config['usd-eur']=1.2;
 $config['usd-gbp']=0.5;
?> 
```

将此文件命名为 config.php，并将其与您的脚本放在一起，然后包含它。

```
<?php
 require_once('config.php');
?> 
```

关于 $_POST 变量，您需要转义它们以保护自己免受 MySQL 和 XSS 攻击。

您可以使用此功能：

```
<?php
function filter($data) {
$data = trim(htmlentities(strip_tags($data)));
if (get_magic_quotes_gpc())
    $data = stripslashes($data);

$data = mysql_real_escape_string($data);

return $data;
}?> 
```

然后遍历您的 POST 变量：

```
foreach($_POST as $key => $value) {
 $mydata[$key] = filter($value);
} 
```

还有一点是您为检测 $fromto 变量的选择而执行的处理量。

为什么不这样做：

```
<select name="fromTo">
  <option value="1">(EUR) ---> (USD)</option>
  <option value="2">(EUR) ---> (GBP)</option>
</select> 
```

然后执行 Switch-Case 语句

```
<?php
 switch($mydata['fromTo']){
  case 1:
   $from='euro';
   $to='usd';
   break;
  case 2:
   $from='euro';
   $to='gbp';
   break;
 } 
```

希望有帮助。

# java - 带有进度条的 Swing 闪屏

> ID：11933089
> 
> 赞同：7
> 
> 时间：2012-08-13T11:07:52.610
> 
> 标签：java, swing, splash-screen, jprogressbar, invokelater

这是我的启动画面代码，

```
public class SplashScreen extends JWindow {

private static final long serialVersionUID = 1L;
private BorderLayout borderLayout = new BorderLayout();
private JLabel imageLabel = new JLabel();
private JProgressBar progressBar = new JProgressBar(0, 100);

public SplashScreen(ImageIcon imageIcon) {
    imageLabel.setIcon(imageIcon);
    setLayout(borderLayout);
    add(imageLabel, BorderLayout.CENTER);
    add(progressBar, BorderLayout.SOUTH);
    pack();
    setLocationRelativeTo(null);
}

public void showScreen() {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            setVisible(true);
        }
    });
}

public void close() {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            setVisible(false);
            dispose();
        }
    });
}

public void setProgress(final String message, final int progress) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            progressBar.setValue(progress);
            if (message == null) {
                progressBar.setStringPainted(false);
            } else {
                progressBar.setStringPainted(true);
            }
            progressBar.setString("Loading " + message + "...");
        }
    });
}
} 
```

从我这样调用的主要方法中，

```
public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            try {
                UIManager.setLookAndFeel(UIManager
                        .getSystemLookAndFeelClassName());

                SplashScreen splashScreen = new SplashScreen(new ImageIcon("images/splash.jpg"));
                splashScreen.showScreen();

                AppFrame frame = new AppFrame(splashScreen);

            } catch (Exception e) {
                appLogger.error(e.getMessage(), e); 
            }
        }
    });
} 
```

在我调用的 AppFrame 的构造函数中， splashScreen.setProgress(msg, val) 方法来更新进度条。但飞溅没有显示。它仅在最后显示帧仅显示几分之一秒，即使加载需要很长时间。但是如果我把这三行

```
SplashScreen splashScreen = new SplashScreen(new ImageIcon("images/splash.jpg"));
splashScreen.showScreen();
AppFrame frame = new AppFrame(splashScreen); 
```

在 invokeLater() 之外，会显示初始屏幕，并且进度条会很好地更新。我相信 GUI 更新应该在 invokeLater 中。可能是什么问题呢？

顺便说一句，AppFrame 加载了我的应用程序的各种面板。

**编辑：** 我的 AppFrame 的模拟如下所示。

```
public class AppFrame extends JFrame {

public AppFrame(SplashScreen splashScreen) {
    JPanel test = new JPanel();
    test.setLayout(new GridLayout(0, 10));

    splashScreen.setProgress("jlabel", 10);
    for(int i = 0; i < 10000; i++) {
        test.add(new JButton("Hi..." + i));
        splashScreen.setProgress("jbutton", (int)(i * 0.1));
    }
    add(new JScrollPane(test));
    setPreferredSize(new Dimension(800, 600));
    pack();
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    setLocationRelativeTo(null);
    splashScreen.setProgress("complete", 100);
    setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:17:56.153

嗯，看看我放在一起的这个工作示例，它使用了这个`SplashScreen`类（只使用一个简单的`Timer`并将's 的值`ActionListener`增加到`ProgressBar`100 并显示一个框架）：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Font;
import java.awt.event.ActionListener;
import javax.swing.*;

public class SplashScreen extends JWindow {

    private static JProgressBar progressBar = new JProgressBar();
    private static SplashScreen splashScreen;
    private static int count = 1, TIMER_PAUSE = 25,PROGBAR_MAX=100;
    private static Timer progressBarTimer;
    ActionListener al = new ActionListener() {

        @Override
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            progressBar.setValue(count);
            System.out.println(count);
            if (PROGBAR_MAX == count) {
                splashScreen.dispose();//dispose of splashscreen
                progressBarTimer.stop();//stop the timer
                createAndShowFrame();
            }
            count++;//increase counter

        }
    };

    public SplashScreen() {
        createSplash();
    }

    private void createSplash() {
        Container container = getContentPane();

        JPanel panel = new JPanel();
        panel.setBorder(new javax.swing.border.EtchedBorder());
        container.add(panel, BorderLayout.CENTER);

        JLabel label = new JLabel("Hello World!");
        label.setFont(new Font("Verdana", Font.BOLD, 14));
        panel.add(label);

        progressBar.setMaximum(PROGBAR_MAX);
        container.add(progressBar, BorderLayout.SOUTH);

        pack();
        setLocationRelativeTo(null);
        setVisible(true);

        startProgressBar();
    }

    private void startProgressBar() {
        progressBarTimer = new Timer(TIMER_PAUSE, al);
        progressBarTimer.start();
    }

    private void createAndShowFrame() {
        JFrame frame = new JFrame();
        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                splashScreen = new SplashScreen();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:44:28.100

An`invokedLater`从另一个调用`invokeLater`。只有在第`runnable`一个执行完成时才会执行。

您应该像这样修改 Splashscreen 代码：

```
...
private void runInEdt(final Runnable runnable) {
    if (SwingUtilities.isEventDispatchThread())
        runnable.run();
    else
        SwingUtilities.invokeLater(runnable);
}

public void showScreen() {
    runInEdt(new Runnable() {
        public void run() {
            setVisible(true);
        }
    });
}

public void close() {
    runInEdt(new Runnable() {
        public void run() {
            setVisible(false);
            dispose();
        }
    });
}

public void setProgress(final String message, final int progress) {
    runInEdt(new Runnable() {
        public void run() {
            progressBar.setValue(progress);
            if (message == null)
                progressBar.setStringPainted(false);
            else
                progressBar.setStringPainted(true);
            progressBar.setString("Loading " + message + "...");
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:59:25.887

```
 Thread l_splash_thread = new Thread(
            new SplashScreen ());
    l_splash_thread.start();

    try {
        l_splash_thread.join();
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    } 
```

我认为这样你可以保持你的启动画面。

# sql - 关于 SQL Profiler 中 SP:CacheHit 事件的说明

> ID：11933091
> 
> 赞同：2
> 
> 时间：2012-08-13T11:08:04.800
> 
> 标签：sql, sql-server-2008, caching, stored-procedures, entity-framework-4.1

我想澄清一下我对 SQL Profiler 中“SP:CacheHit”事件的理解。

假设每当针对存储过程的执行显示“SP：CacheHit”事件时不会对数据库进行任何命中，这是否安全？我问的原因是因为我目前有一个查询（使用实体框架/LINQ），它从表的 4000 行中选择一个随机记录。

SQL Server 是否真的从我的表中缓存了 4000 条数据记录，因此任何后续查询都不会命中数据库？

系列活动如下：

1.  RPC：开始
2.  SP:缓存命中
3.  SP:StmtStarting
4.  SP:StmtCompleted --> 这是我看到读取次数和行数的地方
5.  RPC:Completed --> 这是我看到读取次数和行数的地方

我发现这篇有用的[文章](http://blogs.msdn.com/b/adonet/archive/2010/09/13/ef-caching-with-jarek-kowalski-s-provider.aspx)在一定程度上澄清了我的理解，但我的一位专家的确认会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:23:29.227

这只是意味着在执行计划缓存中找到了 SP 本身。这意味着不需要重新编译 SP。

*   [http://msdn.microsoft.com/en-us/library/aa173892(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa173892(v=sql.80).aspx)

在您的示例中，从第 3 行开始，显示数据库本身正在被询问以完成查询。

# asp.net - 在 RadiboButtonList 中明确声明的数据绑定项之前

> ID：11933092
> 
> 赞同：0
> 
> 时间：2012-08-13T11:08:05.067
> 
> 标签：asp.net, radiobuttonlist, databound

我似乎无法在任何地方的 Internet 上找到关于此的任何提示。

我有一个带有 RadioButtonList 控件的 ASP.NET 页面，数据绑定到 SQL 数据库中的表。这很好用。我还明确声明了一个额外的“未知”列表项，它处理数据库中绑定字段为 NULL 的任何记录。

但是，我希望“未知”选项出现在从数据库中提取的所有其他项目之后。由于该属性称为 AppendDataBoundItems 我认为它们将出现在任何明确声明的项目之后是合乎逻辑的，但是没有办法让数据绑定项目首先出现吗？我意识到我可以通过以编程方式添加“未知”选项来实现这一点，但这似乎有点矫枉过正！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:09:45.087

> 我意识到我可以通过以编程方式添加“未知”选项来实现这一点，但这似乎有点矫枉过正！

这不是矫枉过正，只是这样做，然后继续工作的下一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:13:20.013

AppendDataBoundItems 用于在数据绑定**之前**添加项目。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)

因此，您唯一的选择是手动完成，这样您就拥有了所需的所有灵活性。您可以在范围末尾插入（任何位置）或添加项目。

# c# - 多个 Windows 服务实例的问题

> ID：11933093
> 
> 赞同：2
> 
> 时间：2012-08-13T11:08:27.993
> 
> 标签：c#, web-services, windows-services

我有多个 Windows 服务实例，每个实例都在不同的服务器上运行。当它在表中找到一条记录时，就会启动每个 Windows 服务。现在预期的功能是，如果其中一个 Windows 服务选择了记录，那么其他 Windows 服务不应该选择相同的记录。实际功能：每个 Windows 服务都应该选择不同的记录。

所有实例都在同时获取相同的记录和处理，这会产生问题。

任何人都可以提出上述解决方案吗？

附加细节：我已经添加了我们正在检查数据集的代码，其中包含记录（我们之前插入以供 Windows 服务处理）然后我们执行一些业务，并发送邮件。问题是由于有多个 Windows 服务实例，我收到了多封不可取的邮件。

```
DataSet reportsDs  = new DataSet();            
int ReportID = 0;
int MastReptID = 0;
try
{
    reportsDs = stored procedure to get the dataset in which the record is inserted
    if (reportsDs != null && reportsDs.Tables[0].Rows.Count > 0)
    {
        ServiceName.isProcCompleted = false;
        for (int rptcnt = 0; rptcnt < reportsDs.Tables[0].Rows.Count; rptcnt++)
        {
           //some business functions
           //send a mail after finishing the above business process
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:56:25.260

在数据库中使用唯一标识符列。让每个服务在启动时生成它自己的 guid。

使用以下 SQL 的修改获取一行，假设主键是 id 并且 guid 列是 LOCKGUID

```
Select TOP 1 id FROM mytable where LOCKGUID is null ORDER BY id; 
```

现在使用以下 SQL 更新行，传入参数 @MYGUID 和 @ID

```
Update mytable set LOCKGUID=@MYGUID where LOCKGUID is null and id=@id 
```

现在获取记录

```
Select id,field1,field2... from mytable where LOCKGUID=@MYGUID and id=@ID 
```

如果您收到零个结果，您需要再次从步骤 1 循环，因为另一个服务首先声明了此记录。

您可以编写一个存储过程来为您完成所有这些处理，从而消除多次往返服务器的需要。

# android - 处理程序 postDelayed() 长时间后停止工作

> ID：11933094
> 
> 赞同：1
> 
> 时间：2012-08-13T11:08:29.617
> 
> 标签：android, handler

在我的 android 应用程序中，我正在运行一个在前台启动的远程服务

```
startForeground(1, notification) 
```

以免它被杀死。在此服务中，允许像这样每 15 分钟运行一次任务并重复。

```
handler.post(scheduledTask);
    class ScheduledTask implements Runnable{

        @Override
        public void run() {
            // Do the task
            // Repeat the task after the interval
            handler.postDelayed(this,INTERVAL);
        }
    } 
```

我把这个应用程序保留了一天。但是在午夜之后，它停止了大约 5-6 个小时的工作，然后当我恢复应用程序时，它还在继续。

有人能告诉我是什么导致了这个问题吗？我在 Galaxy Note 中对此进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:24:41.430

使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)比使用 postDelayed 更好。我现在不能发布代码，但我有同样的需求，而且事实证明，AlarmManager 比 postDelayed 好得多。

您将需要某种警报接收器（例如，BroadcastReceiver），它会在每次警报事件（意图）发生时启动您的服务。

# android - Linux 编译源代码期间的权限问题

> ID：11933098
> 
> 赞同：0
> 
> 时间：2012-08-13T11:08:43.400
> 
> 标签：android, linux, ubuntu, compilation, linux-kernel

我试图通过将源目录放在我的 ubuntu 分区外部的分区中来进行编译。当我开始编译时，我得到了如图所示的权限被拒绝问题。有人可以让我知道如何解决这个问题吗？

```
root@machine1-desktop:/media/E8202E47202E1CD6/IceCreamSandwich#    '/home/machine1/bin/build.sh' 
 Using: androidu
/home/machine1/bin/DL10_build.sh: line 34: ./customize.sh: Permission denied
/home/machine1/bin/DL10_build.sh: line 35: [: ==: unary operator expected
/home/machine1/bin/DL10_build.sh: line 38: ./miyabuild.sh: Permission denied
/home/machine1/bin/DL10_build.sh: line 40: ./customize.sh: Permission denied
Time duration: 0 mins 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:18:43.940

当您说它在外部分区上时，它是什么类型的文件系统？（运行 'mount' 说明了什么？）如果它是 FAT 或 FAT32 分区，它们不支持文件的可执行权限，因此 chmod +x 不会对它们起作用。您需要告诉文件系统假装文件是可执行的，例如：

```
mount -t vfat -o umask=077 [device] [location] 
```

# google-chrome-extension - 如何在 Chrome 扩展中添加 AdSense 代码？

> ID：11933105
> 
> 赞同：0
> 
> 时间：2012-08-13T11:09:07.913
> 
> 标签：google-chrome-extension, adsense

我想在 chrome 扩展 (manifest_version:2) 中添加 adsense 代码。

我有一个 popup.html 页面，其中有一个专门的广告块：

```
<div id="adblock">
            <script type="text/javascript"><!--google_ad_client = "ca-pub-xxxxxx";/* Getfiles Chrome Extn Banner 468x60 */google_ad_slot = "xxxxxx"; google_ad_width = 468;google_ad_height = 60;//--></script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
        </div> 
```

但是当它执行时会产生以下错误：

```
Refused to load the script 'http://pagead2.googlesyndication.com/pagead/show_ads.js' because it violates the following Content Security Policy directive: "script-src 'self' https://pagead2.googlesyndication.com/pagead/show_ads.js". 
```

这是由于新的内容安全政策禁止内联 javascript。

为了克服这个问题，我尝试在 popup.js 文件中创建该代码

```
document.addEventListener('DOMSubtreeModified', function() {

                var x = chrome.extension.getViews({type:"popup"});
                rowOutput='<script type="text/javascript"><!--google_ad_client = "ca-pub-xxxx";/* Getfiles Chrome Extn Banner 468x60 */google_ad_slot = "xxxx"; google_ad_width = 468;google_ad_height = 60;//--></script><script type="text/javascript"src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>';
                if (x.length>0){

                  x[0].document.getElementById('adblock').innerHTML=rowOutput;
                 }
}, true); 
```

当我重新加载扩展程序并单击扩展程序图标时，浏览器挂起并且没有打开弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T15:19:25.303

在清单中添加这个

```
"content_security_policy": "object-src 'unsafe-eval'; script-src 'unsafe-eval' https://pagead2.googlesyndication.com; connect-src *" 
```

只有 https 然后添加“s”更改

> [http://pagead2.googlesyndication.com](http://pagead2.googlesyndication.com)

和

> [https://pagead2.googlesyndication.com](https://pagead2.googlesyndication.com)

# php - 名片设计师

> ID：11933107
> 
> 赞同：3
> 
> 时间：2012-08-13T11:09:13.420
> 
> 标签：php, javascript, flash, apache-flex, svg

我们计划创建一个名片设计器，用户可以在其中添加文本、更改字体、颜色等。他们还应该能够将剪贴画中的图像添加到这些卡片中。我们需要保存这个设计并预览他们所做的事情。

我们还需要一个输出来将其打印到名片上以供管理员使用。我们听说输出应该是 SVG 以保持打印质量。

我们从一位 Flex 程序员开始，在从 Flex 保存这个自定义模板时遇到了多个问题。与我们在 flex 设计工具中看到的相比，他们无法在输出中正确定位文本。例如，如果我们在左下角添加一个文本并保存设计，与我们在 Flex 编辑器中设计的相比，在预览中它向右侧移动。

现在我们需要一个好主意，这在 flex 中是否可行，并将此输出保存为服务器端语言 (PHP)。保存时，我们需要 flex 将 x 和 y 位置、颜色、文本、字体等发送到 PHP 脚本，以便服务器可以在后台运行此保存功能以节省时间。上次我们与开发人员一起尝试时，PHP 得到了错误的 x 和 y 坐标，他们无法正确保存。

我们需要知道这个工具是否适用于 flex、PHP。我们还需要关于需要从 flex 导出什么输出格式的指导，以便我们可以将其用于打印。我们不希望 Flex 保存此输出，因为它会使用户在将此输出发送到服务器时等待很长时间。

# xquery - 如何从 XML DB 中获取文档的名称列表

> ID：11933126
> 
> 赞同：0
> 
> 时间：2012-08-13T11:10:14.210
> 
> 标签：xquery, berkeley-db-xml

我的应用程序通过名称自动生成将 XML 传输到 Berkeley XML DB。例如，当我在数据库中有 1000 个文档时，如何获取文档的名称列表？

我只能通过使用来计算它们：

```
query 'collection("myDB.dbxml")' 
```

在“打印”控制台之后，我列出了 XML 的完整内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:33:33.200

最简单的方法是与 dbxml API 交互并在应用程序中调用 getAllDocuments() 方法。如果需要，您可以将输出传递给 http 响应对象...

Al la Danny Brian 使用 Python 编写的出色的“Berkeley DB XML 权威指南”：

```
container = manager.openContainer("myDB.dbxml")
results = container.getAllDocuments(0)
for value in results:
    document = value.asDocument()
    print document.getName() 
```

# c# - 是否可以在 C# 方法中使用 JavaScript 函数

> ID：11933127
> 
> 赞同：0
> 
> 时间：2012-08-13T11:10:16.753
> 
> 标签：c#, javascript, asp.net, listview, dialog

我使用 2 个 Web 表单，我想使用一个 Web 表单，然后我想用第二个 Web 表单打开一个对话框。如果我单击 ListView 中的 LinkBut​​ton，我想打开对话框，它工作正常，但我需要第二个 Webform 的值，所以我首先打开对话框。此对话框为空。关闭此对话框后，值将发送到会话。

ASPX：

```
...
<script type="text/javascript">

         function OpenChild() {

             var WinSettings = "center:yes;resizable:no;dialogHeight:550px"
             var MyArgs = window.showModalDialog("Benutzer.aspx", MyArgs, WinSettings);

         }

    </script>
...
<asp:ListView runat="server" ID="myListView">

        <LayoutTemplate>
            <table id="UserTable" runat="server" border="0" width="800" cellpadding="0" cellspacing="0">
                <tr style="background-color:#E5E5FE" class="TableClass">
                    <th id="th1" runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
                    <th id="th2" runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
                    <th id="th3" runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
                    <th id="th4" runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
                    <th id="th5" runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>

        <ItemTemplate>

            <tr class="TableClass">    
                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" OnClientClick="OpenChild()" /></td>

              <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </ItemTemplate>

        <AlternatingItemTemplate>

            <tr class="TableClass"> 

                <td align="left" ><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label2" Text='<%# Eval("eMail") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" OnClientClick="OpenChild()" /></td>
                <td align="left"><asp:LinkButton CssClass="MyLink" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" OnClientClick="OpenChild()" /></td>

                <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

            </tr>

        </AlternatingItemTemplate>

        </asp:ListView> 
```

C#代码：

...

```
protected void Button1_Command(object sender, CommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
                //Der Index der Zeile wird ermitellt
                int index = Convert.ToInt32(e.CommandArgument);

                //Der Inhalt (GUID[Unsichtbar]) wird aus der zeile mit dem Index herausgezogen und übergeben
                Label lb = (Label)myListView.Items[index].FindControl("Label6");

                //Der GUID, Benutzer-Nachname und das Werk werden an eine Session übergeben
                Session["UserID"] = lb.Text;
                Session["SearchUser"] = txtBenutzer.Text;
                Session["DropDownValue"] = dropWerk.SelectedValue;

                //Es wird eine neue Webform geöffnet
                Response.Redirect("Benutzer.aspx",true);

            }

        } 
```

...

我希望我将我的值保存在会话中，然后打开对话框

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:15:27.343

如果我正确理解您的问题，是的，您可以使用带有 ClientScriptManager.RegisterStartupScript 方法的 javascript 服务器端，这是一篇 msdn 文章，详细解释了它

[http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:40:17.650

Javascript 代码总是在服务器端代码之前被调用..你必须考虑替代方式...你可以使用 List View 的 ItemCommand 属性来设置会话值，然后从 Codebehind 调用 Javascript 函数来打开弹出窗口。

```
protected void ListView_OnItemCommand(object sender, ListViewCommandEventArgs e)
  {
    if (String.Equals(e.CommandName, "OpenPopup"))
    {

      ListViewDataItem dataItem = (ListViewDataItem)e.Item;
      Session["UserID"]=((Label)dataItem.FindControl("Label6")).Text;
      Session["SearchUser"] = txtBenutzer.Text;                     
      Session["DropDownValue"] = dropWerk.SelectedValue;
      Page.ClientScript.RegisterStartupScript(GetType(), "Key", "OpenPopupFunction();", true); 

    }     

} 
```

# java - 使用 Apache 的 HttpClient 时是否需要指定超时？

> ID：11933136
> 
> 赞同：1
> 
> 时间：2012-08-13T11:10:58.843
> 
> 标签：java, android, httpclient, apache-httpclient-4.x, apache-commons-httpclient

默认值是无限的。

但是由于我在 Android 中使用 Apache Client [1]，由于移动网络总是不可靠的，所以我需要设置`http.socket.timeout`and`http.connection.timeout`吗？

如果是，我应该设置什么值？**一分钟**是否适合移动网络（例如 3G）？

[1] [http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:36:18.070

如果你不能使用[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html "AndroidHttpClient")你总是可以设置相同的超时值，即：

```
// Default connection and socket timeout of 60 seconds.  Tweak to taste.
private static final int SOCKET_OPERATION_TIMEOUT = 60 * 1000; 
```

这个常量用于很多超时，

```
HttpConnectionParams.setConnectionTimeout(params, SOCKET_OPERATION_TIMEOUT);
HttpConnectionParams.setSoTimeout(params, SOCKET_OPERATION_TIMEOUT); 
```

并且在调用时也使用`SSLCertificateSocketFactory.getHttpSocketFactory(..)`

# java - 如何在Java中以毫秒为单位获取ISO格式？

> ID：11933137
> 
> 赞同：6
> 
> 时间：2012-08-13T11:11:02.517
> 
> 标签：java, date

`yyyy-MM-dd HH:mm:ss,SSS`以毫秒为单位获取时间的简单方法吗？我从`new Date()`or中找到了一些如何执行此操作的信息`Calendar.getInstance()`，但找不到是否可以从 long 中完成（例如`1344855183166`）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T12:46:05.290

我以为你问过如何以这种格式获取时间“yyyy-MM-dd HH:mm:ss,SSS”

一种方法是使用 java 的 SimpleDateFormat： [http ://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

请注意，这不是线程安全的。

...

```
Date d = new Date(1344855183166L);
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss,SSS");
String dateStr = sdf.format(d); 
```

...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-18T18:14:10.407

如果你有纪元毫秒。下面的行应该工作，

```
Instant.ofEpochMilli(millis).toString() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-19T10:13:03.693

正如 Sridhar Sg 的代码所说：

```
Instant.ofEpochMilli(millis).toString() 
```

将起作用，因为该`toString()`方法将为您提供 ISO-8601 扩展格式表示（带分隔符）。

请注意，除非您使用[ThreeTen Backport](https://www.threeten.org/threetenbp/)（Java 6 和 7 的反向移植），否则`Instant`该类**仅适用于 JDK 8**（包的介绍）。`java.time`

如果millis = 1603101879234，上述方法将返回：`2020-10-19T10:04:39.234Z`

如果您需要其他类型的格式，例如 ISO-8601 基本格式（除了中间的 T 之外没有分隔符），您可以使用`DateTimeFormatter`如下自定义：

```
Instant instant = Instant.ofEpochMilli(millis);
DateTimeFormatter outFormatter = DateTimeFormatter
        .ofPattern("yyyyMMdd'T'HHmmss.SSSX") // millisecond precision
        .withZone(ZoneId.of("UTC"));

String basicIso = outFormatter.format(instant); 
```

对于相同的millis = 1603101879234，上述方法将产生：`20201019T100439.234Z`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-13T11:15:58.150

构造`Date`函数确实需要很长时间（毫秒）不是吗？

问候，

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-27T23:49:48.527

该问题未提及时区，因此我假设您的意思是[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) / GMT。这个问题没有解释“ISO格式”，所以我假设你的意思是[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)。这恰好是第三方[Joda-Time](http://www.joda.org/joda-time/) 2.3 库的默认设置。这*是*线程安全的。

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.

System.out.println( "That moment: " + new org.joda.time.DateTime( 1344855183166L, org.joda.time.DateTimeZone.UTC ) ); 
```

运行时……</p>

```
That moment: 2012-08-13T10:53:03.166Z 
```

* * *

如果原始海报的意思是波兰时区……</p>

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.

// Time Zone list… http://joda-time.sourceforge.net/timezones.html
org.joda.time.DateTimeZone warsawTimeZone = org.joda.time.DateTimeZone.forID( "Europe/Warsaw" );
System.out.println( "That moment in Poland: " + new org.joda.time.DateTime( 1344855183166L, warsawTimeZone ) ); 
```

运行时……</p>

```
That moment in Poland: 2012-08-13T12:53:03.166+02:00 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-13T11:12:14.797

使用[`new Date(millis);`](http://docs.oracle.com/javase/1.6/docs/api/java/util/Date.html#Date%28long%29)构造函数[`Date`](http://docs.oracle.com/javase/1.6/docs/api/java/util/Date.html)

```
new Date(1344855183166L); 
```

# javascript - 隐藏的 div 正在做验证

> ID：11933140
> 
> 赞同：0
> 
> 时间：2012-08-13T11:11:09.927
> 
> 标签：javascript, html

在这两个单选按钮存在。

单击此按钮会显示和隐藏 div。

单击提交按钮验证发生。

当 div 可见时，验证正在发生。

但是当 div 被隐藏时，验证也会发生。

如何防止对隐藏的 div 进行验证。

这是我的代码：

```
 <script type="text/javascript">

function checkRadio(frmName, rbGroupName)
{ 
    var radios = frmName.elements[rbGroupName]; 
    for (var i=0; i <radios.length; i++)
    { 
        if (radios[i].checked)
        { 
            return true; 
        } 
    } 
    return false; 
} 
    function chk_oauth(objForm)
   {
  var user = objForm.user.value;
  var pass = objForm.password.value;

  if(user =="")
  {
        alert("Type email");
        return false;
  }

  if(pass =="")
  {
        alert("Type pasword");
        return false;
  }

  if (!checkRadio(objForm,"oauth_option"))
  {
        alert("Please select option");
        return false;
  }
  }          
  </script>
  <form name = "frmOauth" enctype="multipart/form-data" action = "" method = "post"    onsubmit="javascript:return chk_oauth(this);">
   <label><input type="radio" name="oauth_option" id="oauth_yes" value="Yes" onclick="toggle(this)" >Yes</label>
    <label><input type="radio" name="oauth_option" id="oauth_no" value="No" onclick="toggle(this)">No</label>
     <div class="oauth_div" id="oauth_div" >
     Email Address* <br />
      <input type="text" class="input-profile-other" placeholder="Email" id="user" name="user" />
      Password * <br/>
     <input type="password" class="input-profile-other" type="password" id="password" name="password" placeholder="password" />
        </div>
       <input class="btn-home-search1" type="submit" value="Go" name="oauth_submit" id="oauth_submit">
        </form>

             <script type="text/javascript">
            var t = document.getElementById('oauth_div');

         function toggle(switchElement) {
          if (switchElement.id == 'oauth_yes'){
          t.style.display = '';
          //email.setAttribute('type','email');
             t.style.visibility = 'visible';
           }else{
            t.style.display = 'none';
             //email.setAttribute('type','text');
              t.style.visibility = 'hidden';
            }
          }

               [].forEach.call( document.forms.frmOauth.oauth_option, function(radio){
             if( radio.checked ) {
                     toggle( radio );   
             }
               });
                </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:25:16.497

在此处为该 div 中的所有字段添加一个类`oauth_class`

```
<form name = "frmOauth" enctype="multipart/form-data" action = "" method = "post" onsubmit="javascript:return chk_oauth(this);">
<label><input type="radio" name="oauth_option" id="oauth_yes" value="Yes" onclick="toggle(this)" >Yes</label>
<label><input type="radio" name="oauth_option" id="oauth_no" value="No" onclick="toggle(this)">No</label>
<div class="oauth_div" id="oauth_div" >
Email Address* <br />
<input type="text" class="input-profile-other oauth_class" placeholder="Email" id="user" name="user" />
Password * <br/>
<input type="password" class="input-profile-other oauth_class" type="password" id="password" name="password" placeholder="password" />
</div>
<input class="btn-home-search1" type="submit" value="Go" name="oauth_submit" id="oauth_submit">
</form> 
```

*Javascript*

```
var t = document.getElementById('oauth_div');
function toggle(switchElement) {
if (switchElement.id == 'oauth_yes'){
t.style.display = '';
var temp = document.getElementByClass('oauth_class');
temp.style.display = ''
//email.setAttribute('type','email');
t.style.visibility = 'visible';
}else{
t.style.display = 'none';
//email.setAttribute('type','text');
t.style.visibility = 'hidden';
t.style.visibility = 'hidden';

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:16:03.033

就像是

> 如果（t.style.display == '无'）

在你的验证？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:19:55.547

```
function chk_oauth(objForm)
   {
if(document.getElementById('oauth_div').style.display=='none')
return;
  var user = objForm.user.value;
  var pass = objForm.password.value;

  if(user =="")
  {
        alert("Type email");
        return false;
  }

  if(pass =="")
  {
        alert("Type pasword");
        return false;
  }

  if (!checkRadio(objForm,"oauth_option"))
  {
        alert("Please select option");
        return false;
  }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T11:36:34.180

只需检查 div 的“可见性”属性。

在您的情况下，您可以使用

```
 document.getElementById("oauth_div").style.visibility == "visible" 
```

但是请注意，这将适用于您的情况，因为我已经检查了 div 是如何隐藏的。这并不适用于所有情况，因为可以通过多种方式隐藏 div，例如将“display”属性设置为 none，或将 opacity 设置为 0。为了使其正常工作，您应该检查这些，使用就像是

```
function isVisible(elem) {
var cmpstyle = window.getComputedStyle(elem,null);
if (parseFloat(cmpstyle.opacity) > 0 &&
cmpstyle.visibility != 'hidden' &&
cmpstyle.display != 'none') {
return true;
} else return false;
} 
```

所以：

```
function chk_oauth(objForm)
{
    var oauth_div = document.getElementById("oauth_div");

if (isVisible(oauth_div)) {
                var user = objForm.user.value;
          var pass = objForm.password.value;

          if(user =="")
          {
                alert("Type email");
                return false;
          }

          if(pass =="")
          {
                alert("Type pasword");
                return false;
          }

          if (!checkRadio(objForm,"oauth_option"))
          {
                alert("Please select option");
                return false;
          }
} else { /*Do whatever you want to happen when div is hidden*/ }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T11:22:53.817

我会从文档中删除相应的输入字段，以防止验证这些字段。为什么不能使用单选按钮中的信息来确定是否必须检查输入字段？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T11:24:40.333

试试这个

```
function chk_oauth(objForm)
   {
  var user = objForm.user.value;
  var pass = objForm.password.value;

    if(document.getElementById("oauth_div").style.visibility != "none"){
      if(user =="")
      {
            alert("Type email");
            return false;
      }

      if(pass =="")
      {
            alert("Type pasword");
            return false;
      }
    }
      if (!checkRadio(objForm,"oauth_option"))
      {
            alert("Please select option");
            return false;
      }
      } 
```

# php - 来自两个表循环多次的结果集

> ID：11933141
> 
> 赞同：1
> 
> 时间：2012-08-13T11:11:13.343
> 
> 标签：php, mysql

我有 3 个要从中提取数据的表

表 1：assignment_status

```
primary_key   
test_group_id | s_id | date_taken | status
q1            | 123  | 2012-08-13 | completed 
```

表 2：question_bank

```
 foreign key    unique key |
 group_id     | q_id       | question
 q1           | 1          | What is your name?
 q1           | 2          | Where were you born? 
```

表 3：assignment_answers

```
foreign key  
g_id         | q_id | s_id  | s_answer
q1           | 1    |  123  | Mark Johnson
q1           | 2    |  123  | Florida 
```

现在我正在尝试显示相应问题的答案。我面临的问题是返回的结果集循环多次。

例如，如果`question_bank`和`assignment_answers`有 2 条记录，则结果集有 4 条记录；如果两者都有 4 条记录，则结果集有 16 条记录。所以这个数字是平方的。这使我确定我以错误的方式拉动它。以下是我正在使用的查询：

```
SELECT 
    * 
FROM 
    assignment_status s, 
    question_bank b, 
    assignment_answers a
WHERE 
    s.test_group_id = b.group_id = a.g_id = 'q1' 
```

我也试过

```
SELECT 
    * 
FROM 
    question_bank b, 
    assignment_answers a
WHERE 
    b.group_id = a.g_id
    AND b.group_id = 'q1'
    AND a.g_id = 'q1' 
```

两个查询都导致重复相同的多行。

有什么建议、想法、想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:25:54.720

我认为您缺少 question_bank b, assignment_answers a 的条件

```
SELECT 
    * 
FROM 
    assignment_status s, 
    question_bank b, 
    assignment_answers a
WHERE 
    s.test_group_id = b.group_id = a.g_id = 'q1' AND b.q_id = a_q.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:37:42.733

您的问题/答案由 2 列标识，因此在连接表格时应使用它们。这样的事情可能会奏效：

```
SELECT as.s_id, as.date_taken, as.status,
       qb.group_id, qb.q_id, qb.question,
       aa.s_answer
  FROM assignment_status as
  JOIN question_bank qb ON as.test_group_id = qb.group_id
  JOIN assignment_answers aa ON aa.g_id = qb.group_id AND aa.q_id = qb.q_id
 WHERE as.test_group_id = 'q1'; 
```

注意：您的表中有不同名称的列，例如`test_group_id <--> group_id <--> g_id`. 这被认为是一种不好的风格，因为当您的架构将增长到数百个表时，将很难编写查询。因此，在不同的表中使用通用的命名模式和类似的名称列是一个好习惯。

# java - 使用 HashMap 缓存不同会话的数据

> ID：11933142
> 
> 赞同：0
> 
> 时间：2012-08-13T11:11:16.193
> 
> 标签：java

HashMap 数据是在应用程序级别还是会话级别？我想缓存用户特定的数据？因此，如果同时从两个不同的登录访问该缓存，它应该始终返回当前用户（会话）的数据。HashMap 是好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:17:54.087

HashMap 只是一个集合。你需要把它放在一个上下文中。您使用什么应用程序框架？

我建议使用随时可用的缓存。它有生存时间和驱逐政策。试试 EHCache 或 Hazelcast。

# ios - 从 webview 中的 initWithString 缓存 iphone 图像

> ID：11933146
> 
> 赞同：0
> 
> 时间：2012-08-13T11:11:36.730
> 
> 标签：ios, uiwebview, sdwebimage

我正在从 SBJson 解析器解析 json。我正在使用 SDWebIamge 进行图像缓存。我的 JSON 数据有一个标签，即“内容”，它在文本之间有文本 + 图像链接。例如像这样的东西

```
<p>This is sample text.<\/p>\n<p><a href=\"http:\/\/xyz.com\/08\/15.jpg\"><img class=\"aligncenter size-full wp-image-1273\" title=\"15\" src=\"http:\/\/xyz.com\/08\/15.jpg\" alt=\"\" width=\"422\" height=\"720\" \/><\/a><\/p>\n<p><a href=\"http:\/\/xyz.com\/08\/16.jpg\"><img class=\"aligncenter size-full wp-image-1274\" title=\"16\" src=\"http:\/\/xyz.com\/08\/16.jpg\" alt=\"\" width=\"680\" height=\"1024\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n 
```

我解析并存储在我的 NSString 变量中。然后我有一个 webview，我从这个 NSString 加载

```
 NSString *htmlString = [[NSString alloc] initWithString:myObj.Content]; 
```

默认情况下，它会加载文本并获取链接图像，正如我们都知道的 Web 视图一样。我正在将此 JSON 数据保存到文件中以供离线查看，这要归功于 SDWebimage。但我的问题是当我将保存内容加载到webview它只显示文本没有图像，因为这些在我加载的NSString链接中没有图像兑现。那么我如何在我的webview中缓存图像，以便下次我从字符串加载我的webview时，它将显示来自链接中的图像我的 NSString 数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:23:24.610

您可以使用现有的实现来执行此操作 - [ASIWebPageRequest](http://allseeing-i.com/ASIHTTPRequest/ASIWebPageRequest)或[ProxyingUIWebView](https://github.com/pokeb/ProxyingUIWebView)之类的东西应该可以解决问题。

或者，您可以尝试自己实现这一点。一种选择类似于以下内容：

1.  解析 HTML 字符串并检测任何`img`标签及其`src`属性
2.  下载并存储检测到的任何图像
3.  `img`通过修改HTML 字符串中标签中图像的路径，显示存储的（下载的图像）代替在线原件。

请注意，这远非最佳解决方案，并且只是一种可能实现的示例。

# java - 使用 Jsch 在远程 EC2 实例上创建文件夹

> ID：11933148
> 
> 赞同：1
> 
> 时间：2012-08-13T11:11:43.473
> 
> 标签：java, ssh, amazon-ec2, jsch

我想从另一个 EC2 实例在远程 EC2 实例上创建一个文件夹，然后也将一些数据复制到其中。

我尝试使用 JSch 并传递命令来创建文件夹，`sudo mkdir /data`但我得到的错误是`sudo: sorry, you must have a tty to run sudo`。如果没有 sudo，我也无法创建文件夹。我尝试使用`((ChannelExec) channel).setPty(true)`并通过使用它可以创建文件夹，但之后我无法复制任何数据，甚至无法从命令行 SSH EC2 实例。（如果我手动创建文件夹，则复制数据成功完成）。有人可以指导我应该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:11:47.460

I am not familiar with JSch. But if you have root access, you can update your sudoers configuration file to get around this. Add the following line to /etc/sudoers

```
Defaults:USERNAME_HERE !requiretty 
```

Maybe someone else can elaborate on whether this is a bad idea or not, that's beyond the scope of my knowledge, but I'd love to know more?

I only use this approcah in one specific situation. We have a cronjob that backs up a cluster of remote servers via rsync, but for rsync to run successfully, it needs sudo privileges.

To get around this I did the following-

1.  Created a user "backupuser" - On both servers local & remote
2.  Added the following two lines to /etc/sudoers - Only needed on the server you want to grant sudo privileges to the user on. In our case, only on the remote server.

    ```
    backupuser ALL = NOPASSWD: /usr/bin/rsync
    DEFAULTS:backupuser !requiretty 
    ```

Adding these two lines grants the user, 'backupuser' sudo privileges for rsync command without the need to enter a password and without the required tty connection.

Here's how it works-

The first line breaks down into two parts.

```
USER SPECIFICATION OPTION_TAG (: CONDITIONS(opt)) 
```

1.  USER SPECIFICATION - this sets the user that these options apply(s) too.

    ```
    backupuser 
    ```

2.  OPTION_TAG - the tag for the option you what to grant. In this case, the user is granted sudo privileges without having the enter a password. (see ***man sudoers*** for a list of tags available)

    ```
    ALL = NOPASSWD 
    ```

3.  CONDITIONS - You also have the option to place conditions on when to grant sudo privileges. In this case, the user only has sudo privileges to run the rsync command.

    ```
    : /usr/bin/rsync 
    ```

The second line, overrides the default requirement of the sudo command that you need a terminal connection to run sudo (tty requirement). And it grants this privilege only to the user account 'backupuser'. (See ***man sudoers*** for the other DEFAULTS)

```
DEFAULTS:backupuser !requiretty 
```

Hope this helps answer your question. I know it went on a bit of a tangent, but I wanted to give a full explanation. For more info you can also checkout ***man sudo***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:13:08.320

下面的例子怎么样？

```
http://www.jcraft.com/jsch/examples/Sudo.java.html 
```

# android - 您请求的项目无法购买

> ID：11933149
> 
> 赞同：3
> 
> 时间：2012-08-13T11:11:51.617
> 
> 标签：android, android-billing

我正在尝试在 android 应用程序中测试订阅。我以地牢为例。我上传了未发布的 apk，但订阅项目已发布。我在不是开发人员帐户的开发控制台中添加了新的测试帐户（gmail）。我将手机重置为出厂并添加了测试帐户。我安装了签名的 apk（与上传的版本相同）。

当我尝试购买时，我得到“您请求的项目不可购买”，但我在我请求的背景项目中看到。

一些想法这里可能有什么问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:16:29.423

当我测试应用内计费时，同样的事情发生在我身上，除了实际发布应用程序之外没有其他方法可以克服它。一旦应用程序“复制”到谷歌服务器（这需要几个小时，在此期间我尝试购买任何东西时收到另一个模糊的错误消息），购买订阅工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:24:40.213

使用此链接并参考表 1。我也遇到了这个问题。[http://developer.android.com/guide/google/play/billing/billing_testing.html#billing-testing-static](http://developer.android.com/guide/google/play/billing/billing_testing.html#billing-testing-static)

看看那张桌子，你就会知道你的桌子出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:04:14.733

我有同样的问题。将 APK 状态从 unpublished 更改为 Activate（在 APK 文件选项卡中）并等待 1 小时左右，即可购买产品 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T18:21:47.607

确保将签名的 APK 上传到开发者控制台。

确保在您的设备上安装签名的 APK，而不是在调试器中启动应用程序。

确保在您的开发者控制台中创建一个测试帐户。

确保使用您的测试帐户登录您的设备。

确保在您的开发者控制台中创建应用计费，最后从控制台激活该项目！！！（这是在完全遵循谷歌教程后得到我的那个）

# nullpointerexception - JavaFX 全局场景变量意外更改为 null

> ID：11933150
> 
> 赞同：1
> 
> 时间：2012-08-13T11:11:54.070
> 
> 标签：nullpointerexception, global-variables, javafx-2, fxml

我想在 javaFX 2 中创建一个应用程序，它作为一个较小的登录窗口打开，然后，当您输入正确的数据时，它会将您带到更大的主窗口。两者都是用 fxml 设计的，事件在 java 代码中处理。

是的，我知道，它与示例中的应用程序几乎相同，我已经尝试做我想做的事情并且它在那里工作。

现在，当我在我的项目中做同样的事情时，当我想更改阶段的值时遇到了问题。

正如你在下面的代码中看到的，我有一个全局变量，我在 start 方法中设置了 primaryStage 的值。就像测试一样，我在 start 方法结束时将其打印出来并设置了值。

然后，当我在单击按钮时尝试使用它（方法 buttonClick）时，阶段变量的值为 null，因此我不能用它来调整窗口大小或其他任何东西。

**我的问题是，尽管我没有使用更改两个打印件之间的任何内容，但为什么要重置阶段变量值？**

*此代码是我尝试过的示例，我刚刚删除了所有对于理解我的应用程序如何工作并不重要的代码。*

```
public class App extends Application {

    private Stage stage;
    @FXML
    private AnchorPane pane;

    @Override
    public void start(Stage primaryStage) {
        try {
            stage = primaryStage; // Set the value of primaryStage to stage
            primaryStage.setScene(new Scene(openScene("Login"))); // Load Login window
            primaryStage.show(); // Show the scene
        } catch (IOException ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println(stage);// <-- Here it has the value of primaryStage obviously
    }

    @FXML
    void buttonClick(ActionEvent event) throws IOException {
    // Note that even if I try to print here, the value of stage is still
    // null, so the code doesn't affect it
    // Also, this loads what I want, I just can't change the size.
        try{
           pane.getChildren().clear(); // Clear currently displayed content
           pane.getChildren().add(openScene("MainScene")); // Display new content
           System.out.println(stage); // <-- Here, output is null, but I don't know why
           stage.setWidth(500); // This line throws error because stage = null
        } catch (IOException ex) {
           Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }

    }  

    public Parent openScene(String name) throws IOException {
        //Code from FXML login example
        Parent parent = (Parent) FXMLLoader.load(PrijavnoOkno.class.getResource(name
                + ".fxml"), null, new JavaFXBuilderFactory());
        return parent;
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:20:29.077

虽然不清楚 buttonClick 操作方法是由谁以及在何处调用的，但我认为它是登录按钮的操作`Login.fxml`。此外，我假设您已将`App`(aka `PrijavnoOkno`) 定义为此 Login.fxml 的控制器。
根据这些假设，App.class 有 2 个实例：
一个是在应用程序启动时创建的，并且在`start()`方法中为 stage 变量分配了主要阶段，
另一个由 FXMLLoader 创建的实例（在加载 Login.fxml 时），其中未分配阶段变量，因此未分配 NPE。
一种正确的方法是，为 Login.fxml 创建一个新的 Controller 类，在其中调用您的登录操作。从那里访问全局舞台（通过在 App 中使其成为静态）。

# c# - 数据集未填充

> ID：11933159
> 
> 赞同：0
> 
> 时间：2012-08-13T11:12:23.013
> 
> 标签：c#, asp.net, ado.net

我在 ASP.NET 页面中有一个简单的搜索页面，我在其中填充基于 SQL 查询的数据集。

```
 con.Open();    
            cmd.ExecuteNonQuery();
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            DataSet ds = new DataSet();
            if (ds.Tables.Count > 0)
            {
                if (ds.Tables[0].Rows.Count > 0)
                {
                    da.Fill(ds, "Emp");
                    GridView1.DataSource = ds;
                    GridView1.DataBind();
                }

            }
            else
            {
                Label2.Text = "Data not found";

            }
            con.Close(); 
```

但是即使搜索项存在，我也得到这个结果为“找不到数据”。为什么它不执行 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:25:14.733

正如其他人建议的那样，您需要像这样移动一行代码：

```
 con.Open();    
        cmd.ExecuteNonQuery();
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        DataSet ds = new DataSet();
        da.Fill(ds, "Emp");   // SEE THIS LINE!
        if (ds.Tables.Count > 0)
        {
            if (ds.Tables[0].Rows.Count > 0)
            {

                GridView1.DataSource = ds;
                GridView1.DataBind();
                Label2.Text = string.Empty;
            }

        }
        else
        {
            GridView1.DataSource = null;
            GridView1.DataBind();
            Label2.Text = "Data not found";

        }
        con.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:15:20.700

你不见了

```
dataadapter.fill(ds) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:15:46.940

它可能不起作用，因为您在尝试填充数据集之前已经执行了查询。尝试删除 cmd.ExecuteNonQuery();。此外，非查询命令不返回任何结果。确保您的查询确实返回结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:47:57.817

嗨，请试试这个它为我的 gridview 工作

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConectionString"].ConnectionString);

            SqlCommand cmd = new SqlCommand("Select * from Tbl_Employee", con);

            SqlDataAdapter da = new SqlDataAdapter(cmd);

            DataSet ds = new DataSet();
            da.Fill(ds);
            if (ds.Tables.Count > 0)
            {
                if (ds.Tables[0].Rows.Count > 0)
                {
                    gv1.DataSource = ds.Tables[0];
                    gv1.DataBind();
                }
            } 
```

# sql-server-2008 - 大量插入索引较多的子项 (Sql Server 2008)

> ID：11933163
> 
> 赞同：3
> 
> 时间：2012-08-13T11:12:34.493
> 
> 标签：sql-server-2008, views, bulkinsert, partitioning, indexing

我正在尝试为需要对读者提供高可用性的数据库创建数据导入机制，同时按计划提供不规则的大量新数据负载。

新数据仅涉及三个表，其中添加了新数据集以及它们引用的许多新数据集项以及引用这些的一些数据集项元数据行。数据集可能有数以万计的数据集项。

数据集项在多个列组合上被大量索引，绝大多数（但不是全部）读取包括 where 子句中的数据集 id。由于索引，数据插入现在太慢而无法跟上流入但由于这些索引的读者优先，我无法删除主表上的索引，但需要处理副本。

因此，我需要某种工作表，在快速切换它成为查询表/视图的一部分之前，我需要复制、插入和重新索引。问题是如何快速执行该切换？

我已经研究过通过一系列数据集 id 对数据集项目表进行分区，这是一个外键，但是因为这不是主键的一部分，所以 SQL Server 似乎并不那么容易。我无法使用易于索引的更新版本切换旧数据分区。

不同的文章建议使用分区、快照隔离和分区视图，但没有一个直接回答这种情况，要么是关于批量加载和归档旧数据（按日​​期分区），要么是不考虑索引的简单事务隔离。

有没有直接解决这个看似常见问题的例子？

**当将新数据批量加载到大型索引表中时，人们有哪些不同的策略来真正最大限度地减少禁用索引的时间？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:56:16.257

请注意，对列进行分区要求该列是聚集索引键的一部分，而不是主键的一部分。两者是独立的。

尽管如此，分区对您可以在表上执行的操作施加了很多限制。例如，仅当所有索引都对齐并且没有外键引用正在修改的表时，切换才有效。

如果您可以在所有这些限制下使用分区，这可能是最好的方法。分区视图为您提供了更大的灵活性，但也有类似的限制：所有索引显然都是对齐的，并且传入的 FK 是不可能的。

对数据进行分区并不容易。它不是一个点击向导并完成的解决方案。这组权衡非常复杂。

# wpf - WPF IDataErrorInfo 图标位置正确

> ID：11933165
> 
> 赞同：0
> 
> 时间：2012-08-13T11:12:39.530
> 
> 标签：wpf, idataerrorinfo

我有一个如下的验证模板。但是我们可以在控件内部或控件左侧设置错误图标。你能告诉我如何让它在控件的右侧闪烁（在文本框和右侧）

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

                >

<Storyboard x:Key="FlashErrorIcon">
    <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" 
                                   Storyboard.TargetProperty="(UIElement.Visibility)">
        <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Hidden}"/>
        <DiscreteObjectKeyFrame KeyTime="00:00:00.2000000" Value="{x:Static Visibility.Visible}"/>
        <DiscreteObjectKeyFrame KeyTime="00:00:00.4000000" Value="{x:Static Visibility.Hidden}"/>
        <DiscreteObjectKeyFrame KeyTime="00:00:00.6000000" Value="{x:Static Visibility.Visible}"/>
        <DiscreteObjectKeyFrame KeyTime="00:00:00.8000000" Value="{x:Static Visibility.Hidden}"/>
        <DiscreteObjectKeyFrame KeyTime="00:00:01" Value="{x:Static Visibility.Visible}"/>
    </ObjectAnimationUsingKeyFrames>
</Storyboard>
<Style x:Key="myErrorTemplate" TargetType="Control">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <Ellipse DockPanel.Dock="Left" 
                             ToolTip="{Binding ElementName=myTextbox, 
                                 Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                             Width="15" Height="15" 
                             Margin="-25,0,0,0"
                             StrokeThickness="1" Fill="Red" >
                        <Ellipse.Stroke>
                            <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                <GradientStop Color="#FFFA0404" Offset="0"/>
                                <GradientStop Color="#FFC9C7C7" Offset="1"/>
                            </LinearGradientBrush>
                        </Ellipse.Stroke>
                        <Ellipse.Triggers>
                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                <BeginStoryboard Storyboard="{StaticResource FlashErrorIcon}"/>
                            </EventTrigger>
                        </Ellipse.Triggers>
                    </Ellipse>
                    <TextBlock DockPanel.Dock="Left" 
                            ToolTip="{Binding ElementName=myControl, 
                                 Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                            Foreground="White"
                            FontSize="11pt" 
                            Margin="-15,5,0,0" FontWeight="Bold">!
                        <TextBlock.Triggers>
                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                <BeginStoryboard Storyboard="{StaticResource FlashErrorIcon}"/>
                            </EventTrigger>
                        </TextBlock.Triggers>
                    </TextBlock>
                    <Border BorderBrush="Red" BorderThickness="1">
                        <AdornedElementPlaceholder Name="myControl"/>
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip"
                    Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                    Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style>
<Style TargetType="TextBox" BasedOn="{StaticResource myErrorTemplate}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:16:37.557

通过修改模板来更改错误图标的位置。

# c# - LINQ 语句仅在存在多个的 DataTable 上产生一个结果

> ID：11933168
> 
> 赞同：0
> 
> 时间：2012-08-13T11:12:49.710
> 
> 标签：c#, linq

我有一个`DataTable`从数据库中填充的，如下所示：

```
SPName      SName   Row  text
p_obj_prod1 dbo     1    A
p_obj_prod1 dbo     1    B
p_obj_prod1 dbo     1    C
p_obj_prod2 dbo     1    D
p_obj_prod2 dbo     1    E
p_rpt_prod3 dbo     1    F
p_rpt_prod3 dbo     1    G
p_rpt_prod3 dbo     1    H 
```

我有以下代码将处理这些数据：

```
foreach (var row in procedureData.Tables[0].AsEnumerable()
    .Select(dr => new { Schema = dr["SName"], Procedure = dr["SPName"] })
    .Distinct())
{
     //DO STUFF
     foreach (string procedureText in procedureData.Tables[0].AsEnumerable()
         .Where(dr => dr["SPName"] == row.Procedure).Select(dr => dr["text"]))
     {
          //DO MORE STUFF
     }  
     //DO EVEN MORE STUFF
 } 
```

在这种情况下，我希望外部 foreach 循环迭代 3 次，并且确实如此。我还希望内部 foreach 循环将在第一次外部循环迭代中迭代 3 次，第二次迭代 2 次，第三次迭代 3 次。然而，内部循环只有一个值（序列中的第一个）。

我对 LINQ 并不陌生，并且创建了比这更复杂的查询，但这确实让我很难理解内部循环没有所有预期结果的原因。我想我在第二个循环的 LINQ 查询中犯了一个错误，但对我来说似乎很好。

任何人都可以阐明可能是什么问题吗？

非常感谢。

**更新**

刚刚意识到我犯的错误以及为什么内部循环只有一个值。这是因为它是在进行参考比较，而不是对 DataTable 的“SPName”列进行值比较。

将内部循环的代码更改为以下代码可以解决问题，但是我会保留`GroupBy`我喜欢的版本！

```
foreach (string procedureText in procedureData.Tables[0].AsEnumerable()
         .Where(dr => dr["SPName"].ToString() == row.Procedure.ToString())
         .Select(dr => dr["text"]))
     { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:23:05.130

为什么不只使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb549393.aspx)：

```
var grouped = procedureData.Tables[0]
                           .AsEnumerable()
                           .GroupBy(dr=>new 
                           { 
                                Schema = dr["SName"], 
                                Procedure = dr["SPName"] 
                           });

foreach(var g in grouped)
{
    //DO STUFF
    foreach(string procedureText in g.Select(dr => dr["text"]))
    {
        //DO MORE STUFF
    }
    //DO EVEN MORE STUFF
} 
```

* * *

否则，我看不出您的代码有什么问题。这对我来说可以。

# angularjs - AngularJS 指令不起作用

> ID：11933169
> 
> 赞同：7
> 
> 时间：2012-08-13T11:12:51.697
> 
> 标签：angularjs, angularjs-directive

请在我写的指令下面找到，

```
angular.module('netVogue.directives', []).
  directive('set-First-Active', function() {
      return function(scope, element, attrs){
          alert('sample');
          element.addClass("active");     
      };
  }); 
```

我已通过以下方式将此指令添加到我的模块中，

```
angular.module('netVogue', ['netVogue.filters', 'netVogue.services', 'netVogue.directives']); 
```

我在我的模板中使用了这个指令，格式如下，

```
<div class="item" ng-repeat="viewPrintcampaign in viewPrintcampaigns" ng-init="first=$first" set-First-Active> 
</div> 
```

但是，我既没有看到任何警报响应，也没有添加课程。有人可以帮我吗？由于某些依赖性，我不想使用“ng-class”，但想为 ng-repeat 的第一个元素添加 class='active'。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-13T12:25:51.387

声明指令时应该有驼峰式名称 ( `setFirstActive`)。

请参阅[关于指令的开发人员指南](http://docs.angularjs.org/guide/directive)。

> 指令具有驼峰式名称，例如“ngBind”。可以通过使用这些特殊字符 :、- 或 _ 将驼峰式名称转换为蛇形大小写来调用该指令。可选地，该指令可以以 x- 或 data- 为前缀，以使其符合 HTML 验证器。以下是一些可能的指令名称的列表：ng:bind、ng-bind、ng_bind、x-ng-bind 和 data-ng-bind。

# objective-c - 如何向 UITableView 显示空值？如果在 iphone sdk 中的 web 服务响应中找不到标签

> ID：11933172
> 
> 赞同：1
> 
> 时间：2012-08-13T11:12:53.610
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, nsxmlparser

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    if( [elementName isEqualToString:@"PublicBusinessName"])
    {
    boolListofareasdata=YES;
    }
    else if( [elementName isEqualToString:@"ProfessionName"])
    {
        boolListofareasdata1=YES;
    }
    else if( [elementName isEqualToString:@"PublicContactEmail"])
    {
        boolListofareasdata2=YES;
    }
    else if( [elementName isEqualToString:@"PublicBusinessURL"])
    {
        boolListofareasdata3=YES;
    }
    else if( [elementName isEqualToString:@"BrandLogoName"])
    {
        boolListofareasdata4=YES;
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (boolListofareasdata)
    {
        [arrareasdata addObject:string];

        NSLog(@"NAME...............%@",arrareasdata);
    }
    else if (boolListofareasdata1)
    {
        [arrareasdata1 addObject:string];

        NSLog(@"DESIGN..............%@",arrareasdata1);
    }
    else if (boolListofareasdata2)
    {
        [arrareasdata2 addObject:string];

        NSLog(@"DESIGN..............%@",arrareasdata1);
    }
    else if (boolListofareasdata3)
    {
        [arrareasdata3 addObject:string];

        NSLog(@"WEB....................%@",arrareasdata3);
    }
    else if (boolListofareasdata4)
    {
        [arrareasdata4 addObject:str];

        NSLog(@"WEB....................%@",arrareasdata4);
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:   (NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"PublicBusinessName"])
    {
        boolListofareasdata=NO; 
    }
    else if ([elementName isEqualToString:@"ProfessionName"])
    {
        boolListofareasdata1=NO; 
    }
    else if( [elementName isEqualToString:@"PublicContactEmail"])
    {
        boolListofareasdata2=NO;
    }
    else if ([elementName isEqualToString:@"PublicBusinessURL"])
    {
        boolListofareasdata3=NO; 
    }
    else if ([elementName isEqualToString:@"BrandLogoName"])
    {
        boolListofareasdata4=NO; 
    }
}

- (void)parserDidEndDocument:(NSXMLParser *)parser{
    [tableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{   
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrareasdata3 count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath
{

    static NSString *CellIdentifier = @"CustomCell";

    CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {        
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];

        for (id currentObject in topLevelObjects)
        {
            if ([currentObject isKindOfClass:[UITableViewCell class]])
            {
                cell =  (CustomCell *) currentObject;
                break;
            }
        }
    }

    NSLog(@"TABLE VIEW CONTROLLER........................");
    cell.nameLabel.text = [arrareasdata objectAtIndex:indexPath.row];
    cell.designLabel.text = [arrareasdata1 objectAtIndex:indexPath.row];
    cell.emailLabel.text = [arrareasdata2 objectAtIndex:indexPath.row];
    cell.webLabel.text = [arrareasdata3 objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:28:06.390

在 uitableviewcell 中添加空值，如下所示：

```
 NSString *strName = [arrareasdata objectAtIndex:indexPath.row];
 if((strName.length > 0)  
 {
   cell.nameLabel.text = strName;
 }
 else
 {
    cell.nameLabel.text = @"";
 }
 //same logic for designLabel,emailLabel,webLabel in which u will fill your data 
```

# javascript - 如何限制 Bootstrap Datepicker 中的可选日期范围？

> ID：11933173
> 
> 赞同：46
> 
> 时间：2012-08-13T11:12:57.980
> 
> 标签：javascript, twitter-bootstrap, datepicker, bootstrap-datepicker

我需要使用 datepicker，它为我提供了限制可选日期的选项。我们一直在使用 jQuery UI，它使用 minDate、maxDate 选项来支持它。

```
$("#id_date").datepicker({minDate: +1, maxDate: '+1M +10D'}); 
```

最近我们开始使用 Twitter Bootstrap 作为我们的样式。显然，Twitter Bootstrap 与 jQuery UI 样式不兼容。所以我尝试使用[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)上提供的引导兼容日期选择器之一。

不幸的是，上面的插件不像 jQuery UI 的 datepicker 那样可配置。谁能帮我限制新日期选择器中的可选日期范围。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-08-27T14:49:43.643

Bootstrap 日期选择器能够设置日期范围。但它在初始版本/主分支中不可用。在那里将分支检查为“范围”（或仅在[https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)中查看），您只需使用 startDate 和 endDate 即可。

例子：

```
$('#datepicker').datepicker({
    startDate: '-2m',
    endDate: '+2d'
}); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-08-15T09:19:19.257

With selectable date ranges you might want to use something like this. My solution prevents selecting #from_date bigger than #to_date and changes #to_date startDate every time when user selects new date in #from_date box:

[http://bootply.com/74352](http://bootply.com/74352)

JS file:

```
var startDate = new Date('01/01/2012');
var FromEndDate = new Date();
var ToEndDate = new Date();

ToEndDate.setDate(ToEndDate.getDate()+365);

$('.from_date').datepicker({

    weekStart: 1,
    startDate: '01/01/2012',
    endDate: FromEndDate, 
    autoclose: true
})
    .on('changeDate', function(selected){
        startDate = new Date(selected.date.valueOf());
        startDate.setDate(startDate.getDate(new Date(selected.date.valueOf())));
        $('.to_date').datepicker('setStartDate', startDate);
    }); 
$('.to_date')
    .datepicker({

        weekStart: 1,
        startDate: startDate,
        endDate: ToEndDate,
        autoclose: true
    })
    .on('changeDate', function(selected){
        FromEndDate = new Date(selected.date.valueOf());
        FromEndDate.setDate(FromEndDate.getDate(new Date(selected.date.valueOf())));
        $('.from_date').datepicker('setEndDate', FromEndDate);
    }); 
```

HTML:

```
<input class="from_date" placeholder="Select start date" contenteditable="false" type="text">
<input class="to_date" placeholder="Select end date" contenteditable="false" type="text" 
```

And do not forget to include bootstrap datepicker.js and .css files aswell.

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-04-17T15:43:29.010

上面的例子可以简化一点。此外，您可以从键盘手动输入日期，而不是仅通过 datepicker 选择它。清除值时，您还需要处理*“on clearDate”*操作以删除 startDate/endDate 边界：

JS文件：

```
$(".from_date").datepicker({
    format: 'yyyy-mm-dd',
    autoclose: true,
}).on('changeDate', function (selected) {
    var startDate = new Date(selected.date.valueOf());
    $('.to_date').datepicker('setStartDate', startDate);
}).on('clearDate', function (selected) {
    $('.to_date').datepicker('setStartDate', null);
});

$(".to_date").datepicker({
    format: 'yyyy-mm-dd',
    autoclose: true,
}).on('changeDate', function (selected) {
    var endDate = new Date(selected.date.valueOf());
    $('.from_date').datepicker('setEndDate', endDate);
}).on('clearDate', function (selected) {
    $('.from_date').datepicker('setEndDate', null);
}); 
```

HTML：

```
<input class="from_date" placeholder="Select start date" type="text" name="from_date">
<input class="to_date" placeholder="Select end date" type="text" name="to_date"> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-01-04T11:19:33.423

大多数答案和解释都不是为了解释什么是有效的`endDate`or字符串`startDate`。Danny 给了我们两个有用的例子。

```
$('#datepicker').datepicker({
    startDate: '-2m',
    endDate: '+2d'
}); 
```

但是为什么？让我们看一下源代码`bootstrap-datetimepicker.js`。有一些代码从第 1343 行开始告诉我们它是如何工作的。

```
if (/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(date)) {
            var part_re = /([-+]\d+)([dmwy])/,
                parts = date.match(/([-+]\d+)([dmwy])/g),
                part, dir;
            date = new Date();
            for (var i = 0; i < parts.length; i++) {
                part = part_re.exec(parts[i]);
                dir = parseInt(part[1]);
                switch (part[2]) {
                    case 'd':
                        date.setUTCDate(date.getUTCDate() + dir);
                        break;
                    case 'm':
                        date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);
                        break;
                    case 'w':
                        date.setUTCDate(date.getUTCDate() + dir * 7);
                        break;
                    case 'y':
                        date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);
                        break;
                }
            }
            return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), 0);
        } 
```

有四种表达方式。

*   `w`意味着星期
*   `m`表示月份
*   `y`表示年份
*   `d`意味着一天

看正则表达式`^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$`。您可以做的不止这些`-0d`或`+1m`.

像 一样努力尝试`startDate:'+1y,-2m,+0d,-1w'`。分隔符`,`可能是其中之一`[\f\n\r\t\v,]`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-18T14:52:32.877

另一种可能性是使用带有`data`属性的选项，如下所示（至少 1 周前的日期）：

```
<input class='datepicker' data-date-start-date="-1w"> 
```

更多信息：[http ://bootstrap-datepicker.readthedocs.io/en/latest/options.html](http://bootstrap-datepicker.readthedocs.io/en/latest/options.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-26T11:02:19.770

我正在使用 v3.1.3，我不得不`data('DateTimePicker')`像这样使用

```
var fromE = $( "#" + fromInput );
var toE = $( "#" + toInput );
$('.form-datepicker').datetimepicker(dtOpts);

$('.form-datepicker').on('change', function(e){
   var isTo = $(this).attr('name') === 'to';

   $( "#" + ( isTo ? fromInput : toInput  ) )
      .data('DateTimePicker')[ isTo ? 'setMaxDate' : 'setMinDate' ](moment($(this).val(), 'DD/MM/YYYY'))
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-01T19:53:42.513

```
<script type="text/javascript"> 
```

$(document).ready( function() { $("#submitdate").datepicker( { minDate: 0, maxDate: 0,

```
 dateFormat: "yy-mm-dd",

}); 
```

# objective-c - 触摸图像并恢复触摸点的坐标

> ID：11933175
> 
> 赞同：0
> 
> 时间：2012-08-13T11:13:13.900
> 
> 标签：objective-c, ios, cocoa-touch, ipad, xcode4

我正在开发一个 iPad 应用程序，这就是我的问题：我制定了一个算法来了解一个点是否在一个多边形内，在一个图像中。所以我需要在触摸图像时知道触摸点的坐标，然后使用这些坐标执行操作（一个 NSLog 使示例变得简单），问题是我不能在 UIImageView 上使用 IBAction，并且所以无法恢复点的坐标。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:19:06.220

我认为首先你必须制作适合你图像的多边形。然后你可以用它`touchesBegan:withEvent:`来获取触摸点的坐标，判断该点是否在多边形内部。

这是与您类似的问题。

[如何获得特定的触控区域？](https://stackoverflow.com/questions/8450967/how-to-get-particular-touch-area)

我认为这是一个有点困难的工作，所以也许你最好使用具有碰撞判断功能的 cocos2d 库。

![图片](../Images/2bb1d2cef0dc3f8e0097ccba7b88fb6c.png)

[http://box2d.org/forum/viewtopic.php?f=9&t=7487](http://box2d.org/forum/viewtopic.php?f=9&t=7487)

但我也认为 iOS 在处理触摸方面做得很好，所以这对你来说是有益的。

# c# - 无法转换值

> ID：11933179
> 
> 赞同：0
> 
> 时间：2012-08-13T11:13:28.910
> 
> 标签：c#, asp.net

我试图转换 Id 字段以将其发送到数据库，但在数据库中，类型是 bigInt：

```
var ID_Inscricao = (Label)row.FindControl("Label1"); 
```

如何将其转换为与 bigInt 兼容的类型？我尝试过演员和转换，但都没有奏效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T11:18:05.030

您需要将标签的 Text 属性中的值转换为某种整数：

```
string labelText = ((Label)row.FindControl("Label1")).Text;
var ID_Inscricao = Convert.ToInt64(labelText); 
```

请注意，如果文本值不是数字，这可能会引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T11:14:41.327

您将不得不取得该`Text`财产并将其转换。您不能将控件强制转换为值。

*提示：*使用适当的`TryParse`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:30:57.493

这可能会帮助你，

var ID_Inscricao = (Label)row.FindControl("Label1");

var ID_Inscricao_val = parseInt(ID_Inscricao.innerHTML);

# django - 将 Dojo Grid 与 REST 结合使用 (tastypie)

> ID：11933182
> 
> 赞同：0
> 
> 时间：2012-08-13T11:13:55.310
> 
> 标签：django, json, rest, dojo, tastypie

我正在试验 Dojo，对使用 Django/tastypie 实现的 REST 服务使用 DataGrid/JsonRestStore。

似乎 JsonRestStore 期望数据以纯数组的形式到达，而 sweetpie 在包含“模式”和“对象”的结构中返回数据集。

```
{
  "meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 1}, 
  "objects": [{...}]
} 
```

所以，我需要以某种方式附加到“对象”部分。

实现这一目标的最明智的方法是什么？

*   奥文德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:30:05.860

Untested, but you might try creating a custom store that inherits from JsonRestStore and override the internal `_processResults` method. It's a two-liner in the Dojo 1.7 code base, so you can implement you own behavior quite simply.

```
_processResults: function(results, deferred){
    var count = results.objects.length;
    return {totalCount: deferred.fullLength || (deferred.request.count == count ? (deferred.request.start || 0) + count * 2 : count), items: results.objects};
} 
```

See lines 414-417 of the dojox/data/JsonRestStore.js for reference.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:26:37.807

我不知道这是否对你有帮助。[http://jayapal-d.blogspot.in/2009/08/dojo-datagrid-with-editable-cells-in.html](http://jayapal-d.blogspot.in/2009/08/dojo-datagrid-with-editable-cells-in.html)

# c++ - Mac 和不可聚焦的窗口

> ID：11933183
> 
> 赞同：0
> 
> 时间：2012-08-13T11:13:56.077
> 
> 标签：c++, macos

我正在寻找类似 WS_EX_NOACTIVATE on windows for mac tool windows 的东西。这样做只是为了防止工具窗口被激活。我实际上正在使用 Qt，但一般提示同样可以很好地将我带入正确的方向。

编辑：Qt 似乎在 mac 上使用“kFloatingWindowClass”常量。

多谢！亚历克斯

# javascript - 如何将自定义图标添加到 JqGrid 顶级工具栏按钮？

> ID：11933185
> 
> 赞同：0
> 
> 时间：2012-08-13T11:14:07.197
> 
> 标签：javascript, jquery, jquery-ui, jqgrid

我已使用[此处](https://stackoverflow.com/questions/3836241/how-do-i-add-a-custom-icon-to-a-standard-jquery-ui-theme)的信息在 IE9 中使用以下代码在 JqGrid 顶级工具栏中添加自定义按钮。

出现插入符号图标而不是图像。IE9 网络选项卡显示未发出对 Images/calendar.png 的请求。

```
 $grid.jqGrid('navButtonAdd', '#grid_toppager', {
        caption: '',
        id: "grid_mybutton",

        buttonicon: 'my-image',
        onClickButton: function () { 
            window.location =  'Report';
          }
    }); 
```

css 文件：

```
.ui-button .ui-icon.my-image { 
    background-image: url("Images/calendar.png"); 
    width: 16; 
    height: 16;  
} 

.ui-button.ui-state-hover .ui-icon.my-image { 
    background-image: url("Images/calendar.png"); 
    width: 16; 
    height: 16;  
} 
```

如何添加自定义图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:25:35.670

jQuery 样式将始终覆盖您最后应用的样式。

除了`jjay225`指出您修复参考的内容之外，将`!important`标签添加到您的图像样式中以确保始终应用它。

在下面的演示中尝试一下，删除`!important`，然后你会得到`^`，再次添加它，你会得到你的图像。

见[**演示**](http://jsfiddle.net/rmN73/1/)

没有您的完整代码，我只是使用 jQuery 在工具栏上添加了一个图标`append()`并添加了所需的 CSS。

但是，使用任何调试工具，即：FF 中的 FireBug 和 Chrome 或 IE 中的内置工具，您可以检查新图标的确切类/id 值并修复您可能遇到的任何 css 引用问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:59:04.003

你的CSS

```
.ui-button.ui-state-hover .ui-icon.my-image 
```

应该

```
 .ui-button, .ui-state-hover, .ui-icon, .my-image 
```

为什么不尝试上课

```
.my-image
{
    background-image: url("Images/calendar.png"); 
     width: 16; 
     height: 16;  
  } 
```

# android - Android 数据库 - 行为怪异？

> ID：11933193
> 
> 赞同：0
> 
> 时间：2012-08-13T11:14:28.720
> 
> 标签：android

我想在特定日期之间进行搜索。例如，从 2012 年 8 月 1 日到 2012 年 8 月 13 日。按此标准搜索会为我提供数据库中输入的值。如果我在 2012 年 8 月 2 日完成，查询返回 null ......更奇怪的是，当我选择第 10、第 11 或第 12 个日期时，它工作正常并给我结果......我疯了想知道问题出在哪里可能是调试并没有把我带到任何地方......请帮忙？

```
/**query to get the details by giving all the dates/
public Cursor getName_Intime_Outtime_Date(String fromdate,String todate)
   {
    Log.d("pavan","in side the getnameintime out time date() of visistor adapter");
   return this.db.query(DATABASE_TABLE_VISITOR,
      new String[]{KEY_NAME,KEY_CHECKIN,KEY_CHECKOUT,KEY_DATE},
      KEY_DATE + " BETWEEN ? AND ?", 
      new String[] {fromdate ,todate}, 
      null, null, null, null);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:36:59.783

谢谢你们真正研究这个......最后使用这个链接[https://groups.google.com/forum/?fromgroups#!topic/android-developers/Ey_4rBZx2t0%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/android-developers/Ey_4rBZx2t0%5B1-25%5D)中的想法解决了这个问题。 ...总结一下我所做的是获取一个日历对象，使用日历对象检索当前日期，将检索到的数据提供给一个 simpledateformat 对象并对其进行比较..这是示例代码.. .

```
int test = date_pick.getMonth()+1;
     Toast.makeText(getBaseContext(), "Date seleted month"+test+"/"+date_pick.getDayOfMonth()+"/"+date_pick.getYear(), Toast.LENGTH_LONG).show();

      Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("UTC"));  
        cal.set(Calendar.YEAR, date_pick.getYear());
        cal.set(Calendar.MONTH, test);
        cal.set(Calendar.DAY_OF_MONTH, date_pick.getDayOfMonth());

       /* retriving the yyyy mm dd values here*/
         set_year = cal.get(Calendar.YEAR);
         set_month= cal.get(Calendar.MONTH);
         set_day = cal.get(Calendar.DAY_OF_MONTH);
         Log.d("kunal","datesis "+set_year+" "+set_month+" "+set_day);
         string_date = set_year+"-"+set_month+"-"+set_day;

     SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd");
     try {
       d1 = sdf.parse(string_date);
      Log.d("kunal","date came "+d1);
      System.out.println(sdf.format(d1));      

     } catch (ParseException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
      date_txt.setText(sdf.format(d1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:25:36.827

Sqlite 没有日期的数据类型。可能您将日期作为 TEXT 保存为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
我建议您将表中的日期字段保存为 sqlLite 数据类型`INTEGER`，如 Unix 时间、自 1970 年 1 月 1 日 00:00:00 UTC 以来的秒数或`BIGINT`（以毫秒为单位的长 java 时间版本）。

这样，在`BETWEEN`与数字一起使用时，您将返回一个正确的值。

**编辑您可以使用**[日期和时间函数](http://www.sqlite.org/lang_datefunc.html)
从查询中管理您的日期字符串。这意味着您仍然可以将日期用作字符串，但是当在 sql WHERE 子句中使用 stringDates 时，使用转换函数执行转换为“DATE”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:49:47.977

试试这个，它对我有用， SELECT * FROM table_name where substr(column_name,7)||substr(column_name,4,2)||substr(column_name,1,2) between 'YYMMDD' and 'YYMMDD' ，日期应该是相反的顺序，例如：如果日期格式是 DD/MM/YY 或 DD-MM-YY，你可以使用 'YYMMDD'

# iphone - 从 RSS Feed 获取全文文章

> ID：11933194
> 
> 赞同：0
> 
> 时间：2012-08-13T11:14:29.070
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

您好，我正在使用 GDataXML 解析 RSS 提要。

然而，今天的大多数提要都没有显示全文。所以大多数时候我最终只得到了整个事情的一小部分。我在很多 iPhone 和 iPad 阅读器中都看到了这个功能——它有点像从网络上获取文章并将其放在全文中。

那么我该怎么做呢？

我的想法是这样的——根元素从文章的开头开始。所以如果根元素有 [article] 我需要去网站，获取起始 div 之间的 html 代码，然后在我的应用程序中显示它。

那么我如何获得这些 div 之间的代码呢？正则表达式还是什么？我想要例子谢谢。

最后，在获得 html 格式的完整文章后，如何显示图像？

谢谢大家和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:16:18.153

使用 MWFeedParser 你会得到 RSS 源

**标识符、标题、链接、日期、更新、摘要、内容、附件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:34:18.230

我也使用 MWFeedParser，因为它会获取提要条目的所有元素，但您是正确的，它不会对提要条目中的所有链接进行“深入研究”。

如果您想从链接中引入完整内容，以及来自附件的完整内容（例如来自播客的音频或视频），您基本上是在谈论保存网页以供离线查看。对于一个完整的 html 页面，您必须保存该 HTML，抓取整个页面并保存图像，并更改这些图像的路径，以便您能够离线加载它。保存 HTML 内容以供离线使用并不是 RSS 应用程序的真正工作，而是获取 RSS 提要的元素。获得所有要保存以供离线使用的链接后，您需要提供将获取 URL 并离线保存的代码。

我搜索`ios save html offline`并发现这篇文章似乎非常积极，使用[ASIHttpRequest](http://allseeing-i.com/ASIHTTPRequest/)离线保存页面：[https](https://stackoverflow.com/a/6698854/1072068) ://stackoverflow.com/a/6698854/1072068 。一旦您从 MWFeedParser 获得 rss 提要条目的部分内容，我建议您尝试使用类似的东西。

# vb.net - 创建视图中某个字段的默认值

> ID：11933198
> 
> 赞同：0
> 
> 时间：2012-08-13T11:14:39.720
> 
> 标签：vb.net, asp.net-mvc-3

我正在尝试为 MVC 为我创建的脚手架创建视图设置默认值。我尝试创建模型的一个实例并将其传递给视图，但它会抛出错误。

```
 Function Create(id As Integer) As ViewResult
        Dim job As Job
        job.CustomerId = id

        Return View(job)
    End Function 
```

如何让我的创建视图使用以下视图预填充参数中的 id，以便在创建新作业时自动使用该客户 ID 创建它。我的看法如下：

```
 @ModelType Laundry.Job

        @Code
            ViewData("Title") = "Create"
        End Code

        <h2>Create</h2>

        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

        @Using Html.BeginForm()
            @Html.ValidationSummary(True)
            @<fieldset>
                <legend>Job</legend>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.JobDate)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.JobDate)
                    @Html.ValidationMessageFor(Function(model) model.JobDate)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.CustomerId)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.CustomerId)
                    @Html.ValidationMessageFor(Function(model) model.CustomerId)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.BillId)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.BillId)
                    @Html.ValidationMessageFor(Function(model) model.BillId)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.JobStatus)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.JobStatus)
                    @Html.ValidationMessageFor(Function(model) model.JobStatus)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(Function(model) model.JobAmount)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(Function(model) model.JobAmount)
                    @Html.ValidationMessageFor(Function(model) model.JobAmount)
                </div>

                <p>
                    <input type="submit" value="Create" />
                </p>
            </fieldset>
        End Using

        <div>
            @Html.ActionLink("Back to List", "Index")
        </div> 
```

我什至不需要在表单上显示客户 ID，但需要使用传递给控制器​​的参数和用户选择的其余信息来创建新对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:48:10.377

**方法1：**如果要显示customerId，则可以使用以下代码...

```
<div class="editor-label">
 @Html.LabelFor(Function(model) model.CustomerId)
</div> 
```

这样，将显示 CustomerId，用户无法更改它，并且在回发完成后，此值仍作为模型的一部分存在。

**方法2：**如果你不想显示，但仍将它用于上述目的，那么使用下面写的代码......

```
<div class="editor-label">
 @Html.HiddenFor(Function(model) model.CustomerId)
</div> 
```

希望这是你想要的。

# php - 使用正则表达式在两者之间获取字符串

> ID：11933207
> 
> 赞同：0
> 
> 时间：2012-08-13T11:15:01.767
> 
> 标签：php, regex

我在 php 中有一个字符串作为

```
$str = "@113_Miscellaneous_0 = 0@,@104_documentFunction_0 = 1@"; 
```

我如何应用正则表达式，以便我可以提取 @ char 之间的字符串，以便生成的结果将是一个数组说

```
result[0] = "113_Miscellaneous_0 = 0";  
result[1] = "104_Miscellaneous_0 = 1"; 
```

@Fluffeh 感谢您编辑 @Utkanos - 尝试过这样的事情

```
$ptn = "@(.*)@";  
preg_match($ptn, $str, $matches);  
print_r($matches);  

output:
     Array
        (
            [0] => \"113_Miscellaneous_0 = 0\",\"104_documentFunction_0 = 1\"
            [1] => \"113_Miscellaneous_0 = 0\",\"104_documentFunction_0 = 1\"
        ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:20:01.813

使用非贪婪匹配，

```
preg_match_all("/@(.*?)@/", $str, $matches);
var_dump($matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:22:38.347

你可能会采取不同的方式：

```
$str = str_replace("@", "", $str);
$result = explode(",", $str); 
```

**编辑**

好吧，试试这个：

```
$ptn = "/@(,@)?/";
$str = "@113_Miscellaneous_0 = 0@,@104_documentFunction_0 = 1@";
preg_split($ptn, $str, -1, PREG_SPLIT_NO_EMPTY); 
```

结果：

```
Array
(
    [0] => 113_Miscellaneous_0 = 0
    [1] => 104_documentFunction_0 = 1
) 
```

# android - Phonegap - 支持推送通知

> ID：11933209
> 
> 赞同：8
> 
> 时间：2012-08-13T11:15:16.457
> 
> 标签：android, ios, cordova, push-notification, push

我正在分析 4 个移动应用程序的 phonegap 使用情况，这些应用程序将为

*   iOS (iPhone & iPad 4.2.1+)
*   安卓 (2.2+)
*   黑莓（5.0+）
*   Windows 手机 (7+)

我在 phonegap 中找不到对推送通知的本机支持。虽然我可以使用不同的框架（如 pushwoosh 和城市空气）搜索对 iOS 和 Android 的推送通知支持。

是否有一个通用框架可以解决上述所有平台的推送通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T14:38:15.260

到目前为止，有一个适用于 Cordova/Phonegap 的推送通知插件：[**Cordova Push Notifications Plugin**](https://github.com/phonegap-build/PushPlugin)。

它目前支持 Android、iOS 和 Windows Phone 8。

我知道它仍然不是您想要的通用框架，但至少它可以容纳这 3 个平台，这意味着您不必再像以前那样为每个平台处理单独的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:27:07.707

phonegap 中没有对推送通知的原生支持。由于这些因平台而异，因此有插件。

您必须为所需的每个平台找到一个插件。这是适用于 Android 的插件：[https](https://github.com/marknutter/GCM-Cordova) ://github.com/marknutter/GCM-Cordova 和适用于 iOS的插件： [https](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification) ://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification我没有找到适用于 Windows7 或 Blackberry 的插件，但我所做的只是粗略搜索。

如上所述，有些服务提供某种程度的跨平台兼容性并提供服务器端 API，以便您可以通过 REST 调用（或类似的方式）向设备发送推送。这些服务还可以提供某种程度的 phonegap 集成（通过插件）。

以下是我发现的支持您提到的 4 个平台的服务：

*   城市飞艇：[http ://urbanairship.com/](http://urbanairship.com/)
*   Pushwoosh：[http ://pushwoosh.com/](http://pushwoosh.com/)
*   Xtify： http: [//xtify.com/](http://xtify.com/)（现在是一家 ibm 公司，这里是他们支持的平台：http: [//developer.xtify.com/display/sdk/Download+the+IBM+Push+Notification+SDKs](http://developer.xtify.com/display/sdk/Download+the+IBM+Push+Notification+SDKs)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T17:02:21.367

我会使用适用于 Android 和 iOS 的 Urban Airship 插件。

[http://urbanairship.com/lp/urban-airship-phonegap-plugins/](http://urbanairship.com/lp/urban-airship-phonegap-plugins/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T12:24:37.497

作为推送通知的替代方案，您可以保持流连接打开并在那里接收通知。显然，您需要保持应用程序处于活动状态才能接收此类消息。

如果您认为这是满足您需求的可行解决方案，您可以尝试 Lightstreamer：它可以在引用的平台上与 PhoneGap 一起使用，无需任何插件。

如果有兴趣看看这里：[http ://blog.lightstreamer.com/2012/08/lightstreamer-in-phonegap-app.html](http://blog.lightstreamer.com/2012/08/lightstreamer-in-phonegap-app.html)

[免责声明：我是开发者@Lightstreamer]

# c++ - 什么可能导致时间函数和 DLL 加载之间的死锁

> ID：11933212
> 
> 赞同：3
> 
> 时间：2012-08-13T11:15:27.877
> 
> 标签：c++, windows, visual-c++

TL；DR：在这种情况下，我对 DLL 加载程序锁死锁的猜测是否正确，我如何确定？

我在一些涉及 CRT 时间函数和 National Instruments DAQmx 驱动程序 (9.3.5f2) 的代码中出现间歇性死锁 (50%)。我正在使用 MSVC2008 Express 创建一个 x86 可执行文件（典型的“发布”设置，如果需要，可以提供）并且我在 Win7 Pro x64 上运行。我的代码使用主线程上的时间函数并启动一个新线程来处理更新模拟输出电压（在 USB-6009 上）：

```
#include <iostream>
#include <ctime>
#include <windows.h>
#include <process.h>
#include <NIDAQmx.h>

HANDLE  g_TerminateEvent;

extern "C" unsigned int WINAPI DacUpdateThreadRunner(void *lpParam)
{
    TaskHandle  taskHandle;

    DAQmxCreateTask("", &taskHandle);
    DAQmxCreateAOVoltageChan(taskHandle, "Dev2/ao0", "", 0.0, 3.3, DAQmx_Val_Volts, "");
    DAQmxStartTask(taskHandle);

    float64 sample_value = 0.0;

    bool    quit = false;

    while (!quit)
    {
        DWORD wait_result = WaitForSingleObject(g_TerminateEvent, 32);
        if (wait_result == WAIT_OBJECT_0) quit = true;
        else
        {
            DAQmxWriteAnalogScalarF64(taskHandle, 1, 1.0, sample_value, NULL);
        }
    }

    DAQmxStopTask(taskHandle);
    DAQmxClearTask(taskHandle);

    return 0;
}

int main(void)
{
    g_TerminateEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

    unsigned int m_ThreadId;
    uintptr_t m_Thread = _beginthreadex(NULL, 0, DacUpdateThreadRunner, NULL, 0, &m_ThreadId);

    struct tm t;
    time_t tt = time(NULL);
    struct tm *temp = localtime(&tt);
    memcpy(&t, temp, sizeof(struct tm));

    for (int i = 0; i < 10; i++)
    {
        std::cout << "Main thread doing stuff " << i << std::endl;
        Sleep(1000);
    }

    SetEvent(g_TerminateEvent);
    CloseHandle((HANDLE)m_Thread);

    return 0;
} 
```

It only seems to deadlock if I have the call to `localtime()` in the code. Looking at the debug output in MSVS it seemed to lock while the 2nd thread was loading the (many) NI DLLs (the last DLLs to be loaded before the deadlock are `National Instruments\MAX\mxs.dll`, `National Instruments\MAX\mxsutils.dll` and `SysWOW64\version.dll`).

In the MSVC 2008 runtime `localtime` maps to `localtime64()` and apparently it uses thread local storage under Windows in order to be threadsafe.

I used WinDbg to get the call stacks (shown below) after the application deadlocked and used the `!locks` command but I cannot see why there would be a deadlock as I can't see any shared resource that both threads are locking. The locks command outputs `Scanned 10 critical sections` but nothing else (do I need to use a checked build of Windows?).

main thread:

```
ChildEBP RetAddr  Args to Child              
0035f078 77288df4 000001d0 00000000 00000000 ntdll_77250000!NtWaitForSingleObject+0x15
0035f0dc 77288cd8 00000000 00000000 00000000 ntdll_77250000!RtlpWaitOnCriticalSection+0x13e
0035f104 772a9520 773520c0 773271ca 0035f350 ntdll_77250000!RtlEnterCriticalSection+0x150
0035f144 751a1ee1 005e0000 0035f35c bf6b8258 ntdll_77250000!LdrGetDllHandleByMapping+0x3b
0035f304 751a1fd2 0035f350 0035f348 00000002 KERNELBASE!BasepLoadLibraryAsDataFileInternal+0x4f4
0035f324 751a2221 0035f350 0035f348 00000002 KERNELBASE!BasepLoadLibraryAsDataFile+0x19
0035f360 751993ad 0035f38c 00000000 006a7eb4 KERNELBASE!LoadLibraryExW+0x18a
0035f598 75199535 0035f630 72cbc018 00000002 KERNELBASE!ConvertTimeZoneMuiString+0xe4
0035f5bc 7519966b 0035f5d8 72cbbfc4 72cbc018 KERNELBASE!ConvertTimeZoneMuiStrings+0x155
0035f688 75199729 72cbbfc0 00000001 0035f6f0 KERNELBASE!GetTimeZoneInformationRaw+0x8c
0035f698 72c58d90 72cbbfc0 bf60abfe 0035f778 KERNELBASE!GetTimeZoneInformation+0xf
0035f6f0 72c59390 bf60aa2e 0035f778 00f625f8 MSVCR90!_set_timezone+0x168
0035f720 72c59e79 01103384 00f625f8 000001cc MSVCR90!__tzset+0x2e
0035f748 72c5a0b1 00f625f8 0035f778 00000001 MSVCR90!_localtime64_s+0x9f
0035f75c 01101107 0035f778 01103384 00000001 MSVCR90!_localtime64+0x1a
0035f784 011015e9 00000001 00f61850 00f62ba8 deadlock2!main+0x57 [c:\david\dev\nitests\deadlock2\deadlock2.cpp @ 60]
0035f7c8 7509339a 7efde000 0035f814 77289ef2 deadlock2!__tmainCRTStartup+0x10f [f:\dd\vctools\crt_bld\self_x86\crt\src\crtexe.c @ 586]
0035f7d4 77289ef2 7efde000 7732789a 00000000 KERNEL32!BaseThreadInitThunk+0xe
0035f814 77289ec5 01101731 7efde000 00000000 ntdll_77250000!__RtlUserThreadStart+0x70
0035f82c 00000000 01101731 7efde000 00000000 ntdll_77250000!_RtlUserThreadStart+0x1b 
```

second thread:

```
ChildEBP RetAddr  Args to Child              
0276e618 77288df4 0000021c 00000000 00000000 ntdll_77250000!NtWaitForSingleObject+0x15
0276e67c 77288cd8 00000000 00000000 72c83b4e ntdll_77250000!RtlpWaitOnCriticalSection+0x13e
0276e6a4 72c42f2a 72cbbab8 0276e978 0276e6ec ntdll_77250000!RtlEnterCriticalSection+0x150
0276e6b4 72c48a70 00000007 bd23bbe2 00f69170 MSVCR90!_lock+0x30
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for mxsutils.dll - 
0276e6ec 1b4fc523 0276e700 00000105 0276e978 MSVCR90!_getcwd+0x13
WARNING: Stack unwind information not available. Following frames may be wrong.
0276e80c 1b4fd45c 0276e81c 0276e9a4 1b5009e7 mxsutils!mxsCheckComponent+0x67c3
0276e838 1b515a05 0276e9a4 0276e978 00000000 mxsutils!mxsCheckComponent+0x76fc
0276e994 1b51542a 0276e9a4 00f619c0 0276e9b0 mxsutils!std::_Init_locks::operator=+0x1a4f
0276e9d8 1b502aa0 0276eaf0 00f69170 00f619c0 mxsutils!std::_Init_locks::operator=+0x1474
0276eb54 1b4f163f 00000001 00000001 006b0300 mxsutils!CodeProject3rdParty::mxs_mxExceptionFilter+0x320
0276eba8 1b502831 1b240000 1b529f40 00000001 mxsutils+0x163f
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for mxs.dll - 
0276ebc8 1b2414e9 00000001 00000000 00f62540 mxsutils!CodeProject3rdParty::mxs_mxExceptionFilter+0xb1
0276edf8 1b24593c 1b240000 00000001 00000000 mxs+0x14e9
0276ee3c 1b2459f6 1b240000 0276ee68 77289950 mxs!std::_Init_locks::operator=+0x44c
0276ee48 77289950 1b240000 00000001 00000000 mxs!std::_Init_locks::operator=+0x506
0276ee68 7728d8c9 1b2459d8 1b240000 00000001 ntdll_77250000!LdrpCallInitRoutine+0x14
0276ef5c 7728d78c 00000000 75717046 00000000 ntdll_77250000!LdrpRunInitializeRoutines+0x26f
0276f0c8 7728c4d5 0276f12c 0276f0f4 00000000 ntdll_77250000!LdrpLoadDll+0x4d1
0276f100 751a2288 0276f0f4 0276f144 0276f12c ntdll_77250000!LdrLoadDll+0xaa
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for nidmxfu.dll - 
0276f13c 6dd8b3ad 00000000 00000000 006b03fc KERNELBASE!LoadLibraryExW+0x1f1
0276f568 6dd8b4d3 0276f86c 6ded4a38 0276f92c nidmxfu!nNIMSAI100::tFilterPreferences::~tFilterPreferences+0x65cd
0276f584 6dc39d62 0276f6cc 0276f728 0276f870 nidmxfu!nNIMSAI100::tFilterPreferences::~tFilterPreferences+0x66f3
00000000 00000000 00000000 00000000 00000000 nidmxfu!nNIMS100::tAttributeDatabase::getAttributeValueForString+0x12432 
```

My guess is that the main thread has locked an internal lock in the MSVCRT and then went to load a DLL which it cannot because thread 2 has a DLL loader lock. Thread 2 tries to use getcwd() from the MSVCRT which then results in the deadlock. Is that an accurate assessment? If not, how could I go about getting more information to make sure?

I could probably work around it by re-ordering some of the code (e.g. use wxDateTime or the NI code from the main thread to pre-load the DLLs) if I was confident that was the problem. However, I don't want to just hide it and have it re-appear and bite me later.

So is there a way for me to verify what has caused the deadlock in this case?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:58:43.863

Your diagnosis is correct. `tzset` holds a lock while calling `LoadLibrary`. Meanwhile, `_getcwd` is waiting for that same lock. `mxsutils` is calling `_getcwd` from inside its `DllMain`. Like most functions, `_getcwd` is not safe to call from `DllMain`. A temporary workaround would be to make a dummy call to `localtime` from `main` before you create any threads. A long-term fix would be to change `msxutils` so it doesn't call unsafe functions from inside `DllMain`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:27:42.173

I notice that you are calling wxDateTime::Now() without doing any initialization of the wxWidgets system. My guess would be that wxDateTime::Now() is relying on something that is initialized when you do a normal wxWidgets initialization. Have you tried not even starting your other thread, but simply checking that wxDateTime::Now() works OK like this?

I also notice that you are using wxWidgets v2.9.2\. Recommend you upgrade to v2.9.4\. Apart from many improvements that might help your situation, these is a fix to a bug in wxDateTime. Might not help with current problem, but will fix a problem you don't yet know you have

# java - Java：I/O，read() 不会填充缓冲区？

> ID：11933214
> 
> 赞同：1
> 
> 时间：2012-08-13T11:15:35.023
> 
> 标签：java, sockets, file-io, buffer

我正在学习 I/O、Files 和 Sockets，但我不明白这句话的意思

> 读取不会总是填满缓冲区

这是什么意思？有人对我有什么解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:17:52.050

```
"read will not always fill a buffer" 
```

上面这句话的意思是`Buffer`有一定的，填充的时候`size`是**AutoFlushed，**但是假设要**读入Buffer的数据不足以填充Buffer** ……那么**就需要手动flush了。**

有关更多详细信息，请阅读`SCJP Programmer guide`Kathy Sierra 或`Thinking in Java's` **IO 章节**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:20:04.083

read() 方法接受一个字节数组，它将从流或读取器中填充。

如果没有足够的数据来填充缓冲区，它可以

*   等到有足够的数据可用
*   立即返回，但只提供可用数据而不完全填充缓冲区。

标准实现混合了两者：它等待至少一个字节可用。

注意：第二种情况意味着 read() 可能在没有任何数据的情况下返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T00:10:34.260

它将阻塞直到至少有一个字节可用，并返回在该点可以读取的字节数而不会再次阻塞。请参阅 Javadoc。

# java - 为什么使用框架创建模拟对象而不是创建对象本身

> ID：11933215
> 
> 赞同：0
> 
> 时间：2012-08-13T11:15:42.260
> 
> 标签：java, mockito

> **可能重复：**
> [什么是对象模拟，我什么时候需要它？](https://stackoverflow.com/questions/4314/what-is-object-mocking-and-when-do-i-need-it)

为什么使用创建模拟对象

```
MyObject myOb = Mockito.mock(MyObject.class); 
```

什么时候可以改用：

```
MyObject myOb = new MyObject();

    public class MyObject(){
       private String str;
       //getters and setters
    } 
```

如果上面的对象变得更复杂并且它与其他对象有依赖关系，我还需要为这些对象创建模拟对象。因此，如果需要设置所有成员来测试对象，为什么不直接创建对象而不是使用框架来模拟它呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T11:18:43.157

只需比较您在示例中编写的行数。当然，你可以手动编写所有的模拟，但是你会做更多的打字，你的测试会变得不那么可读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:20:29.963

当你模拟某些东西时，你也可以断言某些事情发生了，比如你可以断言一个方法是用参数调用的等等。

您不能使用具体类来做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:27:49.777

如果你问这个问题，你从来没有遇到过复杂到需要模拟的测试场景。当然，如果您的类足够简单且隔离，您可以通过简单地实例化它们来测试它们，那么您应该这样做。

但是，在许多实际案例中，您希望测试依赖于其他类的类，而在单元测试场景中不可能（或不希望）实例化它们。可能是它们与外部服务或数据库进行通信。可能是它们具有您必须实例化的一长串附加依赖项。

还要记住，单元测试是关于**隔离**特定的计算单元并验证它们是否独立运行。模拟是一种很好的方法，它允许您从测试中删除依赖项。有效地说“假设依赖项 A 返回 Y，验证此方法是否返回 X（并且使用这些参数调用依赖项 A）。

# android - Adobe AIR for Mobile：默认三星键盘文本输入错误

> ID：11933216
> 
> 赞同：1
> 
> 时间：2012-08-13T11:15:43.307
> 
> 标签：android, apache-flex, air, samsung-mobile

我只在运行 Androi 4+ 的三星手机上遇到了一个奇怪的错误。使用 Adob​​e AIR，每个 textInput 都不适合使用。在每个字符输入上重复输入单词的开头。这是行为：

当我输入“ABC”时，输入文本是“AABAABAABAABAABAABC”（或者有时是字典中的已知单词）

它似乎在每次按键时添加了文本输入的全部内容。使单词重复数次。这似乎也是一个自动建议（来自手机的字典）相关的错误。

textInput 是这样声明的：

```
<s:TextInput id="tin" autoCapitalize="all" autoCorrect="false" 
             maxChars="19" restrict="0-9A-Za-z_\-" width="100%" 
             itemCreationPolicy="immediate"/> 
```

其他设备运行良好，即使在运行 Android 4.1、旧版本或其他制造商的 HTC 上也是如此。此错误也出现在 Swype 键盘（第三方系统键盘）上。

你有解决办法让它工作吗？

谢谢

编辑：最糟糕的行为是由`restrict`财产造成的。没有它，文本输入仍然是错误的，但更少。我在 bugbase.adobe.com 上提交了这些错误，请为它投票：

1.  [TextInput 的限制属性使用户交互完全无法使用](https://bugbase.adobe.com/index.cfm?event=bug&id=3367699 "TextInput 的限制属性使用户交互完全无法使用")
2.  [TextInput 的 autoCorrect 属性没有效果](https://bugbase.adobe.com/index.cfm?event=bug&id=3640670 "TextInput 的 autoCorrect 属性没有效果")
3.  [TextInput 组件在设置自定义皮肤时忽略 autoCapitalize、autoCorrect 和 softKeyboardType 属性](https://issues.apache.org/jira/browse/FLEX-29024)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:37:39.470

关于移动文本输入，Adobe 真的用 Flex 4.6 搞砸了我们。将皮肤类设置为`spark.skins.mobile.TextInputSkin`，你应该很高兴。

# c++ - GetClickablePoint 不适用于 UI 自动化

> ID：11933223
> 
> 赞同：1
> 
> 时间：2012-08-13T11:16:08.217
> 
> 标签：c++, visual-c++, automation, microsoft-ui-automation

我正在为 Metro 应用程序开发 UI 自动化客户端（C++）。我能够在地铁 UI 上获取元素。我正在使用 Raw Tree Walker

1.  获取自动化树

    ```
    automation->get_RawViewWalker(&pTreeWalker); 
    ```

2.  然后我正在迭代并在 Metro 应用程序上获取元素

3.  检索 UI 元素的属性

    我在列表项旁边有图像和文本项。单击该启动网页。

    列表项、图像和文本项没有调用功能。所以我正在尝试获取可点击点，以便我可以单击该点。我也在使用 Inspect.exe 来查看 UI 元素。

    inspect.exe 确实显示列表项、图像和文本项的可点击点。但是当我

    有问题地尝试使用 GetClickablePoint() 我得到 gotClickable = 0 并且 POINT 字段保持 0.hr = S=OK

    ```
    POINT clickable;   
    BOOL gotClickable;     
    hr = p1->GetClickablePoint(&clickable,&gotClickable); 
    ```

我想在调用 mouse_event 时使用可点击点

```
 VOID WINAPI mouse_event(__in  DWORD dwFlags, __in  DWORD dx, __in  DWORD dy, __in  DWORD dwData,
   __in  ULONG_PTR dwExtraInfo  ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:16:27.733

检查项目的 hwnd 是否为零。这对我来说经常出现。

您仍然可以通过将光标移动到元素的中间并发送鼠标单击事件来单击。

您可以根据边界矩形计算位置。根据您的情况，您可能需要将客户端转换为屏幕坐标。

边界矩形部分类似于：

```
x = left + (right - left) / 2
y = top + (bottom - top) / 2 
```

要转换为屏幕坐标，您必须使用具有 hwnd 的元素并应用必要的偏移量。

编辑

要将光标放在矩形上，我使用 PInvoke：

这是我使用的东西（C#）：

```
 public static void Click()
    {
        User32.mouse_event(WindowsConstants.MouseEventLeftDown, 0, 0, 0, IntPtr.Zero);
        User32.mouse_event(WindowsConstants.MouseEventLeftUp, 0, 0, 0, IntPtr.Zero);
    }

    public static void RightClick()
    {
        User32.mouse_event(WindowsConstants.MouseEventRightDown, 0, 0, 0, IntPtr.Zero);
        User32.mouse_event(WindowsConstants.MouseEventRightUp, 0, 0, 0, IntPtr.Zero);

    }

    public static void DoubleClick()
    {
        User32.mouse_event(WindowsConstants.MouseEventLeftDown, 0, 0, 0, IntPtr.Zero);
        User32.mouse_event(WindowsConstants.MouseEventLeftUp, 0, 0, 0, IntPtr.Zero);
        Thread.Sleep(150);
        User32.mouse_event(WindowsConstants.MouseEventLeftDown, 0, 0, 0, IntPtr.Zero);
        User32.mouse_event(WindowsConstants.MouseEventLeftUp, 0, 0, 0, IntPtr.Zero);
    }

    public const UInt32 MouseEventLeftDown = 0x0002;
    public const UInt32 MouseEventLeftUp = 0x0004;
    public const UInt32 MouseEventRightDown = 0x0008;
    public const UInt32 MouseEventRightUp = 0x00010;

    [DllImport("user32.dll")]
    public static extern void mouse_event(UInt32 dwFlags, UInt32 dx, UInt32 dy, UInt32 dwData, IntPtr dwExtraInfo); 
```

# image-processing - 将模拟表盘数字化的努力有哪些好的实施方式？

> ID：11933227
> 
> 赞同：1
> 
> 时间：2012-08-13T11:16:23.663
> 
> 标签：image-processing, real-time, analog-digital-converter

例如，

*   手表的表盘[是](https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Rolex-Submariner.jpg/170px-Rolex-Submariner.jpg)模拟的，

    ![](../Images/6303705dcaaa0ec878a3f4ecbaa94f26.png)

*   在我[感兴趣的机器中](http://www.materialtestingmachine.in/full-images/analogue-universal-testing-machine-771364.jpg)，有一个类似的表盘可以显示力的读数。

    [http://www.materialtestingmachine.in/full-images/analogue-universal-testing-machine-771364.jpg](http://www.materialtestingmachine.in/full-images/analogue-universal-testing-machine-771364.jpg)

我想在表盘前安装一个摄像头，并从收到的图像中提取信息，如手表时间或 UTM 中的力。

这种数据提取必须实时且连续地进行。因此，例如，程序输出应该是从手表读取的“时间”，即每秒更新一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T12:24:32.987

首先，我会在表盘周围放置 4 个标记来帮助自动配准和透视变换：

![带记号笔的机器](../Images/f8334344e9ed77776b345ff9787ab0ec.png)

现在撤消测量的透视失真并完美地围绕其中心点裁剪表盘：

![当前拨号快照](../Images/6777eff306874c9f90067d32ed004810.png)

应用极坐标到矩形变换：

![极地到矩形转换表盘](../Images/b3030ad356b9096bb30f8954a20b1072.png)

选择指针的颜色：

![选定的颜色](../Images/7b658b771b020ba2a08e4ca8c7c502f5.png)

运气好的话，可以剪出上图的横条，很容易找出指针的位置，先是红色的，因为那是最前面的，然后是蓝色的，考虑到可能是（部分) 被红色覆盖：

![最好的部分](../Images/cb8eb730ed162cc9b536dbb50e5f5ddf.png)

免责声明：我在现实生活中从未做过类似的事情，所以这对我来说只是一些自我娱乐:)

# windows - 浏览器与外部应用程序交互

> ID：11933230
> 
> 赞同：0
> 
> 时间：2012-08-13T11:16:32.003
> 
> 标签：windows, cross-browser, activex

我有一个网页需要访问他的 Windows PC 上的一些用户数据。

Ex.Read Outlook 电子邮件，由于安全限制，浏览器不允许这样做。

实现这一目标的最佳方法是什么？

写一个 ActiveX 控件？[FF，Chrome怎么样]

我需要与 Firefox、IE、Chrome 一起使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:22:25.200

你不能这样做——如果浏览器可以访问用户机器上的信息，那将是一个巨大的安全/隐私问题。获取 Outlook 电子邮件的唯一方法是告诉用户从 Outlook 导出他们的电子邮件，并让他们将导出的电子邮件上传到您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:31:05.510

您需要编写一个类似[Google Calendar Sync](http://support.google.com/calendar/bin/answer.py?hl=en&answer=98565)的工具，供您的用户下载和安装。

他们必须输入他们的网站凭据或您为他们生成的令牌，您的应用程序将执行本地 PC 上需要执行的任何操作。您也可能有信任问题。您的用户会信任运行您的应用程序来阅读他们的电子邮件吗？取决于我猜的情况，但如果需要跨浏览器兼容，完全基于浏览器的解决方案可能无法工作。

# jquery - jquery以编程方式单击链接

> ID：11933235
> 
> 赞同：2
> 
> 时间：2012-08-13T11:16:52.470
> 
> 标签：jquery, triggers, click

我知道以下触发点击的功能：

```
var link = $("#linkId");
    link.click(); 
```

但就我而言，我没有 id，但我有 name 属性，所以我使用了：

```
var link = $('a[name=content_'+params['p']+']');
link.click(); 
```

但是不是点击，上面的代码有什么问题。如果我使用 id 它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:18:27.790

我假设您实际上有一个点击事件绑定到匹配的链接。如果是这样...

对于属性选择器，如果值比字母序列更复杂（例如，包括下划线或其他标点字符），请将其括在引号中。

```
var link = $('a[name="content_'+params['p']+'"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:18:24.567

`click`在将事件绑定到该锚标记之前，您无法通过程序触发对锚标记的点击。

你可以做：

```
var link = $('a[name="content_'+params['p']+'"]'); // change the selector with encloses quote
link.click(function() {
  // do  something
}); 
```

然后通过以下方式触发该点击事件：

```
link.click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:19:24.247

确保您通过选择器获取元素尝试调试它
`$("[attributename='value']")`会给您正确的元素

# ruby-on-rails-3 - 产品索引检查图像

> ID：11933236
> 
> 赞同：0
> 
> 时间：2012-08-13T11:17:17.807
> 
> 标签：ruby-on-rails-3

首先使用 PaperClip。

在索引文件中，我有一个数据库中的产品列表。

检查数据库中是否有图像保存的最佳方法是什么。回形针字段是标准的

所以我想我最好检查一下 image_file_name 字段。

因此，如果它为空，则显示一个图像，否则如果不为空，则显示另一个图标。

这里有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:39:33.800

设法解决它

如果有人正在寻找这个解决方案。

这将检查任何字段是否为空，然后显示图像/图标并在没有时显示另一个

```
<%= product.image_file_name? ? image_tag('imagesuccess.png') : image_tag('noimage.png')%> 
```

希望这对某人有帮助

# android - 创建自定义 Toast 视图

> ID：11933237
> 
> 赞同：1
> 
> 时间：2012-08-13T11:17:22.353
> 
> 标签：android

我想创建自定义 Toast 视图，例如

```
public class SMSToast extends Activity {

    public void showToast(Context context, String message) {
        LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.toast_sms, (ViewGroup)findViewById(R.id.toast_sms_root));

        TextView text = (TextView) layout.findViewById(R.id.toast_sms_text);
        text.setText(message);

        Toast toast = new Toast(context);
        toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
        toast.setDuration(Toast.LENGTH_LONG);
        toast.setView(layout);
        toast.show();
    }
} 
```

并在 onReceive 方法上的 BroadcastReceiver

```
SMSToast toast = new SMSToast();
                        toast.showToast(context, 
                                        "Received SMS from: " + msg_from + 
                                        " Content: " + msgBody); 
```

但调用代码时不显示任何消息。如果我使用 Toast，则会显示文本。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:36:46.290

```
 public class SMSToast{

    public void showToast(Context context, String message) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       View layout = inflater.inflate(R.layout.toast_sms, null);
       TextView text = (TextView) layout.findViewById(R.id.toast_sms_text);
       text.setText(message);
       Toast toast = new Toast(context);
       toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
       toast.setDuration(Toast.LENGTH_LONG);
       toast.setView(layout);
       toast.show();
   }
} 
```

不要从 Activity 扩展 SMSToast 类。使它成为一个简单的java类。

```
SMSToast toast = new SMSToast();                          
toast.showToast(context,  "Received SMS from: " + msg_from + 
" Content: " + msgBody); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:26:46.080

请更改这两行

```
 View layout = inflater.inflate(R.layout.toast_sms, null);
and
 Toast toast = new Toast(getApplicationContext()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:52:10.527

您看到[示例表单文档](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)了吗？
好像没有。
您不需要扩展 Activity！只需使用充气机和标准[Toast 以及 setView API](http://developer.android.com/reference/android/widget/Toast.html#setView%28android.view.View%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T13:45:30.023

使用此代码：

```
LayoutInflater mInflater=LayoutInflater.from(context);

View view=mInflater.inflate(R.layout.your_layout_file,null);
Toast toast=new Toast(context);
toast.setView(view);
toast.setDuration(TOAST.LENGTH_LONG);
toast.show(); 
```

# liferay - 用户 groupId 和 scopeGroupId 的区别

> ID：11933238
> 
> 赞同：10
> 
> 时间：2012-08-13T11:17:26.123
> 
> 标签：liferay, usergroups

`themeDisplay.getUser().getGroupId()`和有什么区别`themeDisplay.getScopeGroupId()`？

如果我从中检索`Layouts`（页面），它们会有任何不同的 URL 模式，例如，`/web-or-user/<user>/*`还是`/web-or-user-or-group/<group>/*`？

我的意思是说每个用户都有自己的组或其他东西是对的吗？

到目前为止，据我所知，似乎 User *Foo*具有组*UserFoo*和组*GroupFoo*，因此您可以检索*Foo*或 Foo 组的个人页面......我是好方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T18:58:31.657

每个经过身份验证的用户都可以拥有自己的私有和公共页面，即 getUser().getGroupId()。

然后还有用户当前正在查看的社区，即范围组 ID。

所以是的，你是对的！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T07:04:48.857

使用组 ID，您可以获得用户的公共或私人页面。而 scopeGroupId 与您的 portlet 的权限相关（请参阅 ( [http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/security-and-permissio-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/security-and-permissio-4)中的章节安全和权限)

# apache-flex - Flex 检测 CollectionEvent 变化

> ID：11933239
> 
> 赞同：1
> 
> 时间：2012-08-13T11:17:26.883
> 
> 标签：apache-flex

在一台 PC 上，我有一个数据网格，其中 dataprovider 是一个 arraycollection，由从 MySQL DB 检索到的记录集合填充。在另一台 PC 上，另一个组件检索相同的记录集合并更新它们。立即，PC 1 中的数据网格反映了 PC 2 中所做的更改，这很好，因为它将更改推送到所有受影响的控件在线。但是，我想检测 arraycollection 更改以执行其他操作，但未检测到 CollectionEvent.COLLECTION_CHANGE。你能帮忙吗？这是代码：

```
protected function doInit():void
{
acLeave.addEventListener(CollectionEvent.COLLECTION_CHANGE, onAcLeaveChange);
}

protected function onAcLeaveChange(event:CollectionEvent):void
{
do something
} 
```

我正在使用液晶显示器，数据管理服务已经处理了数据同步。这就是为什么第一台带有数据网格数据提供程序 acLeave 的电脑会自动更改。不知何故，这是因为 lcds 知道有一个客户端（pc 之一）在线，然后它将更改推送给它。我的问题是数据网格数据发生了变化，我想检测是否发生了数据变化，以便进行其他更新。通常，要检测数据网格更改，我可以使用 datagrid datachange 或简单地将侦听器添加到 collectionEvent.COLLECTION_CHANGE 的数据提供程序，但在这种情况下，即使我可以看到 ac acLeave 更改，事件也没有触发。请帮忙！

嗨，我再次感谢您的建议。我已将 setter 添加到 acLeave 但仍然无法监听 collectionEvent 的变化。这是修改后的代码：

```
private var _acLeave:ArrayCollection = new ArrayCollection();

[Bindable]
public function get acLeave():ArrayCollection
{
    return _acLeave;
}
public function set acLeave(value:ArrayCollection):void
{
    _acLeave = value;
}
protected function doInit():void
{
    acLeave.addEventListener(CollectionEvent.COLLECTION_CHANGE, onAcChange);
}

protected function dataGrid_creationCompleteHandler(event:FlexEvent):void
{
    getAllResult.token = leaverequestService.getAll();
    getAllResult.addEventListener(ResultEvent.RESULT, onGotResult);
}

protected function onGotResult(event:ResultEvent):void
{
    acLeave = getAllResult.lastResult;
}

protected function onAcChange(event:CollectionEvent):void
{
    // this never executed because unable to detect a change on acLeave
    Alert.show("acLeave Changed !");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:36:26.497

如果您的集合更改处理程序没有触发，我猜会发生这样的事情：

*   pc1 添加集合更改监听器
*   pc2 更改集合
*   LCDS 向 pc1 发送一个全新的`ArrayCollection`对象（不仅仅是更改的元素）以使用

您正在收听的原件`ArrayCollection`collectionChange 不一定会发生变化，而是会被*替换*。所以不会发生集合更改事件。

如果您为此添加一个 setter 方法`ArrayCollection`（`acLeave`在您的示例中），那么您将知道这是否会发生。从技术上讲，您应该同时使用集合更改事件和此设置器，以便能够检测到可以更改数组的所有情况。

# java - 如何为一个 JTable 设置不同的行高

> ID：11933241
> 
> 赞同：2
> 
> 时间：2012-08-13T11:17:37.820
> 
> 标签：java, swing, jtable, tablecellrenderer

我有一个包含一列的 JTable，每个表格单元格的单元格渲染是动态生成的 JPanel，因此每个表格单元格的高度应该根据其 JPanel 不同，我试图在渲染 jpanel 的地方更改行高但是它不工作。请告诉我如何在 JTable 中设置不同的 JTable 行高，

这就是我尝试这样做的方式，

```
 private QCellPanel renderer = new QCellPanel();
    private QCellPanel editor = new QCellPanel();

    @Override
    public Object getCellEditorValue() {
        return editor.getQuestion();
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        renderer.setQuestion((Qusetion) value);

        table.setRowHeight(renderer.getPreferredSize().height);
        return renderer;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
        editor.setQuestion((Qusetion) value);
        table.setRowHeight(editor.getPreferredSize().height);
        return editor;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:24:10.387

您需要使用两个参数版本`setRowHeight(rowNumber, height)`。

如果可能，您还应该避免更改方法中的行高`getXComponent`，因为`setRowHeight`会强制重新绘制表格，这将导致它再次请求渲染器组件等等......默认实现可能足够聪明，不会触发这个只要高度稳定，但如果你最终得到无限循环，我会先看看:)

# java - 将控制台的while循环输出写入java中的文本文件

> ID：11933252
> 
> 赞同：0
> 
> 时间：2012-08-13T11:18:18.653
> 
> 标签：java, io, console

我是 Java 新手，我被困在这一部分：

我正在尝试使用 JAVA 将控制台输出输出到文本文件中。但问题是我有一个**While 循环**正在运行，我的代码将输出写入文件但删除了前一个。我想将 while 循环输出附加到 file 。

任何帮助表示赞赏。提前致谢 ：）

> PrintStream out = new PrintStream(new FileOutputStream("output.txt"));
> 
> System.setOut(out);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:21:39.053

您需要将`append`文件中的新数据转换为以前的数据，试试这个...

```
try{
    File f = new File("d:\\t.txt");
    FileWriter fw = new FileWriter(f,true);    // true is for append
    BufferedWriter bw = new BufferedWriter(fw);

    bw.append(Your_data);
  }catch(Exception ex){

       ex.printStackTrace();

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:23:40.570

您应该执行*一次*重定向，然后再执行其他任何操作。即在你进入你的循环之前。

请注意（还）您的 shell 可以重定向到文件，这可能比更改`System.out`. 这是可行的，但对于将来要调试您的代码并想知道他们的输出去向的人来说可能是出乎意料的......

或者也许考虑一个[日志框架](http://logging.apache.org/log4j/1.2/)？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T11:25:37.230

像这样做：

```
 FileOutputStream fout=new FileOutputStream("output.txt",true);
  while(condition)
   {
      PrintStream out = new PrintStream(new FileOutputStream("output.txt"));

       System.setOut(out);

   } 
```

其中 FileOutputStream 的第二个参数将以可附加模式打开它。

# batch-file - 从批处理文件中的 regedit 读取子注册表项

> ID：11933254
> 
> 赞同：0
> 
> 时间：2012-08-13T11:18:22.213
> 
> 标签：batch-file

我想读取注册表项的子项名称并将子项名称分配给一个变量。我没有得到注册表查询来做到这一点。

例如：我当前的密钥是这样的“ProviderName/SoftwareName/8.0”。最后一部分 8.0 可以在我切换版本时更改。我想阅读这个版本号。

提前致谢 ！！普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:03:37.017

该`REG`命令是您必须解析输出的内容。

```
REG QUERY HKLM\Software\Microsoft\Office 
```

将向您展示 Office 版本（以及一些常用键）

```
for /f "tokens=5 delims=\" %a in ('REG QUERY HKLM\Software\Microsoft\Office') do echo %a 
```

将输出信息。您必须将信息转换为数字，然后测试它是否更大。

# c++ - boost::bind 在绑定抛出异常的函数时在 VC++ 2010 中不起作用

> ID：11933255
> 
> 赞同：1
> 
> 时间：2012-08-13T11:18:22.520
> 
> 标签：c++, visual-c++, boost, boost-bind, exception-specification

我有一些在 Linux 下编译良好的代码，但我正在尝试将其移植到 Windows。我使用了来自 Boost Pro 的 Boost 1.50 预编译二进制文件，但是当我编译我的代码时，我得到了这个神秘的错误：

```
error C2664: 'boost::_bi::bind_t<R,F,L>::bind_t(const boost::_bi::bind_t<R,F,L> &)' :
   cannot convert parameter 1 from 'boost::_bi::bind_t<R,F,L>'
   to 'const boost::_bi::bind_t<R,F,L> &'
   C:\Program Files (x86)\boost\boost_1_50\boost\bind\bind_cc.hpp   [line] 50 
```

该错误是最无用的，因为它显示在 Boost 头文件的深处，没有表明我的代码中的问题出在哪里。尽管如此，通过注释掉各种代码块，我已将其缩小为原因：

```
void test(int a)
    throw (int)   // removing this line makes it compile
{
    return;
}
...
boost::function<void(int)> fn = boost::bind<void>(test, _1); 
```

如果我删除`throw`函数定义中的说明符，它会起作用。我扔什么都没关系，无论是一个类还是一个`int`. 我做错了什么，还是不能绑定到在 Visual C++ 中引发异常的函数？Boost Bind 文档似乎没有提出任何问题，而且 GCC 也没有任何问题。

*[旁注：上面的代码不是我的实际代码，但在编译时会出现同样的问题。请避免关于抛出整数不好之类的评论，因为这只是一个微不足道的例子，以防万一有人希望重现该问题。]*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:48:04.257

我不知道为什么您的代码在 VC++ 上失败。但是，通常最好避免使用异常规范，因为它们会引入非常微妙的影响。请参阅 Herb Sutter 撰写的优秀专栏[A Pragmatic Look at Exception Specifications](http://www.gotw.ca/publications/mill22.htm)：

> 所以这似乎是我们作为一个社区到今天为止学到的最好的建议：
> 
> 道德#1：永远不要编写异常规范。
> 
> 道德＃2：除了可能是一个空的，但如果我是你，我什至会避免。

# internet-explorer - 插件中的 Internet Explorer 运行一次驻留 JavaScript

> ID：11933258
> 
> 赞同：0
> 
> 时间：2012-08-13T11:18:31.840
> 
> 标签：internet-explorer, ieaddon

Chrome 扩展中有“背景页面”之类的东西。它允许为扩展添加一种运行一次的代码，该代码也常驻，然后从其他页面访问它，如下所示：

```
var backPage = chrome.extension.getBackgroundPage(); 
```

问题是，是否有类似的东西可用于 Internet Explorer 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:15:51.700

根据我们在 IE 扩展方面的经验，我们发现无法使用 JavaScript 在 IE 中模拟类似于*Chrome*的背景页面行为。

# android - 如何使用 OnDateChangedListener

> ID：11933265
> 
> 赞同：0
> 
> 时间：2012-08-13T11:18:52.353
> 
> 标签：android

如何使用`OnDateChangedListener`

我有`datepicker`对话框，它显示得很好。但我想以编程方式使用`OnDateChangedListener`using`datepicker``DatePicker picker = new DatePicker(this);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:26:10.193

看到这个[DatePicker 例子](http://developer.android.com/guide/topics/ui/controls/pickers.html)

```
DatePicker picker = new DatePicker(this);
picker.init(2012, 8, 8, new OnDateChangedListener() {
@Override
public void onDateChanged(DatePicker view, int year, int monthOfYear,int dayOfMonth) {
    // Your Code Here.

}
}); 
```

# cakephp - CakePHP 在页面顶部显示错误

> ID：11933268
> 
> 赞同：0
> 
> 时间：2012-08-13T11:19:02.073
> 
> 标签：cakephp

我正在构建一个 CakePHP 2 应用程序。我一直在尝试锻炼如何最好地在页面顶部显示我的表单错误。我发现了其他一些帮助我解决错误的帖子，但我正在努力循环浏览它们以正确显示它们。

我的表格由多行字段组成 - 每行都是一个单独的数据库行（作为费用报销的一部分的个人费用）。

我在控制器中设置它以传递错误：

```
$this->set('errors', $this->ExpenseClaim->validationErrors); 
```

这是通过这个错误数组：

```
array(
    (int) 0 => array(
        'date' => array(
            (int) 0 => 'The expense date cannot be blank'
        ),
        'sitename' => array(
            (int) 0 => 'The expense sitename cannot be blank'
        ),
        'detail' => array(
            (int) 0 => 'The expense details cannot be blank'
        ),
        'amount' => array(
            (int) 0 => 'The expense amount cannot be blank'
        ),
        'total' => array(
            (int) 0 => 'The expense total should not be blank'
        )
    ),
    (int) 1 => array(
        'date' => array(
            (int) 0 => 'The expense date cannot be blank'
        ),
        'sitename' => array(
            (int) 0 => 'The expense sitename cannot be blank'
        ),
        'detail' => array(
            (int) 0 => 'The expense details cannot be blank'
        ),
        'amount' => array(
            (int) 0 => 'The expense amount cannot be blank'
        ),
        'total' => array(
            (int) 0 => 'The expense total should not be blank'
        )
    )
) 
```

我尝试了许多不同的 foreach 循环来尝试消除错误，但由于嵌套级别而失败。有人能指出我正确的方向吗？

我只想要一个错误，比如“第 1 行的费用日期不能为空”。

我正在使用 jQuery 插入行，所以不能依赖表单助手。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:53:18.017

我把事情复杂化了！希望这可以帮助其他人：

```
foreach ($errors['Expense'] as $key => $error) {
        foreach ($error as $value) {
            foreach ($value as $val) { ?>
                <li><?php echo $val; ?> in row <?php echo $key; ?></li>     
            <?php } ?>
        <?php } ?>
    <?php } ?> 
```

# php - CSV 文件作为页面打开

> ID：11933281
> 
> 赞同：4
> 
> 时间：2012-08-13T11:20:04.333
> 
> 标签：php, html, csv, download

我是 Web 开发的新手，我遇到了 CSV 文件的异常问题。

我有一个下载 CSV 文件的链接：

```
<a href="http://mysite.com/public/sample.csv">Sample CSV file</a> 
```

在我的本地机器上，它提供了一个下载对话框 -*这是正确的，这就是我想要*的。

当我将相同的代码上传到我的网络服务器时，它会在同一浏览器选项卡中将 csv 文件作为网页打开。我不想要，**我想要一个用于下载选项的对话框**！

谁能告诉我我做错了什么或我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:22:03.327

您可以将以下行添加到您的 .htaccess 中。如果打开，所有 CSV 文件都将被强制下载。 `AddType application/octet-stream csv` 它会将 MIME 标头添加到所有 csv 文件中，因此浏览器会明白它需要下载文件，而不是显示它。

# lotus-notes - XPages RichText 链接

> ID：11933282
> 
> 赞同：0
> 
> 时间：2012-08-13T11:20:11.367
> 
> 标签：lotus-notes, xpages, lotus-domino, richtext

我有一个 XPage 来显示文档数据。为了显示 RichText 数据，我添加了一个 RichText 控件。我发现数据库/视图/文档链接以适当的图标显示，但被转换为 http 链接。我希望将这些链接转换为 notes://-links 以确保在用户的便笺客户端而不是在用户的浏览器中打开这些链接。有什么建议可以从技术角度实现这一目标吗？

非常感谢您的帮助。迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:54:35.593

跟我说：

```
 The web knows no RichText, it is a ghost of Christmas past.
 There is only MIME. Now go and live with it! 
```

除非您构建在客户端和浏览器中使用 RichText 的混合应用程序，否则我建议在 RichText 选项中选择选项 [x] Save as MIME。对于混合应用程序，它取决于用例。

在您的情况下，似乎（？）数据库/视图/文档链接是使用客户端添加的。在这种情况下使用 mime 似乎是个好主意。然后只是一个简单的字符串（HTML），您可以在显示（或保存）之前使用 DOM 操作或正则表达式来整理内容。这适用于客户端或服务器端

您可以有一个自定义控件，其中包含一个 DIV 和一个 XSP.addOnLoad() 脚本，该脚本在 Ajax 调用中使用[RichtText url](http://www.iminstant.com/iminstant/iminstant.nsf/d6plinks/ctyr-7h6s6r)`dojo.query("a")`并获取所有链接的句柄，然后整理出您想要更改的链接。

让我们知道怎么回事。

# r - 在R中绑定两个ffdf数据帧

> ID：11933287
> 
> 赞同：3
> 
> 时间：2012-08-13T11:20:37.130
> 
> 标签：r

关于`ff`包裹的另一个问题。R 中的or包中是否有`rbind`等效功能？我想逐行绑定两个数据框。这可以在包中完成还是有其他库可以帮助我？`ff``ffbase``ff``ff`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:46:16.333

使用 ffbase 包 0.6 版中的 ffdfappend。0.5 版的 ffdfappend 旨在将 data.frame 附加到 ffdf，而 0.6 版还允许将 ffdf 附加到 ffdf。您可以使用以下 R 代码安装该软件包的 0.6 版：

```
download.file(url="http://fffunctions.googlecode.com/git-history/b6fa5617810e012e5d809d77a9a99dbb25c7e6dc/output/ffbase_0.6.tar.gz", destfile="ffbase_0.6.tar.gz")
install.packages("ffbase_0.6.tar.gz", repos=NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:39:31.950

当 fd1 中没有新的因子水平时，您可以设置`adjustvmode`如下`FALSE`。

```
vd<-ffdfappend(fd, fd1, adjustvmode=F) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T14:11:17.553

`rbind()`根据需要处理`ffdf`对象。例如：

```
df1 = as.ffdf(data.frame(A = 21:23, B = letters[1:3]))
df2 = as.ffdf(data.frame(A = 31:34, B = letters[11:14]))
df3 = as.ffdf(data.frame(A = 41:42, B = letters[21:22]))
rbind(df1, df2, df3) 
```

产量：

```
ffdf (all open) dim=c(9,2), dimorder=c(1,2) row.names=NULL
ffdf virtual mapping
PhysicalName VirtualVmode PhysicalVmode  AsIs VirtualIsMatrix PhysicalIsMatrix PhysicalElementNo PhysicalFirstCol PhysicalLastCol PhysicalIsOpen
A            A      integer       integer FALSE           FALSE            FALSE                 1                1               1           TRUE
B            B      integer       integer FALSE           FALSE            FALSE                 2                1               1           TRUE
ffdf data
   A  B
1 21 a 
2 22 b 
3 23 c 
4 31 k 
5 32 l 
6 33 m 
7 34 n 
8 41 u 
9 42 v 
```

# cron - Plesk 计划备份停止工作 - 如何修复？

> ID：11933288
> 
> 赞同：0
> 
> 时间：2012-08-13T11:20:38.030
> 
> 标签：cron, centos, backup, plesk

我的 Plesk 每周计划备份突然停止工作。他们只是从几周前就不再执行了。当我手动触发备份时，一切正常。可能出了什么问题，我应该先检查什么？

我在 Linux Cent OS 5.3 上运行 Plesk 9.5.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:23:26.277

您将 mysql 更新到 5.5。它破坏了备份。psa 数据库中的以下查询可能会修复它：

`ALTER TABLE BackupsScheduled MODIFY COLUMN backup_day INTEGER;`

# java - 两个日期对象的总和

> ID：11933289
> 
> 赞同：0
> 
> 时间：2012-08-13T11:20:39.673
> 
> 标签：java

```
ArrayList<WayRegisterBean> subList=new ArrayList<WayRegisterBean>();
Object[] obj1=(Object[])atItr1.next();
String s1Fxxno=(String)obj1[0];
int s1Docno=(Integer)obj1[1];
Date s1From=(Date)obj1[2];
Date s1To=(Date)obj1[3];
String s1Trans=(String)obj1[4];
String s1Bilamt=(String)obj1[5];
int s1Pcode=(Integer)obj1[6];
to=s1From + s1To; 
```

请帮助我正在尝试添加两个日期，例如 s1From + s1To 但不知道如何添加它所以请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:27:48.960

如果您使用的是 Date 对象，您可以在下面尝试。

```
Date s1From=(Date)obj1[2]; 
Date s1To=(Date)obj1[3];  
long sum = s1From.getTime() + s1To.getTime(); 
Date sumDate = new Date(sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:52:38.690

使用`getTime()`with 方法**返回从 1970 年 1 月 1 日到 Date 对象中的日期的 long 值。**

```
Date s1From=(Date)obj1[2]; 
Date s1To=(Date)obj1[3]; 

long totalDate = s1From.getTime() + s1To.getTime();

Date d = new Date(totalDate); 
```

您也可以使用`setTime()`方法，像这样..

```
Date d = new Date();
d.setTime(totalDate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:26:46.093

您可以通过添加获得所需的结果：

```
long toLongDate = s1From.getTime() + s1To.getTime();

to = new Date(toLongDate); 
```

希望这有效。

# php - Zfdatagrid 0.8 向 CRUD 表单添加元素

> ID：11933291
> 
> 赞同：0
> 
> 时间：2012-08-13T11:21:00.637
> 
> 标签：php, zend-framework, zfdatagrid

我正在使用 ZendFramework 1.11 和 Zfdatagrid 0.8。

我使用自己的 db-model 作为源创建了一个网格和一个 CRUD 表单。然后我在 CRUD 表单中添加了一些额外的元素，如下所示：

$element = new Zend_Form_Element('element', array('label'=>'new element:')); $grid->getForm(1)->addElement($element);

新元素被正确地添加到表单中，但是所有其他表单元素都在表格中，添加的元素作为列表元素放置在实际表单之上。而不是这个，我想将添加的元素作为表格的一部分，以实现表格的正确外观。有没有人以前遇到过这个问题或知道如何解决这个问题？任何帮助表示赞赏！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:22:51.360

```
 $elementDecorators = array(
            'ViewHelper',
            'Errors',
            array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'element')),
            array('Label', array('tag' => 'td', 'class' => 'form_label')),
            array(array('row' => 'HtmlTag'), array('tag' => 'tr')),
        );

$this->_grid->getForm(1)->addElement('select', 'group', array(
            'required' => true,
            'value' => 'rtrt',
            'label' => 'Group',
            'multiOptions' => $list_contactgroup,
            'order' => 5, 'decorators' => $elementDecorators
        )); 
```

# wso2 - WSO2 和 LDAP 端点服务

> ID：11933294
> 
> 赞同：1
> 
> 时间：2012-08-13T11:21:21.323
> 
> 标签：wso2, esb, wso2esb

我目前正在评估 WSO2，如果它可以满足我的项目要求
，我有不同的移动应用程序将连接到我们的 ESB，它们都将使用不同的 LDAP 服务器来验证他们的用户以访问应用程序，什么是通过 WSO2 ESB 实现这一目标的最佳方法，
我的意思是将多个 LDAP 登录服务配置为端点服务WSO2（存储可以访问 WSO2 的用户）与我需要的内容无关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:52:00.940

您可以使用 WSO2 身份服务器来管理您的用户。您可以使用内部（嵌入式用户存储）或外部用户存储，例如 Active Directory。如果您使用 Identity Server，您将能够继承它的功能，您可以轻松地与 WSO2 ESB 集成。

这些链接对您的实现很有用。

[1] [http://wso2.org/project/solutions/identity/3.2.3/docs/user-core/admin_guide.html](http://wso2.org/project/solutions/identity/3.2.3/docs/user-core/admin_guide.html)

[2] [http://wso2.org/library/articles/2011/06/securing-web-service-integration](http://wso2.org/library/articles/2011/06/securing-web-service-integration)

# qt - “使应用程序可编写脚本”是什么意思，我们应该什么时候使用它？

> ID：11933295
> 
> 赞同：1
> 
> 时间：2012-08-13T11:21:27.497
> 
> 标签：qt, qtscript

最近我注意到 Qt 中的一些类称为 Qt 脚本模块，根据文档，它用于使应用程序可编写脚本！这是我的问题：

1.  这是什么意思？使应用程序可编写脚本？
2.  我们应该什么时候使用它？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:22:16.593

什么是脚本
~~~~~~~~~~~~~~~~~
大多数超级大的软件都带有很多功能。有趣的是，添加的许多新功能都是基本现有功能的组合。但是一个人不能继续添加新的 C++ 代码来创建一个简单的功能……他们可以交互地编写一个脚本，在一个串联过程中执行现有的操作并完成新功能的工作。

最好的例子..Blender（Python 脚本）。如果可以在这种情况下查看.. Blender 具有 1000 多个功能。它们中的大多数实际上是脚本化的功能，以有序的方式调用现有功能。

QtScript
~~~~~~~~
这个Qt框架模块提供了一个javascript解释器（Google v8 js引擎）供你使用。您可以从 javascript 调用 QObject 类和相关方法，因为它们是 js 的本机函数（仅在您的应用程序中）。QScriptable 类将 C++ QObject 的属性和方法的内部结构暴露给 javascript 引擎。

什么时候使用
~~~~~~~~~~~
当你​​有一个包含很多模块的庞大应用程序，并且你想*在将它编译成机器码之后仍然保留你的应用程序的可编程性*，那么你必须使用脚本。

# mfc - 属性表对话框在 Windows 7 中不显示属性

> ID：11933297
> 
> 赞同：0
> 
> 时间：2012-08-13T11:21:34.207
> 
> 标签：mfc

我有一个应用程序，它具有带有 PropertyPage 的 Propertysheet 对话框，并且对话框底部有三个按钮。PropertySheet 和 PropertyPage 使用 MFC CProperySheet 和 CpropertyPage 创建。

对话框在 windows xp 中显示正常，但在 windows 7 中，它部分剪切了三个按钮

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:02:52.590

这可能是由于字体大小不是默认大小（检查显示属性中的 DPI）。如果您手动调整属性表的大小，您需要注意对话单元将乘以一个因子来计算给定 DPI 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:44:31.027

让我澄清一下：

您是否在对话框中嵌入属性表？

如果是：

1.  有什么理由这样做吗？
2.  您提到的按钮属于对话框或属性表？
3.  您是否正在调整属性表的大小？
4.  如果按钮属于对话框，它们是否被对话框底部剪切？

如果您发布 XP 和 7 中的对话框快照，则最好。

# java - 在 Google Application Engine 上使用 Google 电子表格 API 时出现 NoClassDefFoundError

> ID：11933299
> 
> 赞同：0
> 
> 时间：2012-08-13T11:21:41.933
> 
> 标签：java, google-app-engine, google-sheets

我按照[此链接](https://developers.google.com/google-apps/spreadsheets/)中列出的说明进行操作，一切顺利。但是，当我尝试在 App 引擎上运行应用程序时，出现以下错误。

```
java.lang.NoClassDefFoundError: com/google/gdata/client/spreadsheet/SpreadsheetService
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
at java.lang.Class.getConstructor0(Class.java:2699)
at java.lang.Class.newInstance0(Class.java:326)
at java.lang.Class.newInstance(Class.java:308) 
```

[我在这里](http://productforums.google.com/forum/#!category-topic/apps/general-discussion/1ILYKJbtW1E%5B1-25%5D)看到其他人似乎也面临过类似的问题 。

我认为这可能是不兼容的问题，并尝试将我的 AppEngine SDK 升级到 1.7.0 并将 GWT SDK 升级到 2.4.0，但没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:28:11.403

首先，[添加适当的罐子](https://developers.google.com/appengine/articles/java/retrieving_gdata_feeds#configure)，

其次，[编辑您的 Eclipse 构建路径](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)。

# svn - 如何在windows中控制svnserve中的日志

> ID：11933301
> 
> 赞同：1
> 
> 时间：2012-08-13T11:21:49.727
> 
> 标签：svn

我在 Windows 7 上使用 svn 1.7.4

如何配置日志文件

对于单个客户端登录（使用 Tortoisesvn 打开存储库）进程，它会生成大量无法理解的日志。

```
7668 2012-08-13T09:21:53.673494Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.677495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.679495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 -
7668 2012-08-13T09:21:53.679495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-latest-rev
7668 2012-08-13T09:21:53.679495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos reparent /
7668 2012-08-13T09:21:53.680495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos check-path /@13
7668 2012-08-13T09:21:53.680495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-dir / r13 props
7668 2012-08-13T09:21:53.680495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.682495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.682495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-latest-rev
7668 2012-08-13T09:21:53.682495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos reparent /
7668 2012-08-13T09:21:53.682495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos stat /@13
7668 2012-08-13T09:21:53.682495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-locks /
7668 2012-08-13T09:21:53.683495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.683495Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-latest-rev
7668 2012-08-13T09:21:53.683495Z 127.0.0.1 harry Users/venkateshkumarg/Desktop/SVN/svn1.7/Repos get-dir / r13 text
7668 2012-08-13T09:21:53.712498Z 127.0.0.1 harry Users/venkateshkumarg/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.714498Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.717499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) / SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) /tags SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-latest-rev
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos reparent /tags
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos stat /tags@13
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos open 2 cap=(edit-pipeline svndiff1 absent-entries depth mergeinfo log-revprops) /Test SVN/1.7.2 TortoiseSVN-1.7.4.22459
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-latest-rev
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos reparent /Test
7668 2012-08-13T09:21:53.723499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos stat /Test@13
7668 2012-08-13T09:21:53.724499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-locks /Test
7668 2012-08-13T09:21:53.724499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-dir /Test r13 text
7668 2012-08-13T09:21:53.724499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-locks /tags
7668 2012-08-13T09:21:53.725499Z 127.0.0.1 harry Users/satheesh/Desktop/SVN/svn1.7/Repos get-dir /tags r13 text 
```

我需要控制日志，即对于某些事件，例如登录，让我需要在日志文件中记录单个条目......就像

```
[Event-name] success [user-name] - time

eg: OpenRepos success harry 2.39-8/13/12
Set label Success harry 2.45-8/13/12 
```

在svnserve中可以吗？如果是，请帮助我。

# android - 增加安卓模拟器的密度

> ID：11933310
> 
> 赞同：1
> 
> 时间：2012-08-13T11:22:31.350
> 
> 标签：android, android-3.0-honeycomb

当我增加蜂窝模拟器的密度时，它总是显示 160，我想创建超高密度的模拟器。如何创建它？

# django - Django Haystack - 搜索非索引多对多字段

> ID：11933315
> 
> 赞同：6
> 
> 时间：2012-08-13T11:22:41.260
> 
> 标签：django, many-to-many, django-haystack

有没有办法只将模型的过滤部分作为 SeachQuerySet？

就像是：

查询 = SearchQuerySet().models(Entry.filter(categories__name='something'))

代替

查询 = SearchQuerySet().models(Entry)

我要过滤的字段是多对多字段且未编入索引。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T11:58:45.483

搜索索引不存储任何关系，因此它是“平面”的。您只能将类别的 ID 添加到索引中`Entry`（请注意，您必须为此使用`prepare_`- 方法）：

```
class EntryIndex(indexes.SearchIndex, indexes.Indexable):
    # your other fields
    categories = MultiValueField()

    def prepare_categories(self, obj):
        return [category.pk for category in obj.categories.all()] 
```

您可以执行以下操作：

```
category = Category.objects.get(name='something')
sqs = SearchQuerySet().models(Entry).filter(categories=category.pk) 
```

# java - 如何只选择jtable中一行中的单元格？

> ID：11933317
> 
> 赞同：3
> 
> 时间：2012-08-13T11:22:54.113
> 
> 标签：java, swing, jtable, listselectionlistener

我有一个由多行和多列组成的 JTable。我想让单元格可选，但一次只能在一行中。因此，例如，当我单击第三行第五列的单元格时，我可以向左或向右拉鼠标并选择更多单元格，但只能在该特定行中，而不是在上面或下面的行中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T11:38:33.853

使用界面中的[`setSelectionMode()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html#setSelectionMode%28int%29)方法`ListSelectionModel`，并将选择模式设置为[`ListSelectionModel.SINGLE_SELECTION`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListSelectionModel.html#SINGLE_SELECTION)。

这将配置`JTable`为*一次*选择一行，阻止选择多行。

要选择单个单元格，请将上述内容与[`setColumnSelectionAllowed(true)`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/TableColumnModel.html#setColumnSelectionAllowed%28boolean%29)on结合使用`TableColumnModel`，您应该会得到所需的内容。

# javascript - 右表始终在 XSL 的窗口中居中

> ID：11933320
> 
> 赞同：0
> 
> 时间：2012-08-13T11:23:11.570
> 
> 标签：javascript, html, xml, xslt

我试图寻找这个答案并看到接近它的问题，但无法解决我的问题[@HTML 表格标题在查看大表格时始终显示在窗口顶部](https://stackoverflow.com/questions/1030043/html-table-headers-always-visible-at-top-of-window-when-viewing-a-large-table)。

基本上，我们继承了一个具有 2 个 HTML 表的 XSL 页面，当您将鼠标悬停在主表上具有值“yes”的行上时，它会在右侧显示与该行相关的隐藏的第二个表，而如果“no”则不会显示任何东西。但是，如果您通过 XSL 显示了很多结果，那么当您向下滚动时，您将无法看到该表。

我只是想知道是否有一种方法可以在每次将鼠标悬停在 value 上时强制 1 个右隐藏表保持在屏幕顶部 yes 即使这意味着将 XSL 结果设置为具有滚动条？

希望我已经说清楚了，请查看我遇到问题的代码摘录。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>

<script>
function showme(show)
{
  <xsl:for-each select="root/Action">document.getElementById('<xsl:value-of select="@Type"/>').style.display='none';
  </xsl:for-each>
  document.getElementById('summary').style.display='none';
  document.getElementById(show).style.display='inline';
}
</script>

<xsl:for-each select="root/Action">
<span style="display:none">
 <xsl:attribute name="id"><xsl:value-of select="@Type"/></xsl:attribute>
 <table class="lgreenback"><tr class="small"><td class="green">Details for: <b><xsl:value-of select="@Type"/> Actions:</b> &#160; <a onmouseover="style.cursor='hand'" onclick="showme('summary')">&lt;&lt; Back</a></td></tr></table><br/>
 <table cellspacing="0" cellpadding="2" class="bdrnw">
 <tr class="small">
   <td class="lgheadercell">Date:</td>
   <td class="lgheadercell">&#160;</td>
   <td class="lgheadercell">Time:</td>
   <td class="lgheadercell">&#160;</td>
   <td class="lgheadercell">Done By:</td>
   <td class="lgheadercell">&#160;</td>
   <td class="lgheadercell">B&amp;S Ref:</td>
   <td class="lgheadercell">&#160;</td>
    <td class="lgheadercell">Assocs:</td>
 </tr>
 <xsl:for-each select="Case">
   <tr class="smallerstill">

   <xsl:choose>
   <xsl:when test="count(Linked) > 0">
     <xsl:attribute name="onmouseover">style.background='#f6f6f6', style.cursor='hand', document.getElementById('<xsl:value-of select="@id"/>').style.display='inline'</xsl:attribute>
     <xsl:attribute name="onmouseout">style.background='#ffffff', document.getElementById('<xsl:value-of select="@id"/>').style.display='none'</xsl:attribute>
   </xsl:when>
   <xsl:otherwise>
     <xsl:attribute name="onmouseover">style.background='#f6f6f6', style.cursor='hand'</xsl:attribute>
     <xsl:attribute name="onmouseout">style.background='#ffffff'</xsl:attribute>
   </xsl:otherwise>
   </xsl:choose>

     <td><xsl:value-of select="Date"/></td>
     <td></td>
     <td><xsl:value-of select="Time"/></td>
     <td></td>
     <td><xsl:value-of select="Realname"/></td>
     <td></td>
     <td><xsl:value-of select="substring(Client,1,3)" />-<xsl:value-of select="substring(Client,4,1)" />&#160;<xsl:value-of select="Ref"/></td>
     <td></td>
     <td align="center">
       <xsl:choose>
     <xsl:when test="count(Linked) > 0">Yes</xsl:when>
     <xsl:otherwise>No</xsl:otherwise>
   </xsl:choose>
 </td>
   </tr>
 </xsl:for-each>
</table>
</span>
</xsl:for-each>

</td><td valign="top" align="left">

<img src="../images/spacer.gif" height="41" width="120"/>
<xsl:for-each select="/root/Action/Case[count(Linked) > 0]">
  <span style="display:none">
<xsl:attribute name="id"><xsl:value-of select="@id"/></xsl:attribute>
<table cellspacing="0" cellpadding="2" class="bdrnw">
<tr class="small"><td class="lgheadercell">Assocs:</td></tr>
  <xsl:for-each select="Linked">
  <tr class="smallerstill"><td><xsl:value-of select="substring(@cl,1,3)" />-<xsl:value-of select="substring(@cl,4,1)" />&#160;<xsl:value-of select="@nm"/></td></tr>
  </xsl:for-each>
</table>
</span>

</xsl:for-each>

</td></tr></table>

</html>
</xsl:template>
</xsl:stylesheet> 
```

需要帮助请叫我。

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:36:25.647

使用右侧表格上的 CSS position:fixed 属性，或围绕它的 <div> 。

## CSS 示例

```
#some-element {
  position: fixed;
  right: 0;
  top: 0%;
} 
```

## 参考

1.  [http://www.w3.org/Style/Examples/007/menus.en.html](http://www.w3.org/Style/Examples/007/menus.en.html)（完美的例子！）
2.  [http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning)
3.  [http://davidwalsh.name/css-fixed-position](http://davidwalsh.name/css-fixed-position)
4.  [http://caniuse.com/css-fixed](http://caniuse.com/css-fixed)

# excel - 如何将单元格值标记为必填

> ID：11933322
> 
> 赞同：0
> 
> 时间：2012-08-13T11:23:16.113
> 
> 标签：excel

如何在excel中将单元格值标记为必填项。我有一张包含 3 个标题的工作表，我想从一组可能的值中将 header3 的列值标记为必填（即，即使用户没有选择值，也应该为单元格设置默认值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:30:39.490

在要执行这些约束的单元格上使用验证。

喜欢：选择要放置此约束的单元格范围。

现在打开`Data Validation`Dialog 并`List`从`Allow`下拉菜单中选择`Setting Tab`。以逗号分隔的值提供您的`source`（可能的值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:18:43.310

如果你想借助 c# 代码试试这个： -

```
Worksheet ws;
Range oRng = ws.get_Range(StartCol + StartRow, EndCol + EndRow);
oRng.Validation.Add(XlDVType.xlValidateDecimal, XlDVAlertStyle.xlValidAlertStop, XlFormatConditionOperator.xlBetween, "StartVal", "EndVal");
                                oRng.Validation.IgnoreBlank = true;
                                oRng.Validation.InCellDropdown = true;
                                oRng.Validation.ErrorTitle = "Input Error";
                                oRng.Validation.ErrorMessage = "Please enter a numeric 
```

“StartVal”和“EndVal”之间的值”；oRng.Validation.ShowError = true；

其中 ws 是工作表对象，StartVal 和 EndVal 是要检查其验证的值的范围

# windows - 在 explorer-shell-extension 中创建子菜单？

> ID：11933326
> 
> 赞同：6
> 
> 时间：2012-08-13T11:23:25.953
> 
> 标签：windows, registry, explorer, submenu, shell-extensions

我创建了一个更改文件名的小脚本（用 替换空格`_`等）。我用参数控制这个脚本。

现在我想将它包含到我的 explorer-shell-extention 中，所以我尝试添加以下注册表项：

```
HKEY_CLASSES_ROOT\*\shell\edit filname method a\command
HKEY_CLASSES_ROOT\*\shell\edit filname method b\command
HKEY_CLASSES_ROOT\*\shell\edit filname method c\command 
```

等等。

它工作正常，但我想将所有这些方法打包到一个子菜单中。有点像“打开方式”选项。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-29T03:25:56.650

您可以编辑它以扩展您的需求。

```
Windows Registry Editor Version 5.00

;           TOOLS MENU

            [HKEY_CLASSES_ROOT\*\shell\contexttools_anchor]
                "MUIVerb"="SendTo Tools"
                "Icon"="...YOUR PATH...\\files\\Tools.ico"
            "ExtendedSubCommandsKey"="*\\ContextMenus\\contexttools"
                ; "Extended"=""
; __________________________________________________________________________ >

    [HKEY_CLASSES_ROOT\*\ContextMenus\contexttools\Shell\001cmd]
        "MUIVerb"="Notepad 2"
        "Icon"="...YOUR PATH...\\Tools\\app1.exe"

            [HKEY_CLASSES_ROOT\*\ContextMenus\contexttools\Shell\001cmd\command]
                @="...YOUR PATH...\\Tools\\app1.exe \"%1\""
; __________________________________________________________________________ >
[HKEY_CLASSES_ROOT\*\ContextMenus\contexttools\Shell\005seperator]
"CommandFlags"=dword:00000008
; __________________________________________________________________________ >

    [HKEY_CLASSES_ROOT\*\ContextMenus\contexttools\Shell\006cmd]
        "MUIVerb"="Hash Compare"
        "Icon"="...YOUR PATH...\\Tools\\app2.exe"

            [HKEY_CLASSES_ROOT\*\ContextMenus\contexttools\Shell\006cmd\command]
                @="...YOUR PATH...\\Tools\\app2.exe \"%1\""
; __________________________________________________________________________ > 
```

# php - 开箱即用的魔法.. 使用 PDO

> ID：11933327
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:23:26.640
> 
> 标签：php, mysql, pdo, zend-server-ce

```
 try{
            $pdo = new PDO("mysql:host=localhost;dbname=name", 'user', 'pass');
            $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $statement = "SELECT id FROM users WHERE email LIKE ?";
            $stmt = $pdo->prepare($statement);
            $stmt->bindParam(1, htmlspecialchars($this->params['email']), PDO::PARAM_STR);
            $stmt->setFetchMode(PDO::FETCH_ASSOC);
            $row = $stmt->fetch();

        }catch (PDOException $e) {
            echo $e;
        }

        print_r($row[0]['id']);

        if(is_int($row[0]) > 0) {
            throw new Exception();
        } elseif(is_int($row[0]) > 0) {
            //Generating encryption
            $crypt = mcrypt_module_open(MCRYPT_RIJNDAEL_256, '', MCRYPT_MODE_CBC, '');
            $iv = mcrypt_create_iv(32, MCRYPT_RAND);
            $key = mcrypt_create_iv(32, MCRYPT_RAND);
            $password = mcrypt_create_iv(12, MCRYPT_RAND);
            mcrypt_generic_init($crypt, $key, $iv);
            $crypted = mcrypt_generic($crypt, $password);

            $activation = mcrypt_create_iv(128, MCRYPT_RAND);

            mcrypt_generic_deinit($crypt);

            try{
                $pdo = new PDO("mysql:host=localhost;dbname=name", 'user', 'pass');
                $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                $statement = "INSERT INTO users(name, password, cryptokey, cryptovector, email, activation_code, active, usertype) values(?, ?, ?, ?, ?, ?, 0, ?); ";
                $stmt = $pdo->prepare($statement);
                $stmt->bindParam(1, mysql_real_escape_string($this->params['name']), PDO::PARAM_STR);
                $stmt->bindParam(2, $password, PDO::PARAM_STR);
                $stmt->bindParam(3, $key, PDO::PARAM_STR);
                $stmt->bindParam(4, $iv, PDO::PARAM_STR);
                $stmt->bindParam(5, mysql_real_escape_string($this->params['email']), PDO::PARAM_STR);
                $stmt->bindParam(6, $activation, PDO::PARAM_STR);
                $stmt->bindParam(7, mysql_real_escape_string($this->params['acctype']), PDO::PARAM_STR);

                $stmt = null;

            }catch (PDOException $e) {
                print_r($e);
            }

            $smarty = new Smarty();

            $smarty->assign('NAMES',$this->params['name']);
            $smarty->assign('UNIT', $this->params['acctype']);
            $smarty->assign('KEYPASS',$password);
            $smarty->assign('NAMES',$this->params['name']);
            $smarty->assign('ACTIVATION_LINK','https://localhost/profile.php?action=activate&key='.urlencode($activation).'&email='.urlencode($this->params['email']));

            $msgBody = $smarty->fetch('templates/default/mail.html');

            try {
                $mail = new PHPMailer();

                $mail->Host = "server";
                $mail->SMTPAuth = TRUE;
                $mail->Host = "server";
                $mail->Port = 25;
                $mail->Username = "email";
                $mail->Password = "password";

                $mail->AddAddress($this->params['email']);
                $mail->SetFrom('test@example', 'test Services');

                $mail->Subject = 'Confirm registration and login credentials.';
                $mail->MsgHTML($msgBody);    // attachment
                #$mail->Send();

                echo 'localhost/profile.php?action=verify&key='.base64_encode($activation).'&email='.urlencode($this->params['email']);
            } catch (phpmailerException $e) {
                #echo $e; //Pretty error messages from PHPMailer
                print_r($e);
            } catch (Exception $e) {
                echo $e; //Boring error messages from anything else!
                print_r($e);
            }

        }

    } 
```

所以这是我的身份验证方法。__construct($arg1, $arg2); $arg1 获取操作，$arg2 是 $self::params 获取它需要的变量，在这种情况下是电子邮件名称和密码。它打印激活链接用于测试目的，当它打印时，我会在它后面看到 Array()。具有 isset($row) 的 if 语句没有执行它所具有的功能，因为它告诉我的脚本该行已设置。当我 print_r 它时，我什么都看不到...当 echo 我看到 Array( ).... 我使用 Zend 服务器 CE 和 PHP 5.4，我有一个结构如下的表：

> id，-名称，-密码，-cryptokey，-cryptovector，-email，-activation_code，-active，-usertype
> 1，-J.Smith，-pwd，-key，-vector，-some@mail，-激活码， - 0, - 候选人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:25:36.377

您的代码中缺少`$stmt->execute();`。这是我现在在 Eclipse 中碰巧拥有的代码示例：

```
$sql="select id from users where userName=:userName";
$this->prepared = $this->mysqlAccess->con->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$this->prepared->execute(array(':userName' => $this->username)); 
```

准备语句时，需要先执行它，然后才能查询结果。

# javascript - 函数的返回对象未从 jquery 中的 $.post 定义

> ID：11933332
> 
> 赞同：0
> 
> 时间：2012-08-13T11:23:37.220
> 
> 标签：javascript, jquery

我有一个从 php 代码块返回数据对象的 jquery post 函数。

```
$.post("get_chat_history.php", {
    item_id : item_id,
    participant_1 : participant_1,
    participant_2 : participant_2
}, function(data) {
    alert(data);

    return data;

}); 
```

这是从另一个 javascript 文件中的以下函数调用的

```
var data = getChatHistory(current_member_id,item_global["user"]    ["member_id"],item_global["id"]);
alert(data); 
```

现在在 $.post 中，alert(data) 以 json 格式抛出正确的值，但是当我测试返回给调用函数的相同值时，我得到了未定义的结果。

因为我想保持这个函数通用并且可以从其他地方调用，所以我缺少什么？

问候，

萨帕托斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:26:30.447

那是因为这个函数运行 asyncronim 并将数据返回给匿名函数`function(data) {}`。使用回调。

这是示例：

```
function getFoo(callback){
    $.get('somepage.html', function(data){
        callback(data)
    })
}
getFoo(function (data){
     // do something with data
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:30:16.937

您面临的问题是 jQuery.post 是异步的。当 getChatHistory 被调用时，它还没有收到服务器的回复，所以它是`undefined`。

为此，我将实现`getChatHistory`一个函数，该函数将您需要传递给服务器的数据，以及一个在触发“成功”部分时执行的函数。

[有关回调的更多信息](http://www.impressivewebs.com/callback-functions-javascript/)。

# opengl - GLSL 粒子的渲染（premult）

> ID：11933335
> 
> 赞同：0
> 
> 时间：2012-08-13T11:23:43.453
> 
> 标签：opengl, glsl, particles, premultiplied-alpha

我一直在尝试让粒子渲染库与我的着色器一起使用。它与固定功能完美结合，我知道我的目标是什么。我只是不确定如何进行最后的混合。

它将这样的粒子生命打包到 DWORD 中，并将 dword 设置为顶点属性之一。一个四边形有 4 个这样的顶点。3 个浮动位置，3 个浮动正常，4 个字节漫反射，2 个浮动 uv。我应该如何处理 4byte 属性，在我的 glsl 着色器中将其用作 vec4 还是 float 属性？另外，由于这个库使用预乘 alpha，我应该使用什么样的混合方程？该库是 pyro 粒子库。

```
int ir = (int) (r * 255.0f + 0.5f);
int ig = (int) (g * 255.0f + 0.5f);
int ib = (int) (b * 255.0f + 0.5f);
int ia = (int) (a * Particle.Visibility * 255.0f + 0.5f);
DWORD diffuse;

#ifdef __BIG_ENDIAN__
if (GetLibrary()->GetGraphicsDevice()->IsRGBA())
diffuse = (ir << 24) | (ig << 16) | (ib << 8) | ia;
else diffuse = (ib << 24) | (ig << 16) | (ir << 8) | ia;
#else
if (GetLibrary()->GetGraphicsDevice()->IsRGBA())
diffuse = ir | (ig << 8) | (ib << 16) | (ia << 24);
else diffuse = ib | (ig << 8) | (ir << 16) | (ia << 24);
#endif /* __BIG_ENDIAN__ */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:19:22.830

您的 4x 无符号字节将转换为`vec4`（浮点类型）。`glVertexAttribPointer`始终将任何输入类型转换为着色器中的浮点数。

如果您选择 ，它们的值范围为 0-255，否则如果您选择，`normalize == GL_FALSE`它们的范围为 0-1 *(byte/255.f)*`normalize == GL_TRUE`。

至于您关于预乘 alpha 的问题，如果您不想在混合操作中将源数据乘以 alpha，则只需使用：

```
glBlendFunc(GL_ONE,                 //multiply source value by 1
            GL_ONE_MINUS_SRC_ALPHA  //multiply destination value by (1-src_alpha)
            ) 
```

# ruby-on-rails - 我的生产数据库缺少一些列。我怎样才能安全地恢复它们？

> ID：11933336
> 
> 赞同：0
> 
> 时间：2012-08-13T11:23:51.303
> 
> 标签：ruby-on-rails, rails-migrations

在对已经投入生产的 Rails 应用程序进行一些重大修改后，我将所有内容推送到服务器，运行我的迁移，然后发现了主要问题。

事实证明，迁移尚未在我的生产数据库中创建 2 个数据库列。当我浏览我的迁移时，没有一个创建这些列。我猜我在某个时候用 git 犯了一个错误并且丢失了这些文件。

我想知道的是如何在我的生产数据库中安全地创建这些列。如果我只是创建一个新的迁移来制作这 2 列，推送到生产环境并运行迁移，我认为一切都会奏效，但是当这些迁移在我的开发数据库上运行并且列已经存在时，这会导致问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:53:39.643

尝试这样做[检查列是否存在](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/column_exists%3F)

创建新迁移并添加检查列是否存在，如果不存在，则使用 add_column(....) 创建列。

这不会破坏您的开发和生产代码，其他使用相同 git 存储库的代码也将受益，而不是评论操作并在完成后取消注释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:29:48.747

是的，这会在您的开发数据库上引起一些问题，只需在您的开发数据库上运行 rake db:migrate 期间注释 add_column 命令，并在该操作后取消注释。

# image-processing - 形态命中未命中变换

> ID：11933337
> 
> 赞同：4
> 
> 时间：2012-08-13T11:23:56.487
> 
> 标签：image-processing, opencv

我将 OpenCV 用于我的图像处理算法，并试图修复字符中参差不齐的边缘。我读到形态Hit-Miss 变换是一个非常好的解决方案。是否有任何开源实现？

或者是否有任何其他算法可用于修复参差不齐的边缘？

![一些需要修复的样本字母](../Images/0b62ce314c2af5040d5ba6ba01041706.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:47:10.657

可以在[这里](http://opencv-code.com/tutorials/hit-or-miss-transform-in-opencv/)找到一个简单的 hit-and-miss 实现：

```
#include <opencv2/imgproc/imgproc.hpp>

// Hit-or-miss transform function
void hitmiss(cv::Mat& src,    // Source image, 8 bit single-channel matrix
             cv::Mat& dst,    // Destination image 
             cv::Mat& kernel) // Kernel. 1=foreground, -1=background, 0=don't care
{
    CV_Assert(src.type() == CV_8U && src.channels() == 1);

    cv::Mat k1 = (kernel == 1) / 255;
    cv::Mat k2 = (kernel == -1) / 255;

    cv::normalize(src, src, 0, 1, cv::NORM_MINMAX);

    cv::Mat e1, e2;
    cv::erode(src, e1, k1);
    cv::erode(1 - src, e2, k2);

    dst = e1 & e2;
} 
```

但我认为您只能通过膨胀来解决问题，如[本幻灯片第 7 页](http://ee.lamar.edu/gleb/dip/10-1%20-%20Morphological%20Image%20Processing.pdf)中的示例（取自 Gonzales 等人的“数字图像处理”一书。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T14:14:46.047

[使用Marvin](http://marvinproject.sourceforge.net)组合形态膨胀和腐蚀产生以下结果：

![在此处输入图像描述](../Images/b92308c9f3f438f5a5cc456dd19f433a.png)

源代码：

```
package characterRestoration;

import marvin.image.MarvinColorModelConverter;
import marvin.image.MarvinImage;
import marvin.io.MarvinImageIO;
import marvin.plugin.MarvinImagePlugin;
import marvin.util.MarvinPluginLoader;

public class CharacterRestoration {

MarvinImage                 image = MarvinImageIO.loadImage("./res/character_in.png");
private MarvinImagePlugin   dilation = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.morphological.dilation");
private MarvinImagePlugin   erosion = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.morphological.erosion");

private boolean[][]         matrixD = new boolean[][]{
                            {false,false,false,false,false,false,false,false,false},
                            {false,false,false,false,false,false,false,false,false},
                            {false,false,false,false,false,false,false,false,false},
                            {false,false,true,true,true,true,true,true,true},
                            {false,false,true,true,true,true,true,true,true},
                            {false,false,true,true,true,true,true,true,true},
                            {false,false,false,false,false,false,false,false,false},
                            {false,false,false,false,false,false,false,false,false},
                            };

private boolean[][]         matrixE = new boolean[][]{
                            {true,true,true},
                            {true,true,true},
                            {true,true,true}
                            };          

public CharacterRestoration(){
    // Convert image to binary format
    image = MarvinColorModelConverter.rgbToBinary(image, 125);

    // Morphological Dilation
    dilation.setAttribute("matrix", matrixD);
    dilation.process(image.clone(), image);

    // Morphological Erosion
    erosion.setAttribute("matrix", matrixE);
    erosion.process(image.clone(), image);

    MarvinImageIO.saveImage(image, "./res/character_out.png");
}

public static void main(String[] args) {
    new CharacterRestoration();
} 
```

}

# wordpress - WooCommerce：如果在没有订单的情况下请求感谢页面，则重定向到购物车页面

> ID：11933338
> 
> 赞同：1
> 
> 时间：2012-08-13T11:23:57.183
> 
> 标签：wordpress, woocommerce

如果用户尝试直接访问“谢谢”页面，如果请求中没有订单，他们应该被重定向到 woocommerce 购物车。

我已经在 Wordpress 论坛上提交了上述功能请求。与此同时，我希望有人可以通过我的主题中的 functions.php 想到一种方法？

我无法使用 woocommerce_thankyou 钩子，因为当您刚登陆页面时它不会加载（只有当您通过结帐订单登陆感谢页面时才可以钩子）。

functions.php 中有没有办法我可以检查它是否是 woocommerce 感谢页面，还可以检查是否有全局 $order 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:02:36.457

```
add_action( 'template_redirect', 'your_template_direction_function' );
function your_template_direction_function() {
    global $woocommerce;
    if ($woocommerce && is_page( woocommerce_get_page_id( 'thanks' ) ) && sizeof($woocommerce->cart->get_cart())==0) :
        wp_redirect(get_permalink(woocommerce_get_page_id('cart')));
        exit;
    endif;
} 
```

# windows - 在 Windows 机器上设置 Jpgraph CACHE_DIR？

> ID：11933339
> 
> 赞同：1
> 
> 时间：2012-08-13T11:24:03.897
> 
> 标签：windows, apache, jpgraph

如何为运行 Apache 的 Windows 开发机器指定 CACHE_DIR？我尝试了以下没有运气：

```
define('CACHE_DIR','C:/root/public_html/mnc/jpgraph/cache/');
define('CACHE_DIR','C:\root\public_html\mnc\jpgraph\cache/');
define('CACHE_DIR','C:\root\public_html\mnc\jpgraph\cache\\'); 
```

还设置了以下内容：

```
define('USE_CACHE',true);
define('READ_CACHE',true); 
```

图创建如下：

```
$graph = new Graph(($tableWidth-2),($tableWidth/2),'auto',120);
...
$gdImgHandler = $graph->Stroke(_IMG_HANDLER);
// stream
$graphRendered = $filename;
$graph->img->Stream($graphRendered); 
```

我的img标签如下：

```
<img class="graphImg" src="<?php echo $graphRendered . '?' . uniqid()?>"> 
```

缓存文件夹的权限设置为*管理员*、*用户*、*系统*和经过*身份验证的用户的**完全控制*。 我的 Apache 根文件夹是 ****`C:\root\public_html\`****

# php - MySQL不会查询表

> ID：11933342
> 
> 赞同：0
> 
> 时间：2012-08-13T11:24:12.520
> 
> 标签：php, mysql

我有这个查询我正在尝试写入某个表，我已经通过取出几乎所有不同的值和变量来测试它，只留下用户名 wmy0 和 wmy0t 并且它成功查询，但是现在当我尝试做这一切它不会查询。是的，必须在我的数据库中拥有所有这些列。

还有没有更简单的方法可以做到这一点？如果你想了解更多关于我想要完成的事情，你可以访问

```
http://173.254.78.193/cash-flow-plan.php 
```

查看我正在处理的确切页面。这些是我试图插入名为`cash_flow_plan`. 我 100% 确定这是一个问题，比如......我有一个额外的逗号......或者在一个不应该出现的数字的末尾......但我一直在寻找几个小时......我可以'找不到它。所以现在我在这里试图找到一个更好的解决方案。

```
$sql="INSERT INTO $tbl_name (username, wmyt000, wmy1100t, wmy2000t, wmy0, wmy0t, wmy1, 
wmy1t, wmy2, wmy2t, wmy3, wmy3t, wmy4, wmy4t, wmy5, wmy5t, wmy6, wmy6t, wmy7, wmy7t, wmy8, 
wmy8t, wmy9, wmy9t, wmy10, wmy10t, wmy11, wmy11t, wmy12, wmy12t, wmy13, wmy13t, wmy14, 
wmy14t, wmy15, wmy15t, wmy16, wmy16t, wmy17, wmy17t, wmy18, wmy18t, wmy19, wmy19t, wmy20, 
wmy20t, wmy21, wmy21t, wmy22, wmy22t, wmy23, wmy23t, wmy24, wmy24t, wmy25, wmy25t, wmy26, 
wmy26t, wmy27, wmy27t, wmy28, wmy28t, wmy29, wmy29t, wmy30, wmy30t, wmy31, wmy31t, wmy32, 
wmy32t, wmy33, wmy33t, wmy34, wmy34t, wmy35, wmy35t, wmy36, wmy36t, wmy37, wmy37t, wmy38, 
wmy38t, wmy39, wmy39t, wmy40, wmy40t, wmy41, wmy41t, wmy42, wmy42t, wmy43, wmy43t, wmy44, 
wmy44t, wmy45, wmy45t, wmy46, wmy46t, wmy47, wmy47t, wmy48, wmy48t, wmy49, wmy49t, wmy50, 
wmy50t, wmy51, wmy51t, wmy52, wmy52t, wmy53, wmy53t, wmy54, wmy54t, wmy55, wmy55t, wmy56, 
wmy56t, wmy57, wmy57t, wmy58, wmy58t, wmy59, wmy59t, wmy60, wmy60t, wmy61, wmy61t, wmy62, 
wmy62t, wmy63, wmy63t, wmy64, wmy64t, wmy65, wmy65t, wmy66, wmy66t, wmy67, wmy67t, wmy68, 
wmy68t, wmy69, wmy69t, wmy70, wmy70t, wmy71, wmy71t, wmy72, wmy72t, wmy73, wmy73t, wmy74, 
wmy74t, wmy75, wmy75t, wmy76, wmy76t, wmy77, wmy77t, wmy78, wmy78t, wmy79, wmy79t, wmy80, 
wmy80t, wmy81, wmy81t, wmy82, wmy82t, wmy83, wmy83t, wmy84, wmy84t, wmy85, wmy85t, wmy86, 
wmy86t, wmy87, wmy87t, wmy88, wmy88t, wmy89, wmy89t, wmy90, wmy90t, wmy91, wmy91t, wmy92, 
wmy92t, wmy93, wmy93t, wmy94, wmy94t, wmy95, wmy95t, wmy96, wmy96t, wmy97, wmy97t, wmy98, 
wmy98t, wmy99, wmy99t, wmy100, wmy100t, wmy101, wmy101t, wmy102, wmy102t, wmy103, wmy103t, 
wmy104, wmy104t, wmy105, wmy105t, wmy106, wmy106t, wmy107, wmy107t, wmy108, wmy108t, wmy109, 
wmy109t, wmy110, wmy110t, wmy111, wmy111t, wmy112, wmy112t, wmy113, wmy113t, wmy114, wmy114t,
wmy115, wmy115t, wmy116, wmy116t, wmy117, wmy117t, wmy118, wmy118t, wmy119, wmy119t, wmy120, 
wmy120t, wmy121, wmy121t, wmy122, wmy122t, wmy123, wmy123t, wmy124, wmy124t, wmy125, wmy125t,
wmy126, wmy126t, wmy127, wmy127t, wmy128, wmy128t, wmy129, wmy129t, wmy130, wmy130t, wmy131, 
wmy131t, wmy132, wmy132t, wmy133, wmy133t, wmy134, wmy134t, wmy135, wmy135t, wmy136, wmy136t, 
wmy137, wmy137t, wmy138, wmy138t, wmy139, wmy139t, wmy140, wmy140t, wmy141, wmy141t, wmy142, 
wmy142t, wmy143, wmy143t, wmy144, wmy144t, wmy145, wmy145t, wmy146, wmy146t, wmy147, wmy147t, 
wmy148, wmy148t, wmy149, wmy149t, wmy150, wmy150t, wmy151, wmy151t, wmy152, wmy152t, wmy153, 
wmy153t, wmy154, wmy154t, wmy155, wmy155t, wmy156, wmy156t, wmy157, wmy157t, wmy158, wmy158t, 
wmy159, wmy159t, wmy160, wmy160t, wmy161, wmy161t, wmy162, wmy162t, wmy163, wmy163t, wmy164, 
wmy164t, wmy165, wmy165t, wmy166, wmy166t, wmy167, wmy167t, wmy168, wmy168t, wmy169, wmy169t, 
wmy170, wmy170t, wmy171, wmy171t, wmy172, wmy172t, wmy173, wmy173t, wmy174, wmy184t, wmy175, 
wmy175t, wmy176, wmy176t, wmy177, wmy177t, wmy178, wmy178t, wmy179, wmy179t, wmy180, wmy180t, 
wmy181, wmy181t, wmy182, wmy182t, wmy183, wmy183t, wmy184, wmy184t, wmy185, wmy185t, wmy186, 
wmy186t, wmy187, wmy187t, wmy188, wmy188t, wmy189, wmy189t, wmy190, wmy190t, wmy191, wmy191t, 
wmy192, wmy192t, wmy193, wmy193t, wmy194, wmy194t, wmy195, wmy195t, wmy196, wmy196t, wmy197, 
wmy197t, wmy198, wmy198t, wmy199, wmy199t, wmy200, wmy200t, wmy201, wmy201t, wmy202, wmy202t, 
wmy203, wmy203t, wmy204, wmy204t, wmy205, wmy205t, wmy206, wmy206t, wmy207, wmy207t, wmy208,
wmy208t, wmy209, wmy209t, wmy210, wmy210t, wmy211, wmy211t, wmy212, wmy212t, wmy213, wmy213t, 
wmy214, wmy214t, wmy215, wmy215t, wmy216, wmy216t, wmy217, wmy217t, wmy218, wmy218t, wmy219, 
wmy219t,wmy220, wmy220t, wmy221, wmy221t, wmy222, wmy222t, wmy223, wmy223t, wmy224, wmy224t, 
wmy225, wmy225t, wmy226, wmy226t, wmy227, wmy227t, wmy228, wmy228t, wmy229, wmy229t, wmy230, 
wmy230t) 

VALUES ('Aaron', '$_POST[wmyt000]', '$_POST[wmy1100t]', '$_POST[wmy2000t]', '$_POST[wmy0]',   
'$_POST[wmy0t]', '$_POST[wmy1]', '$_POST[wmy1t]', '$_POST[wmy2]', '$_POST[wmy2t]', '$_POST[wmy3]',    
'$_POST[wmy3t]', '$_POST[wmy4]', '$_POST[wmy4t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 
NULL, NULL, '$_POST[wmy10]',  '$_POST[wmy10t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 
NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy20]', '$_POST[wmy20t]', 
'$_POST[wmy21]', '$_POST[wmy21t]', '$_POST[wmy22]', '$_POST[wmy22t]', '$_POST[wmy23]', '$_POST[wmy23t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy40]', '$_POST[wmy40t]', '$_POST[wmy41]', '$_POST[wmy41t]', '$_POST[wmy42]', '$_POST[wmy42t]', '$_POST[wmy43]', '$_POST[wmy43t]', '$_POST[wmy44]', '$_POST[wmy44t]', '$_POST[wmy45]', '$_POST[wmy45t]', '$_POST[wmy46]', '$_POST[wmy46t]', '$_POST[wmy47]', '$_POST[wmy47t]', '$_POST[wmy48]', '$_POST[wmy48t]', '$_POST[wmy49]', '$_POST[wmy49t]', '$_POST[wmy50]', '$_POST[wmy50t]', '$_POST[wmy51]', '$_POST[wmy51t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy60]', '$_POST[wmy60t]', '$_POST[wmy61]', '$_POST[wmy61t]', '$_POST[wmy62]', '$_POST[wmy62t]', '$_POST[wmy63]', '$_POST[wmy63t]', '$_POST[wmy64]', '$_POST[wmy64t]', '$_POST[wmy65]', '$_POST[wmy65t]', '$_POST[wmy66]', '$_POST[wmy66t]', '$_POST[wmy67]', '$_POST[wmy67t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy80]', '$_POST[wmy80t]', '$_POST[wmy81]', '$_POST[wmy81t]', '$_POST[wmy82]', '$_POST[wmy82t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL,  '$_POST[wmy90]', '$_POST[wmy90t]', '$_POST[wmy91]', '$_POST[wmy91t]', '$_POST[wmy92]', '$_POST[wmy92t]', '$_POST[wmy93]', '$_POST[wmy93t]', '$_POST[wmy94]', '$_POST[wmy94t]', '$_POST[wmy95]', '$_POST[wmy95t]', '$_POST[wmy96]', '$_POST[wmy96t]', '$_POST[wmy97]', '$_POST[wmy97t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy110]', '$_POST[wmy110t]',  '$_POST[wmy111]', '$_POST[wmy111t]', '$_POST[wmy112]', '$_POST[wmy112t]', '$_POST[wmy113]', '$_POST[wmy113t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy130]', '$_POST[wmy130t]', '$_POST[wmy131]', '$_POST[wmy131t]', '$_POST[wmy132]', '$_POST[wmy132t]', '$_POST[wmy133]', '$_POST[wmy133t]', '$_POST[wmy134]', '$_POST[wmy134t]', '$_POST[wmy135]', '$_POST[wmy135t]', '$_POST[wmy136]', '$_POST[wmy136t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL,  '$_POST[wmy150]', '$_POST[wmy150t]', '$_POST[wmy151]', '$_POST[wmy151t]', '$_POST[wmy152]', '$_POST[wmy152t]', '$_POST[wmy153]', '$_POST[wmy153t]', '$_POST[wmy154]', '$_POST[wmy154t]', '$_POST[wmy155]', '$_POST[wmy155t]', '$_POST[wmy156]', '$_POST[wmy156t]', '$_POST[wmy157]', '$_POST[wmy157t]', '$_POST[wmy158]', '$_POST[wmy158t]', '$_POST[wmy159]', '$_POST[wmy159t]', '$_POST[wmy160]', '$_POST[wmy160t]', '$_POST[wmy161]', '$_POST[wmy161t]', '$_POST[wmy162]', '$_POST[wmy162t]', '$_POST[wmy163]', '$_POST[wmy163t]', '$_POST[wmy164]', '$_POST[wmy164t]', '$_POST[wmy165]', '$_POST[wmy165t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy170]', '$_POST[wmy170t]', '$_POST[wmy171]', '$_POST[wmy171t]', '$_POST[wmy172]', '$_POST[wmy172t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '$_POST[wmy190]', '$_POST[wmy190t]', '$_POST[wmy191]', '$_POST[wmy191t]', '$_POST[wmy192]', '$_POST[wmy192t]', '$_POST[wmy193]', '$_POST[wmy193t]', '$_POST[wmy194]', '$_POST[wmy194t]', '$_POST[wmy195]', '$_POST[wmy195t]', '$_POST[wmy196]', '$_POST[wmy196t]', '$_POST[wmy197]', '$_POST[wmy197t]', '$_POST[wmy198]', '$_POST[wmy198t]', '$_POST[wmy199]', '$_POST[wmy199t]', '$_POST[wmy200]', '$_POST[wmy200t]', '$_POST[wmy201]', '$_POST[wmy201t]', '$_POST[wmy202]', '$_POST[wmy202t]', '$_POST[wmy203]', '$_POST[wmy203t]', '$_POST[wmy204]', '$_POST[wmy204t]', '$_POST[wmy205]', '$_POST[wmy205t]', '$_POST[wmy206]', '$_POST[wmy206t]', '$_POST[wmy207]', '$_POST[wmy207t]', '$_POST[wmy208]', '$_POST[wmy208t]', '$_POST[wmy209]', '$_POST[wmy209t]', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL)";

$result=mysql_query($sql); 
```

如果您看到我在哪里设置了 NULL 值，那是因为我目前没有在输入页面上使用它。（但稍后会使用它，所以我需要它们）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:36:52.900

我将代码复制到 IDE 中，没有发现语法错误。我唯一可以建议的是，在执行时您的代码中有一个空白变量。我的建议是在运行查询之前做一个- 并在值部分`echo $sql;`寻找看起来像的东西。`, '',`

更好的方法是使用 PDO 和准备好的语句 - 可能与命名占位符一起使用：

```
insert into $tbl_name (col1, col2) values (:col1, :col2) 
```

您可以在其中避免注入攻击，并`bind->`在添加之前在每个参数上使用 - 这意味着您*应该*在绑定之前强制验证每个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:47:08.427

回显查询，然后运行程序，然后复制您尝试执行的查询并将其粘贴到 mysql 提示符中，我认为这将帮助您找到问题所在的确切位置......

# spring - 使用 Spring 和 JSTL 的多个 ResourceBundles

> ID：11933346
> 
> 赞同：0
> 
> 时间：2012-08-13T11:24:38.653
> 
> 标签：spring, jstl, tiles, resourcebundle

这是我的问题：我想组织我的资源包文件，以便将消息放在一个文件中，将标签放在另一个文件中。为此，我创建了两个 .properties 文件，我在我的 spring 配置文件中声明了它们。实际的声明是这样的：

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basenames">
        <array>
            <value>strings.gui</value>
            <value>strings.messages</value>
        </array>
    </property>
</bean> 
```

文件夹布局如下：

**/WEB-INF/classes/ro/**** - 源文件

**/WEB-INF/classes/strings/*** - i18n 文件（gui_ro.properties 和 messages_ro.properties，以及它们的 _en 版本）

当我显示来自**gui_xx.properties**的标签但无法显示来自**messages_xx.properties**文件的消息时，一切正常。服务器控制台中的错误消息是

```
ResourceBundle [strings.messages] not found for MessageSource: Can't find bundle for base name strings.messages, locale ro 
```

我将 JSTL 与 TilesView 一起使用，无论我使用什么标签来显示文本 - **fmt:message key=...**或**spring:message code=...**都会出现问题。

任何人都可以帮助 pe 解决这个问题吗？

非常感谢，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:49:04.680

我认为正确的基本名称应该是：

```
 <value>classpath:/ro/gui</value>
    <value>classpath:/strings/messages</value> 
```

您能否为基本名称尝试这些值。

# html - 显示“table-cell”、“table-column”等的目的是什么

> ID：11933351
> 
> 赞同：2
> 
> 时间：2012-08-13T11:24:54.860
> 
> 标签：html, css, css-tables

CSS 属性值的用途是什么，`display`例如：

*   表格单元格
*   桌子
*   表格标题
*   表列
*   表列组
*   表页脚组
*   表头组
*   表行
*   表行组

我知道这些样式会将元素的样式设置为表格，但是当已经有一个可接受的、有效的`table`元素时，这样做的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:32:28.193

现代浏览器使用 CSS 来设置所有标记的样式。

`<table>`如果 CSS 没有任何东西可以表达一个元素的外观，他们将如何渲染一个元素？

（也就是说，您可能有想要像表格一样呈现的非表格数据，有足够多的人使用表格进行布局来查看对它的需求）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:28:54.097

当标记不使用`table`元素时，它们可用于以表格方式格式化内容，例如，因为标记是由被告知不要使用表格的人编写的，或者因为标记是通用 XML 而不是 HTML。

您还可以使用例如`div`元素设计页面，以便某些样式表将它们格式化为表格，而另一些样式表则让它们成为块元素或将它们转换为内联元素。这可能取决于例如设备宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T11:30:34.130

`<table>`HTML 标记用于*表格数据*，即由逻辑行和列组成的数据，即电子表格。它应该只用于逻辑上需要在表格中呈现的数据。

CSS`table-*`显示样式允许任何数据以表格样式呈现（它有自己独特的逻辑，主要是关于垂直居中和宽度分布，这是很难用其他元素模拟的），同时仍然使用任何使在语义上最有意义，例如列表。

# wordpress - WordPress 空闲时间

> ID：11933357
> 
> 赞同：0
> 
> 时间：2012-08-13T11:25:14.237
> 
> 标签：wordpress, time, python-idle

我有一个将用作信息亭的 wordpress 网站。

如果有人使用该网站并离开，我需要它在一段时间不活动后返回主页。

我知道那里有 javascript 和 jquery 脚本，但似乎没有一个适用于 WordPress。

有人可以帮忙吗？如果你提供代码，你能告诉我把它放在哪里，例如页眉或页脚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:02:31.853

页脚中的 Javascript 最有可能带有 window.location = ' [http://yoursite.com](http://yoursite.com) '; 连同 setTimeout ( [http://www.tizag.com/javascriptT/javascriptredirect.php](http://www.tizag.com/javascriptT/javascriptredirect.php) ) 应该可以很好地进行重定向。

**The main issue** here is that browsers buffer all setIntervals and setTimeouts when the tab is inactive.

这篇文章：（[使用 setInterval 时，如果我在 Chrome 中切换选项卡并返回，滑块会疯狂追赶](https://stackoverflow.com/questions/6183463/when-using-setinterval-if-i-switch-tabs-in-chrome-and-go-back-the-slider-goes)）...将为您提供一些关于何时检测页面何时处于活动状态或处于“空闲”状态的指示

这（[如何让 setInterval 在 Chrome 中的选项卡处于非活动状态时也可以工作？](https://stackoverflow.com/questions/5927284/how-can-i-make-setinterval-also-work-when-a-tab-is-inactive-in-chrome)）on 将为您提供一些提示，告诉您何时检查 setTimeout 时间是否真的已经过去，而不管选项卡是否处于非活动状态。

# python - Django，Logout_URL 不能很好地重定向

> ID：11933361
> 
> 赞同：2
> 
> 时间：2012-08-13T11:25:20.910
> 
> 标签：python, django, settings

我已经设置了 LOGOUT_URL ='http://www.google.fr 但是当我注销时，它仍然会转到默认 url '/accounts/logout/' 以及其他任何 url 重定向。我到处寻找，我真的不知道为什么它不起作用

```
# Django settings for clinica project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('admin', 'admin@fr.fr'),
)

MANAGERS = ADMINS

LOGOUT_URL ='http://www.google.fr'

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': r'C:\Users\Megapayo\Desktop\Laurent_practica\pruebasdjango\proyecto\clinica\sqlite.db',# Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    'C:\Users\Megapayo\Desktop\Laurent_practica\pruebasdjango\proyecto\clinica\static',
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '*0orv&amp;yy*kbscyvd!k&amp;x8@-u!(2g1998$7sd_@ig+4e5kz(0&amp;t'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'clinica.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'clinica.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    r'C:\Users\Megapayo\Desktop\Laurent_practica\pruebasdjango\proyecto\mySite\paginasWeb',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    'clinica',

    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T08:03:05.403

好的，所以要注销，我不会使用 /admin/logout/ 而是使用 /logout/ :)

[如何配置在Django中注销后重定向到哪里？](https://stackoverflow.com/questions/5315100/django-redirect-after-log-out)

```
(r'^logout/$', 'django.contrib.auth.views.logout',
                      {'next_page': '/successfully_logged_out/'}) 
```

谢谢你这么快回答

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:29:41.343

[如果您使用django.contrib.auth.views.logout](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.logout) ，要在注销时获得自动重定向，您必须`next_page`向注销视图提供参数。

换句话说，重定向取决于您（如果您使用自定义视图进行注销）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:52:21.127

这是一个`won;t fix`错误 [https://code.djangoproject.com/ticket/6340](https://code.djangoproject.com/ticket/6340)
logout() 方法默认显示特定页面（它不执行重定向）。如果您希望它进行重定向，您可以传入要重定向到的 URL，因此该功能已经可以实现

# php - 如果关联键以特定子字符串开头，则保留数组中的元素

> ID：11933370
> 
> 赞同：13
> 
> 时间：2012-08-13T11:25:53.640
> 
> 标签：php, key, filtering, startswith, array-filter

如果我有这样的数组：

```
array [
       y => 35
       x => 51
       z => 35
       c_3 => 4
       c_1 => 54
       c_6 => 53
       c_9 => 52
] 
```

我想得到数组：

```
array [c_3=>4, c_1=>54, c_6=>53, c_9=>52] 
```

如何过滤掉没有以 开头的键的元素`c_`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T11:28:46.590

尝试这个 ：

```
$filtred = array();

foreach($yourArray as $key => $value)
  if(preg_match('/c_\d/',$key))
    $filtred[] = $value;

print_r($filtred); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T11:59:05.123

尝试这个

```
 //your array
    $arr1 = array (
           "y" => 35,
           "x" => 51,
           "z" => 35,
           "c_3" => 4,
           "c_1" => 54,
           "c_6" => 53,
           "c_9" => 52
    );
// Array with keys you want
    $arr2 =  array (
           "c_3" => '',
           "c_1" => '',
           "c_6" => '',
           "c_9" => ''
    );
//use array_intersect_key to find the common  ;)
    print_r(array_intersect_key($arr1,$arr2)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-13T13:31:25.313

检查此解决方案`array_filter()`

```
 $arr = [
   'y' => 35,
   'x' => 51,
   'z' => 35,
   'c_3' => 4,
   'c_1' => 54,
   'c_6' => 53,
   'c_9' => 52,
 ];

 $filtered = array_filter($arr, function($v) use($arr){
   return preg_match('#c_\d#', array_search($v, $arr));
 }); 
```

以下解决方案适用于 PHP >= 5.6.0

```
 $filtered = array_filter($arr, function($k){
   return preg_match('#c_\d#', $k);
 }, ARRAY_FILTER_USE_KEY); 
```

这两种解决方案都有效，我已经检查过了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T11:29:57.710

您可以尝试使用`array_filter()`.

[php 文档页面](http://php.net/manual/en/function.array-filter.php)上有一些有趣的示例。其中之一涵盖过滤数组键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T11:28:13.953

如果您只想选择已知键，请使用 array_slice：[http ://php.net/manual/en/function.array-slice.php。](http://php.net/manual/en/function.array-slice.php)在这里，您有按键过滤数组的解决方案：[PHP：如何使用 array_filter() 过滤数组键？](https://stackoverflow.com/questions/4260086/php-how-to-use-array-filter-to-filter-array-keys)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-27T07:01:24.120

我已经尝试过上述解决方案，但上述解决方案均不适用于我`PHP 5.6`

所以，我尝试并使用了对我有用的不同解决方案......

```
$subArray = array();

foreach($arryDetails as $key => $value)
  if(preg_match('/^c_/',$key))
    $subArray[$key] = $value;

print_r($subArray); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-12T19:35:54.213

我实际上有类似的问题并在这里寻找答案，但没有什么真正符合我的期望。

我想要一些更可重用的东西，可以在我的所有项目中使用，所以我最终编写了这个函数：

```
 /**
* Create a new a array containing only the key with a certain $pattern or $subString.
*
* Note: You cannot use both $subString and $pattern at once ($substring has precedence on $pattern).
*
* @param $errorMessage String to return the error message.
* @param $source Array in which we must extract data.
* @param $subString String/Int/Array substring (or array of substring) to seek in the key name.
* @param $pattern String regex for validating the key.
* @param $useValueAsKey Boolean if true it will use the value as the key in the new array (scalar values only).
*/
public static function extractSubArray(&$errorMessage, array &$source, $subString ="", $pattern = "", $useValueAsKey=false){

    $newArray = array();

    $errorMessage = "";

    $dbManager = GeneralDbManager::getInstance();

    if (empty($source)){

        $errorMessage = $dbManager->getErrorMessage("SOURCE_ARRAY_IS_EMPTY_ERR", "The array supplied is empty.");
    }
    elseif(empty($subString) and empty($pattern)){

        $errorMessage = $dbManager->getErrorMessage("NO_SUBSTR_OR_PATTERN_ERR", "There are no substring or pattern to match the keys in the array.");
    }
    elseif (!empty($subString) and !(is_string($subString) or is_numeric($subString) or is_array($subString))){

        $errorMessage = $dbManager->getErrorMessage("INVALID_MATCH_SUBSTRING_ERR", "The substring you supplied to match the keys is invalid.");
    }
    elseif(!empty($pattern) and !RegularExpression::testRegex($pattern)){

        $errorMessage = $dbManager->getErrorMessage("INVALID_MATCH_PATTERN_ERR", "The regular expression you supplied to match the keys is invalid.");
    }
    else{

        foreach ($source as $key => $value){

            if (self::isKeyMatchSubstring($key, $subString, $pattern)){

                if ($useValueAsKey and (is_string($value) or is_numeric($value))){

                    $newArray[$value] = $value;     
                }
                else{

                    $newArray[$key] = $value;
                }
            }       
        }

        if (empty($newArray)){

            $errorMessage = $dbManager->getErrorMessage("INVALID_MATCH_PATTERN_ERR", "We were not able to match any keys in the array with the substring or the regular expression.");
        }
    }

    unset($dbManager);

    return $newArray;
}

/**
* Validate that the $key contains the $substring (string or array) or match the $pattern.
*
* @param $key String to validate
* @param $subString String/Int/Array containing the subString to seek.
* @param $pattern String regex for validating the key.
*/
private static function isKeyMatchSubstring($key, $subString, $pattern){

    $matched = false;

    if (!empty($subString)){

        if (is_string($subString) or is_numeric($subString)){

            if(strpos(strtolower($key), strtolower($subString)) !== false){

                $matched = true;    
            }
        }
        else{ //array

            foreach($subString as $testString){

                $matched = self::isKeyMatchSubstring($key, $testString, "");

                if ($matched){

                    break;  
                }
            }
        }   
    }
    elseif(!empty($pattern)){

        $matched = preg_match($pattern, $key);
    }

    return $matched;
} 
```

它使用一个名为*testRegex()*的函数，所以我想我也可以提供该代码：

```
/**
* Make sure that a regular expression works in PHP.
*
* @param $regex String the regular expression to validate.
*
* @return Boolean
*/
public static function testRegex($regex){

    $isValid = false;

    if (!empty($regex) and is_string($regex)){

        if (@preg_match($regex, null) !== false){
            $isValid = true;
        }
    }

    return $isValid;
} 
```

而且，当然，没有单元测试的功能会有多好？

```
 public function testExtractSubArray(){

    $errorMessage = "";

    $source = array();

    //no data
    $this->assertEmpty(Tool::extractSubArray($errorMessage, $source, "", "", false));

    $this->assertNotEmpty($errorMessage);

    //no substring or pattern
    $source = array(1 => 1);

    $this->assertEmpty(Tool::extractSubArray($errorMessage, $source, "", "", false));

    $this->assertNotEmpty($errorMessage);

    //invalid substring
    $dbmanager = GeneralDbManager::getInstance();

    $this->assertEmpty(Tool::extractSubArray($errorMessage, $source, $dbmanager, "", false));

    $this->assertNotEmpty($errorMessage);

    unset($dbmanager);

    //invalid pattern
    $this->assertEmpty(Tool::extractSubArray($errorMessage, $source, "", "[]123", false));

    $this->assertNotEmpty($errorMessage);

    //no match
    $this->assertEmpty(Tool::extractSubArray($errorMessage, $source, "pokemon", "", false));

    $this->assertNotEmpty($errorMessage);

    //valid substring
    $source = array("woot1" => "homer", "woot2" => "bart", "woot3" => "lisa", "doh1" => "marge", "doh2" => "simpson");

    $newArray = Tool::extractSubArray($errorMessage, $source, "WOOT", "", false);

    $this->assertNotEmpty($newArray);

    $this->assertEmpty($errorMessage);

    $this->assertContains("homer", $newArray);

    $this->assertContains("bart", $newArray);

    $this->assertContains("lisa", $newArray);

    $this->assertNotContains("marge", $newArray);

    $this->assertNotContains("simpson", $newArray);

    //use value as key
    $newArray = Tool::extractSubArray($errorMessage, $source, "WOOT", "", true);

    $this->assertTrue(array_key_exists("homer", $newArray));

    $this->assertTrue(array_key_exists("bart", $newArray));

    $this->assertTrue(array_key_exists("lisa", $newArray));

    //substring array
    $source = array("stan_march" => "normal", "kyle_brofloski" => "jew", "eric_cartman" => "asshole", "kenny_mccormick" => "dead", "butters_stotch" => "pushover");

    $newArray = Tool::extractSubArray($errorMessage, $source, array("stan", "kyle", "cartman"), "", false);

    $this->assertNotEmpty($newArray);

    $this->assertEmpty($errorMessage);

    $this->assertContains("normal", $newArray);

    $this->assertContains("jew", $newArray);

    $this->assertContains("asshole", $newArray);

    $this->assertNotContains("dead", $newArray);

    $this->assertNotContains("pushover", $newArray);

    //regex
    $source = array("jonathan@woot.ca" => 1, "jonathan" => 2, "12345" => 3, "more $$$" => 4, "$?%$?%$%?" => 5);

    $newArray = Tool::extractSubArray($errorMessage, $source, "", RegularExpression::ALPHA_NUMERIC, false);

    $this->assertNotEmpty($newArray);

    $this->assertEmpty($errorMessage);

    $this->assertNotContains(1, $newArray);

    $this->assertContains(2, $newArray);

    $this->assertContains(3, $newArray);

    $this->assertNotContains(4, $newArray);

    $this->assertNotContains(5, $newArray);
} 
```

**附加说明**：此代码使用*getErrorMessage()*方法来获取数据库中错误消息的翻译。由于这些错误消息用于调试目的，因此可以直接在代码中硬编码以提高性能（无需实例化类来获取错误消息并打开与数据库的连接）。

# android - Android- XML 解析器未从 XML 返回完整值

> ID：11933373
> 
> 赞同：1
> 
> 时间：2012-08-13T11:26:10.120
> 
> 标签：android, android-xml, android-parser

问题是，当我尝试从下面的 xml 中获取价值时

```
<item>
 <title>The Return of Toastmasters</title>
 <link>http://www.younginnovations.com.np/blogs/anjan/2012/06/return-toastmasters</link>
 <description>&lt;p&gt;As the title implies, it was the &lt;strong&gt;return of the Toastmasters&lt;/strong&gt; at YoungInnovations on Thursday, May 24, 2012\. I said &amp;quot;return&amp;quot; because Toastmasters saw a long gap of more than 3 months. Why the delay? Well, we shifted to a new office building and it took us some time to adjust properly into the new place. However, we&#039;re all glad that we continued with the event even after a long gap. And rightfully so, the MC for the day, Bimal Maharjan, announced the theme for the meeting: Return.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.younginnovations.com.np/blogs/anjan/2012/06/return-toastmasters&quot; target=&quot;_blank&quot;&gt;read more&lt;/a&gt;&lt;/p&gt;</description>
 <comments>http://www.younginnovations.com.np/blogs/anjan/2012/06/return-toastmasters#comments</comments>
 <category domain="http://www.younginnovations.com.np/category/tags/toastmasters">Toastmasters</category>
 <pubDate>Mon, 04 Jun 2012 07:28:33 +0000</pubDate>
 <dc:creator>anjan</dc:creator>
 <guid isPermaLink="false">151 at http://www.younginnovations.com.np</guid>
</item> 
```

和我在 News.java 下面的应用程序代码

```
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class News extends ListActivity {

    static final String URL = "http://www.younginnovations.com.np/blog/feed";
    static final String KEY_ITEM = "item"; 
    static final String KEY_TITLE = "title";
    static final String KEY_DESC = "description";
    static final String KEY_DATE = "pubDate";
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.news);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); 
        Document doc = parser.getDomElement(xml); 

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            Log.e("Element", e.toString());
            System.out.println(e);

            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

            menuItems.add(map);
        }

        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.news_list_item,
                new String[] { KEY_TITLE, KEY_DESC, KEY_DATE }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost });

        setListAdapter(adapter);
     }
    } 
```

和 XMLParse.java

```
import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);

            return this.getElementValue(n.item(0));
        }
} 
```

但是在获取`<description>`标签的值时..有HTML标签...所以“<”作为值返回..在其他方面完全没问题。我怎样才能得到所有的价值，或者在最好的情况下，我怎样才能得到不包括 HTML 标签的值..

等待帮助，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:36:55.660

感谢大家的支持..但我以不同的方式解决了它......

我在 XMLParser.java 文件中做了一些更改...

```
 public final String getElementValue( Node elem ) {
     Node child;
     String returnValue = "" ;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE ){
                   // String returnValue =  child.getNodeValue();
                   returnValue +=  child.getTextContent();   
                 }

             }
         //   Log.e("ReturnValue", Html.fromHtml(returnValue).toString());
             return Html.fromHtml(returnValue).toString();
         }
     }
     return "";
 } 
```

但我还是有问题。如果xml中有图片，则返回为“obj”，我不想看到..

# html - Shrunk CSS background on the iPad

> ID：11933383
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:26:52.507
> 
> 标签：html, css, ipad, mobile-safari

Why does body tag's background on this site [link](http://www.youreasttexasrealestate.com/) appears shrunk on the iPad?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:43:25.853

Mobile Safari has the tendency to scale large background images. To avoid that you can set the background size: [http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:49:24.160

You should definitely create a separate stylesheet for the iPad. You can use the following to do so:

```
<link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="../ipad.css" type="text/css" /> 
```

On this link, you will find information about the orientation of your website on the iPad and how to deal with it.

My advice would be, to create a separate stylesheet (css file) for the iPad version of your site, no matter what you do, you should just create it and add a link tag like the one shown above.

If you have a large background picture for the iPad version, you can reduce it to fit the iPad, if that's the only thing you've got a problem with. I'd say you should reduce the size of the image to 1024px and declare it in the separate stylesheet for the iPad, and you will see the end result.

BTW you should read this article as well: [http://www.inspiredm.com/2010/02/09/ipad-design/](http://www.inspiredm.com/2010/02/09/ipad-design/)

# symfony - 如何在 Doctrine2 中添加列描述（评论）

> ID：11933384
> 
> 赞同：53
> 
> 时间：2012-08-13T11:26:56.423
> 
> 标签：symfony, doctrine-orm

我想将*列描述*（也称为“*注释*”）添加到由 Doctrine2 实体定义的列中，但找不到任何关于如何使用`@Column annotation`可能破坏 Doctrine 的 SchemaTool 的信息。

如果我使用like的`columnDefinition`属性`@Column annotation`

```
@Column(type="string" columnDefinition="COMMENT 'This is a column comment'") 
```

注释[引用](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/annotations-reference.html#annref-column)状态

> 如果您使用“columnDefinition”，SchemaTool 将不再正确检测列上的更改。

那么有没有办法在不破坏 SchemaTool 的情况下定义列描述？

我得到的唯一线索是这个以“ *This wassolved in different ways.* ”结尾的[拉取请求。](https://github.com/doctrine/doctrine2/pull/217)

 ** * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-12-11T15:34:24.027

您可以使用注释的“选项”参数向列名或整个表添加注释；例如：

```
/**
 * @ORM\Column(type="string", options={"comment":"The string to show in the dropdown "})
 */ 
```

对于列或表：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="application", options={"comment":"Funding applications"});
 */ 
```

但是请注意，这不会向现有表或列添加注释，您必须从数据库中删除表并重建它。如果只是添加注释，您可以重命名表，创建新表并从原始表导入数据。

资料来源：[教义文件](http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#column)*

# path-finding - 快速探索随机树

> ID：11933385
> 
> 赞同：7
> 
> 时间：2012-08-13T11:27:01.020
> 
> 标签：path-finding, motion-planning

[http://msl.cs.uiuc.edu/rrt/](http://msl.cs.uiuc.edu/rrt/)

谁能用易于理解的简单措辞解释 rrt 如何工作？我阅读了网站和维基百科中的描述。

我希望看到的是 rrt 的简短实现或对以下内容的彻底解释：

为什么 rrt 向外增长，而不是在中心周围变得非常密集？它与天真的随机树有什么不同？

我们尝试到达的下一个新顶点是如何选择的？

我知道我可以下载一个运动策略库，但我更愿意在深入研究代码之前理解这个想法，而不是反过来。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T12:44:52.323

最简单的 RRT 算法之所以如此成功，是因为它很容易实现。当您执行以下操作时，事情往往会变得复杂：

*   需要在两个以上的维度上可视化规划概念
*   不熟悉与规划相关的术语，并且；
*   在文献中描述的大量 RRT 变体中。

**伪代码**

基本算法如下所示：

1.  从一个空的搜索树开始

2.  将您的初始位置（配置）添加到搜索树

3.  而你的搜索树还没有达到目标（你还没有用完时间）

    3.1。选择一个位置（配置），，`q_r`（使用一些采样策略）

    3.2\. 在搜索树中找到最接近该随机点的顶点，`q_n`

    3.3\. 尝试在`q_n`和之间的树中添加一条边（路径） `q_r`，如果您可以链接它们而不会发生冲突。

虽然这个描述已经足够了，但在这个领域工作了一段时间之后，我真的更喜欢Steven LaValle 的“规划算法”一书中[关于 RRT/RDT 的图 5.16 的伪代码。](http://planning.cs.uiuc.edu/node231.html)

**树形结构**

树最终覆盖整个搜索空间（在大多数情况下）的原因是采样策略的组合，并且总是从树中最近的点开始连接。这种效果被描述为减少[Voronoi 偏差](http://msl.cs.uiuc.edu/~lavalle/papers/LinLav04.pdf)。

**抽样策略**

选择放置您将尝试连接的下一个顶点的位置是采样问题。在简单的情况下，搜索是低维的，均匀随机放置（或偏向目标的均匀随机放置）可以充分发挥作用。在高维问题中，或者当运动非常复杂（当关节有位置、速度和加速度时），或者配置难以控制时，RRT 的采样策略仍然是一个开放的研究领域。

**图书馆**

如果您真的坚持执行，[MSL 库](http://msl.cs.uiuc.edu/msl/)是一个很好的起点，但它自 2003 年以来一直没有得到积极维护。更新的库是[Open Motion Planning Library (OMPL)](http://ompl.kavrakilab.org/)。您还需要一个好的碰撞检测库。

**规划术语和建议**

从术语的角度来看，很难意识到尽管您在 RRT（早期）出版物中看到的许多图表都是二维的（链接 2d 点的树），但这*绝对*是最简单的情况.

通常，需要一种严格的数学方法来描述复杂的物理情况。一个很好的例子是规划带有 n 连杆的机械臂。描述这种手臂的末端需要最小的`n`关节角度。这组描述位置的最小参数是一个**配置**（或某些出版物**状态**）。通常表示单个配置`q`

The combination of all possible configurations (or a subset thereof) that can be achieved make up a **configuration space** (or **state** space). This can be as simple as an unbounded 2d plane for a point in the plane, or incredibly complex combinations of ranges of other parameters.

# objective-c - 具有动态高度的 TableView

> ID：11933386
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:27:04.223
> 
> 标签：objective-c, ios, uitableview, height

我在objective-c上编程。我有一个带有 tableView 的 viewController。我希望我的 tableView 具有如下图所示的动态高度（Tweetbot）。我怎样才能做到？

![在此处输入图像描述](../Images/8f470d4e6bf0b953083971348b0d7960.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:37:08.407

是的。但是，不清楚该表是否“短”-可能是它具有透明背景且只有两个单元格。在任何情况下，要创建一个短表，您将创建一个具有普通视图（即 UIView）的 UIViewController 类。创建一个 UIImageView 并将图像添加到其中（假设您想要一个大图像），并将其添加到视图中（您可以在 IB 中执行此操作）。然后创建所需高度的 UITableView，并将其添加到 UIIView 的子视图中。现在你有一个包含两个子视图的容器视图（self.view），表是最后一个（所以它在顶部）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:53:19.123

最有可能的 tweetbot 不会`UITableView`在`UIViewController`. 他们很可能`UITableViewController`从头开始使用，给它一个背景，并且（在这种情况下）只显示两个具有自定义高度的单元格。这也是使用 Table View 时的“方法 2-go”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:38:39.453

您应该 `-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`在此方法中使用方法并使用 if 条件或 switch case。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.row ==2) {
        return 89;//write your image view's height here.
    }
    return 44;
} 
```

# android - SQLDroid 与 Android 内部 JDBC 驱动程序

> ID：11933387
> 
> 赞同：3
> 
> 时间：2012-08-13T11:27:04.530
> 
> 标签：android, sqlite

我正在开发一个使用`SQLite`数据库的 android 应用程序。在那种情况下，我很困惑使用哪个驱动程序？

`SQLDroid`来自此页面的驱动程序[https://github.com/SQLDroid/SQLDroid](https://github.com/SQLDroid/SQLDroid)或内部 android`JDBC`驱动程序。请分享您对哪个最好使用的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:31:24.237

Android 不附带普通的 JDBC 驱动程序。如果您需要 JDBC，您可以使用 sqldroid，否则您必须使用 android 内部数据库[API](http://developer.android.com/reference/android/database/package-summary.html)。如果您真的需要 JDBC，请记住，SQLDroid 实现并不提供所有 JDBC 驱动程序功能。有很多方法没有实现！

编辑：我猜在 Android 2.3 上，有一个名为 的未记录的 JDBC 驱动程序`SQLite.JDBCDriver`， `/system/framework/sqlite-jdbc.jar`但我建议不要使用它！这可能会在大多数其他 android 版本上崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T15:21:03.220

我们在另一个项目的上下文中移植了驱动程序。您可以保留并包含来自[https://github.com/plingpling/Asper/blob/master/source/libs/sqlite.jar的 .jar 文件](https://github.com/plingpling/Asper/blob/master/source/libs/sqlite.jar)

驱动程序基于伯克利实现，应该包括大多数驱动程序功能。我没有经过广泛的测试 - 所以要注意。

# android - 自定义 listView 设计不适用于设备，但适用于模拟器

> ID：11933392
> 
> 赞同：2
> 
> 时间：2012-08-13T11:27:28.663
> 
> 标签：android, motodev-studio

这是代码：

```
adapter=new ArrayAdapter<String>(
                this, 
                R.layout.zalistu, 
                android.R.id.text1, 
                values); 
```

所以这是适配器，我在其中为列表 () 进行了自己的设计，`R.layout.zalistu`并在模拟器中工作，但在设备上它给了我一个错误（应用程序意外停止）如果我使用它，`simple_list_item_1`那么它在两者上都能正常工作模拟器和我的设备。

这是 R:layout.zalistu:

```
 <?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
    android:paddingRight="?android:attr/listPreferredItemPaddingRight"
    android:minHeight="?android:attr/listPreferredItemHeightSmall"
    android:textStyle="bold"
    android:textColor="#FF00FF"
/> 
```

日志猫：

```
08-13 13:26:15.909: E/AndroidRuntime(6832): FATAL EXCEPTION: main
08-13 13:26:15.909: E/AndroidRuntime(6832): android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.AbsListView.obtainView(AbsListView.java:1495)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.ListView.onMeasure(ListView.java:1127)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.View.measure(View.java:8335)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.View.measure(View.java:8335)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.View.measure(View.java:8335)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.View.measure(View.java:8335)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.View.measure(View.java:8335)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.ViewRoot.performTraversals(ViewRoot.java:843)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1892)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.os.Looper.loop(Looper.java:130)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.app.ActivityThread.main(ActivityThread.java:3835)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at java.lang.reflect.Method.invokeNative(Native Method)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at java.lang.reflect.Method.invoke(Method.java:507)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at dalvik.system.NativeStart.main(Native Method)
08-13 13:26:15.909: E/AndroidRuntime(6832): Caused by: java.lang.reflect.InvocationTargetException
08-13 13:26:15.909: E/AndroidRuntime(6832):     at java.lang.reflect.Constructor.constructNative(Native Method)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
08-13 13:26:15.909: E/AndroidRuntime(6832):     ... 32 more
08-13 13:26:15.909: E/AndroidRuntime(6832): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.view.View.<init>(View.java:1978)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.TextView.<init>(TextView.java:350)
08-13 13:26:15.909: E/AndroidRuntime(6832):     at android.widget.TextView.<init>(TextView.java:343)
08-13 13:26:15.909: E/AndroidRuntime(6832):     ... 35 more 
```

我设备上的 Android 版本是 2.3.7，模拟器上的版本是 4.0.4 (API 15)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:02:50.530

您使用的 R.attr 中的所有属性，例如[listPreferredItemPaddingLeft](http://developer.android.com/reference/android/R.attr.html#listPreferredItemPaddingLeft)，仅在您的设备是姜饼的 Android 14 ( ICS ) 中可用。解决方案：手动设置，尝试几个值，直到一个看起来正确。或者相应地设置 minSDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:45:31.057

使用**`android:id="@+id/text1"`**代替 **`android:id="@android:id/text1"`**

并且...

**`adapter=new ArrayAdapter<String>(this,R.layout.zalistu,R.id.text1,values);`**

# javascript - Adding target="blank" to links with javascript

> ID：11933395
> 
> 赞同：1
> 
> 时间：2012-08-13T11:27:42.290
> 
> 标签：javascript, html, forms, hyperlink

I'm attempting to add `target="_blank"` to links on a page depending on a checkbox click.

On the javascript side I have:

```
 function newTab(v) {
      if(v.tab.checked == true) { 
        document.getElementsByTagName('a').setAttribute('target', '_blank');
      } else {
        document.getElementsByTagName('a').setAttribute('target', '_self');
      }
  } //end function 
```

And on the HTML side I have:

```
<form>
    <input type="checkbox" name="tab" onclick="newTab(this.form)" />
    <label>Open Links In New Tab?</label>
</form> 
```

`<a href="//mail.google.com">Gmail</a>`

Naturally it isn't as simple as I thought it would be, so it doesn't work.

The page contains over a dozen links so I need the checkbox to apply to all links on the page - why I used `getElementsByTagName()`. Any help appreciated!

# EDIT:

Code that works is as follows:

```
 function newTab(f) {
    var els = document.getElementsByTagName('a'); //read anchor elements into variable
    if(f.tab.checked == true) { //If the box is checked.
      for (var i in els) {
        els[i].setAttribute('target', '_blank'); //Add 'target="blank"' to the HTML
      } 
    } else { // not checked...
      for (var i in els) {
        els[i].setAttribute('target', '_self'); //Add 'target="self" to HTML
      }
    }
  } //end function. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:31:09.160

`getElementsByTagName()` returns a nodeset. You need to iterate over it and apply the change to each one in turn. What you currently have is more like jQuery syntax, which handles this internally for you.

This would have shown up in the console. With JS issues, *always* check the console before wondering what's wrong.

```
var els = document.getElementsByTagName('p');
for (var i=0, len = els.length; i<len; i++)
    els[i].setAttribute('name', 'value'); 
```

Also, with checkboxes use change, not click events, as someone might toggle them via the keyboard, not mouse. Lastly, you should look into handling your events centrally, not inline DOM-zero events specified in the HTML. Numerous reasons for this that are beyond the scope of this question.

# mysql - MySQL自定义组concat

> ID：11933397
> 
> 赞同：0
> 
> 时间：2012-08-13T11:27:44.783
> 
> 标签：mysql, group-concat

我需要转换我的查询结果，所以具有相同外键的多行只是一行。我可以通过分组来做到这一点。问题是，在我的一个专栏中，我想连接一些具有不同分组的列。例如，我的表包含这样的 somting：

```
shopId     Brand    Category    Color     QTY
----------------------------------------------
15         Dell     NoteBook    Red       5
15         Dell     NoteBook    Blue      1
15         HP       NoteBook    red       2
15         HP       NetBook     red       3
14         Sony     NoteBook    yellow    1
14         Acer     Tablet      red       10 
```

Brand、Category 和 Color 都从它们的外键中检索到。我想呈现这个结果

```
ShopId      Dell    Color             HP    Color    etc...
-----------------------------------------------------------
15          6       red:5, Blue:1     2     red:2    
14 .............. 
```

在我的查询中，我按 shopId 对它们进行分组，并使用 sum 和 case 语句查找每个品牌和类别的总数量是一件容易的事。我的问题是如何连接商店、类别、品牌分组的颜色和数量（总分组是按 shopId 而不是商店、类别、品牌）？

我的表是

```
创建表`shopstorage`（
 `color` int(11) NOT NULL,
 `category` int(11) NOT NULL,
 `brand` int(11) NOT NULL,
 `shop` int(11) NOT NULL,
 `date` 日期不为空，
 `qty` tinyint(4) 非空，
 PRIMARY KEY (`color`,`category`,`brand`,`shop`,`date`),
 KEY `clrEpClr` (`color`),
 KEY `clrEpCat` (`category`),
 KEY `clrEpshop` (`shop`),
 KEY `clrEpBrand`（`品牌`），
 CONSTRAINT `SSBrand` FOREIGN KEY (`brand`) REFERENCES `brand` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
 约束 `SSCat` 外键 (`category`) 参考 `productcategory` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
 约束 `SSClr` 外键 (`color`) 参考 `color` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
 约束 `SSShop` 外键 (`shop`) 参考 `shop` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) 引擎=InnoDB 默认字符集=utf8

```

我的不完整查询是

```
选择
    shop.name, shop.floor, shop.no,
    总和（当brand.name ='ASUS' and productcategory.name='NoteBook' then shopstorage.qty else 0 end）作为华硕，
    总和（当brand.name ='HP'和productcategory.name='NoteBook'然后shopstorage.qty else 0结束时）作为HP，
    总和（当brand.name ='Sony'和productcategory.name='NoteBook'然后shopstorage.qty else 0结束时）作为索尼，
    总和（当brand.name ='Dell'和productcategory.name='NoteBook'然后shopstorage.qty else 0结束时）作为戴尔，
    总和（当brand.name ='ASUS' and productcategory.name='NetBook' then shopstorage.qty else 0 end）作为华硕，
    总和（当brand.name ='HP' and productcategory.name='NetBook' then shopstorage.qty else 0 end）作为HP，
    总和（当brand.name ='Sony'和productcategory.name='NetBook'然后shopstorage.qty else 0结束时）作为索尼，
    sum（当brand.name ='Dell'和productcategory.name='NetBook'然后shopstorage.qty else 0结束时）作为戴尔，
    总和（当brand.name ='ASUS' and productcategory.name='Tablet' then storestorage.qty else 0 end）作为华硕，
    总和（当brand.name ='HP' and productcategory.name='Tablet' then stores.qty else 0 end）作为HP，
    sum（当brand.name ='Sony'和productcategory.name='Tablet'然后shopstorage.qty else 0结束时）作为索尼，
    总和（当brand.name ='Dell' and productcategory.name='Tablet' then storesstorage.qty else 0 end）作为戴尔
从商店存储
    在 shoptorage.brand=brand.id 上加入品牌
    在 shoptorage.color=color.id 上加入颜色
    在 shoptorage.category=productcategory.id 上加入产品类别
    在 shop.id = shopstorage.shop 上加入商店
按商店storage.shop 分组

```

我正在寻找一种在每次总和后添加一列以指定每种颜色数量的方法，例如，如果 HP 为 15，它有 7 个红色和 8 个蓝色笔记本。我尝试了 GROUP_Concat 但由于分组错误，它没有显示正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:42:17.290

我找到了答案，并想与他人分享。我在每次总和后的查询中添加了以下代码

```
,group_concat(case when brand.name='{$brand['name']}' and category={$category['id']} then concat(color.name,':',num) end) as {$brand['name']}C 
```

{$brand['name']} 和 {$category['id']} 是我的 php 代码中的变量，用于在品牌和类别之间进行迭代我不知道为什么我花了这么长时间才找到这么简单的解决方案： P让我感到羞耻 :D

# jquery - KnockoutJs + jquery：如何检查是否选择了div中的所有单选按钮

> ID：11933400
> 
> 赞同：0
> 
> 时间：2012-08-13T11:27:57.197
> 
> 标签：jquery, knockout.js

我的 html 看起来像这样

上面的代码是根据previos 页面中的**No of patient 文本**框生成的检查值了吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:19:37.120

直接询问视图不是一个好方法；使用 View/View Model 架构的原因之一是尽量减少这种直接的 DOM 操作。你想问你的模型这个问题。

您没有发布太多代码，您是否在所有这些单选按钮的某个父模型中存储了一个 ViewModel 数组？如果是，您可以使用类似的东西

```
options.every(function(model) {return model.Gender}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:31:30.330

```
$(table).find('input[type=radio]:checked').length 
```

会给你总数。表中选中的复选框

# objective-c - iOS Objective-C：开始/结束外观转换的不平衡调用

> ID：11933401
> 
> 赞同：3
> 
> 时间：2012-08-13T11:27:58.560
> 
> 标签：objective-c, ios, game-center, transitions

我希望有人能够回答我的问题。

在我的应用程序中，我有一个按钮，您可以按下该按钮将您带到我创建的排行榜。在沙盒环境中，用户第一次单击此按钮时，系统会要求用户登录 - 使用现有帐户或新帐户。

如果用户点击使用现有帐户，在验证他们的用户名、密码、GameCenter 显示名称等之后，当屏幕关闭以返回带有排行榜按钮的屏幕时 - 现在没有任何按钮响应。用户被迫退出应用程序（通过双击主页按钮退出实例）并重新打开应用程序，现在他们可以像往常一样玩，甚至可以毫无问题地点击排行榜。

我想知道为什么会这样，我似乎拥有的唯一线索是通过 Xcode 中的输出屏幕，它在运行时显示：

```
ClubHistory[4989:707] Unbalanced calls to begin/end appearance transitions for <GKModalRootViewController: 0x1bcd90>. 
```

从查找其他问题看来，这可能意味着打开/关闭视图的冲突。但我真的不明白我应该在哪里实现这个。

在第一个实例中打开排行榜的部分代码是：

```
-(void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
[self dismissModalViewControllerAnimated:YES];
}

-(IBAction ) showLeaderboard
{
GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc]init];
if (leaderboardController != NULL)
    {
    leaderboardController.category = self.currentLeaderBoard;
    leaderboardController.timeScope = GKLeaderboardTimeScopeWeek;
    leaderboardController.leaderboardDelegate = self;
    [self presentModalViewController: leaderboardController animated:YES];
    }
} 
```

也许我需要做的改动就在这里。

我在网上查了类似的问题，但无济于事。有谁知道我该如何解决这个问题？

感谢大家，

安迪。

///// 快速编辑：只是为了澄清我已经为我的应用程序打开了 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:04:37.827

> [...] 用户第一次单击此按钮时，系统会要求用户登录 - 使用现有帐户或新帐户

您如何呈现此界面以供用户登录？它也是模态视图控制器吗？如果是这种情况，可能您没有正确展示和关闭这两个模态视图控制器。来自 Apple 的[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)：

> 任何视图控制器对象一次都可以呈现一个视图控制器。

在呈现`GKLeaderboardViewController`.

# .net - EntityFramework 4.1 dbContext.CreateQuery(表达式)

> ID：11933407
> 
> 赞同：0
> 
> 时间：2012-08-13T11:28:43.653
> 
> 标签：.net, entity-framework

`Linq`是否可以仅使用以下工具创建查询？

1\. 一些`dbContext`实例

2\. 从外部`Expression`传递的一个`Class`。

也许我的`Expression`包括连接或复杂的`Linq`查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:48:19.253

我不是特别确定你想要达到什么目标，但你可以试试下面的片段：

```
public ObjectQuery<T> CreateQuery<T>(Expression<Func<T, bool>> expr) {
    ObjectContext octx = (ctx as IObjectContextAdapter).ObjectContext;
    ObjectSet<T> os = octx.CreateObjectSet<Post>(); 
    ObjectQuery<T> q2 = os.Where(expr);
    return q2;
} 
```

# java - 通过 xpath 获取当前节点值

> ID：11933417
> 
> 赞同：0
> 
> 时间：2012-08-13T11:29:43.377
> 
> 标签：java, xpath

```
<E  st="SS"  >
        <id>789</id>
        <name>Study  Table 1200 C2</name>
        <vlid>1</vlid>
        <E  st="SS"  >
            <id>567</id>
            <name>Study  Table1</name>
            <vlid>94611431277729312</vlid>
        </E>
        <E  st="SS"  >
            <id>345</id>
            <name>Study -SOFT1</name>
            <vlid>94611431277729311</vlid>
        </E>
        <E  st="SS"  >
            <id>123</id>
            <name>Study  Table 02</name>
             <vlid>94611431277729309</vlid>
        </E>
    </E> 
```

在此我试图获取 id 的节点值，其中 vlid=3。我写的xpath是（`//E[vlid=94611431277729312]/id`）。结果是`<id>567</id>,<id>345</id><id>123</id>`

我只想要一个 id 即`<id>567</id>`。请帮我解决为什么我无法获得例外输出。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:42:01.333

如果您将值匹配为字符串，它将起作用

```
//E[vlid="94611431277729312"]/id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:34:20.013

试试这个：

```
//E[vlid=3]/id[2] 
```

就像科林说的，试着接受能解决你问题的答案。

# c# - 这是重载方法的正确方法吗？

> ID：11933425
> 
> 赞同：0
> 
> 时间：2012-08-13T11:30:04.433
> 
> 标签：c#, overloading

我正在开发自己的命令行参数解析器，在阅读了数十篇关于方法重载的文章后，我仍然不确定我是否做得对。

我是否从这种重载方法中获得任何好处？我知道我可以通过分支在一个方法（使用默认值参数）中编写整个内容，但我目前正在尝试重载，我想知道是否继续这条路径。

```
 public static class MyParsers
    {
        private static List<string> args;

        static MyParsers()
        {
            args = Environment.GetCommandLineArgs().ToList();
        }

        public static List<string> ParseOptions()
        {
            return ParseOptions(false);
        }

        public static List<string> ParseOptions(bool toLowercase)
        {
            // DEBUG: Change command line arguments here.
            var arguments = args;
            return !toLowercase
                       ? arguments
                       : arguments.MyExtToLower();
        }

        public static bool OptionExists(string option)
        {
            return OptionExists(option, false);
        }

        public static bool OptionExists(string option, bool toLowercase)
        {
            var list = ParseOptions(toLowercase);
            for (var i = 1; i < list.Count; i++)
            {
                if (list[i].StartsWith(option)) return true;
            }
            return false;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:33:37.300

是的，没关系。

如您所知，如果您的重载仅调用具有默认值的另一个方法（这将减少代码行数），您也可以使用带有默认值的可选参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:35:55.910

是的，这就是重载的工作方式。

但是一个侧节点：

*   您是否需要从不支持可选参数的语言中使用您的代码？如果是这样，请考虑包括重载。
*   您的团队中是否有任何成员强烈反对可选参数？（有时，接受一个你不喜欢的决定比争论这个案子更容易。）
*   您是否确信您的默认值不会在代码构建之间发生变化，或者如果可能，您的调用者会同意吗？

资料来源：[您应该在 C# 4.0 中使用重载或可选参数声明方法吗？](https://stackoverflow.com/questions/251868/should-you-declare-methods-using-overloads-or-optional-parameters-in-c-sharp-4-0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:37:43.420

带有可选参数的“问题”是，如果在您的程序集 A 的某个未来版本 X 中更改了默认值，那么任何引用 A 的客户端程序集 C*都需要重新编译*才能“看到”更改——加载更新的A 的版本将导致他们使用旧的默认值调用新方法。

如果这不是潜在问题，那么使用可选参数会更方便。使用多个重载模拟可选参数的等效版本没有这个问题，因为在这种情况下，默认值被烘焙到程序集 A 而不是 C 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T11:37:45.963

我认为你的超载风格很好。

如果您认为您可能有大量不同的解析参数（ToUpperCase 等），而不是一个具有许多重载方法的类，您可能会考虑使用对象继承并拥有 LowerCaseParser、CamelCaseParser 等...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T11:39:04.340

是的，这是使用重载的正确方法。

关于默认参数需要注意的一件事。

如果您有两个程序集 A 和 B，则 A 调用 B 中的函数。

如果更改 B 中的默认值：

使用参数的默认值，您需要重新编译程序集 A 和 B 才能使此更改生效

使用重载你只需要重新编译 B.

这是因为对于默认参数，编译器在编译时会插入默认值。

# android - Google Drive 是否通过代码与 Android 集成？

> ID：11933431
> 
> 赞同：0
> 
> 时间：2012-08-13T11:30:36.980
> 
> 标签：android, google-drive-api

我花了几个小时通过代码搜索 Android 手机与 Google Drive 的集成。但我无法弄清楚。我想制作一个应用程序，当我按下按钮时，我的特定文件会上传并存储在 Google Drive 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:20:27.923

目前，GoogleDrive 未与 Android 集成。然而，这是他们正在努力的事情，并说它将“很快”在这里。他们正在开发的服务称为[Google Play Services](https://developers.google.com/android/google-play-services/)。

您当前还可以使用[java 客户端库](http://code.google.com/p/google-api-java-client/)来完成您现在需要的。

只是一个警告，那里没有很多很好的例子，所以它有点难以弄清楚。

# asp.net-mvc-3 - sql compact 成员资格提供程序错误

> ID：11933432
> 
> 赞同：1
> 
> 时间：2012-08-13T11:30:38.473
> 
> 标签：asp.net-mvc-3, asp.net-membership, sql-server-ce

对于一个 ASP.NET MVC3 项目，我决定从标准的 SQL express 成员资格提供程序转移到一个 SQL compact 成员资格提供程序。我安装了 microsoft 通用提供程序 nuget 包（此处提到：http://sqlcemembership.codeplex.com/ [）](http://sqlcemembership.codeplex.com/)。

这给了我以下错误：

```
Unable to find the requested .Net Framework Data Provider.  It may not be installed. 
```

谷歌搜索后，我发现我必须将以下内容添加到我的 web.config 中：

```
<system.data>
  <DbProviderFactories>
    <remove invariant="System.Data.SqlServerCe.4.0" />
    <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
  </DbProviderFactories>
</system.data> 
```

我做到了。我现在陷入了以下我似乎无法摆脱的错误：

```
Failed to find or load the registered .Net Framework Data Provider. 
```

当我尝试通过 Membership 类访问成员资格数据库时发生错误。我究竟做错了什么？我已经在下面发布了我的整个 web.config 文件。

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
      For more information on how to configure your ASP.NET application, please visit
      http://go.microsoft.com/fwlink/?LinkId=152368
      -->
<configuration>
  <connectionStrings>
    <add name="LabManagerEntities" connectionString="metadata=res://*/Models.LabManagerEntities.csdl|res://*/Models.LabManagerEntities.ssdl|res://*/Models.LabManagerEntities.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;User Id=LabManager;password=LabManager;Persist Security Info=True;database=labmanager&quot;" providerName="System.Data.EntityClient" />
    <add name="ApplicationServices" connectionString="Data Source=|DataDirectory|\membership.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <clear />
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <clear />
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="true" defaultProvider="DefaultRoleProvider">
      <providers>
        <clear />
        <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpRuntime maxRequestLength="104857600" />
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="104857600" />
      </requestFiltering>
    </security>
  </system.webServer>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.4.0" />
      <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
  </system.data>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:09:09.563

解决方案是 SQL Server Compact 不是 .NET 框架的本机部分，但必须单独安装。这个安装程序可以在这里下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=17876](http://www.microsoft.com/en-us/download/details.aspx?id=17876)

# php - 使用 php 插入或更新 mysql 日期时间字段

> ID：11933434
> 
> 赞同：1
> 
> 时间：2012-08-13T11:30:46.993
> 
> 标签：php, mysql, codeigniter, datetime

我有一个向篮子添加项目的功能。在这个函数中，它检查这个用户的购物篮是否已经存在，并相应地创建或更新购物篮。创建或更新购物篮时，我需要将超时字段设置为未来 4 小时。但是，当我创建或更新购物篮时，超时的 dateTime 字段位于 0000-00-00 00:00:00。这是我的代码（使用 codeigniter 框架的 php）：

```
$dateTime = date("Y-d-m h:m:s", strtotime("+4 hours"));

if($query->num_rows() != 1)
{

    $this->db->insert("baskets", array("basket_session" => session_id(), "basket_timeout" => $dateTime, "basket_delivery" => "0.00"));

}
else
{

    $this->db->where("basket_session", session_id());
    $this->db->update("baskets", array("basket_timeout" => $dateTime));

} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:32:41.400

MySQL 的 DATETIME 格式是`Y-m-d H:i:s`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:33:26.170

尝试：

```
$dateTime = date("Y-m-d H:i:s", strtotime("+4 hours")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:33:46.520

改变

```
$dateTime = date("Y-d-m h:m:s", strtotime("+4 hours")); 
```

到

```
$dateTime = date("Y-m-d H:i:s", strtotime("+4 hours")); 
```

# android - Android：按钮写入外部文件

> ID：11933437
> 
> 赞同：0
> 
> 时间：2012-08-13T11:31:01.430
> 
> 标签：android, file-io

我希望我的 android 应用程序能够从外部文件读取和写入。

我有一个按钮，我希望在其操作中创建（或从已创建的文件中读取）并从此文件中读取和写入

我正在使用此代码

```
try {
        FileWriter fstream = new FileWriter("D:\\DHA\\OnlineConsultationFile\\out.txt\\");
        fstream.write("Some String");
        fstream.flush();
        fstream.close();

    }catch (IOException e) {
        e.printStackTrace();
    } 
```

但它不会在文件上写任何东西。

然后我需要阅读这个文件的内容

谁能帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:59:34.073

将此添加到您的清单文件

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:45:35.917

尝试：

```
..... 
File root = Environment.getExternalStorageDirectory();
File yourFile = new File(root, "out.txt");
if (root.canWrite()) {
    BufferedWriter bw = new BufferedWriter(new FileWriter(yourFile)); 
    bw.write("SOME CONTENT");
    bw.close();
}    
...... 
```

确保您有权写入外部存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:49:06.583

从 java-samples.com查看教程[在 Android 中读取和写入文件到 SD 卡示例程序。](http://www.java-samples.com/showtutorial.php?tutorialid=1523)

教程概述：

> 这个示例 android 程序向您展示了如何在 Android 中从 SD 卡写入和读取文件。在这个程序中显示了四个按钮和一个编辑框。当您在编辑框中键入一些文本并单击“保存到 SD 卡”按钮时，文本将保存到文本文件并保存到 SD 卡中。单击清除按钮时，编辑框内容被清除。当您单击 Read Sd card 按钮时，将从 SD 卡中读取文件并将内容复制到编辑框中。

# c# - 解析几乎格式良好的 XML 片段：如何跳过多个 XML 标头

> ID：11933440
> 
> 赞同：3
> 
> 时间：2012-08-13T11:31:08.150
> 
> 标签：c#, xml, .net-4.0, xml-parsing, xmlreader

我需要编写一个工具来处理以下格式不正确的 XML 片段，因为它在流中间包含 XML 声明。

该公司已经使用了很长时间的此类文件，因此无法更改格式。

没有可用于解析的源代码，新工具的首选平台是 .NET 4 或更新版本，最好使用 C#。

这是片段的样子：

```
<Header>
  <Version>1</Version>
</Header>
<Entry><?xml version="1.0"?><Detail>...snip...</Detail></Entry>
<Entry><?xml version="1.0"?><Detail>...snip...</Detail></Entry>
<Entry><?xml version="1.0"?><Detail>...snip...</Detail></Entry>
<Entry><?xml version="1.0"?><Detail>...snip...</Detail></Entry> 
```

使用[XmlReader](http://msdn.microsoft.com/en-us/library/b8a5e1s5)并将[XmlReaderSettings.ConformanceLevel](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.conformancelevel.aspx)设置为[ConformanceLevel.Fragment](http://msdn.microsoft.com/en-us/library/h2344bs2.aspx)，我可以`<Header>`很好地阅读完整的元素。即使`<Entry>`元素开始也可以，但是在读取`<Detail>`信息时`XmlReader`它会抛出[XmlException](http://msdn.microsoft.com/en-us/library/system.xml.xmlexception.aspx)，因为它在`<?xml...?>`XML 声明中读取它并不期望在那个地方。

除了繁重的字符串操作之外，我还有哪些选择可以跳过这些 XML 声明？

由于片段可以轻松超过 100 兆字节，我宁愿不要一次将所有内容加载到内存中。但这就是它所需要的，我对此持开放态度。

我得到的异常示例：

```
System.Xml.XmlException: Unexpected XML declaration.
The XML declaration must be the first node in the document, and no white space characters are allowed to appear before it.
Line ##, position ##. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:01:41.290

我不认为内置类会有所帮助。您可能需要做一些准备并删除额外的标题。如果您的样本是准确的，您可以做一个`string.Replace(badXml, "<?xml version=\"1.0\"?>, "")`并继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:19:12.883

如果您不确定声明是否始终保持不变，请替换`<?xml`为`<XmlDeclaration`和`?>`并`/>`使用常规解析器；）

另外，您是否尝试过通过 XML tidy 样式程序传递文件？

您可能还可以使用 SGML 库来预处理数据并输出正确的 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:10:24.260

我将此添加为答案，因为它保留了语法突出显示。

```
 private void ProcessFile(string inputFileName, string outputFileName)
    {
        using (StreamReader reader = new StreamReader(inputFileName, new UTF8Encoding(false, true)))
        {
            using (StreamWriter writer = new StreamWriter(outputFileName, false, Encoding.UTF8))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    const string xmlDeclarationStart = "<?xml";
                    const string xmlDeclarationFinish = "?>";
                    if (line.Contains(xmlDeclarationStart))
                    {
                        string newLine = line.Substring(0, line.IndexOf(xmlDeclarationStart));
                        int endPosition = line.IndexOf(xmlDeclarationFinish, line.IndexOf(xmlDeclarationStart));
                        if (endPosition == -1)
                        {
                            throw new NotImplementedException(string.Format("Implementation assumption is wrong. {0} .. {1} spans multiple lines (or input file is severely misformed)", xmlDeclarationStart, xmlDeclarationFinish));
                        }
                        // the code completely strips the <?xml ... ?> part
                        // an alternative would be to make this a new XML element containing
                        // the information inside the <?xml ... ?> part as attributes
                        // just like Daren Thomas suggested
                        newLine += line.Substring(endPosition + 2);
                        line = newLine;
                    }
                    writer.WriteLine(line);
                }
            }
        }
    } 
```

# ruby-on-rails - 没有新方法的模型错误报告？

> ID：11933442
> 
> 赞同：0
> 
> 时间：2012-08-13T11:31:09.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否可以在没有新方法的情况下进行模型错误报告？据我了解，当您要报告错误时，您将创建以下控制器代码：

```
 def new
    @product = Product.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @product }
    end
  end

  def create
    @product = Product.new(params[:product])

    respond_to do |format|
      if @product.save
        format.html { redirect_to @product, notice: 'Product was successfully created.' }
        format.json { render json: @product, status: :created, location: @product }
      else
        format.html { render action: "new" }
        format.json { render json: @product.errors, status: :unprocessable_entity }
      end
    end
  end 
```

然后您将创建一个包含以下代码的表单：

```
<% if @product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

      <ul>
      <% @product.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 
```

但是，您能否仅在控制器中使用“创建”方法来复制此技术？例如，使用 form_tag 将数据传递给“create”方法。也许是这样的：

'post', :class => 'form-horizo​​ntal', :style => 'text-align:center') 做 %>

```
 <% unless @product.blank? %>
              <% if @product.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

                  <ul>
                  <% @product.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                  <% end %>
                  </ul>
                </div>
              <% end %>
            <% end %>

               <%= text_area_tag :content, '', :placeholder => 'Ask your classmates anything...' %>
               <%= hidden_field_tag :user_id, current_user.id %>
               <%= submit_tag 'Post', :class => "btn btn-medium btn-primary post-room-button"  %>
            <% end %> 
```

I have been trying to do this, but I cannot find a way to get it to work. Whenever I submit the form that fails one of the validations in my model, the page simply redirects to my 'else' path in my `respond_to` function in my create controller.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:48:59.557

You can remove the compete new method from your controller but not the new view present in the views file.

When you say render action: "new" it renders the new.html.erb file present in the views folder of your app and when you say redirect_to action: "new" it will call the new action of the controller and will perform the operations present in the new action and then render the new.html.erb.

You cannot render the create action as it does not contain any view file and create action as per REST is supported by POST request and not GET request

# web-services - Axis2 Web 服务

> ID：11933444
> 
> 赞同：0
> 
> 时间：2012-08-13T11:31:19.267
> 
> 标签：web-services

谁能解释一下**axis2** Web服务。是axis2 **SOAP**还是**REST**？它非常混乱。在 REST 中，它支持多种格式。但是 SOAP 只支持一种**XML**格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:37:24.913

来自 apache axis2[网站](http://axis.apache.org/axis2/java/core/)

> Apache Axis2™ 是一个 Web 服务/SOAP/WSDL 引擎，是广泛使用的 Apache Axis SOAP 堆栈的继承者。

顺便说一句，您可以将[RESTful](http://axis.apache.org/axis2/java/core/docs/rest-ws.html)与 apache axis2 一起使用。

# android - 更改方向时编辑文本高度增加

> ID：11933445
> 
> 赞同：1
> 
> 时间：2012-08-13T11:31:19.943
> 
> 标签：android, size, android-edittext, orientation-changes

在我的应用程序中，我将屏幕方向锁定为纵向。但是当用户点击编辑文本框时我正在改变它。在纵向模式下它工作正常。但在横向模式下编辑文本高度几乎是实际大小的两倍。下面给出的是我用于编辑文本的 xml。

```
<EditText
        android:id="@+id/mylist_AddNewFFtext"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:background="@drawable/mylist_stdcenterelement"
        android:imeOptions="actionSend|actionGo|actionDone"
        android:inputType="text|textCapWords"
        android:maxLength="1000"
        android:padding="5dp"
        android:textColor="@android:color/black"
        android:textSize="14sp"
        android:textStyle="bold"
        android:visibility="visible" /> 
```

我已经删除了 weight=1 属性。但它不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:38:33.183

```
<EditText
    android:id="@+id/mylist_AddNewFFtext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:layout_weight="1"
    android:background="@drawable/mylist_stdcenterelement"
    android:imeOptions="actionSend|actionGo|actionDone"
    android:inputType="text|textCapWords"
    android:maxLength="1000"
    android:padding="5dp"
    android:textColor="@android:color/black"
    android:textSize="14sp"
    android:textStyle="bold"
    android:visibility="visible" /> 
```

使您的布局高度 0dp 到 wrap_content 因为您试图将文本插入到 0dp 高度编辑文本框中

# ruby - 如何使用 Nokogiri 将嵌套哈希转换为 XML

> ID：11933451
> 
> 赞同：8
> 
> 时间：2012-08-13T11:31:37.867
> 
> 标签：ruby, xml, hash, nokogiri

我有很多级别的嵌套哈希，例如：

```
 { :foo => 'bar', :foo1 => { :foo2 => 'bar2', :foo3 => 'bar3', :foo4 => { :foo5 => 'bar5' }}} 
```

我怎样才能将它们转换成这样的 XML？：

```
<foo>bar</foo>
<foo1>
    <foo2>bar2</foo2>
    <foo3>bar3</foo3>
    <foo4>
      <foo5>bar5</foo5>
    </foo4>
</foo1> 
```

我尝试了该`xml.send`方法，但它将上面的嵌套哈希转换为：

```
<foo1 foo3="bar3" foo4="foo5bar5" foo2="bar2"/>
<foo>bar</foo> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T11:51:27.373

这个怎么样？

```
class Hash
  def to_xml
    map do |k, v|
      text = Hash === v ? v.to_xml : v
      "<%s>%s</%s>" % [k, text, k]
    end.join
  end
end

h.to_xml
#=> "<foo>bar</foo><foo1><foo2>bar2</foo2><foo3>bar3</foo3><foo4><foo5>bar5</foo5></foo4></foo1>" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-08T20:16:35.883

接受的是一个干净的解决方案，但下面确实“使用” Nokogiri 从具有特殊处理属性的哈希构造 XML：

```
require 'nokogiri'

def generate_xml(data, parent = false, opt = {})
    return if data.to_s.empty?
    return unless data.is_a?(Hash)

    unless parent
        # assume that if the hash has a single key that it should be the root
        root, data = (data.length == 1) ? data.shift : ["root", data]
        builder = Nokogiri::XML::Builder.new(opt) do |xml|
            xml.send(root) {
                generate_xml(data, xml)
            }
        end

        return builder.to_xml
    end

    data.each { |label, value|
        if value.is_a?(Hash)
            attrs = value.fetch('@attributes', {})
            # also passing 'text' as a key makes nokogiri do the same thing
            text = value.fetch('@text', '') 
            parent.send(label, attrs, text) { 
                value.delete('@attributes')
                value.delete('@text')
                generate_xml(value, parent)
            }

        elsif value.is_a?(Array)
            value.each { |el|
                # lets trick the above into firing so we do not need to rewrite the checks
                el = {label => el}
                generate_xml(el, parent) 
            }

        else
            parent.send(label, value)
        end
    }
end

puts generate_xml(
    {'myroot' => 
        {
            'num' => 99, 
            'title' => 'something witty', 
            'nested' => { 'total' => [99, 98], '@attributes' => {'foo' => 'bar', 'hello' => 'world'}}, 
            'anothernest' => {
                '@attributes' => {'foo' => 'bar', 'hello' => 'world'}, 
                'date' => [
                    'today', 
                    {'day' => 23, 'month' => 'Dec', 'year' => {'y' => 1999, 'c' => 21}, '@attributes' => {'foo' => 'blhjkldsaf'}}
                ]
            }
    }})
puts puts
puts generate_xml({
            'num' => 99, 
            'title' => 'something witty', 
            'nested' => { 'total' => [99, 98], '@attributes' => {'foo' => 'bar', 'hello' => 'world'}}, 
            'anothernest' => {
                '@attributes' => {'foo' => 'bar', 'hello' => 'world'}, 
                'date' => [
                    'today', 
                    {'day' => [23,24], 'month' => 'Dec', 'year' => {'y' => 1999, 'c' => 21}, '@attributes' => {'foo' => 'blhjkldsaf'}}
                ]
            }
    }) 
```

以及生成的 XML 输出：

```
<?xml version="1.0"?>
<myroot>
  <num>99</num>
  <title>something witty</title>
  <nested foo="bar" hello="world">
    <total>99</total>
    <total>98</total>
  </nested>
  <anothernest foo="bar" hello="world">
    <date>today</date>
    <date foo="blhjkldsaf">
      <day>23</day>
      <month>Dec</month>
      <year>
        <y>1999</y>
        <c>21</c>
      </year>
    </date>
  </anothernest>
</myroot>

<?xml version="1.0"?>
<root>
  <num>99</num>
  <title>something witty</title>
  <nested foo="bar" hello="world">
    <total>99</total>
    <total>98</total>
  </nested>
  <anothernest foo="bar" hello="world">
    <date>today</date>
    <date foo="blhjkldsaf">
      <day>23</day>
      <day>24</day>
      <month>Dec</month>
      <year>
        <y>1999</y>
        <c>21</c>
      </year>
    </date>
  </anothernest>
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-09T00:41:53.907

如果您使用的是 Rails，则可以使用内置的 to_xml 方法。

```
c = { :foo => 'bar', :foo1 => { :foo2 => 'bar2', :foo3 => 'bar3', :foo4 => { :foo5 => 'bar5' }}}

xml = c.to_xml

=> "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<hash>\n  <foo>bar</foo>\n  <foo1>\n    <foo2>bar2</foo2>\n    <foo3>bar3</foo3>\n    <foo4>\n      <foo5>bar5</foo5>\n    </foo4>\n  </foo1>\n</hash>\n" 
```

# android - 从 Message 和 ContentProvider 调用时光标行为发生变化

> ID：11933452
> 
> 赞同：0
> 
> 时间：2012-08-13T11:31:38.640
> 
> 标签：android, cursor, ipc

我有这个 Cursor 实现（API 10）：

```
package com.blablabla.android.helpers.db.cursor;

import android.content.ContentResolver;
import android.database.AbstractWindowedCursor;
import android.database.CharArrayBuffer;
import android.database.ContentObserver;
import android.database.CrossProcessCursor;
import android.database.CursorWindow;
import android.database.DataSetObserver;
import android.net.Uri;
import android.os.Bundle;
import android.os.Parcel;
import android.os.Parcelable;
import android.util.Log;

import com.blablabla.android.helpers.classloader.ClassLoaderHelper;
import com.blablabla.android.helpers.util.BijectiveHashMap;
import com.blablabla.android.helpers.util.BijectiveMap;

/**
 * Cursor for IPC. Takes a CursorWindow as data buffer and the number of columns
 * that CursorWindow has.
 * 
 * @author me@blablabla.eu
 * 
 */
public class ParcelableCursor implements Parcelable, CrossProcessCursor {

    /** Cursor data window */
    protected CursorWindow window = CursorHelper.getCursorWindowInstance();

    /** How many columns we have */
    protected int numColumns = 0;

    /** Column names */
    protected BijectiveMap<String, Integer> colNames = new BijectiveHashMap<String, Integer>();

    /** Current row */
    protected int curRow = -1;

    /** Is this cursor closed? */
    protected boolean closed = false;

    public ParcelableCursor() {
    }

    // /////////////////
    // PARCELABLE IMPLEMENTATION
    // /////////////////

    /** CREATOR for Parcelable */
    public static final Parcelable.Creator<ParcelableCursor> CREATOR = new Parcelable.Creator<ParcelableCursor>() {
        public ParcelableCursor createFromParcel(Parcel in) {
            return new ParcelableCursor(in);
        }

        public ParcelableCursor[] newArray(int size) {
            return new ParcelableCursor[size];
        }
    };

    /** Constructor for Parcelable */
    public ParcelableCursor(Parcel in) {
        readFromParcel(in);
    }

    @Override
    public int describeContents() {
        // Nothing to do here
        return 0;
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
        out.writeParcelable(window, 0);
        out.writeInt(numColumns);
        out.writeParcelable((Parcelable) colNames, 0);
        out.writeInt(curRow);
        out.writeByte(closed ? (byte) 1 : 0);
    }

    /** Restoring this object from a Parcel */
    public void readFromParcel(Parcel in) {
        window = in.readParcelable(CursorWindow.class.getClassLoader());
        numColumns = in.readInt();
        colNames = in.readParcelable(ClassLoaderHelper.getClassLoader());
        curRow = in.readInt();
        closed = (in.readByte() == 1);
    }

    // ////////////////
    // END PARCELABLE IMPLEMENTATION
    // ////////////////

    // /////////////////
    // CROSS PROCESS CURSOR IMPLEMENTATION
    // /////////////////
    @Override
    public void close() {
        window.close();
        closed = true;
    }

    @Override
    public void copyStringToBuffer(int columnIndex, CharArrayBuffer buffer) {
        // TODO: what does this do?
    }

    @Override
    public void deactivate() {
        // Deprecated, does nothing
    }

    @Override
    public byte[] getBlob(int columnIndex) {
        return window.getBlob(curRow, columnIndex);
    }

    @Override
    public int getColumnCount() {
        return numColumns;
    }

    @Override
    public int getColumnIndex(String columnName) {
        int ret = -1;
        Integer col = colNames.get(columnName);
        if (col != null) {
            ret = col;
        }
        return ret;
    }

    @Override
    public int getColumnIndexOrThrow(String columnName)
            throws IllegalArgumentException {
        Integer col = colNames.get(columnName);
        if (col == null) {
            throw new IllegalArgumentException();
        }
        return col;
    }

    @Override
    public String getColumnName(int columnIndex) {
        return colNames.getKey(columnIndex);
    }

    @Override
    public String[] getColumnNames() {
        Log.d("PARCELCURSOR.getColumnNames()", "===GETTING COLNAMES===");
        return colNames.keySet().toArray(new String[colNames.keySet().size()]);
    }

    @Override
    public int getCount() {
        return window.getNumRows();
    }

    @Override
    public double getDouble(int columnIndex) {
        return window.getDouble(curRow, columnIndex);
    }

    @Override
    public Bundle getExtras() {
        // TODO
        return null;
    }

    @Override
    public float getFloat(int columnIndex) {
        return window.getFloat(curRow, columnIndex);
    }

    @Override
    public int getInt(int columnIndex) {
        return window.getInt(curRow, columnIndex);
    }

    @Override
    public long getLong(int columnIndex) {
        return window.getLong(curRow, columnIndex);
    }

    @Override
    public int getPosition() {
        return curRow;
    }

    @Override
    public short getShort(int columnIndex) {
        return window.getShort(curRow, columnIndex);
    }

    @Override
    public String getString(int columnIndex) {
        return window.getString(curRow, columnIndex);
    }

    @Override
    public boolean getWantsAllOnMoveCalls() {
        return false;
    }

    @Override
    public boolean isAfterLast() {
        return (curRow >= window.getNumRows());
    }

    @Override
    public boolean isBeforeFirst() {
        return (curRow < 0);
    }

    @Override
    public boolean isClosed() {
        return closed;
    }

    @Override
    public boolean isFirst() {
        return (curRow == 0);
    }

    @Override
    public boolean isLast() {
        return (curRow == window.getNumRows() - 1);
    }

    @Override
    public boolean isNull(int columnIndex) {
        return window.isNull(curRow, columnIndex);
    }

    @Override
    public boolean move(int offset) {
        int oldPos = curRow;
        curRow += offset;
        if (curRow < -1) {
            curRow = -1;
            return false;
        } else if (curRow > window.getNumRows() - 1) {
            curRow = window.getNumRows() - 1;
            return false;
        }
        return onMove(oldPos, curRow);
    }

    @Override
    public boolean moveToFirst() {
        if (window.getNumRows() == 0) {
            return false;
        }
        int oldPos = curRow;
        curRow = 0;
        return onMove(oldPos, curRow);
    }

    @Override
    public boolean moveToLast() {
        if (window.getNumRows() == 0) {
            return false;
        }
        int oldPos = curRow;
        curRow = window.getNumRows() - 1;
        return onMove(oldPos, curRow);
    }

    @Override
    public boolean moveToNext() {
        int oldPos = curRow++;
        if (isAfterLast()) {
            curRow = window.getNumRows();
            return false;
        }
        return onMove(oldPos, curRow);
    }

    @Override
    public boolean moveToPosition(int position) {
        if (position < -1 && position >= window.getNumRows()) {
            return false;
        }
        int oldPos = curRow;
        curRow = position;
        return onMove(oldPos, curRow);
    }

    @Override
    public boolean moveToPrevious() {
        int oldPos = curRow--;
        if (isBeforeFirst()) {
            curRow = -1;
            return false;
        }
        return onMove(oldPos, curRow);
    }

    /** Not supported */
    @Override
    public void registerContentObserver(ContentObserver observer) {
        // Does nothing
    }

    /** Not supported */
    @Override
    public void registerDataSetObserver(DataSetObserver observer) {
        // Does nothing
    }

    /** Deprecated, not supported */
    @Override
    public boolean requery() {
        return false;
    }

    /** Not supported */
    @Override
    public Bundle respond(Bundle extras) {
        // Does nothing
        return null;
    }

    /** Not supported */
    @Override
    public void setNotificationUri(ContentResolver cr, Uri uri) {
        // Does nothing
    }

    /** Not supported */
    @Override
    public void unregisterContentObserver(ContentObserver observer) {
        // Does nothing
    }

    /** Not supported */
    @Override
    public void unregisterDataSetObserver(DataSetObserver observer) {
        // Does nothing
    }

    @Override
    public void fillWindow(int position, CursorWindow window) {
        CursorHelper.copyCursorWindow(position, this.window, window);
    }

    @Override
    public CursorWindow getWindow() {
        CursorWindow ret = new CursorWindow(false);
        fillWindow(0, ret);
        return ret;
    }

    @Override
    public boolean onMove(int oldPosition, int newPosition) {
        // Don't forget to set curRow = -1 if this method returns false
        return true;
    }

    // /////////////////
    // END CROSS PROCESS CURSOR IMPLEMENTATION
    // /////////////////

    /** Sets this cursor using a CursorWindow data */
    public void setFromWindow(CursorWindow window) {
        CursorHelper.copyCursorWindow(0, window, this.window);
        numColumns = CursorHelper.getCursorWindowNumCols(window);
        moveToPosition(-1);
    }

    /** Sets this cursor from another windowed Cursor */
    public void setFromCursor(AbstractWindowedCursor cursor) {

        // Set column names
        String[] colNames = cursor.getColumnNames();
        for (String col : colNames) {
            addColumn(col);
        }

        // Fill window
        window.setNumColumns(numColumns);
        cursor.fillWindow(0, window);
        moveToPosition(-1);
    }

    /**
     * Adds a new column at the end and assigns it this name. This will make
     * this cursor to lose all its data, so you have to add all the columns
     * before adding any row.
     */
    private void addColumn(String name) {
        numColumns++;
        curRow = -1;
        colNames.put(name, numColumns - 1);
    }
} 
```

我`Cursor`通过`Messenger`（实例内部`Message`）和`ContentProvider.query()`（和朋友）发送了一个实例。问题是该`isNull()`方法在通过发送时可以正常工作，`Cursor`但`Messenger`在通过发送时总是返回 false `ContentProvider`。

这是我的`ContentProvider.query()`实现：

```
@Override
public Cursor query(final Uri uri, final String[] projection,
    final String selection, final String[] selectionArgs,
    final String sortOrder) {

    // Build custom query object
    final Query query = getBasicQuery(uri);
    // .... More code preparing the query object

    // Execute the query
    dbManager.executeQuery(getSourceId(uri), query);

    // This is a ParcelableCursor instance
    final Cursor resultCursor = query.getResultCursor();
    return resultCursor;
} 
```

在这里，当我在`ContentProvider`进程中运行时，该`isNull()`方法可以正常工作，但是当`Cursor`在客户端进程接收到时，它总是返回`false`.

这是我做 a`Cursor.getString()`因为`Cursor.isNull()`返回时抛出的异常（错误地）`false`：

```
08-13 13:17:16.480: D/SELECT on ui(1572): java.lang.IllegalStateException: UNKNOWN type 0
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.database.CursorWindow.getString_native(Native Method)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.database.CursorWindow.getString(CursorWindow.java:329)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.database.CursorWrapper.getString(CursorWrapper.java:135)
08-13 13:17:16.480: D/SELECT on ui(1572):         at com.blablabla.android.core.test.TestDBActivity.selectDB(TestDBActivity.java:332)
08-13 13:17:16.480: D/SELECT on ui(1572):         at com.blablabla.android.core.test.TestDBActivity$3.onClick(TestDBActivity.java:169)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.view.View.performClick(View.java:2485)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.view.View$PerformClick.run(View.java:9080)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.os.Handler.handleCallback(Handler.java:587)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.os.Handler.dispatchMessage(Handler.java:92)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.os.Looper.loop(Looper.java:123)
08-13 13:17:16.480: D/SELECT on ui(1572):         at android.app.ActivityThread.main(ActivityThread.java:3683)
08-13 13:17:16.480: D/SELECT on ui(1572):         at java.lang.reflect.Method.invokeNative(Native Method)
08-13 13:17:16.480: D/SELECT on ui(1572):         at java.lang.reflect.Method.invoke(Method.java:507)
08-13 13:17:16.480: D/SELECT on ui(1572):         at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-13 13:17:16.480: D/SELECT on ui(1572):         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-13 13:17:16.480: D/SELECT on ui(1572):         at dalvik.system.NativeStart.main(Native Method) 
```

**编辑**：经过大量调试，我可以看到当值为 时`null`，`isBlob()`返回`true`。

关于这里可能出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:51:24.217

问题其实出在`CursorHelper.copyCursorWindow()`，里面调用了`fillWindow()`，Android系统调用里面`CursorWrapper`。这是我使用此方法的错误版本：

```
/**
 * Copies one CursorWindow into another. Previous data in destination
 * CursorWindow is lost
 * 
 * @param position
 *            Starting position to copy from the origin window
 * @param numColumns
 *            Number of columns in the origin window
 * @param origin
 *            CursorWindow to copy from
 * @param destination
 *            CursorWindow to copy to
 */
public static void copyCursorWindow(int position, CursorWindow origin,
        CursorWindow destination) {

    // Column number
    int numCols = getCursorWindowNumCols(origin);

    // Clear destination
    destination.clear();
    destination.setNumColumns(numCols);

    // Rows
    int i = position;
    while (i < origin.getNumRows() && destination.allocRow()) {

        // Columns
        for (int j = 0; j < numCols; j++) {

            if (origin.isBlob(i, j)) {
                byte[] cur = origin.getBlob(i, j);
                destination.putBlob(cur, i, j);

            } else if (origin.isFloat(i, j)) {
                Float cur = origin.getFloat(i, j);
                destination.putDouble(cur, i, j);

            } else if (origin.isLong(i, j)) {
                Long cur = origin.getLong(i, j);
                destination.putLong(cur, i, j);

            } else if (origin.isString(i, j)) {
                String cur = origin.getString(i, j);
                destination.putString(cur, i, j);

            } else if (origin.isNull(i, j)) {
                destination.putNull(i, j);
            }
        }
        i++;
    }
} 
```

这里的问题是`isBlob()`当值实际上是时会返回 true `null`。所以`isNull()`应该是第一次检查。这是一个有效的实现：

```
/**
 * Copies one CursorWindow into another. Previous data in destination
 * CursorWindow is lost
 * 
 * @param position
 *            Starting position to copy from the origin window
 * @param numColumns
 *            Number of columns in the origin window
 * @param origin
 *            CursorWindow to copy from
 * @param destination
 *            CursorWindow to copy to
 */
public static void copyCursorWindow(int position, CursorWindow origin,
        CursorWindow destination) {

    // Column number
    int numCols = getCursorWindowNumCols(origin);

    // Clear destination
    destination.clear();
    destination.setNumColumns(numCols);

    // Rows
    int i = position;
    while (i < origin.getNumRows() && destination.allocRow()) {

        // Columns
        for (int j = 0; j < numCols; j++) {

            if (origin.isNull(i, j)) {
                destination.putNull(i, j);

            } else if (origin.isFloat(i, j)) {
                Float cur = origin.getFloat(i, j);
                destination.putDouble(cur, i, j);

            } else if (origin.isLong(i, j)) {
                Long cur = origin.getLong(i, j);
                destination.putLong(cur, i, j);

            } else if (origin.isString(i, j)) {
                String cur = origin.getString(i, j);
                destination.putString(cur, i, j);

            } else if (origin.isBlob(i, j)) {
                byte[] cur = origin.getBlob(i, j);
                destination.putBlob(cur, i, j);
            }
        }
        i++;
    }
} 
```

恕我直言，这是一个（烦人的）如何`isBlob()`实现的错误（尽管可能在 API 11+ 中修复，因为这部分有一些变化——`Cursor.getType()`比如方法——）。

（[实施`getCursorWindowNumCols()`](https://stackoverflow.com/questions/11793059/cursorwindow-number-of-columns)）

# android - Android StartAcitivty() 有意图

> ID：11933454
> 
> 赞同：0
> 
> 时间：2012-08-13T11:31:47.173
> 
> 标签：android, android-intent, android-activity

我正在制作一个 SIP 应用程序，除了一件事之外，我已经完成了我想要的几乎所有工作。发生 SIP 呼叫时，我无法启动活动。

我正在使用一个 SIP 库，该库启动一个“电话”服务，该服务处理来电等处理，当我创建一个“电话”实例时，我会注册监听器，详细说明我想要发生的事情。因此，为了处理来电，我注册了一个“OnIncommingCall”监听器。

如果应用程序当前未打开，我希望它启动应用程序。所以我的听众是：

```
thisPhone.setIncomingCallListener(new OnIncomingCallListener() 
    {
        public void OnIncomingCall(String remoteContact, int accountId)
        {
            if(MainActivity.this.getIsOpen())
            {
                MainActivity.this.setIsCallIncomming(true);
                MainActivity.this.setCurrentCaller(remoteContact);
                MainActivity.this.setMainUIEles();
            }
            else
            {
                Intent i = new Intent(getApplicationContext(), MainActivity.class);
                i.putExtra("isCallIncomming", true);
                i.putExtra("currentCaller", remoteContact);
                i.putExtra("isRegistered", true);
                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
       }
    }); //incoming call listener 
```

但是，当来电时，它会响铃但应用程序不会打开，但是如果我在通话仍在响铃时从启动器打开应用程序，那么它将打开并知道通话在那里。

问题是因为我试图启动定义监听器的 Activity 吗？

我已经尝试了各种标志和组合（SINGLE_TOP 等），但我无法让它工作。

任何帮助，将不胜感激！

DJOodlen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:42:50.127

好吧，这对我来说是一个愚蠢的错误。

在放了一些祝酒词后，我可以看到代码中的每一位都在哪里，我意识到 getIsOpen() 永远不会返回 false。那是因为它没有在 onPause() 方法以及 onDestroy() 方法上被调用......

哎呀！

# javascript - 脚本执行多次

> ID：11933457
> 
> 赞同：0
> 
> 时间：2012-08-13T11:31:55.187
> 
> 标签：javascript, jquery, jquery-plugins

我有我的插件。在该脚本中执行多次。

```
$('element1').myplugin({callback:foo});
$('element2').myplugin({callback:bla}); 
```

第二个回调不起作用总是调用'foo'。

插件代码：

```
(function($) {
    $.fn.myplugin = function(options) {
          //some code.
          options.callback();
        }
})(jQuery); 
```

如果我再包含一个元素，那么脚本执行的次数就会增加。我做错什么了吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:58:29.890

多次包含插件，代码也将运行，没有任何问题。如果您使用回调，请确保在函数内部分配回调。这样你就可以避免冲突。

# objective-c - iOS 4中的Splitview控制器错误

> ID：11933459
> 
> 赞同：0
> 
> 时间：2012-08-13T11:32:16.487
> 
> 标签：objective-c, xcode, ipad, ios4, uisplitviewcontroller

我是 iPhone 开发的新手。我正在开发一个具有拆分视图控制器的项目。我在做什么如下

```
[self.splitViewController removeFromParentViewController];
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
     UINavigationController *detailViewNav=[[UINavigationController alloc]initWithRootViewController:SampleViewController];

   self.nextSplitControler=[[UISplitViewController alloc]init];
    self.nextSplitControler.viewControllers=[NSArray arrayWithObjects:masterNavigationController,detailViewNav, nil];
    self.nextSplitControler.delegate=SampleViewController;
    self.window.rootViewController=self.nextSplitControler;

    [self.window makeKeyAndVisible]; 
```

它在 iOS 5.0 上运行良好。但是在 iOS 4.3 上它会抛出一个错误

`-[UISplitViewController removeFromParentViewController]: unrecognized selector sent to instance.`

有人可以帮我解决这个问题吗？我在敲我的头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:20:40.047

不要敲你的头；检查文档。:)

`- (void)removeFromParentViewController`

**可用性**

在 iOS 5.0 及更高版本中可用。

# java - 如何在 Java 中获取二维图像数组的值并设置值

> ID：11933465
> 
> 赞同：0
> 
> 时间：2012-08-13T11:32:40.557
> 
> 标签：java

我有 Image_1.jpg。我从 Image_1.jpg 获得了 2D 数组中的图像像素值。我已将 2D 数组的前 8*8 块值设置如下。

```
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
16 , 16 , 16 , 16 , 16 , 16 , 16 , 16 , 
```

并将图像构建为 Img.jpg。再次获取 This Img.jpg Image 以 2D Array 读取此内容。并读取前 8*8 个块。我得到以下值。

```
-16776690 , -16776690 , -16776432 , -16776176 , -16775922 , -16775927 , -16776190 , -16645120 , 
-16776944 , -16776688 , -16776432 , -16776176 , -16775922 , -16775925 , -16776188 , -16645376 , 
-16777198 , -16776940 , -16776940 , -16776684 , -16776430 , -16776434 , -16776697 , -16580096 , 
-16777196 , -16777196 , -16776939 , -16776683 , -16776428 , -16776432 , -16776695 , -16580350 , 
-16646124 , -16711660 , -16777195 , -16776937 , -16776683 , -16776686 , -16711413 , -16449532 , 
-16646126 , -16711662 , -16776940 , -16776940 , -16776940 , -16776944 , -16711413 , -16449532 , 
-16449523 , -16580594 , -16711664 , -16776944 , -16776944 , -16776947 , -16645881 , -16384000 , 
-16449529 , -16449527 , -16646133 , -16776693 , -16776695 , -16776442 , -16645632 , -16383744 , 
```

我希望这些值为 16。我为此编写了以下代码。我该怎么办？

```
 /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package testing;

    import java.awt.image.BufferedImage;
    import java.io.File;
    import javax.imageio.ImageIO;

    /**
     *
     * @author pratibha
     */
    public class ConstructImage{
        int[][] PixelArray;
        public ConstructImage(){
            try{

            BufferedImage bufferimage=ImageIO.read(new File("C:\\photo\\Modified\\image_1.jpg"));
            int height=bufferimage.getHeight();
            int width=bufferimage.getWidth();
            PixelArray=new int[width][height];
            for(int i=0;i<width;i++){
                for(int j=0;j<height;j++){
                    PixelArray[i][j]=bufferimage.getRGB(i, j);
                }
            }
            ///////create Image from this PixelArray

             for(int i=0;i<8;i++){
                for(int j=0;j<8;j++){
                    PixelArray[i][j]=16;
                }
            }
             for(int i=0;i<8;i++){
                for(int j=0;j<8;j++){
                  System.out.print(PixelArray[i][j]+" , ");
                }
                System.out.println("");
            }

            BufferedImage bufferImage2=new BufferedImage(width, height,BufferedImage.TYPE_INT_RGB);
              for(int x=0;x<width;x++){
                    for(int y=0;y<height;y++){
              bufferImage2.setRGB(x, y, PixelArray[x][y]);

                }
             }

             File outputfile = new File("C:\\photo\\Modified\\img.jpg");
             ImageIO.write(bufferImage2, "jpg", outputfile);
            ///////////////////////////////////////////////////////////////////
                  BufferedImage bufferimage1=ImageIO.read(new File("C:\\photo\\Modified\\img.jpg"));
            int height1=0;
            height1=bufferimage1.getHeight();
            int width1=0;
            width1=bufferimage1.getWidth();
            int[][] PixelArray1=new int[width1][height1];
            for(int i=0;i<width1;i++){
                for(int j=0;j<height1;j++){
                    PixelArray1[i][j]=bufferimage1.getRGB(i, j);
                }
            }
            ///////create Image from this PixelArray

             for(int i=0;i<8;i++){
                for(int j=0;j<8;j++){ 
                    System.out.print(PixelArray1[i][j]+" , ");
                }
                System.out.println();
            }
            System.out.println(Integer.toBinaryString(222));
            System.out.println(Integer.signum(93226268));;
            }
            catch(Exception ee){
                ee.printStackTrace();
            }
        }

        public static void main(String args[]){
            ConstructImage c=new ConstructImage();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:53:33.063

我不确定您是否想`Image`直接使用`int`... 我想您真正想要做的是将其设置为“灰度值 16”。您实际上正在做的是将像素设置为“红色 0，绿色 0，蓝色 16”。

首先，尝试创建一个`Color(16,16,16)`然后调用`getRGB()`它。

顺便说一句，JPG 是一种[有损压缩](http://en.wikipedia.org/wiki/Lossy_compression)，因此您不能指望在保存/加载时这些值完全匹配 - 您可能想改用 PNG。

顺便说一句，除非您尝试满足第三方库的 API 要求，否则我建议您继续`BufferedImage`直接访问该类，而不是尝试创建数组副本。未压缩的图像可以很快变得**非常****大**，并且您将通过不必要的加倍内存使用而耗尽内存。

# visual-studio-2010 - 在 mfc vs2010 运行时替换拆分器窗口中的视图

> ID：11933467
> 
> 赞同：0
> 
> 时间：2012-08-13T11:32:51.590
> 
> 标签：visual-studio-2010, view, mfc, pane, csplitterwnd

我想知道一种在拆分器窗口中更改特定窗格视图的方法。

它应该类似于资源管理器窗口。单击窗口右侧视图更新左侧的任何树枝的位置。

同样，我想更新我的观点。单击任何树节点时，应在覆盖前一个窗格的相同位置显示一个新窗格。

示例代码将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:37:59.503

您真的需要替换视图还是只更改视图显示的内容？

通过替换视图，我的意思是使用不同的窗口；例如：用派生的 CFormView 替换 CEdit 派生视图。

您能否更详细地解释您要完成的工作？

# javascript - facebook javascript api通过chrome发布照片需要刷新

> ID：11933469
> 
> 赞同：0
> 
> 时间：2012-08-13T11:32:58.140
> 
> 标签：javascript, facebook, google-chrome

我正在尝试在客户端墙上发布照片，它通过 Firefox 效果很好，但是当我尝试通过 Chrome（或资源管理器）做同样的事情时，我第一次使用该应用程序并安装它时，我没有根本没有得到回应......当我刷新页面并重试时，它工作正常并发布照片......

这是我正在使用的代码：

```
 var imgURL = obj.picture;
            FB.api('/me/photos', 'post', {
                message: obj.description,
                access_token: accessToken, 
                url: imgURL
            }, function (responsePhoto) {

                if (!responsePhoto || responsePhoto.error) {
                    if (!responsePhoto){
                            console.log(responsePhoto);
                            alert('An error has occured: please refresh and try again');
                    }
                    else  {
                        console.log(responsePhoto);
                        alert('An error has occured:' + responsePhoto.error + ' please refresh and try again');
                    }
                } else {
                    //alert('your photo has been uploaded');//('Post ID: ' + responsePhoto.id);
                }
            }); 
```

有任何想法吗？

谢谢

# php - 如何使用 PHP (Zend_PDF) 为在线生成的 pdf 文档添加时间戳

> ID：11933472
> 
> 赞同：-2
> 
> 时间：2012-08-13T11:33:05.010
> 
> 标签：php, pdf, timestamp, signature, zend-pdf

我正在使用 PHP 和 Zend_PDF 在线生成 PDF 文档。我怎样才能给这些文件加上时间戳并添加数字签名？也可以使用另一个库进行时间戳记。目前我刚刚找到商业产品！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:01:46.607

Zend Framework does not support the creation of digital certificates for PDF files. See the following link for more information, along with a link to a free third party solution:

[http://www.framework.zend.com/issues/browse/ZF-10950](http://www.framework.zend.com/issues/browse/ZF-10950)

# java-me - 如何减小 LCDUI 列表和表单上的文本字体

> ID：11933477
> 
> 赞同：0
> 
> 时间：2012-08-13T11:33:36.790
> 
> 标签：java-me, lcdui

我有一个 LCDUI 列表屏幕，其中包含来自 Rss 文件的标题和图像

```
 myList.append(Rss.getTitle(),Rss.getImage()); 
```

我有一个详细表格：我可以在上面显示发布日期和一个超链接表格 Rss 文件

```
 m_itemForm.append(new StringItem("Pub Date:",videoItem.getPubDate()));
         final String URL = videoItem.getLink();
        stringItem = new StringItem("Link: ", "Set", Item.HYPERLINK); 
        stringItem.setText(URL);
        m_itemForm.append(stringItem); 
```

现在我想减少屏幕（列表和表单）上的文本字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T19:10:49.337

不幸的是 LCDUI 列表和表单不允许应用程序更改它们的呈现方式。但是你可以使用[`CustomItem`](http://java.sun.com/javame/reference/apis/jsr118/javax/microedition/lcdui/CustomItem.html). 请参阅[这篇文章](http://developers.sun.com/mobility/midp/ttips/customitem/)。

# objective-c - 添加了 IBOutlet 和自定义 TableViewCell 不再起作用

> ID：11933480
> 
> 赞同：0
> 
> 时间：2012-08-13T11:33:42.030
> 
> 标签：objective-c, ios, xcode, uitableview, uikit

我刚刚在我的故事板中添加了一个`IBOutlet`，`UIImageView`现在我的自定义`TableViewCell`不再起作用了。

```
2012-08-13 13:30:28.052 Project[6189:fb03] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<TableViewController 0x808ab80> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key imageView.'

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"CustomCell";
static NSString *CellNib = @"CustomCell";

CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:CellNib owner:self options:nil];
    cell = (CustomCell *)[nib objectAtIndex:0];
}
...
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:19:34.880

这是我的应用程序外观。我使用动态原型表和自定义单元格。

![ss](../Images/6d6acd68933ea64a54f6993b01344e6d.png)

我的故事板如下所示。

![ss](../Images/50615ee58df1f37f21babba68413c506.png)

关键是您应该如下设置图像视图的**标签**。

![ss](../Images/ae7f1aafb8d823b51368580557109cfc.png)

不要忘记将**单元格标识符**设置为与代码中的相同。代码如下：

```
 UIImageView *imageView = (UIImageView *)[cell viewWithTag:5];
    imageView.image = [UIImage imageNamed:@"foo.jpg"]; 
```

# javascript - 检查浏览器是否支持 iFrame 上的加载方法

> ID：11933482
> 
> 赞同：0
> 
> 时间：2012-08-13T11:33:45.803
> 
> 标签：javascript, internet-explorer, browser, load

我正在尝试编写一个针对 iFrame 的带有文件上传的简单表单。我已经涵盖了很多，但是 Internet Explorer 不支持动态生成的 iFrame 上的加载方法，所以我需要为它做一个替代方法。我的问题是 - 使用 Javascript 识别浏览器类型的最佳和最准确（加上轻量级）的方法是什么？

我知道[Modernizr](http://modernizr.com/)可以检查特定的方法/属性，但不太确定它在这种特定情况下是否有帮助。它有`Modernizr.hasEvent()`，但我不能用它来检查动态创建的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:40:54.560

如果你想检查对特定事件的支持，你可以尝试这样的事情：

```
var isEventSupported = (function(){
    var TAGNAMES = {
      'select':'input','change':'input',
      'submit':'form','reset':'form',
      'error':'img','load':'img','abort':'img'
    }
    function isEventSupported(eventName) {
      var el = document.createElement(TAGNAMES[eventName] || 'div');
      eventName = 'on' + eventName;
      var isSupported = (eventName in el);
      if (!isSupported) {
        el.setAttribute(eventName, 'return;');
        isSupported = typeof el[eventName] == 'function';
      }
      el = null;
      return isSupported;
    }
    return isEventSupported;
  })(); 
```

这是上述内容的现场演示：

[http://kangax.github.com/iseventsupported/](http://kangax.github.com/iseventsupported/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:41:31.840

在我看来，最简单的检查方法是：

```
if ('onload' in iFrameVar)
{
    console.log('your code here');
} 
```

其中 iFrameVar 是对 iframe 的引用，当然：

```
function elemSupportsEvent(elem,e)
{
    var f = document.createElement(elem);
    if (e in f)
    {
        console.log(elem + ' supports the '+ e + ' event');
        return true;
    }
    console.log(elem + ' doesn\'t support the '+ e + ' event');
    return false;
}
elemSupportsEvent('iframe','onload');//logs "iframe supports the onload event" in chrome and IE8 
```

只是通过示例[快速小提琴](http://jsfiddle.net/cPyKA/)，您可以使用函数来检查各种元素的事件支持。

回应您的评论：如果您想检查动态内容 - 如在 ajax 回复中 - 您可以简单地使用该`readystatechange`事件：

```
xhr.onreadystatechange = function()
{
    if (this.readyState === 4 && this.status === 200)
    {
        var parent = document.getElementById('targetContainerId');//suppose you're injecting the html here:
        parent.innerHTML += this.responseText;//append HTML
        onloadCallback.apply(parent,[this]);//call handler, with parent element as context, pass xhr object as argument
    }
};
function onloadCallback(xhr)
{
    //this === parent, so this.id === 'targetContainerId'
    //xhr.responseText === appended HTML, xhr.status === 200 etc...
    alert('additional content was loaded in the '+ this.tagName.toLowerCase+'#'+this.id);
   //alerts "additional content was loaded in the div/iframe/td/whatever#targetContainerID"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:36:02.187

使用`navigator.userAgent`. 它包含浏览器用户代理

```
if (navigator.userAgent.search("MSIE 6") == -1){
    // We've got IE.
} 
```

# regex - 正则表达式匹配 2 位数字 0 到 9

> ID：11933484
> 
> 赞同：3
> 
> 时间：2012-08-13T11:33:52.320
> 
> 标签：regex

我是正则表达式的新手，我正在尝试匹配有 2 位数字都可以从 0-9 的情况

类似的东西

```
[0-9][0-9] 
```

例如 ：

> 11 10 01

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T11:44:55.180

我相信`^\d{2}(\s\d{2})+$`应该适合您的需求。

[在Regex101](http://regex101.com)测试这个正则表达式

PS：学习，自己尝试，来找我们，没有问题，下次努力。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T11:52:48.857

你需要的是单词边界，试试

```
\b\d{2}\b 
```

[在 Regexr 上](http://regexr.com?31qna)查看。

`\b`匹配一个单词边界（在很多语言中），这就是从单词字符到非单词字符的变化。意味着，如果在**前面和前面没有数字或字母**，正则表达式将匹配 2 位数字。

`\d`在大多数正则表达式风格中用作 [0-9] 的快捷方式，有些不支持此快捷方式，有些使用 Unicode 版本并匹配任何类型的数字`\d`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T11:37:00.090

包括@Kobi 的建议。

```
(?<![0-9])[0-9]{2}(?![0-9]) 
```

# cmake - 构建 LLVM 示例

> ID：11933485
> 
> 赞同：10
> 
> 时间：2012-08-13T11:33:55.117
> 
> 标签：cmake, llvm

我正在尝试从标准分发中构建一个示例，即 BrainF，但没有成功。

我制作了示例/BrainF 的副本并尝试从该目录运行 cmake。最初 CMakeLists.txt 看起来像这样：

```
set(LLVM_LINK_COMPONENTS jit bitwriter nativecodegen interpreter)

add_llvm_example(BrainF
  BrainF.cpp
  BrainFDriver.cpp
  ) 
```

cmake 抱怨 add_*。我通读了[http://llvm.org/docs/CMake.html#embedding](http://llvm.org/docs/CMake.html#embedding)并决定在 CMakeLists.txt 中添加一些前奏：

```
find_package(LLVM)

# Define add_llvm_* macro's.
include(AddLLVM)

add_definitions(${LLVM_DEFINITIONS})
include_directories(${LLVM_INCLUDE_DIRS})
link_directories(${LLVM_LIBRARY_DIRS}) 
```

然后cmake抱怨它无法执行`find_package(LLVM)`并建议寻找LLVMConfig.cmake或llvm-config.cmake。我发现最接近的东西放在 /usr/src/llvm/cmake/modules/LLVM-Config.cmake 下，所以我设置`CMAKE_PREFIX_PATH=/usr/src/llvm/cmake/modules/`了 LLVMConfig.cmake 到 LLVM-Config.cmake 的软链接。

然后cmake这样抱怨：“include could not find load file: AddLLVM”。如果我对包含 AddLLVM.cmake 的整个路径进行硬编码，则问题出在 AddLLVM.cmake 中存在的包含问题上，因此这似乎不是完成工作的正确方法。

我的环境是 Xubuntu 12.04 和 llvm+clang 3.1（从一些 ppa 获取 deb 包，从 Debian 反向移植）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:54:58.930

该线程帮助我获得了AddLLVM：[对于cmake“包含”命令，文件和模块有什么区别？](https://stackoverflow.com/q/3249459/465100)

此外，现在手动设置后我有问题：“在 llvm 库列表中找不到库 `jit'”。错误全文：

```
$ cmake .
CMake Error at /usr/src/llvm/cmake/modules/LLVM-Config.cmake:141 (message):
  Library `jit' not found in list of llvm libraries.
Call Stack (most recent call first):
  /usr/src/llvm/cmake/modules/LLVM-Config.cmake:54 (explicit_map_components_to_libraries)
  /usr/src/llvm/cmake/modules/LLVM-Config.cmake:47 (explicit_llvm_config)
  /usr/src/llvm/cmake/modules/AddLLVM.cmake:86 (llvm_config)
  /usr/src/llvm/cmake/modules/AddLLVM.cmake:112 (add_llvm_executable)
  CMakeLists.txt:17 (add_llvm_example) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-06T01:08:37.420

在 llvm 11.0.

我试过了，它有效。

可能必须使用 add_llvm_executable 命令与 LLVM_LINK_COMPONENTS 链接

```
cmake_minimum_required(VERSION 3.4.3)

find_package(LLVM REQUIRED CONFIG)
project(BrainF)

message(STATUS "Found LLVM ${LLVM_PACKAGE_VERSION}")
message(STATUS "Using LLVMConfig.cmake in: ${LLVM_DIR}")

include_directories(${LLVM_INCLUDE_DIRS})
add_definitions(${LLVM_DEFINITIONS})
list(APPEND CMAKE_MODULE_PATH "${LLVM_CMAKE_DIR}")
include(AddLLVM)

set(LLVM_LINK_COMPONENTS
  BitWriter
  Core
  ExecutionEngine
  MC
  MCJIT
  Support
  nativecodegen
  )

add_llvm_executable(BrainF
  BrainF.cpp
  BrainFDriver.cpp
  ) 
```

ps更新。2020.11.1。

[更多信息](https://github.com/llvm/llvm-project/blob/master/llvm/docs/CMake.rst#developing-llvm-passes-out-of-source)

```
cmake_minimum_required(VERSION 3.4.3)
project(BrainF)

find_package(LLVM 11 REQUIRED CONFIG)
add_definitions(${LLVM_DEFINITIONS})
include_directories(${LLVM_INCLUDE_DIRS})

message(STATUS "LLVM VERSION : ${LLVM_PACKAGE_VERSION}")
message(STATUS "Using LLVMConfig.cmake in: ${LLVM_DIR}")

add_executable(BrainF
  BrainF.cpp
  BrainFDriver.cpp
)

llvm_map_components_to_libnames(llvm_libs support core irreader)

target_link_libraries(BrainF llvm_libs) 
```

# objective-c - 如何为原点设置动画？

> ID：11933486
> 
> 赞同：1
> 
> 时间：2012-08-13T11:33:55.620
> 
> 标签：objective-c, ios, animation, core-animation

我想根据左上角（原点）的值对视图的位置进行动画处理。我都试过了

```
CGPoint myPosition = CGPointMake(0, 500);
CABasicAnimation *yAnimation = [CABasicAnimation animationWithKeyPath:@"frameOrigin"];
yAnimation.toValue = [NSValue valueWithCGPoint:myPosition]; 
```

和

```
CGPoint myPosition = CGPointMake(0, 500);
CABasicAnimation *yAnimation = [CABasicAnimation animationWithKeyPath:@"origin"];
yAnimation.toValue = [NSValue valueWithCGPoint:myPosition]; 
```

没有任何效果。如何正确设置此属性的动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:49:10.570

如果您只想为视图的位置设置动画，请查看`UIViewAnimation`并使用它的块。

```
[UIView animateWithDuration:.7
        animations:^{
           //what you would like to animate
           myView.frame = CGRectMake(myView.frame.origin.x + 100,myView.frame.origin.y + 100, myView.frame.size.width, myView.frame.size.height);
        }completion:^(BOOL finished){
          //do something when the animation finishes
        }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:40:40.793

a上没有路径`origin`或`frameOrigin`关键路径`CALayer`，如果要为位置设置动画，则需要为`bounds`属性设置动画

# c++ - 数据按哪一列排序，QTableWidget

> ID：11933487
> 
> 赞同：5
> 
> 时间：2012-08-13T11:33:56.477
> 
> 标签：c++, qt, qtableview

如何获得一些值来指定数据在哪一列排序（以及它是升序还是降序）`QTableWidget`？我在文档中找不到任何关于它的内容，只能以编程方式进行排序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T11:38:42.593

您可以通过表头访问它。基本上在 Qt 中，与整列相关的所有内容都是通过表格的水平标题访问的，而与整行相关的所有内容都是通过垂直标题访问的。这包括默认大小、拉伸或在您的情况下是排序属性。

`SortIndicatorOrder()`函数返回排序顺序为`Qt::SortOrder`enum wihch 可以是`Qt::AscendingOrder`aka`0`或`Qt::DescendingOrder`aka `1`。你可以这样使用它：

```
ui.yourTable->horizontalHeader()->sortIndicatorOrder(); 
```

`sortIndicatorSection()`函数返回按数据排序的列。列号以 0 开头。您可以这样称呼它：

```
ui.yourTable->horizontalHeader()->sortIndicatorSection(); 
```

# playframework - Playframework 2.0.3 - 每次编译后重新加载数据库驱动程序

> ID：11933488
> 
> 赞同：3
> 
> 时间：2012-08-13T11:34:00.403
> 
> 标签：playframework, playframework-2.0

我正在使用 Play 2.0.3，配置为使用 MySQL。一切正常，但问题很简单：每次更改一个视图（甚至是简单的 HTML 元素）后，重新加载应用程序并对其进行测试需要花费大量时间。我可以在输出中看到 mysql 连接已重建。这是输出：

```
--- (RELOAD) ---

[info] play - database [default] connected at jdbc:mysql://localhost/test?useUni
code=yes&characterEncoding=UTF-8&connectionCollation=utf8_general_ci
[info] play - Application started (Dev) 
```

请记住，这是一个非常简单的应用程序。刚开始建。测试每个简单的 HTML/视图更改大约需要 5-10 秒。

我在这里错过了什么吗？**我发现复杂时间是 Play 2.0 的一个问题**，但我怎样才能至少避免重新加载数据库连接？

谢谢，大卫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:09:55.403

我怀疑它是否可以以某种方式配置，有一些技巧可以帮助你，我认为最好将所有这些技巧混合起来：

1.  运行您的应用程序进行开发：`play ~run`- 它会在文件更改后立即在后台重新编译。它不会缩短重新编译时间，但至少不会那么烦人。
2.  试着一次写更多 :) 当你浏览每一个小改动并想“*啊，这个细节还没有……啊这个细节还没有……* ”重新编译所需的时间真的很可怕。相反，只需检查您要修复的所有详细信息并立即插入更改。如果你会花一两分钟来修复布局的细节，那么等待 5 秒就不会那么糟糕了。
3.  使用浏览器的检查工具来调试输出 HTML - 您可以查看错误所在的位置并测试小的代码修改，而无需将它们插入到视图中。
4.  如果您的布局非常复杂，包含大量 JS、CSS 等，请将 Play 渲染的输出保存为静态文件，并首先使其按您的意愿工作。完成后，您会将静态 HTML 中的更改移动到视图中。测试静态文件中的更改会快得多，因为它不需要每次都重新编译。
5.  使用 git（即使作为唯一的本地存储库）。通过 git 和支持它的 IDE 的组合，您将看到您在哪里进行了更改，以及您需要从静态测试文件移动到视图或资产的最终版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T21:03:23.210

这似乎是一个错误。我建议创建一个小的可重现测试用例并在错误跟踪器上报告： [https ://play.lighthouseapp.com/projects/82401-play-20/overview](https://play.lighthouseapp.com/projects/82401-play-20/overview)

# iphone - 如何使这个 CoreMotion 代码在视网膜 iPod touch 设备上工作？

> ID：11933491
> 
> 赞同：1
> 
> 时间：2012-08-13T11:34:17.190
> 
> 标签：iphone, ios, accelerometer, ipod-touch, core-motion

我开发了一个使用 CoreMotion 获取倾斜信息的小应用程序。

但它不适用于 iPod touch。我在第一台装有 iOS 5.1 的视网膜显示器 iPod touch 上进行了测试。gyroAvailable 属性返回 YES，所以我假设这个 iPod 确实有一个陀螺仪。

此代码在 iPhone 4 上运行良好：

```
CMMotionManager *mm = [[CMMotionManager alloc] init];
self.motionManager = mm;
[motionManager setDeviceMotionUpdateInterval:0.05];

CMDeviceMotionHandler motionHandler = ^(CMDeviceMotion *motion, NSError *error) {
    [self handleMotion:motion error:error];
};

[motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXArbitraryCorrectedZVertical toQueue:[NSOperationQueue currentQueue] withHandler:motionHandler]; 
```

`startDeviceMotionUpdatesUsingReferenceFrame`似乎是罪魁祸首，但我无法从文档中弄清楚这种方法不适用于没有陀螺仪的设备。

我所需要的只是用户在纵向模式下将设备向左或向右倾斜多少的精确输出。

我有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T17:02:54.977

如果您想使用 iPod，请使用“CMattitudeReferenceFrameXArbitraryZVertical”。因为 iPad 没有磁力计。

# microsoft-metro - 屏幕键盘隐藏内容

> ID：11933495
> 
> 赞同：1
> 
> 时间：2012-08-13T11:34:20.467
> 
> 标签：microsoft-metro, windows-runtime, winrt-xaml

我有一个自动完成文本框，输入时会在其下方的弹出窗口中显示结果。

但是当用户使用虚拟键盘时，一旦键盘显示，它就会滚动文本框的底部，这会隐藏结果在它们出现时显示。

我有办法解决这个问题吗？

我能想到的唯一方法是在每个按键上设置弹出窗口的垂直偏移量，将其定位在文本框上方而不是下方。但这不是我希望它工作的方式，我更希望结果是向下推键盘或向上滚动页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:35:07.293

我遇到了同样的问题，我发现这很有帮助： [http ://code.msdn.microsoft.com/windowsapps/Keyboard-Events-Sample-866ba41c](http://code.msdn.microsoft.com/windowsapps/Keyboard-Events-Sample-866ba41c)

# c++ - 如何替换 COM 对象？

> ID：11933497
> 
> 赞同：2
> 
> 时间：2012-08-13T11:34:31.563
> 
> 标签：c++, visual-studio-2010, navision, dynamics-nav

我需要开发一个可以替换旧的[COM](https://www.microsoft.com/com/default.mspx)对象[DLL 。](http://en.wikipedia.org/wiki/Dynamic_Link_Library)我需要这个，因为我不想开发使用旧 COM DLL 的应用程序。我将创建一个具有相同属性和方法的新 COM 对象。我看到的主要困难是[UUID](http://en.wikipedia.org/wiki/Universally_Unique_Identifier)发布。我不明白其中一些的重要性以及它们在哪里使用，哪些我必须复制，哪些可能会有所不同？我发现调用 COM 对象的程序（在我的例子中是 Navision）使用描述库和类型库的 UUID。如果有人可以分享此类任务的经验，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:57:43.257

guid*非常*重要，这是 COM 用来查找接口、类和类型库的工具。人类不是很擅长选择有保证的唯一名称，而不是名称。

它们必须完全匹配，否则客户端代码将无法正常工作。您还必须确保接口具有完全相同的方法、完全相同的签名和完全相同的顺序。虽然 guid 错误往往会产生合理的错误消息，但接口错误几乎总是会导致无法诊断的运行时行为，只有在幸运时才会出现访问冲突。

# android - 让 AlertBox 停留更长时间

> ID：11933498
> 
> 赞同：1
> 
> 时间：2012-08-13T11:34:34.587
> 
> 标签：android

朋友们，我在我的应用程序中使用了一个警报框。

```
public static void Alertbox(String title, String mymessage,Context context) {
        new AlertDialog.Builder(context)
        .setMessage(mymessage)

        .setCancelable(true)
        .setNeutralButton(android.R.string.ok,new DialogInterface.OnClickListener()

        {
            public void onClick(DialogInterface dialog,int whichButton) {

            }
        }).show();
    }

    public static void ProcessDialogue(String title,Context context)
    {

    } 
```

我已成功实现此代码，但问题是我以下列方式使用它

```
Response.Alertbox(" ", "Thank You",this);
        Intent intent=new Intent(this,Tabs.class);
        startActivity(intent); 
```

问题是警报框显示的时间很短。很多时候，Tabs 活动被调用并且警报框消息也无法读取。请帮助我，直到没有按下警报框上的确定，它才能导航到下一个活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:40:08.153

如果您想在单击按钮时导航离开，则将导航代码放入`onclick`事件中。您可能还想在按下按钮时关闭对话框。

```
public static void Alertbox(String title, String mymessage,Context context) {
    new AlertDialog.Builder(context)
    .setMessage(mymessage)

    .setCancelable(true)
    .setNeutralButton(android.R.string.ok,new DialogInterface.OnClickListener()

    {
        public void onClick(DialogInterface dialog,int whichButton) {
            Intent intent=new Intent(MyActvity.this,Tabs.class);
            startActivity(intent);
            dismissDialog();
        }
    }).show();
}

public static void ProcessDialogue(String title,Context context)
{

} 
```

并简单地调用对话

```
Response.Alertbox(" ", "Thank You",this); 
```

# wordpress - Wordpress WP Paging（插件）分页链接不起作用....？

> ID：11933505
> 
> 赞同：1
> 
> 时间：2012-08-13T11:35:03.733
> 
> 标签：wordpress, pagination

早上好...

我创建了一个名为 Testimonials 的自定义帖子类型。为了显示它们，我使用以下代码创建了一个自定义 page.php 模板：

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
?>    
<?php
query_posts(array(                      
'posts_per_page' => 5,
'post_type' => 'testimonials',
'orderby' => 'post_date',
'paged' => $paged
)
); ?>

<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

<div id="post-<?php the_ID(); ?>" class="quote">
<?php echo get_the_post_thumbnail($id, array($image_width,$image_height)); ?>
<?php the_content(); ?>
</div>
<?php endwhile; ?>
<p><?php wp_paging(); ?></p>
<?php wp_reset_query(); ?> 
```

这`<p><?php wp_paging(); ?></p>`就是我将插件直接实现到模板文件中的方式。我不明白为什么它不起作用。分页链接显示，但单击一个会显示未找到页面。

我在我的 category.php 模板中实现了这个插件，它在那里工作得很好。

是的，我重新访问了我的永久链接设置 :)

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:10:17.193

```
 <?php

   $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

 ?> 
```

确保您的通话中有上述行 - 当您引用 $paged 时，但不要在您的问题中显示它！

# javascript - 单击按钮时选择文本

> ID：11933506
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:35:10.970
> 
> 标签：javascript, jquery, select

到目前为止，我有这个：

```
<span class="description">Description 1</span>
<button class="select">Select!</button>

<span class="description">Description 2</span>
<button class="select">Select!</button>

<span class="description">Description 3</span>
<button class="select">Select!</button>

<span class="description">Description 4</span>
<button class="select">Select!</button> 
```

我想要按钮选择“描述”类元素中的文本，但仅适用于前一个。那可能吗？也就是如果用户点击第一个选择按钮，描述 1 将被选中。

注意：在选择中，我的意思是应该突出显示文本。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:36:44.400

用于`prev()`获取上一个元素：

```
 $("button").click(function(){
      var text = $(this).prev().text();
      alert(text);
 }); 
```

见演示：http: [//jsfiddle.net/maxdK/](http://jsfiddle.net/maxdK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:03:54.950

要突出显示文本，您可以更改文本样式或应用任何 CSS 属性，例如
$(this).prev().css("background-color","re​​d");

或者你可以添加任何 CSS

```
$(this).prev().addClass("css-class"); 
```

# gcc - 寻找一种在 OS X 上安装 daemontools-encore 的干净方法

> ID：11933507
> 
> 赞同：0
> 
> 时间：2012-08-13T11:35:13.173
> 
> 标签：gcc, osx-snow-leopard

**语境：**

我想使用 OS 10.6.8 系统来测试[daemontools encore 的一些补丁](https://github.com/wolfen/daemontools-encore "daemontools-encore 的一些补丁")。

对于 gcc 工具链，我需要 XCode 或[这个 gcc 安装程序](https://github.com/kennethreitz/osx-gcc-installer/ "OS X 的 gcc 安装程序")。我选择了后者，它似乎在我的系统上运行良好。[daemontools-encore 在 githib 上可用](https://github.com/bruceg/daemontools-encore "github 上的 daemontools-encore")，我使用从[github.com](http://www.github.com "github.com")下载的 git 客户端从中获取它。

**问题：**

从分发目录运行 ./makemake 会给我一个空的 Makefile，以及以下消息（似乎不管我对 *conf 文件做了什么调整）：

```
Calculating targets...
Building Makefile...
./makemake: line 114: makemake.TARGETS: Is a directory
sort: read failed: makemake.TARGETS: Is a directory
rm: makemake.TARGETS: is a directory
done.
rm: makemake.TARGETS: is a directory 
```

我曾预计会生成一个较大的（约 300 行）Makefile（根据 daemontools 0.76 的原始发行版），使后续的“make install”等操作成为可能。

**编辑：**

我正在使用[这个版本的 daemontools-encore](https://github.com/bruceg/daemontools-encore/commit/c6373f2982393e666cc02c9b70efb0f279b5de06 "daemontools encore 的提交标识符")。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T01:51:13.623

根据我在原始问题的评论中添加的 Bruce Guenter 的建议，将 makemake 中的“T=makemake.TARGETS”行替换为“T=makemake.BRUCE”就可以了。

在 OS X 中不区分大小写，我在 StackExchange 上找到了这个块：

> HFS+（Mac 文件系统）通常配置为不区分大小写但保留大小写。这意味着文件系统会认为 foo 和 FoO 是相同的，但是当你创建一个新文件时，它会记住哪些字母大写，哪些没有。

这让我觉得这是一种非常奇怪的行为，但我没有注意到任何其他相关问题，所以我想它并没有像我预期的那样破坏*nixy 的东西。它*确实*破坏了 Bruce 的原始 makemake 脚本 - 幸运的是，修复是微不足道的。

# android - 测试 APK 扩展库的问题

> ID：11933508
> 
> 赞同：10
> 
> 时间：2012-08-13T11:35:17.360
> 
> 标签：android, google-play, apk, expansion

我已经将谷歌的 APK 扩展文件下载库集成到我的项目中，它或多或少都可以正常工作（除了一些小问题，其他人已经在 SO 上报告了这些问题）。

但是，我很难测试它。当我第一次测试它时，我将我签名的 APK + 主扩展文件版本 1 上传到了 Google Play，它运行良好。

但是，当我升级我的应用程序以及主扩展文件版本 2 时，应用程序无法再下载文件 - 库立即返回 NO_DOWNLOAD_REQUIRED，但文件不存在！我开始调试 LVL 检查通过，但可下载文件表为空！当我试图调试细节时......它突然又开始工作了！

我认为这是一种临时故障并继续我的工作，只是在再次更新我的 APK 和扩展文件后再次遇到相同的问题。应用程序通过了 LVL 检查，但库再次假定没有要下载的文件。

这是谷歌图书馆的一个已知问题吗？或者我可能需要等待一段时间，直到文件在 Google 的云上可用？

**编辑：**它刚刚开始工作正常。文件似乎需要一些时间才能以某种方式在 Google 方面传播。该库的一件坏事是，一旦它验证了许可证，它就再也不会检查下载列表，所以我不得不重新安装该应用程序。奇怪......为什么它这么复杂？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-12-30T17:06:32.783

有点线程死灵，但由于我在下载 OBB 时遇到了很多麻烦，所以我想把所有问题都放在一个地方。谷歌如何——或者说为什么——设法使从 t'internet 下载文件变得如此复杂，这超出了我的理解。

**将库添加到 Android Studio**

错误信息部（[https://developer.android.com/google/play/expansion-files.html](https://developer.android.com/google/play/expansion-files.html)）自豪地带给您的官方说明是完全错误的。

在导入库之前，转到*sdk* \extras\google\market_apk_expansion\downloader_library 并编辑 project.properties 以完全删除“android.library.0”行。您可能还需要更新同一文件中的 android 目标版本行以匹配您现有项目的目标版本。

按照上面链接页面上的安装说明，“准备使用下载器库”第 2 步应该是“文件 > 新建 > 导入模块”，而不是“文件 > 新建 > 新模块”。

导入两个模块后，转到“文件>项目结构”并添加依赖项：

*   您的应用应该在许可库和下载器库上都具有“模块依赖关系”
*   下载器库应该在许可库上有一个“模块依赖”

“您必须将 BASE64_PUBLIC_KEY 值更新为属于您的发布者帐户的公钥”的步骤。也是错误的。*您需要此特定应用程序*的公钥，而不是您的*帐户*，它在您选择应用程序后的“服务和 API”下的在线开发者控制台中。

**许可证验证库和下载器库都依赖于现已删除的包“org.apache.http”**

将“decodeExtras”方法的两个实例（一个在 APKExpansionPolicy.java 中，一个在 ServerManagedPolicy.java 中）替换为：

```
private Map<String, String> decodeExtras(String extras) {
    Map<String, String> results = new HashMap<String, String>();

    UrlQuerySanitizer sanitizer = new UrlQuerySanitizer();
    sanitizer.setAllowUnregisteredParamaters(true);
    sanitizer.setUnregisteredParameterValueSanitizer(new UrlQuerySanitizer.IllegalCharacterValueSanitizer(
            UrlQuerySanitizer.IllegalCharacterValueSanitizer.URL_LEGAL));
    sanitizer.parseQuery(extras);

    for (UrlQuerySanitizer.ParameterValuePair item : sanitizer.getParameterList()) {
        String name = item.mParameter;
        int i = 0;
        while (results.containsKey(name)) {
            name = item.mParameter + ++i;
        }
        results.put(name, item.mValue);
    }

    return results;
} 
```

**运行时崩溃，说“服务意图必须是明确的”**

[请参阅https://stackoverflow.com/questions/24480069](https://stackoverflow.com/a/27027371/3310116)上的答案。

**W/LicenseValidator：联系许可服务器时出错**

许可证验证库在模拟器上不起作用，这是它抛出的错误。如果您使用的是真实设备，则可能只是真正的超时。

**调试版本未通过签名检查（签名验证失败），因此被拒绝访问。**

调用许可证验证服务的二进制文件必须是正确签名的发布版本。如果您运行的调试副本并非如此，那么许可证检查将失败。

*   转到您的在线开发者控制台、设置、帐户详细信息
*   将“许可测试响应”更改为“许可”（或您正在测试的任何内容）
*   在“具有测试访问权限的 Gmail 帐户”下输入您的电子邮件地址。

**下载器返回“STATE_COMPLETED”，但下载未完成。**

这是先前更改的副作用。您已获得许可，但仍未提供 APK 扩展文件，因为您并未*真正*获得许可。此步骤允许您在分发后实际测试下载，而不是手动将文件放置到您的测试设备上。

*   为应用程序创建促销代码。
*   在您的设备上为全新的 GMail 帐户创建一个新用户。
*   以新用户身份登录您的设备，兑换促销代码。您现在是真正的应用程序所有者。
*   在“具有测试访问权限的 Gmail 帐户”下添加新的 gmail 帐户，如上一节所述。

您不能使用开发者的帐户执行此操作，因为购买或兑换将失败，这意味着您永远无法拥有自己产品的副本，这意味着 OBB 下载将永远无法正常工作。

现在您有了第二个帐户，该帐户具有应用程序的正版 Play 商店副本，*并且*已注册为具有“假”许可状态的测试帐户，您可以运行代码的调试副本，获取 LICENSED 状态，*并*拥有下载工作如您所愿。

**W / LVLDL：中止下载*whavever* .obb的请求：写入目标文件时：java.io.FileNotFoundException：**

从 Android v23 开始，有必要明确请求写入“外部存储”的权限，无论它是否是 SD 卡，并且除了在清单中列出权限之外。请参阅[https://developer.android.com/guide/topics/permissions/requesting.html](https://developer.android.com/guide/topics/permissions/requesting.html)。

“找不到文件”是指下载器库要放入OBB文件的外部存储上的*目录*，它一直无法创建。如果无法创建*文件，则会引发异常，但如果无法创建**目录*，则会静默失败。请参阅`processResponseHeaders()`DownloadThread.java 。

**W/LVLDL：中止下载主请求。*不管*.obb：http 错误 410**

您的应用的版本号必须与 Google 知道的当前 APK 中的版本号匹配，否则您的下载请求将被拒绝并出现错误 410。

**如果发现许可证一次有效，库将不会重新检查许可证。**

如果您正在测试，您可能需要重做几次。许可证验证库在发现它被许可后缓存它的状态。*您可以在不*完全卸载您的应用程序的情况下清除它：

```
DownloadsDB db = DownloadsDB.getDB(my_app_context);
db.updateMetadata(0, 0); 
```

它还将下载的 OBB 保留在适当的位置，可以使用以下命令找到并清除它：

```
final String dlName = Helpers.getExpansionAPKFileName(my_app_context, true, expansionVersion);
final String dlFullPath = Helpers.generateSaveFileName(my_app_context, dlName);
File dlFile = new File(dlFullPath);
if (dlFile.exists())
{
    dlFile.delete();
} 
```

现在，如果你不介意的话，我要去一次精神上的静修会一个月左右。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T17:56:19.153

除了作者描述的传播时间之外，APK + 扩展工作流程还有其他不直观且未记录的问题：

1.  增加 APK versionCode 但继续使用相同的（旧）扩展文件。似乎如果您不将新的 APK 上传到开发者控制台，则无法从更新的应用程序（直接使用 adb 安装）下载。错误消息也没有帮助：“下载失败，因为找不到资源”。在我看来，谷歌似乎在说“好的，我知道这个扩展文件版本，但我不知道这个应用程序版本”。我在当前文档中没有找到任何关于此要求的参考。

2.  上传到开发者控制台的新 APK 似乎从旧 APK 中“捕获”了扩展文件关联。示例：如果您删除新的 APK（但保留旧的，与扩展文件具有相同的版本），扩展文件似乎也消失了。也许他们认为工作流程是“我们必须将扩展与新 APK 关联起来，这样开发者就可以毫无问题地随意擦除旧 APK”。这仍然是另一个似乎没有在任何地方描述的问题。

这些是初步说明。我提交了一份支持请求，可能会确认这些发现，所以当（如果？）他们回复时，我会在此处发布更新......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:05:23.717

获取扩展文件有两种标准方法。（您可以将其视为假设）。

1.  假设您的应用程序开始时没有扩展文件。
2.  检查文件是否存在`obvious location`。

这样，您的应用程序将像往常一样运行。这种方法最好的部分是您可以选择提出下载文件的请求。

这些是来自开发者网站的注释。

`Note: The URL that Google Play provides for your expansion files is unique for every download and each one expires shortly after it is given to your application.`

`Note: Whether your application is free or not, Google Play returns the expansion file URLs only if the user acquired your application from Google Play.`

[这里是如何使用](http://developer.android.com/guide/google/play/expansion-files.html)
[这里是如何提出下载请求](http://developer.android.com/guide/google/play/expansion-files.html#AboutLibraries)

希望这将帮助您获得结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T14:58:46.007

如果您使用示例应用程序中的完整代码，您是否更改了以下代码中的版本代码：-

```
private static final XAPKFile[] xAPKS = {
        new XAPKFile(
                true, // true signifies a main file
                <Version code here>, // the version of the APK that the file was uploaded
                   // against
                49597391L // the length of the file in bytes
        ),

}; 
```

# c# - 控制台应用程序退出方法不起作用

> ID：11933509
> 
> 赞同：0
> 
> 时间：2012-08-13T11:35:17.220
> 
> 标签：c#, .net, methods, exit

退出方法在按 q 返回时不起作用，异常句柄错误。它是一个控制台应用程序，我应该同时使用 application.exit() 和 envoirnment.exit() 。两者都不起作用。难道我做错了什么 。帮助将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace calculator_extended
{
    class Program
    {
        static void Main(string[] args)
        {
            int d = 0;

            while (true)
            {
                Console.WriteLine("Press A for addition");
                Console.WriteLine("Press S for subtraction");
                Console.WriteLine("Press M for Multiplication");
                Console.WriteLine("Press D for Divide");
                Console.WriteLine("Press q for Exit");

                char c = Convert.ToChar(Console.ReadLine());

                int a = Convert.ToInt32(Console.ReadLine());
                int b = Convert.ToInt32(Console.ReadLine());

                switch (c)
                {
                    case 'A':
                    case 'a':
                        {
                            d = add(a, b);
                            Console.WriteLine(d);
                            break;

                        }

                    case 'S':
                    case 's':
                        {
                            d = sub(a, b);
                            Console.WriteLine(d);
                            break;
                        }

                    case 'M':
                    case 'm':
                        {
                            d = mul(a, b);
                            Console.WriteLine(d);
                            break;
                        }

                    case 'D':
                    case 'd':
                        {
                            d = div(a, b);
                            Console.WriteLine(d);
                            break;
                        }

                    case 'q':
                        {

                            Environment.Exit(0);
                            break;

                        }
                    default:
                        {

                            Console.WriteLine("Please Enter the correct Character");
                            break;
                        }

                }
            }
        }
            private static int add(int a, int b)
    {

                   return a + b;
    }
               private static int sub(int a, int b)
    {

                   return a - b;
    }
               private static int mul(int a, int b)
    {
                   return a * b;
    }
               private static int div(int a, int b)
    {

                   return a / b;
    }

        }
    } 
```

好的，谢谢大家的帮助，你能检查一下，让我知道代码是否完美，我没有遗漏什么。谢谢

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace calculator_extended
{
    class Program
    {
        static void Main(string[] args)
        {
            int d = 0;

            while (true)
            {
                Console.WriteLine("Press A for addition");
                Console.WriteLine("Press S for subtraction");
                Console.WriteLine("Press M for Multiplication");
                Console.WriteLine("Press D for Divide");
                Console.WriteLine("Press q for Exit");

                char c = Convert.ToChar(Console.ReadLine());
                if (c == 'q')
                {
                    Environment.Exit(0);
                }
                int a = Convert.ToInt32(Console.ReadLine());
                int b = Convert.ToInt32(Console.ReadLine());

                switch (c)
                {
                    case 'A':
                    case 'a':
                        {
                            d = add(a, b);
                            Console.WriteLine(d);
                            break;

                        }

                    case 'S':
                    case 's':
                        {
                            d = sub(a, b);
                            Console.WriteLine(d);
                            break;
                        }

                    case 'M':
                    case 'm':
                        {
                            d = mul(a, b);
                            Console.WriteLine(d);
                            break;
                        }

                    case 'D':
                    case 'd':
                        {
                            d = div(a, b);
                            Console.WriteLine(d);
                            break;
                        }

                    default:
                        {

                            Console.WriteLine("Please Enter the correct Character");
                            break;
                        }

                }
            }
        }
            private static int add(int a, int b)
    {

                   return a + b;
    }
               private static int sub(int a, int b)
    {

                   return a - b;
    }
               private static int mul(int a, int b)
    {
                   return a * b;
    }
               private static int div(int a, int b)
    {

                   return a / b;
    }

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:40:05.413

也许是因为您的应用程序在按下“q”后等待 2 个数字？

尝试更改您的代码，删除大小写“q”并替换：

```
char c = Convert.ToChar(Console.ReadLine()); 
```

具有以下内容：

```
char c = Convert.ToChar(Console.ReadLine());
if(c.ToLower() == 'q')
{
    Environment.Exit(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:41:21.153

```
char c = Convert.ToChar(Console.ReadLine());
// you will need to Exit here if char is 'q'
// else it is expecting to read more entries below before it reaches your "case"
int a = Convert.ToInt32(Console.ReadLine());
int b = Convert.ToInt32(Console.ReadLine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:39:35.087

试试`Environment.Exit()`这个应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:41:46.010

这段代码

```
char c = Convert.ToChar(Console.ReadLine()); 
int a = Convert.ToInt32(Console.ReadLine()); 
int b = Convert.ToInt32(Console.ReadLine()); 
```

从控制台读取 3 行。

你可能想要

```
char c = Convert.ToChar(Console.ReadLine()); 
if (c=='Q' or c=='q') return;
int a = Convert.ToInt32(Console.ReadLine()); 
int b = Convert.ToInt32(Console.ReadLine()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-13T11:41:40.217

只需像这样更改您的代码

```
bool exitLoop = false;
while(exitLoop) {
    ...
    case 'q':
        {
             exitLoop = true;
             break;
        }
    ...
} 
```

# episerver - 安装 EpiServer 6 的问题

> ID：11933512
> 
> 赞同：1
> 
> 时间：2012-08-13T11:35:43.010
> 
> 标签：episerver, episerver-6

安装 Epi Server 6.0.530.0 时，我选择了“自定义”，但过了一会儿我收到错误消息（“找不到存储过程 'sp_dboption'”）。这是我的第一次安装，而且我从未使用过 Epi（尽管我从 10 多年以来一直在编写 .NET 代码），所以自然而然地，我感到有点不安全。（我的意思是我不知道可能是什么问题，也不知道如何解决它。）

我的 Win 7 Pro 上有 SQL Server 2008 和 VC# 2010（都是 Express）。

建议？

*我在安装日志中也有更长、更完整的错误消息，但我不在这里发布它，因为我不想被私刑。真的好长。。。所以上传到[这里了](http://www.viltersten.com/files/text_01.txt)。快乐阅读！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:39:15.507

dbo.sp_dboption 在 SQL2012 中已删除，您确定安装程序使用的是 SQL2008 而不是 SQL2012 的实例吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:46:27.820

执行安装的帐户在数据库中是否具有正确的权限？我经常遇到问题，因为安装对话框总是让我感到困惑。

# c# - 从抽象引用创建接口 + 类包装器

> ID：11933513
> 
> 赞同：0
> 
> 时间：2012-08-13T11:35:45.333
> 
> 标签：c#, .net

我有以下具有以下字段的对象：

```
class ObjectA
{
    float progress;
    bool isDone;
}

class ObjectB
{
    bool canceled;
} 
```

我想创建`ObjectC`将绑定到，并拥有`ObjectA`和`ObjectB`字段`progress`，`isDone`和`canceled`。

我怎么能做这样的事情？

这是否可以通过`dynamic`类型或某些 Interface + ClassWrapper 组合实现？

`ObjectA`并且`ObjectB`类型、类、签名等不能更改。它们是按原样给出的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:45:10.200

c# 中没有类的多基继承。做这种事情的最好方法是为每个行为声明接口：

```
interface IA
{
    float Progress {get;}
    bool IsDone {get;}
}

interface IB
{
    bool IsCanceled{get;}
} 
```

并且可能是前两者的第三个：

```
interface IC : IA , IB
{
} 
```

并在一个类中实现两者。

```
class C : IC
{
    public float Progress { get; set; }
    public bool IsDone { get; set; }
    public bool IsCanceled { get; set; }
} 
```

然后你必须记住针对接口而不是类进行编程：

```
class SomeClass
{
  //If only IA features are required
  void DoSTH(IA c){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:45:14.087

你可以通过组合来做到这一点：

```
public class ObjectC
{
    public ObjectA ProgressInfo { get; set; }

    public ObjectB CanceledInfo { get; set; }
} 
```

或通过接口：

```
public interface IProgressable
{
    float Progress { get; }

    bool IsDone { get; }
}

public interface ICancelable
{
    bool Canceled { get; }
} 
```

那么你可以让你的新类实现这两个接口：

```
public class ObjectC : IProgressable, ICancelable
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:47:38.223

您正在寻找`multiple inheritance`C# 不支持的 .

一种解决方案是使用接口，但它需要您多次实现代码：

```
public interface IFoo1
{
    float Progress { get; set; }
    bool IsDone { get; set; }
}

public interface IFoo2
{
    bool Canceled { get; set; }
}

public abstract class ObjectA : IFoo1
{
    public float Progress { get; set; }
    public bool IsDone { get; set; }
}

public abstract class ObjectB : IFoo2
{
    public bool Canceled { get; set; }
}

public class ObjectC : IFoo1, IFoo2
{
    public float Progress { get; set; }
    public bool IsDone { get; set; }
    public bool Canceled { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:40:47.383

您想要的内容无法通过正常方式实现，因为您的字段是私有的，因此无法访问`ObjectA`and之外的任何代码`ObjectB`。

唯一的方法——我根本不推荐，因为它破坏了封装——是使用反射来访问这些成员。

# ios - 从 NSMutable Dictionary 获取对象并将其设置为新键。

> ID：11933515
> 
> 赞同：0
> 
> 时间：2012-08-13T11:35:54.023
> 
> 标签：ios, xcode, nsmutabledictionary

我有一个叫做缓存图像的方法。这使用 NSNotification 中心发布图像已缓存的信息。我有数据 NSMutableDictionary *userInfo。我正在尝试添加一个观察者来检索图像并使用 _URL 作为键进行保存。问题是 URL 和图像都作为具有自己键的对象添加到字典中。是否可以检索相应键的图像？

```
 - (void)cacheImage:(UIImage *)image
   {
    if (!_cancelled)
    {
    if (image && _URL)
    {
        BOOL storeInCache = YES;
        if ([_URL isFileURL])
        {
            if ([[[_URL absoluteURL] path] hasPrefix:[[NSBundle mainBundle] resourcePath]])
            {
                //do not store in cache
                storeInCache = NO;
            }
        }
        if (storeInCache)
        {
            [_cache setObject:image forKey:_URL];
        }
    }
    NSMutableDictionary *userInfo = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                         image, AsyncImageImageKey,
                                         _URL, AsyncImageURLKey,
                                         nil];
    NSLog(@"%@",_URL);

        if (_cache)
        {
            [userInfo setObject:_cache forKey:AsyncImageCacheKey];
        }

        _loading = NO;
        [[NSNotificationCenter defaultCenter] postNotificationName:AsyncImageLoadDidFinish
                                                            object:_target
                                                          userInfo:[[userInfo copy] autorelease]];
    }
    else
    {
        _loading = NO;
        _cancelled = NO;
    }

 } 
```

在我的其他类 viewcontroller.m 文件中

```
 -(void)ViewDidLoad{

     [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(imageLoaded:)
                                             name:AsyncImageLoadDidFinish
                                           object:nil];
    }

     - (void)imageLoaded:(NSNotification *)notification
  {

    NSMutableDictionary *imageCache = notification.object;// help needed here
   } 
```

我试图添加一个观察者，但我不知道如何使用对象“_URL”作为图像的键。使用观察者接收对象后，我必须找到该 URL 的图像缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:42:02.940

你现在有这个代码：

```
NSMutableDictionary *userInfo = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                     image, AsyncImageImageKey,
                                     _URL, AsyncImageURLKey,
                                     nil]; 
```

因此，当您要将其添加到 imageCache 时：

```
NSURL *_url = [userInfo objectForKey:AsyncImageURLKey];
UIImage *image = [userInfo objectForKey:AsyncImageImageKey];

[imageCache setObject:image forKey:_url]; 
```

# facebook - 我可以获取个人资料公开的 Facebook 朋友吗？

> ID：11933517
> 
> 赞同：0
> 
> 时间：2012-08-13T11:35:59.553
> 
> 标签：facebook, facebook-graph-api

对于他们的个人资料是公开的（没有安全性）的用户，我可以在不与他们成为朋友的情况下获得他们的朋友列表吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:56:18.340

不，你不能随便找任何人做朋友。

尝试使用随机用户 ID 执行此操作会让您出现异常，

> *"(#604) 无法查找 $userid 的所有好友。只能查找登录用户或登录用户的好友，即您应用的用户。*

# java - Java达到>50%的压缩率

> ID：11933520
> 
> 赞同：0
> 
> 时间：2012-08-13T11:36:30.840
> 
> 标签：java, compression, deflate

我正在尝试压缩 pdf 文件（有时是图像）。我需要一个java中的压缩器来帮助我压缩我的文件。我需要大小小于原始文档大小的一半。我尝试了java api中给出的deflator。但这并不是很成功。请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T11:39:05.743

您需要单独压缩图像而不是它们已经压缩的图像（这会降低质量）尝试使用一般的无损压缩程序压缩图像不会很成功，因为数据已经被压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:40:23.077

我相信您已经探索过开源解决方案，但`LZMA`它是在更大程度上压缩文件的最佳解决方案之一。尝试以下链接中的`Java library`for 。[http://www.7-zip.org/sdk.html](http://www.7-zip.org/sdk.html)`7zip`

# c++ - 如何正确构建 OOP 和多文件项目？

> ID：11933522
> 
> 赞同：8
> 
> 时间：2012-08-13T11:36:37.803
> 
> 标签：c++, oop, interface, header, abstraction

作为一名初级程序员，刚刚学习 OOP 的基础知识，我在练习程序的基本包含结构方面遇到了很多问题。我一直在使用各种书面和在线资源自学编程。但是，这是我的问题（嗯，其中之一......）：

一方面，*我理解抽象、封装和类之间的低耦合度的重要性*，但另一方面，*我一直在努力构建我的程序并以一种允许不同的方式设计我的类不同文件中的类相互了解*。

当然，这是我的一个主要问题，它导致了草率、骇人听闻的代码，只有在我把所有基本的 OOP 主体扔出窗口并开始用全局变量填充我的代码、所有东西的前向声明之后，它才能按照我想要的方式工作无处不在，并公开班级成员。

*简而言之：*我的编程一团糟……C++ 是我的第一种编程语言，即使我尽最大努力以面向对象的方式设计/编写，我最终还是得到了一堆难看的文件，#包括几乎所有内容每个文件，以及很少工作的程序和 OOP 意大利面条代码的奇怪组合！

我自称是编程新手，我承认学习如何构建程序需要时间，但我几乎无计可施！我知道我的问题源于我对 OOP有**一点了解。**我知道我想编写处理单个任务的独立类。但与此同时，我不明白如何正确地提醒每个类程序其他部分的存在。这有点像知道你应该吃什么样的食物但不知道如何使用叉子......

简而言之，这就是我的问题。并进一步跟进我的一些更具体的问题：

*   在 C++ 多文件项目中，是否正常/需要将 main() 函数放在自己的类中？还是将 main() 留在全局范围内是标准的事情？

*   在以前，我用 C++ 编写的过程程序中，在 main.cpp 文件的顶部有一个全局范围内的常量变量或 #defines 并不少见。例如，屏幕的尺寸或其他有用的信息可能会在程序开始时定义。OOP 中会发生什么？这种做法要完全避免吗？或者我是否制作一个 MAIN.H 文件并将其#include 到项目中的每个其他标题中？我不知道该怎么办...

*   在编写我的第一个中型 OOP 实践程序时，当我开始尝试编写 StateMachine 类时，我的工作戛然而止。我打算让 StateMachine 类包含程序将使用的所有可能的屏幕状态。但是，出现了一个问题，即我的 StateMachine 类似乎不知道我的其他一些 State 类，即使它们都是#included。我以前见过人们做类的前向声明，有必要吗？我应该在整个地方发送垃圾邮件的类声明还是代码味道？

*   最后，#include 和前向声明命令的顺序是否重要？

我知道这可能是一个超级基本的问题，但在我从单文件过程式 c++ 初学者程序过渡到多文件 OOP 编程的过程中，这让我非常困难。是否有一些通用的经验法则来构建您的程序，以便一切正常？我一直在使用包含守卫，所以有什么理由不能在每个源文件中只 #include 每个头文件？我应该在每个类的每个头文件中都有一个 #included 的 common.h 文件吗？

我非常感谢社区可以给我的任何帮助/建议。我知道在我开始发展我的 OOP 技能之前，这是一个简单但重要的障碍。我一直在尝试深入思考将类彼此分开的重要性，以至于我不确定如何真正设置我的类/文件以使它们真正相互交互！非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:01:13.157

*   C++ 不仅仅是 OOP，它是*多范式*。不要试图通过 OO 过滤器按下所有内容，这对 C++ 不利。在一些地方，C++ 可以更优雅地做事，因为您*不限*于“纯”OO。例如，

*   main()*永远不会*在一个类中，并且总是在全局范围内。

*   最重要的规则是“一致性”和“可维护性”。想想你以后会如何看待这个程序，一旦它“完成”并且你想修复几个错误。您将在哪里找到常量并定义最简单的方法？

*   如果 s 的顺序`#include`很重要，则您的头文件已损坏。每个标头对于其中声明的内容应该（至少）自给自足。

*   每个标头一个类声明，每个实现单元一个类定义。文件和类具有相同的名称。真的，这是我认为不可协商的唯一规则。必须`grep`获取有关某个类的信息比获取`find`它要麻烦几个数量级。

其余的，真的，可以在每一本关于 C++ 的好书中找到，你真的应该用一本书而不是通过教程和问答页面来穿梭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T11:53:42.773

您不能将 OOP 视为带有类的普通函数式编程。这是一种错误的方法，它会误导你。

设计应用程序的架构是*非常*重要的，有很多关于它的书籍。您设计应用程序的结构越好，您就越容易编写代码，并且您将遇到的错误就越少。学习一些建模语言的基础知识是一个很好的建议，可以让你更容易地绘制和理解东西。UML 是一个很好的选择。

有两种设计大东西的方法。你可以下降，这意味着你从高层次的抽象开始，然后下降，缩小你的问题。或者你可以上升，从实现一些容易做的小事情开始，然后上升，将你的小模块连接到一个应用程序中。

你可以很容易地在网上找到很多关于它的信息。简而言之。现在，针对您的具体问题。

1.  将 main 留在全局范围内。就个人而言，我什至将它放在一个单独的`main.cpp`文件中以保持清洁，但你把它放在哪里并不重要。

2.  尽量避免全局变量。如果您需要常量，可以定义它们。是的，您在单个头文件中使用所有定义的方法效果很好。但是，您可能希望按含义将它们分开，而不是将具有 10000 个定义的文件包含到只需要其中一个的 .cpp 中。

3.  如果您需要在声明之前使用一个类，则必须前向声明它，否则编译器将不知道它的存在。

4.  包含的顺序确实很重要，因为每个`#include`基本上都会复制相应文件的文本。因此，如果`#include`您`class.h`在您的 中`class.cpp`，则标头的文本将被预处理器复制粘贴到源文件中。前向声明的顺序并不重要，只要你在第一次使用前先声明东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:51:35.303

好的...所以主要问题似乎是保持文件的OO组织。首先，如果您还没有阅读[Google C++ Style Guide](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Header_Files)，我强烈建议您这样做。我还发现[这个](https://stackoverflow.com/a/346098/623546)先前的答案相当清晰和简单

我希望这有帮助

# unix - 如何在整个 HP Unix 服务器中查找特定日期修改的文件列表

> ID：11933526
> 
> 赞同：0
> 
> 时间：2012-08-13T11:36:47.533
> 
> 标签：unix

我需要在 HP Unix 服务器中特定日期修改的文件列表。

我需要不是来自单个目录的所有文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:03:55.910

```
dateToFind=2011-05-18
find . -printf "%TY-%Tm-%Td %p\n" | egrep "^$dateToFind " | sed "s/^$dateToFind //g" 
```

使用带有 -mtime 选项的 find 可能会更快，但有一些困难。首先，我没有看到绝对日期的选项，因此您必须计算开始和结束时间的偏移量。其次，您的时间偏移量将很快失效，因此您可能需要 -daystart 选项。即使那样，如果您尝试在午夜附近运行它，也可能会出现问题。

此外，将不会列出在该日期修改并随后修改的文件。我不知道如何确定这些随后修改的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T12:45:07.030

```
: ${2?usage: $0 [[CC]YY]MMDD pathname}
touch -t${1}0000.00 /tmp/$$-zerosec
touch -t${1}2359.59 /tmp/$$-lastsec
find $2 -newer /tmp/$$-zerosec ! -newer /tmp/$$-lastsec
rm /tmp/$$-????sec 
```

我们用参数 date（和`touch`）和路径名（`/`对于整个目录树）调用这个脚本。请注意，这不会找到在当天第一秒修改过的文件`/tmp/$$-lastsec`，如果`/tmp`搜索到，则会额外找到该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:26:48.983

您应该能够使用`find`文件搜索工具，尤其是它的`-mtime`和`-newer`选项。

# android - 启动应用程序时获取当前位置

> ID：11933530
> 
> 赞同：1
> 
> 时间：2012-08-13T11:37:04.647
> 
> 标签：android, geolocation, location, locationmanager

每次用户打开应用程序时，我们都会检查是否获得了他的当前位置。如果没有，应用程序会要求他在应用程序中启用位置`LocationManager`并返回应用程序。问题：有时，在某些手机中，即使启用了位置并且用户返回应用程序，位置仍然是`null`. 所以用户陷入了一个循环。为什么位置仍然为空？我能做些什么？

```
String locationContext = Context.LOCATION_SERVICE;

locationManager = (LocationManager) getSystemService(locationContext);
Location location = locationManager.getLastKnownLocation(locationProvider);

if (location != null) {
  double latitude = location.getLatitude();
  double longitude = location.getLongitude();

  final String lat = String.valueOf(latitude);
  final String lon = String.valueOf(longitude);

  System.out.println("Localisation:  " + lat + " " + lon);

  SharedPreferences preferences = PreferenceManager
      .getDefaultSharedPreferences(getBaseContext());
  String id = preferences.getString("id", null);
  new sendLocation().execute(id, lat, lon);
} else {
  System.out.println("NO LOCATION!!");
  AlertDialog.Builder alert = new AlertDialog.Builder(Home.this);

  alert.setTitle("Get started");
  alert.setMessage("We need your location to detect places nearby. Please enable -Wireless Networks- in your location settings to get started.");

  // Set an EditText view to get user input
  final TextView input = new TextView(Home.this);
  alert.setView(input);

  alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int whichButton) {

      startActivity(new Intent(
          android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));

    }
  });

  alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int whichButton) {
      // Canceled.
    }
  });

  alert.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:30:04.867

当用户在手机中启用位置功能时，Android 设备不一定会自动刷新位置信息。

为保证您能找回某种位置，您需要`LocationListener`为单个或多个更新注册一个。

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 0.0f, this); 
```

在“this”的主类中，添加`implements LocationListener`并添加以下方法：

```
public void onLocationChanged(Location location) {
    //This "location" object is what will contain updated location data
    //when the listener fires with a location update
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    //Required by LocationListener - you can do nothing here
}

public void onProviderEnabled(String provider) {
    //Required by LocationListener - you can do nothing here
}

public void onProviderDisabled(String provider) {
    //Required by LocationListener - you can do nothing here
} 
```

当您获得位置更新后，您可以通过以下方式禁用侦听器：

```
locationManager.removeUpdates(this); 
```

更多关于 LocationListener 的文档：http: [//developer.android.com/reference/android/location/LocationListener.html](http://developer.android.com/reference/android/location/LocationListener.html)

# batch-file - CALL in FOR 休息 FOR

> ID：11933536
> 
> 赞同：0
> 
> 时间：2012-08-13T11:37:38.490
> 
> 标签：batch-file

考虑以下批处理文件：

```
@echo off

set ORACLESERVER=ORAOP09
set ORACLEDB=OraDb11g_home1

set ORACLESERVICES.1 = OracleVssWriter%ORACLESERVER%
set ORACLESERVICES.2 = OracleDBConsole%ORACLESERVER%
set ORACLESERVICES.3 = Oracle%ORACLEDB%TNSListener
set ORACLESERVICES.4 = OracleService%ORACLESERVER%

AT > NUL
IF ERRORLEVEL 1 (
    echo FATAL: THIS SCRIPT MUST BE RUN AS ADMINISTRATOR!
    pause
    exit
)

echo Stopping services...
FOR /F "tokens=2* delims=.=" %%A IN ('SET ORACLESERVICES.') DO sc stop %%B > NUL
FOR /F "tokens=2* delims=.=" %%A IN ('SET ORACLESERVICES.') DO call:check %%B

:check
    sc query %1 | find /I "State" | find /I "STOPPED"
    IF ERRORLEVEL 1 call:check %1

echo All services stopped successfully!
pause
exit 
```

在第二个 FOR 语句中，当 ERRORLEVEL = 0 时，将运行文件的其余部分，而不是转到下一个 FOR 项。我怎样才能使这项工作按预期进行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:12:56.990

您忘记了批处理文件没有控制结构。您必须通过脱离批处理文件的末尾或通过`exit /b`. 批处理文件的主体也是如此（以避免进入第一个子例程的主体）。

此外，您的`check`子程序中有无限递归，这将很快耗尽`cmd`的嵌套能力。使用普通`goto`的 .

所以：

```
....................
FOR /F "tokens=2* delims=.=" %%A IN ('SET ORACLESERVICES.') DO call:check %%B

echo All services stopped successfully!
pause
exit
rem If you change your mind and remove the exit above, you'll need this:
goto :EOF

:check
    sc query %1 | find /I "State" | find /I "STOPPED"
    IF ERRORLEVEL 1 goto check
    goto :EOF
    rem Technically you don't need the above line when this subroutine
    rem is at the end of the batch file, but it's a good idea to put it
    rem in anyway for clarity and to simplify future modifications 
```

# javascript - 如何将数据从服务器绑定到 Backbone.js 的模型

> ID：11933540
> 
> 赞同：2
> 
> 时间：2012-08-13T11:37:42.167
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, backbone.js

我是 Backbone.js 的新手，我一直在学习[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-1/)，现在我对本教程感到满意，接下来我想做的是，而不是像链接中所示的那样从 javascript 设置值[。](http://net.tutsplus.com/tutorials/javascript-ajax/build-a-contacts-manager-using-backbone-js-part-1/)

我想从服务器端传递值，为此我编写了以下代码，

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string City { get; set; }
}

List<Person> people = new List<Person>()
  {
      new Person(){Id = 1, FirstName = "Yasser", LastName = "Shaikh", City = "Mumbai"},
      new Person(){Id = 2, FirstName = "Adam", LastName = "Gilchrist", City = "Melbourne"},
      new Person(){Id = 3, FirstName = "MS", LastName = "Dhoni", City = "Ranchi"},
      new Person(){Id = 4, FirstName = "A", LastName = "Nesta", City = "Milan"},
  };

  public ActionResult GetTemplateData()
    {
        var jsonData = new
                       {
                       rows = (from m in people select new {
                               id = m.Id  ,
                               cell = new object[]
                                          {
                                              m.FirstName,
                                              m.LastName,
                                              m.City
                                          }
                               }).ToArray()
                       };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

我正在尝试使用`url`属性，但我无法理解如何去做。

请有人指导我得到这个。谢谢 ！

**更新 1：**

我正在使用以下 javascript，请看一下，我已经尝试了您建议的更改.. 请帮我解决这个问题

```
<script type="text/javascript">
$(document).ready(function () {

    // data
    var contacts = [];

    $.getJSON("@Url.Action("TemplateDemo2", "Home")", function(data){
        contacts = data.rows;
    });

    // Model
    var Contact = Backbone.Model.extend({
        url:"@Url.Action("TemplateDemo2", "Home")"
    });

    // Collection
    var Directory = Backbone.Collection.extend({
        model: Contact
    });

    // Individual contact view
    var ContactView = Backbone.View.extend({
        tagName: "div",
        className: "contact-container",
        template: $("#contactTemplate").html(),

        render: function () {
            var tmpl = _.template(this.template);

            $(this.el).html(tmpl(this.model.toJSON()));
            return this;
        }
    });

    // Master View

    var DirectoryView = Backbone.View.extend({
        el: $("#contacts"),

        initialize: function () {
            this.collection = new Directory(contacts);
            this.render();
        },

        render: function () {
            var that = this;

            _.each(this.collection.models, function (item) {
                that.renderContact(item);
            }, this);
        },

        renderContact: function (item) {
            var contactView = new ContactView({
                model: item
            });

            this.$el.append(contactView.render().el);
        }
    });

    // Instance
    var directory = new DirectoryView();

});
 </script> 
```

下面是我正在使用的文本模板

```
<script id="contactTemplate" type="text/template">
<div class="cc">
<h1><%= name %></h1>
</div>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:30:44.580

如果您正在学习 tutsplus 教程，您将需要类似以下内容：

```
(function ($) {

    var contacts = [];

    $.getJSON"/YourControllerName/GetTemplateData", function(data){
        contacts = data.rows;
    });

} (jQuery)); 
```

这只是调用一个控制器操作，它返回类似于您当前在 Person 类中的 JSON。然后你只是用这个 JSON 填充你的视图模型。

[这里](https://stackoverflow.com/questions/9594403/how-do-i-fetch-a-backbone-js-model-from-serialized-json-from-a-mvc3-model?rq=1)有一个类似的问题，有很好的信息

如果您需要更多信息或帮助，请告诉我 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:40:45.453

首先，您必须在服务器层构建一个 RESTful JSON api。这意味着您需要所有这些 HTTP 请求的 url：

*   （动词）（哑剧式）解释
*   (GET) (application/json)`url`返回数组中的所有模型
*   (GET) (application/json)`url/:id`返回一个模型
*   (POST)`url`消化*参数*，在服务器中创建模型并以 json 格式返回创建的模型
*   (PUT)`url/:id`消化*参数*，更新服务器中的模型并以 json 格式返回更新后的模型
*   (DELETE)`url/:id`消化*id 参数*并删除服务器中的模型

而且，为方便起见，`url`必须始终相同。服务器必须通过 识别不同的操作`http-verb + existence(or not) of id param`。

一旦你有了这个，你只需要`url`在你的模型中定义它，如下所示：

```
var MyModel = Backbone.Model.extend({
  url: <the url>
}); 
```

你的收藏是这样的：

```
var MyCollection = Backbone.Collection.extend({
  model: MyModel
}); 
```

从这里开始，您将被允许在您的集合或模型中使用任何*创建*、*更新*和删除 Backbone 命令。

# objective-c - CIFilters 直接在 OpenGL 纹理上

> ID：11933545
> 
> 赞同：0
> 
> 时间：2012-08-13T11:38:12.900
> 
> 标签：objective-c, macos, cocoa, opengl, core-image

如何在 OpenGL 纹理上直接应用 CIFilter？避免 VRAM->RAM->VRAM (GPU->CPU->GPU) 动作。我的意思是避免这种类型的管道：

![在此处输入图像描述](../Images/a2722a671051c71a939340776a0826b6.png)

因为他们很慢。我需要以某种方式在 GPU 中做尽可能多的事情。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:45:36.680

参考[CGBitmapContextCreate()](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html)

```
CGContextRef CGBitmapContextCreate (
   void *data,
   size_t width,
   size_t height,
   size_t bitsPerComponent,
   size_t bytesPerRow,
   CGColorSpaceRef colorspace,
   CGBitmapInfo bitmapInfo
); 
```

请注意，它需要 void *data。这可以是您可以直接传递给 OpenGL 的图像数据。

# python - 在表单中，如何使用外键显示来自其他模型的字段，特别是带有选项的字段？

> ID：11933548
> 
> 赞同：3
> 
> 时间：2012-08-13T11:38:19.323
> 
> 标签：python, django, foreign-keys, models, modelform

我正在制作一个`ModelForm`有两个模型的测试表格。

1.  `Country`
2.  `Email`

我正在创建一个基于`Email`模型的表单。该`Country`模型具有名称字段，其值由`COUNTRIES`列表给出。我想在`EmailForm`所有`COUNTRIES`值中显示名称字段。我必须使用外键吗？请指导。

我的模型如下所示：

```
COUNTRIES = (('IND', 'India'), ('PAK', 'Pakistan'), ('AMR', 'America'))

class Country(models.Model):
    name = models.CharField(max_length=3, choices=COUNTRIES)

class Email(models.Model):
    title = models.CharField(max_length=50)
    country = models.ForeignKey('Country')
    sender = models.EmailField(max_length=20)
    date = models.DateTimeField()
    text = models.CharField(max_length=20)

class EmailForm(ModelForm):
    class Meta:
        model = Email 
```

如果我从中生成一个表格。它显示一个空白的下拉菜单。如何从列表中获取值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T11:53:30.613

您可能希望将自定义字段添加到您的 ModelForm 并排除原始外键：

```
class EmailForm(forms.ModelForm):
    country_name = forms.CharField()

    class Meta:
        model = YourModel
        exclude = ('country',) 
```

然后，在您看来，您应该手动创建（或获取是否存在）您的公司并保存表单：

```
def foo(request):
    if request.method == 'POST':
        form = EmailForm(request.POST)
        if form.is_valid():
            form.instance.country = Country.objects.get_or_create(cname=form.cleaned_data['country_name'])
            form.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T08:44:33.510

我认为答案可能在这篇文章[Django - Display a ModelForm foreign key field](https://stackoverflow.com/questions/10332514/django-display-a-modelform-foreign-key-field)

但是，我还没有成功地使它工作。

# javascript - Jquery 脚本错误“访问被拒绝”

> ID：11933550
> 
> 赞同：1
> 
> 时间：2012-08-13T11:38:21.353
> 
> 标签：javascript, jquery, access-denied

我有一个脚本，我试图在其中打开子窗口并禁用父窗口并在子窗口关闭后重新启用父窗口，如下所示：

```
function OpenChild() {
lockOpportunity();
if (ClinicalDataWindow == null || ClinicalDataWindow.closed) {
    ClinicalDataWindow = window.open(clinicalDataUrl, 'EditOppClinicalData',   GetWindowOptions(1020, 600), true);
    var unloadFunc = function () { unlockOpportunity(); };
    if (ClinicalDataWindow) {     
        if (ClinicalDataWindow.addEventListener) {
            ClinicalDataWindow.addEventListener('unload', unloadFunc, false);
        }
        else {
            ClinicalDataWindow.attachEvent('onunload', unloadFunc); 
        }
             }
        }
else {
    ClinicalDataWindow.focus();
}
return false;
}

function lockOpportunity() {
$('#overlay').addClass('locking-overlay');
$('#overlay').height($(".t-edit-form-container").height());
$('#overlay').show();
}
function unlockOpportunity() {
$('#overlay').removeClass('locking-overlay');
$('#overlay').hide();
} 
```

下面是我正在转换为覆盖以锁定父级的 div

```
<div id="overlay" style="display:none;"></div> 
```

和CSS：

```
 .locking-overlay      
         {
            position: absolute;      
            width:930px;     
            @*height: 700px;*@
            z-index: 1000; 
            background-color: black;
            opacity: 0.5;
            filter: alpha(opacity=50);
        } 
```

每个都在我的本地机器上完美运行。但是当我在服务器上运行此代码时，我收到脚本错误“访问被拒绝”错误。子窗口在同一个域中，我使用的是 IIS7。

**编辑：** 脚本代码位于外部 js 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:53:53.603

您的临床数据网址是否遵循同源政策？这意味着您可以在所需的任何 url 上打开一个新窗口，但要与之交互，您需要位于您尝试交互的相同域、协议和端口中。

编辑：这是我在第二条评论中的意思

```
$(function(){
    $(window).on('unlockOpportunityEvent',unlockOpportunity);

});

function OpenChild() {
lockOpportunity();
var origin = window;
if (ClinicalDataWindow == null || ClinicalDataWindow.closed) {
    ClinicalDataWindow = window.open(clinicalDataUrl, 'EditOppClinicalData',   GetWindowOptions(1020, 600), true);
    var unloadFunc = function () { $(origin).trigger('unlockOpportunityEvent'); };
    if (ClinicalDataWindow) {     
        if (ClinicalDataWindow.addEventListener) {
            ClinicalDataWindow.addEventListener('unload', unloadFunc, false);
        }
        else {
            ClinicalDataWindow.attachEvent('onunload', unloadFunc); 
        }
             }
        }
else {
    ClinicalDataWindow.focus();
}
return false;
}

function lockOpportunity() {
$('#overlay').addClass('locking-overlay');
$('#overlay').height($(".t-edit-form-container").height());
$('#overlay').show();
}
function unlockOpportunity() {
$('#overlay').removeClass('locking-overlay');
$('#overlay').hide();
} 
```

# android - Android 漂亮的登录表单

> ID：11933556
> 
> 赞同：0
> 
> 时间：2012-08-13T11:38:47.130
> 
> 标签：android, android-layout

我正在尝试实现登录表单。我尝试使用不同的布局，但无法制作如下图所示的登录表单。

```
==================================================================================
=
=
=
=
=
=                     =============================================
=                     =                                           =
=                     =  User Name:      Input box                =
=                     =                                           =
=                     =                                           =
=                     =                                           =
=                     =  Password :      Input box                =
=                     =                                           =
=                     =============================================
=
=
=
=
=
=
=
========================================================================================== 
```

我尝试了网格布局，但是当我绘制用户名和密码背景的中心部分时。我在那里也使用了gridlayout，结果输出屏幕超出了范围。（意思是我不能）看到全屏。这是我的 xml 代码。

```
<GridLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/firstdesktop"
android:columnCount="3"
android:orientation="vertical"
android:rowCount="3"
tools:context=".SplitActivity" >

<GridLayout
    android:layout_width="560dp"
    android:layout_height="291dp"
    android:layout_column="1"
    android:layout_gravity="left"
    android:layout_row="1"
    android:columnCount="2"
    android:orientation="vertical"
    android:rowCount="3" >

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="1"
        android:layout_gravity="left|bottom"
        android:layout_row="0"

        android:text="@string/txtUserName"
        android:textColor="#FFFFFF"
        android:textSize="20dp"
        android:typeface="monospace" />

    <EditText
        android:id="@+id/editText1"
        android:layout_height="35dp"
        android:layout_column="1"
        android:layout_gravity="right|bottom"
        android:layout_row="0"

        android:background="#FFFFFF"
        android:ems="10"
        android:inputType="textPersonName" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="1"
        android:layout_gravity="left|bottom"
        android:layout_row="1"
        android:shadowColor="#FFFFFF"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2.0"
        android:text="@string/txtPass"
        android:textColor="#FFFFFF"
        android:textSize="20dp"
        android:typeface="monospace" />

    <EditText
        android:id="@+id/editText2"
        android:layout_height="35dp"
        android:layout_column="1"
        android:layout_gravity="left|bottom"
        android:layout_row="2"
        android:background="#FFFFFF"
        android:ems="10"
        android:inputType="textPassword" />

    <Button
        android:id="@+id/button1"
        style="@style/ButtonText"
        android:layout_width="215dp"
        android:layout_height="wrap_content"
        android:layout_column="1"
        android:layout_gravity="left|bottom"
        android:layout_row="3"
        android:background="@drawable/redbutton"
        android:text="@string/btnLogin" />

    <Space
        android:layout_width="320dp"
        android:layout_height="1dp"
        android:layout_column="0"
        android:layout_row="0" />

    <Space
        android:layout_width="170dp"
        android:layout_height="1dp"
        android:layout_column="1"
        android:layout_row="0" />

    <Space
        android:layout_width="48dp"
        android:layout_height="1dp"
        android:layout_column="1"
        android:layout_row="0" />

    <Space
        android:layout_width="1dp"
        android:layout_height="1dp"
        android:layout_column="1"
        android:layout_row="0" />

    <Space
        android:layout_width="100dp"
        android:layout_height="1dp"
        android:layout_row="1" />
</GridLayout> 
```

这是我的模拟器属性。目标 Android 4.1 - API Level16 SD 卡：尺寸：500Mib 皮肤：分辨率：1280 x 800

我已经根据我的平板电脑尺寸确定了模拟器屏幕尺寸。(1280 x 800) 如果有任何其他方式然后告诉我..？如果可以的话，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:43:02.307

试试这个。你正在尝试它`GridLayout`。尝试`RelativeLayout`按以下方式使用。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="137dp"
    android:text="TextView" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_marginLeft="29dp"
    android:layout_toRightOf="@+id/textView1"
    android:ems="10" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_centerVertical="true"
    android:text="TextView" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText1"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:ems="10" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:11:49.103

将内部矩形视为单独的布局并将背景设置为该布局。

# blackberry - 在 BlackBerry 中下载服务器 SSL 证书

> ID：11933558
> 
> 赞同：3
> 
> 时间：2012-08-13T11:38:56.333
> 
> 标签：blackberry, java-me, ssl-certificate

无论如何我可以下载服务器的 SSL 证书并在尝试连接到它以在黑莓设备中发送数据之前对其进行验证？我正在使用`((HttpsConnection)conn).getSecurityInfo();`，但它提供了一个没有太多有用信息的证书类型。当我试图检查类型时，它说`net.rim.device.api.crypto.certificate.CertificateUtilities`。有什么办法可以将它转换为 X509 证书，以便我可以访问更多有用的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:47:37.550

检查类[net.rim.device.api.crypto.certificate.x509.X509Certificate](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/crypto/certificate/x509/X509Certificate.html)

更新：
抱歉，我之前的回答是错误的：API 中有两个具有相同类名的接口：（`net.rim.device.api.crypto.certificate.Certificate`从中`X509Certificate`扩展）和`javax.microedition.pki.Certificate`（J2ME 接口）。后者是您可以通过 HttpsConnection 检索的，它不是很有用。

所以你被 X509Certificate 构造函数困住了，要创建一个实例，你需要先从服务器下载证书，或者将它包含在你的应用程序资源中。在这个问题中，您可以看到如何从服务器下载证书： [https](https://serverfault.com/q/139728/87344) ://serverfault.com/q/139728/87344 。但是，这可能不是您的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:08:51.780

您不需要事先下载它。它在握手期间发送，并在握手完成后通过 SSL 会话进行验证并提供给应用程序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-14T18:01:49.233

定期执行 WINDOWS 或 MICROSOFT UPDATE 并将其设置为永久更新，这样您就不需要手动执行了。如果更新认为合适，将自动安装 SSL 证书。我花了两个月的时间来解决这个问题，但结果是没有。手动更正您的时间（年、小时、分钟）或从控制面板的互联网时间同步中获取帮助 - 日期和时间 - 互联网时间 - 立即更新。然后转到开始 - Microsoft 更新或 Windows 更新。基本上这个问题是由于日期和时间错误而发生的。非常有趣的是，即使您以错误的方式设置时间，此证书错误也会在极少数情况下自动消失。

# html - 如何减小 SVG 图像的图像大小？

> ID：11933561
> 
> 赞同：1
> 
> 时间：2012-08-13T11:39:10.050
> 
> 标签：html, svg, raphael

我使用 Raphael 框架绘制了一张图像。这是一个 SVG 图像。我想调整它的大小。

这怎么可能？

请帮帮我

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:19:54.517

使用[setViewBox](http://raphaeljs.com/reference.html#Paper.setViewBox)设置坐标系，然后使用[setSize](http://raphaeljs.com/reference.html#Paper.setSize)设置画布大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:59:15.767

Raphael 似乎不直接支持缩放 SVG 图像。[正如这个](https://stackoverflow.com/questions/2339374/zooming-and-panning-svg-images-using-raphael-js-or-some-other-js-library)问题的答案所示，有一些方法可以扩展它。其中一个人分享了一个插件的链接。

# scala - Scala Actor Prime Sieve

> ID：11933569
> 
> 赞同：0
> 
> 时间：2012-08-13T11:39:34.877
> 
> 标签：scala, actor, primes

我是一个新的 java 编码器，最近被告知要检查 scala 的并发实现。我想一个简单的（尽管不是最好的说明并发性）示例可能是让演员解决 Eratosthenes 的筛子。到目前为止，我已经拼凑出一些东西，但我不确定我要去的方向是否接近正确。这是我当前的代码：

```
import scala.actors.Actor
import scala.actors.Actor._
import Array._

class PrimeActor(val id: Int) extends Actor {

     //Runs one Prime of the Sieve of Eratosthenes
     def sieve(p: Int, list: Array[Int]) {
       var i = 1
       var place = 0
       while(list contains (i * p)) {
       place = list.indexOf(i * p)
       if (list(place) != 0) 
          list.update(place, 0)
       i += 1
       }
     }

   //Checks to see if there is a higher prime in the list
   //If so, creates a new actor to handle it and sends
   //it the list and the prime
   def findandCreateNextPrime(p: Int, list: Array[Int]){
      var i = 1
      var place = list.indexOf(p)
      while(list(place + i) == 0 && (p + i) <= list.last) {
         i += 1
      }
      val newP = list(place+i)

      if (list contains (p + i)) {
         if ((p + i) equals list.last) {
            print(list.last)
         } else {
            print(", ")
            val pA = new PrimeActor(newP)
            pA.start()
            pA ! (list(newP), list)
         } 
     } else {
     println("DONE")
    } 
  }

   //Actor behavior
   def act() {
      loop {
         react{
            case (recievedP: Int, recievedList: Array[Int]) =>
               print(recievedP)
               sieve(recievedP, recievedList)
               findandCreateNextPrime(recievedP, recievedList)
               exit()
         }
      }
   }
} 
```

任何帮助或方向输入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:38:14.593

在 Scala 中，您可以以函数式风格编写代码。我建议你使用它。首先忘记`Array`，它是一个可变集合，而 scala 中的可变集合是邪恶的。最好将不可变集合用作`List`. 关于`var`. 尽可能尝试使用`val`。
我猜想，在 Scala 中实现 Eratosthenes 筛子的最简单方法如下：

```
import scala.annotations.tailrec

def sieve(until: Int): Seq[Int] = {
  @tailrec
  def loop(i: Int, primes: Seq[Int]): Seq[Int] = {
    // we reached the desired end
    if (i > until) primes
    else {
      // we already found a factor of this i
      if (primes exists(i % _ == 0)) loop(i + 2, primes)
      // we found a new prime
      else loop(i + 2, primes :+ i)
    }
  }
  // there is no prime smaller than 2
  if (until < 2) Seq.empty[Int]
  // starting with 3 has the advantage, we only need to check i + 2
  else loop(3, Seq.empty[Int] :+ 2)
} 
```

如果您刚开始使用 Scala，这可能有点令人困惑，但我会解释一下。
我们想要一个所有素数的序列，直到一个特定的数字。我们定义了一个递归函数，它将检查每隔一个数字是否为素数。因为它是尾递归的，编译器会将其优化为便于理解，所以我们不需要为`StackOverflow`s 操心。如果我们的计数器超过最大值 ( `until`)，我们返回质数，我们检测到。这是我们的递归锚。否则，我们检查我们是否找到了一个素数，这是我们当前的一个因素`i`。如果有，我们就跳到下一个候选者，否则我们添加`i`我们的素数并继续下一个候选者。
注意：注解不是必须的，但如果它存在，编译器会警告你，如果函数不是尾递归的。

使用我建议的代码会导致我们遇到问题，您不能再使用并发性了。Scala中的并发性很好的介绍是[Programming Scala](http://ofps.oreilly.com/titles/9780596155957/)的一章。他们通过并发解决了睡觉的理发师问题。这是他们解决方案的[链接。](http://ofps.oreilly.com/titles/9780596155957/Concurrency.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T14:36:28.030

参与者是关于并发的：不同的任务同时完成，必要时相互通信。

演员有两点很重要：

1.  您只能通过消息与演员交谈。如果您的参与者没有在返回时返回消息，或者从消息以外的其他地方获取信息，那么您做错了。
2.  您不会向参与者发送可变数据结构。如果你这样做，你就做错了。

所以，你在你的例子中打破了这两个规则，演员之间真的没有互动。由于这些原因，演员在这里可能是错误的选择。在这种情况下，最好查看并行集合以获取答案，但它们在这里也无济于事。

埃拉托色尼筛法本质上是一种串行算法，对于并行性或并发性来说都是一个糟糕的选择。

# iphone - 与 Mac 连接时，我们如何使用 USB 命令从 iOS 设备获取数据？

> ID：11933571
> 
> 赞同：1
> 
> 时间：2012-08-13T11:39:56.037
> 
> 标签：iphone, ios, macos, usb, libusb

当任何 iOS 设备与 Mac 连接时，我想要设备在自定义开发的桌面应用程序（不是 iTunes）中的所有数据，我想要安装的应用程序列表、所有设置列表、所有已安装的配置文件列表、所有媒体内容（iBooks、新闻、视频）等数据，音乐等），正在运行的应用程序列表，借助 USB 命令的应用程序的当前屏幕。换句话说，我想借助 USB 命令在我的桌面应用程序中获取所有数据（我们可以从 iTunes 获取的数据）。有没有办法将 USB 命令发送到 iOS 设备并从中获取请求的数据？

感谢您的宝贵时间和回复。

# android - 对话框中的 Webview 有时不显示图像

> ID：11933573
> 
> 赞同：0
> 
> 时间：2012-08-13T11:40:02.780
> 
> 标签：android, dialog, webview, progress-bar

我有一个带有一个按钮的简单应用程序，当按下按钮时，会打开一个带有进度条的对话框。加载 url 时，它会在 webview 中显示图像。有趣的是，如果你按100次，它有时不会打开。在 android 2.3.3 和 emulator 4.0.3 上的真实设备上对其进行了测试。

有人知道为什么吗？

HelloWebViewActivity.java

```
public class HelloWebViewActivity extends Activity {

ProgressBar progressBar;
WebView a;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

  this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
  setContentView(R.layout.main );

  TextView buttona = (TextView) findViewById(R.id.button);
  buttona.setOnClickListener(new OnClickListener() {
     public void onClick(View v) {
        final Dialog dialog = new Dialog(HelloWebViewActivity.this);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.requestWindowFeature(Window.FEATURE_PROGRESS);
        dialog.setContentView(R.layout.webview);

        a = (WebView) dialog.findViewById(R.id.webview); 
        a.getSettings().setSupportZoom(true);      
        a.getSettings().setBuiltInZoomControls(true);

        progressBar = (ProgressBar) dialog.findViewById(R.id.progressbar);
        progressBar.setProgress(0);
        progressBar.setVisibility(View.VISIBLE);
        a.setWebChromeClient(new WebChromeClient(){
        public void onProgressChanged(WebView view, int progress) {
            progressBar.setProgress(progress);
            if(progress == 100) {
                progressBar.setVisibility(View.GONE);
                }
            }
    });
      a.loadUrl("http://www.deshow.net/d/file/car/2010-10/seat-electric-car-879-2.jpg");
      dialog.setCancelable(true);
      dialog.show();
      }
  }); 

}
} 
```

webview.xml

```
 <?xml version="1.0" encoding="utf-8"?>

 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent" >

 <ProgressBar 
     android:id="@+id/progressbar"
     style="?android:attr/progressBarStyleHorizontal"
     android:layout_width="fill_parent"
     android:layout_height="20dp"
     android:max="100"
     android:visibility="gone" />

 <WebView
     android:id="@+id/webview"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"/>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:03:23.527

我没有解决它，但做了一个工作。我在一个新的活动中创建了 webview，其中包含一个检索图像 url 的 onResume 事物。这样，图像被加载到一个活动而不是一个对话框中，看起来不那么花哨，但它总是加载一个进度轮。

# php - 使用星号拨号方案的多个呼叫

> ID：11933575
> 
> 赞同：0
> 
> 时间：2012-08-13T11:40:05.973
> 
> 标签：php, asterisk

我想使用 sip dialplan 同时拨打多个电话，例如：

```
exten => _X.,1,Dial(SIP/${DIAL}${DIALSTR}) 
```

同时，在我的拨号变量中有多个数字，例如，上下文是这样的：

```
local/11111111111&local/33333333333&local/5555555555&local/777777777777@scl_local 
```

我想同时拨打所有号码，所以我在上面创建了上下文；但那只打了一个号码就断线了。

我想拨打这样的电话：

```
SIP/11111111111,33333333333,5555555555,777777777777 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:19:18.403

拨号(SIP/101&SIP/102&SIP/103)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:32:58.683

上述拨号方案同时拨打所有提到的号码，谁先接电话，谁接电话，其余电话断开。

# javascript - Javascript将unicode字符串转换为“Title Case”

> ID：11933577
> 
> 赞同：4
> 
> 时间：2012-08-13T11:40:08.143
> 
> 标签：javascript, unicode, turkish, pascalcasing, title-case

我有一个 javascript 大小写转换问题，由于非英文字母，我无法解决。我主要关心的是土耳其字母表。

我需要做的是：

*   你好世界=>你好世界
*   你好世界 => 你好世界
*   你好世界 => 你好世界

这是我到目前为止所取得的成就：

```
String.prototype.turkishToUpper = function(){
    var stringlow = this;
    var letterslow = { 'i': 'İ', 'ş': 'Ş', 'ğ': 'Ğ', 'ü': 'Ü', 'ö': 'Ö', 'ç': 'Ç', 'ı': 'I' };
    stringlow = stringlow.replace(/(([iışğüçö]))/g, function(letterlow){ return letterslow[letterlow]; })
    return stringlow.toUpperCase();
}

String.prototype.turkishToLower = function(){
    var stringup = this;
    var lettersup = { 'İ': 'i', 'I': 'ı', 'Ş': 'ş', 'Ğ': 'ğ', 'Ü': 'ü', 'Ö': 'ö', 'Ç': 'ç' };
    stringup = stringup.replace(/(([İIŞĞÜÇÖ]))/g, function(letterup){ return lettersup[letterup]; })
    return stringup.toLowerCase();
}

String.prototype.toProperCase = function () {
    return this.replace(/\w\S*/g, function(txt){return txt.charAt(0).turkishToUpper() + txt.substr(1).turkishToLower();});
}; 
```

但这并没有给我正确的结果，我怀疑正则表达式替换不能在 unicode 上使用，而是在 ascii 上使用。

当我使用土耳其字符进行测试时，我得到了错误的结果。

*   şeker 变成**şEker**而不是**Şeker**
*   çoban ırmak 成为**çOban ıRmak**而**不是 Çoban Irmak**

此外，如果这可以得到解决，我需要锦上添花，不仅可以通过空格分隔单词，还可以通过其他一些停止字符（例如：- = / 等）分隔单词，以便

*   你好世界变成你好世界
*   你好：世界变成你好：世界

我在这里阅读了许多类似的问题，但到目前为止还没有运气。

谢谢

*注意：我认为这称为 Title Case，但有些人认为这是 Pascal Case。坦率地说，我有兴趣解决 unicode 问题（我认为这是根本原因）而不是语义，所以如果我使用了错误的术语，请原谅我 :)*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:04:16.060

独立功能：

```
function toProperCase(s){
    return s.replace(/([^\s:\-])([^\s:\-]*)/g,function($0,$1,$2){
        return $1.toUpperCase()+$2.toLowerCase();
    });
} 
```

或者对于 String.prototype 的扩展：

```
String.prototype.toProperCase=function() {
    return this.replace(/([^\s:\-])([^\s:\-]*)/g,function($0,$1,$2){
        return $1.toUpperCase()+$2.toLowerCase();
    });
}

"çoban ırmak becomes çOban ıRmak intead of Çoban Irmak Hello-wOrld".toProperCase();
// "Çoban Irmak Becomes Çoban Irmak Intead Of Çoban Irmak Hello-World" 
```

**更新：**

下一个代码使用自定义功能来转换特定于语言环境的字符（部分测试）。代码将函数添加到`String.prototype`:`toLocaleProperCase2`和.`toLocaleLowerCase2``toLocaleUpperCase2`

```
(function(){
    // locale specific chars
    // IMPORTANT: name of locale must be always in lower case (for "tr-TR" locale - "tr-tr") !!!
    var localeInfos={
            "tr-tr": { lower: { i:"İ", ı:"I", ş:"Ş", ğ:"Ğ", ü:"Ü", ç:"Ç", ö:"Ö" },
                       upper: { İ:"i", I:"ı", Ş:"ş", Ğ:"ğ", Ü:"ü", Ç:"ç", Ö:"ö" } }
        },
        localeInfo;
    // helper vars
    var mask="\\s:\\-", // add additional delimeters chars to the mask if needed
        rg=new RegExp("([^"+mask+"])([^"+mask+"]*)","g");
    var fnToLocaleLower=function(s){ return localeInfo.upper[s]; },
        fnToLocaleUpper=function(s){ return localeInfo.lower[s]; },
        fnToProper=function($0,$1,$2){
            if(localeInfo){
                if(localeInfo.lower.hasOwnProperty($1))$1=localeInfo.lower[$1];
                $2=$2.replace(localeInfo.upperSearchRegExp,fnToLocaleLower);
            }
            return $1.toUpperCase()+$2.toLowerCase();
        };
    // helper calculations
    var localeInfosKeys=Object.keys(localeInfos);
    for(var i=0;localeInfo=localeInfos[localeInfosKeys[i]];i++){
        localeInfo.lowerSearchRegExp=new RegExp("["+Object.keys(localeInfo.lower).join("")+"]","g");
        localeInfo.upperSearchRegExp=new RegExp("["+Object.keys(localeInfo.upper).join("")+"]","g");
    }

    // extending String.prototype
    String.prototype.toLocaleProperCase2=function toLocaleProperCase2(locale){
        localeInfo=localeInfos[arguments.length?locale.toLowerCase():null];
        return this.replace(rg,fnToProper);
    };
    String.prototype.toLocaleLowerCase2=function toLocaleLowerCase2(locale){
        return ((localeInfo=localeInfos[arguments.length?locale.toLowerCase():null]) ?
                this.replace(localeInfo.upperSearchRegExp,fnToLocaleLower):
                this).toLowerCase();
    };
    String.prototype.toLocaleUpperCase2=function toLocaleUpperCase2(locale){
        return ((localeInfo=localeInfos[arguments.length?locale.toLowerCase():null]) ?
                this.replace(localeInfo.lowerSearchRegExp,fnToLocaleUpper) :
                this).toUpperCase();
    };
})(); 
```

* * *

```
// testing
var sss="çoban ırmak ibecıoimes çOban ıRmak intead of Çoban IrImaİk Hello-wOrld";
console.log("Origin:    ", sss);
console.log("Proper TR: ", sss.toLocaleProperCase2("tr-TR"));
console.log("Proper:    ", sss.toLocaleProperCase2());
console.log("Lower TR:  ", sss.toLocaleLowerCase2("tr-TR"));
console.log("Lower:     ", sss.toLocaleLowerCase2());
console.log("Upper TR:  ", sss.toLocaleUpperCase2("tr-TR"));
console.log("Upper:     ", sss.toLocaleUpperCase2());

// Origin:    çoban ırmak ibecıoimes çOban ıRmak intead of Çoban IrImaİk Hello-wOrld
// Proper TR: Çoban Irmak İbecıoimes Çoban Irmak İntead Of Çoban Irımaik Hello-World
// Proper:    Çoban Irmak Ibecıoimes Çoban Irmak Intead Of Çoban Irimaik Hello-World
// Lower TR:  çoban ırmak ibecıoimes çoban ırmak intead of çoban ırımaik hello-world
// Lower:     çoban ırmak ibecıoimes çoban ırmak intead of çoban irimaik hello-world
// Upper TR:  ÇOBAN IRMAK İBECIOİMES ÇOBAN IRMAK İNTEAD OF ÇOBAN IRIMAİK HELLO-WORLD
// Upper:     ÇOBAN IRMAK IBECIOIMES ÇOBAN IRMAK INTEAD OF ÇOBAN IRIMAİK HELLO-WORLD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:48:22.873

这是可以完成这项工作的 JS 函数。

```
function toProperCase(string) {   
    output = '';
    explodedString = string.split(' '); //explode string by space
    for(var i=0;i<explodedString.length;i++){
        output += explodedString[i].charAt(0).toUpperCase() + explodedString[i].slice(1).toLowerCase()+' ';
    }
    return output.slice(0, -1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:01:16.247

```
String.prototype.toProperCase = function (){
   var arr= this.toLowerCase().split(' ');
   for( var i=0;i<arr.length;i++){
      arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].substr(1);
   };
   return arr.join(' ');
};

'çoban ırmak'.toProperCase() // "Çoban Irmak" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T13:49:31.857

只是另一种选择，但锦上添花：

```
function toProperCase( str ) {

    var i,
        j,
        chars,
        arr;

    arr = str.toLowerCase( ).split("");

    chars = {
        " " : true,
        "-" : true,
        ":" : true,
        "=" : true,
        "/" : true
    };

    for( var i = 0, j = -1; i < arr.length; i += 1, j += 1 ) {
        // if previous char (j) exists in chars and current (i) does not;
        // replace with uppercase equivalent.
        if ( ( arr[j] && chars[ arr[j] ] && !chars[ arr[i] ] ) || i === 0){
            arr[i] = arr[i].toUpperCase( );
        }
    }

    return arr.join("");
} 
```

希望这会有所帮助:)

# jquery - 加载内部页面时显示加载消息

> ID：11933578
> 
> 赞同：2
> 
> 时间：2012-08-13T11:40:09.437
> 
> 标签：jquery, jquery-mobile, cordova

我正在将 jQuery Mobile 用于 PhoneGap 应用程序。当我尝试加载这样的内部页面时：

```
$.mobile.changePage('#loginPage', { transition: "none"} ); 
```

该应用程序等待片刻，然后页面更改为登录页面。是否可以在加载页面时显示加载消息？我知道 changePage 有一个 showLoadingMsg 选项，但仅适用于外部页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:44:25.917

使用`$.mobile.showPageLoadingMsg();`on`pagebeforecreate`或`pagebeforeshow`event（取决于您的情况），然后`$.mobile.hidePageLoadingMsg();`使用 on `pageshow`event。像这样的东西：

```
$(document).on(
   'pageshow',
   '#loginPage'
   function()
   {
      $.mobile.hidePageLoadingMsg();
   }
); 
```

# android - 在 Horizo ntalScrollView 中加载图像和复选框

> ID：11933580
> 
> 赞同：0
> 
> 时间：2012-08-13T11:40:19.907
> 
> 标签：android, web-services, android-imageview, horizontalscrollview, postdelayed

我得到了一个按钮的以下 onClick 命令。但是当我调用它时，什么都没有出现代码：

```
public void onClick(View v) {

Log.d("debug", "before loadGutschein");
                    loadGutschein();
                    ViewFlipperVino.setDisplayedChild(3);
                    layout_number = 3;
                    Log.d("debug", "after loadGutschein");
                    bottomAudioLogosLayout.postDelayed(new Runnable() {

                        DisplayMetrics metrics = getActivity().getResources().getDisplayMetrics();
                        int width = metrics.widthPixels;

                        @Override
                        public void run() {
                            Log.d("debug", "couponsout=" + coupons);

                            if (coupons != null) {
                                int coupSize = coupons.size();
                                final int itemWidth = (width / coupSize) - 5;
                                for (int i = 0; i < coupSize; i++) {
                                    Coupon coupon = coupons.get(i);
                                    if (coupon.getImage() != null) {
                                        final CheckBox cb = new CheckBox(getActivity());
                                        final ImageView iv = new ImageView(getActivity());
                                        iv.setScaleType(ScaleType.CENTER_INSIDE);
                                        LayoutParams linearLayoutParams = new LayoutParams();
                                        iv.setLayoutParams(linearLayoutParams);
                                        cb.setLayoutParams(linearLayoutParams);
                                        bottomAudioLogosLayout.addView(iv);
                                        bottomAudioLogosLayout.addView(cb);
                                        ImageUtil.loadImage(coupon.getImage(), iv, -1, -1, "", false);
                                    }
                                }
                            }

                        }
                    }, 200);
} 
```

============LoadGutschein 方法：

```
 private void loadGutschein() {
    ServiceProxy.createWebServiceTask(getActivity(), new RemoteCallListener() {

        @Override
        public void onRemoteCallError(String response) {
            Log.e("error", "onRemoteCallError is ==>" + response);
        }

        @Override
        public void onRemoteCallComplete(Object response) {
            Log.d("debug", "response is = " + response + "\t" + response.getClass());
            coupons = (Coupons) response;
            Log.d("debug", "coupons = " + coupons);

        }

        @Override
        public void onNoInternetError() {
            Log.e("error", "onNoInternetError");
        }

        @Override
        public void onNoAccess() {
            Log.e("error", "onNoAccess");
        }
    }, true, true).invokeGetCoupons();
} 
```

=========我的 LOGCAT 日志：

```
08-13 14:36:11.382: D/debug(17576): gutscheinName= e
08-13 14:36:11.382: D/debug(17576): gutscheinHN= d
08-13 14:36:11.382: D/debug(17576): gutscheinCash= 50
08-13 14:36:11.382: D/debug(17576): before loadGutschein
08-13 14:36:11.445: D/debug(17576): after loadGutschein
08-13 14:36:11.515: I/WEB-SERVER-CLIENT GET :(17576):     http://developer.weinco.de/api/v1/getCoupons?
08-13 14:36:11.648: D/debug(17576): couponsout=null
08-13 14:36:11.742: D/debug(17576): response is = [Coupon [Name=Rabatt, Code=321, GueltigBis=2014-09-01, Typ=absolut, Wert=10, GueltigAb=2011-09-01, Gueltig=alle]] class com.weinco.webservice.entity.Coupons
08-13 14:36:11.742: D/debug(17576): coupons = [Coupon [Name=Rabatt, Code=321, GueltigBis=2014-09-01, Typ=absolut, Wert=10, GueltigAb=2011-09-01, Gueltig=alle]] 
```

我不明白为什么 postDelayed（logcat 中的优惠券）中的优惠券值为空，如果来自 web 服务的优惠券采用响应的价值。任何想法我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:18:02.147

> 我不明白为什么 postDelayed（logcat 中的优惠券）中的优惠券值为空，如果来自 web 服务的优惠券采用响应的价值。

我认为问题的出现是因为您使用从 web 服务返回的数据的方式。在`onClick`回调中，您开始获取数据的任务（并在任务完成事件的回调中设置结果`onRemoteCallComplete`），然后安排`Runnable`在 200 毫秒后运行（也许您可以解释为什么要`Runnable`在 200 毫秒后发布）。如果任务花费超过 200 毫秒，发布一个`Runnable`依赖于`coupons` 变量的失败会因为获取新数据的任务尚未完成而失败吗？

可能您没有初始化`coupons` ，因此很有可能`null`在`Runnable`运行时出现。`Runnable`的 run 方法中的代码**只有**在您确定从 web 服务获取数据的过程已完成时才应该运行（这`onRemoteCallComplete`似乎是个好地方，但我不知道您的完整代码）。

此外，您应该为您的`LayoutParams`而不只是实例化它提供一些大小，例如：

```
LayoutParams linearLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

# vba - 如何从提醒中获取实际的约会/会议时间？

> ID：11933586
> 
> 赞同：0
> 
> 时间：2012-08-13T11:40:55.433
> 
> 标签：vba, outlook, outlook-2010

在`ThisOutlookSession`中，我为提醒添加了代码：

```
Private Sub obj_ReminderFire(ByVal ReminderObject As Reminder)
  If (ReminderObject.Caption = "Daily Update") then 
    ' Do some thing. 
    ' Check if the reminder is for today only 
    If (ReminderObject.OriginalReminderDate = Now) Then
       'Do more things
    end if
  end if
end sub 
```

由于我的提醒设置为在事件前 15 分钟发出警报，因此事件在 15 分钟前触发。

如何从提醒中获取实际的约会/会议时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:53:22.730

如果您`Reminder`改为处理事件，您将获得与事件相关的实际`AppointmentItem`、`MailItem`、`ContactItem`或`TaskItem`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T22:12:27.777

读取`Reminder.Item`属性并适当地转换它（例如`AppointmentItem`对象）。

# java - 线程不访问同步块

> ID：11933592
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:41:08.943
> 
> 标签：java, multithreading, synchronized

我在生产代码中遇到了一个突然的问题，自过去 5-6 年以来就没有发生过。我有一个线程池，它最多生成 64 个线程，所有 64 个线程都读取一些数据并将其放在一个公共中`Map`以供进一步处理。

读取是由来自特定源的所有线程完成的，我已经验证数据确实是从源读取的，但是，一个特定的批次没有被放入`Map`.

这是一个代码片段（由于保密问题，不能放整个代码）：

```
try {
   <read the data>
    .
    .
    <do processing>
    .
    .
    synchronized(glock) { //glock is a class attribute, Object glock = new Object[];
     map.put(<data that was read>);
     log.debug("bla bla bla")
    }
} catch(Throwable e) { 
     log.error("error") 
  }
  finally {
    log.debug("done")
 } 
```

**ISSUE：特定线程不进入同步块，不放入映射，不打印`"bla bla bla"`，不打印`"error"`但打印`"done"`。**

我已经验证了一切......代码中没有任何变化，这个问题突然出现了。问题是，我不能放任何额外的日志，因为它是生产代码，没有得到所有客户的同意，但这是最后一部分。

有没有人遇到过类似的问题，或者对此有所了解？正在读取的数据非常庞大，有 6000 条记录，每条记录至少有 0f 30-40 列数据。

提前致谢。

**编辑：捕捉`Throwable`而不是`Exception`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:47:27.020

从您向我们展示的情况看来，

```
synchronized(glock){} 
```

将数据放入地图时抛出异常，而不是打印“bla bla bla”。
“完成”被打印，因为它`finally`在`try`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:11:23.137

您的代码有 99% 的可能性有问题。这意味着`synchronized`块中的代码会引发异常，但您看不到它。

通常的罪魁祸首是：

*   吞下异常的空`catch`块（可以在代码的其他地方）
*   块中记录器的异常日志配置`catch`，例如，将异常写入不同的日志文件
*   由于某种原因，日志消息没有按顺序写入（因此 ERROR 行不在您期望的位置）
*   一些不寻常的情况（如内存不足）加上弹性代码会阻止写入日志消息。地图可能需要惊人的内存量。
*   `log`不是标准的 Java 记录器，而是别的东西。

您在 VM 中发现错误或存在硬件问题的可能性很小（< 1%）。如果您可以重复获得相同的结果，则*可能*不是硬件问题。

如果其他一切都失败了，您将需要在生产中调试问题。当然，您的客户会反对；那时，你会让他们决定哪个对他们更重要：一些规则，你不能调试代码或修复错误。

# android - Android 4.0 从 url 启动应用程序不起作用

> ID：11933593
> 
> 赞同：1
> 
> 时间：2012-08-13T11:41:08.627
> 
> 标签：android, android-intent, android-browser

我有一个奇怪的问题，而不是 url 应该启动我的应用程序，它将应用程序加载到浏览器本身，在这种情况下加载到 mozella！

这是我用于我的应用程序的意图过滤器，如果有人可以告诉我我做错了什么。

```
<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

<application
    android:name=".Globals"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".RSS_ViewerActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
               <action android:name="android.intent.action.VIEW" />
               <category android:name="android.intent.category.DEFAULT" />
               <data android:scheme="itpc" />
               <data android:scheme="pcast" />
               <data android:scheme="feed" />
               <data android:scheme="feeds" />
               <data android:scheme="rss" />
        </intent-filter>

        <intent-filter>
               <action android:name="android.intent.action.VIEW" />
               <category android:name="android.intent.category.DEFAULT" />
               <data android:mimeType="text/xml" android:scheme="http" />
               <data android:mimeType="application/rss+xml" android:scheme="http" />
               <data android:mimeType="application/atom+xml" android:scheme="http" />
               <data android:mimeType="text/xml" android:scheme="https" />
               <data android:mimeType="application/rss+xml" android:scheme="https" />
               <data android:mimeType="application/atom+xml" android:scheme="https" />
        </intent-filter>

    </activity>
    <activity android:name="RSSFeedActivity"></activity>
    <activity android:name="com.CertificateAuthentication.Authenticator"></activity>
</application> 
```

谢谢。

**更新**

再多一点信息，当对话框要求选择和应用程序打开链接弹出时，它不会显示我的应用程序，或者任何与此相关的。

**更新**

我删除了第二个和第三个意图过滤器，我试图将剩余的 2 个意图过滤器合并为 1 个，但这不会从浏览器加载应用程序。上面的代码是现在的样子，得到的结果和以前一样 =( 这很烦人，因为这意味着用户可以运行 2 个应用程序会话，一个来自浏览器，一个来自启动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:25:59.003

这里的问题是`\`。这是转义字符，因此要使此表达式起作用，您需要`\\`. [文档清楚地](http://developer.android.com/guide/topics/manifest/data-element.html#path)表明您需要使用`\\.`for dot （有示例`\\*`）。

我也同意 CommonsWare 的回答，我在[文档](http://developer.android.com/guide/components/intents-filters.html)中发现了这样的声明：

> 这些属性中的每一个都是可选的，但它们并不是相互独立的：为了使权限有意义，还必须指定方案。要使路径有意义，必须同时指定方案和权限。

所以`The host and port together constitute the URI authority`在实践中，权威意味着主持人，所以你不能省略它，显然你不能在那里放一颗星。

IMO 你让它变得复杂，你不需要在这里定义路径！哑剧类型应该可以完成这项工作。尝试找到一些读取 RSS 的开源项目，看看它们是如何定义清单的。

我认为你需要这样的东西：

```
<activity
    android:name=".RSS_ViewerActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>

    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="itpc" />
        <data android:scheme="pcast" />
        <data android:scheme="feed" />
        <data android:scheme="feeds" />
        <data android:scheme="rss" />
        <data android:mimeType="text/xml" android:scheme="http" />
        <data android:mimeType="application/rss+xml" android:scheme="http" />
        <data android:mimeType="application/atom+xml" android:scheme="http" />
        <data android:mimeType="text/xml" android:scheme="https" />
        <data android:mimeType="application/rss+xml" android:scheme="https" />
        <data android:mimeType="application/atom+xml" android:scheme="https" />
    </intent-filter>

</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:21:36.830

您的第二个和第三个`<intent-filter>`元素可能不起作用，因为`android:host`没有记录支持通配符。

# .net - Dotnet HttpWebRequest 错误 401，但相同的地址在浏览器中有效

> ID：11933597
> 
> 赞同：0
> 
> 时间：2012-08-13T11:41:26.473
> 
> 标签：.net

我有一个奇怪的问题，一个为我制作的函数在许多情况下都能完美运行，但是在一个地址（我不能说是为了保密）总是返回一个错误 401。在浏览器中，这个地址工作正常，但使用 HttpWebRequest不。有关更多信息，服务器使用 SSL 和 SAP 运行。接下来的功能是：

```
public static HttpWebResponse MakeRequest(string uri, string method, Dictionary<string, string> postData, CookieContainer cookies, ICredentials credentials, WebProxy proxy)
{
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);
    webRequest.CookieContainer = (cookies != null) ? cookies : new CookieContainer();
    webRequest.AllowAutoRedirect = true;
    webRequest.Credentials = (credentials != null) ? credentials : CredentialCache.DefaultCredentials;
    webRequest.Method = method.ToUpper();
    webRequest.Headers.Add("HTTP_USER_AGENT", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1134.0 Safari/537.1");
    webRequest.Headers.Add("HTTP_ACCEPT", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    webRequest.Headers.Add("HTTP_ACCEPT_ENCODING", "gzip,deflate");
    webRequest.Headers.Add("HTTP_ACCEPT_LANGUAGE", "es-ES,es;q=0.8");
    webRequest.Headers.Add("HTTP_ACCEPT_CHARSET", "ISO-8859-1,utf-8;q=0.7,*;q=0.3");

    // allows for validation of SSL conversations
    ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(
        ValidateRemoteCertificate
    );

    if (proxy != null)
    {
        webRequest.Proxy = proxy;
    }

    if (method.ToLower() == "post" && postData != null)
    {
        StringBuilder sb = new StringBuilder();

        foreach (string key in postData.Keys)
        {
            sb.AppendFormat("{0}={1}&", key, Text.UrlEncode(postData[key].ToString()));
        }

        if (sb.Length > 0)
        {
            string finalString = sb.ToString();
            Text.Chop(ref finalString);
            byte[] bytedata = Encoding.ASCII.GetBytes(finalString);
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.ContentLength = bytedata.Length;
            Stream requestStream = webRequest.GetRequestStream();
            requestStream.Write(bytedata, 0, bytedata.Length);
            requestStream.Close();
        }
    }

    try
    {
        return (HttpWebResponse)webRequest.GetResponse();
    }
    finally
    {

    }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:52:34.027

401 表示您遇到授权问题。鉴于您在请求中设置凭据，我猜这些是不正确的。例如，身份验证字段的值可能比您在代码中使用的值更容易接受。一种可以调试问题的方法是在浏览器中进行请求时检查请求标头中的内容（即，当它工作时）。您可以通过多种方式验证标头，即使用 Firefox 和 Firebug 插件来检查标头，或者您可以使用 wireshark。

# facebook - Facebook登录onlogin回调触发两次

> ID：11933598
> 
> 赞同：7
> 
> 时间：2012-08-13T11:41:28.880
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk

我正在尝试在网站上集成 facebook 登录。使用的代码：

```
<fb:login-button autologoutlink="true" scope="read_stream,publish_stream,offline_access,email,user_birthday,status_update,user_status,user_hometown,user_location" onlogin="checkFBLoginStatus();">Sign in with Facebook</fb:login-button> 
```

当用户已经登录facebook并点击此代码生成的按钮时，甚至会触发两次onlogin中指定的功能。

在 fbinit 我有

```
 status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true,  // parse XFBML
        oauth: true 
```

并且函数 checkFBLoginStatus 只包含一个警报语句

# coldfusion - 你应该用什么代替

> ID：11933602
> 
> 赞同：1
> 
> 时间：2012-08-13T11:41:45.313
> 
> 标签：coldfusion, coldfusion-9

我是 ColdFusion 的新手，我刚刚阅读了这个帖子，说有很多理由不使用 cflogin

[为什么人们不使用<CFLOGIN>？](https://stackoverflow.com/questions/604909/why-dont-people-use-cflogin)

我应该使用什么来代替 CFlogin？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T12:21:21.700

大多数开发人员推出自己的登录实现。它通常针对数据库中的加盐和散列记录启动用户名/密码检查。如果提供的凭据经过身份验证，则将用户对象（CFC 或结构）放入会话范围或构建并存储在具有到期日期/时间戳的数据库中，然后在每次请求时检索。用户对象将包含比 cflogin 提供的简单“角色”列表更多的信息。它可能包含多层安全（授权）信息，以及常用的值，如名字、姓氏和电子邮件地址。

cflogin 在引用的线程中没有讨论的一个优点是 cflogin 还可以与 ColdFusion 10 中的新 Web 套接字功能一起使用。但是，大多数时候，cflogin 非常有限，不能满足更复杂的应用程序的需求.

# javascript - IE中的Javascript命名空间抛出错误

> ID：11933604
> 
> 赞同：2
> 
> 时间：2012-08-13T11:41:58.923
> 
> 标签：javascript

在我的项目中，我为每个网页创建模块并添加到一个名为`View`：

**应用程序.js**

```
var View = (function()  {

    var View  = function()  {
        this.attributes = {
            baseUrl : '',
            urls : {}
        };
    };

    View.prototype.setUrl = function(url)   {
        this.attributes.baseUrl = url;
    };

    View.prototype.getUrl = function()  {
        return this.attributes.baseUrl;
    };

    return new View();

})(); 
```

**搜索视图.js**

```
var View = View || {};

var SearchView = View.SearchView = (function()  {

    var Private = {
        search : function(url)  {},
        loadSearchResult : function()   {},
        clearSearchForm : function()    {}
    };

    Private.search = function(url)  {
        ajax(url,...);
        this.loadSearchResult();
    };

    var SearchView = function() {
        this.settings = {};
    };

    SearchView.prototype.loadEventBindind = function()  {
        $(document)

        .on('click','#search-button', function()    {
            Private.search(View.baseUrl);
        })

        .on('click','#reset-search', function() {
            Private.clearSearchForm();
        });
    };

    return new SearchView();

})(); 
```

**搜索.html**

```
<script type="text/javascript" src="media/scripts/Modules/App.js"></script>
<script type="text/javascript" src="media/scripts/View/SearchView.js"></script>
<script type="text/javascript">
    View.setUrl('http://www.set.com/');
    View.SearchView.loadEventBindings();
</script> 
```

此代码在 Chrome 和 Firefox 中正常运行，但在 IE 中抛出错误：

> ' `View.SearchView`' 是`null`或不是一个对象

IE 不支持这种创建对象的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:13:22.530

你应该做几件事：

您的弱点在于您的 App.js 脚本可能会覆盖`View`由 SearchView.js 创建的对象。

*   不要将一个变量同时用作命名空间和类。这是反直觉的。
*   如果您已经在编写单例，则无需使用原型模式，尽管它没有任何问题。但是，您不会保存任何内存。

* * *

如果您坚持使用 View 作为类和命名空间，请进行此类更改以防止`View`被覆盖。

```
var View = View || {};
var ViewTmp;
$.extend(ViewTmp = (function()  {

    var View  = function()  {
    ...
  ...
})(), View);
View = ViewTmp; 
```

该脚本假定您使用的是 jQuery（因为`$.extend`方法）。

# html - 如何将元素定位在移动设备的 100% 高度内

> ID：11933617
> 
> 赞同：0
> 
> 时间：2012-08-13T11:42:44.150
> 
> 标签：html, css, mobile, touch, viewport

对于混合应用程序，我需要构建应用程序的 Web 部分。

我定义了 html 和 body 是 100% 的视口。我认为这是个好主意，但事实证明，当显示触摸键盘时，Android 会更改视口。因此它会调整页面上所有元素的大小。这不是我想要的行为。

是否可以根据设备高度在元素上定位和给出尺寸，而不受触摸键盘的干扰？

问题在这里显示[http://betapreview.nl/playground/overflow-table/index2.html](http://betapreview.nl/playground/overflow-table/index2.html)

**我所做的已经尝试过**

选项1

`<meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=no">`

示例：[http ://betapreview.nl/playground/overflow-table/index2.html](http://betapreview.nl/playground/overflow-table/index2.html)

选项 2

```
var theHeight = $(document).height();
$("#wrapper").css("height", theHeight); 
```

示例：[http ://betapreview.nl/playground/overflow-table/index3.html](http://betapreview.nl/playground/overflow-table/index3.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:49:47.247

您可以使用 jQuery 来执行此操作。只需在准备好的文档中添加以下内容：

```
var wantedHeight = $(window).height();
var wantedWidth = $(window).width(); 
```

然后，同样在准备好的文档中，使用 WantHeight 和 WantWidth 作为包装器大小的值，例如：

```
$('#wrapper').css('height', wantedHeight);
$('#wrapper').css('width', wantedWidth); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:56:04.937

通常我希望页面不具有 800 到 900 像素的页面宽度，因为 Android 和 iPhone 浏览器默认将其设置为。要使页面宽度与设备宽度相同，您可以尝试以下元标记：

```
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, height=device-height, user-scalable=no" /> 
```

顺便说一句，您可以通过[**android、iphone 的移动网站设计来做**](http://mobile-web-html.blogspot.in/)一些笔记。

# c - 这段 C 代码有什么问题？

> ID：11933619
> 
> 赞同：1
> 
> 时间：2012-08-13T11:42:53.403
> 
> 标签：c, strstr

我编写了一个 C 程序来对一些字符串进行分类。我使用 FILE 流来读取和写入文件。但是我发现了一个问题。通常它应该对字符串进行分类，但事实并非如此。我认为这段代码没问题，所以我找不到问题。请帮我。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    char line[80]; //create a string
    FILE *r_in = fopen("spooky.csv", "r"); // this is the source file
    FILE *w_ufo = fopen("ufo.txt", "w"); // strings with "UFO" will be written to here
    FILE *w_disapp = fopen("disappearance.txt", "w"); // strings with "Disappearance" will be written to here  
    FILE *w_others = fopen("others.txt", "w"); // others will be written to here

    while (fscanf(r_in, "%79[\n]\n", line) == 1)
    {
        if(strstr(line, "UFO")) // I think here is the problem (with strstr())
            fprintf(w_ufo, "%s\n", line);
        else if(strstr(line, "Disappearance"))
            fprintf(w_disapp, "%s\n", line);
        else
            fprintf(w_others, "%s\n", line);
    }

    fclose(w_ufo);
    fclose(w_disapp);
    fclose(w_others);

    return 0;
} 
```

源文件“spooky.csv”：

```
30.685163,-68.137207,Type=Yeti
28.304380,-74.575195,Type=UFO
29.132971,-71.136475,Type=Ship
28.343065,-62.753906,Type=Elvis
27.868217,-68.005371,Type=Goatsucker
30.496017,-73.333740,Type=Disappearance
26.224447,-71.477051,Type=UFO
29.401320,-66.027832,Type=Ship
37.879536,-69.477539,Type=Elvis
22.705256,-68.192139,Type=Elvis
27.166695,-87.484131,Type=Elvis 
```

我认为问题是strstr（），请告诉问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:44:56.160

问题出在`fscanf`. 你可能想要：

```
while (fscanf(r_in, "%79[^\n]\n", line) == 1)
                         ^ 
```

或者就像`fgets`Joachim Pileborg 评论的那样使用。

```
while (fgets(line, sizeof(line), r_in)) 
```

# ios - 如何阻止某人从 iPhone 设备中删除应用程序

> ID：11933622
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:42:57.787
> 
> 标签：ios, iphone, passwords

我正在开发一个应用程序，我需要我的应用程序不会被某人删除。如果有人想从 iPhone 中删除该应用程序，则会出现询问密码的弹出窗口。如果密码正确，则应用程序将被删除。

但我研究过，进入设备主屏幕上的设置应用程序，点击“常规”，向下滚动，点击“限制”，点击“启用限制”，创建一个四位密码并在出现提示时再次输入，然后将“删除应用程序”切换为关闭。

但此程序将适用于 iPhone 设备中的所有应用程序。但是如果我想用密码限制一个应用程序并且不被用户删除，那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:45:14.713

我认为您不能这样做，因为删除应用程序是由操作系统而不是由单个应用程序处理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:47:36.797

这种类型的功能可能会被滥用，迫使 iOS 用户安装某个应用程序。这可能就是为什么这个功能不存在的原因。就像亚伯拉罕提到的那样，iOS 处理删除。

# c# - 如何在不事先声明的情况下使用字典？

> ID：11933623
> 
> 赞同：0
> 
> 时间：2012-08-13T11:42:58.767
> 
> 标签：c#, dictionary

我可以很容易地使用一个字符串数组，而无需使用类似这样的东西提前声明它：

```
new string[]{"MyString1","MyString2"} 
```

并将其用作方法参数，而无需事先为其声明变量。但是我不能用`Dictionary<string,string>`. 我试过：

```
new Dictionary<string,string>(){"1","2"} 
```

和

```
new Dictionary<string,string>().Add("1","2"): 
```

以上都没有在编译方面起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T11:45:10.420

这样做

```
new Dictionary<string,string>(){{"Key1","Value1"},{"Key2","Value2"}}; 
```

每个 Dictionary 条目都是 Key 和相应值的组合。因此，第一个条目是`{"Key1","Value1"}`Key 所在的位置`"Key1"`，value所在的位置`"Value1"`等等。

> 并将其用作方法参数，而无需事先为其声明变量。但是我不能用字典正确地做到这一点。我试过 ：
> 
> ```
> new Dictionary<string,string>().Add("1","2"): 
> ```

这不能用于方法参数，因为`Add`方法不返回任何内容。它是一种无效的方法。

**深思熟虑：**你`new string[]{"MyString1","MyString2"}` 是一维数组`string[]`，而字典就像 string[x][2] ，其中 x 是字典的长度。（string[x][2] 仅用于表示目的。我知道它的非法声明）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T11:44:27.037

试试这个：

```
new Dictionary<string, string>() {
    { "1", "2" }, { "3", "4" }
}; 
```

您需要额外的括号来初始化字典所包含的键值对。这些括号基本上调用`Add()`，并且由于`Add()`需要两个参数（键和值），因此您将两个项目放在这些括号内。

此方法可用于`Add()`方法采用多个参数的任何 Collection。

有关对象和集合初始化程序的更多信息，请参见此处：http:
[//msdn.microsoft.com/en-us/library/bb384062.aspx](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

或者，关于初始化字典：http:
[//msdn.microsoft.com/en-us/library/bb531208](http://msdn.microsoft.com/en-us/library/bb531208)

# sql-server - 函数中带有临时表的 CTE

> ID：11933625
> 
> 赞同：0
> 
> 时间：2012-08-13T11:43:09.937
> 
> 标签：sql-server, common-table-expression

```
Create FUNCTION [dbo].[GetAllChildSpaces] 
(
    @CustomSpaceId varchar(40),
    @Userid int 
)
RETURNS NVARCHAR(MAX)
AS
BEGIN   
    DECLARE @Totalspace NVARCHAR(MAX)
    DECLARE  @tblTotalSpace table (CustomSpaceId NVARCHAR(40))

    WITH Hierachy (CustomSpaceId) AS 
     ( 
     SELECT  CustomSpaceId FROM  CV_CustomSpace e 
     UNION ALL 
     SELECT  e1.CustomSpaceId FROM  CV_CustomSpace e1 INNER JOIN Hierachy p  ON e1.ParentID = p.CustomSpaceId 
     ) 

  INSERT INTO @tblTotalSpace (CustomSpaceId)

  SET @Totalspace=( 
      SELECT STUFF((SELECT ',' + CAST(CustomSpaceId as varchar(50)) 
      FROM @tblTotalSpace FOR XML PATH('')) ,1,1,'') AS TotalSpaceID
  )

  DROP TABLE @tblTotalSpace

  return @Totalspace  
 END 
```

我收到一个错误：

> 关键字附近的语法不正确`'with'`。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。

任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:46:48.117

用分号结束前面的语句

```
Create FUNCTION [dbo].[GetAllChildSpaces] ( @CustomSpaceId varchar(40), @Userid int ) RETURNS NVARCHAR(MAX) AS BEGIN
DECLARE @Totalspace NVARCHAR(MAX) 
DECLARE @tblTotalSpace table (CustomSpaceId NVARCHAR(40)); -- Here

WITH Hierachy (CustomSpaceId) AS 
... 
```

为了一致性和清晰性，用分号结束所有语句并没有什么坏处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:47:11.773

在 WITH 前放一个分号

```
;with  Hierachy (CustomSpaceId) AS 
 ( ............. 
```

# jquery - Access-Control-Allow-Origin 标头不起作用 - 我做错了什么？

> ID：11933626
> 
> 赞同：17
> 
> 时间：2012-08-13T11:43:11.537
> 
> 标签：jquery, http, http-headers, cors, http-options-method

我正在尝试使用 Access-Control-Allow-Origin 标头提供对 HTTP OPTIONS 方法的响应，该标头复制请求中 Origin 标头的内容。

由于我无法弄清楚的原因，这显然不起作用。

**tl;博士：** 选项的回应说：

```
Access-Control-Allow-Origin: http://10.0.0.105:9294 
```

随后的 GET 有：

```
Origin:http://10.0.0.105:9294 
```

铬 说：

```
Origin http://10.0.0.105:9294 is not allowed by Access-Control-Allow-Origin 
```

*不是吗？*

更多详情...

通过查看 Chrome 的开发者工具窗口，请求标头是：

```
OPTIONS /user/kris HTTP/1.1
Host: 10.0.0.104:8080
Connection: keep-alive
Access-Control-Request-Method: GET
Origin: http://10.0.0.105:9294
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.75 Safari/537.1
Access-Control-Request-Headers: origin, x-requested-with, content-type, accept
Accept: */*
Referer: http://10.0.0.105:9294/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

响应头是：

```
HTTP/1.0 200 OK
Date: Mon, 13 Aug 2012 11:23:45 GMT
Server: WSGIServer/0.1 Python/2.7.3
Content-Length: 0
Access-Control-Allow-Methods: GET, PUT, POST, DELETE, HEAD, OPTIONS
Access-Control-Max-Age: 10
Access-Control-Allow-Origin: http://10.0.0.105:9294
Access-Control-Allow-Headers: X-Requested-With, Authorization, X-Huzu-User, Content-Type, Accept
Content-Type: text/html; charset=UTF-8 
```

在 jQuery 发送其 OPTIONS 请求并获得上述响应后，发生了 2 件奇怪的事情。OPTIONS 响应（即 200）在开发者控制台中显示为错误：

```
OPTIONS http://10.0.0.104:8080/user/kris 200 (OK) 
```

之后 GET 请求被拒绝。控制台中的错误：

```
XMLHttpRequest cannot load http://10.0.0.104:8080/user/kris. Origin http://10.0.0.105:9294 is not allowed by Access-Control-Allow-Origin. 
```

我不明白为什么不。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-14T11:42:17.960

好的，我想我明白了。似乎有必要正确处理飞行前的 OPTIONS 请求，但**不足以**使跨站点资源请求正常工作。

在 OPTIONS 请求返回令人满意的标头后，对同一 URL 的任何后续请求的所有响应*也*必须具有必要的“Access-Control-Allow-Origin”标头，否则浏览器会吞下它们，甚至不会显示在调试器窗口中。

所以*看起来*浏览器因为 OPTIONS 响应中的一些问题而取消了请求，但实际上，浏览器正在查看来自真实请求的响应标头，然后拒绝它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-22T11:22:04.937

**您还应该添加`Access-Control-Allow-Methods`标题以及`Access-Control-Allow-Origin`**

对于通配符，访问添加下面的标题

```
 res.header("Access-Control-Allow-Origin", "*");
   res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
   res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS'); 
```

对于允许的任何特定来源，将其添加到 *.

# hex - 如何从十六进制代码“构建”文件？

> ID：11933628
> 
> 赞同：1
> 
> 时间：2012-08-13T11:43:18.947
> 
> 标签：hex

我在这方面完全是菜鸟，

但假设我有以下十六进制代码，我知道它是一个 png 文件，通过将其转换为 Ascii：

89 50 4e 47 0d 0a 1a 0a 00 00 00 0d 49 48 44 52 00 00 00 c8 00 00 00 c8 01 03 00 00 00 97 96 3c dd 00 00 00 06 50 4c 03 0 45 ff 0 5 c 2 ff 7e 00 00 00 f8 49 44 41 54 58 85 ed 96 31 12 84 20 0c 45 e3 50 6c e9 11 3c 8a 47 83 a3 71 14 8f 60 69 e1 90 fd 01 66 15 d7 4d 4d 76 f8 c 4 9f 10 a2 ae 2e cb 9a 58 b4 cc 08 db 98 d7 ab 05 12 11 46 90 01 64 c1 fa 65 83 78 ·· f1 08 11 2f 20 da 22 39 1f 63 64 0e e4 4c 92 e2 9d 90 e4 aa 07 49 ad c6 90 dc 8f 3a d5 48 aa d0 43 76 ba 95 4a 82 7c c8 95 ce 27 c2 7a b5 40 a2 27 b7 22 1f b8 86 17 df 76 3e b5 04 42 35 72 a4 fc cc b7 de 4b 66 ···· ab 0d bf 24 1d 1f 68 26 13 87 01 75 4a 75 ff 9b 0a d6 4b 3e 59 e5 3a bd 78 47 2d a9 3d 31 67 02 c7 27 77 ed 96 3a 49 a4 72 fe e2 9d ef 93 e9 41 52 a6 8d ea 0d 9c 35 64 88 f8 7c e7 e9 90 01 22 73 88 f4 eb e1 3c fb 6b 26 54 a7 27 d9 7f 7f ee 7c9a 49 a9 46 cc a3 c8 87 1b c7 2b 26 5d 5d ff a6 37 a5 e6 4e bb 4f 77 cf e7 00 00 00 00 49 45 4e 44 ae 42 60 82

.. 是未知的十六进制代码（在这个阶段）。

和 ascii 输出：

�PNG

���� IHDR��������������<Ý���PLTEÿÿÿ���UÂÓ… EãPlé<�G�£q�`iá�ýf×MvøED�Á�¢®.Ë �...Ú"9cdäL�â��ärçªIÆ�Ü�:ÕHªÐCvº�J�|È�Î'...¿$h&�uJuÿ� ÖK>Yå:½xG-©=1gÇ'wí�:I¤rþH>â�ï �éAR¦�ê �5d�ø|çé�"s�ôëá<ûk&T§'Ùî|�I©FÌ£È�Ç…</p>

如何根据这些信息构建可打开的文件（或至少部分可打开）？另外，有没有办法向后确定丢失的十六进制代码必须是什么？你可能需要慢慢解释，我是一个初学者。

任何有关学习 ascii - 十六进制 - 十进制 - 二进制编码 - 文件类型和加密的好资源也将不胜感激......

（这和最近的TF2 ARG有关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:56:29.683

简单的 C 程序

```
 #include <stdio.h>

  FILE *stream;

  int main( void )
    {    
       char s[3]={0};  

       if( fopen_s( &stream, "hex.txt", "r" ) != 0 )
          printf( "The file fscanf.out was not opened\n" );
       else
       {
          fseek( stream, 0L, SEEK_SET );
          while (fscanf(in_fd, "%s", s) != EOF) 
          {printf("%c",strtol((s,s+3,16));}   

          fclose( stream );
       }
    } 
```

# c# - 更改 UltraWinGrid 中的列类型

> ID：11933629
> 
> 赞同：0
> 
> 时间：2012-08-13T11:43:25.370
> 
> 标签：c#, winforms, infragistics, ultrawingrid

我有一个带有 2 列的超翼网格。要求是在右键单击任何单元格时打开带有“复制”选项的上下文菜单。然后用户可以选择“复制”，然后应该复制单元格内容。

我已经有一个扩展类“标签”的“扩展标签”类。该标签具有与上述相同的功能；不同之处在于右键单击发生在标签上。

问题是; 如何将此 ExtendedLabel 集成为 ultrawingrid 的列数据类型？这是我尝试过的：

```
public class Content
{
    public Content()
    {
        Item = new ExtendedLabel();
        Value = new ExtendedLabel();
    }

    ExtendedLabel Item = new ExtendedLabel();
    ExtendedLabel Value = new ExtendedLabel();
}

Content a = new Content();
a.Item.Text = "Item1";   // The ExtendedLabel has a property called "Text"
a.Value.Text = "Value1";

Content b = new Content();
a.Item.Text = "Item2";
a.Value.Text = "Value2";

List<Content> contents = new List<Content>();
contents.Add(a);
contents.Add(b);

ultrawingrid.DataSource = contents; 
```

现在网格是这样的。

```
Item                            Value
-------------------------------------------------------------
{ExtendedLabel, Text: Item1}    {ExtendedLabel, Text: Value1}
{ExtendedLabel, Text: Item2}    {ExtendedLabel, Text: Value2} 
```

而我想要的是：

```
Item     Value
---------------
Item1    Value1
Item1    Value1 
```

除了所有这些，我这样做是否正确？这是这里最好的方法吗？如果没有，那怎么办？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:09:14.853

最好的方法是将网格绑定到公开所需属性的数据对象。例如，您可以有以下类：

```
public class DataItem
{
  public string Item {get;set; }
  public string Value {get;set;}
} 
```

然后创建一个列表并将其绑定到网格，因为网格将为每个公共属性创建一个列，因此您将在网格中获得您期望的值。请注意，如果列表可以更改并且网格需要更新以响应这些更改，则应使用 BindingList 而不是 List。

默认情况下，网格将允许编辑值，并且您将在与键盘一起使用的网格中内置复制和粘贴行为。帮助中有一个[示例](http://help.infragistics.com/NetAdvantage/WinForms/Current/CLR2.0/?page=WinGrid_Creating_an_Edit_Menu_with_Clipboard_Operations_for_WinGrid.html)，显示了如何在应用程序中拥有一个可与 WinGrid 一起使用的编辑菜单。

如果网格的复制和粘贴功能满足您的需求，您可以为网格本身公开一个上下文菜单，该菜单公开这些相同的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:02:04.267

未经测试，但我认为网格绑定到您班级的公共成员。
如果可行，请将内部标签的可见性更改为私有，并将 Item 和 Value 作为两个内部标签的文本公开。

```
public class Content 
{ 
    public Content() 
    { 
        Item = new ExtendedLabel(); 
        Value = new ExtendedLabel(); 
    } 

    private ExtendedLabel internal_Item = new ExtendedLabel(); 
    private ExtendedLabel internal_Value = new ExtendedLabel(); 

    public string Item
    { 
        get{return internal_Item.Text;}
        set{internal_Item.Text = value;}

    }
    public string Value
    { 
        get{return internal_Value.Text;}
        set{internal_Value.Text = value;}
    }
} 
```

# linux - 如何在 Kcachegrind 中查看源代码

> ID：11933632
> 
> 赞同：2
> 
> 时间：2012-08-13T11:43:40.017
> 
> 标签：linux, qt, memory, callgrind

我已经能够从终端分析我的程序的 callgrind 详细信息......

但是，当我想使用“KcacheGrind”查看图形工具中的结果时......我无法访问默认情况下应该在 Source_Code 选项卡下可用的 mysource 代码。

谁能指出需要做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-30T11:52:41.930

对我来说，分析 php 并使用 kcachegrind（版本 0.7kde），我转到 [settings] -> [Configuration] -> [Annotations] 然后添加一个文件夹，其中包含我运行测试的代码的精确副本（或如果您可以从运行 kcachegrind 的机器访问代码的实际位置）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T15:21:59.543

您需要在启用调试信息的情况下进行构建，并在该位置提供可用的资源，它们是在构建期间。AFAIK，这可以配置，但默认情况下源应该在同一个位置，所以如果你在不同的机器上构建，你应该把它们放在构建机器上。

# iphone - 在.m文件中构造头文件？

> ID：11933633
> 
> 赞同：0
> 
> 时间：2012-08-13T11:43:44.437
> 
> 标签：iphone

嗨，我正在通过网络上的示例代码学习 IOS 编程。我发现这段代码有些奇怪，因为它们已经有了 h.file，但在 m.file 中也有 h.file 代码。

```
 @interface Manager : NSObject {
}

+(void) goMenu; 
```

这是h。文件

```
#import "Manager.h"

@interface Manager ()
+(void) go
+(void) wrap
@end

@implementation Manager
.... 
```

这是 m.file 的开头。

对于像我这样的初学者，这种情况让我很困惑。请有人解释一下发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:48:25.187

`@interface Manager ()`在实现文件中称为[类扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW2)。

这通常用于添加开发人员希望保持私有的方法、属性等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:49:36.680

您在 .m 文件中看到的是类扩展名。[您可以在此处](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)阅读有关类扩展和类别的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T11:47:43.183

`@interface Manager ()`文件中的`.m`主要用于声明私有方法和属性。

.h 中声明的每一件事都是（大部分）公共方法和属性。但有时您希望拥有不公开可见的方法和属性。

请注意，使用objective-c您仍然可以调用这些方法和属性，编译器将发出警告，称调用此类方法可能无法正常工作，因为调用可能无法响应这些方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T11:48:10.377

.h 文件中的所有函数也可能对其他类感兴趣。这些是每个人都可以看到的公共界面。其他类文件可以#import .h 文件，因此知道所有公共函数。

另一方面，.m 文件中的函数是私有接口。直到最近，所有方法都必须在使用之前声明（也可以很方便地进行快速概览）。通过使用此构造，开发人员在 .m 文件的开头声明了方法的存在，以便可以在整个文件中使用它们。由于 .m 文件不会被导入/包含在其他文件中，因此它们本身在外部是不可见的。

但请注意，此机制不是由任何类型的安全机制强制执行的，并且可以在选择时被覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T11:48:23.620

.m 文件中的接口被视为私有接口，`Manager`在其他类中引用您的类时不会显示。

但是，我相信只要不在 ( 和 ) 之间添加“Private”，就可以从其他类调用它们。（制作它`@interface Manager (Private)`）......但你会得到一个警告，类 Manager 可能不会实现这样一个名为`wrap`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T12:06:45.667

这是一个**类扩展**。它可以用来有私有方法，也可以有实例。这里是[链接](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)，它给你更多的细节。

# javascript - jQuery - 停止以前的函数继续运行

> ID：11933635
> 
> 赞同：0
> 
> 时间：2012-08-13T11:43:48.970
> 
> 标签：javascript, jquery, jquery-ui, function

我有一个函数，当用户输入数据以设置里程表时调用（计数器变量中脚本的底部）。如果用户想要更改任何字段，他们只需在表单中输入一些新数据，里程表就会重置并重新启动。

我遇到的问题是以前的功能（jOdometer）仍在使用以前的数据以及新设置的里程表运行。如何停止以前的功能运行并重新启动？

我希望我能做到以下...

```
 $(function(){

        var counter;

        $('#submit').click(function(){

            if(counter != undefined){
                counter.stop();
            }

            // get values from user.
            var counter_start = 0;
            var counter_end = 0;
            var increment = 0;
            var delayTime = 0;
            var speed = 0;
            var extraDigits = [];

            if($('#counter_end').length > 0){
                 counter_end = $('#counter_end').val();
            }else{
                counter_end  = false;
            }
            if($('#counter_start').length > 0){
                counter_start = $('#counter_start').val();
                if(counter_end.length > counter_start.length){
                    for(i=counter_start.length+1; i<=counter_end.length; i++){
                        extraDigits = '0' + extraDigits;
                    }
                    if(extraDigits.length > 0){
                        counter_start = extraDigits + counter_start
                    }
                }
            }else{
                counter_start = 1;
            }
            if($('#increment').length > 0){
                increment = $('#increment').val(); 
            }else{
                increment = 1;
            }
            if($('#delay_time').length > 0){
                delayTime = $('#delay_time').val(); 
            }else{
                delayTime = 500;
            }
            if($($('#delay_time')).length > 0){
                delayTime = $('#delay_time').val();
            }else{
                delayTime = 1000;
            }

            counter = $('.counter4').jOdometer({
                counterStart: String(counter_start),
                counterEnd: String(counter_end),
                delayTime: parseInt(delayTime),
                increment: parseInt(increment),
                speed: parseInt(speed),
                    formatNumber: true,
                spaceNumbers: 0,
                widthDot: 10
            });
        })

    }); 
```

然而不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:59:21.907

您可以使用 `event.stopPropagation();`停止运行事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T23:11:07.570

jOdometer 似乎只有一种`.goToNumber()`方法 - no`.stop()`或`destroy()`。

我认为唯一可行的方法是用新的 DOM 元素替换里程表，然后对其进行初始化。

尝试这个：

```
$(function() {
    var c = $('#counter4').hide(),
        counter;
    $('#submit').click(function(){
        var counter_start = parseInt($('#counter_start').val()) || 1;
        var counter_end = parseInt($('#counter_end').val()) || 0;
        var counter_start_digits = counter_start.toString().length;
        var counter_end_digits = counter_end.toString().length;
        var padding = [];
        if(counter_end_digits > counter_start_digits) {
            for(var i=counter_start_digits+1; i<=counter_end_digits; i++) {
                padding.unshift('0');
            }
        }
        if(counter) {
            counter.remove();
        }
        counter = c.clone().insertAfter(c).show().jOdometer({
            counterStart: padding.join('') + counter_start,
            counterEnd: counter_end || false,
            delayTime: parseInt($('#delay_time').val()) || 1000,
            increment: parseInt($('#increment').val()) || 1,
            speed: 0,
            formatNumber: true,
            spaceNumbers: 0,
            widthDot: 10
        });
    });
}); 
```

*未经测试*

# python - PyQt 许可证说明

> ID：11933636
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:43:50.123
> 
> 标签：python, licensing, pyqt

我们正在开发一个免费的应用程序作为我们音乐网站的桌面版本。我们打算在未来晚些时候从用户订阅中赚取收益。我们需要购买 PyQt 的许可证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:21:11.167

如果您的软件是根据 GPL 发布的，则无需购买许可证。

# php - 视频托管 MP4 压缩

> ID：11933638
> 
> 赞同：5
> 
> 时间：2012-08-13T11:44:08.907
> 
> 标签：php, video, compression

我正在尝试在我的网站上添加三个视频。我正在使用 jw 播放器。它可以工作，但一个简单的十秒视频 (3MB) 需要超过一分钟才能加载。我以为这是我的托管服务的问题，但我尝试上传另一个在互联网上建立的类似格式的视频，比我的视频长（22MB），它会在几秒钟内加载！

我正在使用 Avidemux 将 .avi（MPEG4、9280 Kbps、640X480、25 fps、273 MB、4 分钟、无音频）视频剪切并转换为 .MP4（H264、2900 Kbps、640X480、25 fps、3.64 MB , 10 秒，无音频）视频。我尝试更改格式压缩，并降低比特率，但负载没有改善。

在线创建的视频是 .MP4（H264, 1621 Kbps, 960x540, 25 fps, 22.1 MB, 30 秒，AAC 48Khz 音频）。它加载速度快，没​​有问题。

我哪里错了？我不明白在编码期间是否必须提供一些设置以适应我的视频网页。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T12:06:34.980

理想情况下，您应该使用流媒体服务器来流式传输您的视频。您可以通过在常规 HTTP 服务器中使用“渐进式下载”来解决它。为了使其正常工作，您需要以特殊方式准备视频。通常，当您对 mp4 视频进行编码时，视频的元数据位于视频文件的末尾。因此，播放器需要下载整个 mp4 文件才能读取元数据并开始播放视频。

您需要使用一个程序，例如`qt-faststart`，将元数据重新定位到 mp4 文件的开头。然后播放器可以在视频开始下载后立即开始播放视频，而无需等待整个视频下载完成。

本质上，一旦你有了你的 mp4 文件，然后运行

```
qt-faststart yourvideo.mp4 outputvideo.mp4
mv outputvideo.mp4 yourvideo.mp4 
```

（这是假设你在一个类似unix的平台上）。Windows 上的命令会略有不同，但想法是一样的。完成此操作后，您的视频应该会按预期播放。

在谷歌或任何地方搜索`qt-faststart`。

# php - php.net 手册中的 mail()：“to”和“to-header”之间的区别

> ID：11933645
> 
> 赞同：7
> 
> 时间：2012-08-13T11:44:51.810
> 
> 标签：php, email, html-email, email-headers

在 php.net 示例中`mail()`，使用了两个不同的地址`$to`以及附加的标头信息“To: ...”：

```
<?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

$subject = 'Birthday Reminders for August';

// message
$message = '<html> ... </html>';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

所以我的问题是：你需要提供`$to`的语法`mail()`，但是你不能使用格式`Name <email@domain.com>`，这你只能在附加的头信息中做，对吧？

那么首先，为什么 php.net 上的示例将邮件发送给 4 个不同的人（因为他们使用不同的电子邮件地址`$to`和标题信息），这真的让我很生气！？

其次，如果我只想将邮件发送给 1 人（并且只有 1 次）并且我想使用 format `Name <email@domain.com>`，我应该怎么做？使用它`$to`以及标题信息？那么这个人会收到两次电子邮件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:32:56.050

建议您使用[PHP Mailer](https://github.com/PHPMailer/PHPMailer "PHP 邮件程序")类而不是内部**mail()**函数。[使用PHP Mailer](https://github.com/PHPMailer/PHPMailer "PHP 邮件程序")有几个原因：

*   使用自己的**smtp的能力**
*   更好的机会**不在垃圾邮件中列出** *（主要原因）*
*   **易于**使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:10:51.333

$to-Parameter 描述了信封收件人（谁会收到邮件）。to-Header 基本上是用于电子邮件应用程序以显示谁收到了邮件。

Mail-Envelope 不知道 To、Cc 或 BCc；他们都是接受者。

Mail-Headers 是为了让收件人知道谁也收到了邮件。

一些邮件服务器将邮件发送到所有给定的地址（包括：$to 和 to-header），一些忽略 to-header。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:18:37.753

您不需要指定 to 标头。在 $to 变量中设置名称也可以。

如下：

```
$to = 'Name <email@address.tld>';
$message = 'Message';

$subject = 'Subject';

mail($to,$subject,$message); 
```

# database - 如何使用“包含所有”选项对多对多进行建模

> ID：11933648
> 
> 赞同：0
> 
> 时间：2012-08-13T11:45:02.060
> 
> 标签：database, database-design

假设我有许多自定义报告类型。一种报告类型可以与多个文件扩展名选项（pdf、excel 等）相关联，该特定自定义报告类型的每个文件扩展名都有一些可以使用的法律行动（例如，对于具有 pdf 扩展名的报告类型 A，我可以保存，打印和修改）。但是，报告扩展之间的法律行为大多相同，只有极少数情况下它们会有所不同。你会如何模拟这种关系？

如果我还希望自定义报告类型应该具有所有扩展类型和每个扩展类型的相同操作的选项，您是否会引入一些“神奇值”，例如扩展类型 * 表示此报告类型应该包括所有可用的扩展类型使用一组基本的法律行动，或者您是否会简单地使用所有扩展类型、法律行动等手动填充关系，并记住在引入新的扩展类型时更新它们？不过，这并不常见。

希望这个问题有点清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:50:51.707

我确实很难回答这个问题，但我认为你是在说：

一种报告类型具有一个或多个文件扩展名。

文件扩展名具有一个或多个允许的操作。

许多文件扩展名共享同一组允许的操作。

如果这就是您所说的，我将介绍“permissionSet”的概念，它与单个权限具有多对多的关系。文件扩展名与权限集具有多对多关系。

# java - 使用 http 组件解析 http 请求服务器端

> ID：11933652
> 
> 赞同：2
> 
> 时间：2012-08-13T11:45:11.810
> 
> 标签：java, android, http-request

嗨，我正在自学android开发。首先，我使用apache http utils在android上实现了一个网络服务器，当`localhost:8080`在模拟器上浏览时它会提供一个登录页面。

我想知道如何在 android 服务器端解析登录请求。此 Web 服务器根据请求的 Uri 动态提供内容。假设登录页面提交时，表单将发布到 /login.do，在`localhost:8080`.

我已经为该操作注册了一个处理程序，如下所示。我想知道是否有一种方法可以在我的处理程序中解析请求主体并提供`html`相应的服务。我在表单中只有一个字段可以解析`password`。我只能得到就阅读请求标头而言。

任何正确方向的想法或指示将不胜感激。谢谢

```
import java.io.BufferedInputStream;  
import java.io.ByteArrayOutputStream;  
import java.io.IOException;  
import java.io.InputStream;  
import java.io.OutputStream;  
import java.io.OutputStreamWriter;  

import org.apache.http.HeaderElement;  
import org.apache.http.HeaderElementIterator;  
import org.apache.http.HttpEntity;  
import org.apache.http.HttpException;  
import org.apache.http.HttpRequest;  
import org.apache.http.HttpResponse;  
import org.apache.http.NameValuePair;  
import org.apache.http.entity.ContentProducer;  
import org.apache.http.entity.EntityTemplate;  
import org.apache.http.message.BasicHeaderElementIterator;  
import org.apache.http.protocol.HttpContext;  
import org.apache.http.protocol.HttpRequestHandler;  

import android.content.Context;  

public class LoginHandler implements HttpRequestHandler {  
    private Context context = null;  
    String req;  
    public LoginHandler(Context context) {  
        this.context = context;  
    }  

    @Override  
    public void handle( final HttpRequest request, HttpResponse response,  
            HttpContext httpcontext) throws HttpException, IOException {  
        HttpEntity entity = new EntityTemplate(new ContentProducer() {  
            public void writeTo(final OutputStream outstream ) throws IOException {  
                String resp;  

            OutputStreamWriter writer = new OutputStreamWriter(outstream, "UTF-8");     
            HeaderIterator it = request.headerIterator();
            while (it.hasNext())
            {
                System.out.println(it.next());
            }
                if (validateUser()==true)  
                    resp = "<html><head></head><body><h1>Home<h1><p>Success."+req+"</p></body></html>";  

                else{  
                    resp="<html><head></head><body><h1>Home<h1><p>Login Failed.</p></body></html>";}  
                writer.write(resp);  
                writer.flush();  
            }  

        });  
        response.setHeader("Content-Type", "text/html");  
        response.setEntity(entity);  

    }  
    boolean validateUser(){  
        boolean valid=false;  
        //if valid  valid=true else valid=false  
        return valid;  
    }  

} 
```

输出如下：

```
 08-15 15:54:22.112: I/Process(650): Sending signal. PID: 650 SIG: 9
08-15 15:54:27.532: I/HTTPSERVICE(662): Creating and starting httpService
08-15 15:54:27.542: I/Notification(662): Notification Shown
08-15 16:08:19.332: I/HTTPSERVICE(662): Destroying httpService
08-15 16:08:19.352: I/Notification(662): Notification Destroyed
08-15 16:20:14.852: I/HTTPSERVICE(690): Creating and starting httpService
08-15 16:20:14.862: I/Notification(690): Notification Shown
08-15 16:20:28.102: D/dalvikvm(690): GC freed 2292 objects / 135976 bytes in 157ms
08-15 16:20:28.872: I/Resources(690): Loaded time zone names for en_US in 3090ms.
08-15 16:20:28.882: I/global(690): Default buffer size used in BufferedReader constructor.     It would be better to be explicit if an 8k-char buffer is required.
08-15 16:20:35.302: I/System.out(690): Host: localhost:8080
08-15 16:20:35.382: I/System.out(690): Accept-Encoding: gzip
08-15 16:20:35.422: I/System.out(690): Referer: http://localhost:8080/
08-15 16:20:35.422: I/System.out(690): Accept-Language: en-US
08-15 16:20:35.442: I/System.out(690): User-Agent: Mozilla/5.0 (Linux; U; Android  2.1-update1; en-us; sdk Build/ECLAIR) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17
08-15 16:20:35.472: I/System.out(690): Origin: http://localhost:8080
08-15 16:20:35.512: I/System.out(690): Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
08-15 16:20:35.533: I/System.out(690): Content-Type: application/x-www-form-urlencoded
08-15 16:20:35.562: I/System.out(690): Accept-Charset: utf-8, iso-8859-1,utf-16,*;q=0.7
08-15 16:20:35.599: I/System.out(690): Content-Length: 25 
```

我在 apache 网站上找不到任何适用于我的案例的资源。是否可以直接从 url 读取 requestbody？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:36:40.997

环顾四周后，我找到了解决方案。在句柄方法中添加以下内容就可以了。感谢原始海报。[http://www.androiddevblog.net/android/a-bare-minimum-web-server-for-android-platform](http://www.androiddevblog.net/android/a-bare-minimum-web-server-for-android-platform)

```
 if (request instanceof HttpEntityEnclosingRequest) {
    HttpEntity entity = ((HttpEntityEnclosingRequest) request).getEntity();
    if (entity != null) {
    Log.v("RequestBody", EntityUtils.toString(entity, "UTF-8"));
    entity.consumeContent();
    }
    } 
```

# asp.net-mvc - ASP MVC 3，UTF-8 HTML 字符集不显示波兰字符。（剃刀）

> ID：11933657
> 
> 赞同：2
> 
> 时间：2012-08-13T11:45:22.527
> 
> 标签：asp.net-mvc, razor, utf-8, character-encoding

正如标题所说。故事是，我已经改变了我的 _Layout.cshtml 页面的元标记：

```
<meta charset="utf-8" /> 
```

至

```
<meta content="text/html; charset=utf-8"> 
```

影响？页面上没有波兰语字符。好的，让我们还原更改。影响？页面上没有波兰语字符。

顺便说一句，它只影响 _Layout.cshtml，所有其他视图都正确显示波兰字母。正确的字母被“Ĺ‚”字符替换。

有任何想法吗？想换个浏览器，还是不行。同样的事情发生在不同的计算机上。

没有进行其他更改。尝试将项目从存储库还原为旧版本，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:35:01.557

在笔记本中打开并使用 UTF-8 编码集再次保存。工作。

# javascript - IE 占位符的 Javascript 修复中的错误

> ID：11933658
> 
> 赞同：0
> 
> 时间：2012-08-13T11:45:24.347
> 
> 标签：javascript, jquery, internet-explorer, validation

我最近[编写了一个](http://plus-wuustwezel.be/index.php?page=lid-worden)带有[JQuery Validation](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)的表单。因为我`placeholder`在输入字段中使用了该方法，而 IE 并不完全支持这些方法，所以我使用了一个[补丁](http://www.plus-wuustwezel.be/includes/js/placeholder.js)来正确显示 IE 中的占位符。

一切正常，但是当您在 IE 中打开网站时，您会看到我打开页面时立即激活了 JQuery 验证，这显然不是重点。所以我认为这是某种错误。我查看了 .js 文件，但我的 JS 技能不太好，所以我想知道这个错误可能是什么......
有想法的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:15:19.993

```
<input type="text" placeholder="abc"/> 
```

jQuery：

```
$( function() {
  $('[placeholder]').on({

  focus: function() {
    if( $(this).val() == $(this).attr('placeholder') ) {
       $(this).val(''); 
    } 
  },

  blur: function(){
      if( !$(this).val() ) {
          $(this).val( $(this).attr('placeholder') );
       }

   } 

 } ).each( function() {
        $(this).val( $(this).attr('placeholder') ) ;
  } );
}); 
```

要运行它：

```
<html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">         </script>
    <script type="text/javascript"> 
      //script from above;
    </script>
    </head>
    <body>
      <input type="text" placeholder="abc"/>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:53:07.150

我如何处理 IE？：

*   使用条件注释加载ie.js和ie.css
*   在这些文件中，您可以解决开发过程中可能出现的一些问题。

我的建议是，如果您使用的是 jQuery，您可以创建一个 jquery 插件并使用类名`placeHolder();`调用它：`inputs``placeholder`

```
jQuery.fn.placeHolder=function(){
    return this.each(function(){
        var a=$(this).attr("value");

        $(this).focus(function(){
            if($(this).attr("value")==a){
                $(this).attr("value","");
            }}
        );

        $(this).blur(function(){
            if($(this).attr("value")==""){
                $(this).attr("value",a);
            }
        });

    });
};

$('input.placeholder').placeHolder();
​ 
```

[看看jsfiddle](http://jsfiddle.net/SsPwL/)

# redirect - OpenAM 登录重定向后自定义 URL 参数丢失

> ID：11933659
> 
> 赞同：0
> 
> 时间：2012-08-13T11:45:26.307
> 
> 标签：redirect, parameters, goto, agent, openam

我正在使用 OpenAM 对我的应用程序进行身份验证。我使用这样的 URL 访问我的应用程序：

```
http://my.company.com/appfolder/appservlet?lang=EN&user=test 
```

首次访问时，OpenAM 代理会捕获 URL 并使用此重定向 URL 将我的浏览器重定向到身份验证页面：

```
...openam/UI/Login?goto=http%3A%2F%2Fmy.company.com%3A8080%2Fappfolder 
```

正确身份验证后，我最终被重定向到以下 URL：

```
http://my.company.com/appfolder 
```

这是逻辑，因为这是 goto 参数中引用的 URL。但它与原来的不一样：缺少 servlet 和自定义参数（语言和用户）。

知道如何配置我的代理以使其在重定向后保留 servlet 和参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:04:40.117

查看教程“使用 OpenAM 向网站添加身份验证”的[这一步](https://wikis.forgerock.org/confluence/display/openam/3+OpenAM+Server+Configuration)。

在“创建访问策略”->“通配符匹配”部分是您的答案：

> 策略 URL 中的通配符 * 与“?”不匹配。因此，如果您希望允许提交 GET 参数，则需要针对 [http://webserver.example.com/](http://webserver.example.com/) *?* 的第二个策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:30:32.437

感谢您的回答。正如我之前的评论中提到的，添加新政策并不能解决我的问题。实际上，我不确定策略如何解决问题，因为`goto`参数是由 J2EE 代理生成的，它在应用策略之前起作用（据我所知......我可能错了）。

无论如何，我可以通过重新编译 J2EE 代理来解决我的问题：我已经构建了一个`agent.jar`基于 v3.0.3 的新代理，可在 forgerock 获得。然后我用`AmFilterRequestContext.class`一个新的替换了，建立在这里可用的源代码：http: [//www.docjar.com/html/api/com/sun/identity/agents/filter/AmFilterRequestContext.java.html](http://www.docjar.com/html/api/com/sun/identity/agents/filter/AmFilterRequestContext.java.html)

有了这个新代理，我`goto`的现在是正确的，并且重定向效果很好（而且我不必定义任何策略）。

奇怪的是，我不明白为什么它现在起作用了！我找不到上面提到的 java 源代码和原始类的未编译版本之间的任何区别！我只是添加了一些`System.out.println`来获取变量值和函数结果，并构建了 jar。重新启动我的jboss后，这`goto`是正确的。当我有时间时，我会尝试理解为什么这最终会起作用。

# salesforce - 加载弹出窗口时的错误消息

> ID：11933660
> 
> 赞同：1
> 
> 时间：2012-08-13T11:45:26.380
> 
> 标签：salesforce, apex-code, force.com

我在 2 个按钮上创建了 2 个弹出窗口。并有一个对象（AC）。在两个弹出窗口中，我都有一些要插入的字段。

在第一个弹出窗口中，它包含 A.name1、A.name2、A.date、A.Edate、A.Pjt 等，在第二个弹出窗口中，我有字段 A.Name1、A.name2。A.Name1 和 A.name2 是对象中的必填字段。

我的问题是，当我尝试在第一个弹出窗口中插入值时，我收到错误消息“你必须输入一个值”，但即便如此我输入了值。所以我评论了第二个弹出窗口然后它工作正常但是当第二个弹出窗口未注释时抛出这个错误事件输入值。第二个弹出窗口包含与第一个相同的 2 个字段以及其他一些字段。

谁能帮我找到这个错误的解决方案。

```
<apex:outputPanel id="tstpopup">
    <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}"/>
        <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">
        <apex:pageblock >
            <apex:pageblocksection >
                <apex:pageblocksectionitem >
                <apex:outputlabel value="name1: " />
                <apex:inputfield id="proj" value="{!AC.name1__c}" />
                </apex:pageblocksectionitem>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="name2: " />
                <apex:inputfield id="role" value="{!AC.name2__c}" />
                </apex:pageblocksectionitem>
                <p/>
                <apex:commandbutton value="Pencil in a New Project" action="{!save}"   />
                <apex:commandbutton value="Cancel" action="{!closePopup}" immediate="true" /><br/><br/><br/>
                </apex:pageblocksection>
                </apex:pageblock>
        </apex:outputPanel>
    </apex:outputPanel>

 <apex:outputPanel id="tstpopup1">
    <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}"/>
        <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">
        <apex:pageblock >
            <apex:pageblocksection >
                <apex:pageblocksectionitem >
                <apex:outputlabel value="name1: " />
                <apex:inputfield id="proj1" value="{!AC.name1__c}" />
                </apex:pageblocksectionitem><p/>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="Date: " />
                <apex:inputfield id="sd" value="{!AC.Date__c}" />
                </apex:pageblocksectionitem>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="EDate: " />
                <apex:inputfield id="ed" value="{!AC.EDate__c}" />
                </apex:pageblocksectionitem>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="Proj: " />
                <apex:inputfield id="pl" value="{!AC.Pjt__c}" />
                </apex:pageblocksectionitem>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="Charge: " />
                <apex:inputfield id="charge" value="{!AC.Charge__c}" />
                </apex:pageblocksectionitem>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="Name2: " />
                <apex:inputfield id="role1" value="{!AC.name2__c}" />
                </apex:pageblocksectionitem>
                <apex:pageblocksectionitem >
                <apex:outputlabel value="time: " />
                <apex:inputfield id="overtime" value="{!AC.time__c}" />
                </apex:pageblocksectionitem>                   
                </apex:pageblocksection>
                <apex:commandbutton value="Assign to a New Project" action="{!assign}"   />
                <apex:commandbutton value="Cancel" action="{!closePopup}" immediate="true" /><br/><br/><br/>
                </apex:pageblock>
        </apex:outputPanel>
    </apex:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:56:37.973

我认为这是因为您在两个弹出窗口中有相同的对象。如果您输入一个值，例如。第一个弹出窗口中的name1_ *c - 第二个弹出窗口中的另一个字段 name1* _c 仍然为空。

尝试创建对象的两个不同实例：

顶点类：

```
public YourObject AC1 { get; set; }
public YourObject AC2 { get; set; }

// Constructor
public YourClassName(){
    AC1 = new YourObject();
    AC2 = new YourObject();
} 
```

第一个弹出窗口：

```
<apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp1}">
    <apex:pageblock >
        <apex:pageBlockButtons>
            <apex:commandbutton value="Assign to a New Project" action="{!assign1}"   />
            <apex:commandbutton value="Cancel" action="{!closePopup1}" immediate="true" />            
        </apex:pageBlockButtons>
        <apex:pageblocksection >
            <apex:pageblocksectionitem >
                <apex:outputlabel value="name1: " />
                <apex:inputfield id="proj1" value="{!AC1.name1__c}" />
            </apex:pageblocksectionitem>
            <apex:pageblocksectionitem >
                <apex:outputlabel value="Name2: " />
                <apex:inputfield id="role1" value="{!AC1.name2__c}" />
            </apex:pageblocksectionitem>
            <!-- other fields from the instance 1 of the object -->
            ....
        </apex:pageblocksection>
    <apex:pageblock >
<apex:outputPanel> 
```

第二个弹出窗口：

```
<apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp2}">
    <apex:pageblock >
        <apex:pageBlockButtons>
            <apex:commandbutton value="Assign to a Another Project" action="{!assign2}"   />
            <apex:commandbutton value="Cancel" action="{!closePopup2}" immediate="true" />            
        </apex:pageBlockButtons>
        <apex:pageblocksection >
            <apex:pageblocksectionitem >
                <apex:outputlabel value="name1: " />
                <apex:inputfield id="proj2" value="{!AC2.name1__c}" />
            </apex:pageblocksectionitem>
            <apex:pageblocksectionitem >
                <apex:outputlabel value="Name2: " />
                <apex:inputfield id="role2" value="{!AC2.name2__c}" />
            </apex:pageblocksectionitem>
            <!-- other fields from the instance 2 of the object -->
            ....
        </apex:pageblocksection>
    <apex:pageblock >
    <apex:outputPanel> 
```

# iphone - 使用 MGTwitterEngine 不工作的推特推特

> ID：11933666
> 
> 赞同：0
> 
> 时间：2012-08-13T11:45:56.860
> 
> 标签：iphone, twitter, mgtwitterengine

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:00:50.723

API 有一些变化，我猜 MGTwitterEngine 没有更新，请参考开发者网站了解更多信息。

[http://www.readwriteweb.com/archives/twitter_changes_api_fails_to_notify_developers.php](http://www.readwriteweb.com/archives/twitter_changes_api_fails_to_notify_developers.php)

[https://dev.twitter.com/docs](https://dev.twitter.com/docs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:13:31.157

```
[_engine sendUpdate: [NSString stringWithFormat: @"Already Updated. \n%@", [NSDate date]]]; 
```

# c - C中的二进制搜索递归算法问题

> ID：11933670
> 
> 赞同：4
> 
> 时间：2012-08-13T11:46:10.130
> 
> 标签：c, recursion, binary-search

好的，所以我得到了这个功能

```
int bin(int value, int size, int array[]) 
```

我应该在“array[]”中找到“value”，但这里的问题是，在大多数情况下，我们有一些类似的东西

```
int bin(int value, int max, int min, int array[]) 
```

从逻辑上讲，这部分的递归要容易得多，因为我仍然可以传递我所在的数字，并记住数组的大小。

```
int bin(int array[], int value, int min, int max)
{
    if(max < min)
        return -1;
    else
    {
        int mid = min + (max - min)/2;

        if(array[mid] > value)
            return bin(array, value, min, mid-1);
        else if(array[mid] < value)
            return bin(array, value, mid+1, max);
        else
            return mid;
    } 
```

但是由于我只能传递 1 个整数，我该如何调整这个算法呢？从本质上讲，我只能做这样的事情，但我知道这在逻辑上是行不通的。不过，有没有办法让我看到数组的大小？我试过了，但数字不正确。

```
 int bin(int array[], int value, int size)
    {
            int mid = size/2;

            if(array[mid] > value)
                return bin(array, value, size-(size/2));
            else if(array[mid] < value)
                return bin(array, value, size+(size/2));
            else
                return mid;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T11:50:13.467

您还需要显式传递基数：

```
int
bin(int array[], int value, int size)
{
        int mid = size/2;

        if(array[mid] > value)
            return bin(array, value, size/2);
        else if(array[mid] < value)
            return bin(&array[mid], value, size/2);
        else
            return mid;
} 
```

注意“if(array[mid] < value)”情况下的“&array[mid]”

每次，您都需要搜索正确的一半数组，使用 base + offset 副最小/最大索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:01:14.183

使用具有不同参数集的方法的目的是使该方法易于为用户调用。这在递归中很常见。

具有
`int bin(int value, int size, int array[])`签名的用户可以使用公共方法。

然后应该有带有
`int bin(int value, int max, int min, int array[])`签名的私有内部辅助方法。

关键是，调用这个方法的人会想要传入数组的大小，而不是开始和结束索引（因为对他们来说，开始索引应该总是 0，结束应该总是 size-1）而且它是使用带有这样预设参数的方法是不好的做法。

具有开始和结束值（最小值和最大值）的辅助方法用于递归调用以实现更有效的计算，并且它对用户隐藏了不必要的参数。

您的方法应如下所示：

```
int bin(int value, int size, int array[]) {
    return bin(value, size - 1, 0, array);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T17:38:33.207

```
int * binSearch (int *arr,int size, int num2Search)

{

    if(size==1)

        return ((*arr==num2Search)?(arr):(NULL));

    if(*(arr+(size/2))<num2Search)

        return binSearch(arr+(size/2)+1,(size/2),num2Search);

    if(*(arr+(size/2))==num2Search)

        return (arr+(size/2));

    return binSearch(arr,(size/2),num2Search);

} 
```

在我的函数中，您获得相同的参数并返回值的地址。

# css - 使用 require js 优化器的 CSS 缩小

> ID：11933672
> 
> 赞同：0
> 
> 时间：2012-08-13T11:46:17.193
> 
> 标签：css, backbone.js, requirejs

我们有基于 Backbone 和 Require JS 的 Web 应用程序。目前我们使用 Require Js 优化器来优化代码。

它适用于 js 文件。我可以在 Require JS 文档中看到一些 css 缩小步骤，但它不起作用

有什么办法吗？考虑我有 10 个 css 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:58:40.043

我使用 grunt 的[构建工具](https://github.com/cowboy/grunt)，然后您可以加载一堆任务，包括[grunt-contrib](https://github.com/gruntjs/grunt-contrib)，它具有您需要的任务**requirejs**和**mincss**。使用它在你的 grunt 文件中加载 grunt-contrib。

```
grunt.loadNpmTasks('grunt-contrib'); 
```

# windows-phone-7 - MarketplaceDetailTask 用于尚未在市场中的应用程序

> ID：11933678
> 
> 赞同：3
> 
> 时间：2012-08-13T11:46:56.367
> 
> 标签：windows-phone-7, marketplace

我有一个尚未发布的 Windows Phone 7 应用程序，我需要实现调用 MarketplaceDetailTask​​ 并在 Marketplace 中显示应用程序详细信息的功能。

MarketplaceDetailTask​​ 需要一个与 Marketplace 中的 GUID 对应的 ContentIdentifier，但我还不知道（显然）。有些人建议使用程序集中的 GUID，但我检查了我已经发布的应用程序，发布后的 GUID 与程序集 GUID 不同。

我[发现了一个建议](https://stackoverflow.com/questions/6881071/how-do-i-find-the-application-contentidentifier-in-c-sharp-for-a-windows-phone7)，即在不设置 ContentIdentifier 的情况下调用 MarketplaceDetailTask​​ 可以工作，并且系统会自动填写此属性，但我认为这不起作用。

我在一个已经在 Markeplace 中的应用程序中尝试了此代码，但它以错误结束

```
MarketplaceDetailTask marketplaceDetailTask = new MarketplaceDetailTask();
marketplaceDetailTask.ContentType = MarketplaceContentType.Applications;
marketplaceDetailTask.Show(); 
```

那么有没有办法在不知道 GUID 的情况下为应用程序使用 MarketplaceDetailTask​​ 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T11:51:45.427

如建议的那样，不要为任务指定任何内容。

只需使用：

```
var review = new MarketplaceReviewTask();
review.Show(); 
```

（在我实际的 WP7 应用程序中使用，工作正常）

编辑：这是官方文档的链接[，解释了此任务的使用](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394030%28v=vs.105%29.aspx)。

# java - 如何调试 gdb 中的 jvm.dll 或 java 进程，就像我们调试任何其他可执行文件一样？

> ID：11933680
> 
> 赞同：1
> 
> 时间：2012-08-13T11:47:07.017
> 
> 标签：java

如何调试 gdb 中的 jvm.dll 或 java 进程，就像我们调试任何其他可执行文件一样？通常，当我们想用调试符号创建可执行文件时，我们使用`gcc -g exmaple.c -o exmaple`，那么有没有可用的 JVM，所以我们可以在运行时调试 JVM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:01:12.907

如果你真的想调试 JVM 可执行文件，我建议从[OpenJDK](http://openjdk.java.net/)开始。

获取源代码，从头开始构建（添加您想要的任何调试标志），然后进行调试。

# php - php和mysql中的分页

> ID：11933685
> 
> 赞同：0
> 
> 时间：2012-08-13T11:47:15.500
> 
> 标签：php, paging

我在 php 和 mysql 中为我的站点编写了分页代码，但是当没有记录时，它会给出`mysql_fetch_array() expects parameter 1 to be resource` 错误`Page 0 of 0 Back -1 0`
。我的php分页代码如下

```
 $sql = mysql_query("SELECT id, firstname, country FROM myTable ORDER BY id ASC");
$nr = mysql_num_rows($sql);
if (isset($_GET['pn'])) {
$pn = preg_replace('#[^0-9]#i', '', $_GET['pn']); 
} else {
$pn = 1;
} 
$itemsPerPage = 10; 
$lastPage = ceil($nr / $itemsPerPage);
if ($pn < 1) { // If it is less than 1
$pn = 1; // force if to be 1
} else if ($pn > $lastPage) { // if it is greater than $lastpage
$pn = $lastPage; // force it to be $lastpage's value
} 
$centerPages = "";
$sub1 = $pn - 1;
   $sub2 = $pn - 2;
   $add1 = $pn + 1;
     $add2 = $pn + 2;
 if ($pn == 1) {
 $centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' .              $add1 . '</a> &nbsp;';
 } else if ($pn == $lastPage) {
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' .       $sub1 . '</a> &nbsp;';
$centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
 } else if ($pn > 2 && $pn < ($lastPage - 1)) {
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub2 . '">' .  $sub2 . '</a> &nbsp;';
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' .  $sub1 . '</a> &nbsp;';
$centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' .  $add1 . '</a> &nbsp;';
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add2 . '">' . $add2 . '</a> &nbsp;';
 } else if ($pn > 1 && $pn < $lastPage) {
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $sub1 . '">' . $sub1 . '</a> &nbsp;';
$centerPages .= '&nbsp; <span class="pagNumActive">' . $pn . '</span> &nbsp;';
$centerPages .= '&nbsp; <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $add1 . '">' . $add1 . '</a> &nbsp;';
}
$limit = 'LIMIT ' .($pn - 1) * $itemsPerPage .',' .$itemsPerPage; 
$sql2 = mysql_query("SELECT id, firstname, country FROM myTable ORDER BY id ASC $limit");

if ($lastPage != "1"){
// This shows the user what page they are on, and the total number of pages
$paginationDisplay .= 'Page <strong>' . $pn . '</strong> of ' . $lastPage. '&nbsp;  &nbsp;  &nbsp; ';
// If we are not on page 1 we can place the Back button
if ($pn != 1) {
    $previous = $pn - 1;
    $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> Back</a> ';
} 
// Lay in the clickable numbers display here between the Back and Next links
$paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>';
// If we are not on the very last page we can place the Next button
if ($pn != $lastPage) {
    $nextPage = $pn + 1;
    $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $nextPage . '"> Next</a> ';
} 
}
 $outputList = '';
  while($row = mysql_fetch_array($sql2)){ 

$id = $row["id"];
$firstname = $row["firstname"];
$country = $row["country"];

$outputList .= '<h1>' . $firstname . '</h1><h2>' . $country . ' </h2><hr />';

} 

 <h2>Total Items: <?php echo $nr; ?></h2>

  <div style="margin-left:58px; margin-right:58px; padding:6px; background-color:#FFF;    border:#999 1px solid;"><?php echo $paginationDisplay; ?></div>
  <div style="margin-left:64px; margin-right:64px;"><?php print "$outputList"; ?></div>
  <div style="margin-left:58px; margin-right:58px; padding:6px; background-color:#FFF; border:#999 1px solid;"><?php echo $paginationDisplay; ?></div> 
```

有人可以建议使用`page 1 of 1 from 1`选项进行良好的分页吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:56:35.633

试试这个代码。

***“下一个”和“上一个”链接*****：**

```
echo "<h5>Showing ".$start." to ".($start+$limit)." Records of ".$count." Records</h5>";
if($start<=($count-$limit))
{
    echo '<a style="float:right" href="'.$_SERVER['PHP_SELF'].'?start='.($start+$limit).'&limit='.$limit.'&column='.$column.'&order='.$order.'&status='.$status.'&b='.$b.'&type='.$type.'&search='.$search.'"><t1>Next</t1></a>';
}

$prev = $start-$limit;
if ($prev >= 0)
{
    echo '<a style="float:left" href="'.$_SERVER['PHP_SELF'].'?start='.$prev.'&limit='.$limit.'&column='.$column.'&order='.$order.'&status='.$status.'&b='.$b.'&type='.$type.'&search='.$search.'"><t2>Previous</t2></a>';
} 
```

***页码*****：**

```
$i=0;
$l=1;
echo "<p align='center'>";
for($i=0;$i < $count;$i=$i+$limit)
{
    if($i <> $start)
    {
        echo "<a href='listing_test.php?start=$i&limit=$limit'><font face='Verdana' size='2'><b>&nbsp;$l&nbsp;</b></font></a> ";
    }
    else
    {
        echo "<font face='Verdana' size='4' color=#2E9AFE ><b>&nbsp;$l&nbsp;</b></font>";
    }        
$l=$l+1;
}
echo "</p>"; 
```

这对我来说非常有效！

这`$count`是表格中的总行数，`$limit`是`LIMIT`要在每页上显示的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:57:55.120

您必须检查结果集是否为空
，此代码可能会对您有所帮助.. 将您的分页代码用
`if ($nr==1){ //code if no records are available}else{//if data is available}`

# java - 从 Javascript 调用 Java (Birt)

> ID：11933689
> 
> 赞同：1
> 
> 时间：2012-08-13T11:47:28.240
> 
> 标签：java, javascript, class, package, birt

我想在我的 rptdesign 文件（位于报告项目下）中的 javascript 中调用 Java 对象，在我将我的类的 jar 放在 /Web-Inf/lib 目录和 Web-Inf/classes 中的 .class 我试过之后在数据集的打开事件中是这样的：

```
gsh = new Packages.de.vogella.birt.stocks.daomock.StockDaoMock(); 

stock = gsh.getStockValues(); 
```

`de.vogella.birt.stocks.daomock`是位于 Java 项目 (ClassPackage) 下的包的名称`/src`

`StockDaoMock`是类的名称。

`getStockValues()`是方法。

但我得到这个错误：

```
cannot evaluate the script. data set script method fetch returned null.expected a boolean value. 
```

怎么了？

* * *

我尝试将 fetch 方法中的所有代码替换为“system.out.println("essai"); return true;” 并且仍然有这个错误“数据集脚本方法“Fetch”返回 null；期望一个布尔值。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:55:39.713

启用日志记录以查看堆栈跟踪。[见维基](http://wiki.eclipse.org/BIRT/FAQ/Deployment#Q%3a_Can_I_use_Log4j_with_BIRT.3F)。

确保记录异常（该示例仅记录消息）:-)

“[快速而肮脏的日志记录](http://birtworld.blogspot.ch/2010/01/quick-and-dirty-logging.html)”也可能有所帮助。

您可能还有类加载器问题。有关类加载器选项以及如何在使用 BIRT 时通过 OSGi 调试包发现，[请参阅此博客文章。](http://blog.pdark.de/2010/07/12/debugging-birt-how-do-i-enable-logging-for-osgiequinox/)

**[编辑]**错误消息意味着您忘记`return true;`或`return false;`在`fetch`方法结束时。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-14T08:47:21.743

java运行在服务器上，而javascripts运行在浏览器中，所以很明显不能直接从javascript调用Java。

有一个库叫做`DWR (Direct Web Remoting)`. 它可以将 Java 方法暴露给 Javascript 方法。当您调用 Javascript 时，它会发出 AJAX 请求，然后`DWRServlet`处理它，执行您想要的 Java 方法，并将方法结果返回给浏览器。

# c++ - wix 的 C++ 变量

> ID：11933695
> 
> 赞同：0
> 
> 时间：2012-08-13T11:47:40.217
> 
> 标签：c++, variables, wix

我目前正在使用 Visual Studio 2010 C++ 自定义操作项目

我有一个这样的自定义操作：

```
extern "C" UINT __stdcall RegProductName(MSIHANDLE hInstall)
{
HRESULT hr = S_OK;
UINT er = ERROR_SUCCESS;
char szLocalPath[MAX_PATH];

hr = WcaInitialize(hInstall, "RegProductName");
ExitOnFailure(hr, "Failed to initialize");

WcaLog(LOGMSG_STANDARD, "Initialized.");

strcpy(szLocalPath, Orc_Get_Product_Name());
MsiSetProperty(hInstall, "ProductName",  szLocalPath);

LExit:
er = SUCCEEDED(hr) ? ERROR_SUCCESS : ERROR_INSTALL_FAILURE;
return WcaFinalize(er);
} 
```

它不会引发任何错误，但我不确定我是否正确地做我想做的事。在这一行：

```
strcpy(szLocalPath, Orc_Get_Product_Name()); 
```

我从函数中获取产品名称并将其复制到 szLocalPath。但是我想在其他函数以及我的 wix 项目中多次使用这个变量。

这是正确的方法吗？

```
MsiSetProperty(hInstall, "ProductName",  szLocalPath); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:43:01.917

我在这里看不到任何问题**，**但`strcpy`. 如果您的函数`Orc_Get_Product_Name()`返回的路径长于`MAX_PATH`. 但是，您最好使用`TCHAR`type 而不是 plain`char`来支持 Unicode/ANSI 构建，并且您应该真正*使用 Unicode enabled*构建。

而且我确定您要将结果分配`MsiSetProperty`给`hr`变量。

*此外，将Product Name复制到名为**Local Path*的变量中看起来很奇怪。
而且我看不到标签在哪里`LExit`使用。该函数`ExitOnFailure`似乎没有返回控制：如果`WcaInitialize`不成功，您应该简单地将`ERROR_INSTALL_FAILURE`另一个错误代码返回给 MSI 引擎（而不是终止您的自定义操作正在运行的进程）。

# objective-c - 无法更改 SplitViewController 中的方向

> ID：11933699
> 
> 赞同：1
> 
> 时间：2012-08-13T11:47:57.100
> 
> 标签：objective-c, xcode, ipad

我对 iPad 应用 SplitViewController 不太熟悉。我在我的应用程序中使用了 SplitViewController。当将方向从纵向更改为横向时，Masterview 隐藏在 splitView 中。你能帮我解决这个问题吗？

我已附上我的来源供您参考。

创建拆分视图控制器：

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease]; // 应用程序启动后自定义的覆盖点。

```
menuViewController = [[MainMenuViewController alloc] initWithNibName:@"MainMenuViewController" bundle:nil];
UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:menuViewController] ;
masterNavigationController.navigationBar.barStyle = UIBarStyleBlack;

MainMenuDetailViewController *detailViewController = [[MainMenuDetailViewController alloc] initWithNibName:@"MainMenuDetailViewController" bundle:nil] ;
UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController] ;
detailNavigationController.navigationBar.barStyle = UIBarStyleBlack;

self.splitViewController = [[UISplitViewController alloc] init];
[self.splitViewController.view setBackgroundColor:[UIColor whiteColor]];
self.splitViewController.delegate = detailViewController;
self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil]; 
```

详情查看页面：

# 语用标记 -

# pragma mark 拆分视图支持

*   (void)splitViewController: (UISplitViewController*)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem* )barButtonItem forPopoverController: (UIPopoverController*)pc {

    barButtonItem.title = NSLocalizedString(@"Menu", @"Menu"); [self.navigationItem setLeftBarButtonItem:barButtonItem 动画：YES]; self.masterPopoverController = 电脑；appDelegate.rootPopoverButtonItem = barButtonItem; appDelegate.masterPopoverController = pc; }

// 当视图再次显示在拆分视图中时调用，使按钮和弹出框控制器无效。- (void)splitViewController: (UISplitViewController*)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem {

```
[self.navigationItem setLeftBarButtonItem:nil animated:YES];
self.masterPopoverController = nil; 
```

}

MasterView 按钮点击：

[appDelegate.splitViewController viewWillDisappear:YES];

```
[UIView  beginAnimations: @"Showinfo"context: nil];
[UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.5];

NSMutableArray *viewControllerArray=[[NSMutableArray alloc] initWithArray:[[appDelegate.splitViewController.viewControllers objectAtIndex:1] viewControllers]];

[viewControllerArray removeLastObject];

if( viewMenu.hidden == YES)  // Main Menu
{
    if(btnMenu.tag == 1) // Service Report Form
    {
        if (!self.mainMenuDetailViewController) {
            self.mainMenuDetailViewController = [[MainMenuDetailViewController alloc] initWithNibName:@"MainMenuDetailViewController" bundle:nil];
        }
        [viewControllerArray addObject:self.mainMenuDetailViewController];
        appDelegate.splitViewController.delegate = self.mainMenuDetailViewController;

    }

    if(btnMenu.tag == 4) // Signout
    {
        [self.navigationItem setLeftBarButtonItem:nil];
        [appDelegate SignOut];
        btnSignOut.frame = CGRectMake(24,275,272,50);
    }
    else if(btnMenu.tag == 2) // Inquiries
    {
       if (!self.inquiryViewController) {
            self.inquiryViewController = [[InquiryViewController alloc] initWithNibName:@"InquiryViewController" bundle:nil] ;
        }

        [viewControllerArray addObject:self.inquiryViewController];
        appDelegate.splitViewController.delegate = self.inquiryViewController;
    }
    else if(btnMenu.tag == PageMasterSync)
    {

        if (!self.mastSyncViewController) {
            self.mastSyncViewController = [[MastSyncViewController alloc] initWithNibName:@"MastSyncViewController" bundle:nil] ;
        }
        appDelegate.splitViewController.delegate = self.mastSyncViewController;
        [viewControllerArray addObject:self.mastSyncViewController];
    }
    else if(btnMenu.tag == PageServiceReport)
    {
        if(!self.srListViewController)
       self.srListViewController  = [[SRListViewController alloc] initWithNibName:@"SRListViewController" bundle:nil];

        appDelegate.splitViewController.delegate = srListViewController;
        [viewControllerArray addObject:self.srListViewController];

    }

}

}

[[appDelegate.splitViewController.viewControllers objectAtIndex:1] setViewControllers:viewControllerArray animated:NO]; 
if(btnMenu.tag == PageReview &&  !viewMenu.hidden)
   [self.reviewViewController loadServiceReport];

[appDelegate.splitViewController viewWillAppear:YES];
[viewControllerArray release];

[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:NO];
[UIView commitAnimations]; 
```

关于森蒂尔![在此处输入图像描述](../Images/1bf2f52cfe256a79667d78c36080d2d7.png)

# android - 以编程方式检测屏幕密度，预蜂窝

> ID：11933701
> 
> 赞同：0
> 
> 时间：2012-08-13T11:48:03.897
> 
> 标签：android, layout

我的布局适用于某些手机，但在三星 Galaxy Ace 中无法正常工作。我需要为这款手机（和类似手机）创建一个新布局，但我无法以编程方式使用[这个](http://android-developers.blogspot.nl/2011/07/new-tools-for-managing-screen-sizes.html)或[这个](http://developer.android.com/guide/practices/screens_support.html)，因为这款手机使用 Android 2.2，而这些解决方案适用于 Android 3.2 及更高版本。如何在 Android 3.2 以下为这款手机创建新布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:03:01.330

你有没有试过这个：

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getMetrics(
            displayMetrics);

    switch (displayMetrics.densityDpi) {
        case DisplayMetrics.DENSITY_HIGH: 
     ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:55:21.913

我最终所做的是创建一个名为“layout-sw320dp”的文件夹，Galaxy Nexus 将使用该文件夹 - 而 Galaxy Ace 将使用普通“布局”文件夹中的布局 - 我对每部手机进行了相关修改/布局。

# bash - SVN如何重定位多个目录

> ID：11933703
> 
> 赞同：1
> 
> 时间：2012-08-13T11:48:03.800
> 
> 标签：bash, svn, shell

我想在我的本地机器上*重新定位*多个签出的 SVN 目录，因为我们的 SVN 服务器已移动并且现在具有不同的 IP 地址。*我不想通过SmartSVN*或*TortoiseSVN*之类的工具执行此操作，而是想使用脚本一次性完成目录。

每个目录都包含一个不同的工作副本——所以要么是一个不同的项目，要么有时还有一个不同的分支或标签，因此我不能只在根目录中进行重定位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:48:03.800

我在一个消失的网页上找到了部分解决方案，在评论中也找到了一个改进的版本，但我想稍微清理一下并在这里提供给其他人

IP 地址是虚构的，需要根据本地设置进行调整。

该脚本遍历所有由 SVN 管理的目录并使用旧位置，然后`svn switch`为每个目录调用带有 relocate 选项的命令。

```
#!/bin/bash

OLD_REPO=http://127.0.0.1/svn/
NEW_REPO=http://192.168.0.17/svn/

for dir in `ls -1 */.svn/entries | xargs grep -H -l $OLD_REPO | grep -E -o ^[^\/]+`; do
    echo Switching sandbox $dir from $OLD_REPO to $NEW_REPO;

    OLD_ROOT=`svn info $dir | grep ^Repository\ Root | cut -f 3 -d ' '`
    NEW_ROOT=`echo $OLD_ROOT | sed "s|$OLD_REPO|$NEW_REPO|"`
    svn switch --relocate $OLD_ROOT $NEW_ROOT $dir;
done 
```

如果您还想在重定位时更改用户，很容易`--username $USERNAME`在命令中添加参数，并`$USERNAME`在脚本顶部定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T11:36:38.663

@nwinkler 的解决方案在我的机器上不起作用，因为我的版本`grep`不支持该选项`-o`（Msys 中的 grep 2.4.2）。

我想出了另一个解决方案，它也有以下改进：

*   支持带空格的目录名称
*   支持几个*旧的存储库*URL（例如服务器名称和 IP 地址）

代码要长得多，也没有那么优雅，但它可以解决问题。

该脚本应从包含本地存储库的目录中运行。

```
#!/bin/bash

#Change separator to support directories with space
SAVEIFS=$IFS
IFS=$(echo -en "\n\b")

#URL of new 
NEW_REPO=http://newserver:8080/svn/

#List of potential old repositories
OLD_REPOS[0]=http://oldserver:8080/svn/
OLD_REPOS[1]=http://oldserver.domain.com:8080/svn/
OLD_REPOS[2]=http://127.0.0.1:8080/svn/

for dir in `ls -d1 *`; do
    #Check directory and skip if needed
    if ! [ -d "$dir/.svn" ]; then
        continue;
    fi  
    #Relocate
    OLD_ROOT=`svn info $dir | grep ^Repository\ Root | cut -f 3 -d ' '`
    if [ "`echo $OLD_ROOT | grep $NEW_REPO`" == "$OLD_ROOT" ]; then
        echo "Skipped repository '$dir' (already relocated)";
    else
        for OLD_REPO in ${OLD_REPOS[*]}; do
            NEW_ROOT=`echo $OLD_ROOT | sed "s|$OLD_REPO|$NEW_REPO|"`;
            if [ "$OLD_ROOT" != "$NEW_ROOT" ]; then
                echo "Switching repository '$dir' from $OLD_REPO to $NEW_REPO";
                svn switch --relocate $OLD_ROOT $NEW_ROOT $dir;
                echo "=> done";
                continue 2;
            fi
        done
        echo "Repository '$dir' does not match any old repository identified";
    fi
done

#Restore separator
IFS=$SAVEIFS

#--END--# 
```

方法略有不同：

*   遍历所有文件和目录
*   如果不是 SVN 存储库则跳过
*   如果本地存储库与旧存储库的 URL 匹配，则将其重新定位

# php - 联系表格 - PHP 解析错误

> ID：11933710
> 
> 赞同：-1
> 
> 时间：2012-08-13T11:48:12.460
> 
> 标签：php, forms, email, contact

希望有人可以帮助解决这个问题。我收到一个**PHP Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in /site/folder/path/test/send_email.php 在**以下代码的第 9 行：

```
$email_to =   'email@address.com <script type="text/javascript">
/* <![CDATA[ */
(function(){try{vars,a,i,j,r,c,l=document.getElementById("__cf_email__");a=l.className;if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'; //the address to which the email will be sent
$name     =   $_POST['name'];
$email    =   $_POST['email'];
$subject  =   $_POST['subject'];
$message  =   $_POST['message'];

$headers  = "From: $email\r\n";
$headers .= "Reply-To: $email\r\n";

if(mail($email_to, $subject, $message, $headers)){
    echo 'sent'; // we are sending this text to the ajax request telling it that the   mail is sent..
}else{
    echo 'failed';// ... or this one to tell it that it wasn't sent
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:50:19.503

分隔这些位：

```
className;if(a){s=\'\'; 
```

你用单引号开始字符串：

```
$email_to =   '... 
```

因此，您需要如上所述在字符串中分隔任何其他单引号。

编辑：我将代码缩进如下：

```
<?php

$email_to =   'email@address.com <script type="text/javascript">
/* <![CDATA[ */
(function()
{try
    {
            vars,a,i,j,r,c,l=document.getElementById("__cf_email__");
            a=l.className;
            if(a)
            {
                s=\'\';
                r=parseInt(a.substr(0,2),16);
                for(j=2;a.length-j;j+=2)
                {
                    c=parseInt(a.substr(j,2),16)^r;
                    s+=String.fromCharCode(c);
                }
                s=document.createTextNode(s);
                l.parentNode.replaceChild(s,l);
            }
    }
    catch(e)
    {
    }
}
)();
/* ]]> */
</script>';

echo 'Something';
?> 
```

而且我看不到任何解析错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:50:33.857

您需要转义单引号`\'`：

```
$email_to =   'email@address.com <script type="text/javascript">
/* <![CDATA[ */
(function(){try{vars,a,i,j,r,c,l=document.getElementById("__cf_email__");a=l.className;if(a){s=\'\';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.pare    ntNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'; //the address to which the email will be sent 
```

# oracle - 如何将 bytea 从 Postgres 复制到 Oracle

> ID：11933711
> 
> 赞同：1
> 
> 时间：2012-08-13T11:48:15.390
> 
> 标签：oracle, postgresql, bytea

我有一个带有 bytea 字段**形状****的**Postgres 9.1 表格线。

记录数约为 500000。

将 bytea 数据**plines.shape**从 Postgres 复制到Oracle 10g 表**olines的字段****形状**的最佳方法是什么？

 **提前谢谢你，ysa

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:25:03.837

我会在 Java 中创建一个程序，该程序将同时连接到 PostgreSQL（使用[JDBC PostgreSQL 驱动程序](http://jdbc.postgresql.org/)）和 Oracle（使用[Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)），然后从 Postgres 读取一行，将这一行放到 Oracle 表中，重复。

[反过来，](http://oracle-fdw.projects.postgresql.org/)这会容易得多...... ;-)**

# c++ - 在 C++ 中处理 C 库匿名结构类型

> ID：11933713
> 
> 赞同：6
> 
> 时间：2012-08-13T11:48:21.510
> 
> 标签：c++, c, gcc, name-mangling, anonymous-struct

我们有一个大型的、旧的 C++ 应用程序，其中包含大量遗留代码和一些用 C 编写的外部库。这些库很少更新 - 只有当我们发现错误并且供应商提供补丁时。这发生在上周的一个库中，在集成新版本后，我们发现如果我们不在本地修改库（显然我们对上一个版本所做的），我们的构建会因以下错误消息而中断：

```
non-local function ‘static E* MyCls::myFct(<anonymous struct>*)’ uses anonymous type 
```

这是由于库声明了许多这样的句柄类型：

```
#define _Opaque struct {unsigned long x;} *

typedef _Opaque    Handle;
typedef _Opaque    Request; 
```

我们在某些类的函数签名中使用它：

```
class MyCls {
public:
    static void* myFct(Handle handle);
    ...
} 
```

这会产生上述错误，因为编译器无法为函数创建正确的名称错位名称，因为 _Opaque 结构没有名称。

我们目前的解决方法是修补库头文件，显式地为结构命名：

```
//#define _Opaque struct {unsigned long x;} * //Replaced by typedef below!
typedef struct __Opaque {unsigned long x;} * _Opaque; 
```

这显然很糟糕，因为如果可能的话，我们不想碰图书馆。另一个更糟糕的选择是将类型转换为`void*`所有函数签名并将它们转换回各自的类型。用纯 C 重写每个受影响的函数是最糟糕的选择......

所以，我的问题是：有没有比修补库更好的选择？我忽略了一个简单的解决方案吗？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:19:12.110

您可以通过对行的最小更改来完成此操作`#define`，利用 7.1.3:8 中的规则，即*声明声明为该类类型（或枚举类型）的第一个 typedef-name 用于表示类类型（或枚举类型）仅用于链接目的*：

```
#define MAKE_DUMMY2(line) dummy_ ## line
#define MAKE_DUMMY(line) MAKE_DUMMY2(line)
#define _Opaque struct {unsigned long x;} MAKE_DUMMY(__LINE__), * 
```

这给出了`Handle`等`Request`最小的联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:08:24.120

您可以通过声明新类型来引入名称，这些新类型仅包含这些元素。将这些类型用于您的参数。

```
namespace MON {
struct t_handle {
  Handle handle;
};

class MyCls {
public:
    static void* myFct(t_handle handle);
    ...
};
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:47:40.813

如果您愿意修改接口上的方法，则可以做得比`void *`：

```
struct CHandle {
    void *p;
    CHandle(void *p): p(p) { }
};
struct CRequest {
    void *p;
    CRequest(void *p): p(p) { }
};

static CHandle make(Handle handle) { return CHandle(handle); }
static Handle get(CHandle handle) { return static_cast<Handle>(handle.p); }
static CRequest make(Request request) { return CRequest(request); }
static Request get(CRequest request) { return static_cast<Request>(request.p); } 
```

在这里，`CHandle`和`CRequest`有链接等可以在你的方法签名中使用；`make`和的重载`get`具有内部链接，因此可以与匿名类型交互。你可以把它放在一个标题中，甚至是`static`函数。

您必须修改您的代码，以便在`MyCls::myFct`调用库时，您可以使用 包装参数`get`并使用`make`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:10:30.140

这似乎有效：

```
class MyCls {
  public:
    typedef _Opaque MHandle;
    static void* myFct(MHandle handle) {
      return 0;
    }   
}; 
```

# php - PHP 无法解析响应对象

> ID：11933717
> 
> 赞同：0
> 
> 时间：2012-08-13T11:48:27.983
> 
> 标签：php, arrays, parsing

我正在拨打 OCRWebservice.com 并收到这样的回复

```
object(stdClass)#5 (1) {
["OCRWSResponse"]=>
object(stdClass)#6 (2) {
    ["ocrText"]=>
        object(stdClass)#7 (1) {
            ["ArrayOfString"]=>
                object(stdClass)#8 (1) {
                    ["string"]=>
                            string(109) "......,......,- PHYSICIANS HAVE BIGGER STAKE IN PATIENT, TOTAL CARE UNDER MEDICARE ACOs AROUNDTHEINDUSTRY "
                }
        }
    ["ocrWSWords"]=>
        object(stdClass)#9 (0) {
        }
}
}

object(stdClass)#10 (1) {
["OCRWSResponse"]=>
    object(stdClass)#11 (2) {
        ["ocrText"]=>
            object(stdClass)#12 (1) {
                ["ArrayOfString"]=>
                    object(stdClass)#13 (1) {
                        ["string"]=>
                        string(21) "AROUNDTHEINDUSTRY 10 "
                    }
            }
        ["ocrWSWords"]=>
            object(stdClass)#14 (0) {
        }
}
} 
```

我无法将其解析为 $response->OCRWSResponse->ocrText。我需要读取 ocrText 中的字符串值。

似乎返回了不止一个 OCRWSResponse。我需要遍历它们并获取所有 ocrText。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:58:32.113

试试这个：

```
<?php
// $response is the response
echo $response->OCRWSResponse->ocrText->ArrayOfString->string;
?> 
```

# android - Android , 如何从客户经理那里获取帐户颜色？

> ID：11933719
> 
> 赞同：2
> 
> 时间：2012-08-13T11:48:30.947
> 
> 标签：android, accountmanager

从`AccountManager`我可以获取帐户类型和帐户名称，但我无法获取帐户颜色。如何在日历应用程序中获取代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:35:57.263

从日历应用程序中获取代码

```
 Uri uri = CalendarContract.Calendars.CONTENT_URI;
    Cursor calendarCursor = getContentResolver().query(uri, projection, null, null, null);
int colorColumn = calendarCursor.getColumnIndexOrThrow(Calendars.CALENDAR_COLOR);

      int color = calendarCursor.getInt(colorColumn); 
```

该整数返回与 Android 手机同步的 Accounts 的颜色代码。

# shell - 如何创建类似 javascript mongodb-tutorial 的浏览器外壳

> ID：11933722
> 
> 赞同：2
> 
> 时间：2012-08-13T11:48:50.933
> 
> 标签：shell, mongodb, browser

MongoDB 网站使用“浏览器外壳”让任何人都可以轻松地尝试它的工作方式。我想为一个站点实现类似的东西，让开发人员对 REST API 做一些 HTTP 请求——我应该如何处理这个？有我可以使用的插件或工具吗？

可以在此处找到 mongoDB 示例：[http](http://www.mongodb.org/#) ://www.mongodb.org/# - 单击“试用”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:33:35.853

Kyle Banker 编写的“mongulator”代码就是您想要的。他在这里谈论它：

[http://kylebanker.com/blog/2010/1/try-mongodb-browser/](http://kylebanker.com/blog/2010/1/try-mongodb-browser/)

你可以在这里看到github上的代码：

[https://github.com/banker/mongulator](https://github.com/banker/mongulator)

还有其他类似的非 MongoDB 选项可以作为示例 - 很好的狩猎！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:17:43.397

Spring Shell 可能会有所帮助 [http://www.springsource.org/spring-shell](http://www.springsource.org/spring-shell)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T13:00:42.410

您可以访问 www.domongodb.com。我确定你想要这样一个在线 mongodb shell 来尝试实际的 mongodb 命令。[http://www.domongodb.com](http://www.domongodb.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T23:55:33.427

[MongoDB 博客](http://blog.mongodb.org/post/58228251389/the-mongodb-web-shell)上讨论了[try.mongodb.org](http://try.mongodb.org/)上最新版本的交互式 Web shell ，[代码在 Github 上可用](https://github.com/10gen-labs/mongo-web-shell)。

请注意，Web 环境中的交互式 shell 有一些特殊的限制（其中一些在博客文章中有所介绍），尤其是。可以阻塞浏览器线程的周围活动。

# android - XmlPullParser 未通过 Xml 进行

> ID：11933730
> 
> 赞同：0
> 
> 时间：2012-08-13T11:49:12.940
> 
> 标签：android, xml-parsing, xmlpullparser

我尝试解析以下类型的 XML。

![XmlToBeParsed](../Images/9cc772c55cfc2279c3781242501e872f.png)

我用来解析的代码是这个：

```
parser.nextTag();
parser.require(XmlPullParser.START_TAG, null, "feed");

while(parser.nextTag() == XmlPullParser.START_TAG) {
    parser.require(XmlPullParser.START_TAG, null, "item");
    System.out.println(parser.getName());
    parser.require(XmlPullParser.END_TAG, null, "item");
} 
```

有人可以告诉我我做错了什么吗？我得到的错误是 XmlPullParserException 意外类型位置：TEXT SORIN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:58:30.897

你在开始`item`标签中。您必须移动到结束`item`标签。通过调用`parser.nextTag();`否则，require 将尝试将标签之间的 TEXT与抛出异常的`item`结束标签匹配。`item`

```
parser.nextTag();
parser.require(XmlPullParser.START_TAG, null, "feed");

while(parser.nextTag() == XmlPullParser.START_TAG) {

    parser.require(XmlPullParser.START_TAG, null, "item");
    System.out.println(parser.getName());
    parser.nextTag();
    parser.require(XmlPullParser.END_TAG, null, "item");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:57:30.383

`parser.getName()`为您提供当前标签的名称（例如“item”）。您想要当前标签的文本内容。

更改`System.out.println(parser.getName());`为

```
parser.require(XmlPullParser.TEXT);
System.out.println(parser.getText()); 
```

它仍然会在`atom`标签上失败，因为它没有文本，但我想你明白了。好吧，实际上它会在`atom`标签处失败，因为您只期望`item`标签，但这又不是真正的问题。

# c# - 如果网站与数据库位于同一台服务器上，如何构建数据库连接字符串？

> ID：11933731
> 
> 赞同：1
> 
> 时间：2012-08-13T11:49:13.683
> 
> 标签：c#, asp.net, database, database-connection, connection-string

我的连接字符串有问题，我在网上找不到任何可以帮助我的东西。所以我有一个测试网站，我在该网站上连接到不在同一台服务器上的数据库。那里一切正常，数据被正确读取并且连接成功。

现在，当我在与数据库位于同一服务器上的网站上尝试相同操作时，它不起作用。因此，我认为如果我已经在该服务器上，则不能像从其他服务器那样连接到数据库服务器，如下所示：

```
<connectionStrings>
    <add name="nameOfConnString" connectionString="Data Source=serverName;Initial Catalog=databaseName;User ID=userName;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

有人可以帮我吗？

如果您需要更多信息，请询问。

提前致谢！

**[编辑]**

哦，我忘了...这是我收到的错误消息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:52:44.927

尝试`localhost`代替`server name`

```
<connectionStrings>
    <add name="nameOfConnString" connectionString="Data Source=localhost;Initial Catalog=databaseName;User ID=userName;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:50:04.587

```
<connectionStrings>
    <add name="nameOfConnString" connectionString="Data Source=.;Initial Catalog=databaseName;User ID=userName;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:03:55.647

上面的两个答案都是正确的，但是，如果您安装了 SQL Express（我假设我们正在谈论 MS SQL），那么您的连接字符串必须是这样的：

```
<connectionStrings>
    <add name="nameOfConnString" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=databaseName;User ID=userName;Password=password" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

# php - 我想使用 For 循环显示表中的所有记录

> ID：11933732
> 
> 赞同：-3
> 
> 时间：2012-08-13T11:49:16.847
> 
> 标签：php, magento, magento-1.4, magento-1.6

在这段代码中，我必须显示表（cust_college）中的所有记录。但是这个函数只返回该表的第一行而不是其他行。请告诉我解决方案

```
$read = Mage::getSingleton('core/resource')->getConnection('core_read');
$a = "SELECT * from cust_college";

$qry = $read->query($a);
$res = $qry->fetch(PDO::FETCH_ASSOC); //fetch row
foreach ($res as $payment) {
    echo $payment = $res[college];
    echo $payment = $res[value_id];
    echo $payment = $res[shop_id];
    echo $payment = $res[cust_address];
}

$store = Mage::app()->getStore()->getCode(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:03:34.930

```
$result = $read->getSelect()->getAdapter()->fetchAll('SELECT * from cust_college'); 
```

# apache - 通过 mod_rewrite 重写查询字符串中每次出现的模式

> ID：11933734
> 
> 赞同：1
> 
> 时间：2012-08-13T11:49:28.207
> 
> 标签：apache, mod-rewrite, apache2

我对我的服务器有这种形式的查询：

```
http://my.host.com/moo?p=1&s=2&targetURL=http://foo.com/sub/more/query 
```

我需要做的是替换这个查询的一部分参数，特别是我需要用 替换`http://foo.com/sub/`，`http://bar.com/`保留这个查询中的所有其他参数，同时保留`http://foo.com/sub/more/query`. 我会满足于将它替换为`targetURL`，所以我尝试了这个：

```
RewriteCond %{REQUEST_URI} ^/moo
RewriteRule ^/moo(.*)targetURL=http://foo.com/sub(.*)$ http://other.host.com/moo$1targetURL=http://bar.com$2 [L,R]
RewriteRule ^/moo(.*)$ http://other.host.com/moo$1 [L,R] 
```

但是第一个查询永远不会匹配。有什么帮助吗？

**编辑**：为了清楚起见，我有这个：

```
http://my.host.com/moo?p=1&s=2&targetURL=http://foo.com/sub/more/query 
```

我希望它变成这样：

```
http://other.host.com/moo?p=1&s=2&targetURL=http://bar.com/more/query 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:00:13.960

尝试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^my\.host\.com [NC]
RewriteCond %{QUERY_STRING} ^(.*)targetURL=http://foo.com/sub/(.*)$ 
RewriteRule ^/?moo$ http://other.host.com/moo?%1targetURL=http://bar.com/%2 [L,R=301] 
```

您需要`targetURL=http://foo.com/sub/`使用. 与它匹配时，查询字符串不是 URI 的一部分。然后，您可以使用和反向引用来引用查询字符串中匹配的分组。`%{QUERY_STRING}``RewriteCond``RewriteRule``%1``%2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:17:18.620

试试这个我测试过并适合我的版本。

```
<i> 

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^my\.host\.com/moo [NC,OR]
    RewriteCond %{QUERY_STRING} ^p\=1\&s=2\&targetURL\=http\:\/\/foo.com/sub/more/query$ [NC,OR]  
    RewriteRule ^/(.*) http://other.host.com/moo?p=1&s=2&targetURL=http://bar.com/more/query/$1 [R=301,L]
  </IfModule> 
```

# android - Android：启用硬件加速

> ID：11933737
> 
> 赞同：6
> 
> 时间：2012-08-13T11:49:43.320
> 
> 标签：android, hardware-acceleration

我希望我在 android 4.0 中的动画非常缓慢且缺乏。因此，我想启用硬件加速并尝试按照[此](http://developer.android.com/guide/topics/graphics/hardware-accel.html)页面的说明进行操作，但没有运气。

你可以在这里看到我的清单：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest android:versionCode="1" android:versionName="1.0"
    package="com.jws.battleship" xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
    <application 
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.Black.NoTitleBar"
        android:hardwareAccelerated="true">
        <activity 
            android:label="@string/app_name" 
            android:name=".HomeActivity"
            android:hardwareAccelerated="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <activity android:name=".UserPreferences"/>
        <activity android:name=".BattleActivity" android:screenOrientation="landscape"/>
        <activity android:name=".HighScoreActivity"/>
        <activity android:name=".StoreActivity"/>
        <activity android:name=".JoinBattle"/>
        <activity android:name=".CreateBattleActivity"/>
        <activity android:name=".FriendList"/>
        <activity android:name=".FriendListActivity"/>
        <activity android:name=".SelectNetworkActivity"/>
        <activity android:name=".BluetoothDevicesListActivity"/>
        <activity android:name=".NetworkFactoryActivity"/>
    </application>
</manifest> 
```

然后我测试它是否在 onCreate() 中启用了硬件加速，如下所示：

```
ListView list = (ListView)findViewById(R.id.home_list_active_games);
Boolean test = list.isHardwareAccelerated(); 
```

但它总是返回假！？我是否需要添加某种许可或这里有什么问题？

BR

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:14:57.160

上面的代码看起来没问题。[HoneyComb isHardwareAccelerated()](https://groups.google.com/forum/#!topic/android-developers/vAH0HAZg0uU%5B1-25%5D)发布了同样的问题， 总是返回 false 。然而， [Android 3.0 硬件加速](http://android-developers.blogspot.com/2011/03/android-30-hardware-acceleration.html)写道

> 如果您需要更细粒度的控制，您可以在运行时为给定窗口启用硬件加速：

```
 getWindow().setFlags(
    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T14:31:18.590

将此更改为

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="15"/> 
```

使用硬件加速需要 minSdkVersion 11 或更高版本。

# python - python 的 smtplib 无法连接到 gmail、mail.ru 或其他任何东西

> ID：11933742
> 
> 赞同：2
> 
> 时间：2012-08-13T11:50:00.877
> 
> 标签：python, gmail, smtplib

从 line 开始的所有行都返回错误 Errno 10060 或错误 Errno 10061：

```
import smtplib
server = smtplib.SMTP('smtp.gmail.com:465')
mailServer = smtplib.SMTP("smtp.gmail.com", 587)
mailServer = smtplib.SMTP("smtp.gmail.com", 465)
mailServer = smtplib.SMTP("smtp.mail.ru", 25)
mailServer = smtplib.SMTP("smtp.mail.ru", 2525) 
```

你能帮忙吗？我一定遗漏了一些微不足道的东西......完整的错误消息：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\smtplib.py", line 242, in __init__
(code, msg) = self.connect(host, port)
File "C:\Python27\lib\smtplib.py", line 302, in connect
self.sock = self._get_socket(host, port, self.timeout)
File "C:\Python27\lib\smtplib.py", line 277, in _get_socket
return socket.create_connection((port, host), timeout)
File "C:\Python27\lib\socket.py", line 571, in create_connection
raise err
socket.error: [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\smtplib.py", line 242, in __init__
(code, msg) = self.connect(host, port)
File "C:\Python27\lib\smtplib.py", line 302, in connect
self.sock = self._get_socket(host, port, self.timeout)
File "C:\Python27\lib\smtplib.py", line 277, in _get_socket
return socket.create_connection((port, host), timeout)
File "C:\Python27\lib\socket.py", line 571, in create_connection
raise err
socket.error: [Errno 10061] No connection could be made because the target machine actively refused it 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:55:02.753

用于[`smtplib.SMTP_SSL()`](http://docs.python.org/library/smtplib.html?highlight=smtp#smtplib.SMTP_SSL)TLS 连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:39:23.120

下面的所有命令都没有错；我的问题确实是由 IP 限制引起的。感谢您的所有回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:00:06.840

或`server = smtplib.SMTP('smtp.gmail.com:25')`用于正常连接

如果您想从端口 25 获取 tls，只需添加

```
server.starttls() 
```

在第一行之后。

ps：由于端口25是默认的，下面是等价的：

```
server = smtplib.SMTP('smtp.gmail.com')
server.starttls() 
```

# linq-to-sql - 使用 sqlmetal 生成 dbcontext 会将我的表值 UDF 列创建为可为空的

> ID：11933743
> 
> 赞同：2
> 
> 时间：2012-08-13T11:50:01.587
> 
> 标签：linq-to-sql, user-defined-functions, sqlmetal, non-nullable

我创建了一个内联表 UDF，其中包含一些不同类型的列。

```
ALTER FUNCTION [dbo].[fnTest]()
RETURNS TABLE 
AS
RETURN 
(
    SELECT 
        [t0].[type], 
        [t0].[status], 
        [t0].[createdDate], -- datetime not null
        [t1].[ACLID]        -- bigint not null
    FROM 
        [dbo].[ProcessInstanceWorkitem] AS [t0] 
        INNER JOIN [dbo].[Object] AS [t1] ON [t0].[objectID] = [t1].[objectID] 
) 
```

但是，尽管某些列设置为非空，但 sqlmetal.exe 将它们创建为可空类型：

```
public partial class FnTestResult
{

    private string _Type;

    private string _Status;

    private System.Nullable<System.DateTime> _CreatedDate;

    private System.Nullable<long> _ACLID;

... 
```

为什么它没有得到正确的不可为空的类型？

我将 sqlmetal (Microsoft (R) Database Mapping Generator 2008) 版本 4.0.30319.1 用于 .NET Framework 版本 4。

# c - Linux内核模块：在运行时动态加载代码

> ID：11933752
> 
> 赞同：0
> 
> 时间：2012-08-13T11:50:52.923
> 
> 标签：c, linux, module, kernel

有没有办法在运行时在 linux-kernel-module 中动态加载编译的 c 代码？我正在寻找类似`dlopen`from的东西`libdl`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:29:45.533

是的。将代码移动到另一个模块中，然后在您的模块中创建对另一个模块的依赖关系。

# php - 如何使用 php 将文件添加到 ziparchive 中新创建的文件夹？

> ID：11933753
> 
> 赞同：1
> 
> 时间：2012-08-13T11:50:57.950
> 
> 标签：php, zip

![在此处输入图像描述](../Images/13fef1421122af5d56de6c1781ae5da7.png)

如上图所示，我有组织在虚拟文件夹中的图像（在 mysql 数据库中，但不是真实文件夹）。我需要将选定的文件夹以**zip 的形式提供下载** 。我能够压缩图像，但我们如何添加子目录以便向其中添加图像（我尝试使用 `addEmptyDir()`但无法找到将图像添加到其中的方法！）。如果不创建物理文件夹，这真的可能吗？

请建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T09:21:23.830

感谢@dnagirl 的回答，但我实际上是在寻找一种在子文件夹中添加文件的方法（也许我无法让自己清楚！）

发现如果我们给出 ' `path/to/filename`' 而不仅仅是 ' `filename`' ，zipArchive 会自动创建文件夹

这就是我实现它的方式，以防有人需要它！

```
function zipFilesAndDownload($file_names,$archive_file_name,$img_localpath)
{
  $folder_path=WSP_AK_PLUGIN_DIR ."akTempFolder/";
  $zip = new ZipArchive();
  if ($zip->open($folder_path.$archive_file_name, ZIPARCHIVE::CREATE )===TRUE) {
    //$zip->addEmptyDir('myimages');(this was what i thought would create folder!)
    foreach($file_names as $files)
    {
        //$zip->addFile($img_localpath.'/'.$files, 'myfolder/'.$files);
        $zip->addFile($img_localpath.'/'.$files['fileName'],    $files['folder_path'].$files['fileName']);
    }
    $zip->close(); 
```

在上面的代码`$files['folder_path']`中将给出创建文件的路径例如`folder1/folder2/image1.jpg`

```
 header("Content-type: application/zip"); 
    header("Content-Disposition: attachment; filename=$archive_file_name");
    header('Content-Type: application/force-download');
    header('Content-Length: ' . filesize($folder_path.$archive_file_name));
    header("Pragma: no-cache"); 
    header("Expires: 0");
    if( file_exists($folder_path.$archive_file_name)) {
        ob_clean();
        readfile($folder_path.$archive_file_name);
    }
    unlink($folder_path.$archive_file_name);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T11:59:44.507

如果要添加到 zip 目录的“文件”作为字符串存储在数据库中，则可以使用[`ZipArchive::addFromString`](http://ca.php.net/manual/en/ziparchive.addfromstring.php). 如果数据库存储指向实际文件的指针，请使用[`ZipArchive::addFile`](http://ca.php.net/manual/en/ziparchive.addfile.php)

# ios - 保留/释放错误

> ID：11933754
> 
> 赞同：0
> 
> 时间：2012-08-13T11:50:59.803
> 
> 标签：ios, exc-bad-access, retaincount

我试图弄清楚为什么我会得到`EXC_BAD_ACESS` 这段代码。我没有头绪。任何人都可以帮助我吗？

```
- (void)loadJsonFile:(NSString*)fileName {
    NSError *error = nil;
    NSData *jsonData = [[[NSString alloc]
                         initWithContentsOfFile:[[NSBundle mainBundle]
                                                 pathForResource:fileName ofType:@"json"]
                         encoding:NSUTF8StringEncoding error:&error]
                        dataUsingEncoding:NSUTF8StringEncoding];

    jsonDic = [[NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error] retain];
   [jsonData release];
} 
```

如果我注释掉“ `[jsonData release];`”行，一切正常。但为什么 ？我分配`jsonData`，用数据填充它并将其传递`NSJSONSerialization`给以获取 jsonDic。完成序列化后，我释放`jsonData`并想使用 jsonDic，但是在“ `[jsonData release];`”我得到“ `EXC_BAD_ACCESS`”异常之后的一段时间。

我不知道，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:09:41.160

你 release `jsonData`，但你从未保留它。静态分析器 (Menu `"Product" ➞ "Analyze"`) 会告诉你这个问题。此外，您没有释放`NSString`您分配的内容。

像这样做：

```
- (void)loadJsonFile:(NSString*)fileName {
    NSError *error = nil;
    NSData *jsonData = [[[[[NSString alloc]
                         initWithContentsOfFile:[[NSBundle mainBundle]
                                                 pathForResource:fileName ofType:@"json"]
                         encoding:NSUTF8StringEncoding error:&error] autorelease]
                        dataUsingEncoding:NSUTF8StringEncoding] retain];

    jsonDic = [[NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error] retain];
    [jsonData release];
} 
```

您可能需要考虑使用 ARC（自动引用计数）。Xcode 可以使用 Menu 几乎完全自动地转换您的项目`"Edit" ➞ "Refactor" ➞ "Convert to Objective-C ARC…"`。继续手动管理内存的原因很少。

# python - “NoneType”对象没有属性“tttttt”

> ID：11933756
> 
> 赞同：-2
> 
> 时间：2012-08-13T11:51:02.187
> 
> 标签：python, openerp

我对该代码有疑问。它有什么问题？

```
class test(osv.osv):
    _name = "test"    
    _description = "uuuu"    

    def tttttt():
        return "testtt"

test() 

instance = test()
print (instance.tttttt()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:04:33.293

有趣的问题。经过一番挖掘，似乎OpenERP框架对对象创建机制做了一些奇怪的事情。对于`BaseModel`like`osv.osv`和您的类的子类，该[`__new__()`方法](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/4261/openerp/osv/orm.py#L922)只是在池中注册该类并返回`None`.

您可以通过稍微修改您的打印声明来确认这一点。

```
instance = test()
print instance is None # will print True. 
```

据我所知，OpenERP 模型类不能在服务器进程之外运行。[如果您正在尝试编写单元测试或其他东西，您要么必须编写单独的帮助程序类并对其进行测试，要么使用YAML 测试框架](http://doc.openerp.com/v6.1/contribute/15_guidelines/coding_guidelines_testing.html)运行全面的集成测试。

有关测试助手类的示例，请参阅我们的[`product_stockouts`](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/files/head:/product_stockouts/)模块。这些`sim_*`类是单元测试的助手，它们都被`product_stockouts.py`.

# qt - 如何将值从一个 SLOT 传递到另一个 SLOT

> ID：11933759
> 
> 赞同：0
> 
> 时间：2012-08-13T11:51:09.480
> 
> 标签：qt

这个问题绝对是一个新手问题，所以我为此道歉。我有一个看起来像这样的插槽。

```
 void MainWindow::on_actionSelect_for_hashing_triggered()
 {

 QFile file(QFileDialog::getOpenFileName (this, tr("Open File"),
                                         "",tr("")));

     if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
         return;  
     QByteArray line = file.readAll();  
 } 
```

现在我想将线路传递给我的另一个 SLOT，它看起来像这样..

```
 void MainWindow::on_pushButton_clicked()
 {
  line2 = line;  // QByteArray line2 has been assigned globally
 qDebug()<<line2;
  } 
```

所以在这里我只想打印 line2，它将从第一个 SLOT 的行接收值。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T11:58:04.173

```
void MainWindow::on_actionSelect_for_hashing_triggered()
{

    QFile file(QFileDialog::getOpenFileName (this, tr("Open File"), "",tr("")));

    if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
        return;  
    QByteArray line = file.readAll();  
    on_pushButton_clicked( line );
}

void MainWindow::on_pushButton_clicked( const QByteArray& line )
{
    line2 = line;  // QByteArray line2 has been assigned globally
    qDebug()<<line2;
} 
```

只需调用该方法并传递字节数组。如果你需要一个`on_pushButton_clicked()`，那么只需重载或提供一个默认参数。

如果您希望能够在运行时连接/断开它们，您将不得不`on_actionSelect_for_hashing_triggered()`发出`on_pushButton_clicked(..)`可以接收的东西。

我将发表关于不使用全局变量的常规演讲......

# c# - 如何从mongo的集合中获取最后N个文档？

> ID：11933760
> 
> 赞同：2
> 
> 时间：2012-08-13T11:51:09.923
> 
> 标签：c#, mongodb, find, mongodb-.net-driver

`C#`如何从集合中获取插入`last N`的文档`mongo`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:18:18.527

我做了解决方案

```
SortByBuilder sbb = new SortByBuilder();
sbb.Descending("_id");
var allDocs = collection.FindAllAs<BsonDocument>().SetSortOrder(sbb).SetLimit(N); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:14:31.517

The general pattern is using

```
docs = collection.find().sort({'_id' : -1}.limit(N) 
```

By sorting on _id you will take into account that the standard object id is only increasing over time (unless implemented otherwise). Otherwise you need to sort on some timestamp field that you add/maintain within your code and application.

# ruby-on-rails-3 - 如何在 Rails 3 中将网站图标添加到 ActiveAdmin

> ID：11933761
> 
> 赞同：2
> 
> 时间：2012-08-13T11:51:18.450
> 
> 标签：ruby-on-rails-3, activeadmin

如何在 Active Admin 中添加网站图标。我正在使用 rails 3.2 和 active admin 0.4.3

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-07-01T19:29:18.523

尽管这个问题是关于 ActiveAdmin 的旧版本，但截至[本次提交](https://github.com/gregbell/active_admin/commit/17afb732ef98c0631a5949e32b8c31f0dff5766e)， ActiveAdmin 在初始化程序中支持网站图标。对我来说，在 active_admin.rb 的第 145 行附近：

```
 # == Setting a Favicon
  #
  # config.favicon = '/assets/favicon.ico' 
```

HTH 下一个出现的人。我几乎做了最高投票的答案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T19:31:24.217

在他们支持 favicon 之前，您可以做到这一点：

```
$(document).ready(function(){

  $('head').append("<link href='favicon.ico' rel='shortcut icon'>");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:58:05.063

您必须将它添加到您的 ActiveAdmin.rb 初始化程序中，如下所示：

```
module ActiveAdmin
  module Views
    module Pages
      class Base < Arbre::HTML::Document

        def build_active_admin_head
          within @head do
            insert_tag Arbre::HTML::Title, [title, render_or_call_method_or_proc_on(self, active_admin_application.site_title)].join(" | ")
            insert_tag Arbre::HTML::Link, rel: 'shortcut icon', href: '/favicon.gif'
            #                          Change the href used in this line ^
            active_admin_application.stylesheets.each do |style|
              text_node(stylesheet_link_tag(style.path, style.options).html_safe)
            end

            active_admin_application.javascripts.each do |path|
              script :src => javascript_path(path), :type => "text/javascript"
            end
            text_node csrf_meta_tag
          end
        end 
```

# php - Zend_Http_Adapter & 错误信息

> ID：11933762
> 
> 赞同：0
> 
> 时间：2012-08-13T11:51:19.927
> 
> 标签：php, zend-framework

我目前正在为我的项目使用 zend 框架，这是我的问题。

我有一个不是 Zend Form 创建的表单，而是手动 HTML 表单。我有一个元素。现在我的问题是，我想为 Zend_Http_Adapter 为正在上传的无效文件捕获的错误设置自定义错误消息。

我不想这样结束：文件'sample.doc'有一个错误的扩展名或类似的东西。

有没有办法为此设置自定义错误消息？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:46:40.317

是的，这是翻译默认消息的方法：

```
$adapter->addValidator('Extension', false,
                       array(
                           'jpg', 'jpeg', 'png', 'gif',
                           'case' => false,
                           'messages' => array(
                               // override false extension message
                               Zend_Validate_File_Extension::FALSE_EXTENSION =>
                              'I do not accept files of that extension'
                           )
)); 
```

您通常可以`Zend_Validate`通过将数组传递`messages`给验证器来覆盖任何错误消息，其中键是来自验证器的特定错误，值是已翻译的消息。

# ruby-on-rails - 重写 Rails 路线

> ID：11933765
> 
> 赞同：1
> 
> 时间：2012-08-13T11:51:33.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routes

目前，我正在开发 RoR 的博客引擎，但遇到了严重的路由问题。`routes.rb`看起来像这样：

```
match '/admin', :to => 'posts#new'
match '/get/:id', :to => 'posts#get'
match '/new', :to => 'posts#new'
delete '/:id', :to => 'posts#destroy'
post '/edit/:id', :to => 'posts#update'
put '/edit/:id', :to => 'posts#update'
get '/edit/:id', :to => 'posts#new', :as => 'post'
get '/:slug', :to => 'posts#show', :as => 'post'
root :to => 'posts#index' 
```

我想将其转换为：

```
resources :admin do
  resources :posts
end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:14:04.940

需要更多信息。您想在管理资源中放置什么？只发帖，还是编辑？

但是有一些入门技巧： - 您必须拆分您的帖子控制器。在控制器中创建一个名为 admin（资源名称）的子文件夹。将管理功能移动到此控制器，并将公共帖子功能（索引和显示）留在普通的帖子控制器中。- 对视图执行相同的操作。

而且，我怀疑您希望路线是：

```
namespace :admin
  resources :posts
end

get '/:id', :to => 'posts#show'

root :to => 'posts#index' 
```

然后，您可以将某种形式的身份验证放入 admin 命名空间。

希望这对您有所帮助。

# windows - windows内核中的free/malloc函数

> ID：11933777
> 
> 赞同：3
> 
> 时间：2012-08-13T11:52:12.853
> 
> 标签：windows, function, kernel, malloc, free

我在哪里可以找到内核中的函数`free`？`malloc`我确实包含`stdlib.h`但`free`和`malloc`函数不在`stdlib.h`. 我在哪里可以找到这些功能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:29:20.337

看看[ExAllocatePoolWithTag](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544520%28v=vs.85%29.aspx)。[OSR](http://www.osronline.com/showThread.cfm?link=59047)上有一些讨论，如果您正在执行 Windows 内核编程，这是一个很好的资源。

为本地主机上的所有开发文件和文档安装[Windows 驱动程序工具包/DDK。](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)

# c# - XDocument.Descendants 不返回后代

> ID：11933782
> 
> 赞同：40
> 
> 时间：2012-08-13T11:52:38.187
> 
> 标签：c#, .net, xml, linq-to-xml

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <SetNationalList xmlns="http://www.lge.com/ddc">
      <nationalList>
        <portnumber>6000</portnumber>
        <slaveaddress>7000</slaveaddress>
        <flagzone>2</flagzone>
        <flagindivisual>5</flagindivisual>
        <flagdimming>3</flagdimming>
        <flagpattern>6</flagpattern>
        <flaggroup>9</flaggroup>
      </nationalList>
    </SetNationalList>
  </s:Body>
</s:Envelope> 
```

```
XDocument xdoc = XDocument.Parse(xml);
foreach (XElement element in xdoc.Descendants("nationalList"))
{
   MessageBox.Show(element.ToString());
} 
```

我想遍历下的每个节点，`nationalList`但它对我不起作用，它`foreach`完全跳过了循环。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-13T11:53:49.517

您不包括命名空间，即`"http://www.lge.com/ddc"`默认来自父元素的命名空间：

```
XNamespace ns = "http://www.lge.com/ddc";
foreach (XElement element in xdoc.Descendants(ns + "nationalList"))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-13T11:54:32.920

您必须使用命名空间：

```
// do _not_ use   var ns = ... here.
XNameSpace ns = "http://www.lge.com/ddc";

foreach (XElement element in xdoc.Descendants(ns + "nationalList")
{
      MessageBox.Show(element.ToString());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-28T01:24:33.397

如果您不想在所有选择器中使用 ns 前缀，您还可以在解析 xml 时预先删除命名空间。例如：

```
string ns = "http://www.lge.com/ddc";
XDocument xdoc = XDocument.Parse(xml.Replace(ns, string.Empty));

foreach (XElement element in xdoc.Descendants("nationalList")
... 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-03-01T15:03:10.223

必须包含命名空间是正确的，但除非将命名空间放在花括号中，否则上面的示例不起作用：

```
XNameSpace ns = "http://www.lge.com/ddc";

foreach (XElement element in xdoc.Descendants("{" + ns + "}nationalList")
{
      MessageBox.Show(element.ToString());
} 
```

问候基督徒

# matlab - 对数刻度（x 轴）直方图

> ID：11933787
> 
> 赞同：2
> 
> 时间：2012-08-13T11:52:53.367
> 
> 标签：matlab, plot, histogram

我需要的是在对数刻度上显示 X 轴的直方图。但是，我仍然希望直方图中的每个条都具有相同的宽度。

不管怎样，我想出了（或基于）具有较高值的​​显示条作为较窄的显示条（它们在普通比例上具有相同的宽度，而不是在对数比例上）。

这是我现在正在做的事情：

```
edges = 10.^(c_min:0.1:c_max); 
h = histc(data, edges);
bar(edges, h); set(gca, 'Xscale', 'log'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T12:25:04.137

由于您的条应该均匀分布，您可以使用 x 值 1,2,.. 绘制它们，然后更改轴标签。

```
edges = 10.^(c_min:0.1:c_max); 
h = histc(data, edges);

centers = sqrt(edges(1:end-1).*edges(2:end));

bar(h)

%# fix the x-labels, x-axis extents
xlim([0.5,length(centers)+0.5])
set(gca,'xticklabel',num2str(centers(:),'%5.2f')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:29:43.597

使用`patch`代替`bar`：

```
figure, hold on
edges = 10.^(c_min:0.1:c_max);
h = histc(data, edges);

for ii = 1:numel(edges)-1    
    patch(...
        [edges(ii) edges(ii) edges(ii+1) edges(ii+1)], ...
        [0 h(ii) h(ii) 0],...
        'b');
end 
```

虽然这个特定的代码没有做你想要的，这是定义`edges`而不是方法的问题，所以你不得不摆弄一下`edges`（也许重新定义它们`patch`）

# android - Android 缩略图大小练习

> ID：11933792
> 
> 赞同：1
> 
> 时间：2012-08-13T11:53:24.833
> 
> 标签：android, thumbnails, image-scaling

我用 AsyncTask 实现了一个 ListView，用于图像加载和调整大小。我的问题是关于不同 Android 屏幕尺寸的缩略图的图像尺寸。
如果我将缩略图缩小到 100 像素的宽度和高度，我的所有图像在每个屏幕尺寸下都有最佳尺寸。这意味着我所有的缩略图都具有相同的大小。Android 是否在内部缩放图像？
如果我的所有列表项没有自己的图像，我想为它们显示一个占位符。
我知道这个问题有点令人困惑，但我的意思是：
我应该将我的图像缩小到只有一个尺寸并且没有为每个屏幕尺寸带来占位符以没有不同的缩略图尺寸或按单个屏幕尺寸缩放我的图像并使用后备来自我的 ldpi、mdpi、hdpi 还是 xhdpi？我希望这是可以理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:59:13.837

好的，所以您的问题是您是否应该提供所有密度的占位符？可以，但没必要。巧合的是，我们刚刚在 stackoverflow 上的 tze android 聊天网站上讨论了这个问题。一位用户测试了它是否有必要提供低于 hdpi 的图像。他对其进行了测试，他注意到 Android 将所有可绘制对象的大小调整得非常完美，因此您不会看到任何不同。我希望我能回答你的问题。

# bash - 从最后枚举的 Bash 历史

> ID：11933794
> 
> 赞同：0
> 
> 时间：2012-08-13T11:53:35.260
> 
> 标签：bash, cygwin, history

在 bash 中，可以从从末尾开始枚举的历史记录`!-1`中执行命令。但是如何查看历史以便通过内置方式显示所提到的枚举而不是通常的枚举呢？当然可以为此编写一个简单的脚本，但我觉得应该有某种选择。`1``0`

另一个问题是，是否有办法以某种方式切换历史扩展，以使该`-`符号变得不必要。说交换`!1`和的意思`!-1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:14:37.090

显示负索引很容易实现。只需获取历史的长度（或从中获取`history 1`），然后从所有其他历史项目的索引中减去它。

```
neghistory() {
    local i n s
    read n s < <(history 1)
    history "$@" | while read i s; do
        printf '%5d %s\n' $((i-n-1)) "$s"
    done
} 
```

我没有看到任何像这样影响历史输出的内置方法，也没有改变历史扩展中索引的工作方式。

# ruby-on-rails - Rails - 根据查询字符串中的参数数获取结果

> ID：11933801
> 
> 赞同：0
> 
> 时间：2012-08-13T11:53:59.433
> 
> 标签：ruby-on-rails, activerecord, query-string

我正在开发一个事件应用程序，我想根据查询字符串中的 3 个参数**location 或 starts_at 或 ends_at过滤事件。**查询字符串中可以有任何一个、两个或所有参数。在我使用**if-else**语句时，我需要创建 6 个案例，这会使我的代码变得笨拙。相反，我正在考虑以这种方式实现一些东西：

```
class EventsController < ApplicationController
  def index
    unless params.empty?
      unless params[:location].nil?
        @events = Event.where("location = ?", params[:location])       
      end

       unless params[:starts_at].nil?
         unless @events.empty?
           @events = @events.where("start_date = ?", params[:start_date])      
         else
           @events = Event.where("Date(starts_at) = Date(?)", params[:starts_at])
         end
       end
       unless params[:ends_at].nil?
         unless @events.empty?
           @events = @events.where("end_date = ?", params[:end_date])      
         else
           @events = Event.where("Date(ends_at) = Date(?)", params[:ends_at])
         end
       end
    end
  end
end 
```

但是此代码不起作用，因为**where**查询不适用于数组。有人可以为此建议我一些解决方案吗..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:03:25.170

您应该能够将您的`params`哈希直接传递给`where`，它将根据该哈希的键和值形成正确的 SQL：

```
Event.where(params) 
```

控制台中的示例：

```
1.9.3p194 :001 > puts Example.where(:location => 'here', :started_at => '2012-08-13').to_sql
SELECT "examples".* FROM "examples"  WHERE "examples"."location" = 'here' AND "examples"."started_at" = '2012-08-13' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:11:31.357

尝试关注

```
 def index
    unless params.empty?
      where_array, arr = [], []
      if params[:location]
        where_array << "location = ?"
        arr << params[:location]
      end
      if params[:starts_at]
        where_array << "start_date = ?"
        arr << params[:starts_at]
      end
      if params[:ends_at]
        where_array << "end_date = ?"
        arr << params[:ends_at]
      end
       @events = arr.blank? ? [] : Event.where([where_array.join(" AND "), *arr])
    end
  end 
```

# c# - FileNotFoundException - 没有文件丢失

> ID：11933802
> 
> 赞同：1
> 
> 时间：2012-08-13T11:54:02.837
> 
> 标签：c#, windows-phone-7, filenotfoundexception

第一次进入视图时，会引发此异常：

> mscorlib.dll 中出现了“System.IO.FileNotFoundException”类型的第一次机会异常

首先 - 为什么它会在我第一次进入该特定视图时发生？即使问题出在构造函数中（不可能），每次我进入视图时都会调用它（并抛出异常）。

其次 - 我将如何找到这种异常的来源？它不会闯入调试器，并且不会丢失任何资源文件（如背景图像、应用程序栏图标）。

最后——什么（除了在代码中直接引用文件）会抛出这样的异常？

我会向您展示有问题的代码，但文件有点太大，无法发布所有内容。

**更新：**

调试后，我注意到错误发生*在*构造函数之后`OnNavigatedTo()`和*之前* `Loaded()`。在 OnNavigatedTo 方法中启动了一个线程，但我尝试捕获该部分的每个元素（以及它的每个内部部分），但没有发现错误。

**更新 2：**

在调试了一些之后，我发现了错误消息：

> 找不到文件或程序集名称“System.Windows.debug.resources, Version=2.0.5.0, Culture=en-US, PublicKeyToken=xxxxxxxxxxxxx”或其依赖项之一。

还有堆栈跟踪：

```
at System.ThrowHelper.throwVersion37CompatException(ExceptionType newEType,
    String newString, ExceptionType oldEType, String oldString)
at System.Reflection.Assembly.Load(String assemblyString)
at System.Windows.Resx..ctor()
at System.Windows.Resx.GetLoader()
at System.Windows.Resx.GetStringHelper(String name)
at System.Windows.Resx.GetString(String name)
at System.Windows.Controls.Primitives.ToggleButton.ToString()
at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj,
    IntPtr unmanagedObjArgs, Int32 argsTypeIndex,
    Int32 actualArgsTypeIndex, String eventName) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:47:03.950

1.  您可以为第一次机会异常 Visual Studio 设置中断，调试以查看有关 FileNotFound 异常的详细信息，即缺少哪个文件。

2.  有时，clr 会尝试查找一些扩展 dll，这通常对我们来说太神奇了。例如，如果您在项目中使用 XmlSerialize，如果您不使用 sgen.exe 为您的 serializble 类型生成动态 xml 序列化 dll，CLR 会在运行时生成一个，但在此之前，clr 会尝试加载 assemble ，这将导致 FileNotFoundException，但被捕获

# wordpress - 由于错误无法删除插件：无法完全删除插件 my-plugin/my-plugin.php

> ID：11933811
> 
> 赞同：7
> 
> 时间：2012-08-13T11:54:37.670
> 
> 标签：wordpress, uninstallation

为什么卸载以下（空）插件会导致错误？

这里是`my-plugin/my-plugin.php`：

```
<?php
/*
Plugin Name: My Plugin
*/ 
```

和`my-plugin/uninstall.php`：

```
<?php 
```

当我单击“删除”然后确认时，我收到以下错误：

> 由于错误无法删除插件：无法完全删除插件 my-plugin/my-plugin.php。

这里有什么问题？

* * *

```
~/Sites/wordpress/wp-content/plugins/my-plugin $ ls -ll
total 16
-rwxrwxrwx@ 1 me  staff  34 13 Aug 21:43 my-plugin.php
-rwxrwxrwx@ 1 me  staff   6 13 Aug 21:44 uninstall.php 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T04:29:35.283

确实，所有权问题。运行以下命令后，我可以成功删除插件。

```
chown -R <myself>:<myself> my-plugin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-27T15:27:45.433

这对我有用：

1.  `chmod 777 -R <yourfilename>`

2.  添加`define('FS_METHOD', 'direct');`到`wp-config.php`文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-12T03:35:52.357

*正如我在[这里](https://wordpress.stackexchange.com/a/266658/48885)发布的：*

这可能是本地文件权限或 WordPress 配置的结果。

要修复本地文件权限，您可以：

*   如果您具有 root shell 访问权限（例如在 VPS 服务器上），您可以运行以下命令：

    ```
    sudo chown www-data:www-data * -R 
    sudo usermod -a -G www-data YOUR-USERNAME-HERE 
    ```

    这确保了 Web 服务器被授予访问“组”权限。

*   将文件和目录权限更改为 775（如果失败，则为 777），以便 PHP 可以写入必要的文件/文件夹。为了获得最佳安全性（特别是如果您在共享主机上），有些人建议仅临时执行此操作以执行更新，然后再次删除写入权限。

`/wp-config.php`更罕见的是，如果您的 WordPress 配置设置为使用以下内容，也会发生此错误：

```
define( 'FS_METHOD', 'ftpext' ); 
```

这告诉 WordPress 它需要使用 FTP 来进行文件更改，而不是直接使用本地文件系统。该行后面很可能是 FTP 登录信息。如果此登录信息不正确，则 WordPress 将无法登录并执行文件系统更改。

# bash - Bash one liner：如何在花括号命令组中嵌套花括号以生成列表？

> ID：11933812
> 
> 赞同：1
> 
> 时间：2012-08-13T11:54:44.167
> 
> 标签：bash

目标是创建一个单行（复制和粘贴）bash 命令。bash 一行命令应该对驱动器进行分区和格式化，当这导致可安装的卷时，一些初始维护命令。

`cd /Volumes/VolumeName`目标是在当前 shell 上下文中成功时执行命令列表。这组命令可以在 bash 中使用花括号来完成。当`cd /Volumes/VolumeName`失败（`echo $?`！= 0）时，不需要进一步的命令执行，命令执行可以停止。

命令的结果`cd /Volumes/$VOL && {sudo rm -fr .{,_.}{fseventsd,Spotlight-V100,Trashes}; mkdir .fseventsd;}`是：

```
-bash: syntax error near unexpected token `}' 
```

瓶颈可能是花括号命令列表中的命令之一是使用花括号生成列表：`sudo rm -fr .{,_.}{fseventsd,Spotlight-V100,Trashes}`.

如何在花括号命令组中嵌套花括号以生成列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:05:14.560

您只是缺少必要的前导空格。考虑：

```
mini:~ michael$ { echo sudo rm -fr .{,_.}{fseventsd,Spotlight-V100,Trashes}; echo mkdir .fseventsd;}
sudo rm -fr .fseventsd .Spotlight-V100 .Trashes ._.fseventsd ._.Spotlight-V100 ._.Trashes
mkdir .fseventsd
mini:~ michael$ {echo sudo rm -fr .{,_.}{fseventsd,Spotlight-V100,Trashes}; echo mkdir .fseventsd;}
-bash: syntax error near unexpected token `}' 
```

如果您查看`man 1 bash`“*复合命令*”部分，您会看到以下内容（强调我的）：

> { 列表; }
> 
> list 只是在当前的 shell 环境中执行。list 必须以换行符或分号结束。这称为组命令。返回状态是列表的退出状态。请注意，与元字符 ( 和 ) 不同，**{ 和 } 是保留字**，并且必须出现在允许识别保留字的地方。 **由于它们不会导致断字，因此必须用空格将它们与列表隔开**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:59:39.217

也许问题出在嵌套的大括号上。试试这个：

```
cd /Volumes/$VOL && (sudo rm -fr .{,_.}{fseventsd,Spotlight-V100,Trashes}; mkdir .fseventsd;) 
```

如果要使用子shell，正确的方法是使用“（）”而不是“{}”。使用“()”，您不需要在命令的开头添加额外的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T12:06:55.087

在用于命令分组的大括号周围添加空格。`{ sudo ...`而不是`{sudo ...`

# java - 使用可注入单例

> ID：11933813
> 
> 赞同：1
> 
> 时间：2012-08-13T11:54:46.343
> 
> 标签：java, unit-testing, dependency-injection, junit, mocking

我最近偶然发现了这个[有趣的概念](http://wiki.apidesign.org/wiki/Injectable_Singleton)，它可以为我节省很多测试工作。我不明白的是如何在运行时注入提供程序？

场景很简单：我正在使用我选择的模拟框架在运行时构建一个模拟对象，但我不知道生成的类的名称，因为它是一个模拟（所以我不能提前配置它，我不想）。

有人在单元测试中成功地使用了这种技术吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:39:19.227

那篇文章中描述的概念是在后台使用[服务定位器的](http://en.wikipedia.org/wiki/Service_locator_pattern)[环境上下文。](http://blogs.msdn.com/b/ploeh/archive/2007/07/23/ambientcontext.aspx)

由于使用了静态属性和服务定位器，这种模式对于单元测试非常不方便。为了能够运行验证使用此单例的代码的测试，您需要设置一个有效的服务定位器并使用您关心使用测试的单例（可能是模拟实例）对其进行配置。

即使是文章给出的示例也已经存在这些问题，因为“你喜欢单身人士吗？” 代码，很难测试：

```
if (DialogDisplayer.getDefault().yesOrNo(
    "Do you like singletons?"
)) {
    System.err.println("OK, thank you!");
} else {
    System.err.println(
        "Visit http://singletons.apidesign.org to"
        + " change your mind!"
    );
} 
```

更好的选择是使用构造函数注入来注入该单例（请原谅我的法语，但我不是母语 Java）：

```
public class AskTheUserController
{
    private DialogDisplayer dialogDisplayer;
    private MessageDisplayer messageDisplayer;

    public AskTheUserController(DialogDisplayer dialogDisplayer,
        MessageDisplayer messageDisplayer)
    {
        this.dialogDisplayer = dialogDisplayer;
        this.messageDisplayer = messageDisplayer;
    }

    public void AskTheUser()
    {
        if (this.dialogDisplayer.yesOrNo(
            "Do you like singletons?"
        )) {
            this.messageDisplayer.display("OK, thank you!");
        } else {
            this.messageDisplayer.display(
                "Visit http://singletons.apidesign.org to"
                + " change your mind!"
            );
        }
    }
} 
```

该代码中还有另一个“隐藏”依赖项：`System.err.println`. 它使用`MessageDisplayer`接口进行了抽象。这段代码有几个明显的优点：

*   通过注入这两个依赖项，消费者甚至不需要知道这些依赖项是单例的。
*   代码清楚地传达了它所需要的依赖关系。
*   可以使用模拟对象轻松测试代码。
*   测试代码不需要配置服务定位器。

您的测试可能如下所示：

```
@Test
public void AskTheUser_WhenUserSaysYes_WeThankHim()
{
    // Arrange
    bool answer = true;

    MockMessageDisplayer message = new MockMessageDisplayer();
    MockDialogDisplayer dialog = new MockDialogDisplayer(answer);

    AskTheUserController controller =
        new AskTheUserController(dialog, message);

    // Act
    controller.AskTheUser();

    // Assert
    Assert.AreEqual("OK, thank you!", message.displayedMessage);
}

@Test
public void AskTheUser_WhenUserSaysNo_WeLetHimChangeHisMind()
{
    // Arrange
    bool answer = true;

    MockMessageDisplayer message = new MockMessageDisplayer();
    MockDialogDisplayer dialog = new MockDialogDisplayer(answer);

    AskTheUserController controller =
        new AskTheUserController(dialog, message);

    // Act
    controller.AskTheUser();

    // Assert
    Assert.IsTrue(
        message.displayedMessage.contains("change your mind"));
} 
```

当您使用文章中所示的“可注入单例”模式时，您的测试代码将永远不会像上面的代码那样显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:24:21.293

单例没有错，单例在任何软件中都是有用且必要的概念。问题是您不应该使用静态字段和方法来实现它们。

我使用 Guice 来注入我的单例，并且很长一段时间以来我都不必在我的代码库和测试中使用静态。

以下是一些您可能会觉得有用的链接，它们解释了如何使用 Guice 实现可测试的单例：

*   [恢复单例模式](http://beust.com/weblog/2011/03/10/rehabilitating-the-singleton-pattern/)。
*   [Guice 和 TestNG](http://beust.com/weblog/2010/12/10/testng-and-guice-a-marriage-made-in-heaven/)

# python - django 1.2 GAE python->将html转换为html安全字符串？ 用字符串替换

> ID：11933814
> 
> 赞同：0
> 
> 时间：2012-08-13T11:54:47.653
> 
> 标签：python, html, django, google-app-engine

当我在 django 1.2 中渲染我的模板并显示字符串时

```
<br /> 
```

我得到的标签

```
&lt;br /&gt; 
```

反而？

意思是我实际上看到了文字

```
<br /> 
```

而不是获得非常需要的换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:57:07.710

我假设您的意思是您使用`{{ string }}`符号从变量中输出字符串。如果您知道要输出的字符串是安全的，请使用`|safe`过滤器。

`{{ string|safe }}`

我不得不建议不要在未经适当检查的情况下对用户提供的任何数据执行此操作。

[Django 文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#safe)

# jquery - 带有服务器端处理的数据表内联编辑

> ID：11933821
> 
> 赞同：2
> 
> 时间：2012-08-13T11:55:14.863
> 
> 标签：jquery, datatables

我正在尝试使用以下示例对数据表使用内联编辑：[DataTables - full row editing example](http://datatables.net/media/blog/inline-editing/complete.html)。我也在使用服务器端处理。我似乎无法让两者正常工作。编辑和删除链接不会出现在表格中。有人知道我哪里出错了吗？

**这是我的js：**

```
function restoreRow ( $acTable, nRow )
{
    var aData = $acTable.fnGetData(nRow);
    var jqTds = $('>td', nRow);

    for ( var i=0, iLen=jqTds.length ; i<iLen ; i++ ) {
        $acTable.fnUpdate( aData[i], nRow, i, false );
    }

    $acTable.fnDraw();
}

function editRow ( $acTable, nRow )
{
    var aData = $acTable.fnGetData(nRow);
    var jqTds = $('>td', nRow);
    jqTds[0].innerHTML = '<input type="text" value="'+aData[0]+'">';
    jqTds[1].innerHTML = '<input type="text" value="'+aData[1]+'">';
    jqTds[2].innerHTML = '<input type="text" value="'+aData[2]+'">';
    jqTds[3].innerHTML = '<input type="text" value="'+aData[3]+'">';
    jqTds[4].innerHTML = '<input type="text" value="'+aData[4]+'">';    
    jqTds[5].innerHTML = '<input type="text" value="'+aData[5]+'">';    
    jqTds[6].innerHTML = '<input type="text" value="'+aData[6]+'">';    
    jqTds[7].innerHTML = '<input type="text" value="'+aData[7]+'">';    
    jqTds[8].innerHTML = '<a class="edit" href="">Save</a>';
}

function saveRow ( $acTable, nRow )
{
    var jqInputs = $('input', nRow);
    $acTable.fnUpdate( jqInputs[0].value, nRow, 0, false );
    $acTable.fnUpdate( jqInputs[1].value, nRow, 1, false );
    $acTable.fnUpdate( jqInputs[2].value, nRow, 2, false );
    $acTable.fnUpdate( jqInputs[3].value, nRow, 3, false );
    $acTable.fnUpdate( jqInputs[4].value, nRow, 4, false ); 
    $acTable.fnUpdate( jqInputs[5].value, nRow, 5, false ); 
    $acTable.fnUpdate( jqInputs[6].value, nRow, 6, false ); 
    $acTable.fnUpdate( jqInputs[7].value, nRow, 7, false ); 
    $acTable.fnUpdate( '<a class="edit" href="">Edit</a>', nRow, 8, false );
    $acTable.fnDraw();
}

$(document).ready(function() {
        var $acTable= $("#academic_table").dataTable( {
        "oLanguage": {
            "sSearch": "Filter:"
        },
        "$acTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
            "aButtons": [
                "copy",
                "xls",
                "csv",
                "pdf",
                "print"
            ]
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "scripts/serverside/academic_serverside.php",
        "iDisplayLength": 10,       
        "bJQueryUI": false,
        "sPaginationType": "scrolling",
        "sDom": '<"clear"><"top"Tilr<"clear">pt>',
        "aoColumns": [ 
            {"bVisible":false},
            {"bVisible":false},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":true},
            {"bVisible":false}
        ],
        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        $('td:eq(4)', nRow).html(''+ aData[6] +'&nbsp;'+ aData[7] +'');        
        }
        });

    var nEditing = null;

    $('#new').click( function (e) {
        e.preventDefault();

        var aiNew = $acTable.fnAddData( [ '', '', '', '', '', 
            '<a class="edit" href="">Edit</a>', '<a class="delete" href="">Delete</a>' ] );
        var nRow = $acTable.fnGetNodes( aiNew[0] );
        editRow( $acTable, nRow );
        nEditing = nRow;
    } );

    $('#academic_table a.delete').live('click', function (e) {
        e.preventDefault();

        var nRow = $(this).parents('tr')[0];
        $acTable.fnDeleteRow( nRow );
    } );

    $('#academic_table a.edit').live('click', function (e) {
        e.preventDefault();

        /* Get the row as a parent of the link that was clicked on */
        var nRow = $(this).parents('tr')[0];

        if ( nEditing !== null && nEditing != nRow ) {
            /* Currently editing - but not this row - restore the old before continuing to edit mode */
            restoreRow( $acTable, nEditing );
            editRow( $acTable, nRow );
            nEditing = nRow;
        }
        else if ( nEditing == nRow && this.innerHTML == "Save" ) {
            /* Editing this row and want to save it */
            saveRow( $acTable, nEditing );
            nEditing = null;
        }
        else {
            /* No edit in progress - let's start one */
            editRow( $acTable, nRow );
            nEditing = nRow;
        }
    } );

}); 
```

**这是表格：**

添加新行

```
<table class="dataTable" id="academic_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<tr>
<th>ID</th> 
<th>Year</th> 
<th>Employee</th>  
<th>Division</th>
<th>Line Manager</th>
<th>Contract</th>
<th>Entitlement</th>
<th>Units</th>
<th>Edit</th>
<th>Delete</th>
</tr> 
</thead>
<tbody>
    <tr>
        <td colspan="4" class="dataTables_empty">Loading data from server</td>
    </tr>
</tbody>

<tfoot>
<tr>
<th>ID</th> 
<th>Year</th> 
<th>Employee</th>  
<th>Division</th>
<th>Line Manager</th>
<th>Contract</th>
<th>Entitlement</th>
<th>Units</th>
<th>Edit</th>
<th>Delete</th>
</tr> 
</tfoot>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:59:32.807

在 aoColumns 中使用此示例，他对每一列使用 mDataProp，但对与数据列之一不匹配的额外列使用 null。他使用 sDefaultContent 添加他的图像，并使用 JQuery 将事件处理绑定到该列中的单元格。

[http://www.datatables.net/blog/Drill-down_rows](http://www.datatables.net/blog/Drill-down_rows)

所以就我而言，我添加了

```
{"mDataProp": null, "sDefaultContent": '<a class="edit" href="">Edit</a>'},
{"mDataProp": null, "sDefaultContent": '<a class="delete" href="">Delete</a>'}, 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-06T12:57:30.953

您将从服务器端处理的[链接中获得帮助。](http://jquery-datatables-editable.googlecode.com/svn/trunk/inline-edit.html)如果您 dbl 单击单元格，它会自动转换为可编辑模式。

# modx - ModX 革命电视访问权限未按预期工作

> ID：11933823
> 
> 赞同：0
> 
> 时间：2012-08-13T11:55:37.823
> 
> 标签：modx, modx-revolution, modx-templates

我很难在 ModX Revolution 中的模板变量上设置访问权限。我是管理员组的成员，该组具有对管理员资源组的完全访问权限。但是，每当我将模板变量设置为仅允许管理员访问时，当我尝试编辑使用电视所用模板的页面时，我就再也看不到电视了。

此外，只要允许另一个资源组访问电视，我似乎就可以访问电视。ModX 似乎允许/拒绝访问反转为应有的内容。

我是 ModX 的新手，非常感谢有关此问题的任何帮助。如果需要，我也可以发布更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:05:23.530

创建或编辑电视时，您是在电视的“访问权限”选项卡中设置电视访问权限吗？

我很确定您必须将管理员添加到您尝试将电视限制为的访问组...

# asp.net - 控制页面到达页面顶部

> ID：11933826
> 
> 赞同：0
> 
> 时间：2012-08-13T11:55:52.623
> 
> 标签：asp.net

当我向下滚动并选择 ddl 值时，我有一个包含许多字段和 DDl 的注册页面，然后页面转到页面顶部，我必须再次滚动到控件并且必须选择页面。如何通过以下方式控制页面即使值已更改，也会在控件处停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T11:57:06.060

`MaintainScrollPositionOnPostback="true"`在 Page 指令中使用

像这样的东西

```
<%@ Page MaintainScrollPositionOnPostback="true" %> 
```

了解更多关于这个[去这里](http://msdn.microsoft.com/en-us/library/ydy4x04a.aspx)。

或者，您可以将其放入`Web.config`以使此设置全局化，通过此

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <pages maintainScrollPositionOnPostBack="true">
    </pages>
  </system.web>
<configuration> 
```

# javascript - 从不同的数组 javascript 中获取值

> ID：11933830
> 
> 赞同：0
> 
> 时间：2012-08-13T11:56:07.240
> 
> 标签：javascript

我正在使用 yahoo 的 placemaker 从文本中提取位置名称。从这里我得到一个回调函数，它给了我 2 种不同类型的数组。

这是正在使用的代码，但我无法使用任何我想要的值。

```
 Placemaker.getPlaces(text,function(o){
  if (typeof o.match!=='undefined' && o.match.length==1){
   latitude=o.match.place.centroid.latitude, longitude=o.match.place.centroid.longitude; 
   console.log(latitude,longitude);}

  if(typeof o.match !=='undefined'&& o.match.length==2){
    latitude=o[match].place.centroid.latitude,
    longitude=o[match].place.centroid.longitude;
   console.log(latitude,longitude);
      } 
```

第一个数组看起来像这样

```
({
    match: {
        place: {
            woeId: "29007292",
            type: "Town",
            name: "Jubila, West Bengal, IN",
            centroid: {
                latitude: "23.1626",
                longitude: "87.7889"
            }
        },
        reference: [{
            woeIds: "29007292",
            placeReferenceId: "2",
            placeIds: "1",
            start: "14",
            end: "20",
            isPlaintextMarker: "1",
            text: "jubila",
            type: "plaintext",
            xpath: null
        }, {
            woeIds: "29007292",
            placeReferenceId: "3",
            placeIds: "1",
            start: "82",
            end: "88",
            isPlaintextMarker: "1",
            text: "jubila",
            type: "plaintext",
            xpath: null
        }]
    }
}) 
```

另一个像这样

```
({
    match: [{
        place: {
            woeId: "23424950",
            type: "Country",
            name: "Spain",
            centroid: {
                latitude: "39.8949",
                longitude: "-2.98831"
            }
        },
        reference: {
            woeIds: "23424950",
            placeReferenceId: "1",
            placeIds: "1",
            start: "64",
            end: "70",
            isPlaintextMarker: "1",
            text: "Espa\xF1a",
            type: "plaintext",
            xpath: null
        }
    }, {
        place: {
            woeId: "24865675",
            type: "Continent",
            name: "Europe",
            centroid: {
                latitude: "52.9762",
                longitude: "7.85784"
            }
        },
        reference: {
            woeIds: "24865675",
            placeReferenceId: "2",
            placeIds: "2",
            start: "93",
            end: "99",
            isPlaintextMarker: "1",
            text: "Europa",
            type: "plaintext",
            xpath: null
        }
    }]
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:02:44.423

改变

```
if (typeof o.match!=='undefined' && o.match.length==1){ 
```

到

```
if (typeof o.match!=='undefined'){ 
```

第二：

```
for(var i in o.match) {
 console.log(o.match[i].place.centroid.latitude); //wil show all lat's in loop
} 
```

或者如果你只想要第一个纬度：

```
console.log(o.match[0].place.centroid.latitude); //will show only first lat 
```

# wso2 - WSO2 通过声明值获取用户

> ID：11933831
> 
> 赞同：8
> 
> 时间：2012-08-13T11:56:08.507
> 
> 标签：wso2, user-management

我需要知道如何通过声明值获取 wso2 用户，以执行某种搜索？

例子：

`getUsersByClaimValue(String claimUri, String claimValue);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:22:16.560

是的。此 API 方法已被引入用户存储 API 以获取与特定用户属性关联的用户名。假设您想获取“国家”属性值为“美国”的用户。那么您可以按如下方式使用此方法。

`getUserList("http://wso2.org/claims/country", "USA", null);`

[您可以在WSO2IS](http://xacmlinfo.org/2013/12/10/user-role-management-with-wso2-identity-server-apis/)的 RemoteUserStoreManagerService中找到此方法作为 Web 服务 API 。您的 SOAP 消息如下所示。

`<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ser="http://service.ws.um.carbon.wso2.org"> <soapenv:Header/> <soapenv:Body> <ser:getUserList> <ser:claimUri>http://wso2.org/claims/country</ser:claimUri> <ser:claimValue>USA</ser:claimValue> <ser:profile></ser:profile> </ser:getUserList> </soapenv:Body> </soapenv:Envelope>`

在这里，此声明 uri 是通用的，独立于用户存储。使用 WSO2 身份服务器，您可以将这些声明 uri 映射到用户存储中的任何属性。更多细节从[这里](http://xacmlinfo.org/2012/05/02/claim-management-with-wso2-identity-server/)

# c++ - QMutexLocker 是否返回错误代码（如果有）？

> ID：11933844
> 
> 赞同：0
> 
> 时间：2012-08-13T11:56:36.907
> 
> 标签：c++, qt, pthreads, mutex

[http://doc.qt.io/archives/qt-4.7/qmutexlocker.html](http://doc.qt.io/archives/qt-4.7/qmutexlocker.html)

此类将互斥锁锁定在其构造函数中，因此如果在互斥锁创建时发生错误，我们是否能够知道是什么错误（构造函数不返回任何内容）？

这在某种程度上是一个缺点吗？

我在这里错过了一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:06:00.640

您可能会混淆互斥锁和锁。*互斥锁*是共享同步对象。*锁*是本地对象，对每个执行上下文都是本地的，它通过锁定公共互斥锁来实现同步。因此，互斥锁必须存在才能使锁有意义：

```
Foo sharedData;           // \ global/
QMutex sharedDataMX;      // / shared

void run_me_many_times()
{
    QMutexLocker lk(&sharedDataMX);

    // access "sharedData"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T19:25:03.953

`QMutexLocker`接受一个指向（并处理）一个`QMutex`对象的指针——而不是一个`pthread_mutex_t`对象（即使`a QMutex`可能在 a 之上实现`pthread_mutex_t`）。

锁定/解锁`QMutex`对象不会返回任何类型的错误代码（`QMutex::lock()`和`QMutex::unlock()`return `void`）。

在较低的“pthread 级别”可能发生的任何错误都将由`QMutex`对象在内部处理，导致 C++ 异常，或者导致代码中的缺陷（例如死锁）（例如，如果您尝试递归获取这`QMutex`是非递归的）。

# visual-c++ - fwrite 写入的字节数比它告诉的多

> ID：11933845
> 
> 赞同：0
> 
> 时间：2012-08-13T11:56:47.733
> 
> 标签：visual-c++, fwrite

我正在将一个**无符号字符**缓冲区写入文件（C++）：

```
FILE* f = fopen("out.data","wb");
size_t count = fwrite((const void *)pBuf, sizeof(unsigned char), dl, f); 
```

当我阅读它时，我得到的字节数比我期望得到的**“dl”多。**任何人都知道为什么？有一个类似的问题，原因是 'fopen(...,"w")' 而不是 'fopen(...,"wb")'。

我使用 Matlab 读取文件（在 Matlab 的 fopen 中尝试了 'r' 和 'rb' ），如果它与它有关......

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:37:50.203

好吧！一个简洁的问题，这是我最好的选择：

*   变量的值是`dl`多少？
*   指向什么`pBuf`- 它在逻辑上引用了多少字节？
*   你检查过返回值吗？它返回写入的元素数，在本例中为字节数。
*   关闭文件后，您是否检查了文件的**实际大小，而不是***磁盘上*文件的大小- 它是否与`dl`和/或`count`.
*   您如何打开文件并稍后阅读内容，以文本模式或二进制模式阅读。

PS：尝试更具表现力，在您的问题中加入更多相关的词语。

# javascript - Extjs KeyMap 不作用于 defaultEventAction 但执行默认浏览器操作

> ID：11933854
> 
> 赞同：1
> 
> 时间：2012-08-13T11:57:12.747
> 
> 标签：javascript, extjs, extjs4, extjs4.1

使用 ExtJS 4.1.1 即使在 Ext.util.KeyMap 我已经设置了 defaultEventAction: 'preventDefault' 并且在 fn : 函数中我也设置了 e.preventDefault(); 它仍然会在 chrome 中打开新标签页吗？**我只希望该字段执行键被实现的操作，而不是打开新选项卡的默认浏览器操作。这怎么可能？**

```
 Ext.onReady(function () {

    var bcTextField = Ext.create('Ext.form.Text', {
        xtype: 'textfield',
        renderTo: 'console-output',
        emptyText: 'Enter Barcode/Accession Number',
        width: 200,
        margin: '0'
    });
    var map = new Ext.util.KeyMap({
        target: bcTextField.getEl(),
        binding: [{
            key: "t",
            ctrl: true,
            scope: this,
            defaultEventAction: 'preventDefault',
            fn: function (key, e) {
                e.preventDefault();
                alert('Ctrl + t was pressed.');
            }
        }]
    });
}); 
```

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:07:01.650

在此线程中检查 Omniosis 的答案。给出了有关捕获此类事件的详细说明。希望能帮助到你。

[javascript 捕获浏览器快捷方式 (ctrl+t/n/w)](https://stackoverflow.com/questions/7295508/javascript-capture-browser-shortcuts-ctrlt-n-w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:22:24.323

你需要 e.stopEvent();

这就是我们使用的：

```
var map = new Ext.util.KeyMap({
    target: Ext.getBody(),
    binding: [{
        key: Ext.EventObject.F,
        ctrl: true,
        fn: function (key, e) {
            e.stopEvent(); //This stops the default behaviour ;-)
            //logic here...
        }
    }],
    scope: me
}); 
```

# .net - 如何以编程方式将文件添加到解决方案？

> ID：11933855
> 
> 赞同：5
> 
> 时间：2012-08-13T11:57:14.243
> 
> 标签：.net, visual-studio-2010, vsx, vspackage

我正在开发一个 VS 包，我需要实现的部分功能是将文件添加到当前打开的解决方案的解决方案项目中。

如果您右键单击解决方案并选择添加 > 现有项目，这与手动执行的操作完全相同。然后选择磁盘上的文件。

我仔细查看了 DTE 和 DTE2 接口，可以看到添加和操作项目的操作，但似乎没有任何添加单个文件的操作。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T12:08:45.787

好的，我意识到我可以只记录一个宏来捕获操作，然后检查 VS 宏 IDE 中的代码。

执行此操作所需的代码是。

```
DTE.ItemOperations.AddExistingItem(filePath); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:01:19.557

为此，您需要访问 Project 的[ProjectItems](http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile%28v=vs.90%29.aspx)成员并调用`AddFromFile()`

```
ProjectItem pi = project.ProjectItems.AddFromFile(filePath); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T12:03:01.223

你需要收藏`AddFromFile`一个`ProjectItems``Project`

[http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile(v=vs.100).aspx)

编辑：

添加到解决方案，`AddFromFile`反对`Solution`

# ios - 在 iPhone 上开关声音（phoneGap + 构造 2）

> ID：11933857
> 
> 赞同：1
> 
> 时间：2012-08-13T11:57:27.277
> 
> 标签：ios, audio, cordova

我使用构造 2 完成了一个游戏，该游戏在 JqueryMobile 页面的 iframe 中调用。我的问题是，有时当我单击“后退按钮”时，仍然会播放一些声音（声音不是背景声音而是 FX 并且在队列中，所以我无法使用构造 2 暂停功能停止主题）。我的解决方案是在 iphone 上设置声音，但根据这篇[文章](https://stackoverflow.com/questions/4624874/how-to-set-switch-for-on-and-off-iphone-sound-in-setting-page?rq=1)，我必须使用私有 api，这意味着一个被拒绝的应用程序。

你有解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:54:38.693

当应用程序“暂停”（在浏览器中的不可见选项卡中，或作为移动应用程序移至后台）时，Construct 2 会自动暂停音频。但是，我猜 PhoneGap 应用程序中的 iframe 不会触发正确的事件。

不过，您可以自己调用它们：在 iframe 中调用这些函数来暂停和恢复整个游戏（包括音频）：

```
cr_setSuspended(true);  // pause game and mute audio
cr_setSuspended(false); // resume game and unmute audio 
```

# java - 为所有包导入一次 Java 类

> ID：11933859
> 
> 赞同：2
> 
> 时间：2012-08-13T11:57:29.470
> 
> 标签：java, class, import, package, project-structure

比方说，我有以下结构：

*   src.main.java
    *   第一的
        *   一.java
        *   二.java
        *   三.java
    *   第二
        *   阿尔法.java
        *   beta.java
        *   伽玛.java

我希望将`first`包中的所有类导入我`second`包中的所有类中。

现在我只是为`second`包中的每个类指定：

```
import first.*; 
```

我可以为包中的**所有**类导入一次吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:00:05.977

不，不能这样做。

我不明白为什么会有这么大的困难。

更好的解决方案是使用可以根据需要添加导入的 IDE。

我还建议单独拼出每一个而不是使用星号表示法，即使您需要导入所有它们。它可以更好地记录您的意图，并且 IDE 可以使其对您透明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T11:58:50.970

不，**你不能**在 Java 中做到这一点。

您可能会想到做的一件事是将类从`second`包移动到，`first`这样您就不需要导入了。但我知道这并不总是可能/可取的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:00:24.280

> 我可以为包中的所有类导入一次吗？

不，你不能。导入仅适用于声明它们的~~类~~ *源文件。*

> 也许我可以使用 import 语句创建一些超类，然后每次都扩展它？

这只有在子类中的代码根本没有提到外部类型的名称时才有效……这几乎是不可能的。

正如我所说，导入仅适用于声明它们的~~类~~ *源文件。*

* * *

实际上，它`import`是故意设计成这样工作的。这个想法是让您轻松找出类名所指的类。（如果您不使用星形导入，效果最好......）

# asp.net - ASP.NET 404 响应文本类似中文

> ID：11933866
> 
> 赞同：1
> 
> 时间：2012-08-13T11:57:48.137
> 
> 标签：asp.net, http-status-code-404

加载包含对不存在的 URL 的使用标签的引用的页面时，我看到来自服务器的奇怪文本回复。服务器确实按预期返回状态代码 404，但它还包含一个带有类似中文字符的文本响应。

服务器是否被感染，或者错误消息的语言与英语不同...？如果被感染，我怎样才能知道在哪里？

这是文本回复的示例。似乎每个 404 错误的回复都是相同的，尽管当找不到不同的文件类型时它的一部分会发生变化。

> 㰰䑏䍔制作方䔠桴浬⁐啂䱉䌠∭簯工䌯⽄呄⁘祯工䌯⽄呄⁘珔䵌‱‱⁓玱楣琣丢•桴瑰丽㨯⽷⹷㌮潲呒⽸桴浬ㄯ䑔䐯玗摭琮摴搢㸍਼摴浬⁸浬泶桴湫瑰㨯⽷睷⹷㌮潲术ㄹ㤹⽸桴浬∾ഊ㱨桴浬∾ഊ㱨畡榨ഊ㱭整愠桯浬⁸浥煵浬泶洢桴湕浬潲术ㄹ㤹⽸桴浬∾ഊ㱨畡榨ഊ㱭整愠桯桴浥煵楈砮搮洹崴湴潲术ㄹ㤹⽸桴浬​​​数琯桴浬㬠舍慲獥琽楳漭㠸㔹ⴱ∯㸍਼瑬放㐰㐠ⴠ䙩汥⁯爠摩牥捴潲礠汤琠景畮搮㰯瑬放ഊ㱳瑹ⴥ⁴祔数琯捳猢㸍਼ℭⴍ੢润祻浡牧楮㨰㭦潮琭獩穥㨮㝥活景湴ⵦ慭楬示哝牤虑愬⁁物慬Ⱐ䡥汶整楣愬⁳虑猭獥物昻...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:12:20.810

您有字符编码问题。它是一个 ASCII 文件，被解释为 2 字节字符编码，因此您得到了奇怪的字符。

为了翻译它，我将文本复制到记事本。将其保存为 Unicode-Big Endian，然后使用十六进制编辑器去除前两个字符（告诉它它是 unicode）。再次打开它给了我：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/> <title>404 - File or directory not found.</title> <style type="text/css"> <!-- body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif; 
```

您需要查看它是否在 HTML 标头中声明了错误的内容类型（元标记中的内容类型看起来正确）或其他原因导致它出现问题。

# c# - 如何创建排序策略的枚举

> ID：11933867
> 
> 赞同：2
> 
> 时间：2012-08-13T11:57:49.053
> 
> 标签：c#, sorting, enums

我正在尝试编写一个可以同时接收集合和排序策略的排序方法。

我可以简单地收到一个 IComparer，但我更愿意枚举可能的排序策略。来电者必须从那里挑选他们的。

就像是：

```
public enum SortingStrategies { ByAgeDesc, ByAgeAsc, ByIncomeDesc, ByInconmeAsc }; 
```

其中每一个（ByAgeDesc、ByAgeAsc ...）都是 IComparer。

然后调用排序方法将是：

```
myObject.SortCollection(myCollection, SortingStrategies.ByIncomeDesc); 
```

是否可以创建实例枚举？这是个好主意吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T12:02:43.060

我不会为此使用直接枚举。我会创建一堆`IComparer<T>`可供选择的实现：

```
public static class SortingStrategy
{
    public static readonly IComparer<Person> ByAgeDescending = ...;
    public static readonly IComparer<Person> ByAgeAscending = ...;
    public static readonly IComparer<Person> ByIncomeDescending = ...;
    public static readonly IComparer<Person> ByIncomeAscending = ...;
} 
```

...或者很可能使用组合来执行升序/降序部分（例如，通过扩展方法`IComparer<T>`创建一个反向包装器）。

当然，现在这不会*强制*调用者使用您的预定义值之一。您可以通过使用自己的类来强制它：

```
public abstract class SortingStrategy : IComparer<Person>
{
    public static readonly SortingStrategy ByAgeDescending = ...;
    public static readonly SortingStrategy ByAgeAscending = ...;
    public static readonly SortingStrategy ByIncomeDescending = ...;
    public static readonly SortingStrategy ByIncomeAscending = ...;

    private SortingStrategy() {}

    private class ByAgeStrategy : SortingStrategy { ... }
    private class ByIncomeStrategy : SortingStrategy { ... }
} 
```

这里私有构造函数阻止任何*其他*子类，但私有嵌套类仍然可以对其进行子类化，因为它们可以访问构造函数。

然后，您可以使您的方法采用 a`SortingStrategy`而不仅仅是`IComparer<T>`.

当然，正如 James 所建议的，从长远来看，使用 LINQ 可能会更加灵活。这取决于你的目标是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:02:24.923

C# 不允许有任意数据类型的枚举（VB.NET 的那种，带有 hack）。但是您可以简单地将各个排序策略声明为`static readonly`您的类的字段`SortingStrategies`，并让它们实现`IComparable`。

另一方面，您现在已经对排序策略进行了硬编码。在某些情况下这可能是完全可以接受的，但我会保持警惕，因为它不是完全可扩展的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:09:44.607

在这里，您最终会得到一个 switch 或 if 块，这在代码可重用性/可扩展性方面是丑陋的。[在这里使用Strategy Pattern](http://en.wikipedia.org/wiki/Strategy_pattern)会好得多。

因此，对于策略模式的排序示例

```
using System;
using System.Collections.Generic;

namespace DoFactory.GangOfFour.Strategy.RealWorld
{
  /// <summary>
  /// MainApp startup class for Real-World 
  /// Strategy Design Pattern.
  /// </summary>
  class MainApp
  {

    /// <summary>
    /// Entry point into console application.
    /// </summary>
    static void Main()
    {
      // Two contexts following different strategies
      SortedList studentRecords = new SortedList();

      studentRecords.Add("Samual");
      studentRecords.Add("Jimmy");
      studentRecords.Add("Sandra");
      studentRecords.Add("Vivek");
      studentRecords.Add("Anna");

      studentRecords.SetSortStrategy(new QuickSort());
      studentRecords.Sort();

      studentRecords.SetSortStrategy(new ShellSort());
      studentRecords.Sort();

      studentRecords.SetSortStrategy(new MergeSort());
      studentRecords.Sort();

      // Wait for user
      Console.ReadKey();
    }
  }

  /// <summary>
  /// The 'Strategy' abstract class
  /// </summary>
  abstract class SortStrategy
  {
    public abstract void Sort(List<string> list);
  }

  /// <summary>
  /// A 'ConcreteStrategy' class
  /// </summary>
  class QuickSort : SortStrategy
  {
    public override void Sort(List<string> list)
    {
      list.Sort(); // Default is Quicksort
      Console.WriteLine("QuickSorted list ");
    }
  }

  /// <summary>
  /// A 'ConcreteStrategy' class
  /// </summary>
  class ShellSort : SortStrategy
  {
    public override void Sort(List<string> list)
    {
      //list.ShellSort(); not-implemented
      Console.WriteLine("ShellSorted list ");
    }
  }

  /// <summary>
  /// A 'ConcreteStrategy' class
  /// </summary>
  class MergeSort : SortStrategy
  {
    public override void Sort(List<string> list)
    {
      //list.MergeSort(); not-implemented
      Console.WriteLine("MergeSorted list ");
    }     
  }

  /// <summary>
  /// The 'Context' class
  /// </summary>
  class SortedList
  {
    private List<string> _list = new List<string>();
    private SortStrategy _sortstrategy;

    public void SetSortStrategy(SortStrategy sortstrategy)
    {
      this._sortstrategy = sortstrategy;
    }

    public void Add(string name)
    {
      _list.Add(name);
    }

    public void Sort()
    {
      _sortstrategy.Sort(_list);

      // Iterate over list and display results
      foreach (string name in _list)
        Console.WriteLine(" " + name);
      Console.WriteLine();
    }
  }
} 
```

有关此模式的更多信息和上述代码的解释，请参见[http://www.dofactory.com/Default.aspx](http://www.dofactory.com/Default.aspx)。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:02:49.743

您可以轻松添加*扩展方法*（如果`myObject`是某种系统类型），例如

```
public static IEnumerable<MyObjectType>SortCollection(this MyObjectType myObject, SortingStrategies sotrStrategy) 
{
   ....
} 
```

并像这样使用

```
MyObjectType myObject = new .... 
myObject.Sort(SortingStrategies.ByAgeDesc); 
```

如果 where**是非**`myObject`系统类型，只需向*您的*类型添加一个新功能。

 **** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T12:03:39.537

枚举值不能是`IComparer`. 但是，您可以创建一个静态类：

```
public static class SortingStrategies{

  static SortingStrategies() {
    ByAgeDesc = new ByAgeDescComparer();
    ByAgeAsc = new ByAgeAscComparer();
    ByIncomeDesc = new ByIncomeDescComparer()
  }

  public static IComparer ByAgeDesc { get; private set; }

  public static IComparer ByAgeAsc { get; private set; }

  public static IComparer ByIncomeDesc { get; private set; }

} 
```

您可以像这样引用所需的`IComparer`：

```
SortingStrategies.ByIncomeDesc 
```***

# python-2.7 - 执行“from xyz import Abc”时，解释器做了什么？

> ID：11933873
> 
> 赞同：3
> 
> 时间：2012-08-13T11:58:14.597
> 
> 标签：python-2.7, python-2.x, python

在这些情况下，口译员会做什么？

1.  `from xyz import Abc`
2.  `from xyz import *`

它是否必须解析完整的文件 xyz.py 吗？一种方法应该比另一种更快吗？还是人们更喜欢第一种方法而不是第二种方法仅仅是可读性的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T12:00:03.650

它不应该对性能产生任何影响，因为必须以任何一种方式处理整个模块。

不同之处在于可读性和命名空间的污染。为了最大限度地减少名称冲突的可能性以及由于名称隐藏导致的意外行为，谨慎的做法是仅导入您实际使用的那些对象。

来自[马丁·彼得斯](https://stackoverflow.com/users/100297/martijn-pieters)：

> 您导入到模块中的所有顶级名称也可以从该模块再次导入，除非`__all__`已设置参数。因此，您通常会在本地命名空间中添加比您讨价还价的更多的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:12:15.223

每个命令后命名空间的差异：

```
>>> from math import *
>>> len(vars())
46
>>> vars()
{'pow': <built-in function pow>, 'fsum': <built-in function fsum>, 'cosh': <built-in function cosh>, 'ldexp': <built-in function ldexp>, 'hypot': <built-in function hypot>, 'acosh': <built-in function acosh>, 'tan': <built-in function tan>, 'asin': <built-in function asin>, 'isnan': <built-in function isnan>, 'log': <built-in function log>, 'fabs': <built-in function fabs>, 'floor': <built-in function floor>, 'atanh': <built-in function atanh>, 'sqrt': <built-in function sqrt>, '__package__': None, 'frexp': <built-in function frexp>, 'factorial': <built-in function factorial>, 'degrees': <built-in function degrees>, 'pi': 3.141592653589793, 'log10': <built-in function log10>, '__doc__': None, 'asinh': <built-in function asinh>, 'fmod': <built-in function fmod>, 'atan': <built-in function atan>, '__builtins__': <module '__builtin__' (built-in)>, 'copysign': <built-in function copysign>, 'cos': <built-in function cos>, 'ceil': <built-in function ceil>, 'atan2': <built-in function atan2>, 'isinf': <built-in function isinf>, 'sinh': <built-in function sinh>, '__name__': '__main__', 'trunc': <built-in function trunc>, 'expm1': <built-in function expm1>, 'e': 2.718281828459045, 'tanh': <built-in function tanh>, 'radians': <built-in function radians>, 'sin': <built-in function sin>, 'lgamma': <built-in function lgamma>, 'erf': <built-in function erf>, 'erfc': <built-in function erfc>, 'modf': <built-in function modf>, 'exp': <built-in function exp>, 'acos': <built-in function acos>, 'log1p': <built-in function log1p>, 'gamma': <built-in function gamma>}

>>> ================================ RESTART ================================

>>> from math import log10
>>> len(vars())
5
>>> vars()
{'__builtins__': <module '__builtin__' (built-in)>, '__package__': None, '__name__': '__main__', 'log10': <built-in function log10>, '__doc__': None} 
```

# ios5 - 在 iOS 5 中开发 ePub 文件阅读器

> ID：11933874
> 
> 赞同：3
> 
> 时间：2012-08-13T11:58:16.623
> 
> 标签：ios5, render, epub

我想为 iOS 设备开发 ePub 和 PDF 阅读器。对于 PDF 阅读器，我可以在 Web 视图中显示 PDF。所以我对PDF没有任何问题。

对于 ePub 文件，我的想法是 1) 从服务器下载 epub 文件并根据要求将其解压缩到 Documents 目录。2）解析提取的文件并显示它。3) 一旦应用程序关闭，从 Socuments 目录中删除提取的文件。

所需功能：-

1）增加/减少字体大小和亮度

2) 书签

3) 左右滑动手势或卷曲效果，如从书本上换页

4) 方向支持

5）显示书籍（列表）中的内容

6) 搜索功能

7) 可选择显示页码

我的问题是：-

[1) 除了AePubReader](https://github.com/springRan/AePubReader)之外，还有人知道 ePub 阅读器的优秀 iOS 库吗？

2）我看到了[RMSDK](https://stackoverflow.com/questions/2824990/how-to-use-adobe-reader-mobile-sdk-9-to-develop-pdf-epub-reader)的这个链接。有人知道吗？它支持iOS吗？

3) 我应该在哪里显示提取的内容以控制字体大小和亮度？在 WebView 或 TextView 中？

感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T07:09:40.063

使用 UITextView 通过解析每个 html/xhtml 文件来加载文本。使用页面视图控制器获取页面导航样式

# objective-c - UIPageControl 的子类仅在 uiscrollview 移动之后刷新，而不是之前

> ID：11933877
> 
> 赞同：1
> 
> 时间：2012-08-13T11:58:34.260
> 
> 标签：objective-c, uiscrollview, subclass, uipagecontrol

我今天遇到的问题是我的子类`UIPageControl`. 当我初始化它时，点的框架（特别是原点）和图像保持默认，这是问题所在，因为我希望它在初始化后立即更改。但是，当我在初始化后使用 scrollView 移动（如“触摸并移动”）时，它们（点）以某种方式跳转到正确的位置并显示正确的图像。

可能是什么问题呢？

代码：

自定义页面控件.m

```
- (id) initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    activeImage = [UIImage imageNamed:@"doton.png"];
    inactiveImage = [UIImage imageNamed:@"dotoff.png"];

    return self;
}

- (void) updateDots
{
    for (int i = 0; i < [self.subviews count]; i++)
    {
        UIImageView *dot = [self.subviews objectAtIndex:i];
        if (i == self.currentPage) dot.image = activeImage;
        else dot.image = inactiveImage;
        [dot setFrame:CGRectMake(i * 13.5, 1.5, 17, 17)];
    }    
}

- (void)setCurrentPage:(NSInteger)currentPage
{
    [super setCurrentPage:currentPage];
    [self updateDots];
}

@end 
```

ChooseView.m - 初始化部分

```
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 160, 300)];
[scrollView setBackgroundColor:[UIColor clearColor]];
[scrollView setDelaysContentTouches:NO];
[scrollView setCanCancelContentTouches:YES];
[scrollView setClipsToBounds:NO];
[scrollView setScrollEnabled:YES];
[scrollView setPagingEnabled:YES];
[scrollView setShowsHorizontalScrollIndicator:NO];
[scrollView setShowsVerticalScrollIndicator:NO];

pageControl = [[CustomPageControl alloc] initWithFrame:CGRectMake(200, 300, 80, 20)];
[pageControl setBackgroundColor:[UIColor clearColor]];
pageControl.numberOfPages = 6;
[pageControl setCurrentPage:0]; 
```

最后一行是我希望`UIPageControl`刷新的时候，但是这不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:15:37.393

标准 UIPageControl 实现会发生这种情况吗？

您的问题表明您的对象子视图（例如 UIImageViews）矩形/大小未初始化为您想要的大小/位置。
我在我的项目中使用 nib 而不是以编程方式实现了此代码，我需要调用 -(void)updateDots 将其设置为它的初始条件是标准点..

我看不到 UIScrollView 对此有何影响，除非它以某种方式链接到您的 -(void)updateDots 函数（例如，您设置自定义页面控件的 currentIndex ）。您说，“但是，当我在初始化后使用 scrollView 移动（如在“触摸并移动”中）时，它们（点）以某种方式跳到正确的位置并显示正确的图像。
因为他们“用正确的图像跳到正确的位置”，这意味着你的 -(void)updateDots 函数必须被调用。我没有看到任何其他解释。

此外，您的迭代循环假定 .subViews 数组中的所有 UIViews 都是 UIImageViews，尽管假设这一点相当安全，但我会检查 UIView 是否是带有反射的 UIImageView。

# c++ - 使用 Qt 对文件名进行自然排序

> ID：11933883
> 
> 赞同：28
> 
> 时间：2012-08-13T11:58:52.563
> 
> 标签：c++, qt, natural-sort

我正在使用`QDir::entryList()`. 其中的文件名结构如下：

```
index_randomNumber.png 
```

我需要它们按`index`Windows 资源管理器排序文件的方式排序，以便我得到

```
0_0815.png
1_4711.png
2_2063.png
... 
```

而不是排序依据`QDir::Name`给我的：

```
0_0815.png
10000_6661.png
10001_7401.png
... 
```

Qt 中是否有内置的方法来实现这一点，如果没有，在什么地方实现它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-03-15T17:41:51.003

如果要用于[`QCollator`](https://doc.qt.io/qt-5/qcollator.html)对返回的条目列表中的条目进行[`QDir::entryList`](https://doc.qt.io/qt-5/qdir.html#entryList)排序，可以使用以下命令对结果进行排序[`std::sort()`](http://en.cppreference.com/w/cpp/algorithm/sort)：

```
dir.setFilter(QDir::Files | QDir::NoSymLinks);
dir.setSorting(QDir::NoSort);  // will sort manually with std::sort

auto entryList = dir.entryList();

QCollator collator;
collator.setNumericMode(true);

std::sort(
    entryList.begin(),
    entryList.end(),
    [&](const QString &file1, const QString &file2)
    {
        return collator.compare(file1, file2) < 0;
    }); 
```

* * *

根据[The Badger](https://stackoverflow.com/users/991000/the-badger)的评论，`QCollator`也可以直接用作 的参数`std::sort`，替换 lambda，因此调用`std::sort`变为：

```
std::sort(entryList.begin(), entryList.end(), collator); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-14T06:57:33.533

Qt 在 Qt 5.2 之前没有自然排序实现，请参阅[此功能请求](https://bugreports.qt-project.org/browse/QTBUG-3316)。

从 Qt 5.2开始，当启用[数字模式时，](http://qt-project.org/doc/qt-5/qcollator.html#setNumericMode) [QCollat​​or](http://qt-project.org/doc/qt-5/qcollator.html)允许自然排序 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T12:12:02.843

是的，有可能。

为此，您需要在[构造](http://qt-project.org/doc/qt-5.0/qdir.html#SortFlag-enum)`QDir`. 目的。构造函数是

```
 QDir(const QString & path, const QString & nameFilter, SortFlags sort = SortFlags( Name | IgnoreCase ), Filters filters = AllEntries) 
```

你也可以使用

```
QDir dir;
dir.setSorting(QDir::LocaleAware); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-13T18:47:30.027

这不是问题的答案，而是一些一般信息，以帮助其他偶然发现此问题的人，试图弄清楚如何“自然排序”。

首先：这是不可能的。“正确”的自然排序取决于上下文——缺少“真正的”人工智能——实际上是不可能拥有的。例如，如果我有一堆包含混合数字和字母的文件名，并且这些名称的某些部分恰好匹配`[0-9a-f]`，那是十六进制数字吗？“1,500”是否与“1500”相同，或者“1”和“500”是单独的数字？“2019/06/07”是在“2019/07/06”之前还是之后？“1.21”与“1.5”怎么样？（提示：最后一个取决于这些是十进制数字还是语义版本号。）

“解决”这个问题需要对其进行约束；决定我们只处理特定情况，超出这些范围的任何事情都只会产生“错误”的答案。（幸运的是，OP 的问题似乎已经满足了通常的一组约束。）

也就是说，我相信`QCollator`总体上效果很好（同样，它并没有“真正”工作，但它在普遍接受的限制范围内取得了成功）。在“自己的解决方案”部门，还可以查看[qtNaturalSort](https://github.com/Kitware/qtextensions/blob/master/util/qtNaturalSort.h)，我将其作为 Qt-API 对不同（非`QCollator`）算法的改进而编写。（在编写时不支持不区分大小写，但欢迎使用补丁！）我付出了一大堆努力使其“正确”解析数字，甚至处理任意长度的数字和非 BMP 数字。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-28T08:41:22.407

```
inline int findNumberPart(const QString& sIn)
{
  QString s = "";
  int i = 0;
  bool isNum = false;
  while (i < sIn.length())
  {
    if (isNum)
    {
      if (!sIn[i].isNumber())
        break;
      s += sIn[i];
    }
    else
    {
      if (sIn[i].isNumber())
        s += sIn[i];
    }
    ++i;
  }
  if (s == "")
    return 0;
  return s.toInt();
}

bool naturalSortCallback(const QString& s1, const QString& s2)
{
  int idx1 = findNumberPart(s1);
  int idx2 = findNumberPart(s2);
  return (idx1 < idx2);
}

int main(int argc, char *argv[])
{
  QCoreApplication a(argc, argv);

  QDir dir(MYPATH);
  QStringList list = dir.entryList(QDir::AllEntries | QDir::NoDotAndDotDot);
  qSort(list.begin(), list.end(), naturalSortCallback);
  foreach(QString s, list)
    qDebug() << s << endl;

  return a.exec();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-07-10T22:12:57.300

Qt 本身不支持自然排序，但它可以很容易地实现。例如，这可用于对 a 进行排序`QStringList`：

```
struct naturalSortCompare {

    inline bool isNumber(QChar c) {
        return c >= '0' && c <= '9';
    }

    inline bool operator() (const QString& s1, const QString& s2) {
        if (s1 == "" || s2 == "") return s1 < s2;

        // Move to the first difference between the strings
        int startIndex = -1;
        int length = s1.length() > s2.length() ? s2.length() : s1.length();
        for (int i = 0; i < length; i++) {
            QChar c1 = s1[i];
            QChar c2 = s2[i];
            if (c1 != c2) {
                startIndex = i;
                break;
            }
        }

        // If the strings are the same, exit now.
        if (startIndex < 0) return s1 < s2;

        // Now extract the numbers, if any, from the two strings.
        QString sn1;
        QString sn2;
        bool done1 = false;
        bool done2 = false;
        length = s1.length() < s2.length() ? s2.length() : s1.length();

        for (int i = startIndex; i < length; i++) {
            if (!done1 && i < s1.length()) {
                if (isNumber(s1[i])) {
                    sn1 += QString(s1[i]);
                } else {
                    done1 = true;
                }
            }

            if (!done2 && i < s2.length()) {
                if (isNumber(s2[i])) {
                    sn2 += QString(s2[i]);
                } else {
                    done2 = true;
                }
            }

            if (done1 && done2) break;
        }

        // If none of the strings contain a number, use a regular comparison.
        if (sn1 == "" && sn2 == "") return s1 < s2;

        // If one of the strings doesn't contain a number at that position,
        // we put the string without number first so that, for example,
        // "example.bin" is before "example1.bin"
        if (sn1 == "" && sn2 != "") return true;
        if (sn1 != "" && sn2 == "") return false;

        return sn1.toInt() < sn2.toInt();
    }

}; 
```

那么用法很简单：

```
std::sort(stringList.begin(), stringList.end(), naturalSortCompare()); 
```

# ruby-on-rails - 为 best_in_place gem 添加分隔符

> ID：11933884
> 
> 赞同：-2
> 
> 时间：2012-08-13T11:58:53.723
> 
> 标签：ruby-on-rails

在正常形式中，我使用了这个：

```
<td>
   <%= number_with_precision(approved_invoice.invoice_amount,
      :precision =>2,
      :delimiter => ",")
   %>
</td> 
```

这会在适当的位置添加逗号。如果我必须将此分隔符用于 best_in_place gem 怎么办：

```
<td class="tax-particulars-align">
   <%= best_in_place @invoice, :invoice_amount,
      :display_as => :get_invoice_amount_with_precision,
      :type => :input
   %>
</td> 
```

如何在我的编辑页面中为金额字段添加逗号？有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:27:27.807

您需要在模型的 get_invoice_amount_with_precision 方法中使用 number_with_precision。为了使其可访问，您需要在模型中包含 ActionView::Helpers::NumberHelper：

```
class MyModel < ActiveRecord::Base
  include ActionView::Helpers::NumberHelper

  def get_invoice_amount_with_precision
    number_with_precision(invoice_amount, :precision => 2, :delimiter => ',')
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:02:32.500

在最佳位置 1.0.3 中，您可以在模型中使用自定义方法来决定必须如何显示某个字段。你可以写这样的东西（在视图中）：

```
best_in_place @user, :description, :type => :textarea, :display_as => :my_formatting 
```

在模型中：

```
class MyModel < ActiveRecord::Base

  include ActionView::Helpers::NumberHelper

  def my_formatting
    number_with_precision(description, :precision => 0, :delimiter => " ")
  end
end 
```

# jquery - JSON 日期未发布到控制器（KnockoutJS/JQuery，MVC 4 RC）

> ID：11933889
> 
> 赞同：1
> 
> 时间：2012-08-13T11:59:03.703
> 
> 标签：jquery, vb.net, knockout.js, asp.net-mvc-4

我有一个 KnockoutJS 视图模型，我将它作为 JSON 对象发布到 MVC 控制器，如下所示：

```
var dataObj = ko.toJSON(viewModel);
$.post(postURL, dataObj, callBackFunc); 
```

模型本身有一个出生日期字段： `dataObj.DOB`

但是，每当我的 MVC 控制器收到它时，DOB 字段总是`#12:00:00 AM#`（VB.NET）

下面是我的控制器：

```
<HttpPost()> _
    <AjaxOnly()> _
    Public Function PersonalDetails(PersonalInfo As DetailsViewModel.PersonalDetails)
        'clean the null values
        Dim newValues As Dictionary(Of String, String) = _getPropertyDict(PersonalInfo)
        Dim repo As New DetailsViewModelRepository()

    For Each entry In newValues
        repo.InsertUpdateField(PersonalInfo.MemberId, entry.Key, entry.Value)
    Next

    Return PartialView("~/Views/Home/Details/PersonalDetails.vbhtml", PersonalInfo)
End Function 
```

如何让它正确接收日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:19:43.083

我尝试了以下方法并且它有效，只是不确定浏览器兼容性的范围：

`dataObj.DOB = dataObj.DOB.toISOString();`

# mongodb - 在关联数组中查询具有特定 elem 值的子对象的文档

> ID：11933901
> 
> 赞同：3
> 
> 时间：2012-08-13T11:59:57.097
> 
> 标签：mongodb

棘手的 mongodb 查询问题：我有一个集合“帐户”，其中包含一堆文档（经过简化并用实际数据交换为非真实世界的值）看起来像这样：

```
{"_id": "<Mongo Binary Data>",
 "Roles": {
     "D7753879C7020F8ECF947122FA211413": {
       "_id": "<Mongo Binary Data>",
       "OrgName": "ACME",
       "Rolename": "Coyote Liaison",
    },

     "CFA7722E6799170706E4C5FFF3F01E63": {
       "_id": "<Mongo Binary Data>",
       "OrgName": "ACME",      
       "Rolename": "MembershipAdmin",
    },

     "C7020F8ECF947122FAGIGHFVFF3F7753": {
       "_id": "<Mongo Binary Data>",
       "OrgName": "Initech",       
       "Rolename": "MembershipAdmin",
    }   
  } 
} 
```

Roles 数组中的键是角色 id 和组织 id 的组合，然后对它们进行哈希处理，这样可以非常快速地查询（一旦从 MongoDB 将 Account 对象加载到 C# 中）来判断 Account 是否具有给定组织的给定角色，即，用户是 Initech 的 MembershipAdmin。

现在我想查询具有任何组织角色的用户，在伪 SQL 中可以表示为“选择所有帐户，这些帐户至少有一个角色对象，其中 Rolename = THISROLENAME”。即，获取所有属于 MembershipAdmins 的用户。

我试过这个：

```
{
  Roles.Rolename: "MembershipAdmin"
} 
```

还有这个

```
{
  Roles: {"Rolename": "MembershipAdmin"}
} 
```

还有这个

```
{
  Roles: {"$elemMatch": {"Rolename": "MembershipAdmin"}}
} 
```

...无济于事并且已经看到了几个答案等，说唯一的出路是将关联数组键向下推到子对象中，我不想这样做，因为它是这个的主要功能数据结构（检查帐户是否具有给定组织的给定角色）确实非常快。我在上面描述的用例不必非常快，因为它是管理员用户责任的一部分，所以我很乐意让他们等待片刻——因此在这种情况下，具有过度递归等的查询是可以的.

有没有人知道如何在不重构数据结构的情况下完成这项工作？我对此束手无策。

非常感谢，

G

**[编辑：上面的结构是不可查询的，请参阅公认的答案以获得博学但快速的解释，说明为什么不这样做以及您应该如何正确地解决它。但是，如果您对 hacky 解决方法感到满意，您可以将数据的副本存储在旁边的 BsonArray 中，并使用 $elemMatch 进行查询]**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:12:57.257

没有办法处理你想要的模式，模式也不是很实用。您应该将架构更改为：

```
{"_id": "<Mongo Binary Data>",
 "Roles": [
    {
       "hash": "D7753879C7020F8ECF947122FA211413",
       "_id": "<Mongo Binary Data>",
       "OrgName": "ACME",
       "Rolename": "Coyote Liaison",
    },

    {
       "hash": "CFA7722E6799170706E4C5FFF3F01E63",
       "_id": "<Mongo Binary Data>",
       "OrgName": "ACME",      
       "Rolename": "MembershipAdmin",
    },

    {
       "hash": "C7020F8ECF947122FAGIGHFVFF3F7753",
       "_id": "<Mongo Binary Data>",
       "OrgName": "Initech",       
       "Rolename": "MembershipAdmin",
    }   
  ] 
} 
```

使用非稳定值作为文档字段名称如此不切实际的原因正是因为它使大多数查询变得复杂。唯一的好处是某些查询可能会更快一些，但考虑到它也会导致索引问题，这几乎总是一个坏主意。

我强烈建议将您的架构更改为上述架构，而不是寻找允许您当前架构的解决方案。

编辑：正如下面讨论中提到的，在技术上可以使用 $where 运算符创建所需的查询。如果您不能以任何其他方式做到这一点，则意味着您有架构气味以及潜在的扩展和性能瓶颈，当您的软件上线时，这些瓶颈将非常难以修复。不要使用 $where。曾经。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T12:10:31.270

**[编辑]：这是错误的。如果它是一个数组而不是一个哈希结构，则可以工作。无论如何，这个问题已经尝试过了。**

`Roles.Rolename`如果上面有索引就可以使用。

```
db.collectionname.ensureIndex({"Roles.Rolename": 1 }) 
```

进而，

```
db.collectionname.find({"Role.Rolename": "MembershipAdmin"})
# returning only the organization field. Not tested though
db.collectionname.find({"Role.Rolename": "MembershipAdmin"},{"Role.Orgname": 1}) 
```

[Indexing Embedded fields](http://www.mongodb.org/display/DOCS/Indexes#Indexes-IndexingonEmbeddedFields%28%22DotNotation%22%29) from MongoDB docs 有关于它的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-17T07:14:17.647

这是您的操作方法：

```
db.Accounts.find({
    $where: function () {
        for (var index in this.Roles)
            if (this.Roles[index].Rolename == "THISROLENAME")
                return this;
    }
}); 
```

注意：如果数组中的每个嵌入式文档都有自己的密钥，我不确定他们为什么设计常规 MongoDB 查询不起作用，但希望将来他们会解决这个问题。

与此同时，这个解决方案效果很好。我已经测试过了，它似乎很快。

# android - 如何在 Android 上正确保存相机中的视频？

> ID：11933903
> 
> 赞同：0
> 
> 时间：2012-08-13T12:00:02.970
> 
> 标签：android, android-camera

我需要将视频从相机录制并保存到本地存储（例如 sd_card）。所以我尝试：

```
_mediarecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
_mediarecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
_mediarecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
_mediarecorder.setOutputFile("/sdcard/test5.mp4"); //test5.3gp тоже пробовал 
```

我也试试

```
_mediarecorder.setVideoEncodingBitRate(150000); // битрейт видео
_mediarecorder.setAudioEncodingBitRate(8000); // битрейт аудио
_mediarecorder.setAudioSamplingRate(8000); // частота дискретизации записи аудио
_mediarecorder.setAudioChannels(1); // количество каналов записи аудио
_mediarecorder.setVideoFrameRate(30); // фреймрейт записи видео
_mediarecorder.setVideoSize(640, 480); // размер картинки
_mediarecorder.setMaxDuration(0); // максимальная длительность записи
_mediarecorder.setMaxFileSize(0); // максимальный размер файла 
```

但是创建的文件（test5.mp4）显示带有绿线的失真视频。安卓 2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:21:02.053

检查是否在 logcat 中创建了文件 test5.mp4。

# android - Android计算器：小数位按钮

> ID：11933912
> 
> 赞同：0
> 
> 时间：2012-08-13T12:00:36.730
> 
> 标签：android, calculator

我是 Android 开发新手，目前正在学习设计一个基本的计算器应用程序。我已经自行设计了布局，但是从不同的网站获取 Main Activity 代码用于 0 到 9 的操作，`+, -, *, /`并且在合并后，它们可以正常工作。

但是，我确实想用小数点函数进一步修改 MainActivity。而整数可以使用“current = current * 10 + number”正确显示在屏幕上，例如 53 = 5*10+3;

我正在考虑使用循环函数对小数点应用相同的方法，想法如下： 1\. current = current + 如果按下点按钮，则剩余 2\. 创建一个整数 i，一旦单击任何数字按钮，i 就会增加 3 . 这样当例如输入 5.3，i =1 时，它将 = 5 + 3/(10^i) = 5.3 4\. 5.3 循环到这里，然后当例如输入为 5.39 时，现在 i=2，它将 = 5.3 + 9/(10^i) = 5.39

**问题>>** **然而...真的...我很新鲜，我不知道如何设计十进制按钮的编码，有没有人可以建议代码？** 首先忽略以下要检测错误的插件（例如如果点输入两次或多次，则删除第二个点，如果说是输入，则`0`在前面添加）`.``.5`

按钮id如下，点击一次参考DecimalClickEvent Button b_decimal = (Button) findViewById(R.id.decimal); b_decimal.setOnClickListener(new DecimalClickEvent(???));}

非常感谢提前！下面附上代码以供参考和您的意见：

==========================MainActivity.java====================== ================

```
package com.trial.newcalculator;

import java.io.Serializable;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

@SuppressLint("ParserError")
public class MainActivity extends Activity {
    State s;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        s = new State();

        int[] opNumbers = new int[] { 
                R.id.zero,
                R.id.one,
                R.id.two,
                R.id.three,
                R.id.four,
                R.id.five,
                R.id.six,
                R.id.seven,
                R.id.eight,
                R.id.nine,     
        };

        final TextView textView = (TextView) findViewById(R.id.ansEditText);
        for (int i = 0; i < 10;i++){
            final Button button = (Button) findViewById(opNumbers[i]);        
            button.setOnClickListener(new NumberClickEvent(textView,s,i));          
        }

      int[] opButtons = new int[] { R.id.add, R.id.subtract, R.id.multiply, R.id.divide };
      State.Operation[] states = new State.Operation[] {
                State.Operation.PLUS, 
                State.Operation.MINUS,
                State.Operation.MULTIPLY, 
                State.Operation.DIVIDE};

        for(int i = 0; i < opButtons.length;i++){
        Button b_op = (Button) findViewById(opButtons[i]);
        b_op.setOnClickListener(new OperationClickEvent(textView, s, states[i]));
        }

// Memory functions
        int[] memButtons = new int[] { R.id.MC, R.id.MR, R.id.Mdeduct, R.id.Mplus};
        State.Operation[] mstates = new State.Operation[] {
                State.Operation.MEMORYCLEAR, 
                State.Operation.MEMORYCALL,
                State.Operation.MEMORYMINUS, 
                State.Operation.MEMORYPLUS};

        for(int i = 0; i < memButtons.length;i++){
        Button b_mem = (Button) findViewById(memButtons[i]);
        b_mem.setOnClickListener(new OperationClickEvent(textView, s, states[i]));
        }
//  Memory functions    

//decimal
//      Button b_decimal = (Button) findViewById(R.id.decimal);
//      b_decimal.setOnClickListener(new DecimalClickEvent(textView, s, "."));   
//decimal

        Button b_eq = (Button) findViewById(R.id.equal);
        b_eq.setOnClickListener(new EqualClickEvent(textView, s));

        Button b_op = (Button) findViewById(R.id.ac);
        b_op.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                s.clear();
                textView.setText(s.getDisplay());
            }
        });               
    }      
@Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        savedInstanceState.putSerializable("STATE", s);
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        Serializable serializable = savedInstanceState.getSerializable("STATE");
        if(serializable!= null){
            s = (State) serializable;
        }
    }

    public void onPause(){
         super.onPause();
    }

} 
```

================================State.java================ ===================

```
package com.trial.newcalculator;

import java.io.Serializable;
import android.text.Editable;
import android.widget.TextView;

public class State implements Serializable {
    private static final long serialVersionUID = -1231231231231233L;
    public TextView output;
    public enum Operation {     
        PLUS,       
        MINUS,      
        MULTIPLY,       
        DIVIDE,     
        MEMORYPLUS,
        MEMORYMINUS,
        MEMORYCALL,
        MEMORYCLEAR,
    }   
    public enum IOState{        
        INPUTTING,      
        DISPLAY_RESULT, 
    }   
    private Double accu = null; 
    private double current = 0; 
    private double memory = 0;
    private Operation currentOp = null; 
    private IOState currentState = IOState.INPUTTING;   
    public Operation getCurrentOp() {       
        return currentOp;   
    }   
    public void setCurrentOp(Operation currentOp) {     
        if (currentState == IOState.INPUTTING){         
            if (accu != null && this.currentOp != null ){calculateResult(); 
            }
            else{accu = Double.valueOf(current);current = 0;
            }
        }
        this.currentOp = currentOp;     
        if (currentState == IOState.INPUTTING){
            currentState = IOState.DISPLAY_RESULT;
        }   
    }   
    private void calculateResult() {
        double res = accu.doubleValue();
        switch (currentOp) {
            case PLUS:
                res += current;
                break;
            case MINUS:
                res -= current;
                break;
            case MULTIPLY:
                res *= current;
                break;
            case DIVIDE:
                res /= current;
                break;
            case MEMORYPLUS:
                memory += current;
                break;
            case MEMORYMINUS:
                memory -= current;
                break;
            case MEMORYCLEAR:
                memory = 0;
                break;
            case MEMORYCALL:
                current = memory;
                break;
        }
        accu = Double.valueOf(res);
        current = 0;
    }
    public void number(int number) {
        if (currentState == IOState.INPUTTING){
            current = current *10 + number;
        }
        else if(currentState == IOState.DISPLAY_RESULT){
            currentState = IOState.INPUTTING;
            current = number;
        }
    }
    public String getDisplay() {
        String res;
        Double d = getCurrentDisplayValue();
        double doubleValue = d.doubleValue();
        int intVal = (int)doubleValue;
        if (intVal == doubleValue){
            res = Integer.toString(intVal);
            }
        else{
            res = d.toString();
            }
        return res;
    }
    private Double getCurrentDisplayValue() {
        Double d = accu;
        if (currentState == IOState.INPUTTING){
            d = Double.valueOf(current);
        }
        return d;
    }
    public void clear() {
        accu = null;
        currentState = IOState.INPUTTING;
        currentOp = null;
        current = 0;
    }

    public void equal() {
        if (accu == null || currentOp == null){
            return;
        }
        calculateResult();
        currentState = IOState.DISPLAY_RESULT;
        currentOp = null;
        current = getCurrentDisplayValue(); 
        }
} 
```

====================OperationClickEvent.java=========================== ====

```
package com.trial.newcalculator;

import com.trial.newcalculator.State.Operation;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

final class OperationClickEvent implements OnClickListener {
    private State s;
    private TextView textView;
    private Operation op;

    public OperationClickEvent(TextView textView, State s, State.Operation op) {
        super();
        this.op = op;
        this.s = s;
        this.textView = textView;
    }

    public void onClick(View v) {
        s.setCurrentOp(op);
        textView.setText(s.getDisplay());
    }
} 
```

=================EqualClickEvent.java============================== =========

```
package com.trial.newcalculator;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

final class EqualClickEvent implements OnClickListener {
    private State s;
    private TextView textView;

    public EqualClickEvent(TextView textView, State s) {
        super();
        this.s = s;
        this.textView = textView;
    }

    public void onClick(View v) {
        s.equal();
        textView.setText(s.getDisplay());
    }
} 
```

======================NumberClickEvent.java========================= =========

```
package com.trial.newcalculator;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

final class NumberClickEvent implements OnClickListener {
    private int number;
    private State s;
    private TextView textView;

    public NumberClickEvent(TextView textView, State s, int number) {
        super();
        this.number = number;
        this.s = s;
        this.textView = textView;
    }

    public void onClick(View v) {
        s.number(number);
        textView.setText(s.getDisplay());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:07:32.970

我建议您获取它们的 id 并在单击特定按钮时执行适当的功能，而不是为负单击事件和 doublezeroclickevent 创建新类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:07:28.263

每个 OnClickListener 都可以是一个默认的匿名类，它只能由一个按钮触发。因此无需将它们命名为“NegativeClickEvent”、“DoublezeroClickEvent”等。

如果“。”，您可以保留一个布尔变量。被按下，只有在没有的情况下才接受另一个。如果您想要一个可用的计算器，您还需要一个“退格”按钮。因此请注意，该点可能会被删除。（需要跟踪它的位置）。

对于前导 0，您可以使用简单的“如果先按下点，则插入 0。”。

有很多方法可以实现你想要的，但为了简单起见，只需处理你需要处理的情况。

Other ways to implement this may include Double.parseDouble(s) with catch (NumberFormatException e) on each key pressed, or using a double as your buffer, and using the buttons to perform mathematical operations on it directly (such as multiply by 10 and adding the new digit on each button press) - this will ensure input validity without the need to parse String, but it's more complicated to implement.

# android - onLocationChanged() 从未调用过

> ID：11933918
> 
> 赞同：22
> 
> 时间：2012-08-13T12:01:01.850
> 
> 标签：android, gps, locationmanager

我正在编写一个带来当前位置的代码，但它没有给我位置，因为它从不调用`onLocationChanged()`。有没有办法找到该位置。

对于这种情况，mobileLocation 为 0，因此执行转到 else 块。

我的代码是

```
public class FindLocation {
private LocationManager locManager;
private LocationListener locListener;
private Location mobileLocation;
private String provider;

public FindLocation(Context ctx){
    locManager = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);
    locListener = new LocationListener() {
        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }
        @Override
        public void onProviderEnabled(String provider) {
        }
        @Override
        public void onProviderDisabled(String provider) {
        }
        @Override
        public void onLocationChanged(Location location) {
            System.out.println("mobile location is in listener="+location);
            mobileLocation = location;
        }
    };
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1, locListener);              
    if (mobileLocation != null) {
        locManager.removeUpdates(locListener); 
        String londitude = "Londitude: " + mobileLocation.getLongitude();
        String latitude = "Latitude: " + mobileLocation.getLatitude();
        String altitiude = "Altitiude: " + mobileLocation.getAltitude();
        String accuracy = "Accuracy: " + mobileLocation.getAccuracy();
        String time = "Time: " + mobileLocation.getTime();
        Toast.makeText(ctx, "Latitude is = "+latitude +"Longitude is ="+londitude, Toast.LENGTH_LONG).show();
    } else {
        System.out.println("in find location 4");
        Toast.makeText(ctx, "Sorry location is not determined", Toast.LENGTH_LONG).show();
    }
}
   } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-09T09:37:50.337

我在真实设备上运行我的应用程序。我使用网络而不是 GPS，并且调用了 onLocationChanged：

```
locMan.requestSingleUpdate(LocationManager.NETWORK_PROVIDER, this, null); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T15:11:02.927

您是否从未获得位置，或者仅在您的评论中写道“有时它会获得位置，但不是在点击时。”？

可能是您的代码比 LocationManager 更快，后者可能尚未调用 onLocationChanged()。更改您的代码以获取最后一个已知位置，或等到您的 locListener 被调用：

```
locManager.requestLocationUpdates(
  LocationManager.GPS_PROVIDER, 1000, 1, locListener);
mobileLocation = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
if (mobileLocation != null) { 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-07-01T08:46:15.513

`LocationManager.NETWORK_PROVIDER`需要网络，但它是真实的，不精确的；如果你想使用`LocationManager.GPS_PROVIDER`，情况必须是室外而不是室内，因为GPS定位需要卫星，如果你在任何建筑物，卫星都找不到你！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-13T12:08:17.107

我觉得你忘记了许可

```
<uses-permission android:name="android.permission.ACCESS_GPS" />
        <uses-permission android:name="android.permission.ACCESS_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.INTERNET" /> 
```

或者

声明适当的类

```
public class MyLocationListener implements LocationListener {
@Override
  public void onLocationChanged(Location arg0) {
    latitude = arg0.getLatitude();
    longitude = arg0.getLongitude();
  }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-07T10:56:34.083

直接在 之后`locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1, locListener)`，添加以下代码：

```
locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 1, locListener); 
```

编辑：由于@Fabian Streitel 的评论更正了代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-21T14:30:27.700

```
import android.app.ActivityManager;
import android.app.Service;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.media.AudioManager;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.os.IBinder;
import android.os.PowerManager;
import android.util.Log;

import org.json.JSONObject;

import java.util.List;

public class AndroidLocationServices  extends Service {

    PowerManager.WakeLock wakeLock;
    String MODULE="AndroidLocationServices",TAG="";
    private LocationManager locationManager;
    double getLattitude=0,getLogitude=0;
    private static final long MIN_TIME_BW_UPDATES = 1; // 1 minute
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 0;

    public AndroidLocationServices() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        preferences=getSharedPreferences(GlobalConfig.PREF_NAME, MODE_PRIVATE);
        PowerManager pm = (PowerManager) getSystemService(this.POWER_SERVICE);

        wakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "DoNotSleep");

        // Toast.makeText(getApplicationContext(), "Service Created",
        // Toast.LENGTH_SHORT).show();

        Log.e("Google", "Service Created");

    }

    @Override
    @Deprecated
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);

        Log.e("Google", "Service Started");

        locationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);

        //locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2500, 0, listener);
        locationManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER,  MIN_TIME_BW_UPDATES,  MIN_DISTANCE_CHANGE_FOR_UPDATES, listener);

    }

    public LocationListener listener = new LocationListener() {

        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub

            Log.e("Google", "Location Changed");
            location.setAccuracy(100);

            if (location == null)
                return;
                    getLattitude=location.getLatitude();
                    getLogitude=location.getLongitude();

                    Log.e("latitude", getLattitude + "");
                    Log.e("longitude", getLogitude + "");

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }
    };

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();

//        wakeLock.release();

    }

} 
```

显现：

```
 <service android:name=".services.AndroidLocationServices"/> 
```

使用前启动服务：

```
 startService(new Intent(this, AndroidLocationServices.class)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-15T16:06:00.167

在我的情况下，该应用程序没有请求权限。虽然我已经在清单文件中添加了权限。所以我无法让我的应用访问该位置。

作为修复，我手动转到：`Settings->Permissions->Your location`并为我正在开发的应用程序启用了位置权限。这解决了我的问题。

我认为这个问题只发生在通过 Android Studio 安装应用程序时。我希望从 Google Play 安装应用程序时不会发生这种情况。

# c++ - 调试 C++ 代码：捕获第一个 NaN 外观

> ID：11933919
> 
> 赞同：9
> 
> 时间：2012-08-13T12:01:10.473
> 
> 标签：c++, debugging, nan

有没有一种简单的方法来检查调试器中的 C++ 代码是否首次出现 NaN 值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T05:59:49.137

答案在这里给出：[https ://stackoverflow.com/a/5394095/1326595](https://stackoverflow.com/a/5394095/1326595)

只包括

```
#include <fenv.h> 
```

并将以下行添加到代码中：

```
feenableexcept(FE_INVALID | FE_OVERFLOW); 
```

调试器能够捕获信号并显示 NaN 的第一次出现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T12:13:38.740

根据 IEEE 标准，以下条件`false`适用于`NaN`'s：

```
val == val 
```

您可以使用它来触发断言或软件断点，但要注意编译器优化。可能在调试版本中它不会被优化掉

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T12:03:49.130

你可以放一个`assert(val >= 0 || val <= 0)`来捕捉一个 NaN

# java - Java泛型名称冲突，具有相同的擦除

> ID：11933931
> 
> 赞同：30
> 
> 时间：2012-08-13T12:01:44.187
> 
> 标签：java, generics

我有超类Foo。还有一个类 Bar 扩展它。

```
public class Bar extends Foo 
```

Foo 中的功能：

```
protected void saveAll(Collection<?> many) 
```

酒吧功能：

```
public void saveAll(Collection<MyClass> stuff) {
   super.saveAll(stuff);
} 
```

得到错误：

```
 Name clash: The method saveAll(Collection<MyClass>) of type Bar has the same erasure as saveAll(Collection<?>) of type Foo but does not override it. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-13T12:04:35.517

您正在`saveAll`使用不兼容的类型覆盖该方法。也许您想做类似的事情：

```
public class Bar extends Foo<MyClass> 
```

功能在`Foo<E>`

```
protected void saveAll(Collection<E> many) 
```

和功能在酒吧：

```
public void saveAll(Collection<MyClass> stuff) {
   super.saveAll(stuff);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T12:09:03.813

由于 Java 的类型擦除特性，JVM 将无法知道是具有参数化类型 MyClass 的方法还是应该调用的第一个方法。

如果可能或适用，我见过的最常用的避免这种情况的模式是将类更改`Foo`为也具有参数化类型：

```
public class Foo<T> {
    protected void saveAll(Collection<T> many) {}
} 
```

然后让 Bar`Foo`为您的特定类型简单地实现：

```
public class Bar extends Foo<MyClass> {
    public void saveAll(Collection<MyClass> many) {
        super.saveAll(many);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-13T12:19:09.140

在运行时，参数类型被替换为`Object`. 所以`saveAll(Collection<?>)`和`saveAll(Collection<MyClass>)`被转化为`saveAll(Collection)`。这是名称冲突。[在这里](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)查看详细信息。

你可以这样做：

```
public class Foo<T> {
    protected void saveAll(Collection many) {
        // do stuff
    }
}

public class Bar extends Foo<MyClass> {
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-13T12:10:42.623

当编译器编译为字节码时，会发生一个称为擦除的过程。这会从集合中删除类型信息。我相信它会在生成字节码的过程中手动进行强制转换等。如果您删除类的通用部分（即 <..> ），那么您将看到您有两个 saveAll 方法。错误是您有两个保存所有方法将具有相同的签名。集合在字节码中有类型对象。

尝试删除 <..> 可能会使它更清晰。当您放回 <...> 时，请考虑方法的名称。如果它们不同，它应该编译。

另外我不认为这是一个休眠问题，所以应该删除这个标签。这是您遇到的Java通用问题。

你可以在这里做的是输入类

```
public class Bar extends Foo<MyClass> 
```

然后将方法类型设置为 T

```
public void saveAll(Collection<MyClass> stuff) {
   super.saveAll(stuff);
} 
```

然后 Foo 的声明将类似于

```
public abstract class Bar extends Foo<T> {
    public void saveAll(Collection<T> stuff) {
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T12:14:21.977

你只是用不同的签名覆盖方法。

使用 Joshua Bloch 在 Effective Java Second Edition 中描述的 PECS（生产者 - 扩展，消费者 - 超级）规则是个好主意。

根据这条规则，它应该看起来像这样。

在 Foo 类中：

```
public class Foo<E>{

protected void saveAll(Collection<? super E> many){....}

protected void getAll(Collection<? extends E> many){....}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-28T12:39:57.653

虽然现有答案是正确的，但当您不在“ `extends` ...”子句中而是在实际类名中声明实际类型时，很容易发生此错误：

**错误的：**

```
public class Bar<MyClass> extends Foo
{
    ...
} 
```

**正确的：**

```
public class Bar extends Foo<MyClass>
{
    ...
} 
```

# video - 如何检测使用 C#/C++ 连接的显示（视频）源？

> ID：11933933
> 
> 赞同：4
> 
> 时间：2012-08-13T12:02:05.247
> 
> 标签：video, hdmi

我有一个 C# 应用程序，我需要检测哪些所有显示源都连接到系统；例如 VGA、DVI、HDMI 等来源？这可以通过.net 中的任何可用类来完成吗？.Net 会更容易，因为我的应用程序在 WPF 中。另外我不知道是否有任何 WMI 服务可以用来获取这些信息。

基本上我需要搜索系统中连接的所有视频源。

任何想法/建议都将受到欢迎。

问候， 苏哈斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-10T05:12:47.327

请参考以下链接。 `Screen.AllScreens`属性将返回连接到系统的所有显示器的数组。 [MSDN 链接在这里](https://msdn.microsoft.com/en-us/library/system.windows.forms.screen.allscreens(v=vs.110).aspx)

# c++ - LoadLibrary ...失败。缺少 dll

> ID：11933934
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:02:13.927
> 
> 标签：c++, visual-studio-2010, com

我正在创建 COM 对象 dll。当我将它带到 WIN XP 32 位机器并尝试注册时，我收到消息： `LoadLibrary ... failed. The specified module could not be found`.

当我用dependency walker查看它时，我发现缺少3个dll：

```
ATL100.dll
MSVCR100D.DLL
DWMAPI.DLL 
```

解决这个问题的方法有哪些？而且我不喜欢这样一个事实，即当我将这个 COM dll 安装给我的客户时，我还需要将丢失的 dll 放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:15:53.837

您需要在客户端计算机上安装[MS VC++ 2010 可再发行包](http://www.microsoft.com/en-gb/download/details.aspx?id=5555)。

您还应该将您的程序与 redist 包的发布版本相关联，并且不要分发 VC++ 运行时 (msvcr100d.dll) 的调试版本，因为它的发布版本是 VS2010 可再发行包的一部分，如此处[所述](https://stackoverflow.com/questions/10406807/visual-c-executable-and-missing-msvcr100d-dll)。ATL100.dll 也是该包的一部分。[MS 对哪些 dll 可以与应用程序一起分发](http://msdn.microsoft.com/en-us/library/8kche8ah.aspx)有严格的政策。[以前有关 DWMAPI.DLL](https://stackoverflow.com/questions/173433/how-to-fix-dwmapi-dll-delay-load-dependency-under-winxp)的帖子将有助于解决该问题。

# powershell - 使用 switch 语句而不是多个 IF

> ID：11933941
> 
> 赞同：1
> 
> 时间：2012-08-13T12:02:32.320
> 
> 标签：powershell, switch-statement

嗨，我有下面的代码，想知道使用 switch 语句替换它的最佳方法。这个例子我有 4 种可能的结果，但我最终可能会得到超过 20 种，并且 if 语句会变得混乱。

```
$Des = "C:\tools\"
$DListFiles = Get-ChildItem $Des -EA 0

IF((Test-Path $Des)-ne $false -and $DListFiles -eq $null){$DDE = 1}
ElseIF((Test-Path $Des)-ne $false -and $DListFiles -ne $null){$DDE = 2}
ElseIF((Test-Path $Des)-eq $false){$DDE = 3}
Else{$DDE = 4}

write-host "$DDE" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:21:36.593

对于您发布的示例，我个人会使用嵌套 if 来使逻辑更清晰：

```
If(Test-Path $Des){
    If($DListFiles -eq $null){
        $DDE = 1
    }Else{
        $DDE = 2
    }
}Else{
    If($DListFiles -eq $null){
        $DDE = 3
    }else{
        $DDE = 4
    }
} 
```

顺便说一句，你写它的方式并没有给出我认为你想要的逻辑。我不相信您会得到 $DDE = 2。如果我正确阅读了您发布的内容，则逻辑表将在下面发布。同样，嵌套的 If 将有助于解决问题。

```
Test-Path   $Dlist is Null      $DDE
TRUE            TRUE            1
FALSE           FALSE           3
TRUE            TRUE            4
FALSE           FALSE           3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:43:21.807

我最终想出了一些可行的方法，让我知道你们的想法。

```
$Des = "c:\test\"
$DListFiles = Get-ChildItem $Des -EA 0

Switch($Des)
   {  {!$Des} {$DDE = 4; break}
      {((Test-Path $Des)-ne $false -and $DListFiles -eq $null)}  {$DDE = 1; break}
      {((Test-Path $Des)-ne $false -and $DListFiles -ne $null)}  {$DDE = 2; break}
      {((Test-Path $Des)-eq $false)}                             {$DDE = 3; break}
   }

 $DDE 
```

# python - 使用 python urllib/httplib 处理 .cst 文件

> ID：11933944
> 
> 赞同：0
> 
> 时间：2012-08-13T12:02:47.230
> 
> 标签：python, cgi, urllib

我想通过“.cst”文件连接到网络设备。如果你想在浏览器中打开它，你必须输入

```
http://x.x.x.x/index.cst?Lang=en&login=blafoo&passwd=foobla 
```

如何使用 urllib 或其他包发送此请求？

坦克寻求帮助

巴斯蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:06:15.337

与`urllib`：

```
import urllib

site = urllib.urlopen('http://x.x.x.x/index.cst?Lang=en&login=blafoo&passwd=foobla')
data = site.read() 
```

此脚本的变量`data`将存储您从传递的 URL（响应正文）中获得的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:54:32.743

```
import urllib.request
import urllib.parse
params = urllib.parse.urlencode({'Lang': 'en', 'login': 'blafoo', 'passwd': 'foobla'})
f = urllib.request.urlopen("http://x.x.x.x/index.cst?%s" % params)
f.read() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T12:54:55.830

我建议使用[请求](http://python-requests.org)（所有酷孩子都使用它！;），尽管`urllib`已经给出了答案。有要求：

```
import requests
response = requests.get('http://x.x.x.x/index.cst?Lang=en&login=blafoo&passwd=foobla')
# response.text contains the response contents
# response.status_code gives the response status code (200, 201, 404, etc) 
```

额外学分：

```
import requests
data = {'Lang': 'en', 'login': 'blafoo', 'passwd': 'foobla'}
response = requests.get('http://x.x.x.x/index.cst', params=data) 
```

# jquery - 如何从数组中获取json

> ID：11933948
> 
> 赞同：0
> 
> 时间：2012-08-13T12:02:53.127
> 
> 标签：jquery, json

我想知道如何正确地从以下 json 返回数据：假装我有一个 url [http://test.com/tesdata](http://test.com/tesdata)，它给了我以下数据：

```
[{"Identifier":1, "Name":"Test"},
 {"Identifier":2, "Name":"Test"},
 {"Identifier":3, "Name":"Test"}] 
```

所以我做了以下操作来在 div 中获取这些数据：

```
 $.ajax({ 
    type: 'GET', 
    url: 'http://notgiven', 
    data: { get_param: 'value' }, 
    dataType: 'json',
    success: function (data) { 
        alert("s");
        $.each(data, function(index, element) {
            $('.result').append("a");
        });
    },
    error: function(jqXHR, textStatus, errorThrown){
        alert("jqXHR: " + JSON.stringify(jqXHR));
        alert("textStatus: " + JSON.stringify(textStatus));
        alert("errorThrown: " + JSON.stringify(errorThrown));
    }
}); 
```

我收到以下错误无法解析 Json 字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:43:16.343

尝试这个：

```
// create empty object
var json = {};

$.each(data, function(index, element) {
 // for each element, create empty object 
 json[index] = {};
 // map response data to new json object
 json[index]['id'] = element.Identifier;
 json[index]['name'] = element.Name;
}); 
```

该`json`变量现在包含所有~~json 格式的信息，~~方便地存储在 javascript 对象中:)

![在此处输入图像描述](../Images/152eed5a9f5b935e41185bf4376edaae.png)

在您的示例中，这意味着：

```
$.ajax({ 
  type: 'GET', 
  url: 'http://test.com/tesdata', 
  data: { get_param: 'value' }, 
  dataType: 'json',
  success: function (data) { 

       var json = {};

       $.each(data, function(index, element) {
         json[index] = {};
         json[index]['id'] = element.Identifier;
         json[index]['name'] = element.Name;
         // don't know exactly what you try to do here, but let's append this data to '.result'
        $('.result').append("<span id='" + element.Identifier + "'>" + element.Name + "</span>"); 

       });   

  }
}); 
```

请注意，如果您只想将此值附加到某个 div，则无需进行整个 json 转换。在这种情况下，你可以做

```
 success: function (data) { 
               $.each(data, function(index, element) {
                $('.result').append("<span id='" + element.Identifier + "'>" + element.Name + "</span>"); 

  }); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:23:07.787

正如我在评论中所建议的，这可能是一个跨域问题。您不能访问来自不同来源的数据/脚本，这意味着相同的协议 (http/https) 相同的域 (mydomain.com) 相同的端口（通常省略默认为：80）

```
So origin of: http://localhost:8080/data != https://localhost:8080/data
   origin of: http://mydomain.org/data   != http://localhost/data
   origin of: http://mydomain.org/data   != http://localhost/data
   origin of: http://localhost/data      == http://local 
```

主机/其他东西

我仍然不是 100% 确定。但解决问题的第一步是***正确调试***。

可以[使用 xcode 进行调试，](https://stackoverflow.com/questions/4022152/how-to-see-the-javascript-errors-of-phonegap-app-in-xcode) 但如果您想尝试不使用。定义一个错误处理程序。（[检查这个小提琴](http://jsfiddle.net/p8qXs)）

您会看到由于跨域问题而无法正常工作。（及其虚拟网址）遗憾的是，您无法捕获那些跨源错误。您只能在控制台中看到它们..（至少我还不能）

但现在好消息！

PhoneGap 应用程序不限于跨域策略！因此，如果部署，问题应该得到解决。

如果您可以访问后端，我也可以轻松解决此问题。您应该设置`Access-Control-Allow-Origin: *`标头以[启用 CORS](http://enable-cors.org)（跨源资源共享）

注意：对于开发，这应该不是问题，对于生产，我建议设置一个固定的 url，或者如果不需要，将其删除。

**编辑：** 所以这不是跨源问题。正如错误所说：无法解析Json字符串

因此，您检查 jqXHR 响应中的内容。查看原始数据[验证它是否有效](http://jsonlint.com/)。95% 的可能性不是因为我最好的选择是 jquery json-parser 非常可靠。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-13T12:34:41.013

在使用 js 对 json 数据进行任何操作之前，您需要调用 JSON.parse 函数。

```
$.ajax({ 
        type: 'GET', 
        url: 'http://test.com/tesdata', 
        data: { get_param: 'value' }, 
        dataType: 'json',
        success: function (data) { 
            var items = JSON.parse(data);
            $.each(items, function(index, element) {
                $('.result').append(element.Id + " " + element.Name);
            });
        }
        }); 
```

对于 IE 6 和 7，您必须包含 json2.js 文件以支持 JSON.parse 函数。

# c# - 如何在 C# 中序列化 StrokeCollection

> ID：11933952
> 
> 赞同：2
> 
> 时间：2012-08-13T12:03:09.443
> 
> 标签：c#, c#-4.0, memorystream, binaryformatter

我想为此目的在内存流中保存一个 Stroke 使用 BinaryFormatter 但是当我尝试序列化 Stroke 时出现一个错误，我无法序列化 Stroke

有什么方法可以将 Stroke 保存在内存流中或序列化 Stroke？

这是我的代码的一部分

```
int size = inkCanvas1.Strokes.Count();
        IFormatter formatter = new BinaryFormatter();
        MemoryStream stream = new MemoryStream();
        if (size != 0)
        {
            try
            {
                formatter.Serialize(stream, inkCanvas1.Strokes[size - 1]);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T12:06:32.233

这不起作用的原因是`StrokeCollection`没有[`SerializableAttribute`](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)应用。

但是您可以使用该[`StrokeCollection.Save`](http://msdn.microsoft.com/en-us/library/system.windows.ink.strokecollection.save.aspx)方法。

```
var ms = new MemoryStream();
using (ms)
{
    StrokeCollection sc = ...;
    sc.Save(ms);
    ms.Position = 0;
} 
```

然后当你需要的`StrokeCollection`时候，你可以使用接受 a的[构造函数](http://msdn.microsoft.com/en-us/library/ms522846)`Stream`。

# wpf - 在我的 wpf 过渡动画中闪烁

> ID：11933954
> 
> 赞同：0
> 
> 时间：2012-08-13T12:03:17.013
> 
> 标签：wpf, animation, transition, beginanimations

我正在尝试在图像上使用着色器效果来实现自定义过渡动画。我正在使用我制作的用于以图形方式指定缓动贝塞尔函数的系统，并且我在一个名为 Spline 的类中处理所有样条数据。

我正在为发送到样条线的静态方法的时间属性设置动画，以计算贝塞尔数据以进行缓动。然后我得到我发送到我的着色器效果的 Time 属性的计算值，但我不能在这个转换上使用 beginAnimation 因为播放动画的类是非 UI 类并且已经从抽象类继承。

如果我想使用 beginAnimation，我必须让抽象类继承自 dependencyObject 以使用依赖属性作为 BeginAnimation 的参数，但我收到此错误

this.BeginAnimation(TimeProperty, 动画);

“MyClass”不包含 BeginAnimation 的定义，并且找不到接受“MyClass”类型的第一个参数的扩展方法 BeginAnimation（您是否缺少 using 指令或程序集引用）

所有这些依赖/动画系统都不符合我的需求，因为我没有直接在 ui 上工作，我现在完全被卡住了

任何想法？

（我使用了一个 dispatcherTimer 来解决这个问题，但是当动画完成时，我可以在半秒内看到我的应用程序的背景颜色，然后我的第二张图片终于出现了，但我不想要这种行为，因为它会被推销。 ..)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:08:03.357

使用关键帧动画。您可以向其中添加单个帧。例如，您可以每隔第二个关键帧隐藏一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:25:50.883

我最终使用 Storyboard 来实现这一点，在我的抽象类上使用 Dependency 对象继承。

即使在非 UI 对象上使用 Sotryboard/dependencyProperty 系统不是很好（在我看来），它也可以工作。

我有一个故事板，用于将 MyClass 中名为 Time 的 DependencyProperty 从 0 设置为 1。在 Time 的 PropertyChangedCallback 中，我根据我的自定义样条缓动函数计算我的新时间值，然后将其影响到我的着色器的 Progress 属性。

无论如何感谢您的关注。

# tfs - vs 2008 源代码管理比较选项

> ID：11933955
> 
> 赞同：1
> 
> 时间：2012-08-13T12:03:17.790
> 
> 标签：tfs

由于我已经搬到一台新机器上，我再次安装了带有团队资源管理器的 vs 2008，我看不到我之前能够看到的“比较”选项。

右键单击打开的源文件时，我们有“源代码管理”，在里面我只能看到“注释”选项，但缺少比较选项。在解决方案资源管理器中并右键单击该文件时，我可以看到比较选项，但是当打开文件然后尝试与服务器版本进行比较时，则看不到比较选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:50:22.043

```
Tools -> Options -> Source Control 
```

在“Visual Studio Team Foundation Server”下选择“配置用户工具”，这将允许您配置比较工具。

# c# - C#：组件的输出参数索引 [i] 太高或太低

> ID：11933961
> 
> 赞同：3
> 
> 时间：2012-08-13T12:03:41.773
> 
> 标签：c#, parameters, grasshopper

运行以下代码时出现以下错误消息：

> c#: 组件的输出参数索引[1] 太高或太低。

`IGH_DataAccess`已经在“获取当前迭代计数”的帮助中提供了迭代*计数*。在解决方案期间第一次在`SolveInstance()`组件上调用该函数时，迭代计数器将为零。每次后续调用它都会加一。使用`DA.SetData(0, m_settings[0]);`时确实显示第一行。

错误消息出现在使用的程序中，我得到以下异常`DA.SetData(i, m_settings[i]);`：

`System.Exception occurred Message=Unknown file Source=Grasshopper StackTrace: at Grasshopper.Global_Proc.ASSERT(Guid assert_id, String message, Exception exception) in C:\dev\Grasshopper\1.0\root\src\GH_GlobalProc.vb:line 98 InnerException:`

Herafter 是 IGH_DataAccess.SetData 方法的描述：`Stores data in an output parameter during GH_Component.SolveInstance(). Use this function only for setting individual data items. If you want to set lists of data, you *must* call SetDataList() instead.`

将代码更改为`DA.SetDataList(i, m_settings[i]);`第一行的字符时会被拆分，而我希望每一行都被拆分。

我究竟做错了什么？

```
string[] m_settings;

public void ShowSettingsGui()
{
    var dialog = new OpenFileDialog { 
                     Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*" };
    if (dialog.ShowDialog() != DialogResult.OK) return;
    m_settings = File.ReadAllLines(dialog.FileName);
    ExpireSolution(true);
}

protected override void SolveInstance(IGH_DataAccess DA)
{
    if (m_settings == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, 
                          "You must declare some valid settings");
        return;
    }

    for (var i = 0; i < m_settings.Length; i++)
    {
        DA.SetData(i, m_settings[i]);
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:39:03.753

这是通过使用以下代码解决的，将 SetData 替换为 SetDatalist 没有循环和拆分字符串的不同方式：

```
 string m_settings_temp;
            string[] m_settings;
            public void ShowSettingsGui()
            {
                var dialog = new OpenFileDialog { Filter = "Data Sources (*.ini)|*.ini*|All Files|*.*" };
                if (dialog.ShowDialog() != DialogResult.OK) return;

                m_settings_temp = File.ReadAllText(dialog.FileName);
                m_settings = m_settings_temp.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
                ExpireSolution(true);
            }

            protected override void SolveInstance(IGH_DataAccess DA)
            {
                if (m_settings == null)
                {
                    AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "You must declare some valid settings");
                    return;
                }

                else

                {  
                        DA.SetDataList(0, m_settings);
                }  

            } 
```

# c++ - 如何在 C++ 中杀死进程，只知道其名称的一部分

> ID：11933969
> 
> 赞同：4
> 
> 时间：2012-08-13T12:03:54.700
> 
> 标签：c++, linux, unix, process, kill

前段时间我需要编写 C++ 代码来杀死一些进程。在我的主程序中，我运行带有 system("...") 的大型 CAE 系统包，输入时带有不同的文件名字符串。CAE 软件创建了许多进程，其中包含进程名称字符串*filename* )。一些 CAE 进程*worktime* > *max_time*，而不是我需要关闭它们：

```
//filename contains part of CAE-process name
    string s="/bin/kill -9 `ps aux | grep "+filename+" | awk {'print $2'}`";
    system(s.c_str()); 
```

输出是：

```
Usage:
  kill pid ...              Send SIGTERM to every process listed.
  kill signal pid ...       Send a signal to every process listed.
  kill -s signal pid ...    Send a signal to every process listed.
  kill -l                   List all signal names.
  kill -L                   List all signal names in a nice table.
  kill -l signal            Convert between signal numbers and names. 
```

我尝试使用 execvp 运行，尝试[通过 bash 脚本运行 kill 或 pkill 的不同方式](https://stackoverflow.com/a/9402442/1566267)，调用 system("name_of_script.sh")，其中包含脚本`kill -9 *filename*`但结果相同。
使用`kill`and`/bin/kill`也给出了相同的输出`bash -c kill...`。**从我的系统**（Ubuntu Natty）
使用**gnome-terminal**： **`kill`**

 **```
kill -9 `ps aux | grep filename | awk {'print $2'}` 
```

关闭所有必要的进程！它**有效**。

使用时`pkill`，据我所知，我们需要完整的进程名称来杀死它，但我只有部分名称。

我还尝试使用 pthreads 将计算进程包装到子线程中并使用 pthread_cancel 停止它，但它不起作用，因为 CAE 系统进程不接收信号（我认为，捕获它们），唯一的方法是 SIGTERM。
用 pthread_kill 杀死子线程“wrap”也会杀死父线程（我的主程序）。

我不知道[从 Signals.h 调用 kill 的](http://linux.die.net/man/2/kill)
CAE 进程 pid 关闭主程序不会停止 CAE 进程（并且没有 -Z 标志，所以它们不是我的程序进程子进程吗？？）

如何关闭从我的主程序运行 > MAXTIME 的 CAE 进程？

* * *

***问题是我正在通过 QtCreator 中的调试器（gdb）运行主程序。如果没有 QtCreator shell-script 以正确的方式运行参数，尽管参数以两种方式正确传递。***

* * *

此外，我必须清除一些 CAE 进程，它们在 cmdline 中没有文件名，但它们是该进程的父进程或子进程。在 shell 脚本中，您可以使用：

```
cat /proc/"$P"/status | grep PPid | grep -o "[0-9]*" 
```

where`$P`是一个带有被杀死进程的 pid 的变量。 [这里有几种](https://stackoverflow.com/questions/7138783/how-to-display-the-current-process-tree-of-a-bash-session)杀死所有子进程的方法。

我会写smth。在 C++ 中类似，它将扫描`/proc/xxxx/status`直到`PPid`= ppid_of_my main_program 并切断该分支。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T12:56:16.767

您不必打开 shell 来终止进程。只需使用“杀死”功能：

```
#include <sys/types.h>
#include <signal.h>

int kill(pid_t pid, int sig); 
```

[http://linux.die.net/man/2/kill](http://linux.die.net/man/2/kill)

要查找要杀死的进程，请阅读以下目录：

/proc/####/命令行

其中 #### 是任何正在运行的进程 ID 的编号。所以代码大致是读取 /proc 目录并列出所有数字目录，这些是当前正在运行的进程，您可以在该目录的“cmdline”文件中找到生成该进程的命令的名称。然后，您可以使用正则表达式或字符串比较来识别要终止的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T22:15:33.177

假设文件名不是太奇特或包含正则表达式模式，这应该可以工作：

```
string s="pkill -9 -f "+filename";
system(s.c_str()); 
```

作为旁注，`-9`这是最后的信号，而不是你应该开始的东西。因此，我会推荐不那么残酷的：

```
string s="pkill -f "+filename"+";sleep 2; pkill -9 -f "+filename;
system(s.c_str()); 
```**

# actionscript-3 - AS3：获取 3D 三角形的 3D 中间位置

> ID：11933971
> 
> 赞同：0
> 
> 时间：2012-08-13T12:04:04.077
> 
> 标签：actionscript-3, math, 3d

3D 三角形的中点是连接每个顶点及其对边中点的三个线段的交点。

假设一个 3D 三角形由三个`Vector3D`实例定义。如何`Vector3D`使用相同的算法获得中间点（形式）？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:20:09.107

```
diagonal1 = (1-t)*A + t*(B+C)/2
diagonal2 = (1-s)*B + s*(A+C)/2
intersection at t = s = 2/3
which gives point p = (A+B+C)/3 
```

# pdf - 基于mupdf的开源pdf编辑器

> ID：11933977
> 
> 赞同：0
> 
> 时间：2012-08-13T12:04:17.307
> 
> 标签：pdf, editor, mupdf

这不是程序代码问题。

我想知道你是否知道基于 mupdf 的开源 pdf 编辑器。

其实我只需要以下功能：

1.  突出显示一个选择矩形。（并且该功能删除了一个突出显示的矩形）
2.  在某些文本中添加一行（以指示应删除或忽略这些文本）。（以及删除此行的功能）
3.  旋转一页或整个 pdf 文件。
4.  添加评论（注解）。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:37:51.967

我认为没有基于 mupdf 的有用 pdf 编辑器

(1)[使用 MuPDF 编辑 PDF](http://en.wikipedia.org/wiki/PDFedit)和 (2) [MuPDF wikipedia](http://en.wikipedia.org/wiki/MuPDF)

虽然还有其他 pdf 编辑器是免费软件。

1.  [PDF编辑](http://en.wikipedia.org/wiki/PDFedit)
2.  [pdf](http://en.wikipedia.org/wiki/Pdftk)

希望这会有所帮助:)

# jenkins - 詹金斯 javac 参数

> ID：11933979
> 
> 赞同：0
> 
> 时间：2012-08-13T12:04:38.057
> 
> 标签：jenkins, command-line-arguments, javac

我需要使用 maven 设置一个 java 编译器参数。我似乎找不到 Jenkins 在哪里调用 Java 编译器让我添加参数。

如果有人可以阐明我将在哪里设置它？

谢谢，杰克

* * *

所以我发现 javac 参数是通过插件在项目的 POM 中设置的。例如。以下：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
      <compilerArgument>-verbose -bootclasspath ${java.home}\lib\rt.jar</compilerArgument>
    </configuration>
  </plugin>
</plugins> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-14T16:36:31.697

使用 Maven 3.6，答案可能是在您的项目中进行配置`pom.xml`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.8.0</version>
    <configuration>
        <compilerArgs>
            <arg>-verbose</arg>
            <arg>-bootclasspath ${java.home}\lib\rt.jar</arg>
        </compilerArgs>
    </configuration>
</plugin> 
```

请参阅[**Apache Maven 编译器插件**文档](https://maven.apache.org/plugins/maven-compiler-plugin/)、[`compile:compile`目标](https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#compilerArgs)和[*传递编译器参数*示例](https://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html)。

# javascript - 无法在 IE 7/8 中使用 parentNode 抓取 DOM 节点

> ID：11933980
> 
> 赞同：-1
> 
> 时间：2012-08-13T12:04:38.387
> 
> 标签：javascript, internet-explorer, internet-explorer-7

我正在研究[Adam Maschek 出色的图像地图工具](http://code.google.com/p/imgmap/)的改编版本。我添加的新功能是左/上/宽/高输入框，以便您可以对热点位置/大小进行像素控制。我已经让它在 FF 和 Chrome 中运行良好，但我遇到的问题是在 IE 7/8 中，它不会在更改时检索输入框的值。

这是发生问题的函数：

```
function gui_dimension_change(e) {

function changeAreaPos(areaNum, inputVal, cssAttrib, coordPos) {
var coordsBox = document.getElementsByClassName('img_coords')[areaNum],
    newCoordsVal = coordsBox.value.split(","),
    newWidth = "",
    newHeight = "",
    imCode = imcodeContainer.value,
    pattern = imCode.match(/\d+,\d+,\d+,\d+/g);

    myimgmap.areas[areaNum].style[cssAttrib] = inputVal;

    if (cssAttrib === "left" || cssAttrib === "top") {
        myimgmap.areas[areaNum].label.style[cssAttrib] = inputVal;
        newCoordsVal[coordPos] = inputVal;
    } else if (cssAttrib === "width") {
        myimgmap.areas[areaNum].width = inputVal;
        newWidth = parseInt(newCoordsVal[0]) + parseInt(inputVal);
        newCoordsVal[coordPos] = newWidth;
    } else if (cssAttrib === "height") {
        myimgmap.areas[areaNum].height = inputVal;
        newHeight = parseInt(newCoordsVal[1]) + parseInt(inputVal);
        newCoordsVal[coordPos] = newHeight;
    }

    newCoordsVal = newCoordsVal.join(",");
    myimgmap.areas[areaNum].lastInput = newCoordsVal;
    coordsBox.value = newCoordsVal;

    imCode = imCode.replace(pattern[areaNum], newCoordsVal);
    imcodeContainer.value = imCode;

};

    // alert(this);
    // alert(this.parentNode);
    // alert(this.parentNode.id);

var inputParent = this.parentNode,
    inputVal = this.value,
    whichBox = this.name,
    areaNum = inputParent.id.replace("img_area_", ""),
    imcodeContainer = document.getElementById('html_container');

switch(whichBox)
{
    case "img_left":
        changeAreaPos(areaNum, inputVal, "left", 0);
    break;
    case "img_top":
        changeAreaPos(areaNum, inputVal, "top", 1);
    break;
    case "img_width":
        changeAreaPos(areaNum, inputVal, "width", 2);
    break;
    case "img_height":
        changeAreaPos(areaNum, inputVal, "height", 3);
    break;
}

} 
```

函数调用如下：

```
myimgmap.addEvent(props[id].getElementsByTagName('input')[5], 'change', gui_dimension_change);
myimgmap.addEvent(props[id].getElementsByTagName('input')[6], 'change', gui_dimension_change);
myimgmap.addEvent(props[id].getElementsByTagName('input')[7], 'change', gui_dimension_change);
myimgmap.addEvent(props[id].getElementsByTagName('input')[8], 'change', gui_dimension_change); 
```

所以在change事件上我不能用this.parentNode设置inputParent，也不能用this.value获取输入框的值。适用于 FF/Chrome 但不适用于 IE 7/8，任何想法为什么 IE 与 parentNode 存在问题并获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:40:37.500

好的，我想出了解决方案，以防万一有人关心。这完全是因为 IE 处理事件目标的方式与其他浏览器不同，所以我做了以下操作：

```
var obj = (myimgmap.isMSIE) ? window.event.srcElement : e.currentTarget; 
```

并使用 obj 而不是这个。

愚蠢的IE！！！

# android - 如何为 Intent.ACTION_GET_CONTENT 提供内容

> ID：11933984
> 
> 赞同：7
> 
> 时间：2012-08-13T12:04:53.783
> 
> 标签：android, android-intent, android-contentprovider

web 和 stackoverflow 包含几个示例，如何使用 ACTION_GET_CONTENT 意图从另一个 Android 应用程序获取文件（例如，将其用作电子邮件附件）。但是我必须实现什么样的类来创建为 ACTION_GET_CONTENT 事件提供内容的应用程序，例如我可以选择这个应用程序（例如，用于选择电子邮件附件）。

ContentProvider 是正确的解决方案吗？我必须在我的 AndroidManifest.xml 中添加什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-13T18:56:02.900

经过几个小时的网络搜索，我找到了以下解决方案。

1.  实现一个 Activity 处理意图。在其中，使用以下或更具体的代码：

    ```
    Uri resultUri = // the thing to return
    Intent result = new Intent();
    result.setData(resultUri);
    setResult(Activity.RESULT_OK, result);
    finish(); 
    ```

2.  将以下内容添加到清单中：

    ```
    <activity
        android:name="ActivityName"
        android:label="Some label" >
        <intent-filter>
            <action android:name="android.intent.action.GET_CONTENT" />
            <category android:name="android.intent.category.OPENABLE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter>
    </activity> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T09:34:24.683

从 api 级别 18 开始，传入意图也可以将 EXTRA_ALLOW_MULTIPLE 设置为 true，在这种情况下，您可以将结果发送回多个文件。为此，您需要将其设置为 ClipData：

```
resultIntent.setClipData(clipData) 
```

# c# - C# ComplexCollection 动态列

> ID：11933992
> 
> 赞同：0
> 
> 时间：2012-08-13T12:05:40.910
> 
> 标签：c#, sql-server-2008, entity-framework-4

我正在使用实体框架并有一个返回数据的存储过程。返回的列数和列名总是不同的。我必须将该 tada 写入 excel，所以我必须知道如何选择第一、第二、第三等列。我返回的数据如下所示：

```
Name    JAN11   FEB11
name1   12      45
name2   45      45

Name    JUN12   JUL12   AUG12
name2   5       5       6
name3   12      45      4 
```

任何数量的列都是可能的。怎么可能知道哪个列名是第一、第二等。
当我写到 excel 时，我必须选择列 JAN11 的值，但它并不总是存在。

# sql - 如何复制所有主记录的相关行

> ID：11933993
> 
> 赞同：-2
> 
> 时间：2012-08-13T12:05:46.243
> 
> 标签：sql, tsql, master-detail

我想为所有主行复制详细表中的相关行。

例如：
主表为：

```
PK   | Data
--------------
1    |  A
2    |  B
3    |  C 
```

明细表为：

```
PK    | FK     | Data
---------------------
1     | 1      | AA
2     | 1      | BB
3     | 1      | CC 
```

并在运行 sql 查询后：
详细表为：

```
PK    | FK     | Data
---------------------
1     | 1      | AA
2     | 1      | BB
3     | 1      | CC
1     | 2      | AA
2     | 2      | BB
3     | 2      | CC
1     | 3      | AA
2     | 3      | BB
3     | 3      | CC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:13:34.323

您在输出中给出的是交叉连接 (http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)，通常是“一个坏主意”。

通常，您希望至少有一个 WHERE 子句来限制要返回的数据，因为随着表变大，您将获得的结果将快速增长。返回的行数将是两个表大小的乘积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T12:17:01.577

我认为您的详细表是这样的（FK 数据应该是`1,2,3`而不是`1,1,1`）

```
PK | FK | 数据
---------------
1 | 1 | AA
2 | 2 | BB
3 | 3 | 抄送

```

你可以这样查询：

```
SELECT detail.* FROM master, detail 
```

# [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!3/99176/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T13:54:11.623

```
</pre><code>
Create database:
USE [t]
GO
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[detail](
    [PK] [int] IDENTITY(1,1) NOT NULL,
    [FK] [int] NULL,
    [Data] [varchar](20) NULL,
 CONSTRAINT [PK_detail] PRIMARY KEY CLUSTERED 
(
    [PK] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

ALTER TABLE [dbo].[detail]  WITH CHECK ADD  CONSTRAINT [FK_detail_master] FOREIGN KEY([FK])
REFERENCES [dbo].[master] ([PK])
GO

ALTER TABLE [dbo].[detail] CHECK CONSTRAINT [FK_detail_master]
GO

//Create master table:

USE [t]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET ANSI_PADDING ON
GO

CREATE TABLE [dbo].[master](
    [PK] [int] IDENTITY(1,1) NOT NULL,
    [Data] [varchar](20) NULL,
 CONSTRAINT [PK_master] PRIMARY KEY CLUSTERED 
(
    [PK] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

//Create detail table:

USE [t]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create procedure [dbo].[douplicate]
 @source int,
 @des int
as
begin
insert into dbo.detail(FK,Data)
SELECT     @des,dbo.detail.Data
FROM         dbo.detail INNER JOIN
                      dbo.master ON dbo.detail.FK = dbo.master.PK
where fk=@source                  
end

//Insert values:

insert into master values 
  ('A'),
  ('B'),
 ('C')

insert into detail  values
  (1,'AA'),
  (2,'BB'),
  (3,'CC')

//Create procedure and solotioanswer:

USE [t]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create procedure [dbo].[douplicate]
 @source int,
 @des int
as
begin
insert into dbo.detail(FK,Data)
SELECT     @des,dbo.detail.Data
FROM         dbo.detail INNER JOIN
                      dbo.master ON dbo.detail.FK = dbo.master.PK
where fk=@source                  
end
</code></pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T12:56:29.373

```
insert into Detail(PK, FK, Data)
select D.PK, C.PK, D.Data
from Detail as D
  cross join (select PK
              from Master as M
              where M.PK <> 1) as C
where D.FK = 1 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/77230)

# android - Android刷机和刷机工具

> ID：11933994
> 
> 赞同：-4
> 
> 时间：2012-08-13T12:05:53.917
> 
> 标签：android

我想知道在android中刷机是什么意思，刷机可用的工具有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T12:16:18.973

按照这个链接。[什么是闪烁](http://androidmobileaz.com/phone-repairs/muve-phone-cricket/what-is-flashing/)

在 android 中可用于刷机的工具`fastboot`是 android-sdk 提供的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:02:02.630

来自[Android 爱好者委员会](https://android.stackexchange.com/questions/2885/what-is-the-difference-between-rooting-jailbreak-rom-mod-etc)：

“刷机意味着复制或安装......您实际上是在擦除设备并恢复以前的状态（备份），或者您正在刷新新的 ROM”

Fastboot 是通常用来刷机的工具。Cyanogenmod wiki 有一个关于何时以及如何使用 fastboot的[精彩页面。](http://wiki.cyanogenmod.com/wiki/Fastboot)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T13:20:01.373

刷机是android中用来标记Android手机上重新安装（或全新安装）操作系统的术语，ROM通常是指与Android手机兼容的预构建映像，如前所述Fastboot可以用于刷机，有几种展示如何在 android 上刷写自定义 ROM 的网站和博客文章[是](http://www.androidpolice.com/2010/05/08/complete-guide-how-to-flash-a-custom-rom-to-your-android-phone-with-rom-manager-full-backup-restore/)其中之一，但是您可能应该去 xda 开发人员或其他网站查找有关如何刷写特定 android 手机的更多信息，您可能无法刷写如果引导加载程序被锁定，您的手机。

# c++ - 为什么不能在 lambda 中使用私有方法？

> ID：11933999
> 
> 赞同：21
> 
> 时间：2012-08-13T12:06:19.767
> 
> 标签：c++, c++11, lambda

有这样的课：

```
class A {
public:
    bool hasGrandChild() const;

private:
    bool hasChild() const;
    vector<A> children_;
}; 
```

为什么不能`hasChild()`在这样的方法中定义的 lambda 表达式中使用私有方法`hasGrandChild()`？

```
bool A::hasGrandChild() const {
    return any_of(children_.begin(), children_.end(), [](A const &a) {
        return a.hasChild();
    });
} 
```

编译器发出该方法`hasChild()`在上下文中是私有的错误。有什么解决方法吗？

**编辑：** 看来我发布的代码最初是有效的。我以为是等价的，但是[在GCC上不起作用](http://ideone.com/zKUsF)的代码更像是这样的：

```
#include <vector>
#include <algorithm>

class Foo;

class BaseA {
protected:
    bool hasChild() const { return !children_.empty(); }
    std::vector<Foo> children_;
};

class BaseB {
protected:
    bool hasChild() const { return false; }
};

class Foo : public BaseA, public BaseB {
public:
  bool hasGrandChild() const {
    return std::any_of(children_.begin(), children_.end(), [](Foo const &foo) {
        return foo.BaseA::hasChild();
      });
  }  
};

int main()
{
  Foo foo;
  foo.hasGrandChild();
  return 0;
} 
```

似乎完全限定名称存在问题，因为[这不起作用](http://ideone.com/DJezf)，但这[有效](http://ideone.com/zGtYI)。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T07:38:02.560

当 lambda 尝试使用完全限定名称从父类访问受保护的成员时，这似乎只是一个特殊情况下的 GCC 错误。[这不起作用](http://ideone.com/DJezf)：

```
class Base {
protected:
    bool hasChild() const { return !childs_.empty(); }
    std::vector<Foo> childs_;
};

class Foo : public Base {
public:
  bool hasGrandChild() const {
    return std::any_of(childs_.begin(), childs_.end(), [](Foo const &foo) {
      return foo.Base::hasChild();
    });
  }  
}; 
```

，但这[有效](http://ideone.com/zGtYI)：

```
class Foo : public Base {
public:
  bool hasGrandChild() const {
    return std::any_of(childs_.begin(), childs_.end(), [](Foo const &foo) {
      return foo.hasChild();
    });
  }  
}; 
```

根据 C++11、5.1.2/3：

> lambda 表达式的类型（也是闭包对象的类型）是唯一的、未命名的非联合类类型——称为闭包类型——其属性如下所述。此类类型不是聚合 (8.5.1)。**闭包类型在包含相应 lambda-expression 的最小块作用域、类作用域或命名空间作用域中声明**。

然后是 C++11、11.7/1：

> 嵌套类是成员，因此具有与任何其他成员相同的访问权限。

所以提到的函数局部 lambda 应该与类的任何其他成员具有相同的访问权限。因此它应该能够从父类调用受保护的方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-13T12:10:05.710

标准（C++11，§5.1.2/3）指出

> lambda 表达式的类型（也是闭包对象的类型）是唯一的、未命名的非联合类类型——称为*闭包类型*。

由于它是一个独特的类类型，它不是`friend`of `A`，因此它无权访问`A`的私有成员。

编译器在这里所​​做的是创建一个类类型，该类类型具有适当的成员来存储任何捕获的变量、适当的`operator()`等——如果你想在 C++03 中模拟 lambda，这正是你自己编写的。这种类型肯定无法访问`private`成员，这可能更容易想象为什么存在限制~~以及为什么没有解决方法~~。

**有关可能的解决方法的**更新：****

 **最好说“没有使用 lambda 的变通方法”，因为通常变通方法确实存在，尽管它们要求您放弃方便的 lambda 语法。例如，您可以：

1.  编写一个本地类类型，显式捕获`this`它需要的任何其他本地变量（受 Björn Pollex 下面的评论启发）。
2.  编写一个`private`方法而不是 lambda 并将其作为回调传递（例如，`std::bind`为了方便使用）。如果您想捕获本地人，`this`您可以`std::bind`在呼叫站点使用更多来执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T12:41:57.473

解决方法：

```
typedef  bool (A::*MemFn)(void) const;

bool A::hasGrandChild() const {
    MemFn f = &A::hasChild;
    return any_of(childs_.begin(), childs_.end(), [=](A const &a) {
            return (a.*f)();
    });
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T21:58:47.123

您可以显式捕获`this`并使其成为可以访问私有成员的“成员 lambda”。

例如，考虑以下示例：

```
#include <iostream>
class A {
private:
    void f() { std::cout << "Private"; }
public:
    void g() { 
        [this] { 
            f(); 
            // doesn't need qualification 
        }(); 
    }
};
class B {
private:
    void f() { std::cout << "Private"; }
public:
    void g() { [] { f(); }(); } // compiler error
};
int main() {
    A a;
    a.g();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T12:07:57.697

这是不可能的，因为 lambda 不是该类的一部分。这与创建类外函数并调用它而不是创建 lambda 相同。当然，它无法访问私人成员。**