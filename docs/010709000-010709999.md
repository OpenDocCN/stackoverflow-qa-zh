# StackOverflow 问答 10709000-10709999

# eclipse - 表和两个按钮的 Eclipse 布局

> ID：10709000
> 
> 赞同：0
> 
> 时间：2012-05-22T19:43:35.670
> 
> 标签：eclipse, swt

我正在尝试为 Eclipse 编辑器设计一个表单并遇到一些问题。

这个想法是有一个包含 2 个部分的页面 - 左侧部分包含一个表格和两个按钮。该表应与该部分的顶部对齐并向右扩展至底部。我希望按钮位于该部分中表格的右侧，每个按钮在另一个下方，并与表格顶部对齐。

有谁知道我需要为 GridLayouts 设置哪些设置才能完成这项工作？我已经尝试了所有我能想到的组合，但没有运气。

我能得到的最接近的结果是页面底部的第二个按钮。

到目前为止，这是我的代码的摘录：-

```
Section section = toolkit.createSection(sashForm, ExpandableComposite.TITLE_BAR | ExpandableComposite.EXPANDED | ExpandableComposite.NO_TITLE_FOCUS_BOX);
section.setText("All Items");

Composite client = toolkit.createComposite(section);
section.setClient(client);

client.setLayout(new GridLayout(2, false));

Table table = toolkit.createTable(client, SWT.NULL);
table.setLayoutData(new GridData(GridData.FILL_HORIZONTAL | GridData.VERTICAL_ALIGN_BEGINNING));

TableViewer viewer = new TableViewer(table);

Button addButton = toolkit.createButton(client, "Add", SWT.PUSH);
addButton.setLayoutData(new GridData(GridData.FILL_HORIZONTAL | GridData.VERTICAL_ALIGN_BEGINNING));

Button removeButton = toolkit.createButton(client, "Remove", SWT.PUSH);
removeButton.setLayoutData(new GridData(GridData.FILL_HORIZONTAL | GridData.VERTICAL_ALIGN_BEGINNING)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:33:01.630

看看[SWT 布局教程](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)，它有一个关于 GridLayout 的好部分。

您将希望使用`GridData.verticalSpan`for 表使其覆盖两行。那应该把两个按钮放在右边。但是按钮将占用与表格相同的空间，这可能不是您想要的，因此您可能需要为表格提供垂直尺寸提示。

# php - 如何通过 php system() 运行“at”命令

> ID：10709008
> 
> 赞同：0
> 
> 时间：2012-05-22T19:43:52.350
> 
> 标签：php, unix

出于某种奇怪的原因，这

`echo system("echo 'echo hello > /dev/pts/2' | /usr/bin/at 19:36");`

拒绝从我的 php 脚本工作，但是当我通过命令行输入命令时，该命令工作正常。

我知道 php 有权执行一些命令。我可以从 php 脚本运行“ls”，但不能运行“at”命令。我尝试过使用文件权限，但到目前为止无济于事:(

**编辑**

/usr/bin/at 的权限是：

`-rwxr-sr-x 1 daemon daemon 42752 Jan 15 2011 at`

我认为这是一个权限问题，如果我从我的 ssh 终端执行 php 文件，它工作正常，但不是从网络。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:52:11.633

你正在执行的是

```
echo 'hello' > /dev/pts/2 | /usr/bin/at 19:36 
```

意义

```
echo 'hello' > /dev/pts/2 
```

并将标准输出管道传输到，`/usr/bin/at 19:36`但由于您已经将回声重定向到`/dev/pts/2`，这将是空的。你可能打算做的是：

```
echo system("echo 'echo hello > /dev/pts/2' | /usr/bin/at 19:36"); 
```

您可能还想使用`shell_exec`通过 shell 传递命令，或者`proc_open`让您更好地控制正在执行的命令的 stdin/out/err。您的示例将对应于（改编自 php.net 文档的示例）：

```
<?php
$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
   1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
   2 => array("pipe", "w")  // stderr is a pipe that the child will write to
);

$process = proc_open('/usr/bin/at', $descriptorspec, $pipes);

if (is_resource($process)) {
    fwrite($pipes[0], 'echo "hello" > /dev/pts/2');
    fclose($pipes[0]);

    $stdout = stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    $stderr = stream_get_contents($pipes[2]);
    fclose($pipes[2]);

    $return_value = proc_close($process);
    echo "command returned $return_value. stdout: $stdout, stderr: $stderr\n";
} else {
    echo "Process failed";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:05:19.880

在您的 php.ini 文件中检查 disable_functions 有时出于安全原因禁用诸如系统之类的功能。

# javascript - 返回局部变量或 GET 结果

> ID：10709011
> 
> 赞同：0
> 
> 时间：2012-05-22T19:44:06.520
> 
> 标签：javascript, jquery

我想返回 x || $.get。

或者换句话说，如果 x 为真，则返回 x，否则执行 GET 调用并返回服务器提供的值。

下面列出了我的尝试（理想情况下，它将遵循 return x || y 格式，可能带有匿名函数？而不是 if/then）。

问题是我从 $.get 函数返回的结果似乎不是我所期望的。

希望能解释发生了什么。

谢谢

```
$(function(){

  function test(x,y) {
    if(x==true) {return true;}
    else{
      //test.php is echo($_GET['y']==123);
      $.get('ajax.php',{'y':y},function (status) {return status;});
    }
  }

  alert(test(false,123));

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:50:38.987

如果您使用的是 jQuery 1.5 或更高版本，那么[Deferred](http://api.jquery.com/category/deferred-object/)和[Promise](http://api.jquery.com/Types/#Promise)是这类事情的好帮手。每当您调用 AJAX 调用时，您得到的都是 Promise 对象，您可以通过 .done()、.fail() 和 .then() 将函数附加到这些对象。

然而！[正如对延迟/承诺和所有这些东西（ http://www.erichynds.com/jquery/using-deferreds-in-jquery/](http://www.erichynds.com/jquery/using-deferreds-in-jquery/) ）的出色介绍所指出的，您还可以使用 $.wait() 的能力处理一个不承诺自动进行缓存的值。所以这样的代码：

```
$.when(getToken()).done(
  function (token) {
    // do something with the token, which may or may not have been 
    // retrieved from the remote service
  }
); 
```

可以处理获取缓存值或没有问题的承诺：

```
function getToken() {
  // Return either the cached value or a jQuery Promise. If $.when() gets the
  // cached value it will immediately realize that you didn't give it a
  // promise and it will instead create a jQuery Deferred to return and
  // .resolve() it using the value it did get. Thus, either way what
  // comes out of the function is something .when() can deal with and call a function.
  if (this.cache["token"]) {
    return this.cache["token"];
  } else {
    return $.get(" ... some url ... ");
  }
}; 
```

# countdowntimer - 无法解决 Javascript 计时器

> ID：10709012
> 
> 赞同：0
> 
> 时间：2012-05-22T19:44:06.880
> 
> 标签：countdowntimer

我在此页面[http://jian.comoj.com/countdown.php](http://jian.comoj.com/countdown.php)上的计时器没有倒计时。我按照视频教程进行操作，但不知何故出了点问题，我不知道它是什么。

```
<?php
include "connect.php";
$query= "select * from product where product_id='1'";
$result= mysql_query($query);
$record= mysql_fetch_object($result);
$time= $record->end_time;
date_default_timezone_set('Asia/Singapore');
$unix_time= strtotime($time); 
```

?>

```
<script type="text/javascript">

    function countdown(){

        <?php 
            $now= time();

            $sec= $unix_time-$now;

            $min= $sec/60;

            $hour= $min/60;

            $sec %= 60;

            $min %= 60;
            ?>

        var hour= <?php echo floor($hour); ?>;
        var min= <?php echo $min; ?>;
        var sec= <?php echo $sec; ?>;
        document.getElementById("hour").innerHTML = hour;
        document.getElementById("min").innerHTML = min;
        document.getElementById("sec").innerHTML = sec;
        setInterval('countdown()',1000);
    }

</script>

<div id="hour"></div>
<div id="min"></div>
<div id="sec"></div>

<script type="text/javascript">countdown();</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:02:14.093

```
function countdown(){

        var hour= 3;
        var min= 39;
        var sec= 58;
        document.getElementById("hour").innerHTML = hour;
        document.getElementById("min").innerHTML = min;
        document.getElementById("sec").innerHTML = sec;
        setTimeout('countdown()',1000);
    } 
```

查看它们固定的功能，即小时、分钟和秒。

# arrays - 将文字列表绑定到 SQL 查询作为将返回 1 行的列？

> ID：10709015
> 
> 赞同：2
> 
> 时间：2012-05-22T19:44:09.513
> 
> 标签：arrays, tsql, list

我有一个返回单行的 SQL 查询，我有一个数字列表，我需要将其作为单独的行返回，单行数据绑定到它们的行。

例如，这就是我想要做的

```
select a,b,c, barcode
from database
join ('12345', '67890',...) as barcode
where a=1 and b=2 and c=3 
```

我需要这样做，因为我正在修改一些从查询中寻找特定格式的代码，并且修改代码以匹配我拥有的文字列表比做这样的事情要困难得多

```
 Example Output:

a     b     c     barcode
-     -     -     -------
1     2     3     12345
1     2     3     67890
1     2     3     ....
1     2     3     ....
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:17:50.980

最简单的方法是创建一个带有单列的条形码表，一次在此处插入一个您想要的值，然后加入该表。

也可以使用工会来捏造它。连接 ('484','48583',...) 的问题是，当您希望每条记录一行时，您要连接到具有多列的单行。

伪编码：

```
select a,b,c, barcode
from database
join (select 12345 union all select 289384 union all...)a as barcode
where a=1 and b=2 and c=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:24:36.080

基本上，您可以将列表作为单个 CSV 字符串传递，并将其转换为一组项目。在这种情况下经常使用表值函数，但实际上有很多选项可供探索。可以在 Erland Sommarskog 的文章集中找到各种方法及其测试的非常全面的集合：[SQL Server 中的数组和列表](http://www.sommarskog.se/arrays-in-sql.html)。

如果它是一个函数，您的查询可能如下所示：

```
SELECT
  t.a,
  t.b,
  t.c,
  s.Value AS barcode
FROM yourtable t
CROSS JOIN dbo.Split('12345,67890', ',') s
WHERE t.a = 1
  AND t.b = 2
  AND t.c = 3 
```

# javascript - 在鼠标悬停时更改图像

> ID：10709016
> 
> 赞同：14
> 
> 时间：2012-05-22T19:44:10.287
> 
> 标签：javascript, jquery, html

在鼠标悬停和鼠标悬停时更改图像的正确方法是什么（使用/不使用jQuery）？

```
<a href="#" id="name">
    <img title="Hello" src="/ico/view.png" onmouseover="$(this).attr('src','/ico/view.hover.png')" />
</a> 
```

好的，这是可行的，但是之后如何改回原始图像`mouseout`？

如果可能的话，我想内联做这件事，没有 document.ready 函数。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-11T17:25:02.980

这是用于更改图像 onmouseover 和 onmouseout 的原生 javascript 内联代码：

```
<a href="#" id="name">
    <img title="Hello" src="/ico/view.png" onmouseover="this.src='/ico/view.hover.png'" onmouseout="this.src='/ico/view.png'" />
</a> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-22T19:54:27.067

尝试这样的事情：

**HTML**：

```
<img src='/folder/image1.jpg' id='imageid'/> 
```

**jQuery：** ​</p>

```
$('#imageid').hover(function() {
  $(this).attr('src', '/folder/image2.jpg');
}, function() {
  $(this).attr('src', '/folder/image1.jpg');
}); 
```

*   [## 演示](http://jsfiddle.net/8JCXD/12/) 

**编辑：（** *在发布 OP HTML 之后）*

**HTML：**

```
<a href="#" id="name">
    <img title="Hello" src="/ico/view.png"/>
</a> 
```

**jQuery：**

```
$('#name img').hover(function() {
  $(this).attr('src', '/ico/view1.png');
}, function() {
  $(this).attr('src', '/ico/view.png');
}); 
```

*   [## 演示](http://jsfiddle.net/8JCXD/13/) 

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T19:49:45.157

你在 / 之前放一两个点

```
('src','./ico/view.hover.png')" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T19:53:31.623

这是一个例子：

HTML 代码：

```
<img id="myImg" src="http://static.jquery.com/files/rocker/images/logo_jquery_215x53.gif"/> 
```

JavaScript 代码：

```
$(document).ready(function() {
    $( "#myImg" ).mouseover(function(){
        $(this).attr("src", "http://www.jqueryui.com/images/logo.gif");
    });

    $( "#myImg" ).mouseout(function(){
        $(this).attr("src", "http://static.jquery.com/files/rocker/images/logo_jquery_215x53.gif");
    });
}); 
```

编辑：对不起，你的代码有点奇怪。现在我明白你在做什么了。;) 当然，悬停方法更好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-22T19:51:02.843

jQuery 有[`.mouseover()`](http://api.jquery.com/mouseover/)和[`.html()`](http://api.jquery.com/html/). 您可以将鼠标悬停事件绑定到一个函数：

1.  隐藏当前图像。
2.  将当前 html 图像替换为您要切换的图像。
3.  显示您隐藏的 div。

当您获得指示光标不再悬在 div 上方的 mouseover 事件时，可以执行相同的操作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-22T20:16:07.437

你可以只使用 CSS 来做到这一点。

您需要在 中放置另一个标签，`<a>`然后您可以更改.`background-image``a:hover`

IE

HTML：

```
<a href="#" id="name">
  <span>&nbsp;</span> 
</a> 
```

CSS：

```
a#name span{
  background-image:url(image/path);
}

a#name:hover span{
  background-image:url(another/image/path);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-27T01:56:55.337

```
<a href="" onMouseOver="document.MyImage.src='http://icons.iconarchive.com/icons/uiconstock/round-edge-social/72/ask-icon.png';" onMouseOut="document.MyImage.src='http://icons.iconarchive.com/icons/uiconstock/round-edge-social/72/arto-icon.png';">
<img src="http://icons.iconarchive.com/icons/uiconstock/round-edge-social/72/arto-icon.png" name="MyImage"> 
```

演示 [http://jsfiddle.net/W6zs5/](http://jsfiddle.net/W6zs5/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-26T23:21:53.780

我知道有人以同样的方式回答了这个问题，但我做了自己的研究，我之前写过这篇文章是为了看到那个答案。所以：我一直在寻找简单的内联 JavaScript 的东西，只是在 上`img`，而不是“包装”到`a`标签中（所以`document.MyImage`我使用了 ，而不是`this.src`）

```
<img 
onMouseOver="this.src='ico/view.hover.png';" 
onMouseOut="this.src='ico/view.png';" 
src="ico/view.png" alt="hover effect" /> 
```

它适用于所有当前更新的浏览器；IE 11（我也在 IE5 及以上版本的 IE 开发者工具中对其进行了测试）、Chrome、Firefox、Opera、Edge。

# android - 如何通过单击 EditText 中的按钮逐个添加数字？

> ID：10709019
> 
> 赞同：0
> 
> 时间：2012-05-22T19:44:14.030
> 
> 标签：android, android-widget, android-edittext, android-button

我正在制作我的第一个 android 应用程序，它是一个简单的计算器。

当我按下按钮“1”时，它在 EditText 中显示“1”，但当我再次按下它时，它不显示“11”，它只显示“1”。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:49:14.947

由于您没有提供任何代码，我只能在黑暗中刺伤并猜测您正在调用`setText()`您的代码`EditText`，这将覆盖其中的所有内容。你需要得到的是这样的：

```
myEdit.setText(myEdit.getText + "1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:52:48.447

在按钮 click.use`append`方法上尝试此代码以在editview中添加文本编号：

```
EditText editText = (EditText) findViewById(R.id.editText1);
editText.append("1"); 
```

你可以使用：

```
editText.setText(editText.GetText() + title); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:51:32.967

您可能正在`EditText`完全替换的内容，而您想要做的是附加到它......就像，

```
oneButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    editText.setText(editText.getText().toString() + "1");
  }
} 
```

# python - 如何更“Python”地写这个

> ID：10709028
> 
> 赞同：2
> 
> 时间：2012-05-22T19:44:44.587
> 
> 标签：python, tkinter

所以我正在尝试编写一组复选框（我实际上应该将它写成一个类，因为我们很可能会添加其他复选框）

到目前为止，我已经得到了这个，但这会重复代码，因此效率不高。我可以通过哪些方式使代码更优雅？

```
var1 = IntVar()
var2 = IntVar()
var3 = IntVar()

c1 = Checkbutton(text="Snagit", variable=var1)
c1.pack()

c2 = Checkbutton(text="Camtasia", variable=var2)
c2.pack()

c3 = Checkbutton(text="GotoMeeting", variable=var3)
c3.pack()

app.mainloop()

check1 = var1.get()
check2 = var2.get()
check3 = var3.get() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:54:55.083

这是一个快速示例，说明如何使用循环使其变得更好：

```
check_names = ["Snagit", "Camtasia", "GotoMeeting"]
variables = []
for name in check_names:
    variables.append(IntVar())
    Checkbutton(text=name, variable=variables[-1]).pack()

app.mainloop()
checks = [variable.get() for variable in variables] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:58:38.963

我提出了这个解决方案，虽然`itertools`模块的使用可能看起来有点令人生畏，但我发誓学习它是为了你自己好！:)

```
labels = ("snagit", "camtasia", "gotomeeting")
vars = [IntVar() for _ in labels]
for name, v in itertools.izip(labels, vars):
    Checkbutton(text=name, variable=v).pack()
app.mainloop()
checks = [v.get() for v in vars] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T20:01:58.633

```
vars = {}
buttons = {}

for text in ('Snagit', 'Camtasia', 'GotoMeeting'):
    vars[text] = IntVar()
    buttons[text] = Checkbutton(text=text, variable=vars[text])
    buttons[text].pack()

app.mainloop()

checks = [var.get() for var in vars.values()] 
```

通过使用`dict`s 和`tuple`s，您可以消除重复。这不像某些仅使用生成器的解决方案那样性感，但这里没有理由这样做，我认为这更具可读性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T20:02:15.703

累积变量并内联创建按钮：

```
variables = []
for text in ['Snagit', 'Camtasia', 'Gotomeeting']:
    variable = IntVar()
    Checkbutton(text=text, variable=variable).pack()
    variables.append(variable)

app.mainloop()

checks = [variable.get() for variable in variables] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:59:18.653

```
vars = [IntVar() for i in xrange(3)]
buttons = [Checkbutton(text="Snagit", variable=vars[0]),Checkbutton(text="Camtasia", variable=vars[1]),Checkbutton(text="GotoMeeting", variable=vars[2])]
for c in buttons:
  c.pack()

app.mainloop()
check1,check2,check3  = [v.get() for v in vars] 
```

我不知道这是否是 Pythonic，但我认为它更干净一些。

# php - 在 php 页面上打印在后台运行的内容（终端） php_exec

> ID：10709031
> 
> 赞同：0
> 
> 时间：2012-05-22T19:44:52.927
> 
> 标签：php, shell, terminal, exec, echo

我使用 exec 功能运行类似 ffmpeg 的软件。我想要的是在命令运行的同时查看终端上发生了什么，我不知道我是否可以使用 echo 来完成。所以，我需要你的帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:56:20.917

如果你想在命令完成*之前*显示它的输出，你应该使用 popen() 和 flush() 的组合。php.net 文档中有一个很好的示例，请参阅[http://www.php.net/manual/en/function.popen.php#56604](http://www.php.net/manual/en/function.popen.php#56604)

# javascript - 在 Play 模板中混合使用 JavaScript 和 Scala

> ID：10709034
> 
> 赞同：6
> 
> 时间：2012-05-22T19:44:56.133
> 
> 标签：javascript, scala, playframework

我不确定这是怎么做到的。我可以对我尝试使用的路线进行硬编码，但我想以正确的方式做到这一点。

我有一个下拉菜单，需要在更改时加载新页面。这基本上是我正在尝试的方式（我已经尝试了一些变体）：

```
@getRoute(value: String) = @{
    routes.Accounts.transactions(Long.valueOf(value))
}

    <script type="text/javascript">
      $(function() {

        $("select[name='product']").change(function() {

          location.href = @getRoute($(this).val());
        }).focus();

        $('a.view.summary').attr('href', "@routes.Accounts.index()" + "?selectedAccountKey=" + $('select[name=product]').val());
      });
    </script> 
```

这会产生`identifier expected but 'val' found`异常。我也尝试用引号括起来，但这会导致`[NumberFormatException: For input string: "$(this).val()"]`

那么我到底如何将 JavaScript 中的值插入到 Scala 函数中呢？

**编辑**

这是我的解决方案，灵感来自公认的答案。此下拉列表在为不同组件重复使用的标记中定义，并且每个组件的基本 URL 都不同。实现这一点的方法是将基于帐户密钥生成 URL 的函数传递到下拉列表中：

```
@(accountList: List[models.MemberAccount],
  selectedAccountKey: Long,
  urlGenerator: (Long) => Html
)

<select name="product">
  @for(account <- accountList) {
    @if(account.accountKey == selectedAccountKey) {
      <option selected="selected" value="@urlGenerator(account.accountKey)">@account.description (@account.startDate)</option>
    } else {
      <option value="@urlGenerator(account.accountKey)">@account.description (@account.startDate)</option>
    }
  }
</select>

<script type="text/javascript">
$(function() {
    $('select[name=product]').change(function() {
        location.href = $(this).val();
    });
});
</script> 
```

然后你可以定义一个这样的函数来传递：

```
@transactionsUrl(memberAccountKey: Long) = {
  @routes.Accounts.transactions(memberAccountKey)
}

@accountsDropdown(transactionDetails.getMemberAccounts(), transactionDetails.getMemberAccountKey(), transactionsUrl) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T17:21:15.463

您需要一种在页面中存储所有 URL 的方法，例如

```
<option value="@routes.Accounts.transactions(id)">Display</option> 
```

然后onChange，你可以：

```
$("select[name='product']").change(function() {
  location.href = $(this).val();
}); 
```

# php - jquery ajax 加载延迟 - php div 旋转

> ID：10709036
> 
> 赞同：1
> 
> 时间：2012-05-22T19:44:59.257
> 
> 标签：php, jquery, ajax, html, delay

希望有人可以提供帮助。我是javascript新手，所以请原谅任何错误。我正在努力实现以下目标：

我有一个带有 html 表的索引页，分为四个部分。每个季度都有一个 DIV ID，通过 jquery 的 ajax 加载将在一定延迟后成功地用 PHP 页面重新加载各个 DIV。

我想要做的是，对于其中一个季度，每 15 分钟在 DIV 中旋转三个 PHP 页面，并保持循环。我已经设置了一个包含三个 php 站点的数组，并成功地将它与一个计数器变量一起使用，以通过 jquery 调用数组中的相关条目。如果我在 ajax 代码中输入计数，它就可以工作。我现在正在努力查看如何增加计数器，并在它到达第三页后将其重置。

我不知道是否可以使用 ajax.complete 函数来协助，因为我不知道是否可以将“标准”javascript 放入此函数中。

感谢您的帮助 - 我的代码如下：

```
var count = 0;
var page = new Array("page1.php","page2.php","page3.php");
var delay = ("9000");

    (
function($)
{
$(document).ready(function()  
{        
$.ajaxSetup(        
    {            
        cache: false

    });  
    var $container = $("#DivID"); 
    $container.load(page[count]);    
    var refreshId = setInterval(function()  
    {           
        $container.load(page[count]); 
    }, delay); 

});

})

(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:04:21.770

不要使用设置间隔。

如果页面加载缓慢，它将滞后和链接，使您的网站崩溃

使用设置超时：

```
setTimeout(function_name, delay);

var function_name = function() {
    $container.load(page[count], function(){
        count = (count+1) % 3;
        setTimeout(function_name, delay);
    });

} 
```

这样，超时不会被链接，它会在页面加载完成后触发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:04:42.977

尝试这个

```
var refreshId = setInterval(function()  
{           
    $container.load(page[count]);
    count = (count+1) % 3 
}, delay); 
```

这样当计数达到 3 时，它将被重置为 0。百分号是模块划分

# php - 使用 header:location 时变量不生效

> ID：10709039
> 
> 赞同：1
> 
> 时间：2012-05-22T19:45:04.273
> 
> 标签：php, html, css

我有这个 php 部分，如果在当前状态下为真，则用户将被发送回 mail.php 并且两者都`$mailErrorMsg`可以`$mailErrorDisplay`正常工作。

php原版

```
if ($sql_recipient_num == 0){

    $mailErrorMsg = '<u>ERROR:</u><br />The Recipient does not exist.<br />';
 $mailErrorDisplay = ''; 

} 
```

以及改变的css部分

```
#mail_errors {
height: 30px;
width: 767px;
text-align: center;
color: #666666;
font-family: Verdana, Geneva, sans-serif;
font-size: 9px;
clear: both;
font-weight: bold;
<?php print "$mailErrorDisplay";?>  
background-color: #FFF; 
border: thin solid <?php print "$mail_color";?>; 
```

}

但是，如果我添加此行`header('Location: mail.php?tid=3');`以确保用户正在查看错误所在的选项卡，则上面列出的变量都不会发生，因此错误不会显示。还有其他形式的 header:location 我可以使用吗？

```
if ($sql_recipient_num == 0){
     header('Location: mail.php?tid=3');
    $mailErrorMsg = '<u>ERROR:</u><br />The Recipient does not exist.<br />';
 $mailErrorDisplay = ''; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:48:36.060

使用标头不会传递任何这些变量。你应该做的是使用会话。

```
session_start(); // put this on the top of each page you want to use
if($sql_recipient_num == 0){
    $_SESSION['mailErrorMsg'] = "your message";
    $_SESSION['mailErrorDisplay'] = "whatever";
    // header
} 
```

然后在您要打印这些错误消息的页面上。

```
session_start();
print $_SESSION['mailErrorMsg'];
// then you want to get rid of the message
unset($_SESSION['mailErrorMsg']; // or use session_destroy(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:47:29.353

**您认为 header() 命令的行为类似于 require_once()**，其中新脚本被“注入”到当前脚本中。**它实际上是向浏览器发送一个 http 标头**，上面写着“Location: mail.php?tid=3”。然后浏览器通过重定向到 mail.php 页面来遵守，有点像点击一个链接。

您拥有的任何内容仍将在后台运行，但人员浏览器现在已转到新页面。**如果您想传递 $mailErrorMsg 和/或 $mailErrorDisplay，您需要将它们存储在会话变量或 cookie**中，并将这些声明放在您的标头重定向上方，如下所示：

```
if ($sql_recipient_num == 0){
     $mailErrorMsg = '<u>ERROR:</u><br />The Recipient does not exist.<br />';
     $mailErrorDisplay = ''; 
     header('Location: mail.php?tid=3');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:52:46.377

```
header('location: mail.php'); 
```

将浏览器重定向到该页面。然后所有变量都为空。我会使用会话变量来存储信息。

```
session_start(); //must be before any output
if ($sql_recipient_num == 0){
    header('Location: mail.php?tid=3');
    $_SESSION['mailErrorMsg'] = '<u>ERROR:</u><br />The Recipient does not exist.<br />';
    $_SESSION['mailErrorDisplay'] = ''; 
} 
```

然后当你想显示：

```
session_start(); //must be before any output
echo $_SESSION['mailErrorMsg']; unset($_SESSION['mailErrorMsg']); 
```

那应该可以为您提供所需的东西。

# javascript - 需要在具有长 url 的 ASPX 页面中显示图像

> ID：10709044
> 
> 赞同：0
> 
> 时间：2012-05-22T19:45:23.887
> 
> 标签：javascript, asp.net, post, url-rewriting, imageurl

场景：在 ASP.NET 站点中，我有一个 ASPX 页面，在 OnLoad 事件中，我为其中一个图像控件设置了 imageUrl。此 URL 值来自外部来源，图像未显示，我发现这是因为 URL 太长。

如何显示较长 URL 的图像？我应该使用 POST 和 javascript 还是任何其他选项来实现？URL 中的值至关重要，我不能丢失某些参数。

请建议。

OnLoad 事件中的代码如下所示。

```
 Image pImage = new Image();

        pImage.ImageUrl = imageFile; // imageFile is the one having long URL. 
```

更新 1：如果我能够在 OnLoad 中实现 POST，那么我认为会显示图像。请建议如何在 OnLoad 中实现这一点。

更新 2：实际网址如下。

[http://example.com/is/m//company1/Rec-Sc-105-QL2?setAttr.safe=](http://example.com/is/m//company1/Rec-Sc-105-QL2?setAttr.safe=){visible=false}&setAttr.insertedTextPlaceholder={visible=false}&setElement.height_weight=%253Ccontent%253E%253Cdiv%2520columnCount%253D%25221%2522%2520columnGap%253D%252218%2522%2520fontFamily%253D%2520MS%252Sans%252 %2522%2520textAlign%253D%2522left%2522%2520s7%253AcolorName%253D%2522100%2525%2520Black%2522%2520s7%253Acolorspace%253D%2522defined%2522%2520s7%253AcolorValue%253D%253AcolorValue%253D%25%22%253D%25%22% %253E%253Cspan%253EHeight%2520%2526amp%253B%2520Weight%253C/span%253E%253C/p%253E%253C/div%253E%253C/content%253E&setAttr.height_weight=%7Bheight=17.8254666666%6667% 2526rotation=0%7D&setAttr.photo={y=91.5186%26x=210.501%26width=40.883668%26height=61.4792%26visible=false%26rotation=0%26scaleX=1.0%26scaleY=1.0%26source%3D@Embed%28%27is %28company1/19168388%29%27%29}&setAttr.bleed={visible=false}&setAttr.insertImagesPlaceholder={visible=false}&setElement.name=%253Ccontent%253E%253Cdiv%2520columnCount%253D%25221%2522%2520columnGap%253D%252218%2522%2520fontFamily%253D%2522Comic%2520Sans%2520MS2%252%2520%2520MS2%252%text 2522left％2522％2520s7％253AcolorName％253D％2522100％2525％2520Black％2522％2520s7％253Acolorspace％253D％2522defined％2522％2520s7％253AcolorValue％253D％2522％2523FF％2522％253E％253Cp％253E％253Cspan％253EName％ 253C/span%253E%253C/p%253E%253C/div%253E%253C/content%253E&setAttr.name=%7Bheight=17.825466666666667%2526visible=true%2526rotation=0%7D&setElement。日期=％253concontent％253E％253CDIV％2520ColumnCount％253D％25221％2522％2522％2520ColumnGap％253D％252222222222222222520FONTFONTFAMILY％％％％％253d％252222222222222222222220MS％25222222222222222222222222520TEMERNNNENT 2522％2520TETEXTALINGERNN %2522100%2525%2520Black%2522%2520s7%253Acolorspace%253D%2522defined%2522%2520s7%253AcolorValue%253D%2522%2523FF%2522%253E%253Cp%253E%253Cspan%253EDate%2533C/p%253C/p%2 %253E%253C/div%253E%253C/content%253E&setAttr.date=%7Bheight=17.82646666666667%2526visible=true%2526rotation=0%7D&setElement.announcement=%253Ccontent%253E%253Cdiv%2520columnCount%253D%20221%253D%25221%252%2公告=%253Ccontent%253E%253Cdiv%2520columnCount%253D%25221%2522%2520公告=%253Ccontent%253E%253Cdiv%2520columnCount%253D%25221%2522%2520

**更新 3：当我尝试在单独的窗口中浏览 URL 时，我现在收到 HTTP 403 禁止错误。有什么建议么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:08:57.043

我们通过使用 web 服务并获取 url 详细信息解决了这个问题。

# c++ - Visual C++ 的最佳替代品？VS11 Express 不能用来写桌面应用

> ID：10709048
> 
> 赞同：2
> 
> 时间：2012-05-22T19:45:37.463
> 
> 标签：c++, visual-c++

你们中的一些人可能已经知道微软正试图扼杀桌面开发以支持 Metro 风格的应用程序。新的 Visual Studio 11 的速成版将仅支持编写 Metro 风格的应用程序。他们也不会将新编译器作为新 Windows SDK 的一部分提供给您。获得编译器的唯一方法是购买 Visual Studio Professional 或更高版本。

现在是时候寻找替代方案了（Windows 平台的替代编译器）。有什么建议么？

与此问题相关的一些链接：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2645679-visual-studio-11-express-on-windows-7-and-the-abil](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2645679-visual-studio-11-express-on-windows-7-and-the-abil)

[http://blogs.msdn.com/b/visualstudio/archive/2012/05/18/a-look-ahead-at-the-visual-studio-11-product-lineup-and-platform-support.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/05/18/a-look-ahead-at-the-visual-studio-11-product-lineup-and-platform-support.aspx)

[http://www.microsoft.com/visualstudio/11/en-us/products/express](http://www.microsoft.com/visualstudio/11/en-us/products/express)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:48:28.900

当然是 Gcc/G++。在我看来，它优于 VC++。另外，你可以使用 Eclipse CDT 作为 IDE，它现在非常好用（与旧版本相比）。我在 Windows 上就是这样工作的。此外，您还可以在 Linux 或 MacOS 上工作，而无需切换到其他工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:51:37.400

1) Metro 和 WinRT 功能可从 C++/CX 访问，而 C++/CX 又建立在 COM 之上，因此根据此详细讨论（[关于 WinRT 和 C 的 SO 问题](https://stackoverflow.com/questions/7436144/using-winrt-from-c)），您可以使用最新的“Microsoft-only”功能与任何体面的C编译器。当然，这将需要一些代码生成或大量输入才能访问基本设施。我相信会有一个过渡期，然后开源社区会提出一些自动化解决方案来使用 WinRT API。

2）现在可用选项的快速列表。

开发工具：MinGW 或 Cygwin（GCC 工具链 + 类 unix 工具），可能是 Clang，OpenWatcom 作为过去的东西

GUI 库：FLTK、Qt、wxWidgets、Fox GUI 工具包、librocket（如果您喜欢 OpenGL 世界）

IDE：Code::Blocks、Eclipse+CDT、QtCreator

3）还有一种非C++方式：

1.  FreePascal+Lazarus 允许类似 Delphi 的 RAD
2.  单声道/夏普开发

这两个选项*都可以*使用带有一些绑定的 C++ 代码。

4。结论

这些是提供相似结果但并不总是具有相似舒适度的替代方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T20:09:34.957

另一种可能性是[Qt Creator](http://qt.nokia.com/downloads)，它带有一个针对 Windows（以及 MacOS、Linux 和 Symbian）的完整工具集。它肯定与 VS 有所不同，因此需要一些时间来适应，但总的来说我认为它相当不错。Qt（库）产生了一些复杂的感觉——有些人不喜欢它的古怪之处（例如，MOC），但也有不少人认为它是设计最好的可用 GUI 工具包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T16:39:43.320

不要忘记也可用于windoze的[Netbeans GUI 。](https://netbeans.org/features/cpp/index.html)它工作得很好，只需安装 mingw 并选择这个 mingw/bin 目录作为编译工具和 mysys/bin/make.exe 作为 make 程序

去下载

[https://netbeans.org/downloads/index.html](https://netbeans.org/downloads/index.html)

他们有这个用于 vc++ 的插件

[http://plugins.netbeans.org/plugin/42519/vcc4n-visual-c-compiler-for-netbeans](http://plugins.netbeans.org/plugin/42519/vcc4n-visual-c-compiler-for-netbeans)

一些安装信息 [https://netbeans.org/community/magazine/html/03/c++/](https://netbeans.org/community/magazine/html/03/c++/)

另一个我没用过但看起来不错的 IDE 是

[http://www.codeblocks.org/](http://www.codeblocks.org/)

# vb.net - 默认情况下如何将参数传递给VB函数

> ID：10709053
> 
> 赞同：5
> 
> 时间：2012-05-22T19:45:47.067
> 
> 标签：vb.net

假设我有以下功能：

```
Function myFunction(j As Integer) As Double
    myFunction = 3.87 * j
    Exit Function
End Function 
```

是`j`作为值传递`ByVal`还是通过引用传递`ByRef`？

还是取决于数据类型？如果我有一个复杂的对象作为值传递怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T19:49:03.340

`ByVal`除非明确指定，否则传递参数。有关详细信息，请参阅[按值和按引用传递参数](http://msdn.microsoft.com/en-us/library/ddck1z30%28v=vs.100%29)，其中指出：

> Visual Basic 中的默认设置是按值传递参数。您可以使用 ByVal 关键字使您的代码更易于阅读。在每个声明的参数中包含 ByVal 或 ByRef 关键字是一种很好的编程习惯。

至于：

> 如果我有一个复杂的对象作为值传递怎么办？

这很好，只要“复杂对象”是一个类（引用类型），您就不会进行大量复制。这是因为对*对象实例的引用*是按值 (ByVal) 传递的，这意味着您只复制一个引用，即使该类非常大。

但是，如果复杂对象是一个结构（值类型），您将导致在调用方法时复制该对象。顺便说一句，这就是为什么像 XNA 这样的一些框架提供了许多方法的替代版本（比如[Matrix.Multiply](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix.multiply.aspx)），这些方法可以选择通过`ByRef`- 这避免了昂贵的 Matrix 结构副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:52:07.990

`j`在这种情况下是通过的`ByVal`。`ByVal`除非`ByRef`明确说明，否则始终传递参数。从[VB.NET 10 规范](http://www.microsoft.com/en-us/download/details.aspx?id=15039)的第 9.2.5 节：

> 未指定 ByRef 或 ByVal 的参数默认为 ByVal。

# postgresql - 如何根据表大小和可用空间删除旧行？

> ID：10709057
> 
> 赞同：0
> 
> 时间：2012-05-22T19:46:17.030
> 
> 标签：postgresql

我有连续插入到我的表中，并希望自动删除最旧的行以保持恒定的表大小（即硬盘驱动器上表的大小）。我能够在mysql中使用：

```
SELECT DATA_LENGTH,DATA_FREE FROM information_schema.tables WHERE table_name = 'table'; 
```

使用这些值和驱动器上的可用空间，我可以发出删除语句，并且表大小不会增长。

我怎样才能在 postgresql 中做到这一点？我只能找到桌子大小：

```
SELECT pg_total_relation_size('table_name'); 
```

有没有办法找到表格中的可用空间，或者有更好的解决方案来保持表格的大小不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:03:17.013

这可能是表格大小的开始

```
SELECT relname, relpages * 8192 "Size_In_Bytes" 
FROM pg_class c
JOIN information_schema.tables t 
    ON c.relname = t.table_name 
WHERE table_schema = 'public' 
ORDER BY  relpages * 8192 DESC 
```

我对将数据库保持在一定大小的要求有些好奇。您是否将数据存档在其他地方？如果没有，为什么要保留它？为什么不将其设为基于时间的保留策略而不是基于大小的保留策略？

# c# - 将类与自身定义为通用实现。为什么/如何工作？

> ID：10709061
> 
> 赞同：6
> 
> 时间：2012-05-22T19:46:38.597
> 
> 标签：c#, .net, prism

我通常一直在创建 EventAggregator 使用的 Prism 事件，例如：

`public class SomeEvent : CompositePresentationEvent<SomeEventArgs> { }`

```
public class SomeEventArgs
{
     public string Name { get; set; }
} 
```

但是在查看同事代码时，我注意到他们做到了：

```
public class SomeEvent : CompositePresentationEvent<SomeEvent>
{
     public string Name { get; set; }
} 
```

我想我的第一个问题是为什么这甚至可以编译？在我看来，它正在实现一个尚未定义的类。其次，它是否会对应用程序产生负面影响，是可以忽略不计，还是更好？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T19:50:07.513

> 我想我的第一个问题是为什么这甚至可以编译？

您认为它违反了规范中的哪条规则？

> 在我看来，它正在实现一个尚未定义的类。

我认为您必须指定每个术语的*确切*含义，才能判断该语句是否准确。编译器知道`CompositePresentationEvent`它是在其他地方声明的（大概），它知道是`SomeEvent`因为那是*被声明*的类。这就像`Foo`在一个类中有一个类型的字段`Foo`- 完全有效。

能够做到这一点也非常*有用——尤其是用于比较。*例如：

```
public sealed class Foo : IComparable<Foo> 
```

表示类的任何实例都`Foo`知道如何将自己与另一个实例进行比较，因此它可以用于以类型安全的方式进行排序。在结构的情况下，这还允许您减少装箱，因为当已知是适当实现的类型时，调用`x.CompareTo(y)`将不需要任何装箱。`x``IComparable<>`

请注意，类型可以变得*更加*有趣和令人困惑的递归。[从我的 Protocol Buffers 端口中](http://protobuf-csharp-port.googlecode.com)获取这个（稍作修改）示例：

```
public interface IMessage<TMessage, TBuilder>
    where TMessage : IMessage<TMessage, TBuilder>
    where TBuilder : IBuilder<TMessage, TBuilder>

public interface IBuilder<TMessage, TBuilder>
    where TMessage : IMessage<TMessage, TBuilder>
    where TBuilder : IBuilder<TMessage, TBuilder> 
```

在这里，目标是基本上以两种类型结束 - “消息”和“构建器”，以便您始终可以从另一个构建每个类型。例如：

```
public class Foo : IMessage<Foo, FooBuilder>
{
    ...
}

public class FooBuilder : IBuilder<Foo, FooBuilder>
{
    ...
} 
```

# javascript - JS：模板构建后如何监听事件？

> ID：10709066
> 
> 赞同：0
> 
> 时间：2012-05-22T19:46:59.757
> 
> 标签：javascript, jquery

我正在用 jQuery.on() 监听一个事件，但它不起作用，我想是因为 DOM 元素。

那么，我该如何收听“点击”事件呢？

[http://jsfiddle.net/QbXLf/](http://jsfiddle.net/QbXLf/)

```
$(".myClass").on("click", function(event){
    alert("Not Working :(");
}); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:49:30.920

使用事件委托：

```
$('#gallery').on("click", ".myClass", function(event){ 
```

[http://jsfiddle.net/mblase75/QbXLf/7/](http://jsfiddle.net/mblase75/QbXLf/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:53:28.750

一种可能的解决方案...在向 DOM 添加元素后连接事件

[http://jsfiddle.net/jtZ8j/](http://jsfiddle.net/jtZ8j/)

# sql - SQL 脚本在每条记录上运行总计

> ID：10709070
> 
> 赞同：0
> 
> 时间：2012-05-22T19:47:18.123
> 
> 标签：sql, sybase

我正在编写一个具有以下要求的 sql 脚本：- 1) 它应该能够从 Asset_Transaction 表中获取每条记录，并为每条资产计算每条记录上的“运行总计”的单位数。通过汇总 Transaction_datetime 小于或等于所显示 Asset_id 的 Transaction_datetime 的所有 Asset_Transactions 的 Units 来计算此运行总计列。我已经做到了，我认为它工作正常。

但是我的第二个要求是：-

2) 计算该日期的单位价值，即从 Unit_Price 表中获取每个资产交易日期和该特定资产的销售单位价格，并将其乘以添加的单位数量（“运行总计”）。我在第 2 步上苦苦挣扎

:----------------------------------------

## 请看我到目前为止写的代码。非常感谢

```
 set nocount on

   go

     declare mla_exceptions scroll cursor for
                 select distinct mla.asset_id  
from    asset_transaction mla
go

Print 'asset_id, Amount, Transaction Name, Total Units, Transaction Datetime'

declare @ml_asset double precision

open mla_exceptions

fetch first mla_exceptions

              into @ml_asset  

              while (@@sqlstatus = 0)

              begin  
              select    mla.asset_id , ',',
               -- mla.transaction_datetime, ',',
              mla.amount, ',',
              tt.name, ',',
             (select sum (units) from asset_transaction where transaction_datetime <= mla.transaction_datetime  and asset_id = @ml_asset  and status = 'A' ) 'Running Total Units', ',',
              transaction_datetime

from    asset_transaction mla noholdlock

Left outer join transaction_type tt on tt.transaction_type_id = mla.transaction_type_id
  where   mla.asset_id = @ml_asset

  order by mla.asset_id

  fetch next mla_exceptions
 into @ml_asset 
end

close mla_exceptions

deallocate cursor mla_exceptions

go 
```

========================= 非常感谢。

# javascript - 如何在 Internet Explorer 的新标签页中打开网页？

> ID：10709073
> 
> 赞同：0
> 
> 时间：2012-05-22T19:47:23.327
> 
> 标签：javascript, html, css, internet-explorer

在我的 html 代码中有几个这样的链接：

```
<a href="www.exampe.com" target="_blank">example</a> 
```

有没有办法在新选项卡中打开这些链接（而不是在新窗口中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:08:06.563

您无法控制用户在其浏览器中设置的首选项。您可以考虑添加一些文本，例如

> “按住 Ctrl 键并单击以下链接”

如果用户遵循您的建议，该页面将在新选项卡中打开。这些都不是最佳的。

有关更多信息，请参阅[HTML：如何强制在新选项卡](https://stackoverflow.com/q/3970746/139917)中打开链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:44:34.727

`target="_blank"`属性应该在新选项卡中打开该页面。页面是否在新选项卡或窗口中打开可能取决于您的浏览器设置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T19:56:38.867

没有浏览器插件，没有办法做到这一点。

这是有原因的。您不想将用户带到他们不想去的地方。

他们可能不想在 Internet Explorer 中。

您应该做的是建议您的网站可能只与 IE 兼容。这样，如果某些东西不起作用，用户只能责怪自己。不理想，但这是普遍接受的做法。

# c# - CE 6.0 / .NET CF 3.5 应用程序遇到严重错误 (MC3100)

> ID：10709076
> 
> 赞同：7
> 
> 时间：2012-05-22T19:47:38.510
> 
> 标签：c#, .net, compact-framework, windows-ce

在 Motorola MC3100（仅限 CE 6.0 版本）上退出我的 .NET CF 3.5 应用程序时，我收到错误消息“应用程序 xxx 遇到严重错误，需要关闭”。然后我需要热启动设备以使应用程序再次工作。

此代码在应用程序关闭之前工作正常，并且仅在应用程序中的控件上设置字体时才会失败。一切在 .NET CF 2.0 和所有其他摩托罗拉、Intermec、Psion、HHC 设备上也能正常工作，我用 .NET CF 3.5 尝试过。

这是我当前的测试代码：

```
[MTAThread]
static void Main()
{
  Control oCtrl = new Control();
  oCtrl.Font = new System.Drawing.Font("Tahoma", 10F, System.Drawing.FontStyle.Bold);

  // Setting the controls font to null works
  // oCtrl.Font = null;  Works

  // Setting the Control to null does not work, still get error
  // oCtrl = null;       Doesn't work

  // Setting a font, not on a control, also works fine.
  // System.Drawing.Font font = new System.Drawing.Font("Tahoma", 10F, System.Drawing.FontStyle.Bold);
} 
```

我看到了一些似乎相关的链接：

*   [使用 Button2 时应用程序在退出时崩溃](http://community.opennetcf.com/forums/t/12735.aspx)
*   [CF 3.5 和 Windows CE 6 的问题](http://social.msdn.microsoft.com/Forums/en-US/winembmngdapp/thread/6c710182-40e0-4c5e-bc92-ae6734772e7c/)
*   [关闭时出错](http://social.msdn.microsoft.com/Forums/en-US/vssmartdevicesvbcs/thread/d47318d0-3533-4b23-b088-dd7dc4f761c1)

但到目前为止，我发现的唯一建议是消除应用程序中的字体。在这种情况下，设置字体的地方太多了，包括链接的程序集，这是不可能的。

有没有其他人见过这样的事情。这似乎与控件未正确处理这些版本上的字体有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T21:08:58.690

我遇到了完全相同的问题。尝试了以下（没有解决问题）：

*   删除所有`new Font()`语句
*   使用`Form.Close()`代替`Application.Exit()`
*   将整个应用程序移至 .NET CF 3.5
*   尝试删除 SQLite 依赖项

最终适用于我们的案例的唯一解决方案（但它不是一个“漂亮”的解决方案）是`MainForm.Closed()`

```
Process.GetCurrentProcess().Kill() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-30T14:53:53.200

我在 MC3190 上遇到过这个确切的问题。我发现的解决方案是跟踪应用程序中打开的所有表单，方法是将每个实例添加到全局列表中，并在应用程序退出时循环遍历列表并在列表中的每个项目上调用 Form.Dispose。几个月来一直让我感到压力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:39:53.643

我遇到了同样的问题：摩托罗拉 MC3100，带有 wince6，仅在独立运行时在应用程序退出时崩溃，在附加 VS 调试器运行时没有崩溃。崩溃时，操作系统是 HS，唯一的解决方案是冷启动设备。

我设法用以下解决方案来处理它。

我的应用程序在模态子表单中使用 Application.exit() ，它似乎不能很好地处理字体使用的一些非托管资源。

在我的情况下，确切的原因是在我的主要形式中使用 new Font(...) 。在模态子表单中使用它不会导致任何问题。

在主窗体中恢复 application.exit() 也不起作用，也没有显式地处理字体资源（我做了很多面向这种方式的尝试）。

最后，我发现唯一可行的解​​决方案是通过关闭主窗体而不是使用 application.exit() 来退出应用程序，并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:44:32.340

Application.Exit() 不推荐关闭应用程序的方法。关闭所有打开的表格以关闭应用程序。

[http://blogs.msdn.com/b/tom_krueger/archive/2005/02/24/379678.aspx](http://blogs.msdn.com/b/tom_krueger/archive/2005/02/24/379678.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-06T18:57:50.353

我们在运行 Windows CE 6.0 / .NET 3.5 CF 的摩托罗拉 MC3190 设备上遇到了这个问题。几个月来，我们在关闭应用程序时遇到了间歇性的致命错误对话框。从 ThreadAbort 异常中探索了每个可能的选项，以确保正确处理每个资源。

通常，如果设备没有特定字体或尝试访问碰巧无法识别的字体，它将默认为 Arial。但是，对于 MC3190，如果无法识别字体，设备将显示致命错误对话框并在退出应用程序后冻结。这导致用户必须热启动（有时是冷启动）。

针对这个问题，我们提出了**两种解决方案**：

1.  将应用程序范围的字体设置为受支持的字体（将 Tahoma 替换为 Arial）
2.  通过使用支持的字体实例化或设置为 null 来重置任何全局 Font 对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-29T14:10:56.600

您应该创建一个表单并在 Application.Run() 上下文中运行您的代码。在 Run 结束时，许多资源被“魔法”处置。否则，您必须处置所有需要处置的资源。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-04T09:33:55.843

我们遇到了同样的问题，用 MainForm.Closed() 中的这行代码解决了

```
Process.GetCurrentProcess().Kill() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-26T15:21:31.337

我在使用 .NET Compact Framework 3.5 的摩托罗拉 9190-G 上遇到了同样的问题。有时我不得不热启动设备，因为它会在关闭我的应用程序后冻结。

我能够通过将`ListView`包含在其中的表单的字体指定`Constructor`为 Arial、10pt、Regular 来解决此问题。然后我以编程方式将字体设置为我想要的字体。例如，`myListView.Font = new System.Drawing.Font("Tahoma", 11F, System.Drawing.FontStyle.Bold);`。

如果我将字体设置为任何其他字体/字体样式/大小组合，我会在关闭移动设备上的应用程序时收到“程序遇到严重问题并且必须关闭”错误消息。

# python - 在 Python 中有哪些好的初学者项目可以做？

> ID：10709077
> 
> 赞同：-1
> 
> 时间：2012-05-22T19:47:41.513
> 
> 标签：python, project

我做了计算器和测验，我想知道我还应该做什么。大家觉得我应该怎么做才能开始呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:52:57.513

只是一些想法：

*   查看[http://projecteuler.net/](http://projecteuler.net/)
*   查找您可能有兴趣使用并为其代码库做出贡献的小型开源项目
*   想想你重复做的事情，并尝试将它们自动化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T19:55:42.967

做一些你会真正喜欢的东西。例如，很多人喜欢摆弄[Pygame](http://pygame.org "游戏")模块。与其寻找灵感来做某事，不如暂时停止思考，很快你就会有一些灵感。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T19:55:46.780

通过 Dive Into Python 工作：

*   [http://www.diveintopython.net/](http://www.diveintopython.net/)或
*   [http://getpython3.com/diveintopython3/](http://getpython3.com/diveintopython3/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-22T19:49:25.360

你需要的东西。

添加文本以使其长度超过 30 个字符。

# iis-6 - OpenRasta IIS6 间歇性 HTTP 404

> ID：10709079
> 
> 赞同：2
> 
> 时间：2012-05-22T19:47:56.070
> 
> 标签：iis-6, asp.net-4.0, openrasta

**背景**

我有一个使用 OpenRasta 构建的 API，它将 JSON 编码的数据提供给支持 HTML/AJAX 的界面。

**问题**

使用 IIS 6 托管时，我在查询资源时遇到间歇性 404 错误。应用程序池重启后一切正常；在几次成功请求后，404 错误开始并持续存在，直到应用程序池被回收。我已经确认在 IIS 6 中设置了 ISAPI 映射，我缺少什么？

**间歇性失败请求的跟踪输出**

```
Unregistering host of type OpenRasta.Hosting.AspNet.AspNetHost 
```

**成功比较请求的跟踪输出（命名空间和资源 URI 已编辑）**

```
Registering host of type OpenRasta.Hosting.AspNet.AspNetHost
Using dependency resolver of type OpenRasta.DI.InternalDependencyResolver.
Registering host's root dependencies..
Using dependency registrar of type OpenRasta.Configuration.DefaultDependencyRegistrar..
Ignoring constructor, following dependencies didn't have a registration:OpenRasta.TypeSystem.Surrogates.ISurrogateBuilder[].
Registering host's leaf dependencies..
Using configuration source <namespace>.api.Configuration.
Ignoring constructor, following dependencies didn't have a registration:System.Func`1[System.Collections.Generic.IEnumerable`1[OpenRasta.Configuration.MetaModel.Handlers.IMetaModelHandler]].
Ignoring constructor, following dependencies didn't have a registration:System.Diagnostics.TraceSource.
Ignoring constructor, following dependencies didn't have a registration:OpenRasta.OperationModel.MethodBased.IMethodFilter[].
Incoming host request for http://<resource URI>.
Adding communication context data.
Entering OpenRastaRewriterHandler: Rewriting to original path.
Entering OpenRastaIntegratedHandler: Request for http://<resource URI>.
Incoming host request for http://<resource URI>.
Adding communication context data.
Found 1 operation(s) with a matching name..
Found 0 operation(s) with matching [HttpOperation] attribute..
Operation <handler>::Get() selected with 0 required members and 0 optional members, without request codec.
Ignoring constructor, following dependencies didn't have a registration:OpenRasta.OperationModel.Interceptors.IOperationInterceptor[].
Executing OperationResult OperationResult: type=OK, statusCode=200..
Selected codec JsonDataContractCodec out of 1 codecs for entity of type List`1 and negotiated media type application/json; q=0.5..
Codec JsonDataContractCodec selected..
Entering ResponseEntityWriterContributor: Generating response entity..
Setting Content-Length to 133.
Exiting ResponseEntityWriterContributor.
Writing http headers..
Exiting OpenRastaIntegratedHandler.
Exiting OpenRastaRewriterHandler.
Request finished.. 
```

* * *

[从GitHub master](https://github.com/openrasta/openrasta-hosting-aspnet)构建的 OpenRasta.Hosting.AspNet.dll ： ![OpenRasta.Hosting.AspNet.dll 版本](../Images/93e1a86caac499ecbffc3a032b16ecb6.png)

# perl - 在 Perl 中使用带有 System 命令的 File::Temp 模块

> ID：10709081
> 
> 赞同：0
> 
> 时间：2012-05-22T19:48:11.963
> 
> 标签：perl

以下是我的 Perl 代码：

```
use strict;
use File::Find;
use MIME::Base64;
use File::Temp qw(tempfile);

sub loadFiles();    #udf
sub mySub();        #udf

my @files = ();
my $dir = shift || die "Argument missing: directory name\n";
my $finalLoc;
my $filePath;
my $fileContents;
my $base64EncFile;
my $domain = "WTX";
my $devFilePath;
my $deviceDir;
my $position;
my $user   = "admin";
my $encPwd = "YzNKcGNtRnRZVEF4";
my $decPwd;
my $response;
my $temp;
my $tempFilename;
loadFiles();    #call

foreach (@files) {
    #take the file path into a variable
    $filePath = $_;
    #replace the '/' with '\' in the file path
    $filePath =~ s/\//\\/g;
    #take the file path into a variable
    $devFilePath = $_;
    #replace the '\' with '/' in the file path
    $devFilePath =~ s/\\/\//g;
    #perform string operation to derive a target file path
    $position = index( $devFilePath, "RPDM" );
    $deviceDir = "local:///" . substr( $devFilePath, $position );
    #open handle on file to read the contents
    open( FILE, "< $filePath" );
    #read the entire file into a variable, 'fileContents'
    $fileContents = do { local $/; <FILE> };
    #base64 encode the file contents
    $base64EncFile = encode_base64($fileContents);
    #replace the <CR><LF> characters in the file and flatten the base64 string
    $base64EncFile =~ s/[\x0A\x0D]//g;
    #printing file path
    print "FilePath=$filePath\n";

    #creating a temp file with 9 random characters at the end, example 'tempUKv1vqBTp'
    $temp = File::Temp->new(
        TEMPLATE => "tempXXXXXXXXX",
        UNLINK   => 0
    ) or die "Could not make tempfile: $!";
    $tempFilename = $temp->filename;
    #Printing temp file name
    print  "TempFileName=$tempFilename\n";

    #open the temp file for writing
   open(TEMP, ">$tempFilename");

    select(TEMP);
    while($base64EncFile){
    #??? HOW TO PRINT THE VARIABLE $base64EncFile CONTENTS INTO THE TEMP FILE ???
    }

    #creating a final request for sending to the web service
    my $dpString = "<env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/' xmlns:dp='http://www.datapower.com/schemas/management'><env:Body><dp:request domain='$domain'><dp:set-file name='$deviceDir'>". $base64EncFile."</dp:set-file></dp:request></env:Body></env:Envelope>";
    #decode the encoded password
    $decPwd       = decode_base64($encPwd);
    system('C:\\apps\\curl-7.15.0\\curl.exe', '-#', '-k', '-u', "admin:$decPwd", '--data-binary', "$dpString", 'https://host/service/fileSet');
    print "-----------------------------------------------------------\n";
    close(TEMP);
    close(FILE);
}

sub loadFiles() {
    find( \&mySub, "$dir" );    #custom subroutine find, parse $dir
}

# following gets called recursively for each file in $dir, check $_ to see if you want the file!
sub mySub() {
    push @files, $File::Find::name
      if (/(\.xml|\.xsl|\.xslt|\.ffd|\.dpa|\.wsdl|\.xsd)$/i)
      ;    # modify the regex as per your needs or pass it as another arg
} 
```

我要完成的任务是，给定上述 perl 程序的文件夹参数将对给定的 Web 服务端点进行递归调用。问题是 - 在 Perl 中使用 System 命令无法发送超过 32 Kb 的文件。在尝试在 perl 中使用 File::Temp 模块时，我不确定如何将变量的内容设置为临时文件（我使用 Perl 的第一周）。

实现这一目标的任何帮助都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:12:00.667

您是否在问如何将字符串写入打开的文件？

```
print $fh $string; 
```

应该做的伎俩。

在您的示例中，这将转化为将 L62-65 替换为以下内容：

```
print TEMP $base64EncFile; 
```

# javascript - 将 iframe 附加到 DOM 并确保在提交表单之前加载内容

> ID：10709086
> 
> 赞同：1
> 
> 时间：2012-05-22T19:48:28.770
> 
> 标签：javascript, jquery, iframe

我有以下代码：

```
 function callIframe(type, cat) {
    var send = false;
    var axel = Math.random() + "";
    var a = axel * 10000000000000;
    var iframe = $('<iframe src="http://domain.com/;src=12345678;type=' + type + ';cat=' + cat + ';ord=' + a + '?" width="1" height="1" frameborder="0" ><iframe>');    
    $('body').append(iframe);   
  } 
```

和：

```
$("a").click(function(e){  
  var $form = $(this).parent();
  callIframe("signu903", "hptes318");  
  $form.get(0).submit();  
}); 
```

我的问题是表单在 iframe 的内容完全加载之前提交。我知道回调可以解决这个问题，但我依赖 iframe 加载来提交表单。在这种情况下，我只是在寻找或最佳实践。

注意：我无权访问 iframe 代码。

提前致谢，

JN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:09:56.703

尝试使用 a `setTimeout`，以便它等待 x 秒以加载 iframe，如果它在分配的时间内没有加载，它仍然会提交。

试试这个功能：

```
function callIframe(type, cat) {
    var send = false;
    var axel = Math.random() + "";
    var a = axel * 10000000000000;
    var iframe = $('<iframe src="http://domain.com/;src=12345678;type=' + type + ';cat=' + cat + ';ord=' + a + '?" width="1" height="1" frameborder="0" ><iframe>');
    $('body').append(iframe);
    return iframe;
}​ 
```

然后这段代码

```
$("a").click(function(e) {
    var $form = $(this).parent();
    var iframe = callIframe("signu903", "hptes318");
    iframe.load($form.get(0).submit);
    setTimeout($form.get(0).submit,5000);
});​ 
```

如果 iframe 的加载时间超过 5 秒，则无论如何都会提交表单。

您可能需要添加更多逻辑以防止提交发生两次。

# ruby-on-rails-3 - activeadmin：我如何控制基于用户显示的标题菜单项

> ID：10709092
> 
> 赞同：0
> 
> 时间：2012-05-22T19:48:36.560
> 
> 标签：ruby-on-rails-3, activeadmin

我想在我的 Rails 应用程序中使用 ActiveAdmin 后端创建一些逻辑，但我不确定它是否可能。

基本上我想给每个 AdminUser 一个名为 client_id 的新属性。当用户登录时，我想过滤标题菜单中显示给他们的内容。

标题中的每个项目都有一个“client_id”，以便我可以过滤它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:58:50.510

这是可能的，但你会做一些自定义的东西来让它工作。

我建议您最好只滚动自己的管理员设置。您将跳过篮球并做一些感觉不对的黑客行为，以使一切都变得美好。

# java - Java Webservice - 用于地图地图的 Jersey XmlAdapter

> ID：10709096
> 
> 赞同：0
> 
> 时间：2012-05-22T19:48:49.320
> 
> 标签：java, web-services, jaxb, jersey, xmladapter

我有一个使用 Jersey 的 Java Webservice。现在我想向客户端发送地图（行和列）的地图。

当我保持原样时，一切正常。但是 XMLOutput 看起来像这样......

```
data>
    <entry>
        <key>0</key>
        <value>
            <data>
                <entry>
                    <key>id</key>
                    <value>20</value>
                </entry>
                <entry>
                    <key>status</key>
                    <value>test</value>
                </entry>
                <entry>
                    <key>number</key>
                    <value>20</value>
                </entry>
                <entry>
                    <key>cars</key>
                    <value>3</value>
                </entry>

            </data>
        </value>
    </entry>
</data> 
```

但我想拥有这样的东西......

```
 <data>
    <entry row=0>
        <column name=id>20</column>
        <column name=status>OK</column>
        <column name=number>1</column>
        <column name=cars>1</column>
    </entry>
    <entry row=1>
        <column name=id>21</column>
        <column name=status>OK</column>
        <column name=number>1</column>
        <column name=cars>2</column>
    </entry>
    <entry row=2>
        <column name=id>22</column>
        <column name=status>OK</column>
        <column name=number>1</column>
        <column name=cars>3</column>
    </entry>
</data> 
```

为了控制 XML 输出，我想使用 XmlAdapters，但我没有让它工作。

包含行的类：

```
public class CoDataList{

   public LinkedHashMap<Integer,  CoDataMap> data = new LinkedHashMap<Integer,CoDataMap>();

} 
```

包含列的类：

```
public class CoDataMap {

   public LinkedHashMap<String, String> data = new LinkedHashMap<String, String>();

} 
```

我将如何编写 XmlAdapter 和 Types 来正确编组对象？

我做了这样的事情......但是我将在哪里添加下一个 XmlAdapter？

包含行和列的 MainClass

```
@XmlRootElement
public class Response implements Cloneable{

    @XmlJavaTypeAdapter(CoDataListAdapter.class)
    public CoDataList data = new CoDataList();

} 
```

现在我为 CoDataList 和 CoDataMap 编写了适配器：

```
public class CoDataListAdapter extends XmlAdapter<CoDataListType, CoDataList>{

@Override
public CoDataListType marshal(CoDataList v) throws Exception {
    CoDataListType rows = new CoDataListType();
            for (int currentRow : v.data.keySet()){
        CoDataListEntryType row= new CoDataListEntryType();
            row.key = currentRow;
        row.map = v.data.get(currentRow);
        rows.entry.add(row);
    }
    return rows;
}

@Override
public CoDataList unmarshal(CoDataListType v) throws Exception {
    // TODO Auto-generated method stub
    return null;
}

} 
```

* * *

```
public class CoDataMapAdapter extends XmlAdapter<CoDataMapType, CoDataMap> {

@Override
public CoDataMapType marshal(CoDataMap v) throws Exception {
    CoDataMapType columns = new CoDataMapType();
    for (String curCol : v.data.keySet()){
                    CoDataMapEntryType column= new CoDataMapEntryType();
        column.key = curCol;
        column.value = v.data.get(curCol);
        columns.entry.add(column);
    }
    // TODO Auto-generated method stub
    return columns;
}

@Override
public CoDataMap unmarshal(CoDataMapType v) throws Exception {
    //...
}
} 
```

* * *

```
public class CoDataListType {
    public List<CoDataListEntryType> entry = new ArrayList<CoDataListEntryType>();
} 
```

* * *

```
public class CoDataListEntryType {

@XmlAttribute(name="row")
    public Integer key; 

    @XmlValue
    @XmlJavaTypeAdapter(CoDataMapAdapter.class)
    public CoDataMap map;
} 
```

**在这一点上，我遇到了一个例外：**

**@XmlAttribute/@XmlValue 需要引用映射到 XML.xmladapter 中文本的 Java 类型**

* * *

```
public class CoDataMapType {
    public List<CoDataMapEntryType> entry = new ArrayList<CoDataMapEntryType>();
} 
```

* * *

```
public class CoDataMapEntryType {
    @XmlAttribute(name="column")
    public String key; 

    @XmlValue
    public String value;
} 
```

我真的很感谢你的帮助，我不知道如何让它工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:13:02.597

我现在解决了这个问题：

需要更改以下类：

```
public class CoDataListAdapter extends XmlAdapter<CoDataListType, CoDataList<CoDataMap<String, String>>>{

@Override
public CoDataListType marshal(CoDataList<CoDataMap<String, String>> v) throws Exception {

    CoDataListType rows = new CoDataListType();

    for (int currentRow : v.keySet()){

        CoDataListEntryType row= new CoDataListEntryType();

        row.key = currentRow;

        for (String key : v.get(currentRow).keySet()){
            CoDataMapEntryType column = new CoDataMapEntryType();

            column.name = key;
            column.value = v.get(currentRow).get(key);

            row.column.add(column);
        }

        rows.row.add(row);

    }

    return rows;
}

@Override
public CoDataList<CoDataMap<String, String>> unmarshal(CoDataListType v) throws Exception {

    CoDataList<CoDataMap<String,String>> rows =  new CoDataList<CoDataMap<String,String>>();

    for (CoDataListEntryType row : v.row){

        CoDataMap<String, String> columns = new CoDataMap<String, String>();
        for (CoDataMapEntryType column : row.column){
            columns.put(column.name, column.value);
        }
        rows.put(row.key, columns);

    }

    // TODO Auto-generated method stub
    return rows;
}

} 
```

* * *

```
public class CoDataListEntryType {

 @XmlAttribute(name="id")
 public Integer key; 

 @XmlElement
 public List<CoDataMapEntryType> column = new ArrayList<CoDataMapEntryType>();
} 
```

* * *

现在我只需要一个适配器。CoDataMapAdapter 和 CoDataMapType 类是不必要的。

# c++ - 表单构造函数中的 Visual C++ 对象？

> ID：10709097
> 
> 赞同：-1
> 
> 时间：2012-05-22T19:48:52.883
> 
> 标签：c++, forms, visual-studio-2008, object, c++-cli

在 Visual C++（Visual Studio windows 窗体项目）中，如何在 Form 构造函数中声明类对象，以便我可以在按钮中对象方法（点击事件）？

我在 .h 和 .cpp 中有 MyClass 类，我在类中的方法很少。在 form.h 文件中包含 .h。在 Form1 构造函数中创建了一个类的对象：

```
MyClass^ myx = gcnew MyClass(); 
```

但我不能用于`myc->exampleMethod()`：

```
private: System::Void PlayBtn_Click(System::Object^  sender, System::EventArgs^  e) {
} 
```

帮助，解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:52:50.800

您声明了名为“myx”的变量，但您使用的是未声明的变量“myc”

# javascript - Jquery拖放到空div并返回

> ID：10709100
> 
> 赞同：2
> 
> 时间：2012-05-22T19:48:57.917
> 
> 标签：javascript, jquery

我在试图弄清楚如何在两个不同的 div 之间拖放时遇到了困难，我`http://docs.jquery.com/UI/Sortable#option-connectWith`在另一篇文章中找到了参考，它工作得非常好......几乎无论如何。

我现在可以在 div 之间拖动项目，但是如果我从 div 中拖动最后一个项目，它就会对我关闭。我无法将任何东西拖回其中...我缺少一些基本的东西吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:51:55.267

您可以`display:none;`在每个中添加一个元素`div`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:53:43.700

当您从 div 中拖动最后一个元素时，它可能会折叠，这几乎就像删除 div 一样。作为评论中的状态，您应该为 div 设置一个最小高度，并且可能还设置一个最小宽度，以防止 div 在它为空时折叠。

# android - 如何找出INT中的Android参数？

> ID：10709102
> 
> 赞同：1
> 
> 时间：2012-05-22T19:49:13.387
> 
> 标签：android

许多用于设置布局方面的 Android 方法将 INT 作为参数，但 Google 指南和文档中对这些方法的描述显示参数是字符串。例如，LinearLayout 的 setOrientation() 方法。这是描述：

> public void setOrientation（int方向）
> 
> 布局应该是一列还是一行。
> 
> 机器人：方向
> 
> 参数传递 HORIZONTAL 或 VERTICAL。默认值为水平。

如您所见，该方法采用 INT 作为参数，但描述告诉我传递 HORIZONTAL 或 VERTICAL。

我在许多其他方法上注意到了相同的模式，那么我如何确定要传递哪些值来实现我想要的呢？

**更新**：通过反复试验，我发现 0 代表水平和 1 垂直。但是，该文档不应该更清楚地解释这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:52:35.950

这是因为那些被`static final int`调用了`HORIZONTAL`，`VERTICAL`所以你会调用：

```
setOrientation(LinearLayout.HORIZONTAL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:56:02.793

同意，我希望谷歌会使用枚举而不是整数，并且这样做会带来轻微的性能损失。

您通常可以找到文档中为您正在查看的方法的类定义的 int 常量。例如，[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html) `setOrientation()`方法的 javadocs 中提到`HORIZONTAL`和`VERTICAL`，这些常量可以在这里找到，

[http://developer.android.com/reference/android/widget/LinearLayout.html#HORIZONTAL](http://developer.android.com/reference/android/widget/LinearLayout.html#HORIZONTAL) http://developer.android.com/reference/android/widget/LinearLayout.html#VERTICAL

现在，不能原谅 google 没有链接到 文档中的常量`setOrientation()`，并且这些常量的文档是空白的事实。

# sql - 如何返回仅与特定属性有关的 SQL 结果？

> ID：10709115
> 
> 赞同：0
> 
> 时间：2012-05-22T19:50:01.270
> 
> 标签：sql

我有一个类似于以下的表：

```
REL_Aid_To_AttributeValue:
ID    AttributeValueID
101   1319
101   1320
101   1344
101   1345
102   1319
102   1320
102   1321
102   1336
103   1320
103   1336 
```

我有另一个表按类型对这些 AttributeValueID 进行分组：

```
TBL_AttributeValues:
AttributeValueID    AttributeTypeID
1319                1
1320                1
1321                1
1336                2
1344                3 
1345                3 
```

我有第三个表，它提供了第一个表中每个 ID 的信息：

```
TBL_Aids:
ID     Title                Author       etc.
101    Aid About Spiders    John Doe
102    Aid About Mites      Jane Doe 
103    Aid About Beetles    Joe Schmo 
```

我想在 AttributeTypeID=1 内返回仅包含 AttributeValueID 1319 或（含）1320 的 ID（以及有关它们的信息，如标题、作者等）的结果。所以我希望返回 101，因为它只有 1319 和 1320 用于 AttributeType 1，还有 103 因为它只有 1320 用于 AttributeType 1。我不想返回 102，因为虽然它有 1319 和 1320，但它也有 1321，这也是 AttributeType 1 。

我尝试了以下方法：

```
SELECT a.ID, a.Title, c.AttributeTypeID, 
COUNT(b.AttributeValueID)AS Total
FROM TBL_Aids as a,
REL_Aid_To_AttributeValue as b,
TBL_AttributeValues as c
WHERE a.ID=b.AidID
AND b.AttributeValueID=c.ID
AND a.Status=2
AND AttributeTypeID=1
AND (b.AttributeValueID=1319
OR b.AttributeValueID=1320)
GROUP BY a.ID, a.Title,
c.AttributeTypeID
HAVING COUNT(b.AttributeValueID) <= 2 
```

但它仍然返回 102 作为结果，因为它已经受到 1319 和 1320 的限制，并且正在计算该总数而不是类型 1 的 AttributeValueID 的总数。我是否需要某种子查询来完成此操作？任何帮助，将不胜感激！非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:55:19.217

尝试：

```
SELECT DISTINCT A.ID
FROM REL_Aid_To_AttributeValue A
WHERE A.AttributeValueID IN
(
    SELECT AttributeValueID
    FROM TBL_AttributeValues
    WHERE AttributeValueID IN (1319, 1320) AND AttributeTypeID=1
)
AND A.ID NOT IN
(
    SELECT A.ID
    FROM REL_Aid_To_AttributeValue A
    WHERE A.AttributeValueID IN
    (
        SELECT AttributeValueID
        FROM TBL_AttributeValues
        WHERE AttributeValueID NOT IN (1319, 1320)  AND AttributeTypeID=1
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:30:14.373

```
SELECT  id
FROM    (
        SELECT  DISTINCT id
        FROM    REL_Aid_To_AttributeValue a
        WHERE   attributeValueId IN (1319, 1320)
        ) q
WHERE   NOT EXISTS
        (
        SELECT  id
        FROM    (
                SELECT  AttributeValueID
                FROM    TBL_AttributeValues
                WHERE   AttributeTypeID = 1
                        AND AttributeValueID NOT IN (1319, 1320)
                ) t
        JOIN    REL_Aid_To_AttributeValue a
        ON      a.id = q.id
                AND a.AttributeValueID = t.AttributeValueID
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:56:47.537

你想限制你的身份。在 where 子句的某个地方，您可以包含以下内容：

```
where id in (select distinct av.id
             from AttributeValueType avt join
                  AttributeValue av
                   on avt.AttributeValueId = av.AttributeValueId
             where avt.AttributeValueId in (1319, 1320) and avt.AttributeTypeID = 1
            ) 
```

如果您只想在这两个属性存在时，请尝试以下操作：

```
Where id in (
    Select av.id
    From AttributeValueType avt join
         AttributeValue av
         on avt.AttributeValueId = av.AttributeValueId
    Group by av.id
    Having max(case when avt.AttributeValueId in (1319, 1320) and avt.AttributeTypeID = 1 then 0 else 1)=0
    Having max(case when 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:58:46.323

我认为您需要以某种方式添加“不存在”：

```
SELECT DISTINCT ID
FROM TBL_Aids x
WHERE AttributeValueID IN
(
    SELECT AttributeValueID
    FROM AttributeValueIDs
    WHERE AttributeValueID IN (1319, 1320) AND AttributeTypeID=1
) AND NOT EXISTS
(
    SELECT *
    FROM AttributeValueIDs a
    WHERE a.AttributeValueID NOT IN (1319, 1320) AND a.AttributeTypeID=1
    AND a.AttributeValueIDs = x.AttributeValueIDs
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T20:00:57.080

您需要加入 REL_Aid_To_AttributeValue 两次以确保存在*两*行

```
SELECT a.ID, a.Title, c.AttributeTypeID, 2 AS Total
FROM TBL_Aids a
join REL_Aid_To_AttributeValue b on a.ID=b.AidID and b.AttributeValueID = 1319
join REL_Aid_To_AttributeValue b2 on a.ID=b2.AidID and b2.AttributeValueID = 1320
join TBL_AttributeValues c on b.AttributeValueID=c.ID
WHERE a.Status=2
AND AttributeTypeID=1; 
```

也不是说如果你知道你有什么值，你就知道有多少，所以它是一个文字`2`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T20:02:42.580

您需要加入 REL_Aid_To_AttributeValue 两次以确保存在*两*行

```
SELECT a.ID, a.Title, c.AttributeTypeID, 2 AS Total
FROM TBL_Aids a
join REL_Aid_To_AttributeValue b on a.ID=b.AidID and b.AttributeValueID = 1319
join REL_Aid_To_AttributeValue b2 on a.ID=b2.AidID and b2.AttributeValueID = 1320
join TBL_AttributeValues c on b.AttributeValueID=c.ID
WHERE a.Status=2
AND AttributeTypeID=1; 
```

请注意，我已将您的查询转换为更现代的“加入”语法。我建议你学习它。

还要注意，如果你知道你有什么值，你就知道有多少，所以它是一个文字`2`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T18:32:40.410

感谢 Quassnoi：

```
 SELECT ID, Title, Author
    FROM TBL_Aids X
    JOIN (
    SELECT AidID
    FROM    (
            SELECT  DISTINCT AidID
            FROM    REL_Aid_To_AttributeValue a
            WHERE   AttributeValueID IN (1319, 1320)
            ) q
    WHERE   NOT EXISTS
            (
            SELECT  AidID
            FROM    (
                    SELECT  ID
                    FROM    TBL_AttributeValues
                    WHERE   AttributeTypeID = 1
                            AND ID NOT IN (1319, 1320)
                    ) t
            JOIN    REL_Aid_To_AttributeValue a
            ON      a.AidID = q.AidID
                    AND a.AttributeValueID = t.ID
            ))
    Y ON X.ID=Y.AidID
    WHERE Status=2 
```

# local - 使用特定设置创建多个本地用户帐户的脚本 Windows Server 2003

> ID：10709119
> 
> 赞同：1
> 
> 时间：2012-05-22T19:50:09.917
> 
> 标签：local, accounts

我需要使用以下信息/设置创建 80 个本地用户帐户：

1.  用户名
2.  全名
3.  描述（所有用户都一样）
4.  密码
5.  “Web Reporting Users (Cust)”组的成员
6.  取消选中“登录时连接客户端驱动器、打印机”和“默认为主客户端计算机”

以下脚本适用于我的服务器，但它只创建用户名/密码。我需要修改它以添加其他信息。即使您可以提供一种设置组成员身份的方法，这也会很有帮助。

```
strComputer = "SERVER.DOMAIN.com" 
Set colAccounts = GetObject("WinNT://" & strComputer & "") 
Set objUser = colAccounts.Create("user", "TestingScript") 
objUser.SetPassword "09iu%4et" 
objUser.SetInfo 
```

任何帮助，将不胜感激 ：）

编辑：我取得了一些进展。我现在可以运行脚本并让它创建一个具有密码和正确组的用户。但是，我仍然需要：

1.  描述
2.  全名
3.  取消选中“登录时连接客户端驱动器、打印机”和“默认为主客户端计算机”

如何将这些添加到脚本中？

编辑2：

取得了更大的进步，但我仍然需要取消选中：

取消选中“登录时连接客户端驱动器、打印机”和“默认为主客户端计算机”

这是最后一步，希望有人知道！:)

# xcode - NSTableView - 通过键入选择索引

> ID：10709122
> 
> 赞同：1
> 
> 时间：2012-05-22T19:50:11.390
> 
> 标签：xcode, cocoa, tableview

背景：

我有一个包含名称列表的表格视图。当您单击列表中的名称时，它会在窗口的另一部分显示其他详细信息。一切都已连接并且工作正常。

然而...

我想在此表中使用 Type Select 并遇到以下问题：

当我开始输入名称（选择表格时）时，它会正确突出显示表格中的适当名称，但表格*右侧*的详细信息不会改变。

我知道原因是更改详细信息的代码位于 IBAction 方法中，该方法仅在您*单击*以选择列表中的名称时调用，并使用 [sender clickedRow] 调用来获取所选名称的索引。

我还怀疑我需要使用 [tableView selectedRow] （因为它被选中，但你没有点击它）但我不太确定在哪里或如何执行此检查。

我还在想，由于“类型选择”没有发送操作消息，我将无法使用 [sender selectedRow] 而是会使用 [tableView selectedRow] ...

问题：

如何通过类型选择判断表格视图中的选定行何时更改？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:00:03.307

在您的控制器中实现[`tableViewSelectionDidChange:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTableViewDelegate/tableViewSelectionDidChange%3a)委托方法，并确保您的控制器是`NSTableView`的委托。

您可以使用以下内容更新您的视图：

```
- (void)tableViewSelectionDidChange:(NSNotification *)aNotification {
    [relatedView updateInformationFromRow:[[aNotification object] selectedRow]];
} 
```

* * *

从文档中：

> `tableViewSelectionDidChange:`通知代理表视图的选择已更改。

在其中，您将更新您的相关视图。您可以使用`aNotification`' 对象，这将是一个`NSTableViewSelectionDidChangeNotification`，再次从文档中，是：

> 在 NSTableView 对象的选择更改后发布。通知对象是其选择发生变化的表视图。此通知不包含 userInfo 字典。

# c# - C# .net 4.5 异步委托

> ID：10709123
> 
> 赞同：4
> 
> 时间：2012-05-22T19:50:29.387
> 
> 标签：c#, asynchronous, task, c#-5.0, asp.net-4.5

这不会引发编译错误，但为什么呢？

```
public async void DoSomething(object arg){ ... }

Action<object> myAnonActionDelegate = DoSomething; 
```

“”不应该`DoSomething`有一个类型的签名`Func<object,Task>`而不是动作吗？事实上“ `DoSomething`”是不可分配给`Func<object,Task>`委托的。

问题是为什么？我对 async 关键字的理解是否关闭？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:57:56.743

> “DoSomething”不应该有一个类型的签名`Func<object,Task>`而不是动作吗？

不 - 该方法不返回任何内容。看看声明 - 它是`void`，不是`Task`。该`async`部分只是为了编译器的利益（以及人类阅读它） - 它并不是方法签名的真正部分。异步方法必须返回`void`,`Task`或`Task<T>`- 但该方法的返回类型实际上*就是*您声明的类型。编译器不会把你`void`变成`Task`神奇的。

现在您*可以*编写完全相同的方法体并将该方法声明为：

```
public async Task DoSomething(object arg){ ... } 
```

此时您*需要*使用`Func<object, Task>`- 但这是一个不同的方法声明。

我强烈建议您使用返回的表单，`Task` *除非*您使用异步方法订阅事件 - 您不妨允许调用者观察您的方法的进度、失败等。

# android - 在 AsyncTask 中保持对 Fragment 的强引用是否安全？

> ID：10709124
> 
> 赞同：5
> 
> 时间：2012-05-22T19:50:29.687
> 
> 标签：android, android-asynctask, android-fragments

由于不建议在任务中保留对 a 的强引用`Context`（在任务仍在运行时上下文可能会被破坏，但由任务保存在内存中），我想知道这是否同样适用于片段？

片段管理它们的活动引用，并支持通过`setRetainInstance`. 我可以假设例如在 Fragment 中创建一个非静态的内部 AsyncTask 是安全的，不会有泄漏的风险`$this`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:53:06.183

保持线程之间的引用通常是不好的方法，并且 an`AsyncTask`类似于线程。

没关系，只要您确保在完成使用它时取消引用它。

否则，您可能会出现内存泄漏。

在这种情况下，没关系，因为您`Fragment`的上下文是`AsyncTask`. 任务完成后，它将丢失该引用。

如果这是在 a 中完成的`Service`，那将是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:08:38.757

Phoenixblade9 的回答是正确的，但要让它完整，我会添加一件事。

AsyncTask 有一个很好的替代品 - AsyncTaskLoader，或者通常是 Loaders。它根据调用它的上下文（Activity、Fragment）来管理它的生命周期，并实现了一堆侦听器来帮助您将第二个线程的逻辑与 ui 线程分开。它通常不受泄漏上下文的影响。

并且不要打扰这个名字 - 它也有利于保存数据。

* * *

正如承诺的那样，我将发布我的 AsyncTaskLoader 代码，并返回多个对象。加载程序是这样的：

```
public class ItemsLoader extends AsyncTaskLoader<HashMap<String, Object>>{

HashMap<String, Object> returned;
ArrayList<SomeItem> items;
Context cxt;

public EventsLoader(Context context) {
    super(context);
    //here you can initialize your vars and get your context if you need it inside
}

@Override
public HashMap<String, Object> loadInBackground() {

    returned = getYourData();

    return returned;

}

@Override
public void deliverResult(HashMap<String, Object> returned) {
    if (isReset()) {
        return;
    }

    this.returned = returned;

    super.deliverResult(returned);
}

@Override
protected void onStartLoading() {
    if (returned != null) {
        deliverResult(returned);
    }

    if (takeContentChanged() || returned == null) {
        forceLoad();
    }
}

@Override
protected void onStopLoading() {
    cancelLoad();
}

@Override
protected void onReset() {
    super.onReset();

    onStopLoading();

    returned = null;
} 
```

在`getYourData()`函数中，我得到了服务器消息代码或其他一些错误代码和一个`ArrayList<SomeItem>`. 我可以像这样在我的片段中使用它们：

```
public class ItemListFragment extends ListFragment implements LoaderCallbacks<HashMap<String, Object>>{

private LoaderManager lm;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    lm = getLoaderManager();

    Bundle args = new Bundle();
args.putInt("someId", someId);
lm.initLoader(0, args, this);
}

@Override
public Loader<HashMap<String, Object>> onCreateLoader(int arg0, Bundle args) {
    ItemsLoader loader = new ItemsLoader(getActivity(), args.getInt("someId"));
    return loader;
}

@Override
public void onLoadFinished(Loader<HashMap<String, Object>> loader, HashMap<String, Object> data) {

    if(data!=null){ if(data.containsKey("items")){ 
        ArrayList<SomeItem> items = (ArrayList<EventItem>)data.get("items");

    } else { //error
        int error = 0;
        if(data.containsKey("error")){
            error = (Integer) data.get("error");
        }
            }

}

@Override
public void onLoaderReset(Loader<HashMap<String, Object>> arg0) {

} 
```

# perl - Perl 模棱两可的命令行选项，以及带有 -i 的 eval 的安全隐患？

> ID：10709127
> 
> 赞同：6
> 
> 时间：2012-05-22T19:50:41.437
> 
> 标签：perl, command-line-arguments

**我知道这是不正确的。我只想知道 perl 是如何解析这个的。**

所以，我在玩 perl，我想要的是`perl -ne`我输入`perl -ie`的行为有点有趣，我想知道发生了什么。

```
$ echo 1 | perl -ie'next unless /g/i' 
```

所以 perl `Aborted (core dumped)`。`perl --help`我看到的阅读`-i`需要扩展备份。

```
-i[extension]     edit <> files in place (makes backup if extension supplied) 
```

对于那些不知道的人`-e`来说只是评估。所以我在想三件事中的一件可能会发生，或者它被解析为

1.  `perl -i -e'next unless /g/i'` *我得到undef，其余的作为e的参数*
2.  `perl -ie 'next unless /g/i'` *我得到参数e，其余的像文件名一样挂起*
3.  `perl -i"-e'next unless /g/i'"` *整件事作为我的论据*

当我跑

```
$ echo 1 | perl -i -e'next unless /g/i' 
```

程序不会中止。这使我相信它`'next unless /g/i'`没有被解析为`-e`. 毫无疑问，上面的内容会以这种方式进行解析，并且会产生不同的结果。

那是什么？好吧，再玩一点，我得到了

```
$ echo 1 | perl -ie'foo bar'
Unrecognized switch: -bar  (-h will show valid options).

$ echo 1 | perl -ie'foo w w w'
... works fine guess it reads it as `perl -ie'foo' -w -w -w` 
```

玩弄上面的，我试试这个......

```
$ echo 1 | perl -ie'foo e eval q[warn "bar"]'
bar at (eval 1) line 1. 
```

现在我真的很困惑.. 那么 Perl 是如何解析这个的呢？最后，似乎您实际上可以从 just 中获取 Perl eval 命令`-i`。这有安全隐患吗？

```
$ perl -i'foo e eval "warn q[bar]" ' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T20:27:06.353

## 快速回答

壳牌报价处理正在折叠和连接它认为只是一个论点的东西。您的调用相当于

```
$ perl '-ienext unless /g/i' 
```

它立即中止，因为 perl 将此参数解析为包含`-u`，这会触发核心转储，您的代码将开始执行。这是一个曾经用于创建伪可执行文件的旧功能，但如今它在本质上已经退化了。

似乎`eval`是对`-e 'ss /g/i'`.

## 第一条线索

[B::Deparse](http://search.cpan.org/perldoc?B::Deparse)可以你的朋友，只要你碰巧在没有[`dump`](http://perldoc.perl.org/functions/dump.html)支持的系统上运行。

```
$ echo 1 | perl -MO=Deparse,-p -ie'next unless /g/i'
dump is not supported.
BEGIN { $^I = "enext"; }
BEGIN { $/ = "\n"; $\ = "\n"; }
LINE: while (defined(($_ = <ARGV>))) {
    chomp($_);
    (('ss' / 'g') / 'i');
} 
```

那么为什么会`unle`消失呢？如果您正在运行 Linux，那么您可能还没有达到我的水平。上面的输出来自 Cygwin 上的 Perl，关于[`dump`](http://perldoc.perl.org/functions/dump.html)不受支持的错误是一个线索。

## 下一条线索

[perlrun 文档](http://perldoc.perl.org/perlrun.html)中的注意事项：

> **`-u`**
> 
> 此开关会导致 Perl 在编译程序后转储内核。然后，理论上您可以使用*undump*程序（未提供）将此核心转储并转换为可执行文件。这会以牺牲一些磁盘空间为代价来加快启动速度（您可以通过剥离可执行文件来最小化）。（不过，“hello world”可执行文件在我的机器上大约有 200K。）如果您想在转储之前执行程序的一部分，请改用`dump`运算符。注意：*undump*的可用性是平台特定的，可能不适用于特定的 Perl 端口。

## 工作假设和确认

Perl 的参数处理将整个块视为单个选项集群，因为它以破折号开头。该`-i`选项使用下一个单词 ( `enext`)，正如我们在[处理的](https://github.com/mirrors/perl/blob/3258103348843907aaaabd5ce638d44c6ab5ecfa/perl.c#L3173)[实现中`-i`](https://github.com/mirrors/perl/blob/3258103348843907aaaabd5ce638d44c6ab5ecfa/perl.c#L3173)看到的那样。

```
case 'i':
    Safefree(PL_inplace);
    [Cygwin-specific code elided -geb]
    {
        const char * const start = ++s;
        while (*s && !isSPACE(*s))
            ++s;

        PL_inplace = savepvn(start, s - start);
    }
    if (*s) {
        ++s;
        if (*s == '-')      /* Additional switches on #! line. */
            s++;
    }
    return s; 
```

对于备份文件的扩展名，上面来自*perl.c*的代码最多使用第一个空白字符或字符串结尾，以先到者为准。如果还有字符，第一个必须是空格，然后跳过它，如果下一个是破折号，那么也跳过它。在 Perl 中，您可以将此逻辑写为

```
if ($$s =~ s/i(\S+)(?:\s-)//) {
  my $extension = $1;
  return $extension;
} 
```

然后，所有`-u`, `-n`, `-l`, 和`-e`都是有效的 Perl 选项，因此参数处理会吃掉它们并留下无意义的

```
ss /g/i 
```

作为 的参数`-e`，perl 将其解析为一系列除法。但在执行甚至可以开始之前，古老的`-u`导致 perl 转储核心。

## 意外行为

更奇怪的是，如果你在`next`和之间放置两个空格`unless`

```
$ perl -ie'next  unless /g/i' 
```

程序尝试运行。回到我们看到[的主选项处理循环](https://github.com/mirrors/perl/blob/3258103348843907aaaabd5ce638d44c6ab5ecfa/perl.c#L3346)

```
case '*':
case ' ':
    while( *s == ' ' )
      ++s;
    if (s[0] == '-')        /* Additional switches on #! line. */
        return s+1;
    break; 
```

额外的空格会终止对该参数的选项解析。见证：

```
$ perl -ie'next 废话 -garbage --foo' -e die
死于 -e 第 1 行。
```

但没有我们看到的额外空间

```
$ perl -ie'next 废话 -garbage --foo' -e die
无法识别的开关：-onsense -garbage --foo（-h 将显示有效选项）。
```

然而，有了额外的空格和破折号，

```
$ perl -ie'next -除非 /g/i'
不支持转储。
```

## 设计动机

正如评论所表明的那样，为了[严格的 shebang( `#!`) 行约束](http://linux.die.net/man/2/execve)而存在逻辑，perl 会尽力解决这个问题。

> ### 解释器脚本
> 
> 解释器脚本是一个启用了执行权限的文本文件，其第一行的格式为：
> 
> ```
> #! interpreter [optional-arg] 
> ```
> 
> 解释器必须是本身不是脚本的可执行文件的有效路径名。如果 filename 参数`execve`指定了解释器脚本，则解释器将使用以下参数调用：
> 
> ```
> interpreter [optional-arg] filename arg... 
> ```
> 
> 其中*arg...*`argv`是 的论点所指向的一系列词`execve`。
> 
> 对于便携使用，*optional-arg*应该不存在，或者指定为单个单词（*即*，它不应包含空格）......</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T21:03:49.680

需要知道的三件事：

1.  `'-x y'`表示`-xy`Perl（对于一些任意选项“x”和“y”）。

2.  `-xy`与 unix 工具一样，是一个代表`-x -y`.

3.  `-i`, like`-e`吸收了其余的论点。与 不同`-e`，它认为空格是参数的结尾（根据上面的#1）。

这意味着

```
-ie'next unless /g/i' 
```

这只是一种奇特的写作方式

```
'-ienext unless /g/i' 
```

解绑到

```
-ienext -u -n -l '-ess /g/i'
  ^^^^^             ^^^^^^^
----------         ----------
val for -i         val for -e 
```

[perlrun](http://perldoc.perl.org/perlrun.html)文件`-u`为：

> 此开关会导致 Perl 在编译程序后转储内核。然后，理论上您可以使用 undump 程序（未提供）将此核心转储并转换为可执行文件。这会以牺牲一些磁盘空间为代价来加快启动速度（您可以通过剥离可执行文件来最小化）。（不过，“hello world”可执行文件在我的机器上大约有 200K。）如果您想在转储之前执行程序的一部分，请改用 dump() 运算符。注意：undump 的可用性是平台特定的，可能不适用于特定的 Perl 端口。

# windows - 如何在我的 Windows 应用程序中插入独立的后退导航按钮？

> ID：10709131
> 
> 赞同：0
> 
> 时间：2012-05-22T19:50:59.277
> 
> 标签：windows, winapi, button, navigation, win32gui

我想在我自己的对话框中使用相同的按钮：

![我想要这个按钮](../Images/4ec5fc1f65738fd2ff7080302c58c826.png)

正如我所看到的，它被 Windows 资源管理器和其他一些系统对话框使用。

是标准控制吗？如何将其插入到我的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:56:58.843

这是由视觉样式 (UXTHEME.DLL) 提供的。

但是，您必须自己做。所有者绘制或子类按钮，将使用 OpenThemeData（类为“NAVIGATION”）绘制它，部分 NAV_BACKBUTTON。

请注意，与 UXTHEME.DLL 一样，如果 UXTHEME.DLL 不可用（在 XP 之前）、被禁用或未定义类“NAVIGATION”（仅在 Aero 中添加，XP 的 Luna 没有有它）。

# objective-c - 以 root 身份使用 AuthorizationExecuteWithPrivileges 执行命令的替代方法

> ID：10709132
> 
> 赞同：3
> 
> 时间：2012-05-22T19:51:00.310
> 
> 标签：objective-c, xcode, launchd

在 10.7 中弃用 AuthorizationExecuteWithPrivileges 后，除了以 root 身份以编程方式运行命令（如 launchctl、chmod、chown 等）之外，还有什么替代方法？我需要支持 10.5，所以不能选择 SMJobBless。

这是用例。我正在运行时为 LaunchDaemons 守护进程生成一个 plist，需要将守护进程和 plist 复制到它们的适当位置并使用 launchctl 卸载/加载 plist

我是否正确理解我需要 root 才能执行这些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:19:44.150

您可以使用`applescript`

```
do shell script "sh /Users/new/load.sh" with administrator privileges 
```

# replace - SPARQL 1.1：如何使用替换功能？

> ID：10709133
> 
> 赞同：13
> 
> 时间：2012-05-22T19:51:02.543
> 
> 标签：replace, sparql, sesame

如何使用 SPARQL 1.1 中的替换功能，尤其是在更新命令中？

例如，如果我有多个三元组 ?s ?p ?o 其中 ?o 是一个字符串，并且对于所有 ?o 包含字符串“gotit”的三元组，我想插入一个额外的三元组，其中“gotit”被替换为“拥有它”，我怎么能这样做？我正在努力实现这一目标是 Sesame 2.6.0。

我尝试了这种天真的方法：

```
INSERT { ?s ?p replace(?o,"gotit","haveit","i") . }
WHERE { ?s ?p ?o . FILTER(regex(?o,"gotit","i")) } 
```

但这导致了语法错误。

我也未能在查询的结果列表中使用替换，如下所示：

```
SELECT ?s ?p (replace(?o,"gotit","haveit","i") as ?r) WHERE { .... } 
```

遗憾的是，SPARQL 文档没有包含如何使用此功能的示例。

是否有可能使用函数来创建新值而不仅仅是测试现有值，如果可以，如何？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T15:32:51.770

你不能`INSERT`像你试图做的那样直接在你的子句中使用表达式。此外，您正在绑定`?name`第一个三元组模式，但随后`?o`在`FILTER`其中进行过滤不会给您任何结果（对未绑定的变量进行过滤将不会为大多数过滤器表达式提供任何结果）。

相反，您需要在子句中使用 a`BIND`以`WHERE`使新版本的值在`INSERT`子句中可用，如下所示：

```
INSERT 
{
  ?s ?p ?o2 .
}
WHERE 
{ 
  ?s ?p ?o .
  FILTER(REGEX(?o, "gotit", "i"))
  BIND(REPLACE(?o, "gotit", "haveit", "i") AS ?o2)
} 
```

`BIND`将表达式的结果分配给新变量，以便您可以在查询/更新的其他地方使用该值。

您感兴趣的 SPARQL 规范的相关部分是[分配部分](http://www.w3.org/TR/sparql11-query/#assignment)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T19:58:57.853

[根据规范](http://www.w3.org/TR/sparql11-query/#func-replace)使用`replace`看起来正确的方法。我相信最近才被添加到规范的最后一个版本中——也许芝麻还不支持它？`REPLACE`

如果您只是这样做`SELECT ?s ?p ?o WHERE { ?s ?p ?name . FILTER(regex(?name,"gotit","i")) }`，您的查询是否返回行？

# jquery - JqG rid colModel 动态格式化程序

> ID：10709137
> 
> 赞同：2
> 
> 时间：2012-05-22T19:51:28.890
> 
> 标签：jquery, jqgrid, formatter

我的`jqGrid`工作是动态的。所以所有选项也都是动态加载的。这个选项是用java生成的，`Map<String,Object>` 所有选项都很好用，但是de里面的函数名`map/opts`不起作用。这是`json`用java生成的地图。

```
"colModel":[...{"formatter":"myFunction","index":"","name":""}] 
```

我还没有调试`jqgrid.src.js`，我认为问题出在`eval`. 未调用“myFunction”并返回未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:39:51.060

如果它是预定义的格式化程序之一，则该`formatter`选项可以是字符串，但根据[自定义格式化程序的 jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)：

> 您可以为特定列定义自己的格式化程序。通常这是一个函数。

所以 jqGrid 期望一个函数被传递。这就是为什么`myFunction`有效但`"myFunction"`无效的原因。无论如何，要解决您的问题，您需要输出代码：

```
"formatter": myFunction 
```

* * *

更深入一点，您可以在 jqGrid 源文件[grid.base.js](https://github.com/tonytomov/jqGrid/blob/master/js/grid.base.js)中看到格式化程序直接使用一个函数，但是如果传递了一个字符串，则该字符串将传递给`$.fn.fmatter`：

```
 formatter = function (rowId, cellval , colpos, rwdat, _act){
        var cm = ts.p.colModel[colpos],v;
        if(typeof cm.formatter !== 'undefined') {
            var opts= {rowId: rowId, colModel:cm, gid:ts.p.id, pos:colpos };
            if($.isFunction( cm.formatter ) ) {
                v = cm.formatter.call(ts,cellval,opts,rwdat,_act);
            } else if($.fmatter){
                v = $.fn.fmatter(cm.formatter, cellval,opts, rwdat, _act);
            } else {
                v = cellVal(cellval);
            }
        } else {
            v = cellVal(cellval);
        }
        return v;
    }, 
```

[如果jquery.fmatter.js](https://github.com/tonytomov/jqGrid/blob/master/js/jquery.fmatter.js)中还没有该函数，那么我预计当网格尝试使用它时会发生错误。

# python - 让 PyBox2D 在所有平台（Windows、Linux 和 Mac）上工作

> ID：10709144
> 
> 赞同：1
> 
> 时间：2012-05-22T19:51:54.377
> 
> 标签：python, python-2.7, box2d, python-2.5

我试图让我的 Box2D 代码在所有 3 个平台上运行良好。它在 Windows 上运行良好，我只是安装了 Python 2.5，设置了我的环境路径，然后从以下位置下载了 PyBox2D： [http ://code.google.com/p/pybox2d/downloads/list](http://code.google.com/p/pybox2d/downloads/list)

并安装。在那一点上，它似乎有效，至少根据我的测试。然而，一个警告是，当我运行测试平台应用程序 pygame_main.py 时它失败了......但也许它只是没有从 pybox2d 更改或类似的东西中更新......

在 Linux 上，如何做到这一点很棘手，更何况如何实际分发游戏......我们已经安装了 Python 2.5，并从 svn 中检查了 pybox2d 的主干，构建它并运行设置。然而，当我们真正尝试创造一个世界时

```
File "box2dtest.py", line 28, in main world = box2d.b2World(worldAABB, gravity, doSleep)
TypeError: init() takes at most 3 arguments (4 given) 
```

这也是我在尝试将游戏构建到 Python 2.7 时遇到的错误。老实说，我不确定从这里该怎么做。

如果我能确定它在 Mac 上运行良好，我可以放弃让它在 Linux 上运行的想法。我希望它能够在所有系统上完美运行 :) 老实说，在我理想化的世界里，游戏的设置会很简单。我只是在寻找人来帮助我弄清楚我是否陷入了死胡同，或者是否有希望让它发挥作用。:)

让我知道我可以提供哪些其他信息来帮助描述问题。我的伙伴在 linux 上设置了它，这就是为什么我的描述在 linux 方面不太冗长的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:55:30.990

这将有助于为代码提供更多上下文。在代码第 28 行，您调用了带有许多参数的 b2World。分发中的`examples/hello.py`调用`b2World()`如下：

```
b2World(gravity=(0,-10), doSleep=True) 
```

因此，从您传递参数的变量名称中，我想您必须省略`worldAABB`.

# c# - 如何使用 vb.net 在 csv 导出中生成所有带双引号的列

> ID：10709146
> 
> 赞同：2
> 
> 时间：2012-05-22T19:51:55.220
> 
> 标签：c#, vb.net, string, csv, iostream

我生成 csv 内容类型导出。

添加了“A”、“B”、“C”、“D”等列

columns = string.format("""{0}"",""{1}"",""{2}""","A","B","C")

流.writeline（列）；

csv 文件已导出，但第一列没有双引号。我需要每列双引号。我尝试了很多方法，其中一种方法很好用，即 columns = string.format(" ""{0}"",""{1}"",""{2}"""," A","B","C") -- 在第一列之前放置空格。

但我需要没有空间的结果。

任何人都可以帮助解决这个问题。

示例代码：

```
Public Class CSVExporter
    Public Shared Sub WriteToCSV(personList As List(Of Person))
        Dim attachment As String = "attachment; filename=PerosnList.csv"
        HttpContext.Current.Response.Clear()
        HttpContext.Current.Response.ClearHeaders()
        HttpContext.Current.Response.ClearContent()
        HttpContext.Current.Response.AddHeader("content-disposition", attachment)
        HttpContext.Current.Response.ContentType = "text/csv"
        HttpContext.Current.Response.AddHeader("Pragma", "public")

        WriteColumnName()

        For Each item As Person In personList
            WriteUserInfo(item)
        Next

        HttpContext.Current.Response.[End]()
    End Sub

    Private Shared Sub WriteUserInfo(item As Person)
        Dim strb As New StringBuilder()

        AddComma(String.Format("""{0}""", item.Name), strb)
        AddComma(String.Format("""{0} """, item.Family), strb)
        AddComma(String.Format("""{0} """, item.Age.ToString()), strb)
        AddComma(String.Format("""{0:C2}""", item.Salary), strb)

        HttpContext.Current.Response.Write(strb)

        HttpContext.Current.Response.Write(Environment.NewLine)
    End Sub

    Private Shared Sub AddComma(item As String, strb As StringBuilder)
        strb.Append(item.Replace(",", " "))
        strb.Append(" ,")
    End Sub
    Private Shared Sub WriteColumnName()
        Dim str As String = """Name"", ""Family"", ""Age"", ""Salary"""
        HttpContext.Current.Response.Write(str)
        HttpContext.Current.Response.Write(Environment.NewLine)
    End Sub
End Class 
```

# c# - C# 从远程系统拖放

> ID：10709154
> 
> 赞同：2
> 
> 时间：2012-05-22T19:52:11.103
> 
> 标签：c#, drag-and-drop

我正在创建一个远程文件查看器，并希望能够将远程文件拖放到 Windows 资源管理器中。我有一个鸡蛋问题。我可以将文件下载到临时文件。我可以创建指向 tmp 文件的数据对象，但我不想触发实际下载，直到他们释放资源管理器上的按钮。

我尝试查看 MouseUp 事件，但它不是从我的应用程序触发的。它是从资源管理器触发的。我想我可以编写一个 Hook DLL 来捕捉鼠标向上事件，然后用下载内容替换后台的空文件。不过，这似乎有点奢侈。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:31:38.477

没有本地解决方案，但您可以查看[此 CodeProject 文章](http://www.codeproject.com/Articles/23139/Transferring-Virtual-Files-to-Windows-Explorer-in)，其中详细说明了如何完成。祝你好运！

# matlab - MATLAB - 填充 ezpolar 图

> ID：10709155
> 
> 赞同：1
> 
> 时间：2012-05-22T19:52:11.603
> 
> 标签：matlab, fill, polar-coordinates

我只是有一个关于 MatLab 的简短问题。

假设我们有等式：

r^2 = 2 sin(5t)

我知道我可以通过写作来填充一个极地情节，比如：

```
t = linspace(0,2*pi,200);
r = sqrt(abs(2*sin(5*t)));
x = r.*cos(t);
y = r.*sin(t);
fill(x,y,'k') 
```

但是假设我使用 ezpolar 代替函数句柄上方的方程，然后键入：

```
ezpolar(function handle) 
```

有什么办法可以填充这个极坐标图吗？还是我必须使用上述程序？

任何提示/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:29:31.380

您可以使用 ezpolar，然后修改生成的图形。如果您查看从 ezpolar 返回的句柄，您会看到它是在轴上绘制的线本身。可以从该线对象中提取点，然后用于在同一轴的顶部放置一个新多边形。好处是，你可以保留所有漂亮的极地标签。

```
h=ezpolar('sqrt(abs(2*sin(5*t)))')
hold on;
fill(get(h, 'XData'), get(h, 'YData'), 'k'); 
```

# tomcat - Web 容器管理安全性的常见替代方案？

> ID：10709157
> 
> 赞同：1
> 
> 时间：2012-05-22T19:52:14.073
> 
> 标签：tomcat, websphere, security

使用 Tomcat（或 Websphere）容器管理的安全性的常见替代方法是什么？

我有一个令人不快的安全库，它从多个地方提取授权和身份验证，最初将在 Tomcat 上进行早期开发，然后在 Websphere 上进行后期开发和生产。而不是通过 JAAS 为 Tomcat 设置自定义领域所需的 hack-a-doo，然后在 WAS 上进行另一轮 hack，是否有任何常见的替代方案？

我只在 Tomcat 上做过基于领域的安全性。我见过一些有趣的自制方法，例如在会话[http://www.vitarara.org/cms/struts_2_cookbook/creating_a_login_interceptor](http://www.vitarara.org/cms/struts_2_cookbook/creating_a_login_interceptor)中监视用户对象。我也很好奇 wiki 页面（例如）如何与[http://host.com/view.jsp?a_wiki_page](http://host.com/view.jsp?a_wiki_page)设法保持角色直接，因为这似乎是 wiki 和 bbs 通常需要的，也许这是我的解决方案？

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:54:44.567

Spring Security 是一种流行的替代方案：

[http://www.springsource.org/spring-security](http://www.springsource.org/spring-security)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:56:02.547

Spring Security 提供了一种全面的、与容器无关的方法，我已经在 WebSphere 和 Tomcat 上成功使用了该方法（特别是在 Tomcat 上构建/测试并在 WebSphere 上部署）。

我真正喜欢该框架的地方在于，它为您提供了一个以应用程序为中心、与源代码无关的当前用户及其在应用程序中的权限的视图。这意味着您可以从任何地方加载用户和权限，并且只需要关注配置的来源（LDAP、数据库、属性文件、内存中测试对象、SAML 断言等）

它还为您提供了许多您在 Java EE Security 中根本没有定义的细粒度授权控制（基于 URL 和基于方法）。您可以使用正则表达式和 Ant 样式的表达式进行模式匹配，否则您将无法使用。表达式语法也相当丰富。如果您需要进行特定于数据的访问控制，则提供 DDL 供您添加到数据库并直接集成到您的安全中。

Spring Security 使用“/*” URL 映射（或您选择保护的任何映射）作为过滤器运行对 Web 容器的所有请求。

# java - 我试图了解创建矩形的不同语法

> ID：10709159
> 
> 赞同：-1
> 
> 时间：2012-05-22T19:52:15.587
> 
> 标签：java, height, width, rectangles

我在这里理解这段代码。原点是 0,0 或 JFrame 的左上角，矩形的宽度是 9，高度从下到上覆盖。

```
Rectangle left = new Rectangle(0,0,WIDTH/9,HEIGHT); 
```

但我不太明白这一点。这里的原点是什么？是 9 乘以 8 还是说测量值是 9 乘 8？乘号的目的是什么？

```
Rectangle right = new Rectangle((WIDTH/9)*8,0,WIDTH/9,HEIGHT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:55:15.903

> 乘号的目的是什么？

矩形的 x 原点是整个 JFrame 的 8/9。这是正确的（我假设）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:56:20.357

```
Rectangle right = new Rectangle( (WIDTH/9)*8, 0, WIDTH/9, HEIGHT); 
```

这意味着 x 原点是 WIDTH 的实数 9/8。它的宽度是 WIDTH 变量的 1/9。看起来这会水平移动矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:56:23.553

没有看到整个代码很难知道，但我假设 WIDTH 是包含两个矩形的总宽度。在这种情况下，您最终会得到两个矩形，它们的宽度是总宽度的九分之一，并占据容器的左侧和右侧。

由于坐标是矩形的左上角，要使九分之一宽度的矩形占据容器的右侧，x坐标需要是总宽度的九分之八，即（ WIDTH/9)*8 计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:56:46.947

对价值观的一点修改给了我们

```
Rectangle right = new Rectangle(WIDTH-(WIDTH/9),0,WIDTH/9,HEIGHT); 
```

这意味着右侧`right`落在`WIDTH`

# html - 今天的谷歌涂鸦穆格合成器

> ID：10709161
> 
> 赞同：5
> 
> 时间：2012-05-22T19:52:40.307
> 
> 标签：html, google-doodle

我正在检查**今天的 Moog Synth 的 Google Doodle**，献给 Robert Moog，

![涂鸦](../Images/63b4f05084249eca086a0d3d10399f37.png)

当我遇到以下 html 代码时：

```
 <w id=moogk0></w>
 <s id=moogk1></s>
 <w id=moogk2></w>
 <s id=moogk3></s> 
```

*（您可以查看源代码并按 Ctrl+F for ，您将在第一个搜索结果中得到它）。*

我在谷歌上搜索了 s & w 标签，但没有发现任何有用的标签，只是`s`标签有时用于删除文本，但现在已弃用。

显然，谷歌不会使用已弃用的标签，但我想这背后还有比普通的 html 代码更多的东西。**谁能解释一下这个标签的用法？& 浏览器如何识别它们？& 如果浏览器无法识别它们，它们的用途是什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:56:04.743

浏览器无法识别它们。

但是[HTML 旨在*忽略*它无法识别的内容](http://bytes.com/topic/html-css/answers/542484-browser-behavior-unknown-tags-attributes#post2116521)，因此浏览器根本无法理解这些内容并被忽略。作为没有内容的元素，它们也不会被渲染，尽管它们将成为 DOM 的一部分。

但是，这些*可以*`getElementsByTagName`直接作为 CSS 中的元素设置样式，并由 Javascript（等等）拾取`getElementById`。

简而言之，这些元素为 CSS 和 Javascript 提供了一个目标，而对显示没有任何其他影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T20:00:33.323

未知元素被视为块元素（如 div），可以相应地设置样式并在脚本中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T19:44:06.620

您所说的标签是用户创建的 XML 标签。

如果您需要在 HTML 文档中显示动态数据，则每次数据更改时都需要进行大量工作来编辑 HTML。

使用 XML，数据可以存储在单独的 XML 文件中。通过这种方式，您可以专注于使用 HTML/CSS 进行显示和布局，并确保基础数据的更改不需要对 HTML 进行任何更改。

只需几行 JavaScript 代码，您就可以读取外部 XML 文件并更新网页的数据内容。

# wpf - WPF、Loaded 事件、IsLoaded 属性

> ID：10709170
> 
> 赞同：3
> 
> 时间：2012-05-22T19:53:02.640
> 
> 标签：wpf

如果我将处理程序附加到元素的 Loaded 事件（无论它是在 VS 设计器中还是在代码中），它会将 IsLoaded 属性设置为 true。

例如，我有一个带有两个 TabItem 的 TabControl。每个 TabItem 上都有一个按钮。第一个 TabItem 是默认项（显示我的窗口时选择）。第二个 TabItem 上的 Button 已附加 Loaded 事件。在这种情况下，第一个 TabItem 上的按钮将 IsLoaded 设置为 true，第二个 TabItem 上的按钮应设置为 false，但它设置为 true。

当我取消设置 Loaded 事件时，它按预期工作 - 第一个按钮 IsLoaded 为真，第二个按钮为假。

这是一个 wpf 错误还是我做错了什么？

**编辑：**

看一个例子。

此代码导致 btn2 的 IsLoaded 属性设置为 True（注意：btn2_Loaded 方法为空）。

XAML：

```
 <Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TabControl>
            <TabItem Header="Tab1">
                <Button x:Name="btn1" Click="btn1_Click" />
            </TabItem>

            <TabItem Header="Tab2">
                <Button x:Name="btn2" Loaded="btn2_Loaded" />
            </TabItem>
        </TabControl>
    </Grid>
</Window> 
```

C＃：

```
 private void btn1_Click(object sender, RoutedEventArgs e)
    {
        MessageBox.Show(this.btn2.IsLoaded.ToString());
    } 
```

启动应用程序，然后单击 btn1。

现在删除 Loaded 处理程序：

```
 <TabItem Header="Tab2">
                <Button x:Name="btn2" />
            </TabItem> 
```

再次启动应用程序并单击 btn1.

现在 IsLoaded 是假的！为什么会这样？附加事件处理程序会导致加载特定元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:02:26.150

这既不是 WPF 中的错误，也不是您做错了什么。[Object Lifetime Events](http://msdn.microsoft.com/en-us/library/ms754221.aspx)上的 MSDN 页面说

> Loaded 事件在最终渲染之前引发，但在布局系统计算出所有必要的渲染值之后。

您无法对何时调用 Loaded 做出任何更精确的假设。在您的情况下，我猜 WPF 会延迟加载不可见（即尚未渲染）的元素，*除非*附加了 Loaded 处理程序。这样做是免费的。

# asp.net - 会话劫持和会话固定

> ID：10709176
> 
> 赞同：0
> 
> 时间：2012-05-22T19:53:23.187
> 
> 标签：asp.net, session

我们的 asp.net 应用程序存在会话劫持和会话固定问题。我们也实施了 SSL。

1.. 我在 web.config 文件中添加了以下代码。

<----

```
<httpCookies httpOnlyCookies="true" requireSSL="true"   />

  <forms loginUrl="Homepage.aspx"
      protection="All"
      timeout="20"
      name=".ASPXAUTH"
      path="/"
      requireSSL="true" 
      slidingExpiration="true"
      /> 
```

--->

2...加密formsathuntication票并在用户被athunticated后添加到cookie中。

<---

FormsAuthenticationTicket tkt；

字符串cookiestr；

HttpCookie ck;

tkt = new FormsAuthenticationTicket(1, uname, DateTime.Now, DateTime.Now.AddMinutes(20),false, "你的自定义数据");

cookiesstr = FormsAuthentication.Encrypt(tkt);

ck = new HttpCookie(FormsAuthentication.FormsCookieName, cookiesstr); ck.Path = FormsAuthentication.FormsCookiePath;

Response.Cookies.Add(ck);

-->

3.. 我在注销页面和错误页面上删除会话变量并将空值传递给 ASP.NET_SessionID。

SessionHandler.EndSession();

```
 Session.RemoveAll();

    Session.Abandon();

    Response.Cookies.Add(new HttpCookie("ASP.NET_SessionId", ""));

    if (Request.Cookies["ASP.NET_SessionId"] != null)
    {
        Response.Cookies["ASP.NET_SessionId"].Value = string.Empty;
        Response.Cookies["ASP.NET_SessionId"].Expires = DateTime.Now.AddMonths(-20);
    }

    if (Request.Cookies["AuthToken"] != null)
    {
        Response.Cookies["AuthToken"].Value = string.Empty;
        Response.Cookies["AuthToken"].Expires = DateTime.Now.AddMonths(-20);
    }

    HttpCookie authcookie = Request.Cookies[FormsAuthentication.FormsCookieName];
    authcookie.Expires = DateTime.Now.AddDays(-1D);
    Response.Cookies.Add(authcookie);
    FormsAuthentication.SignOut(); 
```

还是问题没有解决。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:37:05.700

1.  您的问题是会话劫持还是*身份验证*劫持？
2.  您是否信任会话值而不验证身份？（请注意，会话和身份验证在 ASP.NET 中没有内在联系）。
3.  如果您实施了 SSL，为什么您的会话 cookie 仍设置为`requireSSL="false"`？
4.  研究最佳实践，自己看看哪里出了问题。例如 - [http://www.troyhunt.com/2010/07/owasp-top-10-for-net-developers-part-3.html](http://www.troyhunt.com/2010/07/owasp-top-10-for-net-developers-part-3.html)

详细说明第2点。

这里使用了两个 cookie，一个用于`Session`，另一个用于`FormsAuthentication`。FormsAuth cookie 可以识别用户，并且需要采取所有合理的步骤来保证这一点的安全。通常，要求 SSL 是一个很好的步骤（正如您在示例编辑中所应用的那样）。虽然会话 cookie 通常不会受到开发人员的密切关注，但取决于您使用它的方式，它可能同样敏感。*会话*固定窃取会话，*而不是*身份验证。

一个例子：

1.  UserA 登录，他们是管理员用户。他们收到一个 FormsAuth cookie 说明“这是 UserA”，他们可能还会收到一个*会话*cookie 说明“这个用户是管理员”。
2.  UserB 获取属于 UserA 的会话 cookie 的副本（如果会话 cookie 未清除，他们可能会通过拦截，或者甚至只是在 UserA 注销后位于同一台计算机上来实现​​此目的）。
3.  UserB 登录，他们是“只读”用户（不是管理员）。他们收到一个说明“这是 UserB”的 FormsAuth cookie，然后他们*注入*在步骤 2 中窃取的会话 cookie。这意味着他们有一个`FormsAuth`说明“这是 UserB”的`Session`cookie，以及一个说明“此用户是管理员”的 cookie。
4.  Presto，UserB 现在是管理员。

这里的问题（因为它与我最初的关注点列表的第 2 点有关）是服务器没有验证与其会话相关的用户身份。您可以尽最大努力尝试以某种方式将 Session 和 Forms 身份验证票证链接在一起，并确定您正在加密 (SSL)。或者，您可以停止在会话中存储敏感数据（或至少减少它）。当谈到我上面的“此用户是管理员”示例时，更好的实现是将 ASP.NET 角色和配置文件提供程序与成员资格提供程序结合使用。他们三个齐头并进，有*很多*例子可以说明如何利用它们来发挥自己的优势。

不过，这只是*一种可能*的调查方式，正如@JohnFx 正确指出的那样，在您期待一个好的答案之前，您确实需要一个集中的问题。在安全实施方面，重要的是要理解所涉及的概念，而不是仅仅在问题上抛出示例代码。到目前为止，您提供的示例代码看起来与讨论会话固定的 CodeProject 文章可疑地相似，但是您了解它要完成的工作吗？您知道它是否甚至适用于您遇到的问题吗？

# c++ - 连接（在 QT 项目中）不起作用

> ID：10709178
> 
> 赞同：1
> 
> 时间：2012-05-22T19:53:27.777
> 
> 标签：c++, qt, qthread, qtcpsocket, qtcpserver

我开始使用 QT 库创建我的第一个多线程应用程序。

按照关于 QTcpServer 和 QTcpSocket 的 qt 指南，我编写了一个服务器应用程序，它使用这个构造函数创建连接：

```
Connection::Connection(QObject *parent) : QTcpServer(parent)
{
    server = new QTcpServer();
    QString ipAddress;

    if (ipAddress.isEmpty())
        ipAddress = QHostAddress(QHostAddress::LocalHost).toString();

    if (!server->listen(QHostAddress(ipAddress),41500))
    {
        qDebug() << "Enable to start server";
        server->close();
        return;
    }

    connect(server,SIGNAL(newConnection()),this,SLOT(incomingConnection()));
} 
```

这是incomingConnection() 函数，它在每次新客户端尝试连接时创建一个新线程：

```
void Connection::incomingConnection()
{
    QTcpSocket *socket = new QTcpSocket();
    socket = this->nextPendingConnection();

    MyThreadClass *thread = new MyThreadClass(socket, server);
    qDebug() << "connection required by client";
    if (thread != 0)
    {
    connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));
    thread->start();
    }
    else
        qDebug() << "Error: Could not create server thread.";
} 
```

现在，这是 MyThreadClass：

```
MyThreadClass::MyThreadClass(QTcpSocket *socket, QTcpServer *parent) : QThread(parent)
{
    tcpSocket = new QTcpSocket();
    database = new Db();
    blockSize = 0;

    tcpSocket = socket;

    qDebug() << "creating new thread";
}

MyThreadClass::~MyThreadClass()
{
    database->~Db();
}

void MyThreadClass::run()
{
    qDebug() << "Thread created";
    connect(tcpSocket, SIGNAL(readyRead()), this, SLOT(dataAvailable()));
    exec();
}

void MyThreadClass::dataAvailable()
{
    qDebug() << "data available";
    QDataStream in(tcpSocket);
    in.setVersion(QDataStream::Qt_4_0);

    if (blockSize == 0) {
        if (tcpSocket->bytesAvailable() < (int)sizeof(qint16))
            return;
        in >> blockSize;
    }

    if (tcpSocket->bytesAvailable() < blockSize)
        return;

    QString string;
    in >> string;

    //[...]

 } 
```

代码编译正常，但是当我启动客户端（启动服务器后）时，服务器收到以下错误：

```
QObject::connect: Cannot connect (null)::readyRead() to QThread::dataAvailable() 
```

然后服务器无法接收客户端的数据。

有谁有想法吗？

提前感谢丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:10:54.523

```
socket = this->nextPendingConnection(); 
```

应该：

```
socket = server->nextPendingConnection(); 
```

因为您使用的是`server`成员而不是`this`活动成员`QTcpServer`，所以该类`Connection`甚至不应该继承自`QTcpServer`，而只能继承自`QObject`。

另外，您在滥用`QThread`. 如果使用 QtSql 模块，您应该阅读[Signals and slots across threads](http://qt-project.org/wiki/Threads_Events_QObjects#913fb94dd61f1a62fc809f8d842c3afa)，可能还有[Threads and the SQL Module 。](http://qt-project.org/doc/qt-4.8/threads-modules.html#threads-and-the-sql-module)`Db`

# mysql - HTML 字符集和 MySQL 字符集

> ID：10709180
> 
> 赞同：0
> 
> 时间：2012-05-22T19:53:30.017
> 
> 标签：mysql, html

哪个 HTML 字符集可以涵盖所有这些？我需要在 MySQL 中使用哪个字符集来导出然后导入它们？

> SAINT RAPHAEL ARNÁIZ BARÓN（西班牙语）
> 
> 圣特雷莎的孩子耶稣，处女，医生（法语）
> 
> M. Orsola (Giulia) Ledóchowska，宗教（东欧）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:21:28.913

为您的表和列使用 MySQL 的 UTF-8 字符集，并`SET NAMES UTF8`在使用您选择的脚本语言初始化 MySQL 连接后发送一条语句。确保您的脚本还发送一个 HTTP 标头，指示您的页面采用 UTF-8 格式，您应该一切顺利。您可能想阅读[这篇](http://www.w3.org/International/questions/qa-changing-encoding)文章，进一步阅读的链接看起来也不错。

在 PHP 中，要发送这个 HTTP 标头，您可以使用 `header("Content-Type: text/html; charset=UTF-8");`. `<head>`在HTML 页面中元素的顶部，您还可以添加`<meta charset="UTF-8">`(在 HTML5 中)，或`<meta http-equiv="Content-type" content="text/html;charset=UTF-8">`(在 HTML 4.01 或 HTML5 中；但您不能同时使用这两种方式并仍然获得有效的 HTML5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:14:55.317

在 MySQL 中，使用 UTF-8 字符集。这将允许您在 DBMS 中适当地表示各种各样的数据。如果您正确使用 mySQL 排序设置，MySql 也会很好地整理（排序）您的信息。

要将这些内容呈现为 HTML，您可能需要实体化除基本 7 位 ASCII 字符之外的字符。例如，查看描述大写 Ñ [http://www.fileformat.info/info/unicode/char/00D1/index.htm的 Unicode 字符的网页](http://www.fileformat.info/info/unicode/char/00D1/index.htm)

在 HTML 中，这由 & 磅符号 xd 1 分号表示

您的网络应用程序语言（PHP？Java？）具有在 UTF-8 字符串（存储在 DBMS 中）和实体化 html（用于在网络上显示）之间转换的内置函数。使用它们。

# php - 包含文件而不执行任何比类声明更多的东西

> ID：10709182
> 
> 赞同：2
> 
> 时间：2012-05-22T19:53:30.747
> 
> 标签：php, include

你能想到任何有效的方法（所以，`file_get_contents`+正则表达式+`eval`太重）包含文件而不执行除了类声明之外的任何东西？所以，只需执行如下代码：

```
class A {
  //Whatever
} 
```

并忽略任何其他陈述，如`echo`或其他......

我知道这与一种不好的做法有关，但我正在处理不属于我的文件并且我无法更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:59:34.897

最佳做法是将您的类放在单独的文件中。如果您有 PHP 5.1 或更高版本，您可以使用自动加载，因此它只会在您需要时包含文件/类。[spl_autoload_register](http://www.php.net/manual/en/function.spl-autoload-register.php)

# c# - 如何让 FxCop 与 Sonar 一起使用 C# 解决方案？

> ID：10709184
> 
> 赞同：1
> 
> 时间：2012-05-22T19:53:36.787
> 
> 标签：c#, static-analysis, fxcop, sonarqube

我目前正在尝试使用 FxCop 来分析我的解决方案在 Sonar 中生成的程序集，并且当 Sonar 调用 FxCop 扫描每个项目时收到以下消息：

```
INFO  No assembly to check with FxCop 
```

非常感谢任何有关纠正此问题的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T09:20:41.017

我们努力为每种语言提供示例项目。在您的情况下，您可以查看[https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/csharp](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/csharp)来比较您的配置并尝试找出缺少的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T16:55:57.667

问题是所有项目都没有构建到相同的输出目录，这已得到纠正。由于 FxCop 扫描二进制文件，因此必须构建所有项目才能使 FxCop 能够扫描。

# c# - 使用正则表达式验证 C# 中的输入格式

> ID：10709186
> 
> 赞同：2
> 
> 时间：2012-05-22T19:53:39.533
> 
> 标签：c#, regex, formatting

这是一个超级基本的问题（我今天脑死了）：

如何使用正则表达式验证输入，以查看：1）输入是否为某种形式 2）输入是否全部大写（仅将输入转换为大写对此不可行）

我想确保我的输入格式为 XX_XX。这是我所拥有的：

```
public bool IsKosher(string input)
{
    Regex r = new Regex(input);
    if(r.Matches([A-Z]_[A-Z]))
    {
        return true;
    }
    return false;     
} 
```

任何想法为什么它不编译？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:57:28.670

您缺少双引号，将参数放在错误的位置，并且不需要`if`声明：

```
public bool IsKosher(string input) {
    return Regex.IsMatch(input, "[A-Z]{2}_[A-Z]{2}");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:54:53.983

引号？缺少右括号？匹配不返回布尔值？交换字符串参数？所有这些都会导致您的代码无法编译。

虽然如果它是“XX_XX”你可能想要这个：

```
var r = new Regex("[A-Z]{2}_[A-Z]{2}");
return r.IsMatch(input); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:55:59.547

您必须将 [AZ]_[AZ] 放在引号之间，如下所示：

```
if(r.Matches("[A-Z]_[A-Z]") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T19:56:11.030

1.  引号。
2.  两边的两个字符`_`。
3.  构造`Regex`函数采用模式；该`Matches`方法采用字符串进行搜索。
4.  该`Matches`方法返回一个`MatchCollection`. `IsMatch`返回一个布尔值。

像这样：

```
if (Regex.IsMatch(input, "[A-Z]{2}_[A-Z]{2}") 
```

# c# - 使用已安装的浏览器之一在 winforms 中渲染页面？

> ID：10709188
> 
> 赞同：1
> 
> 时间：2012-05-22T19:53:49.757
> 
> 标签：c#, .net-4.0, browser

我想为 html、css 等制作自己的“编辑器”，一方面我有代码，另一方面它在浏览器上的样子。

我知道在 c# 中，我们有`System.Windows.Forms.WebBrowser()`可以为我做到这一点的便利，但我希望能够让它像使用 ie 或 ff 或 chrome 浏览器一样呈现。

*   **我怎么能以某种方式呈现页面，就好像它正在使用其中之一（考虑到它们已安装并在计算机中可用，但要在 c# winforms 上打开）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:56:21.023

您将不得不使用其他浏览器使用的渲染引擎。例如，Chrome 和 Safari 使用[Webkit](http://www.webkit.org/)。让它适用于 IE6、7 等旧版浏览器将更加困难，因为它们没有发布他们的布局引擎。IE9 有一项功能，可以让您将页面呈现为旧版浏览器，但我不确定您是否可以使用 WebBrowser 控件使用该功能。

# c++ - 理解 C++ VK_ 热键组合值

> ID：10709189
> 
> 赞同：2
> 
> 时间：2012-05-22T19:53:50.673
> 
> 标签：c++, windows, hotkeys, windows-shell

我一直在玩 IShellLink 界面，并且对热键组合的映射方式感到困惑。

仅应用单个热键时，返回值对应于文档中的虚拟键代码；例如**F5** == ***0x74***

但是，当使用组合时，会返回一个我无法破译的未记录值；例如**CTRL + ALT + A** == ***0x641***

组合多个虚拟键码用什么操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T20:23:08.090

这在以下文档中进行了解释[`IShellLink::GetHotkey`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774926.aspx)：

> 虚拟键码在低字节，修饰标志在高字节。修饰符标志可以是以下值的组合：
> 
> *   HOTKEYF_ALT（ALT键）
> *   HOTKEYF_CONTROL（CTRL 键）
> *   HOTKEYF_EXT（扩展键）
> *   HOTKEYF_SHIFT（SHIFT 键）

这些标志是这样定义的：

```
#define HOTKEYF_SHIFT           0x01
#define HOTKEYF_CONTROL         0x02
#define HOTKEYF_ALT             0x04
#define HOTKEYF_EXT             0x08 
```

因此，当您将`CTRL`and`ALT`标志带到单词的高位字节并将它们组合起来时，您会得到`0x0200 | 0x0400`which equals `0x0600`。`A`将其与is的虚拟键代码结合起来，`0x41`您的魔法常数为`0x0641`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:24:24.363

来自MSDN 上的[IShellLink::GetHotkey](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774926%28v=vs.85%29.aspx)：

> 键盘快捷键的地址。虚拟键码在低字节，修饰标志在高字节。修饰符标志可以是以下值的组合。
> 
> 热键F_ALT
> 
> 热键F_CONTROL
> 
> 热键F_EXT
> 
> 热键F_SHIFT

您可以使用传统的[LOBYTE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632658%28v=vs.85%29.aspx)、 HIBYTE 和 MAKEWORD 宏来读/写...

# javascript - jQuery 幻灯片切换（）

> ID：10709190
> 
> 赞同：-1
> 
> 时间：2012-05-22T19:53:58.893
> 
> 标签：javascript, jquery

我有车库门图像。我想当点击按钮图像应该向上移动。但问题是当我点击按钮图像时不要移动，而是从图像底部滑动隐藏。这是我的代码

```
<script type="text/javascript">
$(document).ready(function(){
  $(".open").click(function(){
    $(".gate").slideToggle(3000)
  });
});
</script>

<body>

<div class="main">
<a class="open" >Home page</a>
<div class="gate"></div>
</main>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:08:15.040

您不应该使用[.slideToggle()](http://api.jquery.com/slideToggle/)，它的作用是通过设置高度值的动画来隐藏/显示元素。

我已经准备好并使用[.animate()](http://api.jquery.com/animate/)为大门打开动画：

看到这个[工作小提琴！](http://jsfiddle.net/zuul/bLvWe/)

**HTML**

```
<body>
    <div class="main">
        <a class="open">Home page</a>
        <div class="gate"> </div>
    </div>
</body> 
```

**查询**

```
$(document).ready(function(){
  $(".open").click(function(){
      $(".gate").animate({
          "top" : "-=" + $(".gate").outerHeight(true)
      }, 3000);
  });
}); 
```

动画结束的位置，取决于你的最终目标，以及你应用的 CSS！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:55:43.593

如果你想移动图像，你应该使用 .animate() 而不是 .slideToggle()。.slideToggle() 函数显示或隐藏你的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:02:26.173

幻灯片不是正确的答案。幻灯片是隐藏/淡入淡出效果而不是动画效果。要获得您正在寻找的效果，您需要为相关元素的 css 属性设置动画。如果您正在寻找稍微向下移动的元素，则需要为将元素向下移动的属性设置动画。就像是：

```
 $(document).ready(function(){
        $(".open").click(function(){
              $(".gate").animate({
                    marginTop : '-=30px'
              });
        });
  }); 
```

您可能还需要考虑绝对定位和使用 top 属性。或者css3翻译。

# mysql - 我必须在 Coldfusion 中限定查询输出吗？

> ID：10709193
> 
> 赞同：3
> 
> 时间：2012-05-22T19:54:00.787
> 
> 标签：mysql, coldfusion, scope

如果我在 Coldfusion 中运行数据库查询/存储过程，那么引用从查询返回的字段的正确方法是什么？

```
<cfstoredproc procedure="proc_select_extern" datasource="stokkers">
    <cfprocparam type="in" value="#Session.Extern#" cfsqltype="cf_sql_varchar" maxlength="13">
    <cfprocresult name="extern">
</cfstoredproc>
<cfoutput query="extern">
   <cfset variables.some = extern.foo>
   OR 
   <cfset variables.some = foo>
</cfouput> 
```

假设**extern**包括 foo、bar 和 foobar。是否允许并且更好地编写：

```
 extern.foo;
 extern.bar;
 extern.foobar; 
```

因为我正在浏览一个页面，并且经常发现这些“裸”变量有点令人困惑：

```
 foo;
 bar;
 foobar; 
```

有很多关于范围和正确范围的信息，但我在查询输出中没有找到任何信息。

感谢您的澄清！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T20:03:06.467

有些人会告诉您，始终确定范围是一种很好的习惯做法，因为它可以防止您在真正重要的地方犯下范围错误。

就我个人而言，我喜欢将 cfoutput 与查询一起使用而不必限定范围的方法——它相当于其他语言中的“WITH”。由于查询将始终在查询驱动的 cfoutput 标记内的表单和 url 范围之前进行评估，因此在该实例中离开范围没有任何问题。请记住，在 CFC 中，“参数”和本地范围都是抢占式的——但这不是查询驱动的 cfoutput 的最佳位置——它是为方便*显示*而设计（巧妙设计）的。

但同样......其他人会告诉你不同的（也有一些激情:)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T10:25:20.857

如果您没有完全确定变量的范围，则存在范围问题。

你会得到人们说你不会遇到足以证明额外输入的问题，而且它不是 DRY，但是因为 ColdFusion 有一个[范围评估顺序](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7fdf.html)，如果你有想要在任何上下文中工作的代码，它是必需的。

下面的“查询循环”是指一个`cfloop`或`cfoutput`带有一个`query`参数。

所以你*可以*`#columnname#`在查询循环中使用。

您*可以* `#queryName.columnName#`在查询循环内部或外部。

你*应该* `#cfScope.queryName.columnName#`在所有情况下。

这是一个出错的例子。希望您永远不必处理这样的代码，但这有助于指出 ColdFusion 广泛的[范围评估](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7fdf.html)存在的问题。

```
<cfset testcfc = new Test().scopeTest()> 
```

和

```
<cfcomponent output="false">

    <cffunction name="scopeTest" access="public" output="true" returntype="void">
        <cfargument name="Query" type="query" required="false" default="#QueryNew("xarguments")#">
        <cfargument name="xlocal" type="string" required="false" default="This is not from a query; Arguments scope.">

        <cfset QueryAddRow(Arguments.Query, 1)>
        <cfset Arguments.Query["xarguments"][1] = "this is the arguments scope query">
        <cfset local.Query = QueryNew("xlocal")>
        <cfset QueryAddRow(local.Query, 1)>
        <cfset local.Query["xlocal"][1] = "this is the local scope query">
        <cfset Variables.Query = QueryNew("xVariables")>
        <cfset QueryAddRow(Variables.Query, 1)>
        <cfset Variables.Query["xVariables"][1] = "this is the variables scope query">

        <cfset local.xlocal = "This is not from a query; local scope.">

        <cfloop query="Query">
            <cfoutput>#xlocal#</cfoutput>
        </cfloop>

        <cfdump var="#Arguments#" label="Arguments">
        <cfdump var="#local#" label="local">
        <cfdump var="#variables#" label="Variables">
        <cfabort>
    </cffunction>

</cfcomponent> 
```

输出的结果是*这不是来自查询；参数范围。* 与[范围评估文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec09af4-7fdf.html)的内容以及其他人希望您相信的内容相反。

正如其他人所建议的那样，您可以将输出行更改为读取`<cfoutput>#Query.xlocal#</cfoutput>`，但这也无济于事。相反，您会被告知该列不存在。将其更改为`<cfoutput>#Query.xarguments#</cfoutput>`将表明它使用的是`Arguments`版本`Query`而不是`local`or `Variables`。

那么怎么样：

```
 <cfloop query="local.Query">
            <cfoutput>#xlocal#</cfoutput>
        </cfloop> 
```

没有。仍然不是想要的结果。好的，那么如何将查询名称添加到输出中：

```
 <cfloop query="local.Query">
            <cfoutput>#Query.xlocal#</cfoutput>
        </cfloop> 
```

没有。仍然不是想要的结果。如果您想确保获得正确的结果，您必须全面了解所有内容。

```
 <cfloop query="local.Query">
            <cfoutput>#local.Query.xlocal#</cfoutput>
        </cfloop> 
```

这比任何人都想做的要多得多，但如果你想确保代码中没有任何令人讨厌的错误，这是必需的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T20:10:01.567

我是那些会告诉你你应该把所有东西都放在范围内的人之一。在阅读您自己的代码和其他代码时，它确实很有帮助。我说“毫无疑问，把它找出来！”

下面是我通常如何进行查询然后输出结果的示例。

```
<cfscript>
Q = MyCFC.getCustomers();
if (! isQuery(Q) || Q.RecordCount == 0) {
    writeOutput("No records found.");
}  else {
    for (i = 1; i lte Q.RecordCount; i++) {
        VARIABLES.Customer = "#Q.FirstName[i]# #Q.LastName[i]#";
        writeOutput(VARIABLES.Customer);
        writeOutput("<br>");
    }
}
</cfscript> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T04:09:33.687

这是一个关于何时有必要以及何时对范围有价值的很好的讨论。

如果只是为了**清晰**地进出 CFC，我会将我的两便士投入到***始终确定范围的方向上。***如果必须， var q = ''; 然后只引用 q 如果你很懒并且相信 DRY 包含作用域，那么你就有一个局部作用域变量。

 **我无法告诉你我处理过的系统和页面的数量是如此之差，以至于我不得不调试以找出来自哪里的东西。特别是在涉及分组依据和辅助数据的复杂报告中；它会变得非常混乱。

一个令人烦恼的地方是我看到人们使用技巧（有意或无意），他们默认一个没有作用域的参数，将分配给“变量”范围，然后在他们的代码中，他们将混合表单和 URL，期望一个覆盖另一个和/或没有范围的变量范围值，因此输出总是会找到该值的默认变量版本......当然，该代码的行为不像他们预期的那样......哎呀！

即使在带有查询属性的 cfquery/cfoutput/cfloop 中，我也建议明确范围。此外，没有理由不能在 cfc/对象中使用 cfouput/cfloop。

当然，对于非常简单的输出，有时我可能会在 CFC 之外删除“变量”范围，以获得页面中没有混合其他范围的非常基本的输出，但我发现这种情况很少见。

对我来说，始终养成正确界定价值观的习惯会更简单。

IE：

```
<cfprocresult name="Local.qExtern"> 
```

接着：

```
<cfoutput query='Local.qExtern'> 
    #Local.qExtern.szNameFirst# 
    #Local.qExtern.szNameLast# 
</cfoutput> 
```

总而言之，除了最简单的情况外，我提出了始终倾向于范围界定的 3 个原因：

**清晰度和维护**

对于下一个程序员和六个月后的你自己来说，看一点代码的清晰度比你通过不限定范围节省的几次击键更有价值。如果您的代码比在循环查询时简单地转储查询更复杂，并且其他逻辑或变量/值散布在您的输出中，则尤其如此。

**出血和锁定**

此外，当在 CFC 中并使用范围不正确的 var 时，您肯定会冒变量出血的风险，尤其是在默认范围进入受保护范围而不是本地范围的情况下。当多个方法*和/或单例方法访问一个公共（受保护的）范围并且需要将该变量从也尝试使用该名称空间的等待方法/请求中锁定时，我还看到了严重的性能下降（哦，是的，并且流血的）。

**速度：**

最后，我怀疑，就像在 JS 和其他语言中一样，CF 引擎比无范围变量更快地找到范围变量，即使在默认范围内也是如此。

*脚注：我想澄清发生这种情况的情况。范围不佳的单例（例如，缓存到应用程序的实用程序类）最有可能导致意外的受保护范围变量锁定，这可能会减慢您的系统/请求队列。在同一个请求中使用同一个变量的多个方法是这样的情况：一个非可变变量被视为一个局部范围的变量（递归函数，在同一个对象中调用其他辅助方法的方法）并且通常会导致出血（意外重用/操作相同的变量导致意外结果）。**

# django - Django South add_inrospection_rules 用于 django-private-files 字段，可调用作为字段属性的值

> ID：10709195
> 
> 赞同：0
> 
> 时间：2012-05-22T19:54:07.993
> 
> 标签：django, django-south

我的项目使用 South，我想为我的一些应用程序使用[django-private-files](https://bitbucket.org/vvangelovski/django-private-files/src)字段。private_files 不提供自省规则，所以我在我的应用程序的 fields.py 文件中写了一些。通常这些是非常直接的，但我从来不需要为具有属性的自定义字段编写规则，该属性的值是带有参数的可调用对象。这就是我得到的：

```
# myapp/models.py
from django.db import models
import fields # to add south introspection rules
from private_files import PrivateFileField

class Image(models.Model):
    description = models.CharField("description", max_length = 200)
    image = PrivateFileField("image file", upload_to = 'uploads') 
```

-

```
# myapp/fields.py
from private_files import PrivateFileField
"""
South introspection rules
"""

from south.modelsinspector import add_introspection_rules
rules = [
    (
        (PrivateFileField,),
        [],
        {
            "condition": ["condition", {}],
            "attachment" : ["attachment", {"default": True}],
        },
    )]

add_introspection_rules(
    rules,
    ["^private_files\.models\.fields\.PrivateFileField"]) 
```

这些规则适用于[PrivateFileField](https://bitbucket.org/vvangelovski/django-private-files/src/f2cfbbb3b878/private_files/models/fields.py#cl-36)

当我跑步时，`./manage.py schemamigration --initial myapp`我得到`TypeError: is_user_authenticated() takes exactly 2 arguments (0 given)`

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:29:10.367

根据 Andrew Godwin 的说法：“South 的内省系统不是为第二级调用能力而设计的。”（[参考](https://groups.google.com/d/topic/south-users/XO5kk5iClOQ/discussion)）这意味着此时解决此问题的唯一方法是省略`condition`参数规则并告诉**south**该字段是确定的。所以：

```
# myapp/fields.py
from private_files import PrivateFileField
"""
South introspection rules
"""

from south.modelsinspector import add_introspection_rules
rules = [
    (
        (PrivateFileField,),
        [],
        {
            "attachment" : ["attachment", {"default": True}],
        },
    )]

add_introspection_rules(
    rules,
    ["^private_files\.models\.fields\.PrivateFileField"]) 
```

# triggers - 如何从触发器运行可执行程序？

> ID：10709217
> 
> 赞同：1
> 
> 时间：2012-05-22T19:56:03.877
> 
> 标签：triggers, odbc, exe, advantage-database-server

如何创建触发器以在 Advantage Database Server 中的表`.exe`上执行文件`UPDATE`或`INSERT`为表执行文件？

我是 ADS 的新手，我真的找不到太多关于我想要的文档。他们网站的支持部分是一个迷宫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:01:29.033

您是否尝试过联机帮助文件？

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/index.html](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/index.html)

尤其：

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_triggers.htm](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_triggers.htm)

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_trigger_containers.htm](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_trigger_containers.htm)

> Advantage 触发器可以在多种容器中实现：SQL 脚本、.NET 程序集、Win32 DLL、COM 对象或 Linux 共享对象。

要创建这样的触发器，您可以使用 Advantage Data Architect (ARC32)。

右键单击表格，然后单击“触发器”。

# mysql - 在 MySQL 中通过逗号值显示行

> ID：10709220
> 
> 赞同：0
> 
> 时间：2012-05-22T19:56:08.993
> 
> 标签：mysql

我有一个这样的逗号分隔列表保存在 mysql 表中：

```
-----------------
|id | list      |
-----------------
| 4 |12,45,65,4 | 
```

“列表”中的每个数字都对应另一个表中的 ID。

有没有办法让我可以根据这些 ID 查询另一个表并显示与“列表”中的数字关联的那些行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:00:28.287

您当前的架构没有任何有效的方法。正确且最有效的方法是更改​​架构以保存多行，如下所示：

```
-----------------
|id | list      |
-----------------
| 4 |    12     |
| 4 |    45     |
| 4 |    65     |
| 4 |     4     | 
```

然后，您使用`JOIN`操作连接`4`到另一个表中的每个相关行。

这称为数据库规范化，是数据库设计中非常重要的主题。建立关系数据库系统就是为了以有效的方式处理这类问题。

# c++ - 多线程缓冲区 C++

> ID：10709229
> 
> 赞同：-1
> 
> 时间：2012-05-22T19:56:33.570
> 
> 标签：c++, multithreading, buffer

我有一个缓冲区可以从套接字读取数据，但是我有一个问题，超过 3 个线程想要访问他，我怎样才能为它们创建多线程缓冲区？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:15:07.017

这完全取决于线程期望从套接字获得什么。来自套接字的数据不太可能在三个线程的读取之间被打乱，因此您需要一些规模更大的同步，而不仅仅是确保每个线程可以从套接字中读取字节而不干扰其他线程' 做同样的事情的能力。

那么线程应该如何同步呢？他们是否独立地将记录从套接字中拉出？他们都应该读取所​​有数据吗？还有什么？

如果他们独立地从套接字中提取记录，您应该简单地让一个线程从套接字中读取记录，构造某种记录对象，并将这些对象放在线程安全队列中以供 3 个线程访问。

如果所有线程都应该读取相同的数据，那么您有一个缓冲区，每个线程在缓冲区中注册，并且缓冲区跟踪每个读取器的位置。然后缓冲区将保留数据，直到所有线程都读取它，一旦所有线程都读取它，它将擦除数据并用来自套接字的更多数据填充该空间。

# c# - 带有 RIA 的 Silverlight 4 - 将连接的表字段绑定到网格

> ID：10709231
> 
> 赞同：0
> 
> 时间：2012-05-22T19:56:40.403
> 
> 标签：c#, wpf, silverlight, silverlight-4.0, ria

我有 2 个具有 1-1 关系的表我正在尝试使用 .Include() for LINQ 尝试将子表实体传递给属性，以便我可以将子表字段以及字段绑定到网格从父表。最初它像这样工作得很好，我能够绑定到网格，但只能从 BUGroupBuildings 表中获取结果。我还需要绑定到 vwBuisnessUnits 表中的一个字段。

```
 public IQueryable<BUGroupBuilding> GetBusinessUnitsBasedOnGroupID(int i)
    {
        var result = from d in this.ObjectContext.BUGroupBuildings
                     join b in this.ObjectContext.vwBusinessUnits on d.BU equals b.BU
                     where d.BUGroupID == i
                     orderby d.BU ascending
                     select d;

        return result;

    } 
```

当我切换到使用 Include[带回子表字段](https://stackoverflow.com/questions/3799684/binding-parent-and-child-data-into-datagrid-in-ria-services-for-silverlight-4)时，出现错误

```
 public IQueryable<BUGroupBuilding> GetBusinessUnitsBasedOnGroupID(int i)
    {
        var result = from d in this.ObjectContext.BUGroupBuildings
                     .Include("vwBuisnessUnits")
                     select d;
        result = result.Where(w => w.BUGroupID == i).OrderBy(o => o.vwBusinessUnit.BU);

        return result;

    } 
```

错误：

> 查询“GetBusinessUnitsBasedOnGroupID”的加载操作失败。指定的包含路径无效。EntityType 'EQUITYDWModel.BUGroupBuilding' 未声明名为 'vwBuisnessUnits' 的导航属性

这是我的实体 ![在此处输入图像描述](../Images/49c0d15f497977e5b9df3d2012bdd75f.png)

我在元数据中添加了必要的 [Include]。

```
 [MetadataTypeAttribute(typeof(BUGroupBuilding.BUGroupBuildingMetadata))]
public partial class BUGroupBuilding
{

    internal sealed class BUGroupBuildingMetadata
    {

        // Metadata classes are not meant to be instantiated.
        private BUGroupBuildingMetadata()
        {
        }

        public string BU { get; set; }
        [Include]
        public BUGroup BUGroup { get; set; }

        public int BUGroupBuildingsID { get; set; }

        public Nullable<int> BUGroupID { get; set; }
        [Include]
        public vwBusinessUnit vwBusinessUnit { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:53:36.797

您是从 db 生成 EntityModel 还是手动创建它？您是否手动创建元数据类？

也许有些是错误的。应该在客户端（Web.g.cs 文件）上创建一个导航属性，如下所示：

```
/// <summary>
        /// Gets or sets the associated <see cref="tblCustomer"/> entity.
        /// </summary>
        [Association("tblCustomer_tblInvoice", "uiCustomerId", "Id", IsForeignKey=true)]
        [XmlIgnore()]
        public tblCustomer tblCustomer
        {
            get
            {
                if ((this._tblCustomer == null))
                {
                    this._tblCustomer = new EntityRef<tblCustomer>(this, "tblCustomer", this.FiltertblCustomer);
                }
                return this._tblCustomer.Entity;
            }
            set
            {
                tblCustomer previous = this.tblCustomer;
                if ((previous != value))
                {
                    this.ValidateProperty("tblCustomer", value);
                    if ((previous != null))
                    {
                        this._tblCustomer.Entity = null;
                        previous.tblInvoices.Remove(this);
                    }
                    if ((value != null))
                    {
                        this.uiCustomerId = value.Id;
                    }
                    else
                    {
                        this.uiCustomerId = default(Guid);
                    }
                    this._tblCustomer.Entity = value;
                    if ((value != null))
                    {
                        value.tblInvoices.Add(this);
                    }
                    this.RaisePropertyChanged("tblCustomer");
                }
            }
        } 
```

请检查实体模型和关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T17:26:34.803

啊。我找到了解决我的问题的方法。以为我会与社区分享。事实证明，当我在 2 个实体（在我的情况下是视图和表）之间有自定义关系时，我必须在 linq 查询中进行连接和 Inlcude。在模型中定义关系时，它不需要显式连接。

```
 public IQueryable<BUGroupBuilding> GetBusinessUnitsBasedOnGroupID(int i)
    {
        var result = from d in this.ObjectContext.BUGroupBuildings
                     join b in this.ObjectContext.vwBusinessUnits on d.BU equals b.BU
                     where d.BUGroupID == i
                     orderby d.BU ascending
                     select d;

        var r2 = from d2 in ((ObjectQuery<BUGroupBuilding>)result)
                 .Include("vwBusinessUnit")
                 select d2;

        return r2;            
    } 
```

# database - 创建多对多关系并给每个关系一个对象

> ID：10709232
> 
> 赞同：0
> 
> 时间：2012-05-22T19:56:42.697
> 
> 标签：database, sql-server-2008, entity-framework, many-to-many

我正在编写查询以在 SQL Server 2008 R2 中创建数据库。我计划在 mvc3 应用程序中将它与实体框架一起使用

我有用户、游戏和高分。我想要做的是：

我想在用户和游戏之间建立多对多的关系。

每个用户可以有多个游戏，每个游戏可以有多个用户。

每个关系用户游戏有 1 个高分。

到目前为止，我创建了用户、游戏、高分表：

```
CREATE TABLE Users
(
    UserId INT IDENTITY(1,1),
    FirstName VARCHAR(64) NOT NULL,
    LastName VARCHAR(64) NOT NULL,
    Email VARCHAR(200) NOT NULL,
    CreatedDate DateTime NULL,
    PhoneNumber VARCHAR(32) NULL,
    Password VARCHAR(64),
    CONSTRAINT pk_users_userid PRIMARY KEY(UserId)
)
CREATE TABLE Games
(
    GameId INT IDENTITY(1,1),
    Url VARCHAR(64) NOT NULL,
    CONSTRAINT pk_gamess_gameid PRIMARY KEY(GameId)
)
CREATE TABLE Highscores
(
    HighscoreId INT IDENTITY(1,1),
    Value INT NOT NULL,
    CONSTRAINT pk_surveyors_surveyorid PRIMARY KEY(HighscoreId)
) 
```

创建多对多用户游戏关系并给每个关系一个高分的最佳方法是什么？我应该创建第四张表来保存关系吗？如果我这样做，我将能够在 MVC3 应用程序中使用带有实体框架的数据库，还是会使它复杂化？

谢谢

附加说明：我计划在 MVC 3 Web 应用程序中将此数据库与实体框架一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:42:25.063

```
CREATE TABLE Users (
     UserId INT IDENTITY(1,1),
     FirstName VARCHAR(64) NOT NULL,
     LastName VARCHAR(64) NOT NULL,
     Email VARCHAR(200) NOT NULL,
     CreatedDate DateTime NULL,
     PhoneNumber VARCHAR(32) NULL,
     Password VARCHAR(64),
     CONSTRAINT pk_users_userid PRIMARY KEY(UserId)
)

CREATE TABLE Games (
   GameId INT IDENTITY(1,1),
   Url VARCHAR(64) NOT NULL,
   CONSTRAINT pk_gamess_gameid PRIMARY KEY(GameId)
)

CREATE TABLE Highscores (
   HighscoreId INT IDENTITY(1,1),
   UserID Int,
   GameID Int,
   Value INT NOT NULL,
   CONSTRAINT pk_surveyors_surveyorid PRIMARY KEY(HighscoreId)
) 

ALTER TABLE [dbo].[Highscores]  ADD  CONSTRAINT [FK_Highscores_Games] FOREIGN KEY([GameID])
ALTER TABLE [dbo].[Highscores]  ADD  CONSTRAINT [FK_Highscores_Users] FOREIGN KEY([UserID]) 
```

# android - Flurry 和 Google Analytics 用户位置

> ID：10709236
> 
> 赞同：2
> 
> 时间：2012-05-22T19:56:52.713
> 
> 标签：android, google-analytics, location, flurry

我目前正在开发一款 Android 游戏，并希望实现分析。我看到 Flurry 和 Google Analytics 都提供了跟踪用户位置的能力。我一直在玩 Flurry，发现用户的位置是基于大陆的（我想除非我添加访问 GPS 的权限，否则用户不喜欢）。我想知道 Google Analytics 是否可以在不授予访问 GPS 权限的情况下为我提供更精确的用户位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:28:00.057

如果没有 GPS，在移动设备上确定位置的挑战在于它取决于设备的连接方式。如果设备通过移动网络（3G、4G）连接，则网络流量将通过某些移动运营商网关流出，并且源 IP 地址可能指向实际用户的一个**非常不同且非常错误的位置**（许多分析服务不正确）。如果设备通过 WiFi 连接，则源 IP 地址可以可靠地用于识别城域位置（至少与固定宽带连接一样可靠）。

在[Localytics](http://www.localytics.com)（我在那里工作），我们首先确定设备的连接方式。如果通过移动网络，则仅将位置报告到国家级。但如果它是通过 WiFi 连接的，那么我们会将位置报告到地区或都会区——这可以让您更好地了解用户所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:42:01.250

如果您只是 ping 启用了 Google Analytics 的网页/服务器，那么是的，您至少应该能够获得一个 IP 地址位置，即使它错过了 400 英里的标记（就像我在手机上尝试它时那样） ）。

但是 ping 网页必须有充分的理由，用户通常不喜欢无用的权限或无用的流量。例如，在您的情况下，您可以实现一个全局记分牌，可以是您自己制作的，也可以是您通过开放意图调用的，或者您作为 OpenFeint 之类的库添加到您的 apk 中的一个。

您甚至可以要求用户在记分牌上输入他们的用户名时手动输入他们的位置，或者更好地实现 Facebook Connect 之类的功能来添加社交功能和添加社交记分牌。

# ios - _CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer 的未定义符号

> ID：10709240
> 
> 赞同：2
> 
> 时间：2012-05-22T19:57:14.517
> 
> 标签：ios, audio

我有这段代码试图用来捕获音频数据。但是编译器抱怨`CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer`

```
 -(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
        AudioBufferList audioBufferList;
        NSMutableData *data= [[NSMutableData alloc] init];
        CMBlockBufferRef blockBuffer;
        CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(sampleBuffer, NULL, &audioBufferList, sizeof(audioBufferList), NULL, NULL, 0, &blockBuffer);

        for (int y = 0; y < audioBufferList.mNumberBuffers; y++) {
            AudioBuffer audioBuffer = audioBufferList.mBuffers[y];
            Float32 *frame = (Float32*)audioBuffer.mData;

            [data appendBytes:frame length:audioBuffer.mDataByteSize];
        }
    CFRelease(blockBuffer);
    blockBuffer=NULL;
    [data release];
} 
```

错误：

> 架构 armv7 的未定义符号：
> “_CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer”，引用自：-[MicCommunicator captureOutput:didOutputSampleBuffer:fromConnection:] in MicCommunicator.o ld：未找到架构 armv7 的符号 clang：错误：链接器命令失败，退出代码 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:04:41.557

链接器找不到符号表示包含该符号的库/框架未列为构建目标的依赖项。在 Xcode 中，选择您的目标，转到“Build Phases”，打开“Link Binary with Libraries”并添加 CoreMedia。

# jquery - 如何从 JQuery getJSON 中读取数据

> ID：10709241
> 
> 赞同：2
> 
> 时间：2012-05-22T19:57:15.527
> 
> 标签：jquery, json

我在 getJSON 上苦苦挣扎。我有一个简单的 StockWatcher 应用程序，它以 JSON 格式返回数据

```
http://localhost:8080/StockWatcherServer/stockwatcher/stockPrices?q=ABC+DEF+PQR 
```

输出：

```
({
    "stocks": [{
        "symbol": "ABC",
        "price": 80.11611442288577,
        "change": 1.4332410131550721
    }, {
        "symbol": "DEF",
        "price": 89.47611015580729,
        "change": -1.469336678470048
    }, {
        "symbol": "PQR",
        "price": 99.60017237722221,
        "change": -1.3303545392913447
    }]
}) 
```

当我使用一个简单的 Javascript 函数来读取这个时，我得到一个错误（.error、.complete 和 .second complete）

我已经使用 Firebug 对此进行了调试，我可以看到我可以检索该对象，但我看到了一个 XML 错误

> XML 解析错误：语法错误位置：moz-nullprincipal：{0daef08f-94bc-4bea-879f-6456e8175e38} 第 1 行，第 1 列：

```
({"stocks": [ ^ 
```

这是Javascript。

```
<script type="text/javascript">
$(document).ready(function(){
var url='http://localhost:8080/StockWatcherServer/stockwatcher/stockPrices?q=';
var query;
    $('button').click(function(){
        query=$("#query").val();
        // Assign handlers immediately after making the request,
        // and remember the jqxhr object for this request    
        var jqxhr = $.getJSON(url, function(data) {
            var obj = $.parseJSON(data);
            $.each(obj,function(i,item){
                $("#results").append('Title:'+item.symbol+' ==  Price:'+item.price+'</p>');
            });
        })
        .success(function(data) { alert("second success"); })
        .error(function(data) { alert("error"); })
        .complete(function(data) { alert("complete"); });
        // perform other work here ...

        // Set another completion function for the request above
        jqxhr.complete(function(){ alert("second complete"); });       
    });
});
</script> 
```

我已经尝试了各种调用 parseJSON 而没有 parseJSON 的选项，但似乎它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:18:09.200

我认为您正在寻找更像这样的东西...尝试：

```
$(document).ready(function(){
var url='http://localhost:8080/StockWatcherServer/stockwatcher/stockPrices?q=';
var query;
    $('button').click(function(){
        query=$("#query").val();

        // Assign handlers immediately after making the request,
        // and remember the jqxhr object for this request    
        $.ajax({
        url : url,
        type: "GET",
        dataType: "json",
        success: function(data) {
            $.each(data.stocks,function(i,item){
                $("#results").append('Title:'+item.symbol+' ==  Price:'+item.price+'</p>');
            });
        },
        error: function(data) { alert("error"); },
        });

        // perform other work here ...
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:02:14.233

如果您在原始 JSON 中使用“（”和“）”，请尝试以下操作：

```
{
    "stocks": [
        {
            "symbol": "ABC",
            "price": 80.11611442288577,
            "change": 1.4332410131550721
        },
        {
            "symbol": "DEF",
            "price": 89.47611015580729,
            "change": -1.469336678470048
        },
        {
            "symbol": "PQR",
            "price": 99.60017237722221,
            "change": -1.3303545392913447
        }
    ]
} 
```

# javascript - SlickGrid ScrollIntoView 与 DataView

> ID：10709242
> 
> 赞同：0
> 
> 时间：2012-05-22T19:57:16.757
> 
> 标签：javascript, slickgrid, js-scrollintoview

我正在使用`Slickgrid`并正在查看以下示例：

[http://mleibman.github.com/SlickGrid/examples/example14-highlighting.html](http://mleibman.github.com/SlickGrid/examples/example14-highlighting.html)

它利用了该`scrollIntoView()`功能。

但是，该示例不使用`DataView`.

有人知道如何在使用 ScrollIntoView 的网格中使用 ScrollIntoView 函数`DataView`吗？

代码示例将不胜感激。

谢谢

# eclipse - 有没有办法在 FDT 5+ 上对 FMS .asc 文件使用代码完成？

> ID：10709246
> 
> 赞同：0
> 
> 时间：2012-05-22T19:57:35.900
> 
> 标签：eclipse, actionscript-3, flash, flash-media-server, fdt

我知道在旧版本的 Flash Builder 上是可能的，但是在 FDT 上拥有它会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:29:41.020

目前 FDT 不支持 .ASC 文件。

# php - 如何在codeigniter中自动加载js库

> ID：10709247
> 
> 赞同：0
> 
> 时间：2012-05-22T19:57:39.490
> 
> 标签：php, codeigniter

我是codeigniter的新手。我想在每个页面上加载 jquery。我知道我们必须使用 autoload.php。但在其中有一个部分可以包含 js 或 css 等静态内容。这该怎么做？我创建了另一个这样的索引

```
$autoload['static'] = array(JS_LIBS_PATH.'/jq.js'); 
```

但显然什么也没发生。该常量已在 config,php.ini 中定义。使用相同的常量我可以将 jq 放在页面上，但是 autoload 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:25:12.957

我可以想到几个精心设计的解决方案，但我真的认为 javascript 是演示级别的，不应该出现在您的自动加载、模型、控制器等中。

您可以使用某种主视图文件来满足您的`<head>`基本 HTML 要求：

```
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title><?php echo $title; ?></title>

    <script src="/path/to/jquery.js"></script> <!-- jQuery on every page -->

    <!-- alternatively, loop through files in a custom config setting -->
    <?php foreach (config_item('default_js') as $src): ?>
    <script src="<?php echo $src; ?>"></script
    <?php endforeach; ?>

    <!-- ... and/or loop through files set in a controller -->
    <?php foreach ($js_files as $src): ?>
    <script src="<?php echo $src; ?>"></script
    <?php endforeach; ?>

  </head>
  <body>
    <header />
    <?php echo $content; ?>
    <footer />
  </body>
</html> 
```

然后像这样加载视图：

```
$data['js_files'] = array('draggable.js', 'widgets.js');
$content = $this->load->view('index', $data, TRUE);
$this->load->view('master', array('title' => 'Home', 'content' => $content)); 
```

当然，这只是数以百万计的一种解决方案，但是 Codeigniter “自动加载” CSS 和 Javascript 的想法毫无意义，您必须自己以一种或另一种方式“加载”它——*如何*做到这一点完全取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:10:54.770

这是我一段时间以来所做的，效果很好。

您的资产文件（javascript、样式表等）进入您的资产文件夹`/assets/js`等`/assets/css`。

在您的配置文件中，您定义要加载的默认 JavaScript 文件数组。

```
$config['default_asset_js'] = array('js/jquery.js', 'js/jquery-ui.js'); 
```

在您的视图中，您有一个部分贯穿该数组并输出它们中的每一个。

```
foreach($this->config-item('default_asset_js') as $file_name)
{
    echo '<script src="' . base_url('assets/' . $file_name) . '"></script>';
} 
```

如果您有需要加载其他文件的特定页面，您也可以发挥创意并添加到控制器中的该数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T16:05:35.297

在 CI 中，Helper 顾名思义就是帮助你完成任务。所以我们可以自动加载jquery作为助手。

1.  将 jquery 文件放在某个地方：/var/www/html/ci3/assets/js/jquery-2.1.4.min.js
2.  创建一个文件 /var/www/html/ci3/application/helpers/jquery_helper.php （您需要使用 _helper.php 后缀）。
3.  在 jquery_helper.php 文件中调用 jquery-2.1.4.min.js 文件：
    `<script src="assets/js/jquery-2.1.4.min.js"></script>`

4.  在 /var/www/html/ci3/application/config/autoload.php 中调用 jquery_helper.php：
    `$autoload['helper'] = array('jquery');` 现在 jquery 将自动加载，您可以在所有视图中使用它。

# ios - RestKit 动态映射

> ID：10709249
> 
> 赞同：0
> 
> 时间：2012-05-22T19:57:44.933
> 
> 标签：ios, restkit

我需要将此数据映射到一个核心数据对象（EventList）。

```
{
 "eventList":[
  {
     "code":"hhel444440lhxxxxxn",
     "name":"Test Event",
     "id":"222495710159sdfdfd8000000",
     "status":"Open",
     "urls":[
        {
           "hostURL":"mything.association.somedomain.com",
           "module":"association",
        },
        {
           "hostURL":"mything.mobile.somedomain.com",
           "module":"mobile",
        }
     ]
  }
 ]
} 
```

====== 我需要将它映射到我班级的这些属性 ===========

```
@dynamic code;
@dynamic name;
@dynamic id;
@dynamic status;
@dynamic hostURL; 
```

仅当 module == mobile 的值时才应映射 hostURL，因此在这种情况下，我们不希望模块 == 关联的第一个 url 中的 url。我们需要跳过第一个。

我正在尝试使用 DynamicMapping，但是当我尝试动态映射时，我得到：

valueForUndefinedKey:]：实体（null）不符合键“hostURL”的键值编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:03:38.083

知道了。我正在从我在错过的更改中编写的其他代码中剪切和粘贴。

# iphone - 图像颜色与 mac 和 iOS 设备不同

> ID：10709254
> 
> 赞同：0
> 
> 时间：2012-05-22T19:57:58.867
> 
> 标签：iphone, image, ios5, colors, device

我已经阅读了一些关于这种颜色差异的解决方案，但它们没有奏效。我尝试从我的 iphone 截取屏幕截图并将其与模拟器图像或 prview 工具中的图像进行比较，并且它的颜色相同，只有当我在设备上看到它时它看起来不同。

我在 XCode 4.3 上使用 SDK 5.1

我怎样才能解决这个问题 ？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:02:27.440

OS X`System Preferences`有一个`Displays`部分，您可以在其中调整屏幕颜色（我不知道应用“此显示器的配置文件”以外的其他方法是否安全）![在此处输入图像描述](../Images/11c81473205d9856277d77267d6b4abb.png)

您可以尝试使用其他配置文件、校准屏幕或使用谷歌搜索更多信息，并考虑此首选项窗格。

# jquery - 无序列表，从中删除活动状态 并转移到另一个

> ID：10709255
> 
> 赞同：0
> 
> 时间：2012-05-22T19:58:10.653
> 
> 标签：jquery, css

如果标题令人困惑，我很抱歉，这就是我想要做的。我有一个`<ul>`并且我想这样做，所以当我单击其中一个时`<li>`，该项目变为`id="active"`，删除具有该 id 的旧`<li>`项目，从而采用 css for `id="active"`。我希望这是有道理的。这是我的代码： http: [//pastebin.com/20i6h5cs](http://pastebin.com/20i6h5cs)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:02:40.333

为此，您可能应该使用 a`class`而不是a（jQuery 也使它更容易）。`id`它看起来像这样：

```
$("ul").on("click", "li:not(.active)", function() {
    $(this).addClass("active").siblings().removeClass("active");
}); 
```

上面安装了一个委托处理程序，只要单击没有该类`ul`的后代，就会调用该处理程序。`li`处理程序将类添加到单击的元素并将其从其所有同级元素中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:04:08.903

这是一个让你开始的小提琴：

[http://jsfiddle.net/avvKe/](http://jsfiddle.net/avvKe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:04:20.213

我会回应 Jon 的建议，即您使用类而不是 ID。但是，如果您确实坚持走 ID 路线，则如下所示：

```
$('.ulSideNav li').click(function(e) {
    e.preventDefault();
    document.getElementById('active').id = null;
    this.id = 'active';
}); 
```

应该做的伎俩。

# android - 我的 Android 应用程序中的数据库

> ID：10709256
> 
> 赞同：2
> 
> 时间：2012-05-22T19:58:13.110
> 
> 标签：android, sqlite

我正在开发 Android 应用程序，它将用户的输入数据（来自文本框）存储在数据库中，稍后将显示该数据并使用它。但我找不到任何高质量的教程。谁能帮助我开始使用 Android 中的数据库，或者只是推荐好的和广泛的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:03:44.270

这是google的介绍，

> [http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

该部分包含两个示例应用程序的链接：[记事本](http://developer.android.com/resources/samples/NotePad/index.html)和[可搜索](http://developer.android.com/resources/samples/SearchableDictionary/index.html)字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:02:35.593

这是一个很好的教程系列：

[http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/](http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/)

请注意，对于您要查找的内容，数据库可能过于矫枉过正，您可能只想使用共享首选项：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:03:52.077

您可以使用[简单的方法](http://pastebin.com/3pfzXMgv)测试我的示例[SQLite 数据库项目](http://www.mediafire.com/?569on9rvb4qoa7w)。

* * *

如果要从文本框中插入值数据，则：

```
 final EditText et = (EditText) findViewById(R.id.et);
 String ee = et.getText().toString();
 db.execSQL("INSERT INTO LIST VALUES('"+ee+"');"); 
```

其中**db**是 SQLiteDatabase 类型的对象，而**et**是用户提供输入的文本框。

# c# - 特定语言的单词或名称的正则表达式

> ID：10709257
> 
> 赞同：0
> 
> 时间：2012-05-22T19:58:28.337
> 
> 标签：c#, .net, regex, internationalization

我对通过正则表达式的特定语言验证器感兴趣。我知道我可以用任何语言验证一个人的姓名，使用如下模式：

```
“[\p{L}\p{M}]” 
```

但是，如果我希望验证针对特定语言怎么办？如果我的线程的[CurrentUICulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentuiculture)或 CurrentCulture 设置能简单地将 of 的含义转换为`"[\w]"`适合德语、西班牙语、英语，尤其是中文的意思，那就太好了。它是这样工作的吗？如果是，那么这可能是我的答案。

如果没有，那么我的下一个兴趣是使用[正则表达式脚本注释](http://www.regular-expressions.info/unicode.html#script)。但是，我注意到：

1.  该链接中给出的列表不包括我特别感兴趣的简体“中文”。
2.  我不认为 .NET 正则表达式功能支持基于脚本的匹配。是的？不？

因此，如果我无法使前两个选项起作用，我的最后一个选择是转向[命名块](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#CategoryOrBlock)。至少[.net 支持的命名块](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#SupportedNamedBlocks)列表包括 CJK 的几个条目。我想我可以简单地将几个 CJK 块组合起来，并称其为（简体）“中文”。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:33:50.097

我得出的结论是，在 .net 设置中，不存在对 CurrentUICulture 敏感的正则表达式。我还得出结论，最宽松的合理方案是执行验证——同时适用于所有语言——简单地拒绝所有形式的不可打印字符、“dingbats”、尖括号（以防止标记注入）和数学符号：

```
@”^[^\p{C}<>\p{Sm}\p{So}]*$” 
```

中等允许的方法是使用明确捕获西方和东方字符集（包括变音符号和“组合字符”）的字符串：

```
@"^[\p{L}\p{M}\p{Pd}\p{Pi}\p{Pf}\s]*$" 
```

如果我只想要西方字符，最不许可的方法是：

```
@"^[\p{IsBasicLatin}\p{IsLatin-1Supplement}\p{Pd}\p{Pi}\p{Pf}-[\p{N}]]*$" 
```

以上仍然允许所有形式的引号，通常适用于像 O'Toole 这样的名称。

# python - PySide Qt 脚本不能从 Spyder 启动，但可以从 shell 运行

> ID：10709262
> 
> 赞同：1
> 
> 时间：2012-05-22T19:58:41.537
> 
> 标签：python, qt, pyqt, pyside, spyder

我的项目中有一个奇怪的错误，它使用 PySide 作为其 Qt GUI，作为回应，我试图用设置环境的更简单的代码进行测试。

这是我正在测试的代码：[https ://stackoverflow.com/a/6906552/130164](https://stackoverflow.com/a/6906552/130164)

当我从我的 shell ( `python test.py`) 启动它时，它运行良好。但是，当我在 Spyder 中运行该脚本时，出现以下错误：

```
Traceback (most recent call last):
  File "/home/test/Desktop/test/test.py", line 31, in <module>
    app = QtGui.QApplication(sys.argv)
RuntimeError: A QApplication instance already exists. 
```

如果有帮助，我还会收到以下警告：

```
/usr/lib/pymodules/python2.6/matplotlib/__init__.py:835: UserWarning:  This call to matplotlib.use() has no effect
because the the backend has already been chosen;
matplotlib.use() must be called *before* pylab, matplotlib.pyplot,
or matplotlib.backends is imported for the first time. 
```

**为什么该代码从我的 shell 启动而不是从 Spyder 启动时有效？**

* * *

**更新：** Mata 回答说问题的发生是因为 Spyder 使用 Qt，这是有道理的。目前，我已经使用“在外部系统终端中执行”选项在 Spyder 中设置了执行，这不会导致错误，但也不允许调试。**Spyder 是否有任何内置的解决方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:52:59.043

作为`Spyder`一个`Qt`应用程序，它启动它自己的`QApplication`. 在同一个过程中只能`QApplication`存在一个，这就是你得到第一个错误的原因。

`Sypder`也使用`matplotlib`，并且可能，因此它已经导入了一些提到的模块，所以这就是你得到第二个错误的原因。

因此，当这样使用它时，您无法创建自己的`QApplication`或调用`matplotlib.use()`. 或者，如果您将这些调用包装在`try`/中，它可能会起作用`except`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T12:43:40.117

我有同样的问题，stackoverflow 上的某个地方是一个解决方案。

代替

```
qApp = QtGui.QApplication(sys.argv) 
```

利用

```
qApp = QtGui.QApplication.instance()
if qApp is None:
        qApp = QtGui.QApplication(sys.argv) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T04:17:31.470

如果您尝试将应用程序启动到交互式控制台中，它将无法在 Spyder 中运行，因为该控制台专门配置为导入多个科学库、自动`show()`matplotlib 图形和其他一些细节。`scientific`在 Spyder 控制台提示符下键入以获取更多详细信息。结果是 Qt 应用程序事件循环已经在那里运行。

要让您的应用程序在 Spyder 内部运行：

1.  确保将 Spyder 配置为使用 PySide 而不是 PyQt 打开外部控制台。这可以从 Tools>Preferences>Console>External modules>Qt-Python bindings library selection 进行设置。
2.  在编辑器中激活您的脚本后，点击`F6`打开“运行设置”对话框。选择“在新的专用 Python 解释器中执行”单选按钮，而不是在当前交互式解释器中执行。单击`OK`。现在通过点击运行脚本`F5`。通过点击调试脚本`Ctrl+F5`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-15T14:19:40.220

官方 Spyder wiki 有一个关于该主题的页面：[https](https://github.com/spyder-ide/spyder/wiki/How-to-run-PyQt-applications-within-Spyder) ://github.com/spyder-ide/spyder/wiki/How-to-run-PyQt-applications-within-Spyder 。它的要点是：

> **重要提示：**在 Spyder 中运行 PyQt 应用程序之前，您需要将图形后端更改为`Automatic`. 你可以通过去
> 
> ```
> Tools > Preferences > IPython Console > Graphics 
> ```
> 
> 之后，请重新启动您的控制台内核或 Spyder 本身以使此更改生效。

[文](https://github.com/spyder-ide/spyder/wiki/How-to-run-PyQt-applications-within-Spyder#an-explanation)末有解释：

> 在 Spyder 中多次运行 PyQt 应用程序时最常见的问题是 QApplication 实例在第一次运行后仍保留在 IPython 控制台内核的命名空间中。换句话说，当您尝试重新运行您的应用程序时，您已经初始化了一个 QApplication 实例。
> 
> 尝试删除该实例可能会导致您的程序卡在阻塞的 while 循环中，如此处所建议[的](https://stackoverflow.com/a/38285497)，并且 using`sys.exit()`无济于事，因为它与尝试退出 Python（以及因此退出 IPython 控制台）相同。

建议的解决方案是做类似[@mata suggsets](https://stackoverflow.com/a/17365013/2988730)的事情。

# asp.net-mvc-3 - MVC 3 字段验证保持关注失败

> ID：10709267
> 
> 赞同：2
> 
> 时间：2012-05-22T19:59:04.130
> 
> 标签：asp.net-mvc-3, razor, validation

我们正在为基本网站制定一些可访问性标准，如果用户名字段未通过模型中定义的验证，则需要将焦点返回到用户名字段。我已经阅读了几篇表明这是存在的行为的帖子。但是，这不是我们看到的行为。我对 mvc natice 功能持开放态度（我们使用带有剃须刀的 mvc 3）或 jquery）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T22:47:21.563

> 我已经阅读了几篇表明这是存在的行为的帖子

奇怪，你这些帖子是哪里来的？我建议您通知此类帖子的作者这不是默认行为。

当然，当某些东西不是默认行为时，如果你想实现它，你就必须实现它。例如，如果有多个错误，您还没有明确指定它应该如何表现：应该关注哪个字段？首先？第三？第七个？

假设您要首先关注焦点。假设您使用的是 jQuery，您可以将以下内容添加到您的视图中：

```
@if (!ViewData.ModelState.IsValid)
{
    var key = ViewData
        .ModelState
        .Where(x => x.Value.Errors.Count > 0)
        .Select(x => x.Key)
        .FirstOrDefault();

    if (!string.IsNullOrEmpty(key))
    {
        <script type="text/javascript">
            $(function () {
                $(':input[name=@Html.Raw(Json.Encode(key))]').focus();
            });
        </script>
    }
} 
```

你已经完成了。好吧，几乎，对这段代码的进一步改进当然是将其外部化为可重用的 HTML 帮助程序，以避免将您的视图转换为绝对可怕的东西。例如，您可以有一个自定义助手来实现此行为，您所要做的就是将以下内容添加到您的`_Layout`：

```
@Html.FocusOnFirstError() 
```

可以通过以下方式实现：

```
public static class HtmlExtensions
{
    public static IHtmlString FocusOnFirstError(this HtmlHelper htmlHelper)
    {
        if (htmlHelper.ViewData.ModelState.IsValid)
        {
            return MvcHtmlString.Empty;
        }

        var key = htmlHelper
            .ViewData
            .ModelState
            .Where(x => x.Value.Errors.Count > 0)
            .Select(x => x.Key)
            .FirstOrDefault();

        if (string.IsNullOrEmpty(key))
        {
            return MvcHtmlString.Empty;
        }

        var script = new TagBuilder("script");
        script.Attributes["type"] = "text/javascript";
        script.InnerHtml = string.Format(
            "$(function() {{ $(':input[name={0}]').focus(); }});", 
            Json.Encode(key)
        );
        return new HtmlString(script.ToString(TagRenderMode.Normal));
    }
} 
```

# java - 从 Java 访问 Scala 独立单例对象

> ID：10709270
> 
> 赞同：0
> 
> 时间：2012-05-22T19:59:11.977
> 
> 标签：java, scala, singleton, scala-java-interop

我在访问 Scala 中的 fromString 方法时遇到问题。我尝试了 javap，并且我访问的至少一种方式应该可以工作，但事实并非如此。

应用程序.scala

```
object App { 
 def fromString(s:String) : Option[Int] =  if( s == "0" ) Some(0) else None
} 
```

测试.java

```
public class Test {
    public static void main(String[] args){
           //THEY ALL GIVE COMPILER ERRORS
           //App.fromString("");
           //App$.fromString("") ;
           //App$.MODULE$.fromString("");

    }
} 
```

JAVAP 输出

javap App 编译自“App.scala”

```
public final class App extends java.lang.Object{
    public static final scala.Option fromString(java.lang.String);
} 
```

javap App$ 编译自“App.scala”

```
public final class App$ extends java.lang.Object implements scala.ScalaObject{
    public static final App$ MODULE$;
    public static {};
    public scala.Option fromString(java.lang.String);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:42:19.410

我刚刚在 Eclipse 中尝试过，并且预期

```
App.fromString(""); 
```

编译得很好。Eclipse 显示错误“无法解析应用程序”，但我学会了忽略 Eclipse 的错误。

也许你没有把你的课程放在同一个包里？

# java - 在 JTable 中添加一个按钮 - Netbeans

> ID：10709275
> 
> 赞同：0
> 
> 时间：2012-05-22T19:59:35.783
> 
> 标签：java, swing, netbeans, jtable

我想在 JTable 中添加按钮。我已经制作了它的 Renderer 和 cellEditor 类，但我只是不知道在我的代码/netbeans 中放置按钮的位置...
SupplierForm.java

```
public class SupplierForm extends javax.swing.JFrame {

    /**
     * Creates new form SupplierForm
     */
    public SupplierForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        supplierCombo = new javax.swing.JComboBox();
        jScrollPane1 = new javax.swing.JScrollPane();
        dataTable = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));

        supplierCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "USER", "Item 3", "Item 4" }));
        supplierCombo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                supplierComboActionPerformed(evt);
            }
        });

        dataTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "Title 2", "Title 3", "Title 4"
            }
        ));
       /*This is giving error
       dataTable.getColumn("Button").setCellRenderer(new ButtonRenderer());
        dataTable.getColumn("Button").setCellEditor(
            new ButtonEditor(new JCheckBox()));*/
        jScrollPane1.setViewportView(dataTable);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(173, 173, 173)
                .addComponent(supplierCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 660, Short.MAX_VALUE)
                .addGap(89, 89, 89))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(supplierCombo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(34, 34, 34))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(26, 26, 26)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void supplierComboActionPerformed(java.awt.event.ActionEvent evt) {                                              
        // TODO add your handling code here:

        String tableName = (String) supplierCombo.getModel().getSelectedItem();
         DefaultTableModel model = (DefaultTableModel) dataTable.getModel();
         int c = model.getRowCount();
         for (int i=c-1; i>=0; i--){
            model.removeRow(i);
            dataTable.revalidate();
            }
        String sql = "select * from "+ tableName+"  ";
        try {
            try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(SupplierForm.class.getName()).log(Level.SEVERE, null, ex);
            }
            Connection connect = (Connection) DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\\Merlin1.accdb");
            Statement statmnt = connect.createStatement();
            ResultSet rslt = statmnt.executeQuery(sql);
            while(rslt.next()){
                String id = rslt.getString("ID");
                String name = rslt.getString("USER_NAME");
                String surname = rslt.getString("PASSWORD");
                //String age = rslt.getString("Age");
                model.addRow(new Object[]{id,name,surname});

            }

        } catch(SQLException e){
             JOptionPane.showMessageDialog(this,"No Supplier exists with this name");

            }
    // dataTable.revalidate();

    }                                             

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new SupplierForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTable dataTable;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JComboBox supplierCombo;
    // End of variables declaration
} 
```

按钮编辑器.java

```
 class ButtonEditor extends DefaultCellEditor {
  protected JButton button;

  private String label;

  private boolean isPushed;

  public ButtonEditor(JCheckBox checkBox) {
    super(checkBox);
    button = new JButton();
    button.setOpaque(true);
    button.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        fireEditingStopped();
      }
    });
  }

  public Component getTableCellEditorComponent(JTable dataTable, Object value,
      boolean isSelected, int row, int column) {
    if (isSelected) {
      button.setForeground(dataTable.getSelectionForeground());
      button.setBackground(dataTable.getSelectionBackground());
    } else {
      button.setForeground(dataTable.getForeground());
      button.setBackground(dataTable.getBackground());
    }
    label = (value == null) ? "" : value.toString();
    button.setText(label);
    isPushed = true;
    return button;
  }

  public Object getCellEditorValue() {
    if (isPushed) {
      // 
      // 
      JOptionPane.showMessageDialog(button, label + ": Ouch!");
      // System.out.println(label + ": Ouch!");
    }
    isPushed = false;
    return new String(label);
  }

  public boolean stopCellEditing() {
    isPushed = false;
    return super.stopCellEditing();
  }

  protected void fireEditingStopped() {
    super.fireEditingStopped();
  }
} 
```

ButtonRenderer.java

```
public class ButtonRenderer extends JButton implements TableCellRenderer{
     public ButtonRenderer() {
    setOpaque(true);
  }

  public Component getTableCellRendererComponent(JTable dataTable, Object value,
      boolean isSelected, boolean hasFocus, int row, int column) {
    if (isSelected) {
      setForeground(dataTable.getSelectionForeground());
      setBackground(dataTable.getSelectionBackground());
    } else {
      setForeground(dataTable.getForeground());
      setBackground(UIManager.getColor("Button.background"));
    }
    setText((value == null) ? "" : value.toString());
    return this;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:48:08.453

*   [按钮组件](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)的创建`TableCellRenderer`和`TableCellEditor`创建并不容易，例如我使用的是 as （当然是as ）而不是[JRadioButtons](https://stackoverflow.com/a/10616768/714968)，`JSpinner``RadioButtonGroup``JComboBox``TableCellEditor``JRadioButtons``TableCellRenderer`

*   没办法，改用@camickr 的 [表格按钮列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)

# html - HTML5 - 如何检测文件是否可访问

> ID：10709276
> 
> 赞同：0
> 
> 时间：2012-05-22T19:59:37.657
> 
> 标签：html, fileapi

在我的应用程序中，我使用 HTML5 File API 将文件上传到服务器，但是我遇到了无法访问文件的情况，因为它正在被另一个进程使用。这实际上在 Firefox 和 chrome 中创建了两种不同的错误条件。有没有办法使用 html5 检测文件是否无法访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:05:19.077

您是否查看过此链接中的示例，该示例显示了如何读取文件，如果出现错误，您可以编写正确的错误处理程序：

[http://www.azoft.com/spotlight/2011/02/02/filesystem-apifile-api.html](http://www.azoft.com/spotlight/2011/02/02/filesystem-apifile-api.html)

关于你的第二个问题“如果有一个 API 调用只是检查它是否可读而不必在本地实际读取它”，我验证没有这样的 API 来获取文件句柄状态并验证它。我认为这可能是因为（但我可能是错的）：

*   Web 应用程序在具有有限权限的任何机器上运行，并且获取文件句柄可能需要系统级访问权限
*   不同操作系统（Linux 或 Windows）的文件句柄访问可能不同

# soundcloud - Soundcloud API 按热度查询标签并在之后创建

> ID：10709277
> 
> 赞同：0
> 
> 时间：2012-05-22T19:59:38.063
> 
> 标签：soundcloud

我正在尝试获取`JSON`以下`soundcloud`曲目列表页面。

```
http://soundcloud.com/tags/Hiphop 
```

我尝试执行的查询是

```
http://api.soundcloud.com/tracks.json?order=hotness&limit=20&created_at[from]=2012-05-18&tags=hiphop + consumer key. 
```

该标签页面上的所有歌曲都不到 3 天，我是按热度订购的。过滤器似乎根本不起作用。查询和`tags/Hiphop`页面的结果甚至没有关闭。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:00:29.243

不幸的是 created_at 过滤器不能与 order 参数一起使用。如果您想复制您提供的 URL 中的列表，只需发出以下 API 请求：

```
https://api.soundcloud.com/tracks.json?client_id=YOUR_CLIENT_ID&tags=hiphop&order=hotness 
```

或者，在 JavaScript 中，假设您有一个 ul 元素，其 id 为“tracks”：

```
var url = 'https://api.soundcloud.com/tracks.json?client_id=YOUR_CLIENT_ID&tags=Hiphop&order_by=hotness';
$.getJSON(url, function(data) {
    $.each(data, function(index, track) {
        $('<li />', { text: track.title }).appendTo('#tracks');                    
    });
}); 
```

# objective-c - iOS - 数学帮助 - 使用捏合手势缩放基本图像需要叠加图像调整 X/Y 坐标相对

> ID：10709280
> 
> 赞同：2
> 
> 时间：2012-05-22T19:59:54.543
> 
> 标签：objective-c, ios, image, math, scale

我有一个 iPad 应用程序，它有一个基本图像 UIImageView（在这种情况下是一个大型建筑物或场地平面图或图表），然后可以在平面图顶部添加多个“图钉”（视觉上类似于谷歌地图）。这些引脚也是 UIImageViews，并在点击手势时添加到主视图中。基础图像也会添加到 viewDidLoad 的主视图中。

我让基本图像使用捏合手势进行缩放，但显然，当您缩放基本图像时，所有引脚都保持在主视图的相同 x 和 y 坐标中，并在基本图像上松散相对定位（其 x、y 和宽度，高度坐标已更改）。

到目前为止，我有这个...

```
- (IBAction)planZoom:(UIPinchGestureRecognizer *) recognizer;
{
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;

    for (ZonePin *pin in planContainer.subviews) {
        if ([pin isKindOfClass:[ZonePin class]]){
            CGRect pinFrame = pin.frame;

            // ****************************************
            // code to reposition the pins goes here...
            // ****************************************

            pin.frame = pinFrame;
        }
    }
} 
```

我需要帮助来计算数学以重新定位引脚 x/y 坐标，以在放大或缩小的计划/图表上保持相对位置。引脚显然不希望在宽度或高度方面进行缩放/缩放 - 它们只需要相对于计划中初始位置的新 x 和 y 坐标。

我自己尝试过计算，但一直在努力解决，不幸的是，我对 SDK 的了解还不够，无法知道是否有内置的可用条款来提供帮助。

非常感谢您对这个数学相关问题的帮助！:)

非常感谢，迈克尔。InNeedOfMathTuition.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:17:25.147

首先，您可以尝试将您的嵌入`UIImageView`到一个`UIScrollView`缩放中，这样您就可以在很大程度上完成了。然后，您可以轻松设置最大和最小比例，并且可以根据需要滚动缩放的图像（特别是如果您的图钉是 的子视图`UIImageView`或内部的其他内容`UIScrollView`）。

至于缩放引脚的位置，我认为存储每个引脚的原始 x 和 y 坐标会起作用（即，当视图首次加载时，当它们首次定位时，比例为 1.0）。然后当视图被缩放时，设置`x = (originalX * zoomScale)`和`y = (originalY * zoomScale)`。

几年前，我在 iOS 应用程序中遇到了同样的问题，如果我没记错的话，这就是我完成它的方式。

**编辑**：下面是有关我如何完成此操作的更多详细信息（我现在正在查看我的旧代码）。

我有一个`UIScrollView`作为我的主视图的子视图，我`UIImageView`作为一个子视图。我的按钮被添加到滚动视图中，并且我保留了它们的原始位置（缩放 1.0）以供参考。

在`-(void)scrollViewDidScroll:(UIScrollView *)scrollView`方法：

```
for (id element in myButtons)
{
   UIButton *theButton = (UIButton *)element;
   CGPoint originalPoint = //get original location however you want
   [theButton setFrame:CGRectMake(
       (originalPoint.x - theButton.frame.size.width / 2) * scrollView.zoomScale,
       (originalPoint.y - theButton.frame.size.height / 2) * scrollView.zoomScale,
       theButton.frame.size.width, theButton.frame.size.height)];
} 
```

对于该`-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView`方法，我返回了我的`UIImageView`. 我的按钮按比例缩放，但我没有在上面的代码中包含它。如果您发现引脚的大小自动缩放，您可能必须存储它们的原始大小以及原始坐标并在`setFrame`调用中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:59:52.833

更新...

感谢'先生。杰斐逊在上面的回答中提供了帮助，尽管实现方式不同，但我能够通过以下方式完成这一工作......

我有一个滚动视图，它有一个计划/图表图像作为子视图。scrollView 设置为缩放/平移等，这包括将 UIScrollViewDelegate 添加到 ViewController。

在用户双击计划/图表时，一个 pin 图像作为子视图添加到触摸点的滚动视图。pin 图像是一个自定义的“ZonePin”类，它继承自 UIImageView，并具有一些附加属性，包括“baseX”和“baseY”。

添加引脚的代码...

```
- (IBAction)planDoubleTap:(UITapGestureRecognizer *) recognizer;
{
    UIImage *image = [UIImage imageNamed:@"Pin.png"];
    ZonePin *newPin = [[ZonePin alloc] initWithImage:image];

    CGPoint touchPoint = [recognizer locationInView:planContainer];
    CGFloat placementX = touchPoint.x - (image.size.width / 2);
    CGFloat placementY = touchPoint.y - image.size.height;

    newPin.frame = CGRectMake(placementX, placementY, image.size.width, image.size.height);
    newPin.zoneRef = [NSString stringWithFormat:@"%@%d", @"BF", pinSeq++];
    newPin.baseX = placementX;
    newPin.baseY = placementY;
    [planContainer addSubview:newPin];
} 
```

然后，我有两个函数用于处理 scrollView 交互，它处理引脚相对于平面图像的缩放/重新定位。这些方法如下...

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return planImage;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    for (ZonePin *pin in planContainer.subviews) {
        if ([pin isKindOfClass:[ZonePin class]]){
            CGFloat newX, newY;

            newX = (pin.baseX * scrollView.zoomScale) + (((pin.frame.size.width * scrollView.zoomScale) - pin.frame.size.width) / 2);
            newY = (pin.baseY * scrollView.zoomScale) + ((pin.frame.size.height * scrollView.zoomScale) - pin.frame.size.height);

            CGRect pinFrame = pin.frame;
            pinFrame.origin.x = newX;
            pinFrame.origin.y = newY;
            pin.frame = pinFrame;
        }
    }
} 
```

作为参考，定位引脚的计算，由于它们是引脚的性质，引脚图像在 x 轴上居中，但 y 轴底部对齐。

我唯一要做的就是在放大时添加引脚时反转scrollViewDidScroll方法中使用的计算。上面添加引脚的代码只有在scrollView.zoomScale为1.0时才能正常工作。

除此之外，它现在工作得很好！:)

# sql - 当我知道要修剪的长度但不知道它可能包含的长度时，如何使用 RTRIM 或 REPLACE？

> ID：10709285
> 
> 赞同：0
> 
> 时间：2012-05-22T20:00:27.460
> 
> 标签：sql, oracle

我需要对 Oracle 查询中结果集中的最后 7 个字符进行 RTRIM。这 7 个字符可以是任何字符；空格、字母数字等...而且我不知道任何值的确切长度。

所以例如我想运行这样的东西

```
 SELECT RTRIM (COl_A, (SELECT LENGTH (COL_A)-7) FROM TABLE_ONE; 
```

或替换等效项

```
SELECT REPLACE(COL_A, (SELECT LENGTH (COL_A)-7 FROM TABLE_ONE),''); 
```

我可能需要对 SUBSTRING 做些什么吗？

我知道如何删除/替换特定字符，但在处理未知字符时遇到了麻烦。我见过一些类似问题的例子，但它们似乎不必要地复杂......或者这是否需要比我认为的更深入的解决方案？

一如既往地提前感谢您的建议或提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T20:02:35.453

您正在寻找`substr`功能。

```
select substr(col_a, 1, length(col_a) - 7) from table_one 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:07:46.493

实际上，正确的解决方案是：

```
select substr(col_a, 1, (case when length(col_a) < 7 then 0 else length(col_a) - 7 end) from table_one 
```

一般来说，您需要考虑长度小于 7 时会发生什么。

# .net - MySQL .NET 使用数据集

> ID：10709287
> 
> 赞同：0
> 
> 时间：2012-05-22T20:00:29.707
> 
> 标签：.net, mysql, dataset

```
Dim update_status = False

Dim tableName = "SF6SETUP"

Dim conn As MySqlConnection = New MySqlConnection(cs)
Dim da As MySqlDataAdapter = New MySqlDataAdapter()
'Dim cmd As MySqlCommand = New MySqlCommand("SELECT * FROM SF6SETUP")
Dim ds As DataSet = New DataSet()

' Open connection as late as possible to get data.
conn.Open()
da.SelectCommand = New MySqlCommand("SELECT * FROM SF6SETUP")
da.SelectCommand.Connection = conn

da.Fill(ds)

' Make a change to some row then update it.
ds.Tables(0).Rows(0).Item("O2AreaCts") = "73333337"
ds.AcceptChanges()

da.Update(ds)

conn.Close() 
```

有人可以帮我弄清楚我做错了什么。我没有错误。表中未进行任何更改。

为什么 ？！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:06:30.903

`AcceptChanges`仅更新 DataSet 中的行（在内存中）。它将状态更改为`unchanged`。如果要将行更新到数据库，请调用您的`TableAdapter's` `Update`方法。此方法将`AcceptChanges`隐式调用。

```
ds.Tables(0).Rows(0).Item("O2AreaCts") = "73333337"
ds.AcceptChanges()  ' this will prevent the update in the next line '
da.Update(ds) ' this would call AcceptChanges implicitely after the database was updated ' 
```

请注意，当您使用`DataAdapter`. 它将在`Fill`方法中打开/关闭。

除此之外，您还没有为 Christopher 已经提到的那样提供[UpdateCommand 。](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqldataadapter.html#connector-net-examples-mysqldataadapter-updatecommand)`DataAdapter`但这将是下一个问题，因为您通常会[在丢失时遇到异常](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)。

您可以使用[`DataSet.GetChanges`](http://msdn.microsoft.com/en-us/library/a4ey25we.aspx)来获取所有更改的行。我认为这不会返回任何内容。

**编辑**：好的，这是一个展示如何提供的示例`UpdateCommand`（假设您有一个 ID 列）

```
 ' Create the UpdateCommand.
  Dim sql = "UPDATE SF6SETUP SET O2AreaCts=?O2AreaCts WHERE id=?oldId"
  da.UpdateCommand = New MySqlCommand(sql, conn)
  da.UpdateCommand.Parameters.Add("?O2AreaCts", MySqlDbType.VarChar, 50, "O2AreaCts" )  
  da.UpdateCommand.Parameters.Add("?oldId", MySqlDbType.VarChar, 50, "id") 
```

# mongodb - 使用一次更新操作更新 mongo 中嵌入文档的所有实例

> ID：10709292
> 
> 赞同：2
> 
> 时间：2012-05-22T20:00:46.697
> 
> 标签：mongodb, pymongo

在 mongodb 集合中，我的文档包含如下所示的嵌入式文档列表（使用`pymongo`with`col`作为 的实例`pymongo.collection.Collection`）：

```
In [1]: col.find_one({'reqid': 1})
Out[1]: 
{u'_id': ObjectId('4fa3446f1d41c81bba000000'),
 u'reports': [{u'comments': [u'A']},
              {u'comments': [u'B']},
              {u'comments': [u'A', u'B']},
              {u'comments': [u'C']},
              {u'comments': [u'A', u'B', u'C']}],
 ...} # Other fields 
```

我现在希望通过一次`$set`更新将文档中的所有内容重置`comments`为空列表。我尝试了以下方法，但它不起作用：

```
In [2]: col.update({'reqid': 1}, {'$set': {'reports.comments': []}})
In [3]: col.find_one({'reqid': 1}, {'reports.comments': 1})
Out[3]: 
{u'_id': ObjectId('4fa3446f1d41c81bba000000'),
 u'reports': [{u'comments': [u'A']},
              {u'comments': [u'B']},
              {u'comments': [u'A', u'B']},
              {u'comments': [u'C']},
              {u'comments': [u'A', u'B', u'C']}]} 
```

我研究了`$ positional operator`一个可能的解决方案，但仍然无法弄清楚。在 python 中编写逻辑来执行此操作非常简单，但绝对会欣赏纯粹通过单个`pymongo.collection.Collection.update`调用执行此操作的优雅。任何帮助，将不胜感激。

# jquery - 在 ruby on rails 中进行 ajax 调用时，在什么时候使用数据属性是不好的做法？

> ID：10709294
> 
> 赞同：3
> 
> 时间：2012-05-22T20:00:49.223
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

**我的问题来自导航链接/无休止的滚动。**

我为每个微博添加了一个“删除”按钮。当按下该按钮时，服务器会调用 ajax，微博会被删除，而 div 也会从 DOM 中移除。

假设我在第一页有微博 1 到 10，在第二页有微博 11 到 20，等等。假设我删除了第一页上的项目 1、2 和 3。然后向下滚动。服务器会“重新计算”微博；由于我删除了前一个列表中的 3 个，它将返回项目 13 到 22。换句话说，微博 10、11 和 12 不会出现在第一页和第二页上。

**在stackoverflow上四处寻找后，我找到了一个解决方案：**

每当我从列表中删除微博时，我都会加载页面上最后一条微博之后的微博，并将其插入到底部。

**我目前如何进行修复：**

默认情况下，我使用 will_paginate gem 在页面上显示 10 个微博。我需要知道在任何给定时间显示的任何微博的 ID。我通过将它存储在包含每个微帖子的容器的开始 div 标签中来实现这一点：

```
<% @microposts.each do |m| %>
     <div class="postHolder" data-micropost-id="<%= m.id %>"> 
```

**我在 microposts.js 资产文件中这样访问它：**

```
$(function() {

     $('.message_delete').on('ajax:success', function(event, data, status, xhr){
          console.log(data); //to check if json is working
          console.log($('.postHolder').last().data('micropost-id'));
     });
}); 
```

**这是我的控制器销毁操作：**

```
def destroy
    micropost = Micropost.find(params[:id])
       respond_to do |format|   
         micropost.destroy
       format.json  { render :json => micropost } #just to check if json is working
    end
end 
```

现在我知道每个微博的 ID，所以当一个微博被删除时，我使用 jquery 选择器对页面上的最后一个 .postHolder div 进行微调，获取 ID，然后使用该 ID 获取紧随其后的微博并在其后插入该微博. 这样，当一条消息被删除时，一条消息会自动附加。

如果用户碰巧滚动以加载更多消息，则不会丢失任何消息。我看过一些 railscasts 并看到 Ryan Bates 使用数据属性做了类似的事情，并阅读了一些关于它们的东西，似乎得到这样的印象是不好的做法。

我试图想出其他方法来做到这一点，但想不出任何办法，但这样做感觉有点奇怪。也许这一切都在我的脑海中，但如果可能的话，我想要另一个更好的解决方案。

谢谢

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:26:10.433

您可以使用变量来跟踪当前页面上的微博数。每当您删除帖子时，请减少此变量。每当您获取新的帖子页面时，将此变量重置为其默认值（10）。

当您获取新的 10 个帖子时，数据库的偏移量将为（假设您请求微博的第 3 页，并且您从第 2 页删除了 4 个）

```
(3 * 10) - (4) == 26 
```

第 3 页上的第一个微博现在将是微博 id 26

假设我已经理解了您的问题，那就是！

# windows - 是什么导致 recv 失败（Windows 7 上的 ActiveMQ 5.6.0）

> ID：10709296
> 
> 赞同：4
> 
> 时间：2012-05-22T20:00:54.657
> 
> 标签：windows, activemq

我在 Windows 7 上遇到 ActiveMQ 5.6.0 问题。

```
WARN | Transport Connection to: tcp://127.0.0.1:55793 failed: java.net.SocketException: Software caused connection abort: recv failed
WARN | Transport Connection to: tcp://127.0.0.1:55791 failed: java.net.SocketException: Software caused connection abort: recv failed
WARN | Transport Connection to: tcp://127.0.0.1:55792 failed: java.net.SocketException: Software caused connection abort: recv failed 
```

有谁知道这可能是什么原因？这是一个屏幕截图：

![ActiveMQ 日志](../Images/071bc8abaa8f42ed1d2d8723ed16335d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T13:26:50.547

您可以使用以下命令行参数运行您的应用程序/JRE 吗？

```
-Djava.net.preferIPv4Stack=true 
```

请参阅[此处](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)了解更多信息。

# javascript - 在 canvas 元素 HTML5 中嵌入 youtube 视频

> ID：10709300
> 
> 赞同：0
> 
> 时间：2012-05-22T20:01:27.343
> 
> 标签：javascript, html, video, canvas, youtube

我正在使用`Canvas`HTML5 的 API 开发应用程序，它涉及用户在应用程序中上传视频和/或显示来自 Youtube 的视频。

这意味着用户可以添加一个 Youtube URL，然后该 URL 将显示在画布应用程序中。

现在如何将视频嵌入到画布应用程序中？

编辑：我的意思是如何添加 youtube 播放器，我从视频元素中尝试了这个帧副本，但它是一个资源野兽。

# javascript - 两个带有“其他”选项的选择框

> ID：10709301
> 
> 赞同：1
> 
> 时间：2012-05-22T20:01:33.330
> 
> 标签：javascript, html, html-select

我有一个选择字段的工作代码，其中包含其他选项，在选择其他类型时显示一个文本框。但是，我在为同一页面上的 2 个选择框编写代码时遇到了麻烦。

这是我的脚本。

```
 function toggleField(val) {
      var o = document.getElementById('other');
      (val == 'Other') ? o.style.display = 'block': o.style.display = 'none';
    }
```

```
<SELECT NAME="i_skate" SIZE="1" ONCHANGE="toggleField(this.value);">
  <OPTION VALUE="Just a Fan">Just a Fan</OPTION>
  <OPTION VALUE="Everyday">Everyday</OPTION>
  <OPTION VALUE="Few times a Week">Few times a Week Week
  </OPTION>
  <OPTION VALUE="Few times a Month">Few times a Month Month
  </OPTION>
  <OPTION VALUE="Other">Other</OPTION>
</SELECT>
<INPUT TYPE="TEXT" NAME="other" ID="other" STYLE="display: none;" SIZE="20">
</TD>
<TD WIDTH="10" ALIGN="LEFT"></TD>
<TD WIDTH="110" ALIGN="LEFT" VALIGN="TOP">

  <SELECT NAME="my-style" SIZE="1" ONCHANGE="toggleField(this.value);">
    <OPTION VALUE="Street Skate">Street Skate</OPTION>
    <OPTION VALUE="Downhill">Downhill</OPTION>
    <OPTION VALUE="Freestyle">Freestyle</OPTION>
    <OPTION VALUE="Pools-Bowls">Pools-Bowls</OPTION>
    <OPTION VALUE="Vert Halfpipe">Vert Halfpipe</OPTION>
    <OPTION VALUE="Park">Park</OPTION>
    <OPTION VALUE="Mini Ramp">Mini Ramp</OPTION>
    <OPTION VALUE="Other1">Other1</OPTION>
  </SELECT>
  <INPUT TYPE="TEXT" NAME="other1" ID="other1" STYLE="display: none;" SIZE="20">
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:36:36.680

如果我对您的理解正确，您希望在选择“Other1”时让您的第二个 SELECT 标记显示第二个 INPUT 框，就像第一个用于“Other”一样。

你真的很接近，但你的 Javascript 需要一些调整。您当前正在测试“Other”的更改元素，然后更改对象 o 的显示，该对象是对 id 为“other”的元素的引用。您将需要扩展此逻辑以包括您的新选择框（带有“Other1”选项）和相应的输入框。

因此，您可能需要执行类似...

```
<SCRIPT TYPE="text/javascript">
function toggleField(val) {
  var o = document.getElementById('other');
  var o1 = document.getElementById('other1');
  (val == 'Other')? o.style.display = 'block' : o.style.display = 'none';
  (val == 'Other1')? o1.style.display = 'block' : o1.style.display = 'none';
}
</SCRIPT> 
```

这会将相同的功能从第一个 SELECT 扩展到第二个。

# mysql - mysql中的情况不起作用

> ID：10709305
> 
> 赞同：-1
> 
> 时间：2012-05-22T20:01:39.587
> 
> 标签：mysql, database

```
UPDATE a_timeblock SET timeblock_due_date=DATE(timeblock_next_update), 
CASE timeblock_recurrence_unit
 WHEN day THEN
       DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time  day ) 
 WHEN month THEN
       DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time  month) 
  END

 WHERE timeblock_recurrence=1 AND timeblock_complete=0 AND timeblock_next_update=    
 FROM_UNIXTIME(1337662800) 
```

上面的查询是错误的。我想做类似上面的事情。如果可能的话，我该怎么做。

```
#1064 - You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL 
server version for the right syntax to use near 
'CASE timeblock_recurrence_unit WHEN 'day' THEN DATE_ADD(NOW(),IN' at line 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:08:54.053

您的第二个值没有目标列。

```
UPDATE a_timeblock
SET timeblock_due_date = DATE(timeblock_next_update), 
    column_name?       = CASE ... END
WHERE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:07:27.947

我认为您需要在案例中的值周围使用引号并简单地 SET `timeblock_due_date`：

```
...
SET timeblock_due_date =
CASE timeblock_recurrence_unit
  WHEN 'day' THEN
       DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time  day ) 
  WHEN 'month' THEN
       DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time  month) 
END
... 
```

这假设`timeblock_recurrence_unit`是一个`VARCHAR`类型（它需要是）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:08:49.723

可能是这样的？

```
UPDATE a_timeblock SET timeblock_due_date=
CASE timeblock_recurrence_unit
 WHEN 'day' THEN
       DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time  day ) 
 WHEN 'month' THEN
       DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time  month) 
  END

 WHERE timeblock_recurrence=1 AND timeblock_complete=0 AND timeblock_next_update=    
 FROM_UNIXTIME(1337662800) 
```

# sqlite - 格式化要在 sqlite 中使用的日期

> ID：10709308
> 
> 赞同：1
> 
> 时间：2012-05-22T20:01:54.097
> 
> 标签：sqlite

我有一个包含 70,000 条记录的 csv 文件，我需要比较日期。

这些当前存储例如 DD/MM/YYYY

我相信 sqlite 要求将它们存储为 YYYY-MM-DD 以便我可以在它们上使用日期函数。

有什么简单的方法可以转换所有这些记录的格式吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:36:36.263

你试过了`strftime('%Y-%m-%d', colNameHere)`吗？

[**更多格式信息在这里**](http://www.sqlite.org/lang_datefunc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:06:02.220

获取 Notepad++ / Textpad 之类的内容并进行搜索和替换：

```
Textpad    \([0-9]{2}\)/\([0-9]{2}\)/\([0-9]{4}\)
Notepad++  ([0-9]{2})/([0-9]{2})/([0-9]{4})

Replace with: \3-\2-\1 
```

确保您使用正则表达式/扩展搜索进行搜索

# jquery - 在平铺布局中对图像进行排序

> ID：10709310
> 
> 赞同：1
> 
> 时间：2012-05-22T20:01:57.543
> 
> 标签：jquery, tile

我需要能够在容器 div 中对图像（不同大小的）进行排序。它们必须“适合”平铺布局样式，例如 Windows Metro。

我知道有一些非常好的解决方案，例如 Isotope for jQuery (https://github.com/desandro/isotope)，但我确实需要最基本的功能，即能够将图像“平铺”在一起，仅此而已。

这个贴砖是怎么做的？任何地方都有一个超级简单的例子吗？

感谢所有输入！

# macos - 使用带有空格的路径设置 Ant 文件

> ID：10709314
> 
> 赞同：0
> 
> 时间：2012-05-22T20:02:15.057
> 
> 标签：macos, shell, unix, ant

我正在使用包含空格的源路径使其他人的 ant 构建工作。其中大部分是基本的 shell 脚本，在路径周围添加双引号，但这个让我很难过：

（来自 build.xml）：

```
<path id="headers">
    <fileset dir="${source.main.dir}">
        <include name="**/*.h"/>
    </fileset>
</path> 
```

source.main.dir 是包含空格的路径。它被添加到模式找到的每个包含文件名之前。我如何通过每个引号引起这种情况？

万一这很重要，我正在从 OS X Lion 10.7.4 上的命令行运行构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:07:19.300

我想我明白了！我变了：

```
 <pathconvert pathsep=" " property="doc.files.list" refid="headers" /> 
```

到

```
 <pathconvert pathsep=" " property="doc.files.list" refid="headers">
        <map from='${source.main.dir}' to='"${source.main.dir}"' />
    </pathconvert> 
```

它现在似乎正在工作。

# android - 安卓：偏好

> ID：10709324
> 
> 赞同：1
> 
> 时间：2012-05-22T20:02:43.067
> 
> 标签：android, android-intent, android-widget

一个应用程序中是否可以有两个单独的首选项？我有一个在运行时连接到外部可执行文件（引擎）的应用程序。该应用程序有自己的偏好，引擎也有。这两者不能混合，因为下次用户可能决定加载具有不同偏好的完全不同的引擎。所以我想加载当前引擎的首选项，根据需要向用户显示，然后不保存就退出。我喜欢默认显示的偏好活动视图，我想知道我是否也可以将它用于引擎。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:04:13.897

您可以拥有任意数量的偏好。你只需要称它们为不同的东西。

# haskell - 函数无法匹配类型

> ID：10709325
> 
> 赞同：7
> 
> 时间：2012-05-22T20:02:46.543
> 
> 标签：haskell, types, type-inference

我的功能如下：

```
 foo :: Int -> a -> [a]
    foo n v = bar n
      where
        bar :: Int -> [a]
        bar n = take n $ repeat v 
```

使用 ghci 报此错误：

```
 Couldn't match type `a' with `a1'
          `a' is a rigid type variable bound by
              the type signature for foo :: Int -> a -> [a] at hs99.hs:872:1
          `a1' is a rigid type variable bound by
              the type signature for bar :: Int -> [a1] at hs99.hs:875:9
    Expected type: [a1]
        Actual type: [a]
    In the expression: take n $ repeat v
    In an equation for `bar': bar n = take n $ repeat v 
```

如果去掉 bar 的类型声明，代码可以正确编译。那么 bar 的正确类型声明是什么？为什么会发生错误，因为 bar 的类型声明比 bar 的定义更通用（绑定到 foo 中的某些类型）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T20:07:53.707

`a`在_

```
foo :: Int -> a -> [a] 
```

和`a`在

```
 bar :: Int -> [a] 
```

是具有相同名称的不同类型变量。

要获得您期望的行为，请打开 ScopedTypeVariables 扩展（例如，通过`{-# LANGUAGE ScopedTypeVariables #-}`在源文件顶部插入），并将类型签名更改`foo`为

```
foo :: forall a. Int -> a -> [a] 
```

* * *

当没有启用 ScopedTypeVariables 时，就好像您的原始代码是这样编写的：

```
foo :: forall a. Int -> a -> [a]
foo n v = bar n
  where
    bar :: forall a. Int -> [a]
    bar n = take n $ repeat v 
```

如果您省略`bar`.

相反，您为`bar`与 ghci 类型冲突而提供的类型注释推断 --- 您断言`bar`的类型是 ghci 知道它不能拥有的。

当您删除类型注释时，您将删除冲突。

ScopedTypeVariables 更改您提供的类型注释的含义。它不会影响 ghc 如何推断类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:41:38.800

刚刚发现这个线程也有一个很好的解释：[http ://www.haskell.org/pipermail/haskell-cafe/2008-June/044617.html](http://www.haskell.org/pipermail/haskell-cafe/2008-June/044617.html)

# wordpress - 有人可以解释一下如何将开放图形和喜欢按钮集成到 wordpress 中吗？

> ID：10709329
> 
> 赞同：-1
> 
> 时间：2012-05-22T20:03:17.537
> 
> 标签：wordpress, facebook-opengraph

我正在尝试在我的 wordpress 网站上实现 Open Graph 和“Like”按钮。我希望将“赞”按钮直接放置在我的一个 wordpress 页面上发布的 youtube 视频下方。

我看过 facebook open graph video 解释要放到你的页面上的代码，但它没有解释如何在 wordpress 中做到这一点。我研究了几个在您的网站中实现开放图的 wordpress 插件，但它们似乎都从网站本身获取数据并自动将其实现到开放图数据中。在我看来，使用“Like”按钮 wordpress 插件，like 按钮会自动放置在页面的顶部或底部或侧边栏中。

谁能帮我理解如何以我可以控制代码的所有参数（图像、url、站点名称、描述等）的方式将开放图形代码实现到 wordpress 中，以及如何直接实现 Like 按钮在我网页上的视频下方？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:49:00.873

它是否“用于 Wordpress”并不重要。Wordpress 是一个框架，而不是一种语言。使用[Like Button Tool](http://developers.facebook.com/docs/reference/plugins/like/)生成任何页面所需的代码 - Wordpress 或其他 - 并阅读[Open Graph Protocol](http://developers.facebook.com/docs/opengraphprotocol/)以让您了解如何编写 <head> 部分。

Facebook 的[调试工具](http://developers.facebook.com/tools/debug)还将帮助您解决可能遇到的任何缓存问题，以及您可能会发现对您的网站有用的许多额外信息。

# ios - 如何在网站上登录应用程序并在后台获取信息？

> ID：10709330
> 
> 赞同：0
> 
> 时间：2012-05-22T20:03:22.427
> 
> 标签：ios

我想我大部分时间都在努力解决这个问题，因为我不知道要搜索什么。我想制作一个允许用户输入他们的礼品卡号码并使用该号码登录该网站的应用程序：

[https://www.getmybalance.com](https://www.getmybalance.com)

如果不控制网站，我不知道如何做到这一点。甚至有可能这样做吗？我不想使用 UIWebView 来显示页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:30:49.197

看起来您需要以编程方式在 https 中 POST 到服务器，然后您将返回一些 DOM 文档、JSON 或一些奇怪的东西，然后您对其进行解析。

使用 iOS 发布非常简单，请查看 LRResty [https://github.com/lukeredpath/LRResty](https://github.com/lukeredpath/LRResty)或类似内容。

当你取回数据时，首先要做的是用 NSLog 来查看它。然后，如果数据是 HTML，您将需要涉足 HTML 以获得结果。

这种方法的问题在于托管页面的公司可能随时更改其 API。你应该要求他们要么永远不要改变任何东西（如果他们想改变，然后创建一个新页面并让旧页面保持工作，或者更好的是，支持一个简单的 REST API - 这也将帮助他们构建漂亮的 AJAX/html5 网站在将来。）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:23:32.537

您应该阅读 NSURLConnection，您将不得不执行一个发布请求才能登录。然后您将不得不通过解析返回的页面来确定您是否成功登录。NSURLConnection 将处理存储站点返回的登录 cookie。登录后，您可能需要执行另一个发布请求来查询他们的系统。再一次，您可能不得不从返回的 HTML 页面中解析出结果。

NSURLConnection： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

NSURLConnection 委托协议： [https ://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)

当然，这一切都假设该网站没有您可以使用的 API。

# mysql - 如何在 VirtualBox Vagrant 中连接到 Mysql Server？

> ID：10709334
> 
> 赞同：94
> 
> 时间：2012-05-22T20:03:49.123
> 
> 标签：mysql, virtualbox, vagrant

我用 Vagrant 安装了一个新的 VirtualBox 机器，并在该 VM 中安装了 Mysql Server。如何连接到 vm 外的该服务器？我已经转发了 Vagrantfile 的 3306 端口，但是当我尝试连接到 mysql 服务器时，它会回复错误：'reading initial communication packet'

```
ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-05-29T07:04:17.347

确保 MySQL 绑定到 0.0.0.0 而不是 127.0.0.1 否则将无法从机器外部访问

您可以通过编辑`/etc/mysql/my.conf`文件并查找`bind-address`项目来确保这一点——您希望它看起来像`bind-address = 0.0.0.0`. 然后保存并重新启动 MySQL：

```
sudo service mysql restart 
```

如果您在生产服务器上执行此操作，则需要了解安全隐患，此处讨论：[https ://serverfault.com/questions/257513/how-bad-is-setting-mysqls-bind-address-to -0-0-0-0](https://serverfault.com/questions/257513/how-bad-is-setting-mysqls-bind-address-to-0-0-0-0)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-09-06T12:33:07.323

`ssh vagrant@127.0.0.1 -p 2222`使用（密码 vagrant）登录您的邮箱

然后：`sudo nano /etc/mysql/my.cnf`并用 # 注释掉以下行

```
#skip-external-locking 
#bind-address 
```

保存并退出

然后：`sudo service mysql restart`

然后您可以通过 SSH 连接到您的 MySQL 服务器。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-08-17T23:18:18.697

我最近遇到了这个问题。我使用 PuPHPet 生成配置。

要通过 SSH 连接到 MySQL，“vagrant”密码对我不起作用，我必须通过 SSH 密钥文件进行身份验证。

连接 MySQL Workbench

连接方式

**基于 SSH 的标准 TCP/IP**

SSH

```
Hostname: 127.0.0.1:2222 (forwarded SSH port)
Username: vagrant
Password: (do not use)
SSH Key File: C:\vagrantpath\puphpet\files\dot\ssh\insecure_private_key
              (Locate your insercure_private_key) 
```

MySQL

```
Server Port: 3306
username: (root, or username)
password: (password) 
```

测试连接。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-11-15T00:48:38.700

对于尝试使用 mysql workbench 或 sequel pro 执行此操作的任何人，这些是输入：

```
Mysql Host: 192.168.56.101 (or ip that you choose for it)
username: root (or mysql username u created)
password: **** (your mysql password)
database: optional
port: optional (unless you chose another port, defaults to 3306)

ssh host: 192.168.56.101 (or ip that you choose for this vm, like above)
ssh user: vagrant (vagrants default username)
ssh password: vagrant (vagrants default password)
ssh port: optional (unless you chose another) 
```

来源：[https ://coderwall.com/p/yzwqvg](https://coderwall.com/p/yzwqvg)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-04-13T11:56:29.293

好吧，由于给定的答复都没有帮助我，因此我不得不多看一些，并在本文中找到了解决[方案](https://slewsystems.wordpress.com/2014/01/01/connecting-to-a-puphpet-vagrant-ftp-and-mysql-servers/)。

简而言之，答案如下：

**使用 MySQL Workbench 连接到 MySQL**

```
Connection Method: Standard TCP/IP over SSH
SSH Hostname: <Local VM IP Address (set in PuPHPet)>
SSH Username: vagrant (the default username)
SSH Password: vagrant (the default password)
MySQL Hostname: 127.0.0.1
MySQL Server Port: 3306
Username: root
Password: <MySQL Root Password (set in PuPHPet)> 
```

使用给定的方法，我能够使用 MySQL Workbench 和 Valentina Studio 从主机 Ubuntu 机器连接到 vagrant 中的 mysql 数据库。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-04T17:23:40.597

以下是登录该框后对我有用的步骤：

**找到 MySQL 配置文件：**

```
$ mysql --help | grep -A 1 "Default options"

Default options are read from the following files in the given order: /etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf 
```

在 Ubuntu 16 上，路径通常是`/etc/mysql/mysql.conf.d/mysqld.cnf`

**更改绑定地址的配置文件：**

如果存在，请按如下方式更改值。如果它不存在，请将其添加到 [mysqld] 部分的任何位置。

```
bind-address = 0.0.0.0 
```

保存对配置文件的更改并重新启动 MySQL 服务。

```
service mysql restart 
```

**创建/授予对数据库用户的访问权限：**

以 root 用户身份连接到 MySQL 数据库并运行以下 SQL 命令：

```
mysql> CREATE USER 'username'@'%' IDENTIFIED BY 'password';

mysql> GRANT ALL PRIVILEGES ON mydb.* TO 'username'@'%'; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-26T15:02:32.023

这对我有用：[在 Vagrant 中连接到 MySQL](https://gist.github.com/johnantoni/3288329)

```
username: vagrant password: vagrant

sudo apt-get update sudo apt-get install build-essential zlib1g-dev
git-core sqlite3 libsqlite3-dev sudo aptitude install mysql-server
mysql-client

sudo nano /etc/mysql/my.cnf change: bind-address            = 0.0.0.0

mysql -u root -p

use mysql GRANT ALL ON *.* to root@'33.33.33.1' IDENTIFIED BY
'jarvis'; FLUSH PRIVILEGES; exit

sudo /etc/init.d/mysql restart

# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant::Config.run do |config|

  config.vm.box = "lucid32"

  config.vm.box_url = "http://files.vagrantup.com/lucid32.box"

  #config.vm.boot_mode = :gui

  # Assign this VM to a host-only network IP, allowing you to access
it   # via the IP. Host-only networks can talk to the host machine as
well as   # any other machines on the same network, but cannot be
accessed (through this   # network interface) by any external
networks.   # config.vm.network :hostonly, "192.168.33.10"

  # Assign this VM to a bridged network, allowing you to connect
directly to a   # network using the host's network device. This makes
the VM appear as another   # physical device on your network.   #
config.vm.network :bridged

  # Forward a port from the guest to the host, which allows for
outside   # computers to access the VM, whereas host only networking
does not.   # config.vm.forward_port 80, 8080

  config.vm.forward_port 3306, 3306

  config.vm.network :hostonly, "33.33.33.10"

end 
```

# javascript - 如何获得子元素与超级父元素成比例的百分比

> ID：10709335
> 
> 赞同：1
> 
> 时间：2012-05-22T20:03:49.613
> 
> 标签：javascript, dom

我需要在 div 父容器中堆叠 div。父 div 容器也是子容器或在父容器内。

我的问题是，当将 div 堆叠为像素时，一切正常；但是，如果我需要在 div 堆栈下方或之间滑动一个，有时我会丢失一个像素。我知道不可能有 0.3232 像素，并且我假设我在小数点处丢失了一个像素。

我有一个常量设置为 var PIXELS_PER_FOOT =25;

如果我有如下结构，如何设置子元素与父元素成比例的百分比？

```
 <div id="superParent" height='500px'       OR 20 Feet     >

    <div id="anotherParent" height="300px"   OR 12 Feet     >

    <div id="aChild" height=If this div is  3 Feet 
                             I need to get the percentage of 3 foot from 20 foot and        
                              apply                             
                              that percentage to its parent or                 
                               what I am calling the anotherParent

   </div>
   </div> 
```

因此，如果 3/20 = 15%。我需要得到 12/20 =60%，这就是我迷路的地方。因为将 15% 应用于 aChild 元素是不正确的，因为它的父元素不是我从中获得主要百分比的数字。

我不能为此使用 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:11:22.407

我已经可以访问每个父级的像素，因为在我的循环中，每个对象上的像素都是根据其父级的高度从上到下设置的，所以我在循环中的位置并不重要，我总是可以设置只要我在尝试获取百分比之前设置子对象的高度，子对象的百分比。

```
this.heightPercent = (this.heightPixels / that.parent.size.heightPixels) * 100; 
```

# c++ - C++ 快速排序算法崩溃

> ID：10709339
> 
> 赞同：2
> 
> 时间：2012-05-22T20:04:04.380
> 
> 标签：c++, algorithm, sorting, quicksort

我正在研究一种 c++ 快速排序算法，该算法计算排序期间重要操作的数量。它会正确排序 100 个值，但之后会陷入无限循环。任何帮助将不胜感激！

//快速排序.cpp

```
#include "QuickSort.h"
#include <algorithm>

using namespace std;

QuickSort::QuickSort(int max) : SortData(max)
{
    /*
    maxSize = max;
    theData = new long[max];
    */
    SortData::randomize(12);

}

QuickSort::~QuickSort(void)
{

}

_int64 QuickSort:: sort()
{
    numops = 0;
    quicksort(theData, 0, (size()-1));
    return(numops);
}

//Include counting number of operations
void QuickSort::quicksort(long theData[], int left, int right)
{
    //Default variables

    if (size() <= 1 || left >= size() || right >= size()) return; //Bounds checking

    if (left < right)
    {
        long pivot = partition(theData, left, right);

        quicksort(theData, left, pivot-1);
        quicksort(theData, pivot+1, right);
    }
}

int QuickSort::partition(long theData[], int left, int right)
{
    long pivot = theData[left];
    while (true)
    {
        while (theData[left] < pivot) left++;
        numops ++;

        while (theData[right] > pivot) right--;
        numops ++; 

        if (left < right)
        {
            swap(theData[left], theData[right]);
            numops+=3;
        }

        else
        {
            return right;
        }
    }
} 
```

//快速排序.h

```
#pragma once
#include "SortData.h"

class QuickSort : public SortData
{

public:
    QuickSort(int max = 100);
    ~QuickSort(void);
    _int64 sort();
private:
    _int64 numops;
    void QuickSort::quicksort(long theData[], int left, int right);
    int partition(long theData[], int left, int right);
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:11:15.140

在你的分区函数中

```
 if (left < right) 
```

总是正确的。因此，您将获得无限的 while(true) 循环。

并且 SortData.h 中的 size() 函数可能存在问题，我们还看不到。

由于数据是随机的，您会不时在某些输入集上看到问题。

稍作修改必须有帮助：

```
if (left <= right) {
         if (left < right) {
             swap(theData[left], theData[right]);
             numops += 3;
         }
         left++;
         right--;
}
else {
    return right;
} 
```

很抱歉再次检查:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:15:14.847

`partition``left < right`如果和会卡住`theData[left] == theData[right]`。

# java - 在jsp页面执行jar - 等到jar执行完成

> ID：10709343
> 
> 赞同：0
> 
> 时间：2012-05-22T20:04:34.777
> 
> 标签：java, jsp, jar, execution

我有一个需要在 jsp 页面上运行的 jar 文件。jar 文件被设计为在命令行中执行。这是我的代码：

```
public static String scheduleCourses() throws IOException {

    String execute = "java -jar execute.jar \"jdbc:mysql://localhost:3306/db\" root \"\" file.txt";
    Process process = Runtime.getRuntime().exec(execute);
    BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
    try {
        process.waitFor();
    } catch (InterruptedException ex) {
        Logger.getLogger(widgets.class.getName()).log(Level.SEVERE, null, ex);
        return "Error with import<br>" +ex;
    }
    return "All done";
} 
```

但不知何故，虽然，这个函数正在执行，它会在 10-20 秒内停止。但是如果我从命令提示符运行 jar 文件 - 它工作得很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:23:32.270

我最终得到了上面的解决方案。

# c - 使用 strpbrk 分隔字符串，使用分隔符“>>”？

> ID：10709350
> 
> 赞同：0
> 
> 时间：2012-05-22T20:05:00.217
> 
> 标签：c, string

我编写了一个程序，该程序将包含以下字符的任何字符串作为输入：

```
& , > , < , SPACE (e.g " ") 
```

分隔符是这样写的 : `char delimiters[] = " &<>";`，我将它们与`strpbrk`命令一起使用。

我需要将分隔符添加`">>"`到该组。我怎样才能做到这一点 ？

如果我只写 : `char delimiters[] = " &<>>>";`，编译器不会`>>`相应地处理 .

知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:06:57.093

`strpbrk`使用`char`s 作为分隔符，并且`">>"`不是字符，因此您不能仅将其用作分隔符。由于您已经将`'>'`其作为分隔符，因此当您连续看到两个时，您可以将其设为特殊情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:08:06.797

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *strpbrkEx(const char *str, char **strs){
    char *minp=(char*)-1, *p;
    if(NULL==str || NULL==strs)return NULL;
    while(*strs){
        p=strstr(str, *strs++);
        if(p && minp > p)
            minp = p;
    }
    if(minp == (char*)-1) return NULL;
    return minp;
}

int main(){
    char *delimiters[] = {" ","&","<",">>",">", NULL};
    char data[]="cin>> num;";
    char *p;
    p = strpbrkEx(data, delimiters);//found ">>" but case of ">" distinction does not adhere
    printf("%s",p);
    return 0;
} 
```

# python - django - 导入错误

> ID：10709354
> 
> 赞同：1
> 
> 时间：2012-05-22T20:05:10.547
> 
> 标签：python, django, ubuntu

我刚刚成功地将我的代码发送到了生产服务器。你可以在这里查看[http://qlimp.com](http://qlimp.com)

表明

```
ImportError at /
No module named try.urls

Exception Type: ImportError
Exception Value:    No module named try.urls
Exception Location: /home/nirmal/project/local/lib/python2.7/site-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /home/nirmal/project/bin/python 
```

实际上我在开发服务器中的 django 项目名称是**try**。然后我将代码导出到生产服务器中的项目**qlimp**。我成功执行了所有需要完成的更改，但我不知道为什么它表明`No module named try.urls`

我在生产服务器上使用 Ubuntu 12.04 LTS。有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:15:47.457

在 settings.py 中，更改

```
ROOT_URLCONF = 'try.urls' 
```

到

```
ROOT_URLCONF = 'qlimp.urls' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:11:59.417

与其说是直截了当的答案，不如说是要检查的几件事——我建议（如果你还没有的话）你为字符串“try.urls”grep 新项目。在我看来，如果您错过了更改配置文件或其他内容，可能会发生这种情况。如果你有耐心，你甚至可以尝试 grepping “try”。此外，请确保您已执行 make clean 以清除编译代码中可能存在的任何引用。

# python - 使用 Python + Jinja2 + GAE 在“get”请求中传递值时出现 CSS 渲染问题

> ID：10709361
> 
> 赞同：0
> 
> 时间：2012-05-22T20:05:37.470
> 
> 标签：python, css, google-app-engine, jinja2, webapp2

这是我第一次在 Stack Overflow 上发帖。我正在尝试使用 Python、Jinja2 和 Google App Engine 构建一个相对简单的游戏。目前，我刚刚构建了一些简单的 CRUD 函数，用于创建、编辑、列出和销毁游戏。而且，在大多数情况下，它似乎有效。但是，每当我传递一个值来检索特定游戏时，似乎都没有应用我的 CSS 样式表。但是，只要我不传递任何值，它似乎就可以正常工作。例如，如果我调用诸如“create_game”或“all_games”之类的不带任何参数的函数，它们各自的模板将使用相关的 CSS 样式正确呈现。但是，如果我调用像“edit_game/12345567”这样的函数，则根本不会应用 CSS 样式表，

我不确定问题出在哪里。这可能与模板的呈现方式有关吗？还是某种路由/映射问题？

这是我的 main.py：

```
 import webapp2
    from controllers.authController import *
    from controllers.baseController import *
    from controllers.gameController import *

    app = webapp2.WSGIApplication([('/', MainPage),                     
            ('/create_game',CreateGame),
            ('/player_games/([\d]+)',PlayerGames),
            ('/all_games',AllGames),
            ('/edit_game/([\d]+)',EditGame),
            ('/delete_game/([\d]+)',DeleteGame),
                    ],
                    debug=True) 
```

和我的 baseController.py：

```
from controllers.authController import LoginSession
import webapp2
import cgi
import datetime
import urllib
import jinja2
import os
import wsgiref.handlers
from google.appengine.api import users

TEMPLATE_DIR = os.path.join(os.path.dirname(__file__), '../views/templates')
jinja_environment = \
        jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR))

class BaseHandler(LoginSession):
    @webapp2.cached_property
    def jinja2(self):
        return jinja2.get_jinja2(app=self.app)

    def render_template(
            self,
            filename,
            temp_values,
            **template_args):
            template = jinja_environment.get_template(filename)
            self.response.out.write(template.render(temp_values))

    def authvals(self): 
            current_player = LoginSession.current_player(self)
            url = LoginSession.url(self)
            url_linktext = LoginSession.linktext(self)
            auth_vals = {
                    'url': url,
                    'url_linktext': url_linktext,
                    'c_player': current_player,
            }
            return auth_vals

class MainPage(BaseHandler):    

    def get(self):
            gurl = self.request.get('/create_game')
            gurl_linktext = 'Create a New Game!'
            mp_vals = {
                    'game_url': gurl,
                    'game_url_linktext': gurl_linktext,
            }
            authvals = self.authvals()
            vals = dict(mp_vals.items() + authvals.items())
            self.render_template('index.html', vals) 
```

下面是 gameController.py 中的两个类。虽然“AllGames”似乎可以正确渲染所有内容，包括正确的 CSS 样式，但“PlayerGames”似乎可以渲染正确的 python 生成的内容和 html，但似乎没有使用任何 CSS。我希望 CSS 与“base.html”一起被继承，因为这是应用 CSS 样式的地方。但是，不知何故，这并没有发生。

```
from models.gameModel import *
from authController import *
from baseController import * 
import baseController
from google.appengine.ext import db
from google.appengine.ext.db import Key

class AllGames(BaseHandler):

    #this returns all games 
    def get(self):
        games = GameModel.all()
        ag_vals = {
            'games': games
        }
        authvals = self.authvals()
        vals = dict(ag_vals.items() + authvals.items())

        self.render_template('all_games.html',vals)

class PlayerGames(BaseHandler):

    #This returns a given player's games
    def get(self,player_id):
        player = users.User(_user_id = 'player_id')

        g = GameModel.all()
        games = g.filter('game_created_by =', player)         
        pg_vals = {
        'games': games
        }
        authvals = self.authvals()
        vals = dict(pg_vals.items() + authvals.items())

        self.render_template('player_games.html',vals) 
```

这是base.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<html xmlns="http://www.w3.org/1999/xhtml">

<html>
<head>
{% block head %}
    <link type="text/css" rel="stylesheet" href="views/static/css/main.css" />
    <link type="text/css" rel="stylesheet" href="views/static/css/reset.css" />
    <title>O2O: {% block title %}{% endblock %}</title>
{% endblock %}
</head>
<body>
<div class="login">
    {% block login %}
        <table>
            <tr>
                {% if c_player %}
                    <td>You are logged in as: {{ c_player }} </td>
                {% else %}
                    <td>You are not logged in.</td>
                {% endif %}

                <td><a href="{{ url }}">{{ url_linktext }}</a></td> 
            </tr>
        </table>
    {% endblock login %}
</div>
<div class="navbar">
    {% block navbar %}
    <table>
        <col class="navbar" />
        <colgroup class="controls"> 
            <col /> <col /> <col /> <col />
        </colgroup> 
        <tr>
            <th>
                <form action="/create_game" method="post"> 
                    <div><input type="submit" value = "Create a new Game!"></div>
                </form>
            </th>
            <th>
                <form action="/player_games/{{ c_player.user_id() }}" method="get">
                    <!--div><input type="hidden" value = {{ c_player.user_id() }} ></div-->
                    <div><input type="submit" value = "My Games" ></div>
                </form>
            </th>
            <!--th>
                <a href ="player_games/{{ c_player.user_id() }}">My Games</a>
            </th-->
            <th>
                <form action="/all_games" method="get">
                    <div><input type="submit" value = "All Games" ></div>
                </form>
            </th>

            <th>
                Stats?
            </th>
            <th>
                Current Games?
            </th>
        </tr>   
    </table>
    {% endblock navbar %}
</div>
<div class="content">{% block content %}{% endblock %}</div>
<div class="footer">
    {% block footer %}
    &copy; Copyright 2012</a>.
    {% endblock %}
</div>
</body>
</html> 
```

这是 all_games.html，它看起来确实被正确渲染了：

```
{% extends "base.html" %}
{% block title %} All Games {% endblock %}
{% block content %}     
    <h2>All Games</h2>

    <h4>These are all of the games:</h4>
        <table>
            <tr>
                <th>Time Created:                   </th>
                <th> ----------                     </th>
                <th>Game ID:                        </th>
                <th>Creator:                        </th>
                <th>Edit?                           </th>
                <th>Edit via button?                </th>
                <th>Delete?                         </th>
            </tr>       
            {% for game in games %}
            <tr>                
                <td> {{ game.game_created_at }}     </td>
                <td> ----------                     </td>   
                <td> {{ game.key().id() }}          </td>
                <td> {{ game.game_created_by }}     </td>
                <td>
                    <a href ="edit_game/{{ game.key().id() }}"> edit </a>
                </td>
                <td>    
                <!--button to view the game --> 
                    <form action="/edit_game/{{ game.key().id() }}" method="get">
                        <!--div><input type="hidden" name ="game_id" value={{ game.key().id() }}></div-->
                        <div><input type="submit" value = "Edit Game!" ></div>
                    </form> 
                </td>
                <td>        
                <!-- button to destroy the game -->
                    <form action="/delete_game/{{ game.key().id() }}" method="get">
                        <!--div><input type="hidden" name ="this_game" value={{ game.key().id() }}></div-->
                        <div><input type="submit" value = "Delete This Game?" ></div>
                    </form>
                </td>                           
            </p>
            </tr>                               
        {% endfor %}
        </table>        
{% endblock %} 
```

这里是 player_games.html，它与 all_games.html 几乎相同。然而，这似乎是在没有 CSS 的情况下呈现的，尽管 html 和内容显然是正确显示的：

```
{% extends "base.html" %}
{% block title %} PLayer's Games {% endblock %}
{% block content %}
    <h2>{{ c_player }}'s Games</h2>

    <h4>These are all of the games:</h4>
    <div id="gamelist">
        <table>
            <tr>
                <th>Time Created:                   </th>
                <th> ----------                     </th>
                <th>Game ID:                        </th>
                <th>Creator:                        </th>
                <th>Edit?</th>
                <th>Delete?</th>
            </tr>       
            {% for game in games %}
            <tr>                
                <td> {{ game.game_created_at }}     </td>
                <td> ----------                     </td>   
                <td> {{ game.key().id() }}  </td>
                <td> {{ game.game_created_by }}     </td>
                <td>    
                <!--button to edit the game --> 
                    <form action="/edit_game/{{ game.key().id() }}" method="get">
                        <!--div><input type="hidden" name ="game_id" value={{ game.key().id() }}></div-->
                        <div><input type="submit" value = "Edit Game!" ></div>
                    </form> 
                </td>
                <td>        
                <!-- button to destroy the game -->
                    <form action="/delete_game/{{ game.key().id() }}" method="get">

                        <div><input type="submit" value = "Delete This Game?" ></div>
                    </form>
                </td>                           
            </p>
            </tr>                               
        {% endfor %}
        </table>
    </div>
{% endblock %} 
```

这是 main.css，这可能不是问题，因为它在某些页面上正确呈现：

```
.login {
    background-color: black;
    color: #DDDDDD;
}

.navbar {
    background-color: black;
    color: #DDDDDD;
}

.content {
    background-color: white;
}

.footer {
    background-color: #DDDDDD;
} 
```

虽然我怀疑这是否真的与问题相关，但这里也是 authController.py：

```
import webapp2
import main
from google.appengine.api import users

class LoginSession(webapp2.RequestHandler):
    def current_player(arg):
        return users.get_current_user() 

    def linktext(arg):
        if users.get_current_user():
            return 'logout'
        else:
            return 'Login'

    def url(arg):
        if users.get_current_user():
            return users.create_logout_url(arg.request.uri)
        else:
            return users.create_login_url(arg.request.url) 
```

我的一些代码基于这个简单的笔记应用程序示例：[https](https://github.com/fRuiApps/cpfthw/tree/master/webapp2) ://github.com/fRuiApps/cpfthw/tree/master/webapp2 ，因为我发现它有一个很好、清晰的 MVC 结构。显然我的代码要广泛得多，但是关于如何呈现模板的一些代码或多或少基于示例。但是，该示例并没有受到我似乎遇到的 CSS 样式消失问题的影响。即，当我传递编辑特定注释的请求时，该示例似乎可以正确呈现 CSS。

我已经尝试解决这个问题几个小时了，尽管我付出了所有努力，但我似乎一无所获。由于我通常能够在 StackOverflow 上找到非常有用的信息，因此我认为这可能是发布问题的最佳地点。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T21:06:34.933

您正在使用相对路径加载 CSS。当 HTML 是“顶级”页面 (/create_game) 时，CSS 路径是相对于根的，一切都很好。当您下降一级 (/edit_game/1234) 时，CSS 会尝试从 /edit_game/views 加载。将 HTML 中的链接 href 更改为 begin /views，它可能会起作用。（如果您在您选择的浏览器中检查开发工具，您应该会看到 CSS 的 404，并且您将能够看到浏览器试图从哪里加载它们。）

# jquery-ui - 附加到 .show 和 .hide 的 jquery 自定义事件

> ID：10709364
> 
> 赞同：3
> 
> 时间：2012-05-22T20:05:44.553
> 
> 标签：jquery-ui, jquery

我正在探索 jquery 满足我们一些 UI 要求的潜力，并且正在经历一些奇怪的行为。我对 jQuery 很陌生，我正在尝试实现一种基本的 pub-sub 类型的模式，它与 show & hide 函数挂钩。

尽管自定义事件机制表面上看起来非常简单，但它的行为并不像我预期的那样。我看不到我的语法错误，所以我一定误解了这些自定义事件的工作方式。

当我执行这段代码时，这就是我认为*应该*发生的事情。

最初（在 doc.Ready 之后）应该隐藏 question2 元素。

当我单击“佛蒙特州”单选按钮时，问题 2 应该可见，然后是一个警告框，指示“问题 2 已可见”。

当我单击另一个单选按钮时，问题 2 应该被隐藏，然后是一个警告框，指示问题 2 已被隐藏。

实际发生的情况是，在使问题 2 可见时，我得到了许多警告框，而当我隐藏它时却没有？请帮助我理解它为什么这样做。

这是脚本：

```
 <script type="text/javascript">

    function processRadioButtonASD() {
        var isChecked = ($("input[name=question1]:checked").val() == "question1.Vermont");
        if (isChecked == true) {
            $("[data-uniquename=question2]").show(250);
        } else {
            $("[data-uniquename=question2]").hide(250);
        }
    }

    function detectVisibilityChange(uniqueName) {
        $("[data-uniquename=" + uniqueName + "]").bind("madeVisible", function () {
            alert($(this).attr("data-uniquename") + " was made visible");
        });
        $("[data-uniquename=" + uniqueName + "]").bind("madeHidden", function () {
            alert($(this).attr("data-uniquename") + " was made hidden");
        });
    }

    $(function () {
        $.each(["show", "hide"], function () {
            var _oldFn = $.fn[this];
            $.fn[this] = function () {
                var wasVisible = $(this).is(':visible');
                var result = _oldFn.apply(this, arguments);
                var isVisible = $(this).is(':visible');

                if ((isVisible == true) && (wasVisible == false)) {
                    $(this).triggerHandler("madeVisible");
                } else if ((isVisible == false) && (wasVisible == true)) {
                    $(this).triggerHandler("madeHidden");
                }
                return result;
            }
        });
    });

    $(document).ready(function () {
        processRadioButtonASD();
        detectVisibilityChange("question2");
        $("input[name='question1']").change(function () { processRadioButtonASD(); });
    });
</script> 
```

这是html：

```
 <div id="content">
    <div id="radioButtonASD" class="example">
        <h2>radio button visibility trigger</h2>
        <div data-uniquename="question1" class="question">
            <label for="question1">
                Question 1) (select Vermont to show Question2)
            </label>
            <br />
            <label data-uniquename="question1.Maine">
                <input name="question1" data-uniquename="question1.Maine" type="radio" value="me" />Maine</label><br />
            <label data-uniquename="question1.Vermont">
                <input name="question1" data-uniquename="question1.Vermont" type="radio" value="question1.Vermont" />Vermont</label><br />
            <label data-uniquename="question1.NewHampshire">
                <input name="question1" data-uniquename="question1.NewHampshire" type="radio" value="question1.NewHampshire" />New
                Hampshire</label><br />
            <label data-uniquename="question1.Conneticut">
                <input name="question1" data-uniquename="question1.Conneticut" type="radio" value="question1.Conneticut" />Conneticut</label><br />
            <label data-uniquename="question1.Massachusetts">
                <input name="question1" data-uniquename="question1.Massachusetts" type="radio" value="question1.Massachusetts" />Massachusetts
            </label>
        </div>
    <br />
        <div data-uniquename="question2" class="question">
            <label>
                Question 2)
            </label>
            <br />
            <select>
                <option data-uniquename="question2.honda" value="honda">Honda</option>
                <option data-uniquename="question2.volvo" value="volvo">Volvo</option>
                <option data-uniquename="question2.saab" value="saab">Saab</option>
                <option data-uniquename="question2.mercedes" value="mercedes">Mercedes</option>
                <option data-uniquename="question2.audi" value="audi">Audi</option>
            </select>
        </div>
    </div>
</div> 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:49:57.223

我想出了另一种方法。

```
$.each(["show", "hide"], function() {
    var effect = $.fn[this];
    $.fn[this] = function(duration, move, callback) {
        // Match the arguments
        var speed = duration;
        var easing = callback && move || move && !jQuery.isFunction( move ) && move;
        var fn = callback || !callback && move || jQuery.isFunction( duration ) && duration;
        // Wrap the callback function   
        var wrapped = fn;
        var wasVisible = $(this).is(':visible');
        fn = function(){
            var isVisible = $(this).is(':visible');
            $.proxy(wrapped, this);
            if ((isVisible == true) && (wasVisible == false)) {
                $(this).triggerHandler("madeVisible");
            } else if ((isVisible == false) && (wasVisible == true)) {
                $(this).triggerHandler("madeHidden");
            }
        };   
        // Run the effect with the wrapped callback             
        return effect.call(this, speed, easing, fn);
    };
}); 
```

这个想法是利用该`callback`功能。从那里你可以重构和清理代码。

看[一个工作示例](http://jsfiddle.net/D5aeH/)。

# php - 如何使用目标C中的请求和发布变量将请求发布到php脚本

> ID：10709371
> 
> 赞同：0
> 
> 时间：2012-05-22T20:06:16.613
> 
> 标签：php, ios

我想将来自 Objective-C 代码的发布请求发送到带有 URL 的 php 脚本

[http://ggg.abc.com/example.php?MO&email=test@gmail.com&message=TESTMSG&recipient=11111](http://ggg.abc.com/example.php?MO&email=test@gmail.com&message=TESTMSG&recipient=11111)

我尝试如下使用 ASIFormDataRequest，但是如何在请求中指定请求变量 MO？

```
NSURL* url = [NSURL URLWithString:ServerApiURL];
ASIFormDataRequest* request = [ASIFormDataRequest requestWithURL:url];
[request setDelegate:self];

// Add the POST fields
//[request setPostValue:@"" forKey:@"MO"];
//[request setRequestMethod:@"MO"];

[request setPostValue:@"test@gmail.com" forKey:@"email"]; 
[request setPostValue:@"TESTMSG" forKey:@"message"];
[request setPostValue:@"11111" forKey:@"recipient"]; 
```

或任何其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:04:15.407

作为最后的手段， -appendPostData: 应该可以工作。

[PUT 请求和自定义 POST](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

* * *

如果您想通过 PUT 发送数据，或者想通过 POST 发送数据但更喜欢自己创建 POST 正文，请使用 appendPostData: 或 appendPostDataFromFile:。

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[@"This is my data" dataUsingEncoding:NSUTF8StringEncoding]];
// Default becomes POST when you use appendPostData: / appendPostDataFromFile: / setPostBody:
[request setRequestMethod:@"PUT"]; 
```

如果您想发送大量数据并且不使用 ASIFormDataRequest，请参阅下面有关从磁盘流式传输帖子正文的信息。

* * *

对你来说，这将是：

```
NSURL* url = [NSURL URLWithString:ServerApiURL];
ASIFormDataRequest* request = [ASIFormDataRequest requestWithURL:url];
[request setDelegate:self];
[request appendPostData:[@"MO&email=test@gmail.com&message=TESTMSG&recipient=11111" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

祝你好运

* * *

更新最新评论的答案

```
NSURL* url = [NSURL URLWithString:ServerApiURL];
NSURL* urlWithParams = [NSURL URLWithString:@"?MO&email=test@gmail.com&message=TESTMSG&recipient=11111" relativeToURL:url];
ASIFormDataRequest* request = [ASIFormDataRequest requestWithURL:urlWithParams];
[request setDelegate:self];
// Does this request need to be a post? If so, then call -setRequestMethod:.
// NOTE: I don't know if zero length posts work.
[request setRequestMethod:@"POST"]; 
```

# java - Apache-Commons Sanselan AIOOBE 解压 PackBits TIFF 时

> ID：10709373
> 
> 赞同：0
> 
> 时间：2012-05-22T20:06:23.670
> 
> 标签：java, apache-commons, indexoutofboundsexception

尝试使用 Apache-Commons Sanselan 加载使用 PackBits 压缩压缩的 TIFF 时，出现开箱即用的 ArrayIndexOutOfBoundsException。

代码：

```
import org.apache.sanselan.*;

public class TIFFHandler {
    public static Image loadTIFF(String fileName) throws ImageReadException, IOException {
        File imageFile = new File(fileName);
        BufferedImage bi = Sanselan.getBufferedImage(imageFile);
        return bi;
    }

    public static void main(String[] args) throws IOException, ImageReadException {
        String TIFFFILE = "test_image.tif";
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        BufferedImage bi = (BufferedImage) loadTIFF(TIFFFILE);
        ImageIcon ii = new ImageIcon(bi);
        JLabel lbl = new JLabel(ii);
        panel.add(lbl);
        frame.setVisible(true);
    }
} 
```

堆栈跟踪：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 426
at org.apache.sanselan.common.PackBits.decompress(PackBits.java:55)
at org.apache.sanselan.formats.tiff.datareaders.DataReader.decompress(DataReader.java:127)
at org.apache.sanselan.formats.tiff.datareaders.DataReaderStrips.readImageData(DataReaderStrips.java:96)
at org.apache.sanselan.formats.tiff.TiffImageParser.getBufferedImage(TiffImageParser.java:505)
at org.apache.sanselan.formats.tiff.TiffDirectory.getTiffImage(TiffDirectory.java:163)
at org.apache.sanselan.formats.tiff.TiffImageParser.getBufferedImage(TiffImageParser.java:441)
at org.apache.sanselan.Sanselan.getBufferedImage(Sanselan.java:1264)
at org.apache.sanselan.Sanselan.getBufferedImage(Sanselan.java:1255)
at TIFFHandler.loadTIFF(FieldSheetHandler.java:42)
at TIFFHandler.main(FieldSheetHandler.java:90) 
```

我试图分析这个问题，但我很迷茫......任何方向都会非常有帮助。TIFF 图像令人痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:57:02.100

您可以从 Apache 快照存储库尝试更新版本的 Commons Imaging。Javadoc 尚未在线，您必须通过[从 SVN 中检查代码](http://commons.apache.org/imaging/source-repository.html)并运行`mvn javadoc:javadoc`.

如果您发现更多问题或想提出改进建议，您可以将它们提交到[JIRA](https://issues.apache.org/jira/browse/IMAGING)中。如果您对 API 的使用有任何疑问，开发人员也很乐意为您提供帮助。[他们在邮件列表](http://commons.apache.org/imaging/mail-lists.html)上等着你。

# ios - 传输高分和数据

> ID：10709374
> 
> 赞同：0
> 
> 时间：2012-05-22T20:06:24.113
> 
> 标签：ios, cocos2d-iphone, plist

我现在正在编写游戏内容，其中涉及将高分和基本数据（例如“音效开启”和“音乐开启”）保存到 plist 文件中。但是，如果将来我需要更新我的游戏并将新版本的应用程序上传到用户的 iphone/ipod 上，那么高分将如何保留？有没有办法在覆盖其他文件的同时保存特定的 plist 文件？提前致谢！

**编辑：** 有没有办法覆盖 plist 的一部分或将现有的 plist 与新的 plist 合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:47:02.323

如果您将这些 plist 放在文档目录中，则无需再做任何事情。当您的应用程序升级时，这些文件都会保留下来。你会得到这样的文档目录：

```
+ (NSString*) documentsPath
{
    NSArray* sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
    return [sysPaths objectAtIndex:0];
} 
```

# c# - 邀请使用多线程，分区器加速此代码的想法

> ID：10709376
> 
> 赞同：0
> 
> 时间：2012-05-22T20:06:44.963
> 
> 标签：c#, multithreading, task-parallel-library

我如何多线程将所有元素添加到哈希表集合的这个简单操作？

```
foreach (var x in listx) //List of x
{
    String temp1 = x.sc;
    String temp2 = x.key;
    Nullable<int> temp3 = x.val;

    if ((null != temp2) && (string.Empty != temp2) && (int.MinValue != temp3) && "Fetch" == temp1)
    {
        if (false == htTempVal.ContainsKey(temp2.Trim()))
            htTempVal.Add(temp2.Trim(), temp3);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:32:27.197

只有几个快速的性能改进：

(1) 在分配 temp2 时修剪 x.Key 而不是在循环中修剪 temp2。

(2) 是否可以将 htTempVal 设为 HashSet？HashSets 已经过优化，允许您只添加而不必担心检查密钥是否存在。通过为我的对象覆盖 GetHashCode 并使用 HashSet，我已经看到了惊人的性能改进。

这些都是小而容易的，但如果你有大约。100 万条记录，它可能会开始干扰性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:18:33.870

找到一个线程安全的哈希表？

你能先对你的项目进行排序，然后只添加唯一的项目吗？可能有一个并行排序。然后您可以跳过 ContainsKey() 测试。

或者，为什么不跳过该测试，如果有错误则忽略该错误。

最后，一百万件物品怎么会很慢？一定有别的事情发生了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T22:28:07.430

您可以这样做，将哈希表替换为`ConcurrentDictionary`. 但是，不能保证您会获得任何加速，因为您基本上只是在循环中执行原子操作：

```
ConcurrentDictionary<String, Nullable<int>> htTempVal = 
           new ConcurrentDictionary<String, Nullable<int>>();

Parallel.ForEach (listx,
  x =>
  {
      String temp1 = x.sc;
      String temp2 = x.key.Trim();
      Nullable<int> temp3 = x.val;

      if ((null != temp2) && (string.Empty != temp2) && 
          (int.MinValue != temp3) && "Fetch" == temp1)
      {
          htTempVal.GetOrAdd(temp2, temp3);
      }
  }); 
```

`ConcurrentDictionary.GetOrAdd`原子地检查并添加一个键值对，如果它不存在，或者如果它已经在字典中，则返回该值（您可以忽略它）。

# operating-system - 自定义引导扇区虚拟 CD

> ID：10709377
> 
> 赞同：0
> 
> 时间：2012-05-22T20:06:48.140
> 
> 标签：operating-system, virtual-machine, bootloader, bootstrapping

遵循大量“如何构建自己的操作系统”教程，
我应该通过以下方式编写自定义加载程序到软盘引导扇区

```
#include <sys/types.h> /* unistd.h needs this */
#include <unistd.h>    /* contains read/write */
#include <fcntl.h>

int main()
{
    char boot_buf[512];
    int floppy_desc, file_desc;

    file_desc = open("./boot", O_RDONLY);
    read(file_desc, boot_buf, 510);
    close(file_desc);

    boot_buf[510] = 0x55;
    boot_buf[511] = 0xaa;

    floppy_desc = open("/dev/fd0", O_RDWR);
    lseek(floppy_desc, 0, SEEK_CUR);
    write(floppy_desc, boot_buf, 512);
    close(floppy_desc);
} 
```

我没有带软驱的 PC，我更喜欢通过 VirtualBox 在虚拟机上尝试整个项目。

那么如何将自定义引导扇区写入将由我的虚拟机调用的虚拟 CD 映像？:)
如果您有任何替代方法，请提出建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:45:03.577

（注意：这假设你在 linux 上）

`/dev/fd0`您可以写入一些可用于启动 VirtualBox 的磁盘映像，而不是写入需要真正的软盘驱动器的 . 但是，您需要将文件填充到 1.44MiB，因为这是典型的软盘。

更好的方法是首先创建引导扇区二进制文件（使用 0xAA55 '魔术代码'），然后执行类似`dd if=MyBootsectorBin of=Floppy.flp bs=512 count=2880`创建输出文件 Floppy.flp 的操作。然后可以通过 VirtualBox（或我的偏好，QEMU，通过`qemu -fda Floppy.flp`）启动它。

我不确定虚拟 CD，但您可以轻松创建 ISO 以写入磁盘。所需的程序是 mkisofs，可以从[这里](http://wiki.osdev.org/El-Torito "包含制作可引导 ISO 的说明，包括编写引导扇区。")阅读更多关于它的信息。

# c# - c# - 阅读 HTML？

> ID：10709378
> 
> 赞同：3
> 
> 时间：2012-05-22T20:06:51.287
> 
> 标签：c#, html, parsing

我正在用 C# 开发一个程序，我需要一些帮助。我正在尝试创建显示在某个网站上的数组或项目列表。我想要做的是阅读锚文本，它是`href`. 例如，这是 HTML：

```
<div class="menu-1">
    <div class="items">
        <div class="minor">
            <ul>
                <li class="menu-item">
                    <a class="menu-link" title="Item-1" id="menu-item-1"
                    href="/?item=1">Item 1</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" title="Item-1" id="menu-item-2"
                    href="/?item=2">Item 2</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" title="Item-1" id="menu-item-3"
                    href="/?item=3">Item 3</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" title="Item-1" id="menu-item-4"
                    href="/?item=4">Item 4</a>
                </li>
                <li class="menu-item">
                    <a class="menu-link" title="Item-1" id="menu-item-5"
                    href="/?item=5">Item 5</a>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

所以从那个HTML我想读这个：

```
string[,] array = {{"Item 1", "/?item=1"}, {"Item 2", "/?item=2"},
    {"Item 3", "/?item=3"}, {"Item 4", "/?item=4"}, {"Item 5", "/?item=5"}}; 
```

HTML 是我写的一个例子，实际的网站不是这样的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T20:35:29.613

正如其他人所说，HtmlAgilityPack 是 html 解析的最佳选择，也请务必从 HtmlAgilityPack 站点下载 HAP Explorer，使用它来测试您的选择，无论如何，此 SelectNode 命令将获取所有具有 ID 的锚点，并以 menu-item 开头：

```
 HtmlDocument doc = new HtmlDocument();
  doc.Load(htmlFile);
  var myNodes = doc.DocumentNode.SelectNodes("//a[starts-with(@id,'menu-item-')]");
  foreach (HtmlNode node in myNodes)
  {
    Console.WriteLine(node.Id);

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:18:05.783

如果 HTML 是有效的 XML，您可以使用类加载它`XmlDocument`，然后使用 XPaths 访问您想要的部分，或者您可以`XmlReader`按照 Adriano 的建议使用和（多做一些工作）。

如果 HTML 不是有效的 XML，我建议使用一些现有的 HTML 解析器——例如看[这个](http://archive.msdn.microsoft.com/SgmlReader)——这对我们来说工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:24:01.370

您还可以使用[HtmlAgility](http://htmlagilitypack.codeplex.com/)包

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T20:33:34.947

我认为这种情况很简单，可以使用正则表达式，例如`<a.*title="([^"]*)".*href="([^"]*)"`：

```
string strRegex = @"<a.*title=""([^""]*)"".*href=""([^""]*)""";
RegexOptions myRegexOptions = RegexOptions.None;
Regex myRegex = new Regex(strRegex, myRegexOptions);

string strTargetString = ...;

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Use the groups matched
  }
} 
```

# mysql - 如何知道在使用“重复键更新”时是否插入或更新了一行？

> ID：10709380
> 
> 赞同：33
> 
> 时间：2012-05-22T20:07:00.053
> 
> 标签：mysql

我们有一个每天午夜通过 cronjob 更新的数据库，我们从外部 XML 获取新数据。

我们所做的是插入所有新内容，如果有重复的键，我们会更新该字段。

```
INSERT INTO table (id, col1, col2, col3)
values (id_value, val1, val2, val3),
(id_value, val1, val2, val3),
(id_value, val1, val2, val3),
(id_value, val1, val2, val3),
ON DUPLICATE KEY UPDATE 
col1 = VALUES (col1), 
col2 = VALUES (col2), 
col3 = VALUES (col3); 
```

我们想知道实际插入了哪些行，这意味着我们想要一个新项目的列表。是否有任何可能返回新插入的查询？基本上，我们需要获取所有新 ID，而不是新插入的数量。

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-22T20:12:16.440

您可以在插入/更新时通过检查结果集中受影响的行数来获取此信息。

MySQL[文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)指出：

> 使用 ON DUPLICATE KEY UPDATE，如果将行作为新行插入，则每行的受影响行值为 1，如果更新现有行，则值为 2。

您需要将 ROW_COUNT 与 LAST_INSERT_ID 结合起来以获得答案并一次插入一行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T20:33:12.703

添加一`update_count INT NOT NULL DEFAULT 1`列并更改您的查询：

```
INSERT
INTO    table (id, col1, col2, col3)
VALUES
(id_value, val1, val2, val3),
(id_value, val1, val2, val3,),
(id_value, val1, val2, val3),
(id_value, val1, val2, val3),
ON DUPLICATE KEY
UPDATE 
        col1 = VALUES (col1), 
        col2 = VALUES (col2), 
        col3 = VALUES (col3),
        update_count = update_count + 1; 
```

您还可以在`BEFORE UPDATE`触发器中增加它，这将允许您保持查询不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T22:13:49.000

我可以说我在 PHP 中的表现：

1) 简单查询 SELECT MAX(id) 并在 Insert On Duplicate 之前将其记住到 $max_id 从表中。

2）然后在更新过程中收集受影响行的ID（无论是新的还是存在的）： $ids[] = mysql_insert_id();

3) 然后$inserted_rows = max($ids)-$max_id;

4) 更新行数 = count($ids_srt)-$inserted_rows

```
$max_id = mysql_query("SELECT MAX(id) from table");
$max_id = mysql_result($max_id, 0);

// !!! prepare here 'insert on duplicate' query in a cycle

$result=mysql_query($query);
$ids[] = mysql_insert_id();

// finish inserting and collecting affected ids and close cycle

$inserted_rows = max($ids)- $max_id;
$updated_rows = count($ids)- $inserted_rows 
```

# php - javascript typeof 不适用于 PHP 变量？

> ID：10709381
> 
> 赞同：-4
> 
> 时间：2012-05-22T20:07:00.327
> 
> 标签：php, javascript, variables

只是想知道，“typeof”javascript 验证（你知道，你在 javascript 中检查未定义变量的方法）与 PHP vars 的工作方式不同吗？

我愿意

```
alert(typeof <? echo $_SESSION['thing'] ?>); 
```

这甚至没有执行（我想它至少会弹出为空白）

但如果我这样做

```
alert(<? echo $_SESSION['thing'] ?>); 
```

警报显示“未定义”

所以我想知道使用javascript检查未定义的PHP var的正确方法是否只是回显它们？如果不是请纠正我，但如果是我认为它会很好分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:09:32.730

```
if(isset($_SESSION['thing'])) {
   echo 'thing is set';
} else {
   echo 'thing is not set';
} 
```

这是检查变量是否已设置的 PHP 方法。

[http://uk.php.net/isset](http://uk.php.net/isset)

***编辑：***

如果我想在 JavaScript 中检查 PHP 变量，我想我会这样做：

```
<?php
echo '<script type="text/javascript">alert("'.(isset($variable) ? $variable : 'Undefined Variable').'");</script>';
?> 
```

上面的代码检查变量是否在 PHP 中设置，如果是，则将`echo`其输出到警报语句中，如果不是，则警告一个空白值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:09:36.403

JavaScript 中没有 PHP 变量之类的东西。

PHP 正在做的是“组合”JavaScript 的输出文本。

点击“查看源代码”并查看 PHP 放在一起的最终文本。

添加到答案@Chief17 给了你：

```
var x_string_val = "<?php echo ((isset($value) AND !empty($value)) ? $value : $default) ?>";
var x_any = <?php echo ((isset($value) AND !empty($value)) ? $value : $default) ?>;
var x_type = typeof(<?php echo ((isset($value) AND !empty($value)) ? $value : $default) ?>); 
```

如果是字符串，请确保从 PHP 输出引号或在 javascript 中引用该值。否则可能会导致更多错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:11:39.577

想想会发生什么。PHP 在服务器上执行。PHP 语句的`result`插入到发送到客户端的 HTML/JavaScript 中。

因此，如果您的会话变量包含`Foo`，结果将是

```
alert(typeof Foo); 
```

和

```
alert(Foo); 
```

正如您可能理解的那样，Foo 不是在您的客户端 JavaScript 的上下文中定义的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T20:10:32.307

您需要将变量分配给 javascript 变量。如果您在 php 渲染后查看 HTML 源代码，您可能会看到如下内容：

```
alert(typeof some value for thing); 
```

这将是一个语法错误。

改为这样做

```
var thing = "<?php echo $_SESSION['thing']; ?>";
alert( typeof thing ); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-22T20:09:54.123

```
alert(typeof <? echo $_SESSION['thing'] ?>); 
```

这有一个糟糕的语法 - 它应该是`alert(typeof(some_variable))`

```
alert(<? echo $_SESSION['thing'] ?>); 
```

这应该像

```
alert("<?php echo $_SESSION['thing']; ?>"); 
```

而且您尝试做的事情毫无意义，因为 js 应该如何使用来自不同语言的变量？oO

# iphone - UITableViewCell imageView 不显示

> ID：10709384
> 
> 赞同：7
> 
> 时间：2012-05-22T20:07:24.997
> 
> 标签：iphone, ios, objective-c, ipad, afnetworking

所以我有以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *CellIdentifier = @"FriendsCell";

    FriendData * fd = [self.friendsDataSource_ objectAtIndex:indexPath.row];

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    [cell.imageView  setImageWithURL:[NSURL URLWithString:fd.imageUrl_]];
    [cell.imageView setFrame:CGRectMake(0, 0, 30, 30)];
    [cell.textLabel setText:fd.name_];

    return cell;
} 
```

但是，我没有在单元格中看到 imageView。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:06:11.917

SDImageCache 也有同样的问题。我的解决方案是使用您想要的帧大小放置一个占位符图像。

```
 UIImage *placeholder = [UIImage imageNamed:@"some_image.png"];
 [cell.imageView setImage:placeholder];
 [cell.imageView setImageWithURL:[NSURL URLWithString:fd.imageUrl_]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T23:03:45.860

1) 使用 URL 设置图像不是 iOS 方法。这是定制的，这可能是问题所在。但在您发布之前，它无济于事。

2）我认为 cell.imageView 会忽略“setFrame”。我无法使用图像在我的任何表格单元格中使用它。它似乎总是默认为图像的宽度。

3) 通常您使用 cell.imageView.image = your_Image 设置图像。ImageView 是只读的，并且可能 ImageView 框架是私有的。

4）我认为您将需要创建自己的自定义单元格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-30T07:02:28.880

使用带有占位符的方法将修复它。

```
[cell.imageView setImageWithURL:[NSURL URLWithString:fd.imageUrl_]placeholderImage:[UIImage imageNamed:@"placeholder"]]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T20:12:59.510

你需要`return cell`在方法结束时

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *CellIdentifier = @"FriendsCell";

    FriendData * fd = [self.friendsDataSource_ objectAtIndex:indexPath.row];

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    [cell.imageView  setImageWithURL:[NSURL URLWithString:fd.imageUrl_]];
    [cell.imageView setFrame:CGRectMake(0, 0, 30, 30)];
    [cell.textLabel setText:fd.name_];
    return cell;
} 
```

# c# - 有没有办法为所有 C<> 设置一个静态字段值？

> ID：10709389
> 
> 赞同：2
> 
> 时间：2012-05-22T20:07:46.393
> 
> 标签：c#, generics

我想编写一个 C 类，使其具有一个静态字段，该字段被初始化一次并且对于所有 C<> 保持不变。

这可能吗？

这是我正在使用的示例：

```
void Main()
{
    Console.WriteLine (C<A>.Value);
    Console.WriteLine (C<B>.Value);
    Console.WriteLine (C<A>.Value2);
    Console.WriteLine (C<B>.Value2);
}

class C<T>
{
    static O O = new O();
    public static string Value { get { return "value of C<T> where T : " + typeof(T).Name; } }
    public static string Value2 { get { return O.ToString() ?? "value of C<T> where T : " + typeof(T).Name; } }
}

class O
{
    Guid guid;
    public O()
    {
        this.guid = Guid.NewGuid();
        Console.WriteLine ("O created {0}", this.guid);
    }
    public override string ToString()
    {
        return this.guid.ToString();
    }
}

class A
{
}

class B
{
} 
```

**输出：**

```
value of C<T> where T : A
value of C<T> where T : B
O created 05e6885b-2aa3-4d0d-aec1-fefbe5294f07
05e6885b-2aa3-4d0d-aec1-fefbe5294f07
O created 864554bf-6980-4a0f-9b63-4c0affa21222
864554bf-6980-4a0f-9b63-4c0affa21222 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:08:41.973

当然，从 BaseC 派生 C 并在那里声明静态字段，如下所示：

```
class BaseC
{
    protected static O = new O();
}

class C<T>: BaseC ... 
```

# jquery - 为什么我的 span 标签点击不适用于 jQuery？

> ID：10709392
> 
> 赞同：-2
> 
> 时间：2012-05-22T20:08:05.773
> 
> 标签：jquery, asp.net-mvc-3

```
 <li class="resultsTitle left"><span>Total Results&nbsp;</span><span id="totalResults" class="bold">@totals.TotalResults.ToString("N0")</span></li>
<li class="resultsTitle left"><span>Company Results&nbsp;</span><span id="companyResults" class="bold">@totals.CompanyCount.ToString("N0")</span></li>

$(document).ready(function () {
    $("#companyResults").click(function () {
        alert('hello world');
    });

    $("#totalResults").click(function () {
        alert('hello world');
    });
}); 
```

我们尝试了一些方法来捕获点击事件。我们做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:11:04.273

在这里对我来说很好

[http://jsfiddle.net/uhgZg/](http://jsfiddle.net/uhgZg/)

验证您的布局页面或视图中是否包含正确的 jQuery

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

并验证此代码是否在脚本标记中

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#companyResults").click(function () {
            alert('hello world');
        });

        $("#totalResults").click(function () {
            alert('hello world');
        });
    });
</script> 
```

当这些东西到位时，代码会完美触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:16:56.983

我会给你我看到的与这个问题有关的 2 个选项

*   您的 id不是唯一的，这会造成麻烦`#companyResults`。`#totalResults`如果是这种情况，您可以使用 css 类来选择元素而不是 id。

*   您的页面上有一个 js 错误，导致 click 事件处理程序无法正常运行。您可以使用 firebug 或 chrome 开发工具轻松检测到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:25:03.593

两个建议：

1.  添加`alert(jQuery().jquery);`到您的 Javascript 以验证 jQuery 是否被正确加载。如果是这样，您应该会看到带有 jQ​​uery 版本号的警报。

2.  如果没有看到您如何设置标记样式，很难判断这是否可能，但也许您正在通过单击“总结果”而不是您输出的粗体值来测试您的代码？编写的 Javascript 仅在`@totals.etc...`输出上注册点击处理程序。

# javascript - 为什么这个 !important CSS 值会被覆盖？

> ID：10709395
> 
> 赞同：15
> 
> 时间：2012-05-22T20:08:26.317
> 
> 标签：javascript, css

HTML：

```
<div id="test">This is a test</div> 
```

JavaScript：

```
var elem = document.getElementById('test');

elem.style.setProperty('color', 'green', 'important');
elem.style.color = 'red'; 
```

**现场演示：** [//jsfiddle.net/4fn6h/3/](http://jsfiddle.net/4fn6h/3/)

文本在 Chrome、Safari 和 IE9 中为绿色，但在 Firefox 和 Opera 中为红色。（另外，IE7 和 IE8 中的文字是黑色的，因为代码会抛出错误，但是我们忽略它......）

那么，哪些浏览器遵循这里的标准呢？是否可以覆盖 a `setProperty(...,'important')`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T03:57:24.007

规格不清楚。有两种查看方式：

1.  这是 WebKit/IE9 中的一个错误。如果您要覆盖该`color`值，则没有理由保留旧值，无论是否*重要*。
2.  WebKit/IE9 是正确的。DOM 接口`style`操作`style`元素的属性，这被认为是[CSS 声明块](http://www.w3.org/TR/1998/REC-CSS2-19980512/syndata.html#block)。在 CSS 块中，带有`!important`set的属性*总是*优先于没有设置的属性。根据该规则，对“红色”的更改应该没有效果，因此它实际上被忽略了。

我相信后者是最可能的解释。考虑有这样的声明：

```
p { color: red !important; } 
```

如果添加第二`color`条规则，没有`!important`，它没有效果：

```
p {
  color: red !important;
  color: blue;
}
/* the color is still red */ 
```

这同样适用于`style`直接操作 HTML 属性。

所以 Chrome/Safari/IE9 中的行为与 CSS 级联规则是一致的，而 FF 和 Opera 将 DOM 样式视为一个简单的对象，而不考虑级联规则，而不是 CSS 声明的接口。

[http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/css.html#CSS-CSSStyleDeclaration](http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/css.html#CSS-CSSStyleDeclaration)

* * *

有趣的事实：webkit 似乎正在为 进行字符串匹配`important`，所以这也有效：

```
elem.style.setProperty('color', 'red', 'this is a really important rule'); 
```

* * *

还有一个提示：下次选择更好的颜色对，你让色盲很难帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:34:08.163

是否可以覆盖 setProperty(...,'important') ？是的，它应该。但你必须用另一个`ele.style.setProperty`电话来做。看看[这个](http://jsfiddle.net/DTgtx/)，你应该`red`在所有现代浏览器中都能看到。

那么，哪些浏览器遵循这里的标准呢？由于`green`设置为`!important`，不应替换为`red`因为`red`未设置为`!important`。这意味着 chrome、safari 和 IE9 遵循标准，而 firefox 则没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:23:06.873

可能是 Firefox 和 Opera 的行为更合适。

当您发出 elem.style.color = 'red'; 您没有关闭颜色的“重要”优先级，在这种情况下，将颜色更改为红色是有意义的。至于他们为什么选择这样或那样做，我不知道。

# c# - 库设置

> ID：10709397
> 
> 赞同：0
> 
> 时间：2012-05-22T20:08:33.020
> 
> 标签：c#, asp.net, web-config, app-config

1.  我有一个访问 app.config 中配置的数据库的库项目
2.  我有一个访问 web.config 中配置的数据库的 Web 项目

两者都正常工作

现在我想使用 web 项目中的库。在 Visual Studio 中工作正常。在生产服务器中，Web 项目访问数据库，但库不能从项目 Web 访问数据库。

app.config 和 web.config 中的 ConnectionString 是相同的。在生产服务器中不应该采用 web.config 设置吗？

谢谢和对不起我的英语

**编辑**

web.config 和 app.config 连接字符串

```
<connectionStrings> 
    <add name="IntranetConnectionString" 
         connectionString="Data Source=(local)\SQLExpress;Initial Catalog=Intranet;Integrated Security=True;" 
         providerName="System.Data.SqlClient" /> 
    <add name="Database.Properties.Settings.IntranetConnectionString" 
         connectionString="Data Source=(local)\SQLEXPRESS;Initial Catalog=Intranet;Integrated Security=True" 
         providerName="System.Data.SqlClient" /> 
</connectionStrings> 
```

错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:16:54.730

解决方案：

在 DLL 中创建一个类以使用接收 ConnectionString 的构造函数访问 DataTable

```
public TestBLL(String ConnectionString)
{
    TestTableAdapter ta = new TestTableAdapter();
    ta.Connection = new System.Data.SqlClient.SqlConnection(ConnectionString);
} 
```

在 Web 项目中：

```
String cs = System.Configuration.ConfigurationManager.ConnectionStrings["IntranetConnectionString"].ToString();
TestBLL taBLL = new TestBLL(cs); 
```

在 taBLL 中有访问每个查询的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:42:43.670

DLL 通常采用调用它的主机应用程序的 app.config，而不是它自己的配置。这里有肉吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:22:20.320

如果我理解正确，请尝试将库的引用复制到本地，为此，`right-click`您的项目中的引用，然后在属性中设置`True`为`Copy Local`，现在您将在服务器中本地拥有库。

如果问题与库的引用有关，这应该可以工作，如果是问题，它将`web.config/app.config`无济于事

# javascript - 是否可以在 JS 中获取保留字（变量、函数、对象名称）列表？

> ID：10709404
> 
> 赞同：1
> 
> 时间：2012-05-22T20:09:03.350
> 
> 标签：javascript

[这个 SO 线程上](https://stackoverflow.com/questions/26255/reserved-keywords-in-javascript)有很多很棒的信息

我可以从那里提供的网站上抓取关键字，**但**我想问是否可以实时抓取保留关键字？也许有一些存储它们的结构？

对于窗口中的全局对象，我可以用这个来抓取它们：

```
for(var i in window) doSomethingWith(i) 
```

但我还需要所有特定于语言的关键字，例如：**if、case、switch**等。

**抱歉**，我不想写“当时”。**我在过去的一个小时里用Pascal**编码（回忆旧时光），该死的，它卡在了我的脑海里！

**我想要做什么：**听起来可能很奇怪，但是我正在构建一个可以创建元素的应用程序，它们有名称、值、公式和公式是纯 JS 公式，除了我运行正则表达式来稍微修改变量并想要离开 javascript 语法。

例如，如果公式是：`if (a < b) { c = d; }` 在这种情况下，我只想修改**a、b、c**和**d**。

如果公式类似于：`switch(a) { case 0: a=b; break; case 1: b=c; ... }` 在这种情况下，我想过滤掉“ **switch, break, case** ”。

好吧，也许我应该删除这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:11:27.113

好吧，如果你用谷歌搜索“javascript 保留字”，你会得到：

```
abstract (*)
as (2)
boolean
break
byte
case
catch
char
class (2)
continue
const (2)
debugger (*)
default
delete
do
double
else
enum (*)
export (2)
extends (2)
false
final
finally
float
for
function
goto (*)
if
implements (*)
import (2)
in
instanceof
int
interface (2)
is (2)
long
namespace (2)
native (*)
new
null
package (2)
private (2)
protected (*)
public (2)
return
short
static (2)
super (2)
switch
synchronized (*)
this
throw
throws (*)
transient (*)
true
try
typeof
use (2)
var
void
volatile (*)
while
with 
```

来源：http: [//javascript.about.com/library/blreserved.htm](http://javascript.about.com/library/blreserved.htm)

我不确定您所说的“抓住”它们是什么意思，但是您可以将所有这些单词放在一个数组中，然后在一个文本块中搜索数组的每个元素......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:18:31.867

在管子上快速搜索（你应该总是先用谷歌搜索）想出了这段我永远不会看到的代码，一个保留字检查器。我什至没有尝试玩它，所以不知道它是否正确。

```
https://github.com/revolution42/Javascript-Reserved-Word-Checker/blob/master/checker.js 
```

# javascript - 使 javascript 使用小数位

> ID：10709407
> 
> 赞同：-1
> 
> 时间：2012-05-22T20:09:11.433
> 
> 标签：javascript, decimal

我有这个脚本，当按下按钮时，它会在结果中添加一个按钮值。该功能正常工作，因为它应该，但我需要让我使用十进制值，如：1,00245

这是代码：

```
 <html>
        <head>

        <script>
        function pushButton(buttonValue) {
             if (buttonValue == 'C') {
                  document.getElementById('screen').value = '0';
             }
             else {//this is where most changes occured
                    var x= document.getElementById('screen').value 
                    x =parseInt(x)+ parseInt(buttonValue);
                    document.getElementById('screen').value=x;
             }
        }
        function calculate(equation) {
             var answer = eval(equation);
             document.getElementById('screen').value = answer;
        }

        </script>
        </head>

        <body>
        <table class="calc" cellpadding=10>
        <tr><td colspan=3><input class="calc" id="screen" value='0'type="text"></td></tr>
        <tr>
        <td><input class="calc" type="button" value=1 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=2 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=3 onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
        <td><input class="calc" type="button" value=4 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=5 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=6 onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
        <td><input class="calc" type="button" value=7 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=8 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=9 onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
        <td><input class="calc" type="button" value='C' onclick="pushButton(this.value);"></td>
        </tr>
        </table>

        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:12:24.253

使用`parseFloat`而不是`parseInt`.

```
x =parseInt(x) + parseInt(buttonValue); 
```

`x`当您需要浮点数时，这会将您的输入展平为整数。

# java - 在放心的请求正文中将对象序列化为 json

> ID：10709409
> 
> 赞同：3
> 
> 时间：2012-05-22T20:09:15.993
> 
> 标签：java, json, resteasy, rest-assured

我正在使用[resteasy](http://www.jboss.org/resteasy/)制作一个 rest api ，并用[rest-assured](http://code.google.com/p/rest-assured/)对其进行测试。

假设我有一个类 ,`message`有一个属性`text`。

```
@XmlRootElement
public class message {
  @XmlElement
  public String text;
} 
```

以下测试将尝试将此对象发布到给定的 url：

```
message msg = new message();
msg.text = "some message";

expect()
  .statusCode(200)
.given()
   .contentType("application/json")
   .body(msg)
.when()
  .post("/message"); 
```

msg 对象被序列化为 json 并发布，但不是以我想要的方式 - 不是以 resteasy 需要的方式，也就是说。

发布的内容：

```
{ "text": "some message" } 
```

什么工作：

```
{ "message": { "text": "some message" } } 
```

有没有人知道我如何才能按预期进行这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-20T15:13:46.443

我知道已经有了答案，但我想分享我能够发送 json 对象的方式。有人可能会觉得有帮助

```
// import org.json.simple.JSONObject;
JSONObject person = new JSONObject();
person.put("firstname", "Jonathan");
person.put("lastname", "Morales");

JSONObject address = new JSONObject();
address.put("City", "Bogotá");
address.put("Street", "Some street");
person.put("address", address);

String jsonString = person.toJSONString();
// {"address":{"Street":"Some street","City":"Bogotá"},"lastname":"Morales","firstname":"Jonathan"}

// import static com.jayway.restassured.RestAssured.*;
given().contentType("application/json")
       .body(jsonString)
       .expect().statusCode(200)
       .when().post("http://your-rest-service/"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T14:10:19.357

您可能正在使用带有 RestEasy 的内置 Jettison JSON 序列化程序。Jettison 使用 XML-> Json 约定（也称为 BadgerFish）。将 Jettison 替换为 Jackson 或 GS​​on 以获得与 RestAssured 兼容的 JSon 格式。

# iphone - 没有在覆盖视图上绘制线条

> ID：10709410
> 
> 赞同：5
> 
> 时间：2012-05-22T20:09:18.063
> 
> 标签：iphone, mkmapview, mapkit, cgcontext, mkoverlay

我试图在叠加视图中的两点之间画一条直线。在 MKOverlayView 方法中，我认为我做得正确，但我不明白为什么它没有画线......

有谁知道为什么？

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale
          inContext:(CGContextRef)context
{
    UIGraphicsPushContext(context);

    MKMapRect theMapRect = [[self overlay] boundingMapRect];
    CGRect theRect = [self rectForMapRect:theMapRect];

    // Clip the context to the bounding rectangle.
    CGContextAddRect(context, theRect);
    CGContextClip(context);

    CGPoint startP = {theMapRect.origin.x, theMapRect.origin.y};
    CGPoint endP = {theMapRect.origin.x + theMapRect.size.width,
        theMapRect.origin.y + theMapRect.size.height};

    CGContextSetLineWidth(context, 3.0);
    CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);

    CGContextBeginPath(context);
    CGContextMoveToPoint(context, startP.x, startP.y);
    CGContextAddLineToPoint(context, endP.x, endP.y);
    CGContextStrokePath(context);

    UIGraphicsPopContext();
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:17:48.560

正在使用哪些值绘制线`startP`，但它们使用包含值的值进行初始化。`endP``CGPoint``theMapRect``MKMapPoint`

相反，使用`theRect`您从`theMapRect`using转换而来的初始化它们`rectForMapRect`。

此外，对于线宽，您可能希望使用该`MKRoadWidthAtZoomScale`函数对其进行缩放。`3.0`否则，除非您放大得很近，否则将看不到固定的线宽。

更改后的代码如下所示：

```
CGPoint startP = {theRect.origin.x, theRect.origin.y};
CGPoint endP = {theRect.origin.x + theRect.size.width,
    theRect.origin.y + theRect.size.height};

CGContextSetLineWidth(context, 3.0 * MKRoadWidthAtZoomScale(zoomScale)); 
```

`MKOverlayView`最后，为什么不使用 a`MKPolylineView`来避免手动绘制线条 ，而不是 custom ？

# android - ScrollView 中的 Android ListView 行未完全显示 - 已剪辑

> ID：10709411
> 
> 赞同：21
> 
> 时间：2012-05-22T20:09:21.217
> 
> 标签：android, listview, textview, scrollview

我在 ScrollView 中嵌入 ListView 时遇到了问题，或者至少我猜这就是问题所在。ListView 元素是一个相当简单的元素：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/item_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/general_background_list_middle" 
    android:paddingTop="4dp"
    android:paddingBottom="4dp"
    android:paddingRight="0dp"
    android:paddingLeft="0dp">

    <ImageView
        android:id="@+id/chat_friends_avatar"       
        android:layout_width="45dp"
        android:layout_height="45dp"
        android:layout_marginLeft="7dp"
        android:layout_marginRight="8dp"
        android:paddingRight="0dp" 
        android:paddingLeft="0dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/friends_icon_avatar_default"/>

    <TextView
        android:id="@+id/chat_message_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/chat_friends_avatar"
        android:layout_alignParentTop="true"
        android:layout_marginRight="35dp"
        android:maxLines="10"
        android:textSize="12dp"/>

    <TextView
        android:id="@+id/chat_friend_name"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="3dp"
        style="@style/SubText"
        android:layout_toRightOf="@id/chat_friends_avatar"      
        android:layout_below="@id/chat_message_text" />

    <TextView
        android:id="@+id/chat_message_time"
        android:layout_width="80dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="8dp"
        android:layout_marginTop="3dp"
        style="@style/SubText"
        android:layout_alignParentRight="true"
        android:layout_below="@id/chat_message_text" />

</RelativeLayout> 
```

但是，当我在 ScrollView 中嵌入此类元素的列表时，在其他一些元素之间，行没有完全显示，如果文本被换行，它们会被剪裁（见下图）。ListView 在 ScrollView 中实例化如下：

```
<ListView
android:id="@+id/info_chat_listview"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:cacheColorHint="@color/frame_background_color"
android:clickable="false"
android:divider="@null"
android:footerDividersEnabled="false"
android:focusable="false" >
</ListView> 
```

如果 ListView 的高度设置为“wrap_content”，则仅显示第一个元素。这就是为什么我使用一种方法来计算列表行的高度：

```
private int getCommentsListHeight() {
        if (mChatAdapter != null && mChatAdapter.getCount() != 0) {
            if (mChatList != null) {// && mCommentsListItemHeight == 0) {
                mCommentsListItemHeight = 0;
                for (int i = 0; i < mChatAdapter.getCount(); i++) {
                    // Get view item height
                    View viewItem = mChatAdapter
                            .getView(i, new View(OnAirActivity.this), mChatList);
                    viewItem.measure(0, 0);
                    Logger.d(LOGTAG, "View " + i + " measured height = " + viewItem.getMeasuredHeight());
                    mCommentsListItemHeight += viewItem.getMeasuredHeight();
                }
            }
            //return mChatAdapter.getCount() * mCommentsListItemHeight;
            return mCommentsListItemHeight;
        } else {
            return 0;
        }
    } 
```

不幸的是，如果 TextView 中的文本被换行，即使是多行，getMeasuredHeight() 方法返回的行元素的高度也是恒定的。即使文本被换行，在行元素内的 TextView 上调用的 getLineCount() 也会返回 1。

另一方面，如果此 ListView 嵌入在 LinearLayout 中，则一切正常，并且显示完整列表而没有剪辑。

您对这里可能出现的问题有什么建议吗？我真的不喜欢手动测量列表元素高度的想法，它显然不起作用，但为什么 android 不能很好地拉伸 ScrollView 内的 ListView 以适应它呢？

剪辑清单： ![看图片](../Images/815e79b1e8be58fcbf158a3e1f715c8d.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-19T11:55:16.047

使用[https://stackoverflow.com/users/205192/dougw创建的这个方法](https://stackoverflow.com/users/205192/dougw)

```
 public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter(); 
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(0, 0);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-22T20:12:56.577

封装在 a 中是一种**不好**的做法，因为 ListView 本身包含滚动功能。您应该实现一个不包含这种视图层次结构的解决方案，我希望它能发挥作用:)`ListView``ScrollView`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T06:43:58.357

我的项目中遇到了同样的问题。您需要**在 ScrollView 中创建简单的 LinearLayout**。之后，您需要使用**LayoutInflater**使用**列表视图项 xml创建****新视图**。创建后将所有数据放入**新视图并添加到 LinearLayout 作为子视图**：

 ******```
linearLayot.addView(newView, position_you_need). 
```

希望对你有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T04:26:55.747

**这里是带有 ScrollView 的主布局资源：**

```
<ScrollView android:layout_height="fill_parent" android:layout_width="fill_parent">
<LinearLayout android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent" android:id="@+id/parentLayout"/>
</ScrollView> 
```

**这里是插入项目的代码：**

```
parentLayout.removeAllViews();
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
for (int i = comments.size() - 1; i >= 0; i--) {
CommentInfo comment = comments.get(i);
View view = inflater.inflate(your_resource_id, null, false);

TextView commentsContent =(TextView)view.findViewById(R.id.commentContent);
if (commentsContent != null) {
    String data = String.format("%s (by %s, %s)",  comment.getCommentText(), comment.getUserName(),
        commentsContent.setTextSize(st.getTextSize());
    commentsContent.setText(data);

}

parentLayout.addView(view, 0);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T10:59:51.793

我将不使用 ScrollView 中的 ListView 元素的建议牢记在心，并决定使用稍微蛮力的方法来实现我所需要的。由于需要显示的列表行数是恒定的，因此我从 xml 文件中删除了 ListView 实例，并将其替换为五个行实例：

```
<include android:id="@+id/info_comment_1" layout="@layout/chat_single_message" />
<include android:id="@+id/info_comment_2" layout="@layout/chat_single_message" />
<include android:id="@+id/info_comment_3" layout="@layout/chat_single_message" />
<include android:id="@+id/info_comment_4" layout="@layout/chat_single_message" />
<include android:id="@+id/info_comment_5" layout="@layout/chat_single_message" /> 
```

在 Activity 类中，我为这些视图声明了五个占位符：

```
private RelativeLayout mChatMessages[] = new RelativeLayout[COMMENTS_NUMBER]; 
```

并初始化它们：

```
mChatMessages[0] = (RelativeLayout) mMoreInfoLayout.findViewById(R.id.info_comment_1);
mChatMessages[1] = (RelativeLayout) mMoreInfoLayout.findViewById(R.id.info_comment_2);
mChatMessages[2] = (RelativeLayout) mMoreInfoLayout.findViewById(R.id.info_comment_3);
mChatMessages[3] = (RelativeLayout) mMoreInfoLayout.findViewById(R.id.info_comment_4);
mChatMessages[4] = (RelativeLayout) mMoreInfoLayout.findViewById(R.id.info_comment_5); 
```

然后，每当收到新消息时，我都会使用 ChatAdapter（与之前用于 ListView 的相同）并调用它的 getView() 方法：

```
protected void updateChatMessages() {
  int msgCount = mChatAdapter.getCount();
  for (int i = 0; i < COMMENTS_NUMBER; i++) {
    if (msgCount <= i) {
      mChatMessages[i].setVisibility(View.GONE);
    } else {
      mChatMessages[i] = (RelativeLayout) mChatAdapter.getView(i, mChatMessages[i], null); 
      mChatMessages[i].setVisibility(View.VISIBLE);
    }   
  }
} 
```

我不会再膨胀 pariculat 视图，因为唯一改变的是每一行的内容，而不是布局。这意味着这里没有性能损失。

这基本上是具有有限最大元素数量的 ListView 的手动实现。然而，这一次，ScrollView 能够很好地适应它们，并且没有任何东西被剪裁。

对于动态行数，Layko 建议的方法可以用于以编程方式实例化视图并添加到 ScrollView 内的 LinearLayout。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T11:07:10.757

我可以看到 ListView 在 ViewPager 中；解决此问题的另一种简单方法是添加 `app:layout_behavior="@string/appbar_scrolling_view_behavior"`到布局 xml 中的 ViewPager，如下所示。

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:layout_behavior="@string/appbar_scrolling_view_behavior"/> 
```

为了防止列表底部出现相同的行为，您还可以`android:layout_marginBottom="?attr/actionBarSize"`像这样添加到 ViewPager

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:layout_behavior="@string/appbar_scrolling_view_behavior"
    android:layout_marginBottom="?attr/actionBarSize"/> 
```

这来晚了，但我希望它可以帮助任何其他人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-08T08:35:01.430

试试看.. 创建所有视图后，为屏幕上的 ScrollView 位置添加波纹管（x，y）

```
 ScrollView scrollView = (ScrollView)findViewById(R.id.scrollView);

  scrollView.smoothScrollTo(0,0);// top location zero index 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-10T13:05:55.247

我有一个类似的问题。我有一个

```
RelativeLayout
  listView
  includeLayout 
```

我在列表视图下方包含一些底部导航

```
<include
    android:id="@+id/includeLayout"
    layout="@layout/bottom_nav_bar" 
```

并且我的 listView 被剪裁了 - 没有占用标题和底部导航之间可用的全部高度。我尝试了此线程和其他线程中建议的各种 xml 设置，但对我有用的是添加

```
android:layout_alignBottom="@+id/includeLayout" 
```

到我的列表视图。这似乎将 listView 拉到底部导航的顶部，以便 listView 现在使用完整的可用高度（并根据需要滚动）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-16T03:59:24.097

这对我有用

```
<RelativeLayout                                          xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:padding="@dimen/activity_vertical_margin">

    <TextView
        android:id="@+id/tv_status"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textSize="17sp"
        android:text="@string/text_list_devices" />

    <ListView
        android:id="@+id/lv_paired"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="@dimen/activity_vertical_margin"
        android:cacheColorHint="#00000000"
        android:layout_above="@+id/signup_t"
        android:layout_below="@id/tv_status"
        />

    <Button

        android:id="@+id/signup_t"
        style="?android:textAppearanceSmall"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:textColor="@android:color/white"
        android:layout_alignParentBottom="true"
        android:text="Print All Records"
        android:typeface="sans"
        android:layout_marginLeft="45dp"
        android:layout_marginRight="45dp"
        android:textSize="24sp"
        android:background="@drawable/selector_for_button"
        android:textStyle="bold" />
</RelativeLayout> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-18T17:14:33.183

**这是不好的做法**。但是在*某些*情况下我们无法避免使用它。例如动态电子商务布局，我们可能会放置多个列表或回收视图，但您不想在单个项目高度内滚动（如果不小心想要！！）。我遇到了这种问题。我用一种简单的方法修复了。我不说这是正确的方法，但它可能会有所帮助。！！我曾经回收视图。

(01) 创建一个返回视图高度的接口。

```
public interface AfterViewLoadListener {

    void onViewHeightMeasured(int height, String mode);
} 
```

(02) 与您的活动一起实施

```
public class *Activity extends AppCompatActivity implements AfterViewLoadListener{
  /**  your codes **/
  final SimpleListRecycleAdapter order_adapter = new SimpleListRecycleAdapter(this,"ORDER");
}

@Override
public void onViewHeightMeasured(int height, String mode) {
    if(mode.equals("ORDER") && height > 0){
        recycleView.setMinimumHeight(height);
    }
} 
```

(03) 内部循环视图自定义适配器

```
AfterViewLoadListener viewLoadListener = null;
public SimpleListRecycleAdapter(AfterViewLoadListener listener, String mode) {
    if(listener instanceof AfterViewLoadListener){
        viewLoadListener = listener;
    }
    this.mode = mode;
} 
```

(04)重写onViewAttachedToWindow方法

```
@Override
public void onViewAttachedToWindow(@NonNull SimpleListViewHolder holder) {
    super.onViewAttachedToWindow(holder);
    View view = holder.itemView;
    view.measure(0, 0);
    this.viewMinHeight = view.getMeasuredHeight();

    if(!firstFlag){
        firstFlag = true;
        viewLoadListener.onViewHeightMeasured(this.viewMinHeight*filtered.length(),mode);
    }
} 
```

(05) 就是这样。它对我有用。******

# sharepoint - SharePoint 2010：批量编辑事件接收器

> ID：10709417
> 
> 赞同：0
> 
> 时间：2012-05-22T20:09:40.763
> 
> 标签：sharepoint, sharepoint-2010

这是我的场景：我想检测用户上传了多个文档并对其进行处理。

我怎样才能做到这一点？首先要看的是事件接收器，但似乎没有用于批量操作的事件接收器（例如 ItemsAdded 与 ItemAdded 之类的东西）。

想法？

提前致谢。

# css - 在 radEditor 富文本编辑器中的 BODY 元素上顽固地调整大小手柄控件

> ID：10709425
> 
> 赞同：0
> 
> 时间：2012-05-22T20:10:20.793
> 
> 标签：css, iframe, resize, handles, radeditor

我有一个 radEditor，它由一个 IFrame 组成，该 IFrame 包含一个由 BODY 元素组成的可编辑“内容区域”——这只是 radEditor 控件的标准默认实现。在 Firefox 中，每当用户单击内容区域时，都会在 BODY 元素周围出现调整大小手柄，然后用户可以拖动和/或调整大小一次，之后调整大小控件就会消失。我根本不希望调整大小控件出现！

经过大量研究和摆弄，我仍然无法确定这是 radEditor 中的错误、Firefox 中的错误、某些 CSS 继承问题的结果，还是 radEditor 控件的客户端 Javascript 初始化问题。

我有一个以编程方式附加的外部 CSS，它应该控制 radEditor“内容区域”的样式，但是我尝试在文件中更改 CSS 中的 resize 属性是无用的，Firefox 只是忽略了该属性，而 firebug 甚至没有将其显示为正在应用，这似乎有点可疑。

而且，论坛上有一些关于使用 execCommand 禁用本机调整大小功能的主题，但我不确定我是否在正确的线上考虑这个问题。

有没有其他人对这个问题有任何经验，或者可以指出最有可能进一步调查的领域是什么？也许这也是其他基于 IFrame 的富文本编辑器遇到的问题？

如果您能提供帮助，非常感谢！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:05:37.870

你可以看到这个主题的论坛主题：[http ://www.telerik.com/community/forums/aspnet-ajax/editor/disable-drag-and-drop-of-body-element-in-content-area- iframe.aspx](http://www.telerik.com/community/forums/aspnet-ajax/editor/disable-drag-and-drop-of-body-element-in-content-area-iframe.aspx)

确保您没有通过导致处理程序出现的 RadEditor 的 ContentAreaCssFile 或 CssFiles 属性导入某些 css 属性。

# javascript - 同步相互依赖的 Dojo 小部件/值

> ID：10709426
> 
> 赞同：0
> 
> 时间：2012-05-22T20:10:21.273
> 
> 标签：javascript, event-handling, dojo, dijit.form

我即将构建一个简单的“抵押贷款计算器”，用户将在其中调整一些滑块或编辑输入字段中的值，以便根据提供的数据计算一些最终值。

从示意图上看，它看起来像这样：

```
Slider1 - Input1
Slider2a - Input2a
Slider2b - Input2b 
```

这个想法是输入的值必须反映在滑块中，反之亦然。此外，根据一些简单的规则，滑块 2a/2b 和输入 2a/2b 的值和限制相互依赖。

它必须在我以前从未使用过的 Dojo 中完成，尽管 Dojo 有很好的文档，但它有点压倒性，所以如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:11:28.793

首先，这是我在 jsFiddle 工作的解决方案：http: [//jsfiddle.net/phusick/HCx3w/](http://jsfiddle.net/phusick/HCx3w/)

您可以使用[`dojo/aspect`](http://livedocs.dojotoolkit.org/dojo/aspect),[`dojo/topic`](http://livedocs.dojotoolkit.org/dojo/topic)和[`dojo/Stateful`](http://livedocs.dojotoolkit.org/dojo/Stateful)直接以各种方式将这些小部件相互连接。您可能最终会得到一组紧密耦合的小部件，即这些小部件将相互了解，即使特定小部件没有理由知道其值与另一个小部件同步的事实。

与上述相反，您可以应用[`loose coupling`](http://en.wikipedia.org/wiki/Loose_coupling)原则，这将允许您同步任意数量的小部件，而它们之间没有任何相互引用。这是我的解决方案：

1.  获取对小部件的引用并将它们耦合到集合中 ( `arrays`)：

    ```
    var slider1 = registry.byId("slider1");
    var slider2 = registry.byId("slider2");
    var spinner1 = registry.byId("spinner1");
    var spinner2 = registry.byId("spinner2");

    var set1 = [slider1, spinner1];
    var set2 = [slider2, spinner2]; 
    ```

2.  `synchronize`功能：

    ```
    var synchronize = function(/*Array*/ widgets, /*String*/ topicName) {

        var synchronized = function() {
            var count = 0;
            array.forEach(widgets, function(widget) {
                if(widget.get("synchronized") === true) { count++} 
            });
            return (count == widgets.length);
        }

        array.forEach(widgets, function(w) {

            w.set("synchronized", false);

            // register onchange handler for each widget in the set
            w.on("change", function(value) {
                array.forEach(widgets, function(widget) {
                    if(this !== widget) {
                        widget.set("value", value);
                        widget.set("synchronized", true);
                    }                                         
                }, this);

                // needed to publish topic just once per value change across all the widgets in the set
                if(synchronized()) {
                    array.forEach(widgets, function(widget) {
                        widget.set("synchronized", false);
                    });
                    // publish topic if any
                    if(topicName) { topic.publish(topicName, value)};
                }
            });
        });
    } 
    ```

3.  注册小部件集以通过`sychronize`函数同步：

    ```
    synchronize(set1, "value1-changed");   // synchronize and publish topic when value changes
    synchronize(set2);                     // just synchronize 
    ```

4.  订阅`topic`您在上面注册的内容：

    ```
    topic.subscribe("value1-changed", function(value) {
        console.log("value1-changed", value);
        // here you can change value and limits of of `set2` widgets
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:15:49.017

你试过dojo.connect吗？这可以用于方法链接。因此，当事件在控件中触发时，可以调用多个方法。除此之外，dojo 中还有发布订阅机制。在 pub\sum 模型中，您可以编写订阅简单消息字符串的方法。当某个方法发布该字符串时，将调用订阅者方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:28:56.293

道场。有状态是你的朋友... [http://dojotoolkit.org/reference-guide/1.7/dojo/Stateful.html](http://dojotoolkit.org/reference-guide/1.7/dojo/Stateful.html)

# ruby-on-rails-3 - Rails 3中模型之间的正确关联

> ID：10709427
> 
> 赞同：0
> 
> 时间：2012-05-22T20:10:26.253
> 
> 标签：ruby-on-rails-3, model, associations

我有一个记录模型，我想创建一个字段模型，以便给定记录`has_many`字段。同样，我希望每个字段都与一个标签相关联，这样每个字段`has_one`标签。但是每个 Tag 可以在 Field 对象之间重复使用很多次。

在这种情况下，我会说一个标签`belongs_to_many`字段吗？同样，是否可以说实地`belongs_to_many`记录？

（最终我希望 Record 对象成为多个 Fields 的容器。我设想有一个表单，我可以在其中动态添加新的 Field 和 Tag，这样 Record 可能看起来像：

```
Record 1
    Tag 1
    Field 1
    Tag 2
    Field 2
    ... 
```

每个标签可以从预先存在的池中提取或动态创建）感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:44:05.573

首先，我强烈推荐阅读 RoR 协会指南：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

无论您是新手还是需要了解如何在 RoR 中使用关联，请阅读该指南。

您的问题似乎更像是一个逻辑问题，但我将从代码开始：

```
class Record < ActiveRecord::Base
   has_and_belongs_to_many :fields
...

class Field < ActiveRecord:Base
   has_and_belongs_to_many :records
   belongs_to :tag
...

class Tag < ActiveRecord:Base
   has_many :fields
... 
```

每个记录连接到许多不同的字段，每个字段连接到许多不同的记录。这是多对多关联的经典示例。当您实际使用这些模型时，代码中的逻辑会使 Record Model 看起来像一个容器（因为从技术上讲，您可以说 Field 是许多记录的容器）。

每个字段将有 1 个与之关联的标签，但同一标签可用于任意数量的字段（您可以说字段正在**重用**标签）。这是一个一对多的关联。建立此连接时，您将在 Field 模型中使用 belongs_to，在 Tag 模型中使用 has_many。

由于标签已连接到字段模型，因此您正在寻找的逻辑：记录是字段和标签的容器，对于此设置是有意义的。

这是一个在记录中获取标签的简单示例：

```
#Returns the Tag Associated with the first field
#"inside" the first Record in the database.

Record.first.fields.first.tag 
```

同样，人们可以很容易地走向相反的方向：

```
Tag.first.fields.first.records.first 
```

确保通过命令行利用 Rails 命令来快速设置迁移和模型。至于您希望关联在删除、保存等时如何处理的选项，只需阅读顶部的指南即可找到您要查找的内容。

# ruby-on-rails - 尝试安装 rails-EISDIR 错误

> ID：10709429
> 
> 赞同：2
> 
> 时间：2012-05-22T20:10:28.653
> 
> 标签：ruby-on-rails, ruby

我是编程新手，正在尝试在运行 Snow Leopard 的 Mac 上使用 Michael Hartl 的教程通过终端设置 Ruby on Rails，但我有点卡在这部分。我尝试使用 rvm 1.9.2，但没有任何运气，并且无法通过谷歌搜索找到任何内容。任何帮助，将不胜感激！

谢谢！

```
CZom$ gem install rails -v 3.2.3
/Users/CZom/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:253:in `read': Is a directory - /Users/CZom/.gemrc (Errno::EISDIR)
    from /Users/CZom/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:253:in `load_file'
    from /Users/CZom/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb:191:in `initialize'
    from /Users/CZom/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `new'
    from /Users/CZom/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:78:in `do_configuration'
    from /Users/CZom/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/gem_runner.rb:51:in `run'
    from /Users/CZom/.rvm/rubies/ruby-1.9.3-p194/bin/gem:25:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:49:16.113

`/Users/CZom/.gemrc`应该是执行`gem`命令时加载的用户特定配置文件。听起来在您的情况下它是一个目录。Rubygems 因此抱怨。

`/Users/CZom/.gemrc`如果不需要，请尝试重命名或完全删除它。

# mysql - 如何根据值更改mysql输出

> ID：10709430
> 
> 赞同：6
> 
> 时间：2012-05-22T20:10:29.337
> 
> 标签：mysql

例如，如果 queue_watch 显示 0，我希望实际的 mysql 输出说 No，否则说 Yes。改变方案不是一种选择。

```
SELECT user.user_name, queue.queue_name, queue_access.queue_access,
    queue_access.queue_watch
FROM queue_access
INNER JOIN user ON user.user_id = queue_access.user_id
INNER JOIN queue ON queue.queue_id = queue_access.queue_id
WHERE queue_access <> '' OR queue_watch = 1
ORDER BY user_name; 
```

SQL 可以满足我的需要，但我想知道是否可以使用 SQL 而不是 PHP 更改输出。此外，是否可以将一行中的所有 queue_name 分组到每个 user_name，这样我就不必返回 153 行。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T20:12:42.447

这不是一个过头。我觉得最好在查询中完成。

尝试这个 -

```
SELECT user.user_name, queue.queue_name, queue_access.queue_access,
       IF(queue_access.queue_watch = 0, 'No', 'Yes')
FROM queue_access
INNER JOIN user ON user.user_id = queue_access.user_id
INNER JOIN queue ON queue.queue_id = queue_access.queue_id
WHERE queue_access <> '' OR queue_watch = 1
ORDER BY user_name; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T20:12:37.003

您可以使用标准`CASE`表达式。有两种稍微不同的方式来编写`CASE`表达式。

简单案例表达：

```
SELECT
    CASE queue_access.queue_watch
        WHEN 0 THEN 'No'
        ELSE 'Yes'
    END AS your_alias,
    ... 
```

搜索案例表达式：

```
SELECT
    CASE WHEN queue_access.queue_watch = 0 THEN 'No' ELSE 'Yes' END AS your_alias,
    ... 
```

或者您可以使用 MySQL 特定的[`IF`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_if)构造：

```
SELECT
    IF(queue_access.queue_watch, 'Yes', 'No') AS your_alias,
    ... 
```

您可能需要考虑如果您的值不是 0 或 1 会发生什么。

# java - 为什么当方法重载时多态无关紧要？

> ID：10709432
> 
> 赞同：0
> 
> 时间：2012-05-22T20:10:42.307
> 
> 标签：java, oop, overloading, overriding

我知道重载的方法是在编译时根据调用该方法的引用类型确定的，而重写的方法是由调用该方法的引用的实际对象类型确定的，问题是为什么多态性只与重写和重载无关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:17:35.100

使 Java 中的多态成为可能的实现机制是基于其第一个参数的运行时类型的方法的动态分派（在 call`a.method(b, c)`中，`a`可以认为是方法的第一个参数）。因此，Java 是一种*单调度*OOP 语言。结果是所有其他参数不参与此机制，并且它们的类型在编译时静态确定。因此，例如，如果您有

```
class MyObject {
  public boolean equals(MyObject o) { ... }
} 
```

进而

```
MyObject m1 = new MyObject();
Object o = new MyObject();
System.out.println(m1.equals(o)); 
```

`true`由于没有调用您的方法，因此永远无法打印。编译器看到一个调用`MyObject.equals(Object)`并将其编译为对继承方法的调用`Object.equals(Object)`。运行时方法分派机制只会决定`equals(Object)`调用哪个覆盖方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:18:48.217

顾名思义，多态是指“相同形式”的方法在不同的上下文中表现出不同的行为。术语“相同的形式”意味着“相同的签名”。这意味着您不能将多态性与重载方法联系起来，因为它们一开始就有“不同的形式”。另一种思考方式是——您需要一个类型和一个子类型来查看多态性的作用——重载方法再次在单个类的上下文中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:20:13.897

这是出于技术原因。通常只有`this`作为方法隐藏的第一个参数的指针在运行时被分析以确定要调用的方法。

当也分析其他参数时，它被称为[Multiple Dispatch](http://en.wikipedia.org/wiki/Multiple_dispatch)。有一些语言本身就支持多分派。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T20:19:00.963

你对此感到困惑。
`Overloading`是指在*同一*类（不是层次结构）中选择具有相同名称但不同签名的方法之一。
`Overriding`根据父类继承的方法中的运行时类型，在同名方法中选择。
如果您有一个具有相同名称和签名的方法的基类和派生类，那么这是`overriding`在运行时确定正确的。

编译器在*同一类*`overloading`中选择正确版本的方法来使用。 无需查找运行时类型。编译器可以在编译时解决这个问题

# outlook - IsSearchSynchronous 在 Outlook 中失败

> ID：10709434
> 
> 赞同：1
> 
> 时间：2012-05-22T20:10:45.970
> 
> 标签：outlook, office-automation

我正在使用 Outlook 自动化来查找日历中的项目。为此，我使用 IsSearchSynchronous() 方法来查看是否必须等待 AdvancedSearchComplete 事件。顺便说一句，它是否曾经同步？？？

无论如何，如果我有 Outlook 运行，我对这个调用没有任何问题。但如果它没有运行 - 调用失败

```
HRESULT: 0x80020009 Exception occurred 
```

EXCEPINFO 包含：

```
Source: "Microsoft Outlook"
Description: "The operation failed."
scode: 0x80004005 
```

有什么建议么？这是我的测试用例：

```
#include <atlstr.h>

int _tmain()
{
    IDispatch*  pApp;
    HRESULT     hr;
    CoInitialize(NULL);
    CLSID clsid;
    hr = CLSIDFromProgID(L"Outlook.Application", &clsid);
    if(SUCCEEDED(hr))
    {
        hr = CoCreateInstance(clsid, NULL, CLSCTX_LOCAL_SERVER, IID_IDispatch, (void **)&pApp);
        if(SUCCEEDED(hr))
        {
            // Get DISPID for "IsSearchSynchronous"
            OLECHAR Name[] = {L"IsSearchSynchronous"};
            LPOLESTR lp = Name;
            DISPID dispID;
            hr = pApp->GetIDsOfNames(IID_NULL, &lp, 1, LOCALE_USER_DEFAULT, &dispID);
            if(SUCCEEDED(hr))
            {
                // The path name of the folders that the search will search through.
                VARIANT path;
                path.vt = VT_BSTR;
                path.bstrVal = SysAllocString(L"'Calendar'");

                // Build DISPPARAMS
                DISPPARAMS dp = { NULL, NULL, 0, 0 };
                dp.cArgs = 1;
                dp.rgvarg = &path;

                // get IsSearchSynchronous
                VARIANT result;
                VariantInit(&result);
                EXCEPINFO ei = {0};
                hr = pApp->Invoke(dispID, IID_NULL, LOCALE_SYSTEM_DEFAULT, DISPATCH_PROPERTYGET, &dp, &result, &ei, NULL);
                VARIANT_BOOL vbIsSearchSynchronous = result.boolVal;
            }
        }
    }
    CoUninitialize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:52:48.097

如果其他人感兴趣，可以在 Microsoft 的帮助下解决此问题。IsSearchSynchronous() 调用的“范围”参数应该是日历文件夹的完整路径，例如：

```
"\\Mailbox - <user_name>\\Calendar" 
```

# javascript - 在嵌套循环中创建事件处理程序的效率：我在这里创建 1440 个函数吗？

> ID：10709439
> 
> 赞同：12
> 
> 时间：2012-05-22T20:10:52.150
> 
> 标签：javascript

我刚刚开发了一些代码来创建一个 24x60 的表格。我想在以下位置打印每个的`<td>`id `mouseover`：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
table {
    background-color:blue;
}
td {
    width: 2px;
    height: 2px;
    background-color:red;
}
</style>
</head>
<body>
<table id="time-table"></table>
<script type="text/javascript">
var table = document.getElementById( "time-table" );
for ( var r = 0; r < 24; r++ ) {
    var row = document.createElement( "tr" );
    for ( var c = 0; c < 60; c++ ) {
        var td = document.createElement( "td" );
        td.id = "td-" + r + "-" + c;
        td.onmouseover = function ( e ) {
            console.log( this.id );
        }
        row.appendChild( td );
    }
    table.appendChild( row );
}
</script>
</body>
</html> 
```

该代码有效，但现在我担心它是否经过优化？我是否在嵌套循环中创建了 1440 个事件处理函数？或者 JavaScript 解释器是否足够聪明，只能创建一个函数并将其分配给 1440 个`<td>`元素？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T20:15:30.670

不，JavaScript 不会进行任何优化（好吧，也许某些实现会这样做，但您不应该依赖它）。你真的在创造这么多的功能。

更好地定义**一次**函数并重用它：

```
var handler = function() {
    console.log(this.id);
}

for ( var r = 0; r < 24; r++ ) {
    var row = document.createElement( "tr" );
    for ( var c = 0; c < 60; c++ ) {
        var td = document.createElement( "td" );
        td.id = "td-" + r + "-" + c;
        td.onmouseover = handler;
        row.appendChild( td );
    }
    table.appendChild( row );
} 
```

或者考虑使用**事件委托**，即将处理程序绑定到单元的祖先：

```
table.onmouseover = function(event) {
    event = event || window.event;
    var target = event.target || event.srcElement;

    if(target.nodeName === 'TD') {
        console.log(target.id);
    }
}; 
```

这是可行的，因为事件会在 DOM 树中冒泡，并且在某些浏览器中甚至可能在性能方面更好。

[quirksmode.org 上的文章](http://www.quirksmode.org/js/introevents.html)是了解事件处理的一个很好的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:15:37.453

为了安全起见，一个小小的改变：

```
var myFunc = function (e) {
    console.log( this.id );
};

var table = document.getElementById( "time-table" );
for ( var r = 0; r < 24; r++ ) {
    var row = document.createElement( "tr" );
    for ( var c = 0; c < 60; c++ ) {
        var td = document.createElement( "td" );
        td.id = "td-" + r + "-" + c;
        td.onmouseover = myFunc;
        row.appendChild( td );
    }
    table.appendChild( row );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:18:29.963

我建议将一个事件处理程序放在桌面上并使用事件冒泡在一个地方处理它：

```
var table = document.getElementById( "time-table" );
for ( var r = 0; r < 24; r++ ) {
    var row = document.createElement( "tr" );
    for ( var c = 0; c < 60; c++ ) {
        var td = document.createElement( "td" );
        td.id = "td-" + r + "-" + c;
        row.appendChild( td );
    }
    table.appendChild( row );
}
table.addEventListener('mouseover', function(e) {
    console.log(e.target.id);
}, false); 
```

对于旧版本的 IE，您将使用 attachEvent 而不是 addEventListener。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T20:19:46.627

是的，您为其中的每个元素定义了一个未命名的函数，但您可以简单地在循环之外定义该函数并引用它。

```
var printMyId = function(e) {
  console.log(e.srcElement.id);
};
var table = document.getElementById("time-table");
for (var r = 0; r < 24; r++) {
  var row = document.createElement("tr");
  for (var c = 0; c < 60; c++) {
    var td = document.createElement("td");
    td.id = "td-" + r + "-" + c;
    td.onmouseover = printMyId;
    row.appendChild(td);
  }
  table.appendChild(row);
} 
```

# hyperthreading - 在支持超线程的四核 CPU 上运行的单 CPU 程序

> ID：10709442
> 
> 赞同：13
> 
> 时间：2012-05-22T20:10:59.450
> 
> 标签：hyperthreading

我是统计模式识别方面的研究员，我经常运行运行了很多天的模拟。我正在运行带有 Linux 3.2.0-24-generic 的 Ubuntu 12.04，据我所知，它支持多核和超线程。使用带有 HTT 的 Intel Core i7 Sandy Bridge Quadcore，我经常同时运行 4 个模拟（需要很长时间的程序）。在我问我的问题之前，这里是我已经（认为我）知道的事情。

*   由于超线程，我的操作系统（Ubuntu 12.04）检测到 8 个 CPU。
*   我的操作系统中的调度程序足够聪明，永远不会调度两个程序在属于同一物理内核的两个逻辑（虚拟）内核上运行，因为操作系统支持 SMP（同时多线程）。
*   我已阅读有关超线程的 Wikipedia 页面。
*   我已阅读 Sandy Bridge 上的 HowStuffWorks 页面。

好的，我的问题如下。当我在我的计算机上同时运行 4 个模拟（程序）时，它们每个都运行在一个单独的物理内核上。然而，由于超线程，每个物理核心被分成两个逻辑核心。因此，每个物理内核是否仅使用其全部容量的一半来运行我的每个模拟？

非常感谢您提前。如果我的问题的任何部分不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-04-01T10:26:39.570

这个答案可能已经晚了，但我看到没有人准确描述引擎盖下发生的事情。

要回答您的问题，不，一个线程不会使用半个核心。一个线程一次可以在内核内部工作，但是一个线程可以使整个内核处理能力饱和。

假设线程 1 和线程 2 属于核心 #0。线程 1 可以使整个内核的处理能力饱和，而线程 2 则等待另一个线程结束其执行。这是一个序列化的执行，而不是并行的。

乍一看，这额外的线程似乎没用。我的意思是核心可以一次处理 1 个线程，对吗？

正确，但在某些情况下，由于两个重要因素，内核实际上处于空闲状态：

*   缓存未命中
*   分支误判

**缓存未命中**

当它收到一个任务时，CPU 在它自己的缓存中搜索它需要使用的内存地址。在许多情况下，内存数据非常分散，以至于物理上不可能将所有需要的地址范围保留在高速缓存内（因为高速缓存确实具有有限的容量）。

当 CPU 在缓存中找不到它需要的东西时，它必须访问 RAM。RAM 本身速度很快，但与 CPU 的片上缓存相比就显得苍白无力。RAM 的延迟是这里的主要问题。

在访问 RAM 时，内核停止。它什么也没做。这并不明显，因为所有这些组件无论如何都以荒谬的速度工作，并且您不会通过一些 CPU 负载软件注意到它，但它会叠加。一个接一个的缓存未命中和另一个非常明显地阻碍了整体性能。这是第二个线程发挥作用的地方。当核心停止等待数据时，第二个线程进入以保持核心忙碌。因此，您通常会否定核心停顿对性能的影响。

我说主要是因为如果发生另一个缓存未命中，第二个线程也可以停止核心，但是 2 个线程连续丢失缓存而不是 1 个线程的可能性要低得多。

**分支误判**

分支预测是指您的代码路径具有多个可能的结果。最基本的分支代码将是一个`if`语句。现代 CPU 在其微码中嵌入了分支预测算法，这些算法试图预测一段代码的执行路径。这些预测器实际上非常复杂，虽然我没有关于预测率的可靠数据，但我确实记得前段时间读过一些文章，指出英特尔的 Sandy Bridge 架构的平均成功分支预测率超过 90%。

当 CPU 遇到一段分支代码时，它实际上会选择一条路径（预测器认为正确的路径）并执行它。同时，核心的另一部分评估分支表达式以查看分支预测器是否确实正确。这称为推测执行。这类似于 2 个不同的线程：一个评估表达式，另一个提前执行可能的路径之一。

从这里我们有两种可能的情况：

1.  预测器是正确的。在决定代码路径时已经在执行的推测分支正常继续执行。
2.  预测器是错误的。必须刷新处理错误分支的整个管道并从正确的分支重新开始。或者，现成的线程可以进来并简单地执行，同时解决由错误预测引起的混乱。这是超线程的第二次使用。平均而言，分支预测大大加快了执行速度，因为它的成功率非常高。但是当预测错误时，性能确实会受到相当大的惩罚。

分支预测不是性能下降的主要因素，因为就像我说的那样，正确的预测率非常高。但是缓存未命中是一个问题，并且在某些情况下仍将是一个问题。

根据我的经验，超线程确实对 3D 渲染有很大帮助（我是出于业余爱好）。我注意到 20-30% 的改进取决于场景的大小和所需的材料/纹理。巨大的场景使用大量的 RAM，使得缓存未命中的可能性大大增加。超线程有助于克服这些失误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T09:45:35.130

由于您在 Linux 内核上运行，因此您很幸运，因为调度程序足够智能，可以确保您的任务在物理内核之间分配。

Linux 在内核 2.4.17 中开始意识到超线程（参考：[http](http://kerneltrap.org/node/391) ://kerneltrap.org/node/391 ）

请注意，引用来自旧的 O(1) 调度程序。Linux 现在使用内核 2.6.23 中引入的 CFS 调度算法，应该会更好。

但正如已经建议的那样，您可以通过在 bios 中禁用超线程来进行试验，看看您的特定工作负载在启用或不启用超线程的情况下运行得更快还是更慢。如果您启动 8 个任务而不是 4 个任务，您可能会发现超线程上 8 个任务的总执行时间比两次单独运行 4 个任务的总执行时间要快，但最好的办法还是进行试验。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:16:43.070

如果您真的只想要 4 个专用内核，您应该能够在 BIOS 页面中禁用超线程。另外，这部分我不太清楚，我相信如果处理器的第二个逻辑核心空闲，处理器足够聪明，可以在单个线程上做更多的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T20:13:05.457

不，这并不完全正确。超线程内核不是两个内核。有些事情可以并行运行，但不如在两个独立的内核上运行。

# iphone - 仅出现在 iPhone 上的电子邮件通讯中的奇怪差距

> ID：10709450
> 
> 赞同：0
> 
> 时间：2012-05-22T20:11:43.947
> 
> 标签：iphone, html, css, email, newsletter

我正在开发一个电子邮件通讯，它在我需要测试的所有电子邮件客户端（AOL、Hotmail、Yahoo、Gmail、Outlook、Lotus Notes、Thunderbird 等）中看起来都不错，但 iPhone 除外。甚至 iPad 看起来也不错，所以它不是 iOS 的东西。我使用了基于表格的布局，并且正在使用 litmus.com 进行测试。

这是屏幕截图：

![截屏](../Images/61bb73fab14e5cf6f09fed18dd8a86ee.png)

这是我的表结构。（这是一个嵌套表格，只是新闻通讯的一部分。）

![截屏](../Images/1134de12da8ee6403f9236a02ded2d5d.png)

请注意，间隙仅在一侧。

两侧的图像高度相同，并且都具有`<img>`标签中声明的宽度和高度。我以前处理过电子邮件通讯中的空白。在's 和's 之间添加`display:block;`和删除物理空间通常可以解决问题，但我已经尝试过一次又一次，没有运气。`<tr>``<td>`

这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Newsletter</title>
</head>
<body style="font-family: Helvetica, Arial, sans-serif;">
<table cellpadding="0" cellspacing="0" align="center" style="margin:0 auto; width:650px;" width="650">
<tr><td colspan="2"><p align="right" style="font-size: 12px; line-height:18px;"><forwardtoafriend>Forward to a Friend</forwardtoafriend></p></td></tr>
<tr><td>
    <table cellpadding="0" cellspacing="0" style="margin: 0 auto; border-collapse:collapse;" align="center" width="650" bgcolor="#efe8d8">
        <tr><td><img src="images/header.jpg" alt="Description" width="650" height="110" style="display:block;" /></td></tr>
        <tr><td>
            <table cellpadding="0" cellspacing="0" width="650">
                <tr><td colspan="3"><img src="images/hotter.jpg" alt="Description" width="650" height="144" border="0" style="display:block;" /></td></tr>
                <tr><td valign="top"><img src="images/letter-l.jpg" width="61" height="613" style="display:block;"></td><td width="495" height="613" bgcolor="#f7f4eb" style="height:613px;"><h3 style="margin:0 0 30px; font-family:Helvetica, Arial, sans-serif; color:#000; font-size:18px;">Greetings,</h3>
                    <p style="margin:10px 0px; font-family:Helvetica, Arial, sans-serif; color:#000; line-height:20px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis quis metus quam, lacinia vehicula tellus. Donec a elementum est. Fusce et sem nec diam aliquam rhoncus non non orci. Phasellus tortor eros, aliquam et ultrices vel, mollis et ante. Sed id lectus at mi massa nunc.</p>
                    <p style="margin:10px 0px; font-family:Helvetica, Arial, sans-serif; color:#000; line-height:20px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam eu urna sed nisl aliquet pretium. Nullam mattis cursus nisi ut porttitor. Suspendisse ut lectus elit, ut placerat neque. Aliquam orci lacus, dictum accumsan euismod a, imperdiet sit amet lorem. Maecenas vitae justo nisi, non convallis tortor. Class aptent taciti sociosqu ad litora torquent per conubia sed.</p>
                    <p style="margin:10px 0px; font-family:Helvetica, Arial, sans-serif; color:#000; line-height:20px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam vestibulum pulvinar ullamcorper. Nulla varius pretium turpis vitae adipiscing. Proin suscipit, tortor interdum lobortis malesuada, quam arcu dictum sapien, in varius nulla quam a mi. Duis eget orci quis mi egestas sollicitudin. Vestibulum gravida odio et metus.</p>
                    <p style="margin:10px 0px; font-family:Helvetica, Arial, sans-serif; color:#000; line-height:20px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed a erat nec est luctus consequat sed id erat. Duis odio sem, blandit sed malesuada eget, convallis commodo felis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam vitae fermentum augue. Nam a fermentum enim. In diam turpis volutpat.</p>
                    <p style="margin:10px 0px; font-family:Helvetica, Arial, sans-serif; color:#000; line-height:20px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac orci sed massa interdum suscipit. Proin facilisis venenatis lacus, sed cursus sem hendrerit ac. Sed tristique, nisi a nullam.</p></td><td valign="top"><img src="images/letter-r.jpg" width="94" height="613" style="display:block;"></td></tr>
                <tr><td colspan="3"><img src="images/letter-bottom.jpg" width="650" border="0" style="display:block;" /></td></tr>
            </table>
        </td></tr>
        <tr><td><img src="images/star-rewards.jpg" alt="Description">
            <table cellpadding="0" cellspacing="0" width="650">
                <tr><td><a href="#"><img src="images/card-star.jpg" border="0"></a></td><td>
                    <a href="#"><img src="images/header-star.jpg" border="0"></a>
                    <p style="margin:10px 30px 10px 0; font-family:Helvetica, Arial, sans-serif; color:#636364; line-height:24px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus molestie nulla vel lorem scelerisque hendrerit. Phasellus sed ullamcorper lorem. Phasellus molestie convallis aliquet. Proin justo magna, aliquam amet.</p></td></tr>
                <tr><td><a href="#"><img src="images/card-sky.jpg" border="0"></a></td><td>
                    <a href="#"><img src="images/header-sky.jpg" border="0"></a>
                    <p style="margin:10px 30px 10px 0; font-family:Helvetica, Arial, sans-serif; color:#636364; line-height:24px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla vel est nec nibh imperdiet suscipit ornare porta enim. Aenean lobortis orci at ligula sollicitudin semper. Suspendisse potenti. Curabitur mollis tellus ut sem consequat placerat. Cras amet.</p></td></tr>
                <tr><td><a href="#"><img src="images/card-wind.jpg" border="0"></a></td><td>
                    <a href="#"><img src="images/header-wind.jpg" border="0"></a>
                    <p style="margin:10px 30px 10px 0; font-family:Helvetica, Arial, sans-serif; color:#636364; line-height:24px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis quis quam vel orci pharetra tempus ut quis neque. Duis condimentum magna ut lorem vulputate et dapibus ipsum facilisis. Nullam rutrum rhoncus massa, ut viverra risus luctus eget. Fusce nullam.</p></td></tr>
                <tr><td><a href="#"><img src="images/card-water.jpg" border="0"></a></td><td>
                    <a href="#"><img src="images/header-water.jpg" border="0"></a>
                    <p style="margin:10px 30px 10px 0; font-family:Helvetica, Arial, sans-serif; color:#636364; line-height:24px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum libero mauris, porttitor ac placerat blandit, sodales quis diam. Suspendisse at est ante. Integer et porta lacus. Ut egestas elementum metus.</p></td></tr>
                <tr><td><a href="#"><img src="images/card-earth.jpg" border="0"></a></td><td>
                    <a href="#"><img src="images/header-earth.jpg" border="0"></a>
                    <p style="margin:10px 30px 10px 0; font-family:Helvetica, Arial, sans-serif; color:#636364; line-height:24px; font-size:14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent venenatis erat id nibh ultrices vehicula. Quisque interdum posuere ante at aliquam. Nullam sed lectus ut ipsum rutrum lacinia malesuada massa nunc.</p>
                </td></tr>
                <tr><td></td><td><p style="margin:10px 30px 10px 0; font-family:Helvetica, Arial, sans-serif; color:#636364; line-height:20px; font-size:12px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean laoreet tincidunt ipsum eget ultricies. Etiam bibendum elementum mollis. Pellentesque eleifend sollicitudin tincidunt. Proin nulla felis, congue at nullam.</p></td>
            </table>
        </td></tr>
        <tr><td colspan="3" style="padding:0;margin:0;line-height:0;"><img src="images/logo.jpg" alt="Description" /></td></tr><tr><td style="padding:0;margin:0;line-height:0;"><img style="padding:0;margin:0;line-height:0;" src="images/footer-l.jpg" /><a style="padding:0;margin:0;line-height:0;" href="#"><img style="padding:0;margin:0;line-height:0; border:none;" src="images/footer-url.jpg" alt="Description" /></a><img style="padding:0;margin:0;line-height:0;" src="images/footer-r.jpg" /></td></tr><tr><td style="padding:0;margin:0;line-height:0;"><img src="images/footer-bottom.jpg" /></td></tr><tr><td style="padding:0;margin:0;line-height:0;"><img src="images/follow.jpg" alt="Follow us on Twitter and Facebook!" /><a href="#"><img style="border:none;" src="images/twitter.jpg" alt="#" /></a><a href="#"><img style="border:none;" src="images/facebook.jpg" alt="Facebook" /></a></td></tr></table><tr><td colspan="2" bgcolor="#FFFFFF"><p align="center" style="font-size: 12px; line-height:18px;"><unsubscribe>Unsubscribe</unsubscribe> or <preferences>Change your Email Address</preferences></p>
</td></tr>
</table>
</body>
</html> 
```

**编辑：我已经用完整的代码更新了它。但是，出于对客户的尊重，我更改了链接 href、图像描述和副本。虚拟文本的每个段落与原始文本的字符数相同。问题单元格是包含 letter-l.jpg 的单元格。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:54:28.963

通常只需从 TD 中删除 bgcolor 并将其添加到表中即可解决此问题。奇怪的是今天我遇到了同样的问题，我的修复不再起作用了:(

# java - 使用 Java 连接到 URL 并获取 401

> ID：10709453
> 
> 赞同：1
> 
> 时间：2012-05-22T20:11:58.947
> 
> 标签：java, web-scraping, jsoup, http-status-code-401

我可以 通过浏览器轻松地在[此站点中获得身份验证。](http://br.advfn.com/p.php?pid=mon)但是没有可能的方式使用 Java 连接到它。我总是收到 401 错误。我尝试通过 Jsoup 和 HTMLUnit 进行连接，但仍然一无所获。任何人至少对为什么会发生这种情况有一些解释？

哦，顺便说一句...在尝试连接到页面而不进行身份验证时，我收到 401 错误。在我看来，这非常奇怪。

1.  基本`URLConnection = new URLConnection(URL);`组合（本机 Java API）不起作用。
2.  Jsoup`Document = Response.parse();`没有用
3.  HTMLUnit 使用`WebClient`也不起作用
4.  以上任何试图模拟浏览器的方法都不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:18:14.193

401 错误是身份验证错误。这*可能*是因为您在连接时指定（或未指定）的代理被视为无效。（可能不止于此，具体取决于该站点的设置方式。）

您可以在 JSoup 中指定用户代理，请参阅SO 上该问题的[答案。](https://stackoverflow.com/a/10187724/597849)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:22:39.150

如果您使用`HttpURLConnection`，也许它会有所帮助...

```
java.net.Authenticator.setDefault( new Authenticator() {
  protected java.net.PasswordAuthentication getPasswordAuthentication() {
    return new java.net.PasswordAuthentication ("user", "pass".toCharArray());
  }
}); 
```

# mysql - SQL：表更改

> ID：10709456
> 
> 赞同：0
> 
> 时间：2012-05-22T20:12:00.683
> 
> 标签：mysql, create-table, alter

下面显示的表格通过`xxx`字段连接。如何在`yyy`不重新创建表的情况下删除此关系并将其更新为（可能使用`ALTER`）？所以，我希望它`yyy`成为`table1`关键，而`xxx`成为一个常规字段。在`table2`我可能应该更新`yyy`到`Primary Key`.

```
CREATE TABLE IF NOT EXISTS `table1` (
  `id1` smallint(6) NOT NULL AUTO_INCREMENT,
  `xxx` smallint(6) DEFAULT NULL,
  `yyy` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id1`),
  KEY `xxx` (`xxx`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=15;

CREATE TABLE IF NOT EXISTS `table2` (
  `xxx` smallint(6) NOT NULL,
  `yyy` varchar(50) NOT NULL,
  `zzz` varchar(30) NOT NULL,
  PRIMARY KEY (`xxx`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:21:39.247

```
ALTER TABLE `table1` DROP KEY `xxx`;
ALTER TABLE `table1` ADD KEY `yyy`(`yyy`);
ALTER TABLE `table2` DROP PRIMARY KEY;
ALTER TABLE `table2` ADD PRIMARY KEY (`yyy`); 
```

[http://sqlfiddle.com/#!2/87f92/1](http://sqlfiddle.com/#!2/87f92/1)

# java - DataMatrix 是否支持 UTF8 或 ISO-8859-2？

> ID：10709461
> 
> 赞同：0
> 
> 时间：2012-05-22T20:12:34.783
> 
> 标签：java, barcode, barcode4j

我在使用[Barcode4J](http://barcode4j.sourceforge.net/)和生成`DataMatrix`消息中的 ISO-8859-2 字符时遇到问题。
下面是从命令行使用barcode4j（版本2.1.0）的示例。如您所见，当我使用消息时`"żaba"`出现错误`Message contains characters outside ISO-8859-1 encoding.`DataMatrix 规范仅支持 ISO-8859-1 还是缺少某些内容`Barcode4J`？

```
java -cp build/barcode4j.jar:lib/avalon-framework-4.2.0.jar:lib/commons-cli-1.0.jar org.krysalis.barcode4j.cli.Main -s datamatrix "żaba"                           
Exception in thread "main" java.lang.IllegalArgumentException: Message contains characters outside ISO-8859-1 encoding.
 at org.krysalis.barcode4j.impl.datamatrix.DataMatrixHighLevelEncoder$EncoderContext.<init>(DataMatrixHighLevelEncoder.java:199)
 at org.krysalis.barcode4j.impl.datamatrix.DataMatrixHighLevelEncoder.createEncoderContext(DataMatrixHighLevelEncoder.java:171)
 at org.krysalis.barcode4j.impl.datamatrix.DataMatrixHighLevelEncoder.encodeHighLevel(DataMatrixHighLevelEncoder.java:119)
 at org.krysalis.barcode4j.impl.datamatrix.DataMatrixLogicImpl.generateBarcodeLogic(DataMatrixLogicImpl.java:50)
 at org.krysalis.barcode4j.impl.datamatrix.DataMatrixBean.generateBarcode(DataMatrixBean.java:128)
 at org.krysalis.barcode4j.impl.ConfigurableBarcodeGenerator.generateBarcode(ConfigurableBarcodeGenerator.java:174)
 at org.krysalis.barcode4j.cli.Main.handleCommandLine(Main.java:164)
 at org.krysalis.barcode4j.cli.Main.main(Main.java:86) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:14:49.153

如此处所述， [Barcode4J](http://barcode4j.sourceforge.net/2.1/symbol-datamatrix.html)目前仅支持 DataMatrix 规范 (ISO-8859-1) 定义的默认字符集。DataMatrix 尚未实现对 ECI 的支持。但是，您可以通过将字节流编码为 RFC 2397 数据 URL 来对二进制消息进行编码。该字节流可以是使用 UTF-8 编码的字符串。缺点：读者可能无法正确解释数据。

# mysql - 动态创建内联 SQL 表（用于排除左连接）

> ID：10709464
> 
> 赞同：45
> 
> 时间：2012-05-22T20:12:40.257
> 
> 标签：mysql, sql, rdbms

让我们假设以下内容：

表 A

```
id | value
----------
1   | red
2   | orange
5   | yellow
10  | green
11  | blue
12  | indigo
20  | violet 
```

我有一个 id ( `10, 11, 12, 13, 14`) 列表，可用于在此表中查找 id。这个 id 列表是在我的前端生成的。

使用纯 SQL，我需要从此列表 ( `10, 11, 12, 13, 14`) 中选择表 A 中没有条目的 id（加入“id”列）。结果应该是 id`13`和的结果集`14`。

如何仅使用 SQL 完成此操作？（另外，如果可能的话，我想避免使用存储过程）

我能想到的唯一方法是动态创建一个内联 SQL 表来临时保存我的 id 列表。但是，我不知道该怎么做。这可能吗？有没有更好的办法？

谢谢！:)

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-09-15T07:06:48.057

您可以使用表值构造函数从 SQL Server 2008 开始执行此操作。

```
SELECT * FROM (
   VALUES(1, 'red'),
         (2, 'orange'),
         (5, 'yellow'),
         (10, 'green'),
         (11, 'blue'),
         (12, 'indigo'),
         (20, 'violet'))
   AS Colors(Id, Value) 
```

此处的更多信息： [表值构造函数](http://msdn.microsoft.com/en-us/library/dd776382(v=sql.100).aspx)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-22T20:15:26.673

[`UNION`](http://dev.mysql.com/doc/en/union.html)您可以使用子查询创建“内联表” ：

```
(
            SELECT 10 AS id
  UNION ALL SELECT 11 UNION ALL SELECT 12 UNION ALL SELECT 13 UNION ALL SELECT 14
  -- etc.
) AS inline_table 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-22T20:16:20.090

```
CREATE TEMPORARY TABLE ids (id INT NOT NULL PRIMARY KEY);

INSERT
INTO    ids
VALUES
(10),
(11),
(12),
(13),
(14);

SELECT  *
FROM    ids
WHERE   id NOT IN
        (
        SELECT  id
        FROM    a
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-17T00:11:14.967

像这样的东西也会起作用

```
 SELECT * FROM (
    SELECT 'ds' AS source
    UNION ALL
    SELECT 'cache' AS source
    ) as dataSource 
```

```
----------
| source |
----------
| ds     |
----------
| cache  |
---------- 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-13T23:40:01.720

```
create table B (id int)
insert into B values (10),(11),(12),(13),(14)

select *
from B
left join A 
on A.id=B.id
where A.id is null

drop table B 
```

[http://sqlfiddle.com/#!6/6666c1/30](http://sqlfiddle.com/#!6/6666c1/30)

# wcf - WCF 可以替代 Windows 服务吗？

> ID：10709469
> 
> 赞同：1
> 
> 时间：2012-05-22T20:12:58.547
> 
> 标签：wcf, windows-services

有这个windows服务每晚半夜运行。为了简单起见，假设这个服务所做的只是删除一个日志表。如果我尝试用 WCF（作为 Windows 服务托管）替换它，我是否必须调用它的方法？WCF 是否具有类似于控制台应用程序 Main() 方法的入口点，它可以在其中启动某些东西而无需对其调用方法？

在上述情况下，用 WCF 替换 Windows 服务是否有意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:17:00.917

windows服务是一个在后台运行的进程，WCF是一个通信框架。因此，您的简单答案是否定的，这不一样，您对 Windows 服务的要求很好。

# codeigniter - CodeIgniter Payments 获得成功响应但无法正常工作

> ID：10709472
> 
> 赞同：0
> 
> 时间：2012-05-22T20:13:03.347
> 
> 标签：codeigniter, paypal

我正在使用[CodeIgniter Payments](https://github.com/calvinfroedge/codeigniter-payments)与 Paypal API 集成。我相信我调用了正确的方法，因为我得到了“成功”的响应，但我没有在沙盒中看到交易。当我使用来自 Paypal 的示例 DoDirectPayment 文件时，我完成了交易，我可以在沙箱中看到它。

这是我使用 CodeIgniter Payments 的代码：

```
//load the payment library
$this->load->spark('codeigniter-payments/0.1.4/');

//configure the parameters for the payment request
$paymentParameters = array(
    'cc_type'       => 'foo',
    'cc_number'     => 'foo',
    'cc_exp'        => 'foo',
    'first_name'    => 'foo',
    'last_name'     => 'foo',
    'street'        => 'foo',
    'street2'       => 'foo',
    'city'          => 'foo',
    'state'         => 'foo',
    'country'       => 'foo',
    'postal_code'   => 'foo',
    'amt'           => 'foo',
    'currency_code' => 'USD'
);

//make the call
$paymentResponse = $this->payments->oneoff_payment('paypal_paymentspro', $paymentParameters);

//print the response
print_r($paymentResponse); 
```

这是回应：

```
stdClass Object
(
    [type] => gateway_response
    [status] => Success
    [response_code] => 100
    [response_message] => The authorization was successful.
    [details] => stdClass Object
    (
        [gateway_response] => stdClass Object
            (
                [TIMESTAMP] => 2012-05-22T19:18:17Z
                [CORRELATIONID] => 7939eeaa6c0c0
                [ACK] => Success
                [VERSION] => 66.0
                [BUILD] => 2929894
                [AMT] => 20.89
                [CURRENCYCODE] => USD
                [AVSCODE] => X
                [CVV2MATCH] => M
                [TRANSACTIONID] => 4RS01101TL8204042
            )

        [timestamp] => 2012-05-22T19:18:17Z
        [identifier] => 4RS01101TL8204042
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:22:56.507

我也有这个问题。

就我而言，我没有正确设置我的配置驱动程序，它最终将我的所有交易发送到 Calvin（作者）的默认贝宝沙盒帐户。

仔细检查以确保您的 API 令牌设置正确：

```
$gateway_name = 'paypal_paymentspro';
$params = array(
    'identifier'    => *Your transaction ID from above* 
);
$response = $this->payments->get_transaction_details($gateway_name, $params);
print_r($results); 
```

此外，如果您不想设置驱动程序并想从您的 PHP 文件中执行所有操作，您可以随时传递您的 API 令牌，如下所示：

```
$gateway_name = 'paypal_paymentspro';
$params = array(
    'identifier'    => *Your transaction ID from above* 
);
$config['api_username'] = *Your api username*;
$config['api_password'] = *Your api password*;
$config['api_signature'] = *Your sig*;
$response = $this->payments->get_transaction_details($gateway_name, $params);
print_r($results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T03:53:59.827

您可以切换到使用其他 Paypal 库。与解决这个问题相比，它可能会节省您的时间。[http://codeigniter.com/wiki/PayPal_Lib](http://codeigniter.com/wiki/PayPal_Lib)

# dns - 功能丰富的 DNS 服务器软件？

> ID：10709476
> 
> 赞同：0
> 
> 时间：2012-05-22T20:13:06.020
> 
> 标签：dns, statistics

我正在寻找具有统计信息的 DNS 服务器软件，例如过去 24 小时连接的所有 unqie IP、顶级域查询等...有人知道此类具有免费许可的软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:19:30.853

这不是通过 DNS 完成的。这是通过服务器日志完成的。如果你想要大数据，有很多工具，谷歌它。谷歌甚至是答案之一。

可能重复： [有助于日志分析的软件？](https://stackoverflow.com/questions/4020025/software-to-help-in-log-analysis)

# web-services - 自动为 RESTful webservice 创建测试页面

> ID：10709478
> 
> 赞同：1
> 
> 时间：2012-05-22T20:13:09.743
> 
> 标签：web-services, rest, client

我有一堆用 Spring WebMVC 创建的 RESTful JSON web 服务，我想知道是否有任何库或框架可以自动生成带有表单的网页来调用这些服务并测试它们。

我知道一些应用程序服务器具有 Web 控制面板，当您将 Web 服务部署到它们时会动态生成这种表单，但我正在尝试找到一个可以嵌入到我的 Web 应用程序中并部署简单的 Tomcat 或 Jetty 服务器的开源解决方案.

# ruby-on-rails - Haml 管道分隔的多行语句语法高亮

> ID：10709480
> 
> 赞同：3
> 
> 时间：2012-05-22T20:13:22.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml, textmate, textmatebundles

我该如何消除这种丑陋？

![在此处输入图像描述](../Images/71c0224599444e9b170480928a93ddee.png)

在这些东西上突出显示一些语法会很好。

[我认为这里](https://github.com/handcrafted/handcrafted-haml-textmate-bundle)的Textmate 捆绑包可能会起作用，但没有运气。我知道这与多行语句的管道分隔符有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T16:03:04.013

您甚至首先需要那些垂直条吗？我从未在我的 Haml 文件中以这种方式使用它们。根据 Haml 文档，[管道字符指定多行字符串](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#multiline)：

```
%whoo
  %hoo= h(                       |
    "I think this might get " +  |
    "pretty long so I should " + |
    "probably make it " +        |
    "multiline so it doesn't " + |
    "look awful.")               |
  %p This is short. 
```

所以，对于你正在做的事情，在你的一个论点之后的行尾加一个逗号就足以将下一个论点放在下一行的任何位置。

# cruisecontrol.net - 如何让 CruiseControl.NET 在电子邮件中附加错误日志？

> ID：10709482
> 
> 赞同：1
> 
> 时间：2012-05-22T20:13:39.530
> 
> 标签：cruisecontrol.net, cruisecontrol

这是我的发布者设置的示例：

```
<publishers>
  <statistics />
  <xmllogger logDir="F:\ccnet\Project\xxxxxx\Artifacts\buildlogs" />
  <buildpublisher>
    <sourceDir>$(buildDir)\_PublishedWebsites\$(projectName)</sourceDir>
    <publishDir>$(webDir)</publishDir>
    <useLabelSubDirectory>false</useLabelSubDirectory>
    <alwaysPublish>false</alwaysPublish>
  </buildpublisher>
  <email mailport="25"
       mailhostUsername="xxx@xx.xx"
       mailhostPassword="xxxxxxxxx"
       includeDetails="TRUE"
       useSSL="FALSE">
    <includeDetails>TRUE</includeDetails>
    <from>xxxx@xx.xx</from>
    <mailhost>xxxx.xxxx.xxx</mailhost>
    <users>
      <user name="Flemming" group="buildmaster" address="xx@xx.xxu" />
    </users>
    <groups>
      <group name="buildmaster">
        <notifications>
          <notificationType>Always</notificationType>
        </notifications>
      </group>
    </groups>
  </email>
</publishers> 
```

在 webdashboard 中一切都很好。它显示标准 xslt 列表中的所有信息。

每次构建后我都会收到一封电子邮件，但它只显示来自 header.xsl、unittest.xsl（不显示单元测试）和 modify.xsl 的信息。但它没有显示 compile.xsl 中的任何内容。

来自 ccnet.exe.config 的 xsl 文件：

```
<xslFiles>
  <file name="xsl\header.xsl"/>
  <file name="xsl\compile.xsl"/>
  <file name="xsl\msbuild.xsl"/>
  <file name="xsl\modifications.xsl"/>
  <!-- <file name="xsl\unittests.xsl"/>
  <file name="xsl\fit.xsl"/>
  <file name="xsl\fxcop-summary_1_36.xsl"/> -->
</xslFiles> 
```

我在这里想念什么？我尝试插入 TRUE 并将其作为属性，但没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:30:39.770

我找到了解决方案。我现在使用 compile_msbuild.xsl 而不是在 xsllist 中使用 compile.xsl

现在我收到邮件中的所有错误和警告！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:02:15.957

来自[CCNET 的 EmailPublisher 文档](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Email_Publisher)：

> 确保所有 Merge Publisher 以及 Xml Log Publisher 任务在发布者之前完成，否则您将无法在电子邮件中包含构建的输出。

# layout - HowTo：Visio SDK 页面从上到下重新布局流程图

> ID：10709485
> 
> 赞同：2
> 
> 时间：2012-05-22T20:14:49.327
> 
> 标签：layout, sdk, visio, flowchart, autolayout

我正在从代表流程图的分层数据集创建动态 VSD。我不想/不需要弄乱这些元素的绝对定位——自动布局选项就可以了。

问题是我无法弄清楚如何通过代码执行此命令。在 UI (Visio 2010) 中，命令位于此处的功能区上：设计（选项卡）-> 布局（组）-> 重新布局（SplitButton）。

这些中的任何一个都可以。通过几天的 Visio SDK 文档和谷歌搜索，没有发现任何用处。

有任何想法吗？（使用 C#，但 VB/VBA 可以）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:09:03.360

Page.Layout() 方法本身是不够的。

在 WBSTreeView.sln 示例项目（VB.Net）中，我找到了如何完成此操作，但直到 8 小时后才能发布我的答案：-x

通过查看下面使用的枚举，其他布局类型是可能的。Compact -> DownRight 最终对我们创建的大多数流程变得更好。

翻译成C#：

```
 // auto-layout, Compact Tree -> Down then Right
        var layoutCell = this._page.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLOPlaceStyle);
        layoutCell.set_Result(
            VisUnitCodes.visPageUnits,
            (short)VisCellVals.visPLOPlaceCompactDownRight);
        layoutCell = this._page.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLORouteStyle);
        layoutCell.set_Result(
            VisUnitCodes.visPageUnits,
            (short)VisCellVals.visLORouteFlowchartNS);

        //// to change page orientation
        //layoutCell = this._page.PageSheet.get_CellsSRC(
        //    (short)VisSectionIndices.visSectionObject,
        //    (short)VisRowIndices.visRowPrintProperties,
        //    (short)VisCellIndices.visPrintPropertiesPageOrientation);
        //layoutCell.set_Result(
        //    VisUnitCodes.visPageUnits,
        //    (short)VisCellVals.visPPOLandscape);

        // curved connector lines
        layoutCell = this._page.PageSheet.get_CellsSRC(
            (short)VisSectionIndices.visSectionObject,
            (short)VisRowIndices.visRowPageLayout,
            (short)VisCellIndices.visPLOLineRouteExt); 
        layoutCell.set_Result(
            VisUnitCodes.visPageUnits, 
            (short)VisCellVals.visLORouteExtNURBS);

        // perform the layout
        this._page.Layout();
        // optionally resize the page to fit the space taken by its shapes
        this._page.ResizeToFitContents();
        // 
```

**更改连接线颜色**

如果您不熟悉颜色公式的工作原理，这也可能非常令人沮丧。[默认情况下](http://msdn.microsoft.com/en-us/library/aa223354%28v=office.11%29.aspx)，您可以将 int 作为字符串来获取预定义的颜色，但这并不是很有帮助，因为没有一种简单的方法可以确定每种颜色是什么。（有一个 Page.Colors 集合，但您必须检查它们的每个 RGB 值并从中找出颜色。）

相反，您可以为公式使用自己的 RGB 值。

```
 private void SetConnectorLineColor(Shape connector, string colorFormula)
    {
        var cell = connector.get_Cells("LineColor");
        cell.Formula = colorFormula;
    }

    internal static class AnswerColorFormula
    {
        public static string Green = "RGB(0,200,0)";
        public static string Orange = "RGB(255,100,0)";
        public static string Yellow = "RGB(255,200,0)";
        public static string Red = "RGB(255,5,5)";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:59:41.210

[在Page](http://msdn.microsoft.com/en-us/library/ff767035)对象上调用[Layout](http://msdn.microsoft.com/en-us/library/ff765900)方法。如果在此页面上选择了形状，则此方法将仅对当前选择进行操作。您可能希望首先在[ActiveWindow上调用](http://msdn.microsoft.com/en-us/library/ff766851)[DeselectAll](http://msdn.microsoft.com/en-us/library/ff767441)。

# php - ImageMagick 缺少解码委托

> ID：10709488
> 
> 赞同：4
> 
> 时间：2012-05-22T20:14:57.800
> 
> 标签：php, imagemagick, imagick

我最近搬到了 MediaTemple 并按照他们的知识库文章安装了 ImageMagick 和[IMagick](http://kb.mediatemple.net/questions/1778/Is+ImageMagick+installed+on+the+%28gs%29+Grid-Service?#gs)。

没有错误并且 phpinfo() 显示模块已正确安装。

当我尝试通过 PHP 在 JPG 图像上使用 IM 时，出现此错误

```
Uncaught exception 'ImagickException' with message 'no decode delegate for this image format 
/home/149263/domains/wer.com/html/images/pictures/post/tmp/original/' @ error/constitute.c/ReadImage/544' in /nfs/c10/h04/mnt/149263/domains/wer.com/html/application/controllers/post.php:301
Stack trace:
#0 /nfs/c10/h04/mnt/149263/domains/wer.com/html/application/controllers/post.php(301): Imagick->__construct('/home/149263/do...')
#1 [internal function]: Post->filter('punch')
#2 /nfs/c10/h04/mnt/149263/domains/wer.com/html/system/core/CodeIgniter.php(359): call_user_func_array(Array, Array)
#3 /nfs/c10/h04/mnt/149263/domains/wer.com/html/index.php(217): require_once('/nfs/c10/h04/mn...')
#4 {main} thrown in /nfs/c10/h04/mnt/149263/domains/wer.com/html/application/controllers/post.php on line 301 
```

然而`convert -list configure`返回

```
DELEGATES     bzlib djvu fontconfig freetype gvc jpeg jp2 lcms openexr png rsvg tiff wmf x11 xml zlib 
```

并`identify -list format`返回

```
JPEG* JPEG      rw-   Joint Photographic Experts Group JFIF format (62)
JPG* JPEG      rw-   Joint Photographic Experts Group JFIF format 
```

所以看起来安装是正确的。

```
ImageMagick 6.7.7-0 2012-05-22 
imagick module version  3.1.0RC1 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T05:46:22.227

这是在 Ubuntu 12.04 上安装最新（撰写本文时为 6.8.4-6 版）ImageMagick 的快速而肮脏的方法。

首先删除以前通过 apt-get 安装的任何旧版本：

sudo apt-get 删除 imagemagick

然后更新 apt-get 并安装一些支持包：

```
sudo apt-get update
sudo apt-get install libperl-dev gcc libjpeg-dev libbz2-dev libtiff4-dev libwmf-dev libz-dev libpng12-dev libx11-dev libxt-dev libxext-dev libxml2-dev libfreetype6-dev liblcms1-dev libexif-dev perl libjasper-dev libltdl3-dev graphviz pkg-config 
```

使用 wget 从 ImageMagick.org 获取源代码。

下载源文件后，解压缩：

```
tar -xzf ImageMagick.tar.gz 
```

现在配置并制作：

```
cd ImageMagick-6.8.4-6
./configure
sudo make
sudo make install 
```

为了避免错误，例如：

```
convert: error while loading shared libraries: libMagickCore.so.2: cannot open shared object file: No such file or directory 
```

将以下行添加到`~/.bashrc`：

```
export LD_LIBRARY_PATH=/usr/local/lib 
```

更新：如果您仍然遇到上述错误，请尝试运行 ldconfig：

```
sudo ldconfig 
```

您可以通过以下方式确认安装和可用格式：

```
identify -list format 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:23:00.213

您是否尝试过通过 exec() 使用 Imagemagick 运行一些代码来查看问题出在 Imagemagick 还是 Imagick 上？

# php - JpGraph字体文件错误

> ID：10709490
> 
> 赞同：0
> 
> 时间：2012-05-22T20:15:05.783
> 
> 标签：php, mysql, jpgraph

我试图在阅读我的数据库后插入一个图表。

问题是我收到以下错误： ![在此处输入图像描述](../Images/33dc40cf83a7761a2d982adc27fc4e7e.png)

我已经尝试更改我的 jpgraph 文件夹中的权限但没有成功。在我的本地计算机上它工作正常，但一旦它在服务器中，它就会显示此错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:21:33.987

您是否检查过您的服务器是否确实具有所需的字体文件？尝试`ls -l /usr/share/fonts/truetype/verdanab.ttf`在您的服务器上检查。您可能需要一个名为 corefonts 的字体包。在 debian 上可以通过`apt-get install ttf-mscorefonts-installer`.

# html - 扩展，非固定宽度，四列布局

> ID：10709504
> 
> 赞同：3
> 
> 时间：2012-05-22T20:15:38.517
> 
> 标签：html, css, dynamic

我有一个 950px 宽的盒子。

在此框中，我希望最多有四个潜在的列。

当所有四列都被使用时，每列应占用大约 25% 的空间。

但是，当只使用三列时，我希望它们扩展以占用 33.33..% 或仅使用两列时，我希望每列占用 50%，如果正在使用一列，我希望它占用 100%的空间。

由于我试图实现的动态特性，我不能使用标准的固定宽度四列布局。

贝娄是我迄今为止所取得的成就。这导致列相互堆叠。正如我所说，我不能有任何固定宽度的列，因为它们需要能够根据其中的内容展开和折叠。

```
.bottomboxwrapper   {
    width:950px;
    display:block;
    background-color:#6F0;
    overflow:hidden;
}
.bottomone  {
    float:left;
    background-color:#CCC;
    width:auto;
    display:inline-block;
    width:auto;

}
.bottomtwo  {
    float:left;
    width:auto;
    background-color:#999;  
    display:inline-block;
    width:auto;

}
.bottomthree    {
    float:left;
    background-color:#666;
    display:inline-block;
    width:auto;
}
.bottomfour {
    float:left;
    background-color:#C99;
    display:inline-block;
    width:auto;
}

<div class="bottomboxwrapper">
<div class="bottomone">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam hendrerit odio non diam varius quis mattis libero dignissim. Fusce auctor, turpis eget pretium euismod, tortor nulla eleifend nibh, sit amet blandit justo tellus non enim. Donec sodales ipsum et quam mattis quis tincidunt elit accumsan. Vestibulum dictum lorem ut purus congue vehicula. Quisque et dui non metus fringilla tempor. Fusce at nibh non lorem luctus ultricies sed at eros. Nullam cursus metus in leo tristique adipiscing. Proin volutpat orci eget massa blandit non sodales nulla rutrum. In id augue lacus. Quisque nec neque magna, a hendrerit augue. Suspendisse varius sapien sed neque accumsan volutpat. Sed arcu ligula, sagittis vel elementum vitae, scelerisque eget urna. Proin feugiat turpis at leo accumsan cursus. Nunc commodo, ligula vel posuere mollis, tortor purus blandit sem, id dignissim dui elit ut dolor. Cras tempus porttitor tortor, at hendrerit elit elementum eu. Nam mattis, lectus at bibendum tristique, tellus sapien gravida justo, at malesuada augue nibh nec sapien. 
</p>
</div>
<div class="bottomtwo">
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam hendrerit odio non diam varius quis mattis libero dignissim. Fusce auctor, turpis eget pretium euismod, tortor nulla eleifend nibh, sit amet blandit justo tellus non enim. Donec sodales ipsum et quam mattis quis tincidunt elit accumsan. Vestibulum dictum lorem ut purus congue vehicula. Quisque et dui non metus fringilla tempor. Fusce at nibh non lorem luctus ultricies sed at eros. Nullam cursus metus in leo tristique adipiscing. Proin volutpat orci eget massa blandit non sodales nulla rutrum. In id augue lacus. Quisque nec neque magna, a hendrerit augue. Suspendisse varius sapien sed neque accumsan volutpat. Sed arcu ligula, sagittis vel elementum vitae, scelerisque eget urna. Proin feugiat turpis at leo accumsan cursus. Nunc commodo, ligula vel posuere mollis, tortor purus blandit sem, id dignissim dui elit ut dolor. Cras tempus porttitor tortor, at hendrerit elit elementum eu. Nam mattis, lectus at bibendum tristique, tellus sapien gravida justo, at malesuada augue nibh nec sapien. 
</p>
</div>
<div class="bottomthree">
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam hendrerit odio non diam varius quis mattis libero dignissim. Fusce auctor, turpis eget pretium euismod, tortor nulla eleifend nibh, sit amet blandit justo tellus non enim. Donec sodales ipsum et quam mattis quis tincidunt elit accumsan. Vestibulum dictum lorem ut purus congue vehicula. Quisque et dui non metus fringilla tempor. Fusce at nibh non lorem luctus ultricies sed at eros. Nullam cursus metus in leo tristique adipiscing. Proin volutpat orci eget massa blandit non sodales nulla rutrum. In id augue lacus. Quisque nec neque magna, a hendrerit augue. Suspendisse varius sapien sed neque accumsan volutpat. Sed arcu ligula, sagittis vel elementum vitae, scelerisque eget urna. Proin feugiat turpis at leo accumsan cursus. Nunc commodo, ligula vel posuere mollis, tortor purus blandit sem, id dignissim dui elit ut dolor. Cras tempus porttitor tortor, at hendrerit elit elementum eu. Nam mattis, lectus at bibendum tristique, tellus sapien gravida justo, at malesuada augue nibh nec sapien. 
</p>
</div>
<div class="bottomfour">
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam hendrerit odio non diam varius quis mattis libero dignissim. Fusce auctor, turpis eget pretium euismod, tortor nulla eleifend nibh, sit amet blandit justo tellus non enim. Donec sodales ipsum et quam mattis quis tincidunt elit accumsan. Vestibulum dictum lorem ut purus congue vehicula. Quisque et dui non metus fringilla tempor. Fusce at nibh non lorem luctus ultricies sed at eros. Nullam cursus metus in leo tristique adipiscing. Proin volutpat orci eget massa blandit non sodales nulla rutrum. In id augue lacus. Quisque nec neque magna, a hendrerit augue. Suspendisse varius sapien sed neque accumsan volutpat. Sed arcu ligula, sagittis vel elementum vitae, scelerisque eget urna. Proin feugiat turpis at leo accumsan cursus. Nunc commodo, ligula vel posuere mollis, tortor purus blandit sem, id dignissim dui elit ut dolor. Cras tempus porttitor tortor, at hendrerit elit elementum eu. Nam mattis, lectus at bibendum tristique, tellus sapien gravida justo, at malesuada augue nibh nec sapien.
 </p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:15:08.550

使用 CSS 执行此操作的最简单方法是使用`display: table`/ `display: table-cell`。添加`table-layout: fixed` [确保等宽列](http://www.w3.org/TR/CSS2/tables.html#fixed-table-layout)。

这是您的 HTML 示例：[http://jsfiddle.net/thirtydot/N4BUh/](http://jsfiddle.net/thirtydot/N4BUh/)（或[fullscreen](http://jsfiddle.net/thirtydot/N4BUh/show/)）

```
.bottomboxwrapper {
    display: table;
    table-layout: fixed;
    width: 100%;
}
.bottomboxwrapper > div {
    display: table-cell;
} 
```

这种技术的唯一缺点是IE7`display: table` [不支持](http://caniuse.com/css-table)。

有一个 JavaScript polyfill 可以修复 IE7：[http ://tanalin.com/en/projects/display-table-htc/](http://tanalin.com/en/projects/display-table-htc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:37:55.383

我认为你只能用 CSS 做的最多就是将列嵌套在这样的东西中。

```
.one .col {
   width:100%;
}
.two .col {
   width:50%;
}
.three .col {
   width:33.33%;
}
.four .col {
   width:25%;
} 
```

这样做的缺点是你必须提前知道你想要多少列，并像这样在 HTML 中调用类名（或编号）......但至少你只会改变一个类，“一个”， “二”等

```
 <div class="two">
       <div class="col">50% wide</div>
       <div class="col">50% wide</div>
    </div>

   <div class="three">
       <div class="col">33.33% wide</div>
       <div class="col">33.33% wide</div>
       <div class="col">33.33% wide</div>
    </div> 
```

# ruby-on-rails - 回形针找不到imagemagick

> ID：10709506
> 
> 赞同：8
> 
> 时间：2012-05-22T20:15:40.077
> 
> 标签：ruby-on-rails, imagemagick, paperclip, homebrew

好的，我通过自制软件在本地机器上安装了 imagemagick，并且 Gemfile.lock 显示回形针锁定在 version `paperclip (3.0.4)`。

根据设置说明，我在 development.rb 中设置了以下命令

```
Paperclip.options[:command_path] = "/usr/local/bin/" 
```

这与终端所说的一致

```
$ which identify
  # => /usr/local/bin/identify 
```

但是，当我尝试上传图片时，我的表单上会出现以下错误

```
/var/folders/dm/lnshrsls2zz6l4r_tkbk7j2w0000gn/T/avatar20120522-44111-gfis2q.jpg is not recognized by the 'identify' command. 
```

我能找到的关于此事的每一个 SO 问题都表明问题是 Paperclip 在它的命令路径中找不到标识。

我使用回形针生成器将头像添加到我的数据库中，我的模型有：

```
has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" } 
```

此外，如果我加载`rails c`并查看 Paperclip.options，我可以看到命令路径已在哈希中正确设置。

不太确定此时该做什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T18:39:17.957

我很高兴运行该命令让您开始走上正确的道路。

问题是您的 ImageMagick 是为错误的架构编译的：

```
dyld: Library not loaded: /usr/local/lib/libtiff.3.dylib Referenced from: /usr/local/bin/identify Reason: image not found Trace/BPT trap 
```

卸载 imagemagick，更新自制软件并重新安装它是正确的做法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T21:52:11.557

以防万一，我用这个技巧让它工作：

```
ln -s /usr/local/Cellar/libtiff/3.9.5/lib/libtiff.3.dylib /usr/local/lib/libtiff.3.dylib 
```

并且像魅力一样工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:15:32.007

不太确定确切的问题是什么，但是我卸载了 Image Magick，更新了 Homebrew 并重新安装了 imagemagick，现在一切正常。

# javascript - Express＆jade（node.js）-检查是否存在时未定义变量错误

> ID：10709511
> 
> 赞同：4
> 
> 时间：2012-05-22T20:16:15.720
> 
> 标签：javascript, node.js, view, pug

我在一个非常简单的快递应用程序上遇到了一个非常愚蠢的错误。我使用翡翠作为视图引擎，我这样说是为了以防它与问题有关。

我正在尝试检查是否定义了变量以呈现一件事或另一件事，但简单地检查该变量会触发“未定义变量”错误。这不是我所期望的行为，所以我想知道我是否做错了什么。这是我正在使用的视图代码：

```
h1= title
- if (user)
    p Welcome to #{title}, #{user.username}
- else 
    p Welcome to #{title} 
```

这样做的正确方法是什么？必须有一种方法来检查视图上的变量。：-/

编辑：忘了说错误是在哪一行触发的，它是在第二行“- if (user)”上触发的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T19:57:24.387

正如另一个[答案](https://stackoverflow.com/a/7161128/262789)中提到的，Jade 文档的[公共 API](https://github.com/visionmedia/jade#public-api)部分说该`locals`变量是数据传递给 Jade 模板的方式。在云雀中，我在翡翠模板中添加了我的变量`locals`。这正确地绕过了错误。

因此，以下 Jade 模板应该可以解决您的错误：

```
h1= title
- if (locals.user)
    p Welcome to #{title}, #{user.username}
- else 
    p Welcome to #{title} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T20:19:01.260

~~你没有`p Welcome to #{title}; #{user.username}`用引号括起来~~

尝试

```
if(typeof obj != 'undefined') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T23:06:51.543

布局.jade

```
# the following function is a safe getter/setter for locals
- function pagevar(key, value) { var undef; return (value===undef) ? locals[key] || null : locals[key] = value; }
block config
  #intended as a non-rendered block so that locals can be overridden.
  # put your defaults here... - use append in the child view
!!!
html
  head
    title=pagevar('title')
    meta(name='description',content=pagevar('description'))
...
```

page.jade

```
append config
  - locals.title = 'override';
  - locals.description = 'override 2';
  - pagevars('somekey', 'some value');
...
```

轻松豌豆。

# python - python select.epoll（）不起作用

> ID：10709512
> 
> 赞同：0
> 
> 时间：2012-05-22T20:16:18.623
> 
> 标签：python, python-2.6

我在笔记本电脑上构建 python2.6.1。构建成功。之后我尝试使用 ./python 运行 python 并尝试导入选择模块

```
>>>import select
>>>select.epoll()
<select.epoll object at 0xb76140d0> 
```

之后，我将 python 构建文件夹复制到另一个笔记本电脑并尝试运行 python

```
>>>import select
>>> select.epoll()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'epoll' 
```

如何解决这个问题呢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:47:53.283

从手册：

> select.epoll([sizehint=-1])
> 
> *（仅 Linux 2.5.44 及更新版本支持。）* 返回一个边缘轮询对象，可用作 I/O 事件的边缘或电平触发接口；有关 epolling 对象支持的方法，请参阅下面的 Edge 和 Level Trigger Polling (epoll) Objects 部分。
> 
> 2.6 版中的新功能。

显然发行版制造商可以在 python 构建设置中禁用它。据我所知，它确实依赖于 glibc。另外，您确定您是从系统选择模块导入，而不是从您自己的同名模块导入？（检查`select.__file__`；作为内置模块，它不应该有文件；）

# objective-c - 释放主视图控制器 (iOS)

> ID：10709514
> 
> 赞同：0
> 
> 时间：2012-05-22T20:16:24.193
> 
> 标签：objective-c, ios, memory-management

我在 Apple 的网站上搜索过这个，似乎只能找到使用 Storyboards 或 Navigation Controllers 的文档，我都没有使用它们。这是一个关于内存管理的非常简单的问题。

我创建了一个完全空白的应用程序。在我的 AppDelegate 的 didFinishLaunchingWithOptions 函数中，我正在创建一个我已经构建的视图控制器的实例。我的设计（这本身可能是一个问题）是在视图控制器和视图之间建立 1:1 的关系。

所以我的应用程序的主菜单，它是一切的启动板，位于 MenuViewController.h/m 中。

在.h中：

```
MenuViewController *m; 
```

以 .m 为单位：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    m = (MenuViewController *)[[MenuViewController alloc] init];
    m.window = self.window;
    [m doStuff]; // handful of functions, not actually called this
    //[m release]; // doesn't make sense to me
    return YES;
} 
```

这就是我感到困惑的地方。我希望它基本上存在于整个应用程序生命周期中。但我也觉得你应该（在当前函数的范围内）释放你分配的任何东西。如果除此之外还需要它，则应首先将其保留在其他地方。这不是真的吗？

我的基本问题是......我应该在哪里发布这个视图控制器？还有什么我说的似乎不合时宜的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:23:26.437

初始化错误。您没有将窗口分配给控制器，而是将控制器分配给窗口：

```
 // window creation code here
    ...
    m = [[MenuViewController alloc] init];
    [window setRootViewController:m]; // window does retain for m
    [m release]; // so we release it here
    [self.window makeKeyAndVisible];
    return YES
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:23:29.697

你是对的。通常，您应该发布您在范围内创建的任何内容。但在这种情况下，您需要视图控制器的所有权。在这种情况下，您需要在`dealloc`应用委托的方法中释放对象：

```
- (void)dealloc {
    [m release];
    [super dealloc];
} 
```

或者，您可以使用保留标志为您的视图控制器定义一个 @ `property`，然后执行以下操作：

```
MenuViewController *viewController = [[MenuViewController alloc] init];
self.m = viewController;
[viewController release]; 
```

顺便说一句，无论哪种情况，您都不需要强制转换为 MenuViewController。

编辑：我完全错过了您没有将视图控制器添加到窗口中。好点@Eimantas。

# asp.net - 标准 ASP.NET GridView 有哪些客户端事件？

> ID：10709515
> 
> 赞同：0
> 
> 时间：2012-05-22T20:16:29.450
> 
> 标签：asp.net, gridview, client-side

我在 UpdatePanel 中实现了一个 GridView，它的触发器是 GridViews SelectedIndexChanged 事件。正如预期的那样，它的工作速度非常慢。相反，我想在客户端处理这个问题，但找不到关于 GridView 支持哪些客户端事件的足够信息。任何人都可以指出可能提供此信息的任何参考资料吗？

编辑：即使有人不知道任何客户端事件，我也会感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:53:24.177

> 标准 ASP.NET GridView 有哪些客户端事件？

我很高兴被另一个回应证明是错误的，但是......没有？它是一个没有客户端 JavaScript 对象表示的服务器端对象。这是大多数标准 ASP.NET WebForms 控件的典型特征。

在 WebForm 上放置一个 GridView 并在`<asp:CommandField ShowSelectButton="true" />`客户端添加一个列，如下所示：`<td><a href="javascript:__doPostBack(&#39;GridView1&#39;,&#39;Select$0&#39;)">Select</a></td>`

您可以处理的任何对象上都没有客户端事件，它只是一个带有调用回发的 javascript 片段的锚点。如果你想要更花哨的东西，你将不得不自己烤一些东西，比如 - [http://weblogs.asp.net/andrewrea/archive/2008/08/04/gridview-row-click-selection-通过客户端代码.aspx](http://weblogs.asp.net/andrewrea/archive/2008/08/04/gridview-row-click-selection-via-clientside-code.aspx)

另*一种方法*是移动到另一个 ASP.NET WebForms“网格”控件。例如，我知道 DevExpress 网格有一个丰富的客户端对象模型。我几乎可以肯定 Telerik 也有类似的，而且可能还有其他一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T12:02:29.710

这是一些我使用它为 GridView 中的内置按钮创建客户端事件的代码。

```
protected void Page_LoadComplete(object sender, EventArgs e)
{
        MyCommon.GridButtonClientClick(gvLookup, "gclick()");
}

public static void GridButtonClientClick(GridView g, String function)
{
    foreach (GridViewRow gvr in g.Rows)
    {
        Control x = gvr.Cells[0].Controls[0];
        LinkButton y = (LinkButton)x;
        y.OnClientClick = function;
    }
} 
```

# javascript - 从 hide() 操作中排除父元素及其子元素

> ID：10709521
> 
> 赞同：0
> 
> 时间：2012-05-22T20:17:11.993
> 
> 标签：javascript, jquery, html

我正在构建此菜单，但在排除父母及其子女时遇到问题。我希望在没有额外课程的情况下解决这个问题。

所以它假设的工作方式是点击 a`a.clicked`并且它在它自己`.hide()`的外部但在它的范围内`li elements``li``ul`

找到父母并在我做`ul`的课程上放一堂课没问题。这里的难点在于排除. 听起来确实很乱，所以我尽量在脚本中发表评论。`li``li.active``li.active`

谢谢大家的输入

编辑：我在解释方面做得很差，但就像我点击`level 1 - 1`并`level 1 - 2`假设要隐藏一样，这就是我们在菜单中更深入地使用 2 - 1 等的模式

首先是**演示：http:** [//jsfiddle.net/Abj9u/6/](http://jsfiddle.net/Abj9u/6/)

```
$('.clicked').on('click', function(){
    var $this = $(this);

    //activate this li
    $this.parent('li:first').addClass('active');

    //hide the other level (1)(2)(3)(4)(ect..) li items
    //is there a way to exlude .active li and its children without adding a class like .sub to the sub li's?
    $this.parents('ul:first').find('li').not('.active').hide();

    //add class to this for style
    $this.addClass('selected');

    //show the sub ul
    $this.parent().children('ul:first').show();
});​ 
```

**html**

```
<ul id="nav">
    <li>
        <a href="#" class="clicked">Level 1 - 1</a>

        <ul class="hidden">
            <li><a href="#" class="clicked">Level 2.1 - 1</a>
                <ul class="hidden"><li><a href="#" class="clicked">Level 3.1 - 1</a></li></ul>                
            </li>
            <li><a href="#" class="clicked">Level 2.2 - 1</a>
                <ul class="hidden"><li><a href="#" class="clicked">Level 3.2 - 1</a></li></ul>                
            </li>
            <li><a href="#" class="clicked">Level 2.3 - 1</a>
                <ul class="hidden"><li><a href="#" class="clicked">Level 3.3 - 1</a></li></ul>                
            </li>
        </ul>                
    </li>

    <li>
        <a href="#" class="clicked">Level 1 - 2</a>

        <ul class="hidden">
            <li><a href="#" class="clicked">Level 2.1 - 2</a>
                <ul class="hidden"><li><a href="#" class="clicked">Level 3.1 - 2</a></li></ul>                
            </li>
            <li><a href="#" class="clicked">Level 2.2 - 2</a>
                <ul class="hidden"><li><a href="#" class="clicked">Level 3.2 - 2</a></li></ul>                
            </li>
            <li><a href="#" class="clicked">Level 2.3 - 2</a>
                <ul class="hidden"><li><a href="#" class="clicked">Level 3.3 - 2</a></li></ul>                
            </li>
        </ul>                
    </li>
</ul>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:37:07.520

也许是这样：

```
$(this).closest('li').siblings().hide() 
```

至于为什么会这样，这是不言自明的：

*   从这个子元素开始......
*   找到第一个父母 LI...
*   然后找到这个李的所有兄弟姐妹......
*   隐藏它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:44:17.907

如何`ul`在树上找到下一个，隐藏所有`li`s，然后只显示当前`li`？

```
$this.parents('ul:first > li').hide();
$this.parent().show(); 
```

**编辑**：虽然另一个答案是一个更好的解决方案......

# authentication - 单页应用认证

> ID：10709522
> 
> 赞同：15
> 
> 时间：2012-05-22T20:17:22.647
> 
> 标签：authentication, asp.net-web-api, single-page-application, asp.net-spa

我的公司正在使用 MVC 4 中的新 Web API / SPA 功能将其电子商务站点重写为单页应用程序。我们不确定如何处理身份验证的最佳方法。

具体问题：

1.  我们如何处理加密和非加密通信？显然，我们需要为登录、帐户和结帐 AJAX 使用 HTTPS，但我们希望使用 HTTP 来浏览目录，以避免昂贵的 SSL 握手会减慢整个站点的速度。这对于 SPA 来说是否可行，或者我们是否对所有事情都坚持使用 HTTPS？

2.  我们应该使用什么样的身份验证？主要是通过网络浏览器访问我们的网站，因此 cookie 可能没问题。但在未来，我们可能想要制作一个定制的 iPhone 应用程序。基本身份验证、OpenId 还是 OAUTH 更可取？如果是这样，为什么？

    1.  如果我们使用 Forms Auth 和 cookie，[重定向问题](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)是否会在 MVC 4 的发布中得到修复，还是我必须使用 haack？
    2.  如果我们使用基本身份验证，您如何进行持久会话，以便用户不必每次再次访问该页面时都必须登录。
    3.  ASP.NET MVC 4 很好地支持了哪些身份验证方法。最好不必编写大量专门的代码。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T17:57:30.317

## 1\. 我们如何处理加密和非加密通信？我们是否坚持使用一种协议 https 和 spa ？

您不会拘泥于一种协议。使用 spa，您可以使用 ajax 通过 http 或 https 进行通信，无论您在任何给定时间选择哪一个。我会在您发送敏感信息（例如人名、生日或登录凭据）时使用 https。

一旦用户通过 https 登录到您的站点，您的服务器就可以为该用户设置表单身份验证 cookie。这个 cookie 应该是一个加密值，将他们的会话与服务器联系起来。您必须知道，如果您网站的其余部分使用 http，那么您就有此 cookie 以纯文本形式通过网络传递的风险。即使 cookie 的内容可以加密，但使用您选择的加密算法，恶意人员可以窃取此 cookie 并劫持您用户的会话。

如果只允许他们浏览网站并创建购物车，这对您来说可能没什么大不了的。一旦用户准备好结账，那么您应该通过 https 重新验证用户身份，作为一种双重检查，以确保他们不是恶意用户。亚马逊就是这样做的。

## 2\. 我们应该使用什么样的身份验证？

好吧，这完全取决于您希望您的网站具有哪些功能。

**身份验证**用于公开 Web 服务，您可以允许其他站点以委托访问权限调用这些服务。这意味着如果您的用户希望另一个站点（站点 x）能够访问您站点上的功能以获取其个人资料。站点 x 可以将用户重定向到您站点上的 oauth 端点，该端点将对用户进行身份验证。您的 oauth 端点将询问用户是否可以与站点 x 共享某些功能，以及用户是否同意将生成令牌。用户将此令牌传递给站点 x，其中站点 x 将对您的站点进行服务器到服务器的调用。站点 x 将在调用中显示令牌，因此对您的服务的调用将是委托访问调用。OAuth 是一种配置其他站点以对您的服务进行委派访问的方法。我希望我能够清楚地解释这一点。我并不总是擅长这一点。

**OpenID**不是一种非常安全的身份验证方式，它更加方便，因此用户不必为在您的站点注册帐户而烦恼。因为 OpenID 是完全开放的，所以您信任另一个提供商来验证您的用户。如果第三方提供商的用户存储受到威胁，那么您的用户也会受到威胁。这是凭证系统的一个示例，您基本上是在说我会相信您所说的，如果您可以让 OpenID 提供商为您担保的话。

另一种解决方案是**WS-Federation**。WS-Federation 是如果您有多个站点并且您希望拥有 1 个您信任的身份验证提供程序。该身份验证提供者可以是您的，基本上您的所有网站都说如果您想访问我的网站，那么您必须首先通过我的身份验证提供者进行身份验证。此身份验证提供程序可以存在于单独的域中，并且可以选择它选择的任何身份验证机制。您相信此身份验证提供商会尽最大努力管理您的用户帐户。

但是，如果您只想在您的站点上进行身份验证并且没有多个站点，则 WS-Federation 可能会有点过分。在这种情况下，我只建议进行**表单身份验证**，这应该很简单。有很多关于如何做到这一点的例子，微软为如何做到这一点提供了许多解决方案。您应该考虑创建自定义成员资格提供程序。

* * *

一旦用户通过您的站点的身份验证，您应该创建一个[表单身份验证 cookie](http://support.microsoft.com/kb/910443)。此 cookie 将用户与他们在服务器上的会话联系起来。这适用于上面列出的所有场景。MVC 4 也支持上面列出的所有场景。

谢谢，如果我不够清楚，请随时提出更多问题。

** 编辑 2017 年 12 月 1 日 ** 多年后回到这个问题，我了解到依靠 cookie 来获取基于 REST 的 API 并不是一个好主意。您不想在 Web 应用程序上创建会话，因为这会使您的应用程序更难扩展。因此，如果您需要身份验证，请使用 HTTPS 和某种形式的身份验证（BASIC、DIGEST、基于令牌等）。因此，您的 SPA 客户端应用程序将在每个 http 请求上设置授权标头，然后您的 Web 服务器应用程序将重新验证每个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:11:47.257

使用 ASP.NET 基于表单的安全性的主要缺点是，它假定您在身份验证失败时需要一个 401 网页（在您进行 AJAX 调用时无用），并且它实际上是围绕执行重定向而设计的，这种重定向会破坏整体SPA 模式。你可以绕过它，但它不是为你使用它的目的而设计的。

该工具包可以提供 ASP.NET 作为表单模型的替代方案。还不知道成熟到什么程度……

[http://www.fluentsecurity.net](http://www.fluentsecurity.net)

欢迎反馈。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T06:51:00.730

我自己刚开始使用 webapi，所以不要认为我的答案是权威的。尽管我应该是安全专家，但我不是安全专家。我遇到了和你一样的问题，发现和你一样，*虽然*没有权威的答案 - 无论如何在 mvc webapi 中。查看其他 webapi 规范可能会给您一些启发。

我遇到的最简单的方法当然是使用 SSL。这样您就可以在标题中以明文形式发送凭据。不破坏休息。

我的 api 将一直使用 SSL，但无论如何我想加倍。因此，我在查询字符串中为我的所有请求发送了一个加密密钥。无 cookie 身份验证的方式几乎与非 api asp 站点的工作方式相同，但 mvc 不能使用它，所以我推出了自己的解决方案。

在移动网站上，用户将使用编码到 js.js 中的加密密钥登录并被重定向到应用程序。因此，他最初将拥有该站点的基于 cookie 的身份验证，并负责其保护、密码保存等。

另一个 api 使用者将从尚未制作的开发站点获得更永久的“秘密”，并使用它来检查密钥。

通常 mvc 身份验证是无状态的，这意味着票证永远不会在服务器端失效。如果您控制客户端，则可以在服务器将您注销时忽略无效的 cookie 请求，并继续重用票证。最终，您可能想要跟踪您的票务服务器端，但它不是无状态的，怀疑它是否完全正常，因此可伸缩性受到了打击。但是身份验证非常重要，所以...

# android - 从 Activity 启动 Android JUnit

> ID：10709524
> 
> 赞同：1
> 
> 时间：2012-05-22T20:17:25.143
> 
> 标签：android, junit, robotium

我正在做一个需要开始测试其他应用程序的应用程序。
想法是您选择一个应用程序（从列表中），然后为它选择一个测试用例。例如：您选择 facebook，然后测试登录。facebook 应用程序的测试用例开始（使用机器人黑盒测试）。
我创建了测试，如果我从 eclipse 作为 Android JUnit 启动它，它工作正常。但是我无法从我的应用程序启动它。我认为我可以使用某种意图开始测试但不能（我尝试了这个，因为我在 Manage Apps->All 中看到了测试）。我也尝试使用广播接收器 - 测试应用程序接收广播，但是当我尝试实例化测试时，构造函数需要调用 super(TARGET_PACKAGE_ID, launcherActivityClass); 其中 public static final String TARGET_PACKAGE_ID = "com.facebook.katana"; 公共静态最终字符串 LAUNCHER_ACTIVITY_FULL_CLASSNAME = "com.facebook.katana.LoginActivity"; 我的应用程序崩溃了： java.lang.ClassNotFoundException: com.facebook.katana.LoginActivity
有没有人有任何想法来解决这个问题？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:40:04.243

我遇到了这个问题，我的解决方案包括使用 Java 反射来获取 ActivityManagerNative，然后调用它的方法来启动测试。

所以，我的代码如下所示：

```
try {
        Class<?> ActivityManagerNative = Class
                .forName("android.app.ActivityManagerNative");
        Log.e("LOADED", "" + ActivityManagerNative);
        Method getDefault = ActivityManagerNative.getMethod("getDefault",
                (Class<?>[]) null);
        Class<?> IActivityManager = Class
                .forName("android.app.IActivityManager");
        Object am = IActivityManager.cast(getDefault.invoke(
                ActivityManagerNative, (Object[]) null));
        Class<?> IInstrumentationWatcher = Class
                .forName("android.app.IInstrumentationWatcher");
        Method startInstrumentation = IActivityManager.getMethod(
                "startInstrumentation", ComponentName.class, String.class,
                Integer.TYPE, Bundle.class, IInstrumentationWatcher);
        ComponentName cn = ComponentName
                .unflattenFromString("your.test.package/android.test.InstrumentationTestRunner");
        Bundle bundle = new Bundle();
        startInstrumentation.invoke(am, cn, null, 0, bundle, null);
} catch (Exception e) {
        e.printStackTrace();
} 
```

我不能完全相信代码，我在某个地方看到了类似的东西（用于其他目的），但我不记得在哪里。

基本上，代码试图`runInstrument`从[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/com/android/commands/am/Am.java#343)模拟。

干杯，西尔维乌

# android - 在 Mac OS X 上构建 CyanogenMod - strace 中的错误

> ID：10709526
> 
> 赞同：2
> 
> 时间：2012-05-22T20:17:41.480
> 
> 标签：android, c, macos, macports, cyanogenmod

我正在尝试在 Mac OS X Lion 上构建 CM9，我在设置环境时遵循了 android 开发人员网站的所有说明，然后通过 rsync 将 CM9 源代码从 Linux 笔记本移动到我的 MacBook，当我重建它时（$ brunch crespo )，我收到此错误：

```
 In file included from external/strace/syscall.c:121:
external/strace/linux/syscallent.h:359:3: error: #error fix me
In file included from external/strace/syscall.c:121:
external/strace/linux/syscallent.h:370: error: 'SYS_sub_send' undeclared here (not in a function)
external/strace/linux/syscallent.h:371: error: 'SYS_sub_recv' undeclared here (not in a function)
external/strace/linux/syscallent.h:372: error: 'SYS_sub_sendto' undeclared here (not in a function)
external/strace/linux/syscallent.h:373: error: 'SYS_sub_recvfrom' undeclared here (not in a function)
external/strace/linux/syscallent.h:381:3: error: #error fix me 
```

syscallent.h 中的以下行：

```
#if SYS_socket_subcall != 300
 #error fix me
#endif
    { 8,    0,  printargs,      "socket_subcall"}, /* 300 */
    { 3,    TN, sys_socket,     "socket"    }, /* 301 */
    { 3,    TN, sys_bind,       "bind"      }, /* 302 */
    { 3,    TN, sys_connect,        "connect"   }, /* 303 */
    { 2,    TN, sys_listen,     "listen"    }, /* 304 */
    { 3,    TN, sys_accept,     "accept"    }, /* 305 */
    { 3,    TN, sys_getsockname,    "getsockname"   }, /* 306 */
    { 3,    TN, sys_getpeername,    "getpeername"   }, /* 307 */
    { 4,    TN, sys_socketpair,     "socketpair"    }, /* 308 */
    /* Line 370 */{ 4,  TN, sys_send,       "send", SYS_sub_send }, /* 309 */ 
```

Linux 上没有问题，为什么我在 Mac OS 上有这些问题？

# jquery - Chrome：不打印 javascript 内容

> ID：10709527
> 
> 赞同：1
> 
> 时间：2012-05-22T20:17:41.603
> 
> 标签：jquery, google-chrome, printing, greasemonkey, tampermonkey

（这是通过油脂/篡改猴）。

这是使用 Chrome beta 浏览器的自助服务终端的打印功能：

```
$("#autoCheckOrder button").click ( function () {
    var newWin      = window.open (""); 
    newWin.document.write ( "<!DOCTYPE html>" );
    newWin.document.write( "<html>" );
    newWin.document.write( "<head>" );
    newWin.document.write( "<title>" );
    newWin.document.write( "</title>" );
    newWin.document.write( "<style>" );
    newWin.document.write( "@media print { " );
    newWin.document.write( "body { " );
    newWin.document.write( "background-color: white;" );
    newWin.document.write( "width: 55mm;" );
    newWin.document.write( "position: absolute;" );
    newWin.document.write( "top: 0;" );
    newWin.document.write( "left: 0;" );
    newWin.document.write( "padding: 0px;" );
    newWin.document.write( "font-size: 14px;" );
    newWin.document.write( "line-height: 18px;" );
    newWin.document.write( "}" );
    newWin.document.write( "}" );
    newWin.document.write( "</style>" );
    newWin.document.write( "</head>" );
    newWin.document.write( "<body>" );
    newWin.document.write ( loanHTML ); 
    newWin.document.write( "</body>" );
    newWin.document.write( "</html>" );
    if(newWin.print()) {
        newWin.close();
    } else {
        newWin.close();
    }
}); 
```

它从列出所有项目的页面中获取一个表格，然后创建一个“收据”。然后打印收据。这在一段时间内工作得很好，现在它只打印第一个项目。

我已经尝试了以下绝对没有结果：

*   使用分页符后：总是
*   使用上述 CSS 规则将收据放入 div
*   重新安装打印机
*   打印机的纸张缩减设置

疯狂的是，它过去可以完美地打印所有项目，而现在却不行了。为了确定，我什至从备份中重新安装了脚本。

不知道从这里去哪里。所有内容都显示在打印预览中，但仅打印第一项。“页眉和页脚”设置只会让事情变得更糟，而不是更好。

**更新**

我更改了发送到打印机的 HTML，它可以工作。仍然不确定它是否完全有效，但它正在打印。如果它停止打印，我会知道如何解决。感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:42:25.100

我能看到的唯一合理的解释是你的 loanHTML 变量是空的或未定义的。

演示：http: [//jsfiddle.net/waitinfratrain/bMzUt/2/](http://jsfiddle.net/waitinforatrain/bMzUt/2/)

注释掉该`var loanHTML`行并再次运行，您就会明白我的意思了。

# java - 在第二个意图中刷新数组列表

> ID：10709530
> 
> 赞同：2
> 
> 时间：2012-05-22T20:17:47.687
> 
> 标签：java, android, android-layout, arraylist, android-arrayadapter

我正在制作一个应用程序，该应用程序使用具有 2 个视图的 android 应用程序从 web 服务接收数据。

首先询问登录名和密码。然后是对 web 服务的活动请求，如果有数据，他创建一个在列表视图中显示数据的意图：

主要的

```
private ArrayList accountlist = new ArrayList();
...
accountlist.add(...)
...
Intent intent = new Intent(Main.this, Second.class);
intent.putExtra("accountlist", accountlist);
intent.putExtra("login", loginEditText.getText().toString());
intent.putExtra("pass", passwordEditText.getText().toString());
startActivity(intent); 
```

第二

```
private ArrayList accountlist;
...
public void onCreate(Bundle savedInstanceState) {
 ...
 setListAdapter(new ArrayAdapter<String>(this, R.layout.results,accountlist));
 ...
}
private void refresh() {
 ...
 accountlist.add(...)
 setListAdapter(new ArrayAdapter<String>(this, R.layout.results,accountlist));
} 
```

结果是我有添加到当前列表中的项目（例如，我有 2 个项目，如果我刷新 4 次，我将在视图中有 10 个项目，我只希望最后 2 个）

如果你有一个想法：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:46:54.927

好的，我刚用过

```
accountlist.clear(); 
```

紧随其后

```
Intent intent = new Intent(Main.this, Second.class);
intent.putExtra("accountlist", accountlist);
intent.putExtra("login", loginEditText.getText().toString());
intent.putExtra("pass", passwordEditText.getText().toString());
startActivity(intent); 
```

清除将重新用于启动意图的列表！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:27:32.690

您不能直接在活动之间传递 ArrayList，您必须通过序列化来获取某种对象。阅读本文：[如何在 Android 上将对象从一个活动传递到另一个活动？](https://stackoverflow.com/questions/2906925/android-how-do-i-pass-an-object-from-one-activity-to-another)

# android - Android：AlertDialog 中的固定宽度字体

> ID：10709531
> 
> 赞同：13
> 
> 时间：2012-05-22T20:18:05.457
> 
> 标签：android, android-alertdialog, android-2.3-gingerbread

我在 AlertDialog 中显示字符串列表，如下所示：

![在此处输入图像描述](../Images/3286458286e1a613f1cc475407d7a6c9.png)

1.如何设置固定宽度的字体，如下图所示

![在此处输入图像描述](../Images/f70f09b9258bebe90e826055c2968e4c.png)

2.AlertDialog默认启用垂直滚动。如何启用水平滚动以使最后一行保持在上一行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T14:10:19.983

为 AlertDialog 扩展您自己的视图并在该视图中设置 android:typeface="monospace" 。为达到这个：

![在此处输入图像描述](../Images/1d351dfbfea09ae23f3aa21318c90781.png)

使用此布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/dlgView"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <LinearLayout android:id="@+id/dlgLayout"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp">
    <TextView android:id="@+id/dlgText"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:textColor="#FFF"
      android:typeface="monospace"/>
  </LinearLayout>
</ScrollView> 
```

主要活动的这段代码构建了一个 AlertDialog（将一个按钮拖放到默认布局上）。

```
public class MonospacedAlertActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //attach an instance of HandleClick to the Button
        findViewById(R.id.button1).setOnClickListener(new HandleClick());
    }
    private class HandleClick implements OnClickListener{
        public void onClick(View arg0) {
            ShowAlert(MonospacedAlertActivity.this);
        }

        private void ShowAlert(Activity callingActivity) {
            //Generate views to pass to AlertDialog.Builder and to set the text
            View dlg;
            TextView tvText;
            try {
              //Inflate the custom view
              LayoutInflater inflater = callingActivity.getLayoutInflater();
              dlg = inflater.inflate(R.layout.alertmono, (ViewGroup) callingActivity.findViewById(R.id.dlgView));
              tvText = (TextView) dlg.findViewById(R.id.dlgText);
            } catch(InflateException e) {
              //Inflater can throw exception, unlikely but default to TextView if it occurs
              dlg = tvText = new TextView(callingActivity);
            }
            //Set the text
            tvText.setText( "22-05-2012 20:51:13 114 58 00:04:19\n"+
                            "22-05-2012 20:59:15  84 52 00:01:25\n"+
                            "22-05-2012 22:49:48  96 51 00:01:32\n"+
                            "23-05-2012 00:08:52  79 58 00:01:26");
            //Build and show the dialog
            new AlertDialog.Builder(callingActivity)
              .setTitle(callingActivity.getString(R.string.app_name))
              .setCancelable(true)
              .setIcon(R.drawable.ic_launcher)
              .setPositiveButton("OK", null)
              .setView(dlg)
              .show();    //Builder method returns allow for method chaining
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T00:46:02.793

我知道这已经很老了，但是...我刚刚发现了这一点，并认为其他人可能会感兴趣。早在 API 19 中，Typeface.java 中就定义了几种不同的字体：其中之一是 MONOSPACE。我在 Kotlin 中的警报对话框是：

```
private fun showDialog(mess:String) : Boolean {
    val tv = TextView(requireActivity())
    tv.typeface = Typeface.MONOSPACE
    tv.text = mess
    AlertDialog.Builder(this.requireContext())
        .setTitle("Changes in deck")
        .setView(tv)
        .show()
    return true
} 
```

# rabbitmq - 是否可以直接从命令行查看 RabbitMQ 消息内容？

> ID：10709533
> 
> 赞同：126
> 
> 时间：2012-05-22T20:18:06.190
> 
> 标签：rabbitmq, rabbitmqctl, rabbitmqadmin

是否可以直接从命令行查看 RabbitMQ 消息内容？

`sudo rabbitmqctl list_queues`列出队列。

有没有类似的命令`sudo rabbitmqctl list_queue_messages <queue_name>`？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-22T21:27:38.293

您应该启用管理插件。

```
rabbitmq-plugins enable rabbitmq_management 
```

看这里：

[http://www.rabbitmq.com/plugins.html](http://www.rabbitmq.com/plugins.html)

这里是管理的细节。

[http://www.rabbitmq.com/management.html](http://www.rabbitmq.com/management.html)

最后，一旦设置完成，您将需要按照以下说明安装和使用 rabbitmqadmin 工具。可用于与系统进行充分交互。 [http://www.rabbitmq.com/management-cli.html](http://www.rabbitmq.com/management-cli.html)

例如：

```
rabbitmqadmin get queue=<QueueName> requeue=false 
```

会给你队列中的第一条消息。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-09-10T17:37:46.373

以下是我用来获取队列内容的命令：

在 Fedora linux 上使用[https://www.rabbitmq.com/management-cli.html的 RabbitMQ 版本 3.1.5](https://www.rabbitmq.com/management-cli.html)

以下是我的交流：

```
eric@dev ~ $ sudo python rabbitmqadmin list exchanges
+-------+--------------------+---------+-------------+---------+----------+
| vhost |        name        |  type   | auto_delete | durable | internal |
+-------+--------------------+---------+-------------+---------+----------+
| /     |                    | direct  | False       | True    | False    |
| /     | kowalski           | topic   | False       | True    | False    |
+-------+--------------------+---------+-------------+---------+----------+ 
```

这是我的队列：

```
eric@dev ~ $ sudo python rabbitmqadmin list queues
+-------+----------+-------------+-----------+---------+------------------------+---------------------+--------+----------+----------------+-------------------------+---------------------+--------+---------+
| vhost |   name   | auto_delete | consumers | durable | exclusive_consumer_tag |     idle_since      | memory | messages | messages_ready | messages_unacknowledged |        node         | policy | status  |
+-------+----------+-------------+-----------+---------+------------------------+---------------------+--------+----------+----------------+-------------------------+---------------------+--------+---------+
| /     | myqueue  | False       | 0         | True    |                        | 2014-09-10 13:32:18 | 13760  | 0        | 0              | 0                       |rabbit@ip-11-1-52-125|        | running |
+-------+----------+-------------+-----------+---------+------------------------+---------------------+--------+----------+----------------+-------------------------+---------------------+--------+---------+ 
```

将一些项目塞入 myqueue：

```
curl -i -u guest:guest http://localhost:15672/api/exchanges/%2f/kowalski/publish -d '{"properties":{},"routing_key":"abcxyz","payload":"foobar","payload_encoding":"string"}'
HTTP/1.1 200 OK
Server: MochiWeb/1.1 WebMachine/1.10.0 (never breaks eye contact)
Date: Wed, 10 Sep 2014 17:46:59 GMT
content-type: application/json
Content-Length: 15
Cache-Control: no-cache

{"routed":true} 
```

RabbitMQ 查看队列中的消息：

```
eric@dev ~ $ sudo python rabbitmqadmin get queue=myqueue requeue=true count=10
+-------------+----------+---------------+---------------------------------------+---------------+------------------+------------+-------------+
| routing_key | exchange | message_count |                        payload        | payload_bytes | payload_encoding | properties | redelivered |
+-------------+----------+---------------+---------------------------------------+---------------+------------------+------------+-------------+
| abcxyz      | kowalski | 10            | foobar                                | 6             | string           |            | True        |
| abcxyz      | kowalski | 9             | {'testdata':'test'}                   | 19            | string           |            | True        |
| abcxyz      | kowalski | 8             | {'mykey':'myvalue'}                   | 19            | string           |            | True        |
| abcxyz      | kowalski | 7             | {'mykey':'myvalue'}                   | 19            | string           |            | True        |
+-------------+----------+---------------+---------------------------------------+---------------+------------------+------------+-------------+ 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-11-12T02:32:08.497

我写了[rabbitmq-dump-queue](https://github.com/dubek/rabbitmq-dump-queue)，它允许将消息从 RabbitMQ 队列转储到本地文件，并按原始顺序重新排列消息。

示例用法（转储 queue 的前 50 条消息`incoming_1`）：

```
rabbitmq-dump-queue -url="amqp://user:password@rabbitmq.example.com:5672/" -queue=incoming_1 -max-messages=50 -output-dir=/tmp 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-15T07:22:44.783

您可以使用 RabbitMQ API 来获取计数或消息：

```
/api/queues/vhost/name/get 
```

从队列中获取消息。（这不是 HTTP GET，因为它会改变队列的状态。）您应该发布一个如下所示的正文：

```
{"count":5,"requeue":true,"encoding":"auto","truncate":50000} 
```

count 控制要获取的最大消息数。如果队列不能立即提供消息，您收到的消息可能会少于此数量。

requeue 确定消息是否将从队列中删除。如果 requeue 为真，它们将被重新排队 - 但它们的重新传递标志将被设置。encoding 必须是“auto”（在这种情况下，如果有效 UTF-8 有效负载将作为字符串返回，否则将返回 base64 编码）或“base64”（在这种情况下，有效负载将始终采用 base64 编码）。如果存在 truncate ，如果它大于给定的大小（以字节为单位），它将截断消息有效负载。截断是可选的；所有其他键都是强制性的。

请注意，HTTP API 中的发布/获取路径用于注入测试消息、诊断等 - 它们不实现可靠的传递，因此应被视为系统管理员的工具，而不是用于消息传递的通用 API。

[http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_1_3/priv/www/api/index.html](http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_1_3/priv/www/api/index.html)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-04-02T09:10:15.517

如果你想要一个队列中的多条消息，比如 10 条消息，使用的命令是：

```
rabbitmqadmin get queue=<QueueName> ackmode=ack_requeue_true count=10 
```

如果您不希望消息重新排队，只需更改`ackmode`为`ack_requeue_false`.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-02-02T15:33:48.097

有点晚了，但是是的，rabbitmq 有一个内置的跟踪器，可以让你在日志中看到传入的消息。启用后，您可以`tail -f /var/tmp/rabbitmq-tracing/.log`（在 Mac 上）观看消息。

详细说明在这里[http://www.mikeobrien.net/blog/tracing-rabbitmq-messages](http://www.mikeobrien.net/blog/tracing-rabbitmq-messages)

# javascript - getElementById 中的多个 ID

> ID：10709537
> 
> 赞同：0
> 
> 时间：2012-05-22T20:18:21.510
> 
> 标签：javascript, html, css

我找到了一个很棒的教程，可以在使用 Javascript ( [http://code.stephenmorley.org/javascript/detachable-navigation/](http://code.stephenmorley.org/javascript/detachable-navigation/) ) 滚动时从页面中分离导航以使其保持静态。

但是，我想在多个导航 div 上实现这一点。

我假设它正在添加另一个类名， `document.getElementById('navigation').className`但我无法获得正确的语法

这是代码：

```
/* Handles the page being scrolled by ensuring the navigation is always in
 * view.*/   
function handleScroll(){

  // check that this is a relatively modern browser
if (window.XMLHttpRequest){

// determine the distance scrolled down the page
var offset = window.pageYOffset
           ? window.pageYOffset
           : document.documentElement.scrollTop;

// set the appropriate class on the navigation
document.getElementById('navigation').className =
    (offset > 104 ? 'fixed' : '');

  }

}

// add the scroll event listener
if (window.addEventListener){
  window.addEventListener('scroll', handleScroll, false);
}else{
  window.attachEvent('onscroll', handleScroll);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:21:57.247

您必须`getElementById()`为每个 ID 打电话。该方法仅旨在获取一个元素（或零，如果未找到 ID）。

假设，你有两个导航 div，左右，像这样：

```
<div id="navigationLeft">
     <ul>
         <!-- Navigation entries -->
     </ul>
</div>
<!-- Maybe some content or whatever? -->
<div id="navigationRight">
     <ul>
         <!-- Navigation entries -->
     </ul>
</div> 
```

然后您的 Javascript 行将如下所示：

```
// set the appropriate class on the navigation
document.getElementById('navigationLeft').className = (offset > 104 ? 'fixed' : '');
document.getElementById('navigationRight').className = (offset > 104 ? 'fixed' : '');

// or, shorter but less readable (i think) 
document.getElementById('navigationLeft').className
    = document.getElementById('navigationRight').className
        = (offset > 104 ? 'fixed' : ''); 
```

如果这还不能回答您的问题，请随时在您的问题中添加一些相关的 HTML 代码。[更新：示例]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:31:06.357

不*建议*您将 id 替换为 classes 并在循环中使用它来设置值：

HTML：

```
<div class="navigation">
  <p>test 1</p>
</div>
<div class="navigation">
  <p>test 2</p>
</div> 
```

Javascript：

```
divs = document.getElementsByClassName('navigation');
for(i = 0; i < divs.length; i++) {
    var div = divs[i];
    var divClassName = div.className;
    if(divClassName.indexOf('fixed') != -1 && offset > 104) {
       divClassName.replace(' fixed','');
    } else {
       divClassName += ' fixed';
    }
} 
```

我认为这会成功:-)

问候！贡萨洛·G。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:31:30.960

你不应该在一个页面上有多个具有相同 ID 的项目，ID 是唯一的......如果你想捕获你应该使用的多个项目：

```
<div class="navigation"></div>

var nodes = document.getElementsByClassName('navigation') 
```

...如果不使用 jquery，否则执行类似的操作

```
var nodes = $('.navigation') 
```

这将为您提供导航栏，然后检查该节点是否也“固定”（一个节点可以有多个 css 类）

```
(nodes[i].indexOf("navigation") >= 0) 
```

如果使用 jquery，你可以使用`.hasClass('fixed')`）

```
nodes[i].hasClass('fixed') 
```

...您当前的问题是它无法将 className 添加到导航中，因为其中有两个并且您没有指定要使用哪个。

如果您希望这发生在两个导航 div 中，请考虑将它们都放入一个 div 中并命名为 nav 并在其上设置样式（这取决于您的设计）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T20:36:10.110

元素上的所有 id 必须是唯一的。

一种可以进行简单更改的解决方案是将 CSS 文件更改为以下内容：

```
.navigation{
  position:absolute;
  top:120px;
  left:0;
}

.navigationFixed{
  position:fixed;
  top:16px;
} 
```

并定义 Div 的 vis：

```
<div class="navigation">
  <!-- your navigation code -->
</div> 
```

然后将 JavaScript 编辑为类似以下内容的内容：

```
/* Handles the page being scrolled by ensuring the navigation is always in
 * view.
 */
function handleScroll(){

  // check that this is a relatively modern browser
  if (window.XMLHttpRequest){

  divs = document.getElementsByClassName('navigation');
  for(i = 0; i < divs.length; i++) {
    // determine the distance scrolled down the page
    var offset = window.pageYOffset
               ? window.pageYOffset
               : document.documentElement.scrollTop;
    divs[i].className =
        (offset > 104 ? 'navigationFixed' : 'navigation');

    } 

  }

}

// add the scroll event listener
if (window.addEventListener){
  window.addEventListener('scroll', handleScroll, false);
}else{
  window.attachEvent('onscroll', handleScroll);
} 
```

# c++ - cocos2d-x 中正确的实例化和内存管理

> ID：10709538
> 
> 赞同：4
> 
> 时间：2012-05-22T20:18:25.723
> 
> 标签：c++, cocoa, memory-management, instantiation, cocos2d-x

我一直在寻找 cocos2d-x 的文档，但除了基础知识之外，它似乎真的很差。我知道我自己的类应该继承自`CCObject`能够使用（最初是可可的）`retain`/`release`机制，但我仍然对当你`new`做某事时会发生什么感到困惑。`init`不会自动调用。从构造函数内部调用它可以吗？仅此一项就可以保证我的对象将从引用计数 1 开始吗？什么是`CC_SAFE_DELETE`我应该在什么时候使用它？做`release`和`autorelease`工作完全像可可？怎么样`CC_SYNTHESIZE`？我只需要查看一个**正确编码**的类示例（它是实例化/破坏）来了解我应该做什么，以免搞砸并留下内存泄漏。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T05:43:35.203

如果您查看 CCObject 类的代码，您会看到它的构造函数引用计数设置为 1。因此，对象创建`new`是正确的。Init 没有被调用，因为 CCObject 类没有这样的方法。通常我更喜欢使用静态构造函数来创建对象。喜欢

```
MyClass* MyClass::createInstance()
{
    MyClass* object = new MyClass();

    // you can create virtual init method
    // and call it here

    if( initWasSuccessful )
    {
        object->autorelease();
    }
    else
    {
        CC_SAFE_RELEASE_NULL(object);
    }
    return object;
} 
```

关于所有宏，如 CC_SAFE_DELETE - 你可以在 cocos2dx 的代码中找到它们。此宏仅检查对象是否为 NULL 以防止尝试调用 release 方法时崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:44:50.923

Morion 提供的答案很好，我只想添加一些关于这个问题的有用链接。

在这里你可以找到Cocos2d-x官方的内存管理页面： [Cocos2d-x中的内存管理](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Memory_Management_in_Cocos2d-x)

这个论坛页面还包含一些更多的细节和澄清： [Cocos2d-x 中的内存释放](http://www.cocos2d-x.org/boards/6/topics/678)

享受编码！

# java - NetBeans 平台：设置依赖关系/从其他模块访问方法

> ID：10709548
> 
> 赞同：0
> 
> 时间：2012-05-22T20:19:17.983
> 
> 标签：java, netbeans, dependencies, netbeans-platform

我有一个关于使用 NetBeans 平台和设置依赖关系或只是从另一个模块引用类的问题。

是）我有的：

NetBeans 平台应用程序，带有一个名为 Viewer 的主模块

```
com.demo.viewer
 -MainScreenTopComponent.java 
```

我有一个名为 MenuToolbar 的模块

```
com.demo.toolbar
 -menutoolbar.java
 -action1.java 
```

menutoolbar.java 有一个我想从 MainScreenTopComponent 访问的方法。

我尝试右键单击查看器模块，转到属性>库并添加对 MenuToolbar 模块的依赖项，但是我仍然无法导入包。

任何帮助表示赞赏=（

谢谢你！

**编辑：**解决了自己。我没有在 Viewer 中添加依赖项，而是添加了我在平台的 Build/Clusters/Modules 文件夹中找到的 Warpped Jar！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:20:18.020

无需使用包装的 JAR。

您需要从模块 MenuToolbar 中导出类：

1.  右键单击您的模块
2.  选择属性
3.  单击“API 版本控制”
4.  检查`com.demo.toolbar`标有“公共包”的包列表中的包

这假定您的 MenuToolbar 模块已经是您的 NetBeans 平台应用程序的一部分

# php - 输出原始图像流而不是 jpeg，即时调整图像大小

> ID：10709550
> 
> 赞同：5
> 
> 时间：2012-05-22T20:19:23.550
> 
> 标签：php, html, image

我有一个 PHP 函数可以即时调整图像大小以创建缩略图。

我遇到了麻烦，因为它只是显示原始图像流而不是实际图像。

我的代码使用了一个名为 thumbnail 的函数：

```
$thumbnail = thumbnail($item['filename'], 209, 137);
imagejpeg($thumbnail); 
```

我试过投入：

```
header("Content-type: image/jpeg"); 
```

但是，这只是期望整个页面是图像。我完全不知道从这里去哪里，已经工作了一段时间。我宁愿不将图像保存到磁盘，尽管看起来这可能是必要的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T20:25:10.520

你要么

## 以[正常方式进行](http://es.php.net/manual/en/function.imagejpeg.php)

这意味着您指向*一个*url，并提供*一张*图片的内容：

```
<img src="myimage.php"> 
```

并且`myimage.php`是一个看起来像这样的脚本：

```
header('Content-type: image/jpeg');
imagejpeg($thumbnail);
die; 
```

这种技术的优点是......正常的做事方式。

或者

## 内联输出图像

使用[data uris](http://en.wikipedia.org/wiki/Data_URI_scheme#HTML)将内容输出为[base64 编码的字符串](http://php.net/manual/en/function.base64-encode.php)

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

这种技术最适合小图像。

它的优点是所有图像都在主要的 http 请求中 - （可能相当大的）缺点是使页面更难编辑/构建，并可能否定浏览器缓存的好处（除非 html 页面本身被缓存）。

## 正常更容易

关于问题中的这个陈述：

> 但是，这只是希望整页是图像

没错-如果您以正常方式执行此操作，则希望`src`使用图像标记的属性指向您的php 脚本，并且*只*提供图像-即，与您使用浏览器指向图像文件的响应完全相同。

除非你有充分的理由以不同的方式做事——“正常”的方式是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:23:45.483

您可以将 html img 标签指向 php 文件。

```
<img src='thumbnail.php?file=<?php echo $item['filename']; ?>' /> 
```

然后在您的 php 文件上显示图像并更改标题，因为它所做的只是显示图像。

```
$thumbnail = thumbnail($_GET['filename'], 209, 137);
imagejpeg($thumbnail);

header("Content-type: image/jpeg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:26:16.203

您需要像在 HTML 中插入普通图像一样插入图像，并在单独的 PHP 文件中创建图像：

***图像.php***

```
<?php
$img = imagecreate(100,100); //Create an image 100px x 100px
imagecolorallocate($img, 255,0,0); //Fill the image red
header('Content-type: image/jpeg'); //Set the content type to image/jpg
imagejpeg($img); //Output the iamge
imagedestroy($img); //Destroy the image
?> 
```

***我的网页.html***

```
<img src="image.php" /> 
```

# iphone - 范围栏按钮可以用于过滤结果而不激活 UISearchBar 的键盘吗？

> ID：10709552
> 
> 赞同：1
> 
> 时间：2012-05-22T20:19:29.683
> 
> 标签：iphone, objective-c, ios, uitableview, uisearchbar

我在加载时显示带有搜索栏和范围栏按钮的 UITableView。当用户点击范围栏按钮时，将显示键盘并且搜索栏获得焦点（成为第一响应者）。

是否可以允许使用范围栏按钮来过滤表格项目而不出现键盘？用户可以通过在搜索文本输入字段中专门点击来显示键盘。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:05:23.917

我最终的解决方案涉及在视图控制器上使用两个委托方法和一个状态变量。

在视图控制器上，我添加了属性

```
NSNumber *scopeButtonPressedIndexNumber; 

- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar {  

  if (self.scopeButtonPressedIndexNumber != nil) {
    self.scopeButtonPressedIndexNumber = nil; //reset
    return NO;
  }
  else {
    return YES;  
  }

} 

- (void)searchBar:(UISearchBar *)searchBar selectedScopeButtonIndexDidChange:(NSInteger)selectedScope {
  self.scopeButtonPressedIndexNumber = [NSNumber numberWithInt:selectedScope];
} 
```

本质上，如果按下了范围按钮，我会捕获，如果是这种情况，我会在 shouldBeginEditing 中返回 NO。通过这种方式，我能够防止焦点转到搜索栏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:36:27.743

当然。实现取决于您如何设置 UITableView，但假设您使用的是 NSFetchedResultsControllers，您可以这样做：

1）假设您有 3 个范围栏按钮；创建 4 个 NSFRC。

2) 为前 3 个 NSFRC 创建 fetch 请求，每个请求都带有一个谓词，用于仅选择相应范围栏按钮的相关范围。

3) 使用最终的 NSFRC 进行搜索功能。请参阅 Brent Piddy 关于[如何使用 UISearchDisplayController/UISearchBar 过滤 NSFetchedResultsController (CoreData)](https://stackoverflow.com/questions/4471289/how-to-filter-nsfetchedresultscontroller-coredata-with-uisearchdisplaycontroll)的帖子，以了解有关如何实现搜索的详细信息（如果您尚未这样做）。

4）当用户点击范围栏按钮时，**不要**在搜索栏中写任何文本，而只是交换相关的 NFC。突出显示按钮（或考虑使用 UISegmentedControl），以便用户可以看到他们正在查看的范围。

5）当用户在搜索栏中输入文本时，在搜索栏中交换 NSFRC，如上面布伦特的帖子中所述。删除按钮或 UISegmentedControl 上的任何突出显示，并将搜索栏与用户的文本一起留在屏幕上，这样他们就可以再次看到他们正在查看的范围。

# benchmarking - 寻找对 C lib 字符串和内存函数进行基准测试的代码

> ID：10709554
> 
> 赞同：0
> 
> 时间：2012-05-22T20:19:41.103
> 
> 标签：benchmarking, memcpy, strcmp, memset, strcpy

我正在寻找可用于对 C lib 内存和字符串函数（如 memcpy、memset、strcpy、strcmp 等）进行基准测试的现有代码。我已经进行了 google 搜索，并且对于已经完成此类基准测试的人来说，有几个命中但每个人似乎是在编写自己的代码，或者他们没有提到他们使用了什么？

有一个 cachebench 可以测试 memset 和 memcpy。我想知道是否还有其他带有此类测试的流行基准套件？我不想在这里重新发明轮子。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:26:15.310

Gnu.org 提供了一个基准测试[程序](http://www.gnu.org/software/m68hc11/examples/bench-string.html#bench-string "一些字符串操作的基准。")：

*   字符串
*   strcat
*   斯特伦
*   strcmp
*   字符串
*   字符串

# jquery - Chrome 在刷新后更改样式并在我右键单击检查时更正它

> ID：10709557
> 
> 赞同：5
> 
> 时间：2012-05-22T20:20:03.020
> 
> 标签：jquery, html, css, google-chrome, refresh

至少在我的经验中，这是一个非常奇怪的错误。

我已经制作了该站点的测试版本，因此您可以[在这里](http://stacko.freeiz.com/)看到它。

重现步骤：

进入网站，你看`#thelist`就好了：

![在此处输入图像描述](../Images/57aacdcf749f1ff5c753d56ad79fe7a0.png)

当您在 Windows 机器上进行简单刷新时，问题就出现了，所以`Ctrl`+`R`或`F5`.

现在`#thelist`将去改变它的位置：

![在此处输入图像描述](../Images/d70d6236505c85ea5f7240df08a9f2f5.png)

我解决这个问题的主要问题是，当我尝试检查元素时，它会立即回到正确的位置......

另请注意，如果您执行硬刷新`Ctrl`+ `Shift`+`R`或`Ctrl`+ `F5`，则元素将返回到正确位置。

这怎么可能，是什么原因造成的？如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:36:46.790

在 上`#imgSlot`，在 HTML 中设置尺寸：

```
<img id="imgSlot" src="img/slot.png" width="322" height="147"> 
```

并且问题不再发生。

您的原始代码：http: [//jsbin.com/efejay](http://jsbin.com/efejay)

尺寸：http: [//jsbin.com/efejay/2](http://jsbin.com/efejay/2)

这显然是一个 WebKit 错误。我认为这与正在缓存的图像有关。我过去也见过类似的事情，但通常都涉及到 JavaScript。例如：[jQuery height() 返回 false 值](https://stackoverflow.com/questions/10590482/jquery-height-returning-false-values/10591202#10591202)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:24:50.870

尝试**position: relative**在**#rightColumn**上并将元素定位在**顶部**和**左侧**而不是**边距**

# java - Java 应用程序自动调整大小以适应屏幕分辨率

> ID：10709561
> 
> 赞同：0
> 
> 时间：2012-05-22T20:20:41.133
> 
> 标签：java, swing, user-interface, netbeans, screen-resolution

我正在开发的触摸屏应用程序将用于不同的屏幕分辨率。我以前从来不用担心这个，但现在我担心了。我想知道如何设计 GUI，以便 GUI 上的每个对象都按比例调整大小以适应屏幕分辨率？你能给我推荐一个好的教程页面吗？我正在使用 NetBeans 和 Swing 框架设计应用程序。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T21:15:54.043

> 我想知道如何设计 GUI，以便 GUI 上的每个对象都按比例调整大小以适应屏幕分辨率？

*   不容易的工作你必须测试所有可能存在的像素比率（默认情况下可以在今天的全高清屏幕上更改和设置各种像素比率）有很多失败

*   这就是[LayoutManagers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)存在的原因，

*   我建议使用[NestedLayout](https://stackoverflow.com/questions/5621338/about-swing-and-jtable/5630271#5630271)

*   确保有 custom `LayoutManagers`，例如通过使用`MigLayout`(something betweens `GridBagLayout`and `SpringLayout`) 可以将所有 JComponents 从一个地方放入容器，但我再次建议`NestedLayout`使用

*   您必须（内部）设置最小 screenSize 以在 中显示内容`JScrollPane`，例如分辨率小于 1024 x 600 的屏幕将具有可滚动的内容，否则让我们为`LayoutManagers`,

*   这个想法在所有情况下都需要模型`JFrame`---> `JScrollPane`---> `JPanel`（父面板），`JScrollPane`将保护您的 GUI 免受小（和双）屏幕分辨率的影响

*   您必须查看`FontMetrics`for `Font`，因为您需要根据屏幕上的`Font`大小连续减小/减小各种像素比率的大小`JComponents`

*   与`Icons`如果存在相同，在某些图形软件之前准备好，而不是在运行时调整大小

*   我的观点--->任何`Framework`基于`AWT/Swing`这种性质的工作都不是优势，

# jetty - LiftWeb 生产

> ID：10709563
> 
> 赞同：0
> 
> 时间：2012-05-22T20:20:58.247
> 
> 标签：jetty, lift, production-environment

我计划部署一个基于 LiftWeb（和 Jetty）的 Web 服务，并且想知道最合适的解决方案是什么（就流程主机而言）。

我能想到的第一个解决方案是执行 Jetty 和我的服务的 Linux 守护进程。另一种选择是从命令行（JAVA ...）运行它。

我很高兴知道是否有人在上述解决方案之一遇到困难或有其他替代方案。

谢谢，

吉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:25:56.110

Jetty 也有一个可用的 setuid 选项，它被打包在 jetty-hightide 发行版中，也可以作为 maven Central 中的工件使用。

[http://repo2.maven.org/maven2/org/mortbay/jetty/jetty-hightide/](http://repo2.maven.org/maven2/org/mortbay/jetty/jetty-hightide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T09:42:20.637

我的解决方案`sbt package`在控制台中运行，并将 WAR 文件复制到 jetty/webapps/root.war。 [https://www.assembla.com/spaces/liftweb/wiki/Apache_and_Jetty_Configuration](https://www.assembla.com/spaces/liftweb/wiki/Apache_and_Jetty_Configuration)

# java - 为什么 Apache Camel 中 JSON 编组的这个简单示例不起作用？

> ID：10709564
> 
> 赞同：4
> 
> 时间：2012-05-22T20:20:58.823
> 
> 标签：java, apache-camel, xstream, unmarshalling

我花了很长时间试图弄清楚这一点。我正在编写一个接收用户名和密码的服务。然后，它使用处理器生成身份验证令牌，该令牌在消息的 Out 部分中返回。我想接受 JSON 格式的参数，并试图让类型转换正常工作。我已将问题简化为一个自包含的单元测试，如下所示：

```
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.model.dataformat.JsonDataFormat;
import org.apache.camel.model.dataformat.JsonLibrary;
import org.apache.camel.test.junit4.CamelTestSupport;
import org.junit.Test;
import com.thoughtworks.xstream.annotations.XStreamAlias;

public class BasicJsonMarshallingTest extends CamelTestSupport {

@Override
protected RouteBuilder createRouteBuilder() throws Exception {
    final Processor simpleProcessor = new Processor() {
        @Override public void process(Exchange exchange) throws Exception {
            SimpleBean bean = exchange.getIn().getBody(SimpleBean.class);
            if(bean == null){
                return;
            }
            exchange.getOut().setBody("a=" + bean.getA() + " b=" + bean.getB());
        }
    };

    return new RouteBuilder() {
        @Override public void configure() throws Exception {
            JsonDataFormat jsonFormat = new JsonDataFormat(JsonLibrary.XStream);
            jsonFormat.setUnmarshalType(SimpleBean.class);
            from("direct:service").unmarshal(jsonFormat).process(simpleProcessor);
        }
    };
}

@Test
public void testSuccessfulAuthentication(){
    Exchange lAuthRequest = createExchangeWithBody("{\"simple\":{\"a\":\"v1\",\"b\":\"v2\"}}");
    template.send("direct:service", lAuthRequest);
    assertEquals("a=v1 b=v2", lAuthRequest.getOut().getBody());
}

@XStreamAlias("simple")
public static final class SimpleBean {

    private String a;
    private String b;

    public void setA(String a) {
        this.a = a;
    }
    public String getA() {
        return a;
    }
    public void setB(String b) {
        this.b = b;
    }
    public String getB() {
        return b;
    }

}

} 
```

当我运行这个测试时，我在控制台中得到了这个异常：

```
com.thoughtworks.xstream.mapper.CannotResolveClassException: simple
    at com.thoughtworks.xstream.mapper.DefaultMapper.realClass(DefaultMapper.java:56)[xstream-1.4.1.jar:]
    at com.thoughtworks.xstream.mapper.MapperWrapper.realClass(MapperWrapper.java:30)[xstream-1.4.1.jar:]
    <snip> 
```

我是否以某种方式接近这个错误？请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T20:50:36.970

我找到了一种方法来完成这项工作。我切换到 Jackson 作为我的 JSON 解析器，它工作正常。为此，我所要做的就是将 RouteBuilder 更改为：

```
 return new RouteBuilder() {
        @Override public void configure() throws Exception {
            from("direct:service").unmarshal().json(JsonLibrary.Jackson, SimpleBean.class).process(simpleProcessor);
        }
    }; 
```

我还必须更改通过网络发送的 JSON 的格式：

{"简单":{"a":"v1","b":"v2"}}

对此（无论如何我更喜欢）：

{“a”：“v1”，“b”：“v2”}

# powershell - 实施 PowerShell PSProvider *in* PowerShell

> ID：10709569
> 
> 赞同：5
> 
> 时间：2012-05-22T20:21:16.597
> 
> 标签：powershell, powershell-2.0

我正在寻找**在**PowerShell 中实现 PowerShell 提供程序。

我一直在想，如果我只是定义类型，然后将它们导入我的会话（导入模块），我应该能够让它们可用。

例如，这**不起作用**，但它沿着我想要实现的路径。

我显然错过了很多......有人知道这是否可能吗？

```
# EnvironmentProvider.ps1
    $reference_assemblies = (

      "System.Management.Automation, Version=1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" 
    #  "System.Configuration.Install, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    )

    $source = @"

    namespace Providers
    {

    using System.Management.Automation;
    using System.Management.Automation.Provider;

        [CmdletProvider("Environments", ProviderCapabilities.None)]
        public class EnvironmentProvider : DriveCmdletProvider
        {
            protected override PSDriveInfo NewDrive(PSDriveInfo drive)
            {
                return new EnvironmentDriveInfo(drive);
            }

            protected override object NewDriveDynamicParameters()
            {
                return base.NewDriveDynamicParameters();
            }

        }

         public class EnvironmentDriveInfo : PSDriveInfo
        {
            public EnvironmentDriveInfo(PSDriveInfo driveInfo) : base(driveInfo)
            {
            }
        }

    }
    "@

    # -ea silentlycontinue in case its already loaded
    #
    add-type -referencedassemblies $referenced_assemblies -typedefinition $source -language CSharp -erroraction silentlycontinue 
```

导入模块后，我尝试创建驱动器“环境”：

```
new-psdrive -psprovider Environments -name "Environments" -root "" 
```

错误：

```
New-PSDrive : Cannot find a provider with the name 'Environments'. 
```

假设提供者实际工作，也许让它返回一个环境列表：dev、qa、staging、production。

然后我希望能够通过以下方式重新使用它：

```
c:\adminlib>import-module .\EnvironmentProvider.ps1
c:\adminlib>environments:

environments:>ls
dev
qa
staging
production

environments:> cd production
environments\production> [execute actions against production]

environments\production:> cd dev
environments\dev:> [execute actions against dev, etc] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T21:03:51.973

我强烈建议你看看 Oisin 写的东西，怀疑像你这样的人，他们可以抓住它，这可能是非常好的参考。或者也许应该避免什么？;) 您可以在 codeplex 上找到它：http: [//psprovider.codeplex.com/](http://psprovider.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T14:36:48.900

我知道你问这个问题已经有一段时间了，但我自己一直在寻找同样的答案。碰巧的是，重新阅读 msdn 中的 Samples 最终让我得到了答案，并且考虑到我认为我会分享的挫败商数：

需要使用 Import-Module 导入包含提供程序的程序集（不仅仅是包含 add-type 声明的模块）。这可以通过两种方式完成：

选项 1：使用将运行时程序集构建为 .dll 文件的 Add-Type 参数并导入该文件。

选项 2：从内存中导入运行时程序集。这就是我使用标准 msdn 示例的方式：

```
[appdomain]::CurrentDomain.GetAssemblies() | Where {$_.ExportedTypes -ne $null} | Where {($_.ExportedTypes | Select -ExpandProperty "Name") -contains "AccessDBProvider"} | Import-Module 
```

将 where 过滤器中的 Provider 名称替换为您自己的名称。

干杯，弗雷德

# objective-c - Spindump 分析说明？

> ID：10709577
> 
> 赞同：16
> 
> 时间：2012-05-22T20:21:47.407
> 
> 标签：objective-c, xcode, macos

我有一系列针对需要分析的应用程序的 Spindump，但我不确定如何准确分析这些。我见过其他一些开发人员能够在精神上或通过软件快速解析这些问题，然后向我提供有关挂起的位置等的详细信息，我希望了解如何正确分析这些问题。

一个人去哪里正确地分析spindumps？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T22:27:59.653

一般来说：

*   使用崩溃报告，您将获得堆栈跟踪
*   使用 spindump，您可以在一段时间内一起获得多个堆栈跟踪。

在两种情况下，您可能需要检查 spindump：

1.  一个无限循环，可能一遍又一遍地调用同一个函数
2.  僵局。

第一种情况可以从 spindump 中看到，通过多次调用相同的函数。在这种情况下使用的一个好东西是活动监视器——在那里对挂起的进程进行采样，您可以通过几种有用的方式查看它，隐藏不重要的帧等。

第二种情况可以通过不同线程同时等待锁来查看。

这是一个小例子：

```
+ 2663 start  (in MyApp) + 52  [0x100001bb4]
+   2663 main  (in MyApp) + 39  [0x100001be7]  main.m:65
+     2663 NSApplicationMain  (in AppKit) + 869  [0x7fff8ea27cb6]
+       2663 -[NSApplication run]  (in AppKit) + 517  [0x7fff8ea83283]
+         2663 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]  (in AppKit) + 128  [0x7fff8ea8bed2]
+           2663 _DPSNextEvent  (in AppKit) + 685  [0x7fff8ea8c613]
+             2663 BlockUntilNextEventMatchingListInMode  (in HIToolbox) + 62  [0x7fff8dd53cd3]
+               2663 ReceiveNextEventCommon  (in HIToolbox) + 356  [0x7fff8dd53e42]
+                 2663 RunCurrentEventLoopInMode  (in HIToolbox) + 209  [0x7fff8dd540a4]
+                   2663 CFRunLoopRunSpecific  (in CoreFoundation) + 290  [0x7fff95dec6b2]
+                     2557 __CFRunLoopRun  (in CoreFoundation) + 1078  [0x7fff95decee6]
+                     ! 2556 __CFRunLoopServiceMachPort  (in CoreFoundation) + 195  [0x7fff95de7803]
+                     ! : 2556 mach_msg  (in libsystem_kernel.dylib) + 70  [0x7fff93630c42]
+                     ! :   2556 mach_msg_trap  (in libsystem_kernel.dylib) + 10  [0x7fff93631686]
+                     ! 1 __CFRunLoopServiceMachPort  (in CoreFoundation) + 199  [0x7fff95de7807]
+                     97 __CFRunLoopRun  (in CoreFoundation) + 728  [0x7fff95decd88]
+                     ! 97 __CFRunLoopDoObservers  (in CoreFoundation) + 369  [0x7fff95e11921]
+                     !   97 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__  (in CoreFoundation) + 23  [0x7fff95e119b7]
+                     !     97 __83-[NSWindow _postWindowNeedsDisplayOrLayoutOrUpdateConstraintsUnlessPostingDisabled]_block_invoke_01208  (in AppKit) + 46  [0x7fff8f05a971]
+                     !       90 _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints  (in AppKit) + 738  [0x7fff8ea8f2ac]
+                     !       : 89 -[NSView displayIfNeeded]  (in AppKit) + 1830  [0x7fff8ea8fd73] 
```

这告诉我的是，MyApp 已经经历了 main 等，最后进入了一个函数`CFRunLoopRunSpecific`，然后`__CFRunLoopRun`- 从那里（2557）它调用`__CFRunLoopServiceMachPort`，它调用并在（调用系统调用）时`mach_msg`陷入陷阱- 当它回来时`mach_msg_trap`，堆栈跟踪返回到`CFRunLoopRunSpecific`，在哪里`__CFRunLoopRun`被调用，然后调用`__CFRunLoopDoObservers`，等等。

请注意，这不是任何挂起进程的旋转转储 - 您可以通过这种方式对任何正在运行的进程进行采样，并查看在该示例期间调用了哪些函数。然而，无限循环将一遍又一遍地重复调用某个函数——一遍又一遍地存在相同的调用树。当然，这可能意味着一个简单的 for 循环，但如果 for 循环由于某种原因不是无限的，那么您可以在那里检查。不幸的是，这些自旋转储通常很长，具体取决于您调用的函数，因此可能需要一些时间来检查

行首的 + 符号仅表示一行的开始 - 没有 + 符号的行表示新线程的开始。这 ！和 : 符号组成一条线，因此您更容易看到后续呼叫 - 即哪些呼叫处于同一级别。此外，| 也可以使用字符。

这些数字表示应用程序在该特定呼叫中花费了多长时间 - 它们是样本数量。采样工作每隔几毫秒暂停采样的应用程序，并检查每个线程的堆栈帧。如果应用程序仍在同一个函数中，则该函数将获得 +1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:36:06.217

我在 Mac 开发人员资源中搜索“spindump”时发现了这一点。我从未见过，但 ReportCrash(8) 手册页中提到的这个 TechNote 似乎向您展示了如何阅读崩溃日志：

[https://developer.apple.com/library/mac/#technotes/tn2004/tn2123.html](https://developer.apple.com/library/mac/#technotes/tn2004/tn2123.html)

ReportCrash(8) 提到了 Spindump(8)，我很抱歉。 [https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/ReportCrash.8.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/ReportCrash.8.html)

但显然这对你没有帮助。我也会把它留在这里。

希望这能以某种方式帮助某人。

# javascript - Express.js 和表单验证

> ID：10709580
> 
> 赞同：0
> 
> 时间：2012-05-22T20:22:05.470
> 
> 标签：javascript, node.js, express, pug

我正在尝试使用 express.js 脚本创建一个简单的节点，它将对 3 个数字求和。

在索引上我有这个：

索引.jade

```
!!! 5
html
  head
    title Test
  body
    form(name='form1', method='post', action='/')
      label(for='1')
      input#1(type='text', name='1')
      label(for='2')
      input#2(type='text', name='2')
      label(for='3')
      input#3(type='text', name='3')
      input(name='submit', type='button', value='submit')
    #result 
```

而且我现在正在编写服务器端 - app.js 与 req 和 res 对象，但如何返回结果......还有结果 = 1id + 2id + 3id

应用程序.js

```
var express = require('express');
    app = express.createServer();
app.use(express.bodyParser());
app.post('/', function(req, res){
  var i = req.param('1', null);
  var j = req.param('2', null);
  var k = req.param('3', null);
  var r = i+j+k;
  res.send(r);

}); 
```

我如何将结果（r）发送到 index.jade 上的 div id 结果... 那么如何将结果返回给 index.jade

这里也是pastebin代码：[http://pastebin.com/J9MRFCaE](http://pastebin.com/J9MRFCaE) ...我是节点新手，对愚蠢的问题表示抱歉...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:38:44.317

这很简单，只需调用传递数据的“index.jade”渲染（而不是 'res.send(r);'）：

```
res.render('index', { 
  result: r
}); 
```

并在您的玉文件中显示“结果”变量：

```
#result #{result} 
```

[玉码](https://github.com/visionmedia/jade#code)和[快速渲染](http://expressjs.com/guide.html#view-rendering)的附加信息

# c# - 以编程方式添加的自定义列表框的自动换行

> ID：10709581
> 
> 赞同：1
> 
> 时间：2012-05-22T20:22:17.887
> 
> 标签：c#, wpf, listbox

我有一个自定义 ListBoxItem，我正在尝试以编程方式将其添加到 ListBox，并且我希望将项目的内容包装起来。

这是自定义的 ListBoxItem：

```
class PresetListBoxItem : ListBoxItem
{
    public uint[] preset;

    public PresetListBoxItem(uint[] preset = null, string content = "N/A")
        : base()
    {
        this.preset = preset;
        this.Content = content;
    }
} 
```

和 XAML：

```
<ListBox Name="sortingBox" Margin="5,5,0,5" Width="150" MaxWidth="150" ScrollViewer.HorizontalScrollBarVisibility="Disabled" HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Border BorderBrush="Black" BorderThickness="2" CornerRadius="3" Margin="3">
                <TextBlock Text="{Binding Path=Text}" TextWrapping="WrapWithOverflow" />
            </Border>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

以及添加的代码：

```
PresetListBoxItem item = new PresetListBoxItem();
item.preset = new uint[] { };
item.Content = "This is a test of an extended line of text.";
sortingBox.Items.Add(item); 
```

当我运行代码时，该项目被添加到框中，但边框根本不显示并且它不换行。

我已经在 SO 和 Google 上寻找答案，并且我使用了 ListBoxes 和 ListViews，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:35:36.427

`ListBoxItem`只是内容和项目的容器。如果您想使用自己的`ListBoxItem`覆盖容器的模板而不是项目。然后，为了正确绑定，`TextBlock`您必须绑定到`Content`PresetListBoxItem 的属性。

```
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:PresetListBoxItem">
                    <Border BorderBrush="Black" BorderThickness="2" CornerRadius="3" Margin="3">
                        <TextBlock Text="{Binding Path=Content, RelativeSource={RelativeSource AncestorType=local:PresetListBoxItem}}"
                                   TextWrapping="WrapWithOverflow" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle> 
```

但我认为这不是最好的方法。为什么你派生自`ListBoxItem`？如果您不这样做，您的 XAML 将立即正常。

```
item.Text = "This is a test of an extended line of text.";

class PresetListBoxItem
{
    public uint[] preset;
    public string Text { get; set; }

    public PresetListBoxItem(uint[] preset = null, string content = "N/A")
      : base()
    {
        this.preset = preset;
        this.Text = content;
    }
} 
```

# java - 可以转换为整数的字符串的哈希码

> ID：10709584
> 
> 赞同：2
> 
> 时间：2012-05-22T20:22:20.383
> 
> 标签：java, string, int, hashcode

我正在寻找为非常特定的字符串情况创建哈希码的最有效方法。

我有可以转换为整数的字符串，它们从 1 到 10,000 不等，并且非常集中在 1-600 范围内。

我的问题是，就从集合中检索项目以实现其哈希码的性能而言，最有效的方法是什么。

我在想的是：

*   我可以将字符串转换为整数并使用直接访问表（10.000 行的数组）——这对于检索来说非常快，但在内存分配方面不是很聪明；

*   我可以将字符串用作字符串并为其获取哈希码（我不必将其转换为整数，但我不知道字符串的哈希码在冲突方面的效果如何）

非常感谢任何其他想法。

多谢

谢谢大家及时回复...

还有另一个我忘记添加的信息。如果我让你知道我的最终目标，我想它会让你明白这一点——我什至可能不需要哈希表！！！

我只想针对不可变的字典验证流。我想检查给定标签是否出现在我的消息中。

我将收到一个带有几对 tag=value 的字符串。我想验证我的应用程序是否必须处理标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:34:48.673

您可能需要考虑使用 trie (http://en.wikipedia.org/wiki/Trie) 或基数树 (http://en.wikipedia.org/wiki/Radix_tree)。无需将字符串解析为整数，或计算哈希码。当你走绳子时，你正在走一棵树。

编辑：

在字符串上计算哈希码和从字符串中解析整数都涉及遍历整个字符串，然后使用该值作为对特定数据结构的查找。其他技术可能涉及在遍历数据结构的同时检查字符串。这可能对要求“其他想法”的发帖人有价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:02:36.167

许多集合（例如 HashMap）已经应用了一种补充的“rehash”方法来帮助处理糟糕的哈希码算法。例如浏览`HashMap.hash()`. 并且字符串是非常常见的键，因此您可以确定 String.hashCode() 是高度优化的。所以，除非你注意到你的 hashCodes 之间有很多冲突，否则我会使用标准代码。

我尝试将 0..600 的字符串放入 HashSet 以查看发生了什么，但是查看有多少条目发生冲突非常乏味。寻找你自己！如果您真的很在意，请将 HashMap 中的源代码复制到您自己的类中，对其进行编辑，以便您可以访问条目（在我正在查看的 Java 6 源代码中，即`transient Entry[] table`YMMV），然后添加方法计算碰撞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:59:41.100

If there are only a limited valid range of values, why not represent the collection as a `int[10000]` as you suggested? The value at `array[x]` is the number of times that `x` occurs.

If your strings are represented as decimal integers, then parsing them to strings is a 5-iteration loop (up to 5 digits) and a couple of additions and subtractions. That is, it is incredibly fast. Inserting the elements is effectively O(1), retrieval is O(1). Memory required is around 40kb (4 bytes per int).

One problem is that insertion order is not preserved. Maybe you don't care.

Maybe you could think about caching the hashcode and only updating it if your collection has changed since the last time `hashcode()` was called. See [Caching hashes in Java collections?](https://stackoverflow.com/questions/7229375/caching-hashes-in-java-collections)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T21:13:03.710

«插入免责声明，仅当它是您应用程序中的热点并且您可以证明时才这样做»

那么整数值本身将是一个完美的哈希函数，您不会遇到任何冲突。但是这种方法有两个问题：

1.  `HashMap`不允许您指定自定义哈希函数。所以要么你必须实现你自己的`HashMap`，要么你使用一个包装器对象。
2.  `HashMap`使用按位而不是模运算来查找存储桶。这显然会丢掉一些东西，因为它只是一个面具。`java.util.HashMap.hash(int)`试图弥补这一点，但我看到声称这不是很成功。我们再次回到实施您自己的`HashMap`.

现在既然您使用整数值作为哈希函数，为什么不使用整数值作为键`HashMap`而不是字符串呢？如果你真的想优化它，你可以编写一个使用`int`而不是`Integer`键的哈希映射，或者使用来自[trove的](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TIntObjectHashMap.html)[TIntObjectHashMap](http://trove.starlight-systems.com/)。

如果您真的对寻找好的哈希函数感兴趣，我可以推荐[Hashing in Smalltalk](https://rads.stackoverflow.com/amzn/click/com/B00262SJ1M)，请忽略作者对 Java 的咆哮（免责声明：我认识作者）。

# c# - MVC3 下拉列表

> ID：10709588
> 
> 赞同：4
> 
> 时间：2012-05-22T20:22:26.300
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, html.dropdownlistfor

我想制作一个下拉列表，数字为 0-10。所以用户可以评价一些东西。目前，我有一个标签：@Html.LabelFor(model=> model.RATE) 如何修改此代码，我将有一个下拉框？并且下拉框的值将存储在model.RATE？

标签正在工作，但最好有一个下拉菜单。

**解决方案：**

```
@Html.DropDownListFor(model => model.RATE, Enumerable.Range(0,11).Select( x => new SelectListItem { Text = x.ToString() })); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:25:55.890

```
@Html.DropDownListFor(model => model.RATE, new SelectList(Enumerable.Range(0, 11))) 
```

这将对表单和表单进行数据绑定

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T20:26:19.477

只需创建一个`SelectListItem`包含评分的对象列表，然后`Html.DropDownListFor`与存储在模型中的评分一起使用 ( `Model.RATE`)。

```
@{
    var ratings = new List<SelectListItem>();
    for( var i = 0; i <= 10; i++ ) {
        days.Add( new SelectListItem { Text = i.ToString(), Value = i.ToString(), Selected = Model.RATE == i } );
    }
}
@Html.DropDownListFor( x => x.RATE, ratings ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:28:23.383

```
@Html.DropDownListFor(m => m.RATE, Model.RateSelectList, "<- Select Option ->") 
```

Model.RateSelectList 将是 IEnumerable<SelectListItem> 类型，m.RATE 将是您的可空整数（int？）属性。第三个参数是您的默认文本，如果 m.RATE 为空，则显示该文本。

# iphone - 在显示 modalViewController 之前调用 drawRect

> ID：10709591
> 
> 赞同：0
> 
> 时间：2012-05-22T20:22:42.693
> 
> 标签：iphone, ios, modalviewcontroller, drawrect

我遇到在 modalViewController 显示后调用 drawRect 方法。是否可以之前调用drawRect方法，所以不会有任何延迟？

最好的问候塞巴斯蒂安 Søndergaard

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:06:34.047

不，该`drawRect`方法是在绘图时调用的。但是，如果您的绘图代码做得太多，您可以预先计算它并放入 CGLayerRef 例如。然后您的 drawRect 方法可以将图层绘制到上下文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:18:38.400

您可以在后台线程上进行计算（小心），然后将其发送回主线程并在视图上调用 setNeedsDisplay，如果您的主线程不稳定。

# c++ - 在 malloc 地址中初始化一个类对象？

> ID：10709592
> 
> 赞同：2
> 
> 时间：2012-05-22T20:22:54.973
> 
> 标签：c++

说我们有

```
Class A{};
int *p = malloc(100);
A a; //default constructor in use
*p = A; (question???) 
```

如何在分配内存 p 上初始化 A 类型的对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T20:29:36.060

要在特定地址实例化类实例，您需要使用[*placement new*](https://en.wikipedia.org/wiki/Placement_new)。

```
#include <new>
#include <stdlib.h>

class A
{};

int main()
{
  void *p = malloc(100);
  A* a = new(p) A();
  a->~A();  // call destructor explicitly
  free(p);
} 
```

请注意，使用placement new 时必须显式调用析构函数。

# .net - .Net 2.0 应用程序池的 .svc 处理程序映射在 .Net 3.0 安装后工作吗？

> ID：10709599
> 
> 赞同：0
> 
> 时间：2012-05-22T20:23:10.477
> 
> 标签：.net, wcf, iis-7, application-pool, svc

这很奇怪。我有一个在 .Net 2.0 应用程序池（集成模式）下运行的网站，无法连接到该网站上的 WCF 服务。每当我导航到我的盒子上的 URL 时，都会弹出一条消息，上面写着“请求的内容似乎是脚本，并且不会由静态文件处理程序提供服务”。

我在 IIS 中检查了该网站的 .svc 扩展名的处理程序映射，并看到条目读取`svc-Integrated-4.0, svc-ISAPI-2.0- and svc-ISAPI-2.0-64`. 但是 svc-Integrated 没有任何问题，我认为这是问题所在。

我遵循了[这篇文章](http://blogs.microsoft.co.il/blogs/bursteg/archive/2008/12/01/wcf-on-iis7-on-vista-adding-svc-handler.aspx)中的 ServiceModelReg -i 建议，但在我的 Framework\v2.0.5027 子文件夹中没有该可执行文件的实例。所以我升级了一个级别，在我的 Framework\3.0.0 文件夹中找到了它，然后从那里运行它。瞧，现在一切正常，并且在映射部分中有一个新的 svc-Integrated 处理程序。

但我的问题是：如果我为 .Net 3.0 安装了这个，.Net 2.0 应用程序池如何使用它？我以为会有兼容性问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:28:52.457

> 我为 .Net 3.0 安装了这个，.Net 2.0 应用程序池如何使用它？我以为会有兼容性问题？

不，.NET Framework 3.0[仍然使用 2.0 CLR](http://msdn.microsoft.com/en-us/library/bb822049.aspx)，因此使用 2.0 AppPool 是合适的。

IIS AppPools 指示 CLR 版本，而不是 Framework 版本。

# php - 为用户'acctname'@'localhost'获取错误访问被拒绝（使用密码：否）

> ID：10709602
> 
> 赞同：0
> 
> 时间：2012-05-22T20:23:18.357
> 
> 标签：php

几周前我安装了 MAMP，并且一直使用它进行 PHP 开发，没有任何问题。我最近开发了一个脚本，它可以计算每天点击链接的次数，而且它运行良好。现在我需要在网络浏览器中显示信息。

在确保我已连接到数据库后，我编写了以下内容：

```
 $query = "SELECT * FROM banners";
    $result = mysql_query($query);
    if (!$result) die ("Database access failed: " . mysql_error()); 
```

当我转到页面检查是否有错误时，我看到

数据库访问失败：用户 'acctname'@'localhost' 的访问被拒绝（使用密码：否）

发生了什么事，我该如何解决？

谢谢。

编辑：没关系。我想到了。感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:46:42.667

在您的示例中，我没有看到您正在建立与数据库的连接并选择一个数据库来运行查询。在查询之前，您是否正在执行以下操作？

```
mysql_connect($host, $username, $password);
mysql_select_db($database_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:42:33.377

您需要确保用户对“banners”表具有 SELECT 权限。您可以单击 phpMySQLAdmin 网站中的权限。

# javascript - 用于更改文件的客户端脚本

> ID：10709604
> 
> 赞同：0
> 
> 时间：2012-05-22T20:23:23.787
> 
> 标签：javascript, html, google-chrome, client-side

是否有任何客户端脚本能够更改主机计算机上的文件？（意图如下）

我正在为 chrome 创建一个打包的应用程序，它可以显示一些在线数据，即使离线也可以使用。有某件事，例如我想显示/存储的“网页”（但由于它位于不同的来源，我无法获取/读取其内容）。要显示在线时，我可以使用 iframe，但无法将其保留以供离线使用。

所以我想我可以制作一个appcache（应用程序包中的清单）来缓存文件，并在按下更新按钮时运行一个脚本，这将对清单进行一些更改，从而强制重新加载缓存的资源。

我搜索了很多，但没有结果。

关于如何完成的任何建议。或者任何其他方式让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:26:48.590

我不这么认为。如果存在，这可能是一个巨大的安全问题。

如果必须，您可以向服务器发送一个 ajax 请求，以创建它使用当前价格创建的文件，并将其添加到 appcache 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:55:13.393

这是另一个 SO questob 的链接，其中包含可用于获取股票价格的 API 列表。

[获取股票报价的 Web 服务？](https://stackoverflow.com/questions/773461/webservice-to-get-stock-quotes)

# php - 如何将 PHP 脚本放在根目录之外并使用 HTML 链接到它？

> ID：10709607
> 
> 赞同：0
> 
> 时间：2012-05-22T20:23:31.257
> 
> 标签：php, apache, wamp

我正在使用 wamp，我有两个目录；/www 和 /scripts。在 /www 我有 index.html，在 /scripts 我有 test.php。我对标准 PHP 目录约定不太熟悉，但这是我希望在 index.html 文件中包含的内容

```
...html statements...
<run the following php script: /scripts/test.php>
...html statements 
```

而不是在 index.html 文件中包含 php 脚本本身。

我研究了 Apache 中的 ScriptAlias 指令（http://httpd.apache.org/docs/2.0/mod/mod_alias.html#scriptalias），但我不太明白如何将其应用于这种情况。关于如何进行的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:25:19.553

您不能使用 HTML 访问文档根目录之外的文件（幸运的是）。

想想当有人可以访问文档根目录之外的东西时会发生什么，例如：`/etc/passwd`或其他什么。

但是，如果您使用 php，您可以访问文档根目录之外的文件，例如使用:[`require`](http://php.net/manual/en/function.require.php)或[`include`](http://php.net/manual/en/function.include.php). 这是在 PHP 中做某事时恕我直言的最佳实践。在您的文档根目录中，您将只有一个[引导文件](http://en.wikipedia.org/wiki/Bootstrapping)，它可以访问文档根目录之外的文件。

这是因为 PHP 是服务器端，而 HTML 是客户端。

**更新**

如果要访问当前目录上方的文件 1 目录，则可以使用相对路径：

```
`require_once '../thefile.php';` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:26:38.813

您不能从 HTML 中链接到文档根目录之外的 PHP，但您可以从 PHP 中的文档根目录之外包含 PHP。即，将 index.html 替换为 index.php，如下所示：

```
...html statements...
require_once '/path/to/scripts/test.php';
...html statements... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:27:24.140

不能用 HTML 来完成，但是如果你有一个 index.php 文件而不是一个 index.html 文件，你就可以做到。我想如果你必须将它保存为 html 文件，你可以设置 apache 来将 html 编译为 php。

# python - python的opencv 2.4中缺少冲浪

> ID：10709610
> 
> 赞同：8
> 
> 时间：2012-05-22T20:23:42.743
> 
> 标签：python, opencv, surf

我正在尝试使用 OpenCV 在 python 中实例化一个 SURF 对象，如此处所述[，](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html#surf)但发生了这种情况：

```
>>> import cv2
>>> cv2.__version__
'2.4.0'
>>> cv2.SURF()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'SURF' 
```

有谁知道为什么会发生这种情况，或者 OpenCV 的 Python 版本中是否缺少 SURF？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T21:26:43.667

这是一个回归，应该在下一次库更新中修复。

但 SURF 并不是真的缺席。您仍然可以通过通用包装器访问它：

```
surf_detector = cv2.FeatureDetector_create("SURF")
surf_descriptor = cv2.DescriptorExtractor_create("SURF") 
```

* * *

**更新：** `cv2.SURF()`在 OpenCV 2.4.1 中恢复

# ember.js - 如何从 emberjs 的视图中操作列表项

> ID：10709614
> 
> 赞同：1
> 
> 时间：2012-05-22T20:24:12.287
> 
> 标签：ember.js

我有一个带有视图和控制器的 Ember 应用程序：

[http://jsfiddle.net/gavriguy/EDr4G/](http://jsfiddle.net/gavriguy/EDr4G/)

我想将用户单击的当前项目标记为已读 - 通过更改它的相关模型。我目前可以通过计算视图的项目索引来做到这一点 - 但问题是我不能确定视图上的索引与其控制器上的索引相同。有什么想法吗？

**JavaScript**：

```
App.tempController = Em.ArrayController.create({
    content: [
        {
        title: 'A',
        unread: true},
    {
        title: 'B',
        unread: true},
    {
        title: 'C',
        unread: false}
    ]
});

App.someItemsView = Ember.CollectionView.create({
    contentBinding: 'App.tempController.content',
    itemViewClass: Ember.View.extend({
        template: Ember.Handlebars.compile('<div>{{content.title}} unread: {{content.unread}}</div>'),
        click: function(event) {
            //How to mark current clicked item as read?
            console.log(this.content);
            console.log(event);
            this.set('content.unread', false);
        }
    })
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:41:04.057

在您的`click`处理程序中，您可以获取对通过 呈现视图的数组项的引用`this.get('content')`。因此，您可以通过设置标志`this.setPath('content.unread', false)`，请参阅[http://jsfiddle.net/pangratz666/t6Nst/](http://jsfiddle.net/pangratz666/t6Nst/)：

```
itemViewClass: Ember.View.extend({
    template: Ember.Handlebars.compile('<div>{{content.title}} unread: {{content.unread}}</div>'),
    click: function(event) {
        // this.content is the item in the array on which this click event occures.
        this.setPath('content.unread', false);
    }
}) 
```

# css - iOS 上带有 Phonegap 的多个 WebView

> ID：10709615
> 
> 赞同：1
> 
> 时间：2012-05-22T20:24:20.087
> 
> 标签：css, ios, html, cordova, uiwebview

是否可以在仅限 iOS 的 Phonegap 应用程序中创建多个（重叠）WebView，如下图所示：

[http://cl.ly/GnvU](http://cl.ly/GnvU)

我想这样做是为了在应用程序中有一个滚动内容区域，我发现像 iScroll 和 jScrollPane 这样的方法对于这种类型的使用来说太hacky了。有没有其他方法可以实现原生滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:26:56.633

查看 Randy McMillan 使用 Cordova Cleaver 所做的事情 - [https://github.com/RandyMcMillan/ModalCleaverView2](https://github.com/RandyMcMillan/ModalCleaverView2)

这不准确......但非常接近你正在寻找的东西 - 你当然需要调整一些东西，但这应该为你指明正确的方向！

# mysql - 如何在mySQL的select语句中将数字转换为字符串

> ID：10709619
> 
> 赞同：0
> 
> 时间：2012-05-22T20:24:32.597
> 
> 标签：mysql

当您在 MySQL 中发出 SELECT 语句时，是否可以将数字和日期转换为字符串？像这样的东西：

```
SELECT str(a.Amount) as AMT, str(a.date) as Date FROM LALAZUK as a... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:26:50.543

你需要的是`CAST`：

`SELECT CAST(a.Amount AS CHAR CHARACTER SET utf8) as AMT, SELECT CAST(a.date AS CHAR CHARACTER SET utf8) as Date FROM LALAZUK as a...`

[http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html](http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html)

# postgresql - 动态查询 postgres

> ID：10709624
> 
> 赞同：3
> 
> 时间：2012-05-22T20:25:00.007
> 
> 标签：postgresql, dynamic

我是 postgres 的新手并运行以下动态查询

```
EXECUTE 'Select * from products'; 
```

我得到以下回应。

```
ERROR: syntax error at or near "'Select * from products'" 
LINE 1: EXECUTE 'Select * from products'; 
```

我知道这将是我想念的基本内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:35:10.320

有**plpgsql**`EXECUTE`的语句，它会做你想做的事——执行一个 SQL 查询字符串。您标记了[dynamic](/questions/tagged/dynamic "show questions tagged 'dynamic'")，所以这可能是您正在寻找的。

 **仅适用于 plpgsql 函数或[`DO`](http://www.postgresql.org/docs/current/interactive/sql-do.html)语句（匿名代码块）。[和](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)[之间的区别在精品手册中明确`EXECUTE``SQL-EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)：

> **注意：** PL/pgSQL语句与PostgreSQL 服务器支持`EXECUTE`的 SQL 语句无关。`EXECUTE`服务器的`EXECUTE` 语句不能直接在 PL/pgSQL 函数中使用（也不需要）。

如果您想从动态`SELECT`查询中返回值，如您的示例所示，您需要创建一个函数。`DO`语句总是返回`void`。[更多关于从非常好的手册中的函数返回值的信息。](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:49:34.463

来自[精美手册](http://www.postgresql.org/docs/current/interactive/sql-execute.html)：

> **概要**
> 
> ```
> EXECUTE name [ ( parameter [, ...] ) ] 
> ```
> 
> **描述**
> 
> `EXECUTE`用于执行先前准备好的语句。

因此`EXECUTE`不执行 SQL 字符串，它执行由名称标识的准备好的语句，您需要使用[PREPARE](http://www.postgresql.org/docs/current/interactive/sql-prepare.html)单独准备语句：

```
=> prepare stmt as select * from products;
=> execute stmt;
-- "select * from products" output goes here... 
```**

# mysql - mysql - 刷新缓存等后查询运行缓慢

> ID：10709633
> 
> 赞同：0
> 
> 时间：2012-05-22T20:25:34.393
> 
> 标签：mysql

我的同事刚刚刷新了日志、权限、主机、状态、表等。现在一些查询运行得很慢，大约慢了 10 倍。

一个简单的选择就可以了，但是当我需要加入并使用 100k+ 行时，事情就变得丑陋了。

有什么办法可以解决这个问题？

# c++ - 使用我自己的 plus() 函数时出现奇怪的 g++ 编译器错误（“std::plus 不是函数”）

> ID：10709634
> 
> 赞同：4
> 
> 时间：2012-05-22T20:25:48.920
> 
> 标签：c++, compiler-errors, g++

我从 g++ 收到一个奇怪的编译器错误。

它`std::plus is not a function`为以下代码显示“”，即使我没有包括`<functional>`并且我没有使用`std`发生错误的位置。

这是代码：

```
#include <iostream>

template<class T1, class T2, class T3>
struct MyStruct {
  T1 t1; T2 t2; T3 t3;
  MyStruct() {}
  MyStruct(T1 const& t1_, T2 const& t2_, T3 const& t3_)
    : t1(t1_), t2(t2_), t3(t3_) {}
};

template<class T1, class T2, class T3>
MyStruct<T1, T2, T3> plus(MyStruct<T1, T2, T3> const& x,
              MyStruct<T1, T2, T3> const& y) {
  // ...
}

int main() {
  typedef MyStruct<int, double, std::string> Struct;
  Struct x(2, 5.6, "bar");
  Struct y(6, 4.1, "foo");
  Struct result = plus(x, y);
} 
```

这是完整的错误（稍微重新格式化）：

```
/usr/include/c++/4.2.1/bits/stl_function.h: In function 'int main()':
/usr/include/c++/4.2.1/bits/stl_function.h:134:
    error: 'template<class _Tp> struct std::plus' is not a function,
plus3.cc:13: error:
   conflict with 'template<class T1, class T2, class T3> 
     MyStruct<T1, T2, T3> plus(const MyStruct<T1, T2, T3>&, 
       const MyStruct<T1, T2, T3>&)'
plus3.cc:21: error:   in call to 'plus' 
```

有谁知道这是为什么以及如何避免错误？我真的很想调用这个函数`plus`。

`plus`当我的函数没有 3 个模板参数时，该错误不会发生，这在查看以下定义后是有道理的`std::plus`：

```
 template <class _Tp>
    struct plus : public binary_function<_Tp, _Tp, _Tp> 
```

但这仍然很奇怪，因为`std::plus`那时甚至不应该知道。

**更新：**

作为对一些答案的回应，我将粘贴稍作修改的代码，这也会给出错误。我的`plus`函数在`namespace foo`这里，它是从同一个命名空间调用的，所以应该没有必要使用它来限定它`foo::`：

```
#include <string>

namespace foo {

template<class T1, class T2, class T3>
struct MyStruct {
  T1 t1; T2 t2; T3 t3;
  MyStruct() {}
  MyStruct(T1 const& t1_, T2 const& t2_, T3 const& t3_)
      : t1(t1_), t2(t2_), t3(t3_) {}
};

template<class T1, class T2, class T3>
MyStruct<T1, T2, T3> plus(MyStruct<T1, T2, T3> const& x,
                          MyStruct<T1, T2, T3> const& y) {
  // ...                                                                                                                        
}

template<class T1, class T2, class T3>
MyStruct<T1, T2, T3> bar(MyStruct<T1, T2, T3> const& x,
                         MyStruct<T1, T2, T3> const& y) {
  return plus(x, y);
}

} // end foo                                                                                                                    

int main() {
  typedef foo::MyStruct<int, double, std::string> Struct;
  Struct x(2, 5.6, "bar");
  Struct y(6, 4.1, "foo");
  Struct result = foo::bar(x, y);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:43:56.883

这是因为 std::plus 不是函数。

您的函数 plus 位于全局命名空间中，因此您需要这样做

```
Struct result = ::plus(x, y); 
```

它尝试使用 std::plus 的原因是因为您没有明确说明您想要的 plus 版本，因此编译器使用[Koenig 查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)，该查找通过其参数找到 plus。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:37:55.947

尝试为您明确指定命名空间 plus()

```
Struct result = ::plus(x, y); 
```

这对 gcc 有帮助，并且不会让您将 plus() 放入不同的名称空间。

Loki Astari 告诉其他人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:40:46.227

如果将函数放在不同的命名空间中，则不会出现此错误。这就是命名空间的用途——您可以在不同的命名空间中拥有相同的符号/签名而不会导致冲突。

# android - 在 Fragment 之间共享 TouchEvent

> ID：10709636
> 
> 赞同：3
> 
> 时间：2012-05-22T20:25:55.093
> 
> 标签：android, fragment, touch-event

我有 2 个片段，共享屏幕。在两者中，都有一个正在监听 TouchEvents 的布局。
当我在第一个片段上启动 TouchEvent，然后将手指移到第二个片段上时，第一个片段仍会收到 TouchEvent，而第二个片段则不会。
我尝试了不同的选择但没有成功。处理来自活动的TouchEvent，然后将其分派到两个片段，这可能是一个解决方案吗？
欢迎任何线索=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:26:28.773

行 ！这是（非常基本上）我是如何管理的：
MyActivity.java ：

```
private ArrayList<MyOnTouchListener> onTouchListeners = new  ArrayList<MusicShaker.MyOnTouchListener>(10);
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    for (MyOnTouchListener listener : onTouchListeners) {
        listener.onTouch(ev);
    }
    return super.dispatchTouchEvent(ev);
}
public void registerMyOnTouchListener(MyOnTouchListener listener){
    onTouchListeners.add(listener);
}
public interface MyOnTouchListener {
    public void onTouch(MotionEvent ev);
} 
```

片段1.java：

```
((MyActivity)getActivity()).registerMyOnTouchListener(new MyActivity.MyOnTouchListener() {

        @Override
        public void onTouch(MotionEvent ev) {
            Log.d("", "Fragment1 got it");
        }
    }); 
```

片段2.java：

```
((MyActivity)getActivity()).registerMyOnTouchListener(new MyActivity.MyOnTouchListener() {

        @Override
        public void onTouch(MotionEvent ev) {
            Log.d("", "Fragment2 got it");
        }
    }); 
```

它有效，但如果有人有更好的解决方案，我一直在听 =)

编辑：小心使用这个解决方案，因为 MotionEvent x 和 y 将与 rawX 和 rawY 相同（不再转换为 View 的坐标）

# authentication - 未找到 sinatra 身份验证路由

> ID：10709639
> 
> 赞同：4
> 
> 时间：2012-05-22T20:26:00.850
> 
> 标签：authentication, routes, sinatra

我正在尝试将 sinatra-authentication gem 添加到 Sinatra 应用程序中，虽然它在那里并做部分事情，但由于某种原因，似乎没有添加路由。代码基础：

```
require 'sinatra'
require 'digest/sha1'
require 'rack-flash'
require 'mongo_mapper'
require 'sinatra-authentication'

MongoMapper.connection = Mongo::Connection.new('127.0.0.1', 27017, :pool_size => 5, :pool_timeout => 5)
MongoMapper.database = 'cms'

module CmsMod
  class CmsApp < Sinatra::Base
    use Rack::Session::Cookie, :secret => 'something secret'
    use Rack::Flash

    get '/' do
      #redirect to('/list') # commented out for testing
    end

    get '/private' do
      login_required
      'Protected Page'
    end 
```

然后剩下的事情。症状是将浏览器指向我的正常路线工作正常。转到“/private”会正确重定向到“/login”，但我收到旧的“Sinatra 不知道这个小曲”消息；如果我尝试直接访问 '/login' 也是一样。我尝试使用 'binding.pry' 来检查 get 块内的内容，并且据我所知路由不存在。任何关于可能导致这种情况的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:28:42.650

似乎它也需要'haml' gem，所以如果你不使用 haml（就像我使用 slim），你应该在你的项目中包含 haml 让它工作，真是痛苦！

还要记住在你的视图中设置布局，因为默认情况下它会寻找views/layout.haml

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T02:03:59.283

查看[库的源代码](https://github.com/maxjustus/sinatra-authentication/blob/master/lib/sinatra-authentication.rb)后，它被编写为扩展，但示例和文档没有提及扩展是如何注册的。尝试这个：

```
module CmsMod
  class CmsApp < Sinatra::Base
    register Sinatra::SinatraAuthentication  # <= this is the missing magic line. 
```

然后应该出现路线。顺便说一句，我还建议使用[encrypted_cookie](https://rubygems.org/gems/encrypted_cookie) gem。

```
use Rack::Session::Cookie, :secret => 'something secret' 
```

变成：

```
use Rack::Session::EncryptedCookie, :secret => 'something secret' 
```

# google-maps-api-3 - 修改谷歌地图海拔返回数据

> ID：10709640
> 
> 赞同：1
> 
> 时间：2012-05-22T20:26:02.817
> 
> 标签：google-maps-api-3

我想知道是否有一种首选方法可以稍微修改来自谷歌地图 v3 海拔 api 的海拔数据的返回结果。给定两个点，每个点都有一个 lat/lng，我想在每个点上增加 20 米。如果下面的响应是一个点的高程，

```
{
  "status": "OK",
  "results": [ {
    "location": {
      "lat": 45.371093,
      "lng": -114.381159
    },
    "elevation": 2255.52
  } ]
} 
```

我正在考虑只修改上面的返回结果 - 高程关键数据。我似乎找不到或想到任何其他方式。它似乎有效，但感觉就像一个黑客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:35:37.743

弄乱您从 Google 收集的数据感到有点不确定是可以理解的，但我认为您在这种情况下没问题。每当我有同样的担忧时，我都会通过确保两件事来检查自己：

1.  您必须牢牢地遵守 TOS 限制（您说您有）
2.  您必须尝试确保您：[不要修改不属于您的对象](http://www.nczonline.net/blog/2010/03/02/maintainable-javascript-dont-modify-objects-you-down-own/)。

在您的场景中，您有一组从 Google 检索到的 JSON 数据，只要您不修改数据然后将其传递给用户（或者如果您这样做，请明确说明它已被修改)，您可以自由地使用结果数据来满足要求或**在 Google Map 的上下文中**实施用例。

在您的场景中，来自 的响应`ElevationService`只是成为您用于进行某些计算的应用程序状态数据。这是一个完全独立的数据集，如果需要，您可以随时再次检索数据。它不*属于*Google，就像 JavaScript 库、地图瓦片叠加层，甚至图像文件都明显属于 Google。许多应用程序调用 Geocoder 或调用 Places API，然后将数据调整为：更改地图的边界、设置地图的中心、将即时生成的自定义叠加层添加到地图- 全部基于以某种方式调整的结果数据。

当然，您不能更改值然后将它们显示在 an`InfoWindow`或将它们用作标记标签；在这些情况下，您正在向用户提供数据。只要您保持 TOS 的良好一面并且不与您不拥有的东西胡闹，感觉就像您没事一样。

# c++ - 机器人模拟：没有 QGraphicsView 的 QGraphicsScene

> ID：10709641
> 
> 赞同：0
> 
> 时间：2012-05-22T20:26:02.983
> 
> 标签：c++, qt, artificial-intelligence, 2d, simulation

我想模拟机器人在未知的 2D 环境中寻找食物。这个想法是让它们通过遗传算法进化。机器人有一些可以向前看的捕捉器和可以移动的电机。2D 环境的表面上有一些食物来源。

我计划使用 Qt 进行图形模拟，使用类`QGraphicsScene`和`QGraphicsView`.

我的问题是：由于我要运行数百次模拟（遗传算法），我只想显示最后一次迭代并隐藏所有以前的迭代。是否可以只使用`QGraphicsScene`for that，而不使用`QGraphicsView`除了最后一次迭代？最重要的是，它是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:28:40.303

QGraphicsView 一次只能显示一个场景，使用`QGraphicsView::setScene()`. 拥有许多 QGraphicsScene 是非常好的，但只显示其中一个；在你的情况下，最后一次迭代。

我会说这是一种有效的方法，除非你有很多场景，每个场景都有很多 QGraphicsItems（例如，数千个），在这种情况下内存可能会成为问题。

# web-services - Java WebService 为字符 < > 返回 < 和 >

> ID：10709642
> 
> 赞同：0
> 
> 时间：2012-05-22T20:26:09.343
> 
> 标签：web-services, soap, wsdl

我编写了一个肥皂/网络服务，它返回一个字符串，例如：

```
"<GeocodeResponse><City>Denver</City><State>CO</State></GeocodeResponse>" 
```

我为这些数据定义了一个模式：

```
<xs:element name="GeocodeResponse">
<xs:complexType>
    <xs:sequence>
        <xs:element name="City"/>
        <xs:element name="State"/>
    </xs:sequence>
</xs:complexType>
</xs:element> 
```

这作为我的 Web 服务方法的响应返回

```
<xs:complexType name="standardizeResponse">
  <xs:sequence>
     <GeocodeResponse/>
  </xs:sequence>
</xs:complexType> 
```

在肥皂信封中，Xml 被转义，所以我没有得到我想要的 xml，而是得到类似的东西： ``&lt;`GeocodeResponse`&gt;&lt;`City`&gt;`Denver`&lt;`/City`&gt;&lt;`State`&gt;`CO`&lt;`/State`&gt;&lt;`/GeocodeResponse`&gt;``

我认为通过使用模式来定义字符串中返回的内容，可以避免字符串被转义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:03:01.623

当您向 XML 处理器提供原始字符串时，理解是字符串的含义将被传达给接收器，以便可以重建实际的字符串。这意味着处理器将转义任何保留的 XML 字符 (< > & % ')，以便它们不会被误解为文档的一部分而不是文档中的消息。

如果您使用 xjc 生成对象以反映模式（或者更好的是，使用 wsimport 从 WSDL 生成对象和服务存根），您可以使用数据填充生成的对象，然后使用 Marshaller 构造响应消息，该消息将然后呈现为正确标记的 XML。Marshaller 文档实际上提供了很好的使用示例来编组为各种形式 ( [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.html) )。

我正在做出假设以弥补上下文的不足，因此如果此答案似乎不适用，请直接回复并包含实际的服务端点代码，我（或其他响应者）可以重新访问。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T09:33:38.583

你可以试试这个，它为我解决了问题

```
org.apache.axiom.om.OMElement tmpElement=org.apache.axiom.om.util.AXIOMUtil.stringToOM(Element.getText()); 
```

When you add tmpElement to you SOAP envelope you will receive proper representation of "<" and "&" (instead of "<" and "&")

# android - 在构建 android 时，由于无法访问 site_perl，我的 linux 机器无法构建

> ID：10709643
> 
> 赞同：1
> 
> 时间：2012-05-22T20:26:14.490
> 
> 标签：android, ubuntu, build

当我构建 android 映像时，我的 linux 机器无法构建。错误如下：

无法访问 /tools/oss/packages/x86_64-2.6/subversion/default/perl5/lib/site_perl./5.8.8/*multi

有没有人遇到过这个问题？

请告诉我。

# php - Codeigniter Ajax 上传图片

> ID：10709647
> 
> 赞同：0
> 
> 时间：2012-05-22T20:26:23.627
> 
> 标签：php, jquery, ajax, codeigniter, file-upload

我目前正在使用 CodeIgniter 为我的学校项目开发一些表格。

这个想法是我有一个带有图像上传的表单。我正在尝试使用 Ajax 动态地执行此操作，但它似乎根本不起作用。我用 php 尝试了非动态版本，它运行良好，我的图像在我的文件夹中，我没有问题。

我试了五六个插件都没有结果，这肯定是我的错，但我不知道我哪里做错了。

<---控制器--->

```
if($result = $this->images_model->add_bdd())
{   
    $data['uploaded'] = $result;
    $data['message_upload'] = 'Image uploader avec succès.';                            
    $this->template->set_title('Upload successful');
    $this->template->view('add_places',$data);
}
else
{   
    $this->template->set_title('Upload failed');
    $this->template->view('add_places');
} 
```

<--型号-->

```
function add_bdd()
{
    $config = array(
                'allowed_types' => 'jpg|jpeg|tiff',
                'upload_path' => $this->gallery_path,
                'max_size' => 2000,
                'remove_spaces' => TRUE,
                'overwrite' => FALSE
            );

    $this->load->library('upload',$config);
    if ($this->upload->do_upload())
    {

        $data_img = $this->upload->data();
        $exif = $this->exif_extractor->coords($data_img['full_path']);
        $data = array(
                'titre' => 'titlecontent',
                'url' => base_url('images/'.$data_img['file_name']),
                'url_min' => base_url('images/'.$data_img['raw_name'].'_min'.$data_img['file_ext']),
                'alt' => 'cover_contentName',
                'id_users' => $this->session->userdata('id'),
                'date_upload' => date('Y-m-d H:m'),
                'date_modified' => date('Y-m-d H:m'),
                'lat' => $exif[0],
                'long' => $exif[1],
                );
        $this->db->insert('pictures',$data);
        return $exif;
    }
    else
    {
        return false;
    }
} 
```

<--查看-->

```
<form action="http://localhost:8888/project/images/add" method="post" accept-charset="utf-8" enctype="multipart/form-data">
<input type="file" name="userfile" value="Image de couverture"  />
<button name="upload" type="button" id="upload">Upload</button>
<input type="submit" name="submit" value="Publish Place"  />
</form> 
```

谁能给我一个 jQuery 插件来动态上传图像并将我的图像连同我想要返回的路径和其他数据发送回脚本？

我不能像为 jQuery 制作的所有代码一样粘贴，但我真的需要帮助。我已经2天了！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:37:39.213

add_bdd() 函数是否返回 false？

我已经使用 CodeIgnitor 来做这件事，我发现您指定的过滤器通常是您没有上传文件的原因。您应该在`if ($this->upload->do_upload())`为 false 的部分添加更多代码，并使用以下命令打印出调试代码：

```
echo $this->upload->display_errors(); 
```

有关更多信息，请参见此处：http: [//codeigniter.com/user_guide/libraries/file_uploading.html](http://codeigniter.com/user_guide/libraries/file_uploading.html)

请记住，如果您通过 AJAX 调用它，您将需要一种查看调试结果的方法，例如将 echo'ed 调试结果打印到调用页面上的 HTML 元素。您还可以使用 Firebug 之类的工具打印信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:20:49.097

如果没有 Javascript 代码，几乎没有人可以为您做任何事情。

查看[Nettuts+ 上的本教程，](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/)深入了解您所追求的基本思想，以便您更好地理解、调试和调整您的代码。

此外，我几乎不使用 jQuery 插件，因为我发现编写一个更适合我当前项目需求的代码更容易，所以我不能推荐任何插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:50:42.123

感谢您的帮助，我现在更改了脚本的动态，它与我必须做的事情完美配合。

我的上传系统有脚本：

<-- 查看 (upload_img)-->

```
<div id="container">
<div id="filelist"></div>
<a href="http://localhost:8888/myproject/#" id="userfile" name="userfile">[Select files]      </a>    
<a href="http://localhost:8888/myproject/images/index#" id="uploadfiles">[Upload files]</a
</div> 
```

<-- 控制器 -->

```
function index(){
    if($this->_access())
    {
        $this->template->add_include('js/jquery.js')
                       ->add_include('js/browserplus.js')
                       ->add_include('js/plugins/plupload/plupload.full.js')
                       ->add_include('js/imgfunc.js');
        $this->template->view('upload_img');
    }
    else
    {
        redirect(site_url());
    }
}

function upload_image_spot()
{
    if($query = $this->images_model->upload_image_spot())
    {
        echo json_encode($query);
    }
    else
    {
        echo $this->upload->display_errors('', '');
    }
} 
```

<-- 型号-->

```
 function upload_image_spot()
{
    $config['upload_path'] = realpath(APPPATH. '../images/spots');
    $config['allowed_types'] = 'jpg|jpeg|tiff|png';
    $config['max_size'] = 3062;
    $config['encrypt_name'] = TRUE;
    $this->load->library('upload', $config);
    if($this->upload->do_upload('file')) 
    // file means the file send to the website for upload, this is the name of field for Plupload script
    {
    $data_img = $this->upload->data();
    $copies = array(
            array('dir' => 'images/spots/large/', 'x' => 1000, 'y' => 600),
            array('dir' => 'images/spots/thumb/', 'x' => 100, 'y' => 60)
    );

    $this->copies($data_img,$copies);

    return 'whatever'; // Not real data, I don't wanna post them here
    }
} 
```

<-- JS脚本-->

首先包括：

-jQuery

-browserPlus

- 上传

（[上传脚本](http://www.plupload.com/example_custom.php)）

现在将此脚本添加到一个空文件中：

```
var uploader = new plupload.Uploader({
    runtimes : 'gears,html5,flash,silverlight,browserplus',
    browse_button : 'userfile',
    container : 'container',
    max_file_size : '3mb',
    url : 'yourUploadFunctionCI',
    flash_swf_url : 'plugins/plupload/js/plupload.flash.swf',
    silverlight_xap_url : 'plugins/plupload/js/plupload.silverlight.xap',
    filters : [
        {title : "Image files", extensions : "jpg,jpeg,JPG,JPEG,tiff,png"},
    ]
});

uploader.bind('Init', function(up, params) {
});

$('#uploadfiles').click(function(e) {
    uploader.start();
    e.preventDefault();
});

uploader.init();

uploader.bind('FilesAdded', function(up, files) {
    $.each(files, function(i, file) {
        $('#filelist').html("");
        $('#filelist').append(
            '<div id="' + file.id + '">' +
            file.name + ' (' + plupload.formatSize(file.size) + ') <b></b>' +
        '</div>');
    });

    up.refresh();
});

uploader.bind('UploadProgress', function(up, file) {
    $('#' + file.id + " b").html(file.percent + "%");
});

uploader.bind('Error', function(up, err, msg,file) {
    $('#filelist').append("<div>Error: " + err.code +
        ", Message: " + err.message +
        (err.file ? ", File: " + err.file.name : "") +
        "</div>"
    );
    console.log(msg,up,err);
    up.refresh();
});

uploader.bind('FileUploaded', function(up, file,response) {
    $('#' + file.id + " b").html("100%");
    var data = jQuery.parseJSON(msg.response);
    console.log(data);
}); 
```

做你自己的定制，就是这样，不需要额外的脚本，就像你在网站上看到的那样，将所有脚本从 php 文件复制/粘贴到控制器，只需在 do_upload 中添加“文件”，一切都会正常工作！

祝大家有个愉快的一天，希望对您有所帮助。

西蒙

# c++ - 将 MFC 支持添加到 Qt 项目

> ID：10709648
> 
> 赞同：11
> 
> 时间：2012-05-22T20:26:38.510
> 
> 标签：c++, qt, mfc, atl, algorithmic-trading

我有一个 Qt 项目，想使用一个包含“afxstr.h”的外部库。问题是，每当我在链接到 lib 并包含它们的头文件后进行编译时，都会出现错误：

```
#error afxstr.h can only be used in MFC projects.  Use atlstr.h 
```

当然，我的项目不是 MFC 项目，我不能使用 atlstr.h 代替，因为它不是我的库。

我正在寻找一个快速的解决方案！

我正在使用VS2010。

有问题的库是[Interactive Brokers API](http://www.interactivebrokers.com/php/apiUsersGuide/apiguide.htm)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:50:03.340

相应的设置是配置属性/常规、MFC 的使用。

在 DLL 中使用 MFC 时，其中隐含的编译器选项是 /D "_AFXDLL"。至于链接器选项，奇怪的是，Windows 导入库（例如 kernel32.lib）的显式链接被删除了。

Visual Studio 似乎会自动找到相应的库。但是，“使用 MFC”选项与项目文件一起存储，所以我不能说它将如何转换为自定义构建脚本。

第一个包含必须是

```
#include <afx.h> 
```

并且您不能在此之前包含 windows.h。通常，如果您使用预编译的头文件，这是 stdafx.h 中的第一个包含。除此之外，可以根据需要自由包含其他 MFC 标头。

我怀疑这就是故事的结局，让 MFC 玩任何东西都是痛苦的，有时放弃更容易:) 快速谷歌显示有解决方案，但它们涉及额外的代码并且相当陈旧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:02:13.190

好吧，你已经知道了，只是说得更清楚：

.pro 文件添加：DEFINES += IB_USE_STD_STRING

避免使用 MFC CString

# playframework-2.0 - Global 类中的访问会话

> ID：10709650
> 
> 赞同：1
> 
> 时间：2012-05-22T20:26:40.507
> 
> 标签：playframework-2.0

我非常需要我的用户对象，所以我想我会将它存储在缓存中。由于我不知道它何时从缓存中销毁，我想将其作为`interceptor`. 所以我定义了以下代码：

```
@Override
public Action<?> onRequest(Request request, Method actionMethod) {
    // find the user based on the userId that is stored in the session
    // scope.
    String userId = session.get("user"); // does not work
    User loggedInUser = (User) Cache.get(userId);
    if (loggedInUser == null) {
        loggedInUser = User.getUerById(userSyscode);
    }
    return super.onRequest(request, actionMethod);
} 
```

我认为我可以使用：

```
session.get("user"); 
```

但在我看来，就像`session`无法从 访问一样`Global class`，我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T02:16:14.983

我有一个类似的问题，并用“动作组合”解决了它。 [http://www.playframework.org/documentation/2.0.1/JavaActionsComposition](http://www.playframework.org/documentation/2.0.1/JavaActionsComposition)

或者，这是`onRequest`您要覆盖的代码，所以我认为您可以做同样的事情，只需将代码放入`call`方法中即可。

```
public Action onRequest(Request request, Method actionMethod) {
  return new Action.Simple() {
    public Result call(Context ctx) throws Throwable {

      /* your code here */

      return delegate.call(ctx);
    }
  };
} 
```

我不知道是否`session`可以直接使用，但此时您可以从`ctx`变量中获取它。我想它会是这样的`ctx.session().get("user")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T21:15:49.333

在 scala 中工作此代码：

```
override def onRouteRequest(request: RequestHeader): Option[Handler] = {
    if(!request.session.get("email").isEmpty){
        //I have session with email
        request.session.apply("email") //this is for getting session
    }
} 
```

request.session.get 返回选项[字符串]

request.session.apply 返回字符串

[播放框架 2 scala Play.api.mvc.Session](http://www.playframework.org/documentation/api/2.0.4/scala/index.html#play.api.mvc.Session)

# .net - 排序后如何重新分配 ObjectDataSource 的 DataSource？

> ID：10709652
> 
> 赞同：0
> 
> 时间：2012-05-22T20:26:47.280
> 
> 标签：.net, linq, objectdatasource

我有一个绑定了 ObjectDataSource 的 Gridview，我正在对列进行排序。如果`Sorting`我调用以下内容：

```
e.Cancel = True
Me.ods.Select()
Me.gv.DataBind() 
```

一切皆好。现在`ODS_Selected`，我使用 LINQ`OrderBy`语句操作返回的列表集合。问题是该`OrderBy`语句不*直接*修改集合中的元素并将结果作为 IEnumerable 返回。

仍然没什么大不了的，我想我可以只获取查询的结果（其中项目的顺序正确）并重新分配引用的返回集合（现在是一个新变量）并完成。它不起作用（排序确实起作用，但数据源操作不起作用）并且视觉上没有任何反应 - 没有变化。

如果我使用 LINQ `Sort`，则整个过程可以完美运行，因为 a`.Sort`直接操作集合中的项目。但是，我使用反射来反映排序表达式，因为使用和绑定了实例属性的子级，这使得排序不那么直接。基于来自这里的帮助（[如何使用 LINQ 或 Lambda 基于子属性订购集合？](https://stackoverflow.com/questions/9023922/how-do-i-order-a-collection-based-on-a-child-property-using-linq-or-a-lambda)）我得到了所有的排序工作，所以我不能使用`.Sort`，除非它在调用`.OrderBy`.

这是来自 ODS_Selected 事件的代码：

```
Dim MyData As New List(Of MyCustomClass)
'Because objects are Reference types, setting RequestQueueData = e.ReturnValue means they will share the same memory address and any modifications to 'MyData will be reflected in 'e'.
MyData = e.ReturnValue
Dim query As IEnumerable(Of MyCustomClass) = MyData.OrderBy(blah,blah) 
```

我尝试了以下方法，但都没有奏效：

```
MyData = query 
```

...并尝试：

```
MyData = query.ToList() 
```

..并尝试：

```
MyData.Clear()
MyData.AddRange(query) 
```

最后一个清除集合，.AddRange 不会重新加载任何内容：Count = 0，即使结果中有 9 个`query`结果。

关于如何操作该引用类型`MyData`以将其加载或重新分配已订购的结果的任何想法？

谢谢！

**编辑：**也试过了，绑定的 Gridview 的数据没有任何反应。重新分配后的集合是*完美*的，但没有任何反应。只有当我`.Sort`在集合上使用 a 来测试非子实例属性时，它才能按我的意愿工作。.`OrderBy' 只是不会永久修改该集合，即使在重新分配后它看起来很完美：

```
Dim MyData2 As New List(Of MyCustomClass )
If query IsNot Nothing Then
 For Each mc As MyCustomClass In query.ToList()
   MyData2 .Add(req)
 Next
End If

MyData = New List(Of BLL.Entities.Request)
'After this point, MyData & MyData2 are in the proper order.
MyData  = MyData2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:31:38.200

好的，这*确实*有效。重新评估一个*新*变量，然后将其添加回来就可以了，并完成了我想做的事情：

```
If query IsNot Nothing Then
   Dim queryTemp = query.ToList()
   MyData.RemoveRange(0, MyData.Count)
   MyData.AddRange(queryTemp)
End If 
```

在我的例子中，由于直接在对象上进行排序`MyData`，我需要将结果放在一个新变量中，因为一旦`RemoveRange`被调用，两者都`query`将为`MyData`空。然后我将排序/排序的项目添加回集合中。同样，`MyData`是对被绑定的底层数据源的引用。

这源于`.OrderBy`不会更改实际元素顺序的事实 - 它只是以特定顺序读取集合中的项目，而不更改集合中项目的位置。`.Sort`实际上会对集合进行排序——从而改变集合中项目的位置。但是我不能使用`.Sort`，因为`.OrderBy`从自定义方法调用返回的特殊需求来分解实例属性排序表达式（即，与排序表达式就像所有示例提供`ParentObject.FullName`的简单解决方案相反）`FullName`

# java - Hibernate2将单个类映射到多个表

> ID：10709655
> 
> 赞同：0
> 
> 时间：2012-05-22T20:26:50.513
> 
> 标签：java, hibernate

我有以下复杂查询，即视图，我们想消除视图并直接映射到表，我们使用 Hibernate2。是否可以将多个表映射到 Hibernate2 中的一个类？这是我的查询。

```
SELECT DISTINCT 
              r.id, 
        rtype.name AS model_object_type_name, 
        rtype.id AS model_object_type_id, 
        c.id AS case_id, 
        r.source_item_id AS person_id, 
        c.file_number, 
        c.start_date, 
                a.app_start_date AS app_date, 
        a.app_start_time, 
        a.outcome_type AS app_outcome,
        c.primary_reference_id, 
        aval.string_value AS last_mncis_refresh
FROM         my.case_file AS c INNER JOIN
             my.relation AS r ON c.id = r.target_item_id INNER JOIN
             my.item_type AS rtype ON r.item_type_id = rtype.id INNER JOIN
             my.person AS p ON p.id = r.source_item_id INNER JOIN
             my.relation AS rc ON c.id = rc.target_item_id INNER JOIN
            my.attr_value AS aval ON c.id = aval.item_id AND aval.name='test' 
             INNER JOIN  my.item_type AS ptype ON p.item_type_id = ptype.id 
WHERE     (ptype.name = 'Test') 
AND (rtype.name = 'Test1' OR rtype.name = 'Test2' OR rtype.name = 'Test3') 
AND (rc.name = 'Test4') 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:40:36.240

这是可能的。请参阅[join 元素的描述](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/mapping.html#mapping-declaration-join)（文档适用于 hibernate 版本 3.5。我不知道该元素首先引入的版本。请检查您的版本）。根据休眠规范，连接仅适用于 1:1 关系，但如果它仅用于读取 n:1 关系也应该有效（但对于更新、插入和删除可能不适用于 an:1 关系）。

# java - 为什么它会像这样？

> ID：10709657
> 
> 赞同：0
> 
> 时间：2012-05-22T20:26:53.297
> 
> 标签：java, bit-manipulation, bit

我正在寻找应该从 int 中获取单个位的代码的一部分。
如下：

```
private int getBit( int token, int pos){  
   return ( token & ( 1 << pos ) ) != 0 ? 1 : 0;   
} 
```

我的问题是它为什么不按照以下（更简单）的方式来做呢？

```
return token & ( 1 << pos ); 
```

我希望它也会返回一个`0`or `1`。
我错了吗？第二个（我的）版本错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:29:52.623

您的版本不返回位置 pos 的位值。它返回值 0 或 2^(pos-1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:29:06.577

您的版本返回 0 或`1<<pos`.

如果在布尔上下文中使用它并不重要。但它可能不是这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T20:31:44.360

你的版本不对。当你执行

```
return token & ( 1 << pos ); 
```

如果它不为零，那么除了`pos`归零的位之外的每一位都会得到一个 int，因为这是运算符右侧的数字`&`。这显然只会是 1 如果`pos==0`。

发生这种情况是因为`&`运算符只是在两个`int`s 中的相应位之间进行按位和运算。由于在最低位以外的位置`1 << pos`有一个位并且可能是 any ，因此结果也可能在最低位以外的位置有一个位，使其大于。`1``token``int``1``1`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T20:32:55.980

当然，您可以使用以下顺序的东西

```
(token >> pos) & 1 
```

# javascript - 在 JavaScript 中，在声明对象的新键：值对时，引用对象的变量名与使用 `this` 有区别吗？

> ID：10709658
> 
> 赞同：7
> 
> 时间：2012-05-22T20:26:55.780
> 
> 标签：javascript

`this`在 JavaScript 中，在声明对象的新键：值对时引用对象的变量名与使用之间有区别吗？

```
 var foo = {
      bar: function() {
        foo.qux = 'value';
      }
    };

    alert(foo.qux); // undefined
    foo.bar();
    alert(foo.qux); // 'value'

    var foo = {
      bar: function() {
        this.qux = 'value';
      }
    };

    alert(foo.qux); // undefined
    foo.bar();
    alert(foo.qux); // value 
```

另外：http: [//jsbin.com/emayub/9/edit](http://jsbin.com/emayub/9/edit)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T20:30:27.100

仅考虑提供的代码，两者都会做同样的事情。但是有一些事情要记住：

`foo`不是对象的名称而是**变量****的**名称。

变量可以改变。考虑一下：

```
var bar = foo;
foo = null; 
```

Using`foo`会破坏代码代码，但在 using 时`this`，`bar.bar()`仍将按预期工作。

By using `foo`, you are making the function dependent on the name of variable, so whenever the variable changes, the function breaks. This is also an important aspect regarding code refactoring.

# c# - 图标和除零异常

> ID：10709660
> 
> 赞同：0
> 
> 时间：2012-05-22T20:27:02.917
> 
> 标签：c#, winforms, icons, size, gdi+

我有一个所有者绘制的列表框，其中包含代表项目的结构列表。这个结构有两个属性，一个图标和一个要显示的字符串。它可以很好地显示 16x16 等小图标。但是，我尝试调整此列表框以显示文件夹中的图片，并且出现了一些莫名其妙的错误。

```
public static System.Drawing.Icon BitmapToIcon (System.String String_Bitmap, System.Drawing.Icon Object_Default)
{
    try
    {
        //return System.Drawing.Icon.FromHandle(((System.Drawing.Bitmap)(System.Drawing.Bitmap.FromFile(String_Bitmap))).GetHicon());
        System.IO.Stream s = new System.IO.MemoryStream(System.IO.File.ReadAllBytes(String_Bitmap));
        System.Drawing.Bitmap b = ((System.Drawing.Bitmap)(System.Drawing.Bitmap.FromStream(s, true, true)));
        System.Drawing.Icon i = System.Drawing.Icon.FromHandle(b.GetHicon());
        s.Close();
        b.Dispose();
        return i;
    }
    catch
    {
        return Object_Default;
    }
} 
```

别处：

```
BitmapToIcon("D:/pictures/picture001.jpg", null); 
```

该目录有大约 400 张各种形状和格式的图像，但实际上只有大约 60 张随机间隔地出现在列表框中。在 ListBox.DrawItem() 中，Graphics.DrawIcon() 正在抛出 DivideByZero 函数。在捕获异常时，它将图标注册为 0x0。很明显，我的函数被编写为在发生错误时返回默认图标（在这种情况下为 null）。

我知道 Windows ICO 格式有 256x256 的限制，但据我所知，这不是这里发生的情况。它绘制的一些图像确实要大得多，而且它们也不是正方形的。此外，它不会在 400 个列表中加载的所有图像都可以在 10 个列表中加载。我认为 GDI 可能有太多句柄或其他东西，所以我更改了函数以处理我的源位图并添加了一个睡眠语句但都没有帮助。将列表框更改为使用位图而不是图标修复了绘图问题，但它现在消耗更多内存。

GetHIcon() 是否有某种原因会返回这样奇怪的结果，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:15:17.390

您应该在 catch 子句中捕获错误，以查看导致返回默认图标的异常类型。

如果您从不调用*DestroyIcon*并重复调用此方法，则很可能是您的 GDI 资源不足。

我还可以建议此代码等效于您的代码并且更易于阅读：

```
 using ( var b = (Bitmap)Image.FromFile(String_Bitmap))
        return Icon.FromHandle(b.GetHicon()); 
```

另外 - 你为什么不改变你的列表框的结构来使用位图而不是图标，然后摆脱这个图标问题？:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T04:49:40.927

瑞安，埃里克的意思是，最好使用 using 指令来避免以下代码：

```
System.Drawing.Bitmap b = ((System.Drawing.Bitmap)(System.Drawing.Bitmap.FromStream(s, true, true))); 
```

重构后它看起来像：

```
using System.Drawing.Bitmap;

Bitmap b = ((Bitmap)(Bitmap.FromStream(s, true, true))); 
```

很难阅读您提供的代码。尝试使用 Image.FromFile() 函数加载图像或使用带有路径参数的位图构造函数。

```
 Bitmap b = new Bitmap(String_Bitmap);
    Icon i = Icon.FromHandle(b.GetHicon()); 
```

# excel - SQL Server-VBScript：在 SQL 作业中打开 Excel 文件的 VBScript 失败？

> ID：10709662
> 
> 赞同：1
> 
> 时间：2012-05-22T20:27:06.230
> 
> 标签：excel, vba, sql-server-2008, vbscript, sql-job

参考[vbScript 打开 excel 但不加载宏/模块？](https://stackoverflow.com/questions/10707574/vbscript-opens-up-excel-but-doesnt-load-macro-modules)

现在我尝试从 SQL Job 运行我的 vbscript。虽然我成功执行了作业，但它没有打开我的 excel 文件（检查任务计划程序）。我去查看这个工作的历史，发现

消息以用户身份执行：GSOPS4\SYSTEM。Microsoft (R) Windows Script Host 版本 5.7 版权所有 (C) Microsoft Corporation。保留所有权利。C:\WINDOWS\system32\TestTOPTMay307.vbs(5, 1) Microsoft Excel：Microsoft Excel 无法访问文件 '\gsops4\data_extracts\TestTOPTMay307.xlsm'。有几个可能的原因： 文件名或路径不存在。该文件正被另一个程序使用。您尝试保存的工作簿与当前打开的工作簿同名。处理退出代码 0。该步骤成功。

我还遵循了此线程中的建议[从 SQL Server 代理运行 C# 控制台应用程序（作业）？](https://stackoverflow.com/questions/10691408/run-a-c-sharp-console-application-from-sql-server-agent-job)

但是我无法让它工作。在过去的 48 小时里，这件事一直困扰着我。任何导致它的原因以及如何成功执行我的工作（从 SQL 运行我的 vbscript 文件）的任何线索都将受到高度赞赏。谢谢大家的建议！

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:05:30.520

**另一种观点**

Excel 非常擅长在控制台上弹出对话框，然后挂起直到用户操作它们。这在服务器上是一件*非常*糟糕的事情，因为它会冻结进程并泄漏正在运行的 excel 实例。它还要求您在服务器本身上安装 excel。

通常，最好通过代理来安排 SSIS 作业，该代理通过 OLEDB 驱动程序读取电子表格，然后在服务器端作业上复制计算。宏到底是做什么的？

我在一天中从 Excel 源中完成了一些 ETL 工作，并且（IMO）处理 excel 数据的最佳方法是避免`EXCEL.EXE`不惜一切代价调用。悬空 COM 引用非常挑剔，因此您必须非常小心地处理所有创建的 COM 对象。在某些情况下，默认引用（工作表、工作簿、范围等）会在幕后创建不透明的引用，您实际上无法以编程方式整理这些引用，因为类型库没有公开任何这样做的工具。

.NET 主互操作程序集为此增加了额外的复杂性，因为它们生成了自己的引用，这些引用也必须明确整理。COM 和 .Net 之间存在显着的阻抗不匹配 - 以至于已经编写了几本关于使 COM 和 .Net 组件很好地协同工作的书籍。

幸运的是，WSH 不涉及 .Net，但 Excel COM 服务器上的 COM 远程处理不是我建议在 DBMS 中执行的操作。

**两种更安全的方法**

1.  在 OLEDB 驱动程序中打开工作簿 - 将工作表读入临时表，然后在那里提取数据表格。这甚至不需要在服务器上安装 Excel，并且非常强大。

2.  解开 .xlsx zip 文件并从中取出工作表 - 这实际上比您想象的要好。这些`sheetxx.xml`文件的格式相当简单，您可能需要的唯一其他内容是`sharedStrings.xml`. 通常，如果您有可用的 SSIS，则不需要对 SQL Server 执行此操作，但如果您在非 Windows 主机上使用（例如）Oracle，这将是一个非常有用的技巧。

**编辑：** 为了通过 OLE 自动化使用 Excel，您需要在运行它的机器上安装 Excel。一般来说，将 Excel 安装在服务器上并不是一个好计划，因为它不是特别安全。它也是一个桌面工具，如果您没有在您的 I 上打点并在您的 COM 引用创建和处置中交叉您的 T，则它有泄漏 COM 引用和运行 Excel 实例的趋势。

SSIS 有一个 excel 数据源。您可以通过在 BIDS 中创建 SSIS 项目并创建新的连接管理器来查看它。您的选择之一将是 Excel。

但是，如果您需要查询一个共享点列表，您最好不使用 Excel 以编程方式查询它。一点 google-fu 应该会出现一些如何做到这一点的例子，例如[这里。](http://www.devx.com/dotnet/Article/31762/1954). 您可以通过独立的 .Net 应用程序或通过 SSIS 包中的脚本任务执行此操作（脚本任务是可以在 SSIS 包中构建的 .Net 自定义任务）。

如果你这样做，你可能最好在 SSIS 之外开发它（如果你没有任何其他选择，请使用 Visual C# Express），然后将其移植到脚本任务。如果您熟悉 Python，IronPython 或 Boo 是很好的工具，可以交互地使用 .Net API 来让某些东西正常工作。

# c# - C# 应用程序图标更改停靠图标

> ID：10709666
> 
> 赞同：0
> 
> 时间：2012-05-22T20:27:24.253
> 
> 标签：c#

我已将项目属性应用程序选项卡、资源、图标和清单下的应用程序图标设置为自定义图标。但是，它只会更改我在打开应用程序之前看到的图标。但是，当我打开应用程序并查看 Dock 上的图标时，它与使用 VS 2010 调试时的图标相同。

这是我启动前的图标图像。

![在此处输入图像描述](../Images/e9f18ff90251c3938f1bec4462c0d99c.png)

那是我希望我的停靠图标也有的图标，但是它显示了这个...

![在此处输入图像描述](../Images/163720948a5da6a55a3ef2c8b5c73120.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:32:46.223

您可能只设置了应用程序的图标，而不是*表单*的图标。每个表单都可以有自己的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:32:40.427

外壳显示窗口的图标，而不是可执行文件的图标，您需要为显示的窗口选择一个图标。

在 WPF 中，窗口的默认图标是应用程序的图标，但它似乎只在没有附加调试器的情况下在 Release 中工作（请参阅[WPF Icon for all app windows ）。](https://stackoverflow.com/questions/1881580/wpf-icon-for-all-app-windows)您仍然可以将窗口的[图标](http://msdn.microsoft.com/en-us/library/system.windows.window.icon.aspx)属性设置为您想要的（直接或从资源，如您所愿）：

```
<Window
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  Icon="SomeIcon.ico">
</Window> 
```

在 winforms 中，设计器是更简单的方法，因为它会自动将其放入资源文件中或让您从现有资源中进行选择。如果您想手动操作，请参阅[Form.Icon](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.icon)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:36:22.733

单击您的表单
转到属性窗口，转到图标，从资源中选择您的 ccon

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:59:58.063

您必须为每个表单设置图标。

# android - ListActivity 的 onListItemClick 不起作用

> ID：10709669
> 
> 赞同：2
> 
> 时间：2012-05-22T20:27:35.213
> 
> 标签：android, android-listview, adapter, listactivity

在我的具有 ListActivity 的应用程序中，`onListItemClick`通过单击`ListView`项目不会触发覆盖的回调。

我已经使用以下 xml 文件，permissionview.xml 定义了一个自定义列表视图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn_Apply"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/btn_apply"
            android:onClick="onApplyClick" />

        <Button
            android:id="@+id/btn_install"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/btn_install"
            android:onClick="onInstallClick" />

        <Button
            android:id="@+id/btn_cancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel" />

    </LinearLayout>

    <ListView android:id="@android:id/list" 
            android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="false">

    </ListView>  
</LinearLayout> 
```

和 viewitem 布局`checkable.xml`：

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

   <ImageView android:id="@+id/img" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:layout_alignParentBottom="true"
        android:src="@drawable/ic_launcher" android:focusable="false" />

    <CheckBox
        android:id="@+id/check"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       android:layout_alignParentRight="true"
        android:layout_marginLeft="4px"
    android:layout_marginRight="10px"

    android:clickable="true">

 </CheckBox>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/img"
        android:gravity="bottom"
        android:text="@+id/label"
        android:textSize="15px"/>
</RelativeLayout> 
```

定义`ArrayAdapter`如下：

```
 public class InteractiveArrayAdapter extends ArrayAdapter<Model> {

    private final List<Model> list;
    private final Activity context;
    private boolean changeable;

    public InteractiveArrayAdapter(Activity context, List<Model> list, boolean changeable) {
        super(context, R.layout.checkable, list);
        this.context = context;
        this.list = list;
        this.changeable = changeable;
    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
        protected ImageView image;
        protected int pos;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
                view = inflater.inflate(R.layout.checkable, null);

            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.label);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
            viewHolder.image = (ImageView) view.findViewById(R.id.img);
            viewHolder.pos = position;

            view.setClickable(true);

            if (!changeable)viewHolder.checkbox.setEnabled(false);

            viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    Model element = (Model) viewHolder.checkbox.getTag();

                    element.setActive(buttonView.isChecked());
                }

            }
            );

            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));

        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));

        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).showPermission());
        holder.checkbox.setChecked(list.get(position).isActive());

        if (list.get(position).isRedundant()) {
            holder.image.setImageDrawable(context.getResources().getDrawable(R.drawable.warning));
        } else {
            holder.image.setImageDrawable(context.getResources().getDrawable(R.drawable.ok));
        }
        return view;

    }

} 
```

在扩展 ListActivity 的类中，定义的 ArrayAdapter 用 asyncTask 中的 arrayList 填充（列表信息在`doInBackground()`方法中计算）：

```
public class PermissionViewActivity extends ListActivity {

    private final static String TAG = "PMA";
    ...
     @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.permissionview);
        ...
    }

    ... 

     private class CurrentPermissions extends AsyncTask<String, Integer, String> {

        private ListActivity la;
        private Context context;

        private int progress = 0;

        public CurrentPermissions(ListActivity la) {
            this.la = la;
            this.context = la;

        }

        protected void onPreExecute() {
        ...

        protected void onPostExecute(String result) {
          adapter = new InteractiveArrayAdapter(la, permissionList, changeable);
          la.setListAdapter(adapter);
          /output with number of listitems
              System.out.println("DEBUG1 " + la.getListAdapter().getCount());
        }
     }
      ...
      @Override
      protected void onListItemClick(ListView l,  View view, int position, long id) {
        super.onListItemClick(l, view, position, id);
        System.out.println("clicked !");
      }
      ...
    } 
```

该`onListItemClick`方法未执行。在 ArrayAdapter 中定义 onClickListener 时，单击事件有效：

```
 view.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    System.out.println("Klick D1 " + list.get(viewHolder.pos));

                }

            }); 
```

为什么 ArrayAdapter 中单击事件的定义有效，但在 ListActivity 中覆盖无效？我找不到失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:42:04.477

尝试也将`CheckBox`行布局设置为 not `focusable`：

```
//...
 <CheckBox
    android:id="@+id/check"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="4px"
    android:layout_marginRight="10px"
    android:focusable="false" 
    android:clickable="true">

//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:34:42.263

如果你想要一个“通用”点击监听器（适用于你的列表视图中的所有项目）你的活动应该实现 OnItemClickListener

```
public class PermissionViewActivity extends ListActivity implements OnItemClickListener 
```

您将需要覆盖该方法

```
@Override
public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3)
{
     Toast.makeText(this, "Clicked", Toast.LENGTH_SHORT).show();
} 
```

然后你必须在你的列表视图上手动设置点击监听器

前任。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.permissionview);
        ...
        getListView().setOnItemClickListener(this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:53:27.327

我在包含 ListView 的视图中通过以下方式执行此操作：

```
ListView lv = (ListView)findViewById(R.id.myList);
lv.setAdapter(new myCustomAdapter,items);
lv.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id){
        /* do something i've been clicked */

}); 
```

或在 onItemSelected 事件中

```
lv.setOnItemSelectedListener(new AdapterView.onItemSelectedListener(){
    public void onItemSelected(AdapterView<?> arg0, View arg1, int position, long id){
        ...
    }
    public void onNothingSelected(AdapterView<?> arg0){
        ...
    }
}); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T11:37:39.917

如果 ListItem 中有可单击视图，则需要将可聚焦标志设置为 false。通过在布局中设置 focusable=false，当以编程方式设置 Listener 时，它将被覆盖。

我的解决方案通过以编程方式调用设置可聚焦性为我工作

```
listview.setOnItemClickListener(this);
listview.setFocusable(false); 
```

# php - 创建数组以提供 CSV 函数

> ID：10709670
> 
> 赞同：1
> 
> 时间：2012-05-22T20:27:37.027
> 
> 标签：php, mysql, csv

我正在尝试从查询创建 CSV，并且我需要数据符合以下格式：

```
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=file.csv");
header("Pragma: no-cache");
header("Expires: 0");

$array = array(
    array("data11", "data12", "data13"),
    array("data21", "data22", "data23"),
    array("data31", "data32", "data23"));
outputCSV($array); 
```

我习惯于像这样聚合数据：

```
while ($row = mysql_fetch_array($result)){
    $values[]   = $row['value'];
} 
```

如何传递`outputCSV`适当的数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:39:31.123

```
function outputCSV($rows, $fieldNames = array())
{
    if ($fp = fopen('php://output', 'w')) {
        if ($fieldNames) {
            fputcsv($fp, $fieldNames);
        }
        foreach ($rows as $row) {
            fputcsv($fp, $row);
        }
        fclose($fp);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:39:00.297

循环你的`$array`，调用[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)：

```
foreach ($array as $fields) fputcsv(STDOUT, $fields); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:39:40.517

```
$values = array();

while ($row = mysql_fetch_array($result)) {
    $values[]   = $row;
}

outputCSV($values); 
```

# java - IndexOutOfBounds - 需要帮助

> ID：10709676
> 
> 赞同：1
> 
> 时间：2012-05-22T20:27:51.640
> 
> 标签：java, indexoutofboundsexception

下面的代码旨在获取一个 byte[] 和其他一些东西（参见它给出的代码）。然后它构建一个具有一定长度的数据包并返回它。我的问题是当我将文件读入主程序时，我需要数据报包的缓冲区为剩余要发送的字节数（如果小于 512）+ 4。这是为了处理读取请求的最后一个数据包TFTP 服务器。我在“buffer[bufferOffset] = data[dataOffset];”这一行得到一个索引越界异常。谁能帮我理解为什么会发生这种情况以及最好的解决方法是什么？

```
public DatagramPacket doRRQ(byte[] data, int block, InetAddress address, int port, long fileSize, long sentBytes){

//takes file data and creates a buffer for a DATA packet to be used in a RRQ. This packet 
//is passed to MyFirstTFTPServer.java to be modified and sent to client. This is done 
int bufferOffset = 3;
int dataOffset = -1;
byte[] buffer = null;
long difference = 0;
int i = 512;
byte byteBlock = (byte)block++;//possible issue with block no increment. test.

if (sentBytes + 512 > fileSize){

difference = fileSize - sentBytes;
    difference = difference + 4;
    i = (int)difference;
    buffer = new byte[i];

} else {

    buffer = new byte[516];

}

DatagramPacket packet = new DatagramPacket(buffer, buffer.length, address, port);
buffer[0] = 0;
buffer[1] = 3;
buffer[2] = 0;
buffer[3] = byteBlock;
for(byte item:data){

    bufferOffset++;
    dataOffset++;
    buffer[bufferOffset] = data[dataOffset];

    //System.out.println(bufferOffset);

    //System.out.println(dataOffset);

}

return packet;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:34:42.373

我看不到您在哪里看过 `data.length.` Data.length 是否可能大于 sendBytes？如果是这样，您的循环应该超过 sentBytes，而不是超过数据。

基本上，您决定缓冲区的缓冲区长度的逻辑似乎与 sentBytes 的大小不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:52:28.733

这是重构为紧凑形式的代码：

```
public DatagramPacket doRRQ(byte[] data, int block, InetAddress address,
    int port, long fileSize, long sentBytes)
{
  final byte[] buffer =
    new byte[sentBytes + 512 > fileSize? (int)(fileSize - sentBytes) + 4 : 516];
  final DatagramPacket packet = 
    new DatagramPacket(buffer, buffer.length, address, port);
  buffer[1] = 3;
  buffer[3] = (byte)block;
  for (int i = 0; i < data.length; i++) buffer[i+3] = data[i];
  return packet;
} 
```

现在很明显发生了什么。您的缓冲区大小表达式不直接取决于`data.length`，因此问题可能在于方法的**参数**值，就像它可能在于代码本身一样。你来做法官。

# msbuild - 从 MSBuild 中的 AssemblyInfo 访问版本

> ID：10709677
> 
> 赞同：10
> 
> 时间：2012-05-22T20:27:55.723
> 
> 标签：msbuild, nuget-package, assemblyinfo

我正在尝试通过 Visual Studio 构建过程创建/推送 nuget 包，如此[处](http://ihadthisideaonce.wordpress.com/2012/02/21/creating-packages-with-nuget-the-msbuild-way/)所述。

构建包很容易：

```
<Exec WorkingDirectory="$(ProjectDir)" Command="$(NuGetApp) pack $(ProjectFile) -OutputDirectory $(Deploy) -Verbose -Prop Configuration=Release"/> 
```

我在 $(Deploy) 文件夹中看到 .nupkg 文件。

但是为了能够推动它，我需要 $(AssemblyVersion) 来使用它：

```
<Exec Command="$(NuGetApp) push $(ProjectName)$(AssemblyVersion) -s $(NugetServer) $(NugetKey)" /> 
```

我尝试使用 XMLRead 来获取值，但 NugetSpecFile 中的值是“$version$”，而不是 AssemblyInfo.cs 中的版本。

```
<XmlRead XPath="/package/metadata/version" XmlFileName="$(NuSpecFile)">
      <Output TaskParameter="Value" PropertyName="AssemblyVersion" />
    </XmlRead> 
```

如何访问版本以便可以在“nuget push”中使用它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T08:41:33.190

这个我会做的：

```
<PropertyGroup>
    <MyAssemblies>somedll\the.dll</MyAssemblies>
  </PropertyGroup>

 <Target Name="RetrieveIdentities">
    <GetAssemblyIdentity
        AssemblyFiles="$(MyAssemblies)">
      <Output
          TaskParameter="Assemblies"
          ItemName="MyAssemblyIdentities"/>
    </GetAssemblyIdentity>

    <Message Text="Files: %(MyAssemblyIdentities.Version)"/>
  </Target> 
```

从这里改变： [MSBuild Task to read version of dll](https://stackoverflow.com/questions/443188/msbuild-task-to-read-version-of-dll)

# ruby-on-rails - 我如何清理这个嵌套的 Rails 路线

> ID：10709681
> 
> 赞同：0
> 
> 时间：2012-05-22T20:28:06.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个

```
devise_for :users
 resources :sites do
  resources :users
  get 'companies/search'
 end
 root :to => "welcome#index"
end 
```

路线看起来像这样

```
 site_users GET    /sites/:site_id/users(.:format)            users#index
                  POST   /sites/:site_id/users(.:format)            users#create
    new_site_user GET    /sites/:site_id/users/new(.:format)        users#new
   edit_site_user GET    /sites/:site_id/users/:id/edit(.:format)   users#edit
        site_user GET    /sites/:site_id/users/:id(.:format)        users#show
                  PUT    /sites/:site_id/users/:id(.:format)        users#update
                  DELETE /sites/:site_id/users/:id(.:format)        users#destroy
 site_companies_search GET /sites/:site_id/companies/search(.:format)  sites/:site_id/companies#search
            sites GET    /sites(.:format)                           sites#index
                  POST   /sites(.:format)                           sites#create
         new_site GET    /sites/new(.:format)                       sites#new
        edit_site GET    /sites/:id/edit(.:format)                  sites#edit
             site GET    /sites/:id(.:format)                       sites#show
                  PUT    /sites/:id(.:format)                       sites#update
                  DELETE /sites/:id(.:format)                       sites#destroy
             root        /                                          welcome#index 
```

但我想知道是否有办法拥有这样的路线

```
 site_users GET    /:site_id/users(.:format)            users#index
                  POST   /:site_id/users(.:format)            users#create
    new_site_user GET    /:site_id/users/new(.:format)        users#new
   edit_site_user GET    /:site_id/users/:id/edit(.:format)   users#edit
        site_user GET    /:site_id/users/:id(.:format)        users#show
                  PUT    /:site_id/users/:id(.:format)        users#update
                  DELETE /:site_id/users/:id(.:format)        users#destroy 
```

没有 /sites 在 url 所以 url 来自

```
/sites/some_name/users 
/sites/some_name/users/new 
```

到

```
/some_name/users 
/some_name/users/new 
```

如果可能的话，这将清理 url

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:34:54.200

```
resources :sites do
  get 'companies/search'
end
scope ':site_id' do
  resources :users
end
root :to => "welcome#index" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:00:29.337

如果您希望能够使用它以及像继承资源这样的资源加载机制并且在`site`CRUD 操作`/`，您可以绘制您的路线，例如：

```
resources :sites, :path => "" do
  get 'companies/search'

  resources :users
end

root :to => "welcome#index" 
```

# facebook - 在应用程序 Facebook 上登录

> ID：10709685
> 
> 赞同：0
> 
> 时间：2012-05-22T20:28:34.273
> 
> 标签：facebook, api, connection, facebook-like, facebook-php-sdk

我尝试将 SDK 用于 facebook 上的应用程序，但我真的不明白它是如何工作的。

我的应用程序的 url 示例是 apps.facebook.com/myapps 服务器的 url 是：www.myapps.com

该应用程序由两部分组成：-第一部分对所有用户开放-第二部分需要登录才能访问用户的图片，...

我测试用户是否使用 $facebook->getUser() 登录，如果不是，我使用 $facebook->getLoginUrl()。但我认为这个 URL 仅用于网站而不是应用程序，因为 Facebook 不处理 iframe（cf 带有 2 个标题的屏幕截图）和重定向（重定向到 www.myapps.com 而不是 apps.facebook.com/myapps）

截图： [http ://www.kreatoo.com/rav/facebook.png](http://www.kreatoo.com/rav/facebook.png)

我不明白我必须怎么做？？

谢谢大家，对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:45:58.833

getLoginUrl 函数有一个参数，一个数组。您可以指定下一个和取消 url。

```
 $params = array(
    'fbconnect' => 0,
    'canvas' => 1,
    'next' => "http://apps.facebook.com/[YOUR_APP]/",
    'req_perms' => '[PERMISSIONS]'
);
$url = $facebook->getLoginUrl($params); 
```

下一个指定用户认证成功后的 url。

# ios - 原生视频播放器中的广告通知

> ID：10709691
> 
> 赞同：1
> 
> 时间：2012-05-22T20:29:04.157
> 
> 标签：ios, video, overlay, ads

如果在网页上使用 Brightcove HTML 视频播放器，当按下播放时，iOS 将在原生视频播放器中打开相关视频（以及任何前贴片广告）。有没有办法在原生视频播放器中显示诸如“广告播放”之类的消息？

我已经通过广告网络阅读过，您可以设置一些元数据，这些元数据会通知本地播放器并导致显示消息。此信息可能是错误的，我还没有找到有关如何执行此操作的任何信息。

提前感谢您的帮助。

# qt - 子类化 QGraphicsView 并设置 drawBackground

> ID：10709694
> 
> 赞同：4
> 
> 时间：2012-05-22T20:29:10.270
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

我正在尝试在 Qt 中创建一个类似于 impoly（来自 matlab）的函数。现在，我有一个 QGraphicsView 的子类，并将虚函数“drawBackground”设置为：

```
void roiwindow::drawBackground(QPainter *painter, const QRectF &rect)
{
painter->save();
painter->drawImage(rect, *refimage);
painter->restore();
} 
```

这很好用，基本上正是我想要的背景层。现在，我正在尝试添加最终将充当多边形节点的圆圈。我通过使用：

```
QGraphicsView *view = new QGraphicsView(this);
view->show();
QGraphicsEllipseItem *e1;
e1 = this->addEllipse(20, 20, 30, 30, QColor(0, 0, 0), Qt::white);
e1->setFlags(QGraphicsItem::ItemIsMovable | QGraphicsItem::ItemIsMovable); 
```

这就是我想要的。但是，有一个问题是，当我单击并拖动椭圆时，椭圆的背景是 *refimage 的缩小版本...这会在屏幕上留下一种条纹，但是当我单击另一个窗口时它会消失或最小化窗口。QGraphicsItem 是否也调用 drawBackground？如果是这样，它似乎只在拖动项目时调用它。关于如何更好地编码的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:44:40.017

出现条纹是因为您可能将 QGraphicsView 设置为默认[视口更新模式](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#ViewportUpdateMode-enum)，即`QGraphicsView::MinimalViewportUpdate`. 在这种情况下，您需要`QGraphicsView::FullViewportUpdate`. 原因是当你移动项目时，它们背后的背景需要重绘，但是当你`MinimalViewportUpdate`设置后，只有项目会被重绘（除非有一个完整的视口更新，例如，从最小化/最大化窗口）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:42:08.797

`QGraphicsView::drawBackground`每当需要重新绘制图形视图的*某些内容时调用。*这*可能*比整体视图更小以获得更好的性能。

示例：当您有一个矩形项目，比方说 50 x 50 像素，在更大的场景/视图中，您将此矩形向右移动 20 像素，只有项目的前一个 + 新位置覆盖的区域（70 x 50 像素）被重绘（因为这是改变的区域）。

在您的重新实现中`drawBackground`，您说：

```
painter->drawImage(rect, *refimage); 
```

*它实际上在要更新的区域*的大小处绘制图像，而不是视图的总大小。

为了每次都在相同的位置和相同的大小绘制图像，您可以使用恒定位置（例如原点）并且不要更改图像的大小：

```
painter->drawImage(0, 0, *refimage); 
```

或者您可以使用场景的整个区域：

```
painter->drawImage(sceneRect(), *refimage); 
```

where`sceneRect()`被定义为您的场景用于整个场景的相同矩形。当您添加超出矩形的新内容时，该矩形会自动更新。您还可以通过手动将其设置为一个值来强制使用场景矩形，例如：

```
scene()->setSceneRect(0, 0, 800, 800); 
```

请参阅文档：[`QGraphicsView::sceneRect`](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#sceneRect-prop)和[`QGraphicsScene::sceneRect`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#sceneRect-prop)

# javascript - href点击错误

> ID：10709696
> 
> 赞同：0
> 
> 时间：2012-05-22T20:29:14.767
> 
> 标签：javascript

我有一个问题要与你们分享..在我的页面中，我有通过某种方法创建的不同选项卡，在移动到另一个选项卡之前，我需要进行一些验证，但问题是当我单击下一个选项卡时，页面已提交在进行我的验证检查之前，即使他们检查了验证脚本是否已执行，但由于首先提交了页面，它正在移动到下一个选项卡。如果验证为假，我如何防止移动到下一个选项卡。

href点击的代码：

```
<a onclick="adc.FormHandler.goto('user_edit', 0); return false;" 
   href="#">
  <i data="1" class="icon-tab-num"></i> 
  General Info
</a> 
```

实际点击功能的代码

```
if (null !== document.forms[formName]) {
    document.forms[formName].elements['__goto'].value = gotoIndex;
    document.forms[formName].submit();
    return false;
} 
```

我无法修改这些脚本，因为这是一个通用脚本，由其他团队成员创建。我正在使用 jquery 进行验证。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:38:04.380

除非我对您的问题的理解不正确，否则无论您是否返回 false，您似乎都在提交表单。所以它永远不会真正返回错误。

你应该做类似的事情

```
if (null !== document.forms[formName]) {
    document.forms[formName].elements['__goto'].value = gotoIndex;
    return false;
}
else{
    document.forms[formName].submit();
} 
```

# ios - viewForHeaderInSection 中的 UIButton

> ID：10709701
> 
> 赞同：1
> 
> 时间：2012-05-22T20:29:39.150
> 
> 标签：ios, uibutton, tableview

我想在部分标题中放置一个信息灯按钮

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
return 20;
}  

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
  UIView *sectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 100, 20)];

  UIButton* infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
  infoButton.frame = CGRectMake(0, 0, 18, 18); // x,y,width,height
  infoButton.enabled = YES;
  [infoButton addTarget:self action:@selector(infoButtonClicked:) forControlEvents:UIControlEventTouchUpInside];

  //Add the subview to the UIView
  [sectionHeaderView addSubview:infoButton];
return sectionHeaderView;
}
- (void)infoButtonClicked:(id)sender {
  NSLog(@"infoButtonClicked");
} 
```

按钮没有响应。我不太清楚为什么。这可能是一件容易的事。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:08:09.690

我尝试了与您完全相同的代码（复制并粘贴）到一个工作的 UITableView 类中，它工作得很好。我能够点击按钮并获得调试输出。所以你上面显示的代码很好，应该可以工作。你的课上肯定有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:25:44.973

好的。我偶然发现了我将分享给可能有类似问题的任何其他人的答案。

我有一个带有两个子视图的 UIViewController——一个 UIView 和 UITableView。在情节提要中，我将 UITableView 放在情节提要的文档大纲视图中。（可以使用左下角按钮打开的故事板左侧视图面板）。我认为这意味着 UITableView 是一个较低的层，如果你认为它是一堆层。

我切换了图层顺序（使 UIView 在文档大纲视图上更高）并且一切正常。

# objective-c - wait_fences：未能收到回复：10004003 - 在应用程序期间：didFinishLaunchingWithOptions：

> ID：10709703
> 
> 赞同：0
> 
> 时间：2012-05-22T20:29:45.993
> 
> 标签：objective-c, ios, cocoa

我在 application:didFinishLaunchingWithOptions: 方法期间收到“wait_fences: failed to receive reply: 10004003”。

我对 UIWindow 进行了子类化并覆盖了导致错误的 drawRect 方法。但是，我不知道错误试图告诉我什么，为什么会发生以及如何解决它。

```
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {

        window_ = [[OoviumWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        [window_ makeKeyAndVisible];
        controller_ = [[AetherController alloc] init];  
        [window_ setRootViewController:controller_];

        return YES;
    }

    @implementation OoviumWindow

    - (id) initWithFrame:(CGRect)rect {
        if (self = [super initWithFrame:rect]) {
            _image = [[UIImage imageNamed:@"Default-Portrait.png"] retain];
        }
        return self;
    }
    // UIWindow ======================================================================================
    - (void) drawRect:(CGRect)rect {
        [_image drawInRect:_rect blendMode:kCGBlendModeNormal alpha:.05];
    }

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:43:12.950

这看起来实际上是[“wait_fences：未能收到回复：10004003”的副本？](https://stackoverflow.com/questions/1371346/wait-fences-failed-to-receive-reply-10004003)

您使用的症状略有不同`application:didFinishLaunchingWithOptions:`，但最终结果是您在应用程序生命周期中过早触发渲染操作。

# ios - iOS 推送通知的可用声音列表

> ID：10709707
> 
> 赞同：25
> 
> 时间：2012-05-22T20:30:12.860
> 
> 标签：ios, ios5, push-notification

我正在尝试更改推送通知的声音，但我不知道要使用什么名称。我想使用“电子”声音，但是在我的有效载荷的声场中放什么？有可用声音列表吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-22T20:40:24.930

如[文档中所述](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/PayloadKeyReference.html)，您可以将“default”指定为有效负载中“sound”键的值以播放默认声音，或者指定应用程序包中声音文件的名称以播放该声音。您需要[准备声音](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/SupportingNotificationsinYourApp.html#//apple_ref/doc/uid/TP40008194-CH4-SW10)以确保其格式兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T18:24:07.270

上面的答案可能是错误的。

您可以指定内置声音，我正在研究的问题是找出所有名称。

例如，此 APNS Python 代码有效：

```
APNSmessage = Message([u1.push_notification_token], sound="chime", alert=sender+" Private Messaged You: "+messagePushNotification, badge=u1.unread_badge_count, custom={'slug':slugChannel}) 
```

请注意，`sound`设置为`chime`而不是`default`。这适用于 iOS 7 及更高版本，不明白为什么它也适用于 iOS 8。

当我第一次编写此代码时，我只是进行了一个疯狂的猜测并输入了`chime`哪个，你瞧，工作。

# c# - JQuery 对页面加载的影响

> ID：10709714
> 
> 赞同：-1
> 
> 时间：2012-05-22T20:30:30.723
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有一个页面在页面加载中做了一些耗时的事情（实际上就是这样）。我想向用户展示一个体面的消息，然后在过程完成后用实际结果替换它。

我尝试的每一件事都让 UI 在漫长的过程结束后呈现，这无济于事。我尝试使用 UpdatePanel 来渲染页面，然后从客户端触发更新，但它也不起作用。

有人可以告诉我如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:37:19.300

我建议您执行以下操作：

1.  创建一个新页面，该页面仅在加载时显示您想要显示的任何内容。加载图形或其他。
2.  通过 AJAX 调用您当前的页面并让它返回`success`或`failure`您想要返回到第 1 页的任何内容。
3.  ajax 调用返回后，您可以将加载图标或 html 替换为您的成功图形。

HTML页面1： `<div id="content"><img src="images/loading.png" alt="loading" /></div>`

jQuery：

```
$.ajax({
    type: "GET",
    timeout: 30000,  // set accordingly
    url: "/some/url", // this is the page that will do all the work
    beforeSend: function() {
      // do some stuff
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      alert("An error has occurred making the request: " + errorThrown); // if there was an issue
    }, 
    success: function() {
    $('#content').html('Success!!'); // change icon or what you need to do.
    }
    }); 
```

我无法让 UI 正确格式化代码。jQuery ajax 参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:51:49.490

如果您使用的是 ASP.NET WebForms，您可以使用 UpdatePanel 和 UpdateProgress 在加载内容时显示图像。只需将 updateprogress 控件指向 updatepanel 控件即可。UpdateProgress 将包含加载图像和更新面板您的主要内容和控件。然而，UpdateProgress 和 UpdatePanel 是微软编写的一个丑陋的工具，我强烈推荐使用 jQuery 和它真正的 AJAX 调用（虽然它会涉及更多的工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:49:19.733

您可以使用[jQuery BlockUI 插件](http://jquery.malsup.com/block/)- 在您[准备好的处理程序](http://api.jquery.com/ready/)中，您将阻止、处理然后解除阻止。

如果有大量数据流向客户端，在准备好处理程序启动并阻塞页面之前可能会有一段不舒服的时间，所以另一种策略是有一个`<div>`覆盖页面（你的“请等待，加载” 消息），您隐藏在准备好的处理程序的末尾。

# jquery - Jquery 文本覆盖在列表中的缩略图上

> ID：10709716
> 
> 赞同：1
> 
> 时间：2012-05-22T20:30:38.663
> 
> 标签：jquery, text, overlay, onhover

悬停缩略图图像时如何显示文本 - 我找到了一些教程，但我需要它在如下列表结构中工作。最好作为附加的 li 或标题。

参考网站在这里： http: [//owenmyers.co.uk/TESTING/](http://owenmyers.co.uk/TESTING/)

```
 #item {
position:absolute;
top:117px;
width:711px;
height:100%;
left:150px;
z-index:1;
}
.item {
    margin:0px;
}
.item.first {
    clear: left;
    margin-left: 0;
}
.item img {
    opacity:0;
    border:1px solid #000;
}

.item ul {
    display:inline;
    list-style-type:none;
    list-style:none;
    float:left;
    width:721px;
    padding:0px 0px;
    margin-left:-5px;
    z-index:5;
}
.item ul li {
    display:inline;
    float:left;
    list-style-type:none;
    list-style:none;
    float:left;
    width:170px;
    height:115px;
    padding:0px 5px;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight:600;
    text-transform: none;
    color: #000000;
    text-decoration: none;
}

<div id="item" class="item">
<ul style="margin-top:0px;">
<li class="item"><a href="#"><img src="img/holderthumb.jpg"/></a></li>
<li><a href="#"><img src="img/holderthumb.jpg"/></a></li>
<li><a href="#"><img src="img/holderthumb.jpg"/></a></li>
<li><a href="#"><img src="img/holderthumb.jpg"/></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:48:32.570

对于每个图像，您应该添加属性`alt`。例如
`<img src="img/holderthumb.jpg" alt="Description Here"/>`
你也可以做标题属性
`<img src="img/holderthumb.jpg" title="Description Here"/>`

完成后，您可以创建一个简单的脚本来获取这些属性（或）并显示这些属性。例如这里有一个例子

```
$("img#id").hover(
function(){
    var desc = $(this).attr("title"); //Or $(this).attr("alt");
    $("divthatcontainstext").html(desc); //Puts attribute text into div that needs text
}, //Hover Encompasses Mouse on and Mouse off into one function
function(){
    $("divthatcontainstext").html(""); //Clears div with text
}); 
```

我认为这是您提出问题的基础。确保代码是包装器`$(document).ready(function(){});`或`$(function(){});`

# android - 无法将日志消息放入 Android webkit 本机代码中

> ID：10709724
> 
> 赞同：0
> 
> 时间：2012-05-22T20:31:22.157
> 
> 标签：android, logging, webkit, native

我正在尝试将日志消息放入 Android 中 Web 工具包的本机代码中。

我正在使用[此页面](http://www.mail-archive.com/android-framework@googlegroups.com/msg01674.html)上使用的方法来放置日志。

我收到了[这个问题](https://stackoverflow.com/q/10512282/682869)中提到的错误。

我正在通过运行包含 WebView 的应用程序来测试我的日志，代码如下：

```
WebView wv = (WebView)findViewById(R.id.webView1);
wv.loadUrl("http://www.google.com"); 
```

由于我在 URL 中使用“http://”，因此引用问题的解决方案没有用。

谁能建议必须进行哪些更改才能成功从本机代码获取日志。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:48:58.047

我不认为问题出在 Webkit 的本机代码中。尝试在未修改的 Android 中创建一个用于加载 url 的应用程序。我认为你应该得到同样的错误。

至于我，我使用 `__android_log_print()`函数来打印日志消息。

# git - 合并原始字符串的两个修改版本

> ID：10709725
> 
> 赞同：0
> 
> 时间：2012-05-22T20:31:29.583
> 
> 标签：git, version-control, diff, patch, merge-conflict-resolution

这与版本控制有关，在我们不知道更改的确切时间的并行修改情况下，因此我们假设我们同时收到一个文件的两个修改版本。我简化了问题：

我有一个字符串 S，有两个修改版本，称为 T 和 U。我可以使用 diff 看到 S 和 T 之间的差异。让我们将由 T over S 组成的补丁称为 PT。U也一样，我们会有PU。现在，我想以一种安全的方式将 PT 和 PU 合并到一个补丁中，能够在“字”级别而不是典型的编程线级别检测 PT 和 PU 之间的冲突。

问题：

1-有没有这样的算法来合并两个补丁？

2- 如何检测 T 和 U 之间的冲突？

3- 处理冲突的共同政策是什么？对我来说，一种解决方案是始终从其中一个版本中选择更改，比如 T，以防发生冲突。

有什么工具可以做我正在寻找的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:54:52.140

我不知道有什么实现可以做到这一点，但是您可以通过使用检测并显示行内差异的合并工具获得很好的帮助。[KDiff3](http://kdiff3.sourceforge.net/)就是这样一个工具。在以下示例中，您希望合并`unsigned`和`int n`更改。这是通过手动编辑合并输出来完成的，但该工具使此操作非常简单（以至于唯一困难的部分是理解代码更改）。

![KDiff3 截图](../Images/f38202dab529278a1513c549dc455d0e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:30:46.903

没有我能想到的字级冲突解决工具。你总是比较线条。

您可以为您的文件类型编写自定义驱动程序。我相信这是通过 git 属性完成的。如果合并是非快进合并，您可以在这里做任何您喜欢的事情。

# c - 懒于解析数字的 JSON 解析器？

> ID：10709728
> 
> 赞同：1
> 
> 时间：2012-05-22T20:31:41.683
> 
> 标签：c, json

任何人都知道基于 C 的 JSON 解析器，它允许我访问用于数字字段的字符串表示形式？我的意思的例子：

```
json_t * dist = json_object_get(coord, "accuracy");
snprintf(dataOut->distance, MAX_COORD_LEN, "%f", json_number_value(dist)); 
```

这是愚蠢且难以编写单元测试的。我宁愿简单地调用`json_string_value(dist)`并准确获取该号码的字符串。我更希望它不会费心将该字符串转换为数字。这样，当我为我的例程提供一个包含“54.6045”的测试字符串时，我会得到“54.6045”而不是一些填充或舍入的值......而且我不需要解析这个数字，因为我永远不会去将其用作一个。

据我所知，没有这样的事情......在我看来这很愚蠢。上面的示例来自 Jansson，使用字符串值函数返回 null。

我真的不想因为这个而不必自己写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:58:56.340

In case you didn't already know this, [http://www.json.org/](http://www.json.org/) maintains a list of JSON libraries written in a wide variety of languages, including 12 of them in C.

I'm using [jsmn](https://bitbucket.org/zserge/jsmn/wiki/Home) for a resource-constrained, embedded platform. All it does is tokenize JSON strings, so you could get what you need from that library, but you would need to construct a little more logic around it to do anything useful.

Similarly, you could probably adapt JSON_checker to do what you want.

If you can't find one that does what you want, it's not that hard to parse yourself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T13:25:28.440

您可以使用[https://github.com/cesanta/frozen](https://github.com/cesanta/frozen)

自述文件中有一个示例，可以准确显示您的要求，这是一个简短版本：

```
static const char *str = " { foo: { bar: [ 80, 443 ], baz: 1.2e-21 } } ";
struct json_token tokens[50];
int size = sizeof(tokens) / sizeof(tokens[0]);
const struct json_token *tok = NULL;

parse_json(str, strlen(str), tokens, size);
tok = find_json_token(tokens, "foo.bar[1]");
printf("My number is: [%.*s]\n", tok->len, tok->ptr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-23T21:44:45.367

Tiny-json 是一个 C 解析器，它允许您以最简单的方式访问数字字段的字符串表示形式。只需请求一个 JSON 属性，它就会返回一个指向以空值结尾的指针。 [https://github.com/rafagafe/tiny-json](https://github.com/rafagafe/tiny-json)

```
#include <stdio.h>
#include "tiny-json.h"

int main( int argc, char** argv ) {

    char str[] = "{\"accuracy\":654,\"real\":2.54e-3}";

    // In the example only 3 is needed. For root and two fields.
    json_t mem[ 3 ];

    json_t const* root = json_create( str, mem, sizeof mem / sizeof *mem );
    if ( !root ) {
        fputs( "Cannot create a JSON.\n", stderr );
        return 1;
    }

    { // You can get the primitive values as text format:

        char const* accuracy = json_getPropertyValue( root, "accuracy" );
        if ( !accuracy ) {
            fputs( "The filed 'accuracy' is not found.\n", stderr );
            return 1;
        }
        printf( "The accuracy value: %s\n", accuracy );

        char const* real = json_getPropertyValue( root, "real" );
        if ( !real ) {
            fputs( "The filed 'real' is not found.\n", stderr );
            return 1;
        }
        printf( "The real value: %s\n", real );

    }

    { // You can check the type of a field and get its value in binary format:

        json_t const* accuracy = json_getProperty( root, "accuracy" );
        if ( !accuracy ) {
            fputs( "The filed 'accuracy' is not found.\n", stderr );
            return 1;
        }
        if( json_getType( accuracy ) != JSON_INTEGER ) {
            fputs( "The filed 'accuracy' is not an integer.\n", stderr );
            return 1;
        }
        // Get the value in binary format:
        long long accuracyVal = json_getInteger( accuracy );
        printf( "The accuracy value: %lld\n", accuracyVal );
        // Get the value in text format:
        char const* accuracyTxt = json_getValue( accuracy );
        printf( "The accuracy value: %s\n", accuracyTxt );

        json_t const* real = json_getProperty( root, "real" );
        if ( !accuracy ) {
            fputs( "The filed 'real' is not found.\n", stderr );
            return 1;
        }
        if( json_getType( real ) != JSON_REAL ) {
            fputs( "The filed 'real' is not a real.\n", stderr );
            return 1;
        }
        // Get the value in binary format:
        double realVal = json_getReal( real );
        printf( "The real value: %f\n", realVal );
        // Get the value in text format:
        char const* realTxt = json_getValue( real );
        printf( "The real value: %s\n", realTxt );

    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-22T21:22:38.310

Jansson 是一个很棒的库，如果基于单元测试选择另一个库，那就太可惜了。我不确定你为什么反对解析数值——你能解释一下吗？

就您的代码片段而言，您可能会对从结构中检索数值所涉及的样板文件感到有些恼火。我建议你学会爱上 json_pack / json_unpack 函数。您可以从字典中检索整数元素，如下所示：

```
double d;
json_unpack(coord, "{s:f}", "accuracy", &d); 
```

使用此调用，您不必使用表示浮点值的 (json_t *) 对象。当然，您应该检查 json_unpack() 调用的返回码以了解错误情况。

# android - PhoneGap Android 上的 OpenID

> ID：10709730
> 
> 赞同：1
> 
> 时间：2012-05-22T20:31:53.670
> 
> 标签：android, cordova, upload, openid, photo

您好，我正在 Android 上使用 PhoneGap 开发一个应用程序，并试图让用户能够登录到我的应用程序，然后上传照片并将它们保存到他们的帐户中。我计划使用 OpenID，并找到了一些不错的资源，例如我计划使用的[http://code.google.com/p/jopenid/ 。](http://code.google.com/p/jopenid/)

完成这项工作后，我是否可以访问所有用户的用户名，以便按该名称对照片及其数据进行分类？我将如何获得这些信息？

谢谢！

# javascript - JavaScript 中的 XML 清理和反向饱和

> ID：10709731
> 
> 赞同：0
> 
> 时间：2012-05-22T20:32:03.453
> 
> 标签：javascript

这可能是一个非常简单的问题，但我花了几个小时寻找一个令人满意的答案，却没有找到任何答案：

我从用户那里得到一个字符串，但我想清理并在警报中显示它。我能想到的最好的方法是编写以下函数：

```
/**
 * This function replaces XML character entities. '&', '<' and '>' with '&amp;', '&lt;' and '&gt;' respectively.
 */
function sanitize ( str ) {
    if ( !str ) {
        return str;
    }
    return str.replace( '&', '&amp;' ).replace( '<', '&lt;').replace( '>', '&gt;');
} 
```

有用。但问题是：

**Javascript 中没有任何标准函数可以更有效地或本机地清理字符串吗？**（我担心 Chrome 和 Firefox）

注意：我已经搜索过 StackOverflow 并且像[这样](https://stackoverflow.com/questions/9164164/how-to-escape-or-replace-in-xml-file-using-jquery)的线程不是我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:36:05.773

escape 和 unescape 会帮助你吗？

```
return escape(str); 
```

# php - 带有双下拉列表的php搜索框

> ID：10709733
> 
> 赞同：0
> 
> 时间：2012-05-22T20:32:16.817
> 
> 标签：php

这是更新的代码。

## 分类表

## 编号 | 标题 | 描述 | state_id | city_id |

## 1 福特 | 福特出售| 1 | 1

2 福特 | 福特探险家| 2 | 1

## 状态表

## 编号 | 姓名 |

1 德克萨斯州 2 亚利桑那州

城市表

* * *

## 编号 | 姓名 | state_id

1 阿灵顿 1 2 地球 2

执行搜索并打印结果的代码都在这里：

所以这个文件叫做 search.php

```
enter  <?php
   $conn = mysql_connect('localhost', 'root','');
  $db = mysql_select_db('files',$conn);
  $input = $_GET['query'];
  $state = $_POST['state'];
 $city = $_POST['city'];
 if (isset($input) && $input != "" ) {
 $select = "SELECT * FROM classifieds";
 $where = " WHERE (title like '%" . $input . "%'  OR description like '%" . $input .   

 "%')";
if (!empty($city)) {
$select .= " LEFT JOIN city ON classifieds.city_id=city.id";
$where .= " AND city.name = '" . $city . "'";
}
if (!empty($state)) {        
$select .= " LEFT JOIN state ON classifieds.state_id=state.id";
$where .= " AND state.name = '" . $state . "'";
}    
$q = $select . $where . ' ORDER BY date DESC';
$r = mysql_query($q);
$rows = mysql_num_rows($r);
}
echo $rows; ?> Search Results For: <?PHP echo $input; 
if ($rows > 0) {
while ($row = mysql_fetch_array($r, MYSQL_ASSOC)) {
$description = $row['description'];
echo "  <tr  >
<td ><a href='classified-" . $row['adid'] . ".htm' >" . $row['title'] . "</a><br />
 <span><em><a href='category-" . $cat . ".php'>" . $catname . "</a></em><br/>" .    
$description . "...</span></td>
 </tr>
  ";
  }
   }
  ?>
   <form action="search.php" method="get">
   <input type="text" name="query" />
  <input type="submit" name="Submit" value="Search" />
   <select name="state" >
<option value="null"></option>
<?php
//POPULATE DROP DOWN MENU WITH STATES FROM A GIVEN REGION, COUNTRY
$sql = "SELECT id, statename FROM state";
$states = mysql_query($sql,$conn);
while($row = mysql_fetch_array($states))
{
    echo ("<option value=".$row[id]." >$row[statename]</option>");
}
?>
</select>
<select name="city" >
<option value="null"></option>
<?php
$sql = "SELECT id, city FROM city  ";
$cities = mysql_query($sql,$conn);
while($row = mysql_fetch_array($cities))
{
    echo ("<option value=".$row[id].">$row[city]</option>");
}
?>  here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:49:47.113

我想我会分享 Bjauy 给我的解决方案 :)

```
 $select = "SELECT * FROM classifieds";
      $where = " WHERE (title like '%" . $input . "%'   OR description like '%" .  

       $input . "%' )";
          if (!empty($state)) {        

        $where .= " AND state_id = '" . $state . "'";
        }
       if (!empty($city)) {

        $where .= " AND city_id = '" . $city . "'";
       } 
     $query = $select . $where . ' ORDER BY date DESC'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:01:20.180

您基本上需要检查是否`state`和/或`city`已设置（顺便说一句，您已`GET`在表单中设置为方法，但您检查`$_POST`城市和州 - 是否正确？）并将它们相应地添加到 sql 查询中：

```
$select = "SELECT * FROM classifieds";
$where = " WHERE (title like '%" . $input . "%'  OR description like '%" . $input . "%')";

if (!empty($city)) {
    $select .= " LEFT JOIN city ON classifieds.city_id=city.id";
    $where .= " AND city.name = '" . $city . "'";
}

if (!empty($state)) {        
    $select .= " LEFT JOIN state ON classifieds.state_id=state.id";
    $where .= " AND state.name = '" . $state . "'";
}    

$q = $select . $where . ' ORDER BY date DESC'; 
```

注意标题和描述的括号 - 没有它们 OR 将优先于 AND。

作为旁注，您不需要为相同的数据查询数据库两次。

# qt - 通过前景QGraphicsItems对QGraphicsView的背景进行图像过滤

> ID：10709736
> 
> 赞同：0
> 
> 时间：2012-05-22T20:32:32.453
> 
> 标签：qt, qt4, pyqt, pyqt4

我的 QGraphicsView 的背景是通过重载`.drawBackground(...)`和调用来设置的`painter.drawImage(...)`。我继续将前景对象添加到关联的 QGraphicsScene。这些大多是 QGraphicsRectItem 类型。我希望这些前景矩形中的每一个都将图像过滤器应用于它们所覆盖的背景的子图像。

*   这可能吗？
*   如果是这样，我在哪里可以找到一些示例代码来帮助我入门？谷歌搜索往往只找到用于事件过滤的代码。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:57:02.643

If your background is static, you could use this static image in the paintEvents of your (custom) item class. But as far as I know, you can't use Qt's item effects for this but need to implement the filters by your own in the paintEvents. Remember to crop the correct region out of the image for your filter.

There are some cases where you even don't need the background image. If you want to invert, for example, the background image covered by your item, just fill the whole region in the paintEvent of the item but set the composition mode of the painter *before* the drawing appropriately. (See [QPainter::CompositionMode](http://qt-project.org/doc/qt-4.8/qpainter.html#CompositionMode-enum) for the available modes.)

If the background isn't static, it won't be possible without reusing the code of the drawBackground method or drawing the background on an image and then use this image to draw the actual background + for the effects in each item.

For a more specific answer, you should provide more information about the background and filters you want to have for the items.

# c++ - 使用范围守卫作为代码契约

> ID：10709739
> 
> 赞同：2
> 
> 时间：2012-05-22T20:32:49.007
> 
> 标签：c++, code-contracts, design-by-contract

因此，我们正在研究使用范围保护或一些类似机制来确保传入/传出对象的有效性和/或内部状态不变性，类似于 C# 代码合同。

在正常处理过程中出现意外情况/异常导致某些对象处于不一致状态的特定情况下，我们可以/应该使用什么机制来回避范围保护将抱怨的事实当我们跳出函数？

这是一些示例伪代码来说明我的观点：

```
struct IObjectValidator;

struct ObjectValidatorScopeGuard
{
  ObjectValidatorScopeGuard(IObjectValidator * pObj) 
    : m_ptr(pObj) 
  {
    Assert(!m_ptr || m_ptr->isValid());
  }

  ~ObjectValidatorScopeGuard()
  {
    Assert(!m_ptr || m_ptr->isValid());
  }
  private:
    IObjectValidtor * m_ptr;
};

int SomeComponent::CriticalMethod(const ThingA& in, ThingB& inout, ThingC * out)
{
  ObjectValidatorScopeGuard sg1(static_cast<IObjectValidator *>(&in));   
  ObjectValidatorScopeGuard sg2(static_cast<IObjectValidator *>(&inout));
  ObjectValidatorScopeGuard sg3(static_cast<IObjectValidator *>(out));

  // create out
  try
  {
     out = new ThingC();
     out->mergeFrom(inout, out); // (1)
  }
  catch (const EverythingHasGoneHorriblyWrongException& ex)
  {
     // (2) out and inout not guaranteed valid here..
  }
  return 0;
} 
```

因此，如果 (1) 中出现问题导致“out”或“inout”在点 (2) 处于错误状态，则范围保护 sg2/sg3 将抛出异常......并且这些异常可能会掩盖真正的原因。

是否有任何模式/约定可以处理这种情况？我们是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T20:41:17.317

如果对象验证器保护的代码块出现异常，C++ 运行时将调用`terminate`. 在处理其他异常时，您不能像析构函数那样抛出异常。因此，您不应该从析构函数中抛出异常（[详情请点击此处](http://www.parashift.com/c++-faq-lite/exceptions.html#faq-17.9)）。您应该使用断言或记录错误，而不是抛出异常。

比检查不变量更好的是保证它们永远不会被破坏。这就是所谓的[异常安全](http://www.boost.org/community/exception_safety.html)。基本的异常安全（保留不变量）通常很容易通过巧妙地重新排序语句和使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)来实现。

异常安全技术示例：

```
class String {
  char *data;

  char *copyData(char const *data) {
    size_t length = strelen(rhs->data);
    char *copy = new char[length];
    memcpy(data, rhs->data, length);
    return data;
  }

public:
  ~String() { delete[] data; }

  // Never throws
  void swap(String &rhs) { std::swap(data, rhs->data); }

  // Constructor, Copy constructor, etc.
};

// No exception safety! Unusable!
String &String::operator = (String const &rhs) {
  if(&rhs == this) return *this;

  delete[] data;
  data = copyData(rhs->data); // May throw
}

// Weak exception safety
String &String::operator = (String const &rhs) {
  if(&rhs == this) return *this;

  delete[] data;
  data = 0; // Enforce valid state
  data = copyData(rhs->data); // May throw
}

// Strong safety 1 - Copy&Swap with explicit copy
String &String::operator = (String const &rhs) {
  String copy(rhs);// This may throw
  swap(copy);// Non-throwing member swap
  return *this;
}

// Strong safety 2 - Copy&Swap with pass by value
String &String::operator = (String rhs) {
  swap(rhs);// Non-throwing member swap
  return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:06:42.903

将断言放在范围保护中很有趣。这不是通常的用例，但提高其覆盖率并不是一个坏主意。

请注意，当您已经在处理一个异常时，您不能再抛出另一个异常。因此`in`，`out`, 或`inout`不能委托给其他地方的问题，您需要立即处理。

如果您只想在断言被违反时打印一条调试消息（预期的行为`Assert`），那么只需打印该消息并继续您的方式……不要搞乱异常。

如果`Assert`应该绑定到更大的异常处理机制，那么异常对象应该具有适应`Assert`实际产生的任何内容的结构。*但是*将该状态放入适当的异常对象中并非易事。`Assert`在堆栈展开期间调用，在处理异常之前，在它可以被重新抛出 ie ( `try { throw; } catch ( structured_e & ) {}`) 访问之前。您需要一个线程局部变量来存储当前的结构化异常，由`structured_e::structured_e()`.

长话短说，我的建议是提供一个单独`WeakAssert`的用于析构函数和范围保护，它不会引发异常。

另请参阅[Herb Sutter](http://www.gotw.ca/gotw/047.htm)关于组合异常和析构函数时为什么不聪明的文章。

# amazon-ec2 - 将 Dreamweaver 连接到 EC2 实例托管网站

> ID：10709741
> 
> 赞同：0
> 
> 时间：2012-05-22T20:32:59.303
> 
> 标签：amazon-ec2, dreamweaver

我对 Dreamweaver 还很陌生，正在测试试用软件。我在 EC2 方面拥有不错的经验，因为我在那里托管了一个网站。我之前使用 Skybound.ca 的 Stylizer 应用程序连接到我的站点并编辑 CSS 并将其存储到我的计算机上，然后构建站点并将其放回服务器上。这在很长一段时间内都运行良好，但我已经过时了 Stylizer 应用程序。我可以使用 Dreamweaver 应用程序“查看”EC2 上的托管站点并将 css 编辑为本地副本吗？似乎有一种连接到站点的扭曲方式，但它更像是编辑本地站点上传到远程服务器类型的范例，而不是我使用 Stylizer 所做的。谁能向我指出如何使用 Dreamweaver 的 Stylizer 方式？

我的问题的第二部分是，Dreamweaver 连接到 EC2 实例，前提是提供了用户名和密码。选项范围从 FTP、SFTP 到本地网络。EC2 实例使用在使用 ssh 或 scp 连接时提供的公钥文件，并且不涉及密码。我将我的 root 帐户更改为设置密码并尝试连接 Dreamweaver，但无法连接。我担心对实例上的 ssh 文件进行任何更改，因为我担心我的错误会使我失去对实例的所有访问权限。有没有可以将 Dreamweaver 连接到该站点的好方法？

任何想法表示赞赏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:49:26.483

我没有使用 Stylizer 的经验，但就像你说的那样，也许是时候继续前进了。Dreamweaver 对用户非常友好，我敢打赌，您在 Dreamweaver 中将比在 Stylizer 中做的更多。话虽如此，Dreamweaver 显然不使用 SSH 密钥对，但我听说有一种解决方法是使用“MindTerm”FTP 客户端。您必须创建一个“FTP-SFTP 网桥”或其他任何名称。如果您有兴趣，请查看[此人](http://lalor.net/2008/12/dreamweaver-ssh-connections/)关于如何操作的说明。完成此操作后，您应该能够与 Dreamweaver 连接。是的，拥有所有 .html、.css 等文件的本地副本是个好主意。这样，您就可以在“上线”之前进行测试。和你'

**更新：**

因此，实际上，您可以尝试在*不*使用 ssh 密钥/对的服务器上“添加新用户”，而不是使用 MindTerm 方法连接 Dreamweaver。如果你愿意，我会解释更多。但是请查看[此页面的开头](http://utkarshsengar.com/2011/01/manage-multiple-accounts-on-1-amazon-ec2-instance/)以了解如何添加用户。并在[此处查看响应](https://forums.aws.amazon.com/message.jspa?messageID=249499#249499)，了解如何使用`PasswordAuthentication yes`命令“进入”没有 ssh 密钥的服务器。

# c# - 小型 Web 应用，动态添加中继器网格项

> ID：10709742
> 
> 赞同：0
> 
> 时间：2012-05-22T20:33:05.863
> 
> 标签：c#, asp.net, sql, subsonic, repeater

```
private void BindGridToppings()
    {

    } 
```

这是来自asp页面的gridview

```
<asp:GridView ID="gridv" runat="server" AutoGenerateColumns="false" EnableModelValidation="true" OnRowDataBound="Pizzas_RowBound">
    <Columns>
        <asp:TemplateField HeaderText="Edit">
            <ItemTemplate>
                <asp:ImageButton ImageUrl="~/images/edit.png" ID="btnEditPizza" runat="server" RowIndex='<%# Container.DisplayIndex %>' onClick="Pizzas_RowEditing" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Delete">
            <ItemTemplate>
                <asp:ImageButton ImageUrl="~/images/del.png" ID="btnDeletePizza" runat="server" RowIndex='<%# Container.DisplayIndex %>' OnClick="Pizzas_RowDeleting" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField  DataField="Name" HeaderText="Name" SortExpression="Name" />
        <asp:TemplateField HeaderText="Pizza ID" >
            <ItemTemplate>
                <asp:Label ID="lblID" runat="server" Text='<%#DataBinder.Eval(Container.DataItem, "ID").ToString() %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Crust">
            <ItemTemplate>
                <asp:Label ID="lblCrust" runat="server" Text='<%#GetNameByLookUpID(DataBinder.Eval(Container.DataItem, "Crust").ToString()) %>'>            </asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Cheese">
            <ItemTemplate>
                <asp:Label ID="lblCheese" runat="server" Text='<%#GetNameByLookUpID(DataBinder.Eval(Container.DataItem ,"Cheese").ToString()) %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
        <asp:BoundField DataField="Cost" HeaderText="Cost" SortExpression="Cost" DataFormatString="{0:C}" />
        <asp:TemplateField HeaderText="Toppings">
            <ItemTemplate>
                <asp:Repeater ID="rptList" Runat="server">                            
                </asp:Repeater>
            </ItemTemplate>                
        </asp:TemplateField>
    </Columns>                
</asp:GridView> 
```

使用 SQL 和 SubSonic 作为后端，我两周前才开始使用数据库进行编程。所以访问它对我来说仍然是新的。

正如编译器告诉我的那样，我的 DB.Where...... 调用在 BindGridToppings 函数中的格式不正确。或者，当我尝试 foreach 循环和 .items.add 时，我的编译器告诉我，亚音速查询不是可以交互的类

关于如何绑定这个中继器的任何建议都会很可爱。

谢谢， 麦凯尔贝尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:22:40.917

我不太明白你在说什么...

> 正如编译器告诉我的那样，我的 DB.Where...... 调用在 BindGridToppings 函数中的格式不正确。或者，当我尝试 foreach 循环和 .items.add 时，我的编译器告诉我，亚音速查询不是可以交互的类

我看没有来电`BindGridToppings()`？您是在尝试解决那些编译器错误（如果是这样，我们需要更多关于这些错误的信息），还是在 GridView 中为 Repeater 获取正确的绑定技术？

如果您的问题是如何解决在 GridView 中绑定中继器，试试这个。

像这样的 ASPX：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" onrowdatabound="GridView1_RowDataBound">
        <Columns>
            <asp:BoundField HeaderText="Foo1" DataField="Foo1" />
            <asp:TemplateField HeaderText="FooFive">
                <ItemTemplate>
                    <asp:Repeater ID="Repeater1" runat="server">
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Eval("FooFive") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:Repeater>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

像这样的代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        List<object> foo1Objects = new List<object>();
        foo1Objects.Add(new { Foo1 = "Hello" });
        foo1Objects.Add(new { Foo1 = "World" });

        GridView1.DataSource = foo1Objects;
        GridView1.DataBind();
    }

    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        Repeater rep1 = e.Row.FindControl("Repeater1") as Repeater;
        if (rep1 != null)
        {
            List<object> fooFiveObjects = new List<object>();
            fooFiveObjects.Add(new { FooFive = "Apple" });
            fooFiveObjects.Add(new { FooFive = "Orange" });
            fooFiveObjects.Add(new { FooFive = "Banana" });

            rep1.DataSource = fooFiveObjects;
            rep1.DataBind();
        }
    } 
```

我希望您的数据检索和 GridView1 数据绑定的工作方式略有不同，但关键是处理`GridView1_RowDataBound`事件以绑定中继器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:05:58.533

找到了解决办法。

```
 protected void Pizzas_RowBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            int pizzaID = Convert.ToInt32(((Label)e.Row.FindControl("lblID")).Text);
            BulletedList bltTopping = ((BulletedList)e.Row.FindControl("bltTopping"));
            ToppingsCollection toppings = ToppingsMembers.RetriveByPizzaID(pizzaID);
            bltTopping.Items.Clear();
            foreach (Toppings topping in toppings)
            {
            bltTopping.Items.Add(new ListItem(GetNameByLookUpID(topping.ToppingID.ToString())));
        }
    }
} 
```

和

```
 <asp:TemplateField HeaderText="Toppings">
                <ItemTemplate>                
                    <asp:BulletedList ID="bltTopping" Runat="server">                            
                    </asp:BulletedList>
                </ItemTemplate>                
            </asp:TemplateField> 
```

在前面

感谢您的帮助，尽管它使我得到了答案！

# android - GridLayout 没有全屏显示？

> ID：10709745
> 
> 赞同：0
> 
> 时间：2012-05-22T20:33:15.870
> 
> 标签：android, android-layout

我有一个 19 列和 10 行的表格。我在 Gridlayout 上设计了它。最大的单元格有一个 Imagebutton。我可以看到我的所有按钮。但我的表格没有全屏显示。它只占用屏幕的左侧.滚动表我使用了滚动视图和水平滚动视图。但我的表没有完全拉伸。所以，我该怎么办。我必须全屏显示可滚动表格。当我在平板电脑上运行它时，我遇到了这个问题

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
        <GridLayout 
         xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"       
            android:alignmentMode="alignBounds"
            android:columnOrderPreserved="false"
            android:numColumns="auto_fit"
            android:gravity="center"
            android:stretchMode="columnWidth" >

        <ImageView
            android:layout_row="0"
            android:layout_column="0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:id="@+id/block"
            android:src="@drawable/spdf"
             >       
        </ImageView>

       <!-- IMAGE ImageButton FOR Gr1 -->

             <ImageButton 
                android:layout_row="0"
                android:layout_column="1"    
                android:gravity="center"   
                android:background="@drawable/gr1"     
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr1"
                > </ImageButton> 

              <!-- IMAGE ImageButton FOR Gr2 -->

               <ImageButton        
                android:layout_row="0"
                android:layout_column="2"
                android:gravity="center"
                android:background="@drawable/gr2"    
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr2"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr3 -->

               <ImageButton  
                android:layout_row="0"
                android:layout_column="3"
                android:gravity="center"
                android:background="@drawable/gr3"          
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr3"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr4 -->

               <ImageButton
                android:layout_row="0"
                android:layout_column="4"
                android:gravity="center"
                android:background="@drawable/gr4"            
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr4"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr5 -->

               <ImageButton 
                android:layout_row="0"
                android:layout_column="5"
                android:gravity="center"
                android:background="@drawable/gr5"           
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr5"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr6 -->

              <ImageButton  
                android:layout_row="0"
                android:layout_column="6"
                android:gravity="center"
                android:background="@drawable/gr6"          
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr6"
                > </ImageButton>

               <!-- IMAGE ImageButton FOR Gr7 -->

               <ImageButton  
                android:layout_row="0"
                android:layout_column="7"
                android:gravity="center" 
                android:background="@drawable/gr7"         
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr7"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr8 -->

               <ImageButton  
                android:layout_row="0"
                android:layout_column="8"     
                android:gravity="center"
                android:background="@drawable/gr8"     
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr8"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr9 -->

               <ImageButton  
                android:layout_row="0"
                android:layout_column="9"      
                android:gravity="center"
                android:background="@drawable/gr9"    
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr9"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr10 -->

               <ImageButton 
                android:layout_row="0"
                android:layout_column="10" 
                android:gravity="center"   
                android:background="@drawable/gr10"       
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr10"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr11 -->

               <ImageButton    
                android:layout_row="0"
                android:layout_column="11"
                android:gravity="center"
                android:background="@drawable/gr11"        
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr11"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr12 -->

               <ImageButton 
                android:layout_row="0"
                android:layout_column="12"   
                android:gravity="center"    
                android:background="@drawable/gr12"    
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr12"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr13 -->

               <ImageButton
                android:layout_row="0"
                android:layout_column="13"
                android:gravity="center"
                android:background="@drawable/gr13"            
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr13"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr14 -->

               <ImageButton 
                android:layout_row="0"
                android:layout_column="14"
                android:gravity="center"
                android:background="@drawable/gr14"           
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr14"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr15 -->

               <ImageButton  
                android:layout_row="0"
                android:layout_column="15" 
                android:gravity="center"
                android:background="@drawable/gr15"         
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr15"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr16 -->

               <ImageButton 
                android:layout_row="0"
                android:layout_column="16"  
                android:gravity="center"     
                android:background="@drawable/gr16"    
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr16"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr17 -->

              <ImageButton 
                android:layout_row="0"
                android:layout_column="17"
                android:gravity="center"
                android:background="@drawable/gr17"           
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"    
                android:id="@+id/Gr17"
                > </ImageButton>

                <!-- IMAGE ImageButton FOR Gr18 -->

            <ImageButton 
                android:layout_row="0"
                android:layout_column="18"
                android:gravity="center"
                android:background="@drawable/gr18"    
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="1dip"
                android:layout_marginRight="1dip"
                android:layout_marginBottom="1dip"
                android:id="@+id/Gr18"
                ></ImageButton>
            </GridLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:43:12.253

您可以根据您放入的内容来控制行高。由于您的单元格似乎有多个小部件，因此它们可能被包裹在 LinearLayout 或其他东西中。将您设置`LinearLayouts`为某个特定高度，并且行都将是该高度。

就个人而言，我认为如果要在每个单元格的基础上在每个图像的上方和下方放置文本，则应该调整图像的大小。

使用参考[在此处输入链接描述](https://stackoverflow.com/questions/2375962/gridview-row-height/2379461#2379461)

# javascript - 如何防止网站禁用表单自动完成功能？

> ID：10709748
> 
> 赞同：2
> 
> 时间：2012-05-22T20:33:19.680
> 
> 标签：javascript, forms, firefox, passwords

瑞银现在在他们的登录表单中使用自动完成关闭，以防止密码被自动填写。从我的角度来看，这实际上只是一个麻烦。我不需要瑞银为我管理我的安全。

它是在您访问其主要客户端站点时加载的脚本之一中完成的。

所以我的问题是是否有办法阻止网站禁用自动完成功能？这可以用GreekMonkey以某种方式完成吗？

谢谢， D PS 为了避免被教导安全的重要性，让我补充一下，我正在使用 WholeDisk 加密，所以我的机器甚至无法在没有密码的情况下启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:36:59.550

在 URL 栏中输入以下内容（单行）或将其设为书签

```
javascript: function turnOnAutoComplete(tagName) {
                var els = document.getElementsByTagName(tagName);
                for (var i=0; i < els.length; i++) {
                    els[i].removeAttribute("autocomplete");
                }
            }
            turnOnAutoComplete('input');
            turnOnAutoComplete('form'); 
```

例如，请访问[http://www.htmlcodetutorial.com/forms/_INPUT_AUTOCOMPLETE.html](http://www.htmlcodetutorial.com/forms/_INPUT_AUTOCOMPLETE.html)该页面上的输入字段设置为 autocomplete="OFF"，因此您无法获得该字段的自动完成功能。

然后，您可以从 URL 栏中运行上面的脚本，您应该会看到现在将获得自动完成建议，除非您从未填写过带有名称的表单。

# c# - 数据可视化日期时间轴季度格式

> ID：10709752
> 
> 赞同：0
> 
> 时间：2012-05-22T20:33:37.697
> 
> 标签：c#, vb.net, datetime, format, mschart

我正在使用 .NET 数据可视化库来创建一些图表。数据都是基于时间序列的（即，x 轴是日期）。

我知道我可以使用自定义日期和时间格式字符串来格式化 x 轴标签（从[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)格式化），通过

```
AxisX.LabelStyle.Format = "yyyy" 
```

命令。

但是，如果我想通过 .NET 库中未提供的自定义函数来格式化标签怎么办？

更具体地说，是否可以使用日期的季度来格式化 x 轴标签？换句话说：

*   1 月至 3 月：第一季度
*   4-6月：Q2
*   7 月至 9 月：第三季度
*   10 月至 12 月：第四季度

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:52:59.357

创建您自己的函数并返回自定义标签并将它们分别分配给数据点

例如：-

```
string lblText = CustomLabelFunction(Chart1.Series["Default"].Points[0]);
Chart1.Series["Default"].Points[0].AxisLabel = lblText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T10:06:52.013

为了进一步帮助任何人，我更喜欢使用列表并将列表绑定到图表。

```
List<string> xValues = new List<string>() { 
"Jan-Mar: Q1", "Apr-Jun: Q2", "Jul-Sep: Q3", "Oct-Dec: Q4" }; 

List<int> yValues = new List<int>() { 2, 8, 4, 21};

// Assign the data to the chart
Chart1.Series["Default"].Points.DataBindXY(xValues, yValues); 
```

有关信息，这将被覆盖：

```
Chart1.Series["Default"].XValueType = ChartValueType.Date; 
```

# java - JAXB XmlAnyElement 设置命名空间属性

> ID：10709754
> 
> 赞同：7
> 
> 时间：2012-05-22T20:33:56.557
> 
> 标签：java, xml, jaxb, xsd, maven-jaxb2-plugin

我有一个使用 JAXB 注释的简单 Java 类：

```
class Foo {
   @XmlAnyElement(lax=true)
   List<Object> any;
} 
```

这会产生以下架构：

```
<xs:complexType name="foo">
  <xs:sequence>
    <xs:any processContents="lax" maxOccurs="unbounded"/>
  </xs:sequence>
</xs:complexType> 
```

有没有办法为`<any>`元素设置命名空间属性，使其生成如下：

```
<xs:any namespace="##targetNamespace" processContents="lax" maxOccurs="unbounded"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T09:09:17.483

将 package-info.java 文件插入到您的 foo 类包中，其内容如下：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "urn:foo:v1", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package java.ns.foo; 
```

# asp.net-mvc-3 - ASP.NET MVC3 - Html.RenderAction 不工作

> ID：10709756
> 
> 赞同：2
> 
> 时间：2012-05-22T20:34:16.277
> 
> 标签：asp.net-mvc-3

我正在 MVC 应用程序中开发布局页面。布局页面有-页眉-内容-页脚

标头有 ogo、欢迎信息、用户信息和其他几个链接。

我的问题是，我应该将标题设计为部分视图还是使用 Rendoraction 渲染它。部分视图工作正常。但由于这些数据不依赖于页面的其余部分，我想调用一个控制器操作，它返回一个带有自己模型的标题视图。

但 HTML Rendor 操作不起作用。

**_Layout.cshtml**

```
<body>
    <div class="main_page">
        <div id = "header">
            *@Html.Partial("HeaderPartial", @Model)*@
            @Html.Action("Header")
        </div>        
        <div id="body">
            @RenderBody()
        </div>
        <div id="footer">
        </div>
</body> 
```

**家庭控制器**

```
public ActionResult Header()
{
  Var VModel = //Create Model;
  return View(VModel)  
} 
```

**header.cshtml**

```
@model VModel
<div>
</div> 
```

执行处理程序的子请求时出错

> System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:41:42.823

你的`header.cshtml`样子对我来说很罕见，但如果你想让你的标题视图作为部分视图

第一的：

```
Remove the layout using

@{
    Layout = null;
 } 
```

其次要在您的布局上呈现此视图，请使用

```
@Html.Action("Header","Home", new { foo= @someElement}) <-- this element send values to your action 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T20:39:55.057

由于`Html.Action`调用在布局页面中，您必须指定控制器

```
@Html.Action("Header", "SomeController") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T20:40:45.183

如果你想`RenderAction`在 _Layout.cshtml 中这样调用它

```
@{ Html.RenderAction("Header", "Home"); } 
```

# sql - 分析和检查所有数据库数据的最佳方法

> ID：10709759
> 
> 赞同：1
> 
> 时间：2012-05-22T20:34:29.017
> 
> 标签：sql, for-loop, sql-server-2008-r2, null

我们的一位客户想要检查每个表中的每个数据库记录。问题是，我们的数据库目前有几十个表（50多个），每个表已经有数千条记录。

我们的客户想要做的基本检查是检查每个表的哪些列具有空值。我们的客户假设如果平台用户只填写基本输入，这可能意味着用户没有充分利用平台中的可用输入。

满足此要求的最佳方法是什么？

我已经考虑过在统计上这样做：

*   Table1 有 30 条记录，其中包含以下空列（Column1、Column2、Column3）
*   30% 的数据库表有空值记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:23:03.780

我知道这并没有真正回答您提出的问题，但我认为仅检查“null”是要求的开始，但不太可能是结束。

在我使用大量数据完成的大多数项目中，我们最终构建了一个验证框架，该框架具有每个表的业务逻辑以及每个表中的每个字段。

例如，我们发现很多记录都包含虚假的电子邮件地址，因此我们编写了一个脚本来验证它们（最初很简单，检查域是否存在，并且不是“test.com”、“aaa.com”之一”、“qwerty.com”等）。我们还意识到我们收到了伪造的电话号码，因此我们检查了电话号码是否与明显虚构的电话号码相匹配 (123-456789)。

这是一个痛苦的背后，但如果企业想要了解数据的质量，这是唯一的方法。

我们最终编写了几十个小 SQL 脚本，每个脚本都吐出一个“可疑”记录列表，以及怀疑它们的原因。它并不漂亮，但它易于扩展、易于运行，并为企业提供了足够的信息来做出决策。

# oop - 告诉，不要问和单一职责 - 在课堂上用数据做新事物

> ID：10709763
> 
> 赞同：18
> 
> 时间：2012-05-22T20:34:43.713
> 
> 标签：oop, single-responsibility-principle, tell-dont-ask

我有一个案例，“告诉，不要问”似乎与“单一责任”原则相冲突。我已经查看了有关该主题的其他讨论，但尚未能够为这种情况制定最合适的面向对象方法。

我有一个程序可以读取和操作来自各种来源的数据集合。我创建了一个类来保存和操作数据（“DataSet”类）。它包括对数据集执行各种操作的方法，例如比较两个数据集以生成包含差异的新数据集，以及将数据集写入文件。

我现在想对数据集执行一些分析并将结果输出到报告中。我第一次尝试对此进行编码询问数据集以从中提取信息，然后构建报告，但这似乎违背了“告诉，不要问”的原则。那么：我是否应该将分析方法放在 DataSet 类中并告诉数据集进行自我分析并生成报告？这是否违反了单一职责原则？如果我想在将来执行其他类型的分析怎么办 - DataSet 类可能会变得非常臃肿，其中包含许多与其核心目的无关的不同分析例程。

谁能在这里建议最好的方法？是否有解决此问题的特定设计模式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-06-05T15:36:44.517

每当您设计软件时，您总是必须平衡不同的原则，因为其中许多是相互冲突的。例如，DRY（不要重复自己）原则经常与单一职责原则相冲突，特别是当两件事做相似但不完全相同的事情时。

很多时候，你必须决定哪个原则更重要，并强调那个原则而不是另一个原则（尽管你应该尽可能多地坚持）。很多时候，原则是一起工作的，有时它们会相互矛盾。

在这种情况下，Tell Don't Ask 与其他原则一起使用，例如[Demeter 定律](http://en.wikipedia.org/wiki/Law_of_Demeter)（尽管它的名称仍然是软件的原则，更好地描述为最少知识原则）。

LoD 告诉我们的是一个对象的方法应该只调用其他方法

*   就其本身
*   在作为参数传递给它的对象上
*   使用参数传递的对象创建/实例化的任何对象
*   对象直接组件对象
*   或者一个全局变量

没有具体说，但我觉得选择调用方法的优先顺序也应该是这个顺序，全局变量是最后的手段。但是，这既不是这里也不是那里。

因此，如果我们将 Tell, Don't Ask 与 LoD 结合使用，那么将对象传递给另一个对象进行“询问”是完全可以的。意思是，您有一个 Analysis 对象，您“告诉”它做某事，将 DataSet 对象作为参数传递。这就是遵守 TDA。在 Analysis 对象的方法中，您仅通过访问“亲密朋友”数据来遵守 LoD。

这也符合 SRP，因为您的 DataSet 仍然只是一个 DataSet 而您的 Analysis 对象是一个 Analysis 对象。

这里的关键是这些原则通常是“相对论的”。这意味着，从获取数据并想要执行分析的父对象的角度来看，您是在“告诉”分析对象做某事。

TDA 的目的是您的父代码不应查询您的 DataSet 的状态，然后根据它做出决定。相反，它应该将对象传递给其他对象并让这些对象执行它们的职责，这可能包括查询这些对象的状态，但这没关系，因为这是在它们的职责范围内。

此处进一步参考：

[http://pragprog.com/articles/tell-dont-ask](http://pragprog.com/articles/tell-dont-ask)

编辑：

如果您想要更权威的来源，没有人比 Martin Fowler 本人更好（阅读到最后，您会找到此评论）

[http://martinfowler.com/bliki/TellDontAsk.html](http://martinfowler.com/bliki/TellDontAsk.html)

> 但就个人而言，我不使用告诉-不要-问。我确实希望将数据和行为放在一起，这通常会导致类似的结果。我发现tell-dont-ask 令人不安的一件事是，我看到它鼓励人们成为GetterEradicators，寻求摆脱所有查询方法。但是有时对象通过提供信息来有效地协作。一个很好的例子是接受输入信息并对其进行转换以简化其客户端的对象，例如使用 EmbeddedDocument。我已经看到代码陷入了只告诉适当负责的查询方法在哪里可以简化问题的卷积[1](http://en.wikipedia.org/wiki/Law_of_Demeter)。对我来说，告诉-不要-询问是共同定位行为和数据的垫脚石，但我不认为这是值得强调的一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T15:12:25.690

我将创建一个 DataAnalyzer 对象，该对象的职责是根据对输入数据的一些分析生成报告。

```
interface DataAnalyzer {

    public function analyze($input);

    public function report();
} 
```

现在我们可以进行我们需要的不同类型的分析

```
class AnalyzerOne implements DataAnalyzer {
    //one way of analyzing and reporting
}

class AnalyzerTwo implements DataAnalyzer {
   //other way of analyzing and reporting
} 
```

我可以让我的 DataSet 对象使用一些输入填充分析器以进行分析，然后将报告委托给它。

```
class DataSet {

    private $data;

    //... other methods

    public function report(DataAnalyzer $analyzer) {
        //prepare input for the analyzer from the current state
        $analyzer->analyze($input);
        return $analyzer->report();
    }

} 
```

最后客户看起来像这样

```
$dataSet = new DataSet();
//...

$firstReport = $dataSet->report(new AnalyzerOne());
$secondReport = $dataSet->report(new AnalyzerTwo()); 
```

所以每个对象负责单独的任务，dataSet 做自己的业务，analyzer 负责报告。但是，我们确实告诉 DataSet 使用分析器来生成报告。DataSet 然后告诉分析器使用什么样的输入并返回报告。

当然这不是唯一的方法，但总的来说，有了这么多信息，我认为这是正确的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T12:39:41.777

可能一个很简单的继承应用就可以解决你的问题。

因此，您创建了一个 Dataset 的子类来执行分析。将来如果需要，您可以创建另一个子类来执行该分析。

这里的主要好处是子类继承数据集，内部，因此它们来自同一家族并且可以访问数据数据集。

我可以给出一些代码示例。但让我们先看看这里有什么评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:50:05.477

听起来也许 a`ViewModel`是你想要的。您有一个`Model`(the `DataSet`)，它负责维护数据的状态以及该数据所代表的内容。您有一个`View`(the `Report`)，它负责向用户显示各种数据，但您想将其转换`DataSet`为适合查看的数据表示？

例如，您可以封装准备`DataSet`观看的责任`DataSetViewModel`。它可以在诸如`GetDataInReportFormat()`.

我认为主要的变化是改变你的想法，将准备数据视为一项单独的责任。

# jquery - Django AJAX。dajax 是否仍然可以或更好地立即迁移到 jQuery（2012 年复兴）？

> ID：10709767
> 
> 赞同：4
> 
> 时间：2012-05-22T20:35:02.343
> 
> 标签：jquery, ajax, django, dajaxice

我见过很少有关于这个话题的问题，但都有些老了。

我刚刚实现了我的第一个 dajaxice 环境（使用 chrome 开发），但我仍然随机使用 Firefox 和 IE 出现“出现问题”。确实时不时也用 Chrome。

我无法清楚地弄清楚事件，也是因为不那么明确的消息：“出了点问题”。我确实尝试过重现它，但没有成功。

那么，dajax/dajaxice 是否仍然有效？还是我最好真正专注于 jQuery？

确实存在隐式浏览器问题吗？（环境独立..也许）

浏览器对这两种情况的支持是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T03:00:26.977

你最好的选择是使用 django-tastypie + backbone-tastypie。django-tastypie 提供对您的 Django 模型和数据的 REST API 访问，而主干是一个客户端 javascript 框架，可以轻松与您的 sweetpie 后端交互。

以这种方式做事的缺点是学习曲线很繁重。

更多信息在这里：[http ://readthedocs.org/docs/django-tastypie/en/latest/tools.html?highlight=backbone](http://readthedocs.org/docs/django-tastypie/en/latest/tools.html?highlight=backbone)

我目前有一个在生产中使用 dajaxice 的项目，它获得了大量的用户流量。使用 Dajaxice 的缺点是它已经有一段时间没有维护了。有很多错误（包括性能问题）使其难以在任何获得真实流量的生产系统中使用。就我而言，我发现即使是最简单的 dajaxice 视图也会给我编写的几乎所有代码增加 1000 毫秒（1 秒）的性能损失。

注意：我给 dajaxice 的维护者发了电子邮件，他告诉我他计划在今年晚些时候有更多空闲时间时更新 dajaxice。希望是这样。

使用 dajaxice 的好处是学习曲线低，它有助于保持代码清晰的组织（例如：您将所有 ajax 放入 ajax.py，并且您不必编写太多额外的 JS 代码）。

我的官方建议是：

*   如果这是一个不会看到大量流量的简单应用程序，并且性能并不重要，请使用 Dajaxice。
*   如果您正在开发一个严肃的应用程序并且需要可靠的东西，请使用 django-tastypie +bone-tastypie。

# actionscript-3 - FMIS 在流媒体会话期间显示离开屏幕

> ID：10709772
> 
> 赞同：0
> 
> 时间：2012-05-22T20:35:33.760
> 
> 标签：actionscript-3, flash, apache-flex, flash-media-server

我想知道这是否可能，如果可能的话，可能还有一些代码示例。我试图让演示者在现场演讲期间能够在他不在时按下按钮。然后，此按钮将在客户端触发 jpg 或某种图像，表明他目前不在，并使其静音演示者的麦克风？任何人都知道如何在 FMIS 4 和 AS3 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:50:16.190

是的，这是可行的。有一点代码要写。这是一个分解：

*   演示者客户端创建一个 NetConnection，然后将一个 NetStream 发布到 FMS。
*   当演示者按下离开按钮时：
    1.  演示者的客户端将麦克风增益设置为 0
    2.  Presenter 的客户端使用[NetStream.send()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#send%28%29)向所有订阅客户端发送消息。该消息基本上是一个函数的名称和所有订阅客户端应该执行的一些参数。在这种情况下，该函数将显示/隐藏“离开”图像。
*   然后在演示者返回时执行相反的操作

**[编辑]** 添加一些代码以阐明如何使用`NetStream.send()`：

**演示者代码：**

```
private function onAwayButtonClick(event:Event):void
{
    stream.send("toggleAwayImageDisplay"); // stream is a NetStream you created elsewhere
    mic.gain = 0; // mic is the Microphone you attached to the stream
} 
```

**订阅者代码**

创建 NetStream 时，使用客户端属性，以便它知道在哪里可以找到我们上面指定的函数“toggleAwayImageDisplay”：

```
private function someMethodThatCreatesNetStream(netConnection:NetConnection):void
{
    stream = new NetStream(netConnection);
    // you could use any object here, as long as it has the method(s) you are calling
    stream.client = this;

    // this might be nicer, you can reference functions from any class this way
    // the key in this client object is a function name
    // the value is a reference to the function
    // var client:Object =
    //     { toggleAwayImageDisplay: toggleAwayImageDisplay,
    //       doSomethingElse: anotherObject.doSomethingElse }; 
    // stream.client = client;
    // be careful about memory leaks though :)
}

private function toggleAwayImageDisplay():void
{
   // now show or hide the image
} 
```

# php - Symfony2，如何在表单中添加隐藏的日期类型字段？

> ID：10709773
> 
> 赞同：7
> 
> 时间：2012-05-22T20:35:37.437
> 
> 标签：php, symfony

我正在尝试以下场景：

在**`myclassType`**

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('day','hidden')
        ->add('date', 'hidden' ) 
        ->add('hours')
        ->add('comment','textarea')
    ;
} 
```

在**`myclass`**

```
class myclass
{
    //.. Other stuff

    /**
     * @ORM\Column(type="date")
     *
     * @var date $date
     */
    protected $date;
} 
```

渲染时出现此错误：

```
An exception has been thrown during the rendering of a template ("Catchable Fatal Error:
 Object of class DateTime could not be converted to string in 
C:\wamp\www\PMI_sf2\app\cache\dev\twig\fb\40\8957f80f2358a6f4112c3427b387.php line 684") in
 form_div_layout.html.twig at line 171. 
```

知道如何隐藏日期类型字段！？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T20:59:20.037

Form

```
$builder
    ->add('day','hidden')
    ->add('date',null,array( 'attr'=>array('style'=>'display:none;')) )
... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-13T13:14:32.803

创建一个从 DateTime 对象到字符串的简单 DataTransformer 和一个名为 ie 'hidden_​​datetime' 的新表单类型，它使用新的 DataTransformer 并将隐藏的表单类型作为父级。

```
<?php

namespace YourProject\YourBundle\Form\DataTransformer;

use Symfony\Component\Form\DataTransformerInterface;

class DateTimeToStringTransformer implements DataTransformerInterface
{

    public function __construct()
    {   
    }

    /**
     * @param \DateTime|null $datetime
     * @return string
     */
    public function transform($datetime)
    {
        if (null === $datetime) {
            return '';
        }       
        return $datetime->format('Y-m-d H:i:s');
    }

    /**
     * @param  string $datetimeString
     * @return \DateTime
     */
    public function reverseTransform($datetimeString)
    {
        $datetime = new \DateTime($datetimeString);
        return $datetime;
    }
} 
```

..

```
<?php

namespace YourProject\YourBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Form\FormBuilderInterface;
use YourProject\YourBundle\Form\DataTransformer\DateTimeToStringTransformer;

class HiddenDateTimeType extends AbstractType
{

    public function __construct()
    {
    }

    public function getName()
    {
        return 'hidden_datetime';
    }

    public function getParent()
    {
        return 'hidden';
    }   

     public function buildForm(FormBuilderInterface $builder, array $options)
    {   
        $transformer = new DateTimeToStringTransformer();
        $builder->addModelTransformer($transformer);
    }   

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        parent::setDefaultOptions($resolver);   
        $resolver->setDefaults(array(
        ));
    }    
} 
```

在 services.yml 中将新的“hidden_​​datetime”表单类型注册为服务

```
yourproject.hidden_datetime.form.type:
    class: YourProject\YourBundle\Form\Type\HiddenDateTimeType
    tags:
        - { name: form.type, alias: hidden_datetime } 
```

然后可以在您的表单中使用新的 hidden_​​datetime 类型：

// 在我的类类型中

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
            ->add('createdAt','hidden_datetime')
            ->add('comment','textarea')
    ;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-06T09:29:41.750

以前的解决方案都不适用于 Symfony 3.3。我最终创建了一个简单的类型：

```
<?php

namespace <YourProject>\<YourBundle>\Form\Type;

use Symfony\Component\Form\Extension\Core\Type\HiddenType;
use Symfony\Component\Form\DataTransformerInterface;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\Exception\TransformationFailedException;

class HiddenDateTimeType extends HiddenType implements DataTransformerInterface
{
    /**
    * {@inheritdoc}
    */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->addModelTransformer($this);
    }

    /**
    * {@inheritdoc}
    */
    public function transform($data)
    {
        return $data->format("Y-m-d H:i:s");
    }

    /**
    * {@inheritdoc}
    */
    public function reverseTransform($data)
    {
        try {
            return new \DateTime($data);
        } catch (\Exception $e) {
            throw new TransformationFailedException($e->getMessage());
        }
    }

    public function getName()
    {
        return 'hidden_datetime';
    }
} 
```

在您的表单中使用它，如下所示：

```
<?php

namespace <YourProject>\<YourBundle>\Form;

use <YourProject>\<YourBundle>\Form\Type\HiddenDateTimeType;

class ReportType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('creationTime', HiddenDateTimeType::class, array(
                'required' => true,
            ));
    }
} 
```

没有什么可添加的`services.yml`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-11T10:12:32.087

更容易。基于martti解决方案

只需扩展 DateTimeType 并将父级定义为“隐藏”。

```
<?php

namespace YourProject\YourBundle\Form\Type\HiddenDateTimeType

use Symfony\Component\Form\Extension\Core\Type\DateTimeType;

class HiddenDateTimeType extends DateTimeType
{
    public function getName()
    {
        return 'hidden_datetime';
    }

    public function getParent(array $options)
    {
        return 'hidden';
    }
} 
```

将表单类型注册为服务：

```
yourproject.hidden_datetime.form.type:
    class: YourProject\YourBundle\Form\Type\HiddenDateTimeType
    tags:
        - { name: form.type, alias: hidden_datetime } 
```

您将可以完全访问所有特定的 DateTimeType 选项

```
public function buildForm(FormBuilder $builder, array $options)
{

    $builder
        ->add('from' , 'hidden_date', array(
            'widget' => 'single_text',
            'format' => 'Y-m-d',
            'label' => 'popin.from',
            'required' => true
        )); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-25T09:55:46.510

您可以比这更直接地控制表单输出。主题化特定领域非常容易。有两个步骤。您需要确保表单字段期望日期的单个字符串表示。所以将日期小部件设置为`single_text`. 然后覆盖日期字段以输出隐藏字段而不是文本字段。

**形式**

```
$builder->add('date', 'date', array('widget' => 'single_text')); 
```

**枝条**

```
{% form_theme form _self %}

{# Makes all dates hidden, you can also name your field specifically #}
{% block date_row %}
    {{ block('hidden_widget') }} {# This is normally 'field_widget' #}
{% endblock %} 
```

请参阅[http://symfony.com/doc/current/cookbook/form/form_customization.html#form-theming](http://symfony.com/doc/current/cookbook/form/form_customization.html#form-theming)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T20:56:09.710

形式

```
public function buildForm(FormBuilder $builder, array $options){
    $builder
        ->add('day','hidden')
        ->add('date') 
        ->add('hours')
        ->add('comment','textarea');
} 
```

看法：

```
<form action="{{ path('some-save-action') }}" method="post" {{ form_enctype(form) }}>
    <div style="display: none">
         {{ form_row(form.date) }}
    </div>

    {{ form_errors(form) }}
    {{ form_rest(form) }}
    <input type="submit" value="Save" class="button confirm big"/>
</form> 
```

# scala - Scala 将 Seq 转换为 sbt.Project.Setting[_] 的 k, v

> ID：10709775
> 
> 赞同：1
> 
> 时间：2012-05-22T20:35:40.047
> 
> 标签：scala, build, playframework, sbt, seq

Play 2.0 的 Build.sbt 使用拉皮条的项目定义来发挥它的魔力；您可能需要添加的任何其他设置必须以`k := v`时尚的方式手动输入。适用于一般情况，但不适用于特定情况；也就是说，当需要设置一个 sbt-plugin 的设置时，它总是`Seq[Settings[_]]`. 这是一个可以预见的工作示例

```
lazy val main = PlayProject(appName, appVersion, ....).settings(
  version := appVersion
) 
```

现在，如何将 Seq[Settings[_]] 转换为 k,v 对，因此 Play by-name 调用：

```
def apply(...., ...., settings: => Seq[Setting[_]]) 
```

真的有效吗？！！

我已经询问过游戏用户，但祝你好运，那里有一个动物园，框架正在起飞，核心开发人员显然已经在他们的耳朵里......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:46:17.117

这行得通吗？

```
….settings(mySeqOfSettings: _*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T05:12:05.367

我在播放框架和 sbt-buildinfo 插件上遇到了同样的问题。经过大量的反复试验，我最终更喜欢连续两次应用这些设置。我觉得 Build.scala 中发生的事情看起来更明显：http: [//mfizz.com/blog/2013/04/auto-generate-class-file-build-info-play-framework](http://mfizz.com/blog/2013/04/auto-generate-class-file-build-info-play-framework)

# xmpp - 我们如何确定 XMPP 消息何时传递？

> ID：10709776
> 
> 赞同：1
> 
> 时间：2012-05-22T20:35:43.310
> 
> 标签：xmpp, xmppframework

确定 XMPP 服务器是否将消息传递给客户端或客户端是否脱机的最佳方法是什么？

我们需要知道服务器是否能够传递消息，如果不能，请尝试替代路由。我们知道 XMPP 服务器可以存储消息以供以后传递，但想知道在给定的时间段内是否无法传递消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:26:06.600

正好有一个 XMPP 扩展，[XEP-0079: Advanced Message Processing](http://xmpp.org/extensions/xep-0079.html)，但它从未真正获得采用，因为它对于大多数人的目的来说太过分了。这限制了它在一般 XMPP 网络上的用处。

但是，如果您正在运行自己的服务器，或者只与您知道支持 AMP 的服务器进行通信，则可能有一个插件可以为您实现它。Tigase 是我相当肯定支持它的一台服务器。

出于您的目的，您将对“过期”条件以及任何“通知”/“错误”/“删除”操作感兴趣。您可以将多个`<rule/>`元素添加到消息中以执行多个操作。

# android - Android 主屏幕/启动器选择器不显示“默认情况下用于此操作”选项

> ID：10709779
> 
> 赞同：4
> 
> 时间：2012-05-22T20:35:57.210
> 
> 标签：android, homescreen

我正在尝试使用以下意图以编程方式启动主屏幕/启动器选择器对话框：

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
i.addCategory(Intent.CATEGORY_DEFAULT);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

startActivity(Intent.createChooser(i, "Set My HomeScreen as default")); 
```

但不幸的是，显示已安装主屏幕启动器列表的对话框在对话框底部没有“***默认使用此操作”选项。***下图显示了它的外观：

![主屏幕](../Images/a5fc1b988e9c3d2afdc8d0dd6e953801.png)

有趣的是，从上面的选择器对话框中选择了我的主屏幕后，如果我从该屏幕按下主屏幕按钮，Android 会自动显示一个类似的对话框，实际上在对话框底部***默认使用此选项。***这是它的外观：

![主屏幕选择器](../Images/3e2be86187dac02540e74a5bc8ec84a4.png)

我对上面的代码有什么问题一无所知，这一定是我无法发现自己​​的一些愚蠢的错误。

如果任何人都可以提供一些启示，那将有很大的帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:02:20.380

`createChooser()`不会生成“此操作的默认值”复选框。如果您想要该复选框，请将意图传递给`startActivityForResult()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T15:58:34.723

这就是您在 ICS 上的操作方式：

```
final PackageManager packageManager = this.getPackageManager();
ComponentName componentName = new ComponentName(this, MainActivity.class);
packageManager.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_ENABLED, PackageManager.DONT_KILL_APP);

Intent selector = new Intent(Intent.ACTION_MAIN);
selector.addCategory(Intent.CATEGORY_HOME);
startActivity(selector); 
```

# eclipse - Eclipse WTP 中的传递项目依赖项

> ID：10709780
> 
> 赞同：4
> 
> 时间：2012-05-22T20:35:57.833
> 
> 标签：eclipse, eclipse-wtp

我在 Eclipse 3.7.2 中创建了一堆项目。让我们给其中一些命名：

*   W（动态 Web 项目）
*   A（一些图书馆）
*   B（一个有很多常用东西的库，也被其他项目使用）

项目 A 依赖于项目 B，因此 B 在 A 的构建路径中。项目 W 依赖于项目 A，所以我在 W 中添加了 A 作为部署程序集。

当我从 Eclipse 中导出 WAR 时，只有 A 的 JAR 文件被添加到 WEB-INF/lib。Eclipse 显示以下警告：

> 类路径条目 /B 不会被导出或发布。可能会导致运行时 ClassNotFoundExceptions。

警告是正确的。我在运行时得到一个 ClassNotFoundExceptions 。当然，Eclipse 为“将关联的原始类路径条目标记为发布/导出依赖项”的警告提供了快速修复。但是，这并不能解决我的问题。B 仍然没有与 W 一起部署。

我尝试在 A 中手动添加 B 作为部署程序集。这包括 A.jar 中的 B.jar，这并不是我真正想要的，我仍然得到 ClassNotFoundExceptions。

唯一可行的方法是在 W 中手动添加 B 作为部署程序集。Eclipse 仍然显示上面的警告，但运行时异常消失了。

我错过了什么，或者这真的是让它工作的唯一方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T18:26:53.700

为了使 Eclipse 的“Export / Web / WAR File”正常工作，您必须使您的项目“b”出现在“Web App Libraries”容器中。

您可以使用项目属性中的部署组件页面编辑部署配置，并在其中添加您的项目“b”：

![部署组件](../Images/1af7796d0489ecedc9373902a7f46ef3.png)

或者，您可以打开配置文件`/w/.settings/org.eclipse.wst.common.component`并手动添加对项目“b”的引用：

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0">
    <wb-module deploy-name="w">
        <wb-resource deploy-path="/" source-path="/WebContent" tag="defaultRootSource"/>
        <wb-resource deploy-path="/WEB-INF/classes" source-path="/src"/>
        <dependent-module archiveName="a.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/a/a">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <dependent-module archiveName="b.jar" deploy-path="/WEB-INF/lib" handle="module:/resource/b/b">
            <dependency-type>uses</dependency-type>
        </dependent-module>
        <property name="context-root" value="w"/>
        <property name="java-output-path" value="/w/build/classes"/>
    </wb-module>
</project-modules> 
```

完成后，您将在“Web App Libraries”类路径容器中看到项目“b”，导出到 WAR 文件也会将 b.jar 添加到 WEB-INF/lib 中。

# javascript - 什么叫 Javascript？

> ID：10709782
> 
> 赞同：0
> 
> 时间：2012-05-22T20:36:00.933
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap, modal-dialog

我在我的项目中使用[Sass-Bootstrap](https://github.com/thomas-mcdonald/bootstrap-sass) gem，并在我的`application.js`文件中有以下内容。

```
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-scrollspy
//= require bootstrap-modal
//= require bootstrap-dropdown 
//= require_tree 
```

我在我的`application.html.erb`文件中包含以下标记以利用模态功能。

```
<div class="modal" id="loginModal">
          <div class="modal-header">
            <button class="close" data-dismiss="modal">×</button>
            <h3>Sign in</h3>
          </div>
          <div class="modal-body">
            <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name),:html => { :class => 'form-horizontal' }) do |f| %>
                    <%= f.input :email, :required => false, :autofocus => true %>
                    <%= f.input :password, :required => false %>
                    <%= f.input :remember_me, :as => :boolean if devise_mapping.rememberable? %>
                    <%= f.button :submit, "Sign in", :class => 'btn' %>
                <% end %>
          </div>
        </div> 
```

但出于某种原因。即使在任何其他文件中都没有 javascript/coffescript 时，模态也会显示...调用它的是什么？这是默认行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:47:34.460

尝试：

```
<div class="modal hide" id="loginModal"> 
```

# asp.net-mvc - 代码优先：fluent api 会影响 UI 吗？

> ID：10709783
> 
> 赞同：8
> 
> 时间：2012-05-22T20:36:04.043
> 
> 标签：asp.net-mvc, ef-code-first

我正在阅读 Julie Lerman 写的关于 Code First 的书。根据这本书，注释和流利的api给出了相同的结果。一切都取决于开发人员的风格。

我知道注释允许配置代码首先如何生成数据库对象以及 MVC 如何自定义 UI 元素。假设我使用 [Required, MaxLength(50)]。该属性将在数据库中生成一个 NOT NULL，nvarchar (50)。它还将验证该字段的输入。

```
[Required, MaxLength(50)]
public string Name { get; set; } 
```

如果我决定先使用 Fluent API 配置 Code 会怎样。我仍然需要注释来影响 UI 元素还是使用流畅的 API 就足够了？

**编辑**

仅用于 UI 目的的注释（例如 Display）呢？他们有等价物吗？如果没有，我需要使用注释吗？

```
[Display(Name = "Date of Birth")]
public DateTime BirthDate { get; set; } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T21:11:52.967

数据注释是告诉类强制执行某些验证规则的最简单方法。你也可以用 Fluent API 做同样的事情。有些人喜欢通过数据注释来做，有些人喜欢用流畅的 API 来做

**使用数据注释喜欢它的原因**

1) 将有关我的实体的验证信息与实体定义一起保存在一个地方

**喜欢 Fluent API 的原因**

1）保持我的实体干净。它将只有我的财产信息。没有验证信息。干净简单的 POCO。我将`OnModelCreating`在我的数据上下文类中对方法进行验证。

你不能用数据注释的方式做所有的 Fluent API 事情。与 Fluent API 方式（例如：HasMinLength）不存在等效的数据注释属性相同。`HasMinLength`是我们将用于模型验证的东西，这通常在 UI 中是有意义的。

对于 UI 模型验证，您不能单独使用 Fluent API。Fluent API 的主要作用是查看我们编写的 fluent 配置，并在从实体**创建模型（数据库）时采取行动。****请记住，我们正在重写`OnModelCreating`编写流畅 API 配置的方法**。因此，对于（我的 ViewModel 的）UI 验证，如果我想定义与我的数据模型相关的一些东西，例如定义外键或将此实体映射到具有不同名称的表等，我将使用 DataAnnotation 方式并使用流畅的 API。

**编辑：**根据问题编辑，

在这种情况下，您应该使用数据注释。如果你先做代码。您可能还记得该实体将成为您的数据库表（当然您可以告诉 EF 忽略/重命名特定列）。在这种情况下，我会保持`Entities`清洁并创建一个`ViewModel`我将在我的 UI 中使用的。我会添加我`DataAnnotations`的`ViewModel`来处理它。我可能会编写一些映射代码，在必要时将数据从 ViewModel 映射到 Model 和 Model 到 ViewModel。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T21:08:54.913

如果您的实体模型类是您的视图模型类的两倍，并且您使用的是开箱即​​用的默认 DataAnnotationsValidationProvider，那么您将需要模型属性上的 dataannotations 属性来获得验证。

但是，您不应该将实体类加倍为视图模型类。例如，需要在其模型中具有 ReturnUrl 属性的控制器。您不希望在您的实体模型/数据库中使用它。由于 View 模型和 Entity 模型之间存在这样的差异，因此这两个模型在您的应用程序中应该是独立的（但有凝聚力的）层。您可以使用 AutoMapper 之类的库使它们具有凝聚力。

这是我更喜欢 fluent API 的原因之一。如果您坚持使用 fluent API，那么您将永远不会在任何实体模型类或属性上放置任何属性。当需要显示、插入或更新数据时，您只将属性放在视图模型类上。

此外，实体类型上的 [Required] 属性在 SaveChanges 期间执行验证，而视图模型上的 [Required] 属性在模型绑定期间执行验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T21:07:07.133

根据 Julie Lerman 关于 DbContext 的书，您不需要对 Fluent API 配置进行任何额外的注释。Name 属性将由 Validation API 进行验证，就好像它已经配置了数据注释一样。

根据同一本书，MaxLength 和Required 是唯一具有流式API 关系的验证属性。

# iphone - 我在哪里放置委托方法以及如何调用它们？

> ID：10709786
> 
> 赞同：0
> 
> 时间：2012-05-22T20:36:12.860
> 
> 标签：iphone, ios, delegates

作为一名新的 iOS 开发人员，我终于偶然发现了代表。我正在尝试遵循一个教程： http: [//gabriel-tips.blogspot.com/2011/05/input-accessory-view-how-to-add-extra.html](http://gabriel-tips.blogspot.com/2011/05/input-accessory-view-how-to-add-extra.html)，但我很难理解我在哪里我应该放置实际的委托方法。

其次，有人介意提供一个关于如何调用委托方法的简单解释吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:27:40.603

委托只是一个同意为另一个班级工作的班级。委托方法由委托类调用。因此，委托必须提供适当方法的实现。让我们用表格视图制作一个简单的视图控制器。

```
// MyViewController.h
@interface MyViewController : UIViewController <UITableViewDelegate>
@property (nonatomic, retain) UITableView *myTableView;
@end 
```

在 MyViewController.h 文件中，我已将我的视图控制器声明为 UITableViewDelegate 类型的委托（这实际上意味着它实现了 UITableViewDelegate 协议。稍后会详细介绍）。因此，我同意响应对我的视图控制器的请求。请求将来自名为 myTableView 的表视图。然而，仅仅声明我遵守 UITableViewDelegate 并不能使我的视图控制器成为任何事物的代表。我必须直接指定：

```
// MyViewController.m
#import "MyViewController.h"

@implementation MyViewController

- (void)loadView
{
    myTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    myTableView.delegate = self;
    self.view = myTableView;
}

@end 
```

这里我专门设置了 MyViewController 为 myTableView 的代理。现在，每当表视图想要请求其委托做某事时，它都会将该消息发送到我的视图控制器。因此，MyViewController 必须提供适当委托方法的实现：

```
// MyViewController.m
#import "MyViewController.h"

@implementation MyViewController

- (void)loadView
{
    myTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    myTableView.delegate = self;
    self.view = myTableView;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Selected section:%i row:%i", indexPath.section, indexPath.row);
}

@end 
```

在这里，我提供了委托方法 tableView:didSelectRowAtIndexPath: 的实现，myTableView 将在适当的时候调用它（用户选择一行）。

在这里你可以找到 UITableViewDelegate 中定义的所有委托方法。有些是必需的，有些是可选的：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

为了成为一个类的委托，你应该知道你需要为哪些方法提供实现。

如果您想创建自己的委托定义，您将创建一个新协议。您不保留您的代表（请参阅属性声明），因为这会创建一个保留周期：

```
// MyViewController.h
@class MyViewController;

@protocol MyViewControllerDelegate
- (void)viewController:(MyViewController *)viewController didChangeSelection:(NSIndexPath *)newIndexPath;
@end

@interface MyViewController : UIViewController <UITableViewDelegate>
@property (nonatomic, retain) UITableView *myTableView;
@property (nonatomic, assign) id<MyViewControllerDelegate> delegate;
@end 
```

在这里，我们创建了一个新协议。任何想要响应 viewController:didChangeSelection: 消息的类现在都可以这样做。就像上面的表格视图一样，它将委托设置为自身，然后实现该方法。现在您有了委托，您可以在适当的时候调用该方法。

```
// MyViewController.m
#import "MyViewController.h"

@implementation MyViewController

- (void)loadView
{
    myTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    myTableView.delegate = self;
    self.view = myTableView;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Selected section:%i row:%i", indexPath.section, indexPath.row);

    indexPath = [NSIndexPath indexPathForRow:1 inSection:0];
    [self.delegate viewController:self didChangeSelection:indexPath];
}

@end 
```

现在，委托可以接收消息并知道我的视图控制器更改了选择来做它想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:55:34.143

委托模式是一种方便的方式，允许独立控制器之间的通信，允许松散耦合。因此，假设您有这样的模式：

```
 A
       / \
      B   C 
```

A 实例化 B 和 C 的地方。在 A 到 B 和 A 到 C 之间进行通信很容易，但是您将如何在 B 和 C 之间进行通信？B到A？C到A？有几种不同的方法可以做到这一点，例如键值观察或块回调。不过，尽管 Blocks 越来越强大，但委派仍然是最常用的。

在此示例中，对象 A 实例化对象 B 以创建一个对象并用信息填充它。当您想让事情保持松散时，对象 B 如何将新对象传递回 A？那么，通过这9个简单的步骤，你也可以做到！这可能没有意义，但我们将从 ClassB 开始……</p>

```
// ClassB.h

@protocol ClassBDelegate; //(1)

@interface ClassB : NSObject

@property (nonatomic, weak) id<ClassBDelegate>bDelegate; //(2)

-(void)makeNewObjectAndSendBack;

@end

@protocol ClassBDelegate : NSObject //(3)

-(void) classB:(Class B *)theClassB finishedWithObject:(id)finishedObject; //(4)

@end 
```

* * *

```
ClassB.m
@implementation
@synthesize bDelegate = _bDelegate; //(5)

-(void)makeNewObjectAndSendBack {

//something something something
[self.bDelegate classB:self finishedWithObject:newObject]; //(6)

}

@end 
```

1.  定义稍后将建立的协议
2.  设置符合该协议的对象的实例
3.  设置协议
4.  设置用于将完成的对象发送回 A 的方法调用。
5.  合成委托
6.  在你完成你需要做的事情之后，你使用你在 4 中定义的方法将它发送回去

* * *

```
// ClassA.h

@interface ClassA : NSObject <ClassBDelegate> //(7)

@property (nonatomic, strong) ClassB theClassB;

-(void)yourMethodToDoSomething;

@end 
```

* * *

```
ClassA.m
@implementation
@synthesize theClassB = _theClassB; 

-(void)randomMethod {

self.theClassB = [ClassB new];
self.theClassB.bDelegate = self; //(8)
[self.theClassB makeNewObjectAndSendBack];

}

-(void) classB:(Class B *)theClassB finishedWithObject:(id)finishedObject { //(9)
[self doSomethingWithFinishedObject:finishedObject]; //ta-da!
}

@end 
```

7.符合ClassBDelegate协议。这基本上说您将实现协议定义中定义的方法。

8.设置classB对象的委托对象为self！这是至关重要的，经常被跳过。

9.当你取回新对象时，实现委托方法。

所以这个过程，简而言之就是：A实例化B。A将B的委托设置为自己。A告诉B做某事。B 做某事并通过委托方法将对象发回。A拿回来了。

有关更多信息，包括您可以使用协议做什么，请查看：Big Nerd Ranch 谈论协议 [第 1](http://weblog.bignerdranch.com/467-protocols-part-1-why/) [部分第 2](http://weblog.bignerdranch.com/469-protocols-part-2-delegation/) [部分第 3 部分](http://weblog.bignerdranch.com/465-protocols-part-3-adopting-protocols-in-class-extensions-bork/)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:44:17.083

对于什么是代表以及如何使用它们，您似乎有些困惑。这里有两个指向您可能会发现有用的 Apple 文档的链接：[概念性概述](http://developer.apple.com/library/ios/#DOCUMENTATION/General/Conceptual/DevPedia-CocoaCore/Delegation.html)和更[深入的解释](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)。

# php - 正则表达式/PHP 替换任何重复的词组

> ID：10709787
> 
> 赞同：-1
> 
> 时间：2012-05-22T20:36:13.480
> 
> 标签：php, regex

怎么能配

```
$string = "Foo Bar (Any Group - ANY GROUP Baz)"; 
```

应返回为“Foo Bar (Any Group - Baz)”

没有暴力是否可以像这里那样[替换字符串中的重复字符串](https://stackoverflow.com/questions/6781942/replace-repeating-strings-in-a-string)？

编辑：*该组可以由 1-4 个单词组成，而每个单词可以匹配`[A-Za-z0-9\/\(\)]{1,30}` *分隔符始终是`-`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:50:10.950

在允许的“单词”字符列表中留出空格，以下内容适用于您的示例：

```
$result = preg_replace(
    '%
    (                 # Match and capture
     (?:              # the following:...
      [\w/()]{1,30}   # 1-30 "word" characters
      [^\w/()]+       # 1 or more non-word characters
     ){1,4}           # 1 to 4 times
    )                 # End of capturing group 1
    ([ -]*)           # Match any number of intervening characters (space/dash)
    \1                # Match the same as the first group
    %ix',             # Case-insensitive, verbose regex
    '\1\2', $subject); 
```

# windows - 读取关键字的 CMD 控制台输出

> ID：10709793
> 
> 赞同：0
> 
> 时间：2012-05-22T20:36:58.253
> 
> 标签：windows, batch-file, cmd

我有一个`.bat`运行外部控制台程序的简单脚本，完成后会输出几​​行数据。

**外部程序完成后，有没有办法在控制台输出中查找关键字。**

例如：外部程序完成，`.bat`文件查找关键字：success，如果找到，则保存控制台输出，反之，如果关键字为：failed，则`.bat`程序退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:51:24.300

通常通过使用构造直接检查外部进程的[返回码](http://www.robvanderwoude.com/errorlevel.php)[`IF ERRORLEVEL`](http://support.microsoft.com/kb/69576)来检查是否成功：

```
external.exe
IF ERRORLEVEL 4 GOTO error1
IF ERRORLEVEL 3 GOTO error2
IF ERRORLEVEL 2 GOTO error3
IF ERRORLEVEL 1 GOTO error4
REM if you reached this point, external.exe reported success 
```

当然，这取决于外部程序，因此您可能根本无法使用它。在这种情况下，您可以重定向外部程序的输出并使用`find`它来查找它；`find`使用非零（不记得确切）返回码来表示未找到目标字符串。所以你可以写：

```
external.exe | find >nul "success"
IF ERRORLEVEL 1 GOTO notfound
REM if you reached this point, "success" was present in the output 
```

`>nul`重定向确保它实际上`find`不会输出任何匹配的文本，因为这不是您想要做的。

# c# - C# 中的 DLLImport 调用不正确

> ID：10709799
> 
> 赞同：2
> 
> 时间：2012-05-22T20:37:21.907
> 
> 标签：c#, .net, dll, pinvoke

我收到一个 PInvokeStackImbalance：'检测到 PInvokeStackImbalance 消息：对 PInvoke 函数 'ConvertedClass::MapViewOfFile' 的调用使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我对 DLL 的使用相当陌生，今天刚刚完成了一些教程。

任何帮助，将不胜感激。

```
using System.Runtime.InteropServices;     

//dll
[DllImport("kernel32", CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Auto)]

public static extern IntPtr MapViewOfFile(IntPtr hFileMappingObject, FileMapAccessRights dwDesiredAccess, uint dwFileOffsetHigh, uint dwFileOffsetLow, ulong dwNumberOfBytesToMap;)

string szSharedMemory = "FUNKY_BUSINESS";

//other dll call is successful and returns value
IntPtr hMem = OpenFileMapping(FileMapAccessRights.Write, FALSE, szSharedMemory);

///BOOM.. not this one
IntPtr pvHead = MapViewOfFile(hMem, FileMapAccessRights.Write, 0, 0, 0); 
```

编辑：这是一个不好的论点。第 5 个参数应该是 UIntPtr 而不是 ulong。 [这就是我现在的感觉](http://www.quickmeme.com/meme/355ovv/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:40:17.287

最后一个参数是`SIZE_T`。这是无符号的，在 32 位进程中为 32 位，在 64 位进程中为 64 位。所以最好的解决方案是使用`UIntPtr`最终参数。

我会使用以下内容：

```
[DllImport("kernel32")]
public static extern IntPtr MapViewOfFile(
    IntPtr hFileMappingObject,
    FileMapAccessRights dwDesiredAccess, 
    uint dwFileOffsetHigh, 
    uint dwFileOffsetLow, 
    UIntPtr dwNumberOfBytesToMap
); 
```

您的代码使用`ulong`的总是 64 位宽。您的进程是一个 32 位进程，它解释了为什么 P/invoke 编组器检测到堆栈不平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:40:53.657

第 5 个参数应该是 uint，而不是 ulong。

```
public static extern IntPtr MapViewOfFile(IntPtr hFileMappingObject, FileMapAccessRights dwDesiredAccess, uint dwFileOffsetHigh, uint dwFileOffsetLow, uint dwNumberOfBytesToMap;) 
```

对于 P/Invoke，您可以使用 pinvoke.net 中的示例代码。 [http://www.pinvoke.net/default.aspx/kernel32.mapviewofile](http://www.pinvoke.net/default.aspx/kernel32.mapviewoffile)

# java - java比较器，如何按整数排序？

> ID：10709803
> 
> 赞同：48
> 
> 时间：2012-05-22T20:37:41.733
> 
> 标签：java, android, sql-order-by, comparator

我试图在java中学习比较器，我在网上找到了这个很好的例子，我的问题是如何更改此代码，以便宠物名称按年龄和降序排列，以便最老的在前，最年轻的在后？

```
class Dog implements Comparator<Dog>, Comparable<Dog>{
private String name;
private int age;
Dog(){
}

Dog(String n, int a){
  name = n;
  age = a;
}

public String getDogName(){
  return name;
}

public int getDogAge(){
  return age;
}

// Overriding the compareTo method
public int compareTo(Dog d){
  return (this.name).compareTo(d.name);
}

// Overriding the compare method to sort the age 
public int compare(Dog d, Dog d1){
  return d.age - d1.age;
}
}

public class Example{
public static void main(String args[]){
  // Takes a list o Dog objects
  List<Dog> list = new ArrayList<Dog>();

  list.add(new Dog("Shaggy",3));
  list.add(new Dog("Lacy",2));
  list.add(new Dog("Roger",10));
  list.add(new Dog("Tommy",4));
  list.add(new Dog("Tammy",1));
  Collections.sort(list);// Sorts the array list

  for(Dog a: list)//printing the sorted list of names
     System.out.print(a.getDogName() + ", ");

  // Sorts the array list using comparator
  Collections.sort(list, new Dog());
  System.out.println(" ");
  for(Dog a: list)//printing the sorted list of ages
     System.out.print(a.getDogName() +"  : "+
     a.getDogAge() + ", ");
}
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-05-22T20:42:27.303

简单地改变

```
public int compare(Dog d, Dog d1) {
  return d.age - d1.age;
} 
```

至

```
public int compare(Dog d, Dog d1) {
  return d1.age - d.age;
} 
```

如果这是您要查找的内容，则应按年龄的相反顺序对它们进行排序。

**更新：**

@Arian 在他的评论中是正确的，为狗声明比较器的一种公认方法是将其声明为类本身中的公共静态最终字段。

```
class Dog implements Comparable<Dog> {
    private String name;
    private int age;

    public static final Comparator<Dog> DESCENDING_COMPARATOR = new Comparator<Dog>() {
        // Overriding the compare method to sort the age
        public int compare(Dog d, Dog d1) {
            return d.age - d1.age;
        }
    };

    Dog(String n, int a) {
        name = n;
        age = a;
    }

    public String getDogName() {
        return name;
    }

    public int getDogAge() {
        return age;
    }

    // Overriding the compareTo method
    public int compareTo(Dog d) {
        return (this.name).compareTo(d.name);
    }

} 
```

然后，您可以在代码中任何您想比较狗的地方使用它，如下所示：

```
// Sorts the array list using comparator
Collections.sort(list, Dog.DESCENDING_COMPARATOR); 
```

实现 Comparable 时要记住的另一件重要事情是 compareTo 与 equals 一致地执行是很重要的。尽管不是必需的，但如果不这样做可能会导致某些集合出现奇怪的行为，例如 Set 的某些实现。有关实现 compareTo 的合理原则的更多信息，请参阅[这篇](http://www.javapractices.com/topic/TopicAction.do?Id=10)文章。

**更新 2：** 克里斯是对的，此代码容易因年龄的大负值而溢出。在 Java 7 及更高版本中实现此功能的正确方法是`Integer.compare(d.age, d1.age)`代替`d.age - d1.age`.

**更新 3：** 使用 Java 8，您的 Comparator 可以更简洁地编写为：

```
public static final Comparator<Dog> DESCENDING_COMPARATOR = 
    Comparator.comparing(Dog::getDogAge).reversed(); 
```

的语法`Collections.sort`保持不变，但`compare`可以写成

```
public int compare(Dog d, Dog d1) {
    return DESCENDING_COMPARATOR.compare(d, d1);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-05-13T07:49:31.030

```
public class DogAgeComparator implements Comparator<Dog> {
    public int compare(Dog o1, Dog o2) {
        return Integer.compare(o1.getAge(), o2.getId());
    }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-22T20:43:30.357

只需更换：

```
return d.age - d1.age; 
```

经过：

```
return ((Integer)d.age).compareTo(d1.age); 
```

或反转以反转列表：

```
return ((Integer)d1.age).compareTo(d.age); 
```

**编辑：**

修复了“内存问题”。
事实上，更好的解决方案是将类中的`age`字段更改为，因为有很多好处，比如可能性......`Dog``Integer``null`

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-04-19T13:59:22.383

从 Java 8 开始，您可以使用：

```
Comparator.comparingInt(Dog::getDogAge).reversed(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-22T21:03:25.827

一种简单的方法是

```
Comparator<Dog> ageAscendingComp = ...;
Comparator<Dog> ageDescendingComp = Collections.reverseOrder(ageAscendingComp);
// then call the sort method 
```

另一方面，Dog 真的不应该实现`Comparator`. 这意味着你必须做一些奇怪的事情，比如

```
Collections.sort(myList, new Dog("Rex", 4));
// ^-- why is a new dog being made? What are we even sorting by?!
Collections.sort(myList, myList.get(0));
// ^-- or perhaps more confusingly 
```

相反，您应该将比较器作为单独的类。

例如。

```
public class DogAgeComparator implments Comparator<Dog> {
    public int compareTo(Dog d1, Dog d2) {
        return d1.getAge() - d2.getAge();
    }
} 
```

这有一个额外的好处，您可以使用类的名称来说明比较器将如何对列表进行排序。例如。

```
Collections.sort(someDogs, new DogNameComparator());
// now in name ascending order

Collections.sort(someDogs, Collections.reverseOrder(new DogAgeComparator()));
// now in age descending order 
```

你也不应该没有 Dog 工具`Comparable`。该`Comparable`接口用于表示对这些对象（例如数字和字符串）进行排序有一些固有的和自然的方式。现在这不是 Dog 对象的情况，因为有时您可能希望按年龄排序，有时您可能希望按名称排序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-15T23:24:07.210

如果您有权访问 Java 8 Comparable API，`Comparable.comparingToInt()`可能会有所帮助。（请参阅[Java 8 可比文档](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#comparingInt-java.util.function.ToIntFunction-)）。

例如，可以使用以下命令创建按年龄降序对实例`Comparator<Dog>`进行排序：`Dog`

`Comparable.comparingToInt(Dog::getDogAge).reversed();`

该函数将 lambda 映射`T`到`Integer`，并创建一个升序比较器。链式函数`.reversed()`将升序比较器转换为降序比较器。

*注意：虽然这对于大多数版本的 Android 可能没有用，但我在为非 Android Java 应用程序搜索类似信息时遇到了这个问题。我认为这可能对同一地点的其他人有用，看看我最终解决了什么。*

# c - 从 C 中的文件中读取逗号分隔的数字

> ID：10709804
> 
> 赞同：3
> 
> 时间：2012-05-22T20:37:53.067
> 
> 标签：c

我在尝试读取带有逗号分隔数字的文件时遇到问题，我想要一个函数在这样的文件中创建整数数组（不知道数组最初有多少参数）：

```
1,0,3,4,5,2
3,4,2,7,4,10
1,3,0,0,1,2 
```

等等。我想要的结果是

```
int v[]={1,0,3,4,5,2} 
```

对于文件中的每一行（显然每行中的值），所以我可以将此数组添加到矩阵中。我尝试使用 fscanf，但似乎无法让它在每行的末尾停止。我也试过fgets，strtok，和网上找的很多其他建议，但是不知道怎么做！

我在 32 位机器上使用 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:41:58.673

使用以下代码，您将 CSV 存储到多维数组中：

```
/* Preprocessor directives */
#include <stdio.h>
#include <stdlib.h>

#define ARRAYSIZE(x)  (sizeof(x)/sizeof(*(x)))

const char filename[] = "file.csv";
   /*
    * Open the file.
    */
   FILE *file = fopen(filename, "r");
   if ( file )
   {
      int array[10][10];
      size_t i, j, k;
      char buffer[BUFSIZ], *ptr;
      /*
       * Read each line from the file.
       */
      for ( i = 0; fgets(buffer, sizeof buffer, file); ++i )
      {
         /*
          * Parse the comma-separated values from each line into 'array'.
          */
         for ( j = 0, ptr = buffer; j < ARRAYSIZE(*array); ++j, ++ptr )
         {
            array[i][j] = (int)strtol(ptr, &ptr, 10);
         }
      }
      fclose(file); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T22:56:18.437

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    FILE *fp;
    int data,row,col,c,count,inc;
    int *array, capacity=10;
    char ch;
    array=(int*)malloc(sizeof(int)*capacity);
    fp=fopen("data.csv","r");
    row=col=c=count=0;
    while(EOF!=(inc=fscanf(fp,"%d%c", &data, &ch)) && inc == 2){
        ++c;//COLUMN count
        if(capacity==count)
            array=(int*)realloc(array, sizeof(int)*(capacity*=2));
        array[count++] = data;
        if(ch == '\n'){
            ++row;
            if(col == 0){
                col = c;
            } else if(col != c){
                fprintf(stderr, "format error of different Column of Row at %d\n", row);
                goto exit;
            }
            c = 0;
        } else if(ch != ','){
            fprintf(stderr, "format error of different separator(%c) of Row at %d \n", ch, row);
            goto exit;
        }
    }
    {   //check print
        int i,j;
//      int (*matrix)[col]=array;
        for(i=0;i<row;++i){
            for(j=0;j<col;++j)
                printf("%d ", array[i*col + j]);//matrix[i][j]
            printf("\n");
        }
    }
exit:
    fclose(fp);
    free(array);
    return 0;
} 
```

# windows-phone-7 - 在 WP7 应用程序中，有没有办法访问使用手机作为大容量存储设备存储的文件

> ID：10709809
> 
> 赞同：0
> 
> 时间：2012-05-22T20:38:07.850
> 
> 标签：windows-phone-7

如果我在 Windows Phone 7 上存储数据，有没有办法访问以这种方式存储在应用程序中的文件？

更具体地说，此应用程序需要对使用手机作为大容量存储设备存储的数据执行一些处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:53:42.927

您无法直接访问文件系统，因此无法从应用程序中读取这些文件。

# asp.net-mvc-3 - 模板不可用时下划线抛出异常

> ID：10709810
> 
> 赞同：0
> 
> 时间：2012-05-22T20:38:09.173
> 
> 标签：asp.net-mvc-3, backbone.js, underscore.js

我在一个多页面站点上使用下划线和主干，每个页面上有几个下划线模板。在我的主视图（cshtml）上，我加载了一个类似[http://cl.ly/GpFT](http://cl.ly/GpFT)的 javascript 模板，而在第二个视图（cshtml）上，我使用了相同的脚本设置，但缺少 javascript 模板，然后我收到一个错误，例如这个[http://cl.ly/Gnrc](http://cl.ly/Gnrc)

当我缩小我的脚本时，这将导致脚本中止。是否有可能以一种很好的方式解决这个问题，或者我是否需要准确加载每个页面所需的模板和脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:16:25.703

你没有告诉我们你的观点是什么样的，所以我假设你正在做这样的事情：

```
var V = Backbone.View.extend({
    template: _.template($('#some-id').html()),
    //...
}); 
```

并且您的视图在加载它们时会引发 TypeErrors。如果`#some-id`DOM 中没有，那么您会说`_.templates(null)`这没有任何意义。解决此问题的一种简单方法是在视图的构造函数中编译模板：

```
var V = Backbone.View.extend({
    initialize: function() {
        this.template = _.template($('#some-id').html());
        //...
    },
    //...
}); 
```

# jquery - 未显示 JSON 数据

> ID：10709811
> 
> 赞同：0
> 
> 时间：2012-05-22T20:38:26.617
> 
> 标签：jquery, json

我正在使用 csv 文件中的数据来使用 JSON 显示它。我可以在警报中看到它，但在 html 中看不到。另外，我尝试创建一个关联数组以使其更容易通过 Jquery 引用，但它并没有以这种方式传递。

```
 <?php 
 if (($handle = fopen('upload/05-22-2012-1-43-28BEN-new.csv'. '', "r")) !== FALSE) {
       while (($row_array = fgetcsv($handle, 1024, ","))) {
            while ($val != '') {
                foreach ($row_array as $key => $val) {
                        $row_array[] = array_combine($key, trim(str_replace('"', '', $val)));
                        }
                }
            $complete[] = $row_array;
            //print_r($row_array);

            }
            fclose($handle);
        }
        echo json_encode($complete);

 ?> 
```

HTML

```
 <body>    
      <div id="showdata"></div>

 </body> 
```

jQuery

```
 $(document).ready(function(){
    $.getJSON('WF-XML.php', function(data) {
        alert(data); //uncomment this for debug
        //alert (data.item1+" "+data.item2+" "+data.item3); //further debug
        $('#showdata').html(data);
    });
}); 
```

结果

```
 [["11704","1611704","BENV1072"],["11703","1611703","BENV1073"]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:46:24.867

首先，您需要使用 JSON.stringify 对对象进行字符串化，而且 .html() 方法也不会转义字符串 - 尝试使用 .text() 代替。

我为测试创建了一个简单的小提琴 - [http://jsfiddle.net/E9KTy/](http://jsfiddle.net/E9KTy/)

# jquery - 使用 pjax 实现覆盖的最佳方法

> ID：10709813
> 
> 赞同：1
> 
> 时间：2012-05-22T20:38:45.830
> 
> 标签：jquery, overlay, pjax

目前我正在使用 pjax 加载片段并覆盖我网站页面的主页。然后我用 jquery 更改 body 类以允许一些样式更改。这很好，但是浏览器后退按钮不起作用，因为它应该是由于单击 pjax 触发器时触发了主体类更改，因此主体保持了覆盖的类。

当你点击一个项目时，我正在寻找的效果与这个网站非常相似。

[http://www.watsonnyc.com/](http://www.watsonnyc.com/)

显然这是行不通的，所以必须有更好的方法来做到这一点。

这是我的代码示例：

```
$('.back').pjax('.info_overlay', { fragment: '.info_overlay',}).live('click', function(){
    $('body').removeClass("info").addClass("work");
    $('.info_overlay')
    .bind('pjax:start', function() { $(this).fadeOut(duration); })
    .bind('pjax:end', function() { $(this).hide(); });    
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T08:17:28.473

**尝试使用beforeSend**和**complete**属性使其成为简单的 PJAX 请求。

beforeSend属性将在触发 http 请求之前执行**。**在为某个 AJAX/PJAX 事件制作加载器时，我经常使用它。每当用户触发事件（即单击按钮）时，分配给**beforeSend**的函数会隐藏我正在更新的 div 的内容，并在那里放置一个 gif 加载器，从而提供良好的用户体验。

**complete**属性将在请求的页面加载后执行。如果我使用我给出的加载器示例，您可以创建分配给**完整**属性的函数，隐藏加载器图像并使用请求页面中加载的内容更新 div。

这是加载器图像的示例：

```
$.pjax({
    url: 'requested_page.php',
    container: '#updated_div',
    beforeSend: function(){
        $('#loader_place').fadeIn('normal'); // This will fade in a hidden div with fixed centered position
    },
    complete: function(){
        $('#loader_place').fadeOut('normal'); // This will fade out the div and make it invisible again
    }
}); 
```

如果你想做一些更复杂的事情，我建议你阅读[PJAX 文档](https://github.com/defunkt/jquery-pjax/blob/master/README.md)。

# php - PHP：对 XML 的 AJAX 请求

> ID：10709814
> 
> 赞同：1
> 
> 时间：2012-05-22T20:38:57.817
> 
> 标签：php, mysql, xml, ajax, checkbox

我需要帮助来确定我应该如何建立这个非公共网站。基本上，数据库中引用了大约 2000 张图像。每个用户都可以使用复选框选中或取消选中每个图像。某些用户可能选中或未选中不同的图像。

我希望复选框处理对用户特定 XML（从 db 生成的 PHP）的 AJAX 请求，其中包含每个图像条目的布尔变量。

然后 PHP 引用 XML 并突出显示复选框并禁用未选中的框。同样，每个用户对每个图像都有不同的参考。

我不确定以上是否是正确的使用方法。

我希望页面动态加载前 20 张图像，如果复选框被更改，则立即更新和刷新而无需重新加载页面。然后我将分页到下一个 20。

如果我走在正确的轨道上，我将尝试演示并发布更新。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T23:16:23.280

取决于你想怎么做。您还需要复习您的 javascript 以跟踪 on change 事件。如果您首先使用 ajax 引入图像，我将为每个图像创建一个对象并将事件附加到元素。然后单击您可以将 image_id 或您拥有的内容发布到服务器。或者，您可以在复选框/图像上使用属性，例如`data-imageid="1"`

JSON 或 XML，两者都可以工作，这取决于你想如何设计它。虽然根据我的经验，我会改用 JSON。

您将返回的 JSON 数组可能类似于`{1:true,2:false,3:true}`etc，因此对于每个键值对，您可以检查它是否为真或假。

考虑为 javascript 或 jquery 编辑标签，看看是否能得到更好的答案。或者，如果我走在正确的轨道上，我可以进一步详细说明。

# c# - 使用 C# 在字符串中查找文本

> ID：10709821
> 
> 赞同：91
> 
> 时间：2012-05-22T20:39:33.013
> 
> 标签：c#, string, find

如何在字符串中找到给定的文本？之后，我想在它和其他东西之间创建一个新字符串。例如，如果字符串是：

```
This is an example string and my data is here 
```

我想用“我的”和“是”之间的任何内容创建一个字符串，我该怎么做？这是相当伪的，但希望它是有道理的。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-05-22T20:43:14.890

使用此方法：

```
public static string getBetween(string strSource, string strStart, string strEnd)
{
    if (strSource.Contains(strStart) && strSource.Contains(strEnd))
    {
        int Start, End;
        Start = strSource.IndexOf(strStart, 0) + strStart.Length;
        End = strSource.IndexOf(strEnd, Start);
        return strSource.Substring(Start, End - Start);
    }

    return "";
} 
```

如何使用它：

```
string source = "This is an example string and my data is here";
string data = getBetween(source, "my", "is"); 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-08-06T09:51:54.200

这是最简单的方法：

```
if(str.Contains("hello")) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-05-22T20:47:54.043

您可以使用正则表达式：

```
var regex = new Regex(".*my (.*) is.*");
if (regex.IsMatch("This is an example string and my data is here"))
{
    var myCapturedText = regex.Match("This is an example string and my data is here").Groups[1].Value;
    Console.WriteLine("This is my captured text: {0}", myCapturedText);
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-22T20:42:58.930

```
 string string1 = "This is an example string and my data is here";
 string toFind1 = "my";
 string toFind2 = "is";
 int start = string1.IndexOf(toFind1) + toFind1.Length;
 int end = string1.IndexOf(toFind2, start); //Start after the index of 'my' since 'is' appears twice
 string string2 = string1.Substring(start, end - start); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-09T13:26:21.720

这是我使用 Oscar Jara 的函数作为模型的函数。

```
public static string getBetween(string strSource, string strStart, string strEnd) {
   const int kNotFound = -1;

   var startIdx = strSource.IndexOf(strStart);
   if (startIdx != kNotFound) {
      startIdx += strStart.Length;
      var endIdx = strSource.IndexOf(strEnd, startIdx);
      if (endIdx > startIdx) {
         return strSource.Substring(startIdx, endIdx - startIdx);
      }
   }
   return String.Empty;
} 
```

此版本最多对文本进行两次搜索。它避免了 Oscar 版本在搜索仅出现在开始字符串之前的结束字符串时引发的异常，即`getBetween(text, "my", "and");`.

用法是一样的：

```
string text = "This is an example string and my data is here";
string data = getBetween(text, "my", "is"); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-11T06:02:26.937

你可以像这样紧凑地做到这一点：

```
string abc = abc.Replace(abc.Substring(abc.IndexOf("me"), (abc.IndexOf("is", abc.IndexOf("me")) + 1) - abc.IndexOf("size")), string.Empty); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-08-24T01:27:24.977

除了@Prashant 的回答，以上回答都答错了。答案的“替换”功能在哪里？OP 问：“在那之后，我想在它和其他东西之间创建一个新字符串”。

基于@Oscar 的出色回应，我将他的功能扩展为`"Search And Replace"`一体机。

我认为@Prashant 的答案应该是 OP 接受的答案，因为它可以替代。

无论如何，我已经将我的变体称为 - `ReplaceBetween()`。

```
public static string ReplaceBetween(string strSource, string strStart, string strEnd, string strReplace)
{
    int Start, End;
    if (strSource.Contains(strStart) && strSource.Contains(strEnd))
    {
        Start = strSource.IndexOf(strStart, 0) + strStart.Length;
        End = strSource.IndexOf(strEnd, Start);
        string strToReplace = strSource.Substring(Start, End - Start);
        string newString = strSource.Concat(Start,strReplace,End - Start);
        return newString;
    }
    else
    {
        return string.Empty;
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-19T04:41:37.933

```
static void Main(string[] args)
    {

        int f = 0;
        Console.WriteLine("enter the string");
        string s = Console.ReadLine();
        Console.WriteLine("enter the word to be searched");
        string a = Console.ReadLine();
        int l = s.Length;
        int c = a.Length;

        for (int i = 0; i < l; i++)
        {
            if (s[i] == a[0])
            {
                for (int K = i + 1, j = 1; j < c; j++, K++)
                {
                    if (s[K] == a[j])
                    {
                        f++;
                    }
                }
            }
        }
        if (f == c - 1)
        {
            Console.WriteLine("matching");
        }
        else
        {
            Console.WriteLine("not found");
        }
        Console.ReadLine();
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-02T01:17:09.017

```
 string WordInBetween(string sentence, string wordOne, string wordTwo)
        {

            int start = sentence.IndexOf(wordOne) + wordOne.Length + 1;

            int end = sentence.IndexOf(wordTwo) - start - 1;

            return sentence.Substring(start, end);

        } 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-09-30T17:34:37.303

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Threading;
using System.Diagnostics;

namespace oops3
{

    public class Demo
    {

        static void Main(string[] args)
        {
            Console.WriteLine("Enter the string");
            string x = Console.ReadLine();
            Console.WriteLine("enter the string to be searched");
            string SearchText = Console.ReadLine();
            string[] myarr = new string[30];
             myarr = x.Split(' ');
            int i = 0;
            foreach(string s in myarr)
            {
                i = i + 1;
                if (s==SearchText)
                {
                    Console.WriteLine("The string found at position:" + i);

                }

            }
            Console.ReadLine();
        }

    }

        } 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-20T17:47:29.737

这是替换字符串中部分文本的正确方法（基于 Oscar Jara 的 getBetween 方法）：

```
public static string ReplaceTextBetween(string strSource, string strStart, string strEnd, string strReplace)
    {
        int Start, End, strSourceEnd;
        if (strSource.Contains(strStart) && strSource.Contains(strEnd))
        {
            Start = strSource.IndexOf(strStart, 0) + strStart.Length;
            End = strSource.IndexOf(strEnd, Start);
            strSourceEnd = strSource.Length - 1;

            string strToReplace = strSource.Substring(Start, End - Start);
            string newString = string.Concat(strSource.Substring(0, Start), strReplace, strSource.Substring(Start + strToReplace.Length, strSourceEnd - Start));
            return newString;
        }
        else
        {
            return string.Empty;
        }
    } 
```

连接 3个`string.Concat`字符串：

1.  找到要替换的字符串之前的字符串源部分 -`strSource.Substring(0, Start)`
2.  替换字符串 -`strReplace`
3.  找到要替换的字符串之后的字符串源部分 -`strSource.Substring(Start + strToReplace.Length, strSourceEnd - Start)`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-22T20:45:52.703

如果你知道你总是想要“my”和“is”之间的字符串，那么你总是可以执行以下操作：

```
string message = "This is an example string and my data is here";

//Get the string position of the first word and add two (for it's length)
int pos1 = message.IndexOf("my") + 2;

//Get the string position of the next word, starting index being after the first position
int pos2 = message.IndexOf("is", pos1);

//use substring to obtain the information in between and store in a new string
string data = message.Substring(pos1, pos2 - pos1).Trim(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-08T05:42:52.530

I have different approach on ReplaceTextBetween() function.

```
public static string ReplaceTextBetween(this string strSource, string strStart, string strEnd, string strReplace)
        {
            if (strSource.Contains(strStart) && strSource.Contains(strEnd))
            {
                var startIndex = strSource.IndexOf(strStart, 0) + strStart.Length;

                var endIndex = strSource.IndexOf(strEnd, startIndex);

                var strSourceLength = strSource.Length;

                var strToReplace = strSource.Substring(startIndex, endIndex - startIndex);

                var concatStart = startIndex + strToReplace.Length;

                var beforeReplaceStr = strSource.Substring(0, startIndex);

                var afterReplaceStr = strSource.Substring(concatStart, strSourceLength - endIndex);

                return string.Concat(beforeReplaceStr, strReplace, afterReplaceStr);
            }

            return strSource;
        } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-05T08:01:47.080

只需添加以下代码：

> if (string.Contains("search_text")) { MessageBox.Show("Message."); }

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-06T19:06:33.030

先找文本的索引，再找子串

```
 var ind = Directory.GetCurrentDirectory().ToString().IndexOf("TEXT To find");

        string productFolder = Directory.GetCurrentDirectory().ToString().Substring(0, ind); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-07-13T22:30:57.140

在此处正确答案，无需使用任何预定义的方法。

```
 static void WordContainsInString()
    {
        int f = 0;
        Console.WriteLine("Input the string");
        string str = Console.ReadLine();
        Console.WriteLine("Input the word to search");
        string word = Console.ReadLine();
        int l = str.Length;
        int c = word.Length;

        for (int i = 0; i < l; i++)
        {
            if (str[i] == word[0])
            {
                for (int K = i + 1, j = 1; j < c; j++, K++)
                {
                    if (str[K] == word[j])
                    {
                        f++;
                    }
                    else 
                    { 
                        f = 0; 
                    }
                }
            }
        }
        if (f == c - 1)
        {
            Console.WriteLine("matching");
        }
        else
        {
            Console.WriteLine("not found");
        }
        Console.ReadLine();
    } 
```

# heroku - 输入 Heroku 命令后显示确认信息？

> ID：10709822
> 
> 赞同：1
> 
> 时间：2012-05-22T20:39:39.797
> 
> 标签：heroku, implementation, confirmation

我正在使用 Heroku，通常我会执行以下命令：

```
heroku run rake db:reset --app myapp 
```

这会重置我的数据库。我在网上读到 Heroku 不支持所有 rake 命令（包括`db:reset`，但文章可能已经过时了？因为它对我来说很好用）

但是，我有一个生产应用程序和一个临时应用程序，并且担心我的深夜编程，关于我的生产应用程序上的 db:reset 意外命中。

有没有一种方法可以使用以下命令实现预防确认：

```
heroku run rake db:reset --app myapp or heroku run rake db:migrate --app myapp 
```

或者

```
git push production? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:44:59.240

运行任何破坏性命令时要非常小心。只需使用[https://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)以确保如果您不小心删除了数据库，您可以恢复数据。

# xamarin.android - 按钮单击事件在 Monodroid 中不起作用

> ID：10709827
> 
> 赞同：1
> 
> 时间：2012-05-22T20:40:01.437
> 
> 标签：xamarin.android

已解决：最新更新以某种方式解决了问题。

我遇到了一个非常奇怪的问题。每当我单击（点击）我的 Monodroid 应用程序上的按钮时，什么都没有发生！（我只能听到滴答声而没有其他声音）。

让我澄清一下，事情一直进展顺利，但今天我遇到了这个不寻常的问题。以下是代码。

```
 base.OnCreate(bundle);

        SetContentView(Resource.Layout.Main);

        Button button = FindViewById<Button>(Resource.Id.button1);
        ProgressBar progressbar = FindViewById<progressbar>(Resource.Id.progressbar1); 
```

现在我尝试通过以下三种方式触发点击事件，

```
 button.Click +=new EventHandler(button_Click);

       button.Click +=(sender,e)=> {//stuff;};

       button.Click += delegate {//stuff; }; 
```

在所有方法中，如果我更新方法（比如更改按钮的文本），它会起作用，但如果我尝试做其他任何事情，它就不起作用。

我尝试过的在上述处理程序中不起作用：-

```
 Toast.MakeText(this, "blabla", ToastLength.Long);

       progressbar.visibility = viewstates.visible   etc 
```

此按钮单击事件运行良好！即使我有一个应用程序实现了上述任务，但在从 Visual Studio 重新编译并在设备上安装应用程序后，它没有工作。

是的！我已经重新启动了我的 PC、Android 设备，制作了新程序来测试功能，但它没有用！

我已经在模拟器和 Android 设备（Galaxy S2）上尝试了上述方法。我同时使用了 Visual Studio 和 MonoDevelop，得到了相同的结果。请帮忙，这是一个非常奇怪的问题。多年来，我从未遇到过这样的点击事件处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T23:09:30.947

Solved!, the latest update solved the problem.

# ruby-on-rails - 究竟什么是“字符串编程”？

> ID：10709828
> 
> 赞同：0
> 
> 时间：2012-05-22T20:40:12.153
> 
> 标签：ruby-on-rails, ruby, string, solr

这个页面向我保证，如果我使用他们的软件，我就不必这样做：http:
[//sunspot.github.com/](http://sunspot.github.com/)

什么是“字符串编程”？以大量字符串操作为特征的编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:45:30.970

“太阳黑子”与“Solr”接口。

“Solr”是一个开源的全文搜索引擎。

所以我猜*他们*所说的“字符串编程”是指以编程方式进行全文搜索的能力（使用他们的 Sunspot 库和 Ruby-on-Rails 与 Solr 全文搜索引擎对话）。

'希望有帮助

PS：

这里有更多信息：

[http://en.wikipedia.org/wiki/Apache_Solr](http://en.wikipedia.org/wiki/Apache_Solr)

# java - 生产中的网络实用程序错误

> ID：10709832
> 
> 赞同：0
> 
> 时间：2012-05-22T20:40:44.370
> 
> 标签：java, tomcat5.5

今天，当我在生产中启用 webutilities 时，收到了如下错误消息：

> 类：com.googlecode.webutilities.servlets.JSCSSMergeServlet
> linha：com.googlecode.webutilities.servlets.JSCSSMergeServlet.processResources(JSCSSMergeServlet.java:365)
> 线程：http-8443-Processor1240
> Mensagem：无法清除：org.apache.catalina .connector.CoyoteOutputStream@14fb7e73

和

> 类：com.googlecode.webutilities.servlets.JSCSSMergeServlet
> linha：com.googlecode.webutilities.servlets.JSCSSMergeServlet.processResources(JSCSSMergeServlet.java:352)
> 线程：http-8443-Processor877
> Mensagem：读取资源时出错：/jsp/js/插件/jquery/jquery-1.4.4.js

我检查了，这个文件存在。我正在尝试重现这些错误，但不能。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:23:46.657

最后用以下代码重现了这些错误：

```
public static void main(String[] args) throws MalformedURLException {
    URL url = new URL("/jsp/js/jquery-1.4.4.js");

    try {
        URLConnection connection = url.openConnection();
        InputStream stream = connection.getInputStream();

        byte[] b = new byte[100];
        for (int i = 0; i < 100;i++) {
            b[i] = (byte) stream.read();
        }

        System.out.println(new String(b));

        stream.close();

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

该连接如何关闭我可以忽略那些错误...

# validation - 使用 codeigniter 验证表单

> ID：10709835
> 
> 赞同：0
> 
> 时间：2012-05-22T20:40:47.667
> 
> 标签：validation, codeigniter-2

我有以下表格：

```
<label>One</label> 
 Product ID:<input type="text" name="productid[]" value=""> 
 Product Quantity: <input type="text" name="quantity[]" value=""> <br>

<label>Two</label> 
 Product ID:<input type="text" name="productid[]" value=""> 
 Product Quantity: <input type="text" name="quantity[]" value=""> <br>

<label>Three</label> 
 Product ID:<input type="text" name="productid[]" value=""> 
 Product Quantity: <input type="text" name="quantity[]" value=""> <br>

 <!-- there may be more inputs like above (users can create new inputs 
    as many as they want) // I have a jquery function to create new rows-->

  <input type="submit" value="submit"> 
```

`name="productid[]"`现在我的问题是当我输入这样的名称而不是在我的表单中时，如何使用 Codeigniter 验证`name="productid"`表单。

通常我用这种[方式](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)验证我的表单，但这次它不适用于上面的表单。

如何验证它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:50:03.943

你试过[这个](http://codeigniter.com/user_guide/libraries/form_validation.html#arraysasfields)...？指南下面的几行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:51:10.243

您将使用带括号的文字字段名称：

```
$this->form_validation->set_rules('product_id[]', 'Product', 'required');
$this->form_validation->set_rules('quantity[]', 'Quantity', 'required'); 
```

*这将对具有该名称的每个*字段运行验证。如果您只需要验证特定索引，请再次使用文字字段名称（并在 HTML 中指定索引）：

```
// <input name="product_id[3]">
$this->form_validation->set_rules('product_id[3]', 'Product', 'required'); 
```

这一切都在[Codeigniter 的表单验证类的文档中](http://codeigniter.com/user_guide/libraries/form_validation.html#arraysasfields)：

> # 使用数组作为字段名
> 
> 表单验证类支持使用数组作为字段名。考虑这个例子：
> 
> `<input type="text" name="options[]" value="" size="50" />`
> 
> 如果确实使用数组作为字段名称，则必须在需要字段名称的帮助函数中使用 EXACT 数组名称，并将其用作验证规则字段名称。
> 
> 例如，要为上述字段设置规则，您将使用：
> 
> `$this->form_validation->set_rules('options[]', 'Options', 'required');`
> 
> 或者，要显示上述字段的错误，您可以使用：
> 
> `<?php echo form_error('options[]'); ?>`
> 
> 或者重新填充您将使用的字段：
> 
> `<input type="text" name="options[]" value="<?php echo set_value('options[]'); ?>" size="50" />`
> 
> 您也可以使用多维数组作为字段名称。例如：
> 
> `<input type="text" name="options[size]" value="" size="50" />`
> 
> 甚至：
> 
> `<input type="text" name="sports[nba][basketball]" value="" size="50" />`
> 
> 与我们的第一个示例一样，您必须在辅助函数中使用确切的数组名称：
> 
> `<?php echo form_error('sports[nba][basketball]'); ?>`
> 
> 如果您使用具有多个选项的复选框（或其他字段），请不要忘记在每个选项后留下一个空括号，以便将所有选择添加到 POST 数组中：
> 
> `<input type="checkbox" name="options[]" value="red" />
> <input type="checkbox" name="options[]" value="blue" />
> <input type="checkbox" name="options[]" value="green" />`
> 
> 或者，如果您使用多维数组：
> 
> `<input type="checkbox" name="options[color][]" value="red" />
> <input type="checkbox" name="options[color][]" value="blue" />
> <input type="checkbox" name="options[color][]" value="green" />`
> 
> 当您使用辅助函数时，您还将包括括号：
> 
> `<?php echo form_error('options[color][]'); ?>`

# c# - 以这种方式修改列表是不好的做法吗？

> ID：10709836
> 
> 赞同：0
> 
> 时间：2012-05-22T20:40:52.733
> 
> 标签：c#

在A类中（如果列表不为空，将输出什么）：

```
private List<int> _myList = new List<int>
public List<int> MyList {get{return _myList;} set{_myList = value;}} 
```

B类：

```
public bool MyClassBMethod(stuff)
{
     //stuff
     try{
          something
     }
     catch(Exception){
         ClassA.MyList.Add(stuff);
         return false;
     }
     return true;
} 
```

像这样编辑列表是不好的做法吗？或者没关系？

编辑：我只在我的方法需要返回其他内容（布尔、对象、字符串等）时才添加到列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:43:43.820

你通常不应该那样做。

您向类的客户端公开了一个非常大的接口，因此很难测试您的类是否在所有情况下都有效。如果有人在您不期望的情况下删除了值会发生什么？或者，如果他们添加了超出范围的值怎么办？您无法在他们调用您的方法时对其进行验证`List`，因此您的类可能会在稍后的某个时间点突然中断，此时可能难以追踪不良数据的来源。

最好`Add`在你的类上有一个调用列表的方法`Add`，并保持列表私有。然后你可以控制你的客户做什么，只公开他们需要使用的功能（并且你已经测试过）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:47:31.557

一般来说，一个类应该负责管理它自己的内部状态。通过向这样的成员提供完全的公共访问权限，您基本上是在说 A 类正在放弃对其状态部分的责任。它不能对 _myList 包含的内容做出假设，因为任何人都可以随时更改它。

好不好取决于你的意图是什么，但它肯定与解耦和封装的想法背道而驰。同样，是否*要*解耦和封装取决于您。

一个更好的问题是确定 A 类和 B 类之间的哪种解耦对您的设计最有利，然后您就可以决定要公开哪些成员以及如何公开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:43:35.433

这是一种很常见的做法。不那么常见的是公开设置。将其设为私有，在 A 构造函数上初始化列表，一切就绪。

```
public ObservableCollection<int> MyPublicList {get; private set;} 
```

WPF 充满了像这样的声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T20:49:08.507

一如既往，这取决于。如果打算在类之外编辑列表（它是该类接口的一部分）并且允许所有常规列表操作，则可以。如果只允许操作的子集，那么您不应该像这样使用它 - 使用自定义列表（或列表周围的包装器）来强制执行所有约束。例如，如果列表在类外必须是只读的，那么您可以在类外提供[ReadOnlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)包装器。这一切都归结为强制数据完整性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T20:53:15.187

这取决于您是否关心列表是否公开。通过公开和访问公共的、具体的类型，您正在公开实现细节并增加类与其消费者之间的耦合。你也限制`ClassA`了 's 强制数据一致性的机会，因为它的实现细节不再被正确封装。

有时，这是完全可以接受的，有时则不是。

我会说在对象模型愚蠢的情况下这是可以接受的。愚蠢，我的意思是它只包含数据。在将 JSON/XML 解析为对象时经常会发生这种情况——事物的结构是为了反映数据，而行为并不重要，因为它很少。如果您只是在一个小的代码库中破解和/或更改的范围有限，或者涉及的行为很少，那么它也更容易接受。

不过，我通常会避免它。

首先，假设您添加到`ClassA`列表中的项目必须是素数。如果您编写一个`AddItem()`方法，您可以轻松地执行此检查，但如果列表公开，则很难有效地执行此检查。

其次，假设您决定将列表更改为字典。您现在可能会破坏调用代码站点（`ClassB`用于一个），因为它们以前依赖于`ClassA`. 相反，如果您创建了名为`AddItem()`and`RemoveItem()`或类似的方法`ClassA`，`ClassB`则不会关心内部实现是 Set、Dictionary 还是 List 等，也不会在进行更改时中断。

围绕“点入事物”（如`blah.List[3].GetProduct(3).Reviews.First()`）的准则有一个名称：[得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。

得墨忒耳法则的重点是：

> 基本概念是给定对象应尽可能少地假设其他任何事物（包括其子组件）的结构或属性。

您经常需要编写更多代码，但它可以防止更改。

# asp.net - 如何仅为选定行获取 Telerik RadGrid GridClientSelectColumn 的总和聚合？

> ID：10709841
> 
> 赞同：0
> 
> 时间：2012-05-22T20:41:08.190
> 
> 标签：asp.net, asp.net-ajax, telerik, telerik-grid, radgrid

我是 Telerik 库的新手，我的首要任务之一是获取 Telerik RadGrid 的数字列中的值的总数。该列是一个 GridClientSelectColumn。我知道通过设置 Aggregate="Sum"，页脚将读取该列的总和。问题是我只想要所选行的总和。有人可以提供一个演示。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:40:54.420

请检查下面的代码片段。

注意：如果您想通过标签代替 datakey 执行以下操作，请查看[此](http://jayeshgoyani.blogspot.in/2012/05/how-to-access-control-from-itemtemplate.html)链接。

JS代码

```
 <telerik:RadCodeBlock ID="RadCodeBlock" runat="server">
    <script type="text/javascript">
        function RowSelected(sender, args) {

            var grid = $find("<%=RadGrid1.ClientID %>");

            var totalAmount = 0;

            if (grid) {
                var MasterTable = grid.get_masterTableView();
                var Rows = MasterTable.get_dataItems();
                for (var i = 0; i < Rows.length; i++) {
                    var row = Rows[i];
                    if (row.get_selected() == true) {

                        totalAmount = totalAmount + parseFloat(row.getDataKeyValue("ID"));
                    }
                }
            }

            if ($("span[id$='myFooter']").length > 0) {
                $("span[id$='myFooter']").get(0).innerHTML = "sum is : " + totalAmount;
            }
        }
    </script>
</telerik:RadCodeBlock> 
```

.aspx

```
 <telerik:RadGrid ID="RadGrid1" runat="server" AutoGenerateColumns="false" OnNeedDataSource="RadGrid1_NeedDataSource"
        ShowFooter="true" AllowMultiRowSelection="true">
        <MasterTableView ClientDataKeyNames="ID">
            <Columns>
                <telerik:GridClientSelectColumn UniqueName="columnSelect">
                </telerik:GridClientSelectColumn>
                <telerik:GridTemplateColumn DataField="ID" HeaderText="ID" UniqueName="ID">
                    <ItemTemplate>
                        <asp:Label ID="txtID" runat="server" Text='<%# Eval("ID") %>'></asp:Label>
                    </ItemTemplate>
                    <FooterTemplate>
                        <asp:Label ID="myFooter" runat="server" Text="sum is : 0"></asp:Label>
                    </FooterTemplate>
                </telerik:GridTemplateColumn>
            </Columns>
        </MasterTableView>
        <ClientSettings>
            <Selecting AllowRowSelect="true" />
            <ClientEvents OnRowSelected="RowSelected" OnRowDeselected="RowSelected" />
        </ClientSettings>
    </telerik:RadGrid> 
```

.aspx.cs

```
 protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    DateTime dt = DateTime.Now;

    dynamic data = new[] {
            new { ID = 1, Name ="Name_1", customdate=dt,NO = 11.00},
            new { ID = 2, Name = "Name2", customdate=dt,NO = 11.00},
            new { ID = 3, Name = "Name3", customdate=dt,NO = 11.00},
            new { ID = 4, Name = "Name4", customdate=dt,NO = 11.44},
            new { ID = 5, Name = "Name5", customdate=dt,NO = 10.4}
        };

    RadGrid1.DataSource = data;
} 
```

# java - 服务器内存不足会导致 SocketException 文件结束吗？

> ID：10709842
> 
> 赞同：0
> 
> 时间：2012-05-22T20:41:12.667
> 
> 标签：java, spring, sockets

嗨，亲爱的 java 成瘾者社区。

我在 CentOs 虚拟机中遇到了这些异常，可能在低 RAM 的情况下运行，然后我注意到与我的好组件通信所需的其他虚拟机之间的时间没有正确同步......

我想知道，什么时候？为什么 ？如何 ？A SocketException: end of file is generated in a LINUX server...

这些是我的日志：

```
 2012-05-16 13:22:41,863 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.services.RuleSetExecutorImpl][initDatabaseProperties] - Initializing database custom properties.
2012-05-16 13:22:41,864 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.services.RuleSetExecutorImpl][initDatabaseProperties] - Setting NLS_DATE_FORMAT to : DD/MM/YYYY HH24:MI:SS
2012-05-16 13:22:47,096 [Timer-2] ERROR [org.jboss.remoting.transport.socket.SocketClientInvoker][handleException] - Got marshalling exception, exiting
java.net.SocketException: end of file
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:685)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.transport(BisocketClientInvoker.java:458)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:141)
    at org.jboss.remoting.ConnectionValidator.doCheckConnectionWithoutLease(ConnectionValidator.java:828)
    at org.jboss.remoting.ConnectionValidator.run(ConnectionValidator.java:345)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
2012-05-16 13:22:47,288 [Thread-2624] WARN [org.jboss.remoting.Client][removeListener] - unable to remove remote callback handler: Can not get connection to server. Problem establishing socket connection for InvokerLocator [bisocket://ams-dev-bo.swissbytes.ch:4457//?JBM_clientMaxPoolSize=200&clientLeasePeriod=10000&clientSocketClass=org.jboss.jms.client.remoting.ClientSocketWrapper&dataType=jms&failureDisconnectTimeout=0&marshaller=org.jboss.jms.wireformat.JMSWireFormat&socket.check_connection=false&stopLeaseOnFailure=true&timeout=0&unmarshaller=org.jboss.jms.wireformat.JMSWireFormat&useClientConnectionIdentity=true&validatorPingPeriod=10000&validatorPingTimeout=5000]
2012-05-16 13:22:47,329 [Thread-2625] WARN [org.jboss.remoting.Client][removeListener] - unable to remove remote callback handler: Can not get connection to server. Problem establishing socket connection for InvokerLocator [bisocket://ams-dev-bo.swissbytes.ch:4457//?JBM_clientMaxPoolSize=200&clientLeasePeriod=10000&clientSocketClass=org.jboss.jms.client.remoting.ClientSocketWrapper&dataType=jms&failureDisconnectTimeout=0&marshaller=org.jboss.jms.wireformat.JMSWireFormat&socket.check_connection=false&stopLeaseOnFailure=true&timeout=0&unmarshaller=org.jboss.jms.wireformat.JMSWireFormat&useClientConnectionIdentity=true&validatorPingPeriod=10000&validatorPingTimeout=5000]
2012-05-16 13:22:51,146 [Timer-4] WARN [org.jboss.remoting.transport.bisocket.BisocketServerInvoker][run] - org.jboss.remoting.transport.bisocket.BisocketServerInvoker$ControlMonitorTimerTask@7a7385ac: detected failure on control connection Thread[control: Socket[addr=ams-dev-bo.swissbytes.ch/192.168.0.190,port=11641,localport=57623],5,] (5c4o020-jlorp4-h29d35xs-1-h2aawvkq-l2t: requesting new control connection
2012-05-16 13:22:51,159 [controlConnectionRecreate:control: Socket[addr=ams-dev-bo.swissbytes.ch/192.168.0.190,port=11641,localport=57623]] ERROR [org.jboss.remoting.transport.bisocket.BisocketServerInvoker][createControlConnection] - unable to get secondary locator
org.jboss.remoting.CannotConnectException: Can not get connection to server. Problem establishing socket connection for InvokerLocator [bisocket://ams-dev-bo.swissbytes.ch:4457//?JBM_clientMaxPoolSize=200&clientLeasePeriod=10000&clientSocketClass=org.jboss.jms.client.remoting.ClientSocketWrapper&dataType=jms&failureDisconnectTimeout=0&marshaller=org.jboss.jms.wireformat.JMSWireFormat&socket.check_connection=false&stopLeaseOnFailure=true&timeout=0&unmarshaller=org.jboss.jms.wireformat.JMSWireFormat&useClientConnectionIdentity=true&validatorPingPeriod=10000&validatorPingTimeout=5000]
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:613)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.transport(BisocketClientInvoker.java:458)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:141)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.getSecondaryLocator(BisocketClientInvoker.java:640)
    at org.jboss.remoting.transport.bisocket.BisocketServerInvoker.createControlConnection(BisocketServerInvoker.java:230)
    at org.jboss.remoting.transport.bisocket.BisocketServerInvoker$ControlMonitorTimerTask$1.run(BisocketServerInvoker.java:1048)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at org.jboss.remoting.transport.socket.SocketClientInvoker.createSocket(SocketClientInvoker.java:192)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.createSocket(BisocketClientInvoker.java:465)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.getConnection(MicroSocketClientInvoker.java:913)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:602)
    ... 5 more
2012-05-16 13:22:51,161 [controlConnectionRecreate:control: Socket[addr=ams-dev-bo.swissbytes.ch/192.168.0.190,port=11641,localport=57623]] ERROR [org.jboss.remoting.transport.bisocket.BisocketServerInvoker][run] - Unable to recreate control connection: InvokerLocator [null://ams-dev-bo.swissbytes.ch:11641/null]
java.io.IOException: unable to get secondary locator: Can not get connection to server. Problem establishing socket connection for InvokerLocator [bisocket://ams-dev-bo.swissbytes.ch:4457//?JBM_clientMaxPoolSize=200&clientLeasePeriod=10000&clientSocketClass=org.jboss.jms.client.remoting.ClientSocketWrapper&dataType=jms&failureDisconnectTimeout=0&marshaller=org.jboss.jms.wireformat.JMSWireFormat&socket.check_connection=false&stopLeaseOnFailure=true&timeout=0&unmarshaller=org.jboss.jms.wireformat.JMSWireFormat&useClientConnectionIdentity=true&validatorPingPeriod=10000&validatorPingTimeout=5000]
    at org.jboss.remoting.transport.bisocket.BisocketServerInvoker.createControlConnection(BisocketServerInvoker.java:235)
    at org.jboss.remoting.transport.bisocket.BisocketServerInvoker$ControlMonitorTimerTask$1.run(BisocketServerInvoker.java:1048)
2012-05-16 13:22:56,870 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.services.RuleSetExecutorImpl][runFilterRec] - Query for the level[1] was executed.
2012-05-16 13:22:56,871 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.services.RuleSetExecutorImpl][doFilterResultsCotainCipAdress] - doFilterResultsCotainCipAdress() - Searching Cip Address: 1213194
2012-05-16 13:22:56,871 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.services.RuleSetExecutorImpl][runFilterRec] - cipAddress: 1213194 was NOT FOUND in Filter Results
2012-05-16 13:22:56,871 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.services.RuleSetExecutorImpl][runFilterRec] - Current result size is not on filter's range : filter1 => [ 1 , 10 ] vs 0
2012-05-16 13:22:56,871 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.jms.request.SimilarDebtorsProcessor][delegateFixedResult] - Fixed result GET_SIMILAR_DEBTORS  totalSize: 1 -> fixedSize: 1
2012-05-16 13:22:56,872 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.util.ListFragmenter][fragmentList] - Preparing [0] fragments in chunks of size [500]
2012-05-16 13:22:56,872 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.util.ListFragmenter][fragmentList] - List fragment range[0-1]
2012-05-16 13:22:56,872 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.jms.request.SimilarDebtorsProcessor][processFragment] - Sending 'SimilarDebtors' message fragment[0-1]
2012-05-16 13:22:56,980 [jmsContainer-1] ERROR [ch.swissbytes.cipadapter.jms.request.CipAdapterBean][onMessage] - JMSException caused by Message[ID:JBM-5a9ac639-f2a4-436c-8170-37378d8b606b], somenthing is wrong with the communication.
2012-05-16 13:22:56,982 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.jms.request.CipAdapterBean][onMessage] - Queue listener will be stopped.
2012-05-16 13:22:56,983 [jmsContainer-1] INFO [ch.swissbytes.cipadapter.jms.request.CipAdapterBean][stopListener] - Listener successfully stopped
2012-05-16 13:22:56,984 [jmsContainer-1] DEBUG [ch.swissbytes.cipadapter.jms.request.CipAdapterBean][errorTemplateSend] - Trying to send error message to AMS-WA error queue.
2012-05-16 13:22:56,985 [jmsContainer-1] DEBUG [ch.swissbytes.cipadapter.jms.request.CipAdapterBean][errorTemplateSend] - Adapter id: 1
2012-05-16 13:22:57,014 [jmsContainer-1] ERROR [org.jboss.jms.client.container.ClosedInterceptor][invoke] - ClosedInterceptor.ClientSessionDelegate[ioy8-vyl6fa2h-1-hbl1g92h-qrmrca-a50o4c5]: method getTransacted() did not go through, the interceptor is CLOSED
2012-05-16 13:22:57,016 [jmsContainer-1] ERROR [org.springframework.jms.listener.DefaultMessageListenerContainer][rollbackOnExceptionIfNecessary] - Application exception overridden by rollback exception
org.springframework.jms.UncategorizedJmsException: Uncategorized exception occured during JMS processing; nested exception is org.jboss.jms.exception.MessagingNetworkFailureException; nested exception is org.jboss.remoting.CannotConnectException: Error setting up client lease upon performing connect.
    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:292)
    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:168)
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:474)
    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:548)
    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:534)
    at ch.swissbytes.cipadapter.jms.request.CipAdapterBean.errorTemplateSend(CipAdapterBean.java:226)
    at ch.swissbytes.cipadapter.jms.request.CipAdapterBean.onMessage(CipAdapterBean.java:160)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:506)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:463)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:435)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:322)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:240)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:944)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:868)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.jboss.jms.exception.MessagingNetworkFailureException
    at org.jboss.jms.client.delegate.DelegateSupport.handleThrowable(DelegateSupport.java:240)
    at org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate.org$jboss$jms$client$delegate$ClientConnectionFactoryDelegate$createConnectionDelegate$aop(ClientConnectionFactoryDelegate.java:198)
    at org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate$createConnectionDelegate_N3019492359065420858.invokeNext(ClientConnectionFactoryDelegate$createConnectionDelegate_N3019492359065420858.java)
    at org.jboss.jms.client.container.StateCreationAspect.handleCreateConnectionDelegate(StateCreationAspect.java:80)
    at org.jboss.aop.advice.org.jboss.jms.client.container.StateCreationAspect0.invoke(StateCreationAspect0.java)
    at org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate$createConnectionDelegate_N3019492359065420858.invokeNext(ClientConnectionFactoryDelegate$createConnectionDelegate_N3019492359065420858.java)
    at org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate.createConnectionDelegate(ClientConnectionFactoryDelegate.java)
    at org.jboss.jms.client.JBossConnectionFactory.createConnectionInternal(JBossConnectionFactory.java:205)
    at org.jboss.jms.client.JBossConnectionFactory.createConnection(JBossConnectionFactory.java:87)
    at sun.reflect.GeneratedMethodAccessor18.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
    at $Proxy0.createConnection(Unknown Source)
    at org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter.doCreateConnection(UserCredentialsConnectionFactoryAdapter.java:174)
    at org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter.createConnection(UserCredentialsConnectionFactoryAdapter.java:149)
    at org.springframework.jms.connection.SingleConnectionFactory.doCreateConnection(SingleConnectionFactory.java:316)
    at org.springframework.jms.connection.SingleConnectionFactory.initConnection(SingleConnectionFactory.java:270)
    at org.springframework.jms.connection.SingleConnectionFactory.createConnection(SingleConnectionFactory.java:215)
    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:184)
    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:461)
    ... 12 more
Caused by: org.jboss.remoting.CannotConnectException: Error setting up client lease upon performing connect.
    at org.jboss.remoting.Client.connect(Client.java:1804)
    at org.jboss.remoting.Client.connect(Client.java:652)
    at org.jboss.jms.client.remoting.JMSRemotingConnection$1.run(JMSRemotingConnection.java:374)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.jboss.jms.client.remoting.JMSRemotingConnection.start(JMSRemotingConnection.java:368)
    at org.jboss.jms.client.delegate.ClientConnectionFactoryDelegate.org$jboss$jms$client$delegate$ClientConnectionFactoryDelegate$createConnectionDelegate$aop(ClientConnectionFactoryDelegate.java:165)
    ... 32 more
Caused by: java.lang.Exception: Error setting up client lease
    at org.jboss.remoting.MicroRemoteClientInvoker.establishLease(MicroRemoteClientInvoker.java:508)
    at org.jboss.remoting.Client.setupClientLease(Client.java:1912)
    at org.jboss.remoting.Client.connect(Client.java:1800)
    ... 37 more
Caused by: org.jboss.remoting.CannotConnectException: Can not get connection to server. Problem establishing socket connection for InvokerLocator [bisocket://ams-dev-bo.swissbytes.ch:4457//?JBM_clientMaxPoolSize=200&clientLeasePeriod=10000&clientSocketClass=org.jboss.jms.client.remoting.ClientSocketWrapper&dataType=jms&failureDisconnectTimeout=0&marshaller=org.jboss.jms.wireformat.JMSWireFormat&socket.check_connection=false&stopLeaseOnFailure=true&timeout=0&unmarshaller=org.jboss.jms.wireformat.JMSWireFormat&useClientConnectionIdentity=true&validatorPingPeriod=10000&validatorPingTimeout=5000]
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:613)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.transport(BisocketClientInvoker.java:458)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:141)
    at org.jboss.remoting.MicroRemoteClientInvoker.establishLease(MicroRemoteClientInvoker.java:474)
    ... 39 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at org.jboss.remoting.transport.socket.SocketClientInvoker.createSocket(SocketClientInvoker.java:192)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.createSocket(BisocketClientInvoker.java:465)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.getConnection(MicroSocketClientInvoker.java:913)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:602)
    ... 42 more
2012-05-16 13:22:57,031 [jmsContainer-1] WARN [org.springframework.jms.listener.DefaultMessageListenerContainer][handleListenerException] - Execution of JMS message listener failed
javax.jms.IllegalStateException: The object is closed
    at org.jboss.jms.client.container.ClosedInterceptor.invoke(ClosedInterceptor.java:157)
    at org.jboss.aop.advice.PerInstanceInterceptor.invoke(PerInstanceInterceptor.java:105)
    at org.jboss.jms.client.delegate.ClientSessionDelegate$getTransacted_N1613179584734032131.invokeNext(ClientSessionDelegate$getTransacted_N1613179584734032131.java)
    at org.jboss.jms.client.delegate.ClientSessionDelegate.getTransacted(ClientSessionDelegate.java)
    at org.jboss.jms.client.JBossSession.getTransacted(JBossSession.java:154)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.rollbackOnExceptionIfNecessary(AbstractMessageListenerContainer.java:574)
    at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:442)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:322)
    at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:240)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:944)
    at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:868)
    at java.lang.Thread.run(Thread.java:662)
2012-05-16 13:22:57,072 [jmsContainer-1] WARN [org.jboss.remoting.Client][removeListener] - unable to remove remote callback handler: Can not get connection to server. Problem establishing socket connection for InvokerLocator [bisocket://ams-dev-bo.swissbytes.ch:4457//?JBM_clientMaxPoolSize=200&clientLeasePeriod=10000&clientSocketClass=org.jboss.jms.client.remoting.ClientSocketWrapper&dataType=jms&failureDisconnectTimeout=0&marshaller=org.jboss.jms.wireformat.JMSWireFormat&socket.check_connection=false&stopLeaseOnFailure=true&timeout=0&unmarshaller=org.jboss.jms.wireformat.JMSWireFormat&useClientConnectionIdentity=true&validatorPingPeriod=10000&validatorPingTimeout=5000]
2012-05-16 13:23:35,981 [org.springframework.scheduling.timer.TimerFactoryBean#0] DEBUG [ch.swissbytes.cipadapter.services.tasks.CheckQueueListenerStatus][run] - Checking queueListener status 
```

错误源于此方法：

```
private void initDatabaseProperties(final Session session) {
    logger.info("Initializing database custom properties.");
    properties.getProperty(CommonConstants.CIP_DATE_FORMAT_PROP);
    final String dateFormat = DateUtil.VIEW_DATE_FORMAT;
    logger.info("Setting NLS_DATE_FORMAT to : " + dateFormat);
    final String queryString = "ALTER SESSION SET NLS_DATE_FORMAT = '" +      StringUtils.trim(dateFormat) + "'";
    session.createSQLQuery(queryString).executeUpdate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:39:47.447

我无法回答 JBoss 抛出的异常，但一般来说，套接字上的 EOS 是由一件事引起的：由于对等方关闭或关闭输出而从对等方接收到 FIN。

# jquery - jQuery AJAX POST 变成 GET

> ID：10709843
> 
> 赞同：6
> 
> 时间：2012-05-22T20:41:13.730
> 
> 标签：jquery, forms, html, post, get

我正在尝试将表单数据发送到当前页面以使用 jQuery 进行变量处理。当我发送 POST 请求时，服务器会收到一个 GET 请求，并且我的 URL 会更改以匹配该 GET。我知道如果我不隐式使用 jQuery 会自动转到 GET 请求`type: "POST"`，但我相信这就是我正在做的事情。任何帮助，将不胜感激。

```
<script>
    function addadomain(){
        $.ajax({
            type: "POST",
            url: "domains.php",
            data: $("#domainform form").serializeArray(),
            success: function() {
                $("#domainlist").load("domains.php #domainlist");
                $.ajaxSetup({ cache: false });
            }
        });
        return false;
    };
</script>

<a id="displayText" href="#" onclick="toggle();" >Add Domains</a> 

<div id="toggleText" style="display: none">
    <form name="adddomain" id="domainform" autocomplete="on">
        <input type="hidden" name="userid" id="userid" value="<?PHP echo $loggedInUser->user_id; ?>" />

        Domain: <input type="text" name="domain" id="domain" required="required" /><br />
        Keyword: <input type="text" name="keyword" id="keyword" required="required" /><br />
        Facebook Url: <input type="text" name="facebook" id="facebook" /><br />
        Twitter Url: <input type="text" name="twitter" id="twitter" /><br />
        Analytics ID#: <input type="text" name="analytics" id="analytics" /><br />
        Blogspot Url: <input type="text" name="blogspot" id="blogspot" /><br />

        <input type="submit" onclick="addadomain()" id="submit" value="submit" />
    </form> 
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T20:44:22.030

你可能需要做：

```
e.preventDefault() 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

加载页面时，您的提交不会在您的 ajax 调用之上执行其默认操作...此外，您可以在表单标签中添加表单操作`action="post"`

# c# - Request.Form.Get 从选择选项标签错误

> ID：10709849
> 
> 赞同：0
> 
> 时间：2012-05-22T20:41:39.470
> 
> 标签：c#, asp.net

我试图通过 C# 从“选择选项”标签中获取值或文本，但我遇到了一些问题：

这是我的代码：

```
<select id="country" >
                        <option value="" >Select One...</option>
                        <%for (int i = 0; i < dt.Rows.Count; i++)
                          {%>
                            <option value="<%=dt.Rows[i][0].ToString() %>" ><%=dt.Rows[i][1].ToString() %></option>  
                          <%} %>
                        </select> 
```

这是我背后的代码：

```
string value = Request.Form.Get("country"); 
```

它不断进入`null`我的价值。如果我尝试使用 设置我的`<select>`标签`runat="server"`，则会出现错误：

> 在此上下文中不支持代码块

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:43:43.873

表单元素通过它们的名称属性发布，而不是 id。

尝试

```
<select id="country" name="country"> 
```

# asp.net - System.DirectoryServices.DirectoryServicesCOMException

> ID：10709862
> 
> 赞同：0
> 
> 时间：2012-05-22T20:42:29.877
> 
> 标签：asp.net

尝试使用“匿名”身份验证和硬编码用户名在生产环境中运行应用程序时，我不断收到以下错误。

当我打开基本身份验证时，它会提示输入用户名/密码，一切都像魅力一样。但我需要让硬编码版本也能正常工作。无法弄清楚发生了什么。

一切都在另一台服务器上完美运行。

> 异常详细信息：System.DirectoryServices.DirectoryServicesCOMException：发生操作错误。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [DirectoryServicesCOMException (0x80072020): 发生操作错误。]
> System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +781
> System.DirectoryServices.DirectoryEntry.Bind() +44
> System.DirectoryServices.DirectoryEntry.get_SchemaEntry() +49
> System.DirectoryServices .AccountManagement.ADStoreCtx.IsContainer(DirectoryEntry de) +62
> System.DirectoryServices.AccountManagement.ADStoreCtx..ctor(DirectoryEntry ctxBase, Boolean ownCtxBase, String username, String password, ContextOptions options) +123
> System.DirectoryServices.AccountManagement.PrincipalContext.CreateContextFromDirectoryEntry( DirectoryEntry 条目）+234
> System.DirectoryServices.AccountManagement.PrincipalContext.DoLDAPDirectoryInit() +497
> 
> [PrincipalOperationException：发生操作错误。]
> System.DirectoryServices.AccountManagement.PrincipalContext.DoLDAPDirectoryInit() +534256
> System.DirectoryServices.AccountManagement.PrincipalContext.DoDomainInit() +61
> System.DirectoryServices.AccountManagement.PrincipalContext.Initialize() +141
> 系统。 DirectoryServices.AccountManagement.PrincipalContext.get_QueryCtx() +42
> System.DirectoryServices.AccountManagement.Principal.FindByIdentityWithTypeHelper(PrincipalContext context, Type principalType, Nullable`1 identityType, String identityValue, DateTime refDate) +27
> System.DirectoryServices.AccountManagement.GroupPrincipal.FindByIdentity( PrincipalContext 上下文，字符串标识值）+95
> D:\SERT\BusinessObjects\SERT_BO\ADHelper.cs:199
> SERT_BO.UserSession.GetUserSession(String userName) 在 D:\SERT\BusinessObjects\ SERT_BO\UserSession.cs:44
> SERT.SetUserSession.Page_Load(Object sender, EventArgs e) in D:\SERT\SERT\SERT\SetUserSession.aspx.cs:23
> System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, 对象 t, EventArgs e) +25
> System.Web.UI.Control.LoadRecursive() +71
> System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3064

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:31:41.487

要检查的一件事是运行 ASP.NET 应用程序的 AppPool 是否具有正确的权限。作为快速测试，您可以将 AppPool 的标识设置为本地系统，看看这是否解决了问题。如果问题在这里，那么您可以将应用程序池标识设置为在此服务器上具有足够权限的（域？）用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:51:16.147

看起来问题是服务器正在查看错误的 AD 控制器。它必须完整地写出来。

# line - 如何将文本粘贴到每一行的末尾？崇高 2

> ID：10709869
> 
> 赞同：163
> 
> 时间：2012-05-22T20:42:58.110
> 
> 标签：line, sublimetext2, text-editor, copy-paste, sublimetext

我很好奇是否有办法将文本粘贴到 Sublime 2 中每一行的末尾？相反，到每一行的开头。

测试线一

测试线二

测试线三

测试线四

...

假设您在编辑器中有 100 行文本，并且您想在每行的开头和结尾粘贴引号。

有没有一种简单的方法可以做到这一点或任何人都知道的插件？这通常会在各种项目上为我节省大量时间。

谢谢。

* * *

## 回答 #1

> 赞同：585
> 
> 时间：2012-07-20T10:54:33.647

是的，正则表达式很酷，但还有其他选择。

*   选择要添加前缀或后缀的所有行
*   Goto menu **Selection -> Split into Lines** ( `Cmd`/ `Ctrl`+ `Shift`+ `L`)

这允许您一次编辑多行。现在您可以在每行的开头和结尾添加 **引号 (") 或任何内容 * 。*

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-11-02T10:23:50.690

这是我一直使用的工作流程，仅使用键盘

1.  `Ctrl`/ `Cmd`+`A`全选
2.  `Ctrl`/ `Cmd`+ `Shift`+`L`分割成行
3.  `'`用引号括住每一行

请注意，如果选择中有空行，这将不起作用。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2016-03-16T07:01:49.650

1.  选择要添加前缀或后缀的所有行。（但如果您只想为特定行添加前缀或后缀，您可以使用`ctrl`+`Left mouse button`来创建多个游标。）
2.  按`Ctrl`+ `Shift`+ `L`。
3.  按键`Home`并添加前缀。
4.  按键`End`并添加后缀。

> 请注意，禁用自动换行，否则如果您的行长于 sublime 的宽度，它将无法正常工作。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-12-22T09:52:17.110

假设您有这些代码行：

```
test line one
test line two
test line three
test line four 
```

使用**Search and Replace** `Ctrl` +`H`和**Regex**让我们找到这个：`^`并用 替换它`"`，我们将得到这个：

```
"test line one
"test line two
"test line three
"test line four 
```

现在让我们搜索这个：`$`并将其替换为`"`，现在我们将拥有这个：

```
"test line one"
"test line two"
"test line three"
"test line four" 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2012-05-22T20:45:44.240

您可以使用此正则表达式的[搜索和替换](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_overview.html#regular-expressions)功能`^([\w\d\_\.\s\-]*)$`来查找文本，替换后的文本为`"$1"`.

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2012-12-10T00:50:42.667

使用**[列选择](http://www.sublimetext.com/docs/2/column_selection.html)**。列选择是 Sublime2 的独特功能之一；它用于为您提供多个匹配的游标（[此处为教程](https://tutsplus.com/lesson/multiple-cursors-and-incremental-search/)）。要获取多个游标，请执行以下操作之一：

**老鼠：**

*   按住 shift (Windows/Linux) 或选项键 (Mac) 的同时用鼠标选择一个区域。

*   单击鼠标中键（或滚动）也将选择为一列。

**键盘：**

*   选择所需区域。
*   键入`control`+ `shift`+ `L`(Windows/Linux) 或`command`+ `shift`+ `L`(Mac)

您现在选择了多行，因此您*可以*在每行的开头和结尾键入引号。最好利用 Sublime 的功能，只需键入**"**。当您这样做时，Sublime 会自动引用所选文本。

键入`esc`以退出多光标模式。

# visual-studio-2010 - 从 Visual Studio 清除 Firefox 缓存

> ID：10709871
> 
> 赞同：1
> 
> 时间：2012-05-22T20:43:04.057
> 
> 标签：visual-studio-2010, visual-studio

我在我的预部署部分 (SharePoint) 中添加了以下行来清除我的 IE 缓存。有什么方法可以清除 Firefox 缓存吗？

```
RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:08:17.040

这不是一个完美的解决方案，但也许它会帮助你。将此命令另存为 .bat 文件：

> del /q /s /f %HOMEPATH%\AppData\Local\Mozilla\Firefox\Profiles\$profile$\Cache\*

`$profile$`您的 Firefox 配置文件文件夹在哪里。

# ios - iOS 关闭所有键盘和模式控件

> ID：10709875
> 
> 赞同：1
> 
> 时间：2012-05-22T20:43:20.437
> 
> 标签：ios, modalviewcontroller, uikeyboard

我正在制作一个基于网络的应用程序，我偶然发现了一个小难题。我的应用程序连接到服务器，应用程序使用键盘并在按下某些按钮时显示模式视图。这一切都很好，可以按照我的意愿工作。我的问题是当服务器失去连接时，无论是为了维护还是我们失去连接，应用程序都会返回登录屏幕，但键盘或模式视图不会被关闭。我是否必须跟踪这些以解除它们，或者是否有一些全局命令可以发送以解除所有内容。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T21:11:49.560

在您的视图控制器用户中：

```
[self.view endEditing: YES]; 
```

这将`resignFirstResponder`适用于主视图的所有子视图。无需跟踪哪个 textField 是第一响应者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:47:16.627

至少有几种不同的方法可以关闭键盘：其中一种应该可以工作：

```
[myEditField resignFirstResponder];
[myEditField endEditing];
[parentView endEditing]; 
```

没有“全局”方式来关闭所有打开的模态视图。您将需要专门关闭您使用以下方法打开的任何模式视图：

```
[self dismissModalViewControllerAnimated:YES];
// This can be called either from within the modal view or its parent: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-28T19:29:19.187

我发现了一个`endEditing`失败`resignFirstResponder`的案例。在这些情况下，这对我有用。

```
[[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil];    
[self setEditing:NO]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T21:03:47.217

只需使用私有属性来保存当前的模态视图和/或具有焦点的文本字段。然后，当您失去连接时，使用该属性的值（您在模态视图的实例化时设置）来关闭当前的。

# javascript - 如果输入不为空，则显示按钮

> ID：10709884
> 
> 赞同：3
> 
> 时间：2012-05-22T20:43:57.240
> 
> 标签：javascript, jquery

我不是一个 JavaScript 专家，所以我需要一个简单代码的帮助。我有一个清除输入字段值的按钮。

如果输入字段为空，我希望它（按钮）被隐藏，反之亦然（如果输入字段内有文本则可见）。

解决方案可以是纯 JavaScript 或 jQuery，没关系。越简单越好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T20:47:07.097

```
$("input").keyup(function () {
   if ($(this).val()) {
      $("button").show();
   }
   else {
      $("button").hide();
   }
});
$("button").click(function () {
   $("input").val('');
   $(this).hide();
}); 
```

[http://jsfiddle.net/SVxbW/](http://jsfiddle.net/SVxbW/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T22:07:54.373

```
if(!$('input').val()){
    $('#button').hide();
}
else {
    $('#button').show();
} 
```

以最简单的形式；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:46:36.020

首先隐藏页面加载按钮：

```
jQuery(document).ready(function() {
    jQuery("#myButton").hide();
}); 
```

然后附加一个`onChange`处理程序，只要文本字段的内容为空，它将隐藏按钮。否则，它会显示按钮：

```
jQuery("#myText").change(function() {
    if(this.value.replace(/\s/g, "") === "") {
       jQuery("#myButton").hide();
    } else {
       jQuery("#myButton").show();
    }
}); 
```

清除输入后，您还需要隐藏按钮：

```
jQuery("#myButton").click(function() {
   jQuery("#myInput").val("");
   jQuery(this).hide();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T20:46:53.397

您可以使用`$('selector').hide()`从视图中隐藏元素并`$('selector').show()`再次显示它。

更好的是，您可以使用`$('selector').toggle()`它来显示和隐藏而无需任何自定义逻辑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T21:14:49.800

在没有 jQuery 的情况下做到这一点（基本上和其他人已经做过的一样，只是纯 js）。这很简单，但我也添加了一些评论。

```
 <body>
    <input type="text" id="YourTextBox" value="" />
    <input type="button" id="YourButton" value="Click Me" />
    <script type="text/javascript">

        var textBox = null;
        var button = null;

        var textBox_Change = function(e) {
            // just calls the function that sets the visibility
            button_SetVisibility();
        };

        var button_SetVisibility = function() {
            // simply check if the visibility is set to 'visible' AND textbox hasn't been filled
            // if it's already visibile and the text is blank, hide it
            if((button.style.visibility === 'visible') && (textBox.value === '')) {
                button.style.visibility = 'hidden';
            } else {
                // show it otherwise
                button.style.visibility = 'visible';
            }
        };    

        var button_Click = function(e) {
            // absolutely not required, just to add more to the sample
            // this will set the textbox to empty and call the function that sets the visibility
            textBox.value = '';  
            button_SetVisibility();
        };                

        // wrap the calls inside anonymous function
        (function() {
            // define the references for the textbox and button here
            textBox = document.getElementById("YourTextBox");
            button = document.getElementById("YourButton");
            // some browsers start it off with empty, so we force it to be visible, that's why I'll be using only chrome for now on...
            if('' === button.style.visibility) { button.style.visibility = 'visible'; }
            // assign the event handlers for the change and click event
            textBox.onchange = textBox_Change;
            button.onclick = button_Click;
            // initialize calling the function to set the button visibility
            button_SetVisibility();
        })();
    </script>
</body>​ 
```

注意：我已经在 IE9 和 Chrome 中编写并测试了它，请确保您在其他浏览器中测试它。另外，我添加了[这个小提琴](http://jsfiddle.net/schawaska/bYacR/)，所以你可以看到它工作。

# entity-framework - 首先使用实体 框架代码映射 SqlGeography

> ID：10709885
> 
> 赞同：4
> 
> 时间：2012-05-22T20:44:09.550
> 
> 标签：entity-framework, sqlgeography

我正在玩 Entity Framework 4 和`sqlgeography`数据类型。我无法让实体框架将我的 sqlgeography 类型映射到数据库。我已将我的类定义为 POCO，并希望实体框架为我创建表。我没有成功，然后尝试自己创建表格也没有成功。

我的课看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Microsoft.SqlServer.Server;
using Microsoft.SqlServer.Types;

namespace Nearest.Models
{
    public class Point
    {
        public int Id { get; set; }
        public int DataSet { get; set; }
        public int Author { get; set; }
        public SqlGeography Geo { get; set; }
        public string Data { get; set; }
    }
} 
```

这是我得到的错误：

```
<Exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<ExceptionType>System.InvalidOperationException</ExceptionType>
<Message>
An error occurred when trying to create a controller of type 'Nearest.Controllers.PointsController'. Make sure that the controller has a parameterless public constructor.
</Message>
<StackTrace>
at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpControllerContext controllerContext, Type controllerType) at System.Web.Http.Dispatcher.DefaultHttpControllerFactory.CreateInstance(HttpControllerContext controllerContext, HttpControllerDescriptor controllerDescriptor) at System.Web.Http.Dispatcher.DefaultHttpControllerFactory.CreateController(HttpControllerContext controllerContext, String controllerName) at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken) at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
</StackTrace>
<InnerException>
<ExceptionType>System.TypeInitializationException</ExceptionType>
<Message>
The type initializer for 'Nearest.Controllers.PointsController' threw an exception.
</Message>
<StackTrace>
at Nearest.Controllers.PointsController..ctor() at lambda_method(Closure ) at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpControllerContext controllerContext, Type controllerType)
</StackTrace>
<InnerException>
<ExceptionType>System.Data.DataException</ExceptionType>
<Message>
An exception occurred while initializing the database. See the InnerException for details.
</Message>
<StackTrace>
at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c) at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase() at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() at System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator() at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source) at Nearest.Models.PointRepository..ctor() in C:\Projects\Nearest\trunk\Nearest\Models\PointRepository.cs:line 15 at Nearest.Controllers.PointsController..cctor() in C:\Projects\Nearest\trunk\Nearest\Controllers\PointsController.cs:line 14
</StackTrace>
<InnerException>
<ExceptionType>System.Data.EntityCommandCompilationException</ExceptionType>
<Message>
An error occurred while preparing the command definition. See the inner exception for details.
</Message>
<StackTrace>
at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) at System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree) at System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree) at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree) at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters) at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption) at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source) at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1[TResult](IEnumerable`1 sequence) at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot) at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression) at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression) at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source) at System.Data.Entity.Internal.InternalContext.QueryForModelHash() at System.Data.Entity.Internal.InternalContext.CompatibleWithModel(Boolean throwIfNoMetadata) at System.Data.Entity.CreateDatabaseIfNotExists`1.InitializeDatabase(TContext context) at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass5.<PerformDatabaseInitialization>b__3() at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
</StackTrace>
<InnerException>
<ExceptionType>System.Data.MappingException</ExceptionType>
<Message>
(6,10) : error 3004: Problem in mapping fragments starting at line 6:No mapping specified for properties Point.Geo in Set Points. An Entity with Key (PK) will not round-trip when: Entity is type [Nearest.Models.Point]
</Message>
<StackTrace>
at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGenerateViews(EntityContainer container, Dictionary`2 resultDictionary) at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGetGeneratedViews(EntityContainer container) at System.Data.Common.Utils.Memoizer`2.<>c__DisplayClass2.<Evaluate>b__0() at System.Data.Common.Utils.Memoizer`2.Result.GetValue() at System.Data.Common.Utils.Memoizer`2.Evaluate(TArg arg) at System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.GetGeneratedView(EntitySetBase extent, MetadataWorkspace workspace, StorageMappingItemCollection storageMappingItemCollection) at System.Data.Metadata.Edm.MetadataWorkspace.GetGeneratedView(EntitySetBase extent) at System.Data.Query.PlanCompiler.PreProcessor.ExpandView(Node node, ScanTableOp scanTableOp, IsOfOp& typeFilter) at System.Data.Query.PlanCompiler.PreProcessor.ProcessScanTable(Node scanTableNode, ScanTableOp scanTableOp, IsOfOp& typeFilter) at System.Data.Query.PlanCompiler.PreProcessor.Visit(ScanTableOp op, Node n) at System.Data.Query.InternalTrees.ScanTableOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitRelOpDefault(RelOp op, Node n) at System.Data.Query.PlanCompiler.PreProcessor.Visit(ProjectOp op, Node n) at System.Data.Query.InternalTrees.ProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitRelOpDefault(RelOp op, Node n) at System.Data.Query.PlanCompiler.PreProcessor.Visit(ProjectOp op, Node n) at System.Data.Query.InternalTrees.ProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitRelOpDefault(RelOp op, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitSortOp(SortBaseOp op, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.Visit(ConstrainedSortOp op, Node n) at System.Data.Query.InternalTrees.ConstrainedSortOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n) at System.Data.Query.PlanCompiler.SubqueryTrackingVisitor.VisitChildren(Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfNode.VisitDefault(Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfNode.VisitPhysicalOpDefault(PhysicalOp op, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.Visit(PhysicalProjectOp op, Node n) at System.Data.Query.InternalTrees.PhysicalProjectOp.Accept[TResultType](BasicOpVisitorOfT`1 v, Node n) at System.Data.Query.InternalTrees.BasicOpVisitorOfT`1.VisitNode(Node n) at System.Data.Query.PlanCompiler.PreProcessor.Process() at System.Data.Query.PlanCompiler.PreProcessor.Process(PlanCompiler planCompilerState, StructuredTypeInfo& typeInfo) at System.Data.Query.PlanCompiler.PlanCompiler.Compile(List`1& providerCommands, ColumnMap& resultColumnMap, Int32& columnCount, Set`1& entitySets) at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
</StackTrace>
</InnerException>
</InnerException>
</InnerException>
</InnerException>
</Exception> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:59:45.700

As far as I know, EF4 doesn't yet support the `Geography` and `Geometry` datatypes of SQL Server 2008\. This will be a feature of Entity Framework v5 -- to be released with .NET 4.5 later this year).

See a [EF5 Spatial Types Walkthrough](http://msdn.microsoft.com/en-us/hh859721) for an explanation of how EF5 will support spatial types.

And see [this blog post by EF goddess Julie Lerman](http://thedatafarm.com/blog/data-access/yes-you-can-read-and-probably-write-spatial-data-with-entity-framework/) on how to still use geography types with EF4 - with a bit of extra work - not sure how much of that works in EF code-first, though.

Also: [see this other SO post on the topic](https://stackoverflow.com/questions/1314523/spatial-data-types-support-in-linq2sql-or-ef4/1797509#1797509)

# sql-server - Grails 将字符串映射到 nvarchar

> ID：10709886
> 
> 赞同：0
> 
> 时间：2012-05-22T20:44:12.153
> 
> 标签：sql-server, hibernate, grails, grails-orm

我有这样的事情：

字符串状态码

在映射中我有：

statusCode 列：“status_cd”，类型：“NVARCHAR”

我尝试过使用 'varchar'、'VARCHAR' 和 'nvarchar' 我一直收到

> org.springframework.beans.factory.BeanCreationException：创建名为“transactionManagerPostProcessor”
> 的bean时出错：bean初始化失败；嵌套异常是
> org.springframework.beans.factory.BeanCreationException：创建名为“transactionManager”的 bean 时出错：设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.MappingException：无法确定类型：NVARCHAR，在表：CARD，列：[org.hibernate.mapping.Column(status_cd)]
> at java.util.concurrent.FutureTask$Sync。
> 在 java.util.concurrent.FutureTask.run(FutureTask.java:138)
> 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor .java:908)
> 在 java.lang.Thread.run(Thread.java:619)

知道我在映射中可能缺少什么吗？我正在使用 grails 2.0 和 MS SQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:10:58.240

假设 "type:" 等价于 Hibernate 如何使用该术语，那么问题是 type 需要引用 Hibernate 映射类型。也就是说type既不是java类型也不是sql类型。它是一个理解两者之间映射关系的 Hibernate 概念。Hibernate 开箱即用（计划在 5.0 中）中尚不存在国有化字符串支持。但它很容易添加。

首先，您需要在 Sting 和 NVARCHAR 之间定义一个 Hibernate 映射类型。您可以通过实现 UserType 或扩展内置的 Hibernate 映射类型之一（org.hibernate.type.StringType 可能是一个很好的起点）来完成此操作。

然后在映射中命名该实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T00:12:24.567

Steve Ebersole 是对的，所以我可以补充：

在你映射一个['sqlType'](http://grails.org/doc/latest/ref/Database%20Mapping/column.html)中设置，尝试`sqlType: "nvarchar", length: 255`... [Hibernate type](http://grails.org/doc/latest/ref/Database%20Mapping/type.html)， type: 'text' 默认为 varchar

# php - Symfony 2：全局数据库查询

> ID：10709887
> 
> 赞同：3
> 
> 时间：2012-05-22T20:44:12.593
> 
> 标签：php, symfony

我将如何在 Symfony2 包中的每个页面上执行数据库查询？

我正在尝试创建谁的在线功能，但这需要全局执行查询。

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:23:55.643

您可以在我的 layout.html.twig 中呈现子模板，例如（在我的项目中）我有这个：

`{% render "EUPaNdataBundle:Home:listAllInstitutes" %}`

这将在顶部导航栏的下拉菜单中呈现所有机构的列表。

`listAllInstitutes`是`Home`控制器中的一个动作，它从数据库中获取机构列表，然后返回`listAllInstitutes.html.twig`模板

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:04:30.997

创建一个事件侦听器，用于侦听`kernel.request`事件并在当前用户登录时更新她的最后一次访问时间。有关侦听器的示例，请参阅[我的另一个答案，并根据您的需要进行调整。](https://stackoverflow.com/questions/10694315/symfony2-where-to-set-a-user-defined-time-zone/10699402#10699402)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T21:19:19.827

有趣的问题。

如果您只需要在视图（可能是布局）中使用它，我建议创建 Twig Helper。您可以在助手类中访问 Doctrine。检查此链接：

[http://www.kiwwito.com/article/extending-twig-in-symfony-2-add-custom-functions](http://www.kiwwito.com/article/extending-twig-in-symfony-2-add-custom-functions)

# opencv - 每个 EmguCV dll 所需的所有 OpenCV dll 列表

> ID：10709892
> 
> 赞同：1
> 
> 时间：2012-05-22T20:44:51.673
> 
> 标签：opencv, computer-vision, emgucv

我正在尝试使用反编译器查找每个 EmguCv dll 的依赖项。但是我不想错过任何东西，因为那些 OpenCv dll 可能在外部调用中相互调用。

某处有清单吗？我已经尝试过 EmguCV 论坛，但我无法得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:03:25.357

[使用Dependency Walker](http://www.dependencywalker.com/)打开它：

> 扫描 32 位或 64 位 Windows 模块（exe、dll、ocx、sys 等），并构建所有依赖模块的层次树图。

# python - 具有动态 TextProperty 的 NDB Expando 模型？

> ID：10709893
> 
> 赞同：1
> 
> 时间：2012-05-22T20:44:58.820
> 
> 标签：python, google-app-engine

我正在尝试做：

```
MyModel({'text': db.Text('text longer than 500 byets')}) 
```

但是得到：

```
BadValueError: Indexed value fb_education must be at most 500 bytes 
```

我认为这只是旧 db api 这个问题的遗留问题。

[https://groups.google.com/forum/?fromgroups#!topic/google-appengine/wLAwrjtsuks](https://groups.google.com/forum/?fromgroups#!topic/google-appengine/wLAwrjtsuks)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-27T04:34:04.063

首先动态创建实体：

```
 kindOfEntity = "MyTable"
class DynamicEntity(ndb.Expando):
     @classmethod
     def _get_kind(cls):
        return kindOfEntity 
```

然后在分配文本属性运行时间/动态之后，如下所示

```
dbObject = DynamicEntity()
key = "studentName"
value = "Vijay Kumbhani"
textProperties = ndb.TextProperty(key)
dbObject._properties[key] = {}
dbObject._values[key] = {}
dbObject._properties[key] = textProperties 
dbObject._values[key] = value
dbObject.put() 
```

然后在关键属性分配文本属性之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:51:39.753

是的，我知道问题已经过时了。但我也搜索了相同的解决方案，但没有找到任何结果。所以这里收据对我有用（我用“权限”属性扩展了 User()）：

```
prop = ndb.GenericProperty("permissions", indexed=False)
prop._code_name = "permissions"
user._properties["permissions"] = prop
prop._set_value(user, permissions) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-28T01:58:05.013

以前的答案对我很有用...谢谢！！！我只是想补充一点，您似乎还可以使用这种技术创建特定的属性类型（如果您知道要创建的数据类型）。稍后检索实体时，动态属性将设置为特定类型，而不是 GenericProperty。这对于 ndb.PickleProperty 和 ndb.JsonProperty 值特别方便（以获得输入/输出转换）。

```
prop = ndb.TextProperty("permissions", indexed=False)
prop._code_name = "permissions"
user._properties["permissions"] = prop
prop._set_value(user, permissions) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-13T11:16:32.707

我试图将实体的一个属性更改为文本。但是，当您没有明确映射您的属性时，Expando/Model 似乎会将实体的所有属性更改为 GenericProperty（在获取之后）。

当您再次放置这些实体（以更改所需的属性）时，它会影响其他现有的 TextProperties，然后更改为常规字符串。

只有低级数据存储 api 似乎工作：

[https://gist.github.com/feroult/75b9ab32b463fe7f9e8a](https://gist.github.com/feroult/75b9ab32b463fe7f9e8a)

您可以从 remote_api_shell.py 调用它：

```
from yawp import *
yawp(kind).migrate(20, 'change_property_to_text', 'property_name') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T01:38:18.423

您正在尝试`db.Text`将旧 API 的一部分与 NDB 一起使用，但这是行不通的。

`Expando`据我所知，目前没有在 NDB中设置未索引属性的好方法。您可以设置`_default_indexed = False`您的 expando 子类，如此处（简要）记录[的](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/ndb/model.py#3155)那样，但这将使所有 expando 属性的默认值都没有索引。

更好的解决方案是避免一起使用`Expando`；它的引人注目的用途相对较少，通过定义模型（甚至动态定义模型）不会更好地为您服务。

# java - 我想通过 Java Regex 在其中找到一个单词

> ID：10709894
> 
> 赞同：-1
> 
> 时间：2012-05-22T20:45:13.063
> 
> 标签：java, regex

我有 1K 字符串，如下所示，它们保存在字符串数组中，我只需要粗体字，它们不是常量）'。所以想知道什么是最好的方法。

(descSummary: EME Commercial (Change Request), archived: false, **name: EME Commercial (Change Request)** , uniqueName: EME Commercial (Change Request)(JTS-Sentinel-Id)) (isInitialized: true, internalPublic: true, internalVisibleToMembers:假，internalVisibleToAccessList：假，owningApplicationKey：JTS-Sentinel-Id，internalIsProcessProvider：假）

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:04:42.317

好吧，看起来您要在字符串“name：”之后和以下逗号之前输入文本，所以您的正则表达式是`/name: ([^,]+)/`

**更新：**

我不明白你为什么要使用`.replaceAll()`.

当正则表达式位于 Java 字符串文字中时，您不需要斜杠来分隔它。很多人，像我一样，在普通文本中使用斜线来设置它。

如果你想以粗体显示你标记的段，那么你需要这样的东西：

```
Pattern pattern = Pattern.compile("name: ([^,]+)");
Matcher matcher = pattern.matcher(str.toString());
if (matcher.matches()) {
    System.out.println(matcher.group(0));
    System.out.println(matcher.group(1));
} 
```

`.group(0)`返回与模式匹配的整个字符串。 `.group(1)`返回匹配括号中第一个“捕获”组的字符串，即`([^,]+)`部分。

你为什么打电话`.toString()`来`str`？该变量的名称表明它已经是一个字符串。

# javascript - 验证和格式化输入的值

> ID：10709896
> 
> 赞同：0
> 
> 时间：2012-05-22T20:45:15.247
> 
> 标签：javascript, jquery, html

我有一个输入文本框来输入金额。我想要两件事。

首先，验证不允许这样的事情

> 1,23.00
> 1,123.45.67

但这些都可以：

> 123456.00
> 123,456.00
> 123,456

其次，如果`123456`输入了，我希望它`123,456.00`在用户点击开箱后更改为。

第二部分是我不确定的，如果有什么东西可以做到这两点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:49:36.533

1）谷歌一些不错的插件，你会在网上找到很多验证脚本。

2）您可以使用`blur`or`change`事件。为它们添加一个事件侦听器，它将适当的格式设置为输入值。

# c++ - 'auto const' 和 'const auto' 是一样的吗？

> ID：10709897
> 
> 赞同：90
> 
> 时间：2012-05-22T20:45:25.370
> 
> 标签：c++, c++11, language-lawyer, constants, auto

和 之间是否存在语义差异`auto const`，`const auto`或者它们的含义相同？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-22T20:50:10.020

`const`限定符适用于紧靠左边的类型，除非左边没有任何东西，然后它适用于紧靠右边的类型。所以是的，它是一样的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-08-14T08:12:19.797

人为的例子：

```
std::vector<char*> test;
const auto a = test[0];
*a = 'c';
a = 0; // does not compile
auto const b = test[1];
*b = 'c';
b = 0; // does not compile 
```

两者`a`都有`b`类型`char* const`。不要以为你可以简单地“插入”类型而不是关键字`auto`（这里：）`const char* a`！关键字将`const`应用于`auto`匹配的整个类型（此处为：） `char*`。

# php - 从导航中隐藏默认的 Wordpress“主页”页面

> ID：10709898
> 
> 赞同：0
> 
> 时间：2012-05-22T20:45:29.983
> 
> 标签：php, css, wordpress

我想从我的网站导航中隐藏默认的 Wordpress 主页

[http://www.dawaf.co.uk/es/portraits](http://www.dawaf.co.uk/es/portraits)

我使用 211 作为父主题，但我想知道是否可以使用 CSS 来执行此操作，而不是编辑 header.php，当我删除对“home”的任何引用时，这似乎不起作用

头文件.php

```
<?php
/**
 * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
 * @package WordPress
 * @subpackage Twenty_Eleven
 * @since Twenty Eleven 1.0
 */
?><!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 7]>
<html id="ie7" <?php language_attributes(); ?>>
<![endif]-->
<!--[if IE 8]>
<html id="ie8" <?php language_attributes(); ?>>
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html <?php language_attributes(); ?>>
<!--<![endif]-->
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<meta name="viewport" content="width=device-width" />

<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<!--[if lt IE 9]>
<script src="<?php echo get_template_directory_uri(); ?>/js/html5.js" type="text/javascript"></script>
<![endif]-->
<?php
    /* We add some JavaScript to pages with the comment form
     * to support sites with threaded comments (when in use).
     */
    if ( is_singular() && get_option( 'thread_comments' ) )
        wp_enqueue_script( 'comment-reply' );

    /* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */
    wp_head();
?>
</head>

<body <?php body_class(); ?>>
<div id="page" class="hfeed">
    <header id="branding" role="banner">
                <div class="site-title"><a href="http://www.dawaf.co.uk/es/home-2"><img src="http://www.dawaf.co.uk/es/wp-content/themes/child/images/photosdirector.png"></a></div>

            <?php
                // Check to see if the header image has been removed
                $header_image = get_header_image();
                if ( ! empty( $header_image ) ) :
            ?>

            <a href="<?php echo esc_url( home_url( '/' ) ); ?>">
                <?php
                    // The header image
                    // Check if this is a post or page, if it has a thumbnail, and if it's a big one
                    if ( is_singular() &&
                            has_post_thumbnail( $post->ID ) &&
                            ( /* $src, $width, $height */ $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), array( HEADER_IMAGE_WIDTH, HEADER_IMAGE_WIDTH ) ) ) &&
                            $image[1] >= HEADER_IMAGE_WIDTH ) :
                        // Houston, we have a new header image!
                        echo get_the_post_thumbnail( $post->ID, 'post-thumbnail' );
                    else : ?>
                    <img src="<?php header_image(); ?>" width="<?php echo HEADER_IMAGE_WIDTH; ?>" height="<?php echo HEADER_IMAGE_HEIGHT; ?>" alt="" />
                <?php endif; // end check for featured image or standard header ?>
            </a>
            <?php endif; // end check for removed header image ?>

            <?php
                // Has the text been hidden?
                if ( 'blank' == get_header_textcolor() ) :
            ?>
                <div class="only-search<?php if ( ! empty( $header_image ) ) : ?> with-image<?php endif; ?>">
                <?php get_search_form(); ?>
                </div>
            <?php
                else :
            ?>
                <?php get_search_form(); ?>
            <?php endif; ?>

            <nav id="access" role="navigation">
                <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
                <?php /*  Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
                <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
                <?php /* Our navigation menu.  If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assiged to the primary position is the one used. If none is assigned, the menu with the lowest ID is used. */ ?>
                <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
            </nav><!-- #access -->
    </header><!-- #branding -->

    <div id="main"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:49:04.107

您的 header.php 正在从 Wordpress 仪表板动态加载菜单。在此处编辑菜单：仪表板 > 外观 > 菜单

# load - Extjs4 加载图片消息

> ID：10709899
> 
> 赞同：3
> 
> 时间：2012-05-22T20:45:30.717
> 
> 标签：load, extjs4

我已经使用 MVC 架构构建了一个带有 extjs4 的小应用程序。当用户第一次登录时，应用程序需要 5-10 秒才能加载。如何放置加载图像以通知用户在应用程序初始化时等待？（如 shencha 的请在示例页面加载时等待图片）

谢谢

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:01:02.947

为此，我`Ext.LoadMask`在控制器中添加了一个变量，如下所示：

```
var loginMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait ..."}); 
```

然后，在调用调用服务器端（使用 AJAX）进行身份验证的函数之前，我调用 show 函数，如下所示：

`loginMask.show();`

在那之后，我的意思是在我调用服务器响应之后：

`loginMask.hide();`

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:04:48.930

或者您可以使用模态 MessageBox 来实现相同的目的：

```
 Ext.MessageBox.show({
            title: 'Please wait',
            msg: 'Loading...',
            progressText: 'Loading...',
            width:300,
            wait: true,
            waitConfig: {interval: 200},
            progress:true,
            closable:false,
            modal: true
    }); 
```

完成后，只需调用以下命令：

```
Ext.MessageBox.hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T22:44:40.673

Loadmask 可能是您需要的[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.LoadMask](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.LoadMask)

# apache-poi - JExcel/POI：将单元格创建为文本类型

> ID：10709904
> 
> 赞同：4
> 
> 时间：2012-05-22T20:45:44.443
> 
> 标签：apache-poi, jexcelapi

我的要求涉及从 Excel 电子表格中读取值，并填充电子表格供用户修改并重新上传到我们的应用程序。其中一个单元格包含一个由 5 个字符组成的文本字符串，可以是字母、数字或两者的组合。其中一些字符串只包含数字，并以零开头。因此，单元格类型为文本；但是，当我使用 Apache POI 或 JExcel 填充电子表格以供用户修改时，它始终设置为单元格类型 General。

有没有办法使用这些库中的任何一个，或者我还没有看到的其他一些 excel api，来指定一个单元格的类型为文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T16:54:14.277

我的同事刚刚找到了一种方法来实现这一点。在 JExcel 中，它可以通过使用 WritableCellFormat 来完成，例如：

```
WritableCellFormat numberAsTextFormat = new WritableCellFormat(NumberFormats.TEXT); 
```

然后，当您创建要添加到工作表的单元格时，您只需像往常一样传递格式：

```
Label l = new Label(0, 0, stringVal, numberAsTextFormat); 
```

如果您使用的是 Apache POI，您将创建一个 HSSFCellStyle，然后设置它的数据格式，如下所示：

```
HSSFCellStyle style = book.createCellStyle();
style.setDataFormat(BuiltInFormats.getBuiltInFormat("text")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T07:05:17.773

很多时候，当用户在类型（格式）为文本（字符串）的单元格中输入数字时，电子表格软件（openoffice 或 msoffice）会自动更改其格式。我正在使用 apache poi，这是我编写代码的方式：

```
cell = row.getCell(); 
switch (cell.getCellType()) {

case HSSFCell.CELL_TYPE_STRING:
    value = cell.getRichStringCellValue().getString();
    break;
case HSSFCell.CELL_TYPE_NUMERIC:
    // if cell fomratting or cell data is Numeric
    // Read numeric value
    // suppose user enters 0123456 (which is string), in numeric way it is read as 123456.0
    // Now I want ot read string and I got number...Problem?????

    //well this is the solution
    cell.setCellType(Cell.CELL_TYPE_STRING);   // set cell type string, so it will retain original value "0123456"
    value = cell.getRichStringCellValue().getString(); // value read is now "0123456"    
    break;
default:
} 
```

# jpa - 子实体的 JPA EclipseLink getCount

> ID：10709906
> 
> 赞同：0
> 
> 时间：2012-05-22T20:45:50.143
> 
> 标签：jpa, entity, eclipselink, createquery

我正在使用 EL，当我运行下面的查询时，我一直得到 0。我想获取当前处于活动状态的申请人 (AP) 的数量。子实体申请人是个人，我想避免查询个人的所有元素？

```
@RooJavaBean
@RooToString
@RooEntity(identifierColumn = "personID", inheritanceType = "SINGLE_TABLE")
@DiscriminatorColumn(name = "TYPE", discriminatorType = DiscriminatorType.STRING, length = 20)
@DiscriminatorValue("P")
public class Person {

    @NotNull
    @Size(min = 1, max = 50)
    private String FirstName;

    @NotNull
    @Size(min = 1, max = 50)
    private String LastName;
} 
```

子实体“申请人”

```
@RooJavaBean
@RooToString
@RooEntity
@DiscriminatorValue("AP")
public class Applicant extends Person{

    private String major;

    private String nativeLanguage;

    private String ethnicity;

    private String hispanic;
} 
```

我的查询尝试：

```
 /**
     * 
     * @return
     */
    public int getCountActiveApplicants(){

        EntityManager entityManager = factory.createEntityManager();
        int value = entityManager.createQuery("select count(distinct o) from Person o where o.TYPE = \"AP\" AND o.active = \"Yes\" ").getFirstResult();

        System.out.println("wowzer " + value + "\n");
        return value;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:02:56.120

你为什么不简单地计算申请人数？

```
select count(distinct a) from Applicant a where a.active = true 
```

EclipseLink 将在 SQL 中对其进行转换，并为您在鉴别器上添加 where 子句。请记住，JPQL 与您的实体及其持久字段/属性一起使用。它知道它们的关联和它们的继承层次结构。JPQL 从不使用表名和列名。

（旁注：为什么对布尔字段使用“是”？）

# backbone.js - underscore.js 过滤功能

> ID：10709908
> 
> 赞同：3
> 
> 时间：2012-05-22T20:45:53.367
> 
> 标签：backbone.js, filtering, underscore.js

我正在尝试学习backbone.js 和（通过扩展）underscore.js，但我在理解一些约定时遇到了一些困难。在编写一个简单的搜索过滤器时，我认为像下面这样的东西会起作用：

```
var search_string = new RegExp(query, "i");

        var results = _.filter(this, function(data){
            return search_string.test(data.get("title"));
        })); 
```

但是，事实上，为了使它工作，我需要将我的过滤器功能更改为以下内容：

```
var search_string = new RegExp(query, "i");

        var results = _(this.filter(function(data){
            return search_string.test(data.get("title"));
        })); 
```

基本上，我想了解为什么第二个示例有效，而第一个示例无效。根据文档（http://documentcloud.github.com/underscore/#filter），我认为前者会起作用。或者这可能只是反映了我的一些旧的 jQuery 习惯......有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T21:44:27.830

我猜您正在使用具有本机[`Array#filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)实现的浏览器。在您的控制台中尝试这些，看看会发生什么：

```
[].filter.call({ a: 'b' }, function(x) { console.log(x) });
[].filter.call([1, 2],     function(x) { console.log(x) }); 
```

第一个不会做任何事情，第二个将产生`1`并`2`作为输出（[http://jsfiddle.net/ambiguous/tkRQ3/](http://jsfiddle.net/ambiguous/tkRQ3/)）。问题不在于`data`空，问题在于原生`Array#filter`应用到非数组对象时不知道该做什么。

Underscore 的所有方法（包括[`filter`](http://documentcloud.github.com/underscore/#filter)）都使用本地实现（如果可用）：

> 委托给本机**过滤器**方法（如果存在）。

`_.m(collection, ...)`因此，除非您使用不提供本机实现的浏览器，否则Array-ish Underscore 方法通常无法正常工作。

Backbone 集合是模型数组的包装器，模型数组在其中，`c.models`因此您希望：

```
_.filter(this.models, function(data) { ... }); 
```

Backbone[集合混合了几种 Underscore 方法](http://documentcloud.github.com/backbone/#Collection-Underscore-Methods)：

> **Underscore.js**的 Backbone 代理，在**Backbone.Collection**上提供 28 个迭代函数。

其中之一是`filter`。这些代理将 Underscore 方法应用于集合的模型数组，因此`c.filter(...)`与`_.filter(c.models, ...)`.

这种混合可能是混淆 Underscore 正在执行的[“我应该使用本机方法”](https://github.com/documentcloud/underscore/blob/master/underscore.js#L153)检查的原因：

```
if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context); 
```

您可以`_.filter`在普通的旧对象 ( ) 上使用并获得合理的结果，但是当您因为集合已经具有下划线方法`_.filter({a:'b'}, ...)`时它会失败。`_.filter(backbone_collection, ...)`

这是一个简单的演示，希望能澄清一些事情：http: [//jsfiddle.net/ambiguous/FHd3Y/1/](http://jsfiddle.net/ambiguous/FHd3Y/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T20:50:20.883

出于同样的原因，它`$('#element')`有效而`$#element`无效。`_`是下划线对象的全局变量，就像`$`是对象的全局变量一样`jQuery`。

`_()`说看`_`对象。`_filter`说寻找一个名为`_filter`.

# html - html5 select tag set to transparent and different color when option is highlighted

> ID：10709909
> 
> 赞同：0
> 
> 时间：2012-05-22T20:45:53.903
> 
> 标签：html, select

we have the following code which is a html5 select dropdown menu:

```
 <!doctype html>
    <select name="indexCombobox1">
    <option selected value="null">    Sort By:</option>
    <option value="most_recent">    Most Recent</option>
    <option value="most_popular">    Most Popular</option>
    <option value="featured">    Featured</option>
    </select> 
```

is there a data attribute that can set the drop down background transparent so that you can see what's behind the drop down menu? is there a data attribute that changes the option highlight from default blue to a different color, e.g. yellow?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:09:23.827

CSS(3) should do the trick. Something like:

```
option:hover {
background-color: rgba(0, 0, 0, .2);
} 
```

Edit: With jquery instead of css:

```
$('option').hover(function() {
     $(this).css(backgroundColor: 'rgba(0, 0, 0, .2)');
}, function(){
    $(this).css(backgroundColor: 'blue'); //or something else you consider 'normal'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:03:48.223

I am increasingly using the [jqtransform library](http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/) to style form elements for both mobile webapps and HTML websites.

I can't confirm if it will enable you to make the background transparent, but it can do just about everything else to form elements.

# sql - SQL Server 2008 中的分桶数据

> ID：10709914
> 
> 赞同：3
> 
> 时间：2012-05-22T20:46:28.597
> 
> 标签：sql, sql-server, sql-server-2008

我从如下所示的数据开始：

```
+----------+------------------+--------+
| specimen |       date       | bucket |
+----------+------------------+--------+
| 31598D   | 3/3/2010 11:38   |     10 |
| A113899  | 2/10/2010 13:50  |     11 |
| A121375  | 12/17/2010 10:06 |      2 |
| A122115  | 6/14/2010 9:33   |     10 |
| A122119  | 5/19/2010 10:08  |      3 |
| A122124  | 6/30/2010 11:43  |      4 |
| DD58834  | 6/17/2010 10:08  |      1 |
| 31598A   | 3/3/2010 11:36   |     10 |
+----------+------------------+--------+ 
```

我想知道是否可以将其转换为这样的频率分布：

![在此处输入图像描述](../Images/92d56f3aba84ea927ed564778c60b017.png)

`pivot`我会在 SQL Server 中使用该函数吗？如果是这样，怎么做？

请注意，我确实可以访问 SSRS，并且可以将其用作应对这一挑战的资源。

非常感谢您的指导和时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:02:09.820

```
WITH    bm (maxbucket) AS
        (
        SELECT  MAX(bucket)
        FROM    mydata
        ),
        buckets (bucket) AS
        (
        SELECT  1
        UNION ALL
        SELECT  bucket + 1
        FROM    buckets
        JOIN    bm
        ON      bucket < maxbucket
        )
SELECT  bucket, p.*
FROM    (
        SELECT  b.bucket, DATEPART(month, dt) AS mon
        FROM    buckets b
        LEFT JOIN
                mydata m
        ON      m.bucket = b.bucket
        ) q
PIVOT   (
        COUNT(mon)
        FOR
        mon IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
        ) p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:56:18.107

```
select * from t
pivot (
        count (*) for datepart(m, date) 
        in ([01],[02],[03],[04],[05],
            [06],[07],[08],[09],[10],[11],[12])
) as CountSpec 
```

试试看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:57:38.993

这是未经测试的，因为我手边没有 SQL Server 实例，但它应该说明这个想法；您可以 SUM() 在 case 语句上生成所需的分布。

```
SELECT
      [bucket]
    , SUM( CASE WHEN DATEPART(MONTH,[date]) = 1 THEN 1 ELSE 0 END ) AS [Jan]
    -- repeat the above for each month
FROM
    [your_table]
GROUP BY
    [bucket]
ORDER BY
    [bucket] DESC 
```

# jquery - 如何在 jTemplate 中显示换行符

> ID：10709915
> 
> 赞同：1
> 
> 时间：2012-05-22T20:46:31.403
> 
> 标签：jquery, json, jtemplates

我正在使用`jTemplates 0.7.8`将数据填充到模板 htm 文件中。

唯一的问题是我的 json 数据包含一些 html 标签。说，

```
{'address':'123 Peter St. <br />city, state, zip', ...} 
```

在模板`{$T.record.Address}`中不呈现
为换行符，而是输出文字。

我们能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:28:05.063

现在我找到了解决方案：

改变

```
$('#Container').setTemplateURL("/Templates/MyTemplate.htm"); 
```

进入：

```
$('#Container').setTemplateURL("/Templates/MyTemplate.htm", null, { filter_data: false }); 
```

# jquery - 如何扩展 jQuery 库

> ID：10709917
> 
> 赞同：0
> 
> 时间：2012-05-22T20:46:37.913
> 
> 标签：jquery

我想扩展 jQuery UI 的一个特定方面：[https ://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js)

在源代码中搜索`easeInElastic`以查看以下代码段：

```
easeInElastic: function (x, t, b, c, d) {
    var s=1.70158;var p=0;var a=c; alert('');
    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*9.3;
    if (a < Math.abs(c)) { a=c; var s=p/4; }
    else var s = p/(2*Math.PI) * Math.asin (c/a);
    return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
}, 
```

我需要稍微修改代码，但我不想复制整个库。如何在单独的 .js 文件中包含修改后的代码段，以便覆盖原始代码段？

**编辑：**

在所有建议的方法中，这是唯一有效的方法：

```
$.extend($.easing,
{
    easeInElastic: function (x, t, b, c, d) {
           alert('');
        var s=1.70158;var p=0;var a=c;
        if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
        if (a < Math.abs(c)) { a=c; var s=p/4; }
        else var s = p/(2*Math.PI) * Math.asin (c/a);
        return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:49:19.683

用您自己的方法覆盖该特定方法。

```
$.easing.easeInElastic = function(... 
```

只要将带有该代码的附加 .js 文件放在 jqueryui.js 之后，它就会覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:49:07.800

jQuery 文档有一个关于插件/扩展的页面：

[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

基本上，这是扩展的问题`$.fn`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:51:40.443

```
$.fn.easeInElastic = function(x,t,b,c,d){...} 
```

或使用`$.extend();`

# php - 在这么多字符PHP之后如何将字符串分成两位？

> ID：10709924
> 
> 赞同：1
> 
> 时间：2012-05-22T20:47:01.127
> 
> 标签：php, string, file

我正在寻找一种非常有效的方法来拆分字符串并返回两个部分。

我需要拆分的字符串是 893,004 个字符长，字符串中的每一行是 163 个字符长，我想在 100 行之后拆分它。

使用正则表达式从文件中获取的字符串文件的快速表示，

```
'/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' // 163 characters
'/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' // 163 characters
'/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' '/[a-z0-9]{40}/i' // 163 characters 
```

等等等等，哈哈，

我尝试在 100 行后拆分字符串，

```
// FILE CONTENTS
$content = file_get_contents($file);
// GET PARSER GXDE
$split = preg_split('/^[a-z0-9\s]{16300}$/i', $content, 1); // REGEX DOESNT WORK
var_dump($split[0]); 
```

我只是想在文件中的 100 行之后拆分字符串，这很容易做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:50:31.513

我只会使用[`file()`](http://php.net/manual/en/function.file.php)将文件行作为数组获取或[`fgets()`](http://php.net/manual/en/function.fgets.php)逐行提取文件。然后，这将允许您使用简单的计数器在适当的行数处中断文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:06:09.363

如果你不需要，你真的不应该使用正则表达式。正则表达式是一项相对昂贵的操作，如果您使用正则表达式来获取固定长度的字符串，那只是浪费处理。

目前尚不清楚“在 100 行后拆分字符串”是什么意思。[来自文档的](http://php.net/manual/en/function.fgets.php)这个改编示例将以 100 行块的形式写出文件（如果所有行都是 163 个字符，包括换行符）。

```
$handle = @fopen("/inputfile.txt", "r");
if ($handle) {
    $i = 0;
    while (($buffer = fgets($handle, 163000)) !== false) {
        $i++;
        file_put_contents("chunk$i.txt", $buffer);
    }
    fclose($handle);
} 
```

# mysql - mysql 使用 phpmyadmin 导入 .sql 转储

> ID：10709927
> 
> 赞同：0
> 
> 时间：2012-05-22T20:47:05.600
> 
> 标签：mysql, sql, import, phpmyadmin, quote

在 PHPMyAdmin 中，我正在尝试导入一个似乎使用 --quote-names 创建的 sqldump 文件。对于具有双引号的表名和字段名的 sql 命令，我收到错误消息。如何导入文件 im PHPMyAdmin？

任何帮助将不胜感激。

```
CREATE TABLE IF NOT EXISTS "articles" (
  "ar_id" int(10) unsigned NOT NULL,
  "ar_code" varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL DEFAULT '',
  "ar_group" int(10) unsigned NOT NULL DEFAULT '0',
  "ar_description" varchar(255) NOT NULL DEFAULT '',
  "ar_text" longtext NOT NULL,
  "ar_explanation" text NOT NULL,
  "ar_date" varchar(8) NOT NULL DEFAULT '',
  "ar_last_update" int(10) unsigned NOT NULL DEFAULT '0',
  "ar_creation_date" int(10) unsigned NOT NULL DEFAULT '0',
  "ar_update_user" varchar(15) NOT NULL DEFAULT '',
  PRIMARY KEY ("ar_id")
) AUTO_INCREMENT=317 ; 
```

当我删除双引号时，脚本工作正常。文件大小约为 600 MB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:52:46.907

如果 PHPMyAdmin 不支持，请恢复到本地 mySQL 数据库并从那里转储可导入的版本。

将 SQL 模式设置为`ANSI`：[http ://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_ansi_quotes](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html#sqlmode_ansi_quotes)

在 phpMyAdmin 导入页面上有一个更改 SQL 模式的选项。

# java - 最佳实践 - HashMap 而不是参数列表，好主意吗？

> ID：10709929
> 
> 赞同：7
> 
> 时间：2012-05-22T20:47:08.910
> 
> 标签：java, methods, parameters, signature

嗨 Stackoverflow 社区，

我正在编写一些代码，其中将可选标准标准列表提交给我的 dao。方法签名包含 +/- 10 个参数的列表，我真的不喜欢并想重新格式化。另外，我想避免仅仅因为我添加/删除一个标准就必须重构来自不同层的所有方法签名

```
List searchParams(String name, Long countryCode, ...){
...
} 
```

会成为

```
List searchParams(HashMap<String,Object> map) {
    BeanUtils.populate(this,map);
    ...
} 
```

我有点担心这种情况会发生，因为这是一种不好的做法，因为我放弃了对地图中传递的内容的控制，从而给了我这种灵活性？所以我的问题是我是否走在正确的道路上？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T20:51:26.877

当我遇到这样的情况时，我倾向于创建一个`Params`类并传递*它*。好处是：

*   与使用 a 时不同`Map`，您可以拥有有意义的 getter/settings、适当的验证等；
*   它是类型安全的和自描述的（这意味着很容易找到可用的参数及其类型）。
*   您可以添加新参数而无需重构任何中间层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:51:04.363

您可以定义一个新类来保存/处理您的参数集，因此您可以获得比 HashMap 给您更多的控制权。写起来很烦人，或者至少很乏味，但似乎在灵活性和控制之间取得了更好的平衡。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T20:51:19.043

您可以查看您的参数，看看您是否可以将它们作为一个逻辑组包装到一个对象中。例如，国家代码的名称可以是人员对象

```
public Person {
    private String name;
    private String countryCode;
} 
```

然后，您只需将这个对象向下传递，并可以使用 getter 来获取数据，这应该比需要知道`HashMap`多层上的所有键更容易阅读和维护。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T21:00:31.690

唯一适合使用映射的情况是在设计工厂时，需要将不同类型的参数传递给正在创建的不同类。在所有其他情况下，首选具有专用参数信息类的解决方案。

For an example of where passing a map is appropriate, look at the [`DriverManager.getConnection`](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/DriverManager.html#getConnection%28java.lang.String,%20java.util.Properties%29) method: this method needs to pass parameters to constructors of driver-specific implementations of the `Connection` being created, so it wraps a map into [`Properties`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html), and lets the user pass it through to the driver-specific connection. Note that `DriverManager` does not have another solution that would be future-proof.

I would strongly discourage using a map in all other cases: the added flexibility shifts error detection from compile-time to run-time, which has a strong potential of multiplying your headache beyond belief.

# matlab - 如何在Matlab中给定距离约束生成随机笛卡尔坐标

> ID：10709932
> 
> 赞同：2
> 
> 时间：2012-05-22T20:47:30.623
> 
> 标签：matlab

我需要为 2D 平面生成*N*个随机坐标。给定任意两点之间的距离（距离数为*N(N - 1) / 2）。*例如，假设我需要生成 3 个点，即 A、B、C。我有它们之间的距离，`distAB`即`distAC`和`distBC`。
MATLAB中是否有任何内置函数可以做到这一点？基本上，我正在寻找与`pdist()`功能相反的东西。

我最初的想法是选择一个点（比如 A 是原点）。然后，我可以随机找到 B 和 C 在半径为`distAB`和的两个不同圆上`distAC`。但是 B 和 C 之间的距离可能无法满足`distBC`，如果发生这种情况，我不确定如何进行。而且我认为如果*N*很大，这种方法会变得非常复杂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T22:58:22.993

详细说明 Ansaris 的答案，我制作了以下内容。它假设提供了一个有效的距离矩阵，根据 cmdscale 计算 2D 中的位置，进行随机旋转（也可以添加随机平移），并将结果可视化：

```
%Distance matrix
D = [0 2 3; ...
     2 0 4; ...
     3 4 0];

%Generate point coordinates based on distance matrix
Y = cmdscale(D);

[nPoints dim] = size(Y);

%Add random rotation
randTheta = 2*pi*rand(1);
Rot = [cos(randTheta) -sin(randTheta); sin(randTheta) cos(randTheta) ];
Y = Y*Rot;

%Visualization
figure(1);clf;
plot(Y(:,1),Y(:,2),'.','markersize',20)
hold on;t=0:.01:2*pi;
for r = 1 : nPoints - 1 
    for c = r+1 : nPoints
        plot(Y(r,1)+D(r,c)*sin(t),Y(r,2)+D(r,c)*cos(t));
        plot(Y(c,1)+D(r,c)*sin(t),Y(c,2)+D(r,c)*cos(t));
    end
end 
```

![在此处输入图像描述](../Images/ffdb902223dc26cda786ff7e74ec6e13.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T21:24:56.470

您想使用一种称为经典多维缩放的技术。如果您拥有的距离对应于二维中有效点之间的距离，它将正常工作且无损。幸运的是，MATLAB 中有一个函数可以做到这一点：[`cmdscale`](http://www.mathworks.com/help/toolbox/stats/cmdscale.html). 在距离矩阵上运行此函数后，您可以将第一个输出参数中的前两列视为您需要的点。

# java - System.loadLibrary() 给出 java.lang.UnsatisfiedLinkerError: Can't load library

> ID：10709935
> 
> 赞同：0
> 
> 时间：2012-05-22T20:47:40.217
> 
> 标签：java, dll

我在通过 java 的 System.loadLibrary("name.dll"); 加载简单的 .dll 时遇到问题。我在 C:\libraries\name.dll 中有一个 dll 副本，在 system32 文件夹中有另一个副本。请注意，C:\libraries 不在我的路径环境变量中。出于某种原因，当我调用 System.loadLibrary("name.dll") 时，我得到：

```
java.lang.UnsatisfiedLinkError: Can't load library: C:\libraries\name.dll
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1706)
    at java.lang.Runtime.load0(Runtime.java:770)
    at java.lang.System.load(System.java:1003) 
```

即使我从 C:\libraries 中删除了 name.dll，我仍然遇到同样的错误。System.load 是否有任何理由在不在路径中的位置找到 .dll，为什么即使在文件被删除后它仍在该位置查找？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:31:47.067

You need to change -Djava.library.path to point to system32 instead of C:\libraries.

# ruby-on-rails - 什么时候线程框架比事件驱动框架更好？（即，rails 什么时候比 node.js 更好？）

> ID：10709938
> 
> 赞同：11
> 
> 时间：2012-05-22T20:47:42.497
> 
> 标签：ruby-on-rails, django, node.js, frameworks, event-driven

我了解什么是线程框架（Rails、Django、Symfony2、……）。而且我了解什么是事件驱动框架（Node.js、EventMachine、Twisted ……）以及为什么它对实时、聊天、速度等非常有用……此外，它们似乎不会对正常用例造成问题。所以：

*   事件驱动框架的缺点是什么？
*   什么时候我应该更喜欢 Rails 而不是 Node.js？
*   为什么不是所有新的 Web 服务器都使用 EventMachine、Twisted 或 Node.js 编写？
*   Django 或 Rails 等著名框架会成为事件驱动还是消亡？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-22T23:04:10.977

> 那么事件驱动框架的缺点在哪里呢？

1.  **熟悉。**因为事件驱动的 Web 编程是如此不同，程序员需要一段时间才能适应它。当您在截止日期前工作时，使用您所知道的、行之有效的东西会更容易。
2.  ~~**图书馆支持。**Node 拥有数量惊人的模块，但要赶上 Ruby 和 Python 还有很长的路要走~~。*更新：[Node 现在有比 Python 或 Ruby 更多的已发布模块可用](http://www.modulecounts.com/)。*
3.  **部署。**IT 人员习惯于线程化框架。要利用事件驱动的框架，您需要自上而下地异步。现在您可以使用 Node.js 进行开发，但是您是否能够有效地部署它，或者您是否必须管理自己的服务器？
4.  **毫无根据的担忧。**看起来像问题但实际上并非如此的事情：
    *   **事件驱动编程对 CPU 密集型应用程序不利**：原因是 CPU 密集型计算会阻塞服务器。这是绝对正确的，但实际上，它可以通过生成另一个进程并将其视为 I/O 来克服，例如，通过使用 Node 的`child_process.exec`.
    *   **事件驱动编程仅适用于需要高并发的应用程序**：这里的原因是事件驱动编程比传统的 Web 应用程序编程“更难”，所以除非你有充分的理由，否则不值得去做。我个人认为情况并非如此——事件驱动编程不再困难，但它却**大不相同**。在某个时候，大量的程序员会熟悉事件驱动的方法，这种担忧就会消失。
    *   **事件驱动编程是一堆嵌套回调。**当您第一次学习它时可能是这样，但最终您会发现如何以可读的方式构建您的代码。
5.  **文档。**Node 及其第 3 方库的文档很糟糕，通常只包含一个`README.md`. 来自 Python 世界，我们习惯了优秀的文档，这是一个很大的缺点。这正在慢慢变得更好（我们需要更多[这样](http://mongodb.github.com/node-mongodb-native/)的文档）。

> 什么时候我应该更喜欢 Rails 而不是 Node.js？

*   当您或您的团队更喜欢 Ruby 而不是 JavaScript 时。
*   当您或您的团队不熟悉 Node 并且您需要完成工作时。
*   当您需要使用 Rails 中 Node 尚不具备的功能时。
*   当您需要部署到现有的基于 Rails 的基础架构时。
*   当您必须说服管理层您应该使用 Node.js，但如果项目失败，您又不想成为失败者。

> 为什么所有新的 Web 服务器都不是用 EventMachine、Twisted 或 Node.js 编写的？

往上看。

> 著名的 Django 或 Rails 框架会转向事件驱动还是消亡？

Django 和 Rails 将存在很长时间。这些框架中有很多应用程序，没有理由重写它们。并且有一个庞大的人才库，这通常是开发新 Web 应用程序时的考虑因素。

（但请参阅Django 的主要开发人员的[Quora 回答](http://www.quora.com/What-are-the-benefits-of-developing-in-node-js-versus-Python)，支持 Node）。

# android - 使用提交快速更改首选项后应用程序崩溃（

> ID：10709946
> 
> 赞同：0
> 
> 时间：2012-05-22T20:48:32.650
> 
> 标签：android, commit, sharedpreferences, preferences, dialog

如果他们想保存新值，我需要检查首选项中的用户输入。我相信代码是正确的......因为如果我慢慢改变值，那根本没有问题。如果我更改得太快，应用程序就会崩溃。

我正在使用 commit() 来编辑首选项。这是一个太慢的方法吗？

我在尝试什么？：如果用户给出了一个空字符串，我会给出一个警告对话框，实习生我会将 pref 改回旧值。这是代码：

```
public class Preferences extends PreferenceActivity implements OnSharedPreferenceChangeListener {
//save settings
    static String SMStext;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            addPreferencesFromResource(R.xml.preferences);

            SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);

            //-- First get SMStext and save in Strings
            SMStext = sp.getString("SMSText", "0");

            //SharedPreferences.Editor prefEditor = sp.edit();
            sp.registerOnSharedPreferenceChangeListener(this);   

    }

  @Override
  public void onSharedPreferenceChanged(SharedPreferences sp, String key) {

    String smstriggerworderror = "String cannot be empty";

    if (key.equals("SMSText")) {

        if  sp.getString("SMSText", "0").equals(""){

            SharedPreferences.Editor prefEditor = sp.edit();

            prefEditor.putString("SMSText", SMStext);
            prefEditor.commit();
                //write current value back to value and refresh interface
            SMStext = sp.getString("SMSText", "0");
                //Show alert dialog
            showdialog(smstriggerworderror);
            //finish();

        }
        //write current value back to value
        SMStext = sp.getString("SMSText", "0");
    }

private void showdialog(String message) {
      //create alertbox
      AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
      alertbox.setMessage(message);
      alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
      // Click listener on the neutral button or alert box
          public void onClick(DialogInterface arg0, int arg1) {
              finish();
          }
      });

      // show the alert box
      alertbox.show();      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:11:49.347

在`onSharedPreferenceChanged`你这样做的过程中，`prefEditor.commit();`这将调用`onSharedPreferenceChanged`监听器，然后它会`commit()`一遍又一遍地调用，直到...... **StackOverFlow 错误**。

使固定：

不要在 OnSharedPreferencesChanged 侦听器中更改您的 SharedPreferences。

# django - 外键字段不同的数据库。姜戈

> ID：10709947
> 
> 赞同：1
> 
> 时间：2012-05-22T20:48:39.990
> 
> 标签：django, django-models

是否可以在不同的数据库上使用具有外键字段的模型？例子：

```
class MultiBDModel(models.Model):
    db1_user = models.ForeignKey(User) # here suppose to be foreign key on `db1`
    db2_user = models.ForeignKey(User) # and here on `db2` 
```

也许以某种方式复制用户。申请它的自定义经理。返回使用 using='db1' 设置的查询

在`settings.py`：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'db1',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    },

    'website': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'db2',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3\.              # Set to empty string for default. Not used with sqlite3.
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-20T16:02:06.883

不。正如@ignacio-vazquez-abrams 所写，一个模型必须在同一个数据库中包含所有字段。

* * *

## 但

作为替代方案，您可以使用代理模型来链接来自两个不同数据库的模型。

## 目标

一个模型应该同时提供来自 db1 和 db2 的字段

## 一般技巧

*   您有`ContactMessage`来自 db1 的模型，我们将命名为`legacy_db`. 我们假设您不想接触此模型，因为它来自另一个项目。
*   创建一个[代理模型](https://docs.djangoproject.com/en/1.11/topics/db/models/#proxy-models) `ProxyContactMessage`，它具有相同的属性`ContactMessage`。
*   使用[数据库路由器](https://stackoverflow.com/questions/9653449/django-database-router#12548439)告诉 Django 在哪里查找`legacy_db`对象`ProxyContactMessage`。
*   `ExtendedContactMessage`使用您要添加的字段添加新模型。`OneToOneField`用声明一个`ProxyContactMessage`。此数据将保存到您的 db2`django_db`中。
*   您的代理模型不能保存新字段，因为它是抽象的，但它可以具有询问相关`ExtendedContactMessage`对象（如果有）的方法。添加所需的可调用对象。

## 例子

在您`legacy_app/models.py`的 db1 中，模型`legacy_db`是：

```
class ContactMessage(models.Model):
    subject = models.CharField(max_length=255)
    message = models.TextField()
    created_at = models.DateTimeField()
    created_by = models.CharField(max_length=255)

    class Meta:
        managed = False
        db_table = 'contact_message'

    def __unicode__(self):
        return self.subject 
```

因此，您在以下位置创建`myapp/models.py`：

```
class ProxyContactMessage(ContactMessage):
    class Meta:
        proxy = True
        verbose_name = 'Contact message'
        verbose_name_plural = 'Contact messages'

    def add_extension(self):
        e = ExtendedContactMessage(contact_message=self)
        e.save()
        return e

    def mark_as_processed(self):
        try:
            e = self.extendedcontactmessage
        except ExtendedContactMessage.DoesNotExist:
            e = self.add_extension()
        e.mark_as_processed()

    def processed(self):
        return self.extendedcontactmessage.processed

    def processed_at(self):
        return self.extendedcontactmessage.processed_at

class ExtendedContactMessage(models.Model):
    contact_message = models.OneToOneField(ProxyContactMessage)
    processed = models.BooleanField(default=False, editable=False)
    processed_at = models.DateTimeField(null=True, default=None, editable=False)

    def mark_as_processed(self):
        self.processed = True
        self.processed_at = timezone.now()
        self.save() 
```

请注意，只有非抽象模型`ExtendedContactMessage`将保存在 db2 中，因为`ProxyContactMessage`它是抽象的。

在`settings.py`中，使用类设置 DATABASE_ROUTERS

```
class LegacyRouter(object):
    """
    A router to control all database operations on models in the
    legacy database.
    """
    def db_for_read(self, model, **hints):
        if model.__name__ == 'ProxyContactMessage':
            return 'legacy_db'
        return None
    def db_for_write(self, model, **hints):
        """
        Attempts to write in legacy DB for ContactMessage.
        """
        if model.__name__ == 'ProxyContactMessage':
            return 'legacy_db'
        return None 
```

您的默认路由器将所有内容发送到 db2。

最后，您可能有一个管理类，例如：

```
def mark_as_processed(modeladmin, request, queryset):
    for obj in queryset:
        obj.mark_as_processed()
mark_as_processed.short_description = "Mark as processed"

class ProxyContactMessageAdmin(admin.ModelAdmin):
    list_display = (
        'subject',
        'message',
        'created_at',
        'created_by',
        'processed',
        'processed_at',
    )
    actions = (mark_as_processed,)
admin.site.register(ProxyContactMessage, ProxyContactMessageAdmin) 
```

* * *

有关的：

[为代理类使用路由器](https://stackoverflow.com/a/41638954/5033681)

[“破解” Meta 中的 app_name](https://stackoverflow.com/a/41930531/5033681)

[捕获查询集](https://stackoverflow.com/a/4650544/5033681)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:51:31.167

不，ORM 不能做任何数据库引擎不能做的事情。

# iphone - 在objective-c iphone中动态设置键值编码的键

> ID：10709948
> 
> 赞同：0
> 
> 时间：2012-05-22T20:48:43.890
> 
> 标签：iphone, xcode, nsdictionary

我有一个名为 mycallback 的类：

```
[mycallback setValue:[code objectForKey:@"abc"] forKey:@"abc"]; 
```

我的很多控制器都调用它。问题是我从 mysql 数据库中提取数据并将其发送到 mycallback。所以我可能不知道关键是什么。除此之外，我不想在 mycallback 类中声明实例变量，因为我希望它分开。

不幸的是，如果代码在上面运行，我会收到以下消息：

```
exception 'NSUnknownKeyException', reason: '[<CallbackClass 0x7b6c5d0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key fence.' 
```

所以我想动态设置键而不是在 mycallback 中。所以我为 NSDictionary 创建了一个类别并添加了 valueForUndefinedKey 方法：

```
- (id)valueForUndefinedKey:(NSString *)key
{
    NSLog(@"This key not being called %@", key);
    return nil;
} 
```

但是 1) valueForUndefinedKey 没有被调用，并且 2) 我不确定要放什么来使错误消失。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:10:00.643

您已经定义`valueForUndefinedKey:`了处理返回值的内容。但是在您的代码片段中，您似乎正在尝试为未定义的键设置值。在这种情况下，使用的方法是：

```
setValue:forUndefinedKey: 
```

一个示例，基于您正在尝试执行的操作：

```
- (void)setValue:(id)value forUndefinedKey:(NSString *)key {
    NSLog(@"Attempting to set value: %@ for key: %@", value, key);
} 
```

# jquery - 获取 D3 中数组的实际最大值

> ID：10709950
> 
> 赞同：2
> 
> 时间：2012-05-22T20:49:00.603
> 
> 标签：jquery, arrays, max, d3.js

我正在使用 jQuery 引入一串以逗号分隔的数字，以便在 D3 中进行绘图。我试图获得这个数组的最大值，但进展不顺利。

```
var x_data = $('.CostImport').text().split(',');
var y_data = $('.PriceImport').text().split(',');
var r_data = $('.SalesImport').text().split(',');
var c_data = $('.ZoneImport').text().split(',');

 for (i = 0; i < x_data.length; i++) {
   data.push({ "x": x_data[i], "y": y_data[i], "c": c_data[i], "r": r_data[i] });
   }

alert(d3.max(r_data));
alert(d3.max(data, function (d) { return d.r })); 
```

这两个警报都向我传递了相同的数字，这是不正确的。实际最大值是 928870，但我回到了 9975。绘制一切正常（散点图，用 r 确定大小和 c 颜色），所以我有点困惑，为什么我不能拉最大数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:54:20.323

听起来这些值被视为字符串。您将需要使用`parseInt`or `parseFloat`（取决于值的精度）将它们转换为整数，以便`max`函数按预期工作。

这是一个将字符串数组转换为 int 的快速函数。这将是更好的原型，但是对于一个快速而肮脏的示例，这将起作用：

```
function toIntArray(arr) {
    for (var i = 0; i < arr.length; i++) { 
        arr[i] = +arr[i]; 
    } 
    return arr;
} 
```

保持您的代码不变，但修改以下几行：

```
r_data = toIntArray(r_data);
data = toIntArray(data);

alert(d3.max(r_data));
alert(d3.max(data, function (d) { return d.r })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:08:06.653

遇到同样的问题，但我处理的是数据对象而不是数组。发现 d3 中的 filter 函数在将字符串转换为数字时非常有用。下面是一个例子

```
data.filter(function(d,i) {
    d.x = +d.x;
d.y = +d.y;
});

xmax = d3.max(data, function (d) { return d.x });
console.log(xmax); 
```

# sql - 将字段映射到 MS Access 中自己的行

> ID：10709952
> 
> 赞同：2
> 
> 时间：2012-05-22T20:49:06.057
> 
> 标签：sql, ms-access

我的任务是将数据从 MSSQL 服务器迁移到 MySQL 服务器。我认为首先将 MSSQL 数据库转换为 MS Access 数据库会更容易，所以我可以搞砸它，然后将其导出为 MySQL。

所以，我有一张桌子，叫做公司：

```
companyID |    name        |     c_phon  |  c_email                   | c_address
    1       StackOverflow     5555555555     Joel@stackoverflow.com      NYC
    2       Google            5558675309     Google@google.com           NYC 
```

在我们的新数据库中，我们更改了这些字段的保存方式。我们使用的是首选项表，而不是每一行都有电话号码、电子邮件和地址。

偏好：

```
prefID  |  prefName
  1         c_phone
  2         c_email
  3         c_address 
```

我的问题是，如何在我们的 companyPrefs 表中将每个字段转换为它自己的行。它应该看起来像这样：

```
companyID | prefID | prefValue
    1         1      5555555555
    1         2      Joel@stackoverflow.com
    1         3      NYC
    2         1      5558675309
    2         2      Google@google.com
    2         3      NYC 
```

我不知道如何使用 vbscript 或其他什么，所以我试图使用 SQL 来做到这一点。

```
INSERT INTO comanyPrefs (companyID, prefID, prefValue)
SELECT companyID, prefID, @fieldName
FROM companies, preferences
WHERE @fieldName = prefName 
```

显然这是行不通的。如何使用变量字段名称选择字段？如何为每个字段插入一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:07:03.123

你在正确的轨道上。但是，您需要为每个可能的字段插入，如下所示：

```
INSERT INTO companyPrefs (companyID, prefID, prefValue)
SELECT companyID, (select prefID from prefs where prefName = 'c_phone'), c_phone
FROM companies where c_phone is not null
UNION
SELECT companyID, (select prefID from prefs where prefName = 'c_email'), c_email
FROM companies where c_email is not null
UNION
SELECT companyID, (select prefID from prefs where prefName = 'c_address'), c_address
FROM companies where c_address is not null 
```

演示：[http ://www.sqlfiddle.com/#!3/5cf87/1](http://www.sqlfiddle.com/#!3/5cf87/1)

# javascript - 当用户单击提交时，希望将 javascript 用于多个选择菜单

> ID：10709953
> 
> 赞同：1
> 
> 时间：2012-05-22T20:49:06.957
> 
> 标签：javascript, select, onclick

我实际上是在尝试复制此产品过滤器 (LINK-->) www.safavieh.com/rugs (<--LINK)，除了我使用 4 个而不是 6 个选择菜单。

我应该使用 Onclick 事件吗？我对 JS 很陌生，我在 PHP 中做了一些表单验证，但是我们的电子商务平台不支持 PHP，所以我需要使用 JS。

我显然不是要求有人把它写出来，而是带路并指出我正确的方向。我自己学习这一点很重要。

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:16:31.183

如果您将选择菜单包装在表单元素中，并使用`<input type=submit>`提交按钮，那么您可以使用表单的`onSubmit`事件在表单提交之前进行任何预处理。表单的所有字段都可以通过表单 domNode 访问。例如，如果您使用 访问表单`<form id='myForm'>`，`var form = document.getElementById('myForm');`则可以使用 获取 select`<select id="mySelect>`的值`form.myForm.value`。

由于您的过滤客户端，您仍然可以使用 onSubmit 事件，只是阻止它的默认操作：

```
form.onSubmit = function(event) {
    event.preventDefault();
    // filtering code goes here.
}; 
```

# javascript - document.getElementById('blah').value 未按预期运行

> ID：10709956
> 
> 赞同：0
> 
> 时间：2012-05-22T20:49:08.890
> 
> 标签：javascript

在任何情况下，我必须先将焦点设置在输入文本上 ( `document.getElementById('the_input_text').focus()`)，然后才能设置值 ( `document.getElementById('the_input_text').value='123'`) 才能看到输入文本中的值 (123)？

我只是问，因为我必须在我正在处理的这个页面上这样做，以便我看到输入文本中的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:51:37.143

不，没有任何情况需要先聚焦元素……除非有一些写得很糟糕的单独的 JavaScript 反复硬设置值，直到或除非聚焦。

你可以试试：

```
setTimeout(function(){
  document.getElementById('the_input_text').value='123'
},2000); 
```

…查看设置后是否有 JS 覆盖了您的值。

*我已经测试以确保 HTML5`placeholder="..."`属性不会导致此问题。*

# php - 我可以将 str_replace 放在另一个文件中吗？

> ID：10709958
> 
> 赞同：2
> 
> 时间：2012-05-22T20:49:11.987
> 
> 标签：php, str-replace

我正在处理一个应该替换另一个文件中的变量的文件。到目前为止，我尝试过：

```
$File = "$dir/submit.php";
$fh = fopen($File, 'r') or die("Couldn't edit the Config-file. Please report to admin.");
$chosendb = str_replace('$chosendb = comments;','$chosendb = wuhuws_$dir;','$chosendb');
fclose($fh); 
```

$dir 是用户输入。注释是数据库中需要替换为前缀_$dir 的表。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:50:26.783

您忘记再次写入文件。

```
// Read the file
$content = file_get_contents("$dir/submit.php");

// Do the editing
$content = str_replace('$chosendb = comments;','$chosendb = wuhuws_$dir;', $content);

// Save the file
file_put_contents("$dir/submit.php", $content); 
```

但是，正如 Zerkms 所说（*或至少打算这样做 ;-)*），使用 PHP 编辑 PHP 通常不是一个**好主意**，尤其是因为您稍后会发现很难调试脚本，因为它的代码会在运行时动态更改。

是否有任何理由不能包含此文件并手动设置这些变量，例如：

```
// Include the file    
require("$dir/submit.php"); 
// Edit the variable
$chosendb = "wuhuws_$dir"; 
```

# android - RTSP 在 Android 上播放视频（编码）

> ID：10709959
> 
> 赞同：0
> 
> 时间：2012-05-22T20:49:15.997
> 
> 标签：android, rtsp, darwin

我有一个**Darwin 服务器**，示例视频（来自 Darwin 安装）正在运行（它们可以通过 Android 媒体播放器播放）。它们的编码（通过 Android 日志）是

```
05-22 02:23:50.544: I/ASessionDescription(117): v=0
05-22 02:23:50.544: I/ASessionDescription(117): o=StreamingServer 3546635030 1110207730000 IN IP4 192.168.1.6
05-22 02:23:50.544: I/ASessionDescription(117): s=\sample_100kbit.mp4
05-22 02:23:50.544: I/ASessionDescription(117): u=http:///
05-22 02:23:50.544: I/ASessionDescription(117): e=admin@
05-22 02:23:50.544: I/ASessionDescription(117): c=IN IP4 0.0.0.0
05-22 02:23:50.544: I/ASessionDescription(117): b=AS:96
05-22 02:23:50.544: I/ASessionDescription(117): t=0 0
05-22 02:23:50.544: I/ASessionDescription(117): a=control:*
05-22 02:23:50.544: I/ASessionDescription(117): a=mpeg4-iod:"data:application/mpeg4-iod;base64,AoJrAE///w/z/wOBdgABQNhkYXRhOmFwcGxpY2F0aW9uL21wZWc0LW9kLWF1O2Jhc2U2NCxBWUVDQVV3Rkh3TklBTWtnQUdVRUx5QVJBRzNkQUFFaytBQUJKUGdGSUFBQUFiRHpBQUFCdFE3Z1FNRFBBQUFCQUFBQUFTQUFoRUQ2S0RBZzhxSWZCaEFBUkFBQUFsZ0FBQUFBSUFBQUFBQURBVElDbndNdUFHVUFCSUNBZ0JSQUZRQVlBQUFBVGlBQUFFNGdCWUNBZ0FJVmtBWVFBRVFBQUI5QUFBQWZRQ0FnQUFBQUF3PT0EDQEFAADIAAAAAAAAAAAGCQEAAAAAAAAAAANpAAJARmRhdGE6YXBwbGljYXRpb24vbXBlZzQtYmlmcy1hdTtiYXNlNjQsd0JBU2daTUNvRmNtRUVIOEFBQUIvQUFBQkVLQ0tDbjQEEgINAABkAAAAAAAAAAAFAwAAYAYJAQAAAAAAAAAA"
05-22 02:23:50.554: I/ASessionDescription(117): a=isma-compliance:1,1.0,1
05-22 02:23:50.554: I/ASessionDescription(117): a=range:npt=0-  70.00000
05-22 02:23:50.554: I/ASessionDescription(117): m=video 0 RTP/AVP 96
05-22 02:23:50.554: I/ASessionDescription(117): b=AS:76
05-22 02:23:50.554: I/ASessionDescription(117): a=rtpmap:96 MP4V-ES/90000
05-22 02:23:50.554: I/ASessionDescription(117): a=control:trackID=3
05-22 02:23:50.554: I/ASessionDescription(117): a=cliprect:0,0,242,192
05-22 02:23:50.554: I/ASessionDescription(117): a=framesize:96 192-242
05-22 02:23:50.554: I/ASessionDescription(117): a=fmtp:96 profile-level-id=1;config=000001B0F3000001B50EE040C0CF0000010000000120008440FA283020F2A21F
05-22 02:23:50.554: I/ASessionDescription(117): a=mpeg4-esid:201
05-22 02:23:50.554: I/ASessionDescription(117): m=audio 0 RTP/AVP 97
05-22 02:23:50.554: I/ASessionDescription(117): b=AS:20
05-22 02:23:50.554: I/ASessionDescription(117): a=rtpmap:97 mpeg4-generic/8000/2
05-22 02:23:50.554: I/ASessionDescription(117): a=control:trackID=4
05-22 02:23:50.554: I/ASessionDescription(117): a=fmtp:97 profile-level-id=15;mode=AAC-hbr;sizelength=13;indexlength=3;indexdeltalength=3;config=1590
05-22 02:23:50.554: I/ASessionDescription(117): a=mpeg4-esid:101 
```

但是，当我尝试（从同一台服务器）流式传输我的视频时，它不起作用（它们被提示和编码）。这是日志：/

```
05-22 02:24:21.865: I/ASessionDescription(117): v=0
05-22 02:24:21.865: I/ASessionDescription(117): o=StreamingServer 3546635061 1337206009000 IN IP4 192.168.1.6
05-22 02:24:21.875: I/ASessionDescription(117): s=\football_1.mp4
05-22 02:24:21.875: I/ASessionDescription(117): u=http:///
05-22 02:24:21.875: I/ASessionDescription(117): e=admin@
05-22 02:24:21.875: I/ASessionDescription(117): c=IN IP4 0.0.0.0
05-22 02:24:21.875: I/ASessionDescription(117): b=AS:304
05-22 02:24:21.875: I/ASessionDescription(117): t=0 0
05-22 02:24:21.875: I/ASessionDescription(117): a=control:*
05-22 02:24:21.875: I/ASessionDescription(117): a=x-copyright: MP4/3GP File hinted with GPAC 0.4.6-DEV (internal rev. 7) (C)2000-2005 - http://gpac.sourceforge.net
05-22 02:24:21.875: I/ASessionDescription(117): a=range:npt=0-   8.80000
05-22 02:24:21.875: I/ASessionDescription(117): m=video 0 RTP/AVP 96
05-22 02:24:21.875: I/ASessionDescription(117): b=AS:304
05-22 02:24:21.875: I/ASessionDescription(117): a=rtpmap:96 MP4V-ES/90000
05-22 02:24:21.875: I/ASessionDescription(117): a=control:trackID=65536
05-22 02:24:21.875: I/ASessionDescription(117): a=fmtp:96 profile-level-id=1; config=000001b001000001b58913000001000000012000c48d8800550c04241443000001b24c61766335312e34302e34
05-22 02:24:21.875: I/ASessionDescription(117): a=framesize:96 384-288 
```

如何正确编码？

几秒钟后，我得到

```
error (1, -2147483648) 
```

这是（我相信） - 编码错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:09:07.273

问题出在根深蒂固的 HTC Desire (CyanogenMod) - RTSP 的某些东西不太正确：/

# css - 页脚在 div 上浮动

> ID：10709965
> 
> 赞同：2
> 
> 时间：2012-05-22T20:49:24.383
> 
> 标签：css, html, css-float, footer

我有一个容器 div，其外部放置了一个页脚 div。首先，我的页脚在屏幕上，我不想使用“绝对”规则来定位它。如何将页脚放在页面底部？

CSS 代码：

```
#container{
margin:auto;
width:85%;
height:auto;
}
#header {
background-image: url('http://static.manpoints.uk.to/images/header.png');
background-repeat: repeat-x;
background-color: #dd4814;
height: 140px;
}
#footer{
background-image: url('http://static.manpoints.uk.to/images/gradient-grey.png');
background-repeat: repeat-x;
background-color: #F0F0F0;
padding: 15px;
margin-top: 30px;
height: 90px;
width: 100%;
position: relative;
} 
#content {
margin: 10px;
width: 75%;
height: 100%;
float: left;
} 
```

HTML 代码：

```
<div id="container">
<div id="header">
<div id="logo"><span>Earn Man Points<br>Earn Respect</span></div>
</div>
<div id="menubar" align="center">
<ul id="menu">
<li><?php menuIndex(); ?></li>
<li><?php menuUser(); ?></li>
<li><a href="/leaderboard/" title="View the ManPoints Leaderboard">Leaderboard</a><li>
<li><a href="/upload.php" title="Upload content to Man Points">Upload</a></li>
</ul>
</div>
<div id="content">
<h1>Title</h1>
<div id="image_display"><img src="img.jpg"></div>
<div id="image_info">
<h2>Man Points: 7</h2>
<p>Next Image</p>
</div>
</div>
</div>
<div id="footer">Footer Content</div> 
```

有问题的网站：http: [//manpoints.uk.to/image/30](http://manpoints.uk.to/image/30)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:51:51.457

添加

```
clear: both; 
```

到页脚元素。这是因为它上面的内容是浮动的，没有被清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:14:48.940

我有同样的问题。我能够使用这个例子来修复它。

[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

# sql - ACCESS Join 没有不同的标识符

> ID：10709966
> 
> 赞同：0
> 
> 时间：2012-05-22T20:49:31.153
> 
> 标签：sql, join

我有两个表，它们没有用于加入的不同标识符。但是，Table1 有一个字段 (Milestone)，其中包含一个格式为 999ABCD 的文本字符串。表 2 有一个主题字段，其中也包含此信息；但是，它作为记录主题字段中标题的一部分位于随机位置。

有没有办法根据 Table1.Milestone 中的值连接两个表（Table1.Milestone 到 Table2.Subject）并在 Table2.Subject 中搜索匹配的文本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:07:23.863

我不确定这是否可行，但可能会让您朝着正确的方向开始：

```
select * from Table1 T1
join Table2 T2
on T2.Subject LIKE '%' + T1.Milestone + '%' 
```

我不建议这样做，即使它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:09:02.657

我不使用 Access，但我已经让它在 MS SQL 中为你工作。如果您可以在 Access 中找到与 CHARINDEX 类似的功能，这将适用于您：

设置：

```
DECLARE @table1 TABLE (milestone varchar(20))
DECLARE @table2 TABLE (subj varchar(1000), details varchar(1000))

INSERT INTO @table1 VALUES ('999ABCD')
INSERT INTO @table1 VALUES ('999XYZ')

INSERT INTO @table2 VALUES ('Subject is 999ABCD', 'I should join only to 999ABCX')
INSERT INTO @table2 VALUES ('Subject 999XYZ is me', 'I should join only to 999xyz')
INSERT INTO @table2 VALUES ('Subject zzzzz is me', 'Nobody gets me') 
```

实际查询：

```
SELECT *
from @table1 t1
JOIN @table2 t2 ON CHARINDEX(milestone, subj) > 0 
```

这是输出：

```
milestone   subj    details
999ABCD Subject is 999ABCD  I should join only to 999ABCX
999XYZ  Subject 999XYZ is me    I should join only to 999xyz 
```

希望有帮助！

戴夫

# jquery - 站点地图 JQuery 样式.. 使用 attr。加上页面网址

> ID：10709969
> 
> 赞同：0
> 
> 时间：2012-05-22T20:49:58.797
> 
> 标签：jquery

因此，我有一个站点 url 字符串的循环示例并尝试将页面添加到链接中，但我不想处理已修复的域。现在它不起作用..但我正在尝试修复它。

```
 <script>
    $(document).ready(function() {

    url =  $(this).attr('href', $(this).attr('href'));

       $('#sitemap a').attr('href','http://site.com/?c=123&p='+url);

    });
    </script>

    // trying to get output  http://site.com/?c=123&p=page1.html
    <div id="sitemap">
    <a href="page1.html">test</a>
    <a href="page2.html">test</a>
    <a href="page3.html">test</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:02:42.363

所以你想要做的实际上是：

```
<script>
    $(document).ready(function() {
        $('#sitemap a').each(function () {
             // Cache the jQuery object
             var current = $(this);

             // Get the current url
             var currentUrl = current.attr('href');

             // Replace the current url with the new one (appending the url above)
             current.attr('href', 'http://site.com/?c=123&p=' + currentUrl);
        });
    });
</script> 
```

在您编写的这行代码中，`this`实际上是指`document`. 并且`document`没有一个名为`href`.

```
url =  $(this).attr('href', $(this).attr('href')); 
```

# .net - Silverlight 可以托管 .NET Winforms 用户控件吗？

> ID：10709970
> 
> 赞同：2
> 
> 时间：2012-05-22T20:50:00.467
> 
> 标签：.net, silverlight

我有一个为 .NET Winforms 编写的用户控件。是否可以从 Silverlight 中托管此控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:59:38.543

不，Silverlight 是一个精简的跨平台 clr，它不执行 winforms。Winforms 与 Windows 的内置 gui 原语密切相关。

# visual-studio-2010 - Visual studio 2010 convert project manually

> ID：10709975
> 
> 赞同：1
> 
> 时间：2012-05-22T20:50:15.130
> 
> 标签：visual-studio-2010, project-conversion

I've got an asp.net project. When I first opened it up with VS 2010 I got the project conversion wizard and ignored it. But now I want to convert my project to latest version.

Any idea how I can do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:34:30.160

If it's not popping up when you open the project in VS 2010, then you've already converted it.

To change the framework to 4.0, right click on the project and select Properties. On the application tab of the project properties, change the Target Framework to .Net Framework 4\.

This will update web.configs and such files the same way the conversion wizard does anwyays.

# c# - 在 C# 麻烦中将文件移动到子文件夹中？

> ID：10709983
> 
> 赞同：0
> 
> 时间：2012-05-22T20:50:32.527
> 
> 标签：c#, visual-c#-express-2010

出于某种原因，安装这个的用户，当他们点击按钮时，什么也没有发生。另外，如果我尝试并抓住，它说文件已经存在，但它不存在。子文件夹会，但不是文件。怎么了？这是我的代码：

```
 string pathUser4 = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
            string pathDownload4 = (pathUser4 + @"\Downloads\");
            string sourceFile = pathDownload4 + listBox1.Text;

            string pathdoc5 = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
            string pathDownload5 = (pathdoc5 + @"\iracing\setups\");
            string destinationFile = pathDownload5 + comboBox1.Text;

            File.Move(sourceFile, destinationFile);
        }
        catch { }
            if (comboBox1.Text == "Select File Destination")
            {
                MessageBox.Show("Please Select A Destination Folder", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:01:23.113

我认为您的第一个问题是在您尝试移动文件后检查 comboBox1.Text 是否有正确的值。

其次，按照 MichelZ 的建议使用 Path 对象。它更容易，不应该引起任何问题。

以下是您的代码希望更改的内容：

```
 // TODO: check for listBox1.Text to be blank or non-file

        if (comboBox1.Text == "Select File Destination")
        {
            MessageBox.Show("Please Select A Destination Folder", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }

        string sourceFile = Path.Combine(Environment.SpecialFolder.UserProfile, "Downloads", listBox1.Text;
        string destinationFile = Path.Combine(Environment.SpecialFolder.MyDocuments, "iracing", "setups", comboBox1.Text;
        File.Move(sourceFile, destinationFile);
    }
    catch { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:04:05.027

您是在*验证*变量的内容`sourceFile`和`destinationFile`（通过调试），还是假设组合按您期望的那样工作？

另外，请告诉我您很清楚此实现带来的注入风险，并且您确保仔细验证`listBox1`和`comboBox1`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T21:12:17.443

首先，同一目录下的文件名和目录名不能完全相同。在 Windows 中，目录和文件的名称不是单独的属性。你的评论给了我一个暗示。因此，您从 .NET 获得的异常是准确的。

这个问题与 try-catch 块无关，似乎你在责备它。了解您的错误总是一个好主意。

一种编码方法是在 File.Move 之前检查文件/目录是否存在，这是一种老式方法:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T21:14:15.350

了解 File.Move 之前的问题在哪里可能很有用

> Debug.Assert(!File.Exists(destinationFile),String.Format("文件已存在:{0}",destinationFile))

如果无法调试，则可以显示具有等效用途的 MessageBox

# php - 在 foreach 中添加先前的值 - PHP

> ID：10709984
> 
> 赞同：1
> 
> 时间：2012-05-22T20:50:35.777
> 
> 标签：php

假设我有这样的数据字符串......

```
one=1&two=2&three=3&four=4&two=2 
```

我正在使用 php`foreach`来获取键/值并在这一点上对我的需要进行排序

```
foreach($_POST as $key => $value) {
   if ($key == "two") {
    // $result = Take $value and add it to the previous $value .",";
   }
} 
```

我试图达到的目标是如何获取重复的键并添加循环中生成的先前值。例如：解决方案是`$result = 2,2,`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:57:09.117

如果您将`POST`问题中的字符串发送到服务器，您只会看到 的一个值`two`，而不是两者。第二个将覆盖第一个值。

如果您想要一个键的多个值，您可以使用`[]`.

```
one=1&two[]=2&three=3&four=4&two[]=2 
```

现在，`$_POST['two']`将是一个数组（`one`，`three`并且`four`将是字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:59:04.297

这行不通。您只能从 POST、GET 和 REQUEST 获得最后一个值。你需要解析 $_SERVER['QUERY_STRING']，如果你解析了它，你可以迭代你的数组：

```
foreach(explode('&',$_SERVER['QUERY_STRING']) as $k => $v)
{
 $val = explode('=',$v);
 $result[$val[0]] = isset($result[$val[0]]) ? $result[$val[0]].','.$val[1]:$val[1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T21:03:19.523

```
//initial data string
$string = "one=1&two=2&three=3&four=4&two=2";

$results = array();

$data = explode('&', $string);

foreach($data as $param) {

    $query = explode('=', $param);

    $key = $query[0];
    $value = $query[1];

    // check to see if the key has been seen before. 
    // if not, store it in an array for now.
    if(!isset($results[$key])){
        $results[$key] = array($value);
    }
    else{
        // the key is a duplicate, store it in the array
        $results[$key][] = $value;
    }

}

// implode the arrays so that they're in the $result = "2,2" format
foreach($data as $key => $value){
    $data[$key] = implode(',', $value);
} 
```

也有人提到过，但如果这是来自服务器帖子，那么您将不会获得重复的密钥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T21:09:04.853

牢记[Rocket](https://stackoverflow.com/a/10710055/618347)关于多个 POSTed 值的建议，您可以`implode()`在任何到达的数组上使用：

```
foreach($_POST as $key=>$value)
{
    if(is_array($value))
        $_POST[$key]=implode(',',$value);
} 
```

获取您似乎想要的字符串值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T20:55:39.777

将它们作为数组存储在 foreach 循环之外。

```
$keys = [];
foreach($_POST as $key => $value) {
   if ($key == "two") {
     $keys[] = $value;
   }
}
return $keys 
```

# python - 损坏的 Python 2.7 GAE 安装导致 ImportError

> ID：10709986
> 
> 赞同：3
> 
> 时间：2012-05-22T20:50:37.093
> 
> 标签：python, google-app-engine, windows-7, python-2.7

Gae sdk 运行没有错误（使用 2.7 和 webapp2），但突然停止。现在我什至无法从[入门页面](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)中获取示例。

我已经完成了 python 和 gae 的全新安装，没有骰子。我尝试了不同版本的 python 2.7（2.7.3、activestate 2.7.2）和 gae（1.6.4、1.6.5、1.6.6），但我仍然收到下面的 ImportError。

附加信息：

1.  我可以在 cmd 或 python shell 中导入 _socket 模块而不会出错。
2.  我的笔记本电脑上有完全相同的问题。
3.  我女朋友的 Vista 机器可以很好地运行示例代码。
4.  我没有安装 Python 2.5，我猜 GAE 正在引用 T:\Program Files (x86)\Google\google_appengine\ 中的 python25.dll 文件

> ```
> >     2012-05-22 12:56:59 Running command: "['T:\\Python27\\pythonw.exe', 'T:\\Program Files
> > (x86)\\Google\\google_appengine\\dev_appserver.py',
> > '--admin_console_server=', '--port=8080',
> > u'T:\\Users\\Wyatt\\Desktop\\helloworld']"
> >     Traceback (most recent call last):
> >       File "T:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 126, in <module>
> >         run_file(__file__, globals())
> >       File "T:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 122, in run_file
> >         execfile(script_path, globals_)
> >       File "T:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_main.py",
> > line 157, in <module>
> >         from google.appengine.tools import appcfg
> >       File "T:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line
> > 41, in <module>
> >         import mimetypes
> >       File "T:\Python27\lib\mimetypes.py", line 29, in <module>
> >         import urllib
> >       File "T:\Python27\lib\urllib.py", line 26, in <module>
> >         import socket
> >       File "T:\Python27\lib\socket.py", line 47, in <module>
> >         import _socket
> >     ImportError: Module use of python25.dll conflicts with this version of Python.
> >     2012-05-22 12:56:59 (Process exited with code 1) 
> ```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-07T22:04:18.280

我有同样的问题，并通过从环境变量中删除 PYTHONPATH 来解决。我正在安装 SimpleCV 并且问题来自它。

转到系统 => 高级系统参数 => 环境变量，然后在用户变量中查找 PYTHONPATH 并将其删除。重新启动 Google AppEngine，它应该可以工作。

# less - 如何使用 require.js 包含 less.js

> ID：10709990
> 
> 赞同：3
> 
> 时间：2012-05-22T20:50:43.477
> 
> 标签：less, requirejs

网站上的所有 .js 文件都使用 require.js 包含在内。我如何也可以使用 require.js 包含 less.js？当我使用标签脚本包含它时，它的工作量并没有减少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T16:33:54.927

有一个 require-less 插件

[https://github.com/guybedford/require-less](https://github.com/guybedford/require-less)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:44:39.483

你可能不应该那样做。您总是将 CSS 放在 HTML 文档的最顶部，尽可能高，这是给定的。当您使用 LESS 而不是 CSS 时，请将 LESS 文件和 LESS.js 文件放在文档上尽可能高的位置。没错，在浏览器中使用 LESS 意味着您需要在页面加载之前提供 2 个文件。

可能有一些方法可以解决它，例如将您的 CSS 打包在 LESS 文件中作为变量，但这是草率且困难的。如果性能对您来说意义重大，您应该考虑在哪里编译 LESS 文件。

在开发时使用桌面应用程序进行编译，例如 Less Parser（跨平台）或 Less.App (mac)（还有更多）。这些程序在后台运行，并在您每次保存文件时编译您的 less 文件。

如果您在 Ant 或 Maven 中使用 Asual 的 LESS Jar (github) 进行构建，请在构建时进行编译。

如果你有 .NET 或 IIS (dotlesscss.org)、php (leafo.com/lessphp)、NodeJS、Java (less rhino)、ColdFusion 等，请在服务器上编译。只需在 github.com 上搜索所有代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T10:09:56.640

**就我而言，我会做类似...**

```
// Remove old/minify css & Add style.less in <head>
$('link[href*="style.min.css"]').remove();
$('head').append($('<link rel="stylesheet/less" type="text/css"/>').attr('href','style.less'));
less = {env:'development',poll:3000,logLevel:1};

// So run here
require(['less'],function(less){
   less.watch();
}); 
```

*这只是一个例子+在我的情况下测试*

# pattern-matching - 在允许解构的同时保留不变量

> ID：10709992
> 
> 赞同：7
> 
> 时间：2012-05-22T20:50:46.800
> 
> 标签：pattern-matching, ocaml, invariants

我想定义一个类型，以便所有构造都通过可以保留不变量的模块成员，但允许解构以进行模式匹配。

我只是在学习 OCaml，但以下几乎适用于具有左边应该严格小于右边的不变量的 int 对

```
module Range : sig
  type t = private { left:int; right:int }
  exception InvalidRange of (int*int)
  val make : int -> int -> t
end = struct
  type t = { left:int; right:int }
  exception InvalidRange of (int*int)
  let make left right = if left < right
    then { left; right }
    else raise (InvalidRange (left, right))
end 
```

这样有效

```
# let p = Range.make 1 2;;
val p : Range.t = {Range.left = 1; Range.right = 2}
# let q = Range.make 2 1;;
Exception: Range.InvalidRange (2, 1). 
```

和时尚后的解构作品

```
# let {Range.left=x; Range.right=y} = p;;
val x : int = 1
val y : int = 2 
```

构建失败时

```
# let badp = {Range.left = 2; Range.right = 1};;
  let badp = {Range.left = 2; Range.right = 1};;
Error: Cannot create values of the private type Range.t
# open Range;;
# let badp = {left = 2; right=1};;
  let badp = {left = 2; right=1};;
Error: Cannot create values of the private type Range.t 
```

但我真正想做的是具有解构元组的语法便利。以下不起作用：

```
module Range : sig
  type t = private int*int
  exception InvalidRange of (int*int)
  val make : int -> int -> t
end = struct
  type t = int*int
  exception InvalidRange of (int*int)
  let make left right = if left < right
    then (left, right)
    else raise (InvalidRange (left, right))
end 
```

但是我不能使用元组模式对其进行解构：

```
# let r = Range.make 1 2 ;;
val r : Range.t = (1, 2)
# let (a, b) = r;;
  let (a, b) = r;;
Error: This expression has type Range.t
       but an expression was expected of type 'a * 'b 
```

我可以将类型更改为，`type t = R of (int * int)`但我需要这些尽可能轻量级的内存。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T21:01:02.940

如[手册](http://caml.inria.fr/pub/docs/manual-ocaml/manual021.html#s-private-types-abbrev)中所述，您需要显式强制：

```
# let (a, b) = (r :> int*int);;
val a : int = 1
val b : int = 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T05:37:56.303

一个简单的方法是添加一个`to_tuple`函数并使游览类型抽象。

```
module Range : sig
  type t
  exception InvalidRange of (int*int)
  val make : int -> int -> t
  val to_tuple : t -> (int * int)
end = struct
  type t = { left:int; right:int }
  exception InvalidRange of (int*int)

  let make left right = if left < right
    then { left; right }
    else raise (InvalidRange (left, right))

  let to_tuple t = t.left, t.right

end 
```

那么你可以做

```
let (a, b) = to_tuple range 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T20:57:23.853

就内存而言，您的解决方案`type t = R of (int * int)`将是轻量级的，并且在语法上比强制解决方案更轻量级。OCaml 优化了单构造函数数据类型的情况，因此您无需为此付费。（我没有对此声明的官方参考，但 Adam Chlipala（OCaml 专家）在这里提到：http: [//adam.chlipala.net/cpdt/html/Subset.html](http://adam.chlipala.net/cpdt/html/Subset.html)）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T21:26:37.957

我刚刚用[Objsize](http://forge.ocamlcore.org/projects/objsize/)运行了这个测试（报告 OCaml 值的大小）。

```
# type fancy = R of int * int;;
type fancy = R of int * int
# Objsize.objsize (R (3, 5));;
- : Objsize.info = {Objsize.data = 2; Objsize.headers = 1; Objsize.depth = 0}
# Objsize.objsize (3,5);;
- : Objsize.info = {Objsize.data = 2; Objsize.headers = 1; Objsize.depth = 0} 
```

如果您相信这些值（我相信），那么使用您自己的单构造函数类型而不是元组不会有大小损失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T21:15:55.093

实际上 OCaml 运行时编码非常简单。这是一个您可能会发现有用的工具 [https://github.com/bobzhang/caml-inspect](https://github.com/bobzhang/caml-inspect)

# ruby - Ruby-vips 图像处理库。有没有很好的使用例子？

> ID：10709995
> 
> 赞同：6
> 
> 时间：2012-05-22T20:51:08.263
> 
> 标签：ruby, image-processing, vips

我对图像处理完全陌生。我对内部 JPEG 是什么以及它是如何工作的一无所知。

我想知道，是否可以在某处找到执行以下简单操作的 ruby​​ 代码：

1.  打开jpeg文件。
2.  遍历每个像素并将其颜色设置为 fx green。
3.  将结果写入另一个文件。

我对如何使用 ruby​​-vips 库
[https://github.com/ender672/ruby-vips实现这一点特别感兴趣](https://github.com/ender672/ruby-vips)

我的目标 - 学习如何使用 ruby​​-vips 执行基本的图像处理操作（伽玛校正、亮度、色调......）

任何比 ruby​​-vips 的 github 页面上的“hello world”更复杂的工作示例的链接都将受到高度赞赏！

如果有 ruby​​-vips 的替代品，我也会感谢他们。

* * *

**更新**

自从我问这个问题以来发生了很多事情：

*   ruby-vips 是一颗宝石：[http ://libvips.blogspot.co.uk/2012/06/ruby-vips-launches.html](http://libvips.blogspot.co.uk/2012/06/ruby-vips-launches.html)
*   vips8 完全重写，现在基于 ruby​​-ffi
*   源代码库在这里：[https ://github.com/jcupitt/ruby-vips/](https://github.com/jcupitt/ruby-vips/)
*   使用示例：[https ://github.com/jcupitt/ruby-vips/wiki/Examples](https://github.com/jcupitt/ruby-vips/wiki/Examples)
*   vips图像处理的基本概念：[https ://github.com/jcupitt/ruby-vips/wiki/Basic-concepts](https://github.com/jcupitt/ruby-vips/wiki/Basic-concepts)
*   ruby-vips 集成到 Ruby on Rails 的 CarrierWave 上传插件：[https ://github.com/eltiare/carrierwave-vips](https://github.com/eltiare/carrierwave-vips)
*   ruby-vips 是 Rails6 中 ActiveStorage 的官方后端之一

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T08:24:28.200

***update** ruby-vips has changed a bit since this answer was written. I've revised it for the current (2018) version.*

I'm one of the maintainers of libvips, the image processing library that ruby-vips wraps.

Tim's ruby-vips repository hasn't been touched for a while. I have a fork here that works with current libvips:

[https://github.com/jcupitt/ruby-vips](https://github.com/jcupitt/ruby-vips)

There are some examples here:

[https://github.com/jcupitt/ruby-vips/tree/master/example](https://github.com/jcupitt/ruby-vips/tree/master/example)

To set the red and blue channels to zero and just leave a green image you might multiply R and B by zero and G by 1\. ruby-vips uses arrays to represent pixel constants, so you can just write:

```
out = in * [0, 1, 0] 
```

A complete runnable example might be:

```
#!/usr/bin/ruby

require 'vips'

im = Vips::Image.new_from_file '/home/john/pics/theo.jpg'
im *= [0, 1, 0]
im.write_to_file 'x.jpg' 
```

There's a trick you can use for `new_from_file`: if you know you will just be doing simple top-to-bottom operations on the image, like arithmetic or filtering or resize, you can tell ruby-vips that you only need sequential access to pixels:

```
im = Vips::Image.new_from_file '/home/john/pics/theo.jpg', access: :sequential 
```

Now ruby-vips will stream your image. It'll run the load, the multiply and the save all in parallel and never keep more than a few scanlines of pixels in memory at any one time. This can give a really nice improvement to speed and memory use.

To change image gamma you might try something like:

```
im = im ** 0.5 * 255 / 255 ** 0.5 
```

Though that'll be a bit slow (it'll call pow() three times for each pixel), it'd be much faster to make a lookup table, run the pow() on that, then map the image through the table:

```
lut = Vips::Image.identity
lut = lut ** 0.5 * 255 /255 ** 0.5
im = im.maplut lut 
```

Any questions, please feel free to open them on the rubyvips issue tracker:

[https://github.com/jcupitt/ruby-vips/issues](https://github.com/jcupitt/ruby-vips/issues)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T21:19:15.020

对不起，我不知道 ruby​​-vips，但[ImageMagick](http://www.imagemagick.org/script/index.php)在图像处理方面是经典之作。有[RMagick](http://www.imagemagick.org/RMagick/doc/)（[当前 repo](https://github.com/rmagick/rmagick)）形式的 Ruby 绑定，您可以从 ImageMagick 文档中获得很多功能，但这里也有三个教程[，](http://rmagick.rubyforge.org/portfolio.html)以及网络上的大量示例。

如果你真的想深入研究图像处理的理论，它的根源是信号处理的一种形式（这非常令人兴奋和有益，因为它通常允许你在图像*和*音频/视频信号上应用非常相似的算法，但是它最终会在数学上变得非常沉重 - 傅立叶变换），那么，如果数学不吓到你，我只能推荐阅读 Gonzalez 和 Woods 的[书](https://rads.stackoverflow.com/amzn/click/com/013168728X)，我会说这是该领域的明确参考。它很昂贵，但那里有你需要的一切，让你开始并超越。如果您想在不先花很多钱的情况下开始使用， [这里还有一个包含免费电子书链接的页面。](http://www.iprg.co.in/ebooks.htm)

# java - JApplet 可以在一个端口上侦听并在另一个端口上写入吗？

> ID：10709997
> 
> 赞同：1
> 
> 时间：2012-05-22T20:51:17.610
> 
> 标签：java, tomcat, port, japplet

好吧，这是我目前正在开发 JApplet 和应用程序的问题。基本上，当机器启动时，应用程序将启动，您将看不到任何其他内容。在同一台机器上，将运行 Appache Tomcat 服务器以通过网络访问 JApplet。所以 JApplet 不一定总是在那里。所以我想知道应用程序是否有可能监听给定的端口，这样当 JApplet 上线时，它会在端口上说“嘿，我在线做点什么！”。应用程序也可以在端口上与 JApplet 对话。这样他们就可以互相交谈了。

如果不清楚，我可以制作一个图表来阐明需求，但基本上他们可以互相交谈吗？如果可以，他们是如何做到的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:08:25.463

只要有签名，applet 就可以连接和侦听任何端口。

看看小程序能做什么或不能做什么：

[http://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)