# StackOverflow 问答 11460000-11460999

# ant - 使用多个“依赖”时如何检查一次条件？

> ID：11460007
> 
> 赞同：2
> 
> 时间：2012-07-12T20:22:22.060
> 
> 标签：ant

我想要一个“主”蚂蚁目标，它取决于多个“工人目标”，（每个目标都“做好一件事”）

但是，我想有条件地执行“主”目标，即如果不满足条件，则不执行“工人”子目标

（具体来说，主目标创建并填充数据库。子目标创建模式、填充表等。主目标中的最后一步留下一个标记文件以指示“数据库创建一次”。在后续运行中，该过程不应尝试创建数据库。

## 问题

我怎样才能以“反”（即没有“antcall）”和“干”（不要重复自己）的方式实现这一点。

## 例子

```
<target name="check-db-created">
    <available file="db.created.marker.txt" property="db.already.created"/>
</target>

<target name="create-new-db" 
        unless="db.already.created"
        depends="check-db-created,create-db-mssql,create-tables,compile-sp,disable-constraints.....">
</target>

<target name="create-db-mssql" >
   ..do stufff
</target> 
```

## 注释

问题是即使“主”目标不需要运行，“子目标”（“create-db-mssql”、“create-tables”等）也会执行。Ant 文档清楚地讨论了这一点。

> 重要提示：if 和 unless 属性仅启用或禁用它们所附加的目标。它们不控制条件目标所依赖的目标是否被执行。事实上，在目标即将执行之前，它们甚至都不会被评估，并且它的所有前辈都已经运行。

我可以通过向所有“工作目标”添加“除非”子句来围绕问题进行编码，但希望避免重复。

另外，我使用 antcall 如下，但更愿意避免蚂蚁世界的“GOTO”。

```
<target name="create-new-db" depends="check-db-created"
        unless="db.already.created">
  <antcall target="create-new-db-internal"/>
</target> 

<target name="create-new-db-internal"
        depends="create-db,create-tables,compile-sp,disable-constraints,insert-base-data,insert-installer-generated-sql,insert-kb-data"
>
</target> 
```

谢谢

# visual-c++ - MSVC 10.0 c 与 c++ 的区别

> ID：11460011
> 
> 赞同：0
> 
> 时间：2012-07-12T20:22:29.600
> 
> 标签：visual-c++, portability, c89, visual-studio-2010

我在编译下面的C程序时遇到了困难，这只是我试图理解winsock的开始。问题是在编译程序client.c时，我得到一个错误（C2143）缺少';' 在“类型”之前但是当我将源文件重命名为“client.cpp”时，程序编译时没有错误或警告。我不明白语法错误是 C 但不是 C++ 中的错误。

```
#define WIN32_LEAN_AND_MEAN
#define DEBUG

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdlib.h>
#include <stdio.h>

#pragma comment (lib, "Ws2_32.lib")
#pragma comment (lib, "Mswsock.lib")
#pragma comment (lib, "AdvApi32.lib")

#define PORT "12186"
#define BUFFERLEN 512

int main(int argc, char* argv[])
{
    /*
        Variable Declorations
    */
    WSADATA wsaData;
    SOCKET ConnectionSocket = INVALID_SOCKET;
    struct addrinfo *result = NULL, *ptr = NULL, hints;
    int addrResult;

    ZeroMemory(&hints, sizeof(hints));
    hints.ai_family = AF_UNSPEC; //unspecified so we can be compatible with IPv4 and IPv6
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;
    #ifdef DEBUG
    printf("IPPROTO_TCP: %d", IPPROTO_TCP);
    #endif

    //Buffers
    char * sendbuffer; // Error C2143
    char recievebuffer [BUFFERLEN]; //Error C2143

    //Initialize Winsock
    addrResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if(addrResult !=0)
    {
        printf("WSAStartup failed: %d", addrResult);
    }
    addrResult = getaddrinfo(argv[1], PORT, &hints, &result);
    if(addrResult != 0)
    {
        printf("getaddrinfo failed: %d", addrResult);
        WSACleanup();
        return 1;
    }
    return 0;
} 
```

编辑：C 变量声明必须在 MSVC C 函数中的所有其他代码之前进行。问题解决了。这是 C89 的东西还是只是 MSVC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:27:17.267

问题可能出在变量声明的地方。将它们与其他变量一起放在函数的开头。

[请参阅 MSDN 中可能导致此错误代码的最后一个示例。](http://msdn.microsoft.com/en-us/library/0afb82ta.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:26:35.327

VS 附带的 C 编译器仅实现 C89（说真的……），因此您必须在给定函数的顶部声明所有变量。

# script# - 是否可以用 C# 编写代码并使用 Script# 在 .NET 程序集和 JavaScript 之间共享它？

> ID：11460012
> 
> 赞同：1
> 
> 时间：2012-07-12T20:22:30.393
> 
> 标签：script#

我正在研究使用 Script# 通过将其编译为 JavaScript 来与客户端共享我们的一些 C# 业务逻辑。

问题是，是否可以从另一个 .NET 程序集中引用 Script# 类库？我试过在快速测试中这样做，但[失败得很惨](https://stackoverflow.com/questions/11459579/why-am-i-getting-a-missingmethodexception-when-using-a-script-assembly-from-ano)。

查看 Script# 源代码让我相信这是不可能的，因为没有为 Script# 的 mscorlib 类提供实现代码。[以 String 类](https://github.com/nikhilk/scriptsharp/blob/master/src/Libraries/CoreLib/String.cs)为例。

如果有人可以对此提供明确的答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:47:29.453

我所做的是创建两个项目。#script 项目和 .net 类库项目。然后我链接每个 .cs 文件（将现有项目添加为链接）。

您可以使用#IF SCRIPTSHARP .... #ENDIF 预处理器来避免编译特定的#script 属性。

最后，您可以编译这两个库并重用代码。

我每天都使用它，而且效果很好。

# visibility - 可见性：隐藏；后不透明度：0；

> ID：11460014
> 
> 赞同：0
> 
> 时间：2012-07-12T20:22:33.837
> 
> 标签：visibility

我有一个问题，我需要在它消失后将 div 的可见性设置为“隐藏”。到目前为止我的代码：

```
$('#layer')
    .stop(true, true)
    .animate({
        opacity:"0",
    },1000); 
```

div 覆盖了整个页面，因此设置不透明度并不是让 div 下的所有元素再次可点击的解决方案。

但是当我将代码更改为此时：

```
$('#layer')
    .stop(true, true)
    .animate({
        opacity:"0",
        visibility: "hidden"
    },1000); 
```

它已经淡出并且不可见，但仍然存在并且干扰了我在它下面的对象的可点击性。

语法有问题吗？

希望你能帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:25:01.093

如果对象不应该在那里，请`.fadeOut(1000)`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:24:51.077

~~`visibility`在 CSS 中，和之间有一个关键的区别`display`。可见性属性将使某些内容不可见，同时仍将其分解到页面的显示中。说`visibility: hidden`基本上是在你的对象上披上隐形的外衣——其他东西仍然可以撞到它，但对象只是隐形的。~~

~~因此，您正在寻找`display: none`将其从模型中完全删除的方法~~

JK，我今天学到了一些东西！

# django - django-tastypie 外键麻烦

> ID：11460019
> 
> 赞同：1
> 
> 时间：2012-07-12T20:23:04.520
> 
> 标签：django, tastypie

我有一个 post 模型和一个 postImage 模型：

```
class PostImage(models.Model):
    post =  models.ForeignKey(Post, related_name="images")
    # @@@@ figure out a way to have image folders per user...
    image = models.ImageField(upload_to='images')
    description = models.CharField(max_length=100)
    order = models.IntegerField() 
```

我为两者创建了美味的资源：

```
class PostImageResource(ModelResource):
    class Meta:
        queryset = PostImage.objects.all()
        resource_name = 'postImage'

class PostResource(ModelResource):
    images = fields.ForeignKey(PostImageResource, 'images', full=True)
    class Meta:
        queryset = Post.objects.all()
        resource_name = 'post' 
```

当我尝试浏览时`api/v1/post/?format=json`出现以下错误：

```
The object '' has an empty attribute 'image' and doesn't allow a default or null value. 
```

**我还没有任何 PostImages。**

如果我摆脱 中的`images = fields.foreignKey`线路`PostResource`，它会起作用。如果我浏览到`api/v1/postImage/?format=json`，则不会显示任何错误，只是一个空集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:14:20.750

试试这个：

```
class PostResource(ModelResource):
    images = fields.OneToManyField(PostImageResource, 'images', full=True)
    class Meta:
        queryset = Post.objects.all()
        resource_name = 'post' 
```

-------- 已编辑 --------

唔...

在您的模型中：

```
class PostImage(models.Model):
    post =  models.ForeignKey(Post, related_name="images")
    image = models.ImageField(upload_to='images', null=True, blank=True)
    description = models.CharField(max_length=100)
    order = models.IntegerField() 
```

注意 null=True 和 blank=True。

# facebook - Facebook 不允许使用应用访问令牌列出好友列表。我什么都没有，不是吗？

> ID：11460022
> 
> 赞同：2
> 
> 时间：2012-07-12T20:23:29.830
> 
> 标签：facebook, facebook-graph-api

我创建了一个应用程序，并在应用程序界面中添加了 16 个测试用户。我做到了，所以其中 5 个用户不隶属于该应用程序，而其他 11 个是。我让一个用户与其他 15 个用户成为朋友。然后我尝试了各种方法来检索给定用户的朋友列表。

[https://graph.facebook.com/](https://graph.facebook.com/) {我们的应用程序上的随机用户 ID}/friends?fields=installed&access_token={我们的应用程序访问令牌}&format=json

产生了这个

```
{
   "error": {
      "message": "(#604) Can't lookup all friends of {RANDOM USER ID ON OUR APP}. Can only lookup for the logged in user or the logged in user's friends that are users of your app.",
      "type": "OAuthException",
      "code": 604
   }
} 
```

FQL 也好不到哪里去。

[https://graph.facebook.com/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=](https://graph.facebook.com/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=) {我们应用程序上的随机用户 ID}&access_token={我们的应用程序访问令牌}&format=json

产生这个

```
{
   "error": {
      "message": "A user access token is required to request this resource.",
      "type": "OAuthException",
      "code": 102
   }
} 
```

我明白这里发生了什么。这些电话试图检索相关用户的所有朋友，并且由于某些用户不是应用程序的成员，因此我不允许拨打此电话。因此，如果可能的话，我需要拨打一个电话，让我只获得属于该应用程序成员的朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T17:43:12.043

您需要使用用户访问令牌来访问用户信息。

顺便说一句，你不能在 2.0 中再这样做了

看看[这里](https://stackoverflow.com/a/23417628/2197604)。

# xcode - 安装和使用 Pantomime 框架... Pantomime/Pantomime.h 未找到

> ID：11460028
> 
> 赞同：0
> 
> 时间：2012-07-12T20:23:55.517
> 
> 标签：xcode, cocoa, frameworks

我刚刚下载并编译了 Pantomime 以便在我的 Cocoa 应用程序中使用 SMTP。第一个问题是它太旧了……所以我更改了构建设置以使用最新的 SDK，并消除了旧的 PPC 构建设置。

在这些更改之后，一切都编译得很好（或者至少看起来是这样。）

接下来，我根据 Apple 文档建议将 Pantomime.framework 安装到 /Library/Frameworks 目录中。

然后，我在 Build Phases 选项卡下将框架导入到我的项目中，其中显示“Link Binaries to Libraries”。

到目前为止，一切似乎都像使用 WebKit.framework 和 ScriptingBridge.framework 一样工作。

最后，我在代码中添加了以下内容：

```
#import <Pantomime/Pantomime.h> 
```

当它自动完成其余部分时，我已经到了“Pa”，所以它显然知道我在寻找什么。但是，当我尝试编译我的代码时，我收到以下错误：

```
Lexical or Preprocessor Issue "Pantomime/Pantomime.h" file not found. 
```

所有其他框架似乎都可以工作，但这个没有，我真的不知道为什么（我对使用框架比较陌生。）

有人对我在这里做错了什么有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:41:56.683

我从来没有使用过哑剧，但这种情况在 Xcode 中一直发生在我身上，所以虽然我一般是开发新手，但我敢打赌这只是 Xcode 的一个错误。这是我修复它的方法：

在 Xcode 中，点击 command-1 切换到导航器的文件/文件夹视图。

在 Finder 中显示 Pantomime.h 和 .m 文件，无论它们存储在何处。

将它们拖到导航器中。

Xcode 会提示您再次确认添加，我通常将其设置为“如果需要复制文件”。

Xcode 将导入。然后，您应该删除导航器中的旧引用。之后它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T06:15:06.150

我遇到了这个问题。解决方案是在哑剧所在的位置设置“构建设置”->“标题搜索路径”值。祝你好运！

# asp.net - 如何使用 Open XML 和 C# 从 docx 文件中的图像中获取替代文本

> ID：11460029
> 
> 赞同：0
> 
> 时间：2012-07-12T20:23:55.637
> 
> 标签：asp.net, image, openxml

我正在创建一个 web 表单，它将对 word 文档进行 508 合规性检查。我正在浏览 MSDN 和其他网站，以从用户选择的文件中获取我需要的信息。我找不到的一件事是如何查找图像，并检查它们是否有替代文本。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:02:46.087

插入 2007+ Word 文档的图像是`Drawing`对象。因此，您可以遍历 XML 的`w:drawing`成员。

[http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.drawing.aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.drawing.aspx)

该`w:drawing`成员将有一个称为孩子的孩子，该孩子`w:inline`是`Inline`班级的一部分。

[http://msdn.microsoft.com/en-us/library/documentformat.openxml.drawing.wordprocessing.inline.aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.drawing.wordprocessing.inline.aspx)

该`w:inline`成员将有一个名为 的成员`wd:docPr`。

[http://msdn.microsoft.com/en-us/library/documentformat.openxml.drawing.wordprocessing.docproperties.aspx](http://msdn.microsoft.com/en-us/library/documentformat.openxml.drawing.wordprocessing.docproperties.aspx)

该`wd:docPr`成员可能有一个名为的字段`title`，其中包含替代文本标题和一个字段，称为字段`descr`，其中包含所有替代文本。

示例 XML：

```
<w:drawing xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="357A850A" wp14:editId="384E9053" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing">
        <wp:extent cx="5943600" cy="4457700" />
        <wp:effectExtent l="0" t="0" r="0" b="0" />
        <wp:docPr id="1" name="Picture 1" descr="ALL TEXT HERE" title="ALT TEXT TITLE HERE"/>
        ... 
```

我强烈建议您使用 OpenXML SDK 附带的 OpenXML Productivity Tool。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T19:57:16.710

您可以使用 unzip 和 lxprintf 的副本（LTXML2 工具包的一部分）更轻松地执行相同的操作，方法是在循环中解压缩幻灯片并在每个幻灯片上运行 lxprintf 以定位 wp:docPr 元素并输出 @ 的值描述和@title，例如

```
for f in `unzip -l demo.pptx | grep ppt/slides/slide.*\.xml | awk '{print $NF}'`; do 
  unzip -p demo.pptx $f |\
    lxprintf -e 'w:drawing/wp:inline/wp:docPr' "%s, %s\n" @descr @title -
done 
```

# java - Java 编译器是否允许对静态调用进行流敏感？

> ID：11460035
> 
> 赞同：5
> 
> 时间：2012-07-12T20:24:07.177
> 
> 标签：java, jls

这是来自 JLS 部分 8.4.8.2 的简短示例。

```
class Super {
    static String greeting() { return "Goodnight"; }
    String name() { return "Richard"; }
}
class Sub extends Super {
    static String greeting() { return "Hello"; }
    String name() { return "Dick"; }
}
class Test {
    public static void main(String[] args) {
        Super s = new Sub();
        System.out.println(s.greeting() + ", " + s.name());
    }
} 
```

根据示例的讨论，运行的输出`main()`将是“晚安，迪克”。这是因为静态方法是根据调用它们的变量/表达式的静态类型来调用的。

这是我的问题：任何对流敏感的编译器都可以计算出`s`调用时存储的任何对象的类型必须始终为`Sub`，因此如果允许编译器使用该信息，即使调用静态方法也可能有一些动态绑定的感觉。为什么不允许这样做？Java 是否有明确的目标，即每个编译器都生成行为完全相同的字节码，还是有其他原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:32:10.530

其实这里`s.greeting()`就相当于`Super.greeting()`因为`s`被定义为`Super`和静态方法不关心类实例。正如你肯定知道的那样，它们是全班的。所以直接从类实例调用静态方法是没有意义的。当然，实例`s`是`Sub()`您指定的，因此调用了非静态方法`Sub.name()`。

来自[Java 官方教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)：

> 您还可以使用对象引用来引用静态字段，例如
> 
> `myBike.numberOfBicycles`
> 
> 但不鼓励这样做，因为它没有明确说明它们是类变量。

允许静态方法在类实例方面是明智的，只会使代码的可读性更低、更神秘、更难调试，而无需真正添加任何有用的特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:54:20.010

它不是太特定于java。想象一下你的“智能”编译`s.getClass().greeting()`：

```
class A extends Sub {
    static String greeting() { return "Allo"; }
}
class B extends Sub {
    static String greeting() { return "Brrr"; }
}
Super s = condition? new A() : new B();
assert s.greeting.equals(Sub.greeting()); // If compiler cannot infer condition. 
```

编译器是否应该跨多个源执行此操作？库外，源代码可能不可用。

我宁愿认为java中的谬误是，这`s.greeting()`是允许的。

由于静态继承没有用，最好不要发明这样的功能。

# perl - 如何将光标移回终端中的一个位置？

> ID：11460038
> 
> 赞同：4
> 
> 时间：2012-07-12T20:24:11.650
> 
> 标签：perl, text-cursor

我想展示一个交替角色的动画`/`，`|`并且`\`。

我应该如何始终在终端的同一个单元格中写作？我需要将光标移回一个位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:38:19.753

大多数终端将`chr(8)`通过向后移动光标来处理退格 ( )。关键是禁用缓冲。

```
use Time::HiRes qw( sleep );

$| = 1;  # Disable buffering on STDOUT.

my $BACKSPACE = chr(0x08);

my @seq = qw( | / - \ );
for (;;) {
   print $seq[0];
   push @seq, shift @seq;
   sleep 0.200;
   print $BACKSPACE;
}

print "$BACKSPACE $BACKSPACE"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:59:03.573

ikegami的答案的一个变种:)

```
use Time::HiRes qw(sleep);
$| = 1;  # Disable buffering on STDOUT ;)

for(1..10) {
    for (qw( | / - \ )) {
        print "$_\b";
        sleep 0.2;
    }
}
print 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:26:55.100

我不知道你如何在 perl 中输出东西，但这通常是通过输出退格字符 \b（ASCII 代码 8）来完成的。例如，在 C++ 中，这是通过输出 char(8) 来完成的。

# iphone - 添加游戏结束场景

> ID：11460039
> 
> 赞同：1
> 
> 时间：2012-07-12T20:24:11.930
> 
> 标签：iphone, objective-c, xcode, ios5, cocos2d-iphone

我想将这个游戏结束场景添加到我试图为我的家庭作业做的这个游戏中，我似乎没有它，如果你杀死目标，游戏结束场景就会弹出。我试着把我的代码放在每一行，看看它是否最终能工作，但没有。所以现在我不得不寻求一些帮助。

. 文件

```
 - (void)addTarget10 {
 Boss *target10 = nil;    
 if ((arc4random() % 2) == 0) {{
    target10 = [WeakAndFastBoss9 boss9];
     }}  else {
    target10 = [WeakAndFastBoss9 boss9];
    }                      
 [[SimpleAudioEngine sharedEngine] playEffect:@"lastboss.mp3"];        
 // Determine where to spawn the target along the Y axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minY = target10.contentSize.height/2;
int maxY = winSize.height - target10.contentSize.height/2;
int rangeY = maxY - minY;
int actualY = (arc4random() % rangeY) + minY;
// Create the target slightly off-screen along the right edge,
// and along a random position along the Y axis as calculated above
target10.position = ccp(winSize.width + (target10.contentSize.width/2), actualY);
[self addChild:target10 ];
// Determine speed of the target
int minDuration = target10.minMoveDuration;
int maxDuration = target10.maxMoveDuration;
int rangeDuration = maxDuration - minDuration;
int actualDuration = (arc4random() % rangeDuration) + minDuration;
// Create the actions
       id actionMove = [CCMoveTo actionWithDuration:actualDuration position:ccp(-       target10.contentSize.width/2, actualY)];
      id actionMoveDone = [CCCallFuncN actionWithTarget:self 
                                         selector:@selector(spriteMoveFinished9:)];
[target10 runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

target10.tag = 1;
[_targets addObject:target10];   
}
 -(void)gameLogicboss9:(ccTime)dt {

[self unschedule:_cmd];    

[self addTarget10];
  }

    - (void)updateboss9:(ccTime)dt {
CGRect projectileRect = CGRectMake(projectile.position.x - (projectile.contentSize.width/2), 
                                   projectile.position.y - (projectile.contentSize.height/2), 
                                   projectile.contentSize.width, 
                                   projectile.contentSize.height);

BOOL bossHit = FALSE;
NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];

for (CCSprite *target1 in _targets) {
    CGRect target1Rect = CGRectMake(target1.position.x - (target1.contentSize.width/2), 
                                    target1.position.y - (target1.contentSize.height/2), 
                                    target1.contentSize.width, 
                                    target1.contentSize.height);

    if (CGRectIntersectsRect(projectileRect, target1Rect)) {

        [targetsToDelete addObject:target1];    
        bossHit = TRUE;
       Boss *boss = (Boss *)target1;
       boss.hp--;
       if (boss.hp <= 0  ) {
            [targetsToDelete addObject:target1];
            }
        break;

    }                       
}

for (CCSprite *target in targetsToDelete) {
    [_targets removeObject:target];

    [self removeChild:target cleanup:YES];                                  

     _projectilesDestroyed++;
    if (_projectilesDestroyed > 2) {

    }
}

if (bossHit) {
    //[projectilesToDelete addObject:projectile];

}
  [targetsToDelete release];

 }

  -(void)spriteMoveFinishedboss9:(id)sender {
CCSprite *sprite = (CCSprite *)sender;
[self removeChild:sprite cleanup:YES];

if (sprite.tag == 1) { // target
    [_targets removeObject:sprite];

} else if (sprite.tag == 2) { // projectile

    [_projectiles removeObject:sprite];
    }     } 
```

这是我想在目标 10/boss 9 被杀死时添加的游戏结束场景

```
GameOverScene *gameOverScene = [GameOverScene node];
[gameOverScene.layer.label setString:@"You Lose"];
[[CCDirector sharedDirector] replaceScene:gameOverScene]; 
```

现在我的另一个游戏结束场景是当精灵移动通过屏幕时。如果您需要我回答任何问题，请随时提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:19:04.873

对于场景替换，您可以尝试将其用于您的游戏代码..

首先将此代码添加到您的 GameOverScene 类

```
+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    GameOverScene *layer = [GameOverScene node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
} 
```

让你的 GameOverClass 是 CCLayer 的子类，而不是当你想改变场景时这样做

```
[[CCDirector sharedDirector] replaceScene:[GameOverScene scene]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:55:45.817

好的，所以你必须创建一个新场景。这可以使用 File->New File 简单地完成，并使其成为 NSObject 的子类。然后将子类更改为 CCLayer。作为测试，您可以从 hello world 层复制代码。接下来，只需在 helloworld 层类中导入新类并创建它的实例。然后在一个方法中使用 [[CCDirector sharedDirector] replaceScene:sceneName];

您可以使用此站点获取更多信息，它非常有帮助，只需通读一遍，您就会找到答案：http://www.raywenderlich.com/352/how-to-make-a-simple-iphone-game- with-cocos2d-tutorial

# windows-8 - 通过非 WinRT 代码传递 WinRT 对象类型。

> ID：11460042
> 
> 赞同：0
> 
> 时间：2012-07-12T20:24:36.753
> 
> 标签：windows-8, windows-runtime

我有一个像三层蛋糕一样设置的应用程序：上层和下层支持 WinRT，但中间不支持。那些上层和下层 WinRT 层需要共享对应用程序的 CoreWindow 对象的引用，但它们唯一的通信渠道是通过中间层。我只能通过中间的非 WinRT 层。如何通过中间的非 WinRT 层传递 CoreWindow 对象？

从 CoreWindow^ 转换为 void* 不会给我编译器的任何抱怨，但转换回 CoreWindow^ 会给我类型转换错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:49:32.007

当然，我只是在发布后才弄清楚：我使用了 reinterpret_cast< CoreWindow^ >(windowPtr)。

# r - 放大地图时自动将点聚合成簇

> ID：11460043
> 
> 赞同：1
> 
> 时间：2012-07-12T20:24:46.863
> 
> 标签：r, ggplot2

我阅读`ggmap`了 的文档，虽然密度/等高线图看起来很酷，但我想知道是否有人复制了这个[示例](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/examples/advanced_example.html)。它在地理位置上创建点集群。我在整个美国地图上有很多点要绘制，太多以至于它隐藏了其他重要信息。我正在使用`ggplot`并`maps`绘制这些地图。如果有人有本[示例](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/examples/advanced_example.html)或本[示例中给出的任何聚类图示例，我将不胜感激](http://developers.cloudmade.com/projects/web-maps-api/examples/marker-clustering)

# php - 2 个问题：调用未定义的函数并且没有写入数据库

> ID：11460045
> 
> 赞同：0
> 
> 时间：2012-07-12T20:24:51.043
> 
> 标签：php, mysql

我有一个简单的课程给我带来了一些问题。有2个问题。我没有链接我的html文件，只是类。当我需要使用我的插入函数时，它说它是未定义的。此外，即使我手动尝试将某些内容插入数据库，也没有任何反应。

mysql_connect("come", "at", "me") or die(mysql_error()); mysql_select_db（“兄弟”）或死（mysql_error（））；

```
class Update
{

    public $input;

    public function assignCheck($postRequest)
    {
        if(isset($_POST[$postRequest]))
        {
            $this->input = $_POST[$postRequest];
            insert($postRequest);
            return $this->input;
        }
        else
        {
            return false;
        }
    }

    public function insert($insertRequest)
    {
        mysql_query("INSERT INTO updates (update) VALUE ($insertRequest)");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:36:59.223

为了调用您的插入函数，您必须在函数`$this->insert($postRequest)`的 if 语句中使用`assignCheck`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:37:04.533

在一个类中，您使用伪变量调用方法

```
$this 
```

所以：

```
if(isset($_POST[$postRequest]))
{
    $this->input = $_POST[$postRequest];
    $this->insert($postRequest);
    return $this->input;
} 
```

# c# - 从rest api中检索大量数据

> ID：11460051
> 
> 赞同：0
> 
> 时间：2012-07-12T20:25:02.557
> 
> 标签：c#, asp.net, web-services, rest

我正在调用第三方rest api。这个rest api返回超过2000条记录，这些记录需要很长时间才能检索到这些信息。我想在asp.net页面中显示这些记录。记录成功显示在页面中，但问题是显示/检索此信息需要很长时间。

我将此 api 称为针对下拉更改，因此 api 调用可能会一次又一次。意味着它不是一次调用，而且我无法缓存此信息，因为在服务器端可能信息会更改。

那么如何减少下载时间或任何技巧（不支持分页），有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:27:02.013

> 那么如何减少下载时间或任何技巧（不支持分页），有什么建议吗？

如果 API 不支持分页，那么从消费者的角度来看，除了缓存数据以避免昂贵的 HTTP 调用之外，您无能为力。

没有奇迹。`client.MaxDownloadTimeMs`例如，您无法设置任何属性`5`并在不到 5 毫秒的时间内获取大量数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:06:16.213

好吧，任何给定的问题总是有一种解决方法，即使你乍一看并没有想到它。

我有这样一种情况，这就是我们所做的：

*   首先，请记住，如果不编写大量代码，就无法实现*实时一致性。*例如，如果用户从您的服务请求数据，然后在页面上呈现该数据，那么如果在该精确时间更新源，用户可能会看到数据不足的数据。

    所以我们需要接受**数据最终是一致的**

*   然后考虑以下事项，定期使用外部服务复制数据库中的数据

*   公开此本地数据以允许分页并从您的客户端代码中使用它

作为任何设计决策，您都应该权衡取舍以做出最终选择，这些是我们在这样的设计中遇到的问题：

*   用户请求时，phe 数据可能会不一致。您可以根据数据更改的频率每 xxx 分钟轮询一次数据到服务器（**注意：通常我们作为开发人员，我们对这种数据不一致感到不满意，我们希望实时查看所有内容，但事实, 是最终用户，大部分时间都可以忍受这种延迟，因为这是他们在现实生活中使用的工作方式，请咨询您的最终用户以收集他们对此的看法。您可以阅读更多蓝皮书中的埃里克·埃文斯（Eric Evans）关于这个**）

*   您必须编写额外的代码来在本地维护数据

可悲的是，当您与具有这些条件的第三方服务打交道时，可供选择的选项很少，我建议您与最终用户一起评估它们，解释他们的权衡，以选择最适合您需求的解决方案

备择方案：

*   既然我已经说过数据不会一直保持一致，那么也许你可以考虑缓存对服务的调用=）

*   通常最简单的方法总是面对这样的事情的最好方法，因为你没有在你的帖子中提到它，我会在这里评论。您是否尝试过简单地请求第三方组织允许寻呼？与您的第三方合作伙伴联系并讨论此问题。

*   如果可以，请评估其他来源（提供类似服务的其他第三方公司）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:31:57.407

您唯一的选择是将数据缓存一段时间。如果第三方 api 有一个调用，您可以进行比您的下拉更改更通用的调用，您可以在页面加载之前调用它以获取所有可能的下拉值并将结果存储一段时间。然后每次只返回适当的数据。

此外，在将数据发送给您之前，请查看第三方 api 是否有任何用于 gzip （压缩）数据的选项。我已经创建了几个 API，并为大型数据集创建了这种类型的选项。

# regex - 在正则表达式匹配中提取第 N 个子组

> ID：11460053
> 
> 赞同：1
> 
> 时间：2012-07-12T20:25:05.057
> 
> 标签：regex, perl

非常感谢您花时间阅读本文。我对 Perl 还是很陌生，所以非常感谢任何帮助！

我正在尝试使用正则表达式从大量大型文档中提取一段文本。

我有一个正则表达式，我用它来识别我想要开始提取的较大文档中的哪个位置。这个正则表达式的条件是经常有多个匹配正则表达式的实例。我能够确定哪些匹配项是我要提取的文本正文的开头。（在下面的示例中，这将是 $finds[2]。

我想做的是再次运行相同的正则表达式，并添加 .*?$END 以提取 $END 标识结尾的文本。但是我需要一种方法来告诉正则表达式在 $STAR 的第 N 次出现时开始提取。

考虑一下：

```
my $sentence = 'A1Z blah blah A2Z blah blah A3Z blah A4Z END A5Z';
my @finds = $sentence =~ m/(A\dZ)/mg;

####################
##  Code that determine the element of @finds that 
## contains the match to the extraction I want.
## For this question assume it is the third match (A3Z), 
## Element index number 2.
####################

$START = 2; 
```

这是我的尝试：

```
my @finds2 = ($sentence =~ m/((A\dZ){$START}.*?(END))/mg);

my @finds2 = ($sentence =~ m/((A\dZ)[$START].*?(END))/mg); 
```

如果 {$START} 或 [$START] 指示 PERL 等到它具有第“$START”匹配以开始提取并继续匹配，我希望它。

我知道我的尝试是不正确的。希望他们能帮助表明我正在尝试做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:20:21.677

这会做你喜欢的事情吗？

```
my $pos = 3
my $END = "END";
my $a = "A1Z blah blah A2Z blah blah A3Z blah A4Z END A5Z";
$a =~ / (?:.*?A\dZ){$pos} (.*?) $END /x;
print $1, "\n" if defined $1;'
# prints " blah A4Z " 
```

此代码将查找 A\dZ 模式的第 n 次出现（在 中指定的数字`$pos`），然后开始保存，`$1`直到遇到 $END 中的模式。如果您*真的*需要性能，我建议您查看`\G`断言，该断言将与您之前匹配的位置相匹配。这可以与内置的子程序混合使用`pos`。防止“回溯”也可以提高性能，但这是一个我不太了解的高级主题。

推荐阅读：“perlop - Regexp Quote-Like Operators”、“perlre - Assertions”和“perldoc -f pos”。

（另一种可能是将您的输入拆分为更小的字符串，但在许多情况下，最简单的 Perl 解决方案也是最好的。）

# iphone - 如何从 COCOS3D 中的 URL 加载 .pod 文件

> ID：11460058
> 
> 赞同：1
> 
> 时间：2012-07-12T20:25:34.183
> 
> 标签：iphone, ios, 3d, cocos2d-iphone, cocos3d

我正在制作一个应用程序，我想加载一些存储在服务器中的 3d 模型。我可以通过链接在浏览器中轻松访问它们。

该应用程序的想法是您有一个菜单，您可以选择要查看的模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:32:12.013

在 cocos3D 中，您可以通过简单地执行以下命令从 pod 文件创建节点：

```
[CC3PODResourceNode nodeFromResourceFile:podFileName]; 
```

[在这里](http://www.cocos2d-iphone.org/forum/topic/19375)您可以找到完整的工作示例。

如果您的 pod 文件可以在线获得，您可以先在本地下载它：

```
NSURL *url = [NSURL URLWithString:YOUR_URL_HERE];
NSData *urlData = [NSData dataWithContentsOfURL:url];
[urlData writeToFile:filePath atomically:YES]; 
```

然后传递`filePath`给`nodeFromResourceFile`.

`filePath`标识驻留在用户文档目录中的文件（iOS 下少数几个可以写入文件的位置之一）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"PODFILE.pod"]; 
```

如果要保存到临时目录，请使用：

```
NSTemporaryDirectory() 
```

而不是`documentsDirectory`.

# c# - 有谁知道为什么我会从 NHibernate/NH Profiler 收到此警告？

> ID：11460062
> 
> 赞同：3
> 
> 时间：2012-07-12T20:25:53.420
> 
> 标签：c#, .net, nhibernate, lazy-loading, nhprof

“为fully_qualified_type_name 禁用延迟属性获取，因为它不支持实体级别的延迟”。

NH Profiler 报告了此警告，因此，我遇到了可怕的 SELECT N + 1 副作用。因此，如果返回 2200 个子组实体，则会执行一个附加查询来检索每个`InvoicePreference`实体（总共 2201 个查询）。关于这种关系的某些东西似乎导致了这个问题。

以下是有问题的实体及其各自的映射。

**实体 1**

```
public class Subgroup : Entity
{
     public virtual string GroupNumber { get; set; }

     public virtual string RUSNumber { get; set; }

     public virtual string REANumber { get; set; }

     public virtual string CustomerType { get; set; }

     public virtual string Name { get; set; }

     public virtual IList<IndividualEmployment> Employees { get; set; }

     public virtual IList<BenefitsAdministrator> Administrators { get; set; }

     public virtual InvoicePreference InvoicePreference { get; set; }
} 
```

**实体 2**

```
public class InvoicePreference : IEntity
{
    public virtual Guid Id { get; set; }

    public virtual Guid SubgroupId { get; set; }

    public virtual bool PaperlessNotifications { get; set; }
} 
```

**映射 1**

```
public static AutoPersistenceModel ConfigureSubGroup(this AutoPersistenceModel 
autoPersistenceModel)
{
    return autoPersistenceModel.Override<Subgroup>(map =>
    {
        map.Table("SubgroupV");

        map.Id(s => s.Id).Column(SubGroupPrimaryKeyColumn);

        map.Map(s => s.CustomerType, "BAS_Customer_Type");
        map.Map(s => s.RUSNumber, "BAS_RUS_Number");
        map.Map(s => s.GroupNumber, "BAS_Group_Number");
        map.Map(s => s.REANumber, "BAS_REA_Number");

        map.HasMany(s => s.Administrators).KeyColumn(SubGroupPrimaryKeyColumn);
        map.HasMany(s => s.Employees).KeyColumn(SubGroupPrimaryKeyColumn);
        map.HasOne(s => s.InvoicePreference).PropertyRef(i => i.SubgroupId);
    });
} 
```

**映射 2**

```
public static AutoPersistenceModel ConfigureInvoicePreference(this AutoPersistenceModel autoPersistenceModel)
{
    return autoPersistenceModel.Override<InvoicePreference>(map =>
    {
        map.Table("SubgroupInvoicePreference");
        map.Schema(RetirementStatementsSchemaName);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:55:54.607

我想NH在“实体级别”禁用延迟加载是有原因的，我理解为没有创建代理。这可能有几个原因。你之前有没有收到另一个警告？我真的不明白为什么它禁用了“延迟属性”，这意味着某些属性是延迟加载的。这是在映射中明确使用的功能，但我在您的映射定义中看不到类似的东西。

要克服 N+1，您可以使用 Fetch.Join。我对此有不好的体验，因为查询变得非常大。在复杂模型中，您可能会遇到一些数据库服务器限制（例如查询的最大列数）。最好使用批量大小，这会显着减少查询数量。看看[我](https://stackoverflow.com/a/4266972/27343)对“[参考实体的 Nhinerbate 延迟加载”的](https://stackoverflow.com/questions/4266812/nhinerbate-lazy-loading-of-reference-entity)回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T06:33:21.807

InvoicePreference 被称为 hasone。由于默认情况下它是惰性加载的，NHibernate 将创建一个代理来填充属性 InvoicePreference 并为此它需要来自 InvoicePreference 的标识，该标识不存在于子组中。因此它必须使用 propertyref 中的属性来查询它。

补救这样做`.Not.LazyLoad()`和/或`.Fetch.Join()`

# excel - Excel VBA“结束如果没有块如果” - VBA错误

> ID：11460065
> 
> 赞同：2
> 
> 时间：2012-07-12T20:25:56.507
> 
> 标签：excel, excel-2010, vba

我不明白为什么 VBA 在这个问题上对我大喊大叫。非常简单的代码，只涉及一个 if 语句，而且它显然有一个“开始”If 和一个匹配的 End If。我是一名 VB.NET 开发人员，因此我缺少的语法可能有所不同。

```
 Sub splitter()
   Dim line() As String
   Dim rng As Range
   Dim row As Range
   Dim cell As Range
      For Each row In rng.Rows
        If row.Value <> "" Then
            line = Split(Range(row, 1), ",")
            Select Case line(0)
               Case "Desktop"
                   Range(row, 8).Value = "Desktop"
               Case "Laptop"
                   Range(row, 8).Value = "Laptop"
               Case "Server"
                   Range(row, 8).Value = "Server"
               Case Else
                   Range(row, 8).Value = "N/A"
        End If
       Next
    End Sub 
```

具体来说，最终结果是它将根据“父”下拉列表 (Range(row, 1)) 的选择填充“子”下拉列表 (Range(row, 8))。因为会出现问题，所以我使用 VBA 执行此操作的原因是因为我可以使用 Split() 函数以及父下拉列表中的项目的制作方式，例如。“台式机，戴尔，745”。此外，我是一个比 excel 开发人员更好的程序员。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T20:28:56.203

您的 select 语句需要结束：

```
Select Case line(0)
   Case "Desktop"
       Range(row, 8).Value = "Desktop"
   Case "Laptop"
       Range(row, 8).Value = "Laptop"
   Case "Server"
       Range(row, 8).Value = "Server"
   Case Else
       Range(row, 8).Value = "N/A"
End Select 
```

# css - 图标签中图像上的figcaption标签的居中和对齐宽度

> ID：11460066
> 
> 赞同：10
> 
> 时间：2012-07-12T20:26:05.047
> 
> 标签：css, django, html, width, center

我花了两天时间试图解决无花果/无花果问题。

我有一个 Django 应用程序，用户可以在其中提交图像，并且我正在使用 figure 和 figcaption 标签来显示带有标题的图像。主要问题是标题宽度超过了图片宽度。

我试图找出一种方法让图像保持相同的大小，并且标题相应地在宽度上对齐。我也在使用 Twitter-Bootstrap。我对所有解决方案持开放态度。非常感谢任何输入、经验或建议。

更新：这是实际的 HTML 模板代码和 CSS：

```
 <div class="span4 offset2">
                {% if story.pic %}
                    <h2>Image</h2> 
                    <figure width="{{story.pic.width_field}}">
                    <img class="image"src="{{ story.pic.url }}" width="{{story.pic.width_field}}" alt="some_image_alt_text"/>
                    {% if story.caption %}
                        <figcaption>
                                                {{story.caption}}
                        </figcaption>
                    {% endif %}
                    </figure>
                {% endif %}
        </div>

 image {height:auto;}

 figure {margin:0; display:table;} 

figcaption {display:table-row;
max-width: 30%;
font-weight: bold;} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T21:49:47.340

## 原始解决方案

```
figure .image {
    width: 100%;
}

figure {
    text-align: center;
    display: table;
    max-width: 30%; /* demo; set some amount (px or %) if you can */
    margin: 10px auto; /* not needed unless you want centered */
} 
```

关键是如果可以的话，为`max-width`元素设置某种类型，然后它会同时保持它和文本的约束。`img``figure`

[看一个例子 fiddle](http://jsfiddle.net/3eqYT/8/)。

## 如果您以编程方式读取宽度

首先，`<figure width="{{story.pic.width_field}}">`应该是 this `<figure style="width: {{story.pic.width_field}};">`。

其次，*只做*这个 css （`img`or不需要其他东西`figcaption`；[见 fiddle](http://jsfiddle.net/3eqYT/12/)）：

```
figure {
    text-align: center;
    margin: 10px auto; /* not needed unless you want centered */
} 
```

[正如这个小提琴所示](http://jsfiddle.net/3eqYT/14/)，带有长文本的非常小的图像仍然会有问题。为了使它至少看起来干净，您可以检查 的一些[最小](http://jsfiddle.net/3eqYT/16/)尺寸，如果它太小（`img`例如`100px`，`width``figure``min-width``img``max-width``100px`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-06T10:35:45.600

这个问题的解决方案是使用 TABLE 和 TABLECAPTION。这只是两行代码。

您可以在网站上看到此解决方案的实时预览：http: [//www.sandrasen.de/projektgebiete/kienheide/](http://www.sandrasen.de/projektgebiete/kienheide/)

```
figure { 
  display: table; 
}

figcaption { 
  display: table-caption; /* aligns size to the table of the figure
  caption-side: bottom /* makes the caption appear underneath the image/figure */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-30T02:23:27.057

在 HTML5 中，事情非常简单：

**HTML**

```
<figure>
    <img src="..." >
    <figcaption>Caption 1</figcaption>
</figure>
<figure>
    <img src="..." >
    <figcaption>Caption 2</figcaption>
</figure> 
```

**CSS**

```
figure{
  display: inline-block;
}

/* optional, use as required */
figcaption { 
  max-width: 30%;
  caption-side: bottom;
} 
```

# javascript - javascript浏览器超时第二个计时器

> ID：11460070
> 
> 赞同：0
> 
> 时间：2012-07-12T20:26:15.727
> 
> 标签：javascript, timeout, alert

我正在尝试使用 Javascript 设置会话超时，并且看起来警报正在阻止计时器启动。这是我的代码：

```
var first_timer = 2 * 1000;
var second_timer = 8 * 1000;
var down = -1;

function initTimer() {
  down = setTimeout(processTimeout, first_timer)
}

function processTimeout() {
        down = setTimeout(logout, second_timer);
        alert ("Timeout of first timer, timerid:" + down );
}

function logout() {
  alert("You are logged out");
  window.location = "http://www.google.com"
}

function clearTimer() {
  if ( -1 != down )
    clearTimeout(down);
  alert("Restarting timer");
  initTimer();
}

initTimer(); 
```

当我运行上述代码时，我看到第二个计时器仅在第一个警报被解除后才开始。即使没有解除警报，如何确保第二个计时器在第一次超时后立即启动？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:44:02.090

这很可能取决于您使用的浏览器。我没有遇到您使用最新 Firefox 描述的问题。

但是，在第一个计时器关闭之前，不会显示第二个计时器警报框。

这是因为 JavaScript 解释器*不是*多线程的。但是 JavaScript 本身是高度异步的，尤其是在诸如计时器、AJAX 和动画之类的长延迟请求上。这就是有时给人一种多线程的感觉。

实际上，在您的代码示例中，第二个计时器按预期启动。当我关闭第一个对话框时，假设它出现 10 秒后，第二个对话框立即显示。*尽管如此，这可能是您的问题，在您关闭第一个警报之前*它永远不会显示，因为警报是一个同步调用。这样主事件循环在解除之前不会获得控制权。

这种情况的一种解决方法是使用 Jquery-UI 提供的“HTML”对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:30:21.477

该`alert()`函数会阻止其他所有内容，直到它被解除。您可以使用所谓的模态对话框来创建自己的不阻塞的警报样式消息。

jQuery UI 有[这个特性。](http://jqueryui.com/demos/dialog/#modal-message)

# mysql - 是否可以将此业务逻辑放在 SQL 查询中？

> ID：11460071
> 
> 赞同：1
> 
> 时间：2012-07-12T20:26:18.837
> 
> 标签：mysql, sql, select, union

我有一个 mySQL 表，其中包含一组参考数据。我有另一个表，其中包含描述此参考数据的更新或附加条目的数据。由于各种原因，我不会深入讨论，重要的是参考数据在特定用户出现并创建记录时保持不变（因此是第二个表）。除了具有 2 键复合主键的“自定义”表之外，这些表之间的架构是相同的。其中一列在“自定义”表和参考表之间共享。

我想在这些表的单个 SQL 语句中执行的业务逻辑如下：

**如果“自定义”表中存在与引用表中的键值相同的记录，则采用“自定义”。否则，取参考值。**

我想也许我可以使用 RIGHT JOIN，或者甚至对 UNION 运算符进行一些扭曲来控制返回的内容。不过，我一直在搞乱 SQL 的逻辑。JOIN 将从一个表中获取信息以与另一个表连接，我真的不是在寻找。UNION 将简单地删除表之间的重复项......这很接近。

就像是：

SELECT * FROM 自定义 UNION SELECT * FROM 参考

除非所有列都相同，否则只会删除重复项。如果有任何不同（因为这就是自定义条目存在的原因），那么 UNION 只会将两个表的内容混合在一起。

我对这一切都错了吗？

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:35:15.990

有几种方法可以做到这一点。至少根据我对您的情况的解释，这是一个应该得到您需要的工会：

```
select KeyCol, Col2, Col3
from CustomTable
union all
select KeyCol, Col2, Col3
from RefTable
where KeyCol not in (select KeyCol from CustomTable) 
```

我假设您的 RefTable 和 CustomTable 具有一对零或一的关系，例如，您没有任何 Ref 的多个自定义记录（但这仍然可以工作）。

**更新：**

您可能还需要自定义的额外键列：

```
select KeyCol, Col2, Col3, CustomKey
from CustomTable
union all
select KeyCol, Col2, Col3, null as CustomKey
from RefTable
where KeyCol not in (select KeyCol from CustomTable) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:33:59.517

听起来像一个左外连接与右值和左值的 COALESCE()。

```
SELECT COALESCE(c.val, r.val) as val, ...
FROM reference as r LEFT OUTER JOIN custom as c ON c.ID = r.ID AND c.Project = 'ProjectX' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:56:28.547

归因于@TimLehner，您可能想要的是对他的查询进行轻微修改。我的猜测是您想要最新的客户修改。我会进一步猜测这具有最大的自定义键。

为此，您需要查询中的另一个子句：

```
select KeyCol, Col2, Col3, CustomKey
from CustomTable ct join
     (select max(CustomKey) as maxCustomKey from CustomTable group by KeyCol, Col2 Col3
     ) lastkey
     on ct.KeyCol = lastkey.KeyCol and ct.Col2 = lastkey.Col2 and ct.Col3 = lastkey.Col3
union all
select KeyCol, Col2, Col3, null as CustomKey
from RefTable
where KeyCol not in (select KeyCol from CustomTable) 
```

顺便说一句，在大多数其他数据库中，您可以使用更简单的查询和名为 row_number() 的函数来执行此操作，但 mysql 不支持这种类型的函数。

# mysql - MySQL在连接两个表时使用索引

> ID：11460072
> 
> 赞同：0
> 
> 时间：2012-07-12T20:26:20.867
> 
> 标签：mysql, join, doctrine-orm

任何帮助，将不胜感激。

我有 2 张桌子：

```
CREATE TABLE `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `username_canonical` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `email_canonical` varchar(255) NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  `salt` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `last_login` datetime DEFAULT NULL,
  `locked` tinyint(1) NOT NULL,
  `expired` tinyint(1) NOT NULL,
  `expires_at` datetime DEFAULT NULL,
  `confirmation_token` varchar(255) DEFAULT NULL,
  `password_requested_at` datetime DEFAULT NULL,
  `roles` longtext NOT NULL COMMENT '(DC2Type:array)',
  `credentials_expired` tinyint(1) NOT NULL,
  `credentials_expire_at` datetime DEFAULT NULL,
  `messages_unread_count` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_1483A5E992FC23A8` (`username_canonical`),
  UNIQUE KEY `UNIQ_1483A5E9A0D96FBF` (`email_canonical`)
  ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 
```

和

```
CREATE TABLE `blog_posts` (
 `id` bigint(20) NOT NULL AUTO_INCREMENT,
 `user_id` bigint(20) DEFAULT NULL,
 `category_id` int(11) DEFAULT NULL,
 `title` varchar(255) NOT NULL,
 `content` longtext NOT NULL,
 `tags` varchar(512) NOT NULL,
 `timestamp_created` datetime NOT NULL,
 `timestamp_updated` datetime NOT NULL,
 `is_visible` tinyint(1) NOT NULL,
 `is_deleted` tinyint(1) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `IDX_78B2F93212469DE2` (`category_id`),
 KEY `IDX_78B2F932A76ED395` (`user_id`),
 CONSTRAINT `FK_78B2F932A76ED395` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
 CONSTRAINT `FK_78B2F93212469DE2` FOREIGN KEY (`category_id`) REFERENCES `blog_categories`     (`id`)
 ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 
```

我想选择所有帖子，限制帖子作者的输出，给我一个建议 - 我如何强制查询使用索引：

```
select p.*, u.* from blog_posts p join users u on p.user_id = u.id limit 0,10; 
```

解释输出：

```
+----+-------------+-------+------+----------------------+----------------------+---------+----------+------+-------------+
| id | select_type | table | type | possible_keys        | key                  | key_len | ref      | rows | Extra       |
+----+-------------+-------+------+----------------------+----------------------+---------+----------+------+-------------+
|  1 | SIMPLE      | u     | ALL  | PRIMARY              | NULL                 | NULL    | NULL     |    1 |             |
|  1 | SIMPLE      | p     | ref  | IDX_78B2F932A76ED395 | IDX_78B2F932A76ED395 | 9       | sky.u.id |    1 | Using where |
+----+-------------+-------+------+----------------------+----------------------+---------+----------+------+-------------+ 
```

加入用户表时有什么方法可以使用索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:38:15.457

如果您在 blogposts.userid 和 users.id 之间设置了 FK 关系，Mysql 将自动使用索引。

所以创建 FK 关系：

```
CONSTRAINT blogposts_userid FOREIGN KEY (user_id) REFERENCES users (id) 
```

# algorithm - 如何对地理数据进行排序以便快速搜索

> ID：11460074
> 
> 赞同：8
> 
> 时间：2012-07-12T20:26:24.797
> 
> 标签：algorithm, search, sorting, geolocation, latitude-longitude

我有一些地理定位的对象（每个对象都有纬度+经度）。我的 App 需要显示移动设备 GPS 位置周围 3 公里的物体。我有数千个对象，它们分布在大范围内（例如，美国的几个州、几个小国家），这意味着在我的对象列表中，我可以有一个位于纽约市，另一个位于迈阿密，但我也可以有对象非常接近（几米）。

目前，我的应用程序执行迭代搜索。对于每个对象，我使用 GPS 位置计算距离，如果距离 <= 3KM，则保留该对象，否则忽略它。该算法效率不高，我正在寻找一种能够提供更好性能的算法。

我想有一种方法可以使用地理坐标对我的对象进行排序，然后可以更快地找到位于 GPS 位置周围的对象。

我目前的想法只是用“极端点”计算矩形，北/南/东/西（距离 GPS 位置 3 公里）以限制搜索区域。接下来，我将仅计算此框内对象的距离。我认为可以做一些更好的事情，但我不知道......

任何建议将不胜感激；-) 谢谢，

塞布。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:43:28.540

听起来像[最近邻搜索](http://en.wikipedia.org/wiki/Nearest_neighbor_search)，但没有最大*邻居数*（如 kNN），而是最大*距离*阈值。

一种常见的方法是将对象放入特殊的数据结构中，以允许快速排除大部分搜索空间。但是，这些通常是在考虑欧几里德空间的情况下制作的，而不是针对球形（纬度/经度）平面（环绕问题）。因此，您可能需要将坐标转换为笛卡尔系统中相对于球体中心的 3d 坐标，然后才能应用以下数据结构之一来有效搜索对象：

*   [八叉树](http://en.wikipedia.org/wiki/Octree)
*   [kd树](http://en.wikipedia.org/wiki/K-d_tree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:47:18.953

提到空间索引的其他答案是正确的，但不一定是最简单的解决方案。

我会考虑一些更简单的事情：按国家/地区，然后按州，地区，城市，最后 - 按密集城市中的一些地标（您有很多对象）对项目进行分组。

然后，您只需执行一些查询（检查我在哪个国家、哪个州、哪个地区等），将自己限制在非常小的一组对象中，而无需在您的移动应用程序中实现高级数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:28:30.537

在没有专门的数据结构的情况下执行此操作的一种方法似乎是对数据的两个副本进行排序——一次按经度，一次按纬度。任何二进制搜索以关闭纬度和经度的东西都是接近的。

同样，您可以使用常用的树（快速）或红黑树（低可变性）。

但是使用 r-tree 或 kd-tree 可能有优势。我所描述的可能只是为了避免采用新的依赖项或避免从头开始编写新的数据结构。

# interface - 在这种情况下如何使用接口

> ID：11460075
> 
> 赞同：1
> 
> 时间：2012-07-12T20:26:29.357
> 
> 标签：interface, c#-3.0

我正在尝试设置将提供版本号的接口方法：

```
var versionNumber = System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString(); 
```

我不知道如何在接口中实现这个，以便继承类可以获取版本号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:36:09.670

```
public interface IVersionProvider
{
      string GetVersion();
} 
```

执行：

```
internal class /*or struct*/ VersionProvider : IVersionProvider
{
      public string GetVersion()
      {
           System.Reflection.Assembly.GetExecutingAssembly()
                   .GetName().Version.ToString();
      }
} 
```

我将课程设为内部，因为它不需要在外部创建：

```
public class Factory
{
      IVersionProvider GetVersionProvider() { return new VersionProvider(); }
} 
```

由于接口是公共的，即使实现是程序集私有的，外部用户也可以在其上调用“GetVersion”。

# windows-installer - 桌面应用程序下载器和安装程序

> ID：11460082
> 
> 赞同：1
> 
> 时间：2012-07-12T20:26:38.133
> 
> 标签：windows-installer

我有一个 50MB 的桌面应用程序。

我正在寻找某种 100-500KB 的小型应用程序加载器，它基本上可以在用户的​​计算机上下载并安装我的应用程序。

我想要这个，因为我认为如果我可以让用户下载 100kb 加载程序，那么他们更有可能完成完整的 50MB 下载和安装。

有人知道可以做到这一点的任何服务或软件包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:56:55.667

首先，您需要为您的应用程序创建一个安装程序，最好是一个 MSI 包。以下是安装工具列表：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

之后，您可以使用一个简单的 EXE 引导程序来下载并启动安装包。大多数商业设置工具都提供此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:54:44.803

我知道以下内容：

*   [谷歌奥马哈](http://code.google.com/p/omaha/)
*   [高级安装程序](http://www.advancedinstaller.com/)
*   [Somoto BetterInstaller](http://betterinstaller.somotoinc.com/)（还添加了可以从中赚钱的建议）
*   [点燃](http://www.opencandy.com/developers/ignite/)（尚不可用）

[您也可以使用WiX 工具集](http://wixtoolset.org/)、 [NSIS](http://wixtoolset.org/)或[Inno Setup](http://www.jrsoftware.org/isinfo.php)等工具轻松创建自己的。

# jqgrid - jqGrid：我们可以配置jqGrid在编辑时在Ajax post中发送自定义的row id参数吗

> ID：11460086
> 
> 赞同：1
> 
> 时间：2012-07-12T20:26:44.113
> 
> 标签：jqgrid

如前所述，我正在尝试使用[带有 RestFull url](https://stackoverflow.com/questions/7344310/using-jqgrids-inline-editing-with-restful-urls)的 jqGrid 内联编辑。现在，当 jqGrid 向服务器发布数据时，我们可以将 id 查询参数更改为其他内容，而不是 id。

例如：服务器端域对象是客户，客户 ID 作为身份键。

现在，在 jqGrid 中，我将 jsonReader 选项中的 id 设置为

```
jsonReader : {
        root: "rows",
        page: "page",
        total: "total",
        records: "records",
        repeatitems: false,
        cell: "cell",
        id: "customerId"
    }, 
```

现在，当数据发布到服务器时，jqGrid 发布`id:something`. 我想`customerId:something`作为参数。这可能与一些 jqGrid 配置或 serializeRowData 函数是唯一的选择。

# java - JSF 应用程序中的多语言支持

> ID：11460089
> 
> 赞同：0
> 
> 时间：2012-07-12T20:26:58.207
> 
> 标签：java, jsf

我正在尝试向应用程序添加多语言支持。是否可以在运行时添加语言，通过在运行时创建新的属性文件，提取所有英文文本并调用谷歌翻译 api 创建等效值并使用 native2ascii 转换器更改值并将其放入属性文件中？

有没有更好的方法可以在运行时添加语言？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:49:34.533

您可以使用自定义[`ResourceBundle`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)实现来做到这一点，其中您反过来提供自定义[`ResourceBundle.Control`](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.Control.html)，您可以在其中管理加载并自己提供值。您甚至可以从数据库中提供它们。

`ResourceBundle`然后，要使用它，只需在`<resource-bundle><base-name>`or中指定自定义的 FQN `<f:loadBundle baseName>`。

### 也可以看看：

*   [使用从数据库加载的 ResourceBundle 条目在 JSF 中进行国际化](https://stackoverflow.com/questions/4499732/design-question-regarding-java-ee-entity-with-multiple-language-support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:46:23.280

java 的 i18n 支持存在一些问题。首先，ResourceBundle.getBundle() 只能在两个地方寻找语言支持：

1.  类路径中的属性文件
2.  类路径上的类

在任何一种情况下，如果您想动态地提供不同的语言（根据要求），您很可能要么必须：

1.  创建一个自定义类加载器，以便 loadClass 和 getResource 可以动态创建它们。
2.  使用 aspectJ 拦截 getBundle() 方法调用并在其上放置一些之前的建议以执行您想要的操作。

相比之下，spring 的 MessageSource 框架可扩展性更高，因为 MessageSource 是一个接口，您可以提供自己的实现并将它们注册到 spring 上下文中，或者将它们嵌套在其他消息源中等等。

# c# - 我可以将 splashScreenImage 用于我的所有应用页面吗？

> ID：11460093
> 
> 赞同：0
> 
> 时间：2012-07-12T20:27:13.337
> 
> 标签：c#, visual-studio-2010, windows-phone-7, splash-screen

我正在为 wp7 编写一个包含多个页面的应用程序，并且我想在应用程序中每个页面的加载时显示初始屏幕图像 - 所以用户会发现他需要等待几秒钟。默认的初始屏幕图像对我来说很好，但我不知道该怎么做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:29:03.073

您可以自定义自己的启动画面不需要使用默认

对应该位于 Visual Studio 屏幕左侧面板上的页面使用 Loading 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:47:42.770

您可以通过在加载每个页面时加载 SplashScreen 图像来执行此操作，并持续一段预定义的时间。同时其他任务可以在后台线程上完成（如果它们与 UI 无关）。

此外，如果您想向用户显示加载器，您可以创建一个带有一些背景（半透明）和进度条的网格。您可以在任何需要时间的进程之前将其 Visisbility 设置为 true，然后在进程结束并且应用程序准备好供用户使用后将其隐藏。

# python - Python字符串对象不可调用

> ID：11460100
> 
> 赞同：7
> 
> 时间：2012-07-12T20:27:27.960
> 
> 标签：python, string

我无法理解为什么我会收到以下语句的类型错误

```
log.debug('vec : %s blasted : %s\n' %(str(vec), str(bitBlasted)))

type(vec)  is unicode
bitBlasted is a list 
```

我收到以下错误

```
TypeError: 'str' object is not callable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:50:25.113

## 遮蔽内置

正如Collin[所说](https://stackoverflow.com/a/11460162/296974)，您可能正在隐藏内置`str`：

```
>>> str = some_variable_or_string #this is wrong
>>> str(123.0) #Or this will happen
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object is not callable 
```

一种解决方案是将变量名称更改为`str_`或其他内容。更好的解决方案是避免使用这种匈牙利命名系统——这不是 Java，而是充分利用 Python 的[多态性](http://en.wikipedia.org/wiki/Polymorphism_(computer_science))并使用更具描述性的名称。

## 没有定义合适的方法

另一种可能性是对象可能没有适当的`__str__`方法，甚至根本没有方法。

Python 检查该`str`方法的方式是：-

*   类的`__str__`方法
*   `__str__`其父类的方法
*   类的`__repr__`方法
*   `__repr__`其父类的方法
*   和最后的后备：一个形式为`<module>.<classname> instance at <address>`where `<module>`is `self.__class__.__module__`, `<classname>`is`self.__class__.__name__`和`<address>`is的字符串`id(self)`

甚至比`__str__`使用新`__unicode__`方法更好（在 Python 3.x 中，它们是`__bytes__`and `__str__`。然后您可以将其实现`__str__`为存根方法：

```
class foo:
    ...
    def __str__(self):
        return unicode(self).encode('utf-8') 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1307014/python-str-versus-unicode "__str__ v/s __unicode__")。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T20:31:25.437

正如 mouad 所说，您`str`在文件中较高的位置使用了该名称。这会影响现有的内置`str`，并导致错误。例如：

```
>>> mynum = 123
>>> print str(mynum)
123
>>> str = 'abc'
>>> print str(mynum)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object is not callable 
```

# javascript - Backbone 和 RequireJS 冲突——实例还是构造函数？

> ID：11460102
> 
> 赞同：2
> 
> 时间：2012-07-12T20:27:33.460
> 
> 标签：javascript, backbone.js, requirejs

有人可以解释以下之间的根本区别：

```
define(['backbone'], function(Backbone) {
   MyModel = Backbone.Model.extend({
   });
});

define(['backbone', 'models/mymodel'], function(Backbone){
    var app = Backbone.View.extend({
        initialize: function() {
           var model = new MyModel();
        }
    });
}); 
```

和：

```
define(['backbone'], function(Backbone) {
   var MyModel = Backbone.Model.extend({
   });
   return MyModel;
});

define(['backbone', 'models/mymodel'], function(Backbone, MyModel){
    var app = Backbone.View.extend({
        initialize: function() {
           var model = new MyModel();
        }
    });
}); 
```

在前者中，第一个模块简单地定义了 MyModel。在后者中，它被创建为变量并返回，第二个模块需要在导入时将其放入参数中。

我看到的 RequireJS 示例似乎在两者之间有所不同，但我并不真正理解其中的区别——一个返回实例而另一个返回构造函数？

在我的应用程序中，我什至没有注意到我实际上在不同的地方使用了两种方式，我认为这会导致问题。我用了很多

```
self = this
self.model.doSomething 
```

在我的视图和模型中，随着我的应用程序变大，我开始出现错误，因为与 self 的定义存在冲突。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:32:52.327

**短版：**第一版 == 错误。

**中版：**第一个完全绕过 Require 使用全局变量，而第二个实际使用 Require。

**长版：**

Backbone 模块的工作方式是运行“define”，向它传递一个函数（通常也是一个依赖数组），然后从该函数返回的任何内容都被定义为该模块。所以如果我这样做：

```
// Inside foo.js
define([], function() {
   return 1;
}); 
```

我已经将“foo”模块定义为`1`，所以如果我在其他地方做：

```
define(['foo'], function(foo) {
    alert(foo); // alerts 1
}); 
```

您的第一个版本不返回任何内容，因此它实际上根本没有创建 Require 模块。

那么它是如何工作的呢？好吧，在那个版本中，你这样做：

```
MyModel = Backbone.Model.extend({ 
```

不是：

```
var MyModel = Backbone.Model.extend({ 
```

所以这和这样做是一样的：

```
window.MyModel = Backbone.Model.extend({ 
```

然后当代码的第二部分运行时，它访问`window.MyModel`并工作......但它在这个过程中完全绕过了 Require.js。

我认为最重要的一点是：总是声明（即`var`）你的 JAVASCRIPT 变量。我不同意克罗克福德所说的一切，但他在这一点上是完全正确的。如果你不养成这个习惯，你会得到很多错误（有 Require 和没有）。

除此之外，下一个最重要的事情可能是：总是从你传递给的函数中返回一些东西`define`。在某些特殊情况下，您不想返回任何内容，但除非您故意尝试解决其中一种情况，否则您应该始终返回一些内容来定义模块。

最后，如果您使用 Require，代码中的每个变量都应该：

*   来自`define`函数（即它应该是您传递给定义的函数的参数变量），或
*   它应该`var`在该文件中声明（即 -ed ）

如果您使用 JSLint 或`'use strict';`（如 Valentin Nemcev 建议的那样），或者如果您使用 Eclipse 之类的编辑器，您的工具可以帮助您确保这一点（实际上使确保变得容易）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:35:27.670

```
MyModel = Backbone.Model.extend({}); 
```

在这里，您没有返回构造函数，而是定义了一个全局变量并稍后在不同的模块中访问它。

实际上它是错误的，它是偶然的。您应该通过其他模块中的参数访问您的模块`return`。`define`

像这样：

```
return Backbone.Model.extend({}); 
```

您应该[使用严格](https://stackoverflow.com/q/1335851/169000)模式来避免 JS 中的全局变量出现问题。

此外，JS 中的构造函数只是一个用于运行的函数`new`。Backbone`extend`总是返回一个构造函数，你可以通过调用构造函数来创建一个模型实例`new`，就像你在两个例子中所做的一样。

# c# - 嵌套结构作为类中的成员

> ID：11460103
> 
> 赞同：4
> 
> 时间：2012-07-12T20:27:34.520
> 
> 标签：c#, .net, class, struct

我正在编写一个包含 90 个整数变量的类。基本上有 10 个，但每个都有 3x3 属性，使它们成为 90 个。我将进一步解释。

所以我拥有的 10 个变量是：v0、v1、v2、...、v9。其中每一个都有 3 个不同的城市、县和州值。此外，它们中的每一个都有过去、现在和未来的 3 个不同的值。

因此，典型值为：v3.City.Future 或 v7.State.Past 或 v8.County.Present。

我正在考虑实现一个类，每个变量有 10 个结构，然后每个结构都有 3 个嵌套结构（用于城市、县和州），每个结构都有 3 个用于过去、现在和未来的整数变量。

这仍处于概念阶段。我尝试采用上述方法，但它不起作用。请随时提出任何建议。

谢谢。

更新：

这是代码片段：

```
public class MyClass
{
    public MyVariable myvariable;
}

public struct MyVariable
{
    public struct National
    {
        public int Past { get; set; }
        public int Present { get; set; }
        public int Future { get; set; }
    }
    ...
} 
```

现在，当我实例化类并访问成员（myclass.myvariable.National.Past）时，它没有获取成员。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T14:09:42.560

这是这个问题的答案：

```
public struct PeriodVars
{
    public int Past { get; set; }
    public int Present { get; set; }
    public int Future { get; set; }
}

public struct VarStruct
{
    public PeriodVars City;
    public PeriodVars County;
    public PeriodVars State;
} 
```

现在课程将是：

```
public class MyClass
{
    public VarStruct v0;
    public VarStruct v1;
    ...
} 
```

一旦我实例化了一个类的对象，我可以像这样引用它：

```
objMyClass.v0.City.Past = 111; 
```

除了批评之外，我在这里发布它并没有得到太多帮助。

**通常，一个人无法理解被视为另一个人无法解释。**我花了 15-20 分钟写下这个问题，人们在不到 30 秒的时间内就开始对它投反对票。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T21:20:43.117

看起来您正在根据您的评论混合类型和实例：

假设您的 MyVariable 如下所示：

```
public struct MyVariable
{
    public struct National
    {
       public int Past;
    }
  public National ValueForNational;
} 
```

`myclass.myvariable.National`- 它是一种类型（不会编译）

`myclass.myvariable.National.Past`- 它是一个类型的成员（不会编译）

`myclass.myvariable.ValueForNational`- 是 MyClass 变量中的 MyVariable 成员的值（将编译）

`myclass.myvariable.ValueForNational.Past`- 是你可能想要的...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T20:37:10.563

你的“问题”根本不是一个真正的问题，但这里有一组简单的类来完成它。我使用类而不是结构，因为如果使用结构，您需要了解一些“陷阱”。

**除非**您描述“它不起作用”，否则我敢打赌您的问题实际上是您正在尝试使用结构。

请发布您的代码，并描述您的症状，以便我们更好地帮助您。

```
public class Foo<T>
{
    public T Future;
    public T Present;
    public T Past;
}

public class Bar
{
    public Foo<string> City;
    public Foo<string> State;
    public Foo<string> Country;
}

public class Top
{
    public Bar v0;
    public Bar v1;
    //...
    public Bar v2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T00:35:32.837

struct MyVaribale 下缺少初始化

**公共 国家 国民；**

```
internal class Program
    {
        static void Main(string[] args)
        {
            var myVar = new MyClass();
            myVar.myvariable.national.Past = 1;
        }
    }

    public class MyClass
    {
        public MyVariable myvariable;
    }

    public struct MyVariable
    {
        public National national;  // This line is missing thats why You cant access the members of National struct.

        public struct National
        {
            public int Past;
            public int Present;
            public int Future;
        }

    } 
```

# python - python urllib2 - 在抓取之前等待页面完成加载/重定向？

> ID：11460105
> 
> 赞同：10
> 
> 时间：2012-07-12T20:27:37.383
> 
> 标签：python, urllib2

我正在学习制作网络抓取工具，并想为个人项目抓取 TripAdvisor，使用 urllib2 抓取 html。但是，我遇到了一个问题，使用下面的代码，我返回的 html 不正确，因为页面似乎需要一秒钟才能重定向（您可以通过访问 url 来验证这一点） - 相反，我得到了代码从最初短暂出现的页面。

在获取网站内容之前，是否需要设置一些行为或参数以确保页面已完全完成加载/重定向？

```
import urllib2
from bs4 import BeautifulSoup

bostonPage = urllib2.urlopen("http://www.tripadvisor.com/HACSearch?geo=34438#02,1342106684473,rad:S0,sponsors:ABEST_WESTERN,style:Szff_6")
soup = BeautifulSoup(bostonPage)
print soup.prettify() 
```

编辑：答案是彻底的，但是，最终解决我的问题的是： [https ://stackoverflow.com/a/3210737/1157283](https://stackoverflow.com/a/3210737/1157283)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T21:03:16.360

最重要的问题不是重定向是页面使用javascript修改内容，但`urllib2`没有`JS`引擎它只是`GETS`数据，如果您在浏览器上禁用javascript，您会注意到它加载的内容与`urllib2`返回的内容基本相同

```
import urllib2
from BeautifulSoup import BeautifulSoup

bostonPage = urllib2.urlopen("http://www.tripadvisor.com/HACSearch?geo=34438#02,1342106684473,rad:S0,sponsors:ABEST_WESTERN,style:Szff_6")
soup = BeautifulSoup(bostonPage)
open('test.html', 'w').write(soup.read()) 
```

`test.html`并在浏览器中禁用 JS，在 firefox 内容中最简单 -> 取消选中启用 javascript，生成相同的结果集。

那么我们能做的很好，首先我们应该检查网站是否提供API，报废往往会皱眉 [http://www.tripadvisor.com/help/what_type_of_tripadvisor_content_is_available](http://www.tripadvisor.com/help/what_type_of_tripadvisor_content_is_available)

[旅行/酒店 API？](https://stackoverflow.com/questions/1185961/travel-hotel-apis) 看起来他们可能会，尽管有一些限制。

但是如果我们仍然需要用JS来抓取它，那么我们可以使用`selenium` [http://seleniumhq.org/](http://seleniumhq.org/)它主要用于测试，但它很容易并且有相当好的文档。

我还发现这个[启用了 Javascript 的抓取网站？](https://stackoverflow.com/questions/3362859/scraping-websites-with-javascript-enabled)和这个[http://grep.codeconsult.ch/2007/02/24/crowbar-scrape-javascript-generated-pages-via-gecko-and-rest/](http://grep.codeconsult.ch/2007/02/24/crowbar-scrape-javascript-generated-pages-via-gecko-and-rest/)

希望有帮助。

作为旁注：

```
>>> import urllib2
>>> from bs4 import BeautifulSoup
>>> 
>>> bostonPage = urllib2.urlopen("http://www.tripadvisor.com/HACSearch?geo=34438#02,1342106684473,rad:S0,sponsors:ABEST_WESTERN,style:Szff_6")
>>> value = bostonPage.read()
>>> soup = BeautifulSoup(value)
>>> open('test.html', 'w').write(value) 
```

# javascript - html5立方体幻灯片

> ID：11460107
> 
> 赞同：0
> 
> 时间：2012-07-12T20:27:39.483
> 
> 标签：javascript, html

我想知道如何使[3D 幻灯片的面具有](http://www.script-tutorials.com/html5-3d-cube-slideshow/)交互性，即在其上添加链接。如果创建多个面或墙是要走的路，这是否意味着我在每面墙上都放了一个层，所以我会怎么做那？最后，每面墙都应该能够单独处理，但仍然是这种立方体形式。这是我正在谈论的幻灯片 [http://www.script-tutorials.com/html5-3d-cube-slideshow/](http://www.script-tutorials.com/html5-3d-cube-slideshow/)

非常感谢您的时间！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:17:29.460

好吧，它们并不是真正的 html 对象。“墙”是使用 canvas 标签创建的 - 这基本上只是意味着 javascript。如果你想让它更具交互性，我建议你改用 CSS 动画。您可能可以使用 CSS 获得相同的结果。在谷歌搜索 CSS 动画立方体或类似的东西。

# sql - OLAP Cube 部署问题

> ID：11460108
> 
> 赞同：14
> 
> 时间：2012-07-12T20:27:40.807
> 
> 标签：sql, connection, ssas, olap, cube

我对此真的很陌生，所以我可能犯了一个简单的错误。

我需要使用远程数据库制作 OLAP 多维数据集。设置维度和度量并创建多维数据集后，我无法让多维数据集启动到本地服务器。我不断收到错误消息，“由于以下连接问题，无法将项目部署到'localhost'服务器：无法建立连接。确保服务器正在运行。要验证或更新目标服务器的名称，在解决方案资源管理器中右键单击项目，选择项目属性，单击部署选项卡，然后输入服务器名称。”

但是，本地 SQL 服务器正在运行（据我所知），我不知道如何解决这个问题。我试过用“。”替换“本地主机”。和IP，但这也没有奏效。

这是我遵循的指南： [http ://www.mssqltips.com/sqlservertip/1532/build-a-cube-from-an-existing-data-source-using-sql-server-analysis-services/](http://www.mssqltips.com/sqlservertip/1532/build-a-cube-from-an-existing-data-source-using-sql-server-analysis-services/)

也许 SQL Server 没有真正运行？我该如何检查？或者当我尝试处理多维数据集时，我是否跳过了一些重要的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T11:16:29.330

您需要将目标服务器名称更改为远程sql服务器名称或ip。

在 BIDS 中右键单击您的项目解决方案并选择属性窗口。在那里，您可以给出服务器名称，如下图所示。

![在此处输入图像描述](../Images/352134de6eec692836239addc32eefff.png)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T13:54:06.457

您需要将多维数据集部署到 SSAS 实例。请参阅此处我有 SQL Server 实例和 SSAS 实例（检查图标以查看差异）：

![在此处输入图像描述](../Images/851a14cf9189fd47cc37f173c2611977.png)

您可以检查它是否在服务上运行：

![在此处输入图像描述](../Images/61539d687414edf9ec3730c7fdafb2fe.png)

如果你没有，你可以从 sql server 安装光盘安装

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-12T21:11:49.800

OLAP 多维数据集不会部署到 SQL Server 实例。它们必须部署到 Analysis Services 实例。它将在您的服务列表中列为“SQL Server Analysis Services”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-02T13:56:29.367

这就是为我解决的问题：

1.  从 MSSQL Server Management Studio 复制连接：

[![在此处输入图像描述](../Images/154caa901db803b7eb37dc07ffd848f2.png)](https://i.stack.imgur.com/pZqS9.png)

2.  项目 > 属性 > 部署 > 粘贴：

[![在此处输入图像描述](../Images/b0f387d0b5ac40fdb518ddcfdd83b8d3.png)](https://i.stack.imgur.com/ofjRK.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T21:38:57.723

要部署多维数据集 AS，您需要一个 SQL 实例作为源，一个 SSAS 实例作为目标。

问候，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-17T21:55:09.970

在遵循该教程时，我遇到了同样的错误。我通过以下方式解决了它：

*   双击项目数据源
*   在“模拟信息”选项卡中，我输入了 Windows 用户的凭据，而不是使用服务帐户。

确保您在项目部署服务器中拥有正确的 Server\Instance 名称，而不是本地主机。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T21:01:22.023

“localhost”是指您运行 Business Intelligence Studio 的机器。

你说你要部署到远程服务器，所以用服务器名或ip地址替换localhost（如“74.125.237.146”）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-13T21:13:09.880

另一个原因可能是 SQL Server 的 Express 版本。只有标准版有分析服务。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-28T21:47:57.577

在*Microsoft SQL Server*中，转到已注册的服务器并单击：

> 分析服务图标 -> 打开本地服务器组

在您的服务器用户名上单击鼠标右键，然后

> 服务控制 -> 开始

它会起作用的；）

# c# - 对您的 mvc3 应用程序进行单元测试的步骤？

> ID：11460110
> 
> 赞同：0
> 
> 时间：2012-07-12T20:27:50.260
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, unit-testing

我正在使用 asp.net mvc3 构建我的网站。我有以下层次。

控制器 -> 服务 -> 存储库

我刚开始我的项目，那里没有任何东西。我先从界面开始。

```
public interface IRepository<T>
{
    T Get(int id);
    void Save(T item);
    void Delete(int id);
}

public interface IUserRepository : IRepository<User>
{
    User GetUserByLogin(UserLoginViewModel userLogin);
} 
```

此时，我应该开始写单元测试还是先实现接口，写具体的repository方法，然后根据我写的方法进行单元测试。

我很困惑，不知道应该先走哪一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:08:12.453

正如我在您的[另一个问题](https://stackoverflow.com/a/11462476/470005)中指出的那样，理想情况下，您正在编写测试，定义外部对象所需的依赖项，并模拟它们。这允许您使用漂亮的 API 完成依赖项接口。

因此，在此示例中，您将`IUserRepository`在为用户控制器编写测试时创建接口。然后，您创建一些实现此接口的类，并开始为您的存储库实现编写测试。

另一种选择（我更喜欢） - 通过垂直切片迭代地实现您的系统：

1.  你为你的控制器写了一些测试
2.  您决定控制器需要存储库功能（例如`Save`）
3.  您将该功能添加到存储库界面
4.  您模拟此接口以进行控制器测试，并使其通过
5.  您为存储库实现方法编写测试`Save`并使其通过
6.  此时，所有切片都经过测试并正常工作。您返回到第 1 步。

顺便说一句，存储库的单元测试非常耗时，并且会给您带来一点好处，因为存储库中通常没有太多逻辑。我宁愿进行验收测试，它会运行所有系统并证明该功能已实现。

# python - 本地主机上的 Google App Engine GQL 查询

> ID：11460112
> 
> 赞同：3
> 
> 时间：2012-07-12T20:27:57.090
> 
> 标签：python, google-app-engine, localhost, gql

我正在 Google App Engine（Windows 上的 SDK 版本 1.7.0）上开发一个需要经常测试的应用程序，并且此测试涉及数据存储区上的大量 GQL 查询。

您可以在 App Engine 管理界面的浏览器中在线运行 GQL 查询：

![远程服务器上的 GQL 查询](../Images/9ddc7dea7e6c645685346368b358d5de.png)

但这在 localhost 的 SDK 管理控制台上似乎是不可能的。没有这样的选择：

![本地主机上没有 GQL 查询](../Images/58780483d36f570e68acdbd99de0065b.png)

所以看来我只能通过本地主机上的 python 脚本运行 GQL 查询。

每次都写个python脚本到处查询短任务的结果，不太方便。此外，如果您在在线管理界面执行此操作，您可以立即在下面的漂亮表格中看到查询结果。如果您想通过 python 脚本在浏览器窗口中可视化所有查询结果，则必须编写更多代码，基本上是尝试重写 Google 在其服务器管理界面上已经做得很好的内容。

因此，部署后我不得不在 App Engine 管理界面上的浏览器上执行此操作，这会不断增加我的允许操作计数，直到我很快达到每日免费配额限制。

那么有没有办法在我的本地主机上运行 GQL 查询（非编程方式，在浏览器上）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:29:43.927

你有交互式控制台，你可以在那里运行 GQL 查询。
例如，您可以在交互式控制台中运行以下代码：

```
from google.appengine.ext import db
q = db.GqlQuery("SELECT * FROM Song WHERE composer = 'Lennon, John'") 
```

# iphone - FB重复App ID

> ID：11460113
> 
> 赞同：1
> 
> 时间：2012-07-12T20:27:58.607
> 
> 标签：iphone, facebook-graph-api, facebook-apps, facebook-access-token

我在 FB 注册了一个应用程序，并使用 APP ID（API 密钥）让用户使用 FB 从 Web 和移动应用程序登录，一切正常。**直到我们开始看到一些间歇性故障 - 我们仍然会从 FB 获得访问令牌，但有时**无法使用它（会得到 400 - 验证访问令牌时出错：会话无效”）。当我进入 FB 应用程序设置页面时，我注意到 APP ID 与我们使用的不同。很奇怪，因为我不确定它是如何变化的。无论如何，我们尝试使用新的 API ID，它工作正常，但旧的也可以 - 至少有时是这样。

有人知道发生了什么吗？TIA

# python - NLTK 一个分类器中的多个特征集？

> ID：11460115
> 
> 赞同：2
> 
> 时间：2012-07-12T20:28:06.540
> 
> 标签：python, nlp, nltk

在 NLTK 中，使用朴素贝叶斯分类器，我从示例中知道使用“词袋”方法并查找一元或二元或两者都非常简单。你能用两组完全不同的功能做同样的事情吗？

例如，我可以使用 unigrams 和训练集的长度吗（我知道这已经在这里提到过一次）？但我更感兴趣的是出现在文档中的二元组和“二元组”或 POS 的组合？

这是否超出了基本 NLTK 分类器的能力？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T00:00:14.897

NLTK 分类器可以使用任何键值字典。我`{"word": True}`用于文本分类，但您也可以使用`{"contains(word)": 1}`来达到相同的效果。您还可以将许多功能组合在一起，这样您就可以拥有`{"word": True, "something something": 1, "something else": "a"}`. 最重要的是您的功能是一致的，因此您始终拥有相同类型的键和一组固定的可能值。可以使用数值，但分类器对它们并不聪明——它将数字视为离散值，因此 99 和 100 与 1 和 100 一样不同。如果您希望以更智能的方式处理数字，那么我推荐使用 scikit-learn 分类器。

# diff - 用 Aptana 比较两个文件

> ID：11460120
> 
> 赞同：7
> 
> 时间：2012-07-12T20:28:39.520
> 
> 标签：diff, compare, aptana, aptana3

我记得在我更新我的 Aptana 安装之前，它能够通过右键单击 -> 比较来比较两个选定的文件。现在好像没有启用这个功能...

我想知道是否有办法在版本 3 中实现相同的构建：3.2.0.201206251729。

提前感谢，祝你好运！！！:)

PD：当我右键单击任何文件时，不会出现比较选项。加上菜单“团队”消失了

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T20:38:17.483

您必须更改为项目资源管理器视图，然后右键单击所选文件后您将看到比较选项:)

# asp.net - 何时在普通 HTML 上使用 runat="server"

> ID：11460121
> 
> 赞同：22
> 
> 时间：2012-07-12T20:28:43.103
> 
> 标签：asp.net, html, webforms

在标准 HTML 元素而不是真正的 ASP.NET 控件上使用 runat="server" 是否合适？我可以完全控制设置普通元素的 html/文本，那么为什么我不使用它来代替“笨重”的 ASP.NET WebForms 控件呢？

如果一个比另一个更好，我想知道一些兴趣点：

*   性能差异
*   功能差异
*   其他区别不那么明显？

示例差异：

```
<asp:Literal ID="mySpecialHtml" runat="server" />

<div id="mySpecialHtml" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-12T21:52:48.657

两者都是 ASP.NET 服务器控件。与 HTML 元素对应的元素在`System.Web.UI.HtmlControls`命名空间中，Web 控件在`System.Web.UI.WebControls`命名空间中。

HTML 控件更轻量级，并且与 HTML 元素完全对应，而 Web 控件具有更多功能，可以根据浏览器功能和控件设置呈现为不同的 HTML 元素。

HTML 控件呈现为单个 HTML 元素，而 Web 控件呈现为零个或多个 HTML 元素。例如，`Literal`控件不呈现为元素，它只输出其文本。还有其他控件本身不呈现任何元素，例如`Repeater`和`PlaceHolder`控件。另一方面，`CheckBoxList`例如，控件被呈现为几个 HTML 元素，一个`table`作为容器，以及`input`其中每个复选框的元素。

使用不同元素呈现的控件的一个示例是`TextBox`控件，它将根据其属性呈现为元素`input`或元素。`textarea``TextMode`

Web 控件具有更多功能，但也使用更多资源。它们具有更多属性并支持主题和数据绑定等内容。许多 Web 控件将数据放入 中`ViewState`，作为页面的一部分发送。如果不小心，`ViewState`可能会变得很大，并影响页面的加载时间。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T20:31:21.200

我使用服务器 html 控件的唯一原因是当我需要编写自己的 html 的灵活性但仍需要在代码中访问它的属性时。

```
<div id="mySpecialHtml" runat="server" /> 
```

在后面的代码中：

```
mySpecialHtml.InnerHtml = "something else"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T20:38:03.753

ASP.NET 解析器将带有 runat="server" 标记的标准 html 元素解释为 html 服务器控件。例子：

```
<a runat="server"></a> 
```

被解释为

```
<asp:HtmlAnchor runat="server"></asp:HtmlAnchor> 
```

因此，请注意，如果您使用 runat="server"，那么您使用的是相应的 HTML Server 控件。

此外，ASP.NET 包含一组 Web 服务器控件，即 HyperLink 控件，它们提供更多的功能、更多的属性、事件等，但在某些情况下可能会更慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T20:37:06.633

我更喜欢在客户端有更多工作时使用 html 控件，而在服务器端有更多工作时（代码隐藏）使用 asp.net 控件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T20:57:45.437

我相信 ASP.NET 使用一组不同的 Web 服务器控件，这些控件通常具有更多功能，但这完全取决于您的偏好。如果您的工作主要是服务器端的，我会坚持使用 ASP.NET 控件。

# iphone - 在 ViewController 之间传输 NSFetchedResultsController

> ID：11460128
> 
> 赞同：0
> 
> 时间：2012-07-12T20:28:58.333
> 
> 标签：iphone, core-data, xcode4.3

我正在尝试在名为 SelectorViewController 的视图控制器上选择名为“Practice”的核心数据实体的名为“selectedPractice”的对象，然后保留结果以在另一个名为 RegularViewController 的控制器中使用。两者都是 UIViewControllers，因为我试图将核心数据附加到的现有应用程序不使用 Tab 或 NavigationControllers。

我尝试使用以下代码将两个控制器的 ManagedObjectContexts 设置为与 AppDelegate.m 中的 AppDelegate 相同：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
SelectorViewController *svc;
    svc.managedObjectContext = self.managedObjectContext;
    svc.fetchedResultsController = self.fetchedResultsController;

    RegularViewController *rvc;
    rvc.managedObjectContext = self.managedObjectContext;
    rvc.fetchedResultsController = self.fetchedResultsController;
        return YES;
} 
```

AppDelegate.m 这里也有一个 setupFetchedResultsController 方法（改编自 Tim Roadley 的优秀作品）：

```
- (void)setupFetchedResultsController
{
    // 1 - Decide what Entity you want
    NSString *entityName = @"Practice"; // Put your entity name here
    NSLog(@"AppDelegate Setting up a Fetched Results Controller for the Entity named %@", entityName);

    // 2 - Request that Entity
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];

    // 3 - Filter it if you want
    //request.predicate = [NSPredicate predicateWithFormat:@"Practice.name = Blah"];

    // 4 - Sort it if you want
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name"
                                                                                     ascending:YES
                                                                                      selector:@selector(localizedCaseInsensitiveCompare:)]];

    // 5 - Fetch it
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
    [self.fetchedResultsController performFetch:nil];
    NSLog(@"AppDelegate setupFetchedResultsController completed");
} 
```

这在显示所有 NSLog 时运行良好。然后在 SelectorViewController.m 中有另一个 setupFetchedResultsController 实例，但它会导致崩溃并显示以下日志。是 FetchedResultsController 重新启动的问题吗？

> 2012-07-12 20:49:07.652 WhiteHealth[6969:15b03] SelectorViewController 排序实体完成 2012-07-12 20:49:07.653 WhiteHealth[6969:15b03] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ NSFetchedResultsController 的一个实例需要一个非零的 fetchRequest 和 managedObjectContext'

```
- (void)performFetch
{
    if (self.fetchedResultsController) {
        if (self.fetchedResultsController.fetchRequest.predicate) {
            if (self.debug) NSLog(@"[%@ %@] fetching %@ with predicate: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName, self.fetchedResultsController.fetchRequest.predicate);
        } else {
            if (self.debug) NSLog(@"[%@ %@] fetching all %@ (i.e., no predicate)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName);
        }
        NSError *error;
        [self.fetchedResultsController performFetch:&error];
        if (error) NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);
    } else {
        if (self.debug) NSLog(@"[%@ %@] no NSFetchedResultsController (yet?)", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    }
    [pickerView reloadAllComponents];
}

- (void)setupFetchedResultsController
{
    // 1 - Decide what Entity you want
    NSString *entityName = @"Practice"; // Put your entity name here
    NSLog(@"SelectorViewController Setting up a Fetched Results Controller for the Entity named %@", entityName);

    // 2 - Request that Entity
    [NSFetchedResultsController deleteCacheWithName:nil]; 
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entityName];
    NSLog(@"SelectorViewController requesting entity complete");

    // 3 - Filter it if you want
    //request.predicate = [NSPredicate predicateWithFormat:@"Person.name = Blah"];

    // 4 - Sort it if you want
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name"
                                                                                     ascending:YES
                                                                                      selector:@selector(localizedCaseInsensitiveCompare:)]];
    NSLog(@"SelectorViewController sorting entity complete");

    // 5 - Fetch it
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
    [self performFetch];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:39:16.927

```
SelectorViewController *svc;
svc.managedObjectContext = self.managedObjectContext;
svc.fetchedResultsController = self.fetchedResultsController;

RegularViewController *rvc;
rvc.managedObjectContext = self.managedObjectContext;
rvc.fetchedResultsController = self.fetchedResultsController;
    return YES; 
```

不会为您设置 managedObjectContexts，您不会初始化 svc 和 rvc，您所做的只是制作对象。如果要设置 managedObject 上下文，请进入 viewDidLoad 或在运行 fetch 请求之前，并执行以下检查：

```
if (self.managedObjectContext == nil) {
    self.managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
} 
```

# handlebars.js - 在 Rails 资产管道中使用外部把手模板和 Marionette

> ID：11460131
> 
> 赞同：3
> 
> 时间：2012-07-12T20:29:08.647
> 
> 标签：handlebars.js, marionette

是否可以在不使用 Marionette.Async 的情况下引用外部 Handlebars 模板文件？

我只是想更好地组织我的模板片段（Rails Asset Pipeline），因此不需要异步加载，但需要单独的文件。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T01:24:41.793

wiki 列出了一个可以轻松使用 Handlebars 的插件，以及一种无需任何插件即可使 Handlebars 工作的简单方法。

[https://github.com/derickbailey/backbone.marionette/wiki/Using-handlebars-templates-with-marionette](https://github.com/derickbailey/backbone.marionette/wiki/Using-handlebars-templates-with-marionette)

[https://github.com/asciidisco/Backbone.Marionette.Handlebars](https://github.com/asciidisco/Backbone.Marionette.Handlebars)

这些可能会满足您的需求。如果没有，这将是一个很好的起点，以获得您需要的功能。

# c++ - 我对文件结束感到困惑

> ID：11460132
> 
> 赞同：0
> 
> 时间：2012-07-12T20:29:15.163
> 
> 标签：c++

我真的对文件结束感到困惑。假设我正在运行一个无限循环。在这个循环中，我将一个整数作为输入，然后对其进行处理，直到找到一个文件结尾。但是我是否检查输入是否是文件结尾。以及如何打破循环？

我使用 Windows，所以对于 EOF，我输入的是 CTRL+Z。

```
#include<iostream>
#include<cstdio>
using namespace std;

int main(void)
{
  int n;
  while(true)
  {
    cin >> n;
    if(n==EOF)break;
    cout << n << endl;
  }
  return 0;
} 
```

当我运行此代码并键入 CTRL+z 时，它只会无休止地打印我给出的最后一个输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:30:48.137

1）这不是您检查文件结尾的方式。您在哪里读到`operator>>`会返回 EOF 值的内容？

查看您是否尝试读取文件结尾的正确方法是 this `if(cin.eof())`。但是，永远不要这样做，因为：

2）你不应该检查文件结尾。相反，您应该检查“最后一个输入操作是否正常工作？”

像这样：

```
#include<iostream>
#include<cstdio>
using namespace std;

int main(void)
{
  int n;
  while(cin >> n)
  {
    cout << n << endl;
  }
  return 0;
} 
```

* * *

*参考*：[从文本文件中读取直到 EOF 重复最后一行](https://stackoverflow.com/questions/21647/reading-from-text-file-until-eof-repeats-last-line)

# php - 带有 preg_match() 的 PHP 正则表达式

> ID：11460133
> 
> 赞同：-3
> 
> 时间：2012-07-12T20:29:22.007
> 
> 标签：php, regex

我想检查一个变量是否只包含字母字符和撇号 (') 以及破折号 (-) 和空格 () 字符。我如何`preg_match()`在 PHP 中做到这一点？

我有 /[^a-zA-Z'-\s]/i 并且没有撇号就解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:32:25.540

尝试`/^[a-zA-Z'\-\s]*$/`作为您的正则表达式字符串。请注意，此正则表达式也将匹配空白字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:44:36.517

```
preg_match('/^[\s\pL'-]+$/',$string) 
```

这是我会做的方式

//编辑

也许如果您的字母数量最少，请使用：

```
preg_match("/^[\s\pL'-]{5,}$/",$string) //{x,} ---> x is your min number 
```

# php - PHP中有没有办法捕获使用POST方法传递的所有信息

> ID：11460137
> 
> 赞同：5
> 
> 时间：2012-07-12T20:29:44.017
> 
> 标签：php, post, get, http-post

不久前，我问了一个关于在一个页面中多次使用相同的输入名称/隐藏名称的问题，并得到一个不起作用的答案，因为它表明我必须使用在字段名称后面加上括号，例如`partno[]`.

我不能在我的表单中使用它，因为它被发送到的购物车只能识别某些字段名称，例如：partno、item、price、qty 等（我不能使用`partno[], item[]`等）所以我真的需要能够得到每个相同字段名称的所有值都使用了多次。当我使用该方法`GET`时，它将显示地址栏中使用的每个字段名称的所有值。你可以试试[这个](http://wcoins.com/brenckles2/)并提交表格。查看地址栏中的网址。

我的新问题是：PHP 中有没有办法捕获使用该`POST`方法传递的所有信息？（就像上面示例中地址栏中显示的内容，但使用`POST`, not `GET`）。如果我能找到捕获它的方法，我可以解析它。

谢谢，凯利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:32:27.277

您只需使用`$_POST`而不是`$_GET`.

因此，如果您通过以下方式使用 get ：

```
?something=somevalue 
```

并且正在捕捉它`$_GET['something']`，您现在将使用`$_POST['something']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:38:54.787

您可以直接从输入流中获取未污染的数据：

```
file_get_contents('php://input'); 
```

所以如果你有这样的事情：

```
<input name="type" value="val1">
<input name="type" value="val2">
<input name="type" value="val3"> 
```

你会得到一个这样的字符串：

```
type=val1&type=val2&type=val3 
```

然后，您可以将此字符串解析为一个数组并创建您自己的“原始帖子数据”。

> [http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)
> 
> php://input 是一个只读流，允许您从请求正文中读取原始数据。对于 POST 请求，最好使用 php://input 而不是 $HTTP_RAW_POST_DATA，因为它不依赖于特殊的 php.ini 指令。此外，对于那些默认情况下不填充 $HTTP_RAW_POST_DATA 的情况，与激活 always_populate_raw_post_data 相比，它可能是一种内存密集度较低的替代方案。php://input 不适用于 enctype="multipart/form-data"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:32:31.187

由于 PHP 中的 POST 只不过是一个数组，因此只需对其进行迭代。

```
foreach($_POST as $k => $v) {
   echo($k . ': '. $v . '<br>');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:59:18.043

如果您想查看所有 $_POST 发送的内容，请使用 var_dump($_POST) 或 echo print_r($_POST)。这将向您显示所有字段名称和数据，即使字段名称包含数组，例如您的 partno[]。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-12T20:35:16.197

无法发布与字符串同名的 2 个输入。您应该修改购物车以将数组转换为字符串。

如果您使用的是 GET，您可以查看[parse_url](http://php.net/manual/en/function.parse-url.php) () 函数。

# wcf - 无法在 Windows 8 上的 IIS 中提供 WCF 服务

> ID：11460142
> 
> 赞同：202
> 
> 时间：2012-07-12T20:30:02.270
> 
> 标签：wcf, iis, windows-8

当我尝试在 Windows 8 机器上的 IIS 上提供 WCF 服务时，我收到了众所周知的错误

> 由于扩展配置，无法提供您请求的页面。如果页面是脚本，则添加处理程序。如果应该下载文件，请添加 MIME 映射。

旧的解决方法是运行`aspnet_regiis -i`，但这个命令似乎在 Windows 8 中已被弃用，产生响应`This option is not supported on this version of the operating system. (...)`。

解决方法是什么？

（我已经成功启用了常规`aspx`页面，所以大部分 IIS 配置看起来都很健康。）

* * *

## 回答 #1

> 赞同：419
> 
> 时间：2012-07-12T20:35:38.713

似乎不费吹灰之力；应`Programs and Features -> Turn Windows features on or off`在控制面板中启用 WCF 服务。按照[mdsn 上的此博客文章中的说明，](https://docs.microsoft.com/archive/blogs/writingdata_services/running-wcf-data-services-on-windows-8-consumer-preview-part-1)转到`.NET Framework Advanced Services -> WCF Services`并启用。`HTTP Activation`

从命令提示符（以管理员身份），您可以运行：

```
C:\> DISM /Online /Enable-Feature /FeatureName:WCF-HTTP-Activation
C:\> DISM /Online /Enable-Feature /FeatureName:WCF-HTTP-Activation45 
```

如果您收到错误，请使用以下内容

```
C:\> DISM /Online /Enable-Feature /all /FeatureName:WCF-HTTP-Activation
C:\> DISM /Online /Enable-Feature /all /FeatureName:WCF-HTTP-Activation45 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-01-03T19:16:50.477

对于 Windows Server 2012，该解决方案与 faester 的解决方案非常相似（见上文）。在服务器管理器中，单击`Add roles and features`，选择适当的服务器，然后选择`Features`。在 下`.NET Framework 4.5 Features`，您会看到`WCF Services`，在此之下，您会发现`HTTP Activation`。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-05T06:28:25.110

请在 IIS 8.0 上执行以下两个步骤

添加新的 MIME 类型和 HttpHandler

1.  扩展名：.svc，MIME 类型：application/octet-stream

2.  请求路径：*.svc，类型：System.ServiceModel.Activation.HttpHandler，名称：svc-Integrated

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-11-01T05:44:55.437

您也可以通过打开 Windows 功能来实现此目的。 [![在此处输入图像描述](../Images/bef03982fc7c8b7a01424b57eb56b127.png)](https://i.stack.imgur.com/zKr50.png) [![在此处输入图像描述](../Images/dcb905d604d3e85e1edcea1e9a378009.png)](https://i.stack.imgur.com/b4RF2.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-15T03:35:25.973

这与 faester 的解决方案和 Bill Moon 的解决方案实际上是相同的解决方案，但以下是使用 PowerShell 的方法：

```
Import-Module Servermanager
Add-WindowsFeature AS-HTTP-Activation 
```

当然，也没有什么能阻止您`DISM`从 PowerShell 调用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-10-24T11:21:34.040

您可以将此代码添加到 asp mvc 中的 web.config

```
 <system.webServer>
    <staticContent>
      <remove fileExtension=".srt" />
      <mimeMap fileExtension=".srt" mimeType="text/srt" />
      <remove fileExtension=".vtt" />
      <mimeMap fileExtension=".vtt" mimeType="text/vtt" />
    </staticContent>
  </system.webServer> 
```

您可以使用文件扩展名更改文件扩展名

# php - 使用贝宝自适应付款默认显示付款详情

> ID：11460143
> 
> 赞同：2
> 
> 时间：2012-07-12T20:30:03.667
> 
> 标签：php, javascript, paypal, paypal-adaptive-payments

我目前正在使用贝宝自适应付款并设置并行付款，并使用对 SetPaymentOptions 的调用来设置费用明细。我目前在“您将要付款”屏幕中看到的是收款人列表，旁边有加号按钮，然后如果您单击加号按钮，它会为您提供费用明细。问题是我希望开始打开费用清单的细目。这可能吗？似乎可以使用贝宝快递。我不想在我的网站上列出这些费用的原因是除了我们的额外费用之外，我们让客户支付贝宝的费用。我不想将附加费用的屏幕分开。而且这个似乎更绝望，但有什么办法让贝宝将“费用”称为“贝宝费用”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:34:37.200

有两个结帐流程。

您所看到的是“经典流程”。对于自适应支付，它**不**显示由 SetPaymentOptions API 调用设置的单个行项目选项。

还有另一个流程，但是确实显示了这种故障。它是“嵌入式流程”（类似于 Express Checkout 系列产品中的数字商品流程）。

它旨在显示在弹出窗口或 iframe 中，并将显示细分。

您可以在此处看到：在您获得支付密钥并进行 SetPaymentOptions 调用后，将用户重定向到以下 URL：

[https://www.paypal.com/webapps/adaptivepayment/flow/pay?paykey=](https://www.paypal.com/webapps/adaptivepayment/flow/pay?paykey=) < YOURPAYKEY >

（以上用于生产设置。如果您在该环境下进行测试，请确保使用沙盒 URL）。

有关详细信息，请参阅第 26 页 [ [https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf) ]

# php - 寻找一种在 PHP 和 iOS 之间加密/解密网络数据的方法

> ID：11460144
> 
> 赞同：1
> 
> 时间：2012-07-12T20:30:06.593
> 
> 标签：php, ios, encryption

我想在我的服务器和客户端的 iOS 应用程序之间使用共享密钥（可能会在应用程序的每个版本中更改），以便可以加密和解密数据。至少我需要在 iOS 端进行这项工作，对即将发送的数据进行加密。我不希望机器人或恶意用户扫描我的数据库。我需要加密位置、时间戳和一些数据。

原始字符串可能有 100-200 个字符长。加密前。
使用 SSL 将有助于规避“中间人”。但我需要发送加密的 URL。就像是：

1.  iOS端请求：
    NSString* theKey = "Kazam";
    NSString* theString =" `lat=10.222455`& `lon=23.342224455`& `ID=3476rghfb3uf34f`& `timestamp=34325224433`"
    参数=urlencode(encryptString(theString,theKey));

    https://www.mydomain.com/page1.php? **参数=sdhcy39h923498ufdd**

2.  服务器接收参数并对其进行解密。
    PHP 服务器：
    $theKey = "Kazam";
    $decrypted=decryptString($GET['param'],$theKey);

3.  然后将数据返回给客户端。

同样，我不介意从服务器发送的数据是否不会被加密。毕竟，客户端是可能扫描数据库的人。

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:45:24.863

不要使用 URL 来传递参数。也就是说，使用 POST 请求而不是 GET 请求。就这么简单！通过 HTTPS 发送 POST 请求非常安全。**更新：**是的，GET 请求是通过 HTTPS 加密的。但是出于某些（可能是没有根据的）原因，POST 对我来说似乎更安全。我只是不喜欢变量或密码可以存储在浏览器缓存或服务器日志中的想法。此外，黑客更容易使用 GET 设置恶意链接。

另外，不要忘记，如果网络上有东西，任何人都可以发送请求，因此您可能应该使用服务器端身份验证，除非您完全确定可以在合法请求和欺诈请求之间破译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:47:21.023

使用 SSL (HTTPS) 时，整个 HTTP 请求都是加密的，因此您可以像以前一样在 URL 中发送数据。

# c# - 进度条不更新

> ID：11460153
> 
> 赞同：3
> 
> 时间：2012-07-12T20:30:35.810
> 
> 标签：c#, wpf, multithreading, progress-bar, backgroundworker

我有一个包含按钮和进度条元素的 WPF 表单。当我单击该按钮时，它会从另一个类调用一个函数，该函数启动一个后台工作程序，该工作程序负责通过串行端口读取/写入数据到我正在为其编写 Windows 界面的设备。

以前我正在使用一个新线程，但我决定尝试一个后台工作者，但仍然没有运气。

发生的事情是我单击按钮，进度条保持在 0%，直到我的耗时（10 多秒）for 循环完成，然后进度跳到 100%

任何帮助表示赞赏，在此先感谢。下面是我的接口逻辑的代码：

```
private void connectButton_Click(object sender, RoutedEventArgs e) //Connect button clicked
    {
        if (!Global.isConnected)
        {
            device.readValues((string)portsOpen.SelectedValue, connectProgress);

            portsOpen.IsEnabled = false;
            connectButton.Content = "Disconnect";
        }
        else
        {
            device.disconnect();

            portsOpen.IsEnabled = true;
            connectButton.Content = "Connect";
        }
    } 
```

下面是我的附加课程的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO.Ports;
using System.Windows.Controls;
using System.ComponentModel;

namespace lookoutSecurity
{
    class agentRadioRead
    {
    /*Local Variable Declarations*/
    SerialPort sp;
    BackgroundWorker worker;
    int attempt = 0;

    public string[] populateAvailablePorts() //Returns string array of open ports
    {
        String[] portsAvailable = SerialPort.GetPortNames();
        return portsAvailable;
    }

    public void readValues(string selectedPort, ProgressBar progressBar) //Function that sets up serial port and background worker
    {
        sp = new SerialPort(selectedPort, 9600, Parity.None, 8, StopBits.One);

        worker = new BackgroundWorker();
        worker.WorkerReportsProgress = true;
        worker.DoWork += new DoWorkEventHandler(worker_DoWork);
        worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);
        worker.RunWorkerAsync(progressBar);
    }

    private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e) //Update user interface with current percentage
    {
        ProgressBar progressBar = e.UserState as ProgressBar;

        App.Current.Dispatcher.Invoke(
            System.Windows.Threading.DispatcherPriority.Send,
                new Action(
                    delegate()
                    { progressBar.Value = e.ProgressPercentage; }));
    }

    private void worker_DoWork(object sender, DoWorkEventArgs e) //Initial starting point for reading data
    {
        startRead((ProgressBar)e.Argument);
    }

    private string sendInitial() //Sends ? and returns init ASUTTON
    {
        string init = "";
        sp.Write("?");

        for (int i = 0; i < 7; i++)
        {
            try
            {
                init += sp.ReadByte().ToString();
            }
            catch
            {
                break;
            }
        }

        return init;
    }

    private void startRead(ProgressBar progressBar) //Initializes data send and receive
    {
        sp.ReadTimeout = 5000;
        sp.Open();

        string init = sendInitial();

        if (init == Global.AGENT_RADIO)
        {
            sp.Write(Global.READ_VALUES, 0, Global.READ_VALUES.Length);

            byte key = (byte)sp.ReadByte();

            if (Global.START_COMMAND == key)
            {
                for (int i = 1; i < 2247; i++)
                {
                    object progressBarObject = new object();
                    progressBarObject = progressBar;
                    int progress = (i / 2246) * 100;
                    worker.ReportProgress(progress, progressBarObject);

                    readData(i, progressBar);
                    sp.Write(Global.GO_AHEAD, 0, Global.GO_AHEAD.Length);

                    sp.DiscardInBuffer();
                    sp.DiscardOutBuffer();
                }
            }
            else
            {
                System.Windows.MessageBox.Show("Connection Failed - Invalid Key: " + key);
                sp.Close();
            }
        }
        else
        {
            sp.Close();

            if (attempt < 3)
            {
                attempt++;
                startRead(progressBar);
            }
            else
            {
                System.Windows.MessageBox.Show("Connection Failed - Not Agent Radio: " + init);
            }
        }
    }

    private void readData(int iteration, ProgressBar progress) //Reads data for current iteration
    {
        byte value = 0;

        try
        {
            value = (byte)sp.ReadByte();
        }
        catch
        {
            sp.Close();
            Global.isConnected = false;

            if (attempt < 3)
            {
                attempt++;
                startRead(progress);
            }
            else
            {
                System.Windows.MessageBox.Show("Read Timeout - Value Number: " + iteration);
                App.Current.Shutdown();
            }
        }

        if (iteration > 0 && iteration < 385) //read schedule
        {
            double pos = (iteration - 1) / 48;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1) - (i * 48);

            Live.schedule[i, j] = value;
        }

        if (iteration > 384 && iteration < 1285) //read alarm history
        {
            double pos = (iteration - 385) / 9;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 385) - (i * 9);

            Live.alarms[i, j] = value;
        }

        if (iteration > 1284 && iteration < 1345) //read error log
        {
            double pos = (iteration - 1285) / 6;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1285) - (i * 6);

            Live.errors[i, j] = value;
        }

        if (iteration > 1344 && iteration < 1945) //read voltage history
        {
            double pos = (iteration - 1345) / 6;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1345) - (i * 6);

            Live.voltage[i, j] = value;
        }

        if (iteration > 1944 && iteration < 1973) //read holidays
        {
            Live.holidays[iteration - 1945] = value;
        }

        if (iteration > 1972 && iteration < 2168) //read message sequences
        {
            double pos = (iteration - 1973) / 15;

            int i = (int)Math.Floor(pos);
            int j = (iteration - 1973) - (i * 15);

            Live.messages[i, j] = value;
        }

        if (iteration > 2167 && iteration < 2196) //read message info
        {
            Live.recordings[iteration - 2168] = value;
        }

        if (iteration > 2195 && iteration < 2246) //read sysval
        {
            Live.sysval[iteration - 2196] = value;
        }

        if (iteration == 2246 && value == Global.FINISH_COMMAND)
        {
            System.Windows.MessageBox.Show("All values from the device have been received.", "Data Received", System.Windows.MessageBoxButton.OK, System.Windows.MessageBoxImage.Information);

            Global.isConnected = true;
        }
    }

    public void disconnect() //Disconnects device
    {
        if (Global.isConnected == true)
        {
            sp.Write(Global.EXIT_PROGRAM, 0, Global.EXIT_PROGRAM.Length);
            Global.isConnected = false;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:40:15.773

你的问题在这里：

```
int progress = (i / 2246) * 100; 
```

i/2246 将给出一个 int，它将被截断为零（因为 i 从 0 运行到 < 2246），* 100 给出零。直到你的循环结束，当 i = 2246 和 2246 / 2446 * 100 = 100 时。

我自己就已经为此而堕落了。您需要将 i 转换为浮点数（或双精度数），以便它进行浮点除法而不是整数除法。然后你需要将所有内容都转换回一个 int，因为 progress 是一个 int。

就像是：

```
int progress = (int)((float)i/2246.0) * 100; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:40:28.230

这主要是由于以下原因：

```
int progress = (i / 2246) * 100; 
```

进度总是`0`直到`i>2246`，这就是为什么你得到一个进度值`0`直到最后一次循环迭代，其中进度等于`1*100=100`

你应该这样做：

```
int progress = (int)(((double) i / 2246.0) * 100); 
```

# android - Android图像矩阵和限制边界不当行为

> ID：11460156
> 
> 赞同：2
> 
> 时间：2012-07-12T20:30:46.077
> 
> 标签：android, image, scaling, multi-touch

我对 Android 中的图像缩放和拖动有疑问。我创建了自己的视图。视图的一部分是可缩放和可拖动的图像。只要图像的这一部分与整个视图一样大，一切正常。图像缩放和拖动完美，限制也很好。但是，当我尝试只用位图填充视图的一部分时，我对图像右下角的限制就会中断。图像缩放得越多，右下角的冗余偏移量就越多。

矩阵需要独立于屏幕和视图大小，因为用户可以保存视图的矩阵。为了使矩阵独立，我声明了一个值 getPIXEL_INDEPENDENT_INNER_WIDTH / getPIXEL_INDEPENDENT_INNER_HEIGHT，它是图像的大小。整个视图的大小在 getPIXEL_INDEPENDENT_HEIGHT / getPIXEL_INDEPENDENT_WIDTH 中声明。结果，即使视图变形，视图的比例也始终相同。

我认为原因是图像的后期缩放/翻译。另一方面，ondraw 方法不会改变矩阵。它制作一个副本，然后重新翻译和重新缩放视图内部的图像。

这里以图片来演示这个问题：

[在开始时查看](http://i.imgur.com/1R4lz.png)

[当用户拖动或缩放右下角的图像时](http://i.imgur.com/C6GdM.png)

源代码：

设置内容：

```
private float           minScale;
private float           PIXEL_INDEPENDENT_INNER_WIDTH;
private float           PIXEL_INDEPENDENT_INNER_HEIGHT;

public void setContent(FailPictureInfoContainer ic, Bitmap bm) {
    if (ic == null)
        return;

    ic.text[0] = (ic.text[0] != null) ? ic.text[0] : "";
    ic.text[1] = (ic.text[1] != null) ? ic.text[1] : "";
    bitmap = bm;

    //CREATE MATRIX
    Matrix m = new Matrix();
    float[] matrixAsFloats = new float[9];
    if (bitmap != null) {//Wenn Bild vorhanden und noch ohne Matrix, angepasste Matrix erzeugen.

        //Wenn breiter als hoch
        if (getPIXEL_INDEPENDENT_INNER_WIDTH()/bm.getWidth() < getPIXEL_INDEPENDENT_INNER_HEIGHT()/bm.getHeight())
            m.postScale(getPIXEL_INDEPENDENT_INNER_HEIGHT() / bm.getHeight(), getPIXEL_INDEPENDENT_INNER_HEIGHT() / bm.getHeight());

        //Wenn höher als breit
        else
            m.postScale(getPIXEL_INDEPENDENT_INNER_WIDTH() / bm.getWidth(), getPIXEL_INDEPENDENT_INNER_WIDTH() / bm.getWidth());
    }
    m.getValues(matrixAsFloats);
    setMinScale((matrixAsFloats[Matrix.MSCALE_X]>matrixAsFloats[Matrix.MSCALE_Y]) ? matrixAsFloats[Matrix.MSCALE_X] : matrixAsFloats[Matrix.MSCALE_Y]);

    if (ic.matrix == null)
        ic.matrix = matrixAsFloats;

    this.ic = ic;
    update();
} 
```

画布：

```
 @Override
void drawOnCanvas(Canvas canvas, float width, float height) {
    if (bitmap == null || matrix_pixel_independent == null || ic == null)
        return;

    System.out.println(Arrays.toString(getIc().matrix));
    // TopText & BottomText ANGLEICHEN
    TextPaint_TOP = getFormattedTextView((int) (ic.textsize[0] * width / getPIXEL_OUTPUT_WIDTH()), ic.color[0]);
    TextPaint_BOTTOM = getFormattedTextView((int) (ic.textsize[1] * width / getPIXEL_OUTPUT_WIDTH()), ic.color[1]);

    // Canvas anpassen.
    canvas.setDensity(bitmap.getDensity());
    matrix_pixel_dependent.set(matrix_pixel_independent);
    float borderPadding = 7f * width / getPIXEL_INDEPENDENT_WIDTH(); //Abstand zwischen Linie und Bild.
    float paddingFactor = (getPIXEL_INDEPENDENT_WIDTH() - getPIXEL_INDEPENDENT_INNER_WIDTH()) / 2 * width
            / getPIXEL_INDEPENDENT_WIDTH(); //Abstand zwischen View und Bild.
    float lowerBound = getPIXEL_INDEPENDENT_INNER_HEIGHT() * height / getPIXEL_INDEPENDENT_HEIGHT() + paddingFactor + borderPadding; // Entspricht y-Wert unter Bild und Padding.
    matrix_pixel_dependent.preScale(width / getPIXEL_INDEPENDENT_WIDTH(), height / getPIXEL_INDEPENDENT_HEIGHT(), 0,0);
    matrix_pixel_dependent.postTranslate(paddingFactor, paddingFactor);
    canvas.drawBitmap(bitmap, matrix_pixel_dependent, paint);
    paint.setColorFilter(null);
            } 
```

触摸事件：

```
 @Override
public boolean onTouchEvent(MotionEvent event) {

    if (bitmap == null || getIc() == null)
        return true;

    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            //DOUBLE TAP
            lastTapped = System.currentTimeMillis() - lastTapped;
            if (lastTapped < 350 && lastTapped > 90){
                touchEnabled = !touchEnabled;
                lastTapped = System.currentTimeMillis()-900;
            }else
                lastTapped = System.currentTimeMillis();

            if (!touchEnabled) {
                invalidate();
                return false;
            }

            //MOVE PREPARE
            savedMatrix.set(matrix_pixel_independent);
            Finger_startPosition.set(event.getX(), event.getY());
            mode = DRAG;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            Finger_oldDistance = spacing(event);
            if (Finger_oldDistance > 3f) {
                savedMatrix.set(matrix_pixel_independent);
                midPoint(Finger_Midpoint, event);
                mode = ZOOM;
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_CANCEL:
        case MotionEvent.ACTION_OUTSIDE:
            mode = NONE;

            if (posChanged) {
                posChanged = false;

                if (getIc().matrix[Matrix.MSCALE_X] < getMinScale()) {
                    float scale = getMinScale() / getIc().matrix[Matrix.MSCALE_X];
                    matrix_pixel_independent.preScale(scale, scale, Finger_Midpoint.x, Finger_Midpoint.y);
                }

                matrix_pixel_independent.getValues(getIc().matrix);

                float newX_post = 0;
                float newY_post = 0;
                float imageWidth_post = newX_post + bitmap.getWidth() * getIc().matrix[Matrix.MSCALE_X];
                float imageHeight_post = newY_post + bitmap.getHeight() * getIc().matrix[Matrix.MSCALE_Y];
                RectF drawingRect_post = new RectF(getIc().matrix[Matrix.MTRANS_X], getIc().matrix[Matrix.MTRANS_Y],
                        getIc().matrix[Matrix.MTRANS_X] + imageWidth_post, getIc().matrix[Matrix.MTRANS_Y] + imageHeight_post);
                float diffUp_post = Math.min(getPIXEL_INDEPENDENT_INNER_HEIGHT() - drawingRect_post.bottom, -drawingRect_post.top);
                float diffDown_post = Math.max(getPIXEL_INDEPENDENT_INNER_HEIGHT() - drawingRect_post.bottom, -drawingRect_post.top);
                float diffLeft_post = Math.min(getPIXEL_INDEPENDENT_INNER_WIDTH() - drawingRect_post.right, -drawingRect_post.left);
                float diffRight_post = Math.max(getPIXEL_INDEPENDENT_INNER_WIDTH() - drawingRect_post.right, -drawingRect_post.left);

                if (diffUp_post > 0)
                    newY_post += diffUp_post;

                if (diffDown_post < 0)
                    newY_post += diffDown_post;

                if (diffLeft_post > 0)
                    newX_post += diffLeft_post;

                if (diffRight_post < 0)
                    newX_post += diffRight_post;

                matrix_pixel_independent.postTranslate(newX_post, newY_post);

                Log.d(MainActivity.TAG, "width: "+imageWidth_post+" height: "+imageHeight_post+ " xstart: "+getIc().matrix[Matrix.MTRANS_X]+ " ystart: " +getIc().matrix[Matrix.MTRANS_Y]+ " xend: "+ getIc().matrix[Matrix.MTRANS_X] + imageWidth_post+" yend: "+getIc().matrix[Matrix.MTRANS_Y] + imageHeight_post);

                //Listener anstupsen.
                if (OnMeGustaViewChangedListener != null)
                    OnMeGustaViewChangedListener.onViewChanged();

                matrix_pixel_independent.getValues(getIc().matrix);
            }
            break;
        case MotionEvent.ACTION_MOVE:
            matrix_pixel_independent.set(savedMatrix);
            if (mode == DRAG) {
                //DRAGGING
                float eventX = event.getX() - Finger_startPosition.x;
                float eventY = event.getY() - Finger_startPosition.y;
                matrix_pixel_independent.postTranslate(eventX, eventY);

                //Position hat sich geändert -> Listener.
                posChanged = eventX != 0 || eventY != 0;
            } else if (mode == ZOOM) {
                //ZOOMING
                float newDist = spacing(event);
                if (newDist > 3f) {
                    float scale = newDist / Finger_oldDistance;
                    matrix_pixel_independent.postScale(scale, scale, Finger_Midpoint.x, Finger_Midpoint.y);

                    //Position hat sich geändert -> Listener.
                    posChanged = true;
                }
            }
            matrix_pixel_independent.getValues(getIc().matrix);
    }
    invalidate();
    return true;
}

/**
 * Spacing between Fingers on event.
 * 
 * @param event
 * @return
 */
private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/**
 * MidPoint between Fingers on event.
 * 
 * @param point
 * @param event
 */
private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

尝试解决几天，请帮助我！将非常感谢！

# gwt - 使用 UiBinder 迁移到 DataGrid

> ID：11460163
> 
> 赞同：0
> 
> 时间：2012-07-12T20:31:26.700
> 
> 标签：gwt, uibinder

在使用 UiBinder 绑定组件的项目中，已经有一个 Grid 以表格形式显示一些信息。我想将其迁移为使用 DataGrid，但我无法找到有关如何执行此操作的好的教程 - 少数几个谈论这个的网站假设它以编程方式完成，这不是我想要的。

*我现在*的实际问题是我什至无法让 DataGrid 显示 emptyTableWidget（一个带有“无数据”文本的简单 HTML 标签）。但是，我希望获得有关如何使用 DataGrid 的详细步骤的信息的答案或链接，包括：

*   UiBinder 模板中所需的更改
*   将自定义单元格（如复选框）转换为使用 Column 模型
*   将旧列“标题”添加到 DataGrid，以便可以修复它们（滚动时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:10:56.563

查看[Datagrid 展示示例](http://gwt.google.com/samples/Showcase/Showcase.html#!CwDataGrid)。
它包含一个`DataGrid`用 UiBinder 和自定义列定义的。

可能没有显示任何内容的原因`DataGrid`是您必须放入一个`LayoutPanel`或任何其他`Panel`实现该`ProvidesResize`接口的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:40:12.333

DataGrid 要求应用程序使用 RootLayoutPanel 而不是我忽略的 RootPanel。

我改用 CellTable，因为我们正在向 RootPanel 等添加多个小部件 - 基本上更新初始化和布局以移动到 RootLayoutPanel 不会是一项小任务，并且不能证明这样做只是为了避免滚动/分页通过单元格表 ;)

# java - MySQL的休眠生成索引和同名外键

> ID：11460165
> 
> 赞同：2
> 
> 时间：2012-07-12T20:31:40.580
> 
> 标签：java, mysql, hibernate

所以在我的一个由 Hibernate 管理的类中，我有以下属性定义：

```
@ManyToOne(optional = false)
private Company company; 
```

在为 MySQL 创建 db 模式时，Hibernate 会自动为此字段创建外键和索引：

```
KEY `FK334B8608339B7FC2` (`company_id`),
CONSTRAINT `FK334B8608339B7FC2` FOREIGN KEY (`company_id`) REFERENCES `companies` (`id`) 
```

如您所见，hibernate 对索引 (KEY) 和外键约束使用相同的名称。这似乎并没有打扰 MySQL，但是当我尝试使用其他工具（例如[mysqldiff](http://www.mysqldiff.org/%20%22mysqldiff%27)）时，它抱怨有重复的约束（因为 FK 和索引具有相同的名称）。

这是休眠的错误（它不应该生成两个具有相同名称的不同项目），还是工具有问题，他们错误地认为这些是重复的？

仅供参考：我正在使用 Hibernate 3.4.0.GA 和 MySQL 5.1.44

谢谢！

约翰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:07:25.617

根据我的经验，hibernate 通常会在 FK 字段上创建一个外键和索引，每个名称都不同。我不明白为什么休眠会奇怪地生成相同的名称。

您可以使用`@ForeignKey(name="")`,`@Index`或`@IndexColumn`来更改外键或索引名称。这样就避免了这个麻烦。

但是，它看起来有一个[错误](https://hibernate.onjira.com/browse/HHH-4245)`@OneToOne`

# html - 响应式字体大小/粗细

> ID：11460172
> 
> 赞同：4
> 
> 时间：2012-07-12T20:32:01.387
> 
> 标签：html, css

我可以使用百分比使我的图像/div 具有响应性。

如何使字体大小响应不同的屏幕尺寸？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T11:51:50.507

我最近偶然发现了这个问题，并为此编写了一个适合我需要的解决方案。也许你会发现你也可以将它合并到你的 CSS 中。

[github.com/wadim/responsive-font-size](http://github.com/wadim/responsive-font-size)

用法：

```
@import "responsive-font-size";

p {
    @include responsive-font-size (
        $min-font-size: 1.8em,
        $max-font-size: 3.7em,
        $min-screen-width: 640px,
        $max-screen-width: 1200px,
        $font-size-step: 0.3em /* optional parameter, default: 0.1em */
    );
} 
```

它基本上说：

*   对于小于 640 像素的屏幕宽度，我希望字体大小为 1.8em
*   对于大于 1200px 的屏幕宽度，我希望它是 3.7em
*   在两者之间适当缩放字体
*   不要费心将字体大小更改小于 0.3em

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T22:36:18.343

如果您希望在达到宽度里程碑（例如 768 像素、370 像素等）时更改它，请使用 CSS3 媒体查询。如果您希望它不断变化，那么您可以使用与图像/div 相同的百分比或 em 技术（即目标/上下文 = 结果），但我建议使用媒体查询。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-22T07:15:19.527

您可以为响应式字体使用 CSS3 `vh`、`vw`和新值。`vmin``vmax`

[![在此处输入图像描述](../Images/97d753d929aa563f088120de8b6db3a2.png)](https://i.stack.imgur.com/kDuYO.gif)

1vw = 视口宽度的 1%

1vh = 视口高度的 1%

1vmin = 1vw 或 1vh，以较小者为准

1vmax = 1vw 或 1vh，以较大者为准

```
h1 {
font-size: 5.9vw;
}
h2 {
font-size: 3.0vh;
}
p {
font-size: 2vmin;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:40:24.953

根据您必须支持的浏览器数组，CSS3 视口百分比长度可能是一个很好的解决方案：

[http://css-tricks.com/viewport-sized-typography/](http://css-tricks.com/viewport-sized-typography/)

[http://dev.w3.org/csswg/css-values/#viewport-relative-lengths](http://dev.w3.org/csswg/css-values/#viewport-relative-lengths)

我决定反对这种方法，因为它只支持 iOS6 而不是 Android，而且我的项目是平板电脑和智能手机移动网站。

# javascript - 悬停时jQuery无限/连续滚动

> ID：11460175
> 
> 赞同：0
> 
> 时间：2012-07-12T20:32:10.913
> 
> 标签：javascript, jquery, css, html

我似乎在使用一个悬停在边缘附近的滚动解决方案时遇到了一些问题，我已经实现了一个拖动滚动解决方案。

这是我的代码：

演示 1（当前页面）：http: [//jsfiddle.net/SO_AMK/FdLZJ/](http://jsfiddle.net/SO_AMK/FdLZJ/)

演示 2（我尝试过的）：http: [//jsfiddle.net/SO_AMK/8CCeA/](http://jsfiddle.net/SO_AMK/8CCeA/)

HTML 摘录：

```
<section class="row">
        <div class="scroll-left" style="opacity: 0;"></div>
        <div class="row-scroll">
            <div class="tile">
                <img class="tile-image" src="http://cache.gawker.com/assets/images/lifehacker/2011/08/1030-macpack-notational-velocity.jpg" />
                <title class="tile-title">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor...</title>
            </div>
            .....
            <div class="tile">
                <img class="tile-image" src="http://cache.gawker.com/assets/images/lifehacker/2011/08/1030-macpack-notational-velocity.jpg" />
                <title class="tile-title">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor...</title>
            </div>
        </div>
        <div class="scroll-right" style="opacity: 0;"></div>
    </section>
    <section class="row">
        <div class="scroll-left" style="opacity: 0;"></div>
        <div class="row-scroll">
            <div class="tile">
                <img class="tile-image" src="http://cache.gawker.com/assets/images/lifehacker/2011/08/1030-macpack-notational-velocity.jpg" />
                <title class="tile-title">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor...</title>
            </div>
            .....
            <div class="tile">
                <img class="tile-image" src="http://cache.gawker.com/assets/images/lifehacker/2011/08/1030-macpack-notational-velocity.jpg" />
                <title class="tile-title">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor...</title>
            </div>
        </div>
        <div class="scroll-right" style="opacity: 0;"></div>
    </section> 
```

jQuery：

```
 $(document).ready(function () {       
        var pos = 5;

        $.fn.loopingScroll = function (direction, scrollElement) {

            if (direction == "right") {
                pos+=5;
            }

            else if (direction == "left") {
                pos-=5;
            }
            $(scrollElement).parent().scrollLeft($(scrollElement).parent().data('scrollLeft') + pos);
            return this;
        }

        $(".scroll-left").hover(function(){
        scrollLeftLoop = setInterval(function(){ 
            $(this).loopingScroll("left", this); 
            }, 25);
            $(this).fadeIn('fast');
        }, function() { clearInterval(scrollLeftLoop); $(this).fadeOut('fast'); });

        $(".scroll-right").hover(function(){
           scrollRightLoop = setInterval(function(){ 
              $(this).loopingScroll("right", this); 
          }, 25);
            $(this).fadeIn('fast');
        }, function() { clearInterval(scrollRightLoop); $(this).fadeOut('fast'); });
}); 
```

它应该（去！）是一个 Pulse 替代品/WebApp，因此是设计（我正在研究字体）。

有任何想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:33:15.800

好的，经过一番头撞后，我想出了这个：

```
$(".scroll-left").hover(function() {
    $(this).parent().animate({scrollLeft: 0}, 7000);
    $(this).fadeIn('fast');
}, function() {
    $(this).parent().stop();
    $(this).fadeOut('fast');
});

$(".scroll-right").hover(function() {
    $(this).parent().animate({scrollLeft: $(this).siblings(".row-scroll").width()}, 7000);
    $(this).fadeIn('fast');
}, function() {
    $(this).parent().stop();
    $(this).fadeOut('fast');
}); 
```

它基本上使用该`scrollLeft`函数并即时计算滚动元素的宽度以用作滚动到值。[这](http://jsfiddle.net/FdLZJ/20/)是一个演示此代码的 JSFiddle。

我希望有人对此有用，我正在适当地重命名这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T09:51:39.360

我知道为时已晚，但如果其他人需要帮助，那么他们可以得到解决方案。试试这个动画循环

```
function loopl(){
    $('.mCSB_container').animate({ "left": "+=80px" }, "800", 'linear', loopl  );
}        
function loopr(){
    $('.mCSB_container').animate({ "left": "-=80px" }, "800", 'linear', loopr  );
}
function stop(){
    $('.mCSB_container').stop();
}
$( "#left" ).hover(loopl, stop);
$( "#right" ).hover(loopr, stop); 
```

# python - 关于建立跨平台网站抓取项目的建议

> ID：11460178
> 
> 赞同：1
> 
> 时间：2012-07-12T20:32:18.010
> 
> 标签：python, ide, cross-platform, pyqt, scrapy

寻找有关为抓取应用程序选择语言和 IDE 的建议。以下是我的要求：

1.  需要使用适合跨平台的语言（Win/OSX）
2.  需要使用对多个程序员具有良好源代码控制的 IDE
3.  想使用强大的库进行抓取
4.  想要为每个平台制作看起来原生的 GUI

在我最初的研究之后，这是我目前所拥有的：

1.  Python
2.  用于 GUI 的 pyQT
3.  不确定哪个 IDE 与源代码控制管理（Eclipse？）
4.  Scrapy.org 用于抓取
5.  可能是 Selenium WebDriver

我不确定 Scrapy 是否能满足我的需求，因为我需要能够在可能使用 javascript 的网站上提交表单......所以我认为 Selenium 可能能够处理这个问题。

我宁愿不使用 Objective C 或 C++。我倾向于 Python，因为它的快速发展似乎很好。

所以问题是，我是否走在正确的轨道上，或者我只是完全错过了一条完全不同的更好的途径，它会更简单或更适合在网站上抓取和提交表单？

# c# - 在 C# 程序中，我试图获取应用程序的 CPU 使用百分比，但它始终显示 100

> ID：11460184
> 
> 赞同：13
> 
> 时间：2012-07-12T20:32:53.977
> 
> 标签：c#, visual-studio-2010, performancecounter

这是我的代码。

```
 PerformanceCounter cpuCounter = new PerformanceCounter();
        cpuCounter.CategoryName = "Processor";
        cpuCounter.CounterName = "% Processor Time";
        cpuCounter.InstanceName = "_Total";

        // will always start at 0
        dynamic firstValue = cpuCounter.NextValue();
        System.Threading.Thread.Sleep(1000);

        dynamic secondValue = cpuCounter.NextValue();
        return secondValue; 
```

这里有很多人遇到返回零的问题，但是我一直得到 100，而且我确信我的软件不会占用那么多 CPU 功率。关于我可以做些什么来使其正常工作的任何想法。需要明确的是，我试图从运行此代码的应用程序中检索处理器使用情况，而不是单独的。我也在虚拟机上运行，​​但这似乎并不重要。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T22:18:21.157

它有助于了解 CPU 是如何工作的，以找出发生这种情况的原因。我将通过谈论只有一个核心的 CPU 来简化它，对于具有多个核心的 CPU，故事不会改变。

一个 CPU 内核在不处于睡眠模式时只能处于两种不同的状态。它要么正在执行代码，要么以执行指令的最快速度全速运行。或者它没有执行代码，因为不需要做任何事情。在这种情况下，它会被物理关闭。当它执行 HLT 指令时会发生这种情况。停下来，什么都不做，不消耗能量。

只有一种方法可以使处理器从 Halt 状态中恢复，即需要中断。那是芯片上的一个物理引脚，该引脚上的电压会使其恢复活力。该电压是由一个中断控制器产生的，另一个芯片接收来自机器各个部分的请求，以让 CPU 做一些有用的事情。

该中断的最重要来源是时钟。它以 0.0156 秒滴答作响，每秒使 CPU 恢复活力 64 次。这会激活操作系统中的一段代码，该代码基本上检查两件事。“我睡着的时候发生什么事了吗？” 并且“我根本没有睡着，是时候做一些其他也很重要的事情了”。或者换句话说，它不只是让 cpu 活跃起来，它还会打断它正在做的事情。因此信号的名称。

时钟不是唯一的中断源，CPU 上还有其他硬件。输入/输出设备。任何机器都有的重要部件是磁盘控制器、光驱控制器、网卡、鼠标和键盘。以及您在设备管理器小程序中看到的任何其他内容。它们是具有自己的小处理器的子系统，可以处理事情。并告诉主cpu他们已经完成了。因此，您机器上等待结果的任何线程都可以使用提供的数据继续执行。

大多数时候，你身边的那台个人电脑并没有做任何重要的事情。比如说，等待你阅读这个答案。由视频适配器和液晶显示器负责的东西，cpu 不必帮忙。您可以在 TaskMgr.exe 中看到它，cpu 利用率在 0 附近徘徊。您移动鼠标，单击滚动条以阅读此（长）答案，然后发生了一些事情。鼠标会产生一个中断，该中断会通过几层软件，最终告诉浏览器滚动视图。这需要大约几毫秒，给予或接受。

几毫秒的工作后，cpu 马上又睡着了。因此，当您通过性能计数器向 CPU 询问“您最近做了多少工作”时，它会说：“好吧，我花了几毫秒的时间来燃烧核心并竭尽全力更新您的屏幕。但是没有，其他比我睡在豌豆上”

所以重要的是你问的频率。样板方式是 Perfmon 使用的方式。它每秒问一次“你做了什么”。处理器会说：“好吧，在最后一秒，我执行了 20 毫秒的有用工作。其余时间我都死了，没有什么有用的事情可做”。所以任务管理器显示2%。

现在让我们按照你的方式去做吧。您要求 perf 计数器值，然后一纳秒后您再次要求它。处理器会说：“好吧，我返回了一个性能计数器值并试图回到睡眠状态。没有工作，程序一直在运行代码并问我同样的事情！”。

所以结果是准确的，处理器被你的请求占用了，你没有给它关机的机会。CPU 利用率为 100%。

解决方案：像 Perfmon 那样做。用计时器询问一次。让它更短，数字上升和下降更快。让它太短，它将是 100%

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:38:05.440

这是与您可能尝试做的类似的事情

```
PerformanceCounter cpuCounter;
PerformanceCounter ramCounter;

cpuCounter = new PerformanceCounter();

cpuCounter.CategoryName = "Processor";
cpuCounter.CounterName = "% Processor Time";
cpuCounter.InstanceName = "_Total";

ramCounter = new PerformanceCounter("Memory", "Available MBytes");

public string getCurrentCpuUsage(){
            return cpuCounter.NextValue()+"%";
}

public string getAvailableRAM(){
            return ramCounter.NextValue()+"MB";
} 
```

# delphi - 让 Woll2Woll 与 Delphi 7 dbExpress 一起工作的方法？

> ID：11460186
> 
> 赞同：2
> 
> 时间：2012-07-12T20:32:56.137
> 
> 标签：delphi, dbexpress, bde

我的理解是**Woll2Woll**中的 Delphi 组件直接继承自**BDE**，我们正试图摆脱它以增加**Windows 7**的兼容性和稳定性。但我们希望保留**TwwwDbGrid**数据感知组件。

我见过一种产品*(www.ethea.it)*，它声称使用模拟 BDE API 的工具使这变得“简单”。

我想知道是否有人对此或任何其他方法有任何经验或建议？我们不想重写所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:31:07.937

**谢谢大家！**我想我明白了！（直到我遇到下一个听力问题）

这是我所做的：

TSQLConnection——在设计时设置连接到数据库

TSQLquery -- 定义**SQL**并将**SQLConnection**设置为 TSQLConnection 组件

TDataSetProvider -- **DataSet**设置为 SQLQuery 组件

TClientDataSet -- **ProviderName**设置为 DataSetProvider 组件（这有点令人困惑，因为 Delphi 7 通常将*重要*的属性设置为*红色*，但这个特殊的*不是*，所以人们很容易认为它不重要）

TDataSource -- **DataSet**设置为 ClientDataSet 组件

然后，当然： TwwDBgrid -- **DataSource**设置为 DataSource 组件

（谁想出了这么多废话？我可以开枪打他吗？）

**无论如何**，我错过了重要的部分：当您准备好运行查询时，需要激活**三件事，而我只有***两个*.

TSQLConnection（当然，我有那个）

TSQLquery，将 active 设置为 true，或者调用 Open 方法（我从之前的经验中得到的）

TClientDataSet, 设置**Active**为true 最后一个，我不知道需要设置。我只是假设（是的，我知道，从不假设）它已经默认处于活动状态（为什么不应该这样？）

然后，当然，您必须在编译和运行之前取消激活所有内容，以便您可以在用户正确验证自己之后在运行时激活所有内容。

无论如何，***再次感谢***所有提供帮助的人！对此，我真的非常感激！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T02:35:56.097

我使用了 Woll2Woll InfoPower 组件，但我不知道它们中的任何一个对 BDE 有任何依赖关系。我相信你的理解是不正确的。由于您面前有源代码，因此您可以准确地告诉我继承自哪个 BDE-ONLY 组件（例如 TTable），因为我的理解是它很可能继承自 TCustomDBGrid 或直接继承自 TCustomControl 之类的基类, 两者都没有任何 BDE 依赖性。它适用于 BDE TTable 数据集或任何其他数据集。

我相信你很困惑。标准 Delphi 数据源和数据库感知控件适用于任何数据集组件。GUI 层（例如 DB 网格控件）和底层数据集类型之间没有依赖关系。任何数据集都与任何其他数据集一样。

TwwDBGrid 适用于任何数据集，包括 dbExpress。但是，我可能错了，因为您可能正在使用该组件的某个极其古老的版本，该版本以某种方式与 BDE 相关联，在这种不太可能的情况下，您可能需要一个新版本。但我对此表示怀疑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:44:16.820

我不清楚你在问什么。您是否要求迁移所需的 BDE 替代品？如果是这样，我会推荐 Sybase Advantage。他们关于从 BDE 移植的一篇很好的文章：[http](http://www.sybase.com/products/databasemanagement/advantagedatabaseserver/BDEtoADS) ://www.sybase.com/products/databasemanagement/advantagedatabaseserver/BDEtoADS 。

几年前，我们将一些 BDE 代码移植到它上面，并且对它与 BDE 的兼容性印象深刻。表格格式当然不同，但 Delphi 语法和组件（如 TTable）都是可用的。（有一些小的和记录的 SQL 语法差异......）

我相信它可以免费独立使用。

# sql - Oracle 日期时间比较基于格式

> ID：11460188
> 
> 赞同：4
> 
> 时间：2012-07-12T20:33:06.987
> 
> 标签：sql, oracle

在 Oracle 中，如果列类型为 datetime ，如何进行此日期比较？我想保留字符串格式 'MM/dd/yyyy' 。

这个怎么做 ？

谢谢

```
select * from my_tbl
where mycol >= '07/11/2012' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T20:37:49.363

假设该日期表示 7 月 11 日：

```
select * 
from my_tbl
where mycol >= to_date('07/11/2012', 'MM/DD/YYYY'); 
```

如果该日期应为 11 月 7 日：

```
select * 
from my_tbl
where mycol >= to_date('07/11/2012', 'DD/MM/YYYY'); 
```

根据您填写 mycol 值的方式，您可能还想去掉时间部分：

```
select * 
from my_tbl
where trunc(mycol) >= to_date('07/11/2012', 'DD/MM/YYYY'); 
```

# php - PHP Sql 查询到 MYSQL 数据库中的多个表 - 需要专业的接触

> ID：11460189
> 
> 赞同：1
> 
> 时间：2012-07-12T20:33:08.903
> 
> 标签：php, mysql, sql

以下脚本可以正常工作，但我不喜欢它，因为它不优雅而且很乱。

无需太高级（意味着我不想要 OOP 风格），我只想以程序方式最小化此代码。主要是我想结合 SQL 查询并清理混乱。

```
//get page url and query db to find the correct page
$this_page = $_GET['page'];
$this_page = escape_data($_GET['page']);

//Make sure page exists - if it doesn't redirect the browser
$SQL_page_exist = "SELECT * FROM pages_learn_more WHERE page_title = '$this_page'";
$SPE_result = mysql_query($SQL_page_exist);

while ($details = mysql_fetch_array($SPE_result))
{
$page_id          =     $details['id'];
$page_title       =     $details['page_title'];
$main_title       =     $details['main_title'];
$main_content     =     $details['main_content'];
$sub_title        =     $details['sub_title'];
$sub_content      =     $details['sub_content'];    
}

if(mysql_num_rows($SPE_result) == 0) 
{
echo '<META HTTP-EQUIV="Refresh" Content="0; URL=page_not_found.php">';

} else {

$SQL = 
    "SELECT   ptt.tool_tip_link
       FROM   pages_tool_tip ptt
       JOIN   pages_to_pages ptp
         ON   ptp.tool_tip_id = ptt.tool_tip_id
      WHERE   ptp.learn_more_id = '$page_id'";

  $result = mysql_query($SQL); // or die(mysql_error()); 

  //set array for reference_keys variable which may contain 0 to 20 keys
  $reference_keys = array();
  while ($db_field = mysql_fetch_array($result))
{   
 $reference_keys[] =     $db_field['tool_tip_link'];    
} 
```

好的，所以上面的代码可以正常工作，但它非常难看，过去 2 小时我一直在尝试将其改进为干净、简单和漂亮的东西，但可惜我的技能还没有，我得到的只是 mysql错误。

我最近的尝试是：

```
$SQL = 
"
     SELECT     *
       FROM     pages_learn_more plm

       JOIN     pages_tool_tip ptt, pages_to_pages ptp 
         ON     ptp.tool_tip_id = ptt.tool_tip_id
      WHERE     plm.page_title = '$this_page' AND ptp.learn_more_id = plm.id 
";

$result = mysql_query($SQL); // or die(mysql_error()); 

$reference_keys = array();
while ($details = mysql_fetch_array($result))
{   
        $reference_keys[] =     $details['tool_tip_link'];  
        $page_id          =     $details['id'];
        $page_title       =     $details['page_title'];
        $main_title       =     $details['main_title'];
        $main_content     =     $details['main_content'];
        $sub_title        =     $details['sub_title'];
        $sub_content      =     $details['sub_content'];    
} 
```

**这就像我第 30 次尝试清理此代码失败。有知识的人可以帮助我，如果可能的话，请解释你的意见......

谢谢 **

附带说明：我什至在 PHPmyAdmin 中尝试了许多查询，这告诉我您的 SELECT of FROM 语句中的表顺序会影响您的结果，例如`SELECT pages_learn_more plm, pages_tool_tip ptt`！= `SELECT pages_tool_tip ptt, pages_learn_more plm` 而且我不明白这些语句的顺序如何影响结果。（在完整查询中使用 1 会导致错误，而其他显示表）

如果有帮助，我的数据库方案的图片

![在此处输入图像描述](../Images/1fa817968011c0c09031eeef0f3f20a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:45:09.310

你有一个隐式（逗号分隔的表）和显式的奇怪组合`JOIN`，这会影响表出现的顺序。不鼓励使用隐式连接，所以只使用显式连接。

由于您没有使用所有列，因此不要使用`SELECT *`，尤其是因为某些表具有相同的列名 ( `tool_tip_id`)，这会导致歧义。相反，请更明确地说明您选择的内容。您甚至可以`plm.*`用该表中所需的确切列列表替换下面的内容。

```
$SQL = 
"
     SELECT
       plm.*,
       ptt.tool_tip_link
     FROM
         pages_learn_more plm
         LEFT JOIN pages_to_pages ptp ON plm.id = ptp.learn_more_id
         LEFT JOIN pages_tool_tip ptt ON ptp.tool_tip_id = ptt.tool_tip_id
      WHERE
         plm.page_title = '$this_page'
"; 
```

在您的 while 循环中，您访问的唯一列是 of`pages_learn_more`和一个 from `pages_tool_tip`，因此在`SELECT`列表中，我用于`plm.*`该表上的所有列，并且`ptt.tool_tip_link`仅来自另一个表。

由于您的主表似乎在`pages_learn_more`中可能有或没有关联记录，因此`pages_to_pages`我替换了 a `LEFT JOIN`，因此即使它没有关联的工具提示，查询仍然可以返回记录（带有 NULL 工具提示）。

从技术上讲，第二个`LEFT JOIN`可能只是一个，因为如果一个存在`INNER JOIN`必须有一个记录。`pages_tool_tip``pages_to_pages`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:58:43.537

1）这部分是可疑的。

```
while ($details = mysql_fetch_array($SPE_result))
{
    $page_id          =     $details['id'];
     ...
} 
```

你期待不止一个结果吗？如果是这样，为什么不修改查询以准确返回您需要的结果。您可以使用 LIMIT 1、ORDER BY {field} DESC、WHERE ... 等。如果您只期望一个结果，请使用 if 而不是 while。

2）这个条件应该在数据提取之前上移。

```
if(mysql_num_rows($SPE_result) == 0) 
{
echo '<META HTTP-EQUIV="Refresh" Content="0; URL=page_not_found.php">';

} else {
    ... move your mysql_fetch_array($SPE_result) here, and you don't need a conditional for it. 
```

3）“我得到的只是mysql错误”

你得到什么错误？

# jquery-mobile - 使用 window.location.hash 后未执行 Javascript

> ID：11460190
> 
> 赞同：0
> 
> 时间：2012-07-12T20:33:17.423
> 
> 标签：jquery-mobile

我需要将用户重定向到另一个页面，我使用了 window.location.hash = "../pagePath.html"; 但它会在不触发 JavaScript 代码的情况下重定向到页面，这是一些 jQuery Mobile 解决方案吗？我可以在 JS 代码中使用类似“ajax-false”的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:46:32.057

你需要使用

```
window.location.href="../pagePath.html"; 
```

然而

```
window.location.hash 
```

将从 url 返回锚值。例如：您的浏览器网址是 www.google.com/accounts#gmail 如果您像这样获得 window.location.hash

```
var anc=window.location.hash; 
```

然后将返回“gmail”。

# soapui - 如何提取 DB 值并将其与肥皂响应进行比较

> ID：11460191
> 
> 赞同：2
> 
> 时间：2012-07-12T20:33:23.573
> 
> 标签：soapui

我的功能是在我发送移动运营商时进行测试，它应该返回与该运营商相关的充值值列表。

1.  我可以使用 JDBC 请求检索数据库值
2.  我正在通过充值值列表获得成功响应。

在这里，我想测试响应实际上只包含来自数据库的值。如何测试这个？有什么想法..请告诉我。

谢谢钱德拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T08:12:03.897

您可以使用 groovy 脚本：

```
import com.eviware.soapui.support.GroovyUtils
import groovy.sql.Sql

//those are feched from testsuite properties
def dbUrl=context.expand('${#TestSuite#Url}')
def dbUser=context.expand( '${#TestSuite#User}' )
def dbPass=context.expand( '${#TestSuite#Pass}' )
def dbDriver=context.expand( '${#TestSuite#Driver}' )

def db = Sql.newInstance(dbUrl, dbUser, dbPass, dbDriver)

def dbValues = db.rows("SELECT A, B, C from TABLE ")
//is only one row?
assert dbValues.size == 1

def valueA = dbValues[0].A

//more asserts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T11:09:42.370

您可以创建一个 JDBC 步骤，然后单击其顶部的添加属性 (+)。然后在“名称”列下输入任何名称，然后单击“值”字段并使用“获取数据”右键单击选项从“响应”中检索数据。

现在通过提供配置详细信息和驱动程序、连接字符串详细信息和密码来连接到数据库。然后在 SQL Query 部分编写 DB Query，如下所示：

```
Select * From DBName
where DB Columnname =:Name given in the property added above 
```

例如：

```
Select * From Test_DB
where sequenceid =:Sequence_Response 
```

# python - Mac OSX 10.7.4 上的 pygame 错误

> ID：11460192
> 
> 赞同：1
> 
> 时间：2012-07-12T20:33:29.757
> 
> 标签：python, osx-lion, pygame

```
**pygame.image.load("ball.PNG") error: File is not a Windows BMP file** 
```

每次我尝试加载除`.BMP`. 我在互联网上搜索了解决方案，但没有任何效果。图书馆是它应该在的`SDL_image`地方，但 python 似乎忽略了它！

```
pygame.image.get_extended() // returns 0 
```

我正在跑步`python-2.7.3`......并且`pygame-1.9.2pre-py2.7-macosx10.7`

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:19:15.797

我终于让它工作了！如果您为 Python 2.7 安装 Pygame，对于 OS X 10.3 而不是苹果提供的更新版本：python-2.7.3...和 ​​pygame-1.9.2pre-py2.7-macosx10.7...一切工作完美！

为 OS X 10.3 安装 Python 2.7 的 Pygame：http: [//pygame.org/ftp/pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg](http://pygame.org/ftp/pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg)

# iphone - iPhone 4s 外观模拟器

> ID：11460193
> 
> 赞同：-5
> 
> 时间：2012-07-12T20:33:33.210
> 
> 标签：iphone, ios, ios4, ios-simulator

如何获得具有 iPhone 4 或 4s 设备形状的 iPhone 模拟器？

最新的 SDK 有一个带视网膜显示屏的 iPhone 模拟器，但是模拟器在垂直方向上比我的 mac pro 分辨率大，只是一个简单的窗口，模拟器周围没有 iPhone 4 或 4s 设备形状。我做错了什么吗？

基本上，我想为我正在制作的游戏预告片录制模拟。我在 YouTube 上看到了一些 iPhone 预告片，其中有一个模拟器，它具有新的 iPhone 4 或 4s 手机设计，而不是旧的 iPhone 3G/s 设计。我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:52:27.333

由于视网膜显示器的像素密度极高，因此创建具有完美像素视网膜图形的视频将需要您拥有一个非常大的显示器。这是因为显示器的像素密度远低于视网膜显示器。完成视频的最佳方式是使用非视网膜模拟器。

如果你真的需要完整的视网膜分辨率并有足够大的显示器来显示它，你可以通过使用第三方应用程序调用反射来获得带有漂亮 4s 覆盖的视网膜图形。你可以在这里查看：[http ://www.reflectionapp.com/](http://www.reflectionapp.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:55:02.337

打开模拟器。

在顶部选择“硬件/设备/iPhone”。不要选择“硬件/设备/iPhone (Retina)”。

结束。

# android - 在片段和自定义适配器中更新/刷新列表视图

> ID：11460194
> 
> 赞同：1
> 
> 时间：2012-07-12T20:33:35.363
> 
> 标签：android, eclipse, listview, refresh, fragment

`onActivityCreated()`当 Fragment 2 有代码加载数据、创建自定义数组适配器并将其设置在 ListView 上时，我需要从 Fragment 1 调用什么来强制更新/刷新 Fragment 2 ？

有没有办法更新/刷新 ListView 或者`Replace()`Fragment 的意图是强制它被重建并重新运行代码`onActivityCreated()`？

这是片段 2 onActivityCreated() 代码的片段：

```
 @Override
    public void onActivityCreated(Bundle savedInstanceState) 
    {
      super.onActivityCreated(savedInstanceState);

      // Get the prepared data and load it into this view
      ArrayList<ReportData> oReportResultsData = Report.LoadData(Home.ScheduleJSonData,         Home.SelectedDate);

      //Set the list into the gridview (Listview formatted with rows/columns)
      ScheduledActivityReportGridArrayAdapter myGridArrayAdapter = new         ScheduledActivityReportGridArrayAdapter(this.getActivity(), R.layout.homeschedulerow, oReportResultsData);
      lstReport.setAdapter(myGridArrayAdapter);
    } 
```

我确实尝试手动调用`notifyDataSetChanged()`Fragment Manager，希望能强制它重新加载/刷新 Fragment 2。我在这里重读了文档和许多很好的答案，但是我还没有看到`LoadData()`正在设置的自定义方法和自定义适配器`onActivityCreated()`.

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:04:29.987

您的片段应该通过 Activity 相互通信，请参阅[http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)。

您的第一个片段应该调用活动上的一个方法，该方法又会调用第二个片段上的另一个方法，然后重新加载您的数据。

# javascript - 使用 Javascript 生成的 XML 将现有 XML 保存/更新到服务器

> ID：11460196
> 
> 赞同：0
> 
> 时间：2012-07-12T20:33:53.270
> 
> 标签：javascript, jquery, xml, ajax

大家好，我正在尝试制作一个 CMS，您可以在其中使用很少的表单输入来添加和删除 XML 电子表格中的数据。现在这是问题所在。我必须用 Javascript 或 jQuery（+ 插件）来完成所有的事情。我将 XML 读入网页，当编辑内容并单击“保存”按钮时，javascript 将生成它自己的 XML，我的问题是尝试用我刚刚更新的文件覆盖或附加现有 XML 文件生成。

我不完全确定 javascript 是否可以做到这一点，因为它是客户端，但我必须使用 PHP 来做到这一点。我认为 AJAX 必须为此具有某种功能，但我找不到它。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:04:25.047

虽然我发现 javascript 非常适合阅读和编辑 XML，但我不得不使用 PHP 获取表单值并将其格式化为 XML，然后将其保存到服务器。

# javascript - Highcharts - 无法将样式应用于 x 轴标签

> ID：11460200
> 
> 赞同：2
> 
> 时间：2012-07-12T20:34:14.077
> 
> 标签：javascript, jquery, highcharts

我正在使用 Highcharts 并且在通过我的主题应用 x 轴标签样式时遇到问题......如果我在创建图表时应用它，它可以正常工作.. 但主题选项似乎只对 x 轴被忽略。相同的样式适用于 y 轴。

代码如下。谢谢！

**主题**

```
Highcharts.theme = {
    chart: {
        zoomType: 'x'
    },
    plotOptions: {
        column: {
            borderColor: null,
            borderWidth: 1,
            borderRadius: 3,
            shadow: true
        },
        line: {
            lineWidth: 3,
            shadow: false,
            marker: {
                radius: 10
            }
        }
    },
    xAxis: {
        gridLineColor: '#ebebeb',
        lineColor: '#ebebeb',
        minorGridLineColor: '#ebebeb',
        tickColor: '#ebebeb',
        plotLines: [{
            color: '#ebebeb'
        }],
        showLastLabel: true,
        labels: {
            style: {
                color: '#525151',
                font: '12px Helvetica',
                fontWeight: 'bold'
            },
            formatter: function () {
                return this.value;
            }
        },
        title: {
            text: "TEST"
        }
    },
    yAxis: {
        gridLineColor: '#ebebeb',
        lineColor: '#ebebeb',
        minorGridLineColor: '#ebebeb',
        tickColor: '#ebebeb',
        plotLines: [{
            color: '#ebebeb'
        }],
        labels: {
            style: {
                color: '#525151',
                font: '12px Helvetica',
                fontWeight: 'bold'
            },
            formatter: function () {
                return this.value;
            }
        },
        title: {
            text: null
        }
    }
};

// Apply the theme
var highchartsOptions = Highcharts.setOptions(Highcharts.theme); 
```

**我将其应用于的图表：**

```
chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'showChart'
        },
        colors: [{
            linearGradient: perShapeGradient,
            stops: [
                        [0, 'rgba(32, 106, 166, 0.3)'],
                        [1, 'rgba(32, 106, 166, 0)']
                        ]
        }, {
            linearGradient: perShapeGradient,
            stops: [
                        [0, 'rgba(120, 99, 181, 0.3)'],
                        [1, 'rgba(120, 99, 181, 0)']
                        ]
        },
                ],
        xAxis: [{
            type: 'datetime',
            labels: {
                formatter: function () {
                    var monthStr = Highcharts.dateFormat('%l:%M %P', this.value);
                    return monthStr;
                }
            }
        }],
        series: [{
            name: 'Public Views',
            type: 'area',
            marker: {
                symbol: 'url(/Assets/images/marker_blue.png)'
            },
            pointInterval: 3600000, // one hour
            pointStart: Date.UTC(2009, 9, 6, 0, 0, 0),
            data: [502, 435, 309, 247, 302, 434, 568, 702, 935, 809, 647, 502, 834, 526, 302, 335, 409, 647, 702, 634, 668, 902, 935, 1009]
        }, {
            name: 'Company Views',
            type: 'area',
            marker: {
                symbol: 'url(/Assets/images/marker_purple.png)'
            },
            pointInterval: 3600000, // one hour
            pointStart: Date.UTC(2009, 9, 6, 0, 0, 0),
            data: [406, 307, 211, 133, 221, 367, 366, 506, 707, 611, 333, 221, 567, 466, 106, 107, 281, 433, 221, 567, 466, 606, 607, 811]
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T14:55:57.243

```
yAxis: [{
        gridLineColor: '#ebebeb',
        lineColor: '#ebebeb',
        minorGridLineColor: '#ebebeb',
        tickColor: '#ebebeb',
        plotLines: [{
            color: '#ebebeb'
        }],
        labels: {
            style: {
                color: '#525151',
                font: '12px Helvetica',
                fontWeight: 'bold'
            },
            formatter: function () {
                return this.value;
            }
        },
        title: {
            text: null
        }
    }] 
```

请注意 yAxis 大括号周围的额外 []。x 不需要。因为 yAxis 可以有第二个 y 轴。

# java - 图片来自 url-我哪里出错了？

> ID：11460204
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:34:40.700
> 
> 标签：java, android, image, url, inputstream

## 这就是这段代码应该做的。

按下按钮时，它应该获取当前图像，并将其替换为字符串“finalurl”中的 url 中的图像

## 它能做什么

它获取当前图像并使其消失。它不会替换为任何其他图像。我已经坚持了几天，我很难过。任何帮助表示赞赏。

这是我使用的代码。

```
public void firstbutton(View view) 
    {
        Context context = view.getContext();
        Drawable image = ImageOperations(context, "@string/finalurl","image.jpg");
        ImageView icon = new ImageView(context);
        icon = (ImageView)findViewById(R.id.imageView);
        icon.setImageDrawable(image);

};

private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,IOException {
    URL url = new URL(address);
    Object content = url.getContent();
    return content; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:12:07.933

尝试这个。

```
Drawable drawable = LoadImageFromWebOperations(ImageLink);
        imageView.setImageDrawable(drawable);

  private Drawable LoadImageFromWebOperations(String url)
    {
          try{

        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
      }catch (Exception e) {
        System.out.println("Exc="+e);
        return null;
      }
    } 
```

# javascript - CodeIgniter 在 AJAX 调用中失去会话

> ID：11460209
> 
> 赞同：2
> 
> 时间：2012-07-12T20:35:06.223
> 
> 标签：javascript, jquery, ajax, codeigniter

我有一个简单的长轮询情况。

jQuery

```
function poll(){
    $.get(url,{},function(data){ poll(); });
} 
```

PHP *（为简洁起见删除了计时内容）*

```
function responds_to_poll()
{
    if( ! $this->current_user()->is_logged_in())
    {
        redirect('auth/login');
    }

    echo json_encode("Whats up?");
} 
```

我将观看 Firebug 5-10 分钟，它工作正常，但最终它会说`GET (302 Redirect)`并且响应将包含我`auth/login.php`文件中的 html。

会话是由本地`CI_Session`类驱动的数据库。它们在 2 小时后到期，而不是 5-10 分钟。我已经尝试了在其他问题中看到的一些东西，但到目前为止没有任何效果。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:14:17.633

这个hack为我解决了这个问题。`sess_update`它只是在请求来自 XHR 请求时取消调用。

在你的定义这个`system/application/config/constants.php`：

```
define('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'); 
```

然后，`system/application/libraries/My_Session.php`使用以下内容创建：

```
class MY_Session extends CI_Session {
    public function __construct($params = array())
    {
            parent::CI_Session($params);
    }

    public function sess_update()
    {
            if ( IS_AJAX )
            {
                    parent::sess_update();
            }
    }
} 
```

黑客基于[这个线程](http://codeigniter.com/forums/viewthread/172415/)。仅在 CI 1.7.2、YMMV 上测试。

问题是我很快就被解雇了 ajax 请求。周期性地，`sess_update`在其中一个上触发 a。而且，有时，会同时出现第二个 ajax 请求。该请求将提供最近过期的会话密钥，并且代码点火器将删除该会话。

此修复仅允许对非 ajax 请求进行会话更新。这是一个kluge，但它的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:56:29.207

更改`sess_expire_on_close`会话配置文件。不太清楚为什么它会有所帮助......可能是 CI 中的一个错误。

# mongodb - MongoDB：在集合中的日期范围之间查找唯一文档

> ID：11460212
> 
> 赞同：4
> 
> 时间：2012-07-12T20:35:21.930
> 
> 标签：mongodb

我不确定如何执行此任务

这是文档结构

```
name:
date_created:
val: 
```

我需要找出之间创建的唯一文档`January 2011 and October 2011`

我知道我可以找出两个日期范围之间的文档数量

```
db.collection.find({'date_created': {'$gte': '2011-01-01', '$lt': '2011-10-30'}}); 
```

我可以知道不同的是

```
db.runCommand({'distinct': 'collection', 'key': 'name'}) 
```

**问题**

问题是我需要删除集合中的重复文档。

我该如何回答这个问题？

```
find out unique documents created between January 2011 and October 2011 where uniqueness is based on 'name' key 
```

**更新**

@Sergio ansewer 是完美的，运行查询后，我得到以下结果，可以看出`output number < input number`这意味着重复项已被删除

```
{
    "result" : "temp_collection",
    "timeMillis" : 1509717,
    "counts" : {
        "input" : 592364,
        "emit" : 592364,
        "output" : 380827
    },
    "ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T20:46:17.847

似乎可以通过map-reduce解决。这样的事情应该会有所帮助。

```
var map = function() {
  emit(this.name, this);
}

var reduce = function(key, vals) {
  // vals contains all documents for this key (name). Just pick one.
  return vals[0];
}

db.runCommand({
  mapreduce: 'collection',
  map: map,
  reduce: reduce,
  query: {'date_created': {'$gte': '2011-01-01', '$lt': '2011-10-30'}},
  out: 'temp_collection'
}); 
```

此命令返回后，您应该在`temp_collection`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:12:16.417

由于在 MongoDB 2.1 中添加了[聚合框架，您还可以执行以下操作：](http://docs.mongodb.org/manual/applications/aggregation/)

```
db.collection.aggregate([ 
    {$match: {'date_created': {'$gte': '2011-01-01', '$lt': '2011-10-30'}}}, 
    {$sort: {name: 1}}, 
    {$group: {
        _id: '$name', 
        val: {$first: '$val'}
    }}
]) 
```

# c# - EF4 - 加载分离对象的相关实体

> ID：11460215
> 
> 赞同：1
> 
> 时间：2012-07-12T20:35:30.370
> 
> 标签：c#, .net, entity-framework

我有一个 ASP MVC 3 应用程序，它使用 Entity Framework 4 来访问 SQL Server 数据库中的数据。

我有一个场景，我使用 EF4 从数据库加载实体。然后我可以正常加载相关实体。第一次加载后，我缓存了实体。这需要它被序列化。在下一个请求中，我加载了相同的实体，但这次是从缓存中加载的。这会导致对象与上下文分离，因为它不是源自那里。然后我无法正常加载相关实体。

很明显，这样做的原因是对象与上下文分离，因此没有被跟踪。我知道，当上下文跟踪对象时，它会跟踪更改并在需要时通过执行实际的 SQL 语句应用它们。但我不确定的是附加状态是否与加载相关实体的能力有关。

好的，这里有一些细节。这是模型结构。请注意，这是简化的，不包括使 EF4 能够使用它所需的一切。这简单地展示了结构。

```
public class Segment
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public SegmentGroup Group { get; set; }
}
public class SegmentGroup 
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public IEnumerable<Segment> Segments { get; set; }
} 
```

然后我可以从数据库或缓存中获取一个段。这是在 Manager 类中完成的。再次非常简化。

```
public SegmentManager
{
    public Segment GetSegment(Guid id)
    {
        string cacheKey = ... //generate specific cache key using Guid id
        Segment segment = CacheProvider.Get<Segment>(cacheKey);
        if(segment == null) //does not exist in cache yet - load from db and insert into cache
        {
            segment = repo.Find<Segment>(id); //roughly translates to:
                                              //segment = dbcontext.Segments.SingleOrDefault(a => a.Id == id);
            CacheProvider.Add(cacheKey, segment);
        }
        else //segment was found in cache - attach to context
        {
            repo.Attach<Segment>(segment); //dbcontext.Segments.Attach(segment);
        }
        return segment;
    }  
} 
```

因此，这有效地使我能够像这样使用这个段管理器：

```
public ActionResult SegmentGroupName(Guid segmentId)
{
    Segment segment = SegmentManager.GetSegment(segmentId); //Loaded from DB of Cache
    return segment.Group.Name; //Group is accesable when segment is loaded from DB, but not from cache
} 
```

所以问题是当从数据库加载段时，我可以访问段上的段组，但从缓存加载时不能。

所以我的问题是，在从缓存加载段后，我可以对段做些什么以使我能够访问相关实体。我需要一个通用的解决方案，我可以以相同的模式将其应用于我的所有模型管理器，因为一切都是高度抽象的。我试图避免急切加载所有相关实体或事后手动加载它们，因为这实际上比不缓存更昂贵。我只想让事情回到缓存之前的状态。:)

请注意，代码演示非常简化，您需要做出一些现实的假设。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:16:53.063

听起来像是我遇到的东西，我称之为薛定谔的代码......我遇到了一个类似的问题，我将模型传递给我的视图，但是在尝试访问相关实体时，我收到了引用对象上下文的错误被关闭。通过在将主实体传递给我的视图之前观察相关实体，我能够在不重新打开对象上下文的情况下解决此问题。

例如，如果我正在处理您的细分和组，它将是以下内容

```
Segment segment = repo.Find<Segment>(segmentId);
var segmentGroup = segment.Group; 
```

在此之后我不会对segmentGroup 做任何事情，只是因为我观察到了它，它现在就存在了。如果没有事先观察，系统不确定如何处理此问题，因为尚未对数据库进行额外调用，但由于在本例中已观察到，因此 Group 对象的数据已与 Segment 对象相关联。

奇怪，我知道......它存在，但它不存在......我们知道它在那里，但我们必须看到它来证明它......因此我将这种情况称为薛定谔密码......

# html - 一条直线穿过网页中的一行文本

> ID：11460223
> 
> 赞同：-2
> 
> 时间：2012-07-12T20:35:56.353
> 
> 标签：html, webpage

在 html`<del> and </del>`中，用于显示“~~和~~"，一条穿过一行文本的直线。

在[这个论坛](http://area51.phpbb.com/phpBB/index.php)，发新帖的时候，怎样才能达到同样的效果呢？

网站还是html吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:40:45.767

尽管由于防火墙限制我无法访问该特定站点，但我知道它实现了 BBCode。BBCode 支持删除线标签`[s]text[/s]`，虽然我不知道这个特定网站是否支持这个标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:38:55.300

阅读常见问题解答

[http://area51.phpbb.com/phpBB/faq.php?sid=3a030cf950feb29e7cdee95345feda08#f3r1](http://area51.phpbb.com/phpBB/faq.php?sid=3a030cf950feb29e7cdee95345feda08#f3r1)

我可以使用 HTML 吗？不可以。不能在此板上发布 HTML 并将其呈现为 HTML。大多数可以使用 HTML 执行的格式都可以使用 BBCode 来应用。

在更改字体（如粗体或下划线）时，您必须遵循 BBCode 指南，并且**在您添加的帖子中描述了这样做的方法**。Stackoverflow 做同样的事情

[http://area51.phpbb.com/phpBB/faq.php?sid=3a030cf950feb29e7cdee95345feda08#f3r0](http://area51.phpbb.com/phpBB/faq.php?sid=3a030cf950feb29e7cdee95345feda08#f3r0)

什么是BB码？BBCode 是 HTML 的一种特殊实现，可对帖子中的特定对象提供出色的格式控制。BBCode 的使用由管理员授予，但也可以从发布表单中针对每个帖子禁用它。BBCode 本身在风格上与 HTML 相似，但标签用方括号 [ 和 ] 括起来，而不是 < 和 >。有关 BBCode 的更多信息，请参阅可从发布页面访问的指南。

堆栈溢出示例：

如果在句子前添加 4 个空格，它看起来像这样：

```
this code is now in a gray box 
```

# jquery - jQuery selecting option is not populating other dynamic select

> ID：11460224
> 
> 赞同：1
> 
> 时间：2012-07-12T20:35:59.420
> 
> 标签：jquery, select

I'm using this

```
$(document).ready(function(){
window.setTimeout(function() {
myVal = "USA";
$("#country").val(myVal);
}, 1000);
}); 
```

to auto-select a choice from the select list.

For the select list it loads in the list of states when you select a country:

```
 <li>
    <label for="country">Country</label>
    <select onchange="print_state('state',this.selectedIndex);" id="country" name = "country"></select>
    </li>
    <li>
    <label for="state">State</label>
    <select name="state" id="state"  class="validate[required]"></select>

    <script language="javascript">print_country("country");</script>
    </li> 
```

So it is selecting USA after a second but it's like it's not actually "clicking" it to make the states appear as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:43:39.547

Try changing the line to:

```
$("#country").val(myVal).trigger('change'); 
```

# javascript - 根据其值jQuery / Javascript选择单选按钮

> ID：11460227
> 
> 赞同：0
> 
> 时间：2012-07-12T20:36:22.187
> 
> 标签：javascript, jquery

我试图实现的目标可能非常简单，但我卡住了。我厌倦了通过在页面加载时从对象中检索其值来动态选择几个径向按钮。这是我正在尝试的：

```
var t_info = obj.tinfo;
var h_info = obj.hinfo;

$('input[value='+ t_info +']').attr('checked', 'checked');
$('input[value='+ t_info +']').change();
$('input[value='+ h_info +']').attr('checked', 'checked');
$('input[value='+ h_info +']').change(); 
```

在页面加载时没有选择任何单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:46:25.490

也许你可以有一个 id-value 对的映射。（最好是 JSON）

```
[{ id : '#radio1', value : true },
 { id : '#radio2', value : false }] 
```

这样，您就可以遍历它们并执行

```
$.each(valueMap, function(i, item){
    $(item.id).prop('checked', item.value)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:18:23.473

如果您使用的是 jquery 1.6+，则应该使用[prop](http://api.jquery.com/prop/)。

> 属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。.val() 方法应该用于获取和设置值。

您还可以通过像这样链接来删除 2 行代码。

```
$('input[value='+ t_info +']').prop('checked', true).change();
$('input[value='+ h_info +']').prop('checked', true).change(); 
```

还要确保将代码放在文档就绪函数中，以便在尝试查找元素之前等待 dom 实际加载

```
$(document).ready(function(){

}); 
```

或者

```
$(function(){

}); 
```

# grails - Grails 下载 zip 文件（浏览器下载文件）

> ID：11460228
> 
> 赞同：1
> 
> 时间：2012-07-12T20:36:27.547
> 
> 标签：grails, download

我知道已经有几个关于这个的问题，但这些解决方案都没有奏效。

我试图单击一个 div，然后 jQuery`get`向我的控制器发出请求，最后下载静态文件 (Zip)。使用 chrome 开发工具，我看到请求以有效 200 的形式返回。请求的响应似乎是 chrome 的尝试渲染，但我可以找出 zip 文件中包含的文件的名称，所以我可以说它发现一切都是正确的。

响应头是：

```
Content-Type:application/zip
Content-disposition:attachment;filename=myFile.zip
Date:Thu, 12 Jul 2012 20:18:05 GMT
Server:Apache-Coyote/1.1
Transfer-Encoding:chunked 
```

我的控制器逻辑：

```
 def root = request.getSession().getServletContext().getRealPath("/")

    def file = new File("C:\path\to\my\file")   

    if (file.exists()) { 
        def os = response.outputStream                
        response.setHeader("Content-Type", "application/zip") 
        response.setHeader("Content-disposition", "attachment;filename=${file.name}")

        def bytes = file.text.bytes 
        for(b in bytes) { 
           os.write(b) 
        } 

        os.flush()
                           org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes().renderView = false 
     } 
```

我不确定为什么我的浏览器实际上没有下载该文件。我尝试了很多不同的控制器逻辑变体，但结果都一样。

我尝试过的一些事情：

*   内容类型为 'application/octect-stream;'
*   `response.outputStream << file.bytes`
*   `response.outputStream << file.newInputStream()`
*   我添加了内容长度
*   在流写入后移动内容类型

我正在使用 Grails 2.0.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:47:21.127

Gregg 的评论是正确的，但有一些解决方法，这就是我的工作方式：

获取[jQuery AJAX 文件下载插件](http://www.filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/) （希望您使用的是 jquery ;)）

我已经看到了[替代方案](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)，但没有尝试过

这基于动态构建表单并将其发布到控制器来执行 HTTP 请求（不是 Ajax），同时仍为您提供所需的 AJAX 体验。如果这看起来有点笨拙，它是，但它是我发现这个工作的唯一方法。上面的 URL 对潜在问题进行了讨论。在 jQuery 中调用插件，如：

```
$("#myDiv").click(function () {
   $.download('${createLink(controller: 'download', action: 'zipFile')}', 'fileName=' + $("#myTextBox").val()); 
}); 
```

您的控制器看起来很接近，使用您已经尝试过的应该可以工作：

```
response.setHeader("Content-Type", "application/zip") 
response.setHeader("Content-disposition", "attachment;filename=${file.name}")
response.outputStream << file.newInputStream() 
```

我已经使用了一段时间了，没有任何问题（还）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T07:07:37.213

在标头中设置内容处置时，值得牢记以下几点，因为 Chrome 对格式非常严格，如果您弄错了，您可能会收到“重复标头”错误： http: [//www.intelligrape.com/博客/2012/04/11/duplicate-headers-received-from-server-fix-for-chrome/](http://www.intelligrape.com/blog/2012/04/11/duplicate-headers-received-from-server-fix-for-chrome/)

# jquery - 用于在不打开新页面的情况下更新数据的 Jquery 和 Ajax 脚本

> ID：11460231
> 
> 赞同：0
> 
> 时间：2012-07-12T20:36:41.250
> 
> 标签：jquery, ajax

当我更新电子邮件并按 Enter 时，更新页面正在打开，是否有任何 jquery 或 ajax 脚本用于在我们打开时向 update.php 提交详细信息

```
<form id="myForm" action="update.php" onsubmit="return validateForm();"method="post">
<input type="hidden" name="action" value="update" />
<input type="text" name="email" id="email" value="Enter your email here"    />
<br><center><input class="button" type="image" src="rss.png" /></center>
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:41:55.890

检查这个 jQuery 插件：

[jQuery 表单插件](http://malsup.com/jquery/form/)：它允许您轻松且不显眼地升级 HTML 表单以使用 AJAX。

例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script> 

<script> 
    $(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('#myForm').ajaxForm(function() { 
            alert("Thank you for your comment!"); 
        }); 
    }); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:41:27.333

不确定您是否在询问如何执行 ajax 请求，但是如果您为表单连接提交事件并在传递给您正在使用的处理程序的事件上调用 preventDefault() ，它将阻止浏览器导航到操作网址：

```
$('#myForm').bind('submit', function (e) {
  e.preventDefault();
  // do your ajax
}); 
```

如果您询问如何构建 ajax 调用，您需要澄清这一点。

# excel - 我收到编译错误：- Excel 中未定义子或函数！请注意，工具选项卡中的引用未激活

> ID：11460239
> 
> 赞同：1
> 
> 时间：2012-07-12T20:37:08.873
> 
> 标签：excel

```
Private Sub CommandButton1_Click() 
    send email 
End Sub

Public Function sendmail() 
     On Error GoTo ende 

     esubject = "Systematic and Manually Created ASN" 
     sendto = "oo@hp.com" ccto = "rt@hp.com" 
     ebody = "Hello All" & vbCrLf & _
     "Please find the Systematically and Manually created ASN for the last month" & _
      vbCrLf & "With Regards" & vbCrLf & "Tarak" 

     newfilename = "C:\Stuff.XLS"

     Set apps = CreateObject("Outlook.Application") 
     Set itm = app.createitem(0)

     With itm 
         .Subject = esubject 
         .to = sendto 
         .cc = ccto 
         .body = ebody 
         .attachments.Add (newfilename) 
         .display 
         .Send 
     End With

     Set app = Nothing 
     Set itm = Nothing

ende: 

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:55:47.983

编辑：

糟糕，我误读了您的子名称。

您应该将其添加到模块的顶部，以在将来帮助自己。

```
Option Explicit 
```

这个更新的建议实际上运行。

您的代码： Private Sub CommandButton1_Click() 发送电子邮件 End Sub

应该读：

```
Private Sub CommandButton1_Click()
    sendmail 
End Sub 
```

请注意从发送电子邮件到发送邮件的变化。

此外：

```
Set apps = CreateObject("Outlook.Application") 
Set itm = app.createitem(0) 
```

应该读

```
Set apps = CreateObject("Outlook.Application") 
Set itm = apps.createitem(0) 
```

注意缺少的 s。如果没有那个 s，代码会在使用 itm 之后立即出错。

编辑2：

也许更容易告诉你我的意思。当您使用选项显式时，您必须显式声明您的变量。优点是您将无法使用尚未声明的变量，这将使您无法使用应用程序，例如，当您指的是应用程序时。

这是您的脚本的更正版本：

```
Option Explicit
Private Sub CommandButton1_Click()
        sendmail
End Sub

Public Function sendmail()
     On Error GoTo ende
    Dim esubject As String, sendto As String, ccto As String, ebody As String, newfilename As String
    Dim apps As Object, itm As Object

     esubject = "Systematic and Manually Created ASN"
     sendto = "oo@hp.com"
     ccto = "rt@hp.com"
     ebody = "Hello All" & vbCrLf & _
     "Please find the Systematically and Manually created ASN for the last month" & _
      vbCrLf & "With Regards" & vbCrLf & "Tarak"

     newfilename = "C:\Stuff.XLS"

     Set apps = CreateObject("Outlook.Application")
     Set itm = apps.createitem(0)

     With itm
         .Subject = esubject
         .To = sendto
         .cc = ccto
         .body = ebody
         .attachments.Add (newfilename)
         .display
         .Send
     End With

     Set apps = Nothing
     Set itm = Nothing

ende:

End Function 
```

# objective-c - ObjC，核心数据：“不允许重复”？

> ID：11460247
> 
> 赞同：5
> 
> 时间：2012-07-12T20:37:33.180
> 
> 标签：objective-c, core-data

我对核心数据很陌生。我的理解是它是一个对象图管理器，与数据库不同。其中，一些功能将由程序员实现。

在编写一些在 coredata 框架中具有更好和更优化对应物的逻辑之前：是否可以添加唯一键？像`entityA.name=@"jem"`, `entityB.name=@"jem"`, 由于名称已在使用中而无法插入 entityB？

谢谢 :-) 杰姆。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T20:57:12.343

[Apple 核心数据文档](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

Core Data 在很大程度上是一个数据库，用于设置实体和属性的 GUI 只是其中的一部分。我不相信已经有拒绝非唯一键的功能，但是您可以在插入新实体之前执行以下操作来运行检查：

```
NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Person" inManagedObjectContext:managedObjectContext];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
BOOL unique = YES;
NSError  *error;
NSArray *items = [managedObjectContext executeFetchRequest:request error:&error];
if(items.count > 0){
    for(Person *thisPerson in items){
        if([thisItem.name isEqualToString: nameToEnter]){
             unique = NO;
        }
    }
}
if(unique){
     CartItem *thisItem = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];

     thisItem.name = nameToEnter;
     NSError *error;
     if (![self.managedObjectContext save:&error]) {
           return;
     }
} 
```

你应该很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T13:16:34.137

与上述类似，但在对象代码中作为一种验证方法。因此，我们将其与主代码隔离开来：

```
-(BOOL)validateForInsert:(NSError **)error {
  if (![super validateForInsert:error]) {
    NSLog(@"Validate for insert FALSE: %@", *error);
    return NO;
  }

  return [self validateConsistency:error];
}

-(BOOL)validateForUpdate:(NSError **)error {
  if (![super validateForUpdate:error]) {
    NSLog(@"Validate for update FALSE: %@", *error);
    return NO;
  }

  return [self validateConsistency:error];
}

-(BOOL)validateConsistency:(NSError **)error {

  // Count number of names
  NSArray *accounts = [Account whereFormat:@"name == '%@'", self.name];
  if ([accounts count] > 1) {
    // Error! 
```

注意：我使用了 ObjectiveRecord，但我相信你知道如何计算你的记录。

# javascript - AJAX/JS：是否可以在没有提交按钮和刷新页面的情况下获取输入文本的值

> ID：11460250
> 
> 赞同：2
> 
> 时间：2012-07-12T20:37:55.463
> 
> 标签：javascript, jquery, ajax

我已经搜索了无数的网站，但还没有找到一个明确的答案。也许这是不可能的。但是我正在使用一个输入框，一旦用户停止输入，它就会回显它的值。我没有相关代码，因为我想知道这是否可能？

在此示例中，我可以通过按钮提交并获取值而无需刷新。 [JSfiddle](http://jsfiddle.net/MswhY/3/)

但我希望能够不使用该按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:49:19.463

[使用脚本、onkeyup 和 timer 是可能的](http://jsfiddle.net/MswhY/4/)。

基本上你所做的是当用户开始输入时，你启动一个提交功能的计时器。每次用户在输入集中时按下一个键，您都会通过清除它并再次创建它来“推迟”计时器。一旦用户停止输入，计时器将不会被清除并且函数将运行。

```
var timer;

$('#yourName').on('keyup', function() {
    var value = this.value;

    clearTimeout(timer);

    timer = setTimeout(function() {

        //do your submit here
        alert('submitted:' + value);

    }, 2000); //delay after a keypress
});​ 
```

# wcf - 带有 x509 加密的 WCF Net.TCP 非常慢

> ID：11460251
> 
> 赞同：2
> 
> 时间：2012-07-12T20:37:59.357
> 
> 标签：wcf, performance, wcf-security, digital-certificate

我正在使用 WCF 开发客户端-服务器应用程序。WCF 服务使用数字证书进行保护。我正在使用消息安全性，因为我要求客户端在对服务器的任何调用中提供会员用户名/密码。该服务器由 Windows 服务托管。我已经在生产服务器上安装了证书服务并使用它来创建服务器身份验证数字证书。

服务器的数字证书使用 sha1 作为具有 1024 位公钥的散列算法。

客户端 WCF 代理由 Visual Studio 生成（通过添加服务引用）。在我的客户端中，我使用的是 WCF 代理的单例实例。

*问题是当 WCF 的安全模式设置为"Message"*或*"TransportWithMessage"*时，应用程序在我的生产服务器（专用云服务器和我的本地计算机充当客户端）上的性能很糟糕。

当服务器和客户端在同一台机器上时，应用程序在我的本地机器和生产服务器上运行得非常快。这排除了与 SQL 查询相关的任何性能问题。

比较具有和不具有安全性的性能。我使用了以下操作：

操作：

1.  **检查登录凭据**：调用的测试函数，如果返回安全异常，则凭据不正确。
2.  **Get List**：一个返回 11 个（EF DbContext）实体列表的函数。
3.  **按 ID 获取记录**：返回加载了一些“单一多重性”导航属性的单个实体。

我使用 WireShark 记录对这些操作的服务调用数据的持续时间和大小。我已经重复测试了 wsHttpBinding 的安全性、netTcpBinding 的安全性和 netTcpBinding 的安全性，结果如下：

![结果表](../Images/a3af6d00312beeb3f61afc6381b8c27d.png)

当客户端和服务器在同一台机器上时，任何操作的持续时间总是小于一秒。

这是 WCF 服务器的配置文件：您会注意到我有两个绑定和两个行为，一个用于安全通信，另一个用于不安全通信。

```
<?xml version="1.0"?>
<configuration>
    <connectionStrings>
        <add name="HS" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=HS;Integrated Security=True" providerName="System.Data.SqlClient"/>
        <add name="HSContext" connectionString="metadata=res://HS.Model/Model.csdl|res://HS.Model/Model.ssdl|res://HS.Model/Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLEXPRESS;initial catalog=HS;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    </connectionStrings>
    <system.web>
        <compilation debug="true" targetFramework="4.2"/>
        <authentication mode="Forms">
            <forms name=".HSYAUTH" loginUrl="~/Account/LogOn" cookieless="UseCookies" protection="All" slidingExpiration="true" timeout="2880"/>
        </authentication>
        <machineKey validationKey="..." decryptionKey="..." validation="HMACSHA256" decryption="AES"/>
        <membership defaultProvider="SqlMembershipProvider" userIsOnlineTimeWindow="15" hashAlgorithmType="SHA256">
            <providers>
                <clear/>
                <add applicationName="HS" name="SqlMembershipProvider" connectionStringName="HS" passwordFormat="Hashed" minRequiredNonalphanumericCharacters="0" minRequiredPasswordLength="6" maxInvalidPasswordAttempts="5" enablePasswordReset="true" enablePasswordRetrieval="false" passwordAttemptWindow="10" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" type="System.Web.Security.SqlMembershipProvider"/>
            </providers>
        </membership>
        <profile>
            <providers>
                <clear/>
                <add name="SqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="HS" applicationName="HS"/>
            </providers>
            <properties>
                <add name="WebSettingsTestText" type="string" readOnly="false" defaultValue="DefaultText" serializeAs="String" allowAnonymous="false"/>
            </properties>
        </profile>
        <roleManager enabled="true" defaultProvider="SqlRoleProvider">
            <providers>
                <clear/>
                <add connectionStringName="HS" applicationName="HS" name="SqlRoleProvider" type="System.Web.Security.SqlRoleProvider"/>
                <add applicationName="HS" name="WindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider"/>
            </providers>
        </roleManager>
    </system.web>
    <system.serviceModel>
        <services>
            <service name="HS.Services.HS" behaviorConfiguration="SecureServiceBehavior">
                <host>
                    <baseAddresses>
                        <add baseAddress="net.tcp://0:808/Services/HS.svc"/>
                    </baseAddresses>
                </host>
                <endpoint address="" binding="netTcpBinding" contract="HS.Services.IHS" bindingConfiguration="SecureBinding">
                    <identity>
                        <dns value="{my server ip address}"/>
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="SecureServiceBehavior">
                    <serviceMetadata/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                    <serviceCredentials>
                        <serviceCertificate findValue="CN={my server ip address}" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectDistinguishedName"/>
                        <clientCertificate>
                            <authentication revocationMode="NoCheck"/>
                        </clientCertificate>
                        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider" membershipProviderName="SqlMembershipProvider"/>
                    </serviceCredentials>
                    <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="SqlRoleProvider"/>
                    <serviceThrottling maxConcurrentCalls="128" maxConcurrentSessions="128" maxConcurrentInstances="128"/>
                </behavior>
                <behavior name="InsecureServiceBehavior">
                    <serviceMetadata/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                    <serviceCredentials>
                        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider" membershipProviderName="SqlMembershipProvider"/>
                    </serviceCredentials>
                    <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="SqlRoleProvider"/>
                    <serviceThrottling maxConcurrentCalls="128" maxConcurrentSessions="128" maxConcurrentInstances="128"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
            <netTcpBinding>
                <binding name="SecureBinding" receiveTimeout="00:10:00" sendTimeout="00:10:00" closeTimeout="00:10:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="20000000" portSharingEnabled="false">
                    <security mode="Message">
                        <message clientCredentialType="UserName"/>
                    </security>
                    <readerQuotas maxDepth="32" maxArrayLength="200000000" maxStringContentLength="200000000"/>
                </binding>
                <binding name="NoSecureBinding" receiveTimeout="00:10:00" sendTimeout="00:10:00" closeTimeout="00:10:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="20000000" portSharingEnabled="true">
                    <security mode="None">
                    </security>
                    <readerQuotas maxDepth="32" maxArrayLength="200000000" maxStringContentLength="200000000"/>
                </binding>
            </netTcpBinding>
        </bindings>
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    </system.serviceModel>
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
    </startup>
</configuration> 
```

这是 WCF 客户端的配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_IHS" receiveTimeout="00:10:00" sendTimeout="00:10:00" closeTimeout="00:10:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="20000000" portSharingEnabled="false">
                    <security mode="Message">
                        <message clientCredentialType="UserName" />
                    </security>
                </binding>
                <binding name="NetTcpBinding_IHS_Insecure" receiveTimeout="00:10:00" sendTimeout="00:10:00" closeTimeout="00:10:00" maxReceivedMessageSize="2147483647" maxBufferPoolSize="20000000">
                    <security mode="None">
                    </security>
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://{my server ip address}:808/Services/HS.svc" binding="netTcpBinding"
                bindingConfiguration="NetTcpBinding_IHS" contract="ServiceReference.IHS"
                name="NetTcpBinding_IHS">
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

一周以来，我一直在努力解决这个问题，但没有任何显着进展。具有安全性的 WCF 慢吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:32:04.830

如果您担心速度，请考虑仅使用传输安全性。消息体加密将比保护整个通道慢得多。

# javascript - 如何在 d3.js 中将形状转换为另一种形状

> ID：11460266
> 
> 赞同：1
> 
> 时间：2012-07-12T20:38:23.857
> 
> 标签：javascript, d3.js

我刚刚开始使用 d3.js（大约 1.5 周）。我想知道——大多数例子都使用一些模式，比如

```
mysvg.selectAll("rect").data(mydata,key).transition()...; 
```

现在我的代码如下所示。我希望能够将时间序列绘制为特定时间之后的点和线（如果它们在特定时间之前）的矩形。我知道可以将它们作为一个系列并应用过滤器，但我想知道是否有更好的方法可以使用一个 select 语句绘制系列。

如果没有，我该如何使用过滤器来实现它？特别是，我对如何使用出口感到困惑，以便随着时间的增加，条形消失。我尝试了几种不同的方式来调用 .exit().remove()，但它似乎不起作用。

```
function drawChart(svgarea,mydata,key)
{   

var g = svgarea.append("svg:g");

var rects = g.selectAll("rect").data(mydata,key).enter().append("rect");
var lines = g.selectAll("line").data(mydata,key).enter().append("line");

drawAxis();

chartData = [];
chartData.redraw = function(timeIndex)
{                       
    rects.filter(function(d){
            var isAfter =  ...;
            return isAfter;})
        .transition().duration(500)
                    .attr(...,...);});  
    lines.filter(function(d){
            var isBefore =  ...;
            return isBefore;})
        .transition().duration(500)
                    .attr(...,...);});
    rects.exit().remove();  
}
chartData.redraw(0);
return chartData;
} 
```

Note: I set it up like this because the data is non-static. The user of this little graph will call chart.redraw() after an update to the data has been made (at least that's the idea)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:43:45.903

You should split your data *before* you join it with your selection. Keep in mind that many of the iteration methods in d3, including `filter`, are based off of methods provided by the `Array` Object in JavaScript.

```
rectData = myData.filter(function(d) { /* filter conditions */ }
lineData = myData.filter(function(d) { /* filter conditions */ } 
```

More info: `array.[filter](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)(callback[, thisObject])`

Then, you can just focus on `update` and `enter()` without having to filter your data every time you redraw.

# sql - 使用聚合结果过滤查询

> ID：11460267
> 
> 赞同：1
> 
> 时间：2012-07-12T20:38:30.353
> 
> 标签：sql, django, aggregate-functions

在 Django 应用程序中，我有四个模型——“提案”、“提案修订”、“意见”和“用户”。以下是简化的定义：

```
class User(models.Model):
    pass

class Proposal(models.Model):
    pass

class ProposalRevision(models.Model):
    proposal = models.ForeignKey(Proposal)
    created = models.DateTimeField()

class Opinion(models.Model):
    user = models.ForeignKey(User)
    proposal = models.ForeignKey(Proposal)
    created = models.DateTimeField() 
```

每个提案可能有多次修改；并且用户可能对给定的提案有很多意见。我想做的查询是：

> 检索自上次提案修订创建以来给定用户未发表意见的所有提案。

应用程序用例是我想向用户展示他们需要发表意见的建议。

天真地，我想以这种方式进行查询：

```
Proposal.objects.annotate(
        latest_revision=Max('proposalrevision__created')
    ).exclude(
        opinion__user=user,
        opinion__created__lte=F('latest_revision')
    ) 
```

但是，这不起作用，因为[F 表达式](https://docs.djangoproject.com/en/dev/topics/db/queries/#query-expressions)不适用于聚合（[尚未](https://code.djangoproject.com/ticket/14030)）。

为了使用“[额外](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)”查询来解决这个问题，我开始尝试编写普通 SQL 来执行我想要的查询，但是我在 'where' 子句中使用聚合时遇到了困难。我正在使用的 SQL 如下所示：

```
SELECT ...snip..., MAX("proposal_proposalrevision"."created") as "latest_revision"
FROM "proposal_proposal"
LEFT OUTER JOIN "proposal_proposalrevision" ON
    ("proposal_proposal"."id" = "proposal_proposalrevision"."proposal_id")
WHERE "proposal_proposal"."id" NOT IN (
    SELECT (U1."proposal_id") FROM "proposal_opinion" U1
    WHERE (
        U1."user_id" = 1 AND U1."proposal_id" IS NOT NULL AND
        U1."created" > "latest_proposal"
    )
)
GROUP BY ...snip... 
```

SQLite 给了我错误“ `misuse of aggregate: MAX()`”。这适用于我是否使用变量名称“ `latest_proposal`”，或者将其替换为聚合函数的重复`MAX("proposal_proposalrevision"."created")`。

我还能如何构建此查询以使用聚合过滤返回的集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:10:09.247

试试这个解决方案：

```
SELECT a.*, b.maxrevisiondate AS latest_revision
FROM proposal_proposal a
LEFT JOIN
(
    SELECT proposal_id, MAX(created) AS maxrevisiondate
    FROM proposal_proposalrevision
    GROUP BY proposal_id
) b ON a.id = b.proposal_id
LEFT JOIN proposal_opinion c ON
    a.id = c.proposal_id AND
    (b.maxrevisiondate IS NULL OR c.created > b.maxrevisiondate) AND
    c.user_id = <user_id here>
WHERE c.proposal_id IS NULL 
```

# abstract-class - 作为 wcf ria 方法返回的抽象类

> ID：11460269
> 
> 赞同：1
> 
> 时间：2012-07-12T20:38:37.000
> 
> 标签：abstract-class, wcf-ria-services

wcf ria 域服务方法似乎不可能有一个抽象类的返回类型。我无法找到任何表明它是不允许的引用，但是我具有抽象类类型参数（输入或输出）的任何方法在相应客户端项目的生成代码中都不可用。

是否有一种解决方法可以使 Silverlight 客户端可以使用方法 QryAddressByAddressId 在域服务中调用？

```
[EnableClientAccess()]
public class AddressQuerySvcDomainSvc : DomainService
{
    public AddressBase QryAddressByAddressId(string sAddressId)
    {
        ... 
    }
}

[DataContract()]
[KnownType(typeof(NumberedAddress))]
[KnownType(typeof(IntersectionAddress))]
public abstract class AddressBase
{
    ...
}

[DataContract()]
public partial class NumberedAddress : AddressBase
{
    ...
}

[DataContract()]
public partial class IntersectionAddress : AddressBase
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:31:02.937

Your query methods must conform to the naming convention, use an attribute, or both.

```
 public AddressBase QueryAddressByAddressID(...) 
```

or

```
public AddressBase GetAddressByAddressID(...) 
```

or

```
[Query]
public AddressBase QryAddressByAddressID(...) 
```

# javascript - 如何忽略 ExtJS 数据模型中的空字段？

> ID：11460270
> 
> 赞同：5
> 
> 时间：2012-07-12T20:38:49.120
> 
> 标签：javascript, extjs, models, extjs4.1

我的问题很长......所以，请耐心等待:)

我正在使用 ExtJS 4 中的模型，但我在关联方面遇到了一些问题，因此我创建了一个函数来为我执行自动模型创建。假设我需要解析以下 JSON：

```
{ 
    "success": true, 
    "total": 28, 
    "itens": [{
        "id":1,
        "nome":"ACRE",
        "sigla":"AC",
        "pais":{
            "id":31,
            "nome":"BRASIL",
            "sigla":"BR"
        }
    },{
        "id":2,
        "nome":"ALAGOAS",
        "sigla":"AL",
        "pais":{
            "id":31,
            "nome":"BRASIL",
            "sigla":"BR"
        }
    }, ...]
} 
```

itens 代表拥有国家（巴西葡萄牙语中的 País）的省（巴西葡萄牙语中的 Estados）。我尝试使用 ExtJS 关联，但我认为它像 Java 关系一样工作，我错了。好吧，对于这个 JSON，我有这些 Java 类和这些 Ext 模型（模型也是使用提供的函数创建的）。

**派斯.java**

```
@Entity
// named queries here...
public class Pais implements Serializable {

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    @NotEmpty
    @Length( max = 100 )
    private String nome;

    @NotNull
    @NotEmpty
    @Column( unique = true )
    @Length( min = 2, max = 4 )
    private String sigla;

    // getters, setters, equals, hashCode and toString here

} 
```

**Estado.java**

```
@Entity
// named queries here...
public class Estado implements Serializable {

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    @NotEmpty
    @Length( max = 100 )
    private String nome;

    @NotNull
    @NotEmpty
    @Column( unique = true )
    @Length( min = 2, max = 4 )
    private String sigla;

    @NotNull
    @ManyToOne
    private Pais pais;

    // getters, setters, equals, hashCode and toString here

} 
```

**创建模型的函数**

```
Ext.ns( "Uteis" );

// other utility functions here...

Uteis.createModel = function( modelData ) {

    var fields = modelData.fields;
    var processedFields = [];
    var normalFields = [];
    var relationFields = [];

    for ( var i in fields ) {

        if ( fields[i].type ) {

            switch ( fields[i].type ) {

                case "auto":
                case "string":
                case "int":
                case "float":
                case "boolean":
                case "date":
                    normalFields.push( fields[i] );
                    break;

                default:

                    var relationField = fields[i];

                    var prefix = relationField.name + ".";
                    var modelInstance = Ext.create( relationField.type );

                    modelInstance.fields.each( function( item, index, length ) {

                        var newField = {};

                        // I used this sintax to make possible create only some fields
                        // if I need in the future.
                        newField["name"] = prefix + item.name;
                        newField["type"] = item.type.type;

                        newField["convert"] = item.convert;
                        newField["dateFormat"] = item.dateFormat;
                        newField["defaultValue"] = item.defaultValue;
                        newField["mapping"] = item.mapping;
                        newField["persist"] = item.persist;
                        newField["sortDir"] = item.sortDir;
                        newField["sortType"] = item.sortType;
                        newField["useNull"] = item.useNull;

                        relationFields.push( newField );

                    });

                    break;

            }

        } else {
            normalFields.push( fields[i] );
        }

    }

    processedFields = normalFields.concat( relationFields );

    // debugging code
    /*console.log( "*** " + modelData.name );
    for ( var i in processedFields ) {
        console.log( processedFields[i] );
    }*/

    Ext.define( modelData.name, {
        extend: "Ext.data.Model",
        fields: processedFields
    });

}; 
```

**使用函数创建模型**

```
Uteis.createModel({ 
    name: "Modelos.Pais",
    fields: [
        { name: "id",  type: "int" },
        { name: "nome",  type: "string" },
        { name: "sigla",  type: "string" }
    ]
});

Uteis.createModel({ 
    name: "Modelos.Estado",
    fields: [
        { name: "id",  type: "int" },
        { name: "nome",  type: "string" },
        { name: "sigla",  type: "string" },
        { name: "pais", type: "Modelos.Pais" } // <= references the model created above
    ]
}); 
```

上面的代码与此相对应。我创建了自动创建嵌套数据字段的函数（因为我说的关联问题）。

```
Ext.define( "Modelos.Pais", {
    extend: "Ext.data.Model",
    fields: [
        { name: "id",  type: "int" },
        { name: "nome",  type: "string" },
        { name: "sigla",  type: "string" }
    ]
});

Ext.define( "Modelos.Estado", {
    extend: "Ext.data.Model",
    fields: [
        { name: "id",  type: "int" },
        { name: "nome",  type: "string" },
        { name: "sigla",  type: "string" },
        { name: "pais.id",  type: "int" },
        { name: "pais.nome",  type: "string" },
        { name: "pais.sigla",  type: "string" }
    ]
}); 
```

好的，这些模型（使用我的 createModel 函数创建）非常适合我的 JsonStores。到现在为止，Java 端的所有映射关联都不是空的，所以，我的商店总是有嵌套数据要处理。现在，我必须处理一些可以具有空关联的实体，我的问题开始了。需要处理这种情况的存储不起作用（存储操作中抛出异常，说字段为空）。我正在使用 Gson 从我的实体创建 JSON。它的默认行为是不序列化空字段，它们将在客户端未定义，所以我认为如果我序列化空字段（发送空值）将使 Ext 实现空字段而不尝试处理它。为此，我使用此代码创建 Gson：

```
Gson gson = new GsonBuilder().serializeNulls().create(); 
```

好的，现在正在生成带有空关联的 JSON，但 Ext 继续抱怨。我尝试使用字段映射和 defaultValue 配置但没有成功。为了使事情更简单，让我们使用 Estados 和 Países（Privinces 和 Country）的示例，其中 Pais 不再是 @NotNull。带有 null pais 的 JSON 如下所示：

```
{ 
    "success": true, 
    "total": 28, 
    "itens": [{
        "id":1,
        "nome":"ACRE",
        "sigla":"AC",
        "pais":null   // <= here
    },{
        "id":2,
        "nome":"ALAGOAS",
        "sigla":"AL",
        "pais":{  // this is not null
            "id":31,
            "nome":"BRASIL",
            "sigla":"BR"
        }
    }, ...]
} 
```

使用此代码，pais.id、pais.nome 和 pais.sigla 字段将不可用，因为 pais 属性为空。所以，我的问题是：**当某些字段为空或未定义时，如何让商店忽略它们？**我已经尝试寻找没有成功的解决方案......非常感谢！

**编辑**：在服务器端考虑了整个晚上的一些可能的解决方案后，我在最后 15 分钟内实现了一个解决方案，但我绝对不喜欢它......它是一种在使用之前遍历每个对象“对象树”的反射方法Gson 将默认值设置为空字段。它正在工作，但是 JSON 变得不必要地太大了。遍历方法：

```
/**
 * A method to traverse the object tree and set "default" values to null fields.
 * 
 * @param target The object to be inspected.
 */
public static void traverseAndSetDefaultValue( Object target ) {

    try {

        for ( Field f : target.getClass().getDeclaredFields() ) {

            // ok to change...
            f.setAccessible( true );

            // is null? so create something
            if ( f.get( target ) == null ) {

                // new instance of the current field
                Object newInstance = null;

                // it needs to traverse to the next level?
                boolean okToTraverse = false;

                switch ( f.getType().getSimpleName() ) {

                    case "Byte":
                    case "Short":
                    case "Integer":
                        newInstance = 0;
                        break;

                    case "Long":
                        newInstance = 0L;
                        break;

                    case "Float":
                        newInstance = 0F;
                        break;

                    case "Double":
                        newInstance = 0D;
                        break;

                    case "Character":
                        newInstance = '\0';
                        break;

                    case "Boolean":
                        newInstance = Boolean.FALSE;
                        break;

                    case "String":
                        newInstance = "";
                        break;

                    case "List":
                        newInstance = new ArrayList();
                        break;

                    case "Set":
                        newInstance = new HashSet();
                        break;

                    default:
                        // calling the default constructor for no 
                        // "default" types
                        newInstance = f.getType().newInstance();
                        okToTraverse = true;
                        break;

                }

                f.set( target, newInstance );

                if ( okToTraverse ) {
                    traverseAndSetDefaultValue( newInstance );
                }

            }

        }

    } catch ( IllegalAccessException | InstantiationException exc ) {
        exc.printStackTrace();
    }

} 
```

我想知道您对此有何看法...谢谢！

**编辑2**：你好。我放弃！:) 我将使用我在上面发布的解决方案。我找到[了一些补丁](http://www.sencha.com/forum/showthread.php?182147-Success!-Nested-data-in-Grids-Custom-setters-amp-getters-JsonPath-and-Relationships)来改善与模型和网格的关系。我测试了它们，但空字段的问题仍然存在（至少错误消失了）。好的，现在是继续开发的时候了。应用程序完成后，我将回到这个问题以尝试改进我的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:16:00.083

不确定这是否是问题所在，因为您没有给出确切的错误；但我之前遇到过可选嵌套数据的问题，解决方案是在模型中创建一个映射函数：

```
Ext.define( "Modelos.Estado", {
    extend: "Ext.data.Model",
    fields: [
        { name: "id",  type: "int" },
        { name: "nome",  type: "string" },
        { name: "sigla",  type: "string" },
        { name: "pais.id",  type: "int", mapping: function( o ) { return o.pais ? o.pais.id : null; } },
        { name: "pais.nome",  type: "string", mapping: function( o ) { return o.pais ? o.pais.nome : null; } },
        { name: "pais.sigla",  type: "string", mapping: function( o ) { return o.pais ? o.pais.sigla : null; } }
    ]
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:39:33.170

您可以扩展 Ext.data.reader.Json 如下：

```
Ext.define('Ext.data.reader.SafeJson', {
    extend: 'Ext.data.reader.Json',
    alias : 'reader.safejson',
    /**
     * @private
     * Returns an accessor function for the given property string. Gives support for properties such as the following:
     * 'someProperty'
     * 'some.property'
     * 'some["property"]'
     * This is used by buildExtractors to create optimized extractor functions when casting raw data into model instances.
     */
    createAccessor: (function() {
        var re = /[\[\.]/;

        return function(expr) {
            if (Ext.isEmpty(expr)) {
                return Ext.emptyFn;
            }
            if (Ext.isFunction(expr)) {
                return expr;
            }
            if (this.useSimpleAccessors !== true) {
                var i = String(expr).search(re);
                if (i >= 0) {
                    if (i > 0) {    // Check all property chain for existence. Return null if any level does not exist.
                        var a = [];
                        var l = expr.split('.');
                        var r = '';
                        for (var w in l) {
                            r = r + '.' + l[w];
                            a.push('obj' + r);
                        }
                        var v = "(" + a.join(" && ") + ") ? obj." + expr + " : null";
                        return Ext.functionFactory('obj', 'return (' + v + ')');
                    } else {
                        return Ext.functionFactory('obj', 'return obj' + (i > 0 ? '.' : '') + expr);
                    }
                }
            }
            return function(obj) {
                return obj[expr];
            };
        };
    }()),

        /**
     * @private
     * @method
     * Returns an accessor expression for the passed Field. Gives support for properties such as the following:
     *
     * - 'someProperty'
     * - 'some.property'
     * - 'some["property"]'
     *
     * This is used by buildExtractors to create optimized on extractor function which converts raw data into model instances.
     */
    createFieldAccessExpression: (function() {
        var re = /[\[\.]/;

        return function(field, fieldVarName, dataName) {
            var me     = this,
                hasMap = (field.mapping !== null),
                map    = hasMap ? field.mapping : field.name,
                result,
                operatorSearch;

            if (typeof map === 'function') {
                result = fieldVarName + '.mapping(' + dataName + ', this)';
            } else if (this.useSimpleAccessors === true || ((operatorSearch = String(map).search(re)) < 0)) {
                if (!hasMap || isNaN(map)) {
                    // If we don't provide a mapping, we may have a field name that is numeric
                    map = '"' + map + '"';
                }
                result = dataName + "[" + map + "]";
            } else {                
                if (operatorSearch > 0) {
                    var a = [];
                    var l = map.split('.');
                    var r = '';
                    for (var w in l) {
                        r = r + '.' + l[w];
                        a.push(dataName + r);
                    }
                    result = "("+a.join(" && ")+") ? "+dataName+"."+map+" : null";
                } else {
                    result = dataName + map;
                }
            }            
            return result;
        };
    }())
}); 
```

因此，您可以成功处理带有空节点的嵌套 JSON 数据。

JSON 示例：

```
{
    root: [{
        id: 1,
        name: {
            name: "John",
            phone: "123"
        },          
    },
    {
        id: 4,
        name: null,         
    },
    ]
} 
```

您可以在此处找到带有测试数据的工作示例：http: [//jsfiddle.net/8Ftag/](http://jsfiddle.net/8Ftag/)

ExtJS 4.1.1 测试

# png - install4j 用于启动画面的无效 PNG 文件

> ID：11460271
> 
> 赞同：1
> 
> 时间：2012-07-12T20:38:49.480
> 
> 标签：png, install4j

我使用 install4j 对用作初始屏幕的 PNG 文件进行了小编辑（使用 GIMP）。install4j 现在失败并出现以下堆栈跟踪和错误：

install4j：编译失败。原因：com.ABE：com.ABE：文件 splash.png 不是有效的图像文件。

```
 java.lang.IllegalArgumentException
        at com.sun.media.imageioimpl.plugins.bmp.BMPImageWriter.write(BMPImageWriter.java:230)
        at javax.imageio.ImageWriter.write(ImageWriter.java:598)
        at javax.imageio.ImageIO.write(ImageIO.java:1479)
        at javax.imageio.ImageIO.write(ImageIO.java:1521)
        at com.A.B.D.U(ejt:3266)
        at com.A.B.D.R(ejt:3578)
        at com.A.B.D.M(ejt:3204)
        at com.A.B.D.O(ejt:1707)
        at com.A.B.D.d(ejt:534)
        at com.install4j.C.D.F.D(ejt:1952)
        at com.install4j.C.D.B.X(ejt:1313)
        at com.install4j.C.C.W(ejt:873)
        at com.install4j.C.C.B(ejt:230)
        at com.install4j.C.A.A(ejt:1782)
        at com.install4j.C.B.º(ejt:518)
        at com.install4j.C.B.Ä(ejt:937)
        at com.install4j.C.B.I(ejt:1116)
        at com.install4j.Install4JApplication.ő(ejt:851)
        at com.A.L.Ŀ(ejt:1343)
        at com.install4j.Install4JApplication.main(ejt:2655)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.exe4j.runtime.LauncherEngine.launch(Unknown Source)
        at com.install4j.runtime.Launcher.main(Unknown Source) 
```

在之前一切正常的情况下，PNG 文件中发生了什么变化会导致它失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:54:26.283

不支持具有透明度的 PNG 图像。一个 alpha 通道已添加到我的 PNG 文件中，一旦我将其删除，一切都会再次正常运行。

# sql - 动态 Sql- 活动字段搜索条件问题

> ID：11460272
> 
> 赞同：0
> 
> 时间：2012-07-12T20:38:52.060
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, dynamic-sql

我正在创建一个用于在表中搜索的动态 sql 查询`tblEmployees`。在`tblEmployees`我有一个名为的字段中，`active`所以我希望如果我们将 active as 1 与其他参数一起提供，那么它应该搜索 active=1 的记录，如果我们没有为任何值提供 active 我的意思既不是 1 也不是 0 那么它应该搜索与我在查询中定义的其他参数。

```
CREATE TABLE tblEmployees2
(
    EmployeeID       SMALLINT IDENTITY(1001,1) NOT NULL,
    EmployeeName     NVARCHAR(100) NOT NULL,
    Department       NVARCHAR(50) NOT NULL,
    Designation      NVARCHAR(50) NOT NULL,
    JoiningDate      DATETIME NOT NULL,
    Salary           DECIMAL(10,2) NOT NULL,
    [Description]    NVARCHAR(1000) NULL,
    active           Tinyint NULL 
)

INSERT INTO tblEmployees
(EmployeeName, Department, Designation, 
 JoiningDate, Salary, [Description],active) 
VALUES    
('John Smith', 'IT Research', 'Research Analyst', 
 '02/08/2005', 23000.00, 'Analyst since 2005',1)

INSERT INTO tblEmployees
(EmployeeName, Department, Designation, 
 JoiningDate, Salary, [Description],active) 
VALUES    
('John Micheal', 'IT Operations', 'Manager', 
 '07/15/2007', 15000.00, NULL,0)

INSERT INTO tblEmployees
(EmployeeName, Department, Designation, 
 JoiningDate, Salary, [Description],active) 
VALUES    
('Will Smith', 'IT Support', 'Manager', 
 '05/20/2006', 13000.00, 'Joined last year as IT Support Manager',1) 
```

和动态sql——

```
/* Input Parameters */
Declare
@EmployeeName NVarchar(100),
@Department NVarchar(50),
@Designation NVarchar(50),
@StartDate DateTime,
@EndDate DateTime,
@Salary    Decimal(10,2),
@active tinyint

set @active=1--------------if active is 1 then it returns result where active=1 and if we are not providing
                          --any value neither 1 nor 0 then it should return both active=1 and active=0
set @EmployeeName='joh'
    /* Variable Declaration */
    Declare @SQLQuery AS NVarchar(4000)
    Declare @ParamDefinition AS NVarchar(2000) 
    /* Build the Transact-SQL String with the input parameters */ 
    Set @SQLQuery = 'Select * From tblEmployees where (1=1) ' 
    /* check for the condition and build the WHERE clause accordingly */
    if @active=1   
    set @SQLQuery=@active + ' And (active = @active)'

If @EmployeeName Is Not Null 
     Set @SQLQuery = @SQLQuery + ' And (EmployeeName LIKE '''+ '%' + @EmployeeName + '%' + ''')'

If @Department Is Not Null
     Set @SQLQuery = @SQLQuery + ' And (Department = @Department)' 

If @Designation Is Not Null
     Set @SQLQuery = @SQLQuery + ' And (Designation = @Designation)'

If @Salary Is Not Null
     Set @SQLQuery = @SQLQuery + ' And (Salary >= @Salary)'

If (@StartDate Is Not Null) AND (@EndDate Is Not Null)
     Set @SQLQuery = @SQLQuery + ' And (JoiningDate 
     BETWEEN @StartDate AND @EndDate)'
/* Specify Parameter Format for all input parameters included 
 in the stmt */
Set @ParamDefinition =      ' @EmployeeName NVarchar(100),
            @Department NVarchar(50),
            @Designation NVarchar(50),
            @StartDate DateTime,
            @EndDate DateTime,
            @Salary    Decimal(10,2),
            @active tinyint'
/* Execute the Transact-SQL String with all parameter value's 
   Using sp_executesql Command */
Execute sp_Executesql     @SQLQuery, 
            @ParamDefinition, 
            @EmployeeName, 
            @Department, 
            @Designation, 
            @StartDate, 
            @EndDate,
            @Salary,
            @active

print @SQLQuery 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:57:00.327

改变这个：

```
set @SQLQuery=@active + ' And (active = @active)' 
```

对此：

```
set @SQLQuery = @SQLQuery + ' And (active = @active)' 
```

为树而林？

# android - 为什么安卓模拟器不注册外部包含的jar？

> ID：11460277
> 
> 赞同：0
> 
> 时间：2012-07-12T20:39:17.973
> 
> 标签：android, eclipse, jar, gson

我在 Eclipse 中工作，我正在尝试使用 GSON。我在 Eclipse 中添加了 gson-2.2.2.jar 作为外部 jar。然后我在模拟器中运行 Android 应用程序。我得到“找不到类 'com.google.gson.Gson'，从方法 com.mycompany.myapp.MyMethod 引用”。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:41:44.423

将 jar 文件复制到`libs/`项目目录的文件夹中。我有类似的错误并复制 jar 文件来`libs/`解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:46:31.807

右键单击项目 -> 构建路径 -> 配置构建路径 在“库”选项卡中，您可以添加外部 jar。确保然后转到 Order and Export 选项卡并确保选中该框，因为这是构建路径顺序。就像 SRN 说的那样，你应该把它添加到你的 libs 文件夹中，然后在本地而不是外部引用它。

# cocos2d-iphone - CCLabelTTF 自动高度

> ID：11460278
> 
> 赞同：1
> 
> 时间：2012-07-12T20:39:22.647
> 
> 标签：cocos2d-iphone, kobold2d

在下面的代码中，我试图通过将“尺寸”中的 Y 参数设置为 0 来使文本换行到下一行。但是文本不会换行。但是，如果我将其设置为其他正值，例如“100”，它确实会换行。

这种行为在整个网络上都有记录。这是其中一篇文章： http: [//www.cocos2d-x.org/projects/cocos2d-x/wiki/How_does_CCLabelTTF_support_line_breaks_and_wrapping](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/How_does_CCLabelTTF_support_line_breaks_and_wrapping)

```
CCLabelTTF *distrDescLabel = [CCLabelTTF labelWithString:@"Nullam id dolor id nibh ultricies vehicula ut id elit."
                                                      dimensions:CGSizeMake(director.screenSize.width - 20, 0) 
                                                      hAlignment:UITextAlignmentLeft 
                                                   lineBreakMode:UILineBreakModeWordWrap 
                                                        fontName:@"Helvetica" 
                                                        fontSize:16.0f]; 
```

我正在使用 XCode 4.3.3 和 Kobold2D 2.0.1 并在 iOS 模拟器和 OS X 应用程序下运行示例。在这两种情况下，结果是相同的。

任何人都可以验证这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T10:39:56.117

对于 CCLabelTTF 标签的自动高度，我使用了这个简单的例程：

```
while (label.contentSizeInPoints.height > targetHeight) {
    label.fontSize = label.fontSize-0.5;
} 
```

不要广泛使用它，因为 CCLabelTTF 标签在每个循环中都会完全重新计算。

希望它会帮助某人

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T21:17:31.723

在 cocos2d-iphone 中没有自动换行支持。链接指向 cocos2d-x，我想他们添加了自己的解决方案。

在 cocos2d-iphone 中，您必须分解字符串，然后显示多个标签，每行一个。

# c# - 有没有更好的方法来改进我的添加记录方法？

> ID：11460281
> 
> 赞同：0
> 
> 时间：2012-07-12T20:39:24.283
> 
> 标签：c#, linq, ibm-midrange

我正在处理我们 IBM i 服务器上的数据。我用来从 .NET 连接的驱动程序无法执行 LINQ 或实体框架。我知道还有另一个驱动程序，但这很昂贵，而且根据我在网上看到的所有内容，我还没有弄清楚这是否真的有效。

所以为了“解决”这个限制，我将数据从服务器拉到一个数据表中，然后立即将该数据放入一个对 LINQ 更友好的模型中。

到目前为止，我使用过的大多数表都没有太多列，在这些列中复制粘贴参数以使其工作变得很烦人。现在我有一个包含大量列的文件。

```
SELECT DDATE, DPERNO, DPIN, DCODE, DCODE2, DESTCS, DBLDBP, DPERMP, DADFEE, DPRFEE, 
    DSURCR, DTTFEE, DSTNU, DSTEX, DSTNA, DSTSU, DDIR, DAPTS, DBORI, DSUBDV, DDIREC, 
    DSITED, DLEGAL, DAPPCD, DOWNER, DOWNAD, DONAD2, DOWNCT, DOWNST, DOWNZP, DOWPH1, 
    DOWCM1, DOWPH2, DOWCM2, DCMPNY, DCONTR, DCONAD, DCNAD2, DCONCT, DCONST, DCONZP, 
    DCNPH1, DCNCM1, DCNPH2, DCNCM2, DCNCPH, DCTRNO, DSPRCD, DTYCON, DTYCN2, DDEMO, 
    DZONE, DCOMDT, DSTRWD, DSTRDP, DSTYNO, DPROPT, DSETFR, DSETRR, DSETLF, DSETRT, 
    DATTGR, DUNAGR, DTYOCC, DSQFOT, DLOTCO, DPLMNM, DCONCD, DDIVIS, DARCHT, DENGIR, 
    DINSPC, DVARCE, DDTPD, DDTCOM, DUNITS, DVOID, DINSFL, DBLDCD, DCAUKY, DCAPIN  
  FROM MYTABLE 
```

我正在编写我的方法来进行插入，并且认为必须有更好的方法。

```
 public bool AddBuildingPermit(BuildingPermit bp)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("INSERT INTO QMFILES.PBMASTP ");
        sb.Append("VALUES(@DDATE, @DPERNO, @DPIN, @DCODE, @DCODE2, @DESTCS, @DBLDBP, @DPERMP, @DADFEE, @DPRFEE, @DSURCR, @DTTFEE, @DSTNU, ");
        sb.Append("@DSTEX, @DSTNA, @DSTSU, @DDIR, @DAPTS, @DBORI, @DSUBDV, @DDIREC, @DSITED, @DLEGAL, @DAPPCD, @DOWNER, @DOWNAD, ");
        sb.Append("@DONAD2, @DOWNCT, @DOWNST, @DOWNZP, @DOWPH1, @DOWCM1, @DOWPH2, @DOWCM2, @DCMPNY, @DCONTR, @DCONAD, @DCNAD2, @DCONCT, ");
        sb.Append("@DCONST, @DCONZP, @DCNPH1, @DCNCM1, @DCNPH2, @DCNCM2, @DCNCPH, @DCTRNO, @DSPRCD, @DTYCON, @DTYCN2, @DDEMO, @DZONE, ");
        sb.Append("@DCOMDT, @DSTRWD, @DSTRDP, @DSTYNO, @DPROPT, @DSETFR, @DSETRR, @DSETLF, @DSETRT, @DATTGR, @DUNAGR, @DTYOCC, @DSQFOT, ");
        sb.Append("@DLOTCO, @DPLMNM, @DCONCD, @DDIVIS, @DARCHT, @DENGIR, @DINSPC, @DVARCE, @DDTPD, @DDTCOM, @DUNITS, @DVOID, @DINSFL, ");
        sb.Append("@DBLDCD, @DCAUKY, @DCAPIN)");

        using (iDB2Connection conn = new iDB2Connection(_connString))
        {
            using (iDB2Command cmd = new iDB2Command(sb.ToString(), conn))
            {
                cmd.Parameters.Add("@DDATE", iDB2DbType.iDB2Decimal).Value = IbmIDateTime.ConvertToNumericDate(bp.DateApplied);
                cmd.Parameters.Add("@DPERNO", iDB2DbType.iDB2Decimal).Value = GetNextBuildingPermitNumber();
                cmd.Parameters.Add("@DPIN", iDB2DbType.iDB2Char).Value = bp.CommonAddressPin;
                /// add all of the fields here
            }
        }
        return true;
    } 
```

除了复制粘贴/修改每个字段。有没有办法让这更容易。也许是一个循环或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:57:58.910

使用 DataAnnotations 属性[TableAttribute](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.tableattribute.aspx)和[ColumnAttribute](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.columnattribute)然后使用反射使用单一方法构建您的查询。

```
[Table("QMFILES.PBMASTP")]
public class QMFILESPBMASTP
{
    [Column("DDATE")]
    public DateTime DueDate { get; set; }
}

public bool AddRecord<T>(T model)
{
  var tlbInfo = System.Attribute
                      .GetCustomAttribute(typeof(T), 
                                          typeof(CustomTableAttribute)) 
                      as CustomTableAttribute;

  var cols = typeof(T).GetProperties()
                      .Where(p => p.GetCustomAttributes(typeof(ColumnAttribute),
                                                        true)
                                   .Count() == 1)
                      .Select(p => p.GetCustomAttributes(typeof(ColumnAttribute),
                                                         true)
                                    .First() as ColumnAttribute);
  var colNames = cols.Select(c => c.Name);

  if (tblInfo != null && cols.Count() > 0)
  {
    StringBuilder sb = new StringBuilder();
    sb.Append("INSERT INTO ");
    sb.Append(tlbInfo.Name);
    sb.Append("VALUES(@");
    sb.Append(string.Join(", @", colNames.ToArray()));

    // etc
  }
} 
```

# clojure - 如何让 leiningen 2 尊重 maven 的 settings.xml 文件中的本地存储库路径？

> ID：11460283
> 
> 赞同：7
> 
> 时间：2012-07-12T20:39:26.233
> 
> 标签：clojure, leiningen

Leiningen 2 似乎没有在我的 ~/.m2/settings.xml 文件中使用 localRepository 设置，它只是将下载的所有内容转储到 ~/.m2/repository 中。

我如何告诉 leiningen 2 在哪里下载东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T21:04:44.137

您可以像这样覆盖 project.clj 文件中单个项目的本地存储库位置

```
(defproject test-local "1.0.0-SNAPSHOT"
  :description "Use a local repo location."
  :dependencies [[org.clojure/clojure "1.3.0"]
                 [com.cemerick/pomegranate "0.0.13"]]
  :local-repo "my-repo") 
```

可以如上所述在项目目录下设置相对路径，也可以设置绝对路径。似乎无法使用主目录的快捷方式并将其设置为“~/my-repo”之类的东西。

您可以通过将密钥添加到您的profiles.clj 文件使所有项目使用相同的位置。

```
{:user {:plugins [[lein-swank "1.4.4"]]
        :local-repo "/home/jeff/my-repo"}} 
```

# photoshop - 遮罩形状上的图像

> ID：11460287
> 
> 赞同：0
> 
> 时间：2012-07-12T20:39:52.403
> 
> 标签：photoshop, photoshop-cs3

我有一张照片，在上面我画了一个有形状的圆圈。

我想让它只有在这个圆圈内的照片部分是可见的，而圆圈外的部分不应该是可见的。因此，我应该能够将图像的一部分放在圆圈中，并最终得到一个圆形的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:59:24.633

图层 -> 新建剪贴蒙版

将图像放在形状上方并应用上述内容。

# c - C中的二进制补码加法溢出

> ID：11460288
> 
> 赞同：5
> 
> 时间：2012-07-12T20:39:55.477
> 
> 标签：c, debugging

我在 C 中看到了一个错误代码，用于检查加法是否导致溢出。它适用于`char`，但是当参数是时给出错误的答案`int`，我不知道为什么。
这是带`short`参数的代码。

```
short add_ok( short x, short y ){
    short sum = x+y;
    return (sum-x==y) && (sum-y==x);
} 
```

这个版本工作正常，当你将参数更改为时出现问题`int`（你可以检查它`INT_MAX`）
你能看到这里有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:43:12.350

因为在 2s 补码中，整数可以排列成一个圆圈（在[模算术](http://en.wikipedia.org/wiki/Modulo_arithmetic)的意义上）。添加 y 然后减去 y 总是会让你回到你开始的地方（尽管有未定义的行为）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T21:03:24.453

在您的代码中，加法**不会溢出**，除非`int`与`short`. 由于默认提升，对和提升到`x+y`的值执行，然后以实现定义的方式将结果截断为。`x``y``int``short`

为什么不简单地做：`return x+y<=SHRT_MAX && x+y>=SHRT_MIN;`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T04:58:29.310

在 C 编程语言中，有符号整数在转换为较小的有符号整数时，比如 char（为了简单起见），是实现定义的方式。尽管许多系统和程序员都假设回绕溢出，但这并不是一个标准。那么什么是环绕溢出呢？

二进制补码系统中的回绕溢出发生这样的情况，即当一个值不能再以当前类型呈现时，它会围绕可以呈现的最高或最低数字扭曲。那么这是什么意思？看一看。

在signed char中，可以呈现的最大值是127，最小值是-128。那么当我们执行“char i = 128”时会发生什么，存储在 i 中的值变为 -128。因为该值大于有符号整数类型，所以它围绕最小值，如果它是“char i = 129”，那么 i 将包含 -127。你能看见它吗？每当一端达到最大值时，它就会环绕另一端（符号）。反之亦然，如果“char i = -129”，那么 i 将包含 127，如果是“char i = -130”，它将包含 126，因为它达到了最大值并缠绕在最大值周围。

(最高) 127, 126, 125, ... , -126, -127, -128 (最低)

如果值非常大，它会不断回绕，直到达到可以在其范围内表示的值。

![char 类型的环绕点](../Images/df0aeb825d3382bbd0451b72ffbc0342.png)

* * *

**更新：**为什么`int`不能反对`char`and`short`的原因是因为当两个数字相加时，有可能溢出（不管是`int`,`short`或`char`, 同时不要忘记积分提升），但是因为`"short"`and`char`的尺寸小于`int`并且因为它们在表达式中被提升为`int`，所以在这一行中再次表示它们而没有截断：

```
return (sum-x==y) && (sum-y==x); 
```

所以任何溢出都会被检测到，后面会详细解释，但是当 with 时`int`，它不会被提升为任何东西，所以会发生溢出。例如，如果我这样做`INT_MAX+1`，那么结果是 INT_MIN，如果我通过 INT_MIN-1 == INT_MAX 测试溢出，结果是 TRUE！**这是因为“short”和 char 被提升为 int、求值，然后被截断（溢出）。但是， int 首先溢出然后评估，因为它们没有提升到更大的大小。**

想想没有提升的 char 类型，并尝试使用上图进行溢出并检查它们。您会发现添加或减去导致溢出的值会使您回到原来的位置。但是，这不是在 C 中发生的情况，因为 char 和“short”被提升为 int，因此检测到溢出，这在 int 中是不正确的，因为它被提升为更大的大小。

**更新结束**

* * *

对于您的问题，我在 MinGW 和 Ubuntu 12.04 中检查了您的代码，似乎工作正常。后来我发现代码实际上在short小于int并且值不超过int范围的系统中工作。这一行：

```
return (sum-x==y) && (sum-y==x); 
```

是真的，因为 "sum-x" 和 "y" 被评估为 (int) 所以不会发生环绕，它发生在前一行（分配时）：

```
short sum = x+y; 
```

这是一个测试。如果我第一个输入 32767，第二个输入 2，那么当：

```
short sum = x+y; 
```

由于环绕，总和将包含 -32767。但是，当：

```
return (sum-x==y) && (sum-y==x); 
```

"sum-x" (-32767 - 32767) 只会在 wrap-round 发生时等于 y (2)（然后是 buggy），但由于积分提升，它永远不会以这种方式发生，并且 "sum-x" 值变为 - 65534 不等于 y，从而导致正确检测。

这是我使用的代码：

```
#include <stdio.h>

short add_ok( short x, short y ){
    short sum = x+y;
    return (sum-x==y) && (sum-y==x);
}

int main(void) {

    short i, ii;
    scanf("%hd %hd", &i, &ii);
    getchar();

    printf("%hd", add_ok(i, ii));

    return 0;
} 
```

检查[这里](http://ideone.com/lSLwf)和[这里](http://ideone.com/AmM4D)。

您需要提供您正在处理的架构，以及您测试的实验值是什么，因为不是每个人都会面对您所说的内容，并且因为您的问题是由实现定义的性质。

[参考：此处](https://www.gnu.org/software/autoconf/manual/autoconf-2.67/html_node/Integer-Overflow-Basics.html#Integer-Overflow-Basics)为C99 6.3.1.3 ，[此处](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)为 GNU C 手册。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T20:47:27.047

编译器可能只是用 1 替换对该表达式的所有调用，因为它在每种情况下都是正确的。优化例程将对 sum 执行复制传播并得到

```
return (y==y) && (x==x); 
```

进而：

```
return 1 
```

在每种情况下都是如此，因为有符号整数溢出是未定义的行为——因此，编译器可以自由地保证 x+yy == x 和 y+xx == y。

如果这是一个无符号操作，它同样会失败——因为溢出只是作为模运算执行的，因此很容易证明

```
x+y mod SHRT_MAX - y mod SHRT_MAX == x 
```

对于相反的情况也是如此。

# iphone - 淡化过渡减慢

> ID：11460291
> 
> 赞同：0
> 
> 时间：2012-07-12T20:40:05.127
> 
> 标签：iphone, ios4, cocos2d-iphone

在 cocos2d 场景替换 2 个场景之间的过渡中，我得到了明显的减速。它不是很慢，但不是 100% 流畅。有趣的是，对于标准分辨率来说它是平滑的，但对于视网膜来说，速度会明显放缓。

这可能是什么原因造成的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:20:40.600

任何数量的东西。考虑一下引擎在过渡期间呈现的内容：

*   渲染第一个场景
*   渲染其他场景
*   渲染过渡效果

通常只渲染一个场景。在过渡期间，两个场景都被渲染，加上过渡效果。这很可能是导致经济放缓的原因。

尝试使用不同的过渡效果（淡入淡出特别昂贵）。尝试在过渡期间降低一个或两个场景的复杂性。如果没有任何帮助，请添加一个中间的“加载”场景。

# activerecord - 在 ActiveRecord 中对分组结果进行分页

> ID：11460292
> 
> 赞同：1
> 
> 时间：2012-07-12T20:40:09.393
> 
> 标签：activerecord, group-by, will-paginate

在这个应用程序中，a`User`有许多`Status`es，可以通过`User#statuses`. 现在，我们按周对结果进行分组以显示在我们的视图中。但是，我们也使用[will_paginate](https://github.com/mislav/will_paginate)对结果进行分页。问题是它对状态而不是星期进行分页，因此不同的星期被分成不同的页面。

我想，在最基本的层面上，我问的是如何使用 will_paginate 对哈希键进行分页。

# c++ - 使用 std::vector 和 boost::thread 进行内存管理

> ID：11460295
> 
> 赞同：1
> 
> 时间：2012-07-12T20:40:11.930
> 
> 标签：c++, memory-management, memory-leaks, stdvector, eigen

假设我有以下代码

```
class simple_class
{
public:
    simple_class() { }

    void start()
    {
        boost::thread simple_thread(&simple_class::expand,this);
    }

    void expand()
    {
        while(1)
        {
            this->private_vector.push_back((int)1);
        }
    }
private:
    std::vector<int> private_vector;
};

int main()
{
    simple_class* obj1 = new simple_class();
    simple_class* obj2 = new simple_class();
    obj1->start();
    obj2->start();
    while(1) {}
} 
```

显然，这个程序会在某个时候耗尽内存并且应该抛出一个`std::bad_alloc`. 但我的问题如下：

1.  在此之前是否存在 obj1 的 private_vector 会被 obj2 的 private_vector 覆盖的情况？有没有办法保护它？
2.  如果我在定义 EIGEN_MAKE_ALIGNED_NEW_OPERATOR 时强制类中的 private_vector 在内存中对齐（就像 Eigen 对其矩阵所做的那样），这是否会改变问题 1 的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:25:49.417

我通常不会回答问题，但我几乎 100% 肯定这个问题的答案是：

1.  “不。” 您正在使用 new 运算符和一个 STL 对象。正如您所指出的，您需要担心的最重要的事情是内存很快就会耗尽。

2.  又不行了。我对本征矩阵一无所知，但内存对齐将由操作系统和编译器决定，而不是由语言决定。

# iphone - 自定义 TableView 单元格中的 UIWebView

> ID：11460296
> 
> 赞同：0
> 
> 时间：2012-07-12T20:40:13.940
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我有一个简单的 Interface Builder 文件，它是一个自定义 TableView 单元。自定义 tableview 单元格有两个出口......

1.  网络视图
2.  文字标签

由于某些奇怪的原因，我收到此错误...

```
2012-07-12 16:28:23.206 VideoPush[3761:707] -[UITableViewCell webView]: unrecognized selector sent to instance 0x168cc0
2012-07-12 16:28:23.211 VideoPush[3761:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewCell webView]: unrecognized selector sent to instance 0x168cc0'
*** First throw call stack:
(0x355e188f 0x37988259 0x355e4a9b 0x355e3915 0x3553e650 0x87279 0x33075efb 0x33074fd9 0x33074763 0x33018f37 0x355401fb 0x32410aa5 0x324106bd 0x32414843 0x3241457f 0x3243c911 0x3243c8e3 0x3305a10f 0x33047b33 0x33015ac3 0x33015567 0x33014f3b 0x371d422b 0x355b5523 0x355b54c5 0x355b4313 0x355374a5 0x3553736d 0x3304686b 0x33043cd5 0x86e5b 0x86e00)
terminate called throwing an exception(lldb) 
```

**我的西布**

![在此处输入图像描述](../Images/a88b539667d6e14c1cd5e2ca6ac91696.png)

这是**CustomCell.h上面xib**的控制器......

```
#import <UIKit/UIKit.h>

@interface VPCustomCell : UITableViewCell
@property (strong, nonatomic) IBOutlet UIWebView *webView;
@property (strong, nonatomic) IBOutlet UILabel *titleLabel;

@end 
```

最后是我的视图控制器，它包含实际的表格视图......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSString *htmlString = @"<html><head> <meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 120\"/></head> <body style=\"background:#FFF;margin-top:0px;margin-left:0px\"> <div><object width=\"120\" height=\"80\"> <param name=\"movie\" value=\"http://www.youtube.com/v/1Xqn5IHbusA&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"></param> <param name=\"wmode\" value=\"transparent\"></param> <embed src=\"http://www.youtube.com/v/1Xqn5IHbusA&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"120\" height=\"80\"></embed> </object></div></body></html>";
    // Configure the cell...
    [cell.webView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com"]];
    cell.titleLabel.text = @"Hello";

    return cell;
} 
```

注意：在接口文件中，我声明了这一点并导入了我的自定义单元格......

```
VPCustomCell *cell; 
```

*我难以理解的是错误是什么问题？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:46:38.843

在 Interface Builder 中，查看 Identity Inspector (option-command-3) 并确保您已将表格 vie 单元格的类设置为您的`CustomCell`单元格类。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-12T20:50:27.450

使用 UITableViewCells 时，最好处理标签而不是 outlet。对于您的问题，我会删除网点，在属性检查器中给 Webview 一个标签或任何您想要的，比如 100。对标签执行相同的操作。然后在你的 cellForRowAtIndexPath 中：

```
static NSString *CellIdentifier = @"Cell";
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

NSString *htmlString = @"<html><head> <meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = no, width = 120\"/></head> <body style=\"background:#FFF;margin-top:0px;margin-left:0px\"> <div><object width=\"120\" height=\"80\"> <param name=\"movie\" value=\"http://www.youtube.com/v/1Xqn5IHbusA&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\"></param> <param name=\"wmode\" value=\"transparent\"></param> <embed src=\"http://www.youtube.com/v/1Xqn5IHbusA&f=gdata_videos&c=ytapi-my-clientID&d=nGF83uyVrg8eD4rfEkk22mDOl3qUImVMV6ramM\" type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"120\" height=\"80\"></embed> </object></div></body></html>";
// Configure the cell...
UIWebView *thisWebView = (UIWebView*)[cell viewWithTag:100];
UILabel *thisLabel = (UILabel*)[cell viewWithTag:whateverYouWant];
[thisWebView loadHTMLString:htmlString baseURL:[NSURL URLWithString:@"http://www.youtube.com"]];
thisLabel.text = @"Hello";
return cell; 
```

你应该很好

# php - mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源（唯一）

> ID：11460298
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:40:19.400
> 
> 标签：php, mysql

基本上，我从一个表单中提取四个变量的值，然后使用这些值作为 WHERE 语句从我的数据库中的表中进行选择。我在这里只提供了我的代码片段，因为我已经验证了正确的值来自表单到有问题的变量，并且代码运行良好，并且当我只检查时将 if 语句移到我的 else 语句中groupid 和 memberid。

groupid 是一个 4 位数字。memberid 是一个 3 位数字。name 是全名，例如 John A. Smith，dob 是日期，例如 1900-10-31

我试图运行的查询如下。在我收到 MySQL 错误后，它确实显示消息“成员不存在”。我在这里想念什么？

```
$qry="SELECT * FROM members WHERE groupid = $groupid AND memberid = $memberid AND   membername = $name AND memberdob = $dob";
$result=mysql_query($qry);

if(mysql_num_rows($result) == 0)
    {
    echo "Member does not exist";
    }
 else  {.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:44:38.277

```
$qry="SELECT * FROM members 
      WHERE groupid = $groupid 
      AND memberid = $memberid
      AND membername = '$name'
      AND memberdob = '$dob'"; 
```

加上引号`membername`和`memberdob`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:14:27.777

> groupid 是一个 4 位数字。memberid 是一个 3 位数字。name 是全名，例如 John A. Smith，dob 是日期，例如 1900-10-31

你是那样想的。黄金法则：[永远不要相信用户的任何输入](http://www.experimentgarden.com/2009/07/how-to-stop-hacker-dont-trust-user.html)。

如果你想坚持使用 mysql 扩展，那么首先使用[`mysql_real_escape_string`](http://php.net/mysql_real_escape_string/). 其次，引用传递给查询的变量。所以，而不是

```
$qry = "... WHERE groupid = $groupid ..."; 
```

做

```
$qry = "... WHERE groupid = '" . mysql_real_escape_string($groupid) . "'..."; 
```

在您的情况下，查询失败的最可能原因是`$name`变量。它包含空格。空格是查询中断的地方。引用变量将解决问题：

```
$qry = "SELECT *
        FROM members
        WHERE groupid = '" . mysql_real_escape_string($groupid) . "'
        AND memberid = '" . mysql_real_escape_string($memberid) . "'
        AND membername = '" . mysql_real_escape_string($name) . "'
        AND memberdob = '" . mysql_real_escape_string($dob) . "'"; 
```

此外，通过错误处理改进查询执行。简单的例子：

```
$result = mysql_query($qry) or die('Invalid query: ' . mysql_error()); 
```

这将返回详细的错误描述，帮助您确定根本原因。

至于不推荐的 mysql 扩展的推荐替代方案：请阅读PHP 手册中的[选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:24:13.597

由于不了解您的应用程序的整个上下文，我将假设变量在从表单中检索后得到正确处理。

如果字符串字段没有正确括在引号中，mysql 通常会抱怨它们。可能是 $name 和 $memberdob 已从表单中正确检索，但未根据需要传递到查询中。尝试将您的查询更改为以下内容：

```
$qry="SELECT * FROM members WHERE 
      groupid = $groupid AND memberid = $memberid AND
      membername = '$name' AND memberdob = '$dob'"; 
```

# mysql - 显示 Rownum 问题 MySQL

> ID：11460300
> 
> 赞同：3
> 
> 时间：2012-07-12T20:40:25.253
> 
> 标签：mysql, sql, numbers, rows

我有这个查询：

```
SET @row_num = 0;
SELECT
(SELECT @row_num := @row_num + 1) AS itempurchase_code,
(SELECT supplier_code FROM qa_items_purchases a WHERE a.item_invoicecodesupplier = b.item_invoicecodesupplier GROUP BY supplier_code ORDER BY COUNT(*) DESC LIMIT 1) AS supplier_code, 
(SELECT user_code FROM qa_items_purchases a WHERE a.item_invoicecodesupplier = b.item_invoicecodesupplier GROUP BY user_code ORDER BY COUNT(*) DESC LIMIT 1) AS user_code,
22 AS status_code,
item_invoicecodesupplier AS item_invoicecodesupplier,
(SELECT itempurchase_date FROM qa_items_purchases a WHERE a.item_invoicecodesupplier = b.item_invoicecodesupplier GROUP BY itempurchase_date ORDER BY COUNT(*) DESC LIMIT 1) AS itempurchase_date
FROM qa_items_purchases b 
GROUP BY (item_invoicecodesupplier) 
ORDER BY itempurchase_code; 
```

我得到这个结果： ![在此处输入图像描述](../Images/a9a846736ccd0dcfc1939b248a3def9c.png)

如果您看没有 ( `2`)`itempurchase_code`列，我可以做些什么来按顺序显示数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:45:30.683

如果您的查询包含`GROUP BY`.

```
SET @row_num = 0;
SELECT (SELECT @row_num := @row_num + 1) AS itempurchase_code, *
FROM
(
    SELECT ... -- your original query goes here
) AS T1
ORDER BY itempurchase_code 
```

# .net - .Net HttpHandler 自定义扩展

> ID：11460303
> 
> 赞同：0
> 
> 时间：2012-07-12T20:40:58.207
> 
> 标签：.net, iis, web-config, httphandler

我有一个 HttpHandler，在 system.webServer/handlers 中注册了它（也在 system.web/httpHandlers forr IIS6 中）

```
 <add name="AttachmentHandler" verb="*" path="Attachment.ashx" type="AttachmentHandler"/> 
```

它可以工作，但是，我们希望将扩展名更改为“Attachment.get”之类的其他内容，以便我们可以过滤掉 .get 扩展名，以免对其运行加密（因为它会破坏我们的下载）。

每当我将扩展名更改为 aspx、ashx 或通常的嫌疑人以外的其他内容时，我都会收到 404！

我忘记了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:45:30.880

我打赌你只需要向 IIS 注册 mime/type 扩展名。请参阅：[http ://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx)

实际上再三考虑 - 如果 IIS 7 检查“请求过滤”并确保在“文件名扩展名”选项卡中添加扩展名并设置为允许。这就是我所想的——只是在回应时开枪了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:04:19.860

aspx、ashx 和 asmx 已经映射为 ASP.NET ISAPI 扩展 (Aspnet_isapi.dll)。所以你必须在 IIS 中注册你的新扩展

按照 MSDN hot 上显示的步骤配置处理程序扩展[http://msdn.microsoft.com/en-us/library/bb515343.aspx](http://msdn.microsoft.com/en-us/library/bb515343.aspx)

# ruby - 用于将带引号和未带引号的文本与属性匹配的正则表达式

> ID：11460305
> 
> 赞同：0
> 
> 时间：2012-07-12T20:41:24.570
> 
> 标签：ruby, regex

几乎不需要帮助来形成一个正常工作的正则表达式（在 ruby​​ 中）以匹配带引号或不带引号的字符串。

用户可以提供的可能性：

```
filename.png title:Title
"file name with spaces" title:Title alt:"Alternative text"
"filename.png" title:"Title" 
```

文件名部分应作为一组出现，其他所有内容作为另一组出现，例如

```
=> 1: filename.png 2: title:Title
=> 1: file name with spaces 2: title:Title alt:"Alternative text"
=> 1: filename.png 2: title:"Title" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:47:33.890

对你有用`^(\"[\w\. ]+\"|[\w\.]+)(.*)$`吗？

如果字符串以引号开头，请确保找到另一个，否则文件名中不允许有任何空格。

请注意，我只允许`\w`在您的文件名中使用单词字符、句点和（可选）空格。您可以替换`\w\.`为您想要匹配的任何有效字符（引号除外）。

# ruby-on-rails - RSpec：未定义的方法“登录”

> ID：11460309
> 
> 赞同：0
> 
> 时间：2012-07-12T20:41:35.533
> 
> 标签：ruby-on-rails, rspec, integration-testing

我正在进行 RSpec 测试，检查 a`user`是否为`administrator`，如果是，则显示一些附加字段。当我运行集成规范时，它会说`undefined method login`并失败。有谁知道为什么会发生这种情况？

这是集成规范的相关部分（它适用于非管理员测试）：

```
context 'if logged in as an admin' do
  let(:administrator) { FactoryGirl.create(:administrator) }
  before { login administrator }
  it 'creates an object upon submit' do
    fill_in 'name', with: 'john doe'
    ...
  end
end 
```

在会话助手中，我有以下内容（它在浏览器中工作）：

```
def login(user)
  cookies.permanent[:remember_token] = user.remember_token
  self.current_user = user
end 
```

关于我可能遗漏的任何想法？一切都在浏览器中完美运行，但是当我运行规范时它似乎失败了。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:57:19.670

经过两天的工作，我没有意识到我错过了实用程序方法，doh！

以下是所有工作的原因（在 spec/support/utilities.rb 中）以供将来参考：

```
def login(user)
  visit login_path
  fill_in "E-mail Address",    with: user.email_address
  fill_in "Password", with: user.password
  click_button "Login"
  cookies[:remember_token] = user.remember_token
end 
```

# java - 我如何使用 Jython 线程，因为它们是 Java 线程？

> ID：11460310
> 
> 赞同：6
> 
> 时间：2012-07-12T20:41:39.110
> 
> 标签：java, multithreading, jython

例如，我想在 Jython 中重现此线程，因为我需要从 Java API 启动我的状态机。我对**Jython**没有太多了解。我怎样才能做到这一点？

```
Thread thread = new Thread() {
    @Override
    public void run() {
        statemachine.enter();
        while (!isInterrupted()) {
            statemachine.getInterfaceNew64().getVarMessage();
            statemachine.runCycle();
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                interrupt();
            }
       }            
    }
};
thread.start(); 
```

所以我正在尝试这样的事情：

```
class Cycle(Thread, widgets.Listener):
    def run(self):
        self.statemachine = New64CycleBasedStatemachine()
        self.statemachine.enter()
        while not self.currentThread().isInterrupted():
            self.statemachine.getInterfaceNew64().getVarMessage()
            self.statemachine.runCycle()
            try: 
                self.currentThread().sleep(100)
            except InterruptedException: 
                self.interrupt()
        self.start()

foo = Cycle()
foo.run()
#foo.start() 
```

PS：我已经尝试过 foo.run() 下的评论

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:54:20.857

好吧，撇开您`start()`从方法内部调用该方法这一事实不谈`run()`，这是一个非常糟糕的主意，因为一旦启动线程，如果您尝试再次启动它，您将得到一个线程状态异常，撇开这一点不谈，问题很可能是您使用的是 Jython 线程库而不是 Java 的。

如果您确保按如下方式导入：

```
from java.lang import Thread, InterruptedException 
```

代替

```
from threading import Thread, InterruptedException 
```

如果你纠正了我上面提到的问题，你的代码很可能运行得很好。

使用 Jython 的`threading`库，您需要稍微更改代码，有点像：

```
from threading import Thread, InterruptedException
import time

class Cycle(Thread):
    canceled = False

    def run(self):
        while not self.canceled:
            try:
                print "Hello World"
                time.sleep(1)
            except InterruptedException:
                canceled = True

if __name__ == '__main__':
    foo = Cycle()
    foo.start() 
```

这似乎对我有用。

# node.js - 用于站点的 Nodejs 托管，不是基于 express 吗？:)

> ID：11460316
> 
> 赞同：2
> 
> 时间：2012-07-12T20:41:56.800
> 
> 标签：node.js, module, hosting, express

我在nodejs上做了一个小网站，没有使用任何框架，只包括简单的模块，只为网站的需要。

而现在，部署的时机已经到来——我能找到的所有托管变体都需要 express。

你知道没有吗？

编辑：我忘了提到它使用 mysql，所以我需要 mysql，并且还使用 imagemagick。但是，当然，我可以在特定的托管服务提供商上查看这两个...只需要克服第一个障碍 - 快递的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:48:35.173

试试[http://nodejitsu.com](http://nodejitsu.com)，它比 Heroku 或其他 nodejs 托管站点有更多的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T09:35:22.277

您可以购买付费 VPS（虚拟专用服务器）并根据需要设置环境。那里有很多像digitalocean，亚马逊AWS等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:44:31.820

你试过[heroku](http://www.heroku.com/)吗？

或者您可以通过 Amazon AWS 或 Rackspace 购买服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:13:30.477

取决于你想做多少工作和价格。如果您不介意设置 VPS，可以访问 linode.com。如果您想要简单的 (PaaS)，可以使用 nodejitsu.com、nodester.com 或 nodesocket.com。

# python - 在 Windows 上安装 cython 时出现错误

> ID：11460318
> 
> 赞同：0
> 
> 时间：2012-07-12T20:42:06.530
> 
> 标签：python, windows-7, cygwin, mingw, cython

我试图`cython`安装`windows 7`使用`python setup.py install`. 但是它遇到了一个错误：

```
C:\Cython-0.16>C:\Python27\python setup.py install
running install
running build
running build_py
running build_ext
building 'Cython.Plex.Scanners' extension
C:\MinGW\bin\gcc.exe -mno-cygwin -mdll -O -Wall -IC:\Python27\include -IC:\Pytho
n27\PC -c Cython\Plex\Scanners.c -o build\temp.win32-2.7\Release\cython\plex\sca
nners.o
cc1.exe: error: unrecognized command line option '-mno-cygwin'
error: command 'gcc' failed with exit status 1 
```

我正在使用，`Python 2.7`我已经安装在系统上。我试着用谷歌搜索它。但是没有类似的问题。`MinGW``Cygwin`

我`mingw-get-inst-20120426.exe`以前安装的是`MinGW`4.5版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:23:24.573

`-mno-cygwin`in`Python\Lib\distutils\cygwinccompiler.py`导致此问题：请参阅[使用 cython 和 mingw 编译产生 gcc：错误：无法识别的命令行选项 '-mno-cygwin'](https://stackoverflow.com/questions/6034390/compiling-with-cython-and-mingw-produces-gcc-error-unrecognized-command-line-o)或[http://korbinin.blogspot.com/2013/03/cython-mno-cygwin-problems.html](http://korbinin.blogspot.com/2013/03/cython-mno-cygwin-problems.html) . 我的 Python 发行版（Anaconda）`cygwinccompiler.py`没有。无论如何，在删除类`-mno-cygwin`定义中的所有内容后，`Mingw32CCompiler`您应该能够编译。

# jqgrid - jQgrid中删除的行在重新加载网格或分页时返回

> ID：11460319
> 
> 赞同：0
> 
> 时间：2012-07-12T20:42:08.653
> 
> 标签：jqgrid

我有一个网格，我正在对其进行 delRowData(rowId) 调用，每当使用 .trigger('reloadGrid') 重新加载网格时，删除的行就会返回，我可以访问网格数据并从那里删除它，但是如果可以避免的话，我宁愿不这样做。

需要注意的是，我需要重新加载网格，因为我有自定义子网格选项卡，当行被删除时，这些选项卡会不对齐。当我在 jqgrid 的分页上更改页面时，该行也会返回。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:28:28.050

`.delRowData()`如果您不使用数据类型：“本地”，函数只会从客户端幻灯片中删除该行，一旦您触发网格重新加载，它将再次从服务器获取数据以填充您的网格。因此，您可以先删除服务器端的行，然后在 jquery.ajax 回调函数中调用`.delRowData()`或调用其他类似的函数。

# java - ZK TreeitemRenderer - 未调用渲染（）

> ID：11460320
> 
> 赞同：0
> 
> 时间：2012-07-12T20:42:13.583
> 
> 标签：java, zk

我和这个人战斗了很长一段时间。我的 TreeitemRenderer 如下：

```
public class PermissionTreeRenderer implements TreeitemRenderer<PermissionTreeNode> {

    @Override
    public void render(final Treeitem treeItem, PermissionTreeNode node, int arg) throws Exception {
        final PermissionTreeNode ptn = (PermissionTreeNode)node;
        Treerow treeRow = new Treerow();

        treeItem.setOpen(ptn.isOpen());
        treeItem.appendChild(treeRow);
        PermissionItem current = (PermissionItem) ptn.getData();
        treeRow.appendChild(new Treecell(current.getName()));

    }
} 
```

我的 BasicComposer（扩展 GenericForwardComposer）具有这两个属性

```
private PermissionTreeModel treeModel;
private TreeitemRenderer treeitemRenderer = new PermissionTreeRenderer(); 
```

与吸气剂和二传手。

在我的 .zul 中，我的树如下所示：

```
<tree id="permissionTree" width="100%"
    model="@{win$composer.treeModel}"
    treeitemRenderer="@{win$composer.treeitemRenderer}">
    <treecols>
        <treecol label="Item" width="400px" />
        <treecol label="Wert" />
    </treecols>
</tree> 
```

到目前为止，我通过测试看到的是他加载了模型（他进入了 getter），而不是 treeitemRenderer。无论我做什么，都不会调用渲染方法。

编辑：我的问题是我只填充了根节点（用于测试）并且它需要至少一个子项来绘制......

好吧@dennis：我会像你说的那样尝试使用新的方式，所以这是我的代码：

```
<tree id="permissionTree" width="100%"
    model="@bind(vm.treeModel)" style="text-align:left;">
    <treecols>
        <treecol label="Item" width="400px" />
        <treecol label="Wert" />
        <treecol label="Einfügen" width="100px" />
    </treecols>
    <template name="model" var="node" status="s">
        <treeitem open="@bind(node.open)">
            <treerow>
                <treecell label="@bind(s.index)" />
                <treecell label="@bind(node.data)" />
                <treecell>
                    <hbox>
                        <button label="Index"
                            onClick="@command('showIndex', index=s.index)" />
                        <button label="Delete"
                            onClick="@command('delete', node=node)" />
                        <button label="Add After"
                            onClick="@command('addAfter', node=node)" />
                        <button label="Add Before"
                            onClick="@command('addBefore', node=node)" />
                    </hbox>
                </treecell>
            </treerow>
        </treeitem>
    </template>
</tree> 
```

但它不会再用数据填充我的树了。哦，那个 status 的变量是什么？我需要在其他文件中做准备吗？

编辑：问题解决了，必须申请 org.zkoss.bind.BindComposer

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:05:48.927

两个注意事项：

1.  `treeitemRenderer`已弃用，取而代之的是`itemRenderer`.
2.  检查你`treeModel`的不是`null`因为`Sets the renderer which is used to render each item if Tree.getModel() is not null.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:10:01.563

如果你使用的是 ZK 6，你可以使用比 ZK 5 更容易的新绑定机制，并且你不需要编写渲染器。这是显示外观的代码片段[https://github.com/zkoss/zk/blob/master/zktest/src/archive/bind/basic/collection-index-tree.zul](https://github.com/zkoss/zk/blob/master/zktest/src/archive/bind/basic/collection-index-tree.zul)

# java - 在 Java 程序中禁用 Windows 行为

> ID：11460325
> 
> 赞同：1
> 
> 时间：2012-07-12T20:42:32.490
> 
> 标签：java, windows, swing, protection

我正在为网球俱乐部编写程序。该俱乐部的成员可以在俱乐部的中央计算机上访问该程序。所以只能在电脑上打开程序，成员不能访问其他与操作系统相关的东西，如任务栏、CTRL-ALT-DEL 键等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:49:16.597

前段时间我遇到了完全相同的问题，我找到了两个解决这个问题的方法：

1.  通过禁用所有内容（包括隐藏任务栏、禁用任务管理器...）将 Windows 变为 Kiosk 模式。
2.  [使用类似这样](http://www.kioware.com/download.aspx?m=Download&Product=KiowareLite&cat=2)的第三方 Kiosk 软件。
3.  在可以在 Kiosk 模式下运行的 IE 中运行您的应用程序，但我想这不适用于您，因为您正在运行一个独立的应用程序

我强烈建议选择第二个选项，因为第一个选项根本无法扩展且不可维护。

# algorithm - 用于从开始和结束添加/删除的高效数据结构，并应支持随机访问

> ID：11460328
> 
> 赞同：0
> 
> 时间：2012-07-12T20:42:45.847
> 
> 标签：algorithm, data-structures

它应该是有效的 - 在开始/结束时添加 - 在开始/结束时删除 - 支持随机访问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:53:44.450

使用[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)。空间不足时将尺寸加倍。这将在每个操作的开始/结束时执行插入/删除以及在 O(1) 时间内执行随机访问（摊销）。

在 C++ 中， std::deque 可以在开始/结束时插入/删除以及在 O(1) 中进行随机访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:45:34.520

**[手指树](http://en.wikipedia.org/wiki/Finger_tree)**。欣策，拉尔夫；Paterson, Ross (2006)，“手指树：一种简单的通用数据结构”，函数式编程杂志 16 (2): 197–217。

*   *O(1)*访问添加/删除到开始/结束。
*   *O(log n)*随机访问。

看起来有点像：

![在此处输入图像描述](../Images/a587cce8b6123bebf3785ae4592a1337.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:50:27.293

[Chris Okasaki 的纯功能随机访问列表](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.55.5156)。类似于 Hinze 的手指树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:46:26.923

这听起来有点像一个家庭作业问题，所以在澄清之前避免用勺子喂食。

看看一些[抽象数据类型](http://en.wikipedia.org/wiki/List_of_data_structures#Abstract_data_types)。从那里您可以决定哪种数据类型适合您的要求并选择适当的数据结构实现。

# java - Android：通过 TCP Java 套接字传输文件

> ID：11460329
> 
> 赞同：2
> 
> 时间：2012-07-12T20:42:49.027
> 
> 标签：java, php, android, sockets, file-io

我目前正在尝试将文件从 Android 设备传输到 Java TCP 服务器，但我找不到一个很好的示例来解释我需要实现它的结构。那里有许多解释文件传输的 Java 客户端和服务器示例，但我想确保一旦将 Android 设备扔进去，这是否仍然有效。

我的问题是如何实现这种结构？如果它不起作用，我会更好地通过 HTTP 连接将文件发送到 PHP 服务器吗？我在网上看到了很多关于后一种方法的示例和文档，所以我认为它更可靠。然而，我更喜欢使用 Java 服务器。

该文件由 Android 设备记录的大量坐标组成，然后将发送到服务器。我还没有确定如何存储这些数据，但我最初打算将它们存储在原始文本文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:43:29.613

**设计**

您需要的第一件事是允许您在服务器上运行 Java 代码。

有多种选择。两种最流行的技术是[Glassfish](http://glassfish.java.net/)和[Apache Tomcat](http://tomcat.apache.org/)。

粗略地说，Apache Tomcat 足以用于简单的客户端-服务器通信，如果您需要做更复杂的事情，则使用 Glassfish。两者都允许[Servlet](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Servlets2.html)（本质上是用 Java 编写的自包含服务器类）在服务器端运行。

他们每次收到请求时都会启动 JVM（Java 虚拟机）来处理与客户端的通信。Java servlet 可以在 JVM 内部运行，如果需要，在将响应发送回客户端之前进行一些处理。每个新请求都在 servlet 的新实例中运行。这使得处理多个并发请求更简单（不需要更复杂的线程）。

![粗略的应用服务器设计](../Images/41ae593245fd1c6794580c503ec30832.png)

**网络（向服务器发送数据和从服务器发送数据）**

在联网情况下，客户端可以是 PC、Android 手机或任何其他能够连接到互联网的设备。就服务器而言，如果客户端可以使用 HTTP（它理解的标准协议）进行通信，它并不关心它是什么类型的设备。这意味着用于 PC 桌面客户端-服务器应用程序的解决方案类似于用于电话的解决方案。

您可以使用诸如[Apache HTTP 组件](http://hc.apache.org/)之类的库来更轻松地处理设备和服务器之间的 HTTP 请求和响应。当然，您可以使用 Sockets 编写自己的类来执行此操作，但这将*非常*耗时，特别是如果您以前从未这样做过。

**数据存储**

如果您有时间，我建议您实施某种数据库来存储信息。它们具有许多好处，例如数据恢复机制、用于快速搜索数据的索引、确保数据完整性、更好的数据结构等。如果您决定使用数据库，我推荐[MySQL](http://www.mysql.com/)。它是免费的，更重要的是 - 有据可查。

旁白：[JDBC](http://dev.mysql.com/downloads/connector/j/)可用于使用 Java 与数据库进行通信。

* * *

对内联超链接感到抱歉 - 显然我的声誉不足以发布超过两个！

资料来源：实施类似设计的个人经验。

# php - 按对面选择 mysql

> ID：11460335
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:43:22.567
> 
> 标签：php, mysql, sql

我需要我的 php 从 Opposite 的表中选择一些数据

就像我有桌子一样，他有这样的身份

1 2 3 5

> 我需要这样展示

5 3 2 1 通过选择查询

这是我的代码（不完整）

在 tech.php 中

```
<?PHP require_once('post_technology.php'); ?>
<?PHP $posts= post_technology::find_all();  ?>    
<?PHP foreach($posts as $post): ?>
<!--start post -->
<div class="item">
<h2><a href="technology_post.php?id=<?PHP echo $post->id; ?>"><?PHP echo $post->post_name; ?></a></h2>
<div class="info">
<span class="date"><?PHP echo $post->post_time; ?></span>
<span class="author">by <?PHP echo $post->post_user; ?></span>
<a href="technology_post.php?id=<?PHP echo $post->id; ?>" class="comments">comments</a>
</div>
<a href="technology_post.php?id=<?PHP echo $post->id; ?>"><img src="<?PHP if($post->post_photo == "post_img/"){echo ".\images\no-photo.jpg";}else{ echo $post->post_photo; } ?>" alt="" width="850" height="250" class="image" /></a>
<p><?PHP echo $post->post_e5tsar; ?></p>
<p class="last"><a href="technology_post.php?id=<?PHP echo $post->id; ?>" class="more-link"><span>Read more</span></a></p>
<!-- END .item -->
</div>
<!-- end al post -->
<?php endforeach ; ?> 
```

post_technology.php：

```
class post_technology {
    protected static $table_name="post_technology";
    protected static $db_fields=array('id', 'post_name', 'post_user', 'post_time', 'post_photo', 'post_e5tsar', 'post_full', 'post_table');
    public $id;
    public $post_name;
    public $post_user;
    public $post_time;
    public $post_photo;
    public $post_e5tsar;
    public $post_full;
    public $post_table;
    public $errors=array();

  public static function find_by_id($id=0) {
    $result_array = self::find_by_sql("SELECT * FROM ".self::$table_name." WHERE id={$id}  LIMIT 1");
        return !empty($result_array) ? array_shift($result_array) : false;
  }

  public static function find_by_sql($sql="") {
    global $database;
    $result_set = $database->query($sql);
    $object_array = array();
    while ($row = $database->fetch_array($result_set)) {
      $object_array[] = self::instantiate($row);
    }
    return $object_array;
  } 
```

这是我在 tec.php 中发布的代码 跳到它首先发布新帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:45:07.983

```
SELECT * FROM table ORDER BY id DESC 
```

# c++ - C++ 迭代器双循环

> ID：11460336
> 
> 赞同：0
> 
> 时间：2012-07-12T20:43:27.527
> 
> 标签：c++, loops, stl, iterator

我正在尝试执行以下操作：

myvec 是 Couple 对象的向量（每个对象由 EntityA 和 EntityB 组成）。我正在尝试删除重复的夫妻。无论如何，有时以下代码会因超出范围而崩溃it2。条件很好，迭代器似乎不是

```
if(myvec.size()>1)
for(vector<Couple>::iterator it1 = myvec.begin(); it1+1 !=myvec.end();){
    for(vector<Couple>::iterator it2 = it1+1; it2 !=myvec.end();){
        if((it1->EntityA!=it2->EntityA&&it1->EntityA!=it2->EntityB)||
            (it1->EntityB!=it2->EntityA&&it1->EntityB!=it2->EntityB)){
                it2++;
        }
        else{
            myvec.erase(it2);
        }
    }
    it1++;
} 
```

任何解决方案/替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:56:04.137

尽可能使用现有的库函数。您将需要提供一个二元谓词函数，或为您的对象提供一个`operator<`and 。`operator==``Couples`

```
std::sort(myvec.begin(), myvec.end());
myvec.erase(std::unique(myvec.begin(), myvec.end()), myvec.end()); 
```

但是，最好有一个容器可以自动避免重复，例如`std::set`. [这是一个相关的问题，有一个很好的答案。](https://stackoverflow.com/questions/1041620/most-efficient-way-to-erase-duplicates-and-sort-a-c-vector)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:49:11.967

```
if(myvec.size()>1)
for(vector<Couple>::iterator it1 = myvec.begin(); it1+1 !=myvec.end();){
    for(vector<Couple>::iterator it2 = it1+1; it2 !=myvec.end();){
        if((it1->EntityA!=it2->EntityA&&it1->EntityA!=it2->EntityB)||
            (it1->EntityB!=it2->EntityA&&it1->EntityB!=it2->EntityB)){
                it2++;
        }
        else{
            it2 = myvec.erase(it2);
        }
    }
    it1++;
} 
```

> 返回值 一个随机访问迭代器，指向函数调用擦除的最后一个元素之后的元素的新位置，如果操作擦除了序列中的最后一个元素，则该位置是向量结束。

[http://cplusplus.com/reference/stl/vector/erase/](http://cplusplus.com/reference/stl/vector/erase/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:52:57.517

修改您正在迭代的向量（在这种情况下移动组件并更改向量长度）不是一个好主意。那是你的代码的问题。当您删除向量中间的一个分量时，末端的分量会向左移动，因此向量的末端会移动。这会破坏你的休息条件。

您可以创建一个新的向量空向量，而不是修改现有向量，并将每个要保留的组件添加到其中。这可能会消耗更多的内存（如果你的向量很大，这可能会很有趣），但它应该会为你节省*很多*CPU 时间，因为删除向量中间的一个组件并不是一个便宜的操作。它的所有组件都必须一次又一次地移动一个位置（stl 中存在不存在此问题的容器）。因此，构建一个新的向量并添加到它应该会更好。

# php - 在 .htaccess 文件中组合 URI_REQUEST 和 HTTP_HOST

> ID：11460341
> 
> 赞同：1
> 
> 时间：2012-07-12T20:43:57.463
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite, url-shortener

我想使用 PHP 和 Apache/.htaccess 来缩短链接。

这是我网站上的链接的外观：

[https://mysite.com/item/this-is-a-book-on-toasters](https://mysite.com/item/this-is-a-book-on-toasters)

以下是我希望缩短链接查找上述链接的方式。

[https://ms.co/Im8y2x](https://ms.co/Im8y2x)

目前，这是我的 .htaccess 文件中的内容：

```
RewriteCond %{HTTP_HOST} ^ms\.co$ [NC]
RewriteCond %{HTTPS} =on
RewriteRule ^(.*)$ https://mysite.com/item/$1 [L,R=301] 
```

所以去 ms.co 确实会重定向到 mysite.com。我的问题是我在 mysite.com/item 上的 PHP 代码不知道 6 位字符串（在本例中为`Im8y2x`），因此我无法在数据库中查询 6 位字符串的匹配 URI（在本例中为`/this-is-a-book-on-toasters`）。

我知道我需要在我的 .htaccess 重写规则中添加一些东西我只是不确定它是什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:20:31.097

我想出了我自己的问题。如果您只是省略，`R=301`那么您将保留 URI（在本例中为`Im8y2x`），然后您可以使用脚本语言（在我的示例中为 PHP）访问它，以将其重定向到完整长度的 URI。

所以**代替**这个：

```
RewriteRule ^(.*)$ https://mysite.com/item/$1 [L,R=301] 
```

做这个：

```
RewriteRule ^(.*)$ https://mysite.com/item/$1 [L] 
// the only difference is the lack of ",R=301" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:50:04.830

这个怎么样？

```
RewriteCond %{HTTP_HOST} ^ms\.co/$1 [NC]
RewriteCond %{HTTPS} =on
RewriteRule ^(.*)$ https://mysite.com/item/$1 [L,R=301] 
```

# powershell - PowerShell 短语“| ? {...}”是什么意思？

> ID：11460352
> 
> 赞同：2
> 
> 时间：2012-07-12T20:44:44.453
> 
> 标签：powershell

PowerShell 有一些语法特性，我找不到太多文档。今天我的问题是`? {...}`

例子

```
PS> Get-SPServiceInstance | ? {$_.GetType.toString() -eq $varname} 
```

我明白管道是什么意思。我很确定`$_`用于在某种循环中引用当前项目。

有人可以解释这是什么意思吗？如果有人能指出我可以找到有关 PowerShell 保留符号的地方，那也很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:48:17.580

```
[^_^]16:46:21[1]>get-help ?

Name                              Category  Synopsis
----                              --------  --------
%                                 Alias     ForEach-Object
?                                 Alias     Where-Object
h                                 Alias     Get-History
r                                 Alias     Invoke-History 
```

“？” 是“where-object”的别名

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T08:46:39.777

“？” 是`Where-Object`cmdlet 的别名。`Where-Object`接受一个脚本块（例如'{...}'）并评估其代码。如果代码计算结果为 $true，则当前对象被写入管道并可供链中的下一个命令使用，否则 ($false) 对象将被丢弃。

如需更多帮助，请键入：

```
Get-Help Where-Object -Full 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:48:13.610

? 只是 where-object 的别名。您可以使用 get-alias 命令获取所有已注册别名的列表。

# ruby-on-rails - 在 Rails 3.0.5 中缓存和资产指纹识别 javascript 和 css 文件

> ID：11460357
> 
> 赞同：0
> 
> 时间：2012-07-12T20:44:56.080
> 
> 标签：ruby-on-rails, caching, assets

通过在线阅读文档，我的印象是 rails(v3.0.5) 会自动将版本号添加到通过 javascript_include_tag 和 stylesheet_link_tag 包含的 javascript 和 css 文件中。查看我网页的源代码，我没有看到这些版本号。在视图/布局下的 index.html.haml 文件中，我有以下内容

！！！%html %head %title 测试

```
 = stylesheet_link_tag '/rails/stylesheets/test.css'
 = javascript_include_tag '/rails/javascripts/jquery-1.5.1.min.js' 
```

这是以某种方式禁用的吗？

# android - 如何获取android的触摸码事件

> ID：11460365
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:45:22.690
> 
> 标签：android, shell

有人可以帮助我了解如何获取我可以通过 adb 发送的触摸码事件以在我的 Android 手机（iCS）中启动应用程序。当我尝试`getevent()`时，它给我带来了很多事件。我如何知道我选择了哪个触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:51:50.797

getevent 允许您按设备以及其他内容进行过滤：

```
Usage: getevent [-t] [-n] [-s switchmask] [-S] [-v [mask]] [-d] [-p] [-i] [-l] [-q] [-c count] [-r] [device]
    -t: show time stamps
    -n: don't print newlines
    -s: print switch states for given bits
    -S: print all switch states
    -v: verbosity mask (errs=1, dev=2, name=4, info=8, vers=16, pos. events=32, props=64)
    -d: show HID descriptor, if available
    -p: show possible events (errs, dev, name, pos. events)
    -i: show all device info and possible events
    -l: label event types and names in plain text
    -q: quiet (clear verbosity mask)
    -c: print given number of events then exit
    -r: print rate events are received 
```

因此，请使用您的触摸设备过滤事件，例如

```
getevent /dev/input/event0 
```

# xml - 如何解决 XML::Parser::Expat 错误：“不推荐使用不带 * 的句柄绑定”？

> ID：11460366
> 
> 赞同：1
> 
> 时间：2012-07-12T20:45:23.770
> 
> 标签：xml, perl

在尝试执行以下代码时，我收到以下错误消息：

```
Use of tied on a handle without * is deprecated at C:/Perl/lib/XML/Parser/Expat.pm. 
```

我听说这可以通过安装 XML::Parser v2.41 来解决。如何安装特定版本的 XML::Parser？

```
#!usr/bin/perl
use strict;
use warnings;
use XML::Simple;
use Spreadsheet::ParseExcel;
my $FileName = 'sample.xls';
my $xml_file = 'hello.xml';
my $par=$ARGV[0];
my $xml = XMLin(
    $xml_file,
    KeepRoot => 1,
    ForceArray => 1,
);
my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse($FileName);
die "Parser not Defined", ".\n" if ( !defined $workbook );

    for my $worksheet ( $workbook->worksheets() ) {

        # Find out the worksheet ranges
        my ( $row_min, $row_max ) = $worksheet->row_range();
    my ( $col_min, $col_max ) = $worksheet->col_range();
        for my $row ( $row_min .. $row_max ) {
            for my $col ( $col_min .. $col_max ) {
                my $cell = $worksheet->get_cell( $row, $col );
                next unless $cell;
        $xml->{$par} = $cell->value();

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:58:49.493

您不需要安装特定版本，您只需要安装最新的，以下将执行此操作：

```
cpan XML::Parser 
```

更改日志确实表明此错误已在 2.41 中修复（恰好是最新版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:21:07.170

我找到了答案.. 没有什么特别的安装.. ActivePerl 版本 5.14.2 具有所有受支持和更新的软件包.. 这将起作用。即使是 5.14.1 版本也没有所有更新的包。所以请只使用 5.14.2。

# android - 是否可以配置 GCC 为 android 编译？

> ID：11460368
> 
> 赞同：0
> 
> 时间：2012-07-12T20:45:30.277
> 
> 标签：android, c, mobile

> **可能重复：**
> [Android NDK 使用哪个编译器？](https://stackoverflow.com/questions/6602929/which-compiler-does-android-ndk-use)

我想知道是否可以通过 GCC 编译原生 Android 应用程序。这甚至可能吗？oO

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:08:47.927

原则上这是可能的，但 Android 旨在运行在许多移动平台上，而 gcc 一次只能针对其中一个平台。因此，该应用程序将无法移植，并且说它运行在 ARM Linux（例如）上比运行在 Android 上更接近事实。

[这个](https://stackoverflow.com/q/1002164/1235565)和[那个](https://stackoverflow.com/q/6602929/1235565)问题 还有更多细节。**编辑**：我首先误读了这意味着 NDK 与股票 gcc 不兼容，但仔细一看，它是兼容的。然而，人们通常使用 NDK 本身附带的稍微修改过的 gcc，这就是您通常开发本机应用程序的方式。

关于长期可移植性的警告仍然适用。

# javascript - 获取 jquery 确认的结果以在函数中返回

> ID：11460375
> 
> 赞同：0
> 
> 时间：2012-07-12T20:46:00.873
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我需要从 javascript`confirm`转换为使用 jquery ui 确认对话框。问题是，我需要调用并打开确认对话框 - 我需要根据用户单击的按钮（确定/取消）返回真/假。我知道 javascript 是异步的，但我不知道该怎么做？谁能指出我正确的方向？

```
 $(document).ready(function() {

        $('#dialog:ui-dialog').dialog('destroy');

        $('#confirm-delete-quote').dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                OK: function() {
                    $(this).dialog('close');
                    callback(true);
                },  
                Cancel: function() {
                    $(this).dialog('close');
                    callback(false);
                }   
            }   
        }); 

        $('div.multiRowCheckboxMenu').checkboxMenu({
            menuItemClick: function(text, count) {
                $('#confirm-delete-quote').dialog('open');
//                return confirm('Are you sure you want to ' + text + ' the selected ' + count + ' quote(s)?');
// HOW DO I RETURN WHAT THE USER CLICKED IN THE DIALOG HERE?
                return callback();
            }
        }); 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:50:44.397

你已经正确地开始了，除了你不能期望有一个返回值。

本机`confirm()`是一个阻塞脚本。也就是说，执行线程等待用户的输入。这就是为什么你可以返回一个值。

但是，在使用自定义对话框时，您需要将您打算对返回值执行的任何操作的代码移动到 和 的回调`Ok`中`Cancel`。

```
 buttons: {
            OK: function() {
                $(this).dialog('close');
                callback(true);

                //You know user clicked true, so do something here itself
            },  
            Cancel: function() {
                $(this).dialog('close');
                callback(false);

                //Similarly here
            } 
```

# internet-explorer - -webkit-transform 在 Internet Explorer 中不起作用

> ID：11460377
> 
> 赞同：5
> 
> 时间：2012-07-12T20:46:11.760
> 
> 标签：internet-explorer, css, vendor-prefix

我发现这`-webkit-transform: rotateZ(10deg);`在 Internet Explorer 9 中不起作用。使用 CSS3 可以使用什么来代替它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T20:50:50.543

你试过`-ms-transform:rotateZ(10deg);`吗？

由于`-webkit`也是供应商特定的前缀，您也必须为非 webkit 浏览器添加这些前缀。

（如`-ms`, `-moz`, `-o`）

查看此 CSS3 3D 变换教程了解更多信息： http: [//www.pageresource.com/css3/3d-transforms-tutorial/](http://www.pageresource.com/css3/3d-transforms-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:13:38.790

3D 变换在 IE9 中不起作用。不过，IE10 确实支持它们。

以下是支持的浏览器图表： http: [//caniuse.com/transforms3d](http://caniuse.com/transforms3d)![在此处输入图像描述](../Images/fc24ad0472089f8b29d6b565db8267d9.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T18:11:06.540

您可以在 ie9 - ie中使用***2D 变换：***

```
-ms-transform: rotate(25deg); 
```

# javascript - 使用 javascript 刷新 ContentPlaceHolder

> ID：11460379
> 
> 赞同：0
> 
> 时间：2012-07-12T20:46:15.527
> 
> 标签：javascript, asp.net, master-pages, contentplaceholder

我的 webapp（用 ASP.NET 编写）使用 MasterPages 进行布局。在 Masterpage 的内容区域中，这是我显示页面的 iframe。在导航单击时，我简单地将 ContentUrl（在 contentplaceholder 内）设置为新的 url，它会刷新内容区域。

这是执行此操作的方法：

```
Protected Sub radprojecttree_NodeClick(sender As Object, e As Telerik.Web.UI.RadTreeNodeEventArgs) Handles radprojecttree.NodeClick
    Dim ts As String = e.Node.Attributes("contentpage")
    radpancontentholder.ContentUrl = ts
    If (Not SiteUser Is Nothing) Then
        BSRMaster.navtree.NavTree_InitNodes(Nothing, e.Node)
    End If
End Sub 
```

但我还需要在特定时间在 javascript 中设置 ContentUrl 并显示页面。但是，当我设置 ContentUrl 时，页面不显示。如何在 javascript 中刷新 contentplaceholder？

到目前为止，这是我为 javascript 编写的代码：

```
function goToPage(){
    var strLoc = "";

    switch (AutoExpandOption) {
        case "RestoreLastNode" :
            strLoc = readCookie(strUser + 'LastPageLocation');
            if ((typeof(strLoc) == "undefined") || (strLoc == null)) {
                strLoc = 'Secure/TaskManager.aspx';
                createCookie(strUser + 'LastPageLocation', 'TaskManager.aspx', 100);
            } 
            break;

        case "GoToTaskManager" :
            strLoc = 'Secure/TaskManager.aspx';
            break;

        case "GoToDashboard" :
            strLoc = 'Secure/Dashboards.aspx';
            break;

    }
    if (strLoc != "") {
        var ph = $find('ctl00_radpancontentholder');
        ph._contentUrl = strLoc;
        //document.getElementById('pagecontentframe').src = strLoc;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:34:39.140

$find 在页面完全加载之前被调用，因此没有控件存在

# python - python中的这个旋转程序有什么问题？

> ID：11460381
> 
> 赞同：1
> 
> 时间：2012-07-12T20:46:20.280
> 
> 标签：python, rotation

上下文：（谜机）我想做的是让这段代码运行，以便每次序列通过第一个轮子时第一个轮子都会旋转。

问题是我从互联网上找到了如何使用下面的这个序列进行旋转，但是当我改变变量以便它可以更多地自动匹配时它不起作用。它在`if`函数之后出现错误消息。我已经检查并更改了变量的名称，以使它们更简单和间距。并且无法找出代码中不起作用的内容。因为旋转函数不能使用变量还是什么？

```
import collections

theinput=raw_input('enter letter')
x=0

w=collections.ww=([1,2,3,4,5])

if theinput == 'a':
    w.rotate(x)
    a = w[0]
    x= x+1
    w.rotate(x)
 print a 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:06:22.483

您可能想要使用的容器是[deque](http://docs.python.org/library/collections.html#collections.deque)，据我所知，在 collections 模块中没有 ww 这样的变量。

简单地说，双端队列与列表非常相似，但它经过优化，您可以轻松（有效地）在两端添加和删除项目，这比内置列表的效率略高. deques 还提供了一些列表中没有的附加方法，例如旋转。虽然用列表结合基本操作来做同样的事情真的很容易，但它们并没有针对这类事情进行优化，而 deques 是。但是对于像模拟 Enigma 机器这样简单的事情，坚持使用列表不会对性能产生太大影响。

我猜你正在尝试做类似的事情：

```
import collections
w = collections.deque([1, 2, 3, 4, 5])
print "Deque state is ", w
print "First item in deque is", w[0]
w.rotate(1)
print "Deque state after rotation is ", w
print "First item in deque is", w[0] 
```

这应该打印

```
Deque state is  deque([1, 2, 3, 4, 5])
First item in deque is 1 Deque
state after rotation is  deque([5, 1, 2, 3, 4])
First item in deque is 5 
```

使用负数作为旋转的参数以转向另一种方式

以下是仅使用内置列表的替代实现

```
w = [1, 2, 3, 4, 5]
print "List state is ", w
print "First item in list is", w[0]
x = 1 # x is rotation
w0 = w[:-x]
w = w[-x:]
w.extend(w0)
print "List state after rotation is ", w
print "First item in list is", w[0] 
```

# css - 左侧CSS导航，右侧图片

> ID：11460388
> 
> 赞同：0
> 
> 时间：2012-07-12T20:46:37.280
> 
> 标签：css, css-float

我不完全确定如何描述这个问题，但继承人什么都没有......

我的网站左侧有一个导航..

```
.headerWrapper {
    border: 1px solid #FFFFFF;
    float: left;
    height: 745px;
    margin-left: 40px;
    width: 250px;
} 
```

紧挨着它的是一个里面有一张图片的类....

```
.mainContent {
    float: left;
    padding-left: 5px;
    width: 1000px;
} 
```

图像的宽度为 1000 像素，并在图像宽度属性中设置。

这种布局在我的屏幕上看起来不错，但在其他屏幕上，图像位于 headerWrapper 下方...为什么要这样做，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:49:40.900

下图是因为没有足够的宽度区域来适应导航和图像。对于较小的修复，请尝试使用 的边距、填充（大约 0）`.mainContent`，`.headerWrapper`并`body`并排适合它们。

但是，为了更好地适应所有分辨率，您应该使用[CSS 媒体查询](http://css-tricks.com/css-media-queries/)。

[这](http://jsfiddle.net/Mke7E/3/)是一个小提琴。调整结果窗口的大小并查看动画。

基本上，使用媒体查询，您可以根据窗口大小定义样式，例如，在您的情况下，您可以减小图像的大小以适应低分辨率屏幕等。

希望能帮助到你。:)

# php - 在 PHP 中运行交互式 Shell 脚本

> ID：11460394
> 
> 赞同：1
> 
> 时间：2012-07-12T20:46:53.157
> 
> 标签：php, shell

我有一个在运行时需要输入的 shell 脚本。是否可以在 exec() 期间将输入回显到 shell 脚本中？

普通 shell 中的 IE：$ ./script.sh

输入：你最喜欢的颜色：[输入你的答案]红色

输出：你最喜欢的颜色是红色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:56:09.330

我不确定你到底要问哪一方，但无论如何我都会回答。

在 PHP 中，您可以从 shell 读取用户输入。它可以使用[readline()](http://www.php.net/manual/en/function.readline.php)函数或简单地使用流来完成。根据您使用的 PHP 版本和环境，它可以是 php://input 或 php://stdin。您可以简单地对它们进行 fopen() 并照常阅读。

如果要与正在调用的 shell 脚本进行交互，则需要使用[proc_open()](http://php.net/proc_open)而不是 exec。这有点麻烦，但没有办法解决。该函数将为您提供输入、输出和错误的单独流，您可以根据需要读取它们以完成您的任务。

# python - 将类实例化为可迭代对象

> ID：11460395
> 
> 赞同：0
> 
> 时间：2012-07-12T20:46:53.473
> 
> 标签：python, tornado

我有一个要实例化的类，然后将其传递给 Tornado Web 模板。这两个函数都返回一个列表，但我在使类本身成为可迭代对象时遗漏了一些东西。恐怕这是我做错了根本的事情。我正在进行 REST API 调用，解析返回的 XML 并将一些数据返回到 webapp。这是代码：

API 调用：

```
class GetVMList:

    def __init__(self):
        user = 'contoso\\administrator'
        password = "apassword"
        url = "http://scspf:8090/SC2012/VMM/Microsoft.Management.Odata.svc/VirtualMachines?$filter=VMMServer%20eq%20'scvmm'"

        passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
        passman.add_password(None, url, user, password)
        # create the NTLM authentication handler
        auth_NTLM = HTTPNtlmAuthHandler.HTTPNtlmAuthHandler(passman)

        # create and install the opener
        opener = urllib2.build_opener(auth_NTLM)
        urllib2.install_opener(opener)

        # retrieve the result
        self.response = urllib2.urlopen(url)
        self.data = self.response.read()

    def name(self):
        dom = parseString(self.data)
        raw_xml = dom.getElementsByTagName('d:Name')
        clean_xml = []
        clean_data = []
        for i in raw_xml:
            clean_xml.append(i.toxml())
        for i in clean_xml:
            clean_data.append(i.replace('<d:Name>', '').replace('</d:Name>', ''))
        return clean_data

    def os(self):
        dom = parseString(self.data)
        raw_xml = dom.getElementsByTagName('d:OperatingSystem')
        clean_xml = []
        clean_data = []
        for i in raw_xml:
            clean_xml.append(i.toxml())
        for i in clean_xml:
            clean_data.append(i.replace('<d:OperatingSystem>', '').replace('</d:OperatingSystem>', ''))
        return clean_data 
```

实例化：

```
class ListHandler(tornado.web.RequestHandler):
    def get(self):
        self.render('temp/search.html', data='')

    def post(self):
        vm_list = GetVMList()
        self.render('temp/search.html', data=vm_list) 
```

然后模板包含以下内容：

```
{% for vm in data %}
<li>{{ vm.name }} running {{ vm.os }}</li>
{% end %} 
```

错误是：`TypeError: iteration over non-sequence`。我想我需要`__iter__`在我的课堂上使用，但我不确定我是否完全理解它是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:50:24.090

我相信您[`__iter__`](http://docs.python.org/library/stdtypes.html#container.__iter__)在课堂上缺少定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:55:53.723

我的建议如下：

1.  创建一个类`VM`来存储有关单个 VM 的信息。它`__init__`应该获取您要存储的有关每个 VM 的信息，并将其设置为实例上的属性。如果您不需要任何实际代码来处理有关 VM 的数据，则可以使用 a `collections.namedtuple`，这样可以节省您编写`__init__()`方法的时间。

2.  编写`getVMs()`为生成器，给定用户、密码和 URL，生成一系列`VM`实例。这个结果可以按原样进行迭代，或者如果您需要一个（只需将其传递给`list()`）可以轻松转换为常规列表，或者用于创建将 VM 名称映射到操作系统的字典，反之亦然。

例如（此代码尚未经过测试）：

```
class VM(object):
    def __init__(self, name, os):
        self.name = name
        self.os   = os

def getVMs(user, password, URL):
    passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
    passman.add_password(None, url, user, password)
    auth_NTLM = HTTPNtlmAuthHandler.HTTPNtlmAuthHandler(passman)
    urllib2.install_opener(urllib2.build_opener(auth_NTLM))
    dom = parseString(urllib2.urlopen(url).read())
    for vmnode in dom.getElementsByTagName('d:VM')   # the tag representing a VM
        name = vmnode.getElementsByTagName('d:Name')[0]  # get name of current VM
        name = name.replace('<d:Name>', '').replace('</d:Name>', '')
        os = vmnode.getElementsByTagName('d:OperatingSystem')[0]   # same for OS
        os = os.replace('<d:OperatingSystem>', '').replace('</d:OperatingSystem>', ''))
        yield VM(name, os) 
```

...您还可以为您的 VM 对象提供名称和操作系统的 XML，或整个 VM 的 XML，但此示例实现仅将名称和操作系统作为字符串。

（有更好的方法来获取 DOM 节点的内容，而无需使用空白字符串替换 XML 标记，但我现在没有时间这样做。）

调用它：

```
user = r"contoso\administrator"
pass = "apassword"
url  = ("http://scspf:8090/SC2012/VMM/Microsoft.Management.Odata.svc"
        "/VirtualMachines?$filter=VMMServer%20eq%20'scvmm'")

vmlist = list(getVMs(user, pass, url)) 
```

或者只打印每个信息`VM`而不存储中间列表：

```
for vm in getVMs(user, pass, url):
    print vm.name, vm.os 
```

或者为 VM 实例构建名称字典（假设 Python 的最新版本具有 dict 理解）：

```
vmdict = {vm.name: vm for vm in getVMs(user, pass, url)} 
```

使用生成器模型使其对调用者具有最大的灵活性。即使那个来电者是你，它也会让你的生活更轻松。

# gwt - GWT：如何防止任何画布或绘图区阻止所有鼠标事件到达它前面的所有内容？

> ID：11460396
> 
> 赞同：0
> 
> 时间：2012-07-12T20:46:54.893
> 
> 标签：gwt, canvas, mouseevent, vector-graphics

我迫切需要能够使用放置在绘图表面前的功能性 GWT 小部件，如下所示：

```
absolutePanel.add(canvas); //drawing surface, for drawing other things
absolutePanel.setWidgetPosition(canvas, 0, 0);
absolutePanel.add(myWidget);
absolutePanel.setWidgetPosition(myWidget, 0, 0); //i.e. in front 
```

然而，即使“myWidget”在前面，绘图表面也会阻止所有鼠标事件到达“myWidget”！如何确保“myWidget”仍然可以接收鼠标事件？我迫切需要这个，因为就我而言，我需要能够使用它们后面的绘图表面在小部件之间绘制特殊的连接线。这曾经适用于 Firefox、GWT 2.3 和 Windows XP，尽管我不知道为什么。

我在 IE 和 Chrome (Windows Vista) 和 GWT 2.4 上肯定有这个问题，无论我使用 Canvas 还是 Vaadin gwt-graphics 的 DrawingArea，（虽然我无法测试 Firefox，因为 GWT 插件现在不适合它）。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:50:12.363

您可以使用 DOM.setCapture 将所有输入转发到特定元素。

您可以调用 DOM.setCapture(myWidget.getElement()) 并在稍后将其释放回 DOM.releaseCapture(myWidget.getElement());

# regex - 多次匹配相同的未知字符

> ID：11460397
> 
> 赞同：16
> 
> 时间：2012-07-12T20:46:55.440
> 
> 标签：regex

我有一个似乎无法解决的正则表达式问题。我实际上不知道正则表达式是否可以做到这一点，但我需要在模式末尾匹配一系列字符 n 次。例如。blahblah[AZ]{n} 问题是与结束范围匹配的任何字符都必须完全相同。

例如，我想匹配

*   废话啊啊啊啊
*   胡说八道
*   废话QQQQ

但不是

*   胡说八道
*   废话ZYYYY

是否有一些正则表达式模式可以做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-12T20:49:51.580

您可以使用此模式：`blahblah([A-Z])\1+`

是对第`\1`一个捕获组的反向引用，在这种情况下是`([A-Z])`。并且`+`将匹配该字符一次或多次。要限制它，您可以使用 将 替换`+`为特定的重复次数`{n}`，例如`\1{3}`匹配 3 次。

如果您需要匹配整个字符串，请确保分别以 为前缀`^`和以 结尾`$`，以便模式变为`^blahblah([A-Z])\1+$`

您可以在此处阅读有关[反向引用的](http://www.regular-expressions.info/brackets.html)更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T20:51:17.010

在大多数正则表达式实现中，您可以通过在正则表达式中引用捕获组来完成此操作。对于您的示例，您可以使用以下内容将相同的大写字符匹配五次：

```
blahblah([A-Z])\1{4} 
```

请注意，要匹配正则表达式`n`时间，您需要使用，`\1{n-1}`因为一个匹配项将来自捕获组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T20:51:04.140

`blahblah(.)\1*\b`应该适用于几乎所有语言风格。`(.)`捕获任何东西中的一个，然后`\1*`匹配该（第一个匹配）任意次数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-12T17:29:30.083

blahblah([AZ]|[az])\1+ 这应该会有所帮助。

# iphone - 如何从 Cocos3D 中的 .pod 文件中获取所有节点

> ID：11460401
> 
> 赞同：1
> 
> 时间：2012-07-12T20:47:10.067
> 
> 标签：iphone, ios, 3d, cocos3d

我使用的 .pod 文件没有明确命名的节点，儿子我不能使用：CC3MeshNode *meshNode = (CC3MeshNode* )[self getNodeNamed:@"NodeName"];

我想将 .pod 文件的全部内容存储在 meshNode 中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T11:07:31.880

这就是我得到它的方式，用这段代码替换你的初始化函数`-（void）initializeScene {

```
CC3Camera* cam = [CC3Camera nodeWithName: @"Camera"];

cam.location = cc3v( 0.0, 0.0, 0.6 );

[self addChild: cam];

CC3Light* lamp = [CC3Light nodeWithName: @"Lamp"];
lamp.location = cc3v( -2.0, 0.0, 0.0 );
lamp.isDirectionalOnly = NO;
    [cam addChild: lamp];

CC3PODResourceNode *testBox = [CC3PODResourceNode nodeWithName:@"obj"];

testBox.resource = [CC3PODResource resourceFromFile: @"angry4.POD"];

[self addChild:testBox];

[testBox getNodeNamed: @"obj"].visible = YES;

testBox.touchEnabled = YES;

[testBox setRotation:cc3v(100, 0, 0)];

testBox.location = cc3v(0.0f, 0.0f, 0.0f);

[testBox setScale:cc3v(0.5,0.5,0.5)];

CCActionInterval* LCLoop = [CC3Animate actionWithDuration: 4.1];

 [testBox runAction:[CCRepeatForever actionWithAction:LCLoop]];

[self createGLBuffers];
[self selectShaderPrograms];
[self createBoundingVolumes];

LogInfo(@"The structure of this scene is: %@", [self structureDescription]); 
```

}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:38:43.777

我知道这是一个旧线程，提问者现在可能已经得到了答案。但希望这对其他人有帮助

[1]http://stackoverflow.com/questions/5271197/cocos-3d-pod-file-format-for-iphone-developing[1]

# regex - 用于查找这种格式的数字的正则表达式 num:num:num:num

> ID：11460406
> 
> 赞同：0
> 
> 时间：2012-07-12T20:47:20.833
> 
> 标签：regex, linux, bash, shell

我知道这是基本的，但我不确定，我哪里出错了，以前从未写过正则表达式..

我需要从命令中提取一些输出

```
cmd | grep '[0-9]+:[0-9]+:[0-9]+:[0-9]+' 
```

我需要 grep 格式的一些信息

```
dummy dummy 4:9:93:022 dummy 
```

我怎么做？请让我知道我哪里出错了......

输出将是格式

```
`-+- policy='round-robin 0' prio=2 status=active
|- 6:0:0:136 sdip 135:144 active ready running
`- 5:0:0:136 sdle 67:448  active ready running 
```

我只需要根据 6:0:0:136 删除它....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:05:44.113

加号修饰符是“扩展正则表达式”语法的一部分。这个：

```
a+ 
```

表示“一个或多个 'a' 字符”，是这个基本表达式的简写：

```
aa* 
```

传统上`grep`支持基本正则表达式并`egrep`支持扩展语法。所以这样做：

```
cmd | egrep '[0-9]+:[0-9]+:[0-9]+:[0-9]+' 
```

或者这个（这是同一件事）：

```
cmd | grep -E '[0-9]+:[0-9]+:[0-9]+:[0-9]+' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:06:51.010

您要么需要`+`用反斜杠转义每个，要么使用扩展的正则表达式选项（`-E`或`--extended-regexp`）：

```
cmd | grep '[0-9]\+:[0-9]\+:[0-9]\+:[0-9]\+' 
```

或者：

```
cmd | grep -E '[0-9]+:[0-9]+:[0-9]+:[0-9]+' 
```

> **基本正则表达式 vs 扩展正则表达式**
> 在基本正则表达式中，元字符`?`, `+`, `{`, `|`, `(`, 和`)`失去了它们的特殊含义；而是使用反斜杠版本`\?`, `\+`, `\{`, `\|`, `\(`, 和`\)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:11:49.380

这应该工作

```
cmd | grep -E '([0-9]+:){3}[0-9]+' 
```

# java - NetBeans 平台和 StatusLineElementProvider

> ID：11460411
> 
> 赞同：3
> 
> 时间：2012-07-12T20:47:41.097
> 
> 标签：java, swing, netbeans-7, statusbar, netbeans-platform

我正在使用**NetBeans 平台**和 Java 来开发应用程序。在应用程序的底部有一个 StatusDisplayer，默认情况下始终包含它。在此 StatusDisplayer 中，我添加了一个面板 (StatusBarJPanel)。此 StatusBarJPanel 有两个图像图标，指示网络活动。

我不知道如何在没有活动的情况下隐藏（setVisible(false)）此面板上在运行时创建的这些图标...如何更新 StatusBarJPanel 上的两个图标。

以下是将我的 StatusBarJPanel 添加到 StatusDisplayer 的代码：

```
import java.awt.Component;
import gui.StatusBarJPanel;
import org.openide.awt.StatusLineElementProvider;
import org.openide.util.lookup.ServiceProvider;

@ServiceProvider(service = StatusLineElementProvider.class)

public class StatusBar implements StatusLineElementProvider {

    private StatusBarJPanel statusBarBottomJPanel = new StatusBarJPanel();

    @Override
    public Component getStatusLineElement() {
        return statusBarBottomJPanel;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T14:25:15.570

如果我正确理解您的要求，您应该能够执行以下操作：

```
Collection<? extends StatusLineElementProvider> all = 
    Lookup.getDefault().lookupAll(StatusLineElementProvider.class);
for (StatusLineElementProvider a : all) {
    if (a instanceof StatusBar) {
        StatusBarJPanel ele = (StatusBarJPanel ) ((StatusBar) a).getStatusLineElement();
        ele.doUpdate(); // or whatever method you need to call
    }
} 
```

使用此技术将为您`StatusLineElementProvider`提供与启动时在状态行中注册的相同的 s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T02:50:51.300

你不显示你的`StatusBarJPanel`. 大概它包含两个`JComponent`s，例如`JLabel`，每个都有一个`ImageIcon`。它应该很容易`setIcon(icon)`用于更改`Icon`或`setIcon(null)`使图标消失。[此处](https://stackoverflow.com/a/5494867/230513)和[此处](https://stackoverflow.com/a/4170233/230513)显示的示例可用于测试效果。

顺便说一句，您可以`position`在注释中指定 ，如此[处](http://jnkjava.wordpress.com/tag/statuslineelementprovider/)`@ServiceProvider`所示。

# jquery - 我可以使用尚未注入 DOM 的元素调用 Knockout 的 ko.applyBindings 吗？

> ID：11460412
> 
> 赞同：3
> 
> 时间：2012-07-12T20:47:45.127
> 
> 标签：jquery, knockout.js

我的问题很简单。下面的代码，它似乎工作得很好（点击[这里](http://jsfiddle.net/X8RVP/1/)查看一个工作小提琴），实际上是对 ko.applyBindings 的有效使用，还是有可能出现的副作用和/或问题？

```
var viewModel = {
    sampleText: ko.observable('hello world!')
};

// this HTML would be loaded from the server
var htmlWithBindings = '<b data-bind="text: sampleText"></b>';
var jQueryObj = $(htmlWithBindings);

ko.applyBindings(viewModel, jQueryObj.get(0));
$('#main').append(jQueryObj); 
```

这种方法的好处是，您可以在实际将其添加到 DOM**之前**将所有绑定应用到 HTML ，因此您不会在绑定生效前短暂看到空 HTML 的情况下获得这种效果。有什么理由不这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:14:49.167

Knockout 中有与绑定中使用的计算 observables 相关的处置逻辑，当它认为元素不再是 DOM 的一部分时将运行。在您的情况下，您可能会无意中遇到此逻辑，并且可能会释放绑定。

这是一个示例，您将一个元素绑定到一个可观察对象，然后该可观察对象将作为元素`value`绑定的一部分进行更新`select`。 [http://jsfiddle.net/rniemeyer/X8RVP/4/](http://jsfiddle.net/rniemeyer/X8RVP/4/)

经过一些进一步的研究，我认为您的技术不一定会在每种情况下都会失败，但我会意识到我上面列出的事情。

您可以选择在应用绑定时隐藏元素，或对主要部分使用命名模板（在脚本标签中），以便元素在绑定之前不显示。

命名模板有助于您永远不会看到您的“模板”像使用控制流绑定 ​​( `if`, `with`, `foreach`) 或什至只是带有绑定的普通元素一样呈现。它不一定能阻止您试图阻止的问题，但它肯定会有所帮助，因为绑定将在元素添加到 DOM 时立即发生。考虑使用命名模板的这个：http: [//jsfiddle.net/rniemeyer/X8RVP/5/](http://jsfiddle.net/rniemeyer/X8RVP/5/)与没有[http://jsfiddle.net/rniemeyer/X8RVP/6/](http://jsfiddle.net/rniemeyer/X8RVP/6/)的这个。在 setTimeout 中应用绑定以模拟页面加载和 DOM 准备就绪的一些延迟。

# java - edu.umd.cs.findbugs.annotations 已弃用？我应该为空注释使用什么？

> ID：11460413
> 
> 赞同：4
> 
> 时间：2012-07-12T20:47:50.880
> 
> 标签：java, null, annotations

我是 Java 新手，刚刚发现了 @Nullable 和其他此类注释，所以我尝试了它们。

我首先尝试了 Eclipse 中包含的那些，但它们不允许我将它们用于字段，这让我认为有些字段可能为空，而它们显然不能。

顺便说一句，我默认使用这个东西来制作所有@NonNull。

然后，我尝试了 findbugs（edu.umd.cs.findbugs.annotations），但显然，整个事情都已被弃用（[http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/package-摘要.html](http://findbugs.sourceforge.net/api/edu/umd/cs/findbugs/annotations/package-summary.html) )。

我应该用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:34:28.820

当某些东西被标记为`@Deprecated`时，Javadoc 中通常会为已弃用的声明提供替代方案。

在这种情况下，HTML 格式的 Javadoc 让你失望了：它没有显示替代的完全限定类名，所以你会看到类似

> 可空：已弃用。- 使用 Nullable 代替

这不是很有帮助。

所以让我们看一下[Nullable.java 的源代码](http://code.google.com/p/findbugs/source/browse/trunk/findbugs/src/java/edu/umd/cs/findbugs/annotations/Nullable.java)：

```
/**
 * The annotated element could be null under some circumstances.
 * 
 * ...
 * 
 * @deprecated - use {@link javax.annotation.Nullable} instead. 
 **/ 
```

啊哈：`javax.annotation.Nullable`我们应该使用它。但这是一个更大的问题。我建议你看这里：[我应该使用哪个 @NotNull Java 注释？](https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use)

# entity-framework-4 - 使用 asp.net mvc 和实体框架编辑外键表

> ID：11460414
> 
> 赞同：1
> 
> 时间：2012-07-12T20:47:58.180
> 
> 标签：entity-framework-4, asp.net-mvc-4, foreign-key-relationship, editorfor

我有一个实体 Kajak：

```
public class Kajak
    {
        [HiddenInput(DisplayValue = false)]
        [Key]
        public int KajakID { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public virtual ICollection<KajakImage> KajakImages { get; set; } 
    } 
```

与 KajakImages 有一对多的关系：

```
public class KajakImage
{
    [Key]
    public int ImageID { get; set; }
    public string Name { get; set; }
    public string Data { get; set; }
    public string MimeType { get; set; }
    public int FK_KajakID { get; set; }
    [ForeignKey("FK_KajakID")]
    public Kajak Kajak { get; set; }
} 
```

我想创建一个编辑视图，可以在同一个窗口中进行编辑。

我真的无法绕开它。到目前为止，我已经做到了这一点：

```
public ViewResult Edit(int kajakID)
    {
        Kajak kajak = _kajakRepository.Kajaks.FirstOrDefault(p => p.KajakID == kajakID);
        return View(kajak);
    } 
```

但我不知道如何创建“editorfor”kajakimages。

```
@model Timskajakker.Domain.Entities.Kajak
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<h2>
    Redigér kajak</h2>
@using (Html.BeginForm("Edit", "AdminKajak"))
{
    @Html.LabelFor(model => model.Name)
    @Html.EditorFor(model => model.Name)

    foreach (var kajakImage in Model.KajakImages)
    {
        @Html.EditorFor(model => model.KajakImages.Name) // doesn't work.. what to do here?? 
    }
    <input type="submit" value="Gem" />
    @Html.ActionLink("Fortryd og vend tilbage", "Index")
} 
```

我正在使用 asp.net mvc 4 和实体框架。

我想为 Kajak 属性创建一个编辑选项，除了所有附加的 kajakimages 的 id 和 name 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:01:06.137

我认为最好的解决方案是创建一个自定义[EditorTemplate](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)。您必须在名为（或文件夹）下的文件夹中创建一个名称为`KajakImage.cshtml`（必须是要渲染的模型的名称）的局部视图文件：`EditorTemplates``Views/YourControllerName``Shared`

```
@model Timskajakker.Domain.Entities.KajakImage

@Html.HiddenFor(model => model.ImageID)

@Html.LabelFor(model => model.Name)
@Html.EditorFor(model => model.Name) 
```

`Kajak`然后只需使用以下命令在您的编辑视图中呈现此模板：

```
@using (Html.BeginForm("Edit", "AdminKajak"))
{
    @Html.LabelFor(model => model.Name)
    @Html.EditorFor(model => model.Name)

    @Html.EditorFor(model => model.KajakImages)

    <input type="submit" value="Gem" />
    @Html.ActionLink("Fortryd og vend tilbage", "Index")
} 
```

您不需要编写`foreach`循环，因为当您传入 s 的集合时，ASP.MVC 将自动为每个项目呈现一次局部视图`KajakImage`。

`@Html.HiddenFor(model => model.ImageID)`此处是为了确保您`KajakImage`在发布请求时获得模型绑定器实例化的对象，这些对象具有正确的原始键值与`Name`属性一起设置。（集合的其余属性`KajakImage`将无效/空/`null`因为您的视图中没有它们的表单字段。）

# api - Mac App Store 搜索 API？

> ID：11460415
> 
> 赞同：5
> 
> 时间：2012-07-12T20:48:02.953
> 
> 标签：api, search, mac-app-store

有谁知道在哪里可以获得 Mac App Store Search API？我已经知道这个网站 -> [http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)，并且有一个很棒的 AP​​I 可以搜索 iOS App Store . 搜索结果以 JSON 格式返回。

但是在哪里可以为 Mac App Store 获得这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T20:59:59.273

该 API 将满足您的需求 - 尝试使用 entity 进行查询`macSoftware`。

这是一个查询 Sparrow（电子邮件客户端）的示例：

[http://itunes.apple.com/search?entity=macSoftware&term=Sparrow](http://itunes.apple.com/search?entity=macSoftware&term=Sparrow)

# java - 在 ArrayList 中，如果子目录已经存在于列表中，如何删除子目录？

> ID：11460417
> 
> 赞同：2
> 
> 时间：2012-07-12T20:48:04.137
> 
> 标签：java, arraylist

我有一个`ArrayList<String>`包含目录的路径，例如：

```
/home, /usr... 
```

如果列表已经包含该元素的父目录，我想编写一个代码，该代码将从列表中删除所有路径。例如：如果列表包含：

```
/home
/home/games 
```

然后， /home/games 应该被删除，因为它的父 /home 已经在列表中。下面是代码：

```
for (int i = 0; i < checkedList.size(); i++) {
            File f = new File(checkedList.get(i));
            if(checkedList.contains(f.getParent()));
            checkedList.remove(checkedList.get(i));
} 
```

上面`checkedList`是一个`String arrayList`。

**当列表包含**：

```
/home
/home/games/minesweeper 
```

现在扫雷文件夹不会被删除，因为它的父游戏不在列表中。如何也删除这些元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:49:34.047

另一种可能的解决方案是使用`String.startsWith(String)`.

* * *

但当然，您可以利用`File`类的父功能来处理相关目录和其他特殊性。遵循解决方案的草案：

```
List<String> listOfDirectories = new ArrayList<String>();
listOfDirectories.add("/home/user/tmp/test");
listOfDirectories.add("/home/user");
listOfDirectories.add("/tmp");
listOfDirectories.add("/etc/test");
listOfDirectories.add("/etc/another");

List<String> result = new ArrayList<String>();

for (int i = 0; i < listOfDirectories.size(); i++) {
    File current = new File(listOfDirectories.get(i));
    File parent = current;
    while ((parent = parent.getParentFile()) != null) {
        if (listOfDirectories.contains(parent.getAbsolutePath())) {
            current = parent;
        }
    }
    String absolutePath = current.getAbsolutePath();
    if (!result.contains(absolutePath)) {
        result.add(absolutePath);
    }
}

System.out.println(result); 
```

这将打印：

```
[/home/user, /tmp, /etc/test, /etc/another] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:03:05.383

您可以进行一些字符串操作来获取每个字符串的基本目录。

```
int baseIndex = checkedList.get(i).indexOf("/",1);
String baseDirectory = checkedList.get(i).substring(0,baseIndex);
if(baseIndex != -1 && checkedList.contains(baseDirectory))
{
    checkedList.remove(checkedList.get(i));
} 
```

这将获得第二个'/'的索引并提取字符串直到那个斜线。如果第二个斜杠存在，则检查列表是否包含基本字符串，如果存在 mtach，则删除当前字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:55:09.903

您可以从字符串中减去根并将其添加到哈希集中。

例如：

如果你有 /home/games 你可以使用字符串减法或正则表达式或任何你想要的东西从字符串中减去“home”。

在将“home”添加到哈希集之前，您必须检查它是否已经添加：

```
 if (hashset.Contains("home"))
             {
                //then it s already added
              }

    else

     {
           hashhset.add("home");
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:01:06.500

您应该依次检查每个列表项的每个父项。

我将假设您的列表包含规范化的绝对​​路径`File`对象：

```
for (int i = 0; i < checkedList.size(); i++) {
    File curItem = checkedList.get(i);
    for (
        File curParent = curItem.getParent( );
        curParent != null;
        curParent = curParent.getParent( )
    )
    {
        if(checkedList.contains( curParent ) )
        {
            checkedList.remove( curItem );
            break;
        }
    }
} 
```

实际上，我会用`ListIterator`

```
for (ListIterator iter = checkedList.iterator(); iter.hasNext(); )
{
    File curItem = iter.next();
    for (
        File curParent = curItem.getParent( );
        curParent != null;
        curParent = curParent.getParent( )
    )
    {
        if(checkedList.contains( curParent ) )
        {
            iter.remove( );
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T21:04:34.133

会做相反的工作吗？如果在您的 ArrayList 中找不到父级，请将值添加到最终输出 ArrayList？

```
for (int i = 0; i < checkedList.size(); i++) {
            File f = new File(checkedList.get(i));
            if(!checkedList.contains(f.getParent()));
            yourOutputList.Add(checkedList.get(i));
} 
```

# jquery - 如何通过单击站点导航使jQuery将页面从#div滚动到#div？

> ID：11460419
> 
> 赞同：0
> 
> 时间：2012-07-12T20:48:14.470
> 
> 标签：jquery, scroll, slider

好的，我正在开发一个具有固定#sidebar 和非固定#main_content 的网站。现在，我需要在这里做的是通过单击位于侧边栏的站点导航，使页面的#main_content 部分从 div 滚动到 div。因此，如果用户按下“联系人”按钮，页面的#main_content 会自动滚动到#contact 分区。

我在网上搜索并找到了大约 100 个不同的 jQuery 滑块，但没有像我需要的那样。任何链接，教程，想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T20:50:00.113

使用锚超链接并使用 jQuery 滑动到它们。

[http://djpate.com/2009/10/07/animated-scroll-to-anchorid-function-with-jquery/](http://djpate.com/2009/10/07/animated-scroll-to-anchorid-function-with-jquery/)

```
$('html,body').animate({
    scrollTop: $("#myLink").offset().top
}, 'slow'); 
```

# javascript - jqplot 在鼠标悬停时突出显示一条线

> ID：11460421
> 
> 赞同：2
> 
> 时间：2012-07-12T20:48:18.827
> 
> 标签：javascript, jquery, jqplot

我正在使用 jqplot 生成多个线图，并希望向其中添加突出显示功能。详细地说，一旦你的鼠标在这条线上，它会突出显示自己（改变颜色）。我在条形图中看到了这个功能（[示例](http://www.jqplot.com/deploy/dist/examples/barTest.html)）。有没有办法将此引入线图？

这是我的代码的[演示](http://jsfiddle.net/JWhmQ/353/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:37:14.547

至少据我所知，此功能不是由`jqPlot`. 因此，“最简单”的方法是自己添加。不久前我做过类似的事情。我的方法是使用该`jqplotMouseMove`事件并在那里添加适当的功能。

**我的方法的想法很简单：**

1.  获取鼠标点到线段的距离。
2.  然后，如果它小于线的宽度 - 你找到了你的线。
3.  在荧光笔的画布 ( ) 上绘制不同颜色的线条`.jqplot-highlight-canvas`，从而创建高亮效果 - 对于此画布，我们需要荧光笔插件。

[上述想法的工作示例在这里。](http://jsfiddle.net/Boro/WFm42/)

***PS：**感谢 Jonas Raoni Soares Silva[的点对线距离功能](http://jsfromhell.com/math/dot-line-length)，它节省了我很多时间，而且效果很好。*

# php - 在提交之前将值从多个 iframe 传递到父窗口

> ID：11460424
> 
> 赞同：0
> 
> 时间：2012-07-12T20:48:33.297
> 
> 标签：php, javascript, iframe, hash

在使用 location.hash 提交之前，我将值从 1 个 iframe 传递到父窗口，它适用于 1 个 iframe，但我有 4 个 iframe，我需要将 iframe 分开：

Iframe1 我有：

```
<script language="javascript">
    function update(val) {
     parent.location = document.referrer + "#" + val
}
</script> 
```

家长我有：

```
<script type="text/javascript">
var val="";
function passVal(){
    if(location.hash != val){
    val = location.hash;
    val = val.substring(1, val.length);
    document.form.val.value=val;
   }
}
setInterval(passVal,200);
</script> 
```

在 1 个 iframe 中完美运行 - 如何在提交之前将 4 个不同 iframe 的值传递到 1 个父窗口？例如：

```
iframe 1 - VAL1 -> parent.window [field1]
iframe 2 - VAL2 -> parent.window [field2]   
iframe 3 - VAL3 -> parent.window [field3]
iframe 4 - VAL4 -> parent.window [field4] 
```

所有在提交表格之前。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:06:18.303

框架 - 这里是框架 1

```
function update(val) {
   parent.location = document.referrer + "#field1:" + val
} 
```

家长

```
var val="";
function passVal(){
    if(location.hash != val){
    val = location.hash;
    val = val.substring(1, val.length);
    var parts=val.split(":");
    document.formname.elements[parts[0]].value=parts[1];
   }
}
setInterval(passVal,200); 
```

# python - Python getline（）问题

> ID：11460427
> 
> 赞同：0
> 
> 时间：2012-07-12T20:48:41.150
> 
> 标签：python, file, getline

我正在尝试从文件中获取数据并将它们存储在向量中，但我发现了一些困难。这就是我的 Python 脚本的样子：

```
from numpy import array, append
from linecache import getline
print 'read file'
t = []
f = open('file.dat', 'r')
b = getline('f',4).split()
t.append(int(b[0])) 
```

运行后我得到信息：

```
t.append(int(b[0]))
IndexError: list index out of range 
```

当我检查 b 似乎是空的：

```
>>b
[] 
```

在 file.dat 的第 4 行我有数字 4，它只是这一行中的一个条目。有人怎么知道出了什么问题？我正在使用 2.7 Python 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:52:57.040

我相信你的错误是你错过了使用[`linecache.getline`](http://docs.python.org//library/linecache.html?highlight=getline)你应该做的事情：

```
from numpy import array, append
from linecache import getline
print 'read file'
t = []
b = getline('file.data',4).split()
t.append(int(b[0])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:53:41.773

第一个参数`getline`是文件名。

```
b = getline('file.data',4).split() 
```

# c# - Sharepoint 客户端对象模型设置 ModifiedBy 字段

> ID：11460431
> 
> 赞同：5
> 
> 时间：2012-07-12T20:49:07.153
> 
> 标签：c#, .net, sharepoint, com

我正在尝试使用客户端对象模型更新 Sharepoint 讨论板中的“ModifiedBy”字段。通过更改“编辑者”和“作者”字段，我可以更改列表视图中显示的“修改者”。但是，一旦您单击讨论帖子，那里出现的“ModifiedBy”字段（上面有图片的那个）不会反映更改。经过实验，我发现我需要更改以更正此问题的字段称为“MyEditor”。不幸的是，这个字段是只读的。

在下面的代码中，我尝试将字段的只读设置更改为 false。当我在第一个块底部的 ExecuteQuery() 行之后查看 Visual Studio 调试器中的 MyEditor 字段时，它表明 ReadOnlyField 值实际上已设置为 false。

```
 sharepointContext.Load(discussionList);
        sharepointContext.ExecuteQuery();
        var fields = discussionList.Fields;
        sharepointContext.Load(fields);
        sharepointContext.ExecuteQuery();
        var field = fields.GetByInternalNameOrTitle("MyEditor");
        field.ReadOnlyField = false;
        field.Update();
        sharepointContext.Load(field);
        sharepointContext.ExecuteQuery(); 
```

上面的代码执行没有问题。问题来自下一个块：

```
 //...Code to initialize discussionItem...
        discussionItem["MyEditor"] = 0;
        discussionItem["Editor"] = 0;
        discussionItem["Author"] = 0;
        discussionItem["Body"] = "Testing";
        discussionItem["Title"] = "Hello Worlds";
        discussionItem.Update();
        sharepointContext.Load(discussionItem);
        sharepointContext.ExecuteQuery(); 
```

当代码到达第二个块底部的 ExecuteQuery() 时，它会抛出带有以下消息的 ServerException：

```
 Invalid data has been used to update the list item. 
        The field you are trying to update may be read only. 
```

为了确保 MyEditor 字段是引发异常的字段，我注释掉了我设置它的行并再次运行代码。一切正常。我不明白出了什么问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:05:07.217

如果有人需要按名称查找用户，则如下所示：

```
 private static FieldUserValue GetUser(ClientContext clientContext, string userName)
    {
        var userValue = new FieldUserValue();
        var newUser = clientContext.Web.EnsureUser(userName);
        clientContext.Load(newUser);
        clientContext.ExecuteQuery();
        userValue.LookupId = newUser.Id;
        return userValue;
    } 
```

返回值可以通过 item["Author"] 设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:58:50.163

ModifiedBy 和 CreadtedBy 从 Author 和 Editor 自动计算，您只需更改 Author 和 Editor 字段，如下所示：

```
 using (var clientContext = new ClientContext(@"http://server"))
        {
            var web = clientContext.Web;
            var lst = web.Lists.GetByTitle("Discus");

            var item = lst.GetItemById(2);
            item["Author"] = 3;
            item["Editor"] = 2;
            item.Update();
            clientContext.ExecuteQuery();                        

            Console.WriteLine("done");
        } 
```

# windows-phone-7 - 样式按钮在列表框中不起作用

> ID：11460435
> 
> 赞同：0
> 
> 时间：2012-07-12T20:49:17.840
> 
> 标签：windows-phone-7

我为列表框创建了一个用户控件。用户将通过选择按钮内的文本框转到不同的页面。我必须使用文本框，因为比赛需要结束。我想在单击期间更改背景颜色。但是，按钮样式不起作用。有人可以向我展示解决我的问题的示例或链接或提示吗？

以下是我的风格：

```
<UserControl.Resources>
    <Style x:Key="btnCall" TargetType="Button" >
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">

                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <DoubleAnimation To="1" Duration="0:00:00.5" Storyboard.TargetName="NormalBackground" Storyboard.TargetProperty="Opacity"/>
                                        <DoubleAnimation To="0" Duration="0:00:00.5" Storyboard.TargetName="HoverBackground" Storyboard.TargetProperty="Opacity"/>
                                        <DoubleAnimation To="0" Duration="0:00:00.1" Storyboard.TargetName="PressedBackground" Storyboard.TargetProperty="Opacity"/>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimation To="0" Duration="0:00:00.5" Storyboard.TargetName="NormalBackground" Storyboard.TargetProperty="Opacity"/>
                                        <DoubleAnimation To="0" Duration="0:00:00.5" Storyboard.TargetName="HoverBackground" Storyboard.TargetProperty="Opacity"/>
                                        <DoubleAnimation To="1" Duration="0:00:00.1" Storyboard.TargetName="PressedBackground" Storyboard.TargetProperty="Opacity"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <!--<Border Name="NormalBackground" CornerRadius="3" BorderBrush="Fuchsia" BorderThickness="1" />-->
                        <Border x:Name="NormalBackground" BorderThickness="0" />
                        <Border x:Name="HoverBackground"  Opacity="0" CornerRadius="3" BorderBrush="Yellow" BorderThickness="3" Background="Gray" />
                        <Border x:Name="PressedBackground" Opacity="0" CornerRadius="8" BorderBrush="Black" BorderThickness="1" Background="LightSteelBlue" />

                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Left" />

                    </Grid>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
 </UserControl.Resources> 
```

我将列表框放在网格中，如下所示：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

        <ScrollViewer Style="{StaticResource ScrollViewerStyle1}" Background="#00E23162">
            <ListBox x:Name="lstCall" HorizontalAlignment="Left" Margin="6,6,0,0"   VerticalAlignment="Top" Width="360"     >
                <ListBox.ItemTemplate>
                    <DataTemplate>                          

                        <Button  Width="460" Height="70" Style="{StaticResource btnCall}"  ClickMode="Press" Click="Detail_Click" >
                            <Button.Content >

                                <StackPanel Orientation="Horizontal" Height="65" Width="400">
                                    <Image Source="{Binding Type}" Width="35" Height="35"/>

                                    <TextBlock  Width="240" Height="65" Text="{Binding summary}" TextWrapping="Wrap"
                                             Style="{StaticResource PhoneTextAccentStyle}"   />

                                    <Button Width="135" Height="65" ClickMode="Press" Click="Action_Click" Style="{StaticResource btnCall}"
                                            Visibility="{Binding isVisibility, Converter={StaticResource VisibilityConverter}}">
                                        <Button.Content>                                               
                                            <TextBlock Width="200" Height="65" Text="{Binding ActionCaption}" 
                                                       Style="{StaticResource LabelStyle_20}"     />
                                        </Button.Content>
                                    </Button>

                                </StackPanel>
                            </Button.Content>
                        </Button>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer>
    </Grid> 
```

# c# - 递归菜单生成器 C#

> ID：11460438
> 
> 赞同：1
> 
> 时间：2012-07-12T20:49:29.180
> 
> 标签：c#, .net, recursion

我需要为课程列表网站构建一个面包屑/路径

例如课程有不同的菜单项，我需要显示如下

*   第01章/
*   Chapter01/Lesson01/
*   Chapter01/Lesson01/Exam01/
*   Chapter01/Lesson01/Exam01/问题03/
*   Chapter01/Lesson01/Exam01/问题04/项目01
*   Chapter01/Lesson02/
*   第02章
*   Chapter02/Lesson01

以上只是项目如何排列在路径中的示例

为了想出这个我有物品清单

```
Public Class Item
{
    public string Level
    {
        get;
        set;
    }

    public string Title
    {
        get;
        set;
    }
} 
```

该列表可以创建如下

```
IList<Item> Items = new List<Item>();
Items.Add (new Item {Level = "0", Title = "Chapter01"});
Items.Add (new Item {Level = "1", Title = "Lesson01"});
Items.Add (new Item {Level = "2", Title = "Exam01"});
Items.Add (new Item {Level = "3", Title = "Question 03"});
Items.Add (new Item {Level = "3", Title = "Question 04"});
Items.Add (new Item {Level = "4", Title = "Item 01"});
Items.Add (new Item {Level = "1", Title = "Lesson02"});

Items.Add (new Item {Level = "0", Title = "Chapter02"});
Items.Add (new Item {Level = "1", Title = "Lesson01"}); 
```

父项的级别始终为 0，子项的级别为 1、2、3 等...

任何人都可以指导我在 C# 中提出一个递归函数来实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:09:14.453

我上次这样做的方法是将菜单项实际组合成一个菜单项。例如：

```
public class MenuItem{
    public string Caption {get; set;}
    public int Level {get; set; }
    public List<MenuItem> MenuItems {get; set;}
    public MenuItem(string caption){
        Caption = caption;
        MenuItems = new List<MenuItem>();
    }
} 
```

然后当你构建你的菜单结构时，你从一个`List<MenuItem>`包含顶级 MenuItem 对象的开始，然后是`MenuItems.Add(new MenuItem("Question 1"))`.

建立层次结构后，您可以使用以下方式输出它：

```
private void DisplyMenuStructure(List<MenuItems> menu){
    foreach(MenuItem currentItem in menu){
        if (currentItem.MenuItems.Count>0){
            DisplayMenuStructure(currentItem.MenuItems);
        } else {
            Console.WriteLine(currentItem.Caption);
        }
    }
} 
```

要填充层次结构，请使用以下内容：

```
public void BuildMenumStructure(){
    //Instantiate a File menu
    MenuItem root = new MenuItem("File");
    root.Level = 0;
    //Add some menu items
    root.MenuItems.Add(new MenuItem("New"){Level = 1});
    root.MenuItems.Add(new MenuItem("Edit"){Level = 1});
    //Build a save menu and add it in
    MenuItem saveMenu = new MenuItem("Save");
    saveMenu.MenuItems.Add(new MenuItem("Save As"){Level = 2});
    saveMenu.MenuItems.Add(new MenuItem("Save"){Level = 2});
    root.MenuItems.Add(saveMenu);
} 
```

# html - 图像周围的 CSS 环绕列表，没有背景出现在后面

> ID：11460445
> 
> 赞同：1
> 
> 时间：2012-07-12T20:49:41.883
> 
> 标签：html, css

我查看了所有类似的问题，这些问题表明：

1.  将溢出：自动添加到`<ul />`.
2.  `<li />`向左浮动。

两者都会导致列表显示在图像下方或图像左侧的列中。我希望列表环绕图像。这可能吗？

在示例中，我使用了边框而不是背景 [http://jsfiddle.net/jvh6N/](http://jsfiddle.net/jvh6N/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:58:41.953

浮动有什么问题`<li>`？你只需要让它成为第一个`<li>`让其他人环绕它：

```
 li:first-child { float: left; } 
```

[http://jsbin.com/ekonuf/](http://jsbin.com/ekonuf/)

# center - 求圆弧区域的圆心角

> ID：11460454
> 
> 赞同：2
> 
> 时间：2012-07-12T20:50:20.263
> 
> 标签：center, trigonometry, geometry, angle, segment

我试图根据 2 个百分比将一个圆圈分成 2 个段。类似于饼图，但使用单个垂直切片创建段。我找到了这个面积公式，但是当我知道半径和面积时，我无法求解 C（中心角）：

(R(平方) / 2) * ( ((pi/180)* C) - sin(C) )

一旦我得到 CI，就可以使用 cos、tan 和 R(radius) 在圆上找到我的 x 和 y 点。

起初我以为我可以简单地乘以 180 * (smallerPercent / 50)，但我意识到这是一个“不”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T03:13:35.370

这是牛顿方法的一个很好的应用。下面的 C 程序可以很容易地修改来解决这个问题。您可以更改它以计算所需面积占圆面积的百分比，或单独计算所需面积并输入。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

double chordangle(double r,double a)
{
  double x = a/2.0;
  do{
    x = ((x * r * r / M_PI) - (sin(x) * r * r / 2.0) - a ) / 
      (r * r / M_PI - (r * r / 2.0) * cos(x));
  }while(((x * r * r / M_PI) - (sin(x) * r * r / 2.0 ) - a) > 1e-11);
  return x;
}

int main()
{
  double a,r;
  printf("Enter radius: ");
  if(scanf("%lf",&r)!=1)
    {
  printf("You must enter a number.\n");
  exit(1);
    }
  printf("Enter desired area of slice: ");
  if(scanf("%lf",&a)!=1)
    {
      printf("You must enter a number.\n");
      exit(1);
    }
  printf("The angle in radians is %lf.\n",chordangle(r,a));
  printf("The angle in degrees is %lf.\n",chordangle(r,a)*180.0/M_PI);      
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:24:44.417

我已经更新了这个答案（原文在最底部）。

您已经知道圆的半径、面积（PI * r 平方）和您尝试构建的线段面积（smallerPercentage / 100 * areaOfCircle）。

如果我正确理解了这个问题，没有公式可以计算出创建给定区域和半径的线段所需的角度。

![在此处输入图像描述](../Images/f3122f6337612ded4ab47bd211e999ef.png)

然而，一切都没有丢失。

如果您知道角度，您还可以使用已有的公式计算出该区域。A = 0.5 * r 平方 * ( ((PI/180) * Θ) - sin(Θ)) 其中 Θ 是角度。

因此，唯一的解决方案是开始对 Θ 进行有条理的猜测，看看计算出的面积是否与您的预期相符（在一定的公差范围内）。

并且假设百分比将小于 50（并且大于 0），则：0 < 角度 < 180。

所以，我第一次猜测是 90 度。如果面积太大，请再次猜测 45，太小尝试 135。每次将大小减半，并从前一个角度加上或减去它。继续缩小范围，直到您获得的区域在您期望的区域的容差范围内。少于 10 次的猜测应该会让你到达那里。

我认为这被称为“1/4 Tank 量油尺问题”：参见： http: [//mathforum.org/library/drmath/view/61752.html](http://mathforum.org/library/drmath/view/61752.html)

我希望这有帮助。

* * *

在我正确理解您要做什么之前，这是我的原始答案：

我不确定我是否完全理解你想要达到的目标，但你可以像这样计算出你想要的角度（以度为单位）：

```
smallAngle = 360/100 * smallerPercentage;
largeAngle = 360 - smallAngle; 
```

您可以随时将度数乘以 (PI/180) 以获得弧度。

# css - 将鼠标悬停在css中的另一个div上时，我可以更改div的不透明度吗？

> ID：11460461
> 
> 赞同：0
> 
> 时间：2012-07-12T20:50:28.670
> 
> 标签：css

我有一个包含无序列表的 div 和一个包含图像的 div。当我将鼠标悬停在列表上时，我希望能够使图像变得透明。

这可能使用css，还是我需要使用jQuery？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:02:15.983

如果您的图像在列表之后，您可以执行此操作 - [http://jsfiddle.net/WYqSu/](http://jsfiddle.net/WYqSu/)

**HTML**

```
<div>
    <ul>
        <li>list item</li>
        <li>list item</li>
        <li>list item</li>
        <li>list item</li>
    </ul>
</div>

<p> some text </p>

<div id="image">
    <img src="http://lorempixel.com/200/100" />
</div> 
```

**CSS**

```
div:hover ~ div#image {
    opacity: .2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:04:44.350

如果 image-div 包含在 ul-div 中，则可以使用 CSS，否则需要使用 JS。

```
<div id="divtop">
 <ul>
  <li>listitem</li>
 </ul>
 <div id="divinner">
  <img />
 </div>
</div>

<style>
 #divtop:hover #divinner>img
 {
    /* set opacity */
 }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T00:20:02.480

我使用 javascript 来实现类似的结果：

```
javscript:

function changeOpacity (opacity) {
        document.getElementById("element_ID_to_alter").style.opacity = opacity;
    }

HTML:

<div id="hover_div" onmouseover="changeOpacity('.3')" onmouseout="changeOpacity('1.0')"> 
```

我对此结果感到非常满意。我希望它可以帮助你！

# c# - 通过 jQuery/AJAX 从 CS Helper 文件返回生成的标记

> ID：11460463
> 
> 赞同：1
> 
> 时间：2012-07-12T20:50:35.913
> 
> 标签：c#, jquery, .net, razor, webmatrix

我在 Helper 文件（位于 root\App_Code\myHelper.cs 目录中）中生成了一些标记：

```
@helper GenerateMarkup(int id)
{
   <div class="dude">
      <a href="awesome.cshtml">Wow</a>
   </div>
} 
```

而且，在我的结果页面中，我有一个应该去的地方。它应该进入 Container 内部`div`：

```
<div class="ContainerDIV">

</div> 
```

我制作了一个小 jQuery 来尝试向Helper 文件中的方法发送`int`一个ID (`GenerateMarkup(int id)``ContainerDIV`

这是我的 jQuery 内容（位于`ContainerDIV`div 中（请原谅我的 jQuery 的糟糕之处，我对它很陌生）：

```
 <div id="ContainerDIV" class="Bordered">
        <script>
                $('.MoreInformationOnPosition').click(function () {
                    var elID = $(this).attr('id');

                    $.ajax({
                        type: "POST",
                        url: "JTS.cs/GenerateMarkup",
                        data: elID,
                        contentType: "application/html",
                        dataType: "html",
                        success: function (msg) {
                            // Replace the div's content with the page method's return.
                            $("#ContainerDIV").attr(msg.d);
                        }
                    });
                });
        </script>
    </div> 
```

它只是不工作。我已经在 Visual Studio 2012 中尝试过 PageInspecter，但找不到任何“问题”，但我知道我做错了什么。我相信这是一个非常独特的情况，这可以解释为什么我在网上找不到任何关于此的内容。

我怎样才能做到这一点？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:06:00.040

你从助手那里得到结果吗？如果是，请尝试以下方法： $("#ContainerDIV").html(msg.d);

# css - IE9 中的 z-index 分层，例如，检查了堆叠上下文（我认为）

> ID：11460464
> 
> 赞同：0
> 
> 时间：2012-07-12T20:50:38.730
> 
> 标签：css, internet-explorer, z-index

我正在做一个投资组合项目。我在相对定位的 div 中有一个相对定位的图像。使用 z-index，我在其顶部有一个固定位置的 div，其中有三个浮动 div，每个 div 都有一个在 css 中指定的光标 url。所有这些都在另一个 div 中。目的是在图像顶部显示上一个、播放和下一个光标，以控制图像的显示。

它在 Safari、Firefox、Chrome 中运行良好。它在 IE（9,8 或 7）中不起作用。光标在图像上时不显示。不知何故，固定位置 div 落在图像后面，即使它的 z-index 说它应该在上面。

我已经阅读了很多这方面的内容。我已经考虑了堆叠上下文，并且我相信它们在我的代码中是可以的。我研究过让所有对象都具有相对定位，以防固定和相对定位创建不同的堆叠上下文。这并没有解决它。我研究了怪癖和标准模式。似乎没有任何效果。

我在这里上传了我的问题的剥离示例页面：

[http://bigflannel.com/portfolio/ie-test](http://bigflannel.com/portfolio/ie-test)

非常感谢任何帮助。我进行了 8 个小时的调试并卡住了。

的HTML

```
<div id ="website">

    <div id="media-panel">
        <img id="image0" class="image" src="http://bigflannel.com/portfolio/admin/albums/album-5/lg/fk01117.jpg">
    </div><!-- #media-panel -->

    <div id="navigation-panel">
        <div id="left-area"></div>
        <div id="play-pause-area"></div>
        <div id="right-area"></div>
    </div><!-- #navigation-panel -->

</div><!-- #website --> 
```

CSS

```
#website {
    position: relative;
    z-index: 0;
}
#media-panel {
    position: relative;
    height: 600px;
    z-index: 1;
}
.image {
    position: relative;
    max-height: 600px;
    max-width: 600px;
    z-index: 0;
}
#navigation-panel {
    position: fixed;
    z-index: 9998;
    top: 0;
    left: 0;
    width: 1500px;
    height: 900px;
}
#left-area {
    position: relative;
    float: left;
    cursor: url(http://bigflannel.com/development/mobileApp/bigflannel-portfolio/images/prevL.cur), auto;
    width: 500px;
    height: 900px;
}
#play-pause-area {
    position: relative;
    float: left;
    cursor: url(http://bigflannel.com/development/mobileApp/bigflannel-portfolio/images/playL.cur), auto;
    width: 500px;
    height: 900px;
}
#right-area {
    position: relative;
    float: left;
    cursor: url(http://bigflannel.com/development/mobileApp/bigflannel-portfolio/images/nextL.cur), auto;
    width: 500px;
    height: 900px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:39:14.763

不幸的是，IE 在光标方面非常有问题。这实际上不是 z-index 问题。分层按预期工作。您可以通过在#navigation-panel 上放置背景颜色来测试它，因为它会覆盖图像。它与 IE 和光标的行为有关。

解决方案：（对于IE9）

```
/* Background with no opacity */
#navigation-panel {
    background: rgba(0, 0, 0, 0);
} 
```

您可能可以使用过滤器修复早期版本的 IE。

# javascript - JavaScript：将整数与一长串字符串相关联

> ID：11460471
> 
> 赞同：0
> 
> 时间：2012-07-12T20:51:04.280
> 
> 标签：javascript

我从 JSON 接收字符串，需要将它们与整数相关联。因此，例如我目前使用这种方法：

```
var foo = "This is my string";
var bar;

if (foo === "This is my string"){
   bar = 3000;
} else if (foo === "Some other string"){
   bar = 30001;
} 
```

问题是我需要关联大约 50 个字符串，而且似乎可以以更有效的方式完成这一巨大的 if/else 语句块。

有没有什么方法可以让这些关联更加简洁高效？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T20:54:08.927

尝试使用一个对象，如下所示：

```
dict = {
     "This is my string": 3000,
     "Some other string": 30001,
     etc
}

bar = dict[foo] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T20:54:42.527

创建地图：

```
var lookup = {
    "This is my string": 3000,
    "Some other string": 30001
}; 
```

并设置`bar`为表中的正确值：

```
var bar = lookup[foo]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:56:25.547

> 请参阅我关于可能重复[替代一百万个 IF 语句的](https://stackoverflow.com/q/10029089/1048572)[详细答案](https://stackoverflow.com/a/10029116/1048572)

在你的情况下，它会像

```
var bar = {
   "This is my string": 3000,
   "Some other string": 30001,
   ...
}[foo]; 
```

# c++ - 跨 c++ 翻译单元的初始化

> ID：11460473
> 
> 赞同：2
> 
> 时间：2012-07-12T20:51:16.170
> 
> 标签：c++, gcc, g++

或者我有两个文件，每个文件都有一个全局初始化。一个取决于另一个。

简化示例：

文件1.h：

```
#include <string>
extern const std::string PREFIX; 
```

文件 1.cpp：

```
#include "file1.h"
const std::string PREFIX  = "prefix,"; 
```

文件 2.cpp：

```
#include "file1.h"
std::string MSG = PREFIX + "body";
int main(){} 
```

我这样编译它们：

```
/usr/local/bin/g++-4.6.2 -c -Wall -g -o file1.o file1.cpp
/usr/local/bin/g++-4.6.2 -c -Wall -g -o file2.o file2.cpp
/usr/local/bin/g++-4.6.2 -Wall -g  -o example file1.o file2.o 
```

当我运行它时，它会出现段错误。gdb 跟踪：

```
Starting program: example

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff7b7ae0b in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&) ()
  from /usr/local/lib/gcc/x86_64-unknown-linux-gnu/4.6.2/libstdc++.so.6 
(gdb) bt
#0  0x00007ffff7b7ae0b in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&) ()
   from /usr/local/lib/gcc/x86_64-unknown-linux-gnu/4.6.2/libstdc++.so.6
#1  0x00000000004009b5 in std::operator+<char, std::char_traits<char>, std::allocator<char> > (__lhs=Traceback (most recent call last):
   File "/usr/local/lib/gcc/x86_64-unknown-linux-gnu/4.6.2/../../../../share/gcc-4.6.2/python/libstdcxx/v6/printers.py", line 587, in to_string
     return ptr.lazy_string (length = len)
RuntimeError: Cannot access memory at address 0xffffffffffffffe8
, __rhs=0x400af0 "body") at /usr/local/lib/gcc/x86_64-unknown-linux-gnu/4.6.2/include/c++/bits/basic_string.h:2346
#2  0x000000000040095f in __static_initialization_and_destruction_0 (__initialize_p=1, __priority=65535) at file2.cpp:3
#3  0x000000000040098b in _GLOBAL__sub_I_MSG () at file2.cpp:6
#4  0x0000000000400ab6 in __do_global_ctors_aux ()
#5  0x00000000004006e3 in _init ()
#6  0x00007ffff7ffa5a0 in ?? ()
#7  0x0000000000400a45 in __libc_csu_init ()
#8  0x00007ffff72dcbe0 in __libc_start_main () from /lib/libc.so.6
#9  0x00000000004007c9 in _start () 
```

反正有没有做我想做的事情（请记住，这是一个过于简化的例子）？还是我受编译器/链接器选择的初始化顺序的支配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T20:56:01.000

您需要使前缀字符串在其他字符串之前出现。一种方法是将其更改为 C 字符串

```
// header
#include <string>
extern const char * const PREFIX;

// .cpp file
const char * const PREFIX = "prefix,"; 
```

另一种方法是从函数返回前缀并`PREFIX()`在之前使用的地方使用`PREFIX`.

```
// header
inline const string& PREFIX() { 
  static const string value = "prefix,";
  return value;
} 
```

最后，只是一个提示：所有大写字母的名称仅在大多数编码约定中用于宏，所以我会避免变量和函数使用这样的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:57:58.707

我猜这是因为代码试图以错误的顺序初始化你的全局变量。有一个[关于初始化顺序的问题](https://stackoverflow.com/q/1005685/1468366)，它的答案应该证明是有用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T00:38:31.697

这显然不是一个可移植的解决方案，但对于**gcc**，您可以使用[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)- 使用`__attribute__`语法。即`__init_priority__ (priority)`属性。初始化优先级跨翻译单元。[关联](http://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Attributes.html#C_002b_002b-Attributes)

# c++ - map.find 和指向向量的指针的奇怪行为

> ID：11460475
> 
> 赞同：3
> 
> 时间：2012-07-12T20:51:22.867
> 
> 标签：c++, pointers, map, vector

我有一个成对的映射到一个向量的向量，看起来像这样：

```
std::map<std::pair<uint16, uint16>, std::vector<std::vector<uint32> > > 
```

映射填充在类的构造函数中。此类提供了一个公共方法，该方法返回指向`std::vector<std::vector<uint32> >`（映射值部分）的指针，如下所示：

```
typedef std::pair<uint16, uint16> key;
typedef std::vector<std::vector<uint32> > value;

value* FindValues(key someKey) {
    std::map<key, value>::const_iterator it;
    it = someStore.find(someKey);
    if (it != someStore.end()) 
        return &(value)it->second;
    return NULL;
} 
```

这是它变得奇怪的时候。在对 FindValues 返回的向量进行迭代时，所有子向量都有一个大的负数（例如 -1818161232）作为它们的第一个值。但是，如果我使用如下函数：

```
value FindValues(key someKey) {
    std::map<key, value>::const_iterator it;
    return someStore.find(someKey)->second;
} 
```

...然后该值是正常的。这只发生在**所有**子向量的索引 0 处的值。但是，使用第二种方法时，如果找不到密钥（原因很明显），我的应用程序会出现段错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:13:43.637

如果 return 语句真的看起来像

```
return &(value) it->second; 
```

那么有几件事可以说：

1.  如果编译器接受它而不发出诊断消息，它就会损坏。在 C++ 中，将内置一元`&`应用于非引用强制转换的结果是非法的。该`(value) it->second`表达式产生一个临时对象，一个右值。您无法通过使用获取此类对象的地址`&`。代码甚至不应该编译。

2.  如果您的编译器接受它作为某种奇怪的“扩展”，那么这意味着您确实在获取并返回*临时对象*的地址。然后立即销毁临时对象，使您的指针指向垃圾。难怪你会通过这样的指针看到一些奇怪的值。

3.  对某种类型的转换的需求源于您曾经`const_iterator`存储搜索结果的事实。显然你做了一个错误的尝试来抛弃`it->second`你的`(value)`演员阵容。正确的方法可能如下所示

    ```
     return const_cast<value *>(&it->second); 
    ```

    但你为什么首先使用`const_iterator`？正确的做法是使用常规`iterator`，然后做

    ```
     return &it->second; 
    ```

    没有任何额外的演员表。

4.  你需要决定`FindValue`你要写什么样的方法。如果这应该是一个常量方法，它应该返回`const value *`并声明为`const`

    ```
    const value* FindValues(key someKey) const 
    ```

    当然，`const_iterator`在这种情况下你应该使用 inside。

    如果您`FindValue`应该是非常量方法，那么您可以保留当前声明

    ```
    value* FindValues(key someKey) 
    ```

    但使用普通`iterator`的里面。

    你现在拥有的是两者的某种混合体，这就是让你求助于奇怪演员的原因。（事实上​​，你的班级可能需要这两个版本。一个可以通过另一个实现。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:14:59.540

您`typedef`的 s 非常具有误导性。这是错误的行：

```
return &(value)it->second; 
```

看似简单的 C 风格类型转换实际上是对`std::vector`的复制构造函数的调用。这一行可以重写为

```
return &std::vector<std::vector<uint32> >(it->second) 
```

当您将这一行重写如下时，奇怪结果的原因变得显而易见：

```
std::vector<std::vector<uint32> > result (it->second);
return &result; 
```

您实际上是在返回一个本地对象的地址，该对象将在函数返回后立即销毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:06:55.010

所以，这个变种会更好。

```
typedef std::pair<uint16, uint16> key;
typedef std::vector<std::vector<uint32> > value;

value* FindValues(key someKey) {
    std::map<key, value>::const_iterator it;
    it = someStore.find(someKey);
    if (it != someStore.end()) 
        return &const_cast<value&>(it->second);
    return 0;
} 
```

# css - 调整窗口大小时居中背景图像的最小边距

> ID：11460477
> 
> 赞同：1
> 
> 时间：2012-07-12T20:51:37.077
> 
> 标签：css, positioning, background-image, margins

我有一个使用 CSS 垂直和水平居中的背景图像。它看起来很棒，只要窗口足够大以显示背景图像，它就可以正常工作。

当窗口大小调整为小于 bg 图像时，就会出现问题。发生这种情况时，背景图像继续居中，但我需要在背景图像的顶部和左侧保持最小边距。BG图像是900px x 700px，我使用的代码是：

```
#main_wrapper {
    background-image: url(../images/background.jpg);
    position:relative;
    width:900px;
    height:700px;
    left:50%;
    top:50%;
    margin-left:-450px;
    margin-top:-350px;
} 
```

当窗口足够大以允许它时，任何解决方案都需要继续将背景图像水平和垂直居中，但是当窗口比背景图像短时，顶部的最小边距和左侧的最小边距当窗口比背景图像窄时。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:33:14.260

如果这是在您`<body>`的 .

然后把你身体里剩下的东西包起来，`<div>`让它成为`position: relative`。

我认为这应该会产生您想要的结果。

# c# - 可以下载文件但不能上传然后使用相同的服务...WCF

> ID：11460479
> 
> 赞同：0
> 
> 时间：2012-07-12T20:51:42.920
> 
> 标签：c#, asp.net-mvc-3, wcf, web-services

我的 MVC3 应用程序调用 WCF 服务来下载/上传文件。WCF 服务调用一个老式的 asmx 服务来获取所请求文件的 base 64 字符串（下载），或接收文件的 base 64 字符串（上传）。我可以将任何大小的文件下载到我的机器上。

当我尝试上传文件时，出现可怕的最大数组长度错误：

```
 The maximum array length quota (16384) has been exceeded while reading XML data. 
   This quota may be increased by changing the MaxArrayLength property on the
   XmlDictionaryReaderQuotas object used when creating the XML reader. 
```

令人困惑的部分是我使用与上传文件相同的服务来下载文件。所以我应该在两者上都得到那个错误，但我没有。我的 web.config 中有这个：

```
 <readerQuotas maxDepth="32" maxStringContentLength="2147483647" 
       maxArrayLength="2147483647" 
                      maxBytesPerRead="4096" maxNameTableCharCount="2147483647"/> 
```

那么为什么我可以下载文件但不能上传它们呢？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:29:16.747

您需要确保在调用应用的 app/web.config 文件和 WCF 服务的 web.config 文件中都设置了 maxArrayLength。如果托管在 IIS 7+ 中，您可能还需要调整 IIS 请求筛选设置。在 IIS 中，转到要配置的服务器/站点/应用程序的请求过滤功能。在这里，右窗格选项中有一个编辑功能设置操作。选择它，然后在此处也设置最大允许内容长度值。

# linux - Linux bash - 如何为 I/O 重定向创建软链接

> ID：11460480
> 
> 赞同：1
> 
> 时间：2012-07-12T20:51:48.093
> 
> 标签：linux, bash

我正在使用`xclip`以下命令将 shell 输出复制到剪贴板：

```
cat filename.ext | xclip -i -selection clipboard 
```

i 为管道之后的命令创建软链接，即`xclip -i -selection clipboard`，以使其简短。例如，执行与上述相同但更短的操作

```
cat filename.ext | clip 
```

如果有人能详细说明应该如何做，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:12:49.587

`xclip`可以在命令行取文件，所以不需要使用`cat`. shell 函数可以将其简化为一个简单的命令：

```
function clip () {
    xclip -i -selection clipboard $1
}

clip filename.ext 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:01:21.723

您想要的是“别名”，而不是软链接：http: [//tldp.org/LDP/abs/html/aliases.html](http://tldp.org/LDP/abs/html/aliases.html)

```
alias clip="xclip -i -selection clipboard" 
```

# mule - 骡子 3.3.0 NoSuchMethodException javax.sql.DataSource

> ID：11460482
> 
> 赞同：1
> 
> 时间：2012-07-12T20:51:58.783
> 
> 标签：mule

我有一个基于 maven 的 mule 项目，它最初是使用 mule 版本 3.2.1 创建的。当我将 pom.xml 更新为`mule.version`从`3.2.1`to更改`3.3.0`时，运行我的应用程序时出现以下异常。

我通过启动 `org.mule.MuleServer -config src/main/app/mule-config.xml' 在 Eclipse 中运行该应用程序

这适用于 3.2.1。如果我编辑我的 pom.xml 并将 mule.version 改回 3.2.1，它会继续运行良好。但是，我确实需要一些包含在 3.3.0 中的错误修复。

有任何想法吗？

```
[07-12 16:36:01] ERROR MuleServer [main]: 
********************************************************************************
Message               : could not find constructor on class: interface javax.sql.DataSource, with matching arg params: 
Type                  : org.mule.api.lifecycle.InitialisationException
Code                  : MULE_ERROR-71999
JavaDoc               : http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/lifecycle/InitialisationException.html
Object                : org.mule.config.bootstrap.SimpleRegistryBootstrap@12133926
********************************************************************************
Exception stack is:
1\. could not find constructor on class: interface javax.sql.DataSource, with matching arg params:  (java.lang.NoSuchMethodException)
  org.mule.util.ClassUtils:408 (null)
2\. could not find constructor on class: interface javax.sql.DataSource, with matching arg params:  (org.mule.api.lifecycle.InitialisationException)
  org.mule.config.bootstrap.SimpleRegistryBootstrap:169 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/lifecycle/InitialisationException.html)
********************************************************************************
Root Exception stack trace:
java.lang.NoSuchMethodException: could not find constructor on class: interface javax.sql.DataSource, with matching arg params: 
    at org.mule.util.ClassUtils.instanciateClass(ClassUtils.java:408)
    at org.mule.util.ClassUtils.instanciateClass(ClassUtils.java:447)
    at org.mule.util.ClassUtils.instanciateClass(ClassUtils.java:419)
    at org.mule.config.bootstrap.SimpleRegistryBootstrap.registerObject(SimpleRegistryBootstrap.java:325)
    at org.mule.config.bootstrap.SimpleRegistryBootstrap.registerObjects(SimpleRegistryBootstrap.java:292)
    at org.mule.config.bootstrap.SimpleRegistryBootstrap.initialise(SimpleRegistryBootstrap.java:165)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1536)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1409)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:574)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.mule.config.spring.SpringRegistry.doInitialise(SpringRegistry.java:89)
    at org.mule.registry.AbstractRegistry.initialise(AbstractRegistry.java:109)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.createSpringRegistry(SpringXmlConfigurationBuilder.java:116)
    at org.mule.config.spring.SpringXmlConfigurationBuilder.doConfigure(SpringXmlConfigurationBuilder.java:73)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.config.builders.AutoConfigurationBuilder.autoConfigure(AutoConfigurationBuilder.java:101)
    at org.mule.config.builders.AutoConfigurationBuilder.doConfigure(AutoConfigurationBuilder.java:57)
    at org.mule.config.builders.AbstractConfigurationBuilder.configure(AbstractConfigurationBuilder.java:46)
    at org.mule.config.builders.AbstractResourceConfigurationBuilder.configure(AbstractResourceConfigurationBuilder.java:78)
    at org.mule.context.DefaultMuleContextFactory.createMuleContext(DefaultMuleContextFactory.java:80)
    at org.mule.MuleServer.initialize(MuleServer.java:375)
    at org.mule.MuleServer.run(MuleServer.java:284)
    at org.mule.MuleServer.start(MuleServer.java:271)
    at org.mule.MuleServer.main(MuleServer.java:142)

********************************************************************************

[07-12 16:36:01] ERROR MuleServer [main]: 
********************************************************************************
* A Fatal error has occurred while the server was running:                     *
* could not find constructor on class: interface javax.sql.DataSource, with    *
* matching arg params:  (java.lang.NoSuchMethodException)                      *
*                                                                              *
* The error is fatal, the system will shutdown                                 *
******************************************************************************** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:11:36.887

确保类路径上的所有 Mule 工件都是 3.3.0 版。似乎您的版本不匹配，因为 mule-core-3.3.0.jar 中 SimpleRegistryBootstrap 的第 169 行被注释掉了。

# excel - 基于百分比随机化销售的excel公式

> ID：11460484
> 
> 赞同：0
> 
> 时间：2012-07-12T20:52:27.097
> 
> 标签：excel

我正在创建一个现金流模型。我有 28 处房产，我想计算它们的每月费用。我想在第一年（随机月份）出售 10% 的房产，第二年 15%，第三年 25%，第四年 30%，第五年 12%，第六年 8%。

每个月的所有条目都有一个基本成本（维护费），如果房产被出售，将产生减去销售税的利润。

有什么公式可以用来自动化吗？我做了 84 个月的每月现金流量，所以手动输入需要一段时间。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T06:12:43.207

如果总是四舍五入到最接近的整数，那么六年后仍将保留第一个属性，因此将 8.4 向上舍入到 9 以避免这种情况，并添加一些扣除销售税的财产价值，例如，公式如下：

```
=IFERROR(IF(MATCH(ROW()-1,J$5:J$13,0),J$4*COUNTIF(J$5:J$13,$A2),""),"") 
```

在 B2 中向下复制到 G13 可能会节省一些劳动力，假设 J5:O5 已填充`=RANDBETWEEN(1,12)`并且该公式已向下复制到 J3:O3 中显示的单元格数：

![SO11460484 示例](../Images/bd24475a984f141a781ed5fda72c3c9a.png)

# azure - 如何将现有 Linux 虚拟机添加到 Azure 中的虚拟网络

> ID：11460485
> 
> 赞同：1
> 
> 时间：2012-07-12T20:52:28.767
> 
> 标签：azure, azure-virtual-network

我在 Azure 上的 Linux 虚拟机中配置了一个 CMS 解决方案，并希望将此 VM 添加到我的 Virtual Netork。我无法将现有的 Linux 虚拟机添加到虚拟网络。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:13:37.543

由于首先创建了 Linux VM，然后创建了虚拟网络 (VNet)，因此您的 Linux VM 可能无法看到虚拟网络。（这是 Linux VM 的一个已知问题）

您可以按照给定的步骤来实现您的目标：

1.  删除当前 VM（这仍会将 VHD 存储在 Azure 存储中）
2.  现在转到虚拟机 > 磁盘，找到您要使用的操作系统磁盘，然后选择删除磁盘。这不会删除 VHD，只会将其取消注册为磁盘
3.  现在从您保存的 VHD 创建一个操作系统映像，该映像用于以前的 VM
4.  现在从 OS 映像创建一个 VM (#3)

这样您就可以准备好您的 VM，现在可以将其添加到 VNet。

现在因为您使用 Linux VM 与 VNet 连接，所以存在一个问题。您无法使用 Linux VM 执行此操作，因为 Windows Azure 管理器门户不支持此功能，因此您需要使用 PowerShell 命令（在 Windows 上）或跨平台工具（在 Mac 和 Linux 上）来实现您的目标。

以下是您将用于使用 OS 映像和虚拟网络创建新 VM 的命令：

$vm = New-AzureVMConfig -Name $vmname -InstanceSize ExtraSmall -ImageName $image | 添加-AzureProvisioningConfig -Linux –LinuxUser $linuxUser -Password $adminPassword | 设置-AzureSubnet -SubnetNames $subnet

新 AzureVM -ServiceName $cloudSvcName -AffinityGroup $affinitygroup -VNetName $vnetname -VMs $vm

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T20:56:03.743

> [http://www.zdnet.com/blog/microsoft/microsoft-to-enable-linux-on-its-windows-azure-cloud-in-2012/11508](http://www.zdnet.com/blog/microsoft/microsoft-to-enable-linux-on-its-windows-azure-cloud-in-2012/11508)
> 
> 迄今为止，微软一直在拒绝客户向 Azure 添加持久性 VM 的请求，希望让客户从头开始开发 Azure 应用程序......
> 
> 在 Azure 上运行 Linux 一直是企业客户的一个惊人的大需求，我的联系人说......
> 
> The Register 今年早些时候报道称，微软正在自己的实验室中测试在 Azure 上运行 Linux 的能力，而这种能力的推出还有几个月的时间。

那里有大量的 VPS 服务，您可以在其中运行您想要的任何操作系统，非常可靠且非常便宜。显然，Azure 不是其中之一 :)

# android - WebKit/WebView tap/onclick 默认高亮（Android Ice Cream Sandwich）

> ID：11460487
> 
> 赞同：4
> 
> 时间：2012-07-12T20:52:49.607
> 
> 标签：android, webview, webkit, highlight, tap

我正在开发一个 webview 应用程序（4.0.3），冰淇淋三明治 webview 有一件烦人的事情：每次在链接或任何可点击元素上点击/点击事件时，都会出现蓝色（我认为它取决于设备) 高亮显示。它看起来不太好，因为我在元素中添加了自己的点击动作。最新的 jQueryMobile(1.1.1) 似乎不能很好地处理这个问题。在以前的版本中，所有主要的 webkit 样式都已被覆盖。

如果有人知道如何摆脱烦人的亮点，将不胜感激。

干杯，qmacpit

* * *

当然，在我问之前我已经尝试过改变它们：

`-webkit-tap-highlight-color: rgba(255, 255, 255, 0); -webkit-focus-ring-color: rgba(0, 0, 0, 0);`

但它不适用于冰淇淋三明治。该解决方案在 Android 2.3 中有效，在该版本中，单击链接时出现臭名昭著的“橙色边框”。看起来它是 WebView 的一部分/设置。您在本机浏览器中浏览页面的行为相同。这真的很烦人，因为它不仅涉及链接，还涉及按钮和其他 html 元素。

此外，尽管它对图形的影响相当大，但 jQuery Mobile teem 仍然没有解决。要么他们还没有看到它，要么他们仍在研究解决方案。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T17:36:17.097

我发现自己遇到了同样的问题（即使使用上面建议的 CSS，android 也总是突出显示 svg 元素）。老实说，我不知道为什么没有强制执行 css 规则（我 100% 确定它没有被覆盖），但我找到了另一个解决方案。

看起来突出显示仅针对设置了 onclick 侦听器的元素。我发现设置 onTouchStart 侦听器而不是 onClick 侦听器实际上解决了我的问题。

我在带有 JB 4.2 的 Galaxy Nexus 上对其进行了测试。请不要在以下示例中应用 css 规则按预期工作。

```
<!html>
<html>
<head>
  <title>Click/touch test</title>
  <script type="text/javascript">
  function reset() {
    document.getElementById("A-test").innerHTML="On click listener";
    document.getElementById("A-test2").innerHTML="On touchstart listener";
  }
  window.onload = function() {
   document.getElementById("A-test").onclick = function () {
    this.innerHTML = "see the highlight"
   }

   document.getElementById("A-test2").ontouchstart = function () {
    this.innerHTML = "no highlight here"
   }
  }
  </script>
</head>
<body>
<div id="A-test">On click listener</div>
<div style="height: 60px"></div>
<div id="A-test2">On touchstart listener</div>
</body>
</html> 
```

这是 jsfiddle [http://jsfiddle.net/aQ9zM/2/](http://jsfiddle.net/aQ9zM/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:31:34.627

我终于找到了答案：] 它是一个 webview 功能，可以禁用调用

```
setLightTouchEnabled(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T09:52:46.420

设置以下 css 属性：-webkit-tap-highlight-color:rgba(0,0,0,0); 这不会导致输入框出现问题。但在这种情况下，您需要访问正在运行的 HTML 代码（尽管您可以将其注入 HTML）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:19:43.447

如果您在元素上设置这些 css 属性，这应该会消失：

```
-webkit-tap-highlight-color: rgba(255, 255, 255, 0);
-webkit-focus-ring-color: rgba(0, 0, 0, 0); 
```

# android - 如何获得今天下午 6:15 的 UTC 毫秒数？

> ID：11460492
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:53:08.173
> 
> 标签：android, calendar

如何在给定时间（例如下午 6:15）获取今天的 UTC 毫秒数？

我希望将其作为开始时间，然后我将使用 GPS getTime() 函数并能够计算距离我开始的时间，因为竞赛委员会总是使用 GPS 时间。

查看此文档[Calendar](http://developer.android.com/reference/java/util/Calendar.html#get%28int%29)，我想我只需要调用 Calendar(); 然后 get(MONTH), get(YEAR), etc 并做一个 set(year, month, day, 18, 15,0); 但这不起作用。

也许是 Calendar.YEAR 等，但我还没有弄清楚设置的等价物，我收到警告。

我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T20:58:52.333

```
// get calendar instance, substitute timezone for which ever you need or leave blank to use current
Calendar updateTime = Calendar.getInstance(TimeZone.getTimeZone("US/Pacific"));

updateTime.set(Calendar.HOUR_OF_DAY, 18); // set hour
updateTime.set(Calendar.MINUTE, 15);      // set minute
updateTime.set(Calendar.SECOND, 0);       // set seconds

long time = updateTime.getTimeInMillis(); // get milliseconds 
```

# c# - 当我重新启动 AppDomain 时，前台线程没有阻止应用程序

> ID：11460493
> 
> 赞同：3
> 
> 时间：2012-07-12T20:53:18.303
> 
> 标签：c#, asp.net, multithreading

我在 MSDN 上读到，前台线程和后台线程之间的区别在于，应用程序在其所有前台线程都终止之前无法终止，而它不会打扰等待后台线程。我决定尝试一下，只是为了更好地理解线程。

```
Thread t = new Thread(Work);  //Work() just has the thread sleep for a long time
t.IsBackground = false; //make it a foreground thread
t.Start();
while(true)
{
    if(Session["checker"] != null)
    {
        Session["checker"] = true;
        System.Diagnostics.Debug.Write("I'm here!");
    }
} 
```

我使用会话变量来了解 AppDomain 是否已重新启动，因为会话在 AppDomain 重新启动时被清除。

因此，当我保存 web.config 文件时，它应该触发 AppDomain 重新启动，这应该要求它等待我长时间运行的线程`t`，因为`t`它正在前台运行。但是，当我触摸 web.config 文件时，会直接清除我`Session["checker"]`并打印出“我在这里！”，所以我知道我的应用程序没有等待我的线程。

我是否误解了前台线程应该如何工作？AppDomain 重新启动不应该等待我的线程完成执行，然后再开始清除我的会话变量吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:37:40.650

请注意语句“应用程序在其所有前台线程都终止之前无法终止”中的“应用程序”一词。在回收的情况下，应用程序不会终止。在回收过程中，ASP.NET 正在卸载旧的 AppDomain 并加载新的 AppDomain。一切都在单个进程中完成。进程没有终止。在 AppDomain 卸载范围内，所有线程（后台和前台）都被杀死。因此，ASP.NET 在回收期间不会等待前台线程完成。尝试简单的控制台应用程序，它在 Main 方法中创建一个前台线程。它将一直工作到线程终止。

# osx-lion - 山狮上的 mac 32 位计算机

> ID：11460501
> 
> 赞同：2
> 
> 时间：2012-07-12T20:53:50.530
> 
> 标签：osx-lion, 32bit-64bit, osx-mountain-lion

我正在考虑只为山狮提供 64 位目标。但我认为它也支持 32 位处理器。还有很多 32 位的 mac 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:55:41.820

ML 不支持任何 32 位计算机。请参阅[http://www.apple.com/osx/how-to-upgrade/](http://www.apple.com/osx/how-to-upgrade/)

# jquery - 加载时显示 Jquery 日期时间选择器

> ID：11460502
> 
> 赞同：1
> 
> 时间：2012-07-12T20:53:56.227
> 
> 标签：jquery, html, css, jquery-ui

您好，我有一个 jquery ui 日期时间选择器。

现在我希望它在页面加载时显示的输入字段上，因此它必须已经显示而无需单击或聚焦。

而且我还想让输入字段类型隐藏。

网站链接：[这里](http://nedwebdesign.nl/minerva/agenda.html)

有人有什么想法吗？我已经搜索了这个网站和谷歌，但找不到任何东西。

jQuery代码

```
$.datepicker.setDefaults( $.datepicker.regional[ "nl" ] );

            $('#date').datetimepicker({
                numberOfMonths: 1,
                showButtonPanel: false,
                dateFormat : 'dd/mm/yy',
                minDate: 0,
                maxDate: 30,
                timeText: 'Tijd',
                hourText: 'Uur',
                minuteText: 'Minuten',
                secondText: 'Seconden'
            }); 
```

HTML 代码

```
<label id="test">test</label><input type="text" value="" id="date" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:56:26.460

您可以在初始化日期选择器后调用该`$('#date').datepicker('show');`函数，尽管我可以发誓有一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:07:28.187

您应该能够利用显示内联并填充备用字段选项。它看起来像这样：

**HTML**：

```
Date: <div id="datepicker"></div>
<input type="text" value="" id="date" /> 
```

**JS**：

```
$.datepicker.setDefaults( $.datepicker.regional[ "nl" ] );

$('#datepicker').datetimepicker({
    numberOfMonths: 1,
    showButtonPanel: false,
    dateFormat : 'dd/mm/yy',
    minDate: 0,
    maxDate: 30,
    timeText: 'Tijd',
    hourText: 'Uur',
    minuteText: 'Minuten',
    secondText: 'Seconden',
    altField: "#date",
    altFormat: "yourDateFormat"
}); 
```

# php - PHP日期打开和关闭脚本

> ID：11460511
> 
> 赞同：0
> 
> 时间：2012-07-12T20:54:57.577
> 
> 标签：php, date

我的任务是使用 php 创建一个脚本，以在正确的时间显示打开和关闭。到目前为止，我有时间进行正确的工作，如果在此期间每周营业 7 天，这会很好。然而，该项目的场景是营业时间为周一至周五上午 7:00 至下午 5:30，然后周六上午 7:00 至下午 1:00 开放，周日休息。我想我可以使用日期函数 w 因为它显示 0-6 并调用 if

```
if($date >= 0 && $date < 6) 
```

但这没有用。这是我到目前为止的代码

```
<?php

date_default_timezone_set('America/Chicago');
$open = "700";
$close = "1730";
$time = date('Gi');
$day = date('w');

if ($time >= $open && $time <= $close) {
    echo "We are Open";
} else {
    echo "We are closed";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:07:41.573

如果您不使用数据库，则可以以某种易于解析的格式对一周中的每一天进行硬编码：

```
$schedule[0] = "700-1730";
$schedule[1] = "700-1730";
$schedule[2] = "700-1730";
$schedule[3] = "700-1730";
$schedule[4] = "700-1730";

$schedule[5] = "700-1300";
$schedule[6] = "0";

$today = $schedule[date('w')];

list($open, $close) = explode('-', $schedule);

$now = (int) date('Gi');

$state = 'Open';

if ($today[0] == 0 || $now < (int) $today[0] || $now > (int) $today[1]) {
  $state = 'Closed';
} 
```

刚写了代码，还没测试。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:00:10.897

为打开和关闭时间创建 DateTime 对象。然后将当前时间作为 DateTime 对象与这些时间进行比较。然后，您可以使用比较运算符。然后，您还可以检查日期并将其放入 if、elseif 和 else 语句中，以确定该天是工作日、星期六还是星期日。

# android - 更改 xml 使我的应用程序崩溃

> ID：11460514
> 
> 赞同：1
> 
> 时间：2012-07-12T20:55:10.750
> 
> 标签：android, xml, chronometer

所以我的秒表类运行良好，直到我对它的 XML 代码进行了一些更改。基本上我所做的是改变一些尺寸和 layout_margins..没什么特别的

继承人的xml代码和logcat

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        >

         <Chronometer
            android:id="@+id/chronometer1"
            android:layout_width="57dp"
            android:layout_height="49dp"
             android:text="Chronometer"
            android:layout_marginTop="150dp"
            android:layout_gravity="center"
            android:textSize="50dp"

            />

         <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <Button
            android:id="@+id/bt_sm_start"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Start"
            android:layout_marginLeft="25dp"
            android:textSize="20dp"
            android:layout_marginTop="50dp"

            />

        <Button
            android:id="@+id/bt_sm_pause"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="20dp"
            android:layout_marginTop="50dp"
            android:text="Pause"
            android:layout_marginLeft="25dp"
             />

        <Button
            android:id="@+id/bt_sm_stop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dp"
            android:textSize="20dp"
            android:text="Stop"
            android:layout_marginLeft="25dp"
             />

       </LinearLayout>

    </LinearLayout> 
```

这是日志猫

```
07-12 20:35:46.253: I/Process(360): Sending signal. PID: 360 SIG: 9
07-12 20:37:25.973: D/AndroidRuntime(395): Shutting down VM
07-12 20:37:25.973: W/dalvikvm(395): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-12 20:37:25.993: E/AndroidRuntime(395): FATAL EXCEPTION: main
07-12 20:37:25.993: E/AndroidRuntime(395): java.lang.RuntimeException: Unable to start activity ComponentInfo{mioc.diver/mioc.diver.StopwatchMenu}: java.lang.ClassCastException: android.widget.Chronometer
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.os.Looper.loop(Looper.java:123)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-12 20:37:25.993: E/AndroidRuntime(395):  at java.lang.reflect.Method.invokeNative(Native Method)
07-12 20:37:25.993: E/AndroidRuntime(395):  at java.lang.reflect.Method.invoke(Method.java:507)
07-12 20:37:25.993: E/AndroidRuntime(395):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-12 20:37:25.993: E/AndroidRuntime(395):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-12 20:37:25.993: E/AndroidRuntime(395):  at dalvik.system.NativeStart.main(Native Method)
07-12 20:37:25.993: E/AndroidRuntime(395): Caused by: java.lang.ClassCastException: android.widget.Chronometer
07-12 20:37:25.993: E/AndroidRuntime(395):  at mioc.diver.StopwatchMenu.Create(StopwatchMenu.java:30)
07-12 20:37:25.993: E/AndroidRuntime(395):  at mioc.diver.StopwatchMenu.onCreate(StopwatchMenu.java:23)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-12 20:37:25.993: E/AndroidRuntime(395):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-12 20:37:25.993: E/AndroidRuntime(395):  ... 11 more 
```

这是这个活动的java代码

```
 package mioc.diver;

    import android.app.Activity;
    import android.os.Bundle;
    import android.os.SystemClock;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.Chronometer;

    public class StopwatchMenu extends Activity implements OnClickListener{
        int pause1 = 0;
        long stopped = 0;
        Button start;
        Button stop;
        Button pause;
        Chronometer stopwatch;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.stopwatch_menu);
            Create();

    }
        private void Create() {
            // TODO Auto-generated method stub

            start = (Button) findViewById(R.id.bt_sm_start);
            stop = (Button) findViewById(R.id.bt_sm_stop);
            pause = (Button) findViewById(R.id.bt_sm_pause);
            stopwatch = (Chronometer) findViewById(R.id.chronometer1);

            start.setOnClickListener(this);
            stop.setOnClickListener(this);
            pause.setOnClickListener(this);

        }
        public void onClick(View v) {

            // TODO Auto-generated method stub
            switch(v.getId())
            {
            case R.id.bt_sm_start:
                if(pause1 == 0)
                stopwatch.setBase(SystemClock.elapsedRealtime());
                //stopwatch.setBase(stopped);
            stopwatch.start();

            pause1 = 0;

                break;
            case R.id.bt_sm_pause:
                stopwatch.stop();
                stopped = 0;
                stopped = stopwatch.getBase();
                pause1 = 1;

                break;
            case R.id.bt_sm_stop:
                stopwatch.stop();
                stopwatch.setBase(SystemClock.elapsedRealtime());

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:16:36.193

你试过清理你的项目吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:10:31.040

你的问题可能是`stopwatch = (Chronometer) findViewById(R.id.chronometer1);`

您正在尝试将 a 转换`View`为`Chronometer`. 您的 LogCat 说 a被抛出，这`ClassCastException`意味着可能不支持强制转换。`Views``Chronometer`

或者，该方法可能出现问题`stopwatch.setBase`。您可能正在铸造 a`long`或`double`作为a`int`或反之亦然。查看您的方法参数并返回以确保您匹配正确的参数类型。

# gwt - gwt-oauth2：auth.login PopUp 没有关闭并且回调没有 onSuccess

> ID：11460515
> 
> 赞同：0
> 
> 时间：2012-07-12T20:55:10.930
> 
> 标签：gwt, oauth-2.0

我已经使用

```
xauth.setOAuthWindowUrl("https://www.mypage.com"); 
```

打电话

```
auth.login(req, callback) 
```

接受弹出窗口后显示“https://www.mypage.com/#access_token=....&token_type=Bearer&expires_in=3600”而不是被关闭。-ist未触发`Callback`。`onSuccess`

全部基于[http://code.google.com/p/gwt-oauth2/](http://code.google.com/p/gwt-oauth2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:21:03.783

它不会将 Auth 更改为不同的重定向，例如：

xauth.setOAuthWindowUrl("https://www.mypage.com");

只需将其保留为“https://www.mypage.com/oauthWindow.html”，窗口就会正确关闭，并且回调也可以正常工作。

# flash - Flash/Flex/HTML：如果我将 Adob e 的 TLF 文本格式存储在数据库中，以后将应用程序移植到 HTML 时会很难更改吗？

> ID：11460516
> 
> 赞同：0
> 
> 时间：2012-07-12T20:55:15.620
> 
> 标签：flash, apache-flex, tlf

我有一个基于 Flex 的 Web 应用程序，它必须接受来自用户的富文本输入。Adobe 的[TLF 格式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/formats/TextLayoutFormat.html) 可以在这里使用。

但是由于应用程序最终将移植到 HTML，有什么选项可以将存储在我的数据库中的 TLF 格式文本替换为与 HTML 世界兼容的内容？我担心未来的兼容性。

或者，我的 Flex 应用程序有哪些选项可以在我的数据库中以 Adob​​e 的 TLF 以外的方式存储富文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:04:57.507

尽管许多功能与 HTML 和 CSS 的功能相似，但并不是一对一的兼容性。最兼容的格式是 HTML，很像 TinyMCE 等所见即所得编辑器产生的格式。

# php - 按月排序数组

> ID：11460517
> 
> 赞同：0
> 
> 时间：2012-07-12T20:55:18.590
> 
> 标签：php

> **可能重复：**
> [PHP中的数组排序函数](https://stackoverflow.com/questions/5697759/array-sort-function-in-php)

我有一个这样的数组

```
Array
(
[May] => 10904
[Jan] => 9269
[Jun] => 3743
[Feb] => 3507
[Mar] => 6017
[Apr] => 4966
) 
```

我怎样才能按月对它们进行排序。一月、二月、三月等……

我试过这个没有运气。

```
$ytdCommissions = array_flip($ytdCommissions);

usort($ytdCommissions,'monthCompare');
function monthCompare($a, $b)
{
    $months = array('JAN' => 1, 'FEB' =>2,'MAR' => 3,'APR' => 4,'MAY' => 5,'JUN' => 6,'JULY' => 7,'AUG' => 8, 'SEP' => 9, 'OCT' => 10, 'NOV' => 11, 'DEC' => 12);
    if($a == $b)
    {
        return 0;
    }
    return ($months[$a] > $months[$b]) ? 1 : -1;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:05:29.920

1.）您需要`uksort`在排序键时使用

2.）您应该比较大写键以匹配您的月份数组：

```
$a = strtoupper($a);
$b = strtoupper($b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:13:36.530

```
function monthCompare($a, $b)
{
    $months = array('JAN' => 1, 'FEB' =>2,'MAR' => 3,'APR' => 4,'MAY' => 5,'JUN' => 6,'JULY' => 7,'AUG' => 8, 'SEP' => 9, 'OCT' => 10, 'NOV' => 11, 'DEC' => 12);
    if($a[0] == $b[0])
    {
        return 0;
    }
    return ($months[$a[0]] > $months[$b[0]]) ? 1 : -1;

}

$ytdCommissions = array(
 array('MAY' , 10904),
 array('JAN' , 9269),
 array('JUN' , 3743),
 array('FEB' , 3507),
 array('MAR' , 6017),
 array('APR' , 4966)
);

usort($ytdCommissions,'monthCompare');
print_r($ytdCommissions); 
```

*   `$months`您在:`JAN`与`Jan`on中使用大写字母`$ytdCommissions`
*   使用 usort 未正确构建数组`$ytdCommissions`- 查看我上面的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:04:22.687

尝试像这样制作一系列月份：

```
$months = array("Jan", "Feb", "March", "etc..."); 
```

然后每个月给他们分配你喜欢的任何值：

```
$months[0] = 9269; // Jan
$months[2] = 6017; // March 
```

然后月份只是`$months`数组的键，分别`$months[0]`是**January**和**December**。`$months[11]`

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:11:13.060

您正在使用用于值的 sort 进行排序。应该使用uksort。还删除了您构建的数组，因为我认为它是多余的：

```
$arr = array(
"May" => 10904,
"Jan" => 9269,
"Jun" => 3743,
"Feb" => 3507,
"Mar" => 6017,
"Apr" => 4966,
);

uksort($arr,'monthCompare');

var_dump($arr);

function monthCompare($a, $b)
{
    //$months = array('JAN' => 1, 'FEB' =>2,'MAR' => 3,'APR' => 4,'MAY' => 5,'JUN' => 6,'JULY' => 7,'AUG' => 8, 'SEP' => 9, 'OCT' => 10, 'NOV' => 11, 'DEC' => 12);
    $aMonth = date("m", strtotime($a));
    $bMonth = date("m", strtotime($b));

    if($a == $b)
    {
        return 0;
    }

    return ($aMonth > $bMonth) ? 1 : -1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T21:16:55.403

```
$data = array(
    'May' => 10904,
    'Jan' => 9269,
    'Jun' => 3743,
    'Feb' => 3507,
    'Mar' => 6017,
    'Apr' => 4966,
);

$sort = array('Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec');

uksort($data,
       function($value1, $value2) use ($sort) {
           return array_search($value1,$sort) > array_search($value2,$sort);
       }
);

var_dump($data); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T21:18:08.027

这很烦人，但似乎没有其他办法。

这是我能算出的最短代码：

```
<?
$months[May] = 10904;
$months[Jan] = 9269;
$months[Jun] = 3743;
$months[Feb] = 3507;
$months[Mar] = 6017;
$months[Apr] = 4966;

for($m=1;$m<=12;$m++)
{
    $m_index[date("M",mktime(0,0,0,$m,1,2000))] = $m;
}

foreach($months as $i => $v)
{
    $months_out[$m_index[$i]] = $v;
}
ksort($months_out);
print_r($months_out);
?> 
```

退货

```
Array
(
    [1] => 9269
    [2] => 3507
    [3] => 6017
    [4] => 4966
    [5] => 10904
    [6] => 3743
) 
```**

# ios - UISwitch 0/1 到 ON/OFF

> ID：11460526
> 
> 赞同：0
> 
> 时间：2012-07-12T20:55:57.470
> 
> 标签：ios, text, sdk, uiswitch

我创建了一个 UISwitch 用于我的项目，我得到一个 UISwitch，它显示 0/1 而不是通常的 OFF/ON。我觉得这真的很尴尬，想知道是否有一些我可以编辑的文本属性或其他东西。

我已经读过 UISlider 上的子类化是做到这一点的唯一方法，但我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:34:45.123

没有内置方法可以更改文本。它是本地化的。根据您的模拟器/设备上设置的语言，它看起来会有所不同。例如，[它在法语中看起来像 0/1](http://twicsy.com/i/YsAbb)。

如果您仍然想自定义它，请查看[RCSwitch](http://osiris.laya.com/projects/rcswitch/)，它是 UISwitch 的开源替代品，可定制性更高，包括宽度、颜色、文本等。

# asp.net - 禁用站点部分的表单身份验证

> ID：11460531
> 
> 赞同：2
> 
> 时间：2012-07-12T20:56:07.363
> 
> 标签：asp.net, iis-7, forms-authentication, multi-tenant, nancy

我有一个在 IIS7 下运行并启用了表单身份验证的 ASP.net MVC3 应用程序。在应用程序的一个文件夹下还有一个共同托管的 Nancy 服务。

问题是，只要 Nancy 服务返回 401（未授权）状态，请求就会自动重定向到登录页面。

有没有办法告诉 ASP.net 忽略从该文件夹返回的 401 错误，只返回原始的 json 响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:45:29.890

我知道这是旧的，但我还是会回复。

听起来你有 MVC 网站的 Forms Auth，并使用 Nancy 作为 API`/nancy`

要禁用该目录路径中的身份验证，您可以`location`在 web.config 中添加一个，您很可能已经有一个来设置 Nancy 运行。

就像是：

```
<location path="nancy">
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpHandlers>
      <add verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*"/>
    </httpHandlers>
  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <add name="Nancy" verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*"/>
    </handlers>
  </system.webServer>
</location> 
```

您在这里需要做的就是允许匿名访问，这可以通过添加`authorization`到`system.web`. `system.web`像这样更新：

```
<system.web>
  <compilation debug="true" targetFramework="4.0" />
  <httpHandlers>
    <add verb="*" type="Nancy.Hosting.Aspnet.NancyHttpRequestHandler" path="*"/>
  </httpHandlers>

  <authorization>
    <allow users="*"/>
  </authorization>
</system.web> 
```

这现在应该忽略文件夹的身份验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T21:01:15.210

在控制器中，您可以使用**[AllowAnonymousAttribute绘制动作（或整个控制器）](http://msdn.microsoft.com/en-us/library/system.web.mvc.allowanonymousattribute%28v=vs.108%29.aspx)**

```
[AllowAnonymous]
public ActionResult DoSomething()
{
    return View();
} 
```

# c# - 引用动态创建的控件？

> ID：11460533
> 
> 赞同：1
> 
> 时间：2012-07-12T20:56:10.843
> 
> 标签：c#, windows-phone-7, dynamic, controls

我知道如何在 C# 中创建动态控件：

```
TextBlock tb = new TextBlock();
tb.Text = "This is a new textblock"; 
```

但是我如何通过代码引用这个新创建的控件呢？我在网上浏览了一个解决方案，并遇到了以下代码：

```
TextBlock tb = (TextBlock)this.FindName("TB");
tb.Text = "Text property changed"; 
```

每次我创建一个带有名称的新控件时，都会出现异常：

```
TextBlock tb = new TextBlock();
tb.Text = "This is a new textblock";
tb.Name = "TB"; 
```

> “参数不正确。”

我究竟做错了什么？任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:37:13.290

异常“参数不正确”。由于创建的控件的名称重复，可能会发生。

对于动态控件部分：您必须将该控件添加到某些 Grid 或 Stackpanel 或其他东西。您可以通过获取父控件的内容或子控件来引用该动态控件。

像 ：

```
TextBlock Tb= new TextBlock();
tb.Text = "Hello";

ContentPanel.Children.Add(Tb); 
```

//参考：

```
var content = ContentPanel.Children;
foreach(UIElement uiElem in content)
{
  if(uiElem.GetType() == typeof(TextBlock))
  {
     TextBlock tb = uiElem as TextBlock;
     tb.Text = "Hyee";
  }
} 
```

希望，它可能会有所帮助。

（注：这段代码我是直接写在这里的，不是从VS复制过来的，所以请检查语法和拼写。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:23:16.287

是的，您可以通过这种方式使用参考动态控件。但另一种方法是，您还可以在创建控件时保留引用列表。

# java - 用于 Applet 的 Intellij IDEA 设计器

> ID：11460539
> 
> 赞同：2
> 
> 时间：2012-07-12T20:56:29.690
> 
> 标签：java, intellij-idea, designer, japplet

我正在尝试使用 Intellij IDEA 提供的设计器设计一个小程序。我不知道在哪里可以找到制作一个选项。解决方案已在网上发布，但目前似乎已过时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T09:11:23.817

在您的应用程序中创建此类

```
import java.applet.Applet;
import java.awt.*;
public class Main extends Applet {
public void paint(Graphics g) {
    g.drawString("SALAM Applet", 20, 20);
    g.drawString("سلام اپلت", 20, 40);
}
} 
```

*   右键单击您的小程序类并选择创建“主”。
*   单击确定。
*   跑

欲了解更多信息，请访问[此链接](http://valk.id.au/blog/awesome/how-to-run-java-applets-in-intellij-idea/)

# linux - 使用 AWK 或 SED 以逗号分隔，并带有以下标签

> ID：11460542
> 
> 赞同：-1
> 
> 时间：2012-07-12T20:56:47.850
> 
> 标签：linux, shell, unix, sed, awk

使用 AWK 或 SED 以逗号分隔，并使用以下标签：

```
[BEGIN AccountID]
        [BEGIN CallerID]
            [BEGIN Billed Account Attributes]
            1111111
            1111111
            1111111
            [END Billed Account Attributes]

        [BEGIN OBIO Tax]
        10
        20
        30
        [END OBIO Tax]

        [BEGIN RINO Tax]
        777
        888
        999
        [END RINO Tax]
    [BEGIN CallerID]
[END AccountID]

[BEGIN AccountID]
    [BEGIN CallerID]
        [BEGIN Billed Account Attributes]
        2222222
        2222222
        2222222
        [END Billed Account Attributes]

        [BEGIN OBIO Tax]
        40
        50
        60
        [END OBIO Tax]

    [BEGIN CallerID]
[END AccountID] 
```

**我想要一个 AWK 或 SED 脚本来打印这个：**

```
1111111,1111111,1111111,  10,20,30,  777,888,999

2222222,2222222,2222222,  40,50,60,    0,  0,  0
....
....
.... 
```

不显示 RINO TAX 时，用逗号分隔并置零。

非常感谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:47:08.970

这可能对您有用（GNU sed）：

```
sed '/\[BEGIN AccountID\]/,/\[END AccountID\]/!d;/\[BEGIN AccountID\]/{h;d};/./H;/\[END AccountID\]/!d;g;s/\n*\[[^\n]*\n*//g;s/\n/,/g;s/\s*//g;ta;:a;s/,//9;t;s/$/0,0,0/' file 
```

NB 这将删除空格和空行。

# sql - 从其中一个字段中获取值

> ID：11460543
> 
> 赞同：2
> 
> 时间：2012-07-12T20:56:50.780
> 
> 标签：sql, sql-server, sql-server-2008

我有一个查询给出：

```
orp      CategoryId     Category        City      

999         1           bouquets        city-a       
999         2           arrengmnt       city-b       
999         4           chocolate       city-c 
```

我想在每一行中添加具有该类别的商店数量：

```
orp     CategoryId      Category        City      NoShops

999         1           bouquets        city-a       10
999         2           arrengmnt       city-b       14
999         4           chocolate       city-c       3 
```

我需要获取 CategoryId (@CategoryId)，所以我在考虑这样的事情（显然不起作用）：

```
SELECT  Categories.OrderInPage as orp, CategoriesInLanguages.CategoryName,  @CategoryId = Categories.Id     
                ,(
                    SELECT COUNT(Shops.Id) as NoShops
                        FROM  Cities INNER JOIN
                                      CitiesInLanguages ON Cities.Id = CitiesInLanguages.CityId INNER JOIN
                                      ShopsInCities ON Cities.Id = ShopsInCities.CityId INNER JOIN
                                      CategoriesInLanguages INNER JOIN
                                      Categories ON CategoriesInLanguages.CategoryId = Categories.Id INNER JOIN
                                      ProductstInCategories ON Categories.Id = ProductstInCategories.CategoryId 
                        WHERE      (Products.IsEnable = 1)  AND ( Categories.Id = @CategoryId)) AS Z  
                )
        FROM  Cities INNER JOIN
                          CitiesInLanguages ON Cities.Id = CitiesInLanguages.CityId INNER JOIN
                          ShopsInCities ON Cities.Id = ShopsInCities.CityId INNER JOIN
                          CategoriesInLanguages INNER JOIN
                          Categories ON CategoriesInLanguages.CategoryId = Categories.Id INNER JOIN
                          ProductstInCategories ON Categories.Id = ProductstInCategories.CategoryId 
        WHERE      (Products.IsEnable = 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:00:58.173

您不能混合使用这两种操作。如果您尝试它，错误消息是不言自明的。

> 为变量赋值的 SELECT 语句不得与数据检索操作结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:02:05.107

在 MySQL 中，您可以执行以下操作： `SELECT col1, col2, col3 FROM table1 WHERE col3 = param`，但不能同时混合两个操作。我假设这条规则适用于 Sql Server。但是，现在很清楚您要做什么。你能更具体一点吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:08:28.777

你只能拥有

```
Select col1, col2, col3 from table1 
```

或者

```
Select  @param1 = col1, @param2 =  col2, @param3 = col3 from table1 where id=value 
```

而不是两者兼而有之。注意我添加了 WHERE 子句，您的查询应该返回 1 行以使用 @param

如果您使用第二个选项，则可以执行以下操作

```
Select  @param1 as col1, @param2 as  col2, @param3 as col3 
```

返回结果

# android - 画出一个可以追踪我手指的形状

> ID：11460544
> 
> 赞同：0
> 
> 时间：2012-07-12T20:56:55.260
> 
> 标签：android, drawing, android-canvas

我知道如何在画布上绘制路径并了解如何撤消/重做。但现在我想绘制形状（线条、圆形、矩形），这些形状会根据我拖动它们的方式动态调整大小——就像我们在 MS Paint 中所做的那样。

如果我使用“drawLine”，这条线将永久存在，无法擦除它并将其重新绘制到我的新手指位置。与圆圈相同，因为我希望圆圈在拖动手指时不断改变宽度。因此，必须擦除旧路径（保持位图上的所有其他路径完好无损）并在其位置绘制新路径。

一直在寻找这个，但还没有遇到过如何做到这一点。也许我使用了错误的关键字，但我不知道。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:47:20.870

设法做到了。我误解了屏幕外绘图的工作方式。这个想法是只有在你拥有你想要的形状之后才写入位图 - 即“修饰”。到那时，使用 Draw 中的“canvas”对象绘制形状...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:58:29.690

每次移动手指，调用底层视图的invalidate()函数，会触发擦除整个背景

public void invalidate () 自：API 级别 1

使整个视图无效。如果视图可见，onDraw(android.graphics.Canvas) 将在未来的某个时间点被调用。这必须从 UI 线程调用。要从非 UI 线程调用，请调用 postInvalidate()。

然后根据手指的新位置重新绘制形状。

# html - CSS Boxes：float：left，但跳到下一行时从左边开始

> ID：11460546
> 
> 赞同：2
> 
> 时间：2012-07-12T20:57:06.290
> 
> 标签：html, css, css-float

我有几个包含应该彼此相邻显示的文本的框。它们都有固定的宽度，但高度可变（取决于它们的内容）。它们位于宽度可变的容器内。

如果盒子太多，我希望他们跳到下一行并从左边重新开始。我使用左浮动框实现了这一点。如果每行的第一个框高于下一个框，则会导致问题，因为新行中的框不会从左侧开始。这是一个演示：

HTML：

```
<section>
    <article>One: This ​​​​text is so long, it's so long oh my gosh!</article>
    <article>Two</article>
    <article>Three: bla bla bla bla bla bla bla bla</article>
    <article>Four</article>
</section>​ 
```

CSS：

```
section{
    width: 300px; /* For demo, this can vary */
    overflow: hidden;
}
article{
    float: left;
    width: 100px;
    background: #dddddd;
    padding: 10px;
    margin: 10px;
}
​ 
```

你也可以看看这个 JSFiddle，在那里你可以立即看到问题：http: [//jsfiddle.net/dwr6K/](http://jsfiddle.net/dwr6K/)框“三”从框“一”开始，虽然我希望它从框“一”下的新行。遗憾的是我不能使用`clear: left`，因为我不知道一行可以容纳多少个盒子。

有没有办法防止这种情况并以我想要的方式显示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:14:49.053

如果您不太担心对旧浏览器的支持，您可以使用`display: inline-block`而不是。`float: left`

这是' s 怪癖[的更详细的纲要。](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)`display: inline-block`

要使您的示例正常工作，只需使用：

```
article {
    display: inline-block;
    vertical-align: top;
    width: 100px;
    background: #dddddd;
    padding: 10px;
    margin: 10px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:11:50.330

这里：http: [//jsfiddle.net/dwr6K/9/](http://jsfiddle.net/dwr6K/9/)

只需删除`float: left;`

并添加

```
display: inline-block;
vertical-align: top; 
```

到`article`.

正如@JimmyX 指出的那样，请阅读这篇关于[**跨浏览器内联块的帖子**](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

基本上，`float:left`它的作用是让每个元素紧挨着它可以找到的最左边的 div。因此，如果高度不同，您将无法获得所需的布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:12:52.257

假设您只想将 2 个 div 配对在一起，您可以在每个奇数 div 上使用 clear left。见：http: [//jsfiddle.net/dwr6K/](http://jsfiddle.net/dwr6K/)

也就是说，添加行`article:nth-child(odd) { clear: left; }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:05:08.563

如果高度都不同，请查看 jQuery 插件 Masonary - [http://masonry.desandro.com/](http://masonry.desandro.com/)

# c# - C#串口通信问题

> ID：11460548
> 
> 赞同：2
> 
> 时间：2012-07-12T20:57:10.790
> 
> 标签：c#, serial-port, barcode-scanner

我有一个小型 C# 应用程序的问题。该应用程序必须通过串行端口连接到读取数据矩阵代码的条形码扫描仪。数据矩阵代码表示一个字节数组，它是一个 zip 存档。我阅读了很多关于 SerialPort.DataReceived 工作方式的信息，但我找不到一个优雅的解决方案来解决我的问题。并且该应用程序应与不同的条形码扫描仪一起使用，因此我无法使其特定于扫描仪。这是我的一些代码：

```
 using System;
    using System.IO;
    using System.IO.Ports;
    using System.Windows.Forms;
    using Ionic.Zip;

    namespace SIUI_PE
    {
        public partial class Form1 : Form
        {
            SerialPort _serialPort;

        public Form1()
        {

            InitializeComponent();

        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                _serialPort = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error:" + ex.ToString());
                return;
            }
            _serialPort.Handshake = Handshake.None;
            _serialPort.ReadBufferSize = 10000;
            _serialPort.DataReceived += new SerialDataReceivedEventHandler(comPort_DataReceived);
            _serialPort.Open();

        }
        void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
           byte[] data = new byte[10000];
           _serialPort.Read(data, 0, 10000);
           File.WriteAllBytes(Directory.GetCurrentDirectory() + "/temp/fis.zip", data);
             try
             {
                 using (ZipFile zip = ZipFile.Read(Directory.GetCurrentDirectory() + "/temp/fis.zip"))
                 {
                     foreach (ZipEntry ZE in zip)
                     {
                         ZE.Extract(Directory.GetCurrentDirectory() + "/temp");
                     }
                 }
                 File.Delete(Directory.GetCurrentDirectory() + "/temp/fis.zip");

             }
             catch (Exception ex1)
             {
                 MessageBox.Show("Corrupt Archive: " + ex1.ToString());

             }
        }

    }
} 
```

所以我的问题是：我怎么知道我读取了扫描仪发送的所有字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:04:01.327

我用于读取条形码数据的代码在生产环境中已经运行了好几年，看起来像这样：

*请注意，我的应用程序必须读取标准 UPC 条形码以及 GS1 DataBar，因此您可能不需要一些代码......*

这其中的关键是：

```
string ScanData = ScannerPort.ReadExisting(); 
```

在 DoScan 部分中可以找到，它只是将扫描数据作为字符串读取。它绕过了知道发送了多少字节的需要，并使其余代码更容易处理。

* * *

```
 // This snippet is in the Form_Load event, and it initializes teh scanner
        InitializeScanner();
        ScannerPort.ReadExisting();
        System.Threading.Thread.Sleep(1000);
     // ens snippet from Form_Load.

        this.ScannerPort.DataReceived += new SerialDataReceivedEventHandler(ScannerPort_DataReceived);

delegate void DoScanCallback();  // used for updating the form UI

void DoScan()
    {
        if (this.txtCouponCount.InvokeRequired)
        {
            DoScanCallback d = new DoScanCallback(DoScan);
            this.Invoke(d);
            return;
        }
        System.Threading.Thread.Sleep(100);
        string ScanData = ScannerPort.ReadExisting();
        if (isInScanMode)
        {
            try
            {
                HandleScanData(ScanData);
            }
            catch (Exception ex)
            {
                     System.Media.SystemSounds.Beep.Play();
                     MessageBox.Show("Invalid Scan");
            }
        }
    }
    void ScannerPort_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        // this call to sleep allows the scanner to receive the entire scan.
        // without this sleep, we've found that we get only a partial scan.
        try
        {
            DoScan();
        }
        catch (Exception ex)
        {
                System.Media.SystemSounds.Beep.Play();
                MessageBox.Show("Unable to handle scan event in ScannerPort_DataReceived." + System.Environment.NewLine + ex.ToString());
        }

    }
    void Port_ErrorReceived(object sender, System.IO.Ports.SerialErrorReceivedEventArgs e)
    {

          System.Media.SystemSounds.Beep.Play();
          MessageBox.Show(e.EventType.ToString());
    }
    private void HandleScanData(string ScanData)
    {
        //MessageBox.Show(ScanData + System.Environment.NewLine + ScanData.Length.ToString());

        //Determine which type of barcode has been scanned, and handle appropriately.
        if (ScanData.StartsWith("A") && ScanData.Length == 14)
        {
            try
            {
                ProcessUpcCoupon(ScanData);
            }
            catch (Exception ex)
            {
                     System.Media.SystemSounds.Beep.Play();
                     MessageBox.Show("Unable to process UPC coupon data" + System.Environment.NewLine + ex.ToString());

            }
        }
        else if (ScanData.StartsWith("8110"))
        {
            try
            {
                ProcessDataBarCoupon(ScanData);
            }
            catch (Exception ex)
            {
                     System.Media.SystemSounds.Beep.Play();
                     MessageBox.Show("Unable to process DataBar coupon data" + System.Environment.NewLine + ex.ToString());
            }
        }
        else
        {
                System.Media.SystemSounds.Beep.Play();
                MessageBox.Show("Invalid Scan" + System.Environment.NewLine + ScanData);
        }

    }

    private void InitializeScanner()
    {
        try
        {
            ScannerPort.PortName = Properties.Settings.Default.ScannerPort;
            ScannerPort.ReadBufferSize = Properties.Settings.Default.ScannerReadBufferSize;
            ScannerPort.Open();
            ScannerPort.BaudRate = Properties.Settings.Default.ScannerBaudRate;
            ScannerPort.DataBits = Properties.Settings.Default.ScannerDataBit;
            ScannerPort.StopBits = Properties.Settings.Default.ScannerStopBit;
            ScannerPort.Parity = Properties.Settings.Default.ScannerParity;
            ScannerPort.ReadTimeout = Properties.Settings.Default.ScannerReadTimeout;
            ScannerPort.DtrEnable = Properties.Settings.Default.ScannerDtrEnable;
            ScannerPort.RtsEnable = Properties.Settings.Default.ScannerRtsEnable;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Unable to initialize scanner.  The error message received will be shown next.  You should close this program and try again.  If the problem persists, please contact support.", "Error initializing scanner");
            MessageBox.Show(ex.Message);
            Application.Exit();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:05:02.913

如 SerialPort.DataReceived 文档中所述，“使用 BytesToRead 属性确定缓冲区中还有多少数据要读取。”

这是 SerialPort.BytesToRead 的文档

[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.bytestoread.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.bytestoread.aspx)

# c# - ScriptEngine.SetTrace() 发生异常时如何使用 TracebackDelegate 有效负载？

> ID：11460551
> 
> 赞同：1
> 
> 时间：2012-07-12T20:57:23.347
> 
> 标签：c#, ironpython

我正在使用 ScriptEngine.SetTrace()，我想知道当发生异常时如何使用 TracebackDelegate“有效负载”变量中包含的元组？我想获取异常的消息、方法名称、行号、文件名等。我可以从 frame.f_code 和 frame.f_lineno 获得最后三个，但其他信息似乎包含在有效负载元组对象中，我不知道如何提取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:10:09.023

没关系，我已经想通了：

```
PythonTuple tuple = (PythonTuple)payload;
string err = PythonType.Get__name__((PythonType)tuple[0]);
PythonExceptions.BaseException e = (PythonExceptions.BaseException)tuple[1];
TraceBack tb = (TraceBack)tuple[2];
Debug.WriteLine(err + " " + e.clsException.Message); 
```

# r - 如何在波浪号上重置 path.expand

> ID：11460556
> 
> 赞同：2
> 
> 时间：2012-07-12T20:57:40.483
> 
> 标签：r

在 Windows 上，在我的 RProfile.site 中，我曾经设置：

```
Sys.setenv(R_USER="/my/desired/path/to/tilde") 
```

但是，这不会在 Ubuntu 上产生相同的效果。关于如何达到相同效果的任何想法？这样当我在路径中键入 ~ 时，它会扩展为 R_USER？

这是一个例子。在 Windows 上，设置 R_USER 后，在我的脚本中我将使用以下内容：

```
read.csv("~/Project") 
```

其中“~”扩展为 /some/path/to/projects/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:04:06.307

在 .Renviron 中定义 HOME="/my/projects/folder"，最好仅用于 R

在 Windows 上更改`~`路径扩展方法的功能与在 Ubuntu/Linux* 中的 Windows 不同

# c# - LINQ 查询两个并行数组的子集

> ID：11460558
> 
> 赞同：2
> 
> 时间：2012-07-12T20:57:58.347
> 
> 标签：c#, linq

我正在开发一个使用大量 X、Y 空间信息的应用程序。

给定两个平行数组，一个代表 X 值，另一个代表 Y 值，**有没有办法从两个数组中选择一个子集？** 通过使用 x 值数组中的起始值和终止值来确定子集。

这是两个并行数组的示例。

```
double[] xs = new double[] { 
    0.0, 0.04, 0.08, 0.12, 0.16,
    0.2, 0.24, 0.28, 0.32, 0.36,
    0.4, 0.44, 0.48, 0.52, 0.56,
    0.6, 0.64, 0.68, 0.72, 0.76,
    0.8, 0.84, 0.88, 0.92
};
double[] ys = new double[] {
    0.0152, 0.1434, 0.1647, 0.3800,
    0.7880, 0.0488, 1.0060, 0.2710,
    0.0363, 0.4321, 0.5573, 0.2192,
    0.6341, 0.5181, 0.9546, 0.8275,
    0.5567, 0.9870, 0.8895, 0.3423,
    0.6061, 0.1507, 0.7841, 0.6512
}; 
```

假设我想要 x 值和 y 值的子集，其中 x 大于或等于 0.1 且小于或等于 0.2。这样一个子集的结果应该是两个并行数组：

```
double[] x_subset = new double[] {
    0.12, 0.16, 0.2
};
double[] y_subset = new double[] {
    0.3800, 0.7880, 0.0488
}; 
```

x 和 y 数组将始终具有相同数量的元素。

我尝试过使用 Zip，但这不起作用。除了使用普通的旧循环之外，我想不出其他任何东西。不过，我是 LINQ 的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T21:03:53.287

可能是这样的：

```
var zipped = xs.Zip(ys, (x, y) => new { x, y })
               .Where(coord => coord.x > 0.1 && coord.x <= 0.2); 
```

通过使用 4.0 版本中可用的[Enumerable.Zip](http://msdn.microsoft.com/it-it/library/dd267698.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:03:36.637

您可以使用 LINQ 查询来选择匹配的元素。

```
x_subset = xs.Where(x => x >= .1 && x <= .2).ToArray();
y_subset = ys.Where(y => y >= .1 && y <= .2).ToArray(); 
```

（您也可以使用 a `Func<double, bool> f = (a) => a >= .1 && a <= .2)`）并将其作为参数传递给 .Where）

# watir - 使用 watir 为下拉菜单获取未定义的方法“set”

> ID：11460574
> 
> 赞同：3
> 
> 时间：2012-07-12T20:59:18.113
> 
> 标签：watir

```
require 'watir'  

ie = Watir::Browser.new  
ie.goto "http://www.wallpapers.com/windows/Wallpapers/Animals/Dogs"  

ie.select(:id, "ctl00_CPH1_ctl00_ddlSortExpression").flash   
ie.select(:id, "ctl00_CPH1_ctl00_ddlSortExpression").set("Newest")  

C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-classic-3.0.0/lib/watir-classic/element.rb:433:in `method_missing': undefined method `set' for #<Watir::SelectList:0x31be0b8> (NoMethodError)
        from sample.rb:9:in `<main>' 
```

也尝试了相同的结果：

```
ie.select(:id, "ctl00_CPH1_ctl00_ddlSortExpression").to_subtype.set("Newest") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:49:18.797

改用`.select()`：

```
ie.select(:id, "ctl00_CPH1_ctl00_ddlSortExpression").select("Newest") 
```

在 Watir 3.0 中，`.set()`选择列表不再存在。不知道是bug还是故意删除。

# python - 更改 Ned Batchelder 的覆盖工具的默认 python 版本

> ID：11460577
> 
> 赞同：1
> 
> 时间：2012-07-12T20:59:32.857
> 
> 标签：python, coverage.py, python-coverage

标题几乎说明了这一点。我在将`unittest`python 从 python 2.5 更改为 2.7 时遇到问题。当我用 python 运行我的测试脚本时

```
python _tester.py 
```

它工作正常。但是当我尝试使用覆盖工具时

```
coverage erase; coverage run _tester.py; coverage html -d html_cov_report 
```

它崩溃说这`assertRaisesRegexp`不是我的子类的属性`TestCase`。我发现这是因为覆盖工具使用的是 python 2.5 并且`unittest.TestCase.assertRaisesRegexp`在 2.5 中不存在。

无论如何，有人可以告诉我如何更改覆盖使用的 python 吗？

编辑：用于覆盖的彩蛋在 /Library/Python/2.5/site-packages 中。这有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:06:36.250

我正在考虑4个选项（恕我直言，应该按顺序执行）：

1.  您可以`coverage`在 python2.7 下安装，而不是在 python 2.5 下安装。
2.  `coverage`我认为如果您使用 python 2.7:运行脚本，这应该修复`/path/to/python2.7 /path/to/coverage ...`，假设 python2.5 是默认的。
3.  使用[unittest2](http://pypi.python.org/pypi/unittest2/)。
4.  您可以将默认 python 更改为 python 2.7，因为我相信`coverage`脚本 shebang 应该是`/usr/bin/env python`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:05:48.303

该`coverage`脚本应该有一个可以更改为正确版本的 python的[shebang 。](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

编辑：如果您在 python 2.5 中安装它，切换到使用 python 2.7 安装可能是最简单的。

# php - 使用 PEAR 邮件的 SMTP 错误 535（不正确的身份验证数据）

> ID：11460582
> 
> 赞同：3
> 
> 时间：2012-07-12T20:59:54.773
> 
> 标签：php, smtp, pear

我使用[https://stackoverflow.com/a/2748837](https://stackoverflow.com/a/2748837)中的代码尝试登录 Gmail 和我网站的服务器，对于他们两个我都收到了相同的错误：

```
authentication failure [SMTP: Invalid response code received from server (code: 535, response: Incorrect authentication data)] 
```

我已经两次和三次检查用户名和密码是否正确（因为它适用于桌面客户端），并删除了用户名周围的括号。可能是什么问题呢？

# reporting-services - 格式化我使用 SSRS 从数据库返回的字段中的每个字母

> ID：11460584
> 
> 赞同：0
> 
> 时间：2012-07-12T21:00:01.683
> 
> 标签：reporting-services, conditional-formatting

我有一个要求，我想根据它包含的内容格式化从数据库返回的字段。具体来说，如果该字段的值为“Other 3”，我需要在 12pt 中显示“Other”，在 8pt 中显示“3”。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:29:34.883

您可以在两个文本框中引用该字段。使用`Mid`&`IndexOf`为每个文本框选择字段的任一侧。然后只需将每个文本框的字体设置为 12pt 和 8pt。

如果整个字符串必须存在于一个文本框中（并且您使用的是 SSRS 2008），则可以使用[此处](http://www.bidn.com/blogs/Daniel/ssas/1574/ssrs-multiple-fonts-sizes-and-colors-in-a-single-text-box)所述的占位符。

# c# - 如何将其迁移到 Web 服务

> ID：11460585
> 
> 赞同：0
> 
> 时间：2012-07-12T21:00:03.860
> 
> 标签：c#, asp.net, web-services

我真诚地请求您的耐心和理解。

下面的代码通过提供一个框和一个按钮来工作。

该框包含一个 url，按钮简单地说，转换。

如果单击转换按钮，它将打开 url 的内容并将其转换为 pdf。

这很好用。

不幸的是，他们希望将其翻译为 Web 服务，以便其他应用程序可以通过提供 2 个输入参数、url 和文档名称来使用它来执行类似的任务。

我查看了几个创建和使用 Web 服务的示例，虽然它们看起来相当简单，但这段代码的编写方式使其翻译起来非常困难。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using EO.Pdf;

public partial class HtmlToPdf : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnConvert_Click(object sender, EventArgs e)
    {
        //Create a PdfDocument object and convert
        //the Url into the PdfDocument object
        PdfDocument doc = new PdfDocument();
        HtmlToPdf.ConvertUrl(txtUrl.Text, doc);

        //Setup HttpResponse headers
        HttpResponse response = HttpContext.Current.Response;
        response.Clear();
        response.ClearHeaders();
        response.ContentType = "application/pdf";

        //Send the PdfDocument to the client
        doc.Save(response.OutputStream);

        Response.End();
    }
} 
```

如果您能提供帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:02:14.367

Web 服务的最基本形式是使用[HTTP 处理程序](http://msdn.microsoft.com/en-us/library/bb398986.aspx)：

```
public class HtmlToPdfHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string url = context.Request["url"];
        string documentName = context.Request["name"];

        PdfDocument doc = new PdfDocument();
        HtmlToPdf.ConvertUrl(url, doc);
        context.Response.ContentType = "application/pdf";
        doc.Save(context.Response.OutputStream);
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

接着：`http://example.com/HtmlToPdfHandler.ashx?url=someurl&name=some_doc_name`

对于更高级的服务，您可以查看[`WCF`](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)或即将推出的[`Web API`](http://www.asp.net/web-api).

# java - Java，Swing，sql-我可以将文本字段中输入的值与数据库中的两列匹配吗

> ID：11460591
> 
> 赞同：0
> 
> 时间：2012-07-12T21:00:30.703
> 
> 标签：java, sql, swing

我可以将文本字段中输入的值与数据库中的两列相匹配吗？

在根据 id 具有“保存”和“搜索”选项的应用程序中是必需的，但 id 是字符串和整数的组合形式（例如 abc/345），并且下一个 id 是最后一个 id 的递增版本，即 abc/ 346,abc/347 所以我创建了两列来将 id 存储在数据库中，第一列用于字符串部分，第二列用于整数部分

问题是当我在文本字段中输入完整 ID 即 abc/345 并单击“搜索按钮”时，其他字段应根据此完整 ID 填写

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:09:42.827

这可能是一个解决方案：
使用`getText()`方法`Textfield`获取 id (string/int) 并使用 a`StringTokenizer`将 id 拆分为两部分：string 和 id。
然后就可以很方便的查询到这两个需求的数据库了。。

代码示例：

```
StringTokenizer st = new StringTokenizer ("abc/346", "/");
String id_string = st.nextToken();
String id_int = st.nextToken(); 
```

# ruby - Ruby 1.9.3 - 定位 ruby 程序的本地文件，无论从何处调用程序

> ID：11460592
> 
> 赞同：1
> 
> 时间：2012-07-12T21:00:31.520
> 
> 标签：ruby, file, require, directory-structure

我一直在处理我的第一个 Ruby 项目，在尝试将我的文件组织到不同目录的过程中，我遇到了让 .rb 文件加载自己本地的非 ruby​​ 文件（例如 .txt 文件）的问题.

例如，假设一个项目具有以下结构：

```
myproject/
    bin/
        runner.rb
    lib/
        foo.rb
        fooinfo.txt
    test/
        testfoo.rb 
```

文件内容如下：

## 跑步者.rb

```
require_relative '../lib/foo.rb' 
```

## foo.rb

```
File.open('./fooinfo.txt') do |file|
    while line = file.gets
        puts line
    end
end 
```

如果我 cd 到 lib 并运行 foo.rb，它可以轻松地在自己的目录中找到 fooinfo.txt 并打印其内容。但是，如果我 cd 到 bin 并运行 runner.rb，我会得到

```
in `initialize': No such file or directory - ./fooinfo.txt (Errno::ENOENT) 
```

我认为这是因为 File.open 搜索相对于运行顶级程序的任何目录。有没有办法确保 foo.rb 可以找到 fooinfo.rb 而不管它是从哪里运行/需要的（假设 foo.rb 和 fooinfo.rb 始终保持相对于彼此的相同位置）？我希望能够从 bin/runner.rb 运行 foo.rb，并在 test/ 中运行一个测试文件，并让它能够在这两种情况下找到 fooinfo.txt。

理想情况下，我希望有一个即使移动整个 myproject 目录也能工作的解决方案。

是否有类似 require_relative 的东西可以找到非 ruby​​ 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:04:54.343

尝试使用`__FILE__`and`File.dirname`构建绝对路径。例如：

```
File.open(File.expand_path(File.dirname(__FILE__)) + './fooinfo.txt') do |file|
   ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:21:57.857

在这种情况下，最简单的事情就是改变

```
File.open('./fooinfo.txt') 
```

至

```
File.open('../lib/fooinfo.txt') 
```

这将从项目根目录下的任何项目子目录（包括`lib/`）中直接工作。

在大型项目中有用的更强大的解决方案是拥有一个`PROJECT_ROOT`可以在任何地方使用的常量。如果您有`lib/const.rb`：

```
module Const
  PROJECT_ROOT = File.expand_path("..", File.dirname(__FILE__))
end 
```

然后（假设您已经`require`编辑了该文件）您可以使用：

```
File.open(Const::PROJECT_ROOT + '/lib/fooinfo.txt') 
```

# memory - GDB 中的 x86 标签和 LEA

> ID：11460593
> 
> 赞同：3
> 
> 时间：2012-07-12T21:00:38.673
> 
> 标签：memory, assembly, gdb, x86, nasm

我正在学习用 x86 汇编（目前是 32 位）编写代码，我正在努力完全理解内存模型。特别令人困惑的是标签的语义、LEA 指令和可执行文件的布局。我编写了这个示例程序，以便我可以检查它在 gdb 中的运行情况。

```
; mem.s
SECTION .data
    msg: db "labeled string\n"
    db "unlabeled-string\n"
    nls: db 10,10,10,10,10,10,10,10
SECTION .text
global  _start
_start:
    ; inspect msg label, LEA instruction
    mov eax, msg
    mov eax, &msg
    mov eax, [msg]
    ; lea eax, msg (invalid instruction)
    lea eax, &msg
    lea eax, [msg]

    ; populate array in BSS section
    mov [arr], DWORD 1
    mov [arr+4], DWORD 2
    mov [arr+8], DWORD 3
    mov [arr+12], DWORD 4

    ; trying to print the unlabeled string
    mov eax, 4
    mov ebx, 1
    lea ecx, [msg+15]
    int 80H

    mov eax, 1      ; exit syscall
    mov ebx, 0      ; return value
    int 80H
SECTION .bss
    arr: resw 16 
```

我已经组装并链接到：

```
nasm -f elf -g -F stabs mem.s
ld -m elf_i386 -o mem mem.o 
```

GDB 会话：

```
(gdb) disas *_start
Dump of assembler code for function _start:
   0x08048080 <+0>: mov    $0x80490e4,%eax
   0x08048085 <+5>: mov    0x80490e4,%eax
   0x0804808a <+10>:    mov    0x80490e4,%eax
   0x0804808f <+15>:    lea    0x80490e4,%eax
   0x08048095 <+21>:    lea    0x80490e4,%eax
   0x0804809b <+27>:    movl   $0x1,0x8049110
   0x080480a5 <+37>:    movl   $0x2,0x8049114
   0x080480af <+47>:    movl   $0x3,0x8049118
   0x080480b9 <+57>:    movl   $0x4,0x804911c
   0x080480c3 <+67>:    mov    $0x4,%eax
   0x080480c8 <+72>:    mov    $0x1,%ebx
   0x080480cd <+77>:    lea    0x80490f3,%ecx
   0x080480d3 <+83>:    int    $0x80
   0x080480d5 <+85>:    mov    $0x1,%eax
   0x080480da <+90>:    mov    $0x0,%ebx
   0x080480df <+95>:    int    $0x80 
```

检查“味精”值：

```
(gdb) b _start
Breakpoint 1 at 0x8048080
(gdb) run
Starting program: /home/jh/workspace/x86/mem_addr/mem
(gdb) p msg
# what does this value represent?
$1 = 1700946284
(gdb) p &msg
$2 = (<data variable, no debug info> *) 0x80490e4
# this is the address where "labeled string" is stored
(gdb) p *0x80490e4
# same value as above (eg: p msg)
$3 = 1700946284
(gdb) p *msg
Cannot access memory at address 0x6562616c
# NOTE: 0x6562616c is ASCII values of 'e','b','a','l'
# the first 4 bytes from msg: db "labeled string"... little-endian
(gdb) x msg
0x6562616c: Cannot access memory at address 0x6562616c
(gdb) x &msg
0x80490e4 <msg>:    0x6562616c
(gdb) x *msg
Cannot access memory at address 0x6562616c 
```

一次单步执行一条指令：

```
(gdb) p $eax
$4 = 0
(gdb) stepi
0x08048085 in _start ()
(gdb) p $eax
$5 = 134516964
0x0804808a in _start ()
(gdb) p $eax
$6 = 1700946284
(gdb) stepi
0x0804808f in _start ()
(gdb) p $eax
$7 = 1700946284
(gdb) stepi
0x08048095 in _start ()
(gdb) p $eax
$8 = 134516964 
```

该数组按预期填充了值 1,2,3,4：

```
# before program execution:
(gdb) x/16w &arr
0x8049104 <arr>:    0   0   0   0
0x8049114:  0   0   0   0
0x8049124:  0   0   0   0
0x8049134:  0   0   0   0
# after program execution
(gdb) x/16w &arr
0x8049104 <arr>:    1   2   3   4
0x8049114:  0   0   0   0
0x8049124:  0   0   0   0
0x8049134:  0   0   0   0 
```

我不明白为什么在 gdb 中打印标签会导致这两个值。另外，如何打印未标记的字符串。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T22:29:13.823

它有点令人困惑，因为 gdb 不理解标签的概念，实际上 - 它旨在调试用高级语言（通常是 C 或 C++）编写并由编译器编译的程序。因此，它尝试将它在二进制文件中看到的内容映射到高级语言概念——变量和类型——基于它对正在发生的事情的最佳猜测（在没有来自编译器的调试信息告诉它什么是继续）。

**nasm 是做什么的**

对于汇编器来说，标签是尚未设置的值——它实际上是在链接器运行时获得其最终值。通常，标签用于引用内存部分中的地址——实际地址将在链接器布置最终可执行映像时定义。汇编器生成重定位记录，以便链接器可以正确设置标签的使用。

所以当汇编器看到

```
mov eax, msg 
```

它知道这`msg`是与数据段中的地址相对应的标签，因此它生成一条指令将该地址加载到eax中。当它看到

```
mov eax, [msg] 
```

它会生成一条指令，从地址为 的内存中加载 32 位（寄存器 eax 的大小）`msg`。在这两种情况下，都会生成一个重定位，以便链接器可以插入最终地址`msg`。

（除此之外——我不知道`&`nasm 是什么意思——它没有出现在我能看到的文档中的任何地方，所以我很惊讶它没有给出错误。但它看起来像是把它当作别名对于`[]`)

现在 LEA 是一条有趣的指令——它与从内存中移动的格式基本相同，但它不是读取内存，而是将它本来要读取的地址存储到目标寄存器中。所以

```
lea eax, msg 
```

没有意义——源是标签 (address) `msg`，它是一个（链接时间）常数，不在内存中的任何地方。

```
lea eax, [msg] 
```

有效，因为源在内存中，所以它将源的地址粘贴到 eax 中。这与 的效果相同`mov eax, msg`。最常见的是，您只会看到`lea`用于更复杂的寻址模式，因此您可以利用 x86 AGU 来做一些有用的工作，而不仅仅是计算地址。例如：

```
lea eax, [ebx+4*ecx+32] 
```

它在 AGU 中进行一次移位和两次加法，并将结果放入 eax 而不是从该地址加载。

**gdb 是做什么的**

在 gdb 中，当您键入时，`p <expression>`它会尽力评估`<expression>`其对 C/C++ 编译器对该表达式的含义的理解。所以当你说

```
(gdb) p msg 
```

它看着`msg`并说“这看起来像一个变量，所以让我们获取该变量的当前值并打印它”。现在它知道编译器喜欢将全局变量放入 .data 段中，并且他们为那些与变量同名的变量创建符号。由于它将`msg`符号表中的符号视为`.data`段中的符号，因此它假定这是正在发生的事情，并获取该符号处的内存并打印它。现在它不知道那个变量是什么类型（没有调试信息），所以它猜测它是一个 32 位 int 并打印它。

所以输出

```
$1 = 1700946284 
```

是 msg 的前 4 个字节，被视为整数。

因为`p &msg`它知道你想获取变量的地址`msg`，所以它直接从符号中给出地址。打印地址时，gdb 会打印它所拥有的关于这些地址的类型信息，因此会出现“数据变量，无调试信息”。

如果你愿意，你可以使用强制转换来指定 gdb 的类型，它会使用那个类型而不是它猜测的类型：

```
(gdb) p (char)msg
$6 = 108 'l'
(gdb) p (char [10])msg
$7 = "labeled st"
(gdb) p (char *)&msg
$8 = 0x80490e4 "labeled string\\nunlabeled-string\\n\n\n\n\n\n\n\n\n" <Address 0x804910e out of bounds> 
```

请注意，在后一种情况下，字符串上没有 NUL 终止符，因此它会打印出整个数据段......

* * *

要使用 sys_write 打印未标记的字符串，您需要弄清楚字符串的地址和长度，这几乎是您拥有的。为了完整起见，您还应该检查返回值：

```
 mov ebx, 1           ; fd 1 (stdout)
    lea ecx, [msg+15]    ; address
    mov edx, 17          ; length
write_more:
    mov eax, 4           ; sys_write
    int 80H              ; write(1, &msg[15], 17)
    test eax, eax        ; check for error
    js error             ; error, eax = -ERRNO
    add ecx, eax
    sub edx, eax
    jg write_more        ; only part of the string was written 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T08:05:45.180

克里斯·多德...

* * *

## （除此之外——我不知道 & 对 nasm 意味着什么——它没有出现在我能看到的文档中的任何地方，所以我很惊讶它没有给出错误。但它看起来像是把它当作一个[] 的别名）

哦，哦！您已经发现了秘密语法！很久以前，根据用户请求，“&”被添加到 Nasm（作为“[]”的别名）。它从未被记录在案。也从未删除。我会坚持使用“[]”。作为“无证”，它可能会消失。请注意，其含义与 gdb 的含义几乎“相反”！

可能会尝试“-F dwarf”而不是“-F stabs”。它应该是 gdb 使用的“本机”调试信息格式。（我自己从来没有注意到太大的不同）

最好的，

坦率

[http://www.nasm.us](http://www.nasm.us)

# c# - 使用 Database.SetInitializer 避免 Shotgun 手术

> ID：11460594
> 
> 赞同：6
> 
> 时间：2012-07-12T21:00:43.237
> 
> 标签：c#, entity-framework, ef-code-first

关于在哪里拨打电话的[规范答案](https://stackoverflow.com/a/8679662/161457)适用于 Web 项目。我正在寻找另一种选择。`Database.SetInitializer``Global.asax`

我们将 Entity Framework 4.3.1 与 Code First 结合使用。我们编写 Web 服务和 WinForms 应用程序，并且通常将数据访问代码（例如 DbContexts）放在共享库中。

目前，我们的 DbContext 后代的构造函数如下所示：

```
public PricingContext(string connectionString)
    : base(connectionString)
{
    Database.SetInitializer<PricingContext>(null);
} 
```

95% 的情况下，这是正确的默认值。5% 的时间（一些集成测试、新建开发等）不是。

如果我们将该代码移动到我们的服务和应用程序的初始化（或配置）中，则将新的 DbContext 添加到库中涉及到[Shotgun Surgery](http://c2.com/cgi/wiki?ShotgunSurgery)。所有这些项目都必须更新，即使库没有直接公开上下文。

可选参数是一种可能性：

```
public PricingContext(string connectionString,
    IDatabaseInitializer<PricingContext> databaseInitializer = null)
    : base(connectionString)
{
    Database.SetInitializer<PricingContext>(databaseInitializer);
} 
```

但是，覆盖默认策略可能涉及通过多个层传递初始化程序。

我们还考虑过创建一个基于反射的初始化器，它将所有上下文设置为特定的策略。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T21:08:24.700

创建一个可以在每个项目的 Global.asax 中实例化的 DBContextBootstrapper 类怎么样？它在其实现中为每个上下文设置了初始化程序。

这样，如果您添加一个新的 dbcontext，您只需在引导程序中进行更改，而不是在每个项目中进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:04:32.163

EF 4.3（和更高版本）还包括[从配置文件定义初始化程序的](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)可能性，因此您根本不需要在代码中设置它，但它仍然需要您维护多个配置。

@Hasan 的建议看起来是最适合您的解决方案。

# ios - Ios - 需要指导配置 UISwtch 切换元素

> ID：11460599
> 
> 赞同：0
> 
> 时间：2012-07-12T21:01:07.857
> 
> 标签：ios

我有这个 UISwitch 从我的故事板连接到我的控制器。

```
@property (weak, nonatomic) IBOutlet UISwitch *wantHelp; 
```

我要做的是对其进行配置，以便应用程序可以知道 uiswitch 的状态何时发生变化。

我在网上查看了示例，它们显示的内容与此类似：

```
-(IBAction)helpToggle:(id)sender
{
    if (wantHelp.on) 
    {
        NSLog(@"yes");
    }
    else 
    {
        NSLog(@"No");
    }
} 
```

但它们似乎指的是不同的 id，例如 the`wantHelp`或 the `helpToggle`，许多示例都使用这种标题，`-(IBAction)helpToggle:(id)sender`但我很困惑“发件人”是从什么配置的，以及在我的情况下应该是什么。

感谢您帮助我了解该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:08:32.200

每次您拨动开关 (wantHelp) 时，都会调用方法 helpToggle。当调用 helpToggle 时，if 语句检查条件是否为真，在本例中为 (wantHelp.on)。如果 wantHelp 开启，则调用 if 语句中的代码，否则调用 else 语句。

至于发件人标签，它允许将方法通信回我相信的交换机。

通常：对象>方法

发件人：对象>方法>返回对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:09:45.023

`sender`是发送消息的对象。如果您连接 UISwitch 以向`helpToggle:`实现它的对象发送操作，`sender`则将是一个指向开关的指针。

如果您想自己检查一下，请在代码中添加如下一行：

```
`NSLog(@"sender is: %@", sender);` 
```

# php - 如何从另一个域中提取代码

> ID：11460600
> 
> 赞同：0
> 
> 时间：2012-07-12T21:01:09.417
> 
> 标签：php, jquery, include, cross-domain

如果我有几个网站，并且我想在每个网站上阅读“file.html”，我应该怎么做？file.html 就像这样：

```
<h1>Hot news</h1>
<p>article</p> 
```

我知道我可以使用 php include 或 require，

```
<? include 'file.html'; ?> 
```

或 jQuery，但仅限于域内。

```
.load("file.html"); 
```

我应该怎么做那个跨域？

PS：是的，我知道这是不安全的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:04:01.050

您可以使用 PHP：

```
<?php echo file_get_contents('http://....'); ?> 
```

`include`不起作用的原因是默认情况下禁用 url 包含，因为它们非常不安全 - 包含的文档作为 PHP 处理。但是，`file_get_contents`没有 PHP 代码可以注入，因此它非常安全（如果远程站点向您发送了错误的 JavaScript 代码，则客户端的东西除外，例如 XSS）。

# javascript - 如果只有一个滑块，则隐藏 Twitter Bootstrap 左右箭头

> ID：11460601
> 
> 赞同：6
> 
> 时间：2012-07-12T21:01:12.043
> 
> 标签：javascript, jquery, twitter-bootstrap

如果只有一个滑块存在，但似乎无法使其正常工作，我一直在尝试隐藏 Bootstrap Carousel 左右按钮。

我试过了

```
 if ($('.carousel-inner div').length === 1 ) { 
        $(this).find('.controls .carousel-control').hide();
    } 
```

和

```
 if($('.carousel-inner .item').is(':only-child')) {
    $(this).find('.controls .carousel-control').hide(); 
```

没有任何运气。

有什么特别的原因为什么这些都不起作用？控制台返回正确数量的滑块，我在处理此轮播的不同函数上`.length`使用完全相同的方法。`.hide`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T13:17:08.887

只要您每页有 1 个轮播，接受的答案就可以正常工作。我有几个所以想我会添加到解决方案中：

基于使用标准引导轮播标记：

```
<div id="myCarousel" class="carousel slide">
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
  </ol>
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">…&lt;/div>
    <div class="item">…&lt;/div>
    <div class="item">…&lt;/div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

您需要遍历轮播的每次出现，使用 $(this) 并获取其兄弟姐妹：

```
$('.carousel-inner').each(function() {

    if ($(this).children('div').length === 1) $(this).siblings('.carousel-control, .carousel-indicators').hide();

}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T21:06:01.647

而不是`$(this).find(...).hide();`尝试`$('.controls .carousel-control').hide();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-04T11:16:30.487

试试这个 Bootstrap 4+

```
$('.carousel-inner').each(function() {

if ($(this).children('div').length === 1) $(this).siblings('.carousel-indicators, .carousel-control-prev, .carousel-control-next').hide();

}); 
```

# scala - scala案例对象污染

> ID：11460605
> 
> 赞同：8
> 
> 时间：2012-07-12T21:01:25.310
> 
> 标签：scala, enums, namespaces

让我解释 ;-）

下面的两个类都在包 com.company.foo 中

```
RoleGroup.scala
abstract class RoleGroup
case object ADMIN extends RoleGroup
case object MEMBER extends RoleGroup

MailSender.scala
abstract class MailSender
case object ADMIN extends MailSender
case object STAFF extends MailSender
case object ACCOUNTANT extends MailSender 
```

这里的问题是 ADMIN 是模棱两可的，因为 case 对象没有命名空间分隔。似乎每个包只能有一个唯一命名的案例对象。

我想我可以根据函数 a la mailADMIN、roleADMIN 等命名案例对象。还是我应该只创建适当的枚举而忘记案例对象？还是采取其他方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T21:15:31.787

您可以执行以下操作：

```
object RoleGroup {
  sealed trait RoleGroup
  case object ADMIN extends RoleGroup
  case object MEMBER extends Rolegroup
} 
```

同样对于`MailSender`. 然后在您只使用一个的情况下，您可以做`import MailSender._`或反之亦然，但是当同时使用两个时，您将它们称为`RoleGroup.ADMIN`等。

您是想采用这种方法还是使用 Enums 主要取决于您打算如何使用它们。在这种方法中，每个“枚举”都是一个类型，而对于 Enums，每个枚举都是一个值。前者更适合模式匹配，因为编译器可以检查您的匹配是否详尽，后者更适合（IMO）使用序列化。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T09:43:45.237

您在这里不需要枚举，可能在其他任何地方都不需要枚举。您所需要的只是适当的命名空间。我发现伴随对象方法是最有益的：

```
sealed abstract class RoleGroup
object RoleGroup {
  case object Admin extends RoleGroup
  case object Member extends RoleGroup
  // also just in case
  sealed case class SomeParameterizedGroup (
    param1: Any, 
    param2: Int
  ) extends RoleGroup
} 
```

以这种方式使用它会让您想起 Java 的枚举，同时也为您提供 Scala 的优势：

```
def foo (roleGroup: RoleGroup) = 
  roleGroup match {
    case RoleGroup.Admin =>
    case RoleGroup.SomeParameterizedGroup(param1, param2) =>
  } 
```

请注意，在 Dan 的解决方案中，类型`roleGroup`是`RoleGroup.RoleGroup`，这有点不自然。另请注意，大写名称违反了 Scala 的样式约定，从上面的示例中您可以看出原因。

# c# - 我正在尝试在 c# 中读取进程的输出，但我收到此消息“无法在进程流上混合同步和异步操作”。

> ID：11460606
> 
> 赞同：15
> 
> 时间：2012-07-12T21:01:34.733
> 
> 标签：c#, process, backgroundworker

我正在使用 xcopy 编写一个备份程序，因为有很多大文件需要一段时间，所以我想展示一下进度。当我尝试使用 StreamReader 获取标准输出时，它在调试时出现此错误消息。“不能在流程流上混合同步和异步操作。”

```
 public void backup_worker_DoWork(object sender, DoWorkEventArgs e)
    {
        int loop = 1;

        backup_worker.WorkerReportsProgress = true;

        Process xcopy = new Process();
        ProcessStartInfo startinfo = new ProcessStartInfo();
        startinfo.CreateNoWindow = true;
        startinfo.UseShellExecute = false;
        startinfo.RedirectStandardError = true;
        startinfo.RedirectStandardOutput = true;
        startinfo.FileName = Environment.CurrentDirectory + "\\xcopy.exe";
        startinfo.Arguments = '"' + source + '"' + " " + '"' + target + '"' + " " + "/s /e /y";
        xcopy.StartInfo.RedirectStandardOutput = true;
        xcopy.StartInfo = startinfo;

        xcopy.Start();
        xcopy.BeginErrorReadLine();
        xcopy.BeginOutputReadLine();

        StreamReader sr = xcopy.StandardOutput;

        while (loop > 0)
        {
            progress = sr.ReadLine();
            output_list.Items.Add(progress);
        }

        xcopy.OutputDataReceived += new DataReceivedEventHandler(backup_worker_OutputDataRecieved);
        xcopy.ErrorDataReceived += new DataReceivedEventHandler(backup_worker_ErrorDataReceived);
        xcopy.WaitForExit();
        backup_worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backup_worker_RunWorkerCompleted);
    }

    void backup_worker_ErrorDataReceived(object sender, DataReceivedEventArgs e)
    {

    }

    void backup_worker_OutputDataRecieved(object sender, DataReceivedEventArgs e)
    {
    }

    void backup_worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        MessageBox.Show("Completed");
    } 
```

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T21:12:53.130

问题是您同时使用同步和异步输出：

```
// Using async version here...
xcopy.BeginOutputReadLine();

StreamReader sr = xcopy.StandardOutput;

while (loop > 0)
{
    // Trying to use synchronous reading here
    progress = sr.ReadLine(); 
```

您需要设计您的算法以使用一个选项或另一个，但不能同时使用两者。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T15:08:46.013

MSDN的以下注释应该很清楚，问题是什么

> 您不能在重定向流上混合异步和同步读取操作。一旦 Process 的重定向流以异步或同步模式打开，则对该流的所有进一步读取操作都必须处于相同模式。例如，不要在 BeginErrorReadLine 之后调用 StandardError 流上的 ReadLine，反之亦然。但是，您可以在不同模式下读取两个不同的流。例如，您可以调用 BeginErrorReadLine，然后为 StandardOutput 流调用 ReadLine。

您的代码应该更多如下

```
 public void backup_worker_DoWork(object sender, DoWorkEventArgs e) {
        int loop = 1;

        // This should ideally not be in the DoWork, but where you setup or create the worker
        backup_worker.WorkerReportsProgress = true;
        backup_worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backup_worker_RunWorkerCompleted);
        backup_worker.WorkerSupportsCancellation = true;

        // setup your scopy process
        ProcessStartInfo startinfo = new ProcessStartInfo();
        startinfo.CreateNoWindow = true;
        startinfo.UseShellExecute = false;
        startinfo.RedirectStandardError = true;
        startinfo.RedirectStandardOutput = true;
        startinfo.FileName = Environment.CurrentDirectory + "\\xcopy.exe";
        startinfo.Arguments = "/s /e /y " + '"' + source + '"' + " " + '"' + target + '"' + " ";
        Process xcopy = new Process();
        xcopy.StartInfo = startinfo;
        xcopy.ErrorDataReceived += new DataReceivedEventHandler(backup_worker_ErrorDataReceived);

        // start the xcopy and read the output
        xcopy.Start();
        xcopy.BeginErrorReadLine();

        string copiedFileName;
        while ((copiedFileName = xcopy.StandardOutput.ReadLine()) != null) {
            output_list.Items.Add(copiedFileName);
        }

        // we should be done when here, but doesen't hurt to wait
        xcopy.WaitForExit();
    }

    void backup_worker_ErrorDataReceived(object sender, DataReceivedEventArgs e) {
        MessageBox.Show("We have a problem. Figure what needs to be done here!");
    }

    void backup_worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Cancelled == true) {
            MessageBox.Show("Canceled!");
        } else if (e.Error != null) {
            MessageBox.Show("Error: " + e.Error.Message);
        } else {
            MessageBox.Show("Completed!");
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T21:13:42.400

如果你想做同步的方式，

代替

```
xcopy.BeginOutputReadLine() 
```

利用

```
string s = xcopy.StandardOutput.ReadToEnd() 
```

请注意，如果您对输出和错误都这样做，并且其中一个太长，您可能会遇到死锁。

# java - OAuth2 'mac' 令牌类型是否有任何已知的 Java 实现？

> ID：11460608
> 
> 赞同：6
> 
> 时间：2012-07-12T21:01:40.867
> 
> 标签：java, oauth-2.0, hmac

我查看了各种 OAuth2 java 库（spring-security-oauth、cxf、scribe、google-oauth-java-client），但找不到任何支持 Mac 令牌类型的内容，如下所述： [https://datatracker。 ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01)

默认情况下，它们都支持 Bearer 令牌类型，仅此而已。有什么特殊原因根本不支持这种令牌类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-14T11:50:47.760

大多数 Java 库`OAuth 2.0`支持`Bearer`令牌类型的原因是`Bearer`令牌配置文件带来了简化的身份验证方案。任何拥有`bearer`令牌的用户都可以使用它来访问相关资源（无需证明拥有加密密钥）。OAuth 2.0 授权框架：`Bearer`令牌使用规范描述了使用`bearer`令牌`HTTP` `requests`来访问 OAuth 2.0 受保护的资源。

`Bearer`访问令牌的响应

```
HTTP/1.1 200 OK
     Content-Type: application/json;charset=UTF-8
     Cache-Control: no-store
     Pragma: no-cache

     {
       "access_token":"mF_9.B5f-4.1JqM",
       "token_type":"Bearer",
       "expires_in":3600,
       "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA"
      } 
```

`MAC`Token Profile 定义了`HTTP` `MAC`访问认证方案，提供了一种通过对请求进行部分加密验证的方式来发出经过认证的 HTTP 请求，包括 HTTP 方法、请求 URI 和主机。每个访问令牌类型定义都指定了与响应参数一起发送到客户端的附加属性 ( `mac_key`, )。`mac_algorithm``access_token`

```
HTTP/1.1 200 OK
     Content-Type: application/json
     Cache-Control: no-store

     {
       "access_token":"SlAV32hkKG",
       "token_type":"mac",
       "expires_in":3600,
       "refresh_token":"8xLOxBtZp8",
       "mac_key":"adijq39jdlaska9asud",
       "mac_algorithm":"hmac-sha-256"
     } 
```

`access_token`或密钥标识符是一个字符串，用于`MAC`标识`MAC`用于计算请求的密钥`MAC`。该字符串通常对客户端是不透明的。服务器通常为每组`MAC`凭据分配特定的范围和生命周期。标识符可以表示用于检索授权信息的唯一值（例如从数据库中），或者以可验证的方式自包含授权信息（即由一些数据和签名组成的字符串）。

[**Scribe**](https://github.com/fernandezpablo85/scribe-java)是 Java 中用于 Token 配置文件的`OAuth 2.0`库`MAC`。

资料来源：[OAuth 2.0 承载令牌配置文件与 MAC 令牌配置文件](http://blog.facilelogin.com/2013/01/oauth-20-bearer-token-profile-vs-mac.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T09:27:19.513

我不是该领域的专家，但我似乎认为[PicketLink](http://picketlink.org/)支持 MAC 和 BEARER[令牌类型](https://github.com/picketlink/picketlink/blob/783ea51b00c4985c90a8440abbde0848ddeb3a84/modules/oauth/src/main/java/org/picketlink/oauth/messages/AccessTokenResponse.java#L37)。

我不确定这是你想要的。如果您有任何疑问，可以[在这里联系他们](http://picketlink.org/gethelp/)。

# sql-server - 内容数据库备份

> ID：11460609
> 
> 赞同：0
> 
> 时间：2012-07-12T21:01:43.127
> 
> 标签：sql-server, sharepoint, sharepoint-2010, sharepoint-2007

对于内容数据库备份（2010 数据库迁移过程的一部分），如何在备份期间将 SharePoint 2007 内容数据库设置为“只读”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:10:12.717

在查询窗口中，您将：

```
ALTER DATABASE <dbname> SET READ_ONLY; 
```

并恢复：

```
ALTER DATABASE <dbname> SET READ_WRITE; 
```

如果您真的想使用 GUI 执行此操作，请右键单击数据库，选择属性，移动到 Options 选项卡，然后向下滚动到 State 部分。在那里，您可以选择`Database Read-Only`并将其设置为 True 或 False。

# java - Restlet 无法解析 GET 请求的有效负载

> ID：11460611
> 
> 赞同：1
> 
> 时间：2012-07-12T21:01:43.480
> 
> 标签：java, rest, restlet

我在java中使用Restlet作为一个简单的客户端来调用由tastepie（python django）提供的RESTful服务

我正在通过 tcpmon 监控有效负载，我看到以下有效负载被返回，但是我无法获取有效负载中的数据。

**客户来电**

```
ClientResource resource = new ClientResource("http://localhost/someplace/");
String rep = resource.get(String.class); 
```

**有效载荷**

```
HTTP/1.0 200 OK
Date: Thu, 12 Jul 2012 20:22:12 GMT
Server: WSGIServer/0.1 Python/2.7.1
Vary: Cookie
Content-Type: application/json; charset=utf-8
Set-Cookie:  sessionid=63c5ea23113073e489cb8920819f37d; expires=Thu, 26-Jul-2012 20:22:12 GMT;           httponly; Max-Age=1209600; Path=/

{"jsonData": "someData"} 
```

当我调试到 restlet 时，我注意到 InboundWay.createEntity(..) 由于缺少长度、块编码或连接标头而将数据设置为 EmptyRepresentation。为什么是这样？为什么我不能只流式传输数据？

有谁知道为什么会这样？有更好的客户吗？到目前为止，尝试了球衣和 Resteasy 并取得了有限的成功。（jeresy 有一个错误，它试图标记和重置 autoCloseSteam，而 resteasy 只是作为客户端使用很痛苦）我希望不必编写 HTTPClient。

做了更多的挖掘，在我看来，RESTLET 正在做一些非常愚蠢的事情。

它正在查看响应标头并尝试查找它是否知道大小，或者是否知道它的 chunkedEncoding，或者是否指定了 Connection:closed。否则它不会尝试解析有效​​负载......有谁知道这是为什么？我没有意识到以任何方式都需要这些标题。为什么我们不能在未指定连接关闭时使用 ClosingInputStream...

**Restlet 代码**

```
public Representation createInboundEntity(Series<Parameter> headers) {
        Representation result = null;
        long contentLength = HeaderUtils.getContentLength(headers);
        boolean chunkedEncoding = HeaderUtils.isChunkedEncoding(headers);
        // In some cases there is an entity without a content-length header
        boolean connectionClosed = HeaderUtils.isConnectionClose(headers);

        // Create the representation
        if ((contentLength != Representation.UNKNOWN_SIZE && contentLength != 0)
                || chunkedEncoding || connectionClosed) {
            InputStream inboundEntityStream = getInboundEntityStream(
                    contentLength, chunkedEncoding);
            ReadableByteChannel inboundEntityChannel = getInboundEntityChannel(
                    contentLength, chunkedEncoding);
... 
```

# grails - Grails：用户输入格式化的字符串，但不保留格式

> ID：11460612
> 
> 赞同：0
> 
> 时间：2012-07-12T21:01:45.227
> 
> 标签：grails, groovy

我刚刚在 Grails 中启动了一个非常基本的程序（以前从未使用过，但它似乎非常有用）。

到目前为止，我所拥有的是：

在 X.groovy 中，一个名为参数的字符串，最大长度为 50000 以及其他几个字符串和日期等的约束。

在 XController.groovy 中，静态脚手架 = X；

它显示脚手架 UI（非常方便！），我可以添加参数字符串和与之关联的其他对象。

我的问题是参数字符串是一个长字符串，格式由用户粘贴。但是，当它显示在浏览器上时，它不保留任何回车符。

解决此问题的最佳方法是什么？我是 Grails 的初学者，在这个帐户上还有很多很多的学习要做。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:19:03.720

问题是字符串正在使用 HTML 显示，默认情况下它不会将 \n 解析为新行。您需要将文本换行`<pre>`（请参阅：[http](http://www.w3schools.com/tags/tag_pre.asp) ://www.w3schools.com/tags/tag_pre.asp ）或将 \n 替换为`<br/>`标签以正确显示给用户。

# java - 可扩展列表视图列表的大小未增加以匹配 Android 中的文本长度

> ID：11460614
> 
> 赞同：0
> 
> 时间：2012-07-12T21:02:00.780
> 
> 标签：java, android, adapter, parent-child, expandablelistview

我整天都在做这个，我的大部分代码都来自谷歌在其示例 API 项目中发布的示例代码。我有一个可扩展的列表视图菜单，我希望我的一个子类有很多文本。但是如果我添加很多文本，文本就会离开屏幕。很难描述。这是一个屏幕截图：

![截屏。](../Images/4e9273afaa6cdfde8bbeffa695719d6c.png)

请注意第一个父项下的第一个子项中的条目是如何离开屏幕的。我需要视图自动扩展孩子的文本，以便您可以看到所有内容。

这是我的代码：

```
public class Assignment extends ExpandableListActivity {

ExpandableListAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up our adapter
    mAdapter = new MyExpandableListAdapter();
    setListAdapter(mAdapter);
    registerForContextMenu(getExpandableListView());
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    menu.setHeaderTitle("Sample menu");
    menu.add(0, 0, 0, R.string.expandable_list_sample_action);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();

    String title = ((TextView) info.targetView).getText().toString();

    int type = ExpandableListView.getPackedPositionType(info.packedPosition);
    if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition); 
        Toast.makeText(this, title + ": Child " + childPos + " clicked in group " + groupPos,
                Toast.LENGTH_SHORT).show();
        return true;
    } else if (type == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        Toast.makeText(this, title + ": Group " + groupPos + " clicked", Toast.LENGTH_SHORT).show();
        return true;
    }

    return false;
}

/**
 * A simple adapter which maintains an ArrayList of photo resource Ids. 
 * Each photo is displayed as an image. This adapter supports clearing the
 * list of photos and adding a new photo.
 *
 */
public class Assignment extends ExpandableListActivity {

ExpandableListAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set up our adapter
    mAdapter = new MyExpandableListAdapter();
    setListAdapter(mAdapter);
    registerForContextMenu(getExpandableListView());
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    menu.setHeaderTitle("Sample menu");
    menu.add(0, 0, 0, R.string.expandable_list_sample_action);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();

    String title = ((TextView) info.targetView).getText().toString();

    int type = ExpandableListView.getPackedPositionType(info.packedPosition);
    if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition); 
        Toast.makeText(this, title + ": Child " + childPos + " clicked in group " + groupPos,
                Toast.LENGTH_SHORT).show();
        return true;
    } else if (type == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
        int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
        Toast.makeText(this, title + ": Group " + groupPos + " clicked", Toast.LENGTH_SHORT).show();
        return true;
    }

    return false;
}

/**
 * A simple adapter which maintains an ArrayList of photo resource Ids. 
 * Each photo is displayed as an image. This adapter supports clearing the
 * list of photos and adding a new photo.
 *
 */
public class MyExpandableListAdapter extends BaseExpandableListAdapter {
    // Sample data set.  children[i] contains the children (String[]) for groups[i].
    private String[] groups = { "P", "D", "N"};
    private String[][] children = {
            { "Arnoadsfadsfadsfaaaaaaaaaaaaaaaaaaaaaaaa" +
                    "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" +
                    "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" +
                    "aaaaaaaaaaaaaaaaaaaaaaaaaaaaadsafdasfadsf" +
                    "adsfdasfdsafadsfld", "Barry", "Chuck", "David" },
            { "Ace", "Bandit", "Cha-Cha", "Deuce" },
            { "Fluffy", "Snuggles" },
            { "Goldy", "Bubbles" }
    };

    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT, 64);

        TextView textView = new TextView(Assignment.this);

        textView.setLayoutParams(lp);
        // Center the text vertically
        textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
        // Set the text starting position
        textView.setPadding(36, 0, 0, 0);
        return textView;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
            View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setTextSize(18);
        textView.setText(getChild(groupPosition, childPosition).toString());
        return textView;
    }

    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    //Set design for Parent Lists
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
            ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setTextSize(30);
        textView.setPadding(50, 0, 0, 0);
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

} 
```

}

注意我的孩子的一个名字是“Arnoadsfadsfadsfaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaadsafdasfadsf

在屏幕截图中，这会离开屏幕。我想要发生的是自动扩展以包含所有文本的子布局。不知道该怎么做。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:12:19.130

我觉得很愚蠢，但刚刚解决了这个问题，在我的方法 getGenericView() 下，宽度设置为 match_parent 但高度没有。

是这样的：

```
public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT, 64); 
```

但它必须是这样

```
 public TextView getGenericView() {
        // Layout parameters for the ExpandableListView
        AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT); 
```

# dictionary - 二郎词典

> ID：11460616
> 
> 赞同：5
> 
> 时间：2012-07-12T21:02:04.320
> 
> 标签：dictionary, erlang

我*想*我已经知道答案了，但想确定一下。我正在构建一个字典以用作静态查找表（即，字典一旦创建就将是不可变的），并且发现这可以达到目的：

```
L = [{keyA, "A"}, {keyB, "B"}, {keyC, "C"}].
D = dict:from_list(L).
V = dict:fetch(keyA, D). 
```

这是一种可以接受的方法还是我还不熟悉的其他魔法？

作为后续行动，如果我要创建一个可变字典，是否真的需要考虑诸如此类的阴谋？

```
D  = dict:from_list(L).
D1 = dict:append(keyD, "D", D). 
```

最后，不是将字典从一个函数传递到另一个函数，而是有一个持久存储，我可以按照`register/2`-`whereis/1`例程的方式存储和检索它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T23:29:14.733

是的，这是一种可以接受的方法。

如果你想修改你的字典，你总是需要从所有修改你的字典的操作中获取返回值，因为 Erlang 只有不可变的数据。这是处理所有 Erlang 数据的正常方式，因此您很快就会习惯它。

另一种方法是使用[ets](http://www.erlang.org/doc/man/ets.html)，这是另一种存储数据的方式。根据您创建 ets 表的方式，您可能需要也可能不需要携带对它的引用。ets 表中的数据不存储在进程堆中，因此访问它需要在进程和 ets 数据之间进行复制，但是 ets 表通常更适合存储大量数据。使用 dict/orddict/gb_trees 还是 ets 更好，很大程度上取决于您打算存储的数据以及您打算对其执行的操作。

# cordova - 在 4.3 模拟器上无法识别换行符。使用 5.1 模拟器没问题

> ID：11460624
> 
> 赞同：0
> 
> 时间：2012-07-12T21:02:30.570
> 
> 标签：cordova, ios4, ios-simulator

我使用 5.1 SDK 构建了一个 Phonegap 应用程序。使用 5.1 模拟器运行我的应用程序时，可以识别 LINE BREAKS。但由于某种原因，在 4.3 模拟器上运行我的应用程序时，它不起作用。

*（phonegap 1.9 版，jqm 1.1，jquery 1.7）*

```
formatedAdd = "Current location:  </br >" + results[0].formatted_address; 
```

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:08:27.500

换行符 is`<br />`和 not `</br >`。由于怪癖模式，它可能在 5.1 上有效（？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:08:45.253

正确的 HTML 换行标记是`<br />`，而不是`</br>`。

因此，您可能只想将行更改为

```
formatedAdd = "Current location:  <br />" + results[0].formatted_address; 
```

# macos - Perforce - 在 Mac OS X 上取消链接权限被拒绝

> ID：11460625
> 
> 赞同：2
> 
> 时间：2012-07-12T21:02:34.490
> 
> 标签：macos, terminal, perforce

我正在尝试`p4 sync`，但出现“无法破坏可写文件”错误。所以，我删除了可写权限，但现在我收到了这个错误：

```
$ ls -l file.txt
-r--r--r--  1 myusername  admin   1.0K Jan 1 00:00 file.txt

$ p4 sync file.txt
//the/depot/directory/file.txt#5 - deleted as /my/local/workspace/directory/file.txt
unlink: /my/local/workspace/directory/file.txt: Permission denied 
```

我以`myusername`. 为什么我的权限被拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-07T04:23:21.087

除了更改文件权限之外，您还可以执行`p4 sync -f`. 但请注意，这可能很危险：

> 强制同步。即使客户端工作区已经有指定版本的文件，Perforce 也会执行同步。如果文件是可写的，它会被覆盖。此选项不会影响打开的文件，但会覆盖 noclobber 客户端选项。

因此，请确保在执行之前提交您的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:20:28.617

> 为什么我的权限被拒绝？

因为你只是拿走了你自己的写权限。这意味着您不再具有写入文件的权限。这意味着代表您的 p4 不再具有写入文件的权限。这意味着当 p4 代表您请求写入文件的权限时，它被拒绝了。这意味着 p4 说“权限被拒绝”。

你还期望发生什么？

抱怨的原因`p4 sync`是您似乎有一个已签出的文件（因此可能对其进行了更改）并且它不知道它，因此它拒绝仅覆盖您的辛勤工作。如果这是您想要做的，您应该手动还原文件。

Perforce 会跟踪它希望您的文件处于什么状态。如果它留下了一个具有不可写访问权限的文件，并且希望它仍处于该状态，它会在覆盖它之前尝试对其进行 chmod。但是如果它认为文件应该是可写的，它就会打开它并尝试写它。如果 p4 从不调用它，那么 chmod 是否会成功这一事实是无关紧要的。

无论如何，解决方案是显式还原文件，删除它并重新拉取它，等等。

# xamarin.ios - 方法返回 id 的 Monotouch 绑定

> ID：11460626
> 
> 赞同：1
> 
> 时间：2012-07-12T21:02:42.947
> 
> 标签：xamarin.ios

我正在尝试绑定公开此方法的api（GoogleAnalytic v2 beta）：

```
- (id<GAITracker>)trackerWithTrackingId:(NSString *)trackingId; 
```

GAITracker 是一个协议，所以我的绑定包含这个定义

```
[BaseType (typeof (NSObject))]
[Model]
interface GAITracker 
{
...
}

[BaseType (typeof (NSObject))]
interface GAI 
{
  [Static][Export ("sharedInstance")]
  GAI SharedInstance { get; }

  [Export("trackerWithTrackingId:")]
  GAITracker TrackerWithTrackingId(string id);

  ...
} 
```

当我调用 GAI.SharedInstance.TrackerWithTrackingId("MyId") 时，我得到了这个异常

```
System.InvalidCastException: Unable to cast object of type 'MonoTouch.Foundation.NSObject' to type 'GoogleAnalyticBETA.GAITracker'. 
```

我发现的所有示例都使用协议作为委托（[如此处](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Binding_Protocols)所述），而不是作为方法的返回值。如何创建有效的绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:02:20.560

你需要有这样的东西

```
[BaseType (typeof (NSObject))]
interface GAI 
{
  [Static][Export ("sharedInstance")]
  GAI SharedInstance { get; }

  [Export("trackerWithTrackingId:")]
  IntPtr TrackerWithTrackingId(string id);

  ...
} 
```

然后使用它：

```
var ptr = GAI.SharedInstance.TrackerWithTrackingId("MyId");
var gaitracker = new GAITracker (ptr); 
```

查看 Google Analytic 的现有单点触控绑定

[https://github.com/mono/monotouch-bindings/blob/master/GoogleAnalytics/binding/googleanalytics.cs](https://github.com/mono/monotouch-bindings/blob/master/GoogleAnalytics/binding/googleanalytics.cs)

# dart - 如何从 Dart 中的字符串创建 InputStream？

> ID：11460630
> 
> 赞同：4
> 
> 时间：2012-07-12T21:03:11.093
> 
> 标签：dart

StringInputStream 看起来像正确的名称，但它不是从 String 中创建 InputStream，而是包装现有 InputStream 以从中读取行。

我试图找到一个基本的 InputStream 类来扩展并最终找到了我必须复制到我的项目中才能使用的 stream_utils.dart。

是否有办法为字符串、字节数组等创建 InputStreams 和 OutputStreams？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:03:12.467

以下是您的操作方法：

```
import 'dart:io';

main() {
  var input = "hello from dart";
  var inputStream = new ListInputStream();
  inputStream.onData = () {
    print(new String.fromCharCodes(inputStream.read()));
  };

  inputStream.write(input.charCodes());
} 
```

# c# - 使用业务对象作为测试数据构建器类的返回值

> ID：11460638
> 
> 赞同：1
> 
> 时间：2012-07-12T21:03:28.203
> 
> 标签：c#, builder, test-data

业务对象是 Foo.cs

如果 Foo 的属性运行自定义逻辑怎么办？那么创建可以更改 Foo 对象内部数据并返回我不期望的值的 Foo 对象不是一个坏主意吗？！

```
public class FooBuilder
{
    private string bar = "defaultBar";
    private string baz = "defaultBaz";
    private string bling = "defaultBling";

    public FooBuilder Bar(string value)
    {
        bar = value;
        return this;
    }

    public FooBuilder Baz(string value)
    {
        baz = value;
        return this;
    }

    public FooBuilder Bling(string value)
    {
        bling = value;
        return this;
    }

    public Foo Build()
    {
        return new Foo {Bar = bar, Baz = baz, Bling = bling};
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:24:33.850

如果我明白你在问什么...

属性可以执行一些代码而不是设置支持字段。但是，如果您将一个属性设置为一个值，然后使用 getter 并发现它返回了与您设置的值不同的值，那么这是出乎意料的。因此，要么在属性中避免这种情况，要么使用为行为/数据更改提供描述性含义的方法。

所以这个IMO很糟糕

```
var foo = new Foo();
foo.Bar = "hello bar";
string bar = foo.Bar;

Console.WriteLine(bar); // if this does not print "hello bar" then it is bad/unexpected 
```

# javascript - 计算 JavaScript 中句子（数组）中字符（数组）的出现次数

> ID：11460639
> 
> 赞同：2
> 
> 时间：2012-07-12T21:03:32.933
> 
> 标签：javascript, performance, optimization

我们如何找到并计算以下句子中出现的次数？

```
sentences = [
    'black im yello'
    'green black and white'
    'green green green green green greenana'
    'i have no color'
]

find_char = [
    'green',
    'black',
    'white'
] 
```

应该返回

```
output = {
   'sentence 1' : 1 // just black
   'sentence 2' : 3 // green black white
   'sentence 3' : 6 // 5 green and green in 'green'ana
   'sentence 4' : 0
} 
```

这是我当前的代码

```
var output = {};

for (var i = sentences.length - 1; i >= 0; i--) {
    var output_tmp = {}; 
    var occurance = 0; 
    for (x = 0; x < find_char.length; x++) {        
        j = 0;
        output_tmp[find_char[x]] = 0;
        // search if sentences then -1, if > -1 then there is a match
        while ((j = sentences[i].indexOf(find_char[x], j)) > -1) { 
            output_tmp[find_char[x]]++; 
            j++ 
        }
        occurance += output_tmp[find_char[x]];
    }
    output[i] = { 'sentence_no': i,  'occurance' : occurance};
} 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:17:32.673

将所有单词组合成一个正则表达式并将其应用于每个句子：

```
sentences = [
    'black im yello',
    'green black and white',
    'green green green green green greenana',
    'i have no color'
]

words = [
    'green',
    'black',
    'white'
]

re = new RegExp(words.join('|'), 'gi')

counts = sentences.map(function(sent) {
    return (sent.match(re) || []).length
}) 
```

这将在控制台中打印：

```
[1, 3, 6, 0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:06:57.313

您可以使用 Javascript 的[match 方法](http://www.w3schools.com/jsref/jsref_match.asp)来优化您的代码。例如，要查找句子中出现的“green”的数量，您可以使用表达式

```
sentences[i].match(/green/g).length) 
```

所以你的代码看起来像

```
for( s in sentences ){
  var occurences = 0;
  for( f in find_char )
    occurences += (sentences[s].match(new RegExp(find_char[f], "g")) || []).length
  output[s] = { 'sentence_no': s,  'occurance' : occurences};
} 
```

# objective-c - 将 NSImage 绘制成不同大小的矩形时，如何避免插值伪影？

> ID：11460640
> 
> 赞同：3
> 
> 时间：2012-07-12T21:03:34.130
> 
> 标签：objective-c, cocoa, image-processing, nsimage

我的最终目标是用 NSImage 填充任意大小的矩形。我想要：

1.  填充整个矩形
2.  保留图像的纵横比
3.  在保持 1) 和 2) 的同时尽可能多地显示图像
4.  当无法显示所有图像时，向中心裁剪。

这证明了我正在尝试做的事情。顶部的船的原始图像被绘制成下面各种大小的矩形。

![在此处输入图像描述](../Images/910b0b5eef02b1d13012d827325ba704.png)

好的，到目前为止一切顺利。我向 NSImage 添加了一个类别来执行此操作。

```
@implementation NSImage (Fill)

/**
 * Crops source to best fit the destination
 *
 * destRect is the rect in which we want to draw the image
 * sourceRect is the rect of the image
 */
-(NSRect)scaleAspectFillRect:(NSRect)destRect fromRect:(NSRect)sourceRect
{
    NSSize sourceSize = sourceRect.size;
    NSSize destSize = destRect.size;

    CGFloat sourceAspect = sourceSize.width / sourceSize.height;
    CGFloat destAspect = destSize.width / destSize.height;

    NSRect cropRect = NSZeroRect;

    if (sourceAspect > destAspect) { // source is proportionally wider than dest
        cropRect.size.height = sourceSize.height;
        cropRect.size.width = cropRect.size.height * destAspect;
        cropRect.origin.x = (sourceSize.width - cropRect.size.width) / 2;        
    } else { // dest is proportionally wider than source (or they are equal)
        cropRect.size.width = sourceSize.width;
        cropRect.size.height = cropRect.size.width / destAspect;
        cropRect.origin.y = (sourceSize.height - cropRect.size.height) / 2;
    }

    return cropRect;
}

- (void)drawScaledAspectFilledInRect:(NSRect)rect
{
    NSRect imageRect = NSMakeRect(0, 0, [self size].width, [self size].height);
    NSRect sourceRect = [self scaleAspectFillRect:rect fromRect:imageRect];

    [[NSGraphicsContext currentContext]
         setImageInterpolation:NSImageInterpolationHigh];

    [self drawInRect:rect
            fromRect:sourceRect
           operation:NSCompositeSourceOver
            fraction:1.0 respectFlipped:YES hints:nil];
}

@end 
```

当我想将图像绘制到某个矩形中时，我调用：

```
[myImage drawScaledAspectFilledInRect:onScreenRect]; 
```

工作得很好，除了一个问题。在某些尺寸下，图像看起来很模糊：

![在此处输入图像描述](../Images/52b5a3fa2770898be785e0e1165902bc.png)

我的第一个想法是我需要在整数像素上绘制，所以我在绘制之前使用了 NSIntegralRect()。没运气。

当我想到它时，我认为这可能是插值的结果。要从较大的图像绘制到较小的绘制矩形 NSImage 必须进行插值。模糊的图像可能只是值映射得不是很好的情况，我们最终会得到一些无法避免的不良伪影。

所以，问题是这样的：我如何选择一个避免这些伪影的最佳矩形？我可以在绘制之前调整绘制矩形或裁剪矩形以避免这种情况，但我不知道如何或何时调整它们。

# objective-c - UIScrollView 和 UIImageView 在屏幕上部分可见

> ID：11460642
> 
> 赞同：-1
> 
> 时间：2012-07-12T21:03:38.000
> 
> 标签：objective-c, uiscrollview, uiimageview

我有一个带有 UIImageView 的 UIScrollView 以启用缩放功能。

现在的问题是 scrollView 应该全屏显示（导航栏除外），但它显示有一个奇怪的“偏移量”。

由于图像解释了 1000 多个单词，这里是： [![](../Images/da62e4de5cd49aa470e00960bc228189.png)](https://i.stack.imgur.com/TzvDP.png)

红色矩形是显示的奇怪偏移量，而图像应该占据整个视图，但事实并非如此。如您所见，它正在被削减。

我尝试更改框架、边界等，但结果相同。

这是我的代码：

```
- (void)viewDidLoad
{   [super viewDidLoad];

    self.view.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];

    imageScrollView.bouncesZoom = YES;
    imageScrollView.delegate = self;
    imageScrollView.clipsToBounds = NO; // If set to yes, the image would be like the screen above
    imageView = [[UIImageView alloc] init];
    imageView.clipsToBounds = YES;

    imageScrollView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin);

    //activity indicator
    UIActivityIndicatorView *activityIndicator = [[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge] autorelease];
    activityIndicator.hidesWhenStopped = YES;
    activityIndicator.hidden = NO;
    activityIndicator.center = CGPointMake(self.imageView.frame.size.width /2, self.imageView.frame.size.height/2);
    [activityIndicator startAnimating];

    [imageView setImageWithURL:[NSURL URLWithString:tipImageString]
              placeholderImage:nil options:SDWebImageProgressiveDownload
                       success:^(UIImage *image) { [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }
                       failure:^(NSError *error) {  [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }];
    [imageView addSubview:activityIndicator];

    imageView.userInteractionEnabled = YES;
    imageView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin);
    imageView.center = [[imageScrollView window] center];
    imageView.contentMode = UIViewContentModeScaleAspectFit;
    [imageScrollView setContentMode:UIViewContentModeScaleAspectFit];
    [imageScrollView addSubview:imageView];
    imageScrollView.contentSize = self.imageView.image.size;    
    imageScrollView.decelerationRate = UIScrollViewDecelerationRateFast;

    CGSize boundsSize = self.imageScrollView.bounds.size;
    imageView.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
    CGRect frameToCenter = imageView.frame;

    // center horizontally
    if (frameToCenter.size.width < boundsSize.width)
        frameToCenter.origin.x = (boundsSize.width - frameToCenter.size.width) / 2;
    else
        frameToCenter.origin.x = 0;

    // center vertically
    if (frameToCenter.size.height < boundsSize.height)
        frameToCenter.origin.y = (boundsSize.height - frameToCenter.size.height) / 2;
    else
        frameToCenter.origin.y = 0;

    imageView.frame = frameToCenter;

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = 0.50;//[imageScrollView frame].size.width  / [imageView frame].size.width;
    imageScrollView.maximumZoomScale = 5.0;
    imageScrollView.minimumZoomScale = minimumScale;
    imageScrollView.zoomScale = minimumScale;
    [imageScrollView setContentMode:UIViewContentModeScaleAspectFit];
    [imageView sizeToFit];

    [imageScrollView setContentSize:CGSizeMake(imageView.frame.size.width, imageView.frame.size.height)];

} 
```

我尝试了一切，但没有成功！

我认为这是有框架的东西，但我不知道是什么。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:14:45.820

@Pheel 很高兴您因为`CGAffineTransformMakeRotation`图像而找到它。这可能会改变坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:50:26.400

尝试更改图像分辨率。另外，您是否尝试在视觉上放置滚动视图，然后将图像视图放置在 Interface Builder 中。完成后，您可以在 ViewDidLoad 等方法中对其进行初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:17:48.527

你为什么不这样做：

```
... set-up imageView...
imageView.frame = imageScrollView.bounds;
imageView.contentMode = UIViewContentModeScaleAspectFit;
[imageScrollView addSubview:imageView]; 
```

您的方法中有很多冗余或具有累积效应的代码（frame/center、contentMode、contentSize 的多次连续更改...），这使得很难知道是什么导致了什么（可能滚动视图正在剪辑图像视图，其中心首先基于窗口坐标而不是其父视图坐标，但最后不是，因为您重新定义了它的框架......）。您可能应该从头开始使用一些更简单的代码，具体取决于您想要什么以及您开始使用的配置（例如，滚动视图框架是什么？）。

# jquery - 带边距的可拖动仅在 Chromium 中无法正常工作

> ID：11460645
> 
> 赞同：4
> 
> 时间：2012-07-12T21:03:50.453
> 
> 标签：jquery, google-chrome, jquery-ui-draggable

我有一个可拖动的如下：

```
<div id="_splitter" style="width: 40px; height: 40px; position: relative; z-index: 1; margin: -20px -23px auto auto; border: 3px solid gray; opaciy:.5;"></div> 
```

在 Chrome 中，它仅在第一个 mouseup 事件之前才能正常工作。一旦 div 被拖动到一个新位置，下一次拖动会将元素移动到左上角的边距大小，所以当你第二次开始拖动它时，它看起来就像一个突然的跳跃。

该问题仅出现在 Chrome、FF 和 Opera 工作正常。谁能建议我如何让它在 Chrome 中工作？

**注意**：我想找到一个修复程序，而不是破解，我知道如果我删除/重新添加可拖动它可能会起作用，但这不是我所追求的。

这是一个重现的 HTML，抱歉没有小提琴：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>draggable</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js" type="text/javascript"></script> 
    <script type="text/javascript">
        $(document).ready(function () {

            $("#_splitter").draggable();
        });
    </script>
</head>
<body>
    <div>
        <div id="_splitter" 
            style="width: 40px; height: 40px; position: relative; z-index: 1; margin: 100px auto auto 100px; border: 3px solid gray; background-color: Green;"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:29:20.060

这个对我有用。我只是在 JSFiddle 中重新组织它，只是剪切和粘贴。

在这里查看[JSFiddle](http://jsfiddle.net/uRbmw/5/)

# php - 抑制 Codeigniter 中特定请求的所有错误

> ID：11460658
> 
> 赞同：2
> 
> 时间：2012-07-12T21:04:44.333
> 
> 标签：php, debugging, codeigniter

我正在开发一个 JSON 集成 Web 应用程序，当我在（通过 ajax）页面请求的服务器端收到一些（一些有意的）PHP 错误时，在客户端进行调试真的很烦人。出于调试目的，我想仅针对此特定页面/视图/控制器禁用对 PHP 和 DB 相关错误的所有调试。

我已经尝试将以下内容放在我的控制器顶部，根据我在互联网上找到的一些文章应该可以正常工作：

```
function index() {
    ini_set('display_errors', 0);
    $this->config->set_item('log_threshold', 0); 
```

虽然，这仍然给了我该死的错误。

我知道我需要禁用错误听起来很愚蠢，但是……相信我就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:33:20.820

您是否在 index.php 中将 ENVIRONMENT 常量更改为“生产”？它将关闭所有错误

> 在生产环境中，通常希望通过将内部 error_reporting 标志设置为值 0 来禁用 PHP 的错误报告。这会禁止将原生 PHP 错误呈现为可能包含敏感信息的输出。
> 
> 将 index.php 中 CodeIgniter 的 ENVIRONMENT 常量设置为“production”值将关闭这些错误。在开发模式下，建议使用“开发”值。有关区分环境的更多信息，请参见处理环境页面。

如果它没有帮助 - 尝试更新 CodeIgniter。

顺便说一句，这

```
$this->config->set_item('log_threshold', 0); 
```

只是文件记录。

如果你只需要关闭一页试试这个

```
ini_set('display_errors', 'Off');
error_reporting(0);
define('MP_DB_DEBUG', false); 
```

# mysql - MySQL 索引不起作用

> ID：11460662
> 
> 赞同：3
> 
> 时间：2012-07-12T21:04:50.103
> 
> 标签：mysql, indexing

我遇到了一个奇怪的 MySQL 索引问题。我有一张桌子`views_video`：

```
CREATE TABLE `views_video` (
  `video_id` smallint(5) unsigned NOT NULL,
  `record_date` date NOT NULL,
  `region` char(2) NOT NULL DEFAULT '',
  `views` mediumint(8) unsigned NOT NULL
  PRIMARY KEY (`video_id`,`record_date`,`region`),
  KEY `video_id` (`video_id`)
) 
```

该表包含 340 万条记录。

我`EXPLAIN`在这个查询上运行：

```
SELECT video_id, views FROM views_video where video_id <= 156 
```

我有：

```
+----+-------------+-------------+-------+------------------+----------+---------+------+--------+-------------+
| id | select_type | table       | type  | possible_keys    | key      | key_len | ref  | rows   | Extra       |
+----+-------------+-------------+-------+------------------+----------+---------+------+--------+-------------+
|  1 | SIMPLE      | views_video | range | PRIMARY,video_id | video_id | 2       | NULL | 587984 | Using where |
+----+-------------+-------------+-------+------------------+----------+---------+------+--------+-------------+ 
```

但是当我`EXPLAIN`在这个查询上运行时：

```
SELECT video_id, views FROM views_video where video_id <= 157 
```

我有：

```
+----+-------------+-------------+------+------------------+------+---------+------+---------+-------------+
| id | select_type | table       | type | possible_keys    | key  | key_len | ref  | rows    | Extra       |
+----+-------------+-------------+------+------------------+------+---------+------+---------+-------------+
|  1 | SIMPLE      | views_video | ALL  | PRIMARY,video_id | NULL | NULL    | NULL | 3412892 | Using where |
+----+-------------+-------------+------+------------------+------+---------+------+---------+-------------+ 
```

`video_id`是从1到1034。156到157之间没有什么特别的。

这里会发生什么？

*** 更新 ***

我在数据库中添加了更多数据。现在`video_id`是从 1 到 1064。表现在有 380 万条记录。差变成 114 和 115。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:15:32.583

如果您在创建表后添加/删除了大量数据，那么值得尝试对其进行 ANALYZE TABLE。它经常解决很多幻像索引问题，即使在大表上也非常快。

**更新：**此外，与表中的行数相比，唯一索引值非常低。当单个索引值指向太多行时，MySQL 不会使用索引。尝试使用属于主键的另一列进一步限制查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:27:54.060

可能是关键人群

运行这些

```
SELECT (COUNT(1)/20) INTO @FivePctOfData FROM views_video;
SELECT COUNT(1) videpidcount,video_id FROM FROM views_video
WHERE id <= 157 GROUP BY video_id; 
```

当其中一个键达到 5% 阈值时，查询优化器可能会休假。

你说有 340 万行。5% 将是 170,000。也许在查询优化器生命周期中的某个时间点超过了这个数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T21:42:38.287

我猜有 340 万条记录，而您的密钥只有 1064 个可能的条目，您的选择性非常低。（换句话说，有很多重复项，这使得它作为键的用处要小得多。）优化器正在做出最好的猜测，是否使用该键更有效。您已经找到了该决定的门槛。

# vim - Vim：删除包含模式的所有行的直到字符

> ID：11460663
> 
> 赞同：3
> 
> 时间：2012-07-12T21:04:52.583
> 
> 标签：vim

我正在学习[g 的力量，](http://vim.wikia.com/wiki/Power_of_g)并想删除所有包含表达式的行，直到句子的末尾（用句号标记）。像这样：

`There was a little sheep. The sheep was black. There was another sheep.`

（运行命令查找所有喜欢的句子`There was`并删除到下一个句号）。

`The sheep was black.`

我试过了：

1.  `:g/There was/d\/\.`试图“删除到下一个时期”，但我得到一个`trailing characters`错误。
2.  `:g/There was/df.`但得到一个`df. is not an editor command error.`

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:30:38.270

与 相关的动作`g`必须能够在不需要来自`g`暗示的模式匹配的位置信息的情况下作用于该行。在您使用的命令中，delete forward 命令需要一个未提供的起始位置。

问题是`g`它只表示行匹配，而不是模式匹配的特定字符位置。我做了以下事情，它做了我认为你想要的：

```
:g/There was/s/There was[^.]*[.]// 
```

这找到了与 pattern 匹配的行，并用空字符串`There was`执行了正则表达式的替换。`There was[^.]*[.]`

这相当于：

```
:1,$s/There was[^.]*[.]//g 
```

除了自动应用到整个文件行范围（与or相同）之外，我不确定`g`在您的用例中得到了什么。在后一个示例中，与将替换应用于同一行上的所有模式有关，而不是与受替换命令影响的行范围有关。`1,$``%``g`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:13:58.683

我只会使用正则表达式：

```
%s/There was\_.\{-}\.\s\?//ge 
```

注意如何`\_.`允许跨行句子

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T22:12:30.293

你可以`:norm`这样使用：

`:g/There was/norm 0weldf.`

这会找到带有“There was”的行，然后执行正常的命令`0weldf.`。

`0`: 到行首
`w`: 到下一个单词 (在本例中是 "was")
`e`: 到词尾 (所以光标在 "was" 的 's' 上)
`l`: 向右移动一个字符 (所以我们不会删除任何 "was")
`df.`：删除直到下一个 '.'，包括在内。

如果您想保留期间使用`dt.`而不是`df.`.

如果你不想从行首删除，而是想做句子，`:%s`这里的命令可能更合适。（例如`:%s/\(There was\)[^.]*\./\1/g`，或者`%s/\(There was\)[^.]*\./\1./g`如果您想在句末保留句号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T21:13:14.587

使用[搜索和替换](http://vim.wikia.com/wiki/Search_and_replace)：

```
:%s/There was[^.]*\.\s*//g 
```

# c# - 单击行中的按钮时获取 ListView 项

> ID：11460665
> 
> 赞同：5
> 
> 时间：2012-07-12T21:04:55.077
> 
> 标签：c#, listview

我有一个`ListView`创建表的。表格中的每一行都有两个按钮 - 删除和修改。我正在为每个按钮触发一个单击事件，但我不确定如何获取单击按钮所在行中数据的句柄。

aspx

```
<asp:ListView runat="server" ID="usersListView">
    <LayoutTemplate>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>User Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <asp:PlaceHolder runat="server" ID="groupPlaceHolder"/>
            </tbody>
        </table>
    </LayoutTemplate>
    <GroupTemplate>
        <tr>
            <asp:PlaceHolder runat="server" ID="itemPlaceHolder"/>
        </tr>
    </GroupTemplate>
    <ItemTemplate>
        <td><%# Eval("user.UserName") %></td>
        <td><%# Eval("user.Email") %></td>
        <td><%# Eval("roles") %></td>
        <td>
            <button runat="server" id="modify" class="btn btn-mini" title="Modify" onclick="modify_OnClick">
                <i class="icon-edit"></i>
            </button>&nbsp;
            <button runat="server" id="delete" class="btn btn-mini" title="Delete" onclick="delete_OnClick">
                <i class="icon-trash"></i>
            </button>
        </td>
    </ItemTemplate>
</asp:ListView> 
```

aspx.cs

```
public void delete_Onclick(object sender, EventArgs e) {

}

public void modify_Onclick(object sender, EventArgs e) {

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T21:22:04.863

我将尝试回答标题中的问题，因为我不了解问题本身。

您可以将 the`sender`转换为 Button。Button`NamingContainer`是[`ListViewItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewitem.aspx). 您可以使用它来获得该项目中的所有其他控件，方法是使用`item.FindControl("OtherControlID")`.

例如;

```
public void delete_Onclick(object sender, EventArgs e) {
    var btn = (Button)sender;
    var item = (ListViewItem)btn.NamingContainer;
    // find other controls:
    var btnModify = (Button)item.FindControl("modify");
} 
```

您找不到不在服务器控件中的文本。但是您可以使用`LiteralControl`or`Label`来显示用户名或电子邮件。

```
<td><asp:Label id="Label1" runat="server"
          Text='<%# Eval("user.UserName") %>' />
</td> 
```

现在您可以使用`FindControl`如上所示在代码隐藏中获取对标签的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:56:10.310

我知道2个解决方案：

* * *

1-命令名称和命令参数如下

* * *

2-**您可以使用链接而不是按钮**并将包含记录ID的查询字符串发送到您所在的同一页面，并在代码后面（页面加载）中获取查询字符串并将其用于删除sqlcommadns或将其重定向到另一个页面进行编辑目的，最后 Response.Redirect() 再次到您所在的同一页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:28:15.773

您应该使用 GridView，因为数据是表格的。无论如何，您都可以实现 ItemCommand 事件。MSDN 页面有[一个示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcommand.aspx)。

您可以自定义控件`CommandName`的`CommandArgument`属性`Button`。可以使 CommandArgument 包含一些 ID 或相关信息。

# ruby-on-rails - Rails - 更改关联不会将对象标记为脏

> ID：11460667
> 
> 赞同：3
> 
> 时间：2012-07-12T21:05:00.870
> 
> 标签：ruby-on-rails, activerecord

**编辑**：添加了说明

给定以下两个类

```
class Foo < ActiveRecord::Base
  belongs_to :bar
end

class Bar < ActiveRecord::Base
end 
```

当我更改 foo 上的条时，我想要一种方法来查看 foo 实例已更改：

```
foo = Foo.find(x)
foo.bar      # returns #<Bar id:1>
foo.bar = Bar.new
foo.changed? # returns false
foo.changes  # returns an empty hash 
```

我不想将 bar_id 设置为脏（因为它没有改变）拥有以下内容会很好：

```
foo.changed? # returns true
foo.changes  # returns {:bar => [#<Bar id: 1>, nil]} 
```

有没有一种聪明的方法可以将它破解到 Rails 中？这不是 Rails 的一部分有什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:16:45.813

我今天遇到了同样的问题，在运行 rails-source 之后，我找到了一个解决方法，如果我以正确的方式解决了你的问题，那么它应该可以满足你的想法。

转移到您的示例代码应如下所示：

```
class Foo < ActiveRecord::Base
  belongs_to :bar

  def info
    bar.info
  end

  def info=(val)
    @changed_attributes[:info] = self.info unless val == self.info
    self.time_entry.update_attributes! :info => val
  end
end

class Bar < ActiveRecord::Base
  attr_accessible :info
end 
```

这样你就可以调用 .changed? 和 .changes 对 Foo 类的对象。

希望这会有所帮助，即使答案来晚了:)

亲切的问候基督徒

*顺便提一句。对不起英语不好。我正在努力研究我的红宝石技能；）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:48:12.060

你用的是什么版本的 Rails？当我测试它时，它确实报告真实。

无论如何，我不确定是否可以为 belongs_to 使用 after assign 回调。这个 [https://github.com/rails/rails/issues/586有一张票](https://github.com/rails/rails/issues/586)

如果没有，您可以重写 assign 方法（我之前没有尝试过，但我认为它会起作用 :) 所以请告诉我）

```
class Foo < ActiveRecord::Base
  belongs_to :bar

  def bar=(b)
    bar_id_will_change! unless bar_id == b.id
    super        
  end

end 
```

更新：再次阅读您的问题，我什至不确定我是否理解了所有内容。如果它没有改变，你希望它仍然报告真实吗？即使再次分配相同的对象，对吗？在这种情况下，您可以移除`unless bar_id == b.id`零件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-06T07:22:13.023

由于`@changed_attributes`Rails 5.1 中的更改，我不得不求助于使用虚拟属性 (attr_accessor) 来指示检查后更改的关联。从长远来看，这可能比弄乱 Rails 内部相关的更好`ActiveRecord::Dirty`

# python - 在 SQLite (Python) 中将变量字符串传递给 LIKE

> ID：11460671
> 
> 赞同：2
> 
> 时间：2012-07-12T21:05:10.353
> 
> 标签：python, string, sqlite, variables, sql-like

所以我一直在环顾四周，但似乎无法找到一个看似简单且可能是常见问题的答案。在 SQLite 中，我有一个要通过用户定义的搜索文本传递的查询。

```
search = xChatMessageSplit[2]

c.execute("SELECT * FROM captured WHERE Nick=? AND Name LIKE '%search%'",(xChatNick,search)) 
```

显然语法或任何不正确的东西，因为我遇到了错误，但我想基本上允许用户为字符串定义一个搜索词“搜索”。我该怎么做呢？我尝试使用 REGEXP 但我似乎无法弄清楚如何定义函数所以我想我会选择 LIKE 因为它已经实现到 SQLite3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:08:00.890

您需要使用`?`来显示参数值的使用位置。

```
c.execute("""SELECT * FROM captured
             WHERE Nick=?
             AND Name LIKE ('%' || ? || '%')""", (xChatNick,search)) 
```

# php - PHP 观察者模式，问题

> ID：11460673
> 
> 赞同：0
> 
> 时间：2012-07-12T21:05:21.917
> 
> 标签：php, design-patterns, spl

Bellow 是一个 PHP 脚本。

我试图实现观察者模式（没有 MVC 结构）......只是基本的。

遇到的错误已在注释中指定。首先，我尝试将 User 对象添加到 UsersLibrary 存储库。出现诸如 User::update() 不存在之类的错误。

为什么会遇到这个错误？应该应用什么修复以及如何应用？

```
 interface IObserver {
       public function update(IObservable $sender);
   }
   interface IObservable   {
       public function addObserver(IObserver $obj);
       public function notify();
   }
   class UsersLibrary implements IObservable {
        private $container;
        private $contor;
    //private $z;
    public function __construct() {//IObserver $a)   {
        $this->container = array();
        $this->contor = 0;
        echo "<div>[constructing UsersLibrary...]</div>";
        $this->addObserver(new Logger());
        //$this->z = $a;
    }
    public function add($obj)  {
        echo "<div>[adding a new user...]</div>";
        $this->container[$this->contor] = $obj;
        $this->contor++;
        $this->notify();
    }
    public function get($index) {
        return $this->container[$index];
    }
    public function addObserver(IObserver $obj) {
        $this->container[] = $obj;
    }
    public function notify()    {
        echo "<div>[notification in progress...]</div>";
        foreach($this->container as $temp) {
            //echo $temp;
            #################################################################
            $temp->update(); //--------ERROR
        //Fatal Error: Call to a member function update() on a non-object.
            #################################################################
        }
        //$this->container[0]->update();
        //$this->z->update($this);
    }
}
class User   {
    private $id;
    private $name;
    public function __construct($id, $name) {
        $this->id = $id;
        $this->name = $name;
    }
    public function getId() {
        return $this->id;
    }
    public function getName()   {
        return $this->name;
    }
}
class Logger implements IObserver   {
    public function __construct()   {
        echo "<div>[constructing Logger...]</div>";
    }
    public function update(IObservable $sender) {
        echo "<div>A new user has been added.</div>";
    }
}
$a = new UsersLibrary(); //new Logger());
//$a->add(new User(1, "DemoUser1"));
//$a->add(new User(2, "DemoUser2"));
$a->add("Demo");
echo $a->get(0);
//echo $a->get(0)->getName(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:24:51.047

您的`User`类没有实现`interface IObserver`，因此没有强制使用该方法`update()`。

您必须实例化 a`new User()`才能将其添加到`UsersLibrary`：

```
$library = new UsersLibrary();
$user = new User(1, "Demo");
$library->add($user); 
```

此外，您正在将**用户**和记录器混合到您的**UsersLibrary**容器中。也许考虑为他们分离容器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:11:03.733

您在`$a->add()`调用中传递的是字符串而不是对象。您应该传入一个对象，或者更改 UserLibrary::add() 中的代码以将其参数包装在适当的对象中（或者对其进行对象查找以看到一个字符串，例如查找具有该名称的用户）。

```
$user = new User(1, "Demo");
$a = new UsersLibrary();
$a->add($user); 
```

# c++ - OpenGL3 SFML 2.0rc FPS 风格的相机 - 摇晃的鼠标移动

> ID：11460674
> 
> 赞同：0
> 
> 时间：2012-07-12T21:05:24.717
> 
> 标签：c++, sfml, opengl-3

我正在尝试为我的项目制作第一人称射击风格的相机。如果我向前或向后移动，向左或向右扫射，或对角线移动，一切看起来都很顺利......问题是当我在移动时用鼠标环顾四周时，动作变得非常紧张。当我同时用鼠标扫射和转动时，它最突出。

我确信我的问题与此类似：[http](http://en.sfml-dev.org/forums/index.php?topic=4833.msg31550#msg31550) ://en.sfml-dev.org/forums/index.php?topic=4833.msg31550#msg31550 ，但是我使用的是 Gentoo Linux，而不是 OSX。

不过，这很可能不是 SFML 的错，而且我做错了什么，所以我想获得一些关于我的事件处理代码的反馈，看看是否有更好的方法来获得平滑的鼠标移动。

如果您不想阅读我发布的链接，我认为正在发生的事情是当我将鼠标的位置设置回屏​​幕中心时，每帧鼠标移动速度都会丢失，这会导致屏幕上快速可见的混蛋。这是我的理论，因为我已经尝试改变其他东西 3 天了，但我没有做任何事情让它变得不那么生涩。所以我想知道是否有人有更好的方法来处理鼠标移动，或者你是否认为问题出在其他地方。

一个重要的注意事项是我启用了 vsync，这使得很多其他的抖动和撕裂消失了，我尝试使用像 sf::Window::setFramerateLimit(60) 这样的硬帧率限制，但这根本没有帮助。

这是事件处理程序（它使用 SFML 2.0 实时接口而不是事件循环），您可能可以忽略与跳转相关的部分：

```
void Test_World::handle_events(float& time)
{
    // camera stuff
    _mouse_x_pos = sf::Mouse::getPosition(*_window).x;
    _mouse_y_pos = sf::Mouse::getPosition(*_window).y;

    std::cout << "mouse x: " << _mouse_x_pos << std::endl;
    std::cout << "mouse y: " << _mouse_y_pos << std::endl;

    _horizontal_angle += time * _mouse_speed * float(_resolution_width/2 - _mouse_x_pos);
    _vertical_angle += time * _mouse_speed * float(_resolution_height/2 - _mouse_y_pos);

    // clamp rotation angle between 0 - 2*PI
    if (_horizontal_angle > 3.14f*2) _horizontal_angle = 0;
    if (_horizontal_angle < 0) _horizontal_angle = 3.14f*2;

    // clamp camera up/down values so we can't go upside down
    if (_vertical_angle >= 3.14f/2.0f) _vertical_angle = 3.14f/2.0f;
    if (_vertical_angle <= -3.14f/2.0f) _vertical_angle = -3.14f/2.0f;

    std::cout << "horiz angle: " << _horizontal_angle << std::endl;
    std::cout << "vert angle: " << _vertical_angle << std::endl;

    _direction = glm::vec3( cos(_vertical_angle) * sin(_horizontal_angle),
                            sin(_vertical_angle),
                            cos(_vertical_angle) * cos(_horizontal_angle) );

    _right = glm::vec3( sin(_horizontal_angle - 3.14f/2.0f),
                        0,
                        cos(_horizontal_angle - 3.14f/2.0f) );

    _up = glm::cross( _right, _direction );

    // keyboard: left, right, up, down
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Left) || sf::Keyboard::isKeyPressed(sf::Keyboard::A))
    {
        if (_jumping)
        {
            _position -= _right * time * _speed * ((_jump_speed/2) + 0.1f);
        }
        else
        {
            _position -= _right * time * _speed;
        }
    }
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Right) || sf::Keyboard::isKeyPressed(sf::Keyboard::D))
    {
        if (_jumping)
        {
            _position += _right * time * _speed * ((_jump_speed/2) + 0.1f);
        }
        else
        {
            _position += _right * time * _speed;
        }
    }
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Up) || sf::Keyboard::isKeyPressed(sf::Keyboard::W))
    {
        glm::vec3 old_direction(_direction);
        _direction.y = 0;

        if (_jumping)
        {
            _position += _direction * time * _speed * ((_jump_speed/2) + 0.1f);
        }
        else
        {
            _position += _direction * time * _speed;
        }

        _direction = old_direction;
    }
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Down) || sf::Keyboard::isKeyPressed(sf::Keyboard::S))
    {
        glm::vec3 old_direction(_direction);
        _direction.y = 0;

        if (_jumping)
            _position -= _direction * time * _speed * ((_jump_speed/2) + 0.1f);
        else
            _position -= _direction * time * _speed;

        _direction = old_direction;
    }

    // keyboard: jump
    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Space) || sf::Keyboard::isKeyPressed(sf::Keyboard::RControl))
    {
        // check if standing on something
        if (_standing)
        {
            _standing = false;
            _jumping = true;
        }
    }

    // apply gravity if off the ground
    if (_position.y > _main_character_height && !_jumping)
        _position.y -= time * _speed * _global_gravity;

    // if started jumping
    else if (_position.y < _main_character_height + _jump_height - 3.0f && _jumping)
    {
        if (sf::Keyboard::isKeyPressed(sf::Keyboard::Space) || sf::Keyboard::isKeyPressed(sf::Keyboard::RControl))
        {
            _position.y += time * _speed * _jump_speed;
        }
        else    // if stopped jumping
        {
            _position += _direction * time * (_speed/(_jump_hang_time*2));
            _jumping = false;
        }
    }

    // if near the highest part of the jump
    else if (_position.y <= _main_character_height + _jump_height && _jumping)
    {
        if (sf::Keyboard::isKeyPressed(sf::Keyboard::Space) || sf::Keyboard::isKeyPressed(sf::Keyboard::RControl))
        {
            _position.y += time * _speed * (_jump_speed/_jump_hang_time);
        }
        else    // if stopped jumping
        {
            _position += _direction * time * (_speed/(_jump_hang_time*2));
            _jumping = false;
        }
    }

    // if reached the highest part of the jump
    else if (_position.y >= _main_character_height + _jump_height)
    {
        _position += _direction * time * (_speed/_jump_hang_time);
        _jumping = false;
    }
    else if (_position.y <= _main_character_height)
    {
        _standing = true;
    }

    sf::Mouse::setPosition(_middle_of_window, *_window);
} 
```

事件发生后，我正在像这样更改我的 _view_matrix：

```
_view_matrix = glm::lookAt( _position, _position+_direction, _up ); 
```

然后，我重新计算我的 _modelview_matrix 和 _modelviewprojection_matrix：

```
_modelview_matrix = _view_matrix * _model_matrix;
_modelviewprojection_matrix = _projection_matrix * _modelview_matrix; 
```

之后，我最终将矩阵发送到我的着色器并绘制场景。

对于 OpenGL3、SFML 2.0 和/或 FPS 风格的相机处理，我愿意接受任何睿智的智慧/建议，请让我知道它是否有助于包含更多代码（如果您认为问题不在例如事件处理）。在此先感谢您的帮助！

**编辑：**我还没有解决这个问题，仅供参考，在摇晃的动作中看起来帧速率根本没有下降......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:40:03.437

如果我是你，我会使用[本教程](https://github.com/LaurentGomila/SFML/wiki/TutorialChangeCursor)隐藏鼠标，然后只在鼠标到达屏幕边缘时移动鼠标位置，将其移动到另一侧，这样它就可以不受阻碍地继续朝那个方向前进。可能不是最好的解决方案，但我很确定它会解决您的问题。

...另一个想法是对他们正在做的事情进行一些记忆和推算，而不是使用位置数据本身，而只是使用位置数据来指导推算（即使用物理来控制它而不是原始数据）。

只是我的想法，希望对你有所帮助^^

# ruby-on-rails - 如何在 Rails 中动态添加内容？

> ID：11460676
> 
> 赞同：1
> 
> 时间：2012-07-12T21:05:30.553
> 
> 标签：ruby-on-rails

我有一个名为 list.html.erb 的页面的控制器

当用户单击链接时，我想将内容动态附加到页面并随后执行 javascript。是否有可能有一种方法来呈现 js.erb 文件并将包含内容的变量放入该文件中？

最好的菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:12:16.030

如那里所述： http: [//api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)您需要使用

```
link_to 'Something', 'somewhere', remote: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:16:11.653

是的当然。不过，这可能不是最好的做法。

如果您通过 Javascript 增强视图的功能，最好将代码保留在 Javascript 中，而不是 Ruby 生成的 Javascript。

创建一个简单的 HTML 链接，以 JSON 格式或什至作为 HTML 片段从控制器获取新内容。使用诸如 $.ajax 及其成功回调函数之类的东西将所述响应附加到页面中的元素。

```
$.ajax({
  url: "whatever/here",
  type: "GET",
  data_type: "json",
  success: function(response) {
    $("#element_in_question").append(response); //if HTML; if JSON, parse and build the HTML
  },
  error: function(xhr, status, message) {
    //indicate failure somehow
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:22:59.327

您可以在 list.html.erb 中包含部分内容，并在更改页面 list.html.erb 上的某些内容时显示部分内容。例如考虑您的 list.html.erb 文件，您可以在页面中包含以下内容

```
<form_for :something, :remote => true, :method => get :url => {:action => "partial"} do |f| %>

//write your code here

<%=f.submit%> //here you can have :onchange in the form_for tag if you do not want a submit button 
```

在您的列表页面中为部分写一个部门，如下所示

```
<div id="partial">
</div> 
```

像这样写一个 partial.js.erb 文件：

```
$('#partial').html("<%=j render "partial" %>"); 
```

`_partial.html.erb`使用要动态添加 list.html.erb 的内容创建一个文件。

在控制器中，添加以下代码：

```
def partial
//write your code here
respond_to do |format|
format.js
end 
```

这将在您的列表页面的 div 标签中显示添加的内容，其中 div id 为“partial”

# html - 在 HTML/CSS 中将图像转换为灰度并保存新图像

> ID：11460679
> 
> 赞同：1
> 
> 时间：2012-07-12T21:05:45.517
> 
> 标签：html, css, image

无论如何我可以通过在（html和css）中添加过滤器将图像转换为灰度或其他类型，然后将新图像保存回服务器。

这就是我所拥有的，我希望能够保持灰度页面静止并将其保存为新照片我也有 svg 文件

```
<title>canvas image manipulation</title>
<style>
    img {
filter: none;
        -webkit-filter: grayscale(0);

    }

    img:hover {
        filter: url(filters.svg#grayscale); /* Firefox */
        filter: gray; /* IE */
        -webkit-filter: grayscale(1); /* Webkit */
    }
</style>
</head>
<body>

<img src="profile.jpg">
<input type="button" class="img:hover" value="button"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:09:03.200

此链接可能对您有所帮助：http: [//www.html5rocks.com/en/tutorials/canvas/imagefilters/](http://www.html5rocks.com/en/tutorials/canvas/imagefilters/)

至于在服务器上重新保存它，我认为只要 HTML 过滤图像，您就不需要这样做。

# r - 将 t.test 应用于大型矩阵的每一列的最快方法是什么？

> ID：11460680
> 
> 赞同：6
> 
> 时间：2012-07-12T21:05:46.197
> 
> 标签：r, matrix, statistics, apply, hypothesis-test

假设我有一个大矩阵：

```
M <- matrix(rnorm(1e7),nrow=20) 
```

进一步假设每一列代表一个样本。假设我想申请`t.test()`每一列，有没有比使用快得多的方法`apply()`？

```
apply(M, 2, t.test) 
```

在我的电脑上运行分析只用了不到 2 分钟：

```
> system.time(invisible( apply(M, 2, t.test)))
user  system elapsed 
113.513   0.663 113.519 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T07:55:55.377

`colttests`您可以使用包中的功能`genefilter`（在 Bioconductor 上）做得比这更好。

```
> library(genefilter)
> M <- matrix(rnorm(40),nrow=20)
> my.t.test <- function(c){
+   n <- sqrt(length(c))
+   mean(c)*n/sd(c)
+ }
> x1 <- apply(M, 2, function(c) my.t.test(c))
> x2 <- colttests(M, gl(1, nrow(M)))[,"statistic"]
> all.equal(x1, x2)
[1] TRUE
> M <- matrix(rnorm(1e7), nrow=20)
> system.time(invisible(apply(M, 2, function(c) my.t.test(c))))
   user  system elapsed 
 27.386   0.004  27.445 
> system.time(invisible(colttests(M, gl(1, nrow(M)))[,"statistic"]))
   user  system elapsed 
  0.412   0.000   0.414 
```

参考：“在 R 中同时计算数千个测试统计数据”，SCGN，第 18 (1) 卷，2007 年，[http](http://stat-computing.org/newsletter/issues/scgn-18-1.pdf) ://stat-computing.org/newsletter/issues/scgn-18-1.pdf 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T21:31:57.293

如果您有一台多核机器，则使用所有内核会有一些好处，例如使用`mclapply`.

```
> library(multicore)
> M <- matrix(rnorm(40),nrow=20)
> x1 <- apply(M, 2, t.test)
> x2 <- mclapply(1:dim(M)[2], function(i) t.test(M[,i]))
> all.equal(x1, x2)
[1] "Component 1: Component 9: 1 string mismatch" "Component 2: Component 9: 1 string mismatch"
# str(x1) and str(x2) show that the difference is immaterial 
```

这个小例子表明事情按我们的计划进行。现在放大：

```
> M <- matrix(rnorm(1e7), nrow=20)
> system.time(invisible(apply(M, 2, t.test)))
   user  system elapsed 
101.346   0.626 101.859
> system.time(invisible(mclapply(1:dim(M)[2], function(i) t.test(M[,i]))))
  user  system elapsed 
55.049   2.527  43.668 
```

这是使用 8 个虚拟内核。你的旅费可能会改变。不是很大的收获，但它来自很少的努力。

**编辑**

如果您只关心 t 统计量本身，那么提取相应的字段 ( `$statistic`) 会使事情变得更快，尤其是在多核情况下：

```
> system.time(invisible(apply(M, 2, function(c) t.test(c)$statistic)))
   user  system elapsed 
 80.920   0.437  82.109 
> system.time(invisible(mclapply(1:dim(M)[2], function(i) t.test(M[,i])$statistic)))
   user  system elapsed 
 21.246   1.367  24.107 
```

甚至更快，直接计算t值

```
my.t.test <- function(c){
  n <- sqrt(length(c))
  mean(c)*n/sd(c)
} 
```

然后

```
> system.time(invisible(apply(M, 2, function(c) my.t.test(c))))
   user  system elapsed 
 21.371   0.247  21.532 
> system.time(invisible(mclapply(1:dim(M)[2], function(i) my.t.test(M[,i]))))
   user  system elapsed 
144.161   8.658   6.313 
```

# python - 使用 pip 列出包的依赖项

> ID：11460681
> 
> 赞同：89
> 
> 时间：2012-07-12T21:05:46.407
> 
> 标签：python, pip

如何使用 pip 列出包的依赖项？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-06-25T20:23:29.473

在当前的 pip（版本 1.3.1）中，您可以使用以下命令查看已安装包的依赖项：

```
pip show <package> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-12T23:17:01.480

请注意，这个 2012 年的答案已经过时了。首先，解决方法，答案已经说过你可能在 2012 年不应该这样做，现在你*不能*这样做。如果您想要类似的解决方法，您可以使用`pip download`，但它更不可能是您想要的。特别是自从`pip show`得到了改进。幸运的是，该问题已被标记为后续问题的副本，因此除了历史目的外，没有理由阅读此答案。

* * *

你不能，至少不能直接。

您可以在自己的代码中导入 pip 模块并下载需求文件，然后对其进行迭代。或者，从命令行，您可以`pip install --no-install --verbose`.

但实际上，除非这是您需要自动化的东西，否则只需转到[http://pypi.python.org/](http://pypi.python.org/)并在那里搜索包而不是使用 pip 可能更容易。

# android - 在android中将纪元日期转换为人类可读格式

> ID：11460684
> 
> 赞同：0
> 
> 时间：2012-07-12T21:05:56.640
> 
> 标签：android

我有一个问题，我有一个来自 Web 服务的纪元日期，我想以 2012 年 7 月 12 日的人类可读格式显示它，但我的代码始终显示 16/01/1970 任何纪元日期。我不知道我错在哪里或如何在 Java 中将 Epoch Date 转换为 Date。请向我建议任何有关相同的解决方案。

**代码：**

```
Date.setText(new java.text.SimpleDateFormat("dd/MM/yyyy").format(new java.util.Date(Long.parseLong(newsDetail.getDate_Posted())))); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:38:40.927

我有一种预感，即`Long.parseLong(newsDetail.getDate_Posted())`从 epoch 返回 seconds 而不是*milliseconds*。

如果您总是看到 16/01/1970，那么`Long.parseLong(newsDetail.getDate_Posted())`它介于 1296000000 和 1382400000 之间。事实证明，如果我将这些最小和最大数字乘以 1000，我会看到**26/1/2011**和**21/10/2013**之间的日期。我猜你期待的日期在这个新范围内。

尝试使用：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
date.setText(sdf.format(new Date(Long.parseLong(newsDetail.getDate_Posted()) * 1000))); 
```

# php - 同步写入 MongoDB

> ID：11460686
> 
> 赞同：1
> 
> 时间：2012-07-12T21:06:00.923
> 
> 标签：php, mongodb, insert

有2个数组。

```
$director = array("name" => "James Cameron");
$cursor = collection("persones")->find( array("name" => "James Cameron") )->limit(1);
if ($cursor->count(true) == 0) {collection("persones")->insert($director);}

$actor = array("name" => "James Cameron", "name" => "Arnold Schwarzenegge");
$cursor = collection("persones")->find( array("name" => "James Cameron") )->limit(1);
if ($cursor->count(true) == 0) {collection("persones")->insert($actor);} 
```

添加所有董事。检查数据库中是否有人，如果没有，然后添加。既然加了一个异步，那么导演还没有加，又加了一个演员，又加了2次。詹姆斯卡梅隆第二次被添加到基地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:37:44.527

看起来您想要做的是插入许多文档，确保“名称”字段的每个不同值只有一个条目。

在 MongoDB 中有两种常见的方法可以做到这一点。

第一个是在“名称”键上创建唯一索引并使用“安全”模式进行插入。如果您以这种方式进行插入，当您尝试插入重复值时，PHP 将抛出异常。

```
// In the mongo shell:
db.test.ensureIndex( {name: 1}, {unique:true} );

// In PHP:
$data = array('name' => 'Art Pip');
$options = array('safe' => true );

try {
    $collection->insert($data, $options);
} catch (Exception $e) {
    echo "Insert failed\n";
    echo "Error message: ".$e->getMessage()."\n";
    echo "Error code: ".$e->getCode()."\n";
} 
```

参考：[http ://www.php.net/manual/en/mongocollection.insert.php](http://www.php.net/manual/en/mongocollection.insert.php)

请注意，如果您要查询“名称”，出于性能原因，无论如何您都希望在其上建立索引。使其成为唯一索引基本上不会增加​​此过程的开销。

第二种方法是做一个“upsert”。这是一个更新命令，表示“如果存在则更新此文档，如果尚不存在则创建它”。如果您以这种方式进行插入，您也不会得到任何重复。

```
// In PHP
$data = array('name' => 'James Cameron');
$criteria = array('name' => 'James Cameron');
$options = array('upsert' => true, 'safe' => true );

try {
    $collection->update($criteria, $data, $options);
} catch (Exception $e) {
    echo "Insert failed\n";
    echo "Error message: ".$e->getMessage()."\n";
    echo "Error code: ".$e->getCode()."\n";
} 
```

参考：[http ://www.php.net/manual/en/mongocollection.update.php](http://www.php.net/manual/en/mongocollection.update.php)

顺便说一句 - 没有什么可以阻止您使用*这两种*技术。您可以使用“upsert”来提高速度，并将唯一索引作为附加检查。

最后一点，您使用的代码并没有像我认为的那样做。

如果您运行以下代码：

```
$actor = array("name" => "James Cameron", "name" => "Arnold Schwarzenegger");
print_r($actor); 
```

您将看到以下输出：

```
Array
(
    [name] => Arnold Schwarzenegger
) 
```

# c++ - c++和matlab浮点计算

> ID：11460693
> 
> 赞同：0
> 
> 时间：2012-07-12T21:06:36.163
> 
> 标签：c++, matlab, floating-point

有人可以告诉我 c++ 和 matlab 是否使用相同的浮点计算实现吗？我会在 C++ 中获得与在 Matlab 中相同的值吗？

目前，我将 Matlab 代码翻译成 C++ 时存在这些差异：

```
Matlab: R = 1.0000000001623, I = -3.07178893432791e-010, C = -3.79693498864242e-011

C++:    R = 1.00000000340128 I = -3.96890964537988e-009  Z = 2.66864907949582e-009 
```

如果不是，有什么区别，我在哪里可以找到更多关于浮点计算实现的信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:28:37.453

虽然不清楚你的数字实际上是什么，但第一个（也是最大的）数字的相对差异约为 1e-8，这是许多双精度算法的相对容差。

浮点数只是实数系统的近似值，它们的有限大小（双精度为 64 位）限制了它们的精度。由于这种有限的精度，涉及浮点数的运算可能会产生舍入误差，因此不是严格关联的。这意味着 A+(B+C) != (A+B)+C。两者之间的差异通常很小，具体取决于它们的相对大小，但并不总是为零。

这意味着当您将 Matlab 中编码的算法与 C++ 中的算法进行比较时，您应该期望相对值和绝对值存在微小差异。不同之处可能在于库（即，不能保证 Matlab 将系统数学库用于例程，例如`sqrt`），或者可能只是您的 C++ 和 Matlab 实现对它们的操作排序不同。

Boost::Test 中关于[浮点比较测试](http://www.boost.org/doc/libs/1_50_0/libs/test/doc/html/utf/testing-tools/floating_point_comparison.html)的部分对此进行了一些讨论，并提供了一些很好的参考资料。特别是，您可能应该阅读[每个计算机科学家应该知道的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的知识，并考虑拿起一份 Knuth 的[TAOCP Vol. 二](https://rads.stackoverflow.com/amzn/click/com/0201896842)．

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:48:35.970

Matlab 默认使用双浮点精度，C 浮点使用单浮点精度。

浮点的表示在两者之间是相同的，要么是处理器，要么是我相信的标准。但如前所述，浮点数非常多变，您总是必须允许一些容忍度。如果您执行复杂的操作，例如下面的操作，您将经常得到一个非零数，尽管代数告诉您并非如此。使用 matlab 和 c 如何完成操作之间的幕后东西将允许一些差异。只要确保它们靠近即可。

```
((3*pi+2)*5-9)/2-7.5*pi-3 
```

# android - 带有 ProgessBar 的启动画面

> ID：11460697
> 
> 赞同：1
> 
> 时间：2012-07-12T21:06:54.360
> 
> 标签：android, mono, xamarin.android

> **可能重复：**
> [Android Activity 生命周期](https://stackoverflow.com/questions/11438085/android-activity-life-cycle)

我可以使用主题为我的应用程序创建一个简单的启动画面，并且效果很好。但是，有时应用程序可能需要刷新大量数据，我想向用户显示一个 ProgressBar，让他们知道他们在等待时发生了什么。所以我放弃了 Theme 并创建了一个布局资源并将其设置为我的 Splash Activity 的 ContentView，但没有显示任何内容。我的内容不仅没有显示（完全黑屏），而且标题栏继续显示，尽管试图以各种可能的方式隐藏它。

飞溅.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:gravity="center">
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="15dp"
    android:src="@drawable/logo" />
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center">
    <ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp" />
    <TextView
        android:id="@+id/progressText"
        android:text="Loading..."
        android:textSize="20dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp" />
</LinearLayout> 
```

飞溅.cs

```
[Activity(MainLauncher=true, NoHistory = true)]
public class Splash : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        RequestWindowFeature(WindowFeatures.NoTitle);

        Window.SetFlags(WindowManagerFlags.Fullscreen, WindowManagerFlags.Fullscreen);

        SetContentView(Resource.Layout.Splash);

        string lastUpdated = PreferenceManager.GetDefaultSharedPreferences(this).GetString("LastInventoryUpdate", null);

        DateTime lastUpdateDate = Convert.ToDateTime(lastUpdated);

        TimeSpan span = DateTime.Today - lastUpdateDate;

        if (string.IsNullOrEmpty(lastUpdated) || span.Days > 30)
        {
            TextView progressText = (TextView)FindViewById(Resource.Id.progressText);
            progressText.Text = "Updating parts database.  May take several minutes...";
            InventoryRepository repository = ((MyApp)Application).Inventory;
            repository.Execute();
        }

        StartActivity(typeof(Login));
    }
} 
```

仍然在标题栏中显示徽标和标题，并且绝对没有内容。甚至尝试取出所有 AsyncTask 和 StartActivity 的东西，并尝试使用启动布局加载 Activity。它最终确实出现了，但它首先显示为黑屏很长一段时间。无法想象为什么这是我的主要启动器，实际上除了设置活动内容之外什么都没有。

至于出现的 TitleBar，我也尝试将它添加到我的清单中（我目前在另一个活动中工作得很好）

```
<activity android:name="app.MyApp.Splash" android:theme="@android:style/Theme.NoTitleBar.Fullscreen"></activity> 
```

如果我为活动包含一个主题，标题栏就会消失，但我的布局资源永远不会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:02:08.667

你不知道在挣扎了一整天后，我在发布后几分钟就发现了很大一部分问题。简而言之，我将主题放回了 Splash Activity，它现在在所有内容最初加载时显示，并且通常在设置内容之前重定向到 Login，这是完美的。但我改变了我的 OnCreate 如下：

```
[Activity(MainLauncher=true, NoHistory = true,  ScreenOrientation = Android.Content.PM.ScreenOrientation.Landscape, Theme = "@style/Theme.Splash")]
public class Splash : Activity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        RequestWindowFeature(WindowFeatures.NoTitle);

        Window.SetFlags(WindowManagerFlags.Fullscreen, WindowManagerFlags.Fullscreen);

        SetContentView(Resource.Layout.Splash);

        string lastUpdated = PreferenceManager.GetDefaultSharedPreferences(this).GetString("LastInventoryUpdate", null);

        DateTime lastUpdateDate = Convert.ToDateTime(lastUpdated);

        TimeSpan span = DateTime.Today - lastUpdateDate;

        if (string.IsNullOrEmpty(lastUpdated) || span.Days > 30)
        {
            SetTheme(Resource.Drawable.bg_black);
            TextView progressText = (TextView) FindViewById(Resource.Id.progressText);
            progressText.Text = "Updating parts database.  May take several minutes...";
            InventoryRepository repository = ((MyApp) Application).Inventory;
            repository.Execute();
        }
        else
            StartActivity(typeof (Login));
    }
} 
```

主要区别在于，如果我没有运行我的 AsyncTask，我只会调用 StartActivity。否则，我从我的 AsyncTask 的 OnPostExecute 调用 StartActivity。此外，请务必在启动布局中设置所有视图的背景属性。由于我将主题留在活动中，如果您不这样做，您的主题将显示为每个视图的背景。

# mysql - 如何编写 SQL 查询以删除 Magento 描述中的 html 链接？

> ID：11460700
> 
> 赞同：0
> 
> 时间：2012-07-12T21:06:57.803
> 
> 标签：mysql, magento

我有数千种产品，其中包括 longDescription 字段中的以下内容：

```
<ul>
<li>Some content</li>
<li><a href="link"... </li>
</ul>

Several trailing line breaks... 
```

我想知道是否有一个安全有效的 SQL 查询可以删除`<li>'s`其中的链接以及尾随换行符/空字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:33:35.707

最好的方法可能是将前端模型添加到属性中。创建一个模型来扩展 `Mage_Eav_Model_Entity_Attribute_Frontend_Abstract`和删除函数中的 HTML，`getValue()`例如使用`strip_tags()`.

# javascript - 如何从左到右移动/滑动图像

> ID：11460701
> 
> 赞同：1
> 
> 时间：2012-07-12T21:07:00.830
> 
> 标签：javascript, dom-events

我想从左到右滑动或移动图像，例如

[http://rajeevkumarsingh.wix.com/pramtechnology](http://rajeevkumarsingh.wix.com/pramtechnology)

移动的读取五边形框 Ok！

我尝试了一下，但没有这样做。我使用的代码如下：

```
<script type="text/javascript">

<!--
var imgObj = null;
var animate ;
function init(){
   imgObj = document.getElementById('myImage');
   imgObj.style.position= 'absolute'; 
   imgObj.style.top = '240px';
   imgObj.style.left = '-300px';
   imgObj.style.visibility='hidden';
   moveRight();
} 
function moveRight(){
if (parseInt(imgObj.style.left)<=10)
{
   imgObj.style.left = parseInt(imgObj.style.left) + 5 + 'px';
   imgObj.style.visibility='visible';
   animate = setTimeout(moveRight,20); // call moveRight in 20msec
   //stopanimate = setTimeout(moveRight,20);
  }
else
  stop();
  f();
}

function stop(){
   clearTimeout(animate);
}
window.onload =init;
//-->
</script>
<img id="myImage" src="xyz.gif" style="margin-left:170px;" /> 
```

Firefox 和 IE 也存在某种分辨率问题。如何解决它们。我也无法如此清楚地移动这些东西。这可能吗？我希望它使用 JavaScript 而不是 Flash。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T21:36:10.473

```
var animate, left=0, imgObj=null;

function init(){

   imgObj = document.getElementById('myImage');
   imgObj.style.position= 'absolute';
   imgObj.style.top = '240px';
   imgObj.style.left = '-300px';
   imgObj.style.visibility='hidden';

   moveRight();
}

function moveRight(){
    left = parseInt(imgObj.style.left, 10);

    if (10 >= left) {
        imgObj.style.left = (left + 5) + 'px';
        imgObj.style.visibility='visible';

        animate = setTimeout(function(){moveRight();},20); // call moveRight in 20msec

        //stopanimate = setTimeout(moveRight,20);
    } else {
        stop();
    }
    //f();
}

function stop(){
   clearTimeout(animate);
}

window.onload = function() {init();}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T08:01:23.907

这是一个将图像向右移动以及从 .js 文件而不是直接从索引页面淡入的示例：

----------我的index.html页面----------

```
<!DOCTYPE html>
<html>
<body>

<script src="myJava.js"></script>

<script language="javascript" type="text/javascript">
    //In pixels
    var amountToMoveTotal = 1000;
    var amountToMovePerStep = 10;
    //In milliseconds
    var timeToWaitBeforeNextIncrement = 20;

    var amountToFadeTotal = 1.0;
    var amountToFadePerStep = 0.01;
</script>

<p>This one moves right on hover</p>
<img onmouseover="moveRight(this, amountToMoveTotal, amountToMovePerStep, timeToWaitBeforeNextIncrement)" src="http://www.w3schools.com/jsref/smiley.gif" style="left:0px;top:50px;position:absolute;opacity:1.0;">
<br><br>
<p>This one fades in on hover</p>
<img onmouseover="fadeIn(this, amountToFadeTotal, amountToFadePerStep, timeToWaitBeforeNextIncrement)" src="http://www.w3schools.com/jsref/smiley.gif" style="left:0px;top:150px;position:absolute;opacity:0.1;">

</body>
</html> 
```

----------我的myJava.js代码----------

```
var animate;
var original = null;

function moveRight(imgObj, amountToMoveTotal, amountToMovePerStep, timeToWaitBeforeNextIncrement)
{
    //Copy original image location
    if (original === null){
        original = parseInt(imgObj.style.left);
    }

    //Check if the image has moved the distance requested
    //If the image has not moved requested distance continue moving.
    if (parseInt(imgObj.style.left) < amountToMoveTotal) {
        imgObj.style.left = (parseInt(imgObj.style.left) + amountToMovePerStep) + 'px';

        animate = setTimeout(function(){moveRight(imgObj, amountToMoveTotal, amountToMovePerStep, timeToWaitBeforeNextIncrement);},timeToWaitBeforeNextIncrement);
    }else {
        imgObj.style.left = original;
        original = null;        
        clearTimeout(animate);
    }
}
function fadeIn(imgObj, amountToFadeTotal, amountToFadePerStep, timeToWaitBeforeNextIncrement)
{
    //Copy original opacity
    if (original === null){
        original = parseFloat(imgObj.style.opacity);
    }

    //Check if the image has faded the amount requested
    //If the image has not faded requested amount continue fading.
    if (parseFloat(imgObj.style.opacity) < amountToFadeTotal) {
        imgObj.style.opacity = (parseFloat(imgObj.style.opacity) + amountToFadePerStep);

        animate = setTimeout(function(){fadeIn(imgObj, amountToFadeTotal, amountToFadePerStep, timeToWaitBeforeNextIncrement);},timeToWaitBeforeNextIncrement);
    }else {
        imgObj.style.opacity = original;
        original = null;
        clearTimeout(animate);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:12:24.607

使用jQuery库，真的很容易做你需要的

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

按照页面示例代码：http: [//api.jquery.com/stop/](http://api.jquery.com/stop/)

```
<!DOCTYPE html>
<html>
<head>
  <style>div { 
position: absolute; 
background-color: #abc;
left: 0px;
top:30px;
width: 60px; 
height: 60px;
margin: 5px; 
}
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button id="go">Go</button> 
<button id="stop">STOP!</button>
<button id="back">Back</button>
<div class="block"></div>
<script>
/* Start animation */
$("#go").click(function(){
$(".block").animate({left: '+=100px'}, 2000);
});

/* Stop animation when button is clicked */
$("#stop").click(function(){
$(".block").stop();
});

/* Start animation in the opposite direction */
$("#back").click(function(){
$(".block").animate({left: '-=100px'}, 2000);
});

</script>

</body>
</html> 
```

# algorithm - 将元素添加到排序数据结构的有效方法

> ID：11460702
> 
> 赞同：-5
> 
> 时间：2012-07-12T21:07:15.277
> 
> 标签：algorithm, sorting

将元素添加到排序数据结构的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:44:26.760

大多数红黑树包都会有一个“插入元素”的方法。如果您还没有使用它，那么开始可能会很好。

如果您与没有插入元素操作的红黑树实现结婚，最好添加这样的方法，可能来自一些好的红黑树文档： [http://en .wikipedia.org/wiki/Red%E2%80%93black_tree](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)

顺便说一句，treap 通常比红黑树快很多，但红黑树的可变性能可能会更小：http: [//stromberg.dnsalias.org/~strombrg/python-tree-and-heap -比较/](http://stromberg.dnsalias.org/~strombrg/python-tree-and-heap-comparison/)

# java - Dragging a JLabel with a TransferHandler (Drag and Drop)

> ID：11460704
> 
> 赞同：6
> 
> 时间：2012-07-12T21:07:31.407
> 
> 标签：java, swing, drag-and-drop, jpanel

I am using a TransferHandler to pass data from a JPanel to a JTextArea as a JLabel (Click somewhere in the left panel to create the JLabel to drag)

The transfer of the data works fine, but I'd like to also "show" the JLabel as its being dragged along with the mouse pointer.

If you comment out

```
dropLabel.setTransferHandler(new TransferHandler("text"));

dropLabel.getTransferHandler().exportAsDrag(dropLabel, e,
            TransferHandler.COPY); 
```

you will see how I want it to look. (but of course then the data won't be transferred).

How can I get both the transfer to work and the JLabel to follow the mouse cursor?

Here is the code:

```
import java.awt.*;
import java.awt.datatransfer.Transferable;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.border.Border;

public class DragTest extends JFrame implements MouseMotionListener,
        MouseListener {

    private JPanel leftPanel = new JPanel(null);
    private JPanel rightPanel = new JPanel(null);
    private JLabel dragLabel = new JLabel("drop");
    private final JWindow window = new JWindow();
    JLabel dropLabel;

    public DragTest() {
        this.setLayout(new GridLayout(1, 2));

        leftPanel.setBorder(BorderFactory.createLineBorder(Color.black));
        rightPanel.setBorder(BorderFactory.createLineBorder(Color.black));
        this.add(leftPanel);
        this.add(rightPanel);
        leftPanel.addMouseListener(this);
        leftPanel.addMouseMotionListener(this);

        JTextArea area = new JTextArea();

        rightPanel.setLayout(new GridLayout(1, 1));
        rightPanel.add(area);

        dragLabel.setFont(new Font("Serif", Font.BOLD, 48));
    }

    @Override
    public void mousePressed(MouseEvent e) {

        dropLabel = new JLabel("drop");

        Dimension labelSize = dropLabel.getPreferredSize();
        dropLabel.setSize(labelSize);
        int x = e.getX() - labelSize.width / 2;
        int y = e.getY() - labelSize.height / 2;
        dropLabel.setLocation(x, y);
        leftPanel.add(dropLabel);

        dropLabel.setTransferHandler(new TransferHandler("text"));

        dropLabel.getTransferHandler().exportAsDrag(dropLabel, e,
                TransferHandler.COPY);

        repaint();

    }

    @Override
    public void mouseDragged(MouseEvent me) {
        dragLabel = new JLabel("drop");
        dragLabel.setFont(new Font("Serif", Font.BOLD, 48));
        int x = me.getPoint().x;
        int y = me.getPoint().y;
        window.add(dragLabel);
        window.pack();
        Point pt = new Point(x, y);
        Component c = (Component) me.getSource();
        SwingUtilities.convertPointToScreen(pt, c);
        window.setLocation(pt);
        window.setVisible(true);
        repaint();
    }

    @Override
    public void mouseMoved(MouseEvent e) {
    }

    @Override
    public void mouseClicked(MouseEvent e) {

    }

    @Override
    public void mouseReleased(MouseEvent e) {

//      leftPanel.remove(dropLabel);

        window.remove(dragLabel);
        window.setVisible(false);

        repaint();
    }

    @Override
    public void mouseEntered(MouseEvent e) {

    }

    @Override
    public void mouseExited(MouseEvent e) {

    }

    public static void main(String[] args) {

        DragTest frame = new DragTest();
        frame.setVisible(true);
        frame.setSize(600, 400);
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T05:54:40.477

Another example:

![enter image description here](../Images/c47a637949069c05f22dac413501310d.png)

Edit: Fix a blinking cursor

```
import java.awt.*;
import java.awt.datatransfer.*;
import java.awt.dnd.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import javax.activation.*;
import javax.swing.*;
import javax.swing.text.*;

public class DragTest3 {
  public JComponent makeUI() {
    DragPanel p1 = new DragPanel();
    p1.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    p1.add(new JLabel(UIManager.getIcon("OptionPane.warningIcon")));
    p1.add(new JLabel(UIManager.getIcon("OptionPane.errorIcon")));
    p1.add(new JLabel("Label1"));
    p1.add(new JLabel("Label2"));
    MouseListener handler = new Handler();
    p1.addMouseListener(handler);
    LabelTransferHandler th = new LabelTransferHandler();
    p1.setTransferHandler(th);
    JPanel p = new JPanel(new GridLayout(1,2));
    p.add(p1);

    DragPanel p2 = new DragPanel();
    p2.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    p2.addMouseListener(handler);
    p2.setTransferHandler(th);
    p.add(p2);

    JPanel panel = new JPanel(new GridLayout(2,1));
    panel.add(p);
    panel.add(new JScrollPane(new JTextArea()));
    return panel;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new DragTest3().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
class DragPanel extends JPanel {
  public DragPanel() {
    super();
  }
  public JLabel draggingLabel;
}
class Handler extends MouseAdapter {
  @Override public void mousePressed(MouseEvent e) {
    DragPanel p = (DragPanel)e.getSource();
    Component c = SwingUtilities.getDeepestComponentAt(p, e.getX(), e.getY());
    if(c!=null && c instanceof JLabel) {
      p.draggingLabel = (JLabel)c;
      p.getTransferHandler().exportAsDrag(p, e, TransferHandler.MOVE);
    }
  }
}
class LabelTransferHandler extends TransferHandler {
  private final DataFlavor localObjectFlavor;
  private final JLabel label = new JLabel() {
    @Override public boolean contains(int x, int y) {
      return false;
    }
  };
  private final JWindow window = new JWindow();
  public LabelTransferHandler() {
    System.out.println("LabelTransferHandler");
    localObjectFlavor = new ActivationDataFlavor(
      DragPanel.class, DataFlavor.javaJVMLocalObjectMimeType, "JLabel");
    window.add(label);
    window.setAlwaysOnTop(true);
    window.setBackground(new Color(0,true));
    DragSource.getDefaultDragSource().addDragSourceMotionListener(
    new DragSourceMotionListener() {
      @Override public void dragMouseMoved(DragSourceDragEvent dsde) {
        Point pt = dsde.getLocation();
        pt.translate(5, 5); // offset
        window.setLocation(pt);
      }
    });
  }
  @Override protected Transferable createTransferable(JComponent c) {
    System.out.println("createTransferable");
    DragPanel p = (DragPanel)c;
    JLabel l = p.draggingLabel;
    String text = l.getText();
    //TEST
    //if(text==null) {
    //    text = l.getIcon().toString();
    //}
    //return new StringSelection(text+"\n");
    final DataHandler dh = new DataHandler(c, localObjectFlavor.getMimeType());
    if(text==null) return dh;
    final StringSelection ss = new StringSelection(text+"\n");
    return new Transferable() {
      @Override public DataFlavor[] getTransferDataFlavors() {
        ArrayList<DataFlavor> list = new ArrayList<>();
        for(DataFlavor f:ss.getTransferDataFlavors()) {
          list.add(f);
        }
        for(DataFlavor f:dh.getTransferDataFlavors()) {
          list.add(f);
        }
        return list.toArray(dh.getTransferDataFlavors());
      }
      public boolean isDataFlavorSupported(DataFlavor flavor) {
        for (DataFlavor f: getTransferDataFlavors()) {
          if (flavor.equals(f)) {
            return true;
          }
        }
        return false;
      }
      public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {
        if(flavor.equals(localObjectFlavor)) {
          return dh.getTransferData(flavor);
        } else {
          return ss.getTransferData(flavor);
        }
      }
    };
  }
  @Override public boolean canImport(TransferSupport support) {
    if(!support.isDrop()) {
      return false;
    }
    return true;
  }
  @Override public int getSourceActions(JComponent c) {
    System.out.println("getSourceActions");
    DragPanel p = (DragPanel)c;
    label.setIcon(p.draggingLabel.getIcon());
    label.setText(p.draggingLabel.getText());
    window.pack();
    Point pt = p.draggingLabel.getLocation();
    SwingUtilities.convertPointToScreen(pt, p);
    window.setLocation(pt);
    window.setVisible(true);
    return MOVE;
  }
  @Override public boolean importData(TransferSupport support) {
    System.out.println("importData");
    if(!canImport(support)) return false;
    DragPanel target = (DragPanel)support.getComponent();
    try {
      DragPanel src = (DragPanel)support.getTransferable().getTransferData(localObjectFlavor);
      JLabel l = new JLabel();
      l.setIcon(src.draggingLabel.getIcon());
      l.setText(src.draggingLabel.getText());
      target.add(l);
      target.revalidate();
      return true;
    } catch(UnsupportedFlavorException ufe) {
      ufe.printStackTrace();
    } catch(java.io.IOException ioe) {
      ioe.printStackTrace();
    }
    return false;
  }
  @Override protected void exportDone(JComponent c, Transferable data, int action) {
    System.out.println("exportDone");
    DragPanel src = (DragPanel)c;
    if(action == TransferHandler.MOVE) {
      src.remove(src.draggingLabel);
      src.revalidate();
      src.repaint();
    }
    src.draggingLabel = null;
    window.setVisible(false);
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T23:52:53.597

UPDATE: Unfortunately, you're using a `TransferHandler`.

The last time I played around with the `TransferHandler` API (back around 6.10/6.12) there was a bug in the code which ignored the transfer image. It actually set it to null. This may have been fixed in later updates, but I've not checked recently.

After much digging, I've found that the default implementation of the TransferHandler ignores the "getVisualRepresentation(Transferable t)" method. Great isn't it.

I did some digging and the class makes use of a bunch of "private" inner classes to handle the workings of the DnD process, making it next to near impossible to simply change the implementation without having to rewrite the whole thing.

Basically, the `DragSource` allows you to pass in a image it can use (as to if this works is another question), but it's hidden inside a private `DragHandler` class. Thanks Sun.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-16T20:49:23.247

I used this code and made some modifications. I am reposting it to SO as per the TOS.

```
import java.awt.Color;
import java.awt.Point;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DragSource;
import java.awt.dnd.DragSourceDragEvent;
import java.awt.dnd.DragSourceMotionListener;
import java.io.IOException;
import java.util.ArrayList;
import javax.activation.ActivationDataFlavor;
import javax.activation.DataHandler;
import javax.swing.*;

@SuppressWarnings("serial")
public class LabelTransferHandler extends TransferHandler {

    private final DataFlavor localObjectFlavor;
    private final DeviceAssignments root;

    private final JLabel label = new JLabel() {
        @Override public boolean contains(int x, int y) {
            return false;
        }
    };

    private final JWindow window = new JWindow();

    public LabelTransferHandler(DeviceAssignments root) {
        this.root = root;
        localObjectFlavor = new ActivationDataFlavor(
            LabelDragScrollPane.class, DataFlavor.javaJVMLocalObjectMimeType, "JLabel");
        window.add(label);
        window.setAlwaysOnTop(true);
        window.setBackground(new Color(0,true));
        DragSource.getDefaultDragSource().addDragSourceMotionListener(
            new DragSourceMotionListener() {
                @Override public void dragMouseMoved(DragSourceDragEvent dsde) {
                    Point pt = dsde.getLocation();
                    pt.translate(5, 5); // offset
                    window.setLocation(pt);
                }
            }
        );
    }

    @Override protected Transferable createTransferable(JComponent c) {
        LabelDragScrollPane p = (LabelDragScrollPane)c;
        MacLabel l = p.draggingLabel;
        String text = l.getMac();
        final DataHandler dh = new DataHandler(c, localObjectFlavor.getMimeType());
        if(text==null) return dh;
        final StringSelection ss = new StringSelection(text+"\n");
        return new Transferable() {
            @Override public DataFlavor[] getTransferDataFlavors() {
            ArrayList<DataFlavor> list = new ArrayList<DataFlavor>();
            for(DataFlavor f:ss.getTransferDataFlavors()) {
                list.add(f);
            }
            for(DataFlavor f:dh.getTransferDataFlavors()) {
                list.add(f);
            }
            return list.toArray(dh.getTransferDataFlavors());
            }
            public boolean isDataFlavorSupported(DataFlavor flavor) {
                for (DataFlavor f: getTransferDataFlavors()) {
                    if (flavor.equals(f)) {
                        return true;
                    }
                }
                return false;
            }
            public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {
                if(flavor.equals(localObjectFlavor)) {
                    return dh.getTransferData(flavor);
                } else {
                    return ss.getTransferData(flavor);
                }
            }
        };
    }

    @Override public boolean canImport(TransferSupport support) {
        if(!support.isDrop()) {
            return false;
        }
        return true;
    }

    @Override public int getSourceActions(JComponent c) {
        LabelDragScrollPane p = (LabelDragScrollPane)c;
        label.setBorder(p.draggingLabel.getBorder());
        label.setText(p.draggingLabel.getMac());
        label.setPreferredSize(p.draggingLabel.getPreferredSize());

        window.pack();
        Point pt = p.draggingLabel.getLocation();
        SwingUtilities.convertPointToScreen(pt, p);
        window.setLocation(pt);
        window.setVisible(true);
        return MOVE;
    }

    @Override public boolean importData(TransferSupport support) {
        if(!canImport(support)) return false;
        JButton target = (JButton)support.getComponent();
        try {
            LabelDragScrollPane src = (LabelDragScrollPane)support.getTransferable().getTransferData(localObjectFlavor);
            target.setText(src.draggingLabel.getMac());
            return true;
        } catch(UnsupportedFlavorException ufe) {
            ufe.printStackTrace();
        } catch(java.io.IOException ioe) {
            ioe.printStackTrace();
        }
        return false;
    }
    @Override protected void exportDone(JComponent c, Transferable data, int action) {
        LabelDragScrollPane src = (LabelDragScrollPane)c;
        if(action == TransferHandler.MOVE) {
            root.updateNodeIdPanel();
        }
        src.draggingLabel = null;
        window.setVisible(false);
    }
} 
```

# facebook - Facebook Stack 在最终回调中更改了重定向方法

> ID：11460705
> 
> 赞同：2
> 
> 时间：2012-07-12T21:07:35.410
> 
> 标签：facebook, facebook-graph-api, oauth, callback

我们一直在愚蠢的功能手机上使用一些非常有限的浏览器，直到 2 周前它运行良好。此时，最后一个重定向不再发出 302 重定向，而是使用 javascript 进行重定向。不幸的是，这些设备不支持 javascript。

有没有人找到解决这个问题的方法？或改变这种情况的方法。

谢谢你。

# service - 如何为微软的云找到我的服务器的 IP

> ID：11460708
> 
> 赞同：0
> 
> 时间：2012-07-12T21:08:08.103
> 
> 标签：service, cloud

我创建了 tcp ip 应用程序并将其发布到 Microsoft 的云，但现在我不知道如何找到我的服务器的 IP。

或者换句话说，我怎样才能找到部署了已实施角色的 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:55:08.343

取决于您是尝试获取服务器的公共 IP 还是私有 IP。

如果您想从 Azure 网络外部访问此服务器，那么您正在寻找公共 IP。在这种情况下，您必须[为您的角色定义一个 InputEndpoint](http://msdn.microsoft.com/en-us/library/windowsazure/gg433020.aspx)。您需要为您的应用指定 FQDN。您可以使用通常的方法（如 tracert、ping 等）找到此 FQDN 的 IP 地址。

如果您想从 Azure 网络中访问此服务器，通常您希望租户中的其他角色与此服务器通信，那么您需要为您的服务器[定义一个 InternalEndpoint](http://msdn.microsoft.com/en-us/library/gg432980.aspx)。然后，您可以使用 ServiceRuntime 库来发现角色实例的私有端点。

[在 Windows Azure 中为角色实例启用通信](http://msdn.microsoft.com/en-us/library/hh180158.aspx)是一个很好的资源，可以更好地了解其工作原理。

# html - 引导程序中的字形图标不显示

> ID：11460713
> 
> 赞同：8
> 
> 时间：2012-07-12T21:08:36.843
> 
> 标签：html, css, twitter-bootstrap, less

```
<div class="container-fluid">
  <div class="sidebar left">
    <div id="app-navigation" class="well">
      <h5>Administration</h5>
      <ul class="administration-list">
        <li class="user"><a href="#user">User</a></li>
        <li class="emails"><a href="#emails">Emails</a></li>
        <li class="settings"><a href="#Settings">Settings</a></li>
        <li class="logs"><a href="#Logs">Logs</a></li>
        <li class="help"><a href="#Help">Help</a></li>
      </ul>
      <h5>Managing tools</h5>
      <ul class="tools-list">
        <li class="ressource"><a href="#Ressources"><i class="icon-home icon-white" </i>Ressources</a></li>
        <li class="playlist"><a href="#Playlist">Playlist</a></li>
        <li class="schedule"><a href="#Schedule">Schedule</a></li>
        <li class="stations"><a href="#Stations">Stations</a></li>
      </ul>
    </div>
  </div>
</div> 
```

我不明白为什么我的图标不显示。我正在开始一个新项目，并决定尝试 使用[bootstrap进行](http://twitter.github.com/bootstrap/)[初始化](http://www.initializr.com/)。只是不能让那些图标出现。在我的文本之前似乎有一个不可见的图标......我也检查了文档，[here](http://twitter.github.com/bootstrap/base-css.html)。我还检查了我的 boostrap.less、sprites.less 和 variables.less（一切似乎都还好......）。

我的变量设置正确，我的图像 (PNG) 在我的 ../img 文件夹中。

```
// Sprite icons path
// -------------------------
@iconSpritePath:          "../img/glyphicons-halflings.png";
@iconWhiteSpritePath:     "../img/glyphicons-halflings-white.png"; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T21:50:01.560

文件 variables.less 位于 bootstrap 文件夹中，因此您需要再上一层才能进入根目录。

尝试将路径设置为：

```
@iconSpritePath:          "../../img/glyphicons-halflings.png";
@iconWhiteSpritePath:     "../../img/glyphicons-halflings-white.png"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-26T16:35:27.027

在最新的 Bootstrap 图标中，新类 glyphicon 包含：

```
<i class="glyphicon glyphicon-heart"></i> 
```

在某些情况下，这可能是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:46:42.833

我必须将 img 文件夹从 bootstrap 复制到 less 文件夹中……或者您可以将变量更改为指向 root/img 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T15:08:12.867

打开“lib”文件夹中的 rewrites.php 文件。**在函数'roots_add_rewrites($content)'**中添加以下行：

```
 'assets/fonts/(.*)'    => THEME_PATH . '/assets/fonts/$1', 
```

该函数应如下所示：

```
function roots_add_rewrites($content) {
  global $wp_rewrite;
  $roots_new_non_wp_rules = array(
    'assets/css/(.*)'      => THEME_PATH . '/assets/css/$1',
    'assets/js/(.*)'       => THEME_PATH . '/assets/js/$1',
    'assets/img/(.*)'      => THEME_PATH . '/assets/img/$1',
    'assets/fonts/(.*)'    => THEME_PATH . '/assets/fonts/$1',
    'plugins/(.*)'         => RELATIVE_PLUGIN_PATH . '/$1'
  );
  $wp_rewrite->non_wp_rules = array_merge($wp_rewrite->non_wp_rules, $roots_new_non_wp_rules);
  return $content;
} 
```

# actionscript-3 - 使用 ActionScript 评估数学公式字符串

> ID：11460718
> 
> 赞同：4
> 
> 时间：2012-07-12T21:08:57.613
> 
> 标签：actionscript-3, math, eval

如何使用 AS3 评估数学公式？没有什么花哨的东西，比如`(10/3)*4+10`。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T21:18:12.533

虽然您可以使用像[D.eval](http://www.riaone.com/products/deval/)或[AS3Eval](http://eval.hurlant.com/)这样的大型 eval 库，但您真正需要的只是这个简单 的[MathParser](http://www.flashandmath.com/intermediate/mathparser/bkde.zip)（有关 MathParser[的更多信息](http://www.flashandmath.com/intermediate/mathparser/mp1.html)）

以下是您使用 MathParser 的方法：

```
package {
    import bkde.as3.parsers.*;
    import flash.display.Sprite;
    public class MathTest extends Sprite {
        public function MathTest() {
            var parser:MathParser = new MathParser([]);
            var compiledObj:CompiledObject = parser.doCompile("(10/3)*4+10");
            var answer:Number = parser.doEval(compiledObj.PolishArray, []);

            // EDIT: In case you wanted variables
            var xyParser:MathParser = new MathParser(["x", "y"]);
            var xyCompiledObj:CompiledObject = xyParser.doCompile("(x/3)*y+10");
            var xyAnswer:Number = xyParser.doEval(xyCompiledObj.PolishArray, [10, 4]);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T21:24:09.807

我相信[D.eval API](http://www.riaone.com/products/deval/index.html)是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:31:17.240

如果您想避免使用库，可以尝试使用`ExternalInterface.call`来访问 Javascript 的 eval 函数。

例如：

```
var formula:String = '1+1';
var result:* = ExternalInterface.call('eval', formula); 
```

您可能需要检查`result == 'undefined'`这是否表示公式语法中的错误。

# android - ADB 卡在我的 Android 智能手机上

> ID：11460726
> 
> 赞同：1
> 
> 时间：2012-07-12T21:09:40.230
> 
> 标签：android, eclipse, debugging, adb, galaxy

将我的设备连接到我的真实设备 (Galaxy S / Android 2.3.3) 并启动 DDMS Heap 选项卡后，有时设备会断开连接并且不再可用作 Android 设备选择器对话框的有效 Android 目标。拔下并重新插入 USB 电缆没有效果，杀死 adb 服务器进程或关闭 eclipse 也没有。作为我最后的手段，我必须重新启动设备并重新连接 USB，这似乎可行，但这种方法有很多皱纹，如果你知道我的意思的话。

有没有更好的解决方案？！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:57:24.800

您对此无能为力。这是所有基于 OMAP 芯片组的 Android 手机的已知问题。

并不是说芯片组有任何问题，而是 OMAP 的 USB-OTG 设备驱动程序有问题是事实。驱动程序运行良好，直到您对其施加足够的压力。许多 logcat 输出以及 ADB 调试都会导致此问题。

禁用和重新启用 usb-debug 可以暂时解决问题。您甚至可以通过在 shell 上调用“dmesg”来查看内核日志中的 USB 驱动程序失败。

据我所知，所有基于 OMAP3 和 OMAP4 的设备都受到此驱动程序错误的影响。

# android - What's App for Android 或 iPhone 如何显示“用户正在输入...”消息？

> ID：11460730
> 
> 赞同：0
> 
> 时间：2012-07-12T21:10:07.050
> 
> 标签：android, real-time, instant-messaging, whatsapp

我正在构建一个类似于 What's App 的应用程序。
在继续之前，我必须了解如何使它更“实时”。

当您聊天并且有人在回答您时，您将实时看到他是否正在打字。

他们怎么能这么快呢？
是点对点推送吗？

![什么是适用于 Android 的应用程序](../Images/304b470c3777b6e90f847af6277e6462.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:15:58.670

大多数聊天程序只是在您开始在 EditText 中输入内容并通过发送消息清除它时发送一个事件。

您可以在开始输入时启动一个事件，如果最后一次输入发生时每隔几秒检查一次设备。使用一些偏移量并确定用户不再输入 - 完成；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:16:30.540

如果用户正在打字，客户端可以不断地向服务器发送消息。另一个客户端（rece 将读取此消息。不知道它是客户端服务器还是 P2P。

您每秒只能发送 1 位。今天的网络允许您每秒发送数千万比特，并且延迟也非常低。

# orm - Kohana 3.3 ORM 表连接

> ID：11460731
> 
> 赞同：1
> 
> 时间：2012-07-12T21:10:07.723
> 
> 标签：orm, kohana, kohana-3, kohana-orm

我正在寻找针对我的问题的帮助，因为我似乎无法从 Kohana 文档或谷歌搜索中得到它。

我有 2 张桌子：

`contents`
id
uri
标题
template_id

`templates`
身份证
标题

我正在尝试返回`contents`具有匹配*uri*的行的所有数据。

目前我有两个模型：内容和模板。

**内容**

```
class Model_Content extends ORM {
protected $_table_name = 'contents';
protected $_has_one = array('template' => array());
.... 
```

**模板**

```
class Model_Template extends ORM {

protected $_table_name = 'templates';
protected $_belongs_to = array(
    'content' => array()
); 
```

然后在我的控制器中：

```
$item = ORM::factory("Content")->get_by_uri($uri); 
```

这指向：

```
$this->where("uri", "=", $uri)->find(); 
```

这会正确返回内容表中的数据，但是如何从模板表中引入模板名称？

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T05:31:56.040

`$item->template`是你所需要的全部。并且不要忘记检查模型是否存在：`if ($item->loaded())`。

# c# - 在 SchedulerControl 中显示单个定期约会的发生次数（有例外）

> ID：11460734
> 
> 赞同：0
> 
> 时间：2012-07-12T21:10:33.973
> 
> 标签：c#, winforms, devexpress

在我当前的应用程序中，用户需要“过滤”到特定的重复约会，并且只在调度程序控件中显示该特定约会模式的出现。我试图通过使用单独的 SchedulerControl 创建一个新表单来实现这一点，并且只添加用户试图查看的单个约会：

```
public OccurrenceCalcForm(Appointment appointment)

{
    InitializeComponent();

    OccurrenceSchedulerControl.Storage.Appointments.CustomFieldMappings.Add(new DevExpress.XtraScheduler.AppointmentCustomFieldMapping("Inactive", "Inactive"));
    OccurrenceSchedulerControl.Storage.Appointments.CustomFieldMappings.Add(new DevExpress.XtraScheduler.AppointmentCustomFieldMapping("StandingOrderKEY", "StandingOrderKEY"));
    OccurrenceSchedulerControl.Storage.Appointments.Add(appointment);

    OccurrenceSchedulerControl.Refresh();
} 
```

但困难在于，如果约会有 ChangedOccurrence 类型的例外，这些个别事件的特定属性与模式不同，它们不会显示在控件中，如下面的屏幕截图所示（实际上，这个每日约会有更改的例外24 日和 26 日，开始日期不同，但不显示）：

![每日预约，24 日和 26 日除外](../Images/9c674483121588fd51cef90fa05183c1.png)

这两个异常都可以使用 GetExceptions() 方法从 Appointment 引用中正确计算和获取，但重要的是它们也要在控件中显示给用户，而不是根本不显示。是否有一种方法可以让 SchedulerControl 在其存储中显示单个重复约会的所有事件（包括异常）？

欢迎任何替代方法建议。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:49:51.873

您可以通过处理[CustomDrawAppointmentBackground](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraSchedulerSchedulerControl_CustomDrawAppointmentBackgroundtopic)和[CustomDrawAppointment](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraSchedulerSchedulerControl_CustomDrawAppointmenttopic)事件来显示它们。DevExpress[提供了执行此操作的示例代码](http://www.devexpress.com/Support/Center/p/Q317941.aspx)（忽略将删除的事件转换为更改的事件的部分）。

# c# - vb.net 代码隐藏在使用 asp:UpdatePanel 后不调用 javascript

> ID：11460736
> 
> 赞同：0
> 
> 时间：2012-07-12T21:10:56.073
> 
> 标签：c#, asp.net, .net, vb.net

.net 问题

我有一个`asp:LinkButton`，当点击它时，它会点击后面的代码，创建一个会话并调用一个 javascript 函数来打开一个带有 PDF 文档的新选项卡

这是按钮：

```
 <asp:LinkButton runat="server" CssClass="lnkBtn" ID="btnViewPDF" >
 <img alt="" src="External_Files/images/view_pdf_icon.png" />
  <span>View PDF</span></asp:LinkButton> 
```

后面的代码：

```
 Protected Sub btnViewPDF_Click(sender As Object, e As System.EventArgs)
       Handles btnViewPDF.Click

    Session("mina") = hfChartImg.Value
    Page.ClientScript.RegisterStartupScript(Me.GetType(), "_viewPDF", 
       "changeUrl();",     True)
     End Sub 
```

这是用pdf打开新标签的js函数

```
 function changeUrl(){

      var url = 'CIP_frmCIPEventExplorePdf.aspx?ViewPDF=1&intCIPEventID=' + 
      $('#intCIPEventID').val();
       parent.showNewTab(url, 'CIP Chart - PDF', 'CIP');

     } 
```

*这段代码运行良好，直到我不得不用它来包装我的页面内容* `asp:ScriptManager and asp:UpdatePanel`

这是我的代码现在的样子

```
 <body class="frame_content">
          <form id="CIP_frmCIPEventExplore" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server"
              EnablePartialRendering="true"></asp:ScriptManager>
       <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <div class="dataview_title" >
          ..............................
            ..........................

       </asp:Panel>
        </ContentTemplate>
            </asp:UpdatePanel>  
       </form>

       </body> 
```

**问题** 当我在该行放置一个断点时，`session`代码不再调用 javascript 函数，它到达该行，然后`END SUB` 任何人都可以告诉我我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:22:58.570

这是一个相当普遍的问题，你必须使用 scripmanger 提供的新方法所以在你的代码中而不是这个

```
Page.ClientScript.RegisterStartupScript 
```

你必须使用

```
ScriptManager.RegisterClientScriptBlock 
```

看看这个

[http://msdn.microsoft.com/en-us/library/bb350750.aspx](http://msdn.microsoft.com/en-us/library/bb350750.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:30:18.237

试试这个..我遇到了一个类似的问题，使用`RegisterStartupScript()`不起作用。以下对我有用：

```
<form id="CIP_frmCIPEventExplore" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>   
           ...
        </ContentTemplate>
    </asp:UpdatePanel>
</form>
<script type="text/javascript">
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_endRequest(function (s, e) {
        changeUrl();
    });
</script> 
```

请参阅： [回发后运行 javascript 函数](https://stackoverflow.com/questions/4223837/run-javascript-function-after-postback)

# jquery - $.append(); 不能从外部 javascript 工作

> ID：11460737
> 
> 赞同：0
> 
> 时间：2012-07-12T21:10:57.427
> 
> 标签：jquery, css

我正在尝试在顶部添加一个导航栏，因为我将有很多单独的 html 文件，所以我想将导航保留在一个文件中，所以如果我进行更改，它会在所有页面中更改。如果我在页面本身中输入代码，它就可以正常工作，但是当它在外部文件中时，它会给出不同的视图。

Jquery 片段是：

```
var snippet =   '   <div id="topMainNav">' +
    '   <ul>' +
    '       <li class="mainNav">' +
    '           <a href="" class="navlink">Find a Doctor</a>' +
    '       </li>' +
    '       <li class="mainNav">' +
    '           <a href="" class="navlink">Why Interfaith</a>' +
            '               <div class="dropdown" id="dropdown_one">' +
    '               <div class="subMainNav" style="padding: 10px;">History & Mission</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Executive Director</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Locations & Directions</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Service Centers</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Career Opportunities</div>' +
    '               <div class="subMainNav" style="padding: 10px;">News & Events</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Parking</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Places To Stay</div>' +
    '           </div>' +
    '       </li>' +
    '       <li class="mainNav">' +
    '           <a href="" class="navlink">Medical Services</a>' +
    '           <div class="dropdown" id="dropdown_two">' +
    '               <div class="subMainNav" style="padding: 10px;"><a href="#">Behavioral Health</a></div>' +
    '               <div class="subMainNav" style="padding: 10px;">Clinical Laboratory</div>' +          
    '               <div class="subMainNav" style="padding: 10px;">Dentistry</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Emergency</div>' +      
    '               <div class="subMainNav" style="padding: 10px;">Gynecology</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Medicine</div>' +         
    '               <div class="subMainNav" style="padding: 10px;">Pastoral</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Pediatrics</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Physical Medicine & Rehab</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Radiology</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Surgery</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Other Services</div>' +
    '           </div>' +
    '       </li>' +
    '       <li class="mainNav">' +
    '           <a href="" class="navlink">Medical Trainings</a>' +
    '           <div class="dropdown" id="dropdown_three">' +
    '               <div class="subMainNav" style="padding: 10px;">Medical Training</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Behavioral Health</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Predoctoral Externship</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Podiatric Residency</div>' +          
    '               <div class="subMainNav" style="padding: 10px;">Dental Residency</div>' +
    '               <div class="subMainNav" style="padding: 10px;">Pulmonary Residency</div>' +
    '           </div>' +
    '       </li>' +
    '       <li class="mainNav">' +
    '           <a href="" class="navlink">For Patients & Visitors</a>' +
    '           <div class="dropdown" id="dropdown_four">' +
    '               <p><a href="#">This is a Link</a></p>' +
    '               <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin blandit sodales justo, id fringilla eros dapibus vitae. Morbi molestie enim diam, a vulputate neque. Morbi sit amet nunc.</p>' +
    '           </div>' +
    '       </li>' +
    '       <li class="mainNav">' +
    '           <a href="" class="navlink">Contact Us</a>' +
    '       </li>' +
    '   </ul>' +
    '</div>';

$(function(){$('.writeNav').append (snippet);}); 
```

在我的 HTML 页面上，我有以下内容：

```
calling the external jscript file:
<script type="text/javascript" src="theScriptsStyles/miscScripts.js"></script> 
```

在 html 的正文中，我有这个：

```
<div class="writeNav"></div> 
```

它应该做的是，有一个下拉菜单，所以当我把鼠标放在它上面时，它有一个不工作的向下滑动菜单。任何人都可以告诉我我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:28:39.397

我认为，您的脚本甚至在创建 div 之前就已加载。这就是为什么它无法找到该类的元素。/检查是否是这种情况

# python - 更改 QMenu 项的背景颜色

> ID：11460751
> 
> 赞同：1
> 
> 时间：2012-07-12T21:12:03.810
> 
> 标签：python, qt, pyqt

到处找，找不到我可以应用的解决方案。

简单的案例场景。我有一个包含 2 个条目的子菜单。

```
menu = QMenu("MainMenu",  self )
submenu = QMenu("Submenu",  menu )
menu.addMenu( submenu )

submenu.addAction(  QIcon(""), "entry 1", myFuncs.func1 )
submenu.addAction(  QIcon(""), "entry 2", myFuncs.func2 ) 
```

暂时，我只是添加了一行，它至少改变了所有项目的背景颜色：

```
submenu.setStyleSheet("QWidget { background-color: %s }" % col_brightGray.name()) 
```

但。我想将每个条目的背景颜色更改为不同的阴影。我确定有办法，但是在尝试了很多之后，我无法确定它。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:28:25.550

QAction 不支持 setStylesheet，因为它不是 QWidget，请检查此[http://doc.qt.io/qt-5/stylesheet-examples.html#customizing-qmenu](http://doc.qt.io/qt-5/stylesheet-examples.html#customizing-qmenu)

# c# - Metro Search Charm - 在用户接受结果建议后以编程方式清除搜索框

> ID：11460764
> 
> 赞同：0
> 
> 时间：2012-07-12T21:12:58.297
> 
> 标签：c#, search, windows-8, microsoft-metro, windows-runtime

在用户接受我的应用程序提供给魅力的结果建议之一后，我想清除地铁搜索魅力中的搜索框。如何？听起来很简单，但事实并非如此，SearchPane.QueryText 是只读的。

我实际上对默认系统行为感到惊讶。在用户接受 ResultSuggestion 之后（请记住与 QuerySuggestion 区分开来），在我看来，用这个接受的结果预先填充搜索框是没有意义的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:25:59.917

尝试

```
var searchPane = Windows.ApplicationModel.Search.SearchPane.getForCurrentView();
searchPane.trySetQueryText("myQueryText"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:23:33.543

用户的文本会留在那里，以防在查看他们决定“哦，不是这样，我会查看另一个结果”的结果之一后，另一个结果甚至可能来自不同的应用程序。应用程序无法覆盖它。

# php - URL 不喜欢和号

> ID：11460768
> 
> 赞同：0
> 
> 时间：2012-07-12T21:13:19.327
> 
> 标签：php

当 url从以前开始时，我是否需要担心错误警告（**注意：未定义索引：页面**...） ？`username=guest&amp;page=1``username=guest&page=1`

它仅在我测试“登录”和“注销”时发生。

网址来自`htmlspecialchars($_SERVER['REQUEST_URI'])`

有什么办法可以转换`&amp;`回 `&`?

如果没有，我会想办法删除

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:15:52.463

问题是你正在使用`htmlspecialchars`on `$_SERVER['REQUEST_URI']`。如果您只是回显了请求 URI，那么与符号不会有任何问题。

# javascript - 在变量中解析 JSON 响应存储值

> ID：11460769
> 
> 赞同：0
> 
> 时间：2012-07-12T21:13:28.087
> 
> 标签：javascript, json, parsing

我收到以下 JSON 响应：

```
"Nitro": {
    "Login": {
        "sessionKey": "NHwxNDQ4MzR8MzY1ODE5ODMwMnwxMzQ0NzE5MTYyfDgxY2M1NjYxZDBiY2NiODI4NmM2Mjc1ODI2MzA1NDY3YmVhNzJjZDR8MA=="
    },
    "res": "ok",
    "method": "user.login",
    "server": "sbnitro01.prod.bunchball.net/nitro4.4.0"
}
} 
```

我不明白如何用 JavaScript 解析它并将 sessionKey 的值存储在变量中。我不能在这个项目上使用 jQuery，而且似乎无法用 JS 获取密钥。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:27:11.343

尝试：

```
var sessionKey = obj.Nitro.Login['sessionKey']; 
```

这将获取存储在`obj`变量中的对象，然后获取`Nitro`属性对象，然后获取`Login`属性对象并相应地提取属性`sessionKey`。

# iphone - 在我的地图注释中放置一个视图，并在触摸时更改此视图

> ID：11460776
> 
> 赞同：1
> 
> 时间：2012-07-12T21:13:48.077
> 
> 标签：iphone, ios, mapkit, mkannotation, mkannotationview

我在我的应用程序中插入了一个mapView，并插入了注释，但是他在这些地方放了一个大头针，当我触摸大头针时，我的注释出现了一个标题和一行文本，我使用一个基本教程制作了这个

现在我需要将此注释更改为具有图像、按钮和名称，或者只有一个图像，我需要我标记的每个坐标都有一个注释，就像这个图像，而不是那个红色别针： ![在此处输入图像描述](../Images/2dce1799431aaaaba9968db0b037c0d6.png)

当我触摸此注释时，必须更改为：（这里的动画会很好） ![在此处输入图像描述](../Images/645d1e338fde8a79fa73f2af07ae7742.png)

当我触摸这个红色按钮时，我将转到另一个视图，但我遇到了麻烦，我正在寻找教程，但没有什么能真正帮助我，但我什至不知道如何开始.

# jsf-2 - JSF 表单上的 SelectOneMenu 控件中动态添加的选项提交为 null

> ID：11460779
> 
> 赞同：1
> 
> 时间：2012-07-12T21:14:08.590
> 
> 标签：jsf-2, glassfish

我有一个标准的 JSF h:form，其中包含一个 h:SelectOneMenu 控件。只要我从呈现页面时填充的列表中选择一个项目，它就可以完美地工作。我认为这并不重要，但将其放在上下文中，选择的值用于构建返回匹配记录列表的查询。

我已经在控件上实现了 JQuery 自动完成框，只要我选择其中一个原始值，它仍然可以正常工作。

当我在呈现页面时输入不在选择控件中的值时，就会出现问题。使用 JQuery，我对其进行了设置，以便当输入不在列表中的值时，将该值作为新选项添加​​到选择中。

我可以验证该选项是否已添加到底层选择控件，并通过 javascript 进行选择。但是，当在这之后立即在支持 bean 中调用 setter 时，传入 setter 的值为 null，并且永远不会到达运行查询的函数。AJAX 响应中返回以下错误，但我还没有找到验证值的位置。它也不是必填字段。

> 验证错误：值无效

这是我的前端代码：

```
 <h:selectOneMenu id="make" styleClass="combobox" value="#{listBean.make}" 
                     effect="fade" label="#{listBean.makeLabel}" >
      <f:selectItems value="#{listBean.makeList}" />
   </h:selectOneMenu> 
```

以及 bean 中的设置器：

```
 public void setMake(String make) {
       this.make = make;
    } 
```

我猜我只需要找到一种方法将新选项包含在支持 bean 的 makeList 列表中，但我不知道该怎么做。任何帮助或建议将不胜感激。

Java EE 6、GlassFish 3.1、Eclipse 3.7 - 在 FireFox 和 Chrome 上都观察到问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:38:02.713

您需要通过 提供动态添加的项目`<f:selectItems>`，而不是通过 JavaScript。如果该项目不存在于 中`<f:selectItems>`，那么您将得到这个验证错误。这样做是为了防止篡改/黑客请求试图将非法/未提供的值输入服务器端。

更简单的是使用 JSF 组件库。例如，PrimeFaces 有一个[`<p:autoComplete>`](http://www.primefaces.org/showcase/ui/autoCompleteBasic.jsf)确切的用途。

# cordova - JsRender 与 Android 上的 PhoneGap 不兼容？

> ID：11460780
> 
> 赞同：1
> 
> 时间：2012-07-12T21:14:09.237
> 
> 标签：cordova, jsrender

我想在 PhoneGap Jquery Mobile 项目中使用 JsRender。当我在一个简单的浏览器（例如 Firefox）中运行我的应用程序时，一切正常。当我在 Android 模拟器中运行应用程序时，我在控制台中收到以下错误：

D/CordovaLog(603)：file:///android_asset/www/js/program.js：第 45 行：TypeError：表达式'$("#vehicletemplate").render'[未定义] 的结果不是函数。

请指教。有没有人在 Android 2.1 上使用 Jquery Mobile 在 Phonegap 中尝试 JsRender？

# html - IE6 中的任意列大小和缺少边框

> ID：11460781
> 
> 赞同：0
> 
> 时间：2012-07-12T21:14:10.297
> 
> 标签：html, css, internet-explorer-6

我创建了具有以下标记的嵌套表，其中第一个表包含典型行的示例：

```
<table class="outer">
    <tr>
        <td>
            <table class="column" id="left_column">
                <tr>
                    <td>
                        <table class="cell" id="t1">
                            <tr>
                                <td>
                                    <asp:Literal runat="server" ID="t1r2c0" />
                                </td>
                                <td>
                                    <asp:Literal runat="server" ID="t1r2c1" />
                                </td>
                                <td class="image">
                                    <span id="s1" runat="server">
                                        <asp:PlaceHolder ID="p1" runat="server">
                                        </asp:PlaceHolder>
                                    </span>
                                </td>
                                <td>
                                    <asp:Literal runat="server" ID="t1r2c3" />
                                </td>
                                <td class="gray">
                                    <asp:Literal runat="server" ID="t1r2c4" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>
                        <table class="cell" id="t2">
                            <!-- ... -->
                        </table>
                    </td>
                </tr>
            </table>
        </td>
        <td>
            <table class="column" id="rightColumn">
                <!-- ... -->
            </table>
        </td>
    </tr>
</table> 
```

这是相关的CSS：

```
#rightColumn table, #leftColumn table {
    width: 100%;
}
.cell {
    border-collapse: collapse;
    border: 2px solid black;
    margin: 5px;
}
.cell td {
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    vertical-align: middle;
}
.image {
    padding: 0;
    margin: 0;
    width: 75px;
} 
```

在 Firefox 中呈现如下：

![在此处输入图像描述](../Images/cdd29ed57871aeb8f4e3ad66aabc7d59.png)

但在 IE6 中呈现如下：

![在此处输入图像描述](../Images/501dba40f9b608d7008b9a5d41236a42.png)

IE 中出现了两件事：

1.  每张桌子都缺少右侧边框。
2.  右侧列中的第 2 和第 3 个表格的最后一列具有任意大小，尽管这些单元格是“图像”类并且应该具有 75 像素的固定宽度。

任何意见是极大的赞赏。

编辑：#rightColumn 表，#leftColumn 表 { 宽度：100%; 背景：红色}

![在此处输入图像描述](../Images/fb212de8aa20c3d0a0b5829a1dd23d7d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:59:20.970

检查 IE 是否正在呈现您的页面是否处于怪癖模式。Quirks 模式通常会特别影响元素宽度，因此我建议这是导致您的问题的一个非常有力的候选者。

您应该确保页面处于标准模式以便正确呈现。

这很容易通过确保页面在页面顶部具有有效的文档类型来完成。

如果您没有 doctype，您可以添加任何有效的 doctype 以使其在标准模式下工作，但如果您不确定要使用哪个，只需使用以下内容：

```
<!DOCTYPE html> 
```

希望有帮助。

# c - 什么是 GLIBC？这有什么用途？

> ID：11460782
> 
> 赞同：56
> 
> 时间：2012-07-12T21:14:12.287
> 
> 标签：c, gnu, glibc, standard-library

我正在寻找 C 标准库的源代码。我的意思是，例如，cos、abs、printf、scanf、fopen 和所有其他标准 C 函数是如何编写的，我的意思是看它们的源代码。

所以在搜索这个时，我遇到了 GLIBC，但我不知道它到底是什么。它是 GNU C 库，它包含一些源代码，但它们实际上是什么，它们是标准函数的源代码还是其他东西？它是用来做什么的？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-12T21:38:31.557

它是 C 标准中描述的*标准 C 库*的实现，以及一些额外有用的东西，这些东西不是严格标准但经常使用。

它的主要内容是：

1) ANSI、c99、c11 标准中描述的 C 库。它包括宏、符号、函数实现等（printf()、malloc() 等）

2) POSIX 标准库。系统调用的“用户空间”粘合剂。（open（），read（）等。实际上glibc并没有“实现”系统调用。内核会这样做。但是glibc为内核提供的服务提供了用户空间接口，以便用户应用程序可以像普通的一样使用系统调用功能。

3）还有一些非标准但有用的东西。

“使用武力，阅读源代码”

```
$git clone git://sourceware.org/git/glibc.git 
```

（当我在 glibc 中查看 malloc.c 时，我最近非常开明）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-12T21:55:27.583

该标准有多种实现方式。Glibc 是大多数 Linux 使用的实现，但也有其他实现。Glibc 还包含（如 Aftnix 所述）为跳转到内核（也称为系统调用）设置场景的粘合函数。许多 glibc 的“函数”并不做实际的工作，而只是委托给内核。

要阅读 Glibc 的源代码，只需 google 即可。有无数的网站可以携带它，也有几种变体。

Windows 使用微软自己的实现，我相信它被称为 MSVCR.DLL。我怀疑您是否会在任何地方找到该库的源代码。另请注意，Linux 黑客可能认为是“标准”的某些功能在 Windows 上根本不存在（尤其是 fork）。反之亦然。

其他系统将有自己的 libc。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-23T12:02:21.207

glibc 包包含系统上多个程序使用的标准库。为了节省磁盘空间和内存，以及使升级更容易，公共系统代码被保存在一个地方并在程序之间共享。这个特定的包包含最重要的共享库集：标准 C 库和标准数学库。没有这两个库，Linux 系统将无法运行。glibc 包还包含国家语言（区域设置）支持。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T21:20:05.287

是的，它是标准库函数的实现。

更具体地说，它是所有 GNU 系统和几乎所有使用 Linux 内核的 *NIX 系统的实现。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-03T20:19:12.110

以下是一些“动手”的观点：

*   它在 Linux 内核之上实现了 POSIX C API：[“POSIX”是什么意思？](https://stackoverflow.com/questions/1780599/what-is-the-meaning-of-posix/31865755#31865755)
*   它包含几个针对几种不同架构的 ANSI C 函数的汇编手动优化版本，例如`strlen`：
    *   [`sysdeps/x86_64/strlen.S`](https://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/strlen.S;h=01cb5fa846e72a2408eaeb8cbe04ba60129a9dcf;hb=3c03baca37fdcb52c3881e653ca392bba7a99c2b)
    *   [`sysdeps/aarch64/strlen.S`](https://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/aarch64/strlen.S;h=32292e3b6ee073a9c35515fc2ff4d0fb2ace6385;hb=3c03baca37fdcb52c3881e653ca392bba7a99c2b)
*   如何修改其源代码，重新编译和使用它更好地理解它：[如何从源代码编译我自己的 glibc C 标准库并使用它？](https://stackoverflow.com/questions/10412684/how-to-compile-my-own-glibc-c-standard-library-from-source-and-use-it/52454710#52454710)
*   如何使用 QEMU 和 Buildroot 对 GDB 进行单步调试：[https ://github.com/cirosantilli/linux-kernel-module-cheat/tree/9693c23fe6b2ae1409010a1a29ff0c1b7bd4b39e#gdbserver-libc](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/9693c23fe6b2ae1409010a1a29ff0c1b7bd4b39e#gdbserver-libc)

# facebook - 我可以将一个拥有 1,000 名经过身份验证的用户的应用程序置于沙盒模式并且不会丢失他们吗？

> ID：11460784
> 
> 赞同：1
> 
> 时间：2012-07-12T21:14:20.260
> 
> 标签：facebook

我需要对我开发的应用程序进行一些更新；我已经准备好它们了，但我想将应用程序放在沙盒中，这样没人会看到任何问题。我只是想验证当我这样做时我不会失去我的 1000 个经过身份验证的用户？

# python - 如何启动子进程并将其用作 Python 中的服务器？

> ID：11460788
> 
> 赞同：0
> 
> 时间：2012-07-12T21:14:31.247
> 
> 标签：python, subprocess, popen

我需要在 Python 中启动一个 Python 脚本并保持它。

出于论证的目的，假设有一个名为 slave.py 的程序

```
 if __name__=='__main__':
        done = False

        while not done:
            line = raw_input()
            print line
            if line.lower() == 'quit' or line.lower() == 'q':
                done = True
                break

            stringLen = len(line)
            print "len: %d " % stringLen 
```

程序“slave.py”接收一个字符串，计算字符串的输入长度，并使用打印语句将长度输出到标准输出。

它应该一直运行，直到我给它一个“退出”或“q”作为输入。

同时，在另一个名为“master.py”的程序中，我将调用“slave.py”

```
 # Master.py
    if __name__=='__main__':
        # Start a subprocess of "slave.py"
        slave = subprocess.Popen('python slave.py', shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

        x = "Hello world!"
        (stdout, stderr) = slave.communicate(x)

        # This works - returns 12
        print "stdout: ", stdout            

        x = "name is"
        # The code bombs here with a 'ValueError: I/O operation on closed file'
        (stdout, stderr) = slave.communicate(x)

        print "stdout: ", stdout 
```

但是，我使用 Popen() 打开的 slave.py 程序只需要一个communicate() 调用。它在一个通信（）调用之后结束。

对于这个例子，我想让 slave.py 作为客户端-服务器模型中的服务器继续运行，直到它通过通信接收到“quit”或“q”字符串。我将如何使用 subprocess.Popen() 调用来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:57:37.363

如果每个输入行产生已知数量的输出行，那么您可以：

```
import sys
from subprocess import Popen, PIPE

p = Popen([sys.executable, '-u', 'slave.py'], stdin=PIPE, stdout=PIPE)
def send(input):
    print >>p.stdin, input
    print p.stdout.readline(), # print input
    response = p.stdout.readline()
    if response:
        print response, # or just return it
    else: # EOF
        p.stdout.close()

send("hello world")
# ...
send("name is")
send("q")
p.stdin.close() # nothing more to send
print 'waiting'
p.wait()
print 'done' 
```

否则，您可能需要[线程异步读取输出](https://stackoverflow.com/a/4896288/4279)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:20:50.600

如果您缩进让奴隶在父生命周期中保持活力，您可以将其守护：

[http://code.activestate.com/recipes/278731-creating-a-daemon-the-python-way/](http://code.activestate.com/recipes/278731-creating-a-daemon-the-python-way/)

或者，您可以查看多进程 API：

[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

...它允许对不同的子进程进行类似线程的处理。

# android - 如何在 ViewGroup 级别处理所有 TouchEvents（即冒泡所有事件直到包含视图组）

> ID：11460789
> 
> 赞同：5
> 
> 时间：2012-07-12T21:14:36.110
> 
> 标签：android, android-layout

我想在容器级别处理所有触摸事件。换句话说，我希望所有的触摸事件都达到容器级别。现在我发现 TouchEvents 只有在触摸位置没有落在视图组包含的 UI 组件上时才会到达包含的 ViewGroup。包含的 UI 元素处理 TouchEvent，它不会冒泡到容器中。有谁知道如何保证所有触摸事件都到达顶级容器？

为了清楚起见，想象一个带有几个按钮、几个编辑文本和几个复选框的活动。典型的形式。通常我会看到每个 UI 组件都会捕获落在它上面的 TouchEvent，而容器并不聪明。所以我想知道容器/视图组如何被告知在其区域内任何地方的所有触摸，无论该区域是否被按钮、空白空间或编辑文本占用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T15:11:29.253

**这就是我解释你的问题的方式：**

你有这样的视图树

*   视图组 G
    *   查看 A
    *   视图 B
    *   ...

并且您希望 G 处理在触摸时创建的 MotionEvent，即使它被 A、B、...

* * *

**如何：**

我给你两个选择。取决于你是否想忽略消费

1.  *每个*孩子
2.  只有选定的孩子

使用以下模板之一：

1.  在 G 中覆盖 dispatchTouchEvent()

    ```
    // In G
    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
         super.dispatchTouchEvent(event);

         // Handle event here instead of using an OnTouchListener

         return true;
     } 
    ```

2.  在每个应该忽略其消费的孩子中覆盖 dispatchTouchEvent()

    *   忽略一些孩子

        ```
        // In every child whose consumption should be ignored
        @Override
        public boolean dispatchTouchEvent(MotionEvent event) {
             super.dispatchTouchEvent(ev);

             return false; // false means "I did not consume the event"
         } 
        ```

    *   不要忘记设置你的监听器

        ```
        // In G, before touch should be recognized
        setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // Handle event here

                return true; // true means "I did consume the event"
            }
        }); 
        ```

以代码行来衡量，选项 1 要简单得多。选项 2 是为了以防您需要对某些 ​​A、B ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T13:18:06.883

我知道已经晚了，但我认为未来的读者可能想看看[ViewGroups.onInterceptTouchEvent()](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)。

# javascript - 函数中的对象访问不起作用

> ID：11460793
> 
> 赞同：3
> 
> 时间：2012-07-12T21:14:51.360
> 
> 标签：javascript, scope

这是代码：

```
(function(Info, undefined) {
    var createInfoTableForFeature = function (obj) {
        var data2form = {};
        data2form.name = obj.name;
        data2form.state = obj.state;
        data2form.stateid=obj.stateId;
        data2form.city = obj.city;
        data2form.cityId=obj.cityId;
        data2form.sector = obj.sector;
        data2form.sectorId=obj.sectorId;
        data2form.municipality = obj.municipality;
        data2form.municipalityId=obj.municipalityId;
        data2form.parish = obj.parish;
        data2form.parishId = obj.parishId; 
        data2form.postcode = obj.postcode;
    }
    Info.copy2form = function(data){
        console.log(data);
    }
})(window.Info = window.Info || {}); 
```

当我打电话时`Info.copy2form(data2form)`，`data2form`是`undefined`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:40:14.593

您想`data2form`成为全局的，那么您必须`var`在变量声明之前删除 de 关键字`data2form`以使其成为全局变量。

如果你想让它可以从任何地方访问，但在`Info`容器内，那么你可以这样声明它：

```
Info.data2form = {}; 
```

然后像这样调用你的函数：

```
Info.copy2form(Info.data2form) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:19:44.093

*到目前为止，您的帖子似乎与 JSON 无关，哦。*

您的 data2form 在函数之外不存在。您应该将其分配给 window.data2form 或在函数外部定义 var data2form。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:24:06.030

这不起作用，因为 data2form 是匿名函数 (createInfoTableForFeature) 内部的一个局部变量。

这是 1000 个解决方案之一：

```
function createInfoTableForFeature(obj) {
    var data2form = {};
    data2form.name = obj.name;

    data2form.state = obj.state;
    data2form.stateid=obj.stateId;

    data2form.city = obj.city;
    data2form.cityId=obj.cityId;

    data2form.sector = obj.sector;
    data2form.sectorId=obj.sectorId;

    data2form.municipality = obj.municipality;
    data2form.municipalityId=obj.municipalityId;

    data2form.parish = obj.parish;
    data2form.parishId = obj.parishId; 

    data2form.postcode = obj.postcode;

    return data2form;
}

var data2form = createInfoTableForFeature(obj);
Info.copy2form(data2form); 
```

# javascript - Javascript FileSaver在写入大量文件后保存空文件

> ID：11460800
> 
> 赞同：5
> 
> 时间：2012-07-12T21:15:17.820
> 
> 标签：javascript, file, google-chrome, filesystems

## 背景

我正在开发一个基本上可以在客户端生成视频的内部项目，但是由于我知道没有 JavaScript 视频编码器，所以我只是单独导出每个帧。我需要避免上传到服务器；这一切都发生在客户端。

## 执行

我正在使用这个[FileSaver.js](https://github.com/eligrey/FileSaver.js)（更具体地说，Chrome 的 webkit FileSystem API）来保存由 HTML5 画布生成的大量 PNG。我将 Chrome 设置为自动下载到特定文件夹，所以当我点击“保存”时，它就会起飞并每秒保存 20 张图像。这非常适合我的目的。

如果我可以使用[JSZip](http://stuartk.com/jszip/)将所有这些帧压缩成一个文件，然后再提供给客户端进行保存，我会的，但我什至没有尝试过，因为浏览器没有足够的内存来生成 ~8000 个 640x480 PNG 和然后压缩它们。

## 问题

问题是在一定数量的图像之后，下载的每个文件都是空的。Chrome 甚至开始在下载栏中告诉我该文件为 0 字节。在具有相同导出设置的同一个项目上重复，空保存在完全相同的时间开始。例如，对于一个项目，我可以在它阻塞之前保存前 5494 帧。（我知道这是一个非常大的数字，但我无能为力。）我尝试在保存之间设置 10 毫秒的延迟，但这没有任何效果。我没有尝试过更大的延迟，因为导出需要很长时间。

我检查了 blob.size 并且它永远不会为零。我怀疑它超出了一些配额，但没有抛出错误；它只是默默地无法写入沙箱或将文件复制到用户指定的位置。

## 问题

如何检测这些空存档？阻止他们？有一个更好的方法吗？我只是被搞砸了吗？

* * *

编辑：实际上，在调试 FileSaver.js 之后，我意识到它甚至没有使用 webkitRequestFileSystem；它到达这里时返回：

```
if (can_use_save_link) {
    object_url = get_object_url(blob);
    save_link.href = object_url;
    save_link.download = name;
    if (click(save_link)) {
        filesaver.readyState = filesaver.DONE;
        dispatch_all();
        return;
    }
} 
```

因此，看起来它甚至没有使用 FileSystem API，因此我不知道如何在存储空间满之前清空存储空间。

* * *

编辑2：我尝试将“if（can_use_save_link）”块移动到“writer.onwriteend”函数内部，并将其更改为：

```
if (can_use_save_link) {
    save_link.href = file.toURL();
    save_link.download = name;
    click(save_link);
}else{
    target_view.location.href = file.toURL();
} 
```

结果是我能够保存所有 8260 个文件（总共约 1.5GB），因为它现在使用具有配额的存储。以前，这些文件没有出现在 HTML5 文件系统中，因为我假设如果锚元素支持“下载”属性，您就不需要将它们放在那里。

我还能够注释掉将“.download”附加到文件名的代码，并且我必须为“file.remove()”的两个实例提供一个空的匿名函数作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:03:31.230

使用 JSZip，如果禁用压缩（这是默认设置），它不会占用太多内存。无论如何要手动禁用压缩，请确保`compression: "STORE"`在调用`zip.generate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:13:07.367

我最终修改了 FileSaver.js（请参阅原始帖子中的“EDIT 2”）。

# ruby-on-rails - 我可以将 rails 属性命名为“属性”吗？

> ID：11460801
> 
> 赞同：3
> 
> 时间：2012-07-12T21:15:21.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, polymorphic-associations

我有一个在模型之间设置的多态表，我们称之为文档，以及它所具有的许多属性。所以我有一个 DocumentRelationship 模型，我想在这个迁移中写下多态属性名称将是“属性”。EG 在 DocumentRelationship 的迁移中我要添加：

```
 t.integer :attribute_id
 t.string  :attribute_type 
```

然后，在 Document 模型中，我会说：

```
 has_many :attributes, :polymorphic => true

 has_many :authors, :through => :attributes, :source_type => "Author" 
```

或类似的东西。

我可以将此字段命名为“属性”吗？我知道您不能将多态字段命名为“对象”；这会导致错误..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:20:47.527

[http://oldwiki.rubyonrails.org/rails/pages/ReservedWords](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)

请参阅以下部分：**据报道会引起麻烦的其他名称：**

> attributes – 如果你有一个 has_many 调用的属性，你不能再访问你的对象属性；只有关联的对象

**更新**：此链接包含更多详细信息[https://github.com/walterdavis/railsready/wiki](https://github.com/walterdavis/railsready/wiki)还可以查看他的具有搜索功能的 heroku 应用程序[http://reservedwords.herokuapp.com/](http://reservedwords.herokuapp.com/)

# java - 部署时出现 500 错误，但作为 localhost 工作

> ID：11460802
> 
> 赞同：0
> 
> 时间：2012-07-12T21:15:27.497
> 
> 标签：java, google-app-engine

我按照 Google 的 Java 版 App Engine 教程进行操作，当我在我的机器上运行它时，它可以在 localhost:8888/guestbook 上正常工作，并且显示的只是 Hello, World。但是，当我部署它然后通过 app-name.appspot.com/guestbook 访问它时，它给了我一个 500 错误。

这是GuestbookServlet 代码： http: [//pastebin.com/LrAjXjW4](http://pastebin.com/LrAjXjW4)

web.xml 和 appengine-web.xml 内容： http: [//pastebin.com/UYFw3ChZ](http://pastebin.com/UYFw3ChZ)

如果这是一个菜鸟错误并且很容易通过搜索找到，我真的很抱歉，但是我环顾了半天仍然找不到答案。

如有必要，我会发布更多代码，但它基本上是 Java AppEngine 的第一个教程

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:45:15.990

听起来您正在使用 App Engine 不支持的 Java 7。使用 JDK6 重新编译，它应该会清除。

# python - 乘以一维数组 x 二维数组 python

> ID：11460806
> 
> 赞同：0
> 
> 时间：2012-07-12T21:15:38.953
> 
> 标签：python, numpy

我有一个二维数组和一个一维数组，我需要将一维数组中的每个元素乘以二维数组列中的每个元素。它基本上是矩阵乘法，但由于一维数组，numpy 不允许矩阵乘法。这是因为矩阵在 numpy 中本质上是二维的。我怎样才能解决这个问题？这是我想要的一个例子：

```
FrMtx = np.zeros(shape=(24,24)) #2d array
elem = np.zeros(24, dtype=float) #1d array
Result = np.zeros(shape=(24,24), dtype=float) #2d array to store results

some_loop to increment i:
    some_other_loop to increment j:
        Result[i][j] = (FrMtx[i][j] x elem[j]) 
```

许多努力给了我错误，例如`arrays used as indices must be of integer or boolean type`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:20:33.720

由于 NumPy 广播规则，一个简单的

```
Result = FrMtx * elem 
```

会给出想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:37:25.980

您应该能够将您的数组相乘，但是由于矩阵是正方形的，因此数组将相乘的“方向”并不是很明显。为了更明确地了解哪些轴被相乘，我发现总是将具有相同维数的数组相乘是有帮助的。

例如，将列相乘：

```
mtx = np.zeros(shape=(5,7))
col = np.zeros(shape=(5,))
result = mtx * col.reshape((5, 1)) 
```

通过将 col 重塑为 (5,1)，我们保证 mtx 的轴​​ 0 与 col 的轴 0 相乘。乘以行：

```
mtx = np.zeros(shape=(5,7))
row = np.zeros(shape=(7,))
result = mtx * row.reshape((1, 7)) 
```

这保证了 mtx 中的轴 1 乘以行中的轴 0。

# openerp - openerp 6.1 Web 客户端中缺少请求链接

> ID：11460809
> 
> 赞同：2
> 
> 时间：2012-07-12T21:15:58.693
> 
> 标签：openerp

我没有在 openerp Web 客户端的右上角看到“请求”链接。
我正在使用 OpenERP 6.1.1 。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T04:55:28.530

OpenERP 已从 openerp v6.1.1 网络客户端中删除了“请求”链接。res.request 模型仍然存在于 openerp v6.1.1 中，我认为他们正在尝试删除 res.request 模型。尝试使用 email_template，以便每当收到通知时，向用户发送邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T07:00:11.537

是的，Atom 你是对的，请求对象仍然存在，但作为 USB 改进的一部分，它已从右上角删除。但是是的，该对象仍然可以通过菜单访问：

`Settings > Customization >Low Level Object > Requests > Requests`

使用正确的访问权限，您可以在您喜欢的地方显示此菜单。因为安全性与 6.0.X 中的相同。

问候

# c++ - 在标准向量中查找 NULL 指针

> ID：11460810
> 
> 赞同：5
> 
> 时间：2012-07-12T21:16:00.547
> 
> 标签：c++, pointers, stl, null

我正在使用向量，在某些时候会有 NULL 条目；我想删除给定向量中的所有 NULL 出现。到目前为止，我的方法不起作用：

```
for(int i = sent_flit_list->size() - 1; i >= 0; i--)
if(sent_flit_list[i] == NULL)
    sent_flit_list->erase(sent_flit_list[i]);

for(int i = sent_pkt_list->size() - 1; i >= 0; i--)
if(sent_pkt_list[i] == NULL)
    sent_pkt_list->erase(sent_pkt_list[i]); 
```

在哪里

```
vector<Flit*> *sent_flit_list;
vector<Packet*> *sent_pkt_list; 
```

是向量。我尝试转换为 (Flit*)NULL/(Flit*)0 类型，但没有成功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T21:17:58.090

使用[Erase-Remove 习惯用法](http://en.wikipedia.org/wiki/Erase-remove_idiom)根据谓词从容器中删除元素。

在你的情况下：

```
// with a predicate
my_vec.erase(std::remove_if(begin(my_vec), end(my_vec), 
                           [](Flit* x) { return x == nullptr; }), 
             end(my_vec));

// with a value value
my_vec.erase(std::remove(begin(my_vec), end(my_vec), nullptr),
             end(my_vec)); 
```

您当前的方法不起作用，因为[vector::erase](http://en.cppreference.com/w/cpp/container/vector/erase)期望迭代器指向向量的元素，而不是存储类型的值。

坦率地说，你在做什么似乎有点奇怪。您不应将指针存储在容器中，而应将值存储在容器中。如果您需要`nullable`值，请使用`Maybe`诸如`boost::optional`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T21:44:26.327

`pmr`绝对正确，您应该使用`remove`后跟`erase`，这是代码中最重要的错误。但是，实际上导致您报告的错误消息的错误如下：

您的变量`sent_pkt_list`和`sent_flit_list`是*指向向量*的指针，而不是*向量*。因此，当您说类似 时`sent_pkt_list[i]`，这是在执行 C 样式的数组索引，而不是向量索引。的值`sent_pkt_list[i]`是 a (无疑是荒谬的，因为它有效地解除了对虚假指针的引用) `vector<Packet*>`，而不是 a `Packet*`。因此，您然后尝试将其与 进行比较`NULL`，这当然是行不通的。

# c# - msxsl：xslt 函数中的 c# 脚本声明了两次错误

> ID：11460817
> 
> 赞同：0
> 
> 时间：2012-07-12T21:16:45.093
> 
> 标签：c#, xslt

大家好，我正在尝试编写一个 xslt 模板，该模板使用 msxsl 从 web.config appSetting 创建超链接。每次我尝试运行代码时，它都会告诉我我已经在脚本中声明了两次 c# 方法。代码如下：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt"
    xmlns:files="urn:my-script" >
        <msxsl:script implements-prefix="files" language="CSharp">
    <msxsl:assembly name="System.Configuration"/>
    <msxsl:using namespace="System.Configuration"/>
    <![CDATA[
    public string LinkFile()
    {
         string link = System.Configuration.ConfigurationManager.AppSettings["fileUrl"];
         return link;
    }
    ]]>
</msxsl:script>

<xsl:template name="GenerateLinkFile">
    <xsl:param name="fileName"/>
    <xsl:param name="fileId"/>
    <xsl:choose>
        <xsl:when test="$fileName = ''">
            <xsl:value-of select="$fileName"/>
        </xsl:when>
        <xsl:otherwise>
            <a href="files:LinkFile()">
                <xsl:value-of select="$fileName"/>
            </a>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

我在**运行**时尝试生成超链接时遇到的错误如下： System.Xml.Xsl.XslLoadException: Type 'System.Xml.Xsl.CompiledQuery.Script1' already defined a member called 'LinkFile' with the same参数类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:08:59.250

我针对一个示例 XML 文件运行了您的 XSLT，它运行良好；这使我相信您可能从其他 XSLT 文件中多次调用此 XSLT。

处理这个问题的最好方法是，如果你有一个调用其他转换的根转换，从那里包含它，所以它只被引用一次；目的是确保该函数在整个转换过程中只包含一次，否则您将遇到您所看到的错误。

或者，独立调用此转换 - 一种常见的方法是将 XSLT 依次应用于源文档，一次执行一组转换。

# python - sqlite3 python参数传递问题

> ID：11460821
> 
> 赞同：1
> 
> 时间：2012-07-12T21:17:03.977
> 
> 标签：python, sql, sqlite

我有这个代码：

```
conn = sqlite3.connect("testDB")
curs = conn.cursor()

curs.execute("CREATE TABLE IF NOT EXISTS testTable( col1 VARCHAR, col2 VARCHAR)")
c1 = "value1"
c2 = "value2"
curs.execute("INSERT INTO testTable VALUES (?,?)", (c1, c2))#this works fine
conn.commit()

def inDB(curs, table, col, value):
    curs.execute("SELECT * FROM ? WHERE ?=?",(table, col, value)) #problemis here
    return bool(curs.fetchone())

print inDB(curs, "testTable", "col1", c1) 
```

它给了我这个错误：

```
Traceback (most recent call last):
  File "test.py", line 16, in <module>
    print inDB(curs, "testTable", "col1", c1)
  File "test.py", line 13, in inDB
    curs.execute("SELECT * FROM ? WHERE ?=?",(table, col, value))
sqlite3.OperationalError: near "?": syntax error 
```

为什么这不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:25:38.980

我不确定，但我认为您不能在表名或列名上使用绑定变量...

尝试

```
curs.execute("INSERT INTO ? VALUES (?,?)", (testTable, c1, c2)) 
```

我敢打赌这行不通。在这种情况下，您需要避免使用`?`表名或列名。我宁愿使用连接运算符来连接字符串，就像在 Java 中它是“+”一样。例如（Java 风格）：

```
("INSERT INTO " + testTable + " VALUES (?,?)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:59:48.070

这是我可以从文档中提取的全部内容：

[http://www.sqlite.org/cintro.html](http://www.sqlite.org/cintro.html)

> **3.0 绑定参数和复用预处理语句**
> 
> 在 SQLite 中，只要包含**字符串字面**量是有效的，就可以使用以下形式之一的参数：

[http://www.sqlite.org/c3ref/bind_blob.html](http://www.sqlite.org/c3ref/bind_blob.html)

> 在 sqlite3_prepare_v2() 及其变体的 SQL 语句文本输入中，**文字**可以替换为与以下模板之一匹配的参数：

[http://www.sqlite.org/lang_insert.html](http://www.sqlite.org/lang_insert.html)

![SQLite 插入](../Images/14e11e051291e0ff232ac0916cb1681d.png)

您可能不能使用参数化的表名，因为`[database-name.]table-name`它不是普通的文字值（这就是为什么您不能编写类似 的语句`INSERT INTO 'foo'||'bar'||12 VALUES ...`）。

或者也许是完全不同的东西。:)

# ios - QuickDialog 与 Storyboard 的集成

> ID：11460822
> 
> 赞同：0
> 
> 时间：2012-07-12T21:17:09.213
> 
> 标签：ios, storyboard, quickdialog

我是 iOS 开发的新手，最近遇到了[QuickDialog](http://escoz.com/open-source/quickdialog)。从表面上看，它会自动为您创建对话页面。

我最近的学习教会了我使用情节提要来创建视图。我想知道，QuickDialog 会与 Storyboard 集成吗？所以说我有一个通过快速对话制作的登录表单，登录视图会出现在情节提要上吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:40:12.867

您的链接似乎已损坏。但我猜你说的是[这个](https://github.com/escoz/QuickDialog/tree/master/sample)图书馆？

好吧，故事板并没有改变太多的开发环境。它只是为您处理视图控制器之间的一些转换。所以，是的，您可以将 QuickDialog 与情节提要一起使用。

但它不仅会出现在您的故事板中。您需要自己在其中添加使用 QuickDialog 实现的视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-14T07:12:30.720

当情节提要在 initWithCoder 中创建控制器时，您必须创建 QRootElement，如果要使用分组选项，则必须在此处设置它，对于其余选项，您可以在视图加载中设置它们，除此之外和往常一样：

1.  创建一个继承自 QuickDialogController 的新类
2.  在您的类实现中添加以下代码：

    ```
    -(id) initWithCoder:(NSCoder *)aDecoder {
        if ((self = [super initWithCoder:aDecoder])) {
            QRootElement *_root = [[QRootElement alloc] init];
            _root.grouped = YES;

            /* Put your init code here or in viewDidLoad */
            self.root = _root;
        }
        return self;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        QSection *section = [[QSection alloc] init];
        QLabelElement *label = [[QLabelElement alloc] initWithTitle:@"Hello" Value:@"world!"];
        [section addElement:label];

        self.root.title = @"Hello World";
        [self.root addSection:section];
    } 
    ```

3.  将故事板 UIViewController 的自定义类设置为您刚刚创建的类

# windows - 为 Postgres 工具设置 Windows PATH

> ID：11460823
> 
> 赞同：41
> 
> 时间：2012-07-12T21:17:10.650
> 
> 标签：windows, path

**我无法通过 Windows 中的命令行访问 PostgreSQL。**虽然我能够创建和更新数据库、通过 PGAdminIII 访问它们并推送到 Heroku，但我无法使用 psql 命令直接通过命令行访问它们。

当我尝试使用命令创建数据库时

```
$ createdb mydb 
```

如[PG 文档](http://www.postgresql.org/docs/8.3/static/tutorial-createdb.html)中所述，我收到消息

```
createdb: command not found 
```

文档建议在这种情况下，“PostgreSQL 未正确安装。请尝试使用绝对路径调用命令。” 果然，我可以通过输入文件的直接路径来创建数据库：

```
$ c:/postgreSQL/9.1/bin/createdb mydb 
```

这是否意味着可以重新配置路径以正确连接？还是我需要重新安装？我已经重装了好几次，都无法设置正确的路径。我目前将 /bin 和 /lib 路径都添加到我的系统和 user(:Umezo) 路径中，但仍然无法从命令行访问。

```
User variables for umezo
variable name: Path
variable value: C:\PostgreSQL\9.1\bin; C:\PostgreSQL\9.1\lib

System variables
variable name: Path
variable value: C:\PostgreSQL\9.1\bin; C:\PostgreSQL\9.1\lib 
```

任何有关如何修复我的分期付款的信息或反馈将不胜感激。

**我的信息如下：**

我主要关注这些来源[here](https://stackoverflow.com/questions/7086654/installing-postgres-on-windows-for-use-with-ruby-on-rails)和[here](http://netpie.wordpress.com/2011/03/17/setting-up-rails-3-with-postgresql-on-windows/)。我安装了 9.1 的 32 位版本，因为一些消息来源建议 64 位存在问题。

```
PG download version: Installer Version 9.1 Win x86-32
Operating System: Windows 7 (64 bit) 
```

**pg_hba.conf**

```
#TYPE     DATABASE     USER     CIER-ADDRESS     METHOD
# IPv4 local connections:
host      all          all      127.0.0.1/32     md5
# IPv6 local connections:
host      all          all      ::1/128          md5 
```

**postgresql.conf**

```
# - Connection Settings -
listen_addresses = '*'
port = 5432
max_connections = 100 
```

**pg_ident.conf**

```
# *Everything is commented out* 
```

**登录角色 Umezo** *#from PGAdminIII 中的属性窗口*

```
Properties/Role name: Umezo
Properties/Can login: "check"
Role privileges: all categories "check" 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-05-22T02:12:09.890

# 在 Windows 7 上配置 postreSQL PATH 变量

我也遇到了这个问题。我正在使用[Git Bash](https://openhatch.org/missions/windows-setup/install-git-bash)，因此在 Windows 上使用 Unix 风格的 $ 提示符。

```
$ rails db
Couldn't find database client: psql, psql.exe.  Check your $PATH and try again. 
```

这是我所做的：

在 Windows 7 中，导航至：

```
Control Panel
  All Control Panel Items
    System
      Advanced System Settings
        Environment Variables
          from the System Variables box select "PATH"
              Edit... 
```

然后将此字符串附加到现有的 PATH 变量值：

`;C:\Program Files\PostgreSQL\9.2\bin`

并单击“确定”三次退出菜单。

现在，关闭控制台并重新启动它。

导航回 Rails 应用程序的目录。就我而言，这是通过以下方式完成的：

`$ cd rails_projects/sample_app`

然后，再试一次：

`$ rails db`

来源：

[如何在 Windows 中将 PostgreSQL /bin 目录放在我的路径上？](https://stackoverflow.com/questions/12279856/how-do-i-put-postgresql-bin-directory-on-my-path-in-windows)

[http://railscasts.com/episodes/342-migrating-to-postgresql?view=asciicast](http://railscasts.com/episodes/342-migrating-to-postgresql?view=asciicast)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-07T19:58:48.553

# 为 Postgresql 设置 Windows 路径

```
open my Computer ==>
  right click inside my computer and select properties ==>
    Click on Advanced System Settings ==>
       Environment Variables ==>
          from the System Variables box select "PATH" ==>
             Edit... ==> 
```

然后将其添加到您找到的任何内容的末尾

```
 ;C:\PostgreSQL\9.2\bin; C:\PostgreSQL\9.2\lib 
```

之后继续点击确定

打开 cmd/命令提示符.... 在命令提示符下打开 psql

```
psql -U username database 
```

例如。我有一个数据库名称 FRIENDS 和一个用户 MEE .. 它将是

```
psql -U MEE FRIENDS 
```

然后将提示您提供相关用户的密码。谢谢

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-19T18:38:17.840

您需要做的就是更改 PATH 变量以包含`bin`您的 PostgreSQL 安装目录。

关于如何更改环境变量的解释在这里：

[http://support.microsoft.com/kb/310519](http://support.microsoft.com/kb/310519)
[http://www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm)

要验证路径是否设置正确，您可以使用：

```
echo %PATH% 
```

在命令行上。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-05-12T18:31:19.520

## 在 Windows 中为 PostgreSQL 设置路径：

1.  搜索**env**将显示**Edit environment variables** for your account
2.  选择**环境变量**
3.  从系统变量框中选择**PATH**
4.  单击**新建**（添加新路径）

更改 PATH 变量以包含 PostgreSQL 安装的**bin**目录。
然后添加他们的新路径...... [例如]

```
C:\Program Files\PostgreSQL\12\bin 
```

之后点击**确定**

打开**CMD/命令提示符**。输入这个来打开*psql*

```
psql -U username database_name 
```

*例如`psql -U postgres test`*

现在，系统将提示您为用户提供**密码**。*（它将作为安全措施隐藏）。*

那你就可以走了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-18T10:51:02.407

在 Postgres 9.6(PgAdmin 4) 上，这可以在 Preferences->Paths->Binary paths 中设置： - 将 PostgreSQL Binary Path 变量设置为 "C:\Program Files\PostgreSQL\9.6\bin" 或您安装的位置

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-03T10:23:51.377

为了将我的 git bash 连接到 postgreSQL，我必须向 windows 添加至少 4 个环境变量。Git、Node.js、System 32 和 postgreSQL。这就是我为 Path 变量设置的值：`C:\Windows\System32;C:\Program Files\Git\cmd;C:\Program Files\nodejs;C:\Program Files\PostgreSQL\12\bin;`它工作得很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-13T06:21:44.387

如果有人仍然想知道如何添加环境变量，请使用此链接添加变量。链接： [https ://sqlbackupandftp.com/blog/setting-windows-path-for-postgres-tools](https://sqlbackupandftp.com/blog/setting-windows-path-for-postgres-tools)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-04T19:43:13.417

**在 Windows 中设置环境**

我们 createdbfile 存在于这个标记的文件夹中。所以复制这个文件夹路径并粘贴到系统变量下的环境变量设置中。

[![在此处输入图像描述](../Images/264cae0b5d727a2cd32454a296937d75.png)](https://i.stack.imgur.com/JFMdD.png)

*开始 -> 环境变量*

[![在此处输入图像描述](../Images/76d41eaefcde87f2acc9de2bfc02769a.png)](https://i.stack.imgur.com/8gzzv.png)

选择环境变量

[![在此处输入图像描述](../Images/ec7c2bd73c5985752e7c862ac4c16046.png)](https://i.stack.imgur.com/shc0F.png)

像这样创建一个新的环境变量

[![在此处输入图像描述](../Images/8d438d6d506dc32641dc3b2388ef8380.png)](https://i.stack.imgur.com/35YL6.png)

在路径变量中添加环境变量 postgres 作为 %postgres%

[![在此处输入图像描述](../Images/bca47c8295ce1fd35270365fedc228d6.png)](https://i.stack.imgur.com/fxmO0.png)

现在通过一个新的命令提示符并输入 conda（关闭已打开的终端或 cmd）来检查

[![在此处输入图像描述](../Images/f5085f276861939f1cd4029f81dbf536.png)](https://i.stack.imgur.com/95nGX.png)

现在住

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-07-25T03:48:13.767

我使用的是 Windows 8，但上述解决方案对我不起作用。我将 Postgres 从 9.4 降级到 9.3。伙计，它起作用了:)

# python - Python/MySQL：无数据 - 获取、选择或处理零行

> ID：11460825
> 
> 赞同：1
> 
> 时间：2012-07-12T21:17:16.857
> 
> 标签：python, mysql

我遇到错误“无数据 - 提取、选择或处理零行”的问题。

我已经缩短了我的问题，因为下面的答案描述了问题以及可能的解决方案。

回溯是：

```
cursor.execute("select function_1() from dual") 

/django/lib/python2.6/django/db/backends/util.py in execute
15\.             return self.cursor.execute(sql, params) 

/django/lib/python2.6/django/db/backends/mysql/base.py in execute
86\. return self.cursor.execute(query, args) 

usr/local/lib/python2.6/site-packages/MySQLdb/cursors.py in execute
176\.       if not self._defer_warnings: self._warning_check() 

/usr/local/lib/python2.6/site-packages/MySQLdb/cursors.py in _warning_check
92\.                   warn(w[-1], self.Warning, 3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:48:59.410

我花了很长时间处理这个问题：“没有数据 - 获取、选择或处理零行”。我意识到问题的一部分是不同版本的 MySQL（或者可能是 Django 和 Python）导致不同的行为。我不认为这是特定于 Python 或 Django 的，但不知道。我不知道它是否与设置的某些变量有关，而不是与不同版本中固有的东西有关。

两组版本分别是：

*   set1: (MySQL: 5.5.19), (Python: 2.7.1), (Django: 1.3.0)
*   set2: (MySQL: 5.0.05), (Python: 2.6.8), (Django: 1.2.4)

我做什么：

在 Python 中（通过 Django）：

```
cursor.execute("select function_1() from dual")
cursor.fetchall() 
```

定义：

*   虚拟查询是指保证返回一行但在代码逻辑中没有任何用途的数据库的任何查询。
*   continue_handler_1329 是：为 1329 begin end 声明 continue 处理程序；

在版本 SET1

案例 1a：Python 调用函数_1，其 LAST 查询返回 NULL。我们得到错误。

*   通过在末尾包含虚拟查询（或确保最后一个查询不返回 null）来修复。
*   假设 function_1 没有游标，包括 continue_handler_1329 无效。见下文。

案例 1b：Python 调用 function_1，后者调用 function2。没有 mysql 游标。如果 function2 的 LAST 查询返回 null：Function2 仍然被正确评估并返回正确的值给 function1。

*   无需修复。
*   包括 continue_handler_1329 （在任一函数中）没有效果（它仍然有效）。

案例 1c：Python 调用 function_1，它打开一个调用 function2 的游标（在游标循环内或游标选择本身中）。如果 function2 的 LAST 查询返回 null：这很糟糕。游标立即关闭，并且 function_1 继续运行，就好像游标已被评估一样。没有警告。

*   通过在 function2 末尾包含虚拟查询（或确保其最后一个查询不返回 null）来修复
*   在 function2 中包含 continue_handler_1329 无效。
*   在 function_1 中包含 continue_handler_1329 会导致无限循环。当游标用完行时，它不会在它自己的处理程序中结束，而是在新的处理程序中结束，而不是设置 Done = True。

对 VERSION SET1 的总结：

*   将最后一个虚拟查询添加到从 Python 调用的函数以及可能从游标调用的任何函数。或者以其他方式确保这些函数的最后一个查询永远不会返回 null。continue_handler_1329 不能解决问题，并且会导致带有游标的函数出现问题（除非 continue_handler_1329 在它自己的范围内）。

在版本 SET2

案例 2a：Python 调用 function_1，其中任何查询都返回 NULL。我们得到错误。

*   没有虚拟查询可以解决此问题。
*   通过包含 continue_handler_1329 修复，假设 function_1 没有任何游标（见下文）。或者确保没有查询返回 null。

案例 2b：Python 调用 function_1，后者又调用 function2。没有 mysql 游标。如果 function2s 有任何返回 null 的查询：我们得到错误。

*   没有虚拟查询可以解决此问题。
*   通过在 function2 中包含 continue_handler_1329 来修复（或确保没有查询返回 null）。
*   在 function1 中包含 continue_handler_1329 没有任何效果，除非它有游标（见下文）

案例 2c：Python 调用 function_1，它打开一个调用 function2 的游标（在游标循环内或游标选择本身中）。如果 function2 有任何返回 null 的查询：我们得到错误。

*   没有虚拟查询可以解决此问题。
*   通过在 function2 中包含 continue_handler_1329 来修复（或确保没有查询返回 null）。
*   在 function_1 中包含 continue_handler_1329 会导致无限循环。当游标用完行时，它不会在它自己的处理程序中结束，而是在新的处理程序中结束，而不是设置 Done = True。

SET2 版本的结论

*   将 continue_handler_1329 添加到任何可能具有返回 null 的查询的函数，带有游标的函数除外。这些不应包含任何返回 null 的查询，但声明的游标本身除外。但是，带有游标的函数可能包含一个单独的 begin-end 范围，带有 null-returning-query 和 continue_handler_1329。

总之，它可以在两者中工作：

*   将 continue_handler_1329 添加到所有可能包含返回 null 的查询的函数，并将最后一个虚拟查询添加到从 Python 调用的函数，以及可能从游标调用的任何函数。带有游标的函数可能不包含 continue_handler_1329 也不包含返回 null 的查询，除非它们位于单独的开始-结束范围内。（游标查询本身可能返回 null，这将由游标的 continue 处理程序处理。）。

# python - 有没有办法计算我在产量中有多少价值？

> ID：11460833
> 
> 赞同：1
> 
> 时间：2012-07-12T21:17:38.667
> 
> 标签：python, yield

我想知道在创建新的`file.txt`. 我的目标是检查我是否开始，结束值超过一对，然后我想为每对创建单独的文件。如果不是，那么就保持原样。

```
def searchPFAM(fname):
    with open(fname,'rb') as f:
        root = etree.parse(f)
        for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn"):#find dbname =PFAM
            try:
                start = int(lcn.get("start"))#if it is PFAM then look for start value
                end = int(lcn.get("end"))#if it is PFAM then also look for end value
                yield start, end
            except (TypeError , ValueError) as e:
                pass 

with open('newfile.txt','w') as fileinput:
    for start, end in searchPFAM(fname):
        print start, end  
        if start <= end:
            text=''.join(makeList[(start-1):(end-1)])
            fileinput.write(text) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:22:26.423

如果你想要每对都有一个文件，你可以这样做：

```
for i, (start, end) in enumerate(searchPFAM(fname)):
    print start, end  
    if start <= end:
        with open('newfile-%s.txt' % i,'w') as fileinput:
            text=''.join(makeList[(start-1):(end-1)])
            fileinput.write(text) 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:21:10.163

据我所知，没有办法做到这一点。您可以只返回一个对象列表并获取它的长度（或者更简单，将返回值转换为列表）：

```
PFAMresults=list(searchPFAM)
nresults=len(PFAMresults)
for start,end in PFAMresults:
    dosomething() 
```

# asp.net-mvc-3 - 如何将 url 解析为操作？

> ID：11460834
> 
> 赞同：2
> 
> 时间：2012-07-12T21:17:41.800
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

> **可能重复：**
> [ASP.NET MVC 从 URL 获取路由值](https://stackoverflow.com/questions/4993990/asp-net-mvc-get-route-values-from-a-url)

我的一个页面需要确定当前请求来自什么操作。我可以得到`Request.UrlReferrer`，但需要将其转换为动作和控制器名称。从行动到路线有很多方法，但我怎样才能回去呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:39:12.547

这是你的答案：[ASP.NET MVC Get Route values from a URL](https://stackoverflow.com/a/4994009/290343)

# asp.net-mvc-3 - 如何使 jqGrid 行链接到 asp.net MVC 3 中的操作

> ID：11460840
> 
> 赞同：0
> 
> 时间：2012-07-12T21:18:16.317
> 
> 标签：asp.net-mvc-3, hyperlink, jqgrid-asp.net

我终于得到了我的 asp.net 网格来显示数据......但是我需要它在单击其中一行时链接到一个动作......或者如果需要，单列我怎样才能获得进入其中之一的路由我在 MVC3 中的列或行？

我正在使用 jqGrid 顺便说一句...

这是我设置网格的方式

```
$("#list").jqGrid({
                        shrinkToFit: false,
                        autowidth: true,
                        datatype: 'jsonstring',
                        mtype: 'POST',
                        colNames: [
                                   'MRN',
                                   'Hospital Fin',
                                   'First Name',
                                   'Last Name',
                                   'Date of birth',
                                   'Completed Pathway',
                                   'Completed Pathway Reason',
                                   'PCP Appointment',
                                   'Specialist Appointment',
                                   'Admit Date'
                                   ],
                        colModel: [
                                   { name: 'MRN', width: 125, align: 'left' },
                                   { name: 'Hospital_Fin', width: 145, align: 'left' },
                                   { name: 'First_Name', width: 115, align: 'left' },
                                   { name: 'Last_Name', width: 115, align: 'left' },
                                   { name: 'Date_of_birth', width: 145, align: 'left' },
                                   { name: 'Completed_Pathway', width: 125, align: 'left' },
                                   { name: 'Completed_Pathway_Reason', width: 165, align: 'left' },
                                   { name: 'PCP_Appointment', width: 115, align: 'left' },
                                   { name: 'Specialist_Appointment', width: 125, align: 'left' },
                                   { name: 'Admit_Date', width: 185, align: 'left' }],
                        rowNum: 10,
                        rowList: [5, 10, 20, 50],
                        sortname: 'Id',
                        sortorder: "desc",
                        viewrecords: true,
                        imgpath: '/Content/themes/UPMC-theme/images',
                        caption: 'My first grid'
    }); 
```

有什么方法可以使整行可点击到操作方法？要打开我的视图，我需要调用一个控制器和一个动作......

EditEncoutner 是控制器，EditEncounter 是 Action...

```
public ActionResult EditEncounter(int encounterId, int popId)
        {
            string UID = HttpContext.User.Identity.Name;
            DataRepository dr = new DataRepository();
            PatientACOModel patMod = dr.Get(encounterId, UID);
            TempData["POPULATIONID"] = popId;
            return View(patMod);
        } 
```

现在我自己编写 JSON 字符串......我想`<a />`在相关列中放置一个标签。但这意味着我不会让整行都可点击，然后我必须选择放置链接的列......我可以制作一个编辑列，如果其他所有方法都失败了，我会这样做，我是然而，有点希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:31:02.107

假设您的 View 绑定到一个`List`类`Products`对象

```
@model IEnumerable<Product>
<table>
@foreach(var product in Model)
{
 <tr class="trClickable" data-viewurl="@Url.Action("View","Product",new {@id=product.ID})">
   <td>
     @product.Name
   </td>
   <td>
     @product.Price
   </td>
 </tr>
}
</table> 
```

我们将添加一些 javascript 来`click`捕获`row`.

```
<script type="text/javascript">
 $(function () {
     $(".trClickable").click(function () {
         var item = $(this);
         window.location.href = item.data("viewurl");
     });
 }); 
```

`View`假设您在内部调用了一个操作方法`ProductController`，该方法接受一个调用的参数`id`并在其视图中显示一些数据

# django - 从用户 django 自动填充

> ID：11460841
> 
> 赞同：0
> 
> 时间：2012-07-12T21:18:23.023
> 
> 标签：django, django-forms, django-views

我正在尝试制作一个用于更新 Django 中的用户帐户的表单，该表单会自动填充该特定用户的当前帐户数据。我可以用 HTML 来做到这一点，但我宁愿找到一种方法让它使用 Django 的表单系统工作。由于某些限制，我无法使用 Django 的内置用户管理，我必须自己构建。我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:44:29.460

[免费在线阅读The Django Book](http://www.djangobook.com/en/2.0/)的表单章节。然后查看传递给表单的[initial_data 。](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)那应该让你滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:07:50.840

如果您使用的是普通表单（sublassing `forms.Form`），请使用`initial`关键字参数将数据传递给表单构造函数：

```
# forms.py
class MyUserForm(forms.Form):
    username = forms.CharField(...
    first_name = forms.CharField(...
    ...

# views.py
if request.method == 'POST':
    # Process form
    form = MyUserForm(request.POST)
    ...
else:
    form = MyUserForm(initial={
        'username': request.user.username,
        'first_name': request.user.first_name,
        ...
    }
... 
```

不过，更简单的方法是使用[Django 的 ModelForms](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)。就像是：

```
# forms.py
class MyUserForm(forms.ModelForm):
    class Meta:
        model = User

# views.py
if request.method == 'POST':
    form = MyUserForm(request.POST, instance=request.user)
    ...
else:
    form = MyUserForm(instance=request.user)
... 
```

# java - 在java中将对象和资源保存到同一个文件中

> ID：11460849
> 
> 赞同：0
> 
> 时间：2012-07-12T21:19:10.537
> 
> 标签：java, file, serialization, resources, save

我正在开发一个程序，在该程序中我需要制作一个包含序列化对象的保存文件，该文件包含所有设置和用户添加到程序中的一些图像，我尝试将图像作为图像图标添加到对象中，这样它们就会被序列化但事实证明它在大小方面效率很低，然后，我尝试通过 objectoutputstream 序列化对象，然后在同一个文件中使用 imageoutputstream 序列化图像，但是当我反序列化图像时它已损坏，对象确实反序列化正确，那么我怎样才能在同一个文件中制作一个包含序列化对象和一些资源的保存文件？（如项目保存文件）提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:42:58.497

您可以实现一些处理包装系统的类。首先用 ObjectOutputStream 序列化对象，然后将资源保存在它旁边（可以在某个文件夹中，当有更多资源时）并将其打包到 ZIP 存档中（Java为此提供了API）。扩展名可以不是“.zip”...Microsoft **docx**格式或 OpenOffice **odt**格式也是包含许多 XML 文件的 ZIP 存档... :)

# php - PHP 奇怪的 is_int 行为

> ID：11460853
> 
> 赞同：1
> 
> 时间：2012-07-12T21:19:43.720
> 
> 标签：php

我有一个表单，它发布了一个如下所示的数组：

```
Array
(
    [SearchForm] => Array
    (
        [query] => Eg: 2 Bedroom Flat Chelsea
        [rent] => 1
        [share] => 0
        [short] => 1
        [price_min] => 50
        [price_max] => 100
    )

    [yt0] => Search
) 
```

我想检查 for 的值`$_REQUEST['SearchForm']['price_min']`是否不为空，并且是一个整数。我在用：

```
if (($_REQUEST['SearchForm']['price_min'] != "") && (is_int($_REQUEST['SearchForm']['price_min']))){
    ...
} 
```

正在返回 false （`is_int`if 语句没有被执行）任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:22:10.193

因为 POST 和 GET 参数总是字符串，所以用 is_numeric 代替 is_int

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:21:59.493

该值可能是`"50"`而不是`50`（它是一个字符串）。尝试`is_numeric()`代替`is_int()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:22:30.340

如果结果来自已发布的 html 表单，则该值很可能是一个字符串。

您可以使用它`is_numeric`来检查有效的数字字符串。

# python - 只有在字符串中连续时如何删除重复项？

> ID：11460855
> 
> 赞同：20
> 
> 时间：2012-07-12T21:19:46.077
> 
> 标签：python, string, duplicates

对于诸如 的字符串`'12233322155552'`，通过删除重复项，我可以获得`'1235'`.

但我要保留的是`'1232152'`，**只删除连续的重复项。**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T06:01:58.833

```
import re

# Only repeated numbers
answer = re.sub(r'(\d)\1+', r'\1', '12233322155552')

# Any repeated character
answer = re.sub(r'(.)\1+', r'\1', '12233322155552') 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-05-24T11:57:45.470

你可以用`itertools`，这是唯一的衬里

```
>>> s = '12233322155552'
>>> ''.join(i for i, _ in itertools.groupby(s))
'1232152' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-12T21:22:56.160

微软/亚马逊求职面试题：这是伪代码，实际代码留作练习。

```
for each char in the string do:
   if the current char is equal to the next char:
      delete next char
   else
     continue

return string 
```

作为更高级别，尝试（实际上不是实现）：

```
for s in string:
  if s == s+1:  ## check until the end of the string
     delete s+1 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-12T21:33:23.797

提示：itertools 模块非常有用。特别是一个函数，[itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)，在这里可能会派上用场：

> itertools.groupby(iterable[, key])
> 
> 创建一个从可迭代对象返回连续键和组的迭代器。键是计算每个元素的键值的函数。如果未指定或为 None，则 key 默认为标识函数并返回未更改的元素。通常，iterable 需要已经在相同的 key 函数上排序。

所以由于字符串是可迭代的，你可以做的是：

```
use groupby to collect neighbouring elements
extract the keys from the iterator returned by groupby
join the keys together 
```

这一切都可以在一条干净的线上完成..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T23:49:41.833

首先，您不能从 Python 中的字符串中删除任何内容（如果不清楚，请使用谷歌“Python 不可变字符串”）。

M 第一种方法是：

```
foo = '12233322155552'
bar = ''
for chr in foo:
    if bar == '' or chr != bar[len(bar)-1]:
        bar += chr 
```

或者，使用上面的 itertools 提示：

```
''.join([ k[0] for k in groupby(a) ]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T22:46:04.723

+1 为 groupby。即插即用，例如：

```
from itertools import groupby
def remove_dupes(arg):
    # create generator of distinct characters, ignore grouper objects
    unique = (i[0] for i in groupby(arg))
    return ''.join(unique) 
```

在 Python 2.7.2 中为我做饭

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-20T16:18:57.270

这将是一种方式：

```
def fix(a):
    list = []

    for element in a:
        # fill the list if the list is empty
        if len(list) == 0:list.append(element)
        # check with the last element of the list
        if list[-1] != element:  list.append(element)

    print(''.join(list))    

a= 'GGGGiiiiniiiGinnaaaaaProtijayi'
fix(a)
# output => GiniGinaProtijayi 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-19T14:05:36.680

```
number = '12233322155552'
temp_list = []

for item in number:   
   if len(temp_list) == 0:
      temp_list.append(item)

   elif len(temp_list) > 0:
      if  temp_list[-1] != item:
          temp_list.append(item)

print(''.join(temp_list)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-16T05:28:57.550

```
t = '12233322155552'
for i in t:
    dup = i+i
    t = re.sub(dup, i, t) 
```

您可以获得最终输出为`1232152`

# css - 相邻的 div，1：200px，2：100%

> ID：11460857
> 
> 赞同：0
> 
> 时间：2012-07-12T21:19:51.987
> 
> 标签：css, html, next

我的 div 有问题。

我一直在寻找，但找不到解决方案。

我在标题中有 2 个 div。一个包含徽标，另一个包含其他内容。第一个是 210px 宽度，第二个是 100% 宽度（填充可用空间）。

我想让两者在同一条线上。

我一直在尝试使用显示：内联，内联块，向左浮动，但不工作，第二个 div 占据了 100% 的页面并显示在徽标 div 下方。

提前致谢。

来源：http: [//jsfiddle.net/ukDQS/1/](http://jsfiddle.net/ukDQS/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:24:15.670

遵循解决方案：

[http://jsfiddle.net/ukDQS/3/](http://jsfiddle.net/ukDQS/3/)

div#header-right-content { div.logo }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:27:11.380

你不需要大部分的垃圾。这很容易。你把问题想多了。

首先，默认情况下 div 是 100%，因此您不需要在其上设置 100%。其次，您只需要将徽标向左浮动，并为其指定宽度。这里的所有都是它的。摆脱所有显示和其他浮动和其他类型的定位元素。

[http://jsfiddle.net/QYftP/](http://jsfiddle.net/QYftP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:28:02.613

```
#logo {
    float: left;
    height: 80px;
    padding: 5px 0 0 5px;
    width: 210px;
}
#header-right-content {
    height: 80px;
    margin-left: 210px;
    position: relative;
} 
```

您不需要将第二个 div 的宽度设置为 100%，因为它会扩展到最充分的空间。

# jquery - 无法从字符串中排除元素

> ID：11460858
> 
> 赞同：1
> 
> 时间：2012-07-12T21:19:53.063
> 
> 标签：jquery

我有一段文字，我需要将每组单词（逗号分隔）包装在一个跨度标签中，这样我就可以在悬停时为它们设置动画......很容易。我需要对除“a#close”之外的所有内容执行此操作。我曾尝试使用 ":not" 选择器，但似乎无法让它按需要工作。

HTML

```
<div id="stuff"><p>Words Words Words, Words Words Words, Words Words Words, Words Words
Words, Words Words Words, Words Words Words, Words Words Words,
<a href="#" id="close">Close</a></p></div> 
```

jQuery

```
$(function() {
    $('#stuff:not(a#close)').each(function(){
    var text = $(this).html().split(','),
        len = text.length,
        result = []; 

    for( var i = 0; i < len; i++ ) {
      result[i] = '<span>' + text[i] + '</span>';
    }
    $(this).html(result.join(' '));
}); 
```

我可以通过更改 html 标记并将 a#close 放在具有不同 ID 的 ap 标记中使其按需要工作，但我想更好地理解 :not 选择器，即如果它是正确的选择器。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:25:12.687

`$('#stuff:not(a#close)')`选择所有具有 id 的元素`stuff`，除了那些也匹配选择器的元素`a#close`。所以真的，`:not`在这种情况下没有做任何事情。考虑使用`.contents()`

```
var words = [];
$('#stuff p').contents(':not(a#close)').each(function() {
  words.push($(this).text().split(','));
});​​​​​​​​​​​​​​​​​​
// "words" is now an array of the comma separated strings. 
```

[http://jsfiddle.net/s9K7W/](http://jsfiddle.net/s9K7W/)

当然，这有点抽象。在您的情况下，您将修改`.each()`函数中正在执行的操作以拆分和包装文本节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:28:37.387

问题是它`a#close`是容器的一个孩子。您可以选择所有节点，然后过滤：

```
$('#stuff *').filter(':not(a#close)').each(function(){
var text = $(this).html().split(','),
        len = text.length,
        result = []; 

    for( var i = 0; i < len; i++ ) {
      result[i] = '<span>' + text[i] + '</span>';
    }
    $(this).html(result.join(' '));
}) 
```

您还可以在[`map`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)那里使用一个函数来避免循环：

```
var result = text.map(function(text){
    return '<span>' + text + '</span>';
}); 
```

# php - 通过 gmail 交换电子邮件而不透露真实的电子邮件地址

> ID：11460859
> 
> 赞同：0
> 
> 时间：2012-07-12T21:19:54.397
> 
> 标签：php, email, gmail

我有一个有 50 个用户的 php 论坛，我想知道如何在成员之间交换电子邮件而不透露他们真正的 gmail 电子邮件地址。论坛以这种方式工作。用户“A”打开一个联系表格并写信并发送电子邮件并发送它发给用户“B”。发送的电子邮件被用户“B”接收，但未显示用户“A”的真实电子邮件地址。当用户“B”回复时，用户“B”的电子邮件未附加在电子邮件中的任何位置。

他们现有的解决方案是这种事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:31:10.247

看看PHP`mail()`函数。

```
$to = 'send_to@gmail.com';
$subject = 'Some message subject';
$message = 'Oi, what\'s up?';
$headers = "From: Bob < some_other_email@gmail.com>\r\n";

mail($to, $subject, $message, $headers); 
```

# ios5 - 为什么第二个替换 segue 到详细视图控制器总是崩溃？

> ID：11460862
> 
> 赞同：1
> 
> 时间：2012-07-12T21:20:13.150
> 
> 标签：ios5, replace, crash, uisplitviewcontroller, segue

我将 splitViewController 用于 iPad 程序。在作为 tableviewController 的主视图中，将显示照片名称列表。当您单击其中一张照片名称时，该照片将显示在详细视图中。

现在的问题是，当您第一次单击照片时，照片将正确显示；但是当你第二次在表格中选择一张照片时，程序就会崩溃！

> **我的代码**
> 
> 在情节提要中，我构建了一个从主视图控制器到详细视图控制器的替换序列。在主视图控制器的 tableView:didSelectRowAtIndexPath: 中，我写： **[self performSegueWithIdentifier:@"Photo Show" sender:self];**
> 
> 在 prepareForSegue:sender: 中，我写： **[segue.destinationViewController setCurrentPhotoInfo:self.currentPhoto];**
> 
> 在 detailViewController 中，我在 setCurrentPhotoInfo 中编写代码如下：

```
self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, image.size.width, image.size.height)];
[self.imageView setImage: image];
self.scrollView.contentSize = self.view.bounds.size;
self.scrollView.delegate = self;
[self.scrollView addSubview:self.imageView];
[self.view addSubview:self.scrollView]; 
```

> **崩溃信息**

当程序崩溃时，我在 [self performSegueWithIdentifier:@"Photo Show" sender:self]; 崩溃信息是： **[PhotoShowViewController respondsToSelector:]：消息发送到已释放实例 0x6c9eae0。**

为了调试问题，我在prepareForSegue中编写代码来观察目标视图控制器地址：

```
id last = [self.splitViewController.viewControllers lastObject];
id destination = segue.destinationViewController; 
```

令我惊讶的是，**最后一个**与**目的地**不同！我认为他们应该是一样的。更惊喜的是，当你完成第一个segue并点击照片表进入第二个segue时，你会发现last和destination都变了：destination换了一个新的地址，last等于**旧的destination**！

崩溃地址“0x6c9eae0”只是**旧的最后一个**地址。

为什么会这样？我很困惑。

# python - 如何使用带有 TR_HAS_VARIABLE_ROW_HEIGHT 样式的 CustomTreeCtrl 来更改项目高度？

> ID：11460864
> 
> 赞同：0
> 
> 时间：2012-07-12T21:20:27.727
> 
> 标签：python, wxpython, wxwidgets

我给了我的 CustomTreeCtrl TR_HAS_VARIABLE_ROW_HEIGHT 样式。但我不确定从那里去哪里改变树内项目的高度。

我真的无法在 API 或在线上找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:32:46.593

我认为您所要做的就是更改项目的字体大小。无论如何，这就是 wxPython 演示中的样子。不过，您可以询问 wxPython 用户组。该小部件的作者大部分时间都在那里，非常有帮助。

# javascript - 从树遍历构建布尔表达式的算法

> ID：11460867
> 
> 赞同：1
> 
> 时间：2012-07-12T21:20:35.800
> 
> 标签：javascript, jquery, algorithm, binary-tree, boolean-expression

我和 html 是这样的：

```
<div id="tree">
    <div id="AND" class="node">
        <div id="OR" class="node">
            <div id="a" class="node"></div>
            <div id="b" class="node"></div>
        </div>
        <div id="OR" class="node">
             <div id="c" class="node"></div>
             <div id="d" class="node"></div>
        </div>
    </div>
</div> 
```

我使用 jquery 来获取这样的节点：

```
$(".node") 
```

我使用 for 形成这样的数组：

```
var expresion = ["AND","OR","a", "b", "OR", "c", "d"]; 
```

我想构建类似的东西：

```
a OR b AND c OR d 
```

有谁知道构建布尔表达式的算法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:28:52.083

尝试遍历数组的前缀：您将能够构造您想要的表达式。这对程序员来说是一个简单的过程，它将作为练习留下。我会帮忙：阅读[Tree Traversal](http://en.wikipedia.org/wiki/Tree_traversal)。基本上，访问数组的顺序将产生您想要的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T23:48:41.677

理想情况下，您应该自己按顺序遍历节点。参见：[http ://en.wikipedia.org/wiki/In-order_traversal#Inorder_Traversal](http://en.wikipedia.org/wiki/In-order_traversal#Inorder_Traversal)

* * *

但是，此功能应该为您提供您正在寻找的确切功能：

```
function convertPreOrderArrayToInOrderString(elements)
{
    var cursor = 0;
    // While all the elements aren't merged together
    while (elements.length > 1)
    {
        // Skip to the nextleaf
        while (elements[cursor] === "AND" || elements[cursor] === "OR") cursor++;

        // If we made all the matches we can at this depth, go to the next one
        if (typeof elements[cursor+1] === "undefined") 
        {
            cursor = 0;
            continue;
        }

        // The relevant pieces to combining
        var previous = elements[cursor-1];
        var current = elements[cursor];
        var next = elements[cursor+1];

        // Create a string from the pieces
        var tmpStr = current + " " + previous;

        // How many we've combined
        var combined = 2;

        // If the third piece is complete, we can join it too
        if (next !== "AND" && next != "OR")
        {
            // Tack the third piece on
            tmpStr += " " + next;
            combined++;
        }

        // Remove the individual elements and replace with the combined ones
        var newElements = elements.slice(0, cursor-1);
        newElements.push(tmpStr);
        newElements = newElements.concat(elements.slice(cursor - 1 + combined));

        // From now on, opreate on the new array with combined elements
        elements = newElements;
    }

    // There should be one element left
    return elements[0];
}

var expression = ["AND","OR","AND","a","f","OR","e","b","OR","c","d"];
console.log(convertPreOrderArrayToInOrderString(expression));
// Gives: "a AND f OR e OR b AND c OR d" 
```

对应的小提琴：http: [//jsfiddle.net/DvZj4/4/](http://jsfiddle.net/DvZj4/4/)

不过，在更一般的情况下，您可能更喜欢这样做：

```
function convertPreOrderToInOrder(elements)
{
    // Very simple sanity checks
    if (elements.length === 1 && (elements[0] === "AND" || elements[0] === "OR"))
    {
        console.error("Cannot construct compound expression with boolean connectors without values");
        return;
    }
    else if (elements.length === 1)
    {
        // Only 1 items, just return it
        return elements[0];
    }
    else if (elements.length > 1 && elements[0] !== "AND" && elements[0] !== "OR")
    {
        console.error("Cannot construct compound expression  without boolean connectors");
        return;
    }

    // Convert back to a tree from the preorder, then flatten again in order
    return flattenTreeInOrder(getTreeFromPreOrderArray(elements));
}

// Reconstructs a tree from a pre-ordered array of elements
// Assumes your array of elements can construct a properly
// balanced tree. If it can't, this will get screwy
function getTreeFromPreOrderArray(elements)
{
    var i, el, root = {}, current = root;
    // Iterate over every element
    for (i in elements)
    {
        el = elements[i];
        // Pretty much just a root check
        if ( (el === "AND" || el === "OR") && !current.connector)
        {
            // Make this a root
            current.connector = el;
        }
        // Not a root, can we go left?
        else if (!current.left)
        {
            // Branch left
            if (el === "AND" || el === "OR")
            {
                current.left = {connector: el};
                current.left.parent = current;
                current = current.left;
            }
            // Left left
            else
            {
                current.left = el;
                current.left.parent = current;
            }
        }
        // Not a root, can't go left. Try to the right.
        else
        {
            // Branch right
            if (el === "AND" || el === "OR")
            {
                current.right = {connector: el};
                current.right.parent = current;
                current = current.right;
            }
            // Leaf Right
            else
            {
                current.right = el;
                current.right.parent = current;
                // Tricky bit: If we put a leaf on the right, we need
                // to go back up to the nearest parent who doesn't have
                // right child;
                while (current.parent && current.right)
                {
                    current = current.parent;
                }
            }
        }
    }
    return root;
}

// Flatten a tree into an array using in-order traversal
// No recursion, uses stack-based traversal
// Returns an array of strings
function flattenTreeInOrder(root)
{
    var stack = [];
    var flat = [];
    var current = root;
    // We need to keep going as long as there's either something in the
    // stack, or we're looking at a node.
    while (stack.length > 0 || current)
    {
        // If the looked at node is defined
        // This will help us tell if we've gone past a leaf
        if (current)
        {
            // Don't care during in order traversal. Just push this on
            // and move to the left
            stack.push(current);
            current = current.left;
        } 
        else
        {
            // Starting to go back up, but the current is undefined
            // So, pop first, then start capturing in order elements
            current = stack.pop();
            flat.push(current.connector || current);
            current = current.right;
        }
    }

    return flat;
}

var expression = ["AND","OR","AND","a","f","OR","e","b","OR","c","d"];
console.log(convertPreOrderToInOrder(expression).join(" "));
// Gives: "a AND f OR e OR b AND c OR d" 
```

​ 对应小提琴：http: [//jsfiddle.net/keR5j/](http://jsfiddle.net/keR5j/)

* * *

### 不能复制 html`id`元素

此外，您不能像在结构中那样使用 id。有多个相同的实例`id`，即每个规范的两个节点`id="OR"`是无效的 HTML：http: [//www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

> **`id =` *[名称](http://www.w3.org/TR/html401/types.html#type-name)* [[CS]](http://www.w3.org/TR/html401/types.html#case-sensitive)**
> 
> > 此属性为元素分配名称。此名称在文档中必须是唯一的。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T17:49:39.763

```
function travarse(node){
    var result = [];
    var op = node.children("#AND,#OR");
    var len = op.length;
    var term;
    if(len){
      term = op.children(".node");
      result=result.concat(travarse($(term.get(0))));
      result.push(op.get(0).id);
      result=result.concat(travarse($(term.get(1))));
    } else {
      term = node.children(".node");
      result.push(term.get(0).id);
      result.push(node.get(0).id);
      result.push(term.get(1).id);
    }
    return result;
}

//var expresion = $.map($.makeArray($(".node")), function(el){ return el.id; });//["AND", "OR", "a", "b", "OR", "c", "d"]
var expression = travarse($('#tree'));//["a", "OR", "b", "AND", "c", "OR", "d"] 
```

# three.js - 当灯光位于物体的中心时，如何使用 PointLight 或其他灯光来 360 度照射？

> ID：11460873
> 
> 赞同：0
> 
> 时间：2012-07-12T21:21:02.613
> 
> 标签：three.js

我知道如果将 PointLight 放置在对象的中心，它将无法工作，但这正是我需要做的，除非有其他方法。基本上我有一个太阳系（我知道原来的），太阳在 0,0,0。我需要将光线指向 0,0,0，以便物体旋转并围绕太阳运行，光线会相应地发光。据我了解，定向光是一种单向光，点光是 360 度。任何想法我可以如何完成我正在尝试做的事情......这是我的代码：[http](http://www.benmarshall.me/projects/playground/072012/solar-system.html) ://www.benmarshall.me/projects/playground/072012/solar-system.html （它有时可能会因为我目前正在使用它，但我尽量不要让它坏了很长时间，所以人们可以看到它）

# c++ - VC++ LNK2019 错误我似乎无法修复

> ID：11460878
> 
> 赞同：1
> 
> 时间：2012-07-12T21:21:49.247
> 
> 标签：c++, visual-studio-2010, visual-c++, linker-errors, unresolved-external

所以我正在写，作为一个小项目，压力测试。最初，为了节省时间，我只是将代码放在头文件中。我决定稍微整理一下，将所有内容移到一个 .cpp 文件中，然后编写头文件，但是 VS2010 向我提供了一个我似乎无法修复的 LNK2019。

**FSTRESS.cpp**（不包括代码，因为我怀疑它是否相关；询问您是否需要它） ![FSTRESS.cpp](../Images/70f6a17f964d60ae8693ea6bca8246b6.png)

**FSTRESS.h** ![FSTRESS.h](../Images/f447e95934b5d44013cefe02cce3c570.png)

**主文件** ![主文件](../Images/2ddb37ddff655596d6dd8fe0185aa076.png)

错误：

```
 error LNK2019: unresolved external symbol "public: static void __cdecl FSTRESS::Start(unsigned int,unsigned int,unsigned int)" (?Start@FSTRESS@@SAXIII@Z) referenced in function _main  C:\Programming\C++\FLOPS_Test\FSTRESS\FSTRESS\main.obj  FSTRESS_Mk.II 
```

关于为什么会发生这种情况的任何想法？我有点 C++ 菜鸟。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:30:47.990

您的*.cpp*文件未定义与您在*.h*中声明的类相同的类，而是创建与标头中声明的类同名的不同类。正确的方法是：

头文件：

```
class Foo
{
  void Bar();
}; 
```

实现文件：

```
void Foo::Bar()
{
  // Do something
} 
```

*或者，您可以在头*文件本身中内联声明函数

```
class Foo
{
  void Bar()
  {
    // Do something
  }
}; 
```

在后一种情况下，无需创建单独的实现文件。事实上，这正是您在*fstress.cpp*中所做的，但是您在 fstress.h 中提供了一个重复的声明，*而*没有在任何地方实际定义该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:31:37.880

因此，您实际上有两个单独的`x86`和`FSTRESS`类定义，一个在头文件中，一个在`.cpp`文件中。只要定义相同，您就可以这样做，但它们不是——`.cpp`文件中的那个有一堆内联代码，而头文件中的那个中没有。（查找“一个定义规则”以获取有关此的更多信息。）

你真正想做的是这个。您的头文件很好（或者，至少，我没有看到任何明显的错误）。该`.cpp`文件应该 (1)`#include`头文件，然后 (2) 为成员函数提供定义，如下所示：

```
static void FSTRESS::Start(unsigned aMode, unsigned aTest, unsigned aThreads) {
  // code goes here
} 
```

（当你有一个源文件和一个相应的头文件时，源文件应该始终`#include`是头文件。这有助于确保如果存在不一致，它会在编译时被整齐地捕获。我不知道你是否已经在做那是因为顶部`FSTRESS.cpp`在您的屏幕截图中是不可见的。将代码发布为文本可能会更好:-)。）

顺便说一句，不要使用以下划线开头的名称。这些名称的很大一部分空间是“保留的”，这意味着 C++ 实现可以在内部使用它们，如果您的使用与它的使用冲突，就会发生坏事。最好避免所有这些，因为这样您就不必记住确切的规则是什么，其他人也不会阅读您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:32:19.183

您不能只将带有内联代码的类声明的内容从头文件粘贴到 .cpp 文件中并期望它能够工作。当你将它与类声明分开时，它的实现`FSTRESS::Start()`需要看起来像下面这样：

```
void FSTRESS::Start(unsigned _aMode, unsigned _aTest, unsigned _aThreads)
{
    //...
} 
```

此外，您应该`#include "FSTRESS.h"`在 FSTRESS.cpp 文件中准确地声明每个人都使用的类（包括 FSTRESS.cpp 中的实现位）。

# oracle - 将 Oracle 输出解析为特定格式

> ID：11460881
> 
> 赞同：1
> 
> 时间：2012-07-12T21:22:04.450
> 
> 标签：oracle, parsing

我在数据库中有 cust_nm 列。cust_nm 列用姓氏格式化，然后名字用逗号分隔，后面跟一个空格，而不是中间的首字母。

东格斯维克，马克 M

我想运行一个 Oracle 查询来输出这种格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:30:36.503

如果你所有的名字都真的是那个确切的格式，你可以做这样的事情

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 'TUNGESVIK, MARK M' cust_nm from dual
  3  )
  4  select substr( cust_nm, 1, instr(cust_nm, ', ')-1 ) last_name,
  5         substr( cust_nm, instr(cust_nm, ', ')+2, instr(cust_nm, ' ', -1) - instr(cust_nm, ', ')-2) first_name,
  6         substr( cust_nm, instr(cust_nm, ' ', -1)+1, length(cust_nm) ) middle_initial
  7*   from x
SQL> /

LAST_NAME FIRS M
--------- ---- -
TUNGESVIK MARK M 
```

当你开始包括没有中间名首字母（或有多个中间名首字母）的人、姓或名中有多个空格的人时，至少有一些名字不是这种格式而是其他格式的概率，事情变得更具挑战性。有些软件产品的唯一目的是获取传入的名称数据，对其进行解析、清理和标准化。编写自己的代码来尝试处理每个极端情况可能需要比您预期的更多的时间。

# android - Android SDK：列表片段单击上一个列表片段上的行

> ID：11460887
> 
> 赞同：1
> 
> 时间：2012-07-12T21:22:49.263
> 
> 标签：android, android-listview, android-fragments, android-listfragment

除了我使用列表片段之外，我的问题与这个问题完全相同：

[单击片段会调用其背后的活动](https://stackoverflow.com/questions/9190855/clicking-on-the-fragment-invokes-activity-behind-it)

我认为使用 List Fragments 可以解决问题，但它仍然会调用当前视图背后的活动。

你如何解决这个问题？谢谢！

# android - 返回到 MainActivity 的按钮

> ID：11460896
> 
> 赞同：23
> 
> 时间：2012-07-12T21:23:22.017
> 
> 标签：android, eclipse, android-activity, android-button

我想创建一个按钮，引导用户直接回到没有 android name="com.example.example" 的主要活动。
它有 android.intent.etc...
我如何引用我的按钮以返回此活动？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-12T21:32:07.387

假设您的主要活动称为 Main.java。

```
btnBack.setOnClickListener(new OnClickListener(){

  private void onClick(){
    Intent intent = new Intent(currentActivity.this, Main.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);   
    startActivity(intent);
  }
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-12T21:31:29.837

采用 `startActivity(intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-12T21:32:01.250

有时您可以只调用`activity.finish()`结束当前活动，因此会弹出主（第一个创建的）活动。

如果这不是您的情况，请执行以下操作：

```
Intent intent = new Intent(getApplicationContext(), Main.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)             
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-12T21:30:30.890

```
Intent intent = new Intent(this, Main.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T21:29:32.887

好吧，无论您在哪里，只需在按钮 onClick 方法中使用所需参数调用 startActivity() 即可。就是这样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-06T18:28:18.297

```
public void onBackPressed(){
    finish();
} 
```

# unix - Darwin OS 打折了，但还能找到原始源代码吗？

> ID：11460898
> 
> 赞同：2
> 
> 时间：2012-07-12T21:23:47.187
> 
> 标签：unix, operating-system

我已经在谷歌周围搜索了苹果发布的最后一个版本的达尔文操作系统的原始来源。我发现的是基于达尔文源代码的不同操作系统，例如 GNU Darwin 和 pureDarwin。有什么地方可以分叉原始的达尔文源代码，还是干脆灭绝了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:36:54.880

检查[Apple 的开源网站](http://www.opensource.apple.com/)。最新的 (10.7.4) 内核是[xnu-1699.26.8](http://www.opensource.apple.com/source/xnu/xnu-1699.26.8/)，10.7.4 的其他[源包](http://www.opensource.apple.com/release/mac-os-x-1074/)也可用。请记住，并非 Mac OS X 的所有部分都是开源的。您将无法通过源代码构建完整的系统。

Apple在其开发人员库中提供了有关[如何构建和调试内核的信息。](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KernelProgramming/build/build.html)除了 devolper 库，您还可以找到这本书*[Mac OS X Internals](http://flylib.com/books/en/3.126.1.1/1/)。一种系统方法。*由阿米特辛格有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T14:11:34.533

源代码确实存在，并且如果您知道如何组装可以（部分）运行 OS X 程序的开源基于 Darwin 的操作系统。但是，由于 Apple 并未提供运行操作系统所需的所有资源，您可能需要寻找开源替代品，包括：

*   **X Window System**替换 WindowManager，因为生成的系统将只是另一个普通的 UNIX 系统，使用 GUI 将需要它。
*   **GNUstep**作为 Cocoa 和 CoreFoundation 的替代实现。GNUstep 在 Cocoa 出现之前跟随 Cocoa 的发展——它始于乔布斯先生的 NeXT 时代。
*   **WindowMaker**作为替代 Dock，**GWorkspace**作为替代 Finder。这将使最终系统的外观和感觉与乔布斯先生的 NeXT 在它成为 OS X 之前的外观和感觉相似。
*   **ProjectCenter**和**Gorm作为****Xcode**和**Interface Builder**的替代品。这些是将在该平台上大量使用的开发工具。

并且已知某些 OS X 应用程序能够在重新编译或简单复制后进行移植（基本上是任何不依赖于 Core* 技术或 CoreFoundation 的应用程序，它们在 GNUstep 中缺失/不完整）：

*   **TextEdit**（来自 OS X 10.6 或更早版本） GNUstep 用于发布从 NeXT 移植的 TextEdit 版本。随着最近库的发展，可以使用 10.6 的版本。

# asp.net - 如何为每个用户使用唯一变量通过 Asp.Net 中的页面传递值

> ID：11460900
> 
> 赞同：-1
> 
> 时间：2012-07-12T21:23:48.053
> 
> 标签：asp.net, variables

我想通过页面传递一个值，所以我尝试使用 Application 变量。但问题是变量对于每个用户来说并不是唯一的，因此价值会受到损害。

会话变量用于创建会话，它工作得很好。我不想创建会话...我想通过每个会话传递另一个值，并且该值会因用户而异。

**在这里，我为每个登录的教师创建会话。根据每个教师，他的学校名称被识别并将其转移到教师欢迎页面。**

```
if (pass == txtFacPass.Text && schoolName == listFacSch.SelectedItem.ToString())
            {
                Session["fac"] = txtFacUser.Text;
                Application["sname"] = listFacSch.SelectedItem.ToString();
                Response.Redirect("faculty.aspx", false);
            } 
```

请尽快帮助我解决问题。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:03:15.273

如果我理解正确，您希望将两个值传递给`faculty.aspx`用户名和学校名称。

您已经通过会话传递了用户名：

```
Session["fac"] = txtFacUser.Text; 
```

要传递另一个值，只需使用不同的键存储它：

```
Session["sname"] = listFacSch.SelectedItem.ToString(); 
```

这**不会**导致创建另一个会话。在为用户创建的一个会话中，这两个值都将在另一个页面中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:58:33.747

应用程序变量适用于每个应用程序，而不是每个用户。所以你每次都只是重置一个值。

如果我了解您要做什么，为什么不只使用 URI 参数，

```
Response.Redirect("faculty.aspx?sname=" + listFacSch.SelectedItem.ToString() , false); 
```

然后处理教师页面上的查询字符串参数（假设您为不同的学校显示不同的内容）

# winforms - 如何在 Windows 窗体应用程序中隐藏连接字符串

> ID：11460903
> 
> 赞同：2
> 
> 时间：2012-07-12T21:24:00.970
> 
> 标签：winforms

正如你们所知，exe文件中的硬编码编码可以通过一些软件（例如代码反射器）很容易地看到，我想知道如何隐藏我的连接字符串，其中包含sql server用户名和密码信息以连接到windows中的数据库表单应用程序不会被任何代码反射器看到，因此除了我之外的任何其他人可能在未经我许可的情况下永远无法使用我的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:42:39.950

正如所评论的，您最好使用集成安全性，但是如果您的目标是使用混合模式身份验证的 SQL Server，您可以使用数据保护 API 来加密 app.config 中的连接字符串。这是一篇关于该主题的精彩文章：

> 保护应用程序机密，例如数据库连接字符串和密码，需要仔细考虑许多相关因素，例如数据的敏感程度、谁可以访问它、如何平衡安全性、性能和可维护性等等。本文介绍了数据保护的基础知识，并比较了可用于保护应用程序设置的各种技术。作者讨论了要避免什么，例如在源代码中隐藏密钥和使用本地安全机构。此外，他还介绍了一些有效的解决方案，例如数据保护 API。

[保护代码中的数据库连接字符串和其他敏感设置](http://msdn.microsoft.com/en-us/magazine/cc164054.aspx)

[如何：使用 DPAPI 加密和解密数据 (C#/VB.NET)](http://www.obviex.com/samples/dpapi.aspx)

# javascript - 在提交时使用字段值填充另一个复选框。

> ID：11460905
> 
> 赞同：0
> 
> 时间：2012-07-12T21:24:07.887
> 
> 标签：javascript

我将如何编写一个在提交时检查两个字段是否为空白的 javascipt，如果它们不是空白，那么它会自动将另一个字段设置为“TRUE”？例子：

发票表——CustomerID、InvoiceID、Check、Cash#、Paid

我希望该函数检查 Cash 或 Check# 中是否有任何值，然后选中 Paid 复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:40:11.947

```
<input type=submit onclick='var a=document.getElementById("cash"); if(a && a.value != ""){document.getElementById("paid").selected = true;}; return true;'> 
```

可能需要对此进行一些语法检查。

# jsp - 如何使用 在jsp文件中。eclipse 说是未知标签

> ID：11460906
> 
> 赞同：12
> 
> 时间：2012-07-12T21:24:09.560
> 
> 标签：jsp, jstl, jsp-tags, jspinclude

我想在 .jsp 文件中编写一个简单的网页。我需要使用`<c:if>`标签。但它不被认可。eclipse 说它是未知标签。

我用谷歌搜索了它，有人说我需要包含标准库（这是 JSTL？）。

我只想在 jsp 文件中使用一些基本标签，例如`<c:if>`. 我真的需要包含任何库吗？如果是这样，我需要包含哪些库？以及如何在 Eclipse 中做到这一点？请让我逐步了解如何导入/包含这些库或构建路径，以便我可以`<c:if>`在我的 jsp 文件中使用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T21:29:40.287

确保您的 JSP 文件中有一个 taglib 声明

```
<%@ taglib
    prefix="c"
    uri="http://java.sun.com/jsp/jstl/core" 
%> 
```

此外，请确保您已将 JSTL jar 文件添加到项目类路径中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T21:27:42.677

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>

<HTML>
 <HEAD><TITLE>JSTL 'if' tag</TITLE></HEAD>
 <BODY>
  <c:if test="true">Hello world!</c:if>
 </BODY>
</HTML> 
```

来源：[http ://www.java2s.com/Code/Java/JSTL/JSTLiftag.htm](http://www.java2s.com/Code/Java/JSTL/JSTLiftag.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-02T13:07:42.760

您需要查看此链接[JSTL 标记库](https://stackoverflow.com/tags/jstl/info)以选择正确的库版本及其标头：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

或者

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T12:04:21.133

添加这个标签..

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

并将这两个 jar 文件复制到您的项目文件夹 web-inf->lib 中

javax.servlet.jsp.jstl-1.2.1.jar javax.servlet.jsp.jstl-api-1.2.1.jar

# csv - 批处理文件以在文件夹中查找最新文件，然后将其复制并重命名为另一个文件夹

> ID：11460911
> 
> 赞同：0
> 
> 时间：2012-07-12T21:24:18.027
> 
> 标签：csv, batch-file, copy, directory

在这里发现了同样的问题。我正在尝试使用代码，但我的数据。我绝不是程序员。我可以接受几乎任何代码并让它为我工作。

[如何编写批处理文件来复制和重命名最近日期的文件？](https://stackoverflow.com/questions/3063487/how-to-code-a-batch-file-to-copy-and-rename-the-most-recently-dated-file?answertab=oldest#tab-top)

这是我的

```
 @echo on
 setLocal DisableDelayedExpansion
 pushd  N:\
 setLocal EnableDelayedExpansion

 for /f "tokens=* delims= " %%G in ('dir/b/od') do (set newest=%%G)

 copy %newest% G:\Server_Files\AMI_DATA\TEXT_FILES\NewFile.csv

 PAUSE
 POPD 
```

**而结果...**

```
C:\Documents and Settings\belcherj\Desktop\AMI_BATCH>setLocal DisableDelayedExpa
nsion

C:\Documents and Settings\belcherj\Desktop\AMI_BATCH>pushd  N:\

N:\>setLocal EnableDelayedExpansion

N:\>for /F "tokens=* delims= " %G in ('dir/b/od') do (set newest=%G )

N:\>(set newest=System Blink Count__2012-06-27 01_00_46.csv )

N:\>(set newest=System Blink Count__2012-06-28 01_00_32.csv )

N:\>(set newest=System Blink Count__2012-06-29 01_00_33.csv )

N:\>(set newest=System Blink Count__2012-06-30 01_00_42.csv )

N:\>(set newest=System Blink Count__2012-07-01 01_00_32.csv )

N:\>(set newest=System Blink Count__2012-07-02 01_00_31.csv )

N:\>(set newest=System Blink Count__2012-07-03 01_00_29.csv )

N:\>(set newest=System Blink Count__2012-07-04 01_00_39.csv )

N:\>(set newest=System Blink Count__2012-07-05 01_00_34.csv )

N:\>(set newest=System Blink Count__2012-07-06 01_00_31.csv )

N:\>(set newest=System Blink Count__2012-07-07 01_00_32.csv )

N:\>(set newest=System Blink Count__2012-07-08 01_00_30.csv )

N:\>(set newest=System Blink Count__2012-07-09 01_00_40.csv )

N:\>(set newest=System Blink Count__2012-07-10 01_00_29.csv )

N:\>(set newest=System Blink Count__2012-07-11 01_00_44.csv )

N:\>(set newest=System Blink Count__2012-07-12 01_00_34.csv )

N:\>copy System Blink Count__2012-07-12 01_00_34.csv G:\Server_Files\AMI_DATA\TE
XT_FILES\NewFile.csv
The system cannot find the file specified.

N:\>PAUSE
Press any key to continue . . . 
```

我认为这与文件名中的空格有关。我尝试了一些我发现的其他代码，它给出了相同的结果。我很近，只需要一点推动。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T15:18:09.197

This should work

```
@echo off
cd /d N:\
for /f "tokens=*" %%a in ('dir /b /od') do set newest=%%a
echo f| xcopy "%newest%" G:\Server_Files\AMI_DATA\TEXT_FILES\NewFile.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:58:34.980

你是对的，你的直接问题是文件名中的空格。您可以通过添加引号来解决该问题：`copy "%newest%" "G:\Server_Files\AMI_DATA\TEXT_FILES\NewFile.csv"`

But there are other problems. The FOR options should be "eol=: delims=". Your existing options will will fail if file name begins with space or semicolon.

Your code can also fail if a filename contains an exclamation point because you have delayed epansion enabled when you use the FOR %%G variable. You enable delayed expansion, yet you don't use it.

Your code can also fail if the last "file" listed happens to be a directory instead of a file. You want the `DIR /A-D` option to filter out directory names.

*Oops! my original posted code did not work because the PUSHD had been removed and DIR /B does not include path info in the output.*

Here is a solution that avoids the potential problems and also adds some additional error checking:

```
@echo on
setlocal disableDelayedExpansion
set "quit=pause & exit /b"
pushd N:\ || %quit%
set "newest="
for /f "eol=: delims=" %%F in ('dir /b /od /a-d') do set "newest=%%F"
if defined newest copy "%newest%" G:\Server_Files\AMI_DATA\TEXT_FILES\NewFile.csv
%quit% 
```

Disabling delayed expansion is probably not necessary since it is the default state on most installations. But it can't hurt.

Since SETLOCAL is used, any changes to the environment will be lost once the script ends. (There is an implicit ENDLOCAL once the script ends). The ENDLOCAL (implicit or explicit) also undoes the results of PUSHD, which is why POPD is not required.

I defined a quit "macro" to make it convenient to always exit the script with the same two commands: PAUSE followed by EXIT /B. The EXIT /B is not needed at the very end of the script, but it doesn't hurt.

The script can be made a bit more efficient by listing the files in descending chronological order and using GOTO to break out of the loop after the 1st file.

```
@echo on
setlocal disableDelayedExpansion
set "quit=pause & exit /b"
pushd N:\ || %quit%
set "newest="
for /f "eol=: delims=" %%F in ('dir /b /o-d /a-d') do set "newest=%%F" & goto :break
:break
if defined newest copy "%newest%" G:\Server_Files\AMI_DATA\TEXT_FILES\NewFile.csv
%quit% 
```

or the file can be copied within the loop without defining an environment variable, at which point the script can end immediately:

```
@echo on
setlocal disableDelayedExpansion
set "quit=pause & exit /b"
pushd N:\ || %quit%
for /f "eol=: delims=" %%F in ('dir /b /o-d /a-d') do (
  copy "%%F" G:\Server_Files\AMI_DATA\TEXT_FILES\NewFile.csv
  %quit%
)
%quit% 
```

# css - 我应该如何使用 ASP.NET MVC 4 进行布局管理？

> ID：11460912
> 
> 赞同：4
> 
> 时间：2012-07-12T21:24:19.023
> 
> 标签：css, asp.net-mvc, asp.net-mvc-4

我刚刚使用 ASP.NET MVC 4 开始一个项目，我想知道我应该如何处理布局管理？首先，我对 Web 布局管理不是很有经验，但我知道[Blueprint](http://blueprintcss.org)是一种流行的选择，而且在 Rails 世界中，[Susy](http://susy.oddbird.net/)将是一个不错的选择。我应该只使用蓝图吗？关于与 MVC 4 的集成，我有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:40:53.053

好吧，作为您自己提到的（蓝图）的替代方案，我强烈推荐**来自 Twitter**（[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)）的 Bootstrap。我自己一直在使用 ASP.NET MVC 3 和 ASP.NET Web 表单的项目中使用它。

**来自 Twitter 的 Bootstrap**是开源的，您可以在 Internet 上找到很多信息（即您可能遇到的许多问题已经解决，只需 Google 即可）。**来自 Twitter 的 Bootstrap** “支持”许多浏览器（计算机、智能手机等）、大/小屏幕、jQuery ......

# javascript - JavaScript 版本与 ECMAScript 版本有何关联？

> ID：11460913
> 
> 赞同：8
> 
> 时间：2012-07-12T21:24:25.043
> 
> 标签：javascript, version, mozilla, ecmascript-5

例如，[[].map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)是“在 JavaScript 1.6 中实现的”。那是 ES5 方法吗？1.6 与[ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)版本有何关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:32:17.100

Mozilla 使用的版本号和 ECMAScript 标准的版本号之间并没有真正严格的对应关系。[Wikipedia 上](http://en.wikipedia.org/wiki/ECMAScript#Version_correspondence)有一个表格，您可能正在寻找它——您会看到 JavaScript 1.6 对应于 ECMAScript 3，然后是一些额外的扩展。`[].map`具体是在 ECMAScript 5 中标准化的，但据我了解，该功能是在 ECMAScript 5 标准发布之前由 Firefox 首次引入的。（包含 JavaScript 1.6 的 Firefox 1.5 于 2005 年 11 月 29 日发布，该标准似乎已于 2009 年 9 月发布。）

# xml - 持有通配符 *（任意）的 xQuery 变量

> ID：11460914
> 
> 赞同：1
> 
> 时间：2012-07-12T21:24:25.637
> 
> 标签：xml, xpath, xquery, wildcard

我想为函数参数化 XPATH 过滤器，但希望有机会表明我想要所有结果。清晰的例子

```
declare function search-by-author($author as xs:string*) as element()*{
   /Data/Books[@autor=$author]
};

search-by-author(()) -> If null no results even if some books did not have @autor attr
search-by-author('') -> If empty, only shows those books with @author=''
search-by-author(('a','b')) -> Returns books by authors 'a' or 'b'
search-by-author(*) -> THIS MY CURRENT PROBLEM. 
```

我怎么能效仿这个？是否有任何特殊的参数或语法可以将 * 作为变量传递，所以我可以这样做

```
 $var = * --> /Data/Books[@autor=$var] 
```

或者

```
 $var = EMPTY --> /Data/Books[@autor=$var] --> /Data/Books[@autor] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:07:09.413

和

```
declare function search-by-author($author as xs:string*) as element()*{
   /Data/Books[$author='*' or @autor=$author]
}; 
```

你可以做

```
search-by-author('*') 
```

# javascript - 对表单值求和时的 HTMLInputElement

> ID：11460918
> 
> 赞同：0
> 
> 时间：2012-07-12T21:24:34.967
> 
> 标签：javascript, html, arrays

我正在尝试获取表单字段的总和值，但我是 `[object HTMLInputElement]2552`.. 数字是表单字段值（未求和）。这里有什么问题？

```
function update() {
     var sum = 0;
      $("#formaa div.row").each(function(i,o){
        total = parseInt($(o).find(".ki").val(), 10) * parseInt($(o).find(".ka").val(), 10);
             if(!isNaN(total) && total.length!=0) {
                     $(o).find("[name=suma]").val(total);
                    suma += total;
                }
      });
      $("#suma").val(suma);
    } 
```

# objective-c - NSString 比较

> ID：11460919
> 
> 赞同：0
> 
> 时间：2012-07-12T21:24:42.407
> 
> 标签：objective-c, nsstring, word

我正在寻找一种算法，我可以在其中比较两个字符串并读出失败者。

我知道比较两个字符串的正常代码，但这还不够。

例子：

```
NSString *userinput = @"xaplseiPhonr";// (Input from the user)
NSString *correct =@"apple iphone"; 
```

在下一步中，我将检查此字符串并列出此示例的失败者：x,l,s, ,r = 5 个失败者

我测试了很多东西，用两个 for 循环将两个字符串保存在一个数组中并进行了比较，但有些地方出了问题，最难的是这个词是否有 2 个相同的字母。或者，如果您没有动态索引搜索，那么“l”之后的整个字母或用户输入中缺少的空格是否为假，依此类推。

所以，如果有人对我有很好的代码，那就太好了

* * *

编辑：要比较的代码，但是如果您错过了一个字母或空格，这将不起作用。

```
for (int i = 0; i < [originalWordLetters count]; i++) 
{
    NSString *originalLetter = [originalWordLetters objectAtIndex:i];

    //NSLog(@"%i: %@", d, originalLetter);
    BOOL letterFound = FALSE;

    while (letterFound == FALSE && d < [userWordLetters count]) 
    {
        if ([originalLetter caseInsensitiveCompare:[userWordLetters objectAtIndex:d]] == NSOrderedSame) 
        {
            //NSLog(@"letter %i correct", d+1);
            letterFound = TRUE;
        }
        else
        {
            //NSLog(@"letter %i false", d+1);
            failedLetters++;
        }
        d++;
    }
} 
```

我有一个工作算法，您可以在其中比较两个字符串。并提出错误

我已将示例项目上传到 GitHub： [NSString compareTwoStrings: algorithm output the errors](https://github.com/SomethingIsGrazy/StringCompare)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:41:04.867

您要做的是计算两个字符串之间的[Damerau-Levenshtein 距离。](https://github.com/JanX2/NSString-DamerauLevenshtein)这是一个开源实现`NSString`：[GitHub JanX2/NSString-DamerauLevenshtein](https://github.com/JanX2/NSString-DamerauLevenshtein)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:35:29.507

您可以使用它`NSScanner`来执行此操作。

# php - 在多维数组中添加循环

> ID：11460921
> 
> 赞同：0
> 
> 时间：2012-07-12T21:24:45.077
> 
> 标签：php, loops

我面临一个问题有人可以建议我吗

```
for ($i = 1; $i <= 2; $i++) {
  $r2 = 0;
  for ($t = 1; $t <= 2; $t++) {
    echo $r2;
    $r2++
  }
} 
```

输出是`0101`；

我可以得到输出`0123`？？？请

如果

```
for ($i = 1; $i <= 3; $i++) {
  $r2 = 0;
  for ($t = 1; $t <= 3; $t++) {
    echo $r2;
    $r2++
  }
} 
```

输出是`010101`；

可以输出`012345678`？？？请

而如果

```
 for ($i = 1; $i <= 4; $i++) {
   $r2 = 0;
   for ($t = 1; $t <= 4; $t++) {
     echo $r2;
     $r2++
   }
 } 
```

输出是`01010101`；

可以输出`0123456789101112131415`？？？请我想你明白

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:32:36.937

在所有这些情况下，您都在初始化 $r2=0; 在内循环中。它应该在循环之外。

```
$r2=0;
for($i=1;$i<=2;$i++){
  for($t=1;$t<=2;$t++){
    echo $r2;
    $r2++
  }
} 
```

这将产生“1234”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:29:45.197

为什么要使用两个嵌套的 for 循环？为什么不只使用一个：

```
for ($i=0; $i<=15; $i++) echo $i . " "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:32:14.880

试试这个：

```
$r2 = 10;
for($t = 0; $t <= $r2; $t++){
   echo $r2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T21:34:09.120

哦等等..我现在明白了，为什么你有两个嵌套循环，你想基本上将一个数字提高到 2 的幂，以控制输出值的数量。在这种情况下，您想要的只是：

```
// this is the variable you need to change to affect the number of values outputed
$n = 2;

// Square $n
$m = $n * $n;

// Loop $m times
for ($i = 0; $i < $m; $i++) {
  echo $i;
} 
```

# android - 监控活动生命周期

> ID：11460924
> 
> 赞同：0
> 
> 时间：2012-07-12T21:25:10.837
> 
> 标签：android, android-activity, appcelerator, lifecycle, android-lifecycle

如何监控 Appcelerator 应用程序中的 Android 活动生命周期？我希望我的应用程序能够响应 android 提供的停止、暂停、恢复等事件。[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

我已经阅读了一些有关创建“意图”的内容，但是提供这些事件真的有必要吗？只是想知道这里最简单的行动方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:31:00.970

编辑：对不起，没有看到 appcelerator 标签。

根据[Android 活动](http://docs.appcelerator.com/titanium/2.1/#!/api/Titanium.Android.Activity)的 Appcelerator API 文档-

> Titanium 为活动生成生命周期事件，但不生成应用程序级的启动、停止、暂停和恢复事件。要在应用程序暂停和恢复时收到通知，您必须将事件侦听器添加到其各个活动。

[您可以在此处](https://wiki.appcelerator.org/display/guides/Event+Handling)找到 Appcelerator 的事件处理指南。

您应该能够通过诸如

```
Ti.App.addEventListener('create', function(e){
    //Do something
}); 
```

免责声明：我以前没有使用过 Appcelerator。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:27:44.153

你可以在你的应用程序中放置像 Log.debug("ClassNmae", "resumeing") 这样的日志语句，然后在 LogCat 中查看输出吗？为什么不？

# c# - 如果使用绑定/转换器，ComputedVerticalScrollBarVisibility 触发器不起作用

> ID：11460928
> 
> 赞同：2
> 
> 时间：2012-07-12T21:25:15.713
> 
> 标签：c#, wpf, .net-3.5

[这个问题与我的另一个 SO 问题](https://stackoverflow.com/questions/11456469/resize-listview-columns-on-scrollviewer-computedverticalscrollbarvisibility-chan)非常相关，但这个问题更加具体。随意前往另一个问题了解更多细节，但我应该在这里提供你需要的一切。

我已经为我的列表视图实现了自定义样式，以便我可以使用以下内容访问滚动条属性（我删除了一些不相关的杂项）

```
<Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}" TargetType="ScrollViewer">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ScrollViewer">
                <Grid Background="{TemplateBinding Background}">
                    <DockPanel Margin="{TemplateBinding Padding}">
                        <ScrollViewer DockPanel.Dock="Top" Focusable="false">   
                    </DockPanel>
                    <ScrollBar Name="PART_HorizontalScrollBar" Orientation="Horizontal"  Grid.Row="1" Maximum="{TemplateBinding ScrollableWidth}" ViewportSize="{TemplateBinding ViewportWidth}" Value="{TemplateBinding HorizontalOffset}" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                    <ScrollBar Name="PART_VerticalScrollBar" Grid.Column="1" Margin="20,0" Maximum="{TemplateBinding ScrollableHeight}" ViewportSize="{TemplateBinding ViewportHeight}" Value="{TemplateBinding VerticalOffset}" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="ComputedVerticalScrollBarVisibility" Value="Collapsed">
                        <Setter Property="Width">
                            <Setter.Value>
                                <Binding  
                                    ConverterParameter="400" 
                                    RelativeSource="{RelativeSource FindAncestor,AncestorType={x:Type ListView}}"
                             >
                                    <Binding.Converter>
                                        <Converters:ListViewColumnResizeConverter/>
                                    </Binding.Converter>
                                </Binding>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="ComputedVerticalScrollBarVisibility" Value="Visible">
                        <Setter Property="Width">
                            <Setter.Value>
                                <Binding  
                                    ConverterParameter="500" 
                                    RelativeSource="{RelativeSource FindAncestor,AncestorType={x:Type ListView}}"
                             >
                                    <Binding.Converter>
                                        <Converters:ListViewColumnResizeConverter/>
                                    </Binding.Converter>
                                </Binding>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

请注意我有两个触发器，一个 for`Visible`和一个 for `Collapsed`。当我运行我的应用程序时，无论如何我都会`Visible`得到a 。`Collapsed`我什至用计时器延迟加载我的数据并且没有`Visible`被触发。**是否有我遗漏的东西，或者这是一个`Dependency Property`没有正确触发的错误？**

**更新**

所以，我注意到它的准系统版本正在工作（不使用绑定和转换器），所以我从我的代码中删除了它并使触发器简单地更新背景颜色。而且，它有效，那么为什么添加绑定/转换器会弄乱触发器呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:23:13.643

好吧，答案肯定对我没有帮助，但似乎绑定的值被缓存了。由于我的代码隐藏转换器更像是获得对 Computed 触发器的代码访问权限，因此我什至没有使用返回值。但是，我继续将唯一的颜色值绑定到每个触发器，一旦滚动条变得可见，我的代码就没有再次被击中，而是使用了初始调用的返回值。我必须承认，这对 MS 团队来说是相当聪明的，但对我来说却是一个绊脚石。如果用户具有可用于每个触发器的与时间相关的值怎么办？

# ios - iOS：为什么 UITableView 出列和重用单元格？

> ID：11460929
> 
> 赞同：1
> 
> 时间：2012-07-12T21:25:21.973
> 
> 标签：ios

这更像是一个理论问题而不是编程问题。如您所知，当您在 iOS 中实例化表格视图时，您必须考虑表格单元格的出列和重用，当它们滚动进出视图时。

令我困惑的是，填充单元格的所有数据无论如何都会被缓存。当您在 safari 中查看网页时，您正在滚动浏览更多的图像和文本，这些图像和文本在您滚动浏览它之后仍然存在。我安装的 iOS 游戏使用的数据（例如，Asphalt 6）比简单的表格多很多倍。所以我只是好奇为什么苹果会麻烦地出列和重用表格单元格。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:32:40.257

这与模型中的数据量无关。更重要的是用于创建 Cell 视图的内存量。如果我有一个要创建 1000 多个`UITableViewCell`对象的表，为什么屏幕上只能显示大约十几个对象时它会创建所有对象？不要只考虑保存和显示的数据，还要考虑显示数据的对象所占用的内存，即`UITableViewCell`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:28:26.657

这只是很好的内存管理。没有人知道一张桌子有多大，所以安全总比抱歉好。无论多少单元格适合一个视图，您只需要内存。

# wcf - wcf 通过类库在winform中使用

> ID：11460935
> 
> 赞同：1
> 
> 时间：2012-07-12T21:26:15.960
> 
> 标签：wcf, .net-4.0, wcf-binding

我在 vs2010 中有一个包含一些项目的解决方案：

```
一个 wcf 项目
一个赢的形式项目
一个类库

```

我的类库有 wcf 服务的引用。当我尝试使用此引用从 winform 应用程序中的 wcf 检索数据时，出现此错误：

`Could not find default endpoint element that references contract 'MikServiceShopInfo.IshopsService' in the ServiceModel client configuration section. This might be because no configuration file was found for your application, or because no endpoint element matching this contract could be found in the client element.`

我将类库的 app.config 更改为：

```
<endpoint address="http://localhost:8855/LaptopsInfoService.svc"
          binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_ILaptopsInfoService"
          contract="ILaptopsInfoService" 
          name="BasicHttpBinding_ILaptopsInfoService" />
<endpoint address="http://localhost:8855/shopsService.svc" 
          binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_IshopsService"
          contract="IshopsService"
          name="BasicHttpBinding_IshopsService" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:51:33.007

我想到了几件事：

1.  在配置文件中完全限定合约名称，即：

    合同="MikServiceShopInfo.IshopsService"

2.  `<serviceModel>`将类库的 app.config 部分复制到 WinForm 的配置文件中。类库不使用配置文件——它们使用引用它们的应用程序（网站、WinForm 等）的配置文件。

# c# - 在没有回发的情况下使用 jquery 在 ASP.NET Web 表单中显示数据插入的中继器

> ID：11460938
> 
> 赞同：3
> 
> 时间：2012-07-12T21:26:26.590
> 
> 标签：c#, jquery, asp.net

这看起来很简单，但我就是无法理解。我有一个 asp.net 页面，具有以下凭据：

1.  1 个按钮
2.  1 个文本框
3.  1个中继器

****现在，当我在文本框中键入文本时，我将文本传递给使用 jquery ajax 的 Web 方法，该方法将文本插入到数据库中。现在我的代码中有一个公共方法，它从数据库中选择数据并将其绑定到转发器。如何在没有回发的情况下在每个数据插入上显示此转发器？****

```
 success: function (data) {
            for (var i = 0; i < data.d.length; i++) {
                $("#tbDetails").append("<tr><td>" + data.d[i].ID + "</td><td>" + data.d[i].ChargeName + "</td><td>" + data.d[i].Description + "</td></tr>");
            }
        },
        error: function (result) {
            alert("Error"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:04:00.850

这是一个小样本，我想你可以忽略插入部分，因为你说你已经有了它。这使用 jQuery，您也在使用它。

HTML：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="false"
        CodeFile="Default.aspx.cs" Inherits="_Default" %>

    <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
        <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
        <script language="javascript" type="text/javascript">
            function insertData() {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/insertData",
                    data: "{}",
                    dataType: "json",
                    success: function (data) {
                        if (data.d != null)
                            alert(data.d);
                    }
                });
            }

            function retrieveData() {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/retrieveData",
                    data: "{}",
                    dataType: "json",
                    success: function (data) {
                        if (data.d != null) {
                            for (i = 0; i < data.d.length; i++) {
                                $("#myTable").append("<tr><td><input type='button' onclick='deleteRow(" + data.d[i].ID + ")' value='Delete'></input></td><td>" + data.d[i].Name + "</td><td>" + data.d[i].LastName + "</td><td>" + data.d[i].Age + "</td></tr>");
                            }
                        }
                    }
                });
            }
            function deleteRow(ID) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Default.aspx/deleteRow",
                    data: "{'row':'" + ID + "'}",
                    dataType: "json",
                    success: function (data) {
                        if (data.d != null) {
                            alert(data.d);
                        }
                    }
                });
            }
            retrieveData();
        </script>
    </asp:Content>
    <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <table id="myTable">
        </table>
    </asp:Content> 
```

ASP.NET：

```
using System;
using System.Web.Services;
using System.Collections.Generic;

public partial class _Default : System.Web.UI.Page
{

    [WebMethod]
    public static List<SampleClass> retrieveData()
    {
        //Retrieve data from the server and return.
        List<SampleClass> tmp = new List<SampleClass>();

        tmp.Add(new SampleClass() { Name = "Test", LastName = "Number 1", Age = 44, ID = 1 });
        tmp.Add(new SampleClass() { Name = "Test", LastName = "Number 2", Age = 23, ID = 2 });
        tmp.Add(new SampleClass() { Name = "Test", LastName = "Number 3", Age = 20, ID = 3 });
        tmp.Add(new SampleClass() { Name = "Test", LastName = "Number 4", Age = 45, ID = 4 });
        tmp.Add(new SampleClass() { Name = "Test", LastName = "Number 5", Age = 21, ID = 5 });

        return tmp;
    }

    [WebMethod]
    public static bool deleteRow(int row)
     {
        if (row > 0)
            return true;

        return false;
    }

    [WebMethod]
    public static bool insertData()
    {
        //Do all of the insert in the server blah blah blah
        //and return true or false if it was inserted.
        return true;

    }
}

public class SampleClass
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
} 
```

祝你好运！编辑：现在您还可以看到一个删除示例，其中包括将参数传递给 web 方法。祝你好运。

# jquery - Jquery复选框撤消

> ID：11460939
> 
> 赞同：1
> 
> 时间：2012-07-12T21:26:41.513
> 
> 标签：jquery

在我的应用程序中，用户可以选中或取消选中复选框。在更改事件上：

```
 $('#Inactive_cb').change(function () {

    ....
    this.checked = !this.checked; 
```

我检查该值是否已更改。在 change() 中，我还检查他们是否有权进行更改。如果他们不喜欢撤消，请选中/取消选中。

问题：

我的方式是否高于理想？我有：

```
 this.checked = !this.checked; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:12:09.210

您可以使用

```
if($(this).is(':checked')){
    $(this).attr('checked', false);
} 
```

或者，如果您有更新版本的 jQuery，您可以使用

```
if($(this).is(':checked')){
    $(this).prop('checked', false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:10:04.467

你可以这样做，它很简单而且有效......但如果用户没有检查它的权限，我建议只禁用该复选框。

```
<input type="checkbox" id="foo" disabled /> 
```

设置禁用属性的jQuery代码

```
$("#foo").attr('disabled', 'disabled'); 
```

您会在表单加载时执行此操作，因此没有权限的用户甚至无法检查它。显然，您希望在服务器端再次进行此检查，以确保没有人从 DOM 中的元素中删除该属性并在不应该进行检查时对其进行检查。

还不如添加...如果您需要使用 JS 删除属性，请使用 jQuery 的[`.removeAttr()`](http://api.jquery.com/removeAttr/)

# php - 如何包含一个php然后删除它？

> ID：11460940
> 
> 赞同：0
> 
> 时间：2012-07-12T21:26:45.907
> 
> 标签：php, file, plugins, include

好吧，我不知道这篇文章的标题是否正确。随意改变它。

好的，这是我的场景：

**插件A.php**

```
function info(){
   return "Plugin A";
} 
```

**插件B.php**

```
function info(){
   return "Plugin B";
} 
```

最后，我有一个插件管理器，负责将所有插件信息导入池数组：
**Manager.php**

```
class Manager
{
    protected $pool;

    public function loadPluginsInfo()
    {
        $plugin_names = array("pluginA.php", "pluginB.php");

        foreach ($plugin_names as $name) 
        {
            include_once $name;
            $this->pool[] = info(); 
        }
    }
} 
```

这里的问题是，当我打印池数组时，它只向我显示加载的第一个插件的信息。我认为包含的文件会覆盖信息，因为它仍然从第一个包含调用 info() 方法。

有没有办法为所有插件文件包含具有相同名称的 info() 函数的两个插件的信息？

先感谢您

PS：致命的无法重新声明错误永远不会被抛出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:36:51.150

你可以使用动态的方式来创建插件类

插件类

```
class PluginA
{
    public function info()
    {
        return 'info'; //the plugin info
    }
} 
```

经理班

```
class Manager
{
    protected $pool;

    public function loadPluginsInfo()
    {
        $plugin_names = array("pluginA", "pluginB"); //Plugin names

        foreach ($plugin_names as $name) 
        {
            $file = $name . '.php';
            if(file_exists($file))
            {
                require_once($file); //please use require_once
                $class = new $name(/* parameters ... */); //create new plugin object

                //now you can call the info method like: $class->info();
            }                
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:37:43.037

您确定解释器没有因致命错误而窒息吗？应该是因为您尝试在`info`这里定义该函数两次。

有很多方法可以实现您想要的，如上面@David 的评论中的一种方法是使用类，例如。

```
class PluginA
{
  function info() { return 'Plugin A'; }
}

class PluginB
{
  function info() { return 'Plugin B'; }
} 
```

那么 Manager 类将是这样的：

```
class Manager
{
    protected $pool;

    public function loadPluginsInfo()
    {
        $plugin_names = array("PluginA", "PluginB");

        foreach ($plugin_names as $name) 
        {
            include_once $name . '.php';
            $this->pool[] = new $name();
        }
    }
} 
```

现在您已经加载了每个插件类的实例，因此要获取第一个插件的插件信息`$this->pool[0]->info();`。不过，我建议使用关联数组，以便您可以轻松引用给定的插件。为此，对池的分配将变为：

```
$this->pool[$name] = new name(); 
```

然后你可以说：

```
$this->pool['PluginA']->info(); 
```

例如。

还有很多其他方法可以做到这一点。现在 5.3 是主流，您可以轻松地[命名](http://php.net/manual/en/language.namespaces.php)您的函数组，但我仍然建议池的关联数组，因为您可以在恒定时间内引用插件，而不是线性。

# android - 广播接收器未收到 ACTION_BOOT_COMPLETED

> ID：11460941
> 
> 赞同：2
> 
> 时间：2012-07-12T21:26:54.920
> 
> 标签：android, broadcastreceiver

我正在尝试做一个可以接收 Action_BOOT_COMPLETED 的基本 BroadcastReceiver。每当我在模拟器中运行它时，它似乎都不像 BroadcastReceiver 代码中的代码。

清单如下：

```
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".BootAtStartupActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name=".BootAtStartupReceiver"
        android:enabled="true"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>
</application>

</manifest> 
```

主要活动：

```
package com.mfcoding.android.bootatstartup;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class BootAtStartupActivity extends Activity {
static final String TAG = "BootAtStartupActivity";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.d(TAG, "onCreate");
}
} 
```

广播接收器：

```
package com.mfcoding.android.bootatstartup;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class BootAtStartupReceiver extends BroadcastReceiver {
static final String TAG = "BootAtStartupReceiver";

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
        Log.d(TAG, "*** onReceive ACTION_BOOT_COMPLETED");
    }

    Log.d(TAG, "*** onReceive");
}

} 
```

在 Logcat 中，我从来没有看到 BroadcastReceiver 文件的日志打印输出。我在 Logcat 中看到的只是活动日志打印输出。有任何想法吗？我想在 Logcat 中看到 Broadcast Receiver 类的 Log 打印语句。

项目链接 [https://github.com/fangstar/BootAtStartup](https://github.com/fangstar/BootAtStartup)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-04T11:44:25.287

应用程序只能在安装并执行至少一次后第一次设备重启后才能接收到此广播意图。另请注意，如果应用程序安装在外部存储上，它可能永远不会收到此广播，因为外部存储会在广播发送后安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:35:25.907

尝试删除此行：

```
<category android:name="android.intent.category.DEFAULT" /> 
```

来自清单中的意图过滤器。我已经成功地实现了没有此行的启动侦听器，所以我知道不需要它，但是我不确定它是否会导致它无法工作。无论哪种方式，它都值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T11:16:03.773

您想在活动的 oncreate() 方法中注册广播接收器。

registerReceiver(receiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

接收器 - 广播接收器

# c# - C# 中的数据绑定 DateTimePicker 时间

> ID：11460942
> 
> 赞同：1
> 
> 时间：2012-07-12T21:27:02.413
> 
> 标签：c#, datetimepicker

我有一个带有 2 个 datetimepicker 控件的 Windows 窗体：一个用于日期，一个单独的 datetimepicker 控件用于时间。这两个控件都绑定到数据库中的同一列，并且控件具有不同的属性名称（即 dateEdit 和 timeEdit）和不同的格式（即 Long 和 Time）。

这是我的问题/问题：

1.  timeEdit 选择器忽略数据库条目中的任何秒数，并将时间秒数设置为“00”，如“2:34:00”，即使数据库条目（为该插图修剪为时间）是“14:34： 31.891123 -04:00”。如何让秒数正确显示？
2.  每当我将 timeEdit 选择器中的秒数从“00”编辑为（例如）“15”时，如“2:34:15”，选择器会将秒数重置为“00” *，然后*再将值传递给下一个函数。如何传递正确的秒值？
3.  我想编辑时间的毫秒数。将修剪后的毫秒（使用 DATEPART）绑定到文本框对我来说最好吗？我是否需要将毫秒转换或转换为字符或字符串才能在文本框中正确显示它们？

谢谢你的帮助！

触发编辑表单的代码：

```
 private void timeDataGridView_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        try
        {
            if (e.ColumnIndex == 5)
            {
                EditTime editForm = new EditTime((Guid)timeDataGridView.Rows[e.RowIndex].Cells[e.ColumnIndex].Value);

                editForm.StartPosition = FormStartPosition.CenterScreen;
                editForm.ShowDialog();
                editForm.Close();
            }
        }
        catch (Exception ex)
        {
            string msg = "Error: ";
            msg += ex.Message;
            throw new Exception(msg);
        }
    } 
```

表格代码：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Configuration;
    using System.Data;
    using System.Data.SqlClient;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace StatusManager
    {
        public partial class EditTime : Form
        {
            private Guid calendarId;

            public EditTime()
            {
                InitializeComponent();
            }

            public EditTime(Guid Id)
            {
                InitializeComponent();
                calendarId = Id;
            }

            public string GetConnectionString()
            {
                var connString = ConfigurationManager.ConnectionStrings["StatusManager.Properties.Settings.StatusConnectionString"].ConnectionString;
                return connString;
            }

            private void UpdateCalendarItem(string dateEdit, string timeEdit, string note)
            {
                var conn = new SqlConnection(GetConnectionString());

                const string UpdateStatusSql = @"UPDATE dbo.statuses SET
                calendarTime = @timeOffset
                notes = @note 
                WHERE PK_calendarUID = @PK_calendarUID";

                try
                {
                    SqlCommand cmd = new SqlCommand(UpdateSql, conn);
                    var param = new SqlParameter[3];

                    param[0] = new SqlParameter("@PK_calendarUID", calendarId);

                    //Convert date(s) to correct format
                    string dateTimeCombined = dateEdit + " " timeEdit;
                    DateTime timeConverted = Convert.ToDateTime(dateTimeCombined);
                    DateTimeOffset timeOffset = new DateTimeOffset(timeConverted);

                    param[1] = new SqlParameter("@timeOffset", timeOffset);
                    param[2] = new SqlParameter("@note", note);

                    foreach (SqlParameter t in param)
                    {
                        cmd.Parameters.Add(t);
                    }

                    conn.Open();
                    cmd.CommandType = CommandType.Text;
                    cmd.ExecuteNonQuery();
                }
                catch (SqlException ex)
                {
                    string msg = "Error updating 'calendarItems': ";
                    msg += ex.Message;
                    throw new Exception(msg);
                }
                finally
                {
                    conn.Close();
                }          
            }

            private void editTimeButton_Click(object sender, EventArgs e)
            {
                UpdateCalendarItem(dateEdit.Text, timeEdit.Text, notes.Text);

                this.Close();
            }

            private void EditTime_Load(object sender, EventArgs e)
            {
                this.locationsTableAdapter.Fill(this.locationsDataSet.locations);
                this.calendarTableAdapter.FillById(this.calendarDataSet.calendarItems, calendarId);
            }
        }
    } 
```

实例化 datetimepicker 的代码：

```
 this.timeEdit.CustomFormat = "";
    this.timeEdit.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.calendarBindingSource, "calendarTime", true));
    this.timeEdit.Format = System.Windows.Forms.DateTimePickerFormat.Time;
    this.timeEdit.Location = new System.Drawing.Point(385, 30);
    this.timeEdit.Name = "timeEdit";
    this.timeEdit.ShowUpDown = true;
    this.timeEdit.Size = new System.Drawing.Size(89, 20);
    this.timeEdit.TabIndex = 2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:00:35.653

您需要使用[DateTimePicker.CustomFormat 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.customformat.aspx)

```
s The one- or two-digit seconds.

ss The two-digit seconds. Single digit values are preceded by a 0. 
```

您不能在几毫秒内使用 DateTimePicker。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:09:55.823

问题已解决，但我不确定如何解决。这是我所做的：

1.  在 calendarDataSet 中，我更新了两个查询（Fill、GetData 和 FillById、GetDataBy (@ID)）以选择 calendarTime 作为 CONVERT(VARCHAR(12), calendarTime, 114) AS calHoursMinsSec
2.  本质上，我创建了一个包含小时、分钟、秒和毫秒的新列
3.  在表单上，​​我添加了一个文本框并将文本框绑定到 calHoursMinsSec

**注意：**我之前将日期时间转换为 varchar 的尝试毫无疑问是由于操作员错误而失败的。

保存表单后，绑定似乎粘住了，我能够将相关变量传递给更新函数

感谢大家的投入！感谢您的指导和建议！

# xpages - session.evaluate 和 notesxspdocument

> ID：11460949
> 
> 赞同：0
> 
> 时间：2012-07-12T21:27:28.917
> 
> 标签：xpages, xpages-ssjs

我对 SSJS 中的 session.evaluate 有疑问。在关键字文档中，我存储了一些 @formula 来进行一些数据转换。可以说这将是：

`@left(fieldname;2)`

如果字段名包含“你好”，这将导致“他”。这里没什么可看中的。现在我想在 xpage 中使用它。

我编写了一个名为 executeFormula(doc) 的函数。我从 xpage 上的操作调用此函数。此 xpage 包含 1 个注释文档数据源。函数调用是

```
executeFormula(datasource.getDocument(true)) 
```

现在由于某种原因，@formula 永远不会正确计算。我是否需要先保存文档才能使用`session.evaluate(kwFormula,doc)`，还是 @formula 在某些方面有误？

ps我忘了提到这段代码在customvalidator中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:58:46.323

如果没有看到 executeFormula(doc) 函数的代码，就很难确切知道 session.evaluate 是如何被调用的。

我建议暂时将该函数从等式中取出，并使用文档源创建一个简单的测试页面，并在其中创建一个带有 session.evaluate 的简单计算字段，以便您可以看到结果。鉴于您上面的示例，计算场将类似于以下内容

```
session.evaluate("@Left(fieldname;2)",xspDoc.getDocument(true)); 
```

一旦你得到可接受的结果，你就可以将它移动到你的函数中，并验证它是否也在那里工作。

不要忘记 session.evaluate 返回一个向量，因此如果返回值不为空，您可能需要对返回值执行 .getFirstElement() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T10:21:10.330

如果您在自定义验证器中使用它，则从浏览器/客户端发布的值尚未更新数据模型（在您的情况下为文档）。这发生在验证成功后。

我想它可能适用于某些字段（例如，成功刷新后更新的字段，或现有文档中存储的字段）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T10:22:20.313

实际上无需提及文档，例如：- session.evaluate("@username") 就足够了。

对于您的 session.evaluate("@left('hello';2)") 将起作用。，

# javascript - 音频播放中特定时间的 HTML5 + Javascript 音频触发事件

> ID：11460950
> 
> 赞同：1
> 
> 时间：2012-07-12T21:27:33.107
> 
> 标签：javascript, jquery, audio, html5-audio

我正在研究设置一个脚本，该脚本将显示某些音符以及伴随的音乐曲目。基本上我需要在音轨中的某些时间来触发事件。我已经看到我可以使用类似于以下内容的 currentTime ，但是我正在寻找一种很好的方法来制作一个简洁的函数来在帧之间移动并在有倒带等情况下前后移动。非常感谢帮助！

```
$("#ogg_player_1_obj").bind('timeupdate', notePosition);

function notePosition(){
    myVid=document.getElementById("ogg_player_1_obj");
    mct=myVid.currentTime;

    //SET Frame based on time???

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:49:11.823

```
function notePosition(){
//your code.
if(frame1start <= mct && frame1end >= mct) {
    $(".frame").fadeOut(100);
    $("#frame1").fadeIn(100);
}
//and again for every frame.
} 
```

如果您将每一帧都放在一个单独的元素中，该元素具有类 frame 和 id frame + number，则此方法有效。

# php - 在 CakePHP 中使用带有自定义模型方法的分页

> ID：11460954
> 
> 赞同：1
> 
> 时间：2012-07-12T21:27:45.633
> 
> 标签：php, cakephp, model

我正在设置分页以显示属于用户帐户中的图像列表。这就是我的控制器中的内容：

```
class UsersController extends AppController {

    public $paginate = array(
        'limit' => 5,
        'order' => array(
            'Image.uploaded' => 'DESC'
        )
    );

    // ...

    public function images() {
        $this->set('title_for_layout', 'Your images');

        $albums = $this->Album->find('all', array(
            'conditions' => array('Album.user_id' => $this->Auth->user('id'))
        ));
        $this->set('albums', $albums);

        // Grab the users images
        $options['userID'] = $this->Auth->user('id');
        $images = $this->paginate('Image');
        $this->set('images', $images);
    }

    // ...

} 
```

它可以工作，但在我实现这个分页之前，我的`Image`模型中有一个自定义方法来获取用户图像。这里是：

```
public function getImages($options) {
    $params = array('conditions' => array());

    // Specific user
    if (!empty($options['userID'])) {
        array_push($params['conditions'], array('Image.user_id' => $options['userID']));
    }

    // Specific album
    if (!empty($options['albumHash'])) {
        array_push($params['conditions'], array('Album.hash' => $options['albumHash']));
    }

    // Order of images
    $params['order'] = 'Image.uploaded DESC';
    if (!empty($options['order'])) {
        $params['order'] = $options['order'];
    }

    return $this->find('all', $params);
} 
```

有没有办法可以使用此`getImages()`方法而不是默认方法`paginate()`？我在文档中可以找到的最接近的内容是“自定义查询分页”，但我不想编写自己的查询，我只想使用该`getImages()`方法。希望我能做到。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:13:28.137

是的。

```
//controller
$opts['userID'] = $this->Auth->user('id');
$opts['paginate'] = true;
$paginateOpts = $this->Image->getImages($opts);
$this->paginate = $paginateOpts;
$images = $this->paginate('Image');

//model
if(!empty($opts['paginate'])) {
    return $params;
} else {
    return $this->find('all', $params);
} 
```

**解释：**

基本上，您只需添加另一个参数（我通常将其称为“分页”），如果它在模型中为真，则无需传回查找的结果，而是传回动态创建的参数 - 然后您可以使用这些参数来执行控制器中的分页。

这使您可以继续将所有模型/数据库逻辑保留在模型中，并且只需在模型根据您发送的选项构建所有复杂参数后利用控制器进行分页。

# javascript - 当我在 .exec() 结果中使用 .index 时，.index 是如何工作的？

> ID：11460955
> 
> 赞同：0
> 
> 时间：2012-07-12T21:27:50.770
> 
> 标签：javascript

我正在开发一个程序，该程序使用 javascript 从大量文本中提取信息，并且在查看类似的前同事代码时，我发现当您保存 .exec() 的结果并执行 .index 时变量它为您提供数组中该子字符串的索引。

```
Example:

var str="I found this for you!";
var pattern=/this/igm;
var result=pattern.exec(str);
document.write("\"This\" Index = " +  result.index + ".");

Result:

"This" Index = 8. 
```

当我在网上查看时，我发现 exec() 返回一个数组，看起来数组没有 .index 属性。我对 .index 的所有搜索似乎都出现了 index()。

这里发生了什么？为什么这行得通？我还想知道我是否可以做一些与此相关的其他事情（比如 .lastindex）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:33:27.593

[这是一个很好的资源`exec`。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)它不仅返回一个具有额外属性的数组，例如`index`，而且还修改了所使用的正则表达式对象。

尝试这个：

```
var str="I found this for you!";
var pattern=/this/igm;
var result=pattern.exec(str);
for(var i in result){
    console.log("i: " + i);
    console.log("result[" + i + "]: " + result[i]);
}

// i: 0
// result[0]: this
// i: index
// result[index]: 8
// i: input
// result[input]: I found this for you! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:29:20.273

`index`是由 . 添加到数组中的特殊属性`exec`。默认情况下它不一定必须存在，并且自己复制行为非常容易。

```
var example = [1, 2, 3];
example.index = 15; 
```

# iphone - 触摸表格视图中的单元格后标签栏消失

> ID：11460957
> 
> 赞同：1
> 
> 时间：2012-07-12T21:27:57.150
> 
> 标签：iphone, ios, xcode, uitableview, ios5

我有一个标签栏应用程序的问题。我正在制作一个底部有三个栏的标签栏应用程序。在我的第一个栏上，它是一个 tableviewcontroller。当我点击表格视图控制器时，它会将我带到另一个视图（没有标签栏）。当我点击回到主屏​​幕（有标签）时，标签栏不见了。如果您需要图片，我会发布它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:40:30.683

您可能已将`UITableViewController`segue 设置为模态样式。如果是这种情况，您应该将其更改为推送样式。

为了使推送起作用，您的视图控制器需要位于`UINavigationController`. 在您的故事板中，选择您的根视图控制器并将其嵌入到这样的导航控制器中......

![在此处输入图像描述](../Images/ff2efb0391f6cdcb6cd38dbd7720950a.png)

# android - 画布没有在自定义视图中显示所有绘制的部分？

> ID：11460958
> 
> 赞同：8
> 
> 时间：2012-07-12T21:27:58.587
> 
> 标签：android, android-emulator, android-canvas, android-view

我正在为 android 应用程序开发**自定义视图**，类似于[Mind the Robot](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/comment-page-1/#comment-106122))提供的 Analog Gauge 示例代码。

从列出的站点运行代码，我在屏幕上看到了这个：

（摩托罗拉机器人，2.2.3），（模拟器，4.0.3）

![有一个箭头](../Images/30c37a483f2efcb1201eef11034929df.png)

(Xoom, 4.0.3)(其他手机, 4.0.3)

![没有箭头](../Images/43aafd916c1dc65111ab9f18c8eb28a4.png)

**手不见了！**

正在进行绘图调用（我可以在 logcat 中看到它们），但是调用绘制的画布元素是不可见的。

不过，它**不依赖于 API 级别**；如果我以正确的方式将它导入到项目中，当我在 Xoom 上运行它时，它就会显示出来。

但是，当我将文件移动到不同的项目文件夹（相同的源代码，相同的布局）时，它又会丢失表盘。

这是怎么回事？相同的代码如何在不同的设备上产生如此不同的结果？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T21:27:59.727

所以，我的谜团中的关键线索似乎是它在模拟器上工作，而不是在硬件设备上。

### 硬件渲染

我确实仔细阅读了 Android 开发者网站上的硬件渲染页面，但显然不够仔细。

[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

虽然它确实提到 API 从版本 11 开始可用，但它并没有说**默认情况下所有应用程序都启用硬件渲染，从 API 级别 14 (ICS) 开始**。

这对我们意味着什么？

几乎一切都更快；除了一些不起作用的东西。

我设法违反了其中两个，但没有意识到：

*   Canvas.DrawTextOnPath()
*   Paint.setShadowLayer()

API 参考中没有提到它（或者我能找到的任何其他地方，当然也没有被 Lint 检查），但是**使用任何列出的操作都可以做一些奇怪的事情。**

就我而言， Canvas.DrawTextOnPath() 似乎工作得很好。

**但是当Android注意到我在手上使用的油漆设置了阴影层时，它会默默地忽略它。**

### 我如何知道我的 View 是否是硬件加速的？

从上面的文档链接：

> 有两种不同的方法可以检查应用程序是否是硬件加速的：
> 
> *   **如果视图附加到硬件加速窗口，**View.isHardwareAccelerated()返回 true。****
> ***   **如果 Canvas 是硬件加速的，**Canvas.isHardwareAccelerated()返回 true******
> 
>  ****如果您必须在绘图代码中执行此检查，请尽可能使用 Canvas.isHardwareAccelerated() 而不是 View.isHardwareAccelerated()。当视图附加到硬件 > 加速窗口时，仍然可以使用非硬件加速的 Canvas 进行绘制。例如，当出于缓存目的将视图绘制到位图中时，就会发生这种情况。****

 ****在我的情况下，似乎发生了相反的情况。自定义视图记录它不是硬件加速的；但是，画布报告它是硬件加速的。

### 解决方法和固定装置

最简单的解决方法是强制自定义视图进行软件渲染。根据文档，这可以通过以下方式完成：

```
myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

或者，您可以删除有问题的操作，并保持打开硬件渲染。

从我的不幸中吸取教训。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-08T20:51:39.653

我将它放入 init() 并在那之后工作正常。

```
 private void init() {
    setLayerType(myView.LAYER_TYPE_SOFTWARE, null);
    ....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-19T14:04:18.527

使用 myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 建议我可以看到手。但我还有一个问题：我看到比例尺只写了 0！如图所示和架构外的两个策略零：（GALAXY NEXUS 4.2.1）

![在此处输入图像描述](../Images/df0877ddc83ba268658652b6d220ddb8.png)

我的 drawScale() 方法如示例中所示：

```
 private void drawScale(Canvas canvas) {
        canvas.drawOval(scaleRect, scalePaint);

        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        for (int i = 0; i < totalNicks; ++i) {
            float y1 = scaleRect.top;
            float y2 = y1 - 0.020f;

            canvas.drawLine(0.5f, y1, 0.5f, y2, scalePaint);

            if ((i % 5) == 0) {
                int value = nickToDegree(i);

                if ((value >= minDegrees) && (value <= maxDegrees)) {
                    String valueString = Integer.toString(value);
                    canvas.drawText(valueString, 0.5f, y2 - 0.015f, scalePaint);

                }
            }

            canvas.rotate(degreesPerNick, 0.5f, 0.5f);

        }
        canvas.restore();

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T14:33:19.150

就我而言，我做了这个：

```
 AnalogView bar = (AnalogView) findViewById(R.id.AnalogBar);
    bar.setLayerType(bar.LAYER_TYPE_SOFTWARE, null);
if (value_list.size()>0)   bar.SetData(Double.parseDouble(value_list.get(value_list.size()-1))); 
```

AnalogView 中的 SetData 在哪里

```
public  void SetData(double data) {
    setHandTarget((float)data);
  invalidate();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-07T17:25:07.797

在 Galaxy S4 安卓 4.4.2 上

`TYPE_TEMPERATURE`已弃用

利用

`TYPE_AMBIENT_TEMPERATURE`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-27T18:12:37.817

对于在初始化时按比例绘制文本有问题的任何人，请执行以下操作：

scalePaint.setLinearText(true);****

# php - WordPress 注册与用户注册分开

> ID：11460964
> 
> 赞同：2
> 
> 时间：2012-07-12T21:28:24.977
> 
> 标签：php, wordpress

我想知道是否有可用的插件或一种方法来实现 WordPress 网站的注册过程，该过程将与可以看到后端的网站用户完全分开。为了澄清一点，我们希望有两个注册可用，一个用于可以访问实际 WordPress 后端的站点管理员或编辑，另一个用于无权访问 WordPress 后端且不共享同一用户的其他客户端数据库表。我们甚至不希望他们在 WordPress 后端被列为“用户”。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:17:18.353

您应该转到仪表板并检查默认[用户角色](http://codex.wordpress.org/Roles_and_Capabilities)是否设置为订阅者。订阅者的唯一角色是阅读帖子，他们无权访问仪表板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:02:01.763

创建一个使用 OpenID 的单独系统。这是最简单的

# jquery - 显示短日期字符串

> ID：11460971
> 
> 赞同：1
> 
> 时间：2012-07-12T21:29:05.227
> 
> 标签：jquery, asp.net-mvc

在我的 ASP.NET MVC 应用程序中，我试图在 UI 上仅显示日期部分。model.SomeDate 是一个 DateTime 值。

我尝试了以下方法：

```
<%= Html.TextBoxFor( model => model.SomeDate, new { @Value = Model.SomeDate.ToShortDateString() } )%> 
```

但它不会编译，错误是： **System.Nullable 不包含 'ToShortDateString' 的定义并且没有扩展方法......**

我怎样才能让它在 UI 上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:31:22.563

采用

```
(Model.SomeDate.HasValue)?Model.SomeDate.Value.ToShortDateString():"" 
```

代替

```
Model.SomeDate.ToShortDateString() 
```

IE：

```
<%= Html.TextBoxFor( model => 
     model.SomeDate, new { 
     @Value = Model.SomeDate.Value.ToShortDateString() 
   })
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:39:07.143

您可以使用编辑器模板。

在您的视图模型上：

```
[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
public DateTime? SomeDate { get; set; } 
```

在您看来：

```
<%= Html.EditorFor(x => x.SomeDate) %> 
```

如果由于某种原因设计此应用程序的人没有使用视图模型并决定直接将他的域模型传递给视图并且您无法修改这些域模型，您可以在视图中执行此操作：

```
<%= Html.EditorFor(x => x.SomeDate, "ShortDate") %> 
```

然后定义一个自定义编辑器模板（`~/Views/Shared/EditorTemplates/ShortDate.ascx`）：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<DateTime?>" %>
<%= Html.TextBox(
    "", 
    Model.HasValue ? Model.Value.ToString("d") : "",
    new { @class = "text-box single-line" }
) %> 
```

# php - 为什么我不能从这个网站上刮掉标题？

> ID：11460972
> 
> 赞同：3
> 
> 时间：2012-07-12T21:29:05.327
> 
> 标签：php, html, simple-html-dom, scraper

我正在使用 simple-html-dom 从指定站点上刮下标题。

```
<?php

include('simple_html_dom.php');

$html = file_get_html('http://www.pottermore.com/');

foreach($html->find('title') as $element) 
       echo $element->innertext . '<br>';

?> 
```

我尝试过的任何其他网站都可以，例如 apple.com。

但是如果我输入[pottermore.com](http://pottermore.com)，它不会输出任何东西。Pottermore 上面有 Flash 元素，但我试图刮掉标题的主屏幕没有 Flash，只有 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:39:17.447

这对我有用:)

```
$url = 'http://www.pottermore.com/';
$html = get_html($url);
file_put_contents('page.htm',$html);//just to test what you have downloaded
echo 'The title from: '.$url.' is: '.get_snip($html, '<title>','</title>');

function get_html($url)
{
    $ch = curl_init();
    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $header[] = "Accept-Language: en-us,en;q=0.5";
    $header[] = "Pragma: "; //browsers keep this blank.  
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows;U;Windows NT 5.0;en-US;rv:1.4) Gecko/20030624 Netscape/7.1 (ax)');
    curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate');
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 20);
    curl_setopt($ch, CURLOPT_AUTOREFERER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_COOKIEFILE, COOKIE);
    curl_setopt($ch, CURLOPT_COOKIEJAR, COOKIE); 
    $result = curl_exec ($ch);
    curl_close ($ch);
    return($result);
}

function get_snip($string,$start,$end,$trim_start='1',$trim_end='1')
{
    $startpos = strpos($string,$start);
    $endpos = strpos($string,$end,$startpos);

    if($trim_start!='')
    {
        $startpos += strlen($start);
    }
    if($trim_end=='')
    {
        $endpos += strlen($end);
    }
    return(substr($string,$startpos,($endpos-$startpos)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:44:28.437

只是为了确认其他人在说什么，如果您不发送用户代理字符串，此站点将发送 403 Forbidden。

添加这个对我有用：

用户代理：Mozilla/5.0 (Windows;U;Windows NT 5.0;en-US;rv:1.4) Gecko/20030624 Netscape/7.1 (ax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:42:53.707

该功能在幕后`file_get_html`使用[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)。此函数可以从 URL 中提取数据，但要这样做，它会发送一个用户代理字符串。

默认情况下，此字符串为空。一些网络服务器使用这一事实来检测非浏览器正在访问其数据并选择禁止此操作。

您可以`user_agent`在 php.ini 中设置以控制发送的用户代理字符串。或者，您可以尝试：

```
ini_set('user_agent','UA-String'); 
```

设置`'UA-String'`为您喜欢的任何内容。

# fluent-nhibernate - Fluent NHibernate 的主键之一也是外键 - OutOfRangeException

> ID：11460973
> 
> 赞同：2
> 
> 时间：2012-07-12T21:29:11.520
> 
> 标签：fluent-nhibernate, foreign-keys, primary-key

```
Cart
{
 CompositeId().KeyProperty(x => x.CART_ID, "CART_ID").KeyProperty(x => x.COMM_CD, "COMM_CD");
 References(x => x.Product, "COMM_CD");
} 
```

当我尝试将购物车对象保存到数据库中时，我收到了超出范围的异常。我认为这是因为我有两个 COMM_CD 属性。有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T01:19:32.967

您需要使用`KeyReference`而不是`KeyProperty`

```
CompositeId()
    .KeyProperty(x => x.CART_ID, "CART_ID")
    .KeyReference(x => x.Product, "COMM_CD"); 
```

# web-services - 使用带有 SSL 的 BasicHTTPbinding 在 MonoTouch 中验证消息的安全性时发生错误

> ID：11460974
> 
> 赞同：0
> 
> 时间：2012-07-12T21:29:15.983
> 
> 标签：web-services, soap, asynchronous, https, xamarin.ios

我们目前正在寻找使用 MonoTouch 来开发 iPad 应用程序。我们有一个现有的 Web 服务和客户端可以很好地连接，使用带有 TransportWithMessageCredential (HTTPS) 的 mProxy.Security.Mode 的基本 httpbinding。

然后，我们使用以下方法添加客户端凭据： mProxy.ClientCredentials.UserName.UserName = "Username"; mProxy.ClientCredentials.UserName.Password = "P@ssword";

但是，当我们将此代码迁移到 MonoTouch 时，它会出现验证安全性的错误。我们查看了在 windows 和 monotouch 版本中收到的原始消息，monotouch 版本没有任何安全凭证。我读过我们将不得不手动构建这些。这是正确的方法吗？有没有更简单的方法，或者我错过了一种更简单的方法来做到这一点。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:30:57.827

截至今天，MonoTouch 不支持 WCF 的消息安全模式。他们确实提到这是一项正在进行的工作。

我有与您相同的要求，最终遵循了一个使用 basicHttpBinding、传输安全、基本凭据和自定义 HTTP 模块的配方，该模块使用 HTTP“授权”标头中的基本凭据来验证用户身份（针对 ASP. NET 成员资格提供程序）。

你可以在这里找到实现细节：

[如何 - 在 Windows 窗体的 WCF 中使用具有传输安全性的用户名身份验证](http://wcfsecurityguide.codeplex.com/wikipage?title=How%20To%20-%20Use%20Username%20Authentication%20with%20Transport%20Security%20in%20WCF%20from%20Windows%20Forms&referringTitle=Home)

# java - 一个 web.xml 中的多个 jersey servlet

> ID：11460977
> 
> 赞同：10
> 
> 时间：2012-07-12T21:29:20.353
> 
> 标签：java, spring, rest, jersey

是否可以在一个 web.xml 中有多个 jersey servlet？我正在尝试以这种方式进行 RESTfull 版本控制：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

  <display-name>myapi</display-name>

  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/context-v1.xml /WEB-INF/context-v2.xml</param-value>
  </context-param>

  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <servlet>
    <servlet-name>REST-V1</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.myapi.rest.v1</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>REST-V1</servlet-name>
    <url-pattern>/v1/*</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>REST-V2</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.myapi.rest.v2</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>REST-V2</servlet-name>
    <url-pattern>/v2/*</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

但是spring context-v1和context-v2应该分开加载吗？因为他们有豆类，它们具有相同的名称等。

**编辑：**

如果您查看我的控制台输出，它会为每个 servlet 加载资源（管理员/信息）两次：

```
15.07.2012 14:47:08 com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.myapi.rest.v1
15.07.2012 14:47:08 com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class com.myapi.rest.v1.LOAdminResource
  class com.myapi.rest.v1.LOInfoResource
15.07.2012 14:47:08 com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.servlet.SpringServlet getContext
INFO: Using default applicationContext
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, adminResource_v2, of type com.myapi.rest.v2.LOAdminResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, infoResource_v2, of type com.myapi.rest.v2.LOInfoResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, adminResource_v1, of type com.myapi.rest.v1.LOAdminResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, infoResource_v1, of type com.myapi.rest.v1.LOInfoResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.8 06/24/2011 12:17 PM'
15.07.2012 14:47:09 com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.myapi.rest.v2
15.07.2012 14:47:09 com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class com.myapi.rest.v2.LOAdminResource
  class com.myapi.rest.v2.LOInfoResource
15.07.2012 14:47:09 com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.servlet.SpringServlet getContext
INFO: Using default applicationContext
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, adminResource_v2, of type com.myapi.rest.v2.LOAdminResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, infoResource_v2, of type com.myapi.rest.v2.LOInfoResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, adminResource_v1, of type com.myapi.rest.v1.LOAdminResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.spi.spring.container.SpringComponentProviderFactory registerSpringBeans
INFO: Registering Spring bean, infoResource_v1, of type com.myapi.rest.v1.LOInfoResource as a root resource class
15.07.2012 14:47:09 com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.8 06/24/2011 12:17 PM' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-14T21:25:43.603

是的，您可以在 web.xml 中指定两个或多个 servlet。请记住为每个指定不同的 servlet 映射。

```
<servlet>
    <servlet-name>servletOne</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>com.packageOne</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet>
    <servlet-name>servletTwo</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>com.packageTwo</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>ServletOne</servlet-name>
    <url-pattern>/v1/*</url-pattern>
</servlet-mapping>
    <servlet-mapping>
    <servlet-name>ServletTwo</servlet-name>
<url-pattern>/v2/*</url-pattern>
</servlet-mapping> 
```

initParameter loadOnStartup 定义了加载 servlet 的顺序（在这种情况下，首先是 servletOne，然后是 servletTwo）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-29T21:24:32.033

问题是，当您同时使用 Jersey 和 Spring 时，Jersey/Spring servlet 会遍历所有可用的 Spring bean 并注册它将在其中找到的每个资源和提供程序类。

如果您有多个 Jersey/Spring servlet 使用相同的（根）上下文并因此共享 bean 定义，则为每个这样的 servlet 执行该过程，并且资源和提供者类被注册多次。

为了避免同一 bean 的多次注册，请在相应的 Jesrey/Spring servlet 的子上下文中定义此类 bean。

甚至不需要为在 web.xml 中声明类提供初始化参数，除非需要混合使用 Spring 管理和 Jersey 管理的类。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/root-context.xml</param-value>
</context-param>

...

<servlet>
    <servlet-name>REST-V1</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/context-v1.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>REST-V2</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/context-v1.xml /WEB-INF/context-v2.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>

... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-24T10:40:50.323

我知道这个话题已经过时了。但我的回答可以帮助其他人。

我们可以使用这些分隔符在 web.xml 中配置多个资源包：

1.  空白空间
2.  逗号 (,)
3.  分号 (;)
4.  下一行

**例子 ：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>MultiplePackageRest</display-name>
  <servlet>
    <servlet-name>JerseyMultiplePackage</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>jersey.config.server.provider.packages</param-name>
      <param-value>info.javadoff.rest1,info.javadoff.rest2,...</param-value>
    </init-param>
      <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>JerseyMultiplePackage</servlet-name>
    <url-pattern>/api/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-15T08:30:25.583

另一种可能性是在`com.sun.jersey.spi.spring.container.servlet.SpringServlet`. 启动方法如下所示（版本 1.19.1）：

```
@Override
protected void initiate(ResourceConfig rc, WebApplication wa) {
    try {
        wa.initiate(rc, new SpringComponentProviderFactory(rc, getContext()));
    } catch (RuntimeException e) {
        LOGGER.log(Level.SEVERE, "Exception occurred when intialization", e);
        throw e;
    }
} 
```

如果您像这样更改子类中的代码，那么您可以根据您的条件（例如包名称）过滤掉不需要的 spring bean：

```
@Override
protected void initiate(ResourceConfig rc, WebApplication wa) {
    try {
        SpringComponentProviderFactory springComponentProviderFactory = new SpringComponentProviderFactory(rc, getContext());
        rc.getClasses().removeIf( clazz -> clazz.getPackage().getName().startsWith( "bla" ));
        wa.initiate(rc, springComponentProviderFactory);
    } catch (RuntimeException e) {
        LOGGER.log(Level.SEVERE, "Exception occurred when intialization", e);
        throw e;
    }
} 
```

有点hacky的解决方案，但对我们来说非常有效。

# html - 在同一页面上下载和/或查看 .pdf

> ID：11460983
> 
> 赞同：0
> 
> 时间：2012-07-12T21:29:51.133
> 
> 标签：html, iis, anchor, mime, content-disposition

我正在使用 IIS/asp.net，并且需要在同一页面上并排放置两个链接。它们都链接到同一个文件，但有两种不同的行为，一个应该查看文件，另一个应该下载文件。

```
<a title="Specifications" href="/filename.pdf">
   <img alt="View Icon" src="/images/viewIcon.jpg" />
</a>    
<a title="Specifications" href="/filename.pdf">
   <img alt="Download Icon" src="/images/downloadIcon.jpg" />
</a> 
```

![在此处输入图像描述](../Images/3ee95ff21b0e34d03e93efcbcd373b31.png)

我在这里看到了一些关于通过 MIME 类型或通过强制一种行为或另一种行为的提示`Content-Disposition: attachment`

但无论如何，有没有这种安排，两者都住在同一页面上？理想情况下，我希望能够向链接本身或 href 添加一些内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:22:50.820

如果你想强制它，你可以在服务器端进行。我不确定您使用的是 webforms 还是 mvc，但无论是在服务器端，您都可以在标题中添加类似这样的内容：

Response.AddHeader("Content-Disposition", "attachment;filename=whatevernamehere.pdf");

这将强制浏览器作为附件下载。您只需对“下载”链接执行此操作，并单独保留“查看”链接（在浏览器中查看）。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:32:58.330

我最终接受了我得到的建议。我的整个解决方案如下。

我的第一步是在站点的根目录中创建一个处理程序，我称之为 fileDownload.ashx。

```
<%@ WebHandler Language="C#" Class="fileDownload" %>
using System;
using System.Web;

public class fileDownload : System.Web.IHttpHandler
{
    public void ProcessRequest (HttpContext context) 
    {
        HttpResponse r = context.Response;
        string fileName = context.Request.QueryString["file"];
        r.AddHeader("Content-Disposition", "attachment; filename=" + fileName);
        r.ContentType = "application/octet-stream"; 
        r.WriteFile(context.Server.MapPath(fileName));
    }
    public bool IsReusable { get { return false;}}
} 
```

接下来更新链接...

```
<a title="Specifications" href="/filename.pdf">
   <img alt="View Icon" src="/images/viewIcon.jpg" />
</a>    
<a title="Specifications" href="/fileDownload.ashx?file=/filename.pdf">
   <img alt="Download Icon" src="/images/downloadIcon.jpg" />
</a> 
```

就是这样！有一点回发闪烁，我不希望有，但它可以满足我的需要。感谢推秃程序员。

# python - 创建类以生成 ID

> ID：11460984
> 
> 赞同：0
> 
> 时间：2012-07-12T21:29:53.893
> 
> 标签：python, class, object

我已经阅读了一些关于自动创建对象 ID 的内容，但仍然迷路了......我试图将以下代码基于 Algorias[在这里](https://stackoverflow.com/questions/1045344/how-do-you-create-an-incremental-id-in-a-python-class)的伟大示例......

我想要实现的是一个类，它是所有新 id 请求的资源。逻辑是，如果它都在一个地方，它应该更容易管理......

但是当我将 x 设置为 Order 的一个实例时，我得到以下信息：

```
>>> x = Order()

Traceback (most recent call last):
  File "<pyshell#20>", line 1, in <module>
    x = Order()
  File "C:\Python27\delete.py", line 17, in __init__
    self.uid = Id_Class.new_id("Order")
TypeError: unbound method new_id() must be called with Id_Class instance as first argument (got str instance instead) 
```

任何帮助将不胜感激

```
import itertools

class Id_Class(object):    
    new_id   = itertools.count(1000).next
    order_id = itertools.count(1000).next
    person_id= itertools.count(1000).next
    def new_id(self, t):   # t = type of id required
        if t == "Order":
            self.id = Id_Class.order_id()
        elif t == "Person":
            self.id = Id_Class.person_id()

class Order(object):
    def __init__(self):
        self.uid = Id_Class.new_id("Order")
        self.cus='Test'

class Person(object):
    pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:33:23.083

这可能是一个类方法。类方法接收类作为第一个参数（不是像常规方法那样的类的实例）。这样做，您还需要返回值，以便调用者可以访问 ie。

```
class Id_Class(object):    
    new_id   = itertools.count(1000).next
    order_id = itertools.count(1000).next
    person_id= itertools.count(1000).next

    @classmethod
    def new_id(cls, t):   # t = type of id required
        if t == "Order":
            return cls.order_id()
        elif t == "Person":
            return cls.person_id()
        else:
            raise ValueError("Must be 'Order' or 'Person'") 
```

虽然你真的根本不需要上课：

```
new_id   = itertools.count(1000).next
order_id = itertools.count(1000).next
person_id= itertools.count(1000).next
def new_id(t):   # t = type of id required
    if t == "Order":
        return order_id()
    elif t == "Person":
        return person_id() 
```

然后可以通过以下方式简单地调用它：

```
my_order_id=new_id('Order')
my_person_id=new_id('Person') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:34:11.427

因为您像静态方法一样调用 new_id，所以请尝试添加 @staticmethod ，例如：

```
class Id_Class(object):    
    new_id   = itertools.count(1000).next
    order_id = itertools.count(1000).next
    person_id= itertools.count(1000).next

    @classmethod
    def new_id(cls, t):   # t = type of id required
        if t == "Order":
            return Id_Class.order_id()
        elif t == "Person":
            return Id_Class.person_id() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:34:22.770

您需要[`@staticmethod`](http://docs.python.org/library/functions.html#staticmethod)在函数声明上使用装饰器。

```
class Id_Class(object):    
    new_id   = itertools.count(1000).next
    order_id = itertools.count(1000).next
    person_id= itertools.count(1000).next

    @staticmethod
    def new_id(t):   # t = type of id required
        if t == "Order":
            return Id_Class.order_id()
        elif t == "Person":
            return Id_Class.person_id() 
```

# hadoop - 需要了解 Pig/MapReduce 作业分析概念

> ID：11460985
> 
> 赞同：0
> 
> 时间：2012-07-12T21:29:56.447
> 
> 标签：hadoop, mapreduce, apache-pig

我在大约 1.22 GB 的文件上运行 Pig 脚本。默认块大小为 64MB。我有 4 个数据节点。作为输出的 Pig 脚本会生成 19 个文件。
当我运行 Pig 脚本并查看 Job Tracker 时，我看到了 6 个 Jobs。

```
 Jobid           Priority   User              Name          Map % Complete    Map Total   Maps Completed  Reduce % Complete   Reduce Total    Reduces Completed   Job Scheduling Information    Diagnostic Info

job_201207121202_0001   NORMAL    user     PigLatin:Analysis.pig    100.00%             20            20              100.00%              1               1                         NA                   NA
job_201207121202_0002   NORMAL    user     PigLatin:Analysis.pig    100.00%              5            5               100.00%              1               1                         NA                   NA
job_201207121202_0003   NORMAL    user     PigLatin:Analysis.pig    100.00%              2            2               100.00%              1               1                         NA                   NA
job_201207121202_0004   NORMAL    user     PigLatin:Analysis.pig    100.00%              2            2               100.00%              1               1                         NA                   NA
job_201207121202_0005   NORMAL    user     PigLatin:Analysis.pig    100.00%              5            5               100.00%              1               1                         NA                   NA
job_201207121202_0006   NORMAL    user     PigLatin:Analysis.pig    100.00%             5             5               100.00%              1               1                         NA                   NA 
```

根据我的理解，由于输入文件大小为 1.22 GB，而块大小为 64 MB，因此将为该文件创建总共 20 个块。我的复制因子为 3。由于每次拆分都会有一个地图作业，因此我将有 20 个地图作业，并且 job_201207121202_0001 作业在上面的列表中说是完美的。但是为什么我看到其他 5 个工作和其他 19 个地图任务？
谁能帮我理解这一点。我以为它只有 20 个 map 和 1 个 reduce 工作，因为 1.22GB/64MB ~ 20。

我是 Pig/Hadoop 初学者。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T03:52:38.757

Pig 根据脚本的语义将一个脚本编译成多个 map-reduce 作业。粗略地说，join 是一项 MR 工作。组是一项 MR 工作。订单是 2 个 MR 工作（一个用于抽样分布）。还有一些其他的算子会产生 MR 边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:47:10.317

您需要分享您的猪脚本，以便任何人真正自信地给出答案，但很可能您的脚本足够复杂，执行所有阶段需要 6 个 map reduce 作业才能完成

您可以看到执行的第二个作业确实运行了 20 个映射器（1.22GB / 64MB = 19.52，这将需要 20 个映射器）：

> 普通用户 PigLatin:Analysis.pig 100.00% **20** 20 100.00% 1 1 NA NA job_201207121202_0002

除此之外，谁知道你还在做什么——你是否使用不同的输入文件多次提交了相同的脚本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T19:41:23.453

Pig 是为链接 MR 工作而构建的薄层。

对于 MR 作业，“块大小”（技术上的块大小）决定了 mapper 的数量，但对于猪来说，MR 是基本单位而不是块大小。

根据您对数据执行的 ETL 类型，pig 会将其映射到单个/链接的多个 MR 作业。

例如： A= LOAD '/input' using PigStorage('|') as (a:chararray) Store A into '/output' ; 这个 pigscript 只是产生 Map only 的工作，甚至没有使用 reducer。

使用 groupby 和 JOIN 的脚本将产生 2 个 MR 作业。

PIG 支持的每个操作都可以映射到 MR ：

1.  加入：1 先生
2.  分组：1 MR
3.  过滤器：可以在 Mapper 或 reducer 阶段完成
4.  加载：映射器
5.  存储：映射器或减速器
6.  Foreach：映射器或减速器

# python - 如何在python中使用Elementtree搜索属性

> ID：11460990
> 
> 赞同：0
> 
> 时间：2012-07-12T21:30:14.547
> 
> 标签：python, elementtree

我对 Elementtrees 如何在 Python 中工作感到有些困惑，因为以下代码不起作用：

```
import xml.etree.ElementTree as ET

file = ("People.xml")

tree = parse(file)

myList = tree.findall("person")

for people in myList:
   print people.attrib["name"]
   jobs = people.findall("jobs/job")
   for job in jobs:
      print job.attrib["title"] 
```

我收到一条错误消息`AttributeError 'list' object has no attribute 'attrib'`。Jobs 与 people 是不同类型的对象，因为它们都是从返回的列表中的项目`findall`？

示例 xml 文件为：

```
<person name="p1">
   <address>address1</address>
   <jobs>
     <job title="title1">job1</job>
     <job title="title2" pay="pay1">job2</job>
   </jobs>
</person>
<person name="p2">
   <address>address2</address>
   <jobs>
     <job title="title3">job3</job>
     <job title="title4" pay="pay2">job4</job>
   </jobs>
</person> 
```

我需要对我正在尝试的性质进行搜索的原因是我正在尝试打印其工作将“pay”属性设置为 pay2 的人员的姓名。

# php - 使用 jquery 重定向页面

> ID：11460993
> 
> 赞同：0
> 
> 时间：2012-07-12T21:30:23.797
> 
> 标签：php, javascript, jquery

我有以下html代码：

```
 <form method="post" name="b" >
<table>
    <tr>
        <td>Field A</td>
        <td><input type='text' name='field[0][a]' id='field[0][a]'></td>
        <td>Field B</td>
        <td><textarea name='field[0][b]' id='field[0][b]'></textarea></td>
        <td><button>remove</button></td>
    </tr>
</table>
</div>
<div id="container"></div>
<button id="mybutton">add form</button>

<div align="center">
<p><button onClick="dadosFormularios()" value="Registar" name="registar">Registo</button></p>
</div>
</form> 
```

如您所见，有一个按钮，当我单击时调用函数“dadosFormularios()”；

```
 function dadosFormularios(){

            var dadosFormulario={};
            var iterador=countForms;
            var i=0;

            while(i<iterador){

            dadosFormulario[i]={};
            dadosFormulario[i]['a']=$('#field\\['+i +'\\]\\[a\\]').val();
            dadosFormulario[i]['b']=$('#field\\['+i +'\\]\\[b\\]').val();   
            alert(dadosFormulario[i]['a']);
            alert(dadosFormulario[i]['b']); 
                i++;
            }

//i want to redirect here

    } 
```

现在我正在寻找的是在上述函数的末尾使用一些东西，将我重定向到一个 php 页面（由我创建）并在那里接收数组来处理他包含的数据。我搜索并找到了诸如“window.location =”http://www.google.com“;”之类的东西 和其他类似的东西，但这里没有任何效果。因此，如果我无法在不单击按钮的情况下重定向页面，我什至无法考虑通过重定向传递变量。

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:32:36.017

你不需要 jQuery 来重定向，只需要 javascript

```
window.location.href="page.html"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:32:27.927

试试`document.location = your-url-here;`吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:38:04.147

我想你可能想做这样的事情：

```
var qstring = '';
var tmp_qstring = [];
for ( var i = 0; i < dadosFormulario.length; i++ )
{
       tmp_qstring[i] = 'a' + i + '=' + dadosFormulario[i]['a'] + '&' + 'b' + i + '=' + dadosFormulario[i]['b'];

}

qstring = tmp_qstring.join('&');

window.location = 'page.php?' + qstring; 
```

基本上这会将所有数据放入一个查询字符串中，然后将其附加到您的 url 的末尾，然后您可以使用 $_GET 通过您的 php 脚本访问它。它会像

```
page.php?a1=val&b1=val&a2=val&b2=val... 
```

我想这就是你的意思......

# spring - Web 服务中的 Spring 3 和 JAXB

> ID：11460999
> 
> 赞同：0
> 
> 时间：2012-07-12T21:30:47.417
> 
> 标签：spring, jaxb, spring-ws

我正在尝试编写一个简单的 Web 服务，使用 JAXB 自动序列化和反序列化对象：

```
@XmlRootElement
public class SimpleObject {

    private int id;

    private String name;

    /* ... */
} 
```

* * *

```
@Controller
public class SimpleObjectController {

    @RequestMapping("submit",method=RequestMethod.POST)
    public String doPost(@RequestBody SimpleObject value) {
        return value.toString();
    }
} 
```

* * *

```
<?xml version="1.0"?>
<beans ...>

    <oxm:jaxb2-marshaller id="marshaller" class="path.to.objects"/>
</beans> 
```

但是，当我实际提出请求时，我得到以下信息：

```
HTTP Status 415
The server refused this request because the request entity is in a format not
supported by the requested resource for the requested method (). 
```

我没有从 Spring 收到任何日志，这让我很难确定根本原因。在这个过程中是否有我遗漏的关键步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:47:24.977

通常这是因为您的请求中缺少“application/xml”的 Accept 标头或 Content Type 标头。此外，如果您使用的是 Spring 3.1，则可以通过这种方式使您的注释更加明确：

```
@RequestMapping(value="submit",method=RequestMethod.POST, consumes="application/xml", produces="application/xml") 
```