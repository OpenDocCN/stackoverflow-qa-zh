# StackOverflow 问答 10498000-10498999

# java - 字符串的 Gson 数组到 JsonArray

> ID：10498000
> 
> 赞同：32
> 
> 时间：2012-05-08T11:48:53.620
> 
> 标签：java, json, gson

我正在使用 Gson 并尝试将一堆字符串值添加到`JsonArray`如下所示：

```
JsonArray jArray = new JsonArray();
jArray.add("value1"); 
```

问题是 add 方法只需要一个`JsonElement`.

我试图将 String 转换为 a `JsonElement`，但没有奏效。

我如何使用 Gson 进行操作？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-08T11:56:37.907

您可以创建一个包含 String 值的原语并将其添加到数组中：

```
JsonArray jArray = new JsonArray();
JsonPrimitive element = new JsonPrimitive("value1");
jArray.add(element); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T11:51:59.777

好像你应该做一个`new JsonPrimitive("value1")`并添加它。请参阅[javadoc](http://goo.gl/Yje4f)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-11T09:52:46.177

对于较新版本的 Gson 库，现在我们也可以添加`Strings`。它还扩展了对添加`Boolean`,`Character`等的支持（[在此处](https://static.javadoc.io/com.google.code.gson/gson/2.6.2/com/google/gson/JsonArray.html#add-java.lang.String-)`Number`查看更多信息）

现在使用它对我有用：

```
JsonArray msisdnsArray = new JsonArray();
for (String msisdn : msisdns) {
    msisdnsArray.add(msisdn);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-02T16:36:26.697

I was hoping for something like this myself:

```
JsonObject jo = new JsonObject();
jo.addProperty("strings", new String[] { "value1", "value2" }); 
```

But unfortunately that isn't supported by GSON so I created this helper:

```
public static void Add(JsonObject jo, String property, String[] values) {
    JsonArray array = new JsonArray();
    for (String value : values) {
        array.add(new JsonPrimitive(value));
    }
    jo.add(property, array);
} 
```

And then use it like so:

```
JsonObject jo = new JsonObject();
Add(jo, "strings", new String[] { "value1", "value2" }); 
```

Voila!

# android - AsyncTask 中的 Android AsyncTask

> ID：10498001
> 
> 赞同：6
> 
> 时间：2012-05-08T11:48:53.693
> 
> 标签：android, android-asynctask

所以，我正在开发一个条形码解码器，一旦我们有了条形码，它就会通过互联网进入多个 API 来解码刚刚扫描的内容。问题是我必须将一些 XML 解析链接在一起，我不知道我是否做得对。

因此，一旦扫描了条形码，我的程序就会调用一个 ASyncTask，它会通过 API 检索产品名称。一旦有了名称，我希望它调用另一个 ASyncTask。我知道这可以通过在另一个中实例化一个 ASyncTaks 来实现`onPostExecute()`，但是我认为这是错误的，因为它就像盒子中的盒子。那么在我的主 Activity 中实例化我的第二个 ASyncTask 并让它等到我的第一个 ASyncTask 完成是不是可能/更好？

（英语不是我的主要语言，我希望我说清楚了）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T11:59:37.717

我认为`AsyncTask`在`onPostExecute`第一个 AsyncTask 中开始第二个是绝对合法的，混合这两个操作是一个糟糕的逻辑想法，正如“The Offspring”所说 - **“你必须让他们分开”**

如果您不希望它直接在`onPostExecute`自身内部，请设置一个处理程序以在活动中执行它并从`onPostExecute`.

最后一件事——如果你有很多逻辑——把它移到一个单独的文件中，不要把它们都放在同一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:54:37.843

在这种情况下，最好将长时间运行的操作一起批处理到一个 AsyncTask 中。

另一种选择是使用 Loaders API，这使得链接任务更容易[http://developer.android.com/guide/topics/fundamentals/loaders.html](http://developer.android.com/guide/topics/fundamentals/loaders.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:08:41.337

如果您经常面临这样的情况，您可以采用另一种方法。也就是说，将请求和操作合并到 runnables/callables 中，并在例如队列中分别管理它们。这是一个不错的方法。 [http://ugiagonzalez.com/2012/07/02/theres-life-after-asynctasks-in-android/](http://ugiagonzalez.com/2012/07/02/theres-life-after-asynctasks-in-android/)

# sdk - 应用程序的“现场时间”

> ID：10498006
> 
> 赞同：1
> 
> 时间：2012-05-08T11:49:29.013
> 
> 标签：sdk, google-analytics

我一直在非常成功地使用 Google Analytics 来衡量应用程序。我们从数据中学到了很多。只有一件事我找不到任何信息，那就是“现场停留时间”这一指标。它确实衡量了一些东西，但在我看来，时间对于平均使用来说通常太长了。

任何人都可以向我解释这些数据是否意味着：

时间：

*   从打开应用程序到**进入后台**
*   从打开应用程序到**真正终止**
*   还有什么？

提前谢谢了！来自荷兰的问候，

索尼娅·卡姆斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:08:51.560

它测量的时间是从打开应用程序到实际终止它。因此，例如，如果应用程序保持在后台状态并且您没有包含结束会话的逻辑，那么如果/当它重新回到最前沿时，您在应用程序数量中的时间将被人为夸大。

我无法谈论监视应用程序状态的细节，但在 SO 上有一些关于 iOS 现场问题的时间信息：

[为什么我的 iOS 应用在 Google Analytics 中的会话时长超过 30 分钟？](https://stackoverflow.com/q/9895924/882428)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:48:44.620

现场时间：现场时间是衡量访问质量的一种方式。如果访问者花费很长时间访问您的网站，他们可能会与它进行广泛的互动。但是，网站停留时间可能会产生误导，因为访问者通常在没有实际查看或使用您的网站时打开浏览器窗口。

所选时间范围内的平均访问（会话）持续时间。会话时间是通过将会话中每个页面的页面上的时间相加来计算的，会话中的最后一页除外。现场平均时间是通过将现场总时间除以所选时间范围内的会话数来确定的。

计算不包括访问者在会话的最后一页上花费的时间，因为无法确定访问者在最后一页上花费了多长时间。

为了说明，假设一天有 3 次访问（会话），并且您想知道当天的平均访问持续时间。让我们假设这三个访问如下所示：

*   第 1 页 (10:00 am) --> 第 2 页 (10:05) --> 第 3 页 (10:06) --> 退出
*   第 1 页 (9:00 am) --> 第 2 页 (9:01) --> 第 3 页 (9:06) --> 退出页面
*   第 1 页（下午 2:00）--> 第 2 页（下午 2:15）--> 第 3 页（2:16）--> 退出

在每个会话中，可以使用后续页面上的时间戳来计算在第 1 页和第 2 页上花费的时间（分别为 5、1 和 15 分钟）。但是，无法计算访问者在会话的最后一页上花费了多少时间，因为 Google Analytics（分析）没有可用的数据表明访问者何时离开。

在此示例中，计算将是：

*   现场总时间：21分钟
*   现场平均时间（21/3）：7:00

来自[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1006253](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1006253)

# android - 在eclipse中添加microsoft excel jar文件

> ID：10498008
> 
> 赞同：-1
> 
> 时间：2012-05-08T11:49:31.543
> 
> 标签：android, eclipse

如何在 Eclipse 中添加 excel jar 库以及我应该添加哪个 jar 文件以及在 eclipse 中添加的位置。请向我提供完整的详细信息。我已经检查了这个网站，但我没有得到任何理想。[http://www.vogella.com/articles/Eclipse/article.html#classpath](http://www.vogella.com/articles/Eclipse/article.html#classpath)

请向我提供应该逐步显示过程的外部网站。

我已经添加了 jxl-2.6 jar 文件。请告诉我模拟器的配置。因为我收到一个错误

```
05-08 16:47:07.585: ERROR/AndroidRuntime(335): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.com/com.com.test}: java.lang.ClassNotFoundException: com.com.test in loader dalvik.system.PathClassLoader[/data/app/com.com-1.apk]
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.os.Looper.loop(Looper.java:123)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at java.lang.reflect.Method.invokeNative(Native Method)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at java.lang.reflect.Method.invoke(Method.java:521)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at dalvik.system.NativeStart.main(Native Method)
05-08 16:47:07.585: ERROR/AndroidRuntime(335): Caused by: java.lang.ClassNotFoundException: com.com.test in loader dalvik.system.PathClassLoader[/data/app/com.com-1.apk]
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-08 16:47:07.585: ERROR/AndroidRuntime(335):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:01:10.213

您包含的错误与您要使用的库无关。

看起来更多的是Android找不到你的主要活动类`com.com.test`。请检查`AndroidManifest.xml`此处指定的所有活动是否真正实施。

如果一切正常，请确保从 Eclipse 的“项目”菜单中执行“清理” - 有时 Eclipse 中的 Android 插件在维护所有文件处于最新状态时会出现一些问题。

# c# - 在客户端计算机上安装字体

> ID：10498013
> 
> 赞同：1
> 
> 时间：2012-05-08T11:49:47.360
> 
> 标签：c#, .net, windows, fonts

我正在尝试在客户端计算机上安装字体。我可以看到问题已经被问到[hereInstalling a font on a client machine](https://stackoverflow.com/questions/126594/installing-a-font-on-a-client-machine)

我的问题是，“文件系统”在哪里？

根据[MSDN](http://msdn.microsoft.com/en-us/library/h2a99e5c%28v=vs.100%29.aspx)，它位于 View -> Editor -> File System 下。

我在我的 VS2010 Professional 版本上看不到它。有什么想法我需要做什么（我需要先安装一些东西）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T11:50:51.653

`File System`是`Setup and Deployment Project`在 VS 中创建的时候。在那种类型的项目中，您可以放入您的 exe，告诉项目，字体，`Fonts Folder`然后它将您的字体放置在安装字体的客户端系统中，即`C:\Windows\Fonts`客户端计算机的文件夹中。

您的 MSDN 链接在`Deployment Editor`.

打开一个新`Setup and Deployment`项目进行检查。

# javascript - 在 iOS 5 设备上点击 Fb 提要共享按钮时，键盘不会消失

> ID：10498015
> 
> 赞同：0
> 
> 时间：2012-05-08T11:49:54.803
> 
> 标签：javascript, ios, html, facebook-javascript-sdk

我正在使用 HTML5 和 JS 来构建应用程序。

在我的应用程序中，当我使用发布到墙功能`facebook`登录`facebook`后，会出现提要对话框，输入文本后，当我点击共享按钮时，iOS 的软键盘不会关闭。当我在 iOS 4 设备上运行它时运行相同的应用程序它运行正常，我尝试在回调函数中获得 post to wall 的响应后将焦点设置到其他元素，如应用程序的其他按钮，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:07:57.880

我也面临同样的问题，但是当我更新 Phonegap1.7.0 时，问题得到了解决。

# iphone - 如何在iphone中缓存整个网页？

> ID：10498017
> 
> 赞同：1
> 
> 时间：2012-05-08T11:49:55.897
> 
> 标签：iphone, ios, uiwebview

我想在用户连接到网络时加载网页并将其离线存储（包括图像/资源）。如果用户没有连接到任何网络，那么我应该加载以前存储的网页。我试过了`NSData dataWithContentsOfURL:(NSURL *)url`，`NSString stringWithContentsOfURL`但这些商店只存储 html 内容而不是资源。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:01:56.620

您可以使用[ASIHttpRequest](http://allseeing-i.com/ASIHTTPRequest/)来做到这一点。如果您不想使用该项目（它不再处于活动状态），您可以查看代码及其作用。查看“[如何在 iOS 中缓存带有图像的整个网页](https://stackoverflow.com/questions/6696151/how-to-cache-a-whole-web-page-with-images-in-ios)”以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:38:58.777

我不知道是否有类似的单线解决方案`myWebView.cache4Offline = YES;`，但我担心只要您无权访问网站的代码（即，如果您想让*任何*网站在您的应用程序中离线可用），您就必须自己编程。想一想，似乎并没有那么难：

1.  扫描图像 url 的 html 字符串（以及您需要的所有其他内容）
2.  使用从 Internet 下载这些资源`NSData dataWithContentsOfURL`（可能有点烦人，因为相对/绝对 URL）
3.  使用 NSData writeToFile:options:error 将数据保存到文件中：
4.  将 HTML 中的 URL 替换为 3 中的 filePath。（或者，更好地使用约定在文件 URL 中转换*它们**的*URL）

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T11:51:28.530

使用以下命令将此数据写入文件：

```
-(void)writeDataToFile:(NSString*)filename
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    if(filename==nil)
    {
        DLog(@"FILE NAME IS NIL");
        return;
    }
    // the path to write file
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat: @"%@",filename]];
    /*NSData *writeData;
     writeData=[NSKeyedArchiver archivedDataWithRootObject:pArray]; */
    NSFileManager *fm=[NSFileManager defaultManager];
    if(!filePath)
    {
        //DLog(@"File %@ doesn't exist, so we create it", filePath);
        [fm createFileAtPath:filePath contents:self.mRespData attributes:nil];
    }
    else 
    {
        //DLog(@"file exists");
        [self.mRespData writeToFile:filePath atomically:YES];
    }

    NSMutableData *resData = [[NSMutableData alloc] init];
    self.mRespData=resData;
    [resData release];
} 
```

并在下次加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T11:58:08.903

我认为简单的解决方案是这样的——“Safari 客户端存储和离线应用程序编程指南”，[https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/Introduction.html](https://developer.apple.com/library/archive/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/Introduction.html)

仅当您正在使用 HTML5 和 webview 制作应用程序时，到目前为止尚未测试此方法，因此它可能会起作用。

# xcode - Xcode 命令行构建失败并显示“无法读取权利”

> ID：10498018
> 
> 赞同：4
> 
> 时间：2012-05-08T11:50:10.857
> 
> 标签：xcode, jenkins, clang

我的 Jenkins（继续集成服务器）因错误而失败：

```
error: Failed to read entitlements from '/var/folders/gp/fxfq69kd26j160s85g6vjy6h0000gr/T/yMWJTWS2AJ/Payload/app.com.app' 
```

完整输出：

> 以下构建命令失败：CompileC /Users/jenkins/Library/Developer/Xcode/DerivedData/App-doozayqorsxatsbzlunnptqszxax/Build/Intermediates/rara.build/Production-iphoneos/rara.build/Objects-normal/armv7/RRArtworkView.o app /RRArtworkView.m 正常 armv7 目标-c com.apple.compilers.llvm.clang.1_0.compiler（1 失败）产品构建目录：/Users/jenkins/Library/Developer/Xcode/DerivedData/app-doozayqorsxatsbzlunnptqszxax/Build/Products /Production-iphoneos xcrun via /usr/bin/xcrun (xcrun) DEVELOPER_DIR = '/Developer' via '/usr/share/xcode-select/xcode_dir_path' 数据库键是：PackageApplication_ ***/Developer***_iphoneos 缓存版本为 '1' 在 '/var/folders/gp/fxfq69kd26j160s85g6vjy6h0000gr/T/xcrun_db' 中解决的查找：'/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/PackageApplication' 错误：无法从'/var/folders/gp/fxfq69kd26j160s85g6vjy6h0000gr/T/yMWJTWS2AJ/Payload/app.com.app' 构建“app”失败 构建步骤“执行外壳”将构建标记为失败

它从 IDE 构建良好，并将安装在设备上。

## 系统信息：

*   Xcode v4.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:54:05.113

相当神秘的信息：

> 未能读取权利[...]

是由 Xcode 未正确归档应用程序引起的，这通常是由以下原因引起的：

1.  将**“跳过安装”**设置为`NO`
2.  在构建阶段将头文件 (.h) 复制到公用文件夹

看问题：

### [Xcode 4（和依赖项）的编译、构建或存档问题](https://stackoverflow.com/a/5607376/89035)

对于这些问题的详细解释。

# excel - 多维数组存储/打印问题

> ID：10498022
> 
> 赞同：0
> 
> 时间：2012-05-08T11:50:15.757
> 
> 标签：excel, vba

我正在开发一个用于工作的解析器。基本上，我有一个 excel 文档，其中包含我需要解析并存储到多维数组中才能使用的数据行。

这是我到目前为止的代码：

```
Dim a 
Dim iRows As Long 
Dim i As Integer 
Dim aArray() As Variant 

a = Array(2,3,4,5,6,9,10,14,19,21,23,25,29,38) 
iRows = ActiveWorkbook.Sheets(1).UsedRange.Rows.Count
ReDim aArray(iRows, UBound(a))

For i = 2 To iRows + 1 
    For x = 0 To UBound(a) 
        aArray(i - 2, x) = ActiveSheet.Cells(i, a(i - 2)).Value 
    Next x 
Next i 
```

记住 和 的偏移量`i = 2`是`iRows + 1`忽略标题行

问题是，当我尝试输出它时，我发现所有行都是相同的，`aArray(0,1)`并且`aArray(1,1)`是相同的值，它们应该是来自 excel 文件不同行的不同值。

此外，我每行应该存储 14 列，但是当我尝试输出位置 9 之后的任何值时，我得到一个超出范围的错误，如下所示

```
ActiveSheet.Cells(1, 1).Value = aArray(10, 0)
ActiveSheet.Cells(1, 2).Value = aArray(11, 0) 
```

根据我用来指定要存储在主数组中的值的小数组，它们应该是 aArray 中包含的每个子数组的 14 个总位置。

有什么见解吗？

请记住，这是我的第一个真正的 VBA 脚本，所以如果我犯了错误，请耐心等待我来自 JS/PHP 背景，所以这对我来说有很大不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:12:13.237

您切换了 aArray 中的维度。在代码中，您重新调整并用 (count_of_rows_in_usedRang,count_of_elements_in_a) 填充 aArray，我想使用的 rang 只有 9 行，所以 aArray(10, 0) 超出范围，而 aArray(0,10) 不会。

我认为您问题第一部分的输出可能存在类似问题。如果不是：请张贴，Excel 表中的内容以及结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:07:54.097

如果您只想从工作表中读取数据，而忽略标题，那您就过于复杂了。像这样的东西会起作用：

```
Const intOffsetRow As Integer = 2

Dim rngUsedRange As Range
Dim varWksArray As Variant

Set rngUsedRange = ActiveWorkbook.Sheets(1).UsedRange

With rngUsedRange
    varWksArray = .Range(Cells(intOffsetRow, 1), Cells(.Rows.Count, .Columns.Count)).Value
End With

Set rngUsedRange = Nothing 
```

如果您不介意数组中有空白/空行/维度，则可以进一步简化：

```
Const intOffsetRow As Integer = 1

Dim rngUsedRange As Range
Dim varWksArray As Variant

Set rngUsedRange = ActiveWorkbook.Sheets(1).UsedRange

varWksArray = rngUsedRange.Offset(intOffsetRow, 0).Value

Set rngUsedRange = Nothing 
```

# php - 精简版模板 - 递增变量

> ID：10498025
> 
> 赞同：0
> 
> 时间：2012-05-08T11:50:34.167
> 
> 标签：php, template-lite

是否可以在 html 端增加一个变量？

我的意思是

`{$i++}`在模板精简版中不起作用

我想要的是，如果我是四的倍数，它必须添加一个`<li></li>`

```
 {foreach from=$books value=book}

 {/foreach} 
```

# php - 用于删除 SQL 行/删除文件的复选框

> ID：10498031
> 
> 赞同：0
> 
> 时间：2012-05-08T11:51:01.143
> 
> 标签：php, sql, delete-row

我可以成功地从数据库中提取数据，但是现在使用复选框方法删除特定行时遇到问题。

我已经使用了许多不同的教程，包括以前的帖子，但它仍然不存在。

这是我的代码：

```
 <div id="content">

    <h1>Post Bulletin</h1>

    <br />

    <form action="insert.php" method="post">
        <label for="title">Title</label>
            <br />
        <input type="title" name="title" id="file" required="required" placeholder="Bulletin Title" />
        <br />
        <br />
        <label for="bulletin">Bulletin</label>
            <br />
        <textarea id="bulletin" name="bulletin" id="bulletin" rows="10" cols="50" required="required" placeholder="Bulletin Message"></textarea>
        <br />
        <input type="submit" />
    </form>

    <br/ >
    <br/ >

    <h3>Current Bulletin Posts</h3>

    <?php 

        require('connect.php');

        $data = mysql_query("SELECT * FROM bulletins ORDER BY Date_Entered DESC")
            OR die("Can't access bulletins table. " . "<br />". mysql_error());

        while($info = mysql_fetch_array($data)) 
        {                             
            Echo "<br />" . "Delete: " . "<input name='checkbox[]' type='checkbox' id='checkbox'/>" . "<br />" . "<br />";
            Echo $info['Title'] . "<br />" . "<br />";
            Echo $info['Bulletin'] . "<br />" . "<br />";
            Echo "Posted at " . $info['Date_Entered'] . "<br />" . "<br />";
            Echo "<hr>";
        }
    ?> 
```

我已创建复选框，但无法处理删除。

我认为“if isset”声明就足够了吗？如何将 ID 分配给复选框数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:58:51.197

使用行 ID 作为复选框`value`，这就是将提交给 PHP 端的内容。

```
Echo "<br />" . "Delete: " . "<input name='delete[]' type='checkbox' value='" . $info['id'] . "' />" . "<br />" . "<br />"; 
```

现在，在 PHP 端，您将收到要删除的记录 ID 作为`$_POST['delete']`.

此外，您的复选框必须包含在表单中才能提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:57:37.903

首先，复选框应该在标签中。

之后，您需要将`value`属性设置为复选框，这将是该复选框的唯一键以及表格行的唯一键。

如果您使用 php 删除数据，那么您只需要检查选中的复选框数组并为每个数组元素触发删除查询（即除了您的表唯一键之外什么都没有）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:01:56.247

您可以使用 EXTJS 显示从数据库中提取的记录，然后只需添加以下代码即可删除所有选中的复选框行。

```
function delMethod(index)
{
try{
    var rowstoDel=new Array();
    var count=0;
    var recordsToDelete = new Array();
    for (var i=0; i <store2.getCount(); i++){
    var rec=store2.getAt(i);
    if (rec.get("MappingGrid")==index){
    recordsToDelete[recordsToDelete.length] = rec; 
    rowstoDel[count]=i;
    count++;      
    }
    }
for (var i=0; i <recordsToDelete.length; i++){
    store2.remove(recordsToDelete[i]);
    }
for (var j=rowstoDel.length-1;j>=0;j=j-1)
{
myData2.splice(rowstoDel[j],1);
}
}catch(e){alert("unable to delete")}
} 
```

# java - 使用 Maven 或 JBoss 工具在 Eclipse 上添加 JBoss AS 7 模块

> ID：10498032
> 
> 赞同：1
> 
> 时间：2012-05-08T11:51:11.463
> 
> 标签：java, maven, jboss7.x, jboss-tools

我正在将我的项目迁移到 JBoss AS 7，并且我已经阅读了一些关于它的模块的信息。我的问题很简单（我认为），我不知道如何在开发阶段包含这些模块。例如，我使用 hibernate，在 Eclipse 中，使用 JBoss Tools 和 JBoss AS 6，我只需要说项目将使用 JBoss 7 并且它们的所有“jar”都可用。但是使用 JBoss 7，hibernate-core 对我不可用。我知道我可以选择在我的 pom 上将休眠核心添加为“提供”，但是还有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:20:07.353

我会说在你的 pom 上添加 hibernate-core 作为“提供”并添加

```
Dependency: org.hibernate 
```

到你的`META-INF/MANIFEST.MF`或

```
<dependencies>
    <module name="org.hibernate" />
</dependencies> 
```

to`jboss-deployment-structure.xml`是要走的路。通过这种方式，您可以在运行时访问与 JBoss 捆绑的 Hibernate，而无需将它们包含在您的部署中。只要确保您使用与 JBoss 相同的 Hibernate 版本（JBoss AS 7.1.1 的 Hibernate 4.0.1）。另请查看[开发人员指南](https://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-JBossDeploymentStructureFile)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:37:15.470

看看这些链接：

*   API： http: [//mvnrepository.com/artifact/org.jboss.as/jboss-as-spec-api/7.1.1.Final](http://mvnrepository.com/artifact/org.jboss.as/jboss-as-spec-api/7.1.1.Final)

*   服务器提供的工件：http: [//mvnrepository.com/artifact/org.jboss.as/jboss-as-api/7.1.0.CR1](http://mvnrepository.com/artifact/org.jboss.as/jboss-as-api/7.1.0.CR1)

*   所有其他工件（我不确定哪个最适合您）： http: [//mvnrepository.com/artifact/org.jboss.as](http://mvnrepository.com/artifact/org.jboss.as)

# jquery - 如果使用 jquery 检查单选按钮，则启用输入字段

> ID：10498036
> 
> 赞同：6
> 
> 时间：2012-05-08T11:51:28.610
> 
> 标签：jquery, radio-button

我在 html 代码中有这个单选按钮：

```
<span><input type="radio" value="false" name="item[shipping]" id="item_shipping_false" checked="checked"><label for="item_shipping_false" class="collection_radio_buttons">No</label></span>

<span><input type="radio" value="true" name="item[shipping]" id="item_shipping_true"><label for="item_shipping_true" class="collection_radio_buttons">Yes</label></span> 
```

我有 1 个禁用字段，例如：

```
<input id="item_shipping_cost" class="currency optional" type="text" size="30" name="item[shipping_cost]" disabled="disabled"> 
```

我希望如果用户单击单选按钮中的选项**是**，则将 html 属性删除`disabled="disabled"`到最后一个输入字段，如果用户单击单选按钮中的选项**否**，则将该属性添加`disabled="disabled"`到最后一个输入字段

**我怎么能用jquery做到这一点？**

谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T11:59:11.850

你可以使用[removeAttr](http://api.jquery.com/removeAttr/)

```
 $('#item_shipping_true').click(function()
{
  $('#item_shipping_cost').removeAttr("disabled");
});

$('#item_shipping_false').click(function()
{
  $('#item_shipping_cost').attr("disabled","disabled");
}); 
```

[在JsFiddle](http://jsfiddle.net/Cp7GT/)中查看演示

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T12:00:38.887

```
$('input[name="item[shipping]"]').on('click', function() {
   if ($(this).val() === 'true') {
      $('#item_shipping_cost').removeProp("disabled");
   }
   else {
      $('#item_shipping_cost').prop("disabled", "disabled");
   }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T12:00:43.610

你想像这样使用 JavaScript：

```
 $('#item_shipping_false').change(function() {
      $('#item_shipping_cost').prop('disabled', false);
    });
    $('#item_shipping_true').change(function() {
      $('#item_shipping_cost').prop('disabled', true);
    }); 
```

这是您案例的完整[示例](http://jsfiddle.net/ZrGNr/2/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T12:07:10.113

这里有一个

# [演示](http://jsfiddle.net/Simplybj/Zha8W/1/)

. 我想这会对你有所帮助

# cocoa - 如何在 nsslider 移动时在 nsbox 中填充颜色？

> ID：10498037
> 
> 赞同：0
> 
> 时间：2012-05-08T11:51:31.120
> 
> 标签：cocoa

我想`NSBox`在滑块移动中填充颜色。我正在使用以下代码。

```
-(IBAction)slider1move:(id)sender {
    [self.box setFillColor:[NSColor colorWithCalibratedRed: ([self.slider1 floatValue])/255.0 green:0.0 blue:0.0 alpha:0.0]];   
} 
```

请纠正我。我的应用程序中有三个滑块，每个滑块对应于红色、绿色和蓝色。

如何根据滑块的当前值填充滑块移动框中的颜色。就像我的滑块显示值为 50 一样，如果它是红色的，则该框应该用红色填充一半。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:40:51.447

看看你的颜色，你设置了完全透明的颜色 - **alpha 为 0.0**，这就是你的颜色没有改变的原因。

将您的颜色更改为 alpha 1.0，如下所示：

```
[NSColor colorWithCalibratedRed: ([self.slider1 floatValue])/255.0 green:0.0 blue:0.0 alpha:1.0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T21:37:25.290

首先，确保您已满足`NSBox`的`setFillColor:`文档中列出的要求：

> 仅当接收方的框类型 ( `boxType`) 为`NSBoxCustom` 且其边框类型 ( `borderType`) 为时才起作用`NSLineBorder`。

假设这不是问题，快速猜测是您可能需要调用`setNeedsDisplay:`该框以使用新颜色重新绘制它。

# android - 如何将Android颜色类整数类型对象转换为人类可以理解的字符串

> ID：10498040
> 
> 赞同：0
> 
> 时间：2012-05-08T11:51:41.027
> 
> 标签：android

我想从 rgb(r,g,b) 创建一个随机颜色，并希望在 a 中显示它的名称`TextView`。

我的这段代码不起作用：

```
t.setText("the color is  "+Integer.toHexString(c.rgb(r, g, b))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:03:55.623

例如，如果您想打印`the color is GREEN`，那么我认为您必须编写自己的算法并设置一些阈值来定义您认为颜色何时从一个名称变为另一个名称（例如从绿色变为蓝色）。然后，您会将颜色代码传递给该算法并取回该颜色的名称。

编写这样的算法甚至不必那么复杂。您可以比较自定义颜色的基本颜色成分并找到主要成分。根据它占主导地位的程度，您可以找到您的阈值，从而找到您的颜色名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:16:24.453

[http://www.iam.uni-bonn.de/~alt/latex/rgb.txt](http://www.iam.uni-bonn.de/~alt/latex/rgb.txt)是一个颜色名称列表（它是 MIT 许可的 X11R6 的一部分，因此您可以将其包含在自己的代码中而不会过度有问题的法律限制）。您可以将其中的项目加载到 ArrayList 中，然后扫描查找您的颜色与列表中每个项目之间的距离，并使用最接近的项目的名称。

# java - 等轴测图绘制、生成

> ID：10498048
> 
> 赞同：0
> 
> 时间：2012-05-08T11:52:09.107
> 
> 标签：java, graphics, geometry

我正在制作一个等距游戏，但我只设法创建了一个之字形等距地图。我最初的想法是菱形，但我无法做到。

钻石：coobird.net/img/tile-diamond-good-order.png

之字形：coobird.net/img/tile-zigzag-compact.png

这是我的一些代码，向您展示正在发生的事情：

世界：

```
 public void chunkGenerate() {
    moduleX = ((ListManager.getTileWidth()*8));
    moduleY = ((ListManager.getTileHeight()*8));
    for (int x = 0; x <= width; x++) {
        for (int y = 0; y <= height; y++) {
            if ((x%moduleX) == 0) {
                if ((y%moduleY) == 0) {
                    chunkList.add(new Chunk(x,y));
                }
            }
        }
    }
          } 
```

块：

```
 public void Generate() {
    for (int x = 0; x < 8; x++) {
        for (int y = 0;y< 8; y++) {
            tileList.add(new Tile(location.getX()+(x*ListManager.getTileWidth()),location.getY()+(y*ListManager.getTileHeight()),0));
        }
    } 
} 
```

渲染：

```
 for (Chunk c : w.getChunkList()) {
            g2d = (Graphics2D) g.create();
            for (int i = 0; i<c.getTileList().size(); i+=2) {
                g2d.drawImage(test2, (c.getTileList().get(i).getLocation().getX()+c.getTileList().get(i).getOffset().getxOffset()), (c.getTileList().get(i).getLocation().getY()+c.getTileList().get(i).getOffset().getyOffset()+w.getvOffset()), this);
                g2d.drawImage(test2, (c.getTileList().get(i).getLocation().getX()), (c.getTileList().get(i).getLocation().getY()+w.getvOffset()), this);
            }
            for (int i = 1;i<c.getTileList().size(); i+=2) {
                g2d.drawImage(test2, (c.getTileList().get(i).getLocation().getX()), (c.getTileList().get(i).getLocation().getY()+w.getvOffset()), this);
                g2d.drawImage(test2, (c.getTileList().get(i).getLocation().getX()+c.getTileList().get(i).getOffset().getxOffset()), (c.getTileList().get(i).getLocation().getY()+c.getTileList().get(i).getOffset().getyOffset()+w.getvOffset()), this);

            }
        } 
```

我需要帮助将地图制作成菱形，而不是锯齿形。如果您需要有关代码的更多信息，请在下面发表评论。此代码的另一个错误是每两个图块有一个 1 像素宽的空间。我不知道为什么..我尝试调整偏移量，但没有帮助..当前偏移量：（Tile 构造函数）

```
 offset = new IsometricOffset(21,11); 
```

最接近没有空间的是 20,10 但仍然有一个很小的空间

这是一张照片：

[http://img845.imageshack.us/img845/6242/picbz.png](http://img845.imageshack.us/img845/6242/picbz.png)

谢谢您的帮助！编辑：显然屏幕上的两个图块实际上只是引擎中的 1 个图块。我正在努力修复它。

编辑：

改变并得到这个：img526.imageshack.us/img526/3121/test333.png

绘画：

```
 for (Chunk c : w.getChunkList()) {
            /*for (int i = 0; i<c.getTileList().size(); i++) {
                g2d.drawImage(test2, (c.getTileList().get(i).getLocation().getX()), (c.getTileList().get(i).getLocation().getY()+w.getvOffset()), this);
            }*/
            for (int i = 0;i<c.getTileList().size(); i++) {
                g2d.drawImage(test2, (c.getTileList().get(i).getLocation().getX()+c.getTileList().get(i).getOffset().getxOffset()), (c.getTileList().get(i).getLocation().getY()+c.getTileList().get(i).getOffset().getyOffset()+w.getvOffset()), this);

            }
        } 
```

（我尝试在没有偏移的情况下进行绘制，它绘制的内容与图片相同）生成：

```
 for (int x = 0; x < 8; x++) {
        for (int y = 0;y< 8; y++) {
            tileList.add(new Tile(location.getX()+(x*ListManager.getTileWidth()/2),location.getY()+(y*ListManager.getTileHeight()/2),0));
        }
        location.setX(location.getX()+ListManager.getTileWidth()/2);
        location.setY(location.getY()+ListManager.getTileHeight()/2);
    } 
```

实验后：

产生：

```
 public void Generate() {
    for (int x = 0; x < 8; ++x) {
        for (int y = 0;y< 8; ++y) {
            tileList.add(new Tile(location.getX()+(y*ListManager.getTileWidth()/2),location.getY()-(y*ListManager.getTileHeight()/2),0));
        }
        location.setX(location.getX()+ListManager.getTileHeight()/2);
        location.setY(location.getY()+ListManager.getTileWidth()/2);
    } 
} 
```

结果：这是我得到的最接近的结果：http: [//img814.imageshack.us/img814/3450/bombombom.png](http://img814.imageshack.us/img814/3450/bombombom.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:43:18.690

试着想象你的地图旋转了 45 度。

```
 (0, 3)
       (0, 2)        (1, 2)
(0, 1)        (1, 1)        (2, 2)
       (1, 0)        (2, 1)
              (2, 0) 
```

并且渲染周期必须是这样的：

```
x = 0, y = 100,
for (dx = 0; dx < 3; ++dx) {
    for (dy = 0; dy < 3; ++dy) {
        drawTile(x + dy * width / 2, y - dy * height / 2);
    }
    x += width / 2;
    y += height / 2;
} 
```

**UPD：工作证明。**

代码（actionscript，但算法没有区别）：

```
var x:Number = 100, y:Number = 100, 
    dx:Number, dy:Number, px:Number, py:Number,
    halfWidth:Number = 40, halfHeight:Number = 20,
    s:Sprite = new Sprite(),
    g:Graphics = s.graphics;

g.lineStyle(1, 0xffffff);
for (dx = 0; dx < 3; ++dx) {
    for (dy = 0; dy < 3; ++dy) {
        px = x + dy * halfWidth;
        py = y - dy * halfHeight;

        g.moveTo(px - halfWidth , py);
        g.lineTo(px, py - halfHeight);
        g.lineTo(px + halfWidth, py);
        g.lineTo(px, py + halfHeight);
        g.lineTo(px - halfWidth, py);
    }
    x += halfWidth;
    y += halfHeight;
}

addChild(s); 
```

结果：

![好看的瓷砖](../Images/0f6cc744edcd54a0cba1b939589cc218.png)

# c - 从线程运行时，来自套接字的 read() 挂起

> ID：10498049
> 
> 赞同：1
> 
> 时间：2012-05-08T11:52:15.120
> 
> 标签：c, sockets, pthreads

我正在尝试编写代理服务器，现在我想实现流水线。我遇到了一个问题，需要帮助。我检查了[这个](https://stackoverflow.com/questions/2896698/socket-read-hangs-for-a-while-when-there-is-no-data-to-read)问题，但我认为它不适用，因为我确实有要从套接字读取的数据。

主要思想如下。对于每个连接，我创建一个处理它的线程，对于这个连接中的每个请求，我想创建一个处理该请求的线程。到目前为止，我已经设法编写了第一部分的代码并且它工作正常（线程还处理连接的所有请求）。

现在，当我尝试从请求处理线程中读取套接字时，它会挂起。我用来读取数据的功能和以前一样（在工作版本中）。

```
void copydata(int from, int to, int len)
{
    char tbuff[BSIZ];
    int n;
    while (len > 0)
    {
        if ((n = read(from, tbuff, BSIZ)) <= 0) break;
        if (write(to, tbuff, n) < n) break;
        len -= n;
    }
} 
```

from、to 和 len 变量具有适当的值（我检查了它们）。有什么可以导致这种行为的吗？

PS：如果需要更多代码，请告诉我。

编辑

以下是获取 len 的方法：

```
int contentlength(char *header)
{
    int len = INT_MAX;
    char line[MAX_LINE];

    if (HTTPheadervalue_case(header, "Content-Length", line)) sscanf(line, "%d", &len);
    return len;
} 
```

调用 copydata（其中 activesocket 是打开套接字的函数）：

```
if ((srv = activesocket(host, portno)) < 0)
    {
        sprintf(reshead, "HTTP/1.1 503\r\nContent-Length: 12\r\nConnection: close\r\n\r\nNon-existent");
        write(cli, reshead, strlen(reshead));
    } else
    {
        sprintf(reqhead1, "%s %s HTTP/1.1\r\n", "GET", path);
        if (HTTPheadervalue_case(reqhead1, "Connection", result)) if (strcasecmp(result, "close") == 0) cli_terminate[cli] = TRUE;
        strcat(reqhead1, reqhead);
        write(srv, reqhead1, strlen(reqhead1));
        while (completed[cli] != id)
            ;
        copydata(cli, srv, contentlength(reqhead));
        parseResponse(&srv, cli);
        completed[cli] = (completed[cli] + 1) % ULONG_MAX;
    } 
```

编辑

一个示例请求标头如下：

```
Host: www.google.com
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-GB; rv:1.9.1.16) Gecko/20120421 Iceweasel/3.5.16 (like Firefox/3.5.16)
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-gb,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Proxy-Connection: keep-alive
Cookie: cookie content 
```

我也试图去掉 keep-alive 标志，但仍然发生同样的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:37:59.667

我猜这是你的问题（来自[`accept(2)`](http://kernel.org/doc/man-pages/online/pages/man2/accept4.2.html)）：

> 在 Linux 上，返回的新套接字不会`accept()`从***侦听***套接字继承文件状态标志。`**O_NONBLOCK**``**O_ASYNC**`

即，您需要明确地使每个新接受的套接字都成为非阻塞的。

# matlab - 如何在Matlab中找到矩阵> 0的元素？

> ID：10498052
> 
> 赞同：1
> 
> 时间：2012-05-08T11:52:22.523
> 
> 标签：matlab

我很好奇 - 是否有一个 Matlab 命令可以返回矩阵中大于 0 的元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T11:56:27.360

以下代码返回矩阵的所有正元素`A`：

```
A(find(A > 0)) 
```

或 Gunther Struyf 提出的简写形式：

```
A(A > 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T11:58:55.680

find 函数将返回非零元素的索引。

```
ind = find(A > 0); 
```

是你要找的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-17T11:54:27.823

或者专门为此目的设计的命令：'nonzeros'

```
nz_A = nonzeros(A); 
```

# .net - 在 C# 和 asp.net 中寻找关于多线程的良好资源

> ID：10498062
> 
> 赞同：-2
> 
> 时间：2012-05-08T11:53:14.307
> 
> 标签：.net, multithreading, concurrency

我需要使用 c# 深入学习多线程和并发。还有 asp.net 如何使用内置多线程来提高性能以及我们如何使用它来提高性能。

我正在寻找一本好书、文章或视频，主题是多线程和并发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:00:03.980

这是我在学习多线程概念时提到的幻灯片链接[http://www.cs.vu.nl/~tcs/cm/ 。](http://www.cs.vu.nl/~tcs/cm/)您可以在 asp.net 中搜索一些示例，但看看这个以了解多线程和并发的基础知识

# android - 如何在android中动态添加列表项？

> ID：10498063
> 
> 赞同：1
> 
> 时间：2012-05-08T11:53:16.097
> 
> 标签：android, android-listview

在我的 android 应用程序中，我想要一个简单的列表，当我添加项目时它最初应该是空白的，它将是我的根列表项目。此外，当我在该列表中添加更多项目时，所有项目都应该在该根列表项下，并且应该保留在该根列表下添加的项目数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:40:52.907

看看这个答案[listView 动态添加项](https://stackoverflow.com/questions/1998483/listview-dynamic-add-item/10296747#10296747)

在这段代码中，我们在运行时添加数据。

首先，我们将一个空的适配器设置为 listview，然后在运行时我们在按钮单击时添加新项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T11:58:33.863

如果您想要嵌套项目，那么您最好的选择是使用 ExpandableListView [http://developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

如果你想要不止一层的嵌套，那么我不相信有什么开箱即用的东西可以实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:43:34.010

只需使用 ArrayAdapter 来显示列表中的项目。当您需要添加项目时，只需将它们添加到数组并调用`notifyDataSetChanged();`

# java - 从 JavaScript 调用 Web 服务的特定方法

> ID：10498067
> 
> 赞同：0
> 
> 时间：2012-05-08T11:53:32.680
> 
> 标签：java, javascript, web-services

我是 Web 服务的新手，我需要从我的 Web 服务中调用特定的方法。我使用 NetBeans IDE 创建了一个 Web 服务，现在我需要使用 JavaScript 调用它。

```
function validateForm(frm)
{
document.forms[0].action="http://localhost:8084/Web_Service_Example/CircleFunctions?wsdl"
document.forms[0].method="get"
document.forms[0].submit()
} 
```

它在我的本地系统上正常运行。
现在我需要调用我的网络服务的方法

```
public class CircleFunctions {
public int sum()
{
int a = 20;
int b = 40;
int c = a+b;
return c;
}
} 
```

*如何调用`sum()`我的 CircleFunctions 类的方法。是否可以将参数发送到方法？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:29:24.107

看起来您正试图从 JavaScript 调用 SOAP。我通常不推荐这个。REST 架构更符合 JavaScript 的做事方式。但是，让我向您推荐以下[SO question](https://stackoverflow.com/questions/124269/simplest-soap-example-using-javascript)。

我的建议是让您使用 REST for Java -> JavaScript 和 SOAP for Java -> Java。

# html - Internet Explorer 9 中的 HTML5 视频像素错误

> ID：10498068
> 
> 赞同：1
> 
> 时间：2012-05-08T11:53:38.003
> 
> 标签：html, video, internet-explorer-9, pixel

我在 IE9 中使用 HTML5 视频时遇到了一些问题。

视频 (MP4) 正在播放，但似乎存在编码错误，因为它时不时地跳跃并在部分图像中显示几乎像超大像素一样的白色方块。

我的机器上没有这个问题，在我的 IE 中，但同事似乎有这个问题。我们安装了相同版本的IE。

我尝试添加`codecs="avc1.42E01E, mp4a.40.2"`代码，但没有解决问题。

有人知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:46:10.730

这似乎是转换过程中的一个问题。我尝试转换文件，相同的设置，但在不同的转换器中，这似乎解决了问题。因此，如果您在 IE 中有断断续续、奇怪的视频，请尝试再次转换它。:)

# perl - 默认情况下，请求图像文件（Mason）时会触发自动处理程序吗？

> ID：10498070
> 
> 赞同：1
> 
> 时间：2012-05-08T11:53:47.487
> 
> 标签：perl, mod-perl, mason

默认情况下，当我请求图像文件时 - 石匠处理程序会触发`autohandler`吗？只有`.html`文件被设置为由 mason 在配置文件中处理。我需要它来做一些后台任务，但我不希望图像文件本身被处理。请指教...

**更新**，我将尝试以下内容`autohandler`：

```
return -1 if $r->content_type && $r->content_type !~ m|^text/|i; 
```

并带有以下内容`apache2.conf`：

```
<FilesMatch "(.*)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T15:08:37.100

尝试使用 LocationMatch：

```
<LocationMatch "\.(css|html)$">
    SetHandler perl-script
    PerlHandler ...# it depends on your current configuration
</LocationMatch> 
```

您还说您不想处理图像，将这些图像文件放在另一个目录中并让默认处理程序为其提供服务：

```
<Location /images>
    sethandler default-handler
</Location> 
```

# python - Python中的类的`__dict__`

> ID：10498074
> 
> 赞同：3
> 
> 时间：2012-05-08T11:53:58.643
> 
> 标签：python, class

代码先行，

```
#Python 2.7

>>>class A(object):
       pass

>>>a1 = A()
>>>a2 = A()

>>>A.__dict__
dict_proxy({'__dict__': <attribute '__dict__' of 'A' objects>, '__module__': '__main__', '__weakref__': <attribute '__weakref__' of 'A' objects>, '__doc__': None}) 
```

**问题**

1.什么是`dict_proxy`和为什么使用它？

2.`A.__dict__`包含一个属性-- `'__dict': <attribute '__dict__' of 'A' objects>`。这是什么？是为了`a1`和`a2`吗？但是对象`A`有自己的`__dict__`，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T11:55:51.897

对于你的第一个问题，我引用 Fredrik Lundh 的话：[http](http://www.velocityreviews.com/forums/t359039-dictproxy-what-is-this.html) ://www.velocityreviews.com/forums/t359039-dictproxy-what-is-this.html ：

```
a CPython implementation detail, used to protect an internal data structure used
by new-style objects from unexpected modifications. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:16:15.903

对于你的第二个问题：

```
>>> class A(object):
       pass

>>> a1 = A()
>>> a2 = A()
>>> a1.foo="spam"
>>> a1.__dict__
{'foo': 'spam'}
>>> A.bacon = 'delicious'
>>> a1.bacon
'delicious'
>>> a2.bacon
'delicious'
>>> a2.foo
Traceback (most recent call last):
  File "<pyshell#314>", line 1, in <module>
    a2.foo
AttributeError: 'A' object has no attribute 'foo'
>>> a1.__dict__
{'foo': 'spam'}
>>> A.__dict__
dict_proxy({'__dict__': <attribute '__dict__' of 'A' objects>, 'bacon': 'delicious', '__module__': '__main__', '__weakref__': <attribute '__weakref__' of 'A' objects>, '__doc__': None}) 
```

这回答了你的问题了吗？

如果没有，请深入研究：[https ://stackoverflow.com/a/4877655/1324545](https://stackoverflow.com/a/4877655/1324545)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:21:23.673

dict_proxy prevents you from creating new attributes on a class object by assigning them to the `__dict__`. If you want to do that use `setattr(A, attribute_name, value)`.

a1 and a2 are instances of A and not class objects. They don't have the protection A has and you can assign using `a1.__dict__['abc'] = 'xyz'`

# animation - 将 CSS3 转换应用于 Safari 中的 SVG 元素

> ID：10498081
> 
> 赞同：3
> 
> 时间：2012-05-08T11:54:21.433
> 
> 标签：animation, css, safari, svg

我正在使用 SVG 构建卡通风格的街景，我想让云在场景中滚动。为此，我使用 setTimeout 或 requestAnimationFrame（取决于浏览器）来更新 SVG (x) 位置，但**iPad**上的 FPS 计数器因此从 30fps 下降到 7fps 。我再次尝试使用 SVG transform="translate(x, y)" 来查看性能是否有所提高。它没。

最后，我想我会尝试使用 CSS3 转换，并将其直接应用于 SVG 元素：

这在 chrome 和 firefox 中运行良好。但是 Safari（包括 iPad）似乎不接受在 SVG 上进行 css 转换。

这是一个已知的错误？或者有没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:33:00.663

好的，我不确定我是否 100% 正确，但似乎为任何类型的运动设置每帧变换的“x”值（尤其是在至少 5 层的复杂视差情况下）同时移动）是一个非常糟糕的主意。

同样经过大量研究，SVG1.1 似乎肯定不支持跨所有浏览器的 CSS3 转换。SVG 转换可以，但 CSS3 不行。

**最后修复这个解决方案：**我简单地将所有 x, y 位置重置为 (0, 0)，并使用*-webkit-transform: translate3d(x, y, z)*定位所有内容。（以及其他浏览器的变体）。

注意：即使是 2d 视差效果，我也使用 translate3d 并将 z 保留为 0。 translate3d 是硬件加速的，并且在 iPad 上具有明显的性能提升。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T18:52:07.197

我没有这个问题，你一定做错了什么。

工作示例：http: [//jsfiddle.net/pqyBJ/](http://jsfiddle.net/pqyBJ/)

# iphone - iphone中的Android图形密码表示？

> ID：10498088
> 
> 赞同：0
> 
> 时间：2012-05-08T11:54:43.037
> 
> 标签：iphone, authentication, ios4, ios5, passwords

我必须在 iPad 上进行图形密码验证，就像我们在 Android 设备上看到的一样。有人可以告诉我如何实现这一目标吗？

# c# - ASP.NET 会话变量命名约定

> ID：10498095
> 
> 赞同：0
> 
> 时间：2012-05-08T11:55:27.373
> 
> 标签：c#, asp.net, session, naming-conventions

在 ASP.NET 中命名会话变量是否有任何约定？

我想到的选项：

```
Session["myValue"] = "value";
Session["MyValue"] = "value";
Session["my_value"] = "value";
Session["MY_VALUE"] = "value"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:11:18.367

IMO，应用 DRY 原则很重要：

```
public class SessionVariables
{
    public const string MyStoredSessionVariable = "MyStoredSessionVariable";
    ...
} 
```

进而：

```
Session[SessionVariables.MyStoredSessionVariable] = ... 
```

我认为您使用哪种字符串文字并不重要，只要它足够独特并且您以一致的方式进行操作，就像其他人提到的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:12:42.873

没有任何正式的命名约定，但您可以考虑使用枚举，这样您就没有任何字符串文字，这 1) 可以更容易地记住键的名称，并且 2) 不会出现运行时错误，因为您的密钥名称中不能有错字。

例如

```
public enum SessionKey
{
   FirstName,
   LastName,
   BusinessId
} 
```

然后做：

```
 Session[SessionKeys.FirstName.ToString()] = "Rob"; 
```

或者自己创建一个 SessionHelper 类，使整个过程更加整洁：

```
public static class SessionHelper
    {
        public static void SetSessionKey(SessionKey sessionKey, object value)
        {
            HttpContext.Current.Session.Add(sessionKey.ToString(), value.ToString());
        }

        public static String GetSessionKey(SessionKey sessionKey)
        {
            return HttpContext.Current.Session[sessionKey.ToString()] as string;
        }
     }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T11:58:31.230

没有什么比得上公约了。它是由开发人员共享或由项目团队制定的约定，以便每个人都可以轻松使用。
就像您提到的那样，我的组织使用带有下划线的大写字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T11:58:21.413

CamelCase 是一个不错的选择。

会话["我的价值"] = "价值";

骆驼案例参考：

[http://en.wikipedia.org/wiki/CamelCase](http://en.wikipedia.org/wiki/CamelCase)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T12:03:15.090

**通常这些约定是由团队决定的，以保持整个代码的一致性，但如果假设您正在扩展或自定义现有代码，那么最好遵循现有的书面代码正在遵循。另一件事是，如果您想决定遵循哪种约定，通常会遵循常量大写命名约定，否则遵循骆驼表示法以提高可读性。**

# stack - 挖掘双栈细节

> ID：10498098
> 
> 赞同：0
> 
> 时间：2012-05-08T11:55:44.460
> 
> 标签：stack, ip, dig

我想查看具有双栈的机器的 ip 详细信息。我正在使用 dig 来执行此操作，使用选项 -A 和 -AAAA 来获取单独的答案，并且想知道是否没有选项可以仅通过一个查询获得两个结果。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:45:10.890

我设法找到了答案。您必须使用 -ANY 标志来获取 ipv6 和 ipv4 ip。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T12:01:51.593

这里有一个重复的问题：

[一键获取 IPv4 和 IPv6](https://stackoverflow.com/questions/23699306/get-ipv4-and-ipv6-with-one-command/32397501#32397501)

我给出了替代答案的地方：

```
dig hostname A hostname AAAA +short 
```

# c++ - 什么时候必须用 C 语言链接库？

> ID：10498099
> 
> 赞同：0
> 
> 时间：2012-05-08T11:55:51.303
> 
> 标签：c++, c

我是 C/C++ 新手，我有这个简单的问题。当我输入编译命令时，我不知道何时必须链接库。如果我是对的，我会添加参数 -l 后跟我要包含的库的名称。但是，如果我正在使用 C 的数学库，我是否添加了类似 -lmath 的东西来编译我的程序？或者只有当我在某处阅读时使用 C 外部库时才需要？什么是 C 外部库？谁能给我解释一下？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:03:06.920

大多数编译器在链接时默认包含语言的标准库。gcc 将包含 C 标准库 (libc)，g++ 将添加 c++ 标准库 (libc++)。在某些系统上，您可能会发现自己添加`-lm`了数学或`-lrt`实时扩展，但这些库通常会添加核心语言之外的功能（尽管有时非常常用的功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:04:50.240

~~数学是标准库的一部分，因此您不必链接它。其他一切都应该联系起来。~~（编辑：并非总是如此 - 检查下面的评论）

例如，如果您在代码中使用 printf、strcmp 和 pthread_create，则不必为 printf 和 strcmp 链接任何内容。只需包含正确的标题就可以了。但是 pthread_create 不是标准库的一部分，因此您必须链接到它 - -lpthread。

# c# - ActiveMQ - 反序列化 ActiveMQBytesMessage 消息

> ID：10498101
> 
> 赞同：2
> 
> 时间：2012-05-08T11:56:02.560
> 
> 标签：c#, activemq, nms

在我的工作中，我使用部分使用 c++ 和 C# 开发的应用程序。C++ 代码负责管理activeMQ（发送、接收消息）。

我开发了一个应用程序，通过订阅我的 C# 应用程序来监视主题中发送的消息。

因此，当向主题发送消息时，我的应用程序设法处理消息，但消息在 ActiveMQBytesMessage 中序列化。

我怎样才能反序列化这个对象？

```
public void OnMessage(IMessage message)
    {
        if (message != null)
        {
            var content = (message as ActiveMQBytesMessage).Content; // This is a byte[], I tried to deserialize using BinaryFormatter but it throws an exception, I can't write it here because I'm at home.
        }
    } 
```

我刚刚注意到 ActiveMQBytesMessage 从命名空间 Apache.NMS 继承了 IBytesMessage，但我没有看到任何可以帮助我反序列化消息的东西。

我使用最新版本的 ActiveMQ 和 NMS

[NB] 我的 C# 应用程序的目标是简单地监控 ActiveMQ 通道内发生的事情。这就是为什么我需要反序列化 ActiveMQBytesMessage 以便我可以在网格视图中显示对象的名称及其内容。

**[添加更多信息]**

这是我试图反序列化的内容。

```
var memoryStream = new MemoryStream((message as ActiveMQBytesMessage).Content);
var binaryFormatter = new BinaryFormatter();

memoryStream.Position = 0;

var deserializedMessage = binaryFormatter.Deserialize(memoryStream); 
```

反序列化时出现此错误：

**输入流不是有效的二进制格式。起始内容（以字节为单位）为：00-00-00-00-00-00-4F-8C-00-00-00-09-00-00-00-00-54 ...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:31:52.750

（我在这里做了一些假设，因为您没有指定某些细节。）您尝试使用的 BinaryFormatter 仅适用于 .NET 对象，不适用于 C++ 对象。最有可能的是，这些对象没有以平台中立的方式编码，而是采用特定于该特定编译器和平台的 C++ 格式。因此，您可以直接解析二进制代码以确定编码的对象，然后手动解码数据。如果这些都是不平凡的对象，这将是一项艰巨的任务。如果可能，请尝试让原始应用程序将对象编码为平台中立的格式，该格式可以在 C# 中轻松解析和实例化。（我更喜欢使用 TextMessage 和 XML 编码。）它不会 它不像现在显然正在进行的直接 C++ 到 C++ 编码/解码那样有效，但它将允许对消息流进行外部监控。当我这样做时，我将对象的完整类型名（包括命名空间）放在 NMSType 标头属性中。然后这告诉我消息内容的内部结构，我可以实例化正确的对象来解析消息中的数据。

如果所有这些都没有帮助，或者假设是错误的并且您使用的是托管 C++，那么这个问题/答案可能会对您有所帮助：[ActiveMQ NMS C# 对象消息使用哪种序列化方法？](https://stackoverflow.com/questions/1358078/what-serialization-method-is-used-for-an-activemq-nms-c-sharp-object-message)

# visual-studio-2010 - 使用 localhost 以外的 VS 进行调试

> ID：10498102
> 
> 赞同：0
> 
> 时间：2012-05-08T11:56:14.020
> 
> 标签：visual-studio-2010

我想通过 VS 调试我的应用程序，但是当应用程序应该运行时，它应该有如下 URL：http:localtesting.com 而不是 localhost。我的主机文件中已经有 localtesting.com，因此直接将该 url 放入浏览器会打开我的 IIS 默认目录页面。调试时如何让我的 VS 在该 url 上运行？我应该把那个网址放在哪里？ ![在此处输入图像描述](../Images/3ab59374a38ca5caa6c5a08698cbce63.png)

编辑：将 url 放入自定义 Web 服务器文本框中并运行我得到的解决方案： ![在此处输入图像描述](../Images/472327b43b41e75c607afa716231bd50.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:57:52.443

将其设置为“使用自定义 Web 服务器”并将您的 URL 放入该框中。

编辑：“无法调试..”错误消息可能是一个单独的问题。你能调试一个你可以创建只是为了测试的全新站点吗？

有几件事可能会导致该错误。例如，URL 重写模块：[无法在 Web 服务器上开始调试。无法启动 ASP.NET 调试 VS 2010、II7、Win 7 x64](https://stackoverflow.com/questions/4653236/unable-to-start-debugging-on-the-web-server-could-not-start-asp-net-debugging-v)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:32:16.187

正如@SteveHobbs 所说，将其设置为“使用自定义 Web 服务器并将您的 URL 放入该框中。就在该部分的下方，应该有另一个标记为“调试器”的部分。

勾选 ASP.NET 旁边的复选框并保存属性。

当您要调试时，请转到 VS 中的调试菜单并选择“附加到进程...”。

如果您使用的是 IIS，请查找名为“w3wp.exe”的进程并选择它。经过一番处理后，在您的 Web 应用程序上执行您需要的任何操作，您将看到调试器落在您的断点上等等。

# facebook - 如何获得facebook的全尺寸头像

> ID：10498103
> 
> 赞同：1
> 
> 时间：2012-05-08T11:56:17.717
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

如何从 Facebook 获取完整尺寸的个人资料图片？

[http://graph.facebook.com/](http://graph.facebook.com/) {ID}/picture?type=large 太小了。我想要更大的尺寸？那可能吗 ？我需要一种没有 FBML 的方法，因为它很快就会结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:46:06.840

您可以指定`width`和/或`height`Facebook 将返回小于或等于给定尺寸的图像。

`http://graph.facebook.com/{ID}/picture?width={size_in_pixels}&redirect=false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:11:19.807

`"redirect=true"`您必须在 url中传递另一个变量。这意味着，您的网址将像`http://graph.facebook.com/{ID}/picture?type=large&redirect=true`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T13:14:12.100

如果您有 user_photos 权限，您应该能够通过在“个人资料图片相册”中找到第一张图片来获取当前个人资料图片。这是 Kilian Valkhof 的一些[示例代码](http://kilianvalkhof.com/2011/javascript/full-size-profile-picture-via-the-facebook-javascript-sdk/)。

# java - 解析 SOAP 请求并修改数据

> ID：10498111
> 
> 赞同：-1
> 
> 时间：2012-05-08T11:56:41.413
> 
> 标签：java, netbeans, wsdl

我正在开发一个应用程序来向用户群发送短信/短信并接收他们的回复。我已经获得了一个*wsdl*，我用它来使用 netbeans IDE 向 sendms 消费服务。到目前为止一切都很好。
现在*的问题是*，当我收到一条短信时，一个肥皂请求被发布到我们服务器上的某个位置。请求-响应如下：

```
<a>http://www.csoft.co.uk/sms/api/sms_to_soap.htm</a> 
```

我检查了提供商的示例 API 部分，但他们没有任何类似的材料。
我的问题是**如何解析soap请求并发送相应的响应？**此外，我必须检查消息并过滤它们以查找令人反感/淫秽的内容。我有 netbeans 生成的 wsdl、xsd、java 类，但我不知道如何使用它们来实现目标。任何帮助或正确方向的指针将不胜感激。

谢谢卡利安

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T03:49:01.693

请搜索 Stackoverflow 和 Google，周围有很多方法。即使在这个问题中，只需在“相关”处检查右侧。

# php - 更新时出现 MS Access 错误“操作必须使用可更新查询”

> ID：10498112
> 
> 赞同：2
> 
> 时间：2012-05-08T11:56:45.920
> 
> 标签：php, mysql, sql, ms-access

我正在使用 PHP PDO 将 MS Access 系统迁移到 mySQL 系统中。一切正常，直到 PHP 停止读取 Access 表上的某些记录。此表有一个长整数数据类型的 ID 字段。我不知道为什么，但是 ID 从 0 到 16949 开始然后跳到 36573745 并在 36581986 结束。PDO 没有读取这些更高的数字，我不知道为什么。

无论如何要解决这个问题，我正在尝试更新这些较高的数字以继续较低 ID 的正常序列。但是 Access 无法理解我的查询，我也不知道如何让它运行。

这是查询

```
UPDATE Validador_Manut SET ID = (
    SELECT (Max(ID) + 1) FROM Validador_Manut WHERE ID < 100000
) WHERE ID > 100000 
```

它向我显示了这个错误`Uperation must use an updatable query`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:16:18.537

我想到了两件事。

**1.) 保留关键字**

如果您使用某些关键字作为表名或列名，您可能会遇到无法真正告诉您实际原因的神秘异常。

你的专栏`ID`在我看来很可疑。

一个简短的互联网搜索并没有为这个理论提供证据，但我相信我记得我在某处看到 ID 作为 MS Access 中的保留字。你可以尝试

*   重命名列
*   将列名写在尖括号中`[]` *（不推荐）*

**2.）这篇文章**看起来可能会有所帮助：[解决操作必须使用可更新查询错误](http://www.mikesdotnetting.com/Article/74/Solving-the-Operation-Must-Use-An-Updateable-Query-error)

> 在多用户环境中部署 Jet 4.0 数据库（由“Access”mdb 文件表示的实际数据库类型）时，只要打开数据库，就会创建一个 .ldb 文件。.ldb 文件包含详细信息，包括谁打开了文件，主要用于防止打开的记录被其他用户写入。
> 
> 在 ASP.NET 应用程序的上下文中，“用户”是谁将取决于平台：对于 XP Pro 机器，用户是 ASPNET 帐户。在 Windows Server 2003、2008 和 Vista 上，它是 NETWORK SERVICE 帐户。但是，如果您启用了 ASP.NET 模拟，则默认用户帐户将是 IUSR_machinename 或您应用的任何帐户。如果您不确定您的 ASP.NET 应用程序在哪个帐户下运行，Environment.UserName 将返回它。为了能够创建、写入和删除所需的 .ldb 文件，相关用户需要 .mdb 文件所在文件夹的 MODIFY 权限。
> 
> 要设置此权限，请右键单击 App_Data 文件夹（或您放置 mdb 文件的任何其他文件夹）并选择属性。查找安全选项卡。如果看不到它，则需要转到我的电脑，然后单击工具并选择文件夹选项...。​​然后单击查看选项卡。滚动到底部并取消选中“使用简单文件共享（推荐）”。返回“安全”选项卡，您需要将相关帐户添加到“组或用户名”框中。单击添加...，然后单击高级，然后单击立即查找。应列出适当的帐户。双击它以将其添加到组或用户名框中，然后检查权限中的修改选项。就是这样。你完成了。
> 
> 注意：此修复还将解决“Microsoft Jet 数据库引擎无法打开文件'（未知）'。它已被其他用户以独占方式打开，或者您需要权限才能查看其数据”错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:47:10.003

如果您只想将 > 100000 的 ID 降低到 16949 之后的连续数字，那么您为什么不简单地尝试一下呢？

```
UPDATE Validador_Manut SET [ID] = [ID]-36556795 WHERE ID > 100000 
```

36573745 - 36556795 = 16950

# javascript - Android：使用角度旋转图像的Javascript

> ID：10498116
> 
> 赞同：0
> 
> 时间：2012-05-08T11:57:00.103
> 
> 标签：javascript, android

我正在 android 中创建一个应用程序来使用 html 文件中的角度旋转图像。我需要 JavaScript 来旋转 html 页面中的单个图像。有人可以发布代码吗？

我的代码是

```
<div>
        <img id="Rose" src="Rose.jpg" style="margin:20px 80px;align:left"></img>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:02:36.093

查看 css3 的新[变换旋转](https://developer.mozilla.org/en/CSS/transform)方法：

```
<style>
#elem
{
 transform: rotate(20deg);
}
</style>
<div id='elem'>Hi</div> 
```

# sitecore - Sitecore 规则未将数据源设置为其他项目？

> ID：10498121
> 
> 赞同：1
> 
> 时间：2012-05-08T11:57:11.650
> 
> 标签：sitecore, sitecore6

这是我的规则

> 其中用户个人资料 fb_likes 字段包含 sitecore
> 
> 将数据源设置为 TestItem2

我已将此规则应用于模板标准值的子布局，但此规则永远不会更改数据源。

我也试过这种情况

> 其中为真（动作总是执行）。

但再次没有运气，

如果我将动作更改为

> 隐藏渲染

它工作正常。
我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:34:16.693

当您的子布局代码设置在上下文项上时，是否允许使用数据源？您可以通过多种方式实现这一目标。例如在基类中：

```
 protected string DataSource
    {
        get
        {
            var sublayout = Parent as SublayoutBase;
            return sublayout == null ? string.Empty : sublayout.DataSource;
        }
    }

    protected Item DataSourceItem
    {
        get
        {
            return string.IsNullOrEmpty(DataSource)
                       ? Sitecore.Context.Item
                       : Sitecore.Context.Database.GetItem(DataSource) ?? Sitecore.Context.Item;
        }
    } 
```

然后在您的子布局代码中使用 DatSourceItem 而不是上下文项来显示内容。我看到的另一种方法是：

```
 protected override void Render(HtmlTextWriter writer)
    {
        if (this.DataSourceItem != null)
            using (new Sitecore.Data.Items.ContextItemSwitcher(this.DataSourceItem ))
            {
                base.Render(writer);
            }
        else
        {
            base.Render(writer);
        }
    } 
```

即使代码是针对 Context 项编写的，使用它在其基类中继承它的所有子布局都将本机支持数据源。

# html - 如何在一条线上仅在左侧和右侧创建阴影？

> ID：10498130
> 
> 赞同：4
> 
> 时间：2012-05-08T11:57:54.537
> 
> 标签：html, css

我有一条线宽：15px；和2px的高度；
我的问题是，如何仅在右侧和左侧创建阴影？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:14:06.163

This fiddle has examples showing shadows only on:

*   Top and bottom
*   Left and right
*   Top

With that you should be able to do any kind of shadow.

[http://jsfiddle.net/rafaelchiti/5jdHW/](http://jsfiddle.net/rafaelchiti/5jdHW/)

The code:

```
div {
  margin-top: 20px;
  margin-left: 20px;    
  width: 100px;
  height: 100px;
}

.horizontal {
  box-shadow: 0px 15px 10px -11px rgba(0, 0, 0, .1) inset, 
              0px -15px 10px -11px rgba(0, 0, 0, .1) inset;  
}

.vertical {
  box-shadow: 0px 15px 10px -11px rgba(0, 0, 0, .1) inset, 
              0px -15px 10px -11px rgba(0, 0, 0, .1) inset;  
}

.one-side {
  box-shadow: 0px 15px 10px -11px rgba(0, 0, 0, .1) inset;
} 
```

Hope this help.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:09:44.903

试试这个（基于[您在上面的评论中提供的链接](http://blogtrottr.com/)）：

```
box-shadow: 2px 2px 5px 2px rgba(0, 0, 0, 1);
-webkit-box-shadow: 2px 2px 5px 2px rgba(0, 0, 0, 1); 
```

[您可以使用CSS3 生成器](http://css3generator.com/)将其调整为您喜欢的方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:41:11.877

***CSS Box Shadow*** 添加以下类以应用阴影。[检查这个 jsfiddle 示例](http://jsfiddle.net/libinvbabu/krhG7/)

```
.shadow {
  -moz-box-shadow:    3px 3px 10px 1px #000;
  -webkit-box-shadow: 3px 3px 10px 1px #000;
  box-shadow:         3px 3px 10px 1px #000;
} 
```

1.  **阴影的水平偏移量**，正数表示阴影在盒子的右边，负数表示阴影在盒子的左边。
2.  **阴影的垂直偏移量**，负数表示 box-shadow 将在 box 上方，正数表示阴影将在 box 下方。
3.  **模糊半径（可选）**，如果设置为 0，阴影会很锐利，数字越大，越模糊。
4.  **散布半径（可选）**，正值增加阴影的大小，负值减小大小。默认值为 0（阴影与模糊大小相同）。
5.  **颜色**十六进制颜色值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-12T10:40:24.153

```
 .box {
            height: 150px;
            width: 300px;
            margin: 20px;
            border: 1px solid #ccc;
        }

        .top {
            box-shadow: 0 -5px 5px -5px #333;
        }

        .right {
            box-shadow: -5px 0 5px -5px #333;
        }

        .bottom {
            box-shadow: 0 5px 5px -5px #333;
        }

        .left {
            box-shadow: 5px 0 5px -5px #333;
        }

        .all {
            box-shadow: 0 0 5px #333;
        } 
```

在身体里放..

```
 <div class="box top"></div>
    <div class="box right"></div>
    <div class="box bottom"></div>
    <div class="box left"></div>
    <div class="box all"></div> 
```

# python - 如何根据对应的值过滤字典键

> ID：10498132
> 
> 赞同：58
> 
> 时间：2012-05-08T11:57:59.387
> 
> 标签：python, dictionary

我有：

```
dictionary = {"foo":12, "bar":2, "jim":4, "bob": 17} 
```

我想遍历这个字典，但是遍历值而不是键，所以我可以在另一个函数中使用这些值。

例如，我想测试哪些字典值大于`6`，然后将它们的键存储在列表中。我的代码如下所示：

```
list = []
for c in dictionary:
    if c > 6:
        list.append(dictionary[c])
print list 
```

然后，在一个完美的世界中，`list`将包含所有值大于的键`6`。但是，我的`for`循环只是遍历键；我想将其更改为值！

任何帮助是极大的赞赏。谢谢你

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-08T11:59:57.827

```
>>> d = {"foo": 12, "bar": 2, "jim": 4, "bob": 17}
>>> [k for k, v in d.items() if v > 6] # Use d.iteritems() on python 2.x
['bob', 'foo'] 
```

* * *

我只想更新这个答案，以展示@glarrain 的解决方案，我发现自己现在倾向于使用它。

```
[k for k in d if d[k] > 6] 
```

这是完全交叉兼容的，不需要从`.iteritems`(`.iteritems`避免在 Python 2 上将列表保存到内存中，这在 Python 3 中已修复) 到`.items`.

@Prof.Falken 提到了这个问题的解决方案

```
from six import iteritems 
```

这有效地解决了交叉兼容性问题但需要您下载包`six`

但是，我不完全同意@glarrain 的观点，即这个解决方案更具可读性，这是有争议的，也许只是个人偏好，即使 Python 应该只有一种方法可以做到这一点。在我看来，这取决于情况（例如，您可能有一个很长的字典名称，您不想输入两次，或者您想给这些值一个更易读的名称或其他原因）

*一些有趣的时间：*

在 Python 2 中，第二种解决方案更快，在 Python 3 中，它们的原始速度几乎完全相同。

* * *

```
$ python -m timeit -s 'd = {"foo": 12, "bar": 2, "jim": 4, "bob": 17};' '[k for k, v in d.items() if v > 6]'
1000000 loops, best of 3: 0.772 usec per loop
$ python -m timeit -s 'd = {"foo": 12, "bar": 2, "jim": 4, "bob": 17};' '[k for k, v in d.iteritems() if v > 6]'
1000000 loops, best of 3: 0.508 usec per loop
$ python -m timeit -s 'd = {"foo": 12, "bar": 2, "jim": 4, "bob": 17};' '[k for k in d if d[k] > 6]'
1000000 loops, best of 3: 0.45 usec per loop

$ python3 -m timeit -s 'd = {"foo": 12, "bar": 2, "jim": 4, "bob": 17};' '[k for k, v in d.items() if v > 6]'
1000000 loops, best of 3: 1.02 usec per loop
$ python3 -m timeit -s 'd = {"foo": 12, "bar": 2, "jim": 4, "bob": 17};' '[k for k in d if d[k] > 6]'
1000000 loops, best of 3: 1.02 usec per loop 
```

然而，这些只是对小型字典的测试，在**大型**字典中，我很确定没有字典键查找 ( `d[k]`) 会`.items`更快。这似乎是这样的

```
$ python -m timeit -s 'd = {i: i for i in range(-10000000, 10000000)};' -n 1 '[k for k in d if d[k] > 6]'
1 loops, best of 3: 1.75 sec per loop
$ python -m timeit -s 'd = {i: i for i in range(-10000000, 10000000)};' -n 1 '[k for k, v in d.iteritems() if v > 6]'
1 loops, best of 3: 1.71 sec per loop
$ python3 -m timeit -s 'd = {i: i for i in range(-10000000, 10000000)};' -n 1 '[k for k in d if d[k] > 6]'
1 loops, best of 3: 3.08 sec per loop
$ python3 -m timeit -s 'd = {i: i for i in range(-10000000, 10000000)};' -n 1 '[k for k, v in d.items() if v > 6]'
1 loops, best of 3: 2.47 sec per loop 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-08T12:00:17.187

要获取值，请使用`dictionary.values()`

要获取键值对，请使用`dictionary.items()`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-08T12:01:34.873

使用`items`或`iteritems`在字典上。就像是：

```
list = []
for k, v in dictionary.iteritems():
  if v > 6:
    list.append(k)
print list 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-08T12:00:10.813

这个怎么样：

```
dictionary = {"foo":12, "bar":2, "jim":4, "bob": 17}
for val in dictionary.values():
    # do something 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-28T14:42:45.950

我认为最好的方法（考虑迁移到 Python 3）是

```
>>> mydict = {'foo': 12, 'bar': 2, 'jim': 4, 'bob': 17}
>>> [k for k in mydict if mydict[k] > 6]
['bob', 'foo'] 
```

“最佳”的标准是可读性。

（免责声明：我的回答基于 Alex Martelli 对其他问题的回答[https://stackoverflow.com/a/3744713/556413](https://stackoverflow.com/a/3744713/556413)和@jamylak 对这个问题的回答）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-08T12:03:37.107

这取决于您是否要修改字典（添加或删除项目）。如果没有，那么您可以尝试：

```
for value in dictionary.itervalues():  #this returns a generator
     print "do something with the value" 
```

或者，如果您修改字典，您应该遍历值的副本：

```
for value in dictionary.values():  #this returns a list of values
     print "do something with the value" 
```

如果您想要键和值，您可以使用`dictionary.iteritems()`或迭代对`dictionary.items()`

# asp.net - MVC 中的最后修改标头

> ID：10498135
> 
> 赞同：42
> 
> 时间：2012-05-08T11:58:15.267
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3

我最近遇到了 Last-Modified Header。

*   我如何以及在哪里可以将它包含在 MVC 中？
*   包含它有什么好处？

我想要一个示例，对于静态页面和数据库查询，如何将最后修改的标头包含在 mvc 项目中？

它与输出缓存有什么不同，如果是的话如何？

基本上，我希望浏览器清除缓存并自动显示最新的数据或页面，而不需要用户进行刷新或清除缓存。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-11T05:38:48.150

主要`Last-Modified`用于缓存。它被发回以获取您可以跟踪其修改时间的资源。资源不必是文件，而是任何东西。例如，从您拥有一`UpdatedAt`列的 dB 信息生成的页面。

它与每个浏览器在请求中发送的标头结合使用`If-Modified-Since`（如果它之前已收到`Last-Modified`标头）。

> 我如何以及在哪里可以将它包含在 MVC 中？

[Response.AddHeader](http://msdn.microsoft.com/en-us/library/ms524327%28v=vs.90%29.aspx)

> 包含它有什么好处？

为动态生成的页面启用细粒度缓存（例如，您可以使用 DB 字段`UpdatedAt`作为最后修改的标题）。

**例子**

为了使一切正常，您必须执行以下操作：

```
public class YourController : Controller
{
    public ActionResult MyPage(string id)
    {
        var entity = _db.Get(id);
        var headerValue = Request.Headers["If-Modified-Since"];
        if (headerValue != null)
        {
            var modifiedSince = DateTime.Parse(headerValue).ToLocalTime();
            if (modifiedSince >= entity.UpdatedAt)
            {
                return new HttpStatusCodeResult(304, "Page has not been modified");
            }
        }

        // page has been changed.
        // generate a view ...

        // .. and set last modified in the date format specified in the HTTP rfc.
        Response.AddHeader("Last-Modified", entity.UpdatedAt.ToUniversalTime().ToString("R"));
    }
} 
```

您可能必须在 DateTime.Parse 中指定格式。

# 参考：

*   [HTTP 状态码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)
*   [HTTP 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

**Disclamer** : 我不知道 ASP.NET/MVC3 是否支持你`Last-Modified`自己管理的。

**更新**

您可以创建一个扩展方法：

```
public static class CacheExtensions
{
    public static bool IsModified(this Controller controller, DateTime updatedAt)
    {
        var headerValue = controller.Request.Headers['If-Modified-Since'];
        if (headerValue != null)
        {
            var modifiedSince = DateTime.Parse(headerValue).ToLocalTime();
            if (modifiedSince >= updatedAt)
            {
                return false;
            }
        }

        return true;
    }

    public static ActionResult NotModified(this Controller controller)
    {
        return new HttpStatusCodeResult(304, "Page has not been modified");
    }   
} 
```

然后像这样使用它们：

```
public class YourController : Controller
{
    public ActionResult MyPage(string id)
    {
        var entity = _db.Get(id);
        if (!this.IsModified(entity.UpdatedAt))
            return this.NotModified();

        // page has been changed.
        // generate a view ...

        // .. and set last modified in the date format specified in the HTTP rfc.
        Response.AddHeader("Last-Modified", entity.UpdatedAt.ToUniversalTime().ToString("R"));
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-12T17:33:18.777

**更新：检查我的新答案**

* * *

***我如何以及在哪里可以将它包含在 MVC 中？***

内置`OutputCache`过滤器为您完成这项工作，并使用这些标头进行缓存。当您设置as或时，`OuputCache`过滤器使用`Last-Modified`标题。`Location``Client``ServerAndClient`

```
[OutputCache(Duration = 60, Location = "Client")]
public ViewResult PleaseCacheMe()
{
    return View();
} 
```

***包含它有什么好处？***

通过条件缓存刷新利用客户端缓存

***我想要一个示例，对于静态页面和数据库查询，如何将最后修改的标头包含在 mvc 项目中？***

此[链接](http://dotnetslackers.com/articles/aspnet/Cache-Exploration-in-ASP-NET-MVC-3-Part-1.aspx#s9-using-sqldependency-together-with-outputcache)包含足够的信息来试用示例。对于像 html 这样的静态页面，图像 IIS 将负责设置/检查`Last-Modified`标题，并使用文件的最后修改日期。对于数据库查询，您可以`SqlDependency`在`OutputCache`.

***输出缓存有什么不同，如果是的话如何？何时需要包含 Last-Modified Header 以及何时使用 outputcache？***

`OutputCache`是一个动作过滤器，用于在 ASP.NET MVC 中实现缓存机制。您可以使用不同的方式执行缓存`OutputCache`：客户端缓存、服务器端缓存。`Last-Modified`header 是在客户端完成缓存的一种方法。`OutputCache`过滤器在您设置为时使用`Location`它`Client`。

如果您使用客户端缓存（`Last-Modified`或`ETag`），浏览器缓存将在后续请求中自动更新，您无需执行 F5。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-30T22:24:10.820

## Last-Modified 与 OutputCache

**OutputCache**属性控制 IIS WebServer 上的输出缓存。这是供应商特定的服务器功能（请参阅[配置 IIS 7 输出缓存](http://www.iis.net/learn/manage/managing-performance-settings/configure-iis-7-output-caching)）。如果您对该技术的强大功能感兴趣，我还建议您阅读[ASP.NET MVC3 中的缓存探索。](http://dotnetslackers.com/articles/aspnet/Cache-Exploration-in-ASP-NET-MVC-3-Part-1.aspx)

**Last-Modified**响应头及其对应的**If-Modified-Since**请求头是验证缓存概念（部分[缓存控制](http://en.wikipedia.org/wiki/HTTP_caching)）的代表。这些标头是 HTTP 协议的一部分，在[rfc4229中指定](https://www.rfc-editor.org/rfc/rfc4229)

OutputCache 和validation 不是独占的，可以结合使用。

**什么缓存场景让我开心？**

像往常一样：这取决于。

在 100 次点击/秒的页面上配置 5 秒的 OutputCache 将大大减少负载。使用 OutputCache，可以从缓存中提供 500 个命中中的 499 个（并且不花费 db 往返、计算、渲染）。

当我必须很少立即更改服务时，验证场景可以节省大量带宽。特别是当您提供与精益 304 状态消息相比的大型内容时。但是，由于每个请求都会验证源中的更改，因此会立即采用更改。

## Last-Modified 属性实现示例

根据我的经验，我建议将验证场景（上次修改）实现为操作过滤器属性。（顺便说一句：[这](https://stackoverflow.com/questions/12776466/how-to-clear-cache-in-specified-controller-in-asp-mvc)是作为属性实现的另一个缓存场景）

**来自文件的静态内容**

```
[LastModifiedCache]
public ActionResult Static()
{
    return File("c:\data\static.html", "text/html");
} 
```

**动态内容示例**

```
[LastModifiedCache]
public ActionResult Dynamic(int dynamicId)
{
    // get data from your backend (db, cache ...)
    var model = new DynamicModel{
        Id = dynamivId,
        LastModifiedDate = DateTime.Today
    };
    return View(model);
}

public interface ILastModifiedDate
{
    DateTime LastModifiedDate { get; }
}

public class DynamicModel : ILastModifiedDate
{
    public DateTime LastModifiedDate { get; set; }
} 
```

**LastModifiedCache 属性**

```
public class LastModifiedCacheAttribute : ActionFilterAttribute 
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.Result is FilePathResult)
        {
            // static content is served from file in my example
            // the last file write time is taken as modification date
            var result = (FilePathResult) filterContext.Result;
            DateTime lastModify = new FileInfo(result.FileName).LastWriteTime;

            if (!HasModification(filterContext.RequestContext, lastModify))
                filterContext.Result = NotModified(filterContext.RequestContext, lastModify);
            SetLastModifiedDate(filterContext.RequestContext, lastModify);
        }

        if (filterContext.Controller.ViewData.Model is HomeController.ILastModifiedDate)
        {
            // dynamic content assumes the ILastModifiedDate interface to be implemented in the model
            var modifyInterface = (HomeController.ILastModifiedDate)filterContext.Controller.ViewData.Model;
            DateTime lastModify = modifyInterface.LastModifiedDate;

            if (!HasModification(filterContext.RequestContext, lastModify))
                filterContext.Result = NotModified(filterContext.RequestContext, lastModify);
            filterContext.RequestContext.HttpContext.Response.Cache.SetLastModified(lastModify);
        }

        base.OnActionExecuted(filterContext);
    }

    private static void SetLastModifiedDate(RequestContext requestContext, DateTime modificationDate)
    {
        requestContext.HttpContext.Response.Cache.SetLastModified(modificationDate);
    }

    private static bool HasModification(RequestContext context, DateTime modificationDate)
    {
        var headerValue = context.HttpContext.Request.Headers["If-Modified-Since"];
        if (headerValue == null)
            return true;

        var modifiedSince = DateTime.Parse(headerValue).ToLocalTime();
        return modifiedSince < modificationDate;
    }

    private static ActionResult NotModified(RequestContext response, DateTime lastModificationDate)
    {
        response.HttpContext.Response.Cache.SetLastModified(lastModificationDate);
        return new HttpStatusCodeResult(304, "Page has not been modified");
    }
} 
```

**如何启用全局 LastModified 支持**

您可以将 LastModifiedCache 属性添加到 global.asax.cs 的 RegisterGlobalFilters 部分，以在您的 mvc 项目中全局启用这种类型的缓存。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    ...
    filters.Add(new LastModifiedCacheAttribute());
    ...
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-11T20:36:09.413

请注意， outputcache 不是您在这里唯一的选择，实际上您可能不想以它的方式处理 last-modified 。澄清几个选项：

**选项 1 - 使用 [OutputCache]**

在这种情况下，框架将根据您指定的任何持续时间缓存响应正文。它将 Last-Modified 设置为当前时间，并将 max-age 设置为原始缓存持续时间到期之前的剩余时间。如果客户端使用 If-Modified-Since 发送请求，则框架将正确返回 304。一旦缓存的响应过期，则每次缓存新响应时都会更新 Last-Modified 日期。

*   优点：缓存发生在控制器级别（因此可以用于部分内容或不同最终 URL 上的相同缓存内容）。您可以更好地控制可缓存性 - 例如，HttpCacheability.ServerAndPrivate 允许您的服务器缓存内容，但不能缓存中间代理。
*   缺点：您无法控制最后修改。当您的缓存过期时，所有客户端都需要重新下载内容，即使它实际上并没有改变

**选项 2 - 在 Response.Cache 上指定设置**

asp.net 在 outputcacheattribute 之外还有另一层缓存，以 System.Web.OutputCacheModule 的形式，所有请求都通过它。这就像在您的应用程序前面的 HTTP 缓存一样。因此，如果您在不应用 OutputCacheAttribute 的情况下设置了合理的缓存标头，那么您的响应将被缓存在这里。例如：

`Response.Cache.SetLastModified(lastModifiedDate); Response.Cache.SetCacheability(HttpCacheability.Public); Response.Cache.SetExpires(DateTime.Now + timespan);`

基于上述情况，输出缓存模块将缓存您的内容，并且将从缓存中提供对同一 URL 的任何请求。带有 If-Modified-Since 的请求会得到 304。（您可以同样使用 ETags）。当您的缓存过期时，下一个请求将正常访问您的应用程序，但如果您知道内容没有更改，您可以返回与之前相同的 Last-Modified 或 ETag。缓存下一个响应后，后续客户端将能够延长其缓存寿命，而无需重新下载内容

*   优点：如果您有一种有意义的方式来确定最后修改或 ETag，那么您可以完全控制它，并且可以减少重复下载的数量。
*   缺点：缓存仅在请求/URL 级别。仅当您乐于设置 cache-control: public 时才有效

尽管此选项减少了不必要的内容下载的可能性，但它并没有消除它 - （服务器）缓存过期后的第一个请求将正常提供并导致 200，即使 304 本来是合适的。不过，这可能是最好的，因为它使缓存能够获取响应主体的新副本，该副本在之前过期时会被丢弃，因此可以直接从缓存中提供未来的请求。我相信 HTTP 缓存理论上可以比这更聪明，并使用 304 来延长自己的缓存寿命，但 asp.net 似乎不支持这一点。

（编辑以在上面的代码中用 SetExpires 替换 SetMaxAge - 似乎 IIS/asp.net 不会尊重 max-age 标头，除非您也 SetSlidingExpiration(true) 但该设置似乎阻止了我们想要的缓存）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T05:02:19.160

这是我对缓存和`OutputCache`.

我先回答你的第二个问题。

> 包含它有什么好处？

浏览器缓存从服务器返回的响应。缓存主要由三个标头控制：`Cache-Control`和`Last-Modified`（`Expires`还有其他类似的`ETag`也可以使用）。

标`Last-Modified`头告诉浏览器*资源*最后何时被修改。*资源*可以是*静态文件*或动态创建的*视图*。每当浏览器对该资源发出请求时，它都会与服务器进行检查*“嘿，我已经对此请求做出了响应，并且它的`Last-Modified`日期是某某……看到用户已经很累了……如果您返回 304 我”我很高兴使用我缓存中的响应，否则请快速发送您的新响应”*。（请注意，浏览器将`Last-Modified`服务器先前返回的值传递到名为 的新标头中`If-Modified-Since`）

理想情况下，服务器应该从标头中读取值，`If-Modified-Since`并且必须检查当前的修改日期，如果它们相同，那么它应该返回**304（未修改）**，或者它应该返回资源的新副本，再次传递当前修改日期标题`Last-Modified`。

优点是***浏览器缓存***。通过利用浏览器缓存，服务器可以避免创建重复响应，并且如果浏览器中的缓存响应看起来很旧，它还可以返回新响应。最终目的是***节省时间***。

> 我如何以及在哪里可以将它包含在 MVC 中？

**对于**图像、html 文件等静态资源，您无需担心设置方式**和**位置，因为**IIS 负责这项工作**。IIS 使用文件的最后修改日期作为标头值。****`Last-Modified`****

 ****对于通过 MVC 操作返回的 html 内容等动态页面，如何确定`Last-Modified`标头值？动态驱动的页面主要是数据驱动的，我们有责任决定之前返回的响应是否过时。

假设您有一个博客，并且您有一个页面，无论您是否显示文章的详细信息（而不是任何其他详细信息），那么页面的版本由上次修改日期或创建日期（如果文章尚未修改）决定文章。因此，您必须在提供视图*的相应操作中执行***@jgauffin回答的相同工作。**

 ***您在评论中问过*我应该在控制器中的每个操作中包含它*吗？**

如果您能够从动作中抽象出从数据库中读取最后修改日期的逻辑，那么您可以通过动作过滤器完成这项工作，避免在整个动作中重复代码。问题是**你将如何从动作中抽象出细节？**就像将表/列名称传递给属性？你必须弄清楚！

举个例子..

```
[LastModifiedCacheFilter(Table = "tblArticles", Column = "last_modified")]
public ViewResult Post(int postId)
{
   var post = ... get the post from database using the postId
   return View(post);
} 
```

下面显示的实现的伪代码（意味着我还没有测试过：）`LastModifiedCacheFilterAttribute`使用表/列来读取最后修改的日期，但它也可以是其他一些方式。这个想法是在`OnActionExecuting`我们进行检查并返回 304 的方法中（如果缓存仍然是新的），并且在`OnResultExecuted`我们正在读取/设置最新修改日期的方法中。

```
public class LastModifiedCacheFilterAttribute : ActionFilterAttribute
{
    // Could be some other things instead of Table/Column
    public string Table { get; set; }
    public string Column { get; set; }    

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
      // var lastModified = read the value from the passed Column/Table and set it here 

      var ifModifiedSinceHeader = filterContext.RequestContext.HttpContext.Request.Headers["If-Modified-Since"];

      if (!String.IsNullOrEmpty(ifModifiedSinceHeader))
      {
        var modifiedSince = DateTime.Parse(ifModifiedSinceHeader).ToLocalTime();
        if (modifiedSince >= lastModified)
        {
          filterContext.Result = new EmptyResult();
          filterContext.RequestContext.HttpContext.Response.Cache.SetLastModified(lastModified.ToUniversalTime());
          filterContext.RequestContext.HttpContext.Response.StatusCode = 304;
        }
      }

      base.OnActionExecuting(filterContext);
    }

    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
      // var lastModified = read the value from the passed Column/Table and set it herefilterContext.RequestContext.HttpContext.Response.Cache.SetLastModified(lastModified.ToUniversalTime());
      base.OnResultExecuted(filterContext);
    }
} 
```

**为什么不能输出缓存属性？**

根据我的分析，`OutputCache`属性不使用`Last-Modified`缓存机制。另一件事是它使用旧的页面缓存机制，使其难以定制/扩展。

**您真的需要在所有操作中实现*最后修改机制吗？***

真的不需要。您可以对需要*更多时间来创建此类响应的操作实施**最后修改机制*，并且需要更多*时间*将响应沿线路传输并到达浏览器。在其他情况下，我觉得这只是在所有操作中实施的开销，而且您必须在这样做之前*衡量收益。*另一个要点是，在许多情况下，页面的版本*不仅由单个表列决定，*还可能由许多其他因素决定，在这些情况下，实现这一点可能更复杂！

 *****关于一点`ETag`**

虽然问题是关于标题的，但在单击“**发布您的答案”**按钮之前，`Last-Modified`我应该先说一下。与（依赖于日期时间）头部头部（依赖于哈希值）相比，在确定浏览器中的缓存响应是否新鲜方面更准确，但实现起来可能有点复杂。IIS 还包括标题以及静态资源的标题。在实施任何这种机制之前，谷歌看看是否有任何图书馆可以帮助你！`ETag`**`Last-Modified``ETag``ETag``Last-Modified`**********

# java - Linux 命令没有给出在 java 程序中调用的输出

> ID：10498153
> 
> 赞同：1
> 
> 时间：2012-05-08T11:59:13.083
> 
> 标签：java, linux, runtime.exec

我正在尝试使用 java 代码在 linux 上调用非 linux 命令。该命令所需的库安装在我的 linux 机器上。这是我的 java 代码，它使用 Runtime.getRuntime().exec(); 调用命令；

该命令从图像文件中读取 borcode 并对其进行解码并在控制台上显示该值。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
public class demo {
    public static void main(String args[]){
        getcodes();
    }
    public void getCodes(){
        try 
        { 
            Process p; 
            String command[]=new String[3];
            command[0]="dmtxread ";
            command[1]="-n ";
            command[2]="/home/administrator/sandip/xyz.tif";
            System.out.println("Command : "+command[0]+command[1]+command[2]);
            p=Runtime.getRuntime().exec(command);

            System.out.println(p.waitFor());
            BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line=reader.readLine();
            System.out.print("Decoded      :- "+line);
        }
        }catch(IOException e1) {
            e1.getMessage();
            e1.printStackTrace();
        }catch(InterruptedException e2) {
            e2.getMessage();
            e2.printStackTrace();
        } 
    }
} 
```

当我在 linux 上运行这个 java 代码时，我得到了以下异常

部分异常如下：

命令：dmtxread -n /home/administrator/sandip/xyz.tif java.io.IOException：无法运行程序“dmtxread”：java.io.IOException：错误=2，java.lang.ProcessBuilder中没有这样的文件或目录。 start(ProcessBuilder.java:475) 在 java.lang.Runtime.exec(Runtime.java:610) 在 java.lang.Runtime.exec(Runtime.java:483) 在 leadertechbarcode.TwoDBarCodeReadHelper.getCodes(TwoDBarCodeReadHelper.java:53 )

有时程序在调用以下代码行 p=Runtime.getRuntime.exec(Command) 后挂起

当我复制代码打印的命令并在终端上运行它时，它运行正常。

请有这个问题的朋友告诉我。

有没有其他方法可以使用 java 调用此命令？

感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:27:26.800

您使用的`Runtime.exec(String[])`方法要求第一个元素是命令，后面的元素是单个参数。因此，如果其中有任何空格，它们将在传递给底层操作系统之前被转义或引用。

在您的情况下，`command[0]`包含命令的名称，后跟一个空格。这将导致系统搜索并执行名称中包含该空格的命令。找不到这个。

要解决此问题，您应该删除 中每个元素的内容周围的空格`command`，或者您可以手动连接它们并将它们作为单个字符串传递给`Runtime.exec(String)`方法。请注意，您的“-n”参数后面还有一个空格。您可能还需要删除那个。

# javascript - jquery.scrollTo.js 滑动不超过 5 个 div

> ID：10498154
> 
> 赞同：0
> 
> 时间：2012-05-08T11:59:16.890
> 
> 标签：javascript, jquery, css

这是我在哪里得到的代码，我找不到原始站点。

jquery-1.3.1.min.js

jquery.scrollTo.js

我在这个网站上运行它：http: [//www.atomicorchid.co.za/Atomic_Orchid/new/](http://www.atomicorchid.co.za/Atomic_Orchid/new/)

它只滚动5个div？

这是原始代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Scroll vertically</title>

<script type="text/javascript" src="js/jquery-1.3.1.min.js"></script>
<script type="text/javascript" src="js/jquery.scrollTo.js"></script>

<script>

$(document).ready(function() {

$('a.panel').click(function () {

    $('a.panel').removeClass('selected');
    $(this).addClass('selected');

    current = $(this);

    $('#wrapper').scrollTo($(this).attr('href'), 800);      

    return false;
});

$(window).resize(function () {
    resizePanel();
});

});

function resizePanel() {

width = $(window).width();
height = $(window).height();

mask_height = height * $('.item').length;

$('#debug').html(width  + ' ' + height + ' ' + mask_height);

$('#wrapper, .item').css({width: width, height: height});
$('#mask').css({width: width, height: mask_height});
$('#wrapper').scrollTo($('a.selected').attr('href'), 0);

}

</script>

<style>

body {
height:100%;
width:100%;
margin:0;padding:0;
overflow:hidden;
}

#wrapper {
width:100%;
height:100%;
position:absolute;
top:0;left:0;
background-color:#ccc;
overflow:hidden;
}

#mask {
    width:100%;
    height:500%;
    overflow:hidden;
    background-color:#eee;
}

.item {
    width:100%;
    height:20%;
    display:block;
    background-color:#ddd;
}   

.content {
    width:400px;
    height:300px;
    top:20%;
    margin:0 auto;
    background-color:#aaa;
    position:relative;
}

.selected {
    background:#fff;
    font-weight:700;
}

</style>
</head>
<body>

<div id="wrapper">

<div id="mask">

<div id="item1" class="item">
<div class="content">item1 <a href="#item1" class="panel">1</a> | <a href="#item2" class="panel">2</a> | <a href="#item3" class="panel">3</a> | <a href="#item4" class="panel">4</a> | <a href="#item5" class="panel">5</a> | <a href="#item6" class="panel">6</a></div>
</div>

<div id="item2" class="item">
<a name="item2"></a>
<div class="content">item2 <a href="#item1" class="panel">1</a> | <a href="#item2" class="panel">2</a> | <a href="#item3" class="panel">3</a> | <a href="#item4" class="panel">4</a> | <a href="#item5" class="panel">5</a> | <a href="#item6" class="panel">6</a></div>
</div>

<div id="item3" class="item">
<a name="item3"></a>
<div class="content">item3 <a href="#item1" class="panel">1</a> | <a href="#item2" class="panel">2</a> | <a href="#item3" class="panel">3</a> | <a href="#item4" class="panel">4</a> | <a href="#item5" class="panel">5</a> | <a href="#item6" class="panel">6</a></div>
</div>

<div id="item4" class="item">
<a name="item4"></a>
<div class="content">item4 <a href="#item1" class="panel">1</a> | <a href="#item2" class="panel">2</a> | <a href="#item3" class="panel">3</a> | <a href="#item4" class="panel">4</a> | <a href="#item5" class="panel">5</a> | <a href="#item6" class="panel">6</a></div>
</div>

<div id="item5" class="item">
<a name="item5"></a>
<div class="content">item5 <a href="#item1" class="panel">1</a> | <a href="#item2" class="panel">2</a> | <a href="#item3" class="panel">3</a> | <a href="#item4" class="panel">4</a> | <a href="#item5" class="panel">5</a> | <a href="#item6" class="panel">6</a></div>
</div>

<div id="item6" class="item">
<a name="item6"></a>
<div class="content">item6 <a href="#item1" class="panel">1</a> | <a href="#item2" class="panel">2</a> | <a href="#item3" class="panel">3</a> | <a href="#item4" class="panel">4</a> | <a href="#item5" class="panel">5</a> | <a href="#item6" class="panel">6</a></div>
</div>

</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:30:47.803

经过1小时的深入研究，才找到了答案。`overflow:hidden;`从`#mask`CSS 中删除。在[jsfiddle 示例](http://jsfiddle.net/libinvbabu/7Ss9S/1/)和您的网站上也可以正常工作。

# javascript - Dojo Dnd 问题：使用 JavaScript 将 Dnd 项目类型转换为 JSON

> ID：10498158
> 
> 赞同：0
> 
> 时间：2012-05-08T11:59:31.687
> 
> 标签：javascript, json, dojo, drag-and-drop

[我正在使用此站点](http://www.sitepen.com/blog/2008/06/10/dojo-drag-and-drop-1/)中的拖放操作来使用此示例：

我在同一页面中使用 Dnd 项目类型示例创建容器。像这样;

**源容器**

```
var catalog = new dojo.dnd.Source("catalogNode", {
    accept: ["inStock,outOfStock"]
});
catalog.insertNodes(false, [
    { data: "Wrist watch",        type: ["inStock"] },
    { data: "Life jacket",        type: ["inStock"] },
    { data: "Toy bulldozer",      type: ["inStock"] },
    { data: "Vintage microphone", type: ["outOfStock"] },
    { data: "TIE fighter",        type: ["outOfStock"] },
    { data: "Apples",             type: ["inStock"] },
    { data: "Bananas",            type: ["inStock"] },
    { data: "Tomatoes",           type: ["outOfStock"] },
    { data: "Bread",              type: ["inStock"] }
]);
catalog.forInItems(function(item, id, map){
    // set up CSS classes for inStock and outOfStock
    dojo.addClass(id, item.type[0]);
}); 
```

**目标容器**

```
var wishlist = new dojo.dnd.Source("wishlistNode", {
    accept: ["inStock","outOfStock"]
}); 
```

这是我在做什么；

```
dojo.connect(dojo.byId('JsonBtn'), 'onclick', function() {
        var catalogNode = document.getElementById("catalogNode");
        //Get all nodes in the assignRoleListContainer
        var container2 = catalogNode.getAllNodes();
        var results="";
        var catalog_arr = [];
        var len = container2.length;
        for(var i=0;i<len;i++){
            results = catalogNode.childNodes[i].childNodes[0].nodeValue;
            catalog_arr.push(results);
        }
        //Json
        var myJSON2 = "";
        myJSON2 = JSON.stringify({catalog: catalog_arr});
    }); 
```

我设法转换了 Json 中的所有数据；

```
{"catalog":["Life jacket","Toy bulldozer","Wrist watch","Apples","Bananas","Bread","Tomatoes","Vintage microphone","TIE fighter"]} 
```

但现在我想将项目转换为 json，但关于它们的类型，例如

**如果输入库存**

```
{"inStock":["Life jacket","Toy bulldozer","Wrist watch","Apples","Bananas","Bread"]} 
```

**如果输入 outOfStock**

```
{"outOfStock":["Tomatoes","Vintage microphone","TIE fighter"]} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:04:37.157

**源容器**

```
var catalog = new dojo.dnd.Source("catalogNode", {
    accept: ["inStock","outOfStock"]
});
catalog.insertNodes(false, [
    { data: "Wrist watch",        type: ["inStock"] },
    { data: "Life jacket",        type: ["inStock"] },
    { data: "Toy bulldozer",      type: ["inStock"] },
    { data: "Vintage microphone", type: ["outOfStock"] },
    { data: "TIE fighter",        type: ["outOfStock"] },
    { data: "Apples",             type: ["inStock"] },
    { data: "Bananas",            type: ["inStock"] },
    { data: "Tomatoes",           type: ["outOfStock"] },
    { data: "Bread",              type: ["inStock"] }
]);
catalog.forInItems(function(item, id, map){
    // set up CSS classes for inStock and outOfStock
    dojo.addClass(id, item.type[0]);
}); 
```

**目标容器**

```
var wishlist = new dojo.dnd.Source("wishlistNode", {
    accept: ["inStock","outOfStock"]
}); 
```

**带有 Id=JsonBtn 的按钮和 onClick 事件，将目标容器中的数据转换为 json**

```
dojo.connect(dojo.byId('JsonBtn'), 'onclick', function() {
    var target_container = wishlistNode.getAllNodes();
    var inStock_arr = [];
    var outOfStock_arr = [];
    for(var i=0;i<target_container.length;i++){
        if (hasClass("inStock", target_container[i].classList)){
            var inStock_results = target_container[i].childNodes[0].nodeValue;
            inStock_arr.push(inStock_results);                              
        }                           
        else if(hasClass("outOfStock", target_container[i].classList)){
            var permissions_results = target_container[i].childNodes[0].nodeValue;
            outOfStock_arr.push(outOfStock_results);
        }
    }
    var result={};
    result["inStock"]=inStock_arr;
    result["outOfStock"]=outOfStock_arr;
    alert(JSON.stringify(result));
}); 
```

**检查classList函数**

```
function hasClass(className, classList){
    for (var i=0; i<classList.length; i++){
        if(classList[i]==className){
            return true;
        }               
    }
    return false;
} 
```

**输出：（** *这个输出对我来说也很好）*

```
{
 "inStock":[
    "Wrist watch", "Life jacket", "Toy bulldozer", "Apples", "Bananas", "Bread"],
 "outOfStock":[
    "Vintage microphone", "TIE fighter", "Tomatoes"]
} 
```

首先，感谢 FireFox 团队的“FireBug”。它对调试和编程有很大帮​​助，没有它我很难找到解决方案。

如果需要任何解释，我很乐意提供帮助。

# android - 充气+竖屏

> ID：10498164
> 
> 赞同：0
> 
> 时间：2012-05-08T11:59:54.080
> 
> 标签：android, android-layout

我正在使用 LayoutInflater 生成我的布局。基本上我有一个按钮，当按下该按钮时，活动停止并开始另一个活动，在新活动中，用户填写一些字段并将结果发送回最后一个活动，因此我使用这些信息生成一个 TableRow。问题是，当我按 ctrl + f11（垂直屏幕）时，活动被破坏并重新创建，那么我该怎么做才能检索有关膨胀视图的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:48:05.897

如果您`android:configChanges="keyboardHidden|orientation"`在清单文件中向您的活动添加参数，当方向更改时，您的活动将不会被销毁/重新创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:09:13.670

`onSaveInstanceState()`在和中保留和恢复您的活动表单数据`onRestoreInstanceState()`。

请参阅[http://developer.android.com/guide/topics/fundamentals/activities.html#ConfigurationChanges](http://developer.android.com/guide/topics/fundamentals/activities.html#ConfigurationChanges)

# php - Php，如何确定一个类（不考虑子类！）是否有方法？

> ID：10498169
> 
> 赞同：0
> 
> 时间：2012-05-08T12:00:06.877
> 
> 标签：php, oop

我知道有一个 method_exists() 但即使该方法被继承它也说是真的。

```
class A
{
 public function eix()
 {
 }
}

class B extends A
{
} 
```

echo method_exists ('B', 'eix');

所以它是真的，但B级没有它。如何躲避这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:04:35.217

您需要使用反射来实现这一点。查看[`ReflectionMethod`](http://www.php.net/manual/en/class.reflectionmethod.php)类，您会找到[`getDeclaringClass`](http://www.php.net/manual/en/reflectionmethod.getdeclaringclass.php)方法。

```
$classname = 'B';
$methodname = 'eix';

$method = new ReflectionMethod($classname, $methodname);
$declaringclass = $method->getDeclaringClass();

if ($classname == $declaringclass->name) {
    // method was defined on the original class
} 
```

也就是说，关键是该类`B` *确实*有一个方法`eix`，因为它继承了所有`A`它没有重新定义的方法。我无法完全确定您需要知道方法在哪里定义的情况，但是这种技术允许您在必要时这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:05:09.633

使用[get_parent_class()](http://www.php.net/manual/en/function.get-parent-class.php)来识别父级，然后使用 method_exists() 反对它。

```
echo method_exists (get_parent_class('B'), 'eix'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:29:24.830

由于 B 类扩展了 A 类，因此它固有其所有方法，并且`method_exists()`始终返回 true。

问题是为什么您需要知道该方法是首先在 A 类还是 B 类中创建的？我认为没有理由需要这些信息。

如果这是一个问题，您可能应该从一开始就重新考虑您的架构设计。

但正如*马克贝克*解释的那样，至少可以发现该方法是否也存在于父类中，并不一定意味着它没有在子类中被覆盖。

```
if(method_exists(get_parent_class('B'), 'eix'))
{
  //Exist in parent class and was not first created in this. 
  //But still is inherent to this.
}
else 
{
  //Doesn't exist in parent and must been created in this.
} 
```

# perl - Perl 正则表达式捕获锚词之间的字符串

> ID：10498172
> 
> 赞同：3
> 
> 时间：2012-05-08T12:00:22.193
> 
> 标签：perl

我仍在清理 Oracle 文件，必须替换文件中的字符串，其中 Oracle 模式名称附加到文件中的函数/过程/包名称，以及函数/过程/包名称被双引号引起来. 更正定义后，我将更正与实际代码的其余部分一起写回文件。

我编写了代码来替换简单的声明（没有输入/输出参数）现在我正试图让我的正则表达式运行（注意：这篇文章是[这个问题](https://stackoverflow.com/questions/10416385/perl-script-to-modify-file)的延续）我试图清理的一些例子：

代替：

```
CREATE OR REPLACE FUNCTION "TRON2000"."DC_F_DUMP_CSV_MMA" (
p_trailing_separator IN BOOLEAN DEFAULT FALSE,
p_max_linesize IN NUMBER DEFAULT 32000,
p_mode IN VARCHAR2 DEFAULT 'w'
)
RETURN NUMBER
IS 
```

到

```
CREATE OR REPLACE FUNCTION DC_F_DUMP_CSV_MMA (
p_trailing_separator IN BOOLEAN DEFAULT FALSE,
p_max_linesize IN NUMBER DEFAULT 32000,
p_mode IN VARCHAR2 DEFAULT 'w'
)
RETURN NUMBER
IS 
```

我一直在尝试使用以下正则表达式来分隔声明，以便在我清除架构名称/将函数/过程/包的名称固定为不被双引号后重新构建。我正在努力将每个都放入缓冲区 - 这是我最近尝试将所有中间输入/输出抓取到它自己的缓冲区中：

```
\b(CREATE\sOR\sREPLACE\s(PACKAGE|PACKAGE\sBODY|PROCEDURE|FUNCTION))(?:\W+\w+){1,100}?\W+(RETURN)\s*(\W+\w+)\s(AS|IS)\b 
```

非常感谢任何/所有帮助！

这是我现在用来评估/编写更正文件的脚本：

```
#!/usr/bin/perl
use strict;
use warnings;
use File::Find;
use Data::Dumper;

# utility to clean strings
sub trim($) {
    my $string = shift;
    $string = "" if !defined($string);

    $string =~ s/^\s+//;
    $string =~ s/\s+$//;

    # aggressive removal of blank lines
    $string =~ s/\n+/\n/g;
    return $string;
}

sub cleanup_packages {
    my $file = shift;
    my $tmp  = $file . ".tmp";
    my $package_name;

    open( OLD, "< $file" ) or die "open $file: $!";
    open( NEW, "> $tmp" )  or die "open $tmp: $!";

    while ( my $line = <OLD> ) {

  # look for the first line of the file to contain a CREATE OR REPLACE STATEMENT
        if ( $line =~
m/^(CREATE\sOR\sREPLACE)\s*(PACKAGE|PACKAGE\sBODY)?\s(.+)\s(AS|IS)?/i
          )
        {

            # look ahead to next line, in case the AS/IS is next
            my $nextline = <OLD>;

            # from the above IF clause, the package name is in buffer 3
            $package_name = $3;

             # if the package name and the AS/IS is on the same line, and
             # the package name is quoted/prepended by the TRON2000 schema name
            if ( $package_name =~ m/"TRON2000"\."(\w+)"(\s*|\S*)(AS|IS)/i ) {
                # grab just the name and the AS/IS parts
                $package_name =~ s/"TRON2000"\."(\w+)"(\s*|\S*)(AS|IS)/$1 $2/i;
                trim($package_name);
            }
            elsif (    ( $package_name =~ m/"TRON2000"\."(\w+)"/i )
                    && ( $nextline =~ m/(AS|IS)/ ) )
            {

# if the AS/IS was on the next line from the name, put them together on one line
                $package_name =~ s/"TRON2000"\."(\w+)"(\s*|\S*)/$1/i;
                $package_name = trim($package_name) . ' ' . trim($nextline);
                trim($package_name);    # remove trailing carriage return
            }

            # now put the line back together
            $line =~
s/^(CREATE\sOR\sREPLACE)\s*(PACKAGE|PACKAGE\sBODY|FUNCTION|PROCEDURE)?\s(.+)\s(AS|IS)?/$1 $2 $package_name/ig;

            # and print it to the file
            print NEW "$line\n";
        }
        else {

            # just a normal line - print it to the temp file
            print NEW $line or die "print $tmp: $!";
        }
    }

    # close up the files
    close(OLD) or die "close $file: $!";
    close(NEW) or die "close $tmp: $!";

    # rename the temp file as the original file name
    unlink($file) or die "unlink $file: $!";
    rename( $tmp, $file ) or die "can't rename $tmp to $file: $!";
}

# find and clean up oracle files
sub eachFile {
    my $ext;
    my $filename = $_;
    my $fullpath = $File::Find::name;

    if ( -f $filename ) {
        ($ext) = $filename =~ /(\.[^.]+)$/;
    }
    else {

        # ignore non files
        return;
    }

    if ( $ext =~ /(\.spp|\.sps|\.spb|\.sf|\.sp)/i ) {
        print "package: $filename\n";
        cleanup_packages($fullpath);
    }
    else {
        print "$filename not specified for processing!\n";
    }
}

MAIN:
{
    my ( @files, $file );
    my $dir = 'C:/1_atest';

    # grab all the files for cleanup
    find( \&eachFile, "$dir/" );

    #open and evaluate each
    foreach $file (@files)
    {
        # skip . and ..
        next   if ( $file =~ /^\.$/ );
        next if ( $file =~ /^\.\.$/ );
          cleanup_file($file);
      };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:09:28.943

假设文件的全部内容以标量形式存储在 var 中，则以下内容应该可以解决问题。

```
$Str = '
CREATE OR REPLACE FUNCTION "TRON2000"."DC_F_DUMP_CSV_MMA" (
    p_trailing_separator IN BOOLEAN DEFAULT FALSE,
    p_max_linesize IN NUMBER DEFAULT 32000,
    p_mode IN VARCHAR2 DEFAULT w
)
RETURN NUMBER
IS

CREATE OR REPLACE FUNCTION "TRON2000"."DC_F_DUMP_CSV_MMA" (
    p_trailing_separator IN BOOLEAN DEFAULT FALSE,
    p_max_linesize IN NUMBER DEFAULT 32000,
    p_mode IN VARCHAR2 DEFAULT w
)
RETURN NUMBER
IS
';

$Str =~ s#^(create\s+(?:or\s+replace\s+)?\w+\s+)"[^"]+"."([^"]+)"#$1 $2#mig;

print $Str; 
```

# selenium - 如何检查所有输入的颜色

> ID：10498173
> 
> 赞同：0
> 
> 时间：2012-05-08T12:00:23.387
> 
> 标签：selenium, selenium-ide

如果某些输入颜色由属性样式“颜色”完成，而另一种输入由 CSS 样式完成，我如何检查所有输入的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:01:42.250

您可以使用 Java Robot 的[getPixelColor()](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#getPixelColor%28int,%20int%29)方法。

或者，首选方式，使用 JavaScript，[`window.getComputedStyle()`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)+[`getPropertyValue()`](https://developer.mozilla.org/en/DOM/CSSStyleDeclaration#Methods)

# c# - 我应该如何将错误消息传递给 top 方法

> ID：10498175
> 
> 赞同：1
> 
> 时间：2012-05-08T12:00:37.390
> 
> 标签：c#, asp.net-mvc

一个方法有一些方法，也有一些方法有其他方法。
我应该如何将错误消息传递给 top 方法以在窗口或对话框上显示消息？
它可能不是错误消息，而是警告消息或其他内容。
如果你能给我一个关于 ASP.NET MVC 的建议，那就太好了。在 ASP.NET MVC 中，操作方法是最重要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:07:54.657

一种可能性是使用该`TryXXX`模式：

```
public bool TryXXX(InputType input, out ResultType result, out string errorMessage); 
```

在你的控制器中：

```
public ActionResult Foo()
{

    ResultType result;
    out string errorMessage;
    if (!TryXXX(input, out result, out errorMessage))
    {
        ModelState.AddModelError("", errorMessage);
        return View();
    }

    // here you could use the result
    ...

} 
```

另一种可能性是将 传递`ModelState`给较低层，该层将负责向其添加错误消息，以便在您的控制器操作中，您只需要`ModelState.IsValid`在调用某些方法后进行检查。

另一种可能性是使用异常，但请记住，异常应该仅用于处理异常情况。应避免使用它们来处理业务验证。

确实有不同的方法，这完全取决于您到底要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:12:02.093

最简单的事情是，您可以仅在最高方法上进行一次 try catch。

关于 MVC 和 asp.net，您不想向最终用户显示错误。最好通过表单中的验证来防止警告。

最后一点，如果您确实需要向最终用户显示警告，那么：

*   创建一个名为字符串“WarningMessage”的公共变量
*   在流程开始之前重置值
*   将警告分配/附加到每个有警告的方法内的变量
*   检查 WarningMessage 在返回视图中是否具有值。
*   如果它有值显示消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:11:56.273

在你想要的地方抛出一个自定义异常

```
throw new Exception("Message"); 
```

默认情况下，异常会一直冒泡到堆栈顶部（即显示服务器错误页面），除非您在代码中的某处捕获它

```
try{
  //code
} catch (Exception e) {
  //use exception to display the message
} 
```

可以从任何子方法抛出异常并被父方法捕获

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:38:34.463

在内部方法中使用：

```
HttpContext.Current.AddError(new Exception("error Message")); 
```

在控制器方法中：

```
foreach (var item in HttpContext.AllErrors)
{
    //item is Exception
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-08T12:09:54.557

这可以使用 Javascript 轻松完成

```
var errorflag= false;
var msg='';
if(Failedcondition){
errorflag=true;
msg='Please verfiy first.';
}
if(SecondFailedCondition){
errorflag=true;
msg='Please verfiy first.';

}
else
{
other conditions
} 
```

# android - 如何更改动态创建的复选框的文本颜色

> ID：10498179
> 
> 赞同：0
> 
> 时间：2012-05-08T12:00:52.923
> 
> 标签：android

我想更改 android 中动态创建的复选框的文本颜色。

请指导

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T12:04:03.593

```
CheckBox chk = new CheckBox(this);
chk.setText("Testing");
chk.setTextColor(Color.BLUE); 
```

或从`color.xml`

```
chk.setTextColor(getResources().getColor(R.color.blue)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:07:44.313

这是我过去如何`CheckBox`动态添加到`RadioGroup`.

```
CheckBox mCheckBox = new CheckBox(this);
        //mCheckBox.setText(String.format("%s",header));
        //mCheckBox.setId(index1);
        //mCheckBox.setLayoutParams(lp);
      //    mCheckBox.setOnClickListener(this);
        //mCheckBox.setPadding(mCheckBox.getTotalPaddingLeft() + 10, 0, 0, 10);
        mCheckBox.setTextColor(Color.GREEN); 
```

在上面的代码中，你可以看到 CheckBox Text Color 是如何设置的，你也可以通过它的 id 来引用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:03:34.810

此代码段可能对您有所帮助

```
CheckBox mCheckBox= new CheckBox(this);
mCheckBox.setTextColor(R.color.textcolor); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-17T20:37:48.653

If you want to change text color for checkbox you need to do it last thing, after methods like: setText(), setListener...

```
try {
    mCheckBox.setTextColor(mContext.getResources().getColor(R.color.red, null));
} catch (NoSuchMethodError e) {
    Log.d(TAG, e.toString());
} 
```

Some old APIs will trigger NoSuchMethodError exception so it will be good to catch it. And don't forget to set your theme or go with null if so.

# java - 如何在 FTP 中只读取文件的更新部分？

> ID：10498180
> 
> 赞同：0
> 
> 时间：2012-05-08T12:00:54.530
> 
> 标签：java, ftp, ftp-client

我需要扫描日志文件。日志文件将位于 FTP 位置，因此我们将使用 FTPclient 来读取它。我的要求就像我只想从那里读取更新的信息 IE 假设日志文件在下午 12 点有 50 行，在下午 12.05 有 70 行。所以我的程序应该只返回更新的信息。简而言之，我看起来像 FTP 中的 RandomAccessFile 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:34:56.827

FTP 支持从给定位置重新启动传输（虽然以前并非所有服务器都支持它，但现在似乎除了古老的服务器之外的所有服务器都处理 REST 命令）。如果始终附加日志文件，则您知道它的初始/先前大小，您可以从该位置重新开始传输。

请注意，您使用的 FTP 客户端组件不支持从指定位置开始传输的功能。

# sql - 如何在将汇总保留在最后一行的同时对嵌套选择的结果进行排序？

> ID：10498183
> 
> 赞同：3
> 
> 时间：2012-05-08T12:01:18.603
> 
> 标签：sql, sql-server

如何将结果按卖家名称排序到以下示例中，同时将汇总保持在底部？

由于分组应用于嵌套`SELECT`我无法使用`ORDER BY`，并且由于分组未应用于顶层，因此我也无法使用[GROUPING](http://technet.microsoft.com/en-us/library/ms178544.aspx)。

[**单击此处查看 SQL Fiddle 中的工作示例。**](http://sqlfiddle.com/#!3/1de3d/15)

```
CREATE TABLE Sales 
(
        SellerID    INT
    ,   StoreID     INT
    ,   Price       MONEY
);

CREATE TABLE Sellers 
(
        SellerID    INT
    ,   Name        VARCHAR(50)  
)

INSERT INTO Sales VALUES 
    (1, 1, 100),
    (1, 1, 100),
    (1, 1, 100),
    (2, 2, 200),
    (2, 2, 200),
    (3, 2, 250),
    (3, 2, 250),
    (3, 2, 250),
    (3, 2, 250);

INSERT INTO Sellers VALUES
    (1, 'C. Thirdplace'),
    (2, 'A. Firstplace'),
    (3, 'B. Secondplace');

SELECT  s.Name          AS Seller_Name
    ,   x.TotalSales    AS Total_Sales
FROM 
(  
    SELECT      s.SellerID AS SellerID
            ,   SUM(s.Price) AS TotalSales
    FROM        Sales s 
    GROUP BY    s.SellerID 
    WITH ROLLUP
) x
LEFT JOIN   Sellers s 
ON          s.SellerID = x.SellerID; 
```

这会产生以下结果：

```
SELLER_NAME      TOTAL_SALES
---------------  -----------
C. Thirdplace        300
A. Firstplace        400
B. Secondplace      1000
(null)              1700 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:04:09.103

```
ORDER BY
  CASE WHEN seller_name IS NULL THEN 1 ELSE 0 END,
  seller_name 
```

# iphone - 如何更改 UITableView 中 SectionIndexTitles 的大小？

> ID：10498185
> 
> 赞同：0
> 
> 时间：2012-05-08T12:01:23.440
> 
> 标签：iphone, objective-c, ios4, xcode4.2

谁能告诉我，是否可以更改 UITableView 中 sectionIndexTitles 的默认大小？如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:06:55.717

```
 for(UILabel *aView in [tableView subviews]) 
    {
        NSLog(@"frame:%@",aView);
        if([[[aView class] description] isEqualToString:@"UITableViewIndex"]) 
         {

            aView.font=[UIFont fontWithName:@"Helvetica-Bold" size:18.0];

        }
    } 
```

您可以根据自己的需要对此进行自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:40:56.660

你需要实施

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

在您的 UITableViewDelegate 中，如此[处所述](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDelegate)

这是一个例子：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
  UIView *headerView = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 60)] autorelease];
  [headerView setBackgroundColor:[UIColor clearColor]];

  UILabel * headerLabel=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 60)];
  [headerLabel setBackgroundColor:HEXCOLOR(0x952039FF)];

  [headerLabel setTextColor:[UIColor whiteColor]];
  [headerLabel setShadowColor:[UIColor grayColor]];

  CGRect frame = headerLabel.frame;
  frame.origin = CGPointMake(20,frame.origin.y);
  headerLabel.frame = frame;

  [headerLabel setText:[self sectionTitles:section]];
  [headerView addSubview:headerLabel];
  [headerLabel release];

  return headerView; 
```

}

`sectionTitles`指的是返回部分标题的简单函数。

# xml - 如何在 DIV 中显示 XML 数据

> ID：10498188
> 
> 赞同：4
> 
> 时间：2012-05-08T12:01:34.813
> 
> 标签：xml, html

我想在 DIV 中显示 XML 数据。我的xml代码如下：

```
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don’t forget me this weekend!</body>
</note> 
```

我希望它完全像在 div 中一样显示，所有行间距和 xml 标签都完全一样。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:11:10.720

所以我猜你的问题是你试图将 XML 代码放入 DIV，而浏览器试图将 XML 标记解释为 HTML 标记？您可以通过将 XML 代码中的所有“<”和“>”替换为 HTML 特殊字符 > 来防止这种情况发生。和<。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T11:21:40.103

在 and 旁边`<`，`>`您还需要替换双引号和 & 号。

```
function htmlEntities(str) {
    return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
} 
```

这会成功的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-03T17:09:51.500

根据您需要的跨浏览器程度，使用一个`<xmp>`或多个`<pre><code>`标签以及在引号之间表示您的 XML 的字符串可能就足够了：

```
<div>
  <xmp>
  <Status>
    <Code>0</Code>
    <Text>Success</Text>
  </Status>
  </xmp>
</div>

<div>
  <pre><code>
  "<Status>
    <Code>0</Code>
    <Text>Success</Text>
  </Status>"
  </pre></code>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-26T14:27:06.220

我想出了一种方法来直观地保持 xml 原始格式，以在显示 xml 标记时保持白色间距和换行符。这应该会增强此处给出的答案。我使用 Tim Dev 的方法将 xml 标签的字符串替换为 html 文本可见元素。然后使用我由 Vadim Kiryukhin 找到的一个名为 [vkBeautify](https://code.google.com/p/vkbeautify/)的类，预处理后的 xml 会出现在目标文本区域中。

```
 function addXMLToTextArea(xml) {
            var replaceArgs =  htmlEntities(xml); 
            document.getElementById('viewXML').value=vkbeautify.xml(xml, 4);
        }

        function htmlEntities(str) {
           return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-13T13:34:11.723

如果您将您的 HTML 序列化为 XHTML 并使用*Content-Type*（`application/xhtml+xml`然后您应该这样做）提供它，那么解决方案将有两个方面：

首先，您可以创建一个*CDATA 转义部分*，它告诉任何不在 HTML5 模式下解析的 XML 或 HTML 解析器（这就是为什么序列化为 XHTML 并作为 服务很重要的原因`application/xhtml+xml`），以完全忽略中间的内容`<![CDATA[`（`]]>`实际上不是完全解析它，只是通过它）：

```
<![CDATA[ cr<'az>y text you w</>ant to display verbatim. ]]> 
```

所有这些都是为了让你使用那些特殊字符，否则它们会被认为是标记。它只是让文本“落空”。

其次，您需要将此*CDATA 部分*放在一个`<pre></pre>`元素中。这将负责保持 XML 的格式不变（您可能还想添加一个`<code></code>`元素，根据您的用例，这可能会使您的代码在语义上更合理）。如果您忽略它，那么您想要显示的文本将与`<span>`元素的样式一起显示，即作为纯内联文本，符合流程。这就是，为什么一个简单的`div`围绕它，是不够的。

以下是一个片段，我刚刚测试成功。请注意，我已经留下了缩进，就像在我的源代码中一样，强调重要的是获取内容，将其包含在`pre`元素中，脱离缩进并按照您在此处看到的方式放置，否则所有文本前的空格将保留在每行的左侧，因为结果将是逐字记录的内容：

```
 <div>
          <pre><![CDATA[
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don’t forget me this weekend!</body>
</note>]]>
          </pre>
        </div> 
```

一个完全不同的选择是实体转义所有定义标记的字符。最重要的是，这些是`<`并且`>`需要分别表示为`&lt;`和`&gt;`。有独立的工具可以做到这一点，但也有一些文本编辑器插件可以做到这一点。然而，这需要额外的处理步骤并且会使事情复杂化。但是您仍然需要`<pre>`文本周围的包装器。对某些人来说，积极的方面可能是他们不需要序列化为 XHTML。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-06T04:30:11.307

将 XML 内容[替换为“<”和“>”](https://stackoverflow.com/a/10498334/6349551)到 pre 标记内以显示美观：

`<pre lang="xml">+xml_content+</pre>`

# sql-server - 在 SQL Server Management Studio 中禁用右键单击脚本更改表

> ID：10498196
> 
> 赞同：71
> 
> 时间：2012-05-08T12:02:12.553
> 
> 标签：sql-server, ssms, alter-table

我想将一个表编写为 Alter to a New Query Editor Window。但是这个选项被禁用了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-08T12:06:20.317

使用 SQL Server Management Studio 中的“设计”功能为您生成 ALTER 脚本：

*   右键单击要更改的表并选择设计。
*   添加新列、更改字段类型、将字段设置为是否接受 NULLS，等等。
*   完成后，单击“生成更改脚本”工具栏按钮（或右键单击任何列或空白区域）。这个按钮看起来像一个盘旋在一张卷曲的纸上的软盘
*   将结果保存到文本文件

根据您设置 SSMS 选项的方式，如果更改需要删除并重新创建表，则该选项最初可能不可用。要更改此选项，请在工具菜单上单击选项，展开设计器，然后单击表和数据库设计器。选中或清除阻止保存需要重新创建表的更改复选框。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-04-04T10:31:56.733

1) 右键单击​​要更改的表并选择设计

2) 添加新列，更改字段类型，将字段设置为是否接受 NULLS，等等。

**重要提示：**现在不要保存您的更改

3) 右键单击​​任何列或空白区域，您将看到选项 Generate Change Script 现在可用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-03T17:07:36.520

在 SQL Server Management Studio 2016 中，工具栏按钮图标已更改。查看突出显示的新图标。

[![生成更改脚本的新图标](../Images/c60017c9cf3f396ee159109e7f2de3c0.png)](https://i.stack.imgur.com/iQOPV.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-11T05:39:51.910

1.  在表设计器中对表进行未保存的更改后，您可以访问此对话框。在表设计器菜单上，单击生成更改脚本。

2.每次保存时自动生成更改脚本如果选中，则在您将更改保存到表时，将出现“保存更改脚本”对话框。

**是** 调出保存对话框，您可以在其中选择文本文件的位置。

**否** 取消更改脚本的创建。

# android - Android中的实时数据可视化

> ID：10498198
> 
> 赞同：3
> 
> 时间：2012-05-08T12:02:20.457
> 
> 标签：android, data-visualization

我正在研究音频 vu 表，我想得到如下图所示的内容，并实时显示音频幅度。

我知道如何获取每个通道的音频幅度，但我不确定如何足够快地显示彩色矩形。

我的第一个想法是`View`为每个矩形设置一个背景颜色，并根据幅度显示/隐藏它。

有人已经试过了吗？每 50 或 100 毫秒显示一次幅度是否足够快？

实现这一目标的最快方法是什么？

谢谢

![在此处输入图像描述](../Images/47a57c079ef54aeb81217da4b270a879.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:17:19.300

因此，您想制作与矩形一样多的视图并更改它们的可见性？不要那样做。你的布局里面会一团糟。而是制作一个自定义视图并覆盖 onDraw()。在 onDraw 中，您使用 canvas.drawRect() 来绘制矩形。通过这种方式，您将轻松获得每秒 30-60 帧的速度。这是一个简单且不完整的示例，但应该让您走上正轨。

```
private class AmplitudeView extends View {

    private int mWidth;
    private int mHeight;
    private Paint mRectPaint;

    public AmplitudeView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mRectPaint = new Paint() {
            {
                setStyle(Style.FILL);
            }
        };
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mWidth = w;
        mHeight = h;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int numRects = 10;
        int red = 255;
        int green = 0;
        int incr = 255/numRects;
        for (int i = 0; i< numRects;i++){
            //TODO calculate color based on amplitude
            mRectPaint.setColor(Color.argb(0xff, red, green, 0));
            //TODO calculate rectangle
            canvas.drawRect(r, mRectPaint);
            red-=incr;
            green+=incr;
        }
    }
} 
```

# apache - 将子域重定向到另一个子域

> ID：10498200
> 
> 赞同：0
> 
> 时间：2012-05-08T12:02:30.627
> 
> 标签：apache, .htaccess, redirect, subdomain

我想知道如何将子域重定向到另一个子域以及不同的域名

例如

我想重定向子域

```
forum.example.com 
```

至

```
forum.example.net 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:28:12.047

这段代码应该适合你。您需要将重定向添加到您的 .htaccess 文件。

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^example.com [nc]
rewriterule ^(.*)$ http://www.example.net/$1 [r=301,nc 
```

另一个不错但懒惰的方法是使用以下链接，为您生成代码[htaccesss 生成器](http://www.htaccessredirect.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:52:27.677

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^forum\.example\.com$ [NC]
RewriteRule ^ http://forum.example.net%{REQUEST_URI} [R,L] 
```

# java - 未找到类错误的android致命异常

> ID：10498203
> 
> 赞同：1
> 
> 时间：2012-05-08T12:02:41.897
> 
> 标签：java, android, authentication, cifs, jcifs

在我提出的上一个问题中，我放置了所有必要的 catch 语句来查找异常。这是另一个。我发布的问题有例外，因为通过查看它们很容易找到错误。因为我是 android 新手，所以我发布了这类问题。请参阅下面的代码。它说没有类发现异常。但我已经加载了 jcifs 包 jcifs-1.3.17.jar。我不明白为什么抛出异常。请看下面：

代码：

```
package com.android.accesspc;
import jcifs.smb.NtlmPasswordAuthentication;
import jcifs.smb.SmbFile;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class userpassActivity extends Activity
{

    EditText userName,userPassword;
    String uName,uPassword,IP,MAC;
    void help(int x)
    {
        userName=(EditText)findViewById(R.id.userpassUsername);
        uName = userName.getText().toString();
        userPassword=(EditText)findViewById(R.id.userpassPassword);
        uPassword = userPassword.getText().toString();
        String url= "smb://" + IP + "/";
        NtlmPasswordAuthentication auth;
        auth= new NtlmPasswordAuthentication(null,uName, uPassword);
        try
        {
            SmbFile a[]=(new SmbFile(url, auth)).listFiles();
            switch(x)
            {
                case 0:
                            Intent intent=new Intent("com.android.accesspc.VIEW");
                            intent.putExtra("IP",IP);
                            intent.putExtra("USERNAME",uName);
                            intent.putExtra("PASSWORD",uPassword);
                            startActivity(intent);  
                            break;
                case 1:
                            //code to switch off the system by checking users log on
                            //need to communicate with darshan's program
                default:
                            finish();
            }
        }
        catch(Exception e)
        {
            Toast.makeText(this,"Username and password is invalid OR",Toast.LENGTH_SHORT).show();
            Toast.makeText(this,"Sytem may be busy OR",Toast.LENGTH_SHORT).show();
            Toast.makeText(this,"Network error",Toast.LENGTH_SHORT).show();
            Toast.makeText(this,"TRY AGAIN!!",Toast.LENGTH_SHORT).show();
        }
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.userpass);
        final Bundle extras = getIntent().getExtras(); 
        if(extras !=null)
        {
            //values from previous activity
            IP = extras.getString("IPfromMacIp");
            MAC = extras.getString("MACfromMacIp");
        }
        Button send=(Button)findViewById(R.id.userpassSendButton);
        send.setOnClickListener(new 
                View.OnClickListener()
        {
            public void onClick(View v) 
            {
                if(extras !=null)
                {
                    help(0);
                }
            }
        });
        Button end=(Button)findViewById(R.id.userpassEndButton);
        end.setOnClickListener(new 
                View.OnClickListener()
        {
            public void onClick(View v) 
            {
                if(extras !=null)
                {
                    help(1);
                }
            }
        });
    }
} 
```

例外：

```
05-08 17:17:42.905: E/AndroidRuntime(398): FATAL EXCEPTION: main
05-08 17:17:42.905: E/AndroidRuntime(398): java.lang.NoClassDefFoundError: jcifs.smb.NtlmPasswordAuthentication
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.accesspc.userpassActivity.help(userpassActivity.java:25)
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.accesspc.userpassActivity$1.onClick(userpassActivity.java:73)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.View.performClick(View.java:2485)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.View.onKeyUp(View.java:4257)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.widget.TextView.onKeyUp(TextView.java:4566)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.KeyEvent.dispatch(KeyEvent.java:1280)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.View.dispatchKeyEvent(View.java:3855)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1687)
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1120)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.app.Activity.dispatchKeyEvent(Activity.java:2073)
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2560)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2535)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.os.Looper.loop(Looper.java:123)
05-08 17:17:42.905: E/AndroidRuntime(398):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-08 17:17:42.905: E/AndroidRuntime(398):  at java.lang.reflect.Method.invokeNative(Native Method)
05-08 17:17:42.905: E/AndroidRuntime(398):  at java.lang.reflect.Method.invoke(Method.java:507)
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-08 17:17:42.905: E/AndroidRuntime(398):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-08 17:17:42.905: E/AndroidRuntime(398):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:06:27.773

将`jar`文件放在 libs 下，而不是 lib（如果需要，更改文件夹名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:06:35.583

我删除了 android 依赖项文件夹。现在它的工作

# windows-phone-7 - 如何对windows phone 7中的联系人等项目进行排序？

> ID：10498206
> 
> 赞同：0
> 
> 时间：2012-05-08T12:03:01.757
> 
> 标签：windows-phone-7

如何在屏幕左侧显示 az 字母。无论何时单击它都会显示匹配的项目？请帮助我。任何示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:08:58.473

您可以使用以下 CodeProject 文章来实现这一点：-

[http://www.codeproject.com/Articles/166297/Developing-a-Windows-Phone-7-Jump-List-Control](http://www.codeproject.com/Articles/166297/Developing-a-Windows-Phone-7-Jump-List-Control)

或者您可以使用 Silverlight Toolkit for Windows Phone 中的 LongListSelector ：-

[http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)

# c# - 从 AssemblyInfo.cs 文件中读取版本号

> ID：10498209
> 
> 赞同：12
> 
> 时间：2012-05-08T12:03:14.170
> 
> 标签：c#, c#-4.0

我正在尝试从 AssemblyInfo.cs 文件中提取版本号！而且我正在尝试使用`System.Reflection.Assembly.LoadFile(path);`但是在这样做时我得到了一个 BadImageFormatException; *“该模块应包含程序集清单。（来自 HRESULT 的异常：0x80131018）”*。所以现在我很受伤，这不是可行的方法吗？我应该改用 RegEx 吗？

我已经阅读了很多示例，`GetExecutingAssembly()`但我确实想从其他项目中获取版本。

澄清：我想从**AssemblyInfo.cs**文件中读取版本信息！而**不是**来自已编译的文件。我正在尝试制作一个工具来更新我的版本号，然后再发布新版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T12:15:16.673

您可以[在不加载](https://stackoverflow.com/questions/187999/how-do-i-get-the-version-of-an-assembly-without-loading-it)它的情况下获取程序集版本：

```
using System.Reflection;
using System.IO;

...

// Get assembly 
AssemblyName currentAssembly = AssemblyName.GetAssemblyName(path);
Version assemblyVersion = currentAssembly.Version; 
```

**编辑**：如果你想读取文件，那么你可以这样做：

```
string path = @"d:\AssemblyInfo.cs";
            if (File.Exists(path))
            {
                // Open the file to read from.
                string[] readText = File.ReadAllLines(path);
                var versionInfoLines = readText.Where(t => t.Contains("[assembly: AssemblyVersion"));
                foreach (string item in versionInfoLines)
                {
                    string version = item.Substring(item.IndexOf('(') + 2, item.LastIndexOf(')') - item.IndexOf('(') - 3);          
                    //Console.WriteLine(Regex.Replace(version, @"\P{S}", string.Empty));
                    Console.WriteLine(version);
                }

            } 
```

//输出

```
1.0.*
1.0.0.0 
```

希望这有助于...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T12:05:49.333

[您可以在AssemblyName.GetAssemblyName](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.getassemblyname.aspx)中指定目标程序集路径

```
AssemblyName.GetAssemblyName("ProjectB.exe").Version 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-16T01:52:09.477

`AssemblyInfo.cs`文件被编译为 IL 程序集。

如果您加载该程序集，您可以阅读包含您已经看过的所有示例的版本。它正在从已编译的程序集文件中读取嵌入式版本信息，并且它可能会被编译过程覆盖为与其中不同的值`AssemblyInfo.cs`

但是，听起来您想要的是从`AssemblyInfo.cs`文本文件中读取版本号，而不是对其进行编译。

如果是这种情况，您真的只需要使用适合您项目的格式的正则表达式，或者甚至想出一个保持简单的约定。

这可能很简单

```
var versionMatch = Regex.Match(File.ReadAllText(filename), @"AssemblyVersion\s*\(\s*""([0-9\.\*]*?)""\s*\)");
if (versionMatch.Success)
{
    Console.WriteLine(versionMatch.Groups[1].Value);
} 
```

您必须考虑围绕那里的约定，因为它是一个有效的版本字符串，它在编译时`1.0.*`转换为表单的时间戳值，并且部分可以猜测但不能精确猜测。`1.0.nnn.mmm``nnn``mmm`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-21T06:01:25.013

这是解释从 AssemblyInfo.cs 类中读取值的代码的文章。

[http://lancelarsen.com/reading-values-from-assemblyinfo-cs/](http://lancelarsen.com/reading-values-from-assemblyinfo-cs/)

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T12:08:04.437

听起来您正在尝试在 x64 环境中加载为 x86 编译的程序集，反之亦然。

确保此代码所在的程序集是为与目标相同的环境构建的，并且您可以通过听起来像是您已阅读的示例来获取它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-15T12:55:13.857

您可以继续使用 Assembly.GetName().Version，您的程序集可能是您的类的类型

```
public class Test
{
    public static void Main()
    {
        Console.WriteLine("Current assembly : " + typeof(Test).Assembly.GetName().Version);
    }
} 
```

对于我正在处理的测试应用程序，使用上面的代码向我显示以下详细信息：

[![在此处输入图像描述](../Images/455b115fbc9f6b40ba32694c4ef62df6.png)](https://i.stack.imgur.com/s1oM5.jpg)

# linux - 为 linux 密码创建热键

> ID：10498211
> 
> 赞同：1
> 
> 时间：2012-05-08T12:03:20.977
> 
> 标签：linux, shell, passwords

在linux中，有没有办法可以保存我每天必须在某处输入数百次的长/复杂密码并针对它们创建一个热键，这样每次我想输入密码时，我都可以使用热键?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:15:32.183

使用某种密码管理器，例如 kwallet，我个人在 windows 上使用 keepass。按 ctrl+alt+a 自动输入密码。

# sql - Oracle中如何将行转换为列？

> ID：10498214
> 
> 赞同：-1
> 
> 时间：2012-05-08T12:03:31.320
> 
> 标签：sql, oracle, oracle10g, pivot

我在 Oracle 数据库中有如下所示的数据表。

```
emp_num  person_name  organization  earned_date  sum(hours)
-------  -----------  ------------  -----------  ----------
36372    Name1        Test1         23-MAR-11      3.17
36372    Name1        Test1         15-MAR-11      6.70
40208    Name2        Test2         08-APR-11     13.50
40208    Name2        Test2         06-APR-11     12.07 
```

我需要更改查询输出，如下所示。我怎样才能做到这一点？

```
emp_num  person_name  organization  23-MAR-11  15-MAR-11  08-APR-11  06-APR-11
-------  -----------  ------------  ---------  ---------  ---------  ---------
36372     Name1       Test1           3.17        6.70      
40208     Name2       Test2                                 13.50      12.70 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:27:10.840

您不能动态命名表中的列，除非您使用某种形式的动态 SQL。但是，您可以使用通用日期列获得所需的内容：

```
select emp_num, person_name, organization, 
       sum(decode(datenum, 1, hours, 0)) as date1hours,
       sum(decode(datenum, 2, hours, 0)) as date2hours,
       ...
       min(decode(datenum, 1, earned_date) as date1,
       min(decode(datenum, 2, earned_date) as date2,
       ...
from 
(
  select t.*, 
     dense_rank() over (partition by NULL order by earned_date) as datenum
  from the_table t
) t
group by emp_num, person_name, organization 
```

顺便说一句，Oracle 10g 支持该`CASE`语法，我建议您使用它而不是`decode`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:24:59.733

```
select
  emp_num,
  person_name,
  organization,
  sum(decode(earned_date,to_date('23/03/2011','dd/mm/yyyy'),hours,0)) 23mar11,
  sum(decode(earned_date,to_date('15/03/2011','dd/mm/yyyy'),hours,0)) 15mar11,
  sum(decode(earned_date,to_date('08/04/2011','dd/mm/yyyy'),hours,0)) 08apr11,
  sum(decode(earned_date,to_date('06/04/2011','dd/mm/yyyy'),hours,0)) 06apr11
from
  the_table //don't know the name
group by
  emp_num,
  person_name,
  organization 
```

始终使用 to_date 函数将日期与字符串进行比较，我在这里使用了常见的英国格式。

# php - 如何在 Symfony 中获取插件的配置目录？

> ID：10498221
> 
> 赞同：0
> 
> 时间：2012-05-08T12:03:49.833
> 
> 标签：php, symfony1, symfony-1.4

是否有类似`$pluginsDir = sfConfig::get('sf_config_dir');`（返回整体配置目录）的函数来获取特定插件的目录。可以说我的目录结构类似于：

```
project/
       config/
       plugins/
              myplugin/
                      config/ 
```

我想得到输出`/home/user_name/public_html/project/plugins/myplugin/config/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:00:02.340

Symfony 附带了一个`sf_plugins_dir`which ，仅此`/home/user_name/public_html/project/plugins`而已。

解决方案（几乎相同）是：

**1\. 基于此配置变量构建路径：**

```
sfConfig::get('sf_plugins_dir').DIRECTORY_SEPARATOR.'myplugin'.DIRECTORY_SEPARATOR.'config'; 
```

**2\. 将其作为 myplugin 配置**

在`myplugin/config/app.yml`：

```
all:
  myplugin:
    config_dir: %SF_PLUGINS_DIR%/myplugin/config 
```

然后：

```
sfConfig::get('app_myplugin_config_dir'); 
```

# java - 将 Java 转换为 Scala

> ID：10498224
> 
> 赞同：1
> 
> 时间：2012-05-08T12:03:56.307
> 
> 标签：java, scala

我正在尝试学习 Scala，所以任何人都可以告诉我如何在 scala 中转换以下内容：

```
for (int t = 0; true; t++) 
```

先感谢您。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-08T12:08:23.920

使用命令式风格，您可以编写（就像在 Java 中一样）：

```
var t = 0
while(true) {
  t+=1
  ...
} 
```

使用惰性函数，这可能是：

```
def ints(n: Int = 0): Stream[Int] = Stream.cons(n, ints(n+1))
ints().map(t => ...) 
```

使用内置函数：

```
Iterator.from(0).map ( t => .... ) 
```

这种无限结构的常见用例是采用无限流或迭代器，对其执行一些操作，然后获取多个结果：

```
Iterator.from(0).filter(t => t % 1 == 0).map(t => t*t).take(10).toList 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T12:09:41.097

正如我在评论中提到的，您的问题似乎没有多大意义 - 请添加更多细节。

目前，我能想到的最接近的 Scala 翻译是：

`Stream from 0`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T12:58:52.370

您可以使用 while 或 for。

您可以用于

```
for(i<-0 to 100) {
  println(i)
} 
```

或者你使用直到你想增加 N 个数

```
for(i <- 5 until 55 by 5) {
    println(i)
} 
```

或者你最好使用 while

```
var i = 0
while(true) {
  ...
  i+=1
} 
```

或同时做

```
var i = 0
do {
    ...
    i += 1
} while(true) 
```

看看：[http](http://www.simplyscala.com/) ://www.simplyscala.com/ 并自己测试一下

另外，在我的博客中，我写了一些关于命令式 scala 的文章，其中我使用了 for 和 while 循环，你可以在那里看看。

[http://carlosqt.blogspot.com/search/label/Scala](http://carlosqt.blogspot.com/search/label/Scala)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T12:14:08.117

scala 中的简单理解主要是这样的：

```
for (i <- 0 until 10) {
  // do some stuff
} 
```

# wpf - 如何为datatrigger中的值指定超过1个值

> ID：10498232
> 
> 赞同：0
> 
> 时间：2012-05-08T12:04:19.757
> 
> 标签：wpf, xaml

例如，如果我们想为数据触发器中的属性指定多个值，该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:05:49.053

您必须使用 MultiDataTrigger -> [http://msdn.microsoft.com/de-de/library/system.windows.datatrigger.aspx](http://msdn.microsoft.com/de-de/library/system.windows.datatrigger.aspx) 检查示例

# java - 为什么我的 DBCP 连接池连接不足？

> ID：10498233
> 
> 赞同：0
> 
> 时间：2012-05-08T12:04:22.160
> 
> 标签：java, sql-server-2005, connection-pooling

我已经使用 Sql Server 2005 的连接池 (DBCP) 开发了 Java 应用程序。在我的配置文件中，我有`MaxActive="500"`，但在某些情况下，它会超过 500 个连接。为什么？那个时候数据库很慢。

```
<Resource
    name="jdbc/tm4u"
    auth="Container"
    type="javax.sql.DataSource"
    driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
    url="jdbc:sqlserver://XXXX;databaseName=XX;User=abc;Password=son;selectMethod=cursor"
    username="abc"
    password="son"
    autoReconnect="true"
    maxActive="500"
    removeAbandoned="true"
    logAbandoned="true"
    removeAbandonedTimeout="60"
    maxIdle="10"
    /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:12:15.713

在您的代码中，您是否关闭了打开的连接？通过这样做，连接将返回到池中并重新使用。在这种情况下不应该有性能下降。但是，如果我们需要超过 500 个活动连接，其中一些将不得不等待。

另请参阅与池相关的其他 SO 问题。

# python - Django加载本地json文件

> ID：10498234
> 
> 赞同：18
> 
> 时间：2012-05-08T12:04:25.343
> 
> 标签：python, django, json

我有一个ajax视图：

```
def ajax_prices(request):
    data = {'data':'data'}
    return HttpResponse(json.dumps(data), mimetype='application/json') 
```

我想使用本地 json 文件（prices.json）对此进行测试。如何导入本地 json 文件？

本地 json 文件“prices.json”

```
{"aaData": [
[1, "70.1700", "2008-12-29 11:23:00"],
[2, "70.2600", "2008-12-29 16:22:00"],
[3, "70.6500", "2008-12-30 11:30:00"],
[4, "70.8700", "2008-12-30 16:10:00"],
[5, "70.5500", "2009-01-02 11:09:00"],
[6, "70.6400", "2009-01-02 16:15:00"],
[7, "70.6500", "2009-01-05 11:17:00"]
]} 
```

我不能这样做：

```
data = '/static/prices.json' 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-08T12:07:13.017

使用 json 模块：

```
import json

json_data = open('/static/prices.json')   
data1 = json.load(json_data) # deserialises it
data2 = json.dumps(data1) # json formatted string

json_data.close() 
```

请参阅[此处](http://docs.python.org/library/json.html)了解更多信息。

正如 Joe 所说，为您的测试数据使用[固定装置](https://docs.djangoproject.com/en/dev/howto/initial-data/)或[工厂](https://github.com/dnerdy/factory_boy)是一种更好的做法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T12:12:35.510

这里的技巧是对该文件使用python的内置方法`open`，读取其内容并使用`json`模块解析它

IE

```
import json

data = open('/static/prices.json').read() #opens the json file and saves the raw contents
jsonData = json.loads(data) #converts to a json structure 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T12:07:45.667

您应该为此使用 Django 固定装置。

[https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs)

# android - 如何更改媒体控制器的点击面？

> ID：10498236
> 
> 赞同：0
> 
> 时间：2012-05-08T12:04:35.950
> 
> 标签：android, android-videoview, mediacontroller

我正在尝试创建自定义视频播放器。我使用 VideoView 来显示我的电影，并使用 MediaController 来控制视频。

当用户点击屏幕时，它应该显示标题和媒体控制器 3 秒（如果用户继续执行操作，则更长时间）。如果用户再次点击视频，它应该隐藏这两个元素。

在屏幕上第一次点击时，标题和控制器按我的预期显示。我的问题是，当我尝试再次点击屏幕时，它只会隐藏控制器并且标题不会消失。我认为这是因为 MediaController 定义了自己的水龙头表面，所以我的问题是如何更改它？如何在不编写我自己的 MediaController 的情况下更改 MediaController 对象的点击表面？

这是我用来实现我想要的代码：

```
private static final int ELAPSED_TIME = 2000;
private boolean visible;

@Override
public boolean onTouch(View v, MotionEvent event) {
    // onTap
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        // Supprime le callback pour cacher les contrôles s'il y en avait un en cours
        hideHandler.removeCallbacks(onElapsedTime);

        // Affiche les contrôles s'il n'était pas déjà affichés
        if (!visible) {
            header.setVisibility(View.VISIBLE);
            controller.show(0); // 0 -> Visible jusqu'à ce que hide() soit appelé
            visible = true;
        }
        else {
            header.setVisibility(View.GONE);
            controller.hide();
            visible = false;
        }

        // Défini un runnable a exécuter après ELAPSED_TIME pour cacher le header et le contrôleur
        hideHandler.postDelayed(onElapsedTime, ELAPSED_TIME);
    }

    return true;
}

private Runnable onElapsedTime = new Runnable() {
    public void run() {
        header.setVisibility(View.GONE);
        controller.hide();
        visible = false;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:02:22.463

首先构建您的类并扩展 MediaController。现在，覆盖“隐藏”和“显示”方法并做你想做的事。很简单，我也做过同样的事情。在隐藏方法中，您可以将标题的可见性设置为消失或不可见（取决于您的要求）。

# security - 如何通过 Tomcat 中的源 IP 限制对某些 URL 的访问？

> ID：10498237
> 
> 赞同：15
> 
> 时间：2012-05-08T12:04:39.943
> 
> 标签：security, jakarta-ee, tomcat, tomcat6, access-control

我想限制对我的 Tomcat webapp 中某些 URL 的访问。应该只允许 3 个已知 IP 地址访问符合特定模式的 URL。

例如`http://example.com:1234/abc/personId`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T12:27:25.427

使用 org.apache.catalina.filters.RemoteAddrFilter 并将其映射到您希望保护的 URL。有关配置详细信息，请参阅[http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Remote_Address_Filter](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Remote_Address_Filter)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T12:21:38.797

You can do that with this in server.xml:

```
 <Valve
    className="org.apache.catalina.valves.RemoteAddrValve"
        deny="117.40.83.*,122.224.95.*,119.255.28.*,218.8.245.*,218.85.139.*,219.117.197.*,124.89.39.*,58.18.172.*,180.153.225.*"
        /> 
```

(these are real IP addresses: owners, you know why :-|) but as you can see it is really a blocker not an enabler. A better solution would be to put Apache HTTPD in front of it with Deny All and Allow From statements, which will let you allow only the 3 IP addresses you need to access the service.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T15:37:24.093

你可以使用这样的东西来阻止 ips，如果你在代理后面：

```
<Context path="/manager" docBase="manager" reloadable="true" privileged="true" >
  <Valve className="org.apache.catalina.valves.RemoteIpValve"/>
  <Valve className="org.apache.catalina.valves.RemoteHostValve" allow="<your IP regex>"/>
</Context> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:16:39.907

我不会通过 IP 地址限制访问，原因如下：

*   这样做说内部地址，例如 10.0.0.0/24，意味着您隐含地信任整个范围。如果它被破坏会发生什么？
*   并非所有客户都能够或将能够获得静态 IP 地址 - 假设您可能希望允许某些客户访问。
*   代理不支持`x-forwarded-for`标头的网关设备后面的客户将只拥有网关设备的 IP；信任 IP 信任网关后面的*每个人*，再次假设您可能希望为某些客户提供访问权限。

相反，如果您需要运行一个系统，其中某些调用只能由某些用户访问，我会使用身份验证 - SSL 客户端证书为此目的工作得很好。或者，您可以使用类似[OAuth](http://oauth.net/)的东西。

# r - 用 R 估计多维空间中的密度

> ID：10498238
> 
> 赞同：2
> 
> 时间：2012-05-08T12:04:40.600
> 
> 标签：r, spatial, multidimensional-array

我有两种类型的个体，比如 M 和 F，每一种都用六个变量来描述（形成一个 6D 空间 S）。我想确定 S 中 M 和 F 的密度差异最大的区域。我首先尝试了一个逻辑二项式模型，将 F/M 与六个变量联系起来，但这个 GLM 模型的结果很难解释（部分原因是有许多重要的交互项）。因此，我正在考虑进行“空间”分析，在该分析中，我将分别估计 S 中各处 M 和 F 个体的密度，然后计算密度差异。最终我会手动寻找最大的密度差异，并提取 6 个变量的值。

我在包 sm 中找到了可以估计 3d 空间中的密度的函数 sm.density，但对于 n>3 的空间，我一无所获。你知道在 R 中能做到这一点的东西吗？或者，是否有更优雅的方法来回答我的第一个问题（第二句）？

提前，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-11T09:23:53.873

`kde`该包的功能对[`ks`](http://cran.r-project.org/web/packages/ks/ks.pdf)维度范围从 1 到 6 的多项数据执行核密度估计。

[`pdfCluster`](http://cran.r-project.org/web/packages/pdfCluster/pdfCluster.pdf)和[`np`](http://cran.r-project.org/web/packages/np/np.pdf)包提出了在更高维度上执行核密度估计的函数。

如果您更喜欢参数技术，您可以查看 R 包进行高斯混合估计，如[`mclust`](http://cran.r-project.org/web/packages/mclust/mclust.pdf)or [`mixtools`](http://cran.r-project.org/web/packages/mixtools/mixtools.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:39:55.523

使用 GLM 模型执行此操作的能力可能会受到您已经遇到的可解释性问题以及数值稳定性问题的限制。此外，您没有描述 GLM 模型，因此无法查看您是否考虑了非线性。如果您有大量数据，您可以考虑使用 2D 交叉样条项。（这些*并不是*真正的密度估计。）如果我对 rms/Hmisc 包中的设施进行五个维度的初步探索，它可能看起来像：

```
 library(rms)
  dd <- datadist(dat)
  options(datadist="dd")

  big.mod <- lrm( MF ~ ( rcs(var1, 3) +    # `lrm` is logistic regression in rms
                         rcs(var2, 3) +
                         rcs(var3, 3) +
                         rcs(var4, 3) +
                         rcs(var5, 3) )^2,# all 2way interactions
                    data=dat,
                    max.iter=50) # these fits may take longer times
   bplot( Predict(bid.mod, var1,var2, n=10) ) 
```

这应该显示 var1 和 var2 的同时函数形式对“5 维”模型估计的贡献分别为 10 个点和其他三个变量的中值。

# actionscript-3 - flex 视频播放器中的无缝播放

> ID：10498239
> 
> 赞同：0
> 
> 时间：2012-05-08T12:04:42.253
> 
> 标签：actionscript-3, apache-flex, air, flex4, flex4.5

有没有办法将 flex 视频播放器自定义为具有通用时间线的无缝视频播放器。任何想法。

任何网络链接或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:58:57.150

如果可用，可以使用 RTMP 流服务器轻松实现，

请参阅此示例[http://flowplayer.org/plugins/streaming/rtmp.html#combining-streams](http://flowplayer.org/plugins/streaming/rtmp.html#combining-streams)

下载这个插件的源代码并检查它是如何使用 netstream 完成的，

这是链接：[http ://releases.flowplayer.org/flowplayer.rtmp/flowplayer.rtmp-3.2.10-src.zip](http://releases.flowplayer.org/flowplayer.rtmp/flowplayer.rtmp-3.2.10-src.zip)

问候，

# javascript - 加载站点后如何使输入字段聚焦？

> ID：10498245
> 
> 赞同：1
> 
> 时间：2012-05-08T12:05:16.573
> 
> 标签：javascript, html

我有一个非常简单的单页网站，其中有一个输入字段。我想在加载窗口/站点时使输入字段成为焦点，以便用户/访问者可以立即开始在其上输入站点加载！

我希望它不在 JQUERY 中。如果可能，请用 JAVASCRIPT 给我一个解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:09:26.307

```
window.onload=function(){
    document.getElementById('ID').focus();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:06:11.880

//id是文本框的id

```
document.getElementById('ID').focus(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:08:29.240

document.getElementById("ControlID").focus();

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T12:08:57.523

将其添加到 onLoad 回调中，以便在页面加载后聚焦：

`<body onLoad="function() { document.getElementById('input_field_id').focus(); }">`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T12:11:10.000

有一个新的输入字段属性调用`autofocus`。除 IE 以外的所有浏览器都支持 [http://www.html5tutorial.info/html5-autofocus.php](http://www.html5tutorial.info/html5-autofocus.php)

您可以使用它并提供其他人提供的解决方案的后备

```
var i = document.createElement('input');
if(!('autofocus' in i)) {
   window.onload=function(){
    document.getElementById('ID').focus();
   });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T12:08:30.753

您需要`focus()`在javascript中使用方法。

在body的onload方法中，调用javascript方法，这里需要设置输入框的焦点。

```
<script type="text/javascript">
function load()
{
   document.getElementById("inputFieldId").focus();
}
</script>
<body onload="load()"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T12:12:07.180

HTML5 具有此作业的自动对焦属性。您可以从[此处](http://wufoo.com/html5/attributes/02-autofocus.html)检查您的目标浏览器是否支持此属性。

# asp.net-mvc-3 - 找不到类型“System.Web.Mvc.WebFormView”的构造函数

> ID：10498250
> 
> 赞同：0
> 
> 时间：2012-05-08T12:05:39.007
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

我刚刚从 TFS 中检查了一个 asp net mvc 项目。安装所有必需的 NuGet 包后，我尝试运行该项目。

尝试使用 MvcSiteMapProvider 的以下方法之一时，我不断收到此错误消息：

*   站点地图标题（）
*   站点地图（）
*   站点地图路径（）

我正在使用 .NET Framework 4.0、MVC3 和 MvcSiteMapProvider 版本 3.2.2.0。

我通过 NuGet（包管理器控制台）安装了 MvcSiteMapProvider。

我的项目使用运行时版本 v2.0.50727 引用 ...\packages\MvcSiteMapProvider.3.2.2.0\lib\net40\MvcSiteMapProvider.dll 中的 DLL

```
[MissingMethodException: Constructor on type 'System.Web.Mvc.WebFormView' not found.]
System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +1136
System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +111
System.Activator.CreateInstance(Type type, Object[] args) +19
MvcSiteMapProvider.Internal.MvcSiteMapProviderViewEngine.CreatePartialView(ControllerContext controllerContext, String partialPath) +109
System.Web.Mvc.VirtualPathProviderViewEngine.FindPartialView(ControllerContext controllerContext, String partialViewName, Boolean useCache) +217
System.Web.Mvc.<>c__DisplayClass8.<FindPartialView>b__7(IViewEngine e) +21
System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths) +127
System.Web.Mvc.ViewEngineCollection.FindPartialView(ControllerContext controllerContext, String partialViewName) +170
System.Web.Mvc.Html.TemplateHelpers.ExecuteTemplate(HtmlHelper html, ViewDataDictionary viewData, String templateName, DataBoundControlMode mode, GetViewNamesDelegate getViewNames, GetDefaultActionsDelegate getDefaultActions) +418
System.Web.Mvc.Html.TemplateHelpers.TemplateHelper(HtmlHelper html, ModelMetadata metadata, String htmlFieldName, String templateName, DataBoundControlMode mode, Object additionalViewData, ExecuteTemplateDelegate executeTemplate) +1117
System.Web.Mvc.Html.TemplateHelpers.TemplateHelper(HtmlHelper html, ModelMetadata metadata, String htmlFieldName, String templateName, DataBoundControlMode mode, Object additionalViewData) +66
System.Web.Mvc.Html.TemplateHelpers.TemplateFor(HtmlHelper`1 html, Expression`1 expression, String templateName, String htmlFieldName, DataBoundControlMode mode, Object additionalViewData, TemplateHelperDelegate templateHelper) +117
System.Web.Mvc.Html.TemplateHelpers.TemplateFor(HtmlHelper`1 html, Expression`1 expression, String templateName, String htmlFieldName, DataBoundControlMode mode, Object additionalViewData) +100
System.Web.Mvc.Html.DisplayExtensions.DisplayFor(HtmlHelper`1 html, Expression`1 expression, String templateName) +57
MvcSiteMapProvider.Web.Html.SiteMapTitleHelper.SiteMapTitle(MvcSiteMapHtmlHelper helper, String templateName) +412
MvcSiteMapProvider.Web.Html.SiteMapTitleHelper.SiteMapTitle(MvcSiteMapHtmlHelper helper) +33
ASP._Page_Views_Shared__Layout_cshtml.Execute() in xxx\Views\Shared\_Layout.cshtml:28 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:18:59.400

尝试更新到版本 3.2.3，然后它应该可以工作。

# android - FragmentActivity onCreateView

> ID：10498258
> 
> 赞同：1
> 
> 时间：2012-05-08T12:05:55.760
> 
> 标签：android, android-fragmentactivity

我尝试为 pre-honeycomb android 设备使用 Android 兼容性库（或现在称为支持库）v4。我知道，我应该使用 FragmentActivity 类，而不是使用 Fragment 类。根据我能找到的所有教程，我可以像在 Fragment 类中一样使用**onCreateView方法：**

***public View onCreateView (LayoutInflater inflater, ViewGroup 容器, Bundle savedInstanceState)***

但是，FragmentActivity 中的 onCreateView 方法似乎有所不同。我继承的一个是：

***public View onCreateView（字符串名称、上下文上下文、AttributeSet attrs）***

这个版本其实是在 FragmentActivity 类的 Android 参考中列出的。
似乎我能找到的所有教程都没有说明这种差异，并且都在 Fragment 类中调用了那个。我在这里误会了我应该能够以某种方式调用 Fragment 类版本的 onCreateView 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:14:09.647

我认为这是错误的：

> 我知道，我应该使用 FragmentActivity 类，而不是使用 Fragment 类。

您应该使用 Activity 类的 FragmentActivity 类。在 FragmentAcivity 类中，覆盖 onCreate 方法就足够了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T12:56:33.133

FragmentActivity 和 Activity 是一样的。FragmentActivity 用于版本（低于 4），使用 android.support.v4.jar 支持 Fragment。对于从 4 开始的版本，没有 FragmentActivity..你可以检查出来。FragmentActivity 用于调用显示 Fragments..所以当你开发 FragmentView 时你不应该扩展 FragmentActivity。Fragment 是 FragmentActivity.u 的一部分，可以有更多的 Fragment。对于你的疑问：检查这个 [http://developer.android.com/reference/android/app/Activity.html#onCreateView%28android.view.View,%20java.lang.String,%20android.content.Context,%20android .util.AttributeSet%29](http://developer.android.com/reference/android/app/Activity.html#onCreateView%28android.view.View,%20java.lang.String,%20android.content.Context,%20android.util.AttributeSet%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:13:12.433

你已经有点改变了。片段仍然是片段。Activity 变成 FragmentActivity。查看 Android 兼容性库附带的示例代码。特别是，请参阅`FragmentLayoutSupport.java`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T13:47:51.070

简单地删除你的 gen 文件夹...为我工作

# wcf - 简化配置 wsHttpBinding

> ID：10498259
> 
> 赞同：1
> 
> 时间：2012-05-08T12:06:00.037
> 
> 标签：wcf, binding

我有一个简单的 WCF 服务，部署到 IIS。我使用了[简化的配置](http://msdn.microsoft.com/en-us/library/ee530014.aspx)，`BasicHttpBinding`效果很好。

现在我想添加用户名/密码身份验证并使用 wsHttpBinding。在上面的文件中指出：

> 在 .NET Framework 4 中，该元素是可选的。当服务没有定义任何端点时，每个基地址和实现的合约的端点都会添加到服务中。基地址附加到合约名称以确定端点， **绑定由地址方案确定**。

这是什么意思，我应该如何`wsHttpBinding`通过地址方案配置绑定？

我的配置如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding>
          <security mode="Message">
            <transport clientCredentialType="None"/>
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </wsHttpBinding>      
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior> 
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="SampleWebservice.CustomValidator,SampleWebservice" />
          </serviceCredentials>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

这是 Windows Server 2008、IIS 7。

看来，该服务没有选择 wsBinding 设置，因为我总是可以`BasicHttpBinding`在下载的 svc 文件中看到一个。我错过了什么吗？

* * *

**编辑**

我应用了用户 stevedocious 建议的更改来更改我的 web.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="SampleWebservice.SampleWebservice.Sample" behaviorConfiguration="customServiceBehaviour">
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        <endpoint contract="SampleWebservice.SampleWebservice.ISample" binding="wsHttpBinding" bindingConfiguration="bindingConfiguration" address="" />
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="bindingConfiguration">
          <security mode="Message">
            <transport clientCredentialType="None"/>
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </wsHttpBinding>      
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="customServiceBehaviour"> 
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="SampleWebservice.CustomValidator,SampleWebservice" />
          </serviceCredentials>
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

但是，不能公开元数据。使用浏览器检查服务状态，我的元数据发布当前被禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:18:36.933

如果您想将 basicHttpBinding 以外的任何内容与 http/https 地址方案一起使用，则需要创建一个端点。

在您的绑定定义中添加一个名称属性

> <绑定名称="myWSBinding" ... >

然后将 bindingConfiguration 和绑定参数添加到您的端点定义

> < 端点绑定="wsHttpBinding" bindingCongifuration="myWSBinding" ... >

# symfony - 使用 Symfony2 表单生成器添加斜线 - 我在哪里使用 stripslashes()？

> ID：10498261
> 
> 赞同：0
> 
> 时间：2012-05-08T12:06:04.983
> 
> 标签：symfony, stripslashes

我正在使用*Symfony2*（即不是 Symfony 1.x）构建一个小型网站。我使用了使用 CLI 生成器创建的实体中的默认 CRUD 生成器。然而，当它被保存到数据库时，它被保存为转义斜线。

阻止这种情况发生的正确地点在哪里？在实体、存储库、控制者或表单中？这样做有什么神奇的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:21:47.020

原来与 Symfony 无关。我正在使用 MAMP，并且`magic_quotes_gpc`已打开。为了将来参考，请转到您的 php.ini 文件并设置

```
magic_quotes_gpc = Off 
```

要检查魔术引号是否打开，请运行

```
if(get_magic_quotes_gpc()) { die('magic quotes turned on'); } 
```

# java - Java ArrayList 项目计数器，即“Apple，3×Banana，2×Orange”

> ID：10498262
> 
> 赞同：1
> 
> 时间：2012-05-08T12:06:06.637
> 
> 标签：java, string, arraylist, counter

我确信这不是一个非常复杂的问题，但我对 java 还比较陌生，并且对这个问题困惑了一段时间。

假设我有一个包含 6 个字符串值的数组，假设它们是：`[Apple, Banana, Banana, Banana, Orange, Orange]`. 我正在寻找一种方法，该方法将采用该数组并返回一个字符串，在上述情况下，如：`"Apple, 3×Banana, 2×Orange"`。

我将非常感谢一些帮助。我一直在尝试不同的技术来实现这一点，但是在数组的第一次迭代以及何时检测到重复值等方面都落在了正确的行为上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:11:42.720

使用`Map<String, Integer>`. 遍历数组并将字符串作为 Map 键和计数器作为值：

```
Map<String, Integer> words = HashMap<String, Integer>();
for (String word : words) {
    Integer count = words.get(word);
    count = count == null ? 0 : count++;
    words.put(word, count);
} 
```

现在单词映射包含单词与其计数之间的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:11:23.580

您可以使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/TreeMap.html)对象，其中 Fruit 名称是键，值是它被看到的次数。

您可以使用 foreach 循环逐个水果遍历数组水果，并在 TreeMap 中更新该水果的值。最后，您打印密钥及其值。由于我们使用了 TreeMap，因此键将按**排序**顺序排列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:11:34.373

你试过什么？创建[HashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)的实例，其中键是水果名称，值是水果出现。迭代您的数组，在每次迭代时，将新水果添加到您的 Map 或增加现有键的出现次数。

然后遍历 HashMap，并构建你的字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-21T18:03:52.360

如果所有内容都在一个 ArrayList 中，并且您知道可以使用的水果

```
ArrayList<String> fruits = new ArrayList<>();
//load some fruit code [ .. ]
int orangeOccurrences = Collections.frequency(fruits, "orange"); 
```

但 Map 绝对是更正确的方法。

# jquery - Jquery - Hide some content of 'draggable' div but use it on 'drop' event

> ID：10498265
> 
> 赞同：0
> 
> 时间：2012-05-08T12:06:19.553
> 
> 标签：jquery, html, drag-and-drop, hide

I have two div on my page. One is **draggable** and other is **droppable**.

Draggable div:

```
<div id='drag'>
    <div id='one'>11111</div>
    <div id='two'>22222</div>
<div> 
```

Droppable div

```
<div id='drop'>

</div> 
```

I am using following jQuery code to append the contents of div '**drag**' to div '**drop**' on drop event of draggable div.

```
$(function() {
        $( "#drag" ).draggable();
        $( "#drop" ).droppable({
            drop: function( event, ui ) {
                $( this ).append( ui.draggable.html();
            }
        });
    }); 
```

Now what I want to do is , I don't want to show the contents of div '**two**'(which is inside div '**drag**') to the user. But still when a user drops the div '**drag**' on div '**drop**' , the content of both div '**one**' and '**two**' should get appended to div '**drop**'.

So the **user should see the content of div 'drag' as:**(div 'two' is hidden)

```
111111 
```

But **after drop of div 'drag', the content of div 'drop' should** be:

```
111111
222222 
```

Please guide me how to hide the content of div '**one**' from user, but still use it on drop event.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:23:05.830

Slight changes in the markup and js script as follows

```
<div id='drag' style="border:solid 1px blue;height:50px;">
    <div id='one'  >11111</div>
    <div id='two' ><span style="visibility:hidden;">22222</span></div>
</div>

<div id='drop' style="border:solid 1px red;height:50px;">

</div> 
```

​</p>

```
$(document).ready(function() {
    $("#drag").draggable();

    $("#drop").droppable({
        drop: function(event, ui) {
            $(this).append(ui.draggable.text());
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:07:50.567

You can use the `dragstop` event exposed by the draggable function in combination with `bind` to achieve the functionality you want.

**Example:**

```
$( "#drag" ).bind( "dragstop", function(event, ui) {
    $( this ).append( ui.draggable.html());
}); 
```

# java - 是否可以从流中打开 TrueZIP 存档？

> ID：10498270
> 
> 赞同：1
> 
> 时间：2012-05-08T12:06:37.073
> 
> 标签：java, truezip

使用 TrueZIP，有没有办法从流中打开和修改现有的 ZIP 文件（它当然可以使用另一个流输出）？

只要我在文件系统上处理现有的真实 ZIP 文件，我就有用于修改 ZIP 的代码，但我要求所有临时文件在存储在磁盘上时都需要加密。在我们应用程序的大部分部分中，这很容易实现（使用 CipherOutputStream 和 CipherInputStream），但我有一个使用 TrueZIP 更新现有 ZIP 文件的功能。如果文件被加密，这部分显然会失败。

ZIP 文件将由不支持加密的专有应用程序使用，因此无法使用作为 ZIP 规范一部分的加密。

我们使用 TrueZIP 的原因是我们需要对 Zip64 的支持（我知道它包含在 Java 7 中，但我们现在无法切换）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:17:52.653

不可以，存档文件必须存储在可访问的文件系统中才能与 TrueZIP 一起使用。但是您还有许多其他选择：

*   TrueZIP 使用 IOPoolService 接口的实例来管理临时文件。您可以提供自己的实现来加密所有临时文件，或者甚至将它们存储在堆上（如果它们很小）。查看 TrueZIP 驱动程序文件以查看参考实现。

*   您可以使用 ParanoidZipRaesDriver 来使用 RAES 加密的 ZIP 文件。此驱动程序通过将用于写入存档文件的并发线程数限制为一个来确保不使用未加密的临时文件。

*   您可以使用带有 FsOutputOption.ENCRYPT 的标准 ZIP 驱动程序来打开 WinZip AES 加密。为了确保不使用未加密的临时文件，您可以像 ParanoidZipRaesDriver 一样覆盖 ZipDriver.newOutputSocket 方法。

# android - 为什么 onActivityResult 返回，但我得到了正确的 requestCode？

> ID：10498277
> 
> 赞同：0
> 
> 时间：2012-05-08T12:06:57.743
> 
> 标签：android, android-intent, null, onactivityresult

我正在构建一个应用程序，其中第一个 Activity 通过`startActivityByResult`. 完成一些设置后，我需要将设置结果发回。

所以我重写了第二个 Activity 的`onPause()`方法，我得到了意图，`putExra`然后通过`setResult()`.

回到第一个活动。`onActivityResult`肯定被调用了。我之前设置了 resultCode，但意图数据为空。我不知道出了什么问题。

这是我的代码：

第一个活动

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.e("page1", requestCode + "_");
    Log.e("page1", resultCode + "_");
    Log.e("page1", (data == null) + "_");
    // if ((requestCode == 1) && (data != null)) {
    if (data != null) {
        String size = data.getStringExtra("size");
        Log.e("switch", size + "_");
        switch (size.charAt(0)) {
        case '1': {
            text.setTextSize(10);
        }
            break;
        case '2': {
            text.setTextSize(20);
        }
            break;
        case '3': {
            text.setTextSize(30);
        }
            break;
        }
    }
} 
```

我的第二个活动

```
 @Override
protected void onPause() {

    Intent intent = getIntent();
    Log.e("prefs", (intent == null) + "_");
    intent.putExtra("size", size);
    setResult(3, intent);
    super.onPause();
} 
```

我已经在 LogCat 中进行了测试。在第二个活动中。即将发送的意图绝对不为空。但是当它进入第一个活动时。Null 刚刚返回。这让我真的发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:13:29.687

您的代码有问题在`String size = data.getStringExtra("size");`这一行。你应该改变它`String size = data.getExtras.getString("size");`

在您的第一个活动中：

```
Intent intent = new Intent(context,SecondActivity.class);
startActivityForResult(intent, REQUEST_CODE); 
```

`SAVE`在您的第二个活动中，在其侦听器中创建一个名为的按钮；

```
 Intent result = new Intent();
        Bundle bundle = new Bundle();

        bundle.putString("keyName", "KeyValue");

        result.putExtras(bundle);
        setResult(RESULT_OK,result);
        finish(); 
```

再次在您的第一个活动的`onActivityresult`方法中：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode==RESULT_OK){
        if(requestCode == REQUEST_CODE){
            Log.d("Activity Result", data.getExtras.getString("keyName");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:08:39.083

你能试试这个。您希望在所有情况下手动暂停并自动后按完成活动，因此最好将您的意图数据保存在 onDestroy

```
 @Override
    protected void onPause() {
        super.onPause();
        finish();
    }

    @Override
    public void onDestroy() {
        Intent intent = getIntent();
        intent.putExtra("size", size);
        setResult(3, intent);
        super.onDestroy();
    } 
```

# eclipse - 如何调试JDK源

> ID：10498282
> 
> 赞同：5
> 
> 时间：2012-05-08T12:07:18.150
> 
> 标签：eclipse, debugging, java

我有一个非常棘手的问题，我无法立即解决。我必须调试 JDK 源代码，看看我是否可以更进一步。标准 JDK 库不包含 Debug 符号。

谁能告诉我在哪里可以下载 JDK 调试版本？我正在使用 eclipse 和远程调试，JDK 1.5 或 1.6 都适合我的情况。如果没有，我可能必须按照谷歌搜索的指南重新编译`rt.jar`.

更清楚地说，我想要一个启用调试的 JDK 发行版。我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:16:04.120

我建议您只使用调试信息编译您需要的类，并将您`*class`的 JDK 文件版本放入引导类路径。使用附加源 (src.zip) 配置您的 IDE。这应该有效。

我希望你不需要整个 JDK，只需要选择的类。

# iphone - 我们可以在 iphone 中为 UIImageView 设置 Pan 边界吗？

> ID：10498283
> 
> 赞同：0
> 
> 时间：2012-05-08T12:07:30.207
> 
> 标签：iphone, uiimageview, uipangesturerecognizer

专家！！！

在我的项目中，我使用的是storyboard。所以在viewController 的视图中分为两部分，一为：iAd，二为：Uiview，在哪里平移我的UIImageView。我在handlePan的代码：是

```
- (void) handlePanGestures:(UIPanGestureRecognizer*)paramSender{
if (paramSender.state != UIGestureRecognizerStateEnded && paramSender.state != UIGestureRecognizerStateFailed){

CGPoint location = [paramSender locationInView:self.mainView];//here mainView is Pan area..

[paramSender setTranslation:CGPointZero inView:self.mainView];
paramSender.view.center = location; }
} 
```

但是通过这段代码我无法得到我想要的东西..在这种情况下请建议我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:05:36.260

请启用您的 UIImageViews userInteraction

```
[imageview setUserInteractionEnabled:YES]; 
```

如果您已经这样做了，并且在平移图像视图时会调用此方法，但仍然没有发生任何事情。试试这个代码

```
CGpoint location = [paramSender translationinView:self.mainView];
[paramSender.view setCenter:location]; 
```

希望我有所帮助。

# javascript - 在Javascript中的对象文字中按名称（作为字符串）调用函数

> ID：10498284
> 
> 赞同：1
> 
> 时间：2012-05-08T12:07:38.727
> 
> 标签：javascript, oop

我目前正在用 JS 构建一些东西，并遇到了以下场景：

```
// these are set programmatically, not like this, just using as an example
var data = {'someData':'blah'};
var widget = 'NameOfWidget';
var command = 'someFunctionName';

// there is a base object that has all widgets and their commands as child objects
// format would be like: UBER.WidgetName.command(data);
// here is how I have tried to call it thus far
UBER[widget][command](data);
window['UBER'][widget][command](data); 
```

我觉得我快要弄清楚了，只需要一点帮助来弄清楚确切的语法！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:10:21.920

你不这样做是有原因的吗？

```
window[UBER.widget.command](data); 
```

编辑：我明白你在做什么，这个答案~~目前不正确~~应该可以工作，因为我了解你正在尝试做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:21:30.733

尝试：

```
UBER['widget']['command'](data); 
window['UBER']['widget']['command'](data); 
```

或者

```
UBER.widget.command(data);
window.UBER.widget.command(data); 
```

这假设 command 是一个函数，widget 和 UBER 是对象，window['UBER'] = UBER。

当您使用括号语法引用对象属性时，您需要使用字符串。如果使用`.`语法，则必须使用不是 Javascript 中的保留字的合法字符串文字。

例如：

```
var command = function(){return 5},
    widget = {},
    UBER = {};
UBER.widget = widget;
widget.command = command;
console.log(UBER['widget']['command']()); // prints 5 to Chrome's developer console or firebug 
```

# php - SoapFault - 响应后未找到类

> ID：10498287
> 
> 赞同：3
> 
> 时间：2012-05-08T12:07:45.823
> 
> 标签：php, soap

我得到这个 SoapFault 我不明白。调用下面的函数，codewordStemExists()，应该创建一个 SoapClient，它连接到一个已启动并正在运行的 SoapServer（我找不到服务器端报告的错误）。

```
private static function initClient() {
    ini_set("soap.wsdl_cache_enabled", "0");
    $classmap = array(
        'CodewordStemExists' => 'CodewordStemExists',
        'CodewordStemExistsResponse' => 'CodewordStemExistsResponse',
    );
    $client = new \SoapClient("http://..../service.wsdl", array(
        "trace" => true,
        "exceptions" => true,
        "classmap" => $classmap
    ));
    return $client;
}

public static function codewordStemExists($stem) {
    $client = self::initClient();
    try {
        $req = new CodewordStemExists();
        $req->username = "....";
        $req->password = "....";
        $req->codewordStem = $stem;

        $res = $client->codewordStemExists($req);
        return (bool)$res->result;
    }
    catch (\SoapFault $e) {
        var_dump($client->__getLastResponse());

}

/** The result from var_dump: */
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://....">
<SOAP-ENV:Body>
    <ns1:CodewordStemExistsResponse><ns1:result>false</ns1:result>
    </ns1:CodewordStemExistsResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

肥皂故障：

```
Class 'CodewordStemExistsResponse' not found 
```

引导时需要 CodewordStemExistsResponse，可以随时实例化它。

有人见过这个吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:32:26.753

检查这是否需要适当的命名空间，例如`\vendor\CodewordStemExistsResponse`.

# c++ - C++：为什么 const_cast 是邪恶的？

> ID：10498292
> 
> 赞同：17
> 
> 时间：2012-05-08T12:08:00.097
> 
> 标签：c++, pointers, casting, constants, const-cast

我一直听到这个说法，虽然我真的找不到 const_cast 是邪恶的原因。

在以下示例中：

```
template <typename T>
void OscillatorToFieldTransformer<T>::setOscillator(const SysOscillatorBase<T> &src)
{
    oscillatorSrc = const_cast<SysOscillatorBase<T>*>(&src);
} 
```

我正在使用引用，并且通过使用 const，我正在保护我的引用不被更改。另一方面，如果我不使用 const_cast，代码将无法编译。为什么 const_cast 在这里不好？

这同样适用于以下示例：

```
template <typename T>
void SysSystemBase<T>::addOscillator(const SysOscillatorBase<T> &src)
{
    bool alreadyThere = 0;
    for(unsigned long i = 0; i < oscillators.size(); i++)
    {
        if(&src == oscillators[i])
        {
            alreadyThere = 1;
            break;
        }
    }
    if(!alreadyThere)
    {
        oscillators.push_back(const_cast<SysOscillatorBase<T>*>(&src));
    }
} 
```

请给我一些例子，在这些例子中我可以看到使用 const_cast 是一个坏主意/不专业。

感谢您的任何努力:)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-08T12:11:17.863

因为您正在阻挠 的目的`const`，即*阻止您修改论点*。因此，如果你抛弃了`const`某些东西的本质，那么它就毫无意义并且会使你的代码臃肿，并且它会让你违背你对函数用户做出的不会修改参数的承诺。

此外，使用`const_cast`会导致未定义的行为。考虑这段代码：

```
SysOscillatorBase<int> src;
const SysOscillatorBase<int> src2;

...

aFieldTransformer.setOscillator(src);
aFieldTransformer.setOscillator(src2); 
```

在第一次通话中，一切都很好。你可以抛弃一个`const`不真实的对象的本质`const`并对其进行很好的修改。然而，在第二次召唤中，`setOscillator`你正在抛弃`const`一个真正`const`对象的本质。如果您碰巧在任何地方修改了该对象，那么您会通过修改一个真正的对象来导致**未定义的行为**`const`。因为你无法判断一个被标记的对象`const`是否*真的* `const`在它被声明的地方，所以`const_cast`除非你确定你永远不会改变这个对象，否则你不应该使用它。如果你不这样做，那有什么意义呢？

在您的示例代码中，您存储了一个`const`指向可能是 的对象的非指针`const`，这表明您打算改变该对象（否则为什么不只存储一个指向 的指针`const`？）。这可能会导致未定义的行为。

**此外**，这样做可以让人们将临时传递给您的函数：

```
blah.setOscillator(SysOscillatorBase<int>()); // compiles 
```

然后你存储一个指向临时的指针，当函数返回¹时该指针将无效。如果您采用非`const`参考，则不会出现此问题。

> 另一方面，如果我不使用 const_cast，代码将无法编译。

然后更改您的代码，不要添加强制转换以使其工作。编译器没有编译它是有原因的。既然您知道了原因，您就可以让您的`vector`保持指针指向，`const`而不是将方形孔铸成圆形孔以适合您的钉子。

因此，总而言之，最好让您的方法接受非`const`引用，而使用`const_cast`几乎从来都不是一个好主意。

* * *

¹实际上，当调用函数的表达式结束时。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-08T12:22:04.550

> 通过使用 const，我可以保护我的引用不被更改

引用不能更改，一旦初始化，它们总是引用同一个对象。引用存在`const`意味着它所引用的对象不能更改。但是`const_cast`撤消该断言并最终允许更改对象。

> 另一方面，如果我不使用 const_cast，代码将无法编译。

这不是任何理由。C++ 拒绝编译可能允许`const`更改对象的代码，因为这是`const`. 这样的程序是不正确的。`const_cast`是一种编译错误程序的方法——这就是问题所在。

例如，在你的程序中，看起来你有一个对象

```
std::vector< SysOscillatorBase<T> * > oscillators 
```

考虑一下：

```
Oscillator o; // Create this object and obtain ownership
addOscillator( o ); // cannot modify o because argument is const
// ... other code ...
oscillators.back()->setFrequency( 3000 ); // woops, changed someone else's osc. 
```

通过 const 引用传递一个对象不仅意味着被调用的函数不能改变它，而且这个函数也不能把它传递给可以改变它的其他人。`const_cast`违反了这一点。

C++ 的优势在于它提供了工具来保证有关所有权和值语义的事情。当您禁用这些工具以使程序编译时，它会启用错误。没有优秀的程序员认为这是可以接受的。

作为这个特定问题的解决方案，看起来`vector`（或您正在使用的任何容器）应该按值存储对象，而不是指针。然后`addOscillator`可以接受 const 引用，但存储的对象是可修改的。此外，容器随后拥有这些对象并确保它们被安全删除，而您无需进行任何工作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-08T12:27:01.663

除了适应接口具有非常量指针/引用但实现*不修改*参数的（*旧*`const_cast`）库之外的任何原因的使用都是*错误*和*危险*的。

 ****错误*的原因是，当您的接口采用指向常量对象的引用或指针时，您*承诺*不会更改该对象。其他代码可能取决于您不修改对象。例如，考虑一个类型，它拥有一个昂贵的复制成员，并且与它一起拥有一些其他不变量。

考虑 a`vector<double>`和预先计算的*平均值*，每当通过类接口添加新元素时都会更新 *average，因为这样更新成本很低，并且如果经常请求它，则无需每次都从数据中重新计算它。因为向量的复制成本很高，但可能需要读取访问权限，所以该类型可以提供一个*廉价*的访问器，该访问器返回一个`std::vector<double> const &`供用户代码检查容器中已经存在的值。现在，如果用户代码抛弃了引用的 const-ness 并更新了向量，则该类保持*平均值*的不变量被破坏，并且您的程序的行为变得不正确。

这也很危险，因为您无法保证传递给您的对象实际上是可修改的。考虑一个简单的函数，它接受一个 C 空终止字符串并将其转换为大写，非常简单：

```
void upper_case( char * p ) {
   while (*p) {
     *p = ::to_upper(*p);
      ++p;
   }
} 
```

现在让我们假设您决定将接口更改为采用`const char*`，并在实现中删除`const`. 与旧版本一起使用的用户代码也将与新版本一起使用，但在旧版本中将标记为错误的一些代码现在在编译时不会被检测到。考虑一下有人决定做一些愚蠢的事情`upper_case( typeid(int).name() )`。现在的问题是 的结果`typeid`不仅仅是*对可修改对象的常量引用*，而是*对常量对象的引用*。编译器可以自由地将`type_info`对象存储在只读段中，而加载器可以将其加载到内存的只读页面中。试图改变它会使你的程序崩溃。

请注意，在这两种情况下，您都无法从上下文中知道`const_cast`是否维护了额外的不变量（情况 1），或者即使对象实际上是常量（情况 2）。

另一方面，`const_cast`存在的原因是适应不支持`const`关键字的旧 C 代码。有一段时间，像`strlen`这样的函数需要 a `char*`，即使已知并记录了该函数不会修改对象。在这种情况下，使用调整类型是安全`const_cast`的，*而*不是更改*const-ness*。请注意，C 已经支持`const`了很长时间，并且`const_cast`具有较少的正确用途。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T12:12:53.873

这`const_cast`会很糟糕，因为它允许您违反方法指定的合同，即“我不会修改`src`”。调用者希望方法坚持这一点。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-08T12:17:10.763

至少是有问题的。您必须区分两个常量：

*   实例化变量的常量
    这可能导致物理常量，数据被放置在只读段中

*   引用参数/指针
    的常量 这是一个逻辑常量，仅由编译器强制执行

只有当它不是物理上的 const 时，您才可以丢弃它，并且您无法从参数中确定它。

此外，您的代码的某些部分是 const 正确的，而其他部分则不是，这是一种“气味”。这有时是不可避免的。

* * *

在您的第一个示例中，您为我假设的非常量指针分配了一个 const 引用。这将允许您修改原始对象，这至少需要一个 const 转换。为了显示：

```
SysOscillatorBase<int> a;
const SysOscillatorBase<int> b;

obj.setOscillator(a); // ok, a --> const a --> casting away the const
obj.setOscilaltor(b); // NOT OK: casting away the const-ness of a const instance 
```

同样适用于您的第二个示例。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-08T12:20:00.657

> ，虽然我真的找不到 const_cast 是邪恶的原因。

**当负责任地使用**并且**知道自己在做什么时**，它不是。（或者您是否认真地为所有那些仅通过 const 修饰符不同的方法复制粘贴代码？）

但是， const_cast 的问题在于，如果在最初[是 const](https://stackoverflow.com/questions/357600/is-const-cast-safe)的变量上使用它，它可能会触发未定义的行为。即，如果您声明 const 变量，则 const_cast 它并尝试修改它。未定义的行为不是一件好事。

您的示例恰好包含这种情况：可能将 const 变量转换为非常量。为避免在对象列表中存储`const SysOscillatorBase<T>*`(const 指针) 或`SysOscillatorBase<T>`(copy) 问题，或者传递引用而不是 const 引用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T12:13:15.683

您违反了编码合同。将值标记为 const 表示您可以使用此值但永远不要更改它。const_cast 打破了这个承诺，并可能产生意想不到的行为。

在您提供的示例中，您的代码似乎不太正确。OscillatorSrc 应该是一个 const 指针，尽管如果你真的需要改变这个值，那么你根本不应该将它作为一个 const 传入。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-08T12:12:42.047

基本上 const 向您和编译器保证您不会更改该值。当您使用 C 库函数（其中 const 不存在）时，您应该使用的唯一时间，已知不会更改值。

```
bool compareThatShouldntChangeValue(const int* a, const int* b){
    int * c = const_cast<int*>(a);
    *c = 7;
    return a == b;
}

int main(){
   if(compareThatShouldntChangeValue(1, 7)){
      doSomething();
   }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-08T12:18:37.253

您可能需要将容器定义为包含 const 对象

```
template <typename T> struct Foo {
    typedef std::vector<SysOscillator<T> const *>  ossilator_vector;
}

Foo::ossilator_vector<int> oscillators;

// This will compile
SysOscillator<int> const * x = new SysOscillator<int>();
oscillators.push_back(x);

// This will not
SysOscillator<int> * x = new SysOscillator<int>();
oscillators.push_back(x); 
```

话虽如此，如果您无法控制容器的 typedef，则可以在代码和库之间的接口处进行 const_cast 。***

# model-view-controller - 在 MVC 模式中链接模型和视图之间的东西

> ID：10498294
> 
> 赞同：1
> 
> 时间：2012-05-08T12:08:18.697
> 
> 标签：model-view-controller, mvp

我正在为通用图形编辑器 (GGE) 制作一个类图，其中我使用的是模型视图控制器 (MVC) 模式。模式真的很棒，但有一件事让我感到困惑。我制作了一个完整的选择类并将其绑定到 MVC 中的模型，但是在这种情况下，只有一个视图（在模型中的许多视图中）可以具有活动选择。如果我将 Selection 类绑定到视图，我就破坏了模式的规则（视图中的逻辑“看不见”信息）。

我的问题是：有没有一种有效的方法可以在 View 和 Model 之间“中间某处”链接 Selection 类，以便 Model 包含所有逻辑信息，但所有 View 都可以始终拥有自己的选择活动？类图是 Java 的，如果这意味着什么的话。

我发现了 MVC 的一个衍生品，模型视图展示器 (MVP) 模式，但我认为它没有任何帮助。我错过了什么吗？

谢谢你的耐心。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:39:32.943

视图有状态是可以的，特别是如果您的“视图”类是一个 MVC 组件（例如 Swing 中的 JTable），只要您在视图中不放置任何逻辑。MVC 和 MVP 都是关于分离不同类型的代码以实现模块化、可测试性和可理解性。只要你符合这些标准，你就不需要教条地遵循“规则”。

# android - Android ExpandableListActivity 图标随机消失

> ID：10498299
> 
> 赞同：0
> 
> 时间：2012-05-08T12:08:40.847
> 
> 标签：android, expandablelistview, android-imageview

我有一个扩展 ExpandableListActivity 的活动，其中包含一些父组和一些子条目...在组内的条目左侧我放了一个图标。每当我打开一个条目时，它会随机取出图标并且不再显示它们......我在那里找不到模式所以我不太确定我的错误在哪里（也许我以错误的方式回收我的对象？！ )

这是我的 BaseExpandableListAdapter：

```
@Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.child_row, null);
        }

        TextView tvName = (TextView) convertView.findViewById(R.id.tvName);
        tvName .setText(arrChildelements[groupPosition][childPosition]);
        ImageView tvIcon = (ImageView) convertView.findViewById(R.id.imageViewIcon);

        switch (childPosition) {
            case 0:
                tvIcon.setImageResource(R.drawable.ic_1);
                break;
            case 1:
                tvIcon.setAlpha(0);
                break;
            case 2:
                tvIcon.setImageResource(R.drawable.ic_2);
                break;
            case 3:
                tvIcon.setImageResource(R.drawable.ic_3);
                break;
            case 4:
                tvIcon.setImageResource(R.drawable.ic_4);
                break;
            case 5:
                tvIcon.setImageResource(R.drawable.ic_5);
                break;
            case 6:
                tvIcon.setImageResource(R.drawable.ic_6);
                break;
        }

        return convertView;
    } 
```

这是我的 child_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageViewIcon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:paddingLeft="40dp"
        android:src="@drawable/empty" />

    <TextView
        android:id="@+id/tvName"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:autoLink="all"
        android:gravity="center_vertical"
        android:paddingLeft="10dp"
        android:textSize="18sp" >
    </TextView>

</LinearLayout> 
```

如果您需要任何其他信息和/或代码，请告诉我！

提前感谢您的帮助，请原谅我的英语......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:19:17.800

这是因为`tvIcon.setAlpha(0);`和优化...在其他情况下（在 switch 语句之前）`ListView`您应该将 alpha 设置为 1 ...`tvIcon.setAlpha(1);`

编辑：

或者`tvIcon.setAlpha(0);`尝试`tvIcon.setImageResource(R.drawable.empty);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:22:32.223

```
tvIcon.setBackgroundResource(R.drawable.video_icon); 
```

试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:43:52.297

这是由于视图回收而发生的。你可以像这样修复它：

1）声明一个数组来保存适配器中的必要信息

```
private int iconArray[][]; 
```

2) 在调用适配器后立即填充数组：

```
iconArray = new int[arrChildelements.length][6];
int i=0;
int j=0;
for (i; i < arrChildelements.length; i++) {
    for (j; j < arrChildelements[i].length; j++) {
        arrChildelements[i][j] = j;
    }
} 
```

3）使用这个数组来设置图标，如下所示：

```
 switch (iconArray[groupPosition][childPosition]) {
        case 0:
            tvIcon.setImageResource(R.drawable.ic_1);
            break;
        case 1:
            tvIcon.setAlpha(0);
            break;
        case 2:
            tvIcon.setImageResource(R.drawable.ic_2);
            break;
        case 3:
            tvIcon.setImageResource(R.drawable.ic_3);
            break;
        case 4:
            tvIcon.setImageResource(R.drawable.ic_4);
            break;
        case 5:
            tvIcon.setImageResource(R.drawable.ic_5);
            break;
        case 6:
            tvIcon.setImageResource(R.drawable.ic_6);
            break;
    } 
```

请注意，我将 6 硬编码为每个组的子元素数，因为这是您在代码中显示的开关数。

希望这可以帮助！

# sql-server - 在 T-SQL 中加入来自 XML 的数据

> ID：10498300
> 
> 赞同：7
> 
> 时间：2012-05-08T12:08:50.863
> 
> 标签：sql-server, xml, tsql, join

我有以下 XML 消息：

```
DECLARE @XML AS XML
SET @XML = 
'<Message>
<Changes>
    <Deleted>
        <ROW id="1" name="Nicole" surname="Bartlett" city="denver" balance="779.4663" dateOfBirth="1991-12-11T14:05:42.830" maritalStatus="S" />
        <ROW id="1" name="Nicole" surname="Bartlett" city="boston" balance="779.4663" dateOfBirth="1991-12-11T14:05:42.830" maritalStatus="S" />
    </Deleted>
    <Inserted>
        <ROW id="1" name="Nicole" surname="Bartlett" city="denver" balance="779.4663" dateOfBirth="1991-12-11T14:05:42.830" maritalStatus="S" />
        <ROW id="1" name="Nicole" surname="Bartlett" city="boston" balance="779.4663" dateOfBirth="1991-12-11T14:05:42.830" maritalStatus="S" />
    </Inserted>
</Changes>
</Message>' 
```

我需要从此消息中选择数据并在 id 字段上加入另一个表。以下代码不起作用：

```
SELECT T.c.value('./@id', 'int') as id, t.c.value('./@name', 'varchar(max)') as name 
FROM @XML.nodes('/Message/Changes/Deleted/ROW') T(c)
inner join other_table tbl
    on tbl.id = id 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T12:11:38.413

```
SELECT T.c.value('./@id', 'int') as id, t.c.value('./@name', 'varchar(max)') as name 
FROM @XML.nodes('/Message/Changes/Deleted/ROW') T(c)
inner join other_table tbl
    on tbl.id = T.c.value('./@id', 'int') 
```

# java - 它是线程安全的机制吗？

> ID：10498303
> 
> 赞同：3
> 
> 时间：2012-05-08T12:09:06.010
> 
> 标签：java, multithreading, thread-safety

这个类是线程安全的吗？

```
class Counter {
  private ConcurrentMap<String, AtomicLong> map = 
    new ConcurrentHashMap<String, AtomicLong>();
  public long add(String name) {
    if (this.map.get(name) == null) {
      this.map.putIfAbsent(name, new AtomicLong());
    }
    return this.map.get(name).incrementAndGet();
  }
} 
```

你怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:12:37.117

是的，只要你把地图做成最终版。if 不是必需的，但如果需要，您可以出于性能原因保留它，尽管它很可能不会产生明显的差异：

```
public long add(String name) {
  this.map.putIfAbsent(name, new AtomicLong());
  return this.map.get(name).incrementAndGet();
} 
```

**编辑**

为此，我已经快速测试了这两种实现（有和没有检查）。对同一字符串的 1000 万次调用需要：

*   250 毫秒检查
*   480 毫秒无检查

这证实了我所说的：除非您调用此方法数百万次，或者它是代码的性能关键部分，否则它不会产生任何影响。

**编辑 2**

完整的测试结果 - 看看**`BetterCounter`哪个会产生更好的结果**。现在测试非常具体（没有争用 + get 总是有效），不一定符合您的使用情况。

> 计数器：482 毫秒
> LazyCounter：207 毫秒
> MPCounter：303 毫秒
> BetterCounter：135 毫秒

```
public class Test {

    public static void main(String args[]) throws IOException {
        Counter count = new Counter();
        LazyCounter lazyCount = new LazyCounter();
        MPCounter mpCount = new MPCounter();
        BetterCounter betterCount = new BetterCounter();

        //WARM UP
        for (int i = 0; i < 10_000_000; i++) {
            count.add("abc");
            lazyCount.add("abc");
            mpCount.add("abc");
            betterCount.add("abc");
        }

        //TEST
        long start = System.nanoTime();
        for (int i = 0; i < 10_000_000; i++) {
            count.add("abc");
        }
        long end = System.nanoTime();
        System.out.println((end - start) / 1000000);

        start = System.nanoTime();
        for (int i = 0; i < 10_000_000; i++) {
            lazyCount.add("abc");
        }
        end = System.nanoTime();
        System.out.println((end - start) / 1000000);

        start = System.nanoTime();
        for (int i = 0; i < 10_000_000; i++) {
            mpCount.add("abc");
        }
        end = System.nanoTime();
        System.out.println((end - start) / 1000000);

        start = System.nanoTime();
        for (int i = 0; i < 10_000_000; i++) {
            betterCount.add("abc");
        }
        end = System.nanoTime();
        System.out.println((end - start) / 1000000);        
    }

    static class Counter {

        private final ConcurrentMap<String, AtomicLong> map =
                new ConcurrentHashMap<String, AtomicLong>();

        public long add(String name) {
            this.map.putIfAbsent(name, new AtomicLong());
            return this.map.get(name).incrementAndGet();
        }
    }

    static class LazyCounter {

        private final ConcurrentMap<String, AtomicLong> map =
                new ConcurrentHashMap<String, AtomicLong>();

        public long add(String name) {
            if (this.map.get(name) == null) {
                this.map.putIfAbsent(name, new AtomicLong());
            }
            return this.map.get(name).incrementAndGet();
        }
    }

    static class BetterCounter {

        private final ConcurrentMap<String, AtomicLong> map =
                new ConcurrentHashMap<String, AtomicLong>();

            public long add(String name) {
                AtomicLong counter = this.map.get(name);
                if (counter != null)
                    return counter.incrementAndGet();

                AtomicLong newCounter = new AtomicLong();
                counter = this.map.putIfAbsent(name, newCounter);

                return (counter == null ? newCounter.incrementAndGet() : counter.incrementAndGet());
            }
    }

    static class MPCounter {

        private final ConcurrentMap<String, AtomicLong> map =
                new ConcurrentHashMap<String, AtomicLong>();

        public long add(String name) {
            final AtomicLong newVal = new AtomicLong(),
                    prevVal = map.putIfAbsent(name, newVal);
            return (prevVal != null ? prevVal : newVal).incrementAndGet();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:11:29.067

**编辑**

是的，如果你制作地图`final`。`add()`否则，不能保证所有线程在第一次调用时都能看到最新版本的地图数据结构。

几根线可以到达的身体`if()`。这`putIfAbsent()`将确保只有一个`AtomicLong`被放入地图。

`putIfAbsent()`如果地图中没有新值，就不应该有任何方法可以返回。

所以当第二个`get()`被执行时，它永远不会得到一个`null`值，因为只有一个`AtomicLong`可以被添加到映射中，所有线程都将获得相同的实例。

**[EDIT2]**下一个问题：效率如何？

此代码更快，因为它避免了不必要的搜索：

```
public long add(String name) {
    AtomicLong counter = map.get( name );
    if( null == counter ) {
        map.putIfAbsent( name, new AtomicLong() );
        counter = map.get( name ); // Have to get again!!!
    }
    return counter.incrementAndGet();
} 
```

这就是为什么我更喜欢 Google 的[CacheBuilder](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/cache/CacheBuilder.html)的原因，它有一个在找不到密钥时调用的方法。这样，地图只被搜索一次*，*我不必创建额外的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:05:15.140

似乎没有人拥有完整的解决方案，即：

```
 public long add(String name) {
    AtomicLong counter = this.map.get(name);
    if (counter == null) {
      AtomicLong newCounter = new AtomicLong();
      counter = this.map.putIfAbsent(name, newCounter);
      if(counter == null) {
        counter = newCounter;
      }
    }

    return counter.incrementAndGet();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:13:20.017

那这个呢：

```
class Counter {

  private final ConcurrentMap<String, AtomicLong> map = 
    new ConcurrentHashMap<String, AtomicLong>();

  public long add(String name) {
    this.map.putIfAbsent(name, new AtomicLong());
    return this.map.get(name).incrementAndGet();
  }
} 
```

*   `map`应该保证在`final`调用第一个方法之前它对所有线程完全可见。（详见[17.5 final 字段语义（Java 语言规范）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)）
*   我认为这`if`是多余的，我希望我没有监督任何事情。

编辑：添加了来自 Java 语言规范的引用：

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T12:17:32.993

我认为您最好使用以下方法：

```
class Counter { 
  private ConcurrentMap<String, AtomicLong> map = new ConcurrentHashMap<String, AtomicLong>();

  public long add(String name) {
    AtomicLong counter = this.map.get(name);
    if (counter == null) {
      AtomicLong newCounter = new AtomicLong();
      counter = this.map.putIfAbsent(name, newCounter);
      if (counter == null) {
        // The new counter was added - use it
        counter = newCounter;
      }
    }

    return counter.incrementAndGet();
  }
} 
```

否则可能会同时添加多个线程而您不会注意到（因为您忽略了 putIfAbsent 返回的值）。

我假设您永远不会重新创建地图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T12:44:02.767

此解决方案（请注意，我只显示`add`方法的主体 - 其余部分保持不变！）使您无需调用`get`：

```
final AtomicLong newVal = new AtomicLong(), 
                 prevVal = map.putIfAbsent(name, newVal);
return (prevVal != null? prevVal : newVal).incrementAndGet(); 
```

很可能一个 extra`get`比一个 extra 贵得多`new AtomicLong()`。

# javascript - 数据进入/退出处理程序

> ID：10498310
> 
> 赞同：1
> 
> 时间：2012-05-08T12:09:38.507
> 
> 标签：javascript, d3.js

d3.js 中如何调用进入/退出处理程序？我在这里发布了一个[小提琴，](http://jsfiddle.net/UVQxc/3/)并在这里复制了代码。为了清楚起见，我还发布了几张图片。

![当数据 = [13, 15, 21, 42, 5, 18]](../Images/00d9fbb345d3d22399dfec1542e8f41f.png)
什么时候`data = [13, 15, 21, 42, 5, 18]`

![转换到数据 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]](../Images/2a4c5fee1841b7234b52bd121c6e35c4.png)
在过渡到`data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`

![实际上应该如何](../Images/b534611b1f8f70ece11253fc14df1b72.png)
实际上应该如何

```
var data1 = [13, 15, 21, 42, 5, 18],
    data2 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
    data = data1,
    format = function () {
        var text = arguments[0],
            args = Array.prototype.slice.call(arguments, 1);
        return text.replace(/{(\d+)}/g, function(match, number) { 
            return typeof args[number] != 'undefined' ? args[number]: match;
        });
    };

var width = 400,
    height = 400,
    outerRadius = Math.min(width, height) / 2,
    innerRadius = outerRadius * .6,
    color = d3.scale.category20(),
    donut = d3.layout.pie(),
    arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);

//Get default settings for a donut chart
var vis, arcs;

vis = d3.select("body")
    .append("svg").attr("width", width)
    .attr("height", height)
    .attr('class', 'pie');

arcs = vis.selectAll('path').data(donut(data));

arcs.enter()
    .append('svg:path')
    .attr('transform', format("translate({0}, {0})", outerRadius))
    .attr('fill', function(d, i) { return color(i); })
    .attr('d', arc)
    .each(function(d) { this._previous = d; })
    .on('click', function(d, i) {
        data = data === data1 ? data2: data1;
        arcs.data(donut(data))
       .transition()
            .duration(750)
            .attrTween('d', function(a) {
                var i = d3.interpolate(this._previous, a);
                this._previous = i(0);
                return function(t) {
                    return arc(i(t));
                };
            });
    });

arcs.exit().remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:12:09.723

好吧，我似乎自己解决了部分问题。我在这里发布了一个[小提琴](http://jsfiddle.net/UVQxc/6/)并在这里复制了代码。

```
var data1 = [13, 15, 21, 42, 5, 18],
    data2 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
    data = data1, set = 1,
    format = function() {
        var text = arguments[0],
            args = Array.prototype.slice.call(arguments, 1);
        return text.replace(/{(\d+)}/g, function(match, number) {
            return typeof args[number] != 'undefined' ? args[number] : match;
        });
    };

var width = 400,
    height = 400,
    outerRadius = Math.min(width, height) / 2,
    innerRadius = outerRadius * .6,
    color = d3.scale.category20(),
    donut = d3.layout.pie(),
    arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);

var vis, arcs;

vis = d3.select("svg")
    .attr("width", width)
    .attr("height", height)
    .attr('class', 'pie');

function update(){
    data = data === data1 ? data2: data1;
    arcs = vis.selectAll('path')
        .data(donut(data));

    arcs.enter()
        .append('svg:path')
        .attr('transform', format("translate({0}, {0})", outerRadius))
        .attr('fill', function(d, i) { return color(i); })
        .attr('d', arc).each(function(d) { this._previous = d; });

    arcs
        .transition()
            .duration(750)
            .attrTween('d', function(a) {
                var i = d3.interpolate(this._previous, a);
                this._previous = i(0);
                return function(t) {
                    return arc(i(t));
                };
            });

    arcs.exit().remove();
}

update();
d3.select(window).on('click', function(){
  update();
}); 
```

# java - 将数据从android插入mysql数据库时数据未更改

> ID：10498314
> 
> 赞同：0
> 
> 时间：2012-05-08T12:10:03.687
> 
> 标签：java, php, android, mysql, insert

我在向 mysql 插入数据（纬度和经度）时遇到问题。当我第一次运行应用程序时，插入了纬度和经度，但是当我更新位置（纬度和经度）并再次插入数据时，只有经度发生变化，纬度保持与之前插入的数据相同的值。我完全困惑为什么它不起作用。如果有人能帮我解决这个问题，我会很高兴。

这是我的代码

```
 package com.android.tyegah;

    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpGet;
    import org.apache.http.impl.client.DefaultHttpClient;

     import android.app.Activity;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;
    import android.widget.Toast;

    public class TyegahActivity extends Activity {
    private LocationManager locationManager;
private Location latestLocation;
private double lat;
private double longi;
private Button updateButton;
private TextView locUpdate;
public String url = "http://servername/file.php";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    locationManager =(LocationManager)getSystemService(LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,onLocationChange);

    locUpdate = (TextView)findViewById(R.id.locUpdate);
    updateButton = (Button)findViewById(R.id.updateButton);
    updateButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,onLocationChange);
            if (latestLocation.getLatitude() != lat && latestLocation.getLongitude() != longi ) {
                lat = latestLocation.getLatitude();
                longi = latestLocation.getLongitude();  
                }
            String latitude = Double.toString(lat);
            String longitude = Double.toString(longi);
            url  += "?latitude=" + latitude + "&longitude=" + longitude;
            locUpdate.setText(latitude + "," + longitude);
            getRequest(url);
            Toast.makeText(getBaseContext(),
                    "Location updated : Lat: " + latestLocation.getLatitude() +
                    " Lng: " + latestLocation.getLongitude(),
                    Toast.LENGTH_LONG).show();
            }
    }); 

 }

public void getRequest(String Url) {
    // TODO Auto-generated method stub
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);
    try {
        HttpResponse response = client.execute(request);

    } catch (Exception ex) {
        locUpdate.setText(ex.toString());
    }
}

LocationListener onLocationChange = new LocationListener() {

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        latestLocation = location;
        if (latestLocation.getLatitude() != lat && latestLocation.getLongitude() != longi ) {
        Toast.makeText(getBaseContext(),
                "Location updated : Lat: " + latestLocation.getLatitude() +
                " Lng: " + latestLocation.getLongitude(),
                Toast.LENGTH_LONG).show();
        }
    }
};

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, onLocationChange);
}

} 
```

这是 php 文件：

```
<?php 
mysql_connect("localhost","root",""); 
mysql_select_db("php"); 
$longitude = $_GET['longitude'];
$latitude = $_GET['latitude'];
    if($latitude && $longitude){
      $string= "insert into table (latitude, longitude)values('".$latitude."','".$longitude."')";
       mysql_query($string);
       }

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:32:23.957

您正在更新 onCreate() 方法的 url，请检查活动生命周期 onCreate() 方法将在创建活动或重新创建活动时第一次调用。我建议您在为服务器请求创建 url 时使用回调机制来获取位置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:27:14.533

只需更改两行并尝试

在android中你写过

```
if (latestLocation.getLatitude() != lat && latestLocation.getLongitude() != longi ) 
```

而是写

```
if (latestLocation.getLatitude() != lat || latestLocation.getLongitude() != longi ) 
```

和在 php

你已经推杆了

```
$string= "insert into table (latitude, longitude)values('".$latitude."','".$longitude."')"; 
```

而是把

```
$string= "insert into table (latitude, longitude) values('".$latitude."','".$longitude."')"; 
```

试试看，我认为它会工作

# mysql - 如何在 Codeigniter 中计算页面浏览量并按 IP 地址限制计数？

> ID：10498316
> 
> 赞同：3
> 
> 时间：2012-05-08T12:10:11.563
> 
> 标签：mysql, database, codeigniter, count, pageviews

我正在计算人们在我的网站上查看我的用户资料的次数。

我想在我的数据库中保留一个计数，并在用户刷新页面时停止计数增加。受 IP 限制。

我知道每天都需要创建和清空 IP 地址缓存。

是否有关于如何执行此操作的说明。任何人都可以告诉我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T12:19:35.227

1.  您可以使用`$this->input->ip_address()`在控制器中获取用户的IP地址
2.  在您保存 ip 的数据库中，用户第一次访问该站点的时间和一个计数器
3.  如果时间少于 24 小时，请不要增加计数器。
4.  如果时间大于 24 小时，则更新 ip 的时间并更新计数器。
5.  获取计数器：`$this->db->select_sum("counter")->get("views_table");`并处理结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:15:12.170

创建数据库表：

```
id | page_id | ip_address | views 
```

读出用户的 ip 地址 ( `$_SERVER['REMOTE_ADDR']`)，检查当前页面的表中是否存在 ip-address，如果存在则增加`views`列，否则创建新的记录设置`views`为 1。如果`views > $x`给他们一个简洁的信息，请他们不要那么好奇。

没那么难，是吗？;)

对于“当用户刷新页面时停止计数增加”部分；你的意思是如果页面视图*不是*刷新（有人按 F5） ，你*只想*增加计数？这几乎是不可能的，不要尝试...

 *对于清空数据库，请使用 cronjob，或者如果您无权访问它，请使用poormans cron（谷歌）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:47:23.777

*   在您存储用户的表中，添加表示查看次数的列。
*   每次访问您的个人资料时，您都需要增加此值。
*   按照 giorgio 的说明制作一个单独的表并存储 IP 地址，但添加一个 DATETIME 列。
*   每次访问您的个人资料时，您都需要检查该个人资料的该表中是否存在 IP 地址：如果存在，则不要增加查看次数；如果不是，则插入带有 IP 地址、您的个人资料 ID 和日期时间的新行。
*   每天使用 cron 设置一次清理作业，以确定跟踪的持续时间：删除所有早于 1 天、2 天、一周的条目 - 任何你想要的 - 这是跟踪 IP 的时长。这意味着当 x 天后相同的 IP 访问时，视图计数可能会增加，除非它仍然存在于数据库中。*

# jquery - 最近的还是父母或孩子？

> ID：10498319
> 
> 赞同：0
> 
> 时间：2012-05-08T12:10:30.647
> 
> 标签：jquery, jquery-selectors

我有看起来像这样的 html

```
<div class="portlet portlet_30">

    <div class="portlet_header portlet_header_30">
        header content here
    </div>

    <div class="portlet_sub_header portlet_sub_header_30">
        <input type="text" class="textbox_30" />
    </div>

    <div class="portlet_content portlet_content_30">
        results go here
    </div>

    <div class="portlet_footer portlet_footer_30">
        <input type="button" class="button_30" />
    </div>

</div> 
```

如果我在单个页面上有 2 个或更多，即

```
<div class="portlet portlet_30">

    <div class="portlet_header portlet_header_30">
        header content here
    </div>

    <div class="portlet_sub_header portlet_sub_header_30">
        <input type="text" class="textbox_30" />
    </div>

    <div class="portlet_content portlet_content_30">
        results go here
    </div>

    <div class="portlet_footer portlet_footer_30">
        <input type="button" class="button_30" />
    </div>

</div>

<div class="portlet portlet_30">

    <div class="portlet_header portlet_header_30">
        header content here
    </div>

    <div class="portlet_sub_header portlet_sub_header_30">
        <input type="text" class="textbox_30 />
    </div>

    <div class="portlet_content portlet_content_30">
        results go here
    </div>

    <div class="portlet_footer portlet_footer_30">
        <input type="button" class="button_30" />
    </div>

</div> 
```

如何停止干扰，即`portlet_content_30`如果单击第二个 portlet 中的按钮，我如何只更改第二个中的文本。第一个应该发生相同的情况，而不会影响屏幕上的第二个或任何其他相同的 portlet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:13:01.317

```
$('.button_30').click(function(){
    $(this).closest('.portlet.portlet_30').text("foo");
}); 
```

或者，如果您想更改其中一个`portlet portlet_30`div：

```
$('.button_30').click(function(){
    $(this).closest('.portlet.portlet_30')
           .find('.portlet_header.portlet_header_30').text("foo");
}); 
```

[**现场演示**](http://jsfiddle.net/yxvSc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:14:08.537

```
$('.button_30').click(function(){
    $(this).parent('.portlet').find(".portlet_content").text(result);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:14:22.073

尝试：

```
$('input.button_30').click(function(){console.log('x');
    $(this).parent().siblings('div.portlet_content.portlet_content_30').html('Your html here')
})​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZNmKp/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:14:22.407

你可以尝试这样的事情（写自我的头脑：P）：

```
 $('.button_30').click(function() {
        var parent = $(this).closest('.portlet');
        $('.portlet_content_30', parent).html('foobar');
  }); 
```

# mysql - 大数据库备份最佳实践

> ID：10498320
> 
> 赞同：14
> 
> 时间：2012-05-08T12:10:32.517
> 
> 标签：mysql, database, backup, database-backups

我维护大型 MySQL 数据库。我需要每晚备份它，但数据库一直处于活动状态。有来自用户的查询。现在我只是禁用该网站然后进行备份，但这非常糟糕，因为该服务被禁用并且用户不喜欢这样。

如果在备份过程中更改了数据，那么备份数据的好方法是什么？

对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T12:24:26.597

我已经使用我的数据库服务器的只读复制从属实现了这个方案。

MySQL 数据库复制非常容易设置和监控。您可以对其进行设置以获取对生产数据库所做的所有更改，然后每晚将其脱机以进行备份。

Replication Slave 服务器可以以只读方式启动，以确保不能直接对其进行更改。

还有其他不需要复制从属的方法，但根据我的经验，这是解决这个问题的一种非常可靠的方法。

[这是MySQL Replication](http://dev.mysql.com/doc/refman/5.5/en/replication.html)上文档的链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-05T09:48:52.347

如果你有一个非常大的（像我一样 50G+）只有 MySQL MyISAM 的数据库，你可以使用锁和`rsync`. 根据 MySQL 文档，您可以在读取锁定处于活动状态时安全地复制原始文件，而您无法使用 InnoDB 进行操作。因此，如果目标是零停机时间并且您有额外的 HD 空间，请创建一个脚本：

```
rsync -aP --delete /var/lib/mysql/* /tmp/mysql/sync 
```

然后执行以下操作：

1.  做`flush tables`
2.  运行脚本
3.  做`flush tables with read lock;`
4.  再次运行脚本
5.  做`unlock tables;`

在第一次运行时 rsync 将在不停止 MySQL 的情况下复制很多内容。第二次运行会很短，只会延迟写查询，所以是**真正的零停机解决方案**。

6.  `rsync`从`/tmp/mysql/sync`远程服务器做另一个，压缩，保留增量版本，任何你喜欢的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:19:30.763

这部分取决于您使用的是 innodb 还是 myiasm。对于innodb；mySQL 有自己的（需要花钱的）解决方案（innodb hot copy），但是你可能想看看 Percona 的开源版本：

[http://www.percona.com/doc/percona-xtrabackup/](http://www.percona.com/doc/percona-xtrabackup/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:13:43.263

您要做的就是所谓的“在线备份”。这是一个指向可能选项矩阵的指针，其中包含更多信息：

[http://www.zmanda.com/blogs/?p=19](http://www.zmanda.com/blogs/?p=19)

它基本上归结为您正在使用的存储后端以及您有多少可用硬件。

# c - 如何在 C 中定义全局“结构”变量

> ID：10498321
> 
> 赞同：1
> 
> 时间：2012-05-08T12:10:32.563
> 
> 标签：c, struct, global

我想定义一个由 struct 创建的全局/公共变量。我无法访问 main 或任何其他函数中的 user_list.x 或 y/z。当我调试下面的代码时，我收到以下错误“在不是结构或联合的东西中请求成员'x'”。如何声明可以从不同函数访问的全局结构变量？谢谢

```
#include <stdio.h>
#include <stdlib.h>

struct routing {
        int x;
        int y;
        int z;
};
struct routing user_list[40];

int main(int argc,char *argv[])
{

    user_list.x = 1;
    printf("user_list.x is %d",user_list.x);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T12:11:23.683

您使用的是对象数组而`struct`不是`struct`对象。

指定要访问的数组成员：

```
int i = 0;

user_list[i].x = 1;
printf("user_list[i].x is %d",user_list[i].x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:13:18.907

您必须通过索引访问您的数组。

尝试

```
user_list[i].x = 1;
printf("user_list[i].x is %d",user_list[i].x); 
```

您的索引在哪里`i`（之前定义的，或“常量”）

# java - 重启时 log4j 翻转

> ID：10498323
> 
> 赞同：3
> 
> 时间：2012-05-08T12:10:34.713
> 
> 标签：java, log4j

我在我的项目中使用 log4j FileAppender 来收集某些结果。当我的应用程序重新启动时，我想保留以前的结果文件并开始一个新的。那可能吗？

例如：

*   启动应用程序，将结果写入 results.log
*   申请结束
*   重启应用，将结果写入 results_1.log
*   ...

我检查了 DailyRollingFileAppender，但这并不是我真正需要的，因为它会在某个日期设置上自动翻转。当应用程序重新启动时，我需要翻转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T13:49:37.403

我通过编写自己的附加程序解决了这个问题：

```
import org.apache.log4j.RollingFileAppender;

/**
   This appender rolls over at program start.
   This is for creating a clean boundary between log data of different runs.
*/
public class RunRolledFileAppender
    extends RollingFileAppender
{
  public RunRolledFileAppender() { }

  @Override
  public void activateOptions() {
    super.activateOptions();
    super.rollOver();
  }

  @Override
  public void rollOver() { }

} 
```

请注意，难看的 rollOver() 禁用是必要的，因为 MaxFileSize 设置不起作用，否则 Appender 也会每 10MB 滚动一次，这是我不需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:19:20.087

让您的应用程序动态设置日志文件怎么样？您可以通过在应用程序启动时以编程方式创建文件附加程序并将其附加到当前记录器来实现此目的。

例如，以下代码将根据当前时间创建新的日志文件。例如`results_1336482894.log`，`results_1336486780.log`

```
 Date now = new Date();
    FileAppender myFileAppender = new FileAppender();
    myFileAppender.setName("myFileAppender");
    myFileAppender.setFile("results_" + now.getTime() + ".log");
    myFileAppender.setLayout(new PatternLayout("%d %-5p [%t]: %m%n"));
    myFileAppender.setThreshold(Level.DEBUG);
    myFileAppender.activateOptions();

    Logger myLogger = Logger.getLogger("name of your logger"); //Or use getRootLogger() instead
    myLogger.addAppender(myFileAppender); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-13T06:43:43.067

`Log4j2`的`RollingFileAppender`有政策叫`OnStartupTriggeringPolicy`。

正如文件所述：

> `OnStartupTriggeringPolicy`如果日志文件早于当前 JVM 的开始时间并且达到或超过最小文件大小，则该策略会导致翻转。

配置示例`xml`（仅`Policies`）：

```
<Policies>
  <OnStartupTriggeringPolicy />                # restart on startup of JVM
  <SizeBasedTriggeringPolicy size="20 MB" />   # restart file if log file reaches 20MB
  <TimeBasedTriggeringPolicy />                # restart if currend date don't mach date in log file name     
</Policies> 
```

更多信息和文档： [https ://logging.apache.org/log4j/2.x/manual/appenders.html#RollingFileAppender](https://logging.apache.org/log4j/2.x/manual/appenders.html#RollingFileAppender)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:29:20.107

您可以在应用程序启动时使用[`ExternallyRolledFileAppender`](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/ExternallyRolledFileAppender.html)和类来翻转日志文件。[`Roller`](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/Roller.html)

这是一个示例类：

```
import org.apache.log4j.Logger;
import org.apache.log4j.varia.Roller;
public class Test {
    private static final Logger log = Logger.getLogger(Test.class);
    public static void main(final String[] args) {
        Roller.main(new String[] {"localhost", "9999"});
        log.debug("Started application!");
    }
} 
```

还有一个示例`log4j.properties`文件：

```
log4j.appender.file=org.apache.log4j.varia.ExternallyRolledFileAppender
log4j.appender.file.File=app.log
log4j.appender.file.Port=9999
log4j.appender.file.MaxBackupIndex=5
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=[%d{yyyy-MM-dd HH:mm:ss.SSS}] %-5p: %t: %c: %m%n
log4j.rootLogger=DEBUG, file 
```

请注意以下警告[`ExternallyRolledFileAppender`](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/varia/ExternallyRolledFileAppender.html)：

> 请注意，发起者未经过身份验证。任何人都可以触发翻转。在生产环境中，建议您添加某种形式的保护以防止意外翻转。

如果这不符合您的需求，那么创建您自己的类似`Appender`实现应该很简单。

# c# - 在 ObservableCollection 中查找项目而不使用循环

> ID：10498325
> 
> 赞同：42
> 
> 时间：2012-05-08T12:10:45.057
> 
> 标签：c#, wpf, collections

目前我有以下语法（列表是一个包含具有许多不同属性的对象的列表（其中标题是其中之一）：

```
for (int i=0; i < list.Count; i++)
{
   if(title == list[i].Title)
   {
    //do something
   }
} 
```

我怎样才能访问，`list[i].Title`而不必遍历我的整个集合？由于我的列表趋于变大，这可能会影响我的程序的性能。

我的程序中有很多类似的语法（通过 for 循环和索引访问公共属性）。但我确信一定有更好更优雅的方式来做到这一点？

find 方法似乎是一个选项，因为我的列表包含对象。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-08T12:13:29.233

我不知道你*到底是什么意思，但从技术上讲，**如果没有*循环，这是不可能的。

可能您的意思是使用 LINQ，例如：

```
list.Where(x=>x.Title == title) 
```

值得一提的是，没有跳过迭代，而是简单地包装到 LINQ 查询中。

希望这可以帮助。

**编辑**

换句话说，如果您**真的**关心性能，请继续按照您已经在做的方式进行编码。否则，请选择 LINQ 以获得更简洁明了的语法。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-05-08T12:15:57.313

Linq来了：

```
var listItem = list.Single(i => i.Title == title); 
```

如果没有与谓词匹配的项目，它将引发异常。或者，有`SingleOrDefault`.

如果您想要与标题匹配的项目集合，则有：

```
var listItems = list.Where(i => i.Title ==  title); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-26T16:14:24.507

如果您不需要索引，我必须将它用于添加条件

```
using System.Linq; 
```

采用

```
if(list.Any(x => x.Title == title){
// do something here
} 
```

这将告诉您是否有任何变量满足您的给定条件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-08T12:18:51.077

我建议将这些存储在哈希表中。然后，您可以使用键访问集合中的项目，这是一种更有效的查找。

```
var myObjects = new Hashtable();
myObjects.Add(yourObject.Title, yourObject);
...
var myRetrievedObject = myObjects["TargetTitle"]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-08T12:17:29.377

考虑创建索引。字典可以解决问题。如果您需要列表语义，子类化并将索引保​​留为私有成员......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-08T12:16:58.927

您正在寻找 ObservableCollection 不是基于哈希的集合（如字典或哈希集）。最好的解决方案可能是从基于哈希的集合派生并实现 INotifyCollectionChanged，这将为您提供与 ObservableCollection 相同的行为。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T12:17:18.620

ObservableCollection 是一个列表，因此如果您不知道元素位置，则必须查看每个元素，直到找到预期的元素。

可能的优化 如果您的元素已排序，请使用二进制搜索来提高性能，否则使用字典作为索引。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T12:18:59.543

好吧，如果您有 N 个对象并且需要获取所有对象的标题，则必须使用循环。如果您只需要标题并且您真的想改进它，也许您可​​以制作一个仅包含标题的单独数组，这将提高性能。在说这会损害性能之前，您需要定义可用的内存量和可以处理的对象的数量，并且无论如何解决方案都是改变程序的设计而不是算法。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-09-29T14:28:09.787

也许这种方法可以解决问题：

```
int result = obsCollection.IndexOf(title); 
```

IndexOf(T)
搜索指定对象并返回整个 Collection 中第一次出现的从零开始的索引。

（继承自收藏）

[https://docs.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.observablecollection-1?view=netframework-4.7.2#methods](https://docs.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.observablecollection-1?view=netframework-4.7.2#methods)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2019-11-11T11:34:05.097

一个 observablecollection 可以是一个 List

```
{
    BuchungsSatz item = BuchungsListe.ToList.Find(x => x.BuchungsAuftragId == DGBuchungenAuftrag.CurrentItem.Id);
} 
```

# javascript - vimeo 嵌入在隐藏的 div 中自动启动

> ID：10498329
> 
> 赞同：0
> 
> 时间：2012-05-08T12:10:49.130
> 
> 标签：javascript, vimeo

我的页面上有两个 vimeo ebmed 视频。两者都设置为自动播放，并且位于隐藏的 div 中。

在 Windows 中，在所有浏览器上 - 没问题。

在 mac - 当我进入页面时，两个视频开始自动播放......

我也在用fancybox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:15:30.897

也许 mac 上的视频使用 HTML5 视频，而在 Windows 上它使用 Flash？两者之间的区别在于即使元素被隐藏，HMTL5 视频/音频也会自动启动。

# delphi - Delphi 7 TRichTextEdit 框中的文本无法正确显示

> ID：10498332
> 
> 赞同：2
> 
> 时间：2012-05-08T12:11:00.833
> 
> 标签：delphi, delphi-7, rtf, trichedit

使用delphi 7 TRichEdit组件，通过复制和粘贴从msword文档中导入RTF数据，但是如果数据包含在一个框中，则无法正确显示，即

![在此处输入图像描述](../Images/2caa6e0fcf941b91d9a57b60c7875959.png)

请协助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:44:14.437

尝试使用以下内容，它应该将该类子[`TRichEdit`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TRichEdit)类化为 4.1 版。但是我不知道 Delphi 7 是否支持插入类，所以只需尝试粘贴以下代码并尝试构建项目。
如果它编译，那么如果你放置一个[`TRichEdit`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TRichEdit)组件并运行项目，你应该得到 RichEdit 4.1。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ComCtrls, RichEdit;

type
  TRichEdit = class(ComCtrls.TRichEdit)
  protected
    procedure CreateParams(var Params: TCreateParams); override;
  end;

type
  TForm1 = class(TForm)
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  FRichEditModule: THandle;

implementation

{$R *.dfm}

{ TRichEdit }

procedure TRichEdit.CreateParams(var Params: TCreateParams);
const
  RichEditClassName = 'RICHEDIT50A';
  RichEditModuleName = 'MSFTEDIT.DLL';
  HideScrollBarsStyle: array[Boolean] of DWORD = (ES_DISABLENOSCROLL, 0);
  HideSelectionsStyle: array[Boolean] of DWORD = (ES_NOHIDESEL, 0);
begin
  if FRichEditModule = 0 then
  begin
    FRichEditModule := LoadLibrary(RichEditModuleName);
    if FRichEditModule <= HINSTANCE_ERROR then
      FRichEditModule := 0;
  end;
  inherited CreateParams(Params);    
  CreateSubClass(Params, RichEditClassName);
  Params.Style := Params.Style or HideScrollBarsStyle[HideScrollBars] or
    HideSelectionsStyle[HideSelection];
  Params.WindowClass.style := Params.WindowClass.style and
    not (CS_HREDRAW or CS_VREDRAW);
end;

initialization

finalization
  if FRichEditModule <> 0 then
    FreeLibrary(FRichEditModule);

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:39:11.280

终于开工了

就像将 Riched20.dll（最新版​​本）添加到应用程序文件夹一样简单

# php - 在MYSQL上插入与正确产品id对应的图片链接

> ID：10498335
> 
> 赞同：0
> 
> 时间：2012-05-08T12:11:11.487
> 
> 标签：php, mysql, database, insert

我需要一些帮助，我希望你能在这方面帮助我。我正在使用图库脚本，用户在其中创建某个产品并上传产品的图像。现在是 MySQL 部分。这是我如何进行的。

-1：在 products 表上添加一个新产品：(productid, userid, productname)

```
$insertproduct="insert into products(userid, productname) values
   ('3', 'Leather Jacker')";
   db->query($insertproduct); 
```

然后我以这种方式获取productid：

```
$getproductid = $db->query("SELECT max(productid) from products where userid=3");

while($row = mysqli_fetch_row($getproductid))
  {
   $pid=$row[0];
  } 
```

稍后在插入与该产品对应的图像链接时使用 productid

```
$query = "insert into images(imagelink, productid) values
                    ('".$imagelink."', '".$pid."')";                      
$insert = $db->query($query); 
```

但是当我检查数据库时，一切都很好，除了'productid = 0'，所以它就像：

imgid imagelink productid

166 203572012_1547_17_1.jpg 0

当我用一些静态数字替换 $pid 时，productid 似乎被正确保存

imgid imagelink productid 166 203572012_1547_17_1.jpg 541

所以我想也许问题出在这里：

```
while($row = mysqli_fetch_row($getproductid))
  {
   $pid=$row[0];
  } 
```

请帮帮我。这个问题快把我逼疯了。PS：我是初学者，所以请不要评判我：）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:16:07.687

替换这个`$row = mysqli_fetch_row($getproductid)`，`$row = $getproductid->fetch_row()`我也认为`db->query($insertproduct);`这个`$db->query($insertproduct);`

# javascript - 自动化服务器无法创建对象，ie7

> ID：10498349
> 
> 赞同：0
> 
> 时间：2012-05-08T12:12:04.433
> 
> 标签：javascript, internet-explorer, internet-explorer-7, activex

```
var fSO = new ActiveXObject("Scripting.FileSystemObject");
var fh = fSO.CreateTextFile(path + fileName + ".xml", true, true); 
```

我收到以下 javascript 错误：`Automation server can't create object`即使我在 IE 中启用了我能想到的所有 ActiveX 设置（ActiveX 和插件部分）。我为此使用的浏览器是IE7。

什么可能导致此错误消息？

任何帮助深表感谢！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-08T17:15:52.207

转到工具 > Internet 选项 > 安全 > 自定义级别 在 ActiveX 控件和插件下，为未标记为安全的初始化和脚本 ActiveX 控件选择启用

# java - 填写表格的 JS 书签

> ID：10498351
> 
> 赞同：1
> 
> 时间：2012-05-08T12:12:05.823
> 
> 标签：java, javascript, bookmarks, fill

我想在这个网站[http://sms.orange.pl/](http://sms.orange.pl/)上使用带书签的 java 脚本填写收件人和发件人字段。我做了一些谷歌搜索，这就是我想出的：

```
$javascript:document.getElementByName("RECIPIENT").value='TEST';document.getElementByName("SENDER").value='TEST'; 
```

和

```
$javascript:document.getElementsByTagName('input')[2].value='TEST';document.getElementsByTagName('input')[5].value='TEST'; 
```

不幸的是，两者都行不通。怎么了？我正在使用 Chrome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:17:58.473

我认为开头的美元符号是不必要的。试试这个：

```
javascript:document.getElementByName("RECIPIENT").value='TEST';document.getElementByName("SENDER").value='TEST';return null;

javascript:document.getElementsByTagName('input')[2].value='TEST';document.getElementsByTagName('input')[5].value='TEST';return null; 
```

另请注意，我`return null;`在最后添加了。这是为了阻止页面消失，并且只向您显示最后一条语句的返回值，在本例中为`TEST`.

此外，如果您正在寻找更完整的自动化测试环境，请使用 Google for Selenium。这绝对是绝妙的，而且比制作这些 javascript 的东西要容易大约一百万倍。

希望有帮助。

# php - 一个简单的PHP登录系统。它真的需要 SSL 证书吗？

> ID：10498358
> 
> 赞同：0
> 
> 时间：2012-05-08T12:12:24.340
> 
> 标签：php, encryption, ssl, login

我计划提供我的网站设计，如果有人对易于管理的博客感兴趣（或者只是不想为他/她自己的新帖子制作新的 html 文件）这个简单的登录/博客系统就是我将提供它们作为补充。

它的主要目的是通过提供密码（用户名不能更改）**只允许一个**用户登录，并允许他/她编辑一些帐户设置（显示名称、头像、简历）或创建新页面/帖子将新内容写入窗口。这应该是一个非常简单的系统，没有注册表 - 我想提供给所有选择购买我的设计的客户的框架。

由于登录系统如此简单，我敢说几乎不需要身份验证 - 只需输入密码（+用户输入的任何其他形式，例如新帖子的内容）。所以基本上，它应该具有以下功能：`trim()`, `htmlspecialchars()`, `mysql_string_escape()`, 使用正则表达式和用户会话检查有效字符（**顺便说一句，在只有一个用户的网站上甚至需要用户会话吗？**）。这么简单的网站还需要什么？我正在考虑使用自签名 SSL 证书，但是，它会导致安全警告。在这种情况下甚至需要它吗？

这个系统将在我从事的每个 HTML/CSS 设计项目中重复使用，所以现在需要决定，因为我将为那些只想运行他们的个人网站的人提供这个框架和网站/blog 没有学习所有的 wordpress 东西。

我知道网站应该加密，但由于这里需要的唯一加密是密码，我应该使用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:22:43.570

除非您希望客户的登录密码以明文形式通过网络传输，否则您需要 SSL 证书。您可以使用自签名的（如您所提到的），并指示您的客户在他们实际登录之前验证证书中的信息，如果您不想购买合适的证书。一旦你打开了 https 会话，为什么不让它保持打开状态，让用户在相对安全的情况下工作呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:10:20.930

请不要滚动您自己的登录系统：

[http://cubicspot.blogspot.com/2012/05/dear-web-developers-stop-making-login.html](http://cubicspot.blogspot.com/2012/05/dear-web-developers-stop-making-login.html)

您还可以获得由浏览器根证书颁发机构签名的免费 SSL 证书：

[http://cubicspot.blogspot.com/2011/02/truly-free-ssl-certificates-are-here.html](http://cubicspot.blogspot.com/2011/02/truly-free-ssl-certificates-are-here.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:18:03.933

如果它应该只有一个可以登录的用户，那么您可以将所有管理内容放在一个单独的文件夹中，并使用密码保护该文件夹`.htaccess`

在你的`.htaccess`文件中使用这个

```
AuthUserFile /full/path/to/.htpasswd
AuthName "Please Log In"
AuthType Basic 
```

这`.htpasswd`是您将存储用户密码的文件。

有关更多信息，请参阅： http: [//www.addedbytes.com/lab/password-protect-a-directory-with-htaccess/](http://www.addedbytes.com/lab/password-protect-a-directory-with-htaccess/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T12:29:25.687

您需要的安全级别与机制的复杂性无关，与您所保护的事物的价值无关。

如果您将此作为一项服务提供，您可能不想要一个允许您的客户创建的网站被黑客接管的弱身份验证系统。如果您在传输过程中不对用户密码进行加密，那么黑客的生活就会变得非常非常轻松 - 他们所要做的就是在星巴克设置，破解 WIFI，观察您的客户登录，然后接管他们的网站。所以，请使用 SSL 证书；自签名可以保护您的数据，但确实会导致安全警告 - 使用适当的证书。

一般来说，用户不信任自签名证书是正确的，因为这是（相当简单的）黑客可能会攻击您的一种方式。例如，如果您想窃取 StackOverflow.com 用户的凭据，您可以注册域 stack0verfl0w.com，并为登录页面颁发自签名证书。用户会看到该证书，它将与（伪造的）域匹配，如果他们习惯于接受自签名证书，他们会继续在黑客的网站上输入他们的详细信息。

所以，是的，您可以使用自签名证书，它会加密网络流量，但训练您的用户忽略浏览器的安全警告并不是一个好主意。“自签名”的定义是它们没有在任何地方注册。

其次，请不要以纯文本形式存储密码。这样做的常用方法是使用单向哈希存储密码（PHP 内置了这个）；即使黑客可以窃取您的数据库，哈希函数也是单向的；没有（简单的）方法可以检索明文密码。当用户登录时，您使用相同的算法对他们的密码进行哈希处理，如果数据库中的哈希匹配，您就让他们进入。

第三，考虑使用现成的身份验证框架。[http://hybridauth.sourceforge.net/index.html](http://hybridauth.sourceforge.net/index.html)似乎符合您的要求。一般来说，最好为这类事情使用现成的解决方案，因为您的用户有期望，通过自定义代码满足这些期望是昂贵的，而且容易出错......

许可是一门黑暗的艺术，但总的来说，开源框架可以根据非常宽松的要求重新分发（通常，您只需要告诉人们您正在包含一个开源组件）。

# namespaces - 在命名空间下组织大量类

> ID：10498359
> 
> 赞同：1
> 
> 时间：2012-05-08T12:12:31.250
> 
> 标签：namespaces

我们正在使用 Visual Studio 2010 将 Windows 应用程序转换为基于 .Net 的浏览器。虽然我对 .Net 并不陌生，但我对创建基于 3 层架构的应用程序很陌生。我想为我们数据库中的每个表创建类并将它们放在命名空间下。类名将与表名相同，因此命名空间中的每个类都将被引用，例如 CompanyName.ProductName.Entity.{table name}。现在我的问题：

这可行吗？

我会为每个表类创建单独的项目吗？请注意，随着更多程序的转换，将创建新的表类。

这会创建一个巨大的 .dll 吗？

其他开发人员如何访问我创建的类，它们存储在哪里，以便我可以使用 Using 指令引用这些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:19:29.390

始终使用单独的 cs 文件创建类名，因此很容易对文件进行版本控制。如果我们将类保存在单个文件或多个文件中，它与 dll 的大小无关。

在您的解决方案中创建像 Project > ProductName > Classes 这样的文件夹结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:26:13.280

1.  我会为每个表类创建单独的项目吗？
    不，不要为每个表类创建单独的项目。这太细了。
2.  这会创建一个巨大的 .dll 吗？默认情况下，每个项目都会创建一个单独的 DLL（我相信您可以使用 IL 合并来更改它。）但是，每个命名空间与 DLL 没有直接关系。也就是说，您可以在单个 DLL 中拥有多个命名空间。

我们通常所做的是创建一个 DAL 库。这将是它自己的项目，通常命名为`ProductName.Data`Then 在其中我们可能有一个类似`ProductName.Data.Models`or的命名空间`ProductName.Data.Repositories`。

命名空间主要用于帮助您组织代码。他们还帮助编译器。例如，如果您有一个名为 的数据库类`Users`，并且它位于 中，那么如果它位于单独的命名空间中`XYZ.Data`，您仍然可以拥有一个名为的视图模型，例如.`Users``XYZ.ViewModels`

我们所做的另一件事是在同一产品的 DLL 中保持根名称空间相同。所以我们最近有我们的数据库在`XYZ.Data`. 然后我们将应用程序特定的逻辑放在一个单独的 DLL 中并命名它。`XYZ.AppLogic` 我们在命名空间中也有视图模型`XYZ.ViewModels`。

我不相信有任何硬性/快速规则来限制您拥有的命名空间的数量。默认情况下，Studio 会尝试为项目中的每个文件夹创建一个新的命名空间。也就是说，我经常尝试避免命名空间过载，因为我不想在我的文件顶部看到这样的内容：

```
using XYZ.Data.Models.Accounts;
using XYZ.Data.Models.Users;
using XYZ.AppLogic.Authentication;
using XYZ.AppLogic.Users;
using XYZ.AppLogic.Settings;
using XYZ.ViewModels.UserPreferences; 
```

但是，这更多的是个人喜好。

**编辑解决方案视图**

*   我的解决方案
    *   我的项目数据
        *   楷模
            *   用户.cs
            *   帐户.cs
            *   设置.cs
    *   存储库
        *   用户存储库.cs
        *   AccountRepository.cs

User.cs 是我定义表的 POCO（Plain Ol' CLR Object）。

Repository 文件夹包含特定于我的 ORM（我正在使用 PetaPoco）的东西，它让我可以实际访问我的用户数据。

例如，我的 UserRepository 可能有一个方法

```
public User GetById(int id)
{
   var db = new Database(<myConnectionStringName>);
   return db.SingleOrDefault<User>(id);
} 
```

该语法特定于 PetaPoco，但它是我将数据对象与实际数据库连接分开的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T14:00:18.347

我一直在寻找的简单答案是使用我的命名空间作为默认命名空间创建一个解决方案。对于每个文件，创建一个新类，并在每个文件中指定命名空间。感谢所有回复的人。

# android - 为多个按钮实现 OnTouchListener

> ID：10498364
> 
> 赞同：0
> 
> 时间：2012-05-08T12:12:39.113
> 
> 标签：android, events, touch

我`OnTouchListener`为我的布局实现了包括其中的每一个`layout/widget`，并且我成功地检索了滑动的方向和`widget/layout`接收滑动的 ID。

我的问题是，如果用户在两个或更多不同的对象上滑动，例如他在两个按钮上从左向右滑动，第一个按钮接收到触摸事件，我只得到那个按钮的 id。如何检索进行滑动的对象的所有 ID（与滑动键盘功能相同）？

有没有办法通过触摸事件的 X 和 Y 获取用户在滑动移动期间触摸的每个对象的 ID？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:19:26.130

如果我目前了解您的问题，那么您可以执行以下操作。

在按钮的 OnTouch 方法中使用下面的代码。

```
 LinearLayout mLinearlayout=(LinearLayout) v.getParent(); 
```

通过这种方式，您将获得按钮父视图，现在执行从父视图获取其他视图的过程。这里我`LinearLayout` 仅用于示例，因为我有`LinearLayout`我的父视图`Button` `View`。

# axapta - Dynamics AX 2009 -> 视频一步一步

> ID：10498365
> 
> 赞同：-2
> 
> 时间：2012-05-08T12:12:39.833
> 
> 标签：axapta

我遇到了“Dynamics AX 2009”的问题，最困难的是“总帐”，当我检查网络时，我没有找到关于这个主题的重要信息。我需要有关“Dynamics AX 2009”的视频，**但要一步一步地从开始到高级事物**以及“总帐”中的关系，例如“General Jurnals”与“Tax”有关，因为......？这对我来说非常重要，我必须了解这个软件。

为什么给我减分？这是正常的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:49:58.770

如果您正在寻找视频，为什么不试试 Youtube，因为它是最有可能找到任何东西的地方？

或者谷歌“Dynamics AX 2009 - General Ledger Tutorials”并检查你得到的结果。

另一件事实际上是发布您的问题，因为其他人有可能遇到同样的事情并且能够提供帮助......

# r - 在 Emacs 中更改低级 ess-mode 的背景颜色

> ID：10498369
> 
> 赞同：6
> 
> 时间：2012-05-08T12:12:44.323
> 
> 标签：r, emacs, ess

由于我经常使用 Latex 和 Sweave/knitr，我想知道是否有可能在 Emacs 中更改不同模式的背景颜色，例如更改劣质-ess-mode (R) 或 ess-mode ( R-Scripts）变黑。起初，以下代码似乎有效。但是，一旦我从 ess-mode 更改为其他缓冲区/模式，就会应用颜色设置。

```
(defun pk-black ()
(set-background-color "black")
(set-foreground-color "white"))
(add-hook 'ess-mode-hook 'pk-black) 
```

有没有办法只为 Emacs 中的 ess-mode/inferior-ess-mode 更改背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:12:01.983

也许有用：[BufferBackgroundColor](http://www.emacswiki.org/emacs/BufferBackgroundColor)

# android - 是否可以在库清单中定义服务而不在主机清单中定义它？

> ID：10498373
> 
> 赞同：2
> 
> 时间：2012-05-08T12:12:59.273
> 
> 标签：android

我有一个包含 Android Application 类的子类的库。子类包含一个启动服务的方法（也包含在库项目中）。

当我将库包含在我的主机应用程序中时，活动管理器抱怨它无法启动服务意图（未找到）。

代码结构为：

### 库清单：

```
<service name="com.my.project.MyService" /> 
```

### 库中的应用程序子类：

```
Intent intent = new Intent(this, MyService.class);
startService(intent); 
```

我可以通过在主机应用程序清单中再次定义服务来解决问题；但是，我不希望将此要求强加给使用该库的开发人员。

我的问题是，我可以避免在主机清单中引用库服务的要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:47:38.350

值得一提的是，虽然它不会影响您当前的实现（如果我没看错的话），但应该注意哪个`Context`传递给`Intent`构造函数。

例如，如果您决定将您的 APK 移至`Service`单独的 APK，则在客户端应用程序中将找不到该服务`Context`。

然后，您可以改用替代`Intent`构造函数：

```
Intent intent = new Intent("com.my.service.project", "com.my.service.project.MyService"); 
```

或者将 a 添加`BroadcastReceiver`到`com.my.service.project`项目中，然后由 a`sendBroadcast`而不是`startService`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:26:37.810

不

至少据我所知。您需要在清单中声明它才能使其处于活动状态。

您可以通过编程方式注册接收器。你可以用谷歌搜索。

# c# - 如何使用 C# 和 Excel 2010 在打开时保存 Excel 文件而不会收到格式警告

> ID：10498375
> 
> 赞同：4
> 
> 时间：2012-05-08T12:13:04.607
> 
> 标签：c#, visual-studio-2010, excel, format, savefiledialog

我正在使用 Excel 2010。我正在尝试使用此代码保存我的 excel 文件。它确实保存了一个 .xls 文件，但是当我打开该文件时，我收到以下消息：

> 您尝试打开的文件“tre.xls”的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自推力源。您现在要打开文件吗？

如果我按`yes`文件打开。但是我需要什么来摆脱这种格式弹出窗口？

我的代码：

```
using System;
using System.Windows.Forms;
using ExcelAddIn1.Classes;
using ExcelAddIn1.Classes.Config;
using Microsoft.Office.Interop.Excel;
using Application = Microsoft.Office.Interop.Excel.Application;
using System.Runtime.InteropServices;

private void Foo(object sender, EventArgs e)
{
    SaveFileDialog saveFileDialog = new SaveFileDialog();
    saveFileDialog.Filter = "Execl files (*.xls)|*.xls";
    saveFileDialog.FilterIndex = 0;
    saveFileDialog.RestoreDirectory = true;
    saveFileDialog.CreatePrompt = true;
    saveFileDialog.FileName = null;
    saveFileDialog.Title = "Save path of the file to be exported";

    if (saveFileDialog.ShowDialog() == DialogResult.OK)
    {
        // Save. 
        // The selected path can be got with saveFileDialog.FileName.ToString()
        Application excelObj = 
            (Application)Marshal.GetActiveObject("Excel.Application");
        Workbook wbook = excelObj.ActiveWorkbook;
        wbook.SaveAs(saveFileDialog.FileName, XlFileFormat.xlWorkbookDefault, 
            Type.Missing, Type.Missing, false, false, 
            XlSaveAsAccessMode.xlNoChange, Type.Missing, Type.Missing, 
            Type.Missing, Type.Missing, Type.Missing);
        wbook.Close();
    }
} 
```

当我以正常方式保存在excel中时，我得到“Book1.xlsx”，打开没有问题。

============= 最终解决方案 =============

```
private void Foo(object sender, EventArgs e)
{
    SaveFileDialog saveFileDialog = new SaveFileDialog();
    saveFileDialog.Filter = "Execl files (*.xls)|*.xls";

    saveFileDialog.FilterIndex = 0;
    saveFileDialog.RestoreDirectory = true;
    saveFileDialog.CreatePrompt = true;
    saveFileDialog.FileName = null;
    saveFileDialog.Title = "Save path of the file to be exported";

    if (saveFileDialog.ShowDialog() == DialogResult.OK)
    {
        Application excelObj = (Application)Marshal.GetActiveObject("Excel.Application");
        Activate(); // <-- added (recommend by msdn, but maybe not nessary here)
        Workbook wbook = excelObj.ActiveWorkbook;
        wbook.SaveAs(saveFileDialog.FileName, XlFileFormat.xlExcel8, Type.Missing,
            Type.Missing, false, false, XlSaveAsAccessMode.xlNoChange, Type.Missing,
            Type.Missing, Type.Missing, Type.Missing, Type.Missing);
        //                wbook.Close(); // <-- don't want this anymore
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T12:22:44.830

使用您的代码将工作簿保存为 Open XML，因为对于 Excel 2007+ 的`XlFileFormat.xlWorkbookDefault`计算结果为。`XlFileFormat.xlOpenXMLWorkbook`这是警告的原因：您将文件命名为 XLS，但实际上它是 XLSX。

您可以在`saveFileDialog.Filter`属性中将文件扩展名更改为 xlsx 或强制 Excel 对象使用 XLS 格式保存`XlFileFormat.xlExcel8`。

**编辑**
使用它来保存您的文档：

```
wbook.SaveAs(saveFileDialog.FileName, XlFileFormat.xlExcel8, 
            Type.Missing, Type.Missing, false, false, 
            XlSaveAsAccessMode.xlNoChange, Type.Missing, Type.Missing, 
            Type.Missing, Type.Missing, Type.Missing); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:43:27.253

try to set alerts to OFF

```
oExcel.DisplayAlerts = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:24:07.000

[此问题是由称为扩展强化的功能引起的，您可以在此处](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/03/11/excel-2007-extension-warning.aspx)找到有关它的更多信息。

不幸的是，上面的链接还指出，至少在 Office 14 之前，此代码没有预期的更改。

如果您不想寻找解决方案，而只是想解决问题，请在注册表中插入此键以禁止通知：

```
[HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Excel\Security] “ExtensionHardening”=dword:00000000 
```

You can accomplish the above by doing the following:

Open your Registry (*Start* -> *Run* -> `regedit.exe`).

Navigate to `HKEY_CURRENT_USER\SOFTWARE\MICROSOFT\OFFICE\12.0\EXCEL\SECURITY`.

Right click in the right window and choose *New* -> *DWORD*

Type “<code>ExtensionHardening” as the name (without the quotes)

Verify that the data has the value “<code>0″.

# javascript - Javascript 确认框

> ID：10498376
> 
> 赞同：2
> 
> 时间：2012-05-08T12:13:09.880
> 
> 标签：javascript

我尝试使用确认框，但按“确定”后它不起作用，这是我的确认框

```
<script language="JavaScript">
{literal}
function confirmBox()
{
 var where_to= confirm("Silmek istediğinizden emin misiniz?");
 if (where_to== true)
     return true;
 else{
     alert("Silme işleminden vazgeçtiniz yönlendiriliyorsunuz");
     return false;
 }
}
{/literal}
</script>

 <form name="removeFortune" method="post" action="#">
    <table border="0" name="tableArticle">
     {foreach from=$articles value=article}
        <tr>
            <td><input type="checkbox" name="checkArticle[]" value="{$article.id}" /></td>
            <td>{$article.title}</td>
        </tr>
        {/foreach}
    </table>
    <input type="submit" onclick="confirmBox()" name="removeArticle" value="Sil" />
    <br /><br />

    {$deleteMessage}

</form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T12:17:41.030

如果您希望它在按 OK 后提交，您需要更改 1 个简单的事情。添加退货

```
onclick="return confirmBox()" 
```

虽然我会说：

```
onsubmit="return confirmBox()" 
```

# android - ImageView - 如何以编程方式膨胀或添加？

> ID：10498392
> 
> 赞同：1
> 
> 时间：2012-05-08T12:13:45.133
> 
> 标签：android, imageview

我以编程方式添加 ImageView 没有成功。有没有简单的方法以编程方式将 ImageView 添加到 Activity 中？

谢谢

编辑：

我已经尝试过了，但它不起作用。

```
 for(Bitmap b: photoField){
                try{
                    Log.d("BIT", "Bitmapa "+b);
                    if(b!=null){
                        ImageView imv=new ImageView(PoiDisplay.this);
                        imv.setImageBitmap(b);
                    }
                }catch (NullPointerException e) {
                    e.printStackTrace();
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:28:17.170

获取您要放置图像的布局ID

```
Relative or Linear or any other layout..

RelativeLayout urLayoutId=(RelativeLayout)finViewById(R.id.RelativeLayoutIdInXml);

    for(Bitmap bitmap: photoField){
                    try{

                        if(bitmap!=null){
                            ImageView img=new ImageView(PoiDisplay.this);
                            img.setImageBitmap(bitmap);
                            urLayoutId.addView(img);
                        }
                    }catch (NullPointerException e) {
                        e.printStackTrace();
                    }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:42:52.593

使用此代码

```
ImageView i=new ImageView(this);
i.setImageResource(R.drawable.ic_launcher); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:29:54.113

您只是在创建它而不是添加它。添加您的布局视图。首先创建或获取布局。

LinearLayout lp = (LinearLayout) findViewByid(R.id.linear_layout_name)

```
 for(Bitmap b: photoField){
            try{
                Log.d("BIT", "Bitmapa "+b);
                if(b!=null){
                    ImageView imv=new ImageView(PoiDisplay.this);
                    imv.setImageBitmap(b);
                    lp.addview(imv)
                }
            }catch (NullPointerException e) {
                e.printStackTrace();
            } 
```

# iphone - 重新开始并升级商店中的应用程序（新项目 - CoreData）

> ID：10498393
> 
> 赞同：2
> 
> 时间：2012-05-08T12:13:45.617
> 
> 标签：iphone, objective-c, ios, core-data, core-data-migration

我在商店中有一个带有 CoreData 模型的应用程序，我想完全更改该应用程序（删除一些垃圾、组织、新的 CoreData 模型......等）。

**所以我想重新开始并创建新项目**，当我尝试将商店中的旧应用程序升级到这个新应用程序时会发生什么？（我担心CoreData）

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:22:04.490

如果您稍微更改核心数据模型，则需要将数据迁移到新模型：

> 您只能使用用于创建它的托管对象模型打开 Core Data 存储。因此，更改模型将使其与之前创建的商店不兼容（因此无法打开）。如果您更改模型，则需要将现有商店中的数据更改为新版本 - 更改商店格式称为迁移。

这来自苹果的文档：http: [//developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)

因此，如果您希望用户在新版本中拥有他们的旧数据，那么您实际上必须复制旧的核心数据模型，以便提取数据并将其迁移到新模型中。当然，对于该版本之后的任何版本，您都可以摆脱旧模型。

# wpf - 监视添加到 sql 表 wpf 中的项目

> ID：10498399
> 
> 赞同：0
> 
> 时间：2012-05-08T12:14:19.363
> 
> 标签：wpf, c#-4.0

我有一个生成大量数字并将它们写入 sql 数据库中的表的应用程序。当进程将数字写入表时，我提供了一个选项来查看已经写入数据库的数字。我想做“现场”。问题是我有一个处理数据库管理的 DLL，并且在我的 UI 中我使用了这个 DLL。所以我不能将 ListBox 绑定到数字表，因为 UI 不“知道”那个表……什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:55:21.163

好吧，我想到了3个解决方案：

*   从面向用户的应用程序定期轮询数据库。所以有一个线程在运行，每隔 x 秒从数据库中获取值，然后将它们传输到客户端。
*   如果您使用 sql server 将更改推送到客户端，则可以使用 Sql Notification Services，然后您不必轮询。
*   最后一个选项，我想这对你来说太过分了，但是生产“应用程序”可以通过例如消息队列或 WCF 调用通知显示应用程序。

Imho No1 最适合您，但我无法更准确地判断，因为我不知道预期的负载，....

# kernel - fib6_rule_lookup 调用

> ID：10498403
> 
> 赞同：1
> 
> 时间：2012-05-08T12:14:30.810
> 
> 标签：kernel

我有一个网络模块，如果它的目的地不是本地或直接连接的网络，它会封装一个数据包。为此，我有一个函数可以检测此数据包是否为本地数据包。此功能适用于 IPv4 数据包，我应该复制它以对 IPv6 执行相同的操作。IPv4的函数代码是：

```
bool is_v4addr_local(struct iphdr *iph, const struct net_device *output_dev)
{
    struct flowi fl;
    struct rtable *rt;
    struct net_device *dev;

    if(output_dev == NULL) {
          printk(KERN_DEBUG "output_dev is NULL!");
          return 0;
    }
    memset(&fl, 0, sizeof(fl));
    fl.u.ip4.daddr = iph->daddr;
    fl.flowi_tos = RTO_ONLINK; //locally connected
    rt = ip_route_output_key(dev_net(output_dev), &fl.u.ip4);
    if (IS_ERR(rt))
        return 0;
    dev = rt->dst.dev;
    ip_rt_put(rt);
    if (!dev)
        return 0;

    // If we got anything, it's local
    return 1;
} 
```

为了适应它，我认为我应该使用函数 fib6_rule_lookup 但我知道如何引入函数的最后一个参数（在某些示例中，他们只放置了 ip6_pol_route_lookup 但它不起作用）。

你能帮我调整这个功能吗？是我第一次在内核空间编程。

谢谢

```
bool is_v6addr_local(struct ipv6hdr *iph, const struct net_device *output_dev)
{
    struct rt6_info *rt;
    struct net_device *dev;
    struct dst_entry *dst;
    struct flowi6 fl6;

    if(output_dev == NULL) {
          printk(KERN_DEBUG "output_dev is NULL!");
          return 0;
    }

    memset(&fl6, 0, sizeof(fl6));
    fl6.flowi6_tos = RTO_ONLINK;
    fl6.daddr = iph->daddr;

    dst = fib6_rule_lookup(dev_net(output_dev), &fl6, 0, ip6_pol_route_lookup);
    if (dst->error != 0)
        return 0;
    rt = (struct rt6_info *) dst;

    dev = rt->dst.dev;
    if (!dev)
        return 0;

    // If we got anything, it's local*/
    return 1;
} 
```

# haskell - 有没有办法告诉 64 位 GHC 将 Int 视为 Int32？

> ID：10498406
> 
> 赞同：4
> 
> 时间：2012-05-08T12:14:58.973
> 
> 标签：haskell, ghc

我正在编写一个 Haskell 到 Javascript 代码生成器，使用 GHC 作为库。由于 Javascript 没有整数类型，并且它的 Number 类型只能正确表示最大为 2⁵³ 的整数，因此我将整数表示为数字，显式执行所有算术模 2³²。这在 32 位 GHC 上效果很好，但在 64 位版本上效果更差。

GHC 很乐意将 Int64 值强制转换为 Int 并将 Int 常量解释为 64 位值（例如，0xffffffff 变为 4294967295 而不是 -1），这会导致各种烦人的问题。

如果标准库是在 32 位机器上构建的，编译器即使在 64 位系统上也能很好地处理“普通”网络内容，但是“请不要使用大数字，好吗？” 不是您想在编译器手册中看到的内容。使用 -O0 编译可以缓解一些问题（但不是全部），但是（不出所料）生成的代码不仅速度慢，而且太大。

所以，我需要阻止 GHC 假设 Int 和 Int64 是等价的。这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T12:20:06.717

如果不使用 32 位 GHC，这是不可能的。

[Haskell 语言标准说](http://www.haskell.org/onlinereport/haskell2010/haskellch18.html#x26-22400018.1)你对类型的唯一了解`Int`就是它有

> 至少范围 [-2^29 .. 2^29-1

因此，您可以愉快地截断`Int`大于此值的值，并且仍然是完全符合 Haskell 2010 的实现！

但是，您可能不应该这样做，而是为 JavaScript 寻找 64 位整数类型。与例如 GHC 相同的技巧支持`Int64`32 位机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T18:56:44.690

通常，“Int”应该只用于 2^29 足够大的东西，除此之外它并不重要。在其他任何地方使用整数或 Data.Word 或 Data.Int（Int8、Int16 等）类型之一。很好的例子包括大多数大小和计数（但不是文件大小，这些天很容易超过 2^32）

经典的坏例子：Control.Concurrent.threadDelay :: Int -> IO()。参数是以 uSec 为单位的暂停时间。2^29 uSec = 8.94784853 分钟（根据谷歌计算器）。参数应该是整数，或者至少是 Word64（584 554.531 年）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:47:01.070

Javascript 数字表示为双精度数，因此请使用`Double`.

# python - 在 Python 中传递两个以上的 sys.argv

> ID：10498414
> 
> 赞同：0
> 
> 时间：2012-05-08T12:15:24.390
> 
> 标签：python, parameter-passing, visa

在 Python 中传递两个或多个 sys.argv 参数时，我有一个小问题。我使用以下代码进行操作。

```
from visa import *
import sys
inst = instrument(sys.argv[1])
inst.write("*rst; status:preset; *cls")
inst.write("voltage:UNIT Vrms")
inst.write("apply:SIN %s %s" % sys.argv[2] % sys.argv[3]) 
```

但是这段代码不会产生任何答案。

但是，如果我传递相同的代码并使用该代码嵌入值

```
from visa import *
import sys
inst = instrument("USB0::0x164E::0x13EC::TW00008555")
inst.write("*rst; status:preset; *cls")
inst.write("voltage:UNIT Vrms")
inst.write("apply:SIN 1000, 0.5") 
```

我得到结果。

有什么我想念的吗？`sys.argv`任何帮助对于在 Python中传递两个以上的 's 都会非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:17:31.323

您想将元组传递给字符串格式：

```
>>> "test %s %s" % ("a", "b")
'test a b' 
```

您当前执行此操作的方式不起作用，因为您告诉它执行两次格式化操作，将第三个参数插入第二个参数。

请注意，在新代码中，[`str.format()`](http://docs.python.org/library/stdtypes.html#str.format)字符串格式化的首选方法是：

```
>>> "test {0} {1}".format("a", "b")
'test a b' 
```

所以你会使用，例如：

```
inst.write("apply:SIN {0}, {1}".format(sys.argv[2], sys.argv[3])) 
```

这存在于 Python 2.6 及更高版本中，并且应该在模运算符上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:20:30.460

可能字符串格式不好，您应该尝试：

```
inst.write("apply:SIN %s %s" % (sys.argv[2], sys.argv[3])) 
```

在第二个片段中还有一个额外的逗号，所以也许：

```
inst.write("apply:SIN %s, %s" % (sys.argv[2], sys.argv[3])) 
```

# python - 这是一个 wsgi 中间件吗？

> ID：10498416
> 
> 赞同：1
> 
> 时间：2012-05-08T12:15:29.860
> 
> 标签：python, wsgi, django-middleware

我以为我理解了 WSGI 规范。所以我正在查看这个 Django 模块[https://github.com/django/django/blob/master/django/middleware/locale.py](https://github.com/django/django/blob/master/django/middleware/locale.py)我只是不明白它是如何实现 wsgi 中间件的，正如 pep0333 解释的那样它。

我期待在某处签名，例如

```
def __call__(self, environ, start_response) 
```

以及一个调用另一个应用程序并处理其返回值的小例程。

有人能解释一下服务器位在哪里，这个中间件中的应用程序在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:29:42.537

Django 中间件与您的想法有些不同。它位于 django 堆栈内部。通过 django 中间件，您可以访问用户发出/接收的请求和响应的每个步骤。

[https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)

这仅发生在 django 中。WSGI 处理请求并返回响应，但是 django 给你钩子来修改它一旦它命中 django。

# javascript - 即时更改 jquery(plugin) 选项

> ID：10498419
> 
> 赞同：0
> 
> 时间：2012-05-08T12:15:47.463
> 
> 标签：javascript, jquery, dom, options

这是一个非常有趣的话题，请继续阅读：

假设您使用一个插件并想即时更改设置，如果插件没有内置选项请求，则有 2 个选项可以实现此目的：

1.  您修改插件以处理请求中的选项

2.  您尝试修改 javascript onrequest。

它是一个通用主题，但让我们以这个简单的图像裁剪插件为例： [http ://deepliquid.com/projects/Jcrop/](http://deepliquid.com/projects/Jcrop/)

如果我想在链接上更改纵横比。

页面加载设置：

```
<script>
    jQuery(function($){
      $('#target').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 2/3
      }
</script> 
```

将设置 onclick 更改为

```
<script>
    jQuery(function($){
      $('#target').Jcrop({
        onChange: updatePreview,
        onSelect: updatePreview,
        aspectRatio: 1/2
      }})
</script> 
```

我现在想知道 jquery 或 javascript 是否能够按照 2\. 方法杀死第一个 javascript（就像它可以用 div 轻松完成）并用第二个 javascript 替换它。我已经尝试通过提供脚本名称标签来识别但没有成功。在 div 中包装 javascript 似乎不符合 w3 标准。有人知道如何实现这一目标吗？

也许有人会分享一步一步的 tut 来轻松修改插件以在类似这样的请求中采用附加选项：

```
<div class="target {aspectRatio:1/2} 
```

谢谢你的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:29:09.600

对于 Jcrop：

```
jQuery(function($){
  $('#my_jcrop').Jcrop({
    onChange: updatePreview,
    onSelect: updatePreview,
    aspectRatio: old_aspectRatio
  }}; 
```

我改变了这种方式的aspectRatio

```
$('#my_jcrop').Jcrop({aspectRatio: new_aspectRatio['x']/new_aspectRatio['y']}); 
```

和功能`updatePreview`

```
function updatePreview(c)
   {
 if (c.w!=0 && c.h!=0){ 
    coord = c;
 }
    if (parseInt(c.w) > 0)
    {
      var rx = preview_size['x']/c.w;
      var ry = preview_size['y']/c.h;

   preview.width = Math.round(rx * boundx) + 'px';
      preview.height = Math.round(ry * boundy) + 'px';
      preview.marginLeft = '-' + Math.round(rx * c.x) + 'px';
      preview.marginTop = '-' + Math.round(ry * c.y) + 'px';

      $('#preview').css({
        width: preview.width,
        height: preview.height,
        marginLeft: preview.marginLeft,
        marginTop: preview.marginTop
      });
    }
  }; 
```

我更改了 preview_size['x'] 和 preview_size['y'] 的值：

```
preview_size['x'] = new_aspectRatio['x'];
preview_size['y'] = new_aspectRatio['y']; 
```

所以如果新的图片尺寸是200x400px，那么aspectRatio就是200/400 = 1/2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:22:31.107

尝试使用数据属性 - `<div class="target" data-aspect-ratio="1/2">`

```
 $('.target').Jcrop({
    onChange: updatePreview,
    onSelect: updatePreview,
    aspectRatio: $(this).attr('data-aspect-ratio')
  } 
```

# powershell - 如何正确忽略 PowerShell 中的 Import-Module 错误

> ID：10498433
> 
> 赞同：8
> 
> 时间：2012-05-08T12:16:25.327
> 
> 标签：powershell, import-module

我目前在使用 Powershell 调用 Import-Module 时遇到问题，不胜感激。

根据此处先前的问题和答案，在尝试使用 PowerShell 导入模块时收到以下错误，可以忽略：

**文件已跳过，因为它已经存在于“Microsoft.PowerShell”中。**

问题是如果 import 命令在 try / catch 语句中，它将被捕获。

我已经阅读了许多关于此的帖子（例如[SCOM 上的 PowerShell 无法导入模块](https://stackoverflow.com/questions/6072026/powershell-on-scom-fails-to-import-module)），其中一个确实提到尝试将“-ErrorAction SilentlyContinue”添加到 Import-Module 命令中，但不幸的是这并没有什么区别。

下面是我目前用来测试问题的代码，它可以让您更好地理解我想要实现的目标。

有没有人成功地忽略了这些关于模块导入的警告，而之前包裹在 try/catch 中？

谢谢你的时间，

安德鲁

```
function load_module($name)
{
    if (-not(Get-Module -Name $name))
    {
        if (Get-Module -ListAvailable | Where-Object { $_.name -eq $name })
        {
            Import-Module $name  

            return $true
        }
        else
        {   
            return $false
        }
    }
    else
    {
        return $true
    }
}

$moduleName = "ActiveDirectory"

try 
{
    if (load_module $moduleName)
    {
        Write-Host "Loaded $moduleName"
    }
    else
    {
        Write-Host "Failed to load $moduleName"
    }
}
catch 
{
    Write-Host "Exception caught: $_" 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T14:12:03.503

```
function Load-Module
{
    param (
        [parameter(Mandatory = $true)][string] $name
    )

    $retVal = $true

    if (!(Get-Module -Name $name))
    {
        $retVal = Get-Module -ListAvailable | where { $_.Name -eq $name }

        if ($retVal)
        {
            try
            {
                Import-Module $name -ErrorAction SilentlyContinue
            }

            catch
            {
                $retVal = $false
            }
        }
    }

    return $retVal
} 
```

# python - 使用变量格式在python中格式化字符串

> ID：10498434
> 
> 赞同：10
> 
> 时间：2012-05-08T12:16:30.547
> 
> 标签：python, string, string-formatting

如何使用变量来格式化我的变量？

```
cart = {"pinapple": 1, "towel": 4, "lube": 1}
column_width = max(len(item) for item in items)
for item, qty in cart.items():
    print "{:column_width}: {}".format(item, qty)

> ValueError: Invalid conversion specification 
```

或者

```
(...):
    print "{:"+str(column_width)+"}: {}".format(item, qty)

> ValueError: Single '}' encountered in format string 
```

不过，我能做的是首先构造格式化字符串，然后对其进行格式化：

```
(...):
    formatter = "{:"+str(column_width)+"}: {}"
    print formatter.format(item, qty)

> lube    : 1
> towel   : 4
> pinapple: 1 
```

然而，看起来很笨拙。难道没有更好的方法来处理这种情况吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T12:19:40.233

Okay, problem solved already, here's the answer for future reference: variables can be nested, so this works perfectly fine:

```
for item, qty in cart.items():
    print "{0:{1}} - {2}".format(item, column_width, qty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-05T09:45:37.710

从**python 3.6**开始，您可以使用**f-strings**来实现更简洁的实现：

```
>>> things = {"car": 4, "airplane": 1, "house": 2}
>>> width = max(len(thing) for thing in things)
>>> for thing, quantity in things.items():
...     print(f"{thing:{width}} : {quantity}")
... 
car      : 4
airplane : 1
house    : 2
>>> 
```

# php - 在 HTML 字符串的中间插入文本

> ID：10498435
> 
> 赞同：2
> 
> 时间：2012-05-08T12:16:32.387
> 
> 标签：php, regex, string

被视为文本的 HTML 字符串的中间，位于最近的句子之后/之前。

例子：

```
$str = 'First sentence. Second sentence! <a title="Hello. World">
        Third sentence. </a> Fourth sentence. Fifth sentence?';

$middle = strlen($str) / 2; 
```

我所做的是将关键字附加到所有停止字符，如`.`,`!`或`?`，但仅限于 HTML 标记之外的字符：

```
$str = 'First sentence. Second sentence! <a title="Hello. World">
        Third sentence. </a> Fourth sentence. Fifth sentence?';
$str = preg_replace_callback("/(\.|\?|\!)(?!([^<]+)?>)/i",  function($matches){
   return $matches[1].'<!-- stop -->';
}, $str); 
```

这将 $str 变成：

```
First sentence.<!-- stop --> Second sentence!<!-- stop --> <a title="Hello. 
World"> Third sentence.<!-- stop --> </a> Fourth sentence.<!-- stop --> Fifth
sentence?<!-- stop --> 
```

现在，我怎样才能找到`<!-- stop -->`最接近该`$middle`位置的子字符串，并在它之前插入我的文本？

有没有办法可以找到`$matches[1]`preg_replace 回调中相对于整个字符串的位置？这样我就可以将它与 $middle 进行比较

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:25:38.730

```
<?php
    $str    = 'First sentence.<!-- stop --> Second sentence!<!-- stop --> <a title="Hello. 
    World"> Third sentence.<!-- stop --> </a> Fourth sentence.<!-- stop --> Fifth
    sentence?<!-- stop -->';
    $str1   =   explode('<!-- stop -->',$str);
    $str1[round(sizeof($str1)/2)-2].="!Append text!";
    $glue=htmlentities('<!-- stop --/>');
    echo $str2  =   implode($glue,$str1);
?> 
```

这怎么样？

# mysql - MySQL查询每月购买的汽车总数

> ID：10498441
> 
> 赞同：0
> 
> 时间：2012-05-08T12:17:02.503
> 
> 标签：mysql

我需要帮助来查找每月购买的汽车总数。我有一个像这样的表（购买）设置（例如简化）：

```
 sno
  country
  purchased_date(yyyy-mm-dd)
  make
  model 
```

现在我想生成一份包含每月购买汽车总数的报告，这是我的查询：

```
SELECT COUNT(`country`), `model`, `make`, `purchase_date`, `country`
FROM charmy_purchase 
WHERE `country` != '' 
GROUP BY model 
```

它产生错误的报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:19:15.500

Maybe something like this:

```
SELECT 
    COUNT( `country` ) , 
    `model` , 
    MONTH(purchase_date) AS Month
FROM 
    charmy_purchase 
WHERE 
    `country` != '' 
GROUP BY 
   model,
   MONTH(purchase_date) 
```

**EDIT**

If you have different years. Then you might consider grouping on year as well. Like this:

```
SELECT 
    COUNT( `country` ) , 
    `model` , 
    MONTH(purchase_date) AS Month,
    YEAR(purchase_date) AS year
FROM 
    charmy_purchase 
WHERE 
    `country` != '' 
GROUP BY 
   model,
   MONTH(purchase_date),
   YEAR(purchase_date) 
```

Useful references:

*   [MONTH(date)](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)
*   [YEAR(date)](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)

# ocaml - Ocaml中的重载

> ID：10498456
> 
> 赞同：8
> 
> 时间：2012-05-08T12:18:00.127
> 
> 标签：ocaml, overloading, ml

我知道 OCaml 不支持重载。那么，我们可以做些什么来解决这个问题，而不是重载呢？

1）改用多态性？2）给不同的功能不同的名字？3）把同名的函数放在不同的模块中？

哪一个会起作用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T13:27:26.190

这完全取决于您所说的重载是什么意思。有几个用例，例如：

如果您想在数学表达式中使用通常的中缀运算符名称来操作整数以外的其他内容：在本地重新绑定运算符；模块和“本地开放”可以帮助解决这个问题。

```
module I32 = struct
  open Int32
  let (+), (-), ( * ), (/), (!!) = add, sub, mul, div, of_int
end

 ... I32.(x + y * !!2) ... 
```

如果您希望操作在所使用的数字类型中具有多态性，则需要对此类数字运算符进行抽象。例如，可以在矩阵等上使用的通用快速求幂函数（通过整数）。

```
let rec pow ( * ) one a = function
  | 0 -> one
  | n -> pow ( * ) (if n mod 2 = 0 then one else one * a) (a * a) (n / 2)

let () = assert (pow ( *.) 1\. 2\. 3 = 8.) 
```

更一般地说，是的，这个想法是将您想要“重载”的内容作为一组运算符（这里是中缀运算符，但简单的名称很好，而且通常更好的可读性），并传递和抽象这些操作的字典 - - 事实上，很像 Haskell 类型的类被编译成什么。

# c# - 如何在 C# 中将文本框中的多个数字转换为 int？

> ID：10498458
> 
> 赞同：0
> 
> 时间：2012-05-08T12:18:12.480
> 
> 标签：c#

对于编程任务，我必须用 Visual C# 制作一个简单的骰子游戏。该游戏的一部分是显示值列表，并查看值的总和是否超过某个数字。我目前有一个文本框，它显示由换行符分隔的各个值，并且当前正在使用`iPlayer1Total += int.Parse(player1TxtBox.Text);`，但这似乎只在文本框的第一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:20:41.850

沿换行符将字符串拆分为数组。

String.split 应该能让你到达那里。

然后解析每个值，瞧

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:21:21.697

看来您正在使用多行文本框。首先在 "\n\r" 上拆分您的字符串，然后：

```
string[] strArray =player1TxtBox.Text.Split("\n\r".ToCharArray()); 
```

然后

```
 int iPlayer1Total = 0;
        foreach (string str in strArray)
        {
            int temp =0;
            int.TryParse(str, out temp);
            iPlayer1Total  += temp;
         } 
```

编辑：拆分的更好选择是：

```
var strArray  = player1TxtBox.Text.Split("\r\n".ToCharArray(),StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:22:00.637

您应该将文本拆分为字符串数组。[MSDN](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

```
string[] list = player1TxtBox.Text.Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries); 
```

然后使用

```
foreach(string num in list)
   iPlayer1Total += int.Parse(num); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:22:12.200

MSDN 库是您的朋友。查看 TextBox 上的条目，您会找到所需的内容：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)

提示：注意`Lines`属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T12:22:19.930

采用

```
string[] str = textbox.Text.Split(@"\n\r");

int a=0;

for(int i=0; i< str.Length; i++)
   a += int.TryParse(a); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T12:37:38.483

是否可以安全地假设，因为它是骰子，每个值将只是一个字符。

```
string t = "125 yhsd 7,8+2";
List<int> diceValues=new List<int>();
foreach (char c in t)
{
    int o=0;
    int.TryParse(c.ToString(),out o);
    if (o > 0 && o < 7)
    diceValues.Add(o);
} 
```

输出应该是

骰子值 1 2 5 2

我没有对此进行测试或编译，因此可能存在错误

# php - PHP 用户代理允许在我的网站上发帖

> ID：10498462
> 
> 赞同：-1
> 
> 时间：2012-05-08T12:18:27.427
> 
> 标签：php, user-agent

我有一个投票网站，我的用户可以使用它来宣传我的游戏。当他们点击投票链接时，它会将一个名为“reference”的变量传递给投票站点。如果它是有效投票（在过去 24 小时内），它将向我的站点发送一个带有两个变量的请求。

```
$reference = $_POST['referense'];
$success = $_POST['success']; // 0 or 1 
```

我读过必须更改用户代理以允许他们将内容发布到我的网站？我如何让他们这样做？这是一个有效的投票网站，所以没有必要害怕。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:21:44.083

你读的是完全**错误**的。

与用户代理无关。PHP 代码如何执行。即使是这样，它也不***应该***

* * *

您说引用被传递到站点，然后被发送到投票系统。因此，您的系统应该只检查引用是否**有效**。不是请求是如何来的。

请注意，*用户代理很容易被欺骗。*因此，创建一个依赖于此类的系统是非常冒险的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:21:14.400

我从来没有听说过这样的事情。只要您没有特别基于用户代理进行过滤，您就不应该有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:22:10.810

我不认为用户代理可以在这里发挥作用 - 如果他们正在向您的站点发送数据，则由您来检查用户代理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:23:37.707

将内容发布到您的网站的方法是通过按如下方式`form`提交：`input``type=submit`

```
<form action="page.php" method="post">
    <input type="text" name="textbox" />
    <input type="submit" name="submitbutton" />
</form> 
```

无论用户代理是什么，这都应该有效。您可以将文本框替换为其他输入类型，例如复选框或单选按钮。

有一些方法可以使用 javascript 发送表单，但我认为这在这里不太可行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T12:24:07.080

不太确定你想做什么，但你可以用这个 php 代码阅读用户代理：

```
$_SERVER["HTTP_USER_AGENT"] 
```

如果您想保护投票系统，您可以“标记”浏览器，可能结合 IP 和用户代理，或者您也可以在系统上设置 cookie 以防止第二次呼叫。

但是你要知道，这些东西是可以被愚弄的。您可以添加一个登录系统，这使得作弊更加复杂。

# ruby-on-rails - nokogiri：生产环境中的重定位错误

> ID：10498463
> 
> 赞同：2
> 
> 时间：2012-05-08T12:18:32.747
> 
> 标签：ruby-on-rails, ruby, rubygems, nokogiri, libxml2

我们在 Rails 项目中有一个构建管道：我们在测试服务器中捆绑和测试应用程序，然后我们将它（带有 gem 的代码`vendor/`）复制到登台服务器并将其部署到乘客服务器。

它曾经可以工作，但现在我在以下错误中得到`apache.error.log`：

```
WARNING: Nokogiri was built against LibXML version 2.7.6, but has dynamically loaded 2.6.26
/usr/local/rvm/rubies/ruby-1.9.2-p318/bin/ruby: 
  relocation error: /home/project/vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.2/lib/nokogiri/nokogiri.so: 
  symbol xmlNextElementSibling, version LIBXML2_2.7.3 not defined in file libxml2.so.2 with link time reference 
```

并`error 500`在浏览器中。

当我在登台服务器上运行 webbrick 时，你会在第一次请求时遇到类似的错误。我该如何解决？

**编辑：** 与 nokogiri 版本的 Strange 事情。相同的二进制文件加载不同的 libxml 版本，具体取决于我是独立调用它还是使用`bundle exec`：

```
vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.2/bin/nokogiri  -v
# Nokogiri (1.5.2)
---
warnings: []
nokogiri: 1.5.2
ruby:
  version: 1.9.2
  platform: x86_64-linux
  description: ruby 1.9.2p318 (2012-02-14 revision 34678) [x86_64-linux]
  engine: ruby
libxml:
  binding: extension
  compiled: 2.6.26
  loaded: 2.6.26

$ bundle exec vendor/bundle/ruby/1.9.1/gems/nokogiri-1.5.2/bin/nokogiri  -v
WARNING: Nokogiri was built against LibXML version 2.7.6, but has dynamically loaded 2.6.26
# Nokogiri (1.5.2)
---
warnings:
- Nokogiri was built against LibXML version 2.7.6, but has dynamically loaded 2.6.26
nokogiri: 1.5.2
ruby:
  version: 1.9.2
  platform: x86_64-linux
  description: ruby 1.9.2p318 (2012-02-14 revision 34678) [x86_64-linux]
  engine: ruby
libxml:
  binding: extension
  compiled: 2.7.6
  loaded: 2.6.26 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:00:22.407

错误确实说明了一切。您在本地机器（编译 gem 的地方）上有不同版本的 LibXML，`version 2.7.6`因为在您的服务器`2.6.26`上降级您的开发机器或在服务器上构建您的 gem

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:04:01.263

我解决了这个问题。我从源代码构建`libxml2`，然后配置`bundler`为使用这个新版本：

```
bundle config build.nokogiri --with-xml2-dir=/usr --with-xslt-dir=/usr/local 
```

（现在我有一个警告，因为加载的版本比用于构建 Nokogiri 的版本更新，但这不是问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:58:15.953

如果问题在 64 位裸机上仍然存在，我解决了将 zlib1g 从 1.2.3 更新到 1.2.7 的问题：

```
$> aptitude update
$> aptitude install zlib1g 
```

# liferay - 可以在 Liferay 中创建自定义登录页面吗？

> ID：10498467
> 
> 赞同：2
> 
> 时间：2012-05-08T12:18:41.647
> 
> 标签：liferay

可以在 Liferay 中创建登录页面吗？如果是这样，在哪个版本？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:57:18.527

这可以通过以下方式实现：

1.  制作一个页面（只是一个普通的 liferay 页面）并记住友好的 url。
2.  根据您的情况设置适当的权限
3.  转到控制面板
4.  在门户部分 - 单击门户设置
5.  您可以在导航部分下设置友好网址（位于屏幕中央）

![在此处输入图像描述](../Images/41a6e8be262c0905e85e64c07f1fd50b.png)

这些步骤适用于 Liferay 6.1.0 CE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:20:09.477

从版本 5 开始修改 liferay 以使用登录页面。您也可以使用属性文件进行设置。在 webapp/ROOT/WEB-INF/classes 文件夹中创建（如果您之前没有这样做过）portal-ext.properties 文件，并根据您修改这些行。

```
##
## Default Landing Page
##

#
# Set the default landing page path for logged in users relative to the
# server path. This is the page users are automatically redirected to after
# logging in. For example, if you want the default landing page to be
# http://localhost:8080/web/guest/login, set this to /web/guest/login. To
# activate this feature, set auth.forward.by.last.path to true. To customize
# the behavior, see com.liferay.portal.events.DefaultLandingPageAction in
# the "login.events.post" property above.
#
default.landing.page.path=
#default.landing.page.path=/web/guest/login 
```

# blackberry - 黑莓 - 如何获取应用程序 ID？

> ID：10498472
> 
> 赞同：2
> 
> 时间：2012-05-08T12:19:00.920
> 
> 标签：blackberry, java-me, mms

如果我正在寻找用于打开 mms 连接的应用程序 ID

```
(MessageConnection) Connector.open("mms://[peer_address]:[application_Id]"); 
```

如何获取我的 application_Id？

我尝试实现传入消息的侦听器，但它无法检测传入的彩信。我怀疑这是由于错误的应用程序ID。（我的 [peer_address] 为空白）。

任何帮助，将不胜感激

# r - caret::train：指定模型生成参数

> ID：10498477
> 
> 赞同：7
> 
> 时间：2012-05-08T12:19:16.217
> 
> 标签：r, r-caret

我正在使用`caret`R 中的库进行模型生成。我想生成一个`earth`（又名 MARS）模型，并且我想`degree`为此模型生成指定参数。根据[文档](http://cran.r-project.org/web/packages/caret/caret.pdf)（第 11 页），该`earth`方法支持此参数。

指定参数时收到以下错误消息：

```
> library(caret)
> data(trees)
> train(Volume~Girth+Height, data=trees, method='earth', degree=1)
Error in { : 
  task 1 failed - "formal argument "degree" matched by multiple actual arguments" 
```

指定参数时如何避免此错误`degree`？

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
 [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] earth_3.2-3    plotrix_3.4    plotmo_1.3-1   leaps_2.9      caret_5.15-023
 [6] foreach_1.4.0  cluster_1.14.2 reshape_0.8.4  plyr_1.7.1     lattice_0.20-6

loaded via a namespace (and not attached):
[1] codetools_0.2-8 compiler_2.15.0 grid_2.15.0     iterators_1.0.6
[5] tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T15:56:23.380

我一直发现**插入符号**中的功能既有用又有些令人抓狂。这是正在发生的事情。

您正在尝试通过参数将`earth`参数传递`...`给`train`. 的文档`train`包含该参数的此描述：

> 传递给分类或回归例程（例如 randomForest）的参数。如果在此处传递调整参数的值，则会发生错误。

调整参数，嗯？好吧，如果您向下滚动并检查每种模型类型的调整参数的官方列表，您会看到对于`earth`，它们是`degree`和`nprune`。

所以这里的问题是，`train`它旨在自动沿着调整参数进行一些网格搜索，并且该`...`参数将用于将更多参数传递给模型拟合函数，*除了*那些调整参数。

如果要设置调整参数，则需要使用其他参数，如下所示：

```
train(Volume~Girth+Height, data=trees, method='earth',
      tuneGrid = data.frame(.degree = 1,.nprune = 5)) 
```

请注意如何使用前导句点命名列。此外，令人沮丧的是，由于 for 中的默认值`earth`是`nprune`，`NULL`我不确定您是否只能以这种方式传递默认值。（通常，`NULL`在数据框中设置内容只会删除它们。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T17:13:06.030

我发现了如何做到这一点，joran 引导我走向正确的方向：

创建一个生成训练网格的新函数。此函数必须接受两个参数`len`和`data`。为了检索原始训练网格，您可以调用包`createGrid`提供的方法`caret`。然后，您可以根据需要修改网格。例如，要保持`nprune`参数不变并`degree`从 1 添加到 5，请使用以下代码：

```
 createMARSGrid <- function(len, data) {
      g = createGrid("earth", len, data)
      g = expand.grid(.nprune=g$.nprune, .degree=seq(1,5))
      return(g)
  } 
```

然后像这样调用它：

```
train(formula, data=data, method='earth', tuneGrid = createMARSGrid) 
```

# text - 过滤以 ; 开头的行 使用批处理

> ID：10498482
> 
> 赞同：1
> 
> 时间：2012-05-08T12:19:32.620
> 
> 标签：text, batch-file, filter, character

您好我有一个程序的脚本（auto lisp AutoCAD）。该脚本的规则是注释以 ; 开头。字符是否可以编写一个批处理以过滤掉所有以 ; 开头的行。然后，我将文件从 LSP 加密为 FAS 类型，这使注释变得无用（加密时无法读取），但是 AutoCAD 仍然加密文本，这意味着文件大小相当大（是应有的两倍）。当前的方法是手动删除每个注释行，但尝试这样做几百次。而且我需要适当的评论来保持对正在发生的事情的清晰记录，因为我使用未加密的 lisp 文件本身进行工作。

总而言之，我也想要加密，因为这是我的辛勤工作，也是我保持安全的权利，因为它也意味着更多的工作安全，它还允许我阻止一些聪明的 alec 自称员工进行编辑，并且在版本中文件加密是出于稳定性原因，由 AutoCAD 自行推荐。

总而言之，即使是因为我喜欢没有充分的理由，那也应该足够有效。

我希望通过批处理脚本来实现这一点，因为这是我认为在 AutoCAD 框架之外足够胜任的少数语言之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:11:07.247

以下将转换名为“source.lsp”的文件并生成“noComment.lsp”。它将删除以 a 开头的行`;`（包括以空格缩进的注释行）。

```
findstr /rvc:"^ *;" "source.lsp" >"noComment.lsp" 
```

# html - 我在 Phonegap 中使用 Childbrowser 时找不到 PGPlugin.h

> ID：10498488
> 
> 赞同：0
> 
> 时间：2012-05-08T12:19:47.143
> 
> 标签：html, cordova

我尝试在我的项目中在 phonegap 1.7.0 中使用 Childbrowser。但它不会按我的预期运行。

错误：找不到“PGPlugin.h”文件。

如何获取文件'PGPlugin.h'？

有人遇到这个问题吗？

phonegap 插件不支持最新的phonegap 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:05:34.813

您想改用此版本的 ChildBrowser，因为它已更新为与 Cordova 一起使用。

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)

# join - 从数据库中获取具有连接实体的整个实体并避免延迟加载，nHibernate QueryOver

> ID：10498490
> 
> 赞同：3
> 
> 时间：2012-05-08T12:19:56.210
> 
> 标签：join, fluent-nhibernate, queryover

我有一个这样的实体：

```
public class Employment
{
    public virtual Company Company {get; set;}
    public virtual Person Person {get; set;}
    public virtual string Description {get; set;}
} 
```

提供两个其他实体之间的关系。他们有相应的 DTO，我想返回一个包含有关人员和公司的所有信息的结果集。查询是在就业表上执行的，我的问题是 Hibernate 为每个公司和个人生成一个选择语句。

在我的数据库中，Employment 表有 1000 行。当我将它们映射到 DTO 时，Nhibernate 生成 2001 个选择语句，一个用于就业列表，一个用于每个人和公司的选择。

我希望hibernate一次获取所有信息，在SQL中我会做这样的事情：

```
SELECT e.Description, c.A, c.B, c.C, p.D, p.E, p.F
FROM Employment e
JOIN Company c ON e.Company_Id = c.Company_Id
JOIN Person p ON e.Person_Id = p.Person_Id; 
```

甚至

```
SELECT Description FROM Employment;

SELECT c.A, c.B, c.C FROM Employment e
JOIN Company c ON e.Company_Id = c.Company_Id;

SELECT p.D, p.E, p.F FROM Employment e
JOIN Person p ON e.Person_Id = p.Person_Id; 
```

I am a pretty fresh user of nHibernate, QueryOver.I welcome Linq-To-Entities answers as well but I prefer to avoid LINQ query expressions.

I've looked all over the web, read about JoinQuery, JoinAlias and Fetch and have come as far as something like this:

```
//This works, but the objects are retrieved as PersonProxy and CompanyProxy,
//generating 2 SELECT statements for each Employment I map to EmploymentDto
var queryOver =
    session.QueryOver<Employment>()
    .Fetch(x => x.Person).Eager
    .Fetch(x => x.Company).Eager
var mapResult = MappingEngine.Map<IList<EmploymentDto>>(queryOver.List());    

//This works, but the objects are still retrieved as PersonProxy and CompanyProxy,
var queryOver =
    session.QueryOver<Employment>()
        .JoinAlias(x => x.Person, () => personAlias, JoinType.InnerJoin)
        .JoinAlias(x => x.Company, () => companyAlias, JoinType.InnerJoin);
var mapResult = MappingEngine.Map<IList<EmploymentDto>>(queryOver.List()); 
```

JoinQuery provided the same result aswell. I feel I am missing something important here. Something should be done in the query or before .List() to fetch all child entities instead of loading a list with lots of Employment entities loaded with PersonProxy and CompanyProxy. I can, however, not find out how...

EDIT: Added mapping

Database tables:

```
TABLE Company(
Id,
A,
B,
C)

TABLE Person(
Id,
D,
E,
F);

TABLE Employment(
Person_Id,
Company_Id,
Description); 
```

Entities

```
public class Company
{
    public virtual string Id { get; set; }
    public virtual string A { get; set; }
    public virtual bool B { get; set; }
    public virtual bool C { get; set; }
}

public class Person
{
    public virtual string Id { get; set; }
    public virtual string D { get; set; }
    public virtual string E { get; set; }
    public virtual string F { get; set; }
}

public class Employment
{
    public virtual Person Person { get; set; }
    public virtual Company Company { get; set; }
    public virtual string Description { get; set; }

    public override bool Equals(object obj)
    {
        Employment toCompare = obj as Employment;
        if (toCompare == null)
            return false;
        return (this.GetHashCode() != toCompare.GetHashCode());
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int results = Person != null ? Person.GetHashCode() : 0;
            results = (results * 397) ^ (Company != null ? Company.GetHashCode() : 0);
            results = (results * 397) ^ (Description != null ? Description.GetHashCode() : 0);
            return results;
        }
    }
} 
```

Mapping

```
public class CompanyMap : SyncableClassMap<Company>
{
    public CompanyMap()
    {
        Table("Company");
        Id(x => x.Id).Column("Id").GeneratedBy.Assigned();
        Map(x => x.A).Column("A");
        Map(x => x.B).Column("B").CustomType<YesNoType>();
        Map(x => x.C).Column("C").CustomType<YesNoType>();
    }
}

public class PersonMap : SyncableClassMap<Person>
{
    public PersonMap()
    {
        Table("Person");
        Id(x => x.Id).Column("Id").GeneratedBy.Assigned();
        Map(x => x.D).Column("D");
        Map(x => x.E).Column("E");
        Map(x => x.F).Column("F");
    }
}

public class EmploymentMap : ClassMap<Employment>
{
    public EmploymentMap()
    {
        Table("Employment");
        CompositeId()
            .KeyReference(x => x.Person, "Person_Id")
            .KeyReference(x => x.Company, "Company_Id");
        Map(x => x.Description, "Description");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:44:41.373

after your edit i see you have a keyreference instead of a normal many-to-one.

Unfortunatly this seems to be a limitation of QueryOver/Criteria which does not eager load keyreferences even with Fetchmode specified. However Linq to NH does not have this limitation. Change the query to

```
using NHibernate.Linq;

var results = session.Query<Employment>()
    .Fetch(x => x.Person)
    .Fetch(x => x.Company)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:10:01.583

I have experienced the same problem you're describing here. I'll take your last code snippet as an example, since that's the way I've made it work:

```
//This works, but the objects are still retrieved as PersonProxy and CompanyProxy,
var queryOver =
    session.QueryOver<Employment>()
        .JoinAlias(x => x.Person, () => personAlias, JoinType.InnerJoin)
        .JoinAlias(x => x.Company, () => companyAlias, JoinType.InnerJoin);
var mapResult = MappingEngine.Map<IList<EmploymentDto>>(queryOver.List()); 
```

First of all, you shouldn't have to specify `JoinType.InnerJoin` since that's the default join type. Same as with you, I've also found that the persons and companies are loaded lazily this way.

However, if you change the join type to `JoinType.LeftOuterJoin`, you'll see that everything is loaded eagerly. At least that's what I've experienced. So try change your code to the following:

```
//This works, but the objects are still retrieved as PersonProxy and CompanyProxy,
var queryOver =
    session.QueryOver<Employment>()
        .JoinAlias(x => x.Person, () => personAlias, JoinType.LeftOuterJoin)
        .JoinAlias(x => x.Company, () => companyAlias, JoinType.LeftOuterJoin);
var mapResult = MappingEngine.Map<IList<EmploymentDto>>(queryOver.List()); 
```

I can't explain to you *why* it is this way, I've just found this to work out of own experiences. And if it's problematic for you doing a left outer join, you can instead try to filter accordingly in your code before (or while) doing the mapping.

# c# - Avoid duplicate database access in get/post handling

> ID：10498492
> 
> 赞同：0
> 
> 时间：2012-05-08T12:20:00.953
> 
> 标签：c#, asp.net-mvc

I'm using asp.net MVC 3:

I have a view whose input fields are generated dynamically during the GET request (they are retrieved from the database). During the POST, if the validation fails, I have to redisplay the fields and therefore retrieve them again. Is there a way to avoid the redundant database access, i.e, is there a way to share some data between GET and POST requests?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:24:38.237

有一些方法可以处理这个问题，比如将数据存储在 TempData 或 Session 等中......但我认为你不应该那样做。您应该始终重新查询您的数据访问层并获取它。这并不意味着您总是查询数据库表。您的数据访问层可以为您提供缓存中的数据或对表进行查询。

在幕后，TempData 使用 Session 来持久化这些值。TempData 的值会一直存在，直到它被读取或会话超时。以这种方式持久化 TempData 可以实现重定向等场景，因为 TempData 中的值在单个请求之外可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:32:42.490

我认为您想要的是“延迟加载”。

创建一个`static`变量（在执行数据库查询的类中），它将在数据库查询发生时存储数据库查询的结果，但最初它应该是`null`. 然后创建一个 getter 方法来检查这个`static`变量是否`null`存在。如果是`null`，则运行数据库查询并存储结果，否则只返回`static`var 的内容。然后总是使用那个吸气剂，你就准备好了。

我知道特别迂腐的人对使用这样的`static`变量感到畏缩......但它运作良好，而且很少大惊小怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:26:25.630

不是直接的，但是是的。

如果您在发布表单时将所有数据发送回服务器，然后将这些数据发送到模型，那么您的模型将拥有填充其字段所需的所有数据。

通过 ajax 发布以接收 json 数据，当您从 ajax 检索结果时，您只填充已更改的字段。

但是，我认为重新查询没什么大不了的，除非您正在谈论几秒钟或更长时间的特别痛苦的查询。

哦，不要将数据存储在会话或缓存中。没有理由用单个帖子堵塞 ram，如果您错误地重用会话密钥，这可能会在以后引发潜在问题。

# php - Removing   single or multiple from the url or link in php

> ID：10498493
> 
> 赞同：0
> 
> 时间：2012-05-08T12:20:05.553
> 
> 标签：php, html

Removing `&nbsp;` single or multiple from the url or link like:

```
www.makeuseof.com/tag/7-tips-tricks-google-drive/&nbsp;&nbsp;&nbsp;&nbsp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:27:27.720

这将删除字符串中`&nbsp;`的所有元素：`$link`

```
$link = str_replace('&nbsp;','',$link); 
```

# jquery - 更改jquery表单验证的值

> ID：10498500
> 
> 赞同：1
> 
> 时间：2012-05-08T12:20:34.993
> 
> 标签：jquery, validation

如果表单无效，我正在使用 jquery 表单验证来提醒用户。

```
if (!$(Form1).valid()) {
    alert("invalid form")
} 
```

有没有办法强制表单在 javascript 中无效。

例如，我有一个文本框，如果它的值为“123”，我希望表单无效。

像这样的东西：

```
if($("#TextBox1").val()=="123"){
    $(Form1).valid() = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:27:57.517

您可以将值（真或假）设置为变量

```
if($("#TextBox1").val()=="123"){
    var responce1 = false;
}
if($("#TextBox2").val()=="abc"){
    var responce2 = false;
} 
```

最后你可以检查为

```
 var resultresponce=responce2 && responce1; 
```

最后你需要检查的值是否`resultresponce`为真......如果是，你可以提交表格，否则不......

```
if(resultresponce)
{
$(form).submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:25:08.403

您应该尝试只为此使用 if 语句。就像是：

```
if ($("#el").val() == "123") {
    // Do something or nothing here.

} else if (!$(Form1).valid()) {
    alert("invalid form")

} else {
    // All correct

} 
```

philnate*所说的*也应该可以正常工作。更多的是*你*想要发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:25:40.997

您可以使表单无效的方法是禁用连接的提交按钮，这样用户就无法提交它。请参阅：[jQuery 禁用/启用提交按钮](https://stackoverflow.com/questions/1594952/jquery-disable-enable-submit-button)

# ios - 每天在指定时间执行一个动作

> ID：10498506
> 
> 赞同：0
> 
> 时间：2012-05-08T12:21:06.257
> 
> 标签：ios

在我的应用程序中，我添加了收入和支出数据并将其作为摘要显示在主页中。现在假设我有一些每天发生的固定费用，它将在我设定的时间自动添加到费用中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:23:47.830

`UILocalNotification`与使用日历间隔重新安排通知的属性`repeatInterval`一起使用。我建议遵循苹果 iOS 指南。

[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/instp/UILocalNotification/fireDate)

希望对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:33:38.353

在我看来，只有在创建提醒类功能时才应该使用计时器或通知。

根据我对您问题的理解，我建议您遵循以下建议：

*   跟踪上次将费用添加到应用程序本地数据库的时间。您可以将此信息存储在数据库中或用户默认值中。
*   下次运行应用程序时，检查上次进入时间，然后计算需要完成的其他条目。如果是每天，它将是自上次输入以来的天数。
*   将所需条目添加到您的数据库中以使您的条目保持一致。

# javascript - JavaScript：什么是 NaN、对象或原语？

> ID：10498511
> 
> 赞同：7
> 
> 时间：2012-05-08T12:21:25.193
> 
> 标签：javascript, nan

什么是 NaN、对象或原语？

NaN - 不是数字

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T12:32:22.260

这是一个原始的。您可以通过多种方式进行检查：

*   `typeof NaN`给出“数字”，而不是“对象”。

*   添加一个属性，它就会消失。`NaN.foo = "hi"; console.log(NaN.foo) // undefined`

*   `NaN instanceof Number`给出 false （但我们知道它是一个数字，所以它必须是一个原语）。

NaN 成为一个对象并没有真正的意义，因为像`0 / 0`需要这样的表达式需要导致`NaN`，而数学运算总是会导致原语。将 NaN 作为对象也意味着它不能充当虚假值，在某些情况下它会这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T12:23:26.050

`NaN`是一个原始数字值。就像`1`,`2`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:29:13.783

> NaN 是全局对象的属性。
> 
> NaN 的初始值为 Not-A-Number — 与 Number.NaN 的值相同。在现代浏览器中，NaN 是不可配置、不可写的属性。即使不是这种情况，也要避免覆盖它。
> 
> 在程序中很少使用 NaN。它是数学函数失败 (Math.sqrt(-1)) 或尝试解析数字的函数失败 (parseInt("blabla")) 时的返回值。

[参考](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/NaN)

# php - Excluding a certain post from Wordpress loop

> ID：10498514
> 
> 赞同：0
> 
> 时间：2012-05-08T12:21:31.567
> 
> 标签：php, wordpress, loops

I have a homepage with four displayed posts and one that is emphasized.

The one that is emphasized is not a problem, it's a large post whose details i collect using special loop.

But for those four posts (that have pagination), I just can't seem to exclude that emphasized one.

For example, if emphasized post has ID of 8, this should do the trick:

```
$args=array(
        'paged' => $paged,
        'posts_per_page' => 4,
        array('post__not_in' => array(8))
    );

    query_posts($args);

    while ( have_posts() ) : the_post();
        echo '<li>';
        the_title(); 
        echo "<span> ".$post->ID."</span>";
        echo '</li>';
    endwhile; 
```

But for some reason it's not filtering anything, always displays all the posts.

Any ideas why this is happening?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:25:14.227

为什么`post__not_in`在另一个数组中？我建议将其放在同一级别：

```
$args=array(
        'paged' => $paged,
        'posts_per_page' => 4,
        'post__not_in' => array(8)
); 
```

如果这没有帮助，我建议检查[此处](http://wordpress.org/support/topic/post_not_in-variable-for-wp_query-does-not-work)提到的方法。

# c# - Developing for named pipes on XP

> ID：10498515
> 
> 赞同：0
> 
> 时间：2012-05-08T12:21:31.997
> 
> 标签：c#, wcf, named-pipes

I have an application that is moving over from WCF Http to named pipes since everything is on the same machine. Those in charge have decided not to reference the DLLs directly, so that's not an alternative. I'm okay moving over to a tcp connection instead, though I don't know that it gives us any direct performance benefits over http on the same machine. The production host is going to be a IIS 7 server, not a WAS or other service. My machine has IIS 5.1, Cassini, and IIS Express.

I've tried the following:

*   Virtual Box running windows 7 on my XP machine. The installer craps out.
*   Named Pipes on Cassini, not supported.
*   Named Pipes on IIS Express, not supported.
*   Googling the hell out of the solution, nothing useful found.

What is the best/recommended way to develop WCF NetNamedPipes on XP that does not have IIS 7?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:43:44.637

在 XP 上，WCF 绑定到命名管道非常适合在 Windows 服务进程中自定义托管的服务。但是，如果您不想构建自定义主机，那您就不走运了：在 IIS5/6 中支持的唯一托管协议是 HTTP。

IIS 中为 HTTP 以外的协议托管的 WCF 服务依赖于 WAS，它需要 IIS7。此约束同样适用于 TCP 绑定，因此这不是您建议的解决方法。

听起来好像您的应用程序打算在生产中托管 IIS。如果这是给定的，我认为您别无选择，只能更改为支持目标环境的新开发平台。

# android - Android Sliding Drawer

> ID：10498536
> 
> 赞同：0
> 
> 时间：2012-05-08T12:22:26.567
> 
> 标签：android, slidingdrawer

I want to make 2 Sliding Drawers with Relative Layout (so the first sliding drawer is in front of the second sliding drawer). The first sliding drawer's content has a button to Open Second Sliding Drawer.

When i open the first sliding drawer only cover 1/3 of the screen. The second sliding drawer cover all of the screen.

Now i want to:

When i click the button on the content of first sliding drawer, it opens the second sliding drawer, like i said before, AND THEN i want the handler of the first sliding drawer GONE. It becomes VISIBLE again after the second sliding drawer is closed. So basically, i can't close the first sliding drawer, if the second sliding drawer is still opened.

I already tried to setVisibility(View.GONE) and setVisibility(View.INVISIBLE) but it doesn't work.

Sorry i can't post picture in this forum so it maybe a bit confusing. Thanks for answering ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:55:06.033

当您触摸第二个抽屉的按钮时，您是否尝试过关闭第一个抽屉？

```
slidingDrawer1.close(); 
```

# ruby-on-rails - Rails3, setting the value of 'active_record.default_timezone' breaks time parsing

> ID：10498537
> 
> 赞同：2
> 
> 时间：2012-05-08T12:22:29.810
> 
> 标签：ruby-on-rails, activerecord, timezone

I have code like this:

```
hh = History.select("STRFTIME(\"%Y-%m-%d %H\", created_at) AS created_at, ..., count(*) AS count_all")
puts hh[0].created_at 
```

If `config.active_record.default_timezone` isn't set that code works correctly, otherwise `hh[0].created_at = nil`.

Why?

And how I can fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:09:08.647

尝试在控制台中运行它：

```
History.select("STRFTIME(\"%Y-%m-%d %H\", created_at) AS created_at, ..., count(*) AS count_all").to_sql 
```

这将向您显示发送到 Sqlite3 的输出，然后您可以检查它与它期望的 SQL 项目。在您的情况下`select`，对 Postgres SQL 风格有效，但对 Sqlite3 无效

# c++ - 虚函数和绕行

> ID：10498545
> 
> 赞同：0
> 
> 时间：2012-05-08T12:23:09.810
> 
> 标签：c++, gcc, virtual-functions, detours

我最近一直在绕弯路编程，以及随之而来的一切。我绕了很多不同的功能；thiscall、stdcall、cdecl、虚函数等。但是有一件事我没有管理（这甚至可能是不可能的），那就是挂钩一个基类虚函数。例如; 有一个 Car 类，它声明了一个虚函数（空）`Drive`。然后还有其他 3 个 car 类继承了 car 和 implements `Drive`。

如果我挂钩 Car 的（基类）`Drive`函数（使用简单的 'jmp' 挂钩），如果他们*不*调用基函数，它会在触发时由 的后代`Car`触发吗？`Drive`

 *更彻底地解释：

```
class Car
{
   virtual void Drive(void) { } // Empty virtual function
}

class Lamborghini : public Car
{
   void Drive(void) { // does lots of stuff, but does NOT call base function }
} 
```

所以我想知道是否调用了基本方法 get 或者是否可以以某种方式挂钩？*函数执行是直接*跳转到`Lamborghini::Drive`还是以某种方式通过`Car`类，以便在后代调用时可以检测到`Drive`？

编辑：如果基类函数为空，是否甚至可以挂钩它，因为它需要 5 个字节的空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:33:07.900

不，基本方法不会被*自动*调用。动态调度机制将检测它需要调用哪个*覆盖，这将是被调用的函数。*这通常通过一个虚拟表 (vtable) 来实现，该表存储指向类中每个虚拟函数的*最终覆盖器的指针。*当使用动态分派时，编译器通过该表注入一个间接调用并跳转到正确的函数。

请注意，vtable 实际上包含指向*thunk*或*trampolines*的指针，这些指针可能会`this`在转发调用之前进行修改（隐式第一个参数）。使用这种方式的好处是，如果`this`不需要更新，编译器可以直接跳转到最终的覆盖器中。无论如何，您可以利用此功能并修改 vtable 以指向您自己的代码（即您可以更新每个 vtable 中的指针——每种类型一个——以引用您自己的*thunk*或*函数*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:32:50.543

如果我正确地回答了您的问题，您的兰博基尼类中的 Drive 方法将根据虚函数表被调用。如果要调用基类的 Drive 方法，则必须编写类似`Car::Drive;`. 由于 VTBL，基类需要一些空间。希望我没有回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:23:14.480

如果我理解正确的话，你想`Car::Drive`每次调用都`Lamborghini::Drive`被调用，即使`Lamborghini:Drive`不直接调用基函数？

为此，最简单的方法是使用“内部”函数，该函数将是虚拟的（受保护的），而初始方法将是非虚拟的，并将路由调用。这是一个例子：

```
class Car
{
    void Drive(void)
    {
        // ...
        Car::innerDrive(); // Base function call
        // ...
        this->innerDrive(); // 'Derived' function call
        // ...
    }
protected:
    virtual void innerDrive(void) { } // Empty virtual function
}

class Lamborghini : public Car
{
protected:
    void innerDrive(void) { // does lots of stuff, but does NOT call base function }
} 
```*

# xstream - Xstream 中的继承问题

> ID：10498546
> 
> 赞同：3
> 
> 时间：2012-05-08T12:23:10.463
> 
> 标签：xstream

我有一个输入 xml 和相应的 java 类，如下所示。

```
<Address>
  <name>name</name>
  <streetName>street</streetName>
<Address>

public class Address {
    private String name;
    //getter and setter here
}

public class Home extends Address {
    private String streetName;
    // getter and setter follows
} 
```

我试图解组xml，如下所示

```
import com.thoughtworks.xstream.XStream;

public class Main {
    public static void main(String as[]) {
        XStream xstream = new XStream();
        String str = "<com.xstream.inheritance.Address> <name>name</name> <streetName>street</streetName>"
                + "</com.xstream.inheritance.Address>";
        Address address1 = (Address) xstream.fromXML(str);
        System.out.println(address1.getName());
    }
} 
```

我在线程“main”中遇到异常说异常

```
com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$UnknownFieldException: No such field com.xstream.inheritance.Address.streetName
---- Debugging information ----
field               : streetName
class               : com.xstream.inheritance.Address
required-type       : com.xstream.inheritance.Address
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /com.xstream.inheritance.Address/streetName
version             : null 
```

为什么我得到这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:56:45.320

XML 缺少指向您的扩展类的“​​类”属性。所以输出会是这样的：

```
<com.xstream.inheritance.Address class="com.xstream.inheritance.Home">
 <name>name</name>
 <streetName>street</streetName>
</com.xstream.inheritance.Address> 
```

这是由 XStream 自动完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:02:17.040

假设您的 bean 在包“com.xstream.inheritance”中，如果您将 xml 的根标记从

```
<com.xstream.inheritance.Address> 
```

到

```
<com.xstream.inheritance.Home> 
```

这是必要的，因为 streetName 字段仅在 Home 中可用，在 Address 中不可用。另请注意， fromXml() 正在返回一个 Home 实例，而不仅仅是一个地址。

# types - Ensure a type implements an interface at compile time in Go

> ID：10498547
> 
> 赞同：22
> 
> 时间：2012-05-08T12:23:18.417
> 
> 标签：types, interface, compiler-errors, go

How can I ensure that a type implements an interface at compile time? The typical way to do this is by failure to assign to support interfaces from that type, however I have several types that are only converted dynamically. At runtime this generates very gruff error messages, without the better diagnostics given for compile time errors. It's also very inconvenient to find at run time that types I expected to support interfaces, do in fact not.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-08T12:56:09.733

假设问题是关于围棋的，例如

```
var _ foo.RequiredInterface = myType{} // or &myType{} or [&]myType if scalar 
```

作为 TLD 将在编译时为您检查。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-05T18:48:52.400

在 Go 语言中，设计上没有“**实现**”声明。要求编译器通过尝试赋值来检查类型是否`T`实现接口的唯一方法（是的，一个虚拟的）。`I`注意，Go lang 区分结构和指针上声明的方法，在赋值检查中**使用正确的方法！**

```
type T struct{}
var _ I = T{}       // Verify that T implements I.
var _ I = (*T)(nil) // Verify that *T implements I. 
```

详细阅读常见问题解答[为什么 Go 没有“实现”声明？](https://golang.org/doc/faq#implements_interface)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-03-12T23:20:10.977

通过@smile-on 扩展答案。

在[如何保证我的类型满足接口？](https://golang.org/doc/faq#guarantee_satisfies_interface)，这是Go 作者的[常见问题 (FAQ)的一部分，说明如下：](https://golang.org/doc/faq)

> 您可以要求编译器检查该类型是否`T`实现了接口`I`，方法是根据需要尝试使用零值`T`或指向的指针进行赋值`T`。

我们可以用一个例子来说明这一点：

```
package main

type I interface{ M() }
type T struct{}

func (T) M() {}

//func (*T) M() {} //var _ I = T{}: T does not implement I (M method has pointer receiver)

func main() {
  //avoids allocation of memory
  var _ I = T{}       // Verify that T implements I.
  var _ I = (*T)(nil) // Verify that *T implements I.
  //allocation of memory
  var _ I = &T{}      // Verify that &T implements I.
  var _ I = new(T)    // Verify that new(T) implements I.
} 
```

如果`T`（或`*T`相应地）没有实现`I`，错误将在编译时被发现。请参阅[接口实现中的非接口方法](https://stackoverflow.com/questions/51623856/non-interface-methods-in-interface-implementation)。

如果你不知道它的类型，通常你会检查一个值是否实现了一个接口。如果已知，则检查由编译器自动完成。请参阅[检查值是否实现接口的说明](https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface)。

空白标识符`_`代表变量名称，此处不需要（因此可以防止“已声明但未使用”错误）。通过转换为.`(*T)(nil)`创建指向类型值的未初始​​化指针。请参阅[无法理解一段 golang 代码](https://stackoverflow.com/questions/30701755/have-trouble-understanding-a-piece-of-golang-code)。`T``nil``*T`

例如，这与`var t *T`分配任何内容之前的值相同。请参阅[golang 接口合规性编译类型检查](https://stackoverflow.com/questions/17994519/golang-interface-compliance-compile-type-check)。这避免了为空结构分配内存，就像您使用`&T{}`or获得的那样`new(T)`。请参阅[无法理解一段 golang 代码](https://stackoverflow.com/questions/30701755/have-trouble-understanding-a-piece-of-golang-code)。

报价已编辑以匹配示例。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-08-15T09:15:55.093

```
package main

import (
    "fmt"
)

type Sayer interface {
    Say()
}

type Person struct {
    Name string
}

func(this *Person) Say() {
    fmt.Println("I am", this.Name)
}

func main() {
    person := &Person{"polaris"}

    Test(person)
}

func Test(i interface{}) {
    //!!here ,judge i implement Sayer
    if sayer, ok := i.(Sayer); ok {
        sayer.Say()
    }
} 
```

代码示例在这里：[http ://play.golang.org/p/22bgbYVV6q](http://play.golang.org/p/22bgbYVV6q)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-05-12T10:30:55.647

我不喜欢通过在主代码中放置虚拟行来使编译器抛出错误的想法。这是一个有效的智能解决方案，但我更喜欢为此目的编写测试。

假设我们有：

```
type Intfc interface { Func() }
type Typ int
func (t Typ) Func() {} 
```

该测试确保`Typ`实现`Intfc`：

```
package main

import (
    "reflect"
    "testing"
)

func TestTypes(t *testing.T) {
    var interfaces struct {
        intfc Intfc
    }
    var typ Typ
    v := reflect.ValueOf(interfaces)
    testType(t, reflect.TypeOf(typ), v.Field(0).Type())
}

// testType checks if type t1 implements interface t2
func testType(t *testing.T, t1, t2 reflect.Type) {
    if !t1.Implements(t2) {
        t.Errorf("%v does not implement %v", t1, t2)
    }
} 
```

您可以通过将它们添加到`TestTypes`函数来检查所有类型和接口。[这里](http://golang.org/doc/code.html#Testing)介绍了为 Go 编写测试。

# javascript - 如何在页面中应用 JavaScript replace() 方法 2 时间

> ID：10498553
> 
> 赞同：0
> 
> 时间：2012-05-08T12:23:55.987
> 
> 标签：javascript

JavaScript replace() 方法

你好**用户名**！这个周末不要忘记我！**用户名**。

当我使用这个

```
str.replace("username", "Username"); 
```

但它只替换第一次出现我必须执行全部替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:24:30.980

美国一个全局正则表达式。`g`修饰符使其搜索整个字符串。

```
str.replace(/username/g, "Username"); 
```

如果需要避免子字符串匹配，您也可以用单词边界包围它。

```
str.replace(/\busername\b/g, "Username"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:24:53.577

使用设置了全局标志的正则表达式：

```
str.replace(/username/g, 'Username') 
```

# git - Jenkins 链接到我的本地 git 存储库

> ID：10498554
> 
> 赞同：65
> 
> 时间：2012-05-08T12:23:56.363
> 
> 标签：git, github, jenkins

我是 Jenkins 和 git 的新手。我创建了一个远程存储库`github.com`并制作了它的本地副本。
然后我想通过詹金斯链接它。我安装了 git 集成所需的插件，但我不知道在配置新项目时要设置的本地存储库 URL 是什么。有人可以帮我在哪里找到它吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-29T20:09:46.710

在这种情况下，URL 应该以文件协议开头，后跟存储库的路径。例如，`file:///home/rbkcbeqc/dev/git/gitsandbox`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-11-24T20:22:57.823

## 在 Jenkins docker 容器中访问本地 git 存储库

如果有人想从在 docker 容器中运行的 Jenkins 连接到本地 git 存储库，我建议通过 Volumes 标志将本地 git 存储库文件夹挂载到 docker 映像（有关更多详细信息，请参阅[使用卷](https://docs.docker.com/storage/volumes/)）。

要将本地 git 存储库文件夹挂载到 Jenkins 容器，请使用附加`-v`或`--volume`标志运行容器。

来自官方 docker 镜像文档的基本 docker run 语句如下所示。

```
docker run -p 8080:8080 -p 50000:50000 
           -v <PATH_TO_LOCAL_GIT_REPO>:<MOUNT_POINT_IN_CONTAINER>:ro 
           jenkins/jenkins:latest 
```

该`:ro`选项是可选的。它将以只读方式安装卷。因此，您将无法从容器中写入存储库。

然后，您可以通过文件协议简单地访问您的 git 存储库。

```
file:///<MOUNT_POINT_IN_CONTAINER> 
```

无需使用 ssh。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-08-08T07:35:13.300

如果您在 Docker 中运行 Jenkins，一种可能的解决方案是通过 SSH：

```
ssh://user@IP_of_your_host/path_to_your_project/project_name 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-28T05:18:24.047

如果您确实将远程存储库克隆到`Jenkins`正在运行的本地。

您只需输入本地存储库的路径即可。

例如，`/home/username/local_repository_path`。

# c# - Calling ShowDialog in BackgroundWorker

> ID：10498555
> 
> 赞同：7
> 
> 时间：2012-05-08T12:23:59.403
> 
> 标签：c#, winforms, backgroundworker

I have a WinForms application in which my background worker is doing a sync task, adding new files, removing old ones etc.

In my background worker code I want to show a custom form to user telling him what will be deleted and what will be added if he continues, with YES/NO buttons to get his feedback.

I was wondering if it is ok to do something like this in background worker's doWork method? If not, how should I do it?

Please advise..

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
   MyForm f = new MyForm();
   f.FilesToAddDelete(..);
   DialogResult result = f.ShowDialog();
   if(No...)
   return;
   else
   //keep working...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T12:26:20.120

如果你尝试这个，你会自己发现它不会工作，因为`BackgroundWorker`线程不是[STA](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)（它来自[托管线程池](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)）。

问题的本质是您无法从工作线程中显示用户界面¹，因此您必须解决它。您应该传递对应用程序 UI 元素的引用（主窗体将是一个不错的选择），然后用于[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)将用户交互请求编组到您的 UI 线程。一个准系统示例：

```
class MainForm
{

    // all other members here

    public bool AskForConfirmation()
    {
        var confirmationForm = new ConfirmationForm();
        return confirmationForm.ShowDialog() == DialogResult.Yes;
    }
} 
```

后台工作人员会这样做：

```
// I assume that mainForm has been passed somehow to BackgroundWorker
var result = (bool)mainForm.Invoke(mainForm.AskForConfirmation);
if (result) { ... } 
```

* * *

¹ 从技术上讲，您不能从非 STA 线程显示用户界面。如果您自己创建一个工作线程，则无论如何都可以选择使其成为 STA，但如果它来自线程池，则没有这种可能性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T12:38:48.417

我通常会创建一个方法来在 UI 线程上执行委托：

```
 private void DoOnUIThread(MethodInvoker d) {
     if (this.InvokeRequired) { this.Invoke(d); } else { d(); }
  } 
```

有了这个，您可以将代码更改为：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
   DialogResult result = DialogResult.No;
   DoOnUIThread(delegate() {
      MyForm f = new MyForm();
      f.FilesToAddDelete(..);
      result = f.ShowDialog();
   });

   if(No...)
   return;
   else
   //keep working...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:31:47.030

IMO 回答说您应该启动一个线程来处理这个问题是错误的。您需要将窗口跳回主调度程序线程。

### 在 WPF 中

```
public ShellViewModel(
    [NotNull] IWindowManager windows, 
    [NotNull] IWindsorContainer container)
{
    if (windows == null) throw new ArgumentNullException("windows");
    if (container == null) throw new ArgumentNullException("container");
    _windows = windows;
    _container = container;
    UIDispatcher = Dispatcher.CurrentDispatcher; // not for WinForms
}

public Dispatcher UIDispatcher { get; private set; } 
```

然后，当另一个线程（在这种情况下为线程池线程）上发生某些事件时：

```
public void Consume(ImageFound message)
{
    var model = _container.Resolve<ChoiceViewModel>();
    model.ForImage(message);
    UIDispatcher.BeginInvoke(new Action(() => _windows.ShowWindow(model)));
} 
```

### WinForms 等效

不要将 UIDispatcher 设置为任何内容，那么您可以：

```
public void Consume(ImageFound message)
{
    var model = _container.Resolve<ChoiceViewModel>();
    model.ForImage(message);
    this.Invoke( () => _windows.ShowWindow(model) );
} 
```

### 为 WPF 干燥它：

大佬，这么多代码...

```
public interface ThreadedViewModel
    : IConsumer
{
    /// <summary>
    /// Gets the UI-thread dispatcher
    /// </summary>
    Dispatcher UIDispatcher { get; }
}

public static class ThreadedViewModelEx
{
    public static void BeginInvoke([NotNull] this ThreadedViewModel viewModel, [NotNull] Action action)
    {
        if (viewModel == null) throw new ArgumentNullException("viewModel");
        if (action == null) throw new ArgumentNullException("action");
        if (viewModel.UIDispatcher.CheckAccess()) action();
        else viewModel.UIDispatcher.BeginInvoke(action);
    }
} 
```

在视图模型中：

```
 public void Consume(ImageFound message)
    {
        var model = _container.Resolve<ChoiceViewModel>();
        model.ForImage(message);
        this.BeginInvoke(() => _windows.ShowWindow(model));
    } 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T12:37:29.460

您应该在运行后台工作程序之前打开对话框。而在progresschanged-event 中，你可以更新对话框。

# php - 删除 HTML 标签内的空格

> ID：10498556
> 
> 赞同：2
> 
> 时间：2012-05-08T12:24:02.470
> 
> 标签：php, html, preg-replace

我目前正在翻译一个大数据集（大约 7000 行）。该数据集包含英语短语和 HTML 标签，已使用谷歌翻译翻译成荷兰语。

但是，在查看生成的翻译时，谷歌翻译还通过添加空格来打乱 HTML 标签。我想删除翻译文件中 HTML 标记内的所有无效空格。例如：

```
this is a test. < a href = "hello.php" >test</ a>; 
```

应该变成：

```
this is a test. <a href="hello.php">test</a>; 
```

有没有可以使这成为可能的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:04:16.687

```
$text = str_replace("< ", "<", $text);
$text = str_replace("> ", ">", $text);
$text = str_replace(" <", "<", $text);
$text = str_replace(" >", ">", $text);
$text = str_replace("= ", "=", $text);
$text = str_replace(" =", "=", $text);
$text = str_replace("\/ ", "\/", $text); 
```

# c++ - 为结构/类自动生成流运算符

> ID：10498557
> 
> 赞同：12
> 
> 时间：2012-05-08T12:24:03.727
> 
> 标签：c++, automation, code-generation, generator, iostream

是否有工具可以为结构或类自动生成 ostream << 运算符？

输入（取自[One Debug-Print 函数以统治它们](https://stackoverflow.com/questions/5677115/one-debug-print-function-to-rule-them-all)）：

```
typedef struct ReqCntrlT    /* Request control record */
{
  int             connectionID;
  int             dbApplID;
  char            appDescr[MAX_APPDSCR];
  int             reqID;
  int         resubmitFlag;
  unsigned int    resubmitNo;
  char            VCIver[MAX_VCIVER];
  int             loginID;
}   ReqCntrlT; 
```

输出：

```
std::ostream& operator <<(std::ostream& os, const ReqCntrlT& r) 
{
   os << "reqControl { "
      << "\n\tconnectionID: " << r.connectionID 
      << "\n\tdbApplID: " << r.dbApplID 
      << "\n\tappDescr: " << r.appDescr
      << "\n\treqID: " << r.reqID
      << "\n\tresubmitFlag: " << r.resubmitFlag
      << "\n\tresubmitNo: " << r.resubmitNo
      << "\n\tVCIver: " << r.VCIver
      << "\n\tloginID: " << r.loginID
      << "\n}";
   return os; 
} 
```

任何工具都可以，首选 Python / Ruby 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:32:36.187

为此需要一个工具，它可以准确地解析 C++、枚举各种类/结构、确定并生成每个类/结构的“序列化”，然后将生成的代码停放在“正确的位置”（可能与找到该结构的范围相同）。它需要一个完整的预处理器来处理实际代码中指令的扩展。

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[C++11 前端](http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html)可以做到这一点。DMS 通过提供通用解析/AST 构建、符号表构建、流和自定义分析、转换和源代码再生能力来支持自定义工具的构建。C++ 前端使 DMS 能够解析 C++ 并构建准确的符号表，以及将修改后的或新的 AST 漂亮地打印回可编译的源格式。DMS 及其 C++ 前端已用于对 C++ 代码进行大量转换。

你必须向 DMS 解释你想做什么；枚举符号表条目似乎很简单，询问结构/类类型声明，确定声明的范围（记录在符号表条目中），通过组合表面语法模式构造 AST，然后应用转换来插入构造的 AST。

所需的核心表面语法模式是插槽和函数体的语法模式：

```
 pattern ostream_on_slot(i:IDENTIFIER):expression =
   " << "\n\t" << \tostring\(\i\) << r.\i "; -- tostring is a function that generates "<name>"

 pattern ostream_on_struct(i:IDENTIFIER,ostream_on_slots:expression): declaration =
   " std::ostream& operator <<(std::ostream& os, const \i& r) 
     { os << \tostring\(\i\) << " { " << \ostream_on_slots << "\n}";
       return os; 
     } 
```

必须为 ostream_on_slot 组合单独的树：

```
 pattern compound_ostream(e1:expression, e2:expression): expression
     = " \e1 << \e2 "; 
```

使用这些模式，可以直接枚举结构的插槽，为主体构造 ostream，并将其插入到结构的整体函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:45:40.677

有两种主要方法可以做到这一点：

*   使用外部解析工具（例如连接到 Clang 绑定的 Python 脚本）
*   使用元编程技术

..当然它们可以混合使用。

我没有足够的关于 Clang Python 绑定的知识来回答使用它们，所以我将专注于元绘图。

* * *

基本上，你所要求的需要自省。C++ 不支持完全自省，但是使用元编程技巧（和模板匹配）它可以在编译时支持有限的自省技术子集，这足以满足我们的目的。

为了轻松混合元编程和运行时操作，更容易使用库：[Boost.Fusion](http://www.boost.org/doc/libs/1_49_0/libs/fusion/doc/html/index.html)。

如果您调整您的结构，使其属性根据 Boost.Fusion 序列来描述，那么您可以自动在序列上应用大量算法。在这里，[关联序列](http://www.boost.org/doc/libs/1_49_0/libs/fusion/doc/html/fusion/sequence/concepts/associative_sequence.html)是最好的。

因为我们正在谈论元编程，[所以映射将](http://www.boost.org/doc/libs/1_49_0/libs/fusion/doc/html/fusion/container/map.html)*类型*与*类型化值*相关联。

[然后，您可以使用for_each](http://www.boost.org/doc/libs/1_49_0/libs/fusion/doc/html/fusion/algorithm/iteration/functions/for_each.html)迭代该序列。

* * *

我将忽略细节，只是因为已经有一段时间了，我不记得所涉及的语法，但基本上这个想法是：

```
// Can be created using Boost.Preprocessor, but makes array types a tad difficult
DECL_ATTRIBUTES((connectionId, int)
                (dbApplId, int)
                (appDescr, AppDescrType)
                ...
                ); 
```

这是声明 Fusion Map 及其相关标签的语法糖：

```
struct connectionIdTag {};
struct dbApplIdTag {};

typedef boost::fusion::map<
    std::pair<connectionIdTag, int>,
    std::pair<dbApplIdTag, int>,
    ...
    > AttributesType;
AttributesType _attributes; 
```

然后，任何需要应用于属性的操作都可以简单地构建：

```
// 1\. A predicate:
struct Predicate {
    template <typename T, typename U>
    void operator()(std::pair<T, U> const&) const { ... }
};

// 2\. The for_each function
for_each(_attributes, Predicate()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:13:22.643

要实现这一点，唯一的方法是使用在源文件上运行的外部工具。

首先，您可以使用[c/c++ 分析工具](https://stackoverflow.com/questions/526797/good-tools-for-creating-a-c-c-parser-analyzer)，并使用它从您的源代码中检索解析树。然后，一旦你有了解析树，你只需要搜索结构。对于每个结构，您现在可以生成`operator<<`序列化结构字段的重载。您还可以生成反序列化运算符。

但这取决于您拥有多少个结构：对于一打更好的是手动编写运算符，但如果您有数百个结构，您可能需要编写 (de)serialize 运算符生成器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:02:08.043

我确实从两个方面理解了你的问题。

如果您想生成程序的自动状态报告，我建议您检查 Boost.Serialization。但是，它不会在编译时生成代码作为第一步或灵感。下面的代码将帮助您生成可以阅读的 xml 或 txt 文件。

```
typedef struct ReqCntrlT    /* Request control record */
{
  int             connectionID;
  int             dbApplID;
  char            appDescr[MAX_APPDSCR];
  int             reqID;
  int         resubmitFlag;
  unsigned int    resubmitNo;
  char            VCIver[MAX_VCIVER];
  int             loginID;

    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & connectionID;
        ar & reqID;
        ...
    }
}   ReqCntrlT; 
```

有关更多详细信息，请参阅教程：http: [//www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html)

如果您只是想通过给出参数名称来“编写”代码。然后你应该看看 python 或 perl 中的正则表达式。此解决方案的主要默认设置是您的结构“离线”，即每次更改某些内容时都必须运行它。

贝努瓦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-18T22:42:58.683

您可以使用 LibClang 解析源代码并生成 ostream 运算符：

```
# © 2020 Erik Rigtorp <erik@rigtorp.se>
# SPDX-License-Identifier: CC0-1.0
import sys
from clang.cindex import *

idx = Index.create()
tu = idx.parse(sys.argv[1], ['-std=c++11'])

for n in tu.cursor.walk_preorder():
    if n.kind == CursorKind.ENUM_DECL:
        print(
            f'std::ostream &operator<<(std::ostream &os, {n.spelling} v) {{\n  switch(v) {{')
        for i in n.get_children():
            print('    case {type}::{value}: os << "{value}"; break;'.format(
                type=n.type.spelling, value=i.spelling))
        print('  }\n  return os;\n}')
    elif n.kind == CursorKind.STRUCT_DECL:
        print(
            f'std::ostream &operator<<(std::ostream &os, const {n.spelling} &v) {{')
        for i, m in enumerate(n.get_children()):
            print(
                f'  os << "{", " if i != 0 else ""}{m.spelling}=" << v.{m.spelling};')
        print('  return os;\n}') 
```

来自我的文章：[https ://rigtorp.se/generating-ostream-operator/](https://rigtorp.se/generating-ostream-operator/)

# c# - 使用共享链接生成电子邮件

> ID：10498566
> 
> 赞同：0
> 
> 时间：2012-05-08T12:24:28.983
> 
> 标签：c#, windows-phone-7, onedrive

我想通过电子邮件分享 skydrive 链接，但我不知道如何去做。我想在上传文件夹后获取链接并将其作为电子邮件发送。有谁能够帮我？一些代码参考将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:20:17.210

看看这篇博文。我在为我的应用程序添加 Skydrive 支持时使用了它 - 很酷的相机。 [http://babaandthepigman.wordpress.com/2012/01/18/wp7-skydrive-upload/](http://babaandthepigman.wordpress.com/2012/01/18/wp7-skydrive-upload/)

这会让你开始。到达那里后，请查看 skydrive 示例等 [http://msdn.microsoft.com/en-us/library/live/hh826550.aspx#csharp](http://msdn.microsoft.com/en-us/library/live/hh826550.aspx#csharp)

和 LiveConnectClient 公开的方法 [http://msdn.microsoft.com/en-us/library/live/microsoft.live.liveconnectclient.aspx](http://msdn.microsoft.com/en-us/library/live/microsoft.live.liveconnectclient.aspx)

总而言之，您上传、分享、获取 url 并使用 EmailComposeTask 发送它

# .net - 如何将 PDFSharp 对象保存到多个文件？

> ID：10498569
> 
> 赞同：2
> 
> 时间：2012-05-08T12:24:35.350
> 
> 标签：.net, exception, pdf, c++-cli, pdfsharp

我有一个我正在生成的 pdf 清晰文档并将其保存到单个文件中效果很好。如果我尝试从同一个 pdf 文档保存到多个文件，我会收到以下错误消息：

```
Test Error : UnitTests.PdfFocusCalResultOutputterTester.Test_MakePDF
System.InvalidOperationException : The dictionary already has a stream.
at PdfSharp.Pdf.PdfDictionary.CreateStream(Byte[] value)
at PdfSharp.Pdf.Advanced.PdfToUnicodeMap.PrepareForSave()
at PdfSharp.Pdf.Advanced.PdfType0Font.PrepareForSave()
at PdfSharp.Pdf.Advanced.PdfFontTable.PrepareForSave()
at PdfSharp.Pdf.PdfDocument.PrepareForSave()
at PdfSharp.Pdf.PdfDocument.DoSave(PdfWriter writer)
at PdfSharp.Pdf.PdfDocument.Save(Stream stream, Boolean closeStream)
at ResultOutputter.PdfFocusCalResultOutputter.RenderToFile(String filename) in c:\projects\testing\pdffocuscalresultoutputter.cpp:line 802 
```

我只是简单地调用`PdfSharp::Pdf::PdfDocument::Save`我的 a 实例，`PdfDocument`如下所示：

```
System::IO::FileStream^ s = gcnew System::IO::FileStream("firstpdf.pdf", System::IO::FileMode::Create);
m_document->Save(s, false);
s->Flush();
s->Close();

System::IO::FileStream^ s2 = gcnew System::IO::FileStream("secondpdf.pdf", System::IO::FileMode::Create);
m_document->Save(s2, false);
s2->Flush();
s2->Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:43:30.003

1.  这是 PDFsharp 中的一个错误，您的代码应该可以工作。
2.  您的代码效率不高。保存一次到一个流，然后将该流写入两个或多个文件。

# ios - 使用 ImagePickerController 导致我的应用程序崩溃

> ID：10498574
> 
> 赞同：0
> 
> 时间：2012-05-08T12:24:47.393
> 
> 标签：ios, uiimagepickercontroller

我对此进行了很多研究。触摸按钮时，我必须从设备中选择图像并显示在屏幕上。

但是当按钮被触摸/按下时，它会导致我的应用程序崩溃。它从这行代码崩溃：

```
[self presentModalViewController:myPhotopicker animated:YES]; 
```

我正在使用 Xcode 4.2 开发 iPad 应用程序。我正在使用 iPad 5.0 模拟器进行测试。我的系统在 Mac OS X 版本 10.6.8 上运行。

按下按钮时调用以下函数：

```
-(IBAction)getPhoto:(id)sender
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
        if (myPhotopicker==nil) { myPhotopicker = [[UIImagePickerController alloc] init];
            myPhotopicker.delegate = self; }// create once!
        myPhotopicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        [self presentModalViewController:myPhotopicker animated:YES];

    } else {
        NSString *str = @"Photo Album is not available!";     

    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:04:40.560

我尝试了您的代码，并且可以在模拟器中重现崩溃。但它在我的带有 iOS 4.2 的 iPhone 4 上运行良好。

也就是说，我在模拟器中制作了我的画廊，其中包含一些照片。（启动模拟器中的 Safari，打开一些页面，通过长按它们并从菜单中选择保存来保存一些图片。）

现在，模拟器写道

```
2012-05-08 15:53:55.605 test[5870:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'On iPad, UIImagePickerController must be presented via UIPopoverController' 
```

到控制台。

好的，阅读，完成：

```
-(IBAction)getPhoto:(UIButton *)sender
{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) 
    {
        if (myPhotopicker==nil) {
            myPhotopicker = [[UIImagePickerController alloc] init];
            myPhotopicker.delegate = self;
        }// create once!
        myPhotopicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            // iPad Code:
            UIPopoverController *popover =
                [[UIPopoverController alloc] initWithContentViewController:myPhotopicker];
            [popover presentPopoverFromRect:sender.bounds
                                     inView:self.view
                   permittedArrowDirections:UIPopoverArrowDirectionAny
                                   animated:YES];
        } else {
            // iPhone Code:
            [self presentModalViewController:myPhotopicker animated:YES];
        }
    } else {
        NSLog(@"Photo Album is not available!");
    }     
} 
```

现在它看起来像这样：
![在此处输入图像描述](../Images/1717442a6edc15345329234d5fec6776.png)

# ruby-on-rails - Rails Radio_button onchange 重新加载

> ID：10498578
> 
> 赞同：2
> 
> 时间：2012-05-08T12:24:59.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, radio-button, onchange

我有一个有两个评级选项（喜欢和星）的网站，所以我想添加一个 radio_button 来选择应该加载哪个。

我现在有这个代码：

```
<%= radio_button_tag 'receive_updates', 'no', true %> Likes
<%= radio_button_tag 'receive_updates', 'no', false %> Stars 
```

单选按钮状态更改后，我想重定向到“root_path”。

我的问题，

*   如何在没有模型的状态更改后重定向？
*   我如何控制喜欢是真的还是假的？

我发现了一些像这样重定向的东西：

```
<%= radio_button_tag 'receive_updates', 'no', true , :on_change => root_path%> Likes 
```

但是这个 on_change 不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:48:07.540

不确定您想在这里做什么，但是，使用 Javascript，您可以在调用“onchange”事件时重定向/传递参数，如下所示：

```
<%= radio_button_tag 'receive_updates', 'likes', false %> Likes
<%= radio_button_tag 'receive_updates', 'stars', false %> Stars

<script >
    $(function(){
        $("input[name=receive_updates]").change(function(){
            var root_path = "<%= root_path %>"
            var url = root_path + "?receive_updates=" + $(this).val();
            window.location.replace(url);
        });
    });
</script> 
```

# powershell - 私钥在 Windows Server 2008 R2 中被意外删除

> ID：10498580
> 
> 赞同：4
> 
> 时间：2012-05-08T12:25:05.303
> 
> 标签：powershell, certificate, windows-server-2008-r2, private-key

我在开发应该在其中一个步骤中安装证书的安装时遇到了一个奇怪的问题。

该问题与在 Windows Server 2008 R2 上为帐户（例如 IIS_IUSRS）授予证书的私钥访问权限有关。私钥存储在位置 C:\Users\All Users\Microsoft\Crypto\RSA\MachineKeys。

自定义 C# 安装项目会在安装过程中导入证书并授予对证书私钥帐户的访问权限。一段时间后（2-3 秒），私钥文件会自动从 MachineKeys 文件夹中删除。因此已安装的 Web 应用程序无法访问特定证书并显示以下错误消息：

“System.Security.Cryptography.CryptographicException：密钥集不存在”。此错误仅在 Windows Server 2008 R2 上发生，而对于 Windows Server 2003，一切正常。

我的问题是，为什么私钥会被删除，哪个进程会这样做？

谢谢

**2012 年 17 月 5 日更新**

我还没有找到所描述问题的解决方案，并且在我询问的其他论坛（forums.asp.net、social.msdn.microsoft.com）上也没有发布任何回复。那么，任何人都可以建议任何其他资源或建议以进一步解决此问题吗？

再次感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-10T20:51:05.537

这也发生在我身上 - 我的安装脚本将添加证书并授予对 PK 文件的访问权限，并且该应用程序可以正常工作。后来，在我关闭 PowerShell 编辑器后，我重新启动了该应用程序，但由于找不到密钥集而失败。

在导入证书时添加 PersistKeySet 标志可解决问题。这是用于添加具有持久性的证书和私钥的 PowerShell 代码：

```
param(
    [string]$certStore = "LocalMachine\TrustedPeople",
    [string]$filename = "sp.pfx",
    [string]$password = "password",
    [string]$username = "$Env:COMPUTERNAME\WebSiteUser"
)

    function getKeyUniqueName($cert) {
         return $cert.PrivateKey.CspKeyContainerInfo.UniqueKeyContainerName
    }

    function getKeyFilePath($cert) {             
         return "$ENV:ProgramData\Microsoft\Crypto\RSA\MachineKeys\$(getKeyUniqueName($cert))"
    }

$certFromFile = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2($filename, $password)
$certFromStore = Get-ChildItem "Cert:\$certStore" | Where-Object {$_.Thumbprint -eq $certFromFile.Thumbprint}
$certExistsInStore = $certFromStore.Count -gt 0
$keyExists = $certExistsInStore -and ($certFromStore.PrivateKey -ne $null) -and (getKeyUniqueName($cert) -ne $null) -and (Test-Path(getKeyFilePath($certFromStore)))

if ((!$certExistsInStore) -or (!$keyExists)) {

    $keyFlags = [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::MachineKeySet 
    $keyFlags = $keyFlags -bor [System.Security.Cryptography.X509Certificates.X509KeyStorageFlags]::PersistKeySet
    $certFromFile.Import($filename, $password, $keyFlags)

    $store = Get-Item "Cert:\$certStore"
    $store.Open("ReadWrite")

    if ($certExistsInStore) {
        #Cert is in the store, but we have no persisted private key
        #Remove it so we can add the one we just imported with the key file
        $store.Remove($certFromStore)
    }

    $store.Add($certFromFile)
    $store.Close()

    $certFromStore = $certFromFile
    "Installed x509 certificate"
}

$pkFile = Get-Item(getKeyFilePath($certFromStore))
$pkAcl = $pkFile.GetAccessControl("Access")
$readPermission = $username,"Read","Allow"
$readAccessRule = new-object System.Security.AccessControl.FileSystemAccessRule $readPermission
$pkAcl.AddAccessRule($readAccessRule)
Set-Acl $pkFile.FullName $pkAcl
"Granted read permission on private key to web user" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:38:19.727

很明显就是安全问题“<strong> `System.Security`.”。并且您没有权限进行安装。您需要设置私钥的权限以允许该服务帐户[访问它](http://msdn.microsoft.com/en-us/library/aa702621.aspx)。

**稍后编辑**：转到开始->运行->cmd->键入 mmc->选择文件->添加/删除->选择证书->添加->计算机帐户->本地。，我附上一个截图是西班牙语，但我表示字段：

![在此处输入图像描述](../Images/06f495a48f1b93115201b2db16f19f15.png)

打开->证书->个人->证书->右键单击证书->所有任务->管理私钥->添加网络服务。

还请查看此条[目](http://learn.iis.net/page.aspx/624/application-pool-identities/)以了解此功能在 Windows Server 2008 中的工作原理。然后请在您尝试后，回来说是否可以按照我告诉您的内容解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T14:49:50.010

[http://referencesource.microsoft.com/#System/security/system/security/cryptography/x509/x509certificate2collection.cs,256](http://referencesource.microsoft.com/#System/security/system/security/cryptography/x509/x509certificate2collection.cs,256)显示了测试 PersistKeySet 标志的位置。PersistKeySet 标志记录在[https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509keystorageflags%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509keystorageflags%28v=vs.110%29.aspx)带有短语“与 PFX 文件关联的密钥在导入证书时被保留。” 我的英语翻译器告诉我这意味着“如果您调用 X509Certificate2 构造函数并且证书可能已经安装在机器上，则必须包含 PersistKeySet 标志。” 这可能也适用于 .Import 调用。很可能 powershell Import-PfxCertificate cmdlet 已经这样做了。但是，如果您正在执行已接受的答案显示或 OP 要求的内容，则需要包含特殊密钥。我们在解决方案中使用了 ejegg 脚本的变体。我们有一个每 3 分钟运行一次的进程来检查是否安装了所有配置的证书，现在这似乎工作正常。

我们在 powershell 中看到的症状是 HasPrivateKey 属性为 true 但 PrivateKey 值本身为空。并且 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 中证书的密钥文件已被删除。[https://msdn.microsoft.com/en-us/library/aa717039(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/aa717039(v=vs.110).aspx)上的 FindPrivateKey 实用程序帮助我们观察文件被删除。

很晚才回答这个问题，祝你 4 岁生日快乐。

# asp.net-mvc - 如何在我的视图中使用 ASP MVC 设置复选框？

> ID：10498585
> 
> 赞同：0
> 
> 时间：2012-05-08T12:25:18.593
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下课程：

```
 public class City {  
      public string Name { get; set; }
      public bool CityValid { get; set; }
   } 
```

我知道如何设置名称，但如何设置 CityValid 字段，使其类似于复选框。我想在不使用 HTML 帮助器的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:33:50.460

如果您真的不想使用帮助程序，您可以使用普通的 HTML 输入标记：

```
<input type="checkbox" id="CityValid" name="CityValid" value="@Model.CityValid" />
<input type="hidden" id="CityValue_Hidden" name="CityValid" value="false" /> 
```

name 属性必须与您的属性名称相匹配，以便模型绑定器在您回发到服务器时正确拾取它。

当您使用助手时，将生成类似于上述标记的内容。隐藏字段在那里，因此无论您是否选中该框，*始终都会*发送一个值与表单发布数据一起发送（如果您未选中该框，则默认情况下不会发送任何值，甚至不会发送“假”）。

但是，除非您正在做一些非常奇怪的事情，否则我建议您坚持使用帮助程序。任何一个：

```
@Html.CheckboxFor(m => m.CityValid) 
```

或者

```
@Html.EditorFor(m => m.CityValid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:27:24.070

在您看来，您可以使用`EditorFor`帮助程序：

```
@model City
...
@Html.EditorFor(x => x.CityValid) 
```

布尔字段的默认编辑器模板会生成一个复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:30:10.043

您可以首先使用 HTML 助手创建它，查看运行页面时创建的标记，然后重新创建该标记...

# javascript - Prototype 和 jQuery 之间的冲突

> ID：10498586
> 
> 赞同：1
> 
> 时间：2012-05-08T12:25:23.957
> 
> 标签：javascript, jquery, prototypejs

我正在尝试在一页上使用 jQuery Datepicker 和 JavaCcript 滚动条。但是，如果我在头文件中声明两者都不起作用，有没有办法可以解决这个问题但仍然使用两者？我尝试了以下但没有成功：

```
var $j = jQuery.noConflict();
$j("#datepicker").datepicker(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:27:04.147

尝试 ：

```
jQuery.noConflict();
jQuery("#datepicker").datepicker(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:33:23.180

```
<script src="prototype.js"></script>
<script src="effects.js"></script>
<script src="jquery.js"></script>

<script type="text/javascript">
jQuery.noConflict();
 jQuery(document).ready(function($){
     jQuery("a").click(function(){
        //Effect.Shake('shake_demo');//this is prototype.js function
                    //jQuery("#datepicker").datepicker();//for suing Jquery function
    });
});
</script>

<body>
<div id="shake_demo" style="width:150px; height:40px; background:#ccc; text-align:center;">
    <a href="#"  style="line-height:40px;">Click me to shake!</a>

</div>
<a id="aClick" class="aClick" href="#"  style="line-height:40px;">Click me to shake!</a>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:36:09.867

您可以解决冲突并仍然`$`像这样使用：

```
jQuery(function($){
    $("#datepicker").datepicker();
})(jQuery) 
```

# continuous-integration - 带有动态参数的 Cruisecontrol.net 项目设置

> ID：10498589
> 
> 赞同：2
> 
> 时间：2012-05-08T12:25:52.603
> 
> 标签：continuous-integration, cruisecontrol.net

我正在尝试设置 CruiseControl.NET (1.6.7981.1)，以便每个开发人员都可以选择从哪个源代码控制分支构建。我遇到了以下问题。

1.  我还没有找到通过动态参数设置`<artifactDirectory>`和`<workingDirectory>`投影参数的方法。

2.  CruiseControl.NET 没有替换动态参数标记，例如`$[branchName]`在`<artifactDirectory>C:/ci/$[branchName]<artifactDirectory>`.

有没有办法让一个项目包含最终用户选择的多个工件和工作目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:57:19.043

不，您不能在`<artifactDirectory>`和中使用动态参数`<workingDirectory>`。该文档指出：

> 参数可用于任务/发布者、源代码控制块和标签器。[...] 并非所有项目都允许使用动态参数。

如果您愿意放松单项目约束，您可以使用[配置预处理器](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Configuration_Preprocessor)来定义和应用参数化项目模板。

# ruby-on-rails - Rails 瘦服务器无响应

> ID：10498591
> 
> 赞同：2
> 
> 时间：2012-05-08T12:25:58.187
> 
> 标签：ruby-on-rails, eventmachine, thin

我已经安装了 Ruby 1.9.2-p290（通过 RVM）和 Rails 3.2.2。EventMachine 0.12.10、Thin 1.3.1 和 Rack 1.4.0

我像这样启动应用程序：

```
zonic@laptop:~/rails-projects/project$ bundle exec thin start --threaded
>> Using rack adapter
/home/zonic/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.2/lib/action_dispatch/http/mime_type.rb:102: warning: already initialized constant PNG
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop 
```

它就在那里，永远存在。我尝试导航到 localhost:3000 但它只是没有回复。当我 crtl+c 时，这就是我得到的：

```
^C>> Stopping ...
log writing failed. deadlock; recursive locking 
```

我在网上搜索过这个问题，但没有运气。我当前的操作系统是 Ubuntu 12.04 64b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T00:41:59.153

您在线程模式下开始瘦身。您是否取消了 config.threadsafe 的注释！在您的 Rails 配置中，以便它与线程服务器很好地配合？

# xml - 使用 VB6 编辑 XML 的属性值

> ID：10498601
> 
> 赞同：2
> 
> 时间：2012-05-08T12:26:42.640
> 
> 标签：xml, vb6

我需要使用 VB6 更新 bkp_path 的属性值。

## XML 文件

```
<ServerDetails>
    <Param src_path = "D:\Shapes\Rectangle" bkp_path = "D:\Colors\Red"/>
</ServerDetails> 
```

我可以使用从 XML 文件中读取值

## VB6 代码

```
Dim doc As New MSXML2.DOMDocument
Set doc = New MSXML2.DOMDocument
Dim success As Boolean
'Load Config.xml
success = doc.Load("\Config\config.xml")

If success = False Then
  MsgBox ("Unable to locate the configuration file")
  Exit Function
Else
  Dim nodeList As MSXML2.IXMLDOMNodeList

  Set nodeList = doc.selectNodes("/ServerDetails/Param")

  If Not nodeList Is Nothing Then
     Dim node As MSXML2.IXMLDOMNode

     For Each node In nodeList
        srcpath = node.selectSingleNode("@src_path").Text
        bkpPath = node.selectSingleNode("@bkp_path").Text            
     Next node
  End If
End If 
```

但无法弄清楚如何更新属性值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:48:43.047

您需要获取对节点对象的引用，然后调用`setAttribute()`以指定新值：

```
node.setAttribute "bkp_path", "wibble" 
```

您的代码还会从所有节点读取值，`Param`但您可能只想使用第一个节点或更新特定节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:04:24.460

这成功了：

`node.selectSingleNode("@bkp_path").Text = "D:\Colors\Blue"`

# ruby-on-rails - 从 Rails 邮件中的地址自定义

> ID：10498611
> 
> 赞同：0
> 
> 时间：2012-05-08T12:27:18.153
> 
> 标签：ruby-on-rails, ruby, smtp

在我的 Rails 应用程序中，我尝试使用自定义地址发送邮件。

它工作正常几次，但大部分时间它不起作用。我收到以下 smtp 错误消息

```
Net::SMTPFatalError (553 Sorry, your envelope sender is in my badmailfrom list.
):
    C:/Ruby/lib/ruby/1.8/net/smtp.rb:687:in `check_response'
    C:/Ruby/lib/ruby/1.8/net/smtp.rb:660:in `getok'
    C:/Ruby/lib/ruby/1.8/net/smtp.rb:638:in `mailfrom'
    C:/Ruby/lib/ruby/1.8/net/smtp.rb:550:in `send0'
    C:/Ruby/lib/ruby/1.8/net/smtp.rb:475:in `sendmail'
    /vendor/rails/actionmailer/lib/action_mailer/base.rb:638:in `perform_delivery_smtp' 
```

这是我的示例代码

在**mailer.rb 中**

```
 def mail_to_friend(recipient_mail, sender_mail, subjects, messages, host, port)
    @host = host
    @port = port

    recipients recipient_mail
    from       "#{sender_mail}"  #custom from address
    subject    "#{subjects}"
    sent_on    Time.now    
    body       :message_body => messages, :host => host, :port => port
    content_type "text/html"
  end 
```

我正在使用 Rails 2.3.5 和 Ruby 1.8.6。PS：我没有使用谷歌 smtp 服务器（使用自己的 smtp 服务器）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:35:51.210

远程 SMTP 服务器的所有者禁止您（或您冒充的人），我猜是因为您在未经许可的情况下使用他们的服务器测试奇怪的东西（或者因为您所做的与垃圾邮件发送者所做的相似，并且您触发了自动禁止规则）。

# ruby-on-rails - SQLite3::SQLException: 无法提交 - 没有事务处于活动状态

> ID：10498612
> 
> 赞同：0
> 
> 时间：2012-05-08T12:27:21.650
> 
> 标签：ruby-on-rails, activerecord, sqlite, delayed-job

我正在尝试使用黄瓜测试[DelayedJob在电子邮件中的发送。](https://github.com/collectiveidea/delayed_job)该功能实际上在浏览器中工作（在开发和生产环境中），但是当我尝试测试它时遇到了一个奇怪的 SQlite3 异常。

测试日志在底部。正如您所看到的，它`SQLite3::SQLException`在将电子邮件发送作业插入队列之后就失败了。

根据 Delayed::Job 失败的原因是：

```
Delayed::DeserializationError
    /Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/psych_ext.rb:108:in `rescue in visit_Psych_Nodes_Mapping_with_class' 
```

有人知道这里发生了什么吗？

我发现了一个相关的问题，但那里的问题似乎不受测试环境的限制。因此，我认为解决方案不会相同。

1.  [SQLite3 错误 - 无法回滚 - 没有事务处于活动状态](https://stackoverflow.com/q/5937426/574190)

这是完整的测试跟踪：

```
 SQL (82.7ms)  INSERT INTO "delayed_jobs" ("attempts", "created_at", "failed_at", "handler", "last_error", "locked_at", "locked_by", "priority", "queue", "run_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["attempts", 0], ["created_at", Tue, 08 May 2012 12:14:15 UTC +00:00], ["failed_at", nil], ["handler", "--- !ruby/object:Delayed::PerformableMailer\nobject: !ruby/class 'InvitationMailer'\nmethod_name: :invite\nargs:\n- !ruby/ActiveRecord:Invitation\n  attributes:\n    id: 1\n    sender_id: 1\n    search_id: 1\n    token: 4cba1a8a36de826493b1d8a8cc21091e2fb393e1\n    sent_at: \n    recipient_email: peter@example.com\n    created_at: 2012-05-08 12:14:15.702071000 Z\n    updated_at: 2012-05-08 12:14:15.702071000 Z\n    recipient_id: \n    accepted: \n"], ["last_error", nil], ["locked_at", nil], ["locked_by", nil], ["priority", 0], ["queue", nil], ["run_at", Tue, 08 May 2012 12:14:15 UTC +00:00], ["updated_at", Tue, 08 May 2012 12:14:15 UTC +00:00]]
   (0.9ms)  commit transaction
SQLite3::SQLException: cannot commit - no transaction is active: commit transaction
   (0.5ms)  rollback transaction
SQLite3::SQLException: cannot rollback - no transaction is active: rollback transaction
Completed 500 Internal Server Error in 126ms
  SQL (1.9ms)  UPDATE "delayed_jobs" SET locked_at = '2012-05-08 12:14:16.993126', locked_by = 'host:dtmbp.local pid:14059' WHERE (id = 3 and (locked_at is null or locked_at < '2012-05-08 08:14:16.993126') and (run_at <= '2012-05-08 12:14:16.993126'))
  Invitation Load (0.2ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT 1  [["id", 1]]
  Invitation Load (0.1ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT 1  [["id", 1]]
  Invitation Load (0.1ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT 1  [["id", 1]]
  Invitation Load (0.1ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT 1  [["id", 1]]
  Invitation Load (0.1ms)  SELECT "invitations".* FROM "invitations" WHERE "invitations"."id" = ? LIMIT 1  [["id", 1]]
   (0.1ms)  begin transaction
   (0.5ms)  UPDATE "delayed_jobs" SET "locked_at" = '2012-05-08 12:14:16.993126', "locked_by" = 'host:dtmbp.local pid:14059', "last_error" = '{Delayed::DeserializationError
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/psych_ext.rb:108:in `rescue in visit_Psych_Nodes_Mapping_with_class''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/psych_ext.rb:101:in `visit_Psych_Nodes_Mapping_with_class''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:20:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:134:in `block in visit_Psych_Nodes_Sequence''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:134:in `each''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:134:in `visit_Psych_Nodes_Sequence''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:20:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:276:in `block in revive''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:276:in `map''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:276:in `revive''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:219:in `visit_Psych_Nodes_Mapping''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/psych_ext.rb:119:in `visit_Psych_Nodes_Mapping_with_class''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:20:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:231:in `visit_Psych_Nodes_Document''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:15:in `visit''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb:5:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb:20:in `accept''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/node.rb:35:in `to_ruby''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:128:in `load''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:84:in `payload_object''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:94:in `block in invoke_job''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/backend/base.rb:91:in `invoke_job''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:178:in `block (2 levels) in run''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:178:in `block in run''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:177:in `run''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:234:in `block in reserve_and_run_one_job''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:234:in `reserve_and_run_one_job''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:162:in `block in work_off''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:161:in `times''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:161:in `work_off''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:133:in `block (4 levels) in start''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:132:in `block (3 levels) in start''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:129:in `block (2 levels) in start''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:128:in `loop''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:128:in `block in start''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/plugins/clear_locks.rb:7:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in <class:ClearLocks>''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `block (2 levels) in add''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:60:in `block in initialize''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:78:in `block in add''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:65:in `execute''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/lifecycle.rb:38:in `run_callbacks''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/worker.rb:127:in `start''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/delayed_job-3.0.2/lib/delayed/tasks.rb:9:in `block (2 levels) in <top (required)>''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain''
/Users/davidtuite/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `load''
/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `<main>''', "failed_at" = '2012-05-08 12:14:17.131476', "updated_at" = '2012-05-08 12:14:17.132975' WHERE "delayed_jobs"."id" = 3
   (1.5ms)  commit transaction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:36:47.750

我刚刚遇到这个错误，并意识到有问题的 AR 对象已经被删除了。也许这也是你的情况？

相关链接：[psych_ext.rb#L101 中断已删除序列化对象的恢复](https://github.com/collectiveidea/delayed_job/issues/409)

# macos - MAC PackageMaker preinstall/postinstall 脚本获取原始 *.pkg 文件目录

> ID：10498618
> 
> 赞同：4
> 
> 时间：2012-05-08T12:27:36.813
> 
> 标签：macos, bash, packagemaker

安装时如何获取原始 *.pkg 文件目录？

我创建了一个 pkg 文件，并将其与另一个文件（如`test.txt`）放在同一个文件夹中，如 ~/Desktop/test

并且在安装 pkg 文件时，我希望它将“test.txt”文件复制到 ~/Library 文件夹。所以我将 preinstall/postinstall 脚本添加到 pkg 文件中以复制“test.txt”文件。我尝试让目录使用

```
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )" 
```

但它会返回 tmp 目录

```
/private/tmp/PKInstallSandbox.G5GFI6/Scripts/com.myApp.testApp.pkg.o5k2nE 
```

不是原始的 pkg 目录`(~/Desktop/test)`

有人知道安装时如何获取原始目录吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T17:34:16.650

您创建了一个平面包？您是否尝试过查看传递给 postinstall 脚本的参数？

```
$0 - Script path
$1 - Package path
$2 - Target location
$3 - Target volume` 
```

参数 $1 应该给你你正在寻找的东西。

[从旧包样式格式信息](http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html)复制，但似乎仍然适用于较新的平面包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T06:40:14.047

这个[Mac 安装程序博客](http://macinstallers.blogspot.in/2012/07/scripting-in-installer-packages.html)有一些关于 Packagemaker 的有用帖子，包括有关使用的详细信息和常见问题的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-16T17:07:24.683

这个：

```
pkgpath=\`dirname "$PACKAGE_PATH"\` 
```

将为您提供变量中包的路径`$pkgpath`。

# java - 如何修复无效的 SSL 记录内容类型

> ID：10498620
> 
> 赞同：0
> 
> 时间：2012-05-08T12:27:44.130
> 
> 标签：java, security, networking, ssl

您好，我在尝试使用 SSLFactory 连接到 Java 中的 SSL 时收到此错误

堆栈跟踪：

```
javax.net.ssl.SSLHandshakeException: invalid SSL record content type
at com.ibm.j9.jsse.SSLSocketImpl.completeHandshake(Unknown Source)
at com.ibm.j9.jsse.SSLSocketImpl.getInputStream(Unknown Source) 
```

这是握手期间的代码错误：

```
_socket = SocketFactory.getSslSocket( _socket, //Socket created before this call
                                       _address, //host that supports SSL
                                       _port.intValue() );

 SSLSocket tempSocket = (SSLSocket)_socket;

 String[] supportedCipherSuites = tempSocket.getSupportedCipherSuites();

 System.out.println( "Supported Cipher Suites:" );
 for( int i = 0; i < supportedCipherSuites.length; i++ )
 {
    System.out.println( supportedCipherSuites[i] );
 }     

 tempSocket.setUseClientMode( true );
 tempSocket.startHandshake(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:55:30.677

`getSupportedCipherSuites()`仅向您显示您的本地 SSL 实现可以支持哪些密码（无论它们是否启用）；它不使用远程连接。因此，无论您的`SSLSocket`. 直到您尝试握手（或者如果通过尝试读取或写入流或访问 SSL 会话信息来强制握手），远程连接才会打开。

您确定您正在建立的出站 TCP 连接是到 SSL 服务器吗？您是否能够通过其他客户端（例如浏览器或 OpenSSL 命令行客户端）确认这一点？

# javascript - 我们可以调用两个函数 onClick 事件吗

> ID：10498621
> 
> 赞同：2
> 
> 时间：2012-05-08T12:27:47.123
> 
> 标签：javascript, jquery, ajax, html, division

我正在尝试这样的事情

```
<div onclick="check_update('personal_details') ; showUser(2)">Click me </div> 
```

但只有**check_update('personal_details')**被调用。单击 DIV 时，我想同时执行两个单独的函数。由于我仍处于学习阶段，因此任何帮助对我来说都非常有用。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T12:29:49.183

您不能同时执行两个功能。Web 浏览器中的 JavaScript 是单线程的。

您拥有的代码将按顺序执行函数，前提是第一个代码不会引发异常并终止执行。

如果它确实引发了异常，那么您应该尝试解决它。作为蛮力破解：

```
try {
    check_update('personal_details') ; 
} catch (e) {
    alert("Oh no! An exception! " + e);
}
showUser(2); 
```

......但首先防止错误显然是一个更好的解决方案！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:31:45.983

你的问题被标记为 jQuery，所以我假设你正在使用它。在这种情况下，您根本不应该使用 onclick 属性。这将是从 jQuery 角度编写代码的正确方法：

```
<div id="yourId">Click me</div>

<script type="text/javascript">
$('#yourId').click(function(e) {
    e.preventDefault();
    check_update('personal_details'); 
    showUser(2);
});
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:28:54.183

在闭包中使用函数。替换`otherFunction`为您要调用的第二个函数的名称，一切都应该按预期工作。

```
<div onclick="(function(){check_update('personal_details'); otherFunction(); })()">Click me </div> 
```

# c# - 默认构造函数和无参数构造函数之间的区别？

> ID：10498622
> 
> 赞同：2
> 
> 时间：2012-05-08T12:27:49.057
> 
> 标签：c#

默认构造函数没有参数。您编写的没有参数的构造函数也没有。那么c#的最终区别是什么？

当您继承默认构造函数和无参数构造函数时添加到这一点，它们在继承类型上暴露的完全相同吗？因为我的 IOC 容器似乎不这么认为。（统一）。

干杯，皮特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:33:42.213

如果您的类不包含显式实例构造函数，则 C# 编译器会添加“默认”构造函数。它是一个*公共*的、无参数的构造函数。如果您创建了显式的非公共、无参数构造函数，Unity 将无法像使用公共构造函数一样使用它（不管它是否由编译器生成，也不管它是否有参数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:30:44.067

您可以通过创建无参数构造函数来覆盖默认构造函数的行为。一个常见的用途是当你有一个自定义对象作为你的类的成员并且你需要在你的类的实例创建时使用默认值初始化它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:29:18.077

默认构造函数是无参数构造函数的同义词。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T12:31:54.750

添加到@Sachin Kainth 和@Fredrik Leijon 的答案，在.NET（也在Java 中）构造函数没有被继承。

您要么显式调用基本构造函数，要么默认调用基本无参数构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T12:30:41.763

如果您不添加构造函数，则会为您插入一个没有参数的默认构造函数。如果添加构造函数（带或不带参数），则不会生成默认构造函数

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T12:33:46.623

我会让代码自己说话：

```
public class ThisHasADefaultConstructor
{
}

public class ThisHasAParameterlessConstructor
{
   public ThisHasAParameterlessConstructor()
   {
   }
} 
```

请注意，默认构造函数实际上是一个无参数构造函数，当您不指定构造函数（带或不带参数）时会自动生成。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T12:34:39.210

如果您想拥有更多构造函数，也许您需要无参数构造函数。假设一个没有参数，一个有参数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-08T12:35:09.653

如果您的类只有一个带参数的构造函数，则不允许使用无参数构造函数，除非您定义了一个，换句话说，如果您在类中定义了自定义构造函数，则不会提供默认的无参数构造函数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-08T12:31:25.300

[MSDN](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx "MSDN")状态：

> 不带参数的构造函数称为默认构造函数。每当使用 new 运算符实例化对象并且不向 new 提供任何参数时，都会调用默认构造函数。

所以默认构造函数不必**自动**生成。手写的无参数构造函数也是**默认构造函数**。

当您查看派生类时，这实际上是有道理的：

```
class A
{
    public A() { ... } // do something
    public A(object o) { ... } // do something else
}

class B
{
    public B() { ... }
} 
```

创建 B 时调用了哪个 A 构造函数？*默认*一个。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-08T12:43:30.333

默认构造函数是指没有参数的构造函数，无论是自动创建的还是你自己创建的。

如果您不声明任何其他实例构造函数，无论有无参数，都会自动创建默认构造函数。（声明静态构造函数不会避免自动创建默认构造函数）。

类层次结构的构造函数不会被继承，但是在使用派生类的构造函数时，继承链上的所有构造函数都会被调用，从层次结构的根开始。除非您指定调用哪个构造函数，否则将调用每个类的默认构造函数。

```
 public class Base
   {
       public Base()
       {

       }
   }

   public class Derived : Base
   {
       public Derived()
       {

       }
   }

   // invokes, the  Base() construtor, and then the Derived() constructor
   var d = new Derived(); 
```

您还可以显式调用基类构造函数，带或不带参数，如下所示：

```
 // Derived class explicitly invoking base class constructor.
       public Derived() :base()
       {

       } 
```

如果需要，您可以使用如下参数调用基类构造函数：

```
 public Derived(int j) :base(j) 
```

或者

```
 public Derived() :base(23) 
```

在最后一个代码示例中，如果您使用默认构造函数创建 Derived 对象，则在基类中调用的构造函数不是默认构造函数，而是使用参数 23 调用的带有整数参数的构造函数。

（当然，这个带参数的构造函数必须存在于Base类中）。

您只能显式调用中间基类的构造函数。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-30T23:36:42.673

编译器会隐式调用默认构造函数，除非您明确创建了一个新构造函数（没有参数）。

# php - php插入添加空白条目

> ID：10498625
> 
> 赞同：0
> 
> 时间：2012-05-08T12:27:58.940
> 
> 标签：php, sql, insert

我正在尝试使用 php 向 sql 数据库添加新条目，我可以添加一个新条目，但它会在数据库中添加 2 个空行。我使用的查询是

```
$query = "INSERT INTO dbo.Products (Name,Id,Price) VALUES    ('$NewName','$NewId','$Price')";
$result = sqlsrv_query($conn3, $query); 
```

任何想法为什么它会这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:37:51.910

尝试使用`VALUE`而不是`VALUES`确保只添加一个条目。

这应该将插入限制为仅单个项目。然后，这取决于您是否热衷于更彻底地调试问题以查看问题所在。

最后，检查变量是否都被正确转义永远不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:51:21.213

你可以试试

```
$sql = "INSERT INTO dbo.Products (Name,Id,Price) VALUES('%s','%d','%f')";
$result = sqlsrv_query($conn3, sprintf($sql,mysql_real_escape_string($NewName),$NewId,$Price)); 
```

# jquery - 对 div 排序后，悬停事件停止工作

> ID：10498628
> 
> 赞同：1
> 
> 时间：2012-05-08T12:28:16.453
> 
> 标签：jquery, sorting, hover

我正在开发一个并排渲染图像的应用程序。当悬停图像时，会显示隐藏的类，显示图像的信息。

我还有一个排序功能，以便可以按点（最高优先，降序）而不是默认排序（日期）对图像进行排序。悬停和排序都可以正常工作，除了一件事。

当图像按点排序并再次渲染时，悬停图像不起作用。我查看了生成的代码，它看起来一样，但不管它不起作用。

我真的很感谢这里的帮助，谢谢！

```
<div id="images">
    <div class="image">
        <div class="post">
            // other code here
            <div class="postDesc">
                // other code here
                <p class="postDescContent">Points: 10</p>
            </div
        </div>
    </div>
    <div class="image">
        <div class="post">
            // other code here
            <div class="postDesc">
                // other code here
                <p class="postDescContent">Points: 20</p>
            </div
        </div>
    </div>
    // and so one...
</div> 
```

排序功能：

```
sortByPoints: function() {
    var contents = $('div#images div[class^="image"]');

    contents.sort(function(a, b) {

        var p1= parseInt($('p.postDescContent', $(a)).text().replace('Points:','').trim()),
            p2 = parseInt($('p.postDescContent', $(b)).text().replace('Points:','').trim());
           return p1 < p2;

    });

    var images = $('#images');

    images.empty();
    images.append(contents);
} 
```

悬停功能：

```
$('.image').hover(function () {
    $(this).find('.postDesc').toggle();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:30:08.327

该`.empty()`方法清除所有元素数据。你根本不需要清空它。只需执行`.append()`.

```
var images = $('#images');

//images.empty();  // remove this

images.append(contents); 
```

这应该足以显示重新排序的元素而不会丢失任何处理程序数据。

***现场演示：http:*** [//jsfiddle.net/mgF3L/](http://jsfiddle.net/mgF3L/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:30:35.470

采用`.on()`

```
$('#images').on('hover', 'div.image', function() {
    $(this).find('.postDesc').css('color','#000');
}); 
```

不能使用 bind 的原因是因为您动态附加脚本。因此，绑定被移除。

`.on()`是 的替代品`.live()`，在 jquery 1.7 中已弃用

**编辑** 感谢@clive 指出我的错误。这是更新的[小提琴](http://jsfiddle.net/z5vBL/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:31:43.647

用委托事件试试这个：

```
$('#images').on('hover', '.image',function () {
    $(this).find('.postDesc').toggle();
}); 
```

[演示](http://jsfiddle.net/z5vBL/3/)

# php - 使用 PHP 自动将 HTML 表转换为 CSV？

> ID：10498632
> 
> 赞同：21
> 
> 时间：2012-05-08T12:28:33.210
> 
> 标签：php, csv

我只需要使用 PHP 在 csv 中自动转换这个 html 表。有人可以提供任何想法如何做到这一点？谢谢。

```
$table = '<table border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>'; 
```

伙计们，我只需要将**$table**转换为**.csv**文件，该文件可以使用一些 PHP 函数自动生成。我们可以将该 csv 文件的路径定义为**/test/home/path_to_csv**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-08T12:48:32.323

您可以使用`str_get_html` [http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

```
include "simple_html_dom.php";
$table = '<table border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>';

$html = str_get_html($table);

header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename=sample.csv');

$fp = fopen("php://output", "w");

foreach($html->find('tr') as $element)
{
        $th = array();
        foreach( $element->find('th') as $row)  
        {
            $th [] = $row->plaintext;
        }

        $td = array();
        foreach( $element->find('td') as $row)  
        {
            $td [] = $row->plaintext;
        }
        !empty($th) ? fputcsv($fp, $th) : fputcsv($fp, $td);
}

fclose($fp); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-20T09:55:39.477

**您可以在单独的 js 文件中使用此函数：**

```
function exportTableToCSV($table, filename) {

        var $rows = $table.find('tr:has(td)'),

            // Temporary delimiter characters unlikely to be typed by keyboard
            // This is to avoid accidentally splitting the actual contents
            tmpColDelim = String.fromCharCode(11), // vertical tab character
            tmpRowDelim = String.fromCharCode(0), // null character

            // actual delimiter characters for CSV format
            colDelim = '","',
            rowDelim = '"\r\n"',

            // Grab text from table into CSV formatted string
            csv = '"' + $rows.map(function (i, row) {
                var $row = $(row),
                    $cols = $row.find('td');

                return $cols.map(function (j, col) {
                    var $col = $(col),
                        text = $col.text();

                    return text.replace('"', '""'); // escape double quotes

                }).get().join(tmpColDelim);

            }).get().join(tmpRowDelim)
                .split(tmpRowDelim).join(rowDelim)
                .split(tmpColDelim).join(colDelim) + '"',

            // Data URI
            csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csv);

        $(this)
            .attr({
            'download': filename,
                'href': csvData,
                'target': '_blank'
        });
    } 
```

**现在，要启动此功能，您可以使用：**

```
$('.getfile').click(
            function() { 
    exportTableToCSV.apply(this, [$('#thetable'), 'filename.csv']);
             }); 
```

其中“getfile”应该是分配给按钮的类，您要在其中添加号召性用语。（单击此按钮后，将出现下载弹出窗口）并且“thetable”应该是分配给您要下载的表的 ID。

您还可以更改为自定义文件名以在代码中下载。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T17:40:29.747

你可以用数组和正则表达式来做到这一点......见下文

```
$csv = array();
preg_match('/<table(>| [^>]*>)(.*?)<\/table( |>)/is',$table,$b);
$table = $b[2];
preg_match_all('/<tr(>| [^>]*>)(.*?)<\/tr( |>)/is',$table,$b);
$rows = $b[2];
foreach ($rows as $row) {
    //cycle through each row
    if(preg_match('/<th(>| [^>]*>)(.*?)<\/th( |>)/is',$row)) {
        //match for table headers
        preg_match_all('/<th(>| [^>]*>)(.*?)<\/th( |>)/is',$row,$b);
        $csv[] = strip_tags(implode(',',$b[2]));
    } elseif(preg_match('/<td(>| [^>]*>)(.*?)<\/td( |>)/is',$row)) {
        //match for table cells
        preg_match_all('/<td(>| [^>]*>)(.*?)<\/td( |>)/is',$row,$b);
        $csv[] = strip_tags(implode(',',$b[2]));
    }
}
$csv = implode("\n", $csv);
var_dump($csv); 
```

然后您可以使用**[file_put_contents()](http://php.net/manual/en/function.file-put-contents.php)**将 csv 字符串写入文件..

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-04T12:36:44.057

为了扩展已接受的答案，我这样做了，它允许我按类名忽略列，并处理空白行/列。

您可以使用 str_get_html [http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)。只需包含它，然后就可以走了！:)

```
$html = str_get_html($html); // give this your HTML string

header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename=sample.csv');

$fp = fopen("php://output", "w");

foreach($html->find('tr') as $element) {
  $td = array();
  foreach( $element->find('th') as $row) {
    if (strpos(trim($row->class), 'actions') === false && strpos(trim($row->class), 'checker') === false) {
      $td [] = $row->plaintext;
    }
  }
  if (!empty($td)) {
    fputcsv($fp, $td);
  }

  $td = array();
  foreach( $element->find('td') as $row) {
    if (strpos(trim($row->class), 'actions') === false && strpos(trim($row->class), 'checker') === false) {
      $td [] = $row->plaintext;
    }
  }
  if (!empty($td)) {
    fputcsv($fp, $td);
  }
}

fclose($fp);
exit; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-17T17:31:13.373

如果有人在使用 Baba 的答案，但在添加额外的空格时摸不着头脑，这将起作用：

```
include "simple_html_dom.php";
$table = '<table border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>';

$html = str_get_html($table);   

$fileName="export.csv";
header('Content-type: application/ms-excel');
header("Content-Disposition: attachment; filename=$fileName");

$fp = fopen("php://output", "w");
$csvString="";

$html = str_get_html(trim($table));
foreach($html->find('tr') as $element)
{

    $td = array();
    foreach( $element->find('th') as $row)
    {
        $row->plaintext="\"$row->plaintext\"";
        $td [] = $row->plaintext;
    }
    $td=array_filter($td);
    $csvString.=implode(",", $td);

    $td = array();
    foreach( $element->find('td') as $row)
    {
        $row->plaintext="\"$row->plaintext\"";
        $td [] = $row->plaintext;
    }
    $td=array_filter($td);
    $csvString.=implode(",", $td)."\n";
}
echo $csvString;
fclose($fp);
exit; 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-23T17:48:14.513

我已经根据在这个线程上找到的代码改编了一个简单的类，该线程现在处理`colspan`和`rowspan`. 没有经过大量测试，我相信它可以优化。

用法：

```
require_once('table2csv.php');

$table = '<table border="1">
    <tr>
    <th colspan=2>Header 1</th>
    </tr>
    <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
    </tr>
    <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
    </tr>
    <tr>
    <td rowspan=2>top left row</td>
    <td>top right row</td>
    </tr>
    <tr>
    <td>bottom right</td>
    </tr>
    </table>';

table2csv($table,"sample.csv",true); 
```

table2csv.php

```
<?php

    //download @ http://simplehtmldom.sourceforge.net/
    require_once('simple_html_dom.php');
    $repeatContentIntoSpannedCells = false;

    //--------------------------------------------------------------------------------------------------------------------

    function table2csv($rawHTML,$filename,$repeatContent) {

        //get rid of sups - they mess up the wmus
        for ($i=1; $i <= 20; $i++) { 
            $rawHTML = str_replace("<sup>".$i."</sup>", "", $rawHTML);
        }

        global $repeatContentIntoSpannedCells;

        $html = str_get_html(trim($rawHTML));
        $repeatContentIntoSpannedCells = $repeatContent;

        //we need to pre-initialize the array based on the size of the table (how many rows vs how many columns)

        //counting rows is easy
        $rowCount = count($html->find('tr'));

        //column counting is a bit trickier, we have to iterate through the rows and basically pull out the max found
        $colCount = 0;
        foreach ($html->find('tr') as $element) {

            $tempColCount = 0;

            foreach ($element->find('th') as $cell) {
                $tempColCount++;
            }

            if ($tempColCount == 0) {
                foreach ($element->find('td') as $cell) {
                    $tempColCount++;
                }
            }

            if ($tempColCount > $colCount) $colCount = $tempColCount;
        }

        $mdTable = array();

        for ($i=0; $i < $rowCount; $i++) { 
            array_push($mdTable, array_fill(0, $colCount, NULL));
        }

        //////////done predefining array

        $rowPos = 0;
        $fp = fopen($filename, "w");

        foreach ($html->find('tr') as $element) {

            $colPos = 0;

            foreach ($element->find('th') as $cell) {
                if (strpos(trim($cell->class), 'actions') === false && strpos(trim($cell->class), 'checker') === false) {
                    parseCell($cell,$mdTable,$rowPos,$colPos);
                }
                $colPos++;
            }

            foreach ($element->find('td') as $cell) {
                if (strpos(trim($cell->class), 'actions') === false && strpos(trim($cell->class), 'checker') === false) {
                    parseCell($cell,$mdTable,$rowPos,$colPos);
                }
                $colPos++;
            }   

            $rowPos++;
        }

        foreach ($mdTable as $key => $row) {

            //clean the data
            array_walk($row, "cleanCell");
            fputcsv($fp, $row);
        }
    }

    function cleanCell(&$contents,$key) {

        $contents = trim($contents);

        //get rid of pesky &nbsp's (aka: non-breaking spaces)
        $contents = trim($contents,chr(0xC2).chr(0xA0));
        $contents = str_replace("&nbsp;", "", $contents);
    }

    function parseCell(&$cell,&$mdTable,&$rowPos,&$colPos) {

        global $repeatContentIntoSpannedCells;

        //if data has already been set into the cell, skip it
        while (isset($mdTable[$rowPos][$colPos])) {
            $colPos++;
        }

        $mdTable[$rowPos][$colPos] = $cell->plaintext;

        if (isset($cell->rowspan)) {

            for ($i=1; $i <= ($cell->rowspan)-1; $i++) {
                $mdTable[$rowPos+$i][$colPos] = ($repeatContentIntoSpannedCells ? $cell->plaintext : "");
            }
        }

        if (isset($cell->colspan)) {

            for ($i=1; $i <= ($cell->colspan)-1; $i++) {

                $colPos++;
                $mdTable[$rowPos][$colPos] = ($repeatContentIntoSpannedCells ? $cell->plaintext : "");
            }
        }
    }

?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-08T11:49:21.300

爸爸的回答包含额外的空间。因此，我将代码更新为：

```
include "simple_html_dom.php";
$table = '<table border="1">
<tr>
<th>Header 1</th>
<th>Header 2</th>
</tr>
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>';

$html = str_get_html($table);

header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename=sample.csv');

$fp = fopen("php://output", "w");

foreach($html->find('tr') as $element)
{
    $td = array();
foreach( $element->find('th') as $row)
{
    $td [] = $row->plaintext;
}

foreach( $element->find('td') as $row)
{
    $td [] = $row->plaintext;
}
fputcsv($fp, $td);
}

fclose($fp);
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-12T11:20:17.137

假设 out_str 有你的 html 表数据

```
$csv = $out_str;
        $csv = str_replace("<table class='gradienttable'>","",$csv);
        $csv = str_replace("</table>","",$csv);
        $csv = str_replace("</td><td>",",",$csv);
        $csv = str_replace("<td>","",$csv);
        $csv = str_replace("</td>","",$csv);
        $csv = str_replace("</font>","",$csv);
        $csv = str_replace("</tr>","",$csv);
        $csv = str_replace("<tr>","\n",$csv); 
```

从文件中删除任何 CSS

```
 $csv = str_replace("<font color='yellow'>","",$csv);
        $csv = str_replace("<font color='red'>","",$csv);
        $csv = str_replace("<font color='green'>","",$csv);
        $csv = str_replace("</th><th>",",",$csv);
        $csv = str_replace("<th>","",$csv);
        $csv = str_replace("</th>","",$csv);

        file_put_contents('currentFile.csv',$csv); 
```

将文件 currentFile.csv 输出给用户

希望能帮助到你！

# javascript - javascript验证允许-1和文本框中的所有正数

> ID：10498633
> 
> 赞同：0
> 
> 时间：2012-05-08T12:28:45.360
> 
> 标签：javascript

我正在尝试验证一个文本框以允许所有正数，包括其中的 -1。

我试过这个，这将只允许正数

 `````
 function allownumbers(e, txtBox) {
        var key;

        key = (e.keyCode) ? e.keyCode : e.charCode;
        if (e.charCode == 0) {
            return true;
        }
        if ((key < 48 || key > 57) && (key != 46) && (key != 44)) {               
            return false;                
        }
        if (key == 46) {
            if ((txtBox.value).indexOf('.') != -1) {
                return false;
            }
        }
        if (key == 44) {
            if ((txtBox.value).indexOf(',') != -1) {
                return false;
            }
        }
        return true;
    } 
````  `但是如何允许-1（仅）所有正数提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:34:18.700

为什么不验证和清理输入，而不是防止击键？也许是这样的：

```
function allownumbers(e, txtBox) {
    var val = parseInt(txtBox.value);
    if(!val || val < -1) {
        val = 0; // invalid value, reset to zero
    }

    txtBox.value = val;
} 
`````

# android-intent - 防止在关闭屏幕时重新创建 Android 活动

> ID：10498636
> 
> 赞同：18
> 
> 时间：2012-05-08T12:29:12.117
> 
> 标签：android-intent, android-activity, lifecycle, lifetime, activity-lifecycle

如何防止在关闭屏幕时重新创建活动？

**我做什么**

> 1.  启动 Bejewels 并转到珠宝屏幕。
> 2.  短按电源按钮。屏幕已关闭，但设备未关闭。
> 3.  再次按下电源按钮。

**我所看到的**

> 与关闭屏幕前相同的屏幕。

对于我的应用程序（一个微不足道的应用程序，只是一个带有单个 WebView 的 Web 应用程序），场景如下：

**我做什么**

> 1.  启动我的应用程序。Activity onCreate() 方法将 URL 加载到 WebView 中。
> 2.  短按电源按钮。屏幕已关闭，但设备未关闭。
> 3.  再次按下电源按钮。

**我所看到的**

> WebView 正在重新加载页面。

**我所期望的**

> 就像在 Bejewels 案例中一样，我希望看到相同的屏幕，对于我的应用程序来说，它是处于之前状态的页面：脚本正在运行，表单字段已填充等。

调试表明，我错了（在上一个问题中）并且 onDestroy() 和 onCreate() 在屏幕刚刚打开时被一个接一个地调用。而且由于我仍然听到由脚本播放的音乐，因此当屏幕关闭时，看起来活动和 WebView 确实存在，直到我再次按下电源按钮。

我试过了。

1.  android:alwaysRetainTaskState="true" 相同的行为。
2.  阅读有关意图（无济于事，我只是不明白，它们如何应用于我的情况）。
3.  使用 PhoneGap。它的行为不同：只是在按下电源按钮时杀死整个应用程序。这更好，但不是最好的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-27T18:05:14.817

此问题的解决方案可能与此处描述的相同：[每次屏幕继续时都会调用 onDestroy](https://stackoverflow.com/questions/6772988/ondestroy-gets-called-each-time-the-screen-goes-on)

听起来您的活动由于配置更改而重新启动，请参阅[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。最常见的情况是当您的应用程序处于横向模式（与大多数游戏一样），然后通过点击电源按钮启用屏幕锁定。屏幕锁定处于纵向模式，因此会触发方向更改，从而触发重新启动活动。

可以通过添加以下内容来覆盖此行为：

```
android:configChanges="orientation|keyboardHidden" 
```

... 如果您的目标 API 级别低于 13，则添加到您的清单文件中。或者

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

...如果您的目标 API 级别大于 13。

请注意，您可能需要转到 project->properties 并更新您的项目构建目标。如果您的构建目标小于 13，将无法识别“screenSize”。

可能是导致活动被重置的不同配置更改。以下链接提供了可能的配置更改列表：http: [//developer.android.com/guide/topics/manifest/activity-element.html#config](http://developer.android.com/guide/topics/manifest/activity-element.html#config)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:32:44.567

添加：

```
android:launchMode="singleTop" 
```

到清单 xml 中的活动部分。见这里[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:56:31.780

1.  在 Application.onCreate() 中创建视图。
2.  在 Activity.onCreate() 中将视图添加到布局中。
3.  在 Activity.onDestroy() 中从布局中移除视图。

详细信息在这里： [附加/分离Android视图到/从布局](https://stackoverflow.com/questions/10505346/attach-detach-android-view-to-from-layout)

# java - 对集合中的现有对象或传入对象调用 Equals() 方法

> ID：10498645
> 
> 赞同：2
> 
> 时间：2012-05-08T12:29:40.353
> 
> 标签：java, collections, hashmap, set

当我们检查集合的相等性时，任何人都可以澄清一下，在传入对象或集合中的那些对象上调用 equals() 方法。例如。如果 Set 或 Hashmap 具有对象 object1、object2 和 object3，并且名为 object4 的第四个对象尝试进入 Set，或者在 hashmap 的情况下与已经存在的三个对象进行比较，则在第四个对象上调用 equals() 方法并且已经存在的三个对象一个一个地传递或反向是真的。？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:39:42.063

答案并不重要（并且可能在实现之间有所不同），因为根据合同，`A.equals(B)`当且仅当`B.equals(A)`. 不遵守这份合同是导致收藏品出现奇怪和不连贯行为的秘诀。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:40:17.837

没有办法知道，除非您正在考虑一个非常具体的集合实现。你不应该依赖它。equals 方法应该是自反的，即`x.equals(y)`应该给出与 相同的结果`y.equals(x)`，除非其中之一为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:40:51.097

a.equals(b) 和 b.equals(a) 之间应该没有区别（如果 a 和 b 不为 null ）等于应该是对称的。无法保证使用什么形式（a.equals(b) 或 b.equals(a))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T06:21:46.867

好吧...正如我刚刚在eclipse中检查的那样，调用了传入对象的equals（）方法。Eclipse 通过参考。传入对象的equals（）方法中的预先存在的对象一一对应。我知道你们都在说，在 Sun 的 equals() 方法契约中，equals 方法应该是自反的、对称的和传递的。当我认为如果以某种方式主动检查两个引用（正在检查是否相等）是否指向同一个对象，则集合可能会更加优化时想到了这个问题。如果是，那么绕过 equals() 和 hashcode() 方法确实有意义。

# package - Solaris pkgadd 忽略依赖项

> ID：10498647
> 
> 赞同：0
> 
> 时间：2012-05-08T12:29:42.303
> 
> 标签：package, solaris, packaging

我有一个带有依赖文件的 Solaris 包。当我安装软件包时，它会忽略依赖项。

我的依赖文件如下所示：

> P SUNWcsu Core Solaris, (Usr)
> P XXCore 我的核心包

即使没有安装 XXCore，我也可以安装该软件包。我的原型如下所示：

> 我 pkginfo
> 我依赖
> 我请求

提前致谢。

顺便说一句，其他安装文件（请求、检查安装等）得到了正确处理。

* * *

更新：我对依赖文件进行了一些更改，因此它看起来可以正常工作。我只将 Tab 更改为空白。现在它的行为有所不同 - 我得到以下信息：

> ## 验证包依赖关系。
> 
> 警告：XXCore 包“我的核心包”是必备包，应该安装。
> 是否要继续安装？

更好，但我想停止安装，没有继续的选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:50:39.187

如果您想强制执行一个先决条件，您可以使用[checkinstall 或 preinstall](http://docs.oracle.com/cd/E19963-01/html/821-1672/ch3enhancepkg-10289.html)脚本来阻止软件包安装，这些脚本检查所需的软件包是否存在，如果不存在则错误退出。

# network-protocols - 交替位协议如何工作？

> ID：10498651
> 
> 赞同：0
> 
> 时间：2012-05-08T12:30:08.323
> 
> 标签：network-protocols

来自 ABP 的维基百科条目（[http://en.wikipedia.org/wiki/Alternating_bit_protocol](http://en.wikipedia.org/wiki/Alternating_bit_protocol)）：

> 当 A 发送一条消息时，它会不断地以相同的序列号重新发送它，直到它收到来自 B 的包含相同序列号的确认。当这种情况发生时，A 补充（翻转）序列号并开始传输下一条消息。
> 
> 当 B 接收到未损坏且序列号为 0 的消息时，它开始发送 ACK0 并一直这样做，直到它接收到编号为 1 的有效消息。然后它开始发送 ACK1 等。

我不明白细节。

我理解这个借口和整个事情的致谢，但这个过程本身在不同的出版物中有不同的描述。

我的问题可以总结为以下两个：

1.  “……并且一直这样做”是什么意思？这是否意味着接收方可以在 ack 通道上发送两个连续的 ack，而发送方根本没有任何活动？即在这一点上它根本不与发件人同步？

2.  “不断重发”是什么意思？与上述相同 - 在此重新发送期间，发送方是否完全独立于接收方？

这里有一个关于它的工作方式的替代报道，但它再次给出了一个相互矛盾的画面：[http ://staff.science.uva.nl/~psf/specifications/abp.html](http://staff.science.uva.nl/~psf/specifications/abp.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T12:29:05.890

首先，这是一条全双工线路，因为双方连续发送数据。[该协议与停止等待 ARQ](http://en.wikipedia.org/wiki/Stop-and-wait_ARQ)非常相似。在停止等待中：

```
Side A:

 1\. set index=0
 2\. Send DATA(index) ,set timeout and waits for ACK 0 or timeout
  - If timeout back to 1
 3\. If received ACK(index) set index^=1
 4\. goto 2

Side B:

 1\. Set index to 0
 2\. If received DATA(index) Send ACK(index) and index^=1 //(xor)<br>
    else send ACK(index^1) 
 3\. goto 2 
```

在 ABP 中，一次也是一个数据包，不同之处在于，不是被动地等待 ACK，而是继续发送相同的数据，直到收到第一个 ACK​​。该协议具有更快的错误恢复，但在功率效率方面很差

对于您的问题：

1.  接收方与发送方同步。

    > **当 B 收到未损坏且序列号为 0 的消息时，它开始发送 ACK0 并一直这样做，**直到它收到编号为 1 的有效消息

    对它接收到的序列 0 的每个数据包继续这样做。

2.  发送方部分独立于接收方，因为它会一遍又一遍地发送相同的数据，但并不完全独立，因为它会在收到 ACK 时移动到下一个序列。

# ios5 - 是否可以在 IOS 中检测整个面部区域（仅）？

> ID：10498653
> 
> 赞同：1
> 
> 时间：2012-05-08T12:30:09.793
> 
> 标签：ios5, quartz-graphics, core-image, face-recognition, quartz-core

我需要在我的应用程序中检测全脸区域...是否可以检测到该区域？

目前我正在使用**CIDector**来获取面部特征...... CIDector 只检测鼻子、左眼和右眼......

我如何从源图像中检测整个全脸（而不是方形标记的脸整个空间。我附上了下面的图像到底需要什么）...？

对此问题的任何想法或解决方案都将受到高度赞赏......

提前致谢....

问候，

间谍网

![在此处输入图像描述](../Images/b3613071a3651acdf3ac29a75dad085f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:38:33.703

我不确定是否可以使用**CIDetector**来做到这一点。我会向您推荐更复杂的解决方案，例如**OpenCV**。看看这里：[http ://www.eosgarden.com/en/opensource/opencv-ios/overview/](http://www.eosgarden.com/en/opensource/opencv-ios/overview/)

以及**OpenCV 文档**： http: [//opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

希望能帮助到你。这是一种复杂的方式，但你可以处理它。

# html - 如何使用css将页脚右侧和左侧设置为曲线

> ID：10498655
> 
> 赞同：0
> 
> 时间：2012-05-08T12:30:14.703
> 
> 标签：html, css, formatting, footer

我有一个有两行三列的表。第一行用于正文，第二行用于页脚。

我想用 CSS 设计页脚，这样看起来和感觉更好。我可以添加图像，但是每个图像之间存在间隙，因此效果不佳。

该行`tr`有三列，每列`td`有一张图像。

下面是 HTML 代码。

```
<tr>
    <td class="FooterLeftBG"> //left css class
    </td>
    <td style="width: 85%;" class="FooterBG"> //middle css class
        <table style="width: 85%">
            <tr>
                <td align="left">
                some text
                </td>
                <td style="padding-top: 1px">
                some text</td>
            </tr>
        </table>
    </td>
    <td  class="FooterRightBG"></td>//right css class
</tr> 
```

这是CSS代码：

```
td.FooterLeftBG // CSS class for left td, used to make left hand side curve footer 
    {
    background: url('footer-leftbg.png') bottom left;
    height:35px;
    width:12px;
    padding:0px;
    float:right;
    }
td.FooterRightBG // CSS class for right td, used to make right hand side curve footer
    {
    background: url('footer-right-bg.png') bottom right;
    height:35px;
    padding:0px;
    width:12px;
    float:left;
    }
td.FooterBG // CSS class for td holding the footer contents
    {
    background:url('footer-middle-bg.png');
    background-repeat:repeat-x;
    border-collapse:collapse;
    height:35px;
    width:5px;
    } 
```

请帮忙。我已经尝试了 1 周 :( 我也通过谷歌尝试过。

预期格式：

*   [http://i.stack.imgur.com/c7ULg.png](http://i.stack.imgur.com/c7ULg.png)
*   [http://i.stack.imgur.com/2J4zW.png](http://i.stack.imgur.com/2J4zW.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:35:39.057

您可以将表格包装在一个 Div 中，并将下面的 CSS 类应用于它。该示例具有所有四个弯曲边界，您可以根据需要修改半径值：

```
.container {
    background-attachment: scroll;
    background-clip: border-box;
    background-color: #FFFFFF;
    background-image: none;
    background-origin: padding-box;
    background-position: 0 0;
    background-repeat: repeat;
    background-size: auto auto;
    border-bottom-left-radius: 7px;
    border-bottom-right-radius: 7px;
    border-top-left-radius: 7px;
    border-top-right-radius: 7px;
    box-shadow: 0 0 10px #909090;
    cursor: default;
    display: none;
    left: 12px;
    padding-bottom: 10px;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 10px;
    position: relative;
    text-align: left;
    z-index: 100;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:27:43.277

如果您想在布局中坚持使用表格，可以尝试将以下 CSS 应用于`<table>`标签：

```
 border-collapse: collapse; 
```

这可能会消除页脚图像之间的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:18:47.773

尝试将 cellspacing='0' 添加到 HTML 中的表格标记

# forms - 循环遍历记录集的字段以填充表单？

> ID：10498657
> 
> 赞同：2
> 
> 时间：2012-05-08T12:30:27.983
> 
> 标签：forms, vba, loops, recordset

我正在尝试使用 For 循环遍历单个记录记录集中的字段以填充表单上的字段。我希望找到一种比输入六行 txtField.value = rs!Field 更简洁/可重复使用的方法。

当我在运行时查看代码时，两个变量都包含正确的信息，只是没有在表单上显示它们。任何帮助将不胜感激。

```
Dim strClient As String
Dim rsClient As dao.Recordset
Dim tfield As String
Dim ffiend As String
Dim fld As dao.Field

Set dbs_Current = CurrentDb()

strClient = "Select * from tblClient where pk_client_id = " & gbl_Client_ID

Set rsClient = dbs_Current.OpenRecordset(strClient)

For Each fld In rsClient.Fields
    On Error Resume Next
    tfield = "txt" & fld.Name & ".value"
    ffield = "rsClient!" & fld.Name
    tfield = ffield

Next fld 
```

# java - 无法在 J2ME 中打开网站链接

> ID：10498664
> 
> 赞同：3
> 
> 时间：2012-05-08T12:30:51.910
> 
> 标签：java, http, java-me, midp, lcdui

我正在开发一个简单的 J2ME 应用程序，并且我有一个链接到在线条款和条件页面的 StringItem。

我有 StringItem 设置，它显示有下划线（给人一种链接的感觉）；但是当我单击它时，它不会执行任何操作。

在我的代码下面找到：

```
public class mobiMidlet extends MIDlet implements CommandListener {

    private Display display;
    private TextField userName,password;
    public Form form;
    private Command login, register, forgot, terms, cancel;
    private Image img_error, img_login, img_register, img_forgot, img_terms;
    private String termsurl = "http://example.com/terms.php";
    private StringItem termsItem;

    public mobiMidlet() {
          form = new Form("Welcome to My App");

          termsItem = new StringItem("", "Terms and Conditions", Item.HYPERLINK);
          termsItem.setDefaultCommand(new Command("terms", Command.ITEM, 1));    

            ItemCommandListener listener = new ItemCommandListener() {
                    public void commandAction(Command cmd, Item item) {
                        if(cmd==terms)
                        {
                            try {
                                platformRequest(termsurl);
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        }
                    }
                };

            termsItem.setItemCommandListener(listener);        

          userName = new TextField("LoginID:", "", 30, TextField.ANY);
          password = new TextField("Password:", "", 30, TextField.PASSWORD);
          cancel = new Command("Cancel", Command.CANCEL, 2);
          login = new Command("Login", Command.OK, 2);
          try{
            img_login = Image.createImage("/logo.jpg");
            img_register = Image.createImage("/error2.png");
            img_forgot = Image.createImage("/logo.jpg");
            img_register = Image.createImage("/error2.png");
          }catch(Exception e){
            System.out.println(e.getMessage());
          }  
    }

    public void startApp() {
          display = Display.getDisplay(this);
          form.append(termsItem);
          form.append(userName);
          form.append(password);
          form.addCommand(cancel);
          form.addCommand(login);
          form.setCommandListener(this);
          display.setCurrent(form);
    }

    public void commandAction(Command c, Displayable d) {
          String label = c.getLabel();
          if(label.equals("Cancel")) {
              destroyApp(true);
          } else if(label.equals("Login")) {
            validateUser(userName.getString(), password.getString());
          } 
    }
} 
```

我该如何解决这个问题，以便当我点击条款和条件链接时，它会在浏览器上打开页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:44:03.640

您还没有初始化变量`terms`，所以它仍然存在`null`。因此条件`cmd==terms`始终是`false`并且您永远不会输入`if`语句。

将一行`termsItem.setDefaultCommand(new Command("terms", Command.ITEM, 1));`分成两行：

```
terms = new Command("terms", Command.ITEM, 1);
termsItem.setDefaultCommand(terms); 
```

现在你有机会了。顺便说一句，为什么不调试你的程序？在模拟器中运行它，将断点放入`commandAction`，看看会发生什么。

# symfony - 在 symfony2 中绑定请求之前手动设置实体对象为请求对象

> ID：10498668
> 
> 赞同：1
> 
> 时间：2012-05-08T12:31:12.163
> 
> 标签：symfony, request, bind

我有一个表格，其中有一个经理集合，它是一个自动完成的文本字段。

![在此处输入图像描述](../Images/ef1fa69de5babcdc42eb2ca58856067d.png)

当表单绑定时，它会抛出错误，因为它需要管理器对象。但经理文本字段只包含简单的文本。

```
 if ($request->getMethod() === 'POST') {

                $Form->bindRequest($request);

                } 
```

所以我手动查询根据管理器名称访问管理器对象，但是如何`$request`在绑定之前将其设置为对象`request`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:43:52.997

请参阅[Using Data Transformers](http://symfony.com/doc/current/cookbook/form/data_transformers.html)食谱条目——它完全涵盖了您想要的内容。

# editor - 在 ACE 编辑器中更改 XML 代码折叠

> ID：10498669
> 
> 赞同：4
> 
> 时间：2012-05-08T12:31:19.547
> 
> 标签：editor, ace-editor

ACE 编辑器当前的代码折叠行为是从以下位置折叠 XML：

```
<TAG DATA=FOO DATA=BAR>
  <blah>
</TAG> 
```

进入：`<tag ... </tag>`

我怎样才能让它做更多的事情： `<tag data=foo data=bar> ... </tag>`

IE，我想保持起始标签的属性展开。是否有捷径可寻？我应该编辑哪些文件？

谢谢！

# solr - Websphere 门户上的 SOLR 安装

> ID：10498678
> 
> 赞同：1
> 
> 时间：2012-05-08T12:32:06.780
> 
> 标签：solr, websphere-portal

我尝试在 Websphere Portal 7.0 上安装 SOLR 3.6.0。它在日志中给了我以下消息：

java.lang.NoSuchMethodError: org/apache/lucene/store/FSDirectory.open(Ljava/io/File;)Lorg/apache/lucene/store/FSDirectory; 在 org.apache.solr.core.StandardDirectoryFactory.open(StandardDirectoryFactory.java:33)

经过一番研究，我发现了门户服务器附带的一些 lucene。这是找到它的地方：/opt/IBM/WebSphere/PortalServer/prereq/prereq.lucene/shared/app/lucene.jar。

我怀疑这搞砸了类加载器。我已经更改了应用程序的类加载器策略 :(

有没有人遇到过同样的情况，你找到工作了吗？

提前为您解答

干杯，

-弗雷德

# github - 在github中合并分支的方式是什么？

> ID：10498685
> 
> 赞同：0
> 
> 时间：2012-05-08T12:32:32.830
> 
> 标签：github, workflow

我们的团队有 2 名开发人员。就像一个基本的例子。过去几周我们一直在研究我们公司的网站。当我放入一些工作示例时，他一直在研究响应式布局。我们在网站上的开发接近尾声，我们需要将我们的 2 个分支合并在一起。我应该以某种方式合并它们吗？我们昨天尝试这样做，但我们遇到了一些冲突，并且像这样的一些行被插入到我们的代码中..

```
HEAD>>>>>>>> 

master>>>>>> 
```

所以我不确定这是否正常工作，或者我们是否在此过程中搞砸了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:35:52.633

我总是将头部合并到分支中，然后将分支合并到头部中。无论哪种方式都无关紧要，但是您会遇到冲突。诀窍是采取每一个并决定要保留什么。

# mysql - Rails - 对连接表的查询的索引

> ID：10498693
> 
> 赞同：0
> 
> 时间：2012-05-08T12:32:53.737
> 
> 标签：mysql, ruby-on-rails, indexing

在我的应用文章中，通过自引用加入模型 article_relationships 有许多子或父文章

```
class Article < ActiveRecord::Base

  has_many  :parent_child_relationships,
            :class_name   => "ArticleRelationship",
            :foreign_key  => :child_id,
            :dependent    => :destroy
  has_many  :parents,
            :through    => :parent_child_relationships,
            :source     => :parent

  has_many  :child_parent_relationships,
            :class_name   => "ArticleRelationship",
            :foreign_key  => :parent_id,
            :dependent    => :destroy
  has_many  :children,
            :through    => :child_parent_relationships,
            :source     => :child
end

class ArticleRelationship < ActiveRecord::Base
  belongs_to :parent, :class_name => "Article"
  belongs_to :child, :class_name => "Article"
end 
```

我对 article_relationships 有一个相当复杂的查询，该查询深入到文章表中

```
ArticleRelationship.joins(:parent, :child).where("((articles.type IN (:parent_article_type) AND parent_id IN (:ids)) OR (children_article_relationships.type IN (:child_article_type) AND child_id IN (:ids)) AND (article_relationships.created_at > :date OR article_relationships.updated_at > :date))", {:parent_article_type => "Emotion", :child_article_type => "Gateway", :ids => [1,2,3,4], :date => "2010-01-01"}) 
```

有什么办法可以有效地索引这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:45:39.787

所以，为了可读性，

```
ArticleRelationship.joins(:parent, :child).
 where("((articles.type IN (:parent_article_type) AND parent_id IN (:ids)) OR
         (children_article_relationships.type IN (:child_article_type) AND child_id IN (:ids))
        AND (article_relationships.created_at > :date OR article_relationships.updated_at > :date))",
       { :parent_article_type => "Emotion",
         :child_article_type => "Gateway",
         :ids => [1,2,3,4], :date => "2010-01-01" }) 
```

问题是 OR 运算符。由于 OR，在您的两个顶级 AND 表达式中，数据库不能使用索引。

1.  由于在创建记录时，它还将 updated_at 字段设置为相同的时间戳，因此您可以删除 OR created_at，从而允许您在 update_at 上建立索引。
2.  If you can filter the parent ids and child ids by article type, you can remove those ORs. However, make sure you can do so efficiently enough to not spend more time filtering the id lists as input, that it doesn't take longer than the unindexed query. Try 1., first, and then see how long it takes with an updated_at index.

If you do both 1 and 2, be sure to create one index with all three fields, updated_at, parent_id, and child_id.

# c++ - 在模板类的构造函数中使用 malloc

> ID：10498699
> 
> 赞同：2
> 
> 时间：2012-05-08T12:33:04.430
> 
> 标签：c++, templates, malloc

假设我有一个类将用于创建树或列表结构。让我们称之为

```
template <typename K, typename V>
class Node{
  // some data
  Node<K,V>* next;
  Node() {
    next = static_cast<Node<K,V>*>( malloc( sizeof(Node<K,V>) ));
  }
}; 
```

通过这样做，我得到以下编译器错误：

> 'malloc' 没有依赖于模板参数的参数，因此'malloc' 的声明必须可用（如果你使用'-fpermissive'，G++ 将接受你的代码，但不推荐使用未声明的名称)

有没有办法以这种方式使用 malloc 而不必使用已弃用的代码？我想使用 malloc 而不是 new 因为我想做一些更高级的内存管理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T12:39:04.920

看起来你不见了`#include <cstdlib>`或`#include <stdlib.h>`。编译器抱怨缺少声明。这些包含文件提供了一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:37:46.883

编译器错误告诉您它没有声明是什么`malloc`。您缺少声明该函数的包含。

除此之外，方法被打破了。您正在编写一个通用树，但由于`malloc`您的使用限制了对 POD 类型的使用（我假设`K`并`V`存储在`Node`. 您应该改用`new`它将调用该类型的构造函数，而不仅仅是分配内存。

# php - 获取工具提示以显示 jquery tipTip

> ID：10498702
> 
> 赞同：1
> 
> 时间：2012-05-08T12:33:16.903
> 
> 标签：php, jquery, html, tooltip, tiptip

大家好，我一直在尝试插入工具提示，但我不知道我做错了什么..

我包括所有必要的文件

```
 <script src="jquery-1.7.2.js"></script>
 <script src="jquery.tipTip.js"></script>
 <script src="jquery.tipTip.minified.js"></script> 
```

并在页面中使用此脚本

```
<script language="javascript">
$(function(){
$(".someClass").tipTip();
});
</script> 
```

这就是我将它实现到 html 中的方式

```
 <a href="" class="someClass" title="This will show up in the TipTip popup.">Curabitur dolor eros</a> 
```

我究竟做错了什么？

这是我认为的jsfiddle

[http://jsfiddle.net/jFqFG/](http://jsfiddle.net/jFqFG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:37:26.500

我相信这个问题与两次包含 jQuery 有关；在引用插件之前一次，然后在之后一次，从而在重新初始化 jQuery 时对插件进行核对。

删除对 j​​Query 的第二个引用显然解决了这个问题，正如问题所附评论中所发现的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:40:20.123

包含 jQuery 和tiptip 文件时，显然似乎存在某种错误。[这里](http://drew.tenderapp.com/discussions/tiptip/49-a-bug-with-including-jquerytiptipjs-when-using-both-jquery-and-prototype)有一个链接讨论了同样的问题并提供了一个补丁来克服同样的问题。我还没有测试过。那些可以的，请做并提供结果。

# android-layout - 在 Robotium 中，单击 QuickAction 图标

> ID：10498703
> 
> 赞同：4
> 
> 时间：2012-05-08T12:33:17.510
> 
> 标签：android-layout, robotium

任何人都可以告诉我如何在robotium中单击快速操作图标[按钮在屏幕上可见，仅带有图标-不带文本标签]。我需要自动化一些测试用例，但我无法自动化如何单击快速操作图标。

谢谢你，曼朱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T01:43:49.453

![在此处输入图像描述](../Images/051c6873833f489e3653a7a94cc464bb.png)

单击第一个快速图标 -`solo.clickOnImageButton(0);`或`solo.clickOnImage(0);`

单击第二个快速图标 -`solo.clickOnImageButton(1);`或`solo.clickOnImage(1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:49:09.127

“快速操作图标”是指 ActionBar 中的 MenuItem？您可以使用 solo.clickOnMenuItem("MenuItemTitle"); 单击溢出中的那些（以及带有文本显示的那些）；

我目前正在寻找一种方法来单击那些没有可见标题的方法。

# jquery - jquery .next() 缺少注入的表单元素

> ID：10498708
> 
> 赞同：4
> 
> 时间：2012-05-08T12:33:38.947
> 
> 标签：jquery, dom, next

我对 .next('selector') 方法在应用于 html 时的行为感到有些困惑：

```
<form>
   <label for="relayhosts" class="fixedwidth">Relay Host(s)</label>  
   <input style="display: none;" name="relayhosts" value="" type="text">   
   <input class="ip_octet" id="octet_1" type="text">
   <label class="ip_octet_label">.</label>
   <input class="ip_octet" id="octet_2" type="text">
   <label class="ip_octet_label">.</label>
   <input class="ip_octet" id="_octet_3" type="text">
   <label class="ip_octet_label">.</label>
   <input class="ip_octet" id="octet_4" type="text">
</form> 
```

Using`$('#octet_1').next('input');`不返回任何结果，但`$('#octet_1').next().next();`仍按预期返回下一个输入。

我也尝试过`$('#octet_1').next('input.ip_octet');`，`$('#octet_1').next('.ip_octet');`两者都没有返回。

输入和标签元素是动态生成的，但是当**next.().next()**方法看到它们时，DOM 中存在的对象似乎不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:35:29.727

[`next()`](http://api.jquery.com/next)**仅**当它与选择器匹配时才返回下一个元素。

[`nextAll()`](http://api.jquery.com/nextAll)另一方面，搜索所有下一个元素并返回与选择器匹配的元素。

所以，你可能想要：

```
nextAll('input:first'); 
```

（见[`:first`选择器](http://api.jquery.com/first-selector/)）

... 或者

```
nextAll('input').first(); 
```

... 取决于个人喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:36:02.083

[Jquery Next 方法](http://api.jquery.com/next/) 获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，则仅当它与该选择器匹配时，它才会检索下一个兄弟。

```
$('#octet_1').nextAll('input') 
```

# networking - 游戏的实时网络，插值问题

> ID：10498714
> 
> 赞同：2
> 
> 时间：2012-05-08T12:33:51.243
> 
> 标签：networking, real-time, multiplayer

我最近一直在为实时、快节奏的游戏建立网络。看来，如果您正确插值，则命中计算是在从 player2(p2)s 点超过 (p1.interp+p2.interp+p1.ping/2+p2.ping/2) 之前发生的状态上完成的查看射手是 player1(p1) 时的情况。

数据包首先到达接受 p1.ping/2 的服务器，然后服务器根据 p1.interp + p1.ping/2 之前发生的游戏状态计算它。该计算的结果被发送到 player2，稍后只能看到它 p2.interp。由于所有三个方面都需要时间来处理事情，因此它会进一步增加。

```
 player1            server             player2
       |                 |                   |
.------|_1.............actual.....|.....game state......|
|      |                 | ^                 |
|intrp |_2               | |                 |
|      |                 | |                 |
`----->|_3----ping/2     | |                 |
                  `------|_4----ping/2       |
                                    `------5_|-------.
                                             |       |
                                           6_|  intrp|
                                             |       |
                                           7_|<------‘ 
```

^(请原谅我糟糕的 ASCII 艺术技能，但我无法抗拒。
（我回到家，我安装了 Windows，我看到这里看起来很糟糕，但希望你们能明白）)

假设 50 毫秒 ping，100 毫秒插值它给了我们超过 250 毫秒的总和。这意味着 player2 在过去大约 250 毫秒被 player1 看到，但假设客户端预测，他实时看到自己。我的逻辑有缺陷还是这没什么大不了的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:51:06.287

我发现[这](https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking)是对[相关](https://stackoverflow.com/questions/3782902/networking-problems-in-games)问题的回答。不确定这是否适合作为答案，但我无法发表评论。

# objective-c - 获取 UIWebView 屏幕上的所有文本

> ID：10498715
> 
> 赞同：6
> 
> 时间：2012-05-08T12:34:05.753
> 
> 标签：objective-c, iphone, ios5, uiwebview, uiwebviewdelegate

我需要从**UIWebView**获取所有在屏幕上可见的单词。我的**UIWebView**有 html 内容。

有人可以帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T13:05:24.470

使用以下方式将为您提供`UIWebView`.

```
NSString *yourstring = [webView stringByEvaluatingJavaScriptFromString: 
                  @"document.body.innerText"]; 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T12:56:36.643

您可以使用

```
NSString *str = [self.youWebView stringByEvaluatingJavaScriptFromString:
                                  @"document.body.textContent"]; 
```

# java - 艾玛 [MAIN_METHOD_NOT_FOUND]

> ID：10498722
> 
> 赞同：0
> 
> 时间：2012-05-08T12:34:36.840
> 
> 标签：java, code-coverage, emma

我正在尝试使用 Emma 检查我的应用程序的代码覆盖率并尝试像这样运行

```
D:\bin>java  -cp val.jar;emma.jar emmarun -r html -cp . com.val.ui.ValidatorClient

EMMA: no coverage data collected at runtime [all reports will be empty]
EMMA: writing [html] report to [D:\bin\coverage\index.html] ...
[EMMA v2.0, build 5312]
emmarun: [MAIN_METHOD_NOT_FOUND] application class [com.psft.sqlval.ui.Validator
Client] does not have a runnable public main() method
Exception in thread "main" com.vladium.emma.EMMARuntimeException: [MAIN_METHOD_N
OT_FOUND] application class [com.val.ui.ValidatorClient] does not have a
 runnable public main() method
        at com.vladium.emma.rt.AppRunner._run(AppRunner.java:497)
        at com.vladium.emma.rt.AppRunner.run(AppRunner.java:97)
        at com.vladium.emma.runCommand.run(runCommand.java:247)
        at emmarun.main(emmarun.java:27)
Caused by: java.lang.ClassFormatError: Illegal local variable table length 18 in
 method com.val.ui.ValidatorClient.main([Ljava/lang/String;)V
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at com.vladium.emma.rt.AppRunner._run(AppRunner.java:493)
        ... 3 more 
```

但是我的类 ValidatorClient.java 有一个有效的 main 方法

```
public class ValidatorClient
{
 ...

 public static void main (String[] args) throws Exception
  {
     .... 
```

有人可以对此有所了解吗？

提前致谢

# iphone - popToRootViewController 带动画然后切换选项卡

> ID：10498724
> 
> 赞同：1
> 
> 时间：2012-05-08T12:34:46.280
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller

我有一个带有 4 个视图/选项卡的 UITabBarController。每个视图都是一个 UINavigationController。

如何在其中一个 UINavigationController 上 popToRootViewController 然后切换选项卡并将 viewController 推送到另一个 UINavigationController 上使用动画？

所以顺序是：

一开始我们在 Tab 1 的视图中，它是一个 UINavigationController。一个 View 已被推送到它的根 ViewController 之外。

```
-Tab 1
   - UINavigationController1
      - RootViewController1
      - SomeViewController1 [We are here]

-Tab 2
   - UINavigationController2
      - RootViewController2 
```

在 SomeViewController1 中点击了一个按钮，导致以下情况：

1.  UINavigationController1 弹出到它的根视图控制器（带动画）
2.  UITabBarController 将选项卡切换到 Tab2
3.  SomeViewController2 被推送到 UINavigationController2 上（带动画）

所以视图看起来像这样：

```
-Tab 1
   - UINavigationController1
      - RootViewController1

-Tab 2
   - UINavigationController2
      - RootViewController2
      - SomeViewController2 [We are here] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:51:37.740

```
int tabYouWantToSelect=2;
BOOL isNavigation=YES;
[[self.tabBarController selectedViewController].navigationController popToRootViewControllerAnimated:YES];

//if any controller is presented as a model view then
//[[self.tabBarController selectedViewController] dismissModalViewControllerAnimated:YES];

[self.tabBarController setSelectedIndex:tabYouWantToSelect];

//the newly pushed view controller's viewWillAppear
-(void)viewWillAppear:(BOOL)animated {
        if(isNavigation){
            [self.navigationController pushViewController:objAddLocation animated:YES];                
         }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:40:09.863

1.  弹出到您当前在 UITabBar 控制器中显示的导航控制器上的 rootview 控制器
2.  以编程方式更改选项卡
3.  以编程方式将 viewController 推送到新选项卡的 navigationController 上

所有这些都应该通过您的应用程序委托实现文件来实现。

如果您也需要代码，请告诉我...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:46:57.547

这是我的做法。我觉得这比用不相关的代码感染根 VC 要干净得多。

我创建了一个 UINaviationControllerDelegate 来检查其 UINavigationController 上剩余的 UIViewController 的数量。如果只剩下一个，它会发布一个 stackAtRoot 通知。同时，就在我 popToRootViewController 之前，我注册了一个由该通知触发的命令。当它被触发时，我让它协调选项卡切换并将 VC 推送到新选项卡的 UINavigationController 上。它会立即取消注册命令，因此除非重新注册，否则不会再次调用它。

# html - 使用 html5 中的本地存储分别取值

> ID：10498728
> 
> 赞同：0
> 
> 时间：2012-05-08T12:35:04.817
> 
> 标签：html

我正在用 html5 制作一个应用程序。它就像一个基于测验的应用程序。我从 XML 中随机获取问题并一一显示。我为此使用页面导航。完成并提交答案后，您将切换到其他页面。如果我提交答案后，我将无法尝试返回。但我可以看到切换到我的问题页面时的反馈和分数。我已显示该反馈和分数并将其存储在本地存储中。我能够进行本地存储，但我得到的值是压倒一切的。所以我得到了最后提交的值。现在我关心的是明智地划分该值导航编号。现在如果我提交我的答案并假设我在导航编号 3 时会发生什么你正在查看导航第 1 部分然后我也在获取最后提交的值而不是第 1 部分的值。

这是代码片段：

```
//for navigation of pages
$(document).ready(function (){            
    /*$(document).bind("contextmenu",function(e){
    return false;
    });*/
    var obj;
    total=x.length;

    for(var j=0;j<x.length;j++)
    { 
        if(j==0)
        {
            $("#navigationlist").append('<li><a href="#" id="selected_link"  class="navg" onClick="display_nav('+j+',this);">'+(j+1)+'</a></li>');                 
            display_nav(j,$("#selected_link"))        
        }
        else
            $("#navigationlist").append('<li><a href="#" class="navg" onClick="display_nav('+j+',this);">'+(j+1)+'</a></li>');   
    }               

    $("#next").bind("click",function (){
        $(".navg").each(function(index){        
            if($(".navg").length==(i+1))
            {
                if(index==0)
                    obj=$(this);
                }
                else
                {
                if(index==(i+1))
                    obj=$(this);
            }
        });     

            for(var j=0;j<xmlDoc.getElementsByTagName("question").length;j++)
            {
                xmlDoc.getElementsByTagName("question")[j].removeAttribute("status");
            }

            $("#btnSubmit").attr("disabled","false");
            $("#btnSubmit").attr("onclick","checekAnswer()");

            display_nav(0,obj)
        }
        else
            display_nav((i+1),obj)
    });         
}); 

and

correctAnswers++;
            localStorage.setItem('feedback',JSON.stringify(feedback[0].childNodes[0].nodeValue));
            $("#feedback").append(score[0].childNodes[0].nodeValue);
            $("#feedback").append("<br/>");
            $("#feedback").append(feedback[0].childNodes[0].nodeValue);     
        }
        else
        {
            //var val = [];
            //val.push(feedback[0].childNodes[0].nodeValue);
            //localstorage.setItem('feedback', JSON.stringify(val));
            //localStorage.setItem('feedback',JSON.stringify(feedback[0].childNodes[0].nodeValue));
            //alert(localStorage.getItem("feedback"));
            /*var v={"test":feedback[0].childNodes[0].nodeValue};
            localStorage.setItem('feedback',v);
             alert(localStorage.getItem('feedback'));*/

            scores1.push(feedback[0].childNodes[0].nodeValue);

            localStorage.setItem("highscores",JSON.stringify(scores1));
            var scores = localStorage.getItem("highscores");

            alert(scores);
            scores = JSON.parse(scores);

            alert(scores[0]);

            $("#feedback").html(score[1].childNodes[0].nodeValue);
            $("#feedback").append("<br/>");
            $("#feedback").append(feedback[0].childNodes[0].nodeValue);
            $("#feedback").append("hello");

        }

        //$("#counter").html("left="+xPos+",top="+yPos);    
        $("#trFeedBack").show("slow");  
        display_nav(j,obj)  
    }
} // end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:09:26.640

如果我理解您的问题，您的问题是存储具有相同名称但与不同页面相关的项目。

LocalStorage 由域而不是页面定义，您必须更改您使用的密钥。通常的解决方案是为您想要的名称添加前缀。

例如 ：

```
localStorage['pages.12.feedback'] = "the feedback I'm giving related to page 12";
localStorage['global.feedback'] = "the feedback I'm giving related to the global site"; 
```

（你会注意到我使用了简短的符号，我发现使用 setItem 更具可读性）

# serialization - 在 Trello.NET 中更改日期格式

> ID：10498741
> 
> 赞同：2
> 
> 时间：2012-05-08T12:36:08.790
> 
> 标签：serialization, date-format, restsharp, trello

我使用[Trello.NET](https://github.com/dillenmeister/trellonet)将 Trello 集成到我们自己的错误跟踪应用程序中。

我们自己的应用程序具有欧洲日期格式 (dd/MM/yyyy)。Trello API 采用美国格式 (MM/dd/yyyy)。TrelloNet 使用 RestSharp 进行 REST 通信。

如何将序列化输出更改为 MM/dd/yyyy？

亲切的问候，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:37:37.743

这是 Trello.NET 中的一个错误，已在 0.5.2 版中修复。

# c++ - 如何将字符串转换为 char * 数组

> ID：10498744
> 
> 赞同：1
> 
> 时间：2012-05-08T12:36:14.657
> 
> 标签：c++, arrays, string, char

我已经更改了我的代码，现在在编译时会出现这些错误：

```
`check.cpp: In function ‘int main()’:` 
```

`check.cpp:14:55: error: invalid conversion from ‘const char**’ to ‘char* const*’ [-fpermissive]`

`/usr/include/getopt.h:152:12: error: initializing argument 2 of ‘int getopt(int, char* const*, const char*)’ [-fpermissive]`

```
int main() {

string text="-f  input.gmn -output.jpg";
int argc=text.length();
cout<<"argc: "<<argc<<endl;
char const * argv = text.c_str();
cout<<"argv: "<<argv<<endl;
int c = getopt (argc, &argv, "f:s:o:pw:h:z:t:d:a:b:?");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:38:28.697

您可以使用`text.c_str()`将 a`std::string`转换为`const char*`. 见[这里](http://en.cppreference.com/w/cpp/string/basic_string/c_str)。

为了详细说明我的答案，有很多方法可以创建您需要的数组，但这已经[在此处](https://stackoverflow.com/q/53849/589206)、[此处](https://stackoverflow.com/q/236129/589206)、[此处](https://stackoverflow.com/q/2727749/589206)和[此处](https://stackoverflow.com/q/347949/589206)进行了描述。您的问题的简单解决方案不涉及`new`/`malloc`或密集使用 STL 和//`istringstream`什么不是并且执行得非常快，可能如下所示：`back_inserter``copy`

```
/* variables. */
std::vector< char* > argv;
int i, argc, state;
char c;

/* convert string to char string with automatic garbage collection. */
std::vector< char > tokens(text.begin(), text.end());
tokens.push_back(0);

/* tokenize string with space. */
for (state=0, argc=0, i=0; (c=tokens[i]); i++) {
    if (state) {
        if (c == ' ') {
            tokens[i]=0;    
            state=0;        
        }           
    } else {
        if (c != ' ') {
            argv.push_back(&tokens[i]);
            argc++;         
            state=1;        
        }           
    }       
}   

/* print argv. */
std::cout << "argc: " << argc << std::endl;
for (i=0; i < argc; i++) {
    std::cout << "argv[" << i << "]: " << argv[i] << std::endl;
}   

/* call getopt. */
c = getopt(argc, &argv[0], "f:s:o:pw:h:z:t:d:a:b:?"); 
```

这只是一个示例，但这种代码的一个优点是您可以使用其他字符作为分隔符，而不仅仅是空格，并且您无需关心释放分配的内存，因为`std::vector`在函数退出时会为您执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T12:40:04.600

您的代码的第一个错误是比较：

```
for (int i=0; i<=stringLength; i++) {
   arv[i]=text[i]; 
} 
```

使用`i< stringLength`而不是`i<=stringLength`.

第二个错误是`arv`不是空终止的。

修复两个错误后，您的代码应如下所示：

```
for (int i=0; i < stringLength; i++) {
   arv[i]=text[i]; 
}
arv[stringLength] = '\0'; 
```

* * *

顺便说一句，[*正确*的函数签名](http://pubs.opengroup.org/onlinepubs/000095399/functions/getopt.html)是`getopt`这样的：

```
int getopt(int argc, char * const argv[], const char *optstring); 
```

它将第二个和第三个参数作为`const`. 这意味着，您可以这样做：

```
 char const * s = text.c_str();
 int c = getopt (argc, &s, "f:s:o:pw:h:z:t:d:a:b:?"); 
```

无需任何转换，使用手动循环。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T12:43:31.030

简而言之，您有一个数组 argv，其中包含 100 个指向字符串的指针，其中仅设置了第一个。argv[1] 没有被设置为任何东西，所以随机指向某个地方。在这种情况下，是非法的。

此外，getoption 所期望的将更像这样：

```
argv[0] = "progname";
argv[1] = "-f";
argv[2] = "input.gmn"
argv[3] = "-output.jpg"
argv[4] = 0 
```

请注意末尾的 =0 以停止 getoption 通过内存的随机位充电

# iphone - 车载OBDII WLAN协议

> ID：10498747
> 
> 赞同：6
> 
> 时间：2012-05-08T12:36:33.160
> 
> 标签：iphone, network-protocols, wifi

我目前正在搜索 WLAN 协议的规范以获取 OBDII 数据。市场上有一些 ELM327 类似的适配器，可以让 iPhone 连接到带有 WLAN 的 OBDII 接口。这是因为蓝牙串口因为配件接口被打乱了。Torque for android 等其他程序也可以使用这种通信协议。但是我没有找到创建网络客户端的规范。

欢迎任何帮助，

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T13:02:27.533

好的，经过更多研究，我找到了两个来源：

1.  [Michael Gile](http://mgile.com/post/4731572308/obd2kit "iOS 设备的开源库")有一个[适用于 iOS 设备的开源库](https://github.com/FuzzyLuke/OBD2Kit)，用于与 OBDII WiFi 和蓝牙设备进行通信。
2.  PLX 设备（KiWi 的创建者）[描述](http://plxdevices.com/product_info.php?id=GSST2WIFI#sect7)了如何与 KiWi 通信。[描述](http://plxdevices.com/product_info.php?id=GSST2WIFI#sect7)太大，无法在此处包含，但归结为：
    *   使用 WiFi（插座）连接
    *   等到设备返回`>`
    *   发出命令并等待响应

> 可以通过发送以下格式（ASCII 字符）的命令来请求信息：
> 
> `MM PP\r`
> 
> 其中`MM`是测试模式，`PP`是 PID，`\r`是回车（十六进制：）`0x0d`。Kiwi 会忽略所有空白字符。*测试模式 03 和 04 不需要 PID 值。

[所说的“测试模式”是SAE J1979](http://en.wikipedia.org/wiki/OBD-II_PIDs#Modes)标准中定义的十种诊断模式：

```
Test mode   Description
01  Show current data
02  Show freeze frame data
03  Show diagnostic trouble codes
04  Clear trouble codes and stored values
05  Test results, oxygen sensors
06  Test results, non-continuously monitored
07  Show 'pending' trouble codes
08  Special control mode
09  Request vehicle information
0A  Request permanent trouble codes 
```

PID 值是车内传感器的代码。[可能的 PID 值](http://en.wikipedia.org/wiki/OBD-II_PIDs#Standard_PIDs)的（非详尽的）列表在 Wikipedia 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-11T23:30:29.897

查看[ELM327 数据表](https://www.elmelectronics.com/wp-content/uploads/2017/01/ELM327DS.pdf) Wifi 加密狗将 ELM327 RS232 端口透明地绑定到 TCP 服务器。没有真正的WIFI协议。您可以改为通过原始 TCP 连接使用 ELM327 协议。

您可以使用 telnet 命令发送 AT 命令和称为 PID 的 OBD2 命令：

```
telnet 192.168.0.1 35000 
```

成功连接后，您可以尝试发送：

```
AT Z 
```

服务器应以“ELM327”和版本号进行响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-18T20:07:24.273

这是我在 C 和套接字中所做的：

```
int sockfd = 0, n = 0;
char recvBuff[1024];
struct sockaddr_in serv_addr; 
char *ip = "192.168.0.10";
char str [128];
int i;

memset(recvBuff, '0',sizeof(recvBuff));
if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
{
    printf("\n Error : Could not create socket \n");
    return 1;
} 

memset(&serv_addr, '0', sizeof(serv_addr)); 

serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htons(35000); 

if(inet_pton(AF_INET, ip, &serv_addr.sin_addr)<=0)
{
    printf("\n inet_pton error occured\n");
    return 1;
} 

if( connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0)
{
   printf("\n Error : Connect Failed \n");
   return 1;
} 

printf ("reading...\n");
strcpy (str,"AT Z\x0d");
sleep(2);
write (sockfd, str, strlen (str)); 
while ( (n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) > 0)
{
    recvBuff[n] = 0;
    printf ("received: ");
    if(fputs(recvBuff, stdout) == EOF)
    {
        printf("\n Error : Fputs error\n");
    }
    printf ("\r\ntype: ");
    fgets (str, sizeof (str), stdin);
    i = strlen (str);
    if (str [i-1] == 0x0a)
        str [i-1] = 0;
    strcat (str, "\x0d");
    write (sockfd, str, strlen (str)); 
    printf ("\r\n");
} 
```

输入 1 或 2 输入，您应该会看到提示：ELM327，然后输入您想要的任何内容，例如：AT RV（将显示电压）然后使用此 pdf 获取所有代码： [https://www.obd-2 .de/carcode/dl/ELM327DS.pdf](https://www.obd-2.de/carcode/dl/ELM327DS.pdf)

# android - 如何在同一对话框中包含日期和时间选择器，并在 Android 中以 yyyy-mm-dd hh:ii:ss 格式在单个文本框中显示日期和时间

> ID：10498750
> 
> 赞同：0
> 
> 时间：2012-05-08T12:36:47.997
> 
> 标签：android

我需要使用单个对话框中的日期和时间选择器在“yyyy-mm-dd hh:ii:ss 格式”的文本框中包含一个带时间的日期（不为日期和时间选择器使用不同的对话框）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:49:49.813

看看这里[如何显示对话框来选择日期和时间？](https://stackoverflow.com/questions/4428711/how-to-show-dialog-to-pick-date-and-time-togather)

替代解决方案是：

1.  [日期滑块](http://code.google.com/p/android-dateslider/)
2.  [日期时间选择器](http://code.google.com/p/datetimepicker/)
3.  [日期时间选择器](http://code.google.com/p/ravindra-android-datetimepicker/)

对于显示日期和时间的格式化是您自己的简单任务，我认为现在您可以做到。

# php - PHP XML DOM：使用 xml 文档的一个小节

> ID：10498755
> 
> 赞同：0
> 
> 时间：2012-05-08T12:37:16.033
> 
> 标签：php, xml, dom

所以我对使用 PHP 的 XML DOM 比较陌生。但是我在以下问题中遇到了麻烦。所以想象一下，我有一个包含多个重复部分的 xml 文档，可以按日期区分。我正在尝试按日期访问特定部分，然后使用传统的 DOM 方法访问该部分中的数据。这是我目前正在做的事情。

XML 文档

```
<quizzes>
  <quiz>
    <date>Yesterday</date>
    <question>This is the day's question</question
  </quiz>
  <quiz>
    <date>Today</date>
    <question>This is the day's question</question
  </quiz>
  <quiz>
    <date>Tomorrow</date>
    <question>This is the day's question</question
  </quiz>
</quizzes 
```

PHP 代码

```
$xmlDoc = new DOMDocument()
$xmlDoc->load($aboveXMLFile)

$subSection = $xmlDoc->getElementsByTagName("quiz")->item(0)
$dateofSubSection = $subSection->getElementsByTagName("date")->item(0)->nodeValue;
echo $dateofSubSection 
```

我收到一个错误，说`getElementsbyTagName`这不是`$subSection`. 为什么？如果我不能这样做，如何按日期选择小节，然后单独访问该小节中的 nodeValues？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:40:18.337

检查方法的拼写。

它是`getElementsByTagName`

[http://php.net/manual/en/domdocument.getelementsbytagname.php](http://php.net/manual/en/domdocument.getelementsbytagname.php)

# java - 控制台输入在不应该等待时等待

> ID：10498756
> 
> 赞同：1
> 
> 时间：2012-05-08T12:37:18.297
> 
> 标签：java, linux, input, gcj

我刚刚开始使用 Java，并且一直在尝试让控制台输入正常工作。这是代码：

```
System.out.println("Write a word: ");
Scanner keyboard = new Scanner(System.in);
System.out.println("DEBUG 1");
str = keyboard.nextLine();
System.out.println("DEBUG 2");
System.out.println(str); 
```

这应该只接受一次输入并打印输入，如下所示：

```
Write a word: 
DEBUG 1
Hello            //My input
DEBUG 2
Hello            //Output 
```

但这就是发生的事情：

```
Write a word: 
Hello            //My input
DEBUG 1
                 //Waiting for new input
DEBUG 2
Hello            //The first input 
```

所以，在我看来，它以某种方式接受了*Scanner keyboard = new Scanner(System.in);行的输入。*然后把它放在我的变量**str**中。我使用gcj进行编译，使用以下命令编译运行：

```
javac hello_world.java
java hello_world 
```

编辑：我现在尝试在另一台计算机上运行该程序，使用 Ubuntu 10.04 64 位，而不是以前的 Ubuntu 10.04 32 位。我以同样的方式运行它并且没有重新编译，并且程序运行良好。

任何想法为什么它会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:04:32.693

可能存在刷新/缓冲问题，导致 DEBUG 1 的输出晚于您的预期。即，`println("DEBUG 1")`可以在之前执行`keyboard.nextLine()`，但由于某种原因，输出在途中被阻止，并且在读取您的输入之前不会输出。

但我认为您的意思是您实际上必须输入两个换行符，一个在 Hello 之后，一个在“等待新输入”行。如果是这样，那就更难解释了。可能是线路终止不兼容问题。

使用标准 JDK 编译和执行会产生您期望的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:02:08.327

我使用 Oracle JDK 6 在 Windows 上运行的 Eclipse 中检查了您的程序，得到了预期的结果。

```
public static void main(String[] args) {
        System.out.println("Write a word: ");
        Scanner keyboard = new Scanner(System.in);
        System.out.println("DEBUG 1");
        String str = keyboard.nextLine();
        System.out.println("DEBUG 2");
        System.out.println(str);
    } 
```

结果 ：

```
Write a word: 
DEBUG 1
hello
DEBUG 2
hello 
```

OpenJDK 与 Oracle JDK 非常相似，并且可从其包管理器中用于许多发行版。你能用openJDK而不是gcj检查吗？

# sql - 如何将现有 GUID 插入脚本中的 Oracle RAW(16) 字段

> ID：10498760
> 
> 赞同：4
> 
> 时间：2012-05-08T12:37:43.447
> 
> 标签：sql, sql-server, oracle

我有一个 sql server 脚本，它将已知的固定 guid 值插入到表中。看起来像：

```
INSERT INTO MyTable (ID)
VALUES ('BBD098BF-58F0-4A84-90C2-F806D6D06061') 
```

请注意，guid 是人类可读的形式。由于 ID 是唯一标识符，sql server 了解如何将字符串转换为 guid 数据类型。

我需要为 Oracle 制作相同的脚本，ID 是 RAW(16) 类型。直接使用脚本是行不通的，因为 Oracle 将字符串解释为二进制文件，它应该是一些“其他”字符串，即正确二进制块的字符串表示形式。

有谁知道将人类可读的 sql server 字符串转换为 Oracle 所需字符串的方法？

到目前为止，我只能考虑在 .net 代码中将 guid 保存到 Oracle，而不是在 oracle 脚本中进行选择以获取字符串。但这太疯狂了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:48:42.490

根据此[链接](https://forums.oracle.com/forums/thread.jspa?threadID=196433)
Sqlserver 反转了前 3 个部分，因此您需要执行以下操作：

```
hextoraw(substr(guid,7,2)||
         substr(guid,5,2)||
         substr(guid,3,2)||
         substr(guid,1,2)||
         substr(guid,12,2)||
         substr(guid,10,2)||
         substr(guid,17,2)||
         substr(guid,15,2)||
         substr(guid,20,4)||
         substr(guid,25,12)
) 
```

（指导就像'BBD098BF-58F0-4A84-90C2-F806D6D06061'）

# windows - 批处理：如何将命令的输出重定向到文件

> ID：10498764
> 
> 赞同：0
> 
> 时间：2012-05-08T12:37:49.257
> 
> 标签：windows, batch-file

```
ping google.com >> ping.txt 
```

如果我把它放在一个批处理文件中并运行该文件，那它就可以工作

这是 ping.txt 的输出：

```
C:\Users\User\Desktop>ping google.com  1>>ping.txt  
C:\Users\User\Desktop>ping google.com  1>>ping.txt  
. 
. 
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:45:14.633

你正在用管道做一些奇怪的事情。

这（从命令行）会将结果**附加**到文件中。`ping``ping.txt`

```
ping www.google.com >> ping.txt 
```

现在创建一个批处理文件（`testping.bat`例如 ）并将同一行放入其中。如果您使用以下命令运行批处理文件，您将获得相同的结果。

```
testping 
```

如果您重定向批处理本身的输出，那么您将得到批处理文件命令的回显！这就是为什么这**不会**按预期工作的原因：

```
testping >> ping.txt 
```

# jquery - 使用 Knockout 和 jQuery 显示/隐藏模板元素

> ID：10498765
> 
> 赞同：0
> 
> 时间：2012-05-08T12:37:51.440
> 
> 标签：jquery, knockout.js

我有这个：

```
<div data-bind="with: storeModel.stores()">
    <h1>Store count <span data-bind="text: '(' + $data.length + ')'"></span></h1>
    <ul id="stores" data-bind="foreach: $data">
        <li data-bind="text: Name, click: $root.storeModel.editStore"></li>
    </ul>
</div>

    <div id="editStore" data-bind="with: storeModel.currentEditItem()">
        <form data-bind="submit: $root.storeModel.saveStore" action="">
            <fieldset>
                <legend>Foo</legend>
                <label for="name">Name:</label>
                <input type="text" data-bind="value:Name" id="name" />
                <label for="address">Address:</label>
                <input type="text" data-bind="value:StreetAddress" id="address" />
                <label for="postalcode">Postal code:</label>
                <input type="text" data-bind="value:PostalCode" id="postalcode" />
                <label for="city">City:</label>
                <input type="text" data-bind="value:City" id="city" />
                <button style="display:block" type="submit" data-bind="jqButton: $data">Save</button>
            </fieldset>
        </form>
    </div>

p.editStore = function(store, event) {
            location.hash = 'Stores/Edit/' + ko.utils.unwrapObservable(store.StoreId);
            p.currentEditItem(store);

            //Append edit form to li, how?
        } 
```

现在，我希望每个 li 元素上的单击事件将编辑表单附加到所述 li 上。在这里保持编辑表单的模板是个好主意吗？否则，我的意思是，需要为每个 li 生成编辑表单。

还是应该使用绑定处理程序？

主要来自 jQuery，在 KO 中处理 UI 内容可能会非常混乱。感谢所有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:36:52.213

您可以使用[**If 语句**](http://knockoutjs.com/documentation/if-binding.html)。它会动态地将表单添加到您的 li 标签中，而不是一直将其存储在那里。

```
 <li data-bind="text:$data, if: $data == selected "> 
```

**这是一个[简短的例子](http://jsfiddle.net/dmitry_zaets/QLbxk/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:52:57.630

您能否发布其余的淘汰赛，以便我们可以看到您正在使用的数据模型？

以下是我将如何处理这种情况。您基本上将模板绑定到“当前值”。您只需轮流显示/隐藏表单，但始终传递单击的内容。您的点击处理程序会将点击的项目设置为模板显示的内容，在我的情况下，我只显示对话框。示例（大部分代码，但希望您能得到一个想法）

```
<script type="text/x-jquery-tmpl" id="streamTemplate">
    <fieldset>
        <legend>Information</legend>
        <table style="width:100%">
            <tr>
                <td>
                    <label>Account: <span data-bind="text:AccountName"></span></label>
                </td>
                <td>
                    <label>MAC Address: <span data-bind="text:MAC"></span></label>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Camera Model: <span data-bind="text:CameraModelName"></span></label>
                </td>
                <td>
                    <label>Channel: <span data-bind="text:Stream"></span></label>
                </td>
            <tr>
        </table>
    </fieldset>
</script>

<div id="dialog" data-bind="template: { name: 'streamTemplate', data: CurrentActivation()}">
</div>

<tbody data-bind="foreach: ActivationCodes">
        <tr>
            <td>
                <label data-bind="text: MAC()">
                </label>
            </td>
            <td>
                <label data-bind="text: AccountName()">
                </label>
            </td>
            <td>
                <button data-bind="click: $root.Activate">
                    Activate</button>
            </td>
        </tr>
<tbody>

<script>    
     function viewModel() {
        var self = this;

        self.filter = ko.observable("All");

        self.ActivationCode = ko.observable();

        self.ActivationCodes = ko.observableArray([]);

        self.CurrentActivation = ko.observable(new InactiveCamera("", "", "", "", "", "", "", "", ""));

        self.Activate = function (data) {
            self.CurrentActivation(data);
            $("#dialog").dialog("option", "title", "Activing Streams for: " + data.ActivationCode());
            $("#dialog").dialog("open");
            $("#dialog button").button();
        };
    }

    function format(date) {
        return date.getMonth() + "/" + date.getDay() + "/" + date.getFullYear() + " " + date.toLocaleTimeString();
    }

    $("#dialog").dialog({
        autoOpen: false,
        width: 600,
        height: 600,
        modal: true

    });

    ko.applyBindings(new viewModel());
</script> 
```

# c# - 如何使用 Monotouch Professional 许可证在 iPad 上部署应用程序

> ID：10498768
> 
> 赞同：2
> 
> 时间：2012-05-08T12:38:01.410
> 
> 标签：c#, xamarin.ios

我购买了 MonoTouch Professional，但在使用 iPhone 进行调试时出现错误：“在钥匙串中找不到有效的 iPhone 代码签名密钥”。

专业版的 Xamarin [https://store.xamarin.com/](https://store.xamarin.com/)商店页面显示了两件重要的事情：

*   部署到您的设备
*   发布到应用商店

我连接了我的设备，但我不知道如何真正让我的应用程序在 iPhone 上运行。基本上我有两个问题：

*   如何配置 iPhone 进行调试？
*   如何将应用程序部署到具有 MonoTouch（专业许可证）版本的 iPhone？

第三个单独的问题是是否有必要从 Apple 注册 iOS 开发者计划。如果是这样，这对我们来说很合适，因为我不想将我的应用程序放到 App Store 上。

我的应用程序仅供我们的客户内部使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:48:51.340

其实你应该从他们的iPhone教程开始，

[http://docs.xamarin.com/ios/getting_started/Hello_iPhone#Deploying_to_the_Device](http://docs.xamarin.com/ios/getting_started/Hello_iPhone#Deploying_to_the_Device)

提到部署到设备的地方。您还需要从 Apple 资源中学习，例如

[http://www.intertech.com/Blog/post/Xcode-4-Deploying-Your-App-to-Your-Own-iPhone-iPad-iPod-touch.aspx](http://www.intertech.com/Blog/post/Xcode-4-Deploying-Your-App-to-Your-Own-iPhone-iPad-iPod-touch.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:47:47.317

您必须注册加入 iOS 开发者计划，否则您无法部署到设备。如果您不喜欢发布到 App Store，您也可以使用 TestFlight SDK 部署应用程序。它是一个免费的 SDK，允许您在没有 App Store 的情况下部署应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T23:09:17.923

实际上，这是您需要遵循的教程。有很多你自己找不到的隐藏按钮

[http://docs.xamarin.com/guides/ios/getting_started/device_provisioning/](http://docs.xamarin.com/guides/ios/getting_started/device_provisioning/)

# vb.net - 无法为 vb.net 中的表正确设置主键

> ID：10498772
> 
> 赞同：1
> 
> 时间：2012-05-08T12:38:32.837
> 
> 标签：vb.net, primary-key, oledb, updatecommand

我遇到了一些麻烦伙计们。经过几天的劳动，调试和研究，我在倒数第三行，我卡住了。这不是完整的代码，而是相关部分。

```
 Dim dbProvider As String
    Dim dbSource As String
    Dim con As New OleDb.OleDbConnection
    Dim ds As New DataSet
    Dim MaxRows As Integer
    Dim sql As String
    Dim TableName As String
    TableName = TbTableName.Text
    Dim da As New OleDb.OleDbDataAdapter("SELECT * FROM  [" & TableName & "]", con)
    Dim cb As New OleDb.OleDbCommandBuilder(da)
    Dim dsNewRow As DataRow
    Dim dsNewColoumn As DataColumn

    dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
    dbSource = "Data Source = E:\A2 Computing\Project\PasswordDatabase.mdb"

    con.ConnectionString = dbProvider & dbSource
    con.Open()

    Dim TableCreate As New OleDb.OleDbCommand("CREATE TABLE [" & TableName & "](" & "ID INTEGER NOT NULL" & ")", con)
    Dim NewColoumn As New OleDb.OleDbCommand("ALTER TABLE [" & TableName & "] ADD " & X & " VARCHAR(60)", con)

    TableCreate.ExecuteNonQuery()
    da.Fill(ds, "NewTable")

    MaxRows = ds.Tables("NewTable").Rows.Count

    ds.Tables("NewTable").PrimaryKey = New DataColumn() {ds.Tables("NewTable").Columns("CustID")}

    X = 0
    Do
        X = X + 1

        dsNewColoumn = ds.Tables("NewTable").Columns.Add
        ds.Tables("NewTable").Columns.Add(X)
        dsNewRow = ds.Tables("NewTable").NewRow()
        ds.Tables("NewTable").Rows.Add(dsNewRow)
    Loop Until X = 30

    da.InsertCommand = cb.GetInsertCommand()
    da.UpdateCommand = cb.GetUpdateCommand()
    da.Update(ds, "NewTable")
End Sub 
```

我遇到的问题在这里

```
da.UpdateCommand = cb.GetUpdateCommand() 
```

错误是

对于不返回任何键列信息的 SelectCommand，不支持为 UpdateCommand 生成动态 SQL。

我知道这意味着我的表没有主键，但我已经设置了一个。任何帮助将不胜感激！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:48:32.233

您需要数据库中的键列。

命令生成器不使用您在数据集中的数据列中设置的键。
事实上，如果你看代码，DA 使用的 CB create 命令，但 CB 没有引用你的 ds.Tables("NewTable").PrimaryKey，所以 CB 永远无法考虑你的 PrimaryKey。

因此，您需要在数据库中设置一个主键。

无论如何，为什么你有一个没有主键的数据库表？

**更新**（阅读前 9 条评论后）

1.  您在 TableCreate SQL 命令中定义表列，当您执行此命令时，它将在数据库文件中创建表和列。
2.  一个表可以是空的（没有行），但必须至少有一列。
3.  您不能使用数据集/数据表抽象/对象将真实列添加到数据库中的真实表中，它确实以这种方式工作（见第 1 点）
4.  It give you the error "SSSS.ID' cannot contain a Null" because in the SQL CREATE command you are creating a table with a column called ID that is NOT NULL (see the "ID INTEGER NOT NULL" part of the command) so if you add a row to this table, the column ID MUST contain a value that is not null.
5.  your loop is adding a column at the datatable for each iteration, it doesn't work this way, you cant do that. And if you do, you are doing it wrong.
6.  The column "CustID" you are adding at the datatable exist only in the datatable (the "in-memory" abstraction of the real table) it will never exist in the DB (unless you add it to the CREATE TABLE command)

In my opinion you need to:

1.  Study a good book on RDBMS and SQL (to learn the basics of how a DB works, tables, relations, key, columns, datatype, SQL, null value....)
2.  Read some good article/book on how dataset/datatable/connection interact with a real DB

# c# - WP7 - 应用程序停用和激活期间的奇怪行为

> ID：10498779
> 
> 赞同：1
> 
> 时间：2012-05-08T12:39:01.457
> 
> 标签：c#, windows-phone-7, lifecycle, tombstoning

我遇到了一些奇怪的行为，我似乎找不到任何信息。当我离开我的应用程序然后导航回来（例如，通过启动`BingMapsDirectionsTask`或简单地锁定和解锁设备）时，整个屏幕在恢复时被向上推约 1/4 的高度。

我猜这与我处理应用程序生命周期（或缺乏）的方式有关，因为我目前是`Application_Activated`无`Application_Deactivated`代码的。

这是一个演示这种神秘行为的快速剪辑，因为我无法更好地解释它。

[http://www.youtube.com/watch?v=BWHJT59F000](http://www.youtube.com/watch?v=BWHJT59F000)

我创建了另一个默认的 VS2010 Express 项目，它的行为方式相同，所以我猜很多人都有同样的问题。

提前致谢， 问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:16:41.833

可能不相关，但我有一个类似的问题，如果 Thumb 一直到 Max，则在方向更改后，Slider 没有正确绘制。所以我不得不在方向改变事件中使用这个代码。

```
 double val = slider1.Value;
        slider1.Value = 0;

        var bw = new BackgroundWorker();
        bw.DoWork += delegate
            {
                Thread.Sleep(100);
            };
        bw.RunWorkerCompleted += delegate
            {
                Dispatcher.BeginInvoke(() => slider1.Value = val);
            };
        bw.RunWorkerAsync(); 
```

也许尝试在 onNavigatedTo 之后设置延迟操作，看看这是否会影响布局。

# sharepoint - 如何在 Silverlight 的 SharePoint 客户端对象模型中将字符串转换为颜色？

> ID：10498782
> 
> 赞同：2
> 
> 时间：2012-05-08T12:39:09.757
> 
> 标签：sharepoint, typeconverter, sharepoint-clientobject, system.componentmodel, system.windows.media

我需要将具有**颜色名称（例如“Red”）**的字符串转换为 System.Windows.Media.Color 的对象。

我正在使用以下代码：

```
using System.ComponentModel;

TypeConverter tc = new TypeConverter();
Color bgColor = (Color)(tc.ConvertFrom((li["Background_x0020_Color"].ToString()))); 
```

代码成功构建，但引发运行时异常：“ConvertFrom 未在基本 TypeConverter 中实现。”

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:59:26.190

试试这个

```
Color c;
Type colorType = (typeof(System.Windows.Media.Colors));
if (colorType.GetProperty(slist.color) != null)
{
    object o = colorType.InvokeMember("Red", BindingFlags.GetProperty, null, null, null);
    if (o != null)
    {
        c = (Color)o;
    }
    else
    {
        c = Colors.Black;
    }
}
else
{
    c = Colors.Black;
}
Brush color = new SolidColorBrush(c); 
```

[http://jyothsnag.blogspot.in/2011/04/convert-string-to-color-object-in.html](http://jyothsnag.blogspot.in/2011/04/convert-string-to-color-object-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:47:41.967

该错误意味着 TypeConverter 级别太低而无法执行此操作，它甚至在 ConvertFrom 方法中都没有代码（称为实现），请使用`System.Web.UI.WebControls.WebColorConverter`

# php - sqlsrv php驱动程序上的SQL Server 2008 ORDER BY错误

> ID：10498784
> 
> 赞同：0
> 
> 时间：2012-05-08T12:39:18.103
> 
> 标签：php, sql-server-2008, sql-order-by

我有一个查询，根据存储在表中的 lng 和 lat 按距离过滤结果：

```
SELECT *, (3960 * acos( cos( radians( 51.8026795 ) ) * cos( radians( advert.lat ) ) * cos( radians( advert.lng ) - radians( -0.7201327 ) ) + 
sin( radians( 51.8026795 ) ) * sin( radians( advert.lat ) ) ) ) AS Distance 
FROM advert 
INNER JOIN photo ON advert.id = photo.advertid 
WHERE photo.main = 'True' AND advert.status<>0 
ORDER BY advert.price ASC 
```

这在 SQL Server Management Studio 中运行良好并返回正确的值，但是当我使用驱动程序在 PHP 中使用完全相同的查询时，`sqlsrv`我得到：

> 执行查询时出错。数组 ( [0] => 数组 ( [0] => 42000 [SQLSTATE] => 42000 [1](http://www.developerdream.com) => 156 [代码] => 156 [2] => [Microsoft][SQL Server Native Client 10.0][SQL Server]关键字“AND”附近的语法不正确。[消息] => [Microsoft][SQL Server Native Client 10.0][SQL Server]关键字“AND”附近的语法不正确。））

我做了一些非常简单的事情来解决吗？！

您可以在[DeveloperDream.com](http://www.developerdream.com)上通过单击搜索然后输入邮政编码来查看问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:28:31.680

想通了 - 有另一个搜索词被错误地添加到查询的末尾，但没有被回显，感谢迈克尔在一开始就提出了这个建议

# selenium - 由于所有浏览器中的安全警报，如何记录 selenium RC 脚本？

> ID：10498785
> 
> 赞同：0
> 
> 时间：2012-05-08T12:39:23.617
> 
> 标签：selenium, selenium-rc

如何在 Selenium RC 中录制脚本？截至目前，它向我发出安全警报（受信任的证书），我无法记录它。请帮助我，我们怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:54:58.243

你有两个选择

1.  **使用-trustAllSSLCertificates**参数启动rc。您的启动命令应如下所示

    java -jar selenium-server-standalone.jar -trustAllSSLCertificates

2.  您应该创建一个 Firefox 配置文件，如此[处](http://support.mozilla.org/en-US/kb/Managing-profiles)所述。请务必记下创建配置文件的路径。然后在该配置文件中打开 Firefox（如果您不知道如何在配置文件中打开 FF，请参阅相同的 mozilla 支持页面）并浏览您的应用程序。然后将提示您接受证书。接受证书并关闭浏览器。现在使用新创建的配置文件手动打开 Firefox 并再次访问该应用程序。它现在不应该显示证书错误。您现在需要做的就是让 selenium 使用这个新的 firefoxprofile。这可以通过在 selenium 服务器启动期间使用**-firefoxProfileTemplate参数来完成**

    java -jar seleniumserver.jar -firefoxProfileTemplate="firefoxprofile 文件夹路径"

# rest - 使用 Netty 框架

> ID：10498786
> 
> 赞同：1
> 
> 时间：2012-05-08T12:39:24.077
> 
> 标签：rest, playframework, netty

我们正在获得对使用 RESTful Web 服务的基于 Web 的应用程序的新要求。我们计划使用 Play with Netty。哪里可以找到最好的文档和视频资料，从头开始申请。

任何工具都可用于生成项目的骨架，如 maven 原型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:00:41.293

Play 已经与 netty 捆绑在一起。您可以在 [http://www.playframework.org/documentation/2.0.1/Home了解更多信息](http://www.playframework.org/documentation/2.0.1/Home)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:46:08.693

除非您具有良好的 Maven 级别，否则不要对 Play 应用程序进行 mavenizing。

帕利！附带开发人员所需的所有东西。

# php - 用 preg_replace 替换字符串

> ID：10498795
> 
> 赞同：0
> 
> 时间：2012-05-08T12:40:01.847
> 
> 标签：php, regex, preg-replace

我有一个这样的网址：

```
http://Example.com/mobile-ds-cams/mobile-gg-cams/ddd-webcams 
```

例子：

```
$pattern = '/http://Example.com/(\w+)/(\w+)/(\w+)/i';               
$replacement="http://Example.com/$2/$3";
$appUrl= preg_replace($pattern, $replacement, $appUrl); 
```

我想要实现的是这个

```
http://Example.com/mobile-gg-cams/ddd-webcams 
```

我试图保留 2 个“子 URL”而不是 3 个。但它不起作用..为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:45:05.370

您需要在模式中转义正斜杠，或使用不同的模式分隔符。

```
$pattern = '/http:\/\/Example\.com\/(\w+)\/(\w+)\/(\w+)/i';               

$pattern = '#http://Example\.com/(\w+)/(\w+)/(\w+)#i'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:46:50.800

像这样转义斜线：

```
$pattern = '/http:\/\/Example.com\/(\w+)\/(\w+)\/(\w+)/i';               
$replacement="http://Example.com/$2/$3";
$appUrl= preg_replace($pattern, $replacement, $appUrl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:48:50.047

它无法正常工作，因为您的表达式在正则表达式中包含未正确引用的具有特殊含义的字符。

要 100% 确定，请[`preg_quote`](http://www.php.net/manual/en/function.preg-quote.php)像这样使用：

```
$url = 'http://Example.com/'
$pattern = preg_quote($url.'{word}/{word}/{word}', '/');
$pattern = str_replace($pattern, '{word}', '(\w+)');
$pattern = "/$pattern/i";
$replacement = $url.'$2/$3';
$appUrl= preg_replace($pattern, $replacement, $appUrl); 
```

**否则，太容易出错了。**例如，当前发布在这里的*所有*其他答案都出错了，因为它们没有正确地转义`.`in `Example.com`。如果你给他们一个像 eg 这样的字符串，你可以自己测试一下`http://Example!com`，其中`!`可以是你喜欢的任何字符。

此外，您正在使用字符串，例如`$2`在双引号字符串文字中，这在 PHP 中不是一个好主意，因为恕我直言，它很容易被带走。最好将其单独引用并确保安全。

# maven - 分析构建在 Maven 3 上？

> ID：10498798
> 
> 赞同：4
> 
> 时间：2012-05-08T12:40:09.223
> 
> 标签：maven, profiling

我正在为 maven 3 重新提出这个问题：

[分析 Maven](https://stackoverflow.com/questions/6681968/profiling-maven)

我想知道每个 mojo / 阶段 / 项目花费了多少时间。

有[http://jira.codehaus.org/browse/MNG-3547](http://jira.codehaus.org/browse/MNG-3547)和[http://jira.codehaus.org/browse/MNG-4639](http://jira.codehaus.org/browse/MNG-4639)但我不知道他们的状态。

我将 MNG-3547 应用于 apache-maven-2.2.1，它工作正常。我收集发出的分析数据，解析和分析它（使用 scala）。

现在我们正在迁移到 maven 3。

**是否有更新/更好的方法来分析 maven3 构建，或者我应该移植补丁？**

在此先感谢，巴斯特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:56:29.997

现在，我不知道这是否真的是仅基于 Maven 的直接答案，但我知道 Sonatype 的 Maven 3 在 Hudson 插件上的工作确实包含构建的分析信息。如果您使用 Hudson 的 Maven 3 集成，您将能够看到您的 Maven 构建在每个目标上花费了多长时间。

# javascript - 类函数调用

> ID：10498801
> 
> 赞同：0
> 
> 时间：2012-05-08T12:40:11.657
> 
> 标签：javascript, class, function

我有一个班级设置如下：

```
var oTest = new TEST();

function TEST() {

  this.String = function(sString) {

    this.Trim = function() {
    }
  }
} 
```

我希望能够按如下方式调用 Trim 函数：

```
var sTrimmed = oTest.String("  something").Trim(); 
```

这是正确的方法吗？任何帮助将不胜感激，因为我以前从未在类函数中做过函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:56:40.140

将您的方法添加到`prototype`构造函数的 中，然后执行`return this;`in `String`，以返回相同的对象，从而使其可链接。

```
var oTest = new TEST();

function TEST() {}

TEST.prototype.String = function(aString) {
    this.the_string = aString;
    return this;
};
TEST.prototype.Trim = function() {
    this.the_string = this.the_string.trim();
    return this;
};
TEST.prototype.getString = function() {
    return this.the_string;
};

var sTrimmed = oTest.String("  something")
                    .Trim()
                    .getString(); 
```

***现场演示：http:*** [//jsfiddle.net/BcwgC/](http://jsfiddle.net/BcwgC/)

# forms - 使用相同的 Symfony 2 表单进行编辑和删除（字段差异）

> ID：10498807
> 
> 赞同：6
> 
> 时间：2012-05-08T12:40:23.157
> 
> 标签：forms, symfony

目前我有一个表格

```
class Project extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options) {
        $builder->add('name');
        $builder->add('description', 'textarea');
        $builder->add('iconFile', 'file', array('label' => 'Icon', 'required' => false));
    }
    // ...
} 
```

到目前为止，我正在使用编辑和删除。但是现在，在编辑“模式”中，我想让用户清除`icon`项目。我想我可以添加一个单选按钮，但我需要它在添加模式下处于“非活动状态”。现在我正在处理我的模型中的图像上传，我希望有它（除非有更好的地方来做）

```
/**
 * If isDirty && iconFile is null: deletes old icon (if any). 
 * Else, replace/upload icon
 * 
 * @ORM\PrePersist 
 * @ORM\PreUpdate
 */
public function updateIcon() {

    $oldIcon = $this->iconUrl;

    if ($this->isDirty && $this->iconFile == null) {

        if (!empty($oldIcon) && file_exists(APP_ROOT . '/uploads/' . $oldIcon)) 
            unlink($oldIcon);

    } else {

        // exit if not dirty | not valid
        if (!$this->isDirty || !$this->iconFile->isValid())
            return;

        // guess the extension
        $ext = $this->iconFile->guessExtension();
        if (!$ext) 
            $ext = 'png';

        // upload the icon (new name will be "proj_{id}_{time}.{ext}")
        $newIcon = sprintf('proj_%d_%d.%s', $this->id, time(), $ext);
        $this->iconFile->move(APP_ROOT . '/uploads/', $newIcon);

        // set icon with path to icon (relative to app root)
        $this->iconUrl = $newIcon;

        // delete the old file if any
        if (file_exists(APP_ROOT . '/uploads/' . $oldIcon) 
            && is_file(APP_ROOT . '/uploads/' . $oldIcon)) 
            unlink($oldIcon);

        // cleanup
        unset($this->iconFile);
        $this->isDirty = false;
    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T12:02:10.907

您可以在表单构建期间使用数据设置条件：

```
class Project extends AbstractType {
    public function buildForm(FormBuilder $builder, array $options) {
        $builder->add('name');
        $builder->add('description', 'textarea');
        $builder->add('iconFile', 'file', array('label' => 'Icon', 'required' => false));

        if ($builder->getData()->isNew()) { // or !getId()
            $builder->add('delete', 'checkbox'); // or whatever
        }
    }
    // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T23:15:31.900

您可以使用表单事件，有一个类似的方法：

[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

# java - Java bug 不能保留计数器的值

> ID：10498808
> 
> 赞同：1
> 
> 时间：2012-05-08T12:40:32.423
> 
> 标签：java, loops, mapreduce

我的计数器值每次都被重写。无法弄清楚保持值递增的方法。这是一个 map Reduce 代码。需要用profileId设置counter的值。谢谢

```
public void map(Object key, Text value, Context context) throws IOException, InterruptedException {

    String profile;
    String pos = null;
    int count=0;
    StringTokenizer inputKey=new StringTokenizer(value.toString()," ,");

    while(inputKey.hasMoreTokens()) {
        String input=inputKey.nextToken();
        System.out.println("the input is "+ input);

        if(!input.endsWith("</id>")) {
            textInput.set(input);
            count++;
            System.out.println("value of count is " + count);
        } else {
            profile=input.substring(4,15);
            profileId.set(profile);
        }

        /*count=+count;
          int index=value.toString().indexOf(count);
          pos=Integer.toString(index);
          System.out.println("the position is " + pos);
        */
        System.out.println("the index for each word is " + pos ); 
        context.write(textInput, new Text(profileId + ", " + pos));
    }
} 
```

# ruby - 如何一次安装多个 ruby gem？

> ID：10498810
> 
> 赞同：11
> 
> 时间：2012-05-08T12:40:48.087
> 
> 标签：ruby, rubygems, installation

是否可以仅使用一个命令同时安装多个 gem？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-08T13:09:41.460

该`gem install`命令接受许多参数，`gem install nokogiri bundler`例如，您可以一次性完成。

正如其他人所说，[Bundler](http://gembundler.com/)和[RVM](https://rvm.io/)使与管理 gem、版本和依赖项相关的一切都成为真正的乐趣。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T12:49:43.527

您可以将它们放在 a 中`Gemfile`并使用[bundler](http://gembundler.com/) ( `bundle install`)。

或者，您可以在文件中列出命令：

```
gem install pg
gem install sqlite3 
```

并使用类似的东西`cat <filename> | xargs sudo`来执行它们。

**考虑使用[RVM](https://rvm.io/)将 gem 管理到 gemset 中，而不是使用 sudo 全局安装它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:44:49.707

您可以使用捆绑器：http: [//gembundler.com/](http://gembundler.com/)

# java - 如何将换行符添加到多树的 toString

> ID：10498811
> 
> 赞同：1
> 
> 时间：2012-05-08T12:40:49.787
> 
> 标签：java, algorithm

有一个这样的结构：

```
public class TreeNode {

private String key;
private List<TreeNode> children;
    .... 
```

}

我重写了 toString() 函数

```
@Override
public String toString() {
    String treeStructure = "TreeNode [key=" + key +  "]";
    if(children!=null){
        for(TreeNode child:children){
        treeStructure = treeStructure+"--- >"+children.toString()+"/n";
        }
    }
    return treeStructure;
} 
```

然后我测试结果：

```
public static void main(String[] args) {
    TreeNode node = new TreeNode();
    node.setKey("root");
    List<TreeNode> children = new ArrayList<TreeNode>();
    TreeNode child1 = new TreeNode();
    child1.setKey("child1");
    TreeNode child2 = new TreeNode();
    child2.setKey("child2");
    children.add(child1);
    children.add(child2);
    List<TreeNode> grandchildren = new ArrayList<TreeNode>();
    TreeNode grandchild = new TreeNode();
    grandchild.setKey("grandchild");
    grandchildren.add(grandchild);

    node.setChildren(children);
    child1.setChildren(grandchildren);

    System.out.println(node);

} 
```

但是当我运行它时，输出是：

```
TreeNode [key=root]--->[TreeNode [key=child1]--->[TreeNode [key=grandchild]]/n, TreeNode [key=child2]]/n--->[TreeNode [key=child1]--->[TreeNode [key=grandchild]]/n, TreeNode [key=child2]]/n 
```

如何在输出中添加换行符，如下所示：

```
TreeNode [key=root]--->TreeNode [key=child1]--->TreeNode [key=grandchild]
                   --->TreeNode [key=child2] 
```

但是现在 child1 显示了两次，并且结果中没有添加换行符。

================================我改了函数：</p>

```
@Override
public String toString() {
    String treeStructure = "TreeNode [key=" + key +  "]";
    if(children!=null){
        for(TreeNode child:children){
        treeStructure = treeStructure+"\n"+"-->"+children.toString()+"\n";
        }
    }
    return treeStructure;
} 
```

那么输出是：

```
TreeNode [key=root]
--->[TreeNode [key=child1]
--->[TreeNode [key=grandchild]]
, TreeNode [key=child2]]

--->[TreeNode [key=child1]
--->[TreeNode [key=grandchild]]
, TreeNode [key=child2]] 
```

为什么孩子重复了两次，“，”从哪里来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:43:05.693

使用`\n`代替`/n`

```
treeStructure = treeStructure + "--- >" + children.toString() + "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:45:52.170

不要这样做。

换行符不属于*toString()*方法。当有人决定创建这些对象的列表或地图时，它们会造成相当大的混乱。 *toString()*不应该是漂亮的印刷品。为此目的使用特定方法，以便它可以具有可靠的输出。 *toString()*没有这样的合同来产生格式化的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:43:41.113

尝试使用 \r\n 或与 BufferedWriter 一起使用： BufferedWriter.newLine()

, 被写是因为它看起来像一个数组。同样的原因是针对 child1 重复的。
改变：

```
treeStructure+"\n"+"-->"+children.toString()+"\n" 
```

至：

```
treeStructure+"-->"+child.toString()+"\n" 
```

# asp.net - 当有两个堆栈跟踪时，堆栈跟踪是什么意思？

> ID：10498814
> 
> 赞同：0
> 
> 时间：2012-05-08T12:40:54.823
> 
> 标签：asp.net, asp.net-mvc-3

我有一个 MVC 应用程序，它基本上有两个堆栈跟踪，我想知道为什么有两个堆栈跟踪？

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'PteDotNet.Web.Controllers.BlogController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +232
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970356
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:43:27.037

一个是内部异常的堆栈跟踪。

看起来你首先得到了一个`MissingMethodException`, 有理由的

> 没有为此对象定义无参数构造函数。

这导致了一个`InvalidOperationException`，有理由的

> 尝试创建类型为“PteDotNet.Web.Controllers.BlogController”的控制器时出错。确保控制器有一个无参数的公共构造函数。

所以显然你`BlogController`需要一个无参数的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:43:57.290

我不完全确定，但它看起来像根本原因：

首先`MissingMethodException`被解雇，然后`InvalidOperationException`被解雇，因为第一个例外

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:47:33.963

`InvalidOperationException`是引发的异常，但它是作为 a 的结果引发的，并且`MissingMethodException`此异常包含在`InnerException`的 中`InvalidOperationException`。解释了出`InvalidOperationException`了什么问题，但是查看`InnerException`您可以首先看到故障是在哪里触发的。

当您评估`ToString()`带有内部异常的异常时，您会获得所有嵌套内部异常的堆栈跟踪，以帮助您理解问题。一个常见的错误是`ex.Message + ex.StackTrace`用于诊断目的，但您会丢失有关内部异常的信息。除非您想隐藏这些有价值的信息，否则您应该`ex.ToString()`在记录异常时始终使用。

在 MVC 框架中有类似这样的代码：

```
try {
  // Will throw MissingMethodException if there is no parameterless constructor.
  var controller =  Activator.CreateInstance(type);
  ...
}
catch (MissingMethodException ex) {
  var message = String.Format("An error occurred when trying to create a controller of type '{0}'. Make sure that the controller has a parameterless public constructor.", type);
  throw new InvalidOperationException(message, ex);
} 
```

因此，与其得到一个`MissingMethodException`可能会让你感到困惑的东西，不如得到`InvalidOperationException`一个很好的解释。这是异常处理方面的最佳实践示例。

# c++ - 尝试使用矢量在 sfml 中创建瓷砖地图

> ID：10498820
> 
> 赞同：1
> 
> 时间：2012-05-08T12:41:10.723
> 
> 标签：c++, sfml

如何使用 SFML 和矢量头创建 Sprite 的矢量？我开始像

```
vector<sf::Sprite> test; 
```

我正在尝试做一个 push_back()，但我不知道我需要在“()”中放什么。

无论如何，我的矢量将是 41x31，所以有一种方法可以做类似的事情

`vector<vector<sf::Sprite> > test (41,vector<sf::Sprite>(31,??))` ?

我正在使用它来创建瓷砖地图，如果有人有更好的主意，我将不胜感激

编辑：

我仍然有错误，那是我的代码

```
vector<vector<int> > mapc (5,vector<int>(5,1));

sf::Sprite mapa[5][5];

void fmap() {
    mapc[0][0] = 1; mapc[0][1] = 1; mapc[0][2] = 1; mapc[0][3] = 1; mapc[0][4] = 1;
    mapc[1][0] = 1; mapc[1][1] = 0; mapc[1][2] = 0; mapc[1][3] = 0; mapc[1][4] = 1;
    mapc[2][0] = 1; mapc[2][1] = 0; mapc[2][2] = 1; mapc[2][3] = 0; mapc[2][4] = 1;
    mapc[3][0] = 1; mapc[3][1] = 0; mapc[3][2] = 0; mapc[3][3] = 0; mapc[3][4] = 1;
    mapc[4][0] = 1; mapc[4][1] = 1; mapc[4][2] = 1; mapc[4][3] = 1; mapc[4][4] = 1;

    sf::Image w;
    w.LoadFromFile("w.png");
    sf::Image f;
    f.LoadFromFile("f.png");
    unsigned int i,j;
    for(i=0;i<mapc.size();i++) {
        for(j=0;j<mapc[i].size();j++) {
            if(mapc[i][j] == 1) { sf::Sprite teste(w); }
            else { sf::Sprite teste(f); }
           mapa[i][j] = teste;
        }
    }
//     test.push_back(teste);
} 
```

它说

“'teste' 未在此范围内声明”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:55:18.470

编辑：其实我撒谎了，如果你知道地图的确切大小，那么你可以使用

```
sf::Sprite map[41][31]; 
```

除非您的地图将在运行时更改其大小，否则您应该只在堆栈上创建一个数组。

```
sf::Sprite temp; //used to initialize the map
map = new sf::Sprite[num_rows];  
for(int i = 0; i < num_rows; i++){  
    map[i] = new sf::Sprite[num_cols];  
    for(int j = 0; j < num_cols; j++){  
        map[i][j] = temp;  
    }  
} 
```

然后，您将需要再运行一次地图以对其进行初始化。如果你不能这样做并且你需要使用向量，那么你可以对向量做类似的事情。

```
sf::Sprite temp; //used to initialize the map  
vector<vector<sf::Sprite> > map;  
vector<sf::Sprite> row;  
map.resize(0);  
row.resize(0);  
for(int i = 0; i < num_cols; i++){  
    row.push_back(temp);  
}  
for(int i = 0; i < num_rows; i++){  
    map.push_back(row);  
} 
```

无论哪种情况，您的地图都可以作为
map[x][y]访问
。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:51:49.127

您只需创建一个 Sprite 并将其放入向量中。

```
 sf::Sprite sprite;
 test.push_back(sprite); 
```

十分简单！

A`std::vector`自行调整大小，因此您无需担心大小。

# python - python中的字符串到OrderedDict的转换

> ID：10498822
> 
> 赞同：4
> 
> 时间：2012-05-08T12:41:13.437
> 
> 标签：python, string, parsing, ordereddictionary

我通过导入集合创建了一个 python Ordered Dictionary 并将其存储在一个名为“filename.txt”的文件中。文件内容看起来像

```
OrderedDict([(7, 0), (6, 1), (5, 2), (4, 3)]) 
```

我需要从另一个程序中使用这个 OrderedDict。我这样做

```
myfile = open('filename.txt','r')
mydict = myfile.read() 
```

我需要得到'mydict'的类型

```
<class 'collections.OrderedDict'> 
```

但在这里，它的类型是“str”。
python中有什么方法可以将字符串类型转换为OrderedDict类型？使用 python 2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T12:44:51.797

你可以用[pickle存储和加载它](http://docs.python.org/library/pickle.html)

```
import cPickle as pickle

# store:
with open("filename.pickle", "w") as fp:
    pickle.dump(ordered_dict, fp)

# read:
with open("filename.pickle") as fp:
    ordered_dict = pickle.load(fp)

type(ordered_dict) # <class 'collections.OrderedDict'> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T12:47:00.173

这里最好的解决方案是以不同的方式存储您的数据。[例如，将其编码为 JSON](https://stackoverflow.com/questions/6921699/can-i-get-json-to-load-into-an-ordereddict-in-python)。

您也可以按照其他答案中的说明使用[该`pickle`模块](http://docs.python.org/library/pickle.html)，但这存在潜在的安全问题（`eval()`如下所述） - 因此，如果您知道数据始终是可信的，请仅使用此解决方案。

如果你不能改变数据的格式，那么还有其他的解决方案。

真正糟糕的解决方案是使用它[`eval()`](http://docs.python.org/library/functions.html#eval)来执行此操作。这是一个*非常* **糟糕**的主意，因为它不安全，因为放入文件中的任何代码都会运行，以及[其他原因](https://stackoverflow.com/a/1832957/722121)

更好的解决方案是手动解析文件。好处是有一种方法可以让你在这方面作弊并且更容易做到这一点。Python[`ast.literal_eval()`](http://docs.python.org/library/ast.html#ast.literal_eval)允许您轻松解析文字。虽然这不是文字，因为它使用 OrderedDict，但我们可以提取列表文字并对其进行解析。

例如：（未经测试）

```
import re
import ast
import collections

with open(filename.txt) as file:
    line = next(file)
    values = re.search(r"OrderedDict\((.*)\)", line).group(1)
    mydict = collections.OrderedDict(ast.literal_eval(values)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T19:59:13.237

这不是一个好的解决方案，但它有效。:)

```
#######################################
# String_To_OrderedDict
# Convert String to OrderedDict
# Example String
#    txt = "OrderedDict([('width', '600'), ('height', '100'), ('left', '1250'), ('top', '980'), ('starttime', '4000'), ('stoptime', '8000'), ('startani', 'random'), ('zindex', '995'), ('type', 'text'), ('title', '#WXR#@TU@@Izmir@@brief_txt@'), ('backgroundcolor', 'N'), ('borderstyle', 'solid'), ('bordercolor', 'N'), ('fontsize', '35'), ('fontfamily', 'Ubuntu Mono'), ('textalign', 'right'), ('color', '#c99a16')])"
#######################################
def string_to_ordereddict(txt):

    from collections import OrderedDict
    import re

    tempDict = OrderedDict()

    od_start = "OrderedDict([";
    od_end = '])';

    first_index = txt.find(od_start)
    last_index = txt.rfind(od_end)

    new_txt = txt[first_index+len(od_start):last_index]

    pattern = r"(\(\'\S+\'\,\ \'\S+\'\))"
    all_variables = re.findall(pattern, new_txt)

    for str_variable in all_variables:
        data = str_variable.split("', '")
        key = data[0].replace("('", "")
        value = data[1].replace("')", "")
        #print "key : %s" % (key)
        #print "value : %s" % (value)
        tempDict[key] = value

    #print tempDict
    #print tempDict['title']

    return tempDict 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-23T17:32:22.203

这是我在 Python 2.7 上的做法

```
from collections import OrderedDict
from ast import literal_eval

# Read in string from text file
myfile = open('filename.txt','r')
file_str = myfile.read()

# Remove ordered dict syntax from string by indexing
file_str=file_str[13:]
file_str=file_str[:-2]

# convert string to list
file_list=literal_eval(file_str)

header=OrderedDict()
for entry in file_list:
    # Extract key and value from each tuple
    key, value=entry
    # Create entry in OrderedDict
    header[key]=value 
```

同样，您可能应该以不同的方式编写文本文件。

# gdb - 从 Flash 启动时断点不起作用

> ID：10498827
> 
> 赞同：4
> 
> 时间：2012-05-08T12:41:51.737
> 
> 标签：gdb, breakpoints, stm32

过去，我一直在调试加载到我的 Cortex M3 (STM32F2) 的内部 SRAM 中的可执行文件，没有任何问题。我最近一直在将我的可执行文件加载到 Flash（因为大小问题）。

从那以后，使用 GDB 进行调试就一直不起作用。据我了解，当可执行文件在 Flash 中时，只能使用硬件断点（与软件断点相反），我有六个硬件断点。但是，当只设置一个硬件断点时，GDB 会产生错误消息：

```
(gdb) break main
Breakpoint 1 at 0x800019a: file src/main.c, line 88.
(gdb) c
Continuing.
Note: automatically using hardware breakpoints for read-only addresses.
(gdb) Warning:
Cannot insert hardware breakpoint 1.
Could not insert hardware breakpoints:
You may have requested too many hardware breakpoints/watchpoints. 
```

可能出了什么问题？我的硬件断点是否在后台进行？

*注意*：我使用 OpenOCD 通过 JTAG 加载可执行文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T01:44:45.107

因此，基本上有两种方法（加上一种非常糟糕的方法）可以在任何给定的调试器/平台组合上实现断点：

1.  使用一些硬件功能（“硬件断点”）使处理器在到达特定地址时陷入陷阱。这通常仅限于几个断点，如果它完全可用的话。

2.  对于正在设置的每个断点，将断点处的指令替换为某种“陷阱”指令（即，将中断进入调试器的指令）。当其中一个断点被命中时，将原始指令换回并单步执行一次以使其运行。

3.  单步执行整个程序。这个不算数，因为它非常慢。

听起来您的调试器似乎只使用方法#2（“软件断点”）。这种方法的问题是它要求程序是可写的——而且闪存不能一次写一条指令，所以这种技术行不通。

# c# - c++ 逻辑，c# gui

> ID：10498829
> 
> 赞同：-2
> 
> 时间：2012-05-08T12:41:59.180
> 
> 标签：c#, c++, visual-studio-2010, user-interface

我必须用 C# 和 C++ 中的逻辑编写一个 GUI。如何在 Visual Studio 2010 中创建项目，以便之后不会出现任何复杂情况（当我将链接两种语言时）。我需要扩展/插件/什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:55:33.793

首先，您需要有两个项目，一个用于 c# gui，一个用于 c++ 逻辑。如前所述，它们可以放入同一个解决方案中。如果您准备好使用托管 C++，那么您的逻辑可以放入一个类库中，UI 项目可以以传统方式访问该类库。将 C++（甚至是非托管）逻辑打包到托管类接口中是很常见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:00:04.690

由于已经讨论了 C++ 托管代码中的逻辑。要在托管代码中调用非托管代码，您可以使用[PlaPlatform Invocation Services (PInvoke)](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)。它`allows managed code to call unmanaged functions that are implemented in a DLL`。例如看看这个 MSDN 代码

```
// PInvokeTest.cs
using System;
using System.Runtime.InteropServices;

class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

# spring - 基于身份验证过滤 JSON 响应

> ID：10498830
> 
> 赞同：1
> 
> 时间：2012-05-08T12:41:59.407
> 
> 标签：spring, spring-security, jackson

我想根据身份验证甚至角色过滤对象属性。因此，例如，完整的用户配置文件将为经过身份验证的用户返回，并针对未经过身份验证的用户进行过滤。

我怎样才能实现它`MappingJacksonHttpMessageConverter`？我已经为 Jaskon 声明了自定义 bean：

```
 <bean id="objectMapper" class="com.example.CustomObjectMapper"/>

    <bean id="MappingJacksonHttpMessageConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="objectMapper" ref="objectMapper"/>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="order" value="1" />
        <!-- <property name="customArgumentResolver" ref="sessionParamResolver"/> -->
        <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <!-- <property name="conversionService" ref="conversionService" />  -->
            <!-- <property name="validator" ref="validator" /> -->
        </bean>
        </property>
        <property name="messageConverters">
            <list>
                <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" />
                <bean class="org.springframework.http.converter.StringHttpMessageConverter" />
                <bean class="org.springframework.http.converter.ResourceHttpMessageConverter" />
                <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
                <ref bean="MappingJacksonHttpMessageConverter"/>
            </list>
        </property>
    </bean> 
```

注意：在控制器中，我将结果写为：

```
public void writeJson (Object jsonBean, HttpServletResponse response) {
        MediaType jsonMimeType = MediaType.APPLICATION_JSON;
        if (jsonConverter.canWrite(jsonBean.getClass(), jsonMimeType)) {
            try {
                jsonConverter.write(jsonBean, jsonMimeType, new ServletServerHttpResponse(response));
            } catch (IOException m_Ioe) {
            } catch (HttpMessageNotWritableException p_Nwe) {
            }   catch (Exception e) {
                e.printStackTrace();
            }
        } else {
            log.info("json Converter cant write class " +jsonBean.getClass() );
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:59:00.500

如果您想要返回两种不同类型的 JSON 对象（例如`fullProfile`和`partialProfile`），那么您最好使用两个不同的 url 创建两个不同的服务。[然后，您可以使用 Spring Security 的拦截 url](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal)标签以正常方式控制对这些 url 的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T14:26:48.370

我在这里做了大部分工作[https://stackoverflow.com/a/39168090/6761668](https://stackoverflow.com/a/39168090/6761668)

您需要做的就是编写您自己的安全规则，也许注入当前用户并根据他们的角色决定包含或不包含哪些内容。我在实体列上使用了注释：

```
 import java.lang.annotation.Retention;
  import java.lang.annotation.RetentionPolicy;
  import java.util.Set;
  @Retention(RetentionPolicy.RUNTIME)
  public @interface MyRestricted {
    String[] permittedRoles() default {};
  } 
```

该列如下所示：

```
 @Column(name = "DISCOUNT_RATE", columnDefinition = "decimal", precision = 7, scale = 2)
    @MyRestricted(permittedRoles = { "accountsAdmin", "accountsSuperUser" })
    private BigDecimal discountRate; 
```

规则如下所示：

```
 final MyRestricted roleRestrictedProperty = pWriter.findAnnotation(MyRestricted.class);
    if (roleRestrictedProperty == null) {
        // public item
        super.serializeAsField(pPojo, pJgen, pProvider, pWriter);
        return;
    } 

    // restricted - are we in role?
    if (permittedRoles.contains(myRole)) {
        super.serializeAsField(pPojo, pJgen, pProvider, pWriter);
        return;
    }
    // Its a restricted item for ME
    pWriter.serializeAsOmittedField(pPojo, pJgen, pProvider); 
```

# c# - LINQ 将 30 分钟间隔聚合为一小时

> ID：10498831
> 
> 赞同：1
> 
> 时间：2012-05-08T12:41:59.583
> 
> 标签：c#, linq

我不是 LINQ 的超级专家，我有以下第三方提供的数据：数据

```
Start: 6:00
End: 6:30
value: 1 
Start: 7:00
End: 7:30
value: 1
Start: 8:00
End: 8:30
value: 1
Start: 9:00
End: 9:30
value: 1
Start: 10:00
End: 10:30
value: 1
Start: 11:00
End: 11:30
value: 1
Start: 12:00
End: 12:30
value: 1
Start: 13:00
End: 13:30
value: 1
Start: 14:00
End: 14:30
value: 1
...
Start: 05:00
End: 05:30
value: 1 
```

这些数据会持续一周，然后是 30 天和 365 天。

我需要将每个 30 分钟的块转换为一个小时。

例如

```
Start: 6:00
End: 7:00
Value: 2
Start:7:00
End: 8:00
Value:2
...... 
```

假设开始，结束和价值是一排，有人可以帮助如何实现上述目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:09:43.797

此查询能够按给定分组，`AggregationType`并且能够使用第二个参数过滤掉不完整的组`checkType`。

```
private enum AggerationType { Year = 1, Month = 2, Day = 3, Hour = 4 }

private IList<Data> RunQuery(AggerationType groupType, AggerationType checkType)
{
    // The actual query which does to trick
    var result =
        from d in testList
        group d by new {
            d.Start.Year,
            Month = (int)groupType >= (int)AggerationType.Month ? d.Start.Month : 1,
            Day = (int)groupType >= (int)AggerationType.Day ? d.Start.Day : 1,
            Hour = (int)groupType >= (int)AggerationType.Hour ? d.Start.Hour : 1
        } into g
        // The where clause checks how much data needs to be in the group
        where CheckAggregation(g.Count(), checkType)
        select new Data() { Start = g.Min(m => m.Start), End = g.Max(m => m.End), Value = g.Sum(m => m.Value) };

    return result.ToList();
}

private bool CheckAggregation(int groupCount, AggerationType checkType)
{
    int requiredCount = 1;
    switch(checkType)
    {
        // For year all data must be multiplied by 12 months
        case AggerationType.Year:
            requiredCount = requiredCount * 12; 
            goto case AggerationType.Month;
        // For months all data must be multiplied by days in month
        case AggerationType.Month:
            // I use 30 but this depends on the given month and year
            requiredCount = requiredCount * 30; 
            goto case AggerationType.Day;
        // For days all data need to be multiplied by 24 hour
        case AggerationType.Day:
            requiredCount = requiredCount * 24;
            goto case AggerationType.Hour;
        // For hours all data need to be multiplied by 2 (because slots of 30 minutes)
        case AggerationType.Hour:
            requiredCount = requiredCount * 2;
            break;

    }
    return groupCount == requiredCount;
} 
```

如果需要，这里有一些测试数据：

```
class Data
{
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
    public int Value { get; set; }
}

// Just setup some test data simulary to your example
IList<Data> testList = new List<Data>();
DateTime date = DateTime.Parse("6:00"); 

// This loop fills just some data over several years, months and days
for (int year = date.Year; year > 2010; year--)
{
    for(int month = date.Month; month > 0; month--)
    {
        for (int day = date.Day; day > 0; day--)
        {
            for(int hour = date.Hour; hour > 0; hour--)
            {
                DateTime testDate = date.AddHours(-hour).AddDays(-day).AddMonths(-month).AddYears(-(date.Year - year));
                testList.Add(new Data() { Start = testDate, End = testDate.AddMinutes(30), Value = 1 });
                testList.Add(new Data() { Start = testDate.AddMinutes(30), End = testDate.AddHours(1), Value = 1 });
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:08:00.057

下面是代码。`switch`由于声明，它似乎有点难看。重构它会更好，但它应该显示这个想法。

```
var items = input.Split('\n');

Func<string, string> f = s =>
{
    var strings = s.Split(new[] {':'}, 2);
    var key = strings[0];
    var value = strings[1];

    switch (key.ToLower())
    {
        case "start":
            return s;
        case "value":
            return String.Format("{0}: {1}", key, Int32.Parse(value) + 1);
        case "end": 
            return String.Format("{0}: {1:h:mm}", key,
                DateTime.Parse(value) +
                TimeSpan.FromMinutes(30));
        default:
            return "";
    }
};

var resultItems = items.Select(f);

Console.Out.WriteLine("result = {0}",
                          String.Join(Environment.NewLine, resultItems)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:08:39.930

用纯 LINQ 完全解决这个问题实际上是相当困难的。为了让生活更轻松，您需要编写至少一个帮助方法来允许您转换枚举。看看下面的例子。在这里，我使用了一个`IEnumerable`of`TimeInterval`并有一个自定义`Split`方法（用 C# 迭代器实现），它将两个元素连接在一起`Tuple`：

```
class TimeInterval
{
    DateTime Start;
    DateTime End;
    int Value;
}

IEnumerable<TimeInterval> ToHourlyIntervals(
    IEnunumerable<TimeInterval> halfHourlyIntervals)
{
    return
        from pair in Split(halfHourlyIntervals)
        select new TimeInterval
        {
            Start = pair.Item1.Start,
            End = pair.Item2.End,
            Value = pair.Item1.Value + pair.Item2.Value
        };
}

static IEnumerable<Tuple<T, T>> Split<T>(
    IEnumerable<T> source)
{
    using (var enumerator = source.GetEnumerator())
    {
        while (enumerator.MoveNext())
        {
            T first = enumerator.Current;

            if (enumerator.MoveNext())
            {            
                T second = enumerator.Current;
                yield return Tuple.Create(first, second);
            }
        }
    }
} 
```

同样可以应用于问题的第一部分（`TimeInterval`从字符串列表中提取半小时 s）：

```
IEnumerable<TimeInterval> ToHalfHourlyIntervals(
    IEnumerable<string> inputLines)
{
    return
        from triple in TripleSplit(inputLines)
        select new TimeInterval
        {
            Start = DateTime.Parse(triple.Item1.Replace("Start: ", "")),
            End = DateTime.Parse(triple.Item2.Replace("End: ", "")),
            Value = Int32.Parse(triple.Item3)
        };
} 
```

在这里，我使用了一个`TripleSplit`返回 a 的自定义方法`Tuple<T, T, T>`（这将很容易编写）。有了这个，完整的解决方案将如下所示：

```
// Read data lazilzy from disk (or any other source)
var lines = File.ReadLines(path);

var halfHourlyIntervals = ToHalfHourlyIntervals(lines);

var hourlyIntervals = ToHourlyIntervals(halfHourlyIntervals);

foreach (var interval in hourlyIntervals)
{
    // process
} 
```

这个解决方案的好处是它完全被推迟了。它一次处理一行，这使您可以处理不确定的大源，而不会出现任何内存不足异常的危险，考虑到您的给定要求，这似乎很重要：

> 这些数据会持续一周，然后是 30 天和 365 天。

# objective-c - @interface 处的 appdelegate 错误：“预期标识符或 {”和“解析问题：缺少 @end”

> ID：10498832
> 
> 赞同：1
> 
> 时间：2012-05-08T12:42:02.907
> 
> 标签：objective-c, ios, uikit, uiapplicationdelegate

我收到 appdelegate.h 的错误：“预期标识符或 {”和“解析问题：缺少 @end”。

我已经尝试了我能想到的一切来解决这个问题。我检查了标题和#imports。我已将所有类移到一个新项目中，认为构建设置有问题。我什至重新安装了 Xcode 也无济于事。这是应用程序 delegate.h

```
#import <UIKit/UIKit.h>
#import "MainViewController.h"

@interface AppDelegate : UIResponder <UIApplicationDelegate> {
    UIWindow *window;
    MainViewController *viewController;
    NSMutableArray *savedBookmarksArray;
}

@property (nonatomic) IBOutlet UIWindow *window;
@property (nonatomic) IBOutlet MainViewController *viewController;
@property (nonatomic) NSMutableArray *savedBookmarksArray;

@end 
```

每个引用应用程序委托的类都表示找不到该文件。.m 包含在编译源中。有人知道怎么修这个东西吗？

主文件

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

主视图控制器.h

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import "DDWebView.h"

@class AboutTableViewController;

@interface MainViewController : UIViewController <UIActionSheetDelegate, UIAlertViewDelegate, UIWebViewDelegate, UIPopoverControllerDelegate, UIScrollViewDelegate, UIGestureRecognizerDelegate> {

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:09:00.710

我解决了这个问题。我有一个导入，`#import "AppDelegate"`而不是`#import "AppDelegate.h"`我的其他标题之一。

感谢您的所有帮助！..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T03:59:32.527

I had a similar issue but it turned out that i accidentally declared the @interface inside the .m file and that screwed around with it. Once i removed it from the .m file it worked.

# typo3 - 将用户从 CSV 批量导入 FE 用户表

> ID：10498833
> 
> 赞同：2
> 
> 时间：2012-05-08T12:42:04.217
> 
> 标签：typo3

是否有 Typo3 的扩展，我可以使用它将前端用户数据导入后端？

我搜索了互联网，发现所有扩展都是针对旧版本的 Typo3（我使用的是 4.5），或者不再在存储库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:58:20.973

直接邮件扩展能够做到这一点，我猜你甚至可以通过 phpMyAdmin 做到这一点（从未尝试过）。如果您需要定期/自动执行此操作，请查看[external_import](http://typo3.org/extensions/repository/view/external_import)

# full-text-search - 使用 to_tsquery 搜索特殊字符

> ID：10498834
> 
> 赞同：3
> 
> 时间：2012-05-08T12:42:08.337
> 
> 标签：full-text-search, postgresql-9.1

如何构造 to_tsquery 来搜索特殊字符，如“_”等...？

我在 tsvector 列中有条目，例如“v_130”，我想搜索“v_130”，但是当我构造 to_tsquery 时，例如 to_tsquery('v_130:*') 它不返回任何记录。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-06-16T06:27:15.700

是的，这是因为特殊字符在 POstgres FTS 中被计为空白/空格。

# dom - 连接 jQuery 对象

> ID：10498839
> 
> 赞同：3
> 
> 时间：2012-05-08T12:42:42.807
> 
> 标签：dom, concatenation, jquery

下面是我正在尝试做的原型。

```
var entry_set   = $;

// start to loop data
for([])
{
    // create HTML element to represent that data
    $('<div></div>')
        .data([])
        .addClass([])
        .on([])
        .insertAfter(entry_set);
}

// modify DOM only once all the entries are consolidated to a single jQuery object
entry_set.appendTo('.entries'); 
```

评论说明了一切。简而言之 - 这个想法是在插入数据时只修改一次文档 DOM。我通常会采用 HTML 字符串方法（只需使用字符串连接相同的结构），但我很感兴趣是否有类似的方法也可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:22:42.647

你可以创建一个空的 DOM 元素和 .append() 到那个

```
var entry_set = $("<div>"); //empty dom element

// start to loop data
var i = 4;
while(i--) {
    // create HTML element to represent that data
    var item = $('<div>', {
        text: "test " + i
    });
    entry_set.append(item);
}

// modify DOM only once all the entries are consolidated to a single jQuery object
$("body").append(entry_set.children());​ 
```

工作演示：http: [//jsfiddle.net/F2J6g/1/](http://jsfiddle.net/F2J6g/1/)

**编辑** 您也可以从一个空集合开始并使用 .add()

```
var entry_set = $(); //empty collection

// start to loop data
var i = 4;
while(i--) {
    // create HTML element to represent that data
    var item = $('<div>', {
        text: "test " + i
    });
    entry_set = entry_set.add(item);
}

// modify DOM only once all the entries are consolidated to a single jQuery object
$("body").append(entry_set); 
```

[http://jsfiddle.net/F2J6g/2/](http://jsfiddle.net/F2J6g/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:47:39.160

@Guy，我认为您不会获得所需的 HTML 输出。尝试使用“包装”。示例语法：

```
$('.OuterDiv').wrap('<div class="abc" />'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:48:29.707

不幸的是，因为这些对象实际上并没有附加到任何层次结构，所以调用`insertAfter`实际上并不意味着什么。你需要做的就是把它们放在一个包含的 div 中，可能是这样的：

```
var entry_set = $('<div>');

// start to loop data
for([])
{
    // create HTML element to represent that data
    $('<div></div>')
        .data([])
        .addClass([])
        .on([])
        .appendTo(entry_set);
}

// modify DOM only once all the entries are consolidated to a single jQuery object
entry_set.appendTo('.entries'); 
```

我还没有测试过，但我认为它应该可以工作。

# php - 将动态列添加到 MySQL 结果

> ID：10498843
> 
> 赞同：1
> 
> 时间：2012-05-08T12:42:52.843
> 
> 标签：php, mysql

我在 mysql 中有一个表，我们称之为它`foo`，它的列数量有限。

```
| id | name |    date    |
--------------------------
| 1  | bar  | 2012-05-08 |
| 2  | buba | 2012-05-09 | 
```

我的用户可以向表中添加记录（诸如、、、...之类的`foo_field`东西）。`code``description``time`

```
| id | name        |
--------------------
| 1  | code        |
| 2  | description |
| 3  | time        | 
```

在表`foo_field_value`中存储了用户定义字段的值，如下所示：

```
| id | foo_id | foo_field_id | value     |
------------------------------------------
| 1  | 1      | 1            | b         |
| 2  | 1      | 2            | Lalalala  |
| 3  | 1      | 3            | 12:00     |
| 1  | 2      | 1            | c         |
| 2  | 2      | 2            | We are go |
| 3  | 2      | 3            | 14:00     | 
```

理想情况下，我想要一个查询，它会给我一个类似的结果

```
| id | name | date       | code | description | time  |
------------------------------------------------------
| 1  | bar  | 2012-05-08 | b    | Lalalala    | 12:00 |
| 2  | buba | 2012-05-09 | c    | We are go   | 14:00 | 
```

如果不对每个 foo_field 的 foo_fields_value 表进行内部连接，这是否可能（通过先执行另一个查询来使用 PHP 生成查询）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:12:52.517

只需一个即可完成，而且非常简单。

我们将稍微修改一下 foo_field 表，添加一个对应于 foo 表的 id 列的列，我假设它是主键。

所以现在我们有了

```
* foo
|------|
| id   |
| name |
| date |
|------|

* foo_field
|-------------|
| foo_id      |
| code        |
| description |
| time        |
|-------------| 
```

这意味着我们可以通过一个简单的查询添加额外的字段：

```
SELECT * FROM foo
LEFT JOIN foo_field ON foo.id = foo_field.foo_id 
```

这会给我们一个结果集

```
| id | name  |       date | foo_id | code   | description |     time |
|----+-------+------------+--------+--------+-------------+----------|
|  1 | asdw  | 2012-05-16 |      1 | asdasd | asdasd      | 15:03:41 |
|  2 | fdgfe | 2012-05-18 |      2 | asdas  | asdas       | 15:03:41 |
|  3 | asdw  | 2012-05-16 |      3 | asdas  | asdas       | 15:03:52 |
|  4 | fdgfe | 2012-05-18 |      4 | asdasd | asdasd      | 15:03:52 | 
```

我仍然不确定我是否确实理解了你的问题。如果您想创建真正动态的值和数据结构，我建议您将[序列化](http://php.net/manual/en/function.serialize.php)数组保存到数据库中的[TEXT](http://dev.mysql.com/doc/refman/5.5/en/blob.html)字段中，但如果是这种情况，我也建议您忽略您的解决方案；如果您希望您的解决方案能够增长，您希望管理尽可能严格的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:11:18.557

您正在寻找的是一个数据透视查询。而且由于您有需要转换为列的动态字段，请在此处查看有关进行自动数据透视查询的这篇文章

[http://www.artfulsoftware.com/infotree/queries.php#523](http://www.artfulsoftware.com/infotree/queries.php#523)

# java - 您如何在分离服务组件的同时正确处理 OSGi 中的日志记录？

> ID：10498846
> 
> 赞同：4
> 
> 时间：2012-05-08T12:43:07.337
> 
> 标签：java, logging, components, osgi, declarative-services

我正在使用 OSGi 和声明式服务 (DS)，目前正在考虑如何正确处理日志记录。由于无论如何我都在使用 DS，因此使用 OSGi 服务纲要指定的 LogService 作为强制性服务参考似乎很自然。我在[ekkes 角](http://ekkescorner.wordpress.com/blog-series/osgi-apps/)和[nogunners 的博客](http://blog.kornr.net/index.php/2008/12/16/writing-an-osgi-logging-back-end)上阅读了很多内容，但我仍然不清楚：

如何正确区分不同的服务组件（或使用分解组件时的不同服务组件实例）？

如果我查看使用 Logback 的 LogListener 的 nogunners 实现，他使用来自 bundlecontext 的 Bundle-Id 来区分它们。到目前为止还好。但是我将如何区分服务组件？LogService 对象自然包含对 BundleContext 的引用，但是（查看 LogService 接口）必须由用户（实际记录某些内容的人）自己提供 ServiceReference 吗？这对我来说似乎很脆弱。为什么框架不能像它提供 BundleContext 一样提供这个？

当我在做的时候，为什么 OSGi 规范使用详细`logger.log(LogService.LOG_INFO,...)`而不是准标准`logger.info(...), logger.warn(..)`等？有什么具体原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:15:49.603

没有标准的方法来记录组件 ID，您必须将其嵌入到消息中。

OSGi 日志服务已有 14 年历史......决定不升级它，因为周围已经有（太多）很多日志系统了。

查看[http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)，它们将流行的记录器与 OSGi 集成（两种方式）。

# xcode - 简短的倒序位

> ID：10498849
> 
> 赞同：0
> 
> 时间：2012-05-08T12:43:11.253
> 
> 标签：xcode, cocoa

Apple 的库中是否有一个函数可以在短时间内反转位的顺序？

`0000 0011 -> 1100 0000`

提前致谢。

使用方法：

```
unsigned int  NO_OF_BITS = sizeof(num) * 8;
unsigned int reverse_num = 0;
int i;
for (i = 0; i < NO_OF_BITS; i++)
{
    if((num & (1 << i)))
        reverse_num |= 1 << ((NO_OF_BITS - 1) - i);
} 
```

资料来源：[http ://www.geeksforgeeks.org/archives/726](http://www.geeksforgeeks.org/archives/726)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:47:25.070

听起来您正在尝试反转给定字节的位序列。

有很多方法可以有效地做到这一点。看看[http://graphics.stanford.edu/~seander/bithacks.html#BitReverseObvious](http://graphics.stanford.edu/%7Eseander/bithacks.html#BitReverseObvious)

该站点包含许多使用位时的技巧。

# objective-c - 如何查找 NSKeyedArchiver/NSKeyedUnarchiver 中使用的所有密钥

> ID：10498862
> 
> 赞同：6
> 
> 时间：2012-05-08T12:43:45.947
> 
> 标签：objective-c, cocoa, foundation, nscoding

我有一个使用`NSKeyedArchiver`. 有没有办法遍历其中的所有值？必须以某种方式获取使用时存储在其中的所有密钥`+[NSKeyedUnarchiver unarchiveObjectWithData:]`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:34:34.630

NSKeyedArchived 文件“简单地”是一个属性列表。不过，您需要找出该 plist 的结构。

有一天我发现 Cocotron 的源代码非常有用，因为我试图解码一些 NSKeyedUnarchived 数据：[http](http://code.google.com/p/cocotron/source/browse/Foundation/NSKeyedArchiving/NSKeyedUnarchiver.m) ://code.google.com/p/cocotron/source/browse/Foundation/NSKeyedArchiving/NSKeyedUnarchiver.m （也许看看第 39 行（initForReadingWithData:)，由 unarchiveObjectWithData:（第 164 行）调用。

也许您可以通过这种方式了解更多有关归档对象的信息。

# mysql - 用于空间分析的数据库和 java 库？

> ID：10498863
> 
> 赞同：3
> 
> 时间：2012-05-08T12:43:49.333
> 
> 标签：mysql, hibernate, postgresql, jpa-2.0, postgis

我一直在开发一个为用户存储位置的网络项目。该项目目前使用 MySql 5.5 和 JPA 2 来映射关系数据库，并使用 EJB 3.1 作为中间层。我在 MySql 中以 Decimal 数据类型存储经度和纬度数据。

我想扩展项目，以便用户可以在地图上搜索他/她标记的位置附近的点（GPS 坐标）（通过使用 Google Map API 3）。

在开始转换或更改项目中的组件之前，我需要一些提示和建议。如果可能，请提供教程以及如何实现更改以及使用哪些工具（库、开发工具等）。这是我的问题。

1.  我可以在 MySql 中使用 Spatial 扩展（使用 Point 等数据类型）并将其映射到 JPA 2 支持的实体（如 DataNucleus 库，如果它们受 JPA 2 支持）。那是轻量级的，可以通过持久层自我持久化。
2.  迁移到 PostGIS 和 Postgres（它们似乎有更好的空间支持）是否更好，因为更改数据库需要付出所有的痛苦和努力，然后改用 hibernate。Netbeans 具有 Hibernate 支持，但是在尝试使用 JDBC for PostGis 时，我偶然发现了一些问题。如果我走这条路，需要一个很好的教程才能开始。
3.  使用已经到位的基础设施并计算与哺乳期 A 和 B 的距离。类似于[Jan Philip Matuschek在本文中所做的方式](http://janmatuschek.de/LatitudeLongitudeBoundingCoordinates)

请原谅我对问题进行聚类。问候克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T20:19:10.370

如果您只有点位置，MySQL 的空间扩展通常是可以的，但如果您想在多边形中查找点（即按区域查询），或者使用花哨的索引和搜索算法，它就会开始变得不堪重负。有一个[非常好的交叉比较](http://www.bostongis.com/PrinterFriendly.aspx?content_name=sqlserver2008_postgis_mysql_compare)来帮助显示不同空间数据库之间的差异。

我会看到迁移到 PostgreSQL 和 PostGIS 有更多好处。还有更多的 GIS 应用程序可以天真地与 PostGIS 一起工作，例如 QGIS、Geoserver 等。最新版本的 PostGIS 有[一个 KNN 最近邻搜索运算符](http://postgis.refractions.net/docs/geometry_distance_centroid.html)，可以快速查找，例如几百万行中最近的 25 个点到地图上的特定点（另请参见[此处](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)）。

请参阅JDBC 和 PostGIS[手册](http://postgis.refractions.net/docs/ch06.html#id2821588)。至于 JPA，请参阅[PostGIS 和 JPA 2.0](https://stackoverflow.com/questions/2387170/postgis-and-jpa-2-0)

至于距离计算，请参阅[ST_Distance](http://postgis.refractions.net/docs/ST_Distance.html)和[ST_Distance_Spheroid](http://postgis.refractions.net/docs/ST_Distance_Spheroid.html)。

# .net - Windows 窗体组合框鼠标悬停事件

> ID：10498864
> 
> 赞同：1
> 
> 时间：2012-05-08T12:43:51.877
> 
> 标签：.net, combobox, mouseevent

我正在使用.net 应用程序，除非我将鼠标悬停在打开下拉框的按钮上，否则似乎不会触发鼠标悬停/悬停事件；没有任何悬停在文本输入位置可靠地触发事件。有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:56:37.517

而是使用[ComboBox.MouseEnter事件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)你可以调整那里的逻辑..

# mysql - 仅当字段值唯一时才选择行

> ID：10498872
> 
> 赞同：0
> 
> 时间：2012-05-08T12:44:03.717
> 
> 标签：mysql

我按日期对行进行排序。如果我想选择最后一列中具有唯一值的每一行，我可以用 sql 执行此操作吗？

所以我想选择第一行，第二行，第三行不，第四行我想选择，依此类推。

![在此处输入图像描述](../Images/d6ce7c0dc9cb7086eb5942d7f1c45f01.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:47:58.550

您想要的不是唯一的行，而是每组一个。这可以通过使用`MIN(pk_artikel_Id)`and来完成`GROUP BY fk_artikel_bron`。此方法使用`IN`子查询来获取每个唯一的第一个`pk_artikel_id`及其关联的列，然后使用它来获取外部查询中的剩余列。`fk_artikel_bron``fk_artikel_bron`

```
SELECT * FROM tbl 
WHERE pk_artikel_id IN
  (SELECT MIN(pk_artikel_id) AS id FROM tbl GROUP BY fk_artikel_bron) 
```

尽管 MySQL 最初允许您在`SELECT`列表中添加其余列，避免使用`IN`子查询，但这并不能真正移植到其他 RDBMS 系统。这种方法更通用一点。

它也可以通过`JOIN`针对子查询来完成，这可能会更快，也可能不会更快。很难说没有基准测试。

```
SELECT * 
FROM  tbl
  JOIN (
    SELECT 
      fk_artikel_bron, 
      MIN(pk_artikel_id) AS id
    FROM tbl
    GROUP BY fk_artikel_bron) mins ON tbl.pk_artikel_id = mins.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T12:57:55.600

这类似于迈克尔的答案，但它使用自联接而不是子查询。试试看它的表现如何：

```
SELECT * from tbl t1
LEFT JOIN tbl t2
  ON t2.fk_artikel_bron = t1.fk_artikel_bron
  AND t2.pk_artikel_id < t1.pk_artikel_id
WHERE t2.pk_artikel_id IS NULL 
```

如果您有正确的索引，这种类型的连接通常会执行子查询（因为派生表不使用索引）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T12:48:50.903

这种非标准的，仅限 mysql 的技巧将选择遇到的每个值的第一行`pk_artikel_bron`。

```
select *
...
group by pk_artikel_bron 
```

不管你喜不喜欢，这个查询会产生所要求的输出。

### 已编辑

我似乎在这里受到了打击，所以这是免责声明：

这仅适用于 mysql 5+

虽然 mysql 规范说使用这种技术返回的行是不可预测的（即你可以得到任何行作为遇到的“第一”行），事实上在我见过的所有情况下，你都会得到第一行选择顺序，因此要获得可在*实践*中使用的可预测行（但在未来的版本中可能无法使用，但可能会使用），请从有序结果中进行选择：

```
select * from (
    select *
    ... 
    order by pk_artikel_id) x
group by pk_artikel_bron 
```

# video - 我们如何使用单个图像、pdf 或 doc 文件创建视频帧？

> ID：10498876
> 
> 赞同：0
> 
> 时间：2012-05-08T12:44:35.400
> 
> 标签：video, ffmpeg

我想制作不同格式的视频帧，如 .doc、.pdf 和图像。是否可以？

我在下面找到了命令。ffmpeg -f image2 -i img%d.jpg /tmp/a.mpg

但这将使用多个图像创建。我需要带有单个图像的视频。

任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:01:31.823

这对你有用吗？

```
ffmpeg -y -r 24 -loop_input -vframes 240 -i img.jpg test.mpg 
```

它应该从单个输入帧以 24fps 的速度创建 10 秒 mpg。

# java - 如何使用 Play Framework 测试电子邮件逻辑

> ID：10498878
> 
> 赞同：6
> 
> 时间：2012-05-08T12:44:43.827
> 
> 标签：java, unit-testing, email, testing, playframework-1.x

我有一个扩展 Mailer 的类，并希望对此进行自动测试。

使用模拟邮件程序，我可以将邮件发送到控制台，但如何从自动化测试中测试邮件逻辑？

（有没有类似[Mailer 的 Rails 测试](http://guides.rubyonrails.org/action_mailer_basics.html#mailer-testing)？）

兄弟，图科

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T12:46:52.483

在写这个问题时，我发现了这个链接：[Test mail sent by using Mock Mailer](http://www.facebook.com/note.php?note_id=150545144970035)。

因此，可以使用 play.libs.Mail.Mock 访问通过 Mock mailer 邮寄的邮件，如下所示：

```
String email = Mail.Mock.getLastMessageReceivedBy("joe@example.com"); 
```

邮件作为一个字符串返回，但这总比没有好。

虽然要分享这个，因为我花了一段时间才找到这个。

# sql-server - 弃用 ntext、text 和 image 是否会影响 SQL Server Compact Edition？

> ID：10498882
> 
> 赞同：8
> 
> 时间：2012-05-08T12:44:57.537
> 
> 标签：sql-server, sql-server-ce, sql-server-ce-4

根据[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms187993.aspx)：

> **ntext**、**text**和**image**数据类型将在 Microsoft SQL Server 的未来版本中删除。
> 
> 避免在新的开发工作中使用这些数据类型，并计划修改当前使用它们的应用程序。请改用**nvarchar(max)**、**varchar(max)**和**varbinary(max)**。

这对 SQL Server Compact Edition 有何影响？`varbinary(max)`SQL Server Compact Edition (CE) 4.0 目前不支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:31:16.093

偏离 SQL Server Compact 专家所说的“Microsoft SQL Server ！= Microsoft SQL Server Compact”。

[http://social.msdn.microsoft.com/Forums/en/sqlce/thread/29f05956-cb61-48c4-a6f6-c1e2d9fe5ea5](http://social.msdn.microsoft.com/Forums/en/sqlce/thread/29f05956-cb61-48c4-a6f6-c1e2d9fe5ea5)

如果情况发生变化，我相信 MSFT 会解释旧类型何时被弃用。

# javascript - ie的下拉修复

> ID：10498883
> 
> 赞同：0
> 
> 时间：2012-05-08T12:44:57.773
> 
> 标签：javascript, html, css, user-interface, internet-explorer-8

在 IE 中，当您单击下拉列表时，下拉列表会向上上升，因为其中包含更多值。在Mozilla它的工作正常。有什么建议么？如何让它向下。我也在使用IE8。

```
<s:select theme="simple" key="" id="" value="12" list="#{'1':'1','2':'2','3':'3'
,'4':'4','5':'5','6':'6','7':'7','8':'8','9':'9','10':'10','11':'11','12':'12','13':'13','14':'14','15':'15','16':'16','17':'17','18':'18','19':'19','20':'20','21':'21','22':'22','23':'23','24':'24','25':'25','26':'26','27':'27','28':'28','29':'29','30':'30','31':'31','32':'32','33':'33','34':'34','35':'35','36':'36'}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:02:21.173

不幸的是，这似乎是由浏览器明确处理的，即使在您的 html/javascript 代码之后也是如此。

这意味着如果 IE 检测到它是 a并且由于空间小而`select`能够使其成为*updrop ，它就会。*

或者，您可以使用不会实际呈现为的自定义下拉控件`select`，因此您可以更好地控制它的工作方式。有很多可以使用 JavaScript/jQuery 在线找到。

我个人认为这样的功能可能太麻烦了。

# php - 第二次重新加载服务器错误

> ID：10498885
> 
> 赞同：0
> 
> 时间：2012-05-08T12:45:05.447
> 
> 标签：php, symfony1, symfony-1.4

一段时间后，我在第二次重新加载页面时总是收到内部服务器错误 500。

*   清除缓存修复问题约 10 小时
*   切换浏览器让我再次加载页面，在第二次重新加载时出现错误

未为搜索操作启用缓存。只有一个模块受到影响，其他模块在站点关闭期间工作。

任何想法在哪里看？symfony 错误日志并没有真正帮助请求甚至没有到达 symfony。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:42:05.143

这可能与路由缓存有关。尝试在 factory.yml 中禁用路由缓存，看看是否有帮助。

例如：

```
  路由：
    类：sfPatternRouting
    参数：
      负载配置：真
      后缀： ''
      default_module：默认
      default_action：索引
      调试：%SF_DEBUG%
      日志记录：%SF_LOGGING_ENABLED%
      generate_shortest_url: 真
      extra_parameters_as_query_string：真
      缓存：~

```

# c++ - libstdc++ 中关于 std::list 分配的错误？

> ID：10498887
> 
> 赞同：3
> 
> 时间：2012-05-08T12:45:10.533
> 
> 标签：c++, list, gcc, c++11, std

我最近在使用 libxml++（libxml2 的 C++ 包装器）时遇到了一个非常有趣的不一致。

该库使用默认的 STL 列表容器 ( `std::list<xmlpp::Node*>`) 返回节点列表。由于它是从默认存储库安装的，因此它似乎是在 C++03 模式下构建的（但我正在使用 C++11）。

这里需要注意的是 C++11 改变了工作方式`std::list::size()`。
在 C++03 中，它是 O(n)，`std::distance(begin(), end())`每次调用 - 现在它返回预先计算的值。

这是代码：

```
 /**  Returns the number of elements in the %list.  */
  size_type
  size() const _GLIBCXX_NOEXCEPT
  {
#ifdef __GXX_EXPERIMENTAL_CXX0X__
    return this->_M_impl._M_size;
#else
    return std::distance(begin(), end());
#endif
  } 
```

当我从图书馆收到这样的清单并调用它时，事情就开始发生`size()`了。在那里我读到了像 140734320138496 这样的值，它清楚地表明了一个未初始化的计数器：在原始列表中完全没有计数器。
当然，手动调用`std::distance (list.begin(), list.end())`确实有效。

问题是 - 这可以被认为是 GCC/libstdc++ 中的一个错误，还是我永远不应该链接在不同 GCC 模式下构建的可执行文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:49:11.687

我认为这违反了单一定义规则。您的代码编译时使用的定义与`std::list`您的库使用的定义不同。（这是未定义的行为，不是 GCC 错误。）

您应该重新编译您的库（或重新编译您的代码）。

# javascript - 如何动态添加jquery选项卡

> ID：10498891
> 
> 赞同：2
> 
> 时间：2012-05-08T12:45:37.863
> 
> 标签：javascript, jquery, html, jquery-tabs

我想动态查询标签，但控制台上有错误。

请[访问此链接](http://jsfiddle.net/6VrwD/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:47:44.357

`$("#tabs").tabs("add" , "http://google.com" , "A newTab" , [2] );`

您缺少前导 $。

# ant - Ant：如何比较时间戳？

> ID：10498894
> 
> 赞同：4
> 
> 时间：2012-05-08T12:45:45.383
> 
> 标签：ant, ant-contrib

在一个长时间运行的 Ant 脚本中，我有一个大约每秒调用一次的目标。（这可能不是一件好事，但让我们暂时接受它。）
我只希望它最后一次实际执行至少在五分钟前执行。

解决方案的一个想法是维护一个`lastRunTimestamp`属性，并将当前时间与其进行比较。

**问题：**如何比较 Ant 中的时间戳？

另一个受欢迎的解决方案是仅在指定的时间间隔执行目标的方法，这样就不需要检查。

我正在使用 Ant 1.7.1 和 ant-contrib。

任何想法都非常感谢 - 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:41:03.183

有趣的问题，而且比我最初想象的更难回答。

您可以使用该`<tstamp>`任务设置五分钟前的时间戳：

```
<tstamp>
  <format property="time_stamp"
      offset="-5"
      unit="minutes"
      pattern="MM/dd/yyyy hh:mm:ss aa"/>
</tstamp> 
```

获得该时间戳后，您可以使用任务的*lastmodified*条件`<condition>`来查看特定文件是否已更新。如果您没有文件，您可以使用`<touch>`任务创建一个。

```
<condition property="has.been.modified">
     <islastmodified dateTime="${time_stamp}" mode="after">
        <file file="${touch.file}"/>
     </islastmodified>
</condition> 
```

唯一的问题是默认属性是不可变的。一旦设置，您将无法更改它们。幸运的是，您正在使用`ant-contrib`并`ant-contrib`允许您通过变量任务来更改它。

# javascript - 通过jquery选择所有具有类名的元素以特定字符串开头

> ID：10498896
> 
> 赞同：1
> 
> 时间：2012-05-08T12:46:05.757
> 
> 标签：javascript, jquery

这是我的 HTML DOM：

```
<div id="d1" class="Addable"><span class="yak-bak-nak vok-do-maria"> <p>Goola1</p>
<span>volaa</span></span></div>

<div id="d2" class="Addable"><span class="yak-bak-val vok-do-maria"> <p>Goola2</p></span></div>

<div id="d3" class="Addable"><span class="vok-do-maria yak-bak-nak"> <p>Goola3</p></div>

<div id="d4" class="Addable"><span class="vok-do-maria yak-bak-nak"> <p>Goola4</p></div>

<input type="button" class="Doop" value="Do" /> 
```

所以我想删除所有`divs`以“yak-bak”开头的类名，这意味着以上所有内容。

所以我试试这个脚本：

```
$('.Doop').click(function () {

    $('span[class|="yak-bak"]').parent('div').remove();
}); 
```

但只有 d1 和 d2 删除和 d3, d4 仍然存在，因为`yak-bak`课程排在第二位，我也尝试这样做：

```
$('.Doop').click(function () {

    $('span[class^="yak-bak"]').parent('div').remove();
}); 
```

那么你的建议是什么？问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T12:54:37.123

要定位具有多个类的元素，其中一个在属性类的开头或中间以“yak-bak”开头，您可以使用：

**查询**

```
$("div[class^='yak-bak'],div[class*=' yak-bak']").parent('div').remove(); 
```

*这将选择类以“yak-bak”开头的元素和包含由“yak-bak”声明的类的元素。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:47:32.530

```
$('div').filter(function() {
  return $(this).has('span[class^="yak-bak"]');
}).remove(); 
```

**[演示](http://jsfiddle.net/QStkd/18/)**

或者

```
$('div').filter(function() {
  return $(this).has('span[class^="yak-bak"], span[class*=" yak-bak"]');
}).remove(); 
```

但是第一个就足够了。

# c - 是否可以中断一个进程并检查它以便稍后恢复它？

> ID：10498897
> 
> 赞同：3
> 
> 时间：2012-05-08T12:46:22.357
> 
> 标签：c, linux, x86-64, checkpoint

假设您有一个应用程序，它正在消耗所有的计算能力。现在你想做一些其他必要的工作。在 Linux 上是否有任何方法可以中断该应用程序并检查其状态，以便稍后它可以从它被中断的状态中恢复？

特别是我对一种可以在另一台机器上停止并重新启动应用程序的方式感兴趣。这也可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:52:02.027

一般来说，检查点进程是不可能的（因为进程不仅是一个地址空间，而且还有其他资源，如文件描述符和 TCP/IP 套接字......）。

在实践中，您可以使用一些检查点库，如[BLCR](https://ftg.lbl.gov/projects/CheckpointRestart/)等。在某些限制条件下，您可以将检查点映像从一个系统迁移到另一个系统（非常类似于源系统：相同的内核、相同版本的库和编译器， ETC。）。

也可以在[虚拟机](http://en.wikipedia.org/wiki/Virtual_machine)级别迁移映像。其中一些非常适合这一点。

您还可以使用自己的检查点机制来设计和实施您的软件。然后，您应该考虑使用[垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)技术和术语。还要查看 Emacs （或[Xemacs](http://www.xemacs.org/Architecting-XEmacs/unexec.html)）[unexec.c](http://sid.ethz.ch/debian/emacs.app/emacs-23.3/src/unexec.c)文件（严重依赖机器）。

一些语言实现和运行时具有检查点原语。[SBCL](http://www.sbcl.org/)（一个免费的 Common Lisp 实现）能够[保存核心图像](http://www.sbcl.org/manual/index.html#Saving-a-Core-Image)并在以后重新启动它。SML/NJ 能够[导出图像](http://www.cs.cmu.edu/afs/cs/local/sml/common/smlguide/smlnj.htm#export)。[Squeak](http://www.squeak.org/)（Smalltalk 实现）也有这种能力。

[作为检查点的另一个示例，GCC 编译器实际上能够通过使用持久性技术](http://gcc.gnu.org/onlinedocs/gccint/Type-Information.html#Type-Information)来编译单个`*.h`头文件（到预编译的头文件，它是 GCC 堆的持久映像）。

阅读有关[正交持久性](http://en.wikipedia.org/wiki/Orthogonal_persistence)的更多信息。这也是一个研究课题。[序列化](http://en.wikipedia.org/wiki/Serialization)也是相关的（您可能希望使用 JSON、YAML、XML 等文本格式）。您还可以使用[休眠](http://en.wikipedia.org/wiki/Hibernation_%28computing%29)技术（在整个系统级别）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:49:50.420

从手册页`man kill`

中断进程需要两个步骤：

停止

```
kill -STOP <pid> 
```

和

接着说

```
kill -CONT <pid> 
```

`<pid>`进程ID在哪里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T12:48:35.023

类型：`Control + Z`暂停一个进程（它发送一个 SIGTSTP）

然后`bg`/`fg`在后台或前台恢复它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:57:28.687

在 POSIX 上检查单个进程**基本上是不可能的。**那是因为进程不是独立的。他们可以互动。如果没有别的，一个进程有一个唯一的进程 ID，它可能存储在内部某个地方，如果你用不同的进程 ID 恢复它，所有的地狱都可能会崩溃。如果进程使用任何类型的锁/同步原语，则尤其如此。当然，您也不能使用它最初拥有的*相同*进程 ID 恢复进程，因为这可能会被新进程占用。

也许您可以通过将进程（和线程）ID 设置为 128 位左右来解决问题，这样它们是普遍唯一的......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T12:52:47.490

在 linux 上，可以通过发送此进程 STOP 信号来实现。请通过发送 CONT 信号来恢复它。请参考杀死手册。

# c# - 从多个单选按钮 MVC3 中获取值

> ID：10498899
> 
> 赞同：0
> 
> 时间：2012-05-08T12:46:27.537
> 
> 标签：c#, asp.net-mvc-3

我的视图中有一个表格（见下图），我需要从单选按钮组中收集值。然后我按下下一个按钮，我有一个列表，其中包含每个表格行的值。这是我在视图中的代码。

```
@foreach (var item in ViewBag.convertedSubjectsList)
    {
      <tr>
         <td>
           <br />
           <br />
           @item.Part
           <br />
           <br />
        </td>
        <td>
           @item.Name
        </td>
        <td>
         <form>
            <input type="radio" name="used" value="yes" /> 
             @Resources.Resources.SubjectRadioYes<br />
            <input type="radio" name="used" value="no" /> 
             @Resources.Resources.SubjectRadioNo
          </form>
         </td>
      </tr>
    } 
```

这可能吗？

![见图片](../Images/dfbf8e33561317054be999d98878d9ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:00:58.187

不同的东西

您所有的单选按钮都应该采用相同的形式

```
@using (Html.BeginForm()) {
    //yourcode
} 
```

然后我会将“convertedSubjectList”作为模型（或用作模型的 ViewModel 的一部分）。

假设模型是 type `IEnumerable<ConvertedSubject>`；

然后循环并检索元素

```
@for (int i = 0; i < Model.Count; i++) {
    <tr>
        <td>@Html.DisplayFor(m => Model[i].Part)</td>
         <td>@Html.Displayfor(m => Model[i].Name)</td>
         <td>@Html.RadioButtonYesNoFor(m => Model[i].xxx)</td>//name of the property used for radio value
         //you could use a CheckBoxFor, if you have only "yes/no", but as you want
     </tr>
} 
```

一个小 HtmlHelper

```
public static IHtmlString RadioButtonYesNoFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
        {
            var stringBuilder = new StringBuilder();
            stringBuilder.Append(string.Format("{0} {1}", html.RadioButtonFor(expression, true).ToHtmlString(), "Yes"));
            stringBuilder.Append(string.Format("{0} {1}", html.RadioButtonFor(expression, false).ToHtmlString(), "No"));
            return MvcHtmlString.Create(stringBuilder.ToString());
        } 
```

然后，您应该能够在发布的操作中将您的数据作为 IList 取回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:26:53.210

看法：

```
<form method=post action="@Url.Action("Save")">
<table>
@foreach (var item in ViewBag.convertedSubjectsList)
{
  <tr>
    <td>
      <br /><br />
      @item.Part
      <br /><br />
    </td>
    <td>
      @item.Name
    </td>
    <td>
      <input type="radio" name="@item.Part" value="yes" />
      Yes<br />
      <input type="radio" name="@item.Part" value="no" />
      No
    </td>
  </tr>
}
</table>
<input type="submit" value="Submit" />
</form> 
```

控制器：

```
public ActionResult Save(FormCollection form)
{
    foreach (var item in form.AllKeys)
    {
        string value = form[item];
        // save data 
    }
} 
```

# android - jsonfactory android错误

> ID：10498900
> 
> 赞同：0
> 
> 时间：2012-05-08T12:46:33.140
> 
> 标签：android, google-calendar-api

我正在尝试在我的 Android 4.0 项目中访问 Google 日历。当我尝试这样做时，我收到以下错误消息：

> java.lang.NoClassDefFoundError：org.codehaus.jackson.JsonFactory

这是我运行应用程序后立即显示的消息。我已经导入了所有必要的 jar 文件，并且还在我的代码中编写了必要的导入语句。我无法确定问题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:52:37.580

确保您正确添加库。[这里](https://stackoverflow.com/a/3643015/1376688)有一个答案很好地解释了希望这有帮助

# css - 位置固定在 Internet Explorer 上

> ID：10498904
> 
> 赞同：0
> 
> 时间：2012-05-08T12:46:47.287
> 
> 标签：css, internet-explorer

我想在页面底部修复我的页脚。它在 Internet Explorer 上运行，更改文档类型会改变我页面中的许多内容，因此我无法使用它。

还有其他解决方案吗？

```
.footer{
    width:100%;
    height:49px;
    background-image:url(../img/footer-bg.gif);
    background-repeat:repeat-x;
    bottom:0;
    left:0;
    right:0;
    z-index:99;
    float:left;  
    overflow:hidden;
    position:fixed;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-08T14:19:37.077

您可以使用：

*   html #element { 位置：绝对；顶部：表达式（document.compatMode=="CSS1Compat"? document.documentElement.scrollTop+100+"px" : body.scrollTop+100+"px"); }

替换 100+"px"

# regex - 三个非数字字符

> ID：10498905
> 
> 赞同：0
> 
> 时间：2012-05-08T12:46:47.037
> 
> 标签：regex, vb.net

我想检查一个 Vb.net 字符串是否包含至少 3 个非空白字符，其中至少有一个非数字字符。

任何人都可以帮助为它创建正则表达式吗？

> ab c 有效
> 
> 2c 有效
> 
> abc 有效
> 
> 1 无效
> 
> 123 无效

我试过这个

```
^[A-Z]{3}$ 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:07:06.547

您可以使用正向预读来确保至少有一个字符不是数字（在此示例中为 AZ），然后需要三个非空白字符 ( `\S`) 由零个或多个空白字符 ( `\s`）。

```
(?=.*[A-Z])\S\s*\S\s*\S 
```

# struts2 - JasperReports：Struts 插件将 Map 作为参数传递

> ID：10498906
> 
> 赞同：0
> 
> 时间：2012-05-08T12:46:49.583
> 
> 标签：struts2, jasper-reports

这是我在这里的第一个问题！

我正在尝试将 Map 作为参数从 struts 操作传递给报告。*我已将地图插入到正在传递给jrxml*文件的 reportParameters 地图中。

我的问题是是否可以在*jrxml*文件中检索此 Map。

更准确地说，我这样声明：

```
<parameter name="reportParams.testMap" class="java.util.Map"/> 
```

我想像这样使用它：

```
<textField>
    <reportElement style="StyleData" x="240" y="0" width="100" height="23"/>
    <textElement textAlignment="Left" verticalAlignment="Top"/>
    <textFieldExpression><![CDATA[testMap.get("AR")]]></textFieldExpression>
</textField> 
```

可能吗？因为我的应用程序服务器日志中不断出现此错误：

```
No such property: testMap for class: Blank32A4_1336385977531_38171
Error evaluating expression : Source text : testMap.get("AR")
Error evaluating expression : Source text : testMap.get("AR") 
```

我的动作类如下所示：

```
@Injectable
@Results({
@Result(name = "success", type = "jasper", params={"location",
    "report.jasper",
    "connection", "statsConnection",
    "dataSource", "translations",
    "reportParameters","reportParams",
    "format","PDF"})
})
public class LocalMapStatisticNewAction extends ActionSupport{

    ...

    public String execute() {
            reportParams = new Hashtable<String, Object>();
            testMap = new Hashtable<String, String>();
            testMap.put("AR", "Argentina");
            testMap.put("ES", "Spain");
            reportParams.put("testMap", testMap);

            //Jasper code here
    }

    ...

    public Map<String, Object> getReportParams() {
        return reportParams;
    }
} 
```

任何提示都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:19:43.347

看起来它可能就像您通过错误的名称引用参数一样简单。

```
testMap.get("AR") 
```

您没有名为`testMap`. 您有一个名为`reportParams.testMap`. 此外，您需要参考如下参数：

```
$P{testMap}.get("AR") 
```

重命名参数或重命名参数的引用，应该没问题。

# c++ - Boost 快速池分配器的函数指针有问题？

> ID：10498911
> 
> 赞同：4
> 
> 时间：2012-05-08T12:47:06.460
> 
> 标签：c++, boost, map, function-pointers, allocator

这是一个 Boost 错误还是我做错了什么？

```
#include <map>
#include <boost/pool/pool_alloc.hpp>

int main()
{
    typedef const std::string key;
    typedef double* (*value)(const int&);
    std::map<key, value, std::less<key>> map_with_standard_allocator; // works
    std::map<key, value, std::less<key>, boost::fast_pool_allocator<std::pair<const key, value> > > map_with_boost_allocator; // fails
} 
```

最后一行无法在带有 Boost 1.40 和 1.48 的 MS Visual Studio 2008 下编译。不过，它在 g++ 4.5.3 (Cygwin) 下编译得很好。

错误是：

```
1>Compiling...
1>main.cpp
1>C:\UniLib1\trunk\External\boost/pool/pool_alloc.hpp(205) : error C2535: 'const std::basic_string<_Elem,_Traits,_Ax> *boost::fast_pool_allocator<T,UserAllocator,Mutex,NextSize>::address(const std::basic_string<_Elem,_Traits,_Ax> &)' : member function already defined or declared
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>,
1>            T=const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,
1>            UserAllocator=boost::default_user_allocator_new_delete,
1>            Mutex=boost::details::pool::default_mutex,
1>            NextSize=32
1>        ]
1>        C:\UniLib1\trunk\External\boost/pool/pool_alloc.hpp(202) : see declaration of 'boost::fast_pool_allocator<T,UserAllocator,Mutex,NextSize>::address'
1>        with
1>        [
1>            T=const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,
1>            UserAllocator=boost::default_user_allocator_new_delete,
1>            Mutex=boost::details::pool::default_mutex,
1>            NextSize=32
1>        ]
1>        c:\Program Files\Microsoft Visual Studio 9.0\VC\include\xtree(137) : see reference to class template instantiation 'boost::fast_pool_allocator<T,UserAllocator,Mutex,NextSize>' being compiled
1>        with
1>        [
1>            T=const std::basic_string<char,std::char_traits<char>,std::allocator<char>>,
1>            UserAllocator=boost::default_user_allocator_new_delete,
1>            Mutex=boost::details::pool::default_mutex,
1>            NextSize=32
1>        ]
1>        c:\Program Files\Microsoft Visual Studio 9.0\VC\include\map(78) : see reference to class template instantiation 'std::_Tree<_Traits>' being compiled
1>        with
1>        [
1>            _Traits=std::_Tmap_traits<key,value ,std::less<key>,boost::fast_pool_allocator<std::pair<key,value >>,false>
1>        ]
1>        .\main.cpp(9) : see reference to class template instantiation 'std::map<_Kty,_Ty,_Pr,_Alloc>' being compiled
1>        with
1>        [
1>            _Kty=key,
1>            _Ty=value,
1>            _Pr=std::less<key>,
1>            _Alloc=boost::fast_pool_allocator<std::pair<key,value >>
1>        ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:04:59.613

这不是 VS2008 中的错误（正如我在对此答案的早期编辑中错误地声称的那样）。C++03 标准要求关联容器的键类型，如`std::map`，必须是“可分配的”（根据 23.1.2“关联容器”中的表 69）。并且 a`const std::string`是不可分配的。请注意，C++11 标准似乎放宽了这一要求，但新标准自 VC++ 2008 起不再适用。

我不清楚是否需要编译器来诊断尝试`std::map`与不可分配键一起使用的代码，所以我认为不能声称 GCC 或 VC++ 2010 不正确地接受此代码（我认为它属于未定义的代码区域可以按您的预期工作，即使不能保证它会工作）。但是很明显，VC++ 2008 拒绝编译它是可以的。

综上所述，我认为 VC++ 2008 的库参数化`address()`映射键而不是映射元素上的分配器函数仍然值得怀疑（如果您有兴趣，请参阅此答案的第一次编辑以获取详细信息），但我认为没有那里是真正的错误，因为`std::pair<>`用于保存地图元素将始终设置为关键部分将与整个元素位于相同的地址。

# php - “wp_deregister_script”和查询字符串

> ID：10498913
> 
> 赞同：2
> 
> 时间：2012-05-08T12:47:22.480
> 
> 标签：php, javascript, performance, wordpress

我在 functions.php 中使用 wp_deregister_script 来仅在我需要的页面上加载 javascript 文件。

这很好用 - 除非 javascript 使用查询字符串......

我的代码如下：

```
add_action( 'wp_print_scripts', 'my_deregister_javascript', 100 );
if ( !is_page('167') ) { 
wp_deregister_script( 'iphorm' ); 
wp_deregister_script( 'iphorm-plugin' ); 
wp_deregister_script( 'jquery-form' ); 
wp_deregister_script( 'jquery-smooth-scroll' ); 
wp_deregister_script( 'qtip' );
wp_deregister_script( 'uniform' );
wp_deregister_script( 'infield-label' );
} 
```

这适用于所有没有查询字符串的 js 文件，但***iphorm.js?ver=1.3.5 之***类的文件仍在加载。

有任何想法吗？

# c# - 无法将数据插入 WPF 中的本地数据库

> ID：10498919
> 
> 赞同：3
> 
> 时间：2012-05-08T12:47:34.433
> 
> 标签：c#, wpf, .net-4.0, database-connection

在一个项目中，我有一个本地数据库，（我正在使用datagrid查看数据），但问题是当我使用插入查询插入数据库时​​，插入不持久，即当我重新运行应用程序时，数据库未更改，更改未反映在数据库视图中（在 Visual Studio 中查看表数据）。

插入查询是：

```
string dbCon = new     System.IO.FileInfo(System.Reflection.Assembly.GetExecutingAssembly().Location).DirectoryName + "\\MyDatabase.sdf";
        SqlCeConnection dbconnection = new SqlCeConnection("datasource=" + dbCon);

        dbconnection.Open();

        String Insert = "insert into MainTable(LineID,Date,Connection_Type)  Values('5','5/8/2012','commercial')";
SqlCeCommand cmd = new SqlCeCommand(Insert, dbconnection);

        //// Execute the command
        cmd.ExecuteNonQuery();

        dbconnection.Close(); 
```

现在，当此代码运行时，数据网格会更新，但更改不是永久性的。我做错了什么？我正在使用 Visual Studio 2010 Ultimate 和 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:35:17.570

1.  `Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\MyDatabase.sdf"`是您的应用程序文件夹的路径。根据安装选项，您的文件可能不会安装在那里。使用[此处](https://stackoverflow.com/a/13296809/22437)`"DataSource=|DataDirectory|\\MyDatabase.sdf;..."`描述的连接字符串。

2.  即使您的数据实际存储在那里，根据用户权限，用户也可能无法写入该目录。此外，当用户卸载或更新您的应用程序时，他的数据将被删除。人们不喜欢那样。您应该将数据复制到用户可写文件夹；较早的链接也显示了如何做到这一点。

3.  如果您有一个带有数据库的 Visual Studio 项目作为项目的一部分，它可能会将“复制到输出目录”属性设置为“复制”。这意味着每次在调试器中运行时，都会从源项目中复制一个全新的数据库，覆盖之前的所有内容。任何更改都将在此临时输出文件夹中，而不是在您的原始源数据中。当您再次调试应用程序时，临时副本将被删除。[此答案](https://stackoverflow.com/a/13313075/22437)中的进一步解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:03:51.847

您的应用程序在哪个文件夹中运行？如果它位于 Program Files 树中，则您可能没有对 sdf 文件的写入权限（尤其是在 Windows 7 上，除非您已关闭[UAC](http://en.wikipedia.org/wiki/User_Account_Control)或在执行之前提升您的应用程序）。

即使这不是您的短期问题，我也建议您为 sdf 文件找到不同的位置，例如[AppData](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)位置之一。期望能够写入您的安装位置并不是保证，这取决于您的应用程序的部署方式和位置。

# c# - UserControl IsPressed 没有任何回报

> ID：10498923
> 
> 赞同：1
> 
> 时间：2012-05-08T12:47:41.233
> 
> 标签：c#, .net, wpf, xaml, user-controls

我在 Expression Blend 中创建了 UserControl(Button)

XAML：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="Marica.FullClient.Graphics.Node"
x:Name="UserControl" Height="360" Width="500" Margin="40">

<UserControl.Resources>
    <Style x:Key="ButtonStyle1" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.StrokeThickness)" Storyboard.TargetName="rectangle">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Rectangle x:Name="rectangle" Stroke="Red" Fill="{TemplateBinding Background}"/>
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="StrokeThickness" TargetName="rectangle" Value="13"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="StrokeThickness" TargetName="rectangle" Value="13"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid x:Name="LayoutRoot">
    <Button Name="NodeButton" Style="{DynamicResource ButtonStyle1}"/>
    <StackPanel Orientation="Vertical">
        <TextBlock
        x:Name="NodeName"
        x:FieldModifier="public"
        Text="Property"
        Margin="8,100,8,8"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        TextWrapping="Wrap" 
        TextAlignment="Center"
        FontFamily="Segoe Print"
        FontWeight="Bold" 
        Foreground="White"
        FontSize="50"/>

        <TextBlock
        x:Name="CategoryName"
        x:FieldModifier="public"
        Text="Property"
        Margin="8"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        TextWrapping="Wrap" 
        TextAlignment="Center"
        FontFamily="Segoe Print"
        FontWeight="Bold" 
        Foreground="White"
        FontSize="25"/>
    </StackPanel>
</Grid> 
```

当我将它悬停在控件上时，笔划宽度变得更大，但是当我单击时，什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:08:57.007

我希望在 IsPressed 上你想做缓动动画，但它似乎不起作用。好吧，好消息，你的动画很好，你只需要调整它来做你想做的事情就可以看到它真的在工作。使用 KeyTime 和 Value

例如，将其更改为：

```
<EasingDoubleKeyFrame KeyTime="00:00:02" Value="30" /> 
```

你会看到它开始工作/做更多

# java - 实现从一个 JPanel 拖放到另一个 JPanel

> ID：10498927
> 
> 赞同：4
> 
> 时间：2012-05-08T12:47:45.650
> 
> 标签：java, swing

我是 Swing 中拖放的新手。我有一个`JPanel`可以绘制带有叠加在其上的标题的图像。我想在这个上实现拖放`JPanel`，但是在浏览了一些文档和教程之后，我没有找到任何关于如何为这种类型的组件完成的可用指针。对于初学者来说，它没有`setDragEnabled`功能。

我可以做一个`JPanel`可拖动的吗？我想使用这个 DnD 操作将某个对象的引用从一个面板传递到另一个面板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:17:35.933

您可以在任何`JComponent`. 见[`setTransferHandler`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setTransferHandler%28javax.swing.TransferHandler%29)方法。

该`setDragEnabled`方法通常在可以在 JDK 中实现良好默认 D&D 行为的组件上提供。在这种情况下，您可以通过调用该方法来激活默认的 D&D。

`JPanel`他们（= Swing 开发人员）可能想不出任何像样的默认 D&D 行为，因此您必须实现自己的`TransferHandler`. 我强烈建议在开始之前阅读[拖放教程](http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T14:08:16.113

可能这可以帮助你。

[Java中复杂自定义对象的拖放](http://softwareisart.blogspot.com/2011/11/drag-and-drop-of-complex-custom-objects.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:51:02.767

我不知道听起来有多可行，但是当我需要拖放面板时，我是这样做的：

Firstable 我为可拖动的面板和容器实现了动作事件，它既可以是

我为选定的父级、选定的子级和当前面板使用了静态变量

当鼠标悬停在面板上时，您将其设置为当前面板

当您单击时，鼠标按下，无论如何，您检查 currentpanel 是否是被点击的面板并设置为子面板

当鼠标在面板上且子面板不为空时，似乎您正在拖动，一旦您释放鼠标，当前面板将变为父面板

你必须添加一些验证。

如果正在拖动面板，您可以使用自己的实现，它可以跟随鼠标坐标或仅突出显示它并突出显示父级，我使用最后一个选项来模拟拖动

* * *

好的，我写了这个，太有问题了，但这就是想法：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JTextField;

/**
 *
 * @author porfiriopartida
 */
public class DraggablePanel extends JDesktopPane implements ContainerPanel{
    public ContainerPanel parent;

    static DraggablePanel over;
    static ContainerPanel overParent;
    static DraggablePanel dragging;
    static ContainerPanel draggingParent;

    public DraggablePanel(){
        this(null);
    }
    public DraggablePanel(ContainerPanel parent){
        this.parent = parent;
        setBorder(BorderFactory.createLineBorder(Color.black));
        setBounds(0,0,100,100);

        if(parent != null)
            addMouseListener(new MouseAdapter(){
            @Override
            public void mouseEntered(MouseEvent me) {
                DraggablePanel src = (DraggablePanel) me.getSource();
                DraggablePanel.over = src;
                DraggablePanel.overParent = DraggablePanel.over.parent;
            }

            @Override
            public void mouseExited(MouseEvent me) {

            }

            @Override
            public void mouseReleased(MouseEvent me) {
                if(DraggablePanel.over != null && DraggablePanel.dragging != null && DraggablePanel.overParent != null){
                    Rectangle bounds = DraggablePanel.dragging.getBounds();
                    bounds.x = me.getX();
                    bounds.y = me.getY();

                    //Remove child from parent
                    DraggablePanel.dragging.parent.removePanel(DraggablePanel.dragging);

                    if(DraggablePanel.dragging.parent != DraggablePanel.overParent){
                        //add child to new parent
                        DraggablePanel.overParent.addPanel(DraggablePanel.dragging, bounds);
                    }
                    else{
                        //same parent selected
                        DraggablePanel.dragging.parent.addPanel(DraggablePanel.dragging, bounds);
                    };
                    DraggablePanel.dragging.parent = DraggablePanel.overParent;
                }

                //cleaning variables
                DraggablePanel.dragging = null;
                DraggablePanel.over = null;
                DraggablePanel.draggingParent = null;
                DraggablePanel.overParent = null;

            }

            @Override
            public void mousePressed(MouseEvent me) {
                DraggablePanel.dragging = (DraggablePanel) me.getSource();
                DraggablePanel.draggingParent = DraggablePanel.dragging.parent;
            }
        });

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseEntered(MouseEvent me) {
                super.mouseEntered(me);
                ContainerPanel src = (ContainerPanel) me.getSource();
                DraggablePanel.overParent = src;
                if (DraggablePanel.draggingParent == null || DraggablePanel.draggingParent == src) {
                    setBorder(BorderFactory.createLineBorder(Color.BLACK, 2));
                } else {
                    setBorder(BorderFactory.createLineBorder(Color.blue, 2));
                }
            }

            @Override
            public void mouseExited(MouseEvent me) {

            }

            @Override
            public void mouseReleased(MouseEvent me) {
            }
        });
    }

    @Override
    public void addPanel(DraggablePanel panel) {
        panel.parent = this;
        add(panel);

            repaint();
            revalidate();

            try {
            getParent().repaint();
        } catch (Exception e) {
        }

    }
    @Override
    public void addPanel(DraggablePanel panel, Rectangle bounds) {
        setBounds(bounds);
        addPanel(panel);
    }

    @Override
    public void removePanel(DraggablePanel panel) {
        remove(panel);
    }

    public static void main(String args[]){
        JFrame frame = new JFrame();
        frame.setLayout(new GridLayout(1,1));
        JTextField tf = new JTextField("textfield");
        JButton btn = new JButton("Button");

        DraggablePanel desktop = new DraggablePanel();
        frame.add(desktop);

        DraggablePanel p1 = new DraggablePanel(desktop);
        p1.setLayout(new GridLayout(2,1));
        p1.add(tf);
        p1.setBounds(0,0,100,50);
        tf.setBounds(5,5,80,30);

        DraggablePanel p2 = new DraggablePanel(desktop);
        p2.setLayout(new GridLayout(2,1));
        p2.add(btn);
        p2.setBounds(50,50,50,30);
        btn.setBounds(5,5,30,20);

        desktop.add(p1);
        desktop.add(p2);

        frame.setPreferredSize(new Dimension(600,400));
        frame.pack();
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

# ibatis - 一个 Mybatis mapper XML 配置可以包含在另一个 mapper 配置中吗？

> ID：10498937
> 
> 赞同：0
> 
> 时间：2012-05-08T12:48:17.083
> 
> 标签：ibatis, mybatis

我想要做的是将各种`<sql>...</sql>`块放在 Shared.xml 文件中，然后让更具体的文件包含它们。

像这样的东西：

**mybatis-config.xml**

```
<configuration>
    <mappers>
        <mapper resource="Shared.xml"/>
        <mapper resource="Custom1.xml"/>
        <mapper resource="Custom2.xml"/>
        <mapper resource="Custom3.xml"/>
    </mappers>
</configuration> 
```

**共享.xml**

```
<mapper namespace="com.company.SharedMapper">       
    <sql id="someSQL">
        SELECT 1;
    </sql>          
</mapper> 
```

**自定义1.xml**

```
<mapper namespace="com.company.CustomMapper1">      
    <select id="getSomeData" resultMap="CustomResultMap">
        <include refid="someSQL"/>
    </select>               
</mapper> 
```

显然，这是我想要的一个非常简化的版本，但希望它足以描述我的目标。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:20:51.910

是的，你可以，这是支持的。如果首先读取依赖的 xml，MyBatis 将在加载其余 xml 片段时再次重试。

# tridion - 使用 SDL Tridion 2011 核心服务创建包含必填字段的空白虚拟组件

> ID：10498938
> 
> 赞同：-2
> 
> 时间：2012-05-08T12:48:18.783
> 
> 标签：tridion

我想使用核心服务在 SDL Tridion 2011 中创建一个空白组件。我在流程开始时拥有的唯一信息是 Schema URI。Schema 可以包含任何类型的字段（文本、rtf、数字日期、嵌入等），其中一些可能是强制性的。

我知道对于必填字段，我需要在其中保存一些虚拟值，这是可以接受的，因为稍后将手动更改它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T12:57:36.627

首先 - 您确保架构中的所有字段都设置为可选，否则这将永远无法工作。

第二 - 你保存。

当可选字段没有值时，它将没有 XML 表示。如果您有一个定义如下组件的架构：

*   字段1
*   字段2
*   字段3

当所有字段都是可选的并且您在字段 2 中保存了一个值时，Tridion 将存储以下内容：

```
<Content xmlns="yourNamespace"><Field2>SomeValue</Field2></Content> 
```

如果您的某个字段不是强制性的，那么您必须提供一个值。如果您使用的是 CoreService，那么您可以使用`ReadSchemaFields`类来获取字段和有关它们的一些信息 - 什么类型、强制/可选等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T14:23:30.533

查看您的问题/要求以了解您到底在寻找什么，这样我们就可以回答最好的和相关的。

您是否在询问“如何使用核心服务编写用于创建组件的通用代码？” 而不是创建具有预先知道所有字段的特定架构的组件。

如果那是您正在寻找的内容，那么您需要执行以下操作：

1.  您需要使用 CoreService 读取架构字段（因为您知道架构 URI）
2.  现在您知道需要为其创建内容的字段类型（嵌入式/组件链接等）
3.  在他的回答中使用“Puf”指向的链接。

请注意，如果该字段在 Tridion Schema 中标记为必填项，则您必须填写一个值，并且它必须与 schema 中定义的字段类型匹配。

通过核心服务示例代码读取模式字段可以在[这里找到](https://stackoverflow.com/questions/9922827/faulted-state-error-while-creating-component-with-core-service)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T14:00:02.120

通过核心服务更新组件的字段已在此处得到解答：[在 SDL Tridion 2011 中使用核心服务更新组件](https://stackoverflow.com/questions/10069726/updating-components-using-the-core-service-in-sdl-tridion-2011/10073979#10073979)

该帖子指向您可以在此处找到的帮助程序类：[使用 SDL Tridion 2011 中的核心服务更新组件](https://stackoverflow.com/questions/10069726/updating-components-using-the-core-service-in-sdl-tridion-2011/10073979#10073979)

如果这些不能帮助您创建组件，我建议您发布您的代码，而不是要求我们为您编写它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T03:56:16.650

我们询问用例，因为为特定模式填写特定字段的代码仅适用于一种环境。可以自动确定字段的代码是可重用的。

如果用例用于具有内联编辑（Experience Manager 或 SiteEdit）的 Tridion 设置，那么正确的方法是内容/组件类型。这些定义了一个带有“垃圾默认值”的参考组件，对作者的说明，甚至保存位置上下文。

如果用例是允许作者创建虚拟组件的能力，这是开箱即用的：

1.  `CTRL+C`
2.  `CTRL+V`

创建“参考组件”需要一次性设置。当然，我们可以通过使用核心服务复制项目来模仿这种行为（如果“无标题的副本”不是一个合适的名称）。

在这种情况下，我还将复制一份——请参阅[使用核心服务创建 Tridion 项目的通用解决方案](https://stackoverflow.com/questions/9599647/create-an-item-in-tridion-2011-using-core-service)。

*   需要默认值的字段可以在架构中具有实际默认值。
*   “垃圾值”对作者没有多大帮助，始终考虑良好的默认值，例如在字段的情况下进行适当的选择或说明（也许）。10 秒的更改几乎不会花费任何开发成本，但会影响所有未来的组件和创建它们的作者。

# codeigniter - DataMapper 自关系模型

> ID：10498943
> 
> 赞同：0
> 
> 时间：2012-05-08T12:48:35.290
> 
> 标签：codeigniter, datamapper, relationships

嗨，我正在将 CodeIgniter 与 DataMapper 一起使用，并且确实需要一些帮助来定义模型类（DataMapper 模型类）中的关系

我将如何为此编写模型关系。对 Self 关系有点困惑，即菜单项和子菜单

菜单有许多子菜单，子菜单可以有一个或多个子子菜单

```
类别：导航
表：导航
[id] [parent_id] [名称] ..

```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:27:57.907

这是一对多的关系（一个项目有一个父项，一个父项可以有许多项）。

所以你的模型看起来像：

```
class Menu extends DataMapper {

    public $has_one = array(
        'parent' => array(
            'class' => 'menu',
        ),
    );

    public $has_many = array(
        'menu' => array(
            'class' => 'menu',
                'other_field' => 'parent',
        ),
    );

} 
```

这将允许您这样做：

```
// assume your tree root has parent id 0
$root = new Menu();
$root->where('parent_id', 0)->get();

// get the first level menu from the root
$submenu = $root->menu->get();

// get the parent from the first submenu entry (should be root again)
$rootagain = $submenu->parent->get(); 
```

请注意（正如我已经在 CI 论坛上回答的那样）这不是一个非常理想的解决方案，因为一棵树可以是多个嵌套级别，使用此设置意味着必须进行迭代，因为您一次只能检索一个级别，并且为单亲。这将成为任何大小树的噩梦。

查看 nestedsets 扩展，它将允许您在表中构建嵌套集树，并将方法添加到 Datamapper 以操作这些集（例如使用父母、孩子、syblings，在树中的特定位置插入新记录等）。

# javascript - 在单击单选按钮时使用数据自动填充输入字段

> ID：10498946
> 
> 赞同：0
> 
> 时间：2012-05-08T12:48:38.800
> 
> 标签：javascript

当用户在 2 个类别计划详细信息和计划持续时间中选择单选按钮时，输入字段应通过 JavaScript 填充相关数据。

请检查下面的 html 标记和 JavaScript，并提出更正或可行的替代方法。

```
<h3 class="fltClear">Plan Details</h3>
<div id="spryradio1">
<dt>Plan Type: <span class="required">*</span></dt>
<dd>
<label>
  <input type="radio" name="RadioGroup1" value="Silver" id="RadioGroup1_0" onClick="changeplanprice();" class="RadioGroup1" />
  Silver</label>
<br>
<label>
  <input type="radio" name="RadioGroup1" value="Gold" id="RadioGroup1_1" onClick="changeplanprice();" class="RadioGroup1" />
  Gold</label>
<br>
<label>
  <input type="radio" name="RadioGroup1" value="Platinum" id="RadioGroup1_2" onClick="changeplanprice();" class="RadioGroup1" />
  Platinum</label>
<br>
<label>
  <input type="radio" name="RadioGroup1" value="All-in-one" id="RadioGroup1_3" onClick="changeplanprice();" class="RadioGroup1" />
  All-in-one</label>
<br>
<span class="radioRequiredMsg">Please make a selection.<span class="hint-pointer">&nbsp;</span></span>
</dd>
</div>

<!--Plan Duration-->

<div id="spryradio2">
<dt>Plan Duration: <span class="required">*</span></dt>
<dd>
<label>
  <input type="radio" name="RadioGroup2" value="Yearly" id="RadioGroup2_0" onClick="changeplanprice();" class="RadioGroup2" />
  Yearly</label>
<br>
<label>
  <input type="radio" name="RadioGroup2" value="Quaterly" id="RadioGroup2_1" onClick="changeplanprice();" class="RadioGroup2" />
  Quaterly</label>
<br>
<label>
  <input type="radio" name="RadioGroup2" value="Monthly" id="RadioGroup2_2" onClick="changeplanprice();" class="RadioGroup2" />
  Monthly</label>
<br>
<label>
  <input type="radio" name="RadioGroup2" value="Other" id="RadioGroup2_3" onClick="changeplanprice();" class="RadioGroup2" />
  Other</label>
<br>
<span class="radioRequiredMsg">Please make a selection.<span class="hint-pointer">&nbsp;</span></span>
</dd>
</div>

<!--Plan Price-->
<div>

     <script>
     function changeplanprice() {
         var plantype=document.getElementByClassName('RadioGroup1').value;
         var planduration=document.getElementByClassName('RadioGroup2').value;
         if(plantype=="Silver") {
             if(planduration=="Monthly")     {
                 document.getElementById('Price').value='£ 39.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Quaterly")  {
                 document.getElementById('Price').value='£ 79.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Yearly")    {
                 document.getElementById('Price').value='£ 124.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Other")     {
                 document.getElementById('Price').value='';
                 document.getElementById('Price').readOnly=false;
                 }
                 }
             else if(plantype=="Gold")  {
                 if(planduration=="Monthly")    {
                 document.getElementById('Price').value='£ 49.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Quaterly")  {
                 document.getElementById('Price').value='£ 99.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Yearly")    {
                 document.getElementById('Price').value='£ 179.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Other")     {
                 document.getElementById('Price').value='';
                 document.getElementById('Price').readOnly=false;
                 }
                 }
             else if(plantype=="Platinum")  {
                 if(planduration=="Monthly")    {
                 document.getElementById('Price').value='£ 59.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Quaterly")  {
                 document.getElementById('Price').value='£ 199.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Yearly")    {
                 document.getElementById('Price').value='£ 279.98';
                 document.getElementById('Price').readOnly=true;
                 }
             else if(planduration=="Other")     {
                 document.getElementById('Price').value='';
                 document.getElementById('Price').readOnly=false;
                 }
                 } }
        </script> 
```

```
<div>
<dt><label for="Price">Plan Price:</label></dt>
<dd class="bg"><input type="text" name="Price" id="Price" size="80" class="input" readonly="readonly"  />
</dd>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:27:46.723

您的函数可能需要进行一些清理，但我看到了一个问题。您正在使用`document.getElementByClassName(' ... ').value;`. 这是不正确的。该函数实际上是`document.getElementsByClassName`（注意 Elements 是复数）。此函数返回具有该类名称的所有元素的数组。所以你不能`.value`直接调用它。您需要遍历元素数组以查找检查了哪个元素并获取该元素的值。

鉴于一组中的所有单选按钮都具有相同的名称，并且还有另一个功能，`document.getElementsByName`，没有理由使用`getElementsByClassName`。

我会改变你的功能。这是经过测试和工作的，并且更容易扩展，以防您想出新的定价选项。您所要做的就是添加到`prices`对象中：

```
function changeplanprice() {
    var plantype;
    var plantypes = document.getElementsByName('RadioGroup1');
    for (var i=0; i < plantypes.length; i++) {
        if (plantypes[i].checked)
            plantype = plantypes[i].value;
    }

    var planduration;
    var plandurations = document.getElementsByName('RadioGroup2');
    for (i = 0; i < plandurations.length; i++) {
        if (plandurations[i].checked)
            planduration = plandurations[i].value;
    }

    if (plantype === undefined || planduration === undefined)
        return;

    document.getElementById('Price').readOnly = (planduration != "Other");

    var prices = {
        "Silver":{
            "Monthly":"£ 39.98",
            "Quarterly":"£ 79.98",
            "Yearly":"£ 124.98",
            "Other":""
        },
        "Gold":{
            "Monthly":"£ 49.98",
            "Quarterly":"£ 99.98",
            "Yearly":"£ 179.98",
            "Other":""
        },
        "Platinum":{
            "Monthly":"£ 59.98",
            "Quarterly":"£ 199.98",
            "Yearly":"£ 279.98",
            "Other":""
        },
        "All-in-one":{
            "Monthly":"...",  /* prices weren't provided for All-in-one in the example */
            "Quarterly":"...",
            "Yearly":"...",
            "Other":""
        }
    };

    document.getElementById('Price').value = prices[plantype][planduration];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:57:54.787

我将给出的第一个建议是单身

```
document.getElementById('Price').readOnly=true; 
```

这将使您的代码更具可读性。第二个建议是你可以有两个数组，一个用于plantype，另一个用于planduration，单选按钮而不是文本，将数组索引作为值。

这不仅会使您的代码更具可读性，而且更易于管理。假设如果您必须添加一个平面持续时间，则必须为所有平面类型添加相同的条件，其中可能会丢失一个案例。

# java - 内存屏障有没有很好的介绍？

> ID：10498957
> 
> 赞同：4
> 
> 时间：2012-05-08T12:49:24.183
> 
> 标签：java, concurrency, memory-barriers

我正在寻找关于内存障碍和 Java 代码中常见陷阱的良好在线介绍：

*   使用`synchronized`太频繁或不够频繁
*   何时使用`volatile`和`final`
*   双重检查锁定
*   等等

我对显示行为和/或示例如何解决常见问题的代码特别感兴趣（例如创建多个线程可以访问的映射以及延迟添加值的位置）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T12:54:46.160

您可能会发现Martin Thomson 的[这篇文章](http://mechanical-sympathy.blogspot.co.uk/2011/07/memory-barriersfences.html)很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:57:16.697

我知道你在网上说，但是[Java Concurrency In Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)是这些天*的*Java 并发指南。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:44:38.230

如果您想从 CPU 的角度了解更多相关信息（生成哪些汇编代码以及 JVM 如何优化字节码），这篇文章可能会很有趣：[内存屏障和 JVM 并发](http://www.infoq.com/articles/memory_barriers_jvm_concurrency)（InfoQ）

# java - EJB：没有接口的依赖注入

> ID：10498959
> 
> 赞同：4
> 
> 时间：2012-05-08T12:49:29.330
> 
> 标签：java, dependency-injection, ejb

我有这个代码

```
@Local  
interface IRepo  
{  //...  
}  

@Stateless  
class Repo implements IRepo  
{  // ..  
}  

class WebS  
{  
@EJB private IRepo repo;  
// ...  
} 
```

并且一切正常。

但现在我删除界面 `IRepo`并制作

```
@Stateless  
class Repo     {  // ..  
}  

class WebS  
{  
@EJB private Repo repo;  
// ...  
} 
```

并且 JNDI 查找失败。

```
could not resolve global JNDI name for @EJB for container WebS ... 
```

我可以在没有接口的情况下进行依赖注入吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T13:15:55.547

你应该使用

```
@Stateless
@LocalBean // <-- annotation here
class Repo     {  
}  

class WebS  
{  
@EJB private Repo repo;  
// ...  
} 
```

*确保使用符合 EJB-3.1 的应用服务器*

# javascript - 如何在 .NET 应用程序中使用 RequireJS？

> ID：10498963
> 
> 赞同：5
> 
> 时间：2012-05-08T12:49:47.520
> 
> 标签：javascript, jquery, jquery-plugins, requirejs

我有以下文件夹结构：

->自定义

*   图表
    *   ...JS 文件
*   提高
    *   ...JS 文件
*   一般的
    *   ...JS 文件

->库

*   jQuery
*   jQuery.ui

jquery-1.7.2.js需要js
-1.0.7.js
order.js

我有一个 .NET 应用程序，其中包含许多 ascx 控制文件，这些文件以传统方式引用 JS 文件，方法是在脚本标记中调用 JS 文件，然后从该文件中调用一些函数。

问题是我应该（或者我可以）如何实现 Require JS 以便我可以：

1) 调用 JS 文件 最后在所有图片、css 和 html 加载完成后，然后...

2）使用AMD的概念对代码进行模块化

需要指出的是，每个 aspx 文件中最多有 5 个 ascx 文件，其中一些包含 ascx 控件。许多 ascx 文件在其中嵌入了 JavaScript，许多 .master 页面也包含 JavaScript 文件引用。

我无法更改网站的结构（因为网站相当大），所以我需要找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:45:19.467

它被称为重构... v. 将以前未架构的解决方案重写为架构良好的解决方案有时会很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T05:32:19.887

这更像是从 .NET Web 浏览器控件调用“InvokeScript()”的答案。但是谷歌把我带到了这里，有人可能会觉得这很有用。

首先，像往常一样定义新的 AMD 模块。将您称为“InvokeScript()”的任何内容作为函数放入此模块中：

```
define (... {
    var mySpecialHandler = function() {
        // do stuff
    };
    return {
      mySpecialHandler: mySpecialHandler
    }
}); 
```

然后当你开始使用它时，使用加载模块时最终设置的全局命名空间：

```
require(['app'], function (app) {
    window.mySpecialHandler = app.mySpecialHandler;
}); 
```

# selenium - 如何在 Selenium IDE 中组织“IF ELSE”

> ID：10498966
> 
> 赞同：3
> 
> 时间：2012-05-08T12:50:08.083
> 
> 标签：selenium, selenium-ide

如何在不使用扩展的情况下在 Selenium IDE 中组织“IF ELSE”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T06:40:19.237

为未来的读者总结一下：

1.  “正确”且最完整的方法是从[官方页面](http://seleniumhq.org/download/)`Flow Control`下载Selenium IDE 的插件（一直向下）。

    我找到的最有用的链接是这个，因为它有一个完整的例子：[http ://selenium.10932.n7.nabble.com/if-else-statement-td4370.html](http://selenium.10932.n7.nabble.com/if-else-statement-td4370.html)

    无论如何，还有一个[文档](http://wiki.openqa.org/display/SEL/flowControl)和[作者的博客文章](http://51elliot.blogspot.cz/2008/02/selenium-ide-goto.html)解释了更多内容。

2.  如果没有任何 Selenium IDE 插件（多么愚蠢的需求 - Selenium IDE*本身*就是一个插件！），除了用 JavaScript 编写整个命令之外，您无能为力。为此，以下函数可能会派上用场：[`document.getElementById()`](https://developer.mozilla.org/en/DOM/document.getElementById)、[`document.getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)、[`document.getElementsByClassName()`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)和。[`document.querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)[`document.evaluate()`](https://developer.mozilla.org/en/DOM/document.evaluate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:38:06.937

使用 Gotoif 条件。

这是 Gotoif 条件的示例：

```
 <tr>
        <td>open</td>
    <td>/</td>
    <td></td>
 </tr>
 <tr>
    <td>storeElementPresent</td>
    <td>id=gbqfq</td>
    <td>test</td>
 </tr>
 <tr>
    <td>echo</td>
    <td>${test}</td>
    <td></td>
 </tr>
 <tr>
    <td>store</td>
    <td>test</td>
    <td></td>
 </tr>
 <tr>
    <td>gotoIf</td>
    <td>storedVars['test']=false</td>
    <td>labltest</td>
 </tr>
 <tr>
    <td>type</td>
    <td>id=gbqfq</td>
    <td>test</td>
 </tr>
 <tr>
    <td>label</td>
    <td>labltest</td>
    <td></td>
 </tr>

 </tbody></table>
 </body>
 </html> 
```

谢谢，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-30T09:58:13.900

要在 selenium IDE 中使用 If..Else，首先添加插件“SelBlock”/链接：[https](https://addons.mozilla.org/en-US/firefox/addon/selenium-ide-sel-blocks/versions/) ://addons.mozilla.org/en-US/firefox/addon/selenium-ide-sel-blocks/versions/ 。之后，只有您可以在测试用例中使用 If..Else。例子：

```
<head>
<body>
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>storeElementPresent</td>
    <td>id=signin</td>
    <td>test</td>
</tr>
<tr>
    <td>echo</td>
    <td>${test}</td>
    <td></td>
</tr>
<tr>
    <td>if</td>
    <td>${test}==true</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=signin</td>
    <td></td>
</tr>
<tr>
    <td>else</td>
    <td></td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>xpath=(//a[contains(text(),'Logout')])[2]</td>
    <td></td>
</tr>
<tr>
    <td>endIf</td>
    <td></td>
    <td></td>
</tr>
</body> 
```

# sql-server-2008-r2 - 在存储过程中从一台服务器到另一台服务器上的表进行 INSERT、UPDATE 或 DELETE

> ID：10498967
> 
> 赞同：1
> 
> 时间：2012-05-08T12:50:16.957
> 
> 标签：sql-server-2008-r2, sql-insert, sql-delete

我有这个问题；我正在尝试在存储过程中执行`INSERT`, `UPDATE`or`DELETE`语句，从一台服务器到另一台服务器中的表。

示例：我有`192.168.0.3`一个带有数据库的服务器`BaseA`，在里面我添加了一个存储过程`spu_a`。在这个存储过程中，我想在服务器`tableAinBaseB`中的数据库表中插入一个新行。`BaseB``192.168.0.4`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:56:34.987

我假设 Microsoft SQL Server。

我认为您想要“跨服务器”或“链接服务器”SQL。[请参阅此处](http://msdn.microsoft.com/en-us/library/aa213778%28SQL.80%29.aspx)的 MSDN 。然后，您的查询将使用 4 个部分标识符，如下所示：

```
Select * From Server.Database.Schema.Table 
```

我以前的雇主不喜欢这个解决方案（有人告诉我安全原因），所以强制使用 SSIS 解决方案。这可能是您的考虑因素。

# java - 加密证书

> ID：10498968
> 
> 赞同：0
> 
> 时间：2012-05-08T12:50:18.890
> 
> 标签：java, certificate, encryption-asymmetric

我在使用私钥加密和使用公钥解密时遇到 Microsoft Internet Explorer 证书问题

1) 加密工作文件

```
public String encryption(String inputData, String key, String certificate) // Certificate is nothing but aliase name
{
    String encriptData = null;

    String verify = checkForCertificateConfig();
    if (!verify.equals("OK")) {
        return verify;
    }
    System.out.println("ENCRYPTION INPUTDATA : " + inputData);
    System.out.println("ENCRYPTION KEY : " + key);
    System.out.println("ENCRYPTION CERTIFICATE : " + certificate);
    try {
        if (key.equalsIgnoreCase("Private")) {
            // System.out.println("ENCRYPTION WITH PRIVATE KEY");
            PrivateKey privateKey = (PrivateKey) keyStore.getKey(
                    certificate, null);
            encriptData = encryptString(inputData, privateKey);
        } else {
            // System.out.println("ENCRYPTION WITH PUBLIC KEY");
            encriptData = encryptString(inputData,
                    keyStore.getCertificate(certificate).getPublicKey());
        }
    } catch (NoSuchPaddingException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (IllegalBlockSizeException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (NoSuchAlgorithmException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (UnrecoverableKeyException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (InvalidKeyException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (KeyStoreException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (BadPaddingException ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (Exception ex) {
        encriptData = ex.getMessage();
        ex.printStackTrace();

    }
    return encriptData;
}

private String encryptString(String encStr, PrivateKey key)
        throws NoSuchAlgorithmException, NoSuchPaddingException,
        InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    String encoutStr = null;

    /**
     * first check key generation algorithm and initialize Cipher object
     * according algorithm
     */
    if (key.getAlgorithm().equalsIgnoreCase("RSA")) {
        edCipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
    } else if (key.getAlgorithm().equalsIgnoreCase("DSA")) {
        edCipher = Cipher.getInstance("DSA/ECB/PKCS1Padding");
    }

    /**
     * Initialize Cipher Object with Private key and mode of Encryption
     */
    edCipher.init(Cipher.ENCRYPT_MODE, key);
    byte[] buff = encStr.getBytes();
    /**
     * Encrypt the String and get binary data
     */
    byte[] encryptedDataStringBytes = edCipher.doFinal(buff);
    /**
     * Encode the binary data into String formate
     */
    encoutStr = this.bASE64Encoder.encode(encryptedDataStringBytes);

    return encoutStr;
} 
```

2）解密得到错误，如

```
public String decryption(String inputData, String key, String certificate) {
    String decriptData = null;

    String verify = checkForCertificateConfig();
    if (!verify.equals("OK")) {
        return verify;
    }

    System.out.println("DECRYPTION INPUTDATA : " + inputData);
    System.out.println("DECRYPTION KEY : " + key);
    System.out.println("DECRYPTION CERTIFICATE : " + certificate);
    try {
        if (key.equalsIgnoreCase("Private")) {
            // System.out.println("DECRYPTION WITH PRIVATE KEY");
            PrivateKey privateKey = (PrivateKey) keyStore.getKey(
                    certificate, null);
            decriptData = decryptString(inputData, privateKey);
        } else {
            // System.out.println("DECRYPTION WITH PUBLIC KEY");
            decriptData = decryptString(inputData,
                    keyStore.getCertificate(certificate).getPublicKey());
        }
    } catch (NoSuchPaddingException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (IllegalBlockSizeException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (NoSuchAlgorithmException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (UnrecoverableKeyException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (InvalidKeyException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (KeyStoreException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (BadPaddingException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (IOException ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    } catch (Exception ex) {
        decriptData = ex.getMessage();
        ex.printStackTrace();

    }
    return decriptData;
}   

private String decryptString(String dncStr, PrivateKey key)
        throws NoSuchAlgorithmException, NoSuchPaddingException,
        InvalidKeyException, IOException, IllegalBlockSizeException,
        BadPaddingException {
    String decStr = null;

    /**
     * first check key generation algorithm and initialize Cipher object
     * according algorithm
     */
    if (key.getAlgorithm().equalsIgnoreCase("RSA")) {
        edCipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
    } else if (key.getAlgorithm().equalsIgnoreCase("DSA")) {
        edCipher = Cipher.getInstance("DSA/ECB/PKCS1Padding");
    }
    /**
     * Initialize Cipher Object with Private key and mode of Decryption
     */
    edCipher.init(Cipher.DECRYPT_MODE, key);
    /**
     * Decode the encrypted String convert into binary formate
     */
    byte[] encryptedDataStringBytes = this.bASE64Decoder
            .decodeBuffer(dncStr);
    /**
     * Decrypt the binary data and get Original encrypted String.
     */
    decStr = new String(edCipher.doFinal(encryptedDataStringBytes));

    return decStr;
} 
```

错误如...

```
javax.crypto.BadPaddingException: Blocktype mismatch: 0
at sun.security.rsa.RSAPadding.unpadV15(Unknown Source)
at sun.security.rsa.RSAPadding.unpad(Unknown Source)
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at eTokenApplet.decryptString(eTokenApplet.java:1255)
at eTokenApplet.decryption(eTokenApplet.java:1099)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin.javascript.JSInvoke.invoke(Unknown Source)
at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin.javascript.JSClassLoader.invoke(Unknown Source)
at sun.plugin2.liveconnect.JavaClass$MethodInfo.invoke(Unknown Source)
at sun.plugin2.liveconnect.JavaClass$MemberBundle.invoke(Unknown Source)
at sun.plugin2.liveconnect.JavaClass.invoke0(Unknown Source)
at sun.plugin2.liveconnect.JavaClass.invoke(Unknown Source)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$DefaultInvocationDelegate.invoke(Unknown Source)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo.doObjectOp(Unknown Source)
at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:28:08.660

对于可变长度消息，大多数加密/解密算法都有所需的块大小。如果数据没有正确填充块 - 坏事发生 - 所以你需要填充数据

有关填充的更多信息，[请访问 http://www.di-mgt.com.au/cryptopad.html](http://www.di-mgt.com.au/cryptopad.html)

# arrays - 对 ArrayController 的内容进行排序

> ID：10498969
> 
> 赞同：8
> 
> 时间：2012-05-08T12:50:19.187
> 
> 标签：arrays, sorting, ember.js

我有`Ember.ArrayController`一个未分类的内容。

我想知道是否可以在不使用新属性的情况下对 ArrayController 的内容进行排序。

我当然可以创建一个新属性：

```
App.MyArrayController = Em.ArrayController.extend({
  mySortMethod: function(obj1, obj2) {
    // some code here
  },
  updateSortedContent: function() {
    var content = this.get('content');
    if (content) {
      var sortedContent = content.copy();
      sortedContent.sort(this.mySortMethod);
      this.set('sortedContent', sortedContent);
    }
  }.observes('content')
}); 
```

但我希望有更好的方法不重复内容。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-10T02:40:00.497

**更新**

最新版本的 Ember 实际上内置了排序功能。`ArrayController`现在包括如果您指定(Array) 和可选的(Boolean)`Ember.SortableMixin`将参与的排序。`sortProperties``sortAscending`

注意：使用新的 SortableMixin，您仍然需要参考才能`arrangedContent`获得排序后的版本。模型本身将保持不变。（感谢乔纳森·特兰）

```
App.userController = Ember.ArrayController.create({
  content: [],
  sortProperties: ['age'],
  sortAscending: false
}) 
```

**原始答案**

正确的做法是使用`arrangedContent`ArrayProxy 的属性。此属性旨在被覆盖以提供内容数组的排序或过滤版本。

```
App.userController = Ember.ArrayController.create({
  content: [],
  sort: "desc",
  arrangedContent: Ember.computed("content", function() {
    var content, sortedContent;
    content = this.get("content");
    if (content) {
      if (this.get("sort") === "desc") {
        this.set("sort", "asc");
        sortedContent = content.sort(function(a, b) {
          return a.get("age") - b.get("age");
        });
      } else {
        this.set("sort", "desc");
        sortedContent = content.sort(function(a, b) {
          return b.get("age") - a.get("age");
        });
      }
      return sortedContent;
    } else {
      return null;
    }
  }).cacheable()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:42:39.763

您必须在 Ember 中手动对数组进行排序，包括任何数组控制器的内容。你总是可以`content`用你的排序数组替换而不是保留两个数组。

**更新**

这是我认为您正在寻找的示例：http: [//jsfiddle.net/ud3323/yjs8D/](http://jsfiddle.net/ud3323/yjs8D/)

**更新#2**

更新了此示例以使用新的视图上下文更改。[https://gist.github.com/2494968](https://gist.github.com/2494968)

**车把**

```
<script type="text/x-handlebars" >
Will Display and Sort by Age (after 2 sec)<br/><br/>

{{#each App.userController}}
    {{#view App.RecordView}}
        {{name}} - {{age}}
    {{/view}}
{{/each}}
</script> 
```

**JavaScript**

```
App = Ember.Application.create({
    ready: function() {
        Ember.run.later(this, function() {
            Ember.run.later(this, function() {
                App.get('userController').set('content', [
                   Ember.Object.create({ name:"Jeff", age:24 }),
                   Ember.Object.create({ name:"Sue", age:32 }),
                   Ember.Object.create({ name:"Jim", age:12 })
               ]);
      }, 2000);
        Ember.run.later(this, function() {
            // Make the controller's content sort again in reverse this time
            App.userController.notifyPropertyChange('content');
        }, 4000);
    }
});

App.userController = Ember.ArrayController.create({
    content: [],

    contentDidChange: Ember.observer(function(userCtr, prop) {
        if(!Ember.empty(this.get('content'))) {
            console.log('about to begin sort');
            this.sortContent();
        }

        this._super();
    }, 'content'),

    sort:"desc",

    sortContent:function() {
        var content = this.get("content"), sortedContent;

        if (this.get("sort") == "desc") {
            this.set("sort", "asc");
            sortedContent = content.sort( function(a,b){
                return a.get("age") - b.get("age");
            });
        } else {
            this.set("sort","desc");
            sortedContent = content.sort( function(a,b){
                return b.get("age") - a.get("age");
            });
        }

        this.set("content",sortedContent);
    }
});

App.RecordView = Ember.View.extend({}); 
```

​</p>

# javascript - jQuery UI 对话框关闭的不同动画取决于按钮？

> ID：10498974
> 
> 赞同：0
> 
> 时间：2012-05-08T12:50:32.967
> 
> 标签：javascript, jquery-ui, jquery-ui-dialog

是否有可能（以一种合理的方式）根据单击的按钮以不同的动画关闭 jQuery UI 对话框？

```
$( "#dialog" ).dialog({
    autoOpen: false,
    show: "blind",
    hide: "explode"
    buttons: {
        "Delete": function () {
             ... one animation here ...
             $(this).dialog("close");
        },
        "Cancel" : function () {
            ... another here ...
            $(this).dialog("close");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:21:02.330

是的。

```
$( "#dialog" ).dialog({
    //autoOpen: false,
    show: 'blind',
    buttons: {
        Delete: function () {
            $( this ).dialog( 'option', 'hide', 'explode' );
            $(this).dialog("close");
        },
        Cancel : function () {
            $( this ).dialog( 'option', 'hide', 'blind' );
            $(this).dialog("close");
        }
    }
}); 
```

现场示例：http: [//jsfiddle.net/GLUHa/2/](http://jsfiddle.net/GLUHa/2/)

# asp.net - 在 asp.net 4.0 中需要 URL 路由方面的帮助

> ID：10498978
> 
> 赞同：0
> 
> 时间：2012-05-08T12:50:42.683
> 
> 标签：asp.net

对于 SEO 友好的 url，我使用 ASP.Net 4.0 的路由功能。

任何人都知道如何将 URL **www.mysite.com/ln=en-us**的路由更改为**www.mysite.com/en-us/default.aspx**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:29:14.257

我假设您正在使用网络表单首先创建这个类：

```
public class LangRouteHandler : IRouteHandler
{

    public System.Web.IHttpHandler GetHttpHandler(System.Web.Routing.RequestContext requestContext)
    {

        //Fill the context with the route data, just in case some page needs it
        foreach (var value_loopVariable in requestContext.RouteData.Values)
        {
            var value = value_loopVariable;
            HttpContext.Current.Items[value.Key] = value.Value;
        }

        string VirtualPath = null;
        VirtualPath = "~/" + requestContext.RouteData.Values["page"];// +".aspx";

        IHttpHandler redirectPage = default(IHttpHandler);

        redirectPage = (IHttpHandler)BuildManager.CreateInstanceFromVirtualPath(VirtualPath, typeof(Page));
        return redirectPage;

    }
} 
```

在你的 Global.asax 添加这个：

```
public void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup
        RegisterRoutes(RouteTable.Routes);
    }

    public void RegisterRoutes(RouteCollection routes)
    {
        Route reportRoute = default(Route);
        string DefaultLang = "es";

        reportRoute = new Route("{lang}/{page}", new LangRouteHandler());
        //* if you want, you can contrain the values
        //reportRoute.Constraints = New RouteValueDictionary(New With {.lang = "[a-z]{2}"})
        reportRoute.Defaults = new RouteValueDictionary(new
        {
            lang = DefaultLang,
            page = "home"
        });

        routes.Add(reportRoute);
    } 
```

# html - 如何在html5中平衡音频

> ID：10498983
> 
> 赞同：7
> 
> 时间：2012-05-08T12:51:22.653
> 
> 标签：html, audio, balance

是否可以使用 Javascript 管理 html5 中的音频通道平衡？

```
<audio id="audio_left" preload="auto">
    <source src="audio/audio_left.ogg" type="audio/ogg"></source>
    <source src="audio/audio_left.mp3" type="audio/mp3"></source>
</audio> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:39:31.330

目前，没有，因为媒体 API 仅提供对媒体文件的高级访问。还有许多其他 API 正在开发中，例如 Mozilla 的[音频数据 API](https://wiki.mozilla.org/Audio_Data_API)，它提供了更多低级的东西，但目前似乎也不支持你想要的东西。[Web Audio API](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)提供了更多功能，但仍在开发中。

# postsharp - PostSharp 2.1.6 (NuGet) 的构建错误

> ID：10498985
> 
> 赞同：0
> 
> 时间：2012-05-08T12:51:23.090
> 
> 标签：postsharp

我正在为一个新项目评估 PostSharp，但在更改后首次构建项目时似乎无法克服以下错误：

> 无法将文件“C:\SourcePath\Output\Debug\MyApp.vshost.exe 复制到 obj\Debug\Before-PostSharp\MyApp.vshost.exe：文件被进程锁定：MYAPP.VSHOST (8064)

该错误仅发生在第一次构建尝试中。如果我立即重新构建，则不会发生错误。我只能猜测这是因为该项目实际上并没有第二次重建。

我在 SharpCrafters 论坛中阅读了一些帖子，这些帖子表明这个问题在 v2.1 之前就存在，但据报道已得到修复。我正在使用来自 NuGet 的 v2.1.6.14（在 VS 2010 中），并为我引用 PostSharp 的每个项目都收到此错误。每次都需要 2 次构建肯定是不合理的，所以我正在寻找一个可能的解决方案。到目前为止，我对我所看到的感到非常满意，但如果无法解决，我将不得不转向另一个方向。

**更新**

根据 Gael 的要求，我生成了诊断构建日志并将其发送给他，看起来他能够在最新版本 (2.1.6.14) 中解决问题。

我相信部分（或全部）问题可能是由于我所有项目的构建输出都设置为一个公共位置（即不是每个项目下的 /bin/debug 文件夹）。这是因为我们使用的是 MEF DirectoryCatalog，它将发现位于输出路径中的程序集中包含的 Imports 和 Exports。PostSharp.targets 文件将 vshost.exe 文件排除在复制操作之外，但仅当它共享输出程序集的名称时。就我而言，vshost.exe 文件具有不同的名称，因此没有被排除在外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:23:43.733

该问题已在 PostSharp 2.1.6.15 中重新修复。

# blackberry - 在 xml 中获取 Empty 标签时无法解析 XML

> ID：10498986
> 
> 赞同：0
> 
> 时间：2012-05-08T12:51:23.650
> 
> 标签：blackberry, xml-parsing

在使用 DOM 在 Blackberry 中解析 XML 时，我得到了一个空节点，例如`</image>`.

而解析是使用条件 if ("image".equals(node.getNodeName().toString())) 来检查这是否是图像节点。但没有进入条件。

如果我使用 xyz.jpg 则返回图像名称。所以请告诉我条件，我可以分类这是否是空节点。

```
NodeList childNodes = node.getChildNodes(); 
int numChildren = childNodes.getLength();
Node firstChild = childNodes.item(0); 
if (node.getNodeType() == Node.ELEMENT_NODE) { 
       if (numChildren == 1 && firstChild.getNodeType() == Node.TEXT_NODE) { 
           if ("headline".equals(node.getNodeName().toString())) {
               vecHeadline.addElement(firstChild.getNodeValue()); 
           }
       }
} 
```

但是当我得到这样的空标签时不会解析。实际上我想在节点为空的地方添加一个字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:02:34.030

由于您没有提供例外，因此我不得不猜测。node.getNodeName().toString() 是它崩溃的地方。

首先尝试检查 node.getNodeName() is not null

# android - 从原始文件夹或 SDCard Android 平板电脑设计中添加和加载图像、视频和 pdf？

> ID：10498991
> 
> 赞同：0
> 
> 时间：2012-05-08T12:51:57.377
> 
> 标签：android

美好的一天，我需要在本地平板电脑上创建一种包含 pdf、图像和视频的图书应用程序，价值高达 10gb 甚至更多。现在没有打算在 android 市场或任何其他商店出售它，它完全在内部，所以我认为 apk 大小的问题已经得到澄清。我要问的是，放置所有这些内容的最佳位置在哪里，以便我可以轻松加载它们并相应地使用它们？

1.  我应该使用原始文件夹并为每个图像、视频和 pdf 创建子文件夹吗？

2.  我应该在 sdcard 上创建文件夹吗（假设有一个）？或者

如果您对如何实现此功能有任何其他解决方案或想法，我很高兴听到这个。提前感谢您的回复。

PS 顺便说一句，由于它是一个特定于平板电脑的应用程序，是否需要有一个多窗格布局片段或者 ii 可以只使用所有空间。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:39:37.737

我想您可以使用 RAW 文件夹，但据我了解，这也会使 APK 变得很大，因为 RAW 文件夹中的所有文件都需要与应用程序一起打包。

从我过去看到的情况来看，大多数具有大量额外数据的应用程序，实际上是大多数游戏，都会在首次​​启动时下载额外的数据。基本上：

1.  应用程序启动
2.  它会检查您是否拥有所有附加数据（书籍、pdf、图像）
3.  如果没有，它开始将该数据下载到 SDCARD。

*在您的情况下可能没有意义，但这样做可以让您更有限地控制需要*下载多少数据。如果功能A只需要包A的附加数据，那么你只需要下载包A，你不需要下载*所有东西*。或者，也许您可​​以让用户选择他们想要下载的附加数据包，这也将节省带宽、时间和资源。

# java - AndEngine 如何使用 TouchListener

> ID：10498993
> 
> 赞同：-1
> 
> 时间：2012-05-08T12:52:00.627
> 
> 标签：java, android, andengine

我正在尝试编写一个小游戏。所以我有一个小方向键，我希望 onSceneTouchEvent 方法在我触摸屏幕时运行我的方法。但是程序仅在我移动手指时才调用该方法，而不是在我触摸显示器时调用该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:16:04.507

您需要确保仅在开始触摸屏幕时才运行您的方法。

```
if (pSceneTouchEvent.getAction() == MotionEvent.ACTION_DOWN) {
     doSomething();
     return true;
} 
```

# xamarin.ios - monotouch 和 monodroid 的日志框架

> ID：10498998
> 
> 赞同：2
> 
> 时间：2012-05-08T12:52:19.953
> 
> 标签：xamarin.ios, xamarin.android

monotouch 和 monodroid 是否有任何日志记录框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:47:27.903

不确定这是否是您要问的，但 Android.Util.Log 类可用。请参阅[http://docs.mono-android.net/?link=T:Android.Util.Log](http://docs.mono-android.net/?link=T:Android.Util.Log)

System.Diagnostics.Debugger.Log 类在 Monodroid 和 Monotouch 中都可用。请参阅 [http://iosapi.xamarin.com/?link=M:System.Diagnostics.Debugger.Log](http://iosapi.xamarin.com/?link=M:System.Diagnostics.Debugger.Log)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:53:05.273

也许您可以尝试使用 Testflight 进行单点触控。

在那里，您可以上传您的应用程序进行测试或将 TestFlight SDK 安装到您的应用程序中以记录或获取反馈。

www.Testflightapp.com