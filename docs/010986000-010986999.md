# StackOverflow 问答 10986000-10986999

# objective-c - 如何使用字符串和objective-c

> ID：10986003
> 
> 赞同：0
> 
> 时间：2012-06-11T19:03:40.080
> 
> 标签：objective-c

如果涉及从objective-c和c本身来回转换的字符串，我是一个c-noob。我想将字符串转换为 mp_int 并返回。我正在使用的库是[libtommath](https://github.com/libtom/libtommath "自由数学")，方法签名如下。

```
mp_int a;
mp_init(&a);

int res = mp_read_radix(&a, "3493483984238472398423742344793247923648234", 10);
NSLog(@"%i", res);

unsigned char *b = malloc(255);
mp_toradix(&a, &b, 10);

NSString *c = [[NSString alloc] initWithCString:b encoding:NSASCIIStringEncoding];

NSLog(@"--%@", c); 
```

方法签名：

```
int mp_init (mp_int * a)
int mp_read_radix (mp_int * a, const char *str, int radix)
int mp_toradix (mp_int * a, char *str, int radix) 
```

上面的代码似乎很疯狂......有人可以帮忙吗？它在函数调用*结束*时给出 EXC_BAD_ACCESS（右括号）。

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:10:29.097

`mp_toradix(&a, &b, 10);`是错的。它应该是`mp_toradix(&a, b, 10);`

* * *

作为旁注，您正在泄漏分配给 b 的内存。

# python - Django-social-auth：使用 twitter 时的身份验证服务不正确

> ID：10986004
> 
> 赞同：3
> 
> 时间：2012-06-11T19:03:44.483
> 
> 标签：python, django, django-socialauth

当我尝试**http://127.0.0.1/login/twitter**时，我看到它转到 Twitter 进行身份验证，但我看到以下错误
**Incorrect authentication service**

我检查了很多次，**TWITTER_CONSUMER_KEY**和**TWITTER_CONSUMER_SECRET**是正确的！

我的设置如下
**所示 dev.py**

```
INSTALLED_APPS += (
    'social_auth',
)

AUTHENTICATION_BACKENDS = (
    'social_auth.backends.twitter.TwitterBackend',
    'django.contrib.auth.backends.ModelBackend',
)

TWITTER_CONSUMER_KEY         = 'correct key'
TWITTER_CONSUMER_SECRET      = 'correct secret'

SOCIAL_AUTH_CREATE_USERS          = True
SOCIAL_AUTH_FORCE_RANDOM_USERNAME = False
SOCIAL_AUTH_DEFAULT_USERNAME = 'John'
SOCIAL_AUTH_COMPLETE_URL_NAME  = 'socialauth_complete'
SOCIAL_AUTH_ASSOCIATE_URL_NAME = 'socialauth_associate_complete'

#LOGIN_URL          = '/login-form/'
LOGIN_REDIRECT_URL = '/'
LOGIN_ERROR_URL    = '/login/error/'

TEMPLATE_CONTEXT_PROCESSORS = (
    'social_auth.context_processors.social_auth_by_name_backends',
    'social_auth.context_processors.social_auth_by_type_backends',
)

SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.associate.associate_by_email',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    'app.pipeline.redirect_to_form',
    'app.pipeline.username',
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
) 
```

**常见的.py**

```
""" common settings and globals """

ADMINS = (
     ('Name', 'email@gmail.com'),
)

MANAGERS = ADMINS

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '=0s02gxrgqpw6zbet@8_usdg4@-=#@4rqxk07k2vn)a24bv&amp;p#'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'vlists.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'vlists.wsgi.application'

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'vlists',
    'vlists.apps.playlists',
    'vlists.apps.videos',
    'vlists.apps.accounts',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:18:29.983

您的设置文件似乎缺少设置。你需要在那里：

```
SOCIAL_AUTH_ENABLED_BACKENDS = ('twitter',) 
```

注意最后的逗号 - 你需要它，因为它是一个元组。

# concurrency - websocket发送/接收线程安全吗（去常规安全）？

> ID：10986008
> 
> 赞同：8
> 
> 时间：2012-06-11T19:03:52.000
> 
> 标签：concurrency, websocket, go

在 GO 中编写 websocket 服务器时（在我的例子中使用 JSON 编解码器），有两个不同的 Go 例程来处理在同一连接上发送和接收数据是否安全？

由于`websocket.JSON.Receive`暂停并等待接收数据，我认为一个单独的 Go 例程用于处理数据发送将是一个可行的解决方案，除非在同一连接上无法同时发送/接收。

那么，下面的工作示例是不好的做法吗？

```
package main

import (
    "fmt"
    "net/http"
    "code.google.com/p/go.net/websocket"
)

const queueSize = 20

type Input struct {
    Cmd    string
}

type Output struct {
    Cmd    string
}

func Handler(ws *websocket.Conn) {

    msgWrite := make(chan *Output, queueSize)
    var in Input

    go writeHandler(ws, msgWrite)

    for {

        err := websocket.JSON.Receive(ws, &in)

        if err != nil {
            fmt.Println(err)
            break
        } else {
            msgWrite <- &Output{Cmd: "Thanks for your message: " + in.Cmd}
        }
    }
}

func writeHandler(ws *websocket.Conn, out chan *Output) {
    var d *Output
    for {
        select {
        case d = <-out:
            if err := websocket.JSON.Send(ws, &d); err != nil {
                fmt.Println(err.Error())
            } else {
                fmt.Println("> ", d.Cmd)
            }
        }
    }
}

func main() {
    http.Handle("/echo", websocket.Handler(Handler));
    err := http.ListenAndServe(":1235", nil);
    if err != nil {
        panic("ListenAndServe: " + err.Error())
    }
    fmt.Println("Server running")
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T19:12:35.377

是的，您可以同时在 websocket 连接上调用 Send、Receive 和 Close，就像 Go 中的所有[net.Conn](http://golang.org/pkg/net/#Conn)一样。官方文档的简短摘录：

> 多个 goroutine 可以同时调用 Conn 上的方法。

此外，websocket 包还引入了一些编解码器，用于发送/写入可能以原子方式占用多个帧的消息或 JSON 数据。如果查看源代码，您可以看到 Codec 类型的 Send 和 Receive 方法将持有读锁或写锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-24T10:43:47.073

引自[http://www.gorillatoolkit.org/pkg/websocket](http://www.gorillatoolkit.org/pkg/websocket)

并发

连接支持一个并发读取器和一个并发写入器。

应用程序负责确保不超过一个 goroutine 同时调用写入方法（NextWriter、SetWriteDeadline、WriteMessage、WriteJSON、EnableWriteCompression、SetCompressionLevel），并且不超过一个 goroutine 调用读取方法（NextReader、SetReadDeadline、ReadMessage、ReadJSON、SetPongHandler , SetPingHandler) 并发。

Close 和 WriteControl 方法可以与所有其他方法同时调用。

# android - Android 通知：有没有办法单独显示通知？

> ID：10986017
> 
> 赞同：0
> 
> 时间：2012-06-11T19:04:39.773
> 
> 标签：android, statusbar, android-notification-bar

我试图找出一种在单击栏时单独显示通知的方法。正如它现在工作的那样，您将看到栏上列出的每个通知的不同图标，但是当您单击一个时，您将获得系统上存在的所有通知的列表。单击该列表中的通知将启动与其关联的意图。有没有办法只在通知栏的初始点击中显示与该通知图标直接相关的通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:15:23.420

您想让您的用户在不拉下滑动抽屉的情况下尝试单击通知栏中的小图标吗？

我没有尝试过，但我认为系统不允许此功能。想象一下，如果用户尝试点击所有高精度组合在一起的超小图标，那将是多么令人沮丧。

# jquery - flexslider - 控制滑块外的 div

> ID：10986022
> 
> 赞同：2
> 
> 时间：2012-06-11T19:05:07.153
> 
> 标签：jquery, flexslider

我一直在使用 Flex Slider 作为我网站的滑块插件。

我不是超级精通 JQuery，但我想知道是否有人知道一种方法来绑定另一个元素（在本例中是一个元素）的内容，以允许我使用相同的导航更改 flex 滑块之外的内容。

我知道我可以将内容加载到

*   's 并让它滑动，但我想知道是否有一种方法可以更改滑块 div 之外的信息。下面是我的代码：

    ```
    <article class="slider">
        <div class="flexslider-container">
          <div class="flexslider">
            <ul class="slides">
              <li><img class="main" src="/img/banner-boundries.jpg" /></li>
              <li><img class="main" src="/img/banner-makers.jpg" /></li>
              <li><img class="main" src="/img/banner-makers.jpg" /></li>
            </ul><!-- / slides ul -->
          </div><!-- / flexslider div -->
        </div><!-- / flexslider-container div -->
      </article><!-- / slider article -->

     <article class="slider_sub">
        <aside class="column ends">
          <p class="quote">“I was really excited to get my new CIRA X. The ability to manage which devices get priority over our 3G network has revolutionized our business.”&lt;/p>

          <hr>
          <h3>Guy Smiley</h3>
          <p class="footnote">Muppet Anchor Man, FBI Operative</p>
        </aside>
        <aside class="column ends center">
          <h2>What Do Makers Do?</h2>
          <p>Ever wish you had that Thing  that made your current devices do that one task you need?  We make that Thing.  The devices we create are based on solutions for our custmers, not just features.</p>

          <div class="moreinfo"><a href="">read more</a></div>
        </aside>
        <aside class="column ends">
          <h2>The CIRA X Story</h2>
          <img src="img/cira-x-story.png" border="0">
          <p>Read how client need drove the cration of this Feeney Wireless device.</p>
        </aside>  
        <div class="clear"></div>
      </article><!-- / featurette article -->
    </section><!-- end call out section --> 
    ```

    所以我希望滑块导航也能滑动它下面的内容。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:04:48.053

可能有很多方法可以实现这一点。这个答案特定于 flex-slider。实现将非常具体到这个插件。[这里](http://www.woothemes.com/flexslider/)有一些非常好的文档。

从理论上讲，有两种方法可以做到这一点。

A. 绑定第二个滑块事件，监听第一个滑块的事件。

B. 监听幻灯片事件并以编程方式调用第二个滑块上的相应事件。请注意，如果幻灯片内容不匹配 1 到 1，则可能需要转换。

A-解决方案——从文档来看，这似乎将两者绑定在一起：

```
<!-- Target both sliders with the same properties -->
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider();
  });
</script>

//My hesitation on this is that it indicates properties are shared, I am assuming that would included shared event handlers. 
```

B-解决方案——如果两个滑块仅共享属性而不共享事件处理程序，则手动（编程）方法可能是后备：

```
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider({
      animation: "slide",
      controlsContainer: ".flex-container",
      before: function(slider) {
        //Grab second slider and pass along action
        $('#secondSliderID').flexslider.before(slider);
      }
    });
  });
</script> 
```

滑块参数可能很复杂。两者都将涉及一些特定于插件的故障排除来确认。

希望这可以帮助。祝一切顺利！纳什

# html - AppCache = Application Cache = Web Storage的LocalStorage吗？

> ID：10986026
> 
> 赞同：12
> 
> 时间：2012-06-11T19:05:23.997
> 
> 标签：html, html5-appcache, web-storage

我对 HTML5 离线存储的（各种）术语感到有些困惑。

我认为*AppCache*是*Web Storage*的另一个名称，您可以通过 Cache Manifest 指定离线存储的内容。并且有两种类型：LocalStorage（在当前会话之外持续存在）和会话存储（在当前会话之外不持续存在）。

以上是我从 W3C 和维基百科读到的内容，但 Head First HTML5 Programming (Freeman & Robinson) 深入描述了 LocalStorage，然后在附录中有 Web 存储（包含有关缓存清单的信息）（“我们没有涵盖的内容）。

我是否正确理解这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-31T12:26:52.223

WebStorage 是 HTML5 中在客户端存储数据的可能性（将其视为 cookie，但通常有 5 MB 可用空间）。有两种方法来存储该数据（范围）：

1.  仅用于会话，直到浏览器关闭（SessionStorage）
2.  很长一段时间，即使浏览器关闭和主机关闭

[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

AppCache 是一种 HTML5 功能，可以在浏览器中存储整个 web 应用程序（页面、图像、css、JavaScript），即使客户端根本没有互联网连接也可以使用。

[http://appcache.offline.technology/](http://appcache.offline.technology/)

* * *

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-29T07:57:08.383

本地存储：

1.  LocalStorage 用于在客户端保存中间数据，而不使用 cookie。
2.  以键值对的形式保存数据
3.  保存的数据会一直存在于浏览器中，直到被明确删除。如果不删除，它将可用多年。
4.  内存 5Mb

应用缓存：

1.  HTML5 应用程序通过将 html 页面和相关文件（css、js..）本地保存在 appCache 中来提供离线应用程序功能。当网络连接不可用时，这些文件将用于呈现页面。应用程序将具有清单文件，其中包含要下载的文件列表以呈现离线应用程序功能。如果清单文件发生变化（从应用程序中添加/删除任何文件），则将下载新的文件集。单击重新加载后，旧文件将被新文件替换。
2.  将文件保存为数据 - html、js、css等
3.  在单击重新加载或关闭浏览器之前，保存的数据将可用。
4.  内存因浏览器而异。见[http://grinninggecko.com/2011/02/24/developing-cross-platform-html5-offline-app-1/](http://grinninggecko.com/2011/02/24/developing-cross-platform-html5-offline-app-1/)

# sql - SQL：具有基于源表中列值的列名的动态视图

> ID：10986031
> 
> 赞同：6
> 
> 时间：2012-06-11T19:05:55.363
> 
> 标签：sql, sql-server, sql-server-2005

鉴于此处的两个示例表：

**门票表**

```
ID  User    Description

0   James   This is a support ticket
1   Fred    This is a ticket too 
```

**属性表**

```
ID  TicketID    Label           Value

0   0           Engineer        Scott
1   1           Engineer        Dale
2   0           Manu            Dell
3   1           Manu            HP
4   0           OS              Windows
5   1           OS              Linux 
```

我怎样才能得到这样的视图：

```
ID  User    Description                 Engineer    Manu    OS

1   James   This is a support ticket    Scott       Dell    Windows
2   Fred    This is a ticket too        Dale        HP      Linux 
```

重要的是要注意属性表并不总是相同的。一些“票”可能具有其他人没有的属性。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T19:25:56.450

[您可以使用PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)执行此操作。在执行 PIVOT 时，您可以通过以下两种方式之一进行操作，使用静态 Pivot 对要转换的行进行编码，或者使用 Dynamic Pivot 将在运行时创建列列表：

静态数据透视（参见[SQL Fiddle 的演示](http://sqlfiddle.com/#!3/cfd92/1)）：

```
select id, [user], [engineer], [manu], [OS]
from 
(
    select t.id
        , t.[user]
        , p.ticketid
        , p.label
        , p.value
    from tickets t
    inner join properties p
        on t.id = p.ticketid
) x
pivot
(
    min(value)
    for label in ([engineer], [manu], [OS])
) p 
```

或者您可以使用动态枢轴（参见[SQL Fiddle 的演示](http://sqlfiddle.com/#!3/cfd92/7)）：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(p.label) 
                    from tickets t
                    inner join properties p
                        on t.id = p.ticketid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, [user], ' + @cols + ' from 
             (
                 select t.id
                        , t.[user]
                        , p.ticketid
                        , p.label
                        , p.value
                    from tickets t
                    inner join properties p
                        on t.id = p.ticketid
            ) x
            pivot 
            (
                min(value)
                for label in (' + @cols + ')
            ) p '

execute(@query) 
```

两个查询都将返回相同的结果。

# hibernate - 在spring mvc（休眠）中处理并发

> ID：10986035
> 
> 赞同：1
> 
> 时间：2012-06-11T19:06:02.520
> 
> 标签：hibernate, spring-mvc, optimistic-concurrency, database-concurrency

我很难相信我是唯一一个想知道实现这一点的正确方法的人，但不幸的是我的搜索没有返回任何好的解决方案。

基本上我们有使用 spring mvc 和 hibernate 实现的 web 应用程序。由于它是一个指向 jsp 页面的 MVC 模型，因此我们在完成请求后释放对象，然后在执行更新之前从 ID 重构。

考虑到并发性重新设计它的最佳方法是什么？（现在我们不考虑并发！！）是的，我们可以将版本保存为 JSP 中的隐藏字段并在发布请求中发送，但这似乎不是一个“优雅”的解决方案。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:51:10.190

该问题在[hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-optimistic-longsession)中有关乐观并发控制的部分中进行了讨论。您可以使用在整个对话期间保持打开状态的会话（当然，无需保持数据库连接打开）。我认为这是 JBoss Seam 采用的策略，尽管我从未使用过它（我也没有使用这种会话每次会话策略）。

如果您想保持简单，将版本字段存储在隐藏字段或会话属性中确实是我看到的唯一解决方案。

# c++ - 自定义类的向量

> ID：10986039
> 
> 赞同：1
> 
> 时间：2012-06-11T19:06:11.073
> 
> 标签：c++, qt, vector, qt4

我正在尝试创建一个已创建的自定义项目向量，但遇到了一个非常奇怪的问题。

当我创建我的类的一个实例时，我没有任何问题，但是当我尝试添加它时，我有一个很长的错误，我不知道该怎么做。

我不知道它是否有帮助，但 m_mesureList 是 PanneauMesure 类的私有属性。

.h 中的声明：

```
std::vector<Mesure> m_mesureList; 
```

采用：

```
void PanneauMesure::add(QPointF point1, QPointF point2, QPointF point3, QGraphicsItem *line1, QGraphicsItem *line2)
{
    Mesure mesure(point1, point2, point3, line1, line2, this);
    //m_mesureList.push_back(mesure);
} 
```

错误：

```
In file included from ..\testQt\/PanneauMesure.h:21,
                 from ..\testQt\PanneauMesure.cpp:1:
d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/qwidget.h: In copy constructor 'Mesure::Mesure(const Mesure&)':
..\testQt\/Mesure.h:14:   instantiated from 'void __gnu_cxx::new_allocator<_Tp>::construct(_Tp*, const _Tp&) [with _Tp = Mesure]'
d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/bits/stl_vector.h:737:   instantiated from 'void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = Mesure, _Alloc = std::allocator<Mesure>]'
..\testQt\PanneauMesure.cpp:104:   instantiated from here
d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/qwidget.h:806: error: 'QWidget::QWidget(const QWidget&)' is private
..\testQt\/Mesure.h:14: error: within this context
In file included from d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/mingw32/bits/c++allocator.h:34,
                 from d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/bits/allocator.h:48,
                 from d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/string:43,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qstring.h:54,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qobject.h:48,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/qwidget.h:46,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/QWidget:1,
                 from ..\testQt\/PanneauMesure.h:4,
                 from ..\testQt\PanneauMesure.cpp:1:
d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/ext/new_allocator.h: In member function 'void __gnu_cxx::new_allocator<_Tp>::construct(_Tp*, const _Tp&) [with _Tp = Mesure]':
d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/ext/new_allocator.h:105: note: synthesized method 'Mesure::Mesure(const Mesure&)' first required here 
In file included from ..\testQt\/PanneauMesure.h:21,
                 from ..\testQt\PanneauMesure.cpp:1:
d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/qwidget.h: In member function 'Mesure& Mesure::operator=(const Mesure&)':
..\testQt\/Mesure.h:14:   instantiated from 'void std::vector<_Tp, _Alloc>::_M_insert_aux(__gnu_cxx::__normal_iterator<typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer, std::vector<_Tp, _Alloc> >, const _Tp&) [with _Tp = Mesure, _Alloc = std::allocator<Mesure>]'
d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/bits/stl_vector.h:741:   instantiated from 'void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = Mesure, _Alloc = std::allocator<Mesure>]'
..\testQt\PanneauMesure.cpp:104:   instantiated from here
d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/qwidget.h:806: error: 'QWidget& QWidget::operator=(const QWidget&)' is private
..\testQt\/Mesure.h:14: error: within this context
In file included from d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/vector:69,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qvector.h:52,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtGui/qbrush.h:47,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtGui/qpalette.h:47,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/qwidget.h:49,
                 from d:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/QWidget:1,
                 from ..\testQt\/PanneauMesure.h:4,
                 from ..\testQt\PanneauMesure.cpp:1:
d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/bits/vector.tcc: In member function 'void std::vector<_Tp, _Alloc>::_M_insert_aux(__gnu_cxx::__normal_iterator<typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer, std::vector<_Tp, _Alloc> >, const _Tp&) [with _Tp = Mesure, _Alloc = std::allocator<Mesure>]':
d:\qtsdk\mingw\bin\../lib/gcc/mingw32/4.4.0/include/c++/bits/vector.tcc:312: note: synthesized method 'Mesure& Mesure::operator=(const Mesure&)' first required here 
```

编辑，如果有帮助：

测量.cpp：

```
Mesure::Mesure(QPointF point1, QPointF point2, QPointF point3, QGraphicsItem *line1, QGraphicsItem *line2, QWidget *parent):
    QWidget(parent),
    m_hlayoutMesure(new QHBoxLayout(this)),
    m_buttonClose(new QToolButton(this)),
    m_labelAngle(new QLabel(this)),
    m_checkboxMesure(new QCheckBox(this)),
    m_point1(point1),
    m_point2(point2),
    m_point3(point3),
    m_line1(line1),
    m_line2(line2),
    m_angle(0)
{
    m_buttonClose->setText("X");
    m_labelAngle->setAlignment(Qt::AlignCenter);
    m_checkboxMesure->setChecked(true);
    m_hlayoutMesure->addWidget(m_checkboxMesure);
    m_hlayoutMesure->addWidget(m_labelAngle);
    m_hlayoutMesure->addWidget(m_buttonClose);
    m_hlayoutMesure->setSpacing(10);
    m_hlayoutMesure->setMargin(0);
    QObject::connect(m_buttonClose, SIGNAL(clicked()), this, SLOT(close()));
} 
```

PanneauMesure.cpp：

```
PanneauMesure::PanneauMesure(QWidget *parent) :
    QWidget(parent),
    m_vlayoutTotal(new QVBoxLayout(this)),
    m_groupboxMesures(new QGroupBox("Mesures", this)),
    m_vlayoutGroupBoxMesures(new QVBoxLayout(m_groupboxMesures)),
    m_scrollareaMesures(new QScrollArea(m_groupboxMesures)),
    m_widgetMesures(new QWidget(m_groupboxMesures)),
    m_hlayoutMesures(new QHBoxLayout(m_widgetMesures)),
    m_vlayoutMesures(new QVBoxLayout(m_widgetMesures)),
    m_groupboxOptions(new QGroupBox("Options", this)),
    m_vlayoutOptions(new QVBoxLayout(m_groupboxOptions)),
    m_buttonRAZ(new QPushButton("Remise à zéro", m_groupboxOptions)),
    m_widgetAlpha(new QWidget(m_groupboxOptions)),
    m_hlayoutAlpha(new QHBoxLayout(m_widgetAlpha)),
    m_labelAlphaText(new QLabel("Alpha :", m_groupboxOptions)),
    m_labelAlphaValeur(new QLabel("50", m_groupboxOptions)),
    m_sliderAlpha(new QSlider(m_groupboxOptions)),
    m_hlayoutCouleur(new QHBoxLayout(m_groupboxOptions)),
    m_labelCouleur(new QLabel("Couleur :", m_groupboxOptions)),
    m_buttonCouleur(new QToolButton(m_groupboxOptions)),
    m_couleur(Qt::yellow),
    m_hlayoutLongueur(new QHBoxLayout(m_groupboxOptions)),
    m_labelLongueur(new QLabel("Longueur :  ", m_groupboxOptions)),
    m_spinboxLongueur(new QSpinBox(m_groupboxOptions)),
    m_longueur(20),
    m_hlayoutLargeur(new QHBoxLayout(m_groupboxOptions)),
    m_labelLargeur(new QLabel("Largeur :", m_groupboxOptions)),
    m_spinboxLargeur(new QSpinBox(m_groupboxOptions)),
    m_largeur(5),
    m_mesureList()
{
    // Alpha
    m_sliderAlpha->setMaximum(100);
    m_sliderAlpha->setValue(50);
    m_hlayoutAlpha->addWidget(m_labelAlphaText);
    m_hlayoutAlpha->addWidget(m_labelAlphaValeur);
    m_labelAlphaText->setAlignment(Qt::AlignRight);
    m_labelAlphaValeur->setAlignment(Qt::AlignLeft);
    m_sliderAlpha->setOrientation(Qt::Horizontal);
    QObject::connect(m_sliderAlpha, SIGNAL(valueChanged(int)), m_labelAlphaValeur, SLOT(setNum(int)));

    // Couleur
    QPixmap px(20, 20);
    px.fill(m_couleur);
    m_buttonCouleur->setIcon(px);
    m_hlayoutCouleur->addWidget(m_labelCouleur);
    m_hlayoutCouleur->addStretch(2);
    m_hlayoutCouleur->addWidget(m_buttonCouleur);
    m_hlayoutCouleur->addStretch(1);
    QObject::connect(m_buttonCouleur, SIGNAL(clicked()), this, SLOT(ouvrirCouleur()));

    // Longueur
    m_spinboxLongueur->setMinimum(1);
    m_spinboxLongueur->setValue(m_longueur);
    m_spinboxLongueur->setMaximum(999);
    m_hlayoutLongueur->addWidget(m_labelLongueur);
    m_hlayoutLongueur->addStretch(1);
    m_hlayoutLongueur->addWidget(m_spinboxLongueur);
    QObject::connect(m_spinboxLongueur, SIGNAL(valueChanged(int)), this, SLOT(sendParam()));

    // Largeur
    m_spinboxLargeur->setMinimum(1);
    m_spinboxLargeur->setMaximum(100);
    m_spinboxLargeur->setValue(m_largeur);
    m_hlayoutLargeur->addWidget(m_labelLargeur);
    m_hlayoutLargeur->addStretch(1);
    m_hlayoutLargeur->addWidget(m_spinboxLargeur);
    QObject::connect(m_spinboxLargeur, SIGNAL(valueChanged(int)), this, SLOT(sendParam()));

    // Options
    m_vlayoutOptions->addWidget(m_buttonRAZ);
    m_vlayoutOptions->addWidget(m_widgetAlpha);
    m_vlayoutOptions->addWidget(m_sliderAlpha);
    m_vlayoutOptions->addLayout((m_hlayoutCouleur));
    m_vlayoutOptions->addLayout((m_hlayoutLongueur));
    m_vlayoutOptions->addLayout((m_hlayoutLargeur));
    m_vlayoutOptions->setSpacing(0);
    QObject::connect(m_buttonRAZ, SIGNAL(clicked()), this, SLOT(remiseAZero()));

    // Mesures
    m_vlayoutMesures->addStretch(1);
    m_hlayoutMesures->addStretch(1);
    m_hlayoutMesures->addLayout(m_vlayoutMesures);
    m_hlayoutMesures->addStretch(1);
    m_widgetMesures->setLayout(m_hlayoutMesures);
    m_scrollareaMesures->setWidgetResizable(true);
    m_scrollareaMesures->setWidget(m_widgetMesures);
    m_scrollareaMesures->setFrameShape(QFrame::NoFrame);
    m_vlayoutGroupBoxMesures->addWidget(m_scrollareaMesures);
    m_vlayoutGroupBoxMesures->setMargin(0);

    // Total
    m_vlayoutTotal->addWidget(m_groupboxOptions);
    m_vlayoutTotal->addWidget(m_groupboxMesures);

}

void PanneauMesure::add(QPointF point1, QPointF point2, QPointF point3, QGraphicsItem *line1, QGraphicsItem *line2)
{
    Mesure mesure(point1, point2, point3, line1, line2, this);
    m_mesureList.push_back(mesure);
    //m_vlayoutMesures->insertWidget(0, &m_mesure);
    //QObject::connect(m_buttonRAZ, SIGNAL(clicked()), &m_mesure, SLOT(close()));
}

void PanneauMesure::remiseAZero()
{
    m_sliderAlpha->setValue(50);
    m_longueur = 20;
    m_spinboxLongueur->setValue(m_longueur);
    m_largeur = 5;
    m_spinboxLargeur->setValue(m_largeur);
    m_couleur = Qt::yellow;
    QPixmap px(20, 20);
    px.fill(m_couleur);
    m_buttonCouleur->setIcon(px);
    emit changementParam(m_couleur, m_longueur, m_largeur);
}

void PanneauMesure::ouvrirCouleur()
{
    QColor color = QColorDialog::getColor(m_couleur);
    if (color.isValid()) m_couleur=color;
    QPixmap px(20, 20);
    px.fill(m_couleur);
    m_buttonCouleur->setIcon(px);
    emit changementParam(m_couleur, m_longueur, m_largeur);
}

void PanneauMesure::sendParam()
{
    m_longueur = m_spinboxLongueur->value();
    m_largeur = m_spinboxLargeur->value();
    emit changementParam(m_couleur, m_longueur, m_largeur);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:11:24.337

从错误日志看来，它`Mesure`继承或包含一个`QWidget`不可*复制*的 。在 C++03 中，将类型放在序列中的要求是它们是可*复制构造的*，而您的类型不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:27:16.000

正如 K-Ballo 指出的那样，你不能拥有一系列不可复制构造的元素，我只是存储了一系列指针，如下所示：

宣言：

```
std::vector<Mesure*> m_mesureList; 
```

功能：

```
void PanneauMesure::add(QPointF point1, QPointF point2, QPointF point3, QGraphicsItem *line1, QGraphicsItem *line2)
{
    Mesure* mesure = new Mesure(point1, point2, point3, line1, line2, this);
    m_mesureList.push_back(mesure);
} 
```

# plsql - 如何在过程中插入 column_name 作为字符串，同时通过包含相同 column_name 的选择查询动态选择值

> ID：10986044
> 
> 赞同：0
> 
> 时间：2012-06-11T19:06:17.910
> 
> 标签：plsql

假表

```
row_id   information_date
1        10-oct-1987
2        NULL 
```

tbl_error

```
row_id 列名
2 信息_日期

```

```
create or replace procedure test(column_name in varchar2)
as
begin
    insert into tbl_error 
    values(select row_id , column_name from dummy where column_name IS 
NULL);

end;
end test; 
```

--调用

```
call test('information_date'); 
```

输出

```
tbl_error
row_id     column_name
2          NULL 
```

我想将 'information_date' 记录到 tbl_error 中，但是在执行时它会存储 NULL，因为它从虚拟如何插入字符串中获取值。

期望的输出

```
ROW_ID  COLUMN_NAME
2       INFORMATION_DATE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:20:13.787

解决方案是

```
insert into tbl_error 
    values(select row_id , chr(39) || column_name || chr(39) from dummy where column_name IS NULL); 
```

# facebook - 在后 FBML 时代，将 Facebook 画布应用程序 (iframe) 国际化的最佳方式是什么？

> ID：10986045
> 
> 赞同：3
> 
> 时间：2012-06-11T19:06:22.860
> 
> 标签：facebook, facebook-fql, facebook-canvas, facebook-javascript-sdk

在（最终）向我的 Facebook 应用程序添加一些分析并意识到英语在我的用户语言列表中的位置非常靠后，我开始查看[关于国际化的官方文档](https://developers.facebook.com/docs/internationalization/)。

但是，文档几乎完全引用了 FBML 和`<fb:intl>`标签，并且截至本月（2012 年 6 月），对 FBML 的支持已被[完全删除](https://developers.facebook.com/blog/post/2012/06/06/platform-updates--operation-developer-love/)。

文档简要提到了使用 REST API 调用 intl.getTranslations（这也是遗留的），或查询翻译 FQL 表（对于以前的简单任务来说，这似乎是很多开销）。

那么，我在这里遗漏了一些明显的东西吗？**在不使用 FBML 的情况下，在画布应用程序上标记和显示翻译短语的新推荐方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:31:42.830

我不认为有 Facebook 推荐的方式，但我们是这样做的： - 我们阅读 Facebook 通过签名请求发送的 facebook 语言环境 - 我们查看是否有这种语言的翻译 - 如果没有，我们提供默认值语

显然，这需要您自己执行翻译，而不是使用 Facebook 提供的社区和工具，但是您可以编写一个工具来从谷歌翻译中获取翻译。

希望有帮助吗？

# jquery - jquery datepicker在初始化后更改默认日期

> ID：10986047
> 
> 赞同：4
> 
> 时间：2012-06-11T19:06:24.387
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

在 jQuery UI datepicker Docs ( [http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/) ) 它说你可以在初始化后更改默认日期

```
$( ".selector" ).datepicker( "option", "defaultDate", +7 ); 
```

其中 +7 可以是日期字符串、日期对象或从今天开始的天数

我似乎无法让它工作。如果我在像这样初始化时设置 defaultDate

```
$(".selector").datepicker({defaultDate:myDateObject}); 
```

它可以工作，但如果我尝试使用访问器方法，我无法让它工作。

有人可以试试这个，让我知道它是否对他们有用，如果我只是在某个地方失去了理智。

**编辑：**这是一个 jsFiddle 示例 [http://jsfiddle.net/Bkw7H/](http://jsfiddle.net/Bkw7H/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:38:20.330

我创建了一个有效的[版本](http://jsfiddle.net/Bkw7H/5/)- 你需要使用 setdate 函数，就像这样。

```
$("div").datepicker();
$("div").datepicker('setDate', date);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:57:42.363

这是一个已知的错误：[http ://bugs.jqueryui.com/ticket/6195](http://bugs.jqueryui.com/ticket/6195)

显然，输入元素不会出现该错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:53:40.093

我发现当您想向已初始化的日期选择器元素添加选项时`load`，在对象事件上添加选项是有效的。`window`

像这样：

```
function noSundays(date) {
    var weekday=new Array(7);
    weekday[0]="Sunday";
    weekday[1]="Monday";
    weekday[2]="Tuesday";
    weekday[3]="Wednesday";
    weekday[4]="Thursday";
    weekday[5]="Friday";
    weekday[6]="Saturday";

    if(weekday[date.getDay()] == 'Sunday')
        return [false, '', 'Not open on Sundays'];

    return [true];
}

jQuery(window).load(function(){

    jQuery('.hasDatepicker').datepicker('option', 'maxDate', '+1m +7d');
    jQuery('.hasDatepicker').datepicker('option', 'beforeShowDay', noSundays);

}); 
```

# magento - Magento - 显示简单的产品图片和描述

> ID：10986051
> 
> 赞同：0
> 
> 时间：2012-06-11T19:06:50.953
> 
> 标签：magento

我真的需要magento中的以下内容。当客户显示配置产品并选择颜色时，简单的产品图像和描述应显示。我已经在使用 SCP 产品，但颜色和尺寸都需要选择，否则不会改变图片。此外，此模块更改了电子邮件项目的外观以及 pdf 的外观

有人知道不同的解决方案吗？

* * *

感谢您的回复，让我把它分成我遇到的2个问题。

问题1：

当我使用 SCP 时，他不再在我的电子邮件和 pdf 中的项目表上显示颜色和大小。因此，不再容易看到我需要抓取哪种产品进行交付。

问题2：

事实上，他需要更改下拉菜单、大小和颜色以显示简单的产品细节。这需要更改为仅颜色。我发现了一个帖子，上面写了一些代码来让它工作，但不适合我。

[http://www.magentocommerce.com/boards/site.php/viewthread/30929/P0/](http://www.magentocommerce.com/boards/site.php/viewthread/30929/P0/)

所以我改变了我通过mysql找到的attribID，并将值颜色更改为我的colorattribute，即kleurproduct

添加了此代码

```
Product.Config.prototype.reloadPrice = function() {
var childProductId = this.getMatchingSimpleProduct();
var childProducts = this.config.childProducts;
var attribID = 158;
var kleurproductDropdown = document.getElementById('attribute' + attribID);
var kleurproductSelectedIndex = kleurproductDropdown.selectedIndex;
var kleurproduct_value  = kleurproductDropdown.options[kleurproductSelectedIndex].text;
//if the price ranges option is checked in the backend then a colon and the price is added to the dropdown
if (kleurproduct_value.indexOf(':') > -1) {
    kleurproduct_value = kleurproduct_value.substr(0,kleurproduct_value.indexOf(':'));
}
var usingZoomer = false;
if(this.config.imageZoomer){
    usingZoomer = true;
}

if (childProductId){
    var price = childProducts[childProductId]["price"];
    var finalPrice = childProducts[childProductId]["finalPrice"];
    optionsPrice.productPrice = finalPrice;
    optionsPrice.productOldPrice = price;
    optionsPrice.reload();
    optionsPrice.reloadPriceLabels(true);
    optionsPrice.updateSpecialPriceDisplay(price, finalPrice);
    this.updateProductShortDescription(childProductId);
    this.updateProductDescription(childProductId);
    this.updateProductName(childProductId);
    this.updateProductAttributes(childProductId);
    this.updateFormProductId(childProductId);
    this.addParentProductIdToCartForm(this.config.productId);
    this.showCustomOptionsBlock(childProductId, this.config.productId);
    if (usingZoomer) {
        this.showFullImageDiv(childProductId, this.config.productId);
    }else{
        this.updateProductImage(childProductId);
    }

}
//added else if for when just a kleurproduct is selected
else if (kleurproduct_value) {
    for (var product in childProducts) {
        //find the kleurproduct attribute in the childProduct html
        var colStartPos = childProducts[product].productAttributes.indexOf('<th class="label">kleurproduct</th>')
        colStartPos = childProducts[product].productAttributes.indexOf('>', colStartPos + 28)
        var colEndPos = childProducts[product].productAttributes.indexOf('</td>', colStartPos)
        //check each child product for matching kleurproduct
        if (childProducts[product].productAttributes.substr(colStartPos + 1, colEndPos - colStartPos - 1)==kleurproduct_value) {
            childProductId = product;
            var price = childProducts[childProductId]["price"];
            var finalPrice = childProducts[childProductId]["finalPrice"];
            optionsPrice.productPrice = finalPrice;
            optionsPrice.productOldPrice = price;
            optionsPrice.reload();
            optionsPrice.reloadPriceLabels(true);
            optionsPrice.updateSpecialPriceDisplay(price, finalPrice);
            this.updateProductShortDescription(childProductId);
            this.updateProductDescription(childProductId);
            this.updateProductName(childProductId);
            this.updateProductAttributes(childProductId);
            this.updateFormProductId(childProductId);
            this.addParentProductIdToCartForm(this.config.productId);
            this.showCustomOptionsBlock(childProductId, this.config.productId);
            if (usingZoomer) {
                this.showFullImageDiv(childProductId, this.config.productId);
            }else{
                this.updateProductImage(childProductId);
             }
            //one product was found, exit the loop
            break;
         }
    }
}
else {
    var cheapestPid = this.getProductIdOfCheapestProductInScope("finalPrice");
    //var mostExpensivePid = this.getProductIdOfMostExpensiveProductInScope("finalPrice");
    var price = childProducts[cheapestPid]["price"];
    var finalPrice = childProducts[cheapestPid]["finalPrice"];
    optionsPrice.productPrice = finalPrice;
    optionsPrice.productOldPrice = price;
    optionsPrice.reload();
    optionsPrice.reloadPriceLabels(false);
    optionsPrice.updateSpecialPriceDisplay(price, finalPrice);
    this.updateProductShortDescription(false);
    this.updateProductDescription(false);
    this.updateProductName(false);
    this.updateProductAttributes(false);
    this.showCustomOptionsBlock(false, false);
    if (usingZoomer) {
        this.showFullImageDiv(false, false);
    }else{
        this.updateProductImage(false);
    }
} 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:18:59.327

SCP 扩展做了很多事情。拳头是您提到的 UI 增强功能，其中图像和其他产品细节发生变化，以匹配所选的特定简单产品。SCP 所做的另一件事是改变 Magento 的定价方式，以便在购买可配置产品时，向客户收取所选简单产品变体的任何价格而不是父可配置价格。定价逻辑的变化是电子邮件和 pdf 格式变化背后的原因。

当一个简单的产品通过两个不同的属性链接到一个可配置的属性中时，用户需要同时选择这两个属性，以便唯一地标识特定的简单产品，从而唯一地标识要显示的图像。

但是，在服装示例中，一旦选择了颜色，就可以显示图像，因为在大多数情况下，每种尺寸的图像都是相同的。SCP 扩展提供了它自己的 JavaScript，它响应选择框上的更改事件以触发 Ajax 加载等。一旦选择了颜色，就可以修改这个 JavaScript 代码，找到第一个大小，然后第一个对应的简单产品并加载它的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T09:58:39.000

你可以试试这个新模块，它比 SCP 做得更多

[SDOCP - 可配置产品的简单细节](http://www.magentocommerce.com/magento-connect/sdocp-simple-details-on-configurable-products.html)

# android - 在 android 中创建启动画面（对于 noob）

> ID：10986052
> 
> 赞同：0
> 
> 时间：2012-06-11T19:06:51.877
> 
> 标签：android

> **可能重复：**
> [创建一个真正的闪屏](https://stackoverflow.com/questions/6519649/create-a-true-splash-screen)

有人可以指点我一个教程，在那里我可以学习如何为我的应用程序制作启动画面。就像假人的闪屏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:09:06.873

这可以帮助你：

[http://www.jameselsey.co.uk/blogs/techblog/how-to-add-a-splash-screen-to-your-android-application-in-under-5-minutes/](http://www.jameselsey.co.uk/blogs/techblog/how-to-add-a-splash-screen-to-your-android-application-in-under-5-minutes/)

或者这个： [http ://www.droidnova.com/how-to-create-a-splash-screen,561.html](http://www.droidnova.com/how-to-create-a-splash-screen,561.html)

# javascript - 以编程方式从 WYSIHTML5 编辑器检索内容

> ID：10986054
> 
> 赞同：5
> 
> 时间：2012-06-11T19:07:04.853
> 
> 标签：javascript, jquery, editor, wysiwyg, wysihtml5

如何以编程方式从`WYSIHTML5`编辑器中检索内容？假设编辑器被实例化为：

```
var editor = new wysihtml5.Editor
(
   $(this.el).find('textarea').get(0),
   {
      toolbar:      "toolbar",
      parserRules:  wysihtml5ParserRules
   }
); 
```

我想获得编辑关于`blur`活动的内容

```
editor.on
(
   "blur",
   function()
   {
      //what here?
   }
); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T11:18:46.660

使用 API 会好很多 `editor.getValue()`

（@dalen 在上面的评论中提到了这一点）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T19:16:12.873

这里是如何（在这里使用 jQuery）：

```
$('iframe').contents().find('.wysihtml5-editor').html(); 
```

要改为查找文本，请使用`text()`而不是`html()`.

供参考：

*   我使用[jQueryify 小书签对它的](http://www.learningjquery.com/2006/12/jquerify-bookmarklet)[这个演示页面进行了 jQuerified](http://xing.github.com/wysihtml5/examples/advanced.html)
*   在编辑器中输入了一些文本
*   在控制台输入上面的代码，输出是输入文本

*在您的应用程序中，您不需要 jQueryify 小书签，我使用它在该演示页面上注入 jQuery，以便我可以使用它来获取编辑器的值。*

* * *

话虽如此，该编辑器中通常应该有一些内置方法来获取当前值，您应该查看文档:)

# image - 在调用 mdwt 期间未分配一个或多个输出参数 - 小波变换

> ID：10986056
> 
> 赞同：1
> 
> 时间：2012-06-11T19:07:08.077
> 
> 标签：image, matlab, image-processing, wavelet

我正在尝试使用小波变换过滤图像。我尝试使用此处的功能：http `mdwt`: [//www.mathworks.com/matlabcentral/fileexchange/6391-wavelets-based-denoising/content/mdwt.m](http://www.mathworks.com/matlabcentral/fileexchange/6391-wavelets-based-denoising/content/mdwt.m)，以及此链接中的其他功能，如下所示：

```
img = imread('A10T_1.jpg');       
h = daubcqf(4,'min');
L = 1;
y = mdwt(img,h,L); 
```

问题是在最后一行我得到 : `One or more output arguments not assigned during call to`,`Error in => y = mdwt(img,h,L);`

哪里有问题？该函数`mdwt`仅包含声明，仅此而已，我可以看到这就是问题所在。谁能帮我解决这个问题？或者还有其他方法可以在不使用这些函数的情况下使用小波变换过滤图像吗？

提前致谢。

编辑 ：

现在我尝试使用以下代码显示图像去噪使用小波变换：

```
RGB = imread('small.jpg');
 J = imnoise(RGB,'salt & pepper',0.05);h = daubcqf(6);  
      noisyLena = J;
      figure; colormap(gray); imagesc(RGB); title('Original Image');
       figure; colormap(gray); imagesc(noisyLena); title('Noisy Image'); 
%       Denoise lena with the default method based on the DWT
      [denoisedLena,xn,opt1] = denoise(noisyLena,h);
      figure; colormap(gray); imagesc(denoisedLena); title('denoised Image'); 
```

但我得到了错误

```
??? The matrix row dimension must be of size m*2^(L)

Error in ==> denoise at 171
  [xd , LL]= mdwt(double(i),h,L);

Error in ==> wavelet_start at 20
      [denoisedLena,xn,opt1] = denoise(noisyLena,h); 
```

其中去噪函数是这样的：http: [//www.mathworks.com/matlabcentral/fileexchange/6391-wavelets-based-denoising/content/denoise.m](http://www.mathworks.com/matlabcentral/fileexchange/6391-wavelets-based-denoising/content/denoise.m)

哪里有问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:18:22.970

该集合中的许多文件都是用 C 编写的 MEX 文件。M 文件仅用于文档，但由于您没有编译 MEX 文件，MATLAB 正在尝试为代码本身运行 M 文件。在运行代码之前，您需要为您的平台构建它们。

尝试阅读提供的 INSTALL.txt 文档，这相当于在该目录中运行“编译”。

您的下一个挑战将是此代码过时，并且您可能与较新的 MATLAB 版本存在兼容性问题。但是试试看，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:56:11.300

您尝试使用的功能定义为

```
function [y,L] = mdwt(x,h,L); 
```

当您在代码中调用该函数时，您只需分配第一个输出参数

```
y = ... 
```

该函数有两个输出参数，

```
[y,L] = ... 
```

使用该功能时，您必须同时分配两者。

# html - 属性样式问题

> ID：10986059
> 
> 赞同：2
> 
> 时间：2012-06-11T19:07:13.357
> 
> 标签：html, css

我的网站有一个容器 div，其中包含以下 CSS 代码

```
.container {
    width: 1020px;
    background-color:transparent;
    margin: 0 auto;
} 
```

并且它有一个固定的宽度，如上所示。在容器中有一个导航栏和一个部分，我正在使用一个`<hr>`属性来分隔它们，但我遇到的问题是，即使我给这个 hr 100% 的宽度，它也只适合我的容器，但我希望它扩展到整个页面。

有什么办法可以管理吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:12:45.637

当给定相对大小时，元素的宽度是相对于其父元素的。那么，在这种情况下，没有办法让`hr`元素`width`相对于另一个父元素。

但是，如果需要，您可以提供大于 的宽度`100%`，然后使用负边距居中：

```
​div {
    width: 50%;
    margin: 0 auto;
    border: 1px solid #f90;
}

​div hr {
    width: 190%;
    margin-left: -45%;
}​

<div id="a">
    <hr />
</div>​ 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/hEaUx/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:14:40.280

我认为在这种情况下，最好不要在容器上设置宽度或边距，而是在内容本身上设置。如果您在该容器内有一个简单的 HTML 结构，那么应该很简单。

**HTML**

```
<div id="container">
    <p>Lorem ipsum dolor sit amet</p>
    <hr>
    <p>Lorem ipsum dolor sit amet</p>
    <hr>
    <p>Lorem ipsum dolor sit amet</p>
    <hr>
    <p>Lorem ipsum dolor sit amet</p>
</div> 
```

**CSS**

```
#container p { width: 500px; margin: 0 auto; } 
```

[http://jsfiddle.net/cEGNb/1/](http://jsfiddle.net/cEGNb/1/)

# python - 在python中循环文件名

> ID：10986065
> 
> 赞同：1
> 
> 时间：2012-06-11T19:07:35.103
> 
> 标签：python

我希望在其上运行脚本的目录中有无数个文件。它们都有一个类似的文件名：prefix_foo_123456_asdf_asdfasdf.csv。我知道如何使用shell中文件名中的变量而不是python来循环目录中的文件。有没有相应的方法来做类似的事情

```
$i=0

for $i<100

./process.py prefix_foo_$i_*

$i++

endloop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:09:55.833

您可以使用`glob.glob`或`glob.iglob`获取文件名的列表/迭代器。

例如，如果您的目录有“file1.txt”、“file2.txt”、“file3.txt”

```
import glob
print (glob.glob('*.txt'))  #['file1.txt','file2.txt','file3.txt'] 
```

虽然列表不一定是排序的。

你的循环可以写成：

```
import subprocess
import glob
for i in range(100):
    files=glob.glob('prefix_foo_%d_*'%(i))
    subprocess.call(['./process.py']+files) 
```

当然，在 python 中使用 subprocess 来运行另一个 python 程序可能不是最好的设计......（你可能会从另一个模块导入你需要的东西并运行它而不产生另一个进程）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:15:24.600

使用标准库 glob。假设 process.py 的功能在函数 process_one_file 中：

```
from glob import glob
from process import process_one_file

for i in range(100):
    process_one_file(glob('prefix_foo_{}_*'.format(i))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T19:19:21.307

其他方式：

```
from os import walk

>>> for filename, subdirs, dirs in walk('/home'):
...     print (filename, subdirs, dirs) 
```

输出：

> home/di/workspace/local2stream/mediaelement/.git/info [] ['exclude'] /home/di/workspace/local2stream/mediaelement/.git/logs ['refs'] ['HEAD'] /home/di /workspace/local2stream/mediaelement/.git/logs/refs ['remotes', 'heads'] [] /home/di/workspace/local2stream/mediaelement/.git/logs/refs/remotes ['origin'] [] /home/di/workspace/local2stream/mediaelement/.git/logs/refs/remotes/origin [] ['HEAD'] /home/di/workspace/local2stream/mediaelement/.git/logs/refs/heads [] [ 'master'] /home/di/workspace/local2stream/mediaelement/.git/objects ['info', 'pack'] [] /home/di/workspace/local2stream/mediaelement/.git/objects/info [] [ ] /home/di/workspace/local2stream/mediaelement/.git/objects/pack [] ['pack-a378eaa927a4825f049faf10bab35cf5d94545f1.idx','pack-a378eaa927a4825f049faf10bab35cf5d94545f1.pack'] /home/di/workspace/local2stream/mediaelement/.git/refs ['tags', 'remotes', 'heads'] [] /home/di/workspace/local2stream/mediaelement/. git/refs/tags [] [] /home/di/workspace/local2stream/mediaelement/.git/refs/remotes ['origin'] [] /home/di/workspace/local2stream/mediaelement/.git/refs/remotes /origin [] ['HEAD'] /home/di/workspace/local2stream/mediaelement/.git/refs/heads [] ['master']] [] /home/di/workspace/local2stream/mediaelement/.git/refs/remotes/origin [] ['HEAD'] /home/di/workspace/local2stream/mediaelement/.git/refs/heads [] ['掌握']] [] /home/di/workspace/local2stream/mediaelement/.git/refs/remotes/origin [] ['HEAD'] /home/di/workspace/local2stream/mediaelement/.git/refs/heads [] ['掌握']

# r - 使用 R 将表写入文件会导致不需要的行名列

> ID：10986066
> 
> 赞同：2
> 
> 时间：2012-06-11T19:07:47.513
> 
> 标签：r, matrix, csv, bioconductor

我正在尝试使用 R 将数据列合并到一个制表符分隔的矩阵中。当我使用该`cbind()`函数时，R 出于某种原因添加了指定行号的第一列，即使我没有包含这样的列作为参数。例如，当我`cbind()`在以下列上使用时：

x|y|z
x|y|z
x|y|z

`cbind()`产生：
1|x|y|z
2|x|y|z
3|x|y|z

我尝试使用子集和 a 删除第一列我遇到的其他几种方法。无论我做什么，当我将此矩阵写入 .txt 文件时，行号仍会显示为附加列（因此在 excel 中打开时，您不仅会看到 excel 提供的行号，还会看到来自此 txt 文件的生成）。我可以在 excel 中手动删除它们，但这对于我计划生成的表的数量来说并不可行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T19:13:17.133

将`row.names`参数设置为`FALSE`in `write.table`。

# html - 将单选按钮选择从一个 html 表单传递到同一页面上的另一个

> ID：10986068
> 
> 赞同：0
> 
> 时间：2012-06-11T19:07:54.760
> 
> 标签：html

我有一个基于 asp 的购物车，它使用基于 html 的模板来显示产品。在每个产品部分中，我有几件商品，每件商品都有每个商品“包装”的价格和该商品“箱”的价格。在“包装”的每个价格下都有一个数量文本框和一个提交按钮，紧挨着它的是该项目的箱子价格、一个数量文本框和一个提交按钮。通常这很好用，因为每样东西都有不同的价值，并且很容易在页面上列出的每个产品中都有 2 个单独的表格（一个用于“pack”，一个用于“case”）。

但是，我遇到了一个问题，其中一种产品具有通过使用单选按钮设置的选项。现在，当我为“包”设置表单时，会显示单选按钮“功能”，并且当用户按下“包”的提交按钮时，用户选择的任何选择都会正确显示。但是，当他们订购“案例”时，由于它是一个单独的表单，因此它看不到“特征”值并将其与案例提交按钮按下一起传递。

问题是，您能否设置一些单选按钮，并让它们将选择的任何项目传递给 2 个不同的提交按钮？正如我现在所拥有的，包启动表单代码，然后在其中我有案例表单。我在下面添加了一些简化的代码。Product: 和 Features: 之类的东西只是代替所有与此问题无关的格式垃圾的虚拟文本。我在下面显示的 html 代码是我要更改的唯一部分。

```
<form action="addtocart.asp" method="post">
<input name="productid" value="11" type="hidden">
Product:
Features:
Options:
    <input checked="checked" name="Feature" value="1" type="radio">Option1
    <input name="Feature" value="2" type="radio">Option2
    <input name="Required" value="8" type="hidden">
Price Per Pack:
Quantity:
    <input class="txtfield" maxlength="4" size="3" value="1" name="quantity" type="text">
Pack Submit Button:
    <input class="submitbtn" value=" Order " name="Order" type="submit">
Price Per Case:
<form name="casename" action="addtocart.asp" method="post">
Quantity:
    <input class="txtfield" maxlength="4" size="3" value="1" name="quantity" type="text">
    <input name="productid" value="24" type="hidden">
Case Submit Button:
    <input class="submitbtn" value=" Order " name="Order" type="submit">
</form> 
```

上面的“选项”部分是他们选择单选按钮选项的地方，所以是否可以让每个提交按钮传递此信息，或者我是否需要使用 javascript 或类似的东西？

感谢您查看我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:00:53.180

表单值是独立的，因此您有两种选择：

*   如果可能，使用一种形式而不是两种形式
*   选择单选按钮时，使用 javascript 将您需要的值复制到其他表单

此外，据我所知，您不能或不应该在表单中包含表单。它在某些浏览器中可能工作正常，但它是无效的 HTML

# php - facebook cakephp 插件问题

> ID：10986072
> 
> 赞同：1
> 
> 时间：2012-06-11T19:07:58.503
> 
> 标签：php, facebook, cakephp, cakephp-1.3

我正在使用以下内容：

蛋糕PHP 1.3

CakePHP-Facebook-Plugin 3.1.1 (分支 cakephp 1.3)(webtechnick)

php 5.3.x

我的问题在以下第 146 行：

```
https://github.com/webtechnick/CakePHP-Facebook-Plugin/blob/cakephp1.3/controllers/components/connect.php 
```

我已手动将 createUser 设置为 false 作为组件的参数，并通过更改组件本身的默认值（将第 50 行设置为 false）。然而，如果我在第 147 行这样做：

```
print "authUser: ".empty($this->authUser)." createUser: ".$this->createUser; 
```

我明白了`"authUser: 1 createUser: false"`

问题是基于输出线 147 根本不应该执行，这是怎么回事？

```
(1 && false) == false 
```

不？

昨晚差点砸电脑。只是想你可能想知道。

真正的问题是，如果执行此代码，它基本上会在我的用户表中添加一个匿名用户，糟糕的 juju。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:03:05.630

所以底线是，php 中的 var_dump() 可以挽救生命。我失败了，我的错误是一个字符串，谢谢 aptana 自动引号。

# iphone - 如何增加标签栏的大小？

> ID：10986074
> 
> 赞同：2
> 
> 时间：2012-06-11T19:08:12.753
> 
> 标签：iphone, xcode4.3

是否可以增加标签栏的大小？我需要在我的一个项目中增加标签栏的高度！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:13:42.490

试试这个：

```
CGRect viewFrame = yourTabBar.frame;
viewFrame.size.height = 20;
self.tabBar.frame = viewFrame; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:23:05.987

或者...

```
[self.tabBarPropertyName setFrame:CGRectMake(
    self.tabBarPropertyName.frame.origin.x,
    self.tabBarPropertyName.frame.y-(20),
    self.tabBarPropertyName.frame.size.width,
    self.tabBarPropertyName.frame.height+20)]; 
```

# html - 表 onclick 与 rel

> ID：10986075
> 
> 赞同：0
> 
> 时间：2012-06-11T19:08:18.100
> 
> 标签：html, database, html-table, onclick

我正在使用一个需要 rel=ibox 的插件（ibox javascript 插件）

这没有问题：

`<a href="test.php" rel="ibox" title="Test">Test</a>`

但是，我将如何将其实现到此`<tr onclick>`功能中？这是一个表格，我希望每一行都使用 ibox 插件。这可以做到吗？我只见过使用`href`for each的示例`<td>`

```
<tr onclick="window.location.href = 'view.php?id=<?=$objResult["id"];?>';"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T10:26:11.793

你必须使用

`<tr onclick="iBox.show(document.getElementById('your_div_id').innerHTML)">`

或者

`<tr onclick="iBox.showURL('url')">`

# iphone - UIImagePicker 到新视图

> ID：10986076
> 
> 赞同：0
> 
> 时间：2012-06-11T19:08:30.710
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在编写一个应用程序，该应用程序假设从库或相机中获取图像并用它做一些事情。我已经设法加载图片：

```
UIImagePickerController *picker =[[UIImagePickerController alloc] init];
picker.delegate = self;
if ([@"cam" isEqual:[[sender titleLabel] text]]) { 
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
} else if ([@"album" isEqual:[[sender titleLabel] text]]) {
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
}
[self presentModalViewController:picker animated:YES]; 
```

工作正常。but what i am trying to do is when a picture is chosen, i want to go to a new view. 我有`changeView`进入指定视图的方法，但是当我从它调用它时 `-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info` 由于某种原因它不起作用。

程序进入`segue`课堂，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T05:54:10.003

在 imagepicker 的“finishpicking”方法中，我会调用：

```
[[self presentingViewController] dismissViewControllerAnimated:NO completion:nil]; 
```

然后，在您的“呈现”视图控制器中立即执行您对第二个视图的转场，而无需动画。这将使它看起来像 imagepicker 视图和你现在的第二个视图是同一个视图控制器的一部分。这样，您也只在任何给定点呈现单个模态视图控制器。如果您想在模态视图控制器之间传递数据，请设置 imagepicker 的委托协议，将图像数据传递给呈现视图控制器，然后将其推送到第二个模态视图控制器中

```
prepareForSegue 
```

通过设置属性的方法

```
segue.destinationViewController 
```

# google-chrome - Chrome 扩展：webRequest.onBeforeSendHeaders 行为奇怪

> ID：10986077
> 
> 赞同：8
> 
> 时间：2012-06-11T19:08:39.540
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试将“Referer”-HTTP-Header 添加到我的 Chrome 扩展程序中的某些 AJAX 请求。您不能直接在 AJAX 请求中更改它，所以我尝试使用[webRequest api](http://code.google.com/chrome/extensions/webRequest.html "webRequest api（参考）")更改它：

```
chrome.webRequest.onBeforeSendHeaders.addListener(function(data) {
    console.log("onBeforeSendHeaders fired");
    var xdata=data.requestHeaders;
    xdata.push({
        "name":"Referer",
        "value": "http://the.new/referrer"
    })
    return {requestHeaders: xdata};
}, { //Filter
    urls: ["<all_urls>"], //For testing purposes
    types: ["xmlhttprequest"]
},["requestHeaders","blocking"]); 
```

但这不适用于我的扩展程序中的 AJAX 请求。它只在其他 AJAX 请求上触发事件，而不是在我的扩展中完成的那些。
另一个奇怪的事情是，当没有设置“阻塞”标志时一切正常，但是我无法更改标题。

有谁知道解决这个问题的方法（或实现我目标的另一种方法：更改站点请求的“引用者”并检索内容）

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-27T03:55:08.837

这是一个适用于所有情况的工作版本（当引用标头已设置或尚未设置时。）

```
var requestFilter = {
    urls: ["<all_urls>"]
},

extraInfoSpec = ['requestHeaders', 'blocking'],
handler = function(details) {

var isRefererSet = false;
var headers = details.requestHeaders,
    blockingResponse = {};

for (var i = 0, l = headers.length; i < l; ++i) {
    if (headers[i].name == 'Referer') {
        headers[i].value = "http://your-url.com/";
        isRefererSet = true;
        break;
    }
}

if (!isRefererSet) {
    headers.push({
        name: "Referer",
        value: "http://your-url.com/"
    });
}

blockingResponse.requestHeaders = headers;
return blockingResponse;
};

chrome.webRequest.onBeforeSendHeaders.addListener(handler, requestFilter, extraInfoSpec); 
```

不要忘记将以下所有权限添加到您的清单中：

```
"permissions": [  "webRequest", "webRequestBlocking", "<all_urls>" ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T18:11:42.267

当您没有阻塞请求时，您无法设置 Referrer 标头的原因是该请求可能已经发出 - 您收到异步通知，并且无法更改有关请求的任何内容。

要更改标题，我使用以下代码：

```
function mod_headers(header_array,p_name,p_value) {
     var did_set = false;                                                                                      
     for(var i in header_array) {                                                                                                   
         var header = header_array[i];                                                                                              
         var name = header.name;                                                                                                    
         var value = header.value;                                                                                                  

         // If the header is already present, change it:
         if(name == p_name) {
             header.value = p_value;
             did_set = true;
         }                                                                                                         
     }
     // if it is not, add it:
     if(!did_set) { header_array.push( { name : p_name , value : p_value } ); }                                                                                                                       
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-13T10:33:04.257

使用支持 ES6 的 Chrome，修改请求标头可以这样完成：

```
chrome.webRequest.onBeforeSendHeaders.addListener(
  details => {
    details.requestHeaders = details.requestHeaders.filter(rh => rh.name !== 'Referer');
    details.requestHeaders.push({name: 'Referer', value: 'http://the.new/referrer'});
    return {requestHeaders: details.requestHeaders};
  },
  {urls: ['<all_urls>']},
  ['blocking', 'requestHeaders'],
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-22T11:49:00.220

它不工作。请参阅[http://code.google.com/p/chromium/issues/detail?id=132731上的详细信息](http://code.google.com/p/chromium/issues/detail?id=132731)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-11-28T19:20:30.923

```
chrome.webRequest.onBeforeSendHeaders.addListener(function(details) {
     console.log(details);
},{urls: ["<all_urls>"]}); 
```

# asp.net-mvc-3 - MVC 3 模型提交后视图没有被刷新

> ID：10986078
> 
> 赞同：6
> 
> 时间：2012-06-11T19:08:45.437
> 
> 标签：asp.net-mvc-3

我在 MVC 3 项目中的观点有一个奇怪的问题。我有一个用于数据编辑的标准视图（使用模板创建）。当我提交表单时，我更改了`Name`属性，但是当我从控制器返回浏览器后，我仍然可以看到该`lorem`值。为什么 ？

```
 @using (Html.BeginForm())
    { 
        @Html.EditorFor(model => model.Name)
        <input type="submit" value="Save"  />
    }

    public ViewResult EditUserData(int id)
    {
        [...]
        UserData model = new UserData();
        model.Name = "lorem";            

        return View("~/Views/UserDetails.cshtml", model);
    }

    [HttpPost]
    public ViewResult EditUserData(UserData model)
    {
        model.Name = "ipsum";
        return View("~/Views/UserDetails.cshtml", model);    
    }

public class ControlUserData
{
    [...]

    [Required]
    [Display(ResourceType = typeof(Resources), Name = "UserNameFirst")]
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T19:15:01.680

`ModelState`如果要在 post/get 中修改它，则需要从 中删除该值：

```
[HttpPost]
public ViewResult EditUserData(UserData model)
{
    ModelState.Remove("Name");
    model.Name = "ipsum";
    return View("~/Views/UserDetails.cshtml", model);    
} 
```

这是内置的 MVC 行为：所有这些都`Html.Helpers`更喜欢`ModelState`集合中的值而不是实际模型值。

这里有一篇很好的文章：[ASP.NET MVC Postbacks and HtmlHelper Controls ignoring Model Changes](http://www.west-wind.com/weblog/posts/2012/Apr/20/ASPNET-MVC-Postbacks-and-HtmlHelper-Controls-ignoring-Model-Changes)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T19:15:41.603

这是设计使然。MVC 假设您希望在处理发布操作时显示用户最初提交的内容。请参阅[此相关的堆栈溢出帖子](https://stackoverflow.com/questions/10920517/return-a-modified-viewmodel-to-view/10920956#10920956)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T09:25:08.340

只是一个小编辑...用于刷新整个模型

```
[HttpPost]
public ViewResult EditUserData(UserData model)
{
   UserData newmodel = new UserData();
   ModelState.Clear();
   model = newmodel;
   return View("~/Views/UserDetails.cshtml", model);    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-15T23:23:18.633

为单个字段更新 ModelState（在回发时，视图使用此集合，而不是传递的模型）具有更简单的解决方法。这是我刚刚在返回相同视图之前更新特定字段的操作：

```
var newVal = new ValueProviderResult("updated value", "updated value", CultureInfo.InvariantCulture);
ModelState.SetModelValue("MyFieldName", newVal); 
```

根据您使用的 .NET/MVC 版本，[ModelStateDictionary.SetModelValue()](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelstatedictionary.setmodelvalue?view=aspnetcore-1.0)具有其他更简单的重载。

# jquery - include new input values when selecting from the dom using jquery

> ID：10986085
> 
> 赞同：0
> 
> 时间：2012-06-11T19:09:50.150
> 
> 标签：jquery, html, dom

The below snippet illustrates the problem, when the user adds some input to the second text input field, the alert does not include the new input.

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $('#click').live('click',function(){ alert($('#test').html())})
  })
</script>

<div id="test">
<input type="text" value="test"/>
<input type="text" value=""/>
</div>

<a id="click">clickme</a> 
```

for convenience: [http://jsfiddle.net/CqPkP/](http://jsfiddle.net/CqPkP/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:16:46.230

The `.html()` function will not get the updated DOM attributes. You have to manually get the updated attributes.. check below demo,

**DEMO:** [http://jsfiddle.net/skram/CqPkP/2/](http://jsfiddle.net/skram/CqPkP/2/)

**Full Code:**

```
$(document).ready(function() {
    $('#click').live('click', function() {
        alert($('#test').formhtml())
    })
});

(function($) {
    var oldHTML = $.fn.html;

    $.fn.formhtml = function() {
        if (arguments.length) return oldHTML.apply(this, arguments);
        $("input,button", this).each(function() {
            this.setAttribute('value', this.value);
        });
        $("textarea", this).each(function() {
            // updated - thanks Raja!
            this.innerHTML = this.value;
        });
        $("input:radio,input:checkbox", this).each(function() {
            // im not really even sure you need to do this for "checked"
            // but what the heck, better safe than sorry
            if (this.checked) this.setAttribute('checked', 'checked');
            else this.removeAttribute('checked');
        });
        $("option", this).each(function() {
            // also not sure, but, better safe...
            if (this.selected) this.setAttribute('selected', 'selected');
            else this.removeAttribute('selected');
        });
        return oldHTML.apply(this);
    };

    //optional to override real .html() if you want
    // $.fn.html = $.fn.formhtml;
})(jQuery); 
```

**Ref:** [jQuery html() in Firefox (uses .innerHTML) ignores DOM changes](https://stackoverflow.com/questions/1388893/jquery-html-in-firefox-uses-innerhtml-ignores-dom-changes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:14:37.803

Im not sure if I understand u correct but try to use val() function to retrieve the value of the textbox. See mor infos here in the docs [http://api.jquery.com/val/](http://api.jquery.com/val/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:19:52.110

When the user enters input into an `input` element, it does not update the HTML of that input. So calling `.html()` on it won't give you the new data that is in the field.

If you want to just get all the values in the input fields, you can do something like this:

```
$('#click').live('click',function(){
  alert($('#test input').map(function() { return this.value; }).get());
}); 
```

You have to use `map` because calling `val()` will only give you the value of the first `input` element.

# mysql - 如何为以下情况构建连接查询？

> ID：10986087
> 
> 赞同：0
> 
> 时间：2012-06-11T19:09:54.643
> 
> 标签：mysql, sql

我有以下表结构：

```
 Item:
 -----------------------
 item_id INT (PRIMARY),
 category_id MEDIUMINT,
 name VARCHAR(40)

 reservation:
 -----------------------
 id INT (PRIMARY),
 item_id INT,
 date DATE,
 slot VARCHAR(50) 
```

我希望表 Item 中特定 category_id 的所有行与保留表 ON 列 item_id WHERE reservation.date = 'something' 的连接在查询中返回。不保证预订行将在查询日期可用。但是即使没有保留行，我也需要从 Item 表中返回相应 category_id 的所有行。如何实现这一目标？

问候，
拉维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:12:18.300

使用左连接。例如使用[SQL Fiddle](http://sqlfiddle.com/#!2/728fe/2)我想出了：

```
select *
from item as i
left join reservation as r
  on i.item_id = r.item_id and r.date is not null (where reservation date is set or use r.date = 'date' if you want a specific date)
where i.category_id = '1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:13:20.233

听起来`left join`很合适。如果将日期限制添加到`on`子句，日期限制将不会过滤掉`Item`.

```
select  *
from    Item i
left join
        reservation r
on      i.item_id = r.item_id
        and r.date = '2012-06-11'
where   category_id = 42 
```

# android - 来自string.xml的Android Webview IMG得到异常

> ID：10986090
> 
> 赞同：0
> 
> 时间：2012-06-11T19:10:01.577
> 
> 标签：android, webview

我正在尝试在 ICS Android 应用程序上显示本地资产目录中的图像。

png 是 40.png 它在 appname\assets\40.png 下 string.xml 中的字符串是：

```
 <string name="p40"><img src="file:///android_asset/40.png"/></string> 
```

这是我用来加载 IMG 的代码：

```
 String myhtmlIMG= getResources().getString(R.string.p40);
              webView.loadData(myhtmlIMG,"text/html", null); 
```

当我运行这个时，我得到一个异常：

```
06-11 15:02:04.986: W/System.err(12939):    at libcore.net.http.AbstractHttpInputStream.checkNotClosed(AbstractHttpInputStream.java:68)
06-11 15:02:04.986: W/System.err(12939):    at libcore.net.http.FixedLengthInputStream.read(FixedLengthInputStream.java:41)
06-11 15:02:04.990: W/System.err(12939):    at java.io.InputStreamReader.read(InputStreamReader.java:244)
06-11 15:02:04.990: W/System.err(12939):    at java.io.BufferedReader.fillBuf(BufferedReader.java:130)
06-11 15:02:04.990: W/System.err(12939):    at java.io.BufferedReader.readLine(BufferedReader.java:354) 
```

但是，如果我要在 appname\assets\p40.html 中创建一个 html 文件并包含相同的标签，我会得到图像。问题是我必须使用插入到 html 字符串中的动态 png，所以这不是解决方案。

也许是我的报价处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:22:32.820

这是一个逃避问题。尝试使用 CDATA 标签：

```
<string name="p40"><![CDATA[<img src="file:///android_asset/40.png"/>]]></string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:24:32.117

如果上述方法不起作用，请转义所有内容并执行 Html.fromHTML()

```
<string name="p40">&lt;img src=\"file:///android_asset/40.png\"/&gt;</string> 
```

然后

```
 String myhtmlIMG= Html.fromHtml(getResources().getString(R.string.p40));
          webView.loadData(myhtmlIMG,"text/html", null); 
```

-edit- 只记得图像未加载的原因。您必须覆盖 webview 加载视图以使其能够从您的资产文件夹加载。此线程中的代码。

[在 WebView 中显示 Android 资产文件？](https://stackoverflow.com/questions/5320288/displaying-android-asset-files-in-a-webview)

# shell - Solaris find 命令的打印选项

> ID：10986091
> 
> 赞同：1
> 
> 时间：2012-06-11T19:10:06.320
> 
> 标签：shell, unix, scripting, solaris

我在 cygwin 上运行以下命令

```
$ find . -printf "%p %m %s \n" | sort -n 
```

输出如下...

```
./.metadata/.log 700 17247
./.metadata/.mylyn 700 0
./.metadata/.mylyn/repositories.xml.zip 700 423
./.metadata/.mylyn/tasks.xml.zip 700 250
./.metadata/.plugins/com.google.appengine.eclipse.core/appengine-sdk-proxy.jar 700 8782 
```

（要求的格式是八进制的文件名/权限/字节大小）

我想知道如何在 Solaris 上创建类似的输出。（上面的命令在solaris上不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:20:59.920

您可以使用 Perl 收集与 find 相同的信息`-printf`：

```
find . -print | perl -lne '$,=" "; @s=stat $_; print $_, $s[2], $s[7]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:25:38.383

这应该适用于任何 Unix / Unix 之类的操作系统，即不需要 gnu find、perl 或类似的：

```
PATH=`getconf PATH`
LC_ALL=C find . -exec ls -dils {} + | awk '
function parse(s,level)
{
    p=0;
    r=substr(s, 1 ,1)
    w=substr(s, 2 ,1)
    x=substr(s, 3 ,1)
    if(r=="r") p+=4;
    if(w=="w") p+=2;
    if(x=="x") p+=1;
    if(x!="-" && x!="x") { p+=1; xtra+=level }
    return(p)
}
function s2n(s)
{
    xtra=0
    owner=parse(substr(s, 2 , 3), 4)
    group=parse(substr(s, 5 , 3), 2)
    other=parse(substr(s, 8 , 3), 1)
    return(0+(xtra*1000)+(owner*100)+(group*10)+other);
}
{
    perm=s2n($3);
    size=$7
    $1=$2=$3=$4=$5=$6=$7=$8=$9=$10=""
    sub("^ *","")
    print $0 " " perm " " size
}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:54:57.423

如果不编写大量代码，真的没有简单的方法可以复制它。

```
http://www.sunfreeware.com/indexsparc10.html 
```

这是用于 Solaris 10 的 sparc 的索引 - 从 sunfreeware 免费下载。如果您使用的是 x86，则有相应的下载。你要下载安装

```
findutils-4.4.2-sol10-sparc-local.gz 
```

有一些依赖项随之而来。否则，您将面临编写大量 shell、C 或 perl 来复制输出的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:03:22.947

You can get close with `-ls`:

```
$ find . -ls | awk '{print $11 " " $3 " " $7 }' 
```

However, that will get you the symbolic permissions, not the octal perms.

# iphone - JqueryMobile 真正修复了 iPhone 3Gs 上的页脚

> ID：10986092
> 
> 赞同：1
> 
> 时间：2012-06-11T19:10:06.653
> 
> 标签：iphone, jquery-mobile

我希望在带有 JQM 1.1 的 iPhone 3G 上有一个真正固定的工具栏，如果内容太短，则无法正常工作。

![如果内容短，则不固定页脚](../Images/4052f568f070d48e209284881320d1f6.png)

任何人都可以帮忙，如何解决？

许多 tahnks

# jquery - jQuery 对话框错误：没有方法“对话框”

> ID：10986093
> 
> 赞同：0
> 
> 时间：2012-06-11T19:10:10.587
> 
> 标签：jquery, dialog, tooltip

我在我的网站中创建了一个 jQuery 对话框来显示嵌入的 Youtube 视频，它工作得非常好，除非我在页面中添加了 jQuery 工具提示。该页面开始显示以下错误：

```
Uncaught RangeError: Maximum call stack size exceeded jquery.min.js:12
2Uncaught TypeError: Object [object Object] has no method 'dialog' 
```

以下是添加源文件的顺序：

*   jquery-ui.css
*   jquery.min.js
*   jquery-ui.min.js
*   jquery.tools.min.js

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:17:26.877

包含 jquery.tools.min.js 时不需要包含 jquery.min.js

按此顺序包含您的源文件

*   jquery-ui.css
*   jquery.tools.min.js
*   jquery.ui.min.js

# java - 异步编程如何在 Netty 中工作？它会让事情变得更健谈吗？

> ID：10986095
> 
> 赞同：2
> 
> 时间：2012-06-11T19:10:23.767
> 
> 标签：java, asynchronous, netty

通常你调用一个服务，它会阻塞直到池中的一个线程可用，然后它返回一个结果。

使用 Netty 或一般的期货，您不会阻塞并立即返回。只有当您真正需要调用 .get() 或任何 API 的值时，您才会阻塞，直到您收到数据返回。

在处理服务或客户端/服务器模型时，这意味着您将在执行 asych 时更多地与服务器连接/断开连接。编程正确吗？（具有不阻塞的好处）。

它是否正确？

Netty 基本上是使用 SEDE（分阶段事件驱动架构）和使用 Java 的 NIO 数据类型设计的）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T20:16:45.083

不。

异步使用 Netty 意味着管理连接和推送 I/O 的操作在单独的线程中执行，原始调用者稍后会被告知请求操作的结果，或者当有数据可供读取时回调感兴趣的侦听器.

您的应用程序线程可以根据需要阻塞，但这不是必需的，因为您可以定义将在异步操作完成时执行的回调。

> *在处理服务或客户端/服务器模型时，这意味着您将更多地与服务器连接/断开连接，所以在进行异步编程时正确吗？（具有不阻塞的好处）。它是否正确？*

该段中几乎没有任何内容是正确的。

我推荐[本教程](http://seeallhearall.blogspot.com/2012/05/netty-tutorial-part-1-introduction-to.html)作为对这些基本概念的更好解释。（完全公开，我写的）。

# php - jquery load 删除表单元素

> ID：10986103
> 
> 赞同：0
> 
> 时间：2012-06-11T19:11:07.550
> 
> 标签：php, javascript, jquery

我有一个奇怪的问题。我对使用 PHP 的 JQuery 有点陌生。

我使用 JQuery 加载加载了一个模态 php 页面。

```
 $("#dialog").load(e.target.href); 
```

模式页面加载，所有列表都已启动（通过 mySQL），但所有表单元素都丢失了。我不懂为什么。元素在那里，因为它们显示在屏幕上。也许他们不在表格中？？？

我试图获取表单中的所有元素，但是虽然找到了表单，但没有任何元素。（？？？）。

```
var formsCollection = document.getElementsByTagName("form");
            for(var i=0;i<formsCollection.length;i++)
            {
                alert(formsCollection[i].name);
                 var theForm = formsCollection[i];

                 alert("number of elements in form   "+theForm.elements.length); // shows 0

            } 
```

当我将页面作为纯 php 文件运行时，一切正常。这是表格。

```
<form name="eventForm">
    <input type="hidden" name="uid" value="<?php echo $uid?>">
        <tr>
            <td nowrap valign="top" align="right" nowrap><span class="form_labels"></span></td>
            <td><?php monthPullDown($m, $lang['months']); dayPullDown($d); yearPullDown($y); ?></td>
        </tr>
        <tr>
            <td nowrap valign="top" align="right" nowrap>
            <span class="form_labels"><?php echo $lang['activity']?></span></td>
            <td>
                <?php
                    if ($mode == "Add"){
                        include("../php/list_activities.php");
                    }
                    else{
                        echo $activity;
                    }
                ?>
            </td>
        </tr>
        <tr>
            <td nowrap valign="top" align="right" nowrap>
            <span class="form_labels"><?php echo $lang['title']?></span></td>
            <td><input type="text" name="title" size="29" value="<?php echo $title ?>" maxlength="50"></td>
        </tr>
        <tr>
            <td nowrap valign="top" align="right" nowrap>
            <span class="form_labels"><?php echo $lang['text']?></span></td>
            <td><textarea cols=22 rows=6 name="text"><?php echo $text ?></textarea></td>
        </tr>
        <tr>
            <td nowrap valign="top" align="right" nowrap><span class="form_labels"><?php echo $lang['starttime'] ?></span></td>
            <td><?php hourPullDown($stime_vals['hour'], "start"); ?><b>:</b><?php minPullDown($stime_vals['minute'], "start"); amPmPullDown($stime_vals['pm'], "start"); ?></td>
        </tr>
        <tr>
            <td nowrap valign="top" align="right" nowrap><span class="form_labels"><?php echo $lang['endtime'] ?></span></td>
            <td><?php hourPullDown($etime_vals['hour'], "end"); ?><b>:</b><?php minPullDown($etime_vals['minute'], "end"); amPmPullDown($etime_vals['pm'], "end"); ?></td>
        </tr>
        <tr><td></td><td><br><input type="button" value="<?php echo $buttonstr ?>" onClick="formSubmit()">&nbsp;<input type="button" id="closebutton" value="<?php echo $lang['cancel'] ?>" onClick="window.close();"></td></tr>
    </form> 
```

和 formSubmit 方法。

```
<script language="JavaScript">
    function formSubmit() {

        alert('SUBMIT');

        var formsCollection = document.getElementsByTagName("form");
            for(var i=0;i<formsCollection.length;i++)
            {
                alert(formsCollection[i].name);
                 var theForm = formsCollection[i];

                 alert("number of elements in form "+theForm.elements.length);

            }

        var eventForm = document.getElementById("eventForm");

        // results in undefined??
        if(document.eventForm.title.value == ""){
            alert("<?php echo $lang['titlemissing'] ?>");
            return;
        }

        //alert("form submit called "+document.eventForm.title.value);

        if(document.eventForm.activity.value == ""){
            alert("<?php echo $lang['activitymissing'] ?>");
            return;
        }

        document.eventForm.method = "post";
        document.eventForm.action = "eventsubmit.php<?php echo $qstr ?>";
        document.eventForm.submit();

    }
    </script> 
```

从调用 php 文件。这是 Jquery 调用者方法

```
<script>
        $(document).ready(function() {

            //select all the a tag with name equal to modal
            $('a[name=modal]').click(function(e) {
                //Cancel the link behavior
                e.preventDefault();
                //Get the A tag
                var id = $(this).attr('href');

                // alert("i was fired "+id);

                //Get the screen height and width
                var maskHeight = $(document).height();
                var maskWidth = $(window).width();

                //Set height and width to mask to fill up the whole screen
                $('#mask').css({
                    'width' : maskWidth,
                    'height' : maskHeight
                });

                //transition effect
                $('#mask').fadeIn(1000);
                $('#mask').fadeTo("slow", 0.8);

                //Get the window height and width
                var winH = $(window).height();
                var winW = $(window).width();

                //Set the popup window to center
                $('#dialog').css('top', winH / 2 - $('#dialog').height() / 2);
                $('#dialog').css('left', winW / 2 - $('#dialog').width() / 2);

                $("#dialog").load(e.target.href);

                //transition effect
                $('#dialog').fadeIn(2000);

            });

        });
    </script> 
```

这是div。

```
 <div id="boxes">

        <div id="dialog" class="window">

        </div>

    </div> 
```

大部分代码来自this example [jquery modal tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)

谢谢你的帮助，科恩

# rubygems - 包含在 gemfile 中的和不包含在 gemfile 中的 ruby gem

> ID：10986109
> 
> 赞同：1
> 
> 时间：2012-06-11T19:11:28.917
> 
> 标签：rubygems, gem, gemfile

在使用 Ruby on Rails 构建时，我会去[http://rubygems.org/](http://rubygems.org/)下载 gem。我有两个选择，我可以在命令行安装，也可以添加到我的 gemfile。

我严重搞砸了我的上一个项目，我想知道这是否与我对 gem 安装和维护的理解无关。我正在使用 RVM 并创建 gemset，所以我使用了正确的工具（也许并不总是正确的方法）。我过去的行为是在命令行中“gem install”并将相同的 gem 添加到 gemfile 中。

问题：安装 gem 的正确/最佳方法是什么，我怎么知道使用这两种方法还是只使用一种方法安装？拥有一个包含 20-30 个 gem 的巨大 gemfile 是正常的吗，大多数教程都很简单，但我的网站却越来越复杂？

# ssl - SSL 响应被分成两个回调

> ID：10986110
> 
> 赞同：3
> 
> 时间：2012-06-11T19:11:40.990
> 
> 标签：ssl, erlang, websocket, cowboy

我正在开发一个客户端-服务器应用程序，并负责添加对在 websockets 上运行的支持。我在服务器端使用 Cowboy，并且一直在使用 Erlang websocket 客户端进行测试。

事情应该是这样的：

1.  客户端打开套接字连接并开始 http 握手
2.  服务器完成http握手
3.  客户端向服务器发送消息，服务器发送回复
4.  客户端处理回复
5.  重复 3 & 4

客户端模块实现

```
handle_info({Transport, Socket, Data}, StateName, State) ->
    ... do stuff with data ... 
```

当数据出现时，它由底层传输（gen_tcp 或 ssl）调用。

当我将客户端和服务器配置为使用`gen_tcp`. 当我改为使用`ssl`时，websocket 握手完成，但在第 4 步中，我得到一个回调`handle_info`，它只包含从服务器返回的数据的第一个字节。随后的回调将包含响应的其余部分。

我真的对这种行为感到困惑，因为交换了 gen_tcp 的相同代码可以正常工作，而且我们还有另外两个使用`ssl`（但不是 websockets 或牛仔）构建的传输，它们同样没有表现出这种行为。

谁能建议可能导致数据以这种方式拆分的原因？如果不需要，我宁愿不必为此编写处理程序。

**更新：**只是为了好玩，我修改了客户端，以便它等待两个回调发生，并在尝试解析之前连接来自这两个回调的数据。这解决了问题，但仍然让我感到困惑。

不过，我确实注意到了几件事：

*   第一组两个回调总是包含一个字节
*   该字节始终为 130 (0x82)

不知道这是否相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T01:16:05.393

TCP 中没有消息边界。您没有任何权利依赖您所期望的行为。传输可以以它喜欢的任何部分为您提供数据，只要它以正确的顺序完整地提供所有数据。TCP 为您提供字节流，大多数 SSL 库也是如此（尽管在较低级别确实有 SSL 记录消息）。

# search - 尽管在 Google Play 中发布了我的应用，但在搜索中看不到

> ID：10986113
> 
> 赞同：0
> 
> 时间：2012-06-11T19:12:06.327
> 
> 标签：search, publishing, visible

我在 Google Play 中上传了我的应用程序，尽管它们都已发布，但除非您搜索其确切名称，否则它们在搜索中仍然不可见。那是大约一周前的事了。

其中有 15 个。其中之一的全称是“TalkPhone German Basics”。

如果我搜索“TalkPhone”，它就可以工作。它发现。

如果我搜索“德语”，它不在列表中。

其他所有语言（每个应用程序 - 其他语言）都会发生同样的事情。

你能建议这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:16:20.583

如果您搜索“德语”，则有数以千计的其他应用程序。如果您的下载量很少，您的应用将需要一些时间才能向下滚动。Play Market 可让您更轻松地找到下载次数最多的应用程序。

您可能还从开发者控制台翻译了您的描述和应用名称。

# blackberry - 黑莓如何设置屏幕负载的焦点

> ID：10986115
> 
> 赞同：1
> 
> 时间：2012-06-11T19:12:12.863
> 
> 标签：blackberry

我正在一个屏幕上工作，我将某些 10 个字段（垂直字段管理器中的水平字段管理器）列为 10 行。我想在第 4 行加载屏幕后设置 ui 的焦点。

我们如何做到这一点，以便当用户打开应用程序焦点在 4 行时。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:18:04.283

这是相当古老的，但我不知道为什么没有人回答它。这很简单。如果您有自定义元素，setFocus() 可能会抛出一些错误，但将其转换为字段或使用 getField 索引将允许您调用 setFocus()。

字段 f = this.getField(2);
f.setFocus();

# c# - 如何在没有管理员权限的情况下在 ie7 中运行 activex 控件？

> ID：10986124
> 
> 赞同：1
> 
> 时间：2012-06-11T19:12:50.850
> 
> 标签：c#, internet-explorer-7, activex, admin

我知道微软通过 ie8 改善了活动 x 体验，但我正在处理大量已安装的 xp-ie7 系统和不想升级的系统管理员。

如果系统以管理员权限登录，则安装和后续运行效果很好。如果系统没有特权登录，我们既不能安装也不能运行。如果我们使用管理员安装并回退到非管理员，我们的控件不会加载，但我们没有得到任何我们能够找到的诊断反馈。

问题原因的一个可能转折是我们的活动 x 是用 c# 而不是 c++ 编写的，这是我之前的人没有完全理解的细微差别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:42:41.740

根据这个[msdn page](http://msdn.microsoft.com/en-us/library/dd433049%28v=vs.85%29.aspx#_compat)，它不受支持：您需要 windows Vista 和 IE8。因此，仅升级 IE 对您没有帮助。

实际上有一种叫做[无注册 COM](http://msdn.microsoft.com/en-us/library/ms973913.aspx)的东西，但只有当您可以控制托管 COM 组件的 .exe 文件时才有效。和 COM 重叠，但与 ActiveX 不完全相同，因此它可能无法正常工作。

最好的办法是向该系统管理员提供一个 MSI 文件，管理员可以主动将其推送到站点上的所有系统。确保将 .net 放入包中。您应该花一些时间来测试您的二进制文件是否可以完美地安装在任何地方。还要考虑到您将无法从您的网页升级已部署的版本。因此，您的升级应该与现有的 activex 兼容，或者与 activex 部署同步完成。

如果部署有问题，请与站点管理人员讨论该问题，以便他们可以要求管理员配合。

# javascript - Javascript 和 keyup 将数据传递给控制器

> ID：10986131
> 
> 赞同：0
> 
> 时间：2012-06-11T19:13:23.527
> 
> 标签：javascript, asp.net-mvc-3

我的视图有一个文本框，用于捕获用户的扫描。然后，扫描将在没有任何进一步用户操作的情况下传递给另一个操作，然后该操作将使用扫描的数据来完成交易。到目前为止，文本框被扫描填充并立即重定向，但没有文本框的内容。这就是我所拥有的；

看法：

```
<input id="thisText" class="largetext" name="txtScanLabel"  onkeyup="myKeyUp" /> 
```

和：

```
 <script type="text/javascript">
   var tResults = "Test";

       $(function () {
           $('input.largetext').focus();
       });

       $(function () {
           $("#thisText").keyup(myKeyUp);
       });

       function myKeyUp(eventInstance) {
           var myURL = '@Url.Action("ScanResults", "Home")';
           window.location.href = myURL + '?tResults' + encodeURIComponent(tResults);
       }

   </script> 
```

控制器：

```
 public ActionResult ScanResults(string tResults)
    {

        var test = tResults;                     

        return RedirectToAction("Success");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:17:19.733

您已经使用 jQuery 悄悄地订阅了`.keyup`事件处理程序，但您已经`onkeyup`在 DOM 中使用了该属性。你不需要做这两件事。使用 jQuery 就足够了。所以从清理你的标记开始：

```
<input id="thisText" class="largetext" name="txtScanLabel" /> 
```

此外，您已将`tResults`值硬编码到`Test`您的 javascript 中。而不是使用全局变量中的这个硬编码值（你可以摆脱它），你应该从文本框中读取值：

```
function myKeyUp(eventInstance) {
    var myURL = '@Url.Action("ScanResults", "Home")';
    var value = $(this).val();
    window.location.href = myURL + '?tResults=' + encodeURIComponent(value);
} 
```

请注意，当用户在输入字段中键入内容时， using`window.location.href`将立即重定向到控制器操作。`ScanResults`您可能想使用 AJAX：

```
function myKeyUp(eventInstance) {
    var myURL = '@Url.Action("ScanResults", "Home")';
    $.ajax({
        url: myURL,
        type: 'POST',
        data: { tResults: $(this).val() },
        success: function(result) {
            // do something with the result returned by the controller action
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:19:34.427

您尚未在控制器操作中包含 [HttpPost] 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:30:35.140

你可能需要这个，因为你的“测试不会像现在这样工作：

```
 window.location.href = myURL + '?tResults' + encodeURIComponent(tResults); 
```

改成

```
 tResults = $('#thisText').val();
       window.location.href = myURL + '?tResults=' + encodeURIComponent(tResults); 
```

不要忘记那里重要的等号。

# asp.net-mvc-3 - 在单元测试中模拟 Request.Browser.Type

> ID：10986138
> 
> 赞同：1
> 
> 时间：2012-06-11T19:14:04.640
> 
> 标签：asp.net-mvc-3, unit-testing, mocking, httpcontext

我正在尝试测试一个`ActionResult`返回部分视图的。此操作检查用户使用的是 IE7 还是 IE8，如果用户使用的是 IE7 或 8，将返回不同的部分。这是因为我们使用的 java-script 不能完全使用 7 或 8，所以我们将区别对待。

我省略了模型创建，因为我只想专注于`Request.Browser.Type`.

```
public ActionResult ActionName(string listing)
{
    if (model.Count > 1 && Request.Browser.Type != "IE8" && Request.Browser.Type != "IE7")
    {
        return PartialView("~/Areas/Features/Views/Video/MultiVideo.cshtml", model);
    }
    return PartialView("~/Areas/Features/Views/Video/SingleVideo.cshtml", model.FirstOrDefault());
} 
```

最终我想知道两件事

1.  你怎么能嘲笑`Request.Browser.Type`if 呢？
2.  这甚至是在控制器内部做的好习惯吗？如果不是什么解决方案会更好？

我试过的：

`var browser = new Mock<HttpContext>(MockBehavior.Strict); browser.Setup(x => x.Request.Browser).Returns("IE9");`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:14:05.420

我在写问题时回答了自己的问题（我发现这经常发生在我身上）。但是，我在其他任何地方都找不到太多关于此的信息，所以我想我会分享我的解决方案。

在[这个](https://stackoverflow.com/questions/1452418/how-do-i-mock-the-httpcontext-in-asp-net-mvc-using-moq)SO question 的帮助下，我想出了这个能够模拟浏览器类型

```
 var request = new Mock<HttpRequestBase>(MockBehavior.Strict);

        // This line would do the job
        request.Setup(b => b.Browser.Type).Returns("IE9");

        var context = new Mock<HttpContextBase>();
        context.SetupGet(c => c.Request).Returns(request.Object);

        controller.ControllerContext = new ControllerContext(
                                            context.Object,
                                            new RouteData(),
                                            controller); 
```

我仍然不确定这在您的控制器中是否是个好主意。任何想法将不胜感激。

# c - 如何使用 GTK+ / Cairo 旋转图像

> ID：10986142
> 
> 赞同：2
> 
> 时间：2012-06-11T19:14:25.910
> 
> 标签：c, gtk, cairo

我有一个简单的应用程序，它应该使用`GTK+`and每隔 x 毫秒将装饰轮旋转这么多度`Cairo`。我在下面有一些`cairo_rotate()`从计时器调用的代码。但是，图像不会改变。我是否必须使图像无效才能触发暴露事件？我对开罗很陌生，一个简单的例子演示如何使用`Cairo`in旋转图像`GTK+`将不胜感激。

```
#include <cairo.h>
#include <gtk/gtk.h>

cairo_surface_t *image;
cairo_t *cr;

gboolean rotate_cb( void )
{

    cairo_rotate (cr, 1);
    //cairo_paint(cr);
    printf("rotating\n");

    return( TRUE );
}

static gboolean
on_expose_event(GtkWidget *widget,
    GdkEventExpose *event,
    gpointer data)
{
  cr = gdk_cairo_create (widget->window);

  cairo_set_source_surface(cr, image, 0, 0);
  cairo_paint(cr);
  printf("Paint\n");

  //cairo_destroy(cr);

  return FALSE;
}

int main(int argc, char *argv[])
{
  GtkWidget *window;

  image = cairo_image_surface_create_from_png("wheel.png");

  gtk_init(&argc, &argv);

  window = gtk_window_new(GTK_WINDOW_TOPLEVEL);

  g_signal_connect(window, "expose-event",
      G_CALLBACK (on_expose_event), NULL);
  g_signal_connect(window, "destroy",
      G_CALLBACK (gtk_main_quit), NULL);

  gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
  gtk_window_set_default_size(GTK_WINDOW(window), 500, 500); 
  gtk_widget_set_app_paintable(window, TRUE);

  gtk_widget_show_all(window);
  g_timeout_add(500, (GSourceFunc) rotate_cb, NULL);

  gtk_main();
  cairo_destroy(cr);
  cairo_surface_destroy(image);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T00:18:13.083

您需要将旋转存储在一个变量中并将 cairo_rotate(cr, rotation_amt); 在绘制之前调用 on_expose_event 方法。

如果图像居中，还可以平移到窗口的中心，旋转并向后平移，以使轮子围绕其中心旋转。

```
cairo_translate(cr, width / 2.0, height / 2.0);
cairo_rotate(cr, rotation_amt);
cairo_translate(cr, - image_w / 2.0, - image_h / 2.0);
cairo_set_source_surface(cr, image, 0, 0);
cairo_paint(cr); 
```

我希望这是对的。

正如 ptomato 所说，您需要通过从 rotate_cb 调用 gtk_widget_queue_draw 来使绘图表面无效。为 Cairo 上下文保留一个全局变量是多余的。图像不会旋转，因为新创建的上下文加载了单位矩阵，并且您之前的所有转换都被重置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-12T16:50:33.727

在 cairo 邮件列表的帮助下，这是一个工作示例。我正在为那些可能觉得这很有用的人分享这个。

```
#include <cairo.h>
#include <gtk/gtk.h>
#include <math.h>
#include <stdlib.h> 

cairo_surface_t *image;
cairo_t *cr;
gdouble rotation = 0;
GtkWidget *window;

gint image_w, image_h;
double DegreesToRadians( int degrees );

double DegreesToRadians( int degrees )
{
    return((double)((double)degrees * ( M_PI/180 )));
}

gboolean rotate_cb( void *degrees )
{
    // Any rotation applied to cr here will be lost, as we create
    // a new cairo context on every expose event
    //cairo_rotate (cr, 4);
    rotation += DegreesToRadians((*(int*)(degrees)));
    //cairo_paint(cr);
    //      printf("rotating\n");
    // Tell our window that it should repaint itself (ie. emit an expose event)
    gtk_widget_queue_draw(window);

    return( TRUE );
}

static gboolean on_expose_event(GtkWidget *widget, GdkEventExpose *event,gpointer data)
{
    // Make sure our window wasn't destroyed yet
    // (to silence a warning)
    g_return_if_fail(GTK_IS_WIDGET(widget));

    cr = gdk_cairo_create (widget->window);
    // We need to apply transformation before setting the source surface
    // We translate (0, 0) to the center of the screen,
    // so we can rotate the image around its center point,
    // not its upper left corner
    cairo_translate(cr, image_w/2, image_h/2);
    cairo_rotate(cr, rotation);
    cairo_set_source_surface(cr, image, -image_w/2, -image_h/2);
    // We need to clip around the image, or cairo will paint garbage data
    //cairo_rectangle(cr, -image_w/2, -image_h/2, image_w, image_h);
    //cairo_clip(cr);

    cairo_paint(cr);
    //printf("Paint\n");
    cairo_destroy(cr);
    return FALSE;
}

int main(int argc, char *argv[])
{   
    int degrees = 10, speed = 125;
    image = cairo_image_surface_create_from_png("wheel.png");
    image_w = cairo_image_surface_get_width(image);
    image_h = cairo_image_surface_get_height(image);

    gtk_init(&argc, &argv);

    if( argc == 3 )
    {
        degrees = atoi(argv[1]);
        speed = atoi(argv[2]);
    }

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);

    g_signal_connect(window, "expose-event",
    G_CALLBACK (on_expose_event), NULL);
    g_signal_connect(window, "destroy",
    G_CALLBACK (gtk_main_quit), NULL);

    gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
    gtk_window_set_default_size(GTK_WINDOW(window), image_w, image_h);
    gtk_widget_set_app_paintable(window, TRUE);

    gtk_widget_show_all(window);
    g_timeout_add(speed, (GSourceFunc) rotate_cb, (void *)&degrees);

    gtk_main();
    cairo_surface_destroy(image);

    return 0;
} 
```

# ubuntu - 奇怪的行为 OpenCL 在寄存器中使用联合

> ID：10986143
> 
> 赞同：1
> 
> 时间：2012-06-11T19:14:28.027
> 
> 标签：ubuntu, union, opencl

我在 opencl 中使用变量 union(private) 得到一个奇怪的行为。编码：

```
v = { 0, 1, 2, ... } // Defined in host and load to Device

typedef union svec8{
    int  word[8];
    int8 word8;
} vec8;

__kernel
void red( global vec8 *v, global int *out ){
    uint sizeBin = 8;
    vec8 binning = {0}; // Every Thread has a 8-space bin, initialized with 0
    uint gID     = get_global_id(0);
    int temp;

    binning.word8 = v[ dID ].word8;

    #ifdef CONDITION
        temp = 0;
        for ( uint i = 0; i < sizeBin; i++ ){
            temp += binning.word[ i ];
        }
    #endif

    if ( dID == 0 ){
        *out = binning.word[n]; // n belongs to [0, 7]
    }
} 
```

问题是，对于一个选择的每一个 n，当 CONDITION 被定义时，*out 总是等于 1，但是如果 i undef CONDITION，*out 得到正确的值，即 0,1,.. 或 7,当然取决于你选择哪个。

我还注意到，如果我停止使用 union 而只使用 int8，它可以解决问题。

提前致谢，

平台：Ubuntu 12.04 - 3.2.0-24-generic-pae - 驱动程序 OpenCL 1.2 AMD-APP (923.1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:30:48.750

AMD 在联合对齐方面存在错误，这可能是原因吗？见[我的报告](http://devgurus.amd.com/thread/158559)。我建议您尝试使用英特尔 SDK 运行相同的代码，看看它是否有所作为。

**编辑：**在我自己的代码（许多不同的联合）中，我使用这个解决方案，直到它在上游得到修复：

```
#define AMD_UNION_ALIGN_BUG_WORKAROUND() __attribute__((aligned(32)))
//            this is the biggest alignment value in the union ^^^^^
// in your case sizeof(int)*8=32 (in bytes)

// define unions like this
union svec8 { /*...*/ } AMD_UNION_ALIGN_BUG_WORKAROUND() vec8; 
```

# c# - 将多行数据传递给存储过程

> ID：10986149
> 
> 赞同：0
> 
> 时间：2012-06-11T19:14:43.383
> 
> 标签：c#, sql-server-2005

我在 C#.net 中有一个对象列表（从几个文本文件创建），我需要将其存储在 SQL2005 数据库文件中。不幸的是，表值参数从 SQL2008 开始，所以它们无济于事。我从 MSDN 发现一种方法是“将多个数据值捆绑到分隔字符串或 XML 文档中，然后将这些文本值传递给过程或语句”，但我对存储过程相当陌生，需要更多帮助。我知道我可以创建一个存储过程来创建一条记录，然后遍历我的列表并添加它们，但这就是我想要避免的。谢谢。

```
Input file example (Other files contain pricing and availability):
Matnr   ShortDescription    LongDescription ManufPartNo Manufacturer    ManufacturerGlobalDescr GTIN    ProdFamilyID    ProdFamily  ProdClassID ProdClass   ProdSubClassID  ProdSubClass    ArticleCreationDate CNETavailable   CNETid  ListPrice   Weight  Length  Width   Heigth  NoReturn    MayRequireAuthorization EndUserInformation  FreightPolicyException
10000000    A&D ENGINEERING SMALL ADULT CUFF FOR UA-767PBT  UA-279  A&D ENGINEERING A&D ENG 093764011542    GENERAL General TDINTERNL   TD Internal TDINTERNL   TD Internal 2012-05-13 12:18:43 N       18.000  .350                N   N   N   N
10000001    A&D ENGINEERING MEDIUM ADULT CUFF FOR UA-767PBT UA-280  A&D ENGINEERING A&D ENG 093764046070    GENERAL General TDINTERNL   TD Internal TDINTERNL   TD Internal 2012-05-13 12:18:43 N       18.000  .450                N   N   N   N 
```

一些数据库文件字段：

```
EffectiveDate           varchar(50)
MfgName                 varchar(500)
MfgPartNbr              varchar(500)
Cost                    varchar(200)
QtyOnHand               varchar(200) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:45:58.880

您可以很容易地从单个字符串中拆分多个值。假设您可以像这样捆绑字符串，使用逗号分隔“列”，使用分号分隔“行”：

```
foo, 20120101, 26; bar, 20120612, 32 
```

（这假设冒号和分号不能自然地出现在数据中；如果可以，您需要选择其他分隔符。）

您可以像这样构建一个拆分例程，其中包括一个输出列，允许您确定值在原始字符串中出现的顺序：

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
AS
    RETURN (SELECT Number = ROW_NUMBER() OVER (ORDER BY Number),
        Item FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ) AS y);
GO 
```

然后你可以像这样查询它（为简单起见，我只处理 3 个属性，但你可以将其推断为 11 或 n）：

```
DECLARE @x NVARCHAR(MAX); -- a parameter to your stored procedure

SET @x = N'foo, 20120101, 26; bar, 20120612, 32';

;WITH x AS 
(
    SELECT ID = s.Number, InnerID = y.Number, y.Item 
    -- parameter and "row" delimiter here:
    FROM dbo.SplitStrings(@x, ';') AS s
    -- output and "column" delimiter here:
    CROSS APPLY dbo.SplitStrings(s.Item, ',') AS y
)
SELECT 
    prop1 = x.Item, 
    prop2 = x2.Item, 
    prop3 = x3.Item
FROM x 
INNER JOIN x AS x2 
ON x.InnerID = x2.InnerID - 1
AND x.ID = x2.ID
INNER JOIN x AS x3
ON x2.InnerID = x3.InnerID - 1
AND x2.ID = x3.ID
WHERE x.InnerID = 1
ORDER BY x.ID; 
```

结果：

```
prop1   prop2     prop3
------  --------  -------
foo     20120101  26
bar     20120612  32 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:04:44.623

我们使用这样的 XML 数据类型...

```
declare @contentXML xml
set @contentXML=convert(xml,N'<ROOT><V a="124694"/><V a="124699"/><V a="124701"/></ROOT>')

SELECT  content_id,
  FROM  dbo.table c WITH (nolock) 
  JOIN @contentXML.nodes('/ROOT/V') AS R ( v ) ON c.content_id = R.v.value('@a', 'INT') 
```

这是调用存储过程时的样子......

```
DbCommand dbCommand = database.GetStoredProcCommand("MyStroredProcedure);
database.AddInParameter(dbCommand, "dataPubXML", DbType.Xml, dataPublicationXml);

CREATE PROC dbo.usp_get_object_content
(
    @contentXML XML
)
AS 
BEGIN
    SET NOCOUNT ON

    SELECT  content_id,
      FROM    dbo.tblIVContent c WITH (nolock) 
      JOIN @contentXML.nodes('/ROOT/V') AS R ( v ) ON c.content_id = R.v.value('@a', 'INT')

 END 
```

SQL Server 解析 XML 的速度不是很快，因此使用 SplitStrings 函数可能会更高效。只是想提供一个替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:08:20.287

我能想到几个选项，但当我输入其中一个（拆分选项）时，上面的@Bertrand 先生发布了。唯一的问题是 SQL[不擅长字符串操作](http://sqlserverperformance.idera.com/tsql-optimization/comparing-simple-efficiencies-tsql-udf-sqclr-udf-splitting-strings/)。

因此，另一种选择是使用您的 sproc 假定将存在的 #Temp 表。构建动态SQL，效果如下：

使用您需要的形状开始一个事务，`CREATE TABLE #InsertData`然后循环您要插入的数据，使用`INSERT INTO #InsertData SELECT <values> UNION ALL SELECT <values>....`

这种方法有一些限制，其中之一是随着数据集变得非常大，您可能需要将 INSERT 拆分为批次。（我不记得我自己学习时遇到的具体错误，但是对于很长的值列表，我有 SQL 抱怨。）不过，解决方案很简单：只需生成一系列具有较少数量的 INSERT每行。例如，您可能会`INSERT SELECTs`用 1000做 10 次，`UNION ALLs`而不是`INSERT SELECT`用 10000次做 1 次`UNION ALLs`。您仍然可以将整个批处理作为单个命令的一部分传递。

这样做的优点（尽管有各种缺点——使用临时表、长命令字符串等）是它将所有字符串处理卸载到等式中更高效的 C# 端，并且不需要额外的持久数据库对象（Split 函数；尽管如此，有时谁不需要其中之一）？

如果您使用 Split() 函数，我鼓励您将其卸载到 SQLCLR 函数，而不是 T-SQL UDF（出于上面链接所示的性能原因）。

最后，无论您选择哪种方法，请注意，如果您的数据可以包含包含分隔符的字符串，您将遇到更多问题（例如，在 Aaron 的回答中，如果数据是：

```
'I pity the foo!', 20120101, 26; 'bar, I say, bar!', 20120612, 32 
```

同样，因为 C# 在字符串处理方面比 T-SQL 更好，所以最好不要使用 T-SQL UDF 来处理它。

**编辑**

对于动态 INSERT 选项，请注意以下要考虑的附加点。

您需要确定此处的任何输入是否是潜在危险输入，是否需要在使用前进行清洁。你不能轻易地参数化这些数据，所以这是一个重要的数据。在我使用这种策略的地方，我已经对数据的类型有了强有力的保证（特别是，我用它来为一个表播种一个要处理的整数 ID 列表，所以我迭代的是整数而不是任意的，不受信任的字符串）。如果您没有类似的保证，请注意 SQL 注入的危险。

# python - 如何给命令行命令起别名？（苹果电脑）

> ID：10986155
> 
> 赞同：5
> 
> 时间：2012-06-11T19:15:08.997
> 
> 标签：python, command-line, command, alias

我在mac上，我写了很多python脚本。

每次我需要运行它们时，我都必须输入' `python script_name.py`'。有没有办法让我只需要输入' `p script_name.py`'？这会节省一些时间：D

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T19:16:57.970

我假设您正在从命令行运行脚本，对吗？如果是这样，请将以下行添加为脚本的第一行：

```
#!/usr/bin/python 
```

或者

```
#!/usr/bin/env python 
```

如果 python 命令不在 中`/usr/bin`，然后在 Unix/终端提示符下发出以下命令（它使您的脚本“可执行”）：

```
chmod +x script_name.py 
```

从那时起，您只需在命令提示符下键入脚本的名称即可运行它。不需要`python`命令的任何部分。即，简单地说

```
./script_name.py 
```

将运行脚本。

当然，您也可以使用`alias`，但在我看来，以上是更清洁的解决方案。

对于别名

```
alias p="python" 
```

应该进入你的`~/.bashrc`文件

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T19:17:20.507

使用`alias`命令：

```
alias p="python" 
```

您可能希望将其添加到您的 ~/.bashrc 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T19:16:47.013

您可以为`~/.profile`文件添加别名：

```
alias p="python" 
```

请注意，您还可以使用`chmod +x script.py`. 然后，您可以使用以下命令执行它：

```
./script.py 
```

您需要将以下行添加到 Python 代码的顶部才能使其正常工作：

```
#!/usr/bin/env python 
```

这称为[shebang](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)。

# matlab - FFT 后的幅度值错误

> ID：10986158
> 
> 赞同：2
> 
> 时间：2012-06-11T19:15:28.540
> 
> 标签：matlab, fft

在下面编写的代码图中，我应该看到 75 到 200 uV 值之间的幅度，但是我的图中有些奇怪，你能帮我并建议，我的代码有什么问题，我该如何纠正？

谢谢你们

**这是代码：**

```
clear all;
close all;
Fs = 200
t= 0:1/Fs:180
y_in=zeros (1, length(t));
  for  i = 1:18
F = randi ([4 7], 1);% frequency
A = randi ([75 200],1);% amplitude A=75~200 uV.
y_tmp =A*sin (2*pi*F*t);
 y_in=y_in+ y_tmp;
  end;
L=length (y_in);
NFFT = 2^nextpow2(L); % Next power of 2 from length of y
Y_new = fft(y_in,NFFT)/L;
f_new = Fs/2*linspace(0,1,NFFT/2+1);

figure(1)
plot(f_new,2*abs(Y_new(1:NFFT/2+1))) ;
title('Single-Sided Amplitude Spectrum of y_in(t)')
xlabel('Frequency (Hz)')
ylabel('|y_in(f)|') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:08:12.273

由于您循环了 18 次并使用

```
F = randi([4 7],1); 
```

建立最终信号的某些频率会多次出现，因此它们的幅度会相互叠加。

因此，您在绘图中的 fft 之后看到的是频率幅度的总和

```
F = 4, 5, 6, 7 Hz 
```

# jquery - 拖动时自动滚动可放置 div

> ID：10986159
> 
> 赞同：0
> 
> 时间：2012-06-11T19:15:30.737
> 
> 标签：jquery

在这个小提琴中：http: [//jsfiddle.net/adrianjsfiddlenetuser/zyUkd/76/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/76/)

可以拖放没有粉红色背景颜色的按钮。

问题是在 div 之间拖动时，当尝试将可拖动 div 添加到列表末尾时，拖动到的 div 不会自动向下滚动。

如何自动滚动拖动到的 div（水平/垂直）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:44:04.173

**工作演示** [http://jsfiddle.net/X3rKJ/](http://jsfiddle.net/X3rKJ/) **或** [http://jsfiddle.net/X3rKJ/1/](http://jsfiddle.net/X3rKJ/1/)

添加`on`滚动事件，每次将其拖动到第二个 div 时，它都会识别事件并滚动。

这会有所帮助。:) 干杯

**请注意**`on`事件被绑定到这个对象，即当列表变得不等高时用户从其中拖动的 div解决*方案可以是：*将它拖到 div 然后滚动到底部或可能玩弄这个对象并始终选择更大的容器作为滚动参考，尽管为评论欢呼。:) 作为候选人 -1 的解决方案并没有那么糟糕，但一切都很好。不管怎样，:(

此解决方案运行良好，要处理 div 的不等高度，需要添加一条语句，如果 2 个 div 的高度不等，则将较大的作为`scroll`.

**代码**

```
var sortlists = $(".connected").sortable({
     connectWith : ".connected",
     items       : ".myDivs:not(.excludeThisCss)",
     tolerance   : 'pointer',
     revert      : 'invalid',
     forceHelperSize: true

}).on('scroll', function() {
     sortlists.scrollTop($(this).scrollTop());
}).disableSelection();;

​ 
```

# php - 在网站上显示手机的 GPS 位置

> ID：10986160
> 
> 赞同：1
> 
> 时间：2012-06-11T19:14:07.403
> 
> 标签：php, html, iphone

我的客户要求能够在他们的网站（谷歌地图）上通过手机显示 GPS 位置。我意识到它需要在手机端安装一些功能来发送 GPS 坐标。

有谁知道如何解决这个问题？有什么成品可以用吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:29:29.973

要获取坐标，请使用`navigator.geolocation`，它应该在移动浏览器上得到很好的支持；演示：[http ://www.bytelevelbooks.com/code/javascript/geolocation.html](http://www.bytelevelbooks.com/code/javascript/geolocation.html)

这当然只是开始。然后，这取决于您的应用程序如何使用坐标。在任何情况下，您都应该准备好从公里到米的精度差异很大。坐标是基于 GPS 还是其他东西肯定会影响精度，并受设备影响，尤其是其设置和物理位置。

# sql-server - SQL Server 2012 表列和性能

> ID：10986163
> 
> 赞同：1
> 
> 时间：2012-06-11T19:15:45.080
> 
> 标签：sql-server, database-design, tablecolumn

我目前有一个网站访问了 7 个 Access 数据库，我迫切需要将这些数据库迁移到 SQL Server。7 db 设计非常快，但由于多种原因显然很差。

在这 7 个数据库中，我总共拥有超过 375 个独特的数据字段，几乎所有这些字段都已填充 - 不到 2% 是空值。由于缺少几个键，7 个中没有数据重复，因此标准化可能不是问题。我想保持桌子很小，这样它会很快。这 7 个表都具有相同数量的记录，即 325,000 条，最多可达 400,000 条左右。

将此移动到 SQL Server 时，我应该保留 7 个唯一表还是合并为 1 个？我的理解（虽然有限）是我需要在我的存储过程中非常自律，只带回我需要的列。鉴于类似问题的种类繁多，我仍然从未就最佳方法达成“共识”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:55:55.067

这取决于您的访问模式。您是否经常需要同时访问多个分区的数据？那么你可能应该将它们结合起来。

无论如何，当您只有一张表（没有一对一连接）时，开发可能会更容易。如果没有特别的理由将它们拆分，请将它们组合起来。

注意：我认为 SQL Server 中存在列限制。

您可以通过创建索引来公开列的子集。每个索引都将在 ID 列上设置，其中列的任意子集作为“包含”列。**这将把选择留给优化器。**它会选择最好的方法。它还可以在索引之间加入，这样你就可以完全获胜。

建议：将表合并为一个，并为您之前拥有的每个表创建一个索引。

# php - 退出时的wordpress重定向

> ID：10986164
> 
> 赞同：0
> 
> 时间：2012-06-11T19:15:50.303
> 
> 标签：php, wordpress

我的 wordpress 页面上有一个注销链接。

这是代码：

```
echo '<a href="http://mydomain.com/wp-login.php?action=logout&redirect_to='.urlencode($url_home).'&_wpnonce=a2b834fa87">Logout</a>'; 
```

当我单击注销时，它仍然提示我是否确定要注销，并且在注销后它会进入登录页面。

我怎样才能让它退出并转到 index.php ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:32:00.663

为什么不使用内置的 Wordpress 功能：

```
<a href="<?php echo wp_logout_url( get_bloginfo('url') ); ?>&_wpnonce=a2b834fa87">Logout</a> 
```

# codeigniter - 将两个数组传递给视图

> ID：10986171
> 
> 赞同：0
> 
> 时间：2012-06-11T19:16:23.660
> 
> 标签：codeigniter

好的，下面是我的控制器中的一个 get_members 函数，我从互联网上提取和操作它......我可以从控制器中的 $output 打印出信息，但我不想这样做......我想不通如何让它成为我视图的一部分，以便我可以自由列出其中的信息......

我知道它与索引函数中的 $data 数组有关......有人可以帮忙吗？

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Phonedirectory extends CI_Controller {

function get_members($group=FALSE,$inclusive=FALSE) {
    // Active Directory server
    $ldap_host = "fps";

    // Active Directory DN
    $ldap_dn = "OU=Users,DC=xxx,DC=org";

    // User attributes we want to keep
    $keep = array(
        "samaccountname",
        "displayName",
        "telephonenumber"
    );

    // Connect to AD
    $ldap = ldap_connect($ldap_host) or die("Could not connect to LDAP");
    ldap_set_option ($ldap, LDAP_OPT_REFERRALS, 0);
    ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3);

    ldap_bind($ldap, "CN=LDAP Reader,OU=Users - Special,DC=xxx,DC=org", "xxx") or die("Could not bind to LDAP");

     // Begin building query
     if($group) $query = "(&"; else $query = "";

     $query .= "(&(objectClass=user)(objectCategory=person))";

    // Filter by memberOf, if group is set
    if(is_array($group)) {
        // Looking for a members amongst multiple groups
            if($inclusive) {
                // Inclusive - get users that are in any of the groups
                // Add OR operator
                $query .= "(|";
            } else {
                // Exclusive - only get users that are in all of the groups
                // Add AND operator
                $query .= "(&";
            }

            // Append each group
            foreach($group as $g) $query .= "(memberOf=OU=$g,$ldap_dn)";

            $query .= ")";
    } elseif($group) {
        // Just looking for membership of one group
        $query .= "(memberOf=OU=$group,$ldap_dn)";
    }

    // Close query
    if($group) $query .= ")"; else $query .= "";

    // Uncomment to output queries onto page for debugging
    // print_r($query);

    // Search AD
    $results = ldap_search($ldap,$ldap_dn,$query);
    $entries = ldap_get_entries($ldap, $results);

    // Remove first entry (it's always blank)
    array_shift($entries);

    $output = array(); // Declare the output array

    $i = 0; // Counter
    // Build output array
    foreach($entries as $u) {
        foreach($keep as $x) {
            // Check for attribute
            if(isset($u[$x][0])) $attrval = $u[$x][0]; else $attrval = NULL;

            // Append attribute to output array
            $output[$i][$x] = $attrval;
        }
        $i++;
    }
    return $output;
}

public function index() {
  $data = array('title' => 'Phone Directory', 'main_content' => 'pages/phoneDirectory');    
  $this->load->view('template/main', $data);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:48:25.597

如果我错了，请纠正我，但听起来您只想将输出发送到视图？如果是这种情况，则将其添加到索引函数中

```
public function index() {
  $data = array('title' => 'Phone Directory', 'main_content' => 'pages/phoneDirectory'); 
  $data['members'] = $this->get_members();
  $this->load->view('template/main', $data);
} 
```

或者您想将其附加到您的数据数组中。然后在视图中您可以执行以下操作：

```
<?php echo print_r($members, TRUE); ?> 
```

# javascript - 使用 jquery 添加图像输入，限制为四个

> ID：10986178
> 
> 赞同：0
> 
> 时间：2012-06-11T19:16:54.330
> 
> 标签：javascript, jquery

我有这个代码，用户可以上传图片。它工作得很好，但用户可以提交无限的图片，我想限制为四个。

当用户到达四个输入字段时，将不允许他们添加任何输入。

```
 <script type="text/javascript">

function addItems()
{
var table1 = document.getElementById('tab1');
var newrow = document.createElement("tr");
var newcol = document.createElement("td");
var input = document.createElement("input");
input.type="file";
input.name="image[]";
newcol.appendChild(input);
newrow.appendChild(newcol);
table1.appendChild(newrow);
}

function remItems()
{
var table1 = document.getElementById('tab1');
var lastRow = table1.rows.length;
if(lastRow>=2)
table1.deleteRow(lastRow-1);
}
</script>

    <form method="post" action="" enctype="multipart/form-data">
<table align="center" border="0" id="tab1">
<tr>
<td width="218" align="center">
<input type="file" name="image[]" /></td>
<td width="54" align="center">
<img src="Button-Add-icon.png" alt="Add" style="cursor:pointer" 

 onclick="addItems()" /></td>
<td>
<img src="Button-Delete-icon.png" alt="Remove" style="cursor:pointer"  

  onclick="remItems()" /></td>
</tr>
</table>
<table align="center" border="0" id="tab2">
<tr><td align="center">
<input type="submit" value="Upload" name="upload" /></td></tr>
</table>
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:38:25.553

添加一个全局计数器..并检查您的`addItems`功能..类似于：

```
var totalItems = 0;
function addItems()
{
   if(totalItems < 4) {
     var table1 = document.getElementById('tab1');
     var newrow = document.createElement("tr");
     var newcol = document.createElement("td");
     var input = document.createElement("input");
     input.type="file";
     input.name="image[]";
     newcol.appendChild(input);
     newrow.appendChild(newcol);
     table1.appendChild(newrow);
     totalItems++; //increment the global counter...
   } else {
    //Display your message here.. with an alert or something...
   }
}

function remItems()
{
   var table1 = document.getElementById('tab1');
   var lastRow = table1.rows.length;
   if(lastRow>=2) {
     table1.deleteRow(lastRow-1);
     totalItems--; 
    }
} 
```

# django - 如何开始使用 django south 数据库迁移？

> ID：10986185
> 
> 赞同：2
> 
> 时间：2012-06-11T19:17:23.200
> 
> 标签：django, database-migration, django-south

我最近从一个相当邪恶的服务器崩溃中恢复过来，我的主机（滑稽地）在失败的机架迁移中删除了整个服务器。幸运的是，我已经进行了一些备份，并且服务器已备份并正在运行。我一直打算开始使用南并觉得这可能有助于我在未来进行升级。

目前我在本地机器上开发，然后将更改推送到我的生产服务器。以前这是一次非常痛苦的经历，但南方看起来可以让这一切变得更容易。

就目前而言，我的开发机器有一些更改尚未达到生产服务器，但我想推出这些更改。开发机器和生产服务器都链接到一个存储所有代码的颠覆帐户。

## 问题..

1.  我该如何在两台机器上安装南。
2.  如何使用它将开发机器上的更改迁移到生产。

## 快速示例..

例如，这是否可行：

1.  为生产服务器上的每个应用程序安装 south 并创建初始迁移。
2.  提交对 svn 的更改
3.  从生产服务器转储数据库
4.  查看本地机器上 svn 的最新更改。

此时开发机器应该匹配生产服务器吧？现在将我的更改从开发服务器更新到生产服务器：

1.  将我的本地更改复制到开发机器上签出的副本上，并使用 south 为我的更新创建迁移。
2.  提交对 .svn 的更改
3.  在生产服务器上运行迁移以更新对模式的更改并将数据迁移到新数据库

这行得通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:38:35.437

1.  看看 [http://south.readthedocs.org/en/latest/convertinganapp.html#converting-an-app](http://south.readthedocs.org/en/latest/convertinganapp.html#converting-an-app)
2.  除此之外它相当简单：

    在开发上：

    *   修改模型
    *   ./manage.py schemamigration app --auto
    *   ./manage.py 迁移
    *   检查工作
    *   犯罪

    在产品上：

    *   查看
    *   ./manage.py 迁移
    *   重启服务器

# ios - Xcode 4.3.2 是否足以构建适用于 iOS 6 的应用程序？

> ID：10986186
> 
> 赞同：9
> 
> 时间：2012-06-11T19:17:24.757
> 
> 标签：ios, xcode

在今天宣布 iOS 6 Beta 可供开发人员使用之后，我想知道如果我尽快跳上 iOS 6，我是否仍然能够从 Xcode 4.3.2 在我的设备（iPhone）上构建我正在进行的应用程序？还是 Xcode 也需要更新？

更新：目前我在我的 iPhone 上安装了 iOS 6 并安装了 Xcode 4.5。之后，Xcode（4.3.2 和 4.5）中的组织者在 Provisioning 中说“无法支持开发”。然后修复它，现在我有 4.3.2 说它正在我的 iPhone 上运行我的应用程序，但它没有出现在我的手机上。并且 4.5 在此过程中到达了“TakingInstallLock”点，并且一直在尝试，但一无所获。还有谁有相同的问题吗？有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T15:15:26.450

如果您的手机运行的是 iOS 6 Beta，您可以从 Xcode 4.3.x 将应用程序推送到您的手机。

但是，您不能使用任何 iOS 6+ 框架，例如 Xcode 4.3.x 中的新 Social 框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T15:09:58.630

我还不能发表评论，所以这是为了确认安装 Xcode 4.5 DP 也确实安装了适用于 Xcode 4.3.2 的 iOS 6 SDK。这很明显，因为 SDK 文件安装在 OSX 的一般位置（即 Library 文件夹）。

因此，使用更新的 iOS 6 设备进行 Xcode 4.3.2 开发的步骤如下：

从 apple.com 的开发区下载 Xcode 4.5 DP。

安装 Xcode 4.5

启动 Xcode 4.3.2

打开设备部分，选择您的设备进行开发，等待获取信息的过程完成，您就可以开始了。

问候！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T19:19:08.033

您使用测试版软件编写的任何应用程序都将被拒绝。换句话说，如果您使用 iOS 6 SDK beta 或今天发布的新 Xcode beta，即使您只为 iOS 5 构建应用程序，您的应用也会被拒绝。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T12:11:25.713

我安装了 iOS6 并且 Xcode 4.3.2 无法识别我的设备。安装 Xcode 4.5 beta 并让它安装一些东西后，4.3.2 现在可以识别我的设备，我可以在我的 iOS6 设备上继续构建和测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T07:03:17.373

我会说不！我昨晚更新了，现在我无法在手机上运行我的应用程序。

# c# - 没有默认值的枚举的 XML 序列化

> ID：10986188
> 
> 赞同：1
> 
> 时间：2012-06-11T19:17:31.290
> 
> 标签：c#, enums, xml-serialization

我有一个枚举：

```
[DataContract]
public enum Relationship
{
    Spouse = 4,
    ResidesWith = 1,
    Parent = 2,
    Other = 3,
    PersonalGuarantor = 5,
    CoApplicant = 6
} 
```

如您所见，未定义零。我围绕这个想法构建了我的程序，即永远不会在枚举中定义零。这让我可以看到哪些组合框已从各种组合框中设置，哪些组合框设置为空值。如果我将零值设置为空值，则无法将这两件事区分开来，而我必须能够做到这一点。

由于缺少默认状态，当我尝试序列化值时出现错误。

有没有办法让我的 xml 序列化跳过没有价值的枚举，或者有办法避免这些错误？我真的不想引入默认值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:19:55.997

您需要使用 0 作为枚举值 - 使其成为无效的值并且您检查（因为您已经是）。

```
[DataContract]
public enum Relationship
{
    Invalid = 0,
    Spouse = 4,
    ResidesWith = 1,
    Parent = 2,
    Other = 3,
    PersonalGuarantor = 5,
    CoApplicant = 6
} 
```

不要忘记枚举基于整数类型（它们的基类型），所以它们*总是*有一个值（值类型不能为空）并且默认为`0`. *明确*这一点也将使您的代码库中的内容更加清晰。

Protip：您也可以在枚举中使用*负值。*

# java - 使用此椭圆曲线点乘计算的点不在曲线上，该类带来算术异常

> ID：10986192
> 
> 赞同：2
> 
> 时间：2012-06-11T19:17:51.880
> 
> 标签：java, cryptography, elliptic-curve, arithmeticexception

我使用标准投影坐标得到了点乘法错误的堆栈。我不知道我错过了什么，但相乘的点不在曲线上，有时它会输出类似**算术异常的东西：整数不可逆。**

```
public class ECPointArthimetic {

    EllipticCurve ec;
    private BigInteger x;
    private BigInteger y;
    private BigInteger z;
    private BigInteger zinv;
    private BigInteger one = BigInteger.ONE;
    private BigInteger zero = BigInteger.ZERO;
    private boolean infinity;

    public ECPointArthimetic(EllipticCurve ec, BigInteger x, BigInteger y, BigInteger z) {
        this.ec = ec;
        this.x = x;
        this.y = y;

        // Projective coordinates: either zinv == null or z * zinv == 1
        // z and zinv are just BigIntegers, not fieldElements
        if (z == null) {
            this.z = BigInteger.ONE;
        } else {
            this.z = z;
        }
        this.zinv = null;
        infinity = false;
        //TODO: compression flag
    }

    public BigInteger getX() {
        if (this.zinv == null) {
            this.zinv = this.z.modInverse(this.ec.getP());
        }
        return this.x.multiply(this.zinv).mod(this.ec.getP());
    }

    public BigInteger getY() {
        if (this.zinv == null) {
            this.zinv = this.z.modInverse(this.ec.getP());
        }
        return this.y.multiply(this.zinv).mod(this.ec.getP());
    }

    public boolean pointEquals(ECPointArthimetic other) {
        if (other == this) {
            return true;
        }
        if (this.isInfinity()) {
            return other.isInfinity();
        }
        if (other.isInfinity()) {
            return this.isInfinity();
        }
        BigInteger u, v;
        // u = Y2 * Z1 - Y1 * Z2
        u = other.y.multiply(this.z).subtract(this.y.multiply(other.z)).mod(this.ec.getP());
        if (!u.equals(BigInteger.ZERO)) {
            return false;
        }
        // v = X2 * Z1 - X1 * Z2
        v = other.x.multiply(this.z).subtract(this.x.multiply(other.z)).mod(this.ec.getP());
        return v.equals(BigInteger.ZERO);
    }

    public boolean isInfinity() {
        if ((this.x == zero) && (this.y == zero)) {
            return true;
        }
        return this.z.equals(BigInteger.ZERO) && !this.y.equals(BigInteger.ZERO);
    }

    public ECPointArthimetic negate() {
        return new ECPointArthimetic(this.ec, this.x, this.y.negate(), this.z);
    }

    public ECPointArthimetic add(ECPointArthimetic b) {
        if (this.isInfinity()) {
            return b;
        }
        if (b.isInfinity()) {
            return this;
        }
        ECPointArthimetic R = new ECPointArthimetic(this.ec, zero, zero, null);
        // u = Y2 * Z1 - Y1 * Z2
        BigInteger u = b.y.multiply(this.z).
                subtract(this.y.multiply(b.z)).mod(this.ec.getP());
        // v = X2 * Z1 - X1 * Z2
        BigInteger v = b.x.multiply(this.z).
                subtract(this.x.multiply(b.z)).mod(this.ec.getP());

        if (BigInteger.ZERO.equals(v)) {
            if (BigInteger.ZERO.equals(u)) {
                return this.twice(); // this == b, so double
            }

            infinity = true; // this = -b, so infinity
            return R;
        }

        BigInteger THREE = new BigInteger("3");
        BigInteger x1 = this.x;
        BigInteger y1 = this.y;
        BigInteger x2 = b.x;
        BigInteger y2 = b.y;

        BigInteger v2 = v.pow(2);
        BigInteger v3 = v2.multiply(v);
        BigInteger x1v2 = x1.multiply(v2);
        BigInteger zu2 = u.pow(2).multiply(this.z);

        // x3 = v * (z2 * (z1 * u^2 - 2 * x1 * v^2) - v^3)
        BigInteger x3 = zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).
                subtract(v3).multiply(v).mod(this.ec.getP());
        // y3 = z2 * (3 * x1 * u * v^2 - y1 * v^3 - z1 * u^3) + u * v^3
        BigInteger y3 = x1v2.multiply(THREE).multiply(u).
                subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).
                multiply(b.z).add(u.multiply(v3)).mod(this.ec.getP());
        // z3 = v^3 * z1 * z2
        BigInteger z3 = v3.multiply(this.z).multiply(b.z).mod(this.ec.getP());

        return new ECPointArthimetic(this.ec, x3, y3, z3);
    }

    public ECPointArthimetic twice() {
        if (this.isInfinity()) {
            return this;
        }
        ECPointArthimetic R = new ECPointArthimetic(this.ec, zero, zero, null);
        if (this.y.signum() == 0) {
            infinity = true;
            return R;
        }

        BigInteger THREE = new BigInteger("3");
        BigInteger x1 = this.x;
        BigInteger y1 = this.y;

        BigInteger y1z1 = y1.multiply(this.z);
        BigInteger y1sqz1 = y1z1.multiply(y1).mod(this.ec.getP());
        BigInteger a = this.ec.getA();
        // w = 3 * x1^2 + a * z1^2
        BigInteger w = x1.pow(2).multiply(THREE);
        if (!BigInteger.ZERO.equals(a)) {
            w = w.add(this.z.pow(2).multiply(a));
        }
        w = w.mod(this.ec.getP());
        // x3 = 2 * y1 * z1 * (w^2 - 8 * x1 * y1^2 * z1)
        BigInteger x3 = w.pow(2).subtract(x1.shiftLeft(3).multiply(y1sqz1)).
                shiftLeft(1).multiply(y1z1).mod(this.ec.getP());
        // y3 = 4 * y1^2 * z1 * (3 * w * x1 - 2 * y1^2 * z1) - w^3
        BigInteger y3 = (w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1))).
                shiftLeft(2).multiply(y1sqz1).subtract(w.pow(2).multiply(w)).mod(this.ec.getP());
        // z3 = 8 * (y1 * z1)^3
        BigInteger z3 = y1z1.pow(2).multiply(y1z1).shiftLeft(3).mod(this.ec.getP());

        return new ECPointArthimetic(this.ec, x3, y3, z3);
    }

    public ECPointArthimetic multiply(BigInteger k) {
        if (this.isInfinity()) {
            return this;
        }
        ECPointArthimetic R = new ECPointArthimetic(this.ec, zero, zero, null);
        if (k.signum() == 0) {
            infinity = true;
            return R;
        }

        BigInteger e = k;
        BigInteger h = e.multiply(new BigInteger("3"));

        ECPointArthimetic neg = this.negate();
        R = this;

        int i;
        for (i = h.bitLength() - 2; i > 0; --i) {
            R = R.twice();
            boolean hBit = h.testBit(i);
            boolean eBit = e.testBit(i);

            if (hBit != eBit) {
                R = R.add(hBit ? this : neg);
            }
        }

        return R;
    }

    public ECPointArthimetic implShamirsTrick( BigInteger k,
    ECPointArthimetic Q, BigInteger l){
        int m = Math.max(k.bitLength(), l.bitLength());
        ECPointArthimetic Z = this.add(Q);
        ECPointArthimetic R  = new ECPointArthimetic(ec,zero,zero,null);

        for (int i = m - 1; i >= 0; --i){
            R = R.twice();

            if (k.testBit(i)){
                if (l.testBit(i)){
                    R = R.add(Z);
                }else{
                    R = R.add(this);
                }
            }else{
                if (l.testBit(i)){
                    R = R.add(Q);
                }
            }
        }
        return R;
    }
} 
```

这是我使用的曲线：

```
package NISTCurves;
import ecc.*;
import java.math.BigInteger;

public class P192 implements ECDomainParameters {

    String p192X = "188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012";
    String p192Y = "07192b95ffc8da78631011ed6b24cdd573f977a11e794811";
    String p192B = "64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1";
    String p192P = "6277101735386680763835789423207666416083908700390324961279";
    String p192Order = "6277101735386680763835789423176059013767194773182842284081";
    String p192A = "-3";
    BigInteger p = new BigInteger(p192P, 16);
    EllipticCurve ec =
        new EllipticCurve(p,
        new BigInteger(p192A).mod(p),
        new BigInteger(p192B, 16));
    ECPointArthimetic G = new ECPointArthimetic(ec, new BigInteger(p192X,16), 
               new BigInteger(p192Y,16),null);
    BigInteger order = new BigInteger(p192Order, 16);

    @Override
    public BigInteger getP() {
        return p;
    }

    @Override
    public EllipticCurve getECCurve() {
        return ec;
    }

    @Override
    public BigInteger getOrder() {
        return order;
    }

    @Override
    public ECPointArthimetic getGenerator() {
        return G;
    }
} 
```

椭圆曲线域参数规范

```
package NISTCurves;
import ecc.ECPointArthimetic;
import ecc.EllipticCurve;
import java.math.BigInteger;

public interface ECDomainParameters {
    public BigInteger getP();
    public ECPointArthimetic getGenerator();  
    public EllipticCurve getECCurve();
    public BigInteger getOrder();
} 
```

椭圆曲线数字签名算法实现在这里。在这段代码中有 main 函数，所以用它来测试异常。

```
package ecc;
import NISTCurves.ECDomainParameters;
import NISTCurves.P192;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

/**
 *
 * @author Gere
 */
public class ECDSA {

    private BigInteger r, s;
    ECDomainParameters param;
    private PrivateKey prvKey;
    private PublicKey pubKey;
    BigInteger zero = BigInteger.ZERO;
    private BigInteger one = BigInteger.ONE;
    private MessageDigest sha;

    public ECDSA() {
        try {
            sha = MessageDigest.getInstance("SHA-512");
        } catch (NoSuchAlgorithmException ex) {
            ex.printStackTrace();
        }
    }

    public void initSign(PrivateKey prvKey) {
        this.prvKey = prvKey;
        param = prvKey.getParam();
    }

    public void initVerify(PublicKey pubKey) {
        this.pubKey = pubKey;
        param = pubKey.getParam();
    }

    public void update(byte[] byteMsg) {
        sha.update(byteMsg);
    }

    public byte[] sign() throws FileNotFoundException, IOException {

        BigInteger c = new BigInteger(
                                   param.getP().bitLength() + 64,  Rand.sr);
        BigInteger k = c.mod(param.getOrder().subtract(one)).add(one);
        while (!(k.gcd(param.getOrder()).compareTo(one) == 0)) {
            c = new BigInteger(param.getP().bitLength() + 64, Rand.sr);
            k = c.mod(param.getOrder().subtract(one)).add(one);
        }
        BigInteger kinv = k.modInverse(param.getOrder());
        ECPointArthimetic p = param.getGenerator().multiply(k);
        if (p.getX().equals(zero)) {
            return sign();
        }
        BigInteger hash = new BigInteger(sha.digest());
        BigInteger r = p.getX().mod(param.getOrder());

        BigInteger s = (kinv.multiply((hash.add((prvKey.getPrivateKey()
                                  .multiply(r)))))).mod(param.getOrder());
        if (s.compareTo(zero) == 0) {
            return sign();
        }

        System.out.println("r at sign: " + r);
        System.out.println("s at sign: " + s);

        byte[] rArr = toUnsignedByteArray(r);
        byte[] sArr = toUnsignedByteArray(s);
        int nLength = (param.getOrder().bitLength() + 7) / 8;
        byte[] res = new byte[2 * nLength];
        System.arraycopy(rArr, 0, res, nLength - rArr.length, rArr.length);

        System.arraycopy(sArr, 0, res, 2 * nLength - sArr.length,
                      sArr.length);
        return res;
    }

    public boolean verify(byte[] res) {

        int nLength = (param.getOrder().bitLength() + 7) / 8;

        byte[] rArr = new byte[nLength];
        System.arraycopy(res, 0, rArr, 0, nLength);
        r = new BigInteger(rArr);

        byte[] sArr = new byte[nLength];
        System.arraycopy(res, nLength, sArr, 0, nLength);
        s = new BigInteger(sArr);
        System.out.println("r at verify: " + r);
        System.out.println("s at verify: " + s);
        BigInteger w, u1, u2, v;
        // r in the range [1,n-1]
        if (r.compareTo(one) < 0 || r.compareTo(param.getOrder()) >= 0) {
            return false;
        }

        // s in the range [1,n-1]
        if (s.compareTo(one) < 0 || s.compareTo(param.getOrder()) >= 0) {
            return false;
        }
        w = s.modInverse(param.getOrder());

        BigInteger hash = new BigInteger(sha.digest());
        u1 = hash.multiply(w);
        u2 = r.multiply(w);

        ECPointArthimetic G = param.getGenerator();
        ECPointArthimetic Q = pubKey.getPublicKey();

        // u1G + u2Q

        ECPointArthimetic temp = G.implShamirsTrick(u1, Q, u2);
        v = temp.getX();
        v = v.mod(param.getOrder());

        return v.equals(r);
    }

    byte[] toUnsignedByteArray(BigInteger bi) {
        byte[] ba = bi.toByteArray();
        if (ba[0] != 0) {
            return ba;
        } else {
            byte[] ba2 = new byte[ba.length - 1];
            System.arraycopy(ba, 1, ba2, 0, ba.length - 1);
            return ba2;
        }
    }

    public static void main(String[] args) {
        byte[] msg = "Hello".getBytes();
        byte[] sig = null;
        ECDomainParameters param = new P192();        
        PrivateKey prvObj = new PrivateKey(param);
        PublicKey pubObj = new PublicKey(prvObj);
        ECDSA ecdsa = new ECDSA();
        ecdsa.initSign(prvObj);
        ecdsa.update(msg);
        try {
            sig = ecdsa.sign();
        } catch (FileNotFoundException ex) {
            System.out.println(ex.getMessage());

        } catch (IOException ex) {
            System.out.println(ex.getMessage());
        }
        ecdsa.initVerify(pubObj);
        ecdsa.update(msg);
        if (ecdsa.verify(sig)) {
            System.out.println("valid");
        } else {
            System.out.println("invalid");
        }
    }
} 
```

这里 PrivateKey 类

```
package ecc;
import NISTCurves.ECDomainParameters;
import java.math.BigInteger;
import java.security.SecureRandom;

/**
 *
 * @author Gere
 */
public class PrivateKey {

    private BigInteger d;
    private ECDomainParameters param;
    private BigInteger one = BigInteger.ONE;
    private BigInteger zero;
    private PublicKey pubKey;

    public PrivateKey(ECDomainParameters param) {
        this.param = param;
        BigInteger c = new BigInteger(param.getOrder().bitLength() + 64,
                new SecureRandom());
        BigInteger n1 = param.getOrder().subtract(one);
        d = c.mod(n1).add(one);
        pubKey = new PublicKey(this);
    }

    public BigInteger getPrivateKey() {
        return d;
    }

    public ECDomainParameters getParam() {
        return param;
    }
} 
```

公钥类

```
package ecc;
import NISTCurves.ECDomainParameters;

/**
 *
 * @author Gere
 */
public class PublicKey {
    private ECDomainParameters param;
    private ECPointArthimetic Q;

    public PublicKey(PrivateKey privObj) {
        param = privObj.getParam();
        Q  = param.getGenerator().multiply(privObj.getPrivateKey());
    }

    public ECDomainParameters getParam() {
        return param;
    }

    public ECPointArthimetic getPublicKey() {
        return Q;
    }
} 
```

椭圆曲线

```
package ecc;
import java.math.BigInteger;

/**
 *
 * @author Gere
 */
public class EllipticCurve {

    private BigInteger a;
    private BigInteger b;
    private BigInteger p;

    public EllipticCurve(BigInteger a, BigInteger b, BigInteger p) {
        this.a = a;
        this.b = b;
        this.p = p;
    }

    public BigInteger getA() {
        return a;
    }

    public BigInteger getB() {
        return b;
    }

    public BigInteger getP() {
        return p;
    }       
} 
```

兰德级

```
package ecc;
import java.security.SecureRandom;

/**
 *
 * @author Gere
 */
public class Rand {
    public static final SecureRandom sr = new SecureRandom();     
} 
```

椭圆曲线界面

```
package ecc;
import java.math.BigInteger;

public interface ECConstants{
    public static final BigInteger zero = BigInteger.valueOf(0);
    public static final BigInteger one = BigInteger.valueOf(1);
    public static final BigInteger two = BigInteger.valueOf(2);
    public static final BigInteger three = BigInteger.valueOf(3);
    public static final BigInteger four= BigInteger.valueOf(4);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T06:20:13.653

最重要的错误在 NISTCurves.P192: p 中，并且顺序在 base-10 中，而不是在 base-16 中。此外，当您构造 EllipticCurve 对象时，您提供的参数顺序错误。你的方法需要`(a, b, p)`，但你用它来调用它`(p, a, b)`（所以我关于`p`不是素数的猜测是正确的）。

另一个问题是在您的验证方法中，当您打开`r`和`s`. 由于它们是无符号格式，您应该使用`new BigInteger(1, rArr)`而不是普通的构造函数。

通过这些更改，您的代码对我有用（我可以验证签名 - 我尚未验证实现的正确性）。

* * *

（下面的旧答案：）

由于您没有向我们提供与堆栈跟踪匹配的代码，因此这只是一个猜测：

在椭圆曲线加法过程中（在素数域上有一条曲线），您应该只`BigInteger.modInverse()`使用素数`p`（素数域的顺序）作为模数进行调用。

使用“BigInteger 不可逆”偶尔失败的最可能的方法是 if`p`实际上不是素数。

你从哪里来`p`？尝试插入

```
if(!ec.getP().isProbablePrime(100)) throw new RuntimeException("P is not a prime"); 
```

某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T00:37:27.047

来自 JDK java 代码`BigInteger`：

```
 // Base and modulus are even, throw exception
 if (isEven())
     throw new ArithmeticException("BigInteger not invertible."); 
```

似乎对于该`modInverse()`方法，`BigInteger`可能不是偶数。

# asp.net - 当客户端断开连接时，Asp.net Web API 自托管服务未处理的异常

> ID：10986193
> 
> 赞同：3
> 
> 时间：2012-06-11T19:17:54.627
> 
> 标签：asp.net, wcf, asp.net-web-api, wcf-web-api

我在 Windows 服务中使用 web api**自托管**，我遇到了一个问题，在谷歌搜索了几个小时后还没有找到合理的答案。

其中一个 api 控制器提供大量数据流（不是那么大，几十 MB）。生成数据需要一些时间，所以我决定使用**TransferMode.StreamedResponse**来最小化客户端等待响应的时间。我还添加了一个`CompressHandler`和自定义`CompressedContent`（派生自`HttpContent`），主要基于以下[答案](https://stackoverflow.com/questions/10443588/mvc4-webapi-compress-get-method-response)。

控制器返回一个 的实例`IDataReader`，然后由自定义格式化程序对其进行序列化，该格式化程序最后在`CompressedContent`我提到的内部压缩。整个数据传递都是**流式传输**的，因此当客户端接收数据时，服务器端的数据读取器可能仍在从数据库中读取行。当客户表现良好时，一切正常。

当客户端**断开连接**而数据仍在被序列化到底层网络流时，就会出现此问题。我试图观察委托`IsFaulted`内部的任务（来自链接）并处理底层网络。不幸的是，当控件离开我的代码时，（指定的网络名称不再可用）仍然被抛出。从堆栈跟踪来看，当 Web Api 尝试关闭（结束）底层网络流（http 通道？）时，似乎引发了异常。当它发生未观察到的异常时，它会关闭整个 Windows 服务。`ContinueWith``CompressedContent``Stream``CommunicationException`

我通过设置 Windows 服务恢复选项缓解了这个问题，但我想知道这个故障是否可以在代码中处理。

**有没有办法`IErrorHandler`在 web api 自托管服务模式中设置自定义错误处理程序（大概）来防止这种错误？**

*我正在使用 Beta 版本，我将尝试在 RC 上重现此错误，但我怀疑设置这种错误处理程序会以任何方式改变*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:40:27.973

我们有同样的问题。我能够向 MS 提交修复，然后他们又发布了修复此问题的夜间版本。他们正在考虑将修复程序向后移植到 RTM。您可以在此处查看拉取版本：http: [//aspnetwebstack.codeplex.com/SourceControl/network/forks/rdean79/issue284/contribution/3329](http://aspnetwebstack.codeplex.com/SourceControl/network/forks/rdean79/issue284/contribution/3329)

# php - 使用javascript动态检索按钮值

> ID：10986195
> 
> 赞同：2
> 
> 时间：2012-06-11T19:18:17.997
> 
> 标签：php, javascript, ajax

我正在尝试使用 AJAX 为线程/评论创建动态“页面”列表。

在 PHP 中，我查看结果并将数据库查询限制为 '$page, $page+10'

现在，我需要做的就是弄清楚如何将用户想要查看的页面发送到 PHP。

这是生成不同页面按钮的代码：

```
var htmlpage = "<div class='pages'><ul>"
for (i=1 ; i < pages+1 ; i++)
{
    htmlpage += "<li><input type='submit' id='page"+i+"' value='"+i+"' onclick='updatefilters(document.getElementById('page1').value);' /></li>"
}
htmlpage += "<div>"    
htmlpage += "</ul>"; 
```

*这是通过 javascript 完成的，数据通过 JSON/AJAX 调用返回。

`document.getElementById('page1').value`给我一个

`syntax error[Break On This Error] updatefilters(document.getElementById(`

错误。我尝试了不同的格式，就这样结束了。我只是不太了解javascript，无法找出问题所在。

我需要将提交按钮的值发送到 updatefilters() 函数。关于如何做的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:13:39.987

jQuery 回答：既然你问/。

```
$(document).ready(function() {
    $(document).on('click', '.submitPage', function() {
        updatefilters($(this).val());
    });
}); 
```

对您的生成代码稍作更改（不匹配 div 和 ul end BTW）我添加了 submitPage 类。如果您不喜欢这样，请改用上面的以下选择器：

```
$(document).on('click','.pages>ul>li>input',function(){ 
```

现在更改生成代码：

```
var htmlpage = "<div class='pages'><ul>";
var mystart = "<li><input type='submit' class='submitPage' id='page";
var mymid = "' value='";
var myend = "' /></li>";

for (i = 1; i < pages + 1; i++) {
    htmlpage += mystart + i + mymid + i + myend;
}
htmlpage += "</ul></div>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:25:10.807

尝试这个：

```
htmlpage += "<li><input type='submit' id='page"+i+"' value='"+i+"' onclick='updatefilters(document.getElementById(\'page1\').value);' /></li>"; 
```

**编辑：**

关于 jquery，您可以将上面的内容替换为：（假设您没有其他以“pageX”开头的输入，只有这些循环。

```
$(document).ready(function() {
   $("input[id^='page']").live("click",function() {
      updatefilters($(this)[0].value);
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:45:01.410

请不要使用 document.getElementById 来引用您所在的对象，您的代码应该是

```
htmlpage += "<li><input type='submit' id='page"+i+"' value='"+i+"' onclick='updatefilters(this.value);' /></li>"; 
```

只是对此的解释 HTML 中的每一件事都有一个 JavaScript 对象 EG 你的 li 是一个 HTMLLiElement 所以你的 onclick 事件是该对象的一个​​方法所以当你使用它时它指向你当前所在的对象。与普通的一样JavaScript 对象。

这也使 php 更容易回显调用，其中您使用对象的值，因为它可以防止引用转义

如果您想要一个不像上面那样混乱的完整解决方案。并使用正确的这样做的原因：

```
var divPage = $(document.createElement("div"));
divPage.attr('class', 'pages');
var ulPage = $(document.createElement("ul"));
for (i=1 ; i < pages+1 ; i++)
{
     var liElement = $(document.createElement("li"));
     var inputElement = $(document.createElement("input"));
     input.attr('type', 'submit');
     input.attr('id', 'page'+i);
     input.val(i);
     input.click(function(){
          updateFilters($(this).val());
     });
     liElement.append(inputElement);
     ulPage.append(liElement)
}
divPage.append(ulPage); 
```

然后打电话`$("ElementIdYouAddingTo").append(divPage);`

我会说我评论过在 jQuery 中使用 DOM 的用户，这`document.createElement`是唯一的例外，因为它比用户在 Stack Overflow 上测试的其他方法更快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:29:40.587

我通过使用得到了答案`this.value`

这似乎很明显，尤其是通过阅读上述答案/评论，但重要的是要指出的`this.value`是，javascript 代码会返回单击的任何元素的值。

```
 var htmlpage = "<div class='pages'><ul>"
        for (i=1 ; i < pages+1 ; i++)
            {
                if (data['page']==i) {
                    htmlpage += "<li><input type='submit' id='selected' value='"+ i +"'/></li>"
                } else {
                    htmlpage += "<li><input type='submit' id='page' value='"+ i +"' onclick='updatefilters(this.value);' /></li>"
                }
            }
        htmlpage 
```

# android - 接收从蓝牙输入到安卓的语音信号

> ID：10986198
> 
> 赞同：2
> 
> 时间：2012-06-11T19:18:24.100
> 
> 标签：android, bluetooth, signal-processing

我们正在考虑创建一个从蓝牙耳机接收语音信号的 Android 应用程序。我们想对信号进行一些数字信号处理并通过 Android 手机扬声器本身输出，我很难找到有关将蓝牙数据发送到应用程序的信息。设备定位并配对后，如何使用输入？

# jquery - ASP.NET DataList 控件中的 jQuery-UI 确认对话框

> ID：10986199
> 
> 赞同：1
> 
> 时间：2012-06-11T19:18:25.233
> 
> 标签：jquery, asp.net, jquery-ui-dialog

当单击 DataList 控件中的 LinkBut​​ton 时，我试图让 jQuery-UI 确认对话框工作，但我尝试过的任何方法似乎都不起作用。DataList 是数据库条目的文件附件列表。

这是原始 .aspx 文件的相关部分：

```
<ul id="attachmentList">
  <asp:DataList ID="dlAttachments" runat="server" DataKeyField="AttachID" RepeatLayout="Flow">
    <ItemTemplate>
      <li>
        <asp:HyperLink ID="hlViewAttach" runat="server" NavigateUrl='<%# CreateAttachURL(Convert.ToInt32(Eval("AttachID"))) %>'
          Text='<%# Eval("Description").ToString() %>' Target="_blank" />
        <em>(</em><asp:Label ID="lblType" runat="server" Text='<%# GetFriendlyFileType(Eval("FileType").ToString()) %>' Font-Italic="True"></asp:Label>,
        <asp:Label ID="lblSize" runat="server" Text='<%# GetFriendlyFileSize(Convert.ToInt32(Eval("FileSize"))) %>' Font-Italic="True"></asp:Label><em>)</em>
        <asp:LinkButton ID="btnDelAttach" runat="server" OnClick="btnDelAttach_Click"
          OnClientClick="return ConfirmDeleteAttachment(this, 'Please confirm deletion', 'Are you sure you wish to delete this attachment?');">DELETE</asp:LinkButton>
      </ItemTemplate>
    </asp:DataList>
  </ul> 
```

这是由 ASP.Net 生成的上述 HTML：

```
<ul id="attachmentList">
<span id="ctl00_mainContent_wizNewIPR_dlAttachments">
  <li><a id="ctl00_mainContent_wizNewIPR_dlAttachments_ctl00_hlViewAttach" href="ViewAttachment.aspx?AttachID=260" target="_blank">Attachment description #1</a>
    <em>(</em><span id="ctl00_mainContent_wizNewIPR_dlAttachments_ctl00_lblType" style="font-style:italic;">Acrobat PDF document</span>,
    <span id="ctl00_mainContent_wizNewIPR_dlAttachments_ctl00_lblSize" style="font-style:italic;">74.61 kB</span><em>)</em>
    <a onclick="return ConfirmDeleteAttachment(this, 'Please confirm deletion', 'Are you sure you wish to delete this attachment?');"
      id="ctl00_mainContent_wizNewIPR_dlAttachments_ctl00_btnDelAttach" href="javascript:__doPostBack('ctl00$mainContent$wizNewIPR$dlAttachments$ctl00$btnDelAttach','')">DELETE</a></li>
</span>
</ul> 
```

我使用的 jQuery 函数是一个简单的 Yes/No 对话框，用于确认删除附件。这是Javascript源代码：

```
//Confirm Delete Attachment dialog
var delConfirmed = false;
function ConfirmDeleteDialog(obj, title, dialogText) {
  if (!delConfirmed) {
    //add the dialog div to the page
    $('body').append(String.Format("<div id='confirmDeleteDialog' title='{0}'><p>{1}</p></div>", title, dialogText));
    //create the dialog
    $('#confirmDeleteDialog').dialog({
      modal: true,
      resizable: false,
      draggable: false,
      close: function(event, ui) { $('body').find('#confirmDeleteDialog').remove(); },
      buttons:
        {
          'Yes, delete it': function() {
            $(this).dialog('close');
            delConfirmed = true;
            if (obj) obj.click();
          },
          'No, keep it': function() {
            $(this).dialog('close');
          }
        }
      });
    }

    return delConfirmed;
} 
```

我从[http://markmintoff.com/2011/03/asp-net-jquery-confirm-dialog/](http://markmintoff.com/2011/03/asp-net-jquery-confirm-dialog/)得到了这个——它看起来很简单而且很有意义，但由于某种原因它对我不起作用。我从来没有得到 jQuery-UI 确认对话框，它只是在我单击按钮时触发按钮的 OnClick 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T15:23:26.733

答案是让 LinkBut​​ton 的 OnClientClick 事件中的函数调用（“ConfirmDeleteAttachment”）与我正在调用的函数的名称相匹配！这只是一个愚蠢的错字。

这个答案归功于开发人员（Mark Mintoff，请参阅他的博客[http://markmintoff.com](http://markmintoff.com)），我使用了他的代码——我给他发了电子邮件，他指出了我的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:30:12.840

删除单引号

```
[id$=btnDelAttach] 
```

# php - 如何通过注册社交插件获取在我的网站上注册的用户的用户 ID

> ID：10986202
> 
> 赞同：0
> 
> 时间：2012-06-11T19:18:41.333
> 
> 标签：php, facebook, json, registration

如何使用 facebook 注册插件获取在我的网站上注册的 facebook 用户的用户 ID。

Graph Api 表示每个 facebook 对象都有一个唯一的 ID。

我想知道一种获取此 ID 的方法。

注册插件的json代码为：

```
<iframe src='http://www.facebook.com/plugins/registration.php?
                            client_id=325340244194060&
                                 redirect_uri=http://www.pingcampus.com/facebook_registration_plugin/store_user_data.php&
                            fields=[
    {
        "name": "name"
    },
    {
        "name": "email"
    },
    {
        "name": "gender"
    },
    {
        "name": "birthday"
    },
     {
        "name": "captcha"
    }
    ]'
                            scrolling="auto"
                            frameborder="no"
                            style="border:none"
                            allowTransparency="true"
                            width="500"
                            height="800"

             >
                    </iframe> 
```

我用来获取详细信息的 PHP 代码是：

```
 <?php ob_start();
    define('FACEBOOK_APP_ID', '325340244194060');
    define('FACEBOOK_SECRET', '2ab5cb734f39d8417569cc7be7a0e89a');

    // No need to change function body
    function parse_signed_request($signed_request, $secret) {
        list($encoded_sig, $payload) = explode('.', $signed_request, 2);

        // decode the data
        $sig = base64_url_decode($encoded_sig);
        $data = json_decode(base64_url_decode($payload), true);

        if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
            error_log('Unknown algorithm. Expected HMAC-SHA256');
            return null;
        }

        // check sig
        $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
        if ($sig !== $expected_sig) {
            error_log('Bad Signed JSON signature!');
            return null;
        }

        return $data;
    }

    function base64_url_decode($input) {
        return base64_decode(strtr($input, '-_', '+/'));
    }

    if ($_REQUEST) {
        $response = parse_signed_request($_REQUEST['signed_request'],
                        FACEBOOK_SECRET);

        /*
          "<pre>";
        print_r($response);
          "</pre>"; // Uncomment this for printing the response Array
        */

        $name = htmlentities($response["registration"]["name"]);
        $email = htmlentities($response["registration"]["email"]);
        $gender = htmlentities($response["registration"]["gender"]);
        $dob = htmlentities($response["registration"]["birthday"]);
        $phone = htmlentities($response["registration"]["phone"]);

} else {
        echo '$_REQUEST is empty';
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:23:46.313

根据[https://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/) user_id 在 signed_request 数据上。

I don't know PHP, but based on your above code and the information from the registration documentation, it should look something like this:

```
.....
$name = htmlentities($response["registration"]["name"]);
.....
$id = $response["user_id"]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T20:43:31.353

没有办法做到这一点，相反，一旦用户通过您的应用程序注册或登录 Facebook，您就需要将用户的数据保存在您的数据库中。

# java - 为什么 Hibernate 会生成一个连接错误列的查询？

> ID：10986208
> 
> 赞同：2
> 
> 时间：2012-06-11T19:19:08.690
> 
> 标签：java, hibernate, hibernate-mapping

我正在使用 Java 1.6、Hibernate 3.1、MySQL 5.5、XML 映射。我有两个表，partner 和 partner_http_account。我将向您展示相关领域。

伙伴：

```
partnerid dec(22,0) [primary key] 
```

partner_http_account:

```
partnerhttpacctid dec(22,0) [primary key]
partnerid dec(22,0) [foreign key] 
```

这是 XML 映射：

```
<class name="com.rc.model.partner.Partner" table="partner" mutable="true">
    <id name="partnerId" type="int">
        <column name="partnerid" scale="10" precision="0" not-null="true" unique="true" sql-type="int unsigned"/>
        <generator class="com.rc.model.jdbc.sequence.MexpIdentifierGenerator">
            <param name="sequence">seq_partnerid</param>
            <param name="idDataType">int</param>
        </generator>
    </id>
    ...
    <one-to-one name="partnerHTTPAccount" class="com.rc.model.partner.PartnerHTTPAccount" lazy="false"
                 foreign-key="partnerid" cascade="all"/>
</class>

<class name="com.rc.model.partner.PartnerHTTPAccount" table="partner_http_account">
    <id name="partnerHttpAcctId" type="int">
        <column name="partnerhttpacctid" scale="10" precision="0" not-null="true" unique="true" sql-type="int unsigned"/>
        <generator class="com.rc.model.jdbc.sequence.MexpIdentifierGenerator">
            <param name="sequence">seq_partnerhttpacctid</param>
            <param name="idDataType">int</param>
        </generator>
    </id>

    <many-to-one name="partner" class="com.rc.model.partner.Partner" column="partnerid"
                 foreign-key="partnerid" cascade="none"/>
</class> 
```

这是我的Java代码：

```
public List<Partner> getPartnersByDomainStartsWith(String domainStartsWith) {

    Query hQuery = sessionManager.getSession().createQuery("from Partner p " +
            "left outer join fetch p.partnerHTTPAccount " +
            "where p.domain like :domainStartsWith||'%'");

    hQuery.setString("domainStartsWith", domainStartsWith);

    return hQuery.list();
} 
```

这是 Hibernate 生成的：

```
select partner0_.partnerid as partnerid0_,
partnerhtt1_.partnerhttpacctid as partnerh1_1_,
...
partnerhtt1_.partnerid as partnerid104_1_,
...
from partner partner0_
left outer join partner_http_account partnerhtt1_ on partner0_.partnerid=partnerhtt1_.partnerhttpacctid 
where partner0_.domain like concat(?, '%') 
```

我的问题是这两个表生成的 sql 查询加入了错误的字段。它应该加入`partner0.partnerid=partnerhtt1.partnerid`。真的很感激一些见解。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:32:12.097

[这在Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-bidirectional-121)中得到了很好的描述：

```
<class name="Person">
    <id name="id" column="personId">
        <generator class="native"/>
    </id>
    <many-to-one name="address" 
        column="addressId" 
        unique="true"
        not-null="true"/>
</class>

<class name="Address">
    <id name="id" column="addressId">
        <generator class="native"/>
    </id>
   <one-to-one name="person" 
        property-ref="address"/>
</class> 
```

请注意如何使用 property-ref，以指示一对一是地址属性映射的关联的反面。

# objective-c - 如何在启动其他 UIView 动画之前提交 UIButton 状态更改？

> ID：10986210
> 
> 赞同：0
> 
> 时间：2012-06-11T19:19:09.920
> 
> 标签：objective-c, ios, uiview, uibutton, uiviewanimationtransition

我有一个 UIButton 触发一个目标动作，导致一个视图在 touchupinside 上转换到另一个视图。

发生这种情况时，我还将按钮的状态更改为选中，但所选状态的（不同）背景图像在 UIView 转换完成之前实际上并没有绘制（或者有时它似乎也随着 UIView 转换进行转换。）

如何在开始视图转换之前强制按钮重绘新的背景图像？

在 UIControlEventTouchUpInside 上运行的代码：

```
RhSubTab *activeTab;
for(RhSubTab *tab in self.tabViews.copy) {
    tab.selected = NO;
    [self.view bringSubviewToFront:tab];
    if(tab.tag == type) activeTab = tab;
}
[self.view bringSubviewToFront:activeTab];
[activeTab setSelected:YES];

UIView *oldView;
UIView *newView;
for(UIView *view in self.contentViews.copy) {
    if([self.view.subviews containsObject:view]) {
        oldView = view;
    }
    if(view.tag == type) {
        newView = view;
    }
}

if(!oldView) [self.view addSubview:newView];
else [UIView transitionFromView:oldView toView:newView duration:0.5 options:(UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationCurveEaseInOut) completion:nil]; 
```

和自定义（RhSubTab）按钮类：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
self = [super initWithCoder:aDecoder];
if(self) {
    [self setBackgroundImage:[[UIImage imageNamed:@"SubContentTabBg.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 9, 0, 40)] forState:UIControlStateNormal];
    [self setBackgroundImage:[[UIImage imageNamed:@"SubContentTabBg-selected.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 9, 0, 40)] forState:UIControlStateSelected];
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:51:30.590

尝试使用 UIButton 控件状态突出显示而不是您选择的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:41:29.417

尝试将方法的第二部分（将按钮设置为选定状态后）分解为第二种方法。

然后使用 performSelector:withObject:afterDelay: 调用第二种方法

因此，您的方法可能如下所示：

```
RhSubTab *activeTab;
for(RhSubTab *tab in self.tabViews.copy) {
    tab.selected = NO;
    [self.view bringSubviewToFront:tab];
    if(tab.tag == type) activeTab = tab;
}
[self.view bringSubviewToFront:activeTab];
[activeTab setSelected:YES];

[self performSelector: @selector(doTransition) withObject: nil afterDelay: 0]; 
```

您的第二种方法可能如下所示：

```
- (void) doTransition;
{
  UIView *oldView;
  UIView *newView;
  for(UIView *view in self.contentViews.copy) {
    if([self.view.subviews containsObject:view]) {
      oldView = view;
    }
    if(view.tag == type) {
      newView = view;
    }
  }

  if(!oldView) [self.view addSubview:newView];
  else [UIView transitionFromView: oldView 
    toView:newView duration:0.5 
    options: (UIViewAnimationOptionTransitionCrossDissolve|UIViewAnimationCurveEaseInOut)
    completion:nil];
} 
```

即使延迟值为 0，performSelector:withObject:afterDelay: 也会立即返回，直到通过事件循环的下一条路径、检查用户事件、处理屏幕更新等之后才会触发指定的方法。

如果您希望转换等到按钮更改完成，您可能需要添加一个小的非零延迟值。

performSelector:withObject:afterDelay: 方法将让您传递 0 或 1 个对象作为参数。乍一看，您的过渡方法的后半部分似乎不需要任何参数。

# json - 如何显示从 json2 格式获取的 json 数据

> ID：10986212
> 
> 赞同：-1
> 
> 时间：2012-06-11T19:19:17.047
> 
> 标签：json

我从 Struts Action 获取 json 数据，如下所示： 我想在 JSP 页面中预先处理这些数据，但我尝试使用 .$each 或 attr，一切都不行，我使用 Json2.js JSON.stringfy() 获取这些数据，那么我如何获取其中的每个键和值呢？

[{"agreementNumber":"161446628","employeeIndicator":"N","enrollmentSrc":"363","fepIndicator":"N","groupCancelDate":null,"groupCancelDateTime":0,"groupCnlDate": "","groupEffDate":"20070701","groupEffectiveDate":{"date":1,"day":0,"hours":0,"minutes":0,"month":6,"seconds": 0,"time":1183262400000,"timezoneOffset":240,"year":107},"groupEffectiveDateTime":1183262400000,"groupName":"Westminster College","groupNumber":"01501701","index":"1 ","memberList":{"enrollmetSrc":"363","groupNumber":"01501701","memberList":[{"agreementNumber":"161446628","birthDate":{"date":10,"day":0,"hours":0,"minutes":0,"month":1,"秒":0,"time":-217450800000,"timezoneOffset":300,"year":63},"birthDateTime":-217450800000,"cancelDate":null,"cancelDateTime":0,"classCode":" I3 ","effectiveDate":{"date":1,"day":0,"hours":0,"minutes":0,"month":6,"seconds":0,"time":1183262400000," timezoneOffset":240,"year":107},"effectiveDateTime":1183262400000,"firstName":"KENNETH","gender":"M","groupName":"","groupNumber":"01501701 ","lastName":"ROMIG","medicareAdvantage":"","memberId":375315,"middleName":"J","pin":"1","preTtlName":"","re​​lation" :"Self","re​​lationCode":"1","sucTtlName":""},{"agreementNumber":"161446628","birthDate":{"date":23,"day":5,"hours" :0,"分钟":0,"月":7,"秒":0,"时间":-200692800000,"timezoneOffset":240,"年":63},"birthDateTime":-200692800000,"cancelDate ":null,"cancelDateTime":0,"classCode":"I3","effectiveDate":{"date":1,"day":0,"hours":0,"分钟":0,"月":6,"秒":0,"时间":1183262400000,"timezoneOffset":240,"年":107},"有效日期时间":1183262400000,"firstName":"KIMBERLY", "gender":"F","groupName":"","groupNumber":"01501701","lastName":"ROMIG","medicareAdvantage":"","memberId":1424959,"middleName":"G ","pin":"3","preTtlName":" ","re​​lation":"Spouse","re​​lationCode":"2","sucTtlName":" "},{"agreementNumber":"161446628", "birthDate":{"date":8,"day":1,"hours":0,"minutes":0,"month":0,"秒":0,"time":631774800000,"timezoneOffset":300,"year":90},"birthDateTime":631774800000,"cancelDate":null,"cancelDateTime":0,"classCode":"I3", "有效日期":{"日期":1,"天":0,"小时":0,"分钟":0,"月":6,"秒":0,"时间":1183262400000,"timezoneOffset" :240,"year":107},"effectiveDateTime":1183262400000,"firstName":"NICOLE","gender":"F","groupName":"","groupNumber":"01501701","lastName" :"CRUMBACHER ","medicareAdvantage":"","memberId":375314,"middleName":"A ","pin":"4","preTtlName":" ","re​​lation":"Child","re​​lationCode":"3","sucTtlName":" "},{"agreementNumber":"161446628","birthDate":{"date":7, "day":6,"hours":0,"minutes":0,"month":6,"seconds":0,"time":994478400000,"timezoneOffset":240,"year":101}," birthDateTime":994478400000,"cancelDate":null,"cancelDateTime":0,"classCode":"I3","effectiveDate":{"date":1,"day":0,"hours":0,"minutes ":0,"month":6,"seconds":0,"time":1183262400000,"timezoneOffset":240,"year":107},"effectiveDateTime":1183262400000,"firstName":"NATHAN","gender":"M","groupName":"","groupNumber":"01501701","lastName":"ROMIG","medicareAdvantage":"","memberId":1424960,"middleName ":"J","pin":"6","preTtlName":"","re​​lation":"Child","re​​lationCode":"3","sucTtlName":""}]},"ownerCode" :"HM"}]"relation":"Child","re​​lationCode":"3","sucTtlName":""}]},"ownerCode":"HM"}]"relation":"Child","re​​lationCode":"3","sucTtlName":""}]},"ownerCode":"HM"}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:39:11.703

您的 json 对象具有复杂的结构，因此我不会编写如何正确映射它的函数，但我将为您提供一些工具，以帮助您更好地理解它并使用它。

要更清楚地查看您的 json 对象，请使用在线 json 解析器[http://json.parser.online.fr/](http://json.parser.online.fr/)只需将您的 json 对象粘贴在那里，在右侧您将看到树状结构。

在这里，您可以看到示例如何访问您的 json 对象属性[jsfidle](http://jsfiddle.net/dynamikus/tk9N2/) 我知道这不是您想要的，但会帮助您构建它。

# jquery - 如何访问json多维数组中的数据

> ID：10986213
> 
> 赞同：0
> 
> 时间：2012-06-11T19:19:20.880
> 
> 标签：jquery, json

我有一个这样的结果json

```
[
       {"courseStarted" :[
               {"CategoryName":"CategoryName","courseName" :"Equipment Course", "seriesName": "Free Education", "courseDetails" :[
                       {"totalLessons" :"2", "NoLessonComplete":"1", "lastviewed":"date", "lessonDetails":[
                               {"lessonId":"342367","quiz":"quizReady"},
                               {"lessonId" :"345345", "quiz":"quizReady"},
                               {"lessonId":"435435","quiz":"quizReady"},
                               {"lessonId":"4234234", "quiz":"quizFailed"},
                               {"lessonId":"4234234","quiz":"quizPassed"}
                       ]}
               ]}
       ]},
       {"courseStarted" :[
               {"CategoryName":"CategoryName","courseName" :"Equipment Course1", "seriesName": "Free Education1", "courseDetails" :[
                       {"totalLessons" :"21", "NoLessonComplete":"11", "lastviewed":"date1", "lessonDetails":[
                               {"lessonId":"3423671","quiz":"quizReady"},
                               {"lessonId" :"3453451", "quiz":"quizReady"},
                               {"lessonId":"4354351","quiz":"quizReady"},
                               {"lessonId":"42342341", "quiz":"quizReady"},
                               {"lessonId":"42342341","quiz":"quizPassed"}
                       ]}
               ]}
       ]}

    ] 
```

从此 json 输出中，我如何使用 $.each 函数访问 courseId 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:24:00.477

```
$.each(data, function(){

    // Print course name
    console.log(this.courseStarted[0].courseName);

    $.each(this.courseStarted[0].courseDetails[0].lessonDetails, function(){
        // Print lesson id
        console.log(this.lessonId);
    });

}); 
```

# cocoa - NSMutableArray - 数组弹出等效

> ID：10986214
> 
> 赞同：5
> 
> 时间：2012-06-11T19:19:20.893
> 
> 标签：cocoa, nsmutablearray, foundation

如果我想从我的最后一个项目中弹出，`NSMutableArray`这是最合适的方法吗？

```
id theObject = [myMutableArray objectAtIndex:myMutableArray.count-1];
[myMutableArray removeLastObject]; 
```

我敢肯定 SOF 的某个人有更好的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T19:29:05.140

保留它，删除它，使用它，释放它。

```
id theObject = [[myMutableArray lastObject] retain];
[myMutableArray removeLastObject];
//use theObject....
[theObject release]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T19:35:36.487

没有弹出等效项，`NSMutableArray`但我想您可以轻松地为其添加一个类别以进行弹出。可能是这样的：

**NSMutableArray+Queue.h**

```
@interface NSMutableArray (Queue)
-(id)pop;
@end 
```

**NSMutableArray+Queue.m**

```
#import "NSMutableArray+Queue.h"

@implementation NSMutableArray (Queue)
-(id)pop{
    id obj = [[[self lastObject] retain] autorelease];
    [self removeLastObject];
    return obj;
}
@end 
```

然后导入它并像这样使用它：

```
#import "NSMutableArray+Queue.h"
...
id lastOne = [myArray pop]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:27:23.580

您可以使用`lastObject`来获取数组中的最后一个对象。

这将为您节省一些击键。

如果您希望能够用一行代码调用它，您可以将它全部包装在一个函数或一个类别中`NSMutableArray`。

# emacs - 在emacs中匹配左大括号和右大括号

> ID：10986216
> 
> 赞同：2
> 
> 时间：2012-06-11T19:19:25.637
> 
> 标签：emacs, gnu

我是emacs的新手，只用了一个月。
我的查询是：

1.  我想在编辑器中跟踪匹配的左大括号和右大括号。有这个命令吗？

2.  尝试在 Windows 中使用 cygwin 使用 emacs 时，Cx Cc 关闭 emacs 不起作用！有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:03:11.317

我个人喜欢[`mic-paren`](http://www.emacswiki.org/emacs/MicParen)，它有很多选项可用于自定义如何显示匹配的括号，包括在屏幕外时向您显示 minibuffer 中匹配括号的行。

我设置如下：

```
(setq paren-dont-touch-blink t)
(require 'mic-paren)
(paren-activate)
(setq paren-match-face 'highlight)
(setq paren-sexp-mode t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:44:52.083

[show-paren-mode](http://www.gnu.org/software/emacs/manual/html_node/emacs/Matching.html)将突出显示匹配的括号，至少当光标在一个或另一个上时。

一个更强大的替代方案是[高亮括号模式](http://www.emacswiki.org/emacs/HighlightParentheses)。这将突出显示点（光标）周围的所有括号，因此您在浏览代码时会看到所有括号的范围。

还有其他选项，列在[wiki](http://www.emacswiki.org/emacs/CategoryParentheses)上。

# sql - 如何在跨越一年的日期范围内为每周选择一行？

> ID：10986226
> 
> 赞同：2
> 
> 时间：2012-06-11T19:20:10.463
> 
> 标签：sql, postgresql, window-functions

在我的 postgreSQL 数据库中，我有一个包含日期和价格列的表。（“转换日期”和“价格”）

我想形成一个查询，该查询在跨越一年以上的日期范围内每周选择一行。

从这里的另一个问题/答案，我实现了这个代码，它适用于不到一年的日期范围：

```
;with cte as  
(  
  select *,  
  row_number() over (partition by Extract (week from transdate) order by transdate desc) as rn   
  from "tablename" where transdate between '06-01-1999' and '06-01-1999'::timestamp + `'50 week'::interval  
)  
select transdate, price from cte where rn = 1 order by transdate; 
```

但是，当我将间隔延长超过 50 周时，它仍然只选择最多 12 个月。

如何重新编写此代码以从该范围内的每周选择一个日期/价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:01:23.257

您的问题是周数在年份边界处环绕，但您想同时查看周数*和*年份。幸运的是，您可以一次通过几件事进行分区：

```
row_number() over (
    partition by extract(week from transdate),
                 extract(year from transdate)
    order by transdate desc
) as rn 
```

# collections - 你如何在backbone.js的集合中交换元素位置

> ID：10986229
> 
> 赞同：0
> 
> 时间：2012-06-11T19:20:33.600
> 
> 标签：collections, backbone.js

我正在使用主干.js。我的集合中的元素只是按照它们添加的顺序。但是，我希望能够切换元素的位置。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T21:11:08.000

你可以这样做：

```
var MyCollection = Backbone.Collection.extend({
    swapItems : function(index1, index2) {
        this.models[index1] = this.models.splice(index2, 1, this.models[index1])[0];
    }
}); 
```

这直接访问模型数组，然后将交换索引指定的项目。

# sql - SQL：在一段时间内计算的 SUM 之间的差异

> ID：10986230
> 
> 赞同：4
> 
> 时间：2012-06-11T19:20:35.907
> 
> 标签：sql, postgresql

我有一个看起来像这样的表：

```
CREATE TABLE foobar (
                     id                     SERIAL PRIMARY KEY,
                     data_entry_date        DATE NOT NULL,
                     user_id                INTEGER NOT NULL,
                     wine_glasses_drunk     INTEGER NOT NULL,
                     whisky_shots_drunk     INTEGER NOT NULL,
                     beer_bottle_drunk      INTEGER NOT NULL
                 );

insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-01', 1, 1,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-02', 1, 4,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-03', 1, 0,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-04', 1, 1,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-05', 1, 2,1,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-07', 1, 1,2,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-08', 1, 4,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-11', 1, 1,1,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-12', 1, 1,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-13', 1, 2,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-14', 1, 1,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-15', 1, 9,3,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-16', 1, 0,4,2);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-17', 1, 0,5,3);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-18', 1, 2,2,5);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-20', 1, 1,1,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-23', 1, 1,3,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-01-24', 1, 0,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-02-01', 1, 1,1,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-02-02', 1, 2,3,4);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-02-05', 1, 1,2,2);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-02-09', 1, 0,0,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-02-10', 1, 1,1,1);
insert into foobar (data_entry_date, user_id, wine_glasses_drunk, whisky_shots_drunk, beer_bottle_drunk) VALUES ('2011-02-11', 1, 3,6,3); 
```

我想编写一个查询，显示给定时期内 TOTAL wine_glasses_drunk、TOTAL Whisky_shots_drunk 和 TOTAL beer_bottles_drunk 与上一时期的 TOTAL 的差异。

它可能听起来比它更复杂。如果我们使用的 period* 为 1**周**== 7 天，那么查询应该返回**本周消耗的总数与****上周**消耗的总数相比的差异。

稍微复杂的是，表中的日期不是连续的 - 即有一些缺失的日期，因此查询需要在确定日期以进行期间计算时找到最相关的日期。

```
This is what I have so far:

-- using hard coded dates

SELECT (SUM(f1.wine_glasses_drunk) - SUM(f2.wine_glasses_drunk)) as wine_diff, 
(SUM(f1.whisky_shots_drunk) - SUM(f2.whisky_shots_drunk)) as whisky_diff, 
(SUM(f1.beer_bottle_drunk) - SUM(f2.beer_bottle_drunk)) as beer_diff 
FROM foobar f1 INNER JOIN foobar f2 ON f2.user_id=f1.user_id
WHERE f1.user_id=1 
AND f1.data_entry_date BETWEEN '2011-01-08' AND '2011-01-15'
AND f2.data_entry_date BETWEEN '2011-01-01' AND '2011-01-08'
AND f1.data_entry_date - f2.data_entry_date between 6 and 9; 
```

上面的 SQL 显然是一个 hack（尤其是`f1.data_entry_date - f2.data_entry_date between 6 and 9`标准）。我检查了 excel 中的结果，上面查询的结果（不出所料）是错误的。

如何编写此查询 - 以及如何修改它以便它可以处理数据库中的非连续日期？

我正在使用 postgreSQl，但如果可能的话，我更喜欢与数据库无关的（即 ANSI）SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:39:07.000

从您给出的描述中，我不能完全确定我是否以正确的方式进行此操作，但我会使用两种不同的功能来为您提供所需的结果。

首先，看一下 date_trunc 函数。这可以获得一周的第一天的日期，您可以对其进行分组以获得一周的总和。如果一周的第一天不是您想要的，您可以使用日期算术来解决这个问题。我想这周的第一天是星期一。

其次，您可以使用滞后窗口函数来查找前一行的总和。请注意，如果您错过了一周，此函数将查看前一行，而不仅仅是前一周。我检查了查询，以确保数据库正在查看正确的行。

```
select 
  user_id,
  week_start_date,
  this_week_wine_glasses_drunk -
    case when is_consecutive_weeks = 'TRUE' 
      then last_week_wine_glasses_drunk else 0 end as wine_glasses_drunk,
  this_week_whisky_shots_drunk -
    case when is_consecutive_weeks = 'TRUE' 
      then last_week_whisky_shots_drunk else 0 end as whisky_shots_drunk,
  this_week_beer_bottle_drunk -
    case when is_consecutive_weeks = 'TRUE' 
      then last_week_beer_bottle_drunk else 0 end as beer_bottle_drunk
from (
select
  user_id,
  week_start_date,
  this_week_wine_glasses_drunk,
  this_week_whisky_shots_drunk,
  this_week_beer_bottle_drunk,
  case when (lag(week_start_date)
    over (partition by user_id order by week_start_date)  + interval '7' day)
      = week_start_date then 'TRUE' end as is_consecutive_weeks,
  lag(this_week_wine_glasses_drunk) 
    over (partition by user_id order by week_start_date) as last_week_wine_glasses_drunk,
  lag(this_week_whisky_shots_drunk) 
    over (partition by user_id order by week_start_date) as last_week_whisky_shots_drunk,
  lag(this_week_beer_bottle_drunk) 
    over (partition by user_id order by week_start_date) as last_week_beer_bottle_drunk
from (
  select
    user_id,
    date_trunc('week', data_entry_date) as week_start_date,
    sum(wine_glasses_drunk) as this_week_wine_glasses_drunk,
    sum(whisky_shots_drunk) as this_week_whisky_shots_drunk,
    sum(beer_bottle_drunk) as this_week_beer_bottle_drunk
  from foobar
  group by user_id,
    date_trunc('week', data_entry_date)
  ) a
) b 
```

有一个[SQL fiddle](http://sqlfiddle.com/#!1/2aee7/23)供您查看。

顺便说一句，我来自 Oracle 背景，并使用 PostgreSQL 文档和 SQL Fiddle 破解了这个问题。希望这是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:54:58.453

稍微不同的方法（我会让你填写日期参数。）：

```
Declare @StartDate1, @EndDate1, @StartDate2, @EndDate2 AS Date
Set @StartDate1='6/1/2012'
Set @EndDate1='6/15/2012'
Set @StartDate2='6/16/2012'
Set @EndDate2='6/30/2012'

SELECT SUM(U.WineP1)-SUM(U.WineP2) AS WineDiff, SUM(U.WhiskeyP1)-SUM(U.WhiskeyP2) AS WhiskeyDiff, SUM(U.BeerP1)-SUM(U.BeerP2) AS BeerDiff
FROM
(
SELECT SUM(wine_glasses_drunk) AS WineP1, SUM(whisky_shots_drunk) AS WhiskeyP1, SUM(beer_bottle_drunk) AS BeerP1, 0 AS WineP2, 0 AS WhiskeyP2, 0 AS BeerP2
FROM foobar
WHERE data_entry_date BETWEEN @StartDate1 AND @EndDate1

UNION ALL

SELECT 0 AS WineP1, 0 AS WhiskeyP1, 0 AS BeerP1, SUM(wine_glasses_drunk) AS WineP2, SUM(whisky_shots_drunk) AS WhiskeyP2, SUM(beer_bottle_drunk) AS BeerP2
FROM foobar
WHERE data_entry_date BETWEEN @StartDate2 AND @EndDate2
) AS U 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T16:28:01.993

作为开发这些查询时的一般规则，将其构建起来，然后将它们组合起来。首先找到一个好的结构，然后分别构建你需要的所有部件，这样你就可以了解每个部件是如何独立工作的。

在这里，我认为您将需要使用更多的子查询来找到一种清晰的方法。我认为您可以尝试以下方法：

计算所需的日期范围，并将它们作为变量保存。（您可能希望在日期中添加天数以查找下一个期间，而不是您上面提供的代码。）

```
Declare @SQL1, @SQL2, @SQL3 as Date
Set @SQL1=(SQL1)
... 
```

接下来，以使用日期作为参数的方式查找每周的总数。

```
Select 
  sum(wine_glasses_drunk) as wine_totals, 
  sum(whiskey_shots_drunk) as whiskey_totals, 
  sum(beer_bottle_drunk) as beer_totals,
  case 
    when data_entry_date between @SQL1 and @SQL2 then 1
    when data_entry_date between @SQL2 and @SQL3 then 2
  end as period_number
from foobar 
```

然后，围绕此构建您需要的摘要查询，因为数据的格式很容易，并且您不需要多次使用相同值的这么多总和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:46:48.553

我打算将此作为编辑添加到我的另一个答案中，但这确实是一种不同的方式，因此应该是一个单独的答案。

我想我更喜欢我给出的另一个答案，但即使数据存在差距，这个答案也应该有效。

要设置查询的参数，请更改with 子句部分的`period_start_date`和`period_days`的值。`query_params`

```
with query_params as (
  select 
    date '2011-01-01' as period_start_date,
    7 as period_days
),
summary_data as (
select
  user_id,
  (data_entry_date - period_start_date)/period_days as period_number,
  sum(wine_glasses_drunk) as wine_glasses_drunk,
  sum(whisky_shots_drunk) as whisky_shots_drunk,
  sum(beer_bottle_drunk) as beer_bottle_drunk
from foobar
  cross join query_params
group by user_id,
  (data_entry_date - period_start_date)/period_days
)
select
  user_id,
  period_number,
  period_start_date + period_number * period_days as period_start_date,
  sum(wine_glasses_drunk) as wine_glasses_drunk,
  sum(whisky_shots_drunk) as whisky_shots_drunk,
  sum(beer_bottle_drunk) as beer_bottle_drunk
from (
  -- this weeks data
  select 
    user_id,
    period_number,
    wine_glasses_drunk,
    whisky_shots_drunk,
    beer_bottle_drunk
  from summary_data
  union all
  -- last weeks data
  select 
    user_id,
    period_number + 1 as period_number,
    -wine_glasses_drunk as wine_glasses_drunk,
    -whisky_shots_drunk as whisky_shots_drunk,
    -beer_bottle_drunk as beer_bottle_drunk
  from summary_data
) a
cross join query_params
where period_number <= (select max(period_number) from summary_data)
group by 
  user_id,
  period_number,
  period_start_date + period_number * period_days
order by 1, 2 
```

再一次，一个[SQL Fiddle](http://sqlfiddle.com/#!1/2aee7/54)是可用的。

# php - PHP OOP 多维数组搜索问题

> ID：10986232
> 
> 赞同：0
> 
> 时间：2012-06-11T19:20:57.390
> 
> 标签：php

我有一个功能

```
function GetArrKey( $findArr, $key_arr, $depth=0 )
{
  if( count($key_arr) <= $depth || !array_key_exists($key_arr[$depth], $findArr) )
    return NULL;
  else if( count($key_arr) == $depth+1 )
    return $findArr[$key_arr[$depth]];

  return self::GetArrKey( $findArr[$key_arr[$depth]], $key_arr, $depth+1 );
} 
```

这将搜索一个数组并返回与我需要的匹配的数组部分。

唯一的问题是它似乎返回了完全相同的值。例如，我在 foreach 循环中有这个函数

```
foreach($e as $k => $v) {
  $value = GetArrayKey(array,$k);
  print_r($value);
} 
```

它打印了 5 次完全相同的值（但我用来搜索的 $k 每次都不同）。

我假设这是因为 return self::GetArrKey 但我似乎无法修复它。

例子...

```
tweet-19486731414564564
Tweet 1
tweet-19486778435455556
Tweet 1
tweet-19703966855465458
Tweet 1
tweet-19842914654654650
Tweet 1 
```

但它应该做

```
tweet-19486731414564564
Tweet 1
tweet-19486778435455556
Tweet 2
tweet-19703966855465458
Tweet 3
tweet-19842914654654650
Tweet 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:36:09.690

我相信您的问题出在递归函数的最后一行：

```
return self::GetArrKey( $findArr[$key_arr[$depth]], $key_arr, $depth+1 ); 
```

这意味着将再次调用该函数，直到您遇到基本情况。基本情况将返回，并且此函数不会修改该情况。因此，对递归函数的所有调用都将仅返回基本情况的结果，在这种情况下这不是您想要的，因为您正在寻找响应而不是递归地执行某些函数。

# javascript - javascript 创建对象键

> ID：10986233
> 
> 赞同：2
> 
> 时间：2012-06-11T19:21:03.490
> 
> 标签：javascript

假设我有这个：

```
var ObjectKey = "06.2012"; 
```

这是一个代表月份的字符串。我想将此值用作新对象的键。我有

```
TheObject = {ObjectKey: null}; 
```

但是当我进入控制台时，TheObject 没有一个名为 06.2012 的键，而是一个名为 ObjectKey 的键。

如何创建具有我在运行时创建的字符串名称的键？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T19:23:17.617

要将变量用作键，您需要使用`[]`语法..

```
var ObjectKey = "06.2012";
TheObject = {};
TheObject[ObjectKey] = null; 
```

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-06-11T19:23:56.810

又快又脏：

```
eval('TheObject = {'+ObjectKey+':null};'); 
```

但它真的很脏并且容易出错（非常容易出错......）

# list - 为什么以这种方式从列表中删除项目是不可能的？

> ID：10986236
> 
> 赞同：0
> 
> 时间：2012-06-11T19:21:40.793
> 
> 标签：list, c#-4.0

我有一个问题，当我尝试通过以下方式从任何列表中删除项目时，我无法做到这一点......为什么会这样，所以错误是**“使用未分配的局部变量”**，它在哪里被分配，如下所示：

```
 public void RemoveFrmList(int ProdId)
        {
            int _index;
            foreach (Products item in BoughtItems)
            {
                if (item.ProductID == ProdId)
                {
                   _index = BoughtItems.IndexOf(item);
                }

            }
            BoughtItems.RemoveAt(_index);
        } 
```

可以做些什么来消除这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:25:59.150

if 语句中的代码不一定会出现。将 _index 初始化为 -1 或一些“未找到”指示值，错误应该会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:26:59.080

是什么`BoughtItems`？如果`List<T>`只是使用[RemoveAll](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)

```
public void RemoveFrmList(int ProdId)
{
    BoughtItems.RemoveAll( item => item.ProductID == ProdId );
} 
```

有点题外话，但为什么 RemoveFrmLis 缺少 o？它只会损害可读性。使用完整的单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:23:49.383

`_index`在您进入循环之前未分配。但是如果`BoughtItems`没有`Product`项目，您将有一个未分配的变量`_index`。或者也许你永远不会得到一个带有`item.ProductID == ProdID`.

换句话说：

```
int _index;
foreach (Products item in BoughtItems)
{
   //Code here is not executed during runtime for reasons stated above.
}
BoughtItems.RemoveAt(_index); //error here because _index was not assigned! 
```

要修复它，您可以执行类似的操作

```
int _index = -1;
foreach (...)
{
   //...
}
if (_index != -1){
   BoughtItems.RemoveAt(_index);
}
else
{
  //handle case if needed
} 
```

# php - 标头 nocache 未按预期工作

> ID：10986241
> 
> 赞同：0
> 
> 时间：2012-06-11T19:22:26.577
> 
> 标签：php, header, browser-cache

我的站点脚本上的标题包括以下内容：

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

这些行在任何输出/空白之前被调用。

这是我的实时标题查看器中显示的内容：

```
POST /includes/whosonline.php HTTP/1.1
Host: mysite.org
User-Agent: Linux/Firefox 11
Accept: text/javascript, text/html, application/xml, text/xml, */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
X-Requested-With: XMLHttpRequest
X-Prototype-Version: 1.6.0.2
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: https://mysite.org?id=123
Content-Length: 0
Cookie: [cookie stuff removed]
Pragma: no-cache
Cache-Control: no-cache 
```

请注意，脚本的标头指定浏览器不缓存页面。到期日期早于当前日期。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:27:59.037

我刚刚在这里用 firefox 和 chrome 进行了测试（以防万一），它似乎正在工作！

*   操作系统：Mac OS X Lion
*   服务器：Nginx 1.2
*   PHP: 5.3

[http://cl.ly/041H1h1s1Q1P433W1m3Q](http://cl.ly/041H1h1s1Q1P433W1m3Q)

[http://cl.ly/0o2B2I1a2N1I0N101E2w](http://cl.ly/0o2B2I1a2N1I0N101E2w)

我的猜测：也许您的 http 服务器或 php 版本存在某种错误。所以也许，您应该尝试更新两者或使用另一个 http 服务器进行测试。

# java - 使用 Gradle 构建 uberjar

> ID：10986244
> 
> 赞同：42
> 
> 时间：2012-06-11T19:22:38.057
> 
> 标签：java, groovy, gradle, uberjar

我想构建一个包含项目所有传递依赖项的 uberjar（AKA fatjar）。我需要添加哪些行`build.gradle`？

这是我目前拥有的：

```
task uberjar(type: Jar) {
    from files(sourceSets.main.output.classesDir)

    manifest {
        attributes 'Implementation-Title': 'Foobar',
                'Implementation-Version': version,
                'Built-By': System.getProperty('user.name'),
                'Built-Date': new Date(),
                'Built-JDK': System.getProperty('java.version'),
                'Main-Class': mainClassName
    }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-11T20:05:21.000

我将其替换`task uberjar(..`为以下内容：

```
jar {
    from(configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }) {
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
    }

    manifest {
        attributes 'Implementation-Title': 'Foobar',
                'Implementation-Version': version,
                'Built-By': System.getProperty('user.name'),
                'Built-Date': new Date(),
                'Built-JDK': System.getProperty('java.version'),
                'Main-Class': mainClassName
    }
} 
```

需要排除项，因为在他们缺席的情况下，您将遇到[此](http://forums.gradle.org/gradle/topics/signing_a_custom_gradle_plugin_thats_downloaded_by_the_build_system_from_github)问题。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-11T19:29:46.717

~~您是否尝试过[gradle 食谱](http://docs.codehaus.org/display/GRADLE/Cookbook#Cookbook-Creatingafatjar)中的 fatjar 示例？~~

你要找的是gradle[的影子插件](https://github.com/johnrengelman/shadow)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-26T04:45:02.063

只需将其添加到您的 java 模块的 build.gradle 中。

mainClassName = "my.main.Class"

```
jar {
  manifest { 
    attributes "Main-Class": "$mainClassName"
  }  

  from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
  }
} 
```

这将产生 [module_name]/build/libs/[module_name].jar 文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-24T16:34:19.123

我发现这个[项目](https://github.com/bond-/gradle-groovy-jar-example/blob/master/build.gradle)非常有用。使用它作为参考，我的 Gradle uberjar 任务将是

```
task uberjar(type: Jar, dependsOn: [':compileJava', ':processResources']) {
    from files(sourceSets.main.output.classesDir)
    from configurations.runtime.asFileTree.files.collect { zipTree(it) }

    manifest {
        attributes 'Main-Class': 'SomeClass'
    }
} 
```

# javascript - 使用 pusher/javascript 检索数据时禁止 403

> ID：10986249
> 
> 赞同：0
> 
> 时间：2012-06-11T19:23:00.120
> 
> 标签：javascript, http, pusher

我正在使用推送器从频道中检索数据/通知。我应该收到的数据是：

1.  用户名
2.  实际数据
3.  一条链接

我在我的萤火虫控制台中不断收到 403 禁止链接，并且它没有显示在 UI 上。

该链接有一个尾部斜杠。我使用以下功能将其删除，然后通过推送器发送。

```
$user_photo = rtrim($this->twitter_model->getImage($u) , '/'); 
```

403 禁止仍然存在。我可以在我的萤火虫控制台中看到链接，这意味着该功能正常工作。

知道我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:38:13.127

```
<?php
function removeTrailingSlash($str){
    $str = str_split($str);
    $len = count($str)-1;
    if($str[$len] == '/'){
        unset($str[$len]);
    }
    return implode($str);
}
?>

$user_photo = removeTrailingSlash($this->twitter_model->getImage($u)); 
```

用上面替换这个

```
$user_photo = removeTrailingSlash(rtrim($this->twitter_model->getImage($u) , '/')); 
```

使用你不应该在完整文件路径 URL 的末尾添加尾随 / EG 以 .png 结尾的唯一一次你可以这样做是使用 .php/ 并且那是因为服务器已被告知允许它

转到此 [http://a0.twimg.com/profile_images/2128173759/eightbit-6d22f234-4bc0-45ec-bb91-f82c1017c298_normal.png/](http://a0.twimg.com/profile_images/2128173759/eightbit-6d22f234-4bc0-45ec-bb91-f82c1017c298_normal.png/)

然后去这个 [http://a0.twimg.com/profile_images/2128173759/eightbit-6d22f234-4bc0-45ec-bb91-f82c1017c298_normal.png](http://a0.twimg.com/profile_images/2128173759/eightbit-6d22f234-4bc0-45ec-bb91-f82c1017c298_normal.png)

见后面的作品尾斜线错误:)

将函数添加到文件顶部，然后让它使用新代码

# java - 简单的 Java 回显服务器问题

> ID：10986251
> 
> 赞同：4
> 
> 时间：2012-06-11T19:23:14.793
> 
> 标签：java, sockets, client, echo

我正在尝试编写我的第一个套接字服务器，所以我决定从一些非常简单的东西开始，只是为了弄清楚流程:) 我正在编写一个简单的 java echo 服务器，但问题是（出于某种原因？！ ）我没有在客户端收到服务器响应，尽管请求是在服务器中收到的。

```
package poc.client;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public class Client {
    public static void main(String[] args) {
        try {
            final Socket socket = new Socket((String) null, 50000);

            final BufferedReader reader = new BufferedReader(
                    new InputStreamReader(socket.getInputStream()));
            final PrintWriter writer = new PrintWriter(
                    socket.getOutputStream(), true);
            writer.println("ala bala\r\n");
            writer.flush();
            writer.close();

            System.out.println(reader.readLine());
            System.out.flush();
        } catch (Exception ex) {
                Logger.getAnonymouseLogger().throwing(TAG, "main", ex);
        }

    }
} 
```

服务器部分是

```
package poc.server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {

    /**
     * debugging purposes only
     */
    @SuppressWarnings("unused")
    private static final String TAG = Server.class.getSimpleName();

    public static void main(String[] args) {
        try {
            final ServerSocket socket = new ServerSocket(50000);
            while (true) {
                final Socket clientSocket = socket.accept();
                final BufferedReader reader = new BufferedReader(
                        new InputStreamReader(clientSocket.getInputStream()));
                final PrintWriter writer = new PrintWriter(clientSocket
                        .getOutputStream(), true);

                writer.println(reader.readLine());
                writer.flush();
                writer.close();
            }
        } catch (IOException e) {
                Logger.getAnonymouseLogger().throwins(TAG, "main",ex);
        }

    }
} 
```

我阅读了所有 Oracle 基本套接字教程/等，但我不知道出了什么问题 - 我已成功写入服务器套接字，但我似乎无法获得响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:37:08.573

在从套接字读取之前不要关闭写入器。以下代码有效

```
final Socket socket = new Socket((String) null, 50000);

            final BufferedReader reader = new BufferedReader(
                    new InputStreamReader(socket.getInputStream()));
            final PrintWriter writer = new PrintWriter(
                    socket.getOutputStream(), true);
            writer.println("ala bala\r\n");

            System.out.println(reader.readLine());            
            //writer.flush();
            writer.close(); 
```

根据 close() 方法的javadoc：

> 关闭流并释放与其关联的任何系统资源。关闭以前关闭的流没有效果。

看起来如果您关闭流，底层套接字也会关闭。您可以通过在当前代码中打印堆栈跟踪来验证这一点。它给出了`java.net.SocketException: socket closed`错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:38:18.750

试试这个：

```
Socket socket = new Socket(InetAddress.getLocalHost(), 50000); 
```

另请注意，没有必要，`writer.flush();`因为您在传递`true`给`PrintWriter`构造函数的第二个参数时将其设为自动刷新流。

# icefaces - 将参数传递给 的 clickListener 属性

> ID：10986260
> 
> 赞同：0
> 
> 时间：2012-06-11T19:23:53.623
> 
> 标签：icefaces, clicklistener

我正在尝试使用 IceFaces（+ Jboss AS7 上的 Seam 3 框架）“ice:rowSelector”标签，当点击数据表的行时，该行中的数据将显示在“ice:panelGrid”标签中带有“ice：outputLabel”。

我将 clickListener 设置为一些示例，如下所示：

```
<ice:rowSelector immediate="true" clickListener="#{categoryController.selectionListener}"/> 
```

方法是：

```
public void selectionListener(ClickActionEvent clickActionEvent) {

    selectedCategory= categories.get(clickActionEvent.getRow());
} 
```

成为“类别”

```
List<Category> categories 
```

但是当我测试应用程序时，我得到一个 javax.el.MethodNotFoundException 异常。然后我将“()”添加到方法调用中（clickListener="#{categoryController.selectionListener()}"），得到相同的异常。

最后，我设置了 clickListener="#{categoryController.selectionListener(clickActionEvent)}" 并且该方法被称为但是“clickActionEvent”使它抛出 NullPointException。相关部分是：

```
 Caused by: javax.el.ELException: /showCategory.xhtml @20,114 clickListener="#{categoryController.selectionListener(clickActionEvent)}": java.lang.NullPointerException
        at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:111) [jsf-impl-2.1.7-jbossorg-2.jar:]
        at com.icesoft.faces.component.facelets.MethodExpressionMethodBinding.invoke(IceComponentHandler.java:231) [icefaces-compat-3.0.1.jar:]
        at com.icesoft.faces.component.ext.RowSelector.broadcast(RowSelector.java:530) [icefaces-compat-3.0.1.jar:]
        at org.icefaces.impl.component.UISeriesBase.broadcast(UISeriesBase.java:481) [icefaces-3.0.1.jar:]
        at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
        at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:935) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
        at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78) [jsf-impl-2.1.7-jbossorg-2.jar:]
        ... 29 more
Caused by: java.lang.NullPointerException 
```

我的问题是：我应该将什么作为 ClickActionEvent 参数传递给“selectionListener”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:58:46.333

> 我应该将什么作为 ClickActionEvent 参数传递给“selectionListener”方法？

传递[RowSelectorEvent](http://res.icesoft.org/docs/v1_8_2/javadocs/components/api/com/icesoft/faces/component/ext/RowSelectorEvent.html)。

# hibernate - GWT 2.3 WeakMapping/ProxyAutoBean 内存泄漏

> ID：10986262
> 
> 赞同：0
> 
> 时间：2012-06-11T19:23:58.217
> 
> 标签：hibernate, gwt, memory, memory-leaks, requestfactory

我在我们的 Tomcat 测试服务器上遇到了一些令人讨厌的 OutOfMemory 异常。我们的 Web 应用程序在客户端使用 GWT 2.3 和 GXT，在服务器端使用 Spring 3.0，Hibernate 3.6.3 和 JPA。

我用 VisualVM 做了一些堆转储，然后用 Memory Analizer Tool 打开它们，看看是什么占用了这么多空间。今天，堆占用了 900-950MB 的 1GB 可用空间，并且在 org.apache.catalina.WebAppClassLoader (680MB) 中积累了最多的内存，其中包含 com.google.gwt.core.client.impl.WeakMapping 的巨大 671 MB 条目(671MB)。我看到有很多 ProxyAutobean 类型的对象以及很多 Hibernate 实体。

我在网上搜索并找到[了一些](http://code.google.com/p/google-web-toolkit/issues/detail?id=6193) 适用于我的案例的内容，但我不确定是否/如何以这种方式解决它而无需升级到更高版本的 GWT。看起来，这种泄漏是由我们在代码中使用的实体/代理之间的循环引用引起的。

请问有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:47:39.747

您可以尝试“修补”您的依赖项（或*猴子修补*：在类路径的早期添加修补类），但升级更容易。

Request Factory 有一个稳定的协议，所以你可以很好地在客户端使用 GWT 2.3 和在服务器端使用 Request Factory 2.4；然后，您将只在客户端的 DevMode 中试验泄漏，而不是在服务器端的生产环境中试验。

# php - PHP SOAP Header 与 HTTP SOAP Action 不匹配，如何设置？

> ID：10986264
> 
> 赞同：2
> 
> 时间：2012-06-11T19:24:01.510
> 
> 标签：php, soap, soap-client, soapheader

我什么都试过了！我正在使用这个[WSDL](http://test.psdataservices.com/PSShipCarrierAPI/PSShipCarrier.svc?WSDL)，只是想进行身份验证。我不断收到此错误：

> 消息上指定的 SOAP 操作“”与 HTTP SOAP 操作“http://tempuri.org/IPSShipCarrier/Authenticate”不匹配

这是我的代码：

```
 $options = array(
        "soap_version" => SOAP_1_2,
        "trace"=>1,
        'UserName'=>'blahremoved',
        'Password'=>'blahremoved',
        'AuthToken'=>'blahremoved',
        'SOAPAction'=>'http://tempuri.org/IPSShipCarrier/Authenticate',
        'Action'=>'http://tempuri.org/IPSShipCarrier/Authenticate',
        'uri'=>'http://tempuri.org/IPSShipCarrier/Authenticate',
        'exceptions'=>true );

    $client = new SoapClient( "http://test.psdataservices.com/PSShipCarrierAPI/PSShipCarrier.svc?WSDL", $options );

    $auth = array(
        'UserName'=>'blahremoved',
        'Password'=>'blahremoved',
        'AuthToken'=>'blahremoved',
        'SOAPAction'=>'http://tempuri.org/IPSShipCarrier/Authenticate',
        'Action'=>"Authenticate"
    );
    $header = new SoapHeader('http://tempuri.org/IPSShipCarrier/Authenticate','Authenticate',$auth,false);

    $client->__setSoapHeaders($header);

    $params = new StdClass;
    $params->Action = "http://tempuri.org/IPSShipCarrier/Authenticate";
    $params->SOAPAction = "http://tempuri.org/IPSShipCarrier/Authenticate";
    $params->UserName = "blahremoved";
    $params->Password = "blahremoved";
    $params->AuthToken = "blahremoved";
$client->Authenticate($params); 
```

让我知道你的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:07:16.217

当试图访问一个未知的网络服务时，你应该从soapUi 开始。[http://www.soapui.org/](http://www.soapui.org/)那会在 2 分钟内告诉你，

> 这是一个 SOAP 1.1 服务
> 
> 这是 Authenticate 端口的最少内容：

```
<tem:Authenticate>
     <!--Optional:-->
     <!--type: string-->
     <tem:ClientName>aat</tem:ClientName>
     <!--Optional:-->
     <!--type: string-->
     <tem:UserName>soa</tem:UserName>
     <!--Optional:-->
     <!--type: string-->
     <tem:Password>quaaao</tem:Password>
     <!--Optional:-->
     <!--type: string-->
     <tem:AuthToken>verraauras</tem:AuthToken>
     <!--Optional:-->
     <!--type: scShipCarrier - enumeration: [scUnknown,scStampsCom,scUPS,scEndicia,scFedEx]-->
     <tem:ShipCarr>scUnknown</tem:ShipCarr>
  </tem:Authenticate> 
```

> 他们的messagerouter必须单独基于soap-action，所以使用Action是没有意义和不必要的

所以是的，使用soapUi 会节省你的时间；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:08:06.473

更改 SOAP 版本肯定会让您更进一步。但是，从查看堆栈跟踪来看，Authenticate 方法似乎需要您未设置的参数。这是您需要的最少代码，但不知道 shipCarr 对象应该是什么样子：

```
$options = array(
    "soap_version" => SOAP_1_1,
    "trace"=>1,
    'exceptions'=>true,
);

$client = new SoapClient( "http://test.psdataservices.com/PSShipCarrierAPI/PSShipCarrier.svc?WSDL", $options );

$params = new StdClass();
$params->UserName = "blahremoved";
$params->Password = "blahremoved";
$params->AuthToken = "blahremoved";
$params->ShipCarr = array();
$params->ClientName = "blahremoved";
$response = $client->Authenticate($params);
var_dump($response); 
```

这是回应：

```
[a:DeserializationFailed] The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter http://tempuri.org/:ShipCarr. The InnerException message was 'Invalid enum value 'Array' cannot be deserialized into type 'ShipCarriers.Contract.scShipCarrier'. Ensure that the necessary enum values are present and are marked with EnumMemberAttribute attribute if the type has DataContractAttribute attribute.'.  Please see InnerException for more details. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:53:19.400

为了修复 Content-Type 标头问题，我将 soap_version 切换为 SOAP_1_1

```
"soap_version" => SOAP_1_1, 
```

然后我收到一条更有趣的错误消息，Christian Burger 用它让我们更进一步，包括 ShipCarr 参数。

在此基础上，我查看了 XSD，这是一个更新的 $params 值：

```
$params->ShipCarr = 'scUnknown'; 
```

这返回：

```
POST /PSShipCarrierAPI/PSShipCarrier.svc HTTP/1.1
Host: test.psdataservices.com
Connection: Keep-Alive
User-Agent: PHP-SOAP/5.3.8
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/IPSShipCarrier/Authenticate"
Content-Length: 856

<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tempuri.org/" xmlns:ns2="http://tempuri.org/IPSShipCarrier/Authenticate"><SOAP-ENV:Header><ns2:Authenticate><item><key>UserName</key><value>blahremoved</value></item><item><key>Password</key><value>blahremoved</value></item><item><key>AuthToken</key><value>blahremoved</value></item><item><key>SOAPAction</key><value>http://tempuri.org/IPSShipCarrier/Authenticate</value></item><item><key>Action</key><value>Authenticate</value></item></ns2:Authenticate></SOAP-ENV:Header><SOAP-ENV:Body><ns1:Authenticate><ns1:UserName>blahremoved</ns1:UserName><ns1:Password>blahremoved</ns1:Password><ns1:AuthToken>blahremoved</ns1:AuthToken><ns1:ShipCarr>scUnknown</ns1:ShipCarr></ns1:Authenticate></SOAP-ENV:Body></SOAP-ENV:Envelope>
HTTP/1.1 200 OK
Content-Length: 325
Content-Type: text/xml; charset=utf-8
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Mon, 25 Jun 2012 20:34:42 GMT
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><AuthenticateResponse xmlns="http://tempuri.org/"><AuthenticateResult i:nil="true" xmlns:a="http://schemas.datacontract.org/2004/07/ShipCarriers.Contract" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"/></AuthenticateResponse></s:Body></s:Envelope> 
```

但是，发出后续请求会给我一个 500 内部服务器错误。

# ios - UIWebView 不断尝试加载但没有结果

> ID：10986265
> 
> 赞同：2
> 
> 时间：2012-06-11T19:24:03.200
> 
> 标签：ios

我正在尝试使用 UIWebView 连接到 wikiTravel 页面。这是我的代码：

```
NSURL *url = [NSURL URLWithString:@"http://wikitravel.org/en/Beijing"];

NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

[wikiWebView loadRequest:requestObj]; 
```

如果我将北京更改为康沃尔，它会很好地显示所有信息。如果我将北京更改为蒙特利尔，它只会加载 wikitravel 徽标和两个按钮，但确实会调用`webViewDidFinishLoad`. 但是对于北京，它只是加载和加载并且不显示任何内容。

每当调用 UIWebView 方法时，我都会打印到控制台，这是输出：

```
2012-06-11 15:11:50.904 ExtraFeatures3[893:307] WEB VIEW DID START LOAD.
2012-06-11 15:11:57.607 ExtraFeatures3[893:307] WEB VIEW FAILED TO LOAD: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn’t be completed. (NSURLErrorDomain error -999.)" UserInfo=0x19be10 {NSErrorFailingURLKey=http://wikitravel.org/en/Beijing, NSErrorFailingURLStringKey=http://wikitravel.org/en/Beijing}
2012-06-11 15:11:57.619 ExtraFeatures3[893:307] WEB VIEW DID START LOAD.
2012-06-11 15:11:59.523 ExtraFeatures3[893:307] WEB VIEW FAILED TO LOAD: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn’t be completed. (NSURLErrorDomain error -999.)" UserInfo=0x1a3190 {NSErrorFailingURLKey=http://wikitravel.org/en/Beijing, NSErrorFailingURLStringKey=http://wikitravel.org/en/Beijing}
2012-06-11 15:11:59.534 ExtraFeatures3[893:307] WEB VIEW DID START LOAD.
2012-06-11 15:12:00.875 ExtraFeatures3[893:307] WEB VIEW FAILED TO LOAD: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn’t be completed. (NSURLErrorDomain error -999.)" UserInfo=0x1a6e00 {NSErrorFailingURLKey=http://wikitravel.org/en/Beijing, NSErrorFailingURLStringKey=http://wikitravel.org/en/Beijing} 
```

而且它只是继续前进和前进……我不知道该怎么办。

**编辑**：我所有的搜索都让我找到了以下解决方法，我已经尝试过但没有开始工作：

```
-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    if([error code] == NSURLErrorCancelled)
    {
        return;
    } 
```

}

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:40:34.303

根据这个网站：[https ://discussions.apple.com/thread/1727260?start=0&tstart=0](https://discussions.apple.com/thread/1727260?start=0&tstart=0)

这是解决方法：

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
 NSLog(@"Error %i", error.code);
 if (error.code == NSURLErrorCancelled) return; // this is Error -999
 // error handling for "real" errors here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T06:22:50.073

而不是尝试你的网址，首先尝试

`NSURL *url = [NSURL URLWithString:@"http://www.google.com"];`

你能加载吗？

# biztalk - Biztalk 2010 odx.cs 文件

> ID：10986267
> 
> 赞同：3
> 
> 时间：2012-06-11T19:24:19.853
> 
> 标签：biztalk, biztalk-2010, biztalk-2009

是否有为 Biztalk 2010 编排生成的 .cs 文件，如果有，它们位于何处？在 Biz 09 中，它们是 File0.cs，但我无法找到与我的 Biz 2010 项目的编排相对应的任何 odx.cs 或 .cs 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:04:31.263

我刚刚检查了一些旧的 BTS 2009 项目，并且在与源 .odx 相同的目录中也没有任何 .cs 文件。Maps ( `.btm.cs`)、Schemas ( `.xsd.cs`)、Pipelines ( `.btp.cs`) 确实在源文件夹中生成了 .cs 文件。

但是，在 BTS 2009 和 2010 中，文件都放在`obj\Debug\BizTalk\XLang`文件夹中，但被重命名`File0.cs, File1.cs`等。参考[这里](http://www.businessprocessintegration.net/2009/09/how-to-debug-an-orchestration-in-biztalk-server-2009/)

出于兴趣，您为什么要查看 .odx.cs 文件？

# html - HTML 与纯文本作为电子邮件中的正文

> ID：10986268
> 
> 赞同：23
> 
> 时间：2012-06-11T19:24:26.687
> 
> 标签：html, swiftmailer, plaintext

创建电子邮件时[`Swift_Message`](http://swiftmailer.org/docs/messages.html)，您可以同时拥有纯文本和 html 版本的电子邮件。您将一个设置为主体，然后将另一个添加为零件。

如果我将 HTML 版本设置为正文，将纯文本设置为部分，反之亦然，有什么区别？

```
$html_as_body = Swift_Message::newInstance()
    ->setSubject($subject)
    ->setBody($html, 'text/html')
    ->addPart($plain, 'text/plain');

$plain_as_body = Swift_Message::newInstance()
    ->setSubject($subject)
    ->setBody($plain, 'text/plain')
    ->addPart($html, 'text/html'); 
```

通过差异，我的意思是它在电子邮件阅读器等方面会有什么样的差异？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T11:05:44.337

应该没有区别，只要 Swift_Message 遵循邮件撰写的官方 RFC，它 (AFAIK) 严格设置纯文本消息应该是默认的（首先是正文），最后是 HTML 版本。

进行一些测试，即在两种配置中发送相同的电子邮件，并在接收客户端中查看您的消息来源。

如果您发现任何差异，那么在恕我直言，您绝对应该发送纯文本正文（第一个）和 HTML 版本最后。即使现在有许多简单的邮件客户端，它们也会简单地忽略/不能正确识别 HTML 版本。因此，如果您将其放在首位，则接收者可能无法阅读整个消息。

# c# - 填充列表 和带有 SqlDataReader 内容的 DataGridView

> ID：10986271
> 
> 赞同：0
> 
> 时间：2012-06-11T19:24:33.273
> 
> 标签：c#, list, object, datagridview, sqldatareader

我正在尝试编写一个可以采用三个参数的函数：SqlDataReader、DataGridView 和 List。

我想获取 SqlDataReader 的内容并创建一个对象列表，然后将其绑定到 DataGridView。

借助另一个 Stack Overflow 用户的一些建议，我得出以下结论：

```
public void FillArrayList<T>(DataGridView grid, SqlDataReader reader, List<T> list)
{
    //Fill the list with the contents of the reader
    while (reader.Read())
    {
        Object obj = new Object();
        Type type = typeof(T);

        FieldInfo[] fields = type.GetFields(); // Get the fields of the assembly
        int i = 0;

        foreach(var field in fields)
        {
            field.SetValue(obj, reader[i]); // set the fields of T to the reader's value
            i++;
        }

        list.Add((T)obj);
    }

    grid.DataSource = list;
} 
```

当我运行代码时，将对象转换为类型 T 时出现错误：

> 无法将“System.Object”类型的对象转换为“TestHarness.Organisation”类型。

我的印象是 Object 可以存储任何东西。谁能告诉我为什么这个演员不能表演？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:30:24.610

您几乎可以将任何东西投射到 Object 上，但不能将 Object 投射到任何东西上。看看 MSDN 上的[System.Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)类。注意那里几乎什么都没有。演员表没有意义，因为它在功能上与调用新的 TestHarness.Organization 相同。

如果您确切地知道要在 DataReader 中寻找什么以进入 TestHarness.Organization 或其他任何内容，则可以尝试[用户定义的转换](http://msdn.microsoft.com/en-us/library/aa288476%28v=vs.71%29.aspx)。这将允许您隐式或显式调用一些代码来为您进行类型更改，而无需任何额外的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:57:32.520

在 MMK 发布的链接的帮助下，在我的问题下方的评论中，我设计了一个解决方案：

```
public void FillList<T>(DataGridView grid, string SQLCommand, List<T> list) where T : class, new()
    {
        //Load the data into the SqlDataReader
        SqlCommand dataCommand = new SqlCommand();
        dataCommand.Connection = dataConnection;
        dataCommand.CommandType = CommandType.Text;
        dataCommand.CommandText = SQLCommand;

        SqlDataReader dataReader = dataCommand.ExecuteReader();

        //Fill the list with the contents of the reader
        while (dataReader.Read())
        {
            var obj = new T();

            //Get the property information
            PropertyInfo[] properties = typeof(T).GetProperties();
            int i = 0;

            foreach(var property in properties)
            {
                property.SetValue((T)obj, dataReader[i], null); // set the fields of T to the reader's value
                i++;
            }

            list.Add(obj);
        }

        dataReader.Close();

        //Bind the list to the DataGridView
        grid.DataSource = list;
    } 
```

似乎正是我需要的。当我在越来越多的情况下使用它时，我可能会遇到一些明显的错误，但是，这就是生活。

谢谢你们的帮助，伙计们！

# c# - Lambda 最大值和最大值和最大值

> ID：10986272
> 
> 赞同：3
> 
> 时间：2012-06-11T19:24:46.213
> 
> 标签：c#, lambda

快速且可能很简单的 Lambda 问题：

我有一家有评论的餐厅。我想查询一个：

*   最大（平均评分）
*   和 Max(ReviewCount)
*   和最大（NewestReviewDate）
*   和最小（距离）

像这样的东西：

```
var _Result = AllRestaurants
    .Max(x => x.AverageRating)
    .AndMax(x => x.ReviewCount)
    .AndMax(x => x.NewestReviewDate)
    .AndMin(x => x.DistanceAway); 
```

现在，我知道那是伪代码。但它完美地描述了它！

当然，在多个语句中，这很简单。

只是想知道这是否可能在一个语句中而不会降低可读性。

先感谢您。我知道你们中的一些人喜欢查询问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:30:37.317

你不能有多个最大值或最小值，这是没有意义的。您将需要某种启发式方法，例如：

```
 .Max(x => x.AverageRating * x.ReviewCount - x.DaysSinceLastReview - x.DistanceAway) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T19:38:17.960

也许这会做？

```
var bestRestaurant = AllRestaurants
    .OrderByDescending(r => r.AverageRating)
    .ThenByDescending(r => r.ReviewCount)
    .ThenByDescending(r => r.NewestReviewCount)
    .ThenBy(r => r.DistanceAway)
    .FirstOrDefault(); 
```

您需要更改语句的顺序以反映哪个是最重要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:42:54.590

有一些加权启发式的替代方法是按 AverageRating 排序，然后是 ReviewCount，然后...

像这样的东西应该工作：

```
var _Result = AllRestaurants
    .OrderByDescending(x => x.AverageRating)
    .ThenByDescending(x => x.ReviewCount)
    .ThenByDescending(x => x.NewestReviewDate)
    .ThenByDescending(x => x.DistanceAway);
    // using *Descending so you get the higer-valued ones first 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:39:02.907

如果我理解你的问题，我认为最好的方法是写你提到的个人陈述......

```
var HighestRating = AllRestaurants.Max(x => x.AverageRating);
var HighestReviewCount = AllRestaurants.Max(x => x.ReviewCount);
var LatestReviewDate = AllRestaurants.Max(x => x.NewestReviewDate);
var ShortestDistanceAway = AllRestaurants.Min(x => x.DistanceAway); 
```

从单个 Linq 查询中检索各种最大值和最小值会变得非常混乱，我也不确定效率是否有任何优势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T19:40:38.240

考虑这样的事情......

```
List<RestaurantRecord> _Restaurants;

public RestaurantRecord Best()
{
    return _Restaurants.Where(
               x =>
                   x.AverageRating >= _BestRating &&
                   x.ReviewCount >= _MinReviews &&
                   x.Distance <= _MaxDistance)
                       .GetFirstOrDefault();
} 
```

话虽如此，在这种情况下使用 lambda 将在未来产生可维护性后果。重构它是一个好主意，这样如果将来出现其他标准（例如：智能手机访问？美食类型？），您的应用程序可以更容易地修改以适应这些标准。

关于这一点，一个稍微好一点的实现可能是这样的：

```
public RestaurantRecord Best()
{
    IQueryable temp = _Restaurants.Clone();

    temp = temp.Where( x => x.AverageRating >= _BestRating );
    temp = temp.Where( x => x.ReviewCount >= _MinReviews );
    // ...snip...

    return temp.GetFirstOrDefault();
} 
```

我希望这能让你走上正确的道路。:)

# regex - 从 url 列表中检索唯一的网站

> ID：10986276
> 
> 赞同：1
> 
> 时间：2012-06-11T19:25:11.463
> 
> 标签：regex

我有一个包含很多页面网址的列表。我想检索唯一的网站。

```
"http://www.gadgetgiants.com/products/mica-8-inch-touchscreen-android-2-3-tablet-wifi-1-2ghz-cpu-flash10-3"
"http://www.malma.mx/products/pan-digital"
"http://www.gadgetgiants.com/products/snowpad-7-capacitive-multi-touch-screen-android-2-3-tabletwifi-samsung-cortex-a8-1-2ghz-cpu-camera-1080p-external-3g"
"http://www.spiritualityandwellness.com/products/internalized-motivation"
"http://www.spiritualityandwellness.com/products/evergreen-motivation" 
```

将导致：

```
www.gadgetgiants.com
www.malma.mx
www.spiritualityandwellness.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:39:18.723

`egrep -o "www\.[a-zA-Z0-9.-]*\.[a-zA-Z]{2,4}" YOUR_FILE_NAME | sort -u`

从[这里得到正则表达式](http://www.linuxquestions.org/questions/programming-9/grep-urls-717725/)

（编辑）**示例用法和输出**

```
$ cat ur.txt
"http://www.gadgetgiants.com/products/mica-8-inch-touchscreen-android-2-3"
"http://www.malma.mx/products/pan-digital"
"http://www.gadgetgiants.com/products/snowpad-7-capacitive-multi-touch"
"http://www.spiritualityandwellness.com/products/internalized-motivation"
"http://www.spiritualityandwellness.com/products/evergreen-motivation"
"http://www.swellness.com.au/products/evergreen-motivation"

$ egrep -o "www\.[a-zA-Z0-9.-]*\.[a-zA-Z]{2,4}" ur.txt | sort -u
www.gadgetgiants.com
www.malma.mx
www.spiritualityandwellness.com
www.swellness.com.au 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:44:14.773

没有正则表达式的想法：

从每个地址检索主机：

```
Uri uri = new Uri (yourLink);
string host = uri.Host; 
```

现在您可以将所有这些主机放入 HashSet 或其他东西中。

# google-apps-script - 使“onEdit”仅在电子表格中的一张工作表上工作

> ID：10986277
> 
> 赞同：0
> 
> 时间：2012-06-11T19:25:11.600
> 
> 标签：google-apps-script, google-sheets, triggers

我有一个 Google 表格的“onEdit”脚本，但只希望它在一张纸上工作：

```
 function onEdit(event)
{
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = SpreadsheetApp.getActiveSheet();
  var CellRow = SpreadsheetApp.getActiveRange().getRow();
  var CellColumn = SpreadsheetApp.getActiveRange().getColumn();

  if (CellColumn == 2 && CellRow == 3){
    sheet.getRange(CellRow, CellColumn).setFormula( "=ArrayFormula(QUERY(ImportRange(\"0AmH7M5970cwZdHFRa3NITkdBSFhxd3JzYUZwbFRId3c\";\"Table!B2:J200\");\"select Col1 where Col1 = \'\"&$K$13&\"\' limit 1\"))");
    Browser.msgBox("DON'T MESS WITH THE FORMULAS!");
  }
  } 
```

如何更改脚本以使其仅适用于工作表中的一张表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T18:18:56.290

```
function onEdit(event){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = SpreadsheetApp.getActiveSheet();
  var CellRow = SpreadsheetApp.getActiveRange().getRow();
  var CellColumn = SpreadsheetApp.getActiveRange().getColumn();

  if (sheet.GetSheetName() == "MYSHEETNAME"){
    if (CellColumn == 2 && CellRow == 3){
    sheet.getRange(CellRow, CellColumn).setFormula( "=ArrayFormula(QUERY(ImportRange(\"0AmH7M5970cwZdHFRa3NITkdBSFhxd3JzYUZwbFRId3c\";\"Table!B2:J200\");\"select Col1 where Col1 = \'\"&$K$13&\"\' limit 1\"))");
    Browser.msgBox("DON'T MESS WITH THE FORMULAS!");
    }
  }
} 
```

更改`MYSHEETNAME`为您希望 onedit 工作的工作表的名称。

# android - android listview的动态数据源

> ID：10986279
> 
> 赞同：1
> 
> 时间：2012-06-11T19:25:22.530
> 
> 标签：android, listview, dynamic, datasource

每次加载 listview 活动时，我都会查询数据库并获取代表模型属性的名称值对集合的集合。然后我希望解析其中一个并构建列表项布局。我怎样才能做到这一点？我似乎找不到使用 listview 适配器的方法。

到目前为止，我的计划是创建一个带有一些索引可序列化字段的对象，并使用我的 KVP 使用反射设置它们的值，然后将该对象设置为列表视图的数据源。

```
private Serializable Property0;
    private Serializable Property1;
    private Serializable Property2;
    private Serializable Property3;
    private Serializable Property4;
    private Serializable Property5; 
```

有没有人有更好的主意？

# sql - 在 Oracle SQL Developer 中解析查询

> ID：10986280
> 
> 赞同：5
> 
> 时间：2012-06-11T19:25:25.207
> 
> 标签：sql, oracle, parsing, testing, oracle-sqldeveloper

有没有一种方法可以在 SQL Developer (oracle) 中解析代码，而无需像 SQL Management Studio 中的“parse”选项那样实际接触表/包数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:05:18.163

没有选项只能解析 SQL 语句来验证语法。

您可以选择“解释计划”选项（`F10`在 Windows 版本的 SQL Developer 中），它将验证语法作为生成查询计划的一部分。如果存在语法错误，您将在尝试生成计划时收到错误消息，但通常不会得到错误的行和列，这使得调试更具挑战性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T22:50:10.800

我现在正在寻找这个，但在 Oracle SQL Developer 中找不到选项。

我知道一个名为[SQL Fiddle](http://sqlfiddle.com)的服务，它可以在需要测试/解析/验证临时 PL/SQL 脚本的情况下提供帮助。使用 SQL Fiddle 你可以这样做：

在下拉列表中选择`Oracle 11g R2`（现在可用），然后在左侧文本区域中键入您的脚本。按下`Build Schema`按钮。如果您的脚本有效，那么它将向您`Schema Ready`显示如下消息：

![在此处输入图像描述](../Images/9d02c4a3bd1a42866115dc60fda68851.png)

# php - 根据分隔符分成对

> ID：10986283
> 
> 赞同：0
> 
> 时间：2012-06-11T19:25:33.367
> 
> 标签：php

我有一大串类似于以下的坐标数据：

-83.6530304633209,34.8237504877659,-83.65536046332301,34.8248804877671等......

我正在尝试将其拆分为一个数组，以便可以在这样的循环中回显它：

```
new google.maps.LatLng(-83.6530304633209,34.8237504877659)
new google.maps.LatLng(-83.65536046332301,34.8248804877671)
// etc.... 
```

任何人都知道我怎么能在 PHP 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:26:03.987

```
$numbers=explode(",",$string);
for ($i=0;$i<=count($numbers)/2;$i+=2)
  echo "new google.maps.LatLng(".$numbers[$i].",".$numbers[$i+1].")"; 
```

给你！

# django - 已在 /admin/ 处注册 Django 1.2 错误

> ID：10986284
> 
> 赞同：4
> 
> 时间：2012-06-11T19:25:33.833
> 
> 标签：django, django-admin

我在 Django 1.2 管理员中遇到了这个错误。

设想：

我有两个应用程序，比如说`app1`在`app2`我的项目中。在这两个应用程序中，我定义了它们各自的`admin.py`文件以将每个应用程序各自的模型挂接到 django 的管理站点。

在`app1`admin.py 中，我定义了三个 ModelAdmin 类，对应 app1 中的三个模型类，并将其中两个注册到管理站点。

```
class App11stModelAdmin (admin.ModelAdmin):
    #class definitions here

    #This class is an abstract class
    #class Meta:
    #   abstract = True

class App12ndModelAdmin (admin.ModelAdmin):
    #class definitions here

class App13rdModelAdmin (admin.ModelAdmin):
    #class definitions here

#register to admin site two of them
admin.site.register(App12ndModel, App12ndModelAdmin)
admin.site.register(App13rdModel, App13rdModelAdmin) 
```

在里面`app2`，我导入`app1.App11stModelAdmin`来定义一个模型的管理`app2`模型。

在 admin.py 内部`app2`：

```
from app1.admin import App11stModelAdmin

class App21stModelAdmin(App11stModelAdmin):
    #define some things here

#register App21stModelAdmin to admin site
admin.site.register(App21stModel, App21stModelAdmin) 
```

使用此代码，我收到此错误消息：

```
AlreadyRegistered at /admin/

The model App12ndModel is already registered

Request Method:     GET
Request URL:    http://127.0.0.1:8000/admin/
Django Version:     1.2
Exception Type:     AlreadyRegistered
Exception Value:    

The model App12ndModel is already registered 
```

这很奇怪，因为我确定我只注册了该模型的管理员一次。当我注释掉该模型的注册语句时，我得到了同样的错误，但现在是`App13rdModel`模型。

同时，为了解决这个问题，我删除了注册语句，而是将它们放在`app1`admin.py 中的“静态”函数中。

比如：在 app1 admin.py 里面

```
def register():
    admin.site.register(App12ndModel, App12ndModelAdmin)
    admin.site.register(App13rdModel, App13rdModelAdmin) 
```

然后在 app2 admin.py

我在导入中包含了注册功能：

```
from app1.model import App11stModelAdmin, register

 ......
 ......
#register the two admin model in app1 inside app2 admin.py by calling the register function
register() 
```

这有效。我不再收到“已注册”错误。

**问题：**

我做了什么导致该错误？我是 Django 和 Python 的新手。

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:52:42.090

`admin.py`文件在运行时由 Django 执行，所以如果你将一个`admin.py`脚本导入另一个脚本，你实际上是在`admin.site.register`再次执行暴露的函数，从而给你`Already Registered`错误。

这实际上是标准的 Python 行为。考虑以下脚本（另存为`sample.py`）：

```
def multiplier(x,y):
    return x*y

def sample_write(text):
    out = open("out.txt","w")
    out.write(text)
    out.close()

sample_write("hey") # Notice this executed function 
```

当您在同一目录中打开 Python 解释器并执行此操作`import sample`时，它将写入`out.txt`输出。同样的情况下，当您有选择地导入`multiplier`类似的函数时`from sample import multiplier`，仍然会写入输出文件。避免写入输出文件的唯一方法是注释掉脚本中执行的函数或将其包装到另一个函数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T21:24:34.520

唯一可能导致这种情况的是，如果您的 admin.py 是以两种*不同*的方式导入的。例如，以下被视为两个不同的模块，实际上会导致 admin.py 代码运行两次：

```
from foo.admin import FooAdmin
from myproject.foo.admin import FooAdmin 
```

# android - BluetoothSocket.connect() 抛出 IOException

> ID：10986285
> 
> 赞同：1
> 
> 时间：2012-06-11T19:25:43.210
> 
> 标签：android, exception, io, bluetooth

我的程序与充当服务器的嵌入式蓝牙设备连接。我成功找到了附近的蓝牙设备，但是当我尝试连接到新设备时，我的程序在调用 BluetoothSocket.connect() 时由于 IO 异常而崩溃。我无法弄清楚发生了什么，所以如果有人可以帮助我，我会非常感激。

我认为这可能与我随机生成的 UUID 有关，但我并不完全确定。

谢谢。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnScanDevice = (Button) findViewById( R.id.scandevice );

    stateBluetooth = (TextView) findViewById( R.id.bluetoothstate );
    startBluetooth();

    listDevicesFound = (ListView) findViewById( R.id.devicesfound );
    btArrayAdapter = new ArrayAdapter<String>( AndroidBluetooth.this,
            android.R.layout.simple_list_item_1 );
    listDevicesFound.setAdapter( btArrayAdapter );

    CheckBlueToothState();

    btnScanDevice.setOnClickListener( btnScanDeviceOnClickListener );

    registerReceiver( ActionFoundReceiver, new IntentFilter( BluetoothDevice.ACTION_FOUND ) );

    listDevicesFound.setOnItemClickListener( new OnItemClickListener()
    {
      public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
      {
          myBtDevice = btDevicesFound.get( arg2 );
          try {
              btSocket = myBtDevice.createRfcommSocketToServiceRecord( MY_UUID );
              iStream = btSocket.getInputStream();
              oStream = btSocket.getOutputStream();
          } catch ( IOException e ) {
              Log.e( "Bluetooth Socket", "Bluetooth not available, or insufficient permissions" );
          } catch ( NullPointerException e ) {
              Log.e( "Bluetooth Socket", "Null Pointer One" );
          }
          myBtAdapter.cancelDiscovery();
          CheckBlueToothState();
          try {
              btSocket.connect();
          } catch ( IOException e ) {
              Log.e( "Bluetooth Socket", "IO Exception" );
          } catch ( NullPointerException e ) {
              Log.e( "Bluetooth Socket", "Null Pointer Two" );
          }
      } 

  });
}

private void CheckBlueToothState() {
    if( myBtAdapter == null ) {
        stateBluetooth.setText("Bluetooth NOT supported" );
    } else {
        if( myBtAdapter.isEnabled() ) {
            if( myBtAdapter.isDiscovering() ) {
                stateBluetooth.setText( "Bluetooth is currently " +
                        "in device discovery process." );
            } else {
                stateBluetooth.setText( "Bluetooth is Enabled." );
                btnScanDevice.setEnabled( true );
            }
        } else {
            stateBluetooth.setText( "Bluetooth is NOT enabled" );
            Intent enableBtIntent = new Intent( BluetoothAdapter.ACTION_REQUEST_ENABLE );
            startActivityForResult( enableBtIntent, REQUEST_ENABLE_BT );
        }
    }
}

private Button.OnClickListener btnScanDeviceOnClickListener = new Button.OnClickListener() {
    public void onClick( View arg0 ) {
        btArrayAdapter.clear();
        myBtAdapter.startDiscovery();
    }
};

@Override
protected void onActivityResult( int requestCode, int resultCode, Intent data ) {
    if( requestCode == REQUEST_ENABLE_BT ) {
        CheckBlueToothState();
    }
}

private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver() {
    public void onReceive( Context context, Intent intent ) {
        String action = intent.getAction();
        if( BluetoothDevice.ACTION_FOUND.equals( action ) ) {
            BluetoothDevice btDevice = intent.getParcelableExtra( BluetoothDevice.EXTRA_DEVICE );
            btDevicesFound.add( btDevice );
            btArrayAdapter.add( btDevice.getName() + "\n" + btDevice.getAddress() );
            btArrayAdapter.notifyDataSetChanged();
        }           
    }
};
public static void startBluetooth(){
    try {
        myBtAdapter = BluetoothAdapter.getDefaultAdapter();
        myBtAdapter.enable();
    } catch ( NullPointerException ex ) {
        Log.e( "Bluetooth", "Device not available" );
    }
}

public static void stopBluetooth() {
    myBtAdapter.disable();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T14:58:46.587

您发布的代码有两个问题，但只有一个与您的崩溃有关。

您在 logcat 中的崩溃很可能会说“命令被拒绝”之类的内容。UUID 是一个必须指向嵌入式设备上已发布服务的值，**它不能只是随机生成**的。换句话说，您要访问的 RFCOMM SPP 连接具有特定的 UUID，它发布该 UUID 以标识该服务，并且当您创建套接字时，它必须使用匹配的 UUID。

[我写的这篇博](http://wiresareobsolete.com/wordpress/2010/11/android-bluetooth-rfcomm/)文可能会帮助您了解如何查询您的设备以获取需要插入到您的程序中的正确 UUID。在 Android 4.0 之前，SDK 几乎假定您提前知道它（您从蓝牙 OEM 等处获得它），因此从您的设备中发现它有点迂回。如果您有幸拥有 4.0.3 设备，`fetchUuidsWithSdp()`并且`getUuids()`现在是公共方法，您可以直接调用它们以查找所有已发布的服务及其关联的 UUID 值。

您的代码稍后可能会遇到的第二个问题是，在您连接之前，您无法从套接字获取数据流，因此您可能需要像这样重写您的方法：

```
 myBtDevice = btDevicesFound.get( arg2 );
      try {
          btSocket = myBtDevice.createRfcommSocketToServiceRecord( MY_UUID );
      } catch ( IOException e ) {
          Log.e( "Bluetooth Socket", "Bluetooth not available, or insufficient permissions" );
      }

      myBtAdapter.cancelDiscovery();
      CheckBlueToothState();
      try {
          btSocket.connect();
          //Get streams after connect() returns without error
          iStream = btSocket.getInputStream();
          oStream = btSocket.getOutputStream();
      } catch ( IOException e ) {
          Log.e( "Bluetooth Socket", "IO Exception" );
      } catch ( NullPointerException e ) {
          Log.e( "Bluetooth Socket", "Null Pointer Two" );
      } 
```

高温高压

# python - change_form模板Django中的提交按钮问题

> ID：10986286
> 
> 赞同：0
> 
> 时间：2012-06-11T19:25:50.350
> 
> 标签：python, django, many-to-many, submit

我是 Django 和 Python 的新手，我仍然对如何预填充与多字段相关的查找中的值感到困惑，因为我在[Prepopulate tabularinline 中使用来自多字段相关查找的值的](https://stackoverflow.com/questions/10975362/prepopulate-tabularinline-with-value-from-related-lookup-in-manytomany-field)问题 是我的模型：

```
class Product(models.Model):
    product_name= models.CharField(max_length=50)
    price = models.DecimalField(max_digits=10, decimal_places=2, default=Decimal('0.00'))
    tax_per_item = models.DecimalField(max_digits=10, null=True, blank=True, decimal_places=2, default=Decimal('0.00'))
    discount_per_item = models.DecimalField(max_digits=10, null=True, blank=True, decimal_places=2, default=Decimal('0.00'))

class Order(models.Model):
    produks = models.ManyToManyField(Product, verbose_name=u"Kode Produk")
    no_customer = models.ForeignKey(Customer, null=True, blank=True, related_name='%(class)s_kode_cust')

    def order_view(request):
        if 'enter' in request.POST:
            #response to tabular.html template
            return HttpResponseRedirect('/admin/POS/Pemesanan/inline')

class Foo(models.Model):
    product = models.ForeignKey(Product, editable=False)
    pemesanan = models.ForeignKey(Order)
    quantity = models.IntegerField()
    price = models.IntegerField()
    discount = models.IntegerField()
    tax = models.IntegerField() 
```

这是我的管理员：

```
class PemesananAdmin(admin.ModelAdmin):
fieldsets = (
    ('Customer in Time (Person)', {
        'fields': ('no_customer',),
    }),
    ('Date', {
        'fields' : ('date', 'delivery_date',),
    }),
    ('Order Details', {
        'fields' : ('produks',),
    }),
)
search_fields = ['produks', 'no_customer']
raw_id_fields = ('produks', 'no_customer',)
related_lookup_fields = {
'fk': ['no_customer'],
'm2m': ['produks'],
}
inlines = [
    FooInline,
]

class FooInline(admin.TabularInline):
model = Foo
template = 'admin/POS/Pemesanan/inline/tabular.html'
extra = 0
allow_add = True 
```

这是我的 change_form 覆盖模板：

```
{% extends "admin/change_form.html" %}
{% block after_field_sets %}{{ block.super }}

<form action="" method="post">
<input type="submit" name="enter" value="Enter" />
</form>
{% endblock %} 
```

但是，仍然没有人能告诉我如何 :(。（如果你请在该页面上回答我的问题）。现在，我对 2 个问题感到困惑：1\. 我希望 change_form 中的提交按钮也重定向到 change_form 中同一页面不需要刷新页面（不是 change_list 页面或实际提交）。2.我如何从提交按钮获取相关查找“produks”字段集（manytomany）的实例，以便我可以访问父值（类产品）并预填充全部到 tabularinline（Foo 类或中间类）？

仅供参考，提交按钮位于所有字段集下方。

任何人都请帮助我:(。感谢您的友好回复:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:08:18.470

你的问题是，这

```
<form action="" method="post">
<input type="submit" name="enter" value="Enter" />
</form> 
```

只会将您的提交按钮发送回您的服务器。表单标签需要围绕每个表单元素。

只需删除：`<form action="" method="post">`它`</form>` 可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:41:41.840

据我了解，您想显示订单 ( `Order`) 及其项目 ( `Foo`)？

我天真的解决方案是：

```
class Product(models.Model):
   ...

class Order(models.Model):
   products = models.ManyToManyField(Product, through='Item')

class Item(models.Model):
   order = models.ForeignKey(Order)
   product = models.ForeignKey(Product)
   quantity = models.IntegerField()
   ... 
```

管理员可以像这样简单：

```
class ItemInline(admin.TabularInline):
    model = Item

class OrderAdmin(admin.ModelAdmin):
    inlines = (ItemInline,) 
```

你需要测试一下，因为我不能（实际上）

# javascript - TabPanel 内的 ExtJS 4 DataView

> ID：10986287
> 
> 赞同：0
> 
> 时间：2012-06-11T19:25:53.863
> 
> 标签：javascript, extjs4

在 Controller 中的 MVC 应用程序中，我具有以下功能，可以将新选项卡添加并聚焦到 TabPanel，其中包含 DataView：

```
 show_gallery: function(view, record, item, index, e, opts) {
    var tabb = Ext.ComponentQuery.query('.gallery_panel');

    var gallery_view = Ext.widget('gallery_view');

    var ImageStore = Ext.create('Gallery.store.Images');
    ImageStore.load({url: 'myphoto/index.php/api/feed/json/' + record.data.uuid});

    Ext.apply(gallery_view, {
        title: record.data.name,
        id: record.data.uuid,
        closable:true,
        store: ImageStore
    });

     if (tabb[0].down('#' + record.data.uuid)) {
        console.log('Entered IF');
        //tabb[0].setActiveTab(tabb[0].down('#' + record.data.uuid));
        tabb[0].setActiveTab(record.data.uuid);
     }else{
        console.log('Entered ELSE');
        tabb[0].add(gallery_view);
        if (Ext.getCmp(record.data.uuid)) {
            console.log('THERE IS SUCH UUID');
        }
        //tabb[0].setActiveTab(gallery_view);
     }
}, 
```

问题出在最后一行。当我取消注释 tabb[0].setActiveTab(gallery_view) 时，新选项卡已聚焦但为空，如果我离开该行已注释，则带有 dataView 的新选项卡将填充数据但未聚焦。我真的不知道为什么 setActiveTab() 会导致 DataView 根本不显示。gallery_view 小部件是 Ext.view.View 扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:25:55.057

如果没有 setActiveTab，我不确定您如何获得数据视图，但此代码似乎存在一些问题：

```
var gallery_view = Ext.widget('gallery_view');

var ImageStore = Ext.create('Gallery.store.Images');
ImageStore.load({url: 'myphoto/index.php/api/feed/json/' + record.data.uuid});

Ext.apply(gallery_view, {
    title: record.data.name,
    id: record.data.uuid,
    closable:true,
    store: ImageStore
}); 
```

首先使用 Ext.widget() 创建一个新的小部件，然后使用 Ext.apply() 覆盖一些配置选项。据我了解，后者适用于原语，但不适用于对象/数组。

一般来说，配置的目的是告诉构造函数如何初始化类的特定实例。如果对象尚未呈现，则通过 Ext.apply() 更改对象的标题可能会起作用，但不会更改存储配置（在构建时组件可能会开始侦听各种存储事件，这不会发生在简单的 Ext.apply() 仅将配置从一个对象复制到另一个对象 - 您已经错过了为监听存储事件而创建的组件的火车）。

请改用这个：

```
var ImageStore = Ext.create('Gallery.store.Images');
ImageStore.load({url: 'myphoto/index.php/api/feed/json/' + record.data.uuid});

var gallery_view = Ext.widget('gallery_view', {
    title: record.data.name,
    id: record.data.uuid,
    closable:true,
    store: ImageStore
}); 
```

# clojure - 如何在另一个命名空间中设置动态变量

> ID：10986293
> 
> 赞同：9
> 
> 时间：2012-06-11T19:26:06.190
> 
> 标签：clojure

我正在尝试在不同的命名空间中定义一个动态变量。Lobos 文档指出：

> 默认情况下，所有迁移都保存在 lobos.migrations 命名空间中。它会通过迁移命令自动加载，因此无需自己加载。因此，要使用另一个命名空间，您必须更改 lobos.migration/ *migrations-namespace*动态变量。

我不知道如何在我的新命名空间中设置动态变量。

我可以通过 (ns `lobos.migration) 在 repl 中执行此操作，但从我自己的 ns 运行此 cmd

```
(def ^:dynamic lobos.migration/*migrations-namespace* 'gb.install.migrations) 
```

产量`Can't create defs outside of current ns`。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T20:25:02.300

Clojure 变量可以具有对所有线程可见的根绑定。此外，动态变量还可以具有每个线程的绑定，每个绑定仅对一个线程可见。

您可以使用以下方法为当前线程临时创建每个线程绑定`binding`：

```
(binding [lobos.migration/*migrations-namespace* 'gb.install.migrations]
  ;; binding is in effect here in the body of the binding form
  ) 
```

或者，如果每个线程绑定已经生效，您可以使用以下方法更改其值`set!`：

```
(set! lobos.migration/*migrations-namespace* 'gb.install.migrations) 
```

但是您可能需要以在所有线程中可见的方式更改这个特定的动态变量。如果这是真的，您需要通过执行以下操作来更改其根绑定：

```
(alter-var-root #'lobos.migration/*migrations-namespace*
                (constantly 'gb.install.migrations)) 
```

请注意，我对 lobos 本身一无所知，因此不能肯定地说这些中的任何一个实际上都会按照 lobos 的意愿设置 var。

# hash - 从加密字符串前后查找加密方法和密钥

> ID：10986295
> 
> 赞同：1
> 
> 时间：2012-06-11T19:26:29.297
> 
> 标签：hash, passwords, md5, encryption

我有一个大约有 4,000 名成员的数据库。我需要解密他们所有的密码，以便我可以使用 MD5 重新加密它们并放入新系统。我有一个加密前和加密后密码字符串的帐户，因此我假设我应该能够找出一种方法和密钥范围。我无权访问原始源代码，否则我不会在这里。

我应该提到现有的密码变化很大。

用户 1 - qwDyP1db9iOPI

用户 2 - $1$.WXtDyLg$yxBPAWxzd.srEWJZfqZAY/

用户 3 - do8sLMoVVqxKQ

用户 4 - TKmnAlPe

我该如何处理这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:54:48.567

通常，您无法解密密码，因为未存储密码。您看到的是密码的哈希值 - 没有有效的方法来找到与特定哈希值匹配的密码。

您可以在将配置更改为使用 MD5 散列后强制每个人更改密码，或者您可以为每个人生成新的临时密码以立即替换所有散列，但无论如何他们都应该再次更改它们。

这些看起来可能来自 Linux（以 $1$ 开头的已经是 MD5 哈希，其他看起来像旧的`crypt()`DES 变体样式）。

在处理应用程序密码时并非总是如此——例如，一些数据库使用相当弱的凭证存储——但 Unix/Linux 版本已经很长时间没有存储实际密码了，如果有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:24:41.223

让我们想想。假设我可以破解你的计算机/数据库（不是不可能的任务）。所以我有你所拥有的 - 所有用户密码的列表，但已加密。但很可能我可以自己注册到您的系统，而且我知道自己的密码。我可以通过我的用户名或最新条目在数据库中找到它的加密形式，所以现在我有了明文 + 加密对！如果我可以按照您的要求进行操作，我将拥有所有密码和对所有帐户的完全访问权限。这意味着加密密码或一般数据几乎没有额外的安全影响，我所关心的只是防止未经授权访问数据。但这不是真的，所以你不能:)

顺便说一句，MD5 不是加密，而是哈希，或者更准确地说是摘要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T03:53:14.923

看起来 twalberg 在大多数情况下是正确的，但我想更进一步给你一些实用的建议：

1) 查看[http://www.openwall.com/john/](http://www.openwall.com/john/) (John the Ripper) 以获取从您拥有的数据库中获取原始密码的帮助。请注意，生成的密码可能不是原始密码（很可能，但不确定）。

使用此工具获得所有密码后，请想一想：任何人都可以做到这一点。您的用户可能会在其他地方使用这些密码。如果有人闯入您的网站，他们可能会暴露信任您的人。如果有人使用此信息侵入他们的其他帐户，您的用户可能会责怪您。*拥有明文密码对您*来说是有风险的。

我建议您借此机会让您的用户更改他们的密码。那些不再使用其帐户的人可能需要通过一个小的验证步骤才能重新获得访问权限，因此您现在可以禁用他们的帐户。

2）当您生成新密码数据库时，我建议您至少使用安全哈希（例如 SHA1 或 SHA2）以及每个用户的盐（以标准方式添加到生成的哈希输出的随机值）以帮助保护数据库免于意外暴露。

虽然这个答案效率不高，但如果您的实际密码数据库甚至与您所代表的比例大致相同，那么对于您当前的数据库来说，它可能在大多数情况下都是实用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:03:25.287

如果您要从当前系统切换，请不要切换到普通 MD5 - 有“彩虹表”可以破解许多常见密码；而是使用盐渍/双 MD5 或 SHA

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:41:37.653

感谢大家的意见。我会让每个人都更改密码。我无意保留任何人的密码。目标是让所有 4000 名用户在迁移到新系统后都不必更改密码，但这似乎是不可避免的。正如 davka 指出的那样，我在这个数据库中有一个帐户并且知道我的密码并且可以看到加密版本，因此认为这足以开发一个脚本来解密并将密码租用到新数据库中。再次感谢。

# c# - C#，不能序列化为二进制

> ID：10986296
> 
> 赞同：-3
> 
> 时间：2012-06-11T19:26:41.087
> 
> 标签：c#, serialization

我完全按照[本教程](http://www.codeproject.com/Articles/1789/Object-Serialization-using-C)在线，但不知何故它给了我错误。说没有对象图什么的。

我有以下要序列化的静态对象：

```
[Serializable]
public class Settings : ISerializable 
{
    public static string server= "http://localhost/";
    public static string username = "myname";
    public static bool savePassword = true;
    public static bool autoSync = true;
    public static string password = "mypass";
    public static string folderPath1= "c:/";
    public static string folderPath2= "c:/";
    public static string autoSyncDuration = "300";
    public static string lastSyncTime = "???";

    public Settings()
    { }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        Type myTypeObj = Type.GetType("Settings");
        foreach (FieldInfo p in myTypeObj.GetFields())
        {
            Object value = p.GetValue(null);
            info.AddValue(p.Name, value, p.GetType());
        }
    }

    public Settings(SerializationInfo info, StreamingContext context)
    {
        Type myTypeObj = Type.GetType("Settings");
        FieldInfo p;
        foreach (SerializationEntry e in info)
        {
            p = myTypeObj.GetField(e.Name);
            p.SetValue(null, e.Value);
        }
    }
} 
```

这是读/写功能：

```
 private void writeSettings()
    {
        pcb_savingSettings.Visible = true;
        FileStream fileStream = new FileStream(settingFile, FileMode.Create, FileAccess.Write, FileShare.None);
        BinaryFormatter bf = new BinaryFormatter();
        bf.Serialize(fileStream, new Settings());

        fileStream.Close();
        pcb_savingSettings.Visible = false;
    }
    private void readSettings()
    {
        if (!File.Exists(settingFile))
        {
            writeSettings();
        }
        FileStream fileStream = new FileStream(settingFile, FileMode.Open, FileAccess.Read, FileShare.None);
        BinaryFormatter bf = new BinaryFormatter();
        bf.Deserialize(fileStream);
        fileStream.Close();
    } 
```

实际错误消息：对象“822476800”没有地图。这发生在这一行：

```
bf.Deserialize(fileStream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:40:01.820

我会在这个答案的开头说这是一个坏主意。序列化旨在序列化对象实例，静态字段不是该实例的一部分。

我相信当您确实有一个自定义序列化程序时，您需要在对象名称前加上**静态。**. 例如，名为 A 的公共静态成员需要添加为**static.A**。

这是一个应该有帮助的链接： [http ://forums.codeguru.com/showthread.php?t=411604](http://forums.codeguru.com/showthread.php?t=411604)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:36:18.120

我弄清楚对于那些将来可能会想知道出了什么问题的人来说，错误是什么。其实很简单。实际上是一个小错字。太糟糕了 M$ 有可怕的错误消息，并没有真正告诉你错误可能发生在哪里：

只需替换此行：

```
public void GetObjectData(SerializationInfo info, StreamingContext context)
{
    Type myTypeObj = Type.GetType("Settings");
    foreach (FieldInfo p in myTypeObj.GetFields())
    {
        Object value = p.GetValue(null);
        info.AddValue(p.Name, value, p.GetType());
    }
} 
```

有了这个：

```
 public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        Type myTypeObj = Type.GetType("Settings");
        foreach (FieldInfo p in myTypeObj.GetFields())
        {
            Object value = p.GetValue(null);
            info.AddValue(p.Name, value, value.GetType());
        }
    } 
```

就是这样！一切都序列化/反序列化就好了。您可能无法猜测错误消息出错的地方：* No map for Object '822476800'*。

注意：在最后一行中，p.GetType 应该是 value.GetType

# crystal-reports - 无法更改子报表的数据源：新数据源没有返回数据

> ID：10986297
> 
> 赞同：1
> 
> 时间：2012-06-11T19:26:53.863
> 
> 标签：crystal-reports, crystal-reports-xi

我有一个主报告，其中有 3 个连接到 SQL 数据库的子报告。我正在尝试将报告更改为不同的 ODBC 连接。我使用“设置数据源位置”来更新 ODBC。主报告工作正常，但子报告不返回任何数据。我已将子报告保存为单独的报告并尝试运行它们。他们仍然不会返回任何数据。如果我将 ODBC 位置更改回原来的位置，它可以正常工作。这两个数据库是相同的。似乎子报告中的某些内容未更新到新数据库。主报告与子报告访问相同的表格并且它正在工作。

我正在运行 Windows 7 和 Crystal XI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T05:00:46.883

右键单击每个子报告，然后选择“编辑子报告”，然后更改数据源位置并保存。为每个子报告执行此操作。

# json - as_json 运行速度非常慢（Mongoid + Sinatra）

> ID：10986300
> 
> 赞同：3
> 
> 时间：2012-06-11T19:27:04.313
> 
> 标签：json, performance, mongodb, sinatra, mongoid

我将 Sinatra (1.3.2) 与 Mongoid (2.4.10) 一起使用。我注意到将大约 350 个 mongo 文档转换为 JSON 需要很长时间。

我添加了一些基准包装器，只是为了查看花费最多的时间：

```
get '/games' do
  content_type :text
  obj = nil
  t1 = Benchmark.measure { @games = filtered_games.entries }
  t2 = Benchmark.measure { obj = @games.as_json }
  t3 = Benchmark.measure { obj.to_json }
  "Query: #{t1}\nTo Object: #{t2}\nJSON: #{t3}"
end 
```

（**filtered_games**只是使用 URL 中传递的参数返回 Mongoid 查询的结果）

这是一个典型的反应：

> 查询：0.100000 0.000000 0.100000 (0.234351)
> 
> 对象： **3.560000** 0.010000 3.570000 (3.569813)
> 
> JSON：0.220000 0.000000 0.220000（0.217941）

因此，看起来它大部分时间只是将 Mongoid 对象转换为基本的 JSON 结构 (as_json)（**超过 3.5 秒**），而不是将该结构转换为 JSON 字符串。

文档不是特别大（大约 450 字节，每个文档 15-20 个字段）。

我想真正让我感到困惑的是，对 Mongodb 执行实际查询、解析响应并将其反序列化为 Mongoid 对象所需的时间要快得多。

为什么是这样？关于如何进一步优化它的任何建议？我想我可以只使用对 Mongo 的本机调用并返回这些结果，但我希望能够继续使用我在 Mongoid 中定义的范围。

编辑：我之前实际上并没有在第一个基准测试中运行查询，因为 Mongoid 延迟加载直到 as_json 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:13:11.037

因此，事实证明，回滚到以前版本的 Mongoid 解决了这个问题。我猜这是因为它引入了早期版本的 Active Model 或 Active Support。

*   蒙哥：1.4.0
*   Mongoid：2.3.5
*   活动型号：3.1.6
*   主动支持：3.1.6

这些是新的基准测试结果：

> 查询：0.110000 0.010000 0.120000（0.243558）
> 
> 对象：0.200000 0.000000 0.200000 (0.196342)
> 
> JSON：0.440000 0.000000 0.440000（0.444311）

如果我有机会深入研究代码，我会尝试回来更新我发现的任何东西。

# python - Python中的IndexError（初学者）

> ID：10986308
> 
> 赞同：2
> 
> 时间：2012-06-11T19:27:29.183
> 
> 标签：python, debugging

我有一个数组 X[1]。在该数组中，我想将元素 [...,1,0,...] 替换为 [....,10,..]。换句话说，只要 1 和 0 连续出现，我想用 10 替换它。

我的代码是，

```
for m in range(0,len(X[1])):

    if X[1][m] == 0:
        X[1].insert(m-1,10)
        del X[1][m]
        del X[1][m] 
```

但是这段代码给了我错误：

```
Traceback (most recent call last):
  File "gettinginput.py", line 25, in <module>
    if X[1][m] == 0:
IndexError: list index out of range 
```

如果我删除两个删除语句中的一个，它不会给我一个错误，它会`1`从.`[...,1,0,...]``0`

例如。

```
X[1] = [5, 4, 4, 5, 7, 1, 0, 3, 2, 1] 
```

删除 1 个删除语句后，输出为

```
[5, 4, 4, 5, 7, 10, 0, 3, 2, 1] 
```

但是有 2 个删除语句，我得到一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:46:41.787

```
def reduce_list(lst, match, replace):
    _matchlen = len(match)
    lst = list(lst)                      # copy existing list
    for i in xrange(len(lst)-_matchlen, -1, -1):   # scan through it backwards
        if lst[i:i+_matchlen] == match:
            lst[i:i+_matchlen] = replace
    return lst

print reduce_list([1,0,1,0,1,1,0], [1,0], [10]) 
```

结果是

```
[10, 10, 1, 10] 
```

为了匹配您的示例，

```
X[1] = reduce_array(X[1], [1,0], [10]) 
```

**编辑：**在考虑了更多之后，

```
def reduce_list(lst, match, replace):
    """
    Return a new list,
    with all original non-overlapping occurrences of 'match'
    replaced by 'replace'
    """
    lst = list(lst)                      # copy existing list
    matchlen = len(match)
    replacelen = len(replace)
    last_i = len(lst) - matchlen
    i = 0
    while i <= last_i:
        if lst[i:i+matchlen] == match:
            lst[i:i+matchlen] = replace
            last_i += replacelen - matchlen
            i += replacelen
        else:
            i += 1
    return lst 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:31:47.533

在循环的第一次迭代中，`m == 0`. 然后你做一个插入`m-1`，这将是`-1`，这肯定是超出范围的`X[1]`。

```
for m in range(0,len(X[1])):
    if X[1][m] == 0:
        X[1].insert(m-1,10)
        del X[1][m]
        del X[1][m] 
```

编辑：如果输入以 a 开头`0`，我的原始答案是有效的。假设它永远不会像 OP 所建议的那样，让我们​​看看为什么这两个删除会导致问题。

```
X[1] = [5, 4, 4, 5, 7, 1, 0, 3, 2, 1] 
```

for 循环的计算结果为`for m in range(0, 10)`。当我们到达`0`, `m == 6`. `10`所以我们在位置 * 之前插入`5`，并删除位置`6`两次。

```
X[1] = [5, 4, 4, 5, 7, 10, 3, 2, 1] 
```

注意那里只有 9 个元素？`len(X[1])`in 你的循环`for`永远**不会重新评估**，所以它会跑出数组的末尾，给你超出范围的错误。

测试程序：

```
>>> for m in range(len(x)):
...     del(x[m])
...     print(len(x))
...
8
7
6
5
4
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IndexError: list assignment index out of range 
```

* * *

*为什么**在**位置 5 之前？从 的定义`insert`：

> list.insert(i, x)
> 
> 在给定位置插入一个项目。第一个参数是要插入的元素的索引，所以 a.insert(0, x) 插入到列表的最前面，a.insert(len(a), x) 等价于 a.append( X）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:42:19.453

这是一个简单的方法。

```
lst=[5, 4, 4, 5, 7, 1, 0, 3, 2, 1]

for idx,val in enumerate(lst[:-1]):
    if(val==1 and lst[idx+1]==0):
        lst[idx:idx+1]=[10]

print (lst) 
```

或没有`enumerate`：

```
for idx in range(len(lst)-1):
    if(lst[idx:idx+1]==[1,0]):
        lst[idx:idx+1]=[10]

print (lst) 
```

我们在列表中搜索子列表 [1,0]，然后用（子）列表 [10] 替换该子列表。

当然，在做这一切之前，如果你有一个列表列表（`X`），你可以这样做，`lst=X[1]`而不是`lst=[...]`

# mysql - mysql的外键是否可以根据列的值创建外键？

> ID：10986310
> 
> 赞同：1
> 
> 时间：2012-06-11T19:27:46.420
> 
> 标签：mysql, foreign-keys

我有这个数据库结构，

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

CREATE TABLE IF NOT EXISTS `announces` (
   `tracker` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
   `failCount` smallint(5) unsigned NOT NULL DEFAULT '0',
   PRIMARY KEY (`tracker`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE IF NOT EXISTS `hashes` (
   `hash` binary(20) NOT NULL,
   `indexed` tinyint(1) NOT NULL DEFAULT '0',
   PRIMARY KEY (`hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE IF NOT EXISTS `trackers` (
   `hash` binary(20) NOT NULL,
   `tracker` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
   `seeders` mediumint(8) unsigned NOT NULL DEFAULT '0',
   `leechers` mediumint(8) unsigned NOT NULL DEFAULT '0',
   KEY `hashFK` (`hash`),
   KEY `trackerFK` (`tracker`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

ALTER TABLE `trackers`
   ADD CONSTRAINT `hashFK` FOREIGN KEY (`hash`) REFERENCES `hashes` (`hash`)
   ON DELETE CASCADE,
   ADD CONSTRAINT `trackerFK` FOREIGN KEY (`tracker`) REFERENCES `announces` (`tracker`) 
   ON DELETE CASCADE; 
```

表跟踪器有 2 个外键，一个用于跟踪器，一个用于哈希。

我认为这可以确保哈希不能在跟踪器中而不首先在哈希中。如果从哈希中删除哈希，那么它也会从跟踪器中删除。

对于跟踪器也是如此，一个跟踪器必须先存在于公告中，然后它才能存在于跟踪器中，如果它从公告中删除，它也会从跟踪器中删除。

我遇到的问题是，如果行`indexed`中的相应值为. 这可能吗？`hashes``== 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:10:31.330

如果您希望在将带有 fk 的跟踪器插入索引为 != 1 的哈希时引发错误，那么它必须在应用层实现。

各种选项：

*   最喜欢的编码语言检查（插入前检查值的后续查询）
*   使用触发器，在插入到跟踪器之前，检查相应的哈希是否被索引，如果没有取消/引发错误

干杯

# fullcalendar - 单击月份按钮时运行脚本（JS）

> ID：10986311
> 
> 赞同：0
> 
> 时间：2012-06-11T19:27:48.480
> 
> 标签：fullcalendar

我试图弄清楚当我在完整的日历派生中选择“月份”时如何运行脚本。

我该怎么办？单击它，其他一切都会发生，但我选择的脚本也会运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:35:02.823

干得好：

```
$(document).ready(function() {
    // ... you can have other things here ...

    $('.fc-button-month > .fc-button-inner').live('click', function() {
        alert('I am here ..');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T04:57:42.483

无论您使用的是 select 还是 dayclick，您都应该能够在该回调中运行一个函数，然后使用 $.ajax 函数来运行您的 php 脚本（假设您使用的是 php，因为您没有指定）。这是一个简短的例子......

```
var calendar = $('#calendar').fullCalendar({
select: function(s, e, a) {
  myfunction();
}
}); 
```

然后在日历变量之外......

```
function myfunction(){
  $.ajax({
    url: 'myscript.php',
    data: {myvariable: myvariable},
    type: 'post',
    success: function(data){
      alert(data);
    }
  });
} 
```

我不明白为什么这不起作用

# java - 如何使用 PrintWriter 和 flush() 在文本文件上打印内容？

> ID：10986318
> 
> 赞同：0
> 
> 时间：2012-06-11T19:28:10.970
> 
> 标签：java, multithreading, thread-safety, printwriter

我正在使用多线程来计算图像。每个线程计算一条线，当一个线程已经在计算一条**线**时，下一个线程是否应该计算那条线之后的**线**。但我想确保每一行都只计算一次，为了做到这一点，我可以制作一个 System.out.println(CalculatedLineNumber) 并在文本文件中输出，这样当我用文本打开它时编辑器，我会直接查看打印的行数是否与文本文件上的行数相同。但是我该怎么做呢？这是我完成计算的 run() 方法的代码片段：

```
public void run() {

                int myRow;
                while ( (myRow = getNextRow()) < getHeight() ) {
                    image.setRGB(0, myRow, getWidth(), 1, renderLine(myRow), 0, 0);
                }
            } 
```

有人告诉我，我应该使用 PrintWriter 和 flush() 或类似的东西，但我不知道如何使用它。有人可以帮我吗？（“myRow”是我想写在文本文件上的行号，每个人都在不同的行）

太感谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:36:58.180

> 我想确保每一行都只计算一次，

我建议您使用 a`ExecutorService`并将每一行作为图像作业提交到线程池。请参阅底部的代码示例。如果你做对了，那么你就不必担心会有多少输出线。

> 我可以做一个`System.out.println(CalculatedLineNumber)`

我不太明白这样做的必要性。这是某种会计文件来帮助您确保所有图像都已处理吗？

> 有人告诉我应该使用 PrintWriter 和 flush()

你不需要`flush`a`PrintWriter`因为它已经在下面同步了。只需在每个作业结束时打印出结果，如果您向您提交了 X 行作业， `threadPool`那么您将有 X 行输出。

您需要做的就是使用`PrintWriter`：

```
PrintWriter printWriter = new PrintWriter(new File("/tmp/outputFile.txt"));
// each thread can do:
writer.println("Some sort of output: " + myRow); 
```

* * *

下面是一些示例代码来展示如何使用`ExecutorService`线程池。

```
PrintWriter outputWriter = ...;
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// i'm not sure exactly how to build the parameter for each of your rows
for (int myRow : rows) {
    // something like this, not sure what input you need to your jobs
    threadPool.submit(new ImageJob(outputWriter, myRow, getHeight(), getWidth()));
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...
public class ImageJob implements Runnable {
    private PrintWriter outputWriter;
    private int myRow;
    private int height;
    private int width;
    public MyJobProcessor(PrintWriter outputWriter, int myRow, int height,
            int width, ...) {
        this.outputWriter = outputWriter;
        this.myRow = myRow;
        this.height = height;
        this.width = width;
    }
    public void run() {
        image.setRGB(0, myRow, width, 1, renderLine(myRow), 0, 0);
        outputWriter.print(...);
    }
} 
```

# android - Android 应用 A 想要跟踪 Android 应用 B 安装的 Google Play 推荐数据

> ID：10986320
> 
> 赞同：12
> 
> 时间：2012-06-11T19:28:31.367
> 
> 标签：android, broadcastreceiver, referrer, google-play

假设我有一个安装在用户设备中的 Android 应用程序 A，并且我的应用程序中有一个 AppWidget，我们让其他 Android 开发人员在每次安装成本的基础上发布他们的应用程序促销广告。所以我们需要通过 App A 的推荐来跟踪 App B 是否被安装在用户的设备上。

我们还假设 Android App B 的广告在 Android App A 的小部件上运行，并且我们将 App A 的用户重定向到 App B 的用户到 Google Play 的链接包含所有引荐来源数据。URL 看起来像这样（[这里](https://developers.google.com/analytics/devguides/collection/android/devguide#general-campaign-tracking)推荐-

[https://play.google.com/store/apps/details?id=com.joelapenna.foursquared&referrer=utm_source%3Dtooyoou%26utm_medium%3Dbanner%26utm_term%3Dfoursquare%26utm_content%3Dfoursquare-tooyoou%26utm_campaign%3Dfoursquare-android](https://play.google.com/store/apps/details?id=com.joelapenna.foursquared&referrer=utm_source%3Dtooyoou%26utm_medium%3Dbanner%26utm_term%3Dfoursquare%26utm_content%3Dfoursquare-tooyoou%26utm_campaign%3Dfoursquare-android) )

如果您在浏览器中点击上述链接或从中制作二维码并启动它，它将带您到 Google Play 中的 App B 以及所需的推荐数据。现在，当 App B 安装在用户的设备上并首次启动时，App A 期望接收的广播是`com.android.vending.INSTALL_REFERRER`. 如果收到广播并且 utm_source 是 App A 则记录并处理事务。这就是我们的全部目标。

这是 App A 的 AndroidManifest.xml 代码片段。

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:debuggable="true" >
        <activity
            android:name=".LocateMeActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
       <receiver android:name="com.locateme.android.ReferralReceiver" android:exported="true">
      <intent-filter>
        <action android:name="com.android.vending.INSTALL_REFERRER" />
      </intent-filter>
    </receiver> 
    </application> 
```

添加了权限 -

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

这是应该处理广播的广播接收器类 ReferralReceiver.java。

```
import java.io.UnsupportedEncodingException;
import java.net.URLDecoder;
import java.util.HashMap;
import java.util.Map;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;

public class ReferralReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        // Workaround for Android security issue: http://code.google.com/p/android/issues/detail?id=16006
        try
        {
            final Bundle extras = intent.getExtras();
            if (extras != null) {
                extras.containsKey(null);
            }
        }
        catch (final Exception e) {
            return;
        }

        Map<String, String> referralParams = new HashMap<String, String>();

        // Return if this is not the right intent.
        if (! intent.getAction().equals("com.android.vending.INSTALL_REFERRER")) { //$NON-NLS-1$
            return;
        }

        String referrer = intent.getStringExtra("referrer"); //$NON-NLS-1$
        if( referrer == null || referrer.length() == 0) {
            return;
        }

        try
        {    // Remove any url encoding
            referrer = URLDecoder.decode(referrer, "x-www-form-urlencoded"); //$NON-NLS-1$
        }
        catch (UnsupportedEncodingException e) { return; }

        // Parse the query string, extracting the relevant data
        String[] params = referrer.split("&"); // $NON-NLS-1$
        for (String param : params)
        {
            String[] pair = param.split("="); // $NON-NLS-1$
            referralParams.put(pair[0], pair[1]);
        }

        ReferralReceiver.storeReferralParams(context, referralParams);
    }

    private final static String[] EXPECTED_PARAMETERS = {
        "utm_source",
        "utm_medium",
        "utm_term",
        "utm_content",
        "utm_campaign"
    };

    private final static String PREFS_FILE_NAME = "ReferralParamsFile";

    public static void storeReferralParams(Context context, Map<String, String> params)
    {
        SharedPreferences storage = context.getSharedPreferences(ReferralReceiver.PREFS_FILE_NAME, Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = storage.edit();

        for(String key : ReferralReceiver.EXPECTED_PARAMETERS)
        {
            String value = params.get(key);
            if(value != null)
            {
                editor.putString(key, value);
            }
        }

        editor.commit();
    }

    public static Map<String, String> retrieveReferralParams(Context context)
    {
        HashMap<String, String> params = new HashMap<String, String>();
        SharedPreferences storage = context.getSharedPreferences(ReferralReceiver.PREFS_FILE_NAME, Context.MODE_PRIVATE);

        for(String key : ReferralReceiver.EXPECTED_PARAMETERS)
        {
            String value = storage.getString(key, null);
            if(value != null)
            {
                params.put(key, value);
            }
        }
        return params;
    }
} 
```

调试设备在 Android OS 2.3.4 上

通过应用程序主要活动中的一个简单的 TextView 和 Button，我尝试显示接收者捕获的推荐数据。这是呼叫和显示-

```
referraltext.setText(ReferralReceiver.retrieveReferralParams(this.getApplicationContext()).toString()); 
```

当我启动上面显示的 App B 的推荐链接时，转到 Google Play，安装它并第一次打开它 logcat 根本不显示广播 com.android.vending.INSTALL_REFERRER，因此显示的推荐数据显示为空细绳。

同时，当我在同一个广播接收器下面使用 adb 命令时，它就像一个魅力一样工作并显示推荐数据。

```
am broadcast -a com.android.vending.INSTALL_REFERRER -n com.locateme.android/.ReferralReceiver --es "referrer" "utm_source=tooyoou&utm_medium=banner&utm_term=foursquare&utm_content=foursquare-tooyoou&utm_campaign=foursquare-android" 
```

那么这是否意味着 Google Play 根本不广播推荐人数据和预期意图？

或者这是否意味着它只为正在安装的 App B 广播意图？

还是我做错了什么？

是否可以在 App B 不必在他们的 App 中插入我们的跟踪 SDK 或代码来与我们做广告的情况下实现这一点。

非常感谢您的帮助。

**附加信息 - 我们没有使用 Google Analytics SDK，因此我们使用的是自定义广播接收器，而不是 Google 的 BR**

> 上面的代码就像一个魅力。我只是在下面标记为正确的答案中遵循了 Lucas 的建议，并将 x-www-form-urlencoded 替换为 UTF-8。为什么我一开始不这样做是因为一家名为 Localytics 的移动分析公司在此处发布的内容 - [http://www.localytics.com/docs/android-market-campaign-analytics/](http://www.localytics.com/docs/android-market-campaign-analytics/)他们的代码有同样的问题。所以基本上我现在所拥有的是我在 Google Play 中发布的 Android 应用程序中的上述代码，然后从运行 ICS 的 Android 设备从 Google Play 下载该应用程序，打开它并单击 Retrieve Referral 并且它工作。免费试用，这里是链接 -[https://play.google.com/store/apps/details?id=com.locateme.android&referrer=utm_source%3Dtooyoou%26utm_medium%3Dbanner%26utm_term%3Dappdownload%26utm_content%3Dimage%26utm_campaign%3Dtooyooupromo](https://play.google.com/store/apps/details?id=com.locateme.android&referrer=utm_source%3Dtooyoou%26utm_medium%3Dbanner%26utm_term%3Dappdownload%26utm_content%3Dimage%26utm_campaign%3Dtooyooupromo)

我要重申的另一件非常重要的事情是，如果您使用网络上的 google play 在您的设备上远程安装应用程序，那么这种方式的 google play 活动推荐跟踪将不起作用。我已经对其进行了测试，这是 Google 的一个公开缺陷。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T21:15:37.417

上面的源代码不正确。

线

```
referrer = URLDecoder.decode(referrer, "x-www-form-urlencoded"); 
```

应该

```
referrer = URLDecoder.decode(referrer, "UTF-8"); 
```

android 文档对此并不清楚，但如果您使用 x-www-form-urlencoded 它将引发不受支持的编码异常......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T04:10:30.700

您还可以使用第三方跟踪，例如 Tunes 的移动应用跟踪。这将有助于 Android A 应用在安装 Android B 时获得回发。MAT、Appsflyer 等第三方工具是用于跟踪安装的最常用工具之一。

# ruby-on-rails - 我应该使用哪个 gem 来为我的社交网络应用程序提供登录过程？

> ID：10986321
> 
> 赞同：0
> 
> 时间：2012-06-11T19:28:43.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我正在为我的大学创建一个社交网站，我想知道我应该使用哪个 gem 来进行登录过程，或者是否有任何其他更安全的方式来实现登录过程。是否有可以指导我的文档或示例代码？

我听说过 Devise gem，但我不确定它是否适合我们，或者如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:36:30.577

绝对推荐[设计](https://github.com/plataformatec/devise)。它是由 Rails Jose Valim 的主要贡献者之一编写的。它非常易于使用，特别是如果您只使用非常合理的默认值。并且它保持最新 - 目前只有 7 个未解决的问题。对于一个拥有 6.4k 观察者的项目来说，这非常了不起。

有一个[入门指南](https://github.com/plataformatec/devise#getting-started)，其中包含您入门所需的一切。

还有一个[设计 wiki](https://github.com/plataformatec/devise/wiki/_pages) ，里面有很多例子。这里只是几个：

*   如何：禁止以前使用的密码
*   如何：在您的应用程序的任何位置显示自定义登录表单
*   如何：会话超时后不要重定向到登录页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:13:30.383

It largely depends on what features you're looking for. If you require a full-featured authentication solution (Registration, Forgot Password, Remember Me, Login) then either [devise](https://github.com/plataformatec/devise) or [Authlogic](https://github.com/binarylogic/authlogic) is recommended.

If you're just looking for a simple way to authenticate users (via login and password for example), you can just use the Rails built-in authentication via `has_secure_password`. Ryan Bates did a [RailsCast](http://railscasts.com/episodes/270-authentication-in-rails-3-1) on it not too long ago.

Whatever method you decide to go with just remember that without SSL its not secure.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:49:14.473

设计非常好。但是，我偏爱使用 NoamB 的 Sorcery gem。它就像滚动你自己和 Authlogic 之间的平衡。

在这里查看： [https ://github.com/NoamB/sorcery](https://github.com/NoamB/sorcery)

还有不错的railscast： [http ://railscasts.com/episodes/283-authentication-with-sorcery](http://railscasts.com/episodes/283-authentication-with-sorcery)

# xml - 从字符串中删除十六进制值 0x11

> ID：10986322
> 
> 赞同：-1
> 
> 时间：2012-06-11T19:28:48.667
> 
> 标签：xml, regex, hex

我有一个 XML 字符串，其中隐藏了一个 0x11 十六进制值，这破坏了我的 XmlDocument.LoadXml 调用。

有人可以告诉我如何在不遍历字符串的所有 50000 个字符的情况下找到并销毁这个 0x11。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:31:05.940

我以前需要这样做，这是我的逐字代码。它读取 LineNumber 和 LinePosition 属性以查找违规字符。

它仅在**en-US**中进行了测试，但我不确定这是否重要，因为它仅`0x`在异常消息中查找。

```
 internal static XmlDocument ParseWithRetry(ref string xml, string errorComment, int badCharRetryCount, Action<StringBuilder,XmlException,string> onXmlExceptionDelegate)
  {
     StringBuilder xmlBuff = null;
     if (badCharRetryCount < 0)
        badCharRetryCount = 0;
     XmlDocument doc = new XmlDocument();
     int attemptCount = badCharRetryCount + 1;
     for (int i = 0; i < attemptCount; i++)
     {
        try
        {
           doc.LoadXml(xml);
           break;
        }
        catch (XmlException xe)
        {
           if (xe.Message.Contains("0x"))
           {
              if (xmlBuff == null)
                 xmlBuff = new StringBuilder(xml);
              // else, it's already synchronized with xml... no need to create a new buffer.

              // Write to the log... or whatever the caller wants to do.
              if (onXmlExceptionDelegate != null)
                 onXmlExceptionDelegate (xmlBuff, xe, errorComment);

              // Remove the offending character and try again.
              int badCharPosition = GetCharacterPosition (xml, xe.LineNumber, xe.LinePosition);
              if (badCharPosition >= 0)
                 xmlBuff.Remove(badCharPosition, 1);
              xml = xmlBuff.ToString();
              continue;
           }
           throw;
        }
     }

     return doc;
  }

  static readonly char[] LineBreakCharacters = { '\r', '\n' };
  internal static int GetCharacterPosition (string xml, int lineNumber, int linePosition)
  {
     // LineNumber is one-based, not zero based.
     if (lineNumber == 1)
        return linePosition - 1;

     int pos = -1;
     // Skip to the appropriate line number.
     for (int i = 1; i < lineNumber; i++)
     {
        pos = xml.IndexOfAny(LineBreakCharacters, pos + 1);
        if (pos < 0)
           return pos; // bummer.. couldn't find it.
        if (xml[pos] == '\r' && pos + 1 < xml.Length && xml[pos + 1] == '\n')
           pos++; // The CR is followed by a LF, so treat it as one line break, not two.
     }
     pos += linePosition;
     return pos;
  } 
```

# javascript - 监听/监听 Ajax readyState

> ID：10986323
> 
> 赞同：0
> 
> 时间：2012-06-11T19:29:01.880
> 
> 标签：javascript, ajax

请看下面的代码：

```
function createXMLHttpRequestObject() {
    // will store the reference to the XMLHttpRequest object
    var ajaxRequest;
    // create the XMLHttpRequest object
    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
    // return the created object or display an error message
    if (!ajaxRequest) alert("Error creating the XMLHttpRequest object.");
    else return ajaxRequest;
}

function ajax_update() {
  var ajaxRequest = createXMLHttpRequestObject();

  ajaxRequest.onreadystatechange = function(){

    if(ajaxRequest.readyState != 4){ 
    ...
    }

    if(ajaxRequest.readyState == 4){
    //process JSON data
    }
  }
} 
```

我正在尝试从外部 ajax_update() 函数监视/侦听 ajaxRequest.readyState 值。ajax_update() 在按钮 onlick 上触发。

我的目标是在函数 ajax_update() 之外仅在所有 Ajax 调用完成时触发另一个 JS 函数，这意味着 ajaxRequest.readyState==4。

例如：

```
 <input type='button' value='SEND QUOTE' onclick=\"ajax_update(some params); function_that_fires_when_readystate_is_completed();\"> 
```

有任何想法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:58:13.207

```
ajaxRequest1.onreadystatechange = function(){

    if(ajaxRequest.readyState != 4){ 
    ...
    }

    if(ajaxRequest.readyState == 4){
    //process JSON data
       firstIsReady  = true;
       check();
    }
  }

ajaxRequest2.onreadystatechange = function(){

    if(ajaxRequest.readyState != 4){ 
    ...
    }

    if(ajaxRequest.readyState == 4){
    //process JSON data
       secondIsReady  = true;
       check();
    }
  }

function check() {
    if (firstIsReady && secondIsReady) {
        //both ajax calls completed
    }
} 
```

类似的东西。这真的很难看，但在不知道你想做什么的情况下，我无法给你一个更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:42:50.377

全局定义这个

```
 var requestCounter = 0; 
```

接着

```
function ajax_update() {
  var ajaxRequest = createXMLHttpRequestObject();
  //after calling request.open();
    requestCounter++;

  ajaxRequest.onreadystatechange = function(){  

    if(ajaxRequest.readyState != 4){ 
          requestCounter--;
          //error code here
    }

    if(ajaxRequest.readyState == 4){
        //process JSON data
          requestCounter--;
    }

     if (requestCounter == 0)
          onAllRequestComplete();
  }
}

     function onAllRequestComplete(){
        // code that have to run when all requests have been completed
     } 
```

希望有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:51:20.557

使用回调。

# JS

```
function ajax_update(callback) {
  var ajaxRequest = createXMLHttpRequestObject();
  ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
      callback();
    }
  };
  xmlhttp.open(...);
  xmlhttp.send(null);
} 
```

# HTML

```
<input onclick="ajax_update(function_that_listens_to_readyState);"> 
```

# python - 用正则表达式查找几个字符串

> ID：10986325
> 
> 赞同：1
> 
> 时间：2012-06-11T19:29:11.060
> 
> 标签：python, regex

我正在寻找一种用正则表达式匹配多个字符串的 OR 功能。

```
# I would like to find either "-hex", "-mos", or "-sig"
# the result would be -hex, -mos, or -sig
# You see I want to get rid of the double quotes around these three strings.
# Other double quoting is OK.
# I'd like something like.
messWithCommandArgs =  ' -o {} "-sig" "-r" "-sip" '
messWithCommandArgs = re.sub(
            r'"(-[hex|mos|sig])"',
            r"\1",
            messWithCommandArgs) 
```

这有效：

```
messWithCommandArgs = re.sub(
            r'"(-sig)"',
            r"\1",
            messWithCommandArgs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:32:50.350

方括号用于只能匹配单个字符的字符类。如果要匹配多个字符替代项，则需要使用组（括号而不是方括号）。尝试将您的正则表达式更改为以下内容：

```
r'"(-(?:hex|mos|sig))"' 
```

请注意，我使用了非捕获组`(?:...)`，因为您不需要另一个捕获组，但`r'"(-(hex|mos|sig))"'`实际上会以相同的方式工作，因为`\1`除了引号之外仍然是所有内容。

替代方案您可以使用`r'"-(hex|mos|sig)"'`并`r"-\1"`用作替代品（因为`-`不再是该组的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:32:51.520

您应该删除`[]`元字符以匹配`hex or mos or sig`.`(?:-(hex|mos|sig))`

# excel - .FindNext 在 .Find 函数后失败（excel vba）

> ID：10986326
> 
> 赞同：3
> 
> 时间：2012-06-11T19:29:27.443
> 
> 标签：excel, find, next, vba

我正在尝试使用`.Find`并`.FindNext`搜索单列数据。我首先需要找到包含值“Total”的第一个单元格。我试图到达的单元格是“总计”单元格之后的第三个单元格，其中包含值“技术”。可以肯定的是 Cells(1, 1) 不包含“Tech”或“Total”。

```
Dim FirstTotal As Range
Dim SearchRng As Range
Dim ResultRng As Range
Set SearchRng = Range("A:A")

Set FirstTotal = SearchRng.Find(What:="Total", After:=Cells(1, 1), SearchDirection:=xlNext)
Set ResultRng = SearchRng.Find(What:="Tech", After:=FirstTotal, SearchDirection:=xlNext)
SearchRng.FindNext().Activate
SearchRng.FindNext().Activate 
```

在我运行此代码的大约 50% 的时间里，我被以`Set ResultRng =`. 其余时间，代码一直运行，但结果看起来好像最后两行代码被完全忽略了。

我怀疑这里的答案非常基本，但我对 excel vba 还是很陌生，到目前为止我发现没有任何资源可以回答这个问题。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:13:05.033

Would this help?

**Topic**: .Find and .FindNext In Excel VBA

**Link**: [http://www.siddharthrout.com/2011/07/14/find-and-findnext-in-excel-vba/](http://www.siddharthrout.com/2011/07/14/find-and-findnext-in-excel-vba/)

**Extract From the link:**

```
Sub Sample()
    Dim oRange As Range, aCell As Range, bCell As Range
    Dim ws As Worksheet
    Dim ExitLoop As Boolean
    Dim SearchString As String, FoundAt As String
    On Error GoTo Err
    Set ws = Worksheets("Sheet3")
    Set oRange = ws.Columns(1)

    SearchString = "2"
    Set aCell = oRange.Find(What:=SearchString, LookIn:=xlValues, _
                LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
    If Not aCell Is Nothing Then
        Set bCell = aCell
        FoundAt = aCell.Address
        Do While ExitLoop = False
            Set aCell = oRange.FindNext(After:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                FoundAt = FoundAt & ", " & aCell.Address
            Else
                ExitLoop = True
            End If
        Loop
    Else
        MsgBox SearchString & " not Found"
    End If
    MsgBox "The Search String has been found at these locations: " & FoundAt
    Exit Sub
Err:
    MsgBox Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:14:12.903

如果未找到“Total”，则 FirstTotal 将为 Nothing，当您尝试将 FirstTotal 用于 ResultRange Find（第 2 行）中的“After”参数时，这将导致类型不匹配。这将防止该错误：

```
Set FirstTotal = SearchRng.Find(What:="Total", After:=Cells(1, 1), SearchDirection:=xlNext)
If Not FirstTotal is Nothing Then
   Set ResultRng = SearchRng.Find(What:="Tech", After:=FirstTotal, SearchDirection:=xlNext)
End If 
```

一般来说，任何依赖的 Find 都需要以这种方式处理。

显然，这里需要某种 Else 语句，但我不知道那会是什么。

# wordpress - 滑块 Wordpress 插件搜索

> ID：10986327
> 
> 赞同：0
> 
> 时间：2012-06-11T19:29:29.493
> 
> 标签：wordpress, search, plugins, slider

这是一个非常规的问题，但我试图在 wordpress 中找到一个特定的滑块。这个网站上的那个：

> [http://www.proulxcommunications.com/portfolio.php](http://www.proulxcommunications.com/portfolio.php)

三天以来我在插件库中查找并没有找到它。有谁知道或有技巧知道这个滑块插件是什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:06:17.153

可能是他们使用的模板，你检查过他们的源代码吗？

您是否尝试过适用于 WordPress 的 Nivo Slider 插件？

# scala - 在 Scala 中将列表 List[String, String] 转换为 List[String, List[String]]？

> ID：10986330
> 
> 赞同：3
> 
> 时间：2012-06-11T19:29:48.157
> 
> 标签：scala, functional-programming

我想列出一个列表`RawDoc`，每个列表都有一个`title`和一个`version`，并将其转换为一个列表`Doc`，每个列表都有一个`title`，并且所有这些都`versions`收集到一个列表中：

```
case class RawDoc(title:String, version:String)
case class Doc(title:String, versions:List[String])

val rawDocs:List[RawDoc] = List(
  RawDoc("Green Book", "1.1"),
  RawDoc("Blue Book",  "1.0"),
  RawDoc("Green Book", "1"),
  RawDoc("Blue Book",  "2")
) 
```

我想从上面开始`rawDocs`并像这样创建`docs`：

```
val docs:List[Doc] = List(
  Doc("Green Book", List("1.1", "1")),
  Doc("Blue Book",  List("1.0", "2"))
) 
```

如果不使用 for 循环，如何在 Scala 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:37:24.807

这应该有效：

```
val docs = rawDocs.
  groupBy(_.title).map{
    case(title, docsWithSameTitle) => 
      Doc(title, docsWithSameTitle.map(_.version))
  } 
```

`"Blue Book"`如果和之间的区别`"Blue BooK"`不是偶然的错字，它们应该被视为平等：

```
val docs = rawDocs.
  groupBy(_.title.toUpperCase).map{
    case(_, docsWithSameTitle) => 
      Doc(docsWithSameTitle.head.title, docsWithSameTitle.map(_.version))
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T20:48:51.383

```
rawDocs.groupBy(_.title).mapValues(_ map (_.version)).map { 
  case (title, versions) => Doc(title, versions) 
} 
```

# java - 应用评估器对我来说无法正常工作

> ID：10986332
> 
> 赞同：0
> 
> 时间：2012-06-11T19:30:01.113
> 
> 标签：java, android, class, rate

有人可以检查这个应用程序评估代码并告诉我如何在客户请求时将其关闭，但在客户按下相同的返回按钮后不马上回来，至少在满足所有条件之前给他们 5 次尝试，谢谢

```
public class AppRater {
private final static String APP_TITLE = "name";
private final static String APP_PNAME = "com.code.code";

private final static int DAYS_UNTIL_PROMPT = 1;
private final static int LAUNCHES_UNTIL_PROMPT = 1;

public static void app_launched(Context mContext) {
    SharedPreferences prefs = mContext.getSharedPreferences("apprater", 0);
    if (prefs.getBoolean("dontshowagain", false)) { return ; }

    SharedPreferences.Editor editor = prefs.edit();

    // Increment launch counter
    long launch_count = prefs.getLong("launch_count", 0) + 1;
    editor.putLong("launch_count", launch_count);

    // Get date of first launch
    Long date_firstLaunch = prefs.getLong("date_firstlaunch", 1);
    if (date_firstLaunch == 1) {
        date_firstLaunch = System.currentTimeMillis();
        editor.putLong("date_firstlaunch", date_firstLaunch);
    }

 // Wait at least n days before opening
    if (launch_count >= LAUNCHES_UNTIL_PROMPT) {
        if (System.currentTimeMillis() >= date_firstLaunch +
                (DAYS_UNTIL_PROMPT * 0 * 24 * 60 * 1000)) {
            showRateDialog(mContext, editor);
        }
    }

    editor.commit();
}  

public static void showRateDialog(final Context mContext, final SharedPreferences.Editor editor) {
    final Dialog dialog = new Dialog(mContext);
    dialog.setTitle("Rate " + APP_TITLE);

    LinearLayout ll = new LinearLayout(mContext);
    ll.setOrientation(LinearLayout.VERTICAL);

    TextView tv = new TextView(mContext);
    tv.setText("If you enjoy using " + APP_TITLE + ", please take a moment to rate it. Thanks for your support!");
    tv.setWidth(600);
    tv.setPadding(24, 0, 24, 60);
    ll.addView(tv);

    Button b1 = new Button(mContext);
    b1.setText("Rate " + APP_TITLE);
    b1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + APP_PNAME)));
            dialog.dismiss();
        }
    });       
    ll.addView(b1);

    Button b2 = new Button(mContext);
    b2.setText("Remind me later");
    b2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();

        }
    });
    ll.addView(b2);

    Button b3 = new Button(mContext);
    b3.setText("No, thanks");
    b3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (editor != null) {
                editor.putBoolean("dontshowagain", true);
                editor.commit();
            }
            dialog.dismiss();
        }
    });
    ll.addView(b3);

    dialog.setContentView(ll);       
    dialog.show();       
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:05:07.950

这里有一些奇怪的东西

```
DAYS_UNTIL_PROMPT * 0 * 24 * 60 * 1000 
```

不应该吗？

```
DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000 
```

您还可以使用 DialogBu​​ilder 按钮选项代替手动创建按钮。这是一个例子：

```
builder.setPositiveButton(R.string.rate_dialog_ok, new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
            }
       });
builder.setNegativeButton(R.string.rate_dialog_never, new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {

           }
       });
builder.setNeutralButton(R.string.rate_dialog_later, new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {

       }
   }); 
```

# sql - 获取一个时间范围内的每小时

> ID：10986344
> 
> 赞同：6
> 
> 时间：2012-06-11T19:30:52.980
> 
> 标签：sql, sql-server, sql-server-2008-r2

所以我想要的是生成特定时间范围内的所有时间。

因此，鉴于上午 11 点到下午 2:00 的范围，我会得到：

```
 11:00 AM
 12:00 PM
 1:00 PM
 2:00 PM 
```

我试图避免必须存储商店可能开放的每个特定时间而只存储范围（我需要将时间与其他时间进行比较）

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T20:02:41.100

不需要循环、递归 CTE 或数字表。

```
DECLARE 
  @start TIME(0) = '11:00 AM', 
  @end   TIME(0) =  '2:00 PM';

WITH x(n) AS 
(
  SELECT TOP (DATEDIFF(HOUR, @start, @end) + 1) 
  rn = ROW_NUMBER() OVER (ORDER BY [object_id]) 
  FROM sys.all_columns ORDER BY [object_id]
)
SELECT t = DATEADD(HOUR, n-1, @start) FROM x ORDER BY t; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T19:51:07.470

您可以使用递归 CTE。这将生成 11 到 14 之间的时间：

```
;with   Hours as
        (
        select  11 as hr
        union all
        select  hr + 1
        from    Hours
        where   hr < 14
        )
select  *
from    Hours 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/d41d8/1658/0)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T19:41:59.043

如果您有一个[数字表](http://dataeducation.com/you-require-a-numbers-table/)（如果没有，请单击链接创建一个）...

```
create table test(
    startTime time
,   endTime time
)

insert into test
select '11:00', '14:00'

select
    dateadd(hh, n.n, t.startTime) as times
from test t
  inner join Numbers n
    -- assuming your numbers start at 1 rather than 0
    on n.n-1 <= datediff(hh, t.startTime, t.endTime) 
```

如果这是专门的，您可以创建一个只有 24 个值的小时表。

```
create table HoursInADay(
    [hours] time not null
,   constraint PK_HoursInADay primary key ([hours])
)

-- insert
insert into HoursInADay select '1:00'
insert into HoursInADay select '2:00'
insert into HoursInADay select '3:00'
insert into HoursInADay select '4:00'
insert into HoursInADay select '5:00'
insert into HoursInADay select '6:00'
insert into HoursInADay select '7:00'
...

select
    h.[hours]
from test t
  inner join HoursInADay h
    on h.[hours] between t.startTime and t.endTime 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-11T19:36:26.693

我能想到的最简单的方法是只有一张带有所有时间列表的永久表；共 24 个条目。

```
Create table dbo.Hours (Hourly_Time Time NOT NULL)
Insert into dbo.Hours ... 
```

然后，给定时间 A 和 B：

```
select * from dbo.Hours where Hourly_Time<=A and Hourly_Time>=B 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-27T17:03:46.660

@Andomar 非常感谢，您帮助了我，我在您的代码上方添加了内容。

```
*----------------------------

create view vw_hoursalot as 
  with Hours as
  (
      select DATEADD(
        dd, 0, DATEDIFF(
              dd, 0, DATEADD (
                    year , -5 , getDate() 
                  )
            )
      ) as dtHr
    union all
      select DATEADD (minute , 30 , dtHr ) 
        from Hours
        where dtHr < DATEADD(
            dd, 0, DATEDIFF(
                  dd, 0, DATEADD (
                        year , +5 , getDate() 
                      )
                )
        )
  )  
  select * from Hours
----------------------------  
select * from vw_hoursalot option (maxrecursion 0)
----------------------------* 
```

# java - Java - 在线点

> ID：10986346
> 
> 赞同：2
> 
> 时间：2012-06-11T19:31:11.060
> 
> 标签：java, line, point

我如何确定一个点（x，y）是否在其他两个点之间创建的线上？我试过这个，但似乎有问题，因为我没有得到我应该得到的结果。

```
public boolean intersects(Point k, Point z, Point p) {

        Line2D line = new Line2D.Float(k.x, k.y, z.x, z.y);

        if (line.ptLineDist(p) == 0) {
            return true;
        } else {
            return false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:45:31.657

试试这个，考虑到 Hovercraft 关于浮点数不精确的注释。

```
public boolean intersects(Point k, Point z, Point p) {
       return new Line2D.Float(k, z).ptLineDist(p) <= 0.01;
} 
```

# php - 致命错误，找不到类

> ID：10986348
> 
> 赞同：0
> 
> 时间：2012-06-11T19:31:12.300
> 
> 标签：php

我从教程中获取了这段代码，并对其进行了编辑，使其适合我的需要。

```
<?php
//if we got something through $_POST
if (isset($_POST['search'])) {
    // here you would normally include some database connection
    include('config2.php');
    $db = new db();
    // never trust what user wrote! We must ALWAYS sanitize user input
    $word = mysql_real_escape_string($_POST['search']);
    // build your search query to the database
    $sql = "SELECT name FROM $tbl_name WHERE name LIKE '%" . $word . "%'";
    // get results
    $row = $db->select_list($sql);
    if(count($row)) {
        $end_result = '';
        foreach($row as $r) {
            $result         = $r['title'];
            // we will use this to bold the search word in result
            $bold           = '<span class="found">' . $word . '</span>';
            $end_result     .= '<li>' . str_ireplace($word, $bold, $result) . '</li>';
        }
        echo $end_result;
    } else {
        echo '<li>No results found</li>';
    }
}
?> 
```

运行代码时出现此错误：

```
Fatal error: Class 'db' not found in /home/peltdyou/public_html/do_search.php on line 6 
```

我对 PHP 很陌生，所以任何人都可以对我的问题有所了解..

更新：

```
<?php   

    class db {

    function __construct()
    {
        global $dbh;
        if (!is_null($dbh)) return;
        $dbh = mysql_pconnect(DB_HOST, DB_USER, DB_PASSWORD);
        mysql_select_db(DB_NAME);
        mysql_query('SET NAMES utf8');
    }

    function select_list($query)
    {
        $q = mysql_query($query);
        if (!$q) return null;
        $ret = array();
        while ($row = mysql_fetch_array($q, MYSQL_ASSOC)) {
            array_push($ret, $row);
        }
        mysql_free_result($q);
        return $ret;
    }   
 } 
?> 
```

这是 db.php 代码。我想通过用我自己的 config2.php 文件替换它，我可以让它连接到我的数据库。显然不是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:41:28.857

我想我找到了您使用的示例脚本，在其中，他们说：

```
// here you would normally include some database connection
include('db.php'); 
```

在示例中，没有描述 db.php，假设您有这样一个您将使用的数据库文件。进一步搜索，我发现了这个[数据库类](http://scriptperfect.com/2009/09/php-database-class-the-right-way/)，他们称之为“database.php”，但您可以轻松地将它用于您正在尝试使用的代码。

# f# - 或模式匹配

> ID：10986353
> 
> 赞同：3
> 
> 时间：2012-06-11T19:31:26.887
> 
> 标签：f#, pattern-matching

我正在尝试使用 OR 模式，如此[处](http://msdn.microsoft.com/en-us/library/dd547125.aspx)所述：

```
let foo = function
    | Some (0, x) when x > 0 | None -> "bar"
    | _ -> "baz" 
```

但是，这会产生编译器错误：

> 错误 FS0010：意外符号“|” 在模式匹配中。应为“->”或其他标记。

我究竟做错了什么？跟`when`门卫有关系吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T19:34:42.500

守卫指的`when`是单个案例，无论组合了多少模式。需要区分的情况：

```
let foo = function
  | Some (0, x) when x > 0 -> "bar"
  | None -> "bar"
  | _ -> "baz" 
```

出于这个原因，最好将返回值分解出来，这样就不会重复可能复杂的表达式：

```
let foo value =
  let ret = "bar"
  match value with
  | Some (0, x) when x > 0 -> ret
  | None -> ret
  | _ -> "baz" 
```

使用活动模式是避免此类重复的另一种方法：

```
let (|Bar|_|) = function
  | Some(0, x) when x > 0 -> Some()
  | None -> Some()
  | _ -> None

let foo = function
  | Bar -> "bar"
  | _ -> "baz" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:36:55.480

您将需要两个单独的匹配案例，因为这两个案例绑定了不同的变量集（`x`分别没有绑定）：

```
| Some(0, x) when x>0 -> "bar"
| None -> "bar" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T19:57:31.523

当您只想以非常复杂的模式保护标签的特定绑定时，我有时会使用一个不错的技巧，即使用我自己的活动模式和`&`( `and`) 模式运算符：

```
let (|GreaterThan|_|) lowerLimit n =
    if n > lowerLimit then Some () else None

let (|LesserThan|_|) upperLimit n =
    if n < upperLimit then Some () else None

let (|GreaterOETo|_|) lowerLimit n =
    if n >= lowerLimit then Some () else None

let (|LesserOETo|_|) upperLimit n =
    if n <= upperLimit then Some () else None

let (|InRange|_|) (lowerLimit, upperLimit) n =
    if n >= lowerLimit && n <= upperLimit then Some () else None

let (|Even|Odd|) n =
    if n % 2 = 0 then
        Even (n / 2)
    else
        Odd (n / 2)

type Union =
    | A of int
    | B of int
    | A' of int

let getSpecialCases = function
    | A (Even (x & GreaterThan 4 & LesserOETo 16))
    | A (Odd (x & GreaterThan 0))
    | B (x & LesserOETo 0)
    | A' (Even (x & InRange (5, 16)))
    | A' (Odd (x & GreaterThan 0)) -> Some x
    | _ -> None 
```

当然，您可以为活动模式包装器创建一个函数：

```
let (|P|_|) pred x =
    if pred x then Some () else None

let ``match`` = function
    | Even (x & pred (fun x -> x >= 7 && x <= 54)) -> Some x
    | _ -> None 
```

# jquery - 让 jquery ui timepicker 不在模式中自动打开

> ID：10986362
> 
> 赞同：1
> 
> 时间：2012-06-11T19:32:17.283
> 
> 标签：jquery, jquery-ui-dialog, timepicker

我试图让时间选择器（[这个](http://fgelinas.com/code/timepicker/)）在模式对话框中时不会自动打开。

[这是](http://jsfiddle.net/9DwED/)一个演示问题的js小提琴。如果我在模式之外有一个文本框，并在其上调用 .timepicker，它不会立即打开。如果我打开包含另一个时间选择器的模式对话框，它已经打开了。任何人都知道我可以解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:44:22.567

将 tabindex="-1" 添加到模式中的输入字段。经过一番挖掘，我了解到 jQuery 对话将选择第一个输入字段。当输入字段获得焦点时，它会激活时间选择器。以下是有关该主题的一些有趣的读物：

[防止 jQuery UI 对话框将焦点设置到第一个文本框](https://stackoverflow.com/questions/1202079/prevent-jquery-ui-dialog-from-setting-focus-to-first-textbox)

[http://bugs.jqueryui.com/ticket/4731](http://bugs.jqueryui.com/ticket/4731)

# openstack - 将 Pydev 设置为与 Openstack 一起使用

> ID：10986363
> 
> 赞同：2
> 
> 时间：2012-06-11T19:32:24.203
> 
> 标签：openstack

我目前正在研究 OpenStack，并想了解可用于调试在 VM 上运行时出现的不同问题的开发环境。通过开发环境，我指的是可以帮助我理解 OpenStack 的功能和调用流程的 IDE。我在我的机器上安装了带有 Eclipse 的 Pydev，但我不知道如何在 Pydev 中一起运行所有 Openstack 守护进程（nova-api、nova-compute、nova-network、glance-api 等）。

任何帮助将非常感激。

（PS：我现在试图避免使用 pdb，因为 Pydev 可以让我更方便地查看代码和我在其中的位置......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:46:06.950

看起来这个问题也在 OpenStack 开发邮件列表上被问到线程[[OpenStack] Development/Debugging](http://openstack.markmail.org/thread/ofrr6xpei7gprzs3)那里有一些答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T11:02:10.627

我对 OpenStack 不熟悉，但如果你可以使用 pdb，你绝对可以以同样的方式使用 PyDev 远程调试器：http: [//pydev.org/manual_adv_remote_debugger.html](http://pydev.org/manual_adv_remote_debugger.html)

# powershell - 如何使用 powershell 将不同的计数器通过管道传输到表中？

> ID：10986368
> 
> 赞同：0
> 
> 时间：2012-06-11T19:33:02.313
> 
> 标签：powershell, pipe

在 Powershell 中，我试图获取进程的计数器（winword.exe），然后将它们放入一个表中，如下所示：

```
进程名称 CPU 使用率(%) 内存使用率(KB)
winword.exe 20% 234524324
winword.exe 15% 123343443
……

```

我可以使用 get-counter \process(winword*)... 获取计数器，但是即使我选择格式表，这也会将每个单独的计数器信息显示为列表。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:00:09.900

这是完全按照您要求的方式格式化的脚本：

```
$a = @{Expression={$_.Name};Label="Process Name";width=15}, `
@{Expression={$_.ID};Label="Process ID";width=15}, `
@{Expression={$_.CPU};Label="CPU Utilization(%)";width=18}, `
@{Expression={$_.VM};Label="Virtual Memory(K)";width=18} 

Get-Process | Format-Table $a 
```

只需将上面保存为脚本，然后在 Powershell 中运行，您将看到如下结果：

```
Process Name         Process ID CPU Utilization(%)  Virtual Memory(K)
------------         ---------- ------------------  -----------------
chrome                     7080         65.8636222          340889600
chrome                     7668          0.8268053          199081984
chrome                     8512          4.3836281          168914944 
```

您可以根据需要修改脚本以添加/删除更多列和格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:32:31.513

您也可以使用`-hidetableheaders`.

# chef-infra - 如何使用 Chef 配置服务器？

> ID：10986371
> 
> 赞同：2
> 
> 时间：2012-06-11T19:33:18.493
> 
> 标签：chef-infra

我对 Chef 很陌生，第一次尝试使用它来配置服务器。我想使用 chef solo 在远程服务器上运行以下命令。

```
 sudo apt-get install python-pip    
   sudo apt-get install gcc    
   sudo pip install scrapy    
   sudo apt-get install python-dev    
   sudo apt-get install libxml2-dev libxslt-dev    
   sudo pip install scrapy    
   sudo pip install storm    
   sudo apt-get install MySQLdb    
   sudo apt-get install python-imaging 
```

然后将我的 python 代码复制到服务器上的 ~/project 目录中。谁能帮我解决一下。我已经下载了 python、apt 和 build-essentials 的食谱。我正在阅读文档，但无法将所有内容联系在一起以解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:18:48.700

`chef-solo`据我了解，当通过 SSH 连接到远程主机时必须运行的命令行工具也是如此。我知道没有办法远程运行它。远程运行它更多的是目标`chef-client`和`chef-server`

基本上你有两个不同的东西。你需要安装一些系统包和一些python包。

我会寻找社区食谱来安装这些系统包，但它们中的大多数都是微不足道的，所以它们可能不存在。

我认为没有 python 包的资源。( [http://wiki.opscode.com/display/chef/Resources](http://wiki.opscode.com/display/chef/Resources) )

所以你可能不得不用 bash 来伪造它。

所以这就是你需要做的。

为要安装的每个系统包制作一本说明书

为您关心的（可选的每个）python 事物制作一本食谱（这取决于相应的系统库）

将上述说明书聚合成一个角色

你的系统库食谱看起来很无聊

-- 食谱/python-imaging/default.rb

```
include_recipe "python-imaging::install" 
```

--

食谱/python-imaging/install.rb

```
case node["platform"]
when "ubuntu", "debian"
package "python-imaging"
else
raise "Unsupported platform #{node["platform"]}"
end 
```

--

然后制作一个看起来像的角色

```
{
"run_list": [
"recipe[python-imaging]",
"recipe[another-cookbook]"
]
} 
```

# c++ - Mersenne Twister 种子没有效果

> ID：10986373
> 
> 赞同：0
> 
> 时间：2012-06-11T19:33:30.600
> 
> 标签：c++, random, mersenne-twister

所以我有一个使用 Mersenne Twister 的自定义随机器类（我使用的代码改编自[这个站点](http://eternallyconfuzzled.com/tuts/algorithms/jsw_tut_rand.aspx)）。一切似乎都运行良好，直到我开始测试不同的种子（我通常使用 42 作为种子，以确保每次运行我的程序时，结果都是相同的，因此我可以看到代码更改如何影响事物）。

事实证明，无论我选择什么种子，代码每次都会产生完全相同的数字序列。显然我做错了什么，但我不知道是什么。这是我的种子功能：

```
void Randomizer::Seed(unsigned long int Seed)
{
    int ii;
    x[0] = Seed & 0xffffffffUL;
    for (ii = 0; ii < N; ii++)
    {
        x[ii] = (1812433253UL * (x[ii - 1] ^ (x[ii - 1] >> 30)) + ii);
        x[ii] &= 0xffffffffUL;
    }
} 
```

这是我的 Rand() 函数

```
unsigned long int Randomizer::Rand()
{
    unsigned long int Result;
    unsigned long int a;
    int ii;

    // Refill x if exhausted
    if (Next == N)
    {
        Next = 0;

        for (ii = 0; ii < N - 1; ii++)
        {
            Result = (x[ii] & U) | x[ii + 1] & L;
            a = (Result & 0x1UL) ? A : 0x0UL;
            x[ii] = x[( ii + M) % N] ^ (Result >> 1) ^ a;
        }

        Result = (x[N - 1] & U) | x[0] & L;
        a = (Result & 0x1UL) ? A : 0x0UL;
        x[N - 1] = x[M - 1] ^ (Result >> 1) ^ a;
    }
    Result = x[Next++];

    //Improves distribution
    Result ^= (Result >> 11);
    Result ^= (Result << 7) & 0x9d2c5680UL;
    Result ^= (Result << 15) & 0xefc60000UL;
    Result ^= (Result >> 18);

    return Result;
} 
```

各种值是：

```
#define A 0x9908b0dfUL
#define U 0x80000000UL
#define L 0x7fffffffUL

int Randomizer::N = 624;
int Randomizer::M = 397;
int Randomizer::Next = 0;
unsigned long Randomizer::x[624]; 
```

谁能帮我弄清楚为什么不同的种子不会产生不同的数字序列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:37:25.020

您的 Seed() 函数分配给`x[0]`，然后在 开始循环`ii=0`，它用未定义的值覆盖`x[0]`（它引用`x[-1]`）。从 1 开始循环，您可能已经准备就绪。

编写自己的随机化器是危险的。为什么？很难做到正确（见上文），很难知道你是否做对了，如果做错了，依赖正确分布的随机数的事情将无法正常工作。希望那东西不是尾巴很重要的密码学或统计建模……考虑使用[std::random](http://en.cppreference.com/w/cpp/numeric/random)，或者如果您还没有使用 C++11，请使用[boost::random](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_random.html)。

# struts2 - 无法使用 struts 2 加载任何页面。web.xml 的问题

> ID：10986375
> 
> 赞同：2
> 
> 时间：2012-06-11T19:33:47.943
> 
> 标签：struts2

我正在尝试使用 struts 2 运行[此](http://www.vaannila.com/struts-2/struts-2-example/object-backed-java-beans-example-1.html)示例。我将库插入到 Eclipse 中动态 Web 项目的 Web-Inf 的 Lib 文件夹中。

我的 Web.xml 现在看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>
                org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

我创建了 struts.xml 并将其放在源文件夹中，其内容是

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default">
        <action name="UserAction" class="struts.UserAction">
            <result name="input">/index.jsp</result>
            <result name="success">/result.jsp</result>
        </action>
    </package>
</struts> 
```

所以现在当我运行任何 jsp 时，我在 Eclipse 控制台中得到以下错误

> > 无法加载配置。- bean - jar:file:/D:/Users/Don/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/Mscs674-Struts2/WEB-INF/lib/struts2-gxp -plugin-2.3.4.jar!/struts-plugin.xml:8:162

这在网页上

```
HTTP Status 404 -

type Status report

message

description The requested resource () is not available. 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:57:03.813

我发现创建 struts 2 应用程序的最佳方法是使用 struts-blank.jar 文件。它为您完成了所有必需的配置，您可以删除一些示例文件。它将为您创建所有 jar 和 xml 文件。如果您仍然有问题，请立即尝试执行此操作...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T12:13:14.113

首先删除所有jar（添加所有lib不是解决方案）

只添加必要的库

所以问题是你有太多的库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:41:56.370

好像有些罐子不见了.. !!

常见的依赖是::

```
commons-fileupload-1.2.1.jar
- commons-io-1.3.2.jar
- commons-logging-1.0.4.jar
- commons-logging-api-1.1.jar
- freemarker-2.3.15,jar
- log4j-1.2.14.jar
- ognl-2.7.3.jar
- xwork-core-2.1.6.jar 
```

检查版本号并将 jars 添加到类路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T20:34:50.903

你做一件事..添加**javassist-3.11.0.GA.jar**文件。它会删除你的错误，比如

```
Dispatcher initialization failed java.lang.RuntimeException:
java.lang.reflect.InvocationTargetException .. 
```

我希望这能帮到您..

# opengl - OpenGL 是否足够稳定，可以 24/7 运行程序？

> ID：10986376
> 
> 赞同：3
> 
> 时间：2012-06-11T19:33:57.807
> 
> 标签：opengl, freepascal

我正在创建一个 24/7 运行的 GUI 程序。我在网上找不到太多关于这个主题的信息，但是 OpenGL 是否足够稳定，可以连续数周 24/7 运行而不会出现泄漏、崩溃等问题？

在深入研究使用 OpenGL 之前，我是否应该有任何顾虑或需要调查的内容？

我知道 OpenGL 和 DirectX 主要用于不长时间使用的游戏或其他程序。希望这里的人对此有一些经验或对该主题有一些了解。谢谢。

编辑：抱歉缺少细节。这只会进行 2D 渲染，而且不会太重，我现在拥有的（与生产类似）已经在我的 i5 笔记本电脑上以 900-1000 FPS 稳定运行，配备 Radeon 6850m

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:39:36.167

进入`OpenGL`只是为了让`GUI`声音听起来很疯狂。如果您担心内存泄漏等问题，您应该更担心您使用的语言。请记住，`C/C++`您自己管理内存。

此外，您真的需要`GUI`24/7 全天候运行吗？如果您正在制作一种服务类型的应用程序，您不妨将其留在后台并制作第二个应用程序，该应用程序提供`GUI`. 这两个应用程序将通过 soma `IPC`（套接字？）进行通信。这就是这种事情通常的工作方式，而不是一直打开窗口。

归根结底，内存泄漏不是某些图形库造成的，而更多是程序员编写了糟糕的代码。该库应该是内存泄漏/崩溃的可能原因列表中的最后一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T21:21:01.300

我在一家使用 Delphi 制作（基于 Windows）质量保证软件（机器视觉）的公司工作。

主操作屏幕以高达 20 fps (2 x 10 fps) 的速度显示带有 opengl 覆盖的摄像机图像，并且基本上具有无限的正常运行时间（最长的正常运行时间接近一年，更长的正常运行时间由于维护而断电）。高速摄像机的显示速率会受到限制。

不过，我会在一段时间内避免来自英特尔的集成视频。从 i5 开始，它满足了我们的最低要求（主要不是 2 纹理的幂），但最初的驱动程序很糟糕，虽然它们有所改进，但偶尔仍然存在稳定性和规律性问题。

# ruby-on-rails - 在黄瓜测试中检查网页内容

> ID：10986388
> 
> 赞同：3
> 
> 时间：2012-06-11T19:34:46.370
> 
> 标签：ruby-on-rails, selenium, cucumber, capybara, bdd

我开始探索 BDD 和 Cucumber。所以我想检查我的页面是否显示我拥有的 2 篇文章的内容。这是我正在使用检查内容是否存在的步骤：

```
Then /^I should see "([^"]*)"$/ do |desc|
 page.should have_content desc

 expected = Article.find_by_description(desc)
 page.should have_content(expected.navision_code)
 page.should have_content(expected.category.name)
end 
```

通常这应该可以解决我猜的问题，但是当我运行测试时，我收到了以下错误消息：

```
expected there to be content "---\n- tenetur\n" in "Alfa Paints Order System\n\n\n\nAlfa Paints\n\n\n\nSeth abernathy, admin\n\n\nVerander paswoord\n\nLogout\n\n\n\n\n\n\n\n\n\n\n\nAlfa Paints\nordering system\n\n\n\n\n\nOverzicht van alle artikelen\n\n\n\nBack\n\n\n\n\n\n\nProduct ID\nBeschrijving\nCategorie\n3001\nPaint\n---\n- tenetur\n\n3002\nBrush\n---\n- tenetur\n\n\n\n\n\n\n\n\n\n\n
(RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/admin_articles_steps.rb:41:in `/^I should see "([^"]*)"$/'
features/admin_articles.feature:10:in `Then I should see "Paint"' 
```

正如你所看到的，我期待绘画，错误消息显示内容里面有绘画。但不知何故，黄瓜不认识它。

我是黄瓜的新手，我可能错过了一些东西，但也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:22:09.940

您同时测试三件事，因此很难判断哪个期望失败了。作为第一步，尝试注释掉除第一个期望之外的所有内容，以确保它在您认为的地方失败。

```
Then /^I should see "([^"]*)"$/ do |desc|
 page.should have_content desc

// expected = Article.find_by_description(desc)
// page.should have_content(expected.navision_code)
// page.should have_content(expected.category.name)
end 
```

如果您仍然有同样的问题，请添加调试器，以便您可以试验并从测试环境中查看发生了什么。如果您计划进行大量黄瓜测试，这是一项值得发展的技能。

```
Then /^I should see "([^"]*)"$/ do |desc|
 debugger
 page.should have_content desc
end 
```

从调试控制台，查看 desc 变量和页面的样子：

```
p desc
p page.content 
```

# iphone - UINavigation 显示第三个视图

> ID：10986389
> 
> 赞同：0
> 
> 时间：2012-06-11T19:34:59.877
> 
> 标签：iphone, ios, uinavigationcontroller

我有一个应用程序，它利用情节提要中的 UINavigation 控制器通过两个 UITableViews 来访问详细信息视图。我想跳过第二个表视图并直接进入详细视图。当用户点击“返回”时，他们应该会看到第二个表格视图。

如果我使用

```
 [self.navigationController pushViewController:secView animated:NO];
    [self.navigationController pushViewController:thirdView animated:YES]; 
```

应用程序出错了，我得到了

```
nested push animation can result in corrupted navigation bar
2012-06-11 15:02:23.695 App[3853:f803] Finishing up a navigation transition in an      unexpected state. Navigation Bar subview tree might get corrupted. 
```

我试过了

```
 [self navigationController].viewControllers = [NSArray arrayWithObjects: dest, detView, nil];
    [[self navigationController] popToViewController:detView animated:YES]; 
```

这个工作正常，但我无法回到第一个视图。后退按钮不见了。

我想请一些指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:54:40.730

好的，考虑到这一点，我想出了一个不同的答案：

```
NSMutableArray *viewControllers = [self.navigationController.viewControllers mutableCopy];
[viewControllers addObject:secView];
[viewControllers addObject:thirdView];
[self.navigationController setViewControllers:viewControllers animated:YES];
[viewControllers release]; 
```

# php - PHP 默认参数函数调用

> ID：10986392
> 
> 赞同：12
> 
> 时间：2012-06-11T19:35:13.933
> 
> 标签：php, function, language-design, default-value

在 php 中，我们可以像这样将默认参数传递给函数

```
function func_name(arg1,arg2=4,etc...) { 
```

但据我了解，我们不能传递函数调用，所以这是非法的：

```
function func2_name(arg1,arg2=time(),etc...) { 
```

所以当我想做一个函数值时（想象像时间函数，值不能在运行时之前知道）我必须做一些像这样的混乱工作：

```
function func3_name(arg1,arg2=null,etc...) {
    if(arg2==null) arg2 = time(); 
```

我想知道是否有人知道一种更好的方法，一种将函数调用值作为默认参数传递给 php 的更简洁的方法？谢谢。

在 php 语言设计中还有什么根本原因不允许函数调用作为默认参数（比如它在预处理中做了一些特殊的事情吗？）或者这会成为未来版本的一个特性吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T19:37:51.373

嗯，简短的回答是，据我所知，没有更好的方法可以做到这一点。但是，您可以通过使用三元运算符使它看起来更整洁一些。

```
function func3_name(arg1,arg2=null,etc...) {
  arg2 = (arg2==null ? time() : arg2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-12T03:42:21.913

康纳是 100% 正确的；但是，从 PHP 7 开始，您现在可以使用[null coalesce 运算符](https://lornajane.net/posts/2015/new-in-php-7-null-coalesce-operator)。

IE

```
$arg2 = $arg2 ?? time(); 
```

只是一种更短，可以说更干净的方式来编写它。

# hadoop - 在 PIG 中加入使用“合并”

> ID：10986394
> 
> 赞同：1
> 
> 时间：2012-06-11T19:35:21.717
> 
> 标签：hadoop, apache-pig, hdfs

我是 Hadoop/PIG 初学者。

谁能告诉我两者之间的区别

```
grunt> A = join A by $1, B by $1 using 'merge'; 
```

并且
grunt> A = 加入 A 1 美元，B 1 美元；

我有 2 个文件 1.txt 和 2.txt 有以下数据
1.txt
A 1
B 3
C 5
D 7

2.txt
AA 1
BB 2
CC 4
DD 6

我希望输出像这样合并在一起
A 1
AA 1
BB 2
B 3
CC 4
C 5
DD 6
D 7

“使用'合并'”会给我想要的输出吗？

我试过了，但事实并非如此。

你能告诉我我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:16:02.403

听起来您正在获得内部联接（通过公共键联接的数据集）而不是外部联接（这是您从所需输出中得到的样子）。

使用 word 关键字`FULL`表示您想要一个完整的外部联接：

```
grunt> A = join A by $1 FULL, B by $1 using 'merge'; 
```

但是，如果您在两个数据集中都有一条具有相同 $0 的记录，这可能会产生意外结果（请参阅内部连接示例）。您可能还需要修改输出以删除两个数据集之间的缺失列。

或者，如果您只想将一个数据集附加到另一个数据集，然后排序，请使用 UNION 和 ORDER BY 运算符

```
grunt> U = UNION A, B;
grunt> OrderedU = ORDER U BY $1 
```

看

*   [http://pig.apache.org/docs/r0.9.2/basic.html#join-inner](http://pig.apache.org/docs/r0.9.2/basic.html#join-inner)
*   [http://pig.apache.org/docs/r0.9.2/basic.html#join-outer](http://pig.apache.org/docs/r0.9.2/basic.html#join-outer)
*   [http://pig.apache.org/docs/r0.9.2/basic.html#order-by](http://pig.apache.org/docs/r0.9.2/basic.html#order-by)

有关每个的更多信息

# c - 用令牌分割字符串

> ID：10986397
> 
> 赞同：0
> 
> 时间：2012-06-11T19:35:40.020
> 
> 标签：c, string, split

我正在尝试从用字符串“mat”写入的文件名中删除 .txt 扩展名：

```
sscanf(mat, "%s.txt", ime_datoteke); 
```

如果`mat="sm04567890.txt"`我想要那个`ime_datoteke="sm04567890"`。在示例中，我尝试使用`sscanf`，但它不起作用（它将 mat 复制到 ime_datoteke）。

我怎样才能在C中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:37:38.430

您可以`sscanf`稍微修改您的方法以读取不包含 a 的字符串`.`：

```
sscanf(mat, "%[^.].txt", ime_datoteke); 
```

但是，最好`.`从字符串末尾查找字符，然后复制由它确定的子字符串。

```
char* dot = strrchr(mat, '.');
strncpy(ime_datoteke, mat, dot - mat); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:39:15.213

使用[strrchr](http://www.cplusplus.com/reference/clibrary/cstring/strrchr/)：

```
char* pch = strrchr(str,'.');

if(pch)
   *pch = '\0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:40:57.270

此示例用于[`strrchr()`](http://msdn.microsoft.com/en-us/library/ftw0heb9(v=vs.71).aspx)定位字符串中的最后一个句点，然后仅复制该句点之前的字符串部分。

如果没有找到句点，则复制整个字符串。

```
const char *fullstop;

if ((fullstop = strrchr(mat, '.')))
    strncpy(ime_datoteke, mat, fullstop - mat);
else
    strcpy(ime_datoteke, mat); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:41:14.167

使用标准 C 函数`strstr`：

```
char a[] ="sm04567890.txt";
char *b = strstr(a, ".txt");
*b = '\0';
printf("%s\n", a); 
```

将打印：

`sm04567890`

# algorithm - 查找可能的替换列表

> ID：10986399
> 
> 赞同：0
> 
> 时间：2012-06-11T19:35:44.417
> 
> 标签：algorithm, search, recursion, tree

假设我们有一棵二叉树，如下所示：![在此处输入图像描述](../Images/5f9e733305efcd01f685902578318a62.png)

我正在寻找一种算法来找到 A 的所有等价物。我得到了一个包含这棵树中元素的数组。规则是，如果一个节点的所有子节点都存在于数组中，则相当于该节点在数组中。比如我们数组中有B和C，就相当于有一个A。所以在上面的数组中，F+G=C，C+B=A，所以[B,F,G]也是等价于 A。同样 [DEFG] 也等价于 A。

我可以递归调用类似 checkSubstitute(node) 的东西：

```
if node in array
return true
else:
    for child in nodeChildren
        if ((child not in array) && (child == terminalNode))
            return false
        else
        return checkSubstitute(child) 
```

这个逻辑有意义吗？另外，如何使用上述算法存储所有等效数组？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:30:21.377

您提供的方法无法正常工作，因为您总是在 for 循环的第一次迭代期间返回一个值。假设你有一个数组 [D]。然后 checkSubstitute(B) 返回 True，而它应该返回 False。

与其使用 for 循环，不如对两个孩子进行两次显式调用更容易。这假设每个节点都有零个或两个子节点。如果一个节点可以有一个子节点，则需要进行一些额外的空值检查。

```
#returns true if Node n exists in NodeList seq, or if its equivalent exists in seq.
function exists(n, seq):
    if n in seq:
        return True
    if not n.hasChildren:
        return False
    return exists(n.leftChild, seq) and exists(n.rightChild, seq) 
```

获得所有等效数组只需要一些组合学。

```
#gets all possible equivalents for the given node. This includes itself.
#An equivalent is a list of nodes, so this method returns a list of lists of nodes.
function getPossibleEquivalents(node):
    ret = new List()
    baseCase = new List()
    baseCase.append(node)
    ret.append(baseCase)
    if not node.hasChildren:
        return ret  
    for each leftEquivalent in getPossibleEquivalents(node.leftChild):
        for each rightEquivalent in getPossibleEquivalents(node.rightChild):
            ret.append(leftEquivalent + rightEquivalent)
    return ret 
```

编辑：您可以通过嵌套 N 个 for 循环来扩展具有恰好 0 或 N 个子节点的树的 getPossibleEquivalents：

```
for each child0Equivalent in getPossibleEquivalents(node.child[0]):
    for each child1Equivalent in getPossibleEquivalents(node.child[1]):
        for each child2Equivalent in getPossibleEquivalents(node.child[2]):
            for each child3Equivalent in getPossibleEquivalents(node.child[3]):
                for each child4Equivalent in getPossibleEquivalents(node.child[4]):
                    ret.append(child0Equivalent + child1Equivalent + child2Equivalent + child3Equivalent + child4Equivalent + child5Equivalent) 
```

如果您想编写一个可以处理具有任意数量的孩子的树的单个函数，您需要获取每个孩子的每个可能等价物的[笛卡尔积。](http://en.wikipedia.org/wiki/Cartesian_product)有些语言已经为您实现了笛卡尔积。例如，在 python 中：

```
from itertools import product

def getPossibleEquivalents(node):
    ret = [node]
    if len(node.children) == 0: return ret
    for equivalentTuple in product(map(getPossibleEquivalents, node.children)):
        possibleEquivalent = reduce(lambda x,y: x+y, equivalentTuple)
        ret.append(possibleEquivalent)
    return ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:32:31.233

这个逻辑可以很好地生成所有等效的表示，但是有一些重复，如果你愿意，你可以检查和更正。（我将遵循一些关于复制内容的 python 约定）

假设您想要 [B,C] 中的所有可能表示对于此数组中的每个节点，您可以将其替换为其子节点，也可以保持原样。所以递归的总体思路是这样的：

```
find_equivalent(representation, node){
        // representation is a list which is a valid equivalent representation.
        child = list_of_children_of_node;
        Temp = representation[:]
        for each c in child: Temp.insert(child)

        find_equivalent(representation, next(node,representation))
        N = next(node,Temp)
        Temp.delete(node)
        Li.append(Temp)
        find_equivalent(Temp, N)
        // Here next function takes a list and a node and returns the next element from the list after node. 
```

上面的 Li 是一个表示的全局数组，您需要在添加每个表示时为每个表示调用函数 find_equivalent。

# android - 安卓条码读取

> ID：10986401
> 
> 赞同：2
> 
> 时间：2012-06-11T19:36:00.147
> 
> 标签：android, zxing, barcode-scanner

我正在开发一个条码扫描应用程序并使用 Zxing 作为条码扫描器。我的应用程序向 Zxing 发送了一个意图，该意图启动并允许我扫描条形码，但是......我无法取回任何数据。我没有将条形码编号返回到我的应用程序，因此我可以在我的代码中使用它们。

以下是我的代码：

```
public class ScaningActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        

Intent scanIntent = new Intent("com.google.zxing.client.android.SCAN");
    scanIntent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(scanIntent, 0);

}//close onCreate
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {
        // handle scan result
        Log.e("DATA", "TESTING SCAN RESULT : " + scanResult.toString());
      }else{
          Log.d("DATA", "NO SCAN RESULTS : ");// + scanResult.getFormatName());//scanResult.getContents());
      }
      // else continue with any other code you need in the method
      Log.i("DATA", "Continuing after scan result");
      Log.d("DATA", "requestCode : " + requestCode);
      Log.d("DATA", "resultCode : " + resultCode);
      Log.d("DATA", "intent : " + intent);
    }
}//close ScaningActivity 
```

在`onActivityResult`函数中，我收到**NO SCAN RESULTS**消息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:41:19.137

不要试图自己做这一切，因为你做错了。特别是您没有`Intent`正确发送。请也`IntentIntegrator`用于此。

# android - 无法销毁Activity（服务未注册）

> ID：10986408
> 
> 赞同：11
> 
> 时间：2012-06-11T19:36:21.153
> 
> 标签：android, service, android-activity

*这样做解决了***编辑：* *** 我已经通过更改我`onDestroy()`的 Activity 和`ServiceConnection::onServiceDisconnected()`.

我添加了一个布尔值来检查我是否绑定到名为`boundToService`. 服务连接：

```
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        myService = ((EventService.MyBinder) service).getService();
    }

    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub
        Log.i(getPackageName(), "ServiceConnection::onServiceDisconnected() called");
        boundToService = false;
    }
}; 
```

和`onDestroy()`：

```
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.e(getPackageName(), "Destroying Activity");
    if (boundToService && mConnection != null) {
        doUnbindService();
    }
} 
```

这是在活动中完成绑定和解除绑定的方式：

```
public void doBindService() {
    bindService(new Intent(this, EventService.class), mConnection,
            Context.BIND_AUTO_CREATE);
    boundToService = true;
}

public void doUnbindService() {
    unbindService(mConnection);
    boundToService = false;
} 
```

正如纪尧姆所说，`super.onDestroy()`首先打电话是必须的。

****解决方案结束****

我有一个`Foreground Service`轮询 GPS 数据的设备，并且`MapActivity`每 3 秒请求一次数据。当 的`onDestroy()`被`MapActivity`调用时，我得到这个 LogCat 错误：

```
06-11 21:26:35.591: D/CLIPBOARD(14801): Hide Clipboard dialog at Starting input: finished by someone else... !
06-11 21:26:44.451: D/dalvikvm(14801): Debugger has detached; object registry had 1371 entries
06-11 21:26:44.451: D/AndroidRuntime(14801): Shutting down VM
06-11 21:26:44.456: W/dalvikvm(14801): threadid=1: thread exiting with uncaught exception (group=0x40c4b1f8)
06-11 21:26:44.476: E/AndroidRuntime(14801): FATAL EXCEPTION: main
06-11 21:26:44.476: E/AndroidRuntime(14801): java.lang.RuntimeException: Unable to destroy activity {com.project4.mtl/com.project4.mtl.EventActivity}: java.lang.IllegalArgumentException: Service not registered: com.project4.mtl.EventActivity$1@416179d8
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3124)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3142)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ActivityThread.access$1200(ActivityThread.java:127)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1192)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.os.Looper.loop(Looper.java:137)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ActivityThread.main(ActivityThread.java:4507)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at java.lang.reflect.Method.invokeNative(Native Method)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at java.lang.reflect.Method.invoke(Method.java:511)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at dalvik.system.NativeStart.main(Native Method)
06-11 21:26:44.476: E/AndroidRuntime(14801): Caused by: java.lang.IllegalArgumentException: Service not registered: com.project4.mtl.EventActivity$1@416179d8
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.LoadedApk.forgetServiceDispatcher(LoadedApk.java:888)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ContextImpl.unbindService(ContextImpl.java:1211)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.content.ContextWrapper.unbindService(ContextWrapper.java:375)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at com.project4.mtl.EventActivity.onDestroy(EventActivity.java:175)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.Activity.performDestroy(Activity.java:4629)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1082)
06-11 21:26:44.476: E/AndroidRuntime(14801):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3111)
06-11 21:26:44.476: E/AndroidRuntime(14801):    ... 11 more` 
```

当然还有第 175 行的代码，我的程序中出现了异常：

```
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    unbindService(mConnection);
    super.onDestroy();
} 
```

如果您想要更多代码片段，请告诉我。

****编辑****

这是 ServiceConnection 的代码：

```
public void doBindService() {
    //ComponentName service = startService(new Intent(this,
        //  EventService.class));
    bindService(new Intent(this, EventService.class), mConnection,
            Context.BIND_AUTO_CREATE);
} 
```

`mConnection`是 ServiceConnection 的类型：

```
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        myService = ((EventService.MyBinder) service).getService();
    }

    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub

    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T14:23:07.560

这对我有用！只需从 getApplicationContext() 调用函数 unbindService() 而不是“this”上下文。（与绑定服务相同）

```
getApplicationContext().unbindService(mServiceConnection); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-10T08:10:10.737

您可以将 in 设置`mService`为 null`onServiceDisconnected`并检查 in `onDestroy`。像这样：

```
private ServiceConnection mConnection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName className, IBinder binder) {
            mService = ((LoadArticlesService.LoadArticlesBinder) binder).getService();
        }
        public void onServiceDisconnected(ComponentName className) {
            mService = null;
        }
    }; 
```

销毁：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    if (mService != null) {
        unbindService(mConnection);
    }
} 
```

工作正常。

# haskell - 读取行直到在haskell中按下ESC按钮

> ID：10986409
> 
> 赞同：1
> 
> 时间：2012-06-11T19:36:22.133
> 
> 标签：haskell, line, stdin

我需要实线，直到按下 ESC 按钮。我怎样才能检查它？

```
lines
   = do
      line <- getLine
      if (== "/ESC") --this condition is wrong
         then ...
         else do
            ln <- lines
            return ... 
```

有人可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:41:52.560

正确的转义方法是使用反斜杠，字符是`'\ESC'`，所以条件是

```
if line == "\ESC" 
```

但我不确定每个终端都会通过`'\ESC'`应用程序。

如果您想在按下键时立即停止`ESC`，则类似于

```
module Main (main) where

import System.IO

main :: IO ()
main = do
    hSetBuffering stdin NoBuffering
    getUntilEsc ""

getUntilEsc :: String -> IO ()
getUntilEsc acc = do
    c <- getChar
    case c of
      '\ESC' -> return ()
      '\n' -> do putStrLn $ "You entered " ++ reverse acc
                 getUntilEsc ""
      _ -> getUntilEsc (c:acc) 
```

是你需要的。您必须按字符阅读，并且需要关闭 的缓冲`stdin`，因此字符可以立即可供阅读，而不仅仅是在输入换行符之后。

请注意，在 Windows 上关闭缓冲不起作用。不知道最近有没有修复。此外，正如@Daniel Wagner 报告的那样，很可能是 Windows 命令提示符没有将 传递`ESC`给应用程序。

# ruby-on-rails - Jenkins 部署到登台

> ID：10986411
> 
> 赞同：2
> 
> 时间：2012-06-11T19:36:22.477
> 
> 标签：ruby-on-rails, ruby, jenkins, jenkins-plugins, engineyard

当所有测试都通过时，我试图找到一种方法让 Jenkins 部署到我在 Engine Yard 上的登台服务器？Jenkins 的这个构建后操作是否有任何插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:55:02.720

您还可以考虑创建构建管道[https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin)
一个构建用于构建和测试，另一个用于部署（或者如果测试通过，可能更多自动部署到暂存并执行第三步 - 部署到手动触发的下一个环境）。

-拉迪姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:40:59.107

[engineyard-jenkins](https://github.com/engineyard/engineyard-jenkins)看起来可以解决问题。

# javascript - Jquery .Toggle() 基于 colgroup col id

> ID：10986414
> 
> 赞同：1
> 
> 时间：2012-06-11T19:36:28.960
> 
> 标签：javascript, jquery, html-table, toggle, colgroup

小提琴在[这里](http://jsfiddle.net/chrisfrisina/8mqTs/)。

我无法通过 colgroup 的 col id 抓取实际列来切换它。我的索引正确匹配，但我不明白如何使用 colgroup 的力量来抓取整个列。这是我目前的尝试（一直在小提琴的底部）：

```
 //Column Button Hider
    $('fieldset.techtable input.column[type=checkbox]').on('change', function() {
        var index = $(this).prevAll('input.column').length+2;
        console.log(index);
        $('fieldset.techtable' #col'+index').toggle()
            //($('#col'+index).toggle());
    }); 
```

这是表格和colgroup：

```
<section class="techtable">
        <h1>Technologies / Compliance / Certifications</h1>
        <table cellspacing="0">
            <colgroup>
                <col id="col0">
                <col id="col1">
                <col id="col2">
                <col id="col3">
                <col id="col4">
                <col id="col5">
                <col id="col6">
            </colgroup>
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Skill</th>
                    <th>Version(s)</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Elapsed Time</th>
                    <th>Expertise Rating</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Technology</td>
                    <td>J2EE</td>
                    <td>1.5, 1.6, 1.7</td>
                    <td>November, 2011</td>
                    <td></td>
                    <td></td>
                    <td>2</td>
                </tr>
                </tr>...repeating...</tr>
            </tbody>
        </table>
    </section> 
```

我想尝试利用 colgroup 的力量，但不确定我是否应该使用类 ID（如果是，在哪里？在 col group id 上，`<th>`？或每个`<td>`？）。

`<th>`s 会干扰 s吗`<colgroup>`？也许措辞更好，我应该参考 th 而不是尝试使用 colgroup 吗？

指向正确的语法方向是有帮助的，并且总是感谢一行代码来提供帮助，但是对于这一点，我试图避免将其扩展到更多的代码行，除非我忽略了方法论。我假设我不仅正确地抓住了 col id，而且您的反馈可能证明我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:06:57.417

如果您试图隐藏特定的数据列，则在 colgroup 中隐藏 col 不会这样做。

```
var colIndex = 0; // first column
$(myTable).find("td,th").filter(":nth-child(" + (colIndex+1) + ")").toggle(); 
```

我已修改此代码以使用您的表。这是更新的[小提琴](http://jsfiddle.net/8mqTs/1/)

```
 var index = $(this).prevAll('input.column').length+2;
 $('colgroup').parent('table').find("td,th").filter(":nth-child(" + (index+1) + ")").toggle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:39:59.357

你想这样做吗？

```
$('fieldset.techtable #col' + index).toggle(); 
```

由于 id 在页面中是唯一的，通常只针对以下内容就足够了：

```
$('#col' + index).toggle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:08:37.773

尝试以下操作：

$(".techtable td:nth-child("+index+1+")").toggle();

看到这个：[Hide/Show Column in an HTML Table](https://stackoverflow.com/questions/455958/hide-show-column-in-an-html-table)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:10:21.127

我认为您无法切换列的可见性，因为列是元数据/伪元素而不是页面上的实际元素（实际上是您尝试切换`tr`的每个元素的第 N 个）。`td`我知道出于这个原因尝试一致地设置它们的样式时会出现问题（请参阅[我的答案](https://stackoverflow.com/questions/8257360/table-styling-col-class-should-override-over-td-class-how/8257761#8257761)以获取解释/调查）。

# kinect - 对齐 oni 文件的深度和 rgb 图像

> ID：10986415
> 
> 赞同：3
> 
> 时间：2012-06-11T19:36:30.193
> 
> 标签：kinect, openni

我有一个 oni 文件，其中深度和 rgb 图像未对齐。我在其他问题中读到，在这种情况下使用 GetAlternativeViewPointCap() 很有用。但是，这不起作用。

我尝试了以下代码：

`if (depth.IsCapabilitySupported(XN_CAPABILITY_ALTERNATIVE_VIEW_POINT)) { depth.GetAlternativeViewPointCap().SetViewPoint(image); }`

在我尝试的 xml 文件中（几次尝试之一）

```
.... 
```

`<Recording file="file.oni" /> <Node type="Depth" > <Query> <Capabilities> <Capability>Alternative View</Capability> </Capabilities> </Query> <Configuration> </Configuration> </Node>` ……

是否可以将 GetAlternativeViewPointCap 也用于已录制的文件？xml文件应该如何配置？

根据我添加的功能，我收到错误：打开失败：节点被锁定以进行更改！

任何想法？谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:51:53.697

如果加载录制文件，则无法更改其功能、分辨率等。配置仅在连接到真实硬件时相关。

# asp.net - 访问报表服务器的 AppPool 权限问题

> ID：10986419
> 
> 赞同：16
> 
> 时间：2012-06-11T19:36:43.047
> 
> 标签：asp.net, iis, reporting-services, reporting

我有一个在 Windows 7 机器上运行的 SQL Server 2008 R2 报表服务器以及一个 ASP.NET 应用程序。ASP.NET 应用程序向报表服务器发出请求以显示报表列表、呈现报表等。我的 ASP.NET 应用程序成功获取报表列表，但是当它尝试呈现报表时出现以下错误：

```
The permissions granted to user 'IIS APPPOOL\DefaultAppPool' are insufficient for performing this operation. (rsAccessDenied)

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: Microsoft.Reporting.WebForms.ReportServerException: The permissions granted to user 'IIS APPPOOL\DefaultAppPool' are insufficient for performing this operation. (rsAccessDenied)

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ReportServerException: The permissions granted to user 'IIS APPPOOL\DefaultAppPool' are insufficient for performing this operation. (rsAccessDenied)]
Microsoft.Reporting.WebForms.ServerReportSoapProxy.OnSoapException(SoapException e) +89
Microsoft.Reporting.WebForms.Internal.Soap.ReportingServices2005.Execution.ProxyMethodInvocation.Execute(RSExecutionConnection connection, ProxyMethod`1 initialMethod, ProxyMethod`1 retryMethod) +404
Microsoft.Reporting.WebForms.Internal.Soap.ReportingServices2005.Execution.RSExecutionConnection.LoadReport(String Report, String HistoryID) +180
Microsoft.Reporting.WebForms.ServerReport.EnsureExecutionSession() +79
Microsoft.Reporting.WebForms.ServerReport.GetParameters() +54 
```

注意：相同的代码库在运行 Windows 7 和 Windows Server 2008 的多台机器上运行良好。我一直在尝试基于网络搜索的许多不同的东西，但还没有找到解决方案。对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-11T19:55:13.380

终于想通了。我的 Reporting Services 配置为本地帐户，而我的 IIS 应用程序池配置为 ApplicationPoolIdentity。我将我的应用程序池更改为 LocalSystem 并修复了它。希望这些信息对其他人有用，因为我浪费了几个小时来弄清楚这一点。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-27T07:16:38.797

mreyeros 在评论中提出的另一个解决方案是在报告管理器中将浏览器权限授予 IIS APPPOOL\DefaultAppPool 用户。

为此，您应该在主文件夹中打开报表管理器网站 (http:///Reports)，单击文件夹设置 -> 安全，单击新角色分配并输入 IIS APPPOOL\DefaultAppPool 作为名称，从列表中选择权限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T10:03:53.450

除了在 Windows Server 2008 R2 上运行的 IIS 和 Report Server 之外，这里的情况几乎相同。我曾经让 asp.net 应用程序使用它自己的应用程序池运行，并且一切正常。当我将应用程序更改为 DefaultAppPool 时（由于不同的问题），我遇到了权限问题。我将 DefaultAppPool 的标识从 ApplicationPoolIdentity 更改为 LocalSystem（在 IIS 中，高级设置中）并且它再次工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-14T14:32:55.457

正如 Michal Drozdowicz 所说，将 AppPool 用户创建为浏览器角色。缺少的部分是

1.  用户名（至少在 Windows 2012 上是 'IIS APPPOOL\pool name' 这是将出现在错误页面上的确切名称。在权限对话框中输入时，请勿在用户名周围加上引号。
2.  必须在主文件夹中创建浏览器角色。当然，如果需要子文件夹的权限，请确保子文件夹还在继承权限或者手动设置

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-04T10:46:36.480

我不想将我的应用程序池设置为 LocalSystem，因为我认为这是不好的做法。

有关 Microsoft 的建议（不要使用 LocalSystem，使用 ApplicationPoolIdentity），请参见此处： [https](https://technet.microsoft.com/en-us/library/jj635855.aspx#AppPools) ://technet.microsoft.com/en-us/library/jj635855.aspx#AppPools 。

有关理由，请参见此处： [https ://stackoverflow.com/a/510225/44169](https://stackoverflow.com/a/510225/44169)

我遇到了描述的错误。我已将我的应用程序池身份添加到我的报表服务器文件夹权限中，但这已被子文件夹的安全设置覆盖。我通过选择子文件夹并单击“恢复到父安全设置”来解决此问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-10-24T17:35:46.260

在 IIS 应用程序池中将 ApplicationPoolIdentity 更改**为 LocalSystem** **，**它将被修复。

 **默认情况下**，ApplicationPoolIdentity 无权访问报告服务，即 SSRS 报告**

如果您没有更改应用程序的身份帐户，则在应用程序中运行报表时，它将使用默认的身份帐户“ApplicationPoolIdentity”访问报表服务器。**默认情况下，默认没有访问报表服务器的权限。**因此，在您的场景中，由于应用程序池中的默认身份帐户“ApplicationPoolIdentity”没有访问报表服务器的权限，导致此错误。

欲了解更多信息链接：

[https://social.msdn.microsoft.com/Forums/sqlserver/en-US/9593f5a8-09e7-4299-9cf1-5251dd375c38/the-permissions-granted-to-user-iis-apppoolaspnet-v40-are-insufficient-for-performing-this?forum=sqlreportingservices](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/9593f5a8-09e7-4299-9cf1-5251dd375c38/the-permissions-granted-to-user-iis-apppoolaspnet-v40-are-insufficient-for-performing-this?forum=sqlreportingservices)**

# mysql - 查询是否正确？

> ID：10986426
> 
> 赞同：0
> 
> 时间：2012-06-11T19:37:18.070
> 
> 标签：mysql

假设我们有一个名为“Persons”的表和另一个名为“Product_Orders”的表。我们将分别给出“p”和“po”的表别名。

现在我们要列出“Ola Hansen”负责的所有订单。

我们使用以下 SELECT 语句：

```
SELECT po.OrderID, p.LastName, p.FirstName 
FROM Persons AS p, Product_Orders AS po 
WHERE p.LastName='Hansen' AND p.FirstName='Ola' 
```

我对 OrderID 感到困惑，因为它无法与类似的东西进行比较。

```
SELECT po.OrderID, p.LastName, p.FirstName 
FROM Persons AS p, Product_Orders AS po 
WHERE p.LastName='Hansen' AND p.FirstName='Ola'
  AND po.OrderID = p.OrderID. 
```

我错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:41:44.637

这里演示的是*join*，但是您使用的网站正在教您过时的隐式连接语法（带逗号）。我建议不要使用这种语法。而是使用`JOIN`关键字。

我检查了该站点并发现了原始[示例代码](http://www.w3schools.com/sql/sql_alias.asp)是什么（您的问题并不清楚）：

```
SELECT po.OrderID, p.LastName, p.FirstName
FROM Persons AS p,
Product_Orders AS po
WHERE p.LastName='Hansen' AND p.FirstName='Ola' 
```

他们忘了添加加入条件！

我会改用这样的写法`JOIN`：

```
SELECT po.OrderID, p.LastName, p.FirstName
FROM Persons AS p
JOIN Product_Orders AS po
ON po.PersonId = p.Id
WHERE p.LastName = 'Hansen' AND p.FirstName = 'Ola' 
```

现在您可以清楚地看到`po.PersonId = p.Id`条件指定了两个表之间的关系，并显示了它们应该如何*连接*。使用关键字的众多优点之一`JOIN`是很难忘记编写连接条件，并且在缺少时很明显。

您应该避免使用 w3schools.com 作为教程。该网站包含许多错误和不良做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:41:31.780

```
SELECT po.OrderID, p.LastName, p.FirstName 
FROM Persons AS p, Product_Orders AS po 
WHERE p.LastName='Hansen' AND p.FirstName='Ola'
  AND p.PersonID = po.PersonID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:46:08.563

你是对的，在你的第一个查询中，第一个表中的每一行都与第二个表中的每一行相连。这将导致每个订单的结果（忽略订单是否属于 Ola Hansen）。

但是，我怀疑您的 Persons 表是否包含命令的外键。一个子句如

```
SELECT po.OrderID, p.LastName, p.FirstName 
FROM Persons AS p, Product_Orders AS po 
WHERE p.LastName='Hansen' AND p.FirstName='Ola'
AND po.PersonID = p.PersonID 
```

假设 Product_Orderds 中的每一行都包含执行该订单的 Person 的外键，这会更明智。

# iphone - 双击全屏

> ID：10986429
> 
> 赞同：2
> 
> 时间：2012-06-11T19:37:37.863
> 
> 标签：iphone, objective-c, ios, xcode

有没有办法让 UIWebView 使用简单的 UITapRecognizer 识别双击并在双击时全屏显示？我在那个屏幕上有一个 UINavigationBar，我希望它也被隐藏关于如何做到这一点的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:06:29.360

这个问题至少有两个很好的答案，它们相互补充：

*   **[导航栏显示/隐藏](https://stackoverflow.com/a/2927038/1390251)**[- Alex Reynolds](https://stackoverflow.com/users/19410/alex-reynolds)回答：

    “隐藏导航栏：
    `[[self navigationController] setNavigationBarHidden:YES animated:YES];`
    ...”

*   **[隐藏UITabBar？](https://stackoverflow.com/a/815745/1390251)**- 由[Panagiotis](https://stackoverflow.com/users/19331/panagiotis-korros) Korros 回答：

    “您必须在您推送的控制器上将 hidesBottomBarWhenPushed 属性设置为 YES，而不是 UITabBarController
    。...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:28:37.030

尝试隐藏导航栏：

> [导航栏设置阿尔法：0.00]；

然后使用 CGRect 使 webView 增长到屏幕顶部。

我不知道如何进行双击，但我想你可以制作一个按钮，然后让 Touch Down 重复，这样他们就必须双击它。

# javascript - 浏览器中 XMLHttpRequest lvl 2 的 withCredentials 标志的行为

> ID：10986433
> 
> 赞同：1
> 
> 时间：2012-06-11T19:37:43.417
> 
> 标签：javascript, ajax, cookies, cors

我正在尝试在 CORS 环境中的 XMLHttpRequest 中设置 cookie，我在 Set-Cookie 标头中对我的服务器（使用 Restlet 开发）的最后一次调用中接收到 cookie。由于我无法读取此标头，因此我必须将控制权留给浏览器（在本例中为 Chrome），所有对服务器的请求都必须在 Cookie 标头中包含相同的值（第一个请求中的接收 cookie）。我必须在第一次调用中将 withCredentials （并在服务器中设置 allow-credentials 标头）放在 xhr 请求中吗？这个标志将采用 Set-Cookie 并在 Cookie 标头上放入下一个 xhr 请求？

有人可以澄清浏览器中 withCredentials 标志的行为吗？和其他问题，在 cors 中我可以访问 document.cookie 来设置它吗？（如果我可以 setRequestHeader("Cookie", value))????

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:34:18.187

可能您遇到了 Preflight 请求问题。如果您添加额外的标头或使用 withCredentials 浏览器将首先尝试使用 OPTIONS HTTP 动词发出 Preflight 请求 ( [http://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0 )。](http://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0)在 Preflight 中删除凭据（包括 cookie） - 如果是这种情况，请在 Chrome 网络面板中检查。

# monodevelop - 如何覆盖 MonoDevelop 中的默认代码格式设置策略？

> ID：10986435
> 
> 赞同：8
> 
> 时间：2012-06-11T19:37:45.603
> 
> 标签：monodevelop, unity3d

MonoDevelop 允许创建和安装自定义策略来控制代码格式的各个方面。我为我们的工作站点创建了一个策略，可以通过 Project > Apply Policy ... 应用它

我们正在使用 Unity 游戏引擎，该引擎会定期重新生成 MonoDevelop 解决方案，要求每个开发人员重新应用该策略——烦人且容易出错。

如何使我的策略文件成为新 MonoDevelop 解决方案的默认文件？

另外，应用策略的信息保存在哪里？

在 .sln 文件中，我看到“$0.CSharpFormattingPolicy = $2”，但在应用我的自定义策略后这没有改变。我对比了应用策略前后的所有项目文件，唯一的变化是（1）生成了一个.userprefs文件，但没有提及策略，以及（2）各种.pidb文件不同，但这可以'不是政策信息的去向？？

我正在使用与 Unity 3.5.2 集成的 MonoDevelop 版本，即 MonoDevelop 版本 2.8.2（在 Windows 7 上）。（是的，2.8.2 有点过时了，Unity Technologies 做出的更改可能会导致我的问题。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-01T17:20:00.493

这是其他答案之后的一年，但以上都不适用于统一，这在谷歌搜索的顶部附近。

以下是我必须遵循的步骤才能使格式化工作：

1.  MonoDevelop->工具->自定义策略->添加策略->新策略

2.  在“自定义策略”窗口中编辑策略，确保选择了您的策略。

3.  项目->应用策略->应用库存或自定义策略集（选择您的策略）->应用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-02T06:39:12.667

转到 Tools->Options->KeyBinding 然后转到 Edit -> FormatDocument 然后分配您的快捷键并单击应用并在您的文档中使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T23:32:53.543

默认策略应用于新解决方案或没有策略的解决方案。它可以在 Preferences/Options 对话框中进行编辑，它与用户首选项混合在一起：Windows 上的 Tools->Options，Mac 上的 MonoDevelop->Preferences。您可以识别策略，因为它们在面板顶部有一个“策略”下拉菜单，允许您从命名策略加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T06:47:10.827

我花了大约 30 分钟来解决这个问题，终于弄明白了。

**在 Windows 中：转到`Project -> Assembly C-Sharp Options`**

然后从那里更改代码格式！

去`Project -> Solution Options` 绝对什么都不做

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-05T21:59:54.657

经过一年的处理，我们编写了一个 Unity 编辑器脚本，它会监视项目文件的更改，当它们发生更改时，检查项目中的策略条目（非常简单的 XML 解析。）如果它们偏离了我们想要的政策，我们会修改它们并使用正确的政策更改将它们写回。

另一个想法（我们想强制执行一项策略）是做同样的事情，但只要在项目更新时从项目中删除策略条目，然后您就不会让项目策略覆盖您在工具级别设置的内容.

# java - 使用相同的主键删除和插入代替更新

> ID：10986436
> 
> 赞同：0
> 
> 时间：2012-06-11T19:37:51.280
> 
> 标签：java, hibernate, annotations, one-to-one

我在表 TICKETINFO 和 TICKETINFO_REMARK 之间有一个简单的一对一关系。

```
TICKETINFO
TICKETINFOID pk, REMARK varchar(128), TICKETDATE timestamp 
```

和

```
TICKETINFO_REMARK
TICKETINFOID fk, REMARK varchar(128) 
```

并且 TICKETINFOID 将是来自 TICKETINFO 表的外键，并且必须填充 TICKETINFO_REMARK 的 REMARK 字段以及相应 TICKETINFOID 的 TICKETINFO 的 REMARK 字段。

对于 1 个 TICKETINFOID，将有一个 REMARK。

插入工作正常。

**现在我的问题是：**

我的要求是，由于某些性能问题，我不应该更新 TICKETINFO_REMARK 中的任何记录。我需要先删除记录并使用相同的 TICKETINFOID 和新的 REMARK 插入它。

例如：

TICKETINFO 表有：

```
**TICKETINFOID** :     1
**REMARK**   : ABC
**TICKETDATE** :2012-06-12 
```

TICKETINFO_REMARK 有：

```
**TICKETINFOID** :     1
**REMARK**   : ABC 
```

现在我想将 TICKETINFO_REMARK 中的 REMARK 更改为“XYZ123”所以我必须从 TICKETINFO_REMARK 中删除条目并重新插入它，它看起来像这样

```
**TICKETINFOID** :     1
**REMARK**   : XYZ123 
```

执行此操作的代码是什么？请帮忙！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:35:12.180

首先，您应该选择带有 TICKETINFOID 的记录表“TICKETINFO_REMARK”表。如果它已经找到，您应该从“TICKETINFO_REMARK”表中删除此记录，然后插入带有此 TICKETINFOID 的新记录。这只是您的要求的逻辑。如果你想得到示例代码，请告诉我您在 CRUD 操作中使用了哪种技术，例如 JPA、HIBERNATE、IBATIS 或 JDBC 等。

# joomla - 新文章默认为首页

> ID：10986441
> 
> 赞同：0
> 
> 时间：2012-06-11T19:38:04.327
> 
> 标签：joomla, joomla1.5

我正在添加到 Joomla 1.5 网站。当我添加一篇新文章并将其分配给一个部分/类别时，我会添加到主菜单。在前端，当点击那个链接时，它只显示主页内容而不是文章内容。这是网站，链接在“关于我们”下的“测试表”：

[http://rocketship1.thehostingcompany.us/~hyp/](http://rocketship1.thehostingcompany.us/~hyp/)

有什么想法吗？谢谢！

这是查询：

```
SELECT * 
  FROM jos_session 
  WHERE session_id = 't6uabsp4oh7gnvpitgm3rcro27'
DELETE 
  FROM jos_session 
  WHERE ( TIME < '1339531072' )
SELECT * 
  FROM jos_session 
  WHERE session_id = 't6uabsp4oh7gnvpitgm3rcro27'
UPDATE `jos_session` 
  SET `time`='1339534672',`userid`='0',`usertype`='',`username`='',`gid`='0',`guest`='1',`client_id`='0',`data`='__default|a:7:{s:15:\"session.counter\";i:55;s:19:\"session.timer.start\";i:1339527526;s:18:\"session.timer.last\";i:1339534666;s:17:\"session.timer.now\";i:1339534667;s:22:\"session.client.browser\";s:106:\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5\";s:8:\"registry\";O:9:\"JRegistry\":3:{s:17:\"_defaultNameSpace\";s:7:\"session\";s:9:\"_registry\";a:1:{s:7:\"session\";a:1:{s:4:\"data\";O:8:\"stdClass\":0:{}}}s:7:\"_errors\";a:0:{}}s:4:\"user\";O:5:\"JUser\":19:{s:2:\"id\";i:0;s:4:\"name\";N;s:8:\"username\";N;s:5:\"email\";N;s:8:\"password\";N;s:14:\"password_clear\";s:0:\"\";s:8:\"usertype\";N;s:5:\"block\";N;s:9:\"sendEmail\";i:0;s:3:\"gid\";i:0;s:12:\"registerDate\";N;s:13:\"lastvisitDate\";N;s:10:\"activation\";N;s:6:\"params\";N;s:3:\"aid\";i:0;s:5:\"guest\";i:1;s:7:\"_params\";O:10:\"JParameter\":7:{s:4:\"_raw\";s:0:\"\";s:4:\"_xml\";N;s:9:\"_elements\";a:0:{}s:12:\"_elementPath\";a:1:{i:0;s:83:\"C:\\BitNami WAMPStack\\apps\\joomla\\htdocs\\HYP\\libraries\\joomla\\html\\parameter\\element\";}s:17:\"_defaultNameSpace\";s:8:\"_default\";s:9:\"_registry\";a:1:{s:8:\"_default\";a:1:{s:4:\"data\";O:8:\"stdClass\":0:{}}}s:7:\"_errors\";a:0:{}}s:9:\"_errorMsg\";N;s:7:\"_errors\";a:0:{}}}' 
  WHERE session_id='t6uabsp4oh7gnvpitgm3rcro27'
SELECT * 
  FROM jos_components 
  WHERE parent = 0
SELECT folder AS TYPE, element AS name, params 
  FROM jos_plugins 
  WHERE published >= 1 
  AND access <= 0 
  ORDER BY ordering
SHOW COLUMNS 
  FROM jos_content
SELECT template 
  FROM jos_templates_menu 
  WHERE client_id = 0 
  AND (menuid = 0 OR menuid = 117) 
  ORDER BY menuid DESC 
  LIMIT 0, 1
SELECT * 
  FROM `jos_rsform_config`
SELECT id, title, module, POSITION, content, showtitle, control, params 
  FROM jos_modules AS m 
  LEFT JOIN jos_modules_menu AS mm 
  ON mm.moduleid = m.id 
  WHERE m.published = 1 
  AND m.access <= 0 
  AND m.client_id = 0 
  AND ( mm.menuid = 117 OR mm.menuid = 0 ) 
  ORDER BY POSITION, ordering 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:41:46.520

在这里整合我们所知道的所有答案：

从您的菜单中，这**不起作用**：

[index.php?option=com_content&view=article&id=102&Itemid=113](http://rocketship1.thehostingcompany.us/~hyp/index.php?option=com_content&view=article&id=102&Itemid=113)

但只需将 Itemid 更改为随机但有效的一个就**可以**了：

[index.php?option=com_content&view=article&id=102&Itemid=50](http://rocketship1.thehostingcompany.us/~hyp/index.php?option=com_content&view=article&id=102&Itemid=50)

这向我表明，您的 jos_menu 和/或 jos_menu_type 表中的数据是可疑的，因为使用随机 Itemid 50 会忽略您为 Menu Itemid 113 设置的任何设置。

菜单项是什么组件 - 只是一个标准文章？RSForms 如何融入到我从未使用过 rsforms 的整个方程式中 - 使用 {loadposition xxx}？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:23:34.450

现在可以工作了。我找不到超过 ItemID 99 的任何内容都无法链接的原因，所以我现在只是创建新的菜单链接作为具有更改的 ItemID 的外部链接，就像这样

文章&id=104&Itemid=99

代替

文章&id=104&Itemid=118

# asp.net - ASP.Net 应用程序安全设计（记住以前的密码）

> ID：10986443
> 
> 赞同：1
> 
> 时间：2012-06-11T19:38:13.197
> 
> 标签：asp.net, sql-server-2008, security, passwords

我正在开发一个 asp.net 应用程序，其中一个安全要求是应用程序必须输入“密码历史记录” - （记住之前的 8 个密码）。

我想知道是否有人有为此目的设计表（使用 SQL 2008）的经验。到目前为止，我只想有一个表，每个以前的密码一个字段和一个密码日期字段。

还有其他建议/最佳实践吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:52:22.237

我会创建一个密码历史表，仅用于存储旧密码，当然是加盐和散列的。这是一个经典的一对多关系，8 个不同的旧密码有 8 个字段似乎很脆弱。

您可以将每个历史密码的日期与它一起存储在密码历史表中，以便在他们更改密码超过 8 次时过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:33:12.793

请记住对密码更改实施速率限制。我的经验表明，如果您放弃这个机会，用户会发现是否没有密码，并且会连续 9 次更改密码以最终使用旧密码...

其他最佳实践实际上取决于您希望系统有多安全。例如，我见过的一件事是尝试使用新密码作为种子（对于现有工具）或基本迭代进行 10 秒的暴力破解。即，如果您看到 foobar5 形式的密码，请尝试查看 foobar1/2/3/4 是否匹配任何旧哈希值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:41:38.303

您的建议听起来不错，但我建议您存储密码的加盐哈希值。您需要保持每个用户的 salt 不变并将其存储在用户表中，或者如果您想在每次更改密码时刷新 salt，则将其与先前的密码条目一起存储。第一个选项使用最简单的数据库查询来检查以前的密码 - 后者您必须单独进行每个比较。

# google-analytics - 具有多个子域的 Google 分析

> ID：10986450
> 
> 赞同：7
> 
> 时间：2012-06-11T19:38:33.620
> 
> 标签：google-analytics

我有一个域名让我们称之为它`example.com`，它有多个子域。

1.  `blog.example.com`
2.  `shop.example.com`
3.  `press.example.com`
4.  `site.example.com`

我试图让这些域在谷歌分析中正确报告，首先我将分享我当前的配置，然后是它引起的问题。

**当前配置：**

在`Tracking Code`管理员的选项卡下。你在追踪什么？= 一个域有多个子域

![你在跟踪什么？](../Images/e4722256b0d98649982cb2212ad85025.png)

根域 example.com 的`profile`设置如下。

![在此处输入图像描述](../Images/ffa27e7be8eb46ffcf08a4d9b246cf4f.png)

子域 blog.example.com 的`profile`设置如下。

![在此处输入图像描述](../Images/7bf5e2eb1b5b736eb3b96898baef7bae.png)

这些子域配置文件都显示在一个帐户下，就像它们应该的那样。

![在此处输入图像描述](../Images/ec9d944be2834aa2a08b955f6a5dca3d.png)

我没有使用任何过滤器，我只是尝试按子域进行过滤，但无论内容和数字都是`example.com`.

**这个配置有问题**

所有配置文件都具有相同的数据，即来自根域的内容。

我以前没有使用过滤器，现在我是每个子域的一个，如下所示：

![在此处输入图像描述](../Images/e381851bd1f88b3b3056571423f84c6f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T20:29:44.337

我没有尝试过，但设置配置文件可能会有所帮助，如下所述：[http ://www.ericmobley.net/guide-to-tracking-multiple-subdomains-in-google-analytics/](http://www.ericmobley.net/guide-to-tracking-multiple-subdomains-in-google-analytics/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:07:22.877

您需要了解 Google Analytics 中“帐户”和“个人资料”的概念。您的帐户名称是“示例网站”。如果您想将来自子域的数据放在单独的配置文件中，请创建单独的帐户（而不是单独的谷歌帐户）。同一帐户中的所有配置文件都将具有相同的数据。

提示您查找帐户。文件夹组中的所有配置文件都属于同一个帐户。创建单独的顶级文件夹组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T23:08:31.653

我以前没有使用过滤器，现在我是每个子域的一个，如下所示：

[![在此处输入图像描述](../Images/e381851bd1f88b3b3056571423f84c6f.png)](https://i.stack.imgur.com/CG3mY.png)

虽然我认为这不再是 GA 的问题。

# c# - 如何为反射属性构建表达式

> ID：10986452
> 
> 赞同：1
> 
> 时间：2012-06-11T19:38:58.237
> 
> 标签：c#, asp.net-mvc, reflection, expression-trees

我用这个签名构建了一个 MVC Html 助手：

```
 public static MvcHtmlString EditFieldFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, object additionalViewData = null) 
```

我正在尝试构建另一个帮助器来反映对象的属性，然后为每个反映的属性调用 EditFieldFor。但正如您所见，该方法需要一个表达式。

如何将 PropertyInfo 转换为表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:29:49.613

[这个答案](https://stackoverflow.com/a/9622620/64334)告诉我该怎么做。这是我所做的：

```
foreach (var propertyInfo in editFields)
{
    var expParam = Expression.Parameter(typeof(TModel)); // TModel is a generic parameter on this method
    var expProp = Expression.Property(expParam, propertyInfo);
    var expression = Expression.Lambda(expProp, expParam);

    var fieldHtml = (MvcHtmlString)typeof (HtmlHelpers)
        .GetMethod("EditFieldFor")
        .MakeGenericMethod(typeof (TModel), propertyInfo.PropertyType)
        .Invoke(null, new object[] {html, expression, null});

    editFormHtml.Append(fieldHtml);
} 
```

# javascript - 使用javascript函数调用播放多个swf文件

> ID：10986454
> 
> 赞同：0
> 
> 时间：2012-06-11T19:39:03.137
> 
> 标签：javascript, html

单击图像时，我正在使用以下代码触发 swf 文件的播放。它工作得很好，但我想要多个 swf 文件，每个文件都由不同的图像触发。

```
<script language="JavaScript">
    function getFlashMovieObject(movieName)
    {
        if (window.document[movieName]) 
        {
            return window.document[movieName];
        }

        if (navigator.appName.indexOf("Microsoft Internet")==-1)
        {
            if (document.embeds && document.embeds[movieName])
                return document.embeds[movieName]; 
        }
        else // if (navigator.appName.indexOf("Microsoft Internet")!=-1)
        {
            return document.getElementById(movieName);
        }
    }

    function PlayFlashMovie()
    {
        var flashMovie=getFlashMovieObject("Flash1");
        flashMovie1.Play();     
    }
</script> 
```

然后电影被触发：

```
<div class="buttonimage1" style="background-color: #FFFFFF;">
<img src="icon1-small.png" alt="icon 1" onmousedown="PlayFlashMovie();" > 
```

我想添加这个，以便（例如）单击 buttonimage2 会触发“movie 2”，而 buttonimage3 会触发“movie 3”等...

```
<div class="buttonimage2" style="background-color: #FFFFFF;">
<img src="icon2-small.png" alt="icon 1" onmousedown="PlayFlashMovie();" > 
```

```
<div class="buttonimage3" style="background-color: #FFFFFF;">
<img src="icon3-small.png" alt="icon 1" onmousedown="PlayFlashMovie();" >
</div> 
```

如何为多个电影名称设置 getFlashMovieOject 函数？我已经尝试了几件事，但似乎遗漏了一些东西，而且我对 js 还是很陌生。一点帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:43:07.140

你可以让`PlayFlashMovie`函数接受一个参数：

```
function PlayFlashMovie(name) {
    var flashMovie=getFlashMovieObject(name);
    flashMovie.Play(); 
} 
```

然后像这样传递它：

```
<img src="icon1-small.png" alt="icon 1" onmousedown="PlayFlashMovie('Flash1');" >
<img src="icon2-small.png" alt="icon 2" onmousedown="PlayFlashMovie('Flash2');" > 
```

ETC

# c# - XNA 性能

> ID：10986459
> 
> 赞同：0
> 
> 时间：2012-06-11T19:39:16.347
> 
> 标签：c#, xna

我正在编写某种受几何战争启发的游戏，除了添加了 2d 刚体物理 Ai 寻路一些航点分析视线检查负载平衡等。似乎即使屏幕上有大约 80-100 个敌人，它也可以相当快地工作一旦你达到总共 250 个（150 个敌人）左右的物体，所有这些东西使性能完全崩溃。我已经搜索了代码中的任何 O(n^2) 部分，但似乎没有任何剩余。我也在使用空间网格。

即使我从所谓的昂贵的 Ai 相关处理中禁用了几乎所有东西，这似乎并不重要，它仍然会在 150 个敌人时崩溃。

现在我从头开始实现所有代码，目前甚至是矩阵乘法代码，而且我几乎完全依赖 GC 以及在某些事情上使用 C# 闭包，所以我希望这远未得到优化，但仍然对我来说，只有 1/15 的处理工作，但将对象加倍，游戏突然开始减速爬行，这对我来说没有意义吗？这是正常的吗，XNA 平台通常应该如何扩展正在处理的对象数量？

我记得我最初做的一些 slerp 旋转立方体的事情可以一次处理超过 1000 个，所以我认为我做错了什么？

编辑：这是网格结构的类

公共抽象类 GridBase{

```
 public const int WORLDHEIGHT = (int)AIGridInfo.height;
    public const int WORLDWIDTH = (int)AIGridInfo.width;
    protected float cellwidth;
    protected float cellheight;

    int no_of_col_types;

    // a dictionary of lists that gets cleared every frame
    // 3 (=no_of_col_types) groups of objects (enemy side, players side, neutral)
    // 4000 initial Dictionary hash positions for each group
    // I have also tried using an array of lists of 100*100 cells
    //with pretty much identical results
    protected Dictionary<CoordsInt, List<Collidable>>[] grid;

    public GridBase(float cellwidth, float cellheight, int no_of_col_types)
    {
        this.no_of_col_types = no_of_col_types;
        this.cellheight=cellheight;
        this.cellwidth=cellwidth;

        grid = new Dictionary<CoordsInt, List<Collidable>>[no_of_col_types];
        for (int u = 0; u < no_of_col_types; u++)
           grid[u] = new Dictionary<CoordsInt, List<Collidable>>(4000);

    }

    public abstract void InsertCollidable(Collidable c);
    public abstract void InsertCollidable(Grid_AI_Placeable aic);

    //gets called in the update loop
    public void Clear()
    {
        for (int u = 0; u < no_of_col_types; u++)
            grid[u].Clear();
    }

    //gets the grid cell of the left down corner
    protected void BaseCell(Vector3 v, out int gx, out int gy)
    {
        gx = (int)((v.X + (WORLDWIDTH / 2)) / cellwidth);
        gy = (int)((v.Y + (WORLDHEIGHT / 2)) / cellheight);

    }

    //gets all cells covered by the AABB
    protected void Extent(Vector3 pos, float aabb_width, float aabb_height, out int totalx, out int totaly)
    {
        var xpos = pos.X + (WORLDWIDTH / 2);
        var ypos = pos.Y + (WORLDHEIGHT / 2);
        totalx = -(int)((xpos / cellwidth)) + (int)((xpos + aabb_width) / cellwidth) + 1;
        totaly = -(int)((ypos / cellheight)) + (int)((ypos + aabb_height) / cellheight) + 1;

    }

} 
```

公共类 GridBaseImpl1：GridBase{

```
 public GridBaseImpl1(float widthx, float widthy)
        : base(widthx, widthy, 3)
    {

    }

    //adds a collidable to the grid /
    //caches for intersection test
    //checks if it should be tested to prevent penetration /
    //tests penetration
    //updates close, intersecting, touching lists
    //Collidable is an interface for all objects that can be tested geometrically
    //the dictionary is indexed by some simple struct that wraps the row and column number in the grid
    public override void InsertCollidable(Collidable c)
    {

        //some tag so that objects don't get checked more than once
        Grid_Query_Counter.current++;

        //the AABB is allocated in the heap
        var aabb = c.CollisionAABB;
        if (aabb == null) return;
        int gx, gy, totalxcells, totalycells;
        BaseCell(aabb.Position, out gx, out gy);

        Extent(aabb.Position, aabb.widthx, aabb.widthy, out totalxcells, out totalycells);

        //gets which groups to test this object with in an IEnumerable (from a statically created array)
        var groupstestedagainst = CollidableCalls.GetListPrevent(c.CollisionType).Select(u =>   CollidableCalls.group[u]);
        var groups_tested_against = groupstestedagainst.Distinct();
        var own_group = CollidableCalls.group[c.CollisionType];

        foreach (var list in groups_tested_against)
            for (int i = -1; i < totalxcells + 1; i++)
                for (int j = -1; j < totalycells + 1; j++)
                {

                    var index = new CoordsInt((short)(gx + i), (short)(gy + j));

                    if (grid[list].ContainsKey(index))

                        foreach (var other in grid[list][index])
                        {

                            if (Grid_Query_Counter.Check(other.Tag))
                            {

                                //marks the pair as close, I've tried only keeping the 20 closest but it's still slow
                                other.Close.Add(c);
                                c.Close.Add(other);

                                //caches the pair it so that checking if the pair intersects doesn't go through the grid        //structure loop again
                                c.CachedIntersections.Add(other);

                                var collision_function_table_id = c.CollisionType * CollidableCalls.size +      other.CollisionType;

                                //gets the function to use on the pair for testing penetration
                                //the function is in a delegate array statically created to simulate multiple dispatch
                                //the function decides what coarse test to use until descending to some complete        //geometric query
                                var prevent_delegate = CollidableCalls.preventfunctions[collision_function_table_id];

                                if (prevent_delegate == null) { Grid_Query_Counter.Put(other.Tag); continue; }

                                var a = CollidableCalls.preventfunctions[collision_function_table_id](c, other);

                                //if the query returns true mark as touching
                                if (a) { c.Contacted.Add(other); other.Contacted.Add(c); }

                                //marks it as tested in this query
                                Grid_Query_Counter.Put(other.Tag);
                            }

                        }

                }

        //adds it to the grid if the key doesn't exist it creates the list first
        for (int i = -1; i < totalxcells + 1; i++)
            for (int j = -1; j < totalycells + 1; j++)
            {
                var index = new CoordsInt((short)(gx + i), (short)(gy + j));

                if (!grid[own_group].ContainsKey(index)) grid[own_group][index] = new List<Collidable>();

                grid[own_group][index].Add(c);
            }
    }

    [...]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:18:42.843

第一的。分析您的代码。即使您只是使用手动插入的时间戳来包围您感兴趣的块。我更喜欢使用 Visual Studio Pro 中内置的分析器。

但是，根据您的描述，我认为您的问题是由于绘制调用过多造成的。一旦每帧超过 200-400 次绘制调用，您的性能就会急剧下降。尝试对渲染进行批处理，看看这是否会提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:47:23.090

您可以使用诸如[ANTS Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)之类的分析器来查看可能是什么问题。

没有任何代码，我无能为力。

# c# - 设计决策：MVVM 和 WPF 有两个视图？

> ID：10986468
> 
> 赞同：1
> 
> 时间：2012-06-11T19:39:50.517
> 
> 标签：c#, wpf, mvvm

我希望我没有监督一个陈述相同的旧问题，但据我所知，它们都更专业。

我想知道，如果我“在正确的轨道上”。过去我用 C#（主要是 .net-3.5）做了一些 WinForms 的东西，现在我想使用/学习 WPF 来做一个小项目。目前，我正在阅读很多关于 MVVM 和使用 WPF (.net4) 时的其他实现细节的信息。

我需要实现的是：

我想要一种用于 oracle 数据库的搜索工具。数据库连接等是固定的，已启动并正在运行。所以这部分没有工作可做。新工具应该在 windows7-desktop-pc*和*windows7-tablet-pc 上运行。所以我想要/需要两种不同的视图，一种是常用的鼠标键盘交互 GUI，另一种是针对触摸输入进行优化的。

所以我有了使用一个模型、一个视图模型和两个视图的想法。我不想通过 Unity 或类似的东西使用 IOC，因为这会增加一层复杂性，这对于这个小项目来说是多余的。

我的实际问题：

这是正确的方法（使用 2 个视图和一个视图模型）还是我在这里完全错了（也许 DataTemplates 在这里会更好？）？有什么好的方法来实现这个？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:56:30.483

拥有 ViewModel 背后的想法是在一个与视图特定的东西没有直接依赖关系的地方有一个地方来整合与视图相关的逻辑。所以，是的，我会说你的方法很好。

DataTemplates 似乎更适合“较小的”视图模型，因此虽然 DataTemplateSelector 可以很好地根据您的情况选择模板，但我认为值得投资一些额外的代码来为您完成全尺寸控件。

您将必须弄清楚您是否可以自动检测用户使用应用程序的方式，并且可能让您的视图名称遵循约定，以便视图的选择可以或多或少地自动发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:56:22.577

我认为你在正确的轨道上。

这是使用 MVVM 的完美示例。您可以更改视图或拥有多个视图外观，而无需更改后端。

我可以看到可能使用 DataTemplates 和 DataTemplateSelector，但如果您的视图变得复杂，那么可读性和可维护性将会恶化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:32:51.987

我也同意您走在正确的轨道上，但是对于具有嵌套用户控件或许多许多视图的更大项目，值得查看具有两种不同样式的单个视图。在最简单的情况下，触摸样式将具有更大的输入控件。这意味着对绑定逻辑的更改只需要在一个地方（单个视图）而不是使用它的两个视图中进行。

# list - 列出 Jena 中实例的对象属性

> ID：10986472
> 
> 赞同：2
> 
> 时间：2012-06-11T19:40:15.633
> 
> 标签：list, jena, object-properties, object-property

如何列出与 Jena 中的实例关联的所有对象属性？

例如：一个**Person**有一个名为“ **hasVehicle** ”的对象属性，它与一个类**Vehicle相关联**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T23:54:48.750

适当的耶拿方法是`OntClass.listDeclaredProperties`。有一些细微差别需要注意；Jena [RDF 框架操作方法](http://jena.apache.org/documentation/notes/rdf-frames.html)详细说明。

**更新**

好的，我查看了您的代码示例，并阅读了您的描述，恐怕我不明白您想要做什么。我所做的是根据您在评论中的描述重新编写您的代码示例，以便它执行我*猜您可能想要的操作：*

```
package test;

import com.hp.hpl.jena.ontology.*;
import com.hp.hpl.jena.rdf.model.*;
import com.hp.hpl.jena.util.FileManager;
import com.hp.hpl.jena.util.iterator.ExtendedIterator;

public class LeandroTest
{
    public static String NS = "http://www.owl-ontologies.com/TestProject.owl#";

    public static void main( String[] args ) {
        OntModel m = ModelFactory.createOntologyModel( OntModelSpec.OWL_MEM, null );
        FileManager.get().readModel( m, "./src/main/resources/project-test.owl" );

        OntClass equipe = m.getOntClass( NS + "Equipe" );
        OntProperty nome = m.getOntProperty( NS + "nome" );

        for (ExtendedIterator<? extends OntResource> instances = equipe.listInstances(); instances.hasNext(); ) {
            OntResource equipeInstance = instances.next();
            System.out.println( "Equipe instance: " + equipeInstance.getProperty( nome ).getString() );

            // find out the resources that link to the instance
            for (StmtIterator stmts = m.listStatements( null, null, equipeInstance ); stmts.hasNext(); ) {
                Individual ind = stmts.next().getSubject().as( Individual.class );

                // show the properties of this individual
                System.out.println( "  " + ind.getURI() );
                for (StmtIterator j = ind.listProperties(); j.hasNext(); ) {
                    Statement s = j.next();
                    System.out.print( "    " + s.getPredicate().getLocalName() + " -> " );

                    if (s.getObject().isLiteral()) {
                        System.out.println( s.getLiteral().getLexicalForm() );
                    }
                    else {
                        System.out.println( s.getObject() );
                    }
                }
            }
        }
    }
} 
```

这给出了以下输出，首先列出 的所有资源`rdf:type` `#Equipe`，然后对于每个资源，它列出模型中链接*到*该 Equipe 的资源，然后对于那些链接的资源，它列出所有 RDF 属性。我认为这不是一件特别有用的事情，但希望它会向您展示一些在 Jena 中遍历 RDF 图的模式。

```
Equipe instance: Erica
Equipe instance: Etiene
  http://www.owl-ontologies.com/TestProject.owl#EtapaExecucao_01
    EtapaExecucao_DataModificao -> 2010-03-29T10:54:05
    caso_de_teste -> http://www.owl-ontologies.com/TestProject.owl#CasoDeTeste_01
    EtapaExecucao_StatusTeste -> Passou
    EtapaExecucao_Reprodutibilidade -> Sempre
    type -> http://www.owl-ontologies.com/TestProject.owl#EtapaExecucao
    EtapaExecucao_VersaoDefeitoSurgiu -> Release ICAMMH_01.00
    EtapaExecucao_Severidade -> Minimo
    EtapaExecucao_VersaoDefeitoCorrigiu -> Release ICAMMH_02.00
    DataExecucao -> 2009-07-10T09:42:02
    EtapaExecucao_StatusDoDefeito -> Nao sera corrigido
    EtapaExecucao_DataSubmissao -> 2009-06-30T09:43:01
    Tipos_Fases -> http://www.owl-ontologies.com/TestProject.owl#FaseTesteExecucao
    EtapaExecucao_Resolucao -> Fechado
    executor_do_teste -> http://www.owl-ontologies.com/TestProject.owl#Etiene
    EtapaExecucao_PrioridadeCorrecao -> Normal
Equipe instance: Fabio
Equipe instance: Melis 
```

一些一般性建议，特别是如果您有任何后续问题：

*   问*具体*的问题，很难回答一个含糊不清的问题；
*   尽可能提供*可运行*的代码：您可以将我的代码放在下面，将其放入 Eclipse 之类的代码环境中并尝试一下
*   *提供问题*中的代码和数据，而不是在 pastebin 上链接
*   花一些时间将代码和数据减少到显示问题所需的最小形式：您的 Protégé 文件超过 600 行

# android - 在android上编译需要stl的库

> ID：10986473
> 
> 赞同：4
> 
> 时间：2012-06-11T19:40:21.423
> 
> 标签：android, c++, android-ndk, scons

我正在尝试使用 android ndk 为 android 模拟器的 x86 发行版构建一个库。该库使用 scons 进行构建，并具有一堆 stl 和 boost 依赖项。到目前为止，我已将 --cxx 和 --cc 设置为 android 工具链附带的编译器，并将 gcc 的 sysroot 设置为 ndk 附带的平台特定根目录。

现在，我收到诸如错误之类的错误：ctime：没有这样的文件或目录等。我看到 stl 库的 android ndk 中有 .a 和 .so 文件，我如何要求 scons/编译器链接反对这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:39:25.497

您必须配置库路径，这是传递给编译器的传统“-L”标志，在本例中为 gcc。（你应该使用`g++`而不是`gcc`？）

这是通过设置`LIBPATH`SCons 构造变量来完成的，如此[处](http://www.scons.org/doc/production/HTML/scons-user/a4916.html)所述。请注意，SCons 以可移植的方式执行此操作，因此您无需`-L`在路径中指定 。以下是我通常如何执行此操作的摘录：

```
libPaths = [
    '/pathToNDK/build/cxx-stl/gnu-libstdc++/lib',
    '/anotherLibPath',
    '/and/yet/another'
]

includePaths = [
    '/pathToNDK/build/cxx-stl/gnu-libstdc++/include',
    '/anotherIncludePath',
    '/and/yet/another/include'
]

env.Append(LIBPATH = libPaths, CPPPATH = includePaths)
env.Library(target='yourTarget', source = 'sourceFile.cc')
env.Program(target='yourBinary', source = 'yourSource') 
```

请注意，我还包括了如何指定包含路径（传递给编译器的传统“-I”标志）。这是将指定的包含和库路径附加到环境中。如果您不想追加，请`env.Replace()`改用。现在，同一环境中的所有构建器都将使用这些路径，在此示例中，the`Library()`和`Program()`构建器都将使用指定的路径。

此外，如果您要使用的路径位于项目目录内（在 SConstruct 的同一目录或子目录中），那么您不需要使用完整的绝对路径，但可以在前面加上 '#' 并指定相对于根级 SConstruct。

# haskell - 如何阻止 wxhaskell 在输入文本控件时发出哔哔声？

> ID：10986474
> 
> 赞同：0
> 
> 时间：2012-06-11T19:40:23.057
> 
> 标签：haskell, wxwidgets, wxhaskell

我玩过`processEnter`,`on command`和无济于事`on anyKey`。`textEntry`我一直在查看大量关于 wx-core 的文档，但我没有看到任何有用的信息。我在 Windows 8 上使用 wxhaskell 0.13.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:06:26.843

您需要使用[wxTE_PROCESS_ENTER](http://docs.wxwidgets.org/trunk/classwx_text_ctrl.html)样式才能有机会在`wxTextCtrl`. 如果您不使用它，此键用于激活默认对话框按钮 - 或在 Windows 下发出哔声，如果没有此类按钮。

# javascript - 通过 Javascript 调用 WCF Web 服务时返回“错误请求”错误

> ID：10986479
> 
> 赞同：1
> 
> 时间：2012-06-11T19:41:07.290
> 
> 标签：javascript, wcf

我正在尝试通过 javascript 向 WCF Web 服务方法发出 ajax GET 请求。该请求每次都返回 400“错误请求”错误。但是，如果我通过 WCF 测试客户端调用相同的 Web 服务方法，它会返回正确的结果。

此外，通过 javascript 的 ajax 调用在 GET 和 POST 请求上都返回错误请求错误。

我已将 [WebGet] 属性添加到我的 Web 服务方法，但错误仍然存​​在。

这是我的 javascript 方法和 ajax 调用：

```
function Getdata()
{
var methodUrl = serverUrl + "/GetData";
      $.ajax({
    async: false,
                 type: "GET",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    url: methodUrl,
    beforeSend: function (XMLHttpRequest) {
    //ensures the results will be returned as JSON.
    XMLHttpRequest.setRequestHeader("Accept", "application/json");
    },
    success: function (data) {

    },
    error: function (XmlHttpRequest, textStatus, errorThrown) {
        alert("ERROR: GetData() Check your browsers javascript console for more details." + " \n XmlHttpRequest: " + XmlHttpRequest + " \n textStatus: " + textStatus + " \n errorThrown: " + errorThrown);
    }
});
} 
```

这里，serverUrl 的格式为：“http://hostname:portnumber/webServiceProxy.svc”

知道为什么请求在通过 javascript 调用时会返回“错误请求”错误，并且在通过 WCF 测试客户端调用时可以正常工作吗？任何输入将不胜感激！谢谢！

此外，我已经比较了从 WCF 测试客户端发出的请求和使用 Fiddler 从我的 AJAX 请求发出的请求，这是我看到的：

WCF 测试客户端请求：

```
POST http://hostname:portnumber/WebServiceProxy.svc HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://tempuri.org/IWebServiceProxy/GetData"
Host: hostname:portnumber
Content-Length: 144
Expect: 100-continue
Accept-Encoding: gzip, deflate

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><GetData xmlns="http://tempuri.org/"/></s:Body></s:Envelope> 
```

我的 AJAX 请求：

```
GET http://hostname:portnumber/WebServiceProxy.svc/GetData HTTP/1.1
Content-Type: application/json; charset=utf-8
Accept-Language: en-us
Referer: http://hostname/OrgName/WebResources/resourceName?pagemode=iframe
Accept: application/json
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; InfoPath.3; .NET4.0E; BOIE9;ENUS) 
```

主机：主机名：端口号连接：保持活动状态

所以我看到的最大区别是 WCF 测试客户端发出 POST 请求并在 SOAP 信封中发送 Web 服务方法名称，而我的 ajax 请求是 GET 并将 Web 服务方法名称添加到 url。查看这些请求，关于如何更改我的 ajax 调用以使其正常工作的任何想法？谢谢！

编辑以添加我的 web.config 文件内容：

```
<?xml version="1.0"?> 
```

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off" />
</system.web>

<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IDDSWCFService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://machinename:8080/DDSWCFService" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IDDSWCFService" contract="WCFService.IDDSWCFService"
            name="WSHttpBinding_IDDSWCFService">
            <identity>

            </identity>
        </endpoint>
    </client>
    <behaviors>
        <serviceBehaviors>

            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>

        </serviceBehaviors>

        <endpointBehaviors>
            <behavior name="webHttpBehavior">
                <enableWebScript/>
                <webHttp helpEnabled="true"/>
            </behavior>
        </endpointBehaviors>

    </behaviors>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:13:07.683

> 我看到 WCF 测试客户端请求和我的 ajax 请求之间的最大区别是我发出 GET 请求并在 url 中传递 Web 服务方法的名称，而 WCF 测试客户端发出 post 请求并在 Web 中发送SOAP 信封中的服务方法名称。

似乎您的服务配置了 SOAP 绑定并且无法使用 AJAX Get 请求。

`WebHttpBinding`如果您想从 JS 使用您的服务，则需要使用。

1.  添加`[WebGet]`属性得到你的操作
2.  更改端点中的绑定 -`binding="webHttpBinding"`
3.  为端点配置行为

网上有很多样本。例如这个[http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)

```
<endpointBehaviors>
  <behavior name="webBehavior">
    <webHttp />
  </behavior>
</endpointBehaviors> 
```

您需要将服务部分添加到您的 web.config 文件中。`webHttpBinding`除非您告诉他，否则主机不知道您要使用。

```
<services>
  <service name="Service1">
    <endpoint address=""
              binding="webHttpBinding"
              contract="IService1" />
  </service>
</services> 
```

下面的链接提供了在 IIS 中托管服务的详细说明（带有`wsHttpBinding`）。你只需要使用`webHttpBinding`而不是`wsHttpBinding`- [http://msdn.microsoft.com/en-us/library/ms733766.aspx](http://msdn.microsoft.com/en-us/library/ms733766.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:36:45.013

我希望您的服务在您使用它的另一个域中运行。在这些情况下，您必须使用 JSONP 调用。

修改`dataType`为`jsonp`.

```
$.ajax({
  //..
  dataType: "jsonp",
  //..
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:51:15.587

感谢所有的回复。令人惊讶的是，我设法修复了错误，但解决方案完全不是我所期望的。我必须在 Service1.svc 文件的标记中添加一个附加属性：

Factory="System.ServiceModel.Activation.WebScriptServiceHostFactory

我不确定为什么在构建项目时没有自动将其添加到文件中，但这就是它的作用。我现在可以毫无问题地通过浏览器以及我的 AJAX 请求调用 Test 方法。

再次感谢大家的帮助。

# c# - C# 在 Process.Kill() 期间仅完成了 ReadProcessMemory 或 WriteProcessMemory 请求的一部分

> ID：10986486
> 
> 赞同：19
> 
> 时间：2012-06-11T19:41:22.733
> 
> 标签：c#, exception, process

我一直在非常广泛地研究这个问题，似乎找不到答案。

我知道`Only part of a ReadProcessMemory or WriteProcessMemory request was completed`当 32 位进程尝试访问 64 位进程时会引发异常，对于 64 位修改 32 位进程也是如此。

该问题的解决方案是将平台目标更改为“任何 CPU”。我已经尝试过了，不幸的是这并不能解决我的问题。

下一个代码块是不断抛出异常的原因。运行此代码的程序用于打开远程计算机上的应用程序，并保留程序本身打开的所有进程的列表，这样我就不必遍历所有进程。

```
Process processToRemove = null;
lock (_runningProcesses)
{
    foreach (Process p in _runningProcesses)
    {
        foreach (ProcessModule module in p.Modules)
        {
            string[] strs = text.Split('\\');

            if (module.ModuleName.Equals(strs[strs.Length - 1]))
            {
                processToRemove = p;
                break;
            }
        }
        if (processToRemove != null)
        {
            break;
        }
    }
    if (processToRemove != null)
    {
        processToRemove.Kill();
        _runningProcesses.Remove(processToRemove);
    }
} 
```

这些进程可以而且很可能是 32 位和 64 位混合在一起的。

有什么我不应该做的事情，还是有更好的方法来做这一切？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T09:10:54.273

正如Process.Modules和[这个线程](http://www.eggheadcafe.com/software/aspnet/30803255/enumerating-modules-inside-a-process-in-a-64-bit-system.aspx)[的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.modules.aspx)的评论中所详述的那样，在从 64 位进程枚举 32 位进程时存在一个已知问题，反之亦然：`Process.Modules`

> .NET 的 Process.Modules 在内部使用 PSAPI.dll 中的函数 EnumProcessModules。此函数有一个已知问题，即它无法跨 32/64 位进程边界工作。因此，从 32 位进程枚举另一个 64 位进程（反之亦然）无法正常工作。

解决方案似乎是使用该[`EnumProcessModulesEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682633%28v=vs.85%29.aspx)函数（必须通过 P/Invoke 调用），但是该函数仅在更高版本的 Windows 上可用。

> 我们通过向 PSAPI.dll (http://msdn2.microsoft.com/en-us/library/ms682633.aspx) 添加一个名为 EnumProcessModulesEx 的新函数来解决此问题，但我们目前无法在这种情况下使用它：
> 
> *   它仅适用于 Windows Vista 或 Windows Server 2008
> *   目前 .NET 2.0 Framework 没有服务包或修补程序来使 Process.Modules 使用这个新 API

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T00:25:34.993

只有一些关于流程处理和我要更改的锁定的问题：

```
object lockObject = new object();
List<Process> processesToRemove = new List<Process>();
foreach (Process p in _runningProcesses)
{
    foreach (ProcessModule module in p.Modules)
    {
        string[] strs = text.Split('\\');

        if (module.ModuleName.Equals(strs[strs.Length - 1]))
        {
            processesToRemove.Add(p);
            break;
        }
    }                    
}                
lock (lockObject)
{
    foreach (Process p in processesToRemove)
    {                 
        p.Kill();
        _runningProcesses.Remove(p);
    }                
} 
```

我不是在回答赏金，只是想提供一些想法。此代码未经测试，因为我不完全知道您要在那里做什么。

只需考虑不要锁定进程列表并尽可能缩短锁定时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:29:32.010

我同意 @sprinter252 不`_runningProcesses`应该在这里用作您的同步对象。

```
//Somewhere that is accessible to both the thread getting the process list and the thread the 
//code below will be running, declare your sync, lock while adjusting _runningProcesses
public static readonly object Sync = new object();

IList<Process> runningProcesses;
lock(Sync)
{
    runningProcesses = _runningProcesses.ToList();
}
Process processToRemove = null;
foreach (Process p in _runningProcesses)
{
    foreach (ProcessModule module in p.Modules)
    {
        string[] strs = text.Split('\\');
        if (module.ModuleName.Equals(strs[strs.Length - 1]))
        {
            processToRemove = p;
            break;
        }
    }
    if (processToRemove != null)
    {
        break;
    }
}
if (processToRemove != null)
{
    //If we've got a process that needs killing, re-lock on Sync so that we may 
    //safely modify the shared collection
    lock(Sync)
    {
        processToRemove.Kill();
        _runningProcesses.Remove(processToRemove);
    }
} 
```

如果此代码被包装在一个循环中以继续检查`_runningProcesses`您希望终止的进程，请考虑更改`processToRemove`为`processesToRemove`并将其类型更改为集合，在检查非零计数并锁定后迭代底部块中的该列表在该循环之外，以减少每个要杀死的进程获取和释放锁的开销。

# javascript - JavaScript 输入字段不可编辑？

> ID：10986487
> 
> 赞同：-1
> 
> 时间：2012-06-11T19:41:24.440
> 
> 标签：javascript, html

伙计，我有以下代码

```
<script language="javascript">

   my_row_html = "<input type='text' value='"+node.data.pkey+"' width='300px'>";
</Script> 
```

当输出出现时，该字段不可编辑，任何人都可以帮我修复它，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:49:18.930

**您可以使用jQuery**尝试此操作：

```
$('<input />').appendTo('#container'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:57:28.293

您可以添加任何页面元素，包括通过 JavaScript 动态输入的内容。您可以通过 JavaScript 框架（如 jQuery）或直接通过 dom 来实现。通过查看下面的 Google 查询结果列表，您可以看到很多这样做的示例：

[谷歌比我更能回答这个问题](https://www.google.com/search?client=opera&rls=en&q=javacript%20createelement&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest#sclient=psy-ab&hl=en&client=opera&hs=UoB&rls=en&channel=suggest&q=javascript%20dynamically%20create%20input&oq=javascript%20dynamically%20create%20input&aq=f&aqi=g-K4&aql=&gs_l=serp.3..0i30l4.35455.41077.0.43274.35.16.0.18.18.3.222.2686.0j14j2.16.0...0.0.t7qr1rqHCM0&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.,cf.osb&fp=e1bee19225e94f5e&biw=1164&bih=892)

# java - 将 AudioBuffer 传递给 LibGdx FFT

> ID：10986488
> 
> 赞同：2
> 
> 时间：2012-06-11T19:41:26.200
> 
> 标签：java, audio, fft, libgdx, audiobuffer

我对 LibGdx 有疑问，我希望使用 libGdx 为 Android 制作音频可视化工具，我可以使用 Visualizer class() 中的 Android FFt，但是，因为我希望我的应用程序可以在桌面上运行，所以我不能。

我想要的是最终能够做到这一点：

```
for(int i=0; i < fft.getBandWidth(); i++){
    pixmap.drawLine(0, 480, 1600, (int) fft.getBand(i));
} 
```

现在是频率波，如果我能做到这一点，我可以按照我知道的方式使用 fft。我使用这种方法是因为我首先学会了处理和 Minim Audio 以这种方式工作。

现在，我有：

> ```
>  Assets.playMusic(Assets.music);
>       float[] samples = new float[SAMPLES];
>       ShortBuffer shortSamples = AudioTools.allocateShortBuffer(SAMPLES, 1);
>       fft.forward(samples);
>       pixmap.setColor(1.0f, 0.0f, 1.0f, 1.0f);
>       for(int i = 0; i < fft.getBandWidth(); i++)
>       {
>           pixmap.drawLine(0, 480, 1600, (int) fft.getBand(i));
>       } 
> ```

我希望我能理解（第一语言的法语）。并感谢所有愿意回答我问题的人。

# c# - 在对象的实例上为同一方法创建多个线程

> ID：10986492
> 
> 赞同：9
> 
> 时间：2012-06-11T19:41:36.460
> 
> 标签：c#, multithreading

我有个问题。如果我有一个带有方法 DoSomething() 的对象，如果我为此方法创建多个线程，它是否可行且有效，它会作为自己的单独线程运行吗？

例如

```
public class SomeClass
{
    public void DoSomething()
    {
        //somethings done here
    }
}

public class MainProgram
{
    public MainProgram()
    {
         InitializeComponents();
    }

    protected override OnStart(string[] args)
    {
         SomeClass sc = new SomeClass();
         Thread workerOne = new Thread(() => sc.DoSomething());
         workerOne.Start();

         Thread workerTwo = new Thread(() => sc.DoSomething());
         workerTwo.Start(); //start a new thread calling same method
    }
} 
```

我希望这能解释我的意思。这会起作用或引起任何问题吗？

我正在编写一个几乎需要实时软件的程序，我目前正在决定初始化 SomeClass 的新实例是否更好？

希望有人能解答。如果我的问题没有意义，请发表评论，我会进一步解释！

谢谢，

Base33

PS 该代码是专门为示例编写的:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T19:46:35.093

每个线程都有一个单独的调用堆栈，所以*是*的，它们都可以在同一个对象上使用相同的方法。事实上，如果需要，每个线程都可以（通过递归）在同一个实例上*多次*调用同一个方法，如果你真的想要的话。

但是，如果您在该对象中使用**状态**（实例或静态字段等，以及与该状态相关的任何内容）*，**可能会让您感到不安。*您需要确保您对任何共享状态的访问都充分考虑（并且可能是同步）多线程访问。

 **** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T19:45:56.450

是的，你可以这么做。但是，您必须确保您在该方法中的成员访问是线程安全的。

如果你改变对象的状态，你应该锁定你的读写（不是说任何特定的机制）或者验证在任何给定时间中断方法是无害的，并且不同线程上的其他调用仍然可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:47:12.677

> 如果我有一个带有方法 DoSomething() 的对象，如果我为此方法创建多个线程，它是否可行且有效，它会作为自己的单独线程运行吗？

是的，有可能。在您的代码示例中，`DoSomething`在`SomeClass`. 两个线程共享这一点。您有两个不同的线程，但共享一个实际对象。

> 这会起作用或引起任何问题吗？

这完全取决于您的用例。它可能会也可能不会。如果对象是共享的，您需要同步对它们的访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T19:49:53.237

它没有问题。我会运行没有任何错误。

> 这就像创建一个对象并在该对象上调用两次方法一样。唯一的事实是调用相同方法的两次发生在不同的线程上。***

# scheme - Racket Scheme 是否提供了类似 Smalltalk 的基于图像的环境？

> ID：10986496
> 
> 赞同：5
> 
> 时间：2012-06-11T19:41:48.707
> 
> 标签：scheme, racket, smalltalk

有使用 Racket Scheme 经验的人能告诉我它是否提供了类似 Smalltalk 的基于图像的环境吗？“基于图像”是指通常从编程环境的快照开始，对其进行处理（添加函数、对象和 GUI 元素），然后将所有内容保存到最后的新快照中。我也在寻找诸如集成到环境中的界面构建器、对象检查器等东西。Racket 是否提供这种东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T22:04:08.530

球拍不是基于图像的，不。不过，它确实有一个[GUI 设计](http://planet.racket-lang.org/display.ss?package=mred-designer.plt&owner=orseau)器。

# json - JSON.parse 长度限制 PhoneGap

> ID：10986501
> 
> 赞同：1
> 
> 时间：2012-06-11T19:42:15.783
> 
> 标签：json, visual-studio-2010, cordova, windows-phone-7-emulator

我有一个简单的PhoneGap 项目，我在VS2010 和模拟器中使用PhoneGap 模板。

如果我尝试 JSON.parse 来自 window.localStorage 的对象数组，则仅在对象数量少于 200 个时才有效，就我而言。

我可以解析的 JSON 的长度是否有限制？

# grid - extjs 4.0 检索网格值

> ID：10986503
> 
> 赞同：1
> 
> 时间：2012-06-11T19:42:33.493
> 
> 标签：grid, extjs4

下面的代码用于获取网格中选定行的 Json 字符串。然而，这感觉相当笨拙，或者是 extjs 4 的方式？

```
var json = "[";
var selrows = g.getView().getSelectionModel().getSelection();
for (var r=0; r<selrows.length; r++) {
    var selrow = selrows[r];
    json += "{";
    for (var f=0; f<selrow.fields.length; f++) {
        var n = selrow.fields.items[f].name;
        var v = selrow.data[n];
        json += "'" + n + "' : '" + v + "',";
    }
    json += "},";
}  
json += "]";
alert(json); 
```

在 Firebug 中，我看到了 selrow var 的类似 json 的表示，但我似乎无法在 javascript 中掌握它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:55:13.747

尝试这个：

```
json = Ext.JSON.encode(g.getView().getSelectionModel().getSelection().map(function(e){ return e.data; }));

alert(json); 
```

# c - 我可以有一个接受未定义数量参数的 C 宏吗？

> ID：10986510
> 
> 赞同：7
> 
> 时间：2012-06-11T19:43:00.690
> 
> 标签：c, logging, macros

> **可能重复：**
> [如何制作可变参数宏（可变数量的参数）](https://stackoverflow.com/questions/679979/how-to-make-a-variadic-macro-variable-number-of-arguments)

我想在基本 C 中有一个日志宏，它接受类似于`printf`并记录它们的参数。但是，我希望它的记录方式（日志级别、文件 vs`stderr`等）在编译时设置，而不是运行时设置；如果我将参数设置为忽略低级日志记录，则该方法什么都不做，并希望在代码之外进行优化。

到目前为止，我有一个宏，它是根据编译时定义的参数定义的。如果定义了参数，则记录转到我的日志方法（记录到文件），否则转到`stderr`. 但是，我只能将一个字符串传递给这个宏。log 方法能够接受不定数量的参数并使用`printf`语法工作。我想知道是否有办法设置我的宏，以便它将无限数量的参数传递给日志文件？

而且由于我怀疑答案是我做不到，还有另一种方法可以在基本 C 中实现我想要的（我不能使用 C++ 或 boost）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T19:44:37.617

C99 有可以接受可变数量参数的宏。它们被称为*可变参数宏*。

[http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)

例子：

```
#define eprintf(...) fprintf (stderr, __VA_ARGS__)
#define dfprintf(stream, ...) fprintf(stream, "DEBUG: " __VA_ARGS__) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:44:50.843

是的你可以。C99[开箱即](http://www.delorie.com/gnu/docs/gcc/gcc_44.html)用地支持这一点。

语法如下：

`#define debug(format, ...) fprintf (stderr, format, ## __VA_ARGS__)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:45:45.843

请参阅 comp.lang.c 常见问题解答中的 Q10.26：[如何编写带有可变数量参数的宏，或使用预处理器“关闭”具有可变数量参数的函数调用？](http://www.c-faq.com/cpp/varargs.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:48:56.853

您可以使用省略号来定义带有可变数量参数的宏：

```
#define debug(format, ...) fprintf (stderr, format, __VA_ARGS__) 
```

[http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_the_GNU_Compiler_Collection/variadic-macros.html](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/Using_the_GNU_Compiler_Collection/variadic-macros.html)

# c# - C#：测量所用时间并在时间过去时退出函数

> ID：10986513
> 
> 赞同：0
> 
> 时间：2012-06-11T19:43:15.740
> 
> 标签：c#, time, timeout, measure

我想运行一个函数 ( `funcA`) 并使用另一个函数 ( `timerFunc`) 作为计时器。如果正在运行的函数 ( `funcA`) 已经运行了 10 秒，我想使用计时器函数 ( `timerFunc`) 退出它。这可能吗？基本上我想做的是：

```
void funcA() {
    // check event 1
    // check event 2
    // check event 3
    // time reaches max here! --exit--
    //check event 4
} 
```

如果不是，那么处理这种情况的最佳方法是什么？我考虑过使用秒表，但我不确定这是否是最好的做法，主要是因为我不知道在什么事件之后会达到超时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:13:11.437

```
Thread t = new Thread(LongProcess);
t.Start();
if (t.Join(10 * 1000) == false)
{
    t.Abort();
}
//You are here in at most 10 seconds

void LongProcess()
{
    try
    {
        Console.WriteLine("Start");
        Thread.Sleep(60 * 1000);
        Console.WriteLine("End");
    }
    catch (ThreadAbortException)
    {
        Console.WriteLine("Aborted");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:46:18.473

您可以将所有事件放入 Action 数组或其他类型的委托中，然后遍历列表并在适当的时间退出。

或者，在后台线程或任务或其他线程机制中运行所有事件，并在到达适当时间时中止/退出线程。硬中止是一个糟糕的选择，因为它可能导致泄漏或死锁，但您可以在适当的时候检查 CancellationToken 或其他东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:04:19.603

我会创建一个列表，然后非常快：

```
class Program
{
    static private bool stop = false;
    static void Main(string[] args)
    {
        Timer tim = new Timer(10000);
        tim.Elapsed += new ElapsedEventHandler(tim_Elapsed);
        tim.Start();

        int eventIndex = 0;
        foreach(Event ev in EventList)
        {
           //Check ev
            // see if the bool was set to true
            if (stop)
                break;
        }
    }

    static void tim_Elapsed(object sender, ElapsedEventArgs e)
    {
        stop = true;
    }
} 
```

这应该适用于一个简单的场景。如果它更复杂，我们可能需要更多细节。

# launcher - 自定义主页启动器

> ID：10986514
> 
> 赞同：0
> 
> 时间：2012-06-11T19:43:19.990
> 
> 标签：launcher

我正在寻找制作一个定制的家用发射器。当心：我对这是如何完成的只有 0% 的了解。

所以我拥有 lg 的自尊和 Sonyericsson xperia arc。我喜欢我自尊的 4.3" 屏幕，但我喜欢我的 xperia arc 的启动器。我可以将我的 arc 中的 png 和动画交换到我的自尊并重新编译它们，还是比这更多？

哦，弧的启动器是 890kb，我认为启动器的大小是 7mb。为什么大小差异这么大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:43:05.490

您应该检查 adt 附带的示例示例中的答案。他们可能会帮助您获得正确的启动器。

# c++ - 如何解决无法使用 using namespace std; 在 C++ 中

> ID：10986516
> 
> 赞同：4
> 
> 时间：2012-06-11T19:43:30.360
> 
> 标签：c++, linux, gcc, hp-ux

我在尝试将我的 C++ 源代码从 HP-UX 移植到 Linux 时遇到了这个问题。当我尝试在 Linux 上编译 C++ 源代码时，它会抱怨组件（来自标准 C++ 库）不存在。使用命名空间std放置行；在源代码的顶部似乎解决了这个问题。当我尝试在 HP-UX 上重新编译代码时，aCC 编译器抱怨这里只有命名空间名称是有效的（它不认为 std 是一个有效的命名空间）。我想知道是否有办法解决这个问题，以便源代码与 HP-UX 长期弃用的 C++ 编译器和 LINUX 的 GCC 编译器二进制兼容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:48:36.787

这很糟糕，但你可以这样做：

```
#ifndef __HP_aCC
using namespace std;
#endif 
```

从[这里](http://compgroups.net/comp.sys.hp.hpux/i-need-a-macro-that-a-native-hp-compiler-def/197260)定义，我无法验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:55:10.230

您可以使用预处理器来检查操作系统以及是否包含`namespace std`; 因此，如果您的操作系统不是 HP aCC，则它不包含 std，否则它包含。像这样：

```
#ifndef __HP_aCC
using namespace std;
#endif 
```

或者，如果您想检查 linux 和 win，并且仅在那些操作系统的情况下使用命名空间 std；你也可以这样做：

```
#if defined(WIN32) || defined(LINUX)
using namespace std;
#endif 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:49:30.903

`#ifdef`如果你真的不想要's ，你应该能够做到这一点：

```
namespace std {}
using namespace std; 
```

也就是说，创建或扩展`std`命名空间。在 Linux 上，它将扩展，而在 HP-UX 上，它将创建。在任何一种情况下，`using`都将是有效的。

但是，如果 HP-UX 编译器和您说的一样旧，那么包含 C++ 头文件的源代码很可能是旧样式：

```
#include <iostream.h> 
```

而不是现代风格：

```
#include <iostream> 
```

如果您有解决此问题的方法，那么您可能在代码中的某个地方使用了条件编译。如果您已经将这些特定于平台的决策本地化到代码中的一个位置，那么这将是添加代码以仅`using namespace std`用于那些需要它的平台的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T20:07:59.007

1.  确保您包含正确的标题。C++ 没有定义哪些标准头文件可能包含其他标准头文件，因此当您使用间接包含时，实现的行为会有所不同。因此，只需验证您需要包含的所有内容是否都*直接*包含在内。

2.  不要`using namespace std;`只使用完全限定您使用的名称，或使用`using`调用您需要的特定组件的声明。

    ```
     using std::string;

      string s; // no need for using namespace std 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T19:47:00.613

您可以使用特定于平台的常量，例如`LINUX`or`WIN32`来添加或不添加行`using namespace std`。执行此操作的常用方法是制作（或者更常见的是生成）一个`config.h`文件，为您使用的特定于平台的类型名称定义别名。

# html - 垂直对齐行内块元素

> ID：10986519
> 
> 赞同：1
> 
> 时间：2012-06-11T19:43:43.433
> 
> 标签：html, css

我在想我可以这样做：

```
 <div style='height:100px;vertical-align:middle;border:1px solid red;'>
    <div style='display:inline-block;'>hi there</div>
    <div style='display:inline-block;'>hi there</div>
  </div> 
```

并且里面的div会在中间垂直对齐，但是由于某种原因这不起作用，我实现这个atm的唯一方法是这样做（使用line-height = to height）：

```
 <div style='height:100px;border:1px solid red;line-height:100px;'>
    <div style='display:inline-block;'>hi there</div>
    <div style='display:inline-block;'>hi there</div>
  </div> 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:49:36.993

这是一个很好的方法。您也可以添加`display: table-cell`到父 div，在这种情况下，vertical-align: middle 可以工作 -> [http://tinkerbin.com/mxle0LH4](http://tinkerbin.com/mxle0LH4)。不幸的是，宽度像这样被剪掉了。是的，最好的方法是使用行高。但是将其设置在父元素上，而不是单独设置给子元素-> [http://tinkerbin.com/ssvg8yPX](http://tinkerbin.com/ssvg8yPX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:50:01.237

我用这个

```
.inner { 
    display:        inline-block;
    padding-top:    40px;
    padding-bottom: 40px;
}​
​
​&lt;div style="border:1px solid red;">
    <div class="inner">hi there</div>
    <div class="inner">hi there</div>
</div>
​ 
```

# mysql - MySql 在最近的 start_date 上加入？

> ID：10986520
> 
> 赞同：1
> 
> 时间：2012-06-11T19:43:53.680
> 
> 标签：mysql, sql

我有两张表，一张有交易（有日期）。另一个带有百分比和日期，它生效的百分比（假设 00:00:00）。该百分比一直有效，直到新的百分比生效。我需要加入交易发生时生效的百分比。

```
transactions_table

event_date     amount
2011-01-01     230
2011-02-18     194
2011-03-22     56
2011-04-30     874

percent_table

effective     percent
2010-12-30    15
2011-03-05    25
2011-04-12    30 
```

我正在寻找的结果是：

```
event_date     amount     percent
2011-01-01     230        15
2011-02-18     194        15
2011-03-22     56         25
2011-04-30     874        30 
```

我试过了：

```
SELECT t.event_date, t.amount, p.percent 
FROM transactions_table AS t 
LEFT JOIN percent_table AS p ON t.event_date >= p.effective 
ORDER BY `t`.`event_date` DESC LIMIT 0 , 30; 
```

这给了我看似随机的百分比。在我看来，我需要获得最大的日期 >= p.effective，而不仅仅是任何随机日期 >= p.effective。

我试过：

```
SELECT t.event_date, p.percent 
FROM bedic_sixsummits_transactions AS t 
LEFT JOIN bedic_sixsummits_percent AS p ON MAX(t.event_date >= p.effective) 
ORDER BY `t`.`event_date` DESC LIMIT 0 , 30 
```

但是 MySQL 只是嘲笑我微弱的尝试。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:52:04.577

```
SELECT t.event_date, t.amount, p.percent
FROM bedic_sixsummits_transactions AS t
LEFT JOIN bedic_sixsummits_percent AS p
ON p.effective = 
   ( SELECT MAX( p2.effective ) FROM bedic_sixsummits_percent AS p2
     WHERE p2.effective <= t.event_date
   )
ORDER BY t.event_date DESC LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:25:02.227

更简单且没有子查询：

```
SELECT event_date, amount, MAX(_percent) as _percent
FROM transactions_table
LEFT JOIN percent_table p1 ON event_date >= effective
GROUP BY event_date, amount
ORDER BY event_date; 
```

[http://sqlfiddle.com/#!3/e8ca3/17/0](http://sqlfiddle.com/#!3/e8ca3/17/0)

请注意，这是可能的，因为所涉及的业务模型。如果您不想检索 percent_table 的其他字段，它将不再适用：/

# javascript - 在多个动态添加的表单上初始化 jQuery validate() 函数

> ID：10986523
> 
> 赞同：0
> 
> 时间：2012-06-11T19:44:06.043
> 
> 标签：javascript, jquery, jquery-validate, jquery-forms-plugin

有人建议最好`$('#form').validate({})`在页面加载而不是单击事件时初始化函数：[jquery.form/validate 插件仅允许在输入更改时提交](https://stackoverflow.com/questions/10984196/jquery-form-validate-plugin-only-allow-submit-if-input-is-changed)

我想知道如何在不将函数包装在`$('#form').validate({})`函数内部的情况下为多个动态添加的表单执行此操作`on('click', 'input[type="submit"]',`。

以这段代码为例：

```
var id="some identifier for the specific form that is submitted";
`$('#form'+id).validate({})` 
```

1.  这个唯一标识符`id`是如何首先创建来区分每个表单的？
2.  如果您不知道`id`页面加载后的时间，因为它是动态创建的，例如通过 AJAX。

我一直在这样做，但这是**不**推荐的：

```
$(document.body).on('click', 'input[type="submit"]', function(){
  var id=this.id;
  $('#form'+id).validate({});
}); 
```

想法？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:25:33.530

如果页面加载时表单根本不存在，那么`.validate()`我不会在提交时初始化，而是在创建表单后立即初始化它......

```
// code that dynamically creates #myNewform, then initialize validate()

$('#myNewform').validate(); 
```

(`validate()`不应该在提交处理程序中，因为直到单击提交按钮后才初始化验证。这会导致表单验证失败并且必须第二次提交时出现问题。第二次提交然后重新初始化插件形成第二次。有关类似问题，请参见 [此处](https://stackoverflow.com/questions/10609567/how-do-i-get-my-jquery-validator-code-to-run-a-second-time-after-a-form-has-alre/10609871#10609871)、[此处](https://stackoverflow.com/questions/10609567/how-do-i-get-my-jquery-validator-code-to-run-a-second-time-after-a-form-has-alre/10609871#10609871)和[此处](https://stackoverflow.com/questions/10825290/jquery-validation-validate-several-time-a-field-in-a-hidden-area/10825498#10825498)。）

对于现有`form`的页面...

```
$(document).ready(function(){
    $('#myform').validate();
}); 
```

或多个`form`共享相同的验证选项...

```
$(document).ready(function(){
    ('.myform').each(function(){
        $(this).validate();
    });
}); 
```

# asp.net - 如何获取虚拟目录物理路径

> ID：10986525
> 
> 赞同：14
> 
> 时间：2012-06-11T19:44:14.097
> 
> 标签：asp.net, iis

我们知道虚拟目录可以链接到具有不同名称的文件夹，我怎样才能获得虚拟目录的物理路径？

我一直在尝试使用 HttpContext.Current.server.MapPath 但它返回给我物理路径加上我在参数中发送的路径，即使该目录甚至不存在或者它以不同的名称存在。

例子：

C:\blabla\Sites\Application1\Imaageesss - 在光盘上

Application1\Images（在 ISS 中，我的虚拟目录）

但是，如果我在“/Images”上执行 MapPath，它将永远不会给我 C:\blabla\Sites\Application1\Imaageesss 但 C:\inetpub\wwwroot\Images 这不是链接到的真实目录。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-16T00:12:18.447

```
Server.MapPath("~/Images") 
```

是正确的方法，因为“〜”引用了应用程序的根。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T19:44:48.600

这对我有用：

```
string physicalPath =    
System.Web.Hosting.HostingEnvironment.MapPath(HttpContext.Current.Request.ApplicationPath); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T19:47:44.043

如果你试试这个小片段呢？

```
string physicalPath = HttpContext.Current.Request.MapPath(appPath); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-09T13:37:29.763

经过更多研究，我能够创建一种方法来获取虚拟 IIS 目录的物理路径：

```
public static string VirtualToPhysicalPath(string vPath) {
    // Remove query string:
    vPath = Regex.Replace(vPath, @"\?.+", "").ToLower();

    // Check if file is in standard folder:
    var pPath = System.Web.Hosting.HostingEnvironment.MapPath("~" + vPath);
    if (System.IO.File.Exists(pPath)) return pPath;

    // Else check for IIS virtual directory:
    var siteName = System.Web.Hosting.HostingEnvironment.ApplicationHost.GetSiteName();
    var sm = new Microsoft.Web.Administration.ServerManager();
    var vDirs = sm.Sites[siteName].Applications[0].VirtualDirectories;
    foreach (var vd in vDirs) {
        if (vd.Path != "/" && vPath.Contains(vd.Path.ToLower())) pPath = vPath.Replace(vd.Path.ToLower(), vd.PhysicalPath).Replace("/", "\\");
    }
    return pPath;
} 
```

警告：此解决方案假定您只有一个根应用程序 (Applications[0])。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-27T15:09:02.663

以下应该可以正常工作：

```
var physicalPath = HostingEnvironment.MapPath("~/MyVirtualDirectory"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T19:48:49.797

这可能会回答您的问题：

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.physicalpath.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.physicalpath.aspx)

但是，我目前无法提供示例，因为我有很多工作要做。当我找到一些时间时，我会发送详细信息。

# c++ - 返回不同类型变量的单个 get 方法

> ID：10986526
> 
> 赞同：0
> 
> 时间：2012-06-11T19:44:14.137
> 
> 标签：c++, boost, return-type, boost-any

我想创建一个具有单个 get 模板方法的类，该方法将接收 std::string 以在 std::map 中找到正确的变量并返回它。

std::map 应该存储任何类型的变量，所以我使用了 boost::any，到目前为止 std::map 看起来像这样：

```
std::map<std::string, boost::any> variables_; 
```

对于 get 函数，我尝试了类似的方法：

```
template <typename T>
T get(std::string& parameter)
{
    return variables_[parameter];
} 
```

但不走运，我的问题是，这甚至可能吗？如果是这样，怎么做？

基本思想是我不想为我的类中的每个特定变量创建一个特定的方法，所以其他类不需要知道它的每个 get 方法。

谢谢！

ps：对于任何问我为什么要这个的人，这里是它的简历，我有很多算法，它们会按照一定的顺序运行，并且它将用于最后一个已经运行的算法。所以，我想要的是制作一个 xml 文件，它将告诉哪些算法将运行，以何种顺序以及它将使用来自另一个算法的哪些数据。

因此，例如，算法 A 有一个名为“阈值”的变量，算法 B 需要该信息，因此，通常它必须使用 A.getThreshold 之类的东西从 A 询问它，但据我所知，我可以t 在字符串中调用一个对象函数（来自 xml 文件），所以我的解决方案是只有一个 get 函数，我传递我想要的变量名，该函数会将它返回给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:04:06.343

另一种解决方案是将对象“包装”`boost::any`到另一个对象中，该对象可以自动转换为您想要的任何东西。我认为这不是一个好习惯，但根据您的问题，这是最合适的。

```
class AnyWrapper {
    boost::any value;
public:
    AnyWrapper(const boost::any& val) : value(val) {}
    template<typename T> operator T() {
        return boost::any_cast<T>(value);
    }
} 
```

你的吸气剂会是这样的：

```
AnyWrapper get(std::string& parameter)
{
    return variables_[parameter];   // variables is a std::map<std::string, boost::any> 
} 
```

然后你应该能够像这样检索你的元素：

```
int integerValue = myContainer.get("age");
std::string stringValue = myContainer.get("name"); 
```

但同样，这不是一个干净的解决方案。boost 作者选择明确 any_cast 是有原因的：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:47:17.970

`boost::any`值不会隐式转换为 type `T`，您必须手动请求强制转换：

```
template <typename T>
T get(std::string& parameter)
{
    return boost::any_cast<T>(variables_[parameter]);
} 
```

如果存储在 中的类型不*完全正确*，则调用将失败并出现`boost::bad_any_cast`异常。`any` *`T`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:27:15.080

当您尝试混合编译时（模板）和运行时（地图查找）代码时，您想要的东西是不可能的。

您要么必须使其完全运行：

```
struct base_type { virtual ~base_type{} };
struct derived_type: base_type { ... };
std::map<std::string, base_type*> lookup_map;
base_type* get(std::string const& key) { return lookup_map[key]; } 
```

或完全编译时间（boost.fusion 示例）：

```
#include <boost/fusion/container/map.hpp>
#include <boost/fusion/sequence/intrinsic/at_key.hpp>
#include <boost/fusion/sequence/intrinsic/value_at_key.hpp>

namespace bf=boost::fusion;

struct key_a; // analogues of string keys in compile time world
struct key_b;
struct key_c;

typedef bf::map<
  bf::pair<key_a, long>,
  bf::pair<key_b, double>,
  bf::pair<key_c, char const*>
> rtmap_t;
rtmap_t rtmap;

template <class Key>
void set_value(typename bf::result_of::value_at_key<rtmap_t, Key>::type const& val)
{
  bf::at_key<Key>(rtmap) = val;
}

template <class Key>
typename bf::result_of::at_key<rtmap_t, Key>::type get_value()
{
  return bf::at_key<Key>(rtmap);
}

#include <iostream>
int main()
{
  char const* cval = "hello metaprogramming";
  set_value<key_a>(123l);
  set_value<key_b>(456.789);
  set_value<key_c>(cval);
  std::cout << get_value<key_a>() << std::endl;
  std::cout << get_value<key_b>() << std::endl;
  std::cout << get_value<key_c>() << std::endl;

  return 0;
} 
```

考虑到您在问题中提供的信息，我会选择具有动态多态性的运行时变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:48:36.027

您也可以返回一个`boost::any`. 您失去了对实现的封装，但取决于您如何使用返回值，这可能是更好的方法。*

# excel - ByRef 参数与 Excel 中的 VBA 不匹配

> ID：10986528
> 
> 赞同：2
> 
> 时间：2012-06-11T19:44:19.713
> 
> 标签：excel, vba, variables, methods, parameters

我有一个 Let 属性定义为：

```
Public Property Let Set_ChanArray_Enabled1(i As Integer, j As Integer, choice As Boolean)
    ChanArray(i, j).Enabled1 = choice
End Property 
```

在同一个对象模块中定义的子中，我尝试执行以下操作：

```
For j = 4 To 44
    Me.Set_ChanArray_Enabled1(j, 1) = True
    Me.Set_ChanArray_Enabled1(j, 3) = True
Next j 
```

但是 VBE 给了我一个 ByRef 参数不匹配，指向传入的 j

```
Me.Set_ChanArray_Enabled1(j, 1) = True 
```

我已经将 j 和传递给方法的参数都定义为整数，所以我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T10:07:34.493

该错误表明输入有问题`j`（即它不是整数类型）。

你有没有在类似的声明中声明它；`dim j, i as integer`? 如果是这样，那么只有`i`一个整数（你需要重复`as integer`）。

（使用`byval`似乎“修复”了这个问题，因为它的传递复制语义允许 VBA 在调用之前执行自动类型转换为整数`Set_ChanArray_Enabled1`）。

# php - 添加新模块 symfony 版本 1.011

> ID：10986530
> 
> 赞同：0
> 
> 时间：2012-06-11T19:44:31.997
> 
> 标签：php, symfony1

我无法添加新模块。模块-**仪表板**，应用程序**-ulife**

这些是我尝试过的命令

```
php symfony generate:module frontend dashboard

php symfony init-module ulife dashboard

symfony init-module ulife dashboard

symfony generate:module frontend dashboard

php generate:module ulife dashboard 
```

错误是

```
[pakeException]
Task "generate:module" is not defined. 
```

或者

```
[Exception]
application "ulife" does not exist 
```

ls -l（应用程序文件夹）

```
drwxrwxr-x 8 www-data ulifeweb 256 Oct  1  2009 frontend 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:22:41.087

如果 ：

*   你的应用程序是**ulife**
*   新模块名称是**仪表板**

你应该运行：

```
php symfony init-module ulife dashboard 
```

但根据你得到的错误：

*   似乎*ulife*应用程序不存在。你能告诉我们你的输出`ls -l`吗`/apps`？
*   你为什么要尝试`frontend`？

**编辑：**

好吧，所以你只有一个`frontend`应用程序。那么*ulife*是什么？

试试这个来创建你的模块：

```
php symfony init-module frontend dashboard 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T09:35:43.177

请关注以下链接的文档：

[http://symfony.com/legacy/doc/book/1_2/en/04-The-Basics-of-Page-Creation](http://symfony.com/legacy/doc/book/1_2/en/04-The-Basics-of-Page-Creation)

它将帮助您在现有 pr 中创建新模块

# android - 将 Smartwatch Java 扩展添加到 Phonegap 应用程序？

> ID：10986537
> 
> 赞同：2
> 
> 时间：2012-06-11T19:44:57.240
> 
> 标签：android, cordova, sony-smartwatch

我已经构建了一个 phonegap 应用程序并希望扩展它的功能，以便在 SmartWatch 上用户可以查看从 XML 文件生成的文本。

有适用于本机 android 的[smartwatch SDK](http://developer.sonymobile.com/cws/devworld/technology/smart-extras/smart-extension-sdk)。它是用Java编写的。

将我需要的 SmartWatch 功能打包到 Phonegap 插件中需要哪些步骤？我需要 SmartWatch SDK 中的哪些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:48:16.893

~~您需要编写一个 Phonegap 插件来包装本机 Java 调用，以便您可以从 Javascript 访问它们。~~

~~http://wiki.phonegap.com/w/page/36752779/PhoneGap%20Plugins~~

[改进答案]

实际上，如果您想在手表本身上安装应用程序，则必须编写 Java 代码。意识到您将拥有许多需要相互通信的组件。

1.  您的应用使用带有意图插件的 Phonegap 与 Sony LiveWare 管理器进行通信。

2.  索尼 LiveWare 管理器，它将与您的手表通信和部署自定义手表应用程序。手表应用程序使用索尼的 Java 框架，因此“手表应用程序”似乎同时存在于 LiveWare 管理器和手表本身中。

3.  在智能手表上“运行”的定制手表应用程序。该应用程序将知道如何显示您的数据和/或响应触摸事件。

您也许可以找到一个现有的应用程序，该应用程序将获取意图数据并将其显示在手表上。然后，您所要做的就是将您希望在手表上显示的信息发送到 LiveWare 管理器，该管理器将适当地路由数据。

如果您仍想为手表构建自定义应用程序，则必须走 Java 路线。它们确实包括一个模拟器，因此您无需手表即可尝试。

# azure - 在 Azure 中，是否可以将一组现有的托管站点移动到另一个订阅？

> ID：10986539
> 
> 赞同：17
> 
> 时间：2012-06-11T19:45:05.267
> 
> 标签：azure

在 Azure 上，我目前正在使用我的“3 个月免费试用”订阅，而最近我获得了“Windows Azure MSDN - Visual Studio Ultimate”订阅的访问权限。

是否可以使用门户将一组现有的托管站点移动到另一个订阅？

显然我可以使用 Visual Studio 重新发布网站，但我想知道是否有办法在 GUI 中执行此操作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T20:08:24.807

您无法在 Portal 界面中完成。您确实可以选择请求 Windows Azure 计费团队并请求他们将**您当前配置和运行的所有**服务从一个订阅转移到另一个订阅，关键是“全部”。

如果您想将一项特定服务从一个订阅移动到另一个订阅，则可用选项是直接部署到其他订阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:23:42.310

我做过一次。我不得不联系他们的计费团队，在他们之间来回几天后，这花费了太长时间，所以我只是手动完成，将网站重新部署到新订阅。如果您有许多站点，这可能是不可能的。我对 SQL Azure 数据库进行了备份和还原。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:40:32.647

我现在正与天蓝色的支持作斗争，试图做同样的事情。据我所知，您最好的选择是在您的 MSDN 订阅上创建服务并重新部署。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T21:40:54.213

我不知道从门户网站执行此操作的方法，但我建议使用能够管理多个订阅的[Windows Azure PowerShell](https://github.com/WindowsAzure/azure-sdk-tools)，在您的情况下，您只需执行此 cmdlet 即可将服务复制到另一个订阅中：

```
Publish-AzureServiceProject -sn MyNewSubscriptionName 
```

# project-management - Perforce 中的影子复制？

> ID：10986540
> 
> 赞同：1
> 
> 时间：2012-06-11T19:45:05.570
> 
> 标签：project-management, perforce, build-management

我正在与一个团队合作，我们正在尝试调整我们的 perforce depo 管理方法。我们当前的解决方案是维护一个单独的“工作”文件夹结构。每个人都被限制在自己的工作文件夹一个膨胀的学科文件夹。我们经常有人进出这个项目，这样艺术界的人就不会在编程中错误地搞砸了。一旦资产（这是一个游戏）完成，他们应该由团队负责人之一复制到实际构建中。这种方式可以在构建本身之外保持干净和有条理，不会被人们的临时文件/解决方案/代码/等弄乱。我对这种方法的问题是……我们的工作结构中已经有了文件的副本。没有理由对游戏文件夹进行深度复制。有没有办法将文件从存在于用户/组的个人文件夹的资产中复制到游戏构建中？我们正在使用可视化（p4v）客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:55:55.817

在软件仓库方面，Perforce 会进行惰性复制，因此您内部只有一个副本。也就是说，Perforce 在用户浏览和同步时使用元数据和内部逻辑来获取文件。只有当有人更改文件时，软件仓库才会包含有关这些更改的附加信息。这意味着您可以对非常大的文件树进行分支，而无需为您的软件仓库提供大量存储空间。

作为旁注（为了完整起见），在客户端，当您分支到新位置时，Perforce 会创建一个本地副本以方便您。假设很简单，创建一个新分支意味着您想立即处理它。如果不是这种情况，或者如果您要分支一个非常大的树，这会占用硬盘驱动器上的大量存储空间，您可以使用`-v`选项（v 代表虚拟）进行分支，如下所示：

```
p4 integ -v //depot/game/... //depot/workspace/... 
```

之后，您仍然可以通过同步来检索文件。

# api - 为什么列出的用户 ID 与喜欢 Facebook 帖子的用户数量不匹配？

> ID：10986541
> 
> 赞同：3
> 
> 时间：2012-06-11T19:45:07.617
> 
> 标签：api, facebook-graph-api

获得访问令牌后，我向 FB 的 Graph API 请求从 Facebook 页面发布信息。喜欢的数量与列出的 FB 的 ID 不匹配。例如，它可能会说某个 POST 有 4 个赞，但它只提供了 1 或 2 个用户信息。这是为什么？有没有办法获取所有用户 ID 信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:47:56.197

如果您的访问令牌所有者被用户阻止，您可能会看到。或者他们的其他一些隐私设置可能会阻止您看到它们。

# android - 无法发现错误

> ID：10986543
> 
> 赞同：-4
> 
> 时间：2012-06-11T19:45:31.117
> 
> 标签：android

```
 import java.util.Date;
    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;

    public class FluteActivity extends Activity {
        Button btn;
        TextView tv;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            btn=(Button)findViewById(R.id.button1);
            tv=(Button)findViewById(R.id.textView1);
            btn.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    tv.setText(new Date().toString());
                }
            });
        }
    } 
```

我找不到错误，有人可以告诉我在发生运行时错误时在哪里寻找，因为我不知道调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:51:47.227

只需替换这一行：`tv=(Button)findViewById(R.id.textView1);`,

通过这一行：`tv=(Textview)findViewById(R.id.textView1);`

# c - Windows 驱动程序 - 在用户模式和内核模式之间传递字符串。动态大小的结构

> ID：10986551
> 
> 赞同：5
> 
> 时间：2012-06-11T19:46:08.163
> 
> 标签：c, struct, wdk

我正在查看 WDK 中名为 minispy 的文件系统过滤器驱动程序示例......特别是它们如何使用 FilterSendMessage 和相关函数在用户空间和内核之间传递数据：

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff541513%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541513%28v=vs.85%29.aspx)

如果您安装 WDK，我正在查看并将参考的代码应位于此处：

WinDDK 根目录\version\src\filesys\miniFilter\minispy

所以基本上我首先要看的是 inc\minispy.h 中的共享头文件：

```
#pragma warning(push)
#pragma warning(disable:4200) // disable warnings for structures with zero length arrays.

typedef struct _LOG_RECORD {

ULONG Length;           // Length of log record.  This Does not include
ULONG SequenceNumber;   // space used by other members of RECORD_LIST

ULONG RecordType;       // The type of log record this is.
ULONG Reserved;         // For alignment on IA64

RECORD_DATA Data;
WCHAR Name[];           //  This is a null terminated string

} LOG_RECORD, *PLOG_RECORD; 
```

这里我们的 Name 没有给出明确的大小，看起来他们正在使用一些选项来禁用警告。

现在我正在查看它的填写位置，filter\mspyLib.c：

（我只复制了我认为相关的行...）

```
VOID SpySetRecordName (__inout PLOG_RECORD LogRecord, __in PUNICODE_STRING Name)

    ULONG nameCopyLength;
    PCHAR copyPointer = (PCHAR)LogRecord->Name;
    ...
    // A bunch of code for getting nameCopyLength from UNICODE_STRING -- I understand this.
    ...

    // comment about adding sizeof(PVOID) for IA64 alignment -- I understand this.
    LogRecord->Length = ROUND_TO_SIZE( (LogRecord->Length + nameCopyLength + sizeof( UNICODE_NULL )), sizeof( PVOID ) );

    RtlCopyMemory( copyPointer, Name->Buffer, nameCopyLength );

    copyPointer += nameCopyLength;

    *((PWCHAR) copyPointer) = UNICODE_NULL; 
```

所以我的问题基本上是这是在结构内部传递字符串以使用 FilterSendMessage 进行用户内核通信的最佳方法吗？我无法想象这些结构的布局以及如果名称字符串太大会发生什么。此外，结构的分配发生在其堆栈上的用户空间组件中，但调整大小发生在内核空间组件中，作用于传递的指向结构的指针。我认为这更多是我不了解零长度数组的问题，但是用户空间组件如何知道在调整名称之前为 Name 字段保留多少空间？

这本质上似乎是一种动态大小的数组形式，在几个线程中进行了讨论，例如：

[C：动态大小结构的推荐样式](https://stackoverflow.com/questions/910688/c-recommended-style-for-dynamically-sized-structs)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T20:10:27.343

首先，是的，它似乎是一种动态大小的数组。基本上，`Name`字符串被放置在结构的末尾之后。在用户模式和内核模式之间传递数据时，它经常被使用。这种方法有几个优点：

*   它不需要多次内存分配。
*   当将数据从用户模式传递到内核模式（反之亦然）时，您通常需要将内存从一个缓冲区复制到另一个缓冲区（我相信 FilterSendMessage 会这样做）。如果我们使用指向不同内存位置的指针来存储字符串，我们将需要多次调用来复制（或锁定）内存。在处理用户提供的消息时，操作系统不可能知道数据结构的布局。解决这个问题的关键是使用上述的普通结构。

这是非常有用的方法。我个人使用这种技巧来避免多次调用内存函数（分配、复制、移动等），即使在简单的应用程序中也是如此。在开发 Windows 驱动程序时，我到处都能看到这样的结构（即 ZwQueryInformationFile、ZwQueryDirectoryFile 等）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-05T11:51:18.860

您需要先调用[FilterConnectCommunicationPort](https://msdn.microsoft.com/en-us/library/windows/hardware/ff540460(v=vs.85).aspx) () 以打开新连接，然后再调用[FilterSendMessage](https://msdn.microsoft.com/en-us/library/windows/hardware/ff541513(v=vs.85).aspx) ()。

# android - Android 无法通过 Http Post 发送大的 json 字符串

> ID：10986557
> 
> 赞同：2
> 
> 时间：2012-06-11T19:46:42.263
> 
> 标签：android, image, upload, base64

我正在尝试将图像作为 base64 发送到基于 php 的 Web 服务。我发送的图像大约 500 kb 。我首先压缩图像，然后将图像转换为 base64 字符串。但是图像没有被发送。如果我通过 Fiddler 尝试，我可以成功发送图像。反正有没有增加android的http post请求调用？我正在使用以下库：DefaultHttpClient 和 HttpPost。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-15T06:59:28.560

就我而言，添加 UTF-8 解决了我的问题

```
StringEntity se;
se = new StringEntity(json.toString(),"UTF-8");
            httppostreq.setEntity(se);
            response = client.execute(httppostreq); 
```

# ios - iOS 6 API 和向后兼容性

> ID：10986558
> 
> 赞同：9
> 
> 时间：2012-06-11T19:46:50.923
> 
> 标签：ios, frameworks, backwards-compatibility, ios6

我可以在支持早期 iOS 版本的应用程序中使用 iOS 6 中引入的 API 和框架吗？

这是否只能通过变通方法和代码来实现，例如：

```
[[UIDevice currentDevice] systemVersion] 
```

或者我是否能够在不指定版本的情况下在支持早期 iOS 版本的应用程序中使用更新的框架、API 等？

而且，我可以使用 Xcode 4.5，还是必须坚持当前的公开版本？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-11T20:00:57.753

在操作系统和工具链最终确定之前，您根本无法发布使用 iOS 6 功能的应用程序。（更新：iOS 6 操作系统和 SDK 现在是最终版本。）

此时，您应该使用 iOS 6 SDK 并将您的部署目标设置为 iOS 5 的早期版本。您不会检查系统版本，而是弱链接新框架，并测试特定类或方法的存在在使用它们之前，等等。

另一个问题是，使用 iOS 6 工具和 SDK，您将不再支持 armv6 设备。您可以支持 iPhone 3GS 及更新机型，以及 iPad 的所有型号，但不支持 iPhone 3G 和原始 iPhone。但即使使用旧版应用程序，您也不应该再针对这些应用程序。

参考：

*   [SDK 兼容性指南](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html)：“如果您希望您的应用程序针对特定版本或多个版本的 iOS 或 Mac OS X，请阅读此文档。”

# php - MSSQL 调用中的 PHP IF 语句

> ID：10986560
> 
> 赞同：0
> 
> 时间：2012-06-11T19:47:03.243
> 
> 标签：php, sql, sql-server, database, if-statement

好的，我花了很长时间尝试在 TSQL 查询字符串中添加 if 语句。任何帮助，将不胜感激。这是带有语法错误的字符串。

```
$sql = "SELECT tblCasesLawyers.CaseID, tblCasesLawyers.PLAINTIFFLASTNAME + ', ' + tblCasesLawyers.PLAINTIFFFIRSTNAME AS PatientName, tblProcedures.ApplicationSubmitted, tblProcedures.CPTCode, tblProcedures.ProcedureDescription, tblCenters.CenterID, tblProcedures.ProcedureDate, tblProcedures.ProcedureStatus, tblProcedures.LeinAmount, tblProcedures.DatePaid
FROM (tblCasesLawyers INNER JOIN tblCenters ON tblCasesLawyers.Center_ID__C = tblCenters.CenterID) INNER JOIN tblProcedures ON tblCasesLawyers.CaseID = tblProcedures.CaseID
WHERE (((tblCenters.CenterID)={$_SESSION['center']}) AND (tblProcedures.ApplicationSubmitted >= 2012-05-01)".if !empty($_GET['search']) echo ('AND tblCasesLawyers.PLAINTIFFLASTNAME='.{$_GET['search']}).")
"; 
```

谢谢大家的加入。我在这方面相对较新，但尝试使用以下方法防止注入：

```
 function ms_escape_string($data) {
    if ( !isset($data) or empty($data) ) return '';
    if ( is_numeric($data) ) return $data;

    $non_displayables = array(
        '/%0[0-8bcef]/',            // url encoded 00-08, 11, 12, 14, 15
        '/%1[0-9a-f]/',             // url encoded 16-31
        '/[\x00-\x08]/',            // 00-08
        '/\x0b/',                   // 11
        '/\x0c/',                   // 12
        '/[\x0e-\x1f]/'             // 14-31

    );
    foreach ( $non_displayables as $regex )
    $data = preg_replace( $regex, '', $data );
    $data = str_replace("'", "''", $data );
    return $data;
    }

    function sanitize($data){
    $data=trim($data);
    $data=htmlspecialchars($data);
    $data=ms_real_escape_string($data);
    return $data;
    }

    $search = sanitize($_GET['search']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:55:22.563

那么内联条件呢？

```
<?php

$sql = "SELECT tblCasesLawyers.CaseID, tblCasesLawyers.PLAINTIFFLASTNAME + ', ' + tblCasesLawyers.PLAINTIFFFIRSTNAME AS PatientName, tblProcedures.ApplicationSubmitted, tblProcedures.CPTCode, tblProcedures.ProcedureDescription, tblCenters.CenterID, tblProcedures.ProcedureDate, tblProcedures.ProcedureStatus, tblProcedures.LeinAmount, tblProcedures.DatePaid
FROM (tblCasesLawyers INNER JOIN tblCenters ON tblCasesLawyers.Center_ID__C = tblCenters.CenterID) INNER JOIN tblProcedures ON tblCasesLawyers.CaseID = tblProcedures.CaseID
WHERE (((tblCenters.CenterID)={$_SESSION['center']}) AND (tblProcedures.ApplicationSubmitted >= 2012-05-01)"
.( (!empty($_GET['search'])) ? ' AND tblCasesLawyers.PLAINTIFFLASTNAME='.$_GET['search'] : '').")";

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:56:21.430

我不认为连接这样的`if`语句在语法上是合法的。它不会评估操作员无法理解的任何内容。使用三元或将您的陈述分成三部分（在`cleanse`基于[此答案](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)编写方法之后：

```
$cleanCenterID = cleanse($_SESSION['center']);
$clentSearch = cleanse($_GET['search']);

$sql = "SELECT tblCasesLawyers.CaseID, tblCasesLawyers.PLAINTIFFLASTNAME + ', ' +tblCasesLawyers.PLAINTIFFFIRSTNAME AS PatientName, tblProcedures.ApplicationSubmitted, tblProcedures.CPTCode, tblProcedures.ProcedureDescription, tblCenters.CenterID, tblProcedures.ProcedureDate, tblProcedures.ProcedureStatus, tblProcedures.LeinAmount, tblProcedures.DatePaid
FROM (tblCasesLawyers INNER JOIN tblCenters ON tblCasesLawyers.Center_ID__C = tblCenters.CenterID) INNER JOIN tblProcedures ON tblCasesLawyers.CaseID = tblProcedures.CaseID
WHERE (((tblCenters.CenterID)={$cleanCenterID}) AND (tblProcedures.ApplicationSubmitted >= 2012-05-01)";

if(!empty($cleanSearch)) {
    $sql .= 'AND tblCasesLawyers.PLAINTIFFLASTNAME='.{$cleanSearch});
}

$sql .= ")"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:55:20.910

如果在这里，我认为您需要一行：

```
 "AND (tblProcedures.ApplicationSubmitted >= 2012-05-01)".
((!empty($_GET['search']) ? 'AND tblCasesLawyers.PLAINTIFFLASTNAME=' . $_GET['search'] : '' ). 
") 
```

如某些评论中所述，以这种方式连接查询可能导致[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，为避免 SQL 注入，您可以使用准备好的语句和参数化查询，请参阅[此问题](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)以了解避免 SQL 注入的最佳方法；-)。

谢谢

一起去了

```
$sql = "SELECT tblCasesLawyers.CaseID, tblCasesLawyers.PLAINTIFFLASTNAME + ', ' + tblCasesLawyers.PLAINTIFFFIRSTNAME AS PatientName, tblProcedures.ApplicationSubmitted, tblProcedures.CPTCode, tblProcedures.ProcedureDescription, tblCenters.CenterID, tblProcedures.ProcedureDate, tblProcedures.ProcedureStatus, tblProcedures.LeinAmount, tblProcedures.DatePaid
FROM (tblCasesLawyers INNER JOIN tblCenters ON tblCasesLawyers.Center_ID__C = tblCenters.CenterID) INNER JOIN tblProcedures ON tblCasesLawyers.CaseID = tblProcedures.CaseID
WHERE (((tblCenters.CenterID)={$_SESSION['center']}) AND (tblProcedures.ApplicationSubmitted >= 2012-05-01)".( (!empty($search)) ? " AND tblCasesLawyers.PLAINTIFFLASTNAME='". $search . "'" : '').")"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T19:54:21.580

您可以使用内联“if”将条件语句插入字符串，即

```
$sql = 'Your sql '.(!empty($_GET['search']) ? 'some sql' : 'some other sql').' the rest of your sql'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T19:53:14.897

如果您替换代码，它会起作用吗：

```
.if !empty($_GET['search']) echo ('AND tblCasesLawyers.PLAINTIFFLASTNAME='.{$_GET['search']}).") 
```

有了这个：

```
'AND (  tblCasesLawyers.PLAINTIFFLASTNAME='.{$_GET['search']}.' OR len('.{$_GET['search']}.') = 0 OR '.{$_GET['search']}.' is null)' 
```

# javascript - 向标记数组添加声音 - google map javascript

> ID：10986566
> 
> 赞同：2
> 
> 时间：2012-06-11T19:47:27.043
> 
> 标签：javascript, google-maps, audio, google-maps-api-3, marker

我是新来的，所以我知道我没有任何可信度。我是一名艺术家，并且是编程新手，所以我知道如果没有人会接受这个。我发布这个是因为这是一个简单的问题。-S

这是创建多个标记的代码（主要来自谷歌开发者网站）。它工作正常并为每个标记创建一个自定义图标。单击时，每个标记都应该播放不同的音频文件（现在只有最后一个创建的标记会播放）。我还想在播放音频文件时更改图标。我正在使用 javascript 和声音管理器 2 播放音频 - 但我感兴趣的是：我如何引用数组中的每个标记，以便我可以播放分配给该特定标记的特定音频文件？

我希望我在没有 XML 和数据库的情况下做到这一点。-萨宾

以下是相关代码：

```
 setMarkers(map, beaches);
}

var beaches = [
  ['Devotion', 40.710431,-73.948432, 0],
 ['Tester', 40.711223,-73.958416, 1],
];

function setMarkers(map, locations) {

  var image = new google.maps.MarkerImage('biker.png',
      // This marker is 20 pixels wide by 32 pixels tall.
      new google.maps.Size(32, 32),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is the base of the flagpole at 0,32.
      new google.maps.Point(0, 32)
      );

 var newimage = new google.maps.MarkerImage('biker_click.png',
      // This marker is 20 pixels wide by 32 pixels tall.
      new google.maps.Size(32, 32),
      // The origin for this image is 0,0.
      new google.maps.Point(0,0),
      // The anchor for this image is the base of the flagpole at 0,32.
      new google.maps.Point(0, 32)
      );

var shape = {
    coord: [1, 1, 1, 20, 18, 20, 18 , 1],
   type: 'poly'
  };

  for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: image,
        shape: shape,
        title: beach[0],
        zIndex: beach[3],

    });
  }

function markerClick() {
    console.log('click');
  }
  google.maps.event.addListener(marker, 'click', markerClick);

function markerClick() {
  var playing = sm2.toggle('http://mm1.ellieirons.com/wp-content/uploads/2012/03/beeps_bubbles.mp3', true);
  if (playing) {
    this.setIcon(newimage);
  } else {
    this.setIcon(image);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:07:16.900

假设您有一个 URL 数组：

```
var sounds = ["http://mm1.ellieirons.com/wp-content/uploads/2012/03/beeps_bubbles.mp3",
              "http://mm1.ellieirons.com/wp-content/uploads/2012/03/beeps_bubbles2.mp3"]; 
```

然后你可以尝试这样的事情：

```
 for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = new google.maps.Marker({
       position: myLatLng,
       map: map,
       icon: image,
       shape: shape,
       title: beach[0],
       zIndex: beach[3]
    });
    marker.sound = sounds[i];  //Storing associated sound in marker
    google.maps.event.addListener(marker, 'click', markerClick);
 } 
```

并将处理程序修改为：

```
function markerClick() {
   var playing = sm2.toggle(this.sound, true);
   if (playing) {
       this.setIcon(newimage);
   } else {
       this.setIcon(image);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:01:26.757

像这样的东西。。

```
var beaches = [
 ['Devotion', 40.710431,-73.948432, 0, 'sound1.mp3'],
 ['Tester', 40.711223,-73.958416, 1, 'sound2.mp3'],
];

// ...

  for (var i = 0; i < locations.length; i++) {
    var beach = locations[i];
    var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: image,
        shape: shape,
        title: beach[0],
        zIndex: beach[3],

    });
    google.maps.event.addListener(marker, 'click', function() {
       playSound(beach[4]);
    });
  } 
```

因为您在循环中定义了一个匿名函数，所以它可以访问循环的变量（它是一个“闭包”）。您将声音的名称添加到与海滩关联的数据中，然后将其从闭包传递给函数（我称之为 playSound），该函数实际上会导致它播放。

希望这会有所帮助，这不是一个完整的食谱。

# javascript - 小胡子模板 + Sencha Touch

> ID：10986567
> 
> 赞同：2
> 
> 时间：2012-06-11T19:47:34.683
> 
> 标签：javascript, sencha-touch, mustache

有没有办法通过 Sencha Touch 使用 Mustache 模板？喜欢覆盖 Ext.XTemplate 类以使用小胡子..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T05:56:30.767

[这篇博文](http://cliffmeyers.com/2012/3/29/integrating-sencha-touch-and-hoganjs-for-easy-html-templatin.html)有一个很好的解决方案。尽管仅适用于 hogan.js，但可以轻松修改它以使用 mustache。

# java - 设置java应用程序opensuse的标题

> ID：10986569
> 
> 赞同：4
> 
> 时间：2012-06-11T19:47:43.717
> 
> 标签：java, swing, jframe, opensuse

在 Opensuse 中运行 Java Swing 应用程序时，主类的名称 ( `com-simontuffs-onejar-Boot`) 出现在屏幕顶部。如何将其设置为我想要的标题？

版本信息：

```
/etc/SUSE-release
openSUSE 12.1 (i586)
VERSION = 12.1
CODENAME = Asparagus

uname -a 
Linux pax22 3.1.0-1.2-default #1 SMP Thu Nov 3 14:45:45 UTC 2011 (187dde0) i686 i686 i386 GNU/Linux

java -version
java version "1.6.0_12"
Java(TM) SE Runtime Environment (build 1.6.0_12-b04)
Java HotSpot(TM) Server VM (build 11.2-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T19:56:03.343

你试过[`JFrame.setTitle(String)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Frame.html#setTitle(java.lang.String))吗`yourJFrame.setTitle("Title to display")`？我目前没有可用的 openSUSE 盒子来亲自尝试一下……</p>

**编辑：**事实证明（见评论，为了可读性在此重复），这是一个 Gnome 特定问题。这应该可以解决问题：

```
Toolkit xToolkit = Toolkit.getDefaultToolkit();
java.lang.reflect.Field awtAppClassNameField =
    xToolkit.getClass().getDeclaredField("awtAppClassName");
awtAppClassNameField.setAccessible(true);
awtAppClassNameField.set(xToolkit, applicationName); 
```

有关更多信息，请参阅[此博客文章](http://elliotth.blogspot.com/2007/02/fixing-wmclass-for-your-java.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T20:13:32.857

如果这`setTitle(String)`对您不起作用，请使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)进行部署。它可以设置一个应用程序。大多数平台上的标题，除此之外还有更多功能。

# ruby-on-rails - 尝试使用单独的控制器时，Ruby on rails“没有路由匹配”

> ID：10986571
> 
> 赞同：1
> 
> 时间：2012-06-11T19:47:49.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, networking, network-programming, ruby-on-rails-3.2

所以我目前正在尝试使用 RoR 实现来映射我的建筑物的网络。我有一个很好的平面图设置，我也为它创建了开关对象。最终，交换机将有许多插孔，每个插孔将与房间号一一对应。

目前，在我尝试单独显示开关之前，一切都在地板和开关中完美运行。我试图通过在单独的控制器中使用 show 方法来做到这一点。本来是楼层控制器负责的，现在我要开关控制器负责。

这是我的部分切换代码（apps/views/switch/_switch.html.erb）：

```
<p>
  <%= switch.title %>

  <%= link_to 'show', :controller => "switches", :action => 'show'  %>

  <%= link_to 'Destroy', [switch.floor, switch],
               :confirm => 'Are you sure?',
               :method => :delete %>
</p> 
```

这是我的显示方法（apps/controllers/switches_controller.rb）：

```
...
  def show
    @floor = Floor.find(params[:floor_id])
    @switch = @floor.switches.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @switch }
    end
  end
... 
```

当我没有在部分中标记开关控制器时，每当我单击显示时，链接都会充当返回同一页面的链接......基本上只是刷新。当我标记开关控制器时，我收到“没有路由匹配 [GET]“/assets””错误。

我尝试了多种不同的语法，但没有任何效果。如果有人可以帮助我，我将非常感谢！

请让我知道是否有必要发布更多我的代码，我会的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:17:05.197

您可以运行**“rake routes** ”命令来列出所有可用的路由选项，并建议您使用 url/path 而不是为单个链接指定控制器和操作。

我假设您已经为楼层和开关设置了嵌套路由，然后获取此 URL，即

```
/floors/:floor_id/switches/:id/show 
```

您可以使用

`<%= link_to "Switch", floor_switch_path(switch.floor, switch) %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:50:17.763

'Show' 方法用于显示特定元素。您的情况下的特定开关。所以你需要发送 :id 到你的控制器，像这样

```
link_to "Switch", :controller => "switches", :action => "show", :id => switch 
```

# android - 以编程方式连接到 Android 中启用蓝牙的条码扫描器

> ID：10986573
> 
> 赞同：2
> 
> 时间：2012-06-11T19:48:03.103
> 
> 标签：android, bluetooth, barcode

我正在努力创建一个连接到蓝牙条形码扫描仪的 Android 应用程序。我一直在寻找如何做到这一点的代码示例，但我找不到任何处理连接到设备的方法。我看到很多将点对点与 android 设备连接起来，但这似乎并没有涵盖 android 到设备。

这是我到目前为止的代码。呼叫连接失败，连接被拒绝。

```
UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
socket = mDevice.createRfcommSocketToServiceRecord(uuid);
socket.connect();

06-11 15:29:10.113: W/System.err(20018): java.io.IOException: Connection refused
06-11 15:29:10.133: W/System.err(20018):    at  android.bluetooth.BluetoothSocket.connectNative(Native Method)
06-11 15:29:10.133: W/System.err(20018):    at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:212) 
```

该设备已与 android 手机配对，我使用它从手机中检索它。

```
Set<BluetoothDevice> pairedDevices = btAdapter.getBondedDevices(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:54:38.233

我确实找到了解决此问题的方法，但我不确定为什么这个有效而另一个无效。

```
UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
socket = mDevice.**createInsecureRfcommSocketToServiceRecord(uuid);**
socket.connect(); 
```

更改为使用不安全调用允许连接工作，并且我可以从套接字读取调用接收数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:37:28.550

此 ID 仅在条码扫描器提供标准蓝牙 SPP 接口时才有效。你确定这个设备甚至使用那个 UUID 吗？

去寻找任何用于将此扫描仪连接到某物的文档 - 甚至只是一台 PC。并通过它，即使这不是你现在想要做的。您可能会了解有关该系统的一些信息或了解它的实际工作原理。

例如，为 PC 安装了一个特殊的驱动程序以使其执行任何操作将表明它不是 SPP 配置文件。或者，如果有一个 PC 应用程序用于与连接到“串行端口”的扫描仪一起工作，那么它几乎肯定是一个 SPP 配置文件。

在它不是 SPP 配置文件的情况下，与 PC 之类的东西建立有效连接至少让您有机会嗅探连接，也可能还有数据传输，从而为 android 进行逆向工程。

此外，通过基线检查硬件是否适用于特定应用程序，您可以排除硬件故障。（当你在它的时候检查你的安卓设备的蓝牙链接！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T08:07:11.213

另一种可能性 - 作为第二个答案发布，因为它与我的最后一个非常不同。

到目前为止，您只提供了有关您计划在技术上做的事情的信息，而不是您尝试编写的应用程序的实际目的。

如果您的应用程序的目的不仅仅是蓝牙连接的练习或只是使用特定的条形码阅读器，并且将条形码值输入 android 设备只是更大目的的一步 - 您是否考虑过使用设备的相机那个工作而不是条形码阅读器？

我相信有一些库可以处理这个问题，或者 DIY 自己的图像处理代码可能会很有趣（我知道现有的应用程序已经这样做了，所以有可能以某种方式）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T17:44:51.440

`createInsecureRfcommSocketToServiceRecord`是一个很好的暗示。

我在连接到 Bluegiga WT32-A 蓝牙模块时遇到问题。我的旧代码基于蓝牙聊天示例（与 BTM 222 蓝牙模块一起工作得很好）并使用`createRfcommSocketToServiceRecord`了，结果连接被拒绝：

```
java.io.IOException: Connection refused 
```

`createRfcommSocketToServiceRecord`奇怪的是，在很短的时间间隔内一次又一次地尝试连接有时确实有效。

还有一点需要注意：使用`createInsecureRfcommSocketToServiceRecord`需要 API 级别 10。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-05T09:25:20.860

我有同样的问题并解决了。首先，将您的条形码扫描仪模式从 HID 更改为 SSP。HID(Human Interface Mode) 仅适用于硬件键盘模式。

接下来，从输入设备关闭蓝牙硬件。设置>蓝牙>蓝牙条码罐设置>取消选中输入设备

使用 UUID UUID.fromString("00001101-0000-1000-8000-00805F9B34FB")

就是这样。

# javascript - 图像转换的 URL

> ID：10986575
> 
> 赞同：1
> 
> 时间：2012-06-11T19:48:06.960
> 
> 标签：javascript

我使用此函数将 URL 转换为输出图像。

```
function InsertLink(T){
 var Out = '';
 var T1=T;
 var LinkR = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?([^?#]*\.(?:jpg|jpeg|gif|png))/;
 var Pos=0;
 for(var N=0;(N=T1.search(LinkR))!==-1;){
    var S1 = T1.match(LinkR)[0];
    var S1L = S1.length;
    Out += T1.substr(0,N)+"<a href='"+S1+"' target='_blank'><img class='sml' src='"+S1+"' /></a><br />";
    T1 = T1.substr(N+S1L);
    Pos=N+S1L;
 };
 Out+=T1;
 return Out;
} 
```

但它仅适用于帖子正文中的一个 URL。如果文本包含多个 URL，则所有 URL 都附加到一张图像（“损坏的”图像）。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:16:29.453

看jsFiddle怎么做，你需要的代码在`replaceWithImgLinks`函数里

[http://jsfiddle.net/C3zF6/1/](http://jsfiddle.net/C3zF6/1/)

我无法让你的正则表达式工作，所以我使用了这里的一个：[什么是匹配 URL 的好正则表达式？](https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url)

# php - PHP/MYSQL：使用相同标识号的多个值

> ID：10986576
> 
> 赞同：0
> 
> 时间：2012-06-11T19:48:15.693
> 
> 标签：php, mysql

我正在尝试将发票中的数据写入 2 个表表 1 是它包含的发票表：

`invoice_id account sales purchase_date`

然后是第二个表 invoice_items 它包含有关发票中每一行的信息。

```
id  invoice_id  item    description     quantity    price   amount 
```

基本上现在我正在检查 id 是否存在，如果存在，我检查 line id 是否存在，如果不存在，它会添加发票信息，如果 id 存在，它会检查 line id 是否存在

```
$checkin = mysql_query("
SELECT `id`
FROM `invoices`
WHERE `invoices`.`id` =$invoice_id
");

if (mysql_num_rows($checkin) == 1) 
{
  $updatememocount ++;

  mysql_query("UPDATE `invoices`  SET `invoices`.`INV_ID` = '".$invid."'WHERE `invoices`.`id` =$invoice_id ") or die("load1 -" . mysql_error());

  // check line id
  $checklineid = mysql_query("SELECT `Line_ID` from `invoice_items` WHERE `Line_ID` = '$lineid'") or die("load1 -" . mysql_error());
  if (mysql_num_rows($checklineid) == 0) 
  {
    $insertlinecount ++;
    mysql_query("INSERT INTO `invoice_items` (invoice_id, item, description, quantity, price, amount, Line_ID) VALUES ('".$invoice_id."', '".mysql_real_escape_string($row['3'])."', '".mysql_real_escape_string($row['4'])."', '".$row['9']."', '".$row['7']."', '".$row['5']."', '".$row['14']."' ) ") or die("load1 -" . mysql_error());
  } 
}
else
{
  // makes new invoice entry and enters the line item information for the first line.
} 
```

数据样本 这是数据的来源

```
Date    Invoice_Id    Item           Description             Price    Amount   Customer_ID   Line_ID
05/12/12  1234        something     whatever somthing  is     15        15       2255          123
05/12/12  1234        Another_thing  Whatever that is         25        25       2255          124 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:30:29.197

看这个例子，在[重复键插入](http://webguru.org/2007/12/18/lamp/mysql-on-duplicate-key-insert/)

```
 <?php
    $sql = "SELECT COUNT(UserID) FROM configuration WHERE UserID='SomeUser'";
    $result = mysqli_query($db,$sql);
    if ($result && mysqli_num_rows($result)>0) {
    $aResult = mysqli_fetch_array($result);
    $iRecordExists = ($aResult[0]>0?1:0);
}

   if ($iRecordExists>0) {
   //make the insert with another ID
    }
    else {
    //do an insert
    $sql = "INSERT INTO configuration SET someField='someValue', UserID='SomeUser'";
    mysqli_query($db,$sql);
    }
    ?> 
```

# java - 如何避免 NetBeans Java 项目中 GWT Horizo ntalSplitPanel 的弃用警告？

> ID：10986578
> 
> 赞同：0
> 
> 时间：2012-06-11T19:48:25.323
> 
> 标签：java, gwt, netbeans, deprecated

在使用以下实用方法编译代码时是否可以避免弃用警告：

```
public static void doSthForHorizontalSplitPanel(HorizontalSplitPanel hsp) {...} 
```

以及明确声明和/或创建 Horizo​​ntalSplitPanel 小部件，例如：

```
protected HorizontalSplitPanel main;
...
    main  = new HorizontalSplitPanel(); 
```

**我的目标是在不删除使用情况的情况下**消除这些警告**`HorizontalSplitPanel`，不提供全局编译器**标志**`-Xlint:-deprecation`（**

 ****由于语句，方法或类级别的注释`@SuppressWarnings("deprecation")`似乎不起作用`import HorizontalSplitPanel`，替换不推荐使用的 Horizo​​ntalSplitPanel 类不是一个选项（目前）。

**我的目标有可能实现吗？如果是这样，最好的方法是什么？**

*我正在使用 NetBeans 7.1、Java 1.6、GWT 2.3。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T17:06:12.220

标准模式和 SplitlayoutPanel 比已弃用的 Horizo​​ntalSplitPanel 效果更好。试试这个代码，你必须用 Horizo​​ntalSplitLayoutPanel 替换 Horizo​​ntalSplitPanel。这段代码实际上使用了最新的SplitLayoutPanel，方法等价于Deprecated Horizo​​ntalSplitPanel。优点是您不必更改代码。还粘贴了 VerticalSplitPanel 替代 VerticalSplitLayoutPanel 的代码。VerticalSplitLayoutPanel 经过单元测试并且工作正常。

```
import com.google.gwt.user.client.DOM;
import com.google.gwt.user.client.Event;
import com.google.gwt.user.client.ui.ScrollPanel;
import com.google.gwt.user.client.ui.SplitLayoutPanel;
import com.google.gwt.user.client.ui.Widget;

/**
 * author: MKK
 * Date: 4/29/13
 * Time: 10:41 AM
 * /**
 *
 * GWT depecrated HorizontalSplitpanel as of version 2.0.
 * This is a wrapper class which extends new SplitLayoutPanel and has all the methods of deprecated old Splitpanels for
 * seamless integration with existing code without breaking.
 * Replacement of old HorizontalSplitLayoutPanel with new SplitLayoutPanel
 * 
 *
 */
public class HorizontalSplitLayoutPanel extends SplitLayoutPanel{

    private ScrollPanel leftScrollPanel = new ScrollPanel();
    private ScrollPanel rightScrollPanel = new ScrollPanel();
    private Widget leftWidget;
    private Widget rightWidget;

    public HorizontalSplitLayoutPanel(){
        super();
        init();

    }
    boolean dragged;
    public void onBrowserEvent(Event event) {
        super.onBrowserEvent(event);
        switch (DOM.eventGetType(event)) {
            case Event.ONMOUSEDOWN:
                dragged = true;
                break;
            case Event.ONMOUSEUP:
                dragged = false;
                break;
            case Event.ONMOUSEMOVE:
                break;
        }
    }

    public boolean isResizing(){
        return dragged;
    }

    private void init() {
        setSize("100%", "100%");
        addWest(leftScrollPanel, 300);
        add(rightScrollPanel);
        sinkEvents(Event.ONMOUSEDOWN | Event.ONMOUSEUP );
    }

    public HorizontalSplitLayoutPanel(int splitterSize) {
        super(splitterSize);
        init();
    }

    public void setLeftWidget(Widget widget){
        this.leftWidget = widget;
        leftScrollPanel.clear();
        leftScrollPanel.add(widget);
        setSplitPosition("30%");
        setWidgetToggleDisplayAllowed(leftScrollPanel,true);
    }

    public void setRightWidget(Widget widget){
        try {
            this.rightWidget = widget;
            rightScrollPanel.clear();
            rightScrollPanel.add(widget);
            setSplitPosition("30%");

        } catch (Exception e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
    }

    public void removeWidget(Widget widget){
        try {
            if( leftScrollPanel.getWidget()== widget){
                leftScrollPanel.remove(widget);
                return;
            }
            rightScrollPanel.remove(widget);
        } catch (Exception e) {
        }

    }

    public void setSplitPosition(String percent){
        if( percent.toLowerCase().indexOf("px") > -1){
            percent = percent.replace("px","").trim();
            int p = Integer.parseInt(percent);
            setSplitPosition(p);
            return;
        }
        percent = percent.replace("%","").trim();
        int p = Integer.parseInt(percent);
        double size =  (getOffsetWidth()*p)/100.0;
        if( p < 1.0 ){
           size = 600;
        }
        setWidgetSize(leftScrollPanel, size);
    }

    public void setSplitPosition(int pixels){
        setWidgetSize(leftScrollPanel, pixels);

    }

    public void hideLeftWidget() {
        leftScrollPanel.clear();
        setWidgetMinSize(leftScrollPanel,0);
    }

    public void showLeftWidget(){
        leftScrollPanel.add(leftWidget);
    }
    public void hideRightWidget() {
        rightScrollPanel.clear();
        setWidgetMinSize(rightScrollPanel,0);
    }

    public void showRightWidget(){
        rightScrollPanel.add(rightWidget);
    }
}

import com.google.gwt.user.client.DOM;
import com.google.gwt.user.client.Event;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.ScrollPanel;
import com.google.gwt.user.client.ui.SplitLayoutPanel;
import com.google.gwt.user.client.ui.Widget;

/**
 *
 * GWT depecrated VerticalSplitPanel as of version 2.0.
 * This is a wrapper class which extends new SplitLayoutPanel and has all the methods of deprecated old Splitpanels for
 * seamless integration with existing code without breaking.
 * Replacement of old VerticalSplitPanel with new SplitLayoutPanel
 * 
 *
 */
public class VerticalSplitLayoutPanel extends SplitLayoutPanel {

    private Widget topWidget;
    private Widget bottomWidget;
    private int offset=100;

    private ScrollPanel topScrollPanel = new ScrollPanel();
    private ScrollPanel bottomScrollPanel = new ScrollPanel();

    public VerticalSplitLayoutPanel() {
        super();
        init();
    }

    public VerticalSplitLayoutPanel(int splitterSize) {
        super(splitterSize);
        init();

    }

    private void init() {
        setSize("100%", "100%");
        //int clientH = Window.getClientHeight()-offset;
        // double size = clientH * 50/100;
        addNorth(topScrollPanel, getOffsetHeight()/2.0);
        add(bottomScrollPanel);

        sinkEvents(Event.ONMOUSEDOWN | Event.ONMOUSEUP );
    }

    boolean dragged;
    public void onBrowserEvent(Event event) {
        super.onBrowserEvent(event);
        switch (DOM.eventGetType(event)) {
            case Event.ONMOUSEDOWN:
                dragged = true;
                break;
            case Event.ONMOUSEUP:
                dragged = false;
                break;
            case Event.ONMOUSEMOVE:
                break;
        }
    }

    public boolean isResizing(){
        return dragged;
    }

    public void setTopWidget(Widget widget){
        topScrollPanel.add(widget);
    }

    public void setBottomWidget(Widget widget){
        bottomScrollPanel.add(widget);
    }

    public void removeWidget(Widget widget){
        try {
            if( topScrollPanel.getWidget()== widget){
                topScrollPanel.remove(widget);
                return;
            }
            bottomScrollPanel.remove(widget);
        } catch (Exception e) {
        }

    }

    public void setSplitPosition(String percent){
        if( percent.toLowerCase().indexOf("px") > -1){
            percent = percent.replace("px","").trim();
            int p = Integer.parseInt(percent);
            setSplitPosition(p);
            return;
        }
        percent = percent.replace("%","").trim();
        int p = Integer.parseInt(percent);
        int oH =  getOffsetHeight();
        if( oH == 0 ){
            oH = (Window.getClientHeight()-offset);
        }
        double h = (oH*p)/100.0;
        setWidgetSize(topScrollPanel, h);

    }

    public void setSplitPosition(int pixels){
        setWidgetSize(topScrollPanel, pixels);

    }

    public void setOffset(int size){
        this.offset = size;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:16:06.767

**我的方法如下。**

`HorizontalSplitPanel`用下面定义的替换每个用法`HorizontalSplitPanelWrapper`，然后修复导入 - 这将消除`import HorizontalSplitPanel`并添加`import HorizontalSplitPanelWrapper`. 完毕。

```
@SuppressWarnings("deprecation")
public class HorizontalSplitPanelWrapper implements IsWidget {

    private Panel hsp = new com.google.gwt.user.client.ui.HorizontalSplitPanel();

    public Widget asWidget() {
        return hsp;
    }

    public com.google.gwt.user.client.Element getElement() {
        return hsp.getElement();
    }

    public <H extends EventHandler> HandlerRegistration addHandler(final H handler, GwtEvent.Type<H> type) {
        return hsp.addHandler(handler, type);
    }

    public boolean isResizing() {
        return ((com.google.gwt.user.client.ui.HorizontalSplitPanel) hsp).isResizing();
    }

    public void setWidth(String width) {
        hsp.setWidth(width);
    }

    public void setSplitPosition(String pos) {
        ((com.google.gwt.user.client.ui.HorizontalSplitPanel) hsp).setSplitPosition(pos);
    }

    public void add(IsWidget w) {
        hsp.add(w);
    }
} 
```

**补充说明。**

我的解决方案使用`IsWidget`来自 GWT 的接口的小技巧 - 这可以最大限度地减少代码影响，因为`Widget`可以`IsWidget`在大多数对 GTW API 的调用中替换为实现。

我的代码中使用的每个方法`HorizontalSplitPanel`现在都由字段`HorizontalSplitPanelWrapper`存储的内部 Horizo​​ntalSplitPanel 实现并委托给它。`hsp`

不能将 Horizo​​ntalSplitPanel 声明为 type/param/result 的字段和方法，因为无论`@SuppressWarnings("deprecation")`. 因此，`hsp`字段被声明为`Panel`.

如果在其余代码中使用了更多 Horizo​​ntalSplitPanel 方法，则`HorizontalSplitPanelWrapper`每个方法中都必须有一个虚拟委托方法。`hsp`必须在每个此类方法中使用显式转换从字段中检索正确的 Horizo​​ntalSplitPanel 对象。

**而已。**由于 Horizo​​ntalSplitPanel，不再有弃用警告，仍然可以使用。****

# ubuntu - Ubuntu 12.04 在 java 上安装 netbeans IDE 6.9.1

> ID：10986588
> 
> 赞同：1
> 
> 时间：2012-06-11T19:49:01.050
> 
> 标签：ubuntu, ubuntu-12.04

我在虚拟机上使用 ubuntu 12.04，但是当我尝试安装 java 时，它给了我这样的错误

```
sudo apt-get sun-java6-jdk sun-java6-jre
[sudo] password for samkt: 
E: Invalid operation sun-java6-jdk 
```

所以现在我也无法安装netbeans，因为它需要java和JVM来安装netbeans。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:55:26.393

如我所见，您忘记了“安装”命令。

```
sudo apt-get install <<type packages here>> 
```

例如：

```
sudo apt-get install ubuntu-restricted-extras chromium-browser python 
```

~~以及安装Gava~~ Java的完整代码：

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:52:13.147

看这个网站：[http ://www.ubuntubuzz.com/2012/01/sun-java-6-now-can-be-installed-on.html](http://www.ubuntubuzz.com/2012/01/sun-java-6-now-can-be-installed-on.html)

它将解释从 Ubuntu 存储库中删除 Java 到通过 PPA 安装它的所有内容。

**通过 PPA 在 Ubuntu 上安装 Sun Java 6 当然，这个消息给许多 Ubuntu 用户带来了一些恐慌，但不要担心！您仍然可以通过 PPA 安装 Sun Java 6：**

```
sudo apt-add-repository ppa:flexiondotorg/java
sudo apt-get update
sudo apt-get install sun-java6-jre sun-java6-plugin 
```

**上述 PPA 包含适用于 Ubuntu 10.04 Lucid Lynx 到 Ubuntu 12.04 Precise Pangolin 的 Sun Java 6 包！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:54:24.623

你错过了`install`命令。

```
sudo apt-get install sun-java6-jdk sun-java6-jre 
```

但是，我认为这不会解决您安装此软件包的问题，​​因为我认为它已根据许可证要求从标准存储库中删除。您必须研究第三方位置或手动安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:36:00.050

我需要虽然这里有 6.9.1 版（用于 ruby​​ 支持）[，](http://netbeans.org/downloads/6.9.1/start.html?platform=linux&lang=en&option=ruby)但 我需要旧的 java 版。所以我去了[oracle 网站](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jdk-6u34-oth-JPR)并搜索了旧版本（警告您需要一个 oracle 帐户）。执行下载的 *.bin 文件并将文件移动到 ubuntu jvm 目录

```
sudo mv jdk1.6.0_32 /usr/lib/jvm/ 
```

并启用 jvm

```
sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk1.6.0_32/bin/javac 1
sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk1.6.0_32/bin/java 1
sudo update-alternatives --install /usr/bin/javaws javaws /usr/lib/jvm/jdk1.6.0_32/bin/javaws 1

```

```
sudo update-alternatives --config javac
sudo update-alternatives --config java
sudo update-alternatives --config javaws

```

现在检查 Java 版本是否准备就绪；）我从[这里得到了信息](http://www.jusuchyne.com/codingforme/2012/05/installing-oracle-java-jdk-6-or-7-on-ubuntu-12-04/)

# javascript - Ember.TextField valueBinding 到 parentView

> ID：10986591
> 
> 赞同：5
> 
> 时间：2012-06-11T19:49:16.700
> 
> 标签：javascript, ember.js

我正在尝试将`Ember.TextField`'s绑定`value`到其父视图中的属性。此代码在升级到最新版本的 ember 之前有效。我已经阅读了有关新视图范围的信息，但无法弄清楚它是否/如何适用于此。

模板`my-template`：

```
 Input: {{view Ember.TextField valueBinding="theValue" }} 
```

看法：

```
App.MyView = Em.View.extend({
    templateName: 'my-template',
    theValue: null,
    init: function(){
        this._super();
        this.set('theValue','');
    },
    keyDown: function(e){
       if(e.keyCode === 13){
            alert(this.get('theValue'));
       }
    }
});​ 
```

jsFiddle：[演示](http://jsfiddle.net/U3thg/15/)

我试过`"parentView.theValue"`了`"view.parentView.theValue"`

我知道我可以从内部给出`TextField`a`viewName`并绑定到它，`MyView`但我想知道为什么以前的方法停止工作。

**更新：**

*   [汤姆戴尔的解释](https://gist.github.com/2494968)
*   [余烬源](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js#L31)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-12T02:30:57.367

我已经更新了你的 jsFiddle 来工作：http: [//jsfiddle.net/U3thg/23/](http://jsfiddle.net/U3thg/23/)

我刚把你改成`valueBinding`.`"view.theValue"`

```
 {{view Ember.TextField valueBinding="view.theValue" }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T10:01:28.253

给你一个答案，为什么以前的方法停止工作。我认为 ember 的团队更改了模板中的绑定上下文。现在我认为当前上下文是附加到封闭视图的控制器。

我派生了@ebryn 小提琴：

[http://jsfiddle.net/Sly7/tcvhB/](http://jsfiddle.net/Sly7/tcvhB/)

# php - 如何在PHP中组合从parallelcurl返回的json编码数组

> ID：10986596
> 
> 赞同：0
> 
> 时间：2012-06-11T19:49:31.463
> 
> 标签：php, json, xmlhttprequest

我正在尝试实施我在此站点上找到的解决方案：

[PHP 中的并行 cURL 执行](http://www.codediesel.com/php/parallel-curl-execution/)

但是，我在合并所有结果并将其发送到 xmlhttprequest 进行处理时遇到了问题。最初 xmlhttprequest 将调用一个并行执行其他 php 脚本的 php 脚本。这是我的主要 php 脚本（由 xmlhttprequest 调用）：

```
//parallelcurl_index.php

$param1 = $_REQUEST['param1'];
$param2 = $_REQUEST['param2'];

require_once('parallelcurl.php');

$url1 = "http://example.com/script1.php?param1=" . $param1 . "&param2=" . $param2;
$url2 = "http://example.com/script2.php?param1=" . $param1 . "&param2=" . $param2;
$url3 = "http://example.com/script3.php?param1=" . $param1 . "&param2=" . $param2;
$url4 = "http://example.com/script4.php?param1=" . $param1 . "&param2=" . $param2;
$url5 = "http://example.com/script5.php?param1=" . $param1 . "&param2=" . $param2;
$url6 = "http://example.com/script6.php?param1=" . $param1 . "&param2=" . $param2;
/* 
 each of the above urls will execute one or more oracle sql queries and procedures and store the results in array which 
 will be sent to this script.
 example $url1 will send results like this:

$url1_response = array('city' => $city, 'country' => $country);
echo json_encode($url1_response); 

*/

$max_requests = 10;

$curl_options = array(
    CURLOPT_SSL_VERIFYPEER => FALSE,
    CURLOPT_SSL_VERIFYHOST => FALSE
);

$parallel_curl = new ParallelCurl($max_requests, $curl_options);

// Start 6 parallel requests. All three will be started simultaneously.
$parallel_curl->startRequest($url1, 'on_request_done');
$parallel_curl->startRequest($url2, 'on_request_done');
$parallel_curl->startRequest($url3, 'on_request_done');
$parallel_curl->startRequest($url4, 'on_request_done');
$parallel_curl->startRequest($url5, 'on_request_done');
$parallel_curl->startRequest($url6, 'on_request_done');

$parallel_curl->finishAllRequests();

// This function gets called back for each request that completes
function on_request_done($content, $url, $ch, $search) {
    $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    if ($httpcode !== 200) {
        print "Fetch error $httpcode for '$url'\n";
        return;
    }

    $responseobject = json_decode($content, true);

     // I tried this, to combine the arrays but did not work:
     //$segments = array();
     //$segments = array_merge($responseobject, $segments);
     //echo json_encode($segments);

    // send results from all above scripts to xmlhttprequest 
    echo json_encode($responseobject); 

} 
```

回到 xmlhttprequest ，我可以检查所有返回的数据：

```
alert(xmlHttp.responseText); 
```

alert() 输出如下：

```
{"city":"Muscat","country":"Oman"}{"company":"OTL","Department":"IT"} 
```

我可以看到每个 json 数组之间没有逗号分隔符，因此 eval() 将失败：

```
 var  responseArr = eval('(' + xmlHttp.responseText + ')'); 
```

如果我只在 $parallel_curl->startRequest() 中为一个 url 运行脚本并评论其他五个它可以正常工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:31:29.487

嗯，我不是粉丝或并行 curl 请求（为什么要捆绑网络服务器，像 GearMan 这样的东西更适合），但如果你走这条路：

```
class ReturnCollector {
   private $data = array();
   function addData($content){
      $this->data[] = json_decode($content, true);
   }
   function getData(){
      return $this->data);
   }
   function outputData(){
      echo json_encode($this->getData());
   }
}

$collector = new ReturnCollector();
$parallel_curl->startRequest($url1, array($collector,'addData'));
$parallel_curl->startRequest($url2, array($collector,'addData'));
$parallel_curl->startRequest($url3, array($collector,'addData'));
//etc...
$parallel_curl->finishAllRequests();
$collector->outputData(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:16:45.370

我修改了类代码：

```
class ReturnCollector {
    private $data     = array();
    private $tmpArr   = array();
    function addData($content){
        $this->tmpArr   = json_decode($content, true);
        $this->data = array_merge($this->tmpArr, $this->data);
    }
    function getData(){
        return $this->data;
    }
    function outputData(){
        echo json_encode($this->getData());
    }
} 
```

现在它工作正常，非常感谢您的帮助。

# grails - 使用位置参数时查询不返回结果

> ID：10986597
> 
> 赞同：0
> 
> 时间：2012-06-11T19:49:32.207
> 
> 标签：grails, hql

我有以下查询：

```
def currentUser = User.find('from User where enabled = (:a) 
AND ( emailAddress = (:e) OR altEmailAddress like (:e) )', 
[a: _enabled, e: _email.toLowerCase()]) 
```

我知道表中有应该返回的数据，它似乎没有返回任何结果。我做 Like 的方式有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:08:26.183

尝试在值之前和之后使用“%”。在你的情况下：

```
def currentUser = User.find('from User where enabled = (:a) AND ( emailAddress = (:e) OR        altEmailAddress like (:e) )', [a: _enabled, e: '%' + _email.toLowerCase() + '%']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:35:15.823

对于您喜欢的部分，您想`'%'`在电子邮件地址的某处添加一个（或类似的运算符），例如`"foo%@bar.com"`。如果没有这些运算符之一，sql 将寻找精确匹配。

# algorithm - 带有克莱恩星的自动机

> ID：10986605
> 
> 赞同：2
> 
> 时间：2012-06-11T19:50:17.837
> 
> 标签：algorithm, kleene-star

我正在学习自动机。你能帮我了解一下带 Kleene 闭包的自动机是如何工作的吗？假设我有字母 a、b、c，我需要找到以 Kleene 星号结尾的文本——比如 ab*bac——它将如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:57:09.577

Kleene 星号('*') 表示您可以根据需要多次出现该字符（0 次或更多次）。 `a*`将匹配任意数量的 a。

`(ab)*`将匹配任意数量的字符串“ab”

如果您尝试匹配表达式中的实际星号，那么您编写它的方式完全取决于您正在使用的正则表达式的语法。对于一般情况，反斜杠`\`用作转义字符：

`\*`将匹配一个星号。

要在最后识别模式，请使用连接：

`(a U b)*c*`将匹配任何结尾包含 0 个或多个 'c'，前面有任意数量的 a's 或 b's 的字符串。

对于以 Kleene 星号结尾的匹配文本，同样，您可以有 0 次或多次出现该字符串：

`ab(c)*`- 可能的匹配项：ab、abc、abcc、abccc 等。

`a(bc)*`- 可能的匹配项：a、abc、abcbc、abcbcbc 等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T16:47:55.313

这个问题似乎更多地是关于自动机如何处理 Kleene 闭包，而不是 Kleene 闭包的含义。

使用简单的正则表达式，例如 ，`abc`设计一个自动机来识别它是非常简单的。每个状态基本上都会告诉您到目前为止您在表达式中的位置。状态 0 意味着它还没有看到任何东西。状态 1 表示已看到`a`。状态 2 表示已看到`ab`。等等。

Kleene 闭包的困难在于，像这样的模式会`ab*bc`引入歧义。一旦自动机看到了`a`并且然后面对 a `b`，它就不知道那`b`是它的一部分`b*`还是它后面的文字`b`，并且在它读取更多符号之前它不会知道 - 可能更多。

简单的答案是自动机只是有一个状态，字面意思是它还不知道走哪条路。

在简单的情况下，您可以直接构建此自动机。在一般情况下，您通常会构建一种称为非确定性有限自动机的东西。您可以模拟 NDFA，或者 - 如果性能很关键 - 您可以应用一种将 NDFA 转换为确定性算法的算法。该算法本质上为您生成了所有模棱两可的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:57:28.820

您在英语中的表达 ab*bac 会是这样的：

a 后跟 0 个或多个 b 后跟 bac

```
strings that would evaluate as a match to the regular expression if used for search

abac
abbbbbbbbbbac
abbac

strings that would not match

abaca //added extra literal
bac //missing leading a 
```

如上一个答案所述，实际搜索 * 需要一个特定于实现的转义字符，并且需要了解您选择的语言/库。

# uiviewanimation - ios UIView动画曲线

> ID：10986607
> 
> 赞同：16
> 
> 时间：2012-06-11T19:50:30.990
> 
> 标签：uiviewanimation, uiviewanimation-curve

有没有办法像下面这样“简单而简单”地做事？该曲线似乎仍在使用`EaseOut`。

```
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView animateWithDuration:0.5 animations:^{
    // ... do stuff here
}]; 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-11T20:12:02.280

您正在混合两种不同类型的 UIView 动画。您应该使用以下任何一种：

```
[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseIn
                 animations:^{
                    // ... do stuff here
               } completion:NULL]; 
```

这来自较新的基于块的 UIView 动画 API。另一方面，第一行是旧 UIView 动画 API 的一部分，如下所示：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
// ... do stuff here
[UIView commitAnimations]; 
```

它们做同样的事情，你可以使用任何一种（尽管 Apple 推荐基于块的 API，因为在动画完成后执行回调更容易/更干净）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T09:42:31.130

您可以使用 Core Animation 、 CAKeyFrameAnimation 来定义曲线点。请参阅本教程： http: [//nachbaur.com/blog/core-animation-part-4](http://nachbaur.com/blog/core-animation-part-4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T09:19:34.277

让我们取曲线点 p1、p2、p3、p4 和 p5，并找到每对相邻点的中点。将 m1 标记为 p1 和 p2 的中点。对于 m2、m3、m4 也是如此。

*   将四边形曲线添加到点 m2，以 p2 作为控制点。
*   将四边形曲线添加到点 m3，以 p3 作为控制点。
*   将四边形曲线添加到点 m4，以 p4 作为控制点。

代码：

```
CGFloat screenHeight = self.view.frame.size.height;
CGFloat screenWidth = self.view.frame.size.width;

UIView *aniView = [[UIView alloc] initWithFrame:CGRectMake(50, screenHeight, 50, 50)];
[aniView setBackgroundColor:[UIColor redColor]];
aniView.layer.cornerRadius = 25.0;
[self.view addSubview:aniView];

UIBezierPath *movePath = [UIBezierPath bezierPath];
[movePath moveToPoint:aniView.center];
[movePath addQuadCurveToPoint:CGPointMake(screenWidth-50,screenHeight-50)
                 controlPoint:CGPointMake(screenWidth/2,screenHeight-150)];
CAKeyframeAnimation *moveAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
moveAnim.path = movePath.CGPath;
moveAnim.removedOnCompletion = YES;
CAAnimationGroup *animGroup = [CAAnimationGroup animation];
animGroup.animations = [NSArray arrayWithObjects:moveAnim,  nil];
animGroup.duration = 2.0;

[CATransaction begin]; {
    [CATransaction setCompletionBlock:^{
        [aniView.layer removeAllAnimations];
        [aniView removeFromSuperview];
    }];

    [aniView.layer addAnimation:animGroup forKey:nil];

} [CATransaction commit]; 
```

将上面的代码复制到某个方法中并尝试调用该方法...

# mysql - 数据库历史化

> ID：10986609
> 
> 赞同：8
> 
> 时间：2012-06-11T19:50:38.600
> 
> 标签：mysql, database-design

我们在应用程序中有一个要求，我们需要存储引用以供以后访问。

示例：用户可以一次提交发票，并且该发票包含的所有参考资料（客户地址、计算的金额、产品描述）和计算应该随着时间的推移而存储。

我们需要以某种方式保存引用，但是如果产品名称发生变化怎么办？因此，我们需要以某种方式复制所有内容，以便稍后记录，并且不受将来更改的影响。即使产品被删除，它们也需要稍后在存储发票时进行审查。

这里关于数据库设计的最佳实践是什么？甚至什么是最灵活的方法，例如当用户想要稍后编辑他的发票并从数据库中恢复它时？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T21:58:52.027

这是一种方法：

![在此处输入图像描述](../Images/e4d059c317af94e046a9057101b3e53f.png)

本质上，我们从不修改或删除现有数据。我们通过创建一个新版本来“修改”它。我们通过设置 DELETED 标志来“删除”它。

例如：

*   如果产品更改价格，我们在 PRODUCT_VERSION 中插入一个新行，同时旧订单保持连接到旧 PRODUCT_VERSION 和旧价格。
*   当买家更改地址时，我们只需在 CUSTOMER_VERSION 中插入一个新行并将新订单链接到该行，同时保持旧订单链接到旧版本。
*   如果产品被删除，我们并没有真正删除它——我们只是设置了 PRODUCT.DELETED 标志，所以历史上为该产品所做的所有订单都保留在数据库中。
*   如果客户被删除（例如因为他要求注销），设置 CUSTOMER.DELETED 标志。

注意事项：

*   如果产品名称需要唯一，则无法在上述模型中以声明方式强制执行。您要么需要将 NAME 从 PRODUCT_VERSION“提升”为 PRODUCT，将其设为密钥并放弃“演变”产品名称的能力，要么仅在最新的 PRODUCT_VER 上强制唯一性（可能通过触发器）。
*   客户的隐私存在潜在问题。如果客户从系统中删除，可能需要从数据库中物理删除其数据，而仅设置 CUSTOMER.DELETED 不会这样做。如果这是一个问题，要么清空所有客户版本中的隐私敏感数据，要么将现有订单与真实客户断开连接并将它们重新连接到特殊的“匿名”客户，然后物理删除所有客户版本。

该模型使用了大量的识别关系。这会导致“胖”外键，并且可能是一个存储问题，因为 MySQL 不支持前沿索引压缩（与 Oracle 不同），但另一方面[InnoDB**总是**将数据聚集](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)在 PK 上，这集群可以有利于性能。此外，JOIN 也不太需要。

具有非识别关系和代理键的等效模型如下所示：

![在此处输入图像描述](../Images/8a850f067f31bee58dbf7444ac438fab.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:55:58.943

您可以在产品表中添加一列，指示它是否正在销售。然后，当产品被“删除”时，您只需设置标志，使其不再作为新产品可用，但您保留数据以供将来查找。

要处理名称更改，您应该使用 ID 来引用产品，而不是直接使用名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:59:50.477

我相信您知道，您面临的问题是数据库规范化的结果。解决此问题的方法之一可以从商业智能技术中获取 - 将数据以非规范化状态归档在[数据仓库](http://en.wikipedia.org/wiki/Data_warehouse)中。

标准化数据：

*   订单表
    *   订单编号
    *   客户ID
*   客户表
    *   客户ID
    *   名
    *   ETC
*   项目表
    *   项目 ID
    *   项目名称
    *   项目价格
*   订单明细表
    *   ItemDetailId
    *   订单编号
    *   项目 ID
    *   项目数量
    *   ETC

当查询和存储去规范化时，数据仓库表看起来像

*   订单编号
*   客户ID
*   顾客姓名
*   客户地址
*   （其他客户字段）
*   ItemDetailId
*   项目 ID
*   项目名称
*   项目价格
*   （其他 OrderDetail 和 Item 字段）

通常，有某种计划的作业可以按计划将数据从规范化数据中提取到数据仓库中，或者如果您的设计允许，可以在订单达到特定状态时完成。（例如已发货）可能会在每次状态更改时存储记录（使用名为 OrderStatus 的字段跟踪当前状态），因此完全非规范化的数据可用于操作/履行过程的每个步骤。将数据归档到仓库的时间和方式将根据您的需要而有所不同。

* * *

以上涉及很多开销，但我知道的另一种常见方法会带来更多开销。

另一种方法是将表设为只读。如果客户想要更改他们的地址，您无需编辑他们现有的地址，而是插入一条新记录。

因此，如果我在 Jamnuary 第一次在您的网站上订购时的地址是 AddressId 12，那么我会在 7 月 4 日搬家，我会收到一个与我的帐户绑定的新 AddressId。（说 AddressId 123123，因为您的网站非常成功并吸引了大量客户。）

我在 7 月 4 日之前下的订单会关联到 AddressId 12，而在 7 月 4 日或之后下的订单会有 AddressId 123123。

对需要保留历史数据的每个表重复该模式。

* * *

我确实有第三种方法，但搜索它很困难。我只在一个应用程序中使用它，它实际上在这个单一实例中运行良好，它有一些非常具体的业务需求，可以完全按照特定时间点的方式重建数据。除非我有类似的业务需求，否则我不会使用它。

在特定状态下，将数据序列化为 Xml 文档或可用于重建数据的其他文档。这允许您将数据保存为序列化时的数据，保留原始表结构和相关性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T20:01:47.343

你开启了纯粹主义和实用主义方法之间的永恒争论。

从数据库规范化的角度来看，您“应该”保留所有相关数据。换句话说，假设产品名称更改，保存更改日期，以便您可以及时返回并使用该产品名称以及当天存在的所有其他数据重建您的发票。

“去”规范化的方法是将发票视为“时刻”，在相关表格中记录当天的实际数据。这种方法可以让您在没有任何依赖关系的情况下提取该发票，但您永远无法从头开始重新创建该发票。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T20:50:48.377

当您拥有对时间敏感的数据时，您可以使用 product 和 Customer 表作为查找表，并将信息直接存储在 Orders/orderdetails 表中。

因此订单表可能包含客户姓名和地址，详细信息将包含有关产品的所有相关信息，尤其是价格（您永远不想依赖产品表来获取订单时的初始查找之外的价格信息）。

这不是非规范化，数据会随着时间而变化，但您需要历史值，因此您必须在创建记录时存储它，否则您将失去数据完整性。您不希望您的财务报告突然显示您去年的销售额增加了 30%，因为您有价格更新。那不是你卖的。

# git - 合并的分支，但在修改它时，master 被修改

> ID：10986610
> 
> 赞同：0
> 
> 时间：2012-06-11T19:50:55.590
> 
> 标签：git, branching-and-merging

一个简单/新手的问题。我从主分支创建了一个分支（比如“测试”），尝试了一些东西，然后将其合并回来。现在，当我修改“测试”分支时，本地更改也会在主分支上进行。

我应该在合并后删除一个分支而不重用它吗？我以为分支会发散...

为了更清楚，我所做的是：

```
git checkout master
git branch testing
git checkout testing
// Modify files...
git add <modified-files>
git commit -m 'It worked!'
git checkout master
git merge testing

// Now I go back and edit the testing brach
git checkout testing
// Edit files...
git checkout master
// I can see the local changes I made to the testing branch!! (?) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:20:18.220

您的第二个更改实际上不在任何分支中（您尚未提交它们）。

[这](http://www.gitguys.com/topics/switching-branches-without-committing/)将解释如果您使用“脏”工作区更改分支会发生什么。

您可以将更改提交到测试分支，它会像往常一样偏离主分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:20:36.513

更改仅在工作副本中，它们还没有在任何分支中。如果您`git commit -a -m 'The changes'`在再次签出 master 之前这样做，您的更改将提交到测试分支。

如果您只想签出 master，但您还没有准备好提交您在测试分支上所做的更改，您现在可以使用`git stash`将您的更改放在一边。你现在有一个干净的工作副本，可以做任何你想做的事情（例如检查 master 并在那里进行提交）。完成后，您可以再次签出测试并使用`git stash pop`.

# macros - 从函数构建高阶函数的 Clojure 宏

> ID：10986611
> 
> 赞同：5
> 
> 时间：2012-06-11T19:50:58.903
> 
> 标签：macros, clojure

我正在尝试编写一个宏来构建类似于 compojure 中使用的中间件。

我希望能够打电话：

```
(def-middleware plus-two [x]
  (+ 2 x)) 
```

结果看起来像：

```
(defn plus-two [f]
 (fn [x]
   (f (+ 2 x))) 
```

我与阅读在线指南相去甚远，但这对我来说并不适用：

```
(defmacro def-middleware [fn-name args & body]
  '(defn ~fn-name [f]
     (fn ~args
       (f ~@body)))) 
```

任何帮助或指向更好的宏编写指南的指针都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T20:07:14.063

让我们看看是什么`macroexpand-1`给了我们：

```
user=> (clojure.pprint/pprint (macroexpand-1 '(def-middleware plus-two [x] (+ 2 x))))
(defn
~fn-name
[f]
$
(fn ~args$ (f (clojure.core/unquote-splicing body)))) 
```

不正是我们所追求的！首先要做的事情：如果你想在宏中取消引用，你需要使用“`”（准引号/语法引号运算符），而不是“'”。另外，我不确定您对这些美元符号的用途是什么，但*可能*是您正在使用 clojure`gensym`用于卫生的便捷快捷方式。但是在使用它的每个标识符（so `[f#]`，not `[f]$`）之后都需要它，并且每次出现标识符时都需要它。而且你*不需要*它`args`。把所有这些放在一起：

```
user=> (defmacro def-middleware [fn-name args & body] `(defn ~fn-name [f#] (fn ~args (f# ~@body))))
#'user/def-middleware
user=> (clojure.pprint/pprint (macroexpand-1 '(def-middleware plus-two [x] (+ 2 x))))
(clojure.core/defn
 plus-two
 [f__594__auto__]
 (clojure.core/fn [x] (f__594__auto__ (+ 2 x))))
nil
user=> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T04:16:52.767

也许这只是一个宏观练习，但是定义中间件函数的具体例子并不好——你失去了中间件概念给你的很多灵活性。例如，为什么要评估`(f (+ 2 x))`而不是评估`(+ 2 (f x))`？两者都是包装此函数的明智方法，您的语法无法描述后者。真的只是定义一个函数返回函数是灵活、简单、容易的；这个宏几乎没有带来任何好处。

# git - git tag 对象的格式是什么以及如何计算它的 SHA？

> ID：10986615
> 
> 赞同：2
> 
> 时间：2012-06-11T19:51:11.463
> 
> 标签：git, hash, tags, sha1

我熟悉[Git 如何为文件 (blob) 创建 SHA1 哈希](https://stackoverflow.com/q/552659/79202)，但不熟悉它们是如何为标签对象创建的。我假设它们是，如果我创建一个带注释的标签，但配方是什么？我如何在 Git 之外复制它（例如，在 Perl 或 Python 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-05T21:12:05.950

**从最小示例对格式进行逆向工程**

首先我们确定标签的格式是什么：

```
git tag -as -m abc mytag
cat .git/refs/tags/mytag 
```

输出标签 sha：

```
c1d7720e99f9dd1d1c8aee625fd6ce09b3a81fef 
```

所以我们按照[如何使用命令行工具压缩来提取 git 对象中的说明进行操作？](https://stackoverflow.com/questions/3178566/how-to-deflate-with-a-command-line-tool-to-extract-a-git-object)：

```
python -c "import zlib,sys;sys.stdout.write(zlib.decompress(sys.stdin.read()))" \
    <.git/objects/c1/d7720e99f9dd1d1c8aee625fd6ce09b3a81fef | hd 
```

这使：

```
00000000  74 61 67 20 37 39 38 00  6f 62 6a 65 63 74 20 61  |tag 798.object a|
00000010  30 32 63 35 30 32 39 65  30 38 66 37 37 65 61 65  |02c5029e08f77eae|
00000020  35 37 64 62 63 38 31 38  38 61 37 31 31 62 63 39  |57dbc8188a711bc9|
00000030  65 39 62 32 39 30 61 0a  74 79 70 65 20 63 6f 6d  |e9b290a.type com|
00000040  6d 69 74 0a 74 61 67 20  6d 79 74 61 67 0a 74 61  |mit.tag mytag.ta|
00000050  67 67 65 72 20 43 69 72  6f 20 53 61 6e 74 69 6c  |gger Ciro Santil|
00000060  6c 69 20 3c 63 69 72 6f  2e 73 61 6e 74 69 6c 6c  |li <ciro.santill|
00000070  69 40 67 6d 61 69 6c 2e  63 6f 6d 3e 20 31 35 33  |i@blebl.com> 153|
00000080  36 31 37 36 39 30 36 20  2b 30 31 30 30 0a 0a 61  |6176906 +0100..a|
00000090  62 63 0a 2d 2d 2d 2d 2d  42 45 47 49 4e 20 50 47  |bc.-----BEGIN PG|
000000a0  50 20 53 49 47 4e 41 54  55 52 45 2d 2d 2d 2d 2d  |P SIGNATURE-----|
000000b0  0a 0a 69 51 47 7a 42 41  41 42 43 67 41 64 46 69  |..iQGzBAABCgAdFi|
000000c0  45 45 50 6b 64 79 57 72  30 33 4f 6d 39 64 4d 41  |EEPkdyWr03Om9dMA|
000000d0  61 47 51 32 7a 61 2f 4d  2b 77 30 77 30 46 41 6c  |aGQ2za/M+w0w0FAl|
000000e0  75 51 4d 77 6f 41 43 67  6b 51 51 32 7a 61 2f 4d  |uQMwoACgkQQ2za/M|
000000f0  2b 77 0a 30 77 33 77 69  67 76 38 43 6c 31 35 43  |+w.0w3wigv8Cl15C|
00000100  78 4f 6e 71 2f 6c 49 2b  33 4b 47 5a 6e 47 45 66  |xOnq/lI+3KGZnGEf|
00000110  56 47 4b 71 43 46 7a 69  39 4f 66 63 51 48 4d 49  |VGKqCFzi9OfcQHMI|
00000120  77 59 39 6f 78 44 2f 35  68 30 56 37 7a 6b 4a 70  |wY9oxD/5h0V7zkJp|
00000130  78 2f 5a 0a 79 72 52 6d  37 62 41 2f 2f 2b 5a 37  |x/Z.yrRm7bA//+Z7|
00000140  54 59 6c 73 2f 36 54 44  6c 56 53 2f 44 69 72 79  |TYls/6TDlVS/Diry|
00000150  53 39 4d 38 7a 59 45 48  76 44 65 65 71 32 2f 78  |S9M8zYEHvDeeq2/x|
00000160  43 31 71 53 37 47 4e 59  5a 7a 30 36 50 76 2b 79  |C1qS7GNYZz06Pv+y|
00000170  4a 43 54 77 0a 6c 68 32  41 61 6d 7a 33 75 48 55  |JCTw.lh2Aamz3uHU|
00000180  64 6e 4f 37 51 79 70 6f  63 4f 54 6f 5a 4e 53 4a  |dnO7QypocOToZNSJ|
00000190  72 44 2b 2b 48 55 6e 36  77 70 34 54 6f 55 41 35  |rD++HUn6wp4ToUA5|
000001a0  73 37 34 63 46 79 52 58  49 2f 30 49 32 65 59 67  |s74cFyRXI/0I2eYg|
000001b0  44 2b 6b 49 7a 0a 4e 57  64 2b 45 4a 5a 61 52 74  |D+kIz.NWd+EJZaRt|
000001c0  63 55 75 4a 49 55 65 79  75 7a 68 31 64 49 77 6b  |cUuJIUeyuzh1dIwk|
000001d0  73 56 32 52 6e 42 31 37  64 5a 2f 4e 47 57 39 37  |sV2RnB17dZ/NGW97|
000001e0  37 4f 30 69 30 6f 6a 6f  50 6e 74 4e 6e 48 6f 61  |7O0i0ojoPntNnHoa|
000001f0  68 5a 2b 44 6e 4e 0a 71  78 41 37 36 4d 74 6d 43  |hZ+DnN.qxA76MtmC|
00000200  71 41 66 45 6d 68 2b 6b  49 55 74 61 42 44 61 5a  |qAfEmh+kIUtaBDaZ|
00000210  51 36 32 45 66 55 65 76  6c 34 78 6b 72 38 79 4b  |Q62EfUevl4xkr8yK|
00000220  4a 46 6d 53 69 4d 39 76  4c 34 73 7a 4a 75 69 61  |JFmSiM9vL4szJuia|
00000230  4b 56 58 43 71 2b 71 0a  71 33 6d 68 41 41 7a 73  |KVXCq+q.q3mhAAzs|
00000240  70 39 63 6d 32 2b 55 6d  47 7a 70 6b 37 52 51 6f  |p9cm2+UmGzpk7RQo|
00000250  4d 36 50 44 45 73 61 37  43 68 77 52 47 71 53 42  |M6PDEsa7ChwRGqSB|
00000260  78 34 46 48 2f 32 7a 4d  75 49 49 4e 4c 72 72 72  |x4FH/2zMuIINLrrr|
00000270  36 46 64 59 2b 4c 36 71  0a 34 4d 78 67 66 46 38  |6FdY+L6q.4MxgfF8|
00000280  61 6e 47 31 38 42 43 56  65 6d 47 44 65 6d 69 34  |anG18BCVemGDemi4|
00000290  42 71 58 53 4d 73 61 77  35 45 70 77 36 4f 78 43  |BqXSMsaw5Epw6OxC|
000002a0  6c 34 2f 65 33 74 43 48  4b 39 58 78 63 6d 7a 4d  |l4/e3tCHK9XxcmzM|
000002b0  70 62 6a 37 66 77 42 7a  7a 0a 41 76 63 6e 34 48  |pbj7fwBzz.Avcn4H|
000002c0  41 67 52 75 6b 77 7a 54  53 4f 53 59 30 6e 73 74  |AgRukwzTSOSY0nst|
000002d0  67 6b 79 6c 54 4b 69 4d  48 6d 42 4c 4f 2b 49 6b  |gkylTKiMHmBLO+Ik|
000002e0  58 63 4e 47 66 51 6b 46  51 41 67 49 59 67 4d 57  |XcNGfQkFQAgIYgMW|
000002f0  4e 4f 45 2f 68 59 76 73  2b 71 0a 46 51 4d 34 6e  |NOE/hYvs+q.FQM4n|
00000300  6a 45 63 0a 3d 32 50 51  32 0a 2d 2d 2d 2d 2d 45  |jEc.=2PQ2.-----E|
00000310  4e 44 20 50 47 50 20 53  49 47 4e 41 54 55 52 45  |ND PGP SIGNATURE|
00000320  2d 2d 2d 2d 2d 0a                                 |-----.|
00000327 
```

我们从中推断出格式是：

```
tag ${size}\0object ${sha_of_commit_it-points-to}
type ${type_of_object_it_points_to}
tag ${name_of_tag}
tagger ${username_and_email} ${seconds_since_utc} ${timezone}

${commit_message_including_gpg} 
```

从`hd`我们看到，完整的输出是 0x326 == 806 字节长，减去前缀`tag 798.`的 8 个字节： 大小`798`。

Git commit对象类比分析：[git commit对象的文件格式是什么？](https://stackoverflow.com/questions/22968856/what-is-the-file-format-of-a-git-commit-object/37438460#37438460)

**创建标签对象并获取其 SHA 的最小 Python 脚本**

为了确保我们正确理解它，这里是一个 Python 脚本，它从头开始生成一个工作 git repo，包括一个标签：

*   关键功能：[https ://github.com/cirosantilli/test-git-web-interface/blob/8770bcb84eeac2b3cc17aea6775e6c45c396cb54/other-test-repos/util.py#L94](https://github.com/cirosantilli/test-git-web-interface/blob/8770bcb84eeac2b3cc17aea6775e6c45c396cb54/other-test-repos/util.py#L94)
*   使用示例：[https ://github.com/cirosantilli/test-git-web-interface/blob/8770bcb84eeac2b3cc17aea6775e6c45c396cb54/other-test-repos/tag-test.py](https://github.com/cirosantilli/test-git-web-interface/blob/8770bcb84eeac2b3cc17aea6775e6c45c396cb54/other-test-repos/tag-test.py)

然后，您可以`cd`进入它并验证所有`git`命令是否正常工作。

在 git 2.16.1、Ubuntu 18.04 上测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T22:15:04.750

The pattern is basically:

```
sha1("tag " + datasize + "\0" + data) 
```

Where `data` is the output of `git cat-file`. One can produce this by piping that output to `git-hash-object` like so:

```
git cat-file tag v0.30 | git hash-object -t tag --stdin 
```

And the equivalent a perl one-liner is:

```
git cat-file tag v0.30 | perl -MDigest::SHA1 -E '$/=undef;$_=<>;say Digest::SHA1->new->add("tag ".length()."\0".$_)->hex digest' 
```

It seems that one can do this same thing with any of the types objects simply by replacing `"tag "` with the proper object name: `"blob "`, `"tree "`, or `"commit "`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:49:36.397

一个*标签*对象的内容如下：

```
object <commit-sha1>
type commit
tag <tag-name>
tagger <author-with-timestamp>

<tag-message> 
```

根据该文本计算 SHA1 值。

> 我如何在 Git 之外复制它（例如，在 Perl 或 Python 中）？

看看[libgit2](http://libgit2.github.com/)及其各种[绑定](http://libgit2.github.com/#bindings)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:09:11.550

这几乎是一样的，尽管提交对象前面的小标题是不同的。您可以使用`git cat-file`查看实际格式。

# wcf - 如何隐藏故障错误描述（WCF 和 Silverlight）

> ID：10986618
> 
> 赞同：0
> 
> 时间：2012-06-11T19:51:27.570
> 
> 标签：wcf, silverlight

我有使用 WCF 进行数据库操作的 silverlight 应用程序。使用 Fiddler 我能够篡改 WCF 中使用的特定方法所需的参数并获得异常“a：DeserializationFailedThe formatter 在尝试反序列化消息时抛出异常：尝试反序列化参数时出错[http://tempuri .org/:parameters](http://tempuri.org/:parameters) . InnerException 消息是“反序列化类型的对象时出错......”。我的安全团队不喜欢这样，并说它暴露了真正的异常。有没有办法处理这种类型的异常并显示一些用户定义的消息？如果是，请提供完整的样本。我在互联网上浏览了很多文章，但没有一篇有完整的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:42:46.073

您需要实现自定义错误处理程序。看

[http://msdn.microsoft.com/en-us/library/ms599828](http://msdn.microsoft.com/en-us/library/ms599828)

对于很多参考细节和这个

[http://www.neovolve.com/post/2008/04/07/implementing-ierrorhandler.aspx](http://www.neovolve.com/post/2008/04/07/implementing-ierrorhandler.aspx)

对于一个实现（以基本但有启发性的方式）正是您正在寻找的异常屏蔽行为的示例。

# windows - mkdir 仍然是原子的吗？（安装在 SAN 上的 Windows 7 文件系统）

> ID：10986621
> 
> 赞同：5
> 
> 时间：2012-06-11T19:51:36.853
> 
> 标签：windows, mkdir, atomic, san

我们有一些通过基于目录的队列进行通信的旧应用程序。队列中的每个项目都是一个文件，并且有一个头文件维护队列中项目的文件名的有序列表。

自然，这个旧代码需要在推送和弹出项目时锁定队列。它所做的是创建一个锁定子目录，假设 mkdir() 是一个原子操作 - 如果多个进程尝试创建一个目录，则只有其中一个会成功。

我的一位同事一直在试图解决一个晦涩难懂的问题，他认为原因是当进程在不同的机器上运行时，当有问题的文件系统安装在 SAN 上时，这种锁定不再起作用.

有没有可能他是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-27T00:52:31.553

我知道非常老的问题，但我希望有人觉得这很有趣。

使用 PowerShell 创建共享文件夹以用作互斥体时，我也得到了令人困惑的结果，因此我创建了一个测试脚本。

```
function New-FolderMutex {
    try {
        New-Item -ItemType directory -Path .\TheMutex -ErrorAction Stop > $null
        $true
    } catch {
        $false
    }
}

function Remove-FolderMutex {
    Remove-Item -Path .\TheMutex
}

1..100 | % {
    if (New-FolderMutex) {
        Write-Host "Inside loop $_"
        Remove-FolderMutex
    }
} 
```

此脚本在当前目录位于网络共享中时运行。

当我在两个单独的 PowerShell 控制台中同时运行此脚本时，从错误消息中可以清楚地看出该方法注定要失败。调用 Remove-Item 会产生许多不同的错误，即使它仅由创建文件夹的进程调用。似乎在幕后发生了一大堆非原子步骤。

当然，OP 在询问`mkdir`（可能是系统调用），我的示例使用了更高级别的 PowerShell cmdlet，但我希望这会引起一些兴趣。

来自两个过程之一的示例输出（为简洁而编辑）

```
Inside loop 30
Inside loop 31
Inside loop 32
Inside loop 33
Inside loop 34
Remove-Item : Access to the path 'H:\My Documents\PowerShell\MutexFolder\TheMutex' is denied.
At H:\My Documents\PowerShell\MutexFolder\Test-FolderMutex.ps1:93 char:5
+     Remove-Item -Path .\TheMutex
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : PermissionDenied: (H:\My Documents...Folder\TheMutex:String) [Remove-Item], UnauthorizedAccessException
    + FullyQualifiedErrorId : RemoveItemUnauthorizedAccessError,Microsoft.PowerShell.Commands.RemoveItemCommand

Inside loop 39
Remove-Item : H:\My Documents\PowerShell\MutexFolder\TheMutex is a NTFS junction point. Use the Force parameter to delete or modify.
At H:\My Documents\PowerShell\MutexFolder\Test-FolderMutex.ps1:93 char:5
+     Remove-Item -Path .\TheMutex
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : WriteError: (H:\My Documents...Folder\TheMutex:DirectoryInfo) [Remove-Item], IOException
    + FullyQualifiedErrorId : DirectoryNotEmpty,Microsoft.PowerShell.Commands.RemoveItemCommand

Inside loop 42
Remove-Item : Could not find a part of the path 'H:\My Documents\PowerShell\MutexFolder\TheMutex'.
At H:\My Documents\PowerShell\MutexFolder\Test-FolderMutex.ps1:93 char:5
+     Remove-Item -Path .\TheMutex
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : WriteError: (H:\My Documents...Folder\TheMutex:String) [Remove-Item], DirectoryNotFoundException
    + FullyQualifiedErrorId : RemoveItemIOError,Microsoft.PowerShell.Commands.RemoveItemCommand

Inside loop 44
Inside loop 45 
```

# java - 使用 Selenium WebDriver (Java) 从 AJAX 文本框中选择值

> ID：10986630
> 
> 赞同：0
> 
> 时间：2012-06-11T19:52:18.107
> 
> 标签：java, selenium, webdriver

有人可以建议如何使用 Selenium WebDriver Java API 从 AJAX 文本框中选择值吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:02:44.900

您根本没有给我们任何代码。

你需要看看这个网站：www.whathaveyoutried.com

给定这样的示例网页：

```
<html
    <head>
    </head>
    <body>
        <label for="ageTextBox" >Please enter your age:</label>
        <input type="text" id="ageTextBox" />
    </body>
</html> 
```

我可以得到文本框，它的值如下：

```
WebElement query = driver.findElement(By.id("ageTextBox"));
query.getText(); // this will give you a string containing whats in the textbox 
```

注意：您似乎没有阅读过任何 Selenium 教程，因为这是此类教程中涵盖的基本步骤。请查看 Selenium 网站和文档。

[http://seleniumhq.org/docs/](http://seleniumhq.org/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T11:12:16.220

如果输入字段的 id 是`id="gs_htif0"`，并且您想从文本字段中读取数据，则可以使用以下代码行：

```
WebElement Text=driver.findElement(By.id("gs_htif0")).getAttribute("Placeholder");
System.out.println(Text); 
```

# hadoop - Hadoop 配置：mapred.* vs mapreduce.*

> ID：10986633
> 
> 赞同：8
> 
> 时间：2012-06-11T19:52:26.260
> 
> 标签：hadoop, mapreduce

我注意到有两组 Hadoop 配置参数：一组使用 mapred.*，另一组使用 mapreduce。*. 我猜这些可能是由于旧 API 与新 API 的关系，但如果我没记错的话，这些似乎在新 API 中并存。我对么？如果是这样，是否有一个通用的声明用于 mapred。*mapreduce.* 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:44:54.647

检查 0.20.2 的源代码，只有几个`mapreduce.*`属性，它们围绕配置作业输入/输出格式、映射器/组合器/reducer 和分区器类（它们还向作业客户端发出正在使用新 API 的信号由用户 - 查看源代码`o.a.h.mapreduce.Job`，`setUseNewAPI()`方法）

*   `mapreduce.inputformat.class`
*   `mapreduce.outputformat.class`
*   `mapreduce.partitioner.class`
*   `mapreduce.map.class`
*   `mapreduce.combine.class`
*   `mapreduce.reduce.class`

还有一些属性，但它们是辅助配置

输入和输出格式，无论是新的还是旧的 API 版本，通常使用`mapred.*`属性

例如，您的地图信号会减少您使用的输入路径`mapred.input.dir`（无论您使用的是新 API 还是旧 API）。与输出属性相同`mapred.output.dir`

所以 if 的长短是，如果没有实用方法来配置属性（`FileInputFormat.setInputPaths(Job, String)`），那么您需要检查源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:03:04.883

是的，mapred 库已被弃用。mapreduce 库是 hadoop 0.20.1 中的新库。

但是，您仍然可以使用 mapred 提供的某些功能，这就是您仍然可以在目录中找到它的原因。

请查看此链接以了解您仍然可以使用哪些功能：http: [//hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/package-summary.html](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/package-summary.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:00:20.650

`hadoop.mapred`已被弃用。

`0.20.1`使用前的版本`mapred`。之后的版本使用`mapreduce`.

我不认为它们并存。

# php - kohana 查询仅显示最新记录

> ID：10986635
> 
> 赞同：1
> 
> 时间：2012-06-11T19:52:27.133
> 
> 标签：php, mysql, kohana

好的，所以基本上我正在我的 kohana 项目中创建一个 pm 收件箱

到目前为止，我已经能够在此查询没有问题的情况下检索消息

```
$messages = DB::select('users.username', 'users.id', 'profiles.profile_picture', 'messages.thread', 'messages.subject', 'messages.content', array('messages.id', 'mid'))->from('messages')->join('users', 'LEFT')->on('users.id', '=', 'messages.from_id')
                ->join('profiles', 'LEFT')->on('profiles.user_id', '=', 'messages.from_id')->where('messages.to_id', '=', $user)->and_where('messages.deleted', '=', '0')->execute(); 
```

我的问题是，如果有来自同一用户的多条消息，我只想显示最后一条消息。这应该在查询中完成还是在呈现结果时使用 php 完成。

我有一个我认为可以使用的日期列，但我不确定最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:34:11.897

```
$messages = DB::select('users.username', 'users.id', 'profiles.profile_picture', 'messages.thread', 'messages.subject', 'messages.content', array('messages.id', 'mid'))
  ->from('messages')
  ->join('users', 'LEFT')->on('users.id', '=', 'messages.from_id')
  ->join('profiles', 'LEFT')->on('profiles.user_id', '=', 'messages.from_id')
  ->where('messages.to_id', '=', $user)
  ->and_where('messages.deleted', '=', '0')
  ->order_by('messages.id', 'desc')
  ->offset(0)
  ->limit(1)
  ->execute(); 
```

# jboss - 证书/密钥库配置问题 - JBoss AS 7

> ID：10986637
> 
> 赞同：0
> 
> 时间：2012-06-11T19:52:34.857
> 
> 标签：jboss, keystore, keytool, truststore

我一直在努力让它工作一段时间，现在我已经走到了尽头。我正在尝试将从安全站点获得的证书添加到本地密钥库和信任库，然后让 JBoss 7.1 配置获取它。我主要尝试遵循的文档在这里：[http](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/keytool.html) ://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/keytool.html 。

这是我正在执行的内容：

> 1.  keytool -genkey -alias myalias.com -keypass changeit -storepass changeit -keystore keystore.jks
>     
>     
> 2.  keytool -import -trustcacerts -keystore keystore.jks -storepass changeit -noprompt -alias myalias.com -文件下载-certificate.pem
>     
>     
> 3.  keytool -export -alias myalias.com -file cacerts.cer -keystore keystore.jks

这是我的 JBoss 7.1 Standalone.xml 文件的相关部分：

```
<connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
    <ssl name="ssl" password="changeit" key-alias="myalias.com" certificate-key-file="${JBOSS_HOME}/keystore.jks" protocol="TLSv1" verify-client="true" ca-certificate-file="${JBOSS_HOME}/keystore.jks"/>
</connector> 
```

最后，这是 JBoss 启动时写在日志中的堆栈跟踪的顶部：

```
15:39:35,882 ERROR [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-2) Error initializing endpoint: java.io.IOException: SSL configuration is invalid due to No available certificate or key corresponds to the SSL cipher suites which are enabled.
    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.checkConfig(JSSESocketFactory.java:788) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:493) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:168) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:977) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:190) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.Connector.init(Connector.java:983) [jbossweb-7.0.13.Final.jar:]
etc... 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T01:01:07.147

如果提供密钥库，则需要在 ssl 部分指定别名，如下所示

```
key-alias="myalias.com"
```

另外，我认为证书文件是 ca-certificate-file。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T14:46:40.317

证书/密钥库配置问题 - JBoss AS 7

第 1 步：在standalone.xml 文件中添加这一行

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
            <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http" redirect-port="8443"/>
            <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" secure="true">
                <ssl name="foo-ssl" key-alias="foo" password="name" certificate-key-file="../standalone/configuration/test.keystore" protocol="TLSv1" certificate-file="../standalone/configuration/intermediate.cer"/>
            </connector>
            <virtual-server name="default-host" enable-welcome-root="false">
                <alias name="localhost"/>
                <alias name="test.com"/>
            </virtual-server>
        </subsystem> 
```

第2步

在 web.xml 文件中添加这一行

```
<security-constraint>
         <web-resource-collection>
             <web-resource-name>HTTPs test</web-resource-name>
             <url-pattern>/*</url-pattern>
         </web-resource-collection>
         <user-data-constraint>
             <transport-guarantee>CONFIDENTIAL</transport-guarantee>
         </user-data-constraint>
    </security-constraint> 
```

# python - AllegroGraph - N-Triples 中的 UTF-8 字符

> ID：10986640
> 
> 赞同：0
> 
> 时间：2012-06-11T19:52:52.690
> 
> 标签：python, unicode, utf-8, allegrograph

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:39:51.533

use codecs module.

```
import codecs
f = codecs.open('file.txt','r','utf8') 
```

this will open your file forcing the utf8 encoding

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:01:10.527

# ios - Xcode将不必要的文件复制到目标中

> ID：10986641
> 
> 赞同：1
> 
> 时间：2012-06-11T19:52:53.733
> 
> 标签：ios, xcode

在我的 Xcode 项目中，我将它设置为在“复制捆绑资源”步骤中复制我需要的所有文件，并且它没有链接到任何额外的库，但是当我编译项目时，它复制了许多文件t 甚至在项目的文件引用中（许多与此版本的应用程序无关的 .dll 文件）。

这些文件可能在某一时刻被意外添加到“复制捆绑资源”步骤中，但后来被删除。我怎样才能找出为什么这些文件仍然被复制以及如何防止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:02:36.380

原来这些文件是在删除这些文件之前从构建中遗留下来的。从产品文件夹中删除应用程序可以删除额外的文件。

# android - 我是否需要从主/UI 线程调用 AppWidgetManager 的 updateAppWidget 方法？

> ID：10986647
> 
> 赞同：0
> 
> 时间：2012-06-11T19:53:17.970
> 
> 标签：android, widget, android-service, android-appwidget, appwidgetprovider

我已经阅读了有关 App Widgets 的开发人员指南，并且我了解到为避免 ANR 错误，您应该在*AppWidgetProvider的**onUpdate*方法中启动服务以更新小部件......我对此类服务有疑问：何时我们开发标准服务，可以从一个活动开始，我们应该避免在*onStartCommand*中计算太长，因为*onStartCommand*方法在主 UI 线程中运行。所以，我们是否应该避免在由启动的服务的*onStartCommand中进行长时间计算**AppWidgetProvider*还是在这种情况下我们不会冒险阻止 UI？如果我们必须避免在*onStartCommand中进行长时间计算*******同样在这种情况下，我们可以在服务中启动工作线程，还是使用 Intent 服务？在这种情况下，我们可以使用*AppWidgetManager的**updateAppWidget*方法从我们想要的任何线程更新小部件，还是冒着从 UI 线程外部更新 UI 的风险？******

 ***我希望问题很清楚..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:22:05.593

您可以从 onUpdate 启动 Intent 服务，然后像往常一样使用 AppWidgetManager 从服务更新小部件。这并不意味着您要在 UI 线程之外更新 UI。即使您从 onUpdate 更新小部件，您使用的是 RemoteViews 和 AppWidgetManager，您也不会直接更新 UI。AppWidgetManager 实际上调用了一个内部的 Android 服务来更新小部件，所以你不需要担心它。

我认为小部件的 UI 线程在启动器中，但我不确定。在任何情况下，小部件的代码都不会在那个线程上运行，这就是我们有 RemoteViews 的原因。***

# javascript - Chrome 书签栏中的书签

> ID：10986651
> 
> 赞同：1
> 
> 时间：2012-06-11T19:53:30.737
> 
> 标签：javascript, google-chrome, bookmarklet

我在其他浏览器中开发和使用的小书签在 Chrome 中不起作用。更具体地说，我已将它添加到 Chrome 书签栏，无论我是在书签栏上还是在下拉书签菜单中单击它，它都不会在 Chrome 的默认主屏幕上触发。***然而***，当我在 Chrome 位于任何其他页面时使用它时，它工作得很好。这是经过编辑的书签：

```
javascript:window.location.href="http://part.of."+prompt("Website:")+".the.web.site.com"; 
```

很简单，对吧？然而，为什么这在 Chrome 中不起作用？Safari，即使它位于其热门站点“元页面”上，也会毫无问题地响应此小书签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:56:51.453

根据这篇帖子，看起来这是 Chrome 的一个故意的安全功能：

[http://code.google.com/p/chromium/issues/detail?id=98871#c2](http://code.google.com/p/chromium/issues/detail?id=98871#c2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T21:05:06.367

试试这个，定制它以满足您的需求，它适用于标准的新标签页。

```
javascript:search_terms=prompt('Search terms?');window.location='http://www.google.com/search?q='+search_terms+'site:history.com'; 
```

# c - recv() 链接消息

> ID：10986652
> 
> 赞同：2
> 
> 时间：2012-06-11T19:53:46.993
> 
> 标签：c, sockets, network-programming

我有一段代码：

```
while(1) {
    if(recvfrom(*val, buffer, 1024, MSG_PEEK, NULL, NULL)==-1) {    
        perror("recv");
        exit(1);
    } else printf("recv msgpeek\n");
    if(*(int*)buffer>5) {
        if(recvfrom(*val, buffer, 1024, 0, NULL, NULL)==-1) {   
            perror("recv");
            exit(1);
        } else printf("recv\n");
        if(*(int*)buffer==6) {
                    printf("%d\n", *(int*)(buffer+sizeof(int)+30));
                    printf("%s\n", (char*)buffer+sizeof(int));
                }
   } 
```

这是客户计划的一部分。我正在从服务器向该客户端发送消息，并且我注意到当客户端收到此消息时，它们已连接。我正在使用 SOCK_STREAM 类型的套接字。有人知道如何避免连接消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:13:38.687

如果我理解正确，您正在从 TCP 套接字读取，并期望获得与从另一端“发送”完全相同的字节数。在这里，您的假设是错误的。TCP 套接字是一个*双向流*，即它不保留您通过它发送的应用程序消息的边界。连接一侧的“写入”可能导致另一侧的多个“读取”，反之，可以一起接收多个“写入”。最后一种情况就是您所看到的。跟踪消息边界是您的责任。

相关问题 -[在 TCP 中接收数据](https://stackoverflow.com/questions/1623197/receiving-data-in-tcp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:12:27.693

如果我理解得很好，您的问题是您发送了 2 条示例消息，但您收到了一条，其中包含发送的两条消息的内容。这是由于 TCP 用于提高效率的 Nagle 算法。如果要禁用此算法，请使用该`TCP_NODELAY`选项。

# python - 为什么我的 IronPython 控制台会这样做？

> ID：10986653
> 
> 赞同：0
> 
> 时间：2012-06-11T17:52:39.750
> 
> 标签：python, ironpython

当我想编程时，我会使用 IronPython 控制台，但它会做一些古怪的事情。例如：

```
If a=("X") 
```

它说“意外的令牌'=。' 或这个：

```
If a is ("X"):
    print ("Y")
else:
    print ("Z") 
```

但它应该在那之后结束，它仍然输入“......”。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T18:02:20.380

第一个问题：

```
if a=("X"): 
```

不是有效的 Python 代码。你可能的意思是：

```
if a == ("X"): 
```

对于第二个，REPL（读取-评估-打印循环-外壳）不知道您何时结束一个块，直到它看到一个空行。例如：

```
>>> if a == "X":
...     print "Y"
... else:
...     print "Z"
... 
```

您可能仍想在下一行输入另一条语句。如果你把它留空，REPL 就知道你已经完成了那个块并且想要开始一个新的块。这是 Python 的重要空白的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:26:45.760

它应该是：

```
if x==('x'):
    print('x') 
```

这是因为这`=`是一个任务。`==`是一个比较。

# objective-c - 每次在 Objective-C (Cocoa) 上设置参数时调用一个方法

> ID：10986657
> 
> 赞同：3
> 
> 时间：2012-06-11T19:54:16.837
> 
> 标签：objective-c, xcode, cocoa, xcode4

我目前有一个具有 15 个属性（并且还在增长）的类，我发现每次这些属性中的一个发生更改时，我都必须调用一个更新方法。

目前，我正在用这样的代码覆盖每个 setter：

```
-(void)setParameterName:(NSUInteger)newValue {
  if (_param == newValue)
    return;
  _param = newValue;
  [self redraw];
} 
```

方法**`[self redraw];`**是这里的关键。

有更好的方法吗？我应该使用 keyValue 观察者（方法`observeValue:forKeyPath:ofObject:change:context:`）吗？

笔记：

*   所有属性（到目前为止）都是**`assign`**（主要是`enum`、`NSUInteger`和）`CGFloat`；`BOOL`
*   所有这些属性都是使用绑定（方法`bind:toObject:withKeyPath:options:`）设置的。**除非**从文件系统加载（这并不重要，因为加载完成后我已经在每个对象上调用了绘图方法）；
*   值更改仅适用于当前对象。当其他对象发生变化时，我不需要被告知；
*   我有其他属性，我不需要观察它的变化（因为它对我的输出没有影响并且绘制输出有点费时）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:41:48.173

由于这些属性是使用调用的绑定更新的，因此`-setValue:forKey:`您可以覆盖该方法而不是编写自定义设置器：

```
+ (NSArray *) keysAffectingDrawing {
    static NSArray *singleton;
    if (!singleton)
        singleton = [NSArray arrayWithObjects:
                      @"property1",
                      @"property2",
                      @"property3",
                      nil];
    return singleton;
}

- (void) setValue:(id) value forKey:(NSString *) key {
    [super setValue:value forKey:key];
    if ([[CustomClass keysAffectingDrawing] containsObject:key]) [self redraw];
} 
```

（我首先倾向于推荐键值观察，但同意这不是最好的解决方案。我认为部分原因是只有一个对象，部分原因是设计不遵循 MVC。通常在 MVC 中一个对象draws 本身并不是具有所有属性的那个。）

（**补充：**啊，我明白了。模型负责将属性渲染到位图，这就是`-redraw`它的作用。这很好 MVC。为了更清楚，我建议将方法的名称从更改为`-redraw`类似`-updateImage`or `-renderImage`，因为它实际上并没有做任何绘图。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:37:29.967

您可以使用 [键值观察](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueObserving/Concepts/DependentKeys.html)来避免在所有属性设置器中重复方法调用，但是我认为直接在设置器中调用方法并不是错误的方法，甚至可以更快...

# java - Apache httpclient 不存在。错误

> ID：10986661
> 
> 赞同：5
> 
> 时间：2012-06-11T19:54:44.633
> 
> 标签：java, apache, compilation

嗨，我不断收到错误消息 ![在此处输入图像描述](../Images/a414c1dd4cc69a6038d7ce1455030d8a.png)

```
test.java:15: package org.apache.commons.httpclient does not exist
import org.apache.commons.httpclient.Cookie;
                                ^
test.java:16: package org.apache.commons.httpclient does not exist
import org.apache.commons.httpclient.HttpState;
                                ^
test.java:17: package org.apache.commons.httpclient does not exist
import org.apache.commons.httpclient.HttpClient;
                                ^
test.java:18: package org.apache.commons.httpclient.methods does not exist
import org.apache.commons.httpclient.methods.GetMethod;
                                        ^
test.java:22: cannot find symbol
symbol  : class HttpClient
location: class test
            HttpClient client = new HttpClient();
            ^
test.java:22: cannot find symbol
symbol  : class HttpClient
location: class test
            HttpClient client = new HttpClient();
                                    ^
test.java:26: cannot find symbol
symbol  : class GetMethod
location: class test
            GetMethod method = new GetMethod("https://online.investools.com/authentication/auth.iedu");
            ^
test.java:26: cannot find symbol
symbol  : class GetMethod
location: class test
            GetMethod method = new GetMethod("https://online.investools.com/authentication/auth.iedu");
                                   ^
test.java:29: cannot find symbol
symbol  : class Cookie
location: class test
                              Cookie[] cookies = client.getState().getCookies();
                              ^
test.java:31: cannot find symbol
symbol  : class Cookie
location: class test
                                    Cookie cookie = cookies[i];
                                    ^
10 errors 
```

编译我用

```
javac -cp ;./httpclient-4.2.jar;jsoup-1.6.3.jar test.java 
```

这是代码

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import org.apache.commons.httpclient.Cookie;  
import org.apache.commons.httpclient.HttpState;  
import org.apache.commons.httpclient.HttpClient;  
import org.apache.commons.httpclient.methods.GetMethod; 

public class test{
public static void main (String []args)throws IOException{
    HttpClient client = new HttpClient();  
    client.getParams().setParameter("username", "SomeUSER");  
    client.getParams().setParameter("password", "GF@QT#$WE");  

    GetMethod method = new GetMethod("https://online.investools.com/authentication/auth.iedu");  
        try{  
              client.executeMethod(method);  
              Cookie[] cookies = client.getState().getCookies();  
              for (int i = 0; i < cookies.length; i++) {  
                Cookie cookie = cookies[i];  
                System.err.println(  
                  "Cookie: " + cookie.getName() +  
                  ", Value: " + cookie.getValue() +  
                  ", IsPersistent?: " + cookie.isPersistent() +  
                  ", Expiry Date: " + cookie.getExpiryDate() +  
                  ", Comment: " + cookie.getComment());  
                }  
              client.executeMethod(method);  
        } 
        catch(Exception e) {  
          System.err.println(e);  
        } 
        finally {  
          method.releaseConnection();  
        } 
```

我很困惑，不知道我做错了什么。我认为这很简单，但我检查了几次，它存在并且 jsoup 编译得很好。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T19:59:53.747

`org.apache.http.client`如果您使用的是[HttpClient 4.2](http://hc.apache.org/user-docs.html)（看起来像您），我相信您会想要。该`org.apache.commons.httpclient`软件包适用于[旧版本](http://hc.apache.org/httpclient-3.x/)。

编辑：不是*所有*的课程`httpclient`现在都在`http.client`；有些只是在`http`。此外，还需要进行其他更改 - 例如，`HttpClient`现在是一个接口，因此您不能像那样实例化它。基本上，您已经获得了 3.x 代码，因此您应该将其更新为 4.x 或使用 3.x jar 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-01T13:25:09.733

我从这里找到了我丢失的版本：http: [//mvnrepository.com/artifact/commons-httpclient/commons-httpclient](http://mvnrepository.com/artifact/commons-httpclient/commons-httpclient)

```
dependencies {
    compile 'commons-httpclient:commons-httpclient:3.1'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:06:11.050

使用 jar -xvf httpclient-4.2.java temp

检查 org/apache/commons/httpclient/Cookie 是否存在，如果不存在则错误/损坏的 jar

也尝试 javac -cp .;./httpclient-4.2.jar;jsoup-1.6.3.jar test.java 而不是 javac -cp ;./httpclient-4.2.jar;jsoup-1.6.3.jar test.java

# php - php搜索字符串，然后找到另一个

> ID：10986663
> 
> 赞同：-1
> 
> 时间：2012-06-11T19:54:55.063
> 
> 标签：php, regex, preg-match

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我是 php 的新手，只有几个小时，试图理解搜索和查找。[假设我想在这里](http://www.amazon.com/Best-Sellers-Video-Games-PC-compatible/zgbs/videogames/4924894011/ref=zg_bs_4924894011_pg_1?_encoding=UTF8&pg=1)从亚马逊的畅销榜中提取暗黑破坏神 3 的排名。在那里我可以搜索字符串“暗黑破坏神 III”或类似内容以找到以下块（对不起格式）：

```
 http://www.amazon.com/Diablo-III-Standard-Edition-Pc/dp/B00178630A/ref=zg_bs_4924894011_1
 "><img src="http://ecx.images-amazon.com/images/I/41kXCp%2BUyeL._SL160_SL160_.jpg" alt="Diablo III: Standard Edition" title="Diablo III: Standard Edition" onload="if (typeof      uet == 'function') { uet('af'); }"/></a></div></div><div class="zg_itemRightDiv_normal"><div class="zg_rankLine"><span class="zg_rankNumber">1.</span><span class="zg_rankMeta"></span></div><div class="zg_title"><a  href="

 http://www.amazon.com/Diablo-III-Standard-Edition-Pc/dp/B00178630A/ref=zg_bs_4924894011_1
 ">Diablo III: Standard Edition</a></div><div class="zg_byline">by Blizzard Entertainment 
```

现在，我想尝试提取在这部分中定义的`<span class="zg_rankNumber">1.</span>`当前为 1 的排名。

有人可以就提取该数字的最佳方法提出建议，以便如果它下降到第二、第三或任何地方（直到 20）我仍然能够提取它？

我对 preg_match 和 regex 进行了一些研究，但我不太了解它的用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:01:09.753

```
preg_match_all( '/<span class=\"zg_rankNumber\">(.*?)<\/span>/is',  $string, $matches );
print_r($matches) 
```

编写确切的代码需要几个小时。但我可以告诉你逻辑

1.  从 html 中提取所有“”并将其存储在一个数组中。
2.  循环遍历数组并检查标题。
3.  如果找到标题，则从该数组元素中提取排名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:06:08.480

你可以开始使用[Simple dom html parser](http://simplehtmldom.sourceforge.net/) 所以，如果你想找到这个：

```
<span class="zg_rankNumber"> 
```

你可以这样做：（$str 包含*html*数据）

```
$html = str_get_html($str);
echo $html->find("span[class='zg_rankNumber']",0)->innertext; 
```

**编辑：**

如果您想获得特定等级的游戏**（暗黑破坏神 III）**，则根据格式，您只需调用：

```
echo $html->find("img[title^='Diablo III']",0)->find("span[class='zg_rankNumber']",0)->innertext; 
```

# c++ - 错误：非法将此类型用作表达式。C++

> ID：10986664
> 
> 赞同：0
> 
> 时间：2012-06-11T19:54:56.510
> 
> 标签：c++, inheritance, static

我在类 Node 中创建了一个静态成员函数，并希望使用一些参数调用该函数。如何在我的主函数中调用该函数？

```
class Node;
typedef shared_ptr<Node> SharedNode;

class Node {
    Node* parent;
    vector< SharedNode > children;
    int value;

    //limiting construction
    Node(int a_value):value(a_value),parent(0){}
    Node(const Node &copy); //non-construction-copyable
    Node& operator=(const Node& copy); //non-copyable
public:
    static SharedNode create(int a_value){
        return SharedNode(new Node(a_value));
    }
    SharedNode addChild(SharedNode child){
        child->parent = this;
        children.push_back(child);    // First there is a typo here. (nodes.push_back     is incorrent)
        return child;
    }

int main(){

    SharedNode a1 = Node.create(1);
    SharedNode b1 = Node.create(11);
    SharedNode b2 = Node.create(12);
    SharedNode b3 = Node.create(13);
    SharedNode b21 = Node.create(221);
    a1.get()->addChild(b1);
    a1.get()->addChild(b2);
    a1.get()->addChild(b3);
    b2.get()->addChild(b21);
    b2.get()->getNode(221);

    int hold;
    cin>>hold;
} 
```

它给了我一个错误：非法使用这种类型作为表达式。感谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:57:05.010

静态是使用`::` [运算符](http://en.wikipedia.org/wiki/Scope_resolution_operator#C.2B.2B)访问的，而不是`.`应该这样`Node::Create`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:48:03.313

Static member functions or Static Data members are just one copy for the whole class and no separate copies for each instances.

So static members can be accessed only with class name and `::` operator.

`.` Operator is used with only non static members or instance members.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:56:53.603

利用：

```
Node::create(1) 
```

调用函数

# javascript - 仅在调试中“使用严格”？

> ID：10986675
> 
> 赞同：7
> 
> 时间：2012-06-11T19:55:38.493
> 
> 标签：javascript, minify, use-strict

我想知道是否真的有必要`"use strict"`在我完成编程并将我的 JavaScript 文档发布给任何人查看时包含在内。我喜欢使用它，因为可以检查我是否以一种好的方式编码。

`"use strict"`那么，当我向公众发布我的 JavaScript 文件时，我应该包含还是删除使用？

我问的原因是为了节省我的 JavaScript 文件中的空间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T20:04:57.683

`strict mode`我发现了两种关于在生产中使用的意见：

> 没有理由在您的生产代码中使用“use strict”。没有性能提升（不久前通过 V8 团队和 Brendan 进行了验证），我也不需要用户的虚拟机进行额外的检查。仅保留开发，在构建期间将其剥离。这样，您还可以避免您引用的串联问题。

和：

> 可能没有性能提升，但也没有性能损失。在生产中，甚至比在开发中更重要的是，您希望确保自己注意到错误。最大限度地减少代码的开发和生产版本之间的更改是能够快速有效地调试问题的关键。是的，它在开发过程中有所帮助，但没有理由将其从生产代码中删除。

[来源在底部的评论中](http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/)

当然，那些`12b`重量`"use strict"`不会改变任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:02:27.373

该行`"use strict";`构成文件的 13 个字节。我建议这甚至不太可能接近文件大小的 1%。

如果您担心带宽，请使用众多缩小器之一来减小文件大小，以及服务器端的 gzip 压缩。手动删除 13 个字节是一种错误的经济方式。

究竟哪个 minifier 可能取决于您的代码，但[这里有一些建议](https://www.google.com/search?sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8&q=js%20minifier#sclient=psy-ab&hl=en&q=js%20minify&oq=js%20minify&aq=f&aqi=g2g-s1g1&aql=1&gs_l=serp.3..0l2j0i10j0.6701.7769.0.7897.4.4.0.0.0.0.121.468.0j4.4.0.eish.1.0.0.iZtCK6Tjbjg&pbx=1&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=1c83fcc631ee06da&biw=1920&bih=947)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-19T17:55:07.873

当然它是一个微优化，但如果你将（比如 25 个）JS 模块连接在一起，那么突然就变成了 250 字节。

在高流量应用程序中部署到生产环境，例如每分钟 1000 次点击，如果您的构建删除`'use strict';`了

我敢肯定，这会在 AWS 上节省几美元...

除了不值得花时间之外，我还没有看到一个令人信服的论据来让它继续生产。可能不是，但如果您已经有一个构建系统，并且知道如何以最小的努力完成它，为什么不呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T18:50:50.960

我目前建议您删除任何用于生产的代码中的“use strict”（并仅在调试中使用它）。

但是，我不会仅仅为了使文件更小而将其删除。我删除它的原因是因为它目前似乎对 JavaScript 在执行时的实际性能有负面影响。希望这最终会改变，但现在出于性能原因我会省略它。

# c++ - gdb - 重新设置一个常量

> ID：10986682
> 
> 赞同：4
> 
> 时间：2012-06-11T19:56:18.670
> 
> 标签：c++, c, gdb, constants

我有

```
const int MAX_CONNECTIONS = 500;
//...
if(clients.size() < MAX_CONNECTIONS) {
    //...
} 
```

我正在尝试为 MAX_CONNECTIONS 找到“正确”的选择。所以我启动了 gdb 和`set MAX_CONNECTIONS = 750`. 但似乎我的代码没有响应这个变化。我想知道这是否是因为 const int 在编译时已解决，即使它最终在运行时遇到问题。这听起来对吗，并且，使用 GDB 有什么方法可以绕过这种效果，而无需在我的程序中编辑代码？加热到 500 需要一段时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:04:34.440

我怀疑编译器看到变量是`const`，将常量内联到程序集中，并且没有让生成的代码实际读取`MAX_CONNECTIONS`变量的值。C++ 规范的措辞是，如果显式标记了原始类型的变量`const`，编译器可以出于优化目的对其做出某些假设，因为任何更改该常量的尝试都是（1）非法或（2）导致未定义的行为。

如果你想使用 GDB 来做这样的事情，考虑标记变量`volatile`而不是`const`向编译器指示它不应该优化它。或者，让这些信息由其他数据源（例如，文件中的配置选项）控制，这样您就不会为了更改值而从其下方爆破程序的内存。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:06:51.113

通过告诉它它是`const`，你是在告诉编译器它可以自由地不加载该值，而是在可能的情况下将其直接构建到代码中。当所选的特定指令需要加载值而不是立即值时，分配的副本仍然存在，或者也可以由编译器省略。对于标准语言来说，这有点松散的答案，但这是基本思想。

# visual-studio - 如何将项目包装成单个 .exe？

> ID：10986688
> 
> 赞同：1
> 
> 时间：2012-06-11T18:29:54.737
> 
> 标签：visual-studio, allegro

我在 Visual Studio 中制作了 Allegro 游戏。它非常小。

但是我怎样才能得到一个完成的.exe？当我从项目的调试文件夹中复制 .exe 并尝试运行它时，它基本上说“抱歉 Allegro dll 都丢失了！安装它们并重试”，因为我已将其从其资源中删除。

如何将它捆绑在一起，以便将所需的所有内容打包到 .exe 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:35:09.637

为什么？

1.  如果您想在一个文件中交付应用程序：

    *   [在 Visual Studio 中创建一个 .msi 安装项目](http://support.microsoft.com/kb/307353)（或使用第三方工具），

    *   或者只是将文件（可执行文件和 DLL）压缩到存档中。大多数存档应用程序（如 WinZip 或 WinRar）还允许您创建一个可执行文件，该可执行文件将自行提取，而无需最终用户下载其他应用程序。

2.  如果您出于某种奇怪的原因想要将所有内容都放在一个可执行文件中，那么您可以：

    *   将源代码移动到同一个 Visual Studio 项目中。但你真的不应该，因为它反对代码重用，它会导致与代码组织相关的额外问题，

    *   如果您使用 .NET，请创建一个自定义解决方案，其中将包含内部的程序集（例如在资源中）并在启动时提取它们。这在 .NET 中是可能的，因为仅在需要时才需要程序集，这意味着在某些情况下使用库的应用程序不需要此程序集即可启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:59:14.083

您要求执行的操作称为“静态链接”。[此处](http://wiki.allegro.cc/index.php?title=Static_and_Dynamic_Link)列出了这样做的优点和缺点。对于某些编译器，Allegro.cc 记录了如何在[此页面](http://www.allegro.cc/resource/HelpDocuments/AllegroNewbie)上启用静态链接。

# java - Oracle Driver can't be found in jar on other machines

> ID：10986696
> 
> 赞同：0
> 
> 时间：2012-06-11T19:57:02.213
> 
> 标签：java, oracle, jar

I'm attempting to export a jar file containing the ojdbc14.jar, to allow execution outside of my machine. I can do so successfully with the current export of my jar, but only on my computer, when others try it fails with the error: `java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver` when it attempts to call `Class.forName`

I have seen many similar questions on SO concerning this, but none of the questions seem to have the exact problem, and the solutions aren't working either.

**Class:**

```
InputStream inputStream = JdbcConnection.class.getClassLoader().getResourceAsStream("properties/jdbc.properties");

    try {

        PROPERTIES.load(inputStream); //Load the jdbc properties

        //System.out.println(properties.getProperty("jdbc.driverClassName"));  <-- this prints out the correct output`
        Class.forName(PROPERTIES.getProperty("jdbc.driverClassName")).newInstance(); //Load the oracle driver 
```

**Manifest:** (my ojdbc14.jar is located in lib, but the jar will only work on my local machine if just "ojdbc14.jar" is included, the other jars don't have an issue with the path provided, not sure if that is important)

```
Manifest-Version: 1.0
Main-Class: JdbcConnection
Class-Path:  lib/ojdbc14.jar ojdbc14.jar extrsrcs/kxml2-2.3.0.jar extrsrcs/xstream-1.4.2.jar src/properties/jdbc.properties 
```

**UPDATE:**

[This question](https://stackoverflow.com/questions/10998264/command-line-parameters-with-jarsplice) better explains how I resolved my issue, as it was related to Jar-within-Jars, executable jars, and etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:01:47.137

I didn't think you could include other jars within a jar (that is what your trying to do isn't it?) I suspect it's working on your machine because ojdbc14.jar is on your classpath somewhere (ie. as the standalone file, rather than included in your jar)

Hope this helps Nathan

# c# - 在 MVC-3 中发送群发电子邮件

> ID：10986698
> 
> 赞同：2
> 
> 时间：2012-06-11T19:57:05.493
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我正在构建一个需要从列表中发送大量电子邮件的 MVC3 应用程序。这不是用来发送垃圾邮件的，而是来自医学界的合法志愿者名单。

是否有使用 MVC-3 发送大量电子邮件的示例，包括使用队列系统以免服务器过载？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:09:27.357

发送电子邮件列表不像以前那么容易了。

我建议你使用类似[Socket Labs 的飓风服务器](http://www.socketlabs.com/hms)

每月最多可免费接收 500 封电子邮件

# sql - 如果有不同的方式来完成相同的任务，我该如何选择最好的 SQL 查询？

> ID：10986701
> 
> 赞同：3
> 
> 时间：2012-06-11T19:57:16.643
> 
> 标签：sql, sqlite

我正在学习 SQL（使用 SQLite 3 及其*sqlite3*命令行工具），我注意到我可以通过多种方式做一些事情，有时并不清楚哪一种更好。这里有三个查询，它们做同样的事情，一个通过执行`intersect`，另一个通过`inner join`and `distinct`，最后一个类似于第二个，但它包含过滤 through `where`。（第一个是我正在阅读的书的作者写的，其他是我自己写的。）

问题是，**这些查询中哪个更好，为什么**？而且，更一般地说，***我怎么知道*一个查询何时比另一个更好**？是否有一些我错过的指导方针，或者尽管 SQL 具有声明性，我还是应该学习 SQLite 内部原理？

（在下面的示例中，有一些表描述了某些电视剧中提到的食物名称。Foods_episodes 是多对多链接表，而另一些则描述食物名称和剧集名称以及季节编号。请注意，*历史*前十正在寻找食物（基于他们在*所有系列中出现的次数），而不仅仅是第 3..5 季中的顶级食物）*

```
-- task
--     find the all-time top ten foods that appear in seasons 3 through 5
-- schema
--     CREATE TABLE episodes (
--       id integer primary key,
--       season int,
--       name text );
--     CREATE TABLE foods(
--       id integer primary key,
--       name text );
--     CREATE TABLE foods_episodes(
--       food_id integer,
--       episode_id integer );

select f.* from foods f 
inner join 
    (select food_id, count(food_id) as count 
        from foods_episodes 
        group by food_id 
        order by count(food_id) desc limit 10) top_foods 
    on f.id=top_foods.food_id 
intersect 
select f.* from foods f 
    inner join foods_episodes fe on f.id = fe.food_id 
    inner join episodes e on fe.episode_id = e.id 
where
    e.season between 3 and 5 
order by
    f.name; 

select
    distinct f.*
from
    foods_episodes as fe
    inner join episodes as e on e.id = fe.episode_id
    inner join foods as f on fe.food_id = f.id
    inner join (select food_id from foods_episodes
        group by food_id order by count(*) desc limit 10) as lol
        on lol.food_id = fe.food_id
where
    e.season between 3 and 5
order by 
    f.name;

select
    distinct f.*
from
    foods_episodes as fe
    inner join episodes as e on e.id = fe.episode_id
    inner join foods as f on fe.food_id = f.id
where
    fe.food_id in (select food_id from foods_episodes
        group by food_id order by count(*) desc limit 10)
    and e.season between 3 and 5
order by 
    f.name;

-- output (same for these thee):

-- id          name      
-- ----------  ----------
-- 4           Bear Claws
-- 146         Decaf Capp
-- 153         Hennigen's
-- 55          Kasha     
-- 94          Ketchup   
-- 164         Naya Water
-- 317         Pizza     
-- CPU Time: user 0.000000 sys 0.000000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:59:46.437

与 MySQL 类似，SQLlite 看起来有一个 EXPLAIN 命令。在您的选择前加上 EXPLAIN 关键字，它将返回有关查询的信息，包括扫描的行数和使用的索引。

[http://www.sqlite.org/lang_explain.html](http://www.sqlite.org/lang_explain.html)

通过在各种选择上运行 EXPLAIN，您可以确定哪些查询（和子查询）比其他查询更有效。

这里是 SQLlite 的查询计划器和优化的一般概述：http: [//sqlite.org/optoverview.html](http://sqlite.org/optoverview.html)

SQLlite3 还支持回调函数来跟踪查询。你必须实现它：[http ://www.sqlite.org/c3ref/profile.html](http://www.sqlite.org/c3ref/profile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:42:04.743

通常，解决问题的方法不止一种。如果您得到正确答案，那么唯一的另一个问题是流程/脚本/语句是否需要改进，或者它现在是否运行良好。

一般来说，在 SQL 中，可能有一种“最佳”方式，但通常不是寻找规范的最佳方式来做某事的目标——您需要一种有效平衡程序需求和时间的方式。您可以花几个月的时间优化流程，但如果流程只每周使用一次，现在只需要 5 分钟，那么将其减少到 4 分钟并没有多大帮助。

从一个有正确答案的环境（比如学校）过渡到一个目标是把事情做好，并且工作得足够好胜过完美的环境是很奇怪的，因为有时间限制。我花了一段时间才意识到这一点，但我不确定是否有更好的答案。希望观点有所帮助！

# hibernate - Zookeeper 是否适合对象缓存？

> ID：10986702
> 
> 赞同：12
> 
> 时间：2012-06-11T19:57:22.733
> 
> 标签：hibernate, caching, cloud, distributed, apache-zookeeper

开发一个着眼于可扩展性的云系统意味着系统沿着功能边界（usermgmt、ordermgmt、customermgt 等）组合成基于 REST 的服务，每个服务都有自己的底层数据库，并且根据负载，我们可能会启动多个比如说 ordermgmt 服务的实例。当 ordermgmt 服务处理添加订单的请求（代表“客户”）时，它将对 customermgmt 服务进行 REST 调用以验证客户等...

由于客户实体不会经常更改，我想知道 ZooKeeper 之类的东西是否适合缓存特定客户的实例，customermgmt 服务的多个实例可能会在访问数据库之前对其进行询问。我查看了 Zookeeper 使用的各种列表，但没有看到有人将它用于对象缓存。似乎推荐的 znode 字节大小约为 1K，因此不适合存储脱水对象。也没有开箱即用的 GC 或 LRU 支持，所以我也需要添加它。

如果不是 Zookeeper，还有更合适的建议吗？我们使用 Hibernate 作为 ORM，但我们没有很多经验，虽然它支持 1 级和 2 级缓存，但我不确定它们是否以分布式/复制方式跨多个服务实例工作.

谢谢斯科特

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T02:37:29.563

Zookeeper 不太适合对象缓存。

Zookeeper 将整个数据库保存在 Java 堆的内存中。一旦 java 堆超过一个 Gigabyte 左右，您将开始遇到 gc 暂停问题。这对 zookeeper 来说尤其麻烦，因为 zookeeper 节点不断地相互发送心跳，如果在节点忙于 gc'ing 时错过了足​​够的心跳，就会触发领导者选举，从而使集群暂时停机。

使用 zookeeper 作为缓存的另一个问题是，zookeeper 集群中的所有节点都将拥有相同的数据，而缓存通常不需要这些数据。

有了这些限制，您的 3 台服务器，每台都有 8 gig 的 ram，设法为大约 1 Gig 的总工作集提供服务。最好使用 memcache 或 Sebastien 列出的其他缓存系统之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T21:24:33.350

实际上，您可以设置许多不同的技术，无论是否分布式，作为 Hibernate 的 L2 缓存。

*   缓存
*   内存缓存
*   缓存
*   榛树
*   英菲尼斯潘
*   红陶
*   千兆空间 XAP
*   宝石火
*   连贯性

最后一个，称为数据网格，通常不是免费的，我认为你不需要一个完整的数据网格只是为了一个 l2 缓存。

我从未使用过它，但我不认为 Zookeeper 被用作分布式缓存。

# jquery - NodeJS + JSON + jQuery：将 JSON 对象从 Node-backend 发送到 jQuery-frontend

> ID：10986707
> 
> 赞同：0
> 
> 时间：2012-06-11T19:57:34.483
> 
> 标签：jquery, json, node.js, post, ejs

我正在尝试使用 ejs 模板引擎将 JSON 对象形式的 MongoDB 发送到页面。这是我的数据库（一个 JSON 对象）的响应：

```
"suppliers": [
    {
        "lastname": "lastname1",
        "firstname": "firstname1",
        "middlename": "middlename1",
        "mobtel": "mobtel1",
        "worktel": "worktel1",
        "email": "email1"
    },
    {
        "lastname": "lastname2",
        "firstname": "firstname2",
        "middlename": "middlename2",
        "mobtel": "mobtel2",
        "worktel": "worktel2",
        "email": "email2"
    }
] 
```

当我从数据库中获取 i 作为对象时，我必须将其字符串化为 str 以作为 EJS 模板引擎的 var 发送：

```
var myJSONText = JSON.stringify(doc.suppliers);
profile["suppliers"] =myJSONText;
...
res.render('profile.ejs',{profile:profile}); 
```

在前端，我得到一个带有 json-data 的纯字符串。我通过 jQuery 将它解析为一个对象：

```
var jsonObject = jQuery.parseJSON('<%= profile.suppliers %>');
for (var i=0; i<jsonObject.length; i++){
    //trying to show field 'name' for every supplier
    alert(jsonObject[i]['lastname']);
} 
```

...它不起作用，但应该提醒我两次。我试图检查一个纯文本 JSON 字符串，进入前端，并发现了这样的符号：

```
[{&quot;lastname&quot;: &quot; ... 
```

似乎`jQuery.parseJSON`无法从此类字符串创建有效对象。我做错了什么？谢谢！

**更新：嗯，我已经把我的代码变成了：**

节点代码：

```
profile["suppliers"] =doc.suppliers;
res.render('profile.ejs', { profile:profile }); 
```

jQuery代码：

```
for (var i=0; i<'<%= profile.suppliers %>'.length; i++){
//trying to show field 'name' for every supplier
alert('<%= profile.suppliers %>'[i]['lastname']);
} 
```

它给了我永无止境的未定义警报循环。

**更新2：我更新了我的源代码，所以：**

节点JS：

```
var myJSONText = JSON.stringify(doc.suppliers);
profile["suppliers"] =myJSONText;
res.render('profile.ejs',{profile:profile}); 
```

客户：

```
var jsonObject = <%- profile.suppliers %>;
$.each(jsonObject, function(item) {
    alert(item.lastname);
}); 
```

生成的源代码：

```
var jsonObject = [{"lastname":"lastname1","firstname":"firstname1","middlename":"middlename1","mobtel":"mobtel1","worktel":"worktel1","email":"email1"},{"lastname":"lastname2","firstname":"firstname2","middlename":"middlename2","mobtel":"mobtel2","worktel":"worktel2","email":"email2"}]; 
```

似乎没问题，但仍然给我未定义的警报。但是，它只发出**两次**警报，这意味着它正确解析了 JSON 并且无法访问 lastname 属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T20:21:49.337

正如您正确诊断的那样，`&quot;`s 被插入到您的 JSON 中。这使其无效，从而阻止它被解码。

这是因为在[ejs](https://github.com/visionmedia/ejs/blob/master/Readme.md)中，`<%= ... %>`html 输出是否转义，因此`&quot;`. 你需要使用`<%- profile.suppliers %>`来避免这种情况。

无需`JSON.parse`在客户端使用：JSON 已经是有效的 javascript 代码，因此可以直接插入代码中，而不是存储为字符串文字。

```
var jsonObject = <%- profile.suppliers %>;
$.each(jsonObject, function() {
    alert(this.lastname);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:17:39.877

正如 Wes 所逃避的那样，我认为您正在做不必要的字符串化/解析。

试试这个：

```
var suppliers = // your JSON source

$(suppliers).each(function() {
   alert(this.lastname);
}); 
```

# delphi - 如何使用手势识别缩放方向（进/出）并应用缩放效果？

> ID：10986710
> 
> 赞同：4
> 
> 时间：2012-06-11T19:57:47.460
> 
> 标签：delphi, winapi, windows-7, delphi-xe2, gesture

使用 Delphi XE 2，我试图确定缩放方向以将缩放效果应用于图像 (TImage)，但没有找到执行此操作的函数，并且 Image 的 OnGesture 事件中的 EventInfo 属性没有此信息。

我见过很多使用 Direct2d 进行放大和缩小的示例，但它使用 wp_touch 消息直接来执行此操作，并且缩放效果是使用来自直接 2d 的变换矩阵缩放函数执行的，但我不想在这个项目中使用 direct2d因为它只会有这种基于触摸的放大和缩小效果，其他的就是简单的点击。

可以识别存储第一个方向的输入/输出并与当前方向进行比较，因为 EventInfo 参数具有属性 Direction 但我认为这不是很好的方法还是我错了？

那么在那之后是否有任何关于如何在 TImage 中执行缩放效果的建议或示例？我已经这样做了，但是在缩放以提供每个应用程序都具有的捏合效果时它不会平移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:26:13.887

在阅读了大量文档后，我发现正确的做法是：

拦截 EventInfo.GestureID 以识别在我的情况下所需的命令缩放命令，之后您应该阅读 EventInfo.Flags 并确定它是否是 gfBegin 以便您可以缓存第一个位置点 (x,y) 和第一个距离，当标志不同时，gfBegin 使用 firstpoint 和 currentpoint (EventInfo.Location) 执行计算

基本命令应该是这样的：

```
 case EventInfo.GestureID of
  igiZoom:
   begin
     if (EventInfo.Flags = [gfBegin]) then
      begin
        FLastDistance := EventInfo.Distance;
        FFirstPoint.X := EventInfo.Location.X;
        FFirstPoint.Y := EventInfo.Location.Y;
        FFirstPoint := ScreenToClient(FFirstPoint);

        if (FSecondPoint.X = 0) and (FSecondPoint.Y = 0) then
         begin
          FSecondPoint.X := EventInfo.Location.X + 10;
          FSecondPoint.Y := EventInfo.Location.Y + 10;
          FSecondPoint := ScreenToClient(FSecondPoint);
         end;
        //ZoomCenter is a local TPoint var 
        ZoomCenter.Create(((FFirstPoint.X + FSecondPoint.X) div 2),
                          ((FFirstPoint.Y + FSecondPoint.Y) div 2));
        //Apply the zoom to the object  
        FDrawingObject.Zoom(EventInfo.Distance / FLastDistance, ZoomCenter.X, ZoomCenter.Y);

        Invalidate;
      end
       else
         begin
            FSecondPoint.X := EventInfo.Location.X;
            FSecondPoint.Y := EventInfo.Location.Y;
            FSecondPoint := ScreenToClient(FSecondPoint);

            ZoomCenter.Create(((FFirstPoint.X + FSecondPoint.X) div 2),
                              ((FFirstPoint.Y + FSecondPoint.Y) div 2));

            FDrawingObject.Zoom(EventInfo.Distance / FLastDistance, ZoomCenter.X, ZoomCenter.Y);

            Invalidate;
            //Update with the new values for next interaction
            FFirstPoint := FSecondPoint;
            FLastDistance := EventInfo.Distance;
         end; 
```

Windows v7.0 SDK 中有一个用 c# 编写的示例代码，可以作为参考，对我有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T14:38:34.877

对于最近的 Delphi 版本，EventInfo 有一个 Distance 属性。我们不必计算它。

对于像缩放这样的交互式手势，请查看 docwiki 中的示例代码： [http://docwiki.embarcadero.com/CodeExamples/Tokyo/en/FMXInteractiveGestures_(Delphi)](http://docwiki.embarcadero.com/CodeExamples/Tokyo/en/FMXInteractiveGestures_(Delphi))

```
 procedure TForm36.handleZoom(EventInfo: TGestureEventInfo);
var
  LObj: IControl;
  image: TImage;
begin
  LObj := Self.ObjectAtPoint(ClientToScreen(EventInfo.Location));
  if LObj is TImage then
  begin
    if not(TInteractiveGestureFlag.gfBegin in EventInfo.Flags) then
    begin
      image := TImage(LObj.GetObject);
      image.Width := image.Width + (EventInfo.Distance - FLastDIstance)/2;
      image.Height := image.Height + (EventInfo.Distance - FLastDIstance)/2;
      image.Position.X := image.Position.X - (EventInfo.Distance - FLastDIstance)/2;
      image.Position.Y := image.Position.Y - (EventInfo.Distance - FLastDIstance)/2;
    end;
  end;
  FLastDIstance := EventInfo.Distance;
end; 
```

# image-processing - 立体匹配基线评估

> ID：10986713
> 
> 赞同：1
> 
> 时间：2012-06-11T19:58:05.963
> 
> 标签：image-processing, computer-vision

**立体匹配问题**包括获得左右图像之间的对应关系。我想在基线和**动态编程**方法之间进行评估。但是，我还没有基线。我想知道我应该使用哪种方法。我正在考虑尝试一种蛮力算法。文学里有这样的东西吗？

你建议什么作为基线方法？我想要一个简单的解决方案，没有启发式和优化的东西，例如这种蛮力策略。但是，我没有研究它的材料，只有使用 Graph Cut、动态规划*等的方法。*

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:08:13.773

米德尔伯里大学 参考数据集和算法数据库是当今每个人用于评估的标准。

[http://vision.middlebury.edu/stereo/](http://vision.middlebury.edu/stereo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T02:14:38.147

在深入研究图形切割之前，您应该先了解一下基础知识。请参阅此处的相关章节，它可能会有所帮助[http://szeliski.org/Book/](http://szeliski.org/Book/)

# c - C 指针/数组语法

> ID：10986714
> 
> 赞同：1
> 
> 时间：2012-06-11T19:58:06.700
> 
> 标签：c, arrays, pointers, syntax

我知道以下两件事在c中是相同的（因为偏移量和数组）

```
someArray[i]     //ith element of someArray
*(someArray + i) //ith element of someArray 
```

但是对于结构，相同的语法似乎并不能很好地支持......

```
someStruct[i]->*(someArray + j)   //compiler error
*(someStruct + i)->someArray[j]   //Also compiler error 
```

无论如何使用指针/偏移符号（第二个）来表示结构的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T20:00:15.950

假设`someStruct`是一个结构数组，并且`someArray`是数组类型的结构成员，那么其中任何一个都是有效的：

```
*(someStruct[i].someArray + j) 
```

或者

```
(*(someStruct + i)).someArray[j] 
```

参见例如[http://ideone.com/UtLN2](http://ideone.com/UtLN2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:02:12.113

除其他外，`->`当您可能应该使用成员引用运算符时，您正在使用指针解析运算符`.`

假设 someStruct[] 是一个结构数组（不是指针）：

```
*(someStruct[i].someArray + j)
(*(someStruct + i)).someArray[j] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:10:34.583

据我了解，我想您想通过一些指针/偏移算法来表示结构的*字段*。

有一个标准宏，`offsetof(type, field)`其中产生结构或联合类型内`stddef.h`字段的偏移量。`field``type`

例如，假设`s`是 类型`struct s*`，并且`f`是 中的一个字段`struct s`。然后`*(s + offsetof(struct s, f))`是一样的`s->f`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T09:28:07.943

这应该工作

`*(someStruct[i]->someArray + j)`

`(*(someStruct + i))->someArray[j]`

# ruby-on-rails - 用 minitest 测试 Rails 控制器方法

> ID：10986716
> 
> 赞同：1
> 
> 时间：2012-06-11T19:58:26.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, minitest

使用 minitest，测试这个 build_plan 方法的最佳方法是什么？

我目前的尝试是尝试验证 @account.plan 是否已设置，但我不太清楚如何做到这一点。这是我应该尝试做的，还是别的什么？

account_controller.rb

```
class AccountsController < ApplicationController

  before_filter :build_plan, :only => [:new, :create]

  def build_plan
    redirect_to '/app/signup' and return unless @plan = SubscriptionPlan.find_by_name(params[:plan])
    @plan.discount  = @discount
    @account.plan   = @plan
  end
end 
```

account_integration_test.rb

```
require 'minitest_helper'

describe "Account integration" do

  before do
    @account = Factory.build(:account)
  end

  def fill_in_info
    fill_in 'First name', :with => @account.admin.first
    fill_in 'Last name', :with => @account.admin.last
    fill_in 'Email', :with => @account.admin.email
  end

  describe "register" do
    it "should set plan" do
      visit signup_path(:plan => "small_group")
      fill_in_info
      click_button 'Create Account'
      @account.plan.must_be_kind_of SubscriptionPlan #this doesn't work -- @account.plan is nil
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:57:35.153

对于验收测试，请确保您在“minitest_helper”中包含正确的（可能是 Capybara）DSL，例如

```
class MiniTest::Spec

  include Capybara::DSL
  ...
end 
```

值得阅读其他一些 StackOverflow 帖子以获得正确的帮助设置。这个有[没有人在 Rails 功能测试中使用过 Minitest::Spec？](https://stackoverflow.com/questions/4044461/has-anyone-used-minitestspec-withing-a-rails-functional-test)对我有帮助。

这是我的功能测试测试助手的要点（我还没有像上面那样添加 Capybara 模块）[https://gist.github.com/2990759](https://gist.github.com/2990759)

# android - 确定LTE是否开启？

> ID：10986718
> 
> 赞同：7
> 
> 时间：2012-06-11T19:58:50.993
> 
> 标签：android, 3g, lte, 4g, cdma

我正在尝试编写一个小部件，这样我就可以在我的 Verizon Galaxy Nexus 上启用/禁用 LTE，而无需深入设置菜单来执行此操作。但是，我还没有弄清楚如何确定 LTE 是否真的打开了。我可以确定我的手机当前是否有 LTE 信号或 EVDO 信号，但不能确定手机有 EVDO 信号时是否启用了 LTE。

有没有人对在 Android 开发者参考中查找的位置有一些建议？我已经尝试过 TelephonyManager 和 ConnectivityManager，但到目前为止它们都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:04:56.607

你试过这个吗？

```
TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService( Context.TELEPHONY_SERVICE );
boolean isLTEConnected = telephonyManager.getNetworkType() == TelephonyManager.NETWORK_TYPE_LTE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:05:31.367

请参阅此链接： http: [//developer.android.com/reference/android/telephony/TelephonyManager.html](http://developer.android.com/reference/android/telephony/TelephonyManager.html)，在此您可以找到一个示例：http: [//developer.android.com/training/efficient-downloads/connectivity_patterns。 html](http://developer.android.com/training/efficient-downloads/connectivity_patterns.html)

您必须使用以下功能：`TelephonyManager.getNetworkType()`

# linux - 如何以编程方式检查连接？

> ID：10986719
> 
> 赞同：2
> 
> 时间：2012-06-11T19:59:12.020
> 
> 标签：linux, networking, ubuntu, scripting

在 Linux (Ubuntu) 中，我想以编程方式检查是否有 Internet 连接（或者是否连接了 eth0）。

我这样做是因为我正在编写一个程序，该程序需要在一个很容易失去连接的系统上进行网络连接。

所以我在想也许我可以定期运行一个脚本来检查。

你能给我好的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T20:05:29.477

这是一个可以完成您想要的快速脚本：

```
EMAIL=youremail@something.com
ping -c 5 8.8.8.8 >> /dev/null

if [ $? -eq  0 ]
    then
    echo "Able to reach internet!" | mail $EMAIL
else
    echo "Unable to reach internet!" | mail $EMAIL
fi 
```

显然，您可以根据您的目标将邮件更改为其他要执行的操作 编辑：解释一下，这会 ping googles dns 服务器以确保您已连接并以一种或另一种方式向您发送电子邮件。当然，只有当您的网络上有本地电子邮件服务器时，失败的电子邮件部分才会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:02:24.487

`/sbin/ifconfig`将是一个极好的脚本“获取适配器状态”命令。

`cron`将是执行脚本的绝佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:02:13.083

我还建议`ping`或者可能是`wget`某个远程服务器（最好是您要连接的服务器）。该网络可以在本地校园中很好地工作，但在洲际连接上效果不佳（例如，因为一些电缆已被切断）。

# javascript - Javascript - 无法获取函数来设置要在函数外部使用的全局变量

> ID：10986721
> 
> 赞同：0
> 
> 时间：2012-06-11T19:59:35.213
> 
> 标签：javascript, global-variables

我正在尝试制作一个简单的线性文本游戏，该游戏将显示在网页的 div 内。我正在使用 innerHTML 将游戏的内容写入 div，并使用按钮中的 onclick 来更改内容。我的问题是我还想包含一些用户提交的变量，我试图在函数中使用 prompt() 来实现。

问题是，我无法让变量全局设置。它在函数内部调用时起作用，但在其他任何地方都不起作用。

我尝试使用 window.variable （在函数内部和外部）首先在函数外部声明变量，并在函数内部保留`var`变量之前的变量以使其在范围内成​​为全局变量。

我一直在寻找解决方案，但似乎没有任何效果！我的脚本顺序是否遗漏了什么？

这是javascript：

```
var cb2 = '<input id="button" type="button" value="Continue" onclick="replace(\'gamebox\',next3,\'continueBttn\',cb3);">';
var cb3 = '<input id="button" type="button" value="Continue" onclick="getName();">';
var cb4 = '<input id="button" type="button" value="Continue" onclick="replace(\'gamebox\',next5,\'continueBttn\',cb5);">';
var cb5 = '<input id="button" type="button" value="Continue" onclick="replace(\'gamebox\',next6,\'continueBttn\',cb6);">';

var testName = "Test Name";
var player1;

var next2 = "<p>Great, you've certainly got an adventurer's spirit! Now I just need a few details about you and your party.</p>";
var next3 = "<p>First, I'd like to get everyone's name</p>"
var next4 = "<p>Thanks " + testName + "!</p>"
var next5 = "<p>Now you're ready " + player1 + "! Click to set out on the trail!</p>"

var continueButton = function (content) {
    document.getElementById('continueBttn').innerHTML = content;
    };

function replace(id1,content,id2,cb) {
    document.getElementById(id1).innerHTML = content;
    document.getElementById(id2).innerHTML = cb;
}

function getName() {
    player1 = prompt("What is your Name?");
    alert("Your name is " + player1 + ".");
    replace('gamebox',next4,'continueBttn',cb4);
} 
```

这是html：

```
<!DOCTYPE html>

<html>
    <head>

    <link rel="stylesheet" type="text/css" href="oregon.css" />

    </head>

    <body>

        <div id="gameContainer">

            <div id="gamebox">

            <p>Welcome to the Oregon Trail! Click Continue to travel the trail!</p>

            </div>

        </div>

    <div id="continueBttn"><input id="button" type="button" value="Continue" onclick="replace('gamebox',next2,'continueBttn',cb2);"></div>

    </body>

    </html>

    <script src="oregon.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:41:56.700

好的，我让你的东西工作了。取消变量以`var`使其成为全局变量，并将您的函数更改为分配给如下变量`continueButton`：

```
replace = function(id1, content, id2, cb) {
    document.getElementById(id1).innerHTML = content;
    document.getElementById(id2).innerHTML = cb;
}

getName = function() {
    player1 = prompt("What is your Name?");
    alert("Your name is " + player1 + ".");
    replace('gamebox', next4, 'continueBttn', cb4);
} 
```

这让事情对我有用。

这里的其他答案也有好处，您需要一种更好的方式来处理玩家姓名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:05:47.260

`player1`用于表达式`next5`，而不是`next4`（这是您的`getName()`功能之一）

无论如何，它永远不会像这样工作。在初始化的那一刻`next5`， 的值`player1`以某种方式定义，除非您`next5`再次重新定义变量，否则将保持这种方式定义。

您需要将`next5`定义封装到一个函数中以使其动态化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:06:11.300

问题就在这里

```
var next5 = "<p>Now you're ready " + player1 + "! Click to set out on the trail!</p>" 
```

`player1`它在第一次渲染时使用该变量，当您设置为新值时它不会更新。

你需要想出一种不同的方法来设置玩家的名字。一种方法是更换它。

```
var next5 = "<p>Now you're ready {player1}! Click to set out on the trail!</p>" 
```

当你使用它时

```
var newStr = next5.replace("{player1}", player1); 
```

# php - DoAuthorzie 在 PayPal 中没有签名？

> ID：10986751
> 
> 赞同：0
> 
> 时间：2012-06-11T20:02:16.543
> 
> 标签：php, paypal

我正在为我们的客户实施一个贝宝 API（快速结帐），以便能够在被收费（授权和捕获）之前相互支付并获得授权，但我们不希望他们必须从贝宝获得签名。这可能吗？

提前致谢

# c++ - 由于 istream 中的杂散 \n 而导致 get () 的结果不正确，但不是 scanf() 或 cin？

> ID：10986752
> 
> 赞同：0
> 
> 时间：2012-06-11T20:02:17.457
> 
> 标签：c++, c, scanf, cin, gets

在下面打印的程序中，gets() 的问题是它仅第一次获取数据，并且每次后续调用都会导致 null，因为输入数字时 istream 中的杂散 \n 留下了。

```
main()
{
    char name[20];
    int number;
    for(int i=0;i<5;i++)
    {
        printf("enter name");
        gets(s);
        printf("enter phone number");
        cin>>a;
    }
} 
```

现在我的问题是，为什么当我使用`scanf()`or时发生的情况不一样`cin`？我的意思是 cin 和 gets() 获取它们的值的方式有什么区别，这使得 cin （和 scanf ）能够成功地离开那个流浪`\n`但不是`gets()`？

PS：我知道 fgets()，gets() 已被弃用及其不良影响，通常也不使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:06:54.030

您正在混合面向行的输入和面向场的输入。`gets()`,等函数`fgets()`读取*行*。他们不一定关心行的内容，但他们会阅读整行（假设在某些情况下有空间）。

`cin`像'`>>`运算符这样的面向字段的输入`scanf()`不关心行，他们关心字段。像这样的电话`scanf("%d %d %d", &x, &y, &z);`不在乎它们是在同一行还是在 3 个单独的行上（或者即使您留下空白行）。

这些面向字段的输入函数往往会留下会混淆面向行的输入函数的换行符。一般来说，您应该避免将两者混合使用，如果您想两者兼而有之，阅读该行然后使用`sscanf()`或`stringstream`从中进行基于字段的输入通常很有用。这也使得从错误输入中恢复更容易，您不必担心是否有额外的`'\n'`字符等待您的下一个输入函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:40:57.153

`scanf`并且`cin >>`都读取由空格分隔的字段，并忽略前导空格。现在 whitepsace 是空格、制表符和换行符，因此输入中的额外换行符不会打扰它们。更重要的是，在阅读完某些内容后，他们不会阅读以下任何空白，而是将其留在输入中以供下一次读取。

现在`scanf`，您可以通过在格式字符串末尾使用空格来明确告诉它尽可能多地读取（并丢弃）空格，但这对于交互式输入效果不佳，因为它会一直尝试读取直到它得到一些非白色空间。因此，如果您将循环的结尾更改为：

```
printf("enter phone number");
scanf("%d ", &a); 
```

输入电话号码后它似乎会挂起，因为它在等待您输入一些非空格，最终将被下一个循环迭代读取为下一个名称。

你可以使用 scanf 做你想做的事——阅读和使用电话号码后面的文本直到换行——但它并不漂亮：

```
scanf("%d%*[^\n]", &a); scanf("%*1[\n]"); 
```

您实际上需要两次 scanf 调用来使用换行符以及可能在行上的任何空间或其他杂物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:11:04.620

`gets()`与 不同`fgets()`，应该用空字符**替换**终止换行符。
这是来自`gets()`手册页：

> get() 函数应从标准输入流 stdin 中读取字节到 s 指向的数组中，直到读取到 a 或遇到文件结束条件。任何一个都应该被丢弃，并且在读入数组的最后一个字节之后立即放置一个空字节。”

虽然`fgets()`将通过换行符不变：

> fgets() 函数应从流中读取字节到 s 指向的数组中，直到读取 n-1 个字节，或者读取 a 并将其传输到 s，或者遇到文件结束条件。然后字符串以空字节终止。

因此，您的实施似乎不符合标准……我的工作如前所述。

# spotify - 是否有关于 libspotify 使用的设置文件的任何文档？

> ID：10986756
> 
> 赞同：0
> 
> 时间：2012-06-11T20:02:25.123
> 
> 标签：spotify

Libspotify 将设置存储在一个名为 settings 的文件中。现在，它似乎丢弃了 Spotify 客户端本身未使用的任何内容，例如 "g_sett_high_bitrate":1 保留在 sp_session_logout 中，而 "bitrate":2 则从文件中删除。

这些设置是否有任何文档？还是我只需要制作自己的单独设置文件（似乎有点傻）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:15:42.093

设置和缓存文件夹中的所有内容均归 libSpotify 所有，并且可能随时被删除或更改。对于您自己的应用程序设置，请使用单独的文件。

# c++ - 具有跨多个 DLL/DSO 的静态成员的模板类

> ID：10986757
> 
> 赞同：1
> 
> 时间：2012-06-11T20:02:26.407
> 
> 标签：c++, templates, dll, static, shared-libraries

关于包含静态成员变量的 C++ 模板类以及从动态库或共享对象中导出它们的问题有很多。但是这个更深一点：如果有多个共享对象，每个共享对象都有自己的一组实例化但可能使用来自另一个共享对象的实例化，该怎么办？

考虑以下示例代码：

```
/* file: common.h */

#include <stdio.h>
#define PRINT fprintf (stderr, "(template %d) %d -> %d\n", parameter, data, new_data)

template <int parameter>
class SharedClass
{
    static int data;
public:
    static void Set(int new_data) { PRINT; data = new_data; }
};

template <int parameter>
int SharedClass<parameter>::data = parameter;

/* file: library1.h */

extern template class SharedClass<1>;
void Library1Function();

/* file: library1.cpp */

#include "common.h"
#include "library1.h"
#include "library2.h"

template class SharedClass<1>;

void Library1Function()
{
    SharedClass<1>::Set (100);
    SharedClass<2>::Set (200);
}

/* file: library2.h */

extern template class SharedClass<2>;
void Library2Function();

/* file: library2.cpp */

#include "common.h"
#include "library1.h"
#include "library2.h"

template class SharedClass<2>;

void Library2Function()
{
    SharedClass<1>::Set (1000);
    SharedClass<2>::Set (2000);
}

/* file: main.cpp */

#include "common.h"
#include "library1.h"
#include "library2.h"

int main()
{
    Library1Function();
    Library2Function();
    SharedClass<1>::Set (-1);
    SharedClass<2>::Set (-2);
} 
```

然后假设我们使用 GCC 构建了两个库和一个应用程序：

```
$ g++ -fPIC -fvisibility=default -shared library1.cpp -o lib1.so
$ g++ -fPIC -fvisibility=default -shared library2.cpp -o lib2.so
$ g++ -fvisibility=default main.cpp -o main -Wl,-rpath=. -L. -l1 -l2 
```

然后运行可执行文件，我们将得到以下结果：

```
$ ./main
(template 1) 1 -> 100
(template 2) 2 -> 200
(template 1) 100 -> 1000
(template 2) 200 -> 2000
(template 1) 1000 -> -1
(template 2) 2000 -> -2 
```

这意味着库和可执行文件都访问相同的每个模板静态存储。
如果我们在二进制文件上运行“nm -C”，我们会看到每个静态成员只定义一次并且在相应的库中：

```
$ nm -C -A *.so main | grep ::data
lib1.so:0000000000001c30 u SharedClass<1>::data
lib2.so:0000000000001c30 u SharedClass<2>::data 
```

但我有一些问题。

1.  为什么，如果我们`extern template class ...`从两个头文件中删除，我们会看到静态成员存在于每个二进制文件中，但测试应用程序将继续正常工作？

    ```
    $ nm -C -A *.so main | grep ::data
    lib1.so:0000000000001c90 u SharedClass<1>::data
    lib1.so:0000000000001c94 u SharedClass<2>::data
    lib2.so:0000000000001c94 u SharedClass<1>::data
    lib2.so:0000000000001c90 u SharedClass<2>::data
    main:0000000000401e48 u SharedClass<1>::data
    main:0000000000401e4c u SharedClass<2>::data 
    ```

2.  是否可以在 MSVC 下构建它？
    或者，更具体地说，如何处理`__declspec(dllexport)`和`__declspec(dllimport)`使一些实例化导出，而一些实例化 - 导入？

3.  最后：这是未定义行为的一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:14:59.377

回答第 1 点：当动态链接器解析符号时，它使用一个模块列表来链接。首先检查加载的第一个模块，然后检查第二个，以此类推。

IIRC，当该`data`成员在 main、lib1.so 和 lib2.so 中使用时，即使该成员在同一模块中声明，它仍被视为动态符号引用。因此，当您运行程序时，当链接器解析符号时，所有三个模块最终都会使用三个模块`data`之一中的成员实现：以先加载者为准。其他两对仍然加载到内存中，但未使用。

（尝试`std::cout << &(SharedClass<n>::data) << std::endl`所有三个模块；所有六个案例的打印地址应该相同。）

要回答第 3 点，我认为这种行为根本没有定义。究竟会发生什么取决于您系统的动态链接器，但我不知道有任何链接器不会以完全相同的方式处理这种情况。

我不能说第 2 点，因为我对 MSVC 没有很多经验。

# eclipse - 由于 servlet，Tomcat 服务器不会在 Eclipse 中启动

> ID：10986761
> 
> 赞同：6
> 
> 时间：2012-06-11T20:02:34.713
> 
> 标签：eclipse, tomcat, servlets, smooks, lifecycleexception

我正在编写一个使用 smooks 将 XML 文件解析为 java 对象的程序。我被要求将其作为 servlet 运行。该应用程序（在转换为 servlet 之前）工作得很好，但是每次我尝试运行它时，tomcat 服务器都会崩溃。现在我运行了一个没有问题的示例 servlet。

这是启动时的控制台：

```
Jun 11, 2012 3:46:59 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;"C:\Program Files (x86)\Common Files\EMC";C:\PROGRA~2\COMMON~1\EMC;.
Jun 11, 2012 3:46:59 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Serverlet' did not find a matching property.
Jun 11, 2012 3:46:59 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jun 11, 2012 3:46:59 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jun 11, 2012 3:46:59 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 966 ms
Jun 11, 2012 3:46:59 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jun 11, 2012 3:46:59 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Jun 11, 2012 3:47:00 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [156] milliseconds.
Jun 11, 2012 3:47:01 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Serverlet]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Serverlet]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 60
    at org.apache.tomcat.util.bcel.classfile.Constant.readConstant(Constant.java:131)
    at org.apache.tomcat.util.bcel.classfile.ConstantPool.<init>(ConstantPool.java:60)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.readConstantPool(ClassParser.java:209)
    at org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:119)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2032)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1923)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1891)
    at org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1877)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1270)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Jun 11, 2012 3:47:01 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Jun 11, 2012 3:47:01 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more 
```

有什么想法吗？

* * *

我重写了程序无济于事，但是您之前谈论的错误（“常量池中的无效字节标记”）消失了。这次，我的 WEB_INF/lib 文件夹中没有任何内容。

```
Jun 12, 2012 11:30:30 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;"C:\Program Files (x86)\Common Files\EMC";C:\PROGRA~2\COMMON~1\EMC;.
Jun 12, 2012 11:30:31 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:SecondTry' did not find a matching property.
Jun 12, 2012 11:30:31 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jun 12, 2012 11:30:31 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jun 12, 2012 11:30:31 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1265 ms
Jun 12, 2012 11:30:31 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jun 12, 2012 11:30:31 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Jun 12, 2012 11:30:32 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/SecondTry]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/SecondTry]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: org/milyn/SmooksException
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getDeclaredMethods(Unknown Source)
    at org.apache.catalina.startup.WebAnnotationSet.getDeclaredMethods(WebAnnotationSet.java:470)
    at org.apache.catalina.startup.WebAnnotationSet.loadMethodsAnnotation(WebAnnotationSet.java:275)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:137)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.milyn.SmooksException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more

Jun 12, 2012 11:30:32 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Jun 12, 2012 11:30:32 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Jun 12, 2012 11:30:32 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 810 ms 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-11T20:35:21.607

> ```
> org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 60 
> ```

这可能有几个可能的原因，这些原因都与构建期间使用的不兼容的 Servlet API 版本有关。

很可能你有一个有问题的特定于 servletcontainer 的 JAR 文件，例如`servlet-api.jar`来自 webapp 中不同品牌/版本的任意 servletcontainer 的左右`/WEB-INF/lib`。你应该删除它。它不属于那里。如果您这样做是为了“修复”Servlet API 上的编译错误，请阅读此答案如何为 Eclipse+Tomcat 正确执行此操作：[如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project)

另一个可能的原因是使用错误的“动态 Web 模块”构面版本配置了 Eclipse 项目。您需要确保将其设置为 3.0（因为[Tomcat 7.0](http://tomcat.apache.org/whichversion.html)是一个 Servlet 3.0 容器）。右键单击项目，转到*Properties > Project Facets > Dynamic Web Module*并确保将其设置为版本 3.0。

另一个可能的原因（但 IMO 不太可能导致此特定异常）是它`web.xml`本身是根据错误的 Servlet API 版本声明的。确保`<web-app>`根声明符合 Servlet 3.0 规范。

```
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0"> 
```

* * *

**更新**：如果一切看起来都正确，那么问题的原因可能在于第 3 方 JAR 本身（很可能是 Smooks 之一）。你想将它作为一个错误报告给它的维护者。同时，如果您没有任何需要 Servlet 3.0 注解扫描的 JAR，您可以`metadata-complete="true"`通过`<web-app>`在`web.xml`.

```
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0" metadata-complete="true"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T19:46:44.897

有时，如果您在 Eclipse 中运行 Tomcat 服务器，本地 Tomcat 工作目录可能会被占用，您必须明确清除它。请注意，这与对项目进行清理构建不同：打开服务器窗口->右键单击服务器->清理 Tomcat 工作目录...->确定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T19:13:28.847

我使用的是 Tomcat 7.0.27。当我用 Win7-64 位将我的机器迁移到另一台机器时，我在启动 Tomcat 时开始收到此错误。作为这篇文章（[org.apache.tomcat.util.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 15 - Tomcat 7, JDK incompatibilty?](https://stackoverflow.com/questions/23484098/invalid-byte-tag-in-constant-pool-tomcat7-war-jdk-incompatibilty)），我只是将 Tomcat 更新到 7.0.61 解决了我的问题。

# asp.net - 允许可移动的 HTML 标记

> ID：10986768
> 
> 赞同：-1
> 
> 时间：2012-06-11T20:03:06.263
> 
> 标签：asp.net, html, vb.net

有谁知道在 html 标记中包含不间断空格的方法，以允许我根据运行时在后面代码中测试的条件将其删除？

基本上为什么我需要这个：如果满足条件，我将有 4 个按钮，但如果不是只有三个。我可以删除按钮，但我`&nbsp;`在 2 个按钮之间有 4 个，而不是只有 2 个`&nbsp;`。

`<del>`如果它没有穿透文本，则类似标签的东西会起作用。

基本上我有这样的东西（为简单起见，不包括属性值）：

```
<td><button />&nbsp&nbsp<button />&nbsp&nbsp<button />&nbsp&nbsp<button /></td> 
```

我不能在实际的按钮标签中使用该功能，因为那样它将呈现   而不是按钮文本。

**编辑**：我确实结束了编辑   标签并使用 css。我感谢所有的回应。

我担心走这条路的主要原因是因为试图让我的客户批准任何事情就像拔牙一样，但我让他们批准了更改并调整了预算。

再次感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:09:55.953

必须是 吗？根据您对要求的描述，听起来有点 CSS 可能会更好：

```
 button.myClass {
    margin-left: 1ex;
  } 
```

比尝试将逻辑放入视图层要简单得多（即使您没有严格遵循 MVC 模式，您仍然应该尝试尽可能地分离表示和业务逻辑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:15:33.427

您不应该`&nbsp;`用于布局。

如果您想直接在页面上输出一些 HTML 内容而不需要控件 - 您可以使用[Embedded Code Blocks](http://msdn.microsoft.com/en-us/library/ms178135.aspx)：

```
<button/><% =GetNecessaryNbsp() %><button/> 
```

页面类中的 GetNecessaryNbsp() 将返回必要数量的`&nbsp;`.

# ios - 是否可以仅通过本机移动应用程序使用 Facebook 的分数和成就 API？

> ID：10986772
> 
> 赞同：9
> 
> 时间：2012-06-11T20:03:32.017
> 
> 标签：ios, facebook, facebook-graph-api, ios5, facebook-opengraph

我正在玩弄我作为业余项目开发的游戏的 Facebook API，在阅读了 facebook SDK 文档之后，我仍然不清楚在平台上开发游戏需要什么。

这就是我所拥有的：

1.  原生 iOS 应用程序
2.  所有游戏数据都存储在本地（关卡、角色、物品）
3.  我没有任何后端服务器，游戏完全只是客户端。

我想通过添加成就/朋友列表使游戏“社交”，facebook API 似乎是这样做的好人选

这就是我想要实现的目标：

*   **SSO** - 希望对帐户使用 facebook SSO，这样我就不必实施自己的身份验证等。这节省了不必自己开发的时间。
*   **分数**- 当我的游戏中发生特定事件时，它会向用户奖励一些分数，我希望为此使用[分数 API](https://developers.facebook.com/docs/score/)。
*   **成就**- 在用户获得一定数量的积分或发生其他预定义事件后，将使用[成就 API](http://developers.facebook.com/docs/achievements/)授予成就。

**问题：我可以在不将我的游戏部署到后端服务器的情况下使用来自 facebook 的分数和成就 API 吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T11:50:27.563

不，有两个原因：

1.  您需要一个 URL 来托管您的成就的元数据
2.  ~~分数和成就需要使用 App Access Token 发布，并且在您的客户端应用程序中分发它们将允许任何反编译应用程序的人更改您的应用程序的任何设置，代表任何应用程序的用户发布帖子，将您的流量重定向到另一个网站等~~

至少，您需要描述成就的静态页面，以及可以从您的移动应用程序中点击的回调脚本，该脚本会触发将分数和成就发布到 Facebook

**2012-09-06 更新**：[不再需要](https://developers.facebook.com/blog/post/2012/09/05/platform-updates--operation-developer-love/)使用应用访问令牌来发布分数和成就，因此您可以在移动应用中使用分数，但您仍然需要一个网站来保存成就元数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-16T07:59:12.283

我最近找到了一个很好的答案。复制没有意义，所以请在此处查看答案： [在 Android 中使用 Facebook 成就 API](https://stackoverflow.com/questions/26837139/using-facebook-achievement-api-in-android/26954969#26954969)

（它与 iOS 以及任何其他平台相关）

# tomcat - 独立tomcat上的全局重定向

> ID：10986774
> 
> 赞同：0
> 
> 时间：2012-06-11T20:03:44.607
> 
> 标签：tomcat, redirect

我有一个在我们公司网络中运行的 Tomcat 实例。

目前用户可以通过输入机器名称来访问它： `http://machine:8080` 或使用完全限定名称：（ `http://machine.company.com:8080` 这只能在内部访问）

但是，我希望他们只使用全名。有没有办法在 tomcat（可能在 server.xml 或 conf.xml 中的某处）中强制进行全局 301 重定向，通过短名称访问的任何资源都将转发（301）到长名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:43:55.433

我不喜欢这样的全局配置的东西，但你可以在 Tomcat 中全局配置过滤器`conf/web.xml`。您可以为这种特定情况编写自己的过滤器，或使用 url-rewrite (http://www.tukey.org/urlrewrite/) 为您完成。在任何一种情况下，您都必须将您的代码（lr url-rewrite 库）放在 Tomcat 的`lib`目录中（yuck）或修改 catalina.properties 以重新引入“通用”类加载器并将您的代码（或库）放在那里（也很糟糕）。

如果您只部署了一个 Web 应用程序，那么您可以在一个 Web 应用程序中配置所有这些，而不必为上述所有“恶心”而烦恼。

此外，如果您在 Tomcat 前面有一个 Web 服务器（例如，Apache httpd），那么您当然可以在那个级别上做这种事情。

# c++ - 仅检查共享库中的内存问题（例如 Apache 模块）

> ID：10986775
> 
> 赞同：0
> 
> 时间：2012-06-11T20:03:51.943
> 
> 标签：c++, linux, memory-leaks, shared-libraries, valgrind

我们有一个作为 Apache 模块（插件）加载的共享库。当然，模块本身会加载一些其他库。我想测试其中一个库是否存在内存泄漏、损坏等。查看 Valgrind 教程，我发现唯一的示例是在其下运行可执行文件。显然我不想在 Valgrind 下运行完整的 Apache 服务器。有没有办法指示 Valgrind 只查看特定的库？

其他一些工具，例如 Purify，我在编译期间（相当遥远的）过去需要检测，因此只有检测的库会为该工具生成输出。也许除了 Valgrind 之外还有其他工具可以做到这一点？

我们确实有相关库的命令行包装器，所以是的，我可以在 Valgrind 下运行它，但我们可以用它重现的场景非常有限。在检查内存问题时，我更愿意运行完整的应用程序并重现有问题的场景。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:15:19.830

Valgrind 提供了一个命令行选项，允许您从文件中指定抑制。您可以使用它来抑制库以外的任何错误。

```
 --suppressions=<filename> [default: $PREFIX/lib/valgrind/default.supp]
          Specifies an extra file from which to read descriptions of
          errors to suppress. You may use up to 100 extra suppression
          files. 
```

您可以查看语法的默认抑制文件，但在[此处](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)进行了描述。

# video - 用于网站开发的虚假内容包

> ID：10986776
> 
> 赞同：1
> 
> 时间：2012-06-11T20:03:53.627
> 
> 标签：video, photos, lorem-ipsum

有谁知道任何网站，或（最好）可下载的软件包，您可以将其用作数据库驱动的网站的“真实”数据。类似于 Lorem Ipsum 的东西，但范围更广（视频、照片、帐户详细信息等）。由于我对所有内容都使用“asdfg”、“qwerty”和通用壁纸照片，因此我的项目看起来有点多余。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:05:49.907

对于图片有这个： http: [//lorempixel.com/](http://lorempixel.com/)

这就是我能想到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:10:09.137

您也可以使用 Thinkstock 并将其徽标保留在照片中以保留版权。

# jquery - 尝试使用 jQuery 来序列化（）表单数据并使用扩展（）附加更多变量

> ID：10986779
> 
> 赞同：4
> 
> 时间：2012-06-11T20:04:00.983
> 
> 标签：jquery, form-submit

我`$.ajax`用来提交表单，但我想在提交中添加一些不属于表单输入的键值对。连接这些额外参数的技术效果很好，但似乎不如使用`$.extend`. 问题是我不能让后者工作。

这有效：

```
var data = $form.serialize() + "&a=1&b=0.5"; 
```

这不会：

```
var data = $.extend({}, $form.serialize(), {
    a: 1,
    b: 0.5
}); 
```

当我检查在有效的情况下提交的内容时，我可以看到我有三个键值对：

```
t:test
a:1
b:0.5 
```

`t`单个表单输入字段（文本框）的名称在哪里。

当我使用该`$.extend`功能时，检查显示以下内容：

```
0:t
1:=
2:t
3:e
4:s
5:t
a:1
b:0.5 
```

我的应用程序不喜欢这个请求。这种行为是可以预期的还是有人可以指出我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:39:05.220

您的问题是因为`.serialize()`仅适用于 jQuery 表单对象，并且在 a 中进行序列化`.extend()`将获得`[object] [object]`表单的 as 值（因为这不是正确的方法。我提出了两种解决方案：

**第一个解决方案** 克隆 jQuery 的表单，向其中添加项目并序列化

```
var $form = $('#form').clone()
          .append('<input name="foo" value="1" />')
          .append('<input name="bar" value="2" />')
          .serialize(); 
```

**第二种解决方案** 用表单的值填充一个对象，然后参数化

```
var data = $(foo:"value1", bar:"value2");
$('form').find(':input').each(function () {
    if (this.name) {
        data[this.name] = this.value;
    }
});

data = $.param(data) 
```

# java - 动画 3 对象

> ID：10986784
> 
> 赞同：1
> 
> 时间：2012-06-11T20:04:35.853
> 
> 标签：java, swing

我需要绘制一个矩形、圆形和线条，然后为它们设置动画（例如按左->它（所有对象）向左移动。）

我画这样的物体

```
class MyCanvas extends JComponent {

int x = 10;
int y = 10;
public MyCanvas()
{
    Action someaction = new AbstractAction(){
        @Override
        public void actionPerformed(ActionEvent e) {
            x+=30;
            //revalidate();
            repaint();
        }
    };
    this.getInputMap().put(KeyStroke.getKeyStroke("SPACE"), someaction);
}        
@Override
public void paintComponent(Graphics g) {
g.drawRect(x,y, 200, 200); 
g.drawOval(x, y, 50, 50);
g.drawLine(x, y, 50, 30);
  }
} 
```

但它不动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:13:28.600

1.  用于`paintComponent(Graphics g)`Swing`JComponents`而不是`paint(Graphics g)`

2.  用于 Swing `KeyBindings`_`KeyEvents``JComponents`

3.  将对象（之前准备`paintComponent(Graphics g)`）放入数组，从数组中绘制元素`paintComponent(Graphics g)`

# c# - 单击按钮，创建一个新窗口并在 C# 中显示数组的内容

> ID：10986785
> 
> 赞同：0
> 
> 时间：2012-06-11T20:04:43.503
> 
> 标签：c#, visual-studio-2010, multidimensional-array, windows-forms-designer

我有一个主 GUI，我在其中添加数据，分为 12 列。每个数据都在一行中。这些数据被推入一个可全局访问的数组中。该数组是动态二维的，每次我输入一组数据时都会增长。

我希望有一个按钮，当按下时，显示数组中保存的所有当前可用数据。如果我可以编辑它，那就更进一步了，但目前我只需要能够查看我的数组的内容。

我的代码只要有很多按钮，列表框做不同的事情。如果需要，我可以邮寄我的代码。

* * *

```
public void button1_Click(object sender, EventArgs e) {
    Form2.Fm2 = new Form2();
    Form2.Fm2.listBox1_SelectedIndexChanged();  
    if (Form2.Fm2 == null) {
        Form2.Fm2.Show();
    }
    else {
        Form2.Fm2.Show();
        Form2.Fm2.BringToFront();
    }  
} 
```

在上面，我想将我的二维数组的值传递到 Form2 上的列表框中。这是正确的方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:08:07.503

您可以更改显示表单的构造函数以获取数组，然后使用它填充 ListView 或其他适当的控件。

# c# - 如何复制文件夹结构

> ID：10986789
> 
> 赞同：-1
> 
> 时间：2012-06-11T20:04:49.893
> 
> 标签：c#, c#-3.0

我希望能够在 c# 3.5 中仅将文件夹结构（而不​​是内容）从一个位置复制到另一个位置

例如
C:\Some 文件夹
   + 文件夹 A
     + 子文件夹 A
     + 子文件夹 B
       + 子文件夹 B1
       + 子文件夹 B2
   + 子文件夹 C

到新位置
C:\一些新文件夹
   + 文件夹 A
     + 子文件夹 A
等等......等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:14:30.237

您的意思是要创建相同的文件，而不是相同结构中的内容。

像这样的东西可能会起作用：

```
public static TotallyNotRecursiveAndCreateDirs(string root, string newRoot)
    {
        DirectoryInfo rootDir = new DirectoryInfo(Path.GetPathRoot(root)); 
        DirectoryInfo[] dirs = rootDir.GetDirectories("*", SearchOption.AllDirectories);

        foreach(DirectoryInfo dir in dirs)
        {
            Directory.CreateDirectory(dir.FullName.Replace(root, newRoot));
            FileInfo[] files = dir.GetFiles("*.*", SearchOption.TopDirectoryOnly);
            foreach(FileInfo file in files)
            {
                File.Create(file.FullName.Replace(root, newRoot));
            }
        }
    } 
```

您可能还想进行一些异常检查以确保 root 和 newRoot 参数有效（即：rooted 等...）

如果您不想要文件而只想要目录，那么只需删除第二个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:15:12.620

要将文件夹结构复制`src`到`dest`：

1.  创建`dest`.
2.  （可选）设置权限`dest`以匹配`src`。
3.  对于 中的每个文件夹`name`，`src`将文件夹结构复制`src\name`到`dest\name`。

# jquery - 使用 JQuery 反射（jsfiddle）时调整图像大小

> ID：10986790
> 
> 赞同：1
> 
> 时间：2012-06-11T20:04:51.403
> 
> 标签：jquery

我正在尝试使用 JQuery 反射功能，但遇到了一些麻烦。反射功能在我尝试将类添加到的任何图像上都可以正常工作，但是，它仅在我不修改图像大小的情况下才有效。

一旦我尝试调整我正在应用反射的图像的大小，我尝试应用到它的大小被忽略并且一些图像被切断......我想知道调整我的图像大小的正确方法是什么正在应用反射？

jsFiddle

[http://jsfiddle.net/suxcd/](http://jsfiddle.net/suxcd/)

**注意：**如果您删除“width:50%”，则反射效果很好，并且整个图像会按原样显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:25:18.943

这是可能的，但它仅在您使用反射的所有图像使用百分之一值时才有效（或者您必须使用 ID）。

无论如何，这是[更新的 fiddle](http://jsfiddle.net/suxcd/2/)。

最重要的代码：编辑文档就绪代码：

```
$(document).ready(function() {
    var options = {
        opacity: 0.75
    };
    $('.reflect').reflect(options);
    $('.reflected').parent('.reflect').children('canvas').width('50%');
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:17:12.933

您正在按百分比调整大小，如果您使用定义的数字，它可以工作

[http://jsfiddle.net/suxcd/1/](http://jsfiddle.net/suxcd/1/)

我想问题是你需要它在 %

编辑：

见这里[http://jsfiddle.net/suxcd/3/](http://jsfiddle.net/suxcd/3/)

基本上，我改变了这个

```
h.scale(0.5, -1); 
```

0.5 与 50% 相同，您可以轻松地将 0.5 设置为动态值。获取 img 标签上的宽度属性，如果有 % 则抓取数字将其转换为十进制并在那里使用它。如果没有 % 那么不要改变它

# iphone - Youtube API 认证 - Iphone

> ID：10986791
> 
> 赞同：7
> 
> 时间：2012-06-11T20:04:55.193
> 
> 标签：iphone, ios, upload, ios-simulator, youtube-api

我正在尝试使用 youtube api 的示例代码上传视频。当我按下上传按钮时，进度条完成它的过程，但是当它到达终点时我得到错误。错误描述如下：

> YouTubeTest[2149:f803] 错误 - 错误域 = com.google.GDataServiceDomain 代码 = 400“操作无法完成。（com.google.GDataServiceDomain 错误 400。）”用户信息 = 0x69d5bd0 {}

这是按下上传按钮的代码

```
- (IBAction)uploadPressed:(id)sender {
    [self.view resignFirstResponder];
    NSString *devKey = [mDeveloperKeyField text];

    GDataServiceGoogleYouTube *service = [self youTubeService];
    [service setYouTubeDeveloperKey:devKey];

    NSString *username = [mUsernameField text];
    NSString *clientID = [mClientIDField text];

    NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:username
                                                             clientID:clientID];

    // load the file data
    NSString *path = [[NSBundle mainBundle] pathForResource:@"YouTubeTest" ofType:@"m4v"]; 
    NSData *data = [NSData dataWithContentsOfFile:path];
    NSString *filename = [path lastPathComponent];

    // gather all the metadata needed for the mediaGroup
    NSString *titleStr = [mTitleField text];
    GDataMediaTitle *title = [GDataMediaTitle textConstructWithString:titleStr];

    NSString *categoryStr = [mCategoryField text];
    GDataMediaCategory *category = [GDataMediaCategory mediaCategoryWithString:categoryStr];
    [category setScheme:kGDataSchemeYouTubeCategory];

    NSString *descStr = [mDescriptionField text];
    GDataMediaDescription *desc = [GDataMediaDescription textConstructWithString:descStr];

    NSString *keywordsStr = [mKeywordsField text];
    GDataMediaKeywords *keywords = [GDataMediaKeywords keywordsWithString:keywordsStr];

    BOOL isPrivate = mIsPrivate;

    GDataYouTubeMediaGroup *mediaGroup = [GDataYouTubeMediaGroup mediaGroup];
    [mediaGroup setMediaTitle:title];
    [mediaGroup setMediaDescription:desc];
    [mediaGroup addMediaCategory:category];
    [mediaGroup setMediaKeywords:keywords];
    [mediaGroup setIsPrivate:isPrivate];

    NSString *mimeType = [GDataUtilities MIMETypeForFileAtPath:path
                                               defaultMIMEType:@"video/mp4"];

    // create the upload entry with the mediaGroup and the file data
    GDataEntryYouTubeUpload *entry;
    entry = [GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
                                                          data:data
                                                      MIMEType:mimeType
                                                          slug:filename];

    SEL progressSel = @selector(ticket:hasDeliveredByteCount:ofTotalByteCount:);
    [service setServiceUploadProgressSelector:progressSel];

    GDataServiceTicket *ticket;
    ticket = [service fetchEntryByInsertingEntry:entry
                                      forFeedURL:url
                                        delegate:self
                               didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)];

    [self setUploadTicket:ticket];

} 
```

我已经从 API Dashboard 正确设置了开发者密钥和客户端密钥。

我在模拟器上运行它。我们不能从模拟器上传视频吗？

请指导我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:05:14.980

错误解决... 当使用谷歌账号上传视频到YouTube时，GData Objective-C的一些功能需要Gmail账号作为参数，一些需要YouTube链接账号作为参数。

当你调用'- (void)setUserCredentialsWithUsername:(NSString *) username password:(NSString *)password;' 在 GDataServiceBase 中，用户名应该是 Gmail 帐户，例如“x...@gmail.com”，密码应该是 Gmail 帐户的密码。

但是当你调用'+ (NSURL *)youTubeUploadURLForUserID:(NSString *) userID clientID:(NSString *)clientID;' 在 GDataServiceGoogleYouTube 中，userID 参数应为 YouTube 关联帐号，密码为 Gmail 帐号密码。

我使用 email_id@gmail.com 登录现在我只是使用 email_id 登录。多么愚蠢的错误！..但我花了整整 2 天时间才解决.. Duhhh ..!!

# shell - 在 Unix 上删除部分路径

> ID：10986794
> 
> 赞同：84
> 
> 时间：2012-06-11T20:05:12.397
> 
> 标签：shell, unix, scripting, sed

我正在尝试删除字符串中的部分路径。我有路径：

```
/path/to/file/drive/file/path/ 
```

我想删除第一部分`/path/to/file/drive`并产生输出：

```
file/path/ 
```

注意：我在 while 循环中有多个路径，`/path/to/file/drive`所有路径都相同，但我只是在寻找删除所需字符串的“操作方法”。

我找到了一些例子，但我无法让它们工作：

```
echo /path/to/file/drive/file/path/ | sed 's:/path/to/file/drive:\2:'
echo /path/to/file/drive/file/path/ | sed 's:/path/to/file/drive:2' 
```

`\2`作为字符串的第二部分，我显然做错了什么......也许有更简单的方法？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2015-07-30T15:59:20.957

如果你想删除一定数量的**路径**组件，你应该使用`cut`with `-d'/'`。例如，如果`path=/home/dude/some/deepish/dir`：

要删除前两个组件：

```
# (Add 2 to the number of components to remove to get the value to pass to -f)
echo $path | cut -d'/' -f4-
# output:
# some/deepish/dir 
```

要保留前两个组件：

```
echo $path | cut -d'/' -f-3
# output:
# /home/dude 
```

要删除最后两个组件（`rev`反转字符串）：

```
echo $path | rev | cut -d'/' -f4- | rev
# output:
# /home/dude/some 
```

要保留最后三个组件：

```
echo $path | rev | cut -d'/' -f-3 | rev
# output:
# some/deepish/dir 
```

或者，如果您想在特定组件之前删除所有内容，则`sed`可以：

```
echo $path | sed 's/.*\(some\)/\1/g'
# output:
# some/deepish/dir 
```

或在特定组件之后：

```
echo $path | sed 's/\(dude\).*/\1/g'
# output:
# /home/dude 
```

如果您不想保留您指定的组件，那就更容易了：

```
echo $path | sed 's/some.*//g'
# output:
# /home/dude/ 
```

如果你想保持一致，你也可以匹配尾部斜杠：

```
echo $path | sed 's/\/some.*//g'
# output:
# /home/dude 
```

当然，如果你匹配多个斜线，你应该切换`sed`分隔符：

```
echo $path | sed 's!/some.*!!g'
# output:
# /home/dude 
```

请注意，这些示例都使用绝对路径，您必须尝试使它们与相对路径一起使用。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-06-11T20:23:07.007

您也可以使用 POSIX shell 变量扩展来执行此操作。

```
path=/path/to/file/drive/file/path/
echo ${path#/path/to/file/drive/} 
```

扩展变量时，该`#..`部分会去除前导匹配字符串；如果您的字符串已经在 shell 变量中，这尤其有用，例如您正在使用`for`循环。您也可以使用`%...`. 有关血腥的详细信息，请参见`bash`手册页。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-06-11T22:28:59.927

如果您不想对要删除的部分进行硬编码：

```
$ s='/path/to/file/drive/file/path/'
$ echo ${s#$(dirname "$(dirname "$s")")/}
file/path/ 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-11T20:08:50.270

使用 sed 执行此操作的一种方法是

```
echo /path/to/file/drive/file/path/ | sed 's:^/path/to/file/drive/::' 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-08-14T14:52:01.417

如果你想删除*路径的前 N ​​部分*，你当然可以使用*N*调用`dirname`，如[glenn 的回答](https://stackoverflow.com/a/10988373/1221661)，但使用 globbing 可能更容易：

```
path=/path/to/file/drive/file/path/
echo "${path#*/*/*/*/*/}"   #  file/path/ 
```

具体来说，`${path#*/*/*/*/*/}`表示*“返回`$path`减去包含 5 个斜杠的最短前缀”*。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-13T20:32:20.473

按照 evil otto 的建议使用`${path#/path/to/file/drive/}`当然是典型/最好的方法，但是由于有许多 sed 建议，因此值得指出的是，如果您使用的是固定字符串，则 sed 是矫枉过正的。你也可以这样做：

```
echo $PATH | cut -b 21- 
```

丢弃前 20 个字符。同样，您可以`${PATH:20}`在 bash 或`$PATH[20,-1]`zsh 中使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-10T16:04:28.090

纯 bash，无需对答案进行硬编码

```
basenames()
{
  local d="${2}"
  for ((x=0; x<"${1}"; x++)); do
    d="${d%/*}"
  done
  echo "${2#"${d}"/}"
} 
```

*   **参数 1** - 你想保留多少个级别（原始问题中的 2 个）
*   **论点 2** - 完整路径

取自[vsi_common](https://github.com/VisionSystemsInc/vsi_common/blob/0be3a23df275f780b6e0a5984a7eccb69dca3f98/linux/dir_tools.bsh#L227-L236)（[原始版本](https://github.com/VisionSystemsInc/vsi_common/blob/ccb48bae2ef5e92cc09f241e70f853db7de07be0/linux/dir_tools.bsh#L153-L160)）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-03T20:39:50.057

这是一个使用简单 bash 语法的解决方案，它可以容纳变量（以防您不想对完整路径进行硬编码），无需将 stdin 管道传输到`sed`，并包含一个`for`循环，以实现良好的衡量标准：

```
FULLPATH="/path/to/file/drive/file/path/"
SUBPATH="/path/to/file/drive/"
for i in $FULLPATH;
do
echo ${i#$SUBPATH}
done 
```

正如@evil otto 上面提到的，`#`在这种情况下，该符号用于删除前缀。

# android - Android：视图中的 RemoveAllItems 不会刷新大小

> ID：10986802
> 
> 赞同：1
> 
> 时间：2012-06-11T20:05:31.590
> 
> 标签：android, scrollview, xamarin.android, android-linearlayout

我有一个`ScrollView`包含一个`LinearLayout`.

在代码中，我将项目添加到`LinearLayout`并且它很好地扩展。

当我在代码中删除所有项目时`LinearLayout`，`LinearLayout`它们的大小保持不变，但它是空的。

我如何`ScrollView`在它有项目`reclaim the height`时`LinearLayout`使用它并缩小 LinearLayout 以使用最小高度，因为它现在是空的？

我尝试过（在 C# 中）：

```
 linearLayout.RemoveAllViewsInLayout();
        linearLayout.PostInvalidate();
        scrollView.PostInvalidate(); 
```

Java 或 C# 的答案很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:35:03.107

I only have Java experience with Android, so I would try using:

```
linearLayout.requestLayout(); 
```

This should cause another layout pass, and assuming your `LinearLayout` is set to `WRAP_CONTENT` it will measure all the children and size itself to fit the smallest space that the children occupy (or `minHeight` if you have that set and it is larger).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:27:20.210

这个技巧似乎奏效了。结果是调整了线性布局 id 的大小和滚动视图：

```
 linearLayout.RemoveAllViewsInLayout();
        linearLayout.Visibility = ViewStates.Gone;
        scrollView.SmoothScrollTo(0, 0);
        linearLayout.Visibility = ViewStates.Visible; 
```

必须有更好的方法，但这有效。

# java - 当我部署一个新的 WAR 文件时，我应该将应用程序生成的 HTML 报告放在哪里，它们不会被删除？

> ID：10986803
> 
> 赞同：0
> 
> 时间：2012-06-11T20:05:34.967
> 
> 标签：java, tomcat, web-applications

我有一个简单的 Web 应用程序，它允许用户上传本地用户数据，然后他们可以从上传的数据生成 HTML 报告。生成 HTML 后，我会显示一个指向报告的链接，他们可以单击该链接在浏览器中查看，也可以与其他人共享该链接。

问题是我目前将“/Upload”文件夹放在“WEB-INF”文件夹中，因为我不希望外界可以访问该文件夹数据。然后，我将“报告”文件夹放在 Web 应用程序的根目录中。这很好，因为我可以将 WAR 文件部署到他们的服务器，用户可以上传文件，然后请求生成 HTML 报告。问题是当我在 WAR 文件中向他们发送软件更新时，它会删除 /MyWebApp 目录中的每个人，包括 /Upload 和 /Reports 文件夹。因此，用户必须重新上传数据，并且他们会丢失“/Reports”文件夹中的任何现有报告。

现在我确实通过这个讨论找到了 StackOverflow 上 /Upload 文件夹的答案。 [我在哪里可以放置一个上传文件夹，这样当我在 Tomcat 中部署/取消部署站点时，该文件夹不会受到影响](https://stackoverflow.com/questions/7937758/where-can-i-put-an-uploading-folder-so-that-when-i-deploy-undeploy-the-site-in-t)

但我仍然不知道将“/Reports”文件夹放在哪里？我想我必须像现在一样将它放在 Web 应用程序上下文目录中，以便 Tomcat 服务器将其作为链接提供（例如：[http](http://example.com/MyWebApp/Reports/report01.html) ://example.com/MyWebApp/Reports/report01.html ）。

另一件需要注意的是，这个应用程序只在 Apache Tomcat 上运行，我没有通过 Apache 服务器的请求。我们决定让它在 Tomcat 的用户本地服务器上运行，因为它似乎更容易部署然后尝试部署和配置两者以协同工作。此外，每个服务器站点只有 2-3 人在使用此应用程序，在这种负载下，Tomcat 似乎在自己处理所有事情方面做得很好。那么也许这使解决方案变得更加困难？

任何对此有最佳实践的 hep 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:39:59.650

您用于将上传文件放在磁盘上的策略与将报告放在磁盘上的策略应该没有区别：两者都是 webapp 在部署期间生成的文件（忘记客户端上传文件的事实）并且需要以同样的方式受到保护。

如果您愿意升级到 Tomcat 7，则有一个新`<Context>`属性 ，`aliases`它将允许您的 webapp 提供该目录中的内容，但在取消部署 webapp 时不会将其删除。

# c# - 为什么注销仅在本地有效，而在服务器上无效

> ID：10986804
> 
> 赞同：0
> 
> 时间：2012-06-11T20:05:36.683
> 
> 标签：c#, asp.net-mvc, logoff

我使用此代码进行注销

```
public ActionResult LogOff()
    {

         FormsAuthentication.SignOut();

        // Drop all the information held in the session
        Session.Clear();
        Session.Abandon();

        // clear authentication cookie
        HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
        cookie1.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie1);

        // clear session cookie
        HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
        cookie2.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie2);
        foreach (var cookie in Request.Cookies.AllKeys)
        {
            Request.Cookies.Remove(cookie);
        }

        return RedirectToAction("Index", "Home");

    } 
```

并且它在本地工作正常，但是当我在服务器中发布我的应用程序时，即使用户已经注销，如果用户单击浏览器的`Back`按钮，页面仍然会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:42:26.493

我希望您只是看到页面的缓存版本。

如果您按 CTRL+F5 是否会要求您再次登录？

如果您真的想禁用此功能，请参阅MiBu 给出的[此答案](https://stackoverflow.com/a/10909477/148998)，以防止缓存安全页面。

# html - 如何将自定义图像添加到按钮 (dojo 1.7)

> ID：10986807
> 
> 赞同：7
> 
> 时间：2012-06-11T20:05:52.237
> 
> 标签：html, dojo

如何将自定义图像添加到 dojo 按钮

这是没有图像的按钮的示例代码

```
<div id="zoomin" data-dojo-type="dijit.form.Button">
    <span>zoomin</span>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T20:46:10.670

这些答案很接近，但您的图标的样式定义必须包括以下内容：

```
.myIcon {
  background-image: url(...);
  background-repeat: no-repeat;
  width: 16px;
  height: 16px;
  text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T20:13:28.627

您可以在小部件上设置图标类，然后在 css 中提供图像。

```
<div id="zoomin" data-dojo-type="dijit.form.Button" iconClass="myIcon">
    <span>zoomin</span>
</div>

.myIcon {
  background-image:  url(...);
} 
```

[http://dojotoolkit.org/reference-guide/1.7/dijit/form/Button.html#change-the-icon](http://dojotoolkit.org/reference-guide/1.7/dijit/form/Button.html#change-the-icon)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T10:49:21.370

遵循克雷格的回答，但要符合 1.7+ 和 html 标准，而是使用

```
<div id="zoomin" data-dojo-type="dijit.form.Button" data-dojo-props="iconClass:'myIcon'">
    <span>zoomin</span>
</div> 
```

或者您可以通过函数覆盖来决定哪个

```
<div id="zoomin" data-dojo-type="dijit.form.Button">
    <script type="dojo/method" data-dojo-event="getIconClass">
         var regular = this.inherited(arguments);
         // this evaluation will allways be true, but here for sake of argument
         return (this.declaredClass == 'dijit.form.Button' ? "myButtonIcon" : regular);
    </script>
    <span>zoomin</span>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T13:02:05.513

我使用 dojo 1.10 并使用 using`background-repeat:round`

```
<div id="zoomin" data-dojo-type="dijit/form/Button" iconClass="myIcon">
<span>zoomin</span> 
```

```
.myIcon {
 background-image:  url(...);
 background-repeat: round;
 width: 18px;
 height: 18px;
 text-align: center;
} 
```

# javascript - 如何使用 JavaScript SDK 获取访问令牌以发布操作

> ID：10986810
> 
> 赞同：0
> 
> 时间：2012-06-11T20:06:07.003
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在使用以下代码通过 javascript sdk 获取访问令牌

```
<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

        FB.init({ 
            appId: 'insert your appID value here', 
            cookie: true, 
            xfbml: true, 
            status: true });

        FB.getLoginStatus(function (response) {
            if (response.authResponse) {
                alert('#AccessToken').val(response.authResponse.accessToken);
            } else {
                // do something...maybe show a login prompt
            }
        });

    });
</script> 
```

现在我想使用上面代码中的访问令牌并在下面使用它来发布操作，我尝试了不同的东西，但没有一个起作用。

```
<script type="text/javascript">
function read()
{
FB.api('/me/news.reads' +
'?article=Yoursite.com/test.html&access_token=access token from above','post',
function(response) {
var msg = 'Error occured';
if (!response || response.error) {
if (response.error) {
msg += "\n\nType: "+response.error.type+"\n\nMessage: "+response.error.message;
}
alert(msg);
}
else {
alert('Post was successful! Action ID: ' + response.id);
}
});
}
</script> 
```

# asp.net - 在gridview模板字段中需要可变数量的下拉列表

> ID：10986818
> 
> 赞同：0
> 
> 时间：2012-06-11T20:06:40.693
> 
> 标签：asp.net, gridview

我定义了以下完美填充的gridview：

```
 <asp:GridView runat="server" ID="chargeDetail" AutoGenerateColumns="false" DataKeyNames="LineItemNumber,DetailId,IsParking" CellSpacing="0" CellPadding="6"
     HorizontalAlign="Center" EnableViewState="true" ShowFooter="true">
        <Columns>
            <asp:BoundField DataField="StudentID" HeaderText="Student ID" ReadOnly="True" ItemStyle-HorizontalAlign="Center" />
            <asp:BoundField DataField="StudentName" HeaderText="Name" ReadOnly="true" />
            <asp:BoundField DataField="CampusName" HeaderText="Campus" ReadOnly="true" />
            <asp:TemplateField HeaderText="Description" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:Label runat="server" ID="LineItemDetailLabel" Text='<%# IIf(Eval("Mandatory") = "1", Eval("LineItemDetail") + " *", Eval("LineItemDetail")) %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Item Cost" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    $<asp:Label runat="server" ID="LineItemCostLabel" Text='<%# Eval("LineItemCost") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Options" ItemStyle-HorizontalAlign="Center">
                <ItemTemplate>
                    <asp:Label runat="server" ID="lblOptionsAvailable" 
                     Text='<%# IIf(Eval("AttributesAvailable") = "1", "Options will be available to select on the next screen.", "No options available.") %>' />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Pay Now" ItemStyle-HorizontalAlign="Center" FooterText="Total:">
                <ItemTemplate>
                    <asp:Checkbox runat="server" ID="cbLineItemSelected" Checked='<%# IIf(Eval("Selected") = "1", "True", "False") %>'
                     Enabled='<%# IIf(Eval("Mandatory") = "1", "False", "True") %>' AutoPostBack="True" OnCheckedChanged="cbLineItemSelected_CheckedChanged" />
                </ItemTemplate>
                <FooterStyle Font-Bold="True" HorizontalAlign="Right" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Total">
                <ItemTemplate>
                    $<asp:Label runat="server" ID="lblLineTotalCost" Text='<%# IIf(Eval("Selected") = "1", Eval("LineItemCost"), "0.00") %>' />
                </ItemTemplate>
                <FooterTemplate>
                    $<asp:Label runat="server" ID="lblTotal" />
                </FooterTemplate>
                <FooterStyle Font-Bold="True" />
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

在 HeaderText="Options" 的 TemplateField 中，我需要能够创建可变数量的下拉列表。对于学校可能收取的每项费用，它们可以具有任意数量的相关属性。例如，T恤费可能需要收集尺码和颜色，并且每个属性可能有多个选项。

现在，您可以看到我有一个正确填充的标签，但我需要能够创建两个下拉列表，在本例中为大小和颜色，以便父母在选中要包含的框时可以指定它们这笔费用在他们的收费中。您会注意到，在“立即付款”列中，复选框有一个 OnCheckedChanged 事件，该事件当前更新了页脚行中的总计列和总体总计。

理想情况下，我希望该事件在选中时填充下拉列表，以便父母可以进行选择。我还需要知道如何处理从这些下拉列表中返回的帖子，以便正确记录选择。

从我能找到的情况来看，我猜我需要创建一个嵌套的网格视图，我可以在其中放置下拉列表，但我找不到任何示例来为我指明如何使其工作的正确方向。我可以轻松地从后面的代码中填充下拉列表，如果指向正确的方向，则在父母输入数据时访问数据。只需要一点方向或更简单的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:20:48.670

好的，我想出了一个似乎可行的解决方案。在 gridview 定义中，我嵌套了另一个 gridview，其中包含下拉列表，如下所示：

```
 <asp:TemplateField HeaderText="Options" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:GridView runat="server" ID="gvOptions" AutoGenerateColumns="False" DataKeyNames="AttributeId" HorizontalAlign="center" EnableViewState="true"
                    GridLines="None" EmptyDataText="No available options." ShowHeader="False">
                    <Columns>
                        <asp:BoundField DataField="Description" ReadOnly="true" ItemStyle-HorizontalAlign="Center" />
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:DropDownList runat="server" ID="ddlOptionSelection" DataTextField="Description" DataValueField="OptionId"
                                    EnableViewState="true" AutoPostBack="true" OnSelectedIndexChanged="ddlOptionSelection_SelectedIndexChanged">
                                </asp:DropDownList>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>
            </ItemTemplate>
        </asp:TemplateField> 
```

挑战在于弄清楚如何将所有内容联系在一起，因为嵌套网格视图中的数据依赖于父网格视图中的数据键。父级的 RowDataBound 事件找到子 gridview 并填充下拉列表，如下所示（gvOptions 是子级，chargeDetail 是父级）：

```
Protected Sub chargeDetail_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles chargeDetail.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim gv As GridView = DirectCast(e.Row.FindControl("gvOptions"), GridView)
        Dim cb As CheckBox = DirectCast(e.Row.FindControl("cbLineItemSelected"), CheckBox)
        Dim lineItem As String = chargeDetail.DataKeys(e.Row.RowIndex).Values("LineItemNumber")
        gv.DataSource = GetOptions(chargeDetail.DataKeys(e.Row.RowIndex).Values("DetailId"))
        gv.DataBind()

        Dim gridLineCount As Integer = gv.Rows.Count()
        Dim gridWorkingRow As Integer

        For gridWorkingRow = 0 To gridLineCount - 1
            Dim ddl As DropDownList = gv.Rows(gridWorkingRow).FindControl("ddlOptionSelection")
            Dim AttribId As Integer = gv.DataKeys(gridWorkingRow).Values("AttributeId")
            ddl.DataSource = PopulateOptions(AttribId)
            ddl.DataBind()
            ddl.SelectedValue = GetSelectedValue(AttribId, lineItem)

            If cb.Checked Then
                ddl.Enabled = True
            Else
                ddl.Enabled = False
            End If
        Next gridWorkingRow
    End If
End Sub 
```

当其中一个下拉列表更改时，将触发以下内容。我发现根据数据在数据库中的存储方式，重新发送所有选项更容易，因为属性：选项对被连接起来存储在单个字段中：

```
Protected Sub ddlOptionSelection_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)
    Dim ddlSender As DropDownList = DirectCast(sender, DropDownList)
    Dim row As GridViewRow = DirectCast(ddlSender.NamingContainer, GridViewRow)
    Dim gvOption As GridView = DirectCast(row.NamingContainer, GridView)
    Dim chargeDetailRow As GridViewRow = DirectCast(gvOption.Parent.Parent, GridViewRow)
    Dim LineItemNumber As Integer = CInt(chargeDetail.DataKeys(chargeDetailRow.RowIndex).Values("LineItemNumber"))

    Dim gridLineCount As Integer = gvOption.Rows.Count()
    Dim gridWorkingRow As Integer
    Dim OptionString As String = ""

    For gridWorkingRow = 0 To gridLineCount - 1
        Dim ddl As DropDownList = gvOption.Rows(gridWorkingRow).FindControl("ddlOptionSelection")
        Dim AttribId As String = gvOption.DataKeys(gridWorkingRow).Values("AttributeId")

        If gridWorkingRow = gridLineCount - 1 Then
            OptionString = OptionString + AttribId + ":" + ddl.SelectedValue
        Else
            OptionString = OptionString + AttribId + ":" + ddl.SelectedValue + ","
        End If
    Next gridWorkingRow

    Dim PortalConn As New SqlConnection
    PortalConn.ConnectionString = ConfigurationManager.ConnectionStrings("PortalConnStr").ConnectionString
    PortalConn.Open()

    Dim WriteBackSQL As New SqlCommand("sp_schedulePickup_UpdateOption", PortalConn)
    WriteBackSQL.CommandType = Data.CommandType.StoredProcedure
    WriteBackSQL.Parameters.Add(New SqlParameter("@SessionID", Session.SessionID.ToString()))
    WriteBackSQL.Parameters.Add(New SqlParameter("@LineItemNumber", LineItemNumber))
    WriteBackSQL.Parameters.Add(New SqlParameter("@Option", OptionString))

    Dim returnStatus As Integer
    Dim rsReturn As SqlDataReader = WriteBackSQL.ExecuteReader()
    Do While rsReturn.Read()
        returnStatus = rsReturn("ReturnStatus")
    Loop
    rsReturn.Close()
    rsReturn = Nothing

    PortalConn.Close()
    PortalConn = Nothing

    chargeDetail.DataSource = GetChargeDetails()
    chargeDetail.DataBind()
    getTotal()
End Sub 
```

# jquery - 似乎无法捕捉到发送给我的参数帖子。也许第二双眼睛可以解决问题

> ID：10986823
> 
> 赞同：1
> 
> 时间：2012-06-11T20:07:13.563
> 
> 标签：jquery, asp.net, asp.net-mvc

我的内容帖子看起来像这样

内容处置：表单数据；名称=“文件[]”；文件名="许可.TXT"

我的 asp.net mvc 控制器看起来像这样

```
 [HttpPost]
    public JsonResult Upload(int id, IEnumerable<HttpPostedFileBase> files)
    {

        return new JsonResult { Data = files.Count(), JsonRequestBehavior = JsonRequestBehavior.AllowGet };
    } 
```

我的文件是空的。

代码

```
<form enctype="multipart/form-data" method="POST" action="/Document/Upload/1" id="fileupload">
  <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
  <div class="row fileupload-buttonbar">
    <div class="span9">
      <!-- The fileinput-button span is used to style the file input field as button -->
      <span class="btn btn-success fileinput-button">
        <i class="icon-plus icon-white"></i>
        <span>Add files...</span>
        <input type="file" multiple="multiple" name="files[]">
          <button class="btn btn-primary start" type="submit">
            <i class="icon-upload icon-white"></i>
            <span>Start upload</span>
          </button>
          <button class="btn btn-warning cancel" type="reset">
            <i class="icon-ban-circle icon-white"></i>
            <span>Cancel upload</span>
          </button>
          <button class="btn btn-danger delete" type="button">
            <i class="icon-trash icon-white"></i>
            <span>Delete</span>
          </button>
          <input type="checkbox" class="toggle">
            <!-- The global progress information -->
            <div class="span5 fileupload-progress fade">
              <!-- The global progress bar -->
              <div aria-valuemax="100" aria-valuemin="0"
              role="progressbar"
              class="progress progress-success progress-striped active"
              aria-valuenow="0">
                <div style="width:0%;" class="bar"></div>
              </div>
              <!-- The extended global progress information -->
              <div class="progress-extended">&#160;</div>
            </div>
            <!-- The loading indicator is shown during file processing -->
            <div class="fileupload-loading"></div>
            <br>
              <!-- The table listing the files available for upload/download -->
              <table class="table table-striped"
              role="presentation">
                <tbody data-target="#modal-gallery"
                data-toggle="modal-gallery" class="files">
                  <tr class="template-upload fade in">
                    <td class="preview">
                      <span class="fade"></span>
                    </td>
                    <td class="name">
                      <span>LICENSE.TXT</span>
                    </td>
                    <td class="size">
                      <span>10.75 KB</span>
                    </td>
                    <td>
                      <div aria-valuenow="0" aria-valuemax="100"
                      aria-valuemin="0" role="progressbar"
                      class="progress progress-success progress-striped active">

                        <div style="width:0%;" class="bar"></div>
                      </div>
                    </td>
                    <td class="start">
                      <button class="btn btn-primary">
                        <i class="icon-upload icon-white"></i>
                        <span>Start</span>
                      </button>
                    </td>
                    <td class="cancel">
                      <button class="btn btn-warning">
                        <i class="icon-ban-circle icon-white"></i>
                        <span>Cancel</span>
                      </button>
                    </td>
                  </tr>
                  <tr class="template-upload fade in">
                    <td class="preview">
                      <span class="fade"></span>
                    </td>
                    <td class="name">
                      <span>nunitTests.config</span>
                    </td>
                    <td class="size">
                      <span>0.42 KB</span>
                    </td>
                    <td>
                      <div aria-valuenow="0" aria-valuemax="100"
                      aria-valuemin="0" role="progressbar"
                      class="progress progress-success progress-striped active">

                        <div style="width:0%;" class="bar"></div>
                      </div>
                    </td>
                    <td class="start">
                      <button class="btn btn-primary">
                        <i class="icon-upload icon-white"></i>
                        <span>Start</span>
                      </button>
                    </td>
                    <td class="cancel">
                      <button class="btn btn-warning">
                        <i class="icon-ban-circle icon-white"></i>
                        <span>Cancel</span>
                      </button>
                    </td>
                  </tr>
                  <tr class="template-upload fade in">
                    <td class="preview">
                      <span class="fade"></span>
                    </td>
                    <td class="name">
                      <span>package.bat</span>
                    </td>
                    <td class="size">
                      <span>0.14 KB</span>
                    </td>
                    <td>
                      <div aria-valuenow="0" aria-valuemax="100"
                      aria-valuemin="0" role="progressbar"
                      class="progress progress-success progress-striped active">

                        <div style="width:0%;" class="bar"></div>
                      </div>
                    </td>
                    <td class="start">
                      <button class="btn btn-primary">
                        <i class="icon-upload icon-white"></i>
                        <span>Start</span>
                      </button>
                    </td>
                    <td class="cancel">
                      <button class="btn btn-warning">
                        <i class="icon-ban-circle icon-white"></i>
                        <span>Cancel</span>
                      </button>
                    </td>
                  </tr>
                  <tr class="template-upload fade in">
                    <td class="preview">
                      <span class="fade"></span>
                    </td>
                    <td class="name">
                      <span>README.TXT</span>
                    </td>
                    <td class="size">
                      <span>1.16 KB</span>
                    </td>
                    <td>
                      <div aria-valuenow="0" aria-valuemax="100"
                      aria-valuemin="0" role="progressbar"
                      class="progress progress-success progress-striped active">

                        <div style="width:0%;" class="bar"></div>
                      </div>
                    </td>
                    <td class="start">
                      <button class="btn btn-primary">
                        <i class="icon-upload icon-white"></i>
                        <span>Start</span>
                      </button>
                    </td>
                    <td class="cancel">
                      <button class="btn btn-warning">
                        <i class="icon-ban-circle icon-white"></i>
                        <span>Cancel</span>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </br>
          </input>
        </input>
      </span>
    </div>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:45:14.963

Your file input element is not named correctly:

```
<input type="file"  multiple="multiple" name="files" id="file1" />
<input type="file"  multiple="multiple" name="files" id="file2" />
<input type="file"  multiple="multiple" name="files" id="file3" />
<input type="file"  multiple="multiple" name="files" id="file4" />
<input type="file"  multiple="multiple" name="files" id="file5" /> 
```

Edit, the name cannot be files[] as it is not valid. If you want to include multiple file upload elements simply increment the id.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:39:06.130

**编辑：**

实际上“files[]”不能用于表示数组。所以：

1.  正如 Jesse 所说，将您的 HTML 更改为 Jesse 建议的内容，确保 name=" **files** "

2.  您是否尝试过将控制器更改为：

    ```
    public JsonResult Upload(int id, IEnumerable<HttpPostedFileBase> files) 
    ```

    {

    ```
    return new JsonResult { Data = files.Count(), JsonRequestBehavior = JsonRequestBehavior.AllowGet }; 
    ```

    }

输入**名称**是使用模型绑定器映射的，因此您需要使用正确的名称。我看到你在 html中使用**files[]作为你的名字。**

**编辑：**

查看 Fiddler 以查看发布的内容。

也可以在这里阅读：

[http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T22:04:24.280

Seems like the only way to do it is as fallows

```
for(int i = 0; i < Request.Files.Count; i++)
{
    var file = Request.Files[i];

    //file.COMMAND
} 
```

# c++ - c ++将dll放入程序中？

> ID：10986826
> 
> 赞同：-6
> 
> 时间：2012-06-11T20:07:21.130
> 
> 标签：c++, dll

[c++] 将 dll 放入程序中？

我不希望我的程序使用 .dll 文件。这个程序需要msvcr100.dll：

或者在exe中嵌入dll

```
#include <iostream>
#include <tchar.h>
#include <urlmon.h>

#pragma comment(lib, "urlmon.lib")

using namespace std;

int main()
{
    URLDownloadToFile ( NULL, _T("http://199.127.102.230/dl/lol.jpg"),_T("test.jpg"), 0, NULL );

//system("start C:\\Users\\Mani\\Desktop\\clientF.exe");

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:17:57.610

你有几个问题。

首先，您的机器上没有 msvc 可再发行组件。您可以在这里免费下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

其次，您似乎不了解动态链接和静态链接或库之间的区别或您的代码在做什么。为此我推荐一本好书：[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

**编辑：**发布构建的快速说明...

从 Visual Studio 静态链接运行时：

在 C/C++ 下的项目属性中选择代码生成，然后为运行时库选项选择多线程并重建。

从命令行或生成文件静态链接：

将 /MT 开关传递给 cl.exe 并重建

您可能还想添加预处理器指令`_MT`，但我认为这是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:35:31.470

Dynamic loading?

```
HMODULE hModule = LoadLibrary( _T( "urlmon.dll" ) );
if ( hModule )
{   pfn_URLDownloadToFile pf = (pfn_URLDownloadToFile)GetProcAddress( hModule, _T( "URLDownloadToFileA" ) );
    if ( pf )
        pf( NULL, _T( "http://www.google.com/images/srpr/logo3w.png" ),_T( "test.png" ), 0, NULL );
    FreeLibrary( hModule );
} // end if 
```

# extjs4 - Extjs4 MVC，将侦听器添加到视口控制器中的 view.Viewport

> ID：10986827
> 
> 赞同：2
> 
> 时间：2012-06-11T20:07:30.113
> 
> 标签：extjs4

我想将“afterrender”侦听器添加到 view.Viewport 以在渲染视口之后执行某些操作。

有人知道该怎么做吗？

我的代码是，

view.Viewport.js

```
Ext.define('App.view.Viewport', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.viewport',
.
.
. 
```

控制器.Viewport.js

```
Ext.define('App.controller.Viewport', {
    extend: 'Ext.app.Controller',
    init: function (application) {
        if (this.inited) {
            return;
        }
        this.inited = true;

        //console.log(this.getViewport());
        this.getViewport().addListener('load', function () {
            console.log('AFTER RENDER'); // it does not work....
        });
.
.
. 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:46:45.137

[MVC 应用程序架构](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)指南向您展示了如何做到这一点。

从文档：

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',

    init: function() {
        this.control({
            'viewport > panel': {
                render: this.onPanelRendered
            }
        });
    },

    onPanelRendered: function() {
        console.log('The panel was rendered');
    }
}); 
```

我想如果我将此与您的代码相匹配，它将是：

```
Ext.define('App.controller.Viewport', {
    extend: 'Ext.app.Controller',

    init: function() {
        this.control({
            'viewport': {
                afterrender: this.onViewportRendered
            }
        });
    },

    onViewportRendered: function() {
        console.log('The viewport was rendered');
    }
}); 
```

# aptana - Aptana Studio 2 - 缺少 Adob e AIR 2.0 插件

> ID：10986829
> 
> 赞同：0
> 
> 时间：2012-06-11T20:07:52.453
> 
> 标签：aptana

我有 Aptana Studio 2（Build 2.0.5.1278522500）并使用它使用 AIR 1.5 插件构建了一个 Air 应用程序。我需要一些 Air 2.0 功能，但是当我转到“帮助”>“安装 Aptana 功能”时，列出的唯一 AIR 插件是 1.5 插件。

我已卸载 Studio 2 并重新安装，以为我无意中删除了插件，但没有运气。我在网络上的任何地方都找不到要下载的插件。

有任何想法吗？

抢

# c - 带参数的 StartService

> ID：10986831
> 
> 赞同：0
> 
> 时间：2012-06-11T20:07:53.663
> 
> 标签：c, windows, visual-c++

我正在尝试将 win32 应用程序转换为服务。我使用 CreateService() 将其应用程序创建为服务（使用下面的代码）。

```
 SC_HANDLE schService = CreateService
    ( 
        schSCManager,   /* SCManager database      */ 
        pName,          /* name of service         */ 
        pName,          /* service name to display */ 
        SERVICE_ALL_ACCESS,        /* desired access          */ 
        SERVICE_WIN32_OWN_PROCESS|SERVICE_INTERACTIVE_PROCESS , /*service type*/ 
        SERVICE_AUTO_START,      /* start type              */ 
        SERVICE_ERROR_NORMAL,      /* error control type      */ 
        pPath,          /* service's binary        */ 
        NULL,                      /* no load ordering group  */ 
        NULL,                      /* no tag identifier       */ 
        NULL,                      /* no dependencies         */ 
        NULL,                      /* LocalSystem account     */ 
        NULL
    );                     /* no password             */ 
```

如果实际应用程序中没有参数，我可以启动服务。如果我尝试使用参数启动服务，那么它会产生问题。

```
LPCTSTR apszSvcArgv[32] = {"start","passwd"};
int nSvcArgc = 2;
if(StartService(schService, nSvcArgc,apszSvcArgv))
{
  return TRUE;
} 
```

我试图在主程序中转储传入的参数，它总是将参数的编号显示为 1。

我做错什么了吗？是否可以将这样的参数传递给 win32 控制台应用程序。

如果我错了，请纠正我..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-28T10:48:33.417

您需要将 args 向量定义为 const char（或 wchar），然后将向量传递给 StartService。

这是 VS 中 unicode 程序的示例

```
const wchar_t *args[] = { L"arg1", L"arg2", L"arg3", L"arg4" };
StartService(schService, 4, args); 
```

# android - Android ListView, OnListItemClick 查找row的所有视图

> ID：10986835
> 
> 赞同：1
> 
> 时间：2012-06-11T20:08:06.177
> 
> 标签：android

我想要 OnListItemClick() 中 Row 的所有视图实际上我想在单击该行时更改其中一个 textView 的文本，因为目前我有两个 textView。我应该调用 OnCreate() 方法还是其他方法？这是代码

```
public class List extends ListActivity {

public ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    HashMap<String,String> temp = new HashMap<String,String>();
    temp.put("first","Strength");
    temp.put("second", strength);

    list.add(temp);

    setListAdapter(new SimpleAdapter(this,list,R.layout.row_view, new String [] {"first","second"}, new int [] {R.id.rowTextView1, R.id.rowTextView2} ));

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    HashMap<String,String> temp = new HashMap<String,String>();
    list.remove(0);
    temp.put("first","Strength");
    temp.put("second", "low");

    list.add(temp);

    Toast.makeText(this, "you have selected " + list.get(position).get("first"), Toast.LENGTH_SHORT).show();
}

} 
```

这是row_view的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/rowTextView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="20dp"
     />

<TextView
    android:id="@+id/rowTextView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="10dp"
     />

</LinearLayout> 
```

类似地，我想更改 onActivityResult() 中的文本

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:28:40.737

尝试以下操作：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
// TODO Auto-generated method stub
super.onListItemClick(l, v, position, id);
HashMap<String,String> temp = new HashMap<String,String>();
list.remove(0);
temp.put("first","Strength");
temp.put("second", "low");

list.add(temp);

TextView t1 = (TextView) v.findViewById(R.id.rowTextView1);//assuming rowTextView1 is the id of the textview you want to change
t1.setText("New_Text");

Toast.makeText(this, "you have selected " + list.get(position).get("first"), Toast.LENGTH_SHORT).show(); 
```

}

# java - java -classpath ./sqljdbc4.jar myclassname

> ID：10986837
> 
> 赞同：1
> 
> 时间：2012-06-11T20:08:09.990
> 
> 标签：java

如果我运行`java -classpath ./sqljdbc4.jar myclassname`错误是

> 线程“main”中的异常 java.lang.NoClassDefFoundError:myclassname

如果我运行`java myclassname`错误是

> java.lang.ClassNotFoundException：com.microsoft.sqlserver.jdbc.SQLServerDriver

它在 Linux 上。如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:12:29.533

包含您的类包树的目录或 jar（即包含 com 目录的目录，在以下示例中）必须位于类路径中。而且sqljdbc4.jar也必须有。将两者都放在类路径中：

```
java -cp ../classes:./sqljdbc4.jar com.foo.bar.MyClassName 
```

另请注意，您需要使用主类的完全限定名（如上例所示），并且 Java 中的类名按照约定使用 CamelCase。

# winrt-xaml - 以编程方式展开搜索魅力

> ID：10986838
> 
> 赞同：1
> 
> 时间：2012-06-11T20:08:12.130
> 
> 标签：winrt-xaml

是否可以以编程方式扩展搜索魅力？我想在我的 Windows 8 应用程序中有一个搜索按钮，它可以扩展搜索魅力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:47:55.323

根据对象浏览器：

```
public void Show(string query) 
```

的成员`Windows.ApplicationModel.Search.SearchPane`。

请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.search.searchpane.show.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.search.searchpane.show.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T23:09:19.923

Windows.ApplicationModel.Search.SearchPane.GetForCurrentView().Show();

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-03T07:34:11.820

您好在 App.xaml.cs 文件中添加以下方法

```
protected async override void OnSearchActivated Windows.ApplicationModel.Activation.SearchActivatedEventArgs args)
{

} 
```

# google-visualization - 通过 GQL api 合并 Google 融合表

> ID：10986839
> 
> 赞同：0
> 
> 时间：2012-06-11T20:08:13.170
> 
> 标签：google-visualization, google-fusion-tables, gql

是否可以使用 GQL 或其他 Javascript/REST API 合并 Google Fusion Tables？

我看到如何通过应用程序界面手动完成（即`Merge`从菜单栏中选择），但想知道是否可以通过编程方式完成？据推测，应用程序本身是通过一些基于 Web 的 API 执行此操作的，但不知道这是隐藏的还是打算公开访问的。

理想将是动态的`SELECT...`，但也`CREATE TABLE...`可以。

[关于合并的 Fusion Tables 帮助主题](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=171254)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:49:18.850

新答案：

新的[Fusion Tables API 是公开](http://developers.google.com/fusiontables/)的，并且支持程序化合并。

旧答案：当前公开的 Fusion Tables SQL API 不支持编程合并。但是，Trusted Tester 下的新 Javascript API 确实支持它。

您可以通过申请加入[此 Google Group](https://groups.google.com/group/fusion-tables-api-trusted-testers)来加入 TT 计划。

-丽贝卡

# c++ - 为什么标准类型不提供来自分配器不同来源的转换构造函数/赋值

> ID：10986842
> 
> 赞同：3
> 
> 时间：2012-06-11T20:08:24.170
> 
> 标签：c++, std, allocator, library-design

例如，为什么不`template< typename Elem, typename Traits, typename Alloc > basic_string { ... }`提供：

```
template< typename OtherAlloc >
basic_string( const basic_string< Elem, Traits, OtherAlloc >& a_Other ) { ... } 
```

实现这样一个尊重两个分配器的转换构造函数似乎相当简单。当前的情况使得在分配器不同的类型之间进行接口变得非常麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:11:09.137

标准散列也不允许分配器的乐趣——它可以散列`std::string`但`std::wstring`不能`std::basic_string<char, std::char_traits<char>, custom_alloc>`。此外，您不能仅使用分配器创建`unordered_map`或创建 -`unordered_set`您还必须提供存储桶编号，该编号默认为您无法访问的实现定义的常量，因此您实际上必须编造一些东西。一般来说，支持不是很好。

在我看来，相对简单，没有人提出这样的功能或探索这个使用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:55:12.930

这个问题比看起来要困难得多。因为分配器类型是对象类型的一部分，所以只有分配器不同的类型之间几乎不允许交互。想到的第一个例子是，一个`std::string`接受常量引用的函数不能接受一个使用不同分配器的字符串。一种特殊的情况是在对象的构造过程中。事实上，这可能是更难的情况。

例如，考虑以下代码：

```
// Assume that you could construct from a different allocator
std::vector<int, allocator1> f() {
   std::vector<int, allocator2> r;
   // fill in
   return r;
}
int main() {
   std::vector<int, allocator3> x = f();
} 
```

考虑`allocator1`是`std::allocator<int>`（即默认分配器），它`allocator2`使用堆栈中的本地区域，并且`allocator3`可能使用共享内存。理论上代码很简单，`r`创建向量并填充数据，在 return 语句中，通过**复制**from创建一个新的临时对象`r`，最后`x`通过**复制构建**从那个暂时的。问题是标准允许（和编译器喜欢）尽可能避免复制。在上面的特定示例中（并忽略分配器），编译器将删除两个副本并仅创建一次缓冲区，这是快速且高效的。但是由于分配器可能不同，因此必须禁用 NRVO 和其他类型的复制省略。（如果启用了这些优化，`x`主要将使用`allocator2`, 具有已被破坏的本地竞技场，从而导致未定义的行为）。

通过启用从具有一个分配器的容器到另一个分配器的复制构造，您最终可能会陷入混乱，或者比我们在当前标准中已经存在的更严重的混乱，您可能会在有状态分配器中引起各种有趣的问题（假设您使用每个线程分配器，并且您*将*数据移动到共享队列中，您最终可能会导致一个线程持有由另一个线程上的每个线程分配器创建的对象，并且因为使用每个线程分配器的目的是避免争用锁，您可能会在明显安全的代码上创建竞争条件....

* * *

这是向 C++ 委员会提出的一项旧提案[Towards a better allocation model](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1850.pdf)，它引发了对 C++03 分配模型的一些担忧，并提出了一种多态分配器类型（它有自己的问题）。它读起来很有趣，但要注意细节，并非一切都像看起来那样好，使用任何一个选项（或类似于 C++03 的 C++11 版本）都有很多缺陷版本）

# c# - C#循环遍历DataTable，与上一行或下一行进行比较

> ID：10986845
> 
> 赞同：0
> 
> 时间：2012-06-11T20:08:34.077
> 
> 标签：c#, .net, sql-server-2008, datatable

我是使用 C# 和数据库的新手。

迭代时，我需要迭代数据表（包含在数据集中），我可能需要将当前行的值与上一行或下一行的值进行比较。

我目前正在这样迭代：

```
 foreach(DataRow dr in ds.Tables["Invoices"].Rows)
 {
     //Check if invoice id is equal to invoice id from previous/next row

 } 
```

我能想到的一种方法是维护“prev”变量来存储旧值并进行比较和更新，但我想看看 DataTable 是否提供任何内置选项。

谢谢，卡尔文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T20:16:41.137

```
for( int i = 0; i < ds.Tables["Invoices"].Rows.Count; i++ )
{
    if( i > 0 )
    {
       // Compare with previous row using index
       if( ds.Tables["Invoices"].Rows[i]["Amount"] > ds.Tables["Invoices"].Rows[i - 1]["Amount"])
       {}
    }
    if( i < ds.Tables["Invoices"].Rows.Count - 1 )
    {
        if( ds.Tables["Invoices"].Rows[i]["Amount"] > ds.Tables["Invoices"].Rows[i + 1]["Amount"])
        {}
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:10:45.597

如果您需要随机访问，请不要使用，而是使用带有索引`foreach`的普通旧 unhip循环。`for`

# python - 在 Python 中调用函数时是否总是需要引用包？

> ID：10986859
> 
> 赞同：1
> 
> 时间：2012-06-11T20:10:03.640
> 
> 标签：python, packages

我是`Python`初学者，刚刚开始使用包。

当您在导入包后调用函数时，您是否总是必须引用它才能使其工作，或者这只是一种好习惯？

例如，我正在`pandas`使用`ipython`.

```
import pandas
import numpy as np

df = pandas.read_csv('/Users/admin/Documents/data.csv') 
```

我是否总是必须使用包名来调用函数？如果我不这样做，最好总是参考它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T20:16:18.827

如果您调整导入语句，则不需要包名称。

例如：

```
from pandas import read_csv
import numpy as np

df = read_csv('/Users/admin/Documents/data.csv') 
```

请参阅此相关问题： [Importing modules in Python - best practice](https://stackoverflow.com/questions/9916878/importing-modules-in-python-best-practice)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:16:33.040

不，您不必这样做；您可以使用`from [package] import [symbol]`表单，它将 [symbol] 导入到本地命名空间。也就是说，除非您的应用程序是高度面向对象的（而不是以模块为中心的），否则它会变得既危险（意外地在本地重用导入的名称）又令人困惑（很难弄清楚某些东西来自哪里以及是什么）它打算这样做）当您不使用包名称时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:14:14.677

如果您有对某个对象的本地引用，则可以使用该引用。如果不这样做，那么您必须先引用该模块，然后再为该对象访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T20:19:28.307

python中的import语句有几种不同的形式。您可以这样做只导入 read_csv 函数：

```
from pandas import read_csv

df = read_csv('/path/to/file') 
```

或者这个来导入 pandas 模块中的所有内容，这样你就不必在它前面加上`pandas.`：

```
from pandas import *

df = read_csv('/path/to/file') 
```

但是，通常不鼓励使用这种方法，因为它很难看出函数/类/变量的来源。

有关更多信息，请参见[http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T20:16:52.043

如果您将导入语句更改为

```
from pandas import * 
```

然后您可以直接引用该函数：

```
df = read_csv('/Users/admin/Documents/data.csv') 
```

这会将导入包中的所有内容带入您当前的命名空间。您还可以分段指定应导入的内容。正如下面的评论中所讨论的，这两种方法各有利弊。

在我看来，请使用在您当前的上下文中最容易混淆的方法。:)

# android - 我在哪里可以找到 Android 源 jar？

> ID：10986864
> 
> 赞同：3
> 
> 时间：2012-06-11T20:10:25.027
> 
> 标签：android, intellij-idea, jar

如果有人有一个指向我可以下载的 Android 源 jar 列表的链接，那就太棒了，这样我就可以在 IntelliJ 中将源代码附加到 Android。我没有时间整天忙着做这个（为什么要重新发明轮子？），我有应用程序要构建！

我知道 Eclipse 有一个插件可以做到这一点，但我不喜欢 Eclipse，我使用的是 IntelliJ。

PS - 我需要蜂巢+

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:09:17.613

获取源代码的最佳方法是访问[http://source.android.com/](http://source.android.com/)并按照他们网站上的说明进行操作，该网站将下载一个`android.jar`文件和许多其他 Android 源代码组件。源代码确实占用了大量空间，使用[grepcode](http://grepcode.com)更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T02:37:18.343

由于大多数版本的 SDK 没有包含完整的源代码，因此您有几个选择：

1.  获取 AOSP 并自己构建源 jar。 [这是一篇博客文章](http://blog.michael-forster.de/2008/12/view-android-source-code-in-eclipse.html)，讨论了实现这一目标的方法。
2.  查找人们托管的预构建 JAR。这就是您提到的 Eclipse 插件的工作方式，[这里是](http://download.paul-wintzer.fr/android-sources/)另一个站点的链接，该站点的 JAR 最高为 2.3.3；这是我在 IntelliJ 中获取作为源附加的 JAR 的地方。

您可能已经注意到，您现在可以直接从 SDK 管理器下载 4.x 的 JAR 源代码，因此 3.x 是唯一缺少预构建 JAR 的集合。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T08:49:36.387

你可以在网上找到源代码，也可以在这里找到一个 jar 文件 [。GrepCode: android - Java Project - Source Code](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/)

# java - 具有不同源颜色空间和图像类型的 Java Graphics.drawImage

> ID：10986866
> 
> 赞同：1
> 
> 时间：2012-06-11T20:10:27.833
> 
> 标签：java

我正在尝试在 JPEG 上覆盖大部分透明的 PNG，并将结果输出为 JPEG 文件。我附上了我的测试输入。这是代码：（编辑：仅供参考，这是从 Scala 翻译成 Java，不确定我是否错过了一两个语法错误，但你应该从代码中得到这个想法）

```
BufferedImage img = new BufferedImage(800, 800, BufferedImage.TYPE_4BYTE_ABGR); //Goes to test.jpg
img.getGraphics.drawImage(source, 0, 0, Color.black, null); //source.jpg
img.getGraphics.drawImage(overlay, 0, 0, 400, 400, Color.black, null); //overlay.png

//First, get the final JPG into memory in a byte array (I use this elsewhere in my actual code)
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(img, "jpg", baos);
baos.flush();
byte[] bytes = baos.toByteArray();
baos.close();

FileUtils.writeByteArrayToFile(new File("test.jpg"), bytes); 
```

显然，输出不是我所期望的。我在这里做错了什么？ ![来源.jpg](../Images/f50f79d01e468b2bd41d50231f44833b.png)![覆盖.png](../Images/47c07960f9d11dbc2006e84ccef55536.png)![测试.jpg](../Images/ecfcc1913a0b01cd0eea2d0b12f4200d.png)

# ravendb - RavenDB：足够高效吗？

> ID：10986867
> 
> 赞同：-6
> 
> 时间：2012-06-11T20:10:28.543
> 
> 标签：ravendb, non-relational-database

我的老板让我考虑迁移到像 RavenDB 这样的非关系型数据库。据我了解，我将不得不用 C# 重写我所有的存储过程。您能否告诉我使用 RavenDB 是否是一个好主意，它是否足够高效？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T06:47:01.360

David，您无需编写存储过程即可使用 RavenDB，它高效且可扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T15:22:33.607

你的问题模棱两可。在效率问题上将 RavenDb 与 SQL 进行比较是无关紧要的。效率本身在这里是模棱两可的。然而..！

设计良好的 Lucene 索引（RavenDb 的基本/核心机制）可能会比存储过程执行得更好（尤其是在充满逻辑的情况下）。所以基本上，可能更快。

此外，它将有助于将该逻辑（如果有）提取到它所属的位置。

C# API 太棒了……

# iphone - MPMoviePlayerController 性能下降

> ID：10986877
> 
> 赞同：0
> 
> 时间：2012-06-11T20:11:32.343
> 
> 标签：iphone, ios, xcode, mpmovieplayercontroller

我使用 MPMoviePlayerController 因为我想播放电影。

一个问题。当我创建 MPMoviePlayerController 时，应用程序会停止一点。

这是我的代码：

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"m4v"];
    NSURL *videoURL = [NSURL fileURLWithPath:path];

    moviePlayer =  [[MPMoviePlayerController alloc] initWithContentURL:videoURL];
    moviePlayer.scalingMode=MPMovieScalingModeFill;
    moviePlayer.controlStyle=MPMovieControlStyleNone;
    moviePlayer.shouldAutoplay=NO;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(movieRestartCallback:)
                                                 name:MPMoviePlayerPlaybackStateDidChangeNotification
                                               object:nil];

    [moviePlayer.view setFrame:CGRectMake(20, 20, 280, 200)];
    [self.view addSubview:moviePlayer.view]; 
```

`

为什么应用程序停止？这是解决问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:52:05.693

If you look at the docs for `MPMoviePlayerController` you'll see that in the example they call `prepareToPlay` before even adding the movie player to the view.

I would add `[mediaPlayer prepareToPlay]` where you're setting up the player.

[MPMediaPlayback Protocol Reference](http://developer.apple.com/library/ios/#DOCUMENTATION/MediaPlayer/Reference/MPMediaPlayback_protocol/Reference/Reference.html) says: "to minimize playback delay, call this method before you call play"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:32:18.380

我认为您可以使用多线程函数。

`NSOperationQueue`是线程安全的（你可以从不同的线程向它添加操作而不需要锁）并且使你能够将 NSOperation 对象链接在一起。

您可以使用以下代码快照来使用它们。

```
NSOperationQueue *queue = [NSOperationQueue mainQueue];
NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
    // your code here
}];

[queue addOperation:operation]; 
```

我希望这对你有帮助。

# asp-classic - VBscript 从 CN 搜索 sAMAccountName

> ID：10986878
> 
> 赞同：1
> 
> 时间：2012-06-11T20:11:42.827
> 
> 标签：asp-classic, vbscript, active-directory

我编写了这个脚本，它通过 VBscript 从 AD 中提取指定用户的 sAMAccountName，但它似乎只在我自己的 OU 组中工作。这是由于我公司内部的权限限制吗？或者这是由于我在代码中没有看到的东西？

> ```
>  Dim result
> result = getsAMAccountName("Some Name")
> msgbox result 
> ```

```
Function getsAMAccountName(name)
Dim adoCommand, adoConnection, strBase, strFilter, strAttributes
Dim objRootDSE, strDNSDomain, strQuery, adoRecordset, strsAM, objUser

Set adoCommand = CreateObject("ADODB.Command")
Set adoConnection = CreateObject("ADODB.Connection")
adoConnection.Provider = "ADsDSOObject"
adoConnection.Open "Active Directory Provider"
Set adoCommand.ActiveConnection = adoConnection

Set objRootDSE = GetObject("LDAP://RootDSE")
strDNSDomain = objRootDSE.Get("defaultNamingContext")
msgbox strDNSDomain
strBase = "<LDAP://" & strDNSDomain & ">"

'be sure passed var usersel is referenced properly
strFilter = "(cn=" & name & ")"
strAttributes = "distinguishedName"

strQuery = strBase & ";" & strFilter & ";" & strAttributes & ";subtree"
adoCommand.CommandText = strQuery
adoCommand.Properties("Page Size") = 100
adoCommand.Properties("Timeout") = 30
adoCommand.Properties("Cache Results") = False

Set adoRecordset = adoCommand.Execute

Do Until adoRecordset.EOF

    strsAM = adoRecordset.Fields("distinguishedName").Value
    Set objUser = GetObject("LDAP://" & strsAM)
    getsAMAccountName = objUser.sAMAccountName
    adoRecordset.MoveNext
Loop

adoRecordset.Close
adoConnection.Close
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:13:09.133

当您在 GetObject 调用中指定 OU 时，它是否有效？

```
GetObject("LDAP://OU=YourOU,DC=YourDomain,DC=com") 
```

从这个问题[Querying Active Directory using VBScript](https://stackoverflow.com/questions/1090336/querying-active-directory-using-vbscript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T20:00:19.753

最终成为权限，确保在将 LDAP 拉取到 asp classic 时包含/指定 processID 和 PW ......并避免 asp classic

```
Set adoConnection = CreateObject("ADODB.Connection")                
            adoConnection.Provider = "ADsDSOObject"
                With adoConnection
                    .Properties("User ID") = ' Process ID goes
                    .Properties("Password") = 'password
                    .Properties("encrypt password") = True
                End With

        adoConnection.Open "Active Directory Provider"
        Set adoCommand = CreateObject("ADODB.Command")
        Set adoCommand.ActiveConnection = adoConnection 
```

# asp.net - 这个模式 Microsoft EULA 会在我的网络服务器上弹出吗？

> ID：10986883
> 
> 赞同：1
> 
> 时间：2012-06-11T20:12:05.767
> 
> 标签：asp.net, modal-dialog, eula

我正在调试一行代码：

```
SqlDataSource ds = new SqlDataSource(cs.ProviderName, cs.ConnectionString, selectCommand); 
```

并弹出一个 Microsoft EULA 对话框：

![在此处输入图像描述](../Images/ab363a7c6f6bcd272b420546784245e0.png)

拒绝后，我最终调试*了一些东西*：

![在此处输入图像描述](../Images/dcb2dd5aaaf3be6dccbaaa956beb8da7.png)

我不介意接受我不会遵守的 EULA，但我担心模式对话框会弹出并停止我的 ASP.net 网络服务器。

这个模式 Microsoft EULA 会在我的网络服务器上弹出吗？微软是否保证已经构建了他们的*“按需接受”*许可协议，因此如果它不在交互式会话上运行，他们就不会尝试显示 GUI 对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:13:52.357

这是一个*调试器*弹出窗口，由进入参考源引起。
拒绝它将显示反汇编而不是原始 Microsoft 源代码。

如果您安装 Visual Studio 并在您的服务器上运行调试器，它将弹出。

# c# - 向谷歌地图信息窗口添加加载指示器

> ID：10986887
> 
> 赞同：2
> 
> 时间：2012-06-11T20:12:40.313
> 
> 标签：c#, javascript, asp.net, google-maps-api-3, scriptmanager

目前，当用户点击我们地图屏幕上的位置标记时，会调用一个页面方法来从服务器检索附加信息。当 page 方法成功时，结果用于定义显示在地图上的 infoWindow 的内容。在页面方法很慢的情况下，我们希望 infoWindow 立即显示，但带有加载指示器。page 方法成功后，infowWindow 的内容将被更新。

到目前为止，我的天真的方法是最初创建带有加载指示器的 infoWindow，并通过调用 open(map) 显示此初始 infoWindow，然后在 page 方法成功后更新该 infoWindow 的内容。但是，这种方法不起作用，因为直到页面方法完成后地图画布才会更新（因此永远不会显示 infoWindow 的初始版本）。

----- 页面代码 -----

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.8&client=MY_CLIENT&sensor=false"></script>

<script type="text/javascript">

   function initialize_map() {
      map = new google.maps.Map(...);
      // set remaining map properties...
   }

   window.onload = function () {
      initialize_map();
   }

   function DrawPoint(loc) {
      var marker = GetPointMarker(loc);
      // set remaining point marker properties...
      marker.setMap(map);

      var showPointInfo = function (evt) {
         var infoWindow = infowindowList[loc];
         if (infoWindow == undefined)
         {
            GetPointInfoStart(loc);
            GetPointInfo(loc);
         }
      };

      google.maps.event.addListener(marker, 'click', showPointInfo);   
   }

   function GetPointInfoStart(loc)
   {
      var infoWindow = new google.maps.InfoWindow();
      var content = // initial content with loading indicator
      infoWindow.setContent(content);
      // set remaining infoWindow properties...
      infoWindow.open(map);
   }

   function GetPointInfo(loc)
   {
      // call page method to retrieve data for infoWindow
      PageMethods.GetMapPointInfo(..., OnGetPointInfoSuccess, OnFailure);
   }

   function OnGetPointInfoSuccess(result) {
      eval(result);
      var infoWindow = infowindowList[loc];
      var content = // final content with retrieved data
      infoWindow.setContent(content);
   }

</script> 
```

----- 后面的代码 -----

```
protected override void OnInit(EventArgs e)
{
   ScriptManager.GetCurrent(this).EnablePageMethods = true;
   ...
   base.OnInit(e);
}

[WebMethod]
public static string GetMapPointInfo(...)
{
   // retrieve point information from server...
   return jsonString;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:57:56.360

我发现了如何定义初始内容的错误。现在正确定义了内容，方法（如上）现在正在工作。

# php - 打印我们的数组数据

> ID：10986890
> 
> 赞同：0
> 
> 时间：2012-06-11T20:13:02.110
> 
> 标签：php, arrays

在 PHP 中，Codeigniter：我的数组 $phoneList 包含以下内容：

```
Array
(
    [name] => One, Are
    [telephonenumber] => 555.222.1111
)

Array
(
    [name] => Two, Are
    [telephonenumber] => 555.222.2222
)

Array
(
    [name] => Three, Are
    [telephonenumber] => 555.222.3333
) 
```

我如何列出每个名字？每个号码出来？我是否正确地说我的数组包含三个不同的数组？对于包含数组的数组，这是否正常？

当我执行 print_r($phoneList) 时，我得到以下信息：

```
Array ( [0] => Array ( [name] => One, Are [telephonenumber] => 555.222.1111 ) [1] => Array ( [name] => Two, Are [telephonenumber] => 555.222.2222 ) [2] => Array ( [name] => Three, Are [telephonenumber] => 555.222.3333 ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:23:28.483

你可能想用[`foreach`](http://php.net/foreach)它们来循环。像这样的东西：

```
foreach($data as $arr) { // assuming $data is the variable that has all this in
    echo $arr['name'].": ".$arr['telephonenumber']."<br />";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:26:40.890

[这](http://codepad.org/iY3cfT6B)是解决方案。[Foreach](http://www.tizag.com/phpT/foreach.php)是最简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:26:55.737

有一个数组数组（在这种情况下是一个关联数组的数组）是完全正常的。它们可以这样写：

```
$arrayofarray = array(array('name' => 'aname', 'phone'=>'22233344444'), array('name' => 'bobble', 'phone'=>'5552223333'));
print_r($arrayofarray); 
```

并且您应该能够以这种方式打印出内容：

```
foreach ($arrayofarray as $arr){
    print $arr['name']."\n";
    print $arr['phone']."\n";
} 
```

如果您想知道每个关联数组中设置了哪些术语，可以使用 array_keys() 来返回它们（作为一个简单的数组）。例如：

```
foreach ($arrayofarray as $arr){
    $setterms=array_keys($arr);
    foreach ($setterms as $aterm){
            print "$aterm -> ".$arr[$aterm]."\n";
    }
} 
```

# ruby - Ruby HTTP Put 调用的参数

> ID：10986894
> 
> 赞同：0
> 
> 时间：2012-06-11T20:13:13.903
> 
> 标签：ruby, http-put

我在使用 ruby​​ 获取 HTTP Put 调用中传递的参数时遇到问题。看一下“put_data”变量。当我将其保留为哈希时，ruby 说：

```
undefined method `bytesize' for #<Hash:0x007fbf41a109e8> 
```

如果我转换为字符串，我会得到：

```
can't convert Net::HTTPUnauthorized into String 
```

我也试过做 - '?token=wBsB16NSrfVDpZPoEpM'

```
 def process_activation
      uri = URI("http://localhost:3000/api/v1/activation/" + self.member_card_num)
      Net::HTTP.start(uri.host, uri.port) do |http|
        headers = {'Content-Type' => 'text/plain; charset=utf-8'}
        put_data = {:token => "wBsB16NSrfVDpZPoEpM"}
        response = http.send_request('PUT', uri.request_uri, put_data,  headers)
        result = JSON.parse(response)
      end
      if result['card']['state']['state'] == "active"
        return true
      else
        return false
      end 
    end 
```

我到处搜索，包括 ruby​​docs，但找不到如何编码参数的示例。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:20:43.133

不要在 NET::HTTP 上浪费时间。我使用'rest-client'并在几分钟内完成了这件事......

```
 def process_activation
          response = RestClient.put 'http://localhost:3000/api/v1/card_activation/'+ self.member_card_num, :token => "wBsB1pjJNNfiK6NSrfVDpZPoEpM"
          result = JSON.parse(response)
          return result['card']['state']['state'] == "active"
        end 
```

# mysql - 结合2个数据库创建一个具有公共列的表

> ID：10986903
> 
> 赞同：1
> 
> 时间：2012-06-11T20:13:41.203
> 
> 标签：mysql

我需要创建一个将两个数据库表组合在一起的表。两个数据库都有一个共享一个公共列的表：核心。

所以我需要每一行显示共同的“核心”。

我是否需要创建一个单独的数据库来实现这一点？

```
Database: hero
Table: cartons_current
+---------+
| date    |
+---------+
| core    |
+---------+
| qty     |
+---------+

Database: hero_label
Table: labels_current
+---------+
| date    |
+---------+
| core    |
+---------+
| qty     |
+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:24:36.583

```
SELECT h.*, hl.date, hl.qty FROM hero h, hero_label hl WHERE h.core = hl.core 
```

这将显示 H 表中的所有值以及 HL 表中的值，它们都具有相同的核心列值。这是你想要的？

编辑

抱歉，我没有看到它们是单独的桌子。我的监督。

试试这个

```
SELECT hero.cartoons_label.*, hero_label.labels_current.date, hero_label.labels_current.qty
FROM hero.cartoons_label, hero_label.labels_current
WHERE hero.cartoons_label.core = hero_label.labels_current.core 
```

只要您可以访问两个数据库和两个*应该*工作的表。

# pointers - 什么时候返回指向结构的指针是个好主意？

> ID：10986906
> 
> 赞同：10
> 
> 时间：2012-06-11T20:13:50.080
> 
> 标签：pointers, go

我正在学习 Go，我对何时使用指针有点困惑。具体来说，`struct`从函数返回 a 时，什么时候返回结构实例本身合适，什么时候返回指向结构的指针合适？

示例代码：

```
type Car struct {
  make string
  model string
}

func Whatever() {
  var car Car

  car := Car{"honda", "civic"}

  // ...

  return car
} 
```

在哪些情况下我想要返回指针，而我*不想*返回？有没有好的经验法则？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-12T04:26:32.593

您需要记住两件事，性能和 API。

汽车是如何使用的？它是一个有状态的对象吗？它是一个大结构吗？不幸的是，当我不知道汽车是什么时，我无法回答。说实话，最好的方法是看看别人做了什么并复制他们。最终，你会对这种事情产生一种感觉。我现在将描述标准库中的三个示例，并解释为什么我认为他们使用了他们所做的。

1.  `hash/crc32`：[`crc32.NewIEEE()`](http://golang.org/pkg/hash/crc32/#NewIEEE)函数返回一个指针类型（实际上是一个接口，但底层类型是一个指针）。散列函数的实例具有状态。当您将信息写入哈希时，它会汇总数据，因此当您调用该`Sum()`方法时，它将为您提供该实例的状态。

2.  `time`: 该[`time.Date`](http://golang.org/pkg/time/#Date)函数返回一个`Time`结构。为什么？时间就是时间。它没有状态。它就像一个整数，您可以在其中比较它们，对它们进行数学运算等。API 设计者决定对时间的修改不会改变当前的时间，而是创建一个新的时间。作为图书馆的用户，如果我想要一个月后的时间，我会想要一个新的时间对象，而不是更改我拥有的当前对象。一次也只有3个字长。换句话说，它很小，使用指针不会提高性能。

3.  `math/big`: [big.NewInt()](http://golang.org/pkg/math/big/#NewInt)是一个有趣的。我们几乎可以同意，当您修改 a 时`big.Int`，您通常会想要一个新的。A`big.Int`没有内部状态，为什么它是一个指针呢？答案就是性能。程序员意识到大整数是……大。每次进行数学运算时不断分配可能不切实际。因此，他们决定使用指针并允许程序员决定何时分配新空间。

我回答你的问题了吗？可能不是。这是一个设计决策，您需要根据具体情况进行计算。当我设计自己的库时，我使用标准库作为指南。这实际上都归结为判断以及您期望客户端代码如何使用您的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:35:57.910

非常遗憾的是，在特定情况下可能会出现异常：

*   当它真的很小（不超过几个字）时返回一个值。
*   当复制开销会严重损害性能（大小是很多字）时，返回一个指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T23:44:21.473

通常，当您想模仿面向对象的风格时，您有一个存储状态的“对象”和可以改变对象的“方法”，那么您将有一个“构造函数”函数返回一个指向结构的指针（将其视为其他 OO 语言中的“对象引用”）。Mutator 方法必须是指向结构类型的方法而不是结构类型本身，以便更改“对象”的字段，因此使用指向结构而不是结构的指针很方便值本身，因此所有“方法”都将在其方法集中。

例如，在 Java 中模仿这样的事情：

```
class Car {
  String make;
  String model;
  public Car(String myMake) { make = myMake; }
  public setMake(String newMake) { make = newMake; }
} 
```

在 Go 中你经常会看到这样的东西：

```
type Car struct {
  make string
  model string
}
func NewCar(myMake string) *Car {
  return &Car{myMake, ""}
}
func (self *Car) setMake(newMake string) {
  self.make = newMake
} 
```

# sql - SQL Server 选择查询 - 将服务器指定为参数

> ID：10986907
> 
> 赞同：0
> 
> 时间：2012-06-11T20:13:50.610
> 
> 标签：sql, sql-server

我们有 2 台服务器 - 一台生产，一台测试/开发。我想针对生产数据运行一些 SQL 检查和更新，但将更改写入测试/开发服务器，这样人们就不会看到这些更改。

使用 SQL Server Management Studio，我运行了带有检查和更新的游标。我积极参与测试/开发。但是，我编写了如下查询。

```
SELECT * FROM [Production_Server].[Production_DB].[schema].[table] 
```

我的印象是这会查看生产服务器，但事实并非如此。它着眼于测试/开发服务器。我在这两种环境中都有访问/权限。

有什么我忽略了许可明智地让它工作吗？或者它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-30T18:31:10.427

“[Production_Server]”必须是错误的链接服务器名称。

运行以下 sproc 以找到要使用的正确值

```
exec sp_linkedservers 
```

# asp.net - 名为“x”的路由已在路由集合中。路由名称必须是唯一的。ASP.NET MVC 3 的异常

> ID：10986909
> 
> 赞同：101
> 
> 时间：2012-06-11T20:13:54.980
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

我正在做一个 ASP.NET MVC 3 Web 服务，并且我不断地间歇性地收到这个异常。

堆栈跟踪：

```
Server Error in '/' Application.

A route named 'ListTables' is already in the route collection. Route names must be unique.
Parameter name: name

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: A route named 'ListTables' is already in the route collection. Route names must be unique.
Parameter name: name

Source Error: 

Line 24:            //     }
Line 25:            // );
Line 26:             context.MapRoute(
Line 27:                 "ListTables",
Line 28:                 // example: 

Source File: C:\inetpub\wwwroot\SchemaBrowserService\Website\Areas\Api\ApiAreaRegistration.cs    Line: 26 

Stack Trace: 

[ArgumentException: A route named 'ListTables' is already in the route collection. Route names must be unique.
Parameter name: name]
   System.Web.Routing.RouteCollection.Add(String name, RouteBase item) +2329682
   System.Web.Mvc.RouteCollectionExtensions.MapRoute(RouteCollection routes, String name, String url, Object defaults, Object constraints, String[] namespaces) +236
   System.Web.Mvc.AreaRegistrationContext.MapRoute(String name, String url, Object defaults, Object constraints, String[] namespaces) +59
   System.Web.Mvc.AreaRegistrationContext.MapRoute(String name, String url, Object defaults) +17
   SchemaBrowserService.Areas.Api.ApiAreaRegistration.RegisterArea(AreaRegistrationContext context) in C:\inetpub\wwwroot\SchemaBrowserService\Website\Areas\Api\ApiAreaRegistration.cs:26
   System.Web.Mvc.AreaRegistration.CreateContextAndRegister(RouteCollection routes, Object state) +105
   System.Web.Mvc.AreaRegistration.RegisterAllAreas(RouteCollection routes, IBuildManager buildManager, Object state) +199
   System.Web.Mvc.AreaRegistration.RegisterAllAreas(Object state) +45
   System.Web.Mvc.AreaRegistration.RegisterAllAreas() +6
   Website.MvcApplication.Application_Start() in C:\Users\djackson\Downloads\RestApiMvc3\Website\Website\Global.asax.cs:35

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

这可能与 Route Debugger 显示我有一些旧路由已修改或删除并且不会消失（即使在重新启动我的机器后）这一事实有关。堆栈跟踪还引用了一个早已被删除的源文件，并且我的应用程序已移动到新位置，从那时起进行了清理和重建。我错过了什么？

这是我所有的路线注册代码：

```
// in Global.asax.cs:
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapRoute(
        "Default2", // Route name
        "Api/{controller}/{action}/{id}", // URL with parameters
        new { controller = "DataSource", action = "Index", area = "Api", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    RegisterRoutes(RouteTable.Routes);
}

// in ApiAreaRegistration.cs:
public class ApiAreaRegistration : AreaRegistration
{
    public override string AreaName { get { return "Api"; } }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        // DataSources

        // Tables
        context.MapRoute(
            "ListTables",
            // example: 
            // /api/DataSources/DataSource/1/schemata/schema/dbo/tables
               "Api/DataSources/DataSource/{dataSourceId}/schemata/{schemaName}/tables",
            new
            {
                controller = "Tables",
                action = "TableList",
                schemaName = "dbo",
                dataSourceId = "DefaultId"
            }
        );

        // Schemata
        context.MapRoute(
          "Schema",
            // example: 
            // /api/DataSources/DataSource/1/schemata/schema/dbo
              "Api/DataSources/DataSource/{dataSourceId}/schemata/{schemaName}",
          new
          {
              controller = "Schema",
              action = "Schema",
              dataSourceId = "DefaultId",
              schemaName = UrlParameter.Optional
          }
       );

       // // DataSources
        context.MapRoute(
            "SingleDataSource",
            "Api/DataSources/DataSource/{dataSourceId}",
            new
            {
                controller = "DataSource",
                action = "DataSource",
                dataSourceId = UrlParameter.Optional
            }
        );
        context.MapRoute(
            "ListDataSources",
            "Api/DataSources",
            new
            {
                controller = "DataSource",
                action = "DataSourceList",
                dataSourceId = "DefaultId"
            }
        );
        context.MapRoute(
             "Api_default",
             "Api/{controller}/{action}/{id}",
             new { action = "Index", id = UrlParameter.Optional }
        );

    }
} 
```

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2012-08-14T19:36:43.900

要解决这个问题，我必须进入项目的 bin 文件夹，删除所有 DLL 文件，然后重新构建，这解决了问题。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-12T08:37:12.723

由于多种原因可能会发生此错误，我遇到了相同的错误并通过修改 Global.asax 类解决了它。

Global.asax.cs 的 Application_Start 方法类似于：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

以下行在此方法中出现两次：

```
RouteConfig.RegisterRoutes(RouteTable.Routes); 
```

这确保了该路由被两次添加到路由列表并同时导致错误。

我更改了Application_Start方法如下，错误消失了：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    AreaRegistration.RegisterAllAreas();
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

这可能不是您问题的答案，但将来可能会帮助其他人。我没有在其他人之间看到这个答案，所以我决定添加这个。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-12T13:18:13.340

在我重命名之前，我发现 Global.asax 指的是该站点的 DLL 文件的旧版本。当我执行 Build > Clean up 时，DLL 没有被清理，因为 VS 项目/解决方案不再引用它。似乎有时只使用了较新版本的 DLL，从而使站点能够正常工作，但最终它们都会被加载，从而导致路由冲突。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-11T20:57:45.517

路由是从 AppDomain.CurrentDomain 中的所有程序集加载的，因此如果您的旧程序集仍然是其中的一部分，那么您可能仍然会获得旧的/重复的路由。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-12T13:30:25.590

就我而言，我遇到了这个问题，当我从解决方案中添加对另一个项目的引用时，这也是 MVC 并在区域中使用相同的名称（我不想添加这个项目，我不知道它是怎么发生的）。当我删除这个 DLL 时，项目开始工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-01T08:32:56.527

单独删除 DLL 对我不起作用（在 VS2013 中），但删除整个 'bin' 和 'obj' 文件夹然后构建解决方案效果很好！让我希望我没有花这么长时间试图修复它......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-03T21:29:31.077

没有任何建议对我有用。继续并重新启动 Web 服务器（在本例中为 IIS），并在我修复代码后清除了错误。DLL 必须已缓存在 IIS 中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-02T06:41:42.647

试试这个代码，只改变名字

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
        routes.MapHttpRoute(
          name: "API",
          routeTemplate: "api/{controller}/{action}",
          defaults: new { action = "GetAgentId" }
      ); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-12T12:12:15.857

我得到同样的错误。但最后我得到了解决方案。场景：我在我的 web api mvc4 应用程序中添加了不同的（mvc4 应用程序）dll。尝试运行时。我得到同样的错误。根本原因 - 当我的 web api 应用程序运行时。应用程序从自己注册所有区域并开始加载到当前应用程序域 dll 引用。当应用程序加载 dll（MVC4 应用程序）时出现错误，因为当前的 maproute 已经为“HelpPage_Default”添加了键。

解决方案。1.更改maproute中RegisterArea的键，无论是当前应用程序还是现有应用程序（参考dll）。2.将代码dll（mvc4应用程序）代码移动到不同的库并引用新的dll。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-21T08:18:28.107

我手动调用`AttributeRoutingHttpConfig.Start()`了我的 Global.asax。没有注意到自动调用它的文件顶部的这个自动生成的行。

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(Mev.Events.Web.AttributeRoutingHttpConfig), "Start")] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-17T15:36:27.010

我有一个应用程序，它是一个迁移到 MVC 的 Forms 应用程序，其中包含用于身份验证的第三方组件，该组件重定向到另一个站点。如果用户尚未登录，该组件将启动会话两次（一次用于初始连接到站点，一次用于返回）。所以我用下面的代码解决了这个问题：

```
if (routes.Count < 3)
            {
                routes.IgnoreRoute("login.aspx");
                routes.IgnoreRoute("default.aspx");
                routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

                routes.MapRoute(
                    name: "Default",
                    url: "{controller}/{action}/{id}",
                    defaults: new {action = "Index", id = UrlParameter.Optional}
                    );
            }
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-26T06:05:19.917

删除 bin 文件夹中的 dll 确实 100% 有效，我仍然有我的项目需要重建的 dll。而是制作 bin 文件夹的副本。然后删除 original.rebuild 项目。如果失败，请将丢失的 dll 放入 bin 文件夹中。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-13T08:24:11.747

我正在运行一个旧的 MVC2 网站，但我遇到了这个问题，因为默认情况下 IIS“托管管道模式”设置为“集成”（在项目上按 F4）。将其更改为“经典”解决了问题

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-30T21:59:47.807

发布到 Azure 应用服务时，我必须检查发布对话框的“设置”->“文件发布选项”->“在目标位置删除其他文件”以删除旧项目 DLL 和符号文件。然后该网站将加载。

这本质上是核心的当前答案（跳蚤）解决方案。删除有问题的 DLL。

导致这个旧 DLL 被保留的原因是我正在加载旧版本的网站（MVC 3~5 模板，但不同的 web 项目具有冲突的命名空间，因为新版本是该项目的副本，这在最近有一些意义。 ) 只需要删除较新项目的 DLL。有多种方法可以实现这一目标。我发现使用对话框是最简单的自动取款机。登录文件系统并手动删除文件当然也可以。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-08T19:54:27.987

如果您在进行版本控制，并且使用了两个同名的 API，您将收到此错误。如果您需要相同的 Get，请尝试更改路由的 Name 属性：

测试控制器.cs：

```
 [MapToApiVersion("1.0")]
      [Route("{moniker}", Name = "GetTest")]
      public async Task<IHttpActionResult> Get(string moniker, bool param1 = false)

  [MapToApiVersion("1.1")]
  [Route("{moniker}", Name = "GetTest11")] // Change name here for a different version
  public async Task<IHttpActionResult> Get(string moniker) 
```

并在 URL 中传入版本：

http://localhost:6600/api/tests/2020?api-version=1.1

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-26T23:22:53.287

面临这个问题。向我的项目添加区域后出现问题。有人要求`MapMvcAttributeRoutes()`in`RegisterArea()`方法。因此，您不应该寻找重复的路由名称，只需寻找重复的`MapMvcAttributeRoutes()`调用。

# php - 在 php 中加载 xml 时出错（不是绝对的）

> ID：10986913
> 
> 赞同：2
> 
> 时间：2012-06-11T20:14:15.743
> 
> 标签：php, xml, namespaces

我正在尝试加载具有多个命名空间声明的 XML 文档我的 php 是：

```
<?php 
$doc = new DOMDocument('1.0','UTF-8'); 
$doc->load( 'UBLCatalog.xml' ); 

$Items = $doc->getElementsByTagNameNS( "UBLCommonAggregateComponents","Item" ); 
foreach( $Items as $Item ) 
{ 
 $descriptions = $Item->getElementsByTagNameNS( "UBLCommonBasicComponents","Description" ); 
 $description = $descriptions->item(0)->nodeValue;  

 echo "<b>$description\n</b><br>"; 
 } 
?> 
```

错误是：

> xmlns：URI UBLDatalogDocument 在 file:///C:/wamp/www/XMLExperiments/UBLCatalog.xml 中不是绝对的，

我得到了输出，但这个错误很烦人。

逐字记录错误是： 注意：DOMDocument::load() [domdocument.load]: xmlns: URI ULCatalogDocument is not absolute in file:///C:/wamp/www/XMLExperiments/UBLCatalog.xml, line: 4 in C :\wamp\www\XMLExperiments\ItemsXml.php 在第 3 行

而且，如果我删除默认命名空间 (xmlns="UBLDatalogDocument")，错误就会消失

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-29T22:11:36.857

PHP XML 扩展（DOM、XMLReader、SimpleXml 等）[使用 libxml 库](http://www.php.net/manual/en/intro.libxml.php)来解析 XML 文件。

出现此错误的原因是**libxml 需要在`xmlns`atttibute** (ie `xmlns="http://example.com/some-unique-url"`) 中使用绝对 URL，但只获取文本 ( `xmlns="UBLCatalogDocument"`)。

从[libxml 网页](http://www.xmlsoft.org/namespaces.html)：

> 命名空间值必须是绝对 URL，但 URL 不必指向 Web 上的任何现有资源。

**因此，如果可能，请将您的`xmlns`属性更改为某个绝对 URL。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:22:49.760

使用 XPath 查找节点可能会消除您的错误：

```
$xpath = new DOMXpath($doc);
$Items = $xpath->query('//item[@xmlns="UBLCommonAggregateComponents"]'); 
```

# android - 可以从 Android Play 举报或删除评论吗？

> ID：10986914
> 
> 赞同：1
> 
> 时间：2012-06-11T20:14:17.660
> 
> 标签：android

如果有人在 Android Play 评论部分发表了令人反感的评论，是否可以将其删除？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:29:27.987

您可以从 Web 界面（不是开发者控制台）或 Android 客户端将评论报告为“垃圾邮件”。

# windows - 为什么在eclipse上调试时gtk+会说“无效的utf-8”？

> ID：10986921
> 
> 赞同：2
> 
> 时间：2012-06-11T20:14:58.177
> 
> 标签：windows, eclipse, debugging, utf-8, gtk

我一直在 Eclipse 中创建一个 gtk+ 应用程序。在代码中的某处，使用类似于 gtk+ hello world 的代码显示警告对话框。当我运行这个程序时，对话最终会按预期显示“单词”的内容，但是当我关闭对话时程序崩溃了。我是c新手，所以我用调试运行程序，希望能找到一些简单的错误。但是，当我运行调试时，对话框显示前面有许多空字符的“单词”并记录了该消息。

```
Pango-WARNING **: Invalid UTF-8 string passed to pango_layout_set_text() 
```

这个新问题令人困惑，更令人困惑的是，当对话关闭时，程序也没有崩溃。

**综上所述，我运行代码的时候，文字没问题，程序崩溃了。当我调试代码时，文本无效，程序没有崩溃。**

对话中的文本是使用以下代码生成的：

```
char*  answerBuffer = (char*)malloc(strlen(s)+strlen(words)+1);

strcat(answerBuffer,words);

char*  answer = (char*)malloc(strlen(answerBuffer)+1);
g_strlcpy(answer,answerBuffer,strlen(answerBuffer)+1);

return answer; 
```

在代码执行时，answerBuffer 的长度为 320，words 是一个设置为“a,b,c,d”的 char* 参数。我正在使用 gtk+ 2.24 的 minGW 编译器通过 eclipse 在 windows xp 上运行它。谁能告诉我如何调试/修复这个？

附言。's' 包含文件中的文本，后跟一个或十二个空字符（如果我运行一个，如果我调试十二个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T01:48:01.350

鉴于您提供的代码，这一行就是问题所在：

```
strcat(answerBuffer,words); 
```

为什么？因为你不知道里面有什么`answerBuffer`。Malloc 返回给您的内存不一定为零，因此`answerBuffer`基本上包含随机字节。您至少需要将第一个字节归零（因此它看起来像一个零长度的字符串），或者用于`calloc()`分配您的缓冲区，这将为您提供归零的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:51:46.223

好吧，'s' 的内容很可能不是有效的 UTF-8 序列。

查找 UTF-8 的含义以防让您感到困惑。或者为了简单起见，确保您的文本文件仅包含 ASCII 字符。

如果这对您没有帮助，那么您可能在某个地方弄乱了文件读取或可能的编码转换。

# ruby-on-rails - 来自 url 的 Rails CarrierWave 商店图像无法将 nil 转换为字符串

> ID：10986923
> 
> 赞同：4
> 
> 时间：2012-06-11T20:15:02.273
> 
> 标签：ruby-on-rails, mongoid, carrierwave

使用 CarrierWave 和 Amazon S3，我可以存储来自本地文件的图像，但是当我尝试从某个 url 存储它们时，我得到“TypeError: can't convert nil into String”

```
 from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/carrierwave-0.5.8/lib/carrierwave/uploader/cache.rb:149:in `join'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/carrierwave-0.5.8/lib/carrierwave/uploader/cache.rb:149:in `cache_path'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/carrierwave-0.5.8/lib/carrierwave/uploader/cache.rb:121:in `block in cache!'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/carrierwave-0.5.8/lib/carrierwave/uploader/callbacks.rb:17:in `with_callbacks'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/carrierwave-0.5.8/lib/carrierwave/uploader/cache.rb:112:in `cache!'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/carrierwave-0.5.8/lib/carrierwave/uploader/store.rb:56:in `store!'
    from (irb):5
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
    from /Users/bashar/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是我正在尝试的代码

```
require 'open-uri'
image = "open(image_url)
@object.image.store!(file) 
```

显然@object 保存了 Uploader 图像，并且使用本地文件系统运行良好。我试图添加一个

def root Rails.root.join 'public/' end

我的上传者也没有运气。

任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T01:30:13.137

要告诉载波下载远程 URL，请使用以下语法：

```
@object.remote_image_url = "http://www.example.com/file.png"
@object.save 
```

# asp.net - 带有 ASP .NET WebForms 的 Ninject 3.0 (NuGet) 不调用 WebActivator

> ID：10986927
> 
> 赞同：2
> 
> 时间：2012-06-11T20:15:24.067
> 
> 标签：asp.net, ninject, webactivator, ninject.web

我创建了一个全新的 WebForm 站点（VS2010）并从 NuGet 添加了 Ninject.Web（3.0）......它在 App_Start 上创建了 NinjectWeb 和 NinjectWebCommon......它的编译很好，但它从不执行代码......

我是否应该做一些事情来让 WebActivator 与 WebForms 一起工作？

我用 MVC 3 项目完成了同样的过程，它工作得很好......

知道为什么它不能在 WebForms 中工作吗？

ps.：它似乎无法识别 App_Start

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:19:29.817

我会尝试通过 Nuget 删除然后重新添加网络激活器，如果失败，你总是可以在 global.ascx.cs 中初始化你的 Ninject 代码

# graphics - 在不使用图形 API 的情况下编写 3d 游戏

> ID：10986928
> 
> 赞同：4
> 
> 时间：2012-06-11T20:15:25.830
> 
> 标签：graphics, 3d

正如标题所说，我想编写一个 3d 游戏（可能是 BattleZone 克隆），但不使用 OpenGL、DirectX 等 API。问题的核心是，我只想学习如何在屏幕上绘制基本的 3d 形状并对其进行操作。不要在意它是否看起来像垃圾。我以前使用 OpenGL 来实现类似的目的，但真的没有了解这些主题。

问题是，我不知道从哪里开始。我下载了 Doom 源代码，但这有点超出我的想象。虽然我已经编程了一点，但图形问题远远超出了我的深度。

如果有人能提供链接或代码（任何语言），我将非常感激，这将帮助我实现我的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T20:31:28.660

听起来是一个令人兴奋的项目。我在 90 年代后期做过类似的事情。在 OpenGL 和 DirectX 流行之前，有大量关于这个主题的好书。

从根本上说，你必须学习如何

*   表示 3D 几何
*   变换几何体（平移和旋转）
*   将该几何图形投影到 2D 屏幕上。

这些主要主题中的每一个都有许多子主题（例如，复杂的对象可以由许多多边形构成。您可能希望将多边形限制为仅由三角形构成，或支持其他多边形。您可能希望加载通用模型格式，例如 .obj 文件，以便您可以使用现成的工具创建模型）。

这些主题过于广泛，无法在此处详细回答。整本书都是关于这个主题的，包括

[3D 游戏编程的黑色艺术](https://rads.stackoverflow.com/amzn/click/com/1571690042)（书籍，令人惊讶的是仍然可用）

有关一般主题的良好介绍，请查看：

[http://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection)

[http://en.wikipedia.org/wiki/Orthographic_projection](http://en.wikipedia.org/wiki/Orthographic_projection)

[http://en.wikipedia.org/wiki/Transformation_matrix#Perspective_projection](http://en.wikipedia.org/wiki/Transformation_matrix#Perspective_projection)

您已经看过的 Doom 使用了一种称为[高度场渲染](http://en.wikipedia.org/wiki/Heightmap)的特殊优化，并且不允许渲染任意 3D 形状（例如，您不会在 Doom 中找到可以在其下行走的桥）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-03T10:57:38.647

我有第二版的[计算机图形学：C 中的原理和实践，](https://rads.stackoverflow.com/amzn/click/com/0201848406)它使用 SRGP（简单光栅图形编程）和 SIGGRAPH，它是一个环绕 SRGP，如果您查找有关图形研究的文章和论文，您会看到两者这些库被大量使用，它们比你提到的 API 更直接和低级。我很难找到它们，所以如果你找到了，请给一个链接。请注意，第三版是 WPF 中的，所以我不能保证它的实用性，我不知道第二版是否还在印刷，但我找到了很多关于这本书的参考，它有[它自己的页面在维基百科中](https://en.wikipedia.org/wiki/Computer_Graphics:_Principles_and_Practice)。

另一个解决方案是 Win32 API，它在渲染方面也没有提供太多，但是在窗口上绘制点和线是微不足道的。我已经写了一些关于它的教程，但我没有涉及绘制像素和线条，所以它们只有在你对设置窗口的基础知识有困难时才有用。请注意，它不适用于实时渲染，因此它可能会变慢。

最后，您可以查看 X11 编程，这是大多数带有 GUI 的现代操作系统的基础。我还没有找到适用于 Windows 的库，但我也没有在它上面投入太多时间。我知道它通常可用于 CIGWIN 和 Linux，而且我相信查看图形的核心会非常有趣，因为您已经在 3D 图形的底层查看。

# java - Java AES PKCS7 - 最后一个块在解密中不完整

> ID：10986930
> 
> 赞同：1
> 
> 时间：2012-06-11T20:15:29.347
> 
> 标签：java, aes, encryption, pkcs#7

我有一个 Python 应用程序，它创建了一些使用 AES/PKCS7 加密的文件。我必须使用 Java 服务读取这些文件。但是我的代码抛出了一个异常：

“javax.crypto.IllegalBlockSizeException：最后一个块在解密中不完整”

这是我的解密代码：

```
public String Decrypt(String strText)
{
    try
    {
        // Text to decrypt
        byte[] test = strText.getBytes();

        //bytKey is the same key as Python app
        SecretKeySpec objKey = new SecretKeySpec(bytKey, "AES");
        Cipher objCipher = Cipher.getInstance("AES/ECB/PKCS7Padding", "BC");
        objCipher.init(Cipher.DECRYPT_MODE, objKey);

        // Here I got an exception >>
        byte[] bytValue = objCipher.doFinal(test);

        return new String(bytValue);
    }
    catch (Exception exc)
    {
        exc.printStackTrace();
    }

    return "";

} 
```

如果我在进入之前解码加密文本，`doFinal`我会得到另一个异常：

“javax.crypto.BadPaddingException：垫块损坏”

```
public String Decrypt(String strText)
{
    try
    {

        BASE64Decoder decoder = new BASE64Decoder();
        byte[] test = decoder.decodeBuffer(strText);

        SecretKeySpec objKey = new SecretKeySpec(bytKey, "AES");
        Cipher objCipher = Cipher.getInstance("AES/ECB/PKCS7Padding", "BC");
        objCipher.init(Cipher.DECRYPT_MODE, objKey);

        byte[] bytValue = objCipher.doFinal(test);

        return new String(bytValue);
    }
    catch (Exception exc)
    {
        exc.printStackTrace();
    }

    return "";

} 
```

我不是加密/解密方面的专家，我想这很容易解决。有什么想法可以解决这个问题吗？提前致谢！

# c# - 返回不同对象的类函数

> ID：10986932
> 
> 赞同：2
> 
> 时间：2012-06-11T20:15:30.907
> 
> 标签：c#, mysql, sql-server-ce

简而言之，我正在编写一个类处理程序来处理我为自己编写的一些软件的数据库集成，但是由于并不总是与远程数据库建立连接，我想我会使用 SQLCE 创建一个本地数据库缓冲区，所以当连接所做的更改可以同步。

到目前为止，除了参数之外，一切都很顺利。我要调用的函数如下所示，但是该函数抱怨参数无效。

```
public Object run(string query, List<Object> dbparams = null)
    {
        if (MyDB.isConnected())
        {
            return MyDB.run(query, dbparams);
        }
        else
        {
            SqlCeCommand sql = _OfflineConnection.CreateCommand();
            sql.CommandText = query;
            if (dbparams.Count > 0)
            {
                sql.Parameters.AddRange(dbparams.ToArray());
            }
            return sql;
        }
    } 
```

MyDB.run 与 else 语句中的代码完全相同，除了 mysql，它抱怨的行是返回 mydb.run，因为 mydb 类期望 dbparams 列表是 mysqlparameters。

有谁知道我怎么能做到这一点？我尝试使用 LINQ 进行转换，但失败得很惨。

**编辑**

目前我有以下工作，但我确信有一个更清洁的解决方案

```
public Object run(string query, List<Object> dbparams = null)
    {
        if (MyDB.isConnected())
        {
            List<MySqlParameter> mydbparams = null;
            for (int i = 0; i < dbparams.Count; i++)
            {
                mydbparams.Add((MySqlParameter)dbparams[i]);
            }
            return MyDB.run(query, mydbparams);
        }
        else
        {
            SqlCeCommand sql = _OfflineConnection.CreateCommand();
            sql.CommandText = query;
            if (dbparams.Count > 0)
            {
                sql.Parameters.AddRange(dbparams.ToArray());
            }
            return sql;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:46:11.797

更清洁的解决方案是

```
mydbparams = dbparams.Cast<MySqlParameters>().ToList(); 
```

此外，您应该检查并处理`dbparams`.

# php - .htaccess 与 Wamp，适用于实时服务器但不适用于 localhost

> ID：10986937
> 
> 赞同：-4
> 
> 时间：2012-06-11T20:16:02.200
> 
> 标签：php, .htaccess

WAMP 上的 .htaccess 文件有问题。适用于实时服务器，但不适用于本地主机。它让我发疯。有什么建议么？

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^([^/\.]+)-online-help/([^/\.]+)-teacher/([^/\.]+)/([^/\.]+)/([^/\.]+)/?$ advert.php?cat=$1&subcat=$2&type=$3&aid=$4&title=$5 [L]
RewriteRule ^([^/\.]+)-online-help/([^/\.]+)-teacher/([^/\.]+)/?$ listing.php?cat=$1&subcat=$2&type=$3 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:25:05.210

默认情况下，rewrite_module 在 WAMP 中未激活。您必须进入上下文菜单：Apache > Apache modules > rewrite_module。

不要忘记在此操作后重新启动所有服务。

# wordpress - 在 WordPress 中为教程博客文章添加“难度级别”

> ID：10986940
> 
> 赞同：0
> 
> 时间：2012-06-11T20:16:17.200
> 
> 标签：wordpress, blogs

我正在创建一个包含一般文章和教程的 WordPress 主题。这些教程与文章的其余部分相似，但有一个区别：它们将以一个包含“难度级别：初学者”或“所需工具：Photoshop”等信息的框开始。

我对 WordPress 有点陌生，我希望有人可以帮助我了解此类事情的“正确方法”或最佳实践。我很想在每个教程的顶部硬编码这些信息。据我所知，其他解决方案将涉及条件模板标签、备用单篇文章模板、自定义字段等。虽然我不反对尝试其中的任何一个，但我想知道这是否是可行的方法。

有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:26:42.107

为什么不使用标签？

分类法可能是对每个教程进行分类的最简单方法。

标签也包含在菜单创建中（外观 > 菜单）。

因此，例如，如果您需要为“初学者”创建一个菜单项，则将列出所有标记为初学者的文章。

您还可以在 WordPress 内置的标签云小部件中显示所有标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:30:29.237

我认为@manonatelier 的建议在您的问题中是完美的。

如果您想处理自定义字段和元框，请查看主题开发人员的[此类 WordPress 的自定义元框和字段](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)。

# httpclient - HttpClient - UrlEncodedFormEntity xml 编码 NameValuePair

> ID：10986949
> 
> 赞同：1
> 
> 时间：2012-06-11T20:16:33.213
> 
> 标签：httpclient, apache-httpclient-4.x

xml 编码不正确 - 任何帮助

```
List<NameValuePair> formparams = new ArrayList<NameValuePair>();
            formparams.add(new BasicNameValuePair("VENDOR", "pradeep"));            
            formparams.add(new BasicNameValuePair("REQTYPE", "ExternalSystem"));
            formparams.add(new BasicNameValuePair("DATA", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"));
            UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formparams, "UTF-8"); 
```

我的出路是`VENDOR=pradeep&REQTYPE=ExternalSystem&DATA=%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E`

但我预料到了

```
VENDOR=D-B165&REQTYPE=EXRCTRFREQ&DATA=<?xml version=\"1.0\" encoding=\"UTF-8\"?> 
```

上面的任何一个怎么做

谢谢， 普拉迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:19:23.713

看起来您的 UrlEncodedFormEntity() 调用的输出是正确的 - 它在 formparms ala [Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)中对所有 NameValuePairs 进行了 URL 编码。

您没有提及预期输出的用例，但这将通过简单地连接不带编码的 NameValuePairs 来满足您的要求：

```
StringBuilder sb = new StringBuilder();
Iterator<NameValuePair> i = formparams.iterator();
while( i.hasNext() )
{
    sb.append( i.next().toString() );
    if( i.hasNext() )
        sb.append( "&" );
} 
```

如果您仍然需要一个尊重该输出的 HttpEntity ，您可以尝试使用 StringEntity ，例如：

```
HttpEntity entity = new StringEntity( sb.toString() ); 
```

# php - 在 Linux 文件系统中安全放置 PHP 所需文件的位置（根据 FHS）

> ID：10986950
> 
> 赞同：1
> 
> 时间：2012-06-11T20:16:36.753
> 
> 标签：php, fhs

我在我的 LAMP 服务器上运行了一个 PHP 脚本，它需要某些文件才能生成 HTML 内容。该脚本可公开访问（即`http://example.com/script.php`），但该脚本所需的文件必须受到保护。我可能可以将文件放在任何目录之外`/var/www`，它们会相对安全，但我正在尝试学习 Linux 文件系统，我想使用最*合适*的位置（根据 FHS）。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:13:13.437

经过一番研究，我想我已经回答了我的问题。最合适的位置似乎是`/srv`（添加了正确分类数据的子目录）。

> /srv 包含由该系统提供的特定于站点的数据。

[http://www.pathname.com/fhs/pub/fhs-2.3.html#SRVDATAFORSERVICESPROVIDEDBYSYSTEM](http://www.pathname.com/fhs/pub/fhs-2.3.html#SRVDATAFORSERVICESPROVIDEDBYSYSTEM)

# jquery - 我如何触发带有动态内容的fancybox画廊

> ID：10986953
> 
> 赞同：3
> 
> 时间：2012-06-11T20:16:43.867
> 
> 标签：jquery, fancybox, fancybox-2

我正在测试fancybox，它看起来是一个不错的小库，用于画廊和加载内容。我有下面的代码可以正常工作，但是只要我单击带有灯箱类的项目，我就需要它来触发画廊。下面的代码将来自 gallery.htm 的内容加载到内容 div 中，然后当我单击内容 div 中的缩略图时，它会启动 fancybox。我想做的是一键加载我的动态内容并启动花哨的盒子，请有人告诉我吗？

```
$(document).ready(function(){
$('.lightbox').live('click', function(e){
    e.preventDefault();
    //var url = $(this).attr('href');
    var url = "gallery.htm";
    $('#content').load(url, function(data, stat, req){
        $("a.lightbox").fancybox();
    });
}) 
```

});

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:51:12.710

基本上你需要两个选择器：

1）。一种使用该方法将图库缩略图加载到页面中`.load()`，例如`loadGallery`：

```
<a href="javascript:;" class="loadGallery">add dynamic gallery thumbnails</a> 
```

2）。另一个将元素绑定到fancybox，例如`lightbox`。*文件“ gallery.htm* ”中的所有元素都应该`class`像这样：

```
<a class="lightbox" rel="gallery1" href="images/01.jpg"><img src="images/01t.jpg" alt="" /></a>
<a class="lightbox" rel="gallery1" href="images/02.jpg"><img src="images/02t.jpg" alt="" /></a>
<a class="lightbox" rel="gallery1" href="images/03.jpg"><img src="images/03t.jpg" alt="" /></a> 
```

然后使用一个脚本将这些元素（在您的主页中）绑定到fancybox，并将画廊缩略图加载到页面中并在同一个中触发fancybox画廊`click`，另一个类似：

```
$(document).ready(function(){
 // bind elements to fancybox
 $(".lightbox").fancybox();
 // load thumbnails and fire fancybox gallery
 $('.loadGallery').on('click', function(e){
  e.preventDefault();
  var url = "gallery.htm";
  $('#content').load(url, function(data, stat, req){
   $(".lightbox").eq(0).trigger("click");
  }); // load
  $(this).remove(); // you may remove the selector loadGallery after loading the thumbnails
 }); // on
}); // ready 
```

请注意，我们使用`.on()`而不是[.live()](http://api.jquery.com/live/)因为第二个已被弃用。不过，该`.on()`方法需要 jQuery 1.7+。

另请注意，我们曾经`.eq(0)`从第一个项目开始画廊，否则画廊将从附加到文档的最后一个元素开始。

**更新**：看到它在这里工作[演示](http://www.picssel.com/playground/jquery/loadGalleryDynamically_11jun12.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T16:19:01.673

我会发出 Aajax 请求，该请求将返回包含画廊项目的 JSON 响应。然后我会手动打开fancybox（例如$.fancybox.open（response）；其中response就像[{href：''}，{href：''}]）

# mysql - 获取平均值或将临时数据保存在数据库中 - 性能问题

> ID：10986955
> 
> 赞同：0
> 
> 时间：2012-06-11T20:16:50.900
> 
> 标签：mysql, pdo

我正在为用户构建一个小应用程序来创建集合。我想在那里有一个评级系统。现在，既然我想覆盖我所有的领域，让我们假设我有很多访客。性能开始发挥作用，尤其是在费率方面。

假设我有`rates`桌子，那里有`id`、`game_id`和。数据很简单，每个用户都有一个条目。让我们再次假设，1000 个用户会对一款游戏进行评分。我想在那个游戏子页面（以及其他地方，比如游戏列表）上打印出平均费率。目前，我有两种情况要处理：`user_id``rate`

1.  `AVG`每次显示游戏时获取。

2.  在 中创建另一列`games`，调用`temprate`并存储游戏的速率。每次有人投票时都会更新。

这两种情况都有明显的缺陷。第一个对我的主机来说压力更大，因为它肯定会消耗更多的机器功率。其次是评级时的更多工作（获取所有游戏数据，提交率，获得新的`AVG`）。

请告诉我，我应该选择哪种方案？或者，也许您还有其他想法？

我使用 PDO 并且没有框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:13:55.133

所以我终于设法解决了这个问题。我使用基于将数组转储到文件中的文件缓存。我只是选择类似的东西`if (cache) { $var = cache } else { $var = db }`。我现在正在使用[JG Cache](https://github.com/jonknee/JG_Cache)，但我很快就会给自己写一些类似的东西，但现在 - 这是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:22:45.287

我会选择你的“2号”解决方案的变体（更新一个单独的评级列），也许只是为了这个而在一个单独的表中。

如果写入的数量成为问题，那么之后就会很好`select avg(foo) from ...`，并且有很多方法可以通过定期更新平均评级或只是每隔一段时间处理新的投票来缓解它。

很可能最终你不能只做一个 avg() ，因为你必须考虑每一次投票是否存在欺诈，[计算一个排序分数](http://www.evanmiller.org/how-not-to-sort-by-average-rating.html)，谁知道还有什么。

# android - Android：将图像文件放在哪里以便以后访问它们并添加到 SQLite

> ID：10986962
> 
> 赞同：0
> 
> 时间：2012-06-11T20:17:51.947
> 
> 标签：android, file, sqlite, installation, storage

我一直在浏览该网站上与此问题相关的各种帖子，但没有一个真正回答我正在寻找的内容。因此，如果您发现或知道我可能错过的帖子，那么我很抱歉提前发布链接。

我正在尝试获取 .png 文件（其中大约 1000 多个）并以某种方式将它们与应用程序一起安装。我想即时访问它们，我想使用 SQLite 来实现这一点。我只是不明白如何将它们与应用程序“打包”或将它们存储在应用程序结构中的什么位置。

要点...

*   动态访问文件（在运行时像幻灯片一样查看它们）
*   将它们添加到 SQLiteDatabase 以便于访问
*   图像不会被编辑，如果是，我会将它们添加到单独的数据库中
*   所有图像将在安装时或第一次调用 onCreate() 时添加一次，并且不会更改、重新排列、添加或在此初始 .put() 之后的任何内容

*   这都是在 Java/xml 中

提前感谢您，并为我对此事的无知感到抱歉。

# jquery - Backbone 和 require.js：将值传递给所需文件

> ID：10986963
> 
> 赞同：0
> 
> 时间：2012-06-11T20:17:55.780
> 
> 标签：jquery, backbone.js, requirejs

我正在尝试使用 Backbone.js、require.js 和 jQuery 实现基本页面导航系统的方法；稍后我将添加 jQuery Mobile。我目前也在避免使用 Backbone 模型。它们是学习这一点的另一层复杂性。其目的是最终构建一个当前正在运行的应用程序的窗口内视图，可以在不一次加载整个应用程序的情况下将其换出。

我发现链接工作得很好，并且在使用 jQuery 选择器将事件附加到按钮方面取得了一些成功。`this.el`但是当我需要将一个值（由于依赖结构，Mainpage 似乎在 appRouter 之前加载和执行。

应用路由器：

```
define([
  "jquery",
  "underscore",
  "backbone",
  "helloWorld/HW_form",
  "helloWorld/HW_help",
  "helloWorld/HW_main"
], function($, _, Backbone, formPage, helpPage, mainPage) {
  console.log("In AppRouter!!");
  var AppRouter = Backbone.Router.extend({
    routes:{
        // Default
        '*actions':'defaultAction'
    },

    defaultAction:function () {
        console.log(this.el);
        mainPage.el = this.el; //Alternatively, I could have passed this.el into mainPage.render()...
    }

  });

  var initialize = function (target) {
    var app_router = new AppRouter;
    app_router.el = target;
    Backbone.history.start();
  };
  return {
    initialize: initialize
  };

  }); 
```

你好世界主要：

```
define([
  "jquery",
  "underscore",
  "backbone",
  "text!templates/helloWorld/helloWorld.html",
  "text!templates/helloWorld/HW_btns.html"
], function($, _, Backbone, templateHelloWorld, helloBtns) {
  console.log("In MainPage!");

  var HelloWorldMain = Backbone.View.extend({

      /*events: {
          "click #helloWorldHelp": "linkHelp",
          "click #helloWorldForm": "linkForm"
      },*/

      initialize: function(){
         console.log(this.el);
      },

      render: function(target){
        this.el.html(templateHelloWorld);
        //$("#helloWorldHelp").on("click", this.linkHelp);
        //$("#helloWorldForm").on("click", this.linkForm);
      },

      linkHelp: function(){
        console.log('Linking to the Help pages!');
      },

      linkForm: function(){
        console.log('Linking to the form!');
      }
  });
  return new HelloWorldMain;
}); 
```

我确实通过在使用 jQuery 渲染后绑定事件来使其工作 - 但我发现如果我尝试使用这些工具构建一个大型应用程序，从长远来看这可能是不合理的。有什么我想念的吗？老实说，我对这些框架工具的使用方式做了一些基本假设，我发誓我会在事后感到愚蠢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:57:04.557

您不应该在依赖项本身中初始化 mainPage。而不是`return new HelloWorldMain`do`return HelloWorldMain`然后在 defaultAction 中像这样初始化主页`mainPage = new HelloWorldMain()`（要求您将 mainPage 定义变量重命名为 HelloWorldMain）。之后，您可以使用 mainPage.el 为所欲为。

如果您需要澄清，请发表评论。

# c# - 在工具箱上添加对象

> ID：10986965
> 
> 赞同：0
> 
> 时间：2012-06-11T20:18:01.077
> 
> 标签：c#, wpf, xaml

如何将对象（例如矩形）添加到嵌入堆栈面板标签中。

我能够在其上显示对象（作为矩形），然后使用 xaml 文件中的样式使用以下内容：

```
<stackpanel ...>
    <Expander Header="Controls" Content="{StaticResource FC}" IsExpanded="True"/>
</StackPanel> 
```

但需要动态地将对象插入到工具箱中。知道如何通过代码来完成吗？

您的帮助将不胜感激。阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:45:58.910

Expander 是一种被认为是内容类型控件的控件。因此它只有一个孩子（我相信你称之为“工具箱”的孩子），根据你的 Xaml 是 FC 项目。执行以下步骤将您的项目添加到 FC 项目：

1.  在 Xaml 中为 Expander 命名，以便可以在后面的代码中访问它。
2.  在代码隐藏中通过其名称获取扩展器。
3.  访问扩展器上的属性 Content 并将其转换为 FC 类。
4.  将您想要的项目添加到 FC 的子项或内容中（无论您知道什么，我们都不知道，所以这是我的最佳猜测）。

# c# - MEF 从目录加载插件

> ID：10986966
> 
> 赞同：10
> 
> 时间：2012-06-11T20:18:05.453
> 
> 标签：c#, location, mef, .net-assembly

我与 MEF 合作，我正在寻找如何通过 MEF 找到插件的另一种方式更改插件位置的 url，我想更改这一行

```
Assembly.LoadFrom(@"C:\julia\project\project.Plugin.Nav\bin\Debug\NavPlugin.dll"))); 
```

我想删除这个 url，因为我需要在另一台机器上部署我的应用程序

这是我的功能：

```
public void AssembleCalculatorComponents()
{
   try
   {
       //var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
       //var container = new CompositionContainer(catalog);
       //container.ComposeParts(this);
       var catalog = new AggregateCatalog();

       catalog.Catalogs.Add(new AssemblyCatalog(Assembly.LoadFrom(@"C:\yosra\project\project.Plugin.Nav\bin\Debug\NavPlugin.dll")));
       var container = new CompositionContainer(catalog);

       container.ComposeParts(this);
    }
    catch (Exception ex)
    {
       throw ex;
    }
 } 
```

你能帮我么？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T20:28:22.670

您可以使用[DirectoryCatalog](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.aspx)类让 MEF 扫描特定目录以查找满足您的导入的程序集。

```
var catalog = new AggregateCatalog();
catalog.Catalogs.Add(new DirectoryCatalog("."));
var container = new CompositionContainer(catalog); 
```

以上将添加 AppDomain 用于定位程序集的基本目录（通常是包含可执行文件的目录，除非配置更改）到聚合目录。您可能还想添加当前正在执行的程序集，尽管这不是必需的。

```
var catalog = new AggregateCatalog();
catalog.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
catalog.Catalogs.Add(new DirectoryCatalog("."));
var container = new CompositionContainer(catalog); 
```

有关 DirectoryCatalog 的 MSDN 的更多信息：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T13:08:59.887

再次您好，感谢您的回复，所以我的问题是直接加载插件，所以我创建一个目录并将我的插件放在这个文件夹中，所以我找到了这个解决方案

```
public void AssembleCalculatorComponents()
        {

            string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Plugins");
            Console.WriteLine(path);
            //Check the directory exists
            if (!Directory.Exists(path))
            {
                Directory.CreateDirectory(path);
            }
            Console.WriteLine(path);
            string assemblyName = Assembly.GetEntryAssembly().FullName;
            Console.WriteLine(assemblyName);
            //Create an assembly catalog of the assemblies with exports
            var catalog = new AggregateCatalog(
                new AssemblyCatalog(Assembly.GetExecutingAssembly().Location),
                new AssemblyCatalog(Assembly.Load(assemblyName)),
                new DirectoryCatalog(path, "*.dll"));

            //Create a composition container
            var container = new CompositionContainer(catalog);
            container.ComposeParts(this); 
```

这是我的解决方案，为所有人考虑

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T20:25:59.700

两种选择。

1.  使用当前目录作为插件的根目录。Environment.CurrentDirectory 应该为您指明正确的方向。
2.  使用 app.config 指定要存储插件的目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T20:33:40.250

如果您的方法*知道*要实例化的类型，则可以使用*我的**Domain* 库的典型`Assembly`属性；否则，您可以使用. 我不是特别喜欢或...： `Type`*`Assembly.GetExecutingAssembly()``GetExecutingAssembly()``GetCallingAssembly()`*

 *```
 public void AssembleCalculatorComponents() {
     try {
        var asmCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
     // OR
        asmCatalog = new AssemblyCatalog(typeof(TObject).Assembly); // replace TObject with object's actual type
        var aggregateCatalog = new AggregateCatalog(asmCatalog);
        // 
        AddDirectoryCatalogs(aggregateCatalog.Catalogs));
        var container = new CompositionContainer(catalog);

        // assuming this class has the member(s) to be composed.
        container.ComposeParts(this);
     } catch (Exception ex) {
        throw ex;
     }
  } 
```

除此之外，您可以添加 DirectoryCatalogs - 通过`app.config`文件、序列化的目录列表等。不过，您可以在您的目录中指定一个默认目录`app.config`- 这是我推荐的。然后，假设您正在使用`Settings`：

```
private readonly Settings settings = Settings.Default;

void AddDirectoryCatalogs(ICollection<ComposablePartCatalog> Catalogs agrCatalogs ) {
    agrCatalogs.Add(new DirectoryCatalog(settings.DefaultPath, settings.DefaultPattern));
    // add more directory catalogs
} 
```

虽然`"."`用作搜索路径是执行程序集目录的合法快捷方式，但请记住，将搜索所有程序集以查找满足部分 - 即匹配`Import`/`Export`对象。我建议使用特定模式。Microsoft 的示例并不以*最佳*实践而闻名。如果您希望任何插件以 . 为后缀`Plugin.dll`，请将其作为搜索模式的一部分。*

# asp.net - 授予每个人对 MachineKeys 文件夹的完全权限的安全后果是什么？

> ID：10986967
> 
> 赞同：1
> 
> 时间：2012-06-11T20:18:13.087
> 
> 标签：asp.net, security

我收到“无法获取 StrongNameKeyPair 的公钥”。在我的 asp.net 应用程序中使用 Newtonsoft 的 JsonConvert.SerializeObject 方法出现异常。它在本地工作，但不在我们的测试服务器上。（如果你知道为什么，请在[http://json.codeplex.com/workitem/22692](http://json.codeplex.com/workitem/22692)帮助我）:-)

我发现[Unable to get public key for StrongNameKeyPair](https://stackoverflow.com/questions/5659740/unable-to-obtain-public-key-for-strongnamekeypair)和其他一些提到更改 C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys 目录权限的帖子，但这安全吗？我的网络管理员甚至会让我这样做吗？

编辑：这是一个堆栈跟踪：3eUnable to get public key for StrongNameKeyPair。System.Reflection.StrongNameKeyPair.ComputePublicKey() 在 System.Reflection.StrongNameKeyPair.get_PublicKey() 的 System.ArgumentException 在 System.Reflection.Emit.AssemblyBuilder..ctor（AppDomain 域，AssemblyName 名称，AssemblyBuilderAccess 访问，字符串目录，证据证据， PermissionSet requiredPermissions, PermissionSet optionalPermissions, PermissionSet deniedPermissions, StackCrawlMark& stackMark, IEnumerable`1 unsafeAssemblyAttributes, SecurityContextSource securityContextSource)&#xD; at System.Reflection.Emit.AssemblyBuilder.InternalDefineDynamicAssembly(AssemblyName name, AssemblyBuilderAccess access, String dir, Evidence evidence, PermissionSet requiredPermissions, PermissionSet optionalPermissions, PermissionSet refusedPermissions, StackCrawlMark&amp; stackMark, IEnumerable`1 unsafeAssemblyAttributes, SecurityContextSource securityContextSource) 在 System.AppDomain.InternalDefineDynamicAssembly(AssemblyName 名称, AssemblyBuilderAccess 访问, 字符串目录, 证据证据, PermissionSet requiredPermissions, PermissionSet optionalPermissions, PermissionSet deniedPermissions, StackCrawlMark & stackMark, IEnumerable`1 assemblyAttributes, SecurityContextSource securityContextSource) 在 System.AppDomain。在 Newtonsoft.Json.Utilities.DynamicWrapper.GenerateWrapperType(Type interfaceType, Type basedType) 在 Newtonsoft.Json.Utilities.DynamicWrapper.GetWrapper(Type interfaceType) , 在 Newtonsoft.Json.Utilities.DynamicWrapper 中键入 realObjectType)。CreateWrapper[T](Object realObject) at Newtonsoft.Json.Converters.EntityKeyMemberConverter.WriteJson(JsonWriter writer, Object value, JsonSerializer serializer) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeConvertable(JsonWriter writer, JsonConverter converter, Object value, JsonContract contract , JsonContainerContract collectionContract, JsonProperty containerProperty) ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:08:17.913

我发现了这篇文章：[http](http://ayende.com/blog/1441/unable-to-obtain-public-key-for-strongnamekeypair) : //ayende.com/blog/1441/unable-to-obtain-public-key-for-strongnamekeypair 我认为如果 Ayende Rahien 发布它，这是一个很好的答案。

我也只给了每个人读写权限并且它工作（服务器可能已经重新启动，但我不确定它是否有帮助或是否有帮助）。

# wpf - 如何在笔记本电脑和 22 英寸显示器上制作相同的 (WPF) UI 屏幕外观？请在此处帮助我

> ID：10986968
> 
> 赞同：2
> 
> 时间：2012-06-11T20:18:21.387
> 
> 标签：wpf

我们正在笔记本电脑上为 WPF 应用程序制作 UI 屏幕，但我们计划在 22 英寸显示器上进行演示。当我们在 22 英寸显示器上看到 UI 屏幕时，尺寸会发生变化。如何在笔记本电脑和 22" 英寸显示器上制作相同的 UI 屏幕外观？请在这里帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:21:54.563

您是否使用绝对布局，其中为每个控件定义了特定的 X/Y/高度/宽度？如果您使用其他类型的布局，它们更多地与窗口高度/宽度相关，并自动处理这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:59:33.187

将整个应用程序包装在[Viewbox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)控件中。只要您没有光栅化的图像，就不会看起来被拉伸。

# php - 嵌入 iframe 的产品亚马逊页面不显示

> ID：10986969
> 
> 赞同：0
> 
> 时间：2012-06-11T20:18:27.627
> 
> 标签：php, iframe, amazon

以下块 html 代码按预期工作：

```
<iframe src="http://www.amazon.com/"></iframe> 
```

但是当尝试嵌入亚马逊内部页面时，`http://www.amazon.com/gp/product/0672329166/ref=s9_simh_gw_p14_d0_g14_i1?pf_rd_m=ATVPDKIKX0DER&pf_rd_s=center-2&pf_rd_r=1E72BDHD1YZMPYZ2HM4Z&pf_rd_t=101&pf_rd_p=470938631&pf_rd_i=507846`什么也没有出现。

Firebug 显示请求可以通过`200 OK`代码很好地执行。

```
<iframe src="http://www.amazon.com/gp/product/..."></iframe> 
```

是否有一些涉及此类使用其网站的亚马逊政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:23:18.817

他们[`x-frame-options`](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)用来阻止他们的内容被加载到框架中。

# python - Python：如何在两个值之间切换

> ID：10986970
> 
> 赞同：39
> 
> 时间：2012-06-11T20:18:35.967
> 
> 标签：python, toggle

我想在 Python 中的两个值之间切换，即 0 和 1 之间。

例如，当我第一次运行一个函数时，它产生数字 0。下一次，它产生 1。第三次它又回到零，以此类推。

抱歉，如果这没有意义，但有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-11T20:23:03.033

使用`itertools.cycle()`：

```
from itertools import cycle
myIterator = cycle(range(2))

myIterator.next()   # or next(myIterator) which works in Python 3.x. Yields 0
myIterator.next()   # or next(myIterator) which works in Python 3.x. Yields 1
# etc. 
```

请注意，如果您需要比 更复杂的循环`[0, 1]`，则此解决方案将比此处发布的其他解决方案更具吸引力...

```
from itertools import cycle
mySmallSquareIterator = cycle(i*i for i in range(10))
# Will yield 0, 1, 4, 9, 16, 25, 36, 49, 64, 81, 0, 1, 4, ... 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-11T20:21:18.230

您可以使用这样的生成器来完成此操作：

```
>>> def alternate():
...   while True:
...     yield 0
...     yield 1
...
>>>
>>> alternator = alternate()
>>>
>>> alternator.next()
0
>>> alternator.next()
1
>>> alternator.next()
0 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-06-11T20:19:37.783

您可以使用 mod ( `%`) 运算符。

```
count = 0  # initialize count once 
```

然后

```
count = (count + 1) % 2 
```

每次执行此语句时，将在 0 和 1 之间切换 count 的值。这种方法的*优点*是您可以循环遍历一系列值（如果需要），您可以从`0 - (n-1)`哪里`n`使用您的`%`运算符。而且这种技术不依赖于任何 Python 特定的功能/库。

例如，

```
count = 0

for i in range(5):
     count = (count + 1) % 2
     print count 
```

给出：

```
1
0
1
0
1 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-06-11T20:36:58.610

您可能会发现像这样创建函数别名很有用：

```
import itertools
myfunc = itertools.cycle([0,1]).next 
```

然后

```
myfunc()    # -> returns 0
myfunc()    # -> returns 1
myfunc()    # -> returns 0
myfunc()    # -> returns 1 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-06-11T20:24:23.083

在 python 中，True 和 False*是整数*（分别为 1 和 0）。您可以使用布尔值（True 或 False）和 not 运算符：

```
var = not var 
```

当然，如果你想在 0 和 1 之外的其他数字之间进行迭代，这个技巧会变得有点困难。

要将其打包成一个公认的丑陋函数：

```
def alternate():
    alternate.x=not alternate.x
    return alternate.x

alternate.x=True  #The first call to alternate will return False (0)

mylist=[5,3]
print(mylist[alternate()])  #5
print(mylist[alternate()])  #3
print(mylist[alternate()])  #5 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-06-11T20:29:59.330

```
from itertools import cycle

alternator = cycle((0,1))
next(alternator) # yields 0
next(alternator) # yields 1
next(alternator) # yields 0
next(alternator) # yields 1
#... forever 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-06-11T20:21:20.887

```
var = 1
var = 1 - var 
```

这是官方的棘手方法；）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-06-11T20:22:37.173

使用`xor`有效，并且是在两个值之间切换的一种很好的视觉方式。

```
count = 1
count = count ^ 1 # count is now 0
count = count ^ 1 # count is now 1 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-06-07T22:09:28.150

要在两个任意（整数）值（例如 a 和 b）之间切换变量 x，请使用：

```
 # start with either x == a or x == b
    x = (a + b) - x

    # case x == a:
    # x = (a + b) - a  ==> x becomes b

    # case x == b:
    # x = (a + b) - b  ==> x becomes a 
```

例子：

在 3 和 5 之间切换

```
 x = 3
    x = 8 - x  (now x == 5)
    x = 8 - x  (now x == 3)
    x = 8 - x  (now x == 5) 
```

这甚至适用于字符串（有点）。

```
 YesNo = 'YesNo'
    answer = 'Yes'
    answer = YesNo.replace(answer,'')  (now answer == 'No')
    answer = YesNo.replace(answer,'')  (now answer == 'Yes')
    answer = YesNo.replace(answer,'')  (now answer == 'No') 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-06-11T20:21:45.577

使用元组下标技巧：

```
value = (1, 0)[value] 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-06-12T10:58:29.600

使用元组下标是在两个值之间切换的一种好方法：

```
toggle_val = 1

toggle_val = (1,0)[toggle_val] 
```

如果你围绕这个包裹一个函数，你会有一个很好的交替开关。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-23T08:43:17.420

简单通用的解决方案，不使用任何内置。只需跟踪当前元素并打印/返回另一个元素，然后更改当前元素状态。

```
a, b = map(int, raw_input("Enter both number: ").split())
flag = input("Enter the first value: ")
length = input("Enter Number of iterations: ")
for i in range(length):
    print flag
    if flag == a:
        flag = b;     
    else:
        flag = a 
```

输入：
3 8
3
5
输出：
3
8
3
8
3

`Means numbers to be toggled are 3 and 8 Second input, is the first value by which you want to start the sequence And last input indicates the number of times you want to generate`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-05-03T17:12:46.500

如果之前定义了一个变量并且您希望它在两个值之间切换，您可以使用**a if b else c**形式：

```
variable = 'value1'
variable = 'value2' if variable=='value1' else 'value1' 
```

此外，它适用于 Python 2.5+ 和 3.x

[https://docs.python.org/3/reference/expressions.html#conditional-expressions](https://docs.python.org/3/reference/expressions.html#conditional-expressions)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-12-05T04:18:27.423

您可以使用任何语言进行的一种很酷的方式：

```
variable = 0
variable = abs(variable - 1)    // 1
variable = abs(variable - 1)    // 0 
```

# html - HTML 文本输入不显示 iPad 键盘

> ID：10986971
> 
> 赞同：1
> 
> 时间：2012-06-11T20:18:58.620
> 
> 标签：html, css, ipad, jquery-ui, html-input

所以，我有这个 HTML 片段：

```
<input id= "email" type= "text" name= "email"/> 
```

以及相应的 CSS 片段：

```
input[type="text"]
{
    /* Padding */
    padding: 5px;
    margin: 10px;

    /* Sizes */
    width: 100%;

    /* Rounded Corners */
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;

    /* Decoration */
    border: none;
    outline: none;

    /* Shadows */
    -moz-box-shadow: inset 0 1px 1px rgba(74, 74, 74, 0.8);
    -webkit-box-shadow: inset 0 1px 1px rgba(74, 74, 74, 0.8);
    box-shadow: inset 0 1px 1px rgba(74, 74, 74, 0.8);
} 
```

当我点击输入元素时，什么也没有发生。iPad 中没有显示键盘。

**编辑：**这个网站使用 jQuery、jQuery UI 和 jQuery UI Touch。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:03:50.667

原来是这个问题：

[http://code.google.com/p/jquery-ui-for-ipad-and-iphone/issues/detail?id=17](http://code.google.com/p/jquery-ui-for-ipad-and-iphone/issues/detail?id=17)

在 jQuery UI Touch 中，在函数中

```
function iPadTouchHandler(event) { 
```

在开关/外壳中

```
 switch (event.type) {
        case "touchstart": 
```

改变

```
 if ($(event.changedTouches[0].target).is("select")) { 
```

至

```
 if ($(event.changedTouches[0].target).is("select") || $(event.changedTouches[0].target).is("input")) { 
```

修复错误。

# ruby - ruby 哈希添加键/值 if 修饰符

> ID：10986972
> 
> 赞同：6
> 
> 时间：2012-06-11T20:18:58.780
> 
> 标签：ruby, hash

我正在使用`hash`包含键/值对的 ruby​​，用于在我的 MailChimp API 中创建新订阅者。

```
user_information = {
    'fname' => 'hello world',
    'mmerge1' => 'Product X' if user.product_name.present?
} 
```

显然，我得到一个语法错误`syntax error, unexpected modifier_if`......我基本上只想添加`mmerge1`基于条件为真的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T20:24:14.913

您不能`if`在哈希初始化块内使用这种方式。初始化哈希后，您必须有条件地添加新的键/值：

```
user_information = {
    'fname' => 'hello world',
}

user_information['mmerge1'] = 'Product X' if user.product_name.present? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:21:43.580

```
user_information = {'fname' => 'hello world'}
user_information.merge!({'mmerge1' => 'Product X'}) if user.product_name.present?
#=> {"fname"=>"hello world", "mmerge1"=>"Product X"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:32:48.357

如果`mmerge1`允许为`nil`空字符串，则可以`?:`在散列中使用三元运算符：

```
user_information = {
  'fname' => 'hello world',
  'mmerge1' => user.product_name.present? ? 'Product X' : ''
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-13T14:04:59.527

如果您在键上使用条件表达式，您将获得合理可读的语法，并且最多只需要从 Hash 中删除 1 个元素。

```
product_name = false
extra_name = false

user_information = {
  'fname' => 'hello world',
  product_name ? :mmerge1 : nil => 'Product X',
  extra_name ? :xmerge1 : nil => 'Extra X'
}
user_information.delete nil

p user_information 
```

# java - 如何在类似于（JTable）的JGrid中单击鼠标并切换单元格？

> ID：10986976
> 
> 赞同：0
> 
> 时间：2012-06-11T20:19:09.933
> 
> 标签：java, jtable, listener, keylistener, listselectionlistener

我有`ListSelectionListener`它告诉我何时用鼠标选择了单元格。

```
JGrid grid = new JGrid();
grid.getSelectionModel().setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
grid.getSelectionModel().addListSelectionListener(new ListSelectionListener() {

   @Override
   public void valueChanged(final ListSelectionEvent e) {
       e.getFirstIndex();
       e.getLastIndex()
   }
} 
```

我只想在按住按钮切换时选择卖出。我该怎么做？

我需要它进行多项选择。当用户按住 shift 并单击它给我的单元格`getFirstIndex()`和 `getLastIndex()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:28:39.713

假设 JGrids 采用 keyListeners，将与此类似的 KeyListener 添加到您的 JGrid

```
boolean shiftIsDown = false;

yourJGrid.addKeyListener(new KeyListener()
        {
            public void keyPressed(KeyEvent e)
            {
                if (e.getKeyCode == e.VK_SHIFT) shiftIsDown = true; 
            }

            public void keyReleased(KeyEvent e)
            {
                 if (e.getKeyCode == e.VK_SHIFT && 
                     shiftIsDown == true) shiftIsDown = false;
            }

            public void keyTyped(KeyEvent e)
            {
                // nothing
            }

        }); 
```

现在，当您收到 valueChanged() 事件时，只需检查您的布尔“shiftIsDown”值是否为真，如果是，您可以进行选择。

# jquery - 错误：无法处理消息，因为内容类型为 'application/json; charset=utf-8 不是预期的类型

> ID：10986978
> 
> 赞同：4
> 
> 时间：2012-06-11T20:19:25.693
> 
> 标签：jquery, asp.net, ajax, wcf, .net-3.5

我正在尝试使用 jQuery 调用 WCF 服务并收到此错误：

```
"Cannot process the message because the content type 
'application/json; charset=utf-8' was not the expected type 'multipart/related; 
type="application/xop+xml"'." 
```

这就是我的 WCF 服务的样子：

界面：

```
public interface IService
{

    [OperationContract]
    [WebInvoke(Method = "POST",
      ResponseFormat = WebMessageFormat.Json)]
    PhotoServiceResponse GetPhoto();

}

[DataContract]
public class PhotoServiceResponse
{
    [MessageBodyMember]
    public Byte[] Photo { get; set; }
} 
```

执行：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service : IService
{
    #region IService Members

    public PhotoServiceResponse GetPhoto()
    {
        PhotoServiceResponse response = new PhotoServiceResponse();
        response.Photo = File.ReadAllBytes(@"C:\Temp\SomePic.bmp");
        return response; 
    }

    #endregion
} 
```

配置：

```
<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WsHttpMtomBinding" maxReceivedMessageSize="5242880" messageEncoding="Mtom">
          <readerQuotas maxStringContentLength="655360" maxArrayLength="1310720" maxNameTableCharCount="1310720" maxBytesPerRead="327680" />
        </binding>

      </wsHttpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior name="svcBehaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />

    <services>
      <service behaviorConfiguration="svcBehaviour"
               name="Service">
        <endpoint address="" binding="wsHttpBinding"
           contract="IService"
           bindingConfiguration="WsHttpMtomBinding"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8081/Service" />
          </baseAddresses>
        </host>
      </service>
    </services>
  </system.serviceModel> 
```

这就是我尝试使用 jQuery AJAX 访问此服务的方式：

```
 <script type="text/javascript">
    $.ajax({
      type: "POST",
      contentType: "application/json; charset=utf-8",
      url: "http://localhost:8081/Service/GetPhoto",
      data: "{}",
      crossDomain: true,
      dataType: "json",
      success: function (msg) {
            alert(msg);
      },
      error: function(jqXHR)
      {
        alert(jqXHR.statusText);
      }
    });

    </script> 
```

我收到此错误的原因是什么？我如何解决它？

他将高度赞赏任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:06:39.833

我认为你正面临一些例外，因为你在绑定和其他方面犯了一些错误。

对于 WCF 中的 REST 通信，您应该使用`webHttpBinding`and not `wsHttpBinding`。其次，您应该`Photo`用 标记该属性`DataMember`。

```
 [DataContract]
  public class PhotoServiceResponse
  {
    [DataMember]
    public Byte[] Photo { get; set; }
  } 
```

而且你必须`System.ServiceModel.Activation.WebServiceHostFactory`在 svc 文件中使用。

前任。

```
<%@ ServiceHost Service="Service1" 
Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

一旦你解决了这个问题，至少你会在客户端看到一些响应，如果服务在不同的域中运行，请确保你在服务端为跨站点通信做了足够的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:34:52.793

除非我真的误读了您的代码，否则您似乎试图通过 Ajax 将文件作为字节数组返回。这带来了几个问题。首先，[如 Ajax 返回类型的 jQuery API 参考中所述](http://api.jquery.com/jQuery.ajax/)，您似乎无法使用 jQuery 的内置 Ajax 对象通过 Ajax 返回文件。其次（更主观一点），为什么不直接返回文件的 URL，特别是如果它恰好是图像？除非您有令人信服的理由，否则我只会在您的 Ajax 结果中返回文件 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T11:06:26.400

尝试将其添加到您的课程之上：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

我有同样的问题，它解决了它。

# .htaccess - 子域 htaccess 重定向到 HTTPS URL

> ID：10986981
> 
> 赞同：0
> 
> 时间：2012-06-11T20:19:34.023
> 
> 标签：.htaccess, url-rewriting

我一直在尝试将我的子域重定向`buynow.mydomain.info`到产品链接，即`https://www.2checkout.com/checkout/purchase?sid=******&quantity=1&product_id=1`.

我尝试了简单的 .htaccess 行

```
Redirect 301 / https://www.2checkout.com/checkout/purchase?sid=******&quantity=1&product_id=1 
```

但它不起作用，它只重定向到`https://www.2checkout.com/checkout/purchase`而不提及我的产品，因为它忽略了 URL 的其余部分`?sid=******&quantity=1&product_id=1`

我认为可能是HTTPS链接的问题，但我无法解决，希望大家能帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:23:55.127

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) https://www.2checkout.com/checkout/purchase?sid=******&quantity=1&product_id=1 [R=301] 
```

# linux - 为我的图像编辑 Exif 方向标签

> ID：10986982
> 
> 赞同：1
> 
> 时间：2012-06-11T20:19:37.020
> 
> 标签：linux, image, jpeg, exif, exiftool

我想更改我的 JPEG 图像中的 Exif 方向标记，但没有实际旋转它们，我想这样做以将它们用作我制作的应用程序的测试用例。我如何在 Linux 中做到这一点，不能用 Exiftools 完成吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-11T04:32:22.567

类似的东西`exiftran -9 -ni -o modified.jpg original.jpg`对我很有效。`-9`导致 EXIF 方向顺时针旋转 90 度，但导致`-ni`图像保持原样，最终结果是图像顺时针旋转 270 度。代替`-9`，使用`-1`旋转 180 度，或`-2`旋转 270 度。

# c# - 为什么我的代码隐藏不执行？

> ID：10986985
> 
> 赞同：-1
> 
> 时间：2012-06-11T20:19:46.290
> 
> 标签：c#, asp.net

我正在尝试输出`x`以下请求中的值：`http://localhost:4827/Default.aspx?x=123123`

我根本没有输出。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;

using MPads.Common;
using MPads.WebPatientPortal.Interfaces;
using MPads.WebPatientPortal.Presenters;
using MPads.BusinessLogic.Interfaces;
using MPads.Components.Interfaces;
using MPads.DataAccess;

using MPads.DataAccess.Interfaces;
using System.Text;
using System.Diagnostics;

namespace MPads.WebPatientPortal
{
    public partial class Default : System.Web.UI.Page, IDefault
    {

        private DefaultPresenter _presenter;

        protected void Page_Load(object sender, EventArgs e)
        {
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            _presenter = new DefaultPresenter();

            var fields = Request.QueryString;

            if (fields.Count > 0)
            {
                var x = Utilities.GetNvpValue(fields, "x").ToString();
                Trace.Write(x);
            }

        }

        public void loadAjaxContent(string content)
        {
            Page.RegisterStartupScript("myScript", " <script type=\"text/javascript\"> loadAjaxContent('" + content + "','POST',null); </script>");
        }

        public void DisplayMessage(string message)
        {
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:34:49.820

您是否在 ASPX 中设置了偶数处理程序？

假设你这样做：考虑而不是`Trace.Write();`使用`Response.Write();`

`Trace.Write();`写入跟踪侦听器（您可以在页面底部显示）。

`Response.Write();`将文本结果直接输出到您的页面，而不是通过跟踪侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:03:03.637

Use Glimpse to find out this, here's the link [Glimpse-A client side Glimpse to your server](http://getglimpse.com/About/QuickStart)

# oracle - 计算oracle varchar列值中给定符号后的字符

> ID：10986988
> 
> 赞同：3
> 
> 时间：2012-06-11T20:19:55.273
> 
> 标签：oracle, string-length

我将如何计算某个字符之后的字符。我是 Oracle 的新手，我学到了很多东西，但是我在这一点上很困惑。我找到了几个可以为您提供子字符串的函数，并且我找到了一个可以为您提供字符串长度的函数。我正在检查一个电子邮件地址 myemail@thedomain.com。我想检查“。”之后的长度。在电子邮件中。

```
SELECT email
FROM user_table
WHERE length(substr(email, /*what values*/, /*to put here*/)) 
```

我不知道是否真的可以找到最后一个'.'的位置。在电子邮件字符串中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:23:51.207

我不确定我会使用`substr`. 你可以尝试这样的事情：

```
select length('abcd@efgh.123.4567') - instr('abcd@efgh.123.4567', '.', -1) from dual 
```

使用`instr(..,..,-1)`从最后一个字符向后搜索来查找位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:54:32.073

由于您正在进行检查，我建议您使用[REGEXP_INSTR](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_regexp.htm)使用正则表达式验证格式。例如，我在这个网站上找到的电子邮件验证是`REGEXP_INSTR(email, '\w+@\w+(\.\w+)+') > 0`

我自己没有检查，但看起来还不错。

干杯。

# java - Java XMLReader 在 XML 中的特殊字符上获取 SAXParseException

> ID：10986990
> 
> 赞同：2
> 
> 时间：2012-06-11T20:20:19.670
> 
> 标签：java, xml, sax

我在解析包含元素属性中的特殊字符（如“、<、> 或 &一堆文件。知道我能做什么吗？

最好的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:55:26.327

它不是 XML。不要称它为 XML，因为你在误导自己。您正在处理专有的数据语法，并且错过了使用 XML 进行数据交换的所有好处。您不能使用任何现有的处理 XML 的出色工具，因为您的数据不是 XML。您正处于 XML 发明之前存在的数据交换的黑暗时代，每个人都必须编写自己的解析器并将它们移植到多个平台，而且成本很高。从这种混乱状态切换到开放标准的现代世界可能会很昂贵，但投资将很快得到回报。只是不要让任何利益相关者自欺欺人地认为，因为您的语法“几乎是 XML”，因此您几乎可以从中获益。XML 要么全有，要么全无。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T20:21:59.967

您必须更改 XML 以使其格式正确。这五个魔术字符必须正确编码或包装在 CDATA 部分中，以告诉解析器允许它们通过。

如果五个魔术字符未正确编码，则您不会收到格式正确的 XML。这应该是您与用户签订合同的基础。

进行一次性更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:02:37.787

这[不是最佳实践](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)，但您可以使用正则表达式将几乎 XML 转换为正确的 XML，然后再使用 XMLReader 打开它。沿着这些思路（仅使用 javascript 进行快速概念验证）：

```
var xml = '<root><node attr="bad attr chars...<"&>..."/></root>';
xml = xml.replace(/("[^"]*)&([^"]*")/, '$1&amp;$2')
xml = xml.replace(/("[^"]*)<([^"]*")/, '$1&lt;$2')
xml = xml.replace(/("[^"]*)>([^"]*")/, '$1&gt;$2')
xml = xml.replace(/("[^"]*)"([^"]*")/, '$1&quot;$2')
alert(xml); 
```

# sql - SQL Joining 3表标签系统codeigniter

> ID：10986999
> 
> 赞同：3
> 
> 时间：2012-06-11T20:21:17.377
> 
> 标签：sql, codeigniter, join, tags

我一直在尝试为我的帖子提出一个标签系统，但我无法获得我想要的值。相反，我似乎无法理解表连接的逻辑。我试图找到信息来帮助我，但我想我需要有人真正奠定基础。

无论如何，这些是我的表（缩短帖子表）；

```
POSTS
post_id
post_title
post_freetext

POST_TAGS
post_id
tag_id

TAGS
tag_id
tag_text 
```

我想要做的是获取连接到单个标签的所有帖子。

我的 CodeIgniter 代码如下所示；

```
 $this->db->select('*');
   $this->db->from('posts');
   $this->db->join('post_tags', 'post_tags.post_id = posts.post_id' ,'inner');
   $this->db->join('tags', 'tags.tag_id = posts.post_id', 'inner');
   $this->db->where('tag_text =', $tagid);
   $this->db->order_by('posts.post_id', 'desc');
   $q = $this->db->get(); 
```

在这种情况下，$tagid 是我正在寻找的字符串（读取标签）。

我成功地加入了两个表并获取了帖子，但后来我意识到我无法让用户查看所有标签（因此我需要一个单独的“标签”表）。但似乎无法做到这一点。

任何帮助都将不胜感激，我确实意识到这个问题可能已被多次回答 - 仍然无法理解逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:40:13.827

关于加入此页面的逻辑可能会有所帮助

[http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

在您的代码中，您在第二次加入时出错

> $this->db->join('tags', 'tags.tag_id = posts.post_id', 'inner');

这两个表没有连接（外键在哪里，它指向哪里）。

您必须使用表 post_tags 而不是帖子，因此请使用以下内容：'post_tags.tag_id = tags.tag_id'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:28:14.620

```
$this->db->select('*');
   $this->db->from('posts');
   $this->db->join('post_tags', 'post_tags.post_id = posts.post_id' ,'inner');
   $this->db->join('tags', 'tags.tag_id = post_tags.tag_id', 'inner');
   $this->db->where('tag_text', $tagid);
   $this->db->order_by('posts.post_id', 'desc');
   $q = $this->db->get(); 
```