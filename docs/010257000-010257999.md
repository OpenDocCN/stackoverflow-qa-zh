# StackOverflow 问答 10257000-10257999

# c# - 这是否可以通过命令提示符从 C# 运行 python 代码？

> ID：10257000
> 
> 赞同：2
> 
> 时间：2012-04-21T07:02:20.260
> 
> 标签：c#, python, c#-4.0

我想通过命令提示符从 C# 运行 python 代码。代码附在下面

```
 Process p = new Process();
    p.StartInfo.FileName = "cmd.exe";
    p.StartInfo.WorkingDirectory = @"d:";
    p.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.RedirectStandardInput = true;

    p.Start();
    p.StandardInput.WriteLine(@"cd D:\python-source\mypgms");
    p.StandardInput.WriteLine(@"main.py -i example-8.xml -o output-8.xml");

    string output = p.StandardOutput.ReadToEnd();
    p.WaitForExit();

    Console.WriteLine("Output:");
    Console.WriteLine(output);

Output :

D:\python-source\mypgms>main.py -i example-8.xml -o output-8.xml

D:\python-source\mypgms> 
```

但什么也没发生。实际上 main.py 是我的主程序，它需要 2 个参数。一个是输入 xml 文件，另一个是转换后的输出 xml 文件。

但我不知道如何通过命令提示符从 C# 运行这个 python 脚本。请指导我摆脱这个问题......

谢谢和问候， P.SARAVANAN

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T07:15:19.550

I think you are mistaken in executing cmd.exe. I'd say you should be executing python.exe, or perhaps executing main.py with UseShellExecute set to true.

At the moment, your code blocks at p.WaitForExit() because cmd.exe is waiting for your input. You would need to type exit to make cmd.exe terminate. You could add this to your code:

```
p.StandardInput.WriteLine(@"exit"); 
```

But I would just cut out cmd.exe altogether and call python.exe directly. So far as I can see, cmd.exe is just adding extra complexity for absolutely no benefit.

I think you need something along these lines:

```
var p = new Process();
p.StartInfo.FileName = @"Python.exe";
p.StartInfo.Arguments = "main.py input.xml output.xml";
p.StartInfo.WorkingDirectory = @"D:\python-source \mypgms";
p.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.Start();
p.WaitForExit(); 
```

Also the Python script appears to output to a file rather than to stdout. So when you do p.StandardOutput.ReadToEnd() there will be nothing there.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T07:11:40.277

为什么不在您的应用程序中托管 IronPython，然后执行脚本？

[http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-ac-4-0-program.aspx](http://blogs.msdn.com/b/charlie/archive/2009/10/25/hosting-ironpython-in-a-c-4-0-program.aspx)

[http://www.codeproject.com/Articles/53611/Embedding-IronPython-in-aC-Application](http://www.codeproject.com/Articles/53611/Embedding-IronPython-in-a-C-Application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T07:15:14.033

或使用[py2exe](http://www.py2exe.org/index.cgi/Tutorial)实用地将您的 python 脚本转换为 exe 程序。

详细步骤...

*   download and install [py2exe](http://sourceforge.net/projects/py2exe/files/py2exe/).
*   put your main.py input.xml and output.xml in c:\temp\
*   create setup.py and put it in folder above too

setup.py should contain...

```
from distutils.core import setup
import py2exe

setup(console=['main.py']) 
```

your c# code then can be...

```
var proc = new Process();
proc.StartInfo.FileName = @"Python.exe";
proc.StartInfo.Arguments = @"setup.py py2exe";
proc.StartInfo.WorkingDirectory = @"C:\temp\";
proc.Start();
proc.WaitForExit();

proc.StartInfo.FileName = @"C:\temp\dist\main.exe";
proc.StartInfo.Arguments = "input.xml output.xml";
proc.Start();
proc.WaitForExit(); 
```

# c# - 将数组值传递给对象类

> ID：10257003
> 
> 赞同：0
> 
> 时间：2012-04-21T07:02:55.437
> 
> 标签：c#, c#-4.0

我想知道如何在 C# 中将值从数组传递和存储到类对象。

这是我的主要程序代码

```
public partial class Form1 : Form
    {
        List<Configuration> lines = new List<Configuration>();

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.listBox1.Items.Clear();
            //Read in every line in the file
            using (StreamReader reader = new StreamReader("file.txt"))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    string textfile = line;
                    string[] array = new string[] { "\\n" };
                    string[] parts = textfile.Split(array, StringSplitOptions.RemoveEmptyEntries);

                    ///////////////////////////////////////////////////
                    for (int i = 0; i < parts.Length; i++)
                    {
                       lines.Add(new Configuration(parts[i],0));

                    }
                    //lines.Add(new Configuration(line));

                    //listBox1.Items.Add(line);
                }

            }
            listBox1.DataSource = lines;
            listBox1.DisplayMember = "CompanyName";
        }
    } 
```

我的班级目标代码

```
class Configuration
    {
        string _CompanyName;
        int _Employees;

        public Configuration(string companyname, int number_of_Employees)
        {
            _CompanyName = companyname;
            _Employees = number_of_Employees;
        }

        //program properties and validation
        public string CompanyName
        {
            set
            {
                _CompanyName = value;
            }
            get
            {
                return _CompanyName;
            }
        }// End of levelname validation

        //program properties and validation
        public int EmployeesNumber
        {
            set
            {
                _Employees = value;
            }
            get
            {
                return _Employees;
            }
        }// End of levelname validation
    } 
```

目前，该程序读取一个文本文件，其中包含公司列表和每家公司的员工人数。像这样的结构

```
Microsoft\n92200
Google\n33077
Apple\n60400
IBM\n426751
Facebook\n3000 
```

当程序运行时，它将公司名称和员工人数分成一个数组。该部分工作正常，它只是将所有内容存储到 String companyName 中。当我尝试修改它以将值存储在类对象的不同字段中时，我会出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:10:49.997

当您将行`"\\n"`与示例中的行分开时，您将获得一个包含两个项目的数组。第一项是左边的`\n`，第二项是右边的。

在您的代码中，您将遍历这两个项目并创建新`Configuration`对象，并将每个对象作为构造函数的第一个参数传入。

构造函数接受两个参数，名称和编号。在每一行中，拆分的第一项是名称，第二项是数字（以字符串表示形式）。与其将这两个部分分别作为第一个参数传递给构造函数，不如在创建对象时同时使用这两个部分。虽然您将数字作为字符串，但您需要先将其转换为整数才能在构造函数中使用它......

一旦您对该部分进行了分类，我相信这应该可以解决您遇到的问题（无论是什么）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T07:46:56.747

```
var configs = 
    from line
    in reader.ReadToEnd().Split(new[] { '\n' }, StringSplitOptions.RemoveEmptyEntries)
    let pair = line.Split(new[] { "\\n"}, StringSplitOptions.RemoveEmptyEntries)
    select new Configuration(companyname: pair.First(), number_of_Employees: int.Parse(pair.Last()));

lines = configs.ToList(); 
```

# iphone - Retina 显示屏上的字体和线条

> ID：10257005
> 
> 赞同：3
> 
> 时间：2012-04-21T07:03:17.367
> 
> 标签：iphone, objective-c, ios, retina-display

我已经在@1x 版本中完成了我的应用程序，并创建了很多带有代码的界面，这意味着：

*   用户标签
*   UIViews

一切看起来都很棒。如果我现在在视网膜显示器上使用该应用程序，显然一切都可以扩展到@2x。我有一些用烟花/photoshop 设计的图形，当然，它们的@2x 版本也可以正常工作。我的问题是如上所述的标准界面元素。

问题：我该怎么办

*   在 UILabel 中有一个字体在两种分辨率上都有 1px 的笔划，但在 @2x 上的高度和宽度加倍？
*   在两种分辨率上都有一个高度为 1px（作为屏幕分隔符）的 UIView？@2x 上的 2px 线是可以的，但 id 真的宁愿让它们 1px 的高度 - 看起来更优雅。

用于创建我当前使用的分隔符视图：

```
UIView *separatorLine = [[UIView alloc]initWithFrame:CGRectMake(0,200,320,1)];
[self.view addSubview:seperatorLine]; 
```

在@1x 分辨率下工作正常，但在@2x 中被放大到 2px 高度，而不是在@2x 中显示为：

```
seperatorLine.frame == (0,400,640,1) 
```

我需要如何更改这样的代码才能在两种分辨率下工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:07:58.647

您可以通过以下方式检查屏幕比例

```
CGFloat scale = ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] ? [UIScreen mainScreen].scale : 1.0); 
```

如果比例等于 2.0，则您在视网膜显示器上，并且可以更改分隔符的框架，例如，更改为`CGRectMake(0.0, 200.0, 320.0, 0.5)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:31:09.377

使用 Apple 的 Cocoa 元素时，您无需担心任何这些，这对我们开发人员来说是视网膜显示的最佳部分！

您需要像您所说的那样将您的图形@2x，但设备会根据需要自动缩放 Cocoa 显示元素。苹果已经明确区分了“像素”和“点”，并且使用点来设置帧。一个点在传统显示器上是 1px，在 Retina 显示器上是 2px。这意味着事实上，如果你将你的框架设置`CGRectMake(0,400,640,1)`为你提到的将线放在屏幕底部并且是屏幕宽度的两倍（当然被屏幕的边界剪裁）。如果你真的希望这条线在视网膜显示器上的高度为 1 像素，请将其设为图像。标准图像可以是 320x1，@2x 可以是 640x1。

如果您想了解我的意思但没有 Retina 显示设备，您可以在模拟器中运行并从菜单中选择 Hardware > Device > iPhone (Retina)

祝你好运。

# sql-server-2008 - 在合并复制中使用 T-SQL 从订阅服务器中删除推送订阅

> ID：10257006
> 
> 赞同：2
> 
> 时间：2012-04-21T07:03:21.920
> 
> 标签：sql-server-2008, tsql, replication, subscription, merge-replication

我有一个使用合并复制同步的发布服务器和订阅服务器。当我使用向导删除复制时，登录窗口要求我登录订阅服务器并删除其订阅，但是当我使用生成的脚本删除复制时，订阅者中的订阅不会删除。我怎样才能使用 TSQL 做到这一点？换句话说：我想**连接到订阅者并删除订阅者的订阅记录也**使用 T-SQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:30:50.370

要删除合并推送订阅，您必须同时连接到发布者和订阅者。按照[如何：删除推送订阅（复制 Transact-SQL 编程）](http://msdn.microsoft.com/en-us/library/ms146944.aspx) -在发布服务器上执行[sp_dropmergesubscription ，在订阅服务器上执行](http://msdn.microsoft.com/en-us/library/ms176045.aspx)[sp_mergesubscription_cleanup](http://msdn.microsoft.com/en-us/library/ms188391.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T12:08:40.377

最后我找到了我的问题的解决方案：

我使用 Linked Server 创建到远程服务器的连接：

```
exec sp_addlinkedserver 'RemoteServer\PeerInstance', N'SQL Server'

exec sp_addlinkedsrvlogin 'RemoteServer\PeerInstant', 'true', 'sa', 'password'

exec ReplicatedDBOnMainServer.sys.sp_dropmergesubscription
@publication = N'PublicationName', 
@subscriber = N'RemoteServer\PeerInstant'

exec [RemoteServer\PeerInstant].ReplicatedDBOnRemote.sys.sp_mergesubscription_cleanup
@publisher = N'MainServer\MainInstant', 
@publisher_db = N'ReplicatedDBOnMainServer'
@publication = N'PublicationName' 
```

# c# - 在更新面板中找不到上传的文件

> ID：10257008
> 
> 赞同：2
> 
> 时间：2012-04-21T07:03:31.210
> 
> 标签：c#, asp.net, .net, updatepanel

aspx：

```
<asp:UpdatePanel ID="updtEmpMaster" runat="server">
<ContentTemplate>

<asp:FileUpload ID="tPhoto" Height="23px" runat="server" />
<asp:Button ID="Button1" CssClass="btnImage" runat="server" Text="OK" 
onclick="Button1_Click" />

</ContentTemplate>
</asp:UpdatePanel> 
```

aspx.cs：

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (tPhoto.HasFile)
    {
    …………………..;
    }
    else
    {
        …………………..;
    }
} 
```

即使在上传图像文件后条件仍然失败。不使用时没有问题`UpdatePanel`。`UpdatePanel`在当前情况下也需要。任何方式我都可以用`UpdatePanel`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:50:51.143

应用此代码行来解决您的问题，在更新面板中找到文件上传器：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.Form.Attributes.Add("enctype", "multipart/form-data");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:09:23.267

根据链接[http://forums.asp.net/p/1105208/1689084.aspx](http://forums.asp.net/p/1105208/1689084.aspx)

这个问题有据可查，更新面板被列为不适用于某些控件。

文件上传和树状视图是其中的两个。

在任何情况下，代码项目都有一个解决方案：

[http://www.codeproject.com/useritems/simpleajaxupload.asp](http://www.codeproject.com/useritems/simpleajaxupload.asp)

如果您浏览论坛和谷歌，如果您有兴趣，您可以阅读有关该问题的更多信息，但代码项目解决方案应该可以帮助您入门。

# php - TINYMCE 编辑器中的拼写检查器

> ID：10257010
> 
> 赞同：1
> 
> 时间：2012-04-21T07:03:48.187
> 
> 标签：php, tinymce, spell-checking

在我的编辑器中，当我单击拼写检查器时，它会显示：

```
Please specify: spellchecker_rpc_url 
```

此消息显示在警报框中。

是什么原因？

我应该在哪里设置 spellchecker_rpc_url ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:12:19.633

尝试这个：

```
tinyMCE.init({
    spellchecker_rpc_url: '/path/to/tiny_mce/plugins/spellchecker/rpc.php',
}); 
```

# performance - 作为您自己的 API 的客户端是否存在性能问题？

> ID：10257011
> 
> 赞同：3
> 
> 时间：2012-04-21T07:03:56.683
> 
> 标签：performance, web-services, api, rest

以 Twitter 为例，他们说 twitter.com 是他们自己 API 的客户端。这可能是 Twitter 相当“慢”的原因之一吗？

参考：[http ://engineering.twitter.com/2010/09/tech-behind-new-twittercom.html](http://engineering.twitter.com/2010/09/tech-behind-new-twittercom.html)

你会推荐为你的主要网站/应用程序使用你自己的 API 吗？

如果使用自己的 API 是可以的，有什么方法可以避免性能问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:58:18.253

**关于使用自己的 API：**这是关于权衡的。在 twitter 示例中，通过使用他们自己的 API，他们能够“为 API 团队分配更多资源”。对他们来说，这种好处超过了对性能的影响。还有其他未提及的好处，例如，第一个审查您的 api 并在系统中拥有一个统一的入口点。您发布的链接中也提到了一些缺点。

对于您的应用程序，您应该查看您想要实现的架构质量，并与给定的约束平衡并做出自己的选择。如果超高性能是最重要的，那么请制定您的解决方案来实现该目标。

**关于使用您自己的 API 时的性能：**同样取决于。在 twitter 案例中，他们知道他们将使用 JavaScript 访问 API。所以物理跳转是Browser --> Server --> DB。如果您正在进行客户端-服务器开发，则无法绕过这些跃点。在您发布的链接中，他们谈到了直接访问数据库。是的，那会更快，但我不确定如何从 javascript 客户端执行此操作。我想如果他们将 websockets 用于自定义 API，那会更快，但开发成本是多少。

**总结**因此，并不是他们使用自己的 API 对性能造成了影响，而是他们希望客户端远离 HTTP 跃点。请注意，这些评论都没有谈论服务器 --> db 调用的样子或它们的缓存策略，或者其他十几个可能成为瓶颈的事情

# jquery - 屏幕水平调整大小时弹出位置

> ID：10257014
> 
> 赞同：1
> 
> 时间：2012-04-21T07:04:46.557
> 
> 标签：jquery, css, wordpress

我在水平顶部菜单中有链接以打开弹出窗口。该链接是一个大约 150 像素的图像。然后有一个弹出 div 它具有与菜单图像右对齐的绝对位置。现在问题出现了，当屏幕重新调整水平尺寸时，它会失去与按钮的对齐，并且会错位。

如何使用菜单图像更改弹出窗口的位置以保持对齐

该网站使用 firebird 主题构建在 wordpress 中。我试图将它放在相对位置但没有成功。

弹出CSS，

```
 .quote {
    background:url('images/form-bg.png') no-repeat;width:400px !important;height:510px  !important;
    z-index:999999;position:absolute;top:77px;left:550px; padding-left:30px;padding-top:39px;display:none; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:22:33.513

您应该获取菜单图像的偏移顶部并将此顶部属性设置为弹出顶部，例如：

```
$(document).ready(function () {
 $('#menu image').click(function(){
  var offset = $(this).offset();
  //this will represent you click menu image  
     $('#popup').css({'top':offset.top});
  });
}); 
```

# python - 如何在 Python 上使用 Xlib 模拟鼠标点击

> ID：10257019
> 
> 赞同：4
> 
> 时间：2012-04-21T07:05:42.400
> 
> 标签：python, xlib, wiimote

出于教育目的，我已经着手编写一个 python 脚本`cwiid`，`Xlib`以便我可以像使用鼠标一样使用我的 wiimote。

到目前为止，我已经通过调用`disp.warp_pointer(dx,dy)`然后调用`disp.sync()`每个设置的时间间隔来移动光标。恐怕这可能不是最有效的方法，但至少现在，它很简单并且效果很好。

我遇到更多困难的问题是鼠标点击。如何在 Xlib 中模拟鼠标点击？我想要单独的新闻和发布事件，以便我可以拖放内容。我遇到过[这篇](https://stackoverflow.com/questions/3545230/simulate-mouse-clicks-on-python)文章，但那里的所有解决方案似乎都使​​用了其他库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T19:40:26.423

仅使用 python Xlib ：

```
from Xlib import X
from Xlib.display import Display
from Xlib.ext.xtest import fake_input
d = Display()
fake_input(d, X.ButtonPress, 1)
d.sync()
fake_input(d, X.ButtonRelease, 1)
d.sync() 
```

第三个参数`fake_input`选择被模拟的鼠标按钮。1/2/3 是左/中/右按钮，4/5 和 6/7 应该做垂直和水平滚轮滚动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:25:26.777

On plain Xlib (C language), you can use the `XTestExtension` or `XSendEvent()`. I'm not sure about their python bindings. There are probably bindings for their xcb versions using `xpyb`.

There's also a binary called `xte` from the `xautomation` package (on Debian, `sudo apt-get install xautomation` and then `man xte`). `xte` is very easy to use, and you can also look at its source code to learn how to use the `XTestExtension`.

Pointers:

*   [http://cgit.freedesktop.org/xorg/lib/libXtst/](http://cgit.freedesktop.org/xorg/lib/libXtst/)
*   [http://cgit.freedesktop.org/xcb/xpyb/](http://cgit.freedesktop.org/xcb/xpyb/)
*   [http://hoopajoo.net/projects/xautomation.html](http://hoopajoo.net/projects/xautomation.html)
*   [http://linux.die.net/man/1/xte](http://linux.die.net/man/1/xte)

# database-design - 是否可以创建一个包含普通列和超级列的列族？

> ID：10257020
> 
> 赞同：2
> 
> 时间：2012-04-21T07:06:04.983
> 
> 标签：database-design, cassandra, hector

我正在寻找一个列族，我可以在其中添加超级列和普通列，如下例所示

```
keyspace1{
      :rowid1 AND its associated column field
      :rowid2 with a Super Column 
} 
```

可能吗？如果是，请建议提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:01:30.440

我知道我没有直接回答您的问题，但我认为您应该重新考虑在数据模型中使用 SuperColumns。

我引用了 DataStax 最近（2012 年 2 月 15 日）发布的[一篇文章：](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

> SuperColumns 是提供上述相同类型的非规范化工具的早期尝试。它们有重要的限制（例如，从 SuperColumn 读取任何子列会将整个 SuperColumn 拉入内存）并且最终将被具有相同 API 的复合列实现所取代。所以如果你有一个使用 SuperColumns 的应用程序，你不需要重写任何东西，但是如果你是重新开始，你应该使用上面描述的更灵活的方法。

我认为值得你看看，[这里](http://www.datastax.com/dev/blog/introduction-to-composite-columns-part-1)可能是一个不错的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:21:34.167

问题的答案是否定的，这是不可能的。您不能在一个色谱柱族中混合标准色谱柱和超级色谱柱。最好避免使用超级列，因为它会随着时间的推移而被弃用。

不过，我最近确实看到了一篇关于 Cassandra 用户组的文章，其中指出了超级列族的一些优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T12:26:56.923

不可以，您不能在同一个色谱柱系列中混合使用标准色谱柱和超级色谱柱。创建柱族时，必须指定是标准柱族还是超级柱族。但是，您可以通过使用复合列（推荐使用超列）来实现相同的效果。

# vb.net - 单击另一个表单上的特定按钮

> ID：10257023
> 
> 赞同：1
> 
> 时间：2012-04-21T07:06:24.010
> 
> 标签：vb.net

考虑我有两种形式，form1 和 form2

如何使用 vb.net 中的编码单击、鼠标悬停（任何事件）另一个表单上的特定按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:48:07.917

我假设 Form1 启动 Form2，因为描述中没有很多信息。

当 Form1 启动时，有两个按钮：“button1”和“Launch Form 2”（忘记更改 button1 上的文本，抱歉。:(

![表格1](../Images/b331e85dc0596784c7a6dba615021bb9.png)

点击“Launch Form 2”，弹出Form2：

![表格2](../Images/d5e52a7b2c0aec2e7cf317fb6a6da53b.png)

单击 Form1 上的“button1”，会弹出一个来自 Form1 的消息框，内容为：

![form1Message](../Images/92c7ff28cc72ac66b41bd110ea1003fd.png)

单击 Form2 上的“button1”，会弹出一个来自 Form1 的消息框，内容为：

![form2Message](../Images/9676a3f111158867bf02384be9a21f7b.png)

这是代码：

**表格1**

```
Public Class Form1

    Private WithEvents frm2 As New Form2

    Private Sub Form1Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Form1Button.Click
        RunSomeCode("Called from form 1!")
    End Sub

    Public Sub RunSomeCode(ByVal message As String)
        MessageBox.Show(message)
    End Sub

    Private Sub Form1LaunchForm2Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Form1LaunchForm2Button.Click
        frm2.Activate()
        frm2.Show()
    End Sub

    Private Sub frm2_SimulateForm1ButtonClick() Handles frm2.SimulateForm1ButtonClick
        RunSomeCode("Called from form 2!")
    End Sub
End Class 
```

**表格2**

```
Public Class Form2

    Public Event SimulateForm1ButtonClick()

    Private Sub Form2Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Form2Button.Click
        RaiseEvent SimulateForm1ButtonClick()
    End Sub
End Class 
```

**这个怎么运作**

表单 2 有一个名为“SimulateForm1ButtonClick”的公共事件。可以随时从任何代码块引发该事件。我只是决定在单击表单上的按钮时提出它。

Form 1 有一个 Form2 **WithEvents**的实例。使用 WithEvents 关键字非常重要，否则 Form2 中的公共事件将不会显示。:(

Form 1 有一个 sub 处理 Form2 单击其按钮时引发的“SimulateForm1ButtonClick”。

现在，这里有另一个重要的细节：当在 Form1 上单击 button1 时执行的代码实际上是在一个名为 RunSomeCode() 的私有子中。这很重要，因为它使代码可以从 Form1 的任何其他部分访问，即处理 Form2 事件的部分。

我希望这对你有所帮助。我不确定你在问什么。：/

代码：[http ://darin.hoover.fm/code/dl/FormsSandbox.zip](http://darin.hoover.fm/code/dl/FormsSandbox.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T21:38:09.330

如果您试图触发事件，只需`Form2.Button1.PerformClick()`假设表单 2 上的按钮称为“button1”。

# objective-c - 基于定时器以毫秒精度执行函数

> ID：10257024
> 
> 赞同：2
> 
> 时间：2012-04-21T07:06:37.540
> 
> 标签：objective-c, timer, precision

我有一个浮点数组，它们表示基于一段时间内触发事件的时间值。

```
0: time stored: 1.68
1: time stored: 2.33
2: time stored: 2.47
3: time stored: 2.57
4: time stored: 2.68
5: time stored: 2.73
6: time stored: 2.83
7: time stored: 2.92
8: time stored: 2.98
9: time stored: 3.05 
```

我现在想启动一个计时器，当计时器达到 1 秒 687 毫秒（数组中的第一个位置）时，触发事件/方法执行。并且当计时器达到 2 秒和 337 毫秒以触发第二个方法执行时，直到数组中的最后一个元素在 3 秒和 56 毫秒时触发最后一个事件。

我怎么能模仿这样的东西？我需要高精度的东西

我想我本质上要问的是如何创建一个具有高精度方法调用的节拍器来按时播放声音？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:17:29.917

> …如何创建具有高精度方法调用的节拍器以按时播放声音？

您将使用音频时钟，它具有您通常想要的所有精度（音频播放的采样率 - 例如 44.1kHz） - 而不是`NSTimer`.

具体来说，您可以使用采样器（例如 AudioUnit）并安排 MIDI 事件，或者您可以在由节奏确定的样本位置处的音频流回调中使用（预加载的）点击声音的样本数据填充缓冲区。

为了保持 1 毫秒或更好，您需要始终将您的时间设置为基于音频时钟。这真的很容易，因为您的速度将决定帧的间隔。

如果您以前没有在该领域工作过，那么困难的部分（对于大多数人来说）是习惯于在实时环境中工作并使用音频框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T11:10:11.613

调查[`dispatch_after()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dispatch_after.3.html)。你可以使用类似的东西为它创建一个目标时间`dispatch_time(DISPATCH_TIME_NOW, 1.687000 * NSEC_PER_SEC)`。

* * *

更新：如果您**只想**在特定时间播放声音，而不是做任意工作，那么您应该使用允许您在特定时间安排播放的音频 API。我最熟悉[Audio Queue API](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html)。您将创建一个队列并创建 2 或 3 个缓冲区。（如果音频始终相同，则为 2。如果您动态加载或计算它，则为 3。）然后，您将使用`AudioQueueEnqueueBufferWithParameters()`特定的开始时间对每个缓冲区进行排队。然后，音频队列将负责播放尽可能接近请求的开始时间。我怀疑您是否会通过手动编写替代方案来超越其精度。当队列将处理过的缓冲区返回给您时，您可以在必要时重新填充它并在下一次将其排队。

我确信[AVFoundation](https://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)必须有类似的工具来安排在特定时间播放，但我不熟悉它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T07:34:54.737

要获得高精度的时序，您必须跳下一两个编程级别并使用诸如[Core Audio Unit](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/TheAudioUnit/TheAudioUnit.html#//apple_ref/doc/uid/TP40003278-CH12-SW1)框架之类的东西，它提供样本精确的时序（在 44100kHz 时，样本应该每 0.02 毫秒左右发生一次）。

这种方法的缺点是为了获得这样的计时性能，Core Audio Unit 编程避开了 Objective-C 的 C/C++ 方法，在我看来，这比 Objective-C 更难编码。除此之外，Core Audio Units 的工作方式也很令人困惑，尤其是如果您没有音频 DSP 方面的背景。

留在 Objective-C 中，你可能知道 NSTimers 在这里不是一个选项。为什么不检查[AVFoundation 框架](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)？它可用于精确的媒体排序，并具有一些创造性的侧面思考，以及[AVURLAsset](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVURLAsset_Class/Reference/Reference.html)`AVURLAssetPreferPreciseDurationAndTimingKey`的选项 ，您可能无需使用 Core Audio Units 即可实现您想要的。

* * *

只是为了填写更多 about `AVFoundation`，您可以将 的实例`AVAsset`放入`AVMutableComposition`（通过`AVMutableCompositionTrack`对象），然后使用`AVPlayerItem`带有`AVPlayer`实例的对象来控制结果。AVPlayerItem 通知`AVPlayerItemDidPlayToEndTimeNotification`（[docs](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html)）可用于确定单个资产何时完成，而 AVPlayer 方法`addBoundaryTimeObserverForTimes:queue:usingBlock:`可以`addPeriodicTimeObserverForInterval:queue:usingBlock:`在任意时间提供通知。

对于 iOS，如果您的应用程序将播放音频，您还可以让这一切在后台线程上运行，这意味着您可以在应用程序处于后台时保持时间（尽管警告，如果它不播放音频，Apple 可能会不接受您的应用使用此后台模式）。查看[UIBackgroundModes 文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)了解更多信息。

# javascript - javascript中的reponseXML和loadXML有什么区别？

> ID：10257027
> 
> 赞同：2
> 
> 时间：2012-04-21T07:07:14.513
> 
> 标签：javascript, xml, ajax, internet-explorer

我的问题完全集中在 Microsoft (Trident) 浏览器上。reponseXML 和 loadXML 有什么区别？显示以下两个代码：

方式1：

```
 var xmlObj = new ActiveXObject("Msxml2.DOMDocument");
    xmlObj.async = false;
    xmlObj.load('/files/xml/books.xml'); 
```

方式2：

```
var request = new ActiveXObject("Microsoft.XMLHTTP");
request.open("GET", "files/xml/books.xml", false);
request.onreadystatechange = function() { var xmlObj = request.responseXML; };
request.send(null); 
```

在上面的代码片段中，两种情况下的变量 xmlObj 都是 xml 文档。但是它们之间有什么区别吗？因为我试图在没有 ajax 调用的情况下做某事，所以使用前面的代码片段，但它不起作用，尽管 xmlObj 具有预期的 xml 文件内容。请帮忙。谢谢。

编辑 ：

我发现了不同之处。让我们考虑 books.xml 是：

```
<books>
  <book>
      <a/><b/>
  </book>
  <book>
      <a/><b/>
  </book>
</books> 
```

现在 xmlObj.getElementsByTagName('a').length 将为第二种方法（ajax 调用）返回 2，而第一种方法将返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:24:07.987

使用这两个 API 之间可能遇到的唯一区别是您正在处理的 MSXML 版本，因为您在一种情况下指定 MSXML2 而在另一种情况下不指定。通常，除非您执行大量 XPath 或 XSLT，否则您不会看到任何明显的效果。

然而，对于那些特定的代码片段，它们是完全不同的。尽管您指定以**方式 2**`send()`同步执行，但该事件将触发多次，因此您还应该在获取.**`onreadystatechanged``request.readyState == 4``responseXML`**

 **`onreadystatechanged`也就是说，因为它是同步的，所以你根本不需要使用它，因为它`send()`只会在请求完成后返回，所以你可以抓住`request.responseXML`下一行。

我还应该提到，因为您谈到了无效的 XML，所以两种方法中的错误情况是相同的。两者都不会为无效的 XML 抛出异常 - 您将获得一个非零`xmlObj.parseError.errorCode`值。**

# google-chrome-extension - Chrome扩展程序说这可以在离线模式下使用

> ID：10257030
> 
> 赞同：1
> 
> 时间：2012-04-21T07:07:44.560
> 
> 标签：google-chrome-extension

问题一：

我的 Chrome 商店的 Chrome 扩展程序说我的插件可以在离线模式下运行，但它会从 json 下载和更新数据，这是他们在没有互联网的情况下无法做到的。那么我该如何删除，因为它不在 Chrome 商店中。

可以离线运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:20:31.450

如果我理解正确，您应该从清单文件中删除此行：

> “offline_enabled”：真

[在code.google.com](https://developer.chrome.com/extensions/manifest/offline_enabled.html)上阅读它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:23:25.777

在离线模式下运行的扩展意味着如果没有互联网连接，您的扩展仍然可以工作，并且一旦再次建立连接，任何更改都将排队在线同步。由于 Web Store 上的所有 Chrome 扩展程序都需要有效连接才能安装，您可以放心地假设您的扩展程序的所有用户都能够下载您的扩展程序所需的初始数据集。

# html - Html/CSS 上传文件

> ID：10257031
> 
> 赞同：5
> 
> 时间：2012-04-21T07:07:46.453
> 
> 标签：html, css

这是上传文件代码：

```
<form>
<input type="file" name="file"/>
</form> 
```

它会出现一个文本框和 BROWSE 按钮来上传文件。

好吧，但是有什么方法可以通过单击“某些”文本来上传文件，例如：“上传文件”文本。单击此文本后，将出现上传框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:30:42.913

尝试这个

[http://jsfiddle.net/RffbE/](http://jsfiddle.net/RffbE/)

```
<form>
<input type="file" name="file" id="file" style="display:none"/>
<span onclick="doTrick()">Upload your file</span>
</form> 
```

并使用这个 javascript 函数。

```
function doTrick() {
    document.getElementById('file').click();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:30:46.643

我猜你需要这个

请看我的jsfiddle

jsfiddle：http: [//jsfiddle.net/ks5r7/6/](http://jsfiddle.net/ks5r7/6/)

```
 <html>
    <head>
        <script>
            function show()
            {
                document.getElementById('box').style.display='inline';
            }

        </script>
    </head>
    <body>
        <div id="show"><a href="#" onclick="show()">Upload my file</div>

        <div id="box" style="display:none";><input type="file"/></div>
    </body>
</html> 
```

您可以在此处设置每个元素的样式

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T07:14:10.710

直接你不能在输入类型文件上设置任何 css，你需要为此使用技巧。看到这个[插件](http://www.appelsiini.net/projects/filestyle)

# android - 找不到要导入的项目

> ID：10257036
> 
> 赞同：2
> 
> 时间：2012-04-21T07:08:16.120
> 
> 标签：android, eclipse, maven, epub

我一直在寻找 android 中的 ePub 阅读器。
我提到[了 PageTurner](http://www.pageturner-reader.org/downloads/)。得到它的apk下载，它的工作。

但是当我从[github](https://github.com/nightwhistler/pageturner)下载它的源代码 （因为它是开源的）并尝试导入项目时，它会给出消息，`No Projects found to import`即使它指向正确的位置。

我在 SO 上搜索了类似的问题，但没有得到任何帮助。
我想我错过了图书馆和其他一些可以完成这项工作的东西。请注意，*github*链接中缺少`bin`和文件夹。我使用 Eclipse Indigo 作为 IDE。`gen`

 *知道这里有什么问题吗？任何帮助表示赞赏。

## 编辑

**1.)**根据建议，我创建了新项目并从现有源中导入它，但它几乎在每一行代码中都出现错误。

一些错误如下：

`Package x1 does not match with package x2`
`class RoboActivity not found`
`method not found`
`@Inject cannot be resolved to a type`

2.) 我究竟从[Maven 站点](http://maven.apache.org/download.html)下载了什么？

[这些](http://mevenide.codehaus.org/repository/eclipse/jars/)库需要哪些库。

此外，当我尝试按照说明安装插件时，我得到了![这](../Images/4f840974776372a2f3fc1ca1f7015304.png)

**3.）[此](http://mevenide.codehaus.org/maven-eclipse-plugin-plugin/)链接可用于 Maven 插件，但我在这里找不到插件 :(**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:12:26.703

您的项目是**Maven 项目**。**为 Eclipse 下载 Maven 插件，**然后将现有项目导入为**Existing Maven Projects**。**如果您的pom.xml**文件正确，其他 jar 的依赖关系将自动解析。

[Maven Eclipse 插件](http://maven.apache.org/eclipse-plugin.html)

[Maven 2 Eclipse 插件](http://www.roseindia.net/maven2/maven_2_eclipse_plugin.shtml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T07:10:39.537

而不是导入尝试

使用现有源创建新项目

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T07:10:29.210

如果 bin 和 gen 文件夹丢失，您也可以创建自己的项目并将 res、src 和清单文件从该源复制到您的项目。然后只需刷新您的项目，然后将其清理为可以正常工作的构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T07:46:50.623

这是基于 maven 的 android 项目。所以你需要先下载所有的依赖，然后再导入项目。

[请](https://github.com/NightWhistler/PageTurner/blob/master/README)仔细阅读。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T07:53:47.513

重大更新：我没有意识到新的 ADT 比旧的 ADT 更喜欢 Maven。

让我作为 PageTurner 的作者在这里插话：我个人不使用 Eclipse Maven 插件，但我只是使用 mvn eclipse:eclipse 生成一个 Eclipse 项目。

如果您从未使用过 Maven，它是一个类似于 Ant（或 Unix make）的命令行构建工具。你可以在这里下载 Maven 3： [http ://maven.apache.org/download.html](http://maven.apache.org/download.html)

安装 Maven 后，将 PageTurner 导入 Eclipse 环境的步骤如下：

1.  下载并解压源代码
2.  跑

    `mvn -Djavax.net.ssl.trustStore=trust.jks -Djavax.net.ssl.trustStorePassword=pageturner -DexcludeTransitive=true dependency:copy-dependencies`

    在源文件夹中

3.  创建一个 libs 文件夹

4.  将目标/依赖项中的所有内容复制到 libs 文件夹
5.  在 Eclipse 中，选择“New Android Project”->“From existing source”并将其指向您解压 PageTurner 的文件夹。

从本质上讲，这完全使 Maven 脱离了游戏，除了获取依赖项。*

# python - 如何在 Django 中安排任务？

> ID：10257038
> 
> 赞同：3
> 
> 时间：2012-04-21T07:08:48.040
> 
> 标签：python, django, django-views, django-signals, django-settings

在 Django 中安排作业的最佳方法是什么。我的目标是根据用户的独立设置（如每日、每周、每月）向用户发送余额报表 PDF 电子邮件。检查应该怎么做？请建议我是 Django 和 python 世界的新手。我正在使用 WindowsXP、python 2.7.2、Django 1.3.1 和 MS-SQL2008 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T07:18:09.460

你可以用[芹菜](http://celeryproject.org/)。

您还可以在[Celery wiki 页面](https://github.com/ask/celery/wiki/)上找到一些不错的示例，例如[django-celery-email](https://bitbucket.org/pmclanahan/django-celery-email)。

# facebook - 无法使用 https://graph.facebook.com/ 获取图像信息

> ID：10257040
> 
> 赞同：1
> 
> 时间：2012-04-21T07:08:54.890
> 
> 标签：facebook, photo, facebook-opengraph

API 总是返回 false，没有任何详细信息。即使使用我自己照片的照片 ID，也是如此。但是，API 文档中列出的照片 ID（可口可乐）可以正常工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:37:08.607

您对 FB 的调用是正确的，即

```
https://graph.facebook.com/PHOTO_ID + accesstoken 
```

将返回一个 JSON 响应，其中包含有关您的图像和 url 的信息以下载不同大小的图像。

您的问题最可能的原因是您没有向应用用户请求“user_photos”权限。

# spring-mvc - Controller的返回值应该被忽略

> ID：10257060
> 
> 赞同：0
> 
> 时间：2012-04-21T07:12:48.653
> 
> 标签：spring-mvc

出于测试原因，我希望在 spring-mvc-controller 中有一个方法签名，其返回值应该被 spring 忽略：

```
@RequestMapping(value = "/{uuid}", params = "question", method = RequestMethod.POST)
@ResponseBody
public IAnswer saveAnswer(UiAnswer json, @PathVariable String uuid, @RequestParam("question") String question, HttpServletResponse response) {} 
```

这是一个后请求，控制器接收数据并`response.setStatus(HttpServletResponse.SC_OK);`在一切正常时仅响应。

*   随着`@ResponseBody`它死于内部服务器错误 500
*   没有`@ResponseBody`spring试图解决视图
*   作为`void`返回值，它工作正常

我可以告诉 spring 忽略我返回的对象吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:16:46.057

```
@RequestMapping(value = "/{uuid}", params = "question", method = RequestMethod.POST)
@ResponseBody
public void saveAnswer(UiAnswer json, 
                       @PathVariable String uuid, 
                       @RequestParam("question") String question, 
                       HttpServletResponse response) {
    doSaveAnswer(json, uuid, question, response);
}

protected IAnswer doSaveAnswer(UiAnswer json, 
                               String uuid, 
                               String question, 
                               HttpServletResponse response) {
    // your original code here
} 
```

然后单元测试`doSaveAnswer()`。

# xml - WSO2如何将响应从字符串更改为xml

> ID：10257065
> 
> 赞同：1
> 
> 时间：2012-04-21T07:14:12.670
> 
> 标签：xml, string, wso2

我的应用程序响应是一个 xml，如：

> <?xml version="1.0" encoding="UTF-8"?><message><header>
> <TransactionID>1</TransactionID>
> <Timestamp>2012-04-21 14:47:28</Timestamp>
> <OpCode >BOSS_DELETE_USER_SME.CD</OpCode>
> <MsgType>RESP</MsgType>
> <ReturnCode>3001</ReturnCode>
> <ErrorMessage>???????</ErrorMessage> </header><body/></message>

但在 ESB 中，响应如下：

> < ;?xml version="1.0" encoding="UTF-8"?> ;< ;message> ;< ;header> < ;TransactionID>1</TransactionID> < ;时间戳> ;2012-04-21 14:47:28< ;/时间戳> < ;OpCode> ;BOSS_DELETE_USER_SME.CD< ;/OpCode> < ;MsgType> ;RESP< ;/MsgType> < ;ReturnCode>3001</ReturnCode> < ;ErrorMessage> ;?????????< ;/ErrorMessage> ; < ;/header> ;< ;body/> ;< ;/message> ;

如何设置outSequence？我试过使用 contentType 和 messageType，但没有用。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:42:03.840

响应消息的内容类型是什么？（貌似不是text/xml，你可以用tcpmonitor查出来。）如果找到了内容类型，那么你可以在axis2.xml中设置正确的消息格式器. （即应用程序/xml 格式化程序）。

# sqlite - 如何知道 sqlite 文件中有哪些表？

> ID：10257069
> 
> 赞同：1
> 
> 时间：2012-04-21T07:15:15.667
> 
> 标签：sqlite, bash, shell

我有一个 sqlite 文件，但我不知道其中有哪些表，因此我不能使用 SELECT 查询。

那么，有没有办法知道里面有什么表？

PS我在Ubuntu Linux下，我已经从shell安装了sqlite3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:18:24.870

您可以使用 sqlite3 打开数据库：

```
sqlite3 <databasefile> 
```

进入 sqlite3 shell 后，您只需键入：

```
.tables 
```

查看所有表格的列表。

您可以使用以下命令查看特定表的表结构：

```
.schema <tablename> 
```

您还可以省略表名以查看整个数据库的架构。

通过键入以下命令可以查看有关这些命令的信息以及更多信息：

```
.help 
```

# javascript - 如何通过 JQuery 将值替换为 img 标签

> ID：10257071
> 
> 赞同：1
> 
> 时间：2012-04-21T07:15:27.963
> 
> 标签：javascript, jquery

**我从 Jquery 的 AJAX 调用中得到这个响应**

```
[/Uploaded Files/190420120611171146Wj.jpg, Uploaded Files/IMG4040hY.jpg, /Uploaded Files/a2124.jpg] 
```

**这是我的 JQuery 响应**

```
<script type="text/javascript">
$(document).ready(function(){
    $.ajax({
        url  : '<%=getChartData%>',
        success : function(data){
                $.each(data, function(index, item) {
                $('img').eq(index).attr('src', item);
             });

        }
    });

});
</script> 
```

**这是我带有图像的 div 标签**

```
<div><a href="#"><img src=""   /></a></div>
<div><a href="#"><img src=""   /></a></div>
<div><a href="#"><img src=""   /></a></div>
<div><a href="#"><img src=""   /></a></div> 
```

我尝试了上述方法，但我无法将这些值替换为图像

更新 ：

**这是我的 div 容器**

```
<div id="fp_thumbContainer">
                <div id="fp_thumbScroller">
                    <div class="container">
                        <div class="content">
                            <div><a href="#"><img src=""   /></a></div>
                        </div>
                        <div class="content">
                            <div><a href="#"><img src=""   />  </a></div>
                        </div>
                        <div class="content">
                            <div><a href="#"><img src=""   />  </a></div>
                        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:26:32.637

使用的问题`$('img')`是它获取页面中的所有图像。假设你有这个 HTML：

```
<img src="foo" />  <!-- this is eq(0) -->
<img src="foo" />  <!-- this is eq(1) -->
<img src="foo" />  <!-- this is eq(2) -->

<!-- target images -->
<div><a href="#"><img src="" /></a></div>  <!-- this is eq(3) -->
<div><a href="#"><img src="" /></a></div>  <!-- this is eq(4) -->
<div><a href="#"><img src="" /></a></div>  <!-- this is eq(5) --> 
```

当您这样做`$('img')`并且您在目标图像之前有图像时，它们是您要替换的图像，而不是您的实际目标。当您遍历数组时，索引从`0`. 如果你在目标图像之前有这些图像......你知道会发生什么。

* * *

为了确保您定位到正确的图像，使您的选择器更具体，例如`$('div a img')`“在 div 中的锚点中获取所有图像”或更好，如果这些目标图像有父图像，则将其用作基础，就像`$('#parent_id img')`“获取父容器中的所有图像”一样：

```
$('#fp_thumbScroller img');  //get all img from fp_thumbscroller 
```

* * *

另外，只需添加：

*   检查您的网址是否正确
*   如果它们正确，请在将它们附加到图像时检查 url
*   检查您的ajax调用是否返回
*   检查返回数据是否有效
*   检查`each`它是否循环

`console.log()`能帮你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:31:58.647

@user1253847 如果您从服务器获取图像 src 那么为什么不像下面那样编写整个 div html..

制作一个 div 包装器

```
<div id="imagewrapper"></div> 
```

并将 div 和图像添加到其中..

```
$(document).ready(function(){
var content = "";
$.ajax({
    url  : '<%=getChartData%>',
    success : function(data){
            $.each(data, function(index, item) {
            content += "<div><a href='#'><img src=" + item + "   /></a></div>";
         });
       $("#imagewrapper").html(content);
    }
  });
}); 
```

或追加

```
$("#imagewrapper").append(content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T07:32:52.637

在您的通话中添加`dataType: "json"`选项，`AJAX`如下所示：

```
$(document).ready(function(){
    $.ajax({
        dataType: 'json',
        url     : '<%=getChartData%>',
        success : function(data){
                $.each(data, function(index, item) {
                $('#fp_thumbContainer #fp_thumbScroller').find('img').eq(index).attr('src', item);
             });
        }
    });
}); 
```

即使这不起作用然后检查 JSON 响应它应该是：

```
["\/Uploaded Files\/190420120611171146Wj.jpg","Uploaded Files\/IMG4040hY.jpg","\/Uploaded Files\/a2124.jpg"] 
```

例如在 php 中是这样的：

```
<?php
  $arr = array("/Uploaded Files/190420120611171146Wj.jpg", "Uploaded Files/IMG4040hY.jpg", "/Uploaded Files/a2124.jpg");
  echo json_encode($arr);
?> 
```

# php - 通过ajax一次多次更新

> ID：10257074
> 
> 赞同：1
> 
> 时间：2012-04-21T07:16:35.020
> 
> 标签：php, jquery, ajax, codeigniter

我只是想确保我现在走在正确的轨道上：

做了一件小事，让管理员可以编辑人们的日程安排。现在他点击一行，所有的时间表都变成了可编辑的。如果他连续更改值，我会抓住它

```
$('.selector').change(function() { // this happens to be a <select> dropdown. I guess technically this is the <option> inside of the select.
    var updates = new Array(); // an array of all the updates
    var classList = $(this).attr('id').split(/\s+\); // the id of a <select> would be something like "12 monday start" meaning the user_id, day_of_week, start/end time. Just converting it to an array here.
    classList.push($(this).val()); // the time it has been changed to
    updates.push(classList); // add the singular time update to the overall array
    $('.save_schedule').click(function() {
        // here I would iterate through all of the arrays in updates and do some sort of ajax call, correct?
    });
}); 
```

只是想确保在我走得更远之前我走在正确的轨道上，并且可能会重写一些东西。

谢谢

我的 HTML 已被请求：[https ://gist.github.com/2435293](https://gist.github.com/2435293)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:44:26.060

如果你的 HTML 看起来像这样

```
<select id="12 monday start" class="selector">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

<select id="12 monday end" class="selector">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select>

<input type="button" class="save_schedule" value="save" /> 
```

你的 javascript 可能看起来像这样

```
$('.save_schedule').click(function() {

    var arr = new Array();
    $('.selector').each(function() {

        arr.push($(this).attr('id').split(/\s+/));
        arr.push($(":selected", this).val())
    });

    alert(arr);
    // ajax call here
}); 
```

[参见 jsfiddle 示例](http://jsfiddle.net/2pJet/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:44:53.540

我可以想到两种方法来实现这一点：

选项 1 - 草稿保存

每次用户编辑一行时，您都会进行 AJAX 调用以临时保存他的更改（将数据库列添加`draft`到与实际更改不同的草稿中）。

您应该将处理程序移到`click`处理程序之外`change`：

```
$('.selector').change(function() {
    ... 
});
$('.save_schedule').click(function() {
    ...
}); 
```

在`change`处理程序中，`$(this)`指向当前标记`select`。要获取选定的值，您可以使用`$(this).val()`.

为避免拆分 select id 属性以获取所需的所有元素，您可以使用自定义属性：

```
<select data-user-id="12" data-day="monday" data-time="start">...</select> 
```

然后，在您的`change`处理程序中，您可以使用该`attr`方法获取它们的值。

```
var user_id = $(this).attr('data-user-id');
var day = $(this).attr('data-day');
var time = $(this).attr('data-time'); 
```

现在，您可以进行 ajax 调用以将更改存储为`draft`.

当用户单击 时`save_schedule`，进行最终的 ajax 调用以更新草稿的状态并将其设置为永久。

选项 2 - 简单保存，表单序列化

只有当用户单击保存按钮时，所有更改才会保存。

我建议将所有数据保存在 HTML 标记中，而不是 Javascript 中。（原因如下：如果用户编辑两次计划会发生什么？更改是否再次推送到数组中？）。

您可以在输入/选择不可编辑时隐藏它们，并且您不再需要处理该`change`事件。

当用户单击 时`save_schedule`，您可以使用诸如`$(form).serialize()`从您的输入 (http://api.jquery.com/serialize/) 中收集所有数据并进行 AJAX 调用以保存您的更改之类的功能。

# xml - 替换 XML 中的内容

> ID：10257076
> 
> 赞同：0
> 
> 时间：2012-04-21T07:17:09.370
> 
> 标签：xml, xml-parsing, batch-processing, xslt

我需要编辑一些 XML 文件，并想创建一个脚本来执行此操作。我几乎没有使用 XML 的经验，这就是我请求您帮助的原因。

下面的 XML 包含 2 个运输订单：一个具有正值**元素**，一个具有负值元素。我想做的是，对于每个包含负值的运输**订单**：

*   将**pickup_task**的addressid替换为**delivery task**的addressid，反之亦然
*   用交付任务的值替换提货任务的任务**窗口**（from_instant 和 till_instant）。

是否可以制作一个 VB 脚本或批处理或其他东西来替换具有超过 200 个 transport_order 的文件？

谢谢

```
<?xml version="1.0" encoding="iso-8859-2"?>
<misu version="2010">
    <transport_orders>
        <transport_order>
            <id>NOCCO/12-006798_1</id>
            <order_number>NOCCO/12-006798_1</order_number>
            <order_date>2012-03-30</order_date>
            <contactId>C04396</contactId>
            <productId>0103-01101025</productId>
            <sum>3135.51</sum>
            <currency_code></currency_code>
            <reference>NOCCO/12-006798</reference>
            <amounts>
                <amount>
                    <unit_code>kg</unit_code>
                    <value>324.00</value>
                </amount>
            </amounts>
            <pickup_task>
                <addressid>BUCU</addressid>
                <task_window>
                    <from_instant>2012-04-20T18:26:43</from_instant>
                    <till_instant>2012-04-20T18:26:43</till_instant>
                </task_window>
            </pickup_task>
            <delivery_task>
                <addressid>C04396_1</addressid>
                <task_window>
                    <from_instant>2012-04-23T00:00:00</from_instant>
                    <till_instant>2012-04-24T00:00:00</till_instant>
                </task_window>
            </delivery_task>
        </transport_order>
        <transport_order>
            <id>NOCCO/12-007016_2</id>
            <order_number>NOCCO/12-007016_2</order_number>
            <order_date>2012-04-02</order_date>
            <contactId>C01137</contactId>
            <productId>0604-08L15000</productId>
            <sum>495.00</sum>
            <currency_code></currency_code>
            <reference>NOCCO/12-007016</reference>
            <amounts>
                <amount>
                    <unit_code>m2</unit_code>
                    <value>-5.00</value>
                </amount>
            </amounts>
            <pickup_task>
                <addressid>SFGH</addressid>
                <task_window>
                    <from_instant>2012-04-20T18:26:43</from_instant>
                    <till_instant>2012-04-20T18:26:43</till_instant>
                </task_window>
            </pickup_task>
            <delivery_task>
                <addressid>C01137_1</addressid>
                <task_window>
                    <from_instant>2012-04-23T00:00:00</from_instant>
                    <till_instant>2012-04-24T00:00:00</till_instant>
                </task_window>
            </delivery_task>
        </transport_order>
    </transport_orders>
</misu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:57:13.127

来吧……这应该完成第 1 部分。我将把第 2 部分留给你（我不习惯 VB）。如您所见，我将 XML 文件命名为“data.xml”。

```
Sub Main()
    Dim xdoc As XDocument
    Dim filename As String
    filename = "../../data/data.xml"
    xdoc = XDocument.Load(filename)
    Dim xe As XElement
    xe = xdoc.Root.Element("transport_orders")
    For Each element In xe.Elements("transport_order")
        Dim val As Integer
        val = element.Element("amounts").Element("amount").Element("value").Value
        If (val < 0) Then
            Console.WriteLine(val)
            Dim puelement As XElement
            Dim delelement As XElement
            Dim putask As String
            puelement = element.Element("pickup_task").Element("addressid")
            delelement = element.Element("delivery_task").Element("addressid")
            putask = delelement.Value
            delelement.Value = puelement.Value
            puelement.Value = putask
        End If
    Next
    xdoc.Save(filename)
    Console.ReadLine()
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T07:10:42.570

回到提要，事情运行得很好，因为我已经说过我的知识是有限的，我总是试图理解代码的作用并尝试重现以满足我的需求，所以这就是我为我的第二个问题所做的，我知道很蹩脚，但它可以完成工作，请确认

```
puelement2  = element.Element("pickup_task").Element("task_window").Element("from_instant")
delelement2 = element.Element("delivery_task").Element("task_window").Element("from_instant")
putask2 = delelement2.Value
delelement2.Value = puelement2.Value
puelement2.Value = putask2

puelement3 = element.Element("pickup_task").Element("task_window").Element("till_instant")
delelement3 = element.Element("delivery_task").Element("task_window").Element("till_instant")
putask3 = delelement3.Value
delelement3.Value = puelement3.Value
puelement3.Value = putask3 
```

谢谢。真的很有帮助。

# android - 如何以编程方式导航回 Android 首选项？

> ID：10257077
> 
> 赞同：0
> 
> 时间：2012-04-21T07:17:11.067
> 
> 标签：android, preferences

我有几个偏好屏幕。当用户单击首选项命名时`log-of`- 我必须禁用和隐藏一些首选项屏幕。由于禁用了首选项，我需要`level up`在屏幕首选项层次结构中加入一项。

寻求有价值的建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:44:27.607

我分解了偏好层次结构。现在每个首选项屏幕都有 3 种不同的 xml 布局。当用户单击“logof”时 - 我更改应用数据并调用完成活动。这让我更上一层楼:) 这种方式会导致更多代码，但现在逻辑很清楚。

# web-services - 如果 A 正在 SSO 进入 B，推荐从域 B 访问域 A 上的 Web 服务的方法？

> ID：10257088
> 
> 赞同：0
> 
> 时间：2012-04-21T07:19:12.943
> 
> 标签：web-services, single-sign-on

这里的前端开发人员没有 SSO 经验，所以请多多包涵。渴望就以下内容提出高级建议，因为我可以理解它可能会有所不同。

我们有一个客户端设置 SSO 来登录我们的网站，我试图了解如何安全地通过 AJAX 从我们的域调用他们的网络服务以获取用户信息。查看他们的服务，他们要求提供我认为不可用/不可行的用户 ID 和密码，因为我认为我们的系统需要将密码暴露给似乎不安全的前端......他们提到他们可以通过这些http，但这似乎也不安全！

是否有某种方式我们可以通过 SSO 验证 Web 服务，还是有其他方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:14:55.237

进一步我的评论，我们正在推进使用用于 SSO 的共享加密方法（ECB 模式下的 TripleDES）来加密 Web 服务请求中的令牌

# php - 如何使用php连接两个不同服务器上的两个数据库

> ID：10257091
> 
> 赞同：0
> 
> 时间：2012-04-21T07:19:48.150
> 
> 标签：php, mysql

在 MySQL 中，我有两个不同的数据库——我们称它们为 A 和 B。

数据库 A 位于服务器 server1 上，而数据库 B 位于服务器 server2 上。

两台服务器 {A, B} 在物理上彼此靠近，但位于不同的机器上并且具有不同的连接参数（不同的用户名、不同的密码等）。

在这种情况下，是否可以在数据库 A 中的表与不同服务器的数据库 B 中的表之间执行连接？

如果是这样，我该如何以编程方式在 php 中进行处理？（我正在使用 php、MySQLDB 分别与每个数据库进行交互）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:22:15.500

我能想到的唯一方法是使用所有不同的参数打开 2 个单独的连接（即实例化 2 个 PDO 对象），使用 2 个查询将您需要的所有数据查询到 PHP 中，然后在 PHP 上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:25:10.820

您可以在 PHP 中建立两个单独的[MySQL 连接](http://us2.php.net/mysql_connect)，对两个表执行两次查询，然后在 PHP 中处理结果。

另一种选择是，由于服务器在物理上很接近，因此设置一个或两个服务器以将所需的数据库/表相互复制。您可以在此处查看有关 MySQL 复制的更多信息：http: [//dev.mysql.com/doc/refman/5.6/en/replication.html](http://dev.mysql.com/doc/refman/5.6/en/replication.html)

# actionscript-3 - 可以在 Flash 中嵌入外部影片剪辑吗

> ID：10257092
> 
> 赞同：-1
> 
> 时间：2012-04-21T07:20:00.383
> 
> 标签：actionscript-3, flash

我想在我的原始 Flash 电影中嵌入另一个 Flash 电影。我不能 100% 信任外部 Flash 电影。

加载和使用它是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:58:02.520

我会说……可能不会。如果您不能 100% 信任该外部 Flash 电影，那么您确实无法保证其中的代码是完全安全的。此外，即使它现在是安全的，它也可能在以后被更改为不安全。这种用法也可能违反使用条款（您必须自己研究。）

[如果您需要知道如何解决这个问题，顺便说一句，请务必发布另一个问题。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T20:12:51.310

阅读有关 LoaderContext 的更多信息，通过向加载器添加不同的加载器上下文，您可以限制该文件对某些类的访问。但请记住，当您将加载的内容添加到显示列表时，它可以通过“父”参数快速访问您的对象。

您可以尝试限制 swf 文件获得的访问权限，但总有办法从外部文件中搞砸。此外，在不访问您的应用程序代码的情况下，单独的文件可能会包含一些错误的代码并将事情搞砸。

我的建议：如果您没有办法 chrck thoes 文件，请不要这样做

# ruby - 为什么 == 比 eql 快？

> ID：10257096
> 
> 赞同：17
> 
> 时间：2012-04-21T07:20:50.140
> 
> 标签：ruby, string, benchmarking, equality

我在文档中阅读了 String 类的文档，它`eql?`是一个严格的相等运算符，没有类型转换，并且`==`是一个相等运算符，它尝试将其第二个参数转换为字符串，并且此方法的 C 源代码确认：

`eql?`源代码：

```
static VALUE
rb_str_eql(VALUE str1, VALUE str2)
{
    if (str1 == str2) return Qtrue;
    if (TYPE(str2) != T_STRING) return Qfalse;
    return str_eql(str1, str2);
} 
```

`==`源代码：

```
VALUE
rb_str_equal(VALUE str1, VALUE str2)
{
    if (str1 == str2) return Qtrue;
    if (TYPE(str2) != T_STRING) {
        if (!rb_respond_to(str2, rb_intern("to_str"))) {
            return Qfalse;
        }
        return rb_equal(str2, str1);
    }
    return str_eql(str1, str2);
} 
```

但是当我尝试对这些方法进行基准测试时，我很惊讶它`==`的速度比`eql?`高达 20% 还要快！我的基准代码是：

```
require "benchmark"

RUN_COUNT = 100000000
first_string = "Woooooha"
second_string = "Woooooha"

time = Benchmark.measure do
  RUN_COUNT.times do |i|
    first_string.eql?(second_string)
  end
end
puts time

time = Benchmark.measure do
  RUN_COUNT.times do |i|
    first_string == second_string
  end
end
puts time 
```

和结果：

红宝石 1.9.3-p125：

```
26.420000   0.250000  26.670000 ( 26.820762)
21.520000   0.200000  21.720000 ( 21.843723) 
```

红宝石 1.9.2-p290：

```
25.930000   0.280000  26.210000 ( 26.318998)
19.800000   0.130000  19.930000 ( 19.991929) 
```

那么，在我为两个相似的字符串运行它的情况下，任何人都可以解释为什么更简单的`eql?`方法比方法慢？`==`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T23:03:32.580

您看到差异的原因*与*`==`vs的实现无关，`eql?`而是因为 Ruby 优化了运算符（如`==`）以尽可能避免通过正常的方法查找。

我们可以通过两种方式验证这一点：

*   为它创建一个别名`==`并调用它。您将获得与 类似的结果`eql?`，因此结果比`==`.

*   比较使用`send :==`and `send :eql?`，你会得到相似的时间；速度差异消失了，因为 Ruby 只会将优化用于直接调用运算符，而不是 using `send`or `__send__`。

这是显示两者的代码：

```
require 'fruity'
first = "Woooooha"
second = "Woooooha"
class String
  alias same_value? ==
end

compare do
  with_operator   { first == second }
  with_same_value { first.same_value? second }
  with_eql        { first.eql? second }
end

compare do
  with_send_op    { first.send :==, second }
  with_send_eql   { first.send :eql?, second }
end 
```

结果：

```
with_operator is faster than with_same_value by 2x ± 0.1
with_same_value is similar to with_eql
with_send_eql is similar to with_send_op 
```

如果您好奇，运算符的优化位于[`insns.def`](https://github.com/ruby/ruby/blob/017f0ffe1822264a8ead114f0b6055805185c0ac/insns.def#L1581-1598).

*注意*：这个答案仅适用于 Ruby MRI，例如，如果 JRuby / rubinius 存在速度差异，我会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T00:02:08.000

在进行基准测试时，不要使用`times`，因为这会产生关闭`RUN_COUNT`时间。结果所花费的额外时间在绝对意义上同等地影响所有基准，但这使得更难注意到相对差异：

```
require "benchmark"

RUN_COUNT = 10_000_000
FIRST_STRING = "Woooooha"
SECOND_STRING = "Woooooha"

def times_eq_question_mark
  RUN_COUNT.times do |i|
    FIRST_STRING.eql?(SECOND_STRING)
  end
end

def times_double_equal_sign
  RUN_COUNT.times do |i|
    FIRST_STRING == SECOND_STRING
  end
end

def loop_eq_question_mark
  i = 0
  while i < RUN_COUNT
    FIRST_STRING.eql?(SECOND_STRING)
    i += 1
  end
end

def loop_double_equal_sign
  i = 0
  while i < RUN_COUNT
    FIRST_STRING == SECOND_STRING
    i += 1
  end
end

1.upto(10) do |i|
  method_names = [:times_eq_question_mark, :times_double_equal_sign, :loop_eq_question_mark, :loop_double_equal_sign]
  method_times = method_names.map {|method_name| Benchmark.measure { send(method_name) } }
  puts "Run #{i}"
  method_names.zip(method_times).each do |method_name, method_time|
    puts [method_name, method_time].join("\t")
  end
  puts
end 
```

给

```
Run 1
times_eq_question_mark    3.500000   0.000000   3.500000 (  3.578011)
times_double_equal_sign   2.390000   0.000000   2.390000 (  2.453046)
loop_eq_question_mark     3.110000   0.000000   3.110000 (  3.140525)
loop_double_equal_sign    2.109000   0.000000   2.109000 (  2.124932)

Run 2
times_eq_question_mark    3.531000   0.000000   3.531000 (  3.562386)
times_double_equal_sign   2.469000   0.000000   2.469000 (  2.484295)
loop_eq_question_mark     3.063000   0.000000   3.063000 (  3.109276)
loop_double_equal_sign    2.109000   0.000000   2.109000 (  2.140556)

Run 3
times_eq_question_mark    3.547000   0.000000   3.547000 (  3.593635)
times_double_equal_sign   2.437000   0.000000   2.437000 (  2.453047)
loop_eq_question_mark     3.063000   0.000000   3.063000 (  3.109275)
loop_double_equal_sign    2.140000   0.000000   2.140000 (  2.140557)

Run 4
times_eq_question_mark    3.547000   0.000000   3.547000 (  3.578011)
times_double_equal_sign   2.422000   0.000000   2.422000 (  2.437422)
loop_eq_question_mark     3.094000   0.000000   3.094000 (  3.140524)
loop_double_equal_sign    2.140000   0.000000   2.140000 (  2.140557)

Run 5
times_eq_question_mark    3.578000   0.000000   3.578000 (  3.671758)
times_double_equal_sign   2.406000   0.000000   2.406000 (  2.468671)
loop_eq_question_mark     3.110000   0.000000   3.110000 (  3.156149)
loop_double_equal_sign    2.109000   0.000000   2.109000 (  2.156181)

Run 6
times_eq_question_mark    3.562000   0.000000   3.562000 (  3.562386)
times_double_equal_sign   2.407000   0.000000   2.407000 (  2.468671)
loop_eq_question_mark     3.109000   0.000000   3.109000 (  3.124900)
loop_double_equal_sign    2.125000   0.000000   2.125000 (  2.234303)

Run 7
times_eq_question_mark    3.500000   0.000000   3.500000 (  3.546762)
times_double_equal_sign   2.453000   0.000000   2.453000 (  2.468671)
loop_eq_question_mark     3.031000   0.000000   3.031000 (  3.171773)
loop_double_equal_sign    2.157000   0.000000   2.157000 (  2.156181)

Run 8
times_eq_question_mark    3.468000   0.000000   3.468000 (  3.656133)
times_double_equal_sign   2.454000   0.000000   2.454000 (  2.484296)
loop_eq_question_mark     3.093000   0.000000   3.093000 (  3.249896)
loop_double_equal_sign    2.125000   0.000000   2.125000 (  2.140556)

Run 9
times_eq_question_mark    3.563000   0.000000   3.563000 (  3.593635)
times_double_equal_sign   2.453000   0.000000   2.453000 (  2.453047)
loop_eq_question_mark     3.125000   0.000000   3.125000 (  3.124900)
loop_double_equal_sign    2.141000   0.000000   2.141000 (  2.156181)

Run 10
times_eq_question_mark    3.515000   0.000000   3.515000 (  3.562386)
times_double_equal_sign   2.453000   0.000000   2.453000 (  2.453046)
loop_eq_question_mark     3.094000   0.000000   3.094000 (  3.140525)
loop_double_equal_sign    2.109000   0.000000   2.109000 (  2.156181) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T20:46:26.463

```
equal? is reference equality
== is value equality
eql? is value and type equality 
```

第三种方法，`eql?`通常用于测试两个对象是否具有相同的值和相同的类型。例如：

```
puts "integer == to float: #{25 == 25.0}"
puts "integer eql? to float: #{25.eql? 25.0}"

gives:

Does integer == to float: true
Does integer eql? to float: false 
```

所以我认为因为`eql?`做更多的检查会更慢，而且对于字符串来说，至少在我的 Ruby 1.93 上是这样。所以我认为它必须依赖于类型并做了一些测试。比较整数和浮点数时要`eql?`快一些。比较整数时`==`要快得多，直到 x2。理论错误，重新开始。

下一个理论：比较相同类型的两个值会更快，其中一个被证明是正确的，在它们属于相同类型的情况下`==`总是更快，`eql?`当类型不同时更快，再次直到 x2。

没有时间比较所有类型，但我相信您会得到不同的结果，尽管相同类型的比较总是给出相似的结果。有人可以证明我错了吗？

以下是我对 OP 的测试结果：

```
 16.863000   0.000000  16.863000 ( 16.903000) 2 strings with eql?
 14.212000   0.000000  14.212000 ( 14.334600) 2 strings with ==
 13.213000   0.000000  13.213000 ( 13.245600) integer and floating with eql?
 14.103000   0.000000  14.103000 ( 14.200400) integer and floating with ==
 13.229000   0.000000  13.229000 ( 13.410800) 2 same integers with eql?
  9.406000   0.000000   9.406000 (  9.410000) 2 same integers with ==
 19.625000   0.000000  19.625000 ( 19.720800) 2 different integers with eql?
  9.407000   0.000000   9.407000 (  9.405800) 2 different integers with ==
 21.825000   0.000000  21.825000 ( 21.910200) integer with string with eql?
 43.836000   0.031000  43.867000 ( 44.074200) integer with string with == 
```

# mysql - 带有谓词生成器的 MySQL 不起作用？

> ID：10257100
> 
> 赞同：0
> 
> 时间：2012-04-21T07:21:47.030
> 
> 标签：mysql, asp.net-mvc-3, predicatebuilder

我正在开发基于 3 个字段的小型过滤器。我还在我的 MVC 3 项目中使用 MySQL 连接器。

我找到了一个漂亮的 PredicateBuilder [http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)。但它似乎不适用于 MySQL

```
 var predicate = PredicateBuilder.False<Order>();

  if(OrderID == 0)
      predicate = predicate.And(x => x.OrderID == 9); //an example, that order exist in the DB

  var result = (from x in db.Order select x).AsExpandable()
               .Where(predicate).ToList(); 
```

但`result`包含 0 个元素。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:54:02.540

因为你从 false 开始并且使用 AND，所以你总是会得到 false。以 True 开头：

```
var predicate = PredicateBuilder.True<Order>(); 
```

# c# - 我应该使用 Func 代替私有方法？

> ID：10257102
> 
> 赞同：0
> 
> 时间：2012-04-21T07:22:09.237
> 
> 标签：c#, func, class-members

我在这里发布它而不是代码审查，因为我想知道执行程序是否会因此而表现不同（可能是一些微妙的东西）。

是私有方法：

```
 private int Foo()
    {
        return Bar().Bat();
    } 
```

与私有 Func 有什么不同？

```
 private Func<int> Foo = () => Bar().Bat(); 
```

我这样做的唯一原因是使代码更紧凑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:27:44.967

差别不大，但是

*   您定义模板类型`int`（可能类型安全，即使它在提供的当前代码中不可见）

*   您可以像使用参数一样使用该函数来传递给另一个函数，当然，您也可以在第一种情况下这样做，但在第一种情况下，您需要声明一个`delegate`类型。

*   第三个更紧凑，但第一个更具*可读性*，imo，所以如果你不需要一些“功能性”的东西，我会选择第一选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:28:47.687

`Func`s 是`delegate`s 并封装任何具有等号签名的方法`Func`。对于分层，我建议您使用`Private Methods`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T07:33:27.953

使用 Func，您实际上是在保存对匿名方法的引用。编译器从中创建一个命名方法，而您所做的就像保存对它的额外引用。

这没什么大不了的，没有太大区别，除了标准是命名方法。它也更具逻辑性和可读性。

# onclick - 通过单击元素更改元素的背景

> ID：10257110
> 
> 赞同：0
> 
> 时间：2012-04-21T07:22:44.923
> 
> 标签：onclick, getelementbyid

我想写一个非常简单的脚本，需要一些帮助。这是我希望脚本执行的操作。默认情况下，有一个没有背景颜色的 div 元素。当您单击此 div 时，它需要填充红色背景色。然后，当您再次单击此 div 时，它应该再次没有背景。

下面的CSS代码：

```
 <head>
<style type="text/css">

    #red,#green,#blue,#black{
        width:200px;
        height:100px;
        margin-bottom:25px;
        border:solid red 1px;
    }

</style> 
```

HTML 和一些 JS 代码：

```
 <body>

    <div id='red'></div>

        <script type="text/javascript">
        <!--

            var x = document.getElementById('red');

                x.onclick = function(){

                    x.style.backgroundColor = 'red';

        }

        //-->
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:02:06.037

对于 JavaScript，只需单击一下红色即可工作，然后将其恢复为空：

```
var clicked = false, 
    x = document.getElementById('red');

x.onclick = function(){
    x.style.backgroundColor = clicked ? 'transparent' : 'red';
    clicked = true;
}; 
```

# wordpress - 用于在线商店的 WordPress 或 Drupal？

> ID：10257111
> 
> 赞同：0
> 
> 时间：2012-04-21T07:22:50.877
> 
> 标签：wordpress, drupal

我即将建立一个网站，该网站有几个静态页面、一个商店和（后来）一个具有一些类似 CRM 功能的时事通讯系统。

我用 WordPress 制作了一些网站，所以我倾向于它。它还有一些很有前途的商店插件。

但是，虽然 WordPress 为博客和简单网站提供了非常好的用户界面，但我担心它不会“扩展”，即像我希望的那样易于使用商店、新闻通讯和 CRM 功能.

我房间里的大象现在是 Drupal，你会说它更适合我想做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:41:43.103

WordPress 为所有主要的时事通讯提供了不错的插件，甚至还有一个强大的插件来编写您自己的时事通讯......（不要那样做）。WordPress 中的 CRM 也是如此。

在 Drupal 中，事情随着商业而变化。UberCart 和 Drupal 6 是一个超级稳定、成熟的商业系统。但是，D7 是 Drupal 站点的新标准。Drupal Commerce 是一个很有前途的模块，但是您需要检查插件的状态以获取您需要的功能，然后再开始使用它......说到进入 Drupal Commerce 的最佳方式是使用 kickstart：[http：/ /drupal.org/project/commerce_kickstart](http://drupal.org/project/commerce_kickstart)

此外，如果您以前从未使用过 Drupal，那么在您快速了解实体类型、捆绑包、分类法、内容类型、节点、模板、块和视图时，会出现学习曲线。

# sql - sql查询中的逻辑问题

> ID：10257112
> 
> 赞同：0
> 
> 时间：2012-04-21T07:23:08.800
> 
> 标签：sql, database, google-app-engine, datastore

我被要求为员工出勤创建一个应用程序，我有一个逻辑问题：

我有`emp`表`id`和，`name`第二个表是`attendance`，，，（真或假），是PK。`id``empid``date``check``id`

将有一个表格自行提交每个员工的出勤情况。用户将有一个带有员工姓名的表单，其中包含一个填充所有员工的下拉框和一个用于添加日期的日期输入文本，最后是“是”或“否”下拉框。我的问题是用户可以为同一日期和同一员工输入 1 个或多个出勤，这可能以一个月内有 40 天出勤的员工结束。

我正在使用带有数据存储的谷歌应用程序引擎，那么，有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:35:32.083

您应该能够创建一个唯一键（empid、date）。它就像第二个主键一样工作 - 不允许重复。

# c# - 如果元素存在，Linq 查询更新 XML 文件不起作用

> ID：10257113
> 
> 赞同：1
> 
> 时间：2012-04-21T07:23:37.350
> 
> 标签：c#, xml, linq, windows-phone-7

目前正在开发一个 wp7 应用程序，它非常基础。用户有一个计数器，如果 XML 文件中存在当天的日期元素，则更新计数，如果没有，则为该天创建一个新的日期元素，并将计数作为值。

我的问题是，如果创建一个新的 XML 文件，一切正常，更新当前日期元素没问题，但是如果我第二天测试，创建一个新元素，但是当我想更新计数时，一个新的添加日期元素。我不明白这一点，因为所有代码都适用于新文件，但如果文件是一天前的，则不是出于某种原因。

XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<Countlog>
 <date Count="9">4/21/2012</date>
 <date Count="4">4/21/2012</date>
 <date Count="18">4/21/2012</date>
</Countlog> 
```

C＃

```
private void save_btn_Click(object sender, RoutedEventArgs e)
    {
        String _count = Count_tb.Text;
        String s_todaysdate = todaysdate.Date.ToShortDateString();

        IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("Countlog.xml", FileMode.Open, myIsolatedStorage);
        StreamReader reader = new StreamReader(isoStream);
        XDocument _xml = XDocument.Load(reader);
        isoStream.Close();

        var query = from r in _xml.Descendants("Countlog")
                    where r.Element("date").Value == (DateTime.Now.ToShortDateString())
                    select r.Element("date");

        if (!query.Any())
        {
            XElement Addnewdate = new XElement("date", s_todaysdate, new XAttribute("Count", _count));
            _xml.Root.Add(Addnewdate);
            MessageBox.Show("no matching date");
        }
        else
        {
            foreach (XElement _date in query)
            {
                _date.Attribute("Count").Value = _count.ToString();
                MessageBox.Show("Updating date");

            }
        }

        IsolatedStorageFileStream isoStreamsave = new IsolatedStorageFileStream("Countlog.xml", FileMode.Truncate, myIsolatedStorage);

        _xml.Save(isoStreamsave);
        isoStreamsave.Close();
    }

    private void Pivot_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (pivotholder.SelectedIndex == 1)
        {
            IsolatedStorageFileStream isoFileStream2 = myIsolatedStorage.OpenFile("Countlog.xml", FileMode.Open);
            StreamReader reader = new StreamReader(isoFileStream2);
            XML_result.Text = reader.ReadToEnd();
            reader.Close();
        }

    } 
```

如果您需要更多信息，请告诉我，这是我在过去几年潜伏后第一次在这里发帖。

干杯

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:01:41.500

好的，我已经解决了。这个查询：

```
var query = from r in _xml.Descendants("Countlog")
            where r.Element("date").Value == (DateTime.Now.ToShortDateString())
            select r.Element("date"); 
```

*只有当第一个* `date`元素具有正确的值时才会匹配。您正在遍历所有`Countlog`元素（其中只有一个），并寻找第一个`date`元素（因为这就是`Element(...)`它的作用）。

您可以将其更改为简单地使用：

```
var query = _xml.Root.Elements("date")
                     .Where(x => x.Value == (DateTime.Now.ToShortDateString()) 
```

但是，我建议以另一种格式开始：

```
var date = DateTime.Today;
var query = _xml.Root.Elements("date")
                .Where(x => (DateTime) x.Value == date); 
```

然后添加一个新元素：

```
XElement element = new XElement("date",
                      new XAttribute("count", count),
                      date); 
```

或者更新一个：

```
element.Attribute("count").SetValue(count); 
```

这使用 LINQ to XML 的数据类型处理，而不是将所有内容显式转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:09:59.413

1）您的查询以其当前形式搜索当时是真实日期的日期

```
where r.Element("date").Value == (DateTime.Now.ToShortDateString()) 
```

另一方面，我相信您要查询的是您存储在`s_todaysdate`变量中的其他日期。

2）正如 Jon Skeet 已经指出的那样，您假设只有一个`<date>`元素。重新开始您的查询`_xml.Root.Elements("date")`。

因此，最终查询需要修改为：

```
var query = from date in _xml.Root.Elements("date")
            where date.Value == s_todaysdate
            select date; 
```

# actionscript-3 - Flex 键盘事件

> ID：10257116
> 
> 赞同：0
> 
> 时间：2012-04-21T07:24:34.400
> 
> 标签：actionscript-3, apache-flex, advanceddatagrid

我只是想知道，在 Flex Datagrid 中，如果按下的键是 Enter，则停止传播并发送一个假的 Tab 事件。

任何建议，Thankxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:18:13.853

尝试

```
if(event.keyCode == Keyboard.ENTER){
    event.stopPropagation();
    yourTarget.dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_DOWN, true, false, 0, 9));
} 
```

# java - 如何在字符串中找到循环/重复？

> ID：10257117
> 
> 赞同：4
> 
> 时间：2012-04-21T07:24:47.083
> 
> 标签：java

我需要检测字符串中的循环/序列并返回第一次出现。我该怎么做呢？

例子 ：

```
2 0 5 3 1 5 3 1 5 3 1 
```

第一个发生的序列是`5 3 1`。

没有规则。序列可以是字符串长度的一半，例如

```
5 3123 1231 231 31 231 41 452 3453 21 312312 5 3123 1231 231 31 231 41 452 3453 21 312312 
```

顺序是`5 3123 1231 231 31 231 41 452 3453 21 312312`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T11:50:56.333

你研究过[弗洛伊德的寻环算法](http://en.wikipedia.org/wiki/Floyd%27s_cycle-finding_algorithm#Tortoise_and_hare)吗？如果您想找到周期，这可能会对您有所帮助。也很容易实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T11:01:04.153

基于评论的澄清：循环是指立即重复的数字序列。所以

```
1 1 
```

将是一个循环

```
1 3 1 
```

不会因为 1s 的潜在循环被 3 打断

```
1 3 1 3 
```

是一个循环 (1 3)。

所以一个基本的算法可能看起来像这样。

1.  迭代字符串。

2.  对于每个数字，在字符串中找到它的下一次出现。如果没有找到继续下一个字符。

3.  如果找到下一个出现，则比较从当前数字到下一个出现的序列与从下一个出现开始的相同长度的序列。如果它们相同，则您找到了一个循环。如果没有继续下一次发生。

# javascript - 使用Javascript从用户输入的电话号码中提取子字符串

> ID：10257123
> 
> 赞同：0
> 
> 时间：2012-04-21T07:26:39.650
> 
> 标签：javascript, regex, phone-number, onblur

我从用户那里得到电话号码输入为 +XXX-X-XXX-XXXX （+XXX 作为国家代码），（X 作为城市代码），（XXX 作为第 3 位数字）和，（XXX 作为第 4 位数字）。我使用正则表达式来确认条目，如下面的代码所示；

```
function validate(form) {
    var phone = form.phone.value;
    var phoneRegex = /^(\+|00)\d{2,3}-\d{1,2}-\d{3}-\d{4}$/g;
    //Checking 'phone' and its regular expressions  
    if(phone == "") {
      inlineMsg('phone','<strong>Error</strong><br />You must enter phone number.',2);
    return false;
    }
    if(!phone.match(phoneRegex)) {
      inlineMsg('phone','<strong>Error</strong><br />Enter valid phone <br />+xxx-x-xxx-xxxx (or) <br />00xxx-x-xxx-xxxx.',2);
    return false;
    }
  return true;
} 
```

它工作得很好，但问题是

**编辑：** 如果用户输入为+XXXXXXXXXXXX（全部一起）并按回车键或转到另一个字段，则输入根据正则表达式自行设置，即+XXX-X-XXX-XXXX。

有人可以用一些例子指导我如何完成这项任务。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:53:14.587

尝试塑造输入：
`result = subject.replace(/^((\+|00)\d{2,3})-?(\d{1,2})-?(\d{3})-?(\d{4})$/mg, "$1-$3-$4-$5");`

然后进行下一个程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:17:02.523

将元素的 onblur 方法设置为回调，如下所示：

```
var isValidPhoneNumber = function(string) {
    ...
}

var reformat = function(string) {
    /*
     *  > reformat('example 123 1 1 2 3 123-45')
     *  "+123-1-123-1234"
     */
    var numbers = string.match(/\d/g);
    return '+' + [
        numbers.slice(0,3).join(''),
        numbers.slice(3,4).join(''),
        numbers.slice(4,7).join(''),
        numbers.slice(7,11).join('')
    ].join('-');
}

var reformatPhoneNumber = function() {
    var inputElement = this;
    var value = inputElement.value;

    if (isValidPhoneNumber(value))
        inputElement.value = reformat(inputElement.value);
    else
        // complain to user
} 
```

以下是设置 onblur 回调处理程序的两种示例方法：

```
document.getElementById('yourinputelement').onblur = reformatPhoneNumber;
<input ... onblur="reformatPhoneNumber"/> 
```

`reformatPhoneNumber`如果您愿意，可以添加更多验证代码，或者只是在用户输入数字时不断验证数字。

仅当您的电话号码为表单时才执行此操作，然后在您的 if 语句中`+ABCDEFGHIJK`添加一个。`string.match(/^\+\d{11}$/)!==null`( `^`,`$`表示字符串的开头和结尾，`\+`表示加号，`\d`表示数字 0-9，重复`{11}`次数)。具体来说：

```
function isPlusAndEleventDigits(string) {
    /*
     *  Returns whether string is exactly of the form '+00000000000'
     *  where 0 means any digit 0-9
     */
    return string.match(/^\+\d{11}$/)!==null
} 
```

# iphone - Apple 推送通知如何在 iPhone 应用程序中传递给用户？

> ID：10257127
> 
> 赞同：2
> 
> 时间：2012-04-21T07:27:30.443
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我正在开发一个 iPhone 应用程序。在我当前的 iPhone 应用程序中，我想集成我们想要向用户发送消息的 APNS。我收集了有关 APNS 的信息。但是，我仍然对 APNS 有一些疑问。

1.  APN 是如何工作的，这意味着推送通知如何向用户显示？
2.  如果我们的 iPhone 应用程序从后台关闭，Apple 推送通知将起作用还是我们的应用程序应该正在运行？
3.  如果我们向用户发送通知，但如果用户处于离线状态，会发生什么情况。一旦用户上线（获取网络连接），消息将传递给用户，或者消息不会显示给用户？
4.  如果用户没有在他们的 iPhone 中打开应用程序，推送通知会显示给用户吗？

谁能指导我解决这些疑问？我希望你们的朋友。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:57:28.037

我认为您没有遵循[Apple 开发人员库](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)的说明。我怀疑您对 APNS 及其工作的理解。

当您向用户发送通知时，他/她的手机已关闭或未连接到互联网，当他/她的手机打开或连接到网络时，他/她将收到消息/通知。

当您的应用程序处于后台或用户未使用该应用程序时，推送通知也可以工作。

希望这些信息可以消除您的困惑，您应该查看有关推送通知的[苹果开发者视频和 SDK。](https://developer.apple.com/videos/wwdc/2014/)这[也是 SOreadytohelp](https://stackoverflow.com/questions/1381387/push-notification-background-process-iphone)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T11:59:35.463

你问了很多问题。我会尽量回答其中一些我知道的：

1.  APN 的工作原理：您使用特定的设备 ID 向 Apple 的服务器发送消息。Apple 会将该消息传递到 iOS 设备。（您可能想要更具体的答案，所以请询问。）
2.  如果您的应用程序已被允许后台应用程序通知，那么它们将在后台传递。（用户可以启用/禁用此功能）
3.  如果特定的 iOS 设备未连接到网络，则通知将排队。但是，相同的通知将被丢弃，并且只会发送最新的通知。请参阅：[服务质量](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW4)
4.  是的（基本上与 2 的答案相同）。

# objective-c - iPad 3 应用程序开发的图像尺寸（分辨率）是多少？

> ID：10257128
> 
> 赞同：6
> 
> 时间：2012-04-21T07:27:31.587
> 
> 标签：objective-c, ios, xcode, ipad, ipad-3

众所周知，iPad 3 的分辨率为 2048×1536。对于具有视网膜显示屏的 iPhone 4，我们将名称为 @2X 的大图像和一张普通图像放入我们的捆绑包中。

所以对于 iPad 3 应用程序开发，我们还需要放两张图片，一张是正常尺寸，另一张是 @2X 名称的大尺寸..？

有知道的请回复。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T07:45:03.337

使用 iPad 3，您还只需为您的视网膜图像命名`foo@2x.png`。它需要恰好是相应分辨率的两倍`foo.png`。所以，比如说`foo.png`是 10x10，那么你`foo@2x.png`需要是 20x20。

您也可以专门为 iPhone/iPod 或 iPad 制作版本，iOS 会自动选择正确的版本。为此，您可以使用`~iphone`and`~ipad`修饰符：

*   `foo.png`适用于所有非视网膜显示屏的设备
*   `foo~iphone.png`专为 iPhone/iPod 非视网膜
*   `foo~ipad.png`专为 iPad 非视网膜
*   `foo@2x.png`适用于所有配备 Retina 显示屏的设备
*   `foo@2x~iphone.png`专为 iPhone/iPad 视网膜
*   `foo@2x~ipad.png`专为 iPad 视网膜

您可以任意组合它们，只要始终有适用于所有受支持设备的版本（当然，如果您正在开发仅适用于 iPad 的应用程序，则无需为 iPhone 提供图像）。所以可以提供例如`foo~iphone.png`，`foo~ipad.png`然后`foo@2x.png`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T07:33:13.473

如果您正在编写通用应用程序，我认为对于带有 Retina Display 的 iPad 将是“image~ipad”和“image@2x~ipad”（因为“image”和“image@2x”适用于 iPhone/iPod 图像）。

否则我猜“image”和“image@2x”是可以的。

请参阅[如何在通用应用程序中同时支持 iPad 和 iPhone 视网膜图形](https://stackoverflow.com/questions/9611061/how-to-support-both-ipad-and-iphone-retina-graphics-in-universal-apps)。

# android - Android：如何通过 onclick 从 SimpleAdapter 返回选定的数据集？

> ID：10257129
> 
> 赞同：0
> 
> 时间：2012-04-21T07:27:34.087
> 
> 标签：android, listview

我正在尝试使用 SimpleAdapter 让我的头脑清醒，但是我正在为一个项目而苦苦挣扎。

如何返回所选视图的数据数组？

这是我用来生成它的代码。

```
// Data for List Adapter
List<Map<String, Object>> resourceNames = new ArrayList<Map<String, Object>>();

// Make Hashmap of Results Hashmaps
generateData(resourceNames);

//Source information from Hashmap keys (FROM)
String keynames[]={"names","descriptions"};

// Target Views for Data (TO) 
int[] targets = new int[] { R.id.textfield_name,R.id.textfield_description};

// Create my Simple Adapter
SimpleAdapter adapter = new SimpleAdapter(this, resourceNames,
        R.layout.listrow, keynames,targets
        );

setListAdapter(adapter); 
```

}

然后，我使用 onclick 侦听器使用以下代码获取数据：

```
setContentView(R.layout.listview);

final ListView listView = getListView();
listView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long arg3) {
        Toast.makeText(arg1.getContext(),
                getString(R.string.selected) + " " + position,
                Toast.LENGTH_SHORT).show();

        // How do I return the entire data that I used                  
        }
}); 
```

我可以在上面看到如何获取数据在数组中的位置 - 但是如何返回视图中显示的实际结果数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:32:35.110

宣布`List<Map<String, Object>> resourceNames = new ArrayList<Map<String, Object>>();`

全局并在 ListView 的`onItemClick()`just put 行中，

```
Map<String, Object> map = resourceNames.get(position); 
```

# jquery - jQuery 是由 Google、Yahoo、bing 等搜索引擎执行的吗？

> ID：10257131
> 
> 赞同：0
> 
> 时间：2012-04-21T07:27:51.587
> 
> 标签：jquery, seo, meta-tags

如果我们使用 jQuery 设置元标记

```
 $(document).ready(function () {

 }); 
```

这是否适用于谷歌、雅虎、必应等搜索引擎的 SEO？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:29:54.830

不太可能。搜索引擎通常不运行脚本。

# ruby-on-rails-3 - 限制rails中属性的变化率

> ID：10257135
> 
> 赞同：0
> 
> 时间：2012-04-21T07:29:08.280
> 
> 标签：ruby-on-rails-3, attributes, edit

我有一个用户模型。我想限制用户可以更改其姓名的速率。

显然，一个人不会每天或每周都改名。

如何最好地实施这样的限制，例如每月更改一次？

我能想到的唯一方法是为每个现有属性放置另一个属性，以便`:name`我将创建`:name_last_changed_at`并每次测试它。

有没有更优雅/更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:03:19.147

您可以在列上关联`updated_at`并在模型中对其进行验证。

# sql-server-2005 - 从其他行更新一行的列值

> ID：10257136
> 
> 赞同：1
> 
> 时间：2012-04-21T07:29:18.950
> 
> 标签：sql-server-2005

我有下表：

```
sno name   pid amount total
1   Arif    0   100    null 
2   Raj     1   200    null
3   Ramesh  2   100    null
4   Pooja   2   100    null
5   Swati   3   200    null
6   King    4   100    null 
```

我想要每个人的总数，以便它给出其后代数量的总和。例如。

*   对于 RAJ，总计将是：总计 =（raj+ramesh+pooja+swati+king）的数量
*   对于斯瓦蒂：总计=仅斯瓦蒂的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T18:35:31.043

你可以尝试这样的事情：

```
WITH hierarchified AS (
  SELECT
    sno,
    amount,
    hierarchyID = CAST(sno AS varchar(500))
  FROM yourTable
  WHERE pid = 0
  UNION ALL
  SELECT
    t.sno,
    t.amount,
    hierarchyID = CAST(h.hierarchyID + '/' + RTRIM(t.sno) AS varchar(500))
  FROM yourTable t
    INNER JOIN hierarchified h ON t.pid = h.sno
)
UPDATE yourTable
SET total = t.amount + ISNULL(
  (
    SELECT SUM(amount)
    FROM hierarchified
    WHERE hierarchyID LIKE h.hierarchyID + '/%'
  ),
  0
)
FROM yourTable t
INNER JOIN hierarchified h ON t.sno = h.sno; 
```

请注意，此查询（您可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!3/4d10c/2)尝试）在大型数据集上可能效率不高。它可以作为一次性查询，然后每次更新表时组织更新总数可能会更好，即使用触发器。

# android - 用于 C2DM 注册的邮件帐户

> ID：10257137
> 
> 赞同：0
> 
> 时间：2012-04-21T07:29:29.267
> 
> 标签：android, gmail, android-c2dm

我在 Android 上使用 C2DM 进行“推送通知”。一切正常。

我的问题是；我可以得到“如果设备有多个同步的 gmail 帐户，哪个用于 C2DM”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:07:52.367

请参阅此链接以了解[C2DM并在此](https://developers.google.com/android/c2dm/)[链接](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)上提供示例。现在您的设备认为它与设备相关。

在下面的代码中，使用的电子邮件 ID 不是特定于设备的。C2DM 使用电子邮件 ID 仅用于服务器和 C2DM 之间的交互，而不依赖于设备。

// 当你的应用程序启动时调用

```
public void StartRegistrationNotification()
    {

        Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
        registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
        registrationIntent.putExtra("sender", "....@gmail.com");
        this.startService(registrationIntent);  

}
// change in Manifest File

<receiver android:name="com.ReceiverC2DM"
        android:permission="com.google.android.c2dm.permission.SEND">
        <!-- Receive the actual message -->
        <intent-filter>

            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <category android:name="yourpackagename" />
        </intent-filter>
        <!-- Receive the registration id -->
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="yourpackagename" />
        </intent-filter>
    </receiver>
    <permission android:name="yourpackagename.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="yourpackagename.permission.C2D_MESSAGE" />
<!-- This app has permission to register and receive message -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

# html - 来自 Html5Asp 的 HTML5 控件 - 视频问题

> ID：10257139
> 
> 赞同：0
> 
> 时间：2012-04-21T07:29:51.803
> 
> 标签：html

我一直在试验这些新的“HTML5：”控件，我不确定是否有更好的选择，或者我对所有这些都太陌生，无法理解基本语法。这是我的代码，我在 Maplink 和 EmailLink 上取得了成功，但在过去的一个小时里，我试图用谷歌搜索视频的答案。无论我尝试什么，我都无法在任何地方定义源文件而不会失败。我希望有一个网站可以为您提供这些控件的使用语法，但我似乎找不到。Html5Asp 网站确实提供了一些示例，但只有少数。

```
<div>        
    <html5:MapLink runat="server" ID="lnkMap" Text="Directions to Hodas"
    Start="3022 Hudson Road, Erie, PA 20540 "
    Finish="3421 Emerson Avenue, Erie, PA, 16508" />    
    <br />
    <html5:EmailLink runat="server" ID="lnkEmail" Subject="Easy to Email This" Body="I am testing HTML5." 
    MailTo="bhodas@curtze.com" CC="tony@curtze.com" Text="Send Email"/>
    <br />
    <html5:Video ID="Video1" width="320" height="240" runat="server" ControlsOn="true">
        <Source>
        </Source>
    </html5:Video>    
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-21T07:40:24.310

您需要在源标签中添加 src 和 type 属性

```
<source src="__VIDEO__.MP4" type="video/mp4" /> 
```

这是一个很好的[资源](http://camendesign.com/code/video_for_everybody)

# serialization - 你如何序列化 Ember 对象？

> ID：10257144
> 
> 赞同：6
> 
> 时间：2012-04-21T07:30:10.787
> 
> 标签：serialization, deserialization, ember.js

我需要使用 localStorage 来存储一些 Ember 对象。我注意到 Ember 对象具有名称如`__ember1334992182483`. 当我调用`JSON.stringify()`Ember 对象时，这些`__ember*`属性不会序列化。为什么是这样？我并不是说我想序列化这些属性。我只是好奇它们到底是什么以及它们是如何实现的，因此它们不会被序列化。

我正在使用cycle.js（[https://github.com/douglascrockford/JSON-js/blob/master/cycle.js](https://github.com/douglascrockford/JSON-js/blob/master/cycle.js)）将包含重复引用的数据结构编码为可用于重建原始数据的字符串结构。它可以让你这样做：

```
a = {a:1}
b = {b:1}
c = [[a, b], [b, a]]

foo = JSON.stringify(JSON.decycle(c))  // "[[{'a':1},{'b':1}],[{'$ref':'$[0][1]'},{'$ref':'$[0][0]'}]]"
JSON.retrocycle(JSON.parse(foo))  // reconstruct c 
```

对于 Ember 对象，我可以做同样的事情，但我还需要将反序列化的对象传递给，`Ember.Object.create()`因为它们被反序列化为纯 JavaScript 对象。

这是序列化/反序列化 Ember 对象的最佳方法吗？有推荐的技术吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T15:31:11.093

对于序列化和反序列化，您可以执行以下操作，请参阅[http://jsfiddle.net/pangratz666/NVpng/](http://jsfiddle.net/pangratz666/NVpng/)：

```
App.Serializable = Ember.Mixin.create({
    serialize: function() {
        var propertyNames = this.get('propertyNames') || [];
        return this.getProperties(propertyNames);
    },

    deserialize: function(hash) {
        this.setProperties(hash);
    }
});

App.Person = Ember.Object.extend(App.Serializable, {
    propertyNames: 'firstName title fullName'.w(),
    fullName: function() {
        return '%@ %@'.fmt(this.get('title'), this.get('firstName'));
    }.property('firstName', 'title')
});

var hansi = App.Person.create({
    firstName: 'Hansi',
    title: 'Mr.'
});

// { firstName: 'hansi', title: 'Mr.', fullName: 'Mr. Hansi' }
console.log( hansi.serialize() );

var hubert = App.Person.create();
hubert.deserialize({
    firstName: 'Hubert',
    title: 'Mr.'
});
console.log( hubert.serialize() );​ 
```

* * *

**更新**：也看看类似的问题[Ember model to json](https://stackoverflow.com/questions/8669340/ember-model-to-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:18:33.617

我会使用 ember-data 并为此编写一个数据存储适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T22:21:43.337

我有：

*   固定和简化的代码
*   添加循环引用预防
*   增加使用 get of value
*   删除了空组件的所有默认属性

    ```
    //Modified by Shimon Doodkin 
    //Based on answers of: @leo, @pangratz, @kevin-pauli, @Klaus
    //http://stackoverflow.com/questions/8669340

    App.Jsonable = Em.Mixin.create({
        getJson : function (keysToSkip, visited) {
            //getJson() called with no arguments,
            // they are to pass on values during recursion.

            if (!keysToSkip)
                keysToSkip = Object.keys(Ember.Component.create());

            if (!visited)
                visited = [];

            visited.push(this);

            var getIsFunction;

            var jsonValue = function (attr, key, obj) {
                if (Em.isArray(attr))
                    return attr.map(jsonValue);
                if (App.Jsonable.detect(attr))
                    return attr.getJson(keysToSkip, visited);
                return getIsFunction?obj.get(key):attr;
            };

            var base;
            if (!Em.isNone(this.get('jsonProperties')))
                base = this.getProperties(this.get('jsonProperties'));
            else
                base = this;

            getIsFunction=Em.typeOf(base.get) === 'function';

            var json = {};

            var hasProp = Object.prototype.hasOwnProperty;

            for (var key in base) {

                if (!hasProp.call(base, key) || keysToSkip.indexOf(key) != -1)
                    continue;

                var value = base[key];

                // there are usual circular references
                // on keys: ownerView, controller, context === base

                if ( value === base ||
                     value === 'toString' ||
                     Em.typeOf(value) === 'function')
                    continue;

                // optional, works also without this,
                // the rule above if value === base covers the usual case
                if (visited.indexOf(value) != -1)
                    continue;

                json[key] = jsonValue(value, key, base);

            }

            visited.pop();
            return json;
        }
    });

    /*
    example:

    DeliveryInfoInput = Ember.Object.extend(App.Jsonable,{
     jsonProperties: ["title","value","name"], //Optionally specify properties for json
     title:"",
     value:"",
     input:false,
     textarea:false,
     size:22,
     rows:"",
     name:"",
     hint:""
    })
    */ 
    ```

# javascript - JavaScript/HTML：无法使用数组表示法访问单选组元素

> ID：10257150
> 
> 赞同：0
> 
> 时间：2012-04-21T07:31:12.433
> 
> 标签：javascript, html, forms, dom

我想要的是：

```
if(document.forms[0].elements[0][1].checked) 
```

或者

```
 if(document.forms[0].elements[0].[1].checked) 
```

有效的是：

```
if(document.forms[0].rad[1].checked) 
```

鉴于：

```
<h3>Who's Bill?</h3>
<input type="radio" value="0" name="rad">Bill Clinton
<input type="radio" value="1" name="rad">Bill Gates 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:54:33.093

好吧，您的第二个首选选项在语法上是错误的。它在任何情况下都不起作用，因为它违反了语言规则。

您的首选方法并非不合理，但请考虑您要求的是特定元素。即，表单中的第一个元素。该元素是一个单选按钮，而不是一组单选按钮，因此，尽管该语法可能是您的偏好，但它实际上并不遵循您在代码中查看的内容。

它的工作方式是表单获取一个以单选组名称命名的数组对象，并且该数组的子项按照单选按钮实际出现的顺序填充。

您也可以将它们作为 `document.forms[0].elements["rad"][0];//`(1, 2... 等) 访问它们，这对您来说可能感觉更好？我不知道...我不确定您的首选方法是基于什么，所以很难说这是否会更吸引您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:30:01.663

`elements`包含所有表单元素的数组。这意味着，当您指向`document.forms[0].elements[0]`您指向的第一个单选按钮元素时。相反，当您使用时`document.forms[0].rad`，您将指向一个`name`等于“rad”的元素：如果多个元素具有相同的名称，则返回的是一个元素数组。

所以有类似的东西`document.forms[0].elements[0][1]`完全是错误的：你试图访问一个名为“1”的属性到你的 HTMLInputElement 对象。此外，您需要在 HTML 代码中使用名称来“分组”无线电，否则它们可以一起选择而不是相互排斥。

如果你真的想要，你可以得到类似的东西，建立你自己的功能，有类似的东西：

```
var elements = getElements(document.forms[0]);

if (elements[0][1].checked) 
```

但我没有看到好处。

# android - 在两个活动之间传递值矩阵

> ID：10257152
> 
> 赞同：1
> 
> 时间：2012-04-21T07:31:32.000
> 
> 标签：android, android-intent

我不能在两个活动之间传递整数矩阵。这是代码：

*   活动一：

    `intent.putExtra("matrix_", (Serializable)matrix);`

*   活动 B：

    ```
    Bundle extras = getIntent().getExtras();
    matrix =  (int[][]) extras.getSerializable("matrix_"); 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-29T08:37:44.577

有一种简单的方法可以通过意图传递矩阵。

活动一：

```
float[] values = new float[9];
matrix.getValues(values);
intent.putExtra("matrix_values", values); 
```

活动 B：

```
float[] values = getIntent().getFloatArrayExtra("matrix_values");
Matrix matrix = new Matrix();
matrix.setValues(values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:35:06.233

当您创建意图对象时，您可以利用以下两种方法在两个活动之间传递对象。

[把Parceble](http://developer.android.com/reference/android/os/Bundle.html#putParcelable%28java.lang.String,%20android.os.Parcelable%29)

[putSerializable](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)

你可以用这个做的是让你的类实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)或[Serializable](http://developer.android.com/reference/java/io/Serializable.html)。

然后，您可以跨活动传递您的自定义类。我发现这非常有用。

这是我正在使用的一小段代码

```
Matrix matrix  = new Matrix ();
Intent i = new Intent();

Bundle b = new Bundle();
b.putParcelable("CUSTOM_LISTING", matrix  );
i.putExtras(b);
i.setClass(this, NextActivity.class);
startActivity(i); 
```

在新开始的活动代码中将是这样的......

```
Bundle b = this.getIntent().getExtras();
if(b!=null)
    mCurrentListing = b.getParcelable("CUSTOM_LISTING"); 
```

** 使用链接编辑::: **

[LINK1](http://groups.google.com/group/android-beginners/browse_thread/thread/676a603928950e24/a898ae5c217318e1)包含示例代码

[链接2](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)

[链接3](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

# ms-access - 使用 DLookup 检查记录是否存在（具有多个条件）

> ID：10257153
> 
> 赞同：4
> 
> 时间：2012-04-21T07:31:49.120
> 
> 标签：ms-access, vba

我试图在我的 VBA 中创建一个函数，如果他们尝试插入的记录已经存在，但它返回类型不匹配。

EventCombo 是一个整数 MedalCombo 是字符串

```
Private Sub MyCombo_BeforeUpdate(Cancel As Integer)

If Not IsNull(DLookup("RacerID", "Medals", "RaceID = " + EventCombo.Value _
+ " AND Medal = '" + MedalCombo.Value + "'" )) Then
MsgBox "Record Exists"
End If.

End Sub 
```

这样做（或应该做的）是确保没有其他人在同一场比赛中获得相同的奖牌。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:35:11.987

使用 Access 中的组合框，您需要确保 .value 确实是您想要的。通常第一列是隐藏的，它是 .value，而下拉框中可见的不是 .value。当使用组合框消除混淆时，我使用 .columns 属性。

此外，为了确保组合框的结果是数字而不是文本（因为您在示例中没有使用引号），我使用 val() 函数将组合框数据转换为数字。如果它已经是一个数字，这将无效。否则，如果它是存储为字符串的数字，它会将其转换为数字。这可能不是绝对必要的，但它消除了另一个可能的问题。如果组合框列的值是一些无法转换为数字的文本，它将返回 0，您可以在代码中对其进行测试。

我用以下内容稍微清理了你的代码

*   我用 & 替换了 + 就像 Remou 说的
*   将 .value 更改为 .columns(0)。如果您要查找的列不是第一个，请将 0 更改为适当的值
*   值（）函数
*   删除了续行_。（个人喜好，无视）

* * *

```
Private Sub MyCombo_BeforeUpdate(Cancel As Integer)

    If Not IsNull(DLookup("RacerID", "Medals", "RaceID = " & Val(EventCombo.Columns(0)) & " AND Medal = '" & MedalCombo.Columns(0) & "'")) Then
        MsgBox "Record Exists"
    End If

End Sub 
```

# android - 如何在Android的自定义列表视图中滚动之前打印所有名称

> ID：10257161
> 
> 赞同：-1
> 
> 时间：2012-04-21T07:32:52.990
> 
> 标签：android

在我的应用程序中，我从[MySQL](http://en.wikipedia.org/wiki/MySQL)服务器数据库中获取所有图像和名称到 Android 手机。如果模拟器屏幕是[HVGA](http://en.wikipedia.org/wiki/Graphics_display_resolution#HVGA_.28480.C3.97320.29)，则只显示五个图像和名称。在[LogCat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)中也只有五个名字被打印出来。当我滚动屏幕时，我可以在屏幕上看到多少个名字，只有打印出多少个名字。取而代之的是，所有名称都必须在滚动之前打印出来。

```
public class VegdishesListview extends BaseAdapter {
    String qrimage;
    Bitmap bmp, resizedbitmap;
    Bitmap[] bmps;
    Activity activity = null;
    private LayoutInflater inflater;

    private ImageView[] mImages;
    String[] itemimage;
    TextView[] tv;
    String itemname,price,desc;
    String[] itemnames;
    String[] prices;
    String[] descs;
    HashMap<String, String> map = new HashMap<String, String>();

    public VegdishesListview(Context context, JSONArray imageArrayJson) {
        //inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //  imageLoader = new ImageLoader(activity);
        inflater = LayoutInflater.from(context);
        this.mImages = new ImageView[imageArrayJson.length()];
        this.bmps = new Bitmap[imageArrayJson.length()];
        this.itemnames = new String[imageArrayJson.length()];
        this.prices = new String[imageArrayJson.length()];
        this.descs = new String[imageArrayJson.length()];
        try {
            for (int i = 0; i < imageArrayJson.length(); i++) {
                JSONObject image = imageArrayJson.getJSONObject(i);
                qrimage = image.getString("itemimage");
                itemname = image.getString("itemname");
                price = image.getString("price");
                desc = image.getString("itemdesc");

                itemnames[i] = itemname;
                prices[i] = price;
                descs[i] = desc;

                byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

                bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                                                    qrimageBytes.length);
                int width = 100;
                int height = 100;
                resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                                                          true);
                bmps[i] = bmp;

                mImages[i] = new ImageView(context);
                mImages[i].setImageBitmap(resizedbitmap);

                mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

                // tv[i].setText(itemname);
            }
            System.out.println(map);
        }
        catch (Exception e) {
            // TODO: handle exception
        }
    }

    public int getCount() {
        return mImages.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;

        vi = inflater.inflate(R.layout.vegdisheslistview, null);

        TextView text = (TextView)vi.findViewById(R.id.vegdishestext);
        ImageView image = (ImageView)vi.findViewById(R.id.vegdishesimage);
        TextView text1 = (TextView)vi.findViewById(R.id.vegdishesprice);
        TextView text2 = (TextView)vi.findViewById(R.id.vegdishesdesc);
        image.setImageBitmap(bmps[position]);
        text.setText(itemnames[position]);
        text1.setText(prices[position]);
        text2.setText(descs[position]);
        System.out.println(itemnames[position]);

        return vi;
    } 
```

这是我的自定义列表视图 XML 布局。如何根据需要更改我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:49:36.580

这是默认的 ListView 操作，在 Android ListView 中它会回收视图。换句话说，它只考虑一次可以在屏幕上放置的项目数量，因此在您的情况下，您只能在屏幕上看到这五个元素，因此...

有关更多信息，请参阅Android 文档中的[AdapterView](http://developer.android.com/reference/android/widget/AdapterView.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:50:51.847

创建列表视图是为了显示大数据列表，但效率与移动设备资源相关。

它重用视图以提高效率。

您提供给列表的适配器中必须有一个 getView 方法。这为列表视图的每个位置提供了独立的视图。

并且仅对屏幕可见的视图调用它。我确定您在 getView 中记录了该名称。

当您滚动时，将再次调用 getView 方法以将所有视图绘制到屏幕上。

如果您希望一次打印所有数据，请在设置适配器之前执行此操作。但这不明智。实际上只加载那些需要显示的内容。

# android - Android颜色转换问题

> ID：10257175
> 
> 赞同：1
> 
> 时间：2012-04-21T07:35:09.020
> 
> 标签：android, colors, rgb, color-picker, hsv

我正在尝试在 RGB 和 HSV 之间执行颜色转换并返回到 RGB。它适用于我正在创建的 HSV 颜色选择器程序。我检索 HSV 组件。我想严格为我的颜色设置新的饱和度，因此将饱和度值设置为等于请求的值。然后我将它转换回RGB。但是，色调的值发生了变化，我没有要求它。此外，如果我不断移动饱和度滑块，色调最终会与青色、黄色或洋红色对齐，它们的色调分别为 60、180 和 300。有没有办法在设置饱和度时不改变色调?

注意：getHue、getSaturation 和 getValue 正在检索 colorCode 的 HSV 组件

```
public void setSaturation(float s)
{
    float hsv[];
    hsv = new float[3];
    Log.i("Before change",String.valueOf("H: "+getHue()+" S: "+getSaturation()+" V: "+getValue()));
    Color.RGBToHSV(getRed(), getGreen(), getBlue(), hsv);
    hsv[1] = s;
    colorCode = Color.HSVToColor(hsv);
    Log.i("After change",String.valueOf("H: "+getHue()+" S: "+getSaturation()+" V: "+getValue()));
} 
```

更改前（21558）：H：28.771929 S：0.67058825 V：1.0

更改后（21558）：H：28.928572 S：0.65882355 V：1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:18:32.367

从 rgb 到 hsv 的转换是非线性的，浮点精度不够高，无法进行无损转换。[在这里](http://code.google.com/p/streumix-frei0r-goodies/wiki/Integer_based_RGB_HSV_conversion)，您可以找到基于整数的无损转换解决方案。它的 c++ 但应该很容易转换为 java。

# android - 嵌套 Android ViewPager，在 ListView 内水平滑动 ListItems

> ID：10257176
> 
> 赞同：12
> 
> 时间：2012-04-21T07:35:11.130
> 
> 标签：android, listview, nested, android-viewpager

我在活动的根级别上有一个 ViewPager。

寻呼机的每个页面都包含一个 ListFragment（由 FragmentPagerAdapter 支持）。

一些列表视图项目应该包含额外的 ViewPagers 以支持滑动这些项目的内容（例如列表项目内的水平画廊）。

如何嵌套视图寻呼机？ViewPager -> ListView（在页面中） -> ViewPager（在列表项中）

我可以在 ListFragments 之间水平滑动，也可以垂直滑动整个列表，但不能在列表项内滑动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-08T18:45:34.207

我`OnTouchListener`在内部添加了一个`ViewPager`：

```
private OnTouchListener mSuppressInterceptListener = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(
                event.getAction() == MotionEvent.ACTION_DOWN &&
                v instanceof ViewGroup
        ) {
                ((ViewGroup) v).requestDisallowInterceptTouchEvent(true);
        }
        return false;
    }
}; 
```

这只是检测内部的 ACTION_DOWN 触摸事件`ViewPager`并防止外部拦截它。因为它返回 false，所以应该只触发 ACTION_DOWN 事件；所有其他事件将被忽略。您可以将此侦听器添加到您想要“保护”免受外部`ViewPager`滚动的每个元素，但显然如果您想在这些元素上获取任何其他触摸行为，您需要在触摸侦听器内部处理它们，并且可能实现一个更好的监听器。

感谢@Rodja，他首先给了我这个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T09:44:12.820

虽然它不是最好的交互设计，但可以通过覆盖根级 Activity的*dispatchTouchEvent(MotionEvent ev)*方法并在 mainPager 和当前 ListView 上使用*requestDisallowInterceptTouchEvent(true)来防止其他滚动来实现这一点。*看这个例子：

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {

    Fragment listFragment = getSupportFragmentManager().findFragmentByTag(
            "android:switcher:" + R.id.pager + ":" + (mainPager.getCurrentItem()));
    mainPager.getChildAt(mainPager.getCurrentItem());
    if (listFragment == null)
        return super.dispatchTouchEvent(ev);
    ViewPager embeddedPager = (ViewPager) listFragment.getView().findViewById(R.id.videopager);
    if (embeddedPager != null) {
        int[] position = new int[2];
        embeddedPager.getLocationOnScreen(position);
        if (ev.getY() > position[1] && ev.getY() < position[1] + embeddedPager.getHeight()) {
            mainPager.requestDisallowInterceptTouchEvent(true);
            if (embeddedPager.getScrollX() % embeddedPager.getWidth() != 0) {
                ListView listView = (ListView) listFragment.getView().findViewById(
                        android.R.id.list);
                listView.requestDisallowInterceptTouchEvent(true);
            }
        }
    }

    return super.dispatchTouchEvent(ev);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T16:36:00.170

您不能真正嵌套需要相同手势来控制它们的元素。由于视图寻呼机已经在捕获水平运动，因此您的嵌套元素将无法获得它。你可能会做很多工作来通过管理焦点等来解决这个问题——但最终你的应用程序会让用户感到困惑。最好不要嵌套使用相同交互的元素……在这种情况下，两个视图寻呼机都在观察左右运动。

# php - 使用 __call() 将参数传递给一个需要多个但不作为数组的方法

> ID：10257182
> 
> 赞同：2
> 
> 时间：2012-04-21T07:36:29.340
> 
> 标签：php

我创建了一个 __call() 方法来动态加载方法。我想解决的一个问题是 __call() 将调用传递的所有参数组成一个数组。这是我的代码

```
public function __call($method, $params)
{
    if (count($params) <= 1)
            $params = $params[0];

    foreach (get_object_vars($this) as $property => $value) {

        $class = '\\System\\' . ucfirst(str_replace('_', '', $property)) . '_Helper';

        if (strpos($method, str_replace('_', '', $property)) !== false) {

            if (!in_array($class, get_declared_classes()))
                $this->$property = new $class($params);

            $error = $method . ' doesn\'t exist in class ' . $class;

            return (method_exists($class, $method) ? $this->$property->$method($params) : $error);
        }
    }
} 
```

问题是我可以解释只有一个参数的数组，但是我的一些方法接受了多个参数，这限制了 __call() 方法的动态性质。

如何将数组转换为动态传递的方法参数？

所以

```
array(0 => 'stuff1', 1 => 'stuff2'); 
```

可以作为

```
$this->->helper->test($param1, $param2); 
```

代替

```
$this->helper->test($params); 
```

使用当前的设计，我需要访问参数，例如

```
public function test($params)
{
    print_r($params);
    echo $param[0];
} 
```

但我希望以传统方式使用它

```
public function test($param1, $param2)
{
    echo $para1 . " " . $param2;
} 
```

请记住，某些方法需要超过 2 个参数，原因是如果我包含不是我创建的传统样式类方法，我需要将所有参数调用转换为数组索引指针。

编辑：

根据答案

```
return (method_exists($class, $method) ? call_user_func_array(array($this->$property, $method), $params) : $error); 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T07:45:58.010

可以用[call_user_func_array来完成](http://docs.php.net/call_user_func_array)

```
call_user_func_array( array($this->$property, $method), $params ); 
```

或通过[反射](http://docs.php.net/reflection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:45:55.460

看起来你需要[`call_user_func_array()`](http://us.php.net/call_user_func_array)。[这个评论](http://us.php.net/manual/en/function.call-user-func-array.php#100794)也很有用。

（另外，考虑抛出异常而不是仅仅返回错误字符串。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-03T22:34:17.490

从 php 5.6 开始，您可以通过新的[splat 运算符](https://www.php.net/manual/en/migration56.new-features.php#migration56.new-features.splat)解压缩参数，如下所示：

```
public function __call($method, $params) {
    $result = $this->helper->$method(...$params);
    return $result;
} 
```

# php - PHP正则表达式匹配配对标签但不匹配未配对标签

> ID：10257186
> 
> 赞同：-1
> 
> 时间：2012-04-21T07:37:25.613
> 
> 标签：php, regex

我正在提取标签的嵌套内容。我编写了一个在我的本地机器（WAMP）PHP 版本 5.3.8、多字节正则表达式（oniguruma）版本 - 4.7.1 上完美运行的正则表达式

```
$tagname = 'mytag';
$pattern = "@<$tagname(?:\s.*?!/)?>(.*?)</$tagname\s*>@s"; 
```

但是相同的正则表达式在配置 PHP 5.2.11、多字节正则表达式（oniguruma）版本 - 4.4.4 和多字节正则表达式（oniguruma）回溯检查 = 的实时机器上无法正常工作。

请帮助修改此正则表达式，使其在实时站点上开始工作。

此正则表达式匹配`<mytag></mytag>`且不匹配`<mytag />`。

更新：感谢您的建议和回复。

我稍微更新了那个正则表达式，它对我有用。每当您想要获取内部内容（嵌套标签和文本）时，您都可以使用此正则表达式。无论您的标签如何排列，无论它有多少属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:43:14.743

你必须放在某个地方，比如：

```
(?:</$tagname>|/>) 
```

# asp.net - 如何通过使用ajax延迟asp.net中的控件来快速加载页面

> ID：10257187
> 
> 赞同：0
> 
> 时间：2012-04-21T07:37:39.543
> 
> 标签：asp.net, ajax

我在一个页面中有 5 个网格视图。当它打开时，它需要很长时间才能显示。它正在等待所有网格视图都被加载。

打开页面后，我应该立即为所有 5 个网格视图显示带有“正在加载..”文本的页眉和页脚。然后我需要一个一个地加载和显示每个网格视图。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:53:54.857

您可以在页面加载时隐藏网格视图，将它们放置在 UpdatePanel 中。当页面加载时，如果 Page.IsPostback 为真，则通过 JavaScript 调用回发，然后显示网格视图并在页面加载中加载它们的数据。

# iphone - 如何用动画切换视图 - 目标 c

> ID：10257188
> 
> 赞同：6
> 
> 时间：2012-04-21T07:37:45.367
> 
> 标签：iphone, objective-c, uiview, uianimation, uiviewanimationtransition

我有一个 viewController，它有一个 tableView 和一个 mapView，只有一个是可见的。我还有一个带有两个按钮（列表和地图）的分段控制工具栏

如何在表格视图和地图视图之间切换？重要的是工具栏将保持锁定状态而不使用视图进行动画处理。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T09:10:18.880

经过更多思考，我找到了解决方案，添加另一个视图作为表格视图和地图视图的容器视图。
这样我可以做到：

```
 [UIView transitionWithView:self.someContainerView
                     duration:1.0
                     options:UIViewAnimationOptionTransitionFlipFromLeft 
                     animations:^{
                         self.mapView.hidden   = !showingMapView;
                         self.tableView.hidden = showingMapView;
                     } completion:nil
    ]; 
```

无需翻转工具栏

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T07:42:45.683

您可以使用`UIView`动画过渡，传递过渡视图的超级视图：

```
- (IBAction)segmentIndexChanged {
   BOOL showingMapView = (BOOL)self.segmentedControl.selectedSegmentIndex;
   [UIView transitionWithView:self.view
                     duration:1.0
                      options:UIViewAnimationOptionTransitionFlipFromLeft 
                   animations:^{
     self.mapView.hidden   = !showingMapView;
     self.tableView.hidden = showingMapView;
   } completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T07:42:51.330

试试下面的代码显示表和地图视图：

在segmentedControlIndexChanged中隐藏mapview和tableview：

```
- (IBAction)segmentedControlIndexChanged {
    switch (self.segmentedControl.selectedSegmentIndex) {
        case 0: //it's show tableview
            [UIView transitionWithView: self.view
                              duration:1.0 
                               options:UIViewAnimationOptionTransitionFlipFromLeft
                            animations:^{
                                self.mapView.hidden   = YES;
                                self.tableView.hidden = NO; }
                            completion:nil];

              break;

        case 1: //it's show mapview
            [UIView transitionWithView:self.view
                              duration:1.0
                               options:UIViewAnimationOptionTransitionFlipFromLeft
                            animations:^{
                                self.mapView.hidden   = NO;
                                self.tableView.hidden = YES; }
                            completion:nil];
            break;

        default:
              break;
    }
} 
```

# apache-flex - 如何在 Flex 中将组集合作为键值对访问

> ID：10257189
> 
> 赞同：0
> 
> 时间：2012-04-21T07:38:02.960
> 
> 标签：apache-flex, collections

如何访问组集合作为键值对。我需要访问 select 或提供的 group 的组特定元素。请看下面的代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
xmlns:s="library://ns.adobe.com/flex/spark" 
xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <fx:XMLList id="defaultColumns">
        <ROW>
            <NAME>DESCRIPTION_</NAME>
            <COLUMN_CAPTION>Description</COLUMN_CAPTION>
            <COLUMN_WIDTH>40</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>@action</NAME>
            <COLUMN_CAPTION>Action</COLUMN_CAPTION>
            <COLUMN_WIDTH>20</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>@err</NAME>
            <COLUMN_CAPTION>Error</COLUMN_CAPTION>
            <COLUMN_WIDTH>5</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General</GROUP_DESCRIPTION>
            <Color>#FF0000</Color>      
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>@sql</NAME>
            <COLUMN_CAPTION>Sql</COLUMN_CAPTION>
            <COLUMN_WIDTH>1</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>DESCRIPTION_</NAME>
            <COLUMN_CAPTION>Description</COLUMN_CAPTION>
            <COLUMN_WIDTH>40</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General2</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>@action</NAME>
            <COLUMN_CAPTION>Action</COLUMN_CAPTION>
            <COLUMN_WIDTH>20</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General2</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>@err</NAME>
            <COLUMN_CAPTION>Error</COLUMN_CAPTION>
            <COLUMN_WIDTH>5</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General2</GROUP_DESCRIPTION>
            <Color>#FF0000</Color>      
            <OPTIONS/>
        </ROW>
        <ROW>
            <NAME>@sql</NAME>
            <COLUMN_CAPTION>Sql</COLUMN_CAPTION>
            <COLUMN_WIDTH>1</COLUMN_WIDTH>
            <GROUP_DESCRIPTION>0\. General2</GROUP_DESCRIPTION>
            <OPTIONS/>
        </ROW>
    </fx:XMLList>
    <mx:GroupingCollection id="colGroup" source="{defaultColumns}">
        <mx:grouping>
            <mx:Grouping>
                <mx:GroupingField name="GROUP_DESCRIPTION"  />
            </mx:Grouping>
        </mx:grouping>
    </mx:GroupingCollection>
</fx:Declarations>
<fx:Script>
   <![CDATA[
protected function groupTabs_changeHandler(event:IndexChangedEvent):void
{
        var xmlList:XMLList=XMLList(colGroup.getRoot()[groupTabs.selectedChild.label]);
                Alert.show(xmlList.toXMLString());
}
 ]]>
 </fx:Script>
  <mx:TabNavigator id="groupTabs" borderStyle="solid" width="100%" initialize="{colGroup.refresh()}" change="groupTabs_changeHandler(event)">
   <mx:Repeater dataProvider="{colGroup.getRoot()}" id="t">
     <mx:VBox  label="{t.currentItem.GroupLabel.toString()}" width="100%"></mx:VBox>
  </mx:Repeater>
  </mx:TabNavigator>    
 </s:Application> 
```

我想在任何可能的情况下访问组特定的 xmllist。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:20:18.883

请阅读[显示分组数据](http://livedocs.adobe.com/flex/3/html/help.html?content=advdatagrid_08.html)它显示了如何操作组数据还阅读[分组](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/Grouping.html)对象“分组数据的集合”

*Grouping 类定义 AdvancedDataGrid 控件的数据提供程序中用于对数据进行分组的字段*

在粘贴的代码中**，t.currentItem包含****Repeater**控制下的组特定集合

希望有帮助

# java - Eclipse - 构建功能项目

> ID：10257193
> 
> 赞同：10
> 
> 时间：2012-04-21T07:39:39.437
> 
> 标签：java, eclipse, plugins, building

所以我正在部署eclipse项目。我有一组位于“功能项目”中的插件，并且该功能项目位于“更新站点”项目中。

第一次构建一切顺利。像坚果一样甜。

当我对功能项目进行一些更改然后想要在更新站点项目中重建时，我会单击“全部构建”按钮......![构建按钮](../Images/97ca210f7bf73d400ad460472a644f47.png)

...但我收到以下错误...

![在此处输入图像描述](../Images/63901acb29ab75802ffc6299fa4dcd04.png)

我认为这是一个版本控制问题 - 我唯一的解决方法似乎是从更新站点项目中完全删除功能项目，然后重新添加没有明确版本控制编号的版本![在此处输入图像描述](../Images/91b9f49c4a77d92ac381b302563a3567.png)

...但这感觉很尴尬，我应该使用一些更有效的方法吗？

（编辑——有人问我点击“更多详细信息”时会发生什么，这是照片）

![在此处输入图像描述](../Images/54d0131df916f3b7c2fe940560194138.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:55:59.930

我希望我可以为此提供参考，但我发现关于更新站点项目如何工作的文档非常缺乏。希望这个解释有所帮助。

这里应该发生的是，在第一次构建时，您对功能的引用从被`featureProject (1.0.0.qualifier)`称为`featureProject (1.0.0.201204171009)`. 您可以在 site.xml 中看到此更改，并且应在 updateSite\features 和 updateSite\plugins 目录中构建相应的 jar 文件，更新后的 site.xml 会引用该功能 jar。

第二次构建时，它应该构建一个新功能和插件 jar，将限定符替换为当前时间戳。

但是，在您的情况下，两者之间发生了一些不好的事情。一个症状显然是该错误，但另一个症状是您快照的“选择功能”对话框。请注意，链接`featureProject (1.0.0.201204172009)`看起来与 eclipse 实例中所有已安装的功能相同，而不是您拥有源的功能：`featureProject (1.0.0.201204172009)`

您是否可能在中间步骤中使用您构建的更新站点将插件安装到此 Eclipse 实例中？如果是这样，我怀疑这会混淆构建过程，特别是如果您还从 updateSite\features 目录中删除了功能 jar。

# javascript - 从 ISODate 转到格式良好的字符串

> ID：10257198
> 
> 赞同：0
> 
> 时间：2012-04-21T07:40:28.313
> 
> 标签：javascript, date, type-conversion, isodate

在我的应用程序中，日期以 ISODate 格式存储：

> ISODate("2012-04-21T07: 32: 16.285Z")

有这样的字符串最简单的方法是什么：

> 21/04/2012, 07:32:16

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:00:22.423

我喜欢这个脚本[http://jacwright.com/projects/javascript/date_format](http://jacwright.com/projects/javascript/date_format)

```
var d = new Date('2012-04-21T07: 32: 16.285Z'.split(' ').join('')), date;
date = d.format('d/m/Y h:i:s');
console.log(date); 
```

**UPD：** 对于 IE < 9，您应该规范化日期 - [http://delete.me.uk/2005/03/iso8601.html](http://delete.me.uk/2005/03/iso8601.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T08:00:42.683

如果您不需要零填充，您可以这样做：

```
var d = new Date("2012-04-21T07:32:16.285Z");

var formattedDate = d.getUTCDate() + '/' 
    + (d.getUTCMonth() + 1) + '/' 
    + d.getUTCFullYear() + ', ' 
    + d.getUTCHours() + ':' 
    + d.getUTCMinutes() + ':' 
    + d.getUTCSeconds();

// formattedDate is "21/4/2012, 7:32:16" 
```

否则你可以做类似的事情

```
// zero-pad a two digit integer
function zp(n) {
  return (n > 9 ? '' : '0') + n;
}

var d = new Date("2012-04-21T07:32:16.285Z");

var formattedDate = zp(d.getUTCDate()) + '/' 
    + zp(d.getUTCMonth() + 1) + '/' 
    + d.getUTCFullYear() + ', ' 
    + zp(d.getUTCHours()) + ':' 
    + zp(d.getUTCMinutes()) + ':' 
    + zp(d.getUTCSeconds());

// formattedDate is "21/04/2012, 07:32:16" 
```

# java - 尽管 Java 版本相同，但 UnsupportedClassVersionError

> ID：10257200
> 
> 赞同：2
> 
> 时间：2012-04-21T07:40:58.507
> 
> 标签：java, swing, class, unsupported-class-version

我在我的目标计算机中收到此错误，尽管：

1.  我的源计算机和目标计算机都安装了相同版本的 Java - 1.6 第 26 次更新
2.  我以类似方式编译和运行的所有文件都可以完美运行，除了这个 - 它是我的应用程序的 Swing GUI
3.  另外我没有使用任何 IDE，我使用普通记事本进行编辑

为什么`UnsupportedClassVersionError`尽管有这三个限制，以及它的解决方案？

注意：该文件是一个简单的 GUI 前端代码，可以在源代码上完美运行，它使用来自 AWT 和 SWING 的简单库

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Bad version number in .class file
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$100(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:44:32.667

不幸的是，事实上，你的主类是用比你运行它的新版本的 Java 编译器编译的。那个或你的类文件以某种其他方式被严重损坏了。检查您`java`的. 您可能还想尝试传递给 javac；如果您正在运行（例如）javac 1.7，这将指示它生成与 Java 1.6 兼容的代码。`javac``PATH``-target 1.6`

请记住，您可以安装不同版本的 JRE 和 JDK - 根据您的 PATH 顺序，您的系统可能会`javac`为`java`.

此外，如果您的类路径中有任何第三方库，您应该确保它们也没有使用较新版本的 Java 编译。如果您的其他类没有使用可能掩盖问题的第三方库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:45:22.337

当您尝试运行在不同版本的 JDK 中编译的类以在不同版本的 JRE 上执行时，就会发生这种情况，

请检查您的 jdk 和 JRE 版本是否相同或兼容。您可以使用 java -version 检查版本

# matlab - MATLAB有什么问题？

> ID：10257203
> 
> 赞同：-5
> 
> 时间：2012-04-21T07:42:13.473
> 
> 标签：matlab

我正在使用 MATLAB R2010b，但我不明白 matlab 有什么问题...

```
>> SSS = simpleseries_dataset;

>> [X,T] = SSS;

>> ???Too many output arguments. 
```

但下一个代码很好：

```
>> [X,T] = simpleseries_dataset; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T08:13:26.387

`simpleseries_dataset`是一个函数；函数可以有多个输出——如果你输入`edit simpleseries_dataset`，你可以看到函数定义：

```
function [inputs,targets] = simpleseries_dataset 
```

当你运行你的第一行代码时，你有一个输出变量——所以`inputs`被存储`SSS`并被`targets`丢弃；将多输出函数的输出分配给单个变量等效于执行以下操作：

```
[SSS, ~] = simpleseries_dataset; 
```

因此，如果您想保留 的两个输出值`simpleseries_dataset`，则必须使用两个输出调用该函数。

# db2 - 中止 ASRA。如何处理这个

> ID：10257205
> 
> 赞同：1
> 
> 时间：2012-04-21T07:42:24.540
> 
> 标签：db2, call, cobol, cics

我有一个地图，它有两个数据类型为 X(6),9(8) 的输入字段，我将这两个值存储在我的 cobol-cics 程序的以下变量中。

```
01 SCREEN-DATA.        
05 ACTNUM PIC X(6). 
05 AMOUNT PIC 9(8). 
```

现在我将这两个值传递给 cobol-db2 程序：

```
CALL UPDATEPROG USING ACTNUM,AMOUNT. 
```

在我的更新程序中：

```
LINKAGE SECTION.                                                 
01 DEPOSITPARAMS.                                                
05 ACTNUM PIC X(6).                                           
05 AMOUNT PIC 9(8).                                           
PROCEDURE DIVISION USING DEPOSITPARAMS.                          
MOVE ACTNUM TO ACCOUNT-NUMBER. 
```

其中 ACCOUNT-NUMBER 是我创建的表的主变量。运行程序很好，但是在我的地图中，当我输入详细信息并按下回车键时，我得到了异常终止。当我给出一些静态值时，例如：将 071250 移至帐户号。它工作正常，我能够更新，使用查询从表中检索值。这可能是什么原因导致异常结束。请帮我解决这个问题

这些是我在 DCLGEN 中创建的主变量

```
01  DCLACCOUNT-MASTER.                            
10 ACCOUNT-NUMBER       PIC X(6).                   
10 ACCOUNT-HOLDER       PIC X(20).                  
10 ACCOUNT-BALANCE      PIC S9(8)V9(2) USAGE COMP-3.
10 LAST-UPDT-DATE       PIC X(10).                  
10 OPENNING-DATE        PIC X(10). 
```

我所做的另一个观察是，无论我在哪里使用 ACTNUM 变量，即链接部分变量。我正在异常结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:47:57.587

我猜你的意思是异常终止代码的[ASRA](https://www.ibm.com/docs/en/cics-ts/5.6?topic=codes-asra)。

查看核心转储，如果您使用[TEST](https://www.ibm.com/docs/en/cobol-zos/6.3?topic=options-test)选项编译，您应该有一个格式化转储，显示您的工作存储、本地存储和链接部分变量及其值。我怀疑您的 AMOUNT 字段中有非数字值。

在 CICS 中，核心转储写入 CESE 瞬态数据队列，通常由 CICS 系统程序员映射到 CICS 区域的 CEEMSG DD。在 CEE3845 上进行查找以查找核心转储的顶部，这是语言环境消息的消息 ID，其中包含对出现问题并导致异常结束的详细描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T03:50:17.260

验证您阅读地图的区域的 COBOL 定义是否与地图返回的区域实际匹配。我建议运行 CEDF 并仔细查看 READ MAP 在调用返回时填充的区域。我怀疑你会发现不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T16:58:29.040

在您的代码中，添加以下内容：

链接部分。
01 存款参数。
**05 LINKAGE-REF S9(4) COMP-3。**

05 ACTNUM PIC X(6)。
05 数量 PIC 9(8)。

# java - 有没有办法从操作系统访问（读/写）特定应用程序的 sqlite 数据库？

> ID：10257211
> 
> 赞同：0
> 
> 时间：2012-04-21T07:43:30.257
> 
> 标签：java, android, sqlite

我正在稍微修改 android 操作系统并希望访问特定应用程序的 sqlite 数据库。

我知道该位置存储在`/data/data/your.applications.package/databases`，但是，有没有办法从实际应用程序的上下文之外将数据库加载到 sqliteDatabase 连接器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:53:31.663

> 但是，有没有办法从实际应用程序的上下文之外将数据库加载到 sqliteDatabase 连接器中？

是的，如果尝试打开数据库的代码对数据库文件具有读写权限。在这种情况下，只需使用`open()`on `SQLiteDatabase`。

因此，出于明显的安全原因，以 root 身份运行的应用程序可以执行此操作，但普通的其他应用程序不能。

> 即使我试图从内核访问？

由于内核不运行 Dalvik，您将无法以我上面描述的方式打开数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T07:58:46.947

我不认为这是可能的。它是 Android 安全模型的基础。[http://developer.android.com/intl/de/guide/topics/security/security.html](http://developer.android.com/intl/de/guide/topics/security/security.html)

另一个数据库必须在其上实现已发布的 ContentProvider，您才能访问其数据。那么你可以试试这个[http://androidforums.com/application-development/65082-accessing-database-another-application-using-content-provider.html](http://androidforums.com/application-development/65082-accessing-database-another-application-using-content-provider.html)

# sql - vb中sql更新语句的语法错误

> ID：10257213
> 
> 赞同：1
> 
> 时间：2012-04-21T07:43:41.170
> 
> 标签：sql, vb.net, ms-access

我有这个 sql 语句从 vb 更新访问 db 中的列，但是当我运行程序时，它显示语句中存在语法错误。编码：

```
cmd.Connection = cnn
cmd.CommandText = 
    "UPDATE users SET password='" & 
    Me.pd.Text.Trim & "' WHERE password='" & Me.pd.Tag.ToString & "'"
cmd.ExecuteNonQuery()` 
```

该错误表明更新语句中存在语法错误。我试图找到错误但徒劳无功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:53:25.767

首先，您应该通过不同的字段（例如用户 ID、姓名、电子邮件）而不是当前密码来进行更新。

尝试使用命名参数而不是字符串连接，以避免由于包含值`'`和 SQL 注入而导致的错误。

您还可以使用`[name]`转义表或字段的名称（假设您使用的是 SQL Server）。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx#Y684](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx#Y684)

```
cmd.CommandText = "UPDATE [users] SET [password]=@current_password WHERE [password]=@new_password"
cmd.Parameters.AddWithValue("@current_password", Me.pd.Text.Trim)
cmd.Parameters.AddWithValue("@new_password", Me.pd.Tag.ToString)
cmd.ExecuteNonQuery() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T16:35:52.193

您的问题提出了许多其他重要问题，反映在您收到的评论中。我不想忽略任何这些问题。但是，我确实想提请您注意这`password`是一个保留字这一事实。请参阅[Access 中的问题名称和保留字](http://allenbrowne.com/AppIssueBadWord.html#P)。

如果您按照 mazzucci 的建议将表名和字段名括起来，您的语法错误可能会消失。但是，您实际上不需要将表名括起来，因为`users`它不是保留字。

# php - 在 PHP/MySQL 连接中出现 T_CONSTANT_ENCAPSED_STRING 错误

> ID：10257225
> 
> 赞同：0
> 
> 时间：2012-04-21T07:45:34.670
> 
> 标签：php, mysql

我正在构建一个可以简化与 MySQL 连接的类，但我收到了 T_CONSTANT_ENCAPSED_STRING 错误。我相信它与字符串有关，但我没有发现任何问题。

代码如下：

```
<?php
class mysql
{
    private $host;
    private $user;
    private $pass;
    private $connection;
    private $database;
    private $result;

    public function __construct()
    {
        $this -> $host = 'localhost';
        $this -> $user = 'root';
        $this -> $pass = '';
    }

    public function connect($_host, $_user, $_pass)
    {
        if (isset('$_host')) $this -> $host = $_host;
        if (isset('$_user')) $this -> $user = $_user;
        if (isset('$_pass')) $this -> $pass = $_pass;
        $this -> disconnect();
        $this -> $connection = mysql_connect($this -> $server, $this -> $user, $this -> $pass);
        if (! $this -> $connection) return mysql_error();
        else return true;
    }

    public function isconnected()
    {
        if(is_resource($this -> $connection) && get_resource_type($this -> $connection) === 'mysql link') return true;
        else return false;
    }

    public function disconnect()
    {
        if ($this -> isconnected()) mysql_close($this -> $connection);
    }

    private function setdb($_dbname)
    {
        $this -> $database = $_dbname;
        if (! mysql_select_db($this -> $database, $this -> $connection)) return mysql_error();
        else return true;
    }

    public function runquery($_query)
    {
        if(! isset($database)) return mysql_error();
        else return mysql_query($_query,$this -> $connection);
    }

    public function __destruct()
    {
        $this -> disconnect();
        unset($this -> $host);
        unset($this -> $user);
        unset($this -> $pass);
        unset($this -> $connection);            
        unset($this -> $database);
        unset($this -> $result);
    }
}

$phpmyadmin = new mysql();
echo $phpmyadmin.connect('localhost','root','');
echo $phpmyadmin.setdb('DBTEST');
$result = $phpmyadmin.runquery("SELECT * FROM TABTEST");
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    echo $row['PERSON_NAME'];
}
?> 
```

我得到的错误是：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in C:\xampp\htdocs\test\mysql\mysql.php on line 20 
```

第 20 行很明显：

```
if (isset('$_host')) $this -> $host = $_host; 
```

有什么问题？

编辑：谢谢。我更正了语法错误，但它似乎给了我一个新错误：致命错误：无法访问第 13 行 C:\xampp\htdocs\test\mysql\mysql.php 中的空属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T07:48:31.090

`isset`（以及`empty`）是语言结构而不是函数，它们有一个独特的属性——为了提高速度，解释器只允许它们用于变量（或变量数组的键）。因此，您不能在任何不是变量的东西上使用`isset`或。`empty`这实际上是一个语法错误。

```
... isset($host) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T08:00:16.677

解决您的第二个问题：

您应该删除`$`之后的`->`，如下所示：

```
$this->$host 
```

应该：

```
$this->host 
```

# java - 为什么活动管理器显示启动意图消息？

> ID：10257239
> 
> 赞同：6
> 
> 时间：2012-04-21T07:47:49.093
> 
> 标签：java, android

在运行我的应用程序活动管理器之间只显示消息**I/ActivityManager(159): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10100000 cmp=com.rfb .client/.RFB_ClientActivity bnds=[182,205][238,271] } 来自 pid 159**，它继续显示此消息。

知道为什么此信息会显示在日志中吗？这条消息的含义是什么？如果您知道这一点，请告知。

日志文件：

```
04-20 23:57:02.339 D/RFB_MAIN(18199): RFB Activity started
04-20 23:57:02.339 I/ActivityManager(159): Starting: Intent { cmp=com.rfb.client/.RFB_Activity (has extras) } from pid 18199
04-20 23:57:02.359 W/ActivityManager(159): Trying to launch com.rfb.client/.RFB_Activity
04-20 23:57:02.429 D/RFB_Activity(18199): Opening RFB socket
04-20 23:57:02.719 D/RFB_Async(18199): Initiating
04-20 23:57:02.719 D/RFB_PROTOCOL(18199): Initializing SSL connection
04-20 23:57:02.719 D/RFB_PROTOCOL(18199): TrustStore - Initializing
04-20 23:57:02.729 I/ActivityManager(159): Displayed com.rfb.client/.RFB_Activity: +369ms
04-20 23:57:04.309 D/RFB_PROTOCOL(18199): TrustStore - Initialized
04-20 23:57:04.309 D/RFB_PROTOCOL(18199): KeyStore - Initializing
04-20 23:57:04.619 D/RFB_PROTOCOL(18199): KeyStore - Initialized
04-20 23:57:05.169 D/RFB_PROTOCOL(18199): Creating RFB socket
04-20 23:57:05.909 D/RFB_PROTOCOL(18199): RFB Socket created
04-20 23:57:20.749 I/ActivityManager(159): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10100000 cmp=com.rfb.client/.RFB_ClientActivity bnds=[182,205][238,271] } from pid 159
04-20 23:57:43.729 I/ActivityManager(159): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10100000 cmp=com.rfb.client/.RFB_ClientActivity bnds=[182,205][238,271] } from pid 159
04-20 23:58:35.289 I/ActivityManager(159): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10100000 cmp=com.rfb.client/.RFB_ClientActivity bnds=[182,205][238,271] } from pid 159 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T10:51:36.327

> 知道为什么此信息会显示在日志中吗？

因为负责的安卓工程师`ActivityManager`选择了登录。坦率地说，我希望这位工程师没有这样做。

> 这条消息的含义是什么？

这意味着 Android 正在使用`Intent`日志消息中的描述启动一个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:04:04.573

意图过滤器中的 action=main 和 category=launcher 的组合是进入 android 应用程序的关键，并将在 android manifest 文件中公布。当android系统尝试启动应用程序时，由于活动中存在主意图过滤器，活动管理器获得控制并捕获意图以在主线程/UI线程中启动主进程。

# python - 在 Windows 操作系统中在 python 中运行 Google 应用程序时出错

> ID：10257243
> 
> 赞同：1
> 
> 时间：2012-04-21T07:48:08.513
> 
> 标签：python, google-app-engine

**在谷歌应用引擎中**

运行应用程序时出错

**在 googleappengine 的日志中**

2012-04-21 13:24:04 运行命令：“['C:\Python32\pythonw.exe', 'C:\Program Files\Google\google_appengine\dev_appserver.py', '--admin_console_server=', ' --port=8080', 'C:\udacity\googleapps\hello-udacity']" Traceback（最近一次调用最后）：文件“C:\Program Files\Google\google_appengine\dev_appserver.py”，第 125 行，在run_file( **file** , globals()) File "C:\Program Files\Google\google_appengine\dev_appserver.py", line 121, in run_file execfile(script_path, globals_) NameError: global name 'execfile' is not defined 2012-04- 21 13:24:07（进程以代码 1 退出）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T10:03:43.060

您似乎正在运行 Python 3.2（您的 Python 可执行文件位于此路径“C:\Python32\pythonw.exe”上）。

Google AppEngine 在此阶段需要 Python 2.5 或 2.7，请参阅[这篇文章](https://developers.google.com/appengine/docs/whatisgoogleappengine)。您需要下载 Python 2.7，将其安装在并行目录中，并使其成为默认可执行文件。

您可能会发现阅读此答案对[运行多个版本的 Python很有帮助](https://stackoverflow.com/a/6737777/1290420)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T02:18:03.980

另外，我也有同样的问题。这是因为我同时安装了 Python 2.7 和 Python 3.x（框架的最新版本 Django 使用后者）。我后来安装了 Python 3.x，所以这是我系统默认使用的版本。要使用 Python 2.7，您可以执行以下操作：

> C:\Python27\python.exe dev_appserver.py path-to-your-app

注意这里

> C:\Python27\python.exe

是**python 2.7**可执行文件的路径（在我的情况下，但这可能会有所不同）。

我这样做了，它奏效了。

更多信息和阅读[在这里](https://code.google.com/p/googleappengine/issues/detail?id=1013)。

# php - PHP preg_match_all，读取内容并排除不需要的

> ID：10257244
> 
> 赞同：0
> 
> 时间：2012-04-21T07:48:18.313
> 
> 标签：php

我有一个要阅读的文本文件，但排除开头包含某些字符的行（因此是“@”，或以后定义的任何字符）：

```
@ I don't want this line to be read
This line should be read;
"This one" should be read, too;
'Also this one' should be read;
...etc
@ But this one should be ignored; 
```

使用下面的代码，我可以分解那些以分号（“;”）结尾的代码，但最后一行不应该，因为它以“@”开头。

```
$contents = file_get_contents($the_path);
$result = array_map('trim', explode(";", $contents)); 
```

有什么提示可以实现吗？谢谢

**更新代码：**

```
// http://stackoverflow.com/questions/10257244/php-preg-match-all-read-content-and-exclude-unwanted/10257319
  $results = array();
  $matches = array();
  $the_path = '/path/to/file.txt';
  if (is_file($the_path)) {
    $contents = file_get_contents($the_path);
    if ($contents) {
      // ! array warning
      // $contents = array_map('rtrim', $contents);
      // $matches = preg_grep('#^@#', $contents, PREG_GREP_INVERT);
      $matches = preg_split("/[\r\n]/", preg_replace("/@.*?[\r\n]/", "", $contents), NULL, PREG_SPLIT_NO_EMPTY);

      if ($matches) {
        foreach ($matches as $key => $val) {
          $results[$key] = $val;
        }
      }
    }
  }
  // Attempt to remove the first 0 key, and start from 1, because 0|value0 is considered NULL
  $results = array_combine(range(1, count($results)), array_values($results));

  return !empty($results) ? $results : array(); 
```

**更新 2，通过 DCoder 正常工作：**

```
 $matches = array();
  if ($contents = file($the_path)) {
      $contents = array_map('rtrim', $contents);
      $keyword = '@';
      // Still output @line
      // $matches = preg_grep('#^@#', $contents, PREG_GREP_INVERT); 
      // Ok, thanks to http://php.net/manual/de/function.preg-grep.php#85503
      $matches = preg_grep("/{$keyword}/i", $contents, PREG_GREP_INVERT);         

      // $matches = preg_split("/[\r\n]/", preg_replace("/@.*?[\r\n]/", "", $contents), NULL, PREG_SPLIT_NO_EMPTY);
      // dsm($matches);
      if ($matches) {
        foreach ($matches as $key => $match) {
         $results[$key] = $match;
        }
      }
  }

  // $results = array_combine(range(1, count($results)), array_values($results));
  return $results; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:59:59.223

```
// get the contents of the file as an array of lines
$contents = file($the_path);
if($contents === false) {
    throw new Exception("Failed to open file {$the_path}");
}
// drop ending newlines
$contents = array_map('rtrim', $contents);

// find all lines except those starting with @
$matched = preg_grep('#^@#', $contents, PREG_GREP_INVERT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T08:02:30.513

使用此代码， $lines 将包含一个数组，其中包含所有不以开头的行`@`

```
$contents = file_get_contents($the_path);
$lines = preg_split("/[\r\n]/", preg_replace("/@.*?[\r\n]/", "", $contents), null, PREG_SPLIT_NO_EMPTY); 
```

# c# - Linq2Sql 奇怪的行为

> ID：10257245
> 
> 赞同：2
> 
> 时间：2012-04-21T07:48:20.463
> 
> 标签：c#, linq-to-sql

在我的数据库中，我有 13 个订单。

下面的代码返回所有这些，如果`OrderID = 0`and `CustomerName = "lorem"`。

如果我评论该行`(OrderID == 0) ?....`，它可以正常工作。怎么了 ？

```
var result = (from x in db.Order
              where
                  (OrderID == 0) ? x.OrderID > 0 : x.OrderID == OrderID
                  &&
                  (string.IsNullOrEmpty(CustomerName)) ? 
                                            !string.IsNullOrEmpty(CustomerName)
                                            :
                                            x.User.Name.Contains(CustomerName)
              select x)
              .ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T07:54:13.410

我认为您不能以这种方式在 LINQ 查询中定义条件条件，您*可以*做的是，例如：

```
var result = (from x in db.Order where
              ((OrderID == 0 && x.OrderID > 0) ||  
                (OrderID != 0 && x.OrderID == OrderID))
                  &&
                  (string.IsNullOrEmpty(CustomerName)) ? 
                                            !string.IsNullOrEmpty(CustomerName)
                                            :
                                            x.User.Name.Contains(CustomerName).... 
```

# entity-framework-4.1 - 带有 ninject、Dispose 问题的实体和存储库模式

> ID：10257257
> 
> 赞同：2
> 
> 时间：2012-04-21T07:50:57.607
> 
> 标签：entity-framework-4.1, ninject, repository-pattern, dispose, connection

我已经使用带有 ninject 注入的实体和存储库模式构建了我的站点。我的问题是我的连接似乎没有得到处理。我有大约 30 个存储库（每个表一个），并且我很快就获得了 sql expire timout preety。我不能使用常规的 using 语句，因为代码只识别注入前的接口。（在每个控制器中，我都有通过 ninject 注入的存储库接口实例）。

我已经搜索了网络，但找不到对我来说准确的解决方案。谁能帮帮我吗？代码示例：

这是在 addBindings() 下的 ninject 控制器中：

```
 ninjectKernel.Bind<IMovieRepository>().To<MovieRepository>().InRequestScope(); 
```

和我的一个存储库：

```
 public class MovieRepository : IMovieRepository, IDisposable 
        {
         private Entities dataContext = new Entities();
         public System.Data.Entity.DbContext DbContext 
         {
            get { return dataContext ?? (dataContext = new Entities()); } 
         }
         public void Dispose() { dataContext.Dispose(); }
        } 
```

在 Global.asax 文件中：

```
 ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory() as IControllerFactory); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:01:57.730

如果长寿命的对象依赖于短寿命的对象，通常会出现这种问题。例如，单例服务在请求范围内使用存储库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T08:49:24.117

我猜你的存储库（因此可能是你的 DbContexts）被绑定在瞬态范围内，我相信这意味着每次 Ninject 需要在某个地方注入一个时都会创建一个新的。我不确定，但我猜测这些都会在您的应用程序的生命周期内一直存在，并且可能不会被处理掉。

尝试在请求范围内绑定您的存储库，以便根据 Web 请求创建和处理它们。

例如

```
Bind<IFooRepository>().To<ConcreteFooRepository>().InRequestScope(); 
```

从[忍者维基](https://github.com/ninject/ninject/wiki/Object-Scopes)：

> Ninject 中有四个内置作用域：
> 
> *   瞬态 - 每次请求时都会创建该类型的新实例。（这是默认范围）。绑定方法是 .InTransientScope()
> *   Singleton - 只会创建该类型的单个实例，并且将为每个后续请求返回相同的实例。绑定方法是 .InSingletonScope()
> *   线程 - 每个线程将创建该类型的一个实例。绑定方法是 .InThreadScope()
> *   请求 - 每个 Web 请求将创建该类型的一个实例，并在请求结束时销毁。绑定方法是 .InRequestScope()

# ruby-on-rails - Rails 文档

> ID：10257258
> 
> 赞同：1
> 
> 时间：2012-04-21T07:51:19.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

几天前我才开始学习**RubyOnRail**。[我需要一些像CakePHP](http://book.cakephp.org/2.0/en/index.html)这样的ruby​​rails/rails 文档/api ，并提供完整而详细的解释，让我轻松学习。请帮我解决这个问题。

如果我犯了一些错误，再次道歉......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:59:34.110

如果您需要详细的 API 文档，请访问[http://api.rubyonrails.org/](http://api.rubyonrails.org/)

如果您需要一些帮助才能开始，请查看[http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T07:57:11.943

基本上，您已经拥有了从[这里](http://rubyonrails.org/documentation)开始所需的一切..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T07:57:54.720

试试这个[http://ruby.railstutorial.org](http://ruby.railstutorial.org)，对于初学者来说这是一个很好的分步教程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T08:13:43.893

如果你需要一些教程：

1.  首先：[Michael Hartl 的 Ruby on Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)
2.  然后阅读：**Ruby 入门：从新手到专业人士**
3.  然后您可以在书中找到一些详细信息：**Rails 3 Way, 2nd Edition**
4.  您还可以在此站点上发现更多有趣的内容：[Rails casts](http://railscasts.com)

# c# - 从函数返回事件

> ID：10257259
> 
> 赞同：6
> 
> 时间：2012-04-21T07:52:05.307
> 
> 标签：c#, events

从函数返回事件的语法是什么？（不调用事件，返回它以便它可以绑定到函数）。

我有一个容器类，其中包含一个字典，其中每个成员都有一个事件。

目的是能够写出这样的东西：

```
Container c = new Container();
c.CreateEventForKey("a");             // Create the member in the dictionary
c.EventForKey("a") += some_function;  // Bind some_function to the event in the "a" member
c.OnEventForKey("a","b");             // Calls some_function with argument "b" 
```

Container 类如下所示：

```
public class Container {

  public class Member {
     public event Action<string> AnEvent;
     public void OnEvent( string v ) { if(AnEvent!=null) { AnEvent(v); } }
  }

  protected Dictionary<string,Member> members;

  // This seems to work OK.
  public void OnEventForKey(string k, string v) {
    if ( members.ContainsKey(k) ) { members[k].OnEvent(v); }
    else { /* report error */ }
  }

  // Can't get this to compile.
  public event Action<string> EventForKey(string k ) {
    if ( members.ContainsKey(k) ) { return members[k].AnEvent; }
    else { /* report error */ }
  }
} 
```

我该如何定义才能`EventForKey`达到我的预期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T07:57:14.060

> 从函数返回事件的语法是什么？

你不能，很容易。事件——比如属性——并不是真正的第一类“对象”；他们是一个班级的成员。您在这里并没有真正*的*班级成员-您只是试图将代表保存在字典中。

您*可以*创建自己的“类似事件”的容器，但考虑替代设计可能会更好，例如

```
c.Subscribe("a", SomeFunction);
c.OnEventForKey("a"); 
```

您可能想寻找[`EventHandlerList`](http://msdn.microsoft.com/en-us/library/system.componentmodel.eventhandlerlist.aspx)灵感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T08:55:42.267

为什么不简单地返回成员并订阅它的事件？

```
public IMember MemberForKey(string key) // return IMember
{
    if (!members.ContainsKey(key))
        throw new Exception();

    return members[key];
} 
```

然后订阅：

```
Container c = new Container();
c.CreateEventForKey("a");            
c.MemberForKey("a").AnEvent += some_function;
c.OnEventForKey("a", "b"); 
```

但是你在课堂上有公共`OnEvent`方法。`Member`为了禁止客户端引发事件，您可以创建仅显示事件的界面。只需按`Member`类实现此接口：

```
public interface IMember
{
    event Action<string> AnEvent;
} 
```

是的，您不能返回事件，因为实际上事件不是对象，它由两个方法`add`和`remove`组成，它们向委托类型的内部字段添加和删除委托。以下是您的活动的样子：

```
 private Action<string> _action; // field of delegate type

  public event Action<string> AnEvent
  { 
      add { _action += value; }
      remove { _action -= value; }
  } 
```

事件的目的是只为客户端提供两种操作 - 添加和删除处理程序。委托本身对客户是隐藏的。您可以将其公开：

```
public Action<string> _action; 
```

但在这种情况下，任何客户端都可以调用它。

更新：如果您想使用订阅/删除语法，那么只需使用带有处理程序的字典：

```
public class Container
{
    private Dictionary<string, Action<string>> handlers = 
            new Dictionary<string, Action<string>>();

    public void CreateEventForKey(string key)
    {
        // with empty handler added you can avoid null check
        handlers.Add(key, (value) => { });
    }

    public void OnEventForKey(string key, string value)
    {
        if (!handlers.ContainsKey(key))
            throw new Exception();

        handlers[key](value);
    }

    public void Subscribe(string key, Action<string> handler)
    {
        if (!handlers.ContainsKey(key))
            throw new Exception();

        handlers[key] += handler;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T08:59:21.670

这是完整的工作示例：

```
class Program
{
    static void Main(string[] args)
    {
        Container c = new Container();
        c.CreateEventForKey("a");             // Create the member in the dictionary
        c.EventForKey("a").Add(str => Console.WriteLine(str));
        c.EventForKey("a").Add(str => Console.WriteLine(str.ToUpper()));
        c.OnEventForKey("a", "baa baa black sheep");

        Console.ReadLine();
        }
    }

    public class Container
    {

        public class Member
        {
        public List<Action<string>> AnEvent = new List<Action<string>>();
        public void OnEvent(string v)
        {
            if (AnEvent != null)
            {
                this.AnEvent.ForEach(action => action(v));
            }
        }

        public void AddEvent(Action<string> action)
        {
            this.AnEvent.Add(action);
        }
    }

    protected Dictionary<string, Member> members = new Dictionary<string,Member>();

    public void CreateEventForKey(string key)
    {
        this.members[key] = new Member();
    }

    // This seems to work OK.
    public void OnEventForKey(string k, string v)
    {
        if (members.ContainsKey(k)) { members[k].OnEvent(v); }
        else { /* report error */ }
    }

    public List<Action<string>> EventForKey(string k)
    {
        if (members.ContainsKey(k)) { return members[k].AnEvent; }
        else { throw new KeyNotFoundException(); }
    }
} 
```

不同之处在于使用委托列表的行为类似于事件。

# javascript - asp.net 使用 Javascript 禁用/启用验证器

> ID：10257260
> 
> 赞同：13
> 
> 时间：2012-04-21T07:52:14.560
> 
> 标签：javascript, asp.net, validation

我有一个复杂的表单，要求我根据用户的选择打开或关闭特定的验证器。

ValidatorEnable 似乎可以完成这项工作，但似乎当我调用此方法时，它实际上也会触发验证过程，而用户实际上并没有点击提交按钮。

它是这样工作的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-29T07:55:35.840

我最终发现最好的方法是使用以下代码：

```
var validatorObject = document.getElementById('<%=ValidHasShippingLocationZip.ClientID%>');
validatorObject.enabled = false;
validatorObject.isvalid = true;
ValidatorUpdateDisplay(validatorObject); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T22:12:18.170

我写了一些代码似乎可以满足您的要求。迭代验证器并启用您需要的这些。

```
 ValidatorEnable(validatorObj, true); 
```

然后清屏，删除错误信息。

完整的代码片段可以在这里找到[http://codelife.cybtamin.com/enable-and-disable-asp-net-validator-by-javascript/](http://codelife.cybtamin.com/enable-and-disable-asp-net-validator-by-javascript/)

# mongodb - 如何在 mongodb geoNear 命令中添加 LIKE 参数

> ID：10257262
> 
> 赞同：0
> 
> 时间：2012-04-21T07:52:31.163
> 
> 标签：mongodb, mongodb-php

我正在寻找

db.runCommand({ geoNear: "users", near:[56,11], maxDistance:100/6387, distanceMultiplier:6387, query: { "city": /^bos/} })

所以在这里我试图获得以 bos 开头的距离（优先级）和城市名称的结果

因为我们在 mysql 中进行 LIKE 查询调用，所以我无法获得结果。

请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:35:30.083

将“查询”参数添加到命令中应该会为您提供您正在寻找的结果。

您的查询可能不起作用的一个可能原因是正则表达式区分大小写，除非使用“i”标志指定为不区分大小写。

例如：

```
> db.places.save({_id:1, city:"CityA", loc:[56.01,11.01]})
> db.places.save({_id:2, city:"CityB", loc:[56.02,11.02]})
> db.places.ensureIndex({loc:"2d"})
> db.runCommand({ geoNear: "places", near:[56,11], maxDistance:1, distanceMultiplier:1, query: { "city": /^city/} })
{
    "ns" : "test.places",
    "near" : "1100100000111111111100110000110000111111111100110000",
    "results" : [ ],
    "stats" : {
        "time" : 0,
        "btreelocs" : 0,
        "nscanned" : 2,
        "objectsLoaded" : 2,
        "avgDistance" : NaN,
        "maxDistance" : 0
    },
    "ok" : 1
} 
```

什么都没有返回。现在命令重新运行，在查询的正则表达式部分使用不区分大小写的标志：

```
> db.runCommand({ geoNear: "places", near:[56,11], maxDistance:1, distanceMultiplier:1, query: { "city": /^city/i} })
{
    "ns" : "test.places",
    "near" : "1100100000111111111100110000110000111111111100110000",
    "results" : [
        {
            "dis" : 0.014142135623729393,
            "obj" : {
                "_id" : 1,
                "city" : "CityA",
                "loc" : [
                    56.01,
                    11.01
                ]
            }
        },
        {
            "dis" : 0.02828427124746381,
            "obj" : {
                "_id" : 2,
                "city" : "CityB",
                "loc" : [
                    56.02,
                    11.02
                ]
            }
        }
    ],
    "stats" : {
        "time" : 0,
        "btreelocs" : 0,
        "nscanned" : 2,
        "objectsLoaded" : 2,
        "avgDistance" : 0.0212132034355966,
        "maxDistance" : 0.028292673810819097
    },
    "ok" : 1
}
> 
```

两个位置都返回。可以在“高级查询”页面的“正则表达式”部分找到有关在 Mongo 查询中使用正则表达式的文档： [http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)

希望以上内容可以解决您的问题并允许您执行正确的查询。

# r - 如何更改工具提示框的位置？

> ID：10257264
> 
> 赞同：1
> 
> 时间：2012-04-21T07:53:00.033
> 
> 标签：r, svg, tooltip

在 RSVGTipsDevice 中，工具提示框的默认位置会遮挡图像（或绘图）的其他区域。有没有办法将工具提示框放在图的底部/顶部，这样它就不会阻塞其他数据点？

默认工具提示布局的屏幕截图：

[https://docs.google.com/open?id=0B3tgXHsXj9tBeEFLUg3X3J3eW8](https://docs.google.com/open?id=0B3tgXHsXj9tBeEFXLUg3X3J3eW8)

（短）用于产生上述情节的代码：

```
sapply(k, function(k) {
  setSVGShapeToolTip(desc1 = k, desc2 = centroid_list[k, 1])
  points(scores[k,1], scores[k,2], pch = pch_list[i], 
         cex = 2, col = color_set[y])
 }) 
```

# python - 使用 Django 获取具有尽可能接近日期的不同条目的查询集

> ID：10257271
> 
> 赞同：2
> 
> 时间：2012-04-21T07:54:08.507
> 
> 标签：python, django, django-models

所以，我有一个看起来像这样的模型：

```
class Names(models.Model):
  name = models.CharField()

class Entries(models.Model):
  name = models.ForeignKey(Names)
  date = models.DateField() 
```

数据看起来像这样

```
name   |  date

name_1 |  2011-06-01
name_2 |  2011-03-01
name_3 |  2011-02-01
name_1 |  2010-06-01
name_2 |  2010-03-02
name_3 |  2010-02-01
name_4 |  2009-07-01 
```

我想用日期查询条目，并在小于或等于日期的地方获取*每个**名称*记录。所以，如果我查询日期**2011-06-01** ，我希望返回这个：

```
name_1 | 2011-06-01
name_2 | 2011-03-01
name_3 | 2011-02-01
name_4 | 2009-07-01 
```

我的假设是这样可以解决问题：

```
date = datetime(year=2011, month=06, day=01)
results = Entries.objects.filter(date__lte=date).order_by('date').distinct('name') 
```

但是，我不断收到重复的名称条目。

朋友们有什么建议吗？

编辑：该解决方案由 Gareth Rees 提供。我不得不稍微修改它，但它看起来像这样：

```
sql = """myapp_entries.id = (SELECT E.id from myapp_entries AS E
                             WHERE E.name_id = myapp_names.id AND
                             '"""+date.strftime('%Y-%m-%d')+"""'
                             ORDER BY E.date DESC
                             LIMIT 1)'''

results = (Entries.objects
           .extra(where = [sql])
           .filter(date__lte = date)
           .order_by('name', 'date')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:49:59.667

以下是几种方法，具体取决于您对结果的需要。

(1) 如果您不介意以字典形式（而不是`Entries`对象）获取结果，则可以使用[`annotate`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#annotate)组合 with[`values`](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/#values)对结果进行分组。在这种情况下，您想要的查询将是这样的：

```
from django.db.models import Min
results = (Entries.objects
           .filter(date__lte = date)
           .values('name')
           .annotate(date = Min('date'))
           .order_by('name', 'date')) 
```

（2）如果您需要将结果作为`Entries`对象返回，那么您可以使用[`extra`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.extra)仅选择所有具有相同名称的条目中最早的条目：

```
sql = '''id = (SELECT E.id FROM myapp_entries AS E
                WHERE E.name_id = myapp_entries.name_id
                ORDER BY E.date
                LIMIT 1)'''
results = (Entries.objects
           .extra(where = [sql])
           .filter(date__lte = date)
           .order_by('name', 'date')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:00:48.563

尝试使用 .distinct('name__name') 因为您想要遍历外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T08:17:06.790

您可能应该阅读文档：[https ://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct](https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)

.distinct(*fields) 仅适用于 postgres，并要求您匹配 .order_by 和 .distinct，例如：

```
results = Entries.objects.filter(date__lte=date).order_by('date').distinct('date') 
```

所以在你的情况下，它很可能是这样的：

```
results = Entries.objects.filter(date__lte=date).order_by('name', 'date').distinct('name') 
```

# java - 使用谷歌自定义搜索 API 的 Java 代码

> ID：10257276
> 
> 赞同：12
> 
> 时间：2012-04-21T07:54:44.853
> 
> 标签：java, api, google-custom-search

任何人都可以分享一些Java代码以开始使用谷歌搜索API。我在互联网上搜索但没有找到任何合适的文档或好的示例代码。我发现的代码似乎不起作用。如果有人我会很感激可以帮助我。（我已获得 API 密钥和自定义搜索引擎 ID）。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T15:28:52.330

我已经更改了`while loop`上面@Zakaria 提供的代码。这可能不是解决问题的正确方法，但它为您提供了谷歌搜索的结果链接。您只需要解析输出。看这里，

```
public static void main(String[] args) throws Exception {

    String key="YOUR KEY";
    String qry="Android";
    URL url = new URL(
            "https://www.googleapis.com/customsearch/v1?key="+key+ "&cx=013036536707430787589:_pqjad5hr1a&q="+ qry + "&alt=json");
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setRequestMethod("GET");
    conn.setRequestProperty("Accept", "application/json");
    BufferedReader br = new BufferedReader(new InputStreamReader(
            (conn.getInputStream())));

    String output;
    System.out.println("Output from Server .... \n");
    while ((output = br.readLine()) != null) {

        if(output.contains("\"link\": \"")){                
            String link=output.substring(output.indexOf("\"link\": \"")+("\"link\": \"").length(), output.indexOf("\","));
            System.out.println(link);       //Will print the google search links
        }     
    }
    conn.disconnect();                              
} 
```

希望它也适合你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-30T09:32:54.393

对于需要使用 Google 库的自定义搜索 API 的工作示例的任何人，您可以使用此方法：

```
public static List<Result> search(String keyword){
    Customsearch customsearch= null;

    try {
        customsearch = new Customsearch(new NetHttpTransport(),new JacksonFactory(), new HttpRequestInitializer() {
            public void initialize(HttpRequest httpRequest) {
                try {
                    // set connect and read timeouts
                    httpRequest.setConnectTimeout(HTTP_REQUEST_TIMEOUT);
                    httpRequest.setReadTimeout(HTTP_REQUEST_TIMEOUT);

                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
    } catch (Exception e) {
        e.printStackTrace();
    }
    List<Result> resultList=null;
    try {
        Customsearch.Cse.List list=customsearch.cse().list(keyword);
        list.setKey(GOOGLE_API_KEY);
        list.setCx(SEARCH_ENGINE_ID);
        Search results=list.execute();
        resultList=results.getItems();
    }
    catch (  Exception e) {
        e.printStackTrace();
    }
    return resultList;
} 
```

此方法返回 Result 对象列表，因此您可以对其进行迭代

```
 List<Result> results = new ArrayList<>();

    try {
        results = search(QUERY);
    } catch (Exception e) {
        e.printStackTrace();
    }
    for(Result result : results){
        System.out.println(result.getDisplayLink());
        System.out.println(result.getTitle());
        // all attributes:
        System.out.println(result.toString());
    } 
```

正如您所注意到的，您必须定义您的自定义 GOOGLE_API_KEY、SEARCH_ENGINE_ID、QUERY 和 HTTP_REQUEST_TIMEOUT，即

```
private static final int HTTP_REQUEST_TIMEOUT = 3 * 600000; 
```

我使用 gradle 依赖项：

```
dependencies {
compile 'com.google.apis:google-api-services-customsearch:v1-rev57-1.23.0'
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T09:07:10.910

好吧，我认为您可以使用 Java RESTFUL 客户端并没有什么特别之处。

[我使用该 Java 代码](http://www.mkyong.com/webservices/jax-rs/restfull-java-client-with-java-net-url/)并根据[Google 文档](https://developers.google.com/custom-search/v1/using_rest)尝试了自定义 API ：

```
public static void main(String[] args) throws IOException {
        URL url = new URL(
                "https://www.googleapis.com/customsearch/v1?key=YOUR-KEY&cx=013036536707430787589:_pqjad5hr1a&q=flowers&alt=json");
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Accept", "application/json");
        BufferedReader br = new BufferedReader(new InputStreamReader(
                (conn.getInputStream())));

        String output;
        System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {
            System.out.println(output);
        }

        conn.disconnect();
    } 
```

您必须将“YOUR-KEY”替换为[Google APIs Console](https://code.google.com/apis/console)上的一个。

# c#-4.0 - 如何使用c#动态更改datagrid单元格的前景色

> ID：10257277
> 
> 赞同：1
> 
> 时间：2012-04-21T07:54:49.907
> 
> 标签：c#-4.0, datagridview, windows-applications

我知道这是一个愚蠢的问题，但我无法得到我想要的输出。实际上，我想动态更改 datagridview 单元格的前景色，为此我有这样的逻辑

```
 this.dataGridView1.Rows[0].Cells[1].Style.ForeColor = System.Drawing.Color.Red; 
```

但这不适用于单元格（甚至单元格背景也不适用），

但是我得到了分配给单元格的前颜色名称

```
 string colorname = this.dataGridView1.Rows[0].Cells[1].Style.ForeColor.Name; 
```

.我的查询中是否有任何错误，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:04:40.183

若要自定义具有特定值的单元格样式，请实现 DataGridView.CellFormatting 事件的处理程序。此事件的处理程序接收 DataGridViewCellFormattingEventArgs 类型的参数。此对象包含的属性可让您确定正在格式化的单元格的值及其在 DataGridView 控件中的位置。此对象还包含一个 CellStyle 属性，该属性已初始化为正在格式化的单元格的 InheritedStyle 属性的值。您可以修改单元格样式属性以指定适合单元格值和位置的样式信息。

来自[MSDN](http://msdn.microsoft.com/en-us/library/1yef90x0.aspx)

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.ColumnIndex == 0 && e.RowIndex == 0)
        e.CellStyle.ForeColor = Color.Red;
} 
```

结果如下：

![在此处输入图像描述](../Images/0eca2436b72d6995cde68ead876c2e3b.png)

在 if 语句中插入首选索引而不是零，以仅更改您需要的那些单元格的前景色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:07:41.163

检查这个

```
dataGridView1[col, row].Style.ForeColor = Color.Blue; 
```

我希望这有帮助！

# jquery - 在 jQgrid 中实现删除

> ID：10257280
> 
> 赞同：2
> 
> 时间：2012-04-21T07:56:00.457
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-formatter

我是 jqGrid 的初学者，我想在 jqGrid 中实现删除肌动蛋白我写这个代码来填充 jqGrid

```
$(function () {
    var grid = $('#list');
    grid.jqGrid({
        url: 'jQGridHandler.ashx',
        postData: { ActionPage: 'TransportType', Action: 'Fill' },
        ajaxGridOptions: { cache: false },
        loadonce: true,
        direction: "rtl",
        datatype: 'json',
        height: 490,
        colNames: ['Code', 'TransportType', 'TransportTypeAbbr', 'Remark'],
        colModel: [
            { name: 'TRANSPORT_ID', width: 100, sortable: true, editable: true },
            { name: 'TRANSPORT_NAME', width: 200, sortable: true, editable: true },
            { name: 'TRANSPORT_ABBR', width: 100, sortable: true, editable: true },
            { name: 'REMARK', width: 100, sortable: true, editable: true }
        ],
        gridview: true,
        rowNum: 20,
        rowList: [20, 40, 60],
        pager: '#pager',
        sortname: 'TRANSPORT_ID',
        viewrecords: true,
        sortorder: 'ASC',
        caption: '',
        rownumbers: true
    });
    grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true },
     { height: 300, width: 300, url: "JQGridHandler.ashx?ActionPage=TransportType&Action=Update", reloadAfterSubmit: false },
     { height: 400, width: 500, url: "JQGridHandler.ashx?ActionPage=TransportType&Action=Insert", reloadAfterSubmit: false },
     { url: "JQGridHandler.ashx?ActionPage=TransportType&Action=Delete", reloadAfterSubmit: false },
     { multipleSearch: true, overlay: false, width: 460 }); 
```

在 jQGridHandler 我写这段代码

```
case "TransportType":
    var transport = new TransportTypesBusiness();
    TRANSPORT_TYPES transportItem;
    switch (request.QueryString["Action"])
    {
        case "Fill":
            string numberOfRows = request["rows"];
            string pageIndex = request["page"];
            int totalRecords = 0;
            output = transport.BuildJQGridResults(Int32.Parse(numberOfRows), Int32.Parse(pageIndex), totalRecords);
            response.Write(output);
            break;
        case "FillDrop":
            output = transport.BuildJQGridResults();
            response.Write(output);
            break;
        case "Insert":
            transportItem = new TRANSPORT_TYPES  {
                TRANSPORT_NAME = request["TRANSPORT_NAME"].ToString(),
                TRANSPORT_ABBR = request["TRANSPORT_ABBR"].ToString(),
                REMARK = request["REMARK"].ToString()
            };
            bool isInsert = transport.AddNew(transportItem);
            break;
        case "Update":
            transportItem = new TRANSPORT_TYPES {
                TRANSPORT_ID = int.Parse(request["TRANSPORT_ID"].ToString()),
                TRANSPORT_NAME = request["TRANSPORT_NAME"].ToString(),
                TRANSPORT_ABBR = request["TRANSPORT_ABBR"].ToString(),
                REMARK = request["REMARK"].ToString()
            };
            bool isUpdate = transport.Update(transportItem);
            break;
        case "Delete":
            bool isDelete =
                transport.Delete(
                    transport.Find(c => c.TRANSPORT_ID == int.Parse(request["TRANSPORT_ID"].ToString())));
            break;
    } 
```

什么时候删除记录，我无法获得`request["TRANSPORT_ID"].ToString()`价值。

请帮我。谢谢大家

编辑 1：我从这里编辑脚本

```
 $(function () {
            var grid = $('#list');
            grid.jqGrid({
                url: 'jQGridHandler.ashx',
                postData: { ActionPage: 'TransportType', Action: 'Fill' },
                ajaxGridOptions: { cache: false },
                loadonce: true,
                direction: "rtl",
                datatype: 'json',
                height: 490,
                colNames: ['Code', 'TransportType', 'TransportTypeAbbr', 'Remark'],
                colModel: [
                        { name: 'TRANSPORT_ID', key: true,,hidden:true, editable:false },
                        { name: 'TRANSPORT_NAME', width: 200, sortable: true, editable: true },
                        { name: 'TRANSPORT_ABBR', width: 100, sortable: true, editable: true },
                        { name: 'REMARK', width: 100, sortable: true, editable: true }
                       ],
                          cmTemplate: { width: 100, editable: true },
                prmNames: { oper: 'Action', editoper: 'Update', addoper: 'Insert',
                    deloper: 'Delete', id: 'STATUS_ID'
                },
                gridview: true,
                rowNum: 20,
                rowList: [20, 40, 60],
                pager: '#pager',
                sortname: 'TRANSPORT_ID',
                viewrecords: true,
                sortorder: 'ASC',
                caption: '',
                rownumbers: true
            });
             $.extend($.jgrid.edit, {
                editData: { ActionPage: 'StatusType' },
                savekey: [true, 13],
                closeOnEscape: true,
                closeAfterEdit: true,
                closeAfterAdd: true,
                reloadAfterSubmit: false,
                recreateForm: true
            });

            grid.jqGrid('navGrid', '#pager', { add: true, edit: true, del: true },
                    { height: 300, width: 300 },
                    { height: 400, width: 500 },
                    {},
                    { width: 460 }); 
```

并在处理程序中获取

> ActionPage 写这段代码

```
 HttpRequest request = context.Request;
        string ss = request["ActionPage"].ToString(); 
```

网格首先加载数据，但单击编辑按钮时出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:08:04.927

我想你的问题的根源是你没有正确地*填充*网格的 rowids。可能您确实正确填写了网格行的 ID，但只是不使用这些信息。

顺便说一下，您将`Action`参数与值一起使用`"Insert"`，`"Update"`并且`"Delete"`。另一方面，已经有标准参数将在行编辑期间`oper`发送到服务器（请参见[此处）。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#what_is_posted_to_the_server)参数的值`oper`将是“add”、“edit”和“del”。所以我认为在编辑过程中不需要使用额外的`Action`参数。我建议您只测试`oper`参数的值。

如果您确实希望有其他名称和`oper`参数值，您可以使用 jqGrid 的 prmNames 选项来更改默认值：

```
prmNames: { oper: "Action", editoper: "Update", addoper: "Insert", deloper: "Delete" } 
```

`ActionPage=TransportType`我认为您在所有 URL 中使用的附加参数的使用没有任何意义。如果您确实需要`"jQGridHandler.ashx"`出于其他目的共享相同的 URL，您可以使用,和参数使用`editurl: "jQGridHandler.ashx"`并将`ActionPage=TransportType`部分添加到 URL 。`postData``editData``delData`

以与`oper`参数相同的方式，在编辑操作期间将另外一个带有名称的参数`id`发送到服务器。所以你可以`request["TRANSPORT_ID"]`在服务器端使用。如果您更喜欢其他名称（我不认为它真的是必需的），您可以`id: "TRANSPORT_ID"`在`prmNames`. 它将解决您的主要问题。

因此，如果您不想对服务器代码进行任何修改，您可以在客户端执行以下操作

```
$(function () {
    var grid = $('#list');
    grid.jqGrid({
        url: 'jQGridHandler.ashx',
        editurl: 'jQGridHandler.ashx',
        postData: { ActionPage: 'TransportType', Action: 'Fill' },
        loadonce: true,
        direction: "rtl",
        datatype: 'json',
        height: "auto",
        colNames: ['Code', 'TransportType', 'TransportTypeAbbr', 'Remark'],
        colModel: [
            { name: 'TRANSPORT_ID', key: true },
            { name: 'TRANSPORT_NAME', width: 200 },
            { name: 'TRANSPORT_ABBR' },
            { name: 'REMARK' }
        ],
        cmTemplate: {width: 100, editable: true},
        prmNames: { oper: 'Action', editoper: 'Update', addoper: 'Insert',
            deloper: 'Delete', id: 'TRANSPORT_ID'
        },
        gridview: true,
        rowNum: 20,
        rowList: [20, 40, 60],
        pager: '#pager',
        sortname: 'TRANSPORT_ID',
        viewrecords: true,
        sortorder: 'ASC',
        rownumbers: true
    });
    $.extend($.jgrid.edit, {
        editData: { ActionPage: 'TransportType' },
        savekey: [true, 13],
        closeOnEscape: true,
        closeAfterEdit: true,
        closeAfterAdd: true,
        reloadAfterSubmit: false,
        recreateForm: true
    });
    $.extend($.jgrid.del, {
        delData: { ActionPage: 'TransportType', Action: 'Delete' },
        reloadAfterSubmit: false,
        closeOnEscape: true
    });
    $.extend($.jgrid.search, {
        multipleSearch: true,
        recreateFilter: true,
        overlay: false
    });
    grid.jqGrid('navGrid', '#pager', {},
        { height: 300, width: 300, editData: { ActionPage: 'TransportType', Action: 'Update' } },
        { height: 400, width: 500, editData: { ActionPage: 'TransportType', Action: 'Insert' },
            afterSubmit: function (response) {
                return [true, '', response.responseText];
            }},
        {},
        { width: 460 }
    );
}); 
```

我添加了一些额外的设置并用于`cmTemplate`更改项目的默认值（参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)）`colModel`。

您的代码中还有一件更重要的事情会造成问题。你使用`reloadAfterSubmit: false`设置。在这种情况下，在服务器操作`id`的响应中返回新创建的项目很重要。`"Insert"`所以使用应该使用`response.Write(output);`在服务器响应的正文中写入id。此外，您需要使用`afterSubmit`（参见[答案](https://stackoverflow.com/a/6954954/315935)）从服务器响应中获取新 id 并将其转发给 jqGrid：

```
grid.jqGrid('navGrid', '#pager', {},
    { height: 300, width: 300, editData: {ActionPage: 'TransportType', Action: 'Update'} },
    { height: 400, width: 500, editData: {ActionPage: 'TransportType', Action: 'Insert'},
        afterSubmit: function (response) {
            return [true, '', response.responseText];
        }},
    {},
    { width: 460 }
); 
```

**更新：您可以从**[这里](http://www.ok-soft-gmbh.com/jqGrid/jqGridInWebForm1.zip)下载演示项目。

# java - 在 Java 中通过 TCP 流式传输数组

> ID：10257282
> 
> 赞同：-1
> 
> 时间：2012-04-21T07:56:08.363
> 
> 标签：java, sockets, file-io

我正在尝试通过网络传输一系列字符串。我可以发送一个字符串，但是一旦我尝试发送一个字符串数组，我就会遇到问题。我做了一些研究并提出了修复程序，该修复程序在 IDE 中没有错误，但是当我在外部运行它时程序崩溃了。我已将其缩小为我意外创建的无限循环。我将粘贴所有代码，因为这里放太多了。

这是我要实现的目标的摘要...

1.  打开文本文件
2.  逐行读取（将每一行写入数组内的单独字符串）
3.  文件读取完成后，开始流式传输每个单独的字符串
4.  在接收端有一个 for 循环，将字符串放回另一个数组
5.  最后，在服务器端，将字符串的每个部分分成 5 个不同的字符串

这是我的客户类：

```
public class Transfers {

    public int port = 1223;
    //public String Ip = LoginForm.IP;
    //public String ip = null;
    public static Socket login = null;
    public static Socket sock = null;
    public static PrintWriter outStream = null;
    private static BufferedReader inStream = null;
    private static boolean ON = false;
    public static String authorize = null;
    public static boolean connected = true;

    public static void transfers(String IP, int port, String content) throws UnknownHostException, IOException {

        try {
            login = new Socket(IP, port);
            //System.out.println("Connected for streaming");
            outStream = new PrintWriter(login.getOutputStream(), true);
            outStream.println(content);
        } catch (UnknownHostException ex) {
            Logger.getLogger(Transfers.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(Transfers.class.getName()).log(Level.SEVERE, null, ex);
            login.close();
        }
    }

    public static String[] recieveArray(String IP) throws UnknownHostException, IOException {
        String[] farray = null;
        sock = new Socket(IP, 1224);
        inStream = new BufferedReader(new InputStreamReader(sock.getInputStream()));
        String count = inStream.readLine();
        int counter = Integer.parseInt(count);
        System.out.println("counter");
        for (int i = 0; i < counter; i++) {
            inStream = new BufferedReader(new InputStreamReader(sock.getInputStream()));
            farray[i] = inStream.readLine();
            System.out.println(farray[i]);
        }
        return farray;
    }
} 
```

这是我的服务器类：

```
public class Specials {

    private static ServerSocket server = null;
    private static Socket client = null;
    private static PrintWriter outStream = null;
    private static BufferedReader inStream = null;
    private static boolean ServerOn = true;
    public static String message = "";
    public static String command = null;
    static public InetAddress IP = null;
    public static String status = null;
    private static String file = "accounts.dat";
    private static int counter;

    public static void arraysend(String filename) throws FileNotFoundException, IOException {

        counter = 0;
        FileInputStream fstream = new FileInputStream("AppData/" + filename);
        String strLine;
        String[] filearray;

        try (DataInputStream in = new DataInputStream(fstream)) {
            BufferedReader br = new BufferedReader(new InputStreamReader(in));

            filearray = new String[1000];
            for (int j = 0; j < 10; j++) {
                filearray[j] = br.readLine();
                counter++;
            }
            in.close();
        }

        try {
            server = new ServerSocket(1224);
            client = server.accept();
            IP = client.getInetAddress();
            outStream = new PrintWriter(client.getOutputStream(), true);
            filearray[0] = Integer.toString(counter);
            outStream.println(filearray[0]);
            for (int i = 1; i < counter; i++) {
                outStream = new PrintWriter(client.getOutputStream(), true);
                outStream.println(filearray[i]);
            }
            client.close();
            server.close();
        } catch (IOException ex1) {
            Logger.getLogger(Specials.class.getName()).log(Level.SEVERE, null, ex1);
        }
    }
} 
```

我没有收到任何错误消息，应用程序只是崩溃了。为了方便起见，我在下面包含了我的代码的 pastebins。

*   [客户端代码](http://www.pastebin.com/P1YQcEXv)
*   [服务器代码](http://pastebin.com/pSZ6Zfvh)

任何帮助将不胜感激，谢谢。

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:32:43.003

在 Transfers 类中查看您的代码，您正在 `farray`使用 null 初始化数组。而且您正在`for`循环中使用它

```
inStream = new BufferedReader(new InputStreamReader(sock.getInputStream())); 
```

并在特价课中再次使用`for`

```
outStream = new PrintWriter(client.getOutputStream(), true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:45:57.840

这段代码有很多问题，我不知道从哪里开始。这是一个（非详尽的）列表：

*   您正在为类变量和方法使用静态修饰符。以这种方式定义它们没有任何用途，并且使调试变得痛苦。将它们 ***全部***删除。
*   仅创建为维护状态而实际需要的那些类变量。目前，您在类级别声明的大多数变量实际上都可以在使用它们的方法中声明。
*   在您的客户端`recieveArray`方法中，您将在接收循环的每次迭代期间重新初始化缓冲阅读器。这很可能导致丢失数据，因为您将丢弃一些已在前一个读取器中缓冲的数据（并且不再可从套接字输入流中获得）。
*   在客户端`recieveArray`方法中，您最多读取 `count`字符串，但在服务器端发送`count - 1` 字符串，因为您将计数存储在先前填充的数组的第一个元素中。

这段代码：

```
for (int j = 0; j < 10; j++) {
    filearray[j] = br.readLine();
    counter++;
}

for (int i = 1; i < counter; i++) {
    outStream = new PrintWriter(client.getOutputStream(), true);
    outStream.println(filearray[i]);
} 
```

*   在我上面发布的代码（服务器端）中，您还在发送循环的每次迭代中重新创建到客户端的输出流。

解决所有这些问题并重新测试，然后在需要时提出后续问题。

# sql - 为了防止 SQL 注入的威胁，我已经阻止了字符串“--”和“;” 但我仍然不确定它是否安全..？

> ID：10257283
> 
> 赞同：2
> 
> 时间：2012-04-21T07:56:36.353
> 
> 标签：sql, sql-server-2008

我的应用程序中有一个文本框，用户将在其中输入 where 子句来搜索线索。此条件将连接到我`AND`在 SQL Server 2008 存储过程中使用逻辑运算符的原始搜索查询。

是否可以在这种情况下编写`DELETE`或`DROP`子查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T07:57:50.553

你正在打一场失败的战斗。

不要试图通过将输入内容列入黑名单或白名单来防止 SQL 注入。相反，使用参数化查询。那么输入什么都没有关系。

# c++ - 使用 DXGI 将一台显示器切换到全屏时其他显示器变黑

> ID：10257284
> 
> 赞同：1
> 
> 时间：2012-04-21T07:56:42.447
> 
> 标签：c++, fullscreen, direct3d, dxgi

当我将其中一个显示器切换到全屏模式时，有时其他显示器会变黑并且不会显示任何内容。我做错了什么还是只是一些错误？

我创建了一个窗口，然后创建了一个绑定到该窗口的交换链。我用第一个参数 true 调用交换链的 SetFullScreenState，第二个参数是我想要切换全屏的监视器的 IDXGIOutput 对象。有时它工作正常，但有时所有其他显示器都丢失了（只有全屏显示器显示东西）。

我的显卡是Radeon HD6750，驱动版本是12.3。

* * *

我发现 MulitMon10 样本有同样的问题，而有些游戏没有。还是天际和猴岛的故事使用 D3D 或 OpenGL ......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T18:42:54.663

这个问题有两年了。我刚遇到它。我在 DX11 上遇到了类似的问题，有时在调试版本中发生，系统地在发布版本中发生。在我的范例中，主监视器拥有一个控制台和一个可选的“按钮”GUI。辅助监视器（可用监视器之一）是全屏应用程序窗口，其中显示 2D 专业图像并使用 1D 和 3D 查找表转换 GPU。

让主显示器变黑是一个表演障碍。所有需要的对话框都是控制台窗口的子窗口（因此，在主监视器上打开）。辅助监视器是电影数字投影仪....足够'blabla'。

因此，我的解决方案是在目标窗口已经处于全屏模式时以窗口模式创建交换链。

别问我为什么。这个对我有用。这里还有一点：

首先，我的显示窗口设置为填充整个显示器表面（没有边框，没有所有内容）。

其次，我使用“windowed = true”为此窗口创建交换链。

事实上，即使它看起来是全屏的，它也是窗口化的。没有边框，就显示/渲染 2D 图像而言，它的工作方式相同。直接馈入后缓冲区也可以。

然后，只有这样，您才能将后台缓冲区切换到真正的管理全屏。由于这个手术对眼睛来说非常残酷，我倾向于只在绝对必要的时候才做。实际上，Win7 将重置整个桌面（因此，所有显示器、所有窗口）并创建多个闪光。

在创建后缓冲区后进入真正的全屏状态时，我从未经历过卡在桌面重置中间的解散（回到原来的问题）。

完整地说，“窗口化全屏”和“真实全屏”之间存在差异。你可以使用的东西。

*   窗口全屏：其他窗口/对话框将与您的 2D 创建重叠。

*   真正的全屏：其他窗口/对话框应该留在下面（不可见，但在那里）。

根据需要在两种模式之间切换会很好，除了桌面重置压力是一个沉重的负担。

# scala - Scala 实例值范围

> ID：10257289
> 
> 赞同：3
> 
> 时间：2012-04-21T07:57:19.173
> 
> 标签：scala, initialization

*请注意，这个问题和类似的问题之前已经被问过，例如在前[向引用中 - 为什么这段代码会编译？](https://stackoverflow.com/questions/7762838/scala-forward-references-why-does-this-code-compile)，但我找到了仍然留下一些问题的答案，所以我在这个问题上再试一次。*

在方法和函数中，`val`关键字的作用似乎是词法的，即

```
def foo {
  println(bar)
  val bar = 42
} 
```

屈服

```
error: forward reference extends over definition of value bar 
```

但是，在类中，范围规则`val`似乎发生了变化：

```
object Foo {
  def foo = bar
  println(bar)
  val bar = 42
} 
```

这不仅会编译，而且构造`println`函数中的`0``foo``42`

因此，方法似乎可以前向引用实例值，最终将在调用方法之前初始化（当然，除非您从构造函数调用它），以及构造函数中的语句以相同的方式转发引用值，在它们被初始化之前访问它们，从而产生一个愚蠢的任意值。

由此，出现了几个问题：

*   为什么`val`在构造函数中使用它的词法编译时效果？

鉴于构造函数实际上只是一个方法，这似乎与完全 drop`val`的编译时效果不一致，只给它通常的运行时效果。

*   为什么`val`有效地失去了声明*不可变*值的效果？

在不同时间访问该值可能会导致不同的结果。对我来说，这很像是编译器实现细节的泄露。

*   合法的用例可能是什么样的？

我很难想出一个绝对需要`val`内部构造函数的当前语义的示例，并且不容易用适当的词法实现`val`，可能与`lazy`.

*   一个人将如何解决这种行为`val`，从其他方法中使用它来取回一个习惯于使用它的所有保证？

可以推测，可以将所有 instance 声明`val`为是`lazy`为了回到`val`不可变的状态并产生相同的结果，无论它们如何访问，并降低在常规方法中观察到的编译时效果的相关性，但这似乎对于这种事情，对我来说就像一个非常糟糕的黑客攻击。

鉴于这种行为在实际语言中不太可能发生变化，编译器插件是否是解决此问题的正确位置，或者是否可以实现`val`-alike 关键字，对于刚刚花了一个小时调试由这种奇怪的，语言中更明智的语义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T08:46:28.180

只是部分答案：

> 鉴于构造函数实际上只是一种方法......

它不是。

*   它不返回结果，也不声明返回类型（或没有名称）
*   不能为所述类的对象再次调用它，例如`"foo".new ("bar")`
*   你不能从派生类中隐藏它
*   你必须用“新”来称呼他们
*   他们的名字由班级的名字固定

从语法上看，Ctor 有点像方法，它们接受参数并有一个主体，但仅此而已。

*   为什么 val 实际上失去了声明不可变值的效果？

它没有。您必须采用不能为空的基本类型才能获得这种错觉 - 使用对象，它看起来不同：

```
object Foo {
  def foo = bar
  println (bar.mkString)
  val bar = List(42)
}
// Exiting paste mode, now interpreting.

defined module Foo

scala> val foo=Foo 
java.lang.NullPointerException 
```

你不能改变一个 val 2 次，你不能给它一个不同于 null 或 0 的值，你不能把它改回来，不同的值只能用于基本类型。所以这远不是一个变量——它是一个——可能是未初始化的——最终值。

*   合法的用例可能是什么样的？

我猜想在 REPL 中使用交互式反馈工作。您在没有显式包装对象或类的情况下执行代码。要获得这种即时反馈，不能等到（隐式）对象关闭`}`。因此，类/对象不会以两遍方式读取，其中首先执行所有声明和初始化。

*   如何解决 val 的这种行为，从在其他方法中使用它来恢复所有习惯？

不要读取 Ctor 中的属性，就像您不读取 Java 中的属性一样，这些属性可能会在子类中被覆盖。

### 更新

Java 中也可能出现类似的问题。编译器会阻止直接访问未初始化的最终属性，但如果您通过其他方法调用它：

```
public class FinalCheck
{
    final int foo;

    public FinalCheck ()
    {
        // does not compile: 
        // variable foo might not have been initialized
        // System.out.println (foo);

        // Does compile - 
        bar ();

        foo = 42;       
        System.out.println (foo);
    }

    public void bar () {
        System.out.println (foo);   
    }
    public static void main (String args[])
    {
        new FinalCheck ();
    }
} 
```

...您会看到 . 的两个值`foo`。

```
0
42 
```

我不想为这种行为辩解，而且我同意，如果编译器可以因此发出警告——在 Java 和 Scala 中，那就太好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T18:34:15.103

> 因此，方法似乎可以前向引用实例值，最终将在调用方法之前初始化（当然，除非您从构造函数调用它），以及构造函数中的语句以相同的方式转发引用值，在它们被初始化之前访问它们，从而产生一个愚蠢的任意值。

构造函数*是*构造函数。您正在构建对象。它的所有字段都由 JVM 初始化（基本上是归零），然后构造函数填写需要填写的任何字段。

> *   为什么 val 在构造函数中使用其词法编译时效果？
>     
>     
>     
>     鉴于构造函数实际上只是一种方法，完全放弃 val 的编译时效果似乎相当不一致，只给它通常的运行时效果。

我不知道你在这里说什么或问什么，但构造函数不是方法。

> *   为什么 val 实际上失去了声明不可变值的效果？
>     
>     
>     
>     在不同时间访问该值可能会导致不同的结果。对我来说，这很像是编译器实现细节的泄露。

它没有。如果您尝试`bar`从构造函数进行修改，您会发现这是不可能的。**当然***，在构造函数*中的不同时间访问值可能会导致不同的结果。

 **您正在*构造*对象：它开始未构造，并结束构造。为了不改变它，它必须从它的最终值开始，但是如果没有人分配那个值，它怎么能做到呢？

猜猜这是谁做的？构造函数。

> *   合法的用例可能是什么样的？
> 
> 我很难想出一个示例，该示例绝对需要构造函数中 val 的当前语义，并且不容易用适当的词法 val 实现，可能与惰性结合使用。

在填充值之前访问 val 是没有用例的。只是不可能找出它是否已经初始化。例如：

```
class Foo {
  println(bar)
  val bar = 10
} 
```

你认为编译器能保证它*没有*被初始化吗？好吧，然后打开REPL，放入上面的类，然后这个：

```
class Bar extends { override val bar = 42 } with Foo
new Bar 
```

并且看到它`bar`在打印时被初始化。

> *   如何解决 val 的这种行为，从在其他方法中使用它来恢复所有习惯？

在使用它们之前声明你的 val。但请注意，构造函数*不是*方法。当你这样做时：

```
println(bar) 
```

在构造函数中，您正在编写：

```
println(this.bar) 
```

并且`this`，您正在为其编写构造函数的类的对象有一个`bar`getter，因此它被调用。

当你对一个`bar`有定义的方法做同样的事情时，就没有getter`this`了。`bar`**

# php - 在 FCK 编辑器 YII 扩展中填充值

> ID：10257295
> 
> 赞同：0
> 
> 时间：2012-04-21T07:58:27.833
> 
> 标签：php, frameworks, yii

我想在编辑器中填充值。通常我们用来`$oFCKeditor->Value`显示内容。

Yii fck 扩展的参数是什么？

```
 $this->widget('application.extensions.fckeditor.FCKEditorWidget',array(
"model"=>$model,                # Data-Model
"attribute"=>'content',         # Attribute in the Data-Model
"height"=>'400px',
"width"=>'100%',

"fckeditor"=>Yii::app()->basePath."/../fckeditor/fckeditor.php",
                                # Path to fckeditor.php
"fckBasePath"=>Yii::app()->baseUrl."/fckeditor/",
                                # Relative Path to the Editor (from Web-Root)
"config" => array("EditorAreaCSS"=>Yii::app()->baseUrl.'/css/index.css',), 
```

在编辑器中显示值的参数是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:02:04.013

FCKeditor 中设置的值从以下位置检索`model`：

```
"model"=>$model,                # Data-Model
"attribute"=>'content',         # Attribute in the Data-Model 
```

这会将 FCKEditor 值设置为`$model->content`。

如果您需要设置预定义的值，您可以在显示小部件之前简单地执行此操作：

```
$model->content = 'Some text goes here'; 
```

# debugging - 访问扩展程序 background.js 的控制台和开发工具

> ID：10257301
> 
> 赞同：217
> 
> 时间：2012-04-21T07:59:40.530
> 
> 标签：debugging, google-chrome-extension, console, google-chrome-devtools

我刚开始使用 Google Chrome 扩展程序，我似乎无法从我的后台 js 登录到控制台。当发生错误时（例如由于语法错误），我也找不到任何错误消息。

我的清单文件：

```
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "background": {
    "scripts": ["background.js"]
  },
  "permissions": [
    "pageCapture",
    "tabs"
  ]
} 
```

背景.js：

```
alert("here");
console.log("Hello, world!") 
```

当我加载扩展程序时，会出现警报，但我没有看到任何内容被记录到控制台。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2012-04-21T10:12:34.457

你看错地方了。这些控制台消息不会出现在网页中，而是出现在不可见的背景页面（ManifestV2）或 Service Worker（ManifestV3）中。

要查看后台脚本上下文的正确控制台打开开发工具：

1.  访问`chrome://extensions/`或右键单击扩展图标并选择“管理扩展”。
2.  启用开发者模式
3.  单击名为`background page`(ManifestV2) 或`service worker`(ManifestV3) 的链接。

ManifestV2 扩展的屏幕截图：

[![在此处输入图像描述](../Images/6b0c12b24df86ec74fda12bc7b60d76a.png)](https://i.stack.imgur.com/90Bvq.png)

[![在此处输入图像描述](../Images/5893d43b6f0fc3df460663533578ecd2.png)](https://i.stack.imgur.com/Oy4Sj.png)

ManifestV3 扩展的屏幕截图：

[![在此处输入图像描述](../Images/4f721671fe6b4cd5c3edd9fbb98fd7c7.png)](https://i.stack.imgur.com/H2O2F.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-08-10T09:54:10.930

我遇到了同样的问题，在我的情况下，Chrome 开发人员工具的控制台选项卡中的日志记录设置为“全部隐藏”。我什至没有意识到这是一个选项，我不记得把它关掉了

[![在 chrome 开发工具的控制台选项卡中设置的屏幕截图](../Images/05a2c4719eb68e4d75cb2271ddecda30.png)](https://i.stack.imgur.com/9JGOd.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-14T11:03:26.623

此外

如果您想在**manifest.json**`content_script`中查看js 文件（未设置“背景”属性时）

 **```
"content_scripts": [{
    "matches": ["<all_urls>"],
    "js": ["popup.js"],
  }]

"browser_action": {
    "default_icon": "icon_32.png",
    "default_popup": "popup.html"
  } 
```

然后**右键单击**扩展图标并单击**检查弹出**窗口并打开开发人员窗口并打开 popup.html，您会看到控制台选项卡。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-10-18T22:37:31.967

对于希望查看其 chrome 扩展的“内容脚本”的调试控制台的关注者，可以通过执行普通的“显示开发者控制台”然后使用下拉箭头选择其“javascript 环境”，然后您就可以访问对其方法等

[![在此处输入图像描述](../Images/af72936e99bd36bdb299b2fdbad83fc1.png)](https://i.stack.imgur.com/x1urQ.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-06-10T22:44:02.953

与 Michiel 的回答类似，我也有一个有趣的控制台配置：我不记得设置的过滤器：

[![在此处输入图像描述](../Images/00a8a95eee893d8ec2cbb9df1b48d785.png)](https://i.stack.imgur.com/kB0Sm.png)

清除过滤器后，我看到了消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-27T12:42:41.730

我也有这个问题。好像我的网页没有更新到新保存的脚本。这可以通过在 chrome 浏览器中按`Ctrl`+ 刷新（或`Ctrl`+ ）来解决。`F5`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-10T02:33:13.563

如果我们想从弹出页面读取打印到控制台的消息，我们可以单击扩展图标打开弹出页面，然后在弹出页面的任意位置右键单击，将显示一个下拉菜单，我们只需单击“检查”菜单即可打开开发者工具。请注意，弹出页面必须保持打开状态。如果它被关闭（通过 window.close()），开发者工具也将被关闭。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-23T18:25:49.090

其他答案适用于 background.js 但是，如果您正在从弹出窗口中寻找 console.logs ，那么您可以尝试：

```
var bkg = chrome.extension.getBackgroundPage();
bkg.console.log('foo'); 
```

我正在使用 cra 进行开发，这对我有用。**

# c# - 如何限制每秒对网络服务器的 HttpWebRequest 数量？

> ID：10257312
> 
> 赞同：7
> 
> 时间：2012-04-21T08:01:34.493
> 
> 标签：c#, httpwebrequest

在使用 HttpWebRequest 向一个应用程序服务器发出并行请求时，我需要实现一种限制机制（每秒请求数）。我的 C# 应用程序必须每秒向远程服务器发出不超过 80 个请求。远程服务管理员施加的限制不是硬限制，而是我的平台和他们的平台之间的“SLA”。

使用 HttpWebRequest 时如何控制每秒的请求数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:28:27.937

我遇到了同样的问题，找不到现成的解决方案，所以我做了一个，就在这里。这个想法是使用 a`BlockingCollection<T>`添加需要处理的项目，并使用 Reactive Extensions 订阅一个限速处理器。

油门类是[这个速率限制器的重命名版本](http://www.pennedobjects.com/2010/10/better-rate-limiting-with-dot-net/)

```
public static class BlockingCollectionExtensions
{
    // TODO: devise a way to avoid problems if collection gets too big (produced faster than consumed)
    public static IObservable<T> AsRateLimitedObservable<T>(this BlockingCollection<T> sequence, int items, TimeSpan timePeriod, CancellationToken producerToken)
    {
        Subject<T> subject = new Subject<T>();

        // this is a dummyToken just so we can recreate the TokenSource
        // which we will pass the proxy class so it can cancel the task
        // on disposal
        CancellationToken dummyToken = new CancellationToken();
        CancellationTokenSource tokenSource = CancellationTokenSource.CreateLinkedTokenSource(producerToken, dummyToken);

        var consumingTask = new Task(() =>
        {
            using (var throttle = new Throttle(items, timePeriod))
            {
                while (!sequence.IsCompleted)
                {
                    try
                    {
                        T item = sequence.Take(producerToken);
                        throttle.WaitToProceed();
                        try
                        {
                            subject.OnNext(item);
                        }
                        catch (Exception ex)
                        {
                            subject.OnError(ex);
                        }
                    }
                    catch (OperationCanceledException)
                    {
                        break;
                    }
                }
                subject.OnCompleted();
            }
        }, TaskCreationOptions.LongRunning);

        return new TaskAwareObservable<T>(subject, consumingTask, tokenSource);
    }

    private class TaskAwareObservable<T> : IObservable<T>, IDisposable
    {
        private readonly Task task;
        private readonly Subject<T> subject;
        private readonly CancellationTokenSource taskCancellationTokenSource;

        public TaskAwareObservable(Subject<T> subject, Task task, CancellationTokenSource tokenSource)
        {
            this.task = task;
            this.subject = subject;
            this.taskCancellationTokenSource = tokenSource;
        }

        public IDisposable Subscribe(IObserver<T> observer)
        {
            var disposable = subject.Subscribe(observer);
            if (task.Status == TaskStatus.Created)
                task.Start();
            return disposable;
        }

        public void Dispose()
        {
            // cancel consumption and wait task to finish
            taskCancellationTokenSource.Cancel();
            task.Wait();

            // dispose tokenSource and task
            taskCancellationTokenSource.Dispose();
            task.Dispose();

            // dispose subject
            subject.Dispose();
        }
    }
} 
```

单元测试：

```
class BlockCollectionExtensionsTest
{
    [Fact]
    public void AsRateLimitedObservable()
    {
        const int maxItems = 1; // fix this to 1 to ease testing
        TimeSpan during = TimeSpan.FromSeconds(1);

        // populate collection
        int[] items = new[] { 1, 2, 3, 4 };
        BlockingCollection<int> collection = new BlockingCollection<int>();
        foreach (var i in items) collection.Add(i);
        collection.CompleteAdding();

        IObservable<int> observable = collection.AsRateLimitedObservable(maxItems, during, CancellationToken.None);
        BlockingCollection<int> processedItems = new BlockingCollection<int>();
        ManualResetEvent completed = new ManualResetEvent(false);
        DateTime last = DateTime.UtcNow;
        observable
            // this is so we'll receive exceptions
            .ObserveOn(new SynchronizationContext()) 
            .Subscribe(item =>
                {
                    if (item == 1)
                        last = DateTime.UtcNow;
                    else
                    {
                        TimeSpan diff = (DateTime.UtcNow - last);
                        last = DateTime.UtcNow;

                        Assert.InRange(diff.TotalMilliseconds,
                            during.TotalMilliseconds - 30,
                            during.TotalMilliseconds + 30);
                    }
                    processedItems.Add(item);
                },
                () => completed.Set()
            );
        completed.WaitOne();
        Assert.Equal(items, processedItems, new CollectionEqualityComparer<int>());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:11:44.440

Throttle() 和 Sample() 扩展方法（On Observable）允许您将快速的事件序列调整为“较慢”的序列。

这是一篇博客文章，其中包含`Sample(Timespan)`确保最大速率[的示例。](http://eprystupa.wordpress.com/2009/12/19/throttling-high-frequency-data-feed-using-reactive-extensions-for-net/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T08:16:38.320

我最初的帖子讨论了如何通过客户端行为扩展向 WCF 添加节流机制，但后来有人指出我误读了这个问题（doh！）。

总体而言，该方法可以是检查确定我们是否违反速率限制的类。已经有很多关于如何检查违规率的讨论。

[N 秒内对 M 个请求的限制方法调用](https://stackoverflow.com/questions/1407113/throttling-method-calls-to-m-requests-in-n-seconds/1407228#1407228)

如果您违反了速率限制，则休眠一个固定间隔并再次检查。如果没有，那么继续进行 HttpWebRequest 调用。

# xslt - 获取属性名称并在 xslt 中进行一些操作

> ID：10257313
> 
> 赞同：2
> 
> 时间：2012-04-21T08:01:35.117
> 
> 标签：xslt, xpath, xslt-1.0

我必须获取属性名称并根据其在 XSLT 中的名称进行一些操作。

来源：

```
<group  xlink:type="simple" xlink:href="XXX" xlink:title="sectionHeader_1" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
<group  xlink:type="simple" xlink:href="YYY" xlink:title="BodyParagraph_1" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
<group  xlink:type="simple" xlink:href="ZZZ" xlink:title="sectionHeader_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
<group  xlink:type="simple" xlink:href="AAA" xlink:title="sectionHeader_3" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
<group  xlink:type="simple" xlink:href="BBB" xlink:title="BodyParagraph_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
<group  xlink:type="simple" xlink:href="BBB" xlink:title="ConditionalText_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group> 
```

我必须在其中获取属性`xlink:title`属性并检查以下内容：

*   当属性 xlink:title 包含字符串 sectionHeader 时，我需要做一些操作。
*   当属性 xlink:title 包含字符串 BodyParagraph 时，我需要进行一些操作。
*   当属性 xlink:title 包含字符串 ConditionalText 时，我需要进行一些操作。

任何人都可以解释它是如何完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:10:00.353

由于您无法使用 XSLT 修改现有 XML 文件的部分内容，因此您必须复制所有内容并更改那些应该不同的部分。因此，我建议编写一个默认复制每个节点的模板。然后，您可以为满足您的条件的组元素添加专门的模板，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xlink="http://www.w3.org/1999/xlink">

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="group[contains(@xlink:title,'sectionHeader')]">
    <group>
      <xsl:copy-of select="@*"/>      
      <!-- modifications here -->
    </group>
  </xsl:template>

  <xsl:template match="group[contains(@xlink:title,'BodyParagraph')]">
    <group>
      <xsl:copy-of select="@*"/>
      <!-- modifications here -->
    </group>
  </xsl:template>

  <xsl:template match="group[contains(@xlink:title,'ConditionalText')]">
    <group>
      <xsl:copy-of select="@*"/>
      <!-- modifications here -->
    </group>
  </xsl:template>  
</xsl:stylesheet> 
```

如果您也想更改属性值，只需将 xsl:copy-of 语句替换为所需的修改即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:18:42.907

**您的源 XML（已完成一些修改）：**

```
<?xml version="1.0"?>
<root>
    <group id="x1" xlink:type="simple" xlink:href="XXX" xlink:title="sectionHeader_1" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group id="x2" xlink:type="simple" xlink:href="YYY" xlink:title="BodyParagraph_1" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group id="x3" xlink:type="simple" xlink:href="ZZZ" xlink:title="sectionHeader_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group id="x4" xlink:type="simple" xlink:href="AAA" xlink:title="sectionHeader_3" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group id="x5" xlink:type="simple" xlink:href="BBB" xlink:title="BodyParagraph_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group id="x6" xlink:type="simple" xlink:href="BBB" xlink:title="ConditionalText_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group id="x7" xlink:type="simple" xlink:href="BBB" xlink:title="some_other_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
</root> 
```

**XSL 文档：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xlink="http://www.w3.org/1999/xlink">

<xsl:template match="/">
    <elements>
        <xsl:apply-templates/>
    </elements>
</xsl:template>

<xsl:template match="//group[(contains(@xlink:title,'sectionHeader') or contains(@xlink:title,'BodyParagraph') or contains(@xlink:title,'ConditionalText'))]">
    <xsl:element name="element">
        <xsl:attribute name="id"><xsl:value-of select="@id"/></xsl:attribute>
        <xsl:attribute name="type"><xsl:value-of select="@xlink:type"/></xsl:attribute>
        <xsl:attribute name="href"><xsl:value-of select="@xlink:href"/></xsl:attribute>
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

**结果：**

```
<?xml version='1.0' ?>
<elements xmlns:xlink="http://www.w3.org/1999/xlink">
    <element id="x1" type="simple" href="XXX"/>
    <element id="x2" type="simple" href="YYY"/>
    <element id="x3" type="simple" href="ZZZ"/>
    <element id="x4" type="simple" href="AAA"/>
    <element id="x5" type="simple" href="BBB"/>
    <element id="x6" type="simple" href="BBB"/>    
</elements> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T15:59:07.593

XSLT 的精神是使用模板和模式匹配，以便将显式条件指令最小化或完全消除。

**这是如何做到的**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xlink="http://www.w3.org/1999/xlink">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="group">
     <xsl:apply-templates select="@xlink:title"/>
 </xsl:template>

 <xsl:template match="@xlink:title[contains(., 'sectionHeader')]">
   Found @xlink:title containing "sectionHeader"
 </xsl:template>

 <xsl:template match="@xlink:title[contains(., 'BodyParagraph')]">
   Found @xlink:title containing "BodyParagraph"
 </xsl:template>

 <xsl:template match="@xlink:title[contains(., 'ConditionalText')]">
   Found @xlink:title containing "ConditionalText"
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 片段**（转换为格式良好的 XML 文档）时：

```
<t>
    <group  xlink:type="simple" xlink:href="XXX" xlink:title="sectionHeader_1" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group  xlink:type="simple" xlink:href="YYY" xlink:title="BodyParagraph_1" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group  xlink:type="simple" xlink:href="ZZZ" xlink:title="sectionHeader_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group  xlink:type="simple" xlink:href="AAA" xlink:title="sectionHeader_3" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group  xlink:type="simple" xlink:href="BBB" xlink:title="BodyParagraph_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
    <group  xlink:type="simple" xlink:href="BBB" xlink:title="ConditionalText_2" xmlns:xlink="http://www.w3.org/1999/xlink"></group>
</t> 
```

**产生了想要的结果（在每种情况下都做了一些事情）**：

```
 Found @xlink:title containing "sectionHeader"

   Found @xlink:title containing "BodyParagraph"

   Found @xlink:title containing "sectionHeader"

   Found @xlink:title containing "sectionHeader"

   Found @xlink:title containing "BodyParagraph"

   Found @xlink:title containing "ConditionalText" 
```

**请注意**：您可以考虑使用`starts-with()`函数而不是`contains()`.

# string - 如何在 C# 中删除值后的小数位？

> ID：10257318
> 
> 赞同：0
> 
> 时间：2012-04-21T08:02:10.293
> 
> 标签：string, c#-4.0, decimal

让我有十进制值，`14.8447`我需要`8447`字符串中的这个值。

任何人都可以使用 Windows Forms C# 为我找到任何方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:03:39.880

你可以使用类似的东西：

```
decimal d = 14.8447m;
string s = d.ToString(CultureInfo.InvariantCulture);
string t = s.Substring( s.IndexOf('.')+1); 
```

（虽然我认为我的代码有点破解）

为了使其更加防错，您可以编写：

```
decimal d = 14.8447m;
string s = d.ToString(CultureInfo.InvariantCulture);

int index = s.IndexOf('.');
string t = index >= 0 && index + 1 < s.Length
       ? s.Substring(index + 1)
       : string.Empty; 
```

这适用于例如以下数字：

```
decimal d = 14m; // Returning empty string.
decimal d = .3m; // Returning "3". 
```

这是[Ideone.com 上的简短在线版本](http://ideone.com/v1IyF)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:15:56.903

string.Format("{0:0.0000}", 14.8447m).Split(',', '.').Last()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T08:19:48.863

可能是这样：

```
decimal Numero = 8.24M;
string r = (Numero - Math.Floor(Numero)).ToString().Replace("0.", ""); 
```

我猜很容易；

# android - 滚动/平移或拖动自定义布局

> ID：10257321
> 
> 赞同：0
> 
> 时间：2012-04-21T08:03:11.310
> 
> 标签：android, android-custom-view, viewgroup, panning

由于我是 Android 新手，因此我已经通过大量研究为缩放制作了自定义相对布局，现在我想合并应该像 Imageview 一样的平移/拖动，即绑定限制。

我没有使用矩阵，而是`ScaleGestureDetector.SimpleOnScaleGestureListener`. 现在我想合并平移/拖动。

如何在我的代码中实现拖动/平移？这是我的自定义相对布局，带有适当的评论和理解。

```
/*
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 *
 *  @description : Custom Layout Zoom
 *
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
*/

package com.layoutzooming;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.GestureDetector.OnGestureListener;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.view.ViewParent;
import android.widget.RelativeLayout;

public class ZoomLayout extends RelativeLayout implements OnDoubleTapListener, OnGestureListener{

    //ScalingFactor i.e. Amount of Zoom
    static float mScaleFactor = 1.0f;

    // Maximum and Minimum Zoom
    private static float MIN_ZOOM = 1.0f;
    private static float MAX_ZOOM = 3.0f;

    //Different Operation to be used
    private final int NONE_OPERATION=0;
    private final int ZOOM_OPERATION=2;
    private float mWidth= 1280;
    private float mHeight=800;

    // Mode to select the operation
    private int mode;

    //Track X and Y coordinate of the finger when it first touches the screen
    private float mInitialX = 0f;
    private float mInitialY = 0f;

    // Track the Bound of the Image after zoom to calculate the offset
    static Rect mClipBound;

    // mDetector to detect the scaleGesture for the pinch Zoom
    private ScaleGestureDetector mDetector;

    // mDoubleTapDetector to detect the double tap
    private GestureDetector mDoubleTapDetector;

    //Pivot point for Scaling
    static float gx=0,gy=0;

    /*
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *  @description : Constructor is called when used via XML
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */

    public ZoomLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        setWillNotDraw(false);
        mClipBound = new Rect();
        // Intialize ScaleGestureDetector
        mDetector = new ScaleGestureDetector(getContext(), new ZoomListener());
        mDoubleTapDetector = new GestureDetector(context,this);
        mDoubleTapDetector.setOnDoubleTapListener(this);
    }

    /*
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *  @description : Constructor is called when used via code
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    public ZoomLayout(Context context) {
        super(context);
        setWillNotDraw(false);
        mClipBound = new Rect();
        // Intialize ScaleGestureDetector
        mDetector = new ScaleGestureDetector(getContext(), new ZoomListener());
        mDoubleTapDetector = new GestureDetector(context,this);
        mDoubleTapDetector.setOnDoubleTapListener(this);
    }

    /*
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *  @description : OnTouchEvent of the layout which handles all type of motion-events possible
    *  @ Returns : true  - we are handling the touchEvent.
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    @Override
    public boolean onTouchEvent(MotionEvent event) {

        // Handles all type of motion-events possible
        switch(event.getAction() & MotionEvent.ACTION_MASK) {

            case MotionEvent.ACTION_DOWN:
                // Event occurs when the first finger is pressed on the Screen

                Log.d("Print", "Event: Action_Down " );
                mInitialX = event.getX();
                mInitialY = event.getY();

                break;

            case MotionEvent.ACTION_POINTER_DOWN:
                //Event occurs when the second finger is pressed down

                Log.d("Print", "Event: Action_Pointer_Down " );
                // If second finger is pressed on the screen with the first set the Mode to Zoom operation
                mode=ZOOM_OPERATION;

                break;

            case MotionEvent.ACTION_UP:
                //Event occurs when all the finger are taken of the screen
                Log.d("Print", "Event: Action_UP " );
                //If all the fingers are taken up there will be no operation
                mode = NONE_OPERATION;

                break;
        }

        // Give the event to the mDetector to get the scaling Factor
        mDetector.onTouchEvent(event);

        // Give the event to the mDoubleTapDetector for the doubleTap
        mDoubleTapDetector.onTouchEvent(event);

        return true;
    }

    /*
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *   @description : By overriding the onInterceptTouchEvent y overriding the onInterceptTouchEvent,
    *   This allows you to watch events as they are dispatched to your children, and
    *   take ownership of the current gesture at any point.  Allowing onTouchEvent of RelativeLayout to handle the
    *   all the motioin events .
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        onTouchEvent(ev);
        return super.onInterceptTouchEvent(ev);

    }

    /*
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *   @descriptiont : invalidateChildInParent
    *
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    @Override
    public ViewParent invalidateChildInParent(int[] location, Rect dirty) {
        return super.invalidateChildInParent(location, dirty);
    }

    /*
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *   @descriptiont : Correctly sets the x,y position of the children relative to each other for different scale factors.
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b)
    {
        int count = getChildCount();
        for(int i=0;i<count;i++){
            View child = getChildAt(i);
            if(child.getVisibility()!=GONE){
                RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)child.getLayoutParams();
                child.layout(
                    (int)(params.leftMargin ),
                    (int)(params.topMargin ),
                    (int)((params.leftMargin + child.getMeasuredWidth()) ),
                    (int)((params.topMargin + child.getMeasuredHeight()))
                    );
            }
        }
    }

    /*
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *   @description : Called by draw to draw the ChildViews. We need to gained control before the children are
    *   drawn so that to apply the scaling Factors
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    @Override
    protected void dispatchDraw(Canvas canvas) {

        //Save the canvas to set the scaling factor returned from detector
        canvas.save(Canvas.MATRIX_SAVE_FLAG);

        canvas.scale(mScaleFactor, mScaleFactor,gx,gy);

        super.dispatchDraw(canvas);

        mClipBound = canvas.getClipBounds();

          canvas.restore();
    }

    /*
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    *
    *   @name : ZoomListener
    *   @description :  Class which defines the listener for ScaleGestureDetector
    *
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    */
    private class ZoomListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            // getting the scaleFactor from the detector
            mScaleFactor *= detector.getScaleFactor(); // Gives the scaling factor from the previous scaling to the current
            //    Log.d("Print", "detector scaling Factor" + mScaleFactor);

            gx = detector.getFocusX();
            gy = detector.getFocusY();
            // Limit the scale factor in the MIN and MAX bound
            mScaleFactor= Math.max(Math.min(mScaleFactor, MAX_ZOOM),MIN_ZOOM);
            //    Log.d("Print", "Bounded scaling Factor" + mScaleFactor);

            /*//Force canvas to redraw itself only if the one event is to happen (say Zooming only ) else do not invalidate here for multi operations
               As what we de for scrolling or panning will not reflect here. So we will add this in onDraw method
            invalidate();*/
             // Here we are only zooming so invalidate has to be done
            invalidate();
            requestLayout();

            // we have handle the onScale
            return true;
        }
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) {
        // Make the mScaleFactor to its normal value
        mScaleFactor=1.0f;
        // Force the canvas to redraw itself again as the changes has been occured.
        invalidate();
        requestLayout();
            return false;
    }

    @Override
    public boolean onDoubleTapEvent(MotionEvent e) {
        //    Log.d("Print", "OnDoubleTapEvent");
            return false;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
        //    Log.d("Print", "OnSingleTap");
            return false;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2,
                           float velocityX, float velocityY) {
        return false;
    }

    @Override
    public void onLongPress(MotionEvent e) {
    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,
                           float distanceX, float distanceY) {
        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) {

    }

    @Override
    public boolean onSingleTapUp(MotionEvent e) {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:57:30.607

我也在做同样的事情。我将以下内容放在 onTouchEvent ACTION_UP 事件中。

```
 if (mScaleFactor > 1)
            {
                gx = gx - (event.getX() - mInitialX);
                gy = gy - (event.getY() - mInitialY);
                invalidate();
                requestLayout();
            } 
```

其中 mScaleFactor、mInitialX、mInitialY 来自 ScaleGestureDetector onScale 函数。缩放运行良好。尽管我无法在布局上选择视图，但一旦按比例放大。有时它有效，有时则无效。

# php - Zend 框架中的 FetchList() 不起作用

> ID：10257323
> 
> 赞同：0
> 
> 时间：2012-04-21T08:03:18.740
> 
> 标签：php, mysql, zend-framework

我需要在 zend frawork 中运行查询。查询如下所示。

```
select * from users where role_id in (3,5) and emailID not in ('abc@abc.com', 'cba@cba.com'); 
```

我正在传递字符串

```
$whereString = role_id in (3,5) and emailID not in ('abc@abc.com', 'cba@cba.com'); 
```

到

```
$this->fetchList($whereString) // where $this is object of users 
```

但是 fetchList() 函数只执行第一部分，即`role_id in (3,5)`

但不是第二部分，即`emailID not in ('abc@abc.com', 'cba@cba.com');`

fetchList() 的结果包含 'abc@abc.com' 和 'cba@cba.com'

fetchList() 是：

```
 public function fetchList($where=null, $order=null, $count=null, $offset=null)
        {
                $resultSet = $this->getDbTable()->fetchAll($where, $order, $count, $offset);
                $entries   = array();
                foreach ($resultSet as $row)
                {
                        $entry = new Application_Model_Users();
                        $entry->setId($row->id)
                              ->setName($row->name)
                              ->setEmail($row->email)
                        $entries[] = $entry;
                }
                return $entries;
        } 
```

获取所有（）：

```
 /**
     * Fetches all rows.
     *
     * Honors the Zend_Db_Adapter fetch mode.
     *
     * @param string|array|Zend_Db_Table_Select $where  OPTIONAL An SQL WHERE clause or Zend_Db_Table_Select object.
     * @param string|array                      $order  OPTIONAL An SQL ORDER clause.
     * @param int                               $count  OPTIONAL An SQL LIMIT count.
     * @param int                               $offset OPTIONAL An SQL LIMIT offset.
     * @return Zend_Db_Table_Rowset_Abstract The row results per the Zend_Db_Adapter fetch mode.
     */
    public function fetchAll($where = null, $order = null, $count = null, $offset = null)
    {
        if (!($where instanceof Zend_Db_Table_Select)) {
            $select = $this->select();

            if ($where !== null) {
                $this->_where($select, $where);
            }

            if ($order !== null) {
                $this->_order($select, $order);
            }

            if ($count !== null || $offset !== null) {
                $select->limit($count, $offset);
            }

        } else {
            $select = $where;
        }
        print_r($select);
        $rows = $this->_fetch($select);

        $data  = array(
            'table'    => $this,
            'data'     => $rows,
            'readOnly' => $select->isReadOnly(),
            'rowClass' => $this->getRowClass(),
            'stored'   => true
        );

        $rowsetClass = $this->getRowsetClass();
        if (!class_exists($rowsetClass)) {
            require_once 'Zend/Loader.php';
            Zend_Loader::loadClass($rowsetClass);
        }
        return new $rowsetClass($data);
    } 
```

任何人都知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T08:58:49.410

我要出去走走，因为我不确定。这感觉可能是报价问题。也许尝试传递您的查询字符串，例如：

```
//use Zend_Db_Statement to process raw SQL.

//get default adapter
$db = Zend_Db_Table::getDefaultAdapter();
//write SQL statement
$sql = "select * from users where role_id in (3,5) and emailID not in ('abc@abc.com', 'cba@cba.com')";
//assuming MySql as DB instantiate object
$stmt = new Zend_Db_Statement_Mysqli($db, $sql);
//Execute SQL Statement accepts optional parameter for array() of values to be bound
$stmt->execute(); 
```

或者您可能想使用 select() 对象构建查询：

```
//get default adapter
$db = Zend_Db_Table::getDefaultAdapter();
//instantiate the select() object
$select = new Zend_Db_Select($db);
$select->from('users');
//two where will build an AND query use $select->orWhere() to build an OR query 
$select->where('role_id in (3,5)');
$select->where("emailID not in ('abc@abc.com', 'cba@cba.com')");
$result = $model->fetchList($select); 
```

如果`$whereString`是一个有效的 PHP 字符串，它可能会起作用，因为`fetchAll()`接受一个字符串或一个实例`Zend_Db_Select`：

$whereString = "role_id in (3,5) and emailID not in ('abc@abc.com', 'cba@cba.com')";

希望这对一些人有所帮助......我开了一枪。

# c - 我可以保持与http服务器的连接吗？

> ID：10257325
> 
> 赞同：1
> 
> 时间：2012-04-21T08:03:51.653
> 
> 标签：c, network-programming

现在我有一个 url 列表，我想找回所有的网页。这是我所做的：

```
 for each url:
     getaddrinfo(hostname, port, &hints, &res);         // DNS
     // create socket 
     sockfd = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
     connect(sockfd, res->ai_addr, res->ai_addrlen);
     creatGET();
     /* for example:
        GET / HTTP/1.1\r\n
        Host: stackoverflow.cn\r\n
        ...
      */
     writeHead();   // send GET head to host
     recv();        // get the webpage content   
end 
```

我注意到许多网址都在同一主机下，例如：

```
 http://job.01hr.com/j/f-6164230.html
 http://job.01hr.com/j/f-6184336.html
 http://www.012yy.com/gangtaiju/32692/
 http://www.012yy.com/gangtaiju/35162/ 
```

所以我想知道，我可以`connect`对每个主机只访问一次，然后`creatGET()`对`writeHead()`每个`recv()`url 访问一次吗？这可能会节省很多时间。所以我像这样改变了我的程序：

```
split url into groups by their host;
for each group:
    get hostname in the group;
    getaddrinfo(hostname, port, &hints, &res);         
    sockfd = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
    connect(sockfd, res->ai_addr, res->ai_addrlen);
    for each url in the group:        
        creatGET();
        writeHead(); 
        recv();
    end
end 
```

不幸的是，我发现我的程序只能返回每个组中的第一个网页，其余的都返回空文件。我错过了什么吗？也许每个 recv() 都`sockfd`需要某种东西？`reset`

谢谢你的慷慨帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:16:47.783

HTTP 1.1 连接是持久的，这意味着在例如 POST/GET - 200 OK 序列之后，下一个请求-响应序列可以重用已经建立的 TCP 连接。
但这不是强制性的。连接可能随时关闭，因此您也应该为此编写代码。

此外，在我看来，您正在尝试实现自己的 HTTP 客户端。
我不确定您为什么要这样做，但无论如何，如果您必须阅读一些关于 HTTP RFC 的内容，以了解各种标头，以确保尽可能长时间地打开底层 TCP 连接。

当然，如果您的服务器是旧的 HTTP1.0，除非通过 keep-alive 标头明确指出，否则您不应期望任何重用连接

# haskell - 如何处理协同递归？

> ID：10257326
> 
> 赞同：17
> 
> 时间：2012-04-21T08:04:12.283
> 
> 标签：haskell, recursion

好的，基本上我很难知道选项 1 或 2 是否适用于以下情况：

```
naturals = 0 : map (+ 1) naturals 
```

选项有：
1\. 执行很糟糕，每一步都重新计算所有内容：

```
naturals     = [0]
naturals'    = 0:map (+ 1) [0]          // == [0, 1]
naturals''   = 0:map (+ 1) [0, 1]       // == [0, 1, 2]
naturals'''  = 0:map (+ 1) [0, 1, 2]    // == [0, 1, 2, 3]
naturals'''' = 0:map (+ 1) [0, 1, 2, 3] // == [0, 1, 2, 3, 4] 
```

2.执行并不糟糕，列表永远是无限的，`map`只应用一次

```
naturals     = 0:something
                                  |
naturals'    = 0:      map (+ 1) (0:      something)
                                    |
naturals''   = 0:1:    map (+ 1) (0:1:    something')
                                      |
naturals'''  = 0:1:2:  map (+ 1) (0:1:2:  something'')
                                        |
naturals'''' = 0:1:2:3:map (+ 1) (0:1:2:3:something''') 
```

`|`指示其`map`执行的位置。

我确实知道答案可能只有*1*或*2*，但我也很感激一些关于共同递归的良好解释的指针，以消除最后的疑问:)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-21T08:38:11.140

正如你所说，执行不会是“可怕的”。:) 懒惰的评价是你最好的朋友。懒惰是什么意思？

1.  在真正需要结果之前，不会对事物进行评估；
2.  事物最多评估一次。

这里的“事物”是“尚未评估的表达式”，也称为“thunk”。

这是发生的事情：

你定义

```
naturals = 0 : map (+1) naturals 
```

仅仅定义`naturals`并不需要评估它，所以最初`naturals`只会指向未评估表达式的 thunk `0 : map (+1) naturals`：

```
naturals = <thunk0> 
```

在某些时候，您的程序可能会在自然值上进行模式匹配。（模式匹配本质上是在 Haskell 程序中强制求值的唯一因素。）也就是说，您的程序需要知道 naturals 是空列表还是后跟一个尾列表的头元素。这是您定义的右侧将被评估的地方，但仅在需要找出是否`naturals`由`[]`or构造时`(:)`：

```
naturals = 0 : <thunk1> 
```

这是 naturals 现在将指向构造函数`(:)`在 head 元素上的应用程序`0`和仍然未评估的尾部的 thunk。（实际上， head 元素也将是未评估的，因此确实`naturals`会指向 form 的某些内容`<thunk> : <thunk>`，但我将省略该细节。）

直到您的程序中的某个稍后点，您可以在尾部进行模式匹配，尾部的 thunk 才被“强制”，即评估。这意味着`map (+1) naturals`要计算表达式。评估这个表达式简化为对 的`map`模式匹配`naturals`：它需要知道是否`naturals`由`[]`或构造`(:)`。我们看到，此时，不是指向 thunk，`naturals`而是已经指向 的应用程序`(:)`，因此这种模式匹配`map`不需要进一步评估。的应用程序`map`确实立即看到足以`naturals`确定它需要生成`(:)`自身的应用程序，因此它确实：`map`生成`1 : <thunk2>`其中 thunk 包含表单的未计算表达式`map (+1) <?>`。（同样，`1`我们实际上有一个 thunk而不是`0 + 1`。）`<?>`指向什么？好吧， 的尾巴`naturals`，恰好`map`是产生的东西。因此，我们现在有

```
naturals = 0 : 1 : <thunk2> 
```

包含`<thunk2>`尚未评估的表达式`map (+1) (1 : <thunk2>)`。

在您的程序的稍后时间点，模式匹配可能会强制`<thunk2>`，因此我们得到

```
naturals = 0 : 1 : 2 : <thunk3> 
```

包含`<thunk3>`尚未评估的表达式`map (+1) (2 : <thunk3>)`。等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T18:30:29.403

我花了一段时间才弄明白，但如果你想找到（比如说）第 10 亿个自然数，

```
n = nats !! 1000000000 
```

您在 1+ 操作中遇到了 thunk 累积。我最终重写了（！！）：

```
nth (x:xs) n = if n==0 then x else x `seq` nth xs (n-1) 
```

我尝试了几种方法来重写 nats 的定义以强制每个元素，而不是写 nth，但似乎没有任何效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T22:17:02.733

```
map f xs = f (head xs) : map f (tail xs)
p0 = 0 : map (+ 1) p0

-- when p0 is pattern-matched against:
p0 = "0" :Cons: "map (+ 1) {p0}"    
-- when (tail p0) is pattern-matched against:
-- {tail p0} := p1,
p1 = "(+ 1) (head {p0})" :Cons: "map (+ 1) (tail {p0})"       
-- when (tail p1) is pattern-matched against:
-- {tail p1} := p2,
p2 = "(+ 1) (head {p1})" :Cons: "map (+ 1) (tail {p1})" 
```

Haskell 的列表很像 Prolog 的开放式列表，并且列表上的共同递归就像尾递归模 cons。一旦您实例化该 logvar - 从某个表达式设置列表的单元格值 - 它只是保持该值准备就绪，不再引用原始上下文。

```
naturals( [A|T] ):- T=[B|R], B=A+1, naturals( T ). % "=" sic! ("thunk build-up") 
```

为了克服 Prolog 的严格性，我们让*未来的访问*驱动流程：

```
naturals( nats(0) ).
next( nats(A), A, nats(B) ):- 
  B is A+1\.                    % fix the evaluation to be done immediately
take( 0, Next, Z-Z, Next).
take( N, Next, [A|B]-Z, NZ):- N>0, !, next(Next,A,Next1),
  N1 is N-1,                
  take(N1,Next1,B-Z,NZ). 
```

Haskell 毫不费力地解决了这个问题，它的“存储”自然是惰性的（即列表构造函数是惰性的，并且列表构造只是通过访问“唤醒”，由语言的本质决定）。

## 使固定

比较这些：

```
fix f = f (fix f)         
fix f = x where x = f x   -- "co-recursive" fix ? 
```

现在，当第一个定义用于以下内容时，您最初的担忧变成了现实：

```
g = fix $ (0:) . scanl (+) 1 
```

它的经验复杂性实际上是二次的，或者更糟。但是对于第二个定义，它应该是线性的。

# iphone - NSTimer 以秒/毫秒为单位减少时间

> ID：10257330
> 
> 赞同：6
> 
> 时间：2012-04-21T08:05:15.537
> 
> 标签：iphone, objective-c, ios5, nstimer

我正在开发一个 QuiZ 应用程序。它需要一个倒数计时器，因为我想在 75:00.00 (mm:ss.SS) 启动一个计时器，并通过减少 1 毫秒将其减少到 00:00.00 (mm:ss.SS)。我想显示 Time UP 的警报！当时间到达 00:00.00 (mm:ss.SS)。

我通过以下链接显示时间

[使用 NSTimer 的秒表错误地在显示中包含暂停时间](https://stackoverflow.com/questions/8101231/stopwatch-using-nstimer-incorrectly-includes-paused-time-in-display)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T09:04:51.793

这是您问题的简单解决方案。

声明

```
@interface ViewController : UIViewController
{
    IBOutlet UILabel * result;      
    NSTimer * timer;                
    int currentTime;
}

- (void)populateLabelwithTime:(int)milliseconds;
-(IBAction)start;
-(IBAction)pause;
@end 
```

定义

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    currentTime = 270000000; // Since 75 hours = 270000000 milli seconds

}

-(IBAction)start{
   timer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(updateTimer:) userInfo:nil repeats:YES];

}
-(IBAction)pause{
    [timer invalidate];

}
- (void)updateTimer:(NSTimer *)timer {
    currentTime -= 10 ;
    [self populateLabelwithTime:currentTime];
     }
- (void)populateLabelwithTime:(int)milliseconds {
    int seconds = milliseconds/1000;
    int minutes = seconds / 60;
    int hours = minutes / 60;

    seconds -= minutes * 60;
    minutes -= hours * 60;

   NSString * result1 = [NSString stringWithFormat:@"%@%02dh:%02dm:%02ds:%02dms", (milliseconds<0?@"-":@""), hours, minutes, seconds,milliseconds%1000];
    result.text = result1;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T08:14:19.150

使用以下代码减少计时器。

```
double dblRemainingTime=60; //1 minute

if(dblRemainingTime >0)
{
     dblRemainingTime -= 1;
     int hours,minutes, seconds;
     hours = dblRemainingTime / 3600;
     minutes = (dblRemainingTime - (hours*3600)) / 60;
     seconds = fmod(dblRemainingTime, 60);  
     [lblRemainingTime setText:[NSString stringWithFormat:@"%02d:%02d",minutes, seconds]];
}
else
      alert('Time up buddy'); 
```

# json - 如何在不全部解析的情况下编辑现有 JSON 文件中的值？

> ID：10257332
> 
> 赞同：2
> 
> 时间：2012-04-21T08:05:36.893
> 
> 标签：json, jackson

我只想编辑现有 JSON 文件中的一个值。

有没有办法在不解析和重写整个文件的情况下做到这一点？（我使用 Jackson Streaming API 来生成和解析文件，但我不确定 Streaming API 可以做到这一点）。

我的*Example.json*文件包含以下内容：

```
{ 
"id" : "20120421141411",
"name" : "Example",
"time_start" : "2012-04-21T14:14:14"
} 
```

给出的示例：我想将“名称”的值从“示例”编辑为“其他名称”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T02:52:53.310

从来没听说过; 无论是在 JSON 级别，还是在文件级别——除非值的长度恰好完全相同，否则底层文件系统通常需要从更改点重写文件的其余部分。

您可以使用 Streaming API 读取和写入文件，随时随地替换值；请参阅`JsonGenerator.copyCurrentEvent(jp)`以简化任务——它只是按原样复制输入事件。对于除了替换特定值之外的所有内容，您都可以调用它；并且为了价值，可以调用`JsonGenerator.writeString()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T05:49:50.173

如果文件很小并且您要替换的输入值是唯一的“足够”，并且您对快速和肮脏的态度持开放态度，请使用 apache commons-exec 或其他东西来解决：

```
bash$> echo '{ 
        "id" : "20120421141411",
        "name" : "Example",
        "time_start" : "2012-04-21T14:14:14"
    }' | sed -e 's/Example/othername/' 
```

输出：

```
{ 
    "id" : "20120421141411",
    "name" : "othername",
    "time_start" : "2012-04-21T14:14:14"
} 
```

`cat file | sed ...`如果您知道文件的路径，请使用。

如果您真的想就地编辑文件，只写入您想要更改的那些字节，那么只有当您正在写入的数据不会覆盖文件中的后续数据时才有可能。使用上述解决方案之一会更好。

假设 JSON 文件很大（>1GB？），那么这种技术有意义吗？不，你到底在用这么大的 JSON 文件做什么？分开吧！但为了辩论...

您真的很想这样做，因此您连接到 JSON 解析器以跟踪文件中的字节偏移量，并能够将其绑定回表示您将要操作的 JsonNode 的对象。此时您可能最终会编写自己的解析器；JSON 语法有意简单。然后你只需打开文件，跳到那个偏移量，然后写入 JsonNode 数据......除非它会覆盖它之后的东西（你是否在每个值之后用空间缓冲区预先填充文件，以防万一？嗯？ ...这听起来像是一个数据库问题）。在这种情况下，您最终将重写文件的整个其余部分，因为较大的值会将其他所有内容“向下推”。如果编辑总是在文件末尾附近，这没什么大不了的。但如果它们是随机的，你的表现就注定了。您将成为序列化写入的瓶颈。

# c++ - 在构造函数中记录 this 的值是否安全

> ID：10257334
> 
> 赞同：1
> 
> 时间：2012-04-21T08:05:41.713
> 
> 标签：c++, constructor, this

我正在跟踪构造函数及其被破坏的实例，为此我计划在构造函数和析构函数中记录“this”的值。我不知道在构造函数中记录“this”的值是否安全。如果它不安全，那么我不想知道它会失败的场景？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T08:08:08.443

如果通过“记录”您的意思是“将值作为例如十六进制地址写入日志文件”，那么它很好且安全。如果不是，请澄清。

在构造函数调用完成之前，对象不会完全构造。`this`所以在此之前（即从构造函数中）发布到程序的其余部分是不安全的。因为这可能会导致有人试图实际使用半构造的对象。这可能会导致微妙且难以发现的错误。

发布`this`可能意味着以下情况之一：

*   将其作为参数传递给外部（非成员）函数，
*   将其存储在其他对象可用的数据结构中，
*   （为了完整起见：从函数调用中返回它——这不适用于这种特定情况，因为你不能从构造函数返回任何东西）。

因此，将文件的地址写入`this`文件不会将其发布到程序的其余部分*，所以应该没问题。

*[好吧，除非你之后做一些非常神秘的事情，比如在不同的线程/进程中从文件中加载地址并将其转换回对象指针......这本身就已经足够不安全了 :-)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:09:54.223

为什么你会认为它不安全？事实上，只要这些对象是有效的，记录任何对象的地址就没有什么不同。

总而言之，它在您打算使用它的场景中是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T08:27:15.463

首先分配内存，然后`this`设置内存，然后调用构造函数。所以你可以`this`在构造函数期间使用，因为它指向正确的位置 - 构造不会改变`this`。但是，如果构造失败（抛出），内存将消失并且指向的值`this`将是垃圾，因此您不应该存储它并将其用于构造函数之外的任何内容，直到您知道构造将成功。

# mysql - 为mysql数据库排序v archar字段

> ID：10257337
> 
> 赞同：0
> 
> 时间：2012-04-21T08:06:02.523
> 
> 标签：mysql

尝试对以下 TEAM_TOTAL 列 Desc 进行排序

```
MATCHID     TEAM_TOTAL        
 ----------  ----------------- 
 573         Total   112       
 573         Total  2 for  115 
 574         Total  9 for  97  
 574         Total  2 for  100 
 575         Total  9 for  129 
 575         Total  9 for  101 
 576         Total  4 for  191 
 576         Total  9 for  160 
 577         Total  8 for  157 
 577         Total  7 for  137 
 578         Total  6 for  193 
 578         Total   119 
```

但问题是 TEAM_TOTAL 是 varchar，有没有单独查询的方法我可以得到按 desc 排序的结果。在那一栏中还有一段文字。我没有想法来解决这个问题

结果应该像下面的结果集

```
 MATCHID     TEAM_TOTAL        
  ----------  ----------------- 
  578         Total  6 for  193
  576         Total  4 for  191  
  576         Total  9 for  160 
  577         Total  8 for  157 
  577         Total  7 for  137
  575         Total  9 for  129
  578         Total   119 
  573         Total  2 for  115 
   573         Total   112 
  575         Total  9 for  101
  574         Total  2 for  100
  574         Total  9 for  97 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:41:54.573

试试这个：

```
select * from t
order by substring(
    team_total, locate('for', team_total) + 
        if(locate('for', team_total) > 0, 4, 7))+0 desc 
```

[在这里](http://sqlfiddle.com/#!2/82086/1)拉小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:23:41.773

尝试提取整数（最后一个空格后的字符串）：

```
-- 'Total 112' - extracts 112
SELECT SUBSTRING('Total  112', LENGTH('Total  112') - LOCATE(' ', REVERSE('Total  112'))); 

-- 'Total  6 for  193' - extracts 193
SELECT SUBSTRING('Total  6 for  193', LENGTH('Total  6 for  193') - LOCATE(' ', REVERSE('Total  6 for  193'))); 
```

现在，您可以将该字符串转换为数字，然后按其排序。

```
SELECT * FROM teams
ORDER BY
CAST(SUBSTRING(TEAM_TOTAL, LENGTH(TEAM_TOTAL) - LOCATE(' ', REVERSE(TEAM_TOTAL))) AS INT) DESC 
```

# python - python生成的字符串中出现意外的空格

> ID：10257340
> 
> 赞同：1
> 
> 时间：2012-04-21T08:06:24.637
> 
> 标签：python, formatting

我正在使用 Python 生成一个由很长的行组成的 ASCII 文件。这是一个示例行（假设文件中的第 100 行，我添加了“[...]”以缩短该行）：

```
{6 1,14 1,[...],264 1,270 2,274 2,[...],478 1,479 8,485 1,[...]} 
```

如果我打开用 ipython 生成的 ASCII 文件：

```
f = open('myfile','r')
print repr(f.readlines()[99]) 
```

我确实获得了正确打印的预期行（我添加了“[...]”以缩短行）：

```
'{6 1,14 1,[...],264 1,270 2,274 2,[...],478 1,479 8,485 1,[...]}\n' 
```

相反，如果我用应该读取它的程序打开这个文件，它会产生一个异常，在 478 1 之后抱怨一个意外的对。所以我尝试用*vim*打开文件。*vim*仍然显示没有问题，但是如果我复制*vim*打印的行并将其粘贴到另一个文本编辑器中（在我的情况下为*TextMate*），这就是我获得的行（'[...]' 由我添加到缩短线）：

```
{6 1,14 1,[...],264 1,270      2,274 2,[...],478 1,4     79 8,485 1,[...]} 
```

这条线在 478 1 之后确实有问题。我尝试以不同的方式生成我的线（连接，与 cStringIO，...），但我总是得到这个结果。例如，当使用 cStringIO 时，生成的行如下所示（即使我也尝试更改它，但没有运气）：

```
def _construct_arff(self,attributes,header,data_rows):
  """Create the string representation of a Weka ARFF file.
     *attributes* is a dictionary with attribute_name:attribute_type
       (e.g., 'num_of_days':'NUMERIC')
     *header* is a list of the attributes sorted
       (e.g., ['age','name','num_of_days'])
     *data_rows* is a list of lists with the values, sorted as in the header
       (e.g., [ [88,'John',465],[77,'Bob',223]]"""

  arff_str = cStringIO.StringIO()
  arff_str.write('@relation %s\n' % self.relation_name)

  for idx,att_name in enumerate(header):
    try:
      name = att_name.replace("\\","\\\\").replace("'","\\'")
      arff_str.write("@attribute '%s' %s\n" % (name,attributes[att_name]))
    except UnicodeEncodeError:
      arff_str.write('@attribute unicode_err_%s %s\n' 
                     % (idx,attributes[att_name]))

  arff_str.write('@data\n')
  for data_row in data_rows:
    row = []
    for att_idx,att_name in enumerate(header):
      att_type = attributes[att_name]
      value = data_row[att_idx]
      # numeric attributes can be sparse: None and zeros are not written
      if ((not att_type == constants.ARRF_NUMERIC)
          or not ((value == None) or value == 0)):
        row.append('%s %s' % (att_idx,value))
    arff_str.write('{' + (','.join(row)) + '}\n')
  return arff_str.getvalue() 
```

**更新**：从上面的代码可以看出，该函数将给定的数据集转换为特殊的 arff 文件格式。我注意到我创建的属性之一包含作为字符串的数字（例如，'1'，而不是 1）。通过将这些数字强制转换为整数：

```
features[name] = int(value) 
```

我成功地重新创建了 arff 文件。但是我看不出这是一个值如何影响 *att_idx* 的格式，它始终是一个整数，正如@JohnMachin 和 @gnibbler 所指出的那样（谢谢你的回答，顺便说一句） . 所以，即使我的代码现在运行，我仍然不明白为什么会发生这种情况。*如果没有正确转换为int* ，该值如何影响其他内容的格式？

[此文件](http://db.tt/7rJt9bYU)包含格式错误的版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T08:41:15.847

内置函数[repr](http://docs.python.org/library/functions.html#repr)是你的朋友。它将明确地向您显示文件中的内容。

做这个：

```
f = open('myfile','r')
print repr(f.readlines()[99]) 
```

并编辑您的问题以显示结果。

更新：至于它是如何到达那里的，这是不可能的，因为**它不可能是由您显示的代码生成的**。该值`37`应该是来自 att_idx 的值，`enumerate()`因此必须是 int。您正在用 %s 格式化这个 int ... 37 不能成为`3rubbish7`. 这也应该按 0、1 等顺序生成 att_idx，但是您缺少许多值，并且循环内没有任何条件。

**请向我们展示您实际运行的代码。**

**更新**：

再一次，这段代码不会运行：

```
for idx,att_name in enumerate(header):
    arff_str.write("@attribute '%s' %s\n" % (name,attributes[att_name])) 
```

因为`name`没有定义；你可能的意思是`att_name`。

也许我们可以缩短所有这些填充物：将输出文件的副本（如果它很大，则压缩）在网络上的某个地方，这样我们就可以亲眼看到可能会干扰其消费者的内容。请编辑您的问题以说明问题所在的行。

顺便说一句，您说某些数据是字符串而不是整数，如果您`int`通过执行强制数据来解决问题`features[name] = int(value)`......什么是“特征”？什么名字'？？

这些字符串`unicode`中的任何一个都不是`str`吗？

**更新 2（在网络上发布错误文件后）**

没有提供关于哪条线路出现问题的信息。事实证明，没有任何行显示出属性 479 所描述的问题。我编写了这个检查脚本：

```
import re, sys
# sample data line:
# {40 1,101 3,319 2,375 2,525 2,530 bug}
# Looks like all data lines end in ",530 bug}" or ",530 other}"
pattern1 = r"\{(?:\d+ \d+,)*\d+ \w+\}$"
matcher1 = re.compile(pattern1).match
pattern2 = r"\{(?:\d+ \d+,)*"
matcher2 = re.compile(pattern2).match
bad_atts = re.compile(r"\D\d+\s+\W").findall
got_data = False
for lino, line in enumerate(open(sys.argv[1], "r"), 1):
    if not got_data:
        got_data = line.startswith('@data')
        continue
    if not matcher1(line):
        print
        print lino, repr(line)
        m = matcher2(line)
        if m:
            print "OK up to offset", m.end()
            print bad_atts(line) 
```

示例输出（包装在第 80 列）：

```
581 '{2 1,7 1,9 1,12 1,13 1,14 1,15 1,16 1,17 1,18 1,21 1,22 1,24 1,25 1,26 1,27
 1,29 1,32 1,33 1,36 1,39 1,40 1,44 1,48 1,49 1,50 1,54 1,57 1,58 1,60 1,67 1,68
 1,69 1,71 1,74 1,75 1,76 1,77 1,80 1,88 1,93 1,101 ,103 6,104 2,109 20,110 3,11
2 2,114 1,119 17,120 4,124 39,128 5,137 1,138 1,139 1,162 1,168 1,172 18,175 1,1
76 6,179 1,180 1,181 2,185 2,187 9,188 8,190 1,193 1,195 2,196 4,197 1,199 3,201
 3,202 4,203 5,206 1,207 2,208 1,210 2,211 1,212 5,213 1,215 2,216 3,218 2,220 2
,221 3,225 8,226 1,233 1,241 4,242 1,248 5,254 2,255 1,257 4,258 4,260 1,266 1,2
68 1,269 3,270 2,271 5,273 1,276 1,277 1,280 1,282 1,283 11,285 1,288 1,289 1,29
6 8,298 1,299 1,303 1,304 11,306 5,308 1,309 8,310 1,315 3,316 1,319 11,320 5,32
1 11,322 2,329 1,342 2,345 1,349 1,353 2,355 2,358 3,359 1,362 1,367 2,368 1,369
 1,373 2,375 9,377 1,381 4,382 1,383 3,387 1,388 5,395 2,397 2,400 1,401 7,407 2
,412 1,416 1,419 2,421 2,422 1,425 2,427 1,431 1,433 7,434 1,435 1,436 2,440 1,4
49 1,454 2,455 1,460 3,461 1,463 1,467 1,470 1,471 2,472 7,477 2,478 11,479 31,4
82 6,485 7,487 1,490 2,492 16,494 2,495 1,497 1,499 1,501 1,502 1,503 1,504 11,5
06 3,510 2,515 1,516 2,517 3,518 1,522 4,523 2,524 1,525 4,527 2,528 7,529 3,530
 bug}\n'
OK up to offset 203
[',101 ,']

709 '{101 ,124 2,184 1,188 1,333 1,492 3,500 4,530 bug}\n'
OK up to offset 1
['{101 ,'] 
```

所以看起来属性`att_idx == 101`有时可以包含空字符串`''`。您需要理清如何处理此属性。如果你解开这个拜占庭代码，它会帮助你思考：

```
 if ((not att_type == constants.ARRF_NUMERIC)
      or not ((value == None) or value == 0)): 
```

*旁白：“脏话删除”的代码不会运行；它应该是 ARFF，而不是 ARRF*

进入：

```
if value or att_type != constants.ARFF_NUMERIC: 
```

或者也许只是`if value:`过滤掉所有`None`,`0`和`""`. 请注意，这`att_idx == 101`对应于在 ARFF 文件头中赋予 STRING 类型的属性“priority”：

```
[line 103] @attribute 'priority' STRING 
```

顺便说一句，您关于`features[name] = int(value)`“解决”问题的说法非常可疑；`int("")`引发异常。

它可以帮助您阅读本 wiki 部分末尾[关于稀疏 ARFF 文件](http://weka.wikispaces.com/ARFF+%28stable+version%29#Sparse%20ARFF%20files)的警告。

# ios - 在 iOS 上，可以在没有在 drawRect 中完成的情况下绘制一些东西吗？

> ID：10257347
> 
> 赞同：0
> 
> 时间：2012-04-21T08:08:34.330
> 
> 标签：ios, cocoa-touch, uiview

比如说，对于一个 iOS 应用程序，如果用户在屏幕上滑动手指，则会记录 50,000 个点。如果对 中的所有这些点都完成了绘制`drawRect`，那么下次用户触摸第 50,001 个点时，`touchesMoved`在下一行的末尾

```
[self.view setNeedsDisplay]; 
```

将导致`drawRect`再次运行并再次绘制所有 50,001 个点。因此，对于每 1 个新点（对于任何新的手指移动），所有 50,001 个点都需要重新绘制，这不是一种有效的方法。

我尝试只画最后一个点`drawRect`，它不会“添加到”现有视图，而是“擦除所有内容”然后画一个点。

有没有办法

1）无需`drawRect`调用就可以画出1个额外的点？
2）或者，可以`drawRect`在不先擦除整个屏幕的情况下多画一个点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:21:27.847

看看方法`-(void)setNeedsDisplayInRect:`。您可以要求您的视图重绘其自身的指定矩形，但在实现`drawRect:`方法时要小心 - 您需要假设传递的 rect 参数只是您视图的整个矩形的一部分，并且您的绘图逻辑可能会有所不同。你也可以考虑`clearContextBeforeDrawing`UIView 的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T08:31:33.230

一种方法是在触摸结束时渲染到图像中，然后在生成更多路径时继续添加到图像中。如果需要并撤消缓冲区或需要重新生成图形，您可以将路径存储在数组中。

（显然，您将需要比这更多的代码）

```
 UIGraphicsBeginImageContextWithOptions(size, NO, 1.0);
 CGContextRef context = UIGraphicsGetCurrentContext();
 // do some drawing
 UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
 UIGraphicsEndImageContext(); 
```

哦-fwiw，我发现`setNeedsDisplayInRect:`在 iOS5 中很奇怪/错误。第一次调用它是全视图矩形，而不是作为参数传入的矩形。至少这是我在尝试使用它时发现的。也许我忽略了一些实现细节。

# ruby - 为什么我在尝试抓取 reddit Json 文件时会出现此错误？

> ID：10257350
> 
> 赞同：1
> 
> 时间：2012-04-21T08:08:54.813
> 
> 标签：ruby, json, reddit

我正在尝试编写一个 Ruby 程序，该程序将从 Json 文件中检索所有 reddit 用户名。我可以让它显示列表，但是每次第一个用户名之后都会出错。

```
require 'net/http'
require 'rubygems'
require 'json'
require 'pp'

@response = Net::HTTP.get(URI.parse("http://www.reddit.com/r/AskReddit/comments/sl1nn  /could_codeine_help_me_sleep_is_it_dangerous/.json"))
result = JSON.parse(@response)

comments = result[1]['data']['children']  #this is now an array of comment hashes

(0..comments.length).each do |i|
 comment = comments[i]['data']  
 puts comment['author']
end 
```

虽然它显示列表，但我也收到此错误：

**在`block in <main>': undefined method`[]' 中为 nil:NilClass (NoMethodError)**

有谁知道我可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:17:14.113

我的猜测是一个错误。

```
a = [1, 2, 3, 4, 5]
(0..a.length).map { |n| a[n] }
# => [1, 2, 3, 4, 5, nil] 
```

这是因为

```
(0..5).to_a
# => [0, 1, 2, 3, 4, 5] 
```

为了不包含在内，您应该使用`...`，即：

```
(0...comments.length).each do |i| 
```

更好的是，由于 comments 是一个数组，你可以这样做：

```
comments.each do |comment|
  puts comment["data"]["author"]
end 
```

# c# - 解析希腊十进制数

> ID：10257351
> 
> 赞同：0
> 
> 时间：2012-04-21T08:09:08.540
> 
> 标签：c#, cultureinfo

我有以下代码：

```
decimal kwh = decimal.Parse(textBox1.Text, 
                            NumberStyles.AllowDecimalPoint, 
                            NumberFormatInfo.CurrentInfo);

decimal sale_price = decimal.Parse(textBox2.Text, 
                                   NumberStyles.AllowDecimalPoint, 
                                   NumberFormatInfo.CurrentInfo); 

decimal totalamnt = sale_price * kwh; 
```

我的问题是，当区域设置设置为希腊语时，它不接受小数点后的任何数字，当您使用“，”输入时

我尝试`InvariantInfo`使用“。”输入小数，但它再次不接受它们。

有趣的是，当您进入控制面板 -> 区域和语言 -> 附加设置时，您可以设置小数点所需的运算符和千位运算符。如果您将小数点符号设置为“.”.......一切正常。

无论您使用 InvariantInfo 并将其输入为“.”，还是您使用 CurrentInfo 并将其输入为“,”

这让我发疯，我尝试了很多方法，不仅是 Parse 方法，而且解决它的唯一方法是将十进制符号设置为“。”但我不能只是改变人们的区域设置，因为我可能会搞砸其他希腊语他们正在使用的软件。

请人们帮助我..我对计算机上的希腊语失去了理智。我真的很感激和感谢任何可以帮助我解决这个问题的人

（我将我的区域设置设置为希腊语）插入语句我将 0.25 作为 sale_price 和 5.26 作为 kwh 导入。我正在使用断点，我看到变量的值是 0.25 和 1.2 使用 InvariantInfo。当它们存储在数据库中时，它们存储为 0 和 5。当我在区域设置中设置小数运算符“。”而不是“，”时，我导入 0.25 和 5.65，它们被正确存储。当我将区域设置设置为 English Us 并插入 0.25 和 5.65 时，它们已正确存储

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T04:45:38.520

string ammount = (textBox2.Text).Replace (",",".");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T11:33:18.750

如果您想避免在代码中更改每个 ToDecimal() 或 decimal.Parse() 等函数的麻烦，请尝试在应用程序的最开始执行以下代码，然后再加载任何表单。

```
Application.CurrentCulture = System.Globalization.CultureInfo.CreateSpecificCulture("en-US") 
```

# emacs - 右 ALT 键在 emacs 中不能用作元键

> ID：10257352
> 
> 赞同：3
> 
> 时间：2012-04-21T08:09:19.153
> 
> 标签：emacs, archlinux

我已经`emacs -Q`在控制台（`Ctrl`++ `Alt`）中启动了 emacs（ `F1`）。“左键`Alt`”有效，而“右键`Alt`”无效。如何解决问题。我在archlinux上运行emacs

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:08:26.510

此行为由您使用的键盘布局控制。在您使用的布局中，左边的 alt 是`Meta`，而右边的 alt 是`Alt-graphic`允许您输入重音字符。**将您的键盘布局更改**为不使用正确的 alt 作为`Alt-graphic`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T15:16:22.080

解决方案在这里描述：http:
[//www.joshstaiger.org/archives/2005/04/fixing_the_righ.html](http://www.joshstaiger.org/archives/2005/04/fixing_the_righ.html)

不过，它需要一些修改（参见下面的第 3.2 项）。否则，在第一次按下 . 之后，将无法在当前控制台中输入任何内容`[Right Alt]`。如果这发生在您身上，请切换到其他控制台（例如`[Ctrl+Alt+F2]`）并恢复旧的键盘映射。

以下是修改后的解决方案的简要说明：

1.  将当前键盘映射保存到文件：
    `dumpkeys >> mykmap`
    并对其进行备份：
    `cp mykmap oldkmap`
2.  `[Right Alt]`使用`showkey`命令捕获键码。让我们假设它是`100`.
3.  编辑`mykmap`：
    1.  找到对应的行：
        `keycode 100 = AltGr`
        并将其更改为：
        `keycode 100 = Alt`
    2.  如果下一行（或下一行之一）是：
        `alt keycode 100 = Compose`
        删除它。
4.  加载新的键盘映射：
    `loadkeys mykmap`
5.  使更改永久化（例如，将最后一个命令添加到 ~/.bashrc）。

# delphi - Delphi XE2 VCL 样式，更改窗口图标不会在标题栏上更新，直到 RecreateWnd

> ID：10257353
> 
> 赞同：5
> 
> 时间：2012-04-21T08:09:23.607
> 
> 标签：delphi, styles, delphi-xe2, vcl

VCL 样式的另一个奇怪故障：

更改表单的图标只会更新其任务栏按钮，除非您使用 RecreateWnd，否则标题中的图标不会更新。（使用 VCL 样式时）

```
ImageList3.GetIcon(0,Form1.Icon); 
```

有没有办法在不使用 RecreateWnd 的情况下修复它？（这实际上会产生[其他问题](https://stackoverflow.com/questions/10009842/delphi-xe2-vcl-styles-weird-glitch-window-invisible)）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T14:56:01.420

这是 VCL 样式中的（又一个）错误。该`TFormStyleHook.GetIconFast`函数正在返回一个陈旧的图标句柄。我会通过替换来修复`TFormStyleHook.GetIconFast`它`TFormStyleHook.GetIcon`。将此添加到您的一个单位中，一切都很好。

```
procedure PatchCode(Address: Pointer; const NewCode; Size: Integer);
var
  OldProtect: DWORD;
begin
  if VirtualProtect(Address, Size, PAGE_EXECUTE_READWRITE, OldProtect) then
  begin
    Move(NewCode, Address^, Size);
    FlushInstructionCache(GetCurrentProcess, Address, Size);
    VirtualProtect(Address, Size, OldProtect, @OldProtect);
  end;
end;

type
  PInstruction = ^TInstruction;
  TInstruction = packed record
    Opcode: Byte;
    Offset: Integer;
  end;

procedure RedirectProcedure(OldAddress, NewAddress: Pointer);
var
  NewCode: TInstruction;
begin
  NewCode.Opcode := $E9;//jump relative
  NewCode.Offset := NativeInt(NewAddress)-NativeInt(OldAddress)-SizeOf(NewCode);
  PatchCode(OldAddress, NewCode, SizeOf(NewCode));
end;

type
  TFormStyleHookHelper = class helper for TFormStyleHook
    function GetIconFastAddress: Pointer;
    function GetIconAddress: Pointer;
  end;

function TFormStyleHookHelper.GetIconFastAddress: Pointer;
var
  MethodPtr: function: TIcon of object;
begin
  MethodPtr := Self.GetIconFast;
  Result := TMethod(MethodPtr).Code;
end;

function TFormStyleHookHelper.GetIconAddress: Pointer;
var
  MethodPtr: function: TIcon of object;
begin
  MethodPtr := Self.GetIcon;
  Result := TMethod(MethodPtr).Code;
end;

initialization
  RedirectProcedure(
    Vcl.Forms.TFormStyleHook(nil).GetIconFastAddress,
    Vcl.Forms.TFormStyleHook(nil).GetIconAddress
  ); 
```

# windows-phone-7 - 从库中访问应用程序本地化资源 (resx)

> ID：10257354
> 
> 赞同：3
> 
> 时间：2012-04-21T08:09:25.047
> 
> 标签：windows-phone-7, c#-4.0, localization, resources, shared-libraries

我在这里看到了建议的解决方案：[从 Silverlight 类库访问应用程序中的 resx，](https://stackoverflow.com/questions/8384851/access-resx-in-application-from-silverlight-class-library/10257261#10257261) 它适用于资源本身。

我的问题略有不同：

1.  我有 2 个使用相同库的应用程序。它们是本地化的，所以我有一个资源文件夹，在应用程序的文件夹中有 AppResource.resx、AppResource.it-IT.resx 文件
2.  我有一个包含 XAML 文件和代码的库。它是本地化的，所以我有一个资源文件夹，在应用程序的文件夹中有文件 LibResource.resx、LibResource.it-IT.resx
3.  该应用程序正在使用 MvvmLight 库。正如建议的那样，我在 ViewModelBaseExtended 中扩展了 ViewModelBase 类，添加了以下字段：

```
public class ViewModelBaseExtended : ViewModelBase
{
    private static LibResources resources = new LibResources();
    public LibResources Resources { get { return resources; } }
} 
```

4.  库中的 XAML 能够正确访问本地化资源：

```
<phone:PhoneApplicationPage x:Class="PhoneClassLibrary1.MainPage"
           DataContext="{Binding Main, Source={StaticResource Locator}}">

<StackPanel x:Name="TitlePanel"
Grid.Row="0"
Margin="24,24,0,12">
           <TextBlock x:Name="ApplicationTitle"
                Text="{Binding Resources.AppName}"
                Style="{StaticResource PhoneTextNormalStyle}" />
           <TextBlock x:Name="PageTitle"
                Text="{Binding Resources.LocalLib}"
                Margin="-3,-8,0,0"
                Style="{StaticResource PhoneTextTitle1Style}" />
</StackPanel> 
```

我的问题是：如何从库中访问应用程序中的 AppResources？我不能直接引用它们 Namespace.AppResources 因为库是在应用程序之间共享的，并且在设计时没有定义命名空间并且在运行时没有更改。

我有一个完整的项目准备好使用确切的配置进行测试，文件 etxc.. 除了从库到应用程序级别的访问之外，所有这些都可以工作。

应用我在开头提到的解决方案：

```
private static AppResources _gResources;
public AppResources gResources { set {_gResources = value;}  get { return _gResources; } }

public ViewModelBaseExtended()
{
    var assembly = Application.Current.GetType().Assembly;
    var ast = assembly.FullName;
    char[] delimit = new char[] { ',' };
    string[] parts = ast.Split(delimit);

    gResources = new System.Resources.ResourceManager(parts[0]+ ".AppResources", assembly);
} 
```

我没有正确编译错误，因为 gResources 是 AppResource（或 LibResource）类，而 ResourceManager 返回不同的对象。

# spring - 跨请求保留 url 参数

> ID：10257357
> 
> 赞同：1
> 
> 时间：2012-04-21T08:10:25.920
> 
> 标签：spring, spring-mvc, url-parameters

我正在使用 Spring MVC。要求某些用户选择保持全局并始终在 url 参数中。我也可以随意用代码删除它。

Spring MVC是否有类似持久页面数据（如 Tapestry [http://tapestry.apache.org/persistent-page-data.html ）的东西。](http://tapestry.apache.org/persistent-page-data.html)

一个未回答的类似问题的链接：http: [//osdir.com/ml/java.appfuse.user/2005-08/msg00507.html](http://osdir.com/ml/java.appfuse.user/2005-08/msg00507.html) 谢谢

*更新*

最终我使用了一种简单的技术，其中： 1\. 我将使用查询参数捕获当前页面 url。2\. 在这个 url 中添加或替换新参数。

```
<c:set var="contextPath" value="${pageContext.request.contextPath}"></c:set>
<c:set var="servletPath" value="${requestScope['javax.servlet.forward.servlet_path']}"></c:set>
<c:set var="currentPath" value="${contextPath}${servletPath}"></c:set>

<a href="${fn:replaceUrlParameter(currentPath,'age','1') }">ageone</a> 
```

其中 replaceUrlParameter() 使用正则表达式替换或添加查询参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:15:25.813

将此参数保留在会话中并编写 Servlet 过滤器，将它们添加到任何请求或修改请求 URL，以便它们在 URL 中可见。

# entity-framework - 如何使用 Entity Framework 和 EntityState.Modified 更新不是对象的每个字段

> ID：10257360
> 
> 赞同：38
> 
> 时间：2012-04-21T08:11:49.727
> 
> 标签：entity-framework, entity-framework-4.1

我需要为给定的实体对象更新除 property1 和 property2 之外的所有字段。
有这个代码：

```
 [HttpPost]
    public ActionResult Add(object obj)
    {
        if (ModelState.IsValid)
        {
                context.Entry(obj).State = System.Data.EntityState.Modified;

                context.SaveChanges();               
         }
        return View(obj);
    } 
```

如何更改它以向 obj.property1 和 obj.property2 添加异常，以便不使用此代码进行更新？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-22T20:38:28.253

假设您有一组要排除的属性：

```
var excluded = new[] { "property1", "property2" }; 
```

使用 .NET 4.5 上的 EF5，您可以执行以下操作：

```
var entry = context.Entry(obj);
entry.State = EntityState.Modified;
foreach (var name in excluded)
{
    entry.Property(name).IsModified = false;
} 
```

这在 .NET 4.5 上使用了 EF5 的一项新功能，该功能允许将属性设置为未修改，即使之前已将其设置为已修改。

在 .NET 4 上使用 EF 4.3.1 或 EF5 时，您可以改为：

```
var entry = context.Entry(obj);
foreach (var name in entry.CurrentValues.PropertyNames.Except(excluded))
{
    entry.Property(name).IsModified = true;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-21T12:06:22.760

你不能定义这样的例外。但是，您可以将单个属性标记为已修改：

```
context.Entry(obj).Property(o => o.Property3).IsModified = true;
context.Entry(obj).Property(o => o.Property4).IsModified = true;
// etc. 
```

请注意，一旦您将整个实体的状态标记为 ，则不支持设置`IsModified`为。`false``Modified`

出于您的目的，我实际上更喜欢从数据库中加载实体，然后使用正常的更改跟踪对其进行更新：

```
var objInDB = context.Objects.Single(o => o.Id == obj.Id);

obj.Property1 = objInDB.Property1;
obj.Property2 = objInDB.Property2;

context.Entry(objInDB).CurrentValues.SetValues(obj);

context.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-19T18:15:36.123

这个问题已经很好地回答了，但我想为任何想使用它的人提供一个扩展方法。

此代码是为 EF 4.3.1 开发的

```
//You will need to import/use these namespaces    
using System.Data.Entity;
using System.Data.Entity.Infrastructure;    

//Update an entity object's specified columns, comma separated
//This method assumes you already have a context open/initialized
public static void Update<T>(this DbContext context, T entityObject, params string[] properties) where T : class
{
    context.Set<T>().Attach(entityObject);

    var entry = context.Entry(entityObject);

    foreach(string name in properties)
        entry.Property(name).IsModified = true;

    context.SaveChanges();
} 
```

**使用示例**

```
using (FooEntities context = new FooEntities())
{
    FooEntity ef = new FooEntity();

    //For argument's sake say this entity has 4 columns: 
    //    FooID (PK), BarID (FK), Name, Age, CreatedBy, CreatedOn

    //Mock changes
    ef.FooID = 1;
    ef.Name = "Billy";
    ef.Age = 85;

    context.Update<FooEntity>(ef, "Name", "Age"); //I only want to update Name and Age
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-20T07:11:35.820

这是适用于 .net CORE 的更新，也许可以帮助需要通用解决方案并希望根据不同条件排除某些属性的人。

我正在使用反射来遍历属性并根据其属性值进行更新，在这种情况下，例如，我排除了空属性。

```
 public virtual TEntity Update(TEntity entity)
    {
        dbSet.Attach(entity);
        dbContext.Entry(entity).State = EntityState.Modified;

        var entry = dbContext.Entry(entity);

        Type type = typeof(TEntity);
        PropertyInfo[] properties = type.GetProperties();
        foreach (PropertyInfo property in properties)
        {
            if (property.GetValue(entity, null) == null)
            {
                entry.Property(property.Name).IsModified = false;
            }
        }

        dbContext.SaveChanges();
        return entity;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-27T10:06:31.703

上面的答案（大多数）使用 DbContext。对于那些使用 ObjectContext 的人来说，这些解决方案是不可访问的。

这是**ObjectContext**严格的解决方案（*EF5 .NET 4.5*）：

```
ctx.AddObject("ENTITYNAME", item);
ctx.ObjectStateManager.ChangeObjectState(item, EntityState.Modified);

var entry = ctx.ObjectStateManager.GetObjectStateEntry(item);
entry.RejectPropertyChanges("PROPERTY_TO_EXCLUDE"); 
```

# javascript - 使用 Javascript 克隆选择选项并将它们存储在隐藏字段中

> ID：10257363
> 
> 赞同：0
> 
> 时间：2012-04-21T08:12:29.947
> 
> 标签：javascript, clone, hidden-field

我有一个包含 3 个选择选项值的表格；airdate_year、airdate_month 和 airdate_day。还有一个名为 episode_airdate[] 的隐藏字段来存储所有 3。这里的问题是表 tr 是使用 javascript 克隆的，因此这些值没有正确发送到 episode-airdate，有什么想法吗？

这是我用来组合 3 个选择值以生成隐藏字段值的脚本。

```
 <script>
            function datepopulate(){
        var day = document.getElementById('airdate_day').value;
        var month = document.getElementById('airdate_month').value;
        var year = document.getElementById('airdate_year').value;
       var completedate = day+'-'+month+'-'+year;
       document.getElementById('episode_airdate[]').value = completedate;
          alert(document.getElementById('episode_airdate[]').value);
       return true;
    }

    </script> 
```

php

```
<table id="template" style="display: none;" cellpadding="0px 20px" cellspacing="0px 20px">
    <tr class="line">
        <td width="100%">

        <p>
        <label><?php _e('Season:'); ?></label>
              <?php

                for($i=1; $i<=50; $i++)
                    $season_nums[]=$i;

                echo '<select name="episode_season[]" select id="episode_season[]" class="season regular-text" style="width:50px; float:left; margin-right:10px;">';
                    echo '<option value="">' . __("0" ) . '</option>';
                    foreach($season_nums as $season_num){
                        $selected = '';
                        echo '<option value="' . $season_num . '" ' . $selected . '>' . $season_num . '</option>';
                    }
                echo '</select>';
                ?>
        </p>

        <label><?php _e('Episode:'); ?></label>
        <p>
              <?php

                for($i=1; $i<=50; $i++)
                    $episode_nums[]=$i;

                echo '<select name="episode_number[]" select id="episode_number[]" class="number regular-text" style="width:50px; float:left;">';
                    echo '<option value="">' . __("0" ) . '</option>';
                    foreach($episode_nums as $episode_num){
                        $selected = '';
                        echo '<option value="' . $episode_num . '" ' . $selected . '>' . $episode_num . '</option>';
                    }
                echo '</select>';
                ?>
        </p>

        <label><?php _e('Title:'); ?></label>
        <p>
          <input type="text" name="episode_title[]" id="episode_title[]" value="" class="title regular-text" style="width:400px;" />
        </p>    

        <label><?php _e('Airdate'); ?></label>
        <p>
<script>
        function datepopulate(){
    var day = document.getElementById('airdate_day').value;
    var month = document.getElementById('airdate_month').value;
    var year = document.getElementById('airdate_year').value;
   var completedate = day+'-'+month+'-'+year;
   document.getElementById('episode_airdate[]').value = completedate;
      alert(document.getElementById('episode_airdate[]').value);
   return true;
}

</script>
    <?php

                for($i=1910; $i<=2012; $i++)
                    $years[]=$i;

                echo '<select id="airdate_year" onChange="javascript:datepopulate();" style="width:50px; float:left; margin-right:10px;">';
                    echo '<option value="">' . __("2012" ) . '</option>';
                    foreach($years as $year){
                        $selected = '';
                        echo '<option value="' . $year . '" ' . $selected . '>' . $year . '</option>';
                    }
                echo '</select>';

                for($i=1; $i<=12; $i++)
                    $months[]=$i;

                echo '<select id="airdate_month" onChange="javascript:datepopulate();" style="width:50px; float:left; margin-right:10px;">';
                    echo '<option value="">' . __("0" ) . '</option>';
                    foreach($months as $month){
                        $selected = '';
                        echo '<option value="' . $month . '" ' . $selected . '>' . $month . '</option>';
                    }
                echo '</select>';

                for($i=1; $i<=31; $i++)
                    $days[]=$i;

                echo '<select name="airdate_day" id="airdate_day" onChange="javascript:datepopulate();"  style="width:50px; float:left; margin-right:10px;">';
                    echo '<option value="">' . __("10" ) . '</option>';
                    foreach($days as $day){
                        $selected = '';
                        echo '<option value="' . $day . '" ' . $selected . '>' . $day . '</option>';
                    }
                echo '</select>';
                ?> 
        <input type="hidden" name="episode_airdate[]" id="episode_airdate[]"  class="airdate regular-text" value="">

        </p>

         <p>
        <label><?php _e('Plot:'); ?></label>
          <textarea name="episode_plot[]" id="episode_plot[]" class="plot regular-text"value="" cols="100%" rows="10" tabindex="4" ><?php echo $_POST['episode_season'] ?></textarea>
        </p>
        </td>

        <td width="10%" class="commands">
            <a rel="delete" class="button">-</a> <a rel="add" class="button">+</a>
        </td>
    </tr>
</table>

<table id="attachments" style="border-spacing: 0px 30px;">

</table>

<script>
(function($)
{
    lines = 0;

    function items_init()
    {
        <?php $episodes = get_post_meta($post->ID, 'episodes', true) ?> 

        <?php if ( empty($episodes) ) : ?>                
        items_add();
        <?php else: ?>

        <?php 
        // Get serialized data
        $episodes = unserialize($episodes);

    // Compare episode numbers  
          function compare_number($a, $b) {
    if ($a['season'] == $b['season']) {
        return $b['number'] - $a['number'];    }

    return strnatcmp($b['season'], $a['season']);
  }

  // Sort by episode number 
  usort($episodes, 'compare_number');

        // Show episodes
        foreach ($episodes as $episode) :
         ?>
        items_add({
            title: '<?php echo base64_decode($episode['title']) ?>', 
            airdate:   '<?php echo $episode['airdate'] ?>',
            season:   '<?php echo $episode['season'] ?>',
            number:   '<?php echo $episode['number'] ?>',
            plot:   '<?php echo base64_decode($episode['plot']) ?>',

        });
        <?php endforeach ?>
        <?php endif ?>

        // Delete the "-" button in first row
        $('#attachments tr:first-child .commands a[rel="delete"]').remove();
    }

    function items_add()
    {
        obj = $('#template tr').clone().appendTo('#attachments');
        lines++;

        if (arguments.length > 0) {
            options = arguments[0];

            $('.title', obj).val( options.title );
            $('.airdate',   obj).val( options.airdate );
            $('.season',   obj).val( options.season );
            $('.number',   obj).val( options.number );
            $('.plot',   obj).val( options.plot );
        }
    }

    $('#attachments').delegate('.commands a', 'click', function()
    {
        var action = $(this).attr('rel');
        var confirm_delete = true;

        // Add action
        if ('add' == action) {
            items_add();
        }

        // Delete action
        if ('delete' == action) {
            // La TR en la tabla
            var oTr = $(this).parent().parent();
            var episode_name = $('.title', oTr).val();
            var episode_airdate = $('.airdate', oTr).val();
            var episode_season = $('.season', oTr).val();
            var episode_number  = $('.number', oTr).val();
            var episode_plot  = $('.plot', oTr).val();

            if (episode_name != '' || episode_number != '' || episode_plot != '') {
                if ( !confirm('Are you sure you want to delete ' + episode_name + '?') ) {
                    confirm_delete = false;
                }
            }

            if (confirm_delete) {
                oTr.next().remove(); oTr.remove();
                lines--;
            }
        }
    });

    $(document).ready(function()
    {
        items_init();
    });

})(jQuery);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:06:09.353

由于文档包含多个**episode_airdate[]**元素，您不能使用*document.GetElementById*，但您可以使用不同的选择器。查看 DOM 的结构，似乎**airdate_year**、**airdate_month**和**airdate_day**都是目标元素的兄弟姐妹。所以在这种情况下，JQuery *nextAll*函数应该可以工作： [http ://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

```
$(this).nextAll("#episode_airdate[]").attr('value', completedate);
alert($(this).nextAll("#episode_airdate[]").attr('value')); 
```

# javascript - 如何结合JS函数日期格式？

> ID：10257365
> 
> 赞同：1
> 
> 时间：2012-04-21T08:12:41.647
> 
> 标签：javascript

我有一个关于如何将 JS 函数日期格式与以下 2 格式结合的问题：

```
<code class="jsdemo">$('#validMinMaxDatepicker').datepicker({dateFormat: 'yy-mm-dd'});</code>

<code class='jsdemo'>$('#validMinMaxDatepicker').datepicker({minDate: -14, maxDate: -1});</code> 
```

感谢您的帮助。谢谢。

# ios - 通过 UiControls 过滤 CoreData 记录的最佳实践

> ID：10257367
> 
> 赞同：1
> 
> 时间：2012-04-21T08:13:05.187
> 
> 标签：ios, core-data, uibutton, nspredicate

我正在构建一个应用程序，用户可以在其中根据 4 个参数过滤一组照片：

[模型 http://seismicdevelopment.com/shot.png](http://seismicdevelopment.com/shot.png)

FeedType 和 PhotoType 可以分别是三个可能的值之一。Market 和 Tag 可以包含描述照片的多个值。我有 UI 设置，其中 FeedType/PhotoType 是每个参数的一系列 UISwitches。如果您打开一个值，该组中的其他值将关闭。

市场/标签具有可以选择/正常的 UIButtons。任何选定的按钮都应添加到过滤中以缩小结果范围。

我似乎无法弄清楚我应该如何编写最有效的过滤逻辑。基本上在任何控制更改上，我都需要重写谓词过滤器，但我似乎无法理解如何将单独的参数过滤器链接在一起。

对于标签/市场，我还想为没有记录的 UIButtons 添加禁用状态，或者基于当前选择的按钮没有记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T11:10:29.407

在不知道参数类型的情况下很难说出精确的建议，但是，据我所知，您需要有四个变量，更有可能是 NSStrings，并且每次用户更改参数时，您都会创建一个新的通过以正确的格式附加所有变量来获取谓词。这就是我一般的看法。

# 更新

因此，使用 Market 和 Tag 按钮，一切都非常明显 - 你应该使用`NSCompondPredicate`. 您将需要一组谓词，因此请创建一个属性。

```
@property (strong) NSMutableArray *subpredicates; 
```

然后，每次用户触摸按钮时，您都会添加或删除该缩小谓词。

```
- (void)tagButtonTouched:(UIButton *)button
{
    if (thisTagIsNotYetSelected)
        [subpredicates addObject:[NSPredicate predicateWithFormat:@"ANY tags.name == %@", button.titleLabel.text]];//or some other predicate based on that button title
    else
        [subpredicates removeObject:[NSPredicate predicateWithFormat:@"ANY tags.name == %@",button.titleLabel.text] ]];
} 
```

同样的事情`Markets`

```
 - (void)marketButtonTouched:(UIButton *)button
 {
     if (thisMarketIsNotYetSelected)
         [subpredicates addObject:[NSPredicate predicateWithFormat:@"ANY markets.name == %@", button.titleLabel.text]];//or some other predicate based on that button title
     else
         [subpredicates removeObject:[NSPredicate predicateWithFormat:@"ANY markets.name == %@",button.titleLabel.text] ]];
 } 
```

您还应该添加两个变量，我猜，`NSPredicates`或者`NSString`，它们将保存选定的值`FeedType`，让`PhotoType`我们分别调用它们。当用户触摸这些开关时（为什么不使用分段控件？），您只需更改它们的值。`feedTypePredicate``photoTypePredicate`

最后，您应该将所有这些谓词组合成一个并进行获取！

```
if(photoTypePredicate)
    [subpredicates addObject:photoTypePredicate];
if(feedTypePredicate)
    [subpredicates addObject:feedTypePredicate];
NSPredicate *finished = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates];//Your final predicate 
```

# android - Android - 通过 ID 或 TAG 在多个图像视图上切换可见/不可见

> ID：10257368
> 
> 赞同：0
> 
> 时间：2012-04-21T08:13:15.247
> 
> 标签：android, imageview

我有四个图像视图，它们在活动开始时（或者更确切地说在行膨胀时）设置为不可见。我想按下一个按钮，让它们都变得可见（并且随后可以作为 onclicks 操作......）。我有以下摘要代码，但是每当我尝试访问除最后一个以外的任何其他图像视图时，我都会不断收到错误消息。

```
public class xx {

    private ImageView up;
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // Log.i(TAG, "excersizeAdapter getView");
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row, null);
            }

            Excersize e = items.get(position);
            if (e != null) {
                TextView exTitle      = (TextView) v.findViewById(R.id.ex_type_title);
                TextView exOn         = (TextView) v.findViewById(R.id.ex_on_title);
                TextView exRestAmount = (TextView) v.findViewById(R.id.ex_rest_amount);
                TextView exSequence   = (TextView) v.findViewById(R.id.ex_sequence);

                up                    = (ImageView) v.findViewById(R.id.moveup);
                down                  = (ImageView) v.findViewById(R.id.movedown);

                if (exTitle !=null) {
                    exTitle.setText(e.getTypeTitle());
                }

                if (exOn !=null) {
                    exOn.setText("On: "+e.getTypeOn());
                }

                if (exRestAmount !=null) {
                    exRestAmount.setText(e.getRestAmount().toString());
                }

                if (exSequence !=null) {
                    exSequence.setText(e.getSequence().toString());
                    up.setTag(8881);
                    down.setTag(8882);

                    up.setId(((Integer)e.getSequence()));
                    down.setId(((Integer)e.getSequence()));

                    Log.i(TAG, "up,down values=" +e.getSequence());
                }
            }
            return v;
        }
    }

    public void toggleReorderButtons() {
        up.findViewById(2).setVisibility(View.VISIBLE);
        up.setVisibility(View.VISIBLE);
        up.setOnClickListener(this);
    }
} 
```

好的，这是精简的代码，但是在 makevisinvis 方法中`up.findview...`它会导致崩溃，并且 up.setvis 等将仅打开添加到我的活动中的最后一个。

我也尝试了以下但没有成功。

```
ImageView upper = (ImageView) up.findViewById(2);
upper.setVisibility(View.VISIBLE); 
```

一个可爱的错误转储：

```
04-21 09:10:55.650: W/dalvikvm(22392): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
04-21 09:10:55.675: E/AndroidRuntime(22392): FATAL EXCEPTION: main
04-21 09:10:55.675: E/AndroidRuntime(22392): java.lang.NullPointerException
04-21 09:10:55.675: E/AndroidRuntime(22392):     at com.mediabarltd.digittrainer.ProgramDisplay.toggleReorderButtons(ProgramDisplay.java:437)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at com.mediabarltd.digittrainer.ProgramDisplay.onClick(ProgramDisplay.java:391)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at android.view.View.performClick(View.java:2538)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at android.view.View$PerformClick.run(View.java:9152)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at android.os.Handler.handleCallback(Handler.java:587)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at android.os.Looper.loop(Looper.java:130)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at java.lang.reflect.Method.invokeNative(Native Method)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at java.lang.reflect.Method.invoke(Method.java:507)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-21 09:10:55.675: E/AndroidRuntime(22392):     at dalvik.system.NativeStart.main(Native Method) 
```

它需要一些认真的外观和对我正在做的事情的彻底改造。但...

基本上我遵循教程*[Android ListView 和 ListActivity](http://www.vogella.com/articles/AndroidListView/article.html#listview_adaptermodel)*，然后实现了*[Android ListView Adapter OnClickListener issue](https://stackoverflow.com/questions/4461134/android-listview-adapter-onclicklistener-issue/4461244#comment13203799_4461244)*中描述的简洁“技巧” 。

（我真的很难接受这个。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:17:17.260

您必须为 ImageView 提供一个 ID，例如

```
android:id="@+id/some_name" 
```

然后像这样找到它：

```
up.findViewById(R.id.some_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:27:09.037

您定义`up`为类成员并在每次`getView`调用时重新初始化它 - 因此它始终指向创建的最后一个图像视图。另外，我不确定调用 : 是否正确，`findViewById`而是`up`将其设置在`OnClickListener`内部`getView`，并在单击时在其所属的布局中查找所需的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:06:44.343

用这个：

```
int i = (int) up.getTag();
if (i == 8881) {
    //Do something here
} 
```

# iphone - 如何将 NSMutableArray 转换为 NSString？

> ID：10257370
> 
> 赞同：5
> 
> 时间：2012-04-21T08:13:42.770
> 
> 标签：iphone, objective-c, ios, nsmutablearray, nsarray

我正在尝试将（或复制？） a`NSMutableArray`转换为`NSString`. 我想我的问题是我不太了解 a 的结构`NSString`。转换后，我想将其附加到电子邮件正文中。这是我的代码：

```
- (IBAction)sendEmail
{
    NSLog(@"sendEmail");
    [textView resignFirstResponder];
    [textView1 resignFirstResponder];
    if ([MFMailComposeViewController canSendMail])
    {
        // set the sendTo address
        NSMutableArray *recipients = [[NSMutableArray alloc] initWithCapacity:1];
        [recipients addObject:@"example@yahoo.com"];
        MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
        controller.mailComposeDelegate = self;
        [controller setSubject:@"Iphone Game"];
        NSString *string = [string appendString:[NSString stringWithFormat:"%@", [viewArray objectAtIndex:i]]];
        [controller setMessageBody:string isHTML:NO];
        [controller setToRecipients:recipients];
        [self presentModalViewController:controller animated:YES];
        [controller release];
    }
    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
 message:@"Your device is not set up for email." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T09:15:37.390

EDIT:

after reading your comment, it is pretty much clear that what you are trying to do is archiving/unarchiving an array containing objects of various kinds. So, you should try using:

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:array]; 
```

to get an `NSData` object that you can then send as an attachment with an email message (or in whatever other persistency layer you need).

Keep in mind that this approach will work only if the objects stored in the array support the `NSCoding` protocol (you can check that in the reference for each type you are using: it clearly lists all the supported protocols). Considered that you say that your object are already stored as NSData, there should be no problem. Just archive the array, so you will be able to unarchive it later, if required.

If you have some custom type that does not support `NSCoding`, you will need to implement it as described in [Encoding and Decoding Objects](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Tasks/codingobjects.html).

OLD ANSWER:

I am not sure I understand your problem, but what about using [`componentsJoinedByString:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/componentsJoinedByString%3a)

E.g.:

```
NSString *string = [viewArray componentsJoinedByString:@"\n"]; 
```

Doing like this, the content of your array (provided it is made of strings) will be presented as a list of strings. If you use `description`, your array will be converted into a string without giving you much control on its format (it will add curly braces and other syntactic sugar).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T09:32:04.823

我怀疑您想要做的是在其中的所有元素上创建一个循环`viewArray`并将它们附加到 NSString `string`。但是，正如@sergio 所建议的那样，我认为`componentsJoinedByString`这是一个更好的选择。

这就是您的方法在进行更改后的样子，我还清理了该方法的其他一些部分。`recipients`您的原始版本中似乎存在内存泄漏。

```
- (IBAction)sendEmail
{
    NSLog(@"sendEmail");

    [textView resignFirstResponder];

    [textView1 resignFirstResponder];

    if ([MFMailComposeViewController canSendMail])
    {
        // set the sendTo address
        NSArray *recipients = [NSArray arrayWithObject:@"example@yahoo.com"];

        MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
        controller.mailComposeDelegate = self;

        [controller setSubject:@"Iphone Game"];

        NSString *string = [viewArray componentsJoinedByString:@"\n"];

        [controller setMessageBody:string isHTML:NO];

        [controller setToRecipients:recipients];

        [self presentModalViewController:controller animated:YES];
        [controller release];

    }
    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                        message:@"Your device is not set up for email." 
                                                       delegate:self 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles: nil];

        [alert show];

        [alert release];
    }

} 
```

这将组合 的元素并在每个元素之间`viewArray`放置一个换行符。`\n`您可以将 替换为`@"\n"`或`@""`完全`@" "`取决于您想要做什么。如果数组的元素不是`NSString`s，`description`则将调用 elements 方法并将其输出用于结果字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T09:15:15.987

Depends on the format you'd like your string to have. You could always use the array's description like this:

```
NSString *myString = [myArray description]; 
```

# java - 如何分离 Hibernate 对象的持久属性

> ID：10257375
> 
> 赞同：0
> 
> 时间：2012-04-21T08:14:14.250
> 
> 标签：java, hibernate

我在 Hibernate 中有一个对象，其中包含一些延迟加载的`many-to-one`列。我不一定需要将对象与数据库一起保存以进行一组操作。

我如何直接获取一个对象，这样每次我尝试访问多对一实体时，它都不需要从数据库中懒惰地获取，并且我可以检索值（如果它不是最新的也没关系）有一个会话打开。

现在我正在打开会话，创建一个新对象并将其发送给要执行的操作。

```
// Hibernate class
public class Foo {
   private Long id;

   //many-to-one mapping
   private Bar barObj;

   //getters and setters
} 
```

现在，每当我打电话时，都会`fooObj.getBarObj().getId()`对服务器进行代理调用以获取 ID 的值。我不希望发生此呼叫，并希望将`fooObj`其保存在本地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:20:36.940

您可以使用“fetch=FetchType.EAGER”注释参数，也可以使用您明确说“join fetch barObj”的查询来获取。第三，您可以[编写一些代码](http://candrews.integralblue.com/2009/03/hibernate-deep-deproxy/)来实现*深度代理*。这可能最适合您的需求，即使远非微不足道。

# delphi - Delphi：设置为自动隐藏时如何显示托盘图标气球而不显示任务栏

> ID：10257377
> 
> 赞同：2
> 
> 时间：2012-04-21T08:15:09.483
> 
> 标签：delphi, taskbar, trayicon

使用 ShowBalloonHint 时，如何避免在设置为自动隐藏时弹出任务栏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T22:04:46.290

Windows 中的通知区域具有定义的行为。您可以希望它的行为有所不同，但这并不能改变您想做的事情无法完成的事实。

很抱歉给您带来不便。

* * *

一个接近的解决方法是`TOOLTIP`自己创建一个窗口，并将其放置在您认为用户通知区域可能位于的屏幕上：

*   右下角
*   右上
*   左下方
*   主监视器
*   辅助监视器

这将涉及使用

*   `GetSystemMetrics(SM_CXFULLSCREEN)`
*   `GetSystemMetrics(SM_CYFULLSCREEN)`
*   `SystemParametersInfo(SPI_GETWORKAREA)`

然后创建一个`TOOLTIPS_CLASS`窗口：

```
 FHandle := CreateWindow(TOOLTIPS_CLASS, PChar(''),
            WS_POPUP or TTS_BALLOON,
            Integer(CW_USEDEFAULT), Integer(CW_USEDEFAULT),
            Integer(CW_USEDEFAULT), Integer(CW_USEDEFAULT),
            0, 0, HInstance,
            nil); 
```

然后你会向它发送`TTM_SETTITLE`, `TTM_UPDATETIPTEXT`,`TTM_TRACKPOSITION`消息，最后是重要时刻: `TTM_TRACKACTIVATE`:

![在此处输入图像描述](../Images/c8172459087c97cc816a775dd1b54479.png)

然后某个时候，您通过另一个调用来隐藏工具提示`TTM_TRACKACTIVATE`。

* * *

您可以自由地[遵循 Windows 用户体验指南](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511497.aspx)，也可以自己动手。

# ios - EKRecurrenceRule 不起作用

> ID：10257379
> 
> 赞同：1
> 
> 时间：2012-04-21T08:15:43.203
> 
> 标签：ios, calendar, icalendar, eventkit, ekeventkit

我遵循了许多教程并查看了文档，并认为我有正确的代码，但它仍然不想再次出现。任何想法将不胜感激。我的代码如下。谢谢。

```
 EKRecurrenceEnd *endRecurrence = [EKRecurrenceEnd recurrenceEndWithOccurrenceCount:14];

    EKRecurrenceRule *rule = [[EKRecurrenceRule alloc] initRecurrenceWithFrequency:EKRecurrenceFrequencyWeekly interval:1 end:endRecurrence];

    NSMutableArray *rules = [[NSMutableArray alloc] init];

    [rules arrayByAddingObject:rule];

    event.recurrenceRules = rules; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T00:53:56.157

我相信你这样做的方式是这样的：（我添加了一个案例，如果你想摆脱任何已经存在的规则）

```
NSArray* rulesArray = [event recurrenceRules];

for (EKRecurrenceRule* rule in rulesArray) [event removeRecurrenceRule:rule];

EKRecurrenceEnd *endRecurrence = [EKRecurrenceEnd recurrenceEndWithOccurrenceCount:14];

    EKRecurrenceRule *rule = [[EKRecurrenceRule alloc] initRecurrenceWithFrequency:EKRecurrenceFrequencyWeekly interval:1 end:endRecurrence];

    [event addRecurrenceRule:rule]; 

    [rule release]; 
```

然后如果需要，只需添加另一个

# ios - 弹出框控制器与 SplitViewController 的菜单弹出框

> ID：10257384
> 
> 赞同：0
> 
> 时间：2012-04-21T08:16:19.723
> 
> 标签：ios, ipad

我使用浮动弹出框在我的 UI 中呈现建议。当用户想要从 splitview 控制器的菜单栏中选择一个项目时，第一次点击只会关闭弹出框。因此，用户必须点击两次才能激活菜单项。

![这是在行动](../Images/fb5b0946343a8b113c202f7e0366c01d.png)

如果用户想要激活垃圾桶，他必须点击它两次。一次关闭另一个弹出窗口，一次激活垃圾桶。

避免这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:37:28.517

在这里疯狂猜测 - 但也许`passThroughViews`- 添加按钮视图，然后在按钮操作中，关闭弹出框（需要确定它是否处于活动状态）。有点hacky，但可以工作。

# web-services - Servlet 过滤器作为 Web 服务的安全代理

> ID：10257385
> 
> 赞同：2
> 
> 时间：2012-04-21T08:16:37.433
> 
> 标签：web-services, security, jakarta-ee

美好时光。

假设一个应用程序中有 8 个 Web 服务。其中 5 个需要授权（客户端必须提供 JSESSIONID cookie，并且相应的 session 不能失效），其他 3 个可以在没有 jsessionid cookie 的情况下调用。我天真的解决方案是编写一个 servlet 过滤器来拦截请求并检索它们的 pathInfos（所有服务都具有相同的 url 结构： /service/ **serviceSuffix**）。有一个包含**serviceSuffix的枚举**每个需要授权的 Web 服务。检索请求时，将收集 pathInfo；如果此 pathInfo 包含在枚举中并且存在相应的有效会话，则请求将提前发送到过滤器链。否则，将错误发送回客户端。过了一会儿，我意识到需要添加检索具体服务的 wsdl 和 xsds 的可能性。因此，又添加了两个检查。

```
public class SecurityFilter implements Filter {

public static final String WSDL = "wsdl";
public static final String XSD = "xsd=";

/**
 * Wittingly left empty
 */
public void init(FilterConfig filterConfig) throws ServletException {}

public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {        HttpServletRequest servletRequest = (HttpServletRequest) request;
    HttpServletResponse servletResponse = (HttpServletResponse)response;
    String pathInfo = servletRequest.getPathInfo();
    String queryString = servletRequest.getQueryString();

    if (pathInfo != null && SecureWebServices.contains(pathInfo)) {
        if (queryString != null && (queryString.equals(WSDL) || queryString.startsWith(XSD))) {
            // wsdl or xsd is requested
            chain.doFilter(request, response);

        } else {
            // a web service's method is called
            HttpSession requestSession = servletRequest.getSession(false);
            if (requestSession != null) { // the session is valid
                chain.doFilter(request, response);
            } else {
                servletResponse.sendError(HttpServletResponse.SC_UNAUTHORIZED);
                return;
            }
        }
    } else {
        chain.doFilter(request, response);
    }
}

/**
 * Wittingly left empty
 */
public void destroy() {}

} 
```

看起来不是很安全，因为如果请求的pathInfo不在枚举中，这个请求就会被传递下去（以防一些意外的系统调用）。

**请您建议做什么，如何提高安全级别**。我想构建一个可配置的系统（这就是我有枚举的原因。可以只在其中添加一个路径来保护 Web 服务，并且不需要在每个 Web 服务中复制安全代码）。如何增加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:01:19.643

也许我不明白，但是。

jsessionid 与安全无关。你只是得到它。

接下来我不确定您是否需要身份验证或授权。提供的代码不会为您提供安全功能。

我想你无论如何都对身份验证感兴趣。可以通过标准 Web 容器功能提供安全逻辑。只需在请求标头中发送身份验证数据即可。可以将 web 容器配置为仅保护选定的资源 (url)

# actionscript-3 - 如何解决“加载的代码中不允许使用本机方法”错误

> ID：10257387
> 
> 赞同：1
> 
> 时间：2012-04-21T08:16:43.530
> 
> 标签：actionscript-3, air, blackberry-playbook, playbook

我想让我的应用程序在剧本处于待机模式时运行声音，我把这个语句放在启动中

```
QNXSystem.system.inactivePowerMode = QNXSystemPowerMode.THROTTLED; 
```

现在，当我在模拟器（不是桌面调试器）上调试应用程序时，我收到了这个错误

```
VerifyError: Error #1079: Native methods are not allowed in loaded code. 
```

我在使用 AlertDialog 时也遇到了这个错误。

注意：我使用的是 Flash builder，并且我已将 qnx SWC 放在库路径中。....那么解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:14:14.537

为了允许使用原生扩展编译的代码在模拟器上运行，我们必须将使用原生扩展的代码放在永远不会执行的方法中（在模拟器上时）。

仅仅将有问题的代码包装在 if/else 块中是不够的。if/else 需要调用另一个方法，该方法要么具有本机版本，要么具有代码的模拟器版本。

例如：

```
private function showNativeOrFlexAlert(message:String):void
{
    // we used the Capabilities class to determine this, might be a better way
    if (isMobile)
        showNativeAlert(message);
    else
        showFlexAlert(message);
}

// have to be careful here, this method signature CANNOT include
// any classes from native extension -- no errors on device, but fails on simulator
private function showNativeAlert(message:String):void
{
    // use native API to show alert
}
private function showFlexAlert(message:String):void
{
    // use the Flex Alert class
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:31:44.257

将 qnx-air.swc 链接设置为“外部”。

# c++ - C++ - 字符数组和空字符

> ID：10257394
> 
> 赞同：3
> 
> 时间：2012-04-21T08:17:21.477
> 
> 标签：c++, arrays, chat, null-character

我有两个关于 char 数组的问题。

1.  从下面的代码中，既然`arr`是`const`，为什么编译器不给我一个错误，因为我正在重写它？

    ```
    char arr[5]; // arr is a const pointer to (*)[5] array
    cin>>arr; // 
    ```

2.  当我像这样初始化一个 char 数组时：

    ```
    char arr[5]={'h','i'}; 
    ```

    如果我这样做：

    ```
    cout << arr << "something here \n"; 
    ```

    它会打印`hisomething here`。我以为它应该打印出来

    ```
    hi   something here 
    ```

    有 3 个空位。

    但如果我这样做：

    ```
    for(int i = 0; i < 5; i++){
      cout << arr[i];
    } 
    ```

    它将*打印*出 3 个空格。

第二种情况似乎证明编译器没有添加任何空字符。那么编译器如何忽略这 3 个空格呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T08:19:35.863

1.  这个数组不是`const`，因为没有`const`限定符。
2.  如果您没有在初始化列表中指定剩余值，它们将被初始化为`0`. `0`用于终止 C 字符串，而不是作为空格。

至于你的说法，那个`for(int i=0;i<5;i++){ cout << arr[i]; }`打印的空白 - 你是怎么检查的？

为了我：

```
#include <iostream>

int main(){
    char arr[5]={'h','i'};
    for(int i=0;i<5;i++){ std::cout << arr[i]; }
    std::cout << "X" << std::endl;
} 
```

印刷：

```
hiX 
```

和十六进制转储：

```
$ ./t | hexdump -Cv
00000000  68 69 00 00 00 58 0a                              |hi...X.|
00000007 
```

有`'\0'`打印的字符。它们的显示似乎取决于操作系统。但它们不是空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T08:26:54.570

1.  arr 本身是“char[5]”而不是“const char (*)[5]”。当您编写 cin >> arr 时，它会隐式转换为“char *”右值。它不是 const，因为它甚至不是左值。

而“const char *”或“char const *”表示指向的左值不能改变，而“char * const”表示指针的左值本身不能改变。但这与您的问题无关。

1.  首先，没有空格。它是 cin 附加的空字符。

* * *

数组只是一个数组：

```
char a[5]; //a's type is char[5]; 
```

但是数组几乎不可能是操作数。只有运算符我记得接受数组类型是 sizeof 和 &(address-of) （另一方面，这意味着有时 a 必须是一个数组。否则如果你写 sizeof(a)，它会给你大小的指针。）。对于其他操作 a 被转换为 char * rvalue。是的，即使你写了 a[0]、a[1] 等。a[0] 等价于 *(a + 0)，它对指针而不是数组进行操作。

当你不能分配给某个东西时，它并不总是意味着那个东西是“const”：

1.  当然，您不能分配给 const 变量。
2.  您只能分配给变量（或又称左值），因此您不能将某些内容分配给右值（或又称值）。所以你不能写 1 = 2，因为 1 是一个右值而不是一个变量，而不是因为 1 是“const”。
3.  您必须将某些内容分配给与其类型匹配的变量。所以如果你有一个 const char *p 和一个 char *q，你不能写 q = p。他们的类型不匹配。再说一次，这并不意味着 q 是 const，因为它显然不是。但是你可以写 p = q，因为 char * 可以隐式转换为 const char *。但是 const char * 必须明确地转换为 char * 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:33:22.937

1.  第一个它不是常量。第二，这段代码不安全。
2.  你应该在最后设置终止符号'\0'。

您不应该使用 char 类型，请尝试使用字符串而不是 char 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T08:24:19.617

arr 充当 const 指针，这意味着您不能将指针设置为另一个地址。它不是指向 const 的指针，因此您可以更改指针指向的地址处的数据。

例子：

```
arr=&another_variable; //Illegal
*arr='A';              //Legal 
```

# ruby-on-rails - 重现生产环境中发生的资产管道错误，而不是开发？

> ID：10257397
> 
> 赞同：0
> 
> 时间：2012-04-21T08:17:52.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline, ruby-on-rails-3.2

在 Rails 3.2.3 应用程序中，我遇到一个错误，在部署到 heroku 时类似于以下内容：-

```
Started GET "/" for 59.xx.xx.xx at 2012-xx-xx xx:xx:xx +0000
Completed 500 Internal Server Error in 62ms

ActionView::Template::Error (style.css isn't precompiled) 
```

所以，事实证明：样式表由于某种原因没有被预编译（是的，我尝试了 assets:precompile）。

要解决这个问题，首先我必须在我的开发盒上重现这个错误，这样我可能知道出了什么问题。

因此，我的问题是：

**如何在我的机器上重现此问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T08:24:52.033

默认情况下，Rails 只预编译`application.js`和`application.css`（以及所有非 JS/CSS 资产）。如果您希望它预编译另一个文件（如果您`javascript_include_tag`在布局中使用 , 等，则需要这样做），您需要将您的文件添加到预编译文件列表中。

打开`config/environments/production.rb`，并且应该有一个注释掉的行开头`config.assets.precompile`和上面的解释。取消注释此行并将其更改为：

```
config.assets.precompile += %w(stylesheets/style.css) 
```

（如果那不是正确的目录，请使用 style.css 的路径）。

要在开发中重现这一点，您必须修改 development.rb 以具有与 production.rb 相同的资产设置。

[编辑]

正如您所发现的，您可以从命令行在另一个环境中启动内置 Rails 服务器——但是，这会影响除资产管道设置之外的所有内容（类重新加载、数据库连接、电子邮件设置等），所以它有时充其量是欺骗性的（意料之外的副作用），最坏的情况是危险的（不小心向用户发送电子邮件）。不是说没用，只是要小心。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:24:39.887

我能够在我的本地开发机器上运行生产环境，只需在启动服务器时指定环境

```
$ RAILS_ENV=production rails s
=> Booting Thin
=> Rails 3.2.3 application starting in production on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server 
```

并且能够重现该问题。不知道在 Rails 中的开发和生产环境之间切换是如此简单

# backbone.js - 使用主干复杂模型使用下划线模板引擎渲染 html 表

> ID：10257401
> 
> 赞同：13
> 
> 时间：2012-04-21T08:19:29.160
> 
> 标签：backbone.js, underscore.js

我正在尝试使用下划线模板引擎呈现 html 表格。首先，我有来自服务器的 JSON 响应，如下所示

```
{
    CurrentModel: {
        Heading: "Home",
        Id: "pages/193",
        Metadata: {
            Name: "Home",
            Title: null,
            Keywords: null,
            Description: null,
            DisplayInMenu: true,
            Published: "/Date(1334499539404)/",
            Changed: "/Date(1334499539404)/",
            ChangedBy: "Marcus",
            IsPublished: true,
            IsDeleted: false,
            Slug: null,
            Url: null,
            SortOrder: 0
        },
        Parent: null,
        Children: [
            "pages/226",
            "pages/257"
        ]
},
    Children: [
        {
            Heading: "Foo",
            MainBody: null,
            Id: "pages/226",
            Metadata: {
                Name: "I'm an article",
                Title: null,
                Keywords: null,
                Description: null,
                DisplayInMenu: true,
                Published: "/Date(1334511318838)/",
                Changed: "/Date(1334511318838)/",
                ChangedBy: "Marcus",
                IsPublished: true,
                IsDeleted: false,
                Slug: "i-m-an-article",
                Url: "i-m-an-article",
                SortOrder: 1
            },
            Parent: {},
            Children: [ ]
        },
        {
            Heading: "Bar",
            MainBody: null,
            Id: "pages/257",
            Metadata: {
                Name: "Foo",
                Title: null,
                Keywords: null,
                Description: null,
                DisplayInMenu: true,
                Published: "/Date(1334953500167)/",
                Changed: "/Date(1334953500167)/",
                ChangedBy: "Marcus",
                IsPublished: true,
                IsDeleted: false,
                Slug: "foo",
                Url: "foo",
                SortOrder: 2
            },
            Parent: {},
            Children: [ ]
        }
    ]
} 
```

我正在寻找的 HTML 结果非常像这样，我从 CurrentModel 打印一些数据并遍历 Children 属性，最好 tbody 中的每个 tr 都应该是使用backbone.js的视图，这样我就可以连线了为这一特定行设置一些事件。

```
<table>
    <caption><%= CurrentModel.Metadata.Name %></caption>
    <thead>
        <tr>
            <th><span>Page name</span></th>                
            <th><span>Slug</span></th>
            <th><span>Published</span></th>
            <th><span>Changed</span></th>
        </tr>
    </thead>
    <tbody>
        <% _(Children).each(function(page) { %>
            <tr>
                <td><%= page.Metadata.Name %></td>
                <td><%= page.Metadata.Slug %></td>
                <td><%= page.Metadata.IsPublished %></td>
                <td><%= page.Metadata.Changed %></td>
            </tr>                    
        <% }); %>
    </tbody>
</table> 
```

现在，我的问题是我的主干视图和模型应该是什么样子，或者它不应该这样使用？如果来自服务器的响应只是一个页面集合，下面的 javascript 代码可以工作并为每个孩子呈现一个 tr，我理解方式，但我不知道如何修改代码，以便它可以采用复杂的模型，然后渲染部分该模型在一个或两个 javascript 视图中？

在我的 application.js 我有这个代码

```
pages: function () {
    this.pageList = new PageCollection();
    this.pageListView = new PageListView({ model: this.pageList });
    this.pageList.fetch();
} 
```

PageCollection 看起来像这样

```
var PageCollection = Backbone.Collection.extend({
    url: '/pages',
    model: Page
}); 
```

像这样的模型类

```
Page = Backbone.Model.extend({
    metadata: {
        name: null,
        title: null,
        keywords: null,
        description: null,
        displayInMenu: null,
        published: null,
        changed: null,
        changedBy: null,
        isPublished: null,
        isDeleted: null,
        slug: null,
        url: null,
        sortOrder: null
    },
    parent: {},
    children: [],
    ancestors: null,
    initialize: function () { }
}); 
```

页面列表视图

```
PageListView = Backbone.View.extend({
    tagName: 'table',
    initialize: function () {
        this.model.bind("reset", this.render, this);
    },
    render: function (eventName) {
        _.each(this.model.models, function (page) {
            $(this.el).append(new PageListItemView({ model: page }).render().el);
        }, this);
        return this;
    }
}); 
```

最后是 PageListItemView

```
PageListItemView = Backbone.View.extend({
    tagName: "tr",
    template: _.template($('#tpl-page-list-item').html()),
    events: {
        "click td input[type=checkbox]": "publish"
    },
    render: function (eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    },
    publish: function (event) {
        alert('Publish');
    }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T11:47:23.813

首先，我会将数据解析到集合中以获取页面列表，并可能获取`CurrentModel`定义：

```
var PageCollection = Backbone.Collection.extend({
    url: '/pages',
    model: Page,

    parse: function(response) {
        this.CurrentModel=new Page(response.CurrentModel);
        return response.Children;
    }
}); 
```

然后，将行模板设置为

```
<script id="tpl-page-list-item" type="text/template">
    <tr>
        <td><%= Metadata.Name %></td>
        <td><%= Metadata.Slug %></td>
        <td><%= Metadata.IsPublished %></td>
        <td><%= Metadata.Changed %></td>
        <td><input type='checkbox' /></td>
    </tr>
</script> 
```

您可以或多或少地定义您的视图，就像您拥有它们一样

```
var PageListItemView = Backbone.View.extend({
    template: _.template($('#tpl-page-list-item').html()),
    events: {
        "click input[type=checkbox]": "publish"
    },
    render: function (eventName) {
       var html=this.template(this.model.toJSON());
       this.setElement($(html));
       return this;
    },
    publish: function () {
        console.log(this.model.get("Metadata").Name);
    }
});

var PageListView = Backbone.View.extend({
    tagName: 'table',
    initialize: function () {
        this.collection.bind("reset", this.render, this);
    },
    render: function (eventName) {
        this.$el.empty();

        this.collection.each(function(page) {
            var pageview=new PageListItemView({ model: page });
            var $tr=pageview.render().$el;           
            this.$el.append($tr);
        },this);

        return this;
    }
}); 
```

初始化集合和视图，获取数据，你应该有相当于这个 Fiddle 的东西：http: [//jsfiddle.net/NtmB4/](http://jsfiddle.net/NtmB4/)

```
var coll=new PageCollection();
var view=new PageListView({collection:coll})
$("body").append(view.render().el);

coll.fetch(); 
```

还有一个与您的完整模板相对应的小提琴[http://jsfiddle.net/NtmB4/2/](http://jsfiddle.net/NtmB4/2/)

# c++ - 谷歌测试框架参数化夹具

> ID：10257414
> 
> 赞同：0
> 
> 时间：2012-04-21T08:22:23.797
> 
> 标签：c++, unit-testing, googletest

我有一个问题。我使用以下结构作为夹具：

```
类 unvalidSDPTest : public ::testing::Test{
受保护：
    虚拟无效设置（）{
        标准：：字符串名称（“名称”）；
        服务器=新的 SipServer（名称）；
        std::ifstream 提供文件，答案文件；
        offerFile.open("unvalidOfferSDP.txt");
        answerFile.open("unvalidAnswerSDP.txt");
        标准：：字符串提供RawSDP，answerRawSDP；
        报价文件>>报价原始SDP；
        answerFile>>answerRawSDP；
        offerSDPSession = 服务器->MakeSDPSession( const_cast(offerRawSDP.c_str()) ) ;
        answerSDPSession = 服务器->MakeSDPSession( const_cast(answerRawSDP.c_str()) ) ;
    }
    虚拟 void TearDown(){
        删除服务器；
    }
    pjmedia_sdp_session *offerSDPSession, *answerSDPSession ;
    SipServer *服务器；
    SDPNeg 谈判者；
};

```

我想通过文件名参数化这个类。如何让它变得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:38:47.500

有很多方法可以做到这一点 - 我将向您展示两种：

方法一：创建一个带有虚函数的基类，然后从它派生。

```
class unvalidSDPTestBase : public ::testing::Test{
  virtual const char * offer_filename() const =0;
  virtual const char * answer_filename() const =0;
  protected:
    virtual void SetUp(){
        std::string Name("name");
        Server=new SipServer(Name);
        std::ifstream offerFile,answerFile;
        offerFile.open( offer_filename());
        answerFile.open(answer_filename());
        std::string offerRawSDP,answerRawSDP;
        offerFile>>offerRawSDP;
        answerFile>>answerRawSDP;
        offerSDPSession = Server->MakeSDPSession( const_cast(offerRawSDP.c_str()) ) ;
        answerSDPSession = Server->MakeSDPSession( const_cast(answerRawSDP.c_str()) ) ;
    }
    virtual void TearDown(){
        delete Server;
    }
    pjmedia_sdp_session *offerSDPSession, *answerSDPSession ;
    SipServer *Server;
    SDPNeg Negotiator;
 };

 class unvalidSPDTestBase: public unvalidSDPTestBase
 {
     virtual const char * offer_filename() const { return "..."; }
     virtual const char * answer_filename() const { return "..."; }
 } 
```

方法2：使用诸如系统和模板之类的特征：

```
template<typename FILENAME_SOURCE>
class SDPTest : public ::testing::Test{
  protected:
    virtual void SetUp(){
        std::string Name("name");
        Server=new SipServer(Name);
        std::ifstream offerFile,answerFile;
        offerFile.open( FILENAME_SOURCE::offer_filename());
        answerFile.open( FILENAME_SOURCE::answer_filename());
        std::string offerRawSDP,answerRawSDP;
        offerFile>>offerRawSDP;
        answerFile>>answerRawSDP;
        offerSDPSession = Server->MakeSDPSession( const_cast(offerRawSDP.c_str()) ) ;
        answerSDPSession = Server->MakeSDPSession( const_cast(answerRawSDP.c_str()) ) ;
    }
    virtual void TearDown(){
        delete Server;
    }
    pjmedia_sdp_session *offerSDPSession, *answerSDPSession ;
    SipServer *Server;
    SDPNeg Negotiator;
 };

 struct InvalidFilenames
 {
   static const char * offer_filename()  { return "..."; }
   static const char * answer_filename() { return "..."; }
 };

 typedef SDPTest<InvalidFilenames> unvalidSDPTest; 
```

# mysql - Mysql内部连接进阶，howto

> ID：10257415
> 
> 赞同：0
> 
> 时间：2012-04-21T08:22:39.137
> 
> 标签：mysql

谁能帮我解决这个问题？我有三张桌子（A;B;C）

```
A <--1....N---> B  <--1....N--->  C 
```

我想要所有具有 C.dates 的 A 行（最大）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:28:39.967

```
SELECT A.*, MAX(C.dates)
FROM A
JOIN B ON B.A_fk = A.id
JOIN C ON C.B_fk = B.id
GROUP BY A.id 
```

此 JOIN 将排除不会有 LEFT 连接的结果。也就是说，如果 A 中的任何行都没有 B 行，或者 B 中的任何行都没有 C 行，则该行不会显示。为了克服这个问题，您可以使用 LEFT JOIN 而不是 JOIN。

```
SELECT A.*, MAX(C.dates)
FROM A
LEFT JOIN B ON B.A_fk = A.id
LEFT JOIN C ON C.B_fk = B.id
GROUP BY A.id 
```

**编辑：**抱歉没有注意到您需要 C.data 的最大价值。你有它。您必须在 SELECT 和 GROUP BY A.id 中使用 MAX 函数

# java - 我可以在 Java 的泛型类型上调用 .class 吗？

> ID：10257416
> 
> 赞同：14
> 
> 时间：2012-04-21T08:22:48.903
> 
> 标签：java, generics

我想知道Java中是否有办法做类似的事情

```
Class c = List<String>.class;
Class c2 = List<Date>.class; 
```

我需要这样的东西来创建一个存储类名（具有泛型类型）和我以后可以查找的相应对象的映射。例如，

```
Map<Class, Object> dataMap = new HashMap<Class, Object>();
dataMap.put(c, listOfStrings);
dataMap.put(c2, listOfDates); 
```

由于运行时类型擦除，这是不可能的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T08:33:39.533

你不能完全像这样，但你*可以*使用与 Guice 相同的方法来实现你的总体目标[`TypeLiteral`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/TypeLiteral.html)。如果您已经在使用 Guice，我建议您直接使用它 - 否则，您可能想要创建自己的类似类。

本质上，这个想法是指定类型参数的泛型类型的子类直接保留该信息。所以你写了这样的东西：

```
TypeLiteral literal = new TypeLiteral<List<String>>() {}; 
```

然后你可以使用`literal.getClass().getGenericSuperclass()`并从中获取类型参数。`TypeLiteral`本身不需要有任何有趣的代码（我不知道它在 Guice*中是否*有任何东西，出于其他原因）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T08:28:48.107

不，这是不可能的。您甚至无法`List<String>.class`在代码中引用 - 它会导致编译错误。对于 ，只有一个类对象`List`，它被称为`List.class`。

> 由于运行时类型擦除，这是不可能的吗？

正确的。

顺便说一句，这是*泛型*类型，而不是带注释的类型。

## 更新

*再想一想，您可以通过稍微调整 Josh Bloch 的类型安全异构容器*（在*Effective Java* 2nd Ed.，Item 29 中发布）来获得与上面的 Map 相当接近的东西：

```
public class Lists {
    private Map<Class<?>, List<?>> lists =
            new HashMap<Class<?>, List<?>>();

    public <T> void putList(Class<T> type, List<T> list) {
        if (type == null)
            throw new NullPointerException("Type is null");
        lists.put(type, list);
    }

    public <T> List<T> getList(Class<T> type) {
        return (List<T>)lists.get(type);
    }
} 
```

演员表`getList`未经检查，发出警告，但恐怕我们无法避免。但是，我们知道为 class 存储的值`X`必须是 a `List<X>`，因为这是由编译器保证的。所以我认为演员阵容是安全的（如果你遵守规则，也就是说 - 即永远不要`putList`使用普通的非泛型`Class`参数调用），因此可以使用`@SuppressWarnings("unchecked")`.

你可以像这样使用它：

```
Lists lists = new Lists();
List<Integer> integerList = new ArrayList<Integer>();
List<String> stringList = new ArrayList<String>();
...

lists.putList(Integer.class, integerList);
lists.putList(String.class, stringList);
List<Integer> storedList = lists.getList(Integer.class);

assertTrue(storedList == integerList); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T08:31:02.037

这是不可能的，因为你正在尝试。
但是您可以[装饰](http://en.wikipedia.org/wiki/Decorator_pattern)这些列表并创建一个`MyListDates`and`MyListString`并将它们存储在哈希图中

# ruby - 如何收集实时推文？

> ID：10257418
> 
> 赞同：-2
> 
> 时间：2012-04-21T08:23:12.823
> 
> 标签：ruby

如何使用 Ruby 收集实时推文并将其存储在 MongoDB 中？请给我一个提示！我试过使用这个代码[1](http://gist.github.com/656397)并且总是得到这个并且不知道如何处理它......

```
C:/Ruby187/lib/ruby/1.8/net/protocol.rb:135:in `sysread': 既存の接続はリモート
ホストに強制的に切断されました。 (Errno::ECONNRESET)
        from C:/Ruby187/lib/ruby/1.8/net/protocol.rb:135:in `rbuf_fill'
        from C:/Ruby187/lib/ruby/1.8/timeout.rb:67:in `timeout'
        from C:/Ruby187/lib/ruby/1.8/timeout.rb:101:in `timeout'
        from C:/Ruby187/lib/ruby/1.8/net/protocol.rb:134:in `rbuf_fill'
        from C:/Ruby187/lib/ruby/1.8/net/protocol.rb:116:in `readuntil'
        from C:/Ruby187/lib/ruby/1.8/net/protocol.rb:126:in `readline'
        from C:/Ruby187/lib/ruby/1.8/net/http.rb:2028:in `read_status_line'
        from C:/Ruby187/lib/ruby/1.8/net/http.rb:2017:in `read_new'
        from C:/Ruby187/lib/ruby/1.8/net/http.rb:1051:in `request'
        from stream.rb:19
        from C:/Ruby187/lib/ruby/1.8/net/http.rb:543:in `start'
        from C:/Ruby187/lib/ruby/1.8/net/http.rb:440:in `start'
        from stream.rb:15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:07:45.433

尝试将 URL 从 更改`http://stream.twitter.com/1/statuses/sample.json`为`https://stream.twitter.com/1/statuses/sample.json`，流式 API 现在只能通过 SSL 使用（您链接到的 Gist 已经有一年了）。

# javascript - jQuery / JavaScript 中的自定义滚动条数学

> ID：10257421
> 
> 赞同：2
> 
> 时间：2012-04-21T08:23:43.017
> 
> 标签：javascript, jquery, scrollbar, touch-event

我目前正在开发一个项目，该项目使用自定义滚动插件（由我编写）来允许在触摸设备以及桌面浏览器中滚动元素。一切正常（包括 iOS 的速度和减速）。

但是，剩下的唯一问题是在用户滚动时计算滚动条的顶部（或左侧）位置。我使用以下公式计算了滚动条的高度：

```
Math.round((container.height() / content.height()) * 100); 
```

这似乎计算了条的正确高度，但现在我需要一个公式来计算当用户滚动时滚动条的位置应该移动多少。我已经通过谷歌进行了检查，并没有找到太多用处，并且还在 SO 上进行了搜索，欢迎提出任何意见。

我有以下数据可用于公式：

*   集装箱高度
*   内容高度
*   当前滚动位置 ( `scrollTop`)
*   滚动条高度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:38:13.290

滚动条的位置应通过以下公式计算：

```
Math.round((scrollbar.height * scrollTop / content.height()); 
```

# google-chrome-extension - How do I get my extension to block elements on a page?

> ID：10257429
> 
> 赞同：1
> 
> 时间：2012-04-21T08:25:38.620
> 
> 标签：google-chrome-extension

I want to do this the simplest way possible, I don't mind if it allows the element to load THEN hides it. Basically I want to do a different take than what's been done before for YouTube comment blockers but I can't figure out how to actually get my extension to block comments. I know limited HTML/CSS/JavaScript but I'm just not sure where to start. I already know what elements need to be consistently removed from the page but don't know how to tell chrome to hide them.

EDIT: To go into further if possible I'd like to blog certain sections in the HTML based on their `<div>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:03:39.737

Here is my Facebook Ads disabler:

manifest.json

```
{
  "name": "Facebook Ads Disabler",
  "version": "0.0.1",
  "description": "Disable side ads on facebook! By Alexander Piechowski.",
  "content_scripts": [
    {
        "matches": [
        "http://*.facebook.com/*","https://*.facebook.com/*"],
        "js": ["main.js"],
        "run_at": "document_end",
        "all_frames": true
    }
  ]
} 
```

main.js

```
function remove(){
try
  {
    document.getElementById('pagelet_ego_pane_w').innerHTML = '';
  }
catch(err)
  {
    //Skip if "pagelet_ego_pane_w" div tag isn't on this page
  }
  try
  {
        document.getElementById('pagelet_ego_pane').innerHTML = '';
  }
catch(err)
  {
    //Skip if "pagelet_ego_pane" div tag isn't on this page
  }
    try
  {
        document.getElementById('pagelet_side_ads').innerHTML = '';
  }
catch(err)
  {
    //Skip if "pagelet_side_ads" div tag isn't on this page
  }
      try
  {
        document.getElementById('fbPhotoSnowliftAdsSide').innerHTML = '';
  }
catch(err)
  {
    //Skip if "fbPhotoSnowliftAdsSide" div tag isn't on this page
  }
console.log('All ads have been removed.');
setTimeout(function(){remove();},2000);
}
remove(); 
```

This makes all the inside of the ID's completely blank and re-runs every 2 seconds for when I go to new pages within facebook.

# objective-c - 在 UIScrollView 中弹出一个中间图像包含许多图像

> ID：10257430
> 
> 赞同：0
> 
> 时间：2012-04-21T08:26:11.040
> 
> 标签：objective-c, user-interface, uiscrollview, xcode4.3, ios5

我在玩 UIScrollView 时遇到问题，我使用 customImage 对象类在滚动视图上显示图像，并在每个图像上触发事件，但我必须在它上面做额外的工作，因为给出的图像显示中间图像弹出并触发该弹出图像的事件...我对此感到困惑，任何人都可以告诉我如何实现这一目标...请告诉我一些从它开始的步骤...

![图像的 UIScrollView](../Images/3c78436223428fb8b2e66c3598a5c1a5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:32:43.380

You should be implementing the UIScrollViewDelegate protocol in the controller which should be handling the UIScrollView.

In there you will get a plethora of delegate callbacks such as when the scrollView moves or is decelerating towards a complete stop etc. ["UIScrollViewDelegate iOS reference"](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)

You can implement any of the methods to suit your exact needs and modify the image's properties. To find which image is in the middle you would be comparing the contentOffset property of the scroll view o image locations.

# jquery - 如何使用搜索输入值重新加载 jQGrid

> ID：10257431
> 
> 赞同：4
> 
> 时间：2012-04-21T08:26:34.737
> 
> 标签：jquery, jqgrid, datepicker

我已经为 jqGrid 的列之一绑定了 DatePicker 插件。我要做的就是在选择日期后刷新整个网格。下面的代码重新加载了网格，但它发出了一个简单的 GET 请求，没有任何搜索参数。如何解决？

```
 $(function () {
        $("#list").jqGrid({
            url: '/Control/BookstoreInvoicesGridData/',
            datatype: 'json',
            mtype: 'GET',
            colNames: ['Invoice #', 'Created', 'Customer ID', 'Total Amount', 'PaymentType'],
            colModel: [
      { name: 'OrderID', index: 'OrderID', width: 20, align: 'center', sortable: true, search: true },
      { name: 'Created', index: 'Created', width: 40, align: 'center', sortable: true, search: true },
      { name: 'CustomerName', index: 'CustomerName', width: 60, align: 'center', sortable: true, search: true },
      { name: 'TotalAmount', index: 'TotalAmount', width: 40, align: 'center', sortable: true, search: false },
      { name: 'PaymentType', index: 'PaymentType', width: 40, align: 'center', sortable: true, search: false}],
            pager: jQuery('#pager'),
            rowNum: 10,
            rowList: [5, 10, 20, 50],
            sortname: 'OrderID',
            sortorder: "desc",
            viewrecords: true,
            imgpath: '/scripts/themes/coffee/images',
            width: '800'
        });

        $('#gs_Created').datepicker({
            onSelect: function (dateText, inst) {
                var e = $("#list").data("events");
                if (typeof (e) !== "undefined" && typeof (e.reloadGrid) !== "undefined") {
                    $("#list").trigger("reloadGrid");
                }
            } 
        }
        );
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T08:29:40.867

您可以更改 jqGrid 的 URL 以发送当前参数：

```
 var url = '/Control/BookstoreInvoicesGridData/?date=' + $(this).val();
    $("#list").jqGrid('setGridParam', { url: url });
    $("#list").trigger("reloadGrid"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T16:19:02.137

谢谢，对我来说，它可以通过参数为网格数据充电：

```
$('#buttonsearch').on('click', function () {
    jQuery("#mygrid").jqGrid('setGridParam', { 
        postData: { nit: $("#myparameter").val() }
    }, 
    { page: 1 }).trigger('reloadGrid');            
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T11:24:23.637

您没有在代码中包含[filterToolbar](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching#calling_convention)的调用，但从名称`'#gs_Created'`我可以假设您使用[工具栏搜索](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching)

```
var grid = $("#list"),
    datePick = function (elem) {
        $(elem).datepicker({
            changeYear: true,
            changeMonth: true,
            showButtonPanel: true,
            onSelect: function () {
                if (this.id.substr(0, 3) === "gs_") {
                    // call triggerToolbar only in case of searching toolbar
                    setTimeout(function () {
                        grid[0].triggerToolbar();
                    }, 100);
                }
            }
        });
    });

grid.jqGrid({
    url: '/Control/BookstoreInvoicesGridData/',
    ...
    // sortable: true, search: true are already default 
    // you can change other default values using cmTemplate
    cmTemplate: {align: 'center', width: 40},
    colModel: [
        { name: 'OrderID', index: 'OrderID', width: 20 },
        { name: 'Created', index: 'Created',
            searchoptions: { dataInit: datePick, attr: { title: 'Select Date'} } },
        { name: 'CustomerName', index: 'CustomerName', width: 60 },
        { name: 'TotalAmount', index: 'TotalAmount' },
        { name: 'PaymentType', index: 'PaymentType'}
    ],
    pager: '#pager',
    gridview: true,
    height: 'auto',
    ...
}); 
```

并且请删除`imgpath: '/scripts/themes/coffee/images'`在 jqGrid 中多年未使用的参数（请参见[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aupgrade_from_3.4.x_to_3.5#options)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T09:12:29.000

这是解决方案，如果其他人都会遇到同样的问题。

```
datePick = function (elem) {
            jQuery(elem).datepicker();
        }

$("#list").jqGrid({    
....
{ name: 'Created', [...] stype: 'text', searchoptions: { dataInit: datePick, attr: { title: 'Select Date'} } },
....
}); 
```

# asp.net - ASP.NET MVC 中静态或非静态方法的区别

> ID：10257432
> 
> 赞同：4
> 
> 时间：2012-04-21T08:26:36.843
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, static

我需要一个在控制器中返回一些参数的方法，这是它的实现：

```
 public List<Parameter> GetParameters(FormCollection collection) {

        List<Parameter> parameters = new List<Parameter>();
        List<string> parameterNames = new List<string>();

        //Get Parameters Names and Values

        return parameters;
    } 
```

我在所有控制器中都使用了这种方法，所以我想到了我必须定义它的 3 个选项：

1-对于任何控制器类，在该控制器中定义它，如下所示：

```
public class ProductController : Controller {

   public List<Parameter> GetParameters(FormCollection collection) {

   //

    }
  } 
```

2-在静态类中将其定义为静态方法：

```
public static class GeneralMethods {

   public static List<Parameter> GetParameters(FormCollection collection) {

   //

    }
  } 
```

3-将其定义为无静态：

```
public class GeneralMethods {

   public List<Parameter> GetParameters(FormCollection collection) {

   //

    }
  } 
```

哪一个更好？哪一个有更好的性能？或用于定义许多控制器中使用的方法的任何其他选项？你的建议是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T08:51:56.027

这三个中的任何一个都不会对性能产生影响。（虽然最后一种方法每次都会创建单独的对象，但它会被 GC 优雅地处理）。

**方法 1：**不，作为标准做法，我们不应该重复代码。

**方法2：**是的，如果您的方法仅取决于输入参数。

**方法3：**是的，如果您需要设置一些实例变量并且您的方法取决于它们。

**建议的方法：（**方法 1+ 方法 3）如果此方法对您的所有控制器（或大多数）通用，请使用此方法声明一个基本控制器并从中继承所有其他控制器。

静态方法不会成为问题，因为在方法中声明的任何变量都在方法的范围内。

# mysql - Mysql查询连接三个表

> ID：10257433
> 
> 赞同：16
> 
> 时间：2012-04-21T08:26:39.817
> 
> 标签：mysql, sql, join, inner-join

我正在使用这个查询：

```
SELECT a.sales_id, d.bus_title, a.cat_id
FROM tbl_sales a
INNER JOIN tb_category b ON a.cat_id = b.cat_id
INNER JOIN tbl_business d ON d.bus_id = a.bus_id 
```

产生这个结果：

```
sales_id  | bus_title      |cat_id
----------|----------------|------------
 1        | Business 1     | 6  
 2        | Business 12    | 12
 3        | Business 123   | 25 
```

我将字段 cat_id 更改为一个名为的新表`tb_sales_category`，其中包含字段`sales_category_id`, `sales_id`, `cat_id`。我怎样才能通过加入这个表来编写新的查询，得到与上面相同的结果？

我是数据库的新手，需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T08:50:43.500

试试这个：

```
SELECT a.sales_id, d.bus_title, s.cat_id
FROM tbl_sales a
INNER JOIN tb_sales_category s ON a.sales_id = s.sales_id
INNER JOIN tbl_business      d ON a.bus_id   = d.bus_id
INNER JOIN tb_category       b ON s.cat_id   = b.cat_id 
```

这个想法很简单，新表中的第一个字段`tb_sales_category`用作`sales_category_id`代理*键*，它与其他两个表之间的关系无关。然后我们来到另外两个字段，`sales_id`, `cat_id`，这些你应该映射到关系的另外两个方面。

您不能`Join tb_category b ON a.cat_id = b.cat_id`使用新模式，因为我们不再拥有`a.cat_id`，而新的表`tb_sales_category`角色出现了，通过将其插入两个绑定侧，一个与`INNER JOIN tb_category b ON s.cat_id = b.cat_id`另一个与`INNER JOIN tb_sales_category s ON a.sales_id = s.sales_id`我们应该完成。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T08:55:27.477

我不是内部连接的忠实粉丝，所以试试这个：

```
SELECT a.sales_id, a.cat_id, c.bus_title
FROM tb_sales_category a, tb_sales b, tbl_business c
WHERE a.sales_id = b.sales_id
AND b.bus_id = c.bus_id 
```

# templates - Play 2.0 - 在 `map` 或 `for-yield` 上映射会生成模板

> ID：10257437
> 
> 赞同：4
> 
> 时间：2012-04-21T08:27:37.110
> 
> 标签：templates, scala, playframework-2.0

我想`map`在 Play 2.0 模板中执行两个顺序操作。我试过这样：

```
@defining(for(a <- as) yield { doSmthWith(a); doSmthWith2(a) })
    { aaas => aaas.map(_.toString).mkString("|") }   /*CRASH*/ 
```

我认为它相当于普通的 Scala：

```
val aaas = for(a <- as) yield { doSmthWith(a); doSmthWith2(a) }
println(aaas.map(_.toString).mkString("|")) 
```

但它在第`{`一句话就崩溃了`expected start of definition`......

就像我`for`用常规地图替换循环一样：

```
@(as.map(a => { doSmthWith(a); doSmthWith2(a) })).map(_.toString).mkString("|")) 
```

在第一个`}`标志上同样崩溃。如何在 Play 模板中实现顺序映射？

**更新：**

堆栈 - 在这里！- 直接从控制台：

```
sbt.PlayExceptions$CompilationException: Compilation error [expected start of de
finition]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$
11$$anonfun$apply$12.apply(PlayReloader.scala:224) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$
11$$anonfun$apply$12.apply(PlayReloader.scala:224) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$
11.apply(PlayReloader.scala:224) ~[na:na]
        at sbt.PlayReloader$$anon$2$$anonfun$reload$3$$anonfun$2$$anonfun$apply$
11.apply(PlayReloader.scala:221) ~[na:na]
        at scala.Option.map(Option.scala:133) ~[scala-library.jar:0.11.2] 
```

堆栈说的是，`Option`但我在这里的任何地方都没有使用它们。一定是一些内部运作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T07:00:25.313

这有效：

```
@defining(for (a <- List(1,2,3)) yield { 
   play.api.Logger.debug("a:" + a)
   a*3
}) { as =>
  @(as.mkString("|"))
} 
```

在页面中显示`3|6|9`并在控制台中打印：

```
[debug] application - a:1
[debug] application - a:2
[debug] application - a:3 
```

所以我的猜测是`@`在表达式前面添加符号以及将左括号放在与定义的右括号相同的行上会使其工作（假设`doSmthWith2(a)`实际上返回单位以外的其他内容）：

```
@defining(for(a <- as) yield { doSmthWith(a); doSmthWith2(a) }) { aaas =>
  @(aaas.map(_.toString).mkString("|"))
} 
```

# php - HTML表格数据传输到MS Excel？

> ID：10257442
> 
> 赞同：1
> 
> 时间：2012-04-21T08:28:30.903
> 
> 标签：php, html, excel, html-table, transfer

我有一个由 PHP 创建的报告，它从 mysql 获取数据并显示在 HTML 表格单元格中，现在我刚刚在 Excel 表格底部创建了一个按钮，当用户单击此按钮时，html 数据完全传输到 MS Excel 中。

那么，如果有人有一些代码、脚本等，我该怎么做，请给我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:34:33.433

您可以使用优秀的 PHP 库[PHPExcel](http://phpexcel.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T08:29:59.470

您可以简单地将数据导出为 Excel 可以导入的 CSV 格式。

# java - context:property-placeholder 是个好东西，但我不希望某些 bean 配置使用 placeholder

> ID：10257448
> 
> 赞同：2
> 
> 时间：2012-04-21T08:29:11.597
> 
> 标签：java, spring

context:property-placeholder 是个好东西，但我不希望某些 bean 配置使用 placeholder

我只想使用 $ {num} 字符串的相同属性参数。

怎么做？

像：

```
<bean id="Sku.findSkuRelationByCategory" class="loxia.dao.support.DynamicQueryHolder">
    <constructor-arg>
        <value>
    <![CDATA[select 
    r.sku_id as sku_id,
    r.sku_category_id as sku_category_id
                from t_ma_sc_sku_relation r
                where r.sku_id in(#foreach($num in [1..$skuCount]) #if($num == 1) :s${num} #else ,:s${num} #end #end)
                and r.sku_category_id in(#foreach($num in [1..$categoryCount]) #if($num == 1) :c${num} #else ,:c${num} #end #end)
                order by sku_category_id]]>
        </value>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:22:41.410

*我对您的问题的理解是：您需要转义占位符标记*

我认为您只能使用解决方法，我知道其中两个：

*   更改占位符配置以使用文本中未使用的其他前缀和后缀

    ```
    <contextroperty-placeholder ....>
         ....
         <property name="placeholderPrefix" value="~{"/>
         <property name="placeholderSuffix" value="}" />
    </contextroperty-placeholder> 
    ```

*   在文本中使用 SpEL 表达式 (#{'$'}) 将前缀（应该没有前缀）分成两部分

    ```
    <value>...#if($num == 1) :s#{'$'}num} #else ,:s#{'$'}num} #end #end)....</value> 
    ```

    这第二个想法不是来自我，我在谷歌搜索后找到了它：http: [//jazzjuice.blogspot.de/2011/06/escaping-property-placeholders-in.html](http://jazzjuice.blogspot.de/2011/06/escaping-property-placeholders-in.html)

# c# - C#、Java 中的变量作用域

> ID：10257449
> 
> 赞同：3
> 
> 时间：2012-04-21T08:29:34.017
> 
> 标签：c#, java, oop, scope

不，这不是我的作业。
（因为我旁边有一叠答卷，等着批改。）

问：如果方法中的局部变量与主程序中的变量同名，会发生什么？
a) 产生错误
b) 主程序中的变量是“隐藏的”，直到方法完成执行
c) 主程序中的变量将覆盖方法中的变量
d) 以上都不是。

教科书的答案是b，很简单。

但转念一想，它真的“隐藏”了吗？
据我所知，在 C# 和 Java 等纯面向对象的语言中，
我们总是可以使用

```
this.x 
```

或者

```
MainProgram.x 
```

对于静态变量。

所以我的问题是：
选项 b 是否适用于 C#？为什么？

请分享你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:33:35.403

是的，局部变量`x`隐藏（或更准确地说，*阴影*- 感谢@pst）该`x`方法/块范围内的成员变量。您可以将后者的*限定名称*称为`this.x`，以使生活更轻松，但答案是正确的。（完全）限定名称不再依赖于范围，因此它不能被隐藏或隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T15:01:28.587

我向您推荐 C# 4 规范的第 3.7.1 节，为方便起见，我在此引用了它的开头：

> 实体的范围通常包含比实体的声明空间更多的程序文本。特别是，实体的范围可能包括引入新声明空间的声明，这些声明空间包含同名实体。这样的声明会导致原始实体被**隐藏**。相反，当实体不**隐藏时，它被称为****可见**。

 **正确理解规范的这一部分要求您理解实体的*范围和它的**声明空间*之间的区别。**范围**是程序文本的区域，其中实体可以通过其非限定名称来引用。**声明空间**是实体名称唯一的程序文本区域。

有关详细信息，请阅读第 3.7.1 节的其余部分。

我还注意到，指定的术语是“隐藏的”，尽管“阴影”也经常使用。**

# wpf - 多行 WPF 文本块：行的不同对齐方式

> ID：10257450
> 
> 赞同：0
> 
> 时间：2012-04-21T08:29:39.550
> 
> 标签：wpf, alignment, textblock

是否可以为多行文本块的不同行设置不同的水平对齐方式？

例如，我想将文本的标题居中，但主要文本我想靠左对齐。我不想为这个问题使用几个文本块。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:20:20.020

我认为您无法使用 TextBlock 控件获得所需的内容，这是因为您可以在 TextBlock 中添加的内联元素不允许您控制水平对齐（逐行）。

无论如何，我认为这不是最好的方法，事实上，正如 MSDN 所指定的那样：

> TextBlock 没有针对需要显示多于几行内容的场景进行优化；对于此类场景，就性能而言，FlowDocument 与适当的查看控件相结合是比 TextBlock 更好的选择。在 TextBlock 之后，FlowDocumentScrollViewer 是下一个用于显示流内容的最轻量级的控件，它只是提供了一个具有最少 UI 的滚动内容区域。FlowDocumentPageViewer 针对流内容的“一次一页”查看模式进行了优化。最后，FlowDocumentReader 支持查看流内容的最丰富的集合功能，但相应地更重。

因此，如果您想要更灵活的控制，并且在您要求它执行的操作方面也有更好的性能，您应该使用[FlowDocument](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)。

我想补充一点。如果您正在寻找性能的显着改进，并且您认为单个 TextBlock 是正确的解决方案，我建议您改用[Visual](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.aspx)元素和相关的[DrawText](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.drawtext.aspx)方法。但是，如果您正在寻找一种易于在将来维护的控件，则选择 FlowDocument，如前所述。

# facebook - 应用程序图标未出现在搜索结果页面上

> ID：10257452
> 
> 赞同：0
> 
> 时间：2012-04-21T08:29:43.673
> 
> 标签：facebook, search

我为其创建了应用程序并上传了图标，但该图标未出现在搜索结果页面上：

[http://www.facebook.com/search/results.php?q=Gammafish%20Poker&type=apps](http://www.facebook.com/search/results.php?q=Gammafish%20Poker&type=apps)

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:12:02.840

该搜索结果页面中显示的图像不是图标。

在应用程序设置页面中，您可以更改图标，还有“个人资料图片”（或他们所说的），将鼠标悬停在它上面，您会看到文本“编辑”然后显示在图片，单击它并上传您想要显示为应用程序“个人资料图片”的图片，然后您应该在这些搜索结果中看到它。

* * *

# 编辑

我检查了一下，我错了，搜索结果中的图像不是“应用配置文件图片”，如果您将鼠标悬停在文本链接上，则会显示（例如）。

我不是 100%，但看起来搜索结果中的那张图片来自应用页面，对我们来说，它使用了应用页面的旧个人资料图片。您可以在应用程序设置中设置“应用程序页面”，“高级”选项卡，最后一项。

# javascript - 是否可以在远程服务器上加载和解析文件？

> ID：10257454
> 
> 赞同：3
> 
> 时间：2012-04-21T08:30:04.603
> 
> 标签：javascript, same-origin-policy

是否可以使用 JavaScript 从不同域下载和解析纯文本文件？

到目前为止，我已经掌握了这个[小提琴](http://jsfiddle.net/VLRd9/2/)，但我一直在弄清楚我做错了什么。

标记：

```
 <div id="clickme">Click me</div>
  <div id="result">Result: </div> 
```

代码：

```
$("#clickme").click(function() {
  /* ###################################
     NOTE: im on say example.com/test.html but trying
     NOTE: to access different_domain_sample.com
   */
  var req = new XMLHttpRequest();
  var sURL = "http://www.google.com/robots.txt";

  req.open("GET", sURL, true);
  req.setRequestHeader("User-Agent", "blah/4.2");

  req.onreadystatechange = function() {
    if (req.readyState == 4) {
        $("#result").text("Result is: <pre>" + req.responseText + "</pre>");
    }
  };
  req.send(null);
}); 
```

已经回答，但更多信息在这里[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:38:24.070

这是因为浏览器已经实现了一项称为跨站点脚本预防的功能。例如，您可以在同一服务器上的 php 文件上执行 ajax 请求，并使用 curl 查询目标页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T08:37:34.260

有三种方法可以做到这一点：

1.  借助从您的域提供的非基于浏览器的代理，该代理将代表您获取数据。您还可以使用可以绕过同源策略的插件。
2.  围绕同源策略使用 JSONP 或其他类似的黑客方式。这将要求 Web 服务器支持 JSONP。
3.  禁用跨域策略（*绝对不推荐*；*非常危险*）

# vb.net - 使用 WinNT 字符串连接更改用户密码时出错（并验证当前密码）

> ID：10257459
> 
> 赞同：3
> 
> 时间：2012-04-21T08:31:17.307
> 
> 标签：vb.net, active-directory, invoke

我正在开发一个网站，它将对用户进行身份验证并用新密码更改旧密码。

我正在使用 WinNT 字符串连接和设置密码，没有旧密码检查，工作正常。

我的代码如下：

```
'actual setting password
            Dim entryD As New DirectoryEntry("WinNT://" + Environment.MachineName + ",computer")

            Dim NewUser As DirectoryEntry = entryD.Children.Find(username, "user")

            Dim nativeobject As Object = NewUser.NativeObject
            NewUser.Invoke("SetPassword", New Object() {strPassNew})

            NewUser.CommitChanges()
            'setting password ends 
```

这工作正常，但身份验证代码不起作用。

如下：

```
'authentication starts
            Dim adsiPath As String

            adsiPath = String.Format("WinNT://{0}/{1},user", domain, username)

            Dim userEntry = New DirectoryEntry(adsiPath, username, password, AuthenticationTypes.Secure)

            'Dim nativeobject1 As Object = userEntry.NativeObject

            Dim newobj As ActiveDs.IADsUser = userEntry.NativeObject

            authent = True

            'authentication ends 
```

这会进行身份验证，但它抛出的异常是：

```
logon failure: unknown username or bad password 
```

第一次，但如果我再做一次，错误是：

> “不允许同一用户使用多个用户名多次连接到服务器或共享资源。断开与服务器或共享资源的所有先前连接，然后重试。”

我不想发生这种情况......我不想使用 LDAP，我想要一个解决方案来验证旧密码。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-02T10:03:38.020

我的代码中有此错误，要求将域用户添加到系统的本地管理员组。在第一次尝试后测试代码时，我曾经得到“与服务器的多个连接......”错误，然后我如果稍后（一个小时左右）尝试代码代码，它工作正常。通过各种形式搜索后，我知道我们可以看到用户使用登录到计算机

```
NET SESSION /LIST 
```

远程系统的 cmd 中的命令，似乎当我们使用 WinNT 提供程序时，它实际上会在远程计算机上创建一个空闲超时的用户会话（可能存在其他程序正在创建会话的情况），这会在您第二次尝试时与连接发生冲突. 所以我尝试删除上一个会话

```
NET SESSION \\RequestingComputerName /DELETE 
```

然后我没有得到错误。如果这不能解决问题，那么最后的手段是重新启动系统。

# mysql - 查询自定义元数据字段？

> ID：10257460
> 
> 赞同：1
> 
> 时间：2012-04-21T08:31:17.520
> 
> 标签：mysql, perl

这是我的客户要求调整现有 Perl 脚本的请求。然而，让我感到困惑的是他们的实际数据库结构。

要求看起来很简单：

```
only pull records where _X begins with 1, 2, or 9. 
```

但是，底层数据库并不是那么简单，这是他们 DBA 的指导方针：

"_X 是自定义元数据字段。数据库将此数据存储在 customData 表中的行中，而不是列中。为了以有效的方式查询自定义数据表，您需要知道从中获取的自定义字段的 Field_ID字段定义表：

```
SELECT Field_ID FROM FieldDef WHERE Name = "_X";

   This returns:
   10012 
```

“现在您可以查询CustomData。例如：

```
SELECT Record_ID FROM CustomData where Field_ID="10012" AND StringValue="2012-04"; 
```

他还建议，就我而言，可能是：

```
"SELECT Record_ID FROM CustomData where Field_ID="10012" AND (StringValue LIKE '1%' || StringValue LIKE '2%' || StringValue LIKE '9%') 
```

奇怪的是，现有的 Perl 脚本不包含像“Select Record_ID FROM”这样的东西，而是像“SELECT StringValue FROM”一样。

所以这就是为什么我在这里很困惑：什么是“存储在行中，而不是列中”？为什么先查询 Field_ID 表再查询 CustomData？这个周末我将无法与他们中的任何人交流，但真的希望对整个事情有所了解，希望专家可以帮助我整理整个结构。

更多信息（表架构）：

[http://pastebin.com/ZiDTCCC0](http://pastebin.com/ZiDTCCC0)

现有的perl脚本：（关注第72-136行）

[http://pastebin.com/JHpikTeZ](http://pastebin.com/JHpikTeZ)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:55:24.780

他们似乎使用的是某种[实体-属性-值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)模型，实体存储为整数并在另一个表 (FieldDef) 中解释。

您很好地解释了您是如何查询它的（尽管您可以在一个查询中使用连接或子查询来完成），您的问题似乎是您不知道 Perl 脚本是如何做到的。不幸的是，如果我们没有看到 Perl 脚本，我们也不能：]

# html - 如何从html中动态创建的表中检索数据

> ID：10257461
> 
> 赞同：-1
> 
> 时间：2012-04-21T08:31:22.653
> 
> 标签：html, struts2

我使用一些文本框和下拉列表动态生成 html 表，用户将在其中输入他们的输入。如何使用 struts2 检索该数据并传递给 Action 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:28:47.007

1 您必须在表中的每个行参数中添加行标识符

```
 <form action="/my_action_path/my_action.do">
    <table>
      <tr>
        <td>
          //This is your row id
          <input type="hidden" name="rowId" value="**1**"/>

          <input type="text" name="first_textbox_**1**"/>
        </td>
        <td>
          <input type="text" name="second_textbox_**1**"/>
        </td>
      </tr>
      <tr>
        <td>
          //This is your row id
          <input type="hidden" name="rowId" value="**2**"/>

          <input type="text" name="first_textbox_**2**"/>
        </td>
        <td>
          <input type="text" name="second_textbox_**2**"/>
        </td>
      </tr>
    </table>
    <input type="submit"/>
  </form> 
```

2 这是动作代码

```
import java.lang.String;

public class MyAction extends ActionSupport {
  //Struts put all your "rowId" values here
  private String[] rowId = new String[];

  public String execute(){
  //Get "request" object
    HttpServletRequest request = ServletActionContext.getRequest();
  //Read all your parameters using they names
    for(int i = 0; i< rowId.length; i++){
      String firstTextbox = (String) request.getParameter("first_textbox" + "_" + i);
      String secondTextbox = (String) request.getParameter("second_textbox" + "_" + i);
      //Ta-dam. Your have your parameters from the row i
    }
  }

  public String[] getRowId() {
    return rowId;
  }

  public void setRowId(String[] rowId) {
    this.rowId = rowId;
  }
} 
```

# iphone - 主队列上的 dispatch_sync 和 executeFetchRequest:error 之间的死锁：

> ID：10257462
> 
> 赞同：8
> 
> 时间：2012-04-21T08:31:26.560
> 
> 标签：iphone, objective-c, ios, core-data, deadlock

我正在`dispatch_sync()`主队列中阻塞。`executeFetchRequest:error:`在这个块中，最终会调用到。有时，这会导致死锁。

这是线程 1，它显示了在主线程上调用的块，然后调用`executeFetchRequest:error:`

```
#0  0x981f3876 in __psynch_mutexwait ()
#1  0x97a016af in pthread_mutex_lock ()
#2  0x0135be32 in -[_PFLock lock] ()
#3  0x0135be0a in -[NSPersistentStoreCoordinator lock] ()
#4  0x01371d1c in -[NSManagedObjectContext(_NSInternalAdditions) lockObjectStore] ()
#5  0x013702c0 in -[NSManagedObjectContext executeFetchRequest:error:] ()
#6  0x0000a701 in -[NSManagedObjectContext(Convenience) fetchObjectsForEntityName:onlyIDs:withPredicate:] at /Users/mike/Dropbox/src/Tracky-iPhone/Tracky/Tracky/NSManagedObjectContext(Convenience).m:50
#7  0x00065270 in +[NSManagedObject(ContextAdditions) contextForID:managedObjectContext:] at /Users/mike/Dropbox/src/Tracky-iPhone/Tracky/Tracky/NSManagedObject+ContextAdditions.m:40
#8  0x0006597e in __85+[NSManagedObject(ContextAdditions) createContextIfNeededForID:managedObjectContext:]_block_invoke_0 at /Users/mike/Dropbox/src/Tracky-iPhone/Tracky/Tracky/NSManagedObject+ContextAdditions.m:55
#9  0x00065aad in __85+[NSManagedObject(ContextAdditions) createContextIfNeededForID:managedObjectContext:]_block_invoke_050 at /Users/mike/Dropbox/src/Tracky-iPhone/Tracky/Tracky/NSManagedObject+ContextAdditions.m:64
#10 0x023cf8d9 in _dispatch_barrier_sync_f_slow_invoke ()
#11 0x023d0509 in _dispatch_main_queue_callback_4CF ()
#12 0x01ae9803 in __CFRunLoopRun ()
#13 0x01ae8d84 in CFRunLoopRunSpecific ()
#14 0x01ae8c9b in CFRunLoopRunInMode ()
#15 0x019b47d8 in GSEventRunModal ()
#16 0x019b488a in GSEventRun ()
#17 0x004ba626 in UIApplicationMain () 
```

我可以看到它`executeFetchRequest:error:`在 's lock 上被阻塞`NSPersistentStoreCoordinator`，但我不知道当前是谁锁定了它。

原件`dispatch_sync()`是从不同的线程发生的，如果它很重要，这里是：

```
Thread 18, Queue : (null)
#0  0x981f1c5e in semaphore_wait_trap ()
#1  0x023d1bda in _dispatch_thread_semaphore_wait ()
#2  0x023d0cb2 in _dispatch_barrier_sync_f_slow ()
#3  0x023d0e0f in dispatch_barrier_sync_f ()
#4  0x023d0f4c in _dispatch_sync_slow ()
#5  0x0006563a in +[NSManagedObject(ContextAdditions) createContextIfNeededForID:managedObjectContext:] at /Users/mike/Dropbox/src/Tracky-iPhone/Tracky/Tracky/NSManagedObject+ContextAdditions.m:63
#6  0x0006e2ee in __109-[ItemFetcher createOrConfigureObjectWithDescriptor:withContext:jsonObjectIDKey:modelObjectIDKey:entityName:]_block_invoke_0 at /Users/mike/Dropbox/src/Tracky-iPhone/Tracky/Tracky/ItemFetcher.m:78
#7  0x023ce330 in _dispatch_call_block_and_release ()
#8  0x023cff0c in _dispatch_queue_drain ()
#9  0x023cfcb4 in _dispatch_queue_invoke ()
#10 0x023cf402 in _dispatch_worker_thread2 ()
#11 0x97a04b24 in _pthread_wqthread () 
```

这是原始调度的代码：

```
+ (Context *) createContextIfNeededForID: (NSString *) contextID managedObjectContext:(NSManagedObjectContext *) moc
    {
    // See if this context is in the main MOC. This call needs to happen synchronously on the main queue, if we're
    //  not on the main queue
    Context * (^contextFromMainMOCBlock)(void) = 
        ^ `Context` * {
        // We are guaranteed to be in the main here; look at how this block is invoked.
        return [self contextForID:contextID managedObjectContext:[UIApplication trackyAppDelegate].managedObjectContext] ;
        } ;

    __block Context *contextFromMainMOC = nil ;

    if( [UIApplication trackyAppDelegate].managedObjectContext == moc )
        contextFromMainMOC = contextFromMainMOCBlock() ;
    else
        dispatch_sync(dispatch_get_main_queue(), ^{
            contextFromMainMOC = contextFromMainMOCBlock() ; // <-- here
            }) ;
… 
```

`contextForID:contextID managedObjectContext:`在调用`executeFetchRequest:error:`.

**更新**

这是其余的堆栈跟踪。AFAIK 他们没有做任何有趣的事情，尽管我可能是错的。

```
Thread 3, Queue : (null)
#0  0x981f490a in kevent ()
#1  0x023d0372 in _dispatch_mgr_invoke ()
#2  0x023cebe1 in _dispatch_mgr_thread ()
Thread 5 WebThread, Queue : (null)
#0  0x981f1c22 in mach_msg_trap ()
#1  0x981f11f6 in mach_msg ()
#2  0x01b8610a in __CFRunLoopServiceMachPort ()
#3  0x01ae95d5 in __CFRunLoopRun ()
#4  0x01ae8d84 in CFRunLoopRunSpecific ()
#5  0x01ae8c9b in CFRunLoopRunInMode ()
#6  0x04776420 in _ZL12RunWebThreadPv ()
#7  0x97a02ed9 in _pthread_start ()
Thread 6 com.apple.NSURLConnectionLoader, Queue : (null)
#0  0x981f1c22 in mach_msg_trap ()
#1  0x981f11f6 in mach_msg ()
#2  0x01b8610a in __CFRunLoopServiceMachPort ()
#3  0x01ae95d5 in __CFRunLoopRun ()
#4  0x01ae8d84 in CFRunLoopRunSpecific ()
#5  0x01ae8c9b in CFRunLoopRunInMode ()
#6  0x00ebae30 in +[NSURLConnection(Loader) _resourceLoadLoop:] ()
#7  0x00dcc4d6 in -[NSThread main] ()
#8  0x00dcc447 in __NSThread__main__ ()
#9  0x97a02ed9 in _pthread_start ()
Thread 10 com.apple.CFSocket.private, Queue : (null)
#0  0x981f3b42 in select$DARWIN_EXTSN ()
#1  0x01b1a7cb in __CFSocketManager ()
#2  0x97a02ed9 in _pthread_start () 
```

这是`contextID:managedObjectContext:`其中调用的方法`dispatch_sync()`：

```
+ (Context *) contextForID: (NSString *) contextID managedObjectContext:(NSManagedObjectContext *) moc
    {
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"cid == %@", contextID] ;
    NSSet *contexts = [moc fetchObjectsForEntityName:@"Context" onlyIDs:NO withPredicate:predicate] ;

    // Integrity check
    NSAssert1(contexts.count < 2, @"More than one context with the same CID exists: %@" , contexts) ;

    return [contexts anyObject] ;
    } 
```

`fetchObjectsForEntityName:onlyIDs:withPredicate:`看起来像这样：

```
- (NSSet *)fetchObjectsForEntityName:(NSString *)newEntityName onlyIDs: (BOOL) onlyIDs
    withPredicate:(id)stringOrPredicate, ...
    {
    NSEntityDescription *entity = [NSEntityDescription
        entityForName:newEntityName inManagedObjectContext:self];

    NSAssert1( entity != nil , @"entity not found for \"%@\"" , newEntityName ) ;

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];
    [request setIncludesPropertyValues:!onlyIDs] ;

    if (stringOrPredicate)
        {
        NSPredicate *predicate;
        if ([stringOrPredicate isKindOfClass:[NSString class]])
            {
            va_list variadicArguments;
            va_start(variadicArguments, stringOrPredicate);
            predicate = [NSPredicate predicateWithFormat:stringOrPredicate
                arguments:variadicArguments];
            va_end(variadicArguments);
            }
        else
            {
            NSAssert2([stringOrPredicate isKindOfClass:[NSPredicate class]],
                @"Second parameter passed to %s is of unexpected class %@",
                sel_getName(_cmd), NSStringFromClass(stringOrPredicate));
            predicate = (NSPredicate *)stringOrPredicate;
            }
        [request setPredicate:predicate];
        }

    NSError *error = nil;
    NSArray *results ;
    @try {
         results = [self executeFetchRequest:request error:&error];
    }
    @catch (NSException *exception) {
        NSLog(@"Exception caught: %@" , exception) ;
    }

    if (error != nil)
        {
        [NSException raise:NSGenericException format:@"%@",[error description]];
        }

    return [NSSet setWithArray:results];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T11:09:48.600

检查您`NSManagedObjectContext`的`concurrencyType`. 您的上下文似乎有`NSMainQueueConcurrencyType`，它在主线程中运行所有请求。来自**[苹果参考](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/index.html#//apple_ref/c/econst/NSMainQueueConcurrencyType)**：

> NSMainQueueConcurrencyType
> 
> 指定上下文将与主队列相关联。

如果我是对的，您需要将类型更改为`NSPrivateQueueConcurrencyType`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:31:28.250

要提供更多帮助，您需要在堆栈跟踪中显示所有方法的代码以及行号。这样，它就可以关联起来。

此外，看起来你有很多线程。我认为您将不得不检查其他人以了解正在发生的事情。

调用同步操作时必须非常小心，尤其是当它可能从其他同步操作中调用时。

# matlab - 在愤怒的小鸟物理学上需要帮助

> ID：10257466
> 
> 赞同：0
> 
> 时间：2012-04-21T08:32:04.317
> 
> 标签：matlab, physics

作为一个学校项目，我开始在 matlab 中制作愤怒的小鸟克隆。在做了一点工作之后，我意识到也许我比我能咀嚼的多一点。

目前我正在研究它的物理特性，虽然我了解游戏背后的机制（碰撞、惯性等等），但我不知道我将如何在游戏中实现它。我是编程新手，但我喜欢它并且很快就掌握了它。

在愤怒的小鸟中，我们正在处理几个 OBB 之间的碰撞，我有一个检测碰撞的算法。我有一个功能可以检查每个盒子的所有角落并查看它是否在另一个盒子内。我意识到这不是最好的方法，但由于我无法想象分离轴定理，我选择不使用它。

当碰撞发生时，盒子正在穿透另一个盒子，当这种情况发生时，我在它的前一个点和当前点之间做一个线性插值。我在一个实例中对所有碰撞点执行此操作（这是我解决多个碰撞的方法）。使用插值，我检测到发生的第一次碰撞并实现碰撞响应。

我目前的问题是，当一个盒子放在另一个盒子上时，这种方法效果不佳，因为在每个实例中，顶部盒子都会非常轻微地穿透底部盒子，我会将其弹回。这导致我的整个事情停止，因为我回到过去，解决了碰撞，然后在下一个实例中碰撞再次发生。

我的问题是，我如何解决多个盒子相互叠放的问题。

我查看了[http://www.wildbunny.co.uk](http://www.wildbunny.co.uk)上所有关于物理学的文章，并试图了解他的方法，但虽然我了解他的工作，但我不知道他是如何做到的。我也不知道任何动作脚本，所以他的大部分代码对我来说都是胡言乱语。

我浏览了互联网上的其他几个指南，但对我来说似乎没有任何意义。

这对我有很大帮助，如果有人能告诉我哪种方法通常用于实现像愤怒的小鸟这样的游戏的图形，特别是多重碰撞方法（我的足够好还是我需要像wildbunny在他的博客中谈到的投机性接触），以及基于盒子问题的盒子。

这个项目很难在两周内完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T08:44:49.993

是的，在 matlab 中实现一个强大的多体物理引擎，从头开始，没有物理引擎工作经验和编程经验，对于一个为期两周的项目来说太难了。

# xml - DB2 UPDATE 存储过程通过 INPUT XML 循环

> ID：10257468
> 
> 赞同：1
> 
> 时间：2012-04-21T08:32:21.387
> 
> 标签：xml, stored-procedures, cursor, db2, batch-processing

我是 DB2 和存储过程的新手。我想在 DB2 中编写一个存储过程来更新表。该过程有一个 XML 文档作为其输入参数。

我需要遍历 XML 的每条记录，选择一些节点并更新表中的相应行。此存储过程将用于批量更新表。

我有过程的伪代码，但不确定它在 DB2 中的外观。

INPUT XML 的格式为

```
<Root>
  <Record>
    <a>1234</a>
    <b>1</b>
    <c>2</c>
    <d>A</d>
    <e>B</e>
    <f>C</f>
  </Record>
<Record>
    <a>1235</a>
    <b>1</b>
    <c>2</c>
    <d>A</d>
    <e>B</e>
    <f>C</f>
  </Record>
</Root> 
```

该过程将类似于

```
CREATE PROCEDURE UPDATE_BATCH (IN INDOC XML)
P1: BEGIN

FOR rec AS rec CURSOR FOR(
SELECT 
Record.XMLQUERY('//Record/a/text()') AS A, 
Record.XMLQUERY('//Record/b/text()') AS B,
Record.XMLQUERY('//Record/c/text()') AS C,
Record.XMLQUERY('//Record/d/text()') AS D,
Record.XMLQUERY('//Record/e/text()') AS E,
Record.XMLQUERY('//Record/f/text()') AS F
FROM
TABLE (INDOC)Record--Not Sure how to construct table from input xml
)
DO
UPDATE XYZ.TEMP_TABLE
SET ACOL=Record.A,
BCOL=Record.B,
CCOL=Record.C,
DCOL=Record.D,
ECOL=Record.E
WHERE
FCOL=Record.F;
END FOR;
END P1 
```

请帮我创建上述程序。我无法在 DB2 中获得 ForEach、XML 节点处理、CURSOR 和 LOOPING 的正确语法。

**回答**

```
CREATE PROCEDURE UPDATE_BATCH(IN DOC XML)
BEGIN
MERGE INTO XYZ.TEMP_TABLE AS T
USING (SELECT X.* FROM 
XMLTABLE('$d/Root/Record' passing DOC as "d"
COLUMNS 
        "A" VARCHAR(10) PATH 'a',
        "B" VARCHAR(10) PATH 'b',
        "C" VARCHAR(10) PATH 'c',
        "D" VARCHAR(10) PATH 'd',
        "E" VARCHAR(10) PATH 'e',
        "F" VARCHAR(10) PATH 'f' 
) AS X) AS XT
ON T.FCOL=XT."F"
WHEN MATCHED THEN
UPDATE
SET
T.ACOL=XT."A",
T.BCOL=XT."B",
T.COL=XT."C"
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:20:25.980

Db2 对 XML 数据提供了不错的支持，因此您可以通过一些选项来分解 XML 并将其应用于一个或多个表。

您正在寻找的功能是[XMLTABLE](https://www.ibm.com/support/producthub/db2/docs/content/SSEPGG_11.5.0/com.ibm.db2.luw.sql.ref.doc/doc/r0022195.html)。这是迄今为止将 XML 分解为单个表格结果集的最灵活的方法。

当传入的 XML 文档包含需要转至多个表的数据时，[DECOMPOSE XML DOCUMENT](https://www.ibm.com/support/producthub/db2/docs/content/SSEPGG_11.5.0/com.ibm.db2.luw.admin.cmd.doc/doc/r0022721.html)语句功能强大，但它需要预先注册的 XML 模式文档 (XSD)，其中包含为每个输入 XML 节点指定关系目标的特殊注释。此外，该`DECOMPOSE XML DOCUMENT`语句只能写入永久表，而不能写入已[声明的全局临时表](https://www.ibm.com/support/producthub/db2/docs/content/SSEPGG_11.5.0/com.ibm.db2.luw.sql.ref.doc/doc/r0003272.html)(DGTT)，后者通常用于在数据写入最终目的地之前暂存和调整数据。

至于使用游标来应用碎数据，您可以将整个循环替换为单个[MERGE](https://www.ibm.com/support/producthub/db2/docs/content/SSEPGG_11.5.0/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html)语句，该语句使用结果集 from`XMLTABLE`作为输入表达式。有很多示例展示了如何使用 Db2 的`MERGE`语句进行“upsert”处理，其中每个传入的行可以由 an`INSERT`或 an应用，`UPDATE`具体取决于指定的键是否已存在于目标表中。

# c# - EF 不会延迟加载视图

> ID：10257469
> 
> 赞同：2
> 
> 时间：2012-04-21T08:32:31.527
> 
> 标签：c#, linq, entity-framework, dbcontext, entity-framework-4.3

我有一种方法可以从数据库中的视图中获取全部数据：

```
public IQueryable<vw_FullWebIgnoringApprovalStatus> GetAllFullWebIgnoringApprovalStatus() 
{
    IQueryable<vw_FullWebIgnoringApprovalStatus> query = 
        Context.vw_FullWebIgnoringApprovalStatus;

    return query;
} 
```

当我执行以下方法时，它会立即执行它不应该执行的查询：

```
var model = _repo.GetAllFullWebIgnoringApprovalStatus()
    .Where(x =>
        (!reid.HasValue && !destid.HasValue && !coid.HasValue) ||
        (reid.HasValue && x.Reid == reid.Value) ||
        (destid.HasValue && x.Destid == destid.Value) ||
        (coid.HasValue && x.Coid == coid.Value)
    ); 
```

它应该延迟加载查询，但没有。跟视图有关系吗？我正在使用 EntityFramework.4.3.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:24:25.260

我不相信 LINQ to Entities 可以识别 HasValue，因为无法将其转换为 SQL。因此，我认为在这种情况下，L2E 必须先执行查询，然后才能评估 HasValue。我以前从未见过这种特殊行为。我认为您需要找到另一种方式来表达您的可空性测试。我很想看看 SQL。

这是一个有趣的想法： [http ://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/56484ed7-9664-44f4-84a0-69da3901c817](http://social.msdn.microsoft.com/Forums/en/csharplanguage/thread/56484ed7-9664-44f4-84a0-69da3901c817)

LINQ 围绕 nullables 有各种奇怪的行为，所以你必须真正注意结果-> [http://msdn.microsoft.com/en-us/library/bb738687.aspx](http://msdn.microsoft.com/en-us/library/bb738687.aspx)

朱莉

# c - 夹板：在 for 循环中解析错误

> ID：10257470
> 
> 赞同：7
> 
> 时间：2012-04-21T08:32:35.370
> 
> 标签：c, static-analysis, splint

我使用夹板作为 c99 代码的静态分析器。

Splint 似乎不太符合 c99 标准。因此我应用了这个补丁： [http ://www.cs.virginia.edu/pipermail/splint-discuss/attachments/20080718/52cc25f6/attachment.obj](http://www.cs.virginia.edu/pipermail/splint-discuss/attachments/20080718/52cc25f6/attachment.obj)

现在，由于声明不在顶部，我没有收到任何**解析错误。**

但是，如果我在 for 语句中放入变量声明，我仍然会在 for 循环中遇到**解析错误。**例如：

```
for(int i = 0; i < 10; i++)
{
} 
```

一种解决方法是这样写：

```
int i;
    for(i = 0; i < 10; i++){
    } 
```

但由于我不想调整我所有的 for 循环，我想知道是否有可用的补丁来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:02:15.440

由于还没有答案，我只是引用了维基百科关于夹板文章的[文章](http://en.wikipedia.org/wiki/Splint_%28programming_tool%29)

> Splint 最近的开发活动明显放缓。根据 SourceForge 的 CVS，截至 2009 年 1 月，存储库中的最新更改发生在 2008 年 8 月。2008 年全年只有两次对存储库的写入访问。维护者表示开发停滞不前，该项目需要新的志愿者。

由于在循环头中声明变量是符合 C99 的（并且有争议的首选风格），因此在解决此问题之前，您应该避免使用夹板。

# android - 自线程访问数据库以来，我想启动一个需要上下文的线程，但我没有数据库实例化的上下文

> ID：10257475
> 
> 赞同：-1
> 
> 时间：2012-04-21T08:33:43.377
> 
> 标签：android

我想在Android启动时启动一个线程，所以我做了这样的事情

```
public class StartUpWelcomer extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        arg0.startService(new Intent(arg0, StartUpService.class));
    } 
```

用我的清单：

```
<receiver android:name=".StartUpWelcomer">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>
<service android:enabled="true" android:name=".StartUpService" /> 
```

这是我的 StartUpService 课程

```
public class StartUpService extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    public void onCreate()
    {
        BackgroundApplication application = (BackgroundApplication)this.getApplication();
        ReminderThread reminderThread = new ReminderThread(null);
        if(!reminderThread.failed)
        {
            reminderThread.start();
            application.setRunningThread(reminderThread);
            Log.d("SERVICE", "CREATION CONFIRMED");
        }
        else
        {
            Log.d("SERVICE", "CREATION CANCELLED");
        }
    } 
```

这是 ReminderThread 类的代码

```
public ReminderThread(Context ctx)
{
    this.ctx = ctx;
    db = new SQLdb(ctx);
    //And there's some other code here that accessed the database functions.
} 
```

好的，这就是我的意图......我希望 StartUpWelcome 激活 StartUpService（它正在工作）。

StartUpService 将实例化一个新线程，激活它并使其在我的应用程序（称为 BackgroundApplication 类）中保持可访问性。

这就是问题所在...... ReminderThread 实际上需要访问数据库（此处为 SQLite），因此 ReminderThread 实例化了数据库以访问它。但是，我的数据库构造函数需要一个 Context 来实例化。我不知道从哪里获得上下文（从服务类），我通常从活动类获得它......（暂时我把“null”放在那里）

另一个问题是，不知何故我发现这总是会导致 NullPointerException ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:46:34.027

如果您在 Service 中初始化 ReminderThread，则使用`new ReminderThread(getApplicationContext());`Service 类中的 ApplicationContect。

# c++ - 可以使函数模板对不适当的类型而不是错误执行默认操作吗？

> ID：10257476
> 
> 赞同：2
> 
> 时间：2012-04-21T08:33:47.850
> 
> 标签：c++, c++11

我想创建一个函数，如：

```
template < typename Other, typename Func, typename T, typename ...Rest >
void  visit( Other &&other, Func &&visitor )
{
    // Wrap "visitor" and "other" with "std::forward" calls
    visitor( make_object<T>(other) );
    visit<Other, Func, Rest...>( other, visitor );
} 
```

问题是“Func”可能不支持列表中的所有类型，然后编译器会在第一个错误的类型处出错。我不想要那个；我希望它执行一些默认操作（就我而言，什么都不做）。

```
template < typename Other, typename Func, typename T, typename ...Rest >
void  visit( Other &&other, Func &&visitor )
{
    // Wrap "visitor" and "other" with "std::forward" calls
    if ( Func-can-support-T-either-directly-or-by-converting-it )
        visitor( make_object<T>(other) );
    else
        ;  // might be a throw or a logging instead
    visit<Other, Func, Rest...>( other, visitor );
} 
```

我想我可以做 2 个重载的辅助函数，一个`std::true_type`基于兼容性测试，另一个`std::false_type`. 但是如何创建测试？

（对更好的标题和/或附加标签的建议表示赞赏。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:09:25.303

与计算中的所有问题一样，您只需要一个简单的间接级别:)

这是一个简单的`apply`函数，当事情不像你希望的那样工作时，它有一个默认的实现。

```
template <typename Func>
void apply(Func&& f, ...) { std::cout << "default\n"; }

template <typename Func, typename T>
auto apply(Func&& f, T&& t) -> decltype(f(std::forward<T>(t))) {
    return f(std::forward<T>(t));
} 
```

我们可以很容易地练习它：

```
struct Foo {};
struct Bar {};

struct F {
    void operator()(Foo) { std::cout << "Foo\n"; }
    void operator()(Bar) { std::cout << "Bar\n"; }
};

int main() {
    F f;
    Foo foo;
    Bar bar;
    int i;
    apply(f, foo);
    apply(f, bar);
    apply(f, i);
} 
```

Ideone 给出[以下输出](http://ideone.com/DkXw0)：

```
Foo
Bar
default 
```

正如预期的那样。

# java - 打印到文件

> ID：10257477
> 
> 赞同：1
> 
> 时间：2012-04-21T08:33:50.607
> 
> 标签：java, ubuntu, printing, jtable

在我之前在[这里](https://stackoverflow.com/questions/10250772/append-text-for-printing-before-and-after-a-jtable/10251531#comment13178413_10251531)提出的问题之后，我可以设法打印我需要的页面，但有一个小问题。使用 Jtable.print 总是会出现一个带有打印首选项的窗口，选择打印机甚至在文件中打印结果。使用 pj.print() 连接时，我的打印机得到了结果，之前没有其他提示。我试过 pj.printDialog(); 并给我带有打印机等的提示窗口，但普通打印机或打印到文件也没有给出结果。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:14:34.663

# android - 无法保存哪个视图有焦点，因为焦点视图没有 id

> ID：10257482
> 
> 赞同：0
> 
> 时间：2012-04-21T08:34:53.450
> 
> 标签：android, android-activity

当我尝试从我的应用程序拨打号码时遇到问题。我在活动组下的地图活动中有一个按钮，单击我想拨打 911。但是，当我单击该按钮时，我在日志猫中看到单击了该按钮，但未启动拨号活动. 我在 logcat 中看到的问题是：

> 无法保存哪个视图具有焦点，因为焦点视图 com.android.internal.policy.impl.PhoneWindow$DecorView@437e0ab8 没有 id。

这是代码：

```
 btnDial.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            String toDial = "tel:911";
            Intent myIntent = new Intent(Intent.ACTION_CALL,Uri.parse(toDial));
            //myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            MyMapActivity.this.getParent().startActivity(myIntent);
            Log.d("MyMapActivity", "Dial button is called.......................");
        }
    }); 
```

我已经尝试使用设置`FLAG_ACTIVITY_NEW_TASK`，使用`getParent.startActivity(myIntent)`，使用`MyMapActivity.this.startActivity(myIntent)`，但没有任何效果。这是堆栈跟踪，

```
04-21 14:07:28.187: D/MyMapActivity(767): Dial button is called.......................
04-21 13:44:42.416: D/PhoneWindow(444): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@437e0ab8 has no id. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T09:18:27.110

我有类似的问题，我发现在我的情况下，问题是由请求焦点但未集中的 EditText 引起的。

如果您有类似的事情，请检查您的活动，然后删除请求焦点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T05:03:12.343

i think this a problem to add Call permission in your Androidmanifest. Add this permission in androidmanifrst.

`<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T03:33:38.627

试着看看这个答案：[onactivityresult 在android 中使用Gallery 时没有被调用](https://stackoverflow.com/questions/14152638/onactivityresult-not-getting-called-while-using-gallery-in-android) 它也适用于我。我们把活动的父母放在外面。希望这对你也有帮助。

# compilation - 如何在包含 :gen-class 的脚本中使用 clojure 的 compile 函数？

> ID：10257484
> 
> 赞同：1
> 
> 时间：2012-04-21T08:35:27.257
> 
> 标签：compilation, clojure, classpath, read-eval-print-loop

经过三天的挫折，我必须寻求帮助。作为 clojure 的新手，我想使用改编自 clojure.org 的 AOT 页面的 (compile 'examples.hello) 从 REPL 编译这个脚本：

```
(ns examples.hello
    (:gen-class))

(defn -main
  [greetee]
  (println (str "Hello " greetee "!"))) 
```

我将 JEdit 与 clojure 控制台插件一起用作我的编辑器，并用于严肃的项目 leiningen。

我在 $HOME 的目录结构是：clojure-1.3.0 （编辑以节省空间）

```
|-- classes
|-- clojure-1.3.0.jar
|-- clojure-1.3.0-slim.jar
|-- src
|   |-- examples
|   |   |-- hello.clj
|   |   `-- hello.clj~
|   |-- jvm
| 
```

错误消息是：

```
FileNotFoundException Could not locate examples/hello__init.class or examples/hello.clj on classpath:   clojure.lang.RT.load (RT.java:430) 
```

一些问题：

a) 如果我正在编译，为什么编译函数要查找我正在尝试创建的类文件？

b）使编译功能起作用的“正确”步骤是什么？c）在我对这个问题的互联网搜索中，有很多提到“类路径”或“你的类路径”；假设类路径引用 clojure.jar 等并且脚本正在处理而不是 java $CLASSPATH 是否正确，这自 java 1.5 以来一直是不必要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:07:43.717

我为这个尴尬的答案道歉，但我还不了解 Clojure 构建以及其他一些语言。所以，请多多包涵。我是从您使用像 lein 这样的构建工具的角度来写这个答案的。

你的主要——我的是 addr-verify——必须在项目附带的 project.clj 指定的名称空间中。所以我的主要模块是 core.clj，它把它的命名空间声明为 addr-verify，并且由于没有更好的术语声明或使用 gen-class。

我的 project.clj 表示 main 是 addr-verify。

lein 构建 Clojure 应用程序的好处之一是，它会在您创建项目时为您设置所有这些，例如`lein create my-test-proj`.

以下是我的 ./addr-verify/project.clj 中的相关行

```
(defproject addr-verify "1.0.0-SNAPSHOT"
  :description "TODO: add summary of your project"
  :dependencies [[org.clojure/clojure "1.2.1"]
                 [clojure-csv/clojure-csv "1.2.4"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clj-http "0.1.3"]]
   :aot [addr-verify]
   :main addr-verify) 
```

以下是 ./addr-verify/src/addr_verify/core.clj 的前几行

```
(ns addr-verify
  (:gen-class)
  (:require [clojure.string :as cstr])
  (:require [clojure.contrib.str-utils :as ustr])
  (:require [clj-http.client :as client])
  (:use clojure-csv.core)
  (:use [clojure.tools.cli])
  (:import java.util.Date)
  (:import java.lang.Thread)
  (:import java.io.File) 
```

# ember.js - 获取和设置 TextField 的值

> ID：10257486
> 
> 赞同：1
> 
> 时间：2012-04-21T08:35:52.047
> 
> 标签：ember.js

我有这个代码供查看：

```
App.TodoView = Em.View.extend({
    labelView: Em.TextField.extend({

    }),
    createNew:function () {
        console.log(this.labelView.get('value'));
    }
}); 
```

这个模板：

```
{{#view App.TodoView}}    
    {{view labelView}}    
    {{#view Em.Button target="parentView" action="createNew"}}Add{{/view}}    
{{/view}} 
```

我收到以下错误：

```
Uncaught TypeError: Object (subclass of Ember.TextField) has no method 'get' 
```

我也想使用 insertNewLine 方法，所以我可以设置`Em.TextField`in 模板的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T12:10:40.067

问题是您正在定义一个类并试图从中获取`value`。您更想要的是获得`value`一个具体实例。这可以通过将 的 绑定`value`到`LabelView`一个值来实现，然后可以在 中检索该值`App.TodoView`，在这种情况下`todoLabel`，请参阅[http://jsfiddle.net/pangratz666/PTPsV/](http://jsfiddle.net/pangratz666/PTPsV/)：

**车把**：

```
{{#view App.TodoView }}
    <!-- Bind the value of the LabelView to todoLabel on the App.TodoView -->
    {{view LabelView valueBinding="todoLabel" }}
    {{#view Em.Button target="parentView" action="createNew" }}Add{{/view}}
{{/view}} 
```

**JavaScript**：

```
App.TodoView = Em.View.extend({
    LabelView: Em.TextField.extend(),

    createNew: function(){
        var value = this.get('todoLabel');
        console.log( 'le todoLabel', value );
    }
});​ 
```

请注意，由于您正在定义一个类`LabelView`，因此约定以大写形式编写，而实例则以小写形式编写。[请参阅The Emberist](http://www.emberist.com/2012/04/09/naming-conventions.html)的一篇关于命名约定的优秀博文。

此外，要访问 an 上的属性`Ember.Object`，您应该始终使用`get`，所以它是`this.get('todoLabel')`而不是`this.todoLabel`。

* * *

您现在可以实现更多方法，例如`insertNewline`and `cancel`- 注意 it's`insertNewline`和 not `insertNewLine`，请参阅[text_support](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/text_support.js#L56)。

结果将如下所示，请参阅[http://jsfiddle.net/pangratz666/9ZLAC/](http://jsfiddle.net/pangratz666/9ZLAC/)：

```
App.TodoView = Em.View.extend({
    LabelView: Em.TextField.extend({
        insertNewline: function(){
            this.get('parentView').createNew();
        },            
        cancel: function(){
            this.set('value', '');
        }
    }),

    createNew: function(){
        var value = this.get('todoLabel');
        console.log( 'le todoLabel', value );
    }
});​ 
```

# iphone - 如何在 iphone 的接触点删除或覆盖 bezierpath？

> ID：10257487
> 
> 赞同：1
> 
> 时间：2012-04-21T08:36:00.833
> 
> 标签：iphone, uiimage, uitouch, uicolor, uibezierpath

我正在使用以下代码为图像着色`UIBezierPath`。有颜色选择器，用户可以从中选择颜色。并使用该颜色贝塞尔路径将绘制在图像上。但是当用户在图像中的某个位置填充颜色时，它会从颜色选择器中选择颜色并再次在同一位置填充颜色。在这种情况下，以前绘制的颜色就在那里。我想删除以前填充的颜色并想填充新颜色。仅当用户在相同位置填充颜色时。在这里，我已经得到了`UIBezierPath`已经绘制的点。有一种方法`UIBezierPath removeAllPoints`。但它正在从路径中删除所有点。我只想从 uibezierpath 中删除唯一的接触点。我怎样才能做到这一点？

```
#import "MyLineDrawingView.h"

@implementation MyLineDrawingView
@synthesize selImage;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {

        arrBezierPaths=[[NSMutableArray alloc]init ];
        globalPath=[[UIBezierPath alloc]init];

        myPath=[[UIBezierPath alloc]init];

        self.userInteractionEnabled = TRUE;

        myPath.lineWidth=30;
        brushPattern=[UIColor redColor];
        NSLog(@"initWithFrame method called");
        NSDictionary *dict=[NSDictionary dictionaryWithObjectsAndKeys:myPath,@"Path",brushPattern,@"Color", nil];
        [arrBezierPaths addObject:dict];

    }
    return self;
}

- (void)drawRect:(CGRect)rect
{

    for (int i=0; i<[arrBezierPaths count]; i++)
    {
        NSDictionary *dict=[arrBezierPaths objectAtIndex:i];
        UIColor *tempBrushpatter=[[UIColor alloc]init ];
        tempBrushpatter=[dict valueForKey:@"Color"];

        globalPath=[dict valueForKey:@"Path"];

        [globalPath strokeWithBlendMode:kCGBlendModeOverlay alpha:1.0];
      [tempBrushpatter setStroke];

    }

   }

#pragma mark - Touch Methods
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

    [globalPath moveToPoint:[mytouch locationInView:self]];

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
       CGPoint pointTouched = [mytouch locationInView:self];

for(int i=0;i<[arrBezierPaths count];i++)
{
    NSDictionary *dictTemp=[arrBezierPaths objectAtIndex:0];
    UIBezierPath *temppath=[dictTemp valueForKey:@"Path"];
    if([temppath containsPoint:pointTouched])
    {

      // [tempPath removeAllPoints];
        NSLog(@"This point already contain some path");
    }
}
   [globalPath addLineToPoint:[mytouch locationInView:self]];

[self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

}
-(void)changeColor:(UIColor *)color
{
   UIBezierPath *temp=[[UIBezierPath alloc]init];

  //  self.userInteractionEnabled = TRUE;

    temp.lineWidth=30;
    UIColor *brushColor=color;

    NSDictionary *dict=[NSDictionary dictionaryWithObjectsAndKeys:temp,@"Path",brushColor,@"Color", nil];
    [temp release];
    [arrBezierPaths addObject:dict];
    brushPattern=[color retain];
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:16:30.767

需要更多细节。根据我的假设，您正在绘制一条具有所需颜色的线，但是下次您只想用另一种颜色而不是整条线替换触摸点是吗？

# facebook - 使用 admin.setAppProperties 更新应用程序

> ID：10257493
> 
> 赞同：0
> 
> 时间：2012-04-21T08:37:01.820
> 
> 标签：facebook, api, admin

我正在使用带有 admin.setAppProperties 的 API 更新我的应用程序。

如何设置“页面标签宽度”和“页面标签图像”？我在任何文档中都找不到这个。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T12:32:08.160

已在[此处报告了相同的错误](https://developers.facebook.com/bugs/284403804966080)

可能您应该使用图形 api 等待这种情况发生

希望这可以帮助

# iphone - CCLayerColor 未按预期工作

> ID：10257499
> 
> 赞同：1
> 
> 时间：2012-04-21T08:37:50.760
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我尝试添加一个图层，其所有目的都是用白色填充整个场景。

我尝试这样做：

```
// Inside a cass which extends CCScene
- (id)init {
    if (self = [super init]) {                    
        // Create the flash layer on level restart
        _flashLayer = [[CCLayerColor alloc] init];
        [_flashLayer setColor:ccc3(255, 255, 255)];
        [self addChild:_flashLayer z:0];
        [_flashLayer release];        
    }

    return self;
} 
```

问题是无论我如何设置图层的颜色，都会出现黑屏。另一件事，如果我尝试按如下方式创建图层：

```
 _flashLayer = [[CCLayerColor alloc] initWithColor:ccc4(255, 255, 255, 255)]; 
```

我收到以下错误：

```
Incompatible type for argument 1 of 'initWithColor:' 
```

我查看了源代码，一切似乎都符合预期。

任何人都可以对这个问题有所了解吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:09:02.650

你有两个选择：

```
_flashLayer = [[CCLayerColor layerWithColor:ccc4(255, 255, 255, 255)];
[self addChild:_flashLayer z:0]; 
```

或者

```
// the key is to add (CCLayerColor *) to cast
// or you will meet 'incompatible type for argument' error at compile time
_flashLayer = [(CCLayerColor *)[CCLayerColor alloc] initWithColor:ccc4(255, 255, 255, 255)];
[self addChild:_flashLayer z:0];
[_flashLayer release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:50:41.620

只是一个建议。检查图层的 contentSize。在 cocos2d-x 实现设置 contentSize 更改要绘制的多边形顶点。我现在没有iPhone版的cocos2d，但我觉得可以一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T06:33:51.497

在OP的第一个代码中：
`[_flashLayer setColor:ccc3(255, 255, 255)]`应该是`ccc4(255, 255, 255,255)`
So：
`_flashLayer = [[CCLayerColor alloc] initWithColor: ccc4(255,255,255,255)];`

# java - 店铺地图 作为字符串

> ID：10257502
> 
> 赞同：9
> 
> 时间：2012-04-21T08:38:40.887
> 
> 标签：java, hibernate, postgresql, enums, jpa-2.0

我需要帮助在 JPA2 中存储地图，其中键和值都是枚举 ( `Map<Enum, Enum>`)。使用 Hibernate 作为我的 JPA 提供程序，它将枚举存储为 blob，但我需要将数据存储为字符串。我尝试了以下注释来解决此问题：

```
@ElementCollection(fetch = FetchType.EAGER)
@MapKeyEnumerated(value = EnumType.STRING)
public Map<Enum, Enum> getElementsMap() {
    return elementsMap;
} 
```

但是数据仍然作为 blob 存储到数据库中。有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:17:50.977

@Enumerated 用于定义值的类型。以下映射到表，其中键和值的列都是 varchars，枚举的名称将被保存：

```
@Enumerated(EnumType.STRING)
@ElementCollection(fetch = FetchType.EAGER)
@MapKeyEnumerated(value = EnumType.STRING)
public Map<MyEnum, MyOtherEnum> elementsMap = new HashMap<>(); 
```

它将产生大致下表：

```
[NAME_OF_ENTITY]_ELEMENTSMAP (
  NAME_OF_ENTITY_ID INTEGER, 
  ELEMENTSMAP VARCHAR(255), 
  ELEMENTSMAP_KEY VARCHAR(255)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T08:55:00.833

几乎每个 Java 对象都有一个`toString() method`如果你想在数据库中表示你的 Map，那么我建议这是你的选择。

但是我不得不问你确定它是你想要存储的 MAP 而不是键或值的元素吗？

# sql - 如何根据 GROUP BY 从 SQL Server 中获取行

> ID：10257506
> 
> 赞同：0
> 
> 时间：2012-04-21T08:40:53.050
> 
> 标签：sql, sql-server, sql-server-2008

如何从前 2 个包 id 中获取行，而不是 SQL Server 中的所有行？

例如：Sample_table

```
tranid   packid referencenum
1         1      123456
2         1      654982
3         2      894652
4         3      684521
5         3      684651
6         4      987566 
```

根据上面的示例表，我如何获得包 2 的行（对于 1 和 2），下一个实例我又需要 3 和 4 行

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:05:02.207

如果我没有错过什么，这是：

```
SELECT * 
FROM PacksTable p
WHERE p.Id IN (1, 2) 
```

只会给你表中两个的数据`pack_id`。

目前尚不清楚您在这里寻找什么。您可以通过分组`pack_id`获得前两个`pack_id`，但是您想对分组的`referencenum`值做`pack_id`什么，即您将为此列使用什么聚合函数，，，`Min`等等`Max`？？！。

**换句话说：**如果您在第一次寻找`Top`最小值`pack_id`，即：1、2，您将不得不回答这个问题：使用什么聚合函数来处理相应的`referencenum`值？？，

例如，您可以`MIN`这样使用：

```
SELECT TOP(2) p.packid, MIN(p.referencenum)
FROM PacksTable p
GROUP BY(p.packid)
ORDER BY p.packid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:04:26.197

请通过以下查询。

```
select * from sample_table group by packid; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T20:01:25.670

您可以使用与函数结合的变量`DENSE_RANK`来一次通过两个 packid 窗口：

```
create table #packing (tranid int,packid int,referencenum int)
insert into #packing values 
  (1,1,123456)
, (2,1,654982)
, (3,2,894652)
, (4,3,684521)
, (5,3,684651)
, (6,4,987566)
go

declare @i int=-1;
declare @j int=0;

while @@ROWCOUNT>0 begin
    set @i+=2;
    set @j+=2;
    ; with a as (
        select *, dr=dense_rank()over(order by packid) from #packing
    )
    select tranid, packid, referencenum 
    from a 
    where dr between @i and @j;
end
go

drop table #packing
go 
```

结果：

![在此处输入图像描述](../Images/6fe23fbf59c1b47681b2e2d7f08ce3c5.png)

# iphone - iPhone 上的 OpenCV 项目 - opencv.hpp 构建问题

> ID：10257508
> 
> 赞同：5
> 
> 时间：2012-04-21T08:41:22.653
> 
> 标签：iphone, objective-c, opencv

我已经克隆了[https://github.com/niw/iphone_opencv_test](https://github.com/niw/iphone_opencv_test)并尝试替换

```
#import <opencv2/imgproc/imgproc_c.h>
#import <opencv2/objdetect/objdetect.hpp> 
```

和

```
#import <opencv2/opencv.hpp> 
```

在`OpenCVTestViewController.m`文件中。但是 XCode 抛出了以下错误：

```
iphone_opencv_test/opencv_device/include/opencv2/opencv.hpp:55:10: fatal error: 'opencv2/calib3d/calib3d.hpp' file not found [2]
 #include "opencv2/calib3d/calib3d.hpp" 
```

所以，我试图`#include "opencv2/calib3d/calib3d.hpp"`从`opencv.hpp`文件中删除该行。抛出以下错误：

```
iphone_opencv_test/opencv_device/include/opencv2/ml/ml.hpp:2075:10: fatal error: 'map' file not found [2]
 #include <map> 
```

我也尝试将 .m 更改为 .mm，但这似乎是徒劳的。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T10:31:06.383

OpenCV 的 MAX/MIN 宏和 Cocoa 的 MAX/MIN 之间存在冲突。它会在编译时导致像这样的奇怪错误。要绕过这个问题，您可以： 1\. 在预定义的头文件顶部添加 2\. 完全解耦 opencv 和 obj-c 代码，这样就没有 .m/.mm 文件包含 . 例如，这可以通过在中间使用 boost GIL 或使用自定义 vanilla C++ 类将图像数据从 Cocoa 框架传递到 opencv C++ 图像处理类来完成。

# c# - 在 C# 中过滤文本文件

> ID：10257509
> 
> 赞同：2
> 
> 时间：2012-04-21T08:41:49.153
> 
> 标签：c#

我如何只打开带有 .txt 扩展名的文件，如果文件不是 .txt 文件，我希望我的程序弹出一条错误消息我想要一个可以在下面修改此代码的代码

```
private void button1_Click(object sender, EventArgs e)
{
   OpenFileDialog of = new OpenFileDialog();
   of.ShowDialog();
   textBox1.Text = of.FileName;
} 
```

有人可以帮忙假设我想放这个循环

```
if fileextension is .txt then 
OpenFileDialog of = new OpenFileDialog();
            of.ShowDialog();
            textBox1.Text = of.FileName;
else show error message(like can not open this file) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T08:46:39.477

正如我正确理解的那样，您只想在对话框中看到 txt 文件？如果是这样，请使用[Filter](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filter.aspx)属性。

```
OpenFileDialog of = new OpenFileDialog();
of.Filter = "Text files (*.txt)|*.txt"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T08:42:59.970

可以为此使用[Path.GetExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)方法

```
OpenFileDialog of = new OpenFileDialog();
if(of.ShowDialog() == DialogResult.OK)
{
    if(Path.GetExtension(of.FileName).Equals("txt",
                             StringComparison.InvariantCultureIgnoreCase))
                                textBox1.Text = of.FileName;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T08:50:44.293

如果您只允许 txt 扩展名，则不应允许所有扩展名。

```
of.Filter = "Text Files|*.txt"; 
```

将使 OpenFileDialog 只接受 txt 扩展文件。

# android - 将数据库中的图像和文本添加到 Android 中的列表

> ID：10257515
> 
> 赞同：-1
> 
> 时间：2012-04-21T08:43:20.403
> 
> 标签：android, android-activity, views, listactivity

我在理解术语及其用途方面遇到了一些问题。

我想知道*适配器*是什么意思，它的用途是什么，它会在哪里使用？请提供一个简单的解释。

另外，我想通过列表视图加载图像和文本，我该如何实现？想象一下，我在数据库中有大量元素，如何通过 List 更快地加载它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:53:41.100

[Adapter](http://developer.android.com/reference/android/widget/Adapter.html)对象充当 AdapterView 和该视图的基础数据之间的桥梁[。](http://developer.android.com/reference/android/widget/AdapterView.html)`Adapter`提供对数据项的访问。`Adapter`还负责为数据集中的每个项目制作一个视图。

An`AdapterView`是一个视图，其子级由 确定`Adapter`。

AdapterViews的一些示例是`ListView`、`GridView`和。`Spinner``Gallery`

[使用 AdapterView 绑定数据](http://developer.android.com/guide/topics/ui/binding.html)

对于不同类型的适配器，请查看博客 ertry *[Android Adapters: an Introduction](http://androidforbeginners.blogspot.in/2010/01/android-adapters-introduction.html)*

还强烈推荐[Romain Guy 的 Google I/O 演示](http://developer.android.com/videos/index.html#v=N6YdwzAvwOA)。

# javascript - jQuery 传输事件绑定

> ID：10257517
> 
> 赞同：0
> 
> 时间：2012-04-21T08:44:05.973
> 
> 标签：javascript, javascript-events, jquery

因此，对于清除 html 文件输入，我的理解是必须替换它们，因为出于安全原因，它们的值不能使用 javascript 重置

在这些文件输入上有事件绑定，将它们传输到新文件输入元素的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:53:31.830

采用[`.clone(true)`](http://api.jquery.com/clone/)

# objective-c - 从 CoreData 获取数据进行计算

> ID：10257523
> 
> 赞同：-1
> 
> 时间：2012-04-21T08:45:06.227
> 
> 标签：objective-c, xcode, core-data, nsarray

我正在开发我的第一个应用程序，并且我正在慢慢学习objective-c。但现在我被困住了。该应用程序计算两个日期之间的天数，到目前为止一切顺利。但是现在我将提供创建假期组的可能性，这些假期组将从总账单中逃脱。我为该组创建了两个实体，一个 CoreData 用于该组，另一个用于该组的假期（见图）。如何获取应用程序代码中包含的日期以进行必要的计算？ ![在此处输入图像描述](../Images/178445e774a271625d8d2dffb8f547f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:29:56.307

如果您要计算日期之间的距离，请使用它。

```
NSDate *date1;
NSDate *date2;
NSTimeInterval timeBetweenDates = [date2 timeIntervalSinceDate:date1]; 
```

`NSTimeInterval`只是一个`#typedef`for `double`。

如果您尝试进行其他计算，请举一些例子。

# multithreading - 线程终止

> ID：10257524
> 
> 赞同：1
> 
> 时间：2012-04-21T08:45:18.293
> 
> 标签：multithreading, winapi, memory, pointers

我正在开发一种多线程的下载管理器。每个线程都有自己的 ID/Handles/URL/等。

我会实现类似暂停/恢复/取消下载的功能。我将 ThreadHandles 存储在列表视图中，因此我可以暂停/恢复/终止下载线程。我还没有尝试暂停/恢复，因为我目前正在取消下载。唯一的问题是如果我挂起一个线程，FileHandles/DLHandles 不会关闭。由于句柄堆叠在线程中。是否有可能获得我为 CreateThread 传递的指针？

我如何创建线程

```
type
 PTR_Download = ^TTDownload;
 TTDownload = record
 URL: string;
 ThreadHandle : Longword;
 // .....
end;

function DownloadFile ( p : pointer ) : Integer; stdcall; // The Thread
var
 _infos: TTDownload;
begin
 CopyMemory(@_infos, p, SizeOf(_infos));
 DownloadFile (_infos.URL); // just example
 // .... and so on
 // .... Handles get created here FileHandle/InternetOpenHandle/etc..
end;

function StartNewDownload (Link : String)
var
 DL : PTR_Download;
 ThreadID : DWORD;
begin
 DL := PTR_Download(LocalAlloc(LPTR, SizeOf(TTDownload)));
 DL^.URL := Link;
 DL.ThreadHandle := CreateThread(nil, 0, @DownloadFile, DL, 0, ThreadID);
end;

function AnotherFunction (dummy : String) : Bool;
begin
 GetParameterPointerOfThreadHandle (AnyHandleHere) // Something like that?!
end; 
```

我基本上只需要关闭已终止线程的打开句柄的东西。有任何想法吗？

# hibernate - Hibernate的二级缓存？

> ID：10257526
> 
> 赞同：1
> 
> 时间：2012-04-21T08:46:00.867
> 
> 标签：hibernate, caching

我了解到 Ehcache 可以用作 Hibernate 的二级缓存。

但是，什么是一级缓存？它有什么用？一级缓存是否与二级缓存通信？有人可以准确解释在两级系统中缓存数据时会发生什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T08:57:20.893

Hibernate 的第一级缓存位于您的 Hibernate 会话中。它的生命周期很短，而且一级缓存的数量与 Hibernate 会话的数量一样多。通常，Web 应用程序中每个用户请求一个会话。

第一级缓存包含会话中使用的所有对象，以及尚未持久化到底层数据库的脏对象。刷新会话后，一级缓存中的所有脏对象将通过二级缓存传播，并保存到您的数据库中。

只有一个二级缓存，用作数据库和会话中所有一级缓存之间的缓存。因此，当有人从数据库加载一个对象时，它将被保存在二级缓存中。这样，当其他人加载相同的对象时，它不会来自数据库，而是来自二级缓存。对象会一直保留在二级缓存中，直到不再需要，具体取决于您的缓存驱逐策略。

当有人更改对象并将其刷新到数据库时，第二个缓存中的对象也会更改。用户已经在他们的一级缓存中拥有相同的对象，并尝试更改和刷新它，因此会出现异常。

# entity-framework - EF CodeFirst - 在数据库创建后创建索引

> ID：10257531
> 
> 赞同：1
> 
> 时间：2012-04-21T08:47:28.870
> 
> 标签：entity-framework, code-first, indexing, entity-framework-migrations

我正在将我的项目从数据库优先迁移到代码优先。

Entity Framework 做了一些很好的工作来创建我的新数据库（应该模仿旧的）。
我结合使用数据注释和流畅的 API 来描述我的表格。

我的数据库有一些索引，我也希望 Entity Framework 来创建它们。执行此操作的旧方法似乎是定义您自己的初始化程序并使用自定义 T-SQL。

但是现在我们有了 EF 迁移，这样做应该会更容易。
我似乎无法弄清楚如何将 CreateDatabaseIfNotExists<> 与自动迁移相结合来创建索引。我尝试使用 MigrateDatabaseToLatestVersion<,> 但在创建数据库后似乎没有执行迁移。

既然我们拥有 Entity Framework 4.3，那么在创建数据库时创建索引和约束的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T18:28:41.387

`CreateDatabaseIfNotExists`如果您想使用迁移，请不要使用。从一开始就使用`MigrateDatabaseToLatestVersion`- 它也会创建您的数据库。将您的索引创建代码（调用`CreateIndex`）放入迁移类的 Up 方法中。

如果您已经拥有现有数据库并且想要使用迁移，则必须首先[创建初始迁移](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)。

# php - 使用 php mysql 从两个或 mre 表中选择数据

> ID：10257533
> 
> 赞同：1
> 
> 时间：2012-04-21T08:47:44.173
> 
> 标签：php, mysql

我需要实现一个搜索功能。我有两个名为`tbl_table`and的表`tbl_roomavailability`。我需要搜索在特定日期间隔内可用的酒店，即需要搜索房间是否可用，还需要从酒店表中显示酒店。查看我的代码：

```
SELECT
    DISTINCT( H.`int_hotel_id`), H.str_hotelName, H.str_logo_thumb, H.str_aboutHotel
FROM
    tbl_hotel H
INNER JOIN
    tbl_roomavailability RA
        ON H.int_hotel_id = RA.int_hotel_id
WHERE
    bit_complete = 1 AND
    H.int_zone_id = 10 AND
    H.int_city_id = 1 AND
    H.int_hotelcatId = 3 AND
    RA.str_date IN (1334966400,1335052800,1335139200,1335225600,1335312000,1335398400,1335484800,1335571200,1335657600,1335744000)
ORDER BY
    H.int_hotel_id DESC; 
```

使用此查询，我需要显示与区域匹配的整个酒店 ID，城市状态来自`tbl_hotel`。目前我的结果是房间可用性表中存在的酒店。

我需要同时显示两者。即需要检查酒店是否存在于房间可用性中，以及满足酒店表中其他条件的酒店。

假设我有 3 家酒店

酒店 1 - 状态 = 7，区域 = 3，出现在房间可用性表中
酒店 2 状态 7 区域 = 3，**不出现在**房间可用性中
酒店 3 状态 8 区域 4，出现在房间可用性表中
酒店 4 状态 7区域 3**出现**在房间可用性中，但几个月 内**不可用**

当我搜索状态为 7 和区域 3 的酒店时，我需要显示酒店 1 和酒店 2（我不想显示酒店 4，因为它有几个月不可用）。

我想很清楚
有人知道吗？
请回复

# jsf - Richfaces：用于 HTML 标记的 NoSuchFieldElementException AjaxChildrenRenderer

> ID：10257534
> 
> 赞同：1
> 
> 时间：2012-04-21T08:47:59.463
> 
> 标签：jsf, richfaces, facelets

我使用 Richfaces 3.3.3.Final 和 Seam 和 facelet。

我在我的应用程序上插入了一个分析器，我有一个奇怪的行为。当我记录应用程序抛出的所有异常时，我在 10 分钟内有超过 10 000 个 NoSuchFieldElementException。

经过多次搜索，我发现了问题：

当我通过 a4j:support 启动 ajax 请求时，AjaxChildrenRenderer 在这些行 (199-202) 中抛出 NoSuchFieldElementException：

```
String componentType = (String) component.getClass().getField("COMPONENT_TYPE").get(null);
result = _specialComponentTypes.contains(componentType); 
```

组件变量是一个 UIInstructions，它没有“COMPONENT_TYPE”字段。所以，异常是正常的。我的页面中包含的每个 html 块都会引发此异常。例如：

```
<h2>Test</h2>
<span></span> 
```

当我使用 html 标记重新渲染块时，会引发异常。我有非常复杂的页面，所以我得到了很多这样的例外。

我该怎么做才能避免这种异常？可能是一个解析器选项，以避免进入此类 html 块。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:26:23.077

作为临时解决方案，您可以修改源代码以添加`instanceof`应跳过该块的检查，然后将修改后的源代码与您的 webapp 一起发布。将其作为具有相同包/类名的单个类发送到 Web 项目本身（javadoc-document 它正确），它总是优先于 JAR 中的类加载，或者作为修改和重建的 JAR 文件。

```
if (!(component instanceof UIInstructions)) {
    String componentType = (String) component.getClass().getField("COMPONENT_TYPE").get(null);
    result = _specialComponentTypes.contains(componentType);
} 
```

作为一个持久的解决方案，您应该将其作为性能问题报告给 RichFaces 人员，以便他们修复它并发布新更新，但我认为他们不会那么优先考虑 3.3.x 更新。即，它可能需要比您预期的更长的时间。

# android-layout - android中带有倒数计时器的进度条

> ID：10257537
> 
> 赞同：2
> 
> 时间：2012-04-21T08:48:55.687
> 
> 标签：android-layout

我的布局中需要一个进度条，总时间为 30 秒，并且每秒都会打勾。基本上我希望我的应用程序的用户看到他在时间结束前有 30 秒的时间。

这是我写的一段代码。但这给了我一个没有活动的空白进度条。请帮忙。我究竟做错了什么

```
public class MySeekBarActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    
    setContentView(R.layout.main);
    setProgressBarVisibility(true);      

    final ProgressBar progressHorizontal = (ProgressBar) findViewById(R.id.progress_horizontal);
    progressHorizontal.setProgress(progressHorizontal.getProgress()* 100);

    new CountDownTimer(30000, 1000) { 
        public void onTick(long millisUntilFinished) {              
            progressHorizontal.incrementProgressBy(1);
            int dtotal = (int) ( 30000 - millisUntilFinished ) /30000 * 100;
            progressHorizontal.setProgress(dtotal);                
        }            
        public void onFinish() {
            // DO something when 2 minutes is up
       }
   }.start();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:25:57.840

由于两件事，您有一个类型转换错误：

*   你除以一个整数，这会导致小数被四舍五入，
*   此外，您过早地转换结果，因此即使您除以浮点数/双精度数，结果也会被四舍五入。

明白我的意思 - 你可以安全地从你的代码中删除转换为 int ，它无论如何都会编译。这意味着您的最终数字是一个 int，并且由于您之前没有进行任何强制转换，这意味着您在代码中很早就丢失了十进制信息。

这是一个可能的修复：

```
int dtotal = (int) (( 30000 - millisUntilFinished ) /(double)30000 * 100); 
```

要在将来解决此类错误，请**制作一个带有包含方程式的循环的虚拟 Java 程序，并打印出中间结果，例如：**

```
public class NumberTester {

    //define the constants in your loop
    static final int TOTAL_TIME = 30000;
    static final int INTERVAL = 1000;

    public static void main(String[] args) {

        //perform the loop
        for(int millisUntilFinished = TOTAL_TIME;millisUntilFinished >=0;millisUntilFinished -= INTERVAL) {
            int dtotal = (int) (( TOTAL_TIME - millisUntilFinished ) /(double)TOTAL_TIME * 100);
            System.out.println(dtotal);
        }

    }

} 
```

另外，一些重要的事情：

*   不要在*onCreate*中启动计时器- 此时您的活动还不可见！请改用*onResume*。
*   *在onPause*中杀死你的计时器。让定时器和线程像这样不受管理是不好的形式，并且可能导致奇怪的错误。
*   不要使用[“幻数”](http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Unnamed_numerical_constants)。将所有常量值放在静态最终类成员中，就像我在示例中所做的那样。当您决定更改这些值时，这将为您省去很多麻烦。

**编辑：**至于为什么你的进度条没有完成，那是因为*onTick*方法的工作方式与你可能假设的有点不同。要了解我的意思，请添加：

```
System.out.println("Milis:" + millisUntilFinished);
System.out.println("dtotal:" + dtotal); 
```

到你的*onTick*方法。这些值显然不会倒数到 0（因此在 dtotal 的情况下为 100，它是从 millisUntilFinished 派生的） - 您必须对此进行补偿。

# image - 在数据库的特定目录中查找重复或相似的图像

> ID：10257542
> 
> 赞同：2
> 
> 时间：2012-04-21T08:49:16.803
> 
> 标签：image, image-processing, image-comparison, cbir

我对此很陌生，我的反对意见是构建一些 Web 应用程序来实现用户将图像存储在数据库中作为存储，如果有一对或一些图像存储两次或更多，我想要减少.

所以，我所需要的只是如何找到已经存储在数据库中的重复或相似图像，或者当用户尝试在第一步导入它时更好，并且他们的图像是否与已经存储在数据库中的图像相似数据库，系统可以警告不要存储该图像。

我只是想开发如何在数据库的特定目录上找到一些相似或重复的图像。你能从一开始就给我一些关于如何构建它的解释，以及我应该从基本步骤中学习什么来完成这个，比如教程或其他东西。如果可能的话，我想学很多东西。

在此先感谢，我真的需要这个帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T01:57:22.590

查找相似图像的解决方案要复杂得多，因此我将坚持首先查找重复图像。最简单的做法是获取图像位的 SHA1 哈希。这是 C# 中的一些代码来完成此操作（见下文）。至于将散列存储在数据库中，我建议您使用`binary(20)`数据类型来存储散列的结果。这允许您的 SQL 服务器索引和查询比将此哈希存储为字符串或其他格式的速度要快得多。

```
private static byte[] GetHashCodeForFile(string file)
{
    int maxNumberOfBytesToUse = 3840000;

    using (Stream sr = File.OpenRead(file))
    {
        byte[] buffer = (sr.Length > maxNumberOfBytesToUse) ? new byte[maxNumberOfBytesToUse]: new byte[sr.Length];

        int bytesToReadIn = (sr.Length < maxNumberOfBytesToUse) ? (int)sr.Length : maxNumberOfBytesToUse;

        sr.Read(buffer, 0, bytesToReadIn);
        System.Security.Cryptography.HashAlgorithm hasher = System.Security.Cryptography.SHA1.Create();
        byte[] hashCode = hasher.ComputeHash(buffer);
        return hashCode;

    }
} 
```

搜索相似图像是目前正在研究的一个难题。这有点取决于你如何定义相似。寻找相似图像的一些突出方法是：

*   检查图像文件中的元数据（EXIF 或类似）标签以了解创建日期，类似的图像可以在彼此相似的时间拍摄。这可能不是你想要的最好的东西。
*   计算两个图像的相对直方图，并比较它们在每个颜色通道中的增量。这样做的好处是允许编写 SQL 查询并且不受图像大小的影响。使用此方法将找到已转换为缩略图的图像。
*   在两个图像之间执行图像减法并查看图像与纯黑色（全为零）的接近程度。我不知道使用 TSQL 查询执行此操作的方法，并且此代码对于需要调整大小的图像可能会变得棘手。
*   计算图像的轮廓（通过 Sobel、canny 或其他边缘检测器），然后将两张图像相减，看看它们的轮廓有多少重叠。同样，我认为这不能在 SQL 中处理。

# java - 加载另一个应用程序时运行我的应用程序

> ID：10257547
> 
> 赞同：1
> 
> 时间：2012-04-21T08:50:28.930
> 
> 标签：java, android, service, broadcastreceiver, power-management

这有点难以解释，但我会尝试..
有我的应用程序，我们称之为 appA 和另一个应用程序（我没有创建，它已经存在），我们称之为 appB。我希望在加载 appB 的那一刻， appA 也会加载。
我知道通过设置间隔几秒钟的服务基本上是可能的，但它显然会耗尽电池电量。
或者我可以以某种方式制作一个 BroadcastReciever 并实现一个 appB 的侦听器，但我不知道如何做到这一点......
是否有可能以更少的电池消耗方式？
如果我建议的第二种方式是最好的，我该怎么做？
非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:27:51.453

这是不可能的。如果可能的话，您可以创建一个在每次启动另一个应用程序时自行打开的应用程序，这是病毒通常具有的效果。

# php - 可以对mysql中的varchar字段进行自定义排序吗？

> ID：10257550
> 
> 赞同：1
> 
> 时间：2012-04-21T08:51:36.307
> 
> 标签：php, mysql

我的表中有一个名为“priority”的字段，类型为 varchar(20)，它可以有这四个值：show stopper、high、medium、low

现在，当我使用查询“按优先级从问题中选择优先级”对其进行排序时，结果是：1\. 高 2\. 低 3\. 中 4\. 显示塞子

但我需要以下顺序：1\. 显示塞子 2\. 高 3\. 中 4\. 低

请建议我在上面的书面查询中可以做什么来按此顺序获取结果？我知道如果我将 varchar 更改为 enum，问题就会得到解决。但是由于某些项目概念限制，我无法更改字段类型，所以请告诉我其他一些解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T08:58:04.137

```
 ...
             ORDER BY CASE priority WHEN 'show stopper' THEN 1
             WHEN 'high' THEN 2
             WHEN 'medium' THEN 3
             WHEN 'low' THEN 4
             END 
```

或者

```
 ORDER BY FIELD(priority,'show stopper', 'high', 'medium', 'low'); 
```

# javascript - 如何打电话 在提交按钮上单击

> ID：10257551
> 
> 赞同：0
> 
> 时间：2012-04-21T08:51:37.283
> 
> 标签：javascript, jquery, html, onclick

*   请参考下面的代码，我正在学习 jquery，我想显示 **标签名为**#child** on submit button click using javascript/jquery 任何人都可以帮助我如何调用按钮点击**

***   还想打电话给**#child和#home** **>>（下一个按钮）和<<（上一个按钮）**上的标签分别在代码中单击>>和<<写为<和&glt。？谁能帮我吗 ？**

     **```
     <div data-role="page" id="home">
                <div data-theme="d" data-role="header">
                    <h3>
                        The Grand Bhagvati
                    </h3>
                    <a data-role="button" data-inline="true" data-direction="reverse" data-transition="slide" href="#home">
                        &lt;&lt;
                    </a>
                    <a data-role="button" data-inline="true" data-direction="reverse" data-transition="fade" href="#child">
                        &gt;&gt;
                    </a>
                </div>
                <div data-role="content">
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput1">
                                User:
                            </label>
                            <input id="textinput1" placeholder="Khushu" type="text" />
                        </fieldset>
                    </div>
                    <input data-theme="d" ="submitbtn" value="Login" type="submit"  onSubmit="redirect()"/>
                </div>
                <div data-theme="a" data-role="footer" data-position="fixed" >
                    <h3>
                        Page1
                    </h3>

                    </div>
            </div> 
    ```

    ```
     <div data-role="page" id="child">
                <div data-theme="d" data-role="header">
                    <h3>
                        The Grand Bhagvati
                    </h3>
                    <a data-role="button" data-inline="true" data-direction="reverse" data-transition="slide" >
                        &lt;&lt;
                    </a>
                    <a data-role="button" data-inline="true" data-direction="reverse" data-transition="fade" >
                        &gt;&gt;
                    </a>
                </div>
                <div data-role="content">
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput1">
                                User:
                            </label>
                            <input id="textinput1" placeholder="Khushu" type="text" />
                        </fieldset>
                    </div>
                    <input data-theme="d" value="Login" type="submit"  onsubmit="redirect()"/>
                </div>
                <div data-theme="a" data-role="footer" data-position="fixed" >
                    <h3>
                        Page1
                    </h3>

                    </div>
            </div> 
    ```**** 

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:04:53.053

显示标签使用

```
$('#child').show();  // where child is the id of the element 
```

并隐藏...

```
$('#child').hide(); 
```

或者，您可以简单地在隐藏/显示之间切换，如下所示：

```
$('#child').toggle(); 
```

将这些附加到按钮的 onclick 事件...

```
$(document).ready(function() {
    $('#buttonID').click(function() {
        $('#child').toggle();
    });
}); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:22:18.610

以下代码用于javascript

`var Home= document.getElementById("home");`

```
Home.style.display="none";//To hide the div
Home.style.display="";//To display the div 
```****

# ios - 自定义输入视图：如何防止它们在方向更改期间褪色？

> ID：10257554
> 
> 赞同：1
> 
> 时间：2012-04-21T08:52:15.807
> 
> 标签：ios, uitextfield, orientation, autoresize, inputview

我无法将创建的`UIControl`子类分配为文本字段的`inputView`.
它显示 - 正如预期的那样 - 当文本字段变为并在其退出状态`firstResponder`时隐藏。`firstResponder`

但是，我遇到的问题是处理不同的方向：
我`autoresizingMask`为控件的子视图设置了一个，以便在更改其宽度时可以平滑过渡。
问题是，一旦我将其设置为`inputView`. 当通过三击切换启用模拟器慢动作动画时，您可以非常清楚地看到视图在两种状态之间**渐变。**
这不是我想要的。首先它看起来很奇怪，其次这不符合我的需求。由于`inputView`包含一个`UIScrollView`-like 元素，它会在淡入淡出期间停止其减速动画。

现在我的问题是：有没有办法防止褪色发生？我真的很想使用该`inputView`属性，因为它使我免于编写大量代码行。
另外，是否可以为不同的方向指定不同的高度？
这里有两个演示项目，展示了[它的样子](http://dl.dropbox.com/u/3722472/Coding/Objective-C/How%20it%20is.zip)和[我想要的样子](http://dl.dropbox.com/u/3722472/Coding/Objective-C/How%20it%20should%20be.zip)。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:10:31.610

您可以为 DatePicker 类创建一个方法，该方法会针对不同方向更改视图的几何形状和布局，并实现该方法

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

在您的视图控制器中并调用视图上的方法以对齐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T22:13:29.417

直到今天我还没有找到阻止它们褪色的方法。

# c# - 加密发布到 FTP 站点的文件

> ID：10257555
> 
> 赞同：1
> 
> 时间：2012-04-21T08:52:37.133
> 
> 标签：c#, encryption, ftp

我正在使用 VS 2010 (C#)。我正在尝试加密（解密）从 FTP 站点上传（下载）的文件。我认为这比在上传之前使用本地临时文件进行加密和在下载之后进行解密要快。我在下面的代码中收到错误。我似乎无法将各种流类型对齐（即 FileStream、CryptoStream 和 Stream）。任何帮助深表感谢。

```
public void Upload(byte[] desKey, byte[] desIV)
    {
        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(Destination);
        request.Method = WebRequestMethods.Ftp.UploadFile;

        request.Credentials = new NetworkCredential(UserName, Password);

        FileStream fStream = File.Open(SourceFile, FileMode.OpenOrCreate);

        CryptoStream responseStream = new CryptoStream(fStream, new DESCryptoServiceProvider().CreateDecryptor(desKey, desIV), CryptoStreamMode.Read);

        byte[] fileContents = Encoding.UTF8.GetBytes(responseStream.ToString());

        responseStream.Close();  ///ERROR here
        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        response.Close();
    } 
```

单元测试：

```
public void CleanEncryptUploadTest()
    {           
        FT.ftp uploadTest = new FT.ftp();

        uploadTest.UserName = "ausername";
        uploadTest.Password = "apassword";
        uploadTest.SourceFile = "D:\\Temp\\Test\\file.txt";
        uploadTest.Destination = "ftp://ftp.mysite.com/test2.txt";

        byte[] key = ASCIIEncoding.ASCII.GetBytes("TestZone");
        byte[] initVector = ASCIIEncoding.ASCII.GetBytes("TestZone");

        uploadTest.Upload(key, initVector);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:05:03.963

这对我有用，我使用了一个内存流并将加密的字节写入它。还将加密流模式更改为写入。

```
 public void Upload(byte[] key, byte[] iv)
    {
        byte[] fileContents;

        using (FileStream inputeFile = new FileStream(this.SourceFile, FileMode.Open, FileAccess.Read))
        {
            using (MemoryStream encryptedStream = new MemoryStream())
            {
                using (CryptoStream cryptostream = new CryptoStream(encryptedStream, new DESCryptoServiceProvider().CreateEncryptor(key, iv), CryptoStreamMode.Write))
                {
                    byte[] bytearrayinput = new byte[inputeFile.Length];
                    inputeFile.Read(bytearrayinput, 0, bytearrayinput.Length);
                    cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length);
                    fileContents = encryptedStream.ToArray();
                }
            }
        }

        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(this.Destination);
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.Credentials = new NetworkCredential(this.UserName, this.Password);
        request.ContentLength = fileContents.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(fileContents, 0, fileContents.Length);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        response.Close();
    } 
```

# ios - 新用户注册xmpp框架iOS的方法

> ID：10257557
> 
> 赞同：12
> 
> 时间：2012-04-21T08:52:42.910
> 
> 标签：ios, xmpp, chat, registration

我已经为 iOS 开发了 XMPP 聊天客户端，现在我正在研究如何从 iOS 本身进行新用户注册。任何人都可以帮助使用注册新用户的方法。因为它需要与服务器通信并将用户名和密码存储到服务器数据库中。请帮助我从 2 天开始搜索它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-25T09:30:49.137

```
NSMutableArray *elements = [NSMutableArray array];
[elements addObject:[NSXMLElement elementWithName:@"username" stringValue:@"venkat"]];
[elements addObject:[NSXMLElement elementWithName:@"password" stringValue:@"dfds"]];
[elements addObject:[NSXMLElement elementWithName:@"name" stringValue:@"eref defg"]];
[elements addObject:[NSXMLElement elementWithName:@"accountType" stringValue:@"3"]];
[elements addObject:[NSXMLElement elementWithName:@"deviceToken" stringValue:@"adfg3455bhjdfsdfhhaqjdsjd635n"]];

[elements addObject:[NSXMLElement elementWithName:@"email" stringValue:@"abc@bbc.com"]];

[[[self appDelegate] xmppStream] registerWithElements:elements error:nil]; 
```

我们将通过以下代表知道注册是否成功。

```
- (void)xmppStreamDidRegister:(XMPPStream *)sender{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Registration" message:@"Registration Successful!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];
}

- (void)xmppStream:(XMPPStream *)sender didNotRegister:(NSXMLElement *)error{

    DDXMLElement *errorXML = [error elementForName:@"error"];
    NSString *errorCode  = [[errorXML attributeForName:@"code"] stringValue];   

    NSString *regError = [NSString stringWithFormat:@"ERROR :- %@",error.description];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Registration Failed!" message:regError delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

    if([errorCode isEqualToString:@"409"]){        

        [alert setMessage:@"Username Already Exists!"]; 
    }   
    [alert show];
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-03T07:55:47.723

这个解决方案对我有用

```
NSString *username = @"rohit@XMPP_SERVER_IP_HERE"; // OR [NSString stringWithFormat:@"%@@%@",username,XMPP_BASE_URL]]
NSString *password = @"SOME_PASSWORD";

AppDelegate *del = (AppDelegate *)[[UIApplication sharedApplication] delegate];

del.xmppStream.myJID = [XMPPJID jidWithString:username];

NSLog(@"Does supports registration %ub ", );
NSLog(@"Attempting registration for username %@",del.xmppStream.myJID.bare);

if (del.xmppStream.supportsInBandRegistration) {
    NSError *error = nil;
    if (![del.xmppStream registerWithPassword:password error:&error])
    {
        NSLog(@"Oops, I forgot something: %@", error);
    }else{
        NSLog(@"No Error");
    }
}

// You will get delegate called after registrations in either success or failure case. These delegates are in XMPPStream class
// - (void)xmppStreamDidRegister:(XMPPStream *)sender
//- (void)xmppStream:(XMPPStream *)sender didNotRegister:(NSXMLElement *)error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T13:08:39.910

新用户可以通过两种方法从 iOS 注册到 XMPP 服务器：

**方法1.)**通过带内注册（带内注册意味着在您的服务器上没有帐户的用户可以使用 XMPP 协议本身注册一个帐户，因此注册保持“带内”，在您使用的同一协议内已经在使用。）你必须使用**XEP-0077**扩展。

而且您的服务器还应该支持带内注册。

使用这些步骤进行带内注册

**第 1 步：**连接 xmppStream

```
- (BOOL)connectAndRegister
{
    if (![xmppStream isDisconnected]) {
        return YES;
    }

    NSString *myJID = @"abc@XMPP_SERVER_IP_HERE"; // OR [NSString stringWithFormat:@"%@@%@",username,XMPP_BASE_URL]]
    NSString *myPassword = @"SOME_PASSWORD";

    //
    // If you don't want to use the Settings view to set the JID,
    // uncomment the section below to hard code a JID and password.
    //
    // Replace me with the proper JID and password:
    //  myJID = @"user@gmail.com/xmppframework";
    //  myPassword = @"";

    if (myJID == nil || myPassword == nil) {
        DDLogWarn(@"JID and password must be set before connecting!");

        return NO;
    }

    [xmppStream setMyJID:[XMPPJID jidWithString:myJID]];
    password = myPassword;

    NSError *error = nil;
    if (![xmppStream connect:&error])
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error connecting"
                                                            message:@"See console for error details."
                                                           delegate:nil
                                                  cancelButtonTitle:@"Ok"
                                                  otherButtonTitles:nil];
        [alertView show];

        DDLogError(@"Error connecting: %@", error);

        return NO;
    }

    return YES;
} 
```

`NSString *password`在文件的@interface 部分声明

**第 2 步：**当 xmppStream Delegate`- (void)xmppStreamDidConnect:(XMPPStream *)sender`调用时

**第 3 步：**通过带内注册开始注册为

```
- (void)xmppStreamDidConnect:(XMPPStream *)sender{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    [[NSNotificationCenter defaultCenter] postNotificationName:XMPPStreamStatusDidConnectNotification
                                                        object:nil
                                                      userInfo:nil];
    _isXmppConnected = YES;
    NSError *error = nil;
    DDLogVerbose(@"Start register via In-Band Registration...");

   if (xmppStream.supportsInBandRegistration) {

      if (![xmppStream registerWithPassword:password error:&error]) {
           NSLog(@"Oops, I forgot something: %@", error);
      }else {
          NSLog(@"No Error");
     }
  }
//    [_xmppStream authenticateWithPassword:password error:&error];
} 
```

**第 4 步：**通过 XMPPStream 委托检查注册成功或失败

```
- (void)xmppStreamDidRegister:(XMPPStream *)sender
- (void)xmppStream:(XMPPStream *)sender didNotRegister:(NSXMLElement *)error 
```

**Methode 2.)**在openFire服务器上通过XMPP Rest Api安装了一个插件（Rest Api plugin），允许正常注册。

使用这些步骤进行 Rest Api 注册

**第 1 步：**在服务器上安装 Rest Api 插件

**第2步：**将Rest Api的服务器配置为服务器->服务器设置->Rest Api，然后启用它。

您可以使用“Secret key auth”进行安全用户注册，因此从 openfire 服务器复制它并在调用 rest api 进行注册时使用。

**第三步：**调用Rest Api进行注册

```
-(void)CreateUserAPI
{   
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"abc",@"username",@"SOME_PASSWORD",@"password",@"abc-nickname",@"name",@"abc@example.com",@"email", nil];
    NSData* RequestData = [NSJSONSerialization dataWithJSONObject:dict options:0 error:nil];

    NSMutableURLRequest *request = [ [ NSMutableURLRequest alloc ] initWithURL: [ NSURL URLWithString:[NSString stringWithFormat:@"%@users",RESTAPISERVER]]];

    [request setHTTPMethod: @"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:AuthenticationToken forHTTPHeaderField:@"Authorization"];
    [request setHTTPBody: RequestData];

    NSURLSession *session = [NSURLSession sharedSession];
    [[session dataTaskWithRequest:request
            completionHandler:^(NSData *data,
                                NSURLResponse *response,
                                NSError *error) {
                // handle response
                if (!error)
                {

                    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;
                    if ([httpResponse statusCode]==201)
                    {

                        NSLog(@"Registration Successful");

                    }else
                    {
                        NSLog(@"Registration failed");
                    }

                }else
                {
                    NSLog(@"Try again for registration");
                }

            }] resume];
} 
```

`RESTAPISERVER`是一个 Rest api url 字符串。

`AuthenticationToken`是“秘密密钥身份验证”（来自 openfire 服务器的副本）

# navigation - Fancybox 导航不适用于 html 分组项

> ID：10257559
> 
> 赞同：0
> 
> 时间：2012-04-21T08:53:03.453
> 
> 标签：navigation, fancybox

我有一个花式框，其中链接的项目是 html 内容：我的 html 链接是：

```
<a class="various1" href="#inline1">
<a class="various1" href="#inline2">
<a class="various1" href="#inline3"> 
```

并且链接的项目是：

```
<div style="display: none;">
   <div id="inline1">html content</div>
</div>
<div style="display: none;">
   <div id="inline2">html content</div>
</div>
<div style="display: none;">
   <div id="inline3">html content</div>
</div> 
```

我对fancybox的jquery调用是：

```
$(".various1").fancybox({
    'titlePosition'     : 'inside',
    'transitionIn'      : 'none',
    'transitionOut'     : 'none',
}); 
```

问题是下一个/后退按钮不起作用，div“fancybox-right/left”没有被渲染。我想拥有这样的功能。

通常，如果我选择链接到图像，那么由于 .various1 是所有链接的类，因此会出现导航下一个/后退。

如果我链接到 html 内容，则不会发生这种情况，是否有我遗漏的东西或任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:29:04.563

您还需要`rel`为您的画廊添加相同的属性才能工作

```
<a class="various1" rel="group" href="#inline1">
<a class="various1" rel="group" href="#inline2">
<a class="various1" rel="group" href="#inline3"> 
```

# c - gtk 3.4 调整大小小部件和附加到条目小部件的标签

> ID：10257563
> 
> 赞同：1
> 
> 时间：2012-04-21T08:54:17.177
> 
> 标签：c, gtk, gtk3

我正在尝试为我未来的项目（客户端 FTP）提供 GTK+3 gui，但我遇到了一些问题。这是我的第一个代码：

```
#include <gtk/gtk.h>

/* When "connect" button is clicked a message will appear */
static void print_hello (GtkWidget *widget, gpointer data)
{
  g_print ("Connect button clicked\n");
}

int main (int argc, char *argv[]){

/* Declare widgets */
GtkWidget *window;
GtkWidget *grid;
GtkWidget *button;
GtkWidget *u_name;
GtkWidget *h_name;
GtkWidget *pass;
GtkWidget *label_user;
GtkWidget *label_host;
GtkWidget *label_pass;

/*This is called in all GTK applications. Arguments are parsed from the command line and are returned to the application.*/
gtk_init (&argc, &argv);

/* create a new window, set its title and put it on center */
window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
gtk_window_set_title (GTK_WINDOW (window), "FTP Client");
gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);
gtk_container_set_border_width (GTK_CONTAINER (window), 20);
//gtk_window_set_resizable(GTK_WINDOW(window), FALSE); /* window is NOT resizable */

/* Here we construct the container that is going pack our buttons */
grid = gtk_grid_new ();

/* Pack the container in the window */
gtk_container_add (GTK_CONTAINER (window), grid);

/* Add labels */
label_user = gtk_label_new("Username  ");
label_host = gtk_label_new("Hostname  ");
label_pass = gtk_label_new("Password  ");

/* Add hostname entry and label */
h_name = gtk_entry_new();
gtk_grid_attach (GTK_GRID (grid), label_host, 0, 0, 1, 1);
gtk_grid_attach (GTK_GRID (grid), h_name, 1, 0, 1, 1);

/* Add username entry and label */
u_name = gtk_entry_new();
gtk_grid_attach (GTK_GRID (grid), label_user, 0, 1, 1, 1);
gtk_grid_attach (GTK_GRID (grid), u_name, 1, 1, 2, 1);

/* Add password entry and label (visibility set to 0 = not visible */
pass = gtk_entry_new();
gtk_grid_attach (GTK_GRID (grid), label_pass, 0, 2, 1, 1);
gtk_entry_set_visibility (GTK_ENTRY (pass), 0);
gtk_grid_attach (GTK_GRID (grid), pass, 1, 2, 1, 1);

/* Add connect button */
button = gtk_button_new_with_label ("Connect");
g_signal_connect (button, "clicked", G_CALLBACK (print_hello), NULL);
gtk_grid_attach (GTK_GRID (grid), button, 0, 3, 2, 1);

/* Add quit button */
button = gtk_button_new_with_label ("Quit");
g_signal_connect (button, "clicked", G_CALLBACK (gtk_main_quit), NULL);
gtk_grid_attach (GTK_GRID (grid), button, 0, 4, 2, 1);

/* Now that we are done packing our widgets, we show them all in one go, by calling gtk_widget_show_all() on the window.*/
gtk_widget_show_all (window);

/* All GTK applications must have a gtk_main(). Control ends here and waits for an event to occur (like a key press or a mouse event),
 * until gtk_main_quit() is called. */
gtk_main ();

return 0;
} 
```

该代码中的问题是，如果要调整窗口大小，我无法调整小部件的大小。我认为这是一个 gtk_grid 问题，所以我无法理解如何使“小部件适合窗口”。我能怎么做？

PS：我更喜欢使用 gtk_grid 因为 GTK+3.4 gtk_table**已被弃用**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:30:37.253

`TRUE`在要扩展的小部件上设置“hexpand”和/或“vexpand”属性。例如，添加此代码，您将看到**u_name**填充了可用空间：

```
gtk_widget_set_hexpand(u_name, TRUE);
gtk_widget_set_vexpand(u_name, TRUE); 
```

# android - 操作栏菜单显示屏幕外

> ID：10257565
> 
> 赞同：7
> 
> 时间：2012-04-21T08:54:54.557
> 
> 标签：android, android-actionbar

我有旧式菜单的应用程序。将主题更改为 Holo 并将目标 SDK 版本切换为 14 后，软菜单按钮消失（没关系），但使用操作栏上的菜单按钮显示文本菜单大部分在屏幕外，如您在随附的图像中看到的那样。你有什么想法可以解决这个问题吗？

![操作栏错误](../Images/51d7bf4db8bbd0fb31d846129e6ada1e.png)

我已经解决了这个问题。问题出在清单参数中：

```
 <supports-screens
        android:anyDensity="false"
        android:largeScreens="true"
        android:normalScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:smallScreens="true" /> 
```

将 anyDenisity 更改为 true 后，这个问题就消失了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T10:57:58.500

我有类似的问题并通过设置修复它`android:anyDensity="true"`。它还修复了其他问题，例如高密度屏幕上的工具提示大小。根据[android开发者指南](http://developer.android.com/guide/topics/manifest/supports-screens-element.html#any)：**你不应该将它设置为“false”**。

# android - Listview 自定义适配器

> ID：10257570
> 
> 赞同：-1
> 
> 时间：2012-04-21T08:55:29.630
> 
> 标签：android, sqlite, listview, simplecursoradapter, custom-adapter

我正在使用 SimpleCursorAdapter 从 SQLite 数据库中检索数据，并使用自定义布局和列表视图来显示数据库中的两个字符串。现在我有两个问题：

1.  如果我想根据特定条件在特定行中显示星号，是否必须创建自定义适配器？我已在自定义布局中将图像设置为不可见，并希望根据行数据本身的某些条件将其设置为可见。我实现了所有选项卡以及收藏选项卡，并且一切正常，我只需要星形图标。我也面临这个问题，将食谱图像放到特定的行中。

2.  在列表视图中动态获取图像的最佳方法是什么？我遵循了惰性图像教程，但我不知道如何使用 CustomCursorAdapter 来实现它，因为它是使用 baseadapter 实现的。有哪些指向带有简单光标教程的延迟加载图像的链接？

```
public class AlternateRowCursorAdapter extends SimpleCursorAdapter{
    int layoutn;
    Cursor mCursor;
    String[] fromn;
    int[] ton;

    LayoutInflater mInflater;

    private int[] colors = new int[] { Color.parseColor("#000000"), Color.parseColor("#303030") };

    public AlternateRowCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
        super(context, R.layout.listtype, c, from, to);
        this.mCursor = c;
    }

    /**
     * Display rows in alternating colors
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View view = super.getView(position, convertView, parent);

        ImageView star = (ImageView)view.findViewById(R.id.favoritesicon); // The star I want to show

        if (mCursor.getString(8) == "YES") // shows if the item is in favorites
        {
            star.setVisibility(view.VISIBLE);
        }

        int colorPos = position % colors.length;
        view.setBackgroundColor(colors[colorPos]);

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:59:25.373

> 我必须创建自定义适配器吗？

是的，您必须创建一个自定义适配器并在您的行中添加一个星号......

> 在列表视图中动态获取图像的最佳方法是什么？

我认为您应该使用通用图像加载器。请参阅[GitHub](http://en.wikipedia.org/wiki/GitHub)项目*[Universal Image Loader for Android](https://github.com/nostra13/Android-Universal-Image-Loader)*。

# ruby - 当我使用“bundle exec”时，一切都崩溃了

> ID：10257573
> 
> 赞同：1
> 
> 时间：2012-04-21T08:56:13.713
> 
> 标签：ruby, gem, rake, bundler, rake-task

我正在制作一个 gem，并在我的存储库中添加了一个 Gemfile。当我跑

```
$ rake test 
```

一切顺利。我自己编写的`test`命令，它只是执行我的测试文件夹中的所有测试。所以，像这样

```
ruby -Ilib *_test.rb 
```

但是，当我在`rake test`命令前面加上前缀时`bundle exec`，我开始从我使用的唯一 gem 中收到错误，`faraday`. 你知道可能是什么问题吗？（我正在使用 rbenv）

所有的错误都是这样的：

```
Flickrie::Error: Flickrie::Error
/Users/jstojanovski/Projects/flickrie/lib/flickrie/client.rb:37:in `on_complete'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/response.rb:9:in `block in call'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/response.rb:62:in `on_complete'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/response.rb:8:in `call'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/response.rb:8:in `call'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/response.rb:8:in `call'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/request/json.rb:32:in `call'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/request/url_encoded.rb:14:in `call'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/connection.rb:210:in `run_request'
/Users/jstojanovski/.rbenv/versions/1.9.2-p318/lib/ruby/gems/1.9.1/gems/faraday-0.7.6/lib/faraday/connection.rb:93:in `get'
/Users/jstojanovski/Projects/flickrie/lib/flickrie/client.rb:44:in `get'
/Users/jstojanovski/Projects/flickrie/lib/flickrie/client.rb:85:in `get_licenses'
/Users/jstojanovski/Projects/flickrie/lib/flickrie.rb:72:in `get_licenses'
/Users/jstojanovski/Projects/flickrie/test/license_test.rb:22:in `test_get_licenses' 
```

这`Flickrie::Error`只是我在 GET 请求期间引发异常时提出的问题（我在 Flickr API 上发出 GET 请求）。

当我`rake test`使用不同的 ruby​​ 版本（不同于 1.9.3）运行正常时，也会发生这些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:34:51.417

我想到了。我需要添加`activesupport`到 Gemfile，因为`faraday`在不告诉你的情况下使用它。在旧版本的 ruby​​ 上，您需要使用该`~> 2.3.8`版本。这只是一个开发依赖。

# java - 在 Java 中解析 XML 文件时如何忽略内联 DTD

> ID：10257576
> 
> 赞同：4
> 
> 时间：2012-04-21T08:56:32.973
> 
> 标签：java, xml, sax, dtd

我在读取带有 DTD 声明的 XML 文件时遇到问题（外部声明已解决）。我正在使用 SAX 方法 (javax.xml.parsers.SAXParser)。当没有 DTD 定义解析时，例如 StartEement-Characters-StartElement-Characters-EndElement-Characters...... 所以在 Start 或 End 元素之后立即调用了 characters 方法，这就是我需要的方式。当 DTD 在文件解析模式更改为例如 StartElement-StartElement-StartElement-Characters-EndEement-EndEement-EndEement 时。而且我需要在每个元素之后使用 Characters 方法。所以我问有没有办法防止解析模式的改变？

我的代码：

```
SAXParserFactory factory = SAXParserFactory.newInstance();   
factory.setValidating(false);  

SAXParser parser = factory.newSAXParser();
XMLReader reader = parser.getXMLReader(); 

reader.setFeature("http://xml.org/sax/features/validation", false);
reader.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", false);
reader.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
reader.setFeature("http://xml.org/sax/features/external-general-entities", false);
reader.setFeature("http://xml.org/sax/features/external-parameter-entities", false);
reader.setFeature("http://xml.org/sax/features/use-entity-resolver2", false);   
reader.setFeature("http://apache.org/xml/features/validation/unparsed-entity-checking", false);
reader.setFeature("http://xml.org/sax/features/resolve-dtd-uris", false);
reader.setFeature("http://apache.org/xml/features/validation/dynamic", false);
reader.setFeature("http://apache.org/xml/features/validation/schema/augment-psvi", false);

reader.parse(input); 
```

我正在尝试解析[链接](http://dl.dropbox.com/u/16385374/problem.xml)的 XML 文件（它在我的保管箱上的链接）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T17:10:20.240

我怀疑以前报告给`characters()`回调的节点现在正在报告给`ignorableWhitespace()`回调。最简单的解决方案可能是简单地调用`characters()`from `ignorableWhitespace()`。

这就是规范必须说的[`ignorableWhitespace()`](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#ignorableWhitespace%28char%5B%5D,%20int,%20int%29)：

> 验证解析器必须使用此方法来报告元素内容中的每个空白块（请参阅[W3C XML 1.0 建议，第 2.10 节](http://www.w3.org/TR/REC-xml/#sec-white-space)）：如果非验证解析器能够解析和使用内容模型，它们也可以使用此方法。

换句话说，如果存在 DTD，并且您没有进行验证，则取决于解析器是否使用`characters()`回调或 `ignorableWhitespace()`回调报告纯元素内容模型中的空白。

# java - 来自多个来源的 XML 提要

> ID：10257582
> 
> 赞同：-1
> 
> 时间：2012-04-21T08:58:08.353
> 
> 标签：java, android, xml, rss, sax

我是 Android 和 Java 编程语言的新手，但我知道我要构建什么应用程序。只是想知道如何构建它。

我想构建一个应用程序，该应用程序将使用 Internet 使用 SAXpaser 下拉 XML 提要。我有两个主要担忧：

*   XML 树在我将使用的网站上有所不同。
*   我想对应该在 UI 中显示的 XML 内容进行排序。

使用更多资源时最好的方法是什么？我不要求源代码，而是更多关于如何管理它的建议。

我应该使用外部服务器来提取 XML，然后应用程序可以从服务器中提取它吗？我应该只在应用程序中构建孔吗？你会建议我使用什么工具？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:54:51.170

我想一切都准备好了：网络访问、xml 和 xslt 支持、UI 内容和小部件（使用 xslt 将树转换为通用形式）。只需从一件事开始，例如从源中获取 XML，然后从那里提出具体问题。

# sql - web.py db.insert() 不起作用

> ID：10257583
> 
> 赞同：1
> 
> 时间：2012-04-21T08:58:20.440
> 
> 标签：sql, insert, web.py

我使用 db.insert() 将数据插入数据库，代码是这样的，

```
db.insert('categories', name=cate_name, description=desc, _test=True) 
```

但它不起作用，代码执行后在表'categories'中找不到数据，顺便说一下没有异常。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T08:33:22.353

`_Test`变量代表调试目的。

它使您可以获取 SQL 语句**而不是**执行一条语句。

这意味着你的命令

```
result = db.insert('categories', name=cate_name, description=desc, _test=True) 
```

不会在您的数据库上执行任何操作。它只会返回一个字符串：

```
"INSERT INTO categories (name, description) VALUES ('cate_name value', 'desc value')" 
```

如果要进行真正的查询，则需要将其删除：

```
db.insert('categories', name=cate_name, description=desc) 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T03:46:44.240

移除`_test=True`或设置`_test=False`

# performance - “Fast Integer Multiplication Using Modular Arithmetic”（2008）算法何时比 Schönhage-Strassen 算法更快？

> ID：10257586
> 
> 赞同：3
> 
> 时间：2012-04-21T08:59:13.593
> 
> 标签：performance, algorithm, biginteger, multiplication, modular

来自[维基百科](http://en.wikipedia.org/wiki/Multiplication_algorithm#Fourier_transform_methods)：

*“Anindya De、Chandan Saha、Piyush Kurur 和 Ramprasad Saptharishi [11] 在 2008 年使用模运算给出了类似的算法，实现了相同的运行时间。但是，对于不切实际的大输入*，后一种算法仅比 Schönhage-Strassen 快。”

我会对这种*不切实际的大*整数的大小非常感兴趣。

也许有人确实以某种方式实现了这两种算法并且可以做一些基准测试？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T16:20:12.467

[Fürer 的算法](http://en.wikipedia.org/wiki/F%C3%BCrer%27s_algorithm)及其等效模块 (DSKS) 是非常深入的研究课题，目前仅作为学术兴趣。没有人真正知道交叉点有多大。而且很可能这无关紧要，因为该交叉点可能***远远超出 64 位计算限制***。

我之前实现过 Schönhage-Strassen，并且了解 Fürer 算法的工作原理。所以我对他们两个都很熟悉。我可以说 Schönhage-Strassen 和 Fürer 算法之间的交叉点非常高，以至于能够保存参数的计算机将大于可观测宇宙的大小。

当您的复杂性相差小于对数时，这就是问题所在。***即使是 Big-O 常数的微小差异，也需要指数级的大输入大小来补偿。***

在这种情况下，已知 Fürer 算法具有*非常非常*大的 Big-O 常数。

# java - 如何在没有 jmf 的情况下用 java 构建视频聊天程序？

> ID：10257591
> 
> 赞同：3
> 
> 时间：2012-04-21T08:59:53.643
> 
> 标签：java, videochat

我想用socket在java中创建一个C/S聊天程序，现在我想给它添加在线视频聊天功能。在谷歌之后，我找到了 jmf 并遵循了一些教程，但我不太喜欢它，因为每个客户端都必须安装 jmf 并注册网络摄像头（或其他音频设备）。

所以我期待一个没有 jmf 的替代库，并找到了像 (juv, xuggle) 这样的库，然后运行良好。不幸的是，他们只能驱动网络摄像头，无法访问音频设备。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:16:52.620

我最近一直在研究网络摄像头选项，并决定使用 GStreamer。它确实需要单独的本机库，但您可以将它们与您的程序捆绑在一起（检查许可证）。

好消息是它内置了视频和音频流。坏消息是，由于它非常灵活，因此需要花费一些时间来理解它。这是在 Windows 上从命令行设置流的示例。

```
Send video:
gst-launch ksvideosrc ! queue ! video/x-raw-yuv,width=320,height=240,framerate=4/1 ! videorate ! videoscale ! ffmpegcolorspace ! queue ! smokeenc ! queue ! udpsink host=[TARGET_IP_ADDRESS] port=5000

Receive video:
gst-launch udpsrc port=5000 ! smokedec ! autovideosink

Send audio:
gst-launch audiotestsrc ! audioconvert ! audio/x-raw-int,channels=1,depth=16,width=16,rate=44100 ! rtpL16pay  ! udpsink host=[TARGET_IP_ADDRESS] port=5001

Receive audio:
gst-launch udpsrc port=5001 ! "application/x-rtp,media=(string)audio, clock-rate=(int)44100, width=16, height=16, encoding-name=(string)L16, encoding-params=(string)1, channels=(int)1, channel-positions=(int)1, payload=(int)96" ! rtpL16depay ! audioconvert ! audioresample ! directsoundsink 
```

声音流改编自这里的答案：

[使用 GStreamer 在本地网络上移动音频](https://stackoverflow.com/questions/2715257/moving-audio-over-a-local-network-using-gstreamer)

对于 Linux，将 ksvideosrc 更改为 v4l2src，将 directsoundsink 更改为 alsasink。使用 gstreamer-java 库在 Java 中可以在命令行上进行任何可能的操作：

[http://code.google.com/p/gstreamer-java/](http://code.google.com/p/gstreamer-java/)

这里有一些更有用的链接：

[GStreamer 手册](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/index.html)

[备忘单](http://wiki.oz9aec.net/index.php/Gstreamer_cheat_sheet)

[网络摄像头示例](http://www.twm-kd.com/linux/webcam-and-linux-gstreamer-tutorial/)

[流媒体信息](http://wiki.laptop.org/go/GStreamer#Doing_live_streaming_video_from_an_xo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-28T19:52:01.830

您还可以使用 OpenCV 来实现客户端服务器。OpenCV 提供了许多有助于捕获视频的功能。 [http://docs.opencv.org/java/2.4.2/org/opencv/highgui/VideoCapture.html#VideoCapture(int)](http://docs.opencv.org/java/2.4.2/org/opencv/highgui/VideoCapture.html#VideoCapture(int))

# android - 如何控制Android设备的屏幕方向

> ID：10257594
> 
> 赞同：4
> 
> 时间：2012-04-21T09:00:24.447
> 
> 标签：android, rotation, screen, orientation

如何以编程方式控制整个设备的屏幕方向并进行更改？这里链接到一些可以做到这一点的应用程序：

[http://dandroidtabletpc.com/download-total-screen-control-1-9-3-full-android-apk.html/](http://dandroidtabletpc.com/download-total-screen-control-1-9-3-full-android-apk.html/)

[http://ru.androidzoom.com/android_applications/tools/ultimate-rotation-control_bznhn.html](http://ru.androidzoom.com/android_applications/tools/ultimate-rotation-control_bznhn.html)

也许有人知道这样的开源项目？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T09:05:58.177

```
@Override
    public void onCreate(Bundle savedInstanceState) {
          setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
} 
```

或者

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-06T02:56:38.530

以下是我知道的两种方法：

### 强制屏幕方向

如果您希望设置的方向覆盖应用程序自己的方向首选项，请按照[如何在 Android 中全局强制屏幕方向中的说明进行操作？](https://stackoverflow.com/a/14862852/238753).

### 非强制改变方向

如果您不希望设置的方向覆盖应用程序自己的方向偏好，请首先确保手机的自动旋转已关闭：

```
Settings.System.putInt(
    this.contentResolver,
    Settings.System.ACCELEROMETER_ROTATION,
    0 //0 means off, 1 means on
); 
```

然后设置手机的用户方向：

```
Settings.System.putInt(
    getContentResolver(),
    Settings.System.USER_ROTATION,
    Surface.ROTATION_0 //Use any of the Surface.ROTATION_ constants
); 
```

不要忘记检查返回值`putInt`以确保更改成功。

另外，我认为您需要以下许可：

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T09:18:26.603

首先，在 android 中，如果您没有通过代码或 xml 文件设置任何方向，那么您的应用默认具有方向。

如果您的要求是尽管手机处于纵向/横向模式，并且您需要一个单独的定位，那么您可以通过代码锁定它，如下所示 oncreate 方法：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);  //or
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-21T10:04:30.727

使用下面的代码，您可以获得当前的活动方向。

```
int orientation = getResources().getConfiguration().orientation;

if(orientation == Configuration.ORIENTATION_LANDSCAPE)
{
     Log.v(TAG,"Configuration.ORIENTATION_LANDSCAPE");              
}
else if(orientation == Configuration.ORIENTATION_PORTRAIT)
{
    Log.v(TAG, "Configuration.ORIENTATION_PORTRAIT");               
}
else if(orientation == Configuration.ORIENTATION_SQUARE)
{
    Log.v(TAG, "Configuration.ORIENTATION_SQUARE");
}
else if(orientation == Configuration.ORIENTATION_UNDEFINED)
{
    Log.v(TAG, "Configuration.ORIENTATION_UNDEFINED");
} 
```

然后使用下面的代码，您可以将活动方向设置为纵向或横向。

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

# c - 使用什么数据结构来模拟可以在任何位置添加数据的数组？

> ID：10257595
> 
> 赞同：1
> 
> 时间：2012-04-21T09:00:37.857
> 
> 标签：c, data-structures

我想存储少量具有恒定大小（ac `char`）的项目（少于 255 个）并能够执行以下操作：

*   将值附加到任意位置并让其他项目保留其先前的顺序。

*   删除一个项目并让其他项目保留它们的顺序（如上）。

*   查找项目的下一个和上一个。

我尝试过使用数组并通过将所有项目向前移动来创建一个函数来添加一个值。删除也会发生同样的事情，但效率太低了。当然，我不介意必须使用库，只要它随时可用且免费。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:06:25.523

*   数组 - 访问：O(1)，插入：O(n)
*   双链表 - 访问 O(n)，上一个/下一个：O(1)，插入(*)：O(1)
*   存储子节点数量的 RB 树：所有操作的 O(log n)。

(*)：您需要先遍历列表才能到达位置 (O(n))。

注意：不，数组并不*混乱*，实现起来非常简单。正如您所看到的，根据使用情况，它可能非常有效。

根据元素的数量，以及您对数组实现的评论，您应该坚持使用数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:03:44.180

您可以为此使用双链表。但是，如果您想保持数组行为（例如，通过索引快速访问元素（`O(1)`对于 LL，它是） ，这将不起作用）`O(n)`

# c# - 在冒泡排序练习中遇到困难

> ID：10257596
> 
> 赞同：1
> 
> 时间：2012-04-21T09:00:41.527
> 
> 标签：c#

我有一个练习，我需要使用 WebMethod 来执行冒泡排序、升序和降序。

例如，这是我用于升序排序的方法。

```
[WebMethod]
public Boolean larger(int a, int b)
{
    Boolean isLarger;
    if (a < b)
    {
        isLarger = false;
    }
    else
    {
        isLarger = true;
    }
    return isLarger;
} 
```

这是访问方法以执行排序的 C# 应用程序。我们只需要对 5 个数字进行排序。

```
ArrayList numbersAL = new ArrayList();

for (int i = 0; i < 5; i++)
{
     numberInput = Int32.Parse(Console.ReadLine());
     numbersAL.Add(numberInput);
}
Boolean swap;

do
{
     swap = false;

     for (int j = 0; j < numbersAL.Count - 1; j++)
     {                          
          Console.WriteLine("output");
          int a = (int)numbersAL[j];
          int b = (int)numbersAL[j + 1];

          result = s.larger(a, b);

          if (result)
          {
               temporary = a;
               a = b;
               b = temporary;
               swap = true;                                           
          }                                                            
     }
} while (swap == true); 
```

然而，有了这个，我得到了一个无限循环，我猜这是因为 ArrayList 中的数字在交换数字之后仍然保持原始顺序，然后这个过程就会重复自己。

我该如何纠正这种情况。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:05:09.103

您的交换正在交换局部变量`a`和`b`. 您需要在 中交换相应的数字`numbersAL`。

```
if (result)
{
    int temporary = (int)numbersAL[j];
    numbersAL[j] = numbersAL[j+1];
    numbersAL[j+1] = temporary;
    swap = true;                                           
} 
```

# android - Android：应用程序流程

> ID：10257599
> 
> 赞同：-1
> 
> 时间：2012-04-21T09:01:15.070
> 
> 标签：android, android-layout, android-intent

从可读性和可重用性的角度来看，Android 应用程序的流程如何？我创建了一个包含我的应用程序所需的所有活动的活动包，一个包含所有查询相关内容的 dbAdapter 包，以及一个包含 getter 和 setter 的模型。

如何创建管理器/服务包并与 dbAdapter 交互？这是我的 dbAdapter 的一部分：

```
public DbAdapter(Context context) {
    // TODO Auto-generated constructor stub
    this.context=context;
    this.helper=new DbHelper(this.context, DB_NAME, null, DB_VERSION);
}

public DbAdapter open(){
    database=helper.getWritableDatabase();
    return this;
}

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        //Creating the table and inserting some data on initialization
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        //Upgrade code goes here

    }
} 
```

我在一些 Java 类的活动包中使用此代码进行初始化：

```
dbAdapter = new DbAdapter(this);
dbAdapter.open(); 
```

如果我想从具有 Java 文件的管理器包中执行相同的操作，那么我应该为`DBAdapter`包含参数的构造函数的上下文参数传递什么？

流程将如何在 Android 应用程序中进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:01:05.330

看看我在堆栈溢出问题中描述的项目*[Unable to collect data from a .db file of SQLite in Android](https://stackoverflow.com/questions/9923063/cant-able-to-collect-data-from-a-db-file-of-sqlite-in-android)* with some prior modified。你将能够得到你想要的。

# postgresql - PostgreSQL 检查先前记录的元素

> ID：10257600
> 
> 赞同：2
> 
> 时间：2012-04-21T09:01:16.853
> 
> 标签：postgresql, datetime, plpgsql, window-functions

我需要检查上一条记录的元素，以确保我查询的日期不在结束日期和开始日期前 7 天之间的特定范围内。我有以下代码：

```
create or replace function eight (date) returns text as $$
declare
  r record;
  checkDate alias for $1;
begin
    for r in
    select * from periods
    order by startDate
  loop
    if (checkDate between r.startDate and r.endDate) then
      return q3(r.id);
    elsif (checkDate between (r.startDate - interval '7 days') and r.startDate) then
      return q3(r.id);
    elsif (checkDate between (lag(r.endDate) over (order by r.startDate)) and (r.startDate - interval '8 days')) then
      return q3(r.id);
    end if;
  end loop;
  return null;
end;
$$ language plpgsql; 
```

所以基本上，我需要检查以下内容：

*   如果查询日期在开始日期和结束日期之间

*   如果查询日期是开始日期开始前 7 天

*   如果查询日期在结束日期和开始日期之间，则返回与该日期关联的 id。

在大多数情况下，我的函数似乎工作正常，但有些情况似乎给了我 0 个结果（当应该总是有 1 个结果时）我的函数中是否缺少某些东西？我对最后一个 if 语句持怀疑态度。也就是说，尝试从以前的记录结束日期检查到当前记录的开始日期（间隔 7 天）

编辑：没有日期重叠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:48:47.733

^(编辑：删除了关于 RETURN NEXT 的部分 - 我在那里误读了这个问题。)
不能按照你的方式工作。不能这样调用窗口[函数。](http://www.postgresql.org/docs/current/interactive/tutorial-window.html)您的记录变量就像循环`r`中的内置游标。`FOR`只有结果的当前行在循环内可见。您必须将[窗口功能`lag()`](http://www.postgresql.org/docs/current/interactive/functions-window.html#FUNCTIONS-WINDOW-TABLE)集成到初始`SELECT`.

但是，由于无论如何您都在以匹配的顺序遍历行，因此您可以采用另一种方式。

考虑这个在很大程度上重写的例子。返回第一个违规行：

```
CREATE OR REPLACE FUNCTION q8(_day date)
  RETURNS text AS
$BODY$
DECLARE
    r            record;
    last_enddate date;

BEGIN
FOR r IN
    SELECT *
       -- ,lag(r.endDate) OVER (ORDER BY startDate) AS last_enddate
       -- commented, because I supply an alternative solution
    FROM   periods
    ORDER  BY startDate
LOOP
    IF _day BETWEEN r.startDate AND r.endDate THEN
        RETURN 'Violates condition 1';  -- I return differing results
    ELSIF _day BETWEEN (r.startDate - 7) AND r.startDate THEN
        RETURN 'Violates condition 2';
    ELSIF _day BETWEEN last_enddate AND (r.startDate) THEN 
                                      -- removed "- 7 ", that is covered above
        RETURN 'Violates condition 3';
    END IF;

    last_enddate := r.enddate; -- remember for next iteration
END LOOP;

RETURN NULL;

END;
$BODY$ LANGUAGE plpgsql; 
```

### 更多提示

*   为什么要使用别名`$1`？您已经在声明中命名了它`_day`。坚持下去。
*   一定要知道 PostgreSQL 如何处理[标识符中的大小写](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)。（我只使用小写。）
*   您可以从日期中添加/减去整数（天数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T11:02:50.917

你确定这`lag()`会给你一些回报吗？我很确定这在这里是断章取义的。鉴于`periods`按顺序选择来自的行，您可以将当前存储`startDate`在一个变量中，并在下一个循环的 if 语句中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T12:21:35.027

```
SET search_path='tmp';
DROP table period;
CREATE table period
        ( start_date DATE NOT NULL
        , end_date DATE
        );
INSERT INTO period(start_date ,end_date) VALUES
 ( '2012-01-01' , '2012-02-01' )
 , ( '2012-02-01' , '2012-02-07' )
 , ( '2012-03-01' , '2012-03-15' )
 , ( '2012-04-01' , NULL )
 , ( '2012-04-17' , '2012-04-21' )
        ;

DROP FUNCTION valid_date(DATE) ;
CREATE FUNCTION valid_date(DATE) RETURNS boolean
AS $body$
declare
        found boolean ;
        zdate ALIAS FOR $1;
begin
found = false;
SELECT true INTO found
        WHERE EXISTS (
        SELECT * FROM period p
        WHERE (p.start_date > zdate
                AND p.start_date < zdate + interval '7 day' )
        OR ( p.start_date < zdate AND p.end_date > zdate )
        OR ( p.start_date < zdate AND p.end_date IS NULL
                AND p.start_date >= zdate - interval '7 day' )
        )
        ;
if (found  = true) then
        return false;
else
        return true;
end if;
end;
$body$ LANGUAGE plpgsql;

\echo 2011-01-01:true
SELECT valid_date('2011-01-01' );
\echo 2012-04-08:false
SELECT valid_date('2012-04-08' );
\echo 2012-04-30:true
SELECT valid_date('2012-04-30' ); 
```

顺便说一句：我真的认为所需的功能应该实现为表约束，由触发器函数（可能基于上述函数）强加。

# javascript - 使用jquery进行数组拆分？

> ID：10257605
> 
> 赞同：8
> 
> 时间：2012-04-21T09:01:52.520
> 
> 标签：javascript, jquery, html

我有一些值存储在数组中，我想拆分它们并且想知道它包含值的长度但是当我运行函数时它不起作用

```
<head>

<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">

$(function(){

    var valData= ['songs','video','movie','games','other'];

    var valNew=valData.split(',');

    for(i=0;i<valNew.length;i++);

    alert(valNew.length)

    })

</script>

</head>

<body>

<select id="me"></select>
</body> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T09:06:33.973

Split 用于根据传递给 split 函数的某些分隔符将分隔字符串分隔为数组。您的值已经拆分为一个数组。您的 for 循环语法也不正确。

拆分文档：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

更正的代码：

```
$(function(){
    var valData= "songs,video,movie,games,other";

    var valNew=valData.split(',');

    for(var i=0;i<valNew.length;i++){
        alert(valNew.length)
    }
}); 
```

[http://jsfiddle.net/tmHea/](http://jsfiddle.net/tmHea/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T09:06:00.810

你不需要拆分任何东西，它已经是一个数组。而且你的 for 循环语法是错误的......

```
for (var i = 0; i < valData.length; i++) {

    alert(valData[i].length);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T09:06:25.627

Hiya**演示** [http://jsfiddle.net/YCarA/8/](http://jsfiddle.net/YCarA/8/)

2 事情是错误的

1）for循环。

2）你`valData`是数组，它应该是字符串，用于拆分以格式化为数组。

**jQuery代码**

```
$(function(){

    var valData = "songs,video,movie,games,other";

    var valNew = valData.split(',');

    for(var i=0;i<valNew.length;i++){

      alert(valNew.length);

   }
    });​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T09:59:48.213

[jQuery.each()](http://api.jquery.com/jQuery.each/)方式：

```
var valData = ["songs","video","movie","games","other"];
$.each(valData, function(key, value) {
   alert("Index ---> " + key + ' & length of item ---> ' + value.length);
}); 
```

[jsfiddle](http://jsfiddle.net/XJxdj/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-21T09:10:08.287

Kmb385 是对的。您的数据是您不能拆分为已经分开的数组。

你的 for 循环也有问题，正确的是

```
for(var i=0;i<valNew.length;i++)
      alert(valNew[i].length); 
```

# java - Java中的Excel文件读取（简单JSP和Servlet）

> ID：10257606
> 
> 赞同：3
> 
> 时间：2012-04-21T09:01:59.197
> 
> 标签：java, jsp, servlets

如何在不将其视为数据库且不使用任何其他外部 api 的情况下在 java 中读取 Excel 工作表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T09:54:04.380

在 Java 中没有直接处理 Excel 工作表的方法。您应该使用[Apache POI](http://poi.apache.org/download.html) Java API。

> Apache POI 是一个 Java 库，用于读写各种 Microsoft 文件格式，尤其是 Office 相关的文件格式，基于 OLE2 和 OOXML，例如 XLS 和 DOCX。

让我们看一个阅读 Excel 工作表的示例。它同时支持`xls`和`xlsx`文件格式。

```
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

private Vector importExcelSheet(String fileName)
{
    Vector cellVectorHolder = new Vector();
    try
    {
        Workbook workBook = WorkbookFactory.create(new FileInputStream(fileName));
        Sheet sheet = workBook.getSheetAt(0);
        Iterator rowIter = sheet.rowIterator();

        while(rowIter.hasNext())
        {
            XSSFRow row = (XSSFRow) rowIter.next();
            Iterator cellIter = row.cellIterator();
            Vector cellStoreVector=new Vector();

            while(cellIter.hasNext())
            {
                XSSFCell cell = (XSSFCell) cellIter.next();
                cellStoreVector.addElement(cell);
            }
            cellVectorHolder.addElement(cellStoreVector);
        }
    }
    catch (Exception e)
    {
        System.out.println(e.getMessage());
    }
    return cellVectorHolder;
} 
```

调用上述方法，该方法将返回 a`Vector`如下。

```
Vector dataHolder=importExcelSheet("Excel_file.xlsx"); 
```

* * *

注意：`Vector`这里使用的只是为了演示。不应该使用它，因为它在 Java 中已经过时了。使用 Java 集合框架中可用的其他类型的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:41:39.783

您必须使用[Apache POI](http://poi.apache.org/index.html)来读取 xls 和 xlsx 文件

你可以根据你的内存限制使用 HSSF、XSSF、SXSSF....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T09:17:40.323

You can't.

The Java SE and EE APIs do not support the reading of Excel spreadsheets.

(Well, I suppose you could spend a few months reading the Excel specs and developing your own spreadsheet reader from scratch. But that strikes me as waste of effort. Just use one of the alternatives that you have rejected.)

* * *

Re: the approach of converting the spreadsheet to a CSV and reading that:

*   This is NOT reading the spreadsheet.
*   It requires an external application (e.g Excel) to do the conversion from the spreadsheet to CSV.
*   It is lossy. You can only read the simple data content of the spreadsheet. Everything else is lost.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T09:20:19.910

您可以将**xls**文件转换为**csv**文件。Java API 支持 csv 文件。您可以使用标准 I/O 库读取 csv 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T09:29:58.153

尝试这个

```
 import java.io.File;
    import java.io.IOException;

    import jxl.Cell;
    import jxl.CellType;
    import jxl.Sheet;
    import jxl.Workbook;
    import jxl.read.biff.BiffException;

    public class ReadExcel {

   private String inputFile;

   public void setInputFile(String inputFile) {
    this.inputFile = inputFile;
        }

   public void read() throws IOException  {
    File inputWorkbook = new File(inputFile);
  Workbook w;
try {
w = Workbook.getWorkbook(inputWorkbook);
// Get the first sheet
Sheet sheet = w.getSheet(0);
// Loop over first 10 column and lines
for (int j = 0; j < sheet.getColumns(); j++) {
for (int i = 0; i < sheet.getRows(); i++) {
Cell cell = sheet.getCell(j, i);
CellType type = cell.getType();
if (cell.getType() == CellType.LABEL) {
System.out.println("I got a label "
                    + cell.getContents());
 }
  if (cell.getType() == CellType.NUMBER) {
System.out.println("I got a number "
                    + cell.getContents());
 }
 }
}
} catch (BiffException e) {
 e.printStackTrace();
}
}

public static void main(String[] args) throws IOException {
ReadExcel test = new ReadExcel();
test.setInputFile("c:/temp/lars.xls");
test.read();
        }

    } 
```

# c# - 如何使用 ViewState 存储记录

> ID：10257607
> 
> 赞同：0
> 
> 时间：2012-04-21T09:02:27.173
> 
> 标签：c#, asp.net, viewstate

现在有 2 个按钮，我们分别称它们为“Button1”和“Button2”。如果我单击“Button1”，将“1”存储在 ViewState["Record"] 中；另外，如果我单击“Button2”，将“2”存储在 ViewState[“Record”] 等中。

当我点击Button1⟶Button1⟶Button2⟶Button2时，我的预期结果是：在ViewState["Record"]中，有一个记录列表，比如

```
[1,1,2,2]. 
```

这是我的点击事件代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
  ViewState.Add("Record", "1");
}
protected void Button2_Click(object sender, EventArgs e)
{
  ViewState.Add("Record", "2");
}
//show the viewstate result
protected void ShowResult(object sender, EventArgs e)
{
 for (int i = 1; i <= 4; i++)
    {
       Label.Text += ViewState["Record"];
    }
} 
```

它显示“2222”而不是“1122”。我该如何编码来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:11:37.223

当您添加 Record 键时，它实际上不会添加一个值，只需放置一个值 Record 键。您总是会在循环中看到最后的附加值。

您应该向 ViewState 添加一个列表并向列表添加值。

添加此属性

```
protected  List<long> ViewStateList
{
  get{ if(ViewState["Record"] == null) ViewState["Record"] = new  List<long>(); 
       return (List<long>)ViewState["Record"]  }
} 
```

并使用喜欢

```
protected void Button1_Click(object sender, EventArgs e)
{
  ViewStateList.Add(1);
} 
```

环形

```
protected void ShowResult(object sender, EventArgs e)
{
 foreach(long item in ViewStateList)
    {
       Label.Text += item.ToString();
    }
} 
```

# jquery - 在 twitter bootstrap 下拉列表中添加复选框

> ID：10257611
> 
> 赞同：10
> 
> 时间：2012-04-21T09:03:54.203
> 
> 标签：jquery, twitter-bootstrap

我正在为我的项目使用 twitter 引导程序。

我想在下拉列表中添加复选框，类似于[http://jsfiddle.net/qG7c4/](http://jsfiddle.net/qG7c4/)

文件：bootstrap-dropdown.js

示例：http: [//twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

问题是，该下拉菜单会在单击每个复选框时关闭，我不希望在单击复选框时将其关闭，以便用户可以轻松选择多个复选框。

为此，我需要在 javascript 中进行哪些更改？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-21T12:33:08.520

尝试停止在您的输入元素上传播点击事件，如下所示：

```
$('.dropdown-menu input, .dropdown-menu label').click(function(e) {
    e.stopPropagation();
}); 
```

[演示](http://jsfiddle.net/qG7c4/9/)

# android - Android BitmapShader 改变颜色

> ID：10257612
> 
> 赞同：4
> 
> 时间：2012-04-21T09:04:22.073
> 
> 标签：android, bitmap, shader

我需要一些帮助来实现我想要实现的目标。我`BitmapShader`在我的应用程序中使用在画布上绘图。我正在将自定义 png 文件设置为我的绘画变量的着色器，并且我想更改着色器的颜色。

这是我正在使用的示例代码：

```
 Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.particle_point);
    BitmapShader shader = new BitmapShader(bitmap, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);
    mPaint.setShader(shader);
    ColorFilter filter = new LightingColorFilter(0xFFFFFFFF , 0x000000FF );
    mPaint.setColorFilter(filter); 
```

我发现我可以使用以下方法更改它的颜色：

`ColorFilter filter = new LightingColorFilter(0xFFFFFFFF , 0x000000FF );`

，但我需要能够通过使用自定义颜色选择器来更改它的颜色，它返回类似于此的颜色代码：`-234423123`。

那么有什么方法可以使用此颜色代码并将其设置为我的绘画变量的颜色。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:35:51.620

您要转换为十六进制的颜色是：FFFFFFFFF206FCAD。所以你需要去掉前面的 8 个 F：

```
int color = -234423123;//0xFFFFFFFFF206FCAD
int myColor = 0x00000000FFFFFFFF & color; 
```

myColor 应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:01:59.693

只是为莫斯的答案添加一点细节。正如他建议的那样，您可以将`myColor`其用作所需的值，并为着色器设置正确的值，您必须像这样添加`myColor`到您的着色器中`LightingColorFilter`：

```
ColorFilter filter = new LightingColorFilter(myColor , myColor ); 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:38:43.823

要获取十六进制字符串：

```
"#"+Integer.toHexString(n)); 
```

但是您的颜色选择器只返回颜色的 int 值，这应该足以使用！

```
ColorFilter filter = new LightingColorFilter(0xFFFFFFFF , 0x000000FF ); 
```

只需将代表颜色的值更改为您的颜色选择器返回的 int...（当然前面没有 0x）...

如果我没记错的话，这应该可以正常工作！

# javascript - 按钮 onClick 事件和 Href-Location

> ID：10257624
> 
> 赞同：0
> 
> 时间：2012-04-21T09:05:25.873
> 
> 标签：javascript, jquery, location-href

我使用了这个讨论中找到的“Chrules”给出的解决方案：[没有href、onclick等的按钮](https://stackoverflow.com/questions/8816916/buttons-with-no-href-onclick-etc/10257455#10257455)

像这样 ：

```
<button id="clickable" >Click Me!!</button>
 ......
$("#clickable").click(function(){
 // Send user to this link
   insertRecord(); //SQLite Code
  location.href = "game.html";
   // location.href = "http://www.takemehere.com"; }); 
```

因此，当我像他所说的那样使用 location.href 时（=“ [http://www.takemehere.com](http://www.takemehere.com) ”;） insertRecord() 方法成功完成（对象被添加到数据库中）

但是当我使用 location.href = "game.html"; game.html 页面已打开但 insertRecord() 方法未完成我试图放置 game.html 的完整路径但同样的问题仍然存在你有什么想法吗？提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:10:19.357

我认为`insertMethod()`调用一些异步函数来进行数据库更新。所以你应该在做任何其他事情之前使用回调。

像这样的东西（我不知道 insertRecord 方法里面是什么）；

```
function insertRecord(callback) {
  // do all sorts of database job
  // when it's finished
  // fire your callback
  callback();
}

insertRecord(function() {
  location.href = "page.html";
}); 
```

编辑：在您发表评论后，我看到您已经定义了一个在 sql 之后运行的函数，即`loadAndReset()`. 因此，只需`location.href = "page.html"`输入该功能，它就应该可以工作。

# jquery - JavaScript 函数在 JSON 结果到达之前返回

> ID：10257625
> 
> 赞同：0
> 
> 时间：2012-04-21T09:05:32.707
> 
> 标签：jquery

```
function GetId() {
    var id;    
    $.post("/Edit/CreateId", function (data) {
        id = data;
    });    
    return id;
} 
```

但它在 id 从服务器返回之前返回；所以 id 是未定义的。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:11:30.910

该`post()`方法是异步的，因此它的`success`方法将在结果存在时触发，并且在此`GetId`之前不会阻塞函数的其余部分。

要获得（可能）所需的行为，您可以将`id`值分配给全局变量（错误的选择）或将其余功能作为回调函数（使用`id`作为参数）直接传递给`post` `success`函数：

```
function GetId( cb ) { 
    $.post("/Edit/CreateId", function (data) {

        // rest of your program logic will be executed here
        cb( data );

    });    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T09:08:50.840

您始终可以传入回调或使用匿名函数。它可以工作，但可能会有点不方便。不过，我不知道您的其他功能如何协同工作。

```
function GetId(callback) { 
    $.post("/Edit/CreateId", function (data) {
        var id = data;
        callback(id)
    });    
} 
```

匿名函数的示例用法：

```
GetId(function(id){
    //Do what you need to do.
}); 
```

# asp.net - 所需的 html5 不允许按钮单击操作启动

> ID：10257626
> 
> 赞同：0
> 
> 时间：2012-04-21T09:05:48.137
> 
> 标签：asp.net, html, input, attributes, required

我有一个输入页面，我想在其中创建一些必填字段，而有些则不是。这意味着在表单的第一部分，您可以通过按下按钮来选择日期以显示日历以选择所需的日期，添加用户（通过按下按钮），然后添加所需的文本，最后添加提交按钮.

现在，当我将 required 属性放入输入标签时，前两个按钮不起作用。他们没有启动，它写道首先我需要插入所需的项目。如何删除这些特定按钮和所需输入之间的连接？

谢谢，阿卡迪。

代码：

```
<h3> Create New Project</h3>
Users Added: <asp:TextBox ID="TextBox1" runat="server" 
    ReadOnly="True"></asp:TextBox>
<asp:Label ID="lblAdded" runat="server" Text="Label" >User Was Already Added</asp:Label>
<asp:Label ID="lblNotFound" runat="server" Text="Label" >User Was Not Found</asp:Label>
<br />
<asp:CheckBoxList ID="CheckBoxList1" runat="server" AutoPostBack="true" 
    OnSelectedIndexChanged="CheckBoxList1_SelectedIndexChanged"></asp:CheckBoxList>

Add User<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /><br /><br />

Project Name: <input ID="txtName" runat="server" required="required" />

Hand Over Date: <asp:TextBox ID="txtHandOverDate" runat="server" ReadOnly="true"></asp:TextBox>
                 <asp:Button ID="btnSelectDate" runat="server" Text="SelectDate" 
             OnClick="btnSelectDate_Click" />
         <asp:Calendar ID="Calendar1" runat="server" Visible="False" 
             OnSelectionChanged="Calendar1_SelectionChanged"></asp:Calendar>

Hand Over Form: <input ID="txtHandOverForm" runat="server" required="required"/>
Subject: <input ID="txtSubjectField" runat="server" required="required" />
Project Porpuse <input ID="txtPorpuse" runat="server" required="required" />
Perimiters<input ID="txtPerimiters" runat="server" required="required" />
Comments <textarea id="txtComments" runat="server"></textarea>

<asp:Button ID="Button2" runat="server" Text="Button" OnClick="Button2_Click" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:04:22.937

我找到了我想要的，所以对于所有会看到的人：我只需要将按钮的类型从提交更改为命令，这意味着将属性添加`UseSubmitBehavior`为 false。

感谢您的回答，这个网站很棒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:19:17.167

OnClick 事件在服务器上运行，但所需的属性阻止提交代码。如果您想运行客户端（即 javascript）代码，那么您将需要使用 OnClientClick 事件。

# php - 如何遍历这个数组并使用php在每一行打印一个结果

> ID：10257631
> 
> 赞同：2
> 
> 时间：2012-04-21T09:06:30.717
> 
> 标签：php, arrays, loops

我怎样才能遍历这个数组并在每一行打印一个结果。这是由谷歌搜索 api 返回的。

这对我有用

```
print_r($rez->responseData); 
```

但这并不

```
print_r($rez->responseData->results); nor this print_r($rez->responseData['results']); 
```

下面是数组

```
 stdClass Object
(
    [results] => Array
        (
            [0] => stdClass Object
                (
                    [GsearchResultClass] => GwebSearch
                    [unescapedUrl] => http://www.1860-1960.com/shoes.html
                    [url] => http://www.1860-1960.com/shoes.html
                    [visibleUrl] => www.1860-1960.com
                    [cacheUrl] => http://www.google.com/search?q=cache:4bB2OicXg5EJ:www.1860-1960.com
                    [title] => Beautiful <b>Antique Shoes</b> and Boots, Vintage Fashions
                    [titleNoFormatting] => Beautiful Antique Shoes and Boots, Vintage Fashions
                    [content] => <b>Vintage</b> Clothing. <b>Shoes</b> &amp; boots Hats &amp; bonnets. Parasols, purses, fans &amp; more.   Textiles &amp; trims. New Items. ebay auctions. Find out how to order About us Click <b>...</b>
                )

            [1] => stdClass Object
                (
                    [GsearchResultClass] => GwebSearch
                    [unescapedUrl] => http://www.ebay.com/sch/Pre1920-Edwardian-Older-/74977/i.html?_nkw=antique+shoes
                    [url] => http://www.ebay.com/sch/Pre1920-Edwardian-Older-/74977/i.html%3F_nkw%3Dantique%2Bshoes
                    [visibleUrl] => www.ebay.com
                    [cacheUrl] => http://www.google.com/search?q=cache:gKFzby7zoS0J:www.ebay.com
                    [title] => <b>antique shoes</b> | eBay
                    [titleNoFormatting] => antique shoes | eBay
                    [content] => eBay: <b>antique shoes</b>. <b>...</b> Quick Look. Antique 1905 Silk Satin Bridal Wedding   Shoes Pumps Louis XV Heels Beautiful. Buy It Now $31.90 <b>...</b>
                )

            [2] => stdClass Object
                (
                    [GsearchResultClass] => GwebSearch
                    [unescapedUrl] => http://www.amazon.com/Winsome-Wood-Shoe-Antique-Walnut/dp/B000NPQKHO
                    [url] => http://www.amazon.com/Winsome-Wood-Shoe-Antique-Walnut/dp/B000NPQKHO
                    [visibleUrl] => www.amazon.com
                    [cacheUrl] => http://www.google.com/search?q=cache:SBPbbjdSIpMJ:www.amazon.com
                    [title] => Amazon.com: Winsome Wood <b>Shoe</b> Rack, <b>Antique</b> Walnut: Home <b>...</b>
                    [titleNoFormatting] => Amazon.com: Winsome Wood Shoe Rack, Antique Walnut: Home ...
                    [content] => <b>Shoe</b> Rack. With Removable Sink tray, this unique product is nice to have it   especially in wet weather.Warm Walnut finish <b>...</b>
                )

            [3] => stdClass Object
                (
                    [GsearchResultClass] => GwebSearch
                    [unescapedUrl] => http://trouvais.com/category/antique-shoes/
                    [url] => http://trouvais.com/category/antique-shoes/
                    [visibleUrl] => trouvais.com
                    [cacheUrl] => http://www.google.com/search?q=cache:qPcTFS0bBR4J:trouvais.com
                    [title] => <b>Antique shoes</b> Â« Trouvais
                    [titleNoFormatting] => Antique shoes Â« Trouvais
                    [content] => 19th century silk <b>shoes</b>, and then stumbled upon. this tattered silk pair inscribed   with a wedding date c1773\. <b>antique</b> textiles. I&#39;m happy with just a few tangible <b>...</b>
                )

        )

    [cursor] => stdClass Object
        (
            [resultCount] => 11,400,000
            [pages] => Array
                (
                    [0] => stdClass Object
                        (
                            [start] => 0
                            [label] => 1
                        )

                    [1] => stdClass Object
                        (
                            [start] => 4
                            [label] => 2
                        )

                    [2] => stdClass Object
                        (
                            [start] => 8
                            [label] => 3
                        )

                    [3] => stdClass Object
                        (
                            [start] => 12
                            [label] => 4
                        )

                    [4] => stdClass Object
                        (
                            [start] => 16
                            [label] => 5
                        )

                    [5] => stdClass Object
                        (
                            [start] => 20
                            [label] => 6
                        )

                    [6] => stdClass Object
                        (
                            [start] => 24
                            [label] => 7
                        )

                    [7] => stdClass Object
                        (
                            [start] => 28
                            [label] => 8
                        )

                )

            [estimatedResultCount] => 11400000
            [currentPageIndex] => 0
            [moreResultsUrl] => http://www.google.com/search?oe=utf8&ie=utf8&source=uds&start=0&hl=en&q=antique+shoes
            [searchResultTime] => 0.14
        )

) 
```

这是生成它的代码。

```
<?php 

/**
 * google_search_api()
 * Query Google AJAX Search API
 *
 * @param array $args URL arguments. For most endpoints only "q" (query) is required.
 * @param string $referer Referer to use in the HTTP header (must be valid).
 * @param string $endpoint API endpoint. Defaults to 'web' (web search).
 * @return object or NULL on failure
 */
function google_search_api($args, $referer = 'http://localhost/test/', $endpoint = 'web'){
    $url = "http://ajax.googleapis.com/ajax/services/search/".$endpoint;

    if ( !array_key_exists('v', $args) )
        $args['v'] = '1.0';

    $url .= '?'.http_build_query($args, '', '&');

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    // note that the referer *must* be set
    curl_setopt($ch, CURLOPT_REFERER, $referer);
    $body = curl_exec($ch);
    curl_close($ch);
    //decode and return the response
    return json_decode($body);
}

print_r($rez->responseData); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:11:15.640

就像是：

```
$obj = new obj(); // your object

function printLies($obj)
{
    foreach ($obj as $elem)
    {
        if (is_array($elem) || is_object($elem))
        {
            printLies($obj);
        }
        else
        {
            echo $elem . '<br />';
        }
    }
} 
```

还是我没看懂问题？也许你是这个意思？

```
$obj = new obj(); // your object

foreach ($obj->result as $result)
{
    print_r($result);
} 
```

# iphone - iPad中矩形的发光效果

> ID：10257636
> 
> 赞同：1
> 
> 时间：2012-04-21T09:07:25.513
> 
> 标签：iphone, ios, xcode4

我花了很多耐心，按照我的要求制作了发光效果的矩形。

```
CALayer *bevelLayer = [CALayer layer];
[bevelLayer setBounds:CGRectMake(0.0f, 0.0f, 300.0f, 300.0f)];
[bevelLayer setPosition:CGPointMake(300.0f, 550.0f)];

[bevelLayer setBackgroundColor:[[UIColor whiteColor] CGColor]];
[bevelLayer setShadowOpacity:1.0];
[bevelLayer setShadowRadius:7.0f];
[bevelLayer setShadowColor:[[UIColor colorWithRed:0.0f/255.0  green:126.0f/255.0f        blue:255.0f/255.0f alpha:1.0f] CGColor]];
[bevelLayer setShadowPath:[[UIBezierPath bezierPathWithRoundedRect:CGRectMake(-10.0f, -10.0f, 310.0f, 310.0f) cornerRadius:5.0f] CGPath]];
[[[self view] layer] addSublayer:bevelLayer]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:34:06.620

**与其添加一个新图层，不如直接在self.view**上尝试一下。另外，shadowOpacity 是一个介于 0 和 1 之间的值……所以给 10 肯定对你没有帮助。

如果你想在**self.view**中尝试，这里是代码：

```
self.view.layer.shadowColor = [[UIColor greenColor] CGColor];
self.view.layer.shadowOffset = CGSizeMake(1, 1);
self.view.layer.shadowOpacity = 1;
self.view.layer.shadowRadius = 20; 
```

这样您就不必担心图层的边界..

# node.js - 从 node.js 配置 VM 实例的推荐方法和工具？

> ID：10257643
> 
> 赞同：1
> 
> 时间：2012-04-21T09:08:35.000
> 
> 标签：node.js, amazon-ec2, chef-infra, puppet, vagrant

我正在尝试实现一个“**云端实验室**”，让人们拥有一个沙箱来进行实验和学习；即用于devops（厨师/木偶），安装或配置软件等。我有一个node.js服务器实现来管理这个并寻找理智和合理的方法来解决这个问题。

选项令人眼花缭乱：木偶或直接厨师，或流浪者似乎合适。但是 Openstack、cloudfoundry、Amazon EC2 也提供了自己的功能集。理想情况下，微云解决方案（每个实例多个 VM）将是理想的，因为不会有任何大的计算负载。

建议最受赞赏。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:58:27.380

经过一番调查，似乎 EC2 上的 LXC 可能是前进的方向：

它给

1.  单个 EC2 实例上的轻量级实例
2.  支持休眠/恢复
3.  快速站立
4.  能够使用厨师/黄瓜自动化

[使用 LXC 的 EC2 虚拟化](http://www.activestate.com/blog/2011/10/virtualization-ec2-cloud-using-lxc "ec2中的lxc")

[厨师-lxc](https://github.com/niklas/chef-lxc)

[使用 Cucumber 在 LXC 中测试基础设施代码](https://github.com/exceedhl/toft)

# javascript - Photoshop 脚本 - 调整文件夹中图像的大小（对话框）

> ID：10257646
> 
> 赞同：4
> 
> 时间：2012-04-21T09:09:44.830
> 
> 标签：javascript, batch-file, resize, photoshop, jsx

我想知道是否有一种简单的方法可以在 Photoshop 中编写简单的脚本。

我希望它弹出一个对话框让用户选择一个文件夹。然后脚本在选定的文件夹中创建另一个文件夹（“web_ready”）并将调整大小的图像放入其中。我可以很容易地处理调整大小的部分（网上有很多教程），但我不知道如何编写弹出对话框的部分。你能帮助我吗？我说的是 *.jsx 脚本。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T19:41:35.000

文件夹选择对话框：

```
var inputFolder = Folder.selectDialog("Select a folder to process"); 
```

从文件夹中获取文件：

```
var fileList = inputFolder.getFiles("*.JPG"); //Use whatever extension you want or no extension to select all files 
```

对文件做一些事情：

```
for(var i=0; i<fileList.length; i++) {
    //do something..
} 
```

# iphone - 嵌套视图/控制器不接收事件

> ID：10257648
> 
> 赞同：0
> 
> 时间：2012-04-21T09:10:01.793
> 
> 标签：iphone, objective-c, ios

我有一个视图/控制器（连同 .XIB），上面有一个简单的 NavigationBar。NavigationBar 有一个 NavigationItem，它有一个 BarButtonItem。我使用 IB 将 menuTapped 事件连接到文件所有者，并且我能够接收到该事件。到目前为止，一切都很好。

在另一个项目中，我正在尝试使用 iOS 5.0 控制器包含的嵌套控制器。当我将上述视图/控制器（称为“MainTableViewController”）嵌套到 MainViewController 时，我不再收到 menuTapped 事件。我验证了如果我将 MainTableViewController 设为主视图，事件就会触发。但是当我将它嵌套在 MainViewController 下时，MainTableViewController 不会处理该事件。

这是我必须创建子视图/控制器的代码（我在 MainViewController viewDidLoad 中执行此操作）：

```
- (void)viewDidLoad
{
    self.mainTableViewController = [[MainTableViewController alloc] init];
    //[self.mainTableViewController.view setUserInteractionEnabled:YES];
    [self addChildViewController:self.mainTableViewController];
    [self.mainTableViewController didMoveToParentViewController:self];

    [super viewDidLoad];

    CGRect frame = self.view.frame;
    self.mainTableViewController.view.frame = frame;
    [self.view addSubview:self.mainTableViewController.view];
} 
```

这是我用来初始化子视图/控制器的代码。

当我运行应用程序时，XIB 被加载并且 UI 看起来很好（我可以尝试将框架设置为其他坐标，看起来很好），但是当我点击 BarButtonItem 时，我的处理程序不会被调用。

我的理解是子视图应该在父视图之前获取事件，所以我一定是错误地连接了视图。我遵循了 iOS SDK 文档中的控制器包含示例，所以我不确定我做错了什么。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:03:35.433

我解决了这个问题——我需要使用 initWithNibName 而不是 init。我在某处读到 init 会自动加载 nib（它会这样做是因为 UI 正确加载），但似乎除非您使用 initWithNibName，否则插座不会连接。

# android - 安卓活动超时

> ID：10257653
> 
> 赞同：-1
> 
> 时间：2012-04-21T09:11:01.290
> 
> 标签：android, android-intent, android-camera

在我的应用程序中，我在按钮的事件侦听器中遇到活动超时。这是 onclick 事件监听器的代码。当我按下按钮时，活动超时。

```
btn_process_job.setOnClickListener(m2AddListener);
private OnClickListener m2AddListener = new OnClickListener()
{
    public void onClick(View v)
    {
        Bundle extras = getIntent().getExtras();
        if(extras !=null) {
            String fileName = extras.getString("file_name");
        }
    }
}; 
```

参数在另一个活动中设置为

```
Intent i = new Intent(CameraPreview.this, InitProgram.class);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.putExtra("file_name", mLocation.getName());
startActivityForResult(i, 1); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:57:50.847

尝试这个：

```
btn_process_job.setOnClickListener(new OnClickListener()
{
    public void onClick(View v)
    {
        Bundle extras = getIntent().getExtras();
        if (extras !=null) {
            String fileName = extras.getString("file_name");
        }
    }
}; 
```

# java - 绑定 或将两个列表放在渲染属性中

> ID：10257656
> 
> 赞同：0
> 
> 时间：2012-04-21T09:11:35.880
> 
> 标签：java, jsf-2, richfaces, ajax4jsf

如果我必须在 listshuttle 上放置两个渲染条件，我该怎么办。

我有一个`<rich:listshuttle>`，我已经放了`rendered="#{!empty Bean.arrayList}".`

因此，如果 arraylist 为空，则不会呈现此组件。但是，在某些情况下，即使 arraylist 不为空，我也想渲染此组件。

可能可以`<rich:listShuttle>`与 backing bean 绑定，但如何实现。

如果我在渲染字段中放两个列表也有可能。但我认为我的目标仍然无法实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:30:08.823

您应该能够将任何评估为布尔值的 EL 表达式放入渲染中

```
rendered="#{(not empty Bean.arrayList) or (empty Bean.arrayList and Bean.conditionMet)}" 
```

# javascript - 如何在plupload中停止正在进行的上传

> ID：10257660
> 
> 赞同：11
> 
> 时间：2012-04-21T09:12:32.697
> 
> 标签：javascript, jquery, html, plupload

`up.removeFile(file)`仅在上传未进行时才有效。

这是一个错误，还是存在我错过的其他一些功能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-21T09:16:41.150

This way I could make it work.

Every added files has it own cancel function:

```
var status_before = file.status;
up.removeFile(file);                
if(up.state == plupload.STARTED && status_before == plupload.UPLOADING)
{
  up.stop();
  up.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T13:10:20.753

隐藏容器将停止上传。前任 ：

```
var max = 10;
var count = 0;

uploader.bind('FileUploaded', function(up, file, info){
    count++;
    if (count >= max){
            $('#container').hide();
            console.log('limit reached');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:14:01.307

显然这是不可能的（还）：[https ://github.com/moxiecode/plupload/issues/168](https://github.com/moxiecode/plupload/issues/168)

如果您只使用特定的传输（HTML5/XHR），您可以通过调用`.abort()`XHR 对象来做到这一点。

# c# - monomac - 单击主窗口中的按钮时如何关闭子窗口

> ID：10257661
> 
> 赞同：1
> 
> 时间：2012-04-21T09:13:58.150
> 
> 标签：c#, macos, mono, xib, monomac

我用 monodevelop 创建了一个 MonoMac 项目。

我在 Xcode Interface Builder 中打开了文件 MainWindow.xib。在 Interface Builder 中，我将一个新的 NSwindow 面板放入我的项目中。面板名称为：Setting_window，出口名称为：Setting_window。

在主窗口中，我有 2 个按钮：隐藏设置窗口（btn1）和显示设置窗口（btn2）；

当我运行项目时，它显示 2 个窗口：主窗口和设置窗口。单击按钮 btn1 和 btn2 时，我想隐藏和显示设置窗口。在 Windows 上的 C# 中，我使用 .show() 和 .Dispose(); 但是在 Monomac 上，我不知道要调用哪些方法。

这是代码：

```
Setting_window.Title = "my setting"; // This works as expected 
//Setting_window.??? // I want to close the settings window 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:50:00.823

NSWindow.Close() 不可用，因为它如何在 objc 方面释放引用，并且与 GC 不兼容。

似乎已提交了最近的修复程序，该修复程序恢复了此方法，因此您可以以编程方式关闭窗口：

[https://github.com/mono/monomac/commit/6183d93be442aec3946f19e273e4810dff291f66](https://github.com/mono/monomac/commit/6183d93be442aec3946f19e273e4810dff291f66)

# android - Android，如何实例化通用图像加载器？

> ID：10257667
> 
> 赞同：3
> 
> 时间：2012-04-21T09:15:13.050
> 
> 标签：android, image, view

在我的项目中，我有一个包含图像的网格视图。根据我的研究，[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)项目旨在在后台下载图像。然后根据示例我设置我的适配器。这是我写的代码：

```
package cam.astro.mania.adapters;

import java.io.File;
import java.util.ArrayList;

import com.astro.mania.activities.Contestants_Photo;
import com.astro.mania.activities.R;
import com.nostra13.universalimageloader.cache.disc.impl.UnlimitedDiscCache;
import com.nostra13.universalimageloader.cache.memory.impl.UsingFreqLimitedMemoryCache;
import com.nostra13.universalimageloader.core.DecodingType;
import com.nostra13.universalimageloader.core.DisplayImageOptions;
import com.nostra13.universalimageloader.core.ImageLoader;
import com.nostra13.universalimageloader.core.ImageLoaderConfiguration;
import com.nostra13.universalimageloader.core.ImageLoadingListener;

import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.os.Environment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ProgressBar;

public class ContestantsPhotoAdapter extends BaseAdapter {

    private Context context;
    private LayoutInflater myInflater;
    private Bitmap[] bitmapList;
    private Bitmap bitmap;

    private ArrayList<String> ListOfURLs;
    private ImageLoader imageLoader;
    private ProgressDialog progressBar;
    private File cacheDir;
    private ImageLoaderConfiguration config;
    private DisplayImageOptions options;

    public ContestantsPhotoAdapter(Context c) {
        context = c;
        myInflater = LayoutInflater.from(c);

        // Get singleton instance of ImageLoader
        imageLoader = ImageLoader.getInstance();
    }

    public void setImageURLs(ArrayList<String> list){
        ListOfURLs = list;
        for(String str: ListOfURLs)
            Log.i("URL Address>>>>", str);

        cacheDir = new File(Environment.getExternalStorageDirectory(), "UniversalImageLoader/Cache");

        // Create configuration for ImageLoader
        config = new ImageLoaderConfiguration.Builder(context)
                    .maxImageWidthForMemoryCache(800)
                    .maxImageHeightForMemoryCache(800)
                    .httpConnectTimeout(5000)
                    .httpReadTimeout(30000)
                    .threadPoolSize(5)
                    .threadPriority(Thread.MIN_PRIORITY + 2)
                    .denyCacheImageMultipleSizesInMemory()
                    .memoryCache(new UsingFreqLimitedMemoryCache(2000000)) // You can pass your own memory cache implementation
                    .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
                    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
                    .build();

        // Creates display image options for custom display task
        options = new DisplayImageOptions.Builder()
                    .showStubImage(R.drawable.icon_loading)
                    .showImageForEmptyUrl(R.drawable.icon_remove)
                    .cacheInMemory()
                    .cacheOnDisc()
                    .decodingType(DecodingType.MEMORY_SAVING)
                    .build();

        // Initialize ImageLoader with created configuration. Do it once.
        imageLoader.init(config);

    }

    @Override
    public int getCount() {
        return ListOfURLs.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent){
        ViewHolder holder;

        if (convertView == null) {
            convertView = myInflater.inflate(R.layout.grid_contestantsphoto, null);
            holder = new ViewHolder();
            holder.ivIcon = (ImageView) convertView.findViewById(R.id.imvContestantsPhoto_icon);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

//        holder.ivIcon.setImageBitmap(bitmapList[position]);

        String imageUrl = ListOfURLs.get(position);
        // Load and display image
        imageLoader.displayImage(imageUrl, holder.ivIcon, options, new ImageLoadingListener() {
            @Override
            public void onLoadingStarted() {
                showLoading();
            }
            @Override
            public void onLoadingFailed() {
                stopLoading();
            }
            @Override
            public void onLoadingComplete() {
                stopLoading();
            }
        });

        return convertView;
    }   

    static class ViewHolder {
        ImageView ivIcon;
    }

    /*-----------------------------------------------------------------------------------
     *  Showing / Stopping progress dialog which is showing loading animation
     *  ---------------------------------------------------------------------------------*/
    private void showLoading(){
        progressBar = ProgressDialog.show(context, "", "");
        progressBar.setContentView(R.layout.anim_loading);
        progressBar.setCancelable(true);
        final ImageView imageView = (ImageView) progressBar.findViewById(R.id.blankImageView); 
        Animation rotation = AnimationUtils.loadAnimation(context, R.anim.rotate);
        imageView.startAnimation(rotation); 
    }

    private void stopLoading() {        
        if(progressBar.isShowing())
            progressBar.dismiss();
    }

} 
```

我做了什么？1）我下载[了universal-image-loader-1.2.3.jar](https://github.com/nostra13/Android-Universal-Image-Loader/tree/master/Jar)并将其放入MY_PROJECT/lib文件夹然后我将此jar文件添加到java构建路径中 ![在此处输入图像描述](../Images/1ccb0e38a21ffbd6962bc192ae35157f.png)

2）因为要兑现图像，这个库需要访问本地存储，所以我添加`<uses-permission android:name = "android.permission.WRITE_EXTERNAL_STORAGE"/>`到清单文件中。

3）现在，当我运行时，应用程序崩溃并指向`imageLoader = ImageLoader.getInstance();`. Logcat 消息是：

```
dalvikvm: Could not find class 'cam.astro.mania.adapters.ContestantsPhotoAdapter$1', referenced from method cam.astro.mania.adapters.ContestantsPhotoAdapter.getView
AndroidRuntime: java.lang.NoClassDefFoundError: com.nostra13.universalimageloader.core.ImageLoader
AndroidRuntime: at cam.astro.mania.adapters.ContestantsPhotoAdapter.<init>(ContestantsPhotoAdapter.java:50) 
```

根据我的研究（例如[此处](http://javarevisited.blogspot.com/2011/06/noclassdeffounderror-exception-in.html)），我发现此消息“**当 Java 虚拟机无法在运行时找到在编译期间可用的特定类时出现。** ”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:26:24.597

当我从 Java 类路径中删除 jar 文件并将文件夹名称从“lib”更改为“libs”时，jar 文件会自动添加到 Android 依赖项。现在，一切都很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:38:56.143

添加外部 jar 后，请务必检查“订购和导出”选项卡下的 jar。

# html - Why is this out of place in this HTML5 document (rendered by Django)?

> ID：10257669
> 
> 赞同：0
> 
> 时间：2012-04-21T09:15:24.427
> 
> 标签：html, html-validation

The indentation was created by Firefox's source. Both Firefox and HTML validators said that the `</p>` is misplaced. But I can't figure out why.

```
<p>
  <ul class="errorlist">
    <li>This field is required.</li>
  </ul>
  <label for="id_creator">Creator:</label>
  <select onchange="Dajaxice.doors.orders_create_creator_changed(fill_other_fields, {&#39;creator_pk&#39;: this.options[this.selectedIndex].value})" name="creator" id="id_creator">
    <option value="" selected="selected">Select a user</option>
    <option value="9">Amy the Tenant</option>
    <option value="6">Alex the Tenant</option>
    <option value="3">Bob the Property Manager</option>
  </select>
</p> 
```

On a side note, when Django doesn't render the error messages, then the closing `</p`> tag is valid. Here is the code:

```
<p>
  <label for="id_creator">Creator:</label>
  <select onchange="Dajaxice.doors.orders_create_creator_changed(fill_other_fields, {&#39;creator_pk&#39;: this.options[this.selectedIndex].value})" name="creator" id="id_creator">
    <option value="" selected="selected">Select a user</option>
    <option value="9">Amy the Tenant</option>
    <option value="6">Alex the Tenant</option>
    <option value="3">Bob the Property Manager</option>
  </select>
</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:28:19.730

`<p>`不能包含任何块级元素（[参见 MDN 文档](https://developer.mozilla.org/de/HTML/Element/p)）。

`<ul>`另一方面是块级元素（[MDN](https://developer.mozilla.org/de/HTML/Element/ul)）。

您的代码可能“正确”显示的原因是大多数 html5 解析器`</p>`在遇到`<p>`. 随着这个被插入，你的实际`</p>`没有伴随的开口`<p>`，因此在那个时候是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:17:58.483

an`<ul />`是块级别，因此不能放在 a 中`<p />`

# cocos2d-iphone - Callback when Cocos2d CCParticleSystem has finished?

> ID：10257670
> 
> 赞同：2
> 
> 时间：2012-04-21T09:15:28.657
> 
> 标签：cocos2d-iphone, ccparticlesystem

I'd like to run a callback/selector when a Cocos2d CCParticleExplosion is completely finished. How do I do this?

I tried using scheduleOnce with the same duration as the emitter, but that finish too soon since I guess the duration of the emitter controls for how long it will emit new particles, but not how long the complete animation lasts.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:07:49.363

尝试使用操作对操作进行排序（使用 CCSequence）`CCCAllFunc`。在一个动作运行后，另一个动作运行后，CCCAllFunc 可以分配给您选择的选择器/方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T03:43:07.393

不确定这是否可以接受，但我测试并“它适用于我的 Mac”。

在 CCParticleSystem.h

```
// experimental
typedef void (^onCompletedBlock)();
@property (readwrite, copy) onCompletedBlock onComplete; 
```

在 CCParticleSystem.m 中

```
@synthesize onComplete; 
```

在相同的文件更新方法中，

```
_particleCount--;

        if( _particleCount == 0 && self.onComplete)
        {
            [self onComplete]();
            [[self onComplete] release];
        }

if( _particleCount == 0 && _autoRemoveOnFinish ) {
            [self unscheduleUpdate];
            [_parent removeChild:self cleanup:YES];
            return;
} 
```

在您的代码中

```
particleSystem.autoRemoveOnFinish = YES;
particleSystem.position = ccp(screenSize.width/2, screenSize.height/4);
particleSystem.onComplete = ^
{
    NSLog(@"completed ..");
}; 
```

再次，相当实验性..

# windows - how to define in which programming was developed the application

> ID：10257672
> 
> 赞同：3
> 
> 时间：2012-04-21T09:15:43.693
> 
> 标签：windows, programming-languages

> **Possible Duplicate:**
> [Determine source language from a binary?](https://stackoverflow.com/questions/1704202/determine-source-language-from-a-binary)

There is a compiled application (com, exe, etc.).

I want to ask, whether there is any method to recognize in which programming language the application was developed (c#, Delphi, Visual Basic, Visual C++, etc.)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:15:08.397

您可以使用[PEiD](http://www.peid.info/)，此工具已停产。但最后一个版本仍然有效。

> PEiD 检测最常见的 PE 文件打包程序、加密程序和编译器。它目前可以检测 PE 文件中的 600 多种不同的签名。

# android - Android - 使位图适合屏幕

> ID：10257674
> 
> 赞同：2
> 
> 时间：2012-04-21T09:16:23.007
> 
> 标签：android, bitmap, height, width, landscape

我有这个项目，其中我的位图大于屏幕尺寸。我想调整它的大小以完全适合屏幕。我没有标题栏，并且处于全屏模式。这是我的非工作代码：

```
public class ScopView extends View
{
    private Scop thescop;

    public ScopView(Context context, Scop newscop)
    {
        super(context);
        this.thescop = newscop;
    }

    @Override
    public void onDraw(Canvas canvas)
    {
        Bitmap scopeBitmap;
        BitmapFactory.Options bfOptions = new BitmapFactory.Options();
        bfOptions.inDither = false;
        bfOptions.inPurgeable = true;
        bfOptions.inInputShareable = true;
        bfOptions.inTempStorage = new byte[32 * 1024];

        scopeBitmap = BitmapFactory.decodeResource(getResources(),R.drawable.scope, bfOptions);
        scopeBitmap.createScaledBitmap(scopeBitmap, SniperActivity.Width, SniperActivity.Height, false);
        canvas.drawBitmap(scopeBitmap, SniperActivity.scopx, SniperActivity.scopy, null);
    }
} 
```

虽然在这里使用 createScaledBitmap 方法，但我将其自身用作源，并且活动中的一些变量用于从屏幕首选项中检索窗口高度和宽度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T09:21:08.163

您可以使用下面的代码来调整位图的大小。

```
int h = 320; // Height in pixels
int w = 480; // Width in pixels    
Bitmap scaled = Bitmap.createScaledBitmap(largeBitmap, h, w, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:22:22.623

此外，您可以使用下面的代码片段。

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;

    // Create a matrix for the manipulation
    Matrix matrix = new Matrix();

    // Resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);

    // Recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

    return resizedBitmap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:19:32.037

此代码可帮助您尝试此操作

```
int REQ_WIDTH = 0;
int REQ_HEIGHT = 0;
REQ_WIDTH =imageView.getWidth();
vREQ_HEIGHT =imageView.getHeight();
mImageView.setImageBitmap(Bitmap.createScaledBitmap(BitmapFactory.decodeFile(imageURI, options), REQ_HEIGHT, REQ_WIDTH, true)); 
```

# ios - add new button and replaces existing button and disappear with sleek animation

> ID：10257675
> 
> 赞同：0
> 
> 时间：2012-04-21T09:16:26.553
> 
> 标签：ios, uibutton, uianimation

I want to add total 5 button at bottom of screen but only four will be visible at first time loading of nib.

and if user press first button it will be disappear with animation and second button will come at place of first . and now in screen one more button (button 5 ) at last.

to make it more clear i am adding image.

screen 1\. when nib loaded first time.

screen 2\. when button 1 pressed.

screen 3\. when button 2 pressed.

![enter image description here](../Images/5fa80b14e63ced894b396434320cc118.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:21:25.943

这样的事情怎么样？它并不完美，所以你必须玩它，但它应该让你朝着正确的方向开始......

在你的 .h

```
IBOutlet UIButton *firstButton, *secondButton, *thirdButton, *fourthButton
NSArray *buttonsArray; 
```

在你的 .m

```
-(void)viewDidLoad{
    // VDL stuff
    buttonsArray = [NSArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", @"Five", @"Six", nil];
    [firstButton setTitle:[buttonsArray objectAtIndex:0]];
    [firstButton setTag:0];
    // initial setup of the other three buttons works the same way
}

-(IBAction)updateButtons:(id)sender{
    UIButton *btn = (UIButton*)sender;
    int index = btn.tag;
    for(int i = 0; i <4; i++){
        if([buttonsArray count] > index+i){
            switch(i){
                case 0:;
                    [firstButton setTitle:[buttonsArray objectAtIndex:i+index]];
                    [firstButton setTag:i+index];
                    break;
                case 1:; //secondButton
                    break;
                case 2:; //thirdButton
                    break;
                case 3:; //fourthButton
                    break;
            }
        }else{
            break;
        }
    }
} 
```

然后你需要做的就是将屏幕上的四个按钮连接到动作，否则你需要一些逻辑（与上面的开关盒几乎相同）来隐藏它们，一旦你接近结束如果这就是你想要做的，数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:37:45.057

因为您尚未发布您尝试过的任何代码。

所以这里有一些我可以建议给你的想法。

如果您想在按下按钮时消失，而不是将其从视图中移除，您可以将其保留在那里但只会使其不可见，可以通过设置“视图的视觉外观”的属性（查找 UIView 类参考）例如。alpha 值，隐藏属性。

一旦你看不见它，然后在延迟一段时间后让它可见，例如 1/2 秒。一旦按钮可见，然后更改标签文本。

如果是你，你需要设置所有四个按钮的 UILabel 文本；通过将 label-text int 值增加 1。

# ios - Cocos2D autoration shifted by 90 Degrees

> ID：10257677
> 
> 赞同：0
> 
> 时间：2012-04-21T09:16:53.957
> 
> 标签：ios, cocos2d-iphone, rotation

When autorotating, I set

```
GAME_AUTOROTATION = kGameAutorotationUIViewController 
```

and

```
#elif GAME_AUTOROTATION == kGameAutorotationUIViewController    
    return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) ); 
```

This means that if I hold the device in either landscape orientation it will autorotate. The thing is, the rotation is always shifted by 90 degrees (ie when I rotate to landscape right I get portrait).

How do I go along in fixing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:30:00.113

正确的设置方法`GAME_AUTOROTATION`是这样的：

```
#define GAME_AUTOROTATION kGameAutorotationUIViewController 
```

（我在 GameConfig.h 中有我的。）

我无法理解`GAME_AUTOROTATION = kGameAutorotationUIViewController`，所以只是认为这可能是问题的原因（如果你这样使用它）。

无论如何，如果您仍然遇到自动旋转问题，请在其中设置一个断点`willRotateToInterfaceOrientation`并检查从那里发生的情况；与 相同`willAnimateRotationToInterfaceOrientation`。

# java - How to remove header attribute from Axis2 SOAP response

> ID：10257678
> 
> 赞同：0
> 
> 时间：2012-04-21T09:16:57.093
> 
> 标签：java, web-services, soap, axis2

I am trying to remove the header attributes from a SOAP response.

I have searched and ran across the idea that setting the `mustUnderstand` option too false will remove the header attribute element, but not the header tag.

How do I remove the header tag from an Axis2 SOAP response? Is it possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:48:15.047

您可以编写`SoapHandler`拦截您所有的肥皂请求。在内部`SoapHandler`，您可以通过各种方式访问​​而`SoapMessageContext`不是获取`SoapMessage.getEnvelope().getHeader()`和使用标题（删除/添加标题元素）。这种方法很好，因为您在 api 中引入了新层，并且可以预处理入站和出站消息，而不会影响您的主代码。也许下面的链接会帮助你[http://java.dzone.com/articles/creating-soap-message-handlers](http://java.dzone.com/articles/creating-soap-message-handlers)

# mysql - SQL Server vs MySQL - 查询执行时间差

> ID：10257688
> 
> 赞同：-1
> 
> 时间：2012-04-21T09:18:34.847
> 
> 标签：mysql

我已将大型 MS SQL Server 数据库迁移到 MySQL。我注意到，与相同查询的 SQL Server 相比，MySQL 上具有多个连接的复杂查询的查询执行时间要长得多（分别为 125.063 秒和 0.01 秒）。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:22:41.080

它可能是由新 DBMS 的非优化查询引起的。或者，例如，您可能选择了错误的 mysql 引擎。此外，您必须确保您的所有索引、主键、外键等都已成功导入。

# jquery - jquery 正则表达式替换href

> ID：10257691
> 
> 赞同：1
> 
> 时间：2012-04-21T09:19:16.277
> 
> 标签：jquery, regex, string, dom-manipulation, html

我有这个结构：

```
<ul>
    <li><a href="mydomain/site/location/paris/">Paris</a></li>
        <ul>
            <li><a href="mydomain/site/location/london/">London</a></li>
        </ul>
    <li><a href="mydomain/site/location/amsterdam-and-paris/">Amsterdam and Paris</a></li>
</ul> 
```

我需要用这个替换每个锚的href：

```
<a href="mydomain/site/event?location=london">London</a> 
```

你能帮我吗

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T09:37:32.177

[`.attr()`](http://api.jquery.com/attr/#attr-attributeName-functionindex-%20attr)当您可以使用回调函数来转换当前设置的属性时，[有一个表单。](http://api.jquery.com/attr/#attr-attributeName-functionindex-%20attr)

使用它并与正确的正则表达式结合使用这样的东西会起作用：

```
$("a[href^='mydomain/site']").attr('href', function (i, attr) {
    return attr.replace(
        /^(mydomain\/site\/)(location)\/([^/]*)\//
        , '$1event?$2=$3'
    );
})​ 
```

*   [jsFiddle 演示](http://jsfiddle.net/bazmegakapa/tBkrU/)
*   [Regex - 了解 Javascript Regexp](http://www.regular-expressions.info/javascript.html) - 这是不可避免的
*   [Regexr - 尝试正则表达式的好工具](http://gskinner.com/RegExr/)
*   [Javascript - MDN 上的 String.replace()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)
*   [jQuery - 属性以选择器 [name^="value"] 开头](http://api.jquery.com/attribute-starts-with-selector/)

# java - 如何告诉 JList cellrenderer 突然的 JList 更改？

> ID：10257692
> 
> 赞同：0
> 
> 时间：2012-04-21T09:19:16.917
> 
> 标签：java, swing, jlist

我有一个 JList 将根据用户指向选定的 JList。它就像一个监视器，将监视选定的 JList。当我实现自定义单元格渲染器并以编程方式执行类似`this.list = getSelectedList()`的操作时，单元格渲染器不会对信息的这种突然变化做出反应。如何通知 JList 重新评估其列表数据而无需调用添加/删除函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:31:38.647

从我收集的问题下方的评论中，您有一个列表 A 应该显示另一个列表的内容。A 列表应该显示用户选择的列表的内容，当用户更改“选定列表”时，您会遇到问题。

您可以共享实例的`ListModel`背后。`JList`所以你可以有类似的东西

```
public void selectionChanged( JList selectedList ){
  //update the model of this.list to match the model of selectedList
  this.list.setModel( selectedList.getModel() );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T09:28:32.530

`this.list = getSelectedList()`影响该字段的另一个 JList 对象`this.list`。如果`this.list`在执行此行之前将自定义渲染器设置为，则将渲染器设置在另一个 JList 对象上，并且渲染器无法神奇地附加到新的选定列表。

你混淆了变量和对象。当您在对象上调用方法时，您正在修改变量指向的对象，而不是变量本身。如果要将相同的单元格渲染器附加到新选择的 JList，则需要以下代码：

```
ListCellRenderer renderer = this.list.getCellRenderer();
this.list = getSelectedList();
this.list.setCellRenderer(renderer); 
```

# javascript - 使用 Dreamweaver 的 JavaScript 中的语法错误

> ID：10257696
> 
> 赞同：0
> 
> 时间：2012-04-21T09:19:39.137
> 
> 标签：javascript, syntax-error

我在 Dreamweaver 中有一段 JavaScript 代码，但它告诉我第 2 行有语法错误。问题出在哪里？

```
<link rel="stylesheet" type="text/css" href="scripts/rates/rates.css" />
<script src="scripts/rates/jquery-latest.js"></script>
<script>
$(document).ready(function() {
    $("#responsecontainer").load("scripts/rates/ratesresult_alb.php");
    var refreshId = setInterval(function() {
      $("#responsecontainer").load('scripts/rates/ratesresult_alb.php?randval='+ Math.random());
    }, 1800000);
});
</script>
<div id="responsecontainer">
</div> 
```

相同的脚本在网站[ak-invest.com](http://ak-invest.com)上有效，在新网站上无效[http://69.73.130.182/~akinvest/index.php/en/kembimi-valutor](http://69.73.130.182/~akinvest/index.php/en/kembimi-valutor)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:23:52.843

我在提供的代码中没有看到任何语法错误。你确定jquery正在加载吗？尝试添加一个简单的脚本来替换您当前的脚本：

```
alert($); 
```

如果加载了 jquery，这应该会发出警报。

您还可以检查 firebug 的 html 面板以确保正在加载库。

另一种解决方案是从已知来源（例如 Google CDN）加载 jquery，以便您知道自己拥有它。

例子：

```
<link rel="stylesheet" type="text/css" href="scripts/rates/rates.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
<script>
$(document).ready(function() {
    $("#responsecontainer").load("scripts/rates/ratesresult_alb.php");
    var refreshId = setInterval(function() {
      $("#responsecontainer").load('scripts/rates/ratesresult_alb.php?randval='+ Math.random());
    }, 1800000);
});
</script>
<div id="responsecontainer">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:33:35.723

您的语法错误几乎肯定会出现在包含的 js 文件中。看起来你没有写它（它是一个 jquery 库，对吗？）所以文件中确实存在语法错误的可能性相当低。

因此，实际发生的是文件不在您要查找的路径中（它是一个相对 URI），并且某种 HTML 404 页面被解析为 JavaScript 而不是 JavaScript 文件本身。

最可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:22:49.913

改变

```
<script src="scripts/rates/jquery-latest.js"></script> 
```

至 ：

```
<script src="scripts/rates/jquery-latest.js" type="text/javascript" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T09:24:46.347

旧版本可能检测不到 jquery 访问变量和元素的方式。你可以忽略这些错误，看看你的脚本是否真的有效。尽管有这些错误，您的脚本是否运行良好？

或者尝试更改 Mateusz 发布的添加类型属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T09:26:01.987

```
<script src="../scripts/rates/jquery-latest.js" type="text/javascript" /> 
```

或者

```
<script src="./scripts/rates/jquery-latest.js" type="text/javascript" /> 
```

# c# - 允许在中间使用特定字符，但不允许在结尾或开头

> ID：10257701
> 
> 赞同：1
> 
> 时间：2012-04-21T09:20:42.907
> 
> 标签：c#, regex

我想定义一个“有效”输入，`_-.`不允许在字符串的末尾或开头，只允许在中间。

*可接受的字符*（位置无关紧要）：`a-zA-Z0-9`以及我不知道如何在正则表达式中允许它们的所有希伯来字母（也许只是对所有字母进行硬编码？）

*不可接受的字符*（位置无关紧要）：所有符号，除了我之前提供的特殊符号。

我不知道如何构建这种模式，如果您可以在每个部分添加提示和评论，我会理解的。谢谢！

这不是为了家庭作业，只是为了自学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:24:52.010

```
@"^[a-zA-Z\dא-ת][a-zA-Z_\-\.\dא-ת]*[a-zA-Z\dא-ת]$" 
```

如果您想允许“_.-”不重复：

```
@"^[a-zA-Z\dא-ת]([a-zA-Z\dא-ת]+[_\.\-]?)*[a-zA-Z\dא-ת]$" 
```

如果要在中间允许空格：

```
@"^[a-zA-Z\dא-ת][a-zA-Z_\-\.\d\sא-ת]*[a-zA-Z\dא-ת]$" 
```

如果你想要空格 + "_.-" 没有重复：

```
@"^[a-zA-Z\dא-ת]([a-zA-Z\d\sא-ת]+[_\.\-]?)*[a-zA-Z\dא-ת]$" 
```

所以使用正则表达式：

```
var isValid = Regex.IsMatch(input, @"..."); 
```

此外，如果您计划在代码中多次使用正则表达式，我建议添加 RegexOptions.Compiled 标志，以提高速度。

```
var isValid = Regex.IsMatch(input, @"...", RegexOptions.Compiled); 
```

# c++ - 如何保存像firefox这样的首选项？

> ID：10257710
> 
> 赞同：0
> 
> 时间：2012-04-21T09:21:50.007
> 
> 标签：c++, c, firefox

我创建了一个简单的浏览器，我想从像 firefox 这样的文件中加载首选项。

我是否必须将首选项加载到内存中，还是必须在必要时读取每个首选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:26:57.530

一种常见的做法是将首选项加载到内存中的数据结构中。这比在必要时读取每个首选项有很多优点：

*   从磁盘读取是一项非常昂贵的操作，几个字节的效率非常低。
*   您在启动时将需要大多数首选项，为什么要单独加载它们？
*   偏好所消耗的空间**可以忽略不计**。
*   您可以节省代码复杂性和可能的​​错误。
*   如果您将一直加载首选项，则会削弱磁盘驱动程序处理更重要请求的能力。

# c# - 查找第一个大写字符的索引

> ID：10257711
> 
> 赞同：4
> 
> 时间：2012-04-21T09:21:54.410
> 
> 标签：c#, string, linq, search

作为一个 C# 新手，目前要找出字符串中第一个大写字符的索引，我想出了一个方法

```
var pos = spam.IndexOf(spam.ToCharArray().First(s => String.Equals(s, char.ToUpper(s)))); 
```

从功能上讲，代码工作正常，只是我对遍历字符串两次感到不舒服，一次是找到字符，然后是索引。是否有可能使用 LINQ 一次性获取第一个大写字符的索引？

C ++中的等效方式类似于

```
std::string::const_iterator itL=find_if(spam.begin(), spam.end(),isupper); 
```

等效的 Python 语法是

```
next(i for i,e in enumerate(spam) if e.isupper()) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T09:36:08.137

好吧，如果你只是*想*在 中做`LINQ`，你可以尝试使用类似的东西

```
(from ch in spam.ToArray() where Char.IsUpper(ch) 
         select spam.IndexOf(ch)) 
```

如果你对字符串运行这个，说

```
"string spam = "abcdeFgihjklmnopQrstuv";" 
```

结果将是：`5, 16`。

这将返回预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T12:05:59.630

另一种可能：

```
string s = "0123aBc";
int rslt = -1;
var ch = s.FirstOrDefault(c => char.IsUpper(c));
if (ch != 0)
    rslt = s.IndexOf(ch); 
```

而且，如果您只关心英语：

```
char[] UpperCaseChars = new char[] 
{
    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',
    'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
    'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
    'Y', 'Z'
};
int rslt = s.IndexOfAny(UpperCaseChars); 
```

这可能会比其他任何一个执行得快得多，如果我经常这样做，这就是我会使用的。

另一种可能性是使用正则表达式：

```
var match = Regex.Match(s, "\p{Lu}", RegexOptions.None);
int rslt = match.Success ? match.Index : -1; 
```

这将匹配任何 Unicode 大写字符。如果您只想要英语，请将表达式更改为`"[A-Z]"`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T09:24:16.367

不需要 LINQ：

```
int index = 0;
foreach(Char c in myString)
{
   if(Char.IsUpper(c)) break;
   index++;
}

// index now contains the index of the first upper case character 
```

正如@Tigran 评论的那样，这可以很容易地转换为扩展方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T11:07:21.077

这是基于@Tigran's 的答案，但即使有重复，也会返回所有大写字母的索引：

```
from i in Enumerable.Range(0, searchText.Length - 1) 
      where Char.IsUpper(searchText.Chars[i]) select i 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T11:39:37.037

只是因为我经常发现人们不知道：

Select 有一种方法可以获取索引以及您正在枚举的项目。尽管它会带来一点额外的开销，但您可以这样做：

```
var objectsWithCharAndIndex = myString.Select((c,i)=>new {Char = c,Index = i}); 
```

那么它只是一个问题：

```
var firstCapitalIndex = objectsWithCharAndIndex.First(o => Char.IsUpper(o.Char)).Index; 
```

或全部归还

```
var allCapitalIndexes = objectsWithCharAndIndex.Where(o => Char.IsUpper(o.Char)).Select(o=>o.Index); 
```

如果您需要将字符和索引放在一起，您可以遍历对象。

这只是普通的 Linq 语法，而不是 Linq 查询语法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-07T23:14:43.993

Linq 没有提供开箱即用的有效方法，但您可以扩展 Linq 以非常轻松地提供此功能。

如果您将此类添加到您的解决方案中：

```
internal static class EnumerableExtensions
{
    public static int IndexOfNth<T>(this IEnumerable<T> enumerable, Func<T, bool> predicate, int skip = 0)
    {
        var index = 0;
        foreach (var value in enumerable)
        {
            if (predicate(value))
            {
                if (skip-- == 0)
                    return index;
            }
            index++;
        }
        return -1;
    }

    public static int IndexOfFirst<T>(this IEnumerable<T> enumerable, Func<T, bool> predicate)
    {
        return enumerable.IndexOfNth(predicate);
    }
} 
```

然后你可以编写这样的代码，它会很高效，并且只枚举字符串一次：

```
var firstUpper = spam[spam.IndexOfFirst(Char.IsUpper)]; 
```

*注意：如果字符串不包含任何大写字母，这会导致索引超出范围，因此您需要额外检查`IndexOfFirst`返回`-1`。*

通过此实现，您还可以找到第二个大写字母，如下所示：

```
var secondUpper = spam[spam.IndexOfNth(Char.IsUpper, 1)]; 
```

它适用于任何可枚举的字符，而不仅仅是字符的枚举，例如

```
var indexOfFirstManager = employees.IndexOfFirst(employee => employee.IsManager); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-10T05:34:36.333

```
String.Concat(
  str.Select(c => Char.IsUpper(c) ? $" {c}" : $"{c}")
); 
```

# freebsd - FreeBSD Echoprint 代码生成器

> ID：10257713
> 
> 赞同：9
> 
> 时间：2012-04-21T09:22:21.943
> 
> 标签：freebsd, audio-fingerprinting, codegen, echoprint

我正在尝试在 FreeBSD 上编译 Echoprint 代码生成，但失败了。但这是我尝试跑步时得到`make`的`make install`

```
> 制作
“Makefile”，第 35 行：缺少依赖运算符
“Makefile”，第 39 行：需要一个运算符
“Makefile”，第 41 行：需要一个运算符
“Makefile”，第 50 行：警告：目标“%.o”的重复脚本被忽略
“Makefile”，第 53 行：警告：目标“%.o”的重复脚本被忽略
“Makefile”，第 56 行：警告：目标“%.o”的重复脚本被忽略
“Makefile”，第 61 行：缺少依赖运算符
“Makefile”，第 62 行：警告：目标“ifeq”的重复脚本被忽略
“Makefile”，第 62 行：警告：目标“(,Darwin)”的重复脚本被忽略
“Makefile”，第 63 行：需要一个运算符
“Makefile”，第 77 行：缺少依赖运算符
“Makefile”，第 78 行：警告：忽略目标“ifeq”的重复脚本
“Makefile”，第 78 行：警告：目标“(,Darwin)”的重复脚本被忽略
“Makefile”，第 79 行：警告：目标“ifeq”的重复脚本被忽略
“Makefile”，第 79 行：警告：目标“(,Darwin)”的重复脚本被忽略
“Makefile”，第 80 行：警告：目标“ifeq”的重复脚本被忽略
“Makefile”，第 80 行：警告：目标“(,Darwin)”的重复脚本被忽略
“Makefile”，第 81 行：需要一个运算符
“Makefile”，第 85 行：需要一个运算符

```

我尝试以 root 和普通用户身份运行它。两者都无济于事。

不幸的是，我对makefile一无所知。FreeBSD有makefile吗？

最好的问候，蒂莫菲

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T09:34:38.020

安装`devel/gmake`端口并使用`gmake`而不是`make`.

# controller - 单击按钮转到另一个控制器时如何添加 Segue：验证逻辑

> ID：10257718
> 
> 赞同：1
> 
> 时间：2012-04-21T09:23:00.830
> 
> 标签：controller, uikit, interface-builder, uistoryboard, segue

想象一下，我有一个 viewcontrol 类（它有登录信息），我想做的是：用户点击登录按钮后，我想用我的验证方法检查它，然后我想去`UITabBarController`情节提要中的.

任何人都可以帮我添加segue`UITabBarController`吗？如果我在登录按钮上添加一个 push segue，它将`UITabBarController`直接进入，而与验证状态无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:48:31.093

您可以将情节提要中的按钮绑定到初始视图控制器中的 IBAction。

然后你可以创建一个从同一个视图控制器到 UITabBarController

最后，在登录按钮的 IBAction 代码中，您可以进行验证，如果对验证满意，则调用

```
- (IBAction) validateThenPush:(id)sender
{
    if ([self loginValidated])
        [self performSegueWithIdentifier:@"pushToTabBarController" sender:self];
} 
```

（sender:self 可以是 nil 或传递给动作的按钮或任何你想要的上下文`prepareForSegue:sender:`）

# c# - 以编程方式执行“java -version”将输出放在 StandardError 而不是 StandardOutput

> ID：10257720
> 
> 赞同：0
> 
> 时间：2012-04-21T09:23:02.917
> 
> 标签：c#, java, version

当我试图以编程方式检测我的 PC 上的 java 版本时，我面临着非常奇怪的行为。我正在使用以下 C# 代码：

```
ProcessStartInfo procStartInfo = new ProcessStartInfo("cmd", "/c java -version");
procStartInfo.RedirectStandardOutput = true;
procStartInfo.RedirectStandardError = true;
procStartInfo.UseShellExecute = false;
procStartInfo.CreateNoWindow = true;
Process proc = new Process();
proc.StartInfo = procStartInfo;
proc.Start();
// Get the output into a string
output = proc.StandardOutput.ReadToEnd();
   if (output == "")
   output = proc.StandardError.ReadToEnd();
return output; 
```

这将显示正确的信息，但结果是在 proc.StandardError.ReadToEnd() 而不是 proc.StandardOutput.ReadToEnd() 中找到的，就像在任何其他命令中一样（即“java -help”）。

更奇怪的是，如果我运行应该输出 java 版本和帮助信息的“java -showversion”，我会在 StandardOutput 中获得帮助信息，而版本信息在 StandardError 中。这对我来说没有意义。

我在 2 台 Windows 7 x64 机器和 1 台 XP x32 上对此进行了测试。到处都是一样的东西。这真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:33:39.983

看起来像这样（即在标准输出上打印的版本）是 sun（oracle）为了避免破坏遗留系统而从未修复的一个老问题：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id= 4380614](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4380614)。在 Linux 上，**java -version > foo**将创建一个空文件，而**java -version 2> foo**将创建一个包含版本的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:50:46.987

这应该可以解决问题：

```
java -version 2>&1 | more 
```

“更多”不是必需的，除非您想将其重定向到文件，例如。

适用于 *NIX 和 Win。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:36:53.787

```
ProcessStartInfo procStartInfo = new ProcessStartInfo("cmd", "/c java -version");
procStartInfo.RedirectStandardOutput = true;
procStartInfo.RedirectStandardError = true;
procStartInfo.UseShellExecute = false;
procStartInfo.CreateNoWindow = true;
Process proc = new Process();
proc.StartInfo = procStartInfo;
proc.EnableRaisingEvents = true;
// create event and wait for data receive
proc.OutputDataReceived += new DataReceivedEventHandler(proc_OutputDataReceived);
proc.ErrorDataReceived += new DataReceivedEventHandler(proc_ErrorDataReceived);
proc.Start();
proc.BeginOutputReadLine();
proc.BeginErrorReadLine();
proc.WaitForExit();

static void proc_ErrorDataReceived(object sender, DataReceivedEventArgs e)
{
    string s = e.Data;
}

static void proc_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    string s = e.Data;
} 
```

# c# - 如何在 WPF DataGrid 的列标题中设置垂直文本？

> ID：10257724
> 
> 赞同：3
> 
> 时间：2012-04-21T09:23:21.673
> 
> 标签：c#, wpf, wpfdatagrid

嗯，实际上从水平旋转-90 度就是我的意思。

我需要这样做，因为标题的文本很长，但单元格的值很短，我想在屏幕上放置很多列。

是否可以轻松做到这一点，还是我需要先了解资源和模板？我不介意“黑客”解决方案！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T09:41:02.990

这将旋转整个 ColumnHeaderCell：

```
<DataGrid.ColumnHeaderStyle>
    <Style TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="LayoutTransform">
            <Setter.Value>
                <RotateTransform Angle="270" />
            </Setter.Value>
        </Setter>
    </Style>
</DataGrid.ColumnHeaderStyle> 
```

请注意：这意味着`HorizontalContentAlignment`然后是 a `VerticalContentAlignment`，反之亦然。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T21:18:52.120

这是另一种方法：

```
 <Style x:Key="soDataGrid_ColumnHeaderRotateStyle" TargetType="DataGridColumnHeader" >
    <Setter Property="ContentTemplate" >
        <Setter.Value>
            <DataTemplate>
                <TextBlock TextWrapping="Wrap" Text="{Binding}"
                           FontWeight="Bold" Width="60"
                           VerticalAlignment="Center" TextAlignment="Center"
                           HorizontalAlignment="Center">
                    <TextBlock.LayoutTransform>
                        <RotateTransform Angle="270" />
                    </TextBlock.LayoutTransform>
                </TextBlock>
            </DataTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="HorizontalContentAlignment" Value="Center" />
</Style> 
```

您可以使用如下样式

```
<DataGridComboBoxColumn Header="Portrait / &#x0a;Landscape" Width="42"
     HeaderStyle="{StaticResource soDataGrid_ColumnHeaderRotateStyle}"
     SelectedItemBinding="{Binding Orientation}"  
     ItemsSource="{Binding Mode=OneWay, 
     Source={StaticResource languageEnum}}" /> 
```

我发现这种方法给了你很多控制权。在长标题文本中使用换行代码很有帮助。

Unfortunately I have found you need to hardcode the width of the rotated textblock - maybe there is a better way to set this width based on the text content.

# jsp - 如何在liferay中的多个jsp页面之间共享一个对象？

> ID：10257728
> 
> 赞同：0
> 
> 时间：2012-04-21T09:23:44.897
> 
> 标签：jsp, liferay

我正在开发一个liferay portlet。在这个portlet 中，我从portlet 类中的数据库中获取用户信息并将它们保存在结果集中。如何在 portlet 类和 jsp 页面之间共享这个结果集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:24:14.753

将用户对象保存在数组列表中并使用会话保存此数组列表。您可以使其在整个 portlet 中可用。 [这里解释了设置和获取。](http://longgoldenears.blogspot.com/2008/03/liferay-session-sharing-demystified.html)

[例子](http://www.liferay.com/community/forums/-/message_boards/message/10954894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:34:39.667

建议保持会话精简，在这种情况下，我会将数据放入请求中。

爪哇：

```
public class MyTestPortlet extends MVCPortlet {
    @Override
    public void doView(RenderRequest renderRequest, RenderResponse renderResponse) throws IOException, PortletException {
        User user = getCurrentUser(renderRequest);
        renderRequest.setAttribute("UserName", user.getScreenName());
        super.doView(renderRequest, renderResponse);
    }
...
} 
```

jsp：

```
Hello ${UserName}!!! 
```

# sql - 从位于不同表中的实体创建外键

> ID：10257731
> 
> 赞同：1
> 
> 时间：2012-04-21T09:24:07.917
> 
> 标签：sql, oracle, constraints

几个小时以来，我一直在为此挠头。

我有四张桌子`Book`，`Author`和`Allocation``WorkSession`

我需要做出一个约束，即`bid`和的组合`authID`存在于`Allocation`表中的`WorkSession`表中。

我尝试像通常那样创建外键约束，但它不起作用，因为引用的 id 已经是外键，我无法创建新键作为分配表的标识符

```
CREATE TABLE Book(
bid NUMBER(4),
title VARCHAR2(30) NOT NULL,
SellingPrice NUMBER(6,2),
PRIMARY KEY (bid),
CONSTRAINT EM_SellingPrice CHECK(SellingPrice >= 0)
);

CREATE TABLE Author(
authID NUMBER(4),
fName VARCHAR2(30),
sName VARCHAR2(30),
PRIMARY KEY(authID),
CONSTRAINT EM_Name UNIQUE (fName,SName)
);

CREATE TABLE Allocation(
bid NUMBER(4),
authID NUMBER(4),
payRate NUMBER(6,2),
CONSTRAINT AL_PayRate CHECK(payRate >= 1 AND payRate < 80),
FOREIGN KEY(bid) REFERENCES Book(bid),
FOREIGN KEY(authID) REFERENCES Author(authID)
);

CREATE TABLE WorkSession(
bid NUMBER(4),
authID NUMBER(4),
WorkYear NUMBER(4),
WorkWeek NUMBER(2),
WorkHours NUMBER(4,2),
CONSTRAINT WY_Range CHECK(WorkYear > 2010 AND WorkYear < 2014),
CONSTRAINT WW_Range CHECK(WorkWeek >= 1 AND WorkWeek <= 52),
CONSTRAINT WH_Range CHECK(WorkHours >= 0.5 AND WorkHours <100),
CONSTRAINT FK_Check FOREIGN KEY(bid, AuthID) REFERENCES Allocation(bid, AuthID),
PRIMARY KEY(workYear, WorkWeek)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:26:36.317

```
CREATE TABLE Allocation(
bid NUMBER(4),
authID NUMBER(4),
payRate NUMBER(6,2),
CONSTRAINT AL_PayRate CHECK(payRate >= 1 AND payRate < 80),
FOREIGN KEY(bid) REFERENCES Book(bid),
FOREIGN KEY(authID) REFERENCES Author(authID)
); 
```

外键约束必须针对独特的东西。您可以在一个或多个列上使用 PRIMARY KEY 约束或 UNIQUE 约束来做到这一点。上面的表“分配”没有这些约束中的任何一个。

*如果*{bid, authid} 在“分配”表中是唯一的，那么您可以`PRIMARY KEY (bid, authid)`在该表中声明。一个`REFERENCES allocation (bid, authid)`应该可以工作的外键。

# regex - 微软的 Unicode 支持级别？

> ID：10257736
> 
> 赞同：1
> 
> 时间：2012-04-21T09:24:57.620
> 
> 标签：regex, visual-studio-2010, unicode, tr1, c++-standard-library

Microsoft Visual C++ 2010的`std::wregex` **Unicode**支持是什么样的？

1.  它是否支持**Unicode 字符类**？`[:Nd:]`等等。
2.  支持**排序规则，如 digraphs**？`[.ae.]`等等。

[`std::wregex`](http://msdn.microsoft.com/en-us/library/bb982110.aspx)我希望微软在 Unicode 方面的实现比[boost更好？](http://www.boost.org/doc/libs/1_49_0/libs/regex/doc/html/boost_regex/unicode.html)

我可以使用 ICU 库。但是ICU需要一个16MB的数据文件！我希望消除对 Windows 的依赖。

**注意**：`regex`非宽版本，只支持ASCII字符！`wregex`所以我对正确实现 UTF-16 的宽版本的希望并不高。

# ios - Curldown 只会淡入 - 为什么？

> ID：10257737
> 
> 赞同：1
> 
> 时间：2012-04-21T09:25:08.893
> 
> 标签：ios, ipad

在我的 -application:DidFinishLaunchingWithOptions 中，作为最后一部分，我有以下代码：

```
[UIView animateWithDuration:1 delay:1 options:UIViewAnimationOptionCurveEaseOut 
                 animations:^{
                     [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.viewController.source cache:YES];
                     self.viewController.source.alpha = 1.0;
                 } completion:nil]; 
```

它应该做的是“淡入'源'视图并将其卷曲以覆盖背景”

相反，它只是在“源”视图中淡出，没有卷曲。

线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T21:14:52.093

解决了：

似乎动画循环的某些部分尚未运行。解决方法是把动画放在一个方法中，然后从应用程序：DidFinishLaunchingWithOptions 做

# javascript - 在 div 元素中找出鼠标位置？

> ID：10257739
> 
> 赞同：0
> 
> 时间：2012-04-21T09:25:16.403
> 
> 标签：javascript

我做了一个程序的概念是找出 div 元素内的鼠标坐标位置......它只能在 IE 浏览器中完美运行，但我无法在 mozilla firefox 中得到答案......这是什么原因？？？？？？？？？

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>Cursor position status display</title>
<script type="text/javascript">

 function getXOffset(e){
if(typeof e.offsetX != 'undefined')
  return e.offsetX;
 else if(typeof e.pageX != 'undefined')
  return e.pageX - e.target.offsetLeft;
}

function getYOffset(e){
 if(typeof e.offsetY != 'undefined')
  return e.offsetY;
   else if(typeof e.pageY != 'undefined')
  return e.pageY - e.target.offsetTop;
}

function displayOffsets(e){
e = (e) ? e : window.event;
window.status = 'x: '+getXOffset(e)+'   y: '+getYOffset(e); 
}

 </script>
 </head>
 <body>
  <div style="width:100px; height:300px;margin:50px 0 0 500px;border:1px solid red;" >
  <div onMouseMove="displayOffsets(event)" style="width:50px; height:300px;     background:#669966;"></div>
  <div >
  </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:21:00.400

您的功能可能工作得很好，您的问题可能是`window.status`部分：[https ://developer.mozilla.org/en/DOM/window.status](https://developer.mozilla.org/en/DOM/window.status)

> 此属性在 Firefox 和其他一些浏览器的默认配置中不起作用：设置 window.status 对状态栏中显示的文本没有影响。

也许尝试将坐标输出到页面中的其他元素，或者更好的是，如果你有类似 Firebug 的东西，你可以使用[控制台](http://getfirebug.com/logging)输出。

# scheme - 在 Scheme 中评估性能

> ID：10257741
> 
> 赞同：0
> 
> 时间：2012-04-21T09:25:31.957
> 
> 标签：scheme, racket, benchmarking

我如何评估 Scheme (R6RS) 代码段的性能？

我需要一些程序，例如：`(time (oper args))`或`(time oper args)`。

[我在这里](https://stackoverflow.com/questions/256647/time-code-in-plt-scheme)讨论了，但它似乎对我不起作用。我需要导入一些模块/库吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T11:51:37.513

`time`工作正常。

```
$ mzscheme
Welcome to Racket v5.2.1.
> (time (/ 1 2))
cpu time: 0 real time: 0 gc time: 0
1/2
> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T12:47:48.487

您使用的是哪种方案？`time`似乎是一个标准的方案功能，所以如果它不起作用，您可能正在使用低于标准的实现或在调用它时做错了什么。

你能描述一下你尝试过的东西（粘贴适当的代码片段）吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T14:47:20.420

你能用另一种语言吗？这对我有用，假设您在 DrRacket 中选择了“使用源中声明的语言”选项：

```
#lang racket
(time (+ 1 1))

> cpu time: 0 real time: 0 gc time: 0
> 2 
```

# console - 是否可以从 Dart 中的控制台读取？

> ID：10257744
> 
> 赞同：8
> 
> 时间：2012-04-21T09:25:44.157
> 
> 标签：console, dart

我知道我们可以使用 print() 语句在 dart 中打印到控制台。

我想知道是否可以从控制台读取数据。我进行了搜索并查看了 dart:io 包，但找不到任何参考。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T09:43:58.850

您可以像这样使用[StringInputStream](http://api.dartlang.org/io/StringInputStream.html)从标准输入读取

```
#import("dart:io");

main() { 
  var stream = new StringInputStream(stdin); 
  stream.onLine = () { 
    var line = stream.readLine(); 
    if (line != null) { 
      print(line); 
    } 
  }; 
} 
```

另外，如果您正在开发控制台应用程序，请检查[Options](http://api.dartlang.org/dart_core/Options.html)类以解析命令行参数

```
final args = new Options().arguments; 
```

# javascript - 基于支持js事件的手持设备检测

> ID：10257750
> 
> 赞同：0
> 
> 时间：2012-04-21T09:26:38.113
> 
> 标签：javascript, jquery, events, mobile, jquery-events

我正在寻找一种方法来*检测设备是否是手持的*。目前我正在使用[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)但*我不喜欢整个 userAgent 字符串检测方法*。

我遇到了这个测试浏览器中事件支持的脚本（[http://kangax.github.com/iseventsupported/](http://kangax.github.com/iseventsupported/)），它让我想如果我只测试**“mouseover”**或**“touchstart”**事件或两者兼而有之决定设备是否是手持的。

在我的项目中，我需要检测输入密码是否支持在 iPhone 或 Android 中显示最后输入的字符。

![在此处输入图像描述](../Images/c9307ab95c35de29dd923fbb4ca2ebaf.png)

那么您认为，**事件检测方法好**还是**有更好的解决方案**？

> 更新：

我决定在浏览器中使用（检测）**orientationchange**事件的支持。

# jquery - 为什么图像不附加到 div

> ID：10257752
> 
> 赞同：1
> 
> 时间：2012-04-21T09:26:54.303
> 
> 标签：jquery, jsp

为什么数组中的图像没有显示在div中

我正在尝试将图像附加到下面定义的 div 中，但它们没有显示在 div 中。

```
<html>
<head>
<title>jQuery Hello World Alert box</title>
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">  
</script>
<script>
var content = "";
var myArray = ['D:/1146Wj.jpg', 'D:/1146Wj.jpg','D:/1146Wj.jpg'];
myArray.forEach(function (element) {
alert(element);
  content += "<div><a href='#'><img src=" + element + "   /></a></div>";
 $("#container").html(content);
});

</script>
</head>
 <script type="text/javascript">
$(document).ready(function(){
$("#cl").click(function(){
alert("HELLO WORLD!");
});
});
</script>
<body>
<font color="red">CLICK BELOW BUTTON TO SEE ALERT BOX</font>
<br>
<br>
<button id="cl">Click Me</button>
<div id="container">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:30:34.027

首先你的 for 循环是错误的

```
myArray.forEach(function (element) {
alert(element);
  content = "<div><a href='#'><img src=" + element + "   /></a></div>";
 $("#container").append(content);
}); 
```

检查[演示](http://jsfiddle.net/dhirajbodicherla/J3JJD/3/)

确保你的 $(document).ready 中有这个 for 循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:31:49.157

确保在文档加载后将图像附加到 DOM（将代码放入 $(document).ready()）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:33:52.870

有几个原因。

首先是因为在评估脚本时，HTML 页面还没有加载，dom 还没有准备好。所以 div 不能被 jQuery 找到和修改。您需要将脚本封装在一个回调函数中，并将该回调函数注册到`$(document).ready()`.

其次，因为 HTML 页面不应该访问最终用户的本地驱动器来加载图像。即使他们这样做了，它也需要使用 file:// 协议。图像应该通过 HTTP 提供，就像您的页面一样。

# database - 使用 Access 创建数据库？

> ID：10257756
> 
> 赞同：0
> 
> 时间：2012-04-21T09:27:30.803
> 
> 标签：database, excel, ms-access

我最近接手了一个名为“Meals on Wheels”的老年人非营利项目，也许你的城市也有。

目前，手动检查每个获得餐点的人的标签并查看他们是否不能吃某些东西以及他们在一周中的哪几天得到交付是一个非常繁琐的例程。

我很想把它电脑化，不仅可以消除错误，还可以让它运行得更快、更顺畅。

标签包含姓名、地址、他们不能吃的食物和星期几。

有没有办法把它电脑化？如果有帮助，我们会在 Excel 上运行膳食菜单。

有人建议我尝试使用 MS Access，但是，我以前从未使用过它，这是我们需要执行此操作的程序吗？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:04:28.363

如果您有很多人需要照顾，或者如果您不断输入新信息，访问可能会很有用。听起来 Excel 在您的情况下可能更有用。条件格式和过滤可能对您有所帮助。

* * *

**如果客户今天要交货，这将突出显示客户：**

**从第 2 行**开始在**A**列中创建一个包含人员姓名的电子表格（第 1 行中的标题是可选的，但下面的公式无论如何都从第 2 行开始），将他们交付的日期放在**B**列中，并像这样写出全天名称**周日、周三、周五**或其他。在剩下的列中，您可以放置​​地址、食品等。单击单元格**A2**并拖动以选择所有客户的姓名、日期、地址等。单击Excel 窗口顶部的**条件格式。**

 ******点击**新规则**

选择**使用公式确定要格式化的单元格**

在标记为**格式值的框中，此公式为真**，复制并粘贴此公式：

```
=COUNTIF($B2,"*"&TEXT(WEEKDAY(TODAY(),1),"dddd")&"*")>0 
```

仍然在对话框中，单击“**格式**”按钮，选择“**填充**”选项卡并选择明亮的颜色。单击**确定**确认颜色，然后**单击确定**保存新规则，然后**单击确定**应用条件格式。

（此公式使用**TODAY()**获取日期，将其转换为**WEEKDAY()**数字（使用星期日作为第 1 天），将日期数字转换为格式为“dddd”的**TEXT**（星期日而不是“ddd”，即 Sun ), **COUNTIF()**只会计算包含日期的单元格（给出 1 或 0），如果它包含日期，则 '1 大于 0' 变为 TRUE 并且单元格有条件地格式化。）

* * *

如果您希望公式适用于其他日期而不是今天，您可以将 TODAY() 部分替换为单元格引用，例如 G1，然后在单元格 G1 中键入您想要的日期：

```
=COUNTIF($B3,"*"&TEXT(WEEKDAY($G$1,1),"dddd")&"*")>0 
```

然后在单元格 G1 中键入日期，例如 22/5/12

如果客户每周在同一天收到送货，那么要查看谁在星期四收到餐点，您可以在 G1 中输入星期四并将公式缩短为：

```
=COUNTIF($B3,"*"&$G$1&"*")>0 
```

* * *

**要创建仅显示当天到期的客户而不是仅突出显示它们的过滤器：**

创建一个像以前一样布局的电子表格（从第 2 行开始，客户的交货天数在 B 列 - 星期一、星期四、星期六），而不是条件格式，将公式粘贴到第**2**行的单元格中，并通过悬停使用自动填充将鼠标悬停在带有公式的单元格的右下角，使光标变为**+**并双击。只要您没有任何空行，您就应该得到一列 TRUE 和 FALSE 值。（如果您需要空行，请单击并向下拖动**+**。）

转到Excel 窗口顶部的“**数据”选项卡，然后选择“****过滤器**”按钮。一些向下箭头应该出现在列的顶部。选择 TRUE/FALSE 列上方的向下箭头并仅选择 TRUE 复选框。要再次显示所有客户端，请再次选择相同的向下箭头并选择**Select All**。每当您向电子表格添加新客户时，请将鼠标悬停在公式列中的单元格上，然后再次双击**+**自动填充以将公式添加到新客户的行中。

您可以同时使用这两种方法来突出显示*和*过滤而不会出现问题

* * *

还有其他一些事情可能会有所帮助，但这取决于您的操作方式。您可以写一列“今日配料”，并使用条件格式在配料与他们不能吃的东西匹配时用红色突出显示某人。如果有人不吃鱼而你把黑线鳕放在配料表中，这可能会有风险，因为它们当然不匹配！

如果你想要免费的 Excel 大师班，我推荐 YouTube 的 [Bill Jelen - 'Mr Excel'](http://www.youtube.com/user/bjele123/videos)和[ExcelIsFun](http://www.youtube.com/user/ExcelIsFun/videos)******

# scala - 实现固定大小、不可变和专用向量

> ID：10257759
> 
> 赞同：12
> 
> 时间：2012-04-21T09:28:25.450
> 
> 标签：scala, autoboxing, specialized-annotation

为了性能和安全性，我想实现一个固定大小的向量，它既不可变又专门化（我需要快速算术）。我的第一个想法是使用`@specialized`注释（因为我需要整数和实数）。

这是第一次尝试：

```
package so
class Vec[@specialized A] private[so] ( ary: Array[A] ) {
  def apply( i: Int ) = ary(i)
} 
```

但是，当我用 分析生成的字节码时`javap`，我可以看到元素仍然被装箱。例如：

```
public double apply$mcD$sp(int);
  Code:
   0:   aload_0
   1:   iload_1
   2:   invokevirtual   #33; //Method apply:(I)Ljava/lang/Object;
   5:   invokestatic    #83; //Method scala/runtime/BoxesRunTime.unboxToDouble:(Ljava/lang/Object;)D
   8:   dreturn 
```

看起来数组不是专门的，这看起来很傻，因为数组是专门在 JVM 上的。

我还能做些什么来达到我的目标吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T17:44:12.823

您可能正在查看编译为 Vec.class 的代码。根据[这个线程](http://groups.google.com/group/scala-user/browse_thread/thread/e8aef5df5e943e21?pli=1)，专业化发生在子类中。这可以在 REPL 中验证：

```
scala> class Vec[@specialized A] ( ary: Array[A] ) {
     |   def apply( i: Int ) = ary(i)
     | }
defined class Vec

scala> new Vec( Array[Int](1) ).getClass
res0: java.lang.Class[_ <: Vec[Int]] = class Vec$mcI$sp 
```

如您所见，`Int`它正在使用 subclass `Vec$mcI$sp`。如果您在该类上运行 javap，您会发现它实际上正确地专门化了代码。`Vec$mcI$sp.class`这是使用 javap时 apply 方法的样子：

```
 public int apply(int);
    flags: ACC_PUBLIC
    Code:
      stack=2, locals=2, args_size=2
         0: aload_0       
         1: iload_1       
         2: invokevirtual #13                 // Method apply$mcI$sp:(I)I
         5: ireturn 
```

我想这是你在使用时想要的`Int`。

# iphone - 如何在视图控制器中的按钮上调用 nsobject 类

> ID：10257762
> 
> 赞同：1
> 
> 时间：2012-04-21T09:28:49.147
> 
> 标签：iphone, xcode, viewcontroller, nsobject

我正在做一个应用程序，我需要在视图控制器类中调用 nsobject 类，我尝试了几种方法，但它不起作用，要么我收到 sigabrt 错误，要么应用程序崩溃。

请帮我。

我现在迷路了好几天。

有人有从视图控制器调用 nsobject 的示例代码吗？

提前感谢您的帮助。

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

-(IBAction)firstButton;

@end

#import <UIKit/UIKit.h>

@interface TutoAppDelegate : NSObject <UIApplicationDelegate> {

    UIWindow *window;
    UINavigationController *navigationController;
    UIButton *firstButton;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;
@property (nonatomic, retain) IBOutlet UIButton *firstButton;

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:36:43.903

请发布一些代码，我们可以提供正确的解决方案。即使我没有完全得到问题，但如果你想调用类对象，那么请执行以下操作。

```
-(void)buttoevent:(id)sender
{
  nsobjectclass *obj = [[nsobjectclass alloc]init];
  //if you want to call any method of that class then do the following.
  [obj methodname];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:39:16.990

首先检查您是否在使用之前导入了该类

# php - PHP Azure 存储 - 我得到的表更新：服务器无法验证请求

> ID：10257764
> 
> 赞同：0
> 
> 时间：2012-04-21T09:29:02.543
> 
> 标签：php, eclipse, azure, fiddler

您好强大的 Windows Azure 开发人员，

我在 Eclipse 中使用 PHP SDK for Windows Azure 处理本地计算和存储模拟器上的存储表

我正在运行这段代码（基本上我正在更新数据）：

```
$statistics = AzureStorageTable::connection()->retrieveEntities(self::$statisticsTableName);
    foreach($statistics as $statistic) {
        $block = $statistic->getRowKey();
        if(isset($processedLogs[$block])) {
            $processedLog = $processedLogs[$block];
            $statistic->time    = ($statistic->time + $processedLog[0]);
            $statistic->count   = ($statistic->count + $processedLog[1]);
            $statistic->average = ($statistic->time / $statistic->count);
            AzureStorageTable::connection()->updateEntity(self::$statisticsTableName,$statistic);
        }           
    } 
```

我得到：

> Microsoft_WindowsAzure_Exception
> 
> 服务器未能验证请求。确保 Authorization 标头的值正确形成，包括签名。

它在 SDK 中失败：

存储/Table.php (615) Microsoft_WindowsAzure_Storage_Table-> _changeEntity

实体对象如下所示：

```
Microsoft_WindowsAzure_Storage_DynamicTableEntity(5) ▼ {
   "_dynamicProperties" protected => array(4) ▼ {
      "timestamp" => stdClass(3) ▼ {
         "Name" => "Timestamp" (9)
         "Type" => "Edm.DateTime" (12)
         "Value" => DateTime(3) { ... }
      }
      "time" => stdClass(3) ▼ {
         "Name" => "time" (4)
         "Type" => "Edm.Double" (10)
         "Value" => 95.899748802185
      }
      "count" => stdClass(3) ▼ {
         "Name" => "count" (5)
         "Type" => "Edm.Int32" (9)
         "Value" => 44
      }
      "average" => stdClass(3) ▼ {
         "Name" => "average" (7)
         "Type" => "Edm.Double" (10)
         "Value" => 2.1795397455042
      }
   }
   "_partitionKey" protected => "timers" (6)
   "_rowKey" protected => "%2F" (3)
   "_timestamp" protected => DateTime(3) ▼ {
      "date" => "2012-04-20 22:51:50" (19)
      "timezone_type" => 3
      "timezone" => "UTC" (3)
   }
   "_etag" protected => "W/"datetime'2012-04-20T22%3A51%3A50.483Z'"" (42)
} 
```

尝试删除实体时，我也遇到了同样的错误。

我试图创建表实体，而不是从存储中获取它，然后使用相同的对象进行更新，但它不起作用。

我知道根据谷歌搜索可能存在时间问题，但我在系统上的时间是正确的（我是 UTC+1）。不知何故，存储中的时间戳比实际时间晚了 2 小时，但我不知道该怎么办。

我确实有 Fiddler2，但我不知道如何设置它来捕获与[http://127.0.0.1:10002](http://127.0.0.1:10002)（本地表存储）的通信。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:06:49.050

就像您已经说过的那样，该问题可能与您的系统时钟配置不正确有关。但是**请确保 Authorization 标头的值正确形成，包括签名。**错误可能是由其他原因引起的。

目前尝试使用 Fiddler2 是您的最佳选择。您可以尝试在 web.config 中将 Fiddler2 设置为代理（我想即使您使用的是 PHP，您也有一个）：

```
<system.net>
  <defaultProxy>
    <proxy bypassonlocal="False" proxyaddress="http://127.0.0.1:8888"/>
  </defaultProxy>
</system.net> 
```

您是否使用 HTTP 或 HTTPS 端点进行表存储？如果您使用的是 HTTPS，您还需要确保 Fiddler 也解密 HTTPS 流量（通过工具 > Fiddler 选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T21:11:26.837

所以...这是 PHP Azure SDK 中的一个错误，来自： http: [//phpazure.codeplex.com/](http://phpazure.codeplex.com/)

我在这里告诉开发人员：http: [//phpazure.codeplex.com/workitem/6901](http://phpazure.codeplex.com/workitem/6901)

我也在此处添加解决方案：

问题是当我调用这个时：

```
$entity = $storage -> retrieveEntities($tableName);
$entity -> Name = "New name;"
$storage -> updateEntity($tableName,$entity); 
```

它失败给我**Microsoft_WindowsAzure_Exception** *服务器未能对请求进行身份验证。确保 Authorization 标头的值正确形成，包括签名。*

问题是 retrieveEntities 的结果是 *Microsoft_WindowsAzure_Storage_DynamicTableEntity* ，然后 updateEntity 对其调用*getAzureValues*并且 *$this->_dynamicProperties* 和*parent::getAzureValues()*返回*时间戳*，这会导致带有两个时间戳的数组，从而导致错误

我所做的热修复是添加以下代码：

```
if(isset($this->_dynamicProperties["timestamp"]))unset($this->_dynamicProperties["timestamp"]); 
```

在 *Microsoft_WindowsAzure_Storage_DynamicTableEntity* 中返回*getAzureValues之前的行*

然后它就像魔法一样工作：]

此错误出现在旧 SDK 和中继的最新 SDK 中

# c# - MDIChild 中的 OutOfMemoryException

> ID：10257765
> 
> 赞同：0
> 
> 时间：2012-04-21T09:29:03.740
> 
> 标签：c#, datagridview, mdichild

我有一个 MDIChild 表单中的 datagridview，我将通过调用以下函数在表单加载时对其进行自定义，

```
private void FillDetails()
    {
        dgvDefCofig.DataSource = dbLayer.tblDefConfigSelectAll().Tables[0];
        var columnheaderstyle = new DataGridViewCellStyle();
        columnheaderstyle.Font = new Font("Arial", 9, FontStyle.Regular);
        dgvDefCofig.ColumnHeadersDefaultCellStyle = columnheaderstyle;
        dgvDefCofig.Columns[dgvDefCofig.Columns.Count - 1].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;
        SetLineColumnDetails("ID", "", 0, DataGridViewContentAlignment.MiddleLeft, false);
        SetLineColumnDetails("DC_NoOfSmallBoxes", "No of Boxes", 50, DataGridViewContentAlignment.MiddleLeft, true);
        SetLineColumnDetails("DC_LabelPath", "Label path", 250, DataGridViewContentAlignment.MiddleLeft, true);
        SetLineColumnDetails("DC_Active", "Active", 100, DataGridViewContentAlignment.MiddleRight, true);
        SetLineColumnDetails("DC_InsertedDateTime", "Inserted Date", 100, DataGridViewContentAlignment.MiddleRight, true);
        SetLineColumnDetails("DC_ProdDate", "Producation Date", 100, DataGridViewContentAlignment.MiddleRight, true);
        SetLineColumnDetails("DC_ProdShift", "Shift", 0, DataGridViewContentAlignment.MiddleRight, false);
        SetLineColumnDetails("DC_CreatedBy", "Created By", 0, DataGridViewContentAlignment.MiddleRight, false);
        SetLineColumnDetails("DC_LastUpdateDate", "Last Updated", 0, DataGridViewContentAlignment.MiddleRight, false);
        SetLineColumnDetails("DC_LastUpdatedBy", "Lase Updated By", 100, DataGridViewContentAlignment.MiddleRight, true);
    }

    public void SetLineColumnDetails(string columnName, string headertext, int width,
                                     DataGridViewContentAlignment alignment, bool visible)
    {
        dgvDefCofig.Columns[columnName].Visible = visible;
        dgvDefCofig.Columns[columnName].HeaderText = headertext;
        dgvDefCofig.Columns[columnName].Width = width;
        dgvDefCofig.Columns[columnName].DefaultCellStyle.Alignment = alignment;
    } 
```

但是，我收到了“OutOfMemoryException”。当我删除上述方法时，应用程序工作正常。为什么会这样？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:46:27.117

发生这种*情况很可能*是

```
dgvDefCofig.DataSource = dbLayer.tblDefConfigSelectAll().Tables[0]; 
```

将如此多的数据推送到`DataGrid`这使您的应用程序爆炸式增长。

`SQL`通过更多“切片”查询限制您在屏幕上加载的数据量。

# oracle - 具有许多参数的单个数据库调用与具有少量参数的许多数据库调用

> ID：10257766
> 
> 赞同：1
> 
> 时间：2012-04-21T09:29:05.807
> 
> 标签：oracle, ado.net

我正在编写一个内容管理系统，它可以存储有关不同文档类型的元数据。每个文档类型都有自己的一组元数据字段。例如，Letter 具有“To”、“From”、“ToAddress”、“FromAddress”等字段，而 MinutesOfMeeting 具有“DateHeldOn”、“TimeHeldOn”、“AttendedBy”等字段。

我将此信息保存在数据库中的两个表中：常规和特定。通用存储信息，所有类型通用，如 DocumentOwnerName、DocumentCreatedDate、DocumentSize 等。特定表不是一个表，而是一组 35 个不同的表，每个文档类型一个。

我有一个页面，其中包含一个显示文档列表的网格。一份记录对应一份文件。由于网格用于显示所有类型的文档，因此第一行可能显示一封信，第二行可能显示会议纪要，第三行可能显示备忘录等。

我还做了一个搜索功能，用户可以根据检索到的文档列表设置标准。为了使其工作，每个特定表中的每个字段都有四个与搜索相关的参数，所有这些参数都传递给一个中央过程。然后，此过程会根据标准过滤掉记录。

问题是，处理 35 种不同的文档类型，每种类型都有 10 个字段，我最终得到了超过一千个参数。这是维护的噩梦。我正在寻找解决方案。

一种解决方案是单独处理每个特定表，取回 Id，然后将它们合并。这很好，除了我必须对数据库进行 36 次不同的调用，每个调用一个用于特定表，一个用于通用表。

这一切都归结为一个简单的架构选择：我应该进行单个数据库调用并传递许多参数，还是应该进行许多数据库调用并传递少量参数。

哪种方法更可取，为什么？

编辑：网络服务器和数据库服务器在同一台机器上。因此，网络速度应该无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:25:28.593

在设计 API 时，我需要一个过程来获取大量相关参数，甚至是参数的变量列表，我使用记录类型，例如：

```
TYPE param_type IS RECORD (
   To
   From
   ToAddress
   FromAddress
   DateHeldOn
   TimeHeldOn
   AttendedBy
);

PROCEDURE do_search (in_params IN param_type); 
```

当然，记录的结构取决于您。如果该过程被编码为忽略为 NULL 的记录元素，那么调用者需要做的就是设置那些需要的元素，例如：

```
DECLARE
   p param_type;
BEGIN
   p.DateHeldOn := DATE '2012-01-01';
   do_search(p);
END; 
```

# javascript - 使用 jQuery 选择父级

> ID：10257767
> 
> 赞同：1
> 
> 时间：2012-04-21T09:29:13.907
> 
> 标签：javascript, jquery

您好，我有一些看起来像这样的 HTML，

```
<div id="music_interests">
    <ul class="interests">
        <li >
        <div class="interest inline">
        <img src=""/>
        <div class="interest_popup">
            1 users have this interest.
        <a href="http://localhost/love/index.php/my_profile/remove_interest/34" class="button red upper rounded_5 small remove">Remove interest</a>                                     </div>
            </div>
        </li>
    </ul> 
```

当用户单击删除按钮时，我需要选择父 div（在本例中为 music_interests）。我该怎么做呢？

我尝试过以下操作，

`$(this).parent().parent().parent().parent()`但有更优雅的方式吗？

更复杂的是，我实际上不会在应用程序中没有父母 ID，因为删除按钮出现在页面上的 4 或 5 个不同区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:30:04.840

你应该使用[`closest()`](http://api.jquery.com/closest/)

```
$(this).closest('div#music_interests');
//find the nearest div with id "music_interests"
//if i omitted the id, it retrieves the div with class "interest_popup" 
```

或者[`parents()`](http://api.jquery.com/parents/)

```
$(this).parents('div:eq(1)');
//get ALL the ancestor divs (until it reaches root tag)
//since music_interests is just 2 levels up, use :eq(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:40:42.150

如果您要删除的 DIV 的 ID 是静态的，您应该只使用 ID 选择器（而不是像**$("div#music_interests")**之类的东西），因为 ID 选择器直接映射到 DOM 函数*document.getElementsById*这非常快：

```
$("#music_interests").remove(); 
```

如果 ID 不是静态的，您可以像这样获得 UL：

```
$(function(){ //execute when page has been loaded
    $(".remove").click(function(){ //attach click handler
        var removeDiv = $(this).closest("ul").parent().remove(); //get next UL -> DIV is its parent
        return false; //stop further processing of "click" event
    });       
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:09:39.970

如果删除按钮始终存在于 ul 标记中（在所有 4 或 5 个不同区域中），那么您可以使用以下代码。

```
$(this).closest("ul").parent() 
```

在这种情况下，您甚至不需要为 DIV 标签提供 id

# c# - 如何将 Icollection 保存在对象中？

> ID：10257768
> 
> 赞同：0
> 
> 时间：2012-04-21T09:29:25.047
> 
> 标签：c#, icollection

我有以下代码：

```
ICollection<Sample> samples = new Collection<Sample>();
samples.Add(sample1);
samples.Add(sample2);
Order record = scope.DbContext.Orders.AddNew(new Order
{
    Name = GenerateName("Order"),
    Samples = samples
}); 
```

当我查看样本时，它包含 sample1 和 sample2。但是，当我将它添加到 Order 的 Samples 时，Samples 是空的。Samples 也是 ICollection 类型。如何将 ICollection 添加到空的 ICollection？

* * *

## 更新：

我打印样本并记录时的结果。中间样本：

```
samples
Count = 2
    [0]: {iVention.Lifescience.Test.ElectronicSignatureRepositoryTest.SignHierarchyTest.Sample one.2012-04-21 11:07:24}
    [1]: {iVention.Lifescience.Test.ElectronicSignatureRepositoryTest.SignHierarchyTest.Sample two.2012-04-21 11:07:24}
record.Samples
{System.Data.Objects.DataClasses.EntityCollection<iVention.Database.Sample>}
    [System.Data.Objects.DataClasses.EntityCollection<iVention.Database.Sample>]: {System.Data.Objects.DataClasses.EntityCollection<iVention.Database.Sample>}
    Count: 0
    IsReadOnly: false 
```

* * *

## 更新 2：

AddNew onlu 添加实体，为什么这会从 Samples 中删除样本？

```
public static TEntity AddNew<TEntity>(this IDbSet<TEntity> self, object fromValues) where TEntity : class
{
    return self.Add(Create(self, fromValues));
} 
```

在赋予 AddNew 的对象 formValues 中，Samples 仍然包含 2 个样本。

添加看起来像这样：

```
public static TEntity Create<TEntity>(this IDbSet<TEntity> self, object fromValues) where TEntity : class
{
   TEntity returnValue = self.Create();
   var targetProperties = typeof(TEntity).GetProperties();
   {
   var targetProperty = targetProperties.Single(c => c.Name == property.Name);
   if (targetProperty.CanWrite && property.GetIndexParameters().Length == 0)
   {
      if (targetProperty.PropertyType.IsGenericType && targetProperty.PropertyType.GetGenericTypeDefinition() == typeof(System.Collections.Generic.ICollection<>))
      {
      }
      else
      {
         targetProperty.SetValue(returnValue, property.GetValue(fromValues, null), null);
      }
   }
   return returnValue;
} 
```

因此，当它是 ICollection 时，不会向 returnValue 添加任何内容。returnValue 中的样本为空。

# deployment - 如何部署 WebSocket 服务器？

> ID：10257770
> 
> 赞同：4
> 
> 时间：2012-04-21T09:29:40.763
> 
> 标签：deployment, websocket

部署在传统 Web 服务器上运行的 Web 应用程序时，通常会在代码更新后重新启动 Web 服务器。由于 HTTP 的性质，这对用户来说不是问题。在下一次请求时，他们将获得最新更新。

但是 WebSocket 服务器呢？如果我重新启动或终止旧进程，所有连接的用户都将断开连接。所以我的问题是，您使用了什么样的策略来顺利部署 WebSocket 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T12:48:36.980

没错，如果服务器重新启动，每个连接的用户都将断开连接。

我认为不太糟糕的解决方案是告诉客户端以客户端的`onClose`方法重新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:14:34.680

WebSockets 只是一种传输机制。像[socket.io 这样](http://socket.io/)的库是建立在该传输之上的——并提供心跳、浏览器回退、优雅的重新连接以及处理实时应用程序中发现的其他边缘情况。

在我们支持 WebSocket 的应用程序中，socket.io 是确保我们的持续部署设置不会破坏用户的活动套接字连接的核心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:58:04.943

如果客户端直接连接到执行所有套接字网络和应用程序逻辑的服务器，那么是的 - 由于保持连接的 TCP 层，它们将断开连接。

如果您有客户端将连接到的网关，并且该网关应用程序正在另一台服务器上运行，但将与逻辑服务器通信并将消息转发给逻辑服务器，那么逻辑服务器会将它们发送回，网关将发送回客户端响应。使用这样的基础设施，您必须在网关上实现数据包的堆叠，直到它与逻辑服务器重新建立连接。逻辑服务器可能会在重启前通知网关服务器。这样客户端就会有连接，它不会收到任何响应。

或者您可以在客户端重新连接上实现。使用 HTTP，每次您离开时，浏览器实际上都在创建与服务器的套接字连接，传输所有数据并关闭它（在大多数情况下）。然后所有网站数据都是本地的，直到您离开。

使用 WebSockets，它是连续连接，并且请求不会重新连接。这就是为什么当 WebSockets 收到关闭事件时您必须实现简单的机制，您将尝试在客户端定期重新连接。

它更多地基于您的特定需求。

# ruby-on-rails-3 - 如何在 rspec / capybara 中测试 TokenInput？

> ID：10257776
> 
> 赞同：1
> 
> 时间：2012-04-21T09:30:17.070
> 
> 标签：ruby-on-rails-3, rspec, capybara

关于如何为 jquery TokenInput 编写测试用例的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:16:26.767

我遇到了这个可能有帮助的要点： [https ://gist.github.com/1229684](https://gist.github.com/1229684)

# qt - 应用程序未在 Qt 中的设备上重新启动

> ID：10257777
> 
> 赞同：3
> 
> 时间：2012-04-21T09:30:18.360
> 
> 标签：qt, qt4, symbian

我正在Qt symbian上开发一个应用程序，我必须在我的应用程序中重新启动我的应用程序，使用过：

```
qApp->quit();
QProcess::startDetached(qApp->arguments()[0],qApp->arguments()); 
```

来自 mainWindow 中的方法。它在模拟器上运行良好但在设备上运行良好，它关闭但不会自行重新启动，我必须自己重新启动它，我还需要做些什么才能使其在设备上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T10:47:40.910

一种解决方案是创建小型控制台进程，您可以在关闭它之前从主程序启动它。然后这个控制台进程将启动你的程序并关闭。我一直在使用这种进程来跟踪我的应用程序并在它们崩溃时重新启动它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:29:50.900

一件小事但基本的事情：在 Symbian 上有一个*emulator*而不是一个*Simulator*。不同之处在于后者在组装级别*模拟*设备，而前者仅在 API 支持级别上进行。例如，iPhone 模拟器在组装级别模拟手机。相反，在 Symbian 中，底层 API 实现对于 ARM 和 WINS 架构可能并且完全不同。尤其是在您与操作系统交互（例如退出应用程序）的这种情况下。

Symbian 上的应用程序退出操作最终是通过抛出一个特殊异常（我不记得它的名字，类似于 KExitException）来实现的，该异常被告知内核关闭进程的主 Active Scheduler 循环捕获。换句话说，这意味着它是一个*同步*调用。如果你第一次打电话`quit`，那么`startProcess`后面的电话将永远不会被执行。`startProcess`尚不清楚为什么如果您先调用然后它不起作用 `quit`：这可能是一个异步调用，在您退出之前无法完成，或者您无法在两个实例中启动相同的（GUI）应用程序。无论如何检查它的返回值，`startProcess`看看它是否成功。

您的最终解决方案将是按照@Riho 的建议创建一个看门狗进程。在调用之前启动看门狗进程`quit`，在看门狗主函数中等待几秒钟并重新启动应用程序。您需要为您的看门狗提供 SwEvent 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:55:09.237

我已经用 Qpr​​ocess() 试过了，它似乎工作正常（仍在测试内存和线程问题）

在 main.cpp 我写了这段代码（我从其他链接得到的）

```
int main(int argc, char *argv[])
{
    #define RESTART_CODE 1000

    int return_from_event_loop_code;
    QPointer<QApplication> app;
    QPointer<MainWindow> main_window;
    do
    {
        if(main_window) delete main_window;
        if(app) delete app;

        app = new QApplication(argc, argv);
        main_window = new MainWindow;
        QList<QString> lang = AppStatus::getCurrentLanguage();
        QTranslator translator;
        translator.load(lang.at(0));
        app->installTranslator(&translator);
        main_window->setOrientation(MainWindow::ScreenOrientationLockPortrait);

#if defined(Q_OS_SYMBIAN)
        main_window->showMaximized();
#else
        main_window->show();
#endif

        return_from_event_loop_code = app->exec();
    }
    while(return_from_event_loop_code==RESTART_CODE);

    return return_from_event_loop_code;
} 
```

在我必须重新启动我的应用程序的方法中，我已经写了这个。

```
QProcess::startDetached(qApp->applicationFilePath(),qApp->arguments());
qApp->exit(RESTART_CODE); 
```

我的应用程序正在按照我的意愿重新启动。如果有任何更改，请告诉我。

# javascript - 我可以从画布元素中获取图像并在 img src 标签中使用它吗？

> ID：10257781
> 
> 赞同：84
> 
> 时间：2012-04-21T09:30:34.607
> 
> 标签：javascript, html, image, canvas

是否有可能将画布元素中存在的图像转换为由 表示的图像`img src`？

我需要在一些转换后裁剪图像并保存它。我在互联网上找到了一个视图函数，例如：`FileReader()`or `ToBlop()`, `toDataURL()`, `getImageData()`，但我不知道如何在 JavaScript 中正确实现和使用它们。

这是我的html：

```
<img src="http://picture.jpg" id="picture" style="display:none"/>
<tr>
    <td>
        <canvas id="transform_image"></canvas>
    </td>
</tr>
<tr>
    <td>
        <div id="image_for_crop">image from canvas</div>
    </td>
</tr> 
```

在 JavaScript 中，它应该看起来像这样：

```
$(document).ready(function() {
    img = document.getElementById('picture');
    canvas = document.getElementById('transform_image');

    if(!canvas || !canvas.getContext){
        canvas.parentNode.removeChild(canvas);
    } else {
        img.style.position = 'absolute';
    }
    transformImg(90);
    ShowImg(imgFile);
}

function transformImg(degree) {
    if (document.getElementById('transform_image')) {
        var Context = canvas.getContext('2d');
        var cx = 0, cy = 0;
        var picture = $('#picture');
        var displayedImg = {
            width: picture.width(),
            height: picture.height()
        };   
        var cw = displayedImg.width, ch = displayedImg.height
        Context.rotate(degree * Math.PI / 180);
        Context.drawImage(img, cx, cy, cw, ch);
    }
}

function showImg(imgFile) {
    if (!imgFile.type.match(/image.*/))
    return;

    var img = document.createElement("img"); // creat img object
    img.id = "pic"; //I need set some id
    img.src = imgFile; // my picture representing by src
    document.getElementById('image_for_crop').appendChild(img); //my image for crop
} 
```

如何`img src`在此脚本中将画布元素更改为图像？（此脚本中可能存在一些错误。）

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-04-21T09:38:48.347

`canvas.toDataURL()`将为您提供可用作来源的[数据 url ：](http://en.wikipedia.org/wiki/Data_Url)

```
var image = new Image();
image.id = "pic";
image.src = canvas.toDataURL();
document.getElementById('image_for_crop').appendChild(image); 
```

# 完整示例

这是一个带有一些随机行的完整示例。黑边图像是在 a 上生成的`<canvas>`，而蓝边图像是 a 中的副本，其中`<img>`填充了`<canvas>`的[数据 url](http://en.wikipedia.org/wiki/Data_Url)。

```
// This is just image generation, skip to DATAURL: below
var canvas = document.getElementById("canvas")
var ctx = canvas.getContext("2d");

// Just some example drawings
var gradient = ctx.createLinearGradient(0, 0, 200, 100);
gradient.addColorStop("0", "#ff0000");
gradient.addColorStop("0.5" ,"#00a0ff");
gradient.addColorStop("1.0", "#f0bf00");

ctx.beginPath();
ctx.moveTo(0, 0);
for (let i = 0; i < 30; ++i) {
  ctx.lineTo(Math.random() * 200, Math.random() * 100);
}
ctx.strokeStyle = gradient;
ctx.stroke();

// DATAURL: Actual image generation via data url
var target = new Image();
target.src = canvas.toDataURL();

document.getElementById('result').appendChild(target);
```

```
canvas { border: 1px solid black; }
img    { border: 1px solid blue;  }
body   { display: flex; }
div + div {margin-left: 1ex; }
```

```
<div>
  <p>Original:</p>
  <canvas id="canvas" width=200 height=100></canvas>
</div>
<div id="result">
  <p>Result via &lt;img&gt;:</p>
</div>
```

也可以看看：

*   [MDN：`canvas.toDataURL()`文档](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-30T01:11:26.020

做这个。在您关闭正文标签之前，将此添加到文档的底部。

```
<script>
    function canvasToImg() {
      var canvas = document.getElementById("yourCanvasID");
      var ctx=canvas.getContext("2d");
      //draw a red box
      ctx.fillStyle="#FF0000";
      ctx.fillRect(10,10,30,30);

      var url = canvas.toDataURL();

      var newImg = document.createElement("img"); // create img tag
      newImg.src = url;
      document.body.appendChild(newImg); // add to end of your document
    }

    canvasToImg(); //execute the function
</script> 
```

当然，在您的文档中的某个地方，您需要它会抓取的画布标签。

```
<canvas id="yourCanvasID" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T18:25:25.407

我发现你的小提琴有两个问题，其中一个问题首先出现在 Zeta 的回答中。

该方法不是`toDataUrl();`，`toDataURL();`您忘记将画布存储在变量中。

所以小提琴现在可以正常工作[http://jsfiddle.net/gfyWK/12/](http://jsfiddle.net/gfyWK/12/)

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T23:33:28.437

`canvas.toDataURL`如果原始图像 URL（相对或绝对）不属于与网页相同的域，则不起作用。在包含图像的网页中通过小书签和简单的 javascript 进行测试。看看 David Walsh 的工作[示例](http://davidwalsh.name/demo/convert-canvas-image.php)。将 html 和图像放在您自己的 Web 服务器上，将原始图像切换为相对或绝对 URL，更改为外部图像 URL。只有前两种情况有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T14:56:56.990

更正了小提琴 - 更新显示复制到画布中的图像......

并且右键可以保存为.PNG

[http://jsfiddle.net/gfyWK/67/](http://jsfiddle.net/gfyWK/67/)

```
<div style="text-align:center">
<img src="http://imgon.net/di-M7Z9.jpg" id="picture" style="display:none;" />
<br />
<div id="for_jcrop">here the image should apear</div>
<canvas id="rotate" style="border:5px double black; margin-top:5px; "></canvas>
</div> 
```

加上小提琴页面上的JS......

干杯斯

目前正在考虑将其保存到服务器上的文件 --- ASP.net C# (.aspx web form page) 任何建议都会很酷....

# p2p - P2P系统中的DHT

> ID：10257784
> 
> 赞同：0
> 
> 时间：2012-04-21T09:30:49.390
> 
> 标签：p2p, dht

在 P2P 系统中，有什么区别：

1.  向已知节点发送查询消息，然后该节点重新发送响应（我的意思是我通过发送消息来明确联系节点以询问他一些事情）。
2.  如果有一个 DHT 包含有关节点及其资源的信息（每个记录都包含一个代表每个节点的 IP @ 的密钥，以及其可用资源的列表），那么如果我可以访问这个 DHT（可能是我一个成员）并且我知道给定节点的密钥或标识符，首先我可以直接查看该节点的记录而不需要向它发送消息或查询（我的意思是我隐式联系它）？其次，如果是如何？我的意思是 DHT 如何在物理上表示，以及节点如何更新其信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:29:45.923

在情况 1\. 如果你确定远程节点有资源，那么 DHT 是没用的。

在案例 2 中，DHT 可以帮助您定位资源。是的，您可以查看有关远程节点的 DHT 记录（如果有的话）。它将指示该资源是否在该远程节点上可用。

通常，DHT 是在内存中的表，或存储在本地小型数据库中的表。有很多方法可以将信息推送到远程节点，一种常见的方法是将信息推送到随机节点。

# joomla - 如何在 Joomla 的内部页面中不显示某些职位

> ID：10257785
> 
> 赞同：0
> 
> 时间：2012-04-21T09:30:56.630
> 
> 标签：joomla, joomla1.5, joomla-template

我正在开发 Joomla！1.5 模板。我有 user1、user2 和 user3 的职位。我只想在首页而不是内部页面上显示这些位置。但我不知道如何实现它。

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:51:53.603

在 /templates/TEMPLATENAME/index.php 顶部添加以下行：

```
<?php $isHomePage = (JSite::getMenu()->getActive()->id == JSite::getMenu()->getDefault()->id); ?> 
```

然后找到包含模块位置的行并修改它们。从：

```
<jdoc:include type="modules" name="user1" /> 
```

， 到：

```
<?php if ($isHomePage) { ?>
    <jdoc:include type="modules" name="user1" />
<?php } ?> 
```

# javascript - 将具有包含图像标签的 li 元素的 div 转换为幻灯片

> ID：10257792
> 
> 赞同：1
> 
> 时间：2012-04-21T09:32:05.877
> 
> 标签：javascript, jquery, html, slideshow

我有看起来像这样的标记

```
<div class="myDiv"><ul>
<li><img src="img1.jpg"/></li>
<li><img src="img1.jpg"/></li>
.
.
.
</ul></div>
```

我需要将此 html 转换为幻灯片。我不太擅长使用 javascript 或 jquery。我只需要一个能让我传递 div 类的东西，然后列表中的所有图像都将转换为简单的幻灯片。感谢期待

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:35:53.837

嗨，请试试这个**演示** [http://jsfiddle.net/NPcDH/](http://jsfiddle.net/NPcDH/) **||** [http://jsfiddle.net/rQS6h/](http://jsfiddle.net/rQS6h/)也许**&**进一步从下面的评论你的个人页面演示在这里 - [http://jsfiddle.net/2wnws/2/show/](http://jsfiddle.net/2wnws/2/show/)

它是一个使用 li rest 的简单幻灯片，您可以在 jsfiddle 中看到它是如何工作的。如果我错过了什么，请告诉我。

**html**

```
<div id="slideshow"> 

    <ul>

        <li class="slideshow_item">

            <a href="#"><img src="http://www.google.com/logos/2011/persiannewyear11-hp.jpg" alt="persiannewyear11-hp" /></a> 

        </li>

        <li class="slideshow_item">

            <a href="#"><img src="http://www.google.com/logos/2011/holi11-hp.jpg" alt="holi11-hp" /></a> 

        </li>

        <li class="slideshow_item">

            <a href="#"><img src="http://www.google.com/logos/2011/sayeddarwish11-hp.jpg" alt="sayeddarwish11-hp" /></a> 

        </li>

        <li class="slideshow_item">

            <a href="#"><img src="http://www.google.com/logos/2011/okamoto11-hp.jpg" alt="okamoto11-hp" /></a> 

        </li>

        <li class="slideshow_item">

            <a href="#"><img src="http://www.google.com/logos/2011/eisner11-hp.jpg" alt="eisner11-hp" /></a> 

        </li>

        <li class="slideshow_item">

            <a href="#"><img src="http://www.google.com/logos/2011/jfkinaugural11-hp.jpg" alt="jfkinaugural11-hp" /></a> 

        </li>

    </ul> 

</div> ​ 
```

**jQuery**

```
/* home slide show */

var slide_pos = 0;
var slide_len = 0;

$(document).ready(function() {

    slide_len = $(".slideshow_item").size() - 1;

    $(".slideshow_item:gt(0)").hide();

    slide_int = setInterval(function() {

        slide_cur = $(".slideshow_item:eq(" + slide_pos + ")");
        slide_cur.fadeOut(2000);

        slide_pos = (slide_pos == slide_len ? 0 : (slide_pos + 1));

        slide_cur = $(".slideshow_item:eq(" + slide_pos + ")");
        slide_cur.fadeIn(2000);

    }, 5000);

});​ 
```

**css**

```
#slideshow{

    position:relative;
    top:0;
    left:0;

} #slideshow ul, #slideshow li{

    margin:0;
    padding:0;
    list-style-type:none;

} .slideshow_item{

    position:absolute;
    left:0;
    top:0;
    list-style-type:none;

} .slideshow_item img{

    margin:0;
    padding:0;
    vertical-align:bottom;

} ​ 
```

# javascript - HTML中脚本元素的字符集属性的目的是什么？

> ID：10257795
> 
> 赞同：11
> 
> 时间：2012-04-21T09:33:05.257
> 
> 标签：javascript, html, character-encoding

在 HTML 中，脚本元素具有可选的 charset 属性。

它的目的是什么？

什么时候有用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T09:35:43.210

如果您的 javascript 文件使用与页面使用的编码不同的编码进行编码，您可以使用该`charset`属性告诉浏览器如何解释它。

例如，如果页面使用的是`Latin1`，但 JS 文件是使用`UTF-8`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T16:19:56.163

该`charset`参数的目的是在 HTTP 协议级别未指定编码的情况下指定外部脚本的编码。它*并不是*要覆盖 HTTP 标头中的编码信息，它也不会这样做。

当作者无法控制 HTTP 标头并且标头未指定字符编码时，这很有用。它对于离线文件也很有用，例如在直接访问的网页的本地副本中，而不是通过 HTTP 服务器，因此不存在 HTTP 标头。

在实践中，它不是很有用。如果需要在 JavaScript 文件中使用非 Ascii 字符，可以使用 UTF-8 编码。如果您使用带有前导 BOM 的 UTF-8，则 BOM 充当一个有用的指示器，让浏览器推断编码。但额外使用也无妨`charset=utf-8`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T10:11:00.900

每个 JavaScript 文件都是页面中的一个单独元素，毕竟您甚至可以从某个远程作者的服务器加载 JS，否则它们与您的页面完全没有关系。与任何其他外部元素一样，如果远程服务器由于某种原因或只是为了确定返回错误的字符集，您可以手动指定“字符集”。

此外，如果您自己对此 JS 文件具有写入权限，您可能希望将所有非 ASCII 替换为 Unicode 位置转义 - 这将保证符号将始终被正确解释，无论标头中指定什么编码。一些 JS 压缩器，例如 Google Closure Compiler，可以自动为您完成。

# html - 如何在本地主机中显示 Coldfusion 中已编辑文件的更改？

> ID：10257802
> 
> 赞同：0
> 
> 时间：2012-04-21T09:33:55.023
> 
> 标签：html, coldfusion, coldfusion-8

新手问题...

我已经在我的本地主机上使用 Coldfusion/MySQL/Apached Webserver 设置了一个应用程序。

我可以打开并浏览应用程序。但是当我编辑任何 .cfm 文件并刷新浏览器窗口时，什么也没有发生。

因为这是我在 Coldfusion 的第一天……我想我错过了一些东西。

任何人都可以给我一个提示:-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:42:04.587

可能是显而易见的，但如果您还没有，请尝试清除浏览器上的缓存。如果这不起作用，请尝试登录 ColdFusion 管理员，然后在服务器设置下单击“立即清除模板缓存”按钮。如果这仍然不能解决您的问题，您可以重新启动 ColdFusion。我猜你是否清除了浏览器缓存，但这会奏效；）

# javascript - JavaScript：在同一窗口中打开新页面的方法

> ID：10257804
> 
> 赞同：0
> 
> 时间：2012-04-21T09:34:04.213
> 
> 标签：javascript, html, url, dom, location-href

```
location.href
location.replace
document.URL 
```

从其他类似的问题可以看出，我们可以整合所有这些可能的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:42:30.110

```
var customURL = 'http://www.example.com';
window.location.href = customURL;
window.location.assign(customURL);

// Current page won't get saved in the history:
window.location.replace(customURL); 

// Gecko only:
window.document.location = customURL 
```

也可以看看：

*   [医疗器械网络：`window.location`](https://developer.mozilla.org/en/DOM/window.location)
*   [医疗器械网络：`window.document.location`](https://developer.mozilla.org/en/DOM/document.location)
*   [WhatWG：HTML5：6.5.3 位置界面](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#dom-location)

# android - 使用蓝牙聊天示例在其他设备的当前活动中显示警报

> ID：10257805
> 
> 赞同：-1
> 
> 时间：2012-04-21T09:34:09.837
> 
> 标签：android

我正在 Android 开发者网站上的蓝牙聊天应用程序的帮助下开发一个蓝牙聊天应用程序。

当我将蓝牙聊天请求发送到另一台设备（假设我们之前已配对）并且请求接收设备驻留在任何活动中时，我对现有代码进行了一些修改。

我想在当前显示屏幕上显示警报，但我只在特定活动中收到警报。所以我被卡住了。我的发送方和接收方代码如下：

```
if (FaceCardList.requestConnection &&
    FaceCardList.deviceSelected) {

    String authorization = "messagetype:startChat,"
                            + FaceCardList.ScreenName;
    FaceCardList.this.sendMessage(authorization);
} 
```

在接收方：

```
if (readMessage.indexOf("messagetype:startChat") != -1) {

    AlertDialog.Builder builder =
        new AlertDialog.Builder(FaceCardList.this);
    builder.setMessage(
        FaceCardList.screennmname + " wants to chat with you")
        .setCancelable(false)
        .setPositiveButton("Yes",
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface arg0, int arg1) {
                    Intent serverIntent = new Intent(
                            FaceCardList.this,
                            BluetoothChat.class);
                    startActivity(serverIntent);

                    String authorization = "messagetype:initiatechat";
                    FaceCardList.this
                            .sendMessage(authorization);
                }
            })
        .setNegativeButton("No",
            new DialogInterface.OnClickListener() {

                public void onClick(
                        DialogInterface diaLog,
                        int which) {
                    // TODO Auto-generated method stub

                    String authorization = "messagetype:stopservice";
                    FaceCardList.this
                            .sendMessage(authorization);

                    FaceCardList.mChatService.stop();
                    FaceCardList.mChatService.start();
                }
            });
    alert = builder.create();
    alert.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:03:07.920

如果您有一个正在接收请求的中央通信活动，您可以只使用处理程序轻松地与任何其他活动进行通信。

参考这里：http://developer.android.com/reference/android/os/Handler.html

有很多教程和例子。

使用处理程序非常简单且灵活 - 它不会阻止您的活动，但允许任何类型的通信，甚至传递参数

您可以使用静态方法创建一个中央通信器类，并通过该中央点发送所有请求，以根据这一点内定义的逻辑分派到您喜欢的任何活动。

这是一个带有参数的方法的示例：

```
 static public void sendMessageToDialogDuringChat(
        int msgID, String msgText, boolean statusBool) {
    if (theHandlerForScreenUpdate == null)  // you need to create the receiving handler within this class beforehand
        return;
    Message msgForDialogDuringChat= theHandlerForScreenUpdate
        .obtainMessage(msgID);
    Bundle bundle = new Bundle();
    bundle.putBoolean(msgText, statusBool);
    msgForDialogDuringChat.setData(bundle);
    theHandlerForScreenUpdate
        .sendMessage(msgForDialogDuringChat);

    } 
```

这里是一个接收消息的处理程序。确保在中央调度程序中存储了应该接收消息的适当处理程序。

```
 public final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if (DEBUG)
        Log.i(this.getClass().getSimpleName(),
            "-> "
                + Thread.currentThread().getStackTrace()[2]
                    .getMethodName() + " msg.what="
                + msg.what);
        switch (msg.what) {
        case MESSAGE_CONNECTION_SUCCESSFULL_FLAG: {
        boolean connectionOK = msg.getData().getBoolean(
            CONNECTION_SUCCESS);

        if (connectionOK)
            theStatusTV
                .setText(getString(R.string.connection_OK));
        else {
            theStatusTV
                .setText(getString(R.string.connection_NOT_OK));

        }
        }
        break;

        case MESSAGE_ALERT_FLAG: {
        ...start your alert here... 
```

当然，您也可以在接收类中完成所有这些 - 取决于您需要如何构建“特殊”通信消息

# javascript - Javascript检查浏览器

> ID：10257810
> 
> 赞同：16
> 
> 时间：2012-04-21T09:34:56.820
> 
> 标签：javascript, browser, cross-browser

有没有人有检查旧浏览器的脚本。它必须遵循以下标准：

1.  允许 Firefox 3.6 或更高版本

2.  允许 Google Chrome 15 及更高版本

3.  允许 Safari 5 或更高版本

4.  阻止 IE 和 Opera

5.  阻止所有其他浏览器

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-21T10:02:00.783

您可以`navigator`为此使用对象，并且可以使用`userAgent`类似的属性

```
 if (navigator.userAgent.indexOf('Firefox') != -1 && parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf('Firefox') + 8)) >= 3.6){//Firefox
 //Allow
 }else if (navigator.userAgent.indexOf('Chrome') != -1 && parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf('Chrome') + 7).split(' ')[0]) >= 15){//Chrome
 //Allow
 }else if(navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Version') != -1 && parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf('Version') + 8).split(' ')[0]) >= 5){//Safari
 //Allow
 }else{
 // Block
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T09:42:31.977

我同意@Sirko。最好，您*应该*改用特征检测。[Modernizr](http://modernizr.com/)的替代方案是 jQuery 的[`$.support()`](http://api.jquery.com/jQuery.support/)函数。这并不*完全相同*，但它可能适合您的需求。

[`$.browser()`](http://api.jquery.com/jQuery.browser/)如果您坚持浏览器检测，您可以使用 jQuery 的功能编写自己的脚本。

# android - 在 Android 中滚动之前，如何在侧基适配器的 getview 方法中获取所有项目名称

> ID：10257812
> 
> 赞同：-1
> 
> 时间：2012-04-21T09:35:31.607
> 
> 标签：android, android-listview

在我的应用程序中，我从[MySQL](http://en.wikipedia.org/wiki/MySQL)服务器数据库中获取所有图像和名称到 Android 手机。如果模拟器屏幕是[HVGA](http://en.wikipedia.org/wiki/Graphics_display_resolution#HVGA_.28480.C3.97320.29)，则只显示五个图像和名称。在[logcat](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)中也只有五个名字被打印出来。当我滚动屏幕时，我可以在屏幕上看到多少个名字，只有打印出多少个名字。取而代之的是，所有名称都必须在滚动之前打印出来。

这是我的 Java 代码：

```
public class VegdishesListview extends BaseAdapter {
    String qrimage;
    Bitmap bmp, resizedbitmap;
    Bitmap[] bmps;
    Activity activity = null;
    private LayoutInflater inflater;

    private ImageView[] mImages;
    String[] itemimage;
    TextView[] tv;
    String itemname,price,desc;
    String[] itemnames;
    String[] prices;
    String[] descs;
    HashMap<String, String> map = new HashMap<String, String>();

    public VegdishesListview(Context context, JSONArray imageArrayJson) {
        //inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //  imageLoader=new ImageLoader(activity);
        inflater=LayoutInflater.from(context);
        this.mImages = new ImageView[imageArrayJson.length()];
        this.bmps = new Bitmap[imageArrayJson.length()];
        this.itemnames = new String[imageArrayJson.length()];
        this.prices=new String[imageArrayJson.length()];
        this.descs=new String[imageArrayJson.length()];
        try {
            for (int i = 0; i < imageArrayJson.length(); i++) {
                JSONObject image = imageArrayJson.getJSONObject(i);
                qrimage = image.getString("itemimage");
                itemname = image.getString("itemname");
                price=image.getString("price");
                desc=image.getString("itemdesc");

                itemnames[i] = itemname;
                prices[i]=price;
                descs[i]=desc;

                byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

                bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                                                    qrimageBytes.length);
                int width = 100;
                int height = 100;
                resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                                                          true);
                bmps[i] = bmp;

                mImages[i] = new ImageView(context);
                mImages[i].setImageBitmap(resizedbitmap);

                mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

                // tv[i].setText(itemname);
            }
            System.out.println(map);
        }
        catch (Exception e) {
            // TODO: handle exception
        }
    }

    public int getCount() {
        return mImages.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        vi = inflater.inflate(R.layout.vegdisheslistview, null);

        TextView text=(TextView)vi.findViewById(R.id.vegdishestext);
        ImageView image=(ImageView)vi.findViewById(R.id.vegdishesimage);
        TextView text1=(TextView)vi.findViewById(R.id.vegdishesprice);
        TextView text2=(TextView)vi.findViewById(R.id.vegdishesdesc);
        image.setImageBitmap(bmps[position]);
        text.setText(itemnames[position]);
        text1.setText(prices[position]);
        text2.setText(descs[position]);
        System.out.println(itemnames[position]);

        return vi;
    } 
```

当我滚动时意味着有多少项目名称可以查看我可以在这里打印的多少项目。如何打印所有项目名称而不是滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:24:39.967

由于您实际上将名称存储为适配器类的成员字段，因此您可以在构造函数中打印它们，只需遍历数组即可。

# c# - 将一行python代码列表理解/交叉产品（创建一个扑克牌组作为两个字符串的列表：rank，suite）到C#

> ID：10257814
> 
> 赞同：1
> 
> 时间：2012-04-21T09:35:53.060
> 
> 标签：c#

您将如何转换此代码

```
poker_deck = [r+s for r in '23456789TJQKA' for s in 'SHDC'] 
```

到 C#？

我提出了这个：

```
char[] figures = "23456789TJQKA".ToCharArray();
char[] suites = "SHDC".ToCharArray();
List<string> deck = new List<string>();

foreach (var figure in figures)
{
    foreach (var suite in suites)
    {
        deck.Add(string.Format("{0}{1}", figure, suite));
    }
} 
```

你怎么看？我想在一个简单易读的行中做同样的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:15:40.633

我认为 fluent LINQ 将是一个非常易读的解决方案以及最类似于您的原始 Python 代码的解决方案：

```
var cards = from r in "23456789TJQKA"
            from s in "SHDC"
            select "" + r + s; 
```

当然也可以写成一行：

```
var cards = from r in "23456789TJQKA" from s in "SHDC" select "" + r + s; 
```

因为我也编写 Python 代码，这让我很高兴，因为它几乎是您理解的文字翻译 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T09:44:25.200

是的，这就是这样做的方法。如果您愿意，可以使用 LINQ 使其成为单线：

```
var deck = "23456789TJQKA".SelectMany(
               figure => "SHDC".Select(
                   suite => string.Format("{0}{1}", figure, suite))).ToList(); 
```

它做同样的事情，除了在这里你不必把套牌列在清单上。您可以根据需要将 ToList 更改为 ToArray，或将其保留为字符串的 IEnumerable。

这是作为扩展方法！

```
public static IEnumerable<TOut> Pair<T1, T2, TOut>(this IEnumerable<T1> items1, IEnumerable<T2> items2, Func<T1, T2, TOut> pairer)
{
    return items1.SelectMany(item1 => items2.Select(item2 => pairer(item1, item2)));
} 
```

用法：

```
var deck = "23456789TJQKA".Pair("SHDC", (figure, suite) => string.Format("{0}{1}", figure, suite)); 
```

# javascript - Jquery 无冲突内联

> ID：10257821
> 
> 赞同：1
> 
> 时间：2012-04-21T09:36:55.663
> 
> 标签：javascript, frameworks, onclick, jquery

有没有办法在内联级别添加 Jquery No Conflict？以这样的事情为例：

`<a href="javascriot:void(0)" onclick="$('body').html('<h1>Hello World!</h1>');"> Click Me! </a>`

我一直遇到与我安装的其他框架的冲突问题，这很简单，我真的不想为其添加 onclick 事件。那么如何将 jquery 无冲突子句添加到内联 onclick 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:39:11.717

使用`jQuery()`代替`$()`

```
<a href="javascriot:void(0)" onclick="jQuery('body').html('<h1>Hello World!</h1>');"> Click Me! </a> 
```

这样你就可以避免任何价值的冲突`$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:39:59.833

试试这个：

```
<a href="javascript:void(0)" onclick="jQuery('body').html('<h1>Hello World!</h1>');"> Click Me!</a> 
```

不过，您确实应该通过 jQuery 设置事件处理程序。如今，使用该`onclick`属性被认为是不好的做法。

此外，如果你想使用`jQuery.noConflict();`，你应该在页面加载时设置它。

# iphone - 如何告诉着色器的顶点属性？

> ID：10257825
> 
> 赞同：0
> 
> 时间：2012-04-21T09:37:45.040
> 
> 标签：iphone, opengl-es, shader, vertex

我想在着色器程序运行时之间切换，使用固定的 VBO 数组。

我认为我只需要以下具有固定顶点属性索引的函数（我想要 0 表示位置，1 表示纹理坐标）

```
glEnableVertexAttribArray
glVertexAttribPointer
glGetAttribLocation
glBindAttribLocation 
```

我已经把所有东西都连接起来了，但没有任何东西吸引到 FBO。如果我使用从程序中找到的顶点属性索引（在 glVertexAttribPointer 中），那么它可以正常工作，但我不能将它与固定属性索引一起使用。

**有人可以给我看一个简短的示例代码，向我展示上述函数的正确使用/执行顺序吗？**

有没有遗漏的步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:00:01.097

重点是：glBindAttribLocation 必须在链接程序之前调用。

```
glBindAttribLocation(program, ATTRIBUTE_POSITION, "position");
glBindAttribLocation(program, ATTRIBUTE_TEXTURE_COORDINATES, "textureCoordinates");      
glLinkProgram(program); 
```

然后您可以使用具有固定索引的属性数组函数，例如：

```
glEnableVertexAttribArray(ATTRIBUTE_POSITION);
glEnableVertexAttribArray(ATTRIBUTE_TEXTURE_COORDINATES);    
glVertexAttribPointer(ATTRIBUTE_POSITION, 2, GL_FLOAT, GL_FALSE, _positionStride, (void*)0);    
glVertexAttribPointer(ATTRIBUTE_TEXTURE_COORDINATES, 2, GL_FLOAT, GL_FALSE, _positionStride, (void*)_textureCoordinatesOffset); 
```

其中索引只是简单的整数，如：

```
//Vertex attributes.
enum 
{
    ATTRIBUTE_POSITION,            //0
    ATTRIBUTE_TEXTURE_COORDINATES  //1
}; 
```

现在可以了。所以我不必在每次绘制调用之前调用 glVertexAttribPointer 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:54:23.363

正如文档所说（http://www.opengl.org/sdk/docs/man/xhtml/glBindAttribLocation.xml）：

> 程序对象的属性变量名称到通用属性索引绑定可以随时通过调用 glBindAttribLocation 显式分配。在调用 glLinkProgram 之前，属性绑定不会生效。成功链接程序对象后，通用属性的索引值保持固定（并且可以查询它们的值），直到下一个链接命令发生。
> 
> 不允许应用程序使用此命令绑定任何标准 OpenGL 顶点属性，因为它们会在需要时自动绑定。在程序对象被链接之后发生的任何属性绑定直到下次程序对象**被链接时才会生效。**

# c# - 在 C# 中将 RTF 文件转换为 PDF

> ID：10257827
> 
> 赞同：2
> 
> 时间：2012-04-21T09:38:18.920
> 
> 标签：c#

我需要提供将 RTF/WORD 文件转换为 PDF 并将其作为电子邮件附件发送的功能，为此我尝试了如下所示的代码：

```
 // Create a new Microsoft Word application object
    Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();

    // C# doesn't have optional arguments so we'll need a dummy value
    object oMissing = System.Reflection.Missing.Value;

    Document doc;
    protected void Page_Load(object sender, EventArgs e)
    {
        ConvertToPDF("test.doc");
    }

    void ConvertToPDF(string sFileName)
    {
        // Create a new Microsoft Word application object
        Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.Application();

        // C# doesn't have optional arguments so we'll need a dummy value
        object oMissing = System.Reflection.Missing.Value;

        Document doc;
        try
        {
            word.Visible = false;
            word.ScreenUpdating = false;

            DirectoryInfo dirInfo = new DirectoryInfo(Server.MapPath(".") + "\\TempDoc");
            FileInfo[] wordFile = dirInfo.GetFiles(sFileName);

            if (wordFile.Length > 0)
            {
                Object filename = (Object)wordFile[0].FullName;

                // Use the dummy value as a placeholder for optional arguments
                doc = word.Documents.Open2000(ref filename, ref oMissing,
                    ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                    ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);
                doc.Activate();

                object outputFileName = wordFile[0].FullName.Replace(".doc", "");
                object fileFormat = WdSaveFormat.wdFormatPDF;

                // Save document into PDF Formats
                doc.SaveAs2000(ref outputFileName, ref fileFormat, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);
            }
        }
        catch (Exception ex)
        {
            Response.Write(ex);
        }
        finally
        {
            // Close the Word document, but leave the Word application open.
            // doc has to be cast to type _Document so that it will find the
            // correct Close method.
            doc = null;

            // word has to be cast to type _Application so that it will find
            // the correct Quit method.
            word = null;
        }

    } 
```

但它在 doc.SaveAs2000(ref outputFileName, ref fileFormat, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing) 上给出错误；陈述。

这可能是我们拥有 Microsoft Office 2007 的原因，在此，没有任何选项可以保存为 PDF 文件。在 Microsoft Office 2010 中，它具有该选项，因此当 Microsoft Office 2010 安装在服务器上时，此代码可能会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:00:48.510

是的，它在 2010 年确实有效。我最近使用过它，但我相信 2007 年有一个补丁也添加了另存为 PDF 功能

也许试试这个[http://msdn.microsoft.com/en-us/library/bb412305(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb412305(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-19T10:43:11.937

```
 Microsoft.Office.Interop.Word.Application appWord = new Microsoft.Office.Interop.Word.Application();

        appWord.Visible = false;

        //object oMissing = Type.Missing;
        object oMissing = System.Reflection.Missing.Value;
        // Declare variables for the Document.ExportAsFixedFormat method parameters.
        bool paramOpenAfterExport = false;
        Office.WdExportOptimizeFor paramExportOptimizeFor =
        Office.WdExportOptimizeFor.wdExportOptimizeForOnScreen;
        Office.WdExportRange paramExportRange = Office.WdExportRange.wdExportAllDocument;
        int paramStartPage = 0;
        int paramEndPage = 0;
        Office.WdExportItem paramExportItem = Office.WdExportItem.wdExportDocumentWithMarkup; //This is 
        //the key to keep track changes markup;
        bool paramIncludeDocProps = true;
        bool paramKeepIRM = true;
        Office.WdExportCreateBookmarks paramCreateBookmarks =
                    Office.WdExportCreateBookmarks.wdExportCreateWordBookmarks;
        bool paramDocStructureTags = true;
        bool paramBitmapMissingFonts = true;
        bool paramUseISO19005_1 = false;

        Microsoft.Office.Interop.Word.Document wordDocument = appWord.Documents.Open(fileToProcess);

        wordDocument.ExportAsFixedFormat(tempPDFFilePath, Office.WdExportFormat.wdExportFormatPDF, paramOpenAfterExport, paramExportOptimizeFor, paramExportRange, paramStartPage, paramEndPage, paramExportItem,
        paramIncludeDocProps, paramKeepIRM, paramCreateBookmarks, paramDocStructureTags, paramBitmapMissingFonts, paramUseISO19005_1, ref oMissing);

        ((Office._Document)wordDocument).Close(false, Type.Missing, Type.Missing);
        ((Office._Application)appWord).Quit(false); 
```

首先需要从 nugget 包中添加 Microsoft.Office.Interop.dll。将 .rft 原始文件添加为 fileToProcess 并在 tempFilePath 添加您需要保存转换后的 pdf 文件的位置路径。

# c# - 如何使用 C# 中的代码进行颜色提取？

> ID：10257831
> 
> 赞同：1
> 
> 时间：2012-04-21T09:38:49.047
> 
> 标签：c#, object, extract, crop

我需要帮助从图像中提取指定颜色（例如红色），然后裁剪包含该颜色的对象。

这部分在我的研究生项目中非常重要，它在投影仪屏幕上跟踪激光手势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:46:45.920

我真的不确定我是否正确理解了您，但这是一个仅使图像的红色部分可见的代码。

与 200 相比，您可以通过将 > 更改为 < 将其更改为仅红色部分不可见。您还可以使用数字 200 来查看哪个阈值适合您的 is-red 检查。

```
private static unsafe void OnlyRed(Bitmap bitmap, Color replacement)
{
    var redOffset = 0;
    var bpp = 32;
    var bytesRep = new List<byte> {replacement.R, replacement.G, replacement.B};

    switch (bitmap.PixelFormat)
    {
        case PixelFormat.Format24bppRgb:
            bpp = 24;
            break;
        case PixelFormat.Format32bppArgb:
            redOffset = 8;
            bytesRep.Insert(0, replacement.A);
            break;
        case PixelFormat.Format32bppRgb:
        case PixelFormat.Canonical:
            bytesRep.Add(replacement.A);
            break;
        default:
            throw new NotSupportedException("Pixel format unsupported.");
    }

    var data = bitmap.LockBits(new Rectangle(0, 0, bitmap.Width, bitmap.Height),
                               ImageLockMode.ReadWrite,
                               bitmap.PixelFormat);

    var start = (byte*)data.Scan0;
    var end = start + data.Height * data.Stride;

    for (var curr = start; curr < end; curr += bpp / 8)
    {
        if (curr[redOffset] > 200)
        {
            continue;
        }

        for (var i = 0; i < bytesRep.Count; i++)
        {
            curr[i] = bytesRep[i];
        }
    }

    bitmap.UnlockBits(data);
} 
```

用法：

```
var bitmap = new Bitmap("file location...");
OnlyRed(bitmap, Color.Transparent); 
```

# c# - 如何从控制器触发弹出确认

> ID：10257832
> 
> 赞同：0
> 
> 时间：2012-04-21T09:38:56.277
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3

我有一个 MVC 3 网站，当用户尝试添加同一日期的记录时，我需要设置一个带有确认的警告。用户单击视图上的按钮：

```
<input type="button" onclick="document.location.href = '@Url.Action("StartClock", "Time")'" value="Start Clock" /> 
```

这是来自控制器的代码。按钮 tat 在 StartWork 视图中触发此操作。

```
public ActionResult StartWork()
{
    return View();
}

public ActionResult StartClock()
{
    if (helper.IsDuplicate(1, DateTime.Now))
    {
        //here I want to trigger a confirmation popup or some warning
    }
    helper.Start(1, DateTime.Now);
    return RedirectToAction("Index");
} 
```

当它是重复的时，我想触发某种带有警告和选项的弹出窗口，以继续或取消。

我尝试过渲染`PartialView`，但它只是渲染了新视图。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:02:58.527

尝试使用设置的标志`ViewData`来指示确认框是否应显示在您的视图中：

```
if (helper.IsDuplicate(1, DateTime.Now))
{
    ViewData["RequireConfirmation"] = true;
} 
```

那么在你看来：

```
@if ((bool)ViewData["RequireConfirmation"]) {
    var answer = confirm ("Are you sure you want to add this record?")
    if (answer) {
        //Confirmed
    }
} 
```

# javascript - Sencha-touch 2 - 选项卡面板内的表单

> ID：10257839
> 
> 赞同：0
> 
> 时间：2012-04-21T09:40:44.167
> 
> 标签：javascript, forms, sencha-touch, extjs, sencha-touch-2

我是新手 Sencha 用户。我会编写一个选项卡面板并在每个表格中放入一个表格。我尝试定义 mainForm var 并放入 2-tab，但如果我单击 2-tab 按钮，我返回了一个空白面板......

我做错了什么？谢谢你。

```
 //<debug>
Ext.Loader.setPath({
    'Ext': '../../src'
});
//</debug>

/**
 * This is a simple example that demonstrates the Ext.TabPanel component.
 *
 * It will simply create a Ext.tab.Panel component with three children and add it to the viewport.
 */
Ext.application({
    glossOnIcon: false,
    icon: {
        57: 'resources/icons/icon.png',
        72: 'resources/icons/icon@72.png',
        114: 'resources/icons/icon@2x.png',
        144: 'resources/icons/icon@114.png'
    },

    phoneStartupScreen: 'resources/loading/Homescreen.jpg',
    tabletStartupScreen: 'resources/loading/Homescreen~ipad.jpg',

    //next we require any components we are using in our application.
    requires: [
        'Ext.tab.Panel',
        'Ext.form.*',
        'Ext.field.*',
        'Ext.Button',

        'Ext.data.Store'
    ],

    /**
     * The launch function is called when the browser and the framework is ready
     * for the application to launch.
     *
     * All we are going to do is create a simple tabpanel with 3 items, and add
     * it to the global Ext.Viewport instance.
     */
    launch: function() {
        //we send a config block into the Ext.Viewport.add method which will
        //create our tabpanel
        var mainForm = Ext.create('Ext.form.Panel', {
            fullscreen: true,
            items: [
                {
                    xtype: 'textfield',
                    name : 'name',
                    label: 'Name'
                },
                {
                    xtype: 'emailfield',
                    name : 'email',
                    label: 'Email'
                },
                {
                    xtype: 'passwordfield',
                    name : 'password',
                    label: 'Password'
                }
            ]
        });

        Ext.Viewport.add({
            //first we define the xtype, which is tabpanel for the Tab Panel component
            xtype: 'tabpanel',

            //next we define the items that will appear inside our tab panel
            items: [
                {
                    //each item in a tabpanel requires the title configuration. this is displayed
                    //on the tab for this item
                    title: '1-tab',

                    //next we give it some simple html
                    items: {
                        html: '1',
                        centered: true
                    },

                    //then a custom cls so we can style it
                    cls: 'card1'
                },
                {
                    //title
                    title: '2-tab',

                    //the items html
                    items: [mainForm],

                    //custom cls
                    cls: 'card2'
                },
                {
                    //title
                    title: '3-tabs',

                    //the items html
                    items: {
                        html: '3',
                        centered: true
                    },

                    //custom cls
                    cls: 'card3'
                }
            ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:35:26.457

你做错了。

您将其嵌套`mainForm`在`items[]`数组中。它不应该是这样的。

相反，分别创建每个项目并添加到 TabPanel 的项目数组中。

演示： -

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'SenchaFiddle',

    launch: function() {
         var mainForm = Ext.create('Ext.form.Panel', {
            fullscreen: true,
            title:'2-tab',
            items: [
                {
                    xtype: 'textfield',
                    name : 'name',
                    label: 'Name'
                },
                {
                    xtype: 'emailfield',
                    name : 'email',
                    label: 'Email'
                },
                {
                    xtype: 'passwordfield',
                    name : 'password',
                    label: 'Password'
                }
            ]
        });

        var htmlForm1 = Ext.create('Ext.form.Panel',{
              title: '1-tab',

              //next we give it some simple html
              items: {
                 html: '1',
                 centered: true
              },

              //then a custom cls so we can style it
              cls: 'card1'
         });

         var htmlForm3 = Ext.create('Ext.form.Panel',{
             title: '3-tab',

              //next we give it some simple html
             items: {
                html: '3',
                centered: true
             },

             //then a custom cls so we can style it
             cls: 'card3'
         });

        Ext.Viewport.add({
            //first we define the xtype, which is tabpanel for the Tab Panel component
            xtype: 'tabpanel',

            //next we define the items that will appear inside our tab panel
            items: [htmlForm1,mainForm,htmlForm3]
        });
    }
}); 
```

* * *

输出 ： ![在此处输入图像描述](../Images/ac46d2caacac936a80e9b8182e8ef5b0.png)

# html - 浮动容器内的图像：底部的奇数空格

> ID：10257841
> 
> 赞同：1
> 
> 时间：2012-04-21T09:41:07.080
> 
> 标签：html, css, css-float

> **可能重复：**
> [html、css - 图片下方奇怪的不可见边距](https://stackoverflow.com/questions/1383048/html-css-weird-invisible-margin-below-pictures)

我在浮动的 div 容器中有一个图像：

```
<div><img src="..." /></div> 
```

然而，容器总是比它里面的图像高几个像素，正如你[**在这个 fiddle 中看到的那样，这**](http://jsfiddle.net/ThiefMaster/mRrab/)相当难看。当然，粉红色区域有点夸张，但它清楚地表明了问题。

有没有办法避免这种情况？即，如果容器中只有图像，则图像下方不应有任何空白。填充和边距已经为零，所以这不是问题的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:46:41.547

查看[MDN 上的](http://developer.mozilla.org/en/Images,_Tables,_and_Mysterious_Gaps)[*图像、表格和神秘差距*](http://developer.mozilla.org/en/Images,_Tables,_and_Mysterious_Gaps)。图像是内联的并且位于基线上。下面的空间是为文本中的下降者保留的。

将图像设置为`display: block`将解决您的问题，尽管上述文章是一本不错的读物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:19:40.293

这对我有用。

```
img { vertical-align: top; } 
```

# javascript - 使用Jquery同时向不同方向移动多个图像

> ID：10257842
> 
> 赞同：0
> 
> 时间：2012-04-21T09:41:36.500
> 
> 标签：javascript, jquery

我对 jquery、javascript 和编码很陌生。然而，我为自己设定了制作模拟城市风格的 javascript 游戏的任务。我有很多问题，但第一个是 gif 在游戏“棋盘”上的移动图像是一个手推车男人的自上而下的视图，通过使用 jquery 在棋盘上移动这个图像来改变css top 和 left 值我希望模仿运动。

这些“工人”的目标是例如将锯木厂的资源带到仓库，然后再返回装载。

我有一个名为 Animate_Int() 的函数，它使用控制图像移动的 setinterval 每 50 毫秒运行一次。使用 For 循环，我将图像向北、南、东或西移动 60 个像素（每次通过循环 1 个像素），然后调用我编写的简单路径查找函数来确定下一个方向。

当页面上任何时候只有一个“工人”的图像时，这非常有效。当建造第二个锯木厂时，就会出现复杂情况。第一个锯木厂的工人将完美地继续往返于仓库，但第二个工人将毫无错误地迈出第一步，但随后似乎会出现在第一个工人的顶部以跟随他的动作。

该网站需要在游戏之前完成登录和以前的任务，因此无法链接到示例（尽管如果这是必要的，我可以在登录系统之外创建一个新页面）。

//更新 - 我已经设法在登录系统之外准备了一个页面，以向您展示问题所在。[http://www.tranquilityeden.co.uk/colony/example.php](http://www.tranquilityeden.co.uk/colony/example.php) 要使问题发生，您必须执行以下操作： 1- 使用 FF，因为它目前似乎不适用于任何其他浏览器（单独的问题！）

2-查看游戏板时，单击 Ind 磁贴

3-然后当弹出带有选项的窗口时向下滚动到锯木厂。点击升级（目前只有在建造锯木厂时才会发生）

4-当你建好锯木厂后，看着小人去仓库（WH），他会回家，然后重复这个过程。

5-建造第二个锯木厂并观看疯狂！//

我已经为 Animate_Int() 函数包含了下面的代码，因为我认为问题可能出在这个函数中，尽管我不能确定。

```
function Animate_Int()
    {
    if(pause ==1)      //stops animation of images if game is paused
    {return;}
    else if(Active_Workers.length !=0) //Stops animation if no sawmills have been built
    {
          for(var i=0;i<=Active_Workers.length;i++)
        {
            var x;
            var y;
            var index = Active_Workers[i];    //An array that holds the ids of each active worker
            var Image = Animate_Image[index];       //Worker ID

            var Current_Coord = Animate_Current_Coord[index];     
                  //An array that holds the imagescurrent coordinate on board
             var pos = $(Image).position();                                    
                   // Finds the exact pixel position of the image
             var    Current_X = pos.left;
             var    Current_Y = pos.top;

            var Target_Coord = Animate_Target_Coord[index];           
                  //Array holding the Target Coordiante
            var    Target_X = xArray[Target_Coord]-15;                       
              //Finds the pixel location for the center of the table cell
            var    Target_Y = yArray[Target_Coord];

            var End_Coord; 
       //This is the destination of the worker for example the warehouse or back to the sawmill
            var End_X= xArray[End_Coord]-15;
            var    End_Y = yArray[End_Coord];           //pixel location of destination

            if(Animate_Delivered[index]==0)                                  
             //works out if worker is on his way, or on his way back from warehouse
            {End_Coord = Animate_End_Coord[index];}
            else
            {End_Coord = index;}

            //Now using the varibles set above I use some if and else statements to tell the browser             what to do in each situation.

            if((Current_X == End_X)&&(Current_Y == End_Y))          
                   //Event: when the image has reached its destination     
            {   
                Current_Coord = Animate_Current_Coord[index];
                var bearing_next_coord;

                if(End_Coord == index){Animate_Delivered[index]=0;}
                else{Animate_Delivered[index]=1;}

                bearing_next_coord=Direction(Current_Coord,End);                
                   //calls the pathfinding  function to find next direction to take.
                var bearing = bearing_next_coord[0];                                      
                  //bearing is "n" (north),"e" (east) etc
                var next_coord = parseInt(bearing_next_coord.substring(1));    
                   //Gives the new coordinate
                Animate_Target_Coord[index]=next_coord;                             
                  //changes the target array

            }
            else if((Current_X == Target_X)&&(Current_Y == Target_Y))          
                   //'Event: has reached the center of the next  cell in the route
            {   
                Current_Coord=Animate_Target_Coord[index];

                var bearing_next_coord = Direction(Current_Coord,End_Coord); 
                  //gets next direction to  take

                var bearing = bearing_next_coord[0];
                var next_coord = parseInt(bearing_next_coord.substring(1));

                switch(bearing)        //switch to choose the image based on travel direction
                {
                    case "n":
                    $(Image).attr("src", "images/animations/sawmill_dude_n.gif");
                    break;
                    case "e":
                    $(Image).attr("src", "images/animations/sawmill_dude_e.gif");
                    break;
                    case "s":
                    $(Image).attr("src", "images/animations/sawmill_dude_s.gif");
                    break;
                    case "w":
                    $(Image).attr("src", "images/animations/sawmill_dude_w.gif");
                    break;
                }

                Animate_Target_Coord[index]=next_coord;      //update target array

            }

            if(Current_X !=Target_X)                                          
                    //Event: image is in between  coordinates and needs to be moved.
            {   
                y= Current_Y;
                if(Current_X < Target_X)
                {x= Current_X+1;}
                if(Current_X > Target_X)
                {x= Current_X-1;}

            }
            if(Current_Y !=Target_Y)
            {   
                x= Current_X;
                if(Current_Y < Target_Y)
                {y= Current_Y+1;}
                if(Current_Y > Target_Y)
                {y= Current_Y-1;}
            }
                      //Now to actuall move the image.
            $(Image).queue(function () {
            $(this).css({left:x,top:y});
            $(this).dequeue();});

        }

    }
    } 
```

我在您的优秀网站上注意到以下链接，[jQuery 中的队列是什么？](https://stackoverflow.com/questions/1058158/can-somebody-explain-jquery-queue-to-me)，在底部附近有一个移动多个图像的示例。我认为这就是我所追求的，但我真的很难理解代码。

如果有人代码帮助我了解如何将此代码应用于我的场景，我将非常感激。代码可以在这里找到：http: [//jsfiddle.net/enf644/6bX28/2/](http://jsfiddle.net/enf644/6bX28/2/)

我可以看到代码如何与 html 和 css 匹配，但我真的不明白如何订购（或命名）队列，或者真的不明白 dequeue 命令的作用。同样在上面的示例中，它在代码中提到了“下一个”（以蓝色显示）我看不到这个变量的定义位置......简而言之，我需要有人向 jquery 假人解释队列系统:)

抱歉，如果我以错误的格式提供了代码，但正如我所说，我对所有这些东西都很陌生！

感谢您的帮助，如果我没有说清楚，请随时问我任何问题（尽管我可能不知道答案：D）。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:20:39.910

您所拥有的`Animate_Int`是传统上称为 20Hz（50 毫秒）的封装。这可以工作，但它是一种相当老式的编码方法（我从 1970 年代/1980 年代的项目中认识到它），它不会发挥 javascript，尤其是 jQuery 的优势。

因此，我建议您摆脱固定间隔包的概念。

不幸的是，替代方案需要完全不同的思维方式和完全不同的代码。

好消息是，替代代码的体积将明显少于`Animate_Int`，主要由 jQuery 的`.animate()`方法来促进，该方法将处理从点到点的所有移动。

您需要采用的思维方式可以称为“面向对象的行为”，通过这种思维方式，您可以为每种类型的对象（在这种情况下为工人）提供可以根据需要调用的行为。因此，您可以将低级代码（在棋盘上移动）与高级监督（游戏）代码分开。

例如，您可以编写一个通用`.walkTo()`方法，该方法将附加到 Worker 对象（以及需要在板上进行动画处理的任何其他类型的对象）。然后你可以调用（从合适的地方）`thisWorker.walkTo(somePos)`，其中`somePos`定义了目标板坐标。中间路点/方向/图标变量的计算将在`.walkTo()`代码中执行。

正如我已经说过的，这需要一种完全不同的思维方式，但值得花时间学习，因为它会导致本质上更少的代码量，而且代码更容易在应用程序中重用（因此进一步减少）。在我看来，另一个优势是更容易获得帮助，因为有经验的 javascript/jQuery 程序员会识别代码的整体模式。

# node.js - 从 Mongoose 更新 MongoDB

> ID：10257847
> 
> 赞同：0
> 
> 时间：2012-04-21T09:42:17.223
> 
> 标签：node.js, mongodb, mongoose

我正在尝试使用 mongoose 更新 MongoDB 中的一行，我传递了唯一的帐号，但我无法更新该行。

```
this.update({account_no:key},{valid:'true'},{ upsert: true }, function(){}); 
```

这有什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:59:20.727

请试试

```
this.update({account_no:key}, { $set: { valid: 'true' }},{ upsert: true }, function(){}); 
```

并利用**$set** in update 参数。可能是它！

# javascript - ajax动态加载js文件

> ID：10257849
> 
> 赞同：0
> 
> 时间：2012-04-21T09:42:25.313
> 
> 标签：javascript, ajax

单击按钮时，我想在 ajax 中动态包含一个 js 文件。我基本上想要做的是我想在单击按钮时加载地图。为此，我使用了两个文件：

```
<script type="text/javascript" src="http://maps.google.com/maps?..."></script>
<script type="text/javascript" src="jquery.gmap-1.1.0-min.js"></script> 
```

现在我想要的是，当用户单击一个按钮时，这两个文件会被加载，并且地图会在没有刷新页面的情况下显示。

此外，当用户单击按钮并且这两个脚本已加载时，第二次单击它不会使脚本再次加载。

对此问题的任何帮助将不胜感激。

* * *

谢谢您的回复。无论如何，我尝试使用 $script 和 RequireJs 来执行此操作，但地图无法加载。

这是我编写的代码：

```
<script type="text/javascript" src="../js/jquery-1.7.js"></script>
<script src="../js/script.js"></script>
<script>
function googlemaps()
{
  $script('"http://maps.google.com/maps?file=api&..', 'maps', function() 
  {
      $script('../js/jquery.gmap-1.1.0-min.js', 'jquery', function() {
      $("#map").gMap({address: "USA", markers: [{address: "USA"}]});
      });
  });
}
</script>

<input name="Butoon" type="button" value="Button" onclick="javascript: googlemaps();" />

<div id="map"></div> 
```

我得到的错误是：“G_NORMAL_MAP 未定义”和“GMap2 未定义”（错误出现是因为 jquery.gmap-1.1.0-min.js 在 [http://maps.google.com/之前加载maps?file=api&](http://maps.google.com/maps?file=api&) .. 加载）。使用 RequireJs 时重复相同的错误。你能说我在哪里犯错吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:44:29.153

你应该看看一些脚本/模块加载器，比如[$cript](http://dustindiaz.com/scriptjs)和[RequireJS](http://requirejs.org/)。基本上，他们做同样的事情，甚至更多。

# c# - Monodroid：找不到库“com.google.android.maps”

> ID：10257852
> 
> 赞同：0
> 
> 时间：2012-04-21T09:43:18.330
> 
> 标签：c#, xamarin.android

我正在尝试构建 mondroid-sample [https://github.com/xamarin/monodroid-samples/tree/master/MapsAndLocationDemo](https://github.com/xamarin/monodroid-samples/tree/master/MapsAndLocationDemo)。

每当我启动应用程序时，我都会在输出窗口中收到以下错误：

```
[STDOUT] "C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj" (SignAndroidPackage target) (1) ->
[STDOUT] (_GenerateJavaStubs target) -> 
[STDOUT]   C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018: The "GenerateJavaStubs" task failed unexpectedly. [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj]
[STDOUT] C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018: System.InvalidOperationException: AndroidManifest.xml : error 1: Unable to find library 'com.google.android.maps'. [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj]
[STDOUT] C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018:    bei Xamarin.Android.Tasks.ManifestDocument.AddAddOns(XElement app) [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj]
[STDOUT] C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018:    bei Xamarin.Android.Tasks.ManifestDocument.Merge(List`1 subclasses, List`1 selectedWhitelistAssemblies, Boolean embed) [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj]
[STDOUT] C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018:    bei Xamarin.Android.Tasks.GenerateJavaStubs.Execute() [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj]
[STDOUT] C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018:    bei Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj]
[STDOUT] C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(595,3): error MSB4018:    bei Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult) [C:\Dev\Playground\monodroid-samples\MapsAndLocationDemo\MapsAndLocationDemo.csproj] 
```

我检查了以下内容：

*   SDK 管理器中安装的 Google API
*   SDK 平台安装在 SDK 管理器中
*   我正在使用的 AVD 以 GoogleAPI 为目标
*   我以管理员身份运行 Visual Studio
*   我可以成功构建一个 Hello World 示例

由于我是 Mono 和 Android 开发的新手，我确信我遗漏了一些明显的东西，所以请多多包涵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T20:35:58.413

看着你的照片，你从来没有提到改变它，我敢打赌你的项目是针对 2.2。

在 MonoDevelop 中，转到 Project -> Options -> Build -> General，然后查看 Target 框架。默认是针对 Android 2.2 (Froyo)，看起来您想要针对 4.0 或 4.0.3。

将此更改为 4.0 或 4.0.3，您应该一切顺利。

# ios - iOS上的可加载捆绑包，有什么办法可以实现吗？

> ID：10257854
> 
> 赞同：5
> 
> 时间：2012-04-21T09:43:30.850
> 
> 标签：ios, dynamic, bundle

我正在 iOS 上进行一个大型项目，我想将独立的模块分成几个可加载的包。但是，官方文档表明 iOS 不支持可加载捆绑包。另外，我计划使用内部分发，因此应用商店的批准不是问题。

现在我的问题是：我调用`[_bundle principalClass]`代码来访问可加载包的入口类。它在越狱的 iOS 设备上运行良好。对于未越狱的设备，当我在 Xcode 中使用调试模式时，它也可以正常工作。但是当我从跳板独立运行它时，它会崩溃到后台。

我真的很想知道：

1) 为什么在越狱/未越狱设备上运行的可加载包如此不同？
2) XCode 调试模式和应用程序的正常运行模式之间的主要区别？

在未越狱的 iOS 设备上使用动态库还有其他棘手的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:10:27.140

更新：从 2014 年发布的 iOS 8 开始，iOS 对框架有适当的支持，因此开发人员不再需要使用静态库。

较旧的答案：

iOS 不允许动态加载不属于系统的可执行代码；这包括框架、dylib、使用 mmap 的可执行内存页面等。希望它们有一天会允许动态捆绑，但目前您需要将模块构建为静态库并在构建时链接它们。没有解决此限制的已知方法。

很多人都写过如何做到这一点（例如， http: [//blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/](http://blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/)），或者你可能想以现有项目为例。我喜欢的一个是 GData objc API，它具有为 OS X 构建时的动态框架和为 iOS 构建时的静态库的目标：[http ://code.google.com/p/gdata-objectivec-client /](http://code.google.com/p/gdata-objectivec-client/)

# function - ARM 函数未正确返回

> ID：10257866
> 
> 赞同：0
> 
> 时间：2012-04-21T09:45:12.047
> 
> 标签：function, assembly, arm

我对为什么这个函数在它应该返回时反复调用它自己感到困惑。

```
Initialize:
    stmfd sp!, {R0-R4,lr}
    mov R4, #0  @used for storing 0
    mov R0, #2
    mov R5, #0
    ldr R1, =sieve
    ldr R1, [R1]
    ldr R2, =primes
    ldr R2, [R2]
    str R4, [R1], #4    @intialize first and second elements in sieve to 0
    str R4, [R1]
    mov R4, #1  @used for storing 1
setToOne:
    str R4, [R1], #4
    add R0, R0, #1
    cmp R0, #MAX
    blt setToOne
    ldmfd sp!, {R0-R4,pc}   @For somereason Initialize repeats as if lr points back to its begining (instead of where it's called from) 
```

好的，我不能发布整个程序，因为它说“您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的场景。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T14:39:17.677

您正在覆盖`R5`而不先保存它。我不明白为什么它应该让函数自己调用，但它可能会给出某种奇怪的结果。

附带说明，如果您从 C 中调用此函数，`R0-R3`则不需要保存，因为它们是暂存寄存器。如果您从程序集中调用它，您当然可以创建自己的调用约定，这可能需要保存它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:06:23.023

我用几个不同的 MAX 值尝试了你的代码，它工作正常：Initialize 在调用它的指令之后返回指令（bl Initialize）。假设您在此代码段之外正确地执行了所有操作，那么罪魁祸首似乎是您的 STR 指令。您正在使用 psedu ldr 获得 R1 中筛子的值。sieve 指向当您使用 .skip 而没有“填充”时隐式初始化为零的内存块。现在您正在使用`ldr R1, [R1]`在 R1 中加载零，然后您正在执行将`str R4, [R1], #4`地址零处的字归零。现在我不知道您要实现什么逻辑，但是如果我按照您的评论**@initialize 筛子中的第一个和第二个元素为 0**那么你的代码没有做你想做的事。根据您在内存中排列代码的方式，您可能会用零覆盖您自己的代码的一部分。可能是您的 Initialize 位于零内存地址，并且您正在用零覆盖堆栈上 lr 的值。我只是在胡乱猜测。如果您提供了有关您尝试实现的逻辑的一些信息以及更多代码，那么我可能能够更好地帮助您。您可以尝试的一件事是，一旦完成`ldr R1, =sieve`，请将 R1 留给您的 STR，并使用您`ldr R1, [R1]`喜欢的其他寄存器`ldr R6, [R1]`。根据您在调用者代码中使用 R6 的方式，您可能需要也可能不需要**PUSH R6**在堆栈上。这不是一个确切的答案，我想把它放在评论部分，但我没有足够的权限这样做。

# php - 通过文本输入表单 php 将数据发送到 android 设备

> ID：10257868
> 
> 赞同：2
> 
> 时间：2012-04-21T09:45:19.133
> 
> 标签：php, android, http-post

这是想法：

![在此处输入图像描述](../Images/8fb1e72fa8bf65dc3470691b9cd36cdd.png)

用户输入一个必须发送到安卓设备的命令。

然后android设备运行该命令并将结果返回给php页面，该页面将结果显示在页面中！

我尝试过使用套接字但没有运气（我想保持连接活动直到页面关闭）。

我知道如何在我的 android 设备中运行命令：

```
Runtime.getRuntime().exec( command,args); 
```

而且我也知道如何将数据发送到 php 服务器：

```
HttpPost httppost = new HttpPost("http://192.168.10.21/epl371/index.php?"); 

etc... 
```

问题是我想在按下提交按钮后首先通过文本框将数据发送到android设备。

有没有办法做到这一点？HttpPost 是错误的方法吗？

我尝试了很多事情，例如：

```
URL url = new URL(SERVER_URL);
URLConnection connection = url.openConnection();

etc.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:18:21.217

感谢您的澄清！

由于服务器很可能具有更永久的 IP 地址，因此最好按照以下方式编写您的 android 应用程序：

1.  当它启动时，它（通过`HttpRequest()`，也许）发送它的当前 IP 地址。这样服务器就知道在哪里发送命令。

2.  运行时，应用程序在特定 IP 端口上侦听命令并发回回复，您可以在[此处](https://stackoverflow.com/questions/9856523/whats-the-best-way-for-an-android-app-to-listen-for-incomming-tcp-ip-messages)找到详细信息。

3.  停止时，应用程序会向服务器发送“停止”状态，这样您的服务器就会知道您的手机不见了。

您的服务器部分，除了您的表单，可能需要额外的 android 启动/停止请求处理程序（见上文）以及一些关于在页面重新加载之间保存 IP 地址的位置的逻辑。

# azure - Azure 存储表与 SQL

> ID：10257872
> 
> 赞同：64
> 
> 时间：2012-04-21T09:45:42.187
> 
> 标签：azure, azure-sql-database, azure-storage, azure-table-storage

我刚开始学习 Azure，我看不到太多场景，您希望将某些内容放入 Azure 存储表而不是 SQL。我想也许我习惯于在需要相关数据的环境中工作？

何时将某些内容放入 Azure 存储表而不是放入 Azure SQL 数据库的表中更好？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-21T10:57:32.563

当您想使用关系、索引、约束等处理结构化数据时，SQL Azure 非常棒。

当您需要处理没有关系且通常具有大量数据的集中式结构化数据时，Azure 存储表非常有用。

价格：SQL Azure：5GB 25.98 美元/月

存储表：175 GB 为 21.88 美元/米（不含事务或带宽）因此，当您存储大量数据时，存储表要便宜得多……例如考虑日志记录。

集中化：Windows Azure 是服务器的分布式环境，所以如果你在一台机器上保存一些东西，其他人不会知道它，因此存储表是集中登录、会话处理、设置或其他任何东西的好解决方案（请记住即使在一个数据中心也存在延迟）

速度：如果设计得当，在许多情况下存储表应该比 sql azure 快，但这可能取决于用例，我还没有真正测试过。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-05-03T16:19:22.927

虽然我在这篇文章中添加较晚，但我确实想提一件事似乎没有被涵盖。Azure SQL 有数据限制（我怀疑很快就会增加）。网络版 5 GB，商业版 150 GB。对于某些解决方案，这是完全足够的。但对其他人来说，可能不是，我个人也遇到过。

Azure 表的磁盘上限要高得多。我相信它的 100 TB。

此外，虽然 NoSQL 本质上是非关系型的，但这并不一定是坏事。我们经常认为我们需要关系，而事实上，如果我们以不同的方式思考我们的问题，我们可能就不需要这么多了。您可以在代码本身内强制执行关系——我怀疑大多数开发人员做的事情比他们真正想象的要多得多。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-21T12:59:56.217

如果出现以下情况，我将始终使用 azure 表作为更便宜的解决方案：

*   我只通过 PK 执行表选择（由于整个反序列化，属性选择很慢）
*   我可以忍受有限的 Linq 集（[查询运算符（表服务支持）](http://msdn.microsoft.com/en-us/library/windowsazure/dd135725.aspx)
*   我不需要加入表并*在服务器上执行复杂的查询*
*   我需要对我的数据进行水平分区“分片”（Sql Azure Federations 是朝着这个方向迈出的一步，表从第 0 天开始就有 PartionKey

# c - `pthread_mutex_trylock` 被两个线程同时调用时阻塞

> ID：10257873
> 
> 赞同：5
> 
> 时间：2012-04-21T09:45:47.727
> 
> 标签：c, multithreading, locking, pthreads, mutex

我正在使用`pthread_mutex_trylock`将互斥锁锁定在结构上，以便在给定时间只能由单个线程访问/修改。如果互斥锁已经被锁定，我只是从例程返回而不是排队/阻塞。

这是我的代码的基本大纲：

```
typedef struct {
    pthread_mutex_t m;
} myStruct;

void setupStruct(myStruct* struc) {
    pthread_mutex_init(&struc->m, NULL);
}

void structOp(myStruct* struc) {

    printf("structOp(): Trying to lock\n");

    if(pthread_mutex_trylock(&struc->m) != 0) {
        printf("structOp(): Lock failed\n");
        return;
    } else {
        printf("structOp(): Locked\n");
        // do some stuff to struct
        pthread_mutex_unlock(&struc->m);
    }
} 
```

该结构被初始化一次，如下所示：

```
myStruct* struc = malloc(sizeof(struc));
setupStruct(struc); 
```

但是，有时当两个线程同时调用一个例程时，这两个调用`trylock`似乎都阻塞了。我假设这是因为它同时为两个线程打印“尝试锁定”，但不打印互斥锁是否被锁定。由于这个原因，我最初遇到了这个问题，`pthread_mutex_lock`所以尝试了非阻塞版本，但它似乎仍然阻塞。

这并不总是发生，但当它发生时，它总是对例程的**前两次**调用。如果前两个调用运行良好，那么后续调用也运行良好。

有什么理由会阻止吗？由于其他问题，我是否只是错误地感知到了这种阻塞？如果问题可能出在其他地方，我可以发布我的代码的其他部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T11:00:49.073

这一行是错误的：

```
 myStruct* struc = malloc(sizeof(struc)); 
```

它没有分配足够的内存，因此您可能正在丢弃/重用访问互斥锁的内存。using`sizeof(struc)`为 of 的类型分配内存，而 of`struc`的类型`struc`为 a `myStruct*`，因此您分配的内存仅足以容纳一个指针（即可能只有 4 或 8 个字节）

你应该做

```
 myStruct* struc = malloc(sizeof *struc); 
```

或者

```
 myStruct* struc = malloc(sizeof(myStruct)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:40:43.857

这是某种时间问题或内存损坏。无论哪种方式，它都与您发布的代码无关，因此无法回答这个问题。

如果您的操作系统支持 valgrind，请使用[memcheck](http://valgrind.org/docs/manual/mc-manual.html)和[helgrind](http://valgrind.org/docs/manual/hg-manual.html)模块检查您的应用程序。

# emacs - 用 Clojure 编写的 Clojure 编辑器

> ID：10257880
> 
> 赞同：9
> 
> 时间：2012-04-21T09:47:28.230
> 
> 标签：emacs, clojure, editor, slime, swank

注意：我不是在寻找 LightTable。我真的在寻找在 Clojure中*实现*的 Clojure 编辑器。

最近，我一直在研究 slime/swank/elisp。尽管这是一个了不起的系统，但我实际上不明白（除了历史文物的原因）为什么我应该：

(*) 在 Clojure 中编写我的部分代码，但在 elisp 中编写编辑器插件

似乎除了 emacs/swank/elisp 已经存在的事实之外，没有理由更喜欢 elisp 而不是 clojure。

因此，我的问题是：是否有任何可用的项目可以在 clojure 中实现 clojure 编辑器/ide？如果它不如 emacs/slime/swank 发达也没关系——我不介意写更多的 clojure 代码。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T09:49:31.217

[Clooj](https://github.com/arthuredelstein/clooj)是在 Clojure 中实现的，人们似乎很喜欢它。虽然我不相信它有任何扩展机制，但是当它出现时，我确信它们会用 Clojure 编写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T00:54:52.150

LightTable 刚刚开源[https://github.com/LightTable/LightTable](https://github.com/LightTable/LightTable)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T13:38:41.690

有一些用 Clojure（或 ClojureScript）编写的新编辑器

*   [https://github.com/bodil/catnip](https://github.com/bodil/catnip)
*   [https://github.com/hraberg/deuce（Clojure](https://github.com/hraberg/deuce)下的 Emacs）
*   [https://github.com/oakes/Nightcode](https://github.com/oakes/Nightcode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T09:36:24.490

Nightcode 非常棒，用 Clojure 编写并积极开发，参见[https://github.com/oakes/Nightcode](https://github.com/oakes/Nightcode)

# php - 如何使用 PHP 解析具有多个根元素的 XML？

> ID：10257881
> 
> 赞同：5
> 
> 时间：2012-04-21T09:47:30.657
> 
> 标签：php, xml, parsing, root

我正在尝试使用 PHP 读取这个 XML 文件，并且我有两个根元素。我用 PHP 编写的代码只读取一个根元素，当我添加另一个 ( `<action>`) 时，它给了我一个错误。我想做这样的事情：`if($xml->action=="register")`然后打印所有参数。

这是我的 XML 文件：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<action>register</action>
<paramters>
    <name>Johnny B</name>
    <username>John</username>    
</paramters> 
```

这是我的 PHP 脚本：

```
<?php
$xml = simplexml_load_file("test.xml");

echo $xml->getName() . "<br />";

foreach($xml->children() as $child)
{
    echo $child->getName() . ": " . $child . "<br />";
}
?> 
```

我真的不知道该怎么做这一切......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T09:51:57.760

修复你的 XML，它是无效的。XML 文件只能有 1 个根元素。

有效 XML 示例：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<action>
    <type>register</type>
    <name>Johnny B</name>
    <username>John</username>
</actions> 
```

或者，如果您只希望参数拥有自己的元素：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<action type="register">
    <name>Johnny B</name>
    <username>John</username>
</actions> 
```

或者如果您想要多个操作：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<actions>
    <action type="register">
        <name>Johnny B</name>
        <username>John</username>
    </action>
</actions> 
```

**编辑**：

正如我在评论中所说，你的老师应该修复他的 XML。这是[无效](http://en.wikipedia.org/wiki/Root_element)的。[他还应该通过验证器](http://validator.w3.org/)将他的 XML 放入。

如果你真的很绝望，你可以引入一个人为的根元素，但这是非常糟糕的做法，应该不惜一切代价避免：

```
$xmlstring = str_replace(
    array('<action>','</paramters>'),
    array('<root><action>', '</paramters></root>'),
    $xmlstring
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T17:01:52.047

以前的答案都不是很准确。XML 规范定义了几种实体：例如文档实体、外部解析实体、文档类型定义。您的示例不是格式良好的文档实体，这通常是要求 XML 解析器解析的。然而，它是一个格式良好的外部解析实体。处理格式良好的外部解析实体的方法是从骨架文档实体中引用它，如下所示：

```
<!DOCTYPE wrapper [
<!ENTITY e SYSTEM "my.xml">
]>
<wrapper>&e;</wrapper> 
```

然后将文档实体传递给 XML 解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T09:52:37.800

由于它是一个`invalid`xml 文件，因此您可以执行以下技巧。

*   在第二行插入一个虚拟开始标签`<dummy>`
*   最后完成它`</dummy>`

快乐解析；）

# cakephp - 如何解决 - 对 cake php 中非对象上的成员函数 save() 的调用？

> ID：10257882
> 
> 赞同：0
> 
> 时间：2012-04-21T09:47:46.453
> 
> 标签：cakephp, xampp

在我正在开发的应用程序中，我在 view.ctp 文件中创建了一个表单，如下所示：

```
<?php
echo $form->create('Answer',array('action'=>'addanswer'));
echo $form->input('ques',array('value'=>'1'));
$userInfo=$this->Session->read('Auth.User');
$user=$userInfo['id'];
echo $form->input('user',array( 'value'=>$user));
echo $form->input('answer');

echo $form->end('Submit answer');
?> 
```

在 answers_controllers.php 文件中，我有以下代码：

```
<?php
class AnswersController extends AppController{
    var $name= 'Answers';
    var $uses = array('User');

    function addanswer(){
        if(!empty ($this->data)){
            echo $this->data;
            if($this->Answer->save($this->data)){

                $this->Session->setFlash('The answer has been addedd successfully');
                $this->redirect(array('action'=>'index'));
            }
            else{
                $this->Session->setFlash('The answer was not saved. Please re enter the details');
            }
        }
        $this->set('title_for_layout','Add a new Answer');
    }
}
?> 
```

但是当我按下提交答案按钮（在 view.ctp 中提到）时，我会调用非对象上的成员函数 save()。与此代码非常相似的代码运行良好，但这不起作用。

我是cake php的新手，因此将不胜感激有关如何解决此问题的任何帮助。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:01:51.067

不要使用

```
 var $uses = array('User'); 
```

！否则你正在“破坏”真正的控制器模型（在这种情况下可能是`Answer`）。

无论如何，您的 Answer 模型应该通过 $belongsTo 与用户建立关系。因此，您仍然可以通过以下方式访问用户对象

```
$this->Answer->User->... 
```

# android - ListFragment addFooterView

> ID：10257891
> 
> 赞同：1
> 
> 时间：2012-04-21T09:50:40.373
> 
> 标签：android, android-layout

你好，我有一个 ListFragment 从网上获取一些数据，然后使用渲染器来显示它们。问题是，如果我像这样添加一个简单的 TextView：

> TextView tv = new TextView(getActivity());

那么它工作正常，但如果我尝试添加更复杂的视图，那么应用程序会冻结。我也尝试过从 xml 扩充视图，但没有运气。基本上我试图膨胀这个RelativeLayout：

```
<RelativeLayout 
    android:id="@+id/listView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:layout_centerVertical="true" 
    android:background="@color/main_background" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/leave_comment" 
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textColor="@color/resultlist_title"/>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="230dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_marginLeft="10dp"
        android:inputType="textPostalAddress" >

    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="@string/leave_commentbtn"
        android:background="@drawable/venue_post" 
        android:layout_below="@+id/textView1"
        android:layout_toRightOf="@+id/editText1"
        style="@style/list_button" 
        android:layout_marginLeft="18dp" 
        android:layout_centerInParent="true"
        android:textColor="@color/white"/>

    <ProgressBar
        android:id="@+id/progressBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" /> 
```

我错过了什么吗？不能将相对布局添加为页脚视图吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T11:30:41.860

如果你想在android中添加页眉和页脚，你可以这样做。我希望这能帮到您。

```
LayoutInflater inflater = this.getLayoutInflater();
        LinearLayout listFooterView = (LinearLayout)inflater.inflate(
                com.demo.list.R.layout.footerview, null);

        LinearLayout listHeaderView = (LinearLayout)inflater.inflate(
                com.demo.list.R.layout.headerview, null);
        ListView lv = getListView();
        lv.setTextFilterEnabled(false);
        lv.addFooterView(listFooterView);
        lv.addHeaderView(listHeaderView); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T10:21:35.633

要膨胀相对布局，您可以使用：

```
 View my_view= View.inflate(this, R.layout.layout_name, null); 
```

希望它会起作用，然后您可以将其添加到您想要的位置。

# android - 软件编目应用程序的最佳更新机制是什么？

> ID：10257895
> 
> 赞同：0
> 
> 时间：2012-04-21T09:50:50.940
> 
> 标签：android

我正在开发一个非常类似于 Android Market（现为 Google Play）的 Android 应用程序，我在其中向用户提供各种软件以供安装。不同之处在于，即使没有互联网连接，我也希望用户能够浏览应用程序。这意味着我必须将数据存储在本地数据库中（这里我想使用 sqlite），并且这些数据需要定期更新。
现在我的问题是这个。我应该如何实施此更新机制以获得最佳性能和可用性？
我想我有几个选择，如下所示：

1.  每次更新整个数据库。这样，我每次都必须下载每条记录才能获得更新的内容。
2.  根据添加日期更新数据。虽然这似乎是一个好方法，但是之前添加的内容有可能被编辑并在这种方法中被省略。也有一些项目被删除的可能性。

这些是我认为我可以做的，但我不知道哪种方法最好？！我也愿意接受任何其他可能在这里奏效的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:58:04.643

根据我的担忧，如果您为服务器端数据库放置了一些监听器，当任何数据记录被修改、添加或删除时，它们会收到通知。并使用 Web 服务或[Google Android C2DM 服务](https://developers.google.com/android/c2dm/)，它会通知您的应用程序从您的服务器更新特定数据库记录。

（我可能是错的或任何其他方法也可用于易于实施）

# entity-framework - EF Code First 4.3 有条件地加载导航属性

> ID：10257896
> 
> 赞同：0
> 
> 时间：2012-04-21T09:51:10.413
> 
> 标签：entity-framework, navigation, code-first, eager-loading

是否可以使用 DbContext / DbSet / DbQuery 有条件地急切加载导航属性。下面的查询将返回具有特定角色的各方。

*我需要的是另外只加载匹配的角色。*

**第一次尝试**

```
var peopleWithRole = (from p in Party
  from r in p.Roles
  where r.RoleTypeId == 1
  select p).Include(_ => _.Roles); 
```

这会加载所有角色，一旦您查看它，原因就很明显了。

我已经尝试了几件事。如果我必须强制转换并创建一个对象查询来做到这一点，那很好，我只是不知道怎么做。

**第二次尝试**

```
var objectContext = ((IObjectContextAdapter)this).ObjectContext;
var set = objectContext.CreateObjectSet<Party>();
var result = (from p in set.Where("it.Roles.RoleTypeId == 1")
              select p)
;
result.Dump(); 
```

迭代器不能这样用？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:54:19.793

不支持使用预先加载进行过滤和排序。在单次往返中加载数据的唯一方法是投影：

```
var peopleWithRole = (from p in Party
                      select new
                      {
                          Party = p,
                          Roles = p.Roles.Where(r => r.RoleTypeId == 1)
                      })
                      .ToList()
                      .Select(a => a.Party); 
```

如果关系是一对多 EF（“关系修复”）将`Roles`在每个中自动填充过滤的集合`Party`（如果您不禁用更改跟踪）。如果关系是多对多的，它就不会那么容易工作，您需要在返回匿名对象的结果列表后手动填充集合。

最后一个选项是在这里投票支持急切加载过滤功能：http: [//data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method) ...并希望它将在未来的 EF 版本中实施。

# php - 邮件函数 - 致命错误：函数名称必须是字符串

> ID：10257900
> 
> 赞同：-2
> 
> 时间：2012-04-21T09:51:58.243
> 
> 标签：php

这里需要一些帮助 - 我有一个向用户提供数据的表格：用户可以选择更新表格。如果表已更新，我想生成一封包含该（更新的）数据的电子邮件。到目前为止清楚吗？

当我运行代码时，它会更新数据库，但会发送以下错误 -

```
Fatal error: Function name must be a string in C:\xampp\htdocs\mlac\mlac_member2.php on line 226 
```

好的 - 这是相关的代码（我省略了其余的，因为它没有增加这个问题）：

```
<?php

if (isset($_GET['view']))
    {
    $user = sanitizeString($_GET['view']);

    $data = "SELECT * FROM names WHERE id='$user'";
    $result=mysql_query($data) or die(mysql_error());

    while($row=mysql_fetch_array($result)){

?> 
```

html

```
 <caption>Personal Record</caption>

<tr>
<th>ID</th>
    <td><?php
        echo $row['id'];
     ?></td>
</tr>

<tr>
<th>Name</th>
    <td><?php
        echo $row['name'];
     ?></td>
</tr>

<tr>
<th>E-Mail</th>
    <td><?php
        echo $row['email'];
     ?></td>
</tr>

<tr>
<th>Main Telephone</th>
    <td><?php
        echo $row['maintel'];
     ?></td>
</tr>

<tr>
<th>Mobile Telephone</th>
    <td><?php
        echo $row['mobtel'];
     ?></td>
</tr>

<tr>
<th>Organisation</th>
    <td><?php
        echo $row['organisation'];
     ?></td>
</tr>

<tr>
<th>Group Leader</th>
    <td><?php
        echo $row['group_leader'];
     ?></td>
</tr>

<tr>
<th>Supervisor</th>
    <td><?php
        echo $row['supervisor'];
     ?></td>
</tr>

<tr>
<th>Volunteer</th>
    <td><?php
        echo $row['volunteer'];
     ?></td>
</tr>

<tr>
<th>Assessor</th>
    <td><?php
        echo $row['assessor'];

        }
        }
     ?></td>
</tr>

</table>

    <br />
    <form method="post" action="update.php">
        <input name="Submit1" type="submit" value="Edit" style="width: 67px" /></form>

    <p>&nbsp;</p> 
```

[/html]

```
<?php   

$to='xy@sth.com';
$subject='Test Script';

$name=$row('name');
$email=$row('email');
$phone=$row('mobtel');
$message=("Name:  ").$name. ("\r\n") . ("Email:  ") .$email . ("\r\n") . ("Phone:  ")    .$phone;

mail($to,$subject,$message);

?> 
```

如果有人可以提供帮助，我将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:55:34.927

`$row`不是一个函数，它是一个数组（*我猜*）。

```
$name=$row['name'];
$email=$row['email'];
$phone=$row['mobtel']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:16:19.747

```
$name=$row['name'];
$email=$row['email'];
$phone=$row['mobtel']; 
```

bažmegakapa 所说的是正确的......并且还删除了下一行中的括号。

```
$message="Name:  ".$name. "\r\n" . "Email:  " .$email . "\r\n". "Phone:  ".$phone; 
```

如果您想在邮件中添加标题，请尝试这样

```
$headers1  = "MIME-Version: 1.0\r\n";

$headers1 .= "Content-type: text/html; charset=iso-8859-1\r\n";

$headers1 .= "From: $fromurl\r\n";

@mail($to, $subject , $message, $headers1); 
```

# c++ - 复数类中的静态关键字错误

> ID：10257903
> 
> 赞同：0
> 
> 时间：2012-04-21T09:52:47.930
> 
> 标签：c++, static, complex-numbers

我有以下代码

```
#include<math.h>
class complex
{

public:
    double getRe();
    double gerIm();
    void setRe(double value);
    void setIm(double value);
    explicit complex(double=0.0,double=0.0);
    static complex fromPolar(double radius,double angle);
    complex operator+(complex rhs);
    complex operator-(complex rhhs);
    complex operator*(complex rhs);
    complex operator+(double rhs);
    complex operator-(double rhs);
    complex operator*(double rhs);
    complex conjugate();
    double norm();
    complex operator/(double rhs);
    complex operator/(complex rhs);

private:
    double real;
    double img;

};
complex operator+(double lhs,complex rhs);
complex operator-(double lhs,complex rhs);
complex operator*(double lhs,complex rhs);
complex operator/(double lhs,complex rhs);
complex exp(complex c);
inline double complex::getRe(){return real;}
inline double complex::gerIm(){ return img;}
inline void complex::setRe(double value) {  real=value;}
inline void complex::setIm(double value) { img=value;}
 inline complex::complex(double re,double im) :real(re),img(im){}
 inline static  complex complex::fromPolar(double radius,double angle){

     return complex(radius*cos(angle),radius*sin(angle));

 }
 inline complex complex::operator+(complex rhs)
 {
     return complex(this->real+rhs.real,this->img+rhs.img);

 }
 inline complex complex::operator-(complex rhs)
 {
     return complex(this->real-rhs.real,this->img-rhs.img);

 }
 inline complex complex::operator*(complex rhs)
 {
     return complex(this->real*rhs.real-this->img*rhs.img,this->real*rhs.img+this->img*rhs.real);

 }
 inline complex complex::operator+(double rhs)
 {
     return complex(this->real+rhs,this->img);

 }

 inline complex complex::operator-(double rhs)
 {
     return complex(this->real-rhs,this->img);

 }
 inline complex complex::operator*(double rhs)
 {
     return complex(this->real*rhs,this->img*rhs);

 }
 inline complex complex::operator/(double rhs)
 {
     return complex(this->real/rhs,this->img/rhs);

 }
 inline complex complex::operator/(complex rhs)
 {

     return (*this)*rhs.conjugate()/rhs.norm();

 }

 inline double complex::norm()
 {
 return (this->real*this->real+this->img*this->img);
 }

 inline complex complex::conjugate()
 {

     return complex(this->real,-this->img);
 }

 inline complex operator+(double lhs,complex rhs)
 {
     return rhs+lhs;
 }

 inline complex operator-(double lhs,complex rhs)
 {
     return complex(lhs-rhs.getRe(),rhs.gerIm());

 }
 inline complex operator*(double lhs,complex rhs)
 {
     rhs*lhs;

 }

 inline complex operator/(double lhs,complex rhs)
 {
     return rhs.conjugate()*lhs/rhs.norm();

 } 
```

但据说

```
1>c:\users\daviti\documents\visual studio 2010\projects\complex_number\complex_number\complex.h(38): error C2724: 'complex::fromPolar' : 'static' should not be used on member functions defined at file scope 
```

如果我删除 static 关键字，它编译得很好，但是我在类定义中使用了这个 static 关键字，所以如果我删除它，不会出错吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:55:43.367

`static`唯一需要出现在类定义中，而不是你实现方法的地方。

```
class complex
{
    //......
    static complex fromPolar(double radius,double angle);
    //.....
};

inline complex complex::fromPolar(double radius,double angle){
     return complex(radius*cos(angle),radius*sin(angle));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:24:05.903

@Luchian 已经很好地回答了这个问题。我将讨论`fromPolar`.

可能你已经知道你不能这样写：

```
class complex
{
    //..
    explicit complex(double real, double imaginary);
    explicit complex(double radius, double angle); //same as above
}; 
```

第二个构造函数与第一个构造函数基本相同（参数的不同名称没有任何区别），所以你不能这样做，这就是你想出`fromPolar`解决方案的原因。

但是即使在解决方案中仍然存在一个微妙的问题：*角度*参数`fromPolar`的单位是什么？它是弧度，度数还是什么？

 *所以我会提出以下课程，它解决了上面讨论的两个问题，你不再需要`fromPolar`函数了。

```
class complex
{
    //..
    explicit complex(double real, double imaginary);
    explicit complex(double radius, Angle angle); //now it is different
}; 
```

另一个类定义`Angle`为：

```
class Angle 
{
  double m_value; //always maintain this in radian

 public:
  Angle(double value, bool isradian = true);

  double radian(){ return m_value; }
  double degree(){ return m_value * 180 / PI; }//or maybe M_PI is the symbol
}; 
```

希望这能让你的课好一点。*

# php - r中的r是什么（$me->id）

> ID：10257905
> 
> 赞同：1
> 
> 时间：2012-04-21T09:53:17.680
> 
> 标签：php, mysql

以下代码是使用google api访问的一部分。在connectDb()之后，有一行

```
$q = sprintf("select * from users where google_user_id='%s' limit 1", r($me->id));

...// and more afterwards

$q = sprintf("insert into users (google_user_id, google_email, google_name, google_picture, google_access_token, created, modified) values ('%s','%s','%s','%s','%s',now(),now());",
    r($me->id),
    r($me->email),
    r($me->name),
    r($me->picture),
    r($me->access_token)); 
```

而且我不确定`r($me->id)`在做什么。“r”是干什么用的？

更详细的代码在这里：

```
 // get profile   
$params = array(
    'client_id' => CLIENT_ID,
    'client_secret' => CLIENT_SECRET,
    'code' => $_GET['code'],
    'redirect_uri' => SITE_URL.'redirect.php',
    'grant_type' => 'authorization_code'
);
$url = 'https://accounts.google.com/o/oauth2/token';

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($params));
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$rs = curl_exec($curl);
curl_close($curl);

$json = json_decode($rs);

$url = 'https://www.googleapis.com/oauth2/v1/userinfo?access_token='.$json->access_token;
$me = json_decode(file_get_contents($url));

// enter into DB

connectDb();

$q = sprintf("select * from users where google_user_id='%s' limit 1", r($me->id));
$rs = mysql_query($q);
$user = mysql_fetch_assoc($rs);

if (empty($user)) {
    $q = sprintf("insert into users (google_user_id, google_email, google_name, google_picture, google_access_token, created, modified) values ('%s','%s','%s','%s','%s',now(),now());",
        r($me->id),
        r($me->email),
        r($me->name),
        r($me->picture),
        r($me->access_token));
    $rs = mysql_query($q);
    $q = sprintf("select * from users where id=%d", mysql_insert_id());
    $rs = mysql_query($q);
    $user = mysql_fetch_assoc($rs);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T09:58:38.387

虽然无法确定，因为它不存在于代码中，但它被用于注入查询的 SQL 转义值......所以我的猜测是它已被定义为字符串转义函数之一的快捷别名. 例如

```
function r($s) {
    return mysql_real_escape_string($s);
} 
```

`mysql_real_escape_string`因为每次输入名字都会有点无聊。

转义可防止 SQL 注入攻击。参数化查询通常被认为是一种更可持续的解决方法，但在 PHP 中，这意味着更改为`mysqli`或 PDO 接口。

# visual-studio-2010 - Visual Studio 控制台 - 如何在调试期间禁用关闭错误 (F5)

> ID：10257909
> 
> 赞同：0
> 
> 时间：2012-04-21T09:54:00.880
> 
> 标签：visual-studio-2010, debugging, console

我读过很多帖子（可能还不够），其中用户说要添加

```
console.readline() 
```

或在 C++ 中

```
system("pause"); 
```

或类似的提示，以防止在应用程序引发异常后关闭控制台。有人谈论应用程序的最后一个代码行中的断点。

VS 2010中有一些项目属性设置来禁用这个东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:04:23.940

我对异常关闭控制台窗口的声明有点困惑。**它没有**。相反，当您在控制台应用程序中从 Visual Studio 中按 F5 并发生异常时，它会将您带到 Visual Studio 中发生异常的代码行。它不会关闭控制台窗口。
此外，如果您想在执行结束时暂停控制台窗口以便查看结果（如果您正在显示任何内容）`Console.ReadKey();`，请在程序结束时使用。例如

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
        Console.WriteLine("My Program Execution");
        Console.WriteLine("Some more messages");
        Console.ReadKey();
        }
    }
} 
```

在这个程序中，它将显示消息，然后等待用户按任意键。这将使您能够在控制台关闭之前查看输出。我不知道 Visual Studio 中的任何设置可能会阻止窗口关闭。
（您可以使用基本上用于从控制台获取输入的 ReadKey 或 ReadLine）

# jquery - 如何使用jquery解析json结果

> ID：10257913
> 
> 赞同：1
> 
> 时间：2012-04-21T09:54:57.440
> 
> 标签：jquery, html, ajax, json, jquery-append

我有以下 ajax 调用来调用 web 服务并取回 json 数据

```
$(document).ready(function () {
            $.ajax({
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                url: "Test.asmx/GetImages",
                success: function (msg) {
                    //var data = JSON.parse(msg); 
                    alert(msg.d);
                   $.each(msg.results, function (i, tweet) {
                        alert(msg.d);
                        $("#imagelist").append('<p><img src="' + tweet + '" />' + tweet + '</p>');
                    });
                }
            });
 }); 
```

我从 ajax 调用获得了以下 json 结果，我发现很难附加 img source 。

```
{"d":"[\r\n  {\r\n    \"imagepath\": \"images/01.jpg\"\r\n  },\r\n  {\r\n    \"imagepath\": \"images/02.jpg\"\r\n  },\r\n  {\r\n    \"imagepath\": \"images/03.jpg\"\r\n  },\r\n  {\r\n    \"imagepath\": \"images/04.jpg\"\r\n  }\r\n]"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:56:20.660

只需指定`dataType: 'json'`，jquery 会自动为您执行此操作

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 过多的 ORM POJO 领域模型类对 Java PermGen Space 有什么影响？有可用的指标吗？

> ID：10257917
> 
> 赞同：1
> 
> 时间：2012-04-21T09:55:36.763
> 
> 标签：java, hibernate, jpa, jvm, jooq

在像 Hibernate 等使用 JPA/ORM 时，通常定义 Java bean/POJO 来表示映射到相应 RDBMS 表的实体。但是，我正在尝试开发的平台涉及支持 200,000 个此类实体。如果我必须使用标准的 Spring MVC + Hibernate 模型，我最终可能会创建 200K 模型 POJO、200K DAO 类和另外 200K 左右的 JavaBeans，其中包含的数据格式可以在视图中显示。除了 Spring、Hibernate 和许多其他库所需的 Java 类之外，这相当于大约 60 万个 Java 类。假设每个 POJO Model 类有 10 个 String 实例变量及其对应的 getter/setter。现在我想知道加载所有这些类需要多少 PermGen 空间。

找到 PermGen Space 开销的最佳方法是什么？一个疯狂的想法是编写一个程序来生成这些 200K 类，加载它们（但不创建它们的实例）并运行分析器来识别“没有实例的类”指标以及如何获取它们的永久大小。

事实上，我也在寻找一个更简单的解决方案，它可以只使用 Field Vs Value Map 的 java.util.Map，其中 Field 包含有关 RDBMS 表/列映射和生成 JDBC CRUD 语句的元数据（例如[JOOQ.org](http://www.jooq.org)没有新类的开销）。

目标是运行节目而不必使用太多反射和加载太多只携带数据的类！

非常感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:08:38.197

正如您所建议的那样，影响将是 PermGen 空间很快就会耗尽，并且您会收到 OutOfMemoryException。对于这么多类，您很可能在启动应用程序之前使用默认的 JVM 设置就耗尽了内存。（有关估计内存中类的实际大小的帮助，请参阅[*The Java Specialists' Newsletter 的*](http://www.javaspecialists.eu/archive/Issue142.html)[第 142 期](http://www.javaspecialists.eu/archive/Issue142.html)*。）*

 *您当然可以通过命令行（例如`-XX:MaxPermSize=256M`. 但是，对于这么多类，您将需要数 GB 的 PermGen 空间。我们的应用程序使用了略多于 1K 的类，并且我们已经观察到 OOME，因此不得不将 PermGen 空间限制提高到 128M。更不用说维护这么多类将是一场噩梦......

因此，正如您得出的结论，最好找到一种替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:12:23.227

我认为实际上指出所需的总 perm gen 空间是非常困难的。当你继续使用它时，运行可视化 vm 或 jmap 可以指示加载的类的数量。我们还在处理一个如此庞大的应用程序，我们分配了大约 2048 MB 的 perm gen 空间，即使在那之后我们也遇到了限制。您可以尝试查看延迟加载，以便并非所有这些都处于活动状态，同时启动并运行，并结合使用 c3po。*

# .net - 如何通过 XAML 绑定值

> ID：10257928
> 
> 赞同：0
> 
> 时间：2012-04-21T09:57:41.083
> 
> 标签：.net, wpf, xaml, data-binding

我将 DataTable 值绑定到 ObservableCollection 并尝试将项目绑定到 ListView。

当我像这样通过 XAML 进行绑定时`ItemsSource="{Binding Collection}"`，它不会显示值，但是当我使用 C# 代码绑定值时，它会正确显示它们。

我找不到这种行为的原因。请提出解决方案...

**在 C# 代码中：**

```
// Declaration of the Observable Collection item.
ObservableCollection<DataTable> _observableCollection = new ObservableCollection<DataTable>();

public ObservableCollection<DataTable> Collection
{
    get { return _observableCollection; }
} 
```

**通过 C# 代码绑定数据：**

```
lstVw.ItemsSource = Collection; 
```

**在 XAML 中：**

```
<Grid>
   <ListView Name="lstVw" ItemsSource="{Binding Path=Collection}" Height="auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
       <ListView.View>
          <GridView>
               <GridViewColumn  Header="OrderID" Width="auto" >
                   <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Button Tag="{Binding OrderID}" Content="{Binding OrderID}"/>
                        </DataTemplate>
                   </GridViewColumn.CellTemplate>
               </GridViewColumn>
               <GridViewColumn Width="auto" DisplayMemberBinding="{Binding CustomerID}" Header="CustomerID" />
               <GridViewColumn Width="auto" DisplayMemberBinding="{Binding ProductID}" Header="ProductID" />
          </GridView>
      </ListView.View>
   </ListView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:31:35.893

你有两个选项来解决这个问题，第一个将 DataContext 设置为窗口或用户控件，第二个在绑定处使用元素名称。

这是第二个解决方案

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="WpfApplication6.MainWindow"
    x:Name="myWindow"
    Title="MainWindow"
    Width="640" Height="480">

  <Grid>
   <ListView Name="lstVw" ItemsSource="{Binding Path=Collection, ElementName=myWindow}" Height="auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
       <ListView.View>
          <GridView>
               <GridViewColumn  Header="OrderID" Width="auto" >
                   <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Button Tag="{Binding OrderID}" Content="{Binding OrderID}"/>
                        </DataTemplate>
                   </GridViewColumn.CellTemplate>
               </GridViewColumn>
               <GridViewColumn Width="auto" DisplayMemberBinding="{Binding CustomerID}" Header="CustomerID" />
               <GridViewColumn Width="auto" DisplayMemberBinding="{Binding ProductID}" Header="ProductID" />
          </GridView>
      </ListView.View>
   </ListView>
  </Grid>

</Window> 
```

希望这可以帮助

# css - 如何在 CSS 中创建文本叠加层？

> ID：10257929
> 
> 赞同：3
> 
> 时间：2012-04-21T09:57:44.050
> 
> 标签：css, overlay

我希望创建类似于此[链接](http://www.a2zdotnet.com/test/metro.htm)的文本覆盖。如果你看到它，文本的颜色与 div 颜色形成对比，给人的感觉是文本被主 div 颜色的某些外层覆盖。我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T09:59:47.720

我为您使用了[Chrome Inspector](http://www.threetipsaday.com/2008/12/debug-inspect-google-chrome-inspector/)。这是数字的一种风格：

```
.metro .count {
    /*...*/
    color: rgba(0, 0, 0, 0.20);
} 
```

您可以自己检查一下，只需：

*   在 Chrome 中，右键单击数字并检查元素
*   在 Firefox 中，使用[Firebug](http://getfirebug.com/)
*   在 Internet Explorer（版本 8+）中按 F12
*   其他浏览器也有它们的等价物

[`rgba()`在此处阅读有关 CSS3的信息](http://www.css3.info/preview/rgba/)

> 这个属性名称中的“a”代表，你猜对了：alpha。这个新功能允许我们指定颜色的不透明度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:00:17.913

该页面使用半透明阴影（[`text-shadow`](https://developer.mozilla.org/en/CSS/text-shadow)规则）来有效地使文本周围的背景颜色变暗。这是他们使用的 CSS

```
text-shadow: 0 1px rgba(0, 0, 0, 0.3); 
```

`rgba(0, 0, 0, 0.3)`解析为不透明度为 30% 的黑色。

# linux - 如何在 w3m 中设置用户代理

> ID：10257932
> 
> 赞同：4
> 
> 时间：2012-04-21T09:57:51.940
> 
> 标签：linux, browser, user-agent, agent, w3m

我正在使用[w3m](http://w3m.sourceforge.net)。我如何去覆盖这个基于文本的网络浏览器的用户代理？我曾尝试设置 -header "User-Agent: blah" 作为示例，但出现以下错误：

```
w3m: Can't load blah. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:42:29.333

`~/.w3m/config`我通过修改文件和修改行来设置用户代理`user_agent`。我有以下文字，它似乎按预期工作：`user_agent Mozilla/5.0 (Linux i686; U; w3m 0.5.3; en)`。它没有 : 或 = 符号，只是为了让您了解所使用的语法。

这是 w3m 0.5.3 版。

您也可以设置它，`w3m -header 'User-Agent: blah'`但问题是它在请求中出现两次。如果您设置了 netcat “webserver”，您可以看到 w3m 使用的标头：

```
$ netcat -lp 9999
# then in another terminal:
$ w3m -header 'User-Agent: foo' http://localhost:9999
# back at netcat:
GET / HTTP/1.0
User-Agent: w3m/0.5.3
Accept: text/html, text/*;q=0.5, image/*
Accept-Encoding: gzip, compress, bzip, bzip2, deflate
Accept-Language: en;q=1.0
Host: localhost:9999
User-Agent: foo 
```

所以它发送了 2 个 User-Agent 字符串，这些字符串可能无法被真实的 HTTP 服务器正确解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-10T14:48:31.017

要更新和澄清@richq 的好答案中的几点：

*   新的 w3m 安装只创建一个空的配置文件夹 (~/.w3m)
*   在用户代理字符串 (UA) 中没有 ':' 或 '=' 是无关紧要的（w3m 发送该行上的任何内容）
*   确认使用 -header 选项发送第二个 UA 是一个坏主意（并且不必要）
*   设置 UA 的快速单行方法是：

    `echo 'user_agent <my-UA>' > ~/.w3m/config`（将所需的 UA 粘贴到 上`<my-UA>`）

*   检查收到的 UA 更简单的方法是简单地抓取一个免费的 UA 站点页面，例如。

    `w3m whatsmyuseragent.com -dump`（在屏幕上阅读 UA。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T15:47:31.720

```
w3m whatsmyua.info -o user_agent='Mozilla/5.0 (Linux i686; U; w3m 0.5.3; en)' 
```

或者

```
echo -e '"Mozilla/5.0 (Linux i686; U; w3m 0.5.3; en)"\n"Mozilla/5.0 (Linux x86_64; U; w3m 0.5.3; en)"' >.ua

w3m whatsmyua.info -o user_agent="$(shuf -n1 .ua)" 
```

# javascript - HTML 画布放大

> ID：10257934
> 
> 赞同：2
> 
> 时间：2012-04-21T09:58:09.357
> 
> 标签：javascript, canvas

我正在设计一个非常基本的动画，其中有几个圆圈在 HTML5 画布中移动。我目前正在使用 jCanvaScript 库来简化它（我需要将不同的形状组合在一起并同步动画它们）

我需要能够放大和缩小并在画布内移动。我见过很多库（包括 jCanvaScript），它们都有一个 .scale() 和 .translate() 函数，可以转换画布中的一个形状，但我需要的是一个全局的，它作用于所有画布内的形状。真的似乎没有图书馆提供这个......

理想的解决方案是类似于 Raphaël.js 库中的 setViewPoint(x,y,width,height) 函数。

你知道我怎么能做到这一点吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T09:25:00.973

你应该看看这个： `http://www.html5canvastutorials.com/kineticjs/html5-canvas-select-shapes-by-name-with-kineticjs/` 希望 kineticjs 会帮助你。

# python - 将表格表示为矩阵

> ID：10257935
> 
> 赞同：2
> 
> 时间：2012-04-21T09:58:26.523
> 
> 标签：python, database-design, data-structures, matrix

假设我有一个包含 3 个字段的数据库表：字符串标题、int A、int B。A 和 B 的范围都是 1 到 500。
我想将部分值表示为 5x5 矩阵。这样 (1, 1) 将是 A 和 B 都最低的字符串；(5, 5) 将具有最高的 A 和 B；(1, 5) 将具有最低的 A 和最高的 B。依此类推。
我应该使用哪种算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:22:00.837

你有

```
title  A  B
one    1  1
two    1  2
three  2  1
four   3  3
five   4  4
six    5  5
seven  5  1
eight  1  5 
```

等等...？

减少到一个 3x3 矩阵，它看起来像

```
a/b  1     2    3  
1   one   two  eight    
2   three four  ?
3   seven  ?   six 
```

问题是，(2,2) 指向什么？平均值？好的，在 5x5 矩阵中？您的定义缺少一些信息。

上述矩阵的算法将是：

1.  为 A 和 B 计算 min、max、avg
2.  向数据库询问元组 (Amin, Bmin), (Aavg, Bmin), (Amax, Bmin) 等等
3.  将值填充到矩阵中

附加：如果没有匹配项，请尝试最小值、最大值和平均值的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:16:43.417

我在这里设置了一个模拟，评论将描述这些步骤。

首先我生成一些数据：一系列元组，每个元组包含一个字符串和两个随机数，分别代表分数 A 和 B。

接下来，我将 A 和 B 的范围划分为五个等距的 bin，每个 bin 代表一个单元格的最小值和最大值。

然后我串行查询数据集以提取每个单元格中的字符串。

根据您使用的实际数据结构和存储，有一百种优化方法。

```
from random import random

# Generate data and keep record of scores
data = []
a_list = []
b_list = []
for i in range(50):
    a = int(random()*500)+1
    b = int(random()*500)+1
    rec = { 's' : 's%s' % i,
            'a' : a,
            'b' : b
             }
    a_list.append(a)
    b_list.append(b)
    data.append(rec)

# divide A and B ranges into five bins

def make_bins(f_list):
    f_min = min(f_list)
    f_max = max(f_list)
    f_step_size = (f_max - f_min) / 5.0
    f_steps = [ (f_min + i * f_step_size,
                 f_min + (i+1) * f_step_size)
                for i in range(5) ]
    # adjust top bin to be just larger than maximum
    top = f_steps[4]
    f_steps[4] = ( top[0], f_max+1 )
    return f_steps

a_steps = make_bins(a_list)
b_steps = make_bins(b_list)

# collect the strings that fit into any of the bins
# thus all the strings in cell[4,3] of your matrix
# would fit these conditions:
# string would have a Score A that is
# greater than or equal to the first element in a_steps[3]
# AND less than the second element in a_steps[3]
# AND it would have a Score B that is
# greater than or equal to the first element in b_steps[2]
# AND less than the second element in a_steps[2]
# NOTE: there is a need to adjust the pointers due to
#       the way you have numbered the cells of your matrix

def query_matrix(ptr_a, ptr_b):
    ptr_a -= 1
    from_a = a_steps[ptr_a][0]
    to_a = a_steps[ptr_a][1]

    ptr_b -= 1
    from_b = b_steps[ptr_b][0]
    to_b = b_steps[ptr_b][1]

    results = []
    for rec in data:
        s = rec['s']
        a = rec['a']
        b = rec['b']
        if (a >= from_a and
            a < to_a and
            b >= from_b and
            b < to_b):
            results.append(s)
    return results

# Print out the results for a visual check
total = 0
for i in range(5):
    for j in range(5):
        print '=' * 80
        print 'Cell: ', i+1, j+1, ' contains: ',
        hits = query_matrix(i+1,j+1)
        total += len(hits)
        print hits
print '=' * 80
print 'Total number of strings found: ', total 
```

# c# - 如何从父页面搜索位于用户控件中的 GridView？

> ID：10257938
> 
> 赞同：0
> 
> 时间：2012-04-21T09:58:55.563
> 
> 标签：c#, asp.net, webforms, web-controls

我的网页中有一个占位符，我将用户控件动态绑定到它。

我尝试遍历占位符内的所有控件并获取控件 ID，这是我的用户控件的 ID。控件 ID 基本上是我的用户控件的名称，带有下划线；因此，如果我的用户控件的名称是 dynamicControl.ascx，那么在我的 control.ID 中，我会得到 ASP.dynamicControl_ascx。现在我需要再次加载我的用户控件吗？如果是这样，我该怎么做，如何键入强制转换，以及如何在我的用户控件中找到 gridview？

用户控件是一个网格视图，我需要检索在控件内的文本框中输入的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:14:21.260

这里需要几个步骤/概念......

1.  了解页面生命周期并了解在何处/何时绑定您的动态组件。通常这可以通过在 Page_Init 中进行绑定来完成，以便它们出现在回发视图状态绑定中。如果没有这种考虑，您的网格可能不存在，并且如果存在，大多数情况下将始终为空。有时无法将绑定移动到 Page_Init 中......在这些情况下，应该在 Biding Dynamic Controls 上搜索。有大量示例说明如何解决在回发时返回动态内容的各种方法。

2.  无需遍历子控件列表 - 查看 FindControl。假设创建时为网格分配了“MyGrid”的 ID，并且用户控件被命名为 MyUserControl... 在回发时定位网格（假设处理了上面第一个中的视图状态问题） - 您可以简单地使用： `grid = MyUserControl.FindControl("MyGrid")`

当然，如果没有返回网格对象，则 MyGrid 不存在。

希望这可以帮助.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:50:30.053

这将帮助你 [http://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-cs](http://www.asp.net/web-forms/tutorials/master-pages/control-id-naming-in-content-pages-cs)

这样我就能够找到动态添加的控制值。只需要提供您要查找的控件 ID。这里我的面板 id 是**plnall**，文本框 id 是**txt_id**，**cplacehld**是内容占位符 id，**ctl00** 是母版页 id

```
MasterPage ctl00 = FindControl("ctl00") as MasterPage;

            ContentPlaceHolder cplacehld = ctl00.FindControl("ContentPlaceHolder2") as ContentPlaceHolder;
 Panel panel1 = cplacehld.FindControl("plnall") as Panel;
 TextBox txt = cplacehld.FindControl("txt_id") as TextBox;
                    value = txt.Text; 
```

# mysql - mysql语法版本错误

> ID：10257945
> 
> 赞同：-1
> 
> 时间：2012-04-21T10:00:08.997
> 
> 标签：mysql

我目前正在尝试安装一个名为“phpBMS”的脚本，尽管我遇到了这个错误：

```
 Error Processing file 'createtables.sql' on line 43: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(14) NOT NULL,

      SQL Statement: 'CREATE TABLE menu (
      id int(11) NOT NULL auto_increment,
      `uuid` varchar(64) NOT NULL,
      name varchar(64) NOT NULL default '',
      link varchar(128) NOT NULL default '',
      parentid varchar(64) default '',
      displayorder int(11) NOT NULL default '0',
      createdby int(11) NOT NULL default '0',
      modifiedby int(11) default '0',
      creationdate datetime NOT NULL default '0000-00-00 00:00:00',
      modifieddate timestamp(14) NOT NULL,
      `roleid` VARCHAR(64),
      PRIMARY KEY  (id),
      UNIQUE KEY (`uuid`)
    ) ENGINE=INNODB ; 
```

有人提到语法与我的 MySQL 服务器版本不对应。我目前正在使用 MySQL 5.5。

有没有人知道我该如何解决这个问题或者正确的语法是什么？一些建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:01:28.327

```
timestamp(14) 
```

应该

```
timestamp 
```

# prolog - 在 Prolog 中表达“交换性”的替代方法？

> ID：10257947
> 
> 赞同：8
> 
> 时间：2012-04-21T10:00:28.013
> 
> 标签：prolog, commutativity

作为 Prolog 的初学者，我发现 Prolog 中的交换表达式非常不直观。

例如，如果我想表达 X 和 Y 在一个家庭中，例如：

```
family(X,Y) :-
      married(X,Y);
      relative(X,Y);
      father_son(X,Y). 
```

我还应该在定义中添加以下内容，以使其“可交换”：

```
 married(Y,X);
      relative(Y,X);
      father_son(Y,X). 
```

但是我们使用 Prolog，因为我们想编写优雅的代码……所以，我希望在原始代码中只添加一行（而不是上面的三行）：

```
 family(Y,X). 
```

这是要点。它导致终止！为什么 prolog 不那么“合乎逻辑”？是否有替代这种简洁的单行表达式不会导致终止的替代方法？

周末愉快！瓦

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T10:13:26.550

部分规则的问题`family(X,Y) :- family(Y,X).`在于，它在每一层都无条件地与自身统一，并且不断地向下递归；此递归没有退出条件。

*您应该在上面*的级别进行参数交换：

```
family(X,Y) :-
    is_family(X,Y);
    is_family(Y,X).

is_family(X,Y) :-
    married(X,Y);
    relative(X,Y);
    father_son(X,Y). 
```

或者，您可以在有意义的情况下使基本规则*低于对称：*

```
is_married(X,Y) :-
    married(X,Y);
    married(Y,X).

is_relative(X,Y) :-
    relative(X,Y);
    relative(Y,X). 
```

`family`您现在可以按如下方式重写您的规则：

```
family(X,Y) :-
    is_married(X,Y);
    is_relative(X,Y);
    father_son(X,Y);
    father_son(Y,X). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:06:03.573

怎么样：

```
relatives(X,Y) :-
  married(X,Y);
  relative(X,Y);
  father_son(X,Y).

family(X,Y) :-
  relatives(X,Y);
  relatives(Y,X). 
```

# javascript - 客户端断开连接后的服务器清理

> ID：10257958
> 
> 赞同：20
> 
> 时间：2012-04-21T10:02:49.760
> 
> 标签：javascript, meteor

有没有办法通过刷新或导航离开页面来检测客户端何时与流星服务器断开连接，以便服务器可以尝试进行一些清理？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T02:40:55.417

一种技术是实现每个客户端定期调用的“keepalive”方法。这假设您`user_id`在每个客户的`Session`.

```
// server code: heartbeat method
Meteor.methods({
  keepalive: function (user_id) {
    if (!Connections.findOne(user_id))
      Connections.insert({user_id: user_id});

    Connections.update(user_id, {$set: {last_seen: (new Date()).getTime()}});
  }
});

// server code: clean up dead clients after 60 seconds
Meteor.setInterval(function () {
  var now = (new Date()).getTime();
  Connections.find({last_seen: {$lt: (now - 60 * 1000)}}).forEach(function (user) {
    // do something here for each idle user
  });
});

// client code: ping heartbeat every 5 seconds
Meteor.setInterval(function () {
  Meteor.call('keepalive', Session.get('user_id'));
}, 5000); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-20T03:13:16.933

我认为更好的方法是在发布函数中捕获套接字关闭事件。

```
Meteor.publish("your_collection", function() {
    this.session.socket.on("close", function() { /*do your thing*/});
} 
```

更新：

较新版本的流星使用 _session 如下：

```
this._session.socket.on("close", function() { /*do your thing*/}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-12T21:09:14.733

我已经实现了一个 Meteor 智能包，它可以跟踪来自不同会话的所有连接会话，并检测会话注销和断开连接事件，而无需昂贵的保活。

> [https://github.com/mizzao/meteor-user-status](https://github.com/mizzao/meteor-user-status)

要检测断开/注销事件，您只需执行以下操作：

```
UserStatus.on "connectionLogout", (info) ->
  console.log(info.userId + " with session " + info.connectionId + " logged out") 
```

您也可以被动地使用它。看看这个！

**编辑：** `v0.3.0`用户状态现在也跟踪空闲的用户！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T09:17:00.793

如果您使用 Auth，您可以在 Method 和 Publish 功能中访问用户 ID，您可以在那里实现您的跟踪。例如，您可以在用户切换房间时设置“最后一次看到”：

```
Meteor.publish("messages", function(roomId) {
    // assuming ActiveConnections is where you're tracking user connection activity
    ActiveConnections.update({ userId: this.userId() }, {
        $set:{ lastSeen: new Date().getTime() }
    });
    return Messages.find({ roomId: roomId});
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-05-21T16:33:20.787

我正在使用[Iron Router](https://github.com/iron-meteor/iron-router)`unload`并在我的主控制器发生事件时调用我的清理代码。当然这不会捕捉到标签关闭的事件，但对于许多用例来说仍然感觉足够好

```
ApplicationController = RouteController.extend({
    layoutTemplate: 'root',
    data: {},
    fastRender: true,
    onBeforeAction: function () {
        this.next();
    },
    unload: function () {
        if(Meteor.userId())
            Meteor.call('CleanUpTheUsersTrash');
    },
    action: function () {
        console.log('this should be overridden by our actual controllers!');
    }
}); 
```

# vb.net - 使用不包括标题记录的 CSV 文件填充 DataGridView

> ID：10257959
> 
> 赞同：3
> 
> 时间：2012-04-21T10:02:52.027
> 
> 标签：vb.net, csv, datagridview

下面的代码将我的 CSV 文件导入数据网格。唯一的问题是它使用 CSV 文件中的一行填充标题，我希望标题留空并在其后导入行。请指教。

```
 If OpenFileDialog1.ShowDialog(Me) = DialogResult.OK Then

        Dim fi As New FileInfo(OpenFileDialog1.FileName)
        Dim sConnectionStringz As String = "Provider=Microsoft.Jet.OLEDB.4.0;Extended Properties=Text;Data Source=" & fi.DirectoryName
        Dim objConn As New OleDbConnection(sConnectionStringz)
        objConn.Open()
        'DataGridView1.TabIndex = 1
        Dim objCmdSelect As New OleDbCommand("SELECT * FROM " & fi.Name, objConn)
        Dim objAdapter1 As New OleDbDataAdapter
        objAdapter1.SelectCommand = objCmdSelect
        Dim objDataset1 As New DataSet
        objAdapter1.Fill(objDataset1, "test")
        '--objAdapter1.Update(objDataset1) '--updating
        DataGridView1.DataSource = objDataset1.Tables(0).DefaultView

        objConn.Close()
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:57:41.770

想到了两个想法，当在**grid_ColumnAdded 事件处理程序中添加列时，只需将标题单元格清空**

```
 if e.Column.HeaderText = "YourColumnHeaderText" Then        
     e.Column.HeaderText = String.Empty; 
```

或者使用流式阅读器读取 CSV 文件可能更容易，参考： http: [//www.dotneter.com/import-csv-file-into-datagridview](http://www.dotneter.com/import-csv-file-into-datagridview)（注意我会加载到数据表中而不是直接填充网格） ：

```
Dim streamReader As System.IO.StreamReader = New StreamReader(txtPath.Text)

'Reading CSV file header
rowValue = streamReader.ReadLine()
cellValue = rowValue.Split(","C)
Dim i As Integer = 0
While i <= cellValue.Count() - 1
    Dim column As New DataGridViewTextBoxColumn()
    column.Name = cellValue(i)
    column.HeaderText = cellValue(i)
    dataGridView1.Columns.Add(column)
    i += 1
End While

'Reading CSV file content
While streamReader.Peek() <> -1
    rowValue = streamReader.ReadLine()
    cellValue = rowValue.Split(","C)
    dataGridView1.Rows.Add(cellValue)
End While 
```

最后一个想法是在分配给网格数据源之前从数据表中删除一行：http: [//msdn.microsoft.com/en-us/library/feh3ed13 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/feh3ed13(v=vs.80).aspx)

objDataset1.Tables(0).Rows[0].Delete();

# android - 关于共同偏好的讨论

> ID：10257961
> 
> 赞同：-2
> 
> 时间：2012-04-21T10:03:01.067
> 
> 标签：android, eclipse

我正在*24 小时内为 Sams Android Development*学习 Android 开发。我正在实现一个名为 theredone 的游戏，其中包含以下活动：

`quizactivity`, `splashactivity`, `gameactivity`, `menuactivity`, `settingsactivity`, `helpactivity`. `splashactivity`延伸`quizactivity`而`quizactivity`延伸`Activity`。

我`SharedPreferences`在`quizactivity.java`.

```
package com.androidbook.triviaquiz6;

import android.app.Activity;
import android.content.SharedPreferences;

public class QuizActivity extends Activity {
    public static final String GAME_PREFERENCES = "GamePrefs";

    private SharedPreferences myPrefs; //Syntax error on token ";", { expected after this token -//----------------------------

   myPrefs = Actionactivity.this.getSharedPreferences("myPrefs", MODE_WORLD_WRITEABLE);
   SharedPreferences.Editor prefsEditor = myPrefs.edit(); 
   prefsEditor.putString("key name", "key valuse"); 
   prefsEditor.commit(); 

   //this one to read data  
    myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE); 

    myPrefs.getString("key name", "") ;
}//Syntax error, insert "}" to complete ClassBody ----------------------- 
```

你能帮我吗？我不认为这是一个愚蠢的qs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T10:24:00.833

您正在引用`Actionactivity`活动中的`QuizActivity`活动。Actionactivity 尚未实例化，您正在`getSharedPreferences`使用它打开一个。

getSharedPreferences 方法属于上下文方法，对于当前活动，您可以引用`this`实例来调用此`getSharedPreferences`方法。

如果您不想使用活动的上下文，那么您可以`application context`通过调用来使用`getApplicationContext()`.

有关偏好的更多信息，您可以参考[这里](https://stackoverflow.com/a/5950109/630668)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:05:06.207

您可以使用以下代码作为共享首选项的参考::::并且在您的代码中您没有 oncreate 方法

```
//Retrive value from SharedPreference
SharedPreferences preferences = getApplicationContext().getSharedPreferences(GAME_PREFERENCES , android.content.Context.MODE_WORLD_WRITEABLE);
String value =  preferences.getString(key, null);

//Save value in SharedPreference
SharedPreferences preferences = getApplicationContext().getSharedPreferences(GAME_PREFERENCES , android.content.Context.MODE_WORLD_WRITEABLE);
SharedPreferences.Editor editor = preferences.edit();
editor.putString(key, value);
editor.commit(); 
```

更新：：：

```
package com.androidbook.triviaquiz6;

import android.app.Activity;
import android.content.SharedPreferences;

public class QuizActivity extends Activity {
    public static final String GAME_PREFERENCES = "GamePrefs";
    private SharedPreferences myPrefs;
    protected void onCreate(Bundle savedInstanceState) {
    ....

    //this one data set in SharedPreferences file

    myPrefs = Actionactivity.this.getSharedPreferences("myPrefs", MODE_WORLD_WRITEABLE);
    SharedPreferences.Editor prefsEditor = myPrefs.edit();
    prefsEditor.putString("ket name", "key valuse");
    prefsEditor.commit();

    }
} 
```

# wpf - 聚焦时清除文本框

> ID：10257963
> 
> 赞同：3
> 
> 时间：2012-04-21T10:03:16.623
> 
> 标签：wpf, mvvm, textbox

聚焦时如何清除我的文本框？我想以 MVVM 方式执行此操作。如果它有意义 - 我的 TextBox 控件具有与 ViewModel 中的某些属性绑定的 Text 属性。TextBox 显示“50,30 zł”之类的东西。用户选择文本、删除文本和编写新文本很不舒服，所以我想在 Texbox 聚焦时清除旧文本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T11:27:26.717

您可以编写自己的行为甚至控制。我将尝试解释第一个：

首先，您应该添加对*System.Windows.Interactivity*程序集的引用。

然后创建一个类（这将是行为）并从*System.Windows.Interactivity.Behavior< System.Windows.Controls.TextBox>*派生它，其中模板化（通用类型）参数是一个应该按照我描述的行为的控件。

例如：

```
class ClearOnFocusedBehavior : System.Windows.Interactivity.Behavior<System.Windows.Controls.TextBox>
{
    private readonly RoutedEventHandler _onGotFocusHandler = (o, e) =>
                                                        {
                                                            ((System.Windows.Controls.TextBox) o).Text =
                                                                string.Empty;
                                                        };

    protected override void OnAttached()
    {
        AssociatedObject.GotFocus += _onGotFocusHandler;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.GotFocus -= _onGotFocusHandler;
    }
} 
```

接下来，将以下引用声明放在 xaml 的父窗口中

```
<Window x:Class="ManagementSolution.Views.UpdatePersonsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity">
    //namespace with ur behaviors
    xmlns:behaviors="clr-namespace:ManagementSolution.Helper.Behaviours"
    //...
</Window> 
```

最后将行为添加到适当的 UI 元素（在我们的例子中为 TextBox）：

```
<TextBox x:Name="PersonFirstNameTextBox"
             Grid.Column="1"
             Margin="5,0"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Center"
             Style="{StaticResource TextBoxValidationStyle}"
             TextWrapping="Wrap"
             d:LayoutOverrides="Width, Height">
        //behavior added as the content
        <i:Interaction.Behaviors>   
            <behaviors:ClearOnFocusedBehavior /> 
        </i:Interaction.Behaviors>
        <TextBox.Text>
            <Binding Path="PersonFirstName"
                     UpdateSourceTrigger="PropertyChanged"
                     ValidatesOnDataErrors="True">
                <!--
                    <Binding.ValidationRules>
                    <rules:SingleWordNameValidationRule />
                    </Binding.ValidationRules>
                -->
            </Binding>
        </TextBox.Text>
    </TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T06:52:20.703

文本框1.清除（）；

它清除文本框中的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T10:10:15.080

@Dmitry Martovoi 给出了很好的回答。

这是相同的解决方案，使用附加属性（而不是混合行为）。附加行为使 XAML 更简单，但 C# 更简单，而 Blend 行为则相反。

XAML：

添加`behaviors:MyTextBox.MyClearOnFocusedIfTextEqualsSearch="True"`到 TextBox 以使其在收到焦点时自行清除，并且它包含`Search`.

```
<Window x:Class="MyApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:behaviors="clr-namespace:MyApp">
    <StackPanel Margin="10">
        <!-- GotFocus="TextBox_GotFocus" -->
        <TextBox x:Name="MyTextBox" 
                 behaviors:MyTextBox.MyClearOnFocusedIfTextEqualsSearch="True" 
                 HorizontalAlignment="Left" 
                 Text="Search" 
                 MinWidth="96" ></TextBox>  
    </StackPanel>
</Window> 
```

和附加的财产：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;

namespace MyApp
{
    public class MyTextBox : DependencyObject
    {
        public static readonly DependencyProperty MyClearOnFocusedIfTextEqualsSearchProperty = DependencyProperty.RegisterAttached(
            "MyClearOnFocusedIfTextEqualsSearch",
            typeof (bool),
            typeof(MyTextBox),
            new PropertyMetadata(default(bool), PropertyChangedCallback));

        private static void PropertyChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
        {
            var textBox = dependencyObject as TextBox;
            if (textBox != null)
            {
                if ((bool)dependencyPropertyChangedEventArgs.NewValue == true)
                {
                    textBox.GotFocus += textBox_GotFocus;
                }
            }
        }

        private static void textBox_GotFocus(object sender, RoutedEventArgs e)
        {
            var textBox = sender as TextBox;
            if (textBox != null)
            {
                if (textBox.Text.ToLower() == "search")
                {
                    textBox.Text = "";
                }
            }
        }

        public static void SetMyClearOnFocusedIfTextEqualsSearch(DependencyObject element, bool value)
        {
            element.SetValue(MyClearOnFocusedIfTextEqualsSearchProperty, value);
        }

        public static bool GetMyClearOnFocusedIfTextEqualsSearch(DependencyObject element)
        {
            return (bool)element.GetValue(MyClearOnFocusedIfTextEqualsSearchProperty);
        }
    }
} 
```

我花了几分钟来写这个附加的行为。ReSharper 有一个很棒的宏来执行此操作，如果您键入`attachedProperty`，它将为您填写大部分代码。

# iphone - xcode - 使用“activityIndi cator”从服务器重新调用 xml

> ID：10257965
> 
> 赞同：0
> 
> 时间：2012-04-21T10:03:33.233
> 
> 标签：iphone, objective-c, xml, xcode

我正在使用 xCode 4.3.2。在这个项目中，当我通过单击按钮调用“reloadXMLdata”时，它没有显示activityIndi​​cator，在加载时它看起来像“挂起”，几秒钟后它会填充数据。如何在加载时显示 activityIndi​​cator？你能帮我解决这个问题吗？

```
-(void)loadXML
{
    NSString *urlAddress = [NSString stringWithFormat:@"my_xml_url"];    
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    [xmlParser setDelegate:self];
    BOOL success = [xmlParser parse];

    if(success)
    {
        [self.activityIndicator setHidden:TRUE];
        [self.activityIndicator stopAnimating];
        [dataTable reloadData];
    }
    else
    NSLog(@"Error!!!");
}

-(IBAction)reloadXMLdata:(id) sender
{
    [self.activityIndicator setHidden:FALSE];
    [self.activityIndicator startAnimating];
    [self loadXML];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:18:51.540

问题是您在调用时阻塞了 UI，`loadXML`并且活动指示器没有机会显示。所以尝试像这样使用[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)：

```
-(IBAction)reloadXMLdata:(id) sender
{
    [self.activityIndicator setHidden:FALSE];
    [self.activityIndicator startAnimating];
    [self loadXML];
}

-(void)loadXML
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSString *urlAddress = [NSString stringWithFormat:@"my_xml_url"];    
        NSURL *url = [NSURL URLWithString:urlAddress];
        NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
        [xmlParser setDelegate:self];
        BOOL success = [xmlParser parse];

        if(success) {
            dispatch_async(dispatch_get_main_queue(), ^{
                [self.activityIndicator setHidden:TRUE];
                [self.activityIndicator stopAnimating];
                [dataTable reloadData];
            });
        } else {
            NSLog(@"Error!!!");
        }
    });
} 
```

# c# - 如何在 c# 中使用 getItemInfo() 在 xml 文件中获取歌曲名称而不是 od 标题

> ID：10257966
> 
> 赞同：0
> 
> 时间：2012-04-21T10:03:33.967
> 
> 标签：c#, media-player

我正在从 c#.net 为我的歌曲文件夹中的所有歌曲创建一个 xml 文件。我的代码如下：

```
 Microsoft.MediaPlayer.Interop.IWMPMedia mediafilesinformation = plist.get_Item(i);
                   mediafilesinformation = obj_wmp.newMedia(filepath);
                    Filename = mediafilesinformation.getItemInfo("SourceURL");
                    Tracknumber = mediafilesinformation.getItemInfo("WM/TrackNumber");
                    Genre = mediafilesinformation.getItemInfo("WM/Genre");
                    Album = mediafilesinformation.getItemInfo("WM/AlbumTitle");
                    Artist = mediafilesinformation.getItemInfo("Artist");
                    Name = mediafilesinformation.getItemInfo("Name");
                    Duration = double.Parse(mediafilesinformation.getItemInfo("Duration")); 
```

我在名称中获得了歌曲的标题，但我必须获得歌曲的名称。请建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:07:14.830

如果您需要，属性中的 Name 属性指向 FileName，然后您可以使用文件路径字符串。

```
string fileName = Path.GetFileName(filepath); 
```

您还可以打印出所有属性，调试它们并查看属性所持有的值。使用[Media.getAttributeName 方法](http://msdn.microsoft.com/en-us/library/dd563844%28VS.85%29.aspx)。来自同一链接的示例如下：

```
// Store the current media object.
var cm = Player.currentMedia;

// Get the number of attributes for the current media. 
var atCount = cm.attributeCount;

// Loop through the attribute list.
for(var i=0; i < atCount; i++){

   // Print each attribute index and name.   
   myText.value += "Attribute " + i +": ";
   myText.value += cm.getAttributeName(i);
   myText.value += "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:24:04.090

按照这些参考链接和代码片段..希望这有帮助

参考：[在不实际播放剪辑的情况下获取音频或视频剪辑的持续时间](http://groups.google.com/group/microsoft.public.windowsmedia.sdk/browse_thread/thread/888aa90cf4bdd23d/627924eacd07cab1)

```
Microsoft.MediaPlayer.Interop.IWMPMedia m = Player.newMedia(fileName);

string currentArtist = m.getItemInfo("Author").Trim();
string currentAlbum = m.getItemInfo("Album").Trim();
string currentTitle = m.getItemInfo("Title").Trim();
double duration = m.duration; 
```

参考：[链接](http://forums.asp.net/t/451466.aspx/1)

```
Microsoft.MediaPlayer.Interop.IWMPPlaylist plist; 
plist = x.mediaCollection.getAll();                        

for(int i=0; i < plist.count;i++) 
{ 
        Microsoft.MediaPlayer.Interop.IWMPMedia elem = plist.get_Item(i); 

        Response.Write(string.Format("{1} - {2} - {3} - {4} - {5}
", 
                elem.sourceURL, 
                elem.name, 
                elem.getItemInfo("MediaType"), 
                elem.getItemInfo("FileType"), 
                elem.getItemInfo("WM/TrackNumber"), 
                elem.getItemInfo("Author"), 
                elem.getItemInfo("Title") 
        )); 
} 
```

# jsf-2 - 将 Jsf 应用程序集成到 Liferay

> ID：10257967
> 
> 赞同：0
> 
> 时间：2012-04-21T10:03:41.657
> 
> 标签：jsf-2, liferay, liferay-6

我正在开发一个 JSF 2.0（使用 primefaces 3.2）应用程序，我想将我的 JSF 应用程序集成到 Liferay 中。我是 Liferay 的新手，要求应用程序可以通过 Liferay 进入。

这意味着用户将登录，这应该通过 Liferay 进行。然后正如我在liferay 'Liferayhomepage' 登录后在liferay 基本视频中看到的那样。

现在请指导我，在该主页内或登录后，我应该能够看到我正在开发的 JSF 应用程序（你可以说我的应用程序将是 liferay 中的一个 portlet）对吗？并且应该能够根据您在 Liferay 中应用的“角色”进行导航。我怎样才能做到这一点？

> 第二个问题是，一旦我进入我的 JSF 应用程序，我肯定需要唯一的“userId”来执行数据库中数据的插入和检索。如何在我的 JSF 应用程序中使用它？如果有人可以用一个简单的例子来解释，那将非常有帮助，因为这就是我卡住的地方。请帮帮我。
> 
> 简而言之，是否可以通过 liferay 调用单独的 JSF 应用程序？在这里，我通过 liferay 提供入口，因为 liferay 提供“角色”，因此一旦通过 liferay 登录，他应该能够根据角色（如管理员、高级用户等）进入我的 JSF 应用程序。（这正是我想要做）

如果有人需要对我的问题进行更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:13:33.823

正如马克已经提到的，您可以在这里找到 jsf portlet 示例（也带有 primefaces）[http://www.liferay.com/community/liferay-projects/liferay-faces/demos](http://www.liferay.com/community/liferay-projects/liferay-faces/demos)

在您的 jsf portlet 中，您可以通过以下方式获取用户对象（包含角色）：

```
public static User getCurrentUser(){
    User u = null;
    FacesContext fc = FacesContext.getCurrentInstance();
    ExternalContext externalContext = fc.getExternalContext();
    if (externalContext.getUserPrincipal() != null) {
        Long id = Long.parseLong(externalContext.getUserPrincipal().getName());
        try {
            u = UserLocalServiceUtil.getUserById(id);
        }
        catch (Exception ex) {
            LOG.error(ex.getMessage());
        }
    }
    return u;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T19:09:29.977

安装 Liferay IDE 及其帮助您创建简单的 JSF-2 Portlet。您在 portletfaces 页面 [http://www.portletfaces.org/projects/portletfaces-bridge/liferay-ide找到了一些示例](http://www.portletfaces.org/projects/portletfaces-bridge/liferay-ide)

仅供参考，portlet-faces 现在是 liferay-faces：[http ://www.portletfaces.org/projects/liferayfaces](http://www.portletfaces.org/projects/liferayfaces)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T21:18:49.020

您应该获得 Liferay IDE 并创建一个新项目 File->New->Liferay Project。然后选择 Portlet 为项目命名并显示名称

![截屏一](../Images/dff964c94c55017cabe666812b227fe2.png)

然后选择 JSF2.x 和 PrimeFaces

![截图2](../Images/acfe8576118e67c88d39e4eeca8fccaa.png)

你应该最终得到类似的东西： ![在此处输入图像描述](../Images/4cf99e5605542891322eaa8415b1ed55.png)

您可以通过在 liferay-display.xml、liferay-portlet.xml 和 portlet.xml 中添加信息来添加 portlet。portlet.xml 将 jsf 页面映射到 portlet 视图

```
 <init-param>
    <name>javax.portlet.faces.defaultViewId.view</name>
    <value>/views/view.xhtml</value>
    </init-param> 
```

# dns - 一个域名可以有多个对应的IP地址吗？

> ID：10257969
> 
> 赞同：98
> 
> 时间：2012-04-21T10:03:52.560
> 
> 标签：dns

例如，当我们连接到`www.example.com`时，首先我们尝试连接到`192.0.2.1`。如果第一次尝试失败，那么我们尝试`192.0.2.222`.

可能吗？一个域名可以注册多个备用IP地址吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-21T10:14:29.843

这是循环 DNS。这是一个非常简单的负载平衡解决方案。通常，DNS 服务器会为每个传入的 DNS 请求轮换/打乱 DNS 记录。不幸的是，这不是故障转移的真正解决方案。如果其中一台服务器发生故障，一些访问者仍将被定向到该故障服务器。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-04-21T10:26:44.930

你能行的。这也是大佬们的做法。

第一个查询：

```
» host google.com 
google.com has address 74.125.232.230
google.com has address 74.125.232.231
google.com has address 74.125.232.232
google.com has address 74.125.232.233
google.com has address 74.125.232.238
google.com has address 74.125.232.224
google.com has address 74.125.232.225
google.com has address 74.125.232.226
google.com has address 74.125.232.227
google.com has address 74.125.232.228
google.com has address 74.125.232.229 
```

下一个查询：

```
» host google.com
google.com has address 74.125.232.224
google.com has address 74.125.232.225
google.com has address 74.125.232.226
google.com has address 74.125.232.227
google.com has address 74.125.232.228
google.com has address 74.125.232.229
google.com has address 74.125.232.230
google.com has address 74.125.232.231
google.com has address 74.125.232.232
google.com has address 74.125.232.233
google.com has address 74.125.232.238 
```

如您所见，IP 列表旋转，但两个 IP 之间的相对顺序保持不变。

更新：我看到一些评论吹嘘 DNS 轮询如何不方便故障转移，所以这里是摘要：DNS**不**适合故障转移。所以这显然不适合故障转移。它从未被设计为故障转移的解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-14T14:17:28.787

是的，这是可能的，但正如 Jens 所说，这并不方便。使用像 Alteon 这样的下一代负载平衡器，它使用称为**DSSP**（分布式站点状态协议）的专有协议，该协议执行定期站点检查，以确保服务在本地或全球（即不同的地理区域）都可用。但是，您需要在主 DNS 中通过将 URL 或服务配置为该 IP 或服务的**权威名称服务器来将 URL 或服务委托给设备。**通过这样做，设备会回答 DNS 查询，它将根据您从多个指标中选择的方式来解析具有**轮询**服务或**不拥塞的 IP。**

# jquery - 为什么多个 JQuery 函数没有从 Codebehind 调用

> ID：10257974
> 
> 赞同：2
> 
> 时间：2012-04-21T10:04:31.413
> 
> 标签：jquery, asp.net, function, code-behind

我试图`functions`从我的 asp.net中调用两个简单的`codebehind`函数，并且只有一个函数在工作，而另一个函数不起作用。

这是我的功能：

```
 function Clear() {
                     alert('Cleared');
                 }

  function Add() {
                     alert('Added');
                 } 
```

我有一个简单的按钮单击事件，如下所示：

```
 Public Sub btnProcess_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnProcess.Click

    System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script", "Clear();", True)
    System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script", "Add();", True)

 End Sub 
```

如果我注释掉一个函数，另一个函数正在工作，反之亦然，但不能同时两者兼而有之。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T10:09:45.067

[RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/bahh2fef.aspx)的文档声明脚本键必须是不同的，否则它们会被视为重复项（这就是您的情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T10:10:08.860

第二个脚本需要不同的密钥。

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script", "Add();", True)
System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script2", "Add();", True) 
```

# zooming - CSS Sprite 在某些缩放放大倍率下鼠标悬停时“移动”

> ID：10257977
> 
> 赞同：1
> 
> 时间：2012-04-21T10:04:50.397
> 
> 标签：zooming, mouseover, css-sprites

下面的精灵可以工作，但是在某些放大倍率下，图像的顶部会在鼠标悬停时向下移动，从而产生不需要的移动效果。问题出现在多个浏览器上。有什么线索吗？提前致谢。

```
<style>
.test   {width:107px; height:51px;
background:url(http://img706.imageshack.us/img706/6812/navr.gif) no-repeat 0 0; }
.test:hover {background:url(http://img706.imageshack.us/img706/6812/navr.gif) no-repeat 0 -51px; }
</style>
<div class="test"></div> 
```

编辑：我在网络上查看了其他一些精灵示例，并且在其他网站上也看到了这种情况！我花了很长时间研究这个问题，但我还没有看到任何地方提到 CSS 精灵的这个特定问题！

我的直觉告诉我，在我的代码中我绝对无法解决这个问题，而解决方案在于 gif 本身的创建。我希望我错了，并且有一些银色的 CSS 子弹！

编辑#2：我尝试使用“水平”精灵，即第二个导航栏位于第一个导航栏的右侧而不是下方。结果：更少的放大倍率产生了失真，但我发现水平偏移比垂直偏移更刺眼。

在我找到解决方案之前，我认为精灵不是我将使用的东西：我宁愿让客户再等一两秒钟来获取图像，也不愿让页面看起来不专业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:14:40.737

通常我使用背景位置

`#menu li a{background:url('/resources/menuIcons.png');display:block;float:left;height:70px;text-indent:-9999px;width:70px;}`
`#menu li.home a{background-position:0px 0px;}`
`#menu li.home a:hover{background-position:0px -70px;}`

尝试像这样构建您的代码

# java - 将文本文件读入数组

> ID：10257981
> 
> 赞同：15
> 
> 时间：2012-04-21T10:05:32.093
> 
> 标签：java

我想将一个文本文件读入一个数组。我怎样才能做到这一点？

`data = new String[lines.size]`

我不想在数组中硬编码 10 。

```
BufferedReader bufferedReader = new BufferedReader(new FileReader(myfile));
String []data;
data = new String[10]; // <= how can I do that? data = new String[lines.size]

for (int i=0; i<lines.size(); i++) {
    data[i] = abc.readLine();
    System.out.println(data[i]);
}
abc.close(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T10:09:52.837

使用 ArrayList 或其他动态数据结构：

```
BufferedReader abc = new BufferedReader(new FileReader(myfile));
List<String> lines = new ArrayList<String>();

while((String line = abc.readLine()) != null) {
    lines.add(line);
    System.out.println(data);
}
abc.close();

// If you want to convert to a String[]
String[] data = lines.toArray(new String[]{}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-12T15:52:20.363

```
File txt = new File("file.txt");
Scanner scan = new Scanner(txt);
ArrayList<String> data = new ArrayList<String>() ;
while(scan.hasNextLine()){
    data.add(scan.nextLine());
}
System.out.println(data);
String[] simpleArray = data.toArray(new String[]{}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T10:11:02.003

改用 a `List`。最后，如果需要，您可以将其转换回`String[]`.

```
BufferedReader abc = new BufferedReader(new FileReader(myfile));
List<String> data = new ArrayList<String>();
String s;
while((s=abc.readLine())!=null) {
    data.add(s);
    System.out.println(s);
}
abc.close(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-21T10:13:32.833

如果你不允许这样做 dtechs 方式，并使用 ArrayList，请阅读 2 次：第一次，获取声明数组的行数，第二次填充它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-23T05:20:28.200

你可以这样做：

```
 BufferedReader reader = new BufferedReader(new FileReader("file.text"));
    int Counter = 1;
    String line;
    while ((line = reader.readLine()) != null) {
        //read the line 
        Scanner scanner = new Scanner(line);
       //now split line using char you want and save it to array
        for (String token : line.split("@")) {
            //add element to array here 
            System.out.println(token);
        }
    }
    reader.close(); 
```

# sql-server-2008 - 在 SQL Server 2008 查询中排除行

> ID：10257983
> 
> 赞同：0
> 
> 时间：2012-04-21T10:06:39.987
> 
> 标签：sql-server-2008

我尝试用图像做一个分页功能，当我这样做时效果很好：

```
WHERE tblUploadedImages.ImageID NOT IN (
    SELECT TOP (@Exclude) ImageID FROM tblUploadedImages
    ORDER BY tblUploadedImages.Added)
    ORDER BY tblUploadedImages.Added 
```

这样可行。但是，当我按喜欢这些图像的人数排序时，当我显示图像 11-20 时，某些图像不会被排除在外。

```
ALTER PROCEDURE GetMostLikedImages
    @Exclude INT
AS
    SELECT TOP (10) 
         (SELECT COUNT(DISTINCT UserID) 
          FROM tblLike 
          WHERE tblUploadedImages.ImageID = tblLike.ImageID) AS LikeCount, 
         (SELECT COUNT(ImageID) 
          FROM tblUploadedImages) AS ImageCount,
         tblUploadedImages.ImgUrl,              
         tblUploadedImages.ImageID 
    FROM 
         tblUploadedImages
    WHERE 
         tblUploadedImages.ImageID NOT IN 
             (SELECT TOP (@Exclude) 
                 (SELECT COUNT(DISTINCT UserID) 
                  FROM tblLike 
                  WHERE tblUploadedImages.ImageID = tblLike.ImageID) AS LikeCount
              ORDER BY LikeCount DESC, tblUploadedImages.Added)
    ORDER BY 
         LikeCount DESC, tblUploadedImages.Added 
```

`LikeCount`如果我订购（有多少人喜欢这些图像），有人知道我怎么能使它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:29:19.120

我遵循了本指南：[http](http://sqlserverplanet.com/sql/pagination-using-rownumber) ://sqlserverplanet.com/sql/pagination-using-rownumber这解决了我的问题。

# linux - POSIX 实时信号可以产生软实时吗？

> ID：10257984
> 
> 赞同：0
> 
> 时间：2012-04-21T10:07:03.140
> 
> 标签：linux, real-time, terminology, signals, rtai

来自：[https ://mail.rtai.org/pipermail/rtai/2012-April/024968.html](https://mail.rtai.org/pipermail/rtai/2012-April/024968.html)

> 将会发生的情况是，当 Linux 发出真正的实时 RTAI 任务信号时，您将在未定义的时间段内失去实时。

RTAI 通常不支持 POSIX API。
那么，当 POSIX 实时信号发送到 RTAI 的实时任务时，控制权会转移到用户空间吗？但我认为，由于 POSIX 信号也是实时信号，它们可以写入内核模块（？）.. 那么怎么能说它会导致软实时呢？

我不太确定引用的原因，请解释我遗漏的一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:02:57.740

首先，*控件转移到用户空间*是什么意思？如果你的任务在内核空间，它永远不会转移到用户空间。如果它在用户空间中，那么它已经存在了！

在 RTAI 中，您有硬实时任务、软实时任务和 Linux 内核。任务由 RTAI 或 Linux 内核调度。RTAI 确保实时行为，因此诸如截止日期和期限等内容与 RTAI 一起使用。然而，Linux 不理解这些，也不在乎。

现在，只要您的代码与 RTAI 一起工作，一切都很好。如果你调用任何需要由 Linux 内核完成的事情，你就会失去实时性，因为 Linux 内核被 RTAI 调度为一个非实时进程。所以经验法则是，任何通过 Linux 的东西都是不好的。

如果您收到来自 Linux 的信号，则该过程的一部分由 Linux 内核处理，更不用说信号处理程序在 Linux 上下文中运行并且中断被禁用。这意味着您完全脱离了实时环境，而 RTAI 无法控制情况。因此存在实时性的危险。

# jquery - 如何使用 jQuery 从具有随机数的属性类 Div 中制作序列号？

> ID：10257985
> 
> 赞同：1
> 
> 时间：2012-04-21T10:07:13.740
> 
> 标签：jquery, html, numbers, sequence

我有一个`div`这样的：

```
<div id="masterDiv">
  <div id="childDiv" class="3" ></div>
  <div id="childDiv" class="5" ></div>
  <div id="childDiv" class="10" ></div>
</div> 
```

单击时如何使属性中的值`class`成为序列号？像这样：

```
<div id="masterDiv">
  <div id="childDiv" class="1" ></div>
  <div id="childDiv" class="2" ></div>
  <div id="childDiv" class="3" ></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T10:16:53.410

```
$(document).ready(function(){
    $("#masterDiv > div").each(function(i, item){
        $(this).attr("class", i + 1);      
    });            
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:28:29.003

理想的 id 值应该是唯一的。这就是使用 id 的全部目的。在你的情况下，而不是 id 使用多个类名

```
<div id="masterDiv">
 <div class="childDiv 3" ></div>
 <div class="childDiv 5" ></div>
 <div class="childDiv 10" ></div>
</div> 
```

然后试试这个（我稍微修改了罗里的解决方案）

```
$(".childDiv").each(function(index) {
 $(this).removeClass().addClass(index + 1).addClass("childDiv");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:14:11.860

尝试这个：

```
$(".childDiv").each(function(index) {
    $(this).removeClass().addClass(index);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-24T10:39:31.003

代码示例：

```
$("#masterDiv > div").attr("class", function(arr) {return "classname"+arr;})
}); 
```

# java - 分析代码以创建 UML 的最佳方法是什么？

> ID：10257990
> 
> 赞同：1
> 
> 时间：2012-04-21T10:07:30.957
> 
> 标签：java, parsing, antlr, lexical-analysis, javacc

我尝试完成我的工作，即“分析 Java 应用程序中的源代码”，我分析未编译的 .java 或 .txt 文件。

我创建[了这个](https://stackoverflow.com/questions/10226712/how-to-create-uml-diagram-from-loaded-java-code/10242280#comment13173266_10242280)主题，在那里我了解到我走错了路。据我所知，我认为最好的处理方式是使用 ANTLR 或 JavaCC，但我无法弄清楚它是如何工作的以及如何使用它（JavaCC 我无法闯入）。我想找到一些可以在我使用的 Netbeans 中编写“经典”的东西。

是否可以使用 java.lang.reflect （在我的主题中有人写道它只能在编译代码中使用）？有没有一种方法可以让我在没有任何“补充”或仅使用 Java 库的情况下编写所有这些内容？

感谢您提供任何宝贵的建议。我很困惑，不知道如何开始。

下面是我的工作描述：
1.选择宿主语言分析器，
2.构建扫描器（词法分析器），
3.构建解析器（语法分析器），
4.以XML的形式保存获取的信息，
5.已分析项目的 UML 图形表示。
主要目标是创建UML，XML是一个补充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:31:23.590

一个更简单的解决方案是获取一个支持导入 Java 源代码并为您生成图表的 UML 工具。

你的道路充满了困难。你被困在输入端，但你甚至还没有考虑到图形端。即使您成功地弄清楚如何创建抽象语法树，绘制图表也并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:24:39.430

从广义上讲，您有两种选择。

如果你想使用源代码，你必须构建一些可以解释这些文件的东西，并形成其中的编程结构的模型。这很重要——你基本上是在构建一个编译器的一个重要子集，你必须处理很多家务——加载文件、计算对 .jar 文件的引用等，并处理代码可能没有实际编译。如果你选择这条路线，你最好的选择是ANTLR；去阅读维基和书籍，然后陷入困境。

另一种方法是使用已编译的文件 - jar 等 - 您可以使用反射工具来解释代码。这简化了事情 - 至少您知道代码可以编译，并且其他人已经做了很多家务。这仍然不是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T16:51:03.653

[顶盖](http://www.topcased.org/)可能对你有用，HTH

# excel - 如何在需要时使用 VBA 将 Excel 中单元格的值保持为限制和循环？

> ID：10257993
> 
> 赞同：1
> 
> 时间：2012-04-21T10:08:00.243
> 
> 标签：excel, vba, excel-formula

我正在处理一些涉及**A**列中纵向度数的数据。

*   **B**列包含**A** *n* - **A** *(n-1)*的值。
*   **A**列中的值不断变化并形成一个循环，始终在 0 到 360 之间。

问题是，当**A** *24*中的值是**358.2244**并且**A** *25*中的值是**2.4488时，** **B** *24*中的值变为负数。

显示的值是**-355.7756**，这在技术上是正确的，但我只想要正值，所以根据我的要求，应该在该单元格中显示**4.2244 。**使用数据验证或 VBA 的解决方法是什么？我正在使用 Excel 2003 和 Excel 2007。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T10:16:24.757

而是`=An - A(n-1)`使用`=IF(An - A(n-1) < 0, 360 + (An - A(n-1)), An - A(n-1))`

# c++ - Visual C++ 中的结构对齐

> ID：10257995
> 
> 赞同：8
> 
> 时间：2012-04-21T10:08:03.413
> 
> 标签：c++, visual-c++, struct

Visual C++ 提供编译器开关 ( `/Zp`) 和`pack`编译指示来影响结构成员的对齐。但是，我似乎对它们的工作方式有一些误解。

根据[MSDN](http://msdn.microsoft.com/en-us/library/2e70t5y1.aspx)，对于给定的对齐值 n，

> 成员的对齐将位于 n 的倍数或成员大小的倍数的边界上，以较小者为准。

让我们假设一个包值为 8 个字节（这是默认值）。在一个结构中，我认为任何大小小于 8 字节的成员都将处于其自身大小的倍数的偏移量。任何大小为 8 字节或更大的成员都将位于偏移量为 8 字节的倍数处。

现在采取以下程序：

```
#include <tchar.h>

#pragma pack(8)

struct Foo {
    int i1;
    int i2;
    char c;
};

struct Bar {
    char c;
    Foo foo;
};

int _tmain(int argc, _TCHAR* argv[]) {
    int fooSize = sizeof(Foo); // yields 12
    Bar bar;
    int fooOffset = ((int) &bar.foo) - ((int) &bar); // yields 4

    return 0;
} 
```

该`Foo`结构的大小为 12 个字节。所以在 内`Bar`，我希望该`Foo`成员的偏移量为 8（8 的倍数），而实际上它的偏移量为 4。这是为什么呢？

此外，`Foo`实际上只有 4+4+1 = 9 个字节的数据。编译器会在最后自动添加填充字节。但是同样，给定一个 8 字节的对齐值，它不应该填充到 8 的倍数而不是 4 吗？

任何澄清表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T10:26:04.577

您的摘录解释了这一点，“以较小者为准”。在 32 位平台上，an`int`是 4 个字节。4 小于 8。所以它有 4 字节对齐。

`pack`pragma 导致事物被打包，而不是被解包。除非有理由，否则它不会填充。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T10:58:22.240

请记住，为什么首先对齐很重要。它可以让 CPU 快速读取内存，而无需多路复用字节。cpu 从不一次读取一个结构，它只访问它的成员。所以 Foo 结构是 12 个字节的事实并不重要。只有其成员的对齐很重要。鉴于没有 Foo 成员的对齐要求大于 4，Bar.foo 成员只需要对齐到 4。

Foo 是 12 个字节而不是 9 个字节也可以使用解释。编译器在末尾添加 3 个字节的填充，以便 Foo 数组仍然具有为每个数组元素正确对齐的成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T10:29:14.103

正如您的报价所说 - 要测试 8 字节对齐，您需要 8 个或更多字节数据类型。这是一个带有一些显式大小类型的示例。此外，将小元素放在末尾不会显示填充，因为它可以从结构的末尾删除。

```
#include <stdio.h>
int
main(int argc, char *argv[])
{
    struct S {
        __int64 a;
        __int8  b;
        __int64 c;
    };
#pragma pack(push,1)
    struct T {
        __int64 a;
        __int8  b;
        __int64 c;
    };
#pragma pack(pop)
#pragma pack(push,8)
    struct U {
        __int64 a;
        __int8  b;
        __int64 c;
    };
    struct B {
        __int8 c;
        struct U s;
    };
#pragma pack(pop)

    printf("S %d T %d U %d B %d\n",
           sizeof(struct S), sizeof(struct T),
           sizeof(struct U), sizeof(struct B));
    return 0;
} 
```

用 VC 2010 编译：

```
C:\src>cl -nologo -W3 -Od packing.c && packing.exe
packing.c
S 24 T 17 U 24 B 32 
```

# css - 当只有一次出现时将 CSS 应用于元素？

> ID：10257996
> 
> 赞同：2
> 
> 时间：2012-04-21T10:08:09.853
> 
> 标签：css

当只有一次出现时，是否有任何 CSS 选择器（CSS3+ 可以）将某些样式应用于元素？

例如，以下 CSS 规则：

```
border: 1px solid black; 
```

...仅适用于**.info**如果在 HTML中仅出现一次**.info 。**

所以，

```
<p class="info">This would have a border because there is only one</p> 
```

和，

```
<p class="info">This would not have a border because there are two</p>
<p class="info">And neither would this</p> 
```

我猜我将不得不以编程方式应用一个额外的类，例如：**.single-occurrence**或使用 Javascript 计算出现次数？

编辑：

让我澄清一些事情。

当我提到 Javascript 作为我正在尝试做的事情的解决方案时——这并不意味着我会使用它。对于任何不是行为的东西，我都尽量避免使用 JS。所以我不想要一个 Javascript 答案，这非常容易完成——我的问题是关于 CSS 的。

另外，对于那些感到困惑的人：页面上有时只有一个**类**的原因是因为我使用的实际类是：**search-result**。有时只会有一个结果。但仅仅因为只有一个并不意味着该项目不能是称为**search-result**的对象类的一部分。在语义上（和逻辑上），当然可以有一个项目的类别。有时，我认为人们应该更多地考虑语义，而不是应用一揽子规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T07:27:40.753

根据页面的结构，您可能可以使用[`:only-of-type`](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3aonly-of-type)伪类，如果元素没有相同标签名称的兄弟，则匹配。我认为没有比这更具体的方法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T10:22:23.953

没有针对此的 CSS 解决方案。我会同意你的 JavaScript 想法。如果你要使用 jQuery，你可以使用类似的东西：

```
$('.info').length 
```

CSS3 伪类列表：http: [//reference.sitepoint.com/css/css3psuedoclasses](http://reference.sitepoint.com/css/css3psuedoclasses)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T10:33:43.357

这个解决方案怎么样。

CSS

```
.info.highlight { border: 1px solid black } 
```

JavaScript（使用[jQuery](http://www.jquery.com)）

```
var $info = $('.info');
if ($info.length === 1) { $info.addClass('highlight'); } 
```

演示：http: [//jsfiddle.net/joshdavenport/YdbuB/](http://jsfiddle.net/joshdavenport/YdbuB/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-07-04T04:25:25.250

你好，这是一个语法错误的迟到答案，但如果你使用像 nth 这样的选择器......用一些非常糟糕的编码你可能会得到你的结果

# salesforce - 仅从验证规则中捕获错误消息并显示在 VF 页面中？

> ID：10257999
> 
> 赞同：0
> 
> 时间：2012-04-21T10:08:41.997
> 
> 标签：salesforce, visualforce

我已经设置了一些验证规则，并且我有一个使用这个对象的 VFpage。我能够捕获验证异常并将其显示在 VF 页面上。问题是它显示消息为

```
 " Upsert Failed : First exception on row 0: first error;

     FIELD_CUSTOM_VALIDATION_EXCEPTION Quantity cannot be empty 
```

有没有办法我可以在验证规则“数量不能为空”中捕获错误消息？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-23T09:34:47.070

不幸的是，Ralph 的帖子并非 100% 正确（请参阅 Prady 的评论，即它不适用于页面顶部验证错误），所以我写了这个答案来澄清。

1.  将 `<apex:pageMessages/>`标签添加到您的页面
2.  用 try catch 将您的 DML 语句括起来，如下所示：

> ```
> try{
> 
> update account; //or anything else
> 
> } catch(System.DmlException e) {
>    ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, e.getDmlMessage(0)));
> } 
> ```

这将打印该语句导致的第一个 DML 错误，这通常是您想要的。您也可以尝试 e.getMessage() ，但这会显示`Update failed. First exception on row 0 with id 001L000000QgmomIAB; first error: FIELD_CUSTOM_VALIDATION_EXCEPTION`对用户不友好的附加信息（例如等）。的优点`e.getDmlMessage`是当错误是由验证规则引起时，它只打印验证规则。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T19:16:15.953

Visualforce 可以为您做到这一点

1.  将`<apex:pageMessages/>`标签添加到您的页面。（这是显示任何错误消息（如果存在）的容器）
2.  围绕您的 DML 调用`try {} catch(DMLException e) {}`（当您捕获异常时，您不会被重定向到错误页面，但 salesforce 将自动为验证失败创建一个“PageMes​​sage”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T09:12:37.747

如果你使用这个：

```
ApexPages.addMessages(e); 
```

取而代之的是，用户将同时收到所有验证消息，而不必一次处理每一条。