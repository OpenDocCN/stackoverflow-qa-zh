# StackOverflow 问答 10428000-10428999

# eclipse - 启动 Eclipse 时出错？

> ID：10428001
> 
> 赞同：2
> 
> 时间：2012-05-03T08:49:13.260
> 
> 标签：eclipse, windows-7-x64

在我将 Eclipse 从 3.5 更新到 3.7 后，Eclipse 无法启动。错误信息是

> 发生了错误。查看日志文件 D:\Eclipse\configuration\1336034442252.log

我在互联网上搜索了很多，但我还没有找到解决方案。

日志文件内容为：

```
!SESSION 2012-05-03 15:39:44.515 -----------------------------------------------
eclipse.buildId=M20120208-0800
java.version=1.7.0-ea
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.osgi 4 0 2012-05-03 15:39:46.372
!MESSAGE An error occurred while automatically activating bundle org.eclipse.ui.workbench (292).
!STACK 0
org.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:166)
    ... 36 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 42 more
Root exception:
java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:166)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 42 more

!ENTRY org.eclipse.osgi 4 0 2012-05-03 15:39:46.457
!MESSAGE Application error
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in "org.eclipse.ui.ide.application" was unable to instantiate class "org.eclipse.ui.internal.ide.application.IDEApplication".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:188)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:191)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: java.lang.NoClassDefFoundError: org/eclipse/ui/application/WorkbenchAdvisor
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:184)
    ... 15 more
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.ui.workbench (292).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 21 more
Caused by: org.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 30 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:166)
    ... 36 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 42 more 
```

我尝试了很多方法，如删除`\WorkSpace\.metadata\.plugins\org.eclipse.resources`、运行命令行`eclipse -clean`、更新 JDK，但都失败了。

我在 Windows 7 Ultimate 64bit 上运行 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:12:00.353

发生了错误。查看日志文件 D:\Eclipse\configuration\1336034442252.log

在 jdk 不支持的某些 eclips 版本中 java.version=1.7.0-ea 首先你检查 jdk 的版本，并且版本是 1.7 设置类路径新版本，即 jdk1.6.0 或去我的电脑右键单击然后高级设置环境变量选项并打开窗口选择系统变量 java。编辑选择变量名称=路径值=C:\Program Files\Java\jdk1.6.0_02\bin ok 打开你的 eclikps .exe 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:46:44.027

通过在我的运行配置中包含**org.eclipse.*的****x86_64 插件**，我能够修复这样的错误，如此[处](http://www.eclipse.org/forums/index.php/m/498756/)所述。

# extjs4 - ExtJs：单击按钮后显示网格

> ID：10428003
> 
> 赞同：0
> 
> 时间：2012-05-03T08:49:21.557
> 
> 标签：extjs4

我有一个表单，一旦显示表单，就会在其中填充网格的值。但是在单击按钮后，我需要根据文本框值填充网格。

ExtJs：

```
var url = location.href.substring(0,location.href.indexOf('/', 14));        
        var grid;
        var store;
        var userStore;
        Ext.onReady(function(){
            var rowEditing = Ext.create('Ext.grid.plugin.RowEditing');

            Ext.define('userList', {
                extend: 'Ext.data.Model',
                fields: [{ name: 'id', mapping: 'id' },
                         { name: 'name', mapping: 'name' },
                         { name: 'firstName' ,mapping:'personalInfo.firstName'},
                         { name: 'lastName' ,mapping:'personalInfo.lastName'},
                         { name: 'gender' ,mapping:'personalInfo.gender'},
                         { name: 'email' ,mapping:'personalInfo.address.email'}
                        ]
             });

            store = Ext.create('Ext.data.Store', {
                model: 'userList',
                autoLoad: true,
                proxy: {
                    type: 'ajax',
                    url : url+'/lochweb/loch/users/getUser',
                    reader: {
                        type: 'json',
                        root: 'Users'
                    }
                }
            });

            function swapStrore(){
                 //userStore = store;                
                 userStore = Ext.create('Ext.data.Store', {
                        model: 'userList',
                        autoLoad: true,
                        proxy: {
                            type: 'ajax',
                            url : url+'/lochweb/loch/users/getUser',
                            reader: {
                                type: 'json',
                                root: 'Users'
                            }
                        }
                    });
                 Ext.getCmp('userGrid').getView().refresh();
                 return userStore;
            }

            function updateUsers(id){
                 window.location = url+'/lochportal/createUser.do';
            }

            var searchUsers = new Ext.FormPanel({
                renderTo: "searchUsers",
                frame: true,            
                title: 'Search Users',
                bodyStyle: 'padding:5px',           
                width: 900,
                items:[{
                    xtype:'textfield',
                    fieldLabel: 'Username',
                    name: 'userName'            
                },{
                    xtype:'textfield',
                    fieldLabel: 'First Name',
                    name: 'firstName'
                },{
                    xtype:'textfield',
                    fieldLabel: 'Last Name',
                    name: 'lastName'
                },
                {
                    xtype: 'button',
                    text: 'Search',
                    listeners: {
                        click: function(){
                            Ext.Ajax.request({
                                method:'GET',
                                url : url+'/lochweb/loch/users/getUser',
                                params : searchUsers.getForm().getValues(),
                                success : function(response){
                                    //console.log(response);
                                    //swapStrore();
                                }
                            });
                        }                       
                    }
                },{
                    xtype: 'button',
                    text: 'Cancel',
                    listeners: {
                        click: function(){
                             window.location = url+'/lochportal/viewSuccessForm.do';
                        }                       
                    }
                },              
                grid = Ext.create('Ext.grid.Panel', {                   
                        //plugins: [rowEditing],
                        id:'userGrid',
                        width: 900,
                        height: 300,
                        frame: true,                        
                        store: store,
                        iconCls: 'icon-user',
                        columns: [{
                            text: 'ID',
                            width: 40,
                            sortable: true,
                            dataIndex: 'id'
                        }, 
                        {
                            text: 'Name',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'name',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'FirstName',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'firstName',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'LastName',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'lastName',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'Gender',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'gender',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'Email',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'email',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                             xtype: 'actioncolumn',
                             width: 50,
                             items:[{
                                    icon   : '/lochportal/extJS/resources/themes/images/access/window/edit.gif',  // Use a URL in the icon config
                                    tooltip: 'Sell stock',
                                    handler: function(grid, rowIndex, colIndex) {
                                        var rec = store.getAt(rowIndex);
                                        //alert("Sell " + rec.get('id'));
                                        updateUsers(rec.get('id'));
                                    }
                                }]

                        }]
                    })]     
            });

            var win = new Ext.Window({
                layout:'fit',
                closable: false,
                resizable: true,
                plain: true,
                border: false,
                items: [searchUsers]
            });
            win.show();
        }); 
```

单击搜索按钮后如何填充网格？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:01:39.500

使用`bindStore()`网格的方法将新的或不同的商店分配给已经显示的网格。如果您想首先显示一个空网格 - 要么过滤掉所有记录，要么最初分配`store`属性。`null`

# c# - C# XML 反序列化数组元素 null

> ID：10428005
> 
> 赞同：0
> 
> 时间：2012-05-03T08:49:27.380
> 
> 标签：c#, xml, deserialization, xmlserializer

我正在尝试反序列化来自 REST API 的响应。

```
"<FieldListDTO xmlns=\"api.playcento.com/1.0\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\">
<Allfield>
<FieldDTO>
<Fieldname>Mobile nr</Fieldname>
<Fieldtype>T</Fieldtype>
<Fieldvalue>003241234578</Fieldvalue>
<Fk_id_page>CP584ea74ce5ad4e2d8561d75fc6944f96</Fk_id_page>
<Id_field>FI152dcde5ef9849898b12d6a3f2cdb4ee</Id_field>
<Required>true</Required>
</FieldDTO>
</Allfield>
<Totalcount>1</Totalcount>
</FieldListDTO>" 
```

字段类：

```
namespace PlaycentoAPI.Model
{
    [XmlRoot("FieldListDTO",Namespace = "api.playcento.com/1.0")]
    [XmlType("FieldListDTO")]
    public class FieldListDTO
    {
        public FieldListDTO() { }

        [XmlElement("Totalcount")]
        public int TotalCount { get; set; }

        [XmlArray("Allfield")]
        [XmlArrayItem("FieldDTO", typeof(Field))]
        public Field[] Field { get; set; }

    }
    [XmlRoot("FieldDTO", Namespace = "api.paycento.com/1.0")]
    [XmlType("FieldDTO")]
    public class Field
    {
        public Field()
        {
        }

        [XmlElement("Id_field")]
        public string ID_Field { get; set; }
        [XmlElement("Fieldtype")]
        public string FieldType { get; set; }
        [XmlElement("Fk_id_page")]
        public string FK_ID_PAGE { get; set; }
        [XmlElement("Required")]
        public bool Required { get; set; }
        [XmlElement("Fieldname")]
        public string FieldName { get; set; }
        [XmlElement("Fieldvalue")]
        public string FieldValue { get; set; }
    }
} 
```

我调用 API 并对其进行反序列化的代码：

```
string response = Helper.PerformAndReadHttpRequest(uri, "GET", "");
                FieldListDTO myObject;
                XmlReaderSettings settings = new XmlReaderSettings();
                using (StringReader textReader = new StringReader(response))
                {
                    using (XmlReader xmlReader = XmlReader.Create(textReader, settings))
                    {
                        XmlSerializer mySerializer = new XmlSerializer(typeof(FieldListDTO));
                        myObject = (FieldListDTO)mySerializer.Deserialize(xmlReader);
                    }
                }
                return myObject.Field; 
```

在我的实际回复中，我得到了 14 个 FieldDTO。反序列化 xml 后，FieldListDTO myObject 包含 TotalCount = 14，Field 是一个包含 14 个字段的数组。但是这些字段的所有属性都是 NULL（或 false）。

我对其他几个 API 调用使用相同的方法。我已经比较了这些类，我看到的唯一区别是类 (Field) 具有 bool 属性。所以我认为这就是问题所在。我已将 bool 属性更改为字符串，但反序列化后所有属性仍为 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:59:32.980

引起我注意的第一件事是您的 FieldDTO 类中的名称空间与 XML 文档中的名称空间不匹配。

```
"api.paycento.com/1.0"
"api.playcento.com/1.0" 
```

# java - mysql批量插入：获取插入的行数

> ID：10428009
> 
> 赞同：0
> 
> 时间：2012-05-03T08:49:39.343
> 
> 标签：java, mysql, jdbc, batch-insert

我正在使用 java 批量插入到 mysql 表中：

```
cnx = lconnect.openConnection();
mStatement = cnx.createStatement();
boolean firstTime = true;
PreparedStatement preparedStatement = null;

preparedStatement = cnx.prepareStatement(strQuery);
preparedStatement.setString(param1);
preparedStatement.setString(param2);
....
preparedStatement.addBatch();
preparedStatement.setString(param1);
preparedStatement.setString(param2);
preparedStatement.addBatch();
preparedStatement.setString(param1);
preparedStatement.setString(param2);

preparedStatement.execute(); 
```

有没有办法真正知道插入的行数？

我认为我的一段代码它正在工作（？）数据库中的行数与应该插入的行数不匹配，所以我想我可能对 y 插入有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:53:50.983

你必须打电话[`executeBatch()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeBatch%28%29)。返回的数组包含您想要的信息。

来自 JavaDoc：

> 返回： 更新计数数组，其中包含批处理中每个命令的一个元素。数组的元素根据命令添加到批处理的顺序进行排序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T08:51:49.113

`PreparedStatement`为每个批次记录使用对象 :)

# android - 使用 drupal 作为后端或服务制作移动应用程序的步骤

> ID：10428014
> 
> 赞同：1
> 
> 时间：2012-05-03T08:49:55.113
> 
> 标签：android, drupal

我想制作一个以 drupal 作为后端的移动应用程序，因为已经完成了与网站相同的应用程序。我想为我的 android 应用程序使用相同的 drupal

请任何人帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:52:13.357

电话：[phonegap drupal](http://drupal.org/project/phonegap)

Drupal：[服务](http://drupal.org/project/services)

Drupal: [libraries api](http://drupal.org/documentation/modules/libraries)不要与 6 的其他库混淆。

安全登录 drupal：[oAuth](http://drupal.org/project/oauth)

安全登录安卓：[Oauth/ID](https://developers.google.com/accounts/docs/MobileApps)

教程：[怪物教程](http://www.tylerfrankenstein.com/code/android-app-with-drupal-7-services-phonegap-and-jquery-mobile)

教程：[IBM](http://www.ibm.com/developerworks/library/os-drupal-web-service-project/index.html#resources)创建自定义 Web 服务 Grate 写起来必读。

视频：[服务视频](http://tutr.tv/search/apachesolr_search/services)

服务 ATM 的重要修复：[SPYC 的修复](http://drupal.org/node/1313976)

这将为您提供一个基本的 JSON API，如果您按照该教程进行操作，您应该知道您的密码在您的客户碰巧通过的任何机场 wifi 上都是纯文本的。Oauth 会解决这个问题。本教程不提供 chrome 扩展

Chrome：[邮递员](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)- 我在 chrome 上看到的最好的休息调试器。

Android 特定 HTTP 视频：[3 集 200 集列表](http://www.youtube.com/watch?v=TxcfhAU2dDg&list=PL3D7BFF1DDBDAAFE5&index=147&feature=plpp_video)

该 HTTP 内容的源代码以及更多[mybringback](http://www.mybringback.com/tutorial-series/828/thenewboston-sample-projects/)

提示：关于 twitter 的 json 和 sutch 的东西正是你从 drupal 中得到的，这就是为什么它被包含在本地开发中的原因。

Iphone&Drupal: [iphone & json video](http://www.youtube.com/watch?v=syqsH2CEu6U&feature=share&list=PLDD68083E136B3AE9)不是你所说的，而是让你看到有人编写一个快速模块来将服务修补到手机中。II 建议在安装完成后跳到 5:35。

Android：[http-wraper 和示例](http://code.google.com/p/google-http-java-client/wiki/JSON)

Android：[另一个 HTTP 包装](http://turbomanage.wordpress.com/2012/06/12/a-basic-http-client-for-android-and-more/)

Android：[又一个 http wrap](https://github.com/AsyncHttpClient/async-http-client)

Drupal：[视图数据源](http://drupal.org/project/views_datasource)启用视图以吐出 JSON 将适用于您不关心用户身份验证的更简单的项目，只需使用 Drupal 的 CMS 魔法将各个部分粘合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:00:56.687

尝试使用 webview 构建一个简单的应用程序[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

在这个视图中，您可以使用现有的 url 显示您的 drupal CMS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:59:37.023

在我们公司，我们使用带有 REST api 的 drupal。我们创建了自己的自定义模块，该模块基于来自 drupal 的节点创建 JSON 文件。如果有新内容，我们会从应用程序中获取这些 JSON 文件。

# database - 与更多数据库一起使用的工作统一性

> ID：10428018
> 
> 赞同：0
> 
> 时间：2012-05-03T08:50:15.350
> 
> 标签：database, design-patterns, unit-of-work

我正在学习一些模式，工作/存储库的统一......网上有一些例子，但没有人连接到多个数据库。

在我的应用程序中，我几乎总是需要从数据库中获取一些对象（例如用户）和其他一些对象，我该如何使用这些模式？（因为我是这个主题的新手，所以必须有一个明确的例子）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:32:14.793

作为一般参考，我建议您和任何有兴趣访问[http://martinfowler.com/eaaCatalog/index.html](http://martinfowler.com/eaaCatalog/index.html)的人 ，其中包含 UML 的集合和对企业软件最常见设计模式的解释在您的具体情况下**，工作的统一性**是特别适合与**Data Mapper**和**Identity Map**一起使用。我想要理解 100% 的工作统一性，还必须掌握其他 2 个模式。

为了回答您的问题，我认为您可以创建一个统一的工作并将其保存在注册表中，因此它在整个应用程序中都可用。统一必须是单例，因为您需要确保中央网关与数据库进行通信。在您的工作统一中，您将拥有一个身份映射，它是内存中代表您的模型的有价值对象的集合，该模型负责在所有应用程序操作期间维护对象状态。您的服务层将使用统一体对模型执行 CRUD 操作并提交这些更改。要使用更多数据库，我想您需要利用某种命名空间访问存储在 Identity 映射中的对象。您可以选择命名空间的位置：工作统一或身份映射。该决定实际上取决于您的应用程序和用例。您可能需要连接到不同的数据库以在读取和写入之间划分职责或尝试集成异构数据源。另一种方法是将 DB 对象注入到统一的工作方法中，在这种情况下，应用程序可以 100% 控制使用哪个数据库。

据我所知，**存储库**模式可以帮助您抽象模型的存储，并且当您使用异构数据源时它特别有用，您必须为您的应用程序提供这种灵活性。因此，我想它与工作统一和数据映射层完全不同。

# sql - SQL：速度考虑：乘以 0 / 1 与条件操作

> ID：10428027
> 
> 赞同：2
> 
> 时间：2012-05-03T08:50:43.133
> 
> 标签：sql, sql-server

以下查询之间会有任何显着的速度差异吗？

```
- SELECT value * coeff from Table

- SELECT CASE WHEN coeff = 0 THEN 0 ELSE value END FROM Table 
```

我知道我可以试试看，但我相信你会对各种数据库引擎如何处理这个问题发表有趣的评论，以及我会做的少数测试会错过的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:33:32.603

乘法列和大小写列之间的结果数据类型可能有所不同。

尝试这个

```
CREATE TABLE #Tmp (value DECIMAL(19, 2), coeff BIT)

INSERT  #Tmp SELECT 15, 1
INSERT  #Tmp SELECT 16, 0

SELECT  value * coeff AS final_value_mult
        , CASE WHEN coeff = 0 THEN 0 ELSE value END AS final_value_case
INTO    aaa
FROM    #Tmp

--DROP TABLE aaa, #Tmp 
```

`aaa`然后在 SSMS 中编写脚本表

```
CREATE TABLE [dbo].[aaa](
    [final_value_mult] [decimal](38, 4) NULL,
    [final_value_case] [decimal](19, 2) NULL
) ON [PRIMARY] 
```

`value`显然，乘法升级了数据类型的精度/规模。`CASE`对这种意想不到的结果更加免疫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:30:06.453

不会有任何显着的速度差异。

在最低级别，您需要将这两个值加载到 CPU 中的寄存器中。那么差别大概...

```
Load coeff into register1
Load value into register2
If register1 is not 0, skip the next operation
Load 0 into register2
Return value in register2 
```

对比

```
Load coeff into register1
Load value into register2
register2 = register1 * register2
Return value in register2 
```

第二个始终是 4 次操作。当 coef 为非零时，第一个是 5 次操作。

但是第一个版本的操作非常简单。第二个中的乘法将更加密集。据我所知，0 或 1 的整数乘法仍然和你得到的一样快。但是，如果 VALUE 是浮点数，它将更加密集。

*（这都是来自基本的工作知识，而不是任何专业知识。）*

话虽如此，但是，差异将远小于从磁盘加载数据或通过 tcp/ip 传输。

您应该运行分析器并测量每个分析器使用的 CPU 周期。不是花的时间。您可能会发现一个版本比另一个版本使用的 CPU 稍微少一些。然而，总时间几乎没有差异。

# bash - 错误：Shell 脚本返回一元运算符是预期的错误消息

> ID：10428028
> 
> 赞同：2
> 
> 时间：2012-05-03T08:50:43.647
> 
> 标签：bash, shell, scripting

我正在修复给定的 shell 脚本，我收到以下错误消息

```
line 322: [: ==: unary operator expected 
```

此错误从该行返回。

```
 if [ $4 == "managed?.out" ];then 
```

有人可以解释一下是什么导致了这个错误

也有人可以解释使用的目的是什么？在“托管？.out”

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T08:56:30.703

您需要引用`$4`：

```
if [ "$4" == "managed?.out" ];then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:06:17.790

将 if 语句更改为

```
if [ "$4" == "managed?.out" ];then 
```

双引号仅在您使用 $4 时是必需的，如果您的变量是 $string，则不需要它们。

应该 ”？” 被解释为 bash 通配符？如果是，您需要使用

```
if [[ "$4" == managed?.out ]];then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:18:46.460

尝试：

```
if [[ $4 == "managed?.out" ]];then 
```

# asp.net - 使用预编译的 Razor 视图和 VirtualPathProviders 时找不到文件 PrecompiledApp.config

> ID：10428030
> 
> 赞同：24
> 
> 时间：2012-05-03T08:50:47.330
> 
> 标签：asp.net, razor, webforms, precompiled, virtualpathprovider

我们有一个应用程序使用 WebForms .aspx 文件来处理几乎所有的事情。Latley 我们一直在使用预编译的 RazorViews 作为获取 nicley 打包功能的一种方式，只需在我们的项目中删除一个新的 dll。但是现在我们发现我们的预编译视图似乎与我们的 VirtualPathProviders 冲突。

当从外部 dll 加载 VirtualPathProviders 时，应用程序会尝试为所有请求加载 PrecompiledApp.config（我们没有得到它）​​。提供者加载了反射。我们在与注册相同的项目中有一些 VirtualPathProviders，它们工作正常，但是当我们从外部 dll 注册提供程序时，`HostingEnvironment.RegisterVirtualPathProvider`我们遇到了这个问题。

如果我们添加文件 PrecompiledApp.config，它会尝试获取 _appstart.cshtml 等等。在通过例外之前，我们必须拥有以下所有这些文件：

*   预编译的App.config
*   _appstart.cshtml
*   _PageStart.cshtml
*   _ViewStart.cshtml
*   视图/_ViewStart.cshtml
*   视图/共享/_ViewStart.cshtml
*   默认.cshtml

我们最终在 default.cshtml 中，应用程序的其余部分工作。因为我们想使用 apsx-files 作为默认值，所以这不是一个可接受的解决方案。我们也担心会出现更多问题，因为我们不知道为什么会发生这种情况。

我们已经尝试过这种方式来加载我们的提供程序，但我们仍然得到同样的错误： [http ://sunali.com/2008/01/09/virtualpathprovider-in-precompiled-web-sites/](http://sunali.com/2008/01/09/virtualpathprovider-in-precompiled-web-sites/)

**例外：**

```
Could not find file 'C:\MyApp\PrecompiledApp.config'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not find file 'C:\MyApp\PrecompiledApp.config'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[FileNotFoundException: Could not find file 'C:\MyApp\PrecompiledApp.config'.]
   System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +12899479
   System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath) +2481
   System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy) +229
   System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +102
   System.Web.Hosting.MapPathBasedVirtualFile.Open() +105
   System.Web.WebPages.BuildManagerWrapper.IsNonUpdatablePrecompiledApp() +157
   System.Web.WebPages.BuildManagerWrapper..ctor(VirtualPathProvider vpp, IVirtualPathUtility virtualPathUtility) +48
   System.Web.WebPages.VirtualPathFactoryManager.<.cctor>b__6() +90
   System.Lazy`1.CreateValue() +12776623
   System.Lazy`1.LazyInitValue() +355
   System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application) +131
   System.Web.WebPages.WebPageHttpModule.StartApplication(HttpApplication application, Action`1 executeStartPage, EventHandler applicationStart) +98
   System.Web.WebPages.WebPageHttpModule.InitApplication(HttpApplication application) +75
   System.Web.WebPages.WebPageHttpModule.Init(HttpApplication application) +268
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +575
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +352
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +407
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +375

[HttpException (0x80004005): Could not find file 'C:\MyApp\PrecompiledApp.config'.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11700992
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4869221

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:47:50.230

您确定您的 VirtualPathProvider 的 FileExists 为 PrecompiledApp.config 返回 false 吗？

IsNonUpdatablePrecompiledApp 标志在实际调用 Open 之前调用 vpp 上的 FileExists，以防止发生异常。

# php - 如何在数组中搜索值？

> ID：10428031
> 
> 赞同：2
> 
> 时间：2012-05-03T08:50:50.183
> 
> 标签：php

我有一个这样的数组，我试图使用这个数组搜索一个值：

```
$arr = Array('Slovenly Mexico','Slovenly Europe','Greece'); 
```

我正在使用这种条件。请帮忙

```
if($a[storename] == $arr[$i]){
                //some code

          } 
```

但它不起作用，因为它作为索引值搜索，所以它给出了一个错误。

```
Array
(
    [0] => Array
        (                    
            [storename] => Greece
        )

    [1] => Array
        (         
            [storename] => Slovenly Europe
        )

    [3] => Array
        (           
            [storename] => Slovenly Europe
        )

    [4] => Array
        (       
           [storename] => Greece
        )

    [5] => Array
        (
        [storename] => Slovenly Mexico

        )

    [6] => Array
        (
            [storename] => Slovenly Europe
        )

    [7] => Array
        (
         [storename] => Slovenly Mexico

        )
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:53:32.073

你可以使用 in_array()

例如。，

```
$sizeofarray=sizeof($a);
for($i=0;$i<sizeofarray;$i++)
{
   if(in_array($a[$i][storename],$arr)) 
   {
       echo "Found";
       break;
   }
   else
       echo "Not found";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:54:15.363

看看这个功能：

[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

```
<?php
$array = array(0 => 'blue', 1 => 'red', 2 => 'green', 3 => 'red');

$key = array_search('green', $array); // $key = 2;
$key = array_search('red', $array);   // $key = 1;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:05:25.763

尝试这个

```
in_array($a[storename], $arr) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T07:45:59.800

您可以使用数组 bu 搜索值

> ***A.*** [`in_array`](http://php.net/manual/en/function.in-array.php) — 检查数组中是否存在值。`in_array`返回布尔值

```
<?php
 $os = array("one", "two", "three", "four");
 if (in_array("two", $os)) {
    echo "Got two";
 }
 if (in_array("one", $os)) {
    echo "Got one";
 }
?> 
```

> ***B.*** 你也可以使用[`array_search`](http://php.net/manual/en/function.array-search.php)——在数组中搜索给定的值，如果成功则返回对应的键

```
<?php
 $array = array(0 => 'one', 1 => 'two', 2 => 'three', 3 => 'four');

 $key = array_search('one', $array); // $key = 0;
 $key = array_search('four', $array);   // $key = 3;
 ?> 
```

进一步参考[array_search](http://php.net/manual/en/function.array-search.php)和[in_array](http://php.net/manual/en/function.in-array.php)

# c# - 使用实体框架 4.3.1 的导航属性 null

> ID：10428035
> 
> 赞同：1
> 
> 时间：2012-05-03T08:51:02.263
> 
> 标签：c#, .net, entity-framework, navigation-properties

我正在使用**Entity Framework 4.3.1**并且我的导航属性遇到了一些问题。

在我的上下文中，我启用了延迟加载：

```
public MyContainer()
        : base(ConnectionString, ContainerName)
{
    this.ContextOptions.LazyLoadingEnabled = true;
} 
```

此外，我已将属性设为虚拟（实际上是我从模型中生成的）：

```
public virtual Driver Driver
{
    get { return _driver; }
    set
    {
        if (!ReferenceEquals(_driver, value))
        {
            var previousValue = _driver;
            _driver= value;
            FixupDriver(previousValue);
        }
    }
}
private Driver _driver; 
```

这是在一个名为 Ride 的实体中。但是，当我访问它时`myContext.Ride.Driver`它是空的。这很奇怪，因为当我在运行时检查 Ride 实体时，我可以看到外键实际上填充了预期 Driver 的 ID。

我需要做些什么额外的事情吗？

当我生成一个新的 Ride 时，我设置了**DriverID**，但随后我从中获取 ID 的 Driver 不会自动添加为导航属性。

* * *

好的，我自己解决了这个问题，所以我将分享答案：我需要将驱动程序实体附加回上下文。myContext.Driver.Attach（驱动程序）。然后我可以这样做：Ride.Driver = Driver 而不是 Ride.DriverID = Driver.DriverID。

在代码中我这样做：

```
db.Driver.Attach(Driver); // Driver is a public property in my class
myNewRide.Driver = Driver;
db.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:47:16.957

好的，我自己解决了这个问题，所以我将分享答案：我需要将驱动程序实体附加回上下文。myContext.Driver.Attach（驱动程序）。然后我可以这样做： Ride.Driver = Driver 而不是 Ride.DriverID = Driver.DriverID

# regex - Google Apps + HTML + 正则表达式

> ID：10428041
> 
> 赞同：1
> 
> 时间：2012-05-03T08:51:35.977
> 
> 标签：regex, google-apps-script

我正在尝试编写一个脚本来访问 boxofficemojo.com 上的电影链接并提取特定电影的总收入。我将这些脚本编写为 Google Apps 脚本，因为我想将其插入电子表格。

我最初的实现在寻找电影页面上非常突出的国内总计时运行良好。（例如，http://boxofficemojo.com/movies/?id=clashofthetitans2.htm 将在“截至 [日期] 的“国内总额”正下方提取“$80,882,168”）。我想扩展这个脚本，以便我能够获得在 Total Lifetime Grosses 下列出的全球总总收入，但我无法这样做，我不知道为什么。

这是有问题的代码：

```
function gross(aUrl)
{
  var page = UrlFetchApp.fetch(aUrl).getContentText();
  var matched = page.match(/Worldwide:<\/b><\/td>.*(\$.*)<td width="25%">/m);
  var amt = "$0";
  if (matched == null)
  {
    matched = page.match(/<b>(\$.*)<\/b>.*Distributor:/m);
    if (matched != null)
    {
      amt = matched[1];
    }

  } else
  {
    amt = matched[1];
  }
  return amt;
}

function testGross()
{
  var result = gross("http://boxofficemojo.com/movies/?id=clashofthetitans2.htm");
  Logger.log(result);
} 
```

第二个正则表达式可以正常工作但第一个不能正常工作应该毫无价值。运行 testGross() 的输出将导致日志中的以下数据：

```
null
$80,882,168 
```

我在 www.rubular.com 上使用来自电影页面时仅查看页面源的数据测试了正则表达式。我确定返回进行匹配的页面不再被截断，因为当我将 page.match 行替换为向我发送包含 page 变量全部内容的电子邮件的行时，我得到一个与如果我选择查看页面源，我会得到什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:24:56.270

通过查看[您使用的示例](http://boxofficemojo.com/movies/?id=clashofthetitans2.htm)的页面源代码，我可以看到您忘记了正则表达式中的“关闭”部分。以下是相关部分：

```
<td width="40%">=&nbsp;<b>Worldwide:</b></td>
<td width="35%" align="right">&nbsp;<b>$289,732,168</b></td>
<td width="25%">&nbsp;</td> 
```

在您的正则表达式中，在该`(\$.*)`部分之后，您不考虑`</b></td>`和空格字符。此外，`m`修饰符不会按您预期的那样工作。实际上在这里并没有什么不同。将`.`不匹配新行。这是您的“固定”正则表达式：

```
/Worldwide:<\/b><\/td>[\s\S]*(\$.*)<\/b>[\s\S]*<td width="25%">/m 
```

无论如何，这就是我的做法：

```
/Worldwide:<\/b><\/td>[\s\S]*?<b>(\$.+)<\/b><\/td>/ 
```

# wpf - 以编程方式将资源字典保存到磁盘

> ID：10428042
> 
> 赞同：3
> 
> 时间：2012-05-03T08:51:40.857
> 
> 标签：wpf, resources, save

我需要使用位于本地计算机中的资源字典。我的 WPF 应用程序将使用 Add() 或 Remove() 方法向该字典动态添加/删除项目。完成后，我需要将更新的资源字典再次保存到磁盘。

我没有找到直接的方法。有没有像 ResurceDictionary.Save() 这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:48:56.013

你可以使用`XamlWriter`类。

这是一段将按钮的模板写入文件的代码：

```
// Get the template.
ControlTemplate template = button.Template;

// Get the XAML for the template.
XmlWriterSettings settings = new XmlWriterSettings();
settings.Indent = true;
XmlWriter writer = XmlWriter.Create(@"c:\template.xaml", settings);
XamlWriter.Save(template, writer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:58:48.077

```
ResourceDictionary dic = Application.Current.Resources;

StreamWriter writer = new StreamWriter("Themes\\NewOne.xaml");
XamlWriter.Save(dic, writer);
writer.Close(); 
```

# sinatra - 在 Sinatra 中，有没有办法对某些错误使用我自己的错误处理程序，而对所有其他错误使用默认处理程序？

> ID：10428043
> 
> 赞同：6
> 
> 时间：2012-05-03T08:51:44.087
> 
> 标签：sinatra, rack

问题是默认处理程序是在**Sinatra::ShowExceptions**中定义的，它由**:raise_errors**配置设置控制，并且此设置是全部或全部。如果**:raise_errors**关闭，则可以在 Sinatra 应用程序中使用**错误**方法，但它必须用于所有异常，并且无法访问**Sinatra::ShowExceptions**中定义的错误处理程序。如果它打开，那么所有异常都由 ShowExceptions 中间件处理。

我想做的事情的基本原理是，至少在开发过程中，我希望以用户友好的方式处理“预期”错误，并且希望以对开发人员友好的方式处理“意外”错误。

我猜想做到这一点的唯一方法是定义一个从**Sinatra::ShowExceptions**继承的机架中间件类，并且在其**使用**方法中有一些额外的选项来指定要处理或不处理哪些异常类。

有没有我想念的更简单的方法？

（我正在使用 jruby，如果这有什么不同的话。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:27:30.720

我发现这似乎有效：

```
set :raise_errors, false
set :show_exceptions, false

...

error BaseErrorClassForMySpecialErrors do
  # ... special handling for sub-classes of this error class
end

$showExceptions = Sinatra::ShowExceptions.new(self)

error do
  @error = env['sinatra.error']
  $showExceptions.pretty(env, @error)
end 
```

换句话说，将**:raise_errors**和**:show_exceptions**设置为**false**以关闭 ShowExceptions 对错误的处理，然后创建一个单独的**Sinatra::ShowExceptions实例，并在****error do** catch-all 错误处理程序中调用其**pretty**方法。

 **希望为此目的创建一个额外的**Sinatra::ShowExceptions**实例不会产生任何意外的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T16:21:30.697

我已经使用 set :show_exceptions, :after_handler 来处理这种情况。我还在开发中设置了 :dump_errors, false ，否则即使由错误块处理，错误也会被转储。**

# php - 用我的 php 代码用 hsl 着色

> ID：10428048
> 
> 赞同：1
> 
> 时间：2012-05-03T08:51:51.870
> 
> 标签：php, html, css

我正在尝试学习 php，因为我学习遗传学，这对生物信息学很有用。我的代码有问题，我确定它很愚蠢，但我看不到解决方案。

这是我的代码：

```
 $query="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";

$seq=chunk_split($query,40,"<br />");

$truecol="<div style=\"color: hsl(0,100%,50%);\">";

function colorSequence ($seq,$position,$truecol,$TFBSlength){
    $nucleotides = str_split($seq);
    foreach ($nucleotides as $index => $nucl){
        if ($index == $position){
            echo $truecol;
        }
        if ($index == $position + $TFBSlength){
            echo "</div>";
        }

           echo $nucl;
    }
    echo "\n";
}
colorSequence($seq,5,$truecol,3); 
```

输出给出：

```
AAAAAAAAAA
(this is coloured)AAAAA(end of colour)
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB
BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCC
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC 
```

第一行有 10 个字母，第二行有 5 个彩色字母，第三行有 45 个字母。所有行应有 60 个字母。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:54:30.263

您可能希望使用`<span>`HTML 标记而不是`<div>`.

因为每个`<div>`通常由浏览器显示，上下都有换行符。

或者，您可以`<div>`使用 CSS 定义外观，但我认为目前这太多了：

```
div {display: inline;} 
```

`<span>`使用HTML 元素并使用的示例[`substr`](http://php.net/substr)（我可能会偏离一个左右，我假设你可以解决这个问题）：

```
$truecol = 'hsl(0,100%,50%)';
colorSequence($seq, 5, $truecol, 3);

function colorSequence ($seq, $position, $truecol, $TFBSlength)
{
    $before = substr($seq, 0, $position);
    $color  = substr($seq, $position, $TFBSlength);
    $after  = substr($seq, $position + $TFBSLength);
    printf("%s<span style=\"color: %s;\">%s</span>%s\n",
           $before, $truecol, $color, $after);
} 
```

# javascript - 为什么相同的图像菜单在使用 Firefox 的不同站点中具有不同的过渡

> ID：10428049
> 
> 赞同：0
> 
> 时间：2012-05-03T08:51:54.710
> 
> 标签：javascript, jquery

我想知道为什么在 Mozilla Firefox 中，相同的图像菜单在不同的站点上具有不同的过渡方式。如果您使用 Firefox 并转到此链接，然后将鼠标悬停在不同的图片上，您将了解它如何移动[http://www.alohatechsupport.net/examples/image-menu-2.html](http://www.alohatechsupport.net/examples/image-menu-2.html) 之后转到此链接[http ://bloghutsbeta.blogspot.com/2012/04/testing-main.html](http://bloghutsbeta.blogspot.com/2012/04/testing-main.html)并将鼠标悬停在图像上，看看它是如何移动的。

在这两种情况下，过渡效果是相同的，但在一种情况下它很慢（挂起），而在另一种情况下它是平滑的。我没有提供标记，因为两者是相同的，但如果您想在评论中告诉我，我将对其进行编辑，以便为您提供尽可能多的相关数据和所需的数据。

```
<script type="text/javascript" src="files.cryoffalcon.com/javascript/…; 

<script type="text/javascript"> 
    $().ready(function() { 
        $('.jimgMenu ul').kwicks({
            max: 310, 
            duration: 300, 
            easing: 'easeOutQuad', 
            complete: 'callback'
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:55:37.177

您是否尝试检查每个配置的方式？可能是该插件具有缓动选项。

无论如何，它也可能受到该展示中元素数量的影响。更多的元素意味着更多的 DOM 节点要进行动画处理，而且每个人都知道 DOM 操作是一项昂贵的操作。这可能会导致动画不流畅、不流畅。

此外，元素本身的数量可能会影响动画。另一个每个宽度的幻灯片较少（松散），而另一个每个宽度的幻灯片更多（狭窄）。这也会影响您对同一动画的感知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:59:44.753

我正在使用 FireFox 10，我在尝试您的两个页面时都没有遇到任何挂起。当整个页面尚未完全加载时，第二个动画可能会变慢。但是一旦所有元素都加载完毕，它们的过渡速度几乎相同。

# qt4 - 使用 Visual C++ 6 编译 Qt4 项目

> ID：10428051
> 
> 赞同：1
> 
> 时间：2012-05-03T08:52:04.400
> 
> 标签：qt4, visual-c++-6

我想知道如何用**Visual C++ 6编译****Qt4** (最好是**qt 4.8.1** ) 项目。我在[Qt4.4 Compiler Notes](http://radekp.github.com/qtmoko/api/compiler-notes.html#visual-studio-windows)中发现，**Qt4.4**已经过测试**vc6** sp5 。

 ******1.  是否可以使用 编译`Qt4.8.1`项目`vc6`？
2.  如何`vc6`从项目创建`Qt4`项目？
3.  如何`Qt4`融入`vc6 IDE`？******

# asp.net - 使用 FormsAuthentication.SetAuthCookie 方法读取值

> ID：10428053
> 
> 赞同：1
> 
> 时间：2012-05-03T08:52:05.727
> 
> 标签：asp.net, .net, formsauthentication

使用该方法创建了一个 Cookie，其实际存储的值为：

`87B0B98C-3108-4367-B8EF-5A7D35F65E1D`

但 cookie 中显示的实际值为：

`34D20FCCC8F39594FAEA6B924535EA19834AEBE9F91D859D530735C06EDBFF5DD22CC0DCDD99FB164B8079CE00D420DEB18B209E2894D2F53A39F8352A1E3661A887259047E29E9D67755336E09B32D60C0226219EFDD0D5EE8DE48356AF6502A8752E6EA2FB3C737474F4A471EC9C181858A4D83748C9F55B4F20F6946F1F9B6F8B9E4E73717BF87F0C04F828A9C543BFA87C88CC5095C5F31570377C55EB88CF0E3E42`

我的问题是，如何将 cookie 中的值转换为实际值（如果您试图在没有 .net 的情况下访问它）

或者这是你真的无法绕过的一层加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:40:37.613

I think that is what you looking for.

```
string userData = "ApplicationSpecific data for this user.";
  FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
    username,
    DateTime.Now,
    DateTime.Now.AddMinutes(30),
    isPersistent,
    userData,
    FormsAuthentication.FormsCookiePath);

  // Encrypt the ticket.
  string encTicket = FormsAuthentication.Encrypt(ticket);

  // Create the cookie.
  Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket)); 
```

[http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)

encTicket contains the value you need.

# scala - Scala - 在伴生对象中实现“管理器”模式？

> ID：10428056
> 
> 赞同：2
> 
> 时间：2012-05-03T08:52:13.150
> 
> 标签：scala, design-patterns

当我使用 Java 进行编程时，我曾经为它们提供对象和管理器。你知道，一个类（通常是单例），它将保存某个类的对象的集合，并可以方便地管理它们。现在，在 Scala 中，我发现自己越来越处于这种情况下，将所有功能放在伴随对象中并避免创建不同的管理器对象是很诱人的。

这一切都始于为实例提供 ID，然后......为什么不在伴随对象中包含集合？如果集合在那里，为什么不把所有的方法都放在里面呢？因此，不再需要经理。然而，一个特点是伴随对象通常只有一个名称 like `Car`（不喜欢`Cars`或`CarManager`假定多个），因此使用复数操作的方法在与对象名称的耦合措辞中看起来很奇怪。

我想知道您对这种情况的看法，并想知道这种方法是否比看似不必要的臃肿经理模式更可取。对任何文章的任何引用也将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:24:14.590

越简单越好；对象内部的集合确实很简单。但是，您还应该避免使您的对象依赖于静态对象。这将创建一个刚性结构，并使测试更加困难。

我会看一下 cake-pattern（请参阅[How do you do dependency injection with the Cake pattern without hardcoding?](https://stackoverflow.com/questions/5172188/understanding-scalas-cake-pattern)）。这样，您可以将 CarManager 放在一个对象中，并通过 CarRepositoryComponent 将其混合到您的依赖项中。

非编译示例：

```
val someService = new SomeService 
  with MyRepairServiceComponent with CarCollectionRepositoryComponent
someService.repairCar(8)

trait SomeService extends RepairServiceComponent with CarRepositoryComponent {
  def repairCar(id: Int): Status = repairService.repair(carRepository.get(id));
}

trait CarRepository {
  abstract def get(id: Int): Car
}
trait CarRepositoryComponent {
  abstract def carRepository: CarRepository
} 

object CarManager extends CarRepository {
  private var cars = Map[Int, Car]()
  def get(id: Int): Car = cars(id)
}
trait CarCollectionRepositoryComponent {
  def carRepository = CarManager
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T09:26:43.300

这有效地将伴随对象变成了单例，这更像是一种反模式，而不是良好设计的模式。单元测试是这个问题的主要原因（这已经被许多比我聪明的人多次讨论过）。

*由于这些原因，理想*的对象不应该保持任何类型的可变状态（相信我，这将导致维护噩梦）。

# c# - c#动态行为？

> ID：10428058
> 
> 赞同：2
> 
> 时间：2012-05-03T08:52:16.143
> 
> 标签：c#, dynamic, .net-4.0, clr, dynamic-language-runtime

我有这个代码：

```
static dynamic Mean (dynamic x, dynamic y)
{
  return (x + y) / 2;
}

static void Main()
{
  int x = 3, y = 5;
  Console.WriteLine (Mean (x, y)); //this is working
} 
```

但是以下行在运行时失败：

```
string s = Mean (3, 5); // Runtime error! 
```

这是为什么 ？

为什么`s`不能设置*动态值*？

`Console.WriteLine (...)` *如果是这样*，为什么以这个*动态值*成功运行？

## 编辑

如果是这样，我该如何`string s = Mean (3, 5);`工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T08:54:37.580

因为在这种情况下，您试图将 int 值设置为您的字符串变量。

`Console.WriteLine``.ToString()`在控制台写入之前自动执行。试试这个。

```
int x=5;
Console.WriteLine(x); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T08:59:14.147

如果静态编写，您的代码必须有效。

使用动态只是意味着类型检查被推迟到运行时。在您的情况下，意思是返回一个 int。因此，您试图将 int 分配给不合法的字符串。

从类型上看，您的代码与使用以下均值实现的代码之间没有区别

```
int Mean(int x, int y){
   return (x+y)/2;
} 
```

下面的语句会导致编译错误

```
string s = Mean(3,5); 
```

通过使用动态作为返回类型和 x 和 y 的类型，您只是告诉编译器不要检查类型，而是将类型检查留给运行时。您的示例代码中的检查与编译器执行的检查*基本*相同，结果也相同。转让是非法的。

`Console.WriteLine`有一个采用 int 的重载，因此类型检查成功，在这种情况下一切正常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:02:04.207

Console.WriteLine 调用对象的 ToString() 方法。在运行时，当您在动态对象（一个 int）上调用 ToString() 时，没有问题。但是，在您的第二个示例中，您实际上是在尝试将 int 放入字符串中，这就是它抱怨的原因。

我相信这会让你做你想做的事。

```
string s = (Mean (3, 5)).ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T08:57:40.530

```
dynamic s = Mean (3, 5); 
```

或者

```
var s = Mean(3, 5); 
```

# c# - 如何证明 .NET 类 Random 不适合生成密码？

> ID：10428059
> 
> 赞同：5
> 
> 时间：2012-05-03T08:52:32.557
> 
> 标签：c#, .net, random

我经常看到.NET`class Random`被用于密码生成。

一方面，[我之前提出的这个问题](https://stackoverflow.com/q/3307275/57428)表明，使用生成一堆“秘密”数据会`class Random`产生相当可预测的数据。另一方面，我目前正在尝试执行准确的预测，并且我的代码在单个内核上以每天大约 600 万次种子猜测的速度工作 - 不是非常快，枚举所有可能的种子值需要将近一年的时间以这个速度。

有没有一种更清晰、更快捷的方法来表明使用来自的数据生成的密码`class Random()`比通常预期的要弱得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:27:09.507

让我这样说：选择一个足以满足您要生成的密码数量的随机数生成器。如果字母大小为 36（数字且只有大写字母或只有小写字母），您只能提取 RNG 内部状态的一小部分。即使您以这种方式生成 40000 个字符，也仍然只有大约 21 位信息。除了前缀之外，您在另一个问题中的算法仅生成 4 个随机字符。攻击者更容易暴力破解所有可能的密码，而不是暴力破解 RNG 状态以找出要生成的下一个密码。

实际上，使用简单的 RNG 生成密码时，您可能会犯的最严重的错误是生成大量密码。如果你只按需生成它们并且总是使用新种子的 RNG，那么攻击者将很难找出种子和密码。System.Random 的默认实现将系统启动后经过的时间（以毫秒为单位）作为种子。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:08:44.973

据我了解，`Random`该类基于“伪随机算法”生成随机值，因此实际上它们并不是随机的。它们基于数学算法的具体实现，因此结果是可预测的。

因此，如果我试图破解这个算法，出于安全漏洞，而不是我愿意，我需要知道某些信息：我知道算法是什么，它可以通过 .Net 框架公开访问，输入值是什么（种子）？

同样，您不能只是想出这些输入值，它们必须基于某些东西，那又如何？

在您的示例中，据我所知，您尝试生成所有可能的种子值。就像你说的那样需要很长时间！

但我为什么要这样做？最聪明的方法是尝试猜测您使用什么来生成输入值？即你在使用时间吗？什么时候重置密码？这个密码是什么时候生成的？这给了我什么价值子集？你用多大的数字？

如果您可以在一天内测试 600 万颗种子，那么应用一些逻辑可以将可能值集缩小到多少个值？如果小于 600 万，我可以在 24 小时内破解您的密码。

也就是说，如果您可以使您的种子子集足够大且足够不可预测，那么这很难。所以问题是，就像安全领域的许多事情一样，这需要有多安全？没有什么是100%！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:11:02.267

在您最初的问题中，没有人说 Random 不适合生成随机密码（实际上“密码”这个词不会出现在问题、答案或评论中的任何地方）。您将很难证明这一点，因为为了做到这一点，系统必须一次生成多个随机密码。即使攻击者设法获得大量密码，攻击者也需要以某种方式匹配用户名和密码。

# xaml - 如何在没有列表的情况下进行语义缩放

> ID：10428071
> 
> 赞同：0
> 
> 时间：2012-05-03T08:53:16.317
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我有一个包含不同部分的页面，每个部分是一列，网格中的网格，没什么特别的......每个部分都有一个标题，如“历史”、“分数”、“评论”等。当然，每个人看起来都与其他人不同。

我想做一个语义缩放，在缩小视图中有标题。

我试图从原始页面制作一个 ListView，但在涉及到组时得到了库存。我无法从代码中设置组（或者请告诉我如何），因为每个组都有一个项目，并且它们具有不同的外观。如何从 XAML 进行分组？

有这样的东西存在吗？

```
<ListView.Groups>
    <Group Name="History>
       <GroupItem>
          <Grid.../>
       </GroupItem>
    </Group>
    <Group Name="Score"...../>
</ListView.Groups> 
```

我尝试错误的方式吗？哪个是正确的？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:06:47.587

您可以使用以下格式将组数据绑定到缩小视图中的 ListView。

```
<SemanticZoom Name="zoom">
  <SemanticZoom.ZoomedInView>
<!-- place your normal view here -->
  </SemanticZoom.ZoomedInView>

  <SemanticZoom.ZoomedOutView>
<ListView>
     <ListView.ItemTemplate>
        <DataTemplate>
          <!-- bind group data here -->
           <TextBlock Text="{Binding Groupname"/>
       </DataTemplate>
     </ListView.ItemTemplate>
</ListView>
  </SemanticZoom.ZoomedOutView>
</SemanticZoom> 
```

# ios - 在 iOS 上以 30fps 播放 200fps 视频

> ID：10428073
> 
> 赞同：4
> 
> 时间：2012-05-03T08:53:19.020
> 
> 标签：ios, video, avfoundation, avassetreader, mpmediaplayercontroller

我正在寻找在 iPhone 上以慢动作 (30fps) 播放视频 @200fps 的可能性。MPMediaPlayer 不是解决方案。视频（600 帧 ~3 秒）在 2 秒内播放。我想要 30fps ~ 20 秒。

我已将 currentplaybackrate(myMPMoviePlayerController) 设置为 0.2 和 0.1，但视频仅持续 5 秒……我不知道为什么。

是否可以在 iPhone 上播放 @200 fps 的视频？兼容吗？在本[文档](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html#//apple_ref/doc/uid/TP40007898-CH9-SW6)中，仅提到了 30 fps 的最大帧数。如果我将视频转换为 30 fps（所以我得到 20 sec@30 fps），我无法实时播放（快 6 倍）

我可以在 AVFoundation 框架中实现它吗？

有什么建议么？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:15:41.657

您可以使用 MpMediaPlayer 的[currentPlaybackRate](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMediaPlayback_protocol/Reference/Reference.html#//apple_ref/occ/intfp/MPMediaPlayback/currentPlaybackRate)并指定播放速度，如下所示：

```
[myMPMoviePlayerController setCurrentPlaybackRate:0.2]; 
```

您甚至可以反向播放具有负值的剪辑

# salesforce - 如何在自定义按钮单击中保存机会中的活动历史记录？

> ID：10428075
> 
> 赞同：0
> 
> 时间：2012-05-03T08:53:31.607
> 
> 标签：salesforce

我在机会页面中有两个按钮，一个是默认的“保存”，另一个是自定义按钮“发送确认”

当用户单击“保存”按钮时，活动历史记录被保存（不知道它是如何发生的）

单击自定义按钮时需要相同的功能。

任何人都有任何想法..请帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:05:04.207

活动历史记录跟踪已完成的任务和电子邮件。它发生在数据库级别的深处，与按钮本身无关。当您说活动历史记录在保存时更新时，它是如何更新的？您在后台是否有发送电子邮件或创建已完成任务的触发器？

# c# - 比较 IEnumerable 到 IEnumerable > 高效

> ID：10428080
> 
> 赞同：0
> 
> 时间：2012-05-03T08:53:50.993
> 
> 标签：c#, .net, linq, lambda

我有一个 IEnumerable 类集合和第二个 IEnumerable 集合，其中包含一个返回相同的函数。例如：

```
IEnumerable<MyClass1> list1;
IEnumerable<MyClass2> list2; 
```

MyClass2 包含 MyClass1 的内部集合，其功能如下：

```
Public MyClass2
{
    private IEnumerable<MyClass1> internalCollection;

    public IEnumerable<MyClass1> ReturnDuplicates(IEnumerable<MyClass1> duplicates
    {                        
        return internalCollection.Where(l => duplicates.Select(d => d.ID).ToString() == l.ID.ToString());
    }
    ...
} 
```

然后我有一个函数来比较两者：

```
// Function to return a flag indicating if the two lists contain 
// any of the same data
public bool CheckDuplicates(IEnumerable<MyClass1> col1, IEnumerable<MyClass2> col2)
{
    // The following check is wrong as it returns null
    IEnumerable<MyClass1> dupe =                
            col2.Where(w => w.ReturnDuplicates(col1).Count() != 0)
                        as IEnumerable<MyClass1>;

    return (dupe.Count() != 0);
} 
```

CheckDuplicates() 中的上述语句返回 null。但是，在即时窗口中：

```
col2.First().ReturnDuplicates(col1).Count() 
```

返回 1

我想我知道问题的原因 - 声明正在返回

```
IEnumerable<MyClass2> 
```

那么这种检查是否可以在没有 foreach 语句的情况下进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:02:31.507

你为什么要选角`IEnumerable<MyClass1>`？欺骗的类型似乎是`IEnumerable<MyClass2>`。这就是为什么你的变量是`null`.

您可以尝试以下代码：

```
return col2.Any(w => w.ReturnDuplicates(col1).Any()) 
```

`.Any()`避免了`.Count()`. 一旦找到匹配项，它将立即停止枚举。

# python - 使用关键字参数调用函数

> ID：10428087
> 
> 赞同：0
> 
> 时间：2012-05-03T08:54:29.917
> 
> 标签：python, syntax

（实在想不出更好的标题了！）

我有一组功能：

```
def foo(bar, baz)
def spam(blah, etc, woof) 
```

和一个[命名空间](http://docs.python.org/library/argparse.html#argparse.Namespace)对象，其中包括函数名称和特定于函数的参数，例如`args=(fun=foo, baz=111, baz=222)`. 如何调用该函数并将参数传递给它？像这样，但更好：

```
 x = vars(args)
 fun = x['fun']
 del x['fun']
 fun(**x) 
```

（我正在寻找一个不错的单线解决方案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:02:08.660

什么时候`aDict`是带有函数名称的字典，`"fun"`您可以尝试以下键和其他参数：

`aDict.pop("fun")(**aDict)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:15:40.427

你想要`x['fun'](**x)`吗？

只要您的函数带有`**kwargs`参数，这将起作用。如果没有，您将不得不做一些事情来将您想要的条目从命名空间中分割出​​来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:58:07.577

我不确定您要的是什么，但这应该会给您类似的结果：

```
def callback(fun, *args, **kwargs):
    return fun(*args, **kwargs) 
```

然后你可以这样称呼它：

```
callback(some_func, 'a', 'b', c=10, d=123) 
```

这将反过来调用：

```
some_func('a', 'b', c=10, d=123) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T09:07:47.027

我不会为您提供解决方案，但这里有一个提示：

```
>>> import inspect
>>> def g(a, b, c=3):
pass

>>> inspect.getargs(g.func_code)
Arguments(args=['a', 'b', 'c'], varargs=None, keywords=None) 
```

所以现在你知道了参数和它们的顺序，你可以有效地使用 Namespace 对象。注意：这可能只能在 C-Python 中实现！

调用函数使用这个：

```
>>> arguments = (1, 2, 3)
>>> keywords = {}
>>> g(*arguments, **keywords) 
```

祝你今天过得愉快！

# ios - 我不希望那个放大镜出现在 UITextView 下面

> ID：10428094
> 
> 赞同：0
> 
> 时间：2012-05-03T08:54:53.633
> 
> 标签：ios, uitextview

我有一个 UITextView。如果我选择一些文本，会出现放大镜。UITextView 下方可能会出现放大镜。是否可以限制放大镜边界？

![在此处输入图像描述](../Images/fe943d565c2984f19bcf1c2a1002cf9a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:06:22.680

您需要像这样子类化`UITextView`并覆盖`canPreformAction`：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    BOOL can = [super canPerformAction:action withSender:sender];

    if(action == @selector(paste:) || action == @selector(selectAll:) || action == @selector(select:))
        can = NO;

    return can;
} 
```

这将阻止 UIMenuController 出现 .. 但仍会显示放大镜。

# jsf - 无法在数据库 Java EE 中保留实体

> ID：10428096
> 
> 赞同：0
> 
> 时间：2012-05-03T08:55:13.940
> 
> 标签：jsf, jakarta-ee, jpa

我是 Java EE 的初学者，我正在尝试创建一个在数据库中保留用户实体的应用程序。我有以下代码：

用户实体

```
 @Entity
    public class User implements Serializable {
        private static final long serialVersionUID = 1L;

        @Id
        @GeneratedValue(strategy=GenerationType.AUTO)
        private int id;

        private String department;

        @Email
        private String email;

        @Column(name="`first name`")
        private String firstName;

        @Column(name="`last name`")
        private String lastName;

        private String password;

        //bi-directional many-to-one association to Unit
        @OneToMany(mappedBy="user")
        private Set<Unit> units;

    public User() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getDepartment() {
        return this.department;
    }

    public void setDepartment(String department) {
        this.department = department;
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getlastNameame() {
        return this.lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Set<Unit> getUnits() {
        return this.units;
    }

    public void setUnits(Set<Unit> units) {
        this.units = units;
    }

} 
```

用户无状态会话 bean

```
 @Stateless
public class userEJB {

    @PersistenceContext
    private EntityManager em;
    /**
     * Default constructor. 
     */
    public userEJB() {
        // TODO Auto-generated constructor stub
    }

    public void createUser(User user)
    {
        em.persist(user);
    }

} 
```

用户托管 Bean（只实现了 create 方法）

```
 public class UserMBean {

    @EJB
    userEJB userSessionBean;

    private User user;

    public UserMBean() {
        this.user = new User();
    }

    public void save()
    {
        userSessionBean.createUser(user);
    }

} 
```

注册.xhtml

```
 <h:form>
            <h:panelGrid columns = "2">
                <h:outputLabel for="firstName" value="First Name"/>
                <h:inputText id="firstName" value="#{userMBean.user.firstName}" required = "true"/>
                <h:outputLabel for="lastName" value="Last Name"/>
                <h:inputText id="lastName" value="#{userMBean.user.lastName}" required = "true" />
                <h:outputLabel for="department" value="Department"/>
                <h:inputText id="department" value="#{userMBean.user.department}" required = "true"/>
                <h:outputLabel for ="email" value="Email"/>
                <h:inputText id="email" value="#{userMBean.user.email}" required = "true"/>
                <h:outputLabel for="password" value="Password"/>
                <h:inputText id="password" value="#{userMBean.user.password}" required = "true"/>

            </h:panelGrid>
            <h:commandButton action="#{userMBean.save}" value="Submit" />
        </h:form> 
```

尽管 from 正在正确显示，但在单击“提交”按钮时它什么也没给出。没有服务器错误。它根本没有发出任何信号。如果我的代码有任何错误，你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:15:31.847

你一次有太多事情要做。

当您单击提交按钮时，您说什么都没有发生。为什么需要 UI 来验证持久层是否正常工作？编写一个除了执行持久性代码之外什么都不做的单元测试。隔离已完成的工作，直到您解决问题。

如所写，您不知道您的持久性是坏的，还是会话 bean 或 UI。

# ruby-on-rails - 如何在范围内使用 grouped_select group_method？

> ID：10428097
> 
> 赞同：0
> 
> 时间：2012-05-03T08:55:16.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, scope, simple-form

我尝试将 grouped_selects group_method 与自定义范围一起使用。用户只能看到他所属的项目和任务。

这是有效的，我得到了我所有的带有任务的项目来选择：

```
# using simple_form
<%= f.input :project_id, :as => :grouped_select,
            :collection => Project.my_scope(current_user),
            :group_method => :tasks %> 
```

这是行不通的。我尝试从 my_scope 获取任务。

```
# using simple_form
<%= f.input :project_id, :as => :grouped_select,
            :collection => Project.my_scope(current_user),
            :group_method => Task.my_scope(current_user) %> 
```

**更新**

我也用 rails default helper 试过这个，这似乎有效：

```
<%= f.grouped_collection_select(:project_id,
                                Project.my_scope(current_user),
                                :"tasks.my_scope(#{current_user.id})",
                                :name, :id, :name) %> 
```

这是一种常见的做法还是有其他方法可以满足我的需求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:04:02.103

它不起作用，因为`:group_method`指定了要调用的方法，按返回的内容对选择进行分组

所以范围不能在那里使用。你想达到什么结果？可能您可以限制您的收藏 - 如果您只想显示带有 current_user 任务的项目（只是假设）那么您可以这样做

```
# using simple_form
<%= f.input :project_id, :as => :grouped_select,
            :collection => Project.my_scope(current_user).joins(:tasks).where(:assigned_to => current_user),
            :group_method => :task %> 
```

# windows - 最后的 WP7 水平列表框项目被切断

> ID：10428098
> 
> 赞同：2
> 
> 时间：2012-05-03T08:55:16.507
> 
> 标签：windows, windows-phone-7, listbox, items

我遇到了这个令人沮丧的问题，我的列表框中的最后几个项目被切断了。

我已将列表框设置为水平滚动和显示。我的 ItemPanelTemplate 包含一个 VirtualizedStackPanel （当我使用普通的堆栈面板时，我的列表框只显示有限数量的项目，而虚拟一个显示除最后两个之外的所有项目）

我必须指出，当我将其从水平更改为垂直时，一切正常，这是我的 xaml。

请帮忙

```
<Grid Name="JumpTo" Visibility="Collapsed" Background="#FF0A0909" Opacity="0.95" >
    <TextBlock Text="Jump To"/>
    <ListBox ItemsSource="{Binding}" 
             HorizontalAlignment="Left" 
             Name="lbJumpTo" 
             VerticalAlignment="Top" 
             SelectionChanged="lbJumpTo_SelectionChanged" 
             Height="248" Width="623" 
             Margin="34,77,0,0" ScrollViewer.HorizontalScrollBarVisibility="Auto">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal"></VirtualizingStackPanel>
            </ItemsPanelTemplate>    
        </ListBox.ItemsPanel>

        <ListBox.ItemTemplate>
            <DataTemplate>

                <StackPanel Orientation="Vertical" Width="200" Height="160">

                    <Grid x:Name="gridLoop" Height="90" Width="150" Background="{x:Null}">
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Image Source="{Binding LoopDisplayMatrix[0][0]}" Grid.Row="0" Grid.Column="0" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][1]}" Grid.Row="0" Grid.Column="1"  Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][2]}" Grid.Row="0" Grid.Column="2"  Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][3]}" Grid.Row="0" Grid.Column="3"  Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][4]}" Grid.Row="0" Grid.Column="4" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][5]}" Grid.Row="0" Grid.Column="5" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][6]}" Grid.Row="0" Grid.Column="6" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[0][7]}" Grid.Row="0" Grid.Column="7" Width="20" Height="20"/>

                        <Image Source="{Binding LoopDisplayMatrix[1][0]}" Grid.Row="1" Grid.Column="0" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][1]}" Grid.Row="1" Grid.Column="1" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][2]}" Grid.Row="1" Grid.Column="2" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][3]}" Grid.Row="1" Grid.Column="3" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][4]}" Grid.Row="1" Grid.Column="4" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][5]}" Grid.Row="1" Grid.Column="5" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][6]}" Grid.Row="1" Grid.Column="6" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[1][7]}" Grid.Row="1" Grid.Column="7" Width="20" Height="20"/>

                        <Image Source="{Binding LoopDisplayMatrix[2][0]}" Grid.Row="2" Grid.Column="0" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][1]}" Grid.Row="2" Grid.Column="1" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][2]}" Grid.Row="2" Grid.Column="2" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][3]}" Grid.Row="2" Grid.Column="3" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][4]}" Grid.Row="2" Grid.Column="4" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][5]}" Grid.Row="2" Grid.Column="5" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][6]}" Grid.Row="2" Grid.Column="6" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[2][7]}" Grid.Row="2" Grid.Column="7" Width="20" Height="20"/>

                        <Image Source="{Binding LoopDisplayMatrix[3][0]}" Grid.Row="3" Grid.Column="0" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][1]}" Grid.Row="3" Grid.Column="1" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][2]}" Grid.Row="3" Grid.Column="2" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][3]}" Grid.Row="3" Grid.Column="3" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][4]}" Grid.Row="3" Grid.Column="4" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][5]}" Grid.Row="3" Grid.Column="5" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][6]}" Grid.Row="3" Grid.Column="6" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[3][7]}" Grid.Row="3" Grid.Column="7" Width="20" Height="20"/>

                        <Image Source="{Binding LoopDisplayMatrix[4][0]}" Grid.Row="4" Grid.Column="0" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][1]}" Grid.Row="4" Grid.Column="1" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][2]}" Grid.Row="4" Grid.Column="2" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][3]}" Grid.Row="4" Grid.Column="3" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][4]}" Grid.Row="4" Grid.Column="4" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][5]}" Grid.Row="4" Grid.Column="5" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][6]}" Grid.Row="4" Grid.Column="6" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[4][7]}" Grid.Row="4" Grid.Column="7" Width="20" Height="20"/>

                        <Image Source="{Binding LoopDisplayMatrix[5][0]}" Grid.Row="5" Grid.Column="0" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][1]}" Grid.Row="5" Grid.Column="1" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][2]}" Grid.Row="5" Grid.Column="2" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][3]}" Grid.Row="5" Grid.Column="3" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][4]}" Grid.Row="5" Grid.Column="4" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][5]}" Grid.Row="5" Grid.Column="5" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][6]}" Grid.Row="5" Grid.Column="6" Width="20" Height="20"/>
                        <Image Source="{Binding LoopDisplayMatrix[5][7]}" Grid.Row="5" Grid.Column="7" Width="20" Height="20"/>

                    </Grid>

                    <StackPanel Orientation="Vertical" Height="50" Width="100">
                        <TextBlock Text="{Binding LoopName}" Width="150" Height="40"  />
                        <TextBlock Text="{Binding TempoDisplay}" Width="150" Height="40"  />
                    </StackPanel>

                </StackPanel>

            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T22:28:15.677

干杯 Senthil Kumar。我将数据模板中顶部堆栈面板的宽度设置为自动，这解决了我的问题。

# java - 线程“main”中的异常 java.lang.NullPointerException (15-Puzzle)

> ID：10428104
> 
> 赞同：-1
> 
> 时间：2012-05-03T08:55:46.803
> 
> 标签：java, algorithm, artificial-intelligence, puzzle

首先，这个问题是关于 15-Puzzle 的。我正在尝试学习如何用 Java 语言对其进行编码。

我必须在我的大学学习关于 IDA* 算法的人工智能，并找到了 Brian Borowski 的这个链接：http: [//brian-borowski.com/Software/Puzzle/](http://brian-borowski.com/Software/Puzzle/)这是一个很好的链接，但我有一个错误当我试图在我的 Eclipse 上手动构建它时。

有谁能够帮我？我收到一条错误消息：

```
Exception in thread "main" java.lang.NullPointerException
    at Puzzle.setNumOfTiles(Puzzle.java:45)
    at Puzzle.<init>(Puzzle.java:25)
    at GUI.<init>(GUI.java:196)
    at Application.<init>(Application.java:19)
    at Application.main(Application.java:27) 
```

我已经尝试追踪错误，谷歌搜索，但我仍然找不到解决方案。它说当某些变量具有空值时会发生 NullPointerException。有人可以在这里帮助我吗？

这是源代码

**应用程序.java**

```
public class Application {

    /**
     * Default constructor.
     * Creates an instance of the gui.
     */
    public Application() {
        ApplicationStarter appStarter = null;
        new GUI(appStarter); // Line 19
    }

    /**
     * Main method.
     * Creates an instance of the application.
     */
    public static void main(final String[] args) {
        new Application(); // Line 27
    }
} 
```

**拼图.java**

```
public Puzzle(final int numOfTiles) {
    super();
    setNumOfTiles(numOfTiles); // Line 25
    setSize(panelWidth, panelHeight);
    setDoubleBuffered(true);
}

public void setNumOfTiles(final int numOfTiles) {
    this.numOfTiles = numOfTiles;
    dimension = (int)Math.sqrt(numOfTiles);
    imageArray = new Image[numOfTiles];
    final String file = "images/" + (numOfTiles - 1) + "-puzzle/shrksign_";
    imageArray[0] = null;
    for (int i = 1; i < numOfTiles; ++i) {
        final StringBuilder builder = new StringBuilder(file);
        if (i <= 9) {
            builder.append("0");
        }
        builder.append(Integer.toString(i));
        builder.append(".gif");
        imageArray[i] = ImagePanel.getImage(builder.toString());
    }
    imageWidth  = imageArray[1].getWidth(null); // Line 45
    imageHeight = imageArray[1].getHeight(null);
    panelWidth  = imageWidth * dimension;
    panelHeight = imageHeight * dimension;
    state = new byte[numOfTiles];
    sleepMs = 500 / imageWidth;
    animationDone = true;
    resetOrder();
} 
```

**图形用户界面.java**

```
...

this.puzzle = new Puzzle(PuzzleConfiguration.getNumOfTiles());

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:03:39.757

显然，`imageArray[1]`持有一个空值。可能是 ImagePanel.getImage() 返回`null`元素 1，或者 numOfTiles >= 1，因此循环不会运行。

您的循环从 i 开始并以预增量开始，这意味着 i = 1 没有循环运行（第一次迭代以 i = 2 运行）。我会用这个表格

```
for (int i = 1; i <= numOfTiles; i++) { 
```

编辑：

托马斯是对的；这样，要么 numOfTiles 太低（1 或更少），要么`ImagePanel.getImage`返回 null（缺少资源文件？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:04:52.200

你已经用空值初始化了数组

```
imageArray = new Image[numOfTiles]; 
```

然后通过for循环设置它的值

```
imageArray[i] = ImagePanel.getImage(builder.toString()); 
```

但是设置的值是空的，当你尝试从空值调用方法时，你会在这一行得到 NULLPOINTEREXCEPTION

```
 imageWidth  = imageArray[1].getWidth(null); 
```

imageArray[1] 包含空值。打电话。在 null 上总是 caz NULLPOINTEREXCEPTION

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:02:15.510

您对异常的含义是完全正确的：

> 它说当某些变量具有空值时会发生 NullPointerException。

您需要做的是查看`setNumOfTiles`方法，特别是第 45 行（整个源文件，而不是方法），看看那里发生了什么。

很可能您正在使用未初始化的变量**或**将一个变量作为参数传递。

祝你好运。

# c# - 为什么使用 Fiddler 的 Http 请求非常快

> ID：10428113
> 
> 赞同：20
> 
> 时间：2012-05-03T08:56:39.683
> 
> 标签：c#, .net, httprequest, fiddler

我用 C# 编写了一个爬取网站的多线程程序，但是当我在后台启动 Fiddler 时，请求完成的速度提高了 12 倍，这对我来说真的很奇怪，当我关闭 Fiddler 时下载速度会变慢。怎么可能，请帮忙，（我的互联网连接和提琴手也没有代理设置）如果我可以在我的应用程序中注入提琴手的性能，那就太好了，有什么解决方案吗？幕后有什么魔力吗？？:)

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-05-21T17:16:06.093

原因是使用 Fiddler 时忽略的同时 http 连接数的限制。

我在使用`System.Net.Http.HttpClient`执行多个（〜80）并发请求时遇到了相同的行为。随着 Fiddler 的运行，所有请求的完成速度都快得多。Keep-alive 肯定是启用的。

我使用 Wireshark 查看发生了什么，我首先注意到 http 流量的方式不同。使用 Fiddler 请求被一次性抛出，响应也被很好地分组。如果没有 Fiddler，请求就会与响应交错。

其次，tcpview 显示我没有 Fiddler 的代码只打开了 2 个到服务器的 tcp 连接。随着 Fiddler 的启动，连接数显着增加。从我的应用程序到 Fiddler，然后从 Fiddler 到服务器，有几十个。

众所周知，http 标准建议 http 连接数不应超过 2，并且该限制似乎是 http 客户端中的默认设置。

在 .NET 应用程序中，我们可以使用`ServicePointManager.DefaultConnectionLimit`静态属性控制限制。作为一项实验，将其设置为 100 会使请求在有和没有 Fiddler 的情况下同时完成。

该设置也可以通过 app.config 进行控制：

```
 <system.net>
    <connectionManagement>
        <add address="*" maxconnection="100" />
    </connectionManagement>
</system.net> 
```

现在，为什么在使用 Fiddler 时不遵守默认连接限制？当 http 客户端使用代理并且 Fiddler 确实充当代理时，限制看起来是不同的。[除了这篇旧文章](http://blogs.msdn.com/b/jpsanders/archive/2009/06/29/understanding-connection-limits-and-new-proxy-connection-limits-in-wininet-and-internet-explorer.aspx)，我没有找到太多关于代理连接限制的信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-03T09:02:10.507

您能否展示一些示例代码以便人们确认这一点？否则会变成胡思乱想。

我最好的猜测：Fiddler[使用 keepalive](http://docs.telerik.com/fiddler/KnowledgeBase/OptionsUI)，这样可以省去一遍又一遍地打开连接的麻烦。`Reuse client connections`您可以通过禁用和来确认这一点`Reuse connections to servers`：如果它像往常一样慢（或更慢），则可以通过保持连接活动来获得好处。

# jquery - jquery 1.4.4 和 1.7.2 之间调整大小的差异

> ID：10428115
> 
> 赞同：0
> 
> 时间：2012-05-03T08:56:49.433
> 
> 标签：jquery

我一直在使用 JQuery 1.4.4 js 文件，当我调整大小时，我的元素变得透明并调整大小。因为我开始使用 FlexiGrid 需要将 JQuery 的版本更新到 1.6.2。现在，当我调整元素大小时，它只是在不透明的情况下向我展示新元素的位置和外观。使用 JQuery 1.7.2 它不再调整大小。

如何保留从 1.4.4 调整大小的功能并有可能使用 FlexiGrid？

我在互联网上搜索但没有发现类似的问题。

试图改变 UI js，但它不依赖于它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:03:31.263

我只为具有旧 JQuery 的页面和所有其他使用新的页面做了不同的包含。这是最快的。我还看到 JQuery 日历使用 1.3.2 版本。可能较新的版本有某种错误。

# qt - 透明小部件不随其父级移动

> ID：10428117
> 
> 赞同：2
> 
> 时间：2012-05-03T08:57:11.060
> 
> 标签：qt, qwidget, qmainwindow, qtgui

我创建了一个 Qt 应用程序，它显示了一个透明的小部件。我有另一个 Qt 应用程序已经在运行，它会显示一个表单。这个 Qt 应用程序将作为我的透明小部件的父级。更改透明小部件的父级后，当我移动父级 Qt 窗口时，我的透明小部件（现在是第二个 Qt 应用程序的子级）相对于其父级根本没有移动。

注意：如果我删除透明度代码，那么我的子小部件会跟随其父小部件并随之移动。

这是我的代码：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{

    ui->setupUi(this);

    setWindowFlags(Qt::FramelessWindowHint);
    setStyleSheet("background:transparent;");
    setAttribute(Qt::WA_TranslucentBackground);

    this->setGeometry(200,200,500,500);

    WId hMSTSCWindow = NULL;

    //hMSTSCWindow = FindWindow(TEXT("TSSHELLWND"), NULL);
    hMSTSCWindow = FindWindow(TEXT("QWidget"), TEXT("MainParent"));
    if(hMSTSCWindow != NULL)
    {
        SetParent(this->winId(),hMSTSCWindow );

    } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:19:29.393

根据 MSDN，任何不是顶级窗口的窗口都不应在 Windows 8 下透明。否则行为可能会像我正在经历的那样出乎意料。

# wxwidgets - 开发 c++ 编辑器在项目加载时关闭

> ID：10428120
> 
> 赞同：0
> 
> 时间：2012-05-03T08:57:21.013
> 
> 标签：wxwidgets, dev-c++

当我在 dev c++ 中加载现有项目时。加载一些文件后。Dev C++ 自动关闭。我不确定是什么原因。我是这个环境的新手。所以我很难解决或解决这个问题。任何人都可以帮助我解决问题吗？

环境：

操作系统：Windows XP；开发 C++：4.9.9.2 已安装 wxwidgets2.9.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:34:34.400

请考虑升级到[http://sourceforge.net/projects/orwelldevcpp/?source=directory 并重](http://sourceforge.net/projects/orwelldevcpp/?source=directory)试，或者迁移到任何其他 C/C++ IDE。

如果这个问题在新版本中仍然存在，请发送错误报告（我是当前的开发人员），或者阅读更长的 devc++ 标签描述以获取替代方案。

此外，您可能想看看 wxDev-C++，它是专门为支持 wx 而设计的。

# resources - SSIS 组件开发资源

> ID：10428121
> 
> 赞同：2
> 
> 时间：2012-05-03T08:57:26.093
> 
> 标签：resources, ssis, components

我的任务是为我的公司开发 SSIS 组件，其复杂性范围很广。将组件开发为单独的应用程序对我来说不是问题，但我真的很难找到 SSIS 组件开发资源。编码不是问题，但我正在努力寻找资源来解释架构。我知道大约有 5 种不同类型的组件，我目前不确定我会使用哪些。我找到的最好的资源是 SSIS SAMS Unleashed 书的最后几章。所以我的问题是任何人都可以推荐任何资源吗？我不敢相信周围没有更多的示例或教程。到目前为止我找到的资源如下。

[http://msdn.microsoft.com/en-us/library/ms136025.aspx](http://msdn.microsoft.com/en-us/library/ms136025.aspx) MSDN 资源 [http://bennyaustin.wordpress.com/2009/08/03/ccnv/](http://bennyaustin.wordpress.com/2009/08/03/ccnv/) - Benny Austin 关于信用卡验证的博客 [http:// /msftisprodsamples.codeplex.com/](http://msftisprodsamples.codeplex.com/) - CodePlex SSIS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:12:41.597

老实说，你不应该过分依赖大书和参考资料。我相信迈出一步，然后抬起头来学习你遇到的东西。

这样一来，您就需要一口气对抗整个庞然大物，同时仍然学习快速且有用的东西。

您可以使用[SQL Server Central](http://sqlservercentral.com "SQL Server 中央")作为大多数有关人们面临的体系结构、设计原则和技术挑战的查询的来源。[SSIS Talk](http://ssistalk.com)是另一个博客，您可以在其中看到有关挑战和问题的描述。

当我在 SSIS 工作时，我曾经参考和阅读过更多页面。我必须挖出我的美味帐户才能取回。也许我会在晚上晚些时候在这里编辑和更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:17:07.193

有很多信息可以在网上找到。一个很好的起点是 SQL Server 联机丛书：

[http://msdn.microsoft.com/en-us/library/ms141026.aspx](http://msdn.microsoft.com/en-us/library/ms141026.aspx)

# android-ndk - android中基于openssl的AES加密

> ID：10428125
> 
> 赞同：0
> 
> 时间：2012-05-03T08:57:46.037
> 
> 标签：android-ndk, openssl

我需要在 C 语言（ndk）中使用 AES 加密或解密字符串，我看到了很多关于如何为 android 编译 openssl 的问题，我需要知道 openssl 何时在 android 上可用，我们不能在 C 中使用相同的加密? 如果没有，我需要编译整个 openssl 库，是否有任何其他轻量级库可用于使用 ndk 在 android 中进行标准加密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:03:07.560

Openssl for android 不是 NDK 的一部分，所以你不能立即使用它。但是，Google 为其提供了一个 NDK 可编译代码库作为外部库（请参阅[https://github.com/android/platform_external_openssl](https://github.com/android/platform_external_openssl)）。您需要编译它然后使用它。如果你这样做了，看看[Building Android openssl using NDK doesn't make arm4 assembly files proper](https://stackoverflow.com/questions/4941513/building-android-openssl-using-ndk-doesnt-make-arm4-assembly-files-properly)。

至于轻量级库，您可以在[http://en.wikipedia.org/wiki/AES_implementations#C.2FASM_library](http://en.wikipedia.org/wiki/AES_implementations#C.2FASM_library)页面上找到 C 中的 AES 实现列表。但是，大多数库将具有丰富的功能，因此您将拥有大量不会使用的代码。相反，您可能会考虑将参考 AES 实现直接嵌入到您的代码中并使用它。一种这样的实现可以在[http://embeddedsw.net/Cipher_Reference_Home.html](http://embeddedsw.net/Cipher_Reference_Home.html)找到。

# php - joomla密码加密

> ID：10428126
> 
> 赞同：34
> 
> 时间：2012-05-03T08:57:46.787
> 
> 标签：php, codeigniter, joomla, md5

我需要访问 joomla 用户表`jos_users`以从外部 php 脚本 [codeignitor] 进行登录检查。

joomla 像这样存储密码

```
4e9e4bcc5752d6f939aedb42408fd3aa:0vURRbyY8Ea0tlvnTFn7xcKpjTFyn0YT 
```

看起来这不是正常的 MD5，所以我不能使用`md5(password)`。

创建密码的可能方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-05-03T09:05:57.003

Joomla 密码是 MD5 散列的，但密码在散列之前是加盐的。它们存储在数据库中，因为`{hash}:{salt}`该盐是长度为 32 个字符的随机字符串。

所以要创建一个新的密码哈希，你会做`md5($password.$salt)`

**编辑**

好的，所以对于检查密码，假设用户`myguy`输入密码`mypassword`，您将从数据库中检索具有 username 的行`myguy`。

在这一行中，您会找到一个密码 say `4e9e4bcc5752d6f939aedb42408fd3aa:0vURRbyY8Ea0tlvnTFn7xcKpjTFyn0YT`。您将密码哈希和盐分开：

```
$hashparts = preg_split (':' , $dbpassword);
echo $hashparts[0]; //this is the hash  4e9e4bcc5752d6f939aedb42408fd3aa
echo $hashparts[1]; //this is the salt  0vURRbyY8Ea0tlvnTFn7xcKpjTFyn0YT 
```

现在使用这个盐和`myguy`输入的密码计算哈希

```
$userhash = md5($userpassword.$hashparts[1]); // This would be 'mypassword' and the salt used in the original hash 
```

现在，如果这`$userhash`和`$hashparts[0]`相同，则用户输入了正确的密码。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-03T09:20:46.713

从 joomla 论坛，这就是背后发生的事情：

```
A. Generate a password
B. Generate a string with 32 random characters
C. Concatenate Password (Step A) and RandomString (Step B)
D. Take md5(Result of Step C)
E. store Step D Result : Step B Result 
```

例子：

```
Generate a password - Let 'testing'
Generate a string of 32 random characters - 'aNs1L5PajsIscupUskaNdPenustelsPe'
Concatenate Password and random string - testingaNs1L5PajsIscupUskaNdPenustelsPe
md5(Step C Result) - 5cf56p85sf15lpyf30c3fd19819p58ly
store step d:step B - 5cf56p85sf15lpyf30c3fd19819p58ly:aNs1L5PajsIscupUskaNdPenustelsPe 
```

您可以在 Joomla 中找到代码，例如

```
$salt = JUserHelper::genRandomPassword(32);
$crypt = JUserHelper::getCryptedPassword("testing", $salt);
$password = $crypt . ':' . $salt; 
```

或者我们可以说

```
password DB field = md5(password + salt) + ":" + salt 
```

其中 salt 是随机的 32 字符字符串。

谢谢

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T09:34:52.723

在 joomla 标准中，您可以使用以下方式创建密码

```
 jimport('joomla.user.helper');
             $salt = JUserHelper::genRandomPassword(32);
             $crypt = JUserHelper::getCryptedPassword($password_choose, $salt);
             $password = $crypt.':'.$salt; 
```

您提到您正在从外部文件（或程序）访问，那么如果您在另一侧安装了 joomla，您可以从 joomla 结构外部访问它。

像这样使用joomla默认框架

```
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );//this is when we are in the root
define( 'DS', DIRECTORY_SEPARATOR );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T09:45:20.143

我无法使用`preg_split`，但`explode`效果很好。

```
$hashparts = explode (':' , $dbpassword); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-21T06:26:14.440

从 joomla 源文件 library/joomla/crypt/password/simple.php 有多种存储方式，有些没有“：”字符。

```
 switch ($type)
    {
        case '$2a$':
        case JCryptPassword::BLOWFISH:
            if (JCrypt::hasStrongPasswordSupport())
            {
                $type = '$2y$';
            }
            else
            {
                $type = '$2a$';
            }

            $salt = $type . str_pad($this->cost, 2, '0', STR_PAD_LEFT) . '$' . $this->getSalt(22);

            return crypt($password, $salt);

        case JCryptPassword::MD5:
            $salt = $this->getSalt(12);

            $salt = '$1$' . $salt;

            return crypt($password, $salt);

        case JCryptPassword::JOOMLA:
            $salt = $this->getSalt(32);

            return md5($password . $salt) . ':' . $salt;

    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-02T09:47:46.180

Joomla！使用**PhPass**。

```
root/libraries/phpass/PasswordHash.php 
```

看看这里。您将在此处看到密码是如何生成的。

**$2y**是**bcrypt hashes**的默认（和首选）前缀。至于代码，您需要查看内部`JUserHelper's` `hashPassword`和`verifyPassword`方法，以了解 Joomla 现在是如何处理事物的。

* * *

# 一些参考资料——

[https://github.com/joomla/joomla-cms/blob/3.4.1/libraries/joomla/user/helper.php#L296-L387](https://github.com/joomla/joomla-cms/blob/3.4.1/libraries/joomla/user/helper.php#L296-L387)

[https://docs.joomla.org/API15:JUserHelper/getCryptedPassword](https://docs.joomla.org/API15:JUserHelper/getCryptedPassword)

[https://docs.joomla.org/API15:JUserHelper/getSalt](https://docs.joomla.org/API15:JUserHelper/getSalt)

检查链接，希望对您有所帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T09:03:34.260

Joomla 使用“普通”md5“理解”密码。

我过去所做的（测试用户的登录）是保存原始密码，在 md5 中加密一个新密码，在数据库中替换它，用浏览器测试它（它可以工作），当我是完成，将原始密码粘贴到数据库中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-30T19:10:46.360

```
<?php
$r = bin2hex(mcrypt_create_iv(16, MCRYPT_DEV_URANDOM));
$p = 'the_password';

$s = $p . $r;
$m = md5($s);

$out = $m . ':' . $r;
echo $out; 
```

Len 16 因为 bin2hex 将字符大小加倍，因为 1 字节变为 2 字节

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-07-25T22:43:24.400

如果你只使用 md5($password); 它会工作，试试吧。Joomla 有一种机制，它可以使用多种类型的密码（包括最近的强密码）。您不必担心冒号后面的部分。只需使用 md5($password) 就可以了。

顺便说一句，这也适用于 Joomla 3.x。

# javascript - 为什么HTML5拖放dragImage隐藏时不显示？

> ID：10428129
> 
> 赞同：2
> 
> 时间：2012-05-03T08:58:11.030
> 
> 标签：javascript, html, drag-and-drop

在将 HTML5 拖放中*的“dragImage”设置为**div*元素时，我遇到了问题。问题是当*setDragImage(helper, x, y)*函数的第一个参数没有出现在 dom 中或被隐藏时，当 'dragstart' 事件被触发时它是不可见的。看看我的小提琴：http: [//jsfiddle.net/AemN5/10/](http://jsfiddle.net/AemN5/10/)

> 在小提琴中，我正在渲染助手（它被着色为黄色），而不是尝试拖动绿色的可拖动框，当拖动开始时，助手会附加到鼠标上。但是，尝试单击助手上方的按钮以隐藏助手。比再次尝试拖动绿色可拖动框 - 我的鼠标没有附加助手。

有什么想法为什么会发生，更重要的**是如何解决问题？**因为我的主要目标是拥有不可见的助手，并且只有当用户开始拖动时才使其可见，附加到光标上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:09:49.183

这是一种可能的解决方案[http://jsfiddle.net/AemN5/12/](http://jsfiddle.net/AemN5/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T06:51:43.947

尝试这样做..
chrome 要求至少在拖动开始之前显示图像。

```
$("[draggable]").on("dragstart", function(e) {
    $("#img1").show();

    e.originalEvent.dataTransfer.setDragImage(helper, 50, 50);

    setTimeout(function(){
        $("#img1").hide();
    },0);
}); 
```

# c# - 在 c# windows 窗体应用程序中将 word 文档打开到特定点

> ID：10428132
> 
> 赞同：1
> 
> 时间：2012-05-03T08:58:32.207
> 
> 标签：c#, ms-word

首先，我必须承认我是一个非常新手的 c# 用户。我有一个我正在尝试的项目，基本上我只是在谷歌上搜索如何解决我遇到的问题。我没有太多的c#背景，所以请原谅我的无知。此外，如果它有所作为，我使用的是 c# 2010 express (4.0)。

我想在我的表单上有一个按钮在文档的特定部分打开一个 word 文档。例如，word 使用标题来构建目录。假设我想跳到“入门”部分。我应该使用 Browser 还是 Range 对象？我正在阅读 Range 对象，但不知道是否应该使用 wdGoToHeading 或 wdGoToSection。我更喜欢使用 wdGoToHeading （wdGoToSection 似乎我必须添加分节符，这会很麻烦）如果它允许我指定一个特定的标题来打开文档，但从阅读我能找到的内容来看，似乎我只能指定它打开“标题 1”，而不是使用标题 1 的“入门”部分。这是错误的吗？我会使用 wdGoToAbsolute 然后使用 count = n 转到第 n 个标题吗？

目前，我所拥有的是：

```
using Word = Microsoft.Office.Interop.Word;

System.Diagnostics.Process.Start("notes.docx"); 
```

将文档打开到文档的开头。

任何人都可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:29:25.197

.NET 4.0 具有更好且大大改进的办公室互操作性。我建议你在走错路之前先调查一下。看看这个例子：http: [//msdn.microsoft.com/en-us/library/ee317478.aspx](http://msdn.microsoft.com/en-us/library/ee317478.aspx)

要阅读 C# 中的 word 文档，请查看这篇文章：[http](http://www.c-sharpcorner.com/UploadFile/Globalking/fileAccessingusingcsharp02242006050207AM/fileAccessingusingcsharp.aspx?ArticleID=44e79e38-0cdc-4e5e-8574-63572d8cc112) ://www.c-sharpcorner.com/UploadFile/Globalking/fileAccessingusingcsharp02242006050207AM/fileAccessingusingcsharp.aspx?ArticleID=44e79e38-0cdc-4e5e-8574-63572d8cc112 。此示例使用旧的办公室互操作！

这是在 .NET 4.0 中：[http ://www.c-sharpcorner.com/uploadfile/dhananjaycoder/accessing-microsoft-office-interop-objects-using-C-Sharp-4-0/](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/accessing-microsoft-office-interop-objects-using-C-Sharp-4-0/)

我希望它能给你一些想法。

# android - 嵌套参数导致 kSOAP2 产生错误

> ID：10428133
> 
> 赞同：1
> 
> 时间：2012-05-03T08:58:36.390
> 
> 标签：android, ksoap2

我正在尝试发送带有嵌套参数的 SoapObject，但它会产生错误，尽管事实上我正在遵循 kSOAP 的指南......

我发送没有嵌套参数的 SoapObject 没有问题，但是一旦我必须发送嵌套，它就会崩溃......（唯一的区别是嵌套参数）......

这是我设置请求的方式：

```
void connection()
{
    Singleton service = Singleton.getInstance();
    String firstURL = service.getURL();
    URL = firstURL + "Attendance.svc";

    //Get parentID, parentToken
    String parentIDSingleton = service.getParentID();
    String parentTokenSingleton = service.getParentToken();

    //Get current time for GMT
    Calendar c = Calendar.getInstance(); 
    //Set format
    SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");

    //Save in string
    String formattedDate = df.format(c.getTime());      

    //Initialize soap request
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapObject nestedParameters = new SoapObject(NAMESPACE, "planInfos");

    //Add parameters
    request.addProperty("nAttendeeId", "*some value");

    //Add nested parameters
    nestedParameters.addProperty("day:Date", formattedDate);
    nestedParameters.addProperty("day:PlannedStatus", "Syg");
    request.addSoapObject(nestedParameters);

    //Declare the version of the SOAP request
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet=true;
    envelope.implicitTypes=true;
    envelope.setAddAdornments(false);

    //Prepare request
    envelope.setOutputSoapObject(request);

    //Set up the header
    Element parentID = new Element().createElement("ns", "parentId");
    parentID.addChild(Node.TEXT, parentIDSingleton);
    Element parentToken = new Element().createElement("ns", "parentToken");
    parentToken.addChild(Node.TEXT, parentTokenSingleton);
    Element authType = new Element().createElement("ns", "authType");
    authType.addChild(Node.TEXT, "Parent");
    Element kindergardenID = new Element().createElement("ns", "id");
    kindergardenID.addChild(Node.TEXT, "1");

    //Add the header
    Element header[] = {parentID, parentToken, authType, kindergardenID};
    envelope.headerOut = header;

    //Needed to make the internet call
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    //Allow for debugging - needed to output the request
    androidHttpTransport.debug = true;

    try 
    {
        //this is the actual part that will call the web service
        androidHttpTransport.call(SOAP_ACTION, envelope);

        //Get the SoapResult from the envelope body.            
        SoapObject sResult = (SoapObject)envelope.bodyIn;

    } catch(org.xmlpull.v1.XmlPullParserException ex2)
    {               
        System.out.println(androidHttpTransport.requestDump.toString());

    }  catch (Exception e)
    {
        e.printStackTrace();
        System.out.println(androidHttpTransport.requestDump.toString());
    }
} 
```

在[kSOAP2 网站上](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks)，他们说要设置这样的嵌套参数：

```
SoapObject users = new SoapObject(NAMESPACE, "users");
SoapObject john = new SoapObject(NAMESPACE, "user");
john.addProperty("name", "john");
john.addProperty("age", 12);
SoapObject marie = new SoapObject(NAMESPACE, "user");
john.addProperty("name", "marie");
john.addProperty("age", 27);
users.addSoapObject(john);
users.addSoapObject(marie); 
```

这就是我所做的...

有任何想法吗？？？

我得到的错误：

> 05-03 10:46:45.313: W/System.err(1855): java.net.UnknownHostException: kindergardentest.sms2go.dk 05-03 10:46:45.329: W/System.err(1855): 在 java。 net.InetAddress.lookupHostByName(InetAddress.java:506) 05-03
> 
> 10：46：45.329：W/System.err（1855）：在 java.net.InetAddress.getAllByNameImpl（InetAddress.java:294）05-03
> 
> 10:46:45.329: W/System.err(1855): 在 java.net.InetAddress.getAllByName(InetAddress.java:256) 05-03
> 
> 10:46:45.329: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:69)
> 
> 05-03 10:46:45.347: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:48)
> 
> 05-03 10:46:45.347: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
> 
> 05-03 10:46:45.347: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
> 
> 05-03 10:46:45.347: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
> 
> 05-03 10:46:45.347: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
> 
> 05-03 10:46:45.347: W/System.err(1855): 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
> 
> 05-03 10:46:45.371: W/System.err(1855): 在 org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
> 
> 05-03 10:46:45.371: W/System.err(1855): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:153)
> 
> 05-03 10:46:45.371: W/System.err(1855): 在 org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
> 
> 05-03 10:46:45.371: W/System.err(1855): 在 com.cim.daycare.AuthenticateConnection.connection(AuthenticateConnection.java:74)
> 
> 05-03 10:46:45.377: W/System.err(1855): 在 com.cim.daycare.DayCareActivity$AuthenticateUser.doInBackground(DayCareActivity.java:308)
> 
> 05-03 10:46:45.377: W/System.err(1855): 在 com.cim.daycare.DayCareActivity$AuthenticateUser.doInBackground(DayCareActivity.java:1)
> 
> 05-03 10:46:45.377: W/System.err(1855): 在 android.os.AsyncTask$2.call(AsyncTask.java:185) 05-03 10:46:45.377: W/System.err(1855 ): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
> 
> 05-03 10:46:45.377: W/System.err(1855): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 05-03
> 
> 10:46:45.377: W/System.err(1855): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
> 
> 05-03 10:46:45.388: W/System.err(1855): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
> 
> 05-03 10:46:45.388: W/System.err(1855): 在 java.lang.Thread.run(Thread.java:1019) 05-03 10:46:45.388:
> 
> 05-03 10:46:45.407: W/dalvikvm(1855): threadid=9: 线程退出未捕获异常 (group=0x40015560)
> 
> 05-03 10:46:45.420：E/AndroidRuntime（1855）：致命异常：AsyncTask #1 05-03
> 
> 10:46:45.420: E/AndroidRuntime(1855): java.lang.RuntimeException: 执行 doInBackground() 时出错
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 android.os.AsyncTask$3.done(AsyncTask.java:200)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:125)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.FutureTask.run(FutureTask.java:138) 05-03
> 
> 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): at java.lang.Thread.run(Thread.java:1019) 05-03 10:46:45.420: E/AndroidRuntime(1855): 原因： java.lang.NullPointerException
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): at com.cim.daycare.DayCareActivity$AuthenticateUser.doInBackground(DayCareActivity.java:311)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): at com.cim.daycare.DayCareActivity$AuthenticateUser.doInBackground(DayCareActivity.java:1)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 android.os.AsyncTask$2.call(AsyncTask.java:185)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
> 
> 05-03 10:46:45.420: E/AndroidRuntime(1855): ... 4 更多 05-03
> 
> 10:46:47.697: E/WindowManager(1855): Activity com.cim.daycare.DayCareActivity 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40517918
> 
> 05-03 10:46:47.697: E/WindowManager(1855): android.view.WindowLeaked: Activity com.cim.daycare.DayCareActivity 泄露了窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@40517918最初添加在这里
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.view.ViewRoot.(ViewRoot.java:258) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.view.Window$LocalWindowManager.addView(Window.java:424) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 android.app.Dialog.show(Dialog.java:241)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.app.ProgressDialog.show(ProgressDialog.java:107) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 android.app.ProgressDialog.show(ProgressDialog.java:90) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 com.cim.daycare.DayCareActivity$AuthenticateUser.onPreExecute(DayCareActivity.java:295)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.os.AsyncTask.execute(AsyncTask.java:391)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 com.cim.daycare.DayCareActivity.onCreate(DayCareActivity.java:154)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 android.os.Looper.loop(Looper.java:123)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-03
> 
> 10:46:47.697: E/WindowManager(1855): 在 java.lang.reflect.Method.invoke(Method.java:507)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 
> 05-03 10:46:47.697: E/WindowManager(1855): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 05-03
> 
> 10:46:47.697：E/WindowManager（1855）：在 dalvik.system.NativeStart.main（本机方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:47:36.337

添加您的清单文件此权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

然后再试一次。

# jira - 获取保存自定义字段的选项卡的名称

> ID：10428139
> 
> 赞同：1
> 
> 时间：2012-05-03T08:59:09.990
> 
> 标签：jira

有人知道 Jira 4.2 API 函数，它允许我返回屏幕中特定字段所在的选项卡吗？我需要能够提取选项卡名称并将它们链接到外部问题渲染器的字段，该渲染器需要自定义字段 ID 和选项卡名称以进行逻辑布局。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:41:07.697

我认为无论如何都找不到默认的 4.2 SOAP API。您可以编写自己的 SOAP 方法。或者也许将选项卡名称添加到字段描述并使用 getCustomFields ？

# r - 在同一图中创建 4 个百分比条形图，将每个图中的计数重置为 0

> ID：10428140
> 
> 赞同：0
> 
> 时间：2012-05-03T08:59:11.553
> 
> 标签：r, plot, ggplot2, facet-wrap

我有一个数据框（dat2）：

```
> summary(dat2)
     combs             label                   Groups    
 Min.   :    1.00   Length:21172       (0,1]      :1573  
 1st Qu.:    4.00   Class :character   (1,5]      :5777  
 Median :    9.00   Mode  :character   (5,12]     :5632  
 Mean   :   86.46                      (12,30]    :4061  
 3rd Qu.:   24.00                      (30,100]   :2976  
 Max.   :49280.00                      (100,5e+04]:1153 
```

我已经从 stackoverflow 收集了一些代码，以便创建一个显示百分比的 4 面图栏。

```
ggplot(dat2,aes(x=Groups)) + 
  stat_bin(aes(n=nrow(dat2), y=..count../n)) +
  scale_y_continuous(formatter = "percent") + 
  facet_wrap(~ label) 
```

问题是我想为每个子图重置计数器，因此每个标签组数据将除以该特定标签中的总行数而不是总数来计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:55:17.923

计算每个标签的观察次数并将其添加到您的数据集中

```
nLabel <- 4
nGroups <- 3
nObs <- 10000
dataset <- data.frame(label = factor(sample(nLabel, nObs, prob = runif(nLabel), replace = TRUE)))
library(plyr)
dataset <- ddply(dataset, .(label), function(x){
  data.frame(Groups = sample(nGroups, nrow(x), prob = runif(nGroups), replace = TRUE))
})
dataset$nLabel <- ave(dataset$Groups, by = dataset$label, FUN = length)
dataset$Groups <- factor(dataset$Groups)
library(ggplot2)
library(scales)
ggplot(dataset, aes(x = Groups)) + geom_histogram(aes(n = nLabel, y = ..count.. / n)) + facet_wrap(~label, scales = "free") + scale_y_continuous(label = percent) 
```

# php - 一段时间后，Gearman 工人没有反应

> ID：10428142
> 
> 赞同：1
> 
> 时间：2012-05-03T08:59:24.950
> 
> 标签：php, gearman

我有一个作为 Gearman 作业运行的 php 图像调整器脚本。Supervisord 已配置为在启动时运行调整大小工作程序。现在，当用户上传图像时，gearmand 将作业分配给位于另一台机器上的工作人员，该工作人员调整图像大小并将其发送回网络服务器。

该设置运行良好。问题是脚本在大约一个小时后停止运行。gearman 队列显示 1 个工人已注册，10 个作业正在等待（如果我上传了 10 张图像）和 0 个作业正在运行。如果我终止在 supervisord 下运行的 php 进程，supervisord 会立即重新启动该进程，并且我的所有图像都会调整大小。谁能告诉我为什么 php 脚本在一段时间后停止响应？

谢谢，阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:49:29.017

查看版本 0.32 或 0.33。Etsy 在服务器中发现了一个死锁错误，现已修复。

干杯，-布赖恩

# c# - 将变量从 JS 的一个函数传递给 JavaScript 的另一个函数

> ID：10428153
> 
> 赞同：-2
> 
> 时间：2012-05-03T09:00:13.287
> 
> 标签：c#, javascript, asp.net

我从 C# 调用 Showmenu() JavaScript 函数并将一个变量传递给该函数。现在我想在 JavaScript 的另一个函数中使用这个变量。

```
 <script type="text/javascript" >
 var strmenu;
 function ShowMenu(strmenu) {
 alert(strmenu); 
 }
 alert(strmenu);   
 ddsmoothmenu.init({
 mainmenuid: strmenu,  
 orientation: 'h',  
 classname: 'ddsmoothmenu',               
 contentsource: "markup")}
 </script> 
```

我`ShowMenu(strmenu)`在 c 中调用函数.....就像

```
menu_Sysadmin.Attributes.Add("OnClick", "javascript:return ShowMenu('sysadmin')"); 
```

我想使用`strmenu`from `showmenu()`in `ddsmoothmenu.init()`作为参数。警报显示了价值，但是当我尝试`strmenu`全局使用时，它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T09:04:00.573

您的`strmenu`参数隐藏了全局变量。您必须重命名函数的全局变量或参数，并在函数中执行赋值。

```
var menu;
function ShowMenu(strmenu) {
    menu = strmenu;
} 
```

# javascript - Javascript/Jquery 发布和获取？

> ID：10428155
> 
> 赞同：0
> 
> 时间：2012-05-03T09:00:23.120
> 
> 标签：javascript, jquery, mysql

是否有可能有一段代码或一个函数来执行以下操作。

我希望 javascript 文件使用变量向我的不同域发送请求。该网页将根据数据库检查变量并将结果返回到原始 javascript 文件为 TRUE 或 FALSE

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T09:03:28.473

如果您在域之间发送请求，您应该查看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)并`dataType`设置为`jsonp`使用脚本标记加载响应。

有关 JSONP 的更多详细信息：[https ://stackoverflow.com/search?q=jsonp](https://stackoverflow.com/search?q=jsonp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:23:13.040

我不知道 JSONP 并使用了不同的方法

```
$.ajax({
    type: "GET",
    crossDomain:true,
    url: 'http://otherdomain/check.php',
    success: function(data) { 
        // check.php response
    }
}); 
```

并在 check.php

```
<?php
$allowable_hosts = array('http://originaldomain','http://anotherdomain');
if (in_array($_SERVER['HTTP_ORIGIN'],$allowable_hosts))
    header('Access-Control-Allow-Origin: *');
//echo "ok"; - your check code
?> 
```

# c++ - QTcpSocket 写入数据结构

> ID：10428156
> 
> 赞同：0
> 
> 时间：2012-05-03T09:00:29.417
> 
> 标签：c++, qt, struct, qtcpsocket

我曾经使用 C++ 套接字发送一个结构，现在我尝试使用 QTcpSockets。这是结构：

```
const unsigned int uiMessageSize = 4;
    typedef struct {
        unsigned char uc_stx;
        unsigned char uc_add;
        unsigned char uc_state;
        unsigned char uc_eot;
        unsigned char uc_unused_padding[1024];
    } st_message; 
```

那么，为了写作，我曾经打电话给`write(sockfd, &messageToSend, uiMessagePcToMastSize);`

现在我正在尝试：`socket->write(&messageToSend, uiMessagePcToMastSize);`并且不起作用：**没有匹配函数调用 'QTcpSocket::write(mastControl::st_messagePcToMast*, const unsigned int&)**。

我搜索了更多信息，看起来我应该将结构转换为 QDataStrem，或者只是 QByteArray。我真的不知道如何处理这个问题。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:15:50.860

[文档](http://qt-project.org/doc/qt-4.8/qiodevice.html#write)显示 write 函数被 1 个函数重载，`qint64 QIODevice::write ( const char * data, qint64 maxSize )`因此转换为`const char*`应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:07:20.677

只需添加一个 toQBytearray 并在将 bytearray 拆分为转换 data 的结构的结构中添加一个构造函数。放置一个拆分值，例如 # 或 ; 在数据集之间，当您在服务器上收到数据时，只需使用上述构造函数

# .net - 如何在 Windows 事件系统中创建日志名层次结构？

> ID：10428158
> 
> 赞同：23
> 
> 时间：2012-05-03T09:00:36.903
> 
> 标签：.net, enterprise-library, event-log

*   我正在使用企业库记录消息。
*   我希望将其中一些（通常是错误和警告）传递给 Windows 事件系统）。我今天通过 entlib.config 路由这些。

该解决方案有效，到目前为止，效果很好。但是，我有比这个解决方案提供给我的更多的需求。我有多个安装应该记录到不同的日志，但我希望它们的名称在事件查看器中是合乎逻辑和直观的。但是，Windows 事件系统不能有两个名称中的前 8 个字符相同的类别。category-name 可以更长，但只用前 8 个字母来区分。如果发生这种情况，.Net 实际上会输出警告：

> 只有自定义日志名称的前八个字符是重要的，并且系统上已经有另一个使用给定名称的前八个字符的日志。

目前我不得不求助于神秘的前缀，但我仍然面临着多个安装在重新命名为日志名时相互“冲突”的危险，所以我需要一个更好的解决方案。

但是，在我计算机上的事件查看器中，我可以看到还有日志名的层次结构——这**正是**我所需要的。微软和思科显然都找到了一种方法来做到这一点：

![微软和思科有一个层次结构](../Images/e1518ff6175b97f7d671be764f86b3c2.png)

**但是，如何创建这样的日志层次结构，每个应用程序都可以安装多次？像这样：**

```
CompanyName
  ApplicationName
    Installation1
    Installation2 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-10T06:59:13.840

## .NET 4 个答案

您所看到的是来自 Windows 事件跟踪 (ETW) 的通道。您可以在注册表中查看相关项目`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\WINEVT`。

要使用这些功能，您必须使用新的[Windows 事件日志](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385780%28v=vs.85%29.aspx)功能，它取代了从 Vista 开始的[事件日志](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363652%28v=vs.85%29.aspx)API，看起来它主要针对 C/C++ 开发。似乎其中一些是通过[System.Diagnostics.Eventing 命名空间](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.aspx)公开的。

我发现 ETW 的一个很好的概述是[使用 ETW 改进调试和性能调整](http://msdn.microsoft.com/en-us/magazine/cc163437.aspx)。

好消息是看起来你可以做你想做的事。您将需要创建一个 XML 清单，其中包含提供者信息以及将记录的事件。然后您需要使用清单上的消息编译器（MC.EXE！）来创建标头、资源文件和日志记录类，然后注册提供程序。

如果您下载[适用于 Windows 7 和 .NET Framework 4 的 Microsoft Windows SDK，](http://www.microsoft.com/en-us/download/details.aspx?id=8279)您将在`Samples\winbase\Eventing\Provider\Simple\CSharp`子目录中找到一个 .NET 示例解决方案，该解决方案将引导您完成所有步骤。

虽然它确实满足您的分层要求并且有点酷，但对于典型的业务线应用程序而言，这在复杂性方面可能有点矫枉过正。此外，消息编译器生成的代码是不安全的代码，因此也可能是负面的。

## .NET 4.5 答案

在 .NET 4.5 中，使用 EventSource 类可以更好地支持 ETW。有关介绍，请参阅[Windows 高速日志记录：使用 System.Diagnostics.Tracing.EventSource 在 C#/.NET 中](https://web.archive.org/web/20190112075125/https://blogs.msdn.microsoft.com/vancem/2012/08/13/windows-high-speed-logging-etw-in-c-net-using-system-diagnostics-tracing-eventsource/) 的 ETW。EventSource 现在还支持事件日志。有关演练，请参阅[宣布 EventSource NuGet 包 - 写入 Windows 事件日志](https://web.archive.org/web/20150623021720/http://blogs.msdn.com/b/dotnet/archive/2013/08/09/announcing-the-eventsource-nuget-package-write-to-the-windows-event-log.aspx)。基本上，在编译时会为每个 EventSource 生成清单和清单 DLL，并且可以使用 wevtutil.exe 注册它们。通过添加 EventSource 和 Event Log 通道支持，这种方法现在看起来是直接可行的。

最后，请注意那些对 ETW 感兴趣的人，模式和实践团队有一个可以使用 ETW的应用程序块[语义日志记录应用程序块。](http://blogs.msdn.com/b/agile/archive/2013/04/25/just-released-microsoft-enterprise-library-6.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T23:48:05.213

提供者必须以“公司-产品-组件”形式命名。为清楚起见，提供者的名称必须包含 2 个“-”符号。可以在[此处](http://msdn.microsoft.com/en-us/library/aa384018.aspx)找到有关这方面的文档。

频道的名称也必须以特定方式写出。同样，[MSDN 的文档](http://msdn.microsoft.com/en-us/library/aa382741.aspx)解释了这一点。您应该将您的频道命名为“公司-产品-组件/类型”的形式。

这是我为您编写的清单片段，以供您使用：

```
<provider name="Our Company-OurApp-Service"
          guid="{4990f5dc-85a0-4660-9ce0-275e027a02d2}"
          symbol="GUID_PROVIDER"
          resourceFileName="C:\Program Files (x86)\Our Company\OurApp\service.exe"
          messageFileName="C:\Program Files (x86)\Our Company\OurApp\service.exe"
          parameterFileName="C:\Program Files (x86)\Our Company\OurApp\service.exe"
          message="$(string.Provider.Name)">
    <channels>
        <channel chid="c1"
                 name="Our Company-OurApp-Service/Operational"
                 type="Operational"
                 symbol="CHANNEL_1"
                 isolation="Application"
                 enabled="true"/>
    </channels>
    ... 
```

![这是我的日志在事件查看器中的显示方式](../Images/5247aba625dbc2f9d7e058c8377d771c.png)

我们在事件查看器中看到的文件夹层次结构是一种错觉。它实际上只是一个提供者和频道的平面列表，呈现为一个严格的 3 文件夹深度结构。这就是为什么下面的几个文件夹`Microsoft/Windows`的名称中有破折号而不是进一步嵌套的原因。

# c# - linq 看不到实际的 sql 查询

> ID：10428159
> 
> 赞同：1
> 
> 时间：2012-05-03T09:00:38.523
> 
> 标签：c#, visual-studio-2010, linq-to-entities

我对使用 linq 2 实体的查询之一有疑问。我试图在查询生成到数据库之前查看查询，但没有任何成功。我尝试使用 ToTraceString() 但无法导致无法将查询转换为 ObjectQuery。这是我的查询：

```
 var movies = (from m in watchedRepo.GetAll().Where(c => c.iUserId == userId).ToList()
                           join f in moviePageViewsRepository.GetAll() on m.iMovieId equals f.iMovieId
                            group f by new JoinClass { MovieId = f.iMovieId, Points = m.iPoints }
                           into g
                           orderby g.Key.Points descending , g.Sum(d => d.iScore) descending
                                select new JoinClass { MovieId = g.Key.MovieId, Points = g.Key.Points, PageViews = g.Sum(d => d.iScore) }).Skip(skip).Take(take); 
```

如果我尝试从 linq 执行它，则会出现内存不足异常。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:28:48.687

问题`ToList()`出在查询的第一行。这将立即从`wachtedRepo`指定的`UserId`.

因为您的查询将成为混合 Linq to Entities / Linq to Objects，所以您不能转换为`ObjectQuery`. 删除后您的查询是否仍然有效`ToList()`？

如果您想查看 Sql Server 中实际发生的情况，我建议您使用 Sql Server Profiler 工具来查看您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:28:21.123

假设`watchedRepo`是表示数据库连接的 Linq to SQL 对象

```
watchedRepo.Log = Console.Error; 
```

所有 SQL 查询都将打印为标准错误。

# ios - iOS Xcode - 分组的 TableView 分隔线显示

> ID：10428161
> 
> 赞同：2
> 
> 时间：2012-05-03T09:00:41.543
> 
> 标签：ios, xcode, separator, tableviewcell

我是唯一遇到这个问题的人吗？

我在分组表视图中有几个部分和几行，用于注册页面。当我上下滑动页面时，两个单元格之间出现奇怪的分隔粗线。一些细胞像被压一样下沉。这是 iOS 5.0 的错误吗？我已经为这个小问题工作了 3 天。请帮忙！

我试过

`self.tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;`

和

```
self.tableView.separatorColor = [UIColor lightGrayColor]; 
```

它们都不起作用。

[已编辑]

Paul Peelen 你是对的，我知道你的意思，但我没有继续前进的知识。在我评论“if(cell == nil)”之前，一切都和你说的一样。但是在我评论它之后，标签显示得很好，分隔线不再有问题，但是当我将文本插入textField并向下滑动并再次向上滑动时，textField的文本消失并被刷新。我该如何解决这个问题？下面是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 
static NSString *CellIdentifier = @"LabelCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

//Here's the problem!
if(cell == nil)
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

cell.selectionStyle = UITableViewCellSelectionStyleNone;

UILabel *keyLbl = [[UILabel alloc] initWithFrame:CGRectMake(15, 8, 100, 30)];
keyLbl.font = [UIFont fontWithName:@"Futura-CondensedExtraBold" size:15.0];
keyLbl.textColor = [UIColor colorWithRed:0.275 green:0.275 blue:0.275 alpha:0.9];
keyLbl.backgroundColor = [UIColor clearColor];

valTxtField = [[UITextField alloc] initWithFrame:CGRectMake(120, 5, 180, 30)];
valTxtField.font = [UIFont fontWithName:@"Futura-CondensedExtraBold" size:18.0];
valTxtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
valTxtField.delegate = self;
valTxtField.returnKeyType = UIReturnKeyDone;
valTxtField.autocorrectionType = UITextAutocorrectionTypeNo;
valTxtField.autocapitalizationType = UITextAutocapitalizationTypeNone;

if(indexPath.section == 0)
{
    if(indexPath.row == 0)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_EMAIL", nil);
        email_TextField = valTxtField;
    }
    else if(indexPath.row == 1)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_RE_EMAIL", nil);
        reEmail_TextField = valTxtField;  
    }
    else if(indexPath.row == 2)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_PWD", nil);
        password_TextField = valTxtField;
        valTxtField.secureTextEntry = YES;
    } 
    else if(indexPath.row == 3)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_RE_PWD", nil);
        rePassword_TextField = valTxtField;
        valTxtField.secureTextEntry = YES;
    }

}
else if(indexPath.section == 1)
{
    if(indexPath.row == 0)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_FIRSTNAME", nil);
        firstName_TextField = valTxtField;
    }
    if(indexPath.row == 1)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_LASTNAME", nil);
        lastName_TextField = valTxtField;
    }
    if(indexPath.row == 2)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_POSTCODE", nil);
        postCode_TextField = valTxtField;
    }
    if(indexPath.row == 3)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_GENDER", nil);
        gender_TextField = valTxtField;
    }
    if(indexPath.row == 4)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_DOB", nil);
        DOB_TextField = valTxtField;
    }
    if(indexPath.row == 5)
    {
        keyLbl.text = NSLocalizedString(@"REGIS_MOBILE", nil);
        mobile_TextField = valTxtField;
    }
}
[cell addSubview:keyLbl];
[cell addSubview:valTxtField];
[keyLbl release];
[valTxtField release];

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:06:03.163

你想要一个分隔符颜色吗？如果没有，您始终可以将其设置为清除。

```
self.tableView.separatorColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:06:12.953

这很可能是因为您在单元格上使用了不同的设置。由于单元格被重复使用而不是为每个单元格创建为新单元格，因此您可以获得具有不同设置的重复使用单元格，这些设置已由使用它的最后一个单元格设置。

例如，假设您的 UITableView 中有 4 个单元格可见。这意味着 6 或 7 已加载到内存中但尚不可见。假设您有一个总共 10 个单元格的列表，那么当您向下滚动时，单元格 #8 只会在应该显示时加载到内存中，释放任何其他不应再显示的单元格。所以单元格#8 将获得前单元格#0 的单元格。如果您在#8 中设置背景颜色应该是红色，然后再次向上滚动，您会看到单元格#0 也将具有红色背景，除非您告诉单元格#0 具有白色背景，否则它将变白。
分隔符等也是如此。

测试这一点的简单方法是让你的“cellIdentifier”独一无二。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T03:53:51.110

OK，这主要是因为小区标识符。由于表格视图在我每次上下滚动时都会回收其内容以显示，如果我使用相同的单元格标识符，就会发生我上面提到的奇怪行为。

这是我对显示表格视图时发生的所有奇怪事情的解决方案：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
//Here the solution:
NSString *CellIdentifier = [NSString stringWithFormat:@"RCell%1dR%1d",indexPath.section,indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) 
{
   //your tableView code...
} 
```

# ftp - Windows 命令行 ftp 放置/上传超过 1 分钟的文件

> ID：10428168
> 
> 赞同：3
> 
> 时间：2012-05-03T09:01:08.900
> 
> 标签：ftp, cmd

我有以下批处理文件：

```
open <ip>
username
password
bin
lcd C:\FTP_OUT\
prompt
mput *.PDF
ascii
mput *.XML
bye 
```

如何将其更改为仅将超过 1 分钟的文件上传到 FTP 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-26T10:20:03.483

Windows`ftp.exe`不支持基于文件时间戳的任何类型的文件选择。

您所能做的就是生成一个临时上传脚本，其中包含要上传的文件的明确列表。您可以使用 PowerShell 脚本来生成临时脚本（在纯批处理文件中实现会非常困难）。

* * *

一种更简单的解决方案是使用支持基于文件时间戳选择文件的 FTP 客户端。

例如，对于[WinSCP FTP/SFTP 客户端](https://winscp.net/)，您可以使用以下批处理文件：

```
@echo off
winscp.com /log=upload.log /command ^
  "open ftp://username:password@example.com/" ^
  "lcd C:\FTP_OUT" ^
  "put *.PDF<1N" ^
  "put -transfer=ascii *.XML<1N" ^
  "exit" 
```

文件中的`<1N`掩码是[一个时间限制](https://winscp.net/eng/docs/file_mask#size_time)，仅选择一分钟以上创建或修改的文件。

另请参阅[将 Windows`ftp.exe`脚本转换为 WinSCP 脚本](https://winscp.net/eng/docs/guide_ftp_script_to_sftp)的指南。

*（我是WinSCP的作者）*

# php - 错误的 php 代码会导致 FTP 中出现这种（错误：连接超时）类型的错误？

> ID：10428170
> 
> 赞同：1
> 
> 时间：2012-05-03T09:01:21.370
> 
> 标签：php, mysql, ftp, phpmyadmin, filezilla

有时，当我尝试通过 filezilla 连接到我的服务器时，我会同时收到此错误，我的网站和 phpmyadmin 也已关闭，并且`mysql error: MySQL server has gone away`有时会出现此类错误`too many connections`。过去两天工作正常。在我更改数据库中的表的前 2 天，在我的 .inc 文件（即 php 代码）中添加了一些代码，之后只有我遇到了这个问题。但有时我可以连接到服务器，并且我的站点和 phpadmin 也已加载。***我想知道糟糕的 php 代码是否会导致`Error:Connection timed out`FTP 中出现这种（）类型的错误？*** 请帮我..

***解决了***

> 问题出在服务器上，他们已经纠正了。非常感谢所有回答我问题的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:51:46.527

似乎您的代码建立了太多的 MySQL 连接，您可以将代码添加到您的问题中以确认吗？（您是否有任何机会在循环中建立数据库连接？）

关于回滚后错误，由于您没有说明您尝试过的内容，因此这里有一系列可能的解决方案。

*   [MySQL #2002 论坛帖子](http://forums.mysql.com/read.php?35,64808,64808#msg-64808)- 这里有一些可能的解决方案。
*   [linuxquestions 论坛帖子](http://www.linuxquestions.org/questions/linux-software-2/cant-connect-to-local-mysql-server-through-socket-var-lib-mysql-mysql-sock-281557/)- （在 my.cf 中设置 'socket = /var/lib/mysql/mysql.sock'）
*   ['解决：无法通过socket /tmp/mysql.sock连接到本地MySQL服务器'](http://www.tech-recipes.com/rx/762/solve-cant-connect-to-local-mysql-server-through-socket-tmpmysqlsock/)

基本问题很可能是您没有正确设置套接字，请检查 .sock 的位置以及当前设置中的设置。

旁白：如果您无法自行解决问题，您可以重新安装 LAMP / XAMPP / 其他任何东西，如果可能的话，最终可能会更快。

# android - android：从后台监听按键

> ID：10428171
> 
> 赞同：1
> 
> 时间：2012-05-03T09:01:23.270
> 
> 标签：android, events, background

我阅读了很多关于这个主题的答案，这就是我所理解的

无法从服务中获取任何硬键（home、menu、back、etc）按下事件。它不提供给任何服务

如果这些应用程序尚未在前台，则发送关键相机按钮和媒体控制广播事件。

所以我需要得出结论，不可能通过按下硬键或硬键组合来启动应用程序，即（如主页键 2 次或菜单键然后返回键）？

如果是这种情况，三星在按下 Home 键 2 次时如何启动 Vlingo。如何将此功能添加到三星 Galaxy

非常感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:15:47.120

服务无法获取 KeyEvent。

Sumsung 可以直接使用系统 rom 来完成。但我们不能。

# iphone - 触摸不检测？

> ID：10428172
> 
> 赞同：0
> 
> 时间：2012-05-03T09:01:34.197
> 
> 标签：iphone, ios, uitouch

我面临一个相关的问题`UITouch`。我不知道为什么它不与 if 案例一起使用。

这是代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches  anyObject];
    if([touch view] == self.transView)
    {
        NSLog(@"Began");
        CGPoint startLocation    = [touch locationInView:transView];
        startX = startLocation.x;
        startY = startLocation.y;
    }
} 
```

我正在检测子视图上的触摸。我添加了另一个类`View`作为子视图，这个类包含`UIImageView`在 background 中。例如

```
UIImageView *BGImageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"graphBG.png"]];
[BGImageView setContentMode:UIViewContentModeScaleAspectFill];
[BGImageView setFrame:CGRectMake(25, 365, 723, 390)];
[BGImageView setUserInteractionEnabled:YES];
[self.view sendSubviewToBack:BGImageView];
[self.view addSubview:BGImageView];
//[BGImageView release];
myGraph=[[MyGraphControllerView alloc]init];
myGraph.dataForPlot= [[NSMutableArray alloc]init];
for (int i=0; i<[hoursArry count]; i++)
{
    NSMutableDictionary *dataDict=[[NSMutableDictionary alloc]init];
    [dataDict setObject:[dayArray objectAtIndex:i] forKey:@"x"];
    [dataDict setObject:[HoursArray objectAtIndex:i] forKey:@"y"];
    [myGraph.dataForPlot addObject:dataDict];
    [dataDict release];
}
[myGraph.view setFrame:CGRectMake(25, 380, 723, 390)];
//[myGraph.view setBackgroundColor:[UIColor redColor]];
[self.view addSubview:myGraph.view];
} 
```

我已经添加了一个子视图，`GraphView`但它不起作用。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T07:29:10.687

您正在检查它是否正在触摸一些名为 self.transView 的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:15:31.677

要确认的一件事：为什么要在 UIImageView 上启用用户交互？设置它的 intraction 禁用，以便它下面的视图现在将成为触摸的响应者。如果它不起作用，请更新，因为我刚刚阅读了您的 3 行代码，您可能还有其他一些问题，从这里可能不清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:19:45.960

```
//add gesture to mapview-for single touch
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(SLideTheView:)];
[touchableView addGestureRecognizer:tap];
tap.numberOfTapsRequired = 1; 
```

我建议使用手势来检测需要触摸的视图。

# asp.net-mvc-3 - MVC3 DropDownListFor 未设置选定属性

> ID：10428175
> 
> 赞同：0
> 
> 时间：2012-05-03T09:01:58.420
> 
> 标签：asp.net-mvc-3, razor, drop-down-menu

在 MVC3 中，当使用 DropDownListFor 时，第一个参数是否必须是字符串？我有以下设置：

```
@Html.DropDownListFor(m => m.MyListItemId, Model.MyListItems, 
    new Dictionary<string, object> 
    { 
        { "style", "width:120px" }, 
        { "data-type", "myList" } 
    }) 
```

其中 m.MyId 是我的视图模型上的一个 int。我遇到了一个问题，当我更改下拉列表中的选定项目并检查呈现的 html 时，“selected”属性未设置为新选定的项目。这是一个问题，因为我正在使用 jquery 克隆函数来复制该行，并且我需要将带有新选定项目的列表复制到我的新行中。想法？

**更新**- 将视图模型上的属性更改为字符串没有区别。这是 mvc dropdownlistfor 的错误吗？我已经阅读了很多关于类似问题的帖子，但似乎找不到在这种情况下有效的解决方案。这就是我在代码中设置列表的方式：

```
var myListItems = _myRepository.GetAll();
model.MyListItems = new SelectList(myListItems, "Id", "Name", lineItem.myListItemId);
model.MyListItemId = lineItem.myListItemId; 
```

其中 lineItem 被传递到此方法中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:24:56.793

不，选择的值属性不需要是字符串，可以是 int。只要该值可转换为字符串，它就可以工作（因此选定的值类型可以是 Guid、int、bool 等）。

当我的页面路由具有与所选值模型属性同名的路由参数时，我有时会发现问题。例如，考虑一下：

```
route: "/establishments/{establishmentId}/edit" 
```

模型：

```
public class MyViewModel
{
    public int EstablishmentId { get; set; }
    public SelectListItem[] Establishments { get; set; }
} 
```

看法：

```
@Html.DropDownListFor(m => m.EstablishmentId, Model.Establishments) 
```

使用此代码，下拉列表的选定值将始终是路线中的任何建立 ID。因此，如果路线是 /establishments/12/edit，则将在下拉列表中选择值 12。路由参数和模型属性大小写不匹配并不重要。

我通过下载 MVC 源代码，制作我自己的 DropDownListFor 副本（名为 MyDropDownListFor），然后单步执行代码以查看发生了什么。如果您在使用 MVC3 时仍然遇到问题，我建议您也这样做。您需要确定这是服务器代码的问题，还是您的 jquery 克隆内容的问题。

# xml - ASP.NET MVC4 WebAPI 和发布 XML 数据

> ID：10428177
> 
> 赞同：12
> 
> 时间：2012-05-03T09:02:03.417
> 
> 标签：xml, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我错过了新 webapi 的一个技巧——我试图通过发布请求提交一个 xml 字符串，但运气不佳。

前端使用 jQuery，如下所示：

```
 $(document = function () {
    $("#buttonTestAPI").click(function () {

        var d = " <customer><customer_id>1234</customer_id></customer>";
        $.ajax({
            type: 'POST',
            contentType: "text/xml",
            url: "@Url.Content("~/api/Customer/")",
            data: d,
            success: function (result) {
                var str = result;
                $("#output").html(str);
            }
        });
    });
}); 
```

我的控制器目前非常简单 - 只是 post 操作的默认值 - 试图返回传入的内容：

```
 public string Post(string value)
    {
        return value;
    } 
```

但是，“值”反复为空。奇怪的是，当我将 jquery 中的数据更改为以下内容时：

```
d = "<customer_id>1234</customer_id>"; 
```

然后我在控制器中得到“值”为 1234。

如何访问控制器中更复杂的 xml 字符串？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-11T21:56:46.257

下面将允许您通过 POST 到 Web API 方法读取原始 XML 消息：

```
public void PostRawXMLMessage(HttpRequestMessage request)
{
   var xmlDoc = new XmlDocument();
   xmlDoc.Load(request.Content.ReadAsStreamAsync().Result);   
} 
```

您可以调试和检查正文、标题等，并将看到发布的原始 XML。我使用 Fiddler's Composer 制作了一个 HTTP POST，效果很好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T10:42:04.490

您正在发送内容类型，`text/xml`但您已将参数定义为`string`. 理想情况下，您的 XML 应该映射到一个**类**，以便可以对其进行*反序列化*。

因此，如果您需要*原始 xml*，那么它尚不受支持。Web API 目前已为序列化 MediaTypeFormatters 做好了准备，缺少简单的类型格式化程序，但它们很容易构建。

这是此类格式化程序的**最小**实现，仅支持在您的情况下读取并基于**beta 安装程序**（而不是夜间源代码，因为它已经发生了很大变化）：

```
public class TextMediaTypeFormatter : MediaTypeFormatter
{
    public TextMediaTypeFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/javascript"));
    }

    protected override bool CanReadType(Type type)
    {
        return type == typeof (string);
    }

    protected override System.Threading.Tasks.Task<object> OnReadFromStreamAsync(Type type, Stream stream, 
        HttpContentHeaders contentHeaders, 
        FormatterContext formatterContext)
    {
        var taskCompletionSource = new TaskCompletionSource<object>();
        try
        {
            var memoryStream = new MemoryStream();
            stream.CopyTo(memoryStream);
            var s = System.Text.Encoding.UTF8.GetString(memoryStream.ToArray());
            taskCompletionSource.SetResult(s);
        }
        catch (Exception e)
        {
            taskCompletionSource.SetException(e);           
        }
        return taskCompletionSource.Task;
    }
} 
```

要使用它，只需将其添加到格式化程序集合中：

```
GlobalConfiguration.Configuration.Formatters.Insert(0, new TextMediaTypeFormatter()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-31T16:07:49.307

从 beta 版到 asp.net mvc 4 web api 的 RC 的任何人都在寻找上述 Aliostad 答案的更新版本（微小的变化导致我的轻微返工）。

```
public class TextMediaTypeFormatter : MediaTypeFormatter
{

    public TextMediaTypeFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/javascript"));
    }

    public override bool CanReadType(Type type)
    {
        if (type == typeof(String))
            return true;
        else
            return false;
    }

    public override bool CanWriteType(Type type)
    {
        if (type == typeof(String))
            return true;
        else
            return false;

    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream readStream, System.Net.Http.HttpContent content, IFormatterLogger formatterLogger)
    {
        var taskCompletionSource = new TaskCompletionSource<object>();
        try
        {
            var memoryStream = new MemoryStream();
            readStream.CopyTo(memoryStream);
            var s = System.Text.Encoding.UTF8.GetString(memoryStream.ToArray());
            taskCompletionSource.SetResult(s);
        }
        catch (Exception e)
        {
            taskCompletionSource.SetException(e);
        }
        return taskCompletionSource.Task;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T06:15:18.947

为我解决问题的是添加以下内容：

```
static SubscriberController()
{
    //Needed for xml deserialization to work
    var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
    xml.UseXmlSerializer = true;
} 
```

（`SubscriberController`是我的扩展类，`ApiController`上面是静态构造函数，所以它会运行一次）。

不确定是否也有必要，但我将`[FromBody]`属性添加到我的参数中，如下所示：

```
public async Task<HttpResponseMessage> SynchronizeImax( [FromBody] SynchronizeRequest synchronizeRequest )
{
    //...
} 
```

这样做的好处是您可以无缝地处理 XML 和 JSON 输入。

# c# - WPF 在 TreeViewItem 上换行标题文本

> ID：10428180
> 
> 赞同：1
> 
> 时间：2012-05-03T09:02:09.230
> 
> 标签：c#, wpf, treeview, treeviewitem

我在 WPF 中制作了一个固定宽度为 145px 的 TreeView，它的所有子元素（TreeViewItems）都有一个比 145px 宽的标题文本，这意味着在 TreeView 的底部会出现一个水平滚动条。

我设法通过添加以下内容摆脱了该滚动条：

```
ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
```

到我的树视图。

但是，现在隐藏了太宽的标题文本，所以我想包装标题文本，使其适合宽度为 145 像素的 TreeView。

我已经为此寻找解决方案并尝试了一些我发现的解决方案，但仍然没有得到它的工作，这让我感到沮丧！

这是我的 XAML 代码：

```
<TreeView ScrollViewer.HorizontalScrollBarVisibility="Hidden" Width="145" Name="tree_menu" >
   <TreeViewItem Header="This is a very long root element node text">
      <TreeViewItem Header="this is a very long child element node text" />
   </TreeViewItem>
</TreeView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:54:35.930

也许这对你有用：

```
<TreeView Name="tree_menu">
    <TreeView.Resources>
        <Style TargetType="{x:Type TreeViewItem}">
            <Setter Property="HeaderTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <TextBlock Width="145"
                                   TextWrapping="Wrap"
                                   Text="{Binding}" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </TreeView.Resources>
    <TreeViewItem Header="This is a very long root element node text">
        <TreeViewItem Header="this is a very long child element node text" />
    </TreeViewItem>
</TreeView> 
```

# php - 打开 adobe reader 以打印 PDF 的批处理文件不会结束/关闭

> ID：10428182
> 
> 赞同：4
> 
> 时间：2012-05-03T09:02:10.710
> 
> 标签：php, batch-file, shell-exec

我在一个由 PHP 脚本调用的批处理文件中有以下代码`shell_exec()`：

```
"C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.exe" 
/t "D:\xampp\htdocs\instrument\app\webroot\Repair Tickets\%1.pdf"
\\hnurenfp01\Accounts_FS-1128MFP 
```

参数 %1 是作为参数从 PHP 脚本发送到批处理文件的文件名。

**观察到的行为：**

*   PHP页面成功调用具有正确参数的批处理文件
*   AcroRd32.exe 的两个实例在服务器上静默启动
*   PDF 文件打印到网络打印机
*   AcroRd32.exe 实例不结束/关闭
*   批处理文件继续运行（直到手动结束 AcroRd32.exe 进程）
*   PHP 脚本一直在执行，因此阻止客户端机器做任何进一步的事情

**预期行为：**

*   PHP页面成功调用具有正确参数的批处理文件
*   AcroRd32.exe 的两个实例在服务器上静默启动
*   PDF 文件打印到网络打印机
*   AcroRd32.exe 实例结束/关闭
*   批处理脚本完成（这反过来应该释放 PHP 脚本）
*   PHP 脚本继续并最终结束以允许最终用户继续他们的工作

**失败的解决方案：**

*   在批处理文件中使用 TASKKILL 在打印后结束 AcroRd32.exe 进程，但 AcroRd32.exe 保持打开状态，即使使用 /F（强制）标志也是如此。当我手动结束 AcroRd32.exe 进程时，批处理文件继续执行，然后执行 TASKKILL 行，这当然会返回“找不到进程”错误，因为它不再存在。所以看起来控件在打印后没有返回到批处理文件，它仍然保留在 AcroRd32.exe 中。

有没有人知道如何在 PDF 打印后关闭 Adob​​e Reader？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:10:33.367

[我在http://www.robvanderwoude.com/commandlineswitches.php#Acrobat](http://www.robvanderwoude.com/commandlineswitches.php#Acrobat)找到了以下引用

***静默打印 PDF 文件：***

*`AcroRd32.exe /N /T PdfFile PrinterName [ PrinterDriver [ PrinterPort ] ]`
最后一个命令将打开一个新的 Adob​​e Reader 窗口，打印 PDF 文件，然后终止其窗口，除非该窗口恰好是剩下的唯一 Adob​​e Reader 窗口：至少一个 Adob​​e Reader 窗口将保持打开状态。*

最后一句话是个坏消息。

您可以通过 START 命令调用带有 /N 和 /T 选项的 AcroRD32.exe，然后您的批处理文件可以在打印作业执行时立即继续。如果您不介意阅读器的一个实例保持打开状态，那么您就完成了。

如果您必须关闭阅读器，那么您的批次将不得不杀死它。但我不确定您的批处理文件如何判断打印作业何时完成。您可以使用 TIMEOUT 引入任意延迟，但这听起来很冒险。

我对打开的“AcroRd32.exe 的两个实例”有点困惑。如果这是程序的工作方式，那么听起来 /N 开关将关闭 2 个实例中的 1 个。您的批处理可以通过 START 启动打印作业，延迟几秒钟以使打印作业进程有时间启动，然后使用 TASKLIST|FINDSTR 来监控循环中的 AcroRd32.exe 进程的数量。当计数从 2 变为 1 时，打印作业应该已完成，您可以终止剩余的进程。理论上无论如何:)

祝你好运。

# iphone - 将图像添加到 Urban Airship 丰富的推送组合

> ID：10428186
> 
> 赞同：0
> 
> 时间：2012-05-03T09:02:26.847
> 
> 标签：iphone, ios, urbanairship.com

在丰富的推送消息中，我知道它使用的 html 格式。问题是我没有任何可用的特定服务器服务。是否有一些方法可以在消息中显示图像而不将其托管在特定服务器上。换句话说，有什么方法在除图像标签之外的 html 中以在 html 中显示图像？内容存储在 html 页面本身本地的位置？或者还有其他可能的方法吗？

语言：Obj C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:09:22.463

我将图像与 html（富文本消息）一起发送 - 这允许离线阅读收件箱。

你没有指定你使用的是什么编程语言，所以我会给你我在 php 中得到的东西：

```
/**
 * htmlReportImageFromUrl - Takes a url to an image (png), return a html inline image in a <div/>
 *
 * @author Kent Behrends, kent@bci.com, 2012-04-12
 * @param string $url to a png image   
 * @param string $imageFormat and format that Imagick supports, default to 'png'
 * @param int $resizeImage in pixels, defualt to 48
 * @param string $altText for the image 
 * @return string html <div/> string with image data or <div>Bad Image</div>
 */
function htmlReportImageFromUrl($url, $imageFormat = "png", $resizeImage = "48", $altText = "image") {
    $image = new Imagick ();
    $f = fopen ( $url, 'rb' );
    $status = $image->readImageFile ( $f );
    fclose ( $f );
    if (! $status) return '<div>Bad Image</div>';
    $image->setImageFormat ( $imageFormat );
    $image->resizeImage ( $resizeImage, 0, imagick::FILTER_LANCZOS, - 1 );
    $encoded = base64_encode ( $image->getImageBlob () );
    return '<div><img src="data:image/png;base64,' . $encoded . '" alt="'.$altText.'"></div>';
} 
```

使用此函数及其输出的示例。

```
$kentsImage = 'http://www.gravatar.com/avatar/6376f5c874dd475857c1b4c082f2e665?s=128&d=identicon&r=PG';
$message = '<html><body>';
$message .= '<h4>Sample image from gravatar.com</h4>';
$message .= '<table><tr><td>Kent</td><td>'.htmlReportImageFromUrl($kentsImage).'</td></tr></table>';
$message .= '</body></html>';
print $message; 
```

您可以将 $message 作为有效负载发送到 Urban Airships AirMail url：

格式化输出， src="data:image/png... 已被截断：

```
<html>
  <body>
    <h4>Sample image from gravatar.com</h4>
    <table>
      <tr>
        <td>Kent</td>
        <td>
          <div><img src="data:image/png;base64,iVBORw0KGgoAAAANS ...</div>
        </td>
      </tr>
    </table>
  </body>
</html> 
```

# c# - 我可以将自定义后续操作添加到 Outlook 任务上下文菜单吗？

> ID：10428191
> 
> 赞同：2
> 
> 时间：2012-05-03T09:02:44.740
> 
> 标签：c#, outlook, vsto

我想为任务添加自定义后续操作并在该操作中操作所有选定的任务。如何使用 Outlook 插件做到这一点？

这是我想要的图片：

![在此处输入图像描述](../Images/c3a653d51dd9cffa1762fd3f025d7e5d.png)

# windows-phone-7 - Windows phone 7 跳转列表控件

> ID：10428192
> 
> 赞同：0
> 
> 时间：2012-05-03T09:02:45.547
> 
> 标签：windows-phone-7, jump-list

我有个问题。在 Windows Phone 7 中，我是否能够从跳转列表控件导航到另一个页面。例如，我在跳转列表控件中有一些数据，然后单击其中一个数据后，我可以从那里转到另一个页面吗？如果可能的话，有人可以给我看一些链接吗？示例代码会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:06:00.173

您可以使用 Silverlight 工具包中的 ListPicker 并使用 SelectionChanged 事件。

教程： http: [//windowsphonegeek.com/articles/listpicker-for-wp7-in-depth](http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:12:20.940

通过添加选定的索引和页面导航选项来下载此链接中的项目并进行增强。

[http://www.windowsphonegeek.com/news/developing-a-wp7-jump-list-control](http://www.windowsphonegeek.com/news/developing-a-wp7-jump-list-control)

[http://www.telerik.com/community/forums/windows-phone/jumplist.aspx?pageid=1](http://www.telerik.com/community/forums/windows-phone/jumplist.aspx?pageid=1)

# powershell - ilmerge 的无人值守安装

> ID：10428193
> 
> 赞同：2
> 
> 时间：2012-05-03T09:02:54.083
> 
> 标签：powershell, windows-installer, nuget, ilmerge, chocolatey

我正在尝试设置大量构建代理，到目前为止，我可以静默安装所有依赖项（使用 powershell、nuget 和 Chocolatey）。但是，如果没有弹出该死的 GUI，我就无法安装工具 IlMerge。我已经尝试了所有常用的 msiexec 开关，但它们都被忽略了。有谁知道以无人看管的方式将这个工具放在盒子上的方法？还是我应该把东西重新包装在 zip/msi 中？

这是在 Windows Server 2008 R2 如果我运行

```
Invoke-Expression "msiexec $installerPath\ilmerge.msi /passive" 
```

我仍然得到一个安全对话框。

目前我只是想这样做不好：

```
Copy-Item x:\installs\ilmerge.exe "C:\Program Files (x86)\ILMerge" 
```

将其视为唯一的一个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:06:53.617

下面对我有用，没有安全对话框。

```
cp ILMerge.msi \\Server\admin$
winrs -r:Server ILMerge.msi /passive
dir "\\Server\C$\Program Files (x86)\Microsoft\ILMerge" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T21:48:40.023

使用巧克力时，您只需要指定 -ia '/quiet' ，因为默认情况下包不是静默的。这是由标签 notSilent 指定的，它也在描述中（[http://chocolatey.org/packages/ilmerge/2.11.1103.1](http://chocolatey.org/packages/ilmerge/2.11.1103.1)）。

最新的包只是可执行文件，所以你可以安装它。[http://chocolatey.org/packages/ilmerge](http://chocolatey.org/packages/ilmerge)

# android - clean stack and exit app onBackPressed()

> ID：10428197
> 
> 赞同：1
> 
> 时间：2012-05-03T09:03:01.977
> 
> 标签：android, stack

basically my app has a loginScreen and once logged u can go through many activities. when i press the home button the app goes in background and if the user doesnt open it within a certain amount of time, the users session closes and u return to the loginScreen. now the problem is that if i want to close the app from the loginScreen once my session has expired i press the back key and it should close but it doesnt. it brings me to the previous element in the stack.

the wired thing is that on all onBackPressed() methods and when ever i started new intents i always use `intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);` and on the loginScreen onBackPressed() i call `finish()` but it doesnt work. anyone know why? and how do i solve this problem.

Thanks for the help!!!

code snippets in many activities:

```
@Override
    public void onBackPressed() {
        mpButtonClick.start();
        Intent intent = new Intent(this, MenuPagina.class); 
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        startActivity(intent); 
        super.onBackPressed(); 
    } 
```

in the loginActivity:

```
@Override
    public void onBackPressed() {
        super.onBackPressed();
        getIntent().setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        LoginActivity.this.finish();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T09:13:57.180

You can do this two way:

1.  kill app by using `android.os.Process.killProcess(android.os.Process.myPid());` on back press.

for this you need to add below permission on manifest.

```
<uses-permission
        android:name="android.permission.KILL_BACKGROUND_PROCESSES" /> 
```

2 . use static boolean 'isKill' variable with default false and every time set false in login activity oncreate() method.

set isKill value true in login activity onBackPress() method.

And then write below code in every activity onResume() method

```
if(isKill)
{
    finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:10:44.753

When starting an activity that I don't want to be included in the BackStack I use:

```
myintent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

I have read (on here somewhere) about onBackPressed() not calling and instead they used onKeyPressed and specified the back button. I'll see if I can find the example.

Here is the example: [Android - onBackPressed() not working](https://stackoverflow.com/questions/3558385/android-onbackpressed-not-working/3558613#3558613)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-20T09:43:12.467

```
@Override
public void onBackPressed() {

   AlertDialog.Builder builder = new AlertDialog.Builder(this);
   builder.setTitle("Exit");
   builder.setMessage("Do you want to exit? ");
   builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

 // do something when the button is pressed
       public void onClick(DialogInterface arg0, int arg1) {

           finish();
       **YourActivityName**.super.finishAffinity();
    }
 })
 .setNegativeButton("No", new DialogInterface.OnClickListener() {

// do something when the button is pressed
        public void onClick(DialogInterface arg0, int arg1) {
         }
  }).show();

} 
```

# android - 非顽固观点

> ID：10428201
> 
> 赞同：1
> 
> 时间：2012-05-03T09:03:23.067
> 
> 标签：android, android-layout

我怎样才能使视图变得不难处理。我有两个画布视图在框架布局中相互堆叠。两个画布都占据整个屏幕区域并且都是透明的。我想在上部画布上显示一些 PNG，并让用户在下部画布上绘制。

问题是当用户触摸屏幕时，触摸输入由上部画布进行，并且由于它什么都不做（在下部画布上绘图），所以什么也没有发生。

我希望上层画布充当覆盖视图，没有交互，也没有分配事件，所有这些都应该由下层视图使用。如果我将上部叠加层设置为不可见，我可以在下部画布上绘制（因为现在下部画布正在接收所有输入）。

画布也不是标准画布，而是自定义画布。它直接派生自 View 类。但我认为派生的观点不会造成问题。我只是不知道如何进行。

我尝试在上部画布上使用 onTouch() 并调用下部画布的 onTouch() ，但没有奏效。我正在测试其他一些东西，比如 2 个按钮上的 dispatchTouch()，但对我来说似乎没有什么确定的。帮助将不胜感激。

编辑：添加 XML 布局代码

```
<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.samsung.sdraw.CanvasView 
        android:id="@+id/canvas1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="cnvs1Click"
        android:text="Canvas1" />

    <com.samsung.sdraw.CanvasView 
        android:id="@+id/canvas2" 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Canvas2" 
        android:onClick="cnvs2Click"/>
</FrameLayout> 
```

但我仍然认为问题会由 View(s) 解决。Canvas 来自[S pen SDK](http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=10644)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:08:46.370

这可能是一个特殊情况，没有玩过，看看这是否是真的，但通常在你的 onTouch 事件等中，如果你没有处理事件，你只会返回 false ，并且事件会通过每个视图的触摸事件冒泡，直到发生某些事情返回 true，表示它已处理命中。

如果你让你的一个视图（上层）只是从它的 onTouch 中返回 false，那么下层的 onTouch 视图应该会接收到该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:08:27.123

尝试在 XML 中添加到根视图

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

# c++ - Qt、Phonon 和多媒体编解码器：如何捆绑它们？

> ID：10428202
> 
> 赞同：3
> 
> 时间：2012-05-03T09:03:24.040
> 
> 标签：c++, qt, codec, ogg, phonon

我正在开发一个基于多平台（Windows、Linux 和 Mac）Qt 的 Phonon C++ 应用程序，并且我知道 Phonon 本身只是 API，它依赖于后端与已安装的编解码器进行交互。

从逻辑上讲，我应该假设最终用户没有安装额外的编解码器，只有操作系统提供的那些。

所以我的问题是，是否可以将 OGG（最好）或 AAC 解码器与我的应用程序捆绑在一起，以便后端能够识别它并能够播放音频文件？我一般应该采取哪些步骤以及在哪里寻找更多信息？

应用程序本身不可安装，它直接从物理媒体运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:30:34.383

## C++ 声音库

至于获得正确的库来播放声音，只需找出 Phonon 在您的系统上使用哪些库即可。我知道 Phonon 是一个相当大的项目，每个操作系统都有一组不同的驱动程序用于播放媒体和使用编解码器等。我建议查看[Audacity](http://audacity.sourceforge.net/)和[VLC](http://www.videolan.org/projects/)并检查[Google](https://www.google.com/search?&q=sound%20cross%20platform%20c%2b%2b%20library)。

## 插件/库和 Qt

至于让 Phonon 与 Qt 一起工作，我有经验......

我没有在每个主要操作系统上使用 Phonon 进行大量测试，但我在几个不同版本的 Windows 上进行了测试。

Qt 应用程序的部署非常简单，即使使用像 Phonon 这样的插件和库也是如此。但是第一次弄出来有点痛苦，只是因为行话有点奇怪。

我的答案是在具有到 Qt 库的动态链接的 Windows 桌面应用程序的上下文中，而不是静态的。

这是 windows 的目录结构和如何找到 dll 的简短说明。

[部署 Qt 应用程序](http://qt-project.org/doc/qt-4.8/deployment-windows.html#creating-the-application-package)

[Windows 中的动态链接库搜索顺序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)

对于 Qt SDK 中的 Windows 上的 Mingw，有一个用于存放其二进制文件的文件夹，在该文件夹中，有您的应用程序需要能够在运行时找到的 dll（如果您正在执行动态链接）。我通常将这些 DLL 与我在 Qt 创建器中构建的应用程序 EXE 放在同一个文件夹中，然后将“工作目录”或运行 EXE 的目录也保持在同一个目录中。

对于用于特定媒体类型（如图像格式和声子）的附加插件/库，您需要具有应用程序可以在其中找到它的特定结构。

您可以为您的应用程序制作一些非常具体的内容，并使用与此调用相关的函数添加它们。 [QStringList QCoreApplication::libraryPaths()](http://doc.trolltech.com/main-snapshot/qcoreapplication.html#libraryPaths)

一般来说，模仿您在 MingW“插件”文件夹中找到的目录结构，以获得您需要的其他 dll。

例如，我希望能够正确显示系统托盘图标。显然您需要正确的图像格式引擎插件来显示图标。( `qgif4.dll`, `qico4.dll`, 和`qjpeg4.dll`)

这是插件位于我的开发机器上：

```
"C:\QtSDK\Desktop\Qt\4.7.3\mingw\plugins\imageformats" 
```

这是我放置它的位置，以便可以在运行时找到它：

```
"C:\path\to\my\EXE\imageformats" 
```

或者

```
".\imageformats" (relative to my working directory of my EXE) 
```

What is one of the more annoying things about discovering this information, is that the plugins don't fail in the same way as the main Qt Libraries, so you don't see it broken until you get to the part of your program that is actually attempting to use them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:49:30.690

Generally, you could supply the [VLC Phonon backend](http://gitorious.org/phonon/phonon-vlc) for Windows. The default DirectX backend is unfortunately quite limited.

On Linux, you can assume that a suitable Phonon backend comes with the OS's Phonon installation. The two backends currently popular are GStreamer and [VLC](http://gitorious.org/phonon/phonon-vlc).

# uitableview - 如何为 UITableview 中的部分设置背景图像？

> ID：10428206
> 
> 赞同：2
> 
> 时间：2012-05-03T09:03:42.233
> 
> 标签：uitableview

可以选择为单元格设置背景图像或颜色。

我怎么能假设对具有行数的部分执行此操作，并且该部分中的每一行将采用不同的颜色..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:08:37.447

你可以通过使用 UITableView 的委托方法来做同样的事情，

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

在该方法中，您可以根据部分设置单独的 UIView。此外，您可以通过覆盖来设置各个部分的高度...

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

# linux-kernel - 如何使用 LSM 实现自己的钩子函数？

> ID：10428212
> 
> 赞同：2
> 
> 时间：2012-05-03T09:04:06.380
> 
> 标签：linux-kernel

我正在学习有关访问控制的知识。并尝试用 LSM api 实现自己的钩子函数。但我发现我必须在内核版本 3.1.4 的内核源代码中编写代码。那么，我该如何开始呢？

有人可以举个例子吗？非常感谢。

PS：我找到了一些示例，但在内核版本 2.6.20 中。由于 LSM 已被修改，这些示例无法工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:37:13.167

自 2.6.35 起，您无法加载 LSM 模块（请参阅 c1e992b99603a84d7debb188542b64f2d9232c07 提交）。因此，将 LSM 置于内核之外并不是一项有效的任务。但是您总是可以尝试在运行时反汇编内核并找到所有私有符号，例如[security_ops](http://lxr.linux.no/linux+v3.3.4/security/security.c#L29)指针。

例如，看看导出的`security_sb_copy_data`符号：

```
int security_sb_copy_data(char *orig, char *copy)
{
        return security_ops->sb_copy_data(orig, copy);
}
EXPORT_SYMBOL(security_sb_copy_data); 
```

它转储可能看起来像这样（x86_64）：

```
(gdb) x/7i security_sb_copy_data 
   0xffffffff811f61b0:  push   %rbp
   0xffffffff811f61b1:  mov    %rsp,%rbp
   0xffffffff811f61b4:  data32 data32 data32 xchg %ax,%ax
   0xffffffff811f61b9:  mov    0x881690(%rip),%rax        # 0xffffffff81a77850
   0xffffffff811f61c0:  callq  *0x98(%rax)
   0xffffffff811f61c6:  pop    %rbp
   0xffffffff811f61c7:  retq 
```

因此，`0xffffffff81a77850`地址是确切的`security_ops`指针。让我们检查一下：

```
(gdb) x/s* 0xffffffff81a77850
0xffffffff81850fa0:  "default" 
```

好的，现在我们有了有效的`security_ops`指针，可以在内核之外用 LSM 做任何事情。

`P.S.`有一个很棒的 Linux 内核安全项目 - AKARI。它实现了有趣的私有符号解析方法，无需反汇编（详见[源代码](http://akari.sourceforge.jp/1.0/chapter-3.html.en)）。

# html - TextBox中的CSS格式特殊内容

> ID：10428213
> 
> 赞同：2
> 
> 时间：2012-05-03T09:04:11.110
> 
> 标签：html, css, textbox, format

我有一个文本框：现在我想用颜色突出显示此文本框中的特定字符。（例如“文本”）这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:09:22.470

在编写单词时使用 ajax/jQuery 突出显示文本区域中的特定选定单词。

检查此链接 - [http://bytes.com/topic/javascript/answers/820173-highlighting-searched-word-text-area](http://bytes.com/topic/javascript/answers/820173-highlighting-searched-word-text-area)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:20:17.130

还有另一种不使用 Javascript 在文本框中放置文本的方法。但是文字会一直灰飞烟灭。HTML 上有一个标签名称“占位符”。这可能会有所帮助

```
<input type="text" placeholder="text" name="inputbox">
```

# java - 如何确定实体是否在当前会话中创建？

> ID：10428215
> 
> 赞同：1
> 
> 时间：2012-05-03T09:04:29.923
> 
> 标签：java, hibernate

想象一个相当复杂的服务器调用，跨越多个组件，所有组件都包装在一个事务中。一个组件可以使用`saveOrUpdate`. 另一个组件可以访问这个实体，但需要知道它是在这个会话中还是之前创建的。我怎样才能实现它？

理想情况下，寻找`wasCreatedInThisSession`如下布尔调用：

```
public void myTransactionalMethod() {
    MyEntity e1 = session.load(MyEntity.class, 15);
    session.wasCreatedInThisSession(e1); // -> false
    MyEntity e2 = new MyEntity("Test");
    session.saveOrUpdate(e2);
    session.wasCreatedInThisSession(e2); // -> true
} 
```

# c++ - 使用模板特征类型时，NVIDIA NVCC 会更改编译时间常数

> ID：10428220
> 
> 赞同：1
> 
> 时间：2012-05-03T09:04:52.200
> 
> 标签：c++, templates, compiler-construction, cuda

使用 C++ 模板时，我看到 NVIDIA NVCC（CUDA 4.0 和 4.1 测试）的奇怪行为。我将其简化为一个演示行为的简单示例。

这已经处于错误报告的状态。然而，我把它挂在这里，因为这个网站是一个越来越可靠的错误和修复来源。所以，我保持这个页面更新。

代码：

```
#include"stdio.h"

#define PETE_DEVICE __device__

template<class T, int N>  class ILattice;
template<class T>         class IScalar;
template<class T, int IL> struct AddILattice {};

template<class T>
PETE_DEVICE
void printType() {
  printf("%s\n",__PRETTY_FUNCTION__);
}

template<class T> class IScalar {
  T F;
};

template<class T, int N> class ILattice {
  T F[N];
};

template<class T, int N>
struct AddILattice<IScalar<T> , N> {
  typedef ILattice< T , N > Type_t;
};

#define IL 16

__global__ void kernel()
{
  printf("IL=%d\n",IL);  // Here IL==16

  typedef typename AddILattice<IScalar<float> ,IL>::Type_t Tnew;

  // This still works fine. Output:
  // void printType() [with T = ILattice<float, 16>]
  //
  printType<Tnew>();

  // Now problems begin: Output:
  // T=4 Tnew=0 IL=64
  // Here IL should still be 16
  // sizeof(Tnew) should be 16*sizeof(float)
  //
  printf("T=%d Tnew=%d IL=%d\n",sizeof(IScalar<float> ),sizeof(Tnew),IL);   
}   

int main()
{
    dim3  blocksPerGrid( 1 , 1 , 1 );
    dim3  threadsPerBlock( 1 , 1, 1);
    kernel<<< blocksPerGrid , threadsPerBlock , 48*1024 >>>( );

    cudaDeviceSynchronize();
    cudaError_t kernel_call = cudaGetLastError();
    printf("call: %s\n",cudaGetErrorString(kernel_call));

} 
```

任何想法为什么编译器`IL`从 16 更改为 64 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:54:19.173

可能是因为你使用了错误的 printf 转换。`%d`意思是输出一个int，但是sizeof返回的不是int，而是一个size_t。另外使用 size_t 长度修饰符（并使其无符号），即替换`%d`为`%zu`.

printf 无法知道（由于 var-args 列表）真正传递了哪些类型，因此不会发生类型转换，它只能知道格式字符串的类型。所以你必须在那里传递正确的参数。当您在 size_t 与 int 大小相同的系统上时，您的代码可以工作（例如，许多 32 位系统）。但是你不能依赖这个事实，使用正确的转换会帮助你。

（所以它不是编译器改变你的常量，而是你输出错误）

# batch-file - 批处理命令：如果 IF 包含 .pdf

> ID：10428222
> 
> 赞同：1
> 
> 时间：2012-05-03T09:05:02.813
> 
> 标签：batch-file

我正在尝试制作批处理文件以打印文件夹中的所有 PDF 文件。

1.  我制作了`list.txt`其中包含文件夹中的所有文件（带有`dir /x`）。

2.  然后我使用 txt 文件的所有行并在行中找到“短文件名”（`/F "tokens=4" ...`例如`12345678.pdf`; `list.txt`）。

3.  发送此文件进行打印 ( `AcroRd32.exe" /n /t "%1"`) 并重复 #2。

问题是它需要所有行（也不是PDF）。是否有可能找到变量的一部分然后使用`IF`函数？像这样的东西：

```
IF "%1" == "*.pdf" echo print 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:21:11.397

您现有的代码只需要使用`dir /x *.pdf`.

但我会用以下内容替换您的整个代码：

```
for %%F in (*.pdf) do start "" AcroRd32.exe /n /t "%%~snxF" 
```

# c++ - 如何使用 C++ 安装浏览器的扩展？

> ID：10428225
> 
> 赞同：2
> 
> 时间：2012-05-03T09:05:05.270
> 
> 标签：c++, windows, winapi, firefox, google-chrome

我需要一种方法来使用我的 C++ 应用程序安装 firefox 和 chrome 扩展。

如何做到这一点以及如何避免通过浏览器（firefox 和 chrome）安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:53:19.763

铬：
[http ://code.google.com/chrome/extensions/external_extensions.html](http://code.google.com/chrome/extensions/external_extensions.html)

火狐：
[https ://developer.mozilla.org/en/Extension_Packaging](https://developer.mozilla.org/en/Extension_Packaging)

请注意，您不必关闭浏览器即可安装扩展程序。
下次启动浏览器时会找到该扩展。

# orchardcms - 果园 cms 形状示踪剂没有选择我的形状

> ID：10428227
> 
> 赞同：0
> 
> 时间：2012-05-03T09:05:13.253
> 
> 标签：orchardcms

形状跟踪器显示 Part_Product [Empty] 。我可以看到形状渲染，但形状跟踪器无法选择我的形状。任何的想法？

问候乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:44:05.753

在我测试时这是一个愚蠢的错误，将数据包围在 html 标签中，形状跟踪器会选择形状

# vb.net - 自动更正日期格式 STRING "dd/MM/yyyy"

> ID：10428228
> 
> 赞同：0
> 
> 时间：2012-05-03T09:05:15.310
> 
> 标签：vb.net, arrays, date-format, date-formatting, date

我正在处理带有很多出生日期的 xml。XML 已加载到数据表中。我们需要的格式是“dd/MM/yyyy”日期很乱，例如“dd-MM-yyyy”或“dd.MM.yyyy”，所以我想写一个函数来自动纠正一组预定义的分隔符为正确的格式。所以我正在考虑做这样的事情_

但当然，这不仅仅是工作..我不能使用替换来替换数组。如果我能做到这一点，一切都会好起来的。希望有人可以指出解决方法。非常感谢。

```
Dim str As String = ""
Dim keywords() As String = {"-", "_", ".", "\"}

For Each x In dt.Rows
    str = x("DOB")
    If keywords.Contains(str) Then
        str = str.Replace(keywords, str)
    End If
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:42:48.840

我做到了..谢谢大家的帮助..希望它对其他人也有用..

```
 Public Function arrayReplace(ByVal dt As DataTable) As DataTable

    Dim str As String = ""
    Dim sep As String() = {"-", "_", ".", "\", "'"}
    For Each x In dt.Rows
        For i As Integer = 0 To Old.Length - 1
            str = x("DOB").Replace(sep(i), "/")
            x("DOB") = str
        Next
    Next
    Return dt

    End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:16:35.087

这就是我使用文化的原因，然后我的问题就解决了。

```
Imports System.Globalization
Imports System.Threading

blah..blah..blah..

Threading.Thread.CurrentThread.CurrentCulture = New System.Globalization.CultureInfo("en-GB", False) 
```

# css - Opera 在带有 contenteditable 和 twitter 引导的文档中添加了奇怪的间距，为什么？

> ID：10428229
> 
> 赞同：4
> 
> 时间：2012-05-03T09:05:17.360
> 
> 标签：css, html, twitter-bootstrap, opera, contenteditable

[当使用contenteditable](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#contenteditable)和[twitter bootstrap](http://twitter.github.com/bootstrap/)时，Opera 似乎在某些文档元素之间添加了一些奇怪的垂直空间。

**JSFiddle 示例：**

[Contenteditable 未启用](http://jsfiddle.net/RVXdj/)vs [Contenteditable 启用](http://jsfiddle.net/wUuSn/)- 请注意，在第一个示例中，行之间没有垂直间距，但在第二个示例中，它们有。

在 Linux 上的 Opera 11.61 和 Windows 上的 11.62 中测试。在我测试的任何其他浏览器中，在任何一个小提琴中，行之间都没有垂直间距。

我尝试删除引导程序并添加[它手动应用的 css](http://pastie.org/3852892)，但这并没有触发边距。然而，在检查 DOM 时，我发现了一些我怀疑相关的奇怪标签（`<::before>`截图[）](http://i.imgur.com/UlGuS.png)。`<::after>`

引导 css 做了什么来实现这一点，避免它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:01:33.410

Nixing 这些选择器会删除间距：

```
.row:before,.row:after{display:table;content:"";}
.row:after{clear:both;} 
```

不知道它控制什么，或者你为什么需要它。看起来是某种 clearfix 类型的东西，但我不知道。[http://jsfiddle.net/wUuSn/2/](http://jsfiddle.net/wUuSn/2/)

# c# - 使用 XAML 使“默认”文本出现在没有焦点的空 TextBox 中

> ID：10428230
> 
> 赞同：11
> 
> 时间：2012-05-03T09:05:19.970
> 
> 标签：c#, wpf, xaml

我想创建一个文本框，如果它是

a) 空的

b) 失去焦点

当用户输入文本框时，灰色的“默认”文本应该会消失。

我尝试使用 来执行此操作`ControlTemplate.Triggers`，但我似乎找不到`HasFocus`属性。

使用 XAML 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T09:39:58.493

虽然重新发明轮子并没有真正的好处，但看看如何做到这一点可能会很有趣。执行此操作的最简单方法（在纯 XAML 中）是为 a 创建一个`ControlTemplate`在它没有聚焦且不包含文本时`TextBox`覆盖 a 的方法：`TextBlock`

```
<ControlTemplate TargetType="TextBox">
<Grid>
    <TextBox Text="{Binding Text, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}" />
    <TextBlock HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Text="Your Prompt Here"
                Margin="5,0,5,0"
                Foreground="#FF808080"
                FontStyle="Italic"
                IsHitTestVisible="False"
                x:Name="UserMessage"
                Visibility="Hidden"/>
</Grid>
<ControlTemplate.Triggers>
    <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Property="Text" Value=""/>
            <Condition Property="IsKeyboardFocusWithin" Value="False"/>
            </MultiTrigger.Conditions>
        <Setter Property="Visibility" TargetName="UserMessage" Value="Visible"/>
    </MultiTrigger>
</ControlTemplate.Triggers>
</ControlTemplate> 
```

意思是“如果属性为空并且 TextBox 没有键盘焦点，则将`MultiTrigger`Visibility 设置为 Visible ”`Text`

如果您想让它更可重用，那么您可以使用它作为默认模板创建一个自定义控件，并使用包含提示消息的依赖属性

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-03T09:14:52.093

您可以简单地使用[Extended WPF Toolkit](https://github.com/xceedsoftware/wpftoolkit)的[WatermarkTextBox](https://github.com/xceedsoftware/wpftoolkit/wiki/WatermarkTextBox)。 ![在此处输入图像描述](../Images/84146ad8321313dda231179d36715d4f.png)

我根据您对如何在项目中添加和使用库的评论编写了一个小指南。

**步骤 1)**在您的项目中右键单击`References`并选择`Add Reference`.

![步骤1](../Images/039554c591cd3a44f72577ac45fba04d.png)

**步骤 2)**找到并添加 dll 文件`WPFToolkit.Extended.dll`。

![第2步](../Images/dc213aa21c9aa4edd8ab5132ced2a4a3.png)

**步骤 3)**最后您需要添加`XAML`代码。

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:extToolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <extToolkit:WatermarkTextBox Watermark="Enter First Name" />
    </Grid>
</Window> 
```

这里的关键是将 .dll 添加`reference`到 dll 文件中。

```
xmlns:extToolkit="http://schemas.xceed.com/wpf/xaml/toolkit" 
```

然后你可以`XAML`像这样简单地使用它。

```
<extToolkit:WatermarkTextBox Watermark="Enter First Name" /> 
```

# cakephp - CakePHP 2.1 保存 HABTM 字段

> ID：10428233
> 
> 赞同：3
> 
> 时间：2012-05-03T09:05:27.993
> 
> 标签：cakephp, cakephp-2.0, has-and-belongs-to-many

我有两个模型 User 和 Movie .. 它们与 UsersWatchlist 相关联..

```
public $hasAndBelongsToMany = array('User' => array(
        'className' => 'User',
        'joinTable' => 'users_watchlists',
        'foreignKey' => 'movie_id',
        'associationForeignKey' => 'user_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
))

public $hasAndBelongsToMany = array(
   'Movie' => array(
        'className' => 'Movie',
        'joinTable' => 'users_watchlists',
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'movie_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
))
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Movie' => array(
        'className' => 'Movie',
        'foreignKey' => 'movie_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )) 
```

我在 UsersController 中创建了“监视列表”操作。代码如下

```
public function watchlist($id = null) {
    $userid = 3;
    if (!$id && $userid != 3) {
        $this->Session->setFlash('Invalid Movie');
        $this->redirect($this->referer(array('action' => 'listing')));
    }
    $this->request->data['User']['id'] = $userid;
    $this->User->UsersWatchlist->create();
    debug($this->User->UsersWatchlist->saveAll(array('user_id' => '2', 'movie_id' => 3)));
    if ($this->User->UsersWatchlist->saveAll($this->request->data)) {
        $this->Session->setFlash('The movie has been added to your watchlist', 'admin/flash_success');
        $this->redirect($this->referer(array('action' => 'listing')));
    } else {
        $this->Session->setFlash('The movie could not be added to your watchlist. Please, try again.', 'admin/flash_error');
        $this->redirect($this->referer(array('action' => 'listing')));
    }  
} 
```

所以我在保存时遇到错误..请告诉我解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:28:40.310

首先你的数据应该是这样的（如果你想通过用户模型保存它）：

```
$this->request->data = array(
    'User' => array(
        'id' => '2',
    ),
    'Movie' => array(
        'Movie' => array(
            (int) 0 => '3',
        ),
    ),
); 
```

我看到的主要错误是您试图通过联接模型进行保存，而您应该通过用户模型进行保存。所以在控制器中使用：

```
$this->User->saveAll($this->request->data) 
```

如果数据如上所述，它应该没问题。[我想我已经在这里](https://stackoverflow.com/questions/10429812/cakephp-saving-data-in-habtm-fields/10431118#10431118)回答了你的问题。

希望这可以帮助。干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:17:45.097

你的联想似乎很有趣。您将 HABTM 连接模型与两个模型（用户、电影）相关联是否有原因？您可以通过将第一个 $HABTM 放在 Movie 模型中，将第二个 $HABTM 放在 User 模型中来实现相同的效果。您不需要创建中间连接模型，cake 会为您完成，您只需要表格。

# python - (python) append 用于列出，然后仅在未使用时返回值

> ID：10428234
> 
> 赞同：0
> 
> 时间：2012-05-03T09:05:27.963
> 
> 标签：python, list

标题基本概括了所有内容。以下是我编写的一个小型日语学习游戏的准系统。如果它尚未在当前循环中打印，我只需要打印假名。谁能看到我做错了什么？谢谢 ：）

```
#!/usr/bin/python
from os     import system as cmd
from random import choice as random
from time   import sleep
from sys    import platform

m = ["ma",  "mi",  "mu",  "me",  "mo"]
y = ["ya",         "yu",         "yo"]
n = ["n"]

def get_dict(group):
    if   group == 1:
        return m
    elif group == 13:
        return y
    elif group == 14:
        return n
    elif group == 15:
        return m + y + n

def clear():
    if "win" in platform: cmd("cls")
    if "lin" in platform: cmd("clear")

def get_kana():
    global kana
    return random(kana)

## Initiate      ##
kana = get_dict(15)
speed = speed()
clear()
print disp
print "Please get ready!..."
sleep(5)

def chk_used():
    global used_kana
    numlpo = 0
    while numlpo < 50:
        numlpo = numlpo + 1
        kana = get_kana()
        if kana not in used_kana:
            used_kana = used_kana.append(kana)
            return kana
            break

def main():
    used_kana = []
    while True:
        clear()
        print disp
        print "Please write the following kana: \n"
        print "    " + chk_used()
        sleep(3)

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:25:08.603

几件事：

在`chk_used`中，您有以下行：

```
used_kana = used_kana.append(kana) 
```

只有一个问题。`list.append()`返回无。每次执行此操作时，您都附加`kana`到`used_kana`，但随后您将值设置`used_kana`为无。

```
used_kana.append(kana) 
```

就足够了

您`used_kana`在函数中定义

```
def main():
    used_kana = [] 
```

但是您尝试在全局范围内引用它。Python 寻找一个全局变量，却找不到。

```
def chk_used():
    global used_kana 
```

解决方案：将使用的假名作为参数传递给`chk_used()`

```
def chk_used(usedCharacters):
    ...

def main():
    used_kana = []
        ...
        print "    " + chk_used(used_kana) 
```

最后：

```
 if kana not in used_kana:
        used_kana.append(kana)
        return kana
        break #there's no reason for this break. the return on the line before exits the function, your code will never ever execute this line. 
```

# java - 难以理解的 Android C2DM

> ID：10428246
> 
> 赞同：0
> 
> 时间：2012-05-03T09:06:22.800
> 
> 标签：java, android, android-c2dm

就像大多数试图理解 C2DM 的人一样，我已经按照[Vogella C2DM 教程的教程进行操作，这是获取代码的好教程，但它并不能真正帮助我理解如何使用它。](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)我已经设置了我的 Android 类和我的服务器（移植到 php），但现在我不知道如何继续。我的代码如下所示：

c2dm.php（服务器端）

```
 function googleAuthenticate($username, $password, $source="Company-AppName-Version", $service="ac2dm") {
    session_start();
    if( isset($_SESSION['google_auth_id']) && $_SESSION['google_auth_id'] != null)
        return $_SESSION['google_auth_id'];

    // get an authorization token
    $ch = curl_init();
    if(!ch){
        return false;
    }

    curl_setopt($ch, CURLOPT_URL, "https://www.google.com/accounts/ClientLogin");
    $post_fields = "accountType=" . urlencode('HOSTED_OR_GOOGLE')
        . "&Email=" . urlencode($username)
        . "&Passwd=" . urlencode($password)
        . "&source=" . urlencode($source)
        . "&service=" . urlencode($service);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    // for debugging the request
    //curl_setopt($ch, CURLINFO_HEADER_OUT, true); // for debugging the request

    $response = curl_exec($ch);

    //var_dump(curl_getinfo($ch)); //for debugging the request
    //var_dump($response);

    curl_close($ch);

    if (strpos($response, '200 OK') === false) {
        return false;
    }

    // find the auth code
    preg_match("/(Auth=)([\w|-]+)/", $response, $matches);

    if (!$matches[2]) {
        return false;
    }

    $_SESSION['google_auth_id'] = $matches[2];  
}

function sendMessageToPhone($authCode, $deviceRegistrationId, $msgType, $messageText) {

    $headers = array('Authorization: GoogleLogin auth=' . $authCode);
    $data = array(
        'registration_id' => $deviceRegistrationId,
        'collapse_key' => $msgType,
        'data.message' => $messageText //TODO Add more params with just simple data instead           
    );

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, "https://android.apis.google.com/c2dm/send");
    if ($headers)
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    $response = curl_exec($ch);

    curl_close($ch);

    return $response;
} 
```

C2DMRegistrationReceiver.java

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.w("C2DM", "Registration Receiver called");
    if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {
        Log.w("C2DM", "Received registration ID");
        final String registrationId = intent
                .getStringExtra("registration_id");
        String error = intent.getStringExtra("error");

        Log.d("C2DM", "dmControl: registrationId = " + registrationId
                + ", error = " + error);
        // TODO Send this to my application server
    }
}

public void sendRegistrationIdToServer(String deviceId, String registrationId) {

    Log.d("C2DM", "Sending registration ID to my application server");
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("myserverpage");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        // Get the deviceID
        nameValuePairs.add(new BasicNameValuePair("deviceid", deviceId));
        nameValuePairs.add(new BasicNameValuePair("registrationid", registrationId));

        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = client.execute(post);
        BufferedReader rd = 
        new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line = "";
        while ((line = rd.readLine()) != null) {
        Log.e("HttpResponse", line);
    }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

C2DMMessageReceiver.java

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.w("C2DM", "Message Receiver called");
    if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {
        Log.w("C2DM", "Received message");
        final String payload = intent.getStringExtra("payload");
        Log.d("C2DM", "dmControl: payload = " + payload);
        // Send this to my application server
    }
} 
```

在我的 MainActivity 我有

```
public void register() {
    Intent intent = new Intent("com.google.android.c2dm.intent.REGISTER");
    intent.putExtra("app",PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    intent.putExtra("sender", "app-name@gmail.com");
    startService(intent);
} 
```

我在我的应用程序启动期间调用了 register() ，在 LogCat 中它显示“调用消息接收器”，而不是“调用注册接收器”。我当然已经将 app-name@gmail.com 更改为我自己的等等，但我现在不知道如何使用代码。谁能帮助我？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:38:10.880

Vogella 的教程非常简单明了。如果您一步一步地遵循它，您将不会很难理解。

您的记录器说*Message Receiver Called*因为那是您使用 C2DMMessageReceiver 记录的内容。如果您有另一个注册接收器，请确保在清单中声明它并在此处发布代码。

我建议使用相同的接收器类。例如，这是一个简单的`onReceive`方法：

```
if (action != null){
        // This is for registration
        if (action.equals("com.google.android.c2dm.intent.REGISTRATION")){
            Log.d(LOG_TAG, "Received registration ID");

            final String registrationId = intent.getStringExtra("registration_id");
            String error = intent.getStringExtra("error");

            Log.d(LOG_TAG, "dmControl: registrationId = " + registrationId + ", error = " + error);

            // Create a notification with the received registration id

            // Also save it in the preference to be able to show it later

            // Get the device id in order to send it to the server
            String deviceId = Secure.getString(context.getContentResolver(), Secure.ANDROID_ID);
            // .. send it to the server
        }
        // This is for receiving messages
        else if (action.equals("com.google.android.c2dm.intent.RECEIVE")){
            String payload = intent.getStringExtra("payload");
            Log.d(LOG_TAG, "Message received: " + payload);
            // .. create a notification with the new message
        } 
```

我添加了评论，您可以在其中进行更多操作（例如创建通知、将您的注册 ID 发送到您的第三方服务器等）。在 Lars Vogel 的教程中也可以找到如何执行上述这些操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:36:17.450

就我而言，我对两者都使用单个接收器：

```
if (action.equals("com.google.android.c2dm.intent.REGISTRATION")) {
String registrationId = intent.getStringExtra("registration_id");
//do somting
} else if (intent.getAction().equals("com.google.android.c2dm.intent.RECEIVE")) {
Bundle extras = intent.getExtras();
String message = extras.getString("message");
}// end if

} 
```

并在清单中

```
 <receiver
  android:name=".receiverName"
 android:permission="com.google.android.c2dm.permission.SEND" >
  <intent-filter>
<action android:name="com.google.android.c2dm.intent.RECEIVE" />

<category android:name="packageName" />
</intent-filter>
<intent-filter>
<action android:name="com.google.android.c2dm.intent.REGISTRATION" />

 <category android:name="packageName" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:06:21.970

我只会解释我所理解的。

1.  首先，在您拥有的 gmail id 下使用您的 android 应用程序包名称（例如 com.example.app）在 android c2dm 站点中注册。

2.  开发一个 android 应用程序应该能够将设备注册 id 作为请求发送到服务器。服务器应将这些 ID 存储在 db 中。

3.  一旦你准备好从服务器向所有设备推送一些消息，你只需要为你在 c2dm 中注册的 gmail id 和存储在 db 中的设备 id 提供一个新的 auth_token。

Vogella 教程包含获取设备的 regid 和 auth_token 的示例代码。我已经尝试过了，并在我的应用程序中进行了修改。

# wpf - 基于内容的 WPF AutoCompleteBox 宽度

> ID：10428248
> 
> 赞同：1
> 
> 时间：2012-05-03T09:06:27.387
> 
> 标签：wpf, silverlight, autocompletebox

我有一个固定宽度的 System.Windows.Controls.AutoCompleteBox。宽度应根据内容动态增长。

我怎样才能做到这一点。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:19:43.000

您可以通过将其放入`AutoCompleteBox`with`Grid.Column`来实现`Width="Auto"`。这是一个例子：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" MinWidth="30" />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <toolkit:AutoCompleteBox />
</Grid> 
```

# php - 计算距离

> ID：10428251
> 
> 赞同：0
> 
> 时间：2012-05-03T09:06:34.733
> 
> 标签：php, html, gis, geospatial, distance

我正在设计一个招聘数据库，我需要它来执行几项任务，这些任务都涉及集成一种计算距离的方法：

1）计算候选人与客户的距离？

2) 计算任何一天可工作的候选人半径范围内的客户？

3) 计算客户半径范围内具有正确职位空缺资格的候选人人数。

如您所见，我需要以两种主要方式计算距离 1）半径 2）当乌鸦飞过时，我更喜欢精确的距离，但第一种方法可以。我知道我可以集成谷歌地图或其他一些基于网络的地图，但我希望系统是独立的，这样它就可以在没有互联网连接的情况下运行。该系统将有一个 HTML5 前端，后端是 Mysql 和 PHP。

谢谢比亚乔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T09:35:57.510

两点之间的距离可以用以下公式计算：

```
6371*acos(cos(LatitudeA)*cos(LatitudeB)*cos(longitudeB-longitudeA)+sin(LatitudeA)*sin(latitudeB)) 
```

当然，这是以公里为单位的“乌鸦”近似值。

可以通过以下方式将其翻译为 php：

```
$longA     = 2.3458*(M_PI/180); // M_PI is a php constant
$latA     = 48.8608*(M_PI/180);
$longB     = 5.0356*(M_PI/180);
$latB     = 47.3225*(M_PI/180);

$subBA       = bcsub ($longB, $longA, 20);
$cosLatA     = cos($latA);
$cosLatB     = cos($latB);
$sinLatA     = sin($latA);
$sinLatB     = sin($latB);

$distance = 6371*acos($cosLatA*$cosLatB*cos($subBA)+$sinLatA*$sinLatB);
echo $distance ; 
```

有了它，您可以计算两点（人）之间的距离，当然还可以确定一个点是否在另一个点的半径内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:05:48.887

只是一个想法：如果您的客户和候选人住在一个​​非常有限的区域，我会使用矩形地图并在数据库中输入该区域所有城市的 x 和 y 值。

由于勾股定理，你可以说：

距离² =（x 值客户端 - x 值候选）² +（y 值客户端 - y 值候选）²

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:27:16.313

首先，半径实际上不是从客户到候选人的“乌鸦飞行”距离吗？无论如何...您需要找出一种算法来根据点之间的距离计算您需要的东西。

如果您希望系统是独立的，您将需要具有点的坐标（纬度、经度）的值。为此，您可能需要互联网连接并使用谷歌地图等服务来根据点的地址查找坐标。但是，一旦您将其存储在您的数据库中，您将不需要互联网连接。

有一个公式可以根据坐标计算两点之间的距离，你会很容易找到它:)

# ruby-on-rails - Rails：设计 gem 安全吗？

> ID：10428252
> 
> 赞同：6
> 
> 时间：2012-05-03T09:06:35.160
> 
> 标签：ruby-on-rails, encryption, ssl, devise, passwords

我在**设计**gem 上运行的 Web 应用程序上进行了身份验证。我想知道它是否安全。是的，它将密码作为哈希值存储在数据库中，登录后使用加密令牌等。但是在初始登录阶段呢？它是否通过无线方式发送未加密的用户密码（我没有 SSL）？它可以让客户端使用某个只有服务器才能解密的公钥对其进行加密吗？还是 SSL 是加密用户密码的唯一方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:34:19.293

它是安全的，记住 rails 使用authentity_token。我还没有听说过问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T00:41:12.510

“请注意，HTTP 基本身份验证以明文形式传输用户名和密码，因此您不应将此方法用于需要更高级别安全性的应用程序。”

[http://pivotallabs.com/users/ledwards/blog/articles/1534-http-basic-authentication-and-devise](http://pivotallabs.com/users/ledwards/blog/articles/1534-http-basic-authentication-and-devise)

# ruby-on-rails - Rails 控制器 id 等于

> ID：10428253
> 
> 赞同：0
> 
> 时间：2012-05-03T09:06:36.200
> 
> 标签：ruby-on-rails

我对rails有点陌生，所以请原谅这个愚蠢的问题。

我在 Rails 中有一个使用 mongoid 的博客类型应用程序，它有一个用户部分和一个评论部分。（评论嵌入在文章中）。所以我的评论控制器的删除方法遇到了问题。为了删除它们，我遍历我的集合，并查找用户单击的 id 的位置，params[:id] 等于数据库中的 id，comment.id。使用打印语句，我发现这确实有效，并且两个 id 应该相等。但是，由于某种原因，当我在 rails 中使用等于运算符 (==) 时，它会将注释注册为 nil。

任何帮助，将不胜感激！

```
def destroy
    @article = Article.find(params[:article_id])
    logger.debug(@article)
    @article.comments.each do |comment|
        logger.debug(comment)
        print comment.id.
        print ", "
        print params[:id]
        print " | "

        if comment.id.equal? params[:id]
            comment.destroy unless comment.nil?

        end 
    end 
    respond_to do |format|
        format.html { redirect_to "/" }
        format.js
    end 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:13:37.560

`comment.id`是一个 Bson 对象，`params[:id]`是一个字符串。

它们在您打印时匹配，因为显示的是`comment.id.to_s`

无论如何，你宁愿这样做：

```
@article.comments.where(:id => params[:id]).first 
```

或者：

```
@article.comments.where(:_id => params[:id]).first 
```

我不确定 Mongoid。

# php - 使用php输出xml作为数据源的自动完成

> ID：10428258
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:06:58.917
> 
> 标签：php, jquery, xml, autocomplete

我正在尝试实现一个在输入时显示建议的输入字段。我找到了 jquery 自动完成功能，但我正在努力将 XML 作为来自 php 的数据源。我的 php 文件会创建这样的输出。

XML:

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<locations>
    <location>
        <number>600</number>
        <name>Location Name 600</name>
    </location>

    <location>
        <number>698</number>
        <name>Location Name 698</name>
    </location>

    <location>
        <number>1110</number>
        <name>Location Name 1110</name>
    </location>
</locations> 
```

我已经使用 Rory McCrossan 发布的链接进行了尝试。

我的 HTML 现在看起来像这样：

```
 <!DOCTYPE HTML>
<head>
    <title>Autocomplete</title>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>
    <script type="text/javascript">
        $(function() {
        function log( message ) {
            $( "<div/>" ).text( message ).prependTo( "#output" );
            $( "#output" ).scrollTop( 0 );
        }

        $.ajax({
            url: "api.php",
            dataType: "xml",
            success: function(xmlResponse) {
                var data = $("location", xmlResponse).map(function() {
                    return {
                        name: $("name", this).text(),
                        number: $("number", this).text()
                    };
                }).get();

                $("#locations").autocomplete({
                    source: data,
                    minLength: 0,
                    select: function( event, ui ) {
                        log( ui.item ?
                            "Selected: " + ui.item.name + ", number: " + ui.item.number :
                            "Nothing selected, input was " + this.value );
                    }
                });
            }
        });
    });
    </script>
</head>

<body style="background-color: black; color: white;">

<input id="locations" />

<div class="ui-widget" style="margin-top:2em; font-family:Arial">
    Result:
    <div id="output" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div>

</body>
</html> 
```

当我在输入字段中写入内容然后清除它时，它会在输入字段下方显示 3 li（根据 xml，这是我拥有的位置数量），但它们旁边没有显示文本。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:12:08.930

要将 XML 与 autoComplete 一起使用，请参见此处的示例：http: [//jqueryui.com/demos/autocomplete/xml.html](http://jqueryui.com/demos/autocomplete/xml.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:53:51.037

好的，为自己找到了一个解决方案（决定创建 JSON 输出）。Rory McCrossan 的示例很好，但据我所见，它只加载了一次 xml，然后在 xml 中进行搜索。我想要的是预过滤输出，所以它不会传输太多数据。

```
$(function() {
        $("#locations").autocomplete({
            source: function(request, response) {
                $.ajax({
                    url: "api.php",
                    dataType: "jsonp", 
                    data: {
                        location: request.term
                    },
                    success: function(data) {
                        response($.map(data.locations, function(item) {
                            return {
                                label: item.name,
                                value: item.nummer
                            }
                        })); 
                    }
                });
            },
            minLength: 0,
            select: function(event, ui) {
                $("<div/>").text(ui.item.label + " " + ui.item.value).prependTo("#output");
            }
        })
    }) 
```

# c# - 签署引用的程序集后生成错误

> ID：10428262
> 
> 赞同：3
> 
> 时间：2012-05-03T09:07:12.933
> 
> 标签：c#, .net, gac, assembly-signing

在签署了一些它很高兴通过预签名构建的程序集后，我在我的项目中遇到了构建错误。在错误列表中，我看到如下错误：

> 类型“XXX”是在未引用的程序集中定义的。您必须添加对程序集 'XXX，Version=[**正确版本**]，Culture=[**正确文化**]，PublicKeyToken=null [**不正确的公钥令牌**]'的引用

当恢复到未签名的程序集时（唯一的代码差异是引用程序集中的签名信息及其存储共享密钥的解决方案），一切都会重新构建。

不幸的是，这些文件需要签名，所以我想知道是否有人以前遇到过这个问题？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:56:55.630

Thanks to everyone for their answers.

As it turns out, it was nothing to do with the fact that the assemblies had become signed. There were simply other assemblies that were still referencing the old signed versions that I hadn't spotted.

...as is usually the case, the error was between the chair and the keyboard.

# java - 工作流模型中的自定义字段

> ID：10428264
> 
> 赞同：1
> 
> 时间：2012-05-03T09:07:42.643
> 
> 标签：java, alfresco

我正在自定义 Alfresco Share。我想在开始新的工作流程时添加一个名为“主题”的新字段。`workflowModel.xml`我为内容建模添加了更改。`share-config-custom.xml`自定义启动工作流表单的视图。

问题是如何从其他地方（例如工作流程详细信息）查看保存的数据（新字段主题）。我怀疑我也需要改变`WorkflowInstance.java`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:53:33.580

需要修改以下文件。

```
workflowModel.xml // to add property to exisiting workflow

WorkflowModelBuilder.java
WorkflowObjectFactory.java
WorkflowInstance.java

workflow-list.js
workflow.lib.ftl 
```

新字段需要作为新属性添加到 WorkflowInstance

# ios - 分配对象和释放 ios 的问题

> ID：10428266
> 
> 赞同：0
> 
> 时间：2012-05-03T09:07:49.853
> 
> 标签：ios, memory-leaks

我有以下代码的内存泄漏。其中 self.firstURLConn 是 @property（非原子，保留）。

```
NSMutableURLRequest* req = [[NSMutableURLRequest alloc] initWithURL:urlcachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:60.0f];

self.firstURLConn = [[[NSURLConnection alloc] initWithRequest:req delegate:self] autorelease];

[req release];//memory leak here and with self.firstURLConn 
```

为什么内存在这里泄漏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:16:51.223

您是否曾经运行过产品 > 分析？如果您这样做了，请向我们展示内存泄漏问题日志。

他们不仅会告诉您有内存泄漏问题的代码行，还会显示导致问题的代码步骤。

我建议您使用带有泄漏工具的仪器工具。它将显示有关您的代码问题的深入信息。

**编辑：** req 变量错过自动释放。因为`req`已经保留了2次。像这样更改代码

```
NSMutableURLRequest* req = [[[NSMutableURLRequest alloc] initWithURL:urlcachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:60.0f] autorelease];

self.firstURLConn = [[[NSURLConnection alloc] initWithRequest:req delegate:self] autorelease];

[req release];//memory leak here and with self.firstURLConn 
```

因为您`firstURLConn`已在保留属性中声明。所以，dealloc方法，你应该设置`nil`这个属性

```
- (void)dealloc
{
    self.firstURLConn = nil;
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:23:31.737

由于委托方法异步返回（将来的某个时间），您必须在委托方法内部释放 NSURLConnection。删除自动释放并在完成和失败的委托方法中添加释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:12:04.607

firstURLConn 会保留你的 req，req 只有在 firstURLConn 释放 req 时才会被释放。

# objective-c - AQRecorder AAC 在 AVPlayer 中播放

> ID：10428269
> 
> 赞同：3
> 
> 时间：2012-05-03T09:07:51.460
> 
> 标签：objective-c, ios, avplayer, aac

我在 iOS 上录制的 aac 音频文件有一些问题。我需要录制音频并使用 AVPlayer 播放。录制工作正常，文件已创建。我可以在 Mac 上播放。但是当我尝试在 AVPlayer 中播放它（文件）时 - 没有声音。

录制音频的属性

```
mRecordFormat.mSampleRate       = 8000;
mRecordFormat.mFormatID         = kAudioFormatMPEG4AAC;
mRecordFormat.mFormatFlags      = kAudioFormatMPEG4AAC_LD;
mRecordFormat.mFramesPerPacket  = 0;
mRecordFormat.mChannelsPerFrame = 1;
mRecordFormat.mBitsPerChannel   = 0;
mRecordFormat.mBytesPerPacket   = 0; 
```

我尝试不同的设置但没有结果。请帮忙

PS 其他文件（mp3 等）正常播放

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-09T10:19:54.980

好的，我几年前找到了解决方案。我将记录逻辑更改为

```
NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithInt:kAudioFormatMPEG4AAC], AVFormatIDKey,
                          [NSNumber numberWithFloat:16000], AVSampleRateKey,
                          [NSNumber numberWithInt:2], AVNumberOfChannelsKey,
                          [NSNumber numberWithInt:AVAudioQualityMedium], AVSampleRateConverterAudioQualityKey,
                          [NSNumber numberWithInt:64000], AVEncoderBitRateKey,
                          [NSNumber numberWithInt:8], AVEncoderBitDepthHintKey,
                          nil];

error = nil;

_recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error]; 
```

这个录制的文件在 iOS、Android 和 MacOS/Win 上播放。所以这就是全部。

# ios - NSFetchedResultsController 不显示来自不同上下文的更新

> ID：10428271
> 
> 赞同：23
> 
> 时间：2012-05-03T09:07:54.900
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobjectcontext, nsoperationqueue

我有一个`NSFetchedResultsController`和几个操作通过`NSOperationQueue`.

FRC（及其谓词）如下所示：

```
- (NSFetchedResultsController*)fetchedResultsController
{
    if(fetchedResultsController) return fetchedResultsController;

    NSManagedObjectContext* mainContext = [self managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:[NSEntityDescription entityForName:@"Check" inManagedObjectContext:mainContext]];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"isSync == %@", [NSNumber numberWithBool:NO]]];
    [fetchRequest setFetchBatchSize:10];

    fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:mainContext sectionNameKeyPath:nil cacheName:nil];
    fetchedResultsController.delegate = self;

    [fetchRequest release], fetchRequest = nil;

    return fetchedResultsController;
} 
```

主线程和线程操作都有自己的托管对象上下文。他们只共享同一个协调器。

在线程操作中，我将`isSync`属性从更改`NO`为`YES`。要知道`Check`要更新的实体是什么，主上下文传递给线程一个 a `NSManagedObjectID`。线程操作检索托管对象，如下所示：

```
-(void)main
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSManagedObjectContext *exportContext = [[NSManagedObjectContext alloc] init];
    [exportContext setPersistentStoreCoordinator:[self persistentStoreCoordinator]];

    //...

    Check* check = (Check*)[exportContext existingObjectWithID:objID error:&error];
    check.isSync = [NSNumber numberWithBool:YES];

    //...

    [exportContext save:&error];

    [pool release], pool = nil;
} 
```

当线程操作调用通知时`save`，`mergeChangesFromContextDidSaveNotification`主上下文会合并更改。

```
- (void)contextChanged:(NSNotification*)notification
{
    if ([notification object] == [self managedObjectContext]) return;

    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(contextChanged:) withObject:notification waitUntilDone:YES];
        return;
    }

    [[self managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
} 
```

记录`notification`潜在客户的描述以验证更改是否正确执行。

**我的问题**

`NSFetchedResultsControllerDelegate`不调用委托方法。

这很奇怪，因为处理相同的上下文（主要上下文）允许监听更改并调用委托方法，例如删除`UITableView`.

我发现一些关于 SO 的主题有同样的问题。我已经尝试了所有解决方法，但找不到有价值的解决方案：

1.  [NSFetchedResultsController 不显示来自其他上下文的更新](https://stackoverflow.com/questions/2155111/nsfetchedresultscontroller-not-showing-updates-from-other-contexts)

2.  [从后台线程合并更新后，NSFetchedResultsController 未触发委托方法](https://stackoverflow.com/questions/7682562/nsfetchedresultscontroller-not-firing-delegate-method-after-merging-update-from)

3.  [带有谓词的 NSFetchedResultsController 忽略从不同 NSManagedObjectContext 合并的更改](https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different)

先感谢您。

**编辑**

*上面的代码在以前的模型中工作。然后我创建了一个从前一个模型复制（和粘贴）实体的新模型，现在它不再工作了。*

建议？

**编辑 2**

这是我在`NSFetchedResultsController`getter 中使用的谓词。这是我的错，但是当我写这篇文章时，我没有复制它。

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"insertionDate" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

// previous code here
[fetchRequest setSortDescriptors:sortDescriptors]; 
```

现在，关于**乔迪**的最后评论

> 在您的 NSOperation 的 main() 中，您正在加载新对象，并且看起来您正在将每个新对象的 isSync 设置为 YES。您用于 fetchedResultsController 的谓词仅查找具有 isSync == NO 的对象。

我期望当属性`isSync`设置为 YES 时，`NSFetchedResultsController`观察者会更改并删除与谓词不匹配的行。我错了吗？

请记住，当将更改从后台合并到主线程时，我可以看到很少有对象更新了它们的`isSync`属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T18:25:22.140

你有基本的想法，所以你的代码中可能有一个错误......

仔细检查您是否正确注册以接收来自后台 MOC 的通知。

注册以接收来自所有对象的所有通知。在该方法中，记录事件及其所有数据。当对象是 MOC 时，转储其所有属性（尤其是注册、插入、更新和删除对象的列表）。

在保存调用之前和之后放置一个日志语句，并在通知处理程序中合并通知。

此外，您省略了很多代码，因此很难知道您实际在做什么，但是您包含的代码示例看起来很难将所有正在加载的对象的 isSync 设置为 YES，但您的获取请求只需要那些设置了 isSync 的对象到否。这些新对象都不会通过该谓词。

最后，仔细检查您的模型定义并确保您使用了正确的数字类型。这可能是问题的一大来源。

**编辑**

哦，是的，我忘记了……您的 fetch 请求没有排序描述符。创建 FRC 时，您的 fetch 请求必须至少包含一个排序描述符……如果您有多个部分，则第一个排序描述符用于将对象分组为部分。

跟进 Alexsander 的评论......我在帖子开头提到了它，但你当然不想听 MOC 的通知，除非它是众所周知的你的一个（除非，当然，你是仅出于调试目的而记录）。您应该了解您正在使用的 MOC。

此外，我建议使用父/子 MOC 进行此类处理，但如果操作正确，您正在做的事情应该可以工作。

Parent（私有并发类型） Main（主要并发类型）

然后，使用您的背景 MOC，只需让它们将主 moc 设置为它们的父级。当他们保存时，他们的对象被直接注入到主 MOC 中。然后主 MOC 可以在以后发出保存以将它们放到磁盘上。

或者，您可以将背景 MOC 设置为“父级”，然后“主” MOC 可以重新发出 fetch 以从父级获取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:51:03.273

我刚刚遇到了同样的问题，我用父/子上下文解决了这个问题。这是我遇到的问题。

我在有自己的后台线程`managedObjectContext`（这是强制性的）中更新我的核心数据对象图，我`fetchedResultsController`无法获取对数据库所做的更改。

**在我解决它之后，我做了一些笔记：**

`ManagedObjectContext`s 不是线程安全的，这意味着 a`managedObjectContext`不能与其他线程共享。如果一个线程需要使用 a `managedObjectContext`，那么它将初始化自己的 managedObjectContext。

初始化一个`managedObjectContext`有两种方法：

*   `alloc/init`然后设置它的`persistentStoreCoordinator`属性

*   `alloc/init`然后设置一个`parentContext`属性而不是一个`persistentStoreCoordinator`属性

注意：不能同时设置 a 的`persistentStoreCoordinator`和`parentContext`属性`managedObjectContext`。

*当上下文在“链接到只需要在主线程上使用的控制器和 UI 对象”*的后台线程上运行时，需要使用父/子上下文（核心数据文档）。

以下是父/子上下文所需的要求：

*   父上下文存在于主线程中

*   子上下文位于后台线程中

*   两个上下文都需要使用`initWithConcurrencyType:NSMainQueueConcurrencyType`方法进行初始化。

*   当在子上下文中完成批量更改时，两个上下文都需要执行保存操作。这些保存操作需要嵌套在 performBlock 方法中，即：

    ```
    childContext performBlock:^{
        [childContext save:nil];
        [self.parentContext performBlock:^{
            [self.parentContext save:nil];                
        }];
    }]; 
    ```

编辑：上面的代码实际上是一个坏主意，原因有两个：

1）它可以在不保存父上下文的情况下工作。

2) 如果父上下文在其上运行，则主线程被阻塞。

我希望它有帮助！

编辑：这是一个对我有很大帮助的stackoverflow线程：[Core Data parent ManagedObjectContext是否需要与子上下文共享并发类型？](https://stackoverflow.com/questions/8424130/does-a-core-data-parent-managedobjectcontext-need-to-share-a-concurrency-type-wi)

# php - PHP - json_encode() 中的错误

> ID：10428275
> 
> 赞同：0
> 
> 时间：2012-05-03T09:08:04.780
> 
> 标签：php, json

问题：返回数组，但不在 json 中。

结果：必须在数组中返回数组。外部数组具有带数字的键，值是具有键“ID”和“NAME”的数组，并且从数据库中分配了值。

```
$i = 0;
$json_values = array();
while($sctg = mysql_fetch_assoc($get_sctg)){
    $json_values[$i] = array("ID" => $sctg['ID'], "NAME" => $sctg['NAME']);
    $i++;
}
echo json_encode($json_values); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:52:21.940

您的代码非常好 - 您只是误解了 JavaScript 中数组和对象之间的区别。

```
[{"ID":"4","NAME":"asdasd"},
 {"ID":"3","NAME":"LOKS"},
 {"ID":"1","NAME":"LOL"}] 
```

这是一个包含三个元素的数组的 JSON。每个元素都是一个具有属性`ID`和的对象`NAME`。

假设数组存储在`data`. 您可以使用简单的循环遍历该数组中的对象`for`：

```
for(var i = 0; i < data.length; i++) {
    var row = data[i];
    // Here you can use row.ID and row.NAME
} 
```

* * *

我猜你希望你的 JSON 看起来像这样：

```
{
    0: {"ID":"4","NAME":"asdasd"},
    1: {"ID":"3","NAME":"LOKS"},
    2: {"ID":"1","NAME":"LOL"}
} 
```

这实际上很**糟糕**，因为 JavaScript 中的对象**没有排序**（即使它们实际上在大多数浏览器中，但不能保证！）。因此，当迭代此类元素中的行时（使用`for(var key in data)`），您不一定会首先获得 ID=4 的行，因为它的键为零。

但是，如果出于某种原因你真的想要一个对象而不是一个数组（你不需要！），你总是可以将数组转换为对象：

```
echo json_encode((object)$json_values); 
```

作为旁注，出于安全原因，通常将对象作为 JSON 中的顶级元素是一个好主意（您可以重新定义数组构造函数，然后包含带有脚本标记的顶级数组的内容，从而访问如果数据被 XHR 请求访问，通常受相同的源策略保护），所以我会像这样更改 PHP 代码：

```
echo json_encode(array('rows' => $json_values)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:16:09.330

无需使用 `$i++;`直接使用

```
while($sctg = mysql_fetch_assoc($get_sctg)){
    $json_values[] = array("ID" => $sctg['ID'], "NAME" => $sctg['NAME']);    
} 
```

它会返回给你 JSON

# android - 安卓大应用安装解决方案

> ID：10428282
> 
> 赞同：0
> 
> 时间：2012-05-03T09:08:41.437
> 
> 标签：android

我的 TTS 应用程序具有巨大的原始资源（大量用于单位选择的 wav 文件）可能超过 1 GB。那么我该如何安装它
有人说我必须将所有原始资源放在SD卡中，其余的放在内部存储器中，那我该怎么做

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:11:47.047

1、最佳解决方案。[APK 扩展文件](http://developer.android.com/guide/market/expansion-files.html)

2、下载你需要的文件。当您的应用启动时。

# zend-framework - 致命错误：当我浏览到 Bootstrap.php 文件时找不到类“Zend_Application_Bootstrap_Bootstrap”

> ID：10428289
> 
> 赞同：0
> 
> 时间：2012-05-03T09:08:59.597
> 
> 标签：zend-framework

首先我是新手。我在我的 wamp 服务器中成功安装了 zend 框架。我的包含路径如下：

include_path = ".;E:\wamp\bin\php\zend_framework\library"

我创建了一个项目名称“mehedi”。但是当我浏览到 mehedi/application/ 目录中的 Bootstrap.php 文件时，它显示以下错误：

```
Fatal error: Class 'Zend_Application_Bootstrap_Bootstrap' not found in E:\wamp`\www\mehedi\application\Bootstrap.php on line 4` 
```

当我浏览到除 mehedi/public/index.php 之外的其他 php 文件时，它会显示一些致命错误。

一切正常还是我错过了一些重要的事情。

这是我的 mehedi/application/configs/application.ini 文件中的应用程序配置：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:58:00.883

如果您使用 Zend_Tool 命令行界面设置您的应用程序，并将`.htaccess`文件放在公共文件夹中，这是默认设置。
您描述的这种行为是可以预料的。ZF MVC 通过 index.php 文件路由所有请求（图像、css 和 javascript 等资源除外）。因此，如果您可以`Bootstrap.php`直接路由到您的文件，那么您会担心。

ZF 中的所有 url 都应采用能够`www.example.com/moduleName/controllerName/actionName`根据需要附加参数的形式。另请注意，这`moduleName`是可选的，并且将默认为`controllerName`if no`moduleName`与路由匹配。

要测试您的安装，请使用以下网址：`mehedi/public/index/`您应该会看到默认的欢迎屏幕。当您添加控制器和操作时，您将自动添加新的 url 路由。

[编辑] 例如，如果您添加一个名为的控制器`AdminController`（如果您使用 Zend_Tool 添加它，它将自动使用 indexAction() 构建）。您将自动能够`AdminController/indexAction`使用 url路由到`www.mehedi.com/admin/index`并且它会起作用。（在大多数应用程序中，索引被指定为默认操作，因此`www.mehedi.com/admin`会达到相同的结果）

PS 帮自己一个忙，设置一个[虚拟主机](http://apptools.com/phptools/virtualhost.php)，它让生活变得更轻松

这是您的虚拟主机可能看起来的示例，如果您打算使用它，将本地主机声明为第一个虚拟主机很重要。

```
httpd-vhosts.conf  with Include conf/extra/httpd-vhosts.conf enabled in httpd.conf
NameVirtualHost *:80
#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    DocumentRoot "C:\Zend\Apache2/htdocs" #I use Zend server, make this match your wamp setup
    ServerName localhost
#directory settings for localhost are typically defined in httpd.conf
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "E:/wamp/www/mehedi/public"
    ServerName www.mehedi.com
    ErrorLog "path/to/your/log/file"
  <directory "E:/wamp/www/mehedi">
      Options Indexes FollowSymlinks
      AllowOverride all
      Order Deny,Allow
      Deny from all
      Allow from 127.0.0.1
  </directory>
</VirtualHost> 
```

重要的是要记住这种虚拟主机设置旨在用于本地开发机器或内部网络服务器，除非您真的知道自己在做什么，否则您不会希望在生产服务器上执行此操作。

# java - 如何对两个字符串数组进行排序

> ID：10428295
> 
> 赞同：1
> 
> 时间：2012-05-03T09:09:32.830
> 
> 标签：java, sorting

我有两个数组：

```
arrayA = {"b","c","a"} 
arrayB = {"99","11","22"} 
```

我如何将它们排序在一起，以便`arrayA = {"a","b","c"}`和`arrayB = {"22","99","11"}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:15:03.250

使用`Arrays.sort(arrayB)`. 您甚至可以提供自定义`Comparator`来影响排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:35:14.143

我制作了一个字母数字排序程序，请查看。

```
import java.util.Arrays;
import java.util.Comparator;

public class AlphanumericSorting implements Comparator {
    public int compare(Object firstObjToCompare, Object secondObjToCompare) {
        String firstString = firstObjToCompare.toString();
        String secondString = secondObjToCompare.toString();

        if (secondString == null || firstString == null) {
            return 0;
        }

        int lengthFirstStr = firstString.length();
        int lengthSecondStr = secondString.length();

        int index1 = 0;
        int index2 = 0;

        while (index1 < lengthFirstStr && index2 < lengthSecondStr) {
            char ch1 = firstString.charAt(index1);
            char ch2 = secondString.charAt(index2);

            char[] space1 = new char[lengthFirstStr];
            char[] space2 = new char[lengthSecondStr];

            int loc1 = 0;
            int loc2 = 0;

            do {
                space1[loc1++] = ch1;
                index1++;

                if (index1 < lengthFirstStr) {
                    ch1 = firstString.charAt(index1);
                } else {
                    break;
                }
            } while (Character.isDigit(ch1) == Character.isDigit(space1[0]));

            do {
                space2[loc2++] = ch2;
                index2++;

                if (index2 < lengthSecondStr) {
                    ch2 = secondString.charAt(index2);
                } else {
                    break;
                }
            } while (Character.isDigit(ch2) == Character.isDigit(space2[0]));

            String str1 = new String(space1);
            String str2 = new String(space2);

            int result;

            if (Character.isDigit(space1[0]) && Character.isDigit(space2[0])) {
                Integer firstNumberToCompare = new Integer(Integer
                        .parseInt(str1.trim()));
                Integer secondNumberToCompare = new Integer(Integer
                        .parseInt(str2.trim()));
                result = firstNumberToCompare.compareTo(secondNumberToCompare);
            } else {
                result = str1.compareTo(str2);
            }

            if (result != 0) {
                return result;
            }
        }
        return lengthFirstStr - lengthSecondStr;
    }

    public static void main(String[] args) {
        String[] alphaNumericStringArray = new String[] { "NUM10071",
                "NUM9999", "9997", "9998", "9996", "9996F" };

        Arrays.sort(alphaNumericStringArray, new AlphanumericSorting());

        for (int i = 0; i < alphaNumericStringArray.length; i++) {
            System.out.println(alphaNumericStringArray[i]);
        }

    }

} 
```

**这是输出：**

9996 9996F 9997 9998 NUM9999 NUM10071

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:13:48.240

此链接将帮助您尝试 array.sort(Arg); [http://www.leepoint.net/notes-java/data/arrays/70sorting.html](http://www.leepoint.net/notes-java/data/arrays/70sorting.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T09:16:25.653

您可以使用

```
Arrays.sort(arrayB); 
```

输出是

```
C1
C2
C3

  arrayB = {"22","99","11"}
  Arrays.sort(arrayB); 
```

输出：

```
11
22
99 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:17:15.560

如果您将使用相同的字母并且仅使用 0 到 9 之间的 1 个数字，那么您可以按照对第一个数组进行排序的方式对其进行排序。如果您打算输入更多带有更多数字的字母，则必须实现自己的自定义比较器（假设默认行为不适合您）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T09:35:47.900

书面问题的答案似乎如此明显，以至于我认为我们不理解您的真正要求。

我猜你真正要问的是如何对一个数组进行排序，并根据排序如何重新排序第一个数组来重新排序第二个数组。（您的示例选择不当来说明这一点……但实际上确实这样做了。）

假设这就是您的意思，最简单的方法是将两个数组转换为单个数组对，根据第一个字段对对进行排序，然后使用排序后的对列表重新填充原始数组。

The (possible) snag is that the total ordering of the second array is indeterminate if the sort is not stable. (Or to put it another way, if there are duplicates in `arrayA`, then the relative order of the corresponding `arrayB` elements cannot be predicted.) There are ways to deal with this.

# ember.js - ember.js - 如何对整个 {{#view}} 应用操作

> ID：10428299
> 
> 赞同：3
> 
> 时间：2012-05-03T09:10:10.287
> 
> 标签：ember.js

我想在 {{#view}} 中指定我的操作（以及“目标”和“开”），而不是如下所示

```
{{#view App.Views.List
        contentBinding="this"
        classNames="item"
        classNameBindings="content.type content.selected:selected"
}}
<div {{action "select"}}>text</div>
{{/view}} 
```

使点击应用到 App.Views.List 实例的整个区域。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:20:32.497

如何`click`直接在 View 上定义方法而不是使用`{{action}}`?

```
App.Views.List = Ember.View.extend({
    click: function() {
        alert('clicked');
    }
}); 
```

有关示例，请参[见此小提琴。](http://jsfiddle.net/MSch/a56ke/)

# visual-studio-2010 - 什么是允许根据每个客户轻松定制产品的良好解决方案结构？

> ID：10428300
> 
> 赞同：10
> 
> 时间：2012-05-03T09:10:16.573
> 
> 标签：visual-studio-2010, asp.net-mvc-3, architecture, tfs, dependency-injection

我正在寻找一些关于如何在每个客户的基础上轻松定制和扩展核心产品的建议。我知道这可能是一个太大的问题。但是，我们确实需要一些想法，就好像我们设置错误一样，它可能会导致我们多年的问题。我在定制和扩展现有产品方面没有太多经验。

我们有一个核心产品，我们通常根据每个客户定制。我们最近使用 MVC3 前端用 C# 4 重写了该产品。我们已经重构，现在有 3 个项目组成了解决方案：

*   核心域项目（命名空间 - projectname.domain.*） - 由域模型（供 EF 使用）、域服务接口等（存储库接口）组成
*   域基础设施项目（命名空间 -projectname.infrastructure.*） - 实现域服务 - EF 上下文、存储库实现、文件上传/下载接口实现等。
*   MVC3（命名空间 - projectname.web.*）- 由控制器、视图模型、CSS、内容、脚本等组成的项目。它还具有 IOC（Ninject）处理项目的 DI。

该解决方案作为独立产品运行良好。我们的问题是根据每个客户扩展和定制产品。我们的客户通常希望很快（通常在签订合同后的几天内）获得带有品牌 CSS 和样式的核心产品版本。然而，70% 的客户希望通过定制来改变其运作方式。一些自定义很小，例如域模型、视图模型和视图等的附加属性。其他的更重要，需要全新的域模型和控制器等。

一些定制似乎对所有客户都有用，因此我们希望定期将它们从定制中更改并将它们添加到核心中。

我们目前将源代码存储在 TFS 中。要启动一个项目，我们通常手动将源代码复制到一个新的团队项目中。更改命名空间以反映客户端名称并开始自定义基本部分，然后部署到 Azure。这显然会导致完全重复的代码库，我确信这不是正确的方法。我认为我们可能应该拥有一些提供核心功能并在需要时扩展/覆盖的东西。但是我真的不知道该怎么做。

因此，我正在寻找有关最佳项目配置的任何建议，以允许：

*   代码的快速部署——很容易启动一个新客户端以允许品牌/微小的变化
*   无需复制和粘贴代码
*   尽可能多地使用 DI 以保持松散耦合
*   允许为每个客户定制代码
*   如果我们获得最新版本的核心并重新部署，则能够在一个地方扩展核心产品并让所有客户都获得该功能

非常感谢任何帮助/建议。很高兴添加更多任何人认为会有所帮助的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T11:29:26.003

I may not answer to this completly, but here some advices:

1.  Don't copy your code, ever, whatever the reason is.
2.  Don't rename the namespace to identify a given client version. Use the branches and continuous integration for that.
3.  Choose a branching model like the following: a root branch called "Main", then create one branch from Main per major version of your product, then one branch per client. When you develop something, target from the start in which branch you'll develop depending on what you're doing (a client specific feature will go in the client branch, a global version in the version branch or client branch if you want to prototype it at first, etc.)
4.  Try the best to rely on Work Item to track features you develop to know in which branch it's implemented to ease merge across branches.

Targeting the right branch for you dev is the most crucial thing, you don't have to necessary define some hard rules of "what to do in which occasion", but try to be consistant.

I've worked on a big 10 years project with more than 75 versions and what we usually did was:

*   Next major version: create a new branch from Main, dev Inside
*   Next minor version: dev in the current major branch, use Labels to mark each minor versions Inside your branch.
*   Some complex functionnal features was developped in the branch of the client that asked for it, then reversed integrated in the version branch when we succeeded in "unbranded" it.
*   Bug fixes in client branch, then reported in other branches when needed. (you have to use the Work Item for that or you'll get easily lost).

It's my take on that, other may have different point of view, I relied a lot on the Work Item for traceability of the code, which helped a lot for the delivery and reporting of code.

**EDIT**

Ok, I add some thought/feedback about branches:

In Software Configuration Management (SCM) you have two features to help you for versionning: branches and labels. Each one is not better nor worst than the other, it depends on what you need:

1.  A Label is used to mark a point in time, using a label, for you to later be able to go back to that point if needed.
2.  A Branch is used to "duplicate" your code to be able to work on **two versions at the same time**.

So using branches only depends on what you want to be able to do. If you have to work one many different versions (say one per client) at the same time: there's no other way to deal with it than using branches.

To limit the number of branches you have to decide what will be a new branch or what will be marked by a label for: Client Specific Versions, Major Version, Minor Version, Service Pack, etc.

Using branches for Client versions looks to be a no brainer. Using one branch for each Major version may be the toughest choice for you to make. If you choose to use only one branch for all major versions, then you won't have the flexibility to work on different major versions at the same time, but your number of branches will be the lowest possible.

Finally, Jemery Thompson has a good point when he says that not all your code should be client dependent, there are some libraries (typically the lowest level ones) that shouldn't be customized per client. What we do usually is using a separated branch tree (which is not per client) for Framework, cross-cutting, low level services libraries. Then reference these projects in the per client version projects.

My advice for you is using Nuget for these libraries and create nuget package for them, as it's the best way to define versionned dependencies. Defining a Nuget package is really easy, as well as setting up a local Nuget server.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T00:41:46.043

`I just worried that with 30 or 40 versions (most of which aren't that different) branching was adding complexity.`

* * *

+1 好问题，您必须做出更多的商业决定：

我是否想要一个简洁的代码库，其中易于维护并且功能和修复可以快速推出给我们的所有客户

还是我想要一个代码库的大量实例拆分，每个实例都有一些很难的微小调整*（编辑：除非你的 ALM MVP 可以“取消标记”东西）*合并到一个主干中。

* * *

我同意@Nockawa 提到的几乎所有内容，除了恕我直言，不要用分支来代替扩展你的代码架构。

绝对使用分支/主干策略，但正如您提到的那样，太多的分支使得`quickly`推出站点范围的功能变得更加困难，并阻碍了项目范围的持续集成。如果您希望防止复制/粘贴，请限制分支的数量。

就编码解决方案而言，我相信您正在寻找的是：

*   模块/插件、接口和 DI 是正确的！
*   从基础类派生自定义类（扩展每个客户的 DSL，Assembly.Load()）
*   自定义报告解决方案（而不是新页面，许多自定义请求可能是报告）
*   带有电子表格的页面（呵呵，我知道 - 但有趣的是它有效！）

模块/插件点的好例子是 CMS，例如**DotNetNuke 或 Kentico**。通过查看 Facebook 的插件架构、用于音频和视频编辑的插件、3D 建模应用程序（如 3DMax）和可让您构建自己的关卡的游戏，可以获得其他想法。

> 理想的解决方案是一个管理应用程序，您可以选择您的模块（DLL）、定制 CSS（皮肤）、编写 dB 脚本并将解决方案自动部署到 Azure。为了实现这个目标，插件会更有意义，代码库不会被拆分。此外，当对模块进行增强时 - 您可以将其推广到所有客户。

您可以使用用户控件、派生类和函数覆盖轻松地进行小的自定义，例如域模型、视图模型和视图等的附加属性。

这样做真的很笼统，假设客户说我想要一个标签来记录系统中每个人的年龄，制作一个调用的函数`int SumOfField(string dBFieldName, string whereClause)`，然后为该客户站点有一个绑定到该函数的标签。然后说另一个客户想要一个函数来统计客户购买产品的数量，你可以重复使用它：SumOfField("product.itemCount","CustomerID=1")。

需要全新域模型和控制器等的更重要的更改将适合插件架构。一个例子可能是客户需要第二个地址字段，您可以将当前的地址用户控件调整为任何页面的插件，它会设置知道哪些 dB 表和字段可以实现其与 CRUD 操作的接口.

> 如果在 30-40 个分支中为每个客户端定制功能，可维护性将变得非常困难，因为我觉得您将无法（轻松地）将它们合并在一起。如果有机会这会变得非常大，您不想管理 275 个分支机构。但是，如果它非常专业，您必须为每个客户端下到 User-Control 级别并且“用户无法设计自己的页面”，那么 Nockawa 的前端分支策略是完全合理的。

# linux - 重新运行 rpm -e 后保留 RPM 生成的文件

> ID：10428301
> 
> 赞同：2
> 
> 时间：2012-05-03T09:10:17.767
> 
> 标签：linux, rpm, rpm-spec

卸载后是否可以将 RPM 内容保留在文件系统中？

基本上，当有人运行 rpm -e 时，我不想删除 RPM 生成的文件，但仍然从已安装的 RPM 列表中删除该软件包。我想从服务器手动卸载我的应用程序，但我找不到这样做的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-12T21:55:58.630

## 规范文件创建

从这个角度，作为包创建者，您可以将文件标记为配置。Cambridge Uni 的 John Warbrick 对[您可以在 RPM 规范文件中使用的不同文件标记](http://www-uxsup.csx.cam.ac.uk/~jw35/docs/rpm_config.html)以及它们在升级期间的行为方式进行了很好的概述。

标记为`%config`的文件（如果已更改）为：

*   卸载时留下，但用`.rpmsave`扩展名重命名
*   更新或重新安装时保持不变，但有效负载副本安装有`.rpmnew`扩展名

Warbrick 不处理直接删除包：如果标记`%config`为未*更改*的文件，擦除包将删除该文件。（请记住，根据[RPM scriptlet 的顺序](https://fedoraproject.org/wiki/Packaging:Scriptlets#Scriptlet_Ordering)，RPM*更新*或*重新安装*从删除旧包开始，在新文件放下之前。即，旧的未更改配置被新配置*替换*。）

`%config`标记不是真正配置的东西将是滥用 RPM 文件分类。**这很重要**，因为系统管理员需要能够信任包有效负载。另外，您可能不希望使用扩展名重命名此类文件。

您最大的希望是在 RPM %post 期间创建文件。复制到文件系统的文件根据列表`%install`检查`%files`并存储在 RPM 数据库中，但创建的文件`%post`不是。同样，这是对 RPM 规范文件格式的滥用，*但如果您在`%description`*和任何其他文档中提到它，特别是如果它在您的包的上下文中是合乎逻辑的预期行为，您*可能*会得到一些同情。

* * *

## 现有软件包

对于想要删除软件包而不删除其有效负载的系统管理员，您可以使用`rpm --justdb`. 首先，检查文件列表：

```
# rpm -ql $PACKAGE | tee $PACKAGE.payload
[rpm returns list of files, tee saves it in the file $PACKAGE.payload]

# rpm -e --justdb $PACKAGE 
```

（在这个阶段，您可能会收到有关 deps 的投诉，因此`--nodeps`如果必须，请重复。）

最后，检查包是否已经消失，但有效载荷仍然存在：

```
# rpm -q $PACKAGE
package $PACKAGE is not installed
# ls -l $(<$PACKAGE.payload)
[ls queries list of files saved in $PACKAGE.payload] 
```

（或者如果文件名包含空格，则更可靠`ls`，这在 RPM 中是不合情理的。）

```
# cat $PACKAGE.payload|xargs -d '\n' ls -l 
```

* * *

## 其他意见

请注意，对于使用我的答案顶部概述的方法创建的包，尝试列出它拥有的文件`rpm -ql $PACKAGE`将不会显示这些持久文件。在此期间丢弃文件的另一个后果`%post`是“拥有”这些文件的另一个包可能会意外地覆盖它们——它们没有在 RPM 数据库中列出，因此它们不受保护。

我概述的两种方法都破坏了 RPM 包创建和系统管理员的最佳实践。请*非常*小心如何使用这种危险的“小知识”。也许您还可以采取其他措施来创造理想的情况。

（最后，我知道这是四年前的一个问题。它没有得到回答。它需要回答。干杯。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:26:41.670

`rpm -e --repackage package_name`将在`/var/spool/repackage`. `rpm2cpio`如果您需要单独返回这些文件，您可以从该 rpm 中提取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T17:29:27.330

RPMS 的优点之一正是：您可以轻松卸载（删除）所有文件。如果您想手动安装 RPM 提供的文件，只需以 root 身份解压 RPM，使用：

cd / && rpm2cpio *.rpm | cpio -idmv

这不是一个好主意，但是您可以在其他地方（例如在 ${HOME} 下）解压缩 RPMS，这非常有用。不过，您可能需要调整一些环境变量。您不会污染 RPM 数据库，但仍会使用 RPM 的内容。当然，您的应用程序可能会被系统更新破坏，因为它不受依赖项保护。无论如何，如果您不是 root，这就是您“安装​​”和 RPM 的方式。拆卸也很容易（如果选择合适的安装路径）。

# regex - 正则表达式 A(B+C*) == AB + A(C*)

> ID：10428302
> 
> 赞同：1
> 
> 时间：2012-05-03T09:10:19.613
> 
> 标签：regex

我知道根据左分布规则，这个正则表达式： A ( B + C )

可以这样写：AB+AC

我的问题是下一个。在这个例子中可以使用左分配规则吗： A ( B + C* )

这样我就可以得到： AB + A(C*)

或者我得到这样的东西：AB + AC *

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T10:07:43.173

`AB + A(C*)`绝对正确（并且`AB + AC*`几乎可以肯定也是正确的，取决于 的优先级`*`）。

有问题的正则表达式是`A ( B + C* )`⇔ `A ( B + (C*) )`。如果我们使用`c`=`C*`作为替代，我们可以将原始的正则表达式写为`A ( B + c )`，现在很明显我们可以使用左分配规则。一口气完成所有步骤：

```
A ( B + C* ) <=> A ( B + (C*) ) <=> AB + A(C*) <=> AB + AC* 
```

（出于教学目的，这里的工作比必要的要多，我用`<=>`的是“等同于”的意思。）

我们也可以只看有问题的正则表达式匹配什么（这不是证明，但它很好地证明了它们是等价的）：

*   `A(B + C*)`匹配`A`后跟单个`B`或任意数量的`C`seg `AB`, `A`, `AC`, `ACC`, `ACCC`...
*   `AB + A(C*)`匹配任意数量`AB`的seg , , , , ...`A``C``AB``A``AC``ACC``ACCC`

这些是完全一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:52:33.073

据我所知`A(B+C*)`是不一样的`AB + A(C*)`。第一个表达式匹配 ABBBBBBBBBBBBB 或 ABBBBBBBBBBBC 等字符串 第二个表达式匹配 ABBBBBBBBBBBA 或 ABBBBBBBBBBBACCCCCCCCCCC 等字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:35:16.187

AB + A(C*) 这个是正确的，因为

C* 表示 0 或更多（你有 0 或 C 的倍数） C+ 表示 1 或更多（至少一个 c 或多个）

# c# - 确定html页面中的内容是什么

> ID：10428314
> 
> 赞同：1
> 
> 时间：2012-05-03T09:11:13.327
> 
> 标签：c#, html, asp.net-mvc, web-crawler

我正在构建一个新闻阅读器，我可以选择让用户通过输入页面链接来分享来自博客、网站等的文章。我现在使用两种方法来确定页面的内容：

1.  我正在尝试从用户输入的页面中提取 rss 提要链接，然后在提要中匹配该 url 以获得正确的项目。

2.  如果网站不包含提要，或者它的格式错误或输入的地址与 rss 中的项目链接不同（如果不是更多的话，这在大约 50% 的情况下）我会尝试找到 og 元标记，这很好用，但只有更大的网站才有，较小的网站和博客通常对整个网站都有相同的元描述。

我想知道例如谷歌是如何做到的？当网站不包含元描述时，Google 会以某种方式自行确定其搜索结果页面上的内容。

我正在使用`HtmlAgilityPack`从页面中提取内容以及我自己的方法将 html 清理为文本。

有人可以向我解释一下逻辑或最佳方法吗？如果我尝试直接从顶部抓取它，我通常会得到来自侧边栏、导航等的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:58:46.923

我最终使用了用JAVA 编写的[Boilerpipe](http://code.google.com/p/boilerpipe/)，使用 IKVM 导入它，它适用于区域格式正确的页面，但对于某些内容分散的页面仍然存在问题。

# javascript - 我应该避免在我的网站中使用 javascript 和 jquery 吗？

> ID：10428321
> 
> 赞同：3
> 
> 时间：2012-05-03T09:11:54.580
> 
> 标签：javascript, jquery

我使用一些 jquery 和 JS 函数来验证表单并检查例如该字段是否为空或密码是否少于 6 个字符，以及类似的东西，我注意到如果有人禁用了 JS，那么这些函数将毫无用处，并且不再保护表单，可以使用 PHP 更好地制作，所以我现在应该避免使用它们，因为这可能会对我的网站造成侮辱吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T09:14:03.793

JavaScript 对于改善用户交互以及减少服务器上的请求数量非常有用；但是，正如您所指出的，它可以被禁用。回答您的问题：**不，我不建议避免使用 JavaScript，但关键是不要依赖它来执行关键操作，例如验证。**您需要在客户端 (JavaScript) 和服务器 (PHP) 端实现验证。这将确保用户无法完全禁用验证。

简而言之：

*   JavaScript = 好
*   JavaScript 验证 = 对用户很好，*但不可靠*
*   服务器端验证 = 必不可少

边注：

关于依赖 JavaScript 进行整体用户交互，正如其他答案所建议的那样，使用 JavaScript 来增强整体体验，但不要依赖用户打开它。我建议在睡前阅读[Progressive Enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)，这是一种让事情变得更好的方法，依赖于它，并且不仅可以应用于 JavaScript（CSS3 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:14:21.847

您应该使用 javascript 和 jQuery 来增强您网站的功能。如果有人关闭了 javascript，您应该确保该站点仍然可以运行，并且他们可以访问所有区域 - 即使可能有一些他们看不到的东西，例如过渡和效果。

关于验证，您应该**始终**验证服务器端。客户端验证是可选的，但它是一个非常好的功能，可以改善访问者的用户体验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-11T10:54:34.430

我并不是说这是一种抱怨，更多​​的是一种观察。

Web 开发人员经常将 Javascript 库当作最新的闪亮玩具，而不考虑后果。作为一名数据治理人员，当我们对收集的数据进行审计并找到通过 Javascript 验证的用户时，我经常带来坏消息。

“回去重新开始”。

Javascript 库非常适合呈现数据，但应该也不能依赖于数据验证和用户配置文件的完整性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T09:14:24.433

您不应**避免**在您的网站中使用 JS 和 jQuery，但**应避免**将它们用于验证目的或业务逻辑目的。这些应该在网站的后端完成，而不是在 UI 级别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T09:18:23.093

验证应始终发生在

*   **客户端**- 使用 javascript 来增强用户体验。
*   **服务器端**- 出于安全原因使用首选的服务器端编程语言
*   **服务端**- 如果您将 SOA / Web API 作为防御性编程实践的一部分。这也可以在数据库级别以及服务层。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T09:15:30.287

你不应该真的避免它们。您应该做的是实现客户端和服务器验证。由于您刚才提到的原因，不要仅仅依赖于客户验证。当数据到达服务器时，您应该始终对其进行验证。

添加客户端验证可为您的页面提供动态外观。用户不必等待表单进入服务器并在出现错误时返回。无需回发即可自动验证。

正如我上面所说，不要依赖客户端验证。始终也实施服务器端验证。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T09:15:44.730

记住我的朋友，Java 脚本是客户端脚本。它的目的是在客户端本身验证表单，这样我们就可以避免开销......您必须在客户端使用 java 脚本。因为 PHP 是服务器端语言。回复需要时间。

哈，服务器端验证同样重要。如果你想这样做，那么你可以使用服务器端语言。您可以通过halfer查看下面对我的帖子的评论。服务器端验证对于安全性和更多目的很重要。

有人禁用 js 是另一回事。您可以检查相同的内容并提供正确的消息以启用。

# java - 在 primefaces 3.x 中更新不同页面上的组件

> ID：10428331
> 
> 赞同：0
> 
> 时间：2012-05-03T09:12:15.447
> 
> 标签：java, jsf-2, primefaces

我目前正在将我们的应用程序从 primefaces 2.21 迁移到 3.2。我知道 3.2 有很多新的变化。我正在尝试使用如下所示的 ajax 请求更新对话框。

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
    //namespaces
   template="MainTemplate.xhtml">
   <ui:include src="dlgpath"/>
   <h:form id="formId">
   <p:datatable id="tab1">
     <p:column> 
     <p:commandButton id="mdf" value="modify" oncomplete="dlg.show();"         
    update="dlgfrmid"/>
     </p:column>
   </datatable>
    </h:form> 
```

下面是对话框的代码

```
 <p:dialog  widgetVar="dlg">
      <h:form id="dlgfrmid">
      <p:panelGrid id="gridId"> </p:panelGrid>
      <p:commandButton></p:commandButton>
      </h:form>
       </p:dialog> 
```

我在视图错误消息中收到“臭名昭著”找不到标识符为“dlgfrmid”的组件我已经做了很多搜索，有人可以帮助我理解 PF 3.x 中组件引用的概念吗？

感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:59:18.443

尝试改变

```
<p:dialog  widgetVar="dlg"> 
```

进入

```
<p:dialog appendToBody="true" widgetVar="dlg"> 
```

和

```
<p:commandButton id="mdf" value="modify" oncomplete="dlg.show();"         
update="dlgfrmid"/> 
```

进入

```
<p:commandButton id="mdf" value="modify" oncomplete="dlg.show();"         
update=":dlgfrmid"/> 
```

我遇到了类似的问题，我通过将对话框附加到正文的 html 来解决这个问题

# php - 301 永久重定向错误

> ID：10428333
> 
> 赞同：1
> 
> 时间：2012-05-03T09:12:19.770
> 
> 标签：php, .htaccess, redirect

我正在使用 htaccess 进行 301 永久重定向。我必须将 bima.php 重定向到 ge.php.so 我在 htaccess 中编写了以下代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^bima.php?$ $1/ge.php [NC,R=301,L] 
```

这可以正常工作..每当我将 www.test.com/bima.php 放入 url 时，它都会重定向到 www.test.com/ge.php 问题是我还必须为 ge.php 进行 301 重定向。这意味着每当 URL 中的 www.test.com/gen.php 时，它都会重定向到 www.test.com/bima.php。www.test.com/bima.php 需要重定向到 www.test.com/gen.php，反之亦然。有什么想法吗？或者无论如何要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:17:35.013

您的重定向规则

```
RewriteRule ^bima.php?$ $1/ge.php [NC,R=301,L]
RewriteRule ^ge.php?$ $1/bima.php [NC,R=301,L] 
```

正在无限循环中重定向。删除其中之一。

无论您使用哪种类型的逻辑，您尝试的重定向都会在一次循环中结束。所以最好避免这种要求的需要。

* * *

*这是一个PHP解决方案*

**文件：** *ge.php*

```
if($_SESSION['redirected']['from'] != 'bima.php') {
   header("location: bima.php");
   $_SESSION['redirected']['from'] = 'ge.php';
   exit;
} 
```

**文件：** *bima.php*

```
if($_SESSION['redirected']['from'] != 'ge.php') {
   header("location: ge.php");
   $_SESSION['redirected']['from'] = 'ge.php';
   exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:52:30.767

这是一个解决方案，尽管我同意每个人的基本概念有点古怪：

```
RewriteEngine On
RewriteCond %{ENV:redirected} !=1
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^bima.php?$ $1/ge.php [E=redirected:1,NC,R=301,L]
RewriteRule ^ge.php?$ $1/bima.php [E=redirected:1,NC,R=301,L] 
```

通过使用重定向设置环境变量，第二个重定向不会触发，因为它会看到重定向规则已设置。但是，不确定这是否会在初始成功后搞砸重定向。还有人知道吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:17:06.227

`bima.php`重定向到`ge.php`和`ge.php`到`bima.php`。这将导致无限循环。你想达到什么目的？为什么要`ge.php`重定向到`bima.php`，反之亦然？

无论哪种方式，你都应该改变你的设计。

# algorithm - 插入排序比冒泡排序好？

> ID：10428336
> 
> 赞同：10
> 
> 时间：2012-05-03T09:12:35.497
> 
> 标签：algorithm, sorting, bubble-sort, insertion-sort

我正在为考试做复习。

想知道在 O(N^2) 的平均情况复杂度相同的情况下，插入排序在什么条件下会比冒泡排序表现更好。

我确实找到了一些相关的文章，但我无法理解。

有人介意用简单的方式解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:40:57.747

冒泡排序的优势在于检测已排序列表的速度：

> BubbleSort 最佳案例场景：**O(n)**

然而，即使在这种情况下，插入排序也得到了更好/相同的性能。

冒泡排序或多或少只有助于理解和/或教授排序算法的机制，但现在在编程中找不到合适的用法，因为它的复杂性

> **O(n²)**

意味着它的效率在超过少量元素的列表上急剧下降。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T10:16:52.220

我想到了以下几点：

1.  冒泡排序总是需要再传递一次数组来确定它是否已排序。另一方面，插入排序不需要这个——一旦插入最后一个元素，算法就保证数组是排序的。

2.  冒泡排序`n`在每次通过时都会进行比较。插入排序比比较少`n`：一旦算法找到插入当前元素的位置，它就会停止比较并取下一个元素。

3.  最后，引用[维基百科](http://en.wikipedia.org/wiki/Bubble_sort)文章：

> 冒泡排序与现代 CPU 硬件的交互也很差。它需要至少两倍于插入排序的写入、两倍的缓存未命中以及渐近更多的分支错误预测。Astrachan 在 Java 中对字符串进行排序的实验表明，冒泡排序比插入排序慢大约 5 倍，比选择排序慢 40%

你可以在那里找到原始研究论文的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:02:03.817

在最坏的情况下，两者都倾向于在 O(n^2) 时执行

在最好的情况下，即当数组已经排序时，冒泡排序可以在 O(n) 处执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:17:55.313

你能提供你不明白的相关文章的链接吗？我不确定他们可能会解决哪些方面的问题。除此之外，还有一个理论上的区别可能是冒泡排序更适合表示为数组的集合（而不是表示为链表的集合），而插入排序更适合链表。

原因是冒泡排序总是一次交换两个项目，这在数组和链表上都是微不足道的（对数组更有效），而插入排序插入到给定列表中的一个位置，这对于链表来说微不足道，但涉及将数组中的所有后续元素向右移动。

话虽这么说，但还是要加一粒盐。首先，实际上，排序数组几乎总是比排序链表快。仅仅因为扫描一次列表已经有很大的不同。除此之外，将数组的 n 个元素向右移动比执行 n（甚至 n/2）个交换要快得多。这就是为什么其他答案正确地声称插入排序总体上是优越的，以及为什么我真的想知道您阅读的文章，因为我想不出一种简单的方式来说明这在案例 A 中更好，而在案例 A 中更好B.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:30:47.767

我想您正在寻找的答案在[这里](http://en.wikipedia.org/wiki/Sorting_algorithm#Bubble_sort)：

> 冒泡排序也可以有效地用于除了极少数元素之外已经排序的列表。例如，如果只有一个元素没有排序，冒泡排序只需要 2n 次。如果两个元素不按顺序排列，冒泡排序最多只需要 3n 次...

和

> 插入排序是一种简单的排序算法，对于小列表和大多数排序列表相对有效，并且通常用作更复杂算法的一部分

# windows-7 - Sprockets append_path 不添加到 SASS load_path

> ID：10428337
> 
> 赞同：2
> 
> 时间：2012-05-03T09:12:39.367
> 
> 标签：windows-7, sass, compass-sass, sprockets

我正在使用 Windows 7 中的 Sprockets（仅限开发环境）通过机架服务器提供我的 Compass 驱动的 SASS 文件。当我将路径附加到 Sprockets 时，它似乎没有将这些添加到 SASS 加载路径。

据我了解[sprockets-sass](https://github.com/petebrowne/sprockets-sass) `append_path`中的文档应该自动添加到 SASS 的路径`load_path`。

我`base/sass/base.scss`在一个项目特定的组件目录（如下所列）中，并且在这个文件中我试图包含来自*公共*组件的所有 scss 文件。`../common/sass/*`如果我在`@include`其中使用相对路径（

```
Sass::SyntaxError: File to import not found or unreadable: common/sass/*
Load paths:
  Sass::Globbing::Importer
  C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.1/frameworks/blueprint/stylesheets
  C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/compass-0.12.1/frameworks/compass/stylesheets
  C:/Program Files (x86)/ruby-1.9.3/lib/ruby/gems/1.9.1/gems/compass-magick-0.1.4/lib/stylesheets
  Compass::SpriteImporter
  (in C:/repos/test/project/components/base/sass/base.scss) 
```

如您所见，加载路径中仅列出了由 compass 和 compass-magick 添加的路径，我也希望它能够查看`C:/repos/test/project/components`。

我的机架服务器设置如下所示：

```
#!/bin/env ruby
require 'bundler'
Bundler.require

COMPONENT_DIR = "../../components" # -> C:/repos/test/project/components
GENERATED_CSS_DIR = "public/generated-css"

Compass.configuration do |compass|
  compass.output_style = :compressed
end

compiler = Rack::Builder.new do
  map "/#{GENERATED_CSS_DIR}" do
    environment = Sprockets::Environment.new
    environment.append_path File.expand_path(COMPONENT_DIR)
    environment.cache = Sass::CacheStores::Memory.new
    run environment
  end
end.to_app

@server = Rack::Server.new({:app => compiler, :Port => 9292})

Thread.new do
  loop do
    if $stdin.gets.nil?
      @server.server.shutdown
      Process.exit
    end
  end
end

@server.start 
```

该捆绑包安装了以下 gem：

*   机架 (1.4.1)
*   萨斯（3.1.15）
*   sass-globbing (1.0.0.rc.2)
*   指南针 (0.12.1)
*   指南针魔法 (0.1.4)
*   链轮 (2.3.1)
*   链轮助手 (0.4.0)
*   sprockets-sass (0.7.0)

对于如何解决此问题的任何见解或指示，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:32:55.720

看起来你需要类似的东西；

```
compass.add_import_path File.expand_path(File.join(COMPONENT_DIR, "components")) 
```

在你的`Compass.configuration do |compass|`街区内？

# directshow - IVideoWindow 界面无法在 UserControl 中正确显示视频帧

> ID：10428339
> 
> 赞同：0
> 
> 时间：2012-05-03T09:12:44.500
> 
> 标签：directshow, directshow.net

我正在使用 DirectShow.NET 库 [ [http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/) ]，我使用下面的代码来显示视频流。

```
videowindow.put_Owner(handle);
videowindow.put_WindowStyle(WindowStyle.Child | WindowStyle.ClipChildren);
videowindow.put_WindowState(DirectShowLib.WindowState.Show); 
```

注意：句柄是 System.Windows.Forms.UserControl 句柄 [this->Handle]

**问题是：**

*   在我的用户控件中，视频帧未正确显示：我看到一半的视频帧，另一半不在屏幕上。
*   此外，当我缩放用户控件时，视频流帧也不会缩放。

这可能是什么原因？我该如何解决？

**更新：**

基于 Roman Answer 我添加了以下代码：

```
videoWindow.SetWindowPosition(this.ClientRectangle.Left,
                this.ClientRectangle.Top,
                this.ClientRectangle.Width,
                this.ClientRectangle.Height); 
```

现在我可以在我的用户控制矩形中正确地看到视频帧......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:02:37.490

除了将视频渲染器的窗口作为子控件并提供窗口类型之外，您还应该设置`IVideoWindow.SetWindowPosition`. 当您的窗口布局发生变化时，您也有责任更新它。

# c# - 使用 .net 可执行文件执行 SQL 脚本

> ID：10428340
> 
> 赞同：5
> 
> 时间：2012-05-03T09:12:49.973
> 
> 标签：c#, .net, sql, automation, database-deployment

我有 ac# .net 应用程序，它已分别分发给多个客户端，有时我们会添加一些新功能或修复一些错误并经常在数据库中进行更改。我使用单击一次部署方法将 exe 更新到我的客户端电脑。SQL 服务器实例已安装在他们的系统上。

我想知道如何在每次更新 exe 时更新他们的 sql 数据库。

请记住，客户可能正在使用版本 2 并且从未更新到版本 3，但是当版本 4 发布时，他会更新应用程序。在这种情况下，我需要在他的数据库上执行两个脚本。一个用于版本 3，另一个用于当前版本 4。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:41:08.203

假设您有一个可以将一个版本更新为另一个版本的存储过程/脚本，并且假设您无法加载任何其他将运行它的 exe，那么为什么不在新版本开始时包含一个运行它的调用? 是否在软件加载时检查它们是否使用了正确版本的数据库，如果没有，请更新它。要处理从第 2 版升级到第 4 版等问题，只需确保数据库本身跟踪它当前的版本即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:54:51.907

我创建了两个组件来解决这个问题：

1.

一个分析特定 SQL 数据库的 WinForms 应用程序以及包含脚本文件的 SQL 解决方案文件夹。然后它将脚本文件与 SQL 对象进行数学运算，并让我构建一个“Manifest.xml”，其中包含各种脚本文件的执行顺序。

表的脚本文件包含有关升级表结构的每个版本的说明。

然后，构建器将相关脚本文件与清单一起复制到某个位置。如果我不担心过度拥挤我的应用程序文件夹，我通常会将它们与我的应用程序一起复制。否则，我会将它们压缩为受密码保护的 7-zip。

2.

一个命令行应用程序，用于解包（如果需要）并执行清单。实际工作是在一个单独的类库中完成的，该类库可以集成到我的应用程序中。

然后在我的应用程序中，每当我的 appversion > dbversion 我运行升级。

在只有一个客户的登台和生产设置并且通常不涉及应用程序的设置中，我将手动使用独立的 CLI 应用程序。这是一种推送更新的简单方法，特别是如果您修改了 20 个视图并且真的不想将它们全部复制/粘贴到 SQL Mgt Studio 中：p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:24:56.287

您可以尝试使用[sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)并使用数据库更新从您的应用程序中调用 exe。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:37:38.230

这种情况最好通过使用“数据库迁移”来解决。.net 生态系统中有多种工具可以帮助您。一些工具带有单独的运行器，而其他工具可以编译为 .net 程序集，您可以将其包含在您的项目中。

例子是：

*   [FluentMigrator](https://github.com/schambers/fluentmigrator)
*   [迁移者网](http://code.google.com/p/migratordotnet/)
*   [RikMigrations](http://code.google.com/p/rikmigrations/)
*   [亚音速迁移](https://github.com/subsonic/SubSonic-2.0/tree/master/SubSonic.Migrations)
*   [海牛](https://github.com/robconery/manatee)

# c++ - STL 映射容器在构建时是否优化（平衡树）？

> ID：10428342
> 
> 赞同：4
> 
> 时间：2012-05-03T09:13:01.367
> 
> 标签：c++, stl, map

如果我将**有序**（递增）的元素序列插入到地图中，最终的二叉树会以某种方式优化吗？或者每个元素都会有一个“正确”的孩子？这将使这样的树非常低效，因为**那时**查找将是线性的。

我找不到任何有关将过程插入 STL 映射的详细信息。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T09:20:20.343

C++11 标准 (23.1) 规定了关联容器`insert`和`find`关联容器的对数复杂度。从两个迭代器构造它们`i`并`j`表示`[i, j)`适当排序的值范围甚至需要具有线性时间复杂度。这是否意味着“最终的二叉树被优化”，或者地图是否完全是二叉树，都没有说明。

但在实践中`std::set`，`std::map`和他们的多朋友实际上总是红黑树，因为这是 STL 的原始 HP/SGI 参考实现所具有的，并且我所知道的所有现代 C++ 库都派生自该实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T09:14:36.040

一般来说，a`std::map`是使用红黑树实现的，它是自平衡的。所以是的，它已经过优化。

如果插入有序数据，自平衡可能会花费更少，因为节点之间的交换不会那么频繁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:36:57.980

C++ 标准要求 std::map 中任何元素的对数访问时间（ISO/IEC 14882 的 23.4.4.3），因此 std::map 必须实现为自平衡树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T09:17:47.430

并且通常会进行树平衡`set`，`map`因此 find 是 O(log n)。此处显示了许多操作的复杂性： [http ://www.cplusplus.com/reference/stl/](http://www.cplusplus.com/reference/stl/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:27:14.540

已优化！

查看[SGI 的标准模板库程序员指南](http://www.sgi.com/tech/stl/)。您会发现以下用于插入和查找元素的复杂性规范：

> *   插入范围的平均复杂度最多为 O(N * log(size() + N))，
> *   其中 N 是 j - i。find 的平均复杂度最多为对数。

# java - 在其当前监视器上获取组件位置

> ID：10428343
> 
> 赞同：3
> 
> 时间：2012-05-03T09:13:13.403
> 
> 标签：java, swing, popupmenu, multiple-monitors

我想`JPopupMenu`根据打开菜单的按钮的 y 位置设置 a 的位置。我的代码在我的第一台显示器上运行良好，但在我的第二台显示器上却失败了，它的高度不同。问题是`getLocationOnScreen()`提供相对于主屏幕的位置，而不是显示组件的实际屏幕。

我的代码：

```
// screenSize represents the size of the screen where the button is
// currently showing
final Rectangle screenSize = dateButton.getGraphicsConfiguration().getBounds();

final int yScreen = screenSize.height;
int preferredY;

// getLocationOnScreen does always give the relative position to the main screen
if (getLocationOnScreen().y + dateButton.getHeight() + datePopup.getPreferredSize().height > yScreen) {
  preferredY = -datePopup.getPreferredSize().height;
} else {
  preferredY = getPreferredSize().height;
}

datePopup.show(DateSpinner.this, 0, preferredY); 
```

如何在其实际监视器上获取组件的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T10:03:34.940

我使用第二个屏幕的边界得到了一个解决方案，这很简单：

```
public static Point getLocationOnCurrentScreen(final Component c) {
  final Point relativeLocation = c.getLocationOnScreen();

  final Rectangle currentScreenBounds = c.getGraphicsConfiguration().getBounds();

  relativeLocation.x -= currentScreenBounds.x;
  relativeLocation.y -= currentScreenBounds.y;

  return relativeLocation;
} 
```

感谢您的回答！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:47:28.247

通常，当您调用“getLocationOnScreen()”时，它会获取组件“this”的位置（从代码中我不太明白“this”是谁）。

也许您可以尝试使用“button.getLocationOnScreen()”来获取按钮的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:02:44.117

这是一个小片段，展示了如何相对于另一个元素定位元素。它在按钮下方显示一个弹出菜单，在其左侧显示一个 JDialog。我在一个多屏幕环境中测试了它，其中辅助屏幕位于主屏幕的右侧。

此外，使用 getSize()、getWidth() 和 getHeight() 代替 getPreferredSize()。getSize()、getWidth 和 getHeight 返回组件的实际尺寸，而 getPreferredSize() 只是 LayoutManager 指示组件希望拥有的尺寸。

如果您使用该方法，请`JPopupMenu.show()`确保使用相对于调用程序组件的坐标和大小。

```
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;

public class Test2 {

    public static void main(String[] args) {

        final JFrame frame = new JFrame();
        final JButton button = new JButton("Hello");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JPopupMenu popupMenu = new JPopupMenu();
                popupMenu.add(new JMenuItem("Some test"));
                System.err.println(button.getLocationOnScreen());
                popupMenu.show(button, 0, button.getHeight());
                JDialog dialog = new JDialog(frame);
                dialog.setSize(100, 30);
                Point locationOnScreen = button.getLocationOnScreen();
                locationOnScreen.x += button.getWidth();
                dialog.setLocation(locationOnScreen);
                dialog.setVisible(true);
            }
        });
        frame.addComponentListener(new ComponentListener() {

            @Override
            public void componentShown(ComponentEvent e) {

            }

            @Override
            public void componentResized(ComponentEvent e) {
                info(button);
            }

            private void info(final JButton button) {
                if (button.isShowing()) {
                    System.err.println(button.getLocationOnScreen());
                    System.err.println(button.getGraphicsConfiguration().getBounds());
                }
            }

            @Override
            public void componentMoved(ComponentEvent e) {
                info(button);
            }

            @Override
            public void componentHidden(ComponentEvent e) {

            }
        });
        button.setPreferredSize(new Dimension(200, 60));
        frame.add(button);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

# python - 使用 Python 和正则表达式文本操作复制行

> ID：10428344
> 
> 赞同：0
> 
> 时间：2012-05-03T09:13:17.430
> 
> 标签：python, regex

我有许多文件，我正在运行多个正则表达式匹配，并删除内容。它工作正常，但是每当有匹配时，我都会在底部得到重复的行，我每次都手动删除这些行。这是怎么回事？

```
for year in range (2004,2009):
    path="/foo/bar/"+str(year)+"/"
    dirs = os.listdir(path)
    for i in range(0,len(dirs)):
        original_file = os.path.join(path, dirs[i])
        f=open(original_file,"r+")
        text=f.read()
        text=re.sub('FY91/92','',text) 
        f.seek(0)
        f.write(text)
        f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:25:38.720

怎么改成：

```
text=open(original_file).read()
text=re.sub('FY91/92','',text) 
f = open(original_file, 'w')
f.write(text)
f.close() 
```

这将覆盖文件的现有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:37:13.677

之前的使用`truncate()`方法`close()`

# themes - Prestashop 根目录

> ID：10428347
> 
> 赞同：3
> 
> 时间：2012-05-03T09:13:34.703
> 
> 标签：themes, prestashop

我正在使用 prestashop，在主题中我添加了自己的目录，里面有一个样式表

然后我在 header.tpl 中链接了样式表，例如

```
<link rel="stylesheet" type="text/css" href="/directory/style.css" /> 
```

但是，如果我在子目录中安装 prestashop，例如

www.website.com/prestashop/ 然后样式没有显示，因为它认为网站的根是 www.website.com。是否有一个 pretsashop 字符串可以用来回显安装 prestashop 的目录？

例如类似的东西

$ps_dir 或 $ps_uri ???

所以我可以做这样的事情

```
<link rel="stylesheet" type="text/css" href="{$ps_dir}/directory/style.css" /> 
```

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T07:10:18.717

假设您使用的是 PS 1.4 及更高版本，那么您应该始终将其他样式表排入队列，尽管为此您需要向`FrontController`类添加一个简单的覆盖或创建一个特定于主题的模块。这样做的好处是 Prestashop 会将您的 CSS（或 javascript）包含在它的最小化和 CDN 代码中，这可以大大加快您的网站速度。

是否有任何理由需要有一个单独的 css 文件，并且无法命名主题 global.css 所需的 css？使用 global.css 文件意味着它将被自动包含并最小化。

如果您可能需要有条件地添加 css（您必须将其硬编码到主题中）或引用其他主题资源，那么您还可以使用以下变量：

```
{$css_dir} The /css directory in your theme
{$js_dir}  The /js directory in yout theme
{$img_dir} /img directory in your theme
{$tpl_dir} Your theme's top-level directory 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T12:34:34.870

这些可能是一些有用的变量

（看看 PS_root/classes/controller/FrontConrtoller.php - PrestaShop v 1.5.2 中的第 310 行）

```
 $this->context->smarty->assign(array(
        // Usefull for layout.tpl
        'mobile_device' => $this->context->getMobileDevice(),
        'link' => $link,
        'cart' => $cart,
        'currency' => $currency,
        'cookie' => $this->context->cookie,
        'page_name' => $page_name,
        'hide_left_column' => !$this->display_column_left,
        'hide_right_column' => !$this->display_column_right,
        'base_dir' => _PS_BASE_URL_.__PS_BASE_URI__,
        'base_dir_ssl' => $protocol_link.Tools::getShopDomainSsl().__PS_BASE_URI__,
        'content_dir' => $protocol_content.Tools::getHttpHost().__PS_BASE_URI__,
        'base_uri' => $protocol_content.Tools::getHttpHost().__PS_BASE_URI__.(!Configuration::get('PS_REWRITING_SETTINGS') ? 'index.php' : ''),
        'tpl_dir' => _PS_THEME_DIR_,
        'modules_dir' => _MODULE_DIR_,
        'mail_dir' => _MAIL_DIR_,
        'lang_iso' => $this->context->language->iso_code,
        'come_from' => Tools::getHttpHost(true, true).Tools::htmlentitiesUTF8(str_replace(array('\'', '\\'), '', urldecode($_SERVER['REQUEST_URI']))),
        'cart_qties' => (int)$cart->nbProducts(),
        'currencies' => Currency::getCurrencies(),
        'languages' => $languages,
        'meta_language' => implode('-', $meta_language),
        'priceDisplay' => Product::getTaxCalculationMethod(),
        'add_prod_display' => (int)Configuration::get('PS_ATTRIBUTE_CATEGORY_DISPLAY'),
        'shop_name' => Configuration::get('PS_SHOP_NAME'),
        'roundMode' => (int)Configuration::get('PS_PRICE_ROUND_MODE'),
        'use_taxes' => (int)Configuration::get('PS_TAX'),
        'display_tax_label' => (bool)$display_tax_label,
        'vat_management' => (int)Configuration::get('VATNUMBER_MANAGEMENT'),
        'opc' => (bool)Configuration::get('PS_ORDER_PROCESS_TYPE'),
        'PS_CATALOG_MODE' => (bool)Configuration::get('PS_CATALOG_MODE') || !(bool)Group::getCurrent()->show_prices,
        'b2b_enable' => (bool)Configuration::get('PS_B2B_ENABLE'),
        'request' => $link->getPaginationLink(false, false, false, true)
    )); 
```

我需要我的 PrestaShop 站点的根绝对变量来包含文件，因此我必须定义一个新变量：

在 PS_root/override/classes/controller/FrontConrtoller.php

```
class FrontController extends FrontControllerCore{
    $this->context->smarty->assign(array(
        'root_dir' => _PS_ROOT_DIR_
    ));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T13:11:35.030

您可以使用

```
<a href="{$base_dir}/directory/style.css"> 
```

# objective-c - Core Data 什么时候刷新到磁盘？

> ID：10428351
> 
> 赞同：4
> 
> 时间：2012-05-03T09:13:40.397
> 
> 标签：objective-c, core-data, ios5

我在我的应用程序中使用了 Core Data，并发现了模拟器的一些奇怪行为：当我在我的应用程序中向 Core Data 添加一些数据并立即使用 XCode 中的“停止”按钮（或只需按 Cmd-Q）退出模拟器时，下次启动模拟器时，数据不会存储在数据库中。经过一些测试，我发现数据存储到磁盘：

*   如果我按下主页按钮，立即。（几乎 -如果退出速度*非常*快，可以在存储数据之前退出应用程序。）
*   如果我在添加数据后让应用程序运行一段时间（至少大约 20 秒）。

调用 [NSManagedObjectContext save:] 没有帮助。行为是相同的。

所以我的问题是：这种行为的原因是什么？有没有办法在退出之前强制刷新到磁盘？在设备上运行时，我是否有可能以这种方式丢失数据（就我个人而言，我没有看到任何风险，除了强制关闭，但奇怪的行为让我有点困扰）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T09:22:22.010

在 Xcode 中使用停止按钮停止*模拟器*可能与用锤子砸 iPhone 相同（但保留 SSD）。基本上，您的应用程序和其他所有内容都会停止。没有合理的方法可以确保在发生这种情况时保存数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T13:21:20.210

您可能正在使用嵌套上下文。如果您的上下文具有父上下文，则调用`-save:`只会保存到该上下文，而不是文件系统。

嵌套上下文（通常）用于安全地使用后台队列上的上下文，并允许保存前台上下文而不必产生保存到文件系统的开销。保存到文件系统将发生在后台队列上，不会阻塞主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-24T11:21:53.357

我也为此苦苦挣扎了很长时间，丹尼尔·埃格特在上面（2）下的回答是我在互联网上找到的第一个也是唯一一个有用的答案。我认为 JRV 正在使用 UIManagedDocument 中的 NSManagedDocumentContext。如果是这种情况，那么 Apple 的“默认”保存方法是不完整的！采用 Daniel Eggert 的解决方案后，我的数据现在完美保存，并且不受模拟器“停止”手势的影响。我向其他希望在这种情况下编写弹性代码的人推荐 Daniel Eggert 在上面 (2) 下的答案。

# facebook - 无法使用 FB Open Graph 对对象发布操作

> ID：10428355
> 
> 赞同：0
> 
> 时间：2012-05-03T09:13:45.453
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我们正在尝试使文章阅读器在用户阅读文章时发生发布。

我们面临的问题是文章 URL 不公开，因为我们需要确保阅读文章的用户应该登录到 FB。

例如，我们的文章 URL 类似于 SERVER_NAME/article/view/ARTICLE_SLUG。

每当任何新用户尝试单击此对象的帖子时，他们都会被带到权限页面，一旦他们允许，他们就会看到该文章。但是这个页面没有被 facebook 抓取，因此没有发布。

我们尝试创建一个独立于登录的 URL，例如 SERVER_NAME/article/ARTICLE_SLUG，并且在 og:url 中我们设置为 SERVER_NAME/article/view/ARTICLE_SLUG 认为当发布发生时它将显示 SERVER_NAME/article/view/ARTICLE_SLUG 作为 URL但它没有发生。

有人可以建议最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:39:57.383

当 facebook**抓取**您的页面时，他们会使用一个非常具体的用户代理字符串：

> facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)

您可以在“Facebook 何时抓取我的页面？”下的“[赞”按钮](http://developers.facebook.com/docs/reference/plugins/like/)文档中了解它。部分。

当您收到请求时，请检查请求中的用户代理字符串，如果它与 facebook**抓取工具**匹配，则允许该请求并仅返回一个仅包含 meta 和 og 标签的简单 html。由于 facebook 也会缓存结果，因此每天发生的事情不应该超过一次，正如它所说：

> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:01:29.253

假设登录用户可以在 SERVER/article/view/SLUG（**查看 URL**）上查看您的文章。您的主页链接到 SERVER/article/SLUG（**摘要 URL**）上的文章摘要视图，并带有一个登录按钮，可将您带到查看 URL。

您的应用在视图 URL 上发布读取操作，Facebook linter 无法抓取该操作。在这种情况下，您应该设计您的应用程序，以便新流量转到摘要 URL，如果用户已经登录，则该摘要 URL 将重定向到视图 URL。摘要 URL 成为该文章对象的规范 URL，您应该针对该 URL 发布操作，因为它将是公开的。

为此，请将元标记添加`<og:url content="SERVER/article/SLUG" />`到视图 URL**和**摘要 URL 元数据。

# iis - 针对特定模式的 IIS 7.5 URL 重定向

> ID：10428357
> 
> 赞同：0
> 
> 时间：2012-05-03T09:13:48.803
> 
> 标签：iis, url-rewriting, iis-7.5

当用户输入 domain.com 时，它应该重定向到我的应用程序[https://www.domain.com](https://www.domain.com)。目前它没有发生，它显示一个页面“此连接不受信任”。

我在 web.config 中添加了以下重写标签：

```
 <rewrite>
           <rules>
            <rule name="Redirect to HTTPS" stopProcessing="true">
                <match url="(.*)" />
                <conditions>
                    <add input="{HTTPS}" pattern="^OFF$" />
                </conditions>
                <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="SeeOther" />
            </rule>
       </rules>
    </rewrite> 
```

目前在我的 IIS 7.5 中，我添加了入站规则，我的设置如下：

1.  在匹配网址中

    请求的 URL：匹配模式

    使用：正则表达式

    图案： （。*）

    忽略大小写：选中

2.  条件

    逻辑分组：匹配所有

    输入：{HTTPS}

    类型：匹配模式

    模式：^OFF$

    跨条件跟踪组：未选中

3.  行动

    操作类型：重定向

    重定向网址：https://{HTTP_HOST}/{R:1}

    追加查询字符串：选中

    重定向类型：参见其他 (303)

请让我知道是否可以对现有设置进行任何更改。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:18:40.253

您的重写规则只是重定向到同一个域。因此，如果用户只输入`domain.com`（默认为 http），它将重定向到`https://domain.com`. 如果您的 SSL 证书不包含`domain.com`但只有`www.domain.com`它会导致浏览器提示有关错误证书的警告。尽管现在大多数证书颁发机构都颁发带有和不带有 www 的域的证书（但也许你的不是）。

如果您希望用户始终使用`https://www.domain.com`（始终使用 www），您应该使用以下重写规则：

```
<rule name="Force HTTPS" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTPS}" negate="true" pattern="^ON$" />
        <add input="{HTTP_HOST}" negate="true" pattern="^www\.domain\.com$" />
    </conditions>
    <action type="Redirect" url="https://www.domain.com{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
</rule> 
```

它将强制 SSL 并将强制`www.domain.com`作为主机头。如果不是，它将向同一 URL 发出永久重定向（= 更好）。

# android - 字节到字符串 android

> ID：10428363
> 
> 赞同：4
> 
> 时间：2012-05-03T09:14:16.990
> 
> 标签：android, string, byte

所以我使用文件来保存我的程序的一些分数，但问题是我不能只打印它们。我尝试了几件事，但没有找到正确的，这是我的代码：

```
try{
        String FILENAME = "FrogScoreFile";
        FileInputStream fos = openFileInput(FILENAME);
        byte[] b = new byte[1];
        fos.read(b);
        fos.close();
        String score= String b;
        game5HighScore.setText(b);
        }catch (java.io.FileNotFoundException e) {
        } catch (IOException e) {
                e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T09:21:13.057

`Byte array`您可以通过创建`new string`对象转换为字符串。

```
byte[] b = new byte[1];
fos.read(b);
fos.close();
String message = new String(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:19:04.170

```
try{
        String FILENAME = "FrogScoreFile";
        FileInputStream fos = openFileInput(FILENAME);
        BufferedReader br = new BufferedReader(new InputStreamReader(fos));
        String yourText = br.readLine();
        br.close();
        game5HighScore.setText(yourText);
    }catch (java.io.FileNotFoundException e) {
    } catch (IOException e) {
            e.printStackTrace();
} 
```

顺便一提。为什么不使用 SharedPreferences 或 SQLite 数据库保存您的分数？

[共享偏好指南。](http://developer.android.com/guide/topics/data/data-storage.html#)

```
public static void saveScore(Context context) {
    final SharedPreferences.Editor editor = context.getSharedPreferences(
            "settings", Context.MODE_PRIVATE).edit();
    editor.putInt("score", 100);
    editor.commit();
}

public static int readScore(Context context) {
    final SharedPreferences sp = context.getSharedPreferences("settings",
            Context.MODE_PRIVATE);
    return sp.getInt("score", 0);
} 
```

# html - 在 iFrame 中显示 html/JSP 文档

> ID：10428367
> 
> 赞同：0
> 
> 时间：2012-05-03T09:14:25.213
> 
> 标签：html, css, jsp, iframe, navigation

我正忙于开发一个基本上有 5 个页面的网络应用程序，可以从导航栏跳转到（显然）。但是，我不想使用通常的链接，为什么你会完全被定向到不同的网页，我想把所有的东西都保存在我的“index.html”中。因此，当您单击其中一个导航栏链接时，iFrame 只会填充不同的文档，例如 about.html、controlpanel.html、profile.html 等...

这是一种好的做法还是有更好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:17:05.573

我看到的一个问题是您的用户将无法为您的页面添加书签/共享任何链接。

他们所能做的就是使用`/index.html`.

## 编辑：

根据您的评论，为了避免编码页眉/页脚的冗余，我建议这样做：

**初始化.jsp**

```
Declare all imports, taglibs, any global variables here. 
```

**头文件.jsp**

```
<%@ include file="init.jsp" %>
Write code for header here 
```

**页脚.jsp**

```
<%@ include file="init.jsp" %>
Write code for footer here 
```

**page1.jsp**

```
<%@ include file="init.jsp" %>
<%@ include file="header.jsp" %>
Write main code here.
<%@ include file="footer.jsp" %> 
```

**page2.jsp**

```
<%@ include file="init.jsp" %>
<%@ include file="header.jsp" %>
Write main code here.
<%@ include file="footer.jsp" %> 
```

# android - 在 VideoView 中显示视频？

> ID：10428373
> 
> 赞同：0
> 
> 时间：2012-05-03T09:14:57.883
> 
> 标签：android, media-player, android-videoview

我正在尝试在 .xml 文件中定义的 VideoView 中显示视频，但我在下面的代码中表示的方式不起作用。

请检查代码并指导我。

**代码**：

```
final String VIDEO_FILE_PATH = "C:\\Users\\Amr\\Downloads\\3aeshen ElLa7za.avi";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    VideoView vv = 
            (VideoView) findViewById(R.id.video_view);

    mp = new MediaPlayer();
    try {
        mp.setDataSource(VIDEO_FILE_PATH);
        mp.prepare();
        mp.start();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    vv.setVideoPath(MEDIA_FILE_PATH);
    vv.start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:37:18.743

是的，正如[userIsAMonkey](https://stackoverflow.com/users/1075466/userisamonkey)所说，您不能在 PC 中引用视频。它必须放在您的 SDCARD 或手机内存中。如果您使用的是模拟器，请按照以下步骤将文件推送到您的 SD 卡，

1) 去 DDMS。

2) 转到设备选项卡。

3) 单击将在设备中列出的模拟器。

4）现在转到文件资源管理器->单击“mnt”文件夹->单击SDCard。

5) 现在您将能够在文件资源管理器选项卡的右上角看到两个图标。一种是推文件，另一种是拉文件。单击推送文件图标，然后选择您的文件并完成。

6) 现在正如[userIsAMonkey](https://stackoverflow.com/users/1075466/userisamonkey)所建议的那样，

```
final String VIDEO_FILE_PATH = Environment.getExternalStorageDirectory() + "/3aeshen ElLa7za.avi" 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:21:00.970

您的视频文件路径应位于 SD 卡上：

```
final String VIDEO_FILE_PATH = Environment.getExternalStorageDirectory() + "/yourappdirectory/3aeshen ElLa7za.avi" 
```

# c# - 插入失败

> ID：10428378
> 
> 赞同：-2
> 
> 时间：2012-05-03T09:15:16.057
> 
> 标签：c#, sql, sql-server, ado.net, sql-server-2005-express

```
int dose = Convert.ToInt16(DoseTextBox.Text.ToString());
            try
            {
                SqlCommand AddMed = new SqlCommand("INSERT INTO Medications VALUES(@Medication,@Dose,@manufacture)", mcs);

                AddMed.Parameters.Add("@Medication", SqlDbType.NVarChar).Value = MedName.Text.ToString();
                AddMed.Parameters.Add("@Dose", SqlDbType.Int).Value = dose;
                AddMed.Parameters.Add("@manufacture", SqlDbType.NVarChar).Value = ManuDB.Text.ToString();

                mcs.Open();
                AddMed.ExecuteNonQuery();
                mcs.Close();

                MessageBox.Show("Med Added", "Done!");
            }
            catch (Exception)
            {
                MessageBox.Show("Oops!", "Something went wrong");
            } 
```

我做错什么了吗？`Ctrl`此函数的结果是“Med added”，但无论我执行多少次查询或使用+刷新结果，Medication 表似乎都没有任何新行`R`

我错过了什么吗？我尝试`ToString`从返回的值中删除该方法，但这不是问题。我相信。ManuDB 是制造商投递箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:28:52.940

**首先**：您不应该关闭`try`块中的连接，而是关闭`finally`. 这样可以确保在发生错误时连接也会关闭。

**第二**：您的参数可能有错误。尝试改用[`AddWithValue`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)这些类型。您的`Medication`表是否有带`identity`增量的主键，或者您是否必须手动分配 ID？显示字段的数据类型。

**编辑**：无论如何，奇怪的是你没有收到错误。你有没有调试看看`ExecuteNonQuery`返回什么（应该是1）？一个“愚蠢”的问题：您使用的是正确的数据库吗？也许 SQL-Server Express 在 bin/debug 文件夹中创建了一个副本。单击您的 MDF 文件并检查属性并确保将[复制到输出目录](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)设置为`Do Not Copy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:25:51.183

如果您有更多列，则 3\. 另一列。那么我认为插入部分应该是：

```
INSERT INTO Medications(Medication,Dose,manufacture) 
VALUES(@Medication,@Dose,@manufacture) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:26:13.087

尝试替换`SqlCommand AddMed = new SqlCommand("INSERT INTO Medications VALUES(@Medication,@Dose,@manufacture)", mcs);`白色询问点（？）中的@variable，如下所示：

```
SqlCommand AddMed = new SqlCommand("INSERT INTO Medications VALUES(?,?,?)", mcs);

AddMed.Parameters.Add("@Medication", SqlDbType.NVarChar).Value = MedName.Text.ToString();
AddMed.Parameters.Add("@Dose", SqlDbType.Int).Value = dose;
AddMed.Parameters.Add("@manufacture", SqlDbType.NVarChar).Value = ManuDB.Text.ToString(); 
```

# sql-server-2008 - 使用sql server编写触发器？

> ID：10428379
> 
> 赞同：0
> 
> 时间：2012-05-03T09:15:22.363
> 
> 标签：sql-server-2008

在 Sql server 中，我为更新编写了一个触发器，实际上我看到了一个示例触发器，并使用它编写了我赢得的触发器。我对那个触发器有疑问。我的触发器是这样的：

```
 Create TRIGGER StudentScoresAfterUpdate
  ON StudentScores
 AFTER UPDATE
 AS
  IF ( UPDATE (Name) OR UPDATE (Score) )
   BEGIN
    INSERT INTO StudentScoresHist (Name, Score, HistoryDate)
     select Name, Score, getdate()
      from deleted ;
    END; 
```

在上面的触发器中，为什么作者写 if 条件`IF ( UPDATE (Name) OR UPDATE (Score) )`我可以在没有 if 条件的情况下写吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:46:56.710

这是一个[触发函数](http://msdn.microsoft.com/en-us/library/ms187326%28v=sql.105%29.aspx)，诚然，这在文档中并不明显（它似乎没有与[CREATE TRIGGER](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.105%29.aspx)链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:03:11.430

> 为什么作者写if条件`IF ( UPDATE (Name) OR UPDATE (Score) )`我可以写没有if条件吗？

当表中发生任何更新时，将触发更新触发器。在具有大量列的表的情况下，如果*特定*列需要更新，您可能只对运行的部分触发器感兴趣。这就是`UPDATE`函数让您确定的内容。

没有条件可以写吗？是的当然。

# iphone - Cocos2D CCTransitionPageTurn 从左到右

> ID：10428381
> 
> 赞同：2
> 
> 时间：2012-05-03T09:15:27.977
> 
> 标签：iphone, ios, cocos2d-iphone

如何`CCTransitionPageTurn`以镜像的方式使页面卷曲到当前的实现方式（就好像你想要翻动阿拉伯书的页面一样）。在这里`CCActionPageTurn3D`，我将在哪里反转角度或使用`(1024 - x)`？:-)

```
-(void)update:(ccTime)time
{
    float tt = MAX( 0, time - 0.25f );
    float deltaAy = ( tt * tt * 500);
    float ay = -100 - deltaAy;

    float deltaTheta = - (float) M_PI_2 * sqrtf( time) ;
    float theta = /*0.01f*/ + (float) M_PI_2 +deltaTheta;

    float sinTheta = sinf(theta);
    float cosTheta = cosf(theta);

    for( int i = 0; i <=gridSize_.x; i++ )
    {
        for( int j = 0; j <= gridSize_.y; j++ )
        {
            // Get original vertex
            ccVertex3F  p = [self originalVertex:ccg(i,j)];

            float R = sqrtf(p.x*p.x + (p.y - ay) * (p.y - ay));
            float r = R * sinTheta;
            float alpha = asinf( p.x / R );
            float beta = alpha / sinTheta;
            float cosBeta = cosf( beta );

            // If beta > PI then we've wrapped around the cone
            // Reduce the radius to stop these points interfering with others
            if( beta <= M_PI)
                p.x = ( r * sinf(beta));
            else
            {
                // Force X = 0 to stop wrapped
                // points
                p.x = 0;
            }

            p.y = ( R + ay - ( r*(1 - cosBeta)*sinTheta));

            // We scale z here to avoid the animation being
            // too much bigger than the screen due to perspectve transform
            p.z = (r * ( 1 - cosBeta ) * cosTheta) / 7; // "100" didn't work for

            // Stop z coord from dropping beneath underlying page in a transition
            // issue #751               
            if( p.z<0.5f )
                p.z = 0.5f;

            // Set new coords
            [self setVertex:ccg(i,j) vertex:p];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:48:19.827

使用 CCTransitionPageTurn 并将*向后*属性设置为 YES。

例子

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    CGSize screenSize = [[CCDirector sharedDirector] winSize];

    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    if (location.x < (screenSize.width * .25) && location.y < (screenSize.height * .25)) {

    CCTransitionPageTurn *transition = [CCTransitionPageTurn transitionWithDuration:1.75 scene:[Page1 scene] backwards:YES];
    [[CCDirector sharedDirector] replaceScene:transition];
    }

    if (location.x > (screenSize.width * .75) && location.y < (screenSize.height * .25)) {

    CCTransitionPageTurn *transition = [CCTransitionPageTurn transitionWithDuration:1.75 scene:[Page3 scene] backwards:NO];
    [[CCDirector sharedDirector] replaceScene:transition];
    }
    } 
```

取自[这里](http://www.raywenderlich.com/forums/viewtopic.php?t=2454&p=15611)

# windows - Installshield 2008 试图更改 INSTALLDIR

> ID：10428391
> 
> 赞同：0
> 
> 时间：2012-05-03T09:15:43.203
> 
> 标签：windows, installation, installshield

我要重构一个使用 installshield 2008 来创建安装程序的遗留应用程序。我没有选择将项目转换为较新版本的选项，而且我是 installshield 的新手。我正在尝试将 INSTALLDIR 更改为`C:\ProgramFiles\MyProduct`而不是`C:\ProgramFiles(x86)\MyProduct`.

这是我尝试过的：从常规信息-> 产品属性我将 INSTALLDIR 值从更改为`[ProgramFilesFolder]\MyProduct`，`[ProgramFiles64Folder]\MyProduct`但是当我构建安装程序并运行它时，没有任何变化 - 仍然使用 C:\Program Files(x86)。

然后我做了另一个实验 - 例如，我尝试为 INSTALLDIR 设置硬编码路径`INSTALLDIR=C:\temp\MyProduct`现在，当我构建并运行安装程序时，它会因错误而崩溃：`The installation package could not be opened. Contact the application vendor to verify that this is a valid Windows Installer Package`. 我不明白为什么会这样。关于我做错了什么的任何想法？也许 INSTALLDIR 应该从其他地方设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:08:04.223

如果您正在安装 64 位可执行文件（我从您的 INSTALLDIR 设置中推断），您必须使您的安装成为 64 位安装。在 General Information -> Summary Information Stream 中，将 Template Summary 值之一设置为“x64”，替换“Intel”。您可以允许用户在“目标文件夹”对话框中更改默认的 INSTALLDIR。您可以创建一个类型 35（设置目录）自定义操作，该操作必须遵循两个序列中的 CostFinalize 操作，以从属性或字符串设置 INSTALLDIR。祝你好运，罗伯

# python - 一个类实例可以知道它是否是一个参数吗？

> ID：10428399
> 
> 赞同：2
> 
> 时间：2012-05-03T09:16:06.887
> 
> 标签：python, class, properties, arguments

一个类的实例能否知道它是否被用作参数，它是位置参数还是关键字参数，如果是位置，它在哪个位置，如果是关键字，它被分配给哪个关键字，并且遵循所有这些，可以吗？基于该知识解析为/返回/替换自身，例如其实例属性之一，因此调用将其作为参数而不是类实例本身？

我意识到我的课堂问题越来越疯狂。谢谢你逗我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:36:18.370

不——这一切都不可能。

尝试考虑如何接近 - 您可以定义一个装饰器，将参数循环到函数并告诉参数此信息。

```
def toldargs(f):
    def wrapper(*args, **kargs):
        for i, arg in enumerate(args):
            arg.you_are_arg_number(i)
        for k in kargs:
            kargs[k].you_are_karg_named(k)
        return f(*args, **kargs)
    return wrapper

@toldargs
def myfunction(a, b):
    ... 
```

（未编译/未经测试）。

如果您在经常调用的函数上使用它，这将显着影响性能。并且您可能需要在调用方法之前进行某种尝试/捕获或实例测试，以避免出现不期望此类调用的参数错误。

**更新**-再想一想，您（可能）并不真正关心何时将某些内容传递给函数，而是在调用实例上的某些操作时的上下文是什么（如果将 arg 传递给函数但从未使用过，那么没关系，反正我能想到）。

换句话说：

```
def some_function(a, b):
    # here you can't trigger anything
    ...
    a.foo() # but here you can 
```

当`.foo()`被调用时，您可以检查您的上下文。有多种方法-最明显/最粗暴的方法是抛出异常，捕获它并检查调用堆栈。但您也可以使用[这里](http://docs.python.org/library/inspect.html#the-interpreter-stack)的所有工具。因此，例如，您可以检查当前堆栈以查看您是否从特定类内部被调用。

再一次，这可能会很慢而且很复杂......

**更新 2** - 请参阅[Python：在类实例初始化之前修改传递的参数](https://stackoverflow.com/questions/10522431/python-modifying-passed-arguments-before-class-instance-initialization)以了解基于元类的方法。

# android - 如何使用画布在按钮上绘制矩形

> ID：10428401
> 
> 赞同：0
> 
> 时间：2012-05-03T09:16:13.937
> 
> 标签：android, draw, ontouchlistener

我在 RelativeLayout 中有 3 个 LinerLayout，每个 LinerLayout 包含 9 个按钮。现在，每当我触摸按钮时，我想在按钮顶部绘制矩形框，并且该矩形框应该滑动（移动）到每个按钮，手指如何移动。任何想法如何做到这一点..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:21:44.947

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.drawRect(mRect, new Paint());
}

private Rect mRect = new Rect();

private static final int WIDTH = 100;
private static final int HEIGHT = 100;

private void setRectPosition(int x, int y) {
    mRect.set(x, y, WIDTH, HEIGHT);
    invalidate();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    setRectPosition((int)x, (int)y);
    return super.onTouchEvent(event);
} 
```

我认为这可以工作。

# python - os walk 改变了目录结构

> ID：10428402
> 
> 赞同：1
> 
> 时间：2012-05-03T09:16:15.227
> 
> 标签：python

我目前想改进我曾经写过的一个 python 脚本。

其中的结构大致是这样的：

```
def x(args):
    for root, dirs, files in os.walk(args):
        do_something_that_changes_the_directory_structure()

    for root, dirs, files in os.walk(args):
        do_someting_with_that_changed_directory() 
```

问题是我更改了目录结构并且必须重新读取该结构才能对其进行处理。是否可以只用一个 for 循环来做到这一点？我在考虑while循环，但在考虑之后我认为这行不通！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:21:01.033

您应该更新`dirs`并`files`根据您对文件夹所做的更改。例如：

```
for root, dirs, files in os.walk(args):
    with file('{}/test.file'.format(root)) as f:
        f.write('test')

    files.append('test') 
```

# c# - 在编译时已知不同类型的循环中调用泛型方法

> ID：10428408
> 
> 赞同：5
> 
> 时间：2012-05-03T09:16:31.487
> 
> 标签：c#, generics

让我们考虑一个接口中的方法：

```
public Interface IA {
    T[] Get<T>() where T : IB;
} 
```

在另一个地方，我想为*在编译时已知*的 n 种类型调用此方法 n 次。下面的代码说明了我的**意图**。

```
foreach(Type t in new Type[] { typeof(X), typeof(Y), typeof(Z) }) 
{
    InterfaceXYZImplement[] arr = c.Resolve<IA>().Get<t>();
    //...more here
} 
```

现在，`foreach`循环显然使类型成为运行时值，所以我必须使用`MakeGenericMethod`.

有没有办法以这样的方式编写代码，我可以为`X`,`Y`和执行代码`Z`，但只调用一次编写的方法？

将代码包装在方法中只会将问题向上移动（这是部分解决方案，但不是最终解决方案，呵呵）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:59:31.197

您可以使用一些辅助方法来实现这一点，该方法做了很多假设并使用`dynamic`.NET4 中的 new 关键字。

基本上，当使用该类型的参数是`dynamic`. 为此，您将需要两个辅助方法：

```
IB[] Get(IA a, Type t)
{
    dynamic dummy = Activator.CreateInstance(t);
    return Get(a, dummy);
}

T[] Get<T>(IA a, T dummy) where T : IB
{
    return a.Get<T>();
} 
```

您的代码将调用这些辅助方法中的第一个：

```
foreach(var t in new Type[] { typeof(X), typeof(Y), typeof(Z) })
{
    IB[] arr = Get(c.Resolve<IA>(), t);
    // do more stuff here
} 
```

如您所见，这种方法有几个缺点：

1.  对于循环中的每种类型，都会通过`Activator.CreateInstance(t)`. 这一行假设存在一个可以使用的公共无参数构造函数，并且这个构造函数没有做任何繁重的事情。
2.  如果循环中的任何类型未实现`IB`此代码将在运行时抛出异常。不会有编译错误。
3.  结果始终是`IB`实例数组，而不是特定类型的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:10:42.003

定义一个扩展方法：

```
public static class Extensions
{
    public static void Get<T>(this IA a, Action<T[]> action, params Type[] types) where T : IB
    {
        foreach (var type in types)
        {
            var method = a.GetType().GetMethod("Get").MakeGenericMethod(type);
            var ts = (T[])method.Invoke(a, null);
            action(ts);
        }
    }
} 
```

利用：

```
a.Get(arr => { 
   // work on result
}, typeof(X), typeof(Y), typeof(Z)); 
```

# javascript - YUI.getElementsBy 相当于 jQuery

> ID：10428409
> 
> 赞同：0
> 
> 时间：2012-05-03T09:16:33.767
> 
> 标签：javascript, jquery, yui

是否有任何等效于 YUI.getElementsBy 的 JQuery 方法/实现？

YUI.getElementsBy (method, tag, root, apply, o, overrides)

谢谢，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:23:39.420

该方法的描述如下：

> `Array getElementsBy ( method , tag , root , apply , o , overrides )`
> 
> 返回通过提供的布尔方法应用的测试的 HTMLElement 数组

您可以使用该方法在 jQuery 中复制该功能[`filter`](http://api.jquery.com/filter/)，如果您想返回 HTMLElement 对象数组，您可以使用[`get`](http://api.jquery.com/get/)（否则您将拥有一个 jQuery 对象）：

```
$(selector).filter(method).get(); 
```

在 jQuery 版本中，`tag`和`root`参数将被合并到选择器中。

# jsf - (Primefaces + JSF) 无法更新绑定组件

> ID：10428411
> 
> 赞同：1
> 
> 时间：2012-05-03T09:16:49.257
> 
> 标签：jsf, jsf-2, primefaces, bind

请向我解释原因：我使用过：

```
<p:megaMenu id="mngTop" model="#{topprocess.mnModel}"> 
</p:megaMenu> 
```

然后 megaMenu 可以由其他组件更新（来自按钮，其他 ajax），但我使用：

```
<p:megaMenu id="mngTop"> 
<p:submenu label="Trợ giúp" binding="#{myBean.snMenu}"> 
</p:submenu> 
</p:megaMenu> 
```

其他组件无法更新（对不起我的英语）:)

# php - 弹出动态通知

> ID：10428414
> 
> 赞同：2
> 
> 时间：2012-05-03T09:17:06.197
> 
> 标签：php, python, facebook

动态通知更新是如何在 facebook 中显示的。也在 stackoverflow 中，为什么通知不会在通知出现时立即弹出。直到我刷新页面才会显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:10:26.150

Facebook 每隔几秒调用一次 AJAX 端点以保持客户端 UI 的新鲜度。此端点的有效负载包含代码、新闻源、通知、消息和各种其他状态的更新。您可以通过在 Google Chrome 中打开 Facebook 并查看 Chrome 开发人员工具中的网络选项卡来查看此内容。

# php - 我无法使用 post 成功地将参数从表单传递到 php 代码

> ID：10428417
> 
> 赞同：0
> 
> 时间：2012-05-03T09:17:09.913
> 
> 标签：php, html, forms

我有表单的 php 文件，用户需要输入三个参数宽度和高度以及形状三角形或矩形。在我的第一行 php 代码中，我尝试读取宽度和高度参数，在行末代码 php 中，我尝试读取形状 Trigle 或矩形参数，并根据此参数计算面积。感谢任何治疗。

```
 <h2>OOP Class Demo</h2>
<p>
Please enter two numbers to calculated the area of rectangle or tringle and press submit...
<p>
<form method="post" action="demo.php">
<br>width.1 <input type=text name=num_a>
<br>height.2 <input type=text name=num_b>
<br><input type="radio" name="shape" value="Rectangle" /> Rectangle
<br><input type="radio" name="shape" value="Tringle" /> Tringle
<br><input type=submit>
</form>

<?php

  echo("<br>");
  if(isset($_POST['submit']))
   {echo "THERE is submit.!"; 
    Class Rectangle {

    //Declare the attributes:
    public $width = $_POST['width'];
    public $height = $_POST['height'];
    protected static $formula = 0;

//Method to set the dimensions.
    Function create_formula() {
        self :: $formula = $this->width * $this->height;
    }

    //Method to set the dimensions.
    Function set_size($w = 0, $h = 0) {
            $this->width = $w;
            $this->height = $h;
            $this->create_formula();
    }

    //Method to calculate and return the area.
    function get_area() {
            return (self::$formula);
            }
    }

    Class Triangle extends Rectangle{
        Function create_formula() {
            self :: $formula = ($this->width * $this->height)/2;
        }
    }

    if (!$_POST['shape']){echo('your choice is: '.$_POST['shape']);}
    // create object of rectangle and calculate it is area
    $rect = new Rectangle ();
    echo ($rect->get_area()."<br />");

    // create object of tringle and calculate it is area by extends
    $tri = new Triangle ();
    echo $tri->get_area();
    }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:20:03.353

您的 html 控件名称与 php 变量名称不同。

```
<br>width.1 <input type=text name=num_a>
<br>height.2 <input type=text name=num_b> 
```

和你的 php

```
public $width = $_POST['width'];
public $height = $_POST['height']; 
```

它应该是

```
<br>width.1 <input type=text name='width'>
<br>height.2 <input type=text name='height'> 
```

# multithreading - 如何优化 wxpython GUI（最好不使用线程）？下面的代码提示？

> ID：10428420
> 
> 赞同：0
> 
> 时间：2012-05-03T09:17:19.893
> 
> 标签：multithreading, user-interface, wxpython

我的带有以下代码的 GUI 没有线程。图像显示占用大量内存并且 GUI 被阻塞，我一次只能调用一个函数。请建议简单的 hack 以使 GUI 更快。无论如何图像处理任务就像聚类需要 5-6 分钟。

```
import wx
import sys
import os
import matplotlib
import OpenGL
import PIL
import time
from spectral.graphics.hypercube import hypercube
from spectral import *
init_graphics()

class RedirectText(object):
 def __init__(self,awxTextCtrl):
    self.out=awxTextCtrl

def write(self,string):
    self.out.WriteText(string)            

 class Frame(wx.Frame):
def __init__(self, title,*args,**kwargs):
    wx.Frame.__init__(self, None, title=title, size=       (1000,85),style=wx.MINIMIZE_BOX|wx.CLOSE_BOX|wx.RESIZE_BORDER|wx.SYSTEM_MENU|wx.CAPTION|wx.CLIP_CHILDREN)
    self.Bind(wx.EVT_CLOSE, self.OnClose)
    panel=wx.Panel(self,-1)
    self.button=wx.Button(panel,label="Open",pos=(0,0),size=(50,30))
    self.button1=wx.Button(panel,label="Save",pos=(51,0),size=(50,30))
    self.button2=wx.Button(panel,label="ROI",pos=(102,0),size=(50,30))
    self.button3=wx.Button(panel,label="Tone",pos=(153,0),size=(50,30))
    self.slider=wx.Slider(panel,pos=(204,0))
    self.button4=wx.Button(panel,label="Header",pos=(305,0),size=(50,30))
    self.button5=wx.Button(panel,label="Cluster",pos=(356,0),size=(50,30))
    self.button6=wx.Button(panel,label="Cube",pos=(407,0),size=(50,30))
    self.button7=wx.Button(panel,label="Gaussian",pos=(458,0),size=(50,30))
    self.Bind(wx.EVT_BUTTON, self.OnCubeClick,self.button5)
    self.Bind(wx.EVT_BUTTON, self.OnHeadClick,self.button4)
    self.Bind(wx.EVT_BUTTON, self.OnSaveClick,self.button1)
    self.Bind(wx.EVT_BUTTON, self.OnButtonClick,self.button)
    self.Bind(wx.EVT_BUTTON, self.OnCClick,self.button6)
    self.Bind(wx.EVT_BUTTON, self.OnGClick,self.button7)
    #self.std=wx.TextCtrl(panel,pos=(0,31), size=(500,-1))
    self.loc=wx.TextCtrl(panel,pos=(700,0), size=(300,-1))
    self.status = wx.TextCtrl(panel,-1,'Choose file',pos=(800,22),size=(200,-1))
    #redir=RedirectText(self.std)
    #sys.stdout=redir

def OnButtonClick(self,event):
    wild="HSi Files|*.lan*|All Files|*.*"
    dlg=wx.FileDialog(self,message="Choose a File",wildcard=wild,style=wx.FD_OPEN)
    if dlg.ShowModal() == wx.ID_OK:
        time.sleep(0.5)
        self.loc.SetValue(dlg.GetPath())
        dlg.Destroy()
        self.Onview()

def Onview(self):
    filepath=self.loc.GetValue()
    img=image(filepath)
    time.sleep(1)
    view(img)
    time.sleep(1)
    self.status.SetValue('View Ready')

def OnHeadClick(self,event):

    filepath=self.loc.GetValue()
    img=image(filepath)
    self.status.SetValue(img.shape)

def OnCubeClick(self,event):
    time.sleep(0.2)
    self.status.SetValue('Clustering')
    filepath=self.loc.GetValue()
    img= image(filepath).load()
    (m, c) = cluster(img, 20)
    view_indexed(m)
    self.status.SetValue('Clustering View Ready')

def OnCClick(self,event):
    self.status.SetValue('Cube view')
    time.sleep(5)
    filepath=self.loc.GetValue()
    img= image(filepath).load()
    hypercube(img, bands=[29, 19, 9])

def OnGClick(self,event):
    self.status.SetValue('Gaussian procesing')
    time.sleep(30)
    filepath=self.loc.GetValue()
    gt=image(filepath).read_band(0)
    img=image(filepath)
    classes = create_training_classes(img,gt)
    gmlc = GaussianClassifier(classes)
    clMap = gmlc.classify_image(img)
    view_indexed(clMap)
    self.status.SetLabel('Gaussian Ready')

def OnSaveClick(self,event):
    self.status.SetValue('Save File')
    wild="HSi Files|*.lan*|All Files|*.*"
    dlg=wx.FileDialog(self,message="Save AS",wildcard=wild,style=wx.FD_SAVE|wx.FD_OVERWRITE_PROMPT)
    if dlg.ShowModal() == wx.ID_OK:
        path=dlg.GetPath()
        self.Save(path)
        self.file=path
        dlg.Destroy()

def OnClose(self, event):
    dlg = wx.MessageDialog(self, 
        "Do you really want to close BBvw ?",
        "Confirm Exit", wx.OK|wx.CANCEL|wx.ICON_QUESTION)
    result = dlg.ShowModal()
    dlg.Destroy()
    if result == wx.ID_OK:
        self.Destroy()

  app = wx.App(redirect=False)
  top = Frame("BBvw")
  top.Show()
  app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:36:53.060

长时间运行的进程应始终进入单独的线程。否则它们会阻塞 GUI 的主循环。如果显示图像会占用大量内存，那么我猜您正在以全分辨率显示高分辨率照片。尝试创建一组较低分辨率的照片来代替显示（如缩略图或其他内容）。除非您需要显示完整的分辨率，否则不要这样做。

# python - 匹配列表中的一个元素，然后返回它之前的“n”个元素和它之后的“m”个元素

> ID：10428421
> 
> 赞同：3
> 
> 时间：2012-05-03T09:17:26.293
> 
> 标签：python, iterator, itertools

我的代码中的一个常见模式是：“搜索一个列表，直到找到一个特定元素，然后查看它之前和之后的元素。”

例如，我可能想查看一个日志文件，其中重要事件标有星号，然后提取重要事件的上下文。

在下面的例子中，我想知道*超*光速引擎爆炸的原因：

```
 Spinning up the hyperdrive
  Hyperdrive speed 100 rpm
  Hyperdrive speed 200 rpm
  Hyperdrive lubricant levels low (100 gal.)
* CRITICAL EXISTENCE FAILURE
  Hyperdrive exploded 
```

我想要一个函数 ，`get_item_with_context()`它允许我找到带星号的第一行，然后给我`n`它前面的行和它`m`后面的行。

我的尝试如下：

```
import collections, itertools
def get_item_with_context(predicate, iterable, items_before = 0, items_after = 0):
    # Searches through the list of `items` until an item matching `predicate` is found.
    # Then return that item.
    # If no item matching predicate is found, return None.
    # Optionally, also return up to `items_before` items preceding the target, and
    # `items after` items after the target.
    #
    # Note:
    d = collections.deque (maxlen = items_before + 1 + items_after)
    iter1 = iterable.__iter__()
    iter2 = itertools.takewhile(lambda x: not(predicate(x)), iter1)    
    d.extend(iter2)

    # zero-length input, or no matching item
    if len(d) == 0 or not(predicate(d[-1])):
        return None

    # get context after match:
    try:
        for i in xrange(items_after):
            d.append(iter1.next())
    except StopIteration:
        pass

    if ( items_before == 0 and items_after == 0):
        return d[0]
    else:
        return list(d) 
```

用法应该是这样的：

```
>>> get_item_with_context(lambda x: x == 3, [1,2,3,4,5,6],
                          items_before = 1, items_after = 1)
[2, 3, 4] 
```

这方面的问题：

*   检查以确保我们确实找到了匹配项，使用`not(predicate(d[-1]))`, 由于某种原因不起作用。它总是返回假。
*   如果找到匹配项后列表中的项少于`items_after`项，则结果是垃圾。
*   其他边缘情况？

我能否就如何使这项工作/使其更强大提供一些建议？或者，如果我正在重新发明轮子，也请随时告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:53:39.990

您可以使用[collections.deque](http://docs.python.org/library/collections.html#collections.deque)对象获取上下文的环形缓冲区。要获得 +/- 2 行上下文，请像这样初始化它：

```
context = collections.deque(maxlen=5) 
```

然后遍历你喜欢的任何东西，为每一行调用这个：

```
context.append(line) 
```

匹配`context[2]`，并为每个匹配输出整个双端队列内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:11:23.337

这似乎可以正确处理边缘情况：

```
from collections import deque

def item_with_context(predicate, seq, before=0, after=0):
    q = deque(maxlen=before)
    it = iter(seq)

    for s in it:
        if predicate(s):
            return list(q) + [s] + [x for _,x in zip(range(after), it)]
        q.append(s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:39:17.853

这可能是一个完全“unpythonic”的解决方案：

```
import itertools

def get_item_with_context(predicate, iterable, items_before = 0, items_after = 0):
    found_index = -1
    found_element = None

    before = [None] * items_before # Circular buffer

    after = []
    after_index = 0

    for element, index in zip(iterable, itertools.count()):
        if found_index >= 0:
            after += [element]
            if len(after) >= items_after:
                break
        elif predicate(element):
            found_index = index
            found_element = element
            if not items_after:
                break
        else:
            if items_before > 0:
                before[after_index] = element
                after_index = (after_index + 1) % items_before

    if found_index >= 0:
        if after_index:
            # rotate the circular before-buffer into place
            before = before[after_index:] + before[0:after_index]
        if found_index - items_before < 0:
            # slice off elements that "fell off" the start
            before = before[items_before - found_index:]
        return before, found_element, after

    return None

for index in range(0, 8):
    x = get_item_with_context(lambda x: x == index, [1,2,3,4,5,6], items_before = 1, items_after = 2)
    print(index, x) 
```

输出：

```
0 None
1 ([], 1, [2, 3])
2 ([1], 2, [3, 4])
3 ([2], 3, [4, 5])
4 ([3], 4, [5, 6])
5 ([4], 5, [6])
6 ([5], 6, [])
7 None 
```

我冒昧地更改了输出，以使与谓词匹配的内容以及之前和之后的内容更加清晰：

```
([2], 3, [4, 5])
  ^   ^    ^
  |   |    +-- after the element
  |   +------- the element that matched the predicate
  +----------- before the element 
```

该函数处理：

*   未找到项目，返回`None`（如果您想返回其他内容，则返回函数的最后一行）
*   之前的元素没有完全实现（即找到的元素离开始太近而无法真正获得`N`它之前的元素）
*   未完全实现的后元素（太接近结尾也是如此）
*   items_before 或 items_after 设置为 0（没有该方向的上下文）

它用：

*   用于前元素的简单循环缓冲区，将其旋转到位以按正确顺序获取元素
*   前元素的简单列表
*   任何可迭代的，不需要可索引的集合，不会多次枚举任何元素，并且会在找到所需的上下文后停止

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T10:08:58.507

```
from itertools import takewhile, tee, chain
from collections import deque

def contextGet(iterable, predicate, before, after):
    iter1, iter2 = tee(iterable)

    beforeLog = deque(maxlen = before)
    for item in takewhile(lambda x: not(predicate(x)), iter1):
        beforeLog.append(item)
        iter2.next()

    afterLog = []
    for i in xrange(after + 1):
        try:
            afterLog.append(iter2.next())
        except StopIteration:
            break

    return chain(beforeLog, afterLog) 
```

或者：

```
def contextGet(iterable, predicate, before, after):
    it1, it2 = tee(it)
    log = deque(maxlen = (before + after + 1))
    for i in chain(dropwhile(lambda x: not predicate(x), it1), xrange(after + 1)):
        try:
            log.append(it2.next())
        except StopIteration:
            break
    return log 
```

`after`如果列表的其余部分比参数短，则第二个可能会返回太多“之前”元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T10:07:39.057

我不确定我是否遗漏了问题中的某些内容，但这可以简单地完成为

```
>>> def get_item_with_context(predicate, iterable, items_before = 0, items_after = 0):
    queue = collections.deque(maxlen=items_before+1)
    found = False
    for e in iterable:
        queue.append(e)
        if not found and predicate(e):
            queue = collections.deque(queue,items_before+1+items_after)
            found = True
        if found:
            if not items_after : break
            items_after-=1
    if not found:
        queue.clear()
    return list(queue)

>>> get_item_with_context(lambda x: x == 0, [1,2,3,4,5,6],items_before = 2, items_after = 1)
[]
>>> get_item_with_context(lambda x: x == 4, [1,2,3,4,5,6],items_before = 2, items_after = 1)
[2, 3, 4, 5]
>>> get_item_with_context(lambda x: x == 1, [1,2,3,4,5,6],items_before = 2, items_after = 1)
[1, 2]
>>> get_item_with_context(lambda x: x == 6, [1,2,3,4,5,6],items_before = 2, items_after = 1)
[4, 5, 6]
>>> get_item_with_context(lambda x: x == 4, [1,2,3,4,5,6],items_before = 20, items_after = 10)
[1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T12:28:41.330

```
import collections

def context_match(predicate, iterable, before = 0, after = 0):
    pre = collections.deque(maxlen = before + 1)
    post = []
    match = 0
    for el in iterable:
        if not match:
            pre.append(el)
            if predicate(el):
                match = 1
        elif match:
            if len(post) == after:
                break
            post.append(el)
    if not match:
        return
    output = list(pre)
    output.extend(post)
    return output

for val in xrange(8):
    print context_match(lambda x: x == val, [1,2,3,4,5,6],before = 2, after = 2)
#Output:
None
[1, 2, 3]
[1, 2, 3, 4]
[1, 2, 3, 4, 5]
[2, 3, 4, 5, 6]
[3, 4, 5, 6]
[4, 5, 6]
None 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T12:40:06.410

这是更短的内容：

```
import collections
from itertools import islice

def windowfilter(pred, it, before=0, after=0):
        size = before + 1 + after
        q = collections.deque(maxlen=size)
        it = iter(it)
        for x in it:
                q.append(x)
                if pred(x):
                        # ok we got the item, add the trailing lines
                        more = list(islice(it, after))
                        q.extend(more)

                        # maybe there were too few items left
                        got = before + 1 + len(more)

                        # slice from the end
                        return tuple(q)[-got:] 
```

测试产生：

```
seq = [1,2,3,4,5,6]
for elem in range(8):
        print elem, windowfilter((lambda x:x==elem), seq, 2, 1)

# Output:
0 None
1 (1, 2)
2 (1, 2, 3)
3 (1, 2, 3, 4)
4 (2, 3, 4, 5)
5 (3, 4, 5, 6)
6 (4, 5, 6)
7 None 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-10T20:24:23.320

我的答案是这样的，

```
for k,v in enumerate(iterable):
    #if cmp(v,predicate) == 0:
    if v == predicate:
        if k+items_after < len(iterable):
            res.append((' '.join(token[(k-items_before):(k+items_after+1)]))) 
        elif k+window == len(token):
            res.append((' '.join(token[(k-items_before):])))   
        else:
            res.append((' '.join(token[(k-items_before):])))

return res 
```

# java - 使用 Android 发送网络图片

> ID：10428422
> 
> 赞同：2
> 
> 时间：2012-05-03T09:17:31.970
> 
> 标签：java, android, image, network-programming

我只是想知道哪种文件格式最适合通过网络发送，JPEG 还是 PNG？我需要它尽可能快，因为它是从 Android 手机压缩和发送的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:28:03.940

两者都可以通过网络发送图像，但是：

.JPEG 通常会更小，但取决于它的压缩程度（因为 jpeg 是一种有损格式），您可能没有足够好的细节。

.PNG 与 JPEG 相比，通常尺寸更大，但它是一种无损压缩格式，这意味着它将压缩文件（取决于图像）并保持质量。

还有一件事：

在存储包含文本、艺术线条或图形的图像时（具有锐利过渡和大面积纯色区域的图像），PNG 格式可以比 JPEG 更能压缩图像数据，并且没有 JPEG 在高对比度区域周围产生的明显视觉伪影.

# c# - 如何从另一个选项卡访问 winform 文本框控件？

> ID：10428425
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:17:42.393
> 
> 标签：c#

我有几个选项卡，我需要轻松访问它们上的文本框，我尝试了下面的代码：

```
textBox1.Text = otherTab.textBox1.Text;
String textIneed =otherTab.textBox1.Text; 
```

我确实公开了 TextBox，但 Visual Studio 坚持认为没有对 TextBox 的引用……而且这些选项卡也在同一个表单上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:20:19.360

> 选项卡在同一个表单上。

并且所有 UI 元素都在同一个表单上声明，因此只需将其称为`this.TheTextBoxName.Text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:22:35.310

在窗体上声明的任何控件都将是窗体的子窗体，并且任何控件都可以访问窗体子窗体内的另一个控件。因此，这里不需要将任何控件声明为公共或提供选项卡名称作为对象引用。像下面这样简单地写

```
String textIneed = textBox1.Text; 
```

# android - 在 ViewSwitcher 中为视图使用相对定位

> ID：10428430
> 
> 赞同：1
> 
> 时间：2012-05-03T09:17:47.603
> 
> 标签：android, android-layout, android-relativelayout, viewswitcher

我在这里遇到了问题，`RelativeLayout`也许`ViewSwitcher`有人可以提供帮助。所以我想要的是使用 a 切换两个视图`ViewSwitcher`，但是，切换器甚至是等式的一部分这一事实应该对用户/开发人员隐藏；相反，他们应该只处理正在切换的两个视图中的任何一个。

为此，我正在做的是提供一个自定义小部件，该小部件在膨胀时会从视图树中移除，`ViewSwitcher`在其先前位置插入 a，然后将自身重新插入为视图切换器的子项。那部分工作正常。

如果现在我有两个这样的视图，将它们相对于父级（例如使用`layout_alignParentBottom`）定位就可以了，但是当我尝试使用例如将它们相对于彼此定位时就不行了`layout_toRightOf=id`。

但是，当我将切换视图的 ID 复制到 ViewSwitcher （它的新父级）时，它确实有效，但我不明白为什么这是必要的，并且当拥有多个具有相同 ID 的视图时，可能会下雨青蛙或其他东西在视图树中？

这是一些澄清的代码：

```
// onLayout of the custom view that automatically inserts itself under a ViewSwitcher
@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    super.onLayout(changed, left, top, right, bottom);

    if (!(getParent() instanceof ViewSwitcher)) {

        // uncommenting this line fixes the issue,
        // but I don't want duplicate IDs!
        //switcher.setId(getId());

        // "migrate" this view's LPs to the new parent
        switcher.setLayoutParams(getLayoutParams());

        ViewGroup parent = (ViewGroup) this.getParent();
        System.out.println("PARENT: " + parent);
        int selfIndex = parent.indexOfChild(this);
        parent.removeView(this);
        parent.addView(switcher, selfIndex);

        ViewSwitcher.LayoutParams newParams = new ViewSwitcher.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        switcher.addView(this, newParams);
    }
} 
```

然后在一个布局 XML 文件中，用户只需要扩展这个自定义视图：

```
<com.myview.CustomView android:id="@+id/one" ... />
<!-- this works: -->
<com.myview.CustomView android:layout_alignParentTop="true" ... />
<!-- this doesn't without the ID hack: -->
<com.myview.CustomView android:layout_toRightOf="@id/one" ... /> 
```

换句话说，因为`layout_toRightOf`成为 new 的属性`ViewSwitcher`，而 ID 仍然是自定义视图的属性，将切换器相对于另一个视图切换器的子视图对齐不起作用，我不知道为什么。只有当我也给切换器提供与它的孩子相同的 ID 时，定位才会起作用。

关于这里出了什么问题的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:39:33.803

不确定我是否正确，但是当您将视图相对于彼此定位时，视图是否必须位于视图层次结构的同一级别？

因此，也许您应该以另一种方式定义您的引用： View one 具有该`android:layout_toRLeftOf"@id/two`属性，一旦您创建了该属性，`ViewSwitcher`您只需复制孩子的布局参数。

# visual-studio-2010 - 银光发生了未处理的异常`

> ID：10428431
> 
> 赞同：1
> 
> 时间：2012-05-03T09:17:48.987
> 
> 标签：visual-studio-2010, silverlight-4.0

我`project`通过选择`Silverlight`项目创建了一个新项目，但出现错误

发生了未处理的异常

![在此处输入图像描述](../Images/e5a3cbf391aa20b345de6bbdb980d7e0.png)

如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:02:38.807

问题为我解决了。通过控制面板检查所有已安装的 Silverlight 程序。

如果您安装了**Silverlight 4** ，则在控制面板卸载程序（Silverlight Developer 运行时）中通过选择行检查**Microsoft Silverlight**

它不会是 5.0.00 之类的更高版本..（您可以在底部状态中看到）

如果是（5.0），请卸载**Microsoft Silverlight**（5.0 版本）

下载[Silverlight 4 开发者运行时 v4.0.50524.0](http://download.microsoft.com/download/C/5/8/C5877489-8022-42A6-8456-D05C2A6C8DFB/runtime/Silverlight_Developer.exe)。

并安装它，然后打开您的项目。它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:36:11.677

1.  您在 VS2008 上开发 SL 4？VS 2008 不支持预览 xaml

2.  您需要升级到 VS2010 才能更好地使用 SL 4。

3.  可能发生的情况是您拥有 Silverlight 运行时的标准版本，并且您需要为 Silverlight 安装开发人员运行时。Blend 将使用 silverlight 运行时的标准版本安装和运行，但 Visual Studio 需要运行时的开发人员版本。此问题已在 RTM 版本的 Visual Studio 中得到修复。

    现在，如果您遇到此问题，请通过以下链接安装 silverlight 开发人员运行时：http: [//go.microsoft.com/fwlink/ ?LinkId=146060](http://go.microsoft.com/fwlink/?LinkId=146060)

4.  这是一个类似的案例，也许它会给你一些帮助：

    [http://bloggingabout.net/blogs/dennis/archive/2009/06/08/attempted-to-read-or-write-protected-memory-in-a-net-application.aspx](http://bloggingabout.net/blogs/dennis/archive/2009/06/08/attempted-to-read-or-write-protected-memory-in-a-net-application.aspx)

如果上面没有给你帮助，最好你可以为我们压缩你的代码，以便我们测试它。

# sms - 处理来电和通过短信回复的软件

> ID：10428434
> 
> 赞同：1
> 
> 时间：2012-05-03T09:17:53.963
> 
> 标签：sms, twilio, phone-call

我的公司有一个新项目即将推出，我需要可以接听电话、自动回复然后通过短信回复客户的软件。（类似于 Twilio (http://www.twilio.com/api) 但它需要在南非使用......

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:24:26.847

你为什么不看看这个？ [Skypekit](http://developer.skype.com/public/skypekit)

Skype 没有任何国家/地区限制。

Skypekit 可以作为桌面程序的选项，如果你愿意，你也可以有一个嵌入式芯片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:23:48.480

我假设用户正在调用自动​​自助服务应用程序（即 IVR 系统），而不是真人。有两种方法可以处理这两种情况，但在本次讨论中，我将假设呼叫的接收端是一台机器。我会使用[Voxeo Prophecy](http://evolution.voxeo.com/)来处理接听电话、执行验证和发送 SMS 消息。您可以通过 Prophecy 选择使用 Voxeo 的托管服务，也可以使用本地解决方案。您可以[免费下载两个端口版本](http://www.voxeo.com/prophecy/)以试用本地解决方案或[注册免费的开​​发人员帐户](http://evolution.voxeo.com/)尝试他们的托管解决方案。他们的托管解决方案具有国际支持，但您需要与他们优秀的技术支持团队核实，以确保他们支持您所在的地区。只需在开发者论坛中向他们提问，他们就会迅速做出回应。您会发现与 Asterisk 相比，Prophecy 更容易设置，甚至在您购买任何东西之前，您都会从 Voxeo 的团队获得免费且出色的技术支持。

该 IVR 系统的开发语言是称为[VoiceXML](http://www.w3.org/TR/voicexml20/)和[呼叫控制 XML (CCXML)](http://www.w3.org/TR/ccxml/)的开放标准。这些是基于 Web 的标准，您通常必须使用其他基于 Web 的语言来执行标准 IVR 和电话域之外的操作；例如集成到 SMS 网关。如果您是 ASP.NET 开发人员，我建议您查看[名为 VoiceModel 的开源项目](http://voicemodel.codeplex.com/)，该项目简化了使用 ASP.NET MVC 开发 VoiceXML 应用程序的过程。还有许多基于 Java 的工具和库可用于 VoiceXML 开发。

Voxeo 为您的应用程序提供了第三种解决方案，即[Tropo](https://www.tropo.com/home.jsp)。这更像是您已经研究过的 Twilio 解决方案。这在相同的 Voxeo 托管基础架构上运行，但您需要再次验证您所在地区是否支持它。Tropo 是严格托管的，没有本地解决方案。我更喜欢 VoicXML/CCXML 的原因是它是许多 IVR 供应商支持的开放标准，因此您不会被供应商锁定。此外，CCXML 还为更高级的应用程序（如外拨、会议和呼叫进度分析）提供了出色的呼叫控制功能。

要发送 SMS 消息，您需要与 SMS Gateway 服务集成。他们中的大多数都有简单的 REST 类型的 API 来与您的语音/电话应用程序集成。Voxeo 还有一个很棒的 SMS 网关服务，叫做[SMSified](http://smsified.com/)，但看起来他们目前只支持美国。您可能需要检查[SMSGateway](http://www.smsgateway.ca/)。我也使用过他们的服务，它确实有国际支持，但您需要与他们核实他们是否支持您所在的地区。那里有很多 SMS Gateway 服务。只需谷歌“短信网关”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:20:27.937

在 Twilio 最终开始支持南非人之前，您将不得不接受一种选择：[https ://www.tropo.com/pricing/](https://www.tropo.com/pricing/)

# php - 是否可以使用客户端代码检索数据库数据？

> ID：10428438
> 
> 赞同：-2
> 
> 时间：2012-05-03T09:18:13.840
> 
> 标签：php, javascript, mysql, ajax

> **可能重复：**
> [JavaScript 可以与 MySQL 连接吗？](https://stackoverflow.com/questions/3020751/can-javascript-connect-with-mysql)

我有一个包含姓名和电子邮件的数据库。当用户用电子邮件填写电子邮件输入字段时。JS 用数据库检查它，并在他在字段中完成电子邮件后写出人名。

`joe@exampl.com` 欢迎约翰·多伊！

是否可以使用 JavaScript 检索 MySQL 数据库数据？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:20:02.500

假设一个典型的浏览器环境（因为您指定了客户端代码），不，如果可能的话，以一种授予浏览器此类权限的方式公开数据库将是疯狂的。

编写一个 Web 服务，浏览器可以通过使用 Forms 或 Ajax 进行交互来代替发出 HTTP 请求。

（旁白：如果您没有指定客户端，那么[node js 可以做到](https://stackoverflow.com/questions/3878818/node-js-and-mysql-drivers)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:25:41.067

不。为了做这样的事情，你需要一个服务器。如果数据库与客户端位于同一台机器上，您可以做的是使用[IndexedDB](http://www.w3.org/TR/IndexedDB/)，为您提供访问本地数据库（即 NoSQL-DB）的方法。

# sqlite - 核心数据， NSMutableArray 包含 NSManagedObject ，对象在插入数组的第一个 NSManagedObject 后变为 nil

> ID：10428440
> 
> 赞同：0
> 
> 时间：2012-05-03T09:18:20.317
> 
> 标签：sqlite, core-data, memory-management, nsmutablearray, nsmanagedobject

我正在使用 coreData 插入一个 NSManagedObject 数组，在我成功插入第一个对象后，NSMutableArray 的第二个对象变为 nil 为什么会这样？这是我的代码的快照：

```
+ (void)insertCategoryUsingCategoryArray:(NSMutableArray *)categoryArray
{
    if(!categoryArray)
        return;
    for (int i=0;i<[categoryArray count]; i++) {
        DataCategory *temp=(DataCategory *)[categoryArray objectAtIndex:i];

        DataCategory *categoryInfo=(DataCategory *)[NSEntityDescription insertNewObjectForEntityForName:@"DataCategory" inManagedObjectContext:_sing.managedObjectContext];

        [categoryInfo setCategoryId:temp.categoryId];
        [categoryInfo setName:temp.name];
        [categoryInfo setImgSrc:temp.imgSrc];

        NSError *error;
        if (![_sing.managedObjectContext save:&error]) {
            NSLog(@"An error occured while saving! shit : %@", [error localizedDescription]);
        }
        categoryInfo=nil;
    }
} 
```

当我进入插入函数时，我调试 categoryArray，所有对象都在那里，在第一次循环后 temp 出于某种原因变为 nil，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:34:22.443

`categoryArray`不应成为此方法的参数。在您的设置中，该方法被传递一个数组作为该方法私有的变量。一旦你离开方法，这个数组将包含什么是不可预测的，除非你返回一些东西。

相反，您应该有一个由视图控制器管理的 ivar。初始化 ivar

```
categoryArray = [NSMutableArray array]; 
```

in`viewDidLoad`然后使用这个变量，不要将数组传递给方法。

.

*PS：您可以通过消除谩骂来改善您的编程风格。;-)*

# javascript - 如何随机选择一个数组？

> ID：10428444
> 
> 赞同：0
> 
> 时间：2012-05-03T09:18:45.680
> 
> 标签：javascript, arrays

我目前正在创建一个允许用户单击大量图像的游戏。根据他们点击的图像，会发生不同的事情。我看过以前的问题，他们似乎都在问“如何随机选择数组中的项目”。但是，我的与这些略有不同。抱歉，如果您觉得我的答案在其他地方。但无论如何！

我的问题很简单：

如何随机选择一个数组？到目前为止，我的代码包含一个可以检查数组中是否存在整数的函数。到目前为止，这是我的代码。

```
//The array below contains the integers.
example=new Array(1,2,3);

//The function below checks whether 'image' (which is an integer) is the same as any integers within the example array.

function isItThere(obj) {
    var j = false;
    for (var i = 0; i < example.length; i++) {
        if (example[hits] == obj) {
            j = true;
            break;
        }
    }
    return j;
}
//This is the IF statement I have used. After the integer associated with 'image' has been passed through the 'isItThere' function either A or B will happen. (A happens if the number exists).
if(isItThere(image)){ 
```

目前，这一切都很好。当然，这可能不是最有效的方式，但它实现了我迄今为止想要的。

但我现在想要多个包含整数的数组。这是因为如果用户重新加载游戏，那么他们就会确切地知道要按下哪些图像才能获胜。因此，我想创建几个数组，其中一个将在游戏开始时随机选择。

例如..

```
example0=new Array(1,2,3);
example1=new Array(4,5,6);
example2=new Array(7,8,9); 
```

我相信我应该使用以下代码。

```
var num=Math.floor(Math.random()*3); 
```

然后以某种方式将该数字与“示例”一词联系起来。

这样，我的这部分代码

```
if(isItThere(image)){ 
```

可以保持不变，因为 isItThere 处理随机数组的选择。

希望你能得到我想要的。我试图尽可能地具有描述性。再次总结一下，我希望能够在游戏开始时选择一个数组，以便可以多次玩游戏。你能写出我需要的代码吗？我有一种感觉它非常简单。但我花了几天时间寻找。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:22:35.557

创建一个父数组然后引用这个父数组怎么样？

```
var childArray1 = [1,2,3],
childArray2 = [4,5,6],
childArray3 = [7,8,9],
parentArray = [childArray1, childArray2, childArray3]; 
```

您也可以使用**parentArray.push(childArray1);添加它们** ，只是哪一个更适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:27:23.597

您应该做一个数组数组，并选择 random ：

```
var myArray = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9],
];

var theArray = myArray[Math.random() * 3)]; 
```

# c# - 非 Metro 应用程序中的 StorageFile 异步使用

> ID：10428446
> 
> 赞同：8
> 
> 时间：2012-05-03T09:18:48.617
> 
> 标签：c#, windows-8, windows-runtime, isolatedstorage, async-await

我正在尝试在我的类库中创建 StorageFile 的实例...

```
var localFolder = ApplicationData.Current.LocalFolder;
StorageFile destinationFile = await localFolder.CreateFileAsync(destination, CreationCollisionOption.GenerateUniqueName); 
```

VS11 is not building say: 'await' 要求类型 'Windows.Foundation.IAsyncOperation' 有一个合适的 GetAwaiter 方法。您是否缺少“系统”的使用指令？

显然我使用 .net 4.5 作为目标并且我正在引用 Windows 程序集......不知道为什么这段代码在 MetroStyle 中工作但不在类库中构建......如何在类库中创建 Storagefile 的实例？ ?? 在这个阶段，是否以异步方式创建文件并不重要......

请让我知道你的想法...... Stelio

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-01T17:17:25.683

对我有用的是“手动”添加 TargetPlatformVersion

```
<PropertyGroup>
  <TargetPlatformVersion>8.0</TargetPlatformVersion>
</PropertyGroup> 
```

并在项目组中添加以下内容

```
<ItemGroup>
  <Reference Include="System.Runtime.WindowsRuntime" />
  <Reference Include="System.Runtime" />
  <Reference Include="Windows" />
</ItemGroup> 
```

然后项目应该正常编译。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-25T10:35:09.953

我有同样的问题。问题是命名空间标头中缺少系统命名空间。我只是在命名空间中包含了系统并且它工作。希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T09:30:42.817

看起来您正在尝试使用 WinRT 库中的类型，因为`StorageFile` [类文档](http://msdn.microsoft.com/library/windows/apps/BR227171)声明它仅适用于 Metro 并且它位于`Windows.Storage`.

[这篇博客文章](http://www.wintellect.com/CS/blogs/jeffreyr/archive/2011/09/20/using-the-windows-runtime-from-a-non-metro-application.aspx)介绍了如何构建它，但它似乎是一个手动过程。它还详细说明了错误的原因：

> 使用 await 关键字会导致编译器在此接口上查找 GetAwaiter 方法。由于 IAsyncOperation 没有定义 GetAwaiter 方法，编译器想要寻找扩展方法。

基本上，看起来您需要添加对以下内容的引用：`System.Runtime.WindowsRuntime.dll`

* * *

请花时间阅读他的博客文章，但为了清楚起见，我将把重要的部分放在这里。

* * *

**以下博客内容被毫不客气地抄袭**

首先，在记事本中，我在 EnumDevices.cs 中创建了以下 C# 源代码：

```
using System;
using System.Threading.Tasks;
using Windows.Devices.Enumeration;
using Windows.Foundation;

class App {
    static void Main() {
        EnumDevices().Wait();
    }

    private static async Task EnumDevices() {
        // To call DeviceInformation.FindAllAsync:
        // Reference Windows.Devices.Enumeration.winmd when building
        // Add the "using Windows.Devices.Enumeration;" directive (as shown above)
        foreach (DeviceInformation di in await DeviceInformation.FindAllAsync()) {
            Console.WriteLine(di.Name);
        }
    }
} 
```

其次，我创建了一个 Build.bat 文件，我从开发人员命令提示符运行该文件以构建此代码（这应该是 1 行，但我将其包装在这里以供阅读）：

```
csc EnumDevices.cs  
/r:c:\Windows\System32\WinMetadata\Windows.Devices.Enumeration.winmd  
/r:c:\Windows\System32\WinMetadata\Windows.Foundation.winmd 
/r:System.Runtime.WindowsRuntime.dll  
/r:System.Threading.Tasks.dll 
```

然后，在命令提示符下，我只需运行 EnumDevices.exe 即可查看输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T14:14:57.147

应该是很久没有发帖的时候我添加引用后：
System.Runtime.WindowsRuntime.dll
System.Threading.Tasks.dll

并在项目文件中定位 Windows 8：

```
 <PropertyGroup>
    <TargetPlatformVersion>8.0</TargetPlatformVersion>
  </PropertyGroup> 
```

上面提到的例子可以在VS中编译。

# java - 在java中启用日志调试检查

> ID：10428447
> 
> 赞同：13
> 
> 时间：2012-05-03T09:18:50.927
> 
> 标签：java, logging, log4j

在这里使用 if 语句有什么意义？可以在 log4j.xml 配置文件中更改严重级别。如果严重级别是调试，它将记录调试消息，否则不会。

下面的if语句有什么意义？

```
 if (log.isDebugEnabled())
    {
        log.debug("I am logging something");
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T09:29:42.007

在您的示例中，不需要“if”语句（“if”之间不是循环）

但是如果你看下面的例子，你可以看到我们做了一个连接，如果日志级别是 info，那么这个连接操作就会不必要地完成。为了获得更好的性能，我们检查这个条件。

```
if (log.isDebugEnabled())
{
    log.debug("I am logging " + 1234 + ".");
} 
```

**额外信息：**

使用 slf4j 来避免这种 if 条件。上面的语句在 slf4j 中可以改写如下，

```
log.debug("I am logging {} .", 1234); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:23:29.233

这被认为是良好的做法。例如，如果存在一些字符串连接，则不会在 log4j 中对其进行评估和检查，而是首先对其进行检查。

例子：

```
if ( log.isDebugEnabled() ) {
    log.debug( "N=" + N + ", a=" + Arrays.toString( a ) );
} 
```

`Arrays.toString()`如果未启用调试，则不执行方法和连接。如果没有`if`，则首先调用它并稍后检查，仅此而已;-)

我的观点是，当您的示例中有简单的 String 时，不需要围绕日志记录的 if，如果有更复杂的东西（在我的示例中甚至更复杂），这可以在生产模式下节省一些 CPU 时间（没有调试模式启用）。

您还必须意识到，在连接的情况下，如果您认为它没有调用任何业务逻辑`String.valuOf()`（`toString()`因此它是“无用的”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T09:26:30.967

这是一个性能优化。这样做是为了避免评估`log.debug`. 只有在构建日志消息特别昂贵（例如序列化 XML 文档）时才值得这样做。

这在[log4j 的简短介绍](http://logging.apache.org/log4j/1.2/manual.html)中有一些详细介绍。

# google-maps-api-3 - 使用谷歌地图 API 查找国家/地区的所有城市

> ID：10428450
> 
> 赞同：2
> 
> 时间：2012-05-03T09:19:01.543
> 
> 标签：google-maps-api-3

我使用地理编码 API 来查找德国的位置。我想把每个城市都画成不同的颜色。我怎样才能得到相关国家所有城市的纬度和经度？我需要使用 KLM 或 fusion table 来获取此信息吗？

问候， 约西

# visual-c++ - Visual C++ Express 中的自定义项模板

> ID：10428452
> 
> 赞同：0
> 
> 时间：2012-05-03T09:19:08.283
> 
> 标签：visual-c++

我尝试将自定义项模板添加到 Visual C++ Express 2008，但失败了。Express 版是否支持这一点，还是我可能犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:35:13.133

Express 版本不支持扩展。但[这篇文章](http://www.codeproject.com/Articles/43653/Visual-C-Express-Custom-Wizard)有望填补这一空白。

# extjs - ExtJS 图表示例代码

> ID：10428457
> 
> 赞同：1
> 
> 时间：2012-05-03T09:19:29.283
> 
> 标签：extjs

我是 ExtJs 的初学者。我试图仅查找 ExtJS 图表示例。我找到了所有示例，但源代码中没有定义存储。

请看链接：

[http://docs.sencha.com/ext-js/4-1/#!/example/sandbox/sandbox.html](http://docs.sencha.com/ext-js/4-1/#!/example/sandbox/sandbox.html)

实际上，我正在寻找具有完整源代码的所有图表示例.....

如果您有任何链接，请提供相同的链接。

谢谢，拉曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:10:34.653

[条形图示例](http://docs.sencha.com/ext-js/4-0/#!/example/charts/Bar.html)

使用 Firebug Firefox 插件，脚本选项卡，搜索 store1（作为示例商店传入的参数）。嘿 presto，正在使用的 JSON 存储的定义。

# asp.net - 使用页面方法时是否发送了所有表单数据？

> ID：10428458
> 
> 赞同：0
> 
> 时间：2012-05-03T09:19:31.173
> 
> 标签：asp.net, forms, google-chrome-devtools, pagemethods

我的印象是页面方法和脚本方法创建了微小的 AJAX 请求（与 PostBacks 相比），但我正在 Chrome 的开发人员工具的网络选项卡中检查页面方法调用的 XHR，并在标题中查看整个表单的数据.
由于页面方法是静态的，并且不能直接访问表单值，所以对我来说，没有发送整个表单是有意义的。
也许我只是误解了 Chrome 开发者工具？

![表头中的表单数据](../Images/d691b89cffd5b2c5d5b4e053d6ba1e74.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T00:12:55.360

这看起来像是通过 UpdatePanel 路由的常规 ASP.NET 回发。正确实施和调用的静态页面方法将仅发送您指定的 POST 数据，而不是整个表单。

您能否发布一些代码来显示服务器端方法以及如何在客户端调用它？

# java - 在 VO 中实现序列化而不保存 Object 的状态？

> ID：10428459
> 
> 赞同：0
> 
> 时间：2012-05-03T09:19:32.267
> 
> 标签：java, serialization

目前在项目中，很少有 VO（值对象）类通过实现 Serializable 接口进行序列化。这个类只有 getter 和 setter。在代码中他们正在执行 writeObject 或保存对象状态的任何地方都没有。

让我的 VO Serializable 有意义有什么价值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:58:29.233

让我们用一个简单的案例来争论：想象一个包装了一些值对象的实体，并且您想使用例如 Hibernate 框架来管理您的实体。

Hibernate 可能需要可序列化的类：

> 该类应实现可序列化。严格来说，这不是一个要求。但是，在实践中，您通常希望您的 Hibernate 对象是可序列化的，以便它们可以（可能）在多处理器集群周围迁移或在 Web 服务器重新启动时保存和恢复等。

当然，您不必精确的 writeObject 和 readObject 方法，因为默认的序列化使用反射来保存和恢复对象状态。

实际上，当您想要自定义序列化时，这些方法很有趣，例如在反序列化期间使用精确的默认值初始化一个字段（存在于客户端类中但不存在于服务器类中）。

# xpath - WinJS：使用带有 responseXML 对象的 XPath 方法

> ID：10428466
> 
> 赞同：2
> 
> 时间：2012-05-03T09:19:51.967
> 
> 标签：xpath, windows-8, windows-runtime, winjs

我的 Windows8 应用程序有问题。这是代码的简化部分：

```
return WinJS.xhr({ url: url }).then(function (response) {

    var response = response.responseXML;
    var element = response.selectSingleNode("COUNT(//item)");

    console.log(element);

} 
```

但是，它会引发错误：`JavaScript runtime error: Unknown method. -->COUNT(//<--item`.

是否可以在 WinJS 中调用一些 XPath 方法？如果是这样，错误在哪里？我猜这不是调用的正确方法（我们在这里选择一个标量，而不是一个节点）。但我在文档中找不到任何内容。

# android - 从 Android 的 Twitter OAuth 中提取 URI

> ID：10428472
> 
> 赞同：1
> 
> 时间：2012-05-03T09:20:07.177
> 
> 标签：android, twitter, oauth, uri

我有以下功能来管理登录：

```
private static final String CALLBACK_URL = "myapp://twitter";

private void loginViaOAuth() {
    try {
        consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
        provider = new CommonsHttpOAuthProvider(REQUEST_URL, ACCESS_TOKEN_URL, AUTH_URL);
        provider.setOAuth10a(true);
        String authURL = provider.retrieveRequestToken(consumer, CALLBACK_URL);
        this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authURL)));
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

和 Manifest.xml

```
<activity android:name=".Twitterconnect"
        android:launchMode="singleTask"
        android:configChanges="orientation|keyboardHidden" 
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="myapp" android:host="twitter" />
        </intent-filter> 
    </activity> 
```

我得到的回应是：

```
05-03 11:24:03.968: INFO/ActivityManager(59): Starting activity: Intent { 
act=android.intent.action.VIEW 
cat=[android.intent.category.BROWSABLE] 
dat=myapp://twitter?oauth_token=tJpJHOOwoTGMwdvHyYbfX2tyHKOp0Y2kdRRZf3sM&oauth_verifier=xc49oM8eVVmK46ZSLz2RMT2uqXn3SxrMxf5ZAMXaD2Y 
cmp=my.app/.Twitterconnect 
```

}

这是我的 OnResume 函数：

```
@Override
protected void onResume() {
    super.onResume();
    Uri uri = this.getIntent().getData();
    if (uri != null && uri.toString().startsWith(CALLBACK_URL)) {
        String verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
        Log.d("verifier:", verifier);
        try {
            provider.setOAuth10a(true);
            provider.retrieveAccessToken(consumer, verifier);
            ACCESS_KEY = consumer.getToken();
            ACCESS_SECRET = consumer.getTokenSecret();
            AccessToken a = new AccessToken(ACCESS_KEY, ACCESS_SECRET);
            // initialize Twitter4J
            twitter = new Twitter();
            twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
            twitter.setOAuthAccessToken(a);
            Log.e("TWITTER", "step1");
            twitter.updateStatus("Just shared the ".concat(tweet).concat(" on Twitter!"));
            Log.e("TWITTER", ""+buttonTwitterShare.getVisibility());
            buttonTwitterShare.setVisibility(View.GONE);
            Log.e("TWITTER", "step2");
            Log.e("TWITTER", ""+buttonTwitterShare.getVisibility());
            Toast.makeText(getBaseContext(), "Post successfully tweeted!", Toast.LENGTH_LONG).show();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我的问题是，为什么无论我使用通过获取的 URI 登录什么配置文件`Uri uri = this.getIntent().getData();`始终为 NULL？如何从响应中提取`oauth_token`和： ？`oauth_verifier``dat=myapp://twitter?oauth_token=tJpJHOOwoTGMwdvHyYbfX2tyHKOp0Y2kdRRZf3sM&oauth_verifier=xc49oM8eVVmK46ZSLz2RMT2uqXn3SxrMxf5ZAMXaD2Y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:52:12.467

这可能对你有用

```
 Uri uri = this.getIntent().getData();
    if (uri == null) {
        return null;
    }
    String token = uri.getQueryParameter("oauth_token");
    String verifier = uri.getQueryParameter("oauth_verifier"); 
```

就连这两行

```
String token = uri.getQueryParameter("oauth_token");
String verifier = uri.getQueryParameter("oauth_verifier"); 
```

正如您已经获得 uri 应该做的那样。

# ant - Hudson 删除共享目录

> ID：10428474
> 
> 赞同：1
> 
> 时间：2012-05-03T09:20:13.917
> 
> 标签：ant, hudson, ivy

我正在使用 Hudson 和 Ant+ivy 以及许多并行开始的工作。我的问题是我为 Ivy 使用了一个缓存文件夹，该文件夹在每个作业的 ant 任务中都被删除和更新。

当然，有几个构建失败是因为他们无法删除 ivy 文件夹，还有一些构建失败是因为找不到同时被删除的库。

> 构建失败
> 
> C:\dev.hudson\jobs\api\workspace\build\build.xml:100: 无法删除目录 C:\dev\tools\build\ant\extensions\ivy\cache\myapp

和

> 构建失败
> 
> C:\dev.hudson\jobs\api\workspace\build\build.xml:104：无法解析依赖项：解析失败 - 详情请参阅输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:27:06.393

如果您真的需要每次安德斯回答时都清除缓存，那么您可以这样做。

我更愿意为所有外部库（或不会发生太大变化的库）保留一个缓存，以及一个始终被清除的基于项目的缓存。

对于很少更改的缓存，锁定策略将很有用，可以处理多线程访问。

[锁定策略](https://ant.apache.org/ivy/history/latest-milestone/settings/lock-strategies.html)在这里应该有所帮助。如果您只使用 ivy 命令来处理缓存，这将确保只有一个进程“在其中处于活动状态”。

您可以在`ivysettings.xml`一般情况下启用它。

```
<lock-strategies><artifact-lock/></lock-strategies> 
```

或者在[缓存级别](https://ant.apache.org/ivy/history/latest-milestone/settings/caches.html)。

# php - PHP bindParam 似乎不适用于 PARAM_INT out 参数

> ID：10428480
> 
> 赞同：0
> 
> 时间：2012-05-03T09:20:30.583
> 
> 标签：php, mysql, stored-procedures, output-parameter

以下是我的 MySQL 存储过程：

```
DROP PROCEDURE IF EXISTS sp_authenticate;
CREATE PROCEDURE sp_authenticate(IN user_name VARCHAR(50),
  IN password1 VARCHAR(50), OUT nmatch INT)
BEGIN

  SELECT COUNT(*) INTO nmatch
    FROM user1 u
    WHERE u.name = user_name AND
      u.password1 = password1;

END// 
```

这就是我从 PHP 调用它的方式：

```
function authenticate($pdo, $user_name, $password){
  $stmt = $pdo->prepare('CALL sp_authenticate(:user_name, :password, :nmatch)');
  $stmt->bindValue(':user_name', $user_name, PDO::PARAM_STR);
  $stmt->bindValue(':password', $password, PDO::PARAM_STR);
  $nmatch = 888888;
  $stmt->bindParam(':nmatch', $nmatch, PDO::PARAM_INT, 4);
  $result = $stmt->execute();

  return $nmatch;
} 
```

$nmatch 始终保留它的旧值，并且不接收来自存储过程的值。我在这里做错了什么？

MySQL 服务器版本：5.5.22 PHP 版本：5.3.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T01:04:09.940

如[本博客](http://www.danstraw.com/calling-mysql-stored-procedures-from-phps-pdo-output-parameters/2010/12/21/)所述：

> 不幸的是，PDO 使用的 MySQL C API 存在一个错误，这意味着在调用过程时尝试获取输出参数会导致错误：
> 
> > “语法错误或访问冲突：例程 $procedure_name 的 1414 OUT 或 INOUT 参数 $parameter_number 不是变量或新伪变量”。
> 
> [您可以在bugs.mysql.com](http://bugs.mysql.com/bug.php?id=11638)上查看错误报告。它已针对 5.5.3+ 和 6.0.8+ 版本进行了修复。
> 
> 要解决此问题，您需要将输入和输出参数分开并调用该过程。 [PHP PDO 文档中的示例 #11](http://www.php.net/manual/en/pdo.prepared-statements.php)将显示为：
> 
> ```
> $stmt = $dbh->prepare("CALL sp_takes_string_returns_string(:in_string, @out_string)");
> $stmt->bindParam(':in_string', 'hello');
> 
> // call the stored procedure
> $stmt->execute();
> 
> // fetch the output
> $outputArray = $this->dbh->query("select @out_string")->fetch(PDO::FETCH_ASSOC);
> 
> print "procedure returned " . $outputArray['@out_string'] . "\n"; 
> ```

# linux - 无法根据主机名 ping 到 ip

> ID：10428486
> 
> 赞同：1
> 
> 时间：2012-05-03T09:21:04.587
> 
> 标签：linux, ubuntu, dns

我有两台电脑

```
1\. 192.168.56.102 => winXP
2\. 192.168.56.103 => ubuntu 10.04 (bind9 and apache2 installed) 
```

我已将 simas.tes 注册到 192.168.56.103

我做了什么 ：

```
# vi /etc/bind/named.conf.local

zone "simas.tes" {
    type master;
    file "/etc/bind/zones/simas.tes.db";
};

zone "56.168.192.in-addr-arpa" {
    type master;
    file "/etc/bind/zones/rev.56.168.192.in-addr.arpa";
}; 
```

然后 ：

```
# vi /etc/bind/zones/simas.tes.db

simas.tes.  IN  SOA ns1.simas.tes.  admin.simas.tes. (
    2006081401
    28800
    3600
    604800
    38400
)

simas.tes.  IN  NS      NS1.simas.tes. 
simas.tes.  IN  MX  10  mta.simas.tes.

www IN  A   192.168.56.103
mta IN  A   192.168.56.103
ns1 IN  A   192.168.56.103 
```

然后 ：

```
# vi /etc/bind/zones/rev.56.168.192.in-addr.arpa

@ IN SOA ns1.simas.tes. admin.simas.tes. (
    2006081401;
    28800;
    604600;
    604800;
    86400
)

    IN  NS  ns1.simas.tes.
103 IN  PTR simas.tes. 
```

我的挖掘状态：

```
root@my-ubuntu:/var/www# dig simas.tes

; <<>> DiG 9.7.0-P1 <<>> simas.tes
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 9559
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 0

;; QUESTION SECTION:
;simas.tes.         IN  A

;; AUTHORITY SECTION:
simas.tes.      38400   IN  SOA ns1.simas.tes. admin.simas.tes. 2006081401 28800 3600 604800 38400

;; Query time: 0 msec
;; SERVER: 192.168.56.103#53(192.168.56.103)
;; WHEN: Thu May  3 17:25:05 2012
;; MSG SIZE  rcvd: 73 
```

我的 nslookup 状态：

```
root@my-ubuntu:/var/www# nslookup simas.tes
Server:     192.168.56.103
Address:    192.168.56.103#53

*** Can't find simas.tes: No answer 
```

现在我可以从 192.168.56.102（我的 winXP）访问 simas.tes 站点，但我无法 ping 到 simas.tes（而不是 192.168.56.103）.. 我想念什么？..我只想知道如何成功ping simas.tes。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:41:00.147

在我看来，您缺少“simas.tes”的“IN A”条目。在 /etc/bind/zones/simas.tes.db 文件中。设置它的一种可能性是：

```
西马泰斯 在 192.168.56.103
西马泰斯 在 NS NS1.simas.tes 中。
```

在这个例子中，我添加了我在你现有的 NS 记录上面提到的“A”记录。

# objective-c - 如何提取 NSArray 的元素并将它们（parseInt）转换为整数值？

> ID：10428489
> 
> 赞同：0
> 
> 时间：2012-05-03T09:21:10.537
> 
> 标签：objective-c, ios, cocoa, nsarray

我有一个字符串，它是一个 13 位数字。我需要分隔所有数字并找到各个数字的总和。我怎样才能做到这一点？

我像这样将字符串转换为 NSArray：

```
NSArray *arrStrDigits = [str13DigitNumber componentsSeparatedByString:@""]; 
```

现在我想运行一个循环并得到类似 arrStrDigits[i] 的东西

我是Objective C的新手:(。请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:27:18.140

像这样获取单个数字：

```
unichar digitChar = [str13DigitNumber characterAtIndex: someIndex];
// Should put in some validation that you have a digit here
int digit = digitChar - '0'; 
```

那只需要进入一个循环，`someIndex`从 0 迭代到`[str13DigitNumber length]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:28:11.807

```
int total=0; 
for(NSString *numberInString in arrStrDigits)
{ 
    total+=[numberInString intValue];
} 
```

**注意：**我假设您在数组的每个位置都有 int。

**注1：**这个答案只与你问的有关（运行一个循环，没有别的）。

# asp.net - asp.net mvc 3 User.IsInRole("Admin")

> ID：10428493
> 
> 赞同：0
> 
> 时间：2012-05-03T09:21:33.680
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个站点，其中包含用于执行操作的链接。如果用户不是管理员角色，有些需要隐藏。我正在检查后端，以防有人直接输入 url 等等。但是在剃刀视图中拥有这个就足够了吗？

```
<ul>
<li>Home</li>
<li>Items</li>
@if(User.IsInRole("Admin"){
    <li>Users</li>
}
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:26:21.187

是的，这就足够了。

或者正如我在最近使用的另一篇文章中发现的那样：

```
public static MvcHtmlString If(this MvcHtmlString value, bool evaluation)
{
     return evaluation ? value : MvcHtmlString.Empty;
} 
```

所以你可以使用这个：

```
@Html.ActionLink("Create New", "Create").If(User.IsInRole("Admin")) 
```

但是，如果您正在使用指向其他页面的链接，则您需要阻止在非特定角色时访问这些页面。您还应该在要阻止它们访问的控制器中包含 Authorize 属性：

```
public class HomeController : Controller
{
    [Authorize(Roles="Admin")]
    public ActionResult Index()
    { 
        return View();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:26:08.030

是的。还将属性添加到控制器中的相应方法以防止手动调用

```
[Authorize( Roles = "Admin" )] 
```

# c# - 从当前登录用户的 Active Directory 中获取专有名称

> ID：10428495
> 
> 赞同：1
> 
> 时间：2012-05-03T09:21:42.753
> 
> 标签：c#, .net, active-directory, distinguishedname

如何从 C# 中当前登录用户的 Active Directory 中获取可分辨名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T09:34:08.480

检查以下代码段。你已经`Identity.Name`从[IPrincipal](http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.aspx)传递过来了。我假设用户已经在 Active Directory 中进行了身份验证（即使用标准 IIS 授权方法）。

```
private string GetUserName(string identity)
{
    if (identity.Contains("\\"))
    {
        string[] identityList = identity.Split('\\');
        return identityList[1];
    }
    else
    {
        return identity;
    }
}

public string GetUserDn(string identity)
{            
    var userName = GetUserName(identity);   
    using (var rootEntry = new DirectoryEntry("LDAP://" + adConfiguration.ServerAddress, null, null, AuthenticationTypes.Secure))
    {       
        using (var directorySearcher = new DirectorySearcher(rootEntry, String.Format("(sAMAccountName={0})", userName)))
        {
            var searchResult = directorySearcher.FindOne();                    
            if (searchResult != null)
            {
                using (var userEntry = searchResult.GetDirectoryEntry())
                {
                    return (string)userEntry.Properties["distinguishedName"].Value;                 
                }
            }
        }                
    }   
    return null;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T00:11:28.753

你为什么不直接使用：`System.DirectoryServices.AccountManagement.UserPrincipal.Current.DistinguishedName`

# c# - C#如何监控数据库表的变化

> ID：10428498
> 
> 赞同：0
> 
> 时间：2012-05-03T09:21:49.320
> 
> 标签：c#, sql-server-2008

如何在 C# 中监视对我的数据库表的更改？我正在使用 SQL Server 2008，并且我想在更改表时同步数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:31:57.310

如果我理解正确，您想创建一个[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)；

```
void Initialization()
{
    // Create a dependency connection.
    SqlDependency.Start(connectionString, queueName);
}

void SomeMethod()
{
  // Assume connection is an open SqlConnection.

  // Create a new SqlCommand object.
  SqlCommand command=new SqlCommand(
    "SELECT ShipperID, CompanyName, Phone FROM dbo.Shippers", 
    connection);

  // Create a dependency and associate it with the SqlCommand.
  SqlDependency dependency=new SqlDependency(command);
  // Maintain the refence in a class member.

  // Subscribe to the SqlDependency event.
  dependency.OnChange+=new OnChangeEventHandler(OnDependencyChange);

  // Execute the command.
  command.ExecuteReader();
  // Process the DataReader.
}

// Handler method
void OnDependencyChange(object sender, 
   SqlNotificationsEventArgs e )
{
  // Handle the event (for example, invalidate this cache entry).
}

void Termination()
{
    // Release the dependency
    SqlDependency.Stop(connectionString, queueName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:20:01.737

检查[Microsoft 同步框架](http://msdn.microsoft.com/en-in/sync/bb821992.aspx)。

# mysql - 优化 SQL 请求

> ID：10428499
> 
> 赞同：0
> 
> 时间：2012-05-03T09:21:50.607
> 
> 标签：mysql, sql, optimization, request

我使用 PDO Mysql，并请求为我的数据库中的产品选择最便宜的报价。它工作正常，唯一的问题是它很慢（对于 200 个报价（并且仍然只有 25 个返回））它需要将近一秒钟，这比我的目标要高得多。

我不是 SQL 专家，所以我在这件事上寻求您的帮助。这是请求，如果需要，我很乐意提供更多信息：

```
SELECT
            mo.id AS id, 
            mo.stock AS stock, 
            mo.price AS price,
            mo.promotional_price AS promotional_price, 
            mo.picture_1 AS picture_1, 
            mo.picture_2 AS picture_2, 
            mo.picture_3 AS picture_3, 
            mo.picture_4 AS picture_4, 
            mo.picture_5 AS picture_5, 
            mo.title AS title, 
            mo.description AS description, 
            mo.state AS state, 
            mo.is_new AS is_new, 
            mo.is_original AS is_original, 
            c.name AS name, 
            u.id AS user_id, 
            u.username AS username, 
            u.postal_code AS postal_code,
            p.name AS country_name, 
            ra.cache_rating_avg AS cache_rating_avg, 
            ra.cache_rating_nb AS cache_rating_nb, 
            GROUP_CONCAT(md.delivery_mode_id SEPARATOR ', ') AS delivery_mode_ids, 
            GROUP_CONCAT(ri.title SEPARATOR ', ') AS delivery_mode_titles

        FROM 
            mp_offer mo, catalog_product_i18n c,
            ref_country_i18n p, mp_offer_delivery_mode md,
            ref_delivery_mode r, 
            ref_delivery_mode_i18n ri, user u 

        LEFT JOIN mp_user_review_rating_i18n ra 
            ON u.id = ra.user_id 

        WHERE (mo.product_id = c.id 
                AND mo.culture = c.culture 
                AND mo.user_id = u.id 
                AND u.country_id = p.id 
                AND mo.id = md.offer_id
                AND md.delivery_mode_id = ri.id 
                AND mo.culture = ri.culture) 
            AND (mo.culture = 1
                AND p.culture = 1) 
            AND mo.is_deleted = 0
            AND mo.product_id = 60 
            AND ((u.holiday_start IS NULL)
                OR (u.holiday_start = '0000-00-00') 
                OR (u.holiday_end IS NULL)
                OR (u.holiday_end = '0000-00-00') 
                OR (u.holiday_start > '2012-05-03')
                OR (u.holiday_end < '2012-05-03')) 
            AND mo.stock > 0
        GROUP BY mo.id 
        ORDER BY IF (mo.promotional_price IS NULL,
                    mo.price,
                    LEAST(mo.price, mo.promotional_price)) ASC 

        LIMIT 25 OFFSET 0; 
```

我接受将“文化”设置为 1、未删除、有一些库存且卖家不在假期的特定产品的报价。我按价格订购（promotional_price 有一个）。

LEAST 是一个缓慢的函数吗？

这是 EXPLAIN 的输出：

```
id  select_type table   type    possible_keys                                                                       key     key_len ref                                 rows    Extra
1   SIMPLE      c       const   PRIMARY,catalog_product_i18n_product,catalog_product_i18n_culture                   PRIMARY 8       const,const                         1       "Using temporary; Using filesort"
1   SIMPLE      mo      ref     PRIMARY,culture,is_deleted,product_id,user_id                                       culture 4       const                               3       "Using where with pushed condition"
1   SIMPLE      u       eq_ref  PRIMARY,user_country                                                                PRIMARY 4       database.mo.user_id                 1       "Using where with pushed condition"
1   SIMPLE      p       eq_ref  PRIMARY,ref_country_i18n_culture                                                    PRIMARY 8       database.u.country_id,const         1   
1   SIMPLE      r       ALL     NULL                                                                                NULL    NULL    NULL                                3       "Using join buffer"
1   SIMPLE      ra      ALL     NULL                                                                                NULL    NULL    NULL                                4   
1   SIMPLE      md      ref     PRIMARY,fk_offer_has_delivery_mode_delivery_mode1,fk_offer_has_delivery_mode_offer1 PRIMARY 4       database.mo.id                      2   
1   SIMPLE      ri      eq_ref  PRIMARY                                                                             PRIMARY 2       database.md.delivery_mode_id,const  1 
```

提前感谢您在优化此请求方面的帮助。

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:44:15.510

您没有使用包含在 from 子句中的 ref_delivery_mode 表。它得到了表格结果的笛卡尔积的原因。

# php - 使用 PHP 从字符串中提取值

> ID：10428504
> 
> 赞同：1
> 
> 时间：2012-05-03T09:21:57.663
> 
> 标签：php, preg-match

> **可能重复：**
> [Preg_match_all <a href](https://stackoverflow.com/questions/1519696/preg-match-all-a-href)
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我已经使用 curl 来提取页面的来源，并且需要从 curl 输出中提取一些值。

部分输出如下所示：

```
<div class="detailInfo">
<label>Manufacturer code/Gas council no:
                </label>BKSWX5506</div>
<div class="detailInfo"></div>
<div class="detailInfo">
<div>
<label>Retail price:</label><span>£12.30</span>
</div>
<div>
<label>Net buying price:</label><span>£7.47</span>
</div>
</div> 
```

从该输出中，我需要在“制造商代码/燃气委员会编号：”之后获取代码，并且两个价格都在单独的字符串中。

谁能帮我这个？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:08:33.740

尝试这个 ：

```
<?php

        $output = '<div class="detailInfo">
<label>Manufacturer code/Gas council no:
                </label>BKSWX5506</div>
<div class="detailInfo"></div>
<div class="detailInfo">
<div>
<label>Retail price:</label><span>£12.30</span>
</div>
<div>
<label>Net buying price:</label><span>£7.47</span>
</div>
</div>';

        $outputArray = explode("</label>", str_replace("<label>","</label>",strip_tags($output, '<label>')));

        echo "<pre>";
        print_r($outputArray);
        echo "</pre>";
        exit;
?> 
```

输出 ：

```
Array
(
    [0] => 

    [1] => Manufacturer code/Gas council no:

    [2] => BKSWX5506

    [3] => Retail price:
    [4] => Â£12.30

    [5] => Net buying price:
    [6] => Â£7.47

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:09:50.577

以下是一个通用例程，您可以使用它来获取一些 xpath 到您正在寻找的文本部分。它应该为您提供第一个开始，因为它还显示了如何运行 xpath 查询：

```
$searches = array('BKSWX5506', '£12.30', '£7.47');

$doc = new DOMDocument();
$doc->loadHTML('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'.$html);
$xp = new DOMXPath($doc);

foreach($searches as $search)
{
    $expression = '//text()[contains(., "'.$search.'")]';
    $result = $xp->query($expression);
    foreach($result as $found)
    {
        /* @var $found DOMNode */
        printf("%s: %s\n", $found->getNodePath(), $found->nodeValue);
    }
} 
```

对于`$html`您提供的内容，它会执行以下输出：

```
/html/body/div[1]/text()[2]: BKSWX5506
/html/body/div[3]/div[1]/span/text(): £12.30
/html/body/div[3]/div[2]/span/text(): £7.47 
```

使用这些路径将再次显示信息：

```
$number = $xp->evaluate('string(/html/body/div[1]/text()[2])'); # BKSWX5506 
```

如您所见，您可以为这两者使用 xpath：分析文档以获取特定值，然后将收集到的信息用作模式。

# android - 将 9png 图像放入哪个文件夹？

> ID：10428506
> 
> 赞同：20
> 
> 时间：2012-05-03T09:22:07.867
> 
> 标签：android, android-layout, nine-patch

我们使用 9png 主要是为了减小 apk 的大小。但是，我面临一个特殊的问题。我不确定我必须将 9pngs 放在哪个文件夹中。我已将它们放在 HDPI 文件夹中。由于 Android 很“聪明”，因此如果我在 MDPI 手机中使用该应用程序，它会“缩放” 9png，从而产生疯狂的效果。直到我在 Galaxy note 中尝试它之前，我没有遇到任何重大问题。看起来 9png 是取自 HDPI 并缩放（注意有 800x1280），它产生了奇怪的效果。

*   那么哪个是放置 9png 的正确位置？
*   如何根据放入的文件夹告诉 Android 系统不要“缩放”9png？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T10:40:35.020

根据 Romain Guy对 Google 群组的[回答：](http://groups.google.com/group/android-developers/browse_thread/thread/8d9413d1b2012b7d?pli=1)

> 收缩时 9-patch 的行为未定义。在实践中，您会看到 9patch 各个部分的重叠。不要这样做:)

从我在项目中注意到的情况来看，9PNG 就像任何常规 PNG 一样按比例缩小，所以我通常会向我们的设计师请求 和 的整个图像集`ldpi, mdpi, hdpi`，`xhdpi`并且我将它们全部转换为 9 个补丁。

除非有一个非常简单的 9patch，比如一个普通的按钮背景，在拉伸或收缩时没有区别，所以我通常将它放在常规`drawable`文件夹中。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-16T15:41:07.830

我在使用九个补丁图像时遇到了类似的问题：如果我将它放在文件夹中，它在屏幕上`res/drawable`不起作用（它扭曲了图像并失去了透明度）。`ldpi`

我的解决方案是将它放在`res/drawable-nodpi`文件夹中。该文档指出：

> 这可用于您不希望缩放以匹配设备密度的位图资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:24:55.227

只需将 9png 放入 HDPI 文件夹即可。

如果 Galaxy Note 中的效果看起来很奇怪。

请设计师为您提供一个新的 9png XHDPI 文件。然后将新文件放在文件夹 XHDPI 中。

# makefile - 可以在 Makefile 文件中使用的可用变量分配和扩展方法有哪些？

> ID：10428507
> 
> 赞同：1
> 
> 时间：2012-05-03T09:22:09.547
> 
> 标签：makefile

我正在尝试解析一些 Makefile 文件以读取它们的一些配置，并且遇到了各种各样的表达式，例如：

```
AAA := Some, text
BBB_NAME := @AAA@ (c)
CCC = value
DDD = Some other $(CCC) xxx 
```

我想知道所有这些是否有效以及它们之间是否有任何区别（以便我可以正确解析它们）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:18:02.570

它们都是有效的，您可以通过将它们放入 Makefile 并运行它来判断。如果您想知道他们实际采用的值，您可以尝试

```
$(info $(AAA)) 
```

（请注意，唯一真正的问题是`(c)`in `BBB_NAME`，如果将其传递给其他函数，可能会导致问题。）

`=`一个棘手的部分是和`:=`（和其他赋值运算符）之间的区别。完整的细节在[手册](http://www.gnu.org/software/make/manual/make.html#Reading-Makefiles)中，但基本上`:=`一次评估右侧，而`=`推迟到左侧在某处评估。考虑

```
CCC = value
DDD := Some other $(CCC) xxx
EEE = Some other $(CCC) xxx 
```

的值为`DDD`现在`Some other value xxx`，而 EEE 的值为`Some other $(CCC) xxx`。如果你在某处使用它们：

```
$(info $(DDD))
$(info $(EEE)) 
```

使扩展`$(DDD)`和`$(EEE)`相同的东西，你看到

```
Some other value xxx
Some other value xxx 
```

但也有区别：

```
CCC = value
DDD := Some other $(CCC) xxx
EEE = Some other $(CCC) xxx

DDD := $(DDD) and yyy   # This is perfectly legal.
EEE := $(EEE) and yyy   # Infinite recursion. Make will not allow this.

CCC = dimension

$(info $(DDD))          # Produces "Some other value xxx and yyy"
$(info $(EEE))          # Produces "Some other dimension xxx" 
```

# jquery - 使用jQuery按顺序执行动作

> ID：10428509
> 
> 赞同：1
> 
> 时间：2012-05-03T09:22:12.527
> 
> 标签：jquery, fullscreen, sequencing, waitforimages

我在我的页面上使用[fullscreenr](http://nanotux.com/blog/fullscreen/) jQuery 插件。首先，我隐藏图像，然后使用 waitforimage 插件对其运行 fullscreenr，最后使用 fadeIn 显示它：

```
<img id="bgimg" style="display: none;" src="<?php bloginfo('template_url')?>/images/backgrounds/<?php echo $imageData['location']; ?>" />

<script type="text/javascript">
    $bg = $('#bgimg');
    $bg.hide();
    var FullscreenrOptions = {  width: <?php echo $imageData['width']; ?>, height: <?php echo $imageData['height']; ?>, bgID: '#bgimg' };
    $bg.waitForImages(jQuery.fn.fullscreenr(FullscreenrOptions));
    $bg.fadeIn(2500);
</script> 
```

我的问题是，不知何故，有些事情不太正常。这在我的开发盒上运行良好，但是当我尝试在网络上加载页面时，fadeIn 在图像完全加载之前开始。

我尝试向 fullscreenr 函数添加回调，但结果相同。我能做些什么来确保它正常工作？我也尝试使用 $bg.load() 来加载 fullscreenr，但没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:33:49.790

当您有嵌套函数调用时`function2(function1(whatever))`，将首先执行内部函数，然后执行外部函数。因此，在您的情况下，将在 waitForImages 之前应用 fullscreenr() 调用...这将解释该行为。

第二次瞥见我想这就是你想做的

```
$bg.waitForImages(function() {jQuery.fn.fullscreenr(FullscreenrOptions)}); 
```

# android - 如何在启动时启动/启动应用程序 Android

> ID：10428510
> 
> 赞同：42
> 
> 时间：2012-05-03T09:22:15.710
> 
> 标签：android, android-activity, launcher, launching-application

我想在我的平板电脑启动时启动我的应用程序，以便我的应用程序的主要活动是用户在启动平板电脑时看到的第一件事。
我读过 LauncherActivity 但我不明白如何使用它。
任何人都可以为此提供建议、链接或教程吗？
LauncherActivity 是最好的方法还是有其他选择？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-03T09:32:25.360

这些代码行可能对您有帮助...

第一步：在 AndroidManifest.xml 中设置权限

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

第 2 步：在接收器中添加此意图过滤器

```
<receiver android:name=".BootReceiver">
    <intent-filter >
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver> 
```

`onReceive`第 3 步：现在您可以从Receiver 类的方法启动应用程序的第一个活动

```
public class BootReceiver extends BroadcastReceiver {

   @Override
   public void onReceive(Context context, Intent intent) {
       Intent myIntent = new Intent(context, MainActivity.class);
       myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       context.startActivity(myIntent);
   }

} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-03T09:47:07.627

如果您想在平板电脑启动时启动应用程序，您需要监听 BOOT_COMPLETED 操作并对其做出反应。BOOT_COMPLETED 是一个广播动作，在系统完成启动后广播一次。[您可以通过创建一个BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来收听此操作，然后当它接收到带有 BOOT_COMPLETED 操作的意图时启动您的启动 Activity。

将此权限添加到您的清单中：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

在您的项目中创建一个自定义广播接收器：

```
public class MyBroadCastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if(intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)){
            Intent i = new Intent(context, MyActivity.class);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);
        }
    }
} 
```

然后通过将 BroadCastReceiver 添加到清单来修改清单文件：

```
<receiver android:name=".MyBroadcastReceiver">
    <intent-filter>
       <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-20T09:49:38.280

@vishesh chandra 的回答是正确的。但在某些设备上不起作用，因为应用程序默认安装在外部存储上。请确保您指定

`android:installLocation="internalOnly"`

否则，如果应用程序安装在 SD 卡中，您将不会收到任何启动完成操作。将此添加到 manifest.xml 文件中的应用程序标记中，它将起作用。

**用法：**

```
<application
        android:name=".Data.ApplicationData"
        android:allowBackup="true"
        android:hardwareAccelerated="true"
        android:icon="@mipmap/ic_launcher"
        android:installLocation="internalOnly"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/Theme.AppCompat.Light.NoActionBar.FullScreen">
        <!--activities, services...-->
</application> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-30T06:24:10.223

我想在这个我面临几天的问题中补充一点。我尝试了所有答案，但这些对我不起作用。如果您使用的是 android 版本 5.1，请更改这些设置。

如果您使用的是 android 5.1 版，则必须从应用设置中取消选择（限制启动）。

设置>应用>您的应用>限制启动（取消选择）

请看图片。

[![图片](../Images/25c65687eda42e2a25278d2a6dc29a7c.png)](https://i.stack.imgur.com/ZeddU.png)

# sql-server - SQL Server tsql 括号逻辑？

> ID：10428512
> 
> 赞同：0
> 
> 时间：2012-05-03T09:22:24.657
> 
> 标签：sql-server, tsql, logic

（动态查询...）

```
select * from myTable where

(   <--- 

 @param1 IS NULL
                  OR (
                         param1 IN 
                                           ( 
                                              SELECT item
                                              FROM   blabla1
                                           )
                     )
)   <---
and
(   <---

 @param2 IS NULL
                  OR (
                         param2  IN 
                                           ( 
                                              SELECT item
                                              FROM   blabla2
                                           )
                     )
)   <--- 
```

问题 ：

查看标有 的括号`<---`。

我可以删除它们（不影响这里的逻辑）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:28:49.667

`IN`不，您需要这些，但您可以删除语句周围的那些。

```
select * 
from myTable
where
  (@param1 IS NULL OR @param1 IN (SELECT item FROM blabla1))
  and 
  (@param2 IS NULL OR @param2 IN (SELECT item FROM blabla2)) 
```

如果您删除您询问的那些，您将有一个像这样工作的查询

```
select * 
from myTable
where
  param1 IS NULL
  OR
  (param1 IN (SELECT item FROM blabla1)) and param2 IS NULL 
  OR
  (param2 IN (SELECT item FROM blabla2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:32:03.397

@MikaelEriksson 是对的，结果将不一样，因为 AND 运算符的优先级高于 OR 运算符（[msdn](http://msdn.microsoft.com/en-us/library/ms190276.aspx)）。

在您的示例中`(A or A') and (B or B')`，您将得到`A or (A' and B) or B'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:31:38.387

不，您不能删除它们。如果我们删除这些括号，那么它将影响逻辑。

# javascript - 将光标放在文本框中时不出现日期选择器

> ID：10428513
> 
> 赞同：0
> 
> 时间：2012-05-03T09:22:33.260
> 
> 标签：javascript, date, datepicker, mootools

单击时我有两个日期选择器出现`green color`，但是当我将鼠标光标放在这两个文本框上时，只有在单击`image/green color`日期选择器后才会出现任何内容。我应该做什么修改？

在下面的小提琴中，当放置光标时，日期选择器会自动出现：

[http://jsfiddle.net/cBwEK/](http://jsfiddle.net/cBwEK/)

我想在下面的小提琴中添加上述功能：

[http://jsbin.com/unosar/19/edit#javascript,html,live](http://jsbin.com/unosar/19/edit#javascript,html,live)

我正在尝试，但没有任何反应。请问有什么解决办法

**编辑：以上这两个示例都使用相同的 css/js/mootools 脚本**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:34:35.270

两个示例中的代码不同。尝试设置一个更像您的真实代码的示例。尝试在第二个示例中做同样的事情：

```
new DatePicker('.picker', {
     pickerClass: 'picker ',
    allowEmpty: true
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:32:40.977

在文本框上添加一个`click`事件：

```
$$('.date').addEvent('click', function() { 
      dp.show(); 
}); 
```

# java - 您可以将 JFrame 置于全屏独占模式中吗？

> ID：10428517
> 
> 赞同：1
> 
> 时间：2012-05-03T09:22:39.487
> 
> 标签：java, swing, jframe

老实说，我不太知道如何在标题中表达我的问题。因此，如果有人对我要问的内容有更清晰的了解，那么请善待编辑它，以造福人类。

我有以下代码：

```
public class Main {
  public static void main(String[] args) {
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();

    JFrame frame = new JFrame();
    Window window = new Window(frame);

    JButton btn = new JButton("Quit");
    window.add(btn);

    if(gd.isFullScreenSupported())
        gd.setFullScreenWindow(window);

    btn.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gd = ge.getDefaultScreenDevice();
            gd.setFullScreenWindow(null);
        }
    });
} 
```

}

我想做的是制作一个图书馆系统，以全屏模式显示。在全屏模式下，应该有简单的框架窗口，其中包含文本字段等等......这里不需要繁重的 2D/3D 图形......

我的问题是，退出按钮的大小已调整为适合整个屏幕。我尝试在框架、窗口甚至按钮上使用 setBounds、setSize 等……但它似乎无法让我将按钮居中居中。

所以我的问题是：是否可以在设置为全屏独占模式的 JFrame 应用程序窗口内制作 JFrame 应用程序窗口？还是只能将全屏独占模式与绘图等2D/3D方法一起使用？

注意：我打算使用全屏模式的唯一目的是将其设置为黑色背景，并在应用程序中心的黑色背景之上有一个 Jframe 窗口。这是为了给人一种应用程序实际上是一个系统的错觉。

谢谢你。

PS请注意，退出按钮仅用于我自己的测试目的。它不会成为实际系统的一部分，所以我的问题不在于如何调整这个特定的退出按钮的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:01:01.357

全屏独占模式并不意味着内部有 Swing 组件。它是一种在 Java 中绘制图形的高性能方式（如果操作正确，可以尽可能多地受益于底层硬件）。

您可以通过使用未装饰的[JDesktopPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDesktopPane.html)并在屏幕尺寸上最大化它来完成您想要做的事情。然后继续使用[JInternalFrame](http://docs.oracle.com/javase/6/docs/api/javax/swing/JInternalFrame.html)在该 JDesktopPane 内创建一个类似 JFrame 的窗口。

我已经包含了指向相应 API 部分的链接，它们应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:02:35.367

我认为你所追求的是一个 MDI 应用程序。如果那是你之后的样子，你可以看看[这里](http://gilbertadjin.wordpress.com/2009/03/14/creating-mdi-applications-in-java-using-netbeans/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:29:03.353

您的问题是您没有正确使用布局管理器。了解布局管理器 - 在屏幕上放置和调整大小/调整可视组件大小的模块。然后决定你希望你的按钮是什么样子，然后决定使用哪个布局管理器。它会完成它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T04:57:04.217

你知道我也有同样的问题，我从我的经验中唯一知道的是，你可以使用 jinternal 框架并将其属性 undecorated 设置为 true，然后根据你的要求添加自定义标题栏。

# c# - 在 C# 中将文件上传到 Rackspace Cloud Files 时跟踪进度

> ID：10428518
> 
> 赞同：1
> 
> 时间：2012-05-03T09:22:40.857
> 
> 标签：c#, .net, rackspace-cloud, cloudfiles

我正在使用[https://github.com/rackspace/csharp-cloudfiles](https://github.com/rackspace/csharp-cloudfiles)来构建一个命令行工具来将文件上传到 Rackspace Cloud Files。

问题是我不知道如何跟踪上传进度（似乎没有任何类型的事件或其他东西）。

这是代码：

```
// Create credentials, client and connection
var creds = new UserCredentials(username, apiKey);
CF_Client client = new CF_Client();
Connection conn = new CF_Connection(creds, client);
conn.Authenticate();

// Get container and upload file
var container = new CF_Container(conn, client, containerName);
var obj = new CF_Object(conn, container, client, remoteFileName);
obj.WriteFromFile(localFilePath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:34:47.137

看起来没有内置的，不，但您可能会添加自己的。

另一种方法是测量输入；如果您查看[源代码](https://github.com/rackspace/csharp-cloudfiles/blob/master/src/Rackspace.Cloudfiles/CF_Object.cs)，您会发现 WriteFromFile 实际上只是

```
Dictionary<string,string> headers = new Dictionary<string,string>();
using(Stream stream = System.IO.File.OpenRead(localFilePath))
{
    obj.Write(stream, headers);
} 
```

因此您可以将传递给 Write 的流包装在另一个流类中，该流类测量总字节读取进度（如果您搜索，周围有一些，或者很容易自己编写）。如果您确实想从他们的代码中添加进度通知，则需要将其添加到包装的[OpenStack 客户端对象](http://swift.openstack.org/misc.html#swift.common.client.put_object)中，但这也不应该太难。

# php - 使用 php 和 mysql 过滤结果

> ID：10428520
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:22:44.693
> 
> 标签：php, mysql

我想根据以下表格过滤mysql结果

```
www.dabndash.com/filter.php 
```

我一直在尝试的过滤器的mysql代码是：

```
SELECT DISTINCT * FROM paintings 
  WHERE (price BETWEEN '$min_price' AND '$max_price') 
  AND (orientation = '$orientation1' OR orientation = '$orientation2' OR orientation = '$orientation3')
  AND (size_diagonal BETWEEN '$size_min' AND '$size_max')
  AND (primary_color = '$primary_color' AND secondary_color = '$secondary_color') 
```

我不确定为什么查询没有过滤结果。即使用户输入了任何一个字段，它也应该过滤结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:41:58.073

您应该只使用用户选择的参数并从中构建查询。用户似乎可以将方向、大小和原色过滤器留空。

例如，如果`$orientation1`为空，则查询将返回零个结果（假设所有画作的方向均非空。

尝试使用较少的 where 子句运行查询，并验证您是否获得了预期的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T09:31:21.803

```
SELECT DISTINCT * FROM paintings   WHERE (price BETWEEN '$min_price' AND '$max_price') 
                          AND (orientation = '$orientation1' OR orientation = '$orientation2' OR orientation = '$orientation3')
                          AND (size_diagonal BETWEEN '$size_min' AND '$size_max')
                          AND (primary_color = '$primary_color' AND secondary); 
```

# java - 控制音量范围为 0 到 99

> ID：10428521
> 
> 赞同：0
> 
> 时间：2012-05-03T09:22:46.737
> 
> 标签：java, android, audio, android-emulator, audio-streaming

我需要在播放声音时逐渐增加声音的音量。
到目前为止，我发现的是使用**AudioManager**类的**setStreamVolume()**方法。这很好用，但它允许我指定 0 到 9 范围内的音量。但是，我想以更小的单位增加音量，从 0 到 99。

 **有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:58:49.590

我设法用[AudioTrack做到了这一点](http://developer.android.com/reference/android/media/AudioTrack.html#setStereoVolume%28float,%20float%29)**

# math - 模型空间中的光照计算

> ID：10428522
> 
> 赞同：0
> 
> 时间：2012-05-03T09:22:52.560
> 
> 标签：math, opengl, glsl, opengl-4

我有一个每个片段照明的工作，但我想知道如何在模型空间中保持照明计算，我不必在片段着色器中将法线乘以 normalModelMatrix，如下所示。

着色器：ViewMatrix - 相机变换，ModelMatrix - 对象变换。灯光位置 - glm::vec4 lightPos(3.0f, 2.0f, -30.0f, 1.0f)

渲染循环：

```
glUseProgram(ProgramId);
glUniformMatrix4fv(ViewMatrixUniformLocation, 1, GL_FALSE, glm::value_ptr(ViewMatrix));
glUniform4f(lightIntensityUniformLocation, 0.8f, 0.8f, 0.8f, 1.0f);
glUniform4f(ambientIntensityUniformLocation, 0.2f, 0.2f, 0.2f, 0.2f);
glUniform3fv(dirToLightUniformLocation, 1, glm::value_ptr( lightPos));

ModelMatrixStack.push(ModelMatrix);
ModelMatrix = glm::translate(ModelMatrix, glm::vec3(0, 0, -30));
ModelMatrix = glm::rotate(ModelMatrix, 75.0f, glm::vec3(0,0,1)); 
normMatrix = glm::mat3(ModelMatrix);
glUniformMatrix4fv(ModelMatrixUniformLocation, 1, GL_FALSE,           
glm::value_ptr(ModelMatrix));   
glUniformMatrix3fv(normalModelMatrixUniformLocation, 1, GL_FALSE, 
glm::value_ptr(normMatrix));
drawTeapot();

ModelMatrix = ModelMatrixStack.top();
normMatrix = glm::mat3(ModelMatrix);

glUniformMatrix4fv(ModelMatrixUniformLocation, 1, GL_FALSE,  
glm::value_ptr(ModelMatrix));
glUniformMatrix3fv(normalModelMatrixUniformLocation, 1, GL_FALSE,  
glm::value_ptr(normMatrix));
myground.draw();

glUseProgram(0); 
```

顶点着色器：

```
#version 400

layout(location=0) in vec4 in_position;
layout(location=1) in vec3 in_normal;
out vec3 normal;
out vec4 position;

uniform mat4 ModelMatrix;
uniform mat4 ViewMatrix;
uniform mat4 ProjectionMatrix;

void main(void)
{
     vec4 vertexPosition = ModelMatrix * in_position;
     gl_Position = ProjectionMatrix * ViewMatrix * vertexPosition;
     normal = in_normal;
     position = vertexPosition;
} 
```

片段着色器：

```
version 400

in vec3 normal;
in vec4 position;
out vec4 outputColor;

uniform vec3 lightPos;
uniform vec4 lightIntensity;
uniform vec4 ambientIntensity;
uniform mat3 normalModelMatrix;

void main(void)
{
     vec3 normCamSpace = normalize(normalModelMatrix * normalize(normal));
     vec3 dirToLight = normalize(lightPos - vec3(position));
     float cosAngIncidence = dot(normCamSpace, dirToLight);
     cosAngIncidence = clamp(cosAngIncidence, 0, 1);
     outputColor = (lightIntensity * cosAngIncidence) + ambientIntensity;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:26:42.727

在模型空间中进行照明的计算成本实际上比在眼睛空间中更高，因为您必须为每个模型单独转换光的位置和方向。这些通常发生在 CPU 端。然而，你仍然需要对法线进行转换。

> 我不必在片段着色器中将法线乘以 normalModelMatrix 的模型空间，如下所示。

该计算在顶点着色器中也适用。把它移到那里。

* * *

### 更新/编辑

为了澄清，修改后的着色器代码：

顶点着色器：

```
#version 400

layout(location=0) in vec4 in_position;
layout(location=1) in vec3 in_normal;

out vec3 eyespaceNormal;
out vec4 eyespacePosition;

uniform mat4 ModelviewMatrix;
uniform mat3 NormalMatrix; // == inverse(transpose(ModelviewMatrix))
uniform mat4 ProjectionMatrixq;

void main(void)
{
     eyespacePosition = ModelviewMatrix * in_position;
     eyespaceNormal = normalize(NormalMatrix * in_normal);
     gl_Position = ProjectionMatrix * eyespacePosition;
} 
```

片段着色器：

```
#version 400

in vec3 eyespaceNormal;
in vec4 eyespacePosition;
out vec4 outputColor;

uniform vec3 lightPos;
uniform vec4 lightIntensity;
uniform vec4 ambientIntensity;

void main(void)
{
     vec3 dirToLight = normalize(lightPos - vec3(eyespacePosition));
     float cosAngIncidence = dot(eyespaceNormal, dirToLight);
     cosAngIncidence = clamp(cosAngIncidence, 0, 1);
     outputColor = (lightIntensity * cosAngIncidence) + ambientIntensity;
} 
```

* * *

顺便说一句：你正常的变换矩阵是错误的。为此，您必须使用转置模型视图矩阵的逆矩阵。

# javascript - 提交后无法关注stuts2 div中的表单标签

> ID：10428523
> 
> 赞同：0
> 
> 时间：2012-05-03T09:22:52.923
> 
> 标签：javascript, jsp, struts2

我有一个使用选项卡式面板的 struts2 项目。选项卡是 div 中的 jsp 页面。当您第一次选择选项卡时，页面末尾的 javascript 会将焦点设置在所需的输入字段上。一旦您点击提交，尽管选项卡返回时输入字段中没有焦点。我已经对其进行了广泛的调试以查看发生了什么，并且我注意到页面末尾的 javascript 正在运行，但它无法专注于该领域。它可以通过 getElementById 查看该字段，甚至可以获取它的值（我已经使用警报对此进行了测试），但它无法对该字段执行任何操作。它不能通过javascript将文本放入其中。如果我单击另一个选项卡，然后单击返回脚本，焦点将恢复。

选项卡中的提交和文本字段如下：

```
<s:form id="myForm" action="myTabAction.do" method="post" validate="true" >
.
.
.
  <s:submit name="submitz" value="Save" id="billbo"
   formId="myForm" executeScripts="true"
   href="myTabAction.do?submit=Save"
   targets="myTab" showLoadingText="false"
   theme="ajax"  cssClass="buttonSmallClass"
   indicator="loadingImage_case" /> 
 .  
 .  
 .  
 <s:textfield name="testVal" maxlength="80" id="textField" cssClass="textClass"  /> 
```

标签jsp末尾的javascript如下：

```
.
.
.
</s:form>
</table>
<script type="text/javascript">
    var field = document.getElementById("textField");
    field.focus();
</script>   
</body>
</html> 
```

父页面的相关部分是：

```
<s:tabbedPanel selectedTab="%{selectedTabId2}"
 id="CasePartyTabbedPanel" theme="ajax" requiredposition="left"
 cssClass="subTabedpanelClass" cssStyle="width: 710px; height: 200px;" doLayout="false"
 templateCssPath="includes/TabContainer.css">
 .
 .
 .
 <s:div label="My Label" id="myTab" 
   href="MyAction.do?param1=%{paramVal1}&param2=%{paramVal2}"
   theme="ajax" cssStyle="display:none" refreshOnShow="true"
   executeScripts="true" >
   <p>Loading...
  </s:div>
</s:tabbedPanel></td> 
```

我正在使用带有 dojo 的 struts 2.0.9。

我真的需要了解如何在提交后将焦点设置到输入字段。任何帮助将不胜感激。抱歉，如果有点啰嗦，但我想清楚一点。

谢谢

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:45:54.103

只需使用属性`focusElement`

```
<s:form focusElement="textField" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:42:03.657

您可以如下所示更改页面底部的javascript并尝试吗？-

```
<script type="text/javascript">
dojo.ready(function(){
    var field = document.getElementById("textField"); 
    field.focus(); 
});
</script> 
```

当页面加载时，页面底部的 <script> 标签可能会在 dojo 完成初始化之前被执行。这可能会阻止该领域获得关注。因此，您可以在 dojo.ready() 中添加代码以设置焦点，该代码在 dojo 初始化后执行。

# c# - ActionExecutedContext 中的 ActionDescriptor.ActionParameters

> ID：10428524
> 
> 赞同：4
> 
> 时间：2012-05-03T09:22:53.697
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

类中有没有类似`ActionExecutingContext's ActionDescriptor.ActionParameters`属性的东西`ActionExecutedContext`？

我需要在这个阶段（`OnActionExecuted`）调查动作的参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T01:32:01.193

您可以像这样获取参数和值：

```
// Format the parameters based on our requirements: 
StringBuilder parameters = new StringBuilder();
foreach (var p in filterContext.ActionDescriptor.GetParameters())
{
     if (filterContext.Controller.ValueProvider.GetValue(p.ParameterName) != null)
     {
           parameters.AppendFormat("\r\n\t{0}\t\t:{1}", p.ParameterName,
                       filterContext.Controller.ValueProvider.GetValue(p.ParameterName).AttemptedValue);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:36:56.277

你要`ActionExecutedContext.ActionDescriptor.GetParameters()`方法吗？AFAIK 没有这样的`ActionDescriptor.ActionParameters`属性。是因为在您的代码中有一个派生类`ActionDescriptor`吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-28T10:13:14.007

您可以在 OnActionExecuting 方法中获得价值：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{    
  var parameters = filterContext.ActionDescriptor.GetParameters();
  if (parameters.Length >= 1)
  {
    var p = parameters[0];
    var val = filterContext.ActionParameters[p.ParameterName];
    Type type = p.ParameterType;
  }
} 
```

# android - 在android中使用图像滑动动作

> ID：10428525
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:22:54.063
> 
> 标签：android

> **可能重复：**
> [Android：当用户在屏幕上滑动手指时，如何让我的页面滑动？](https://stackoverflow.com/questions/2697799/android-how-can-i-make-my-page-slide-as-the-user-slides-finger-on-the-screen)

我在 drawables 文件夹中有一组图像。我想根据用户滑动操作一一显示。我使用**OnFling()**方法来实现这一点。但它仅在用户完成滑动后才会显示图像。我希望图像应该随着手指动作而移动。谁能建议我最好的主意？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:28:08.920

我会使用 ViewPager，它非常适合横向滑动界面。只需创建一个片段来保存每个图像。

[http://android-developers.blogspot.co.uk/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.co.uk/2011/08/horizontal-view-swiping-with-viewpager.html)

如果您想指示用户正在查看的项目，您可以使用免费的 ViewPagerIndicator

[http://www.viewpagerindicator.com](http://www.viewpagerindicator.com)

# ios - 比较两个 NSNumber 对象

> ID：10428526
> 
> 赞同：28
> 
> 时间：2012-05-03T09:22:58.033
> 
> 标签：ios, comparison, nsnumber

我用这段代码比较了两个 NSNumber 对象，但它从未通过 if 条件。

```
listItems = [appDelegate.productStatus componentsSeparatedByString:@","];

for (int i=0;i<[appDelegate.productArray count]; i++)
{

    for (int j=0; j<[listItems count]; j++) 
    {
        number=[NSNumber numberWithInt:[[listItems objectAtIndex:j] intValue]];
        NSLog(@"number %@",number);
        productObject=[appDelegate.productArray objectAtIndex:i];           
        NSLog(@"%@,%@",productObject.pid,number);
        if (productObject.pid == number) 
        {
            NSLog(@"BUY it!!!");
            [purchasArray addObject:productObject];
        }

    }
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-03T09:30:52.947

我的建议是将其比较为

```
if([productObject.pid intValue] == [number intValue])
{
 NSLog(@"BUY it!!!");
        [purchasArray addObject:productObject];
} 
```

干杯。

我会避免对象比较

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-03T09:26:58.623

更改以下代码..

```
if ([productObject.pid isEqualToNumber number]) 
    {
        NSLog(@"BUY it!!!");
        [purchasArray addObject:productObject];
    } 
```

希望对你有帮助..

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-03T09:25:03.050

尝试**比较**方法而不是'=='。

```
if([1stNum compare:secNum] == NSOrderedSame) 
  {
      // do something
  } 
```

现在告诉我它是否有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T09:27:50.587

像这样使用我的东西这对你有帮助

```
NSNumber *n=[[NSNumber alloc]init];
if([n isEqualToNumber:somenumber])
 {
 } 
```

# iphone - 除 AirPrint SDK 外的 iPhone/iPad 或 iOS 打印 SDK 列表

> ID：10428528
> 
> 赞同：0
> 
> 时间：2012-05-03T09:23:16.923
> 
> 标签：iphone, ios, printing, sdk, airprint

我想要一个打印 SDK 列表，用于通过 iPhone 或 iPad 打印文档、pdf 或图像。

我知道 Apple 从 iOS 4.2 或更高版本提供 AirPrint SDK，但我想知道是否有任何其他 3rd 方付费或免费打印 SDK 可用于打印文档？一个 SDK 我知道 ZebraLink Multiplatform SDK，但它支持一些有限的打印机。

如果有人知道其他SDK，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:59:39.940

您可以在[http://www.google.com/cloudprint/learn/上查看 Google Cloud Print API](http://www.google.com/cloudprint/learn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T13:45:07.597

[https://www.kite.ly](https://www.kite.ly)有一个专用的 iOS 打印 SDK，它可能适合您，具体取决于您的具体用例。虽然您需要为您打印的每份文件（纸张 + 邮资）付费，但它确实消除了首先需要打印机的需要，即您不需要任何基础设施。

*   iOS 打印 SDK：[https ://github.com/OceanLabs/iOS-Print-SDK](https://github.com/OceanLabs/iOS-Print-SDK)

![在此处输入图像描述](../Images/3539c51d49acff835dffa564e87a9653.png)

全面披露：我是该公司的联合创始人，所以有点偏颇，但我们的产品和产品也恰好非常好（特别是从开发人员集成的角度来看），所以我会抓住任何机会大喊大叫；）我们还构建它来解决我们自己的问题，比如你的问题，所以它绝对适用！

我们主要提供高质量、精美的个性化产品，例如照片打印、磁铁、明信片、海报、贴纸、手机壳等，但可以根据您的问题进行常规文档打印。

我们还有：

*   REST 打印 API：[https ://www.kite.ly/docs/1.1/](https://www.kite.ly/docs/1.1/)
*   Android 打印 SDK：[https ://github.com/OceanLabs/Android-Print-SDK](https://github.com/OceanLabs/Android-Print-SDK)

我们的一些合作伙伴也有数百万用户使用我们的服务，因此您将成为好伙伴！

/结束无耻插件；）

# rally - Rally Eclipse 插件不适用于 SSO

> ID：10428529
> 
> 赞同：1
> 
> 时间：2012-05-03T09:23:20.100
> 
> 标签：rally

如果您通过 Single Sign On 登录到 Rally 网站，Rally Eclipse 插件将不起作用。有解决办法吗？如果没有，我在哪里可以提出错误？

此外，这是否会得到修复，或者是否有任何其他适用于 SSO 的桌面 Rally 工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:13:37.843

不幸的是，这是插件的一个已知限制 - 它没有使用可与 SSO 一起使用的基于 SAML 的身份验证的挂钩。现在的解决方法是要求您组织的 Rally 订阅管理员将您从 SSO 的登录“列入白名单”，以便您可以再次使用 Rally 专用凭据进行身份验证。

您可能希望考虑将此作为一个想法发布在[Rally Ideas](http://ideas.rallydev.com)上，以便获得一些牵引力，让 Rally 的连接器/插件能够使用 SSO 进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:02:00.647

我们最近才开始升级 Eclipse 连接器以支持 Rally 的 SSO。因此，您应该在未决的未来版本中拥有它。

~拉里·马切罗内

分析和连接器团队的 Rally 产品负责人

# paypal - 如何创建 Payflow 链接沙盒帐户

> ID：10428531
> 
> 赞同：1
> 
> 时间：2012-05-03T09:23:20.857
> 
> 标签：paypal, payflowlink

我需要为网站创建支付流链接模块，并且需要测试帐户。

我不想购买 Payflow 链接，但我想创建类似 Sandbox 优惠的东西。

有什么办法可以得到吗？

不只是 paypal 沙盒账户，还有 Payflow 链接，带有合作伙伴、商家登录和其他详细信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:15:03.640

Paypal 将停用 Payflow 链接，转而支持网站支付标准版和专业版。我必须注册一个网站支付帐户，然后发送支持票将其更改回 Payflow。在我的支持单中，我解释说我已经有一个使用 Payflow 的应用程序，并且还需要能够对其进行测试。他们会给你一个关于每个人将如何很快升级的技巧，但如果你坚持你必须使用当前的技术（Payflow）进行测试，那么你就会改变你的帐户。

# children - JDOM：获取具有特定名称的所有元素后代（不仅是直接子代）

> ID：10428535
> 
> 赞同：1
> 
> 时间：2012-05-03T09:23:56.627
> 
> 标签：children, jdom, descendant

编辑：问题解决了。根和后代有不同的命名空间。

因此，我试图获取具有特定名称“包含”的根元素的所有后代。

```
 Element root = doc.getRootElement();
    Namespace ns = root.getNamespace();

    ElementFilter ef = new ElementFilter("include", ns);
    Iterator<Element> childrenIter = root.getDescendants(ef);

    LinkedList<String> schemas = new LinkedList<String>();

    while (childrenIter.hasNext()) {
        Element el = childrenIter.next();
        String schemaLocation = el.getAttributeValue("schemaLocation");
        schemas.push(schemaLocation);
    } 
```

不幸的是，while 循环立即退出，hasNext() 返回 null，即使树中有一个“包含”元素。有什么我做错了吗？我也许也可以使用 getChildren() 然后逐级深入，但这更方便。

```
<wsdl:definitions ...>
   <wsdl:types ...>
      <xsd:schema ...>
         <xsd:include schemaLocation="VsbKontoInfoGet_1.xsd"/>
      </xsd:schema>
   </wsdl:types>
   ...
</wsdl:definitions> 
```

编辑：问题解决了。根和后代有不同的命名空间。

# html - 菜单列表项宽度拒绝更改？

> ID：10428537
> 
> 赞同：1
> 
> 时间：2012-05-03T09:23:58.277
> 
> 标签：html, css, menu, height, width

我的CSS代码是...

```
.list {
    position: relative;
    width: 200px;
    margin-left: 110px;
    margin-right: auto;
}
#menucontainer {
    position: relative;
    z-index: 2;
    background: #ffffff;
    width: 1001px;
}
#menu {
    position: relative;
    color: #999999;
    margin: 0px auto;
}
#menu ul {
    list-style-type: none;
}
#menu ul li {
    z-index: 2;
    float: left;
    position: relative;
}
#menu ul li a {
    background-color: #ffffff; 
    width: 91px;
    height: 40px;
    display: block; 
    text-align: center; 
    color: #999999;
    text-decoration: none; 
}
#menu ul li a:hover {
    background: #12aeef; 
    color: #ffffff;
}
#menu ul li ul { 
    display: none; 
}
#menu ul li:hover ul {
    display: block; 
    position: absolute;
}
#menu ul li:hover ul li {
    width: 100px;
    height: 40px;
    overflow: hidden;
}
#doubleline {
    line-height: 20px;
}
#regularline {
    line-height: 40px;
} 
```

我的菜单的html是......

```
<div id="menucontainer">
    <div id="menu">
        <ul>
            <li id="regularline" ><a href=""><b>Home</b></a></li>
            <li id="regularline" ><a href="#"><b>HTML</b></a>
                <ul>
                    <li id="regularline" ><a href="#"><b>Introduction</b></a></li>
                    <li id="doubleline" ><a href="#"><font size="2"><b>Making an HTML File</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Hello World</b></a></li>
                    <li id="regularline" ><a href="#"><b>Body</b></a></li>
                    <li id="regularline" ><a href="#"><b>Font</b></a></li>
                    <li id="regularline" ><a href="#"><b>DIV</b></a></li>
                    <li id="regularline" ><a href="#"><b>Tables</b></a></li>
                    <li id="regularline" ><a href="#"><b>Links</a></li>
                    <li id="regularline" ><a href="#">Images</b></a></li>
                    <li id="doubleline" ><a href="#"><font size="2"><b>Bold, Ittalics, and Underline</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Positioning</b></a></li>
                    <li id="regularline" ><a href="#"><b>Tips and Extras</b></a></li>
                </ul>
            </li>
            <li id="regularline" ><a href="#"><b>PHP</b></a>
                <ul>
                    <li id="regularline" ><a href="#"><b>Introduction</b></a></li>
                    <li id="regularline" ><a href="#"><font size="2"><b>Making a PHP file</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Hello World</b></a></li>
                    <li id="regularline" ><a href="#"><b>Echoing</b></a></li>
                    <li id="regularline" ><a href="#"><b>Variables</b></a></li>
                    <li id="regularline" ><a href="#"><b>If Statements</b></a></li>
                    <li id="regularline" ><a href="#"><b>Functions</b></a></li>
                    <li id="regularline" ><a href="#"><b>Forms</b></a></li>
                    <li id="regularline" ><a href="#"><b>MySQL</b></a></li>
                    <li id="regularline" ><a href="#"><b>Tips and Extras</b></a></li>
                </ul>
            </li>
            <li id="regularline" ><a href="#"><b>Java</b></a>
                <ul>
                    <li id="regularline" ><a href="#"><b>Introduction</b></a></li>
                    <li id="regularline" ><a href="#"><b>Using Java</b></a></li>
                    <li id="regularline" ><a href="#"><b>Hello World</b></a></li>
                    <li id="regularline" ><a href="#"><b>Variables</b></a></li>
                    <li id="regularline" ><a href="#"><b>Functions</b></a></li>
                    <li id="regularline" ><a href="#"><b>Alerts</b></a></li>
                    <li id="regularline" ><a href="#"><font size="2"><b>Getting Elements</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Mouse Events</b></a></li>
                    <li id="regularline" ><a href="#"><b>Tips and Extras</b></a></li>
                </ul>
            </li>
            <li id="regularline" ><a href="#"><b>JQuery</b></a>
                <ul>
                    <li id="regularline" ><a href="#"><b>Introduction</b></a></li>
                    <li id="regularline" ><a href="#"><b>Using JQuery</b></a></li>
                    <li id="regularline" ><a href="#"><b>Hello World</b></a></li>
                    <li id="regularline" ><a href="#"><b>Variables</b></a></li>
                    <li id="regularline" ><a href="#"><b>Functions</b></a></li>
                    <li id="regularline" ><a href="#"><b>Alerts</b></a></li>
                    <li id="regularline" ><a href="#"><font size="2"><b>Getting Elements</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Mouse Events</b></a></li>
                    <li id="regularline" ><a href="#"><b>Tips and Extras</b></a></li>
                </ul>
            </li>
            <li id="regularline" ><a href="#"><b>CSS</b></a>
                <ul id="regularline" >
                    <li id="regularline" ><a href="#"><b>Introduction</b></a></li>
                    <li id="regularline" ><a href="#"><font size="2"><b>Making a CSS File</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Hello World</b></a></li>
                    <li id="regularline" ><a href="#"><b>Classes</b></a></li>
                    <li id="regularline" ><a href="#"><font size="2"><b>Getting Elements</b></font></a></li>
                    <li id="regularline" ><a href="#"><b>Hover</b></a></li>
                    <li id="regularline" ><a href="#"><b>Tips and Extras</b></a></li>
                </ul>
            </li>
            <li id="regularline" ><a href="../code_editor/"><b>Code Editor</b></a></li>
            <li id="regularline" ><a href="sign_in/"><b>Sign In</b></a></li>
            <li id="regularline" ><a href="register/"><b>Register</b></a></li>
            <li id="regularline" ><a href="#"><b>Forums</b></a></li>
            <li id="regularline" ><a href="#"><b>Contact Us</b></a></li>
        </ul>
    </div>
</div> 
```

现在由于某种原因我不能改变第二层的宽度。

```
#menu ul li:hover ul li {
    width: 100px;
    height: 40px;
    overflow: hidden;
} 
```

是它应该改变的地方。作为测试，我将其设置为 100px 而不是父母身上的 91。高度变化很好，但宽度拒绝。请帮忙，我很难过。/b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:55:13.950

这将解决您`#menu ul li:hover ul li a { width: 200px; height: 40px; overflow: hidden; }`需要在 sub ul li 上指定 a 的问题。我希望这有帮助。

编辑：您还需要像这样向 ul li ul 添加宽度`#menu ul li:hover ul { width: 200px; }`

# c# - 如何更改 PropertyGrid 控件的边框颜色（或删除边框）？

> ID：10428539
> 
> 赞同：7
> 
> 时间：2012-05-03T09:24:03.610
> 
> 标签：c#, .net, winforms, propertygrid

拥有一个标准的 WinForms 2.0[`PropertyGrid`控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.aspx)，我正在寻找一种方法来更改控件的边框颜色或完全删除边框。

![在此处输入图像描述](../Images/f8e61685ebbf96887684c8c0e4403011.png)

我知道不幸的是只改变了单元格之间的内部边界的[`LineColor`属性。](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid.linecolor.aspx)

此外，我使用[ILSpy](http://ilspy.net)查看了`PropertyGrid`控件的源代码，但仍然没有发现对我有意义的内容。

**我的问题是：**

如何删除`PropertyGrid`控件的外边框或更改外边框的颜色？

**2012-05-04 更新 - 解决方案（又名“hack”）：**

根据[Jamie 的回答](https://stackoverflow.com/a/10445278/107625)，我组装了一个可行的解决方案（[您可以从这里下载](http://www.codeproject.com/script/Membership/Uploads/235/TestBorderlessPropertyGrid.zip)）：

![在此处输入图像描述](../Images/7f397726fde25345dbc80f1e2ee3dbe1.png)

这个想法是将属性网格放置在面板内，并让面板剪辑控件。

通过这种方法，我确实将剪切面板放入另一个面板中，该面板具有`Padding`“1”（或任何您想要的边框），并为该面板提供了一个`BackColor`用作边框颜色（在我的示例中为绿色）的面板。

将属性网格的 Anchor 设置为“Left, Right, Top, Bottom”，将`Dock`剪切面板的 Anchor 设置为“Full”。

![在此处输入图像描述](../Images/cd90a77846ff2479669e3ef242c62555.png)

这很适合我的要求。我认为这是一种 hack，因为它消耗了我希望可以保存的两个面板的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:24:29.320

这是另一种选择，因为我的第一个答案似乎不适合这种特定的控制。这是一个肮脏的把戏，但应该有效：

在您的窗口或对话框中放置一个面板控件，假设大小为 100H x 300V。将 propertygrid 放在面板内，位置为 -1,-1，大小为 102,302。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-31T12:13:45.510

这是我的项目中的代码

PropertyGrid 有两个需要处理的控件。
+ doccomment 是文档帮助。
+ gridView 显示属性值。

这些控件使用颜色 ControlDark 绘制边框矩形。

我们需要用 HelpBackColor 和 LineColor 重新绘制矩形以使视图清晰。

```
 namespace Bravo.Bravo7.UI
    {
        public class MyPropertyGrid : PropertyGrid
        {
            public class SnappableControl : NativeWindow
            {
                private Control _parent;
                private MyPropertyGrid _ownerGrid;

                public SnappableControl(Control parent, MyPropertyGrid ownerGrid)
                {
                    _parent = parent;
                    _parent.HandleCreated += _parent_HandleCreated;
                    _parent.HandleDestroyed += _owner_HandleDestroyed;

                    _ownerGrid = ownerGrid;
                }

                protected override void WndProc(ref Message m)
                {
                    base.WndProc(ref m);

                    switch (m.Msg)
                    {
                        case (int)NativeMethods.WM_NCPAINT:
                        case (int)NativeMethods.WM_PAINT:

                            using (var g = _parent.CreateGraphics())
                            {
                                using (var pen = new Pen(_ownerGrid.HelpBackColor))
                                {
                                    var clientRectangle = _parent.ClientRectangle;
                                    clientRectangle.Width--;
                                    clientRectangle.Height--;
                                    g.DrawRectangle(pen, clientRectangle);
                                }
                            }

                            break;
                    }
                }

                void _owner_HandleDestroyed(object sender, EventArgs e)
                {
                    ReleaseHandle();
                }

                void _parent_HandleCreated(object sender, EventArgs e)
                {
                    AssignHandle(_parent.Handle);
                }
            }

            public class PropertyGridView : NativeWindow
            {
                private Control _parent;
                private MyPropertyGrid _ownerGrid;

                public PropertyGridView(Control parent, MyPropertyGrid ownerGrid)
                {
                    _parent = parent;
                    _parent.HandleCreated += _owner_HandleCreated;
                    _parent.HandleDestroyed += _owner_HandleDestroyed;

                    _ownerGrid = ownerGrid;
                }

                protected override void WndProc(ref Message m)
                {
                    base.WndProc(ref m);

                    switch (m.Msg)
                    {
                        case (int)NativeMethods.WM_NCPAINT:
                        case (int)NativeMethods.WM_PAINT:

                            using (var g = _parent.CreateGraphics())
                            {
                                using (var pen = new Pen(_ownerGrid.LineColor))
                                {
                                    g.DrawRectangle(pen, 0, 0, _parent.Width - 1, _parent.Height - 1);
                                }
                            }

                            break;
                    }
                }

                void _owner_HandleDestroyed(object sender, EventArgs e)
                {
                    ReleaseHandle();
                }

                void _owner_HandleCreated(object sender, EventArgs e)
                {
                    AssignHandle(_parent.Handle);
                }
            }

            public class MyToolStripRenderer : ToolStripSystemRenderer
            {
                protected override void OnRenderToolStripBorder(ToolStripRenderEventArgs e)
                {
                    //base.OnRenderToolStripBorder(e);
                }
            }

            public MyPropertyGrid()
            {
                base.LineColor = SystemColors.Control;
                base.ViewBackColor = Color.FromArgb(246, 246, 246);

                base.DrawFlatToolbar = true;
                base.ToolStripRenderer = new MyToolStripRenderer();

                var docDocument = typeof(PropertyGrid)
                    .GetField("doccomment", BindingFlags.NonPublic | BindingFlags.Instance)
                    .GetValue(this) as Control;

                new SnappableControl(docDocument, this);

                var gridView = typeof(PropertyGrid)
                    .GetField("gridView", BindingFlags.NonPublic | BindingFlags.Instance)
                    .GetValue(this) as Control;

                new PropertyGridView(gridView, this);
            }

        }

    } 
```

[![截屏](../Images/3cf227c01c8d4de5919d752b05528eaf.png)](https://i.stack.imgur.com/F2gv8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:01:46.050

为此，您将需要一些互操作性：

```
[DllImport("User32", CharSet=CharSet.Auto)]
private static extern int SetWindowLong(IntPtr hWnd, int Index, int Value);
[DllImport("User32", CharSet=CharSet.Auto)]
private static extern int GetWindowLong(IntPtr hWnd, int Index);

int GWL_STYLE = -16;
int WS_BORDER = 0x00800000;
IntPtr hWnd = yourPropertyGrid.Handle;

int style = GetWindowLong(hWnd, GWL_STYLE);
style = style & ~WS_BORDER;
SetWindowLong(hWnd, GWL_STYLE, style); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T10:06:12.073

此代码有效。

```
private void SetHelpBoderColor(bool showBorder)
{
    if (showBorder)
    {
        //Set Default ViewBackColor
        PropertyInfo viewBackColor = this.propertyGrid.GetType().GetProperty("ViewBorderColor");
        if (viewBackColor != null)
            viewBackColor.SetValue(this.propertyGrid, SystemColors.ControlDark, null);

        //Set Default HelpBorderColor
        PropertyInfo helpBorderColor = this.propertyGrid.GetType().GetProperty("HelpBorderColor");
        if (helpBorderColor != null)
            helpBorderColor.SetValue(this.propertyGrid, SystemColors.ControlDark, null);

    }
    else
    {
        //Set ViewBackColor
        PropertyInfo viewBackColor = this.propertyGrid.GetType().GetProperty("ViewBorderColor");
        if (viewBackColor != null)
            viewBackColor.SetValue(this.propertyGrid, SystemColors.Control, null);

        //Set HelpBorderColor
        PropertyInfo helpBorderColor = this.propertyGrid.GetType().GetProperty("HelpBorderColor");
        if (helpBorderColor != null)
            helpBorderColor.SetValue(this.propertyGrid, SystemColors.Control, null);
    }

    if (DesignMode)
    {
        Parent.Refresh();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-23T12:42:33.350

一种快速直观的解决方案是创建*父面板*和*子面板*，如下图所示：

[![在此处输入图像描述](../Images/87cab0d9de2bb0579d242e65d2531657.png)](https://i.stack.imgur.com/3uAJO.png)

# android - 如何获得SIM卡内存的大小？

> ID：10428540
> 
> 赞同：1
> 
> 时间：2012-05-03T09:24:07.737
> 
> 标签：android, sim-card

我想知道如何获取 SIM 卡内存的大小以及已使用了多少内存。

# photoshop - 在 Photoshop 中选择和合并图层

> ID：10428543
> 
> 赞同：3
> 
> 时间：2012-05-03T09:24:14.770
> 
> 标签：photoshop, extendscript

我想明确选择多个图层（通过引用，而不是通过名称或其他任何涉及重新搜索我已经引用过的内容！）并将它们合并到 Adob​​e 的 Javascript（又名 Extendscript）中。

我可以设置文档的 activeLayer，但它不会占用图层数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:58:16.103

您正在寻找的是 LayerSet 对象，它指的是一组图层，包括嵌套的 LayerSet 的[-Photoshop Javascript Reference](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/photoshop/pdfs/cs6/Photoshop-CS6-JavaScript-Ref.pdf)。您可以使用如下命令操作图层集中的所有图层：

```
LayerSet.merge(); 
```

# android - 带标题的分隔 ListView

> ID：10428544
> 
> 赞同：0
> 
> 时间：2012-05-03T09:24:15.207
> 
> 标签：android, list, header, adapter

我正在尝试创建一个使用 json 提要填充自身的动态列表。
我想为每个部分添加一个标题，以防联赛名称当前 json 提要通过一个联赛名称提供，但我需要使列表动态化以防添加另一个。

将来这是我正在寻找的那种布局。

联赛名称 项目 项目 项目 联赛名称 2 项目 项目 项目

我试图让它工作，但我得到了一个`NullPointerException`，我不知道为什么？
希望我已经足够简洁，任何帮助都会受到重视。

到目前为止，这是我的代码：

活动

```
try{

   JSONObject obj = new JSONObject(FullData);

   JSONObject objData = obj.getJSONObject("data");

   JSONArray jArray = objData.getJSONArray("structure");

   //   JSONArray DivisionsArray = oneObject.getJSONArray("divisions");

//      for (int d=0; d < DivisionsArray.length(); d++){

  //        JSONObject DivDict = DivisionsArray.getJSONObject(d);   
    //      leagues.add(DivDict.getString("name"));

    //}

   //setListAdapter ( new ArrayAdapter<String>(this, R.layout.single_item, leagues));

   //ListView list = getListView();
    //list.setTextFilterEnabled(true);

// Create the ListView Adapter
    adapter = new SeparatedListAdapter(this);
    ArrayAdapter<String> listadapter = new ArrayAdapter<String>(this, R.layout.list_item, notes);
     List<String> leagues = new ArrayList<String>();
    // Add Sections
    for (int i = 0; i < jArray.length(); i++)
        {

        JSONObject oneObject = jArray.getJSONObject(i);   
        leagues.add(oneObject.getString("league_website_name"));
        Log.d("lc", "leagues: " + leagues);
            adapter.addSection(leagues, listadapter);
        }

    // Get a reference to the ListView holder
    journalListView = (ListView) this.findViewById(R.id.list_item_title);

    // Set the adapter on the ListView holder
    journalListView.setAdapter(adapter);

    // Listen for Click events
    journalListView.setOnItemClickListener(new OnItemClickListener()
        {
            public void onItemClick(AdapterView<?> parent, View view, int position, long duration)
                {
                    String item = (String) adapter.getItem(position);
                    Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();
                }
        });

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    }
} 
```

分离式列表适配器

```
public class SeparatedListAdapter extends BaseAdapter
    {
        public final Map<String, Adapter> sections = new LinkedHashMap<String, Adapter>();
        public final ArrayAdapter<String> headers;
        public final static int TYPE_SECTION_HEADER = 0;

        public SeparatedListAdapter(Context context)
            {
                headers = new ArrayAdapter<String>(context, R.layout.list_header);
            }

        public void addSection(String section, Adapter adapter)
            {
                this.headers.add(section);
                this.sections.put(section, adapter);
            }

        public Object getItem(int position)
            {
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) return section;
                        if (position < size) return adapter.getItem(position - 1);

                        // otherwise jump into next section
                        position -= size;
                    }
                return null;
            }

        public int getCount()
            {
                // total together all sections, plus one for each section header
                int total = 0;
                for (Adapter adapter : this.sections.values())
                    total += adapter.getCount() + 1;
                return total;
            }

        @Override
        public int getViewTypeCount()
            {
                // assume that headers count as one, then total all sections
                int total = 1;
                for (Adapter adapter : this.sections.values())
                    total += adapter.getViewTypeCount();
                return total;
            }

        @Override
        public int getItemViewType(int position)
            {
                int type = 1;
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) return TYPE_SECTION_HEADER;
                        if (position < size) return type + adapter.getItemViewType(position - 1);

                        // otherwise jump into next section
                        position -= size;
                        type += adapter.getViewTypeCount();
                    }
                return -1;
            }

        public boolean areAllItemsSelectable()
            {
                return false;
            }

        @Override
        public boolean isEnabled(int position)
            {
                return (getItemViewType(position) != TYPE_SECTION_HEADER);
            }

        public View getView(int position, View convertView, ViewGroup parent)
            {
                int sectionnum = 0;
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) return headers.getView(sectionnum, convertView, parent);
                        if (position < size) return adapter.getView(position - 1, convertView, parent);

                        // otherwise jump into next section
                        position -= size;
                        sectionnum++;
                    }
                return null;
            }

        public long getItemId(int position)
            {
                return position;
            }

        public void addSection(List<String> leagues,
                ArrayAdapter<String> listadapter) {
            // TODO Auto-generated method stub

        }

    } 
```

list_complex.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- list_complex.xml -->
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"
    android:paddingLeft="15dip"
    >
    <TextView
        android:id="@+id/list_complex_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        />
    <TextView
        android:id="@+id/list_complex_caption"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceSmall"
        />
</LinearLayout> 
```

list_header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_header_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!-- list_item.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_item_title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"
    android:paddingLeft="15dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:30:47.700

我认为

```
 ExpandableListView 
```

对你有用 你可以看demo

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:29:13.833

合并标题布局和列表项布局

```
<RelativeLayout
    <TextView
        android:id="@+id/header
        android:visible="gone"/>
    <TextView
        android:id="@+id/your_content/>
</RelativeLayout> 
```

当您想显示节标题时，

设置本节第一项的标题视图。

# c++ - 如何在从 QDeclarativeView 收到的 QML 对象上设置事件监听器？

> ID：10428549
> 
> 赞同：0
> 
> 时间：2012-05-03T09:24:46.030
> 
> 标签：c++, qt, qml

我们有一个我们在主程序中实例化的对象并将其传递给 QML 视图。定义了一个`Q_PROPERTY`. 我想知道如何设置事件监听器来`NOTIFY`发出信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:06:07.403

如果我理解正确，[这个 Qt DevNet 论坛帖子](http://qt-project.org/forums/viewthread/9657)的设置与您的类似。只有在这种情况下，他们才定义`READ`依次发出`somethingHappened`信号的函数。确保一直向下滚动到工作示例的最后一条评论。

总之，您在 C++ 头文件中定义了类似的内容：

```
class SomeClass : public QObject {
Q_OBJECT
   Q_PROPERTY(sometype someProperty READ getSomeProperty NOTIFY somePropertyChanged)
signals:
  void somePropertyChanged();
 };
QML_DECLARE_TYPE(SomeClass) 
```

在你的 C++ 主要方法中是这样的：

```
qmlRegisterType<SomeClass>("SomeModule", 1, 0, "SomeClass");
SomeClass myObj;
QDeclarativeView view;
view.rootContext()->setContextProperty("rootItem", (SomeClass *)&myObj); 
```

然后在 QML 方面，您将像这样处理它：

```
import SomeModule 1.0

SomeClass {
    onSomePropertyChanged: {
      // do stuff
    }
} 
```

# python - 提取 Debian 软件包的描述

> ID：10428555
> 
> 赞同：1
> 
> 时间：2012-05-03T09:25:06.653
> 
> 标签：python, debian-based

我正在尝试使用 Python 从 Packages.gz 文件中提取 debian 包的描述。有没有办法只获取包的描述，即Description: 字段后的内容。

源文件是：

```
Package: 2vcard
Priority: optional
Section: utils
Installed-Size: 108
Maintainer: Martin Albisetti <argentina@gmail.com>
Architecture: all
Version: 0.5-3
Filename: pool/main/2/2vcard/2vcard_0.5-3_all.deb
Size: 14300
MD5sum: d831fd82a8605e9258b2314a7d703abe
SHA1: e903a05f168a825ff84c87326898a182635f8175
SHA256: 2be9a86f0ec99b1299880c6bf0f4da8257c74a61341c14c103b70c9ec04b10ec
Description: perl script to convert an addressbook to VCARD file format
 2vcard is a little perl script that you can use to convert the
 popular vcard file format. Currently 2vcard can only convert addressbooks
 and alias files from the following formats: abook,eudora,juno,ldif,mutt,
 mh and pine.
 .
 The VCARD format is used by gnomecard, for example, which is used by the
 balsa email client.
Tag: implemented-in::perl, role::program, use::converting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:41:08.270

也许[http://pypi.python.org/pypi/python-debian](http://pypi.python.org/pypi/python-debian)会有所帮助？

详细地说，假设`data`是一个包含源文件内容的字符串，那么：

```
from debian import deb822
print deb822.Deb822(data.split("\n"))['Description'] 
```

将输出描述

# javascript - 如何获取javascript事件源元素？

> ID：10428562
> 
> 赞同：46
> 
> 时间：2012-05-03T09:25:35.570
> 
> 标签：javascript, jquery, html

有没有办法检索内联 javaScript 调用的元素源？

我有一个这样的按钮：

```
<button onclick="doSomething('param')" id="id_button">action</button> 
```

笔记：

*   该按钮是从服务器生成的
*   我无法修改生成过程
*   页面上生成了几个按钮，我只能在客户端进行控制。

我试过的：

```
function doSomething(param){
    var source = event.target || event.srcElement;
    console.log(source);
} 
```

在萤火虫上，我得到**事件未定义**

编辑：在一些答案之后，使用 jQuery 覆盖事件处理是非常可以接受的。我的问题是如何在不知道函数名称的情况下使用原始参数调用原始 onClick 函数。

代码：

```
<button onclick="doSomething('param')" id="id_button1">action1</button>
<button onclick="doAnotherSomething('param1', 'param2')" id="id_button1">action2</button>.
<button onclick="doDifferentThing()" id="id_button3">action3</button>
.
.
and so on.. 
```

所以覆盖将是：

```
$(document).on('click', 'button', function(e) {
  e.preventDefault();
  var action = $(this).attr('onclick');
  /**
   * What to do here to call
   * - doSomething(this, 'param'); if button1 is clicked
   * - doAnotherSomething(this, 'param1', 'param2'); if button2 is clicked
   * - doDifferentThing(this); if button3 is clicked
   * there are many buttons with many functions..
   */
}); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-03T09:31:16.500

你的 html 应该是这样的：

```
<button onclick="doSomething" id="id_button">action</button> 
```

并将您的输入参数重命名为这样的事件

```
function doSomething(event){
    var source = event.target || event.srcElement;
    console.log(source);
} 
```

会解决你的问题。

作为旁注，我建议看看 jQuery 和 unobtrusive javascript

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-03T09:39:55.093

您应该将生成的 HTML 更改为不使用内联 javascript，`addEventListener`而是使用。

如果您**不能**以任何方式更改 HTML，您可以获取`onclick`属性、使用的函数和参数，并将其“转换”为不显眼的 javascript，而不是通过删除`onclick`处理程序和使用事件侦听器。

我们首先从属性中获取值

```
$('button').each(function(i, el) {
    var funcs = [];

	$(el).attr('onclick').split(';').map(function(item) {
    	var fn     = item.split('(').shift(),
        	params = item.match(/\(([^)]+)\)/), 
            args;

        if (params && params.length) {
        	args = params[1].split(',');
            if (args && args.length) {
                args = args.map(function(par) {
            		return par.trim().replace(/('")/g,"");
            	});
            }
        }
        funcs.push([fn, args||[]]);
    });

    $(el).data('args', funcs); // store in jQuery's $.data

    console.log( $(el).data('args') );
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button onclick="doSomething('param')" id="id_button1">action1</button>
<button onclick="doAnotherSomething('param1', 'param2')" id="id_button1">action2</button>.
<button onclick="doDifferentThing()" id="id_button3">action3</button>
```

这给了我们一个由属性调用的所有和任何全局方法的数组`onclick`，以及传递的参数，所以我们可以复制它。

然后我们只需删除所有内联 javascript 处理程序

```
$('button').removeAttr('onclick') 
```

并附加我们自己的处理程序

```
$('button').on('click', function() {...} 
```

在这些处理程序中，我们将获取存储的原始函数调用及其参数，然后调用它们。
我们知道内联 javascript 调用的任何函数都是全局的，我们可以用 调用它们`window[functionName].apply(this-value, argumentsArray)`，所以

```
$('button').on('click', function() {
    var element = this;
    $.each(($(this).data('args') || []), function(_,fn) {
        if (fn[0] in window) window[fn[0]].apply(element, fn[1]);
    });
}); 
```

在那个点击处理程序中，我们可以在调用原始函数之前或之后添加我们想要的任何内容。

一个工作示例

```
$('button').each(function(i, el) {
    var funcs = [];

	$(el).attr('onclick').split(';').map(function(item) {
    	var fn     = item.split('(').shift(),
        	params = item.match(/\(([^)]+)\)/), 
            args;

        if (params && params.length) {
        	args = params[1].split(',');
            if (args && args.length) {
                args = args.map(function(par) {
            		return par.trim().replace(/('")/g,"");
            	});
            }
        }
        funcs.push([fn, args||[]]);
    });
    $(el).data('args', funcs);
}).removeAttr('onclick').on('click', function() {
	console.log('click handler for : ' + this.id);

	var element = this;
	$.each(($(this).data('args') || []), function(_,fn) {
    	if (fn[0] in window) window[fn[0]].apply(element, fn[1]);
    });

    console.log('after function call --------');
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<button onclick="doSomething('param');" id="id_button1">action1</button>
<button onclick="doAnotherSomething('param1', 'param2')" id="id_button2">action2</button>.
<button onclick="doDifferentThing()" id="id_button3">action3</button>

<script>
	function doSomething(arg) { console.log('doSomething', arg) }
    function doAnotherSomething(arg1, arg2) { console.log('doAnotherSomething', arg1, arg2) }
    function doDifferentThing() { console.log('doDifferentThing','no arguments') }
</script>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-17T19:37:02.040

## 跨浏览器解决方案

我相信@slipset 的解决方案是正确的，它不需要 jQuery，**但**它还没有准备好跨浏览器。

根据[Javascript.info](http://javascript.info/tutorial/obtaining-event-object)，事件（当在标记事件之外引用时）一旦你确保它是用这个简单的行定义的，就可以跨浏览器准备好`event = event || window.event`：

所以完整的跨浏览器就绪函数如下所示：

```
function logMySource(param){
  event = event || window.event;
  var source = event.target || event.srcElement;
  console.log("sourceID= "+source.id,"\nsourceTagName= "+source.tagName,"\nparam= "+param);
}
```

```
<button onclick="logMySource('myVariable')" id="myID">action</button>
```

尝试一下！我已经包含了来源有用信息的返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T09:32:44.220

`this`调用函数时可以通过

```
<button onclick="doSomething('param',this)" id="id_button">action</button>

<script>
    function doSomething(param,me){

    var source = me
    console.log(source);
}
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T10:47:56.607

尝试这样的事情：

```
<html>
  <body>

    <script type="text/javascript">
        function doSomething(event) {
          var source = event.target || event.srcElement;
          console.log(source);
          alert('test');
          if(window.event) {
            // IE8 and earlier
            // doSomething
           } else if(e.which) {
            // IE9/Firefox/Chrome/Opera/Safari
            // doSomething
           }
        }
     </script>

    <button onclick="doSomething('param')" id="id_button">
      action
    </button>

  </body>      
</html> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-03T09:30:03.377

使用 [.live()](http://api.jquery.com/live/)

```
 $(selector).live(events, data, handler); 
```

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

```
$(document).on(events, selector, data, handler); 
```

# actionscript-3 - 在 flex 中为分层数据网格中的子行添加边框

> ID：10428568
> 
> 赞同：0
> 
> 时间：2012-05-03T09:25:54.147
> 
> 标签：actionscript-3, apache-flex, flex4

我有一个带有层次数据的高级数据网格，我需要显示特殊的边框子行。所有的 chikld 行都应该在单独的边框中可见。这是否可以为仅子元素绘制特殊边框？[请在此处](http://i45.tinypic.com/m99fr8.jpg)查看附件图片

# javascript - 使javascript外部化

> ID：10428569
> 
> 赞同：1
> 
> 时间：2012-05-03T09:25:57.593
> 
> 标签：javascript

我的测试版网站中有太多的 javascript，这将是真正的，所以我想的是让 javascript 外部化，但这会引发一些非常重要的问题。

1.  外部 javascript 的标准大小是多少（例如，每个文件不应超过 50KB）。
2.  如果上述问题的回答是大小无关紧要，那么应该制作多少个javascript文件，那么这是否意味着我应该将所有脚本（包括Jquery库）放在一个外部文件中？
3.  如果一个 javascript 已经被缩小并且它添加了其他未缩小的文件，它会影响已经缩小的文件吗？
4.  什么是 Javascript 和 CSS 的最佳缩小器（保持标准的最佳方法）。
5.  如果我将外部脚本放在后面`<body>`是否足够好？（好像我降低了一些脚本可能会停止工作）。

如果您想查看[http://bloghutsbeta.blogspot.com/ ，这是测试网站的链接](http://bloghutsbeta.blogspot.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:39:11.727

1.  每个人说没有“标准大小”，但将文件大小保持在最低限度总是好的。例如，Gmail、Google Maps 等会加载许多 MB 的 Javascript。
2.  一般来说，JS 文件越少越好，因为与为它们提供服务的 Web 服务器的连接数会减少，从而减少负载。
3.  不，混合缩小和未缩小的文件应该不是问题。
4.  JSMin 和 UglifyJS 是流行的压缩器。
5.  您应该将您的执行附加到适当的事件，例如`document.ready`这样脚本不会因为页面没有完全加载而停止工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:30:22.917

> 外部 javascript 的标准大小是多少（例如，每个文件不应超过 50KB）。

没有一个。

> 如果上述问题的回答是大小无关紧要，那么应该制作多少个javascript文件，那么这是否意味着我应该将所有脚本（包括Jquery库）放在一个外部文件中？

一般来说，越少越好。也有例外。（例如，从访问者可能已经有缓存副本的公共 CDN 加载 jQuery 可能更有效）。

> 如果一个 javascript 已经被缩小并且它添加了其他未缩小的文件，它会影响已经缩小的文件吗？

如果处理得当，则不会。

> 什么是 Javascript 和 CSS 的最佳缩小器（保持标准的最佳方法）。

主观。

> 如果我将外部脚本放在后面是否足够好？（好像我降低了一些脚本可能会停止工作）。

这取决于脚本。一些思想流派说你应该预先加载所有标记（如果脚本“停止工作”然后修复脚本），其他人说他们应该尽快使用事件委托注册事件处理程序，这样用户就不会与那些在页面完成加载之前没有与 JS 连接。

# ubuntu - 尝试在 ubuntu 中构建我的内核时出错

> ID：10428573
> 
> 赞同：0
> 
> 时间：2012-05-03T09:26:18.083
> 
> 标签：ubuntu, makefile, kernel

我正在尝试在我的系统上编译一些东西，但它首先需要构建我的内核......

无论如何，我进入内核目录并通过键入 make 命令构建它并得到这个错误..

```
 CHK     include/linux/version.h
 CHK     include/generated/utsrelease.h
 make[1]: *** No rule to make target `kernel/bounds.c', needed by `kernel/bounds.s'.  Stop. 
```

我当然搜索了它，所有包含相同错误的线程都建议almots相同的东西，我尝试了它们没有用......

例如[这里](http://ubuntuforums.org/archive/index.php/t-1047374.html)..

任何熟悉该问题的人都可以帮助我吗？

PS我确实有文件bounds.s但没有.c，我的内核版本是：

linux-headers-2.6.38-8-generic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T04:03:26.873

听起来你没有完整的来源。bounds.c 应该在 /usr/src/linux-source-2.6.38/kernel 中。

```
 xxxxx@ubuntu:/usr/src/linux-source-2.6.32/kernel$ ls bounds.c
    bounds.c
    xxxxx@ubuntu:/usr/src/linux-source-2.6.32/kernel$ 
```

我会回到第一格并获取源并放气，然后检查 bounds.c。存档中有 100 个文件，如果您丢失了一个，您可能会丢失其他文件。

# drupal - 在drupal中只创建有限数量的页面

> ID：10428579
> 
> 赞同：0
> 
> 时间：2012-05-03T09:26:41.700
> 
> 标签：drupal, permissions

在drupal中我是否可以允许用户只创建有限数量的页面。

例如。

我想授予用户仅添加 5 个页面的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:07:35.333

有一个模块：[节点限制](http://drupal.org/project/node_limit)

> 节点限制模块允许管理员限制角色或用户可以创建的特定类型的节点数量。

# php - 密码更新 - PHP、Jquery、Ajax

> ID：10428582
> 
> 赞同：0
> 
> 时间：2012-05-03T09:26:47.673
> 
> 标签：php, jquery, ajax

我对 PHP/Jquery 很陌生，我正在尝试为我的网站做一个更新密码脚本。到目前为止，密码已更新，但我正在努力思考如何验证它以检查旧密码。

此外，如何在警报框中显示错误消息（如 java 警报窗口）。我问的原因是因为如果旧密码与数据库中存在的密码不匹配，我需要创建一个警告框。

对此的任何帮助将不胜感激。如果您需要任何其他代码，我会尽快发布。

```
// *Update Profile Password* //
$("#btn-profile-update2").bind('click', function(){

       // Get info from text boxes
    /*    var profile_oldpassword = $('#txt-prof-oldp').val(); */
    var profile_newpassword = $('#txt-prof-newp').val();
    var profile_confirmpassword = $('#txt-prof-confp').val();

    new_password = $('#txt-prof-newp').val();
    old_password = $('#txt-prof-oldp').val();

    if (profile_newpassword !== profile_confirmpassword) {

        response = "Passwords entered do not match"

        alert(response);

        return;

   }

    // An array of field names to be updated
    var arr_field_names = Array();

    // Add the field name to index of array
    arr_field_names[0] = "Password";

    // An array of field values that correspond with our field names...
    var arr_field_values = Array();

    arr_field_values[0] = profile_newpassword;

    // Send to updateProfDetails function
    updatePassword(arr_field_names,arr_field_values,new_password,old_password);

    });

}); 
```

发送到这个函数：

```
function updatePassword(arr_field_names,arr_field_values,new_password,old_password) {

    // Ajax parameters...
    $.ajax({

        // Request sent from control panel, so send to cp.request.php (which is the handler)
        url: 'scripts/php/bootstrp/cp.request.php',
        type: 'GET',

        data: {

            ft: "password",
            table: "tblusers",
            oldpassword: old_password,
            newpassword: new_password,
            field_names: arr_field_names,
            field_values: arr_field_values,

            // Either pass a row id as the 'id' OR a where clause as the 'condition' never both
            id: null,
            condition: null
        },
        dataType: 'text',
        timeout: 20000,
        error: function(){
            $('#cp-div-error').html('');
            $('#cp-div-error').append('<p>There was an error updating the data, please try again later.</p>');
            $('#cp-div-error').dialog('open');
        },
        success: function(response){

            // Refresh page
           // location.reload(true);

        }
    });

} 
```

最后是 PHP 更新：

```
public function password($tableName)
{

    $PDO = new SQL();
    $dbh = $PDO->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    $username = UserAccount::get_useremail();
    $password = hash('sha256',trim($_GET['newpassword']));
    $oldpassword = hash('sha256',trim($_GET['oldpassword']));

        // Does the password given match the password held?
       $this->sql = "UPDATE $tableName SET password = '$password' WHERE UserName = '$username'";

    try {
                // Query
                $stmt = $dbh->prepare($this->sql);

                $stmt->execute();

                $count = $stmt->rowCount();

                echo $count.' row(s) updated by SQL: '.$stmt->queryString;

                $stmt->closeCursor();

            }

            catch (PDOException $pe) {
                echo 'Error: ' .$pe->getMessage(). 'SQL: '.$stmt->queryString;
                die();
            }

                // Close connection
                $dbh = null;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:36:11.223

你几乎明白了..关键在这里：

```
success: function(response) { .. } 
```

只是玩响应可能是这样的：

```
success: function(response) {
    if (response == "wrong password") alert ("don't guess");
    else if (response == "password changed") alert ('you got it! congrats!');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:39:42.523

我认为 Vytautas 提出了一个很好的观点，我没有通读它，但我只是想给你一个重要的提示

试`$PDO->connect`一下{}catch(){}

如果 PDO 连接函数出错，它会打印您的数据库信息，包括密码。

# forms - SWI-Prolog cgi_get_form(Arguments) 保存和处理参数 web 表单

> ID：10428583
> 
> 赞同：1
> 
> 时间：2012-05-03T09:26:53.730
> 
> 标签：forms, prolog, swi-prolog

我正在寻找一种保存方法，并在提交表单时在 SWI-Prolog 中处理 Web 表单的参数后调用同一个程序来生成另一个表单，依此类推。总是从一种形式调用相同的 prolog 程序到下一种形式。
CGI SWI-Prolog 库将这些参数保存为名称（值）术语列表，即`[Name(Value)]`.

* * *

如果我在表单内传递参数（如隐藏参数）（TotalArguments 是一个列表）：

> format('"<"input type="hidden" id="nameofform1" name="nameofform1" value="~w" />~n', TotalArguments),

当我附加它时，我需要删除在 TotalArguments 上的结果列表中连接的 id 或名称。知道如何做到这一点，以便最终列表看起来像`[nameofform1(value1), nameofform2(value2),...]`吗？

* * *

我也可以编写这个参数列表并将其附加到一个文件中，并在每次再次调用程序时查阅它，但这将始终加载它们，我只需要加载特定步骤中所需的参数和处理的表单片刻。因为否则此文件在某些​​执行后可能包含不需要的信息。关于如何做到这一点的任何想法？
对于此类问题还有其他建议吗？

* * *

**使用隐藏表单编辑我的解决方案**
我通过创建解决了它：

> ```
>  extract_value([],_).
>   extract_value([A0|__ ], Valor) :-
>      A0 =.. [_, Value],
>      Valor is Value. 
> ```

然后做：

> extract_value（参数，值），

并提交表单的隐藏值，例如：

> format('<"input type="hidden" id="nameofform1" name="nameofform1" value="~w"/>~n', [值]),

并将其附加到下一个表单中，以便它看起来像我想要的那样：

> [nameofform2(value2),nameofform1(value1)]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:27:43.373

我有点不清楚您在这里到底需要什么，但是要删除与给定元素统一的列表的第一个元素（特别是如果您确定该列表包含这样的元素），请使用 selectkchk/3。例如：

```
selectchk(id(_), List0, List1),
selectchk(name(_), List1, List) 
```

为了获得List，即没有元素`id(_)`和的List0 `name(_)`。据我了解，您的问题中隐含的一种似乎是如何在给定术语名称（form1）和值的情况下创建像“form1（值）”这样的术语。例如，您可以使用 =../2 来执行此操作。您可以使用仿函数 N 和参数 Args 创建一个术语 T

```
T =.. [N|Args] 
```

似乎没有必要在此处向文件写入任何内容，我只是按照您的概述将信息通过表单传递。

# delphi - JVCL Docking-Docking_in_Code 示例 - Tab Dock 可能出现的错误

> ID：10428587
> 
> 赞同：4
> 
> 时间：2012-05-03T09:27:08.503
> 
> 标签：delphi, delphi-xe2, docking, jvcl

我在 OS：Win7 下使用带有更新 4 的 delphi xe2，我想为我的学期考试构建一个允许对接表格的应用程序。因为我是学生，所以我买不起任何对接组件。所以我开始通过查看 JVCL 3.45 作者提供的示例来了解 JVCL Docking 的工作原理（感谢他们）。现在我遇到了一个可能的问题。我已经从名为 Docking_in_Code 的 JvDocking 打开了项目：左对齐面板（Sibling DOck，Cojoined Dock）中的所有选项都在工作，但是当我单击 Tab Dock 时，这是我得到的消息

> “ManualTabDock:Ttabhost 未创建。您的停靠方式可能不支持选项卡式停靠”

有没有其他人遇到过这个？我试图在我自己的项目中的示例中编写相同的代码，但出现了相同的错误。![在此处输入图像描述](../Images/5c9e2b0db63b67023d184b055ef48f21.png)为什么看起来我不知道:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T13:35:49.430

我猜你已经到了查看示例的阶段，你已经在 Delphi XE2 中安装了 JCL（Java 组件库）和 JVCL（Java 可视化组件库）。

我最近也在学习如何使用 JVCL 对接组件。这个例子是我看到的第一个例子，对我来说效果很好。我建议您重新安装 JCL 和 JVCL，然后仔细检查库路径是否存在并且正确：

```
Tools > Options > Environment Options > Delphi Options > Library > LibraryPath 
```

我的目录列表中保存了以下路径：

```
...\jcl\jcl\lib\d16\win32
...\jcl\jcl\source\include
...\jvcl\lib\D16\win32
...\jvcl\common
...\jvcl\Resources
...\jvcl\run 
```

如果您已经确认了这一切并且它仍然无法正常工作，那么手动安装软件包可能是一个好主意。如果您需要手动编译和安装软件包，则 JCL 和 JVCL 需要安装的软件包版本为 D16（不过安装程序应该为您执行此操作）。如果您打开“D16 Packages”delphi 项目，您应该能够手动安装组件，首先是 JCL，然后是 JVCL。

# android - 如何处理android后台活动

> ID：10428589
> 
> 赞同：0
> 
> 时间：2012-05-03T09:27:12.027
> 
> 标签：android

我的android应用程序中有活动堆栈。假设A和B。当应用程序启动时，活动A是可见的。从这个活动我使用startActivityForResult方法调用活动B。现在从这里如果我按下设备的主页按钮，那么活动在后台运行没关系。但是当我通过点击活动图标重新启动应用程序时，将启动一个新的活动实例并显示活动 A 而不是显示活动 B。请帮助我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:31:40.897

检查您的 Activity A 的 launchMode 是否为 SingleTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:45:14.560

您可以尝试使用 getApplication().startActivity(myIntent); 调用活动 B

# objective-c - 从 ABPersonRecord 中提取“是一家公司”

> ID：10428592
> 
> 赞同：3
> 
> 时间：2012-05-03T09:27:14.817
> 
> 标签：objective-c, cocoa-touch, abaddressbook

我的 iOS 应用程序正在显示用户地址簿的内容以及一些应用程序特定的 UI 元素。我无法弄清楚的一个挑战是，无论一个人是否被标记为“公司”，它在[`AddressBook`框架中的存储位置。](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html)这是 Mac 地址簿应用程序中复选框的屏幕截图（对不起，这里的荷兰语，“Bedrijf”的意思是“公司”）。

![OSX 通讯簿应用程序的屏幕截图，“Bedrijf”表示“公司”](../Images/02566b0c12d3219d0417bbbc2edad0e9.png) ![OSX 通讯簿应用程序的屏幕截图，公司复选框已关闭](../Images/01b845270e778c598f45998c06a43cd2.png)

您无法在 iOS 设备上编辑此属性，但如果您使用 iCloud 或其他同步服务，它会同步过来。如您所见，它会影响是否应该使用名字/姓氏或公司名称来显示此联系人，并且会更改占位符图标。

我正在遍历实例的内容并从实例中`ABAddressBookCopyArrayOfAllPeople(addressBook);`提取我需要的信息。`ABRecordRef`我正在使用[参考指南中列出](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007210-CH991-SW8)的“个人信息属性”常量，但我只是找不到常量来获取标志，无论一个人被标记为公司还是个人。

我正在寻找带有“公司”或“组织”的标志，但显然我找错了地方。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:15:23.833

您几乎找到了：[Person Type Property](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007210-CH991-SW8) `kABPersonKindProperty`属性的值为`kABPersonKindPerson`or`kABPersonKindOrganization`

# javascript - 预加载图像 - 不适用于浮动图像

> ID：10428596
> 
> 赞同：1
> 
> 时间：2012-05-03T09:27:29.243
> 
> 标签：javascript, css, css-float, preload

我有一个图像预加载脚本，它是这个表格 nettuts 的略微修改版本：http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-awesome-image-preloader/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-awesome-image-preloader/)

我遇到的问题是预加载背景 gif 不适用于浮动的图像？

```
// JavaScript Document
$.fn.preloader = function(options){

var defaults = {
                 delay:20000,
                 preload_parent:"span",
                 check_timer:300,
                 ondone:function(){ },
                 oneachload:function(image){  },
                 fadein:500 
                };

// variables declaration and precaching images and parent container
 var options = $.extend(defaults, options),
 root = $(this) , images = root.find("img").css({"visibility":"hidden",opacity:0}) ,  timer ,  counter = 0, i=0 , checkFlag = [] , delaySum = options.delay ,

 init = function(){

    timer = setInterval(function(){

        if(counter>=checkFlag.length)
        {
        clearInterval(timer);
        options.ondone();
        return;
        }

        for(i=0;i<images.length;i++)
        {
            if(images[i].complete==true)
            {
                if(checkFlag[i]==false)
                {
                    checkFlag[i] = true;
                    options.oneachload(images[i]);
                    counter++;

                    delaySum = delaySum + options.delay;
                }

                $(images[i]).css("visibility","visible").delay(delaySum).animate({opacity:1},options.fadein,
                function(){ $(this).parent().removeClass("preloader");   });

            }
        }

        },options.check_timer) 

     } ;

images.each(function(){

    if($(this).parent(options.preload_parent).length==0)
    $(this).wrap("<span class='preloader' />");
    else
    $(this).parent().addClass("preloader");

    checkFlag[i++] = false;

    }); 
images = $.makeArray(images); 

var icon = jQuery("<img />",{

    id : 'loadingicon' ,
    src : 'css/i/89.gif'

    }).hide().appendTo("body");

timer = setInterval(function(){

    if(icon[0].complete==true)
    {
        clearInterval(timer);
        init();
         icon.remove();
        return;
    }

    },100);

}

$(function () {
$("#righthalf").preloader();
$("#portright").preloader();
$("#timeline").preloader();
$("#type").preloader();
}) 
```

有什么想法吗？

# c# - 带有大型密件抄送列表的 SmtpClient.Send(MailMessage) 超时 - C#

> ID：10428597
> 
> 赞同：0
> 
> 时间：2012-05-03T09:27:36.237
> 
> 标签：c#, email, timeout, smtp, bcc

长期读者，第一次提问。

向 110 个密件抄送收件人发送电子邮件时出现超时。

我正在尝试从一个网站向我运营其网站的俱乐部成员发送一封电子邮件。我将自己添加为发件人和收件人，成员的电子邮件地址进入密件抄送列表。大约有110名成员。我使用发件人的用户名和密码对服务器进行身份验证。

我可以很好地准备 MailMessage，但是当我调用 SmtpClient.Send() 时它会超时，即使阈值为 10 分钟也是如此。当收件人较少时，Send() 方法仍然需要很长时间（5-7 分钟），但会成功完成。无论邮件或附件的大小如何，即使没有附件，也会发生这种情况。

我认为我的邮件服务器（在我的托管 Web 服务器上）以某种方式检查每个收件人电子邮件地址与外部系统（如垃圾邮件/黑名单）或每个收件人邮件服务器。

我的托管公司被难住了，他们发誓一切都好。

你知道我可以设置 StmpClient 或 MailMessage 上的一个成员来告诉邮件服务器不要这样做吗？或者（甚至更好）在 Parallels HSPhare 电子邮件服务器中设置以停止此操作？

提前谢谢了。

示例代码

```
bool SendEmail(string[] emailAddresses)
{
    MailMessage message = new MailMessage();
    SmtpClient smtp = new SmtpClient("mail.myServer.org");
    message.From = new MailAddress("website@myServer.org", "Display name");
    message.To.Add("website@myServer.org");

    foreach (string recipient in emailAddresses)
    {
        // ABout 110 recipients
        message.Bcc.Add(recipient);
    }

    message.Subject = "Whatever";
    message.ReplyTo = new MailAddress("myOtherEmailAddress@external.com");
    smtp.Credentials = new NetworkCredential(message.From.Address, "whatever");

    try
    {
        message.Body = "A few hundred bytes";
        smtp.Timeout = 300000; // 10 mins
        smtp.Send(message);
    }
    catch (Exception ex)
    {
        // Report here
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T12:49:24.470

这个问题的解决方案是 DNS 检查。我的出站电子邮件服务器获取收件人列表中的每个地址，并尝试在 DNS 中查找其域的 MX 记录。
对于 110 个地址，有几个得分不同的域，并且这种查找需要很长时间。它做到了 While-U-Wait，或者我的浏览器放弃了在网络服务器上的等待，或者网络服务器放弃了在邮件服务器上的等待（现在不记得是哪个了）。

我的提供商已经禁用了这个选项。

在等待他们承认问题的同时，我通过以下方式解决了它。我没有发送一封包含 110 个收件人的电子邮件，而是将我想要发送的内容的详细信息存储在两个表中 - 一行用于正文，另外 110 行用于收件人。然后另一个 ASP 页面轮询该表，一次选择 10 封排队的电子邮件，发送它们，并打印 HTML 以在几秒钟后自行刷新。在一个页面中创建了我的行后，我单击了发送页面并在批处理时等待了几分钟。总时间是相同的，可能更多，但较小的批次意味着没有超时。

希望对下一个人有所帮助。

# javascript - 模拟 JavaScript 中的“新”运算符

> ID：10428603
> 
> 赞同：9
> 
> 时间：2012-05-03T09:28:12.040
> 
> 标签：javascript

我试图在这样的代码中模拟 JavaScript 中的“新”运算符：

```
Function.method('new', function ( ) {
    var objPrototype = Object.create(this.prototype);
    var instance = this.apply(objPrototype, arguments);

    return instance;
}); 
```

但是，为了涵盖所有情况，return 语句应如下所示：

```
return (typeof instance === 'object' && instance ) || objPrototype; 
```

现在进行测试：

```
var SomeClass = function (param1, param2) {
    this.param1 = param1;
    this.param2 = param2;
};

var test1 = String.new('test1'); //in this case, the "instance" variable is an object
var test2 = SomeClass.new('test1', 'test2'); // in this case, the "instance" variable is undefined 
```

这正是“新”运营商所做的吗？有没有要处理的案子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T10:07:54.060

从[规范](http://es5.github.com/#x11.2.2)：

> ## 11.2.2 新的运算符[#](http://es5.github.com/#x11.2.2) [Ⓣ</a>](http://es5.github.com/#x11.2.2-toc) [Ⓡ</a>](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Special/new) [Ⓖ</a>](https://developer.mozilla.org/en/JavaScript/Guide/Expressions_and_Operators#new)
> 
>  [产生*式 NewExpression* : `new` *NewExpression*的评估如下：](https://developer.mozilla.org/en/JavaScript/Guide/Expressions_and_Operators#new) 
> 
> [*   让*ref*是评估*NewExpression*的结果。](https://developer.mozilla.org/en/JavaScript/Guide/Expressions_and_Operators#new)
> 2.  [让*构造函数*为](https://developer.mozilla.org/en/JavaScript/Guide/Expressions_and_Operators#new)[`GetValue`](http://es5.github.com/#x8.7.1)（*ref*）。
> 3.  如果[`Type`](http://es5.github.com/#Type)( *constructor* ) 不是 Object，则抛出[TypeError](http://es5.github.com/#x15.11.6.5)异常。
> 4.  如果*构造*函数没有实现 [[Construct]] 内部方法，则抛出[TypeError](http://es5.github.com/#x15.11.6.5)异常。
> 5.  *返回在构造*函数上调用 [[Construct]] 内部方法的结果，不提供任何参数（即一个空的参数列表）。
> 
> 产生*式 MemberExpression* : `new` *MemberExpression Arguments* 的评估如下：
> 
> 1.  让*ref*是评估*MemberExpression*的结果。
> 2.  让*构造函数*为[`GetValue`](http://es5.github.com/#x8.7.1)（*ref*）。
> 3.  让*argList*成为评估*Arguments*的结果，生成参数值的内部列表（[11.2.4](http://es5.github.com/#x11.2.4)）。
> 4.  如果[`Type`](http://es5.github.com/#Type)( *constructor* ) 不是 Object，则抛出[TypeError](http://es5.github.com/#x15.11.6.5)异常。
> 5.  如果*构造*函数没有实现 [[Construct]] 内部方法，则抛出[TypeError](http://es5.github.com/#x15.11.6.5)异常。
> 6.  *返回在constructor*上调用 [[Construct]] 内部方法的结果，提供列表*argList*作为参数值。

在任何一种情况下，所有步骤都正确执行：

```
var objPrototype = Object.create(this.prototype);    // 1-4 1-5
var instance = this.apply(objPrototype, arguments);  // 5   6 
```

兴趣点是 2.状态
[规范`[[construct]]`](http://es5.github.com/#x13.2.2)：

> 当使用可能为空的参数列表调用 Function 对象 F 的 [[Construct]] 内部方法时，将执行以下步骤：
> 
> *   设 obj 为新创建的原生 ECMAScript 对象。
>     `. . .`
> *   令 result 为调用 F 的 [[Call]] 内部属性的结果，提供 obj 作为 this 值，并提供传递给 [[Construct]] 的参数列表作为 args。
> *   如果[`Type`](http://es5.github.com/#Type)（*结果*）是对象，则返回*结果*。
> *   返回*obj*。

`typeof obj`返回`"object"`for `null`，while`null`不是对象。但是，由于`null`是一个虚假值，因此您的代码也可以按预期工作：

```
return (typeof instance === 'object' && instance ) || objPrototype; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T09:58:09.610

运算符`new`接受一个函数`F`和: `arguments`。`new F(arguments...)`它执行三个简单的步骤：

1.  创建类的实例。它是一个空对象，其 `__proto__`属性设置为`F.prototype`。初始化实例。

2.  使用传递的参数调用函数 F，并将 this 设置为实例。

3.  返回实例

现在我们了解了 new 运算符的作用，我们可以在 Javascript 中实现它。

```
 function New (f) {
/*1*/  var n = { '__proto__': f.prototype };
       return function () {
/*2*/    f.apply(n, arguments);
/*3*/    return n;
       };
     } 
```

只是一个小测试，看看它是否有效。

```
function Point(x, y) {
  this.x = x;
  this.y = y;
}
Point.prototype = {
  print: function () { console.log(this.x, this.y); }
};

var p1 = new Point(10, 20);
p1.print(); // 10 20
console.log(p1 instanceof Point); // true

var p2 = New (Point)(10, 20);
p2.print(); // 10 20
console.log(p2 instanceof Point); // true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-03T22:04:01.890

这里的答案对标准 ES5 都是有效的，在编写它们的时候就已经存在，但它们并不是适用于所有 ES6 上下文的通用解决方案，所以我想对它们进行扩展。简短的回答是问题中的代码：

```
Function.method('new', function ( ) {
  var objPrototype = Object.create(this.prototype);
  var instance = this.apply(objPrototype, arguments);

  return instance;
}); 
```

将在标准 ES6 环境中更好地实现为

```
Function.method('new', function ( ) {
  return Reflect.construct(this, arguments);
}); 
```

这绝对简化了事情。

`Reflect.construct`作为系统的一部分在 ES6 中被引入`Proxy`，但它具有类似这种情况的一般用途。

这是现在首选方法的原因是`.apply`不再适用于每种类型的函数的简单原因。[上一个答案](https://stackoverflow.com/a/10429227/785065)解释了`new`调用内部语言函数`[[Construct]]`来初始化参数。使用方法`.apply`本质上取代了自动对象创建和调用逻辑`[[Construct]]`，而是手动创建对象然后调用函数，该函数使用它的`[[Call]]`内部方法而不是`[[Construct]]`.

对函数的调用是 ES6 中变化的一部分。在 ES5 中，您几乎唯一要构建的是一个正常值`function Foo(){}`，因此您可以对此做出假设。在 ES6`class Foo {}`中引入了语法，类语法创建的构造函数有更多的限制，所以关于 ES5 的假设不适用。最重要的是，明确禁止 ES6 类使用`[[Call]]`. 执行以下操作将引发异常：

```
class Foo {}
Foo(); 
```

`.call`这与和是相同的问题`.apply`。它们不是函数构造函数，它们是函数调用函数。所以如果你尝试在 ES6 类上使用它们，它们会抛出异常。

`Reflect.construct`*通过实际*调用`[[Construct]]`而不是调用来避免这些问题`[[Call]]`，而是通过无需`new`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T05:30:55.013

这是使用该方法的替代[`__proto__`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)方法。它与 OP 最初的开始方式一致......

```
function New(fn) {
    var newObj = Object.create(fn.prototype);
    return function() {
        fn.apply(newObj, arguments);
        return newObj;
    };
} 
```

这是一种更简洁的方式，它也通过了原型链测试。

# load - 无法可视化加载的数据

> ID：10428608
> 
> 赞同：1
> 
> 时间：2012-05-03T09:28:33.350
> 
> 标签：load, xtk

我刚开始测试xtk，立方体的第一个样本没有问题。我现在尝试加载外部数据，但本地存储到我的文件系统中（只需下载示例 05 的头骨样本）并放在 html 的同一目录中。我什么也看不见。我也运行了测试并且可视化是好的，但是当我尝试打开一个测试 html 时，它无法可视化示例。路径有问题吗？我真的试着把自己放在最简单的情况下，但我什么也没看到。我使用 Chrome，当我查看演示时，一切正常。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:05:03.760

这似乎是原始安全检查。如果您打开 Javascript 控制台，您会看到类似“403 错误”的内容。

要在本地进行测试，您必须使用参数“-allow-file-access-from-files”启动 chrome，或者您只需在 html 文件目录中运行类似“python -m SimpleHTTPServer”的网络服务器，然后在浏览器中访问[http://localhost:8000/](http://localhost:8000/)

以下是更多信息：

[Google Chrome --allow-file-access-from-files 禁用 Chrome Beta 8](https://stackoverflow.com/questions/4270999/google-chrome-allow-file-access-from-files-disabled-for-chrome-beta-8) [http://robspangler.com/blog/jquery-load-doesnt-work-in-chrome/](http://robspangler.com/blog/jquery-load-doesnt-work-in-chrome/)

# php - 基于两个 mysql 字段进行计算

> ID：10428609
> 
> 赞同：1
> 
> 时间：2012-05-03T09:28:38.097
> 
> 标签：php, mysql, database, math

我想计算出我在桌子上的鸡尾酒的平均“评分”。有一个 tblRating 链接到 tblCocktail，在这个表中是“值”和“计数器”。“value”包含用户可以给每个鸡尾酒的 1-5 评分，“counter”包含值“1”。我想通过将所有“价值”相加并除以“计数器”的数量来计算每种鸡尾酒的平均评分

我以前从未根据 php 字段进行过数学计算，因此不胜感激

-马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:34:41.200

这是一个应该做你想做的事情的例子，显然没有完整的表模式不可能更准确，但是这个例子应该表明这个想法：

```
SELECT c.name, AVG(r.value)
FROM tblCocktail c
JOIN tblRating r ON c.id = r.cocktail.id
GROUP BY c.id, c.name 
```

基本上，您从 tblCocktail 中选择所有鸡尾酒并计算评分的平均值（r.value）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:49:47.380

您可能不需要计数器字段，该[`AVG`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)函数可以计算平均值而不需要计数器：

```
SELECT AVG(value)
FROM tblRating
WHERE cocktail_id = 1234 
```

笔记：

*   您可以计算评分表中的行数以确定评分数
*   `NULL`计算平均值时不考虑值
*   您必须坚持您选择的比例，并且不允许超出 1-5 范围的值

# php - 基于带有 curl 的标题提取 url

> ID：10428610
> 
> 赞同：0
> 
> 时间：2012-05-03T09:28:38.420
> 
> 标签：php, curl

我想给一个带有 curl.. 的 url 并根据其标题属性 Expires 获取它。

我只想在最近 30 天内缓存该页面时才检索该页面。

有两件事我认为不对...

1) gmmktime(0, 0, 0, 1, 1, 1998).. 我不知道如何将其设置为今天 - 30 天前。2）它是否会根据其标题返回我谷歌？如果 url 没有日期超过 30 天的缓存标头，$page 变量将是什么

```
 function exractURl()
   {
       //How to convert gmmktime to the last 30 days from today
       $ts = gmdate("D, d M Y H:i:s", gmmktime(0, 0, 0, 1, 1, 1998)) . " GMT";
       $c=  curl_init('http://www.google.co.il/');
       curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
       curl_setopt($c, CURLOPT_HTTPHEADER, array('Expires:'.$ts));
      //  What output will page give me..if the headers arent found
       $page= curl_exec($c);
       curl_close($c);
   } 
```

**更新：**

```
 function exractURl()
   {
       $ts = gmdate("D, d M Y H:i:s", strtotime("30 days ago")) . " GMT";
       $c=  curl_init('http://www.google.co.il/');
       curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
       curl_setopt($c, CURLOPT_HTTPHEADER, array('If-Modified-Since:'.$ts));
       $page= curl_exec($c);
       curl_close($c);
       return $page;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:34:11.180

您可以使用`If-Modified-Since`要求服务器仅在内容发生更改时才返回内容（否则您将收到`304 Not Modified`响应）。当然，这取决于服务器的行为。有关详细信息，请参见此处：[http ://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

要回答有关如何获取 30 天前的时间的问题，您可以使用方便[`strtotime`](http://php.net/manual/en/function.strtotime.php)：

```
$ts = gmdate("D, d M Y H:i:s", strtotime("30 days ago")) . " GMT"; 
```

# javascript - MongoDB not okForStorage 错误

> ID：10428611
> 
> 赞同：1
> 
> 时间：2012-05-03T09:28:43.680
> 
> 标签：javascript, node.js, mongodb

关于这个错误，我已经环顾四周，似乎 Mongo 不会接受更新中的 a`.`或 a `$`，但我仍然收到此错误

```
{ [MongoError: not okForStorage]
  name: 'MongoError',
  err: 'not okForStorage',
  code: 12527,
  n: 0,
  connectionId: 18,
  ok: 1 } 
```

这是我正在更新的对象：

```
{
status: "open",
type: "item",
parentId: "4fa13ba2d327ca052d000003",
_id: "4fa13bd6d327ca052d000012",
properties: {
  titleInfo: [
   { title: "some item" }
  ]
  }
} 
```

我将其更新为：

```
{
fedoraId: 'aFedoraLib:438',
status: "closed",
type: "item",
parentId: "4fa13ba2d327ca052d000003",
_id: "4fa13bd6d327ca052d000012",
properties: {
  titleInfo: [
   { title: "some item" }
  ]
  }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-10T13:58:02.997

我刚刚遇到的另一个可能原因是：在字符串键中存储一个有句点的对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T14:39:17.467

所以对于人们得到同样的错误：这是因为我包含了_id，Mongo显然不喜欢它

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-22T07:28:55.430

我在尝试使用这个键值对（直接来自 AngularJS 应用程序）保存 JSON 结构时遇到了这个错误：

```
 "$$hashKey":"021" 
```

仅删除该密钥即可解决问题。对于其他使用 Angular 的人来说，调用 Angular 的内置`angular.toJson`客户端似乎消除了 $$hashkey 键。从他们的论坛：

```
$scope.ngObjFixHack = function(ngObj) {
    var output;

    output = angular.toJson(ngObj);
    output = angular.fromJson(output);

    return output;
} 
```

# jsf - 在 JSF 中动态追加元素

> ID：10428622
> 
> 赞同：-2
> 
> 时间：2012-05-03T09:29:26.143
> 
> 标签：jsf, dom, dynamic, append

我正在使用最新的 JSF 和 PrimeFaces。当用户单击链接时，我想在我的 panelGrid 中附加额外的行...

我习惯于使用 jQuery .click() 和 .append() 来完成。如何使用 JSF/PrimeFaces 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:26:18.737

使用数据表而不是面板网格。数据表允许您以表格格式显示动态大小的项目集合。

例如

```
<p:dataTable id="table" value="#{bean.items}" var="item">
    ...
</p:dataTable>

<p:commandButton value="Add" action="#{bean.add}" update="table" /> 
```

和

```
private List<Item> items;

public void add() {
    items.add(new Item());
}

// ... 
```

# fluent-nhibernate - NHibernate 更新不保存复合键

> ID：10428623
> 
> 赞同：1
> 
> 时间：2012-05-03T09:29:36.560
> 
> 标签：fluent-nhibernate, nhibernate-mapping, composite-key

我们终于在我们的开发中达到了一个点，我们正在执行 CRUD 操作，除了我们自己的引用密钥清理（我们使用的是旧的预先设计的数据库）之外，大部分操作都有效。

我们遇到的问题是我们的具有复合键的对象似乎没有更新——即使改变了！

目前我只是试图更新屏幕编号属性，然后调用刷新。还有一些其他操作发生（例如删除），但它们是预期的并且与本示例无关。

谢谢！

我的映射如下：

```
public class Xref_el_c : ClassMap<Xref_EntityCaseEntity>
{
    public Xref_el_c()
    {
        Table("Xref_el_c");

        CompositeId()
        .KeyProperty(x => x.EntityRef, "xelc_el_ref")
        .KeyProperty(x => x.Case, "xelc_c_ref")
        .KeyProperty(x => x.ScreenNumber, "xelc_screen");
    }
} 
```

/*对象*/

```
public class Xref_EntityCaseEntity : BaseCompositeEntity
{
    public virtual int EntityRef { get; set; }

    public virtual int Case { get; set; }

    public virtual int? ScreenNumber { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null)
            return false;

        Xref_EntityCaseEntity xe = obj as Xref_EntityCaseEntity;

        if (xe == null)
            return false;

        return EntityRef == xe.EntityRef && Case == xe.Case && ScreenNumber == xe.ScreenNumber;
    }

    public override int GetHashCode()
    {
        return (EntityRef + "|" + Case + "|" + ScreenNumber).GetHashCode();
    }
} 
```

执行以下工作的代码：

```
IEnumerable<Xref_EntityCaseEntity> xrefs = GetEntityCrossReferenceLinks(entCode, caseRef);

            foreach (var item in xrefs)
            {
                if (item.EntityRef != reference) //because the deletion won't actually happen until Dispose() is called, we could essentially queue an update for a delete item.
                {
                    if (item.ScreenNumber == null || (item.ScreenNumber == 0 || item.ScreenNumber == 0))
                    {
                        item.ScreenNumber = 1;

                    }
                    else
                    {
                        item.ScreenNumber = item.ScreenNumber - 1;
                    }

                    _entityToCaseXref.Update(item);
                }
            } 
```

此处标记的更新仅调用 Session.Update() 和 Session.Flush()

# ruby-on-rails - 我可以使用 before_save 对nested_attributes 进行排序吗？

> ID：10428624
> 
> 赞同：0
> 
> 时间：2012-05-03T09:29:37.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我的 Release 模型中有以下代码来保存与发布关联的轨道。在当前状态下，曲目以随机顺序保存到数据库中。我知道 SQL 语句没有按照设定的顺序和原因执行。

```
 accepts_nested_attributes_for :tracks, :reject_if => lambda { |a| a[:name].blank? }, :allow_destroy => :true

 def track_attributes=(track_attributes)
   track_attributes.each do |attributes|
     tracks.build(attributes)
     artists_tracks.build(attributes)
   end
 end 
```

是否可以使用 before_save 调用添加 order_tracks def 以确保它们以正确的顺序进入数据库？我有可用于确定订单的 track_number 字段。

像这样的东西？

```
before_save :order tracks

def order_tracks
tracks.sort_by { |track| track.track_number }
end 
```

（以上行不通）

编辑

我发现了一个相关的问题。我之前通过跟踪控制器创建操作使用以下方法设置标签和用户 ID：

```
@track.user_id = current_user.id
@track.label_id = @release.label.id 
```

现在我通过accepts_nested_attributes 添加曲目，这不再有效。

我在想如果我能弄清楚在哪里设置这些，我可以写一些类似的东西来手动设置我的releases_tracks模型中的位置，而不是通过acts_as_list。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:51:03.293

我假设您需要按特定顺序选择这些曲目。然后你可以`:order`在你的关联中定义参数，例如：

```
class Album < ActiveRecord::Base
  has_many :tracks, :order => "track_number asc"
end 
```

# java - 具有预设 ID 的新实体被检测为“分离实体”

> ID：10428626
> 
> 赞同：2
> 
> 时间：2012-05-03T09:29:42.600
> 
> 标签：java, hibernate, jpa, orm

我有一个`Player`具有此 ID 定义的实体

```
@Id
@GeneratedValue
@Column(updatable=false)
private long id; 
```

但是，有时（但不总是）我想创建一个具有预设 ID 的新实例。

```
player = new Player(...);
player.setId(externalId);
em.persist(player); 
```

这显然会导致 Hibernate 将其视为一个分离的实体，从而引发异常

> org.hibernate.PersistentObjectException：分离的实体传递给持久化

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:45:10.533

我可以自己删除`@GeneratedValue`并生成 ID，例如：

```
begin transaction
if id not preset {
    do {
        id = random number
    } while (id in use)
}
create player with id
commit transaction 
```

对于事务，这应该是安全的，但它不如让数据库处理它那么理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:36:55.750

那里有问题。你能告诉我们为什么你想要一个固定的 ID 吗？因为您实际上是在说“请为我创建一个 ID，我*从*不想处理这个问题”，所以您有时会尝试自己设置一个 ID，这可能意味着您正在破坏整个事情。

该异常可能是因为您正在设置已使用的 ID。然后，当尝试持久化时，hibernate 检测到它与 DB 中的内容不同步（分离），所以他只是抛出了那个异常。

# jquery - 删除包含字符串的 li

> ID：10428627
> 
> 赞同：1
> 
> 时间：2012-05-03T09:29:45.407
> 
> 标签：jquery, string, html-lists

如果任何 LI 包含 stockTo，我想触发删除此 UL 中的所有 LI。

这下面，是行不通的。

```
var stockTo = 'abc';

$('ul#thelst li:contains(stock)').remove(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:31:46.067

尝试这个：

```
var stockTo = 'abc';
$('ul#thelst li:contains(' + stockTo + ')').parent().children().remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:38:02.813

```
$('ul#thelst li).contains('+ stockTo +').remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:38:06.497

嗨**演示** [http://jsfiddle.net/m7zUh/](http://jsfiddle.net/m7zUh/)

很高兴看到您的 HTML 的外观，但请参阅下面的代码。

在示例示例中：单击触发按钮，您将看到`foo`将被删除为`li`

希望这会有所帮助，:) 祝你好运，干杯

**HTML**

```
<div> sample</div>
<ul id="thelst"> 
    <li>Hulk</li>
        <li>Hawk</li>
        <li>Foo</li>
        <li>Bar</li>
        <li>Rambo</li>
    </ul>

<input type="button" id="trigger" value="trigger" />
​ 
```

**jQuery代码**

```
$('#trigger').click(function() {

    var stockTo = 'Foo';
    $('ul#thelst li:contains(' + stockTo + ')').remove();

});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T09:38:20.850

```
$('#thelst li:contains(' + stockTo + ')').remove();​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T09:35:41.740

嘿，您编写 jQuery 的方式不正确..

在此处查看现场演示。[如何删除列表](http://jsfiddle.net/kFkU6/1/)

下面是 HTML

```
<div>
    <ul id="thelst">
        <li>test test test test 111 </li>
        <li>test test test test 112 </li>
        <li>test test test test 113 </li>
        <li>test test test test 114 </li>
        <li>test test test test 115 </li>
        <li>test test test test 116 </li>
    </ul>
</div> 
```

这是文档就绪函数中的 JQUERY 代码

```
var stockTo = '114';

$('#thelst').find("li:contains(" + stockTo  + ")").remove(); 
```

**EDIT** [DEMO 2](http://jsfiddle.net/kFkU6/3/)在点击锚点时删除列表

# facebook - Facebook API 中的新闻提要不正确

> ID：10428628
> 
> 赞同：1
> 
> 时间：2012-05-03T09:29:47.390
> 
> 标签：facebook, facebook-graph-api, facebook-fql, feed

我正在尝试使用 Facebook 的图形 API 获取 Facebook 帐户的新闻提要。

Facebook 的图形 API 只返回最后一天的数据，而不是更早的数据。

我已经浏览了 Facebook API explorer 并在那里尝试了同样的方法 - 但我仍然无法获取数据。

我怎样才能得到这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:04:14.543

我使用 FQL 查询来获得最接近的结果。Facebook 为用户生成的聚合将不会返回，这解释了为什么返回的结果与 Facebook NewsFeed 上的视图不完全相同。

此外，“AND is_hidden = 0”将避免返回隐藏的故事。

SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND is_hidden = 0

您需要 read_stream 权限才能执行此操作。您也可以停止询问 offline_access，因为它已被弃用（https://developers.facebook.com/blog/post/2012/05/02/platform-updates--operation-developer-love/）

# ios - 使用 Storyboard 以编程方式设置初始视图控制器

> ID：10428629
> 
> 赞同：265
> 
> 时间：2012-05-03T09:29:51.103
> 
> 标签：ios, objective-c, swift, uiviewcontroller, uistoryboard

如何以编程方式设置`InitialViewController`情节提要？我想根据某些情况将我的故事板打开到不同的视图，这些情况可能因发布而异。

* * *

## 回答 #1

> 赞同：479
> 
> 时间：2013-02-17T21:00:21.087

**如何*没有*一个虚拟的初始视图控制器**

确保所有初始视图控制器都有 Storyboard ID。

在情节提要中，取消选中第一个视图控制器中的“是初始视图控制器”属性。

如果您此时运行您的应用程序，[您将阅读](https://stackoverflow.com/questions/20875823/failed-to-instantiate-the-default-view-controller-for-uimainstoryboardfile-main)：

> 无法为 UIMainStoryboardFile 'MainStoryboard' 实例化默认视图控制器 - 也许未设置指定的入口点？

您会注意到应用程序委托中的 window 属性现在为零。

在应用程序的设置中，转到您的目标和`Info`选项卡。有明确的价值`Main storyboard file base name`。在`General`选项卡上，清除 的值`Main Interface`。这将删除警告。

`application:didFinishLaunchingWithOptions:`在应用委托的方法中创建窗口和所需的初始视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

    UIViewController *viewController = // determine the initial view controller here and instantiate it with [storyboard instantiateViewControllerWithIdentifier:<storyboard id>];

    self.window.rootViewController = viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2014-12-07T13:56:49.007

对于所有*Swift*爱好者，这里是**@Travis**翻译成*SWIFT*的答案：

做**@Travis**在 Objective C 代码之前解释的事情。然后，

```
func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {

    self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
    let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
    var exampleViewController: ExampleViewController = mainStoryboard.instantiateViewControllerWithIdentifier("ExampleController") as! ExampleViewController

    self.window?.rootViewController = exampleViewController

    self.window?.makeKeyAndVisible()

    return true
} 
```

这`ExampleViewController`将是您想要展示的新的初始视图控制器。

步骤说明：

1.  创建一个与当前窗口大小相同的新窗口，并将其设置为我们的主窗口
2.  实例化一个故事板，我们可以用它来创建我们新的初始视图控制器
3.  根据 Storyboard ID 实例化我们新的初始视图控制器
4.  将我们新窗口的根视图控制器设置为我们刚刚启动的新控制器
5.  使我们的新窗口可见

享受和快乐的编程！

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-10-01T15:20:10.467

您可以以编程方式设置关键窗口的 rootViewController`(BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

例如：

```
- (BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if (shouldShowAnotherViewControllerAsRoot) {
        UIStoryboard *storyboard = self.window.rootViewController.storyboard;
        UIViewController *rootViewController = [storyboard instantiateViewControllerWithIdentifier:@"rootNavigationController"];
        self.window.rootViewController = rootViewController;
        [self.window makeKeyAndVisible];
    }

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2020-04-27T23:21:49.847

**斯威夫特 5**

如果您没有在情节提要中将 ViewController 设置为初始 ViewController，则需要做 2 件事：

1.  转到您的项目 TARGETS，选择您的项目 -> 常规 -> 清除主界面字段。
2.  始终在项目 TARGETS 中，现在转到 Info -> Application Scene Manifest -> Scene Configuration -> Application Session Role -> Item0 (Default Configuration) -> 删除情节提要名称字段。

最后，您现在可以在 SceneDelegate 中添加代码：

```
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    // Use this method to optionally configure and attach the UIWindow `window` to the provided UIWindowScene `scene`.
    // If using a storyboard, the `window` property will automatically be initialized and attached to the scene.
    // This delegate does not imply the connecting scene or session are new (see `application:configurationForConnectingSceneSession` instead).
    guard let windowScene = (scene as? UIWindowScene) else { return }

    window = UIWindow(windowScene: windowScene)

    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    // Make sure you set an Storyboard ID for the view controller you want to instantiate
    window?.rootViewController = storyboard.instantiateViewController(withIdentifier: identifier)
    window?.makeKeyAndVisible()

} 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2017-01-15T23:02:06.980

**Swift 3：**更新@victor-sigler 的代码

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    self.window = UIWindow(frame: UIScreen.main.bounds)

    // Assuming your storyboard is named "Main"
    let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)

    // Add code here (e.g. if/else) to determine which view controller class (chooseViewControllerA or chooseViewControllerB) and storyboard ID (chooseStoryboardA or chooseStoryboardB) to send the user to

    if(condition){
        let initialViewController: chooseViewControllerA = mainStoryboard.instantiateViewController(withIdentifier: "chooseStoryboardA") as! chooseViewControllerA
        self.window?.rootViewController = initialViewController
    )
    }else{
        let initialViewController: chooseViewControllerB = mainStoryboard.instantiateViewController(withIdentifier: "chooseStoryboardB") as! chooseViewControllerB
        self.window?.rootViewController = initialViewController
    )

    self.window?.makeKeyAndVisible(

    return true
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-10-07T15:22:47.633

您可以将 Navigation rootviewcontroller 设置为主视图控制器。这个想法可以根据应用程序要求用于自动登录。

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"Main" bundle: nil];

UIViewController viewController = (HomeController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"HomeController"];

UINavigationController navController = [[UINavigationController alloc] initWithRootViewController:viewController];

 self.window.rootViewController = navController;

if (NSFoundationVersionNumber > NSFoundationVersionNumber_iOS_6_1) {

    // do stuff for iOS 7 and newer

    navController.navigationBar.barTintColor = [UIColor colorWithRed:88/255.0 green:164/255.0 blue:73/255.0 alpha:1.0];

    navController.navigationItem.leftBarButtonItem.tintColor = [UIColor colorWithRed:88/255.0 green:164/255.0 blue:73/255.0 alpha:1.0];

    navController.navigationBar.tintColor = [UIColor whiteColor];

    navController.navigationItem.titleView.tintColor = [UIColor whiteColor];

    NSDictionary *titleAttributes =@{

                                     NSFontAttributeName :[UIFont fontWithName:@"Helvetica-Bold" size:14.0],

                                     NSForegroundColorAttributeName : [UIColor whiteColor]

                                     };

    navController.navigationBar.titleTextAttributes = titleAttributes;

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent];

}

else {

    // do stuff for older versions than iOS 7

    navController.navigationBar.tintColor = [UIColor colorWithRed:88/255.0 green:164/255.0 blue:73/255.0 alpha:1.0];

    navController.navigationItem.titleView.tintColor = [UIColor whiteColor];

}

[self.window makeKeyAndVisible]; 
```

对于 StoryboardSegue 用户

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"Main" bundle: nil];

// Go to Login Screen of story board with Identifier name : LoginViewController_Identifier

LoginViewController *loginViewController = (LoginViewController*)[mainStoryboard instantiateViewControllerWithIdentifier:@“LoginViewController_Identifier”];

navigationController = [[UINavigationController alloc] initWithRootViewController:testViewController];

self.window.rootViewController = navigationController;

[self.window makeKeyAndVisible];

// Go To Main screen if you are already Logged In Just check your saving credential here

if([SavedpreferenceForLogin] > 0){
    [loginViewController performSegueWithIdentifier:@"mainview_action" sender:nil];
} 
```

谢谢

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-05-03T09:42:39.510

打开 mainstoryboard，选择你要先启动的视图，然后打开 Utilities--> Attributes。在“视图控制器”下方，您会看到“是初始视图控制器”单选按钮。只需选择它。

--- 对于修改后的问题：

也许你可以试试这个：在初始视图的 ViewDidLoad 部分编写一个方法，当该方法在应用程序启动时运行时，方法会触发另一个视图的 segue。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-03T10:11:02.563

我不认为这是可能的。相反，您可以拥有一个初始控制器，它将与不同的视图控制器具有 segues。在启动时，您可以决定以编程方式执行哪个 segue。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-05-07T20:28:03.373

如果您在 iOS 13+ 中使用场景委托：

确保在您的`Info.plist`文件中找到该行：

```
Application Scene Manifest > Scene Configuration > Application Session Role > Item 0 
```

并删除对 Main Storyboard 的引用。否则，您将收到关于未能从情节提要中实例化的相同警告。

此外，将代码从应用程序委托移动到场景委托方法`scene(_:willConnectTo:options:)`，因为这是现在处理生命周期事件的地方。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-05-13T11:55:38.680

您可以`initial view controller`使用 Interface Builder 以及以编程方式进行设置。

以下是以编程方式使用的方法。

*目标-C：*

```
 self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

        UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"HomeViewController"]; // <storyboard id>

        self.window.rootViewController = viewController;
        [self.window makeKeyAndVisible];

        return YES; 
```

*斯威夫特：*

```
 self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
        let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)

        var objMainViewController: MainViewController = mainStoryboard.instantiateViewControllerWithIdentifier("MainController") as! MainViewController

        self.window?.rootViewController = objMainViewController

        self.window?.makeKeyAndVisible()

        return true 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-08-04T09:26:12.967

另一个使用**Swift 3**和**Swift 4**避免强制转换的解决方案是这样的

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    self.window = UIWindow(frame: UIScreen.main.bounds)
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    guard let viewController = storyboard.instantiateViewController(withIdentifier: "YourViewController") as? YourViewController else {
        return false
    }
    self.window?.rootViewController = viewController
    self.window?.makeKeyAndVisible()
    return true
} 
```

下面是使用 with`UINavigationController`

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    self.window = UIWindow(frame: UIScreen.main.bounds)
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    guard let viewController = storyboard.instantiateViewController(withIdentifier: "YourViewController") as? YourViewController else {
        return false
    }
    let navigationController = UINavigationController(rootViewController: viewController)
    self.window?.rootViewController = navigationController
    self.window?.makeKeyAndVisible()
    return true
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-05-17T11:06:28.347

您可以在`AppDelegate.swift`其中添加以下代码：

```
let sb = UIStoryboard(name: "Main", bundle: nil)
let vc = sb.instantiateViewController(withIdentifier: "YourViewController_StorboardID")
self.window?.rootViewController = vc
self.window?.makeKeyAndVisible() 
```

当然，您需要实现您的逻辑，根据您将选择合适的视图控制器的标准。

另外，不要忘记添加身份（选择故事板 -> 控制器场景 -> 显示身份检查器 -> 分配 StorboardID）。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-06-14T09:24:01.233

我创建了一个路由类来处理动态导航并保持干净的 AppDelegate 类，我希望它对其他人也有帮助。

```
//
//  Routing.swift
// 
//
//  Created by Varun Naharia on 02/02/17.
//  Copyright © 2017 TechNaharia. All rights reserved.
//

import Foundation
import UIKit
import CoreLocation

class Routing {

    class func decideInitialViewController(window:UIWindow){
        let userDefaults = UserDefaults.standard
        if((Routing.getUserDefault("isFirstRun")) == nil)
        {
            Routing.setAnimatedAsInitialViewContoller(window: window)
        }
        else if((userDefaults.object(forKey: "User")) != nil)
        {
            Routing.setHomeAsInitialViewContoller(window: window)
        }
        else
        {
            Routing.setLoginAsInitialViewContoller(window: window)
        }

    }

    class func setAnimatedAsInitialViewContoller(window:UIWindow) {
        Routing.setUserDefault("Yes", KeyToSave: "isFirstRun")
        let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
        let animatedViewController: AnimatedViewController = mainStoryboard.instantiateViewController(withIdentifier: "AnimatedViewController") as! AnimatedViewController

        window.rootViewController = animatedViewController
        window.makeKeyAndVisible()
    }

    class func setHomeAsInitialViewContoller(window:UIWindow) {
        let userDefaults = UserDefaults.standard
        let decoded  = userDefaults.object(forKey: "User") as! Data
        User.currentUser = NSKeyedUnarchiver.unarchiveObject(with: decoded) as! User

        if(User.currentUser.userId != nil && User.currentUser.userId != "")
        {
            let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
            let homeViewController: HomeViewController = mainStoryboard.instantiateViewController(withIdentifier: "HomeViewController") as! HomeViewController
            let loginViewController: UINavigationController = mainStoryboard.instantiateViewController(withIdentifier: "LoginNavigationViewController") as! UINavigationController
            loginViewController.viewControllers.append(homeViewController)
            window.rootViewController = loginViewController
        }
        window.makeKeyAndVisible()
    }

    class func setLoginAsInitialViewContoller(window:UIWindow) {
        let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
        let loginViewController: UINavigationController = mainStoryboard.instantiateViewController(withIdentifier: "LoginNavigationViewController") as! UINavigationController

        window.rootViewController = loginViewController
        window.makeKeyAndVisible()
    }

  class func setUserDefault(_ ObjectToSave : Any?  , KeyToSave : String)
    {
        let defaults = UserDefaults.standard

        if (ObjectToSave != nil)
        {

            defaults.set(ObjectToSave, forKey: KeyToSave)
        }

        UserDefaults.standard.synchronize()
    }

    class func getUserDefault(_ KeyToReturnValye : String) -> Any?
    {
        let defaults = UserDefaults.standard

        if let name = defaults.value(forKey: KeyToReturnValye)
        {
            return name as Any
        }
        return nil
    }

    class func removetUserDefault(_ KeyToRemove : String)
    {
        let defaults = UserDefaults.standard
        defaults.removeObject(forKey: KeyToRemove)
        UserDefaults.standard.synchronize()
    }

} 
```

在你的 AppDelegate 中调用这个

```
 self.window = UIWindow(frame: UIScreen.main.bounds)
 Routing.decideInitialViewController(window: self.window!) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-01-03T19:42:54.677

前几天我也遇到过同样的情况。一个非常简单的技巧解决了这个问题。我在launch2之前设置了隐藏我的初始视图控制器。如果初始视图控制器是正确的控制器，它在 viewDidLoad 中设置为可见。否则，对所需的视图控制器执行 segue。它在 iOS 6.1 及更高版本中完美运行。我确信它适用于早期版本的 iOS。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-05-30T09:14:50.240

```
 func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        self.window = UIWindow(frame: UIScreen.main.bounds)
        let storyboard = UIStoryboard(name: "Main", bundle: nil)
        if (PreferenceHelper.getAccessToken() != "") {
            let initialViewController = storyboard.instantiateViewController(withIdentifier: "your View Controller Identifier")
            self.window?.rootViewController = initialViewController
        } else {
            let initialViewController = storyboard.instantiateViewController(withIdentifier: "your View Controller identifier")
            self.window?.rootViewController = initialViewController
        }
        self.window?.makeKeyAndVisible()
        return true
    }

/*
use your view Controller identifier must use it doubles quotes**strong text** 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-12-07T08:53:56.923

```
let mainStoryboard = UIStoryboard(name: "Main", bundle: nil)
let vc = mainStoryboard.instantiateViewController(withIdentifier: "storyBoardid") as! ViewController
let navigationController = UINavigationController(rootViewController: vc)
UIApplication.shared.delegate.window?.rootViewController = navigationController 
```

另一种方式是呈现viewController，

```
let mainStoryboard = UIStoryboard(name: "Main", bundle: nil)
let vc = mainStoryboard.instantiateViewController(withIdentifier: "storyBoardid") as! ViewController
self.present(vc,animated:true,completion:nil) 
```

首先，您需要创建情节提要的对象，然后更改根目录（如果需要），然后引用特定的视图控制器，该视图控制器被推送当前视图控制器（如果您更改根目录），否则它只是呈现新的视图控制器，您可以

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-02-26T07:33:39.847

**Swift 5 或更高版本**# 通过这个简单的代码制作路由视图控制器。如果您使用的是 xcode 11 或更高版本，请先`var window: UIWindow?`在 AppDelegate 中初始化

```
let rootVC = mainStoryboard.instantiateViewController(withIdentifier: "YOURCONTROLLER") as! YOURCONTROLLER

        navigationController.setNavigationBarHidden(true, animated: true)
        UIApplication.shared.windows.first?.rootViewController = UINavigationController.init(rootViewController: rootVC)
        UIApplication.shared.windows.first?.makeKeyAndVisible() 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-10-01T05:48:15.390

找到简单的解决方案 - 无需从情节提要和编辑项目信息选项卡中删除“初始视图控制器检查”并使用`makeKeyAndVisible`，只需放置

```
self.window.rootViewController = rootVC; 
```

在

```
- (BOOL) application:didFinishLaunchingWithOptions: 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-02-09T17:42:22.067

**斯威夫特 4，Xcode 9**

在**AppDelegate.swift文件中**

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    let firstVC = storyboard.instantiateViewController(withIdentifier: "firstViewController") as! firstViewController
    self.window?.rootViewController = firstVC
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-06-08T19:29:50.290

如果您不想更改 applicationDidFinish，可以执行以下技巧：

将导航控制器设置为初始视图控制器并为其分配自定义类“MyNavigationController”。然后你可以在 viewDidLoad 期间调整它的根视图控制器——它将覆盖你在故事板中设置的根视图控制器。

```
class MyNavigationController: UINavigationController {
    override func viewDidLoad() {
        super.viewDidLoad()
        if !isLoggedIn() {
            viewControllers = [R.storyboard.authentication.loginView()!]
        }
    }

    private func isLoggedIn() -> Bool {
        return false
    }

} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-05-15T07:09:41.253

感谢在 AppDelegate 中对此进行了如下修改：

```
func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) ->     Bool {
//Some code to check value of pins

if pins! == "Verified"{
        print(pins)
        self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
        let mainStoryboard: UIStoryboard = UIStoryboard(name: "HomePage", bundle: nil)
        let exampleViewController: UINavigationController = mainStoryboard.instantiateViewControllerWithIdentifier("SBHP") as! UINavigationController

        self.window?.rootViewController = exampleViewController

        self.window?.makeKeyAndVisible()
    }else{
        print(pins)
        self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
        let mainStoryboard: UIStoryboard = UIStoryboard(name: "Main", bundle: nil)
        let exampleViewController: UINavigationController = mainStoryboard.instantiateViewControllerWithIdentifier("SBUser") as! UINavigationController

        self.window?.rootViewController = exampleViewController

        self.window?.makeKeyAndVisible()
    } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-03-01T18:28:09.650

**Xcode 12.4 斯威夫特 5**

在*SceneDelegate.Swift*

```
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    guard let windowScene = (scene as? UIWindowScene) else { return }
    let window = UIWindow(windowScene: windowScene)
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    window.rootViewController = storyboard.instantiateViewController(withIdentifier: "UserViewController") as! UserViewController

    self.window = window
    window.makeKeyAndVisible()
} 
```

您可以添加视图控制器场景将显示的条件

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-06-22T10:12:05.257

**使用 Storyboards（而不是 Main）设置初始 ViewController**

[[Swift 5 和 Xcode 11]](https://stackoverflow.com/a/61506795/4770877)

1.  `Main.storyboard`-> 视图控制器 -> 属性检查器 -> 取消选中`Is Initial View Controller`

2.  应用程序目标 -> 常规 -> 全部删除`Main Interface`

3.  编辑应用委托

```
@main
class AppDelegate: UIResponder, UIApplicationDelegate {

    var window: UIWindow?

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        // Override point for customization after application launch.
        self.window = UIWindow(frame: UIScreen.main.bounds)

        let storyboard: UIStoryboard = UIStoryboard(name: "SomeStoryboard", bundle: nil) //SomeStoryboard  is name of .storyboard
        let viewController: ViewController = storyboard.instantiateViewController(withIdentifier: "someStoryboardId") as! ViewController //someStoryboardId is Storyboard ID

        self.window?.rootViewController = viewController
        self.window?.makeKeyAndVisible()

        return true
    }
} 
```

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2012-05-03T09:41:51.127

选择要首先打开的视图控制器并转到属性检查器。转到初始场景并检查初始视图控制器选项。

现在这将是您的初始视图控制器，它将在应用程序启动时首先打开。

# javascript - 如何仅在精确的 div 内获得工作实时点击功能

> ID：10428632
> 
> 赞同：0
> 
> 时间：2012-05-03T09:30:08.790
> 
> 标签：javascript, jquery, click, jquery-events

假设我们有带有 class 的 div `.row`。

目前我的实时点击功能如下所示：

```
$(".row").live('click',function(event) { 
```

我想要做的就是将此函数仅应用于那些 div，这些 div 位于具有 class 的精确 div 内`data`。我是说

```
<div class="row">!don't apply!</div>
<div class="data">
   <div class="row">apply1!</div>
   <div class="row">apply2!</div>
</div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:33:05.437

使用 jQuery 的`.on()`

```
$('.data').on('click', '.row', function(){
  // function stuff
}); 
```

如果`.data`也是异步加载的，您可以“更进一步”

```
$('body').on('click', '.data .row', function(){
  // function stuff
}); 
```

只需`'body'`用您的换行选择器替换...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:32:14.377

```
$(".data > .row").live('click',function(event) {

}); 
```

但尽量避免`live()`使用如下：

```
$('.data').on('click', '.row', function() {

}); 
```

或者你可以使用`delegate()`

```
$(".data").delegate(".row", "click", function(){

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:33:19.587

你可以用你的选择器更具体一点，即

```
$(".data > .row").live('click',function(event) {... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T09:32:06.347

```
$('.data > .row').live('click',function(event) { 
```

你去吧。

CSS 选择器 > 只选择“真正的”孩子。不允许孙子。

[并且使用 on() 因为 live() 不再被鼓励。](https://stackoverflow.com/questions/8042576#answers-header)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:35:32.557

```
$('.data > .row').live('click',function(event) { 
```

# apache - 提供旧内容，同时更改

> ID：10428633
> 
> 赞同：0
> 
> 时间：2012-05-03T09:30:22.210
> 
> 标签：apache, http, curl

想象一下，我有一个带有列表的文件。通常，此文件/列表会更新/更改。在更改时，我想提供旧版本，直到更改完成。

我有一个 Apache 服务器，我使用 cURL 来更改文件。

**问题**：当我使用`PUT`更新列表同时使用`GET`获取相同列表时，我会在此时获得文件的中间状态。

**问题**：有没有办法提供旧文件，只要写入/`PUT`进程没有终止（好吧）？

感谢您对此主题的任何提示或进一步讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:37:43.937

听起来您需要确保“新”列表是完整的并且可以在丢弃旧列表之前准备好。在一个非常高的层次上，我想象这样的事情：

获取 -> 返回“文件 A”

放-> 创建“文件 B”。完成后，删除“文件 A”并将“文件 B”重命名为“文件 A”。

# java - 在 Java 中实现 Serializable 的惩罚？

> ID：10428635
> 
> 赞同：38
> 
> 时间：2012-05-03T09:30:25.937
> 
> 标签：java, performance, serializable

有加罚吗

```
implements Serializable 
```

到 Java 类？对实例化对象的大小或性能的影响？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-03T09:39:11.937

除非您执行序列化/反序列化，否则不会对性能产生影响，但在 api 设计方面需要权衡取舍。

来自Joshua Bloch 的[Effective java](http://java.sun.com/docs/books/effective/)

> *   实现 Serializable 的一个主要成本是它降低了在类发布后更改其实现的灵活性
> *   实现 Serializable 的第二个成本是它增加了错误和安全漏洞的可能性
> *   实现 Serializable 的第三个成本是它增加了与发布类的新版本相关的测试负担

这些在多大程度上适用于您取决于您​​的用例。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-03T09:32:24.223

除非您/其他人实际序列化/反序列化，否则不会有任何影响。`Serializable`只是一个标记界面。

它可能只会将生成的字节码的大小增加几个字节。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-05-03T09:37:02.690

成本接近于零，不值得关注。

一些进一步的细节：

*   每个对象实例的大小没有增加
*   类本身的大小略有增加，但由于这是一次性成本，因此在大量实例中摊销时是微不足道的
*   对于需要在运行时进行接口检查的任何事情（反射、instancof 查找、内联缓存的额外压力等），可能会有一点额外的运行时成本。同样，这对于大多数用途来说可能是微不足道的。
*   Serializable 是一个**标记接口**，没有需要实现的方法。其他标记接口示例有：Clonable、SingleThreadModel、事件监听器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T10:45:01.627

您应该始终首先考虑维护开销。已部署应用程序的实时成本可能是开发成本的数倍。

在这种情况下，使类可序列化但实际上并未用于序列化的成本可能会导致错误或混乱，这远远超过性能成本。例如，说它需要 1 分钟或某人的时间来确定不需要 Serializable，这可能比应用程序产生的几纳秒额外启动时间要多得多。

如果您确实需要它是可序列化的，则无法将其与不可序列化的版本进行比较，因为只有第一种情况才能真正完成所需的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:40:44.793

`Serializable`只是一个“标记”界面。它不需要您实现任何方法。

唯一的一点是建议有一个`static final long serialVersionUID`帮助序列化的API。`long`每个序列化类需要一个值。

您可能想查看[这篇关于 Java 序列化 API](http://java.sun.com/developer/technicalArticles/Programming/serialization/)的文章。它详细描述了序列化/反序列化的大部分注意事项。

# wpf - 如何阻止 WPF Datagridtemplatecolumn 退出编辑模式？

> ID：10428636
> 
> 赞同：1
> 
> 时间：2012-05-03T09:30:35.987
> 
> 标签：wpf, datagrid, popup

我正在编写一个 MVVM WPF 应用程序，其中包含需要可编辑的值数据网格。值的含义因其他数据而异，因此我编写了一个用户控件，用于使用模板编辑它们，该模板取决于值的类型。即，它可能显示为文本框、组合框或链接到数据库以检索可能值的其他几个内部控件之一。这是我用过的xaml。

```
<DataGridTemplateColumn Header="Value">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <local:ValueViewingControl Value="{Binding Value}" ValueType="{Binding SettingValueType}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <local:ValueEditingControl Value="{Binding Value,Mode=TwoWay}" ValueType="{Binding SettingValueType}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

问题是一旦进入编辑模式，下一次单击 ValueEditingControl 的任何部分都会导致单元格退出编辑模式并返回到 ValueViewingControl，然后我才能真正做任何事情。我认为这与细胞认为它失去了焦点有关。有谁知道在我实际使用标签或单击单元格之前将单元格保持在编辑模式的方法？

[编辑] 多一点测试表明，如果我使用文本框或标准组合框作为编辑控件，它会按预期工作。这让我觉得它是我编写的自定义控件的实现，其中包含弹出窗口。当我选择作为编辑控件一部分的弹出窗口时，它认为我已经离开了数据网格单元，因此结束了编辑模式。我如何说服 datagridcell 弹出窗口在其中以达到焦点目的？它必须是可能的，否则组合框将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:14:04.267

感谢这个问题[WPF Popup focus in data grid](https://stackoverflow.com/questions/1784977/wpf-popup-focus-in-data-grid)，我找到了解决我自己问题的部分方法。
问题似乎是当我在弹出窗口中单击时，我的弹出窗口所浮动的数据网格单元试图抢夺焦点。
我的解决方案是将此处理程序和辅助函数添加到包含弹出窗口的用户控件

```
Private Sub ControlRoot_PreviewLostKeyboardFocus(sender As System.Object, e As System.Windows.Input.KeyboardFocusChangedEventArgs)
    Dim popupelement As Popup = FindVisualChild(Of Popup)(ControlRoot)
    If (popupelement IsNot Nothing AndAlso popupelement.IsOpen) Then
        e.Handled = True
    End If
End Sub

Function FindVisualChild(Of T As DependencyObject)(ByVal element As DependencyObject) As T
    If element Is Nothing Then
        Return Nothing
    ElseIf TypeOf (element) Is T Then
        Return element
    Else
        Dim count = VisualTreeHelper.GetChildrenCount(element)
        For index As Integer = 0 To count - 1
            Dim child As DependencyObject = VisualTreeHelper.GetChild(element, index)
            If TypeOf (child) Is T Then
                Return child
            Else
                Dim grandchild As T = FindVisualChild(Of T)(child)
                If grandchild IsNot Nothing Then Return grandchild
            End If
        Next
    End If
    Return Nothing
End Function 
```

如果弹出窗口打开，这会阻止焦点离开。它并不完美，所以如果有人有更好的解决方案，我会全力以赴，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:08:40.377

如何以这种方式进入编辑模式：

```
<DataGrid.CellStyle>
    <Style TargetType="{x:Type DataGridCell}">
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="IsEditing" Value="True" />
            </Trigger>
        </Style.Triggers>
    </Style>
</DataGrid.CellStyle> 
```

`DataGridCell`不再选择时，编辑模式结束。

# java - 如何在指定的时间范围内停止 tibco 消息

> ID：10428649
> 
> 赞同：0
> 
> 时间：2012-05-03T09:31:22.897
> 
> 标签：java, tibco

1.  假设 Tibco 发送关于指定主题的消息
2.  听众正在听一个主题
3.  现在，我不想在指定的时间范围内向侦听器发送任何内容，而是所有属于该时间范围的消息都应该存储在 Tibco 的队列中。

是否有可能做到这一点？理想情况下，我想在 Java 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:46:11.940

当您使用术语`subject`时，我假设我们正在谈论使用**TIBCO Rendezvous**从未知发件人向您的听众发送的消息？

[TIBCO Rendezvous](http://www.tibco.com/products/soa/messaging/rendezvous/default.jsp)基于[多播](http://en.wikipedia.org/wiki/Multicast)，在性能方面非常出色，但在可靠性和有保证的交付方面却没有那么出色。TIBCO 在产品中加入了一些技巧来克服这些缺点。在您的情况下，您可以使用 RVCM（Rendezvous Certified Messaging）将消息存储在磁盘上的分类帐文件中，直到所有侦听器都发送确认他们已收到消息 OK。例如，如果您的监听器关闭了几个小时，消息将被传递，然后监听器再次启动。

请注意，要使上述操作生效，侦听器必须在指定的时间范围内停止侦听。如果这还不够，我建议在当前发送者和侦听器之间插入一个定制组件，充当基于时间的路由器。

另请注意，另一个常见的 TIBCO 消息传递平台，[TIBCO EMS](http://www.tibco.com/products/soa/messaging/enterprise-mesage-service/)将为此目的提供更好的服务（RV 分类帐文件是专有的，而 EMS 队列上的消息可以使用 JMS 访问）。

EMS 和 RV 都可以使用多种语言，包括 Java。

# iphone - 如何模仿 iPad 侧边栏的 Keynote？

> ID：10428652
> 
> 赞同：0
> 
> 时间：2012-05-03T09:31:28.653
> 
> 标签：iphone, objective-c, ios, xcode, keynote

我希望创建[Keynote for iPad](http://www.apple.com/uk/apps/keynote/)中显示的侧边栏的表示。我怎样才能为 iOS 做到这一点？我会想象需要一个 UITableView，但不太确定是否保存当前屏幕？

已经看过一个示例项目，但没有太多帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:08:51.720

使用此链接我认为这对您有帮助。首先尝试使用此代码。您将尝试此代码在 nib 上添加一个滚动视图并在 viewdidload 上设置其内容大小

```
CGFloat x = 20;
for (int i = 0;i<[playerScores count];i++) {
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(x, 10, 60, 60)];
view.backgroundColor=[UIColor blueColor];
NSString *text = [NSString stringWithFormat:[playerScores objectAtIndex:i]];
[view setText:text];

[yardsScrollView addSubview:view];
[myLabel release];
x = x+125;
} 
```

PlayersScore 是一个 NSMutable 数组，其中包含许多文本，例如您想要多少视图。

然后也检查一下。

[https://github.com/bjhomer/HSImageSidebarView](https://github.com/bjhomer/HSImageSidebarView)

# d - 在 Sconstruct 中，如何指定 D 编程语言的包含路径

> ID：10428656
> 
> 赞同：2
> 
> 时间：2012-05-03T09:31:53.790
> 
> 标签：d, scons

似乎 CPPPATH 不起作用

```
env = Environment()
target = 'app'
sources = ['app.d']
libs = ['phobos2', 'pthread', 'm', 'rt']
includes = ['/home/supertool/devel/d/vibe.d/source/vibe']

env.Program(target = target,
        source = sources,
        LIBS = libs,
        CPPPATH = includes); 
```

当我运行 scons 时，它会生成编译命令：

```
dmd -I. -c -ofapp.o app.d 
```

`includes`未添加到`-I`部分

那么我该如何配置呢？有 INCLUDEPATH 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:51:13.743

您可以尝试*手动*构建路径，而不是使用`CPPPATH`SCons 为其前置的构造变量，如下所示：`-I`

 *```
includePaths = ['-Ipath1', '-Ipath2']
....
env.Program(target = target,
            source = sources,
            LIBS = libs,
            CCFLAGS = includePaths); 
```

但这可能会导致同样的问题，`CCFLAGS`不会用于`D`编译。除了`DSUFFIXES`

**编辑**：看起来`DFLAGS`并`DPATH`没有记录

我在我的机器上玩这个，看到它`CCFLAGS`不会工作`D`，但是`DFLAGS`会`DPATH`做，而且它们没有记录:(`DPATH`将`"I"`在编译时预先设置，所以它类似于`CPPPATH`

SCons 用户邮件列表上有关于加强 SCons D 支持的讨论。*

# php - 哪个版本的 Ubuntu 最适合 LAMP 和 Web 开发服务器？为什么推荐 ubuntu 32 位？

> ID：10428657
> 
> 赞同：-3
> 
> 时间：2012-05-03T09:31:54.053
> 
> 标签：php, python, ruby-on-rails, apache, ubuntu

我只是想安装 Ubuntu 作为我的 web 开发服务器，主要是 LAMP 环境，还有 RoR 和 Python，但都用于 web 开发。我也在考虑在那里运行一些版本控制服务器，但仅此而已。

所以我导航到[Ubuntu 下载页面](http://www.ubuntu.com/download/desktop)并感到困惑，因为推荐的版本是 32 位。我的 PC 运行的是 Intel i7，并且认为 64 位对我来说会更好更快。

为什么推荐 32 位？有没有合理的解释？哪个版本最适合我将要处理的事情？

顺便说一句，我不会在这个平台上编写代码——这只能是 Web 开发和版本控制服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:35:03.720

64 位不一定更快，通常在执行一些非常密集的任务时，您会发现真正的区别。我猜他们推荐 32 位版本的原因是因为 32 位进程使用较少的 RAM，这有时可能是服务器上的问题。

我总是选择 64 位，但如果你内存不足，试试 32 位也不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:35:44.313

推荐的版本是 32 位，因为它可以在 32 位和 64 位（x86 兼容）平台上运行，而且由于很多人真的不知道他们的 cpu 是什么，所以到底是*i5*或*celeron*或*ahtlon 3200 +*，他们更容易告诉所有人（谁不知道更好）下载 32 位版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:36:04.707

去 64 位，然后你没有得到内存限制，32 位系统会受到影响。据我所知，您不会运行任何不支持 64 位的程序

# svn - TortoiseSVN“显示日志”显示不正确的日志（来自不同的存储库）

> ID：10428661
> 
> 赞同：4
> 
> 时间：2012-05-03T09:32:13.393
> 
> 标签：svn, tortoisesvn

我有一个名为 的存储库`myrepos`，并且需要一个基于 HEAD 的新存储库。所以，我使用了 SVN`hotcopy`命令来实现这个 - `myrepos-R2`。

现在，我对 进行了一些更改`myrepos-R2`，并且过去可以通过 tortoiseSVN 查看这些评论。然而突然之间，我似乎无法看到评论。日志不断显示来自主人的评论。另外，当我尝试查看我在 中修改的特定文件的日志时`myrepos-R2`，乌龟说它找不到它。

有什么想法吗？这是乌龟问题还是SVN？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T14:00:54.237

你有几个选项来解决这个问题：

1.  禁用日志缓存（设置->日志缓存->启用日志缓存）
2.  由于您的两个存储库具有相同的 UUID，因此允许不明确的 UUID（设置-> 日志缓存-> 允许不明确的 UUID）
3.  更改您的第二个存储库 ( `svnadmin setuuid REPOS_PATH`) 上的存储库 UUID。我会选择这个选项，因为每个存储库都应该有自己的 UUID。

# c# - 无法访问 System.Windows 命名空间

> ID：10428663
> 
> 赞同：1
> 
> 时间：2012-05-03T09:32:14.517
> 
> 标签：c#, wpf

我有一个类，我想扩展 WPF Window 类。我找不到要扩展的类。我认为它在`System.Windows`名称空间中，但我无权访问它。任何人都可以帮忙。

如果您需要更多信息，请告诉我。

我正在将项目构建为类库。

目前的参考资料是：

```
Microsoft.CSharp
System
System.Core
System.Data
System.Data.DataSetExtentions
System.Xml
System.Xml.Linq 
```

我正在尝试扩展`System.Windows.Window`课程，但是当我输入 时`System.`，没有`.Windows`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T09:41:07.930

您需要添加对 PresentationFramework 的引用（在 PresentationFramework.dll 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:52:15.320

[Window](http://msdn.microsoft.com/en-us/library/system.windows.window.aspx)类是在 PresentationFramework.dll 程序集中声明的，因此您需要添加对它的引用。

# ios - 如何使用特定字体创建电子邮件？

> ID：10428672
> 
> 赞同：0
> 
> 时间：2012-05-03T09:33:07.497
> 
> 标签：ios, mfmailcomposeviewcontroller

我制作了一个具有特定字体（handwriting.ttf）的应用程序，**它在应用程序中工作得非常好，但是当我通过我的应用程序通过电子邮件发送以这种字体编写的文本时 - 字体在接收器端变得乱码**（原因是接收器没有在他的电脑中有这个特殊的字体）

我见过另一个使用自定义字体通过电子邮件发送文本的应用程序。这让我相信像这样的功能是有效的——但我不知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:56:38.670

当你说胡言乱语时，你的意思是用户正在查看副本，但是对齐和其他图形元素被搞砸了，或者你真的看到了一些完全无法理解的东西。我本来希望您的字体标签具有一系列字体，并且如果尝试使用自定义字体失败，电子邮件将退回到更标准的字体之一。请使用 (a) 您用于创建电子邮件正文的代码以及 (b) 它在电子邮件客户端中呈现方式的屏幕快照更新您的原始问题。

两个直接的建议：

1.  如果您知道其他使用自定义字体发送电子邮件的应用程序（我对此感到惊讶，但我会相信您的话），让其中一个应用程序向您发送电子邮件，然后查看该电子邮件的来源并查看它在电子邮件 html 中的内容并检查它是如何做到的；

2.  我收到的大多数使用专用字体的电子邮件也包含各种图形元素，并且将电子邮件作为图像发送（您可以使用 base64 将其嵌入到基于 html 的电子邮件中，或者放在一些服务器上并链接到 <img> 那里），也经常带有文本再现。您可以使用[Quartz 2D](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)创建这些图像，然后嵌入到您的电子邮件中。显然，这并不适用于所有情况，但使用图像作为电子邮件正文或 PDF（您也可以从应用程序生成）作为附件似乎更常见。

就个人而言，我会回避在电子邮件的 html 正文中嵌入自定义字体，因为您会受制于用户的电子邮件客户端如何呈现自定义字体（如果有的话）的变幻莫测。另外，您需要进行一些详尽的测试，检查不同电子邮件客户端中的电子邮件（正如@meccan 的评论链接所做的那样）。如果生成的电子邮件的外观和感觉是关键且高度风格化的，并且如果电子邮件的内容相对较短，我会倾向于选项 2。

# jquery - 由于 console.log，JQuery 数据表在 IE 中崩溃 JS

> ID：10428673
> 
> 赞同：9
> 
> 时间：2012-05-03T09:33:16.903
> 
> 标签：jquery, internet-explorer, datatables

我只是想分享一个我在数据表组件中解决的错误。

显然，当数据表脚本出现问题时，它会调用 _fnLog 并将错误输出到控制台。

这是函数的代码：

```
function _fnLog(oSettings, iLevel, sMesg) {
        var sAlert = (oSettings === null) ?
            "DataTables warning: " + sMesg :
            "DataTables warning (table id = '" + oSettings.sTableId + "'): " + sMesg;

        if (iLevel === 0) {
            if (DataTable.ext.sErrMode == 'alert') {
                alert(sAlert);
            }
            else {
                throw sAlert;
            }
            return;
        }
        else {
            if (console !== undefined && console.log) {
                console.log(sAlert);
            }
        }
    } 
```

注意这里的最后几行是检查“console”是否存在，然后执行 console.log 操作。在 IE 中，控制台对象不存在，除非我们正在运行调试器。这使得发现这个错误变得非常困难和烦人。无论如何，您不能像那样引用“控制台”。IE 无一例外地停止脚本。您必须使用“window”对其进行限定，以便正确的脚本是

```
if (window.console !== undefined && console.log) {
      window.console.log(sAlert);
} 
```

我希望这会有所帮助，因为我只花了一个小时在这上面:)

埃亚尔

# c++ - 显式构造函数及其使用（默认？）值的定义

> ID：10428674
> 
> 赞同：1
> 
> 时间：2012-05-03T09:33:16.903
> 
> 标签：c++, qt, class, explicit

> **可能重复：**
> [构造函数中这个奇怪的冒号成员语法是什么？](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor)

我需要快速回答以下问题。它是关于一个 C++ 类（一个 QT 派生类，但我认为这在这里并不重要）。

在头文件中，我有以下声明：

```
class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow(); 
```

而在源文件中我有以下定义：

```
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)
{
    QWidget * central = new QWidget(this); 
```

这个问题，也许清楚地表明了我对 C++ 的无知，它是：

`: QMainWindow(parent)`在构造函数的定义中是什么意思？是某种默认初始化吗？这是否与构造函数是显式的这一事实有关（我对它的含义有所了解，但没有详细说明）？

拜托，我知道这个问题可能非常简单和菜鸟，我只是不知道从哪里开始。

谢谢你。

编辑：感谢所有回答的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:34:08.073

它从基类调用特定的构造函数。

它与构造函数无关`explicit`。在这种情况下，显式意味着 a`QWidget*`不能隐式转换为`MainWindow`对象。

`:QMainWindow(parent)`简单地说，`QWidget*`应该调用带有 as 参数的基类构造函数来构造对象。

# entity-framework - Entity Framework 4.1 Code First 中的原子事务，没有存储过程

> ID：10428675
> 
> 赞同：1
> 
> 时间：2012-05-03T09:33:17.530
> 
> 标签：entity-framework, stored-procedures, transactions, ef-code-first, atomic

有没有办法先在代码中实现事务而不必编写存储过程？

在某些情况下，需要先使用唯一的 guid 创建多表条目，然后才能创建最终表条目。这是我可以单独使用 EF 编码的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:37:38.717

`DbContext.SaveChanges()`方法使用事务。所以它是原子的，你不想使用存储过程。unitOfWork 模式在 EF 本身中实现以实现此目的。
但是，假设您正在使用两个 DbContext 实例来处理您的工作，那么您需要使用这样的事务范围来包装您的工作，

```
using (var scpe=new TransactionScope()){
...
context1.SaveChanges();
....
context.SaveChanges();

scope.Complete();
} 
```

> SaveChanges 在事务中运行。如果任何脏 ObjectStateEntry 对象无法持久保存，SaveChanges 将回滚该事务并引发异常。

[请参阅文档](http://msdn.microsoft.com/en-us/library/bb336792.aspx)

# c - 关于访问不同源文件中定义的结构

> ID：10428678
> 
> 赞同：0
> 
> 时间：2012-05-03T09:33:20.930
> 
> 标签：c, struct

没有任何作业，但似乎在做基础时迷路了，因此问。

假设我有 2 个 C 源文件。1.c & 2.c

2.c如下：

```
typedef struct mystr_
{
    int a;
    float b;
}mystr;

void fun()
{
    mystr q;

    some code....
} 
```

1.c如下：

```
#include "stdio.h"

void fun();

main()
{
    //How to access / declare a variable of type mystr here.

    mystr *v1;//This obviously gives compiler errors

      some code....    

} 
```

如何从文件 1.c 访问 2.c 中定义的结构 mystr 以在其中拥有该结构类型的变量？

编辑：

抱歉忘记在 OP 中提及。由于某种原因，我无法将声明移出头文件-> 这是我试图签入现有代码的快速技巧。那么有没有办法直接从其他源文件中访问呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:35:30.403

使用标题。

创建文件`2.h`

```
typedef struct mystr_
{
    int a;
    float b;
}mystr; 
```

并将其包含在`1.c`

```
#include "2.h"
#include "stdio.h"

void void fun(); 
```

编辑：因为您无法将声明提取到头文件中并包含它，所以除了复制声明之外别无他法。这是一个非常脆弱的结构，快速但主要是肮脏的，除非你没有其他选择，否则不推荐。

# javascript - 在 JavaScript 中将逗号放在数字中

> ID：10428680
> 
> 赞同：1
> 
> 时间：2012-05-03T09:33:30.150
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 Javascript 整数中放置逗号](https://stackoverflow.com/questions/4820482/place-commas-in-javascript-integers)

我在 JavaScript 中有一个包含数字的变量，我想在所有正确的地方用逗号显示它。因此，对于 222222，我需要 222,222，对于 1000333，我需要 1,000,333。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:37:32.850

尝试这个：

```
function addGrouping(val, grouper) {
    val += '';
    x = val.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + grouper + '$2');
    }
    return x1 + x2;
}

addGrouping(1231.897243, ",")
// 1,231.897243 
```

[**示例小提琴**](http://jsfiddle.net/xn44C/)

# ruby-on-rails - 在我的 Rails 应用程序中从用户直接上传到另一台服务器

> ID：10428683
> 
> 赞同：0
> 
> 时间：2012-05-03T09:33:38.480
> 
> 标签：ruby-on-rails, ruby, file, upload

我希望用户将我的视频文件上传到dailymotion。在我看来，我提供了这个输入字段......

```
[...]
<%= file_field 'file_path' %>
[...] 
```

但这会导致我的 rails 应用程序直接将其上传到我的 rails 应用程序服务器。我希望用户直接将其上传到另一台服务器-dailymotion，在这种情况下（ api 有效，在这里无关紧要）

你们能帮我或给我提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:41:44.477

S3SwfUpload 允许用户直接将文件上传到 S3，因此您可以节省在应用服务器中上传过程的成本。

去[https://github.com/nathancolgate/s3-swf-upload-plugin](https://github.com/nathancolgate/s3-swf-upload-plugin)

# node.js - 如何在 Node.js 中运行服务器时实现控制台命令

> ID：10428684
> 
> 赞同：7
> 
> 时间：2012-05-03T09:33:40.430
> 
> 标签：node.js

我正在制作一个游戏服务器，我想在从 SSH 运行服务器后输入命令。例如：addbot、generatemap、kickplayer 等。

就像在半条命或任何其他游戏服务器中一样。如何让 Node.js 监听我的命令并保持服务器在 SSH 中运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T10:36:55.537

您可以像这样使用**process.stdin**：

```
process.stdin.resume();
process.stdin.setEncoding('utf8');

process.stdin.on('data', function (text) {
  console.log(text);
  if (text.trim() === 'quit') {
    done();
  }
});

function done() {
  console.log('Now that process.stdin is paused, there is nothing more to do.');
  process.exit();
} 
```

否则，您可以使用诸如提示[https://github.com/flatiron/prompt](https://github.com/flatiron/prompt)之类的帮助程序库，它可以让您执行以下操作：

```
var prompt = require('prompt');

// Start the prompt
prompt.start();

// Get two properties from the user: username and email
prompt.get(['username', 'email'], function (err, result) {

  // Log the results.
  console.log('Command-line input received:');
  console.log('  username: ' + result.username);
  console.log('  email: ' + result.email);
}) 
```

# java - 使用 Spring roo 在 GWT 中进行菜单导航

> ID：10428686
> 
> 赞同：1
> 
> 时间：2012-05-03T09:33:45.903
> 
> 标签：java, gwt, spring-roo, uibinder

我用*Roo创建了一个**GWT*项目。 `Spring`

 *`spring` *Roo*为每个实体提供表格列表。但我只想在单击特定的`menu item`. （我的菜单是在*GWT*中创建的）。

请让我知道如何实现这个简单的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:54:14.120

只需添加一个`Command`或其他菜单事件侦听器/操作命令，并将您的代码放在`execute`命令类的方法中。这样每当有人点击菜单时，这个代码块就会被执行。例子：

```
Command command = new Command()
{
    public void execute()
    {
        Window.alert("Command Fired");
    }
};

// Top-level menu
MenuBar menutop = new MenuBar();
menutop.addStyleName("demo-MenuItem");

// Item to fire a command
MenuItem fireone = new MenuItem("Fire One", command);

menutop.addItem(fireone); 
```*

# c++ - 请帮我在这个编译器错误丛林中找到实际错误

> ID：10428689
> 
> 赞同：0
> 
> 时间：2012-05-03T09:33:52.753
> 
> 标签：c++, compiler-errors, g++

我一生都无法弄清楚编译器想从我这里得到什么。

任何有编译器消息经验的人都可以帮我破译它想要什么吗？我什至无法提供代码位，因为我不知道发生了什么。

我正在使用带有 -std=c++11 的 g++-4.7

[http://pastebin.com/AxYMd6L8](http://pastebin.com/AxYMd6L8)

似乎它抱怨 SimpleMapSquare 以及它是一个分配器？不是那样的。SimpleMapSquare 定义为：

```
#pragma once

namespace BlackDragonEngine
{
struct SimpleMapSquare
{
  int TileID;
};
} 
```

我昨天写了大约 400 多行模板代码，只是试图在我的主应用程序中包含它的标题，然后就发生了这种情况......

我什至不知道从哪里开始......请帮忙。

编辑：在我的项目中搜索“vector<”会返回：http: [//i.imgur.com/g8L1l.png](http://i.imgur.com/g8L1l.png)
我扩展了相关文件（我昨天创建的文件）

我写这么多代码没有测试的原因是因为我正在将我的引擎从 C# 转换为 C++，所以逻辑方面已经是正确的，我无法测试不完整的代码。

编辑 2：这里是“SimpleMapSquare”的所有用法[http://i.imgur.com/zedkh.png](http://i.imgur.com/zedkh.png)

EDIT3：
感谢 Konrad，我能够查明确切的行并找到错误...忽略上面的搜索，因为我忘记包含 *.inl 文件（模板代码实现所在的位置）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:38:01.363

您在某处使用以下类：

```
class std::vector<sf::Vector2<int>, BlackDragonEngine::SimpleMapSquare> 
```

的第二个类型参数`std::vector`是分配器类型！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:41:34.380

看起来 SimpleMapSquare 包含类型的定义`value_type`，`pointer`和`reference`。

就像 STL 将 SimpleMapSquare 视为迭代器、分配器或其他需要类的特征。

您是否将它作为错误的参数传递给某处？

# javascript - jQuery 窗口滚动事件。每滚动 XX 个像素

> ID：10428690
> 
> 赞同：6
> 
> 时间：2012-05-03T09:33:55.973
> 
> 标签：javascript, jquery, window, scroll

我正在为一个项目使用出色的 jQuery Reel 插件 ( [http://jquery.vostrel.cz/reel](http://jquery.vostrel.cz/reel) )。我想绑定到窗口滚动事件，所以当用户向下滚动页面时，插件会前进 1 帧，例如每滚动 10 像素，如果用户向上滚动，则动画会反转。

该插件具有我可以将值传递给没有问题的方法，并且我知道如何绑定到窗口滚动事件。我正在努力的是最后一个。

我如何使用 jQuery/JavaScript 来表示在任何垂直方向上滚动的每 10 个像素在动画中前进 1 帧？我知道我可以将窗口滚动存储在一个变量中，但我不确定每次它达到 10 的倍数前一帧时怎么说。

提前谢谢了。

编辑

感谢以下用户的帮助，我制定了解决方案。如下：

```
$(window).scroll(function()
{
    windowScrollCount   = $(this).scrollTop();
    animationFrame      = Math.round(windowScrollCount / 100);
}); 
```

所以在这里我在 windowScrollCount 中获取滚动距离，将其转换为 animationFrame 中的帧并使用 .reel("frame", animationFrame); 将其设置回来。我实际上每 100 帧就这样做一次，因为每 10 帧就快了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T13:26:22.523

感谢 codef0rmer 和 noShowP 的帮助，我找到了解决方案。如下：

```
$(window).scroll(function()
{
    windowScrollCount   = $(this).scrollTop();
    animationFrame      = Math.round(windowScrollCount / 100);
}); 
```

所以在这里我在 windowScrollCount 中获取滚动距离，将其转换为 animationFrame 中的帧并使用 .reel("frame", animationFrame); 将其设置回来。我实际上每 100 帧就这样做一次，因为每 10 帧就快了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T12:10:28.463

如果我错了，那么你可能想要这个：

```
var jump = 500;  // consider this is your 10px 
window.scrollHeight = 0;
$(window).scroll(function () {
   console.log($(this).scrollTop());
   var diff = $(this).scrollTop() - window.scrollHeight;
    if (diff >= jump) {
       window.scrollHeight = $(this).scrollTop();   
       console.log('reload frame');
    }
}); 
```

演示：http: [//jsfiddle.net/Dyd6h/](http://jsfiddle.net/Dyd6h/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:12:14.270

您可能在页面顶部有一个粘性元素，

> 位置：固定；前 0；左：0；

（如果你喜欢隐藏）。

然后当你滚动时，你可以监控它的偏移量：

```
$('element').offset().top 
```

然后，您可以看到页面向下滚动了多远，因此每次滚动时，您都会看到它的最高值是多少并适当地触发事件？

编辑：

我已经建立了一个小 JSfiddle，开始我认为你需要的东西。

[http://jsfiddle.net/qJhRz/3/](http://jsfiddle.net/qJhRz/3/)

我只是计算您需要使用的帧并将其存储在变量中。是不是和你要找的一样？

# linux - 如何在 Bash / Ubuntu 12.04 中正确编写此算术表达式？

> ID：10428691
> 
> 赞同：1
> 
> 时间：2012-05-03T09:34:08.027
> 
> 标签：linux, bash, shell, ubuntu

我无法以某种方式完成这项工作，

```
(( chunks = $size / $chunk_size + 1 ))
echo $chunks 
```

**编辑**

* * *

我也试过，

```
chunks = $(( $size / $chunk_size + 1 )) 
```

* * *

虽然这有效，

```
while [ $counter -le 10 ]; do
    echo $counter;
    (( counter++ ))
done 
```

前者给了我`/ 157286400 + 1 ")syntax error: invalid arithmetic operator (error token is "`，错误本身的格式不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:16:55.503

您的`$size`变量未初始化或其中包含其他非数字字符。

```
$ chunk_size=157286400
$ unset size
$ (( chunks = $size / $chunk_size + 1 ))
-bash: ((: chunks =  / 157286400 + 1 : syntax error: operand expected (error token is "/ 157286400 + 1 ")
$ size=$'\r'  # carriage return
$ (( chunks = $size / $chunk_size + 1 ))
 / 157286400 + 1 ")syntax error: operand expected (error token is " 
```

您可以通过修改 AWK 命令来删除回车，如下所示：

```
awk '/^Content-Length:/ { gsub("\015", "", $2); print $2 }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:39:53.283

确保 $size 和 $chunk_size 已初始化...已测试：

```
size=1
chunk_size=2
(( chunks = $size / $chunk_size + 1 ))
echo $chunks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:04:27.330

尝试这个：

```
let size=10
let chunk_size =2
declare -i chunks
let chunks =  $(($size / $($chunk_size + 1))))
echo $chunks 
```

# javascript - 防止多次点击选中的单选框

> ID：10428696
> 
> 赞同：0
> 
> 时间：2012-05-03T09:34:16.113
> 
> 标签：javascript, html

我有一个表格，用户可以在其中给出 1 到 5 的评分，这是通过单选框完成的。但是如果不检查用户可以多次单击同一个按钮，我该如何防止这种情况发生？
代码很简单

```
 echo "<input type='hidden' name='risk' />
            <td>1<input type='radio' name='question[]' id=1 value=1 onclick='calculate_score(".$number.",this.value)'/></td>
            <td>2<input type='radio' name='question[]' id=2 value=2 onclick='calculate_score(".$number.",this.value)'/></td>
            <td>3<input type='radio' name='question[]' id=3 value=3 onclick='calculate_score(".$number.",this.value)'/></td>
            <td>4<input type='radio' name='question[]' id=4 value=4 onclick='calculate_score(".$number.",this.value)'/></td>
            <td>5<input type='radio' name='question[]' id=5 value=5 onclick='calculate_score(".$number.",this.value)'/></td>
            </table></form>"; 
```

谁能告诉我如何处理这个？请注意，上面的代码只是从代码中截取的，它确实有效。它纯粹是功能性的。正如您所看到的，一旦单击此单选框，它就会转到一个 javascript 函数，我是否在那里建立检查，我将如何处理这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:37:41.770

您可以禁用刚刚选中的按钮，启用所有其他按钮，一旦用户更改其值，将启用以前的按钮并禁用新的按钮，以防止用户进一步点击该按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:42:50.067

您需要编写`calculate_score()`函数，使其根据用户选择的状态进行计算，而不是根据选中或取消选中按钮的操作。阻止用户更改他的选择将是糟糕的可用性和糟糕的功能（可能在特殊的游戏或测试中除外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:41:12.237

我会建议你使用一个好的框架（比如 jQuery）并将你的 javascript 逻辑放入一个`<script>`标签中，但是如果你这样做，你必须有你的理由。要禁用单击的输入元素，请尝试以下代码段：

```
// i am assuming (\") will escape the quote (") character to echo
onclick='calculate_score(".$number.",this.value); this.onclick=\"\";' 
```

# struts2 - struts2中的默认结果

> ID：10428697
> 
> 赞同：0
> 
> 时间：2012-05-03T09:34:26.623
> 
> 标签：struts2, action

我想知道是否可以设置适用于 struts2 中每个操作的默认结果。

例如，说结果“FOO”将始终重定向到操作 BAR 或 jsp“BAR.jsp”，而不是添加`<result name="FOO">xxx</result>`到我定义的每个操作...

这将帮助我创建一个通用错误页面

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:25:48.677

是的，您可以为包设置全局结果。

```
<global-results>
    <result name="error">/Error.jsp</result>
    <result name="invalid.token">/Error.jsp</result>
    <result name="login" type="redirectAction">Logon!input</result>
</global-results> 
```

有关更多详细信息，请阅读[结果配置页面](http://struts.apache.org/2.0.11.1/docs/result-configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:21:22.517

我想到的一个快速解决方案是全局结果配置。大多数情况下，结果嵌套在 action 元素中。但有些结果适用于多个操作。在安全应用程序中，客户端可能会尝试在未经授权的情况下访问页面，并且许多操作可能需要访问“登录”结果。

如果动作需要共享结果，可以为每个包定义一组全局结果。框架将首先查找嵌套在操作中的本地结果。如果未找到本地匹配，则检查全局结果。

```
<global-results>
    <result name="error">/Error.jsp</result>
    <result name="invalid.token">/Error.jsp</result>
    <result name="login" type="redirectAction">Logon!input</result>
</global-results> 
```

更多详情请参考官方文档

*   [结果配置](http://struts.apache.org/2.3.1/docs/result-configuration.html)

# date - J2ME 中的 SimpleDateFormat

> ID：10428702
> 
> 赞同：0
> 
> 时间：2012-05-03T09:34:44.110
> 
> 标签：date, java-me, time

我制作了一个 J2ME 应用程序，我只想打印系统日期和时间，当我搜索时，我找到了用于该目的的这个类，但我没有在 J2ME 中找到它来使用它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:46:38.343

这足以满足您的需要吗？

```
    日历 cal = Calendar.getInstance();
    StringBuffer 日期 = new StringBuffer();
    StringBuffer 时间 = new StringBuffer();

    date.append(cal.get(Calendar.DATE)).append('/');
    date.append(cal.get(Calendar.MONTH) +1).append('/');
    date.append(cal.get(Calendar.YEAR));
    time.append(cal.get(Calendar.HOUR_OF_DAY)).append(':');
    time.append(cal.get(Calendar.MINUTE)).append(':');
    time.append(cal.get(Calendar.SECOND));

```

# jfreechart - jfreechart中的粗体x轴值

> ID：10428703
> 
> 赞同：2
> 
> 时间：2012-05-03T09:34:45.580
> 
> 标签：jfreechart

如何在 jfreechart 中**加粗**x 和 y 轴值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T09:42:42.237

您是否尝试过其中一种：

```
yourAxis.setTickLabelFont(new Font("Arial", Font.BOLD, 10)); //to define a specific font 
```

或者

```
Font bold = yourAxis.getTickLabelFont().deriveFont(Font.BOLD);
yourAxis.setTickLabelFont(bold); //to use the existing font, but bold 
```

# sqlite - SQLite 主键选项

> ID：10428707
> 
> 赞同：1
> 
> 时间：2012-05-03T09:34:58.810
> 
> 标签：sqlite, xamarin.ios

我正在编写一个将数据存储在 SQLite 数据库中的移动应用程序。当我尝试将设备与服务器数据库和其他设备同步时，标准的自动增量 id 主键列会很痛苦。以前我在 SQLServerCE 中使用 GUID 作为主键，这在将数据从多个移动数据库传输到单个服务器数据库时非常有效。但 GUID 不是 SQLite 中支持的数据类型。在 SQLite中创建*全局*唯一 ID 的最佳/最简单选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:06:31.767

几乎每种数据类型（整数除外）都将存储为字符串，那么为什么不在应用程序中生成 guid 并将其存储在主键（字符串）列中呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T12:08:12.737

恕我直言，最简单的方法是从您的代码中传递一个 GUID（通过 Guid.NewGuid() 获得）以及记录插入上的其余记录数据。

# c# - Windows 窗体 - 非活动突出显示颜色

> ID：10428710
> 
> 赞同：3
> 
> 时间：2012-05-03T09:35:10.477
> 
> 标签：c#, winforms, winapi, colors, ui-guidelines

我有一个`ListView`控制`OwnerDraw = true`。

*   有时我的控制可能没有集中，但选择了项目。*我应该使用哪种颜色来呈现选择栏？*

*   我找不到任何指导方针，但是，普通人似乎为此`ListView`使用了`SystemColors.Control`颜色*（见图）。*

    ![在此处输入图像描述](../Images/810aba1fdbc01a4e9bd1ea7745d8e141.png)

*   **我可以依靠它还是在某些情况下不正确？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:13:30.007

`SystemColors.Control`是正确使用的颜色。不幸的是，对于非活动项目没有预定义`Color`的 in`SystemColors`使其显而易见，但它是可靠的。

唯一不能依赖的`SystemColors`是用户对 Windows 中的主题颜色设置进行显式更改时。但是，您不应该关心这一点，因为它是一个明确的用户选择，并且您不应该干涉用户选择。

至于指南，Windows UX 指南没有明确说明用于非活动项目的适当颜色，但它强调选择与操作系统一致的颜色，以提供良好的对比度和易读性。

在我不太担心外观和感觉的应用程序中，我使用默认系统颜色，但如果我为自己的应用程序设置主题（例如，看起来像 Visual Studio），我完全避免使用系统颜色并使用 web代替颜色。

希望这有帮助。

# webdav - 使用 Tsung 进行 WebDAV 测试

> ID：10428711
> 
> 赞同：1
> 
> 时间：2012-05-03T09:35:12.987
> 
> 标签：webdav, stress-testing, tsung

我已经安装了 Tsung 并启动并运行了 HTTP，但是，主要目的是使用 Tsung 进行 WebDAV 测试。但是我没有看到记录器在已安装的驱动器上拾取我的任何操作。我正在使用这个命令：

```
tsung-recorder -p webdav start 
```

如果我通过浏览器，则会记录操作，但如果我通过安装的网络驱动器，则不会记录任何内容。

我想知道 Tsung 是否真的支持 Web 驱动器的已安装驱动器测试。是否可以在已安装的驱动器上执行创建、复制、编辑资源等操作？

如果可能的话，我也可以在没有记录器的情况下工作（仅通过脚本）。

# c# - MonoDroid DialogFragment setStyle

> ID：10428715
> 
> 赞同：1
> 
> 时间：2012-05-03T09:35:27.853
> 
> 标签：c#, android, xamarin.android

我目前正在尝试将 DialogFragment 从 Java 转换为 C#。

在 Java 中，我可以使用 setStyle(STYLE_NO_TITLE, Theme); 设置对话框的样式和主题。但是在 MonoDroid 中我找不到这样做的方法。我可以找到类型 DialogFragmentStyle.NoTitle 但无论如何我都找不到使用它来设置样式或无论如何设置主题。

有人知道如何做到这一点吗？

提前致谢。特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:14:17.517

您可以使用 Android.Ressource.Style 并选择您想要的样式，因此您的 SetStyle 可能如下所示：

```
SetStyle(DialogFragmentStyle.Normal, Android.Resource.Style.ThemeHoloLight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T10:26:28.410

When using AndroidX, you should use the following:

```
SetStyle(AndroidX.Fragment.App.DialogFragment.StyleNormal, Android.Resource.Style.ThemeHoloLight); 
```

# drupal-7 - 自定义 node.tpl 文件在 drupal 7 项目中不起作用

> ID：10428716
> 
> 赞同：0
> 
> 时间：2012-05-03T09:35:29.710
> 
> 标签：drupal-7

根据主题开发人员模块的建议，我创建了一个名为 node--product-display.tpl.php 的节点文件。但是我对此文件所做的更改没有显示出来。我还在我的模板目录中复制了 node.tpl.php 文件。后一个的变化出现了，而前一个的变化没有。有什么建议么？顺便说一句，我是 Drupal 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:10:52.750

尝试清除缓存。转到“管理员/配置/开发/性能”，然后单击“清除缓存”按钮。

希望这会有所帮助……穆罕默德。

# html - 如何通过 CSS 在有序列表中保持第二行的缩进？

> ID：10428720
> 
> 赞同：311
> 
> 时间：2012-05-03T09:35:41.507
> 
> 标签：html, css, html-lists

我想要一个“内部”列表，其中列表项目符号或十进制数字都与高级文本块齐平。列表条目的第二行必须与第一行具有相同的缩进！

**例如：**

```
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Aenean commodo ligula eget dolor. Aenean Aenean massa. 
Cum sociis natoque penatibus et magnis dis parturient montes, 
nascetur ridiculus mus. Donec quam felis,

1\. Text
2\. Text
3\. longer Text, longer Text, longer Text, longer Text, longer Text, longer Text
   second line of longer Text
4\. Text

Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Aenean commodo ligula eget dolor. 
```

CSS 只为其“list-style-position”提供了两个值——内部和外部。“内部”第二行与列表点齐平，而不是与上级线齐平：

```
3\. longer Text, longer Text, longer Text, longer Text, longer Text, longer Text
second line of longer Text
4\. Text 
```

我的列表“外部”的宽度不再与高级文本块齐平。

实验宽度 text-indent、padding-left 和 margin-left 适用于无序列表，但它们对有序列表失败，因为它取决于列表小数的字符数：

```
 Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
 Aenean commodo ligula eget dolor. 

 3\. longer Text, longer Text, longer Text, longer Text, longer Text, longer Text
    second line of longer Text
 4\. Text
11\. Text
12\. Text 
```

“11。” 和“12”。与“3”相比，不与高级文本块齐平。和“4.”。

那么关于有序列表和第二行缩进的秘密在哪里呢？谢谢你的努力！

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2013-07-07T18:55:03.873

## 更新

这个答案已经过时了。正如下面另一个答案中所指出的，您可以更简单地执行此操作：

```
ul {
  list-style-position: outside;
} 
```

见[https://www.w3schools.com/cssref/pr_list-style-position.asp](https://www.w3schools.com/cssref/pr_list-style-position.asp)

## 原始答案

我很惊讶地看到这个问题还没有解决。您可以像这样使用浏览器的表格布局算法（不使用表格）：

```
ol {
    counter-reset: foo;
    display: table;
}

ol > li {
    counter-increment: foo;
    display: table-row;
}

ol > li::before {
    content: counter(foo) ".";
    display: table-cell; /* aha! */
    text-align: right;
} 
```

演示：http: [//jsfiddle.net/4rnNK/1/](http://jsfiddle.net/4rnNK/1/)

![在此处输入图像描述](../Images/da8564f354063122e509af6a6a743bc5.png)

要使其在 IE8 中工作，请使用`:before`带有一个冒号的遗留符号。

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2013-07-07T17:29:48.850

我相信这会满足您的需求。

```
.cssClass li {
  list-style-type: disc;
  list-style-position: inside;
  text-indent: -1em;
  padding-left: 1em;
} 
```

JSFiddle：[https ://jsfiddle.net/dzbos70f/](https://jsfiddle.net/dzbos70f/)

[![在此处输入图像描述](../Images/feb6f57061480865fd0bd0df4175c3ab.png)](https://i.stack.imgur.com/lAoUv.png)

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-08-18T13:22:08.403

最简单和最干净的方法，没有任何技巧，就是缩进`ul`（或`ol`），如下所示：

```
ol {
  padding-left: 40px; // Or whatever padding your font size needs
} 
```

这给出了与接受的答案相同的结果：[https ://jsfiddle.net/5wxf2ayu/](https://jsfiddle.net/5wxf2ayu/)

截屏：

[![在此处输入图像描述](../Images/1b4a2e7597e464f3aa5c11c5e9a6a1d4.png)](https://i.stack.imgur.com/TAEyy.png)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-05-03T14:03:48.760

检查这个小提琴：

[http://jsfiddle.net/K6bLp/](http://jsfiddle.net/K6bLp/)

它展示了如何手动缩进`ul`和`ol`使用 CSS。

**HTML**

```
<html>
  <head>
    <title>Lines</title>
  </head>
  <body>
    <ol type="1" style="list-style-position:inside;">
      <li>Text</li>
      <li>Text</li>
      <li>longer Text, longer Text, longer Text, longer Text    second line of longer Text</li>
    </ol>  
    <br/>
    <ul>
      <li>Text</li>
      <li>Text</li>
      <li>longer Text, longer Text, longer Text, longer Text    second line of longer Text</li>
    </ul>
  </body>
</html> 
```

**CSS**

```
ol 
{
    margin:0px;
    padding-left:15px;
}

ol li 
{
    margin: 0px;
    padding: 0px;
    text-indent: -1em;
    margin-left: 1em;
}

ul
{
    margin:0;
    padding-left:30px;
}

ul li 
{
    margin: 0px;
    padding: 0px;
    text-indent: 0.5em;
    margin-left: -0.5em;
} 
```

我还编辑了你的小提琴：

[http://jsfiddle.net/j7MEd/3/](http://jsfiddle.net/j7MEd/3/)

记下它。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-05-03T09:44:59.380

您可以在 CSS中设置`ol`或设置边距和内边距：`ul`

```
ol {
  margin-left: 0;
  padding-left: 3em;
  list-style-position: outside;
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-11-30T14:34:27.937

您可以使用 CSS 选择范围；在这种情况下，您需要列出项目 1-9：

```
ol li:nth-child(n+1):nth-child(-n+9) 
```

然后适当地调整这些第一个项目的边距：

```
ol li:nth-child(n+1):nth-child(-n+9) { margin-left: .55em; }
ol li:nth-child(n+1):nth-child(-n+9) em,
ol li:nth-child(n+1):nth-child(-n+9) span { margin-left: 19px; } 
```

在此处查看实际操作：[http ://www.wortfm.org/wort-madison-charts-for-the-week-beginning-11192012/](http://www.wortfm.org/wort-madison-charts-for-the-week-beginning-11192012/)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-07-17T19:48:15.903

下面的 CSS 做到了：

```
ul {
  margin-left: 1em;
}

li {
  list-style-position: outside;
  padding-left: 0.5em;
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-03-24T23:23:31.437

我相信您只需要将列表“子弹”放在填充之外。

```
li {
  list-style-position: outside;
  padding-left: 1em;
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-09-10T15:30:05.533

我的解决方案与[Pumbaa80](https://stackoverflow.com/a/17515230/1213879)的解决方案完全相同，但我建议使用`display: table`而不是`display:table-row`for `li`element。所以它会是这样的：

```
ol {
  counter-reset: foo; /* default display:list-item */
}

ol > li {
  counter-increment: foo;
  display: table; /* instead of table-row */
}

ol > li::before {
  content: counter(foo) ".";
  display: table-cell;
  text-align: right;
} 
```

`li`所以现在我们可以使用边距作为's之间的间距

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-20T10:35:05.270

我自己非常喜欢这个解决方案：

```
ul {
  list-style-position: inside;
  list-style-type: disc;
  font-size: 12px;
  line-height: 1.4em;
  padding: 0 1em;
}

ul li {
  margin: 0 0 0 1em;
  padding: 0 0 0 1em;
  text-indent: -2em;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-06T20:04:25.637

如果您愿意，ol、ul 列表将起作用，您还可以在 css 中使用带边框的表格：无。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-25T17:24:32.223

*CSS 只为其“list-style-position”提供了两个值——内部和外部。“内部”第二行与列表点齐平，而不是与上级线齐平：*

在有序列表中，如果没有干预，如果你给“list-style-position”值“inside”，长列表项的第二行将没有缩进，但会回到列表的左边缘（即它将与项目的编号左对齐）。这是有序列表特有的，在无序列表中不会发生。

如果您将“list-style-position”值改为“outside”，则第二行将与第一行具有相同的缩进。

我有一个带边框的列表并且遇到了这个问题。将“list-style-position”设置为“inside”，我的列表看起来不像我想要的那样。但是将“list-style-position”设置为“outside”时，列表项的数量会落在框外。

我通过简单地为整个列表设置更宽的左边距来解决这个问题，这会将整个列表向右推，回到之前的位置。

CSS：

ol.classname {边距：0；填充：0；}

ol.classname li {margin:0.5em 0 0 0;padding-left:0;list-style-position:outside;}

HTML：

```
<ol class="classname" style="margin:0 0 0 1.5em;"> 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-10-15T19:35:17.420

好的，我已经回去并想通了一些事情。这是我提议的粗略解决方案，但它似乎是可行的。

首先，我将数字设为一系列无序列表。无序列表通常在每个列表项的开头都有一个圆盘（

*   ) 所以你必须将 CSS 设置为 list-style: none;

    然后，我将整个列表显示为：table-row。在这里，我为什么不只是将代码粘贴给您而不是喋喋不休呢？

    ```
    <html>
    <head>
    <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
        <title>Result</title>
    </head>
    <body>
        <div><ul>
            <li>1.</li>
            <li><p>2.</p></li>
            <li>10.</li>
            <li><p>110.</p></li>
            <li>1000.</li>
        </ul>
        </div>
        <div>
            <p>Some author</p>
            <p>Another author</p>
            <p>Author #10</p>
            <p>Author #110</p>
            <p>The one thousandth author today will win a free i-Pod!!!! This line also wraps around so that we can see how hanging indents look.</p>
            </div>
    </body>
    </html>' 
    ```

    CSS：

    ```
    ul li{
    list-style: none;
    display: table-row;
    text-align: right; 
    ```

    }

    ```
    div {
    float: left;
    display: inline-block;
    margin: 0.2em; 
    ```

    }

    这似乎将第二个 div 中的文本与第一个 div 中有序列表中的数字对齐。我已经用标签包围了列表和文本，这样我就可以告诉所有 div 显示为内联块。这很好地排列了它们。

    边距用于在句点和文本开头之间放置一个空格。否则，他们会直接撞在一起，看起来很碍眼。

    我的雇主希望环绕式文本（用于较长的书目条目）与第一行的开头对齐，而不是左侧边距。最初我对正边距和负文本缩进感到不安，但后来我意识到，当我切换到两个不同的 div 时，这样做的效果是使文本全部对齐，因为 div 的左侧边距是文本自然开始的边缘。因此，我所需要的只是 0.2em 的边距来增加一些空间，而其他所有东西都排列整齐。

    如果 OP 遇到类似问题，我希望这会有所帮助……我很难理解他/她。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-06-30T22:00:48.067

我遇到了同样的问题并开始使用[user123444555621 的答案](https://stackoverflow.com/questions/10428720/how-to-keep-indent-for-second-line-in-ordered-lists-via-css#answer-17515230)。但是，我还需要向each添加`padding`和 a ，该解决方案不允许这样做，因为 each是 a 。`border``li``li``table-row`

首先，我们使用 a`counter`来复制`ol`的数字。

然后我们设置`display: table;`每个`li`和`display: table-cell`给`:before`我们缩进。

最后，棘手的部分。由于我们没有使用整个表格布局，`ol`我们需要确保每个表格`:before`的宽度相同。我们可以使用[`ch`单位](https://developer.mozilla.org/en-US/docs/Web/CSS/length#ch)大致保持宽度等于字符数。为了在`:before`' 的位数不同时保持宽度一致，我们可以实现[数量查询](http://alistapart.com/article/quantity-queries-for-css)。假设您知道您的列表不会有 100 项或更多，您只需要一个数量查询规则来告诉`:before`更改其宽度，但您可以轻松添加更多。

```
ol {
  counter-reset: ol-num;
  margin: 0;
  padding: 0;
}

ol li {
  counter-increment: ol-num;
  display: table;
  padding: 0.2em 0.4em;
  border-bottom: solid 1px gray;
}

ol li:before {
  content: counter(ol-num) ".";
  display: table-cell;
  width: 2ch; /* approximately two characters wide */
  padding-right: 0.4em;
  text-align: right;
}

/* two digits */
ol li:nth-last-child(n+10):before,
ol li:nth-last-child(n+10) ~ li:before {
  width: 3ch;
}

/* three digits */
ol li:nth-last-child(n+100):before,
ol li:nth-last-child(n+100) ~ li:before {
  width: 4ch;
}
```

```
<ol>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
  <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur facere veniam saepe vel cumque, nobis quisquam! Velit maiores blanditiis cum in mollitia quas facere sint harum, officia laborum, amet vero!</li>
</ol>
```

# android - 在安卓应用中等待

> ID：10428726
> 
> 赞同：2
> 
> 时间：2012-05-03T09:35:51.897
> 
> 标签：android, multithreading, wait

所以我在我的android程序中使用一个线程来等待一秒钟或更长时间，但有时它会正确，有时它根本不等待，那么可能有另一种方法来等待几秒钟吗？

```
Thread logotimer = new Thread(){
    public void run(){
        try{
            sleep(1500);
            Intent leveloverview = new Intent("com.technopolisapp.FROGLEVEL");
            startActivity(leveloverview);
        }
        catch(InterruptedException e){
            e.printStackTrace();
        }
        finally{
            finish();
        }
    }
};

logotimer.start(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T10:06:15.937

相反，您可以使用 Handler 的线程睡眠概念...

```
new Handler().postDelayed(new Runnable(){
    public void run() {
        Intent leveloverview = new Intent("com.technopolisapp.FROGLEVEL");
        startActivity(leveloverview);
    }
}, 5000); 
```

此代码可能对您有帮助...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T09:47:30.567

您应该看一下 Timer 类，它会创建一个新线程，该线程将在经过特定时间后运行您指定的任何 TimerTask（又名方法）。您还可以安排计时器以特定间隔重复。

这是 Timer 类：http: [//developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

这是 Timer 的基本实现：[http ://steve.odyfamily.com/?p=12](http://steve.odyfamily.com/?p=12)

# javascript - 将其他链接悬停在同一列表中时移动水平背景线

> ID：10428728
> 
> 赞同：3
> 
> 时间：2012-05-03T09:35:53.240
> 
> 标签：javascript, jquery, menu, hover, jquery-animate

你介意看看[我的 jsfiddle](http://jsfiddle.net/Autodealers/YFUsJ/)吗？

如您所见，我在活动列表项锚点下方放置了一条水平线。
我希望水平线位于锚点的底部**，就像悬停时的边框底部一样，而不是光标所在的位置。有人可以帮帮我吗？

提前谢谢你！
亲切的问候，
乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:53:32.750

问题是因为您使用了一个`li`元素来停止鼠标悬停`ul`并反转动画。而是`div`在包含元素内部使用较低的 z-index 来阻止它拦截鼠标悬停事件。

HTML：

```
<div id="container">
    <ul>
        <li><a href="#">sub nav</a></li>
        <li><a href="#">sub nav</a></li>
        <li><a href="# "class="active">sub nav</a></li>
        <li><a href="#">sub nav</a></li>
    </ul>
</div> 
```

修改后的javascript：

```
var animation = $('<div>').css({
    'position': 'absolute',
    'height': active.outerHeight()-1,
    'width': active.outerWidth(),
    'marginTop': (active.parent().index() * active.outerHeight()),
    'borderBottom': '1px solid #000',
    'z-index': -10
}); 
```

[**示例小提琴**](http://jsfiddle.net/YFUsJ/14/)

此外，您需要使元素`border-bottom`透明，`ul li a`以便线条通过它们显示。`margin-bottom: 1px`如果您愿意，可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:51:41.637

不确定您要实现的确切目标，但如果它只是在活动`<li>`元素下有一条线，那么[这个 jsfiddle](http://jsfiddle.net/yJ9JM/)可能会完成这项工作。

它使用您的 css 应用下划线，并带有一些简化的 jQuery：

```
$(document).ready(function() {
    $('ul').mouseout(function(){
        $(this).removeClass('active');
    }).

    $('ul > li').mouseenter(function(){
        $(this).addClass('active');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:59:27.640

问题是动画`li`的 z-index 比其他列表元素高。您需要从链接中删除白色边框。

看看这个小提琴：http: [//jsfiddle.net/YFUsJ/12/](http://jsfiddle.net/YFUsJ/12/)

CSS：

```
ul li {
    display: block;
    position:relative;
    z-index:1;
}
ul li a {
    text-decoration: none;
    height: 30px;
    line-height: 30px;
    display: block;
    padding:5px;
    color: #555;
    font-size: 1.4em;
} 
```

# android - 在Android中放置单击对话框？

> ID：10428730
> 
> 赞同：1
> 
> 时间：2012-05-03T09:36:00.930
> 
> 标签：android, maps, android-listview, android-alertdialog

我在 EditText 中提供地图搜索位置，然后在地图中显示该位置。我需要的是这个，当我们点击地图中的地方时，我想显示一个对话框？这样我就可以把那个地方移到 Android 上`ListView`。

```
package com.example.tutorials;

import java.io.IOException;
import java.util.Locale;

import android.app.Activity;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.location.Geocoder;
import android.location.LocationManager;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import com.google.android.maps.MapView.LayoutParams;  
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Toast;

public class GoogleMap extends MapActivity  
{

     MapView mapView; 

    /** Called when the activity is first created. */
    @Override
    protected boolean isRouteDisplayed() 
    {
    return false;
    }

    public void changeMap(String area)
    {

    mapView = (MapView) findViewById(R.id.mapview);
    MapController mc=mapView.getController();

    GeoPoint myLocation=null;

    double lat = 0;
    double lng = 0;
    try
    {

    Geocoder g = new Geocoder(this, Locale.getDefault());

    java.util.List<android.location.Address> result=g.getFromLocationName(area, 1);
    if(result.size()>0){

    Toast.makeText(GoogleMap.this, "country: " + String.valueOf(result.get(0).getCountryName()), Toast.LENGTH_SHORT).show();
    lat = result.get(0).getLatitude();
    lng = result.get(0).getLongitude();

    }            
    else{
    Toast.makeText(GoogleMap.this, "record not found", Toast.LENGTH_SHORT).show();
    return;
    }
    }
    catch(IOException io)
    {
    Toast.makeText(GoogleMap.this, "Connection Error", Toast.LENGTH_SHORT).show();
    }
    myLocation = new GeoPoint(
    (int) (lat * 1E6),
    (int) (lng * 1E6));
    Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
    mc.animateTo(myLocation);
    mc.setZoom(10);
    mapView.invalidate();
    }
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btnSearch=(Button) findViewById(R.id.btnSearch);
        btnSearch.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        EditText txtSearch=(EditText)findViewById(R.id.txtMapSearch);
        String area=txtSearch.getText().toString();
        Toast.makeText(GoogleMap.this, "Click-" + String.valueOf(area), Toast.LENGTH_SHORT).show();
        GoogleMap.this.changeMap(area);

                    }
        });

        mapView = (MapView) findViewById(R.id.mapview);
        MapController mapController = mapView.getController();
        mapController.setZoom(14);

        LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom); 

        }

    } 
```

请看一次，让我知道在哪里可以对上述代码进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:41:54.827

要显示对话框，请遵循以下代码：

```
public class MapViewer extends MapActivity {

MapView mapView;

MapController mapController;

GeoPoint mgeoPoint;

Drawable marker;

MyLocationOverlay mLocationOverlay;

MotionEvent e;

@Override
protected void onCreate(Bundle icicle) {

// TODO Auto-generated method stub
super.onCreate(icicle);
setContentView(R.layout.main);

mapView = (MapView) findViewById(R.id.mapView);

mapController = mapView.getController();

mapView.setBuiltInZoomControls(true);

mapView.setStreetView(true);

marker = getResources().getDrawable(R.drawable.pushpin);

marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker
        .getIntrinsicHeight());

mapView.getOverlays().add(new MapOverlay(marker));

mLocationOverlay = new MyLocationOverlay(this, mapView);
mapView.getOverlays().add(mLocationOverlay);

setViewLocation();
}

@Override
protected Dialog onCreateDialog(int id) {

// TODO Auto-generated method stub

switch (id) {
    case 0:
        return new AlertDialog.Builder(this).setTitle("Hello").setIcon(
                R.drawable.ic_launcher).setPositiveButton("Yes",
                new OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog , int which) {

                        // TODO Auto-generated method stub

                    }
                }).setCancelable(true).setNegativeButton("Cancel",
                new OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog , int which) {

                        // TODO Auto-generated method stub

                    }
                })

        .setOnCancelListener(new OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {

                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "Dismiss",
                        Toast.LENGTH_SHORT).show();
            }

        }).create();

    default:
        break;
}
return null;
    }

private void setViewLocation() {

String[] coordinates = { "22.716221", "75.896816" };

double lat = Double.parseDouble(coordinates[0]);
double lng = Double.parseDouble(coordinates[1]);
mgeoPoint = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

mapController.animateTo(mgeoPoint);
mapController.setZoom(15);

mapView.invalidate();

}

@Override
protected boolean isRouteDisplayed() {

// TODO Auto-generated method stub
return false;
}

Point scrPoint;

private GeoPoint getPoint(double lat , double lon) {

return (new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6)));
}

class MapOverlay extends
    com.google.android.maps.ItemizedOverlay<OverlayItem> {

List<OverlayItem> ListofGeopoints = new ArrayList<OverlayItem>();

public MapOverlay(Drawable defaultMarker ) {

    super(defaultMarker);

    ListofGeopoints.add(new OverlayItem(getPoint(22.716221, 75.896816),
            "IN", "India"));

    populate();

}

@Override
protected boolean onTap(int index) {

switch (index) {
        case 0:
            Toast.makeText(getApplicationContext(), "GeoLocation : 0",
                    Toast.LENGTH_LONG).show();
            showDialog(0);
        break;
    }

    return true;
}

String add = "";

List<Address> add_List = new ArrayList<Address>();

private void getAddress() {

    add_List = ReverseGeocode
            .getFromLocation(35.594227, -105.223618, 2);

}

@Override
protected OverlayItem createItem(int i) {
    return (ListofGeopoints.get(i));
}

@Override
public int size() {
    return ListofGeopoints.size();
}
}  
} 
```

# actionscript-3 - flash/flex 4 应用程序 - 为什么/何时它在不同环境中的工作方式不同？

> ID：10428737
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:36:10.443
> 
> 标签：actionscript-3, flash, apache-flex

一周以来，我发现我的 flex 4 应用程序在本地环境和远程部署环境中的工作方式有所不同。

我将整个 bin-debug 文件夹复制到遥控器中，但我不知道为什么会发生这种情况？它与复制到远程的相同 swf 和我用来运行应用程序的浏览器相同，但它的行为不同。

好吧，我阅读了一些有布局问题的帖子在本地和远程中的显示方式不同，但让我澄清一下，在我的情况下，我没有看到布局问题，但它的代码似乎工作方式不同。**就像，我在我的代码中实现了动态屏蔽、共谋检测、深度排序算法，这些算法在本地环境中完美运行，而在远程环境中则不行。**

如果您认为这可能是缓存问题，那么让我告诉您。我已经清除了浏览器的缓存（事实上，我几乎每次在运行应用程序之前都会这样做）。另外，我已经完全删除了遥控器中的文件并再次复制了所有文件。我也尝试过部署“发布”版本，但同样的事情。我已经以不同的组合多次执行上述每个步骤以查看修复，但还没有运气。

我相信这不重要

我在本地环境中使用 WAMP，在远程环境中使用 LAMP

为了确保我看到的是最新版本，我添加了一个版本号并显示在调试窗口中。两个环境都显示相同的数字，因此这表明两者是相同的版本。

这些是我与主 swf 一起复制的所有文件

```
framework_4.0.0.14159.swf
main.swf
osmf_flex.4.0.0.13495.swf
rpc_4.0.0.14159.swf
spark_4.0.0.14159.swf
sparkskins_4.0.0.14159.swf
test.swf
textLayout_1.0.0.595.swf 
```

我不知道如何解决这个问题。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:35:14.467

谢谢 shaunhusain 非常感谢。我使用截图工具使用了跟踪并发现了错误。

它全部在**主机名**中。我正在根据**url**中找到的**扩展名找到****资产类型**。如果资产类型是“图像”，我会删除透明像素，如果它不是图像（xml、swf 等）则忽略

 ****这是确定资产类型的代码（注意默认值为“未知”）

```
 private function getAssetType(url:String):String{

        var type:String = "unknown";

        var ext:String = getExtension(url);

        if (ext == "png" || ext == "jpg" || ext == "jpeg" || ext == "bmp"){
            type ="image";
        }else if (ext == "swf"){
            type = "swf";
        }

        return type;

    }
    // this is the buggy code
    private function getExtension(str:String):String{
        return  str.split(".")[1];
    } 
```

该错误在 getExtension() 函数中。我只期望文件名中的点和拆分返回两个数组元素，第二个元素是扩展名。

如果你传递这个变量

[http://localhost/assets/images/Rendered/aksum_se.png](http://localhost/assets/images/Rendered/aksum_se.png)

它返回 png

[http://19x.19x.24x.xxx/assets/images/Rendered/aksum_se.png](http://19x.19x.24x.xxx/assets/images/Rendered/aksum_se.png)

它返回 19x，因此它的格式未知。好吧，我修好了。

现在我有点好奇为什么我的深度排序不起作用，这与任何图像 url 无关，但我想我会做到的。****

# matlab - Matlab 在生成 mex 文件时挂起

> ID：10428741
> 
> 赞同：1
> 
> 时间：2012-05-03T09:36:12.063
> 
> 标签：matlab, mex, matlab-deployment, matlab-figure

当我尝试生成 mex 文件时，Matlab 挂起。当我像往常一样运行程序时，一切正常，当我尝试生成一个 mex 文件时，matlab 到了代码的末尾，但之后什么也没有发生。我知道这可能与数字有关。我在某个地方读到它调用`mclWaitForFiguresToDie`但我不明白如何修复它。

应显示一个图形，但在生成 mex 代码时不显示。

# sql - 即时物化视图何时更新

> ID：10428742
> 
> 赞同：0
> 
> 时间：2012-05-03T09:36:12.243
> 
> 标签：sql, materialized-views, sqlanywhere

我使用 SQL Anywhere 11。

我有以下看法：

```
CREATE MATERIALIZED VIEW "DBA"."PointsAcc"( /* view_column_name, ... */ )
IN "SYSTEM" AS
select sum(PL.Points) AS Sum, DP.UserUID, COUNT(*) AS cnt
FROM Points DP
KEY JOIN PointLine PL
KEY JOIN PointHead PH
GROUP BY DP.UserUID 
```

我在 PointLine 中有一个触发器，应该从此视图中选择总和：

```
CREATE TRIGGER "WorkOnPoints" AFTER INSERT, DELETE
ORDER 1 ON "DBA"."Points"
REFERENCING OLD AS oldrow NEW AS newrow 
FOR EACH ROW
BEGIN
    declare @points integer;
    set @points = (isnull((select isnull(Sum, 0)) FROM PointsAcc where UserUID = newrow.UserUID), 0)) 
END; 
```

@points 变量现在包含插入或删除行之前的总和。如何从触发器中的视图中获取更新的总和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:37:17.967

这取决于您当前使用的 SQLA 版本。

如果您没有创建“立即刷新视图”选项，则必须调用

```
REFRESH MATERIALIZED VIEW view-list 
```

有关更多详细信息，请查看这些链接

[http://dcx.sybase.com/index.html#1201/en/dbreference/alter-materialized-view-statement.html](http://dcx.sybase.com/index.html#1201/en/dbreference/alter-materialized-view-statement.html)

和

[http://dcx.sybase.com/1201/en/dbreference/refresh-materialized-view-statement.html](http://dcx.sybase.com/1201/en/dbreference/refresh-materialized-view-statement.html)

# regex - Maven 没有找到 lucene-regex.jar

> ID：10428746
> 
> 赞同：1
> 
> 时间：2012-05-03T09:36:32.287
> 
> 标签：regex, maven, lucene, build-dependencies

我在项目的**pom.xml中添加了****lucene-regex**依赖项：

 **```
<dependency>
    <groupId>org.apache.lucene</groupId>
    <artifactId>lucene-regex</artifactId>
    <version>3.0.3</version>
</dependency> 
```

但是当我运行时`mvn install`，`BUILD FAILURE`出现以下错误：

```
 package org.apache.lucene.search.regex does not exist 
```

Maven 设法找到**lucene-regex-3.0.3.pom**并将其复制进去，`.m2\repository\org\apache\lucene\lucene-regex\3.0.3`但找不到包含此包的**.jar 。**

知道为什么吗？

谢谢**

# javascript - Javascript：在 x 次异步数据库/ajax 调用之后，有没有更好的方法来执行函数

> ID：10428751
> 
> 赞同：2
> 
> 时间：2012-05-03T09:36:53.740
> 
> 标签：javascript, asynchronous, backbone.js, underscore.js

使用 Backbone.js，我们有一个应用程序，在某些情况下我们需要向客户端 Web 服务发送一个 ajax 帖子。

但是，要发布的内容是动态的，并且是由某个数组决定的。

对于数组中的每个项目，我们需要获取一条数据。

在组装需要发送聚合对象的数据之后。

截至目前，我有一个同步的方法，虽然我觉得这不是最好的方法。

```
var arrParams = [{id: 1, processed: false},{id: 7, processed: false},{id: 4, processed: false}];

function callback(data) {
    $.post()... // jquery ajax to post the data... }

function fetchData(arr, data, callback) {
    var currentId = _(arr).find(function(p){ return p.processed === false; }).id;  // getting the ID of the first param that has processed on false...

    // ajax call fetching the results for that parameter.
    $.ajax({
        url: 'http://mysuperwebservice.com',
        type: 'GET',
        dataType: 'json',
        data: {id: currentId},

        success: function(serviceData) {
            data[currentId] = serviceData;  // insert it into the data
            _(arr).find(function(p){ return p.id === currentId; }).processed = true; // set this param in the array to 'being processed'.
            // if more params not processed, call this function again, else continue to callback
            if(_(arr).any(function(p){ return p.processed === false }))
            {
                 fetchData(arr, data, callback);
            }
            else
            {
                callback(data);
            }
        },
        error: function(){ /* not important fr now, ... */ }
    }); 
}

fetchData(arrParams, {}, callback); 
```

有没有办法异步启动这些调用并仅在所有结果都在时才执行回调？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T09:39:53.220

您必须使用 JQuery`$.Deferred`对象来同步它们。看这篇文章[Deferred Docs](http://api.jquery.com/category/deferred-object/)

你可以这样使用：

```
$.when(
   $.ajax({ url : 'url1' }),
   $.ajax({ url : 'url2' }) // or even more calls
).done(done_callback).fail(fail_callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:42:52.630

我会做这样的事情：

创建一个函数，除了传递给 fetchData 的参数之外，它还获取 arrParams 中的索引，然后在循环中为每个元素调用该函数。在您的元素中处理的成功函数中，将您的元素设置为 true，并通过遍历数组来检查“您是否是最后一个”，并查看其余部分是否也为 true。

如果您制作一个计数器，可以进行一些优化：

```
var todo = arrParams.length; 
```

并在您取得成功时：

```
if (--todo == 0) {
   callback(...)
} 
```

# sql - 计算公制区域中的所有纬度和经度

> ID：10428757
> 
> 赞同：1
> 
> 时间：2012-05-03T09:37:09.010
> 
> 标签：sql, google-maps, google-maps-api-3, geolocation, distance

我知道有很多关于从纬度/经度计算到公制系统的线程。这解决了我问题的第一部分。

我的问题的第二个（主要部分）是这样的：

*   我有谷歌地图作为地图应用程序。
*   我有一对经纬度的点
*   我有一个公制距离，比如说30米。
*   我需要一些点来做一个**sql 查询**。

为什么？

我有很多 POI 记录，可以通过这对 lat&long 进行定位。我不想得到所有的结果（原因：更好的性能）。

有没有办法做类似的事情：

```
select * from myTable where lat> .... and lat < ... and long > ... and long < ...? 
```

这可能吗？如果是，我如何获得这些值`...`？

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T20:29:30.330

看一下文章：[在边界圆内选择点](http://www.movable-type.co.uk/scripts/latlong-db.html)

和 SO 问题：[SQL Query for Performing Radius Search based on Latitude Longitude](https://stackoverflow.com/q/1727137/1314132)

这些应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:33:39.753

这是一个示例查询，它返回供应商 lat/lng 和 lat/lng 对数据库之间的距离：

```
DECLARE
@Latitude float,
@Longitude float

SET @Latitude = 46.51257000000000
SET @Longitude = -84.33660900000000

DECLARE @SampleData TABLE
(
Name varchar(100),
Lat float,
Lng float
)

INSERT INTO @SampleData
(Name, Lat, Lng)
SELECT 'Point1', 46.52450048415351,-84.35223018530274
UNION
SELECT 'Point2', 46.51835838382206,-84.30279170874024
UNION
SELECT 'Point3', 46.522138220045285,-84.2622796237793
UNION
SELECT 'Point4', 46.54056115608927,-84.223140829834

SELECT 
    Name,
    Lat,
    Lng,
    -- using spherical law of cosines, where 6371 is the earth's radius in km. Returns km.
    Distance = ACOS(SIN(RADIANS(@Latitude))*SIN(RADIANS(Lat))+COS(RADIANS(@Latitude))*COS(RADIANS(Lat))*COS(RADIANS(Lng-@Longitude)))*6371  
FROM 
    @SampleData 
```

# android - 是否可以刷新 inCall 屏幕？

> ID：10428758
> 
> 赞同：2
> 
> 时间：2012-05-03T09:37:12.460
> 
> 标签：android

我有一个监听来电的应用程序。该应用程序有一个数据库，其中包含自己的联系人姓名和号码。

当您接到来电时，如果来电号码（例如，1234）在本机联系人数据库中不可用，则应用程序会在其数据库中检查它并从数据库中查找联系人姓名（如果其中有可用号码）。（比如说，xyz）...

我的目标是用新的联系人姓名刷新呼叫屏幕，说“xyz 呼叫..”而不是“1234 呼叫..”..

可能吗？？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:59:42.727

无法刷新来电屏幕，但您可以通过获取自己的数据库来显示所需的名称...为此，您需要在来电屏幕上运行自己的线程，我使用 Timer 和 Timer Task 来执行此操作这是示例

您的 BroadcastReceiver 应包含

```
ServiceReceiver extends BroadcastReceiver{

@Override
public void onReceive(final Context context, Intent intent) {

    Bundle extras = intent.getExtras();

    if (extras != null) {
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        incomingNumber = extras.getString("incoming_number");
if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {

/********** Fetch name from your DB ************/

if (Name not present in your DB) 
{
return;
}

if(present){

incomingCallTimer = new Timer();
ToastMessageHandler messageHandler = new ToastMessageHandler(context, contactName);                 
incomingCallTimer.schedule(new ToastTimer(messageHandler), 1000, 2000);

 }
}

if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
            // callActionHandler.removeCallbacks(runRingingActivity);
            // setResultCode(Activity.RESULT_CANCELED);
            try{
            incomingCallTimer.cancel();
            } catch (Exception e) {

            }
        }
}

class ToastTimer extends TimerTask {

    ToastMessageHandler messageHandler;

    public ToastTimer(ToastMessageHandler messageHandler) {
        this.messageHandler = messageHandler;
    }

    @Override
    public void run() {

        Message message = Message.obtain(messageHandler);
        messageHandler.sendMessage(message);

    }

   }
} 
```

Toast 处理程序类

```
public class ToastMessageHandler extends Handler{

Context context;
String message;

public ToastMessageHandler(Context _context , String _message){
    this.context = _context;
    this.message = _message;

}
@Override
public void handleMessage(Message msg) {
    Toast.makeText(msg);
}
} 
```

# windows-phone-7 - 如何将旋转矩阵投影到 x/z 轴以创建雷达？

> ID：10428760
> 
> 赞同：0
> 
> 时间：2012-05-03T09:37:18.743
> 
> 标签：windows-phone-7, matrix, xna

我正在创建一个展示游戏，它使用手机的传感器在 3d 游戏世界中环顾四周。我想在 xna 中创建一个雷达，显示附近的对手。我使用 MotionReader 中的旋转矩阵。如何使用 RotationMatrix 进行计算？我知道当我使用指南针（航向）创建 y 旋转矩阵时它是如何工作的：

```
Matrix rotation = Matrix.CreateRotationY(MathHelper.ToRadians((float)trueHeading));
EffectRadar.View = rotation * Matrix.CreateLookAt(new Vector3(0, 1.1f, 0), new Vector3(0, -1, 0), new Vector3(0, 0, -1)); 
```

由于我使用的是运动阅读器，如果设备有陀螺仪并且我不想为指南针方向编写自己的过滤器，我会得到更好的值。

我试过这个，但是当我推手机时它不起作用：

```
Matrix rotation = Matrix.CreateRotationX(MathHelper.PiOver2) * motion.CurrentValue.Attitude.RotationMatrix;
EffectRadar.View = Matrix.CreateLookAt(new Vector3(0, 1.1f, 0), new Vector3(0, -1, 0), new Vector3(0, 0, -1));
EffectRadar.Projection = Matrix.CreateOrthographic(FarClippingDistance / 2.0f, FarClippingDistance / 2.0f, 1.0f, 10.0f);
foreach (Opponent item in opponentList){
    Vector3 vecProj = RadarViewport.Project(new Vector3(item.Position.X, 0.0f, item.Position.Z),
        EffectRadar.Projection,
        rotation,
        Matrix.Identity
    );

    EffectRadar.World = Matrix.CreateTranslation(vecProj.X, 0.0f, vecProj.Z);
    foreach (EffectPass pass in EffectRadar.CurrentTechnique.Passes)
    {
        pass.Apply();
        GraphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.TriangleStrip, VerticesColorRed, 0, 2);
    }
} 
```

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:17:35.793

任何有关如何创建第一人称相机的文章都会对您有所帮助，例如[Riemers XNA 教程 > 鼠标相机](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series4/Mouse_camera.php)。这有你需要的东西，一个 leftRightRot 和一个 upDownRot 对应于偏航和俯仰。如果你需要滚动，你需要重新定位你的向上向量，但是一旦你完成了剩下的工作，这应该是微不足道的。

# c# - 使用 ServerManager 访问 IIS 网站属性

> ID：10428774
> 
> 赞同：1
> 
> 时间：2012-05-03T09:38:09.087
> 
> 标签：c#, iis, appcmd, servermanager

我可以使用`serverManager.Site`. 有没有办法列出每个网站中的文件。我需要更改文件之一的 RequireSSL 属性。使用 ServerManager 可以吗？或者任何其他方法可以像 appcmd 一样做同样的事情？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:41:13.593

我在评论中安东尼奥提供的链接中找到了解决方案。基本上我们可以更改 ApplicationHost 配置文件来完成它。这里再次链接

[在 Microsoft.Web.Administration.Application 对象上配置 SSL？](https://stackoverflow.com/questions/7561588/configure-ssl-on-a-microsoft-web-administration-application-object)

# sql-server - 检测 SQL Server 2000 表数据中的更改

> ID：10428776
> 
> 赞同：0
> 
> 时间：2012-05-03T09:38:13.427
> 
> 标签：sql-server, hash, sql-server-2000, checksum

如果自上次检查（每天一次）以来发生了变化，我会定期检查某个查询（顺便说一句，其中包括多个表），以便向用户添加信息性消息。

我试图让它与 一起工作`checksum_agg(binary_checksum(*))`，但它没有帮助，所以[这个问题](https://stackoverflow.com/questions/36/check-for-changes-to-a-sql-server-table)没有多大帮助，因为我有以下案例（过于简单化）：

```
select  checksum_agg(binary_checksum(*))
from    
(
    select  1 as id,
            1 as status

    union all

    select  2 as id,
            0 as status
) data 
```

和

```
select  checksum_agg(binary_checksum(*))
from    
(
    select  1 as id,
            0 as status

    union all

    select  2 as id,
            1 as status
) data 
```

上述两种情况都导致相同的校验和，49，很明显数据已经改变了。

这不一定是一个简单的函数或简单的解决方案，但我需要一些方法来唯一地识别 SQL Server 2000 中的这些差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:22:49.323

checksum_agg 似乎只是将所有行的 binary_checksum 的结果相加。尽管每一行都发生了变化，但两个校验和的总和没有变化（即 17+32 = 16+33）。这并不是检查更新的真正标准，但我能提出的建议如下：

1.  不使用`checksum_agg`，而是将校验和连接成一个分隔字符串，并按照`SELECT binary_checksum(*) + ',' FROM MyTable FOR XML PATH('')`. 要检查和存储的字符串要长得多，但误报比较的可能性要小得多。
2.  不使用内置校验和例程，而是使用 HASHBYTES 计算 8000 字节块中的 MD5 校验和，并将结果异或。这将为您提供更具弹性的校验和，尽管仍然不是万无一失的（即仍然可能获得错误匹配，但可能性很小）。我将粘贴我在下面编写的 HASHBYTES 演示代码。
3.  最后一个选项，也是绝对最后的手段，是以 XML 格式实际存储表表，并进行比较。这确实是您可以绝对确定没有错误匹配的唯一方法，但不可扩展并且涉及存储和比较大量数据。

每种方法，包括您开始使用的方法，都有利有弊，数据大小和处理要求对准确性有不同程度的影响。根据您需要的准确度级别，使用适当的选项。获得 100% 准确率的唯一方法是存储所有表数据。

或者，您可以向每个表添加一个 date_modified 字段，该字段使用 after insert 和 update 触发器设置为 GetDate()。你可以做到`SELECT COUNT(*) FROM #test WHERE date_modified > @date_last_checked`。这是一种更常见的检查更新的方法。这个的缺点是无法跟踪删除。

另一种方法是创建一个修改后的表，其中包含 table_name (VARCHAR) 和 is_modified (BIT) 字段，其中包含您希望跟踪的每个表的一行。使用插入、更新和删除触发器，针对相关表的标志设置为 True。当您运行计划时，您检查并重置 is_modified 标志（在同一事务中） - 沿着`SELECT @is_modified = is_modified, is_modified = 0 FROM tblModified`

以下脚本生成三个结果集，每个结果集都与此响应中前面的编号列表相对应。我已经在 SELECT 语句之前评论了哪个输出对应于哪个选项。要查看输出是如何得出的，您可以通过代码向后工作。

```
-- Create the test table and populate it
CREATE TABLE #Test (
    f1 INT,
    f2 INT
)
INSERT INTO #Test VALUES(1, 1)
INSERT INTO #Test VALUES(2, 0)
INSERT INTO #Test VALUES(2, 1)

/*******************
OPTION 1
*******************/
SELECT CAST(binary_checksum(*) AS VARCHAR) + ',' FROM #test FOR XML PATH('')

-- Declaration: Input and output MD5 checksums (@in and @out), input string (@input), and counter (@i)
DECLARE @in VARBINARY(16), @out VARBINARY(16), @input VARCHAR(MAX), @i INT

-- Initialize @input string as the XML dump of the table
-- Use this as your comparison string if you choose to not use the MD5 checksum
SET @input = (SELECT * FROM #Test FOR XML RAW)

/*******************
OPTION 3
*******************/
SELECT @input

-- Initialise counter and output MD5.
SET @i = 1
SET @out = 0x00000000000000000000000000000000
WHILE @i <= LEN(@input)
BEGIN
    -- calculate MD5 for this batch
    SET @in = HASHBYTES('MD5', SUBSTRING(@input, @i, CASE WHEN LEN(@input) - @i > 8000 THEN 8000 ELSE LEN(@input) - @i END))
    -- xor the results with the output
    SET @out = CAST(CAST(SUBSTRING(@in, 1, 4) AS INT) ^ CAST(SUBSTRING(@out, 1, 4) AS INT) AS VARBINARY(4)) +
        CAST(CAST(SUBSTRING(@in, 5, 4) AS INT) ^ CAST(SUBSTRING(@out, 5, 4) AS INT) AS VARBINARY(4)) +
        CAST(CAST(SUBSTRING(@in, 9, 4) AS INT) ^ CAST(SUBSTRING(@out, 9, 4) AS INT) AS VARBINARY(4)) +
        CAST(CAST(SUBSTRING(@in, 13, 4) AS INT) ^ CAST(SUBSTRING(@out, 13, 4) AS INT) AS VARBINARY(4))
    SET @i = @i + 8000
END

/*******************
OPTION 2
*******************/
SELECT @out 
```

# php - 如何将输入字段值传递给 pdf？

> ID：10428781
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:38:44.037
> 
> 标签：php, input, tcpdf

我不太了解php，想知道如何将表单输入值传递给pdf（使用TCPDF）？我需要添加哪些代码行？它不可能那么复杂，我一直在寻找很长时间，但我无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:45:55.557

您可以简单地使用`$_POST`或`$_GET`从您的 TCPDF 类中检索它们。

# php - 我如何仅在 php 中获得友好的 url？

> ID：10428782
> 
> 赞同：0
> 
> 时间：2012-05-03T09:38:47.267
> 
> 标签：php, friendly-url

我已经在 php 中编写了函数

```
function siteContent() {
    $path = array();

    $strDefaultPath = '/sites/';

    $_SERVER['PATH_INFO'] = isset( $_SERVER['PATH_INFO'] ) ? $_SERVER['PATH_INFO'] : $strDefaultPath;

    $path = explode( '/', substr( $_SERVER['PATH_INFO'], 1) );

    if(file_exists('/'.$path['0'].'.php')) {
        require_once('/'.$path['0'].'.php');
    } else {
        require_once('sites/main.php');
    }
} 
```

它不起作用

在菜单链接中看起来像这样[http://site.com/subsite/](http://site.com/subsite/) 但是包含子站点内容的文件的路径看起来像这样 public_html/sites/subsite.php

我可以用这个函数重写 url 或

我如何仅在 php 中重写或构建该 url

我是 php 的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:42:10.060

如果您使用 Apache，最好的方法是使用 .htaccess 文件进行 URL 重写。 [http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

[初学者的 URL 重写](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)

# ruby-on-rails - 如何从 Rail 创建控制器调用模型的显示 URL？

> ID：10428783
> 
> 赞同：2
> 
> 时间：2012-05-03T09:38:59.787
> 
> 标签：ruby-on-rails, koala

我无法从创建控制器中调用模型的显示路径。

我在 Rails 3.2 应用程序中使用 Koala gem。当用户创建特定记录类型时，我正在尝试自动发布到 Facebook 的开放图表。

我有一个页面设置了所有必需的 FB 元标记。

我可以从控制台运行 Koala 方法，一切正常。

但是，如果我尝试从控制器运行它，我会收到错误消息。

我的控制器如下所示：

```
def create
  @fb_model = current_user.fb_models.build(params[:fb_model])   
  if @fb_model.save
    Koala::Facebook::API.new(app_token).put_connections( current_user.fb_uid, "namespace:action", :object => fb_model_url(@fb_model) ) 
    respond_to do |format| 
      format.html { redirect_to(@fb_model, :notice => 'Successfully created.') }
      format.xml  { render :xml => @fb_model, :status => :created, :location => @fb_model }    
    end
  else
    respond_to do |format|
      format.html { render :action => "new" }
      format.xml  { render :xml => @fb_model.errors, :status => :unprocessable_entity }
    end
  end
end 
```

当我创建记录时，我的日志显示：

```
Koala::Facebook::APIError (HTTP 500: Response body: {"error":{"type":"Exception","message":"Could not retrieve data from URL."}}): 
```

如果我编辑控制器以使用静态 url 进行测试，一切正常。

```
 ...
  if @fb_model.save
    Koala::Facebook::API.new(app_token).put_connections( current_user.fb_uid, "namespace:action", :object => "http://myapp.com/fb_model/2" ) 
  ... 
```

为什么我不能使用 create 控制器将记录的 url 传递给 FB `fb_model_url(@fb_model)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:06:26.957

我最终明白了这一点。这实际上是一个非常令人沮丧的问题，因为没有迹象表明这是任何日志或其他地方的问题。

问题是我在 Heroku 上部署/测试，并且只运行了 1 个 web dyno。我的应用程序无法同时处理 Facebook 请求和 post/get，从而导致错误。

这已在[Rails Heroku 的 Facebook Open Graph](https://stackoverflow.com/questions/9892499/facebook-open-graph-from-rails-heroku)的另一个问题中得到解决。这真的不是我所期望的，而且我在之前的任何搜索中都没有遇到这个问题。希望这可以帮助别人。

我通过从瘦切换到独角兽解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:21:49.040

保存父模型时构建已完成，并且您似乎没有在父模型上进行操作。

我认为你实际上想要这个：

`@fb_model = current_user.fb_models.new(params[:fb_model])`

此外，您似乎两次调用 @fb_model.save 是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T23:08:20.133

感谢您发布您的发现——过去几天我一直在处理这个问题，但没想到这一点。所以当你简单地增加你的测功机负载时，你不再有这个错误了吗？即使我的“put_connections”回调在 heroku 控制台中工作，我也即将使用 Javascript SDK。

# android - 我想知道注册C2DM时出现AUTHENTICATION_FAILED错误的条件？

> ID：10428786
> 
> 赞同：1
> 
> 时间：2012-05-03T09:39:11.507
> 
> 标签：android, android-c2dm

我正在调查使用[ChromeToPhone 应用程序](http://code.google.com/p/chrometophone/)`AUTHENTICATION_FAILED`注册 C2DM 时发生的错误。

[C2DM 参考文档](https://developers.google.com/android/c2dm/)如下所述。但是，实际行为与该文档略有不同。我对此有一些疑问。

> AUTHENTICATION_FAILED ：密码错误。应用程序应要求用户输入他/她的密码，并让用户稍后手动重试。在设备端修复

* * *

[1] 修改密码

1.  使用 PC 更改 Google 帐户的密码。
2.  我的 android 手机显示`Sync error`在 Settings::Accounts & sync::(My Google account) 的视图中。
3.  我使用 ChromeToPhone 应用程序在我的 android 手机上成功注册了 c2dm。
4.  接下来，重启安卓手机。
5.  C2DM 注册返回`AUTHENTICATION_FAILED`错误。

第一个问题：
我认为它应该`AUTHENTICATION_FAILED`在第 3 步返回错误。但为什么我会成功？

* * *

[2] 删除账号

1.  使用 PC 删除 Google 帐户。
2.  我的 android 手机显示`Sync OK`在 Settings::Accounts & sync::(My Google account)。
3.  接下来，重启安卓手机。
4.  C2DM 注册返回`AUTHENTICATION_FAILED`错误。

第二个问题：
[2] 不是“密码错误”的条件。你知道另一个`AUTHENTICATION_FAILED`会像这样返回的条件吗？

* * *

[3] 多账户

1.  更改谷歌帐户的密码。
2.  将另一个有效的 Google 帐户添加到我的 Android 手机。
3.  重启安卓手机。
4.  C2DM 注册返回`AUTHENTICATION_FAILED`错误。

第三个问题：
手机上的主要 Google 帐户是否必须有效才能成功注册 C2DM？

* * *

感谢您阅读这个问题。如果你愿意，请回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:04:07.973

在您的“[1] 更改密码”用例中，第 3 步。您是否尝试从设备上完全卸载 ChromeToPhone，请重新安装。之后会成功注册C2DM吗？如果你不这样做，它可能已经有 C2DM 令牌可用，这就是它不担心更改密码的原因。

# c# - 如何用c#覆盖现有图像？

> ID：10428791
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:39:19.833
> 
> 标签：c#

要保存图像，我使用以下代码：

```
 string filenamewithpath =
      System.Web.HttpContext.Current.Server.MapPath(
           @"~/userimages/" + incID + ".jpg");
 System.IO.File.WriteAllBytes(filenamewithpath, Util.ReadFully(image));

public class Util
    {
        public static byte[] ReadFully(Stream stream)
        {
            byte[] buffer = new byte[32768];
            using (MemoryStream ms = new MemoryStream())
            {
                while (true)
                {
                    int read = stream.Read(buffer, 0, buffer.Length);
                    if (read <= 0)
                        return ms.ToArray();
                    ms.Write(buffer, 0, read);
                }
            }
        }
    } 
```

以上适用于使用 ID 保存图像。更新时，我需要覆盖现有图像，并且需要一些有关如何执行此操作的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:11:07.573

如果您只需要在编写新图像文件之前摆脱旧图像文件，为什么不直接调用

```
if (System.IO.File.Exists(filenamewithpath)
{
    System.IO.File.Delete(filenamewithpath);
} 
```

虽然， System.IO.File.WriteAllBytes 的描述已经说“如果文件存在，则将其覆盖”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:39:57.573

```
System.IO.File.WriteAllBytes(filenamewithpath, Util.ReadFully(image)); 
```

将此行替换为：

```
using (FileStream fs = new FileStream(filenamewithpath, FileMode.OpenOrCreate))
{
    var bytes=Util.ReadFully(image);
    fs.Write(bytes, 0, bytes.Length);
} 
```

# c++ - 阻止 alt+shift 事件或以编程方式禁用更改语言

> ID：10428794
> 
> 赞同：3
> 
> 时间：2012-05-03T09:39:36.213
> 
> 标签：c++, windows, events, keyevent

我需要使用 C++ 阻止`alt`+`shift`键事件，或者以某种方式阻止更改语言。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:46:44.307

我会有所不同。我会在启动时捕获当前的语言设置，而不是更改为所需的语言设置。

在 alt+shift 的时候，我会再次将其设置回所需的类型。

用net框架应该很容易做到。

这是一篇关于操作语言的简短文章：[如何以编程方式更改输入语言](http://blogs.msdn.com/b/snippets/archive/2008/12/31/how-to-change-input-language-programmatically.aspx)

msdna 上的主类：[InputLanguage 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.inputlanguage.aspx)

要真正防止 alt+shift 进入 Windows 系统，您必须使用钩子。

这是一篇关于[在 Windows 处理它们之前阻止击键的文章。](http://www.codeproject.com/Articles/14485/Low-level-Windows-API-hooks-from-C-to-stop-unwante)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:49:12.433

只是一个想法。您可以捕捉`WM_KEYDOWN`消息并调用[ActivateKeyboardLayout](http://msdn.microsoft.com/en-us/library/ms646289%28v=vs.85%29)来切换语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T05:39:22.727

使用 C++，您可以安装[此处](http://www.codeproject.com/Articles/67091/Mouse-and-KeyBoard-Hooking-utility-with-VC)建议的键盘挂钩程序并过滤（吞下/不传播）您要禁止的键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T06:28:53.070

我对MSDN的理解是，你可以假装处理`WM_INPUTLANGCHANGEREQUEST`然后什么都不做，这样Windows就不会再做任何事情，语言也不会真正改变。但是一些用户说这不再起作用了。 [http://msdn.microsoft.com/en-us/library/ms632630(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms632630(VS.85).aspx)

也许您可以实现`ITfInputProcessorProfileActivationSink::OnActivated`，当您被调用时，您可以通过调用更改回以前的语言`ITfInputProcessorProfiles::ActivateLanguageProfile`。在您的应用程序开始时，您会调用`ITfInputProcessorProfiles::GetActiveLanguageProfile`.

也许你可以实现`ITfLanguageProfileNotifySink::OnLanguageChange`、设置和`*pfAccept` 返回。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms628770(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms628770(v=vs.85).aspx)`FALSE``S_OK`

以上都有问题。如果用户有意更改客户端上的语言，例如通过单击客户端的任务栏而不是按 Alt+Shift，则上述方法将阻止其更改。

我想知道是否`RegisterHotKey`会让您为自己的窗口注册 Alt+Shift，即使系统已经定义了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T08:02:07.243

你试图实现的是键盘钩子。C/C++源代码的详细解释可以在这里找到：http: [//www.codeproject.com/Articles/67091/Mouse-and-KeyBoard-Hooking-utility-with-VC](http://www.codeproject.com/Articles/67091/Mouse-and-KeyBoard-Hooking-utility-with-VC)

其他有用的例子也可以在这里找到：http:
[//www.codeproject.com/Articles/1264/KeyBoard-Hooks](http://www.codeproject.com/Articles/1264/KeyBoard-Hooks)
[http://www.codeproject.com/Articles/9513/Disable-keyboard-and-show-images-为了孩子](http://www.codeproject.com/Articles/9513/Disable-keyboard-and-show-images-for-the-children)

希望这可以帮助。

亲切的问候，
博

# magento - Magento上的404 Not Found1错误

> ID：10428797
> 
> 赞同：0
> 
> 时间：2012-05-03T09:39:49.333
> 
> 标签：magento

我对 Magento 更新鲜。通过实现以下 url 来学习概念。 [http://www.pierrefay.com/magento-developper-guide-howto-tutorial-5](http://www.pierrefay.com/magento-developper-guide-howto-tutorial-5)

我已经完成了前四个步骤。在本地实施时，我会收到错误消息

哎呀，我们的坏...

找不到您请求的页面，我们可以很好地猜测原因。

```
 If you typed the URL directly, please make sure the spelling is correct.
    If you clicked on a link to get here, the link is outdated. 
```

当我浏览这个网址[http://localhost/magento/test/index](http://localhost/magento/test/index)。

任何人都可以帮助我吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:11:29.507

在您的数据库中打开表`core_config_data`并将值**http://localhost/magento/test/**更改为 **http://127.0.0.1/magento/test/**。

清除缓存并检查您的网站。

# java - 如何计算一个月的星期二数？

> ID：10428798
> 
> 赞同：0
> 
> 时间：2012-05-03T09:39:51.693
> 
> 标签：java, calendar

如何计算一个月的星期二数？

使用`calender.set`我们可以设置特定月份，然后如何计算该月的星期一、星期二等的数量？

代码是：

```
public static void main(String[] args )
{
    Calendar calendar = Calendar.getInstance();
    int  month = calendar.MAY; 
    int year = 2012;
    int date = 1 ;

    calendar.set(year, month, date);

    int MaxDay = calendar.getActualMaximum(calendar.DAY_OF_MONTH);
    int mon=0;

    for(int i = 1 ; i < MaxDay ; i++)
    {        
        calendar.set(Calendar.DAY_OF_MONTH, i);
        if (calendar.get(Calendar.DAY_OF_WEEK) == calendar.MONDAY ) 
            mon++;      
    }

    System.out.println("days  : " + MaxDay);    
    System.out.println("MOndays  :" + mon);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T09:51:42.000

这里不写整个代码是一般的想法：

```
 Calendar c = Calendar.getInstance();
    c.set(Calendar.MONTH, Calendar.MAY); // may is just an example
    c.set(Calendar.YEAR, 2012);
    int th = 0;
    int maxDayInMonth = c.getMaximum(Calendar.MONTH);
    for (int d = 1;  d <= maxDayInMonth;  d++) {
        c.set(Calendar.DAY_OF_MONTH, d);
        int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);
        if (Calendar.THURSDAY == dayOfWeek) {
            th++;
        }
    } 
```

此代码应计算星期四的数量。我相信你可以修改它来计算一周中所有天的数量。

显然这段代码效率不高。它会遍历该月的所有日子。您可以通过获取第一天的星期几、一个月的天数来优化它，并且（我相信）您可以编写代码来计算一周中每一天的数量，而无需遍历整个月。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-27T15:30:26.977

使用 Java 8+，您可以以更简洁的方式编写它：

```
public static int countDayOccurenceInMonth(DayOfWeek dow, YearMonth month) {
  LocalDate start = month.atDay(1).with(TemporalAdjusters.nextOrSame(dow));
  return (int) ChronoUnit.WEEKS.between(start, month.atEndOfMonth()) + 1;
} 
```

你可以打电话给：

```
int count = countDayOccurenceInMonth(DayOfWeek.TUESDAY, YearMonth.of(2012, 1));
System.out.println(count); //prints 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T19:22:45.037

AlexR 提到了更高效的版本。以为我会试一试：

```
private int getNumThursdays() {
    // create instance of Gregorian calendar 
    Calendar gc = new GregorianCalendar(TimeZone.getTimeZone("EST"), Locale.US);
    int currentWeekday = gc.get(Calendar.DAY_OF_WEEK);

    // get number of days left in month
    int daysLeft = gc.getActualMaximum(Calendar.DAY_OF_MONTH) - 
            gc.get(Calendar.DAY_OF_MONTH);

    // move to closest thursday (either today or ahead)
    while(currentWeekday != Calendar.THURSDAY) {
        if (currentWeekday < 7)  currentWeekday++;
        else currentWeekday = 1;
        daysLeft--;
    }

    // calculate the number of Thursdays left
    return daysLeft / 7 + 1;
} 
```

注意：获取当前年、月、日等时，取决于您的环境。例如，如果有人手动将手机上的时间设置为错误，那么这个计算可能是错误的。为确保正确性，最好从可信来源提取有关当前月、年、日、时间的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T08:15:13.450

Java 日历实际上有一个内置属性[`Calendar.DAY_OF_WEEK_IN_MONTH`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#DAY_OF_WEEK_IN_MONTH "文档")

```
Calendar calendar = Calendar.getInstance(); //get instance
calendar.set(Calendar.DAY_OF_WEEK, 3);  //make it be a Tuesday (crucial)
//optionally set the month you want here
calendar.set(Calendar.MONTH, 4) //May
calendar.getActualMaximum(Calendar.DAY_OF_WEEK_IN_MONTH); //for this month (what you want)
calendar.getMaximum(Calendar.DAY_OF_WEEK_IN_MONTH); //for any month (not so useful) 
```

# c# - TransactionScope 和 SQL 事务

> ID：10428801
> 
> 赞同：1
> 
> 时间：2012-05-03T09:39:54.737
> 
> 标签：c#

请让我知道.. 我可以同时使用 TransactionScope 和 SQL Transaction (Begin trans 和 Commit trans)。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:47:12.657

是的，您可以，但不建议这样做。事务很棒，但它们会导致难以调试的微妙并发问题（争用、死锁等），因此您应该尽量减少事务中的代码并非常小心地管理它们。如果有时人们很难使用一种技术来做到这一点，想象一下使用两种技术......

# android - AsyncTask cancel(Boolean) 调用 onPostExecute -?

> ID：10428806
> 
> 赞同：2
> 
> 时间：2012-05-03T09:40:01.420
> 
> 标签：android, android-asynctask

> **可能重复：**
> [取消 AsyncTask 上的 onPostExecute](https://stackoverflow.com/questions/3334858/onpostexecute-on-cancelled-asynctask)

如果文档说它应该调用，为什么取消`AsyncTask`仍然调用。这是一个长期存在的错误吗？`onPostExecute``onCancelled`

在我的情况下，它`cancel(true)`是异步任务，它完成`doInBackground`然后调用 onPostExecutes。最后它抛出一个

```
java.lang.InterruptedException 
```

如果这是有意的行为，我可以把它`Exception`作为一个对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:47:29.850

之后`onPostExecute`应该是电话`onCancelled`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:08:25.593

如果您阅读 cancel() 方法中的文档，您会发现：

> 尝试取消此任务的执行。如果任务已完成、已被取消或由于其他原因无法取消，则此尝试将失败。

调用 cancel() 会将 isCancelled() 设置为 true。您是否定期在 doInBackground 中检查此方法的返回值？

```
 protected Object doInBackground(Object... x) {  
   while (/* condition */) { 
      // work...    
   if (isCancelled()) break; 
    }    
 return null;  } 
```

至于异常 java.lang.InterruptedException ，可能有多种原因。

我的猜测是，您可能在错误的地点/时间调用了 cancel()，并且您可能没有在 doInBackground 中定期检查 isCancelled()，因此任务成功完成并调用了 onPostExecute()。

# iphone - 后退按钮似乎已禁用 iOS

> ID：10428807
> 
> 赞同：3
> 
> 时间：2012-05-03T09:40:09.230
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar, uinavigationitem

在 iOs 中，我使用导航控制器导航（推送），并在 viewDidLoad 中启动请求。此请求可能需要很长时间，如果用户不想等待请求，我希望他们能够返回。

问题是导航栏中添加的后退按钮似乎被阻止，直到请求完成。该按钮会记住用户交互以及请求完成时自动返回。

该请求有一个用于响应的委托方法，当应用程序进入该方法时，按钮会唤醒并返回。

如果我在请求期间触摸，则触摸/单击效果不会出现在按钮上，并且在请求结束时也不会出现。当我等到结束时，按钮对触摸/单击按钮具有正常效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:43:49.123

为此，您可以像这样启用按钮属性。

```
 [button setEnable:Yes];
 [button setEnable:Yes]; 
```

也用这个

```
 [button setuserintractionEnable:no]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:48:35.920

在后台线程中调用您的请求

```
 [self performSelectorInBackground:@selector(startRequest) withObject:nil]; 
```

并且对于核心数据也要记住这一点。这是您的 UI 将被释放，请求将继续在后台线程中工作，然后在返回按钮上实现请求取消

将 obj 初始化为

Obj *obj = [[Obj alloc] initWithDelegate:self 选择器:@selector(requestFinished)]; [self performSelectorInBackground:@selector(startRequest:) withObject:obj]; obj 具有属性 SEL 选择器和 id 委托；

当请求完成时

检查是否 ([obj.delegate respondsToSelector:obj.selctor]) { [obj.delegate performSelector:obj.selector]; }

如果您需要更多规格，请告诉我

# mysql - 列 'CHARACTER_OCTET_LENGTH' 不属于表

> ID：10428808
> 
> 赞同：0
> 
> 时间：2012-05-03T09:40:09.490
> 
> 标签：mysql, vb.net

我在使用 Vb.Net 制作的软件时出错。我不知道在哪里看，谷歌也没有帮助我。我可以找个地方试试吗？

```
System.ArgumentException: Column 'CHARACTER_OCTET_LENGTH' does not belong to table .
   at System.Data.DataColumnCollection.Remove(String name)
   at MySql.Data.MySqlClient.ISSchemaProvider.GetColumns(String[] restrictions)
   at MySql.Data.MySqlClient.SchemaProvider.GetSchemaInternal(String collection, String[] restrictions)
   at MySql.Data.MySqlClient.ISSchemaProvider.GetSchemaInternal(String collection, String[] restrictions)
   at MySql.Data.MySqlClient.SchemaProvider.GetSchema(String collection, String[] restrictions) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:50:22.357

您似乎正在使用 DataTable 并且您尝试使用的列不属于它。CHARACTER_OCTET_LENGTH 是列名，它只是令人困惑。

```
Dim tbl As New DataTable
tbl.Columns.Remove("aa") 
```

结果

```
Message=Column 'aa' does not belong to table .
  Source=System.Data
  StackTrace:
       at System.Data.DataColumnCollection.Remove(String name)
       at dbpokusy.net.Module1.AddConstantToQuery() in C:\... 
```

# c# - 清楚地识别 Windows 证书存储中的证书

> ID：10428809
> 
> 赞同：4
> 
> 时间：2012-05-03T09:40:14.033
> 
> 标签：c#, windows, ssl, cryptography, x509certificate

我正在开发一个生成 XML 数据并签署生成的 XML 的库。我已将 pkcs12 证书（使用 OpenSSL 从 pem 文件生成）安装到 Windows 证书存储中。

我正在从 C# 代码加载证书

```
X509Store store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
store.Open(OpenFlags.ReadOnly);
X509Certificate2 cert = null;

foreach (var item in store.Certificates)
{
    if (item.SubjectName.Name.Contains("CN=IDENTIFIER"))
    {
        cert = item;
        break;
    }
}
store.Close(); 
```

在我的例子中，CN 标识符是：我的名字 + 姓氏。证书来自第三方。所以我认为我对标识符没有影响。

问题来了：

有什么方法可以从 C# 中准确识别此证书。将来有可能多个证书具有相同的 X509 参数（CN 等）。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T09:53:11.623

是的，CN 可能包含相同的标识符（例如，当为企业实体颁发证书时）。

证书通常通过以下组合之一进行区分：1）颁发者名称（不是CN，而是RDN，多字段的完整名称记录）+证书序列号（在一个CA内是唯一的）2）颁发者名称+证书哈希

如果您在搜索证书之前不知道颁发者名称，您可以将找到的证书列表呈现给用户，一旦他选择了其中一个证书，就存储证书哈希以供将来参考。

在较小的系统（最终用户的计算机）上，MY 存储中的证书数量通常很少，并且哈希冲突的可能性很小。在大型系统上，机会更高，这也是使用 Issuer 名称的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T12:25:08.180

扩展尤金的答案......

的[`Certificates`属性`X509Store`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509store.certificates.aspx)是一个[`X509CertificateCollection`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2collection.aspx)。

您可能会对它的[`Find`方法和`X509FindType`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509findtype.aspx). 它提供了多种搜索证书的方法。严格来说，[主题 DN 和主题替代名称](https://www.rfc-editor.org/rfc/rfc5280#section-4.1.2.6)对于识别与证书关联的实体都应该很重要。但是，从演示的角度来看，很少有工具可以做到这一点（例如，这可能会在表格中变得非常混乱）。

正如 GregS 和 Eugene 所指出的，[证书指纹（在其他工具中也称为指纹/哈希）](https://security.stackexchange.com/a/14345/2435)将唯一地识别特定证书，而不管其颁发者如何。它[可以与`X509FindType`](http://msdn.microsoft.com/en-us/library/ms734695.aspx).

指纹用于 Windows/.Net/SSL 世界的多个地方。特别是，[它是选择给定证书安装在 HTTPS 端口上的方法](http://msdn.microsoft.com/en-us/library/ms733791.aspx)。

# gstreamer - Gstreamer 缺少插件

> ID：10428814
> 
> 赞同：5
> 
> 时间：2012-05-03T09:40:46.110
> 
> 标签：gstreamer, python-gstreamer, qtgstreamer

我正在尝试在命令提示符下运行某些管道来播放视频，但我经常收到这些错误/消息/警告：

```
WARNING: erroneous pipeline: no element "qtdemux"
WARNING: erroneous pipeline: no element "playbin2"
WARNING: erroneous pipeline: no element "decodebin2"
ERROR: pipeline could not be constructed: no element "playbin". 
```

***以下是管道：***

```
gst-launch filesrc location=path to the mp4 file ! playbin2 ! queue ! ffmpegcolorspace ! autovideosink 
```

或者

```
gst-launch -v filesrc location=path to the mp4 file ! qtdemux name=demuxer ! { queue ! decodebin ! sdlvideosink } { demuxer. ! queue ! decodebin ! alsasink } 
```

或者

```
gst-launch -v playbin uri=path to the mp4 file 
```

或者

```
gst-launch -v playbin2 uri=path to the mp4 file 
```

# 问题

1.  我想知道，如果我错过了执行此操作的插件。
2.  我怎么知道哪个插件负责哪个或在哪里找到？
3.  通过 c 代码实现管道有什么好处。是否仍然需要缺少的插件。
4.  从 Synaptic 管理器或 Gstreamer 站点安装缺少的插件是否好[（基础、好、坏、丑）](http://gstreamer.freedesktop.org/src/)
5.  当我们这样做时，`gst-inspect`我们会得到这样的输出：

    ```
    postproc:  postproc_hdeblock: LibPostProc hdeblock filter
    libvisual:  libvisual_oinksie: libvisual oinksie plugin plugin v.0.1
    flump3dec:  flump3dec: Fluendo MP3 Decoder (liboil build)
    vorbis:  vorbistag: VorbisTag
    vorbis:  vorbisparse: VorbisParse
    vorbis:  vorbisdec: Vorbis audio decoder
    vorbis:  vorbisenc: Vorbis audio encoder
    coreindexers:  fileindex: A index that stores entries in file
    coreindexers:  memindex: A index that stores entries in memory
    amrnb:  amrnbenc: AMR-NB audio encoder
    amrnb:  amrnbdec: AMR-NB audio decoder
    audioresample:  audioresample: Audio resampler
    flv:  flvmux: FLV muxer
    flv:  flvdemux: FLV Demuxer 
    ```

x:y（x 和 y 的意思）是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T10:59:51.823

答案，

看起来您端的 gstreamer 安装不正确。playbin2, decodebin2 是基本的，是基本插件的一部分

1 是的，您可能缺少一些插件

2 使用 gst-inspect 命令检查是否可用

3 从 C 代码中，您可以管理状态、注册回调、了解更多信息 是的，仍然需要缺少插件

4 我猜 gstreamer 网站会更好

5 不确定这个，如果您以适当的方式安排结果会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-12T06:03:29.060

很可能 GST_PLUGIN_PATH 不正确。请设置 gstremer 安装位置的正确路径。

# python - 将 CFString 转换为 Python 字符串

> ID：10428816
> 
> 赞同：1
> 
> 时间：2012-05-03T09:40:53.127
> 
> 标签：python, core-foundation

我有一个 CFString 并且想在 Python 中使用它。

最快的方法是什么？是否可以避免转换，即仅从 CFString 指针以某种方式创建 Python 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T02:12:23.327

> 是否可以避免转换，即仅从 CFString 指针以某种方式创建 Python 字符串？

从来没听说过。Python 是跨平台的，即使 CFStrings 可用，它也没有任何理由在内部使用它们。

您*可能*能够获得字符串的支持[C string](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetCStringPtr)、[MacRoman Pascal string](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetPascalStringPtr)或[UTF-16 character buffer](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetCharactersPtr)，但其中每一个都允许失败，因此您不能依赖它们中的任何一个工作。您必须始终将字符复制到您自己的缓冲区作为最后一次尝试。

您可能甚至不应该尝试 Pascal-string 路由，因为您仍然需要从 MacRoman 转换为 UTF-8。此时您不妨只使用字符串自己的转换 API。

> [转换]最快的方法是什么？

如果上述任何快捷方式（除了 Pascal 字符串）成功，这将是最快的方式。

一种或另一种方式，您需要获取一个包含某种形式的字符的缓冲区，然后从该缓冲区创建一个 Python 字符串。

此时值得一提的是，在 Python 2.x 中，`str`类型是纯 8 位数据对象。出于这个原因，Python 3 将其重命名为`bytes`，您应该将其视为 NS/CFData 的 Python 对应物，而不是 NS/CFString。

NS/CFStrings 包含 Unicode 字符，因此您需要[Python 的`unicode`（`str`在 Python 3 中）类型](http://docs.python.org/c-api/unicode.html)。

注意`CFStringGetLength`：它以 UTF-16 代码单元返回长度。如果您最终使用 UTF-8，则 UTF-8 代码单元的长度可能会有所不同。

从该 Python 文档中，您可以根据从 CFString 中获得的内容来创建 Python 字符串：

*   [该`PyUnicode_FromString`函数](http://docs.python.org/c-api/unicode.html#PyUnicode_FromString)采用 UTF-8 编码的 C 字符串。
*   [该`PyUnicode_FromStringAndSize`函数](http://docs.python.org/c-api/unicode.html#PyUnicode_FromStringAndSize)采用 UTF-8 编码字符的缓冲区，以及该缓冲区的大小。这可能比`FromString`.
*   [该`PyUnicode_FromUnicode`函数](http://docs.python.org/c-api/unicode.html#PyUnicode_FromUnicode)采用 UTF-16 编码字符的缓冲区，以及该缓冲区的大小。

### TL;博士

仅使用 Python 的`unicode`(PyUnicode) 类；不是`str`/// 。`bytes`_ `PyString`_`PyBytes`

我会`GetCStringPtr`先尝试（请求 UTF-8）。如果成功，我会调用`CFStringGetMaximumSizeForEncoding`来确定（希望比 更快`strlen`）该字符串的长度，然后调用`PyUnicode_FromStringAndSize`来创建 Python 字符串。

接下来，我会询问 CFString[将其转换为](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetFastestEncoding).

*   如果最快的编码是 UTF-16（或者，CFString 称之为“Unicode”），我会使用`CFStringGetLength`, `CFStringGetCharactersPtr`, `CFStringGetCharacters`（如果`GetCharactersPtr`失败）和`PyUnicode_FromUnicode`.
*   否则，我将使用[该`CFStringGetBytes`函数](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringGetBytes)一次来确定转换为 UTF-8 所需的缓冲区大小，然后再次执行该转换，然后`PyUnicode_FromStringAndSize`.

（我应该指出，“if”可能是过早的优化。`CFStringGetBytes`是 CFString 的中心文本编码转换函数；它能够返回*任何*编码，包括 UTF-16。您可能想要同时编写条件`CFStringGetCharacters{Ptr,}`解决方案和无条件解决方案`CFStringGetBytes`解决方案并将它们相互计时，并查看对于您当前正在处理的字符串，最快的编码是否实际上是 UTF-16。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-03T11:45:52.707

为什么要在 python 中使用 CFString。顺便说一句，CF 字符串定义了自己的结构，并且它存储在内存中的方式与 python 字符串不同。它不可能进行这种转换。

# iphone - 从 ViewWillAppear 方法调用时，光标位置的 NSLog 语句显示错误值

> ID：10428818
> 
> 赞同：0
> 
> 时间：2012-05-03T09:40:56.720
> 
> 标签：iphone, ios, ios4

我的应用程序中有一个文本视图，因此要在当前光标位置插入文本，我尝试了这个 工作正常的[url 。](https://stackoverflow.com/questions/10380477/issue-insert-text-works-only-for-first-time-the-second-time-it-appends-to-th/10380977#comment13384959_10380977)

现在我遇到一个问题。

> 当我尝试在 viewWillAppear( ) 函数中调用 aCenterBtnClicked( ) 方法时，它显示为“2147483647 位置”（ NSLog(@"%d location", myCursorPosition.location); ）的当前位置。
> 
> 但是当我从 viewWillAppear() 方法中隐藏 aCenterBtnCliked() 方法的函数调用时，它会将当前光标位置打印为“0 位置”（ NSLog(@"%d location", myCursorPosition.location); ）。

我想知道为什么在viewWillAppear函数中调用aCenterBtnCliked()方法时光标位置会发生变化

如何解决这个问题？

```
(void)viewWillAppear:(BOOL)animated{
//-----------------------------------

    [self aCenterBtnClicked];

}

//===================================
-(void) aCenterBtnClicked{
//===================================

  myCursorPosition = [self.myTextView selectedRange];

  NSLog(@"%d location", myCursorPosition.location);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:50:38.487

因为您仅在按钮单击中设置了当前位置，所以如果您在 viewwillapper 中放入相同的代码，它也会改变，所以它也会改变。你可以直接这样调用。

```
-(void)viewWillAppear:(BOOL)animated
 {
  myCursorPosition = [self.myTextView selectedRange];
 } 
```

# marklogic - MarkLogic 中具有相同 URI 的重复文档的例外情况

> ID：10428822
> 
> 赞同：1
> 
> 时间：2012-05-03T09:41:04.717
> 
> 标签：marklogic

我想在我的应用程序中使用 MarkLogic 作为数据存储实现基于重复文档 URI 的乐观锁定。

我阅读了`xdmp:document-insert()`文档，发现 MarkLogic 在插入具有相同 URI 的另一个页面时不会抛出异常，而是使用新页面的内容更新页面内容、页面权限和属性。但是有什么方法可以在 MarkLogic 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:58:50.203

很好的答案，但我认为您需要备份并询问您的应用程序目标是什么，而不是假设您需要实现乐观锁定。MarkLogic Server 在内部进行乐观锁定，因此您可能不必担心它。阅读[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http%3a//pubs/5.0doc/xml/dev_guide/transactions.xml](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http%3a//pubs/5.0doc/xml/dev_guide/transactions.xml)了解有关 MarkLogic 和交易的更多背景信息。

当您确实需要在更新中检查文档是否存在时，请使用`fn:doc`-not`cts:uri-match`或`xdmp:exists`. 这些函数非常适合只读查询，因为它们不会将文档加载到内存中。这对于只读查询很好。但是如果您需要在更新中检查文档是否存在，那么您需要对其进行读取锁定以确保一致性。否则，您将拥有看起来可以工作但有可能出现竞争条件的代码。为确保您获得读锁，请在有效的布尔上下文中使用`fn:exists(fn:doc($uri))`或调用。`fn:doc($uri)`

[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/UpdateBuiltins.xml&category=UpdateBuiltins&function=xdmp:lock-for-update](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/UpdateBuiltins.xml&category=UpdateBuiltins&function=xdmp:lock-for-update)也可能是出于兴趣。该`xdmp:lock-for-update`函数绕过默认的乐观行为并显式锁定 URI。如果您在更新代码中尽早执行此操作，那么您就有了悲观锁定。在您知道 URI 将存在严重争用的情况下，该方法可以提供更好的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:42:02.957

在插入之前测试文档的存在。我认为这`cts:uri-match`是最快的方法之一。如果它已经存在，您可以使用`fn:error()`.

虽然不确定这与乐观锁定有什么关系..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T13:59:31.537

您将需要使用以下方法测试文档是否存在：

> xdmp:exists(fn:doc($uri))

这将在不实际加载文档的情况下测试 URI 中是否存在文档。然后，您可以确定您希望如何处理这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T11:16:10.297

您也可以使用 fn:doc-available() 函数。如果文档存在则返回布尔真，否则返回布尔假。

在此处查找详细信息 - [https://docs.marklogic.com/fn:doc-available](https://docs.marklogic.com/fn:doc-available)

# sql - 查询返回数量的总和，如果在给定日期没有产品的数量，则返回 0

> ID：10428828
> 
> 赞同：0
> 
> 时间：2012-05-03T09:41:34.617
> 
> 标签：sql

我有以下 4 个表：

```
----------
tblDates:

DateID

30/04/2012
01/05/2012
02/05/2012
03/05/2012

----------
tblGroups:

GroupID
Home
Table

----------
tblProducts:

ProductID   GroupID
Chair       Home
Fork        Table
Knife       Table
Sofa        Home

----------
tblInventory:

DateID      ProductID   Quantity

01/05/2012  Chair       2
01/05/2012  Sofa        1
01/05/2012  Fork        10
01/05/2012  Knife       10
02/05/2012  Sofa        1
02/05/2012  Chair       3
03/05/2012  Sofa        2
03/05/2012  Chair       3 
```

我正在尝试编写一个查询，该查询返回 tblDates 中的所有 Dates 、**tblGroups****中**的所有**GroupID**以及每个**GroupID**中的项目总数。

 ******我设法做到这一点，但仅`get Sum(Quantity)`适用于不为空的**GroupID**和**DateID**。我想得到0。例如上面的数据，我想得到一条线`"02/05/2012 Table 0"`，因为在“表”组中没有任何产品的数据`01/05/12`。

到目前为止，我的 SQL 查询是：

```
SELECT tblDates.DateID, 
       tblProducts.GroupID, 
       Sum(tblInventory.Quantity) AS SumOfQuantity
FROM (tblGroup 
     INNER JOIN tblProducts ON tblGroup.GroupID = tblProducts.GroupID) 
     INNER JOIN (tblDates INNER JOIN tblInventory ON tblDates.DateID = tblInventory.DateID) ON tblProducts.ProductID = tblInventory.ProductID
GROUP BY tblDates.DateID, tblProducts.GroupID; 
```

**我认为我应该基本上在与tblInventory**不同的表上具有相同的查询，该查询将列出所有**产品**而不是列出的产品，其中 0 而不是没有行，但鉴于我的数据库中的**日期**和**产品**数量，我犹豫是否这样做，查询可能太慢了。

可能有更好的方法来实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:20:58.607

要获得所有可能的`Groups`组合`Dates`，您必须使用`CROSS JOIN`这些表格。然后你可以`LEFT JOIN`到其他 2 个表：

```
SELECT
    g.GroupID
  , d.DateID
  , COALESCE(SUM(i.Quantity), 0)  AS Quantity
FROM 
        tblDates  AS d
    CROSS JOIN
        tblGroups AS g
    LEFT JOIN
            tblProducts  AS p
        JOIN
            tblInventory AS i
          ON i.ProductID = p.ProductID 
      ON  p.GroupID = g.GroupID
      AND i.DateID = d.DateID 
GROUP BY
    g.GroupID
  , d.DateID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:07:22.573

使用 isnull() 函数。将您的查询更改为：

```
 SELECT tblDates.DateID, tblProducts.GroupID,
            **ISNULL( Sum(tblInventory.Quantity),0)** AS SumOfQuantity
    FROM (tblGroup INNER JOIN tblProducts ON tblGroup.GroupID = tblProducts.GroupID) 
    INNER JOIN (tblDates INNER JOIN tblInventory ON tblDates.DateID = tblInventory.DateID)
            ON tblProducts.ProductID =  tblInventory.ProductID
    GROUP BY tblDates.DateID, tblProducts.GroupID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:38:22.807

您没有说您使用的是哪个数据库，但我熟悉的是 Oracle。

显然，如果您内部连接所有 tbales，您将不会获得包含空值的行。如果您使用外连接到库存表，您也会遇到问题，因为 groupid 列未列在 tblinventory 中，您只能外连接到一个表。

我会说你有两个选择。使用函数或在库存表中具有 groupid 列的副本。

所以，一个更好但更慢的解决方案：

```
create or replace
function totalquantity( d date, g varchar2 ) return number as
  result number;
begin
  select nvl(sum(quantity), 0 )
  into result
  from tblinventory i, tblproducts p
  where i.productid = p.productid
  and i.dateid = d
  and p.groupid = g;
  return result;
end;

select dateid, groupid, totalquantity( dateid, groupid )
from tbldates, tblgroups 
```

或者，如果您在库存表中包含 groupid 列。（您仍然可以使用约束来保证完整性）

```
select d.dateid, i.groupid, nvl(i.quantity, 0) 
from tbldates d, tblinventory i 
where i.dateid(+) = d.dateid 
group by d.dateid, g.groupid 
```

希望这会有所帮助，吉斯利******

# xcode4 - 仅在 Xcode 4 模拟器中可见的更改

> ID：10428833
> 
> 赞同：0
> 
> 时间：2012-05-03T09:41:54.590
> 
> 标签：xcode4, ios-simulator

我发现了一个奇怪的问题：我在我的 ViewController.xib 中添加了一个新按钮，它在我的模拟器上可见。但是当我在我的 iPhone 上测试它时，它并没有出现。到目前为止，我发现我的 ViewController 上没有出现任何“新”更改，尽管我清理、构建了我的新项目并在 iPhone 上删除了我的应用程序（没有更改）。有谁知道如何让它在 iPhone 上可见？更新：我在上面的文本中拼错了 .Xib 而不是 .xib，所以它写对了。也许我得到了一个线索，为什么我的 iPhone 没有任何变化：当我将它与其他项目进行比较时，概览右侧有一个“M”表示修改。就我而言，我只有一个 "-" 。因此，链接可能有问题，您怎么看？感谢你并致以真诚的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:03:34.893

设备上的文件系统区分大小写。您必须将您的 xib 命名为 ViewController.xib 并严格按照大小写。

# windows-phone-7 - Windows phone 7 动态磁贴和推送通知

> ID：10428843
> 
> 赞同：1
> 
> 时间：2012-05-03T09:42:16.777
> 
> 标签：windows-phone-7, push-notification, live-tile, mpns

我需要帮助。我已经为我的应用程序完成了推送通知。我希望磁贴更改为推送通知发送的图像。我该怎么做呢。所有这些都将在一个应用程序本身中完成。我在 msdn 和其他网站上看到的示例显示了一些我没有得到的次要图像，而且它们需要两个应用程序。我不明白它是如何工作的。请帮忙。我希望动态磁贴显示推送通知已发送的图像。示例代码将不胜感激。谢谢，麻烦您了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:10:37.323

您可能对以下站点上提供的代码示例感兴趣，其中包括 C# 和 VB.NET 中的示例代码，涵盖了 Windows Phone 开发的各个方面，包括 Live Tiles：-

[http://code.msdn.microsoft.com/wpapps/](http://code.msdn.microsoft.com/wpapps/)

# json - 使用 json ajax 从 jqueryui 对话框向 Web 处理程序 [.ashx] 发送值

> ID：10428852
> 
> 赞同：0
> 
> 时间：2012-05-03T09:42:46.323
> 
> 标签：json, jquery-ui, jquery

我正在尝试使用ajax post将客户在jqueryui对话框表单上输入的值发送到webhandler（ashx）但没有成功，下面是代码：

Webhandler[login.ashx]

```
public class Login : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        context.Response.ContentType = "application/json";
        // string ID = context.Request.QueryString["ID"];  
        //Want to pass full name , email and selected value of dropdown list 
        // then perform sql query
        string fullname = "";//from ajax
        string email = "";//from ajax
        string scheme = "";//from ajax
        docalculation(fullname, email , scheme);
}

    public bool IsReusable {
        get {
            return false;
        }
    }

            public void docalculation(string name, string email, string scheme)
            {
                SqlConnection conn = new SqlConnection(ConfigurationManager.AppSettings["umbracoDbDSN"]);
                conn.Open();
                SqlCommand cmd1 = conn.CreateCommand();
                cmd1.CommandText = "IF NOT EXISTS (SELECT * FROM XXX WHERE email = @XX) INSERT INTO dbo.schemeCustomers(CustomerName, CustomerEmail, schemeType, LoginDate) VALUES (@XX,@XX,@XX,@XX)";
                cmd1.Parameters.Add("@XX", SqlDbType.VarChar).Value = email;
                cmd1.Parameters.Add("@XX", SqlDbType.VarChar).Value = scheme;
                cmd1.Parameters.Add("@XX", SqlDbType.DateTime).Value = DateTime.Now;
                int result1 = Convert.ToInt32(cmd1.ExecuteScalar());
                conn.Close();
                Response.Redirect("/home/schemes.aspx");// response.redirect doesnt works in handler??
            }

} 
```

.aspx

```
$('#logintest').click(function (e) {
                    e.preventDefault();
                    var selectedValue = $('#DropDownList2').val();var fullname = $('#name').val();var email = $('#email').val();
                    var jsonData = '{ "fullname":" + fullname  +", "email": " + email +" , "selectedValue" : " + selectedValue +"}';
                    $.ajax({
                       url: "/login.ashx",

                        type: "POST",
                        data : JSON.stringify({ fullData: jsonData }),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (response) {
                            if (response.d != "") {
                                alert(response.d);

                            }
                        }

                    });
                });

                 <div id="dialog-form" title="Group Scheme Login">
                <form>
                <fieldset>
                <label for="name">
                    Full Name</label>
                <input type="text" name="name" id="name" class="text ui-widget-content ui-corner-all" />
                <br />
                <label for="email">
                    Email</label>
                <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
                <br />
                <select id="DropDownList2">
                    <option value="product1">Camera</option>
                    <option value="product2">DVD</option>
                    <option value="product3">AC</option>
                </select>
                </fieldset>
                </form>
                <br />
                <a href="" id="logintest">Login </a>
                </div> 
```

任何人都可以帮助我如何将参数传递给处理程序，任何帮助或建议将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:00:32.437

你需要像`HttpContext.Current.Request`你`ashx`一样使用：

```
 string fullname =  HttpContext.Current.Request.Form("fullname");
 ... 
```

并像这样更新您的 ajax 调用：

```
 var selectedValue = $('#DropDownList2').val(),
     fullname = $('#name').val(),
     email = $('#email').val();

$.ajax({
         url: "/login.ashx",
         type: "POST",
         data : { fullname: fullname, 
                  email:email, 
                  selectedValue:selectedValue },
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         success: function (response) { 
               // do stuff
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T20:07:57.643

当我们继续讨论 Codrin Eugeniu 时，我无法在回复中添加评论；只需删除

```
 contentType: "application/json; charset=utf-8", 
```

然后再试一次。希望它会工作。

# c# - 一个 TcpListener 接受所有连接时，总上传速度较慢

> ID：10428854
> 
> 赞同：0
> 
> 时间：2012-05-03T09:42:51.977
> 
> 标签：c#, performance, sockets, tcplistener

我最近在**C# .NET Framework 4.0**中遇到了一个奇怪的情况：

* * *

在一个简单的程序中，我创建了一个 TcpListener，指定它的本地端口，启动它并使用异步接受函数来接收传入的连接请求。

一旦它有待处理的入站连接，服务器就会从异步回调函数中接受 TcpClient 并将其记录到容器中（更具体地，a `List<TcpClient>`）。

我编写了另一个简单的客户端程序，它一旦启动就连接到服务器，然后调用异步接收函数。

连接所有客户端后，服务器使用`System.Threading.Tasks.Parallel.ForEach()`.

在每个任务中，我使用存储在该列表中的 TcpClient 将数据发送到相应的客户端。所有 TcpClients 都在同时发送数据（我检查了客户端，它们都在接收数据）。数据只是`byte[8192]`服务器程序启动时生成的随机数据。我让服务器重复发送它。

客户端的接收回调很简单。一旦数据到达，客户端只是忽略数据并运行另一个异步接收函数。

测试环境是一个**1Gbps 的 LAN**、**一台服务器**和**几个客户端**。

结果是：无论有多少个客户端（**从 3 ~ 8 个**）连接到服务器，服务器的总上传速度永远不会超过`13MByte/`s。

* * *

然后我尝试了另一种方法：

我也在**客户端**创建了一个**TcpListener**。一旦客户端连接到服务器，服务器也会连接到客户端的监听端口。然后服务器会将这个**传出**连接存储到列表中，而不是传入连接。

 ****这一次，测试结果变化很大：当3个客户端从服务器接收数据时，服务器的总上传速度接近`30MByte/s`；有 5 个客户端，总上传速度接近`50MBytes/s`.

虽然这个`10MByte/s-per-client`限制可能是由于硬件或网络配置，但它仍然比上述情况好得多。

* * *

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:38:57.627

我不知道这种行为的原因，但作为一种解决方法，我建议发送更大的缓冲区。像 1MB（或至少 64k）。在 1Gbps LAN 上，如果您的应用程序发送更大的块（和更少的数据包），您可能会更有效率。此外，启用巨型帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:18:55.793

不要使用线程或任务进行处理。这会损害你的表现。

我制作了一个框架，可以帮助您开发高性能的网络应用程序，而无需关心实际的 IO 处理。

[http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/](http://blog.gauffin.org/2012/05/griffin-networking-a-somewhat-performant-networking-library-for-net/)****

# opencv - 如何在opencv中计算复数的绝对值

> ID：10428856
> 
> 赞同：2
> 
> 时间：2012-05-03T09:42:53.950
> 
> 标签：opencv, matrix

任何人都可以帮助我了解如何获得复杂矩阵的绝对值。矩阵在一个通道中包含实值，在另一个通道中包含虚值。如果可能的话，请帮助我给我一些例子。

在此先感谢阿兰加拉扬

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:24:31.907

假设您有 2 个分量：X 和 Y，两个大小和类型相同的矩阵。在您的情况下，它可以是真实/即时值。

```
// n rows, m cols, type float; we assume the following matrices are filled 
cv::Mat X(n,m,CV_32F); 
cv::Mat Y(n,m,CV_32F); 
```

您可以像这样计算每个复数的绝对值：

```
// create a new matrix for storage
cv::Mat A(n,m,CV_32F,cv::Scalar(0.0));
for(int i=0;i<n;i++){
  // pointer to row(i) values
  const float* rowi_x = X.ptr<float>(i);
  const float* rowi_y = Y.ptr<float>(i); 
  float* rowi_a = A.ptr<float>(i); 
  for(int j=0;j<=m;j++){ 
     rowi_a[j] = sqrt(rowi_x[j]*rowi_x[j]+rowi_y[j]*rowi_y[j]);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T00:41:04.140

如果你查看 OpenCV phasecorr.cpp 模块，有一个名为 magSpectrums 的函数已经完成了这项工作，并且也将处理共轭对称打包的 DFT 结果。我不认为它是由头文件暴露的，但是复制它很容易。如果您关心速度，请确保您在编译时也打开了任何可用的 SIMD 选项，因为它们可以对这个计算产生很大的影响。

# html - 如何在android中的文本上添加阴影？

> ID：10428859
> 
> 赞同：1
> 
> 时间：2012-05-03T09:43:03.190
> 
> 标签：html, css

> **可能重复：**
> [Android - 文本上的阴影？](https://stackoverflow.com/questions/2486936/android-shadow-on-text)

如何在android中的文本上添加阴影？

我正在使用这个。

文字阴影：5px 5px 5px 黑色；

但这不适用于android设备...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:48:14.793

Android 浏览器对样式的渲染`background-image`效果很差。这是有关此主题的有用[文章。](http://mbudm.com/2011/03/android-css-background-image-blurriness/)

最好使用以下内容：`android:shadowDx`, `android:shadowDy`, `android:shadowRadius`.

例如：

```
<TextView android:id="@+id/txt_1"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textSize="14dp"
              android:textStyle="bold"
              android:textColor="@color/light_font"
              android:shadowColor="@color/text_shadow"
              android:shadowDx="1"
              android:shadowDy="1"
              android:shadowRadius="2" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:49:04.413

您编写的代码是用于背景的，如果您想在文本中添加阴影，则使用此 CSS 完成，

文字阴影：0 1px 0 #000;

或者

文字阴影：0 1px 1px #Ff0000;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:51:30.700

您是否使用标签 text-shadow 进行了测试？

```
text-shadow: 5px 5px 5px black; 
```

# search - magento 从搜索结果中排除捆绑的项目

> ID：10428860
> 
> 赞同：0
> 
> 时间：2012-05-03T09:43:06.263
> 
> 标签：search, magento, bundle, magento-1.4

目前，当人们搜索一个项目时，快速搜索还会显示任何包含符合搜索条件的项目的捆绑包。我将如何阻止这一切？

从搜索结果中过滤掉所有捆绑项目的解决方案也可以。

> **更新**

我不希望这些商品显示在目录或搜索中，而是将它们用作追加销售商品。这似乎留下了两个选择：

1.  我可以修改搜索结果控制器以省略捆绑项目（我询问的方法），或者
2.  我可以更改`Upsell.php`脚本以包含“不单独显示”项目。

第二个可能更容易？目前应用的过滤器是：

```
Mage::getSingleton('catalog/product_visibility')->addVisibleInSearchFilterToCollection($this->_itemCollection); 
```

我将如何更改它以使其不显示单独的项目？

为不完整的初始问题道歉。

> **第二次更新：**

好的，我添加了

```
->setVisibility(null) 
```

它已经有了

```
->addStoreFilter() 
```

但是没有变化。

本质上，如果我没有：

```
Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($this->_itemCollection);
Mage::getSingleton('catalog/product_visibility')->addVisibleInSearchFilterToCollection($this->_itemCollection); 
```

然后我收到以下错误：

> 选择 1 作为`status`, `e`. `entity_id`, `e`. `type_id`, `e`. `attribute_set_id`, `price_index`. `price`, `price_index`. `tax_class_id`, `price_index`. `final_price`, IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price, price_index.tier_price), price_index.min_price) AS `minimal_price`, `price_index`. `min_price`, `price_index`. `max_price`, `price_index`. `tier_price`, `e`. `name`, `e`. `short_description`, `e`. `sku`, `e`. `price`, `e`. `special_price`, `e`. `special_from_date`, `e`. `special_to_date`, `e`. `manufacturer`, `e`. `manufacturer_value`, `e`. `small_image`, `e`. `thumbnail`, `e`. `news_from_date`, `e`. `news_to_date`, `e`. `tax_class_id`, `e`.`url_key`, `e`. `required_options`, `e`. `image_label`, `e`. `small_image_label`, `e`. `thumbnail_label`, `e`. `price_type`, `e`. `weight_type`, `e`. `price_view`, `e`. `shipment_type`, `e`. `links_purchased_separately`, `e`. `links_exist`, `e`. `is_imported`, `e`. `rc_manufacturer`, `e`. `rc_manufacturer_value`, `e`. `rc_vehicle`, `e`. `rc_vehicle_value`, `e`. `rc_assembly_type`, `e`. `rc_assembly_type_value`, `e`. `surface_type`, `e`. `surface_type_value`, `e`. `rc_drive`, `e`. `rc_drive_value`, `e`. `rc_scale`, `e`. `rc_scale_value`, `e`. `rc_motor_type`, `e`. `rc_motor_type_value`, `e`. `rc_engine_start_type`, `e`. `rc_engine_start_type_value`, `e`. `rc_engine_size`, `e`. `rc_engine_size_value`,`e`. `rc_form_factor`, `e`. `rc_form_factor_value`, `e`. `rc_frequency`, `e`. `rc_frequency_value`, `e`. `rc_gear_material`, `e`. `rc_gear_material_value`, `e`. `rc_operation`, `e`. `rc_operation_value`, `e`. `rc_torque_6v`, `e`. `rc_torque_6v_value`, `e`. `rc_speed_6v`, `e`. `rc_speed_6v_value`, `e`. `rc_bearing_type`, `e`. `rc_bearing_type_value`, `e`. `rc_waterproofing`, `e`. `rc_waterproofing_value`, `e`. `rc_battery_application`, `e`. `rc_battery_application_value`, `e`. `rc_input_supply`, `e`. `rc_input_supply_value`, `e`. `rc_power_output_amps`, `e`. `rc_power_output_amps_value`, `e`. `rc_power_output_watts`, `e`. `rc_power_output_watts_value`, `e`. `rc_lead_connector_type`, `e`. `rc_lead_connector_type_value`, `e`. `rc_gear_pitch`, `e`. `rc_gear_pitch_value`, `e`. `rc_nitro_content`, `e`.`rc_nitro_content_value`, `e`. `rc_exhaust_type`, `e`. `rc_exhaust_type_value`, `e`. `rc_engine_starter_type`, `e`. `rc_engine_starter_type_value`, `e`. `rc_head_fitting`, `e`. `rc_head_fitting_value`, `e`. `rc_temperature_rating`, `e`. `rc_temperature_rating_value`, `e`. `rc_oil_type`, `e`. `rc_oil_type_value`, `e`. `rc_container_size`, `e`. `rc_container_size_value`, `e`. `rc_class`, `e`. `rc_class_value`, `e`. `rc_paint_application`, `e`. `rc_paint_application_value`, `e`. `rc_size`, `e`. `rc_size_value`, `e`. `rc_colour`, `e`. `rc_colour_value`, `e`. `rc_pack_contents`, `e`. `rc_pack_contents_value`, `e`. `rc_spare_part_type`, `e`. `rc_spare_part_type_value`, `e`. `rc_oil_weight`, `e`. `rc_oil_weight_value`, `e`. `rc_glue_type`, `e`. `rc_glue_type_value`, `e`. `rc_usage`,`e`. `rc_usage_value`, `e`. `rc_tool_type`, `e`. `rc_tool_type_value`, `e`. `rc_engine_spare_type`, `e`. `rc_engine_spare_type_value`, `e`. `rc_tune_up_type`, `e`. `rc_tune_up_type_value`, `e`. `rc_bearing_pack_type`, `e`. `rc_bearing_pack_type_value`, `e`. `rc_driver_type`, `e`. `rc_driver_type_value`, `e`. `rc_nut_type`, `e`. `rc_nut_type_value`, `e`. `rc_plane_type`, `e`. `rc_plane_type_value`, `e`. `rc_boat_type`, `e`. `rc_boat_type_value`, `e`. `pre_order`, `e`. `pre_order_value`, `e`. `msrp_enabled`, `e`. `msrp_display_actual_price_type`, `e`. `msrp`, `links`. `link_id`, `link_attribute_position_int`. `value`AS `position`FROM `catalog_product_flat_1`AS `e` INNER JOIN `catalog_product_index_price`AS`price_index`ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 INNER JOIN `catalog_product_link`AS `links`ON links.linked_product_id = e.entity_id AND links.link_type_id = 4 LEFT JOIN `catalog_product_link_attribute_int`AS `link_attribute_position_int`ON link_attribute_position_int.link_id = links

我也尝试了以下方法，但收到错误：

```
Mage::getSingleton('catalog/product_status')->addSaleableFilterToCollection($this->_itemCollection);
Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($this->_itemCollection); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:40:01.850

*根据您更新的问题：* 如果您没有使用 Enterprise Edition TargetRule 或其他自动加售的模块（即加售由管理员明确定义），那么最简单的方法可能是您指定的方法 - 重写 Upsell 块不添加可见性过滤器。作为猜测，为了达到最佳效果，您可能需要调用`setVisibility(null)`并`addStoreFilter()`在集合上触发正常的限制行为。

**编辑：下面的原始答案**

*   管理 > 目录 > 管理产品网格
*   从顶部的过滤器区域中选择“捆绑产品”，单击“搜索”
*   点击“全选”
*   从批量操作块的“操作”下拉列表中选择“更新属性”，单击“提交”
*   将“可见性”属性更改为“目录”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:50:18.523

我通过修改自定义模块解决了这个问题，这样我就不用担心这个了。它可能有一些用处，因为它涉及使用：

```
$collection->addAttributeToFilter('type_id', array('neq' => 'bundle')); 
```

这只是从集合中排除所有捆绑项目。

# java - 如何重构以下代码

> ID：10428861
> 
> 赞同：3
> 
> 时间：2012-05-03T09:43:13.780
> 
> 标签：java

我有一个方法想要重构，一些虚拟代码如下：

```
if(deletedInfo.isEmpty() && addedInfo.isEmpty()) {
    // some logic codes
} else if (!deletedInfo.isEmpty() && addedInfo.isEmpty()) {
    // some logic codes
} else if (deletedInfo.isEmpty() && !addedInfo.isEmpty()) {
    // some logic codes
} else if(!deletedInfo.isEmpty() && !addedInfo.isEmpty()) {
    // some logic codes
} 
```

是否有适当的模式或某种算法来重构这些代码？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T09:45:50.777

```
if (deletedInfo.isEmpty()) {

    if (addedInfo.isEmpty()) {
        // some logic codes
    } else {
        // some logic codes
    }

} else {

    if (addedInfo.isEmpty()) {
        // some logic codes
    } else {
        // some logic codes
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:52:44.917

您可以使用以下代码进行重构：

```
int val = 0;
if (deletedInfo.isEmpty()) val |= 0x1;
if (addedInfo.isEmpty()) val |= 0x2;

switch (val) {
    case 0: // some logic codes
    case 1: // some logic codes
    case 2: // some logic codes
    case 3: // some logic codes
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:48:23.823

有几种方法可以做到这一点。这是一个：

```
if (a) {
  if (b) {
    // do J
  } else {
    // do K
  }
} else {
  if (b) {
    // do L
  } else {
    // do M
  }
} 
```

您可能更喜欢类似于真值表的东西，特别是如果您要组合两个以上的测试：

```
int switcher = 0;
if (a) switcher|=1;
if (b) switcher|=2;
switch(switcher) {
  case 0:
    // do J
    break;
  case 1:
    // do K
    break;
  case 2:
    // do L
    break;
  case 3:
    // do M
    break;
} 
```

我不认为有一种自动“正确”的方式——你必须选择最适合你情况的方式。

# mysql - mysql，使用选择子查询插入

> ID：10428863
> 
> 赞同：4
> 
> 时间：2012-05-03T09:43:32.913
> 
> 标签：mysql

我的表中有很多产品，`product_category`其中 a`category_id`为 5。我添加了一个新`category_id`的 19。如何将类别 5 中的所有产品也添加到类别 19？

我正在尝试做这样的事情：

```
insert into product_categories( category_id, product_id )
select 19,
   (select product_id
    from product_categories
    where category_id = 5) 
```

但我得到一个`sub query returns more than 1 row`错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T09:47:20.720

试试这个：

```
INSERT INTO product_categories (category_id, product_id)
  SELECT 19 AS category_id, product_id 
  FROM product_categories 
  WHERE category_id =5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:49:01.357

尝试这样的事情：

```
INSERT INTO product_categories( category_id, product_id )
SELECT 19, product_id FROM product_categories WHERE category_id =5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-20T16:14:19.003

你可以这样做：

```
INSERT INTO table_a (field, field, timestamp) 
 VALUES (
     (SELECT id FROM tablex WHERE id = :xid LIMIT 1),
     (SELECT id FROM tabley WHERE id = :yid LIMIT 1),
     NOW()
 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T09:49:03.323

尝试限制

```
INSERT INTO product_categories( category_id, product_id ) SELECT 19 , (

SELECT product_id FROM product_categories WHERE category_id =5 LIMIT 1) 
```

# c# - How to format a String to display on multiple Lines

> ID：10428870
> 
> 赞同：1
> 
> 时间：2012-05-03T09:44:08.757
> 
> 标签：c#, html, string

Here i have a message string that displays the content of an email. I would like the From, The subject and the body to all display on a new line.

Could someone please advise on how this is done. Below is what i'm trying but its all still on one line.

I thought enviroment.newline would work, i still think it will but maby im doing it wrong?

```
MessageString = "From: " + message.Headers.From.Address + Environment.NewLine + "Subject: " + message.Headers.Subject + Environment.NewLine + "Body: " + messagePart.BodyEncoding.GetString(messagePart.Body); 
```

> * * *

if you could also show me how to write code over multiple lines and still have it function that would be awesome too???????

> * * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:48:06.647

If email is in html format then try `<br />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:53:13.713

You can also use a `Literal` control with `Mode` set to `PassThrough`, and then use `<br />` for a line break. Literals (and I guess also labels) HTML-encode their content, so a `<br />` is not rendered as a line break by default.

However, be careful: You have to avoid XSS attacks on your own this way! The [`HttpUtility.HtmlEncode`](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx) method is useful therefor.

# python - Python：使用 urllib 下载不存在的文件时处理异常

> ID：10428871
> 
> 赞同：2
> 
> 时间：2012-05-03T09:44:08.850
> 
> 标签：python, urllib2, urllib

我知道如何使用 python 从网上下载文件，但是我希望处理所请求的文件不存在的情况。在这种情况下，我想打印一条错误消息（“404：找不到文件”）并且不向磁盘写入任何内容。但是，我仍然希望能够继续执行程序（即下载可能存在的列表中的其他文件）。

我该怎么做呢？下面是一些模板代码，用于根据其 url 下载文件（如果您认为有更好的方法，请随时修改它，但请保持简洁明了）。

```
import urllib
urllib.urlretrieve ("http://www.example.com/myfile.mp3", "myfile.mp3") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:47:28.550

```
from urllib2 import URLError

try:
    # your file request code here
except URLError, e:
    if e.code == 404:
        # your appropriate code here
    else:
        # raise maybe? 
```

我遵循[了这个指南，其中有一个](http://www.voidspace.org.uk/python/articles/urllib2.shtml)[关于处理异常](http://www.voidspace.org.uk/python/articles/urllib2.shtml#handling-exceptions)的特定部分，发现它真的很有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T01:20:24.150

```
import urllib, urllib2
try:
    urllib.urlretrieve ("http://www.example.com/", "myfile.mp3")
except URLError, e:
    if e.code == 404:
        print "4 0 4"
    else:
        print "%s" % e 
```

这就是您的代码所做的。它基本上试图检索 www.example.com 的网页并将其写入 myfile.mp3。它不会以异常结束，因为它不是在寻找 myfile.mp3，它基本上将它在 html 中获得的所有内容写入 myfile.mp3

如果您正在寻找代码以在网络上的某个位置下载文件，请试试这个

[如何使用 urllib2 在 python 中下载 zip 文件？](https://stackoverflow.com/questions/4028697/how-do-i-download-a-zip-file-in-python-using-urllib2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T11:39:07.327

您的代码应如下所示：

```
try:
    urllib.urlretrieve ("http://www.example.com/myfile.mp3", "myfile.mp3")
except URLError,e:
    if e.code==404:
        print 'file not found. moving on...'
        pass 
```

# c# - WPF C# - 树视图中的 XML 编辑绑定

> ID：10428875
> 
> 赞同：1
> 
> 时间：2012-05-03T09:44:16.050
> 
> 标签：c#, wpf, xml, binding, editing

我认为这是一个非常基本的问题，但我找不到答案。

我得到了一个 XML 文件，它使用分层数据模板加载到树视图的文本块中：

```
<HierarchicalDataTemplate.Triggers>
  <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
    <Setter TargetName="textBlock1" Property="Text" Value="{Binding Path=Name}"/>
  </DataTrigger>
</HierarchicalDataTemplate.Triggers> 
```

打开 XML 的 c# 代码：

```
XmlDocument doc = new XmlDocument();
doc.Load(open.FileName);
XmlDataProvider dp = (XmlDataProvider)this.FindResource("nodes");
dp.Document = doc;
dp.XPath = "*"; 
```

当我双击 textBlock1 时，会出现一个带有取消和保存按钮的新窗口，以及一个包含所选节点的文本框（我要编辑的内容）：

```
XmlNode selected_xNode = tree.SelectedItem as XmlNode;
openWindow.textBox1.Text = selected_xNode.Name; 
```

这工作正常，但我不知道如何在单击保存按钮时将选定的节点名称更改为 textbox.text？

我想要类似的东西：

```
selected_xNode.Name = textBox1.Text; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:34:31.223

我认为您需要打开xml文件并写入指定的节点，然后再次保存。你不能只是尝试改变树。

```
XmlDocument doc = new XmlDocument(); 
doc.Load(open.FileName); 
```

1.  首先，您需要找到元素，最好使用 LiNq 到 Xml。

2.  然后再次写回（替换旧的）。

3.  节省

您已经有了 XmlNode，因此它可能已经足够找到该节点了。

[http://www.hookdonlinq.com/LINQtoXML5MinuteOverview.ashx](http://www.hookedonlinq.com/LINQtoXML5MinuteOverview.ashx)

# javascript - Javascript中url的正则表达式

> ID：10428876
> 
> 赞同：0
> 
> 时间：2012-05-03T09:44:19.473
> 
> 标签：javascript, regex

尽管我很努力，但我对正则表达式从来都不擅长。有人可以帮助我吗我正在尝试以这种格式匹配网址：

```
"/year/monthnum/day/postname/" 
```

所以：

```
"2012/05/03/whatever-the-text-here" 
```

使用：

```
if(window.location.pathname.match(...))
{
 //do something
} 
```

我已经尝试了几件事，但我对正则表达式很糟糕......有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:46:38.547

[http://regexr.com?30ram](http://regexr.com?30ram)

```
if(window.location.pathname.match(/\/?[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}\/.+$/)) 
```

*这也可以增强以检查那一天不是 0 ......或类似的东西......但我认为它已经足够了。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:50:31.413

**尝试这个：**

```
if (/(?:(?:\d{4})[\\\/](?:\d{2})[\\\/](?:\d{2})[\\\/])([^\\\/]+)/m.test(subject)) {
    // Successful match
} else {
    // Match attempt failed
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:06:50.253

这个 url 可以在 URL 正则表达式中帮助你更多

[http://regexlib.com/Search.aspx?k=URL&AspxAutoDetectCookieSupport=1](http://regexlib.com/Search.aspx?k=URL&AspxAutoDetectCookieSupport=1)

# xpath - Selenium IDE 和 xpath - 在表格中查找文本/行并选择单选框

> ID：10428878
> 
> 赞同：3
> 
> 时间：2012-05-03T09:44:25.640
> 
> 标签：xpath, selenium, selenium-ide

我一直在使用 Selenium IDE 并获得了一些不错的结果。我已经阅读了很多关于follow-sibling 和previous-sibling 的内容，但我找不到正确的单选按钮。

本质上，我想在表格中找到带有“测试”一词的行，然后单击单元格中的单选按钮。

到目前为止，我可以找到输入按钮 //input[@type='radio']

并找到测试文本 //a[contains(text(),'testing')]

我一直在尝试在 ide 中使用它

```
check | //input[@type='radio']/following-sibling::td[1]/a[contains(text(),'testing')] 
```

但我得到了错误`[error] locator not found: //input[@type='radio']/following-sibling::a[contains(text()[1],'testing')]`

非常感谢任何改变这一点的帮助:)

干杯

达米安

这是光秃秃的基本表...

```
<tbody id="list">
<tr>
<th>
<label class="radio">
<input class="presentation_radio" type="radio" value="1" name="presentation_radio">
</label>
</th>
<td>
<a href="/link_to/document">testing </a>
</td>
<td>testing</td>
<td>Joe Acme</td>
<td>Presentation</td>
<td>03 May 2012</td>
<td>5 (1)</td>
</tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:52:02.823

您的 xpath 的问题在于`td`并且`input`不是**兄弟姐妹**（它们没有共同的父级），即使您将 xpath 更改为更正确的版本：

```
//input[@type='radio']/following::td[1]/a[contains(text(),'testing')] 
```

它会发现`a`有前面的复选框而不是复选框本身。所以正确的 xpath 将是：

```
//a[contains(text(),'testing')]/preceding::input[@type='radio'][1] 
```

或者

```
//tr[descendant::a[contains(.,'testing')]]//input[@type='radio'] 
```

对于 xpath 轴教程，请阅读：http: [//msdn.microsoft.com/en-us/library/ms256456.aspx](http://msdn.microsoft.com/en-us/library/ms256456.aspx)

# javascript - 不显眼的 JavaScript 过时了吗？

> ID：10428882
> 
> 赞同：18
> 
> 时间：2012-05-03T09:44:52.910
> 
> 标签：javascript, web, accessibility, paradigms

[当我第一次阅读 Web 标准课程中不显眼的 JavaScript](http://dev.opera.com/articles/view/unobtrusive-javascript/)原理时，我认为这是一件非常棒的事情。

> 不显眼的 JavaScript 与其说是一种技术，不如说是一种编程哲学。到目前为止，它最重要的组成部分是清楚地了解哪些功能属于哪个层。所有绝对重要的网站功能都应该用纯 HTML 编码，但是一旦你创建了这个基础，你就可以在基础之上添加一个 JavaScript 层，以便为支持它的浏览器提供一个更好、更清洁、更快的界面。
> 
> 此外，不显眼的 JavaScript：
> 
> 1.  分离结构和行为，以使您的代码更清晰和脚本维护更容易
>     
>     
> 2.  先发制人浏览器不兼容
>     
>     
> 3.  使用干净的语义 HTML 层

对于我目前的项目，我使用这种方法。当我关闭 JavaScript 进行其他一些我必须做的工作时，我很惊讶有多少网站在没有 JavaScript 的情况下完全崩溃：缺少功能，以及缺少很多重要信息，这些信息根本不存在DOM。

这些尤其是社交网站。出现这种情况也就不足为奇了，所需的开发时间和用户体验可能比可访问性重要得多。

我仍然在问自己，不显眼的 JavaScript 是否还没有过时。我的意思是哪个浏览器本身不支持 JavaScript？它仍然是适合 2012 年的方法吗？我开始怀疑了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T10:02:06.257

访问网站和使用JS有两种方式：

1.  JS 作为增强

    这些类型的网站在某种意义上类似于“文件”，类似于报纸、书籍和信件。您不需要花哨的效果来阅读和使用内容。随之而来的是渐进式增强： *在不牺牲目的的情况下构建基本功能并增加复杂性*。

    大多数（大型）网站即使在使用不支持的浏览器时也使用此方案来保持其有用性。一个例子是 StackOverflow，它甚至可以在 lynx 命令行浏览器上运行！

    ```
     ______
    | JS   | - JavaScript for (optional) enhancements
    |------|
    | CSS  | - CSS for (optional) style
    |------|
    | HTML | - (mandatory) HTML with base content
    '------' 
    ```

2.  JS作为一个平台

    对于 Web 应用程序，它们基于 JS 构建以提供实时、动态的内容和功能是合理的（更像是强制性的），而 HTML 和 CSS 用作视图。它是其他编程语言的同义词，您可以在其中“无头”地使用您的程序（无 UI），如库和插件。

    优雅的降级伴随着这种方法：*“只能在一定程度上向后支持，否则你什么都得不到”*

    ```
     ____________
    | HTML | CSS | - (optional) HTML and CSS view
    |------------|
    |     JS     | - (mandatory) JS platform
    '------------' 
    ```

它通常归结为“它是文档还是应用程序？”的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T09:55:59.797

不同的公司采取不同的方法。例如，Google 的搜索使用不显眼的 javascript，可以优雅地降级，但对于 GMail，他们维护了一个单独的仅 HTML 站点，他们后来在 GMail JS 版本之后开发了该站点。

对我来说，这取决于

1.  复杂
2.  功能性，
3.  成本
4.  受影响的用户数

决定是使用不显眼的 JS 进行优雅降级，还是构建一个专用的仅 HTML 站点，或者完全忽略该用户群。

# email-attachments - 没有相应的文件和目录。发送附件

> ID：10428887
> 
> 赞同：0
> 
> 时间：2012-05-03T09:45:05.150
> 
> 标签：email-attachments, php

我已经建立了一个php邮件系统。现在我还想通过电子邮件发送附件。我已将附件的文件上传到我的服务器，并希望通过电子邮件发送以下代码。

```
<?php 
    $mail_ontvanger->addAttachment($filesOb->c_file_name, 'home/httpd/vhosts/mysite.nl/subdomains/user/httpdocs/beheer/uploads/', $filesOb->c_file_name);
?> 
```

如果我这样做，我会得到一个错误：（无法打开流：没有这样的文件或目录...）

我自己认为是由目录中的错误\引起的错误（'home/httpd/vhosts/mysite.nl/subdomains/user/httpdocs/beheer/uploads/'）。但这不能解决问题。

当我发送一封带有附件的电子邮件时，我的邮箱中的邮件和往常一样，只有文件是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:49:11.133

错误很明显；它找不到您要附加的文件。也许是因为路径不正确？试试这个：

```
$mail_ontvanger->addAttachment($filesOb->c_file_name, '/home/httpd/vhosts/mysite.nl/subdomains/user/httpdocs/beheer/uploads/', $filesOb->c_file_name); 
```

无论如何，最好使用相对路径。

# haskell - 从 PersistEntity/PersistField 映射到 DB 中的列名和表名的规则是什么

> ID：10428888
> 
> 赞同：7
> 
> 时间：2012-05-03T09:45:07.533
> 
> 标签：haskell, persistent, yesod

我需要使用现有的（MySql）数据库，其中已经定义了表和列的名称。

如果我正确理解了文档（并且我没有找到关于这个主题的好的文档，所以链接将受到高度赞赏），表名与 PersistIdentity 相关，因此必须以大写字母开头（我不是这种情况）米面对）。

但是，列名自动不大写（至少在 Yesod 书 Persistent 一章中描述从声明自动生成的代码的代码片段中暗示了这一点），因此 DB 中的列必须以小写字母开头。

上面的描述是真的吗？

我可以专门控制表到身份和列到字段的映射吗？如果不是，那么命名自动应用的规则是什么？因此，哪些名字是被禁止的？

此外，其中一个字段是 VARCHAR(30)。我如何将其传达给 Persistent？它目前抱怨（通过yesod devel）：

errMessage = "BLOB/TEXT 列 'my_field' 用于在没有密钥长度的密钥规范中"}

这是自动迁移的结果（我可能应该禁用它）。但是，如果我确实想声明一个有界 VARCHAR 字段 - 我可以通过 Persistent 及其自动迁移工具来做到这一点吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T13:04:57.127

我不是 MySQL 后端的权威，但是 IIRC（并且基于代码），您可以通过使用`maxlen=...`属性来控制最大长度。同样，您可以使用`sql=...`属性直接控制该字段在数据库中的名称。因此，例如，以下可能有效：

```
Person sql=people
    name Text sql=full_name maxlen=40
    age Int 
```

我也同意，如果您正在处理预先存在的模式，您应该禁用自动迁移代码。

# java - 如何使用 JPA/EclipseLink 在更新时获取更改的属性

> ID：10428897
> 
> 赞同：3
> 
> 时间：2012-05-03T09:45:45.123
> 
> 标签：java, jpa, jpa-2.0, eclipselink

如何使用 JPA/EclipseLink 在更新时获取更改的属性（名称、旧值、新值）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T13:56:26.490

您可以从 UnitOfWork 或通过 DescriptorEvents 访问更改。您可以从更改集中获取新值，我认为从 2.3 开始，您也可以获取旧值。

看，

[http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F](http://wiki.eclipse.org/EclipseLink/FAQ/JPA#How_to_access_what_changed_in_an_object_or_transaction.3F)

# jsf-2 - 自定义验证器如何知道单击了哪个命令按钮

> ID：10428899
> 
> 赞同：2
> 
> 时间：2012-05-03T09:45:47.100
> 
> 标签：jsf-2, primefaces, myfaces

我的表单有几个“提交”按钮，并且某些字段的验证取决于按下了哪个。如何在我的自定义验证器中找到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:12:36.067

按钮的客户端 ID 也`name`从`<input type="submit">`. `name=value`按下的get`<input type="submit">`也作为请求参数发送。所以你可以在请求参数映射中检查。

例如

```
<h:form id="formId">
    ...
    <h:commandButton id="button1" ... />
    <h:commandButton id="button2" ... />
</h:form> 
```

在实施中具有以下内容`validate()`：

```
Map<String, String> params = context.getExternalContext().getRequestParameterMap();

if (params.containsKey("formId:button1")) {
    // Button 1 is pressed.
}
else if (params.containsKey("formId:button2")) {
    // Button 2 is pressed.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:29:30.793

对于 JSF，将在错误期间显示内置的验证消息。或者您可以在它们各自的标签中的 primefaces 中使用“validator & validatorMessages”等验证属性。

# makefile - 构建 Gstreamer 代码？

> ID：10428902
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:46:08.267
> 
> 标签：makefile, gstreamer, autoconf, automake

我想知道为什么使用 autoconf 和 automake（自动工具）来构建 Gstreamer（以及像 gstramer 这样的颂歌）。我想这些是用来生成 Makefiles 的，然后可以通过简单地运行 make 命令来使用。什么是 makefile.am 和 configure.ac 文件。

Rgds，软软的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:29:54.217

*   `Makefile.am`是用于编写 makefile 的 Automake 脚本简写。它由 Automake 处理以生成`Makefile.in`. 使用 Automake 语言更容易指定 GNU 构建系统所需的依赖项和标准目标。
*   `Makefile.in`是一个缺少平台相关代码的生成文件。见下文。
*   `configure.ac`是一个文件，用 M4 宏语言编写。它由 Autoconf 处理以生成一个名为`configure`. `configure.ac`与编写 200k 的 shell 脚本相比，它更容易编写且不易出错。
*   `configure`是一个 shell 脚本，用于检查您的平台是否支持各种可移植和不可移植的特性。它会生成一大堆文件。它还可以将平台相关和系统相关的代码放入文件中（通常以 结尾），将它们转换为没有扩展名`*.in`的同一个文件。`.in`具体来说，它生成`Makefile`自`Makefile.in`.

[此 Wikipedia 页面](http://en.wikipedia.org/wiki/Automake)上的流程图​​可能会有所帮助。

# android - sax解析后如何在文本框中设置数据

> ID：10428903
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:46:08.483
> 
> 标签：android, textbox, sax

我解析 xml 文件，所有数据都会被解析，但我不明白如何在 textview 中设置这些数据？给我一些想法

```
 public class GtuItemXMLHandler extends DefaultHandler {

    Gtudownload gtudownload;
    Questionpaper questionpaper;

    // Show me the XML.
    private String currentString = "";
    private String charactersString = "";
    private Branch branch;
    private Year year;
    private Semester semester;
    private int branchCount = 0;
    private int yearCount = 0;
    private int semesterCount = 0;

//  private ArrayList<Gtudownload> itemsList = new ArrayList<Gtudownload>();
//  
//  public ArrayList<Gtudownload> getItemsList() {
//      return itemsList;
//  }

    public Gtudownload getGtudownload(){
        return this.gtudownload;
    }
    public Questionpaper getQuestionpaper()
    {
        return this.questionpaper;
    }

    // Called when tag starts
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        Log.i("GTU ", localName);
        if (localName.equalsIgnoreCase("Gtudownload")) {
            gtudownload = new Gtudownload();
            currentString = "Gtudownload";

        } else if (localName.equalsIgnoreCase("Questionpaper")) {
            gtudownload.setQuestionpaper(new Questionpaper());
            gtudownload.getQuestionpaper().setBranchList(new ArrayList<Branch>());
            currentString = "Questionpaper";
        } else if (localName.equalsIgnoreCase("Branch")) {
            branch = new Branch();
            gtudownload.getQuestionpaper().getBranchList().add(branch);
            gtudownload.getQuestionpaper().getBranchList().get(branchCount).setYearList(new ArrayList<Year>());
            currentString = "Branch";
            Log.i("Branch", attributes.getValue("value"));
            branch.setValue(attributes.getValue("value"));
        } else if (localName.equalsIgnoreCase("Year")) {
            year = new Year();
            gtudownload.getQuestionpaper().getBranchList().get(branchCount).getYearList().add(year);
            gtudownload.getQuestionpaper().getBranchList().get(branchCount).getYearList().get(yearCount).setSemesterList(new ArrayList<Semester>());
            currentString = "Year";
            Log.i("Year ", attributes.getValue("value"));
            year.setValue(attributes.getValue("value"));
        } else if (localName.equalsIgnoreCase("semester")) {
            semester = new Semester();          
            currentString = "semester";
            Log.i("Semester ", attributes.getValue("value"));
            semester.setValue(attributes.getValue("value"));
            gtudownload.getQuestionpaper().getBranchList().get(branchCount).getYearList().get(yearCount).getSemesterList().add(semester);
        } else if (localName.equalsIgnoreCase("url")){ 
            currentString = "url";
        }

    }

    // Called when tag closing
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        if(localName.equalsIgnoreCase("Questionpaper")){
            branchCount=0;           
        }else if(localName.equalsIgnoreCase("Branch")){
            yearCount = 0;
            branchCount++;
        }else if(localName.equalsIgnoreCase("Year")){
            semesterCount = 0;
            yearCount++; 
        }else if(localName.equalsIgnoreCase("semester")){
            semesterCount++;
        }else if(localName.equalsIgnoreCase("url")){
            gtudownload.getQuestionpaper().getBranchList().get(branchCount).getYearList().get(yearCount).getSemesterList().get(semesterCount).setUrl(charactersString);
            Log.i("URL", charactersString);
        }
        currentString = "";
        charactersString= "";

    }

    // Called to get tag characters
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        charactersString = new String(ch, start, length);
        charactersString = charactersString.trim();
    }

} 
```

这是我的活动，我如何将此解析数据设置为 textview

```
 public class GtudldActivity extends Activity {
    /** Called when the activity is first created. */
    private TextView xmlOutput;
    TextView example[];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        xmlOutput = (TextView) findViewById(R.id.xmlOutput);

        Gtudownload gtudownload = parseXML();

    }

    private Gtudownload parseXML() {

        Gtudownload gtudownload = null;

        try {

            Log.w("AndroidParseXMLActivity", "Start");
            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance(); 
            SAXParser sp = spf.newSAXParser();       
            XMLReader xr = sp.getXMLReader(); 

            GtuItemXMLHandler myXMLHandler = new GtuItemXMLHandler();
            xr.setContentHandler(myXMLHandler);
            InputSource is = new InputSource(getResources().openRawResource(R.raw.mgtu));

            gtudownload = myXMLHandler.getGtudownload();

            Log.i("Data",gtudownload+"");
            xr.parse(is);

        } catch (Exception e) {
            Log.w("AndroidParseXMLActivity", e);
        }

        //xmlOutput.setText(gtudownload.toString());

        return gtudownload;

    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T09:52:06.480

你会在谷歌上得到很多这样的例子。我给你看其中之一。试试[这个](http://androidmaterial.blogspot.in/2012/04/xml-parsing-with-sax-parser-in-android.html)

我希望它可以帮助你。如果您有任何疑问，请在此处发布

# sql - 日期范围的日期范围之间的任何日期

> ID：10428904
> 
> 赞同：0
> 
> 时间：2012-05-03T09:46:12.750
> 
> 标签：sql, between, date-range

我需要查询来检查用户提供的日期范围是否在现有表的开始日期和结束日期之间。如果用户提供的日期范围中的任何日期在表的开始日期和结束日期之间，它应该从表中重新运行该记录。

例如，用户供应日期范围是从 2012 年 5 月 1 日到 2012 年 5 月 5 日。那么查询必须检查 2005 年 5 月 2 日 2005 年 5 月 3 日 2005 年 5 月 4 日 2005 年 5 月 5 日（所有日期）是否在现有表的开始日期和结束日期之间。

请回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T09:51:36.380

两个区间的重叠测试：

```
( '2012-05-01' <= enddate
AND  startdate <= '2012-05-05'
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T09:51:28.563

```
Select * from table where datecolumn between @date1 and @date2 
```

# java - 取决于同一实体的 Hibernate OneToMany ManyToMany 集是否可以删除孤儿？

> ID：10428908
> 
> 赞同：0
> 
> 时间：2012-05-03T09:46:47.767
> 
> 标签：java, hibernate, many-to-many, one-to-many, orphan

我有两个实体 A、B。A
包含 OneToMany 集，其中包括实体 A 的 ID 和 C 的 ID。
B 包含 ManyToMany 集合，其中包括实体 B 的 ID 和 C 的 ID。

如果 A 被删除，即使 C 被 B 映射，由 A 映射的 C 也应该被删除。

可能吗？

# reporting-services - SSRS 2005 中的数据驱动订阅显示错误但不在日志中

> ID：10428911
> 
> 赞同：1
> 
> 时间：2012-05-03T09:47:02.453
> 
> 标签：reporting-services, logging

我正在为客户解决数据驱动订阅问题。我们试图发送给大约 300 人——当我们发送给 50 人时它工作正常，但是当我们增加到 100 人时，报告管理器中会显示错误。例如：“完成：总共 100 个已处理 100 个；2 个错误。”

问题是，这些错误没有显示在日志文件中，所以我无法解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:59:49.860

对于 SQL Server 2005，日志（默认）位于此目录中：

```
C:\Program Files\Microsoft SQL Server\MSSQL.3\Reporting Services\LogFiles 
```

要选择应该在日志中写入的内容，请点击 MSDN 上的此链接：http: [//msdn.microsoft.com/en-us/library/ms157403 (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms157403(v=sql.90).aspx)

通过邮件发送报告时，请查看此帖子以了解与 SSRS 相关的一些问题：http: [//social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/cdcd6d2f-0136-405c-88ff-898ce0f6ac6e](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/cdcd6d2f-0136-405c-88ff-898ce0f6ac6e)

# ruby - 美国地址 ruby gem

> ID：10428914
> 
> 赞同：0
> 
> 时间：2012-05-03T09:47:13.263
> 
> 标签：ruby, ruby-on-rails-3, gem

我为美国客户做了一个申请，他希望能够通过邮政编码填充城市和州

我们还需要自动完成城市和州的列表。

有没有为此目的的宝石？

# ruby-on-rails-3 - 黄瓜步骤定义失败

> ID：10428923
> 
> 赞同：0
> 
> 时间：2012-05-03T09:47:32.977
> 
> 标签：ruby-on-rails-3, cucumber

我有一个失败的步骤定义。

从下面的功能中，我发现它在“并且该功能有问题”时失败（标题处未定义的局部变量）

```
Feature: Viewing issue
In order to view the issues for a feature
As a user
I want to see them on that feature's page
Background:    
    Given there is a release called "Confluence"
    And that release has a feature:
      | title                | description   |
      | Make it shiny!       | Gradients! Starbursts! Oh my! |
    And that feature has a issue:
      | title                | description   |
      | First Issue          | This is a first issue. |
    And I am on the homepage

  Scenario: Viewing issue for a given feature
    When I follow "Confluence"
    Then I should see "Standards compliance"
    When I follow "Standards compliance"
    Then I should see "First Issue" 
    And I should see "This is a first issue." 
```

我如何为它写一个步骤定义。

这就是我对功能定义所拥有的，它工作得很好，但我尝试对问题对象做同样的事情，但它不起作用

```
Given /^that release has a feature:$/ do |table|
  table.hashes.each do |attributes|
    @release.features.create!(attributes)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:51:16.007

作为最佳实践，您不应在步骤中使用实例变量。这使他们相互依赖。

我会这样写你的步骤（在伪代码中）：

```
Given there is a release called <name>
    # create model

Given release <name> has a feature <table>
    release = Release.find_by_name(<name>)
    # rest of your code here is fine, but reference 'release' instead of '@release'

Given release <name>'s <feature_name> has issues <table>
    release = Release.find_by_name(<name>)
    feature = release.features.find_by_name(<feature_name>)
    table.hashes.each do |attributes|
       # create issue
    end 
```

然后你的 Cucumber 功能会像这样更好地阅读：

```
Given there is a release called "Confluence"
And release "Confluence" has a feature:
  | title                | description   |
  | Make it shiny!       | Gradients! Starbursts! Oh my! |
And release "Confluence"'s "Make it shiny!" feature has issues
  | title                | description   |
  | First Issue          | This is a first issue. | 
```

# python - 如何在 PDF 报告中显示二进制字段图像？

> ID：10428932
> 
> 赞同：1
> 
> 时间：2012-05-03T09:48:33.933
> 
> 标签：python, openerp

如何在 OpenERP 的报表上显示二进制字段图像？我只是使用 .sxw 将其转换为 .rml。我想在 pdf 报告中显示该图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T14:35:10.880

编辑你的 rml 文件。我使用“image_field”作为二进制字段。

```
<image>[[ obj.image_field or removeParentNode('image') ]]</image> 
```

你也可以指定位置

```
<image x="21.3cm" y="47.6cm" height="40.0" >[[ obj.image_field or removeParentNode('image') ]]</image> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T05:51:26.930

用于打印保存在数据库中的图像作为`binary`qweb 报告的字段，

```
<img t-att-src="'data:image/png;base64,%s' % o.your_image_field"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T20:15:12.253

您可以使用以下 .sxw 表达式：

```
[[ obj.image_field and setTag('para','image',{'width':'80.0','height':'80.0'}) ]] [[ obj.image_field ]] 
```

这被引擎翻译成：

```
<para rml_tag="obj.image_field and setTag('para','image',{'width':'80.0','height':'80.0'})">[[ '' ]] [[ obj.image_field ]]</para> 
```

# android - 将图片从图库上传到远程服务器（Titanium-android）

> ID：10428934
> 
> 赞同：1
> 
> 时间：2012-05-03T09:48:40.583
> 
> 标签：android, titanium, image-uploading, http-request, blobs

我正在使用钛开发 android 应用程序，在我的应用程序中，我需要将图像从画廊上传到远程服务器位置。我已经尝试过了

```
button1.addEventListener('click',function(e)
{   
  Titanium.Media.openPhotoGallery({
  success : function(event) 
  {
     var update_pic = Titanium.Network.createHTTPClient();
     update_pic.onerror = function()
    {
     Titanium.API.info('error');
     alert(JSON.parse(this.responseText).error);
    }
    update_pic.onload = function() 
    {
     actInd.hide();
    }
   update_pic.open('POST','server-address/profile/update.json');
   update_pic.send(
        { 
          "user[avatar]":event.media,
          "authenticity_token":"sD5hjlI=",
          "user[name]":'nilesh', 
          "commit":"Update Profile" 
        });
   }
   })   

}) 
```

但它不适合我。进程在点**user[avatar]:event.media,**处停止。这是将图像发送到远程服务器的正确方法吗？我也试过这个

```
update_pic.send({
    user_avatar         : event.media,
    authenticity_token  : "sD5hjlI=",
    user_name           : 'nilesh',
    commit              : "Update Profile"
}) 
```

当我发送这样的参数时，它不会发送我的 http 请求，当我删除**user_avatar 时：event.media**它发送我的请求意味着 user_avatar 有问题。任何解决方案......需要帮助。谢谢..........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:19:56.623

尝试在“var update_pic = ...”下面添加这一行

update_.setRequestHeader("ContentType", "image/jpeg");

取自：http: [//developer.appcelerator.com/question/9481/how-to-upload-images-with-filename-to-the-server](http://developer.appcelerator.com/question/9481/how-to-upload-images-with-filename-to-the-server)

# java-me - TextField.setConstraints 空指针异常

> ID：10428940
> 
> 赞同：2
> 
> 时间：2012-05-03T09:49:25.507
> 
> 标签：java-me, textfield, midp, lcdui

我有一个表单中的 TextField：

```
private TextField cc1F = new TextField("", "", 250, TextField.ANY); 
```

单击 OK 按钮后，将 cc1F 字段的约束设置为：

```
cc1F.setConstraints(TextField.UNEDITABLE); 
```

然后我得到一个例外：

```
java.lang.NullPointerException
at com.sun.midp.lcdui.DefaultInputMethodHandler.setConstraints(+63)
at javax.microedition.lcdui.TextField$InputMethodClientImpl.setConstraints(+20)
at javax.microedition.lcdui.TextField.setConstraints(+37)
at com.zousys.j2me.zmail.gui.view.HeaderView.menuAction(+146) 
```

.....................................

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:29:59.870

代码示例使用模拟器 WTK 3.0 和设备 Samsung Chat [http://www.gsmarena.com/samsung_ch@t_527-4096.php](http://www.gsmarena.com/samsung_ch@t_527-4096.php)测试，测试通过。:)

我认为问题是由设备型号或对象**cc1F**为空引起的。

```
import java.io.UnsupportedEncodingException;

import javax.microedition.lcdui.Command;
import javax.microedition.lcdui.CommandListener;
import javax.microedition.lcdui.Display;
import javax.microedition.lcdui.Displayable;
import javax.microedition.lcdui.Form;
import javax.microedition.lcdui.TextBox;
import javax.microedition.lcdui.TextField;
import javax.microedition.midlet.MIDlet;
import javax.microedition.midlet.MIDletStateChangeException;

public class TextFieldMIDlet extends MIDlet implements CommandListener {

    private Form form;
    private Command cmdExit;
    private Command cmdSetConstraints;
    private Display display;
    private TextField textField;

    public TextFieldMIDlet() {
        form = new Form("Testing constraints");

        cmdExit = new Command("Exit",Command.EXIT, 1);
        cmdSetConstraints = new Command("Set Constraints",Command.ITEM, 1);
        textField = new TextField("", "", 250, TextField.ANY);

        form.addCommand(cmdExit);
        form.addCommand(cmdSetConstraints);
        form.append(textField);

        display = Display.getDisplay(this);
        form.setCommandListener(this);
    }

    protected void destroyApp(boolean arg0) throws MIDletStateChangeException {
        // TODO Auto-generated method stub

    }

    protected void pauseApp() {
        // TODO Auto-generated method stub

    }

    protected void startApp() throws MIDletStateChangeException {

        display.setCurrent(form);

    }

    public void commandAction(Command c, Displayable d) {

        if (c == cmdExit) {

            this.notifyDestroyed();

        } else if (c == cmdSetConstraints) {

            try {
                System.out.println("Set...");

                if (textField.getConstraints() == TextField.UNEDITABLE) {
                    textField.setConstraints(TextField.ANY );
                } else {
                    textField.setConstraints(TextField.UNEDITABLE );
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        }

    }

} 
```

# windows-phone-7 - 获取完整的图像以在滚动视图中查看

> ID：10428941
> 
> 赞同：0
> 
> 时间：2012-05-03T09:49:26.133
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1

嗨，这是我之前提出的问题的扩展

[滚动查看器中的堆栈面板项目在滚动到显示左侧时停止在显示](https://stackoverflow.com/questions/10413068/stop-the-stackpanel-items-inside-scroll-viewer-)左侧

我可以获得水平偏移值，但我需要比较两个图像偏移量，如果滚动在中间停止，我需要移动图像以获得完整视图，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:08:19.570

你无法停止滚动。通过缺点，您可以显示图像并检测事件 Flick（[手势 WP7](http://adamkinney.com/blog/2010/09/23/windows-phone-7-gestures-cheat-sheet/)）以更改显示的图像并使用动画（使用混合）。

# box2d - 在身体之间平稳移动

> ID：10428943
> 
> 赞同：1
> 
> 时间：2012-05-03T09:49:33.277
> 
> 标签：box2d, game-physics, physics-engine

我不确定标题是否正确（如果不正确，请发表评论）。我有一个精灵（矩形体），我正在对其施加力以使其从左向右移动，然后向后移动。该平台由几个大小相同的矩形块组成，排列成一排，它们之间没有距离。它们形成的是一条完美的直线。平台可以是平的或倾斜的。

**我想要的是**

精灵在平台上顺畅地前后移动。

**实际发生了什么**

精灵有时会在从一个块移动到另一个块时被阻塞，即使块之间根本没有空间。有时也会在那时记录碰撞。

我试图搜索并找到一个叫做“内角”的东西，但不知道如何解决这个问题。有办法绕过吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:17:00.777

要正确解决此问题，您需要使用链形或边缘设置正确的“幻影顶点”来制作地面。查看 Box2D 手册以获取有关什么是幻影顶点的详细信息。链形状基本上是一堆边缘形状，但它会为您设置它们的幽灵顶点。

根据您处于项目的哪个阶段，切换到使用边缘/链可能会很麻烦。下一个最好的计划是从卡住的形状的角上剪下一块，以帮助它们更容易地相互移动。最后的选择是使用圆形而不是矩形。

也可以看看：

[http://code.google.com/p/box2d/wiki/FAQ](http://code.google.com/p/box2d/wiki/FAQ)

[http://box2d.org/forum/viewtopic.php?f=3&t=3048](http://box2d.org/forum/viewtopic.php?f=3&t=3048)

[http://www.cocos2d-iphone.org/forum/topic/31787](http://www.cocos2d-iphone.org/forum/topic/31787)

[http://www.cocos2d-iphone.org/forum/topic/29462](http://www.cocos2d-iphone.org/forum/topic/29462)

[http://www.box2d.org/forum/viewtopic.php?f=3&t=8409](http://www.box2d.org/forum/viewtopic.php?f=3&t=8409)

[http://www.box2d.org/forum/viewtopic.php?f=3&t=7935](http://www.box2d.org/forum/viewtopic.php?f=3&t=7935)

[http://www.box2d.org/forum/viewtopic.php?f=8&t=7917](http://www.box2d.org/forum/viewtopic.php?f=8&t=7917)

[http://www.box2d.org/forum/viewtopic.php?f=3&t=7805](http://www.box2d.org/forum/viewtopic.php?f=3&t=7805)

[http://www.cocos2d-iphone.org/forum/topic/22084](http://www.cocos2d-iphone.org/forum/topic/22084)

[http://www.google.com](http://www.google.com) :)

# mysql - 在 symfony+Doctrine 中使用一种形式更新多表

> ID：10428947
> 
> 赞同：0
> 
> 时间：2012-05-03T09:49:48.753
> 
> 标签：mysql, forms, doctrine, symfony-1.4

嗨，我正在 symfony 中建立一个注册系统。它具有三种模型——用户、求职者和雇主。求职者和雇主继承用户。求职者注册过程有 4 个步骤，在第一步中，用户必须输入他们的登录详细信息，它将被添加到用户表中。在接下来的步骤中，用户必须输入他的个人详细信息，它将被添加到求职者表中。

我想用一种形式更新用户表和求职者表，我该怎么做？（例如地址和tp号在user表中，但会在第二步更新）

* * *

**谢谢你的回复**

这是工作

我所做的是

**在我的道课上**

```
 public function updateStep($step,$address, $phone, $id)
    {

        Doctrine_Query::create()
          ->update('User u')
          ->set('u.step', '?', $step)
          ->set('u.address', '?', $address)
          ->set('u.telephone', '?', $phone)
          ->where('u.user_id = ?', $id)
          ->execute();
    } 
```

**在表单类中**

```
public function updateStep()
    {       
            $step = $this->getValue('step');
            $phone = $this->getValue('phone');
            $address = $this ->getValue('address');
            $id = $this->getValue('user_id');

            $updateStep = $this->getUserManagementService()->updateStep($step, $address, $phone, $id);
            return $updateStep;
        } 
```

最后在注册动作中

```
$this->form->updateStep(); 
```

它正在工作，但我是以正确的方式做的还是有更简单的方法存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:52:45.417

简单地说......您可以在第一步从用户创建新对象并从jobseeker创建新对象，然后将此对象放入会话中，然后在第二步中从会话中检索此对象并使用数据更新它

并在最后一步保存这两个对象。

# python - vim中的绳索自动完成（RopeCodeAssist）不能自动插入结果吗？

> ID：10428952
> 
> 赞同：6
> 
> 时间：2012-05-03T09:50:21.107
> 
> 标签：python, vim, autocomplete, rope

我在 vim 中使用 Rope 进行 python 自动完成。然而，让我烦恼的一件事是它会自动插入它的建议，使我无法通过继续输入来缩小选择范围。这意味着如果我在列表底部看到我想要的完成，我必须使用向下箭头键在整个列表中移动以选择它。

我的首选用法是查看建议的完成列表并能够继续输入，这会自动从列表中删除不以我输入的字符开头的项目。一个额外的好处是能够使用 Tab 键向下移动列表。

简而言之，我希望在`completeopt=longest,menu,menuone`设置选项时完成选择过程就像vim的omnicompletion。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:07:04.060

[python-mode](https://github.com/klen/python-mode)将 Vim 设置`omnifunc`为使用 Rope 完成，这应该可以满足您的要求。

否则，您可以查看[这个rope-omni 插件](https://github.com/rygwdn/rope-omni)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T10:29:25.457

`rope-omni`插件已`ropevim`在[此提交](https://github.com/python-rope/ropevim/commit/255dac5dc4ec04375279a0c6c85c4f879502bbc6)中合并到标准中。是的，[https://github.com/python-rope/](https://github.com/python-rope/)现在是所有绳索项目的官方主页。

# full-text-search - 带同义词的离线全文搜索

> ID：10428955
> 
> 赞同：1
> 
> 时间：2012-05-03T09:50:28.830
> 
> 标签：full-text-search, offline, synonym

我想为我的网站提供全文搜索的离线版本。大多数网站只是纯 HTML + JavaScript。但是我需要使用非英语同义词进行全文搜索。

首先，我在考虑[Wapache](http://www.virtualvinodh.com/technology/110-wapache-for-desktop-php-applications)，因为网站使用 PHP，但它没有 mysql（我几乎不能强迫用户安装和配置 mysql），没有 pspell 支持，它使用旧的 PHP 5.0.3（witch不是最糟糕的），并且可能无法在旧的 IE 版本上运行（该站点将有很多 JavaScript ......）。

我发现的另一个解决方案是 Lucene。但是好像不支持。它的文档[我可以使用 Lucene 来索引中文、日文、韩文和其他多字节字符集的文本吗？](http://wiki.apache.org/lucene-java/LuceneFAQ#Can_I_use_Lucene_to_index_text_in_Chinese.2C_Japanese.2C_Korean.2C_and_other_multi-byte_character_sets.3F)指的是一个不存在的页面“Lucene Sandbox”。我还发现它不支持同义词。

我还找到了对[WorldNet](http://opensource.ebswift.com/WordNet.Net/)的引用，女巫可以添加对 Lucene 同义词的支持，但仅限于英语。

所以，问题是，我如何制作一个具有非英语同义词感知全文的离线 Web 应用程序，并且如果可能的话，不需要在用户的计算机上安装任何东西（当然 java 运行时不是问题，但是安装和配置mysql + php 是）。

# sql - 用于限制日常任务的 SQL 约束

> ID：10428956
> 
> 赞同：1
> 
> 时间：2012-05-03T09:50:29.517
> 
> 标签：sql, date, constraints

我正在自学 SQL，但我被卡住了。我有一个 Car-garage 数据库，其中包含一个名为 Tasks 的表。表 Tasks 有 3 列：Tasknumber(PK)、NumberPlate 和 DaySchedule。在 DDL 中，我想使用一个约束来检查车牌的数量，并且每天只允许一个任务。

以下是我尝试过的。但是，它限制的是每条记录而不是板数。

```
CREATE TABLE Tasks (
   Tasknumber    NUMERIC(5)   not null,
   NumberPlate   VARCHAR(8)   not null,
   DaySchedule   DATE         not null,
   Description   VARCHAR(255) null,
   CONSTRAINT PK_Tasknumber PRIMARY KEY  (Tasknumber),
     D AS DAY(DaySchedule) PERSISTED,
     M AS MONTH(DaySchedule) PERSISTED,
     Y AS YEAR(DaySchedule) PERSISTED,
  CONSTRAINT UQ_DATA_DMY UNIQUE(D,M,Y)
) 
```

我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:07:54.123

如果我理解正确，您只需要`UNIQUE`对`(NumberPlate, DaySchedule)`. 然后，对于每个`NumberPlate`，每天最多有一个任务。

# joomla1.5 - joomla 1.5 中的错误缓存？

> ID：10428957
> 
> 赞同：1
> 
> 时间：2012-05-03T09:50:29.897
> 
> 标签：joomla1.5

在 joomla 1.5 中，我在全局配置中打开插件和配置中的缓存，然后运行网站

但是当我关闭连接到数据库时出现错误无法使用缓存已创建

并警告错误`Database Error: Unable to connect to the database:Could not connect to database`

=> 如何在 joomla 中使用缓存而不在 15 分钟内使用连接数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:55:43.950

我认为 joomla 1.5 应该在使用缓存时连接数据库

# actionscript-3 - 我可以通过 AS3 编辑外部 XML 文件吗？

> ID：10428958
> 
> 赞同：0
> 
> 时间：2012-05-03T09:50:30.687
> 
> 标签：actionscript-3

我只想通过 AS3 编辑外部 XML 文件。请任何人帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T01:22:40.487

如果您使用的是 Flash Player 并且 XML 在服务器上，那么答案是否定的。这将缺乏安全性，因为客户端可以直接编辑驻留在服务器上的内容。

可以加载 XML，更改其中的值，然后将其发送回 PHP 文件，该文件再次将其转储到文件中，但存在上述风险。

# iphone - RestKit 集成问题“没有这样的文件或目录”

> ID：10428961
> 
> 赞同：0
> 
> 时间：2012-05-03T09:50:48.720
> 
> 标签：iphone, ios, ipad, xcode4, restkit

我正在使用 xcode 4.3.1，我将在我的项目中实现 RESTKit，在[此步骤之后集成 RestKit。](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

当将 RestKit 项目拖放到我的项目中时，它就完成了，但是当添加带有库的链接二进制文件时，它是红色的，然后在重新启动 xcode 之后也会出现同样的问题

![在此处输入图像描述](../Images/fc498c5112c8ec44c6226492f9d89fd7.png)

然后在我构建项目并显示以下错误而不运行项目之后，

![在此处输入图像描述](../Images/16e3fca5e06c0f85aea4dc9141844c3e.png)

和下面给出的我的项目的文件结构 ![在此处输入图像描述](../Images/8bb287ecb72d93d71a2191a8e2085389.png)

所以任何机构都可以帮助解决我的错误，

提前感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:59:57.287

这是因为有时您添加一个文件，然后将其删除。它会从您的项目中删除文件，但引用仍然存在，或者可能是文件已被删除但引用仍然存在 - 转到项目导航器 > 右键单击​​ > 将文件添加到... > 并添加之前的文件红色的。

# macos - 如何在 MacOS 下使用 QFileDialog::getSaveFileName(...)

> ID：10428963
> 
> 赞同：0
> 
> 时间：2012-05-03T09:50:56.340
> 
> 标签：macos, qt, qdialog

我目前正在测试为 MacOS X.6 下的 windows 编写的软件。大多数东西已经工作了，但目前我坚持一件事：Mac下的本机SaveFileName对话框。

```
QString fileName = m_sSaveAsDir + "untitled." + m_sFileExtension;
qDebug() << "File Extension:" << m_sFileExtension; //"jpg"
qDebug() << "SaveDir:" << m_sSaveAsDir; //""
qDebug() << "Filename:" << fileName; //Filename: "untitled.jpg"
fileName = QFileDialog::getSaveFileName( 0, tr( "Save As" ), 
           fileName, tr("Images (*.dng *.tif *.jpg)"), 0, 0 );
qDebug() << "Filename:" << fileName; //Filename: "//...../Pictures/untitled.dng" 
```

所以很明显以前的扩展名 jpg 在 MacOs 下被忽略了，因此不显示也不保存。这对我来说很好。此外，Qt 手册说在 MacOS 下过滤器被忽略。如果我在 SaveDialog 中查看浏览器中的文件夹，这是正确的（文件未过滤）。但是好像只要filedialog中没有输入扩展名，就将filter中的第一个扩展名作为扩展名，非常烦人。我怎样才能解决这个问题？我尝试通过将 getSaveFileName() 方法中的最后一个参数更改为“DontUseNativeDialog”来使用 NonNativeSaveDialog，这非常有效，但看起来不太好。有什么建议么？

问候唐尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:06:01.517

您可以使用非静态 QFileDialog 方法自己构建对话框。为此，请遵循[QFileDialog 文档](http://qt-project.org/doc/qt-4.8/qfiledialog.html)，然后查看[QFileDialog::setDefaultSuffix()](http://qt-project.org/doc/qt-4.8/qfiledialog.html#defaultSuffix-prop)，您可以将其设置为空字符串，如下所示：

```
dialog.setDefaultSuffix(QString()); 
```

然后不会自动将任何内容附加到文件的末尾。我没有方便的 Mac 来测试这个，但它应该可以工作。

# javascript - Mozilla Firefox 没有获得价值 innerText

> ID：10428965
> 
> 赞同：0
> 
> 时间：2012-05-03T09:51:03.153
> 
> 标签：javascript, asp.net, firefox, cross-browser

这是我的 JavaScript 代码：

```
function selectRow(objTR) {
    for (i = 0; i < ddlModalityList.options.length; i++) {
        if (ddlModalityList.options[i].text == objTR.cells[1].innerText.trim()) break;
    }

    ddlModalityList.options[i].selected = true;
    txtSSAETitle.value = objTR.cells[2].innerText.trim();
    txtSSName.value = objTR.cells[3].innerText.trim();
} 
```

这是中继器代码。在行单击时，我正在传递 tr 的 id 并在相应的下拉列表和文本框中显示相应的 td 值。此代码在 IE 中运行良好，但在 Mozilla Firefox 中失败。

```
<tr onclick="selectRow(this);">   
    <td class="csstablelisttd" style="display: none;" >
        <%#Eval("Acq_Modality_ID")%>
    </td>                     
    <td class="csstablelisttd" >                            
        <asp:Label ID="lblModality" runat="server" Text='<%#Eval("Modality")%>'></asp:Label>
    </td>

    <td class="csstablelisttd">
        <asp:Label ID="lblSchdledStAETitle" runat="server" Text='<%#Eval("Scheduled_Station_AE_Title")%>'></asp:Label>
    </td>
    <td class="csstablelisttd">
        <asp:Label ID="lblSchdleStationAEName" runat="server" Text='<%#Eval("SCHEDULED_STATION_NAME")%>'></asp:Label>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T09:53:25.960

火狐不支持`innerText`。你可以`textContent`改用。但是，较旧的 IE 不支持`textContent`，因此您需要使用一个并回退到另一个。

```
function getInnerText(el) {
    return el.textContent || el.innerText;
} 
```

请注意，它们[并不相同](https://stackoverflow.com/a/1359822/96100)，但出于您的目的，它会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T05:00:15.077

使用**innerHTML**而不是innerText。InnerText 在 FF 中不起作用。innerHTML 对它们都有效。

[http://forums.asp.net/p/1228392/2210082.aspx](http://forums.asp.net/p/1228392/2210082.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T09:55:49.077

Firefox 不支持 innerText ..`you should use jquery`所以你不需要关心浏览器实现的差异
所以使用 jquery 你的代码将是

```
function selectRow(objTR) {
    for (i = 0; i < ddlModalityList.options.length; i++) {
        if (ddlModalityList.options[i].text == $(objTR).children('td').eq(1).html().trim()) break;
    }

    ddlModalityList.options[i].selected = true;
    txtSSAETitle.value = $(objTR).children('td label').eq(2).html().trim();
    txtSSName.value = $(objTR).children('td label').eq(3).html().trim();
} 
```

我离开`ddlModalityList`它是因为我不知道它是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T03:42:13.360

document.getElementById('InputText').innerHTML.replace(/<.+?>/gim,''));

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T11:45:06.193

```
function selectRow(objTR) {
    for (i = 0; i < ddlModalityList.options.length; i++) {
        if (ddlModalityList.options[i].text == $(objTR).children('td').eq(1).html().trim()) break;
    }

    ddlModalityList.options[i].selected = true;
    txtSSAETitle.value = $(objTR).children('td label').eq(2).html().trim();
    txtSSName.value = $(objTR).children('td label').eq(3).html().trim();
} 
```

# vb.net - 带有表单标记的 VB.NET MessageBox

> ID：10428967
> 
> 赞同：0
> 
> 时间：2012-05-03T09:51:03.963
> 
> 标签：vb.net, markup, messagebox

我想在具有特殊文本标记的 VB.NET 应用程序中显示 MessageBox。更具体地说，我想显示一个无序列表。我尝试通过将文本包装在 HTML 标记中（例如，如果我没记错的话，Java Swing 支持）并使用`<ul>`and来实现`<li>`。这没有用。我在网上也找不到任何关于它的...

文本框用于普通的 Windows 窗体应用程序。

有谁知道如何在不创建完全自定义的消息框类的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:37:29.777

正如[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)`MessageBox`所说，使用VB.NET 中的默认设置是不可能的。

# c++ - 在 Segfault 上拦截处理器状态

> ID：10428970
> 
> 赞同：0
> 
> 时间：2012-05-03T09:51:19.923
> 
> 标签：c++, debugging, x86, segmentation-fault, jit

我正在开发一个分析 PowerPC 代码并为其生成 LLVM 代码的程序。由于我对分支点/子程序地址的分析，代码可能不完整（例如，如果代码对函数指针做了一些非常奇怪的事情），我计划设置一个后备机制，如下所示：

1.  生成的子程序尝试从原始程序分支到地址，这将是一个未映射/不可执行的页面（取决于主机架构能力）。
2.  导致分段错误。
3.  分段错误处理程序识别发生了什么，保存地址以供下次程序启动时进行全面分析，然后执行快速而肮脏的分析，并使用 LLVM 的 JIT 能力为新的分支目标生成可执行代码。
4.  恢复分支时的处理器状态，但指向新生成的代码除外。

问题是我无法弄清楚如何在分段错误时获取处理器状态。我相当肯定有一种方法，因为 GDB 一直在这样做。

虽然代码是跨平台的，但我现在专注于在 x86 OSX/Posix 上实现它。

# iphone - 按钮上的 SIGABRT 错误单击 xcode

> ID：10428973
> 
> 赞同：0
> 
> 时间：2012-05-03T09:51:27.287
> 
> 标签：iphone, xcode, button, click, sigabrt

我在 xcode 中遇到了一个奇怪的问题。我在 xib 中创建了一个按钮并连接到一个函数。我正在函数内打印消息。就是这样，当我单击按钮时，出现以下错误。我尝试从我的模拟器中清理并删除应用程序。

`-(IBAction)languageSelection:(id)sender`是我的函数名

```
-[NSCFString languageSelection:]: unrecognized selector sent to instance 0x713cd40
2012-05-03 15:14:35.055 Example[33420:207] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSCFString languageSelection:]: unrecognized selector sent to instance 0x713cd40'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x02966919 __exceptionPreprocess + 185
    1   libobjc.A.dylib                     0x02ab45de objc_exception_throw + 47
    2   CoreFoundation                      0x0296842b -[NSObject(NSObject) doesNotRecognizeSelector:] + 187
    3   CoreFoundation                      0x028d8116 ___forwarding___ + 966
    4   CoreFoundation                      0x028d7cd2 _CF_forwarding_prep_0 + 50
    5   UIKit                               0x005ece14 -[UIApplication sendAction:to:from:forEvent:] + 119
    6   UIKit                               0x006766c8 -[UIControl sendAction:to:forEvent:] + 67
    7   UIKit                               0x00678b4a -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
    8   UIKit                               0x006776f7 -[UIControl touchesEnded:withEvent:] + 458
    9   UIKit                               0x006102ff -[UIWindow _sendTouchesForEvent:] + 567
    10  UIKit                               0x005f21ec -[UIApplication sendEvent:] + 447
    11  UIKit                               0x005f6ac4 _UIApplicationHandleEvent + 7495
    12  GraphicsServices                    0x02dedafa PurpleEventCallback + 1578
    13  CoreFoundation                      0x02947dc4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
    14  CoreFoundation                      0x028a8737 __CFRunLoopDoSource1 + 215
    15  CoreFoundation                      0x028a59c3 __CFRunLoopRun + 979
    16  CoreFoundation                      0x028a5280 CFRunLoopRunSpecific + 208
    17  CoreFoundation                      0x028a51a1 CFRunLoopRunInMode + 97
    18  GraphicsServices                    0x02dec2c8 GSEventRunModal + 217
    19  GraphicsServices                    0x02dec38d GSEventRun + 115
    20  UIKit                               0x005fab58 UIApplicationMain + 1160
    21  Example                             0x000023c9 main + 121
    22  Example                             0x00002345 start + 53
)
terminate called after throwing an instance of 'NSException' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:56:43.950

这可能是您尝试使用实际上是字符串的对象调用方法 languageSelection ，但是您已传递给另一个具有 languageSelection 方法的对象。

这是因为您认为该对象是您想要的，但指针将分配的内存传递给字符串，因此它将作为字符串工作。当您尝试调用方法时，它会崩溃，因为它没有在字符串中找到该方法。在您在任何地方使用它之前检查您的对象类型

# jakarta-ee - jdk1.7/jre/lib/rt.jar的访问限制

> ID：10428984
> 
> 赞同：18
> 
> 时间：2012-05-03T09:51:54.010
> 
> 标签：jakarta-ee, java, java-7

大家好，我在创建 JAXB 解析器时遇到了一个非常奇怪的问题。当我尝试从 Eclipse 生成 JAXB 类时，在一个类中它显示了一个非常奇怪的错误，即

```
Access restriction: The type QName is not accessible due to restriction on required library /usr/lib/jvm/jdk1.7.0_02/jre/lib/rt.jar 
```

这是我的课

```
package generated;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
//import javax.xml.namespace.QName;
import javax.xml.namespace.*;

@XmlRegistry
public class ObjectFactory { 
```

在这条线上，我收到了错误消息

私有最终静态 QName _ExpenseReport_QNAME = new QName("", "expenseReport");

```
 /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: generated
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link ExpenseT }
     * 
     */
    public ExpenseT createExpenseT() {
        return new ExpenseT();
    }

    /**
     * Create an instance of {@link UserT }
     * 
     */
    public UserT createUserT() {
        return new UserT();
    }

    /**
     * Create an instance of {@link ItemT }
     * 
     */
    public ItemT createItemT() {
        return new ItemT();
    }

    /**
     * Create an instance of {@link ItemListT }
     * 
     */
    public ItemListT createItemListT() {
        return new ItemListT();
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link ExpenseT }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "", name = "expenseReport")
    public JAXBElement<ExpenseT> createExpenseReport(ExpenseT value) {
        return new JAXBElement<ExpenseT>(_ExpenseReport_QNAME, ExpenseT.class, null, value);
    }

} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-03T09:54:45.677

当您引用的类路径`JRE`而不是`JDK`打开项目的路径时，会发生此问题，做一件事去

> 构建路径 > 库

删除包含的运行时并添加`jdk`运行时，它现在应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-19T16:42:05.553

我收到下一个错误：访问限制：

由于所需库 C:\Program Files (x86)\Java\jre7\lib\rt.jar 的限制，无法访问类型 XmlRegistry

这是我解决相同问题的方法：

```
1.Go to the Build Path settings in the project properties. (Right click on your application, then in the popout window you will see 'Build Path', slide right and click on 'Configure Build Path...')
2.Remove the JRE System Library
3.Add it back; Select "Add Library" and select the JRE System Library. 
```

默认值对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-08T04:21:46.093

只需删除并重新添加相同的 JRE 系统库。

注意：确保在删除和重新添加时单击“确定”并关闭对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T09:11:07.160

这种情况可以解决如下：

1 - 转到项目属性对话框的 Java 编译器部分，然后转到错误和警告。2 - 选中启用项目特定设置。3 - 在已弃用和受限 API 内部，将禁止引用（访问规则）更改为警告或忽略。

4 - 请不要在你的祈祷中忘记我

# installation - InstallShield Limited Edition 是否支持 64 位安装程序？

> ID：10428985
> 
> 赞同：1
> 
> 时间：2012-05-03T09:51:58.113
> 
> 标签：installation, 64-bit, installshield-le

我刚开始学习 InstallShield LE，因为它似乎是唯一“官方”支持的安装程序项目。但是我有一个简单的问题，我什至无法得到绝对的答案：ISLE 是否支持构建 64 位安装程序？我之所以问，是因为我发现至少有两篇帖子说这是不可能的，比如这个： [Replacing VS Setup projects with Installshield Limited Edition Problems](http://connect.microsoft.com/VisualStudio/feedback/details/643878/replacing-vs-setup-projects-with-installshield-limited-edition-problematic)。但是，我无法从 flexera 的网站获得（负面或正面）确认。他们甚至似乎没有 LE 版本的论坛。有经验的人可以确认一下吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T10:44:10.427

InstallShield Limited Edition 目前不支持创建 64 位安装。这在有关升级到其他版本的 InstallShield 的主题中的已安装文档中进行了介绍。在线文档“Visual Studio 2010 的 InstallShield Limited Edition 是否满足您的所有安装要求？”中也暗示了这一点。其中提到“支持 64 位 COM 提取”不包含在限量版中（这只是 64 位安装的众多方面之一）。

# sql-server - 了解 T-SQL 中的 PIVOT 函数

> ID：10428993
> 
> 赞同：90
> 
> 时间：2012-05-03T09:52:24.977
> 
> 标签：sql-server, sql-server-2008, tsql, pivot

我对 SQL 很陌生。

我有一张这样的桌子：

```
ID | TeamID | UserID | ElementID | PhaseID | Effort
-----------------------------------------------------
1  |   1    |  1      |   3       |  5     |   6.74
2  |   1    |  1      |   3       |  6     |   8.25
3  |   1    |  1      |   4       |  1     |   2.23
4  |   1    |  1      |   4       |  5     |   6.8
5  |   1    |  1      |   4       |  6     |   1.5 
```

我被告知要获取这样的数据

```
ElementID | PhaseID1 | PhaseID5 | PhaseID6
--------------------------------------------
    3     |   NULL   |   6.74   |   8.25
    4     |   2.23   |   6.8    |   1.5 
```

我知道我需要使用 PIVOT 功能。但是不能清楚的理解。如果有人可以在上述情况下解释它，那将是很大的帮助。（或任何替代方案，如果有的话）

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-05-03T10:19:51.967

A[`PIVOT`](https://msdn.microsoft.com/en-us/library/ms177410.aspx)用于将数据从一列旋转到多列。

对于您的示例，这里是一个 STATIC Pivot，这意味着您对要旋转的列进行硬编码：

```
create table temp
(
  id int,
  teamid int,
  userid int,
  elementid int,
  phaseid int,
  effort decimal(10, 5)
)

insert into temp values (1,1,1,3,5,6.74)
insert into temp values (2,1,1,3,6,8.25)
insert into temp values (3,1,1,4,1,2.23)
insert into temp values (4,1,1,4,5,6.8)
insert into temp values (5,1,1,4,6,1.5)

select elementid
  , [1] as phaseid1
  , [5] as phaseid5
  , [6] as phaseid6
from
(
  select elementid, phaseid, effort
  from temp
) x
pivot
(
  max(effort)
  for phaseid in([1], [5], [6])
)p 
```

这是一个带有工作版本的[SQL 演示。](https://data.stackexchange.com/stackoverflow/query/521090)

这也可以通过动态 PIVOT 来完成，您可以在其中动态创建列列表并执行 PIVOT。

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.phaseid) 
            FROM temp c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT elementid, ' + @cols + ' from 
            (
                select elementid, phaseid, effort
                from temp
           ) x
            pivot 
            (
                 max(effort)
                for phaseid in (' + @cols + ')
            ) p '

execute(@query) 
```

两者的结果：

```
ELEMENTID   PHASEID1    PHASEID5    PHASEID6
3           Null        6.74        8.25
4           2.23        6.8         1.5 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T09:57:33.477

这些是非常基本的支点示例，请仔细阅读。

[SQL SERVER – PIVOT 和 UNPIVOT 表示例](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

产品表的上述链接示例：

```
SELECT PRODUCT, FRED, KATE
FROM (
SELECT CUST, PRODUCT, QTY
FROM Product) up
 PIVOT (SUM(QTY) FOR CUST IN (FRED, KATE)) AS pvt
ORDER BY PRODUCT 
```

呈现：

```
 PRODUCT FRED  KATE
 --------------------
 BEER     24    12
 MILK      3     1
 SODA   NULL     6
 VEG    NULL     5 
```

类似的示例可以在博客文章[SQL Server 中的数据透视表中找到。一个简单的示例](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-01-09T00:30:06.563

我在这里添加一些没有人提到的东西。

`pivot`当源具有 3 列时，该函数非常有效：一列用于`aggregate`，一列作为带有 的列展开，一列`for`作为`row`分布的枢轴。在产品示例中，它是`QTY, CUST, PRODUCT`.

但是，如果源中有更多列，它将根据每个附加列的唯一值将结果分成多行而不是每个数据透视表一行（就像`Group By`在简单查询中所做的那样）。

看这个例子，我在源表中添加了一个时间戳列：

[![在此处输入图像描述](../Images/9d942e60906930bc56780f5895c3c514.png)](https://i.stack.imgur.com/7IF4F.png)

现在看看它的影响：

```
SELECT CUST, MILK

FROM Product
-- FROM (SELECT CUST, Product, QTY FROM PRODUCT) p
PIVOT (
    SUM(QTY) FOR PRODUCT IN (MILK)
) AS pvt

ORDER BY CUST 
```

[![在此处输入图像描述](../Images/55644d3b00b387f381f0107c14d91545.png)](https://i.stack.imgur.com/uHT6K.png)

* * *

为了解决这个问题，您可以像上面每个人所做的那样将子查询作为源提取 - 只有 3 列（这并不总是适用于您的场景，想象一下您是否需要`where`为时间戳设置条件）。

第二种解决方案是使用 a`group by`并再次对透视列值进行求和。

```
SELECT 
CUST, 
sum(MILK) t_MILK

FROM Product
PIVOT (
    SUM(QTY) FOR PRODUCT IN (MILK)
) AS pvt

GROUP BY CUST
ORDER BY CUST

GO 
```

[![在此处输入图像描述](../Images/5c34332054437a86a0e184c32de47ab1.png)](https://i.stack.imgur.com/FhBYQ.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-10T09:42:58.697

枢轴用于将数据集中的列之一从行转换为列（这通常称为*扩展列*）。在您给出的示例中，这意味着将`PhaseID`行转换为一组列，其中每个不同的值都有一个列，`PhaseID`在这种情况下可以包含 1、5 和 6。

这些透视值通过您给出的示例中的列进行*分组。*`ElementID`

通常，您还需要提供某种形式的*聚合，为您提供**扩展值*( `PhaseID`) 和*分组值*( )的交集所引用的值`ElementID`。虽然在给出的示例中将使用的*聚合*不清楚，但涉及到`Effort`列。

完成此旋转后，将使用*分组*列和*展开列*来查找*聚合值*。或者在你的情况下，`ElementID`并`PhaseIDX`查找`Effort`。

使用*分组、传播、聚合*术语，您通常会看到枢轴的示例语法为：

```
WITH PivotData AS
(
    SELECT <grouping column>
        , <spreading column>
        , <aggregation column>
    FROM <source table>
)
SELECT <grouping column>, <distinct spreading values>
FROM PivotData
    PIVOT (<aggregation function>(<aggregation column>)
        FOR <spreading column> IN <distinct spreading values>)); 
```

[这](http://codebuildrepeat.blogspot.com/2019/04/pivot-and-unpivot-in-t-sql.html)给出了*分组、扩展和聚合*列如何从源转换为透视表的图形解释，如果这有帮助的话。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-14T18:40:32.937

```
 SELECT <non-pivoted column>,
    [first pivoted column] AS <column name>,
    [second pivoted column] AS <column name>,
    ...
    [last pivoted column] AS <column name>
FROM
    (<SELECT query that produces the data>)
    AS <alias for the source query>
PIVOT
(
    <aggregation function>(<column being aggregated>)
FOR
[<column that contains the values that will become column headers>]
    IN ( [first pivoted column], [second pivoted column],
    ... [last pivoted column])
) AS <alias for the pivot table>
<optional ORDER BY clause>;

USE AdventureWorks2008R2 ;
GO
SELECT DaysToManufacture, AVG(StandardCost) AS AverageCost 
FROM Production.Product
GROUP BY DaysToManufacture;

    DaysToManufacture          AverageCost
0                          5.0885
1                          223.88
2                          359.1082
4                          949.4105

    -- Pivot table with one row and five columns
SELECT 'AverageCost' AS Cost_Sorted_By_Production_Days, 
[0], [1], [2], [3], [4]
FROM
(SELECT DaysToManufacture, StandardCost 
    FROM Production.Product) AS SourceTable
PIVOT
(
AVG(StandardCost)
FOR DaysToManufacture IN ([0], [1], [2], [3], [4])
) AS PivotTable;

Here is the result set.
Cost_Sorted_By_Production_Days    0         1         2           3       4       
AverageCost                       5.0885    223.88    359.1082    NULL    949.4105 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-09-20T06:45:23.140

设置兼容性错误

在使用数据透视函数之前使用它

```
ALTER DATABASE [dbname] SET COMPATIBILITY_LEVEL = 100 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-02T16:49:22.647

[FOR XML PATH](https://stackoverflow.com/questions/55537490/is-or-is-not-for-xml-supported-in-sql-azure)可能不适用于 Microsoft Azure Synapse Serve。一种可能的替代方法，遵循@Taryn 动态生成的 cols 方法，使用[STRING_AGG](https://www.mssqltips.com/sqlservertip/5542/using-for-xml-path-and-stringagg-to-denormalize-sql-server-data/)获得相同的结果。

```
DECLARE @cols AS NVARCHAR(MAX), @query AS NVARCHAR(MAX)

SELECT @cols = STRING_AGG(QUOTENAME(c.phaseid),', ')
/*OPTIONAL: within group (order by cast(t1.[FLOW_SP_SLPM] as INT) asc)*/
FROM (SELECT phaseid FROM temp
GROUP BY phaseid) c

set @query = 'SELECT elementid,' + @cols + ' from 
             (
                select elementid,
                phaseid,
                effort
                from temp
            ) x
            PIVOT 
            (
                max(effort)
                for phaseid in (' + @cols + ')
            ) p '

execute(@query) 
```

# html - 如何使用 CSS 布局获得固定定位的页脚、固定宽度的右列和左列？

> ID：10428994
> 
> 赞同：1
> 
> 时间：2012-05-03T09:38:28.697
> 
> 标签：html, css, layout

我的问题似乎很基本，但我无法让它工作。

我正在尝试创建一个没有页眉的布局，一个始终位于底部的页脚和两列。右列具有固定宽度（770 像素），左列应使用其余空间。在左列中，将使用 OpenLayers，它将获取 Google 地图图像以填充空间。

该页面也需要在较小的屏幕上可见，并且应该在 FF、Chrome 和 IE7+ 中工作。我从最小宽度为 1200 像素的包装器开始。这适用于较小的屏幕。然后会出现滚动条。接下来，我在包装器内创建了 3 个 div：leftframe、rightframe、bottomframe。底部框架使用了这个 CSS：

```
bottom: 0; 
height: auto; 
left: 0; 
overflow: hidden; 
position: fixed; 
right: 0; 
top: auto; 
width: auto; 
min-width: 700px; 
z-index: 5000; 
```

这很好用。页脚总是很好地位于底部。

现在问题来了。当我调整视口大小或在小屏幕上显示页面时，leftframe 必须调整大小以填充剩余空间。我已经尝试了很多：浮动，位置。似乎正在工作的是绝对定位右框架并给左框架一个与右框架的宽度（770px）相同的边距：

```
#leftframe { 
  width:auto; 
  height: 100%; 
  margin-right: 770px;
}
#rightframe {
  position: absolute;
  right: 0;
  top: 0;
  width: 770px;
} 
```

这似乎也有效。至少在宽度上。

右边的框架动态填充了我使用 AJAX 获得的数据。在某些情况下，返回的数据大于我给包装器的最小高度。这对右框架来说很好，它的高度是调整的，但包装器的高度不是，因此左框架的高度也没有调整。这导致右框架高于我的左框架，并且我的左框架和页脚之间有一个空白区域。

如何解决这个问题？最好不使用 jQuery 或类似但仅使用 CSS。

[编辑] 使用 Zuul 提供的示例，我创建了这几行 jQuery，它现在似乎可以工作了。当我处理完 AJAX 数据时，会调用这些行。

```
var currentHeightRight = parseInt($("#rightframe").css("height").replace("px", ""), 10);
var currentHeightWrapper = parseInt($("#wrap").css("height").replace("px", ""), 10);
if (currentHeightRight > currentHeightWrapper)
{ 
  $("#wrap").css("height", currentHeightRight);
  $("#map").css("height", currentHeightRight);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:29:15.903

如果我正确理解了您的问题，我制作了一个 Fiddle 来展示解决您问题的方法：

[http://jsfiddle.net/zuul/TdTCU/](http://jsfiddle.net/zuul/TdTCU/)

此外，那里还有一个按钮，用于模拟全局调整大小:)

**笔记：**

此类问题的更好解决方案是包装器内元素的绝对位置。基本上为所有休息建立了一个结构。

# java - Autobean 和 XSS 问题

> ID：10428997
> 
> 赞同：1
> 
> 时间：2012-05-03T09:52:40.927
> 
> 标签：java, json, gwt, xss, autobean

我`Spring`在后端有一个应用`GWT`程序，在前端有一个应用程序。当用户登录时，''index.jsp'' 会将用户信息作为 javascript 变量输出。

我正在使用`AutoBeanFactory`将用户信息编码和解码为 json。
因为用户可以注册并且用户信息存储在数据库中，所以我尝试通过在 JSP 页面中转义用户信息来遵循[OWASP XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)。

我正在使用 esapi 库进行编码。服务器端代码如下所示：

```
public static String serializeUserToJson(CustomUser user) {
        String json;
        AppUserProxy appUserProxy = appUserFactory.appuser().as();
        appUserProxy.setFirstname(encoder.encodeForHTML(user.getFirstname()));
        appUserProxy.setLastname(encoder.encodeForHTML(user.getLastname()));
        AutoBean<AppUserProxy> bean = appUserFactory.appuser(appUserProxy);
        json = AutoBeanCodex.encode(bean).getPayload();
        return json;
    } 
```

我尝试使用`encodeForHTML`and `encodeForJavaScript()`。这适用于普通字符，但是一旦我使用变音字符（ü、ä、ö），我就会遇到问题。

如果我使用该`encodeforHTML()`函数，则 javascript 变量如下所示（注意 firstname 有一个 ü）：

```
var data = {'user':'{"email":"john.doe&#x40;gmail.com","lastname":"Doe","firstname":"&Uuml;ber"}'}; 
```

使用 Autobean 解码工作正常，但字符 ü 未正确显示，但 HTML 转义了一个 ( `&Uuml;ber`)。

当我使用该`encodeForJavaScript()`功能时，输出如下：

```
var data = {'user':'{"email":"john.doe&#x40;gmail.com","lastname":"Doe","firstname":"\\xDCber"}'}; 
```

当我尝试解码 JSON 字符串时，我遇到了一个奇怪的问题。在开发模式/托管模式下，解码工作正常，元音变音显示正确。但是，一旦我在生产模式下运行代码，我就会得到一个未捕获的异常：

```
java.lang.IllegalArgumentException: Error parsing JSON: SyntaxError: Unexpected token x
{"email":"john.doe&#x40;gmail.com","lastname":"Doe","firstname":"\xDCber"}
    at Unknown.java_lang_RuntimeException_RuntimeException__Ljava_lang_String_2V(Unknown Source)
    at Unknown.java_lang_IllegalArgumentException_IllegalArgumentException__Ljava_lang_String_2V(Unknown Source)
    at Unknown.com_google_gwt_core_client_JsonUtils_throwIllegalArgumentException__Ljava_lang_String_2Ljava_lang_String_2V(Unknown Source)
    at Unknown.com_google_gwt_core_client_JsonUtils_safeEval__Ljava_lang_String_2Lcom_google_gwt_core_client_JavaScriptObject_2(Unknown Source)
    at Unknown.com_google_web_bindery_autobean_shared_impl_StringQuoter_split__Ljava_lang_String_2Lcom_google_web_bindery_autobean_shared_Splittable_2(Unknown Source)
    at Unknown.com_google_web_bindery_autobean_shared_AutoBeanCodex_decode__Lcom_google_web_bindery_autobean_shared_AutoBeanFactory_2Ljava_lang_Class_2Ljava_lang_String_2Lcom_google_web_bindery_autobean_shared_AutoBean_2(Unknown Source)
    at Unknown.com_gmi_nordborglab_browser_client_mvp_main_UserInfoPresenter_onBind__V(Unknown Source) 
```

我可以想到以下解决方案：

1.  仅依赖输入验证（当数据存储在数据库中时）并删除输出编码。但这不是推荐的方法。
2.  用普通的 ASCII 字符（ü => ue）替换 Umlaute 并继续使用输出编码
3.  使用一些库来逃避 XSS 字符，但不考虑变音符号。

我很感谢一些反馈

**更新**：根据 Thomas 的建议，我现在`JsoSplittable`从 JSNI 传递一个，然后将其传递给`AutoBeanCodex.decode`函数。它在生产模式下运行良好，但在托管模式下我得到以下 NPE：

```
java.lang.NullPointerException: null
    at com.google.gwt.dev.shell.CompilingClassLoader$MyInstanceMethodOracle.findOriginalDeclaringClass(CompilingClassLoader.java:428)
    at com.google.gwt.dev.shell.rewrite.WriteJsoImpl.isObjectMethod(WriteJsoImpl.java:307)
    at com.google.gwt.dev.shell.rewrite.WriteJsoImpl.visitMethod(WriteJsoImpl.java:289)
    at com.google.gwt.dev.shell.rewrite.WriteJsoImpl$ForJsoInterface.visitMethod(WriteJsoImpl.java:228)
    at com.google.gwt.dev.asm.ClassAdapter.visitMethod(ClassAdapter.java:115)
    at com.google.gwt.dev.shell.rewrite.RewriteJsniMethods.visitMethod(RewriteJsniMethods.java:350)
    at com.google.gwt.dev.asm.ClassReader.accept(ClassReader.java:774)
    at com.google.gwt.dev.asm.ClassReader.accept(ClassReader.java:420)
    at com.google.gwt.dev.shell.rewrite.HostedModeClassRewriter.rewrite(HostedModeClassRewriter.java:251)
    at com.google.gwt.dev.shell.CompilingClassLoader.findClassBytes(CompilingClassLoader.java:1236)
    at com.google.gwt.dev.shell.CompilingClassLoader.findClass(CompilingClassLoader.java:1059)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

导致此异常的代码如下：

```
private native final JsoSplittable getJsoUserdata() /*-{
    if (typeof $wnd.user   !== 'undefined')
        return $wnd.user;
    return null;
}-*/;

@Override
public JsoSplittable getUserdata() {
    JsoSplittable user = null;
    user = getJsoUserdata();
    if (user != null) {
       String payload = user.getPayload();
       Window.alert(payload);
    }
    return user;
} 
```

Window.alert(payload) 在生产模式下工作正常。在托管模式下，当我进入时，`user.getPayload()` 我会`findOriginalDeclaringClass`在`CompilingClassLoader.java`. 似乎`declaringClasses`是空的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:44:27.547

你不应该明确地逃避任何事情；AutoBeans 已经为您做到了。或者更确切地说，如果您想逃避某些东西，请逃避 AutoBean 的输出`getPayload()`，而不是内脏。

您的问题是 AutoBeans`JSON.parse()`在可能的情况下使用本机（出于性能和安全原因），根据规范，它只支持`\uNNNN`各种转义，而不`\xHH`支持`encodeForJavaScript`输出。换句话说，ESAPI 需要一个`encodeForJSON`.